# StackOverflow 问答 12562000-12562999

# html - CSS 的语法：last-child - 不适用于我的代码

> ID：12562004
> 
> 赞同：1
> 
> 时间：2012-09-24T09:14:08.723
> 
> 标签：html, css, css-selectors, pseudo-class

我在我的网站上使用以下代码：

```
<div id="sidebar">
    <h1>Headline</h1>
    <ul class="nav">
        <a href=""><li>News</li></a>
        <a href=""><li>Unternehmen</li></a>
        <a href=""><li>Shop</li></a>
        <a href="" target="_blank"><li>Werbung</li></a>
    </ul>
    <h1>Mediathek</h1>
    <ul class="nav">
        <a href=""><li>one</li></a>
        <a href=""><li>two</li></a>
        <a href=""><li>three</li></a>
    </ul>
    <h1>Jobs</h1>
    <ul class="nav">
        <a href=""><li>Außendienstmitarbeiter</li></a>
        <a href=""><li>Ausbildung</li></a>
        <a href=""><li>Studentenpraktikum</li></a>
    </ul>
</div> 
```

现在我正在尝试选择 ul.nav 列表中的每个最后一个 li 元素。多次尝试后将无法正常工作。我希望有人能帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:17:07.350

那可能是因为你把`li`.`a`

使用此构造，您需要

```
ul.nav a:last-child li 
```

但是你应该把`a`里面的`li`然后做

```
ul.nav li:last-child 
```

在 HTML4 和 HTML5 中，一个`li`元素不能是任何类型的元素：

*   [关于 ul & li 的 HTML 4 参考](http://www.w3.org/TR/html401/struct/lists.html)
*   [关于 ul & li 的 HTML 5 参考](http://www.w3.org/TR/html-markup/li.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:19:30.827

尝试交换`<li>`和`<a>`. 代码应该是：

```
 <ul class="nav">
    <li><a href="">News</a></li>
    <li><a href="">Unternehmen</a></li>
    <li><a href="">Shop</a></li>
    <li><a href="" target="_blank">Werbung</a></li>
</ul> 
```

比我认为`ul.nav li:last-child`会奏效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:22:31.080

首先，您需要将锚点`<a>`放在列表项`<li>`元素中。

```
<div id="sidebar">
    <h1>Headline</h1>
    <ul class="nav">
        <li><a href="">News</a></li>
        <li><a href="">Unternehmen</a></li>
        <li><a href="">Shop</a></li>
        <li><a href="" target="_blank">Werbung</a></li>
    </ul>
    <h1>Mediathek</h1>
    <ul class="nav">
        <li><a href="">one</a></li>
        <li><a href="">two</a></li>
        <li><a href="">three</a></li>
    </ul>
    <h1>Jobs</h1>
    <ul class="nav">
        <li><a href="">Außendienstmitarbeiter</a></li>
        <li><a href="">Ausbildung</a></li>
        <li><a href="">Studentenpraktikum</a></li>
    </ul>
</div>​ 
```

然后你可以使用选择器：

```
ul.nav li:last-child a
{
    color: #f00;
}​ 
```

这将完美地工作。

[http://jsfiddle.net/Kyle_Sevenoaks/SLB4f/](http://jsfiddle.net/Kyle_Sevenoaks/SLB4f/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:20:19.093

你正在寻找的是'：last-child'

```
ul.nav a:last-child{
    // code here
} 
```

我还创建了一个显示这个非常有用的选择器的 JSFiddle：http: [//jsfiddle.net/RhKH6/](http://jsfiddle.net/RhKH6/)
以下是“N-th Child”选择器的其他有用配方：http: [//css-tricks.com/useful-nth -儿童食谱/](http://css-tricks.com/useful-nth-child-recipies/)

# tabs - 在 redmine 2.0.3 中添加自定义选项卡

> ID：12562006
> 
> 赞同：1
> 
> 时间：2012-09-24T09:14:17.507
> 
> 标签：tabs, redmine

我想将自定义选项卡添加到我的 redmine 项目中，这将是一个指向嵌套在 IFRAME 中的网页的静态链接。我找到[了这个线程](http://www.redmine.org/boards/2/topics/20?r=2165)，我认为我的问题已经解决了，我不需要学习 ruby​​。

但后来我注意到该插件已经快 4 年了，并且与当前版本不兼容（我安装了 2.0.3）。当我已经让它运行时，它仍然会引发错误并且插件配置页面无法正常工作。底线：我无法添加任何新标签。

是否有人遇到过类似的问题，或者可能有一种解决方法/另一种方法来添加一个简单的自定义选项卡/iframe 到 redmine 而无需过多地挖掘源代码？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:48:40.593

实际插件是最新的。查看项目 git 页面。

[https://github.com/jamtur01/redmine_tab](https://github.com/jamtur01/redmine_tab)

# asp.net - Findcontrol 和客户端对象

> ID：12562012
> 
> 赞同：0
> 
> 时间：2012-09-24T09:14:27.523
> 
> 标签：asp.net, updatepanel

1 - 是否可以处理通过java脚本或页面中的其他方式动态生成的控件？

2-找到控制的机制是什么，如果我有我`TextBox`的`UpdatePanel`？

例如，我如何获取已添加到表中的控件（文本框）的值：

```
for (int i = 0; i < rowsCount; i++)
        {
            TableRow row = new TableRow();
            for (int j = 0; j < colsCount; j++)
            {
                TableCell cell = new TableCell();
                TextBox tb = new TextBox();
                tb.ID = "txtSabeghe_" + (i + 1) + "Col_" + (j + 1);
                cell.Controls.Add(tb);
                row.Cells.Add(cell);
            }
            Table5.Rows.Add(row);
        } 
```

功能表和按钮都在更新面板中以避免回发

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:25:37.080

你的问题太笼统了，但我会尽力根据我的“想法”回答你的问题。

1.  是的，所有 .net 控件在 DOM 中呈现为 HTML，因此您可以像处理 DOM 元素一样处理它们，除了 .net 在`id`属性中呈现带有额外内容的 DOM，即**ctl_001_**等，因此您需要使用该`ClientID`属性。您当然可以在 web.config中设置`ClientIDMode`为，[如本文所示](http://msdn.microsoft.com/en-us/library/1d04y8ss%28v=vs.100%29.aspx)，这将保留您指定的 ID。`Static`

    ```
    <asp:TextBox runat="server" id="mytextbox" /> 
    ```

    还有你的剧本。

    ```
    // without ClientIDMode = 'Static'
    var element = document.getElementById('<%=mytextbox.ClientID%>');

    // with ClientIDMode = 'Static'
    var element = document.getElementById('mytextbox'); 
    ```

2.  `Control.FindControl`是一个服务器端方法（`Control`基类的），它接受您要查找的控件的 ID（作为字符串），可以按如下方式使用。

    ```
    <asp:Panel runat="server" id="mypanel">
        <asp:TextBox runat="server" id="mytextbox" />
    </asp:Panel> 
    ```

    并且在你的代码后面。

    ```
    TextBox tbx = mypanel.FindControl("mytextbox"); 
    ```

**编辑 - 使用母版页查找控件**

如果您想使用母版页找到您的控件，您最好像这样过滤父级。

```
// parent place holder in master page
ContentPlaceHolder cph = (ContentPlaceHolder)this.Master.FindControl("ContentPlaceHolderID");

// parent panel in content place holder
UpdatePanel pnl = cph.FindControl("UpdatePanelID");

// child of parent that you're interested in
TextBox tbx = pnl.FindControl("TextBoxID"); 
```

# python - 使用 PKCS5 Python 进行 AES 解密填充

> ID：12562021
> 
> 赞同：12
> 
> 时间：2012-09-24T09:15:20.037
> 
> 标签：python, aes, pycrypto, cbc-mode

我一直在尝试在 Python 中实现 AES CBC 解密。由于密文不是 16 字节的倍数，因此需要填充。没有填充，这个错误浮出水面

“TypeError：奇数长度的字符串”

但是我找不到在 PyCrypto Python 中实现 PKCS5 的正确参考。是否有任何命令可以实现这一点？谢谢

在查看了马库斯的建议后，我这样做了。

我的目标实际上是使用此代码解密十六进制消息（128 字节）。但是，输出是“？：”，它非常小，并且 unpad 命令正在删除这些字节。这是代码。

```
from Crypto.Cipher import AES
BS = 16
pad = lambda s: s + (BS - len(s) % BS) * chr(BS - len(s) % BS) 
unpad = lambda s : s[0:-ord(s[-1])]

class AESCipher:
    def __init__( self, key ):
    self.key = key 

    def encrypt( self, raw ):
        raw = pad(raw)
        iv = raw[:16]
        raw=raw[16:]
        #iv = Random.new().read( AES.block_size )
        cipher = AES.new( self.key, AES.MODE_CBC, iv )
        return ( iv + cipher.encrypt( raw ) ).encode("hex")

    def decrypt( self, enc ):
        iv = enc[:16]
        enc= enc[16:]
        cipher = AES.new(self.key, AES.MODE_CBC, iv )
        return unpad(cipher.decrypt( enc))

mode = AES.MODE_CBC
key = "140b41b22a29beb4061bda66b6747e14"
ciphertext = "4ca00ff4c898d61e1edbf1800618fb2828a226d160dad07883d04e008a7897ee2e4b7465d5290d0c0e6c6822236e1daafb94ffe0c5da05d9476be028ad7c1d81";
key=key[:32]
decryptor = AESCipher(key)
decryptor.__init__(key)
plaintext = decryptor.decrypt(ciphertext)
print plaintext 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-15T14:49:51.080

您需要在解密之前解码您的十六进制编码值。如果您想使用十六进制编码的密钥，也可以对其进行解码..

在这里，这应该工作。

```
from Crypto.Cipher import AES
from Crypto import Random

BS = 16
pad = lambda s: s + (BS - len(s) % BS) * chr(BS - len(s) % BS) 
unpad = lambda s : s[0:-ord(s[-1])]

class AESCipher:
    def __init__( self, key ):
        """
        Requires hex encoded param as a key
        """
        self.key = key.decode("hex")

    def encrypt( self, raw ):
        """
        Returns hex encoded encrypted value!
        """
        raw = pad(raw)
        iv = Random.new().read(AES.block_size);
        cipher = AES.new( self.key, AES.MODE_CBC, iv )
        return ( iv + cipher.encrypt( raw ) ).encode("hex")

    def decrypt( self, enc ):
        """
        Requires hex encoded param to decrypt
        """
        enc = enc.decode("hex")
        iv = enc[:16]
        enc= enc[16:]
        cipher = AES.new(self.key, AES.MODE_CBC, iv )
        return unpad(cipher.decrypt( enc))

if __name__== "__main__":
    key = "140b41b22a29beb4061bda66b6747e14"
    ciphertext = "4ca00ff4c898d61e1edbf1800618fb2828a226d160dad07883d04e008a7897ee2e4b7465d5290d0c0e6c6822236e1daafb94ffe0c5da05d9476be028ad7c1d81"
    key=key[:32]
    decryptor = AESCipher(key)
    plaintext = decryptor.decrypt(ciphertext)
    print "%s" % plaintext 
```

# audio - 在几毫秒内使用 Sox 修剪音频文件

> ID：12562023
> 
> 赞同：17
> 
> 时间：2012-09-24T09:15:28.463
> 
> 标签：audio, sox

有没有办法用 SoX 修剪文件的结尾，以毫秒为单位，我试过这个：

```
sox tracks\5_7.mp3 ntracks\05_7.mp3 trim 2 2.195 
```

但是，它只是说`End position is after expected end of audio`即使文件实际上很长。

所以我试图让这首歌长 2.000 秒，而不是 2.195 秒，而且，我用 600 多个文件这样做，所以需要从命令行完成。

这是我的警告：

```
sox WARN mp3: MAD lost sync"(this always happens, means nothing) 
sox WARN trim: Last 1 position(s) not reached (audio shorter than expected)
sox WARN sox: 'tracks\01_1.mp3' balancing clipped 3 samples; decrease volume? 
```

该音频文件用于“00:00:02.19”。

输入命令行的行是：

```
sox -v3 tracks\01_1.mp3 ntracks\01_1.mp3 trim 2 0.19 pause 
```

这是我详细的开始：

```
D:\Stuff\Habbo trax maker\trax maker\mp3support>sox -V3 tracks\01_1.mp3 ntracks\
01_1.mp3 trim 2 0.19
sox:      SoX v14.4.0

Input File     : 'tracks\01_1.mp3'
Channels       : 1
Sample Rate    : 44100
Precision      : 16-bit
Duration       : 00:00:02.19 = 96755 samples = 164.549 CDDA sectors
File Size      : 17.6k
Bit Rate       : 64.0k
Sample Encoding: MPEG audio (layer I, II or III)

sox INFO sox: Overwriting `ntracks\01_1.mp3'
sox INFO mp3: using MP3 encoding defaults

Output File    : 'ntracks\01_1.mp3'
Channels       : 1
Sample Rate    : 44100
Precision      : 24-bit
Sample Encoding: MPEG audio (layer I, II or III)
Comment        : 'Processed by SoX'

sox INFO sox: effects chain: input        44100Hz  1 channels
sox INFO sox: effects chain: trim         44100Hz  1 channels
sox INFO sox: effects chain: output       44100Hz  1 channels
sox WARN mp3: MAD lost sync
sox WARN trim: Last 1 position(s) not reached (audio shorter than expected). 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-24T09:28:13.153

如果要以毫秒精度进行修剪，请指定它：

```
sox in.mp3 out.mp3 trim 2 0.195 
```

以 2 秒的偏移量节省 195 毫秒`in.mp3`to `out.mp3`。

如果您只想要文件的前两秒，请像这样使用修剪：

```
sox in.mp3 out.mp3 trim 0 2 
```

如果你想跳过文件的前两秒使用 trim 像这样：

```
sox in.mp3 out.mp3 trim 2 
```

如果要从文件末尾修剪 195 毫秒，请使用[*gerald 的*](https://stackoverflow.com/a/14297223/1331399)答案。

手册摘录：

```
trim start [length|=end]
   The optional length parameter gives the length of audio to output after the 
   start sample and is thus used to trim off the end of the audio.
   Alternatively, an absolute end location can be given by preceding it with 
   an equals sign. Using a value of 0 for the start parameter will allow trimming
   off the end only. 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-12T19:41:29.307

您是否尝试过像这样使用反向命令：

```
sox tracks\5_7.mp3 ntracks\05_7.mp3 reverse trim 0.195 reverse 
```

这应该丢弃文件的最后 0.195 毫秒（它对我有用）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-01-20T06:37:44.230

你应该像这样使用以毫秒为单位进行修剪

```
trim 26.26 =32.3245678 
```

这意味着它将修剪 26.26 秒，精确到 32.3245678 秒

这会给你准确的结果

使用此`=`选项，我们需要给出时间的结束而不是前面的持续时间`=`

我希望这能解决你的问题

# jasper-reports - 带有“溢出时拉伸”的文本字段间距？

> ID：12562025
> 
> 赞同：6
> 
> 时间：2012-09-24T09:15:32.463
> 
> 标签：jasper-reports, overflow, ireport, spacing, stretch

我目前正在使用*iReport 4.7.0*设计报告。目前我正试图弄清楚如何动态调整*textField*的高度，如果它的内容对于初始高度来说太大了。看起来，选项***Stretch on overflow***实现了这一点。但我有问题。

如果*textField*没有被拉伸，则文本前后的间距是好的，因为它是通过将*textField*的高度设置为高于字体大小来实现的。但是，如果*textField*由于包含的文本太长而无法以初始高度显示而动态变大，则行看起来非常拥挤，没有任何间距。

我尝试通过为特定的*textField设置****Spacing before***和***Spacing after***来解决这个问题，但这似乎以*JasperReports*的想法结束，即*textField*根本不需要重新调整大小，即使文本不合适。

 ***如果在溢出时需要调整*textField*的大小，是否有可能在计算时考虑由***Spacing before***和***Spacing after选项创建的大小？***还是我在这里做错了什么？

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-27T11:47:41.210

使用填充：

1.  右键单击一个元素
2.  选择**填充和边框**

-或者-

1.  右键单击一个元素
2.  选择**显示属性**
3.  单击**边框**选项卡
4.  根据需要设置填充值

[![示例填充](../Images/ac22c29ee80d93068dd4ee38d6f8a6d0.png)](https://i.stack.imgur.com/m7Lcg.png)

即使盒子调整大小，这也应该提供一个恒定的间距。对于复杂的布局，请尝试元素的浮动位置，如此处[所述](https://stackoverflow.com/questions/10412495/stretch-a-row-with-data-overflow-while-having-multiple-rows-in-a-single-band)。****

# android - 向上动态修改按钮高度

> ID：12562028
> 
> 赞同：0
> 
> 时间：2012-09-24T09:15:47.960
> 
> 标签：android, android-layout, android-button, layoutparams

我正在尝试使用按钮创建类似图形的结构。
我想根据搜索栏的值动态修改这些按钮的高度。

![截屏](../Images/9670d04a37e65a99553978e675311dc0.png)

我可以按照屏幕截图 1 所示实现这一点。但问题是按钮的高度向下增长（这是它们的默认行为）。

* * *

如何使按钮向上生长，如下所示？ ![截屏](../Images/deb28074544a17947fc3a57296d5fff9.png)

**xml**

```
 <Button
        android:id="@+id/btnGraph"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/seekBar"
        android:background="#99f"/>

     <Button
        android:id="@+id/btnGraph2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/seekBar"
        android:layout_toRightOf="@id/btnGraph"
        android:background="#9f9"/> 
```

* * *

**活动**

```
public void onProgressChanged(SeekBar seekBar, int progress,
        boolean fromTouch) {
    tvValue.setText("Value = " + progress);

 // NEGATIVE HEIGHT WONT WORK HERE...
    lp = new RelativeLayout.LayoutParams(new ViewGroup.MarginLayoutParams(
            50, progress * 10));
    lp.setMargins(10, 300, 0, 0);
    btnGraph.setLayoutParams(lp);

    lp = new RelativeLayout.LayoutParams(new ViewGroup.MarginLayoutParams(
            50, progress * 5));

    lp.setMargins(100, 300, 0, 0);
    btnGraph2.setLayoutParams(lp);
} 
```

我在做傻事吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:16:12.930

由于不涉及相对位置，因此在 LinearLayout 中可以更轻松地完成它。在相对布局中扭曲按钮并使用 weight 属性控制按钮的高度。

XML

```
<RelativeLayout>
<LinearLayout
android:layout_width="match_parent"
android:layout_height="400dp"
android:layout_alignParentLeft="true"
android:layout_marginBottom="50dp" 
android:layout_alignParentBottom="true"
android:weightSum="1"
android:orientation="vertical"
android:gravity="bottom">

<Button
    android:id="@+id/sample_button"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="0.1"
    android:text="Hello" 
   />
</LinearLayout>
</RelativeLayout> 
```

您可以按以下方式以编程方式设置权重

```
b.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, 0,count*0.1f)); 
```

这对我有用。然而，这里重要的是设置 LinearLayout 的重力（您也可以通过编程方式进行）。

# iphone - 通过 GDataXML 解析 RSS

> ID：12562029
> 
> 赞同：1
> 
> 时间：2012-09-24T09:15:56.897
> 
> 标签：iphone, objective-c, rss, gdataxml

我想解析具有相同名称但不同值的孩子的 rss。在这种情况下，我想解析来自子名称“类别”的值。

这是RSS格式：

```
<item><title>HAC Algorithm by holiccorp</title>
<link>http://www.freelancer.com/projects/PHP-Javascript/HAC-Algorithm.html</link>
<description>Need someone good at javascript coding and HAC Algorithm.    I need someone   to create and analyze the code,script and logic.    More details will be given after discussion.    ASAP project. (Budget: &#36;30-&#36;250 USD, Jobs: Algorithm, HTML, Javascript, PHP, Website Testing)</description>
<pubDate>Sun, 23 Sep 2012 13:20:17 -0400</pubDate>
<guid isPermaLink="false">Freelancer.com_project_2509687</guid>
<category domain="http://www.freelancer.com/jobs/">Algorithm</category>
<category domain="http://www.freelancer.com/jobs/">HTML</category>
<category domain="http://www.freelancer.com/jobs/">Javascript</category>
<category domain="http://www.freelancer.com/jobs/">PHP</category>
<category domain="http://www.freelancer.com/jobs/">Website Testing</category>
<coop:keyword>Algorithm</coop:keyword>
<coop:keyword>HTML</coop:keyword>
<coop:keyword>Javascript</coop:keyword>
<coop:keyword>PHP</coop:keyword>
<coop:keyword>Website Testing</coop:keyword>
<coop:keyword>project 2509687</coop:keyword>
<coop:keyword>HAC Algorithm</coop:keyword>
</item> 
```

我做了这样的事情：

```
NSArray *channels = [rootElement elementsForName:@"channel"];
for (GDataXMLElement *channel in channels) {            

    NSString *blogTitle = [channel valueForChild:@"title"];                    
    NSLog(@"blogTitle %@",blogTitle);
    NSArray *items = [channel elementsForName:@"item"];
    for (GDataXMLElement *item in items) {

        NSString *articleTitle = [item valueForChild:@"title"];
        NSString *articleUrl = [item valueForChild:@"link"];            
        NSString *articleDateString = [item valueForChild:@"pubDate"];
        NSString *articleDescription = [item valueForChild:@"description"];
        NSDate *articleDate = [NSDate dateFromInternetDateTimeString:articleDateString formatHint:DateFormatHintRFC822];
        NSDate *timeStamp = [NSDate date];
        NSString *category = [item valueForChild:@"category"];
 } 
```

在这段代码中，我只从子名称类别中获得了第一个值。我如何解析这个孩子的所有价值并在一行中显示？任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:44:13.193

您必须更多地研究**GDataXML属性解析**方法

以下链接可能对您有所帮助

[用于解析 XML 和获取属性的示例代码](https://stackoverflow.com/questions/3028020/ask-for-an-example-code-for-parsing-xml-and-get-attributes-by-using-gdata-api)

[解析-xml-属性-使用-gdataxmldocument](https://stackoverflow.com/questions/7347265/parsing-xml-attribute-using-gdataxmldocument)

[在此处](http://iphonebyradix.blogspot.in/2011/03/using-gdata-to-parse-xml-file.html)查看 GData 示例

# android - android 使用画布绘图缩放和平移图像

> ID：12562031
> 
> 赞同：-1
> 
> 时间：2012-09-24T09:16:00.257
> 
> 标签：android, android-canvas

我正在研究 android 2D 图形。我的要求很简单。我必须在图像周围缩放和平移，我需要在特定的地方画画（自由手绘）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:21:24.123

hello [see](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-6-implementing-the-pinch-zoom-gesture/1847) this its exactly as per your requirement..:):) good luck

# asp.net - infragistics 的 webdatagrid 中的 Rowdatabound 等效项

> ID：12562036
> 
> 赞同：1
> 
> 时间：2012-09-24T09:16:06.293
> 
> 标签：asp.net, gridview, infragistics, webdatagrid

我正在寻找我们在 asp.net gridview 中的行数据绑定事件。我想要达到的就是这个。

```
e.row.rowtype == datacontrolrowtype.datarow 
```

关于 webdata 网格的数据绑定事件，但它不起作用，所以我该如何实现这一点。关于如何获取行类型及其事件的建议会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:23:23.700

好的，不是 100% 确定实现“这个”是什么意思，但是.. WebDataGrid 提供了此类事件的 2 个版本，因此无论您尝试什么，都可能与这些有关。据我得到您的代码行，您只对数据行感兴趣，并且据我所知，仅针对数据行触发以下与行相关的事件（根据我的经验，绝对不适用于标题或摘要行）：

*   **服务器端**：当网格绑定到数据源中的记录时引发[InitializeRow 事件。](http://help.infragistics.com/NetAdvantage/ASPNET/2012.1/CLR4.0/?page=Infragistics4.Web.v12.1~Infragistics.Web.UI.GridControls.WebHierarchicalDataGrid~InitializeRow_EV.html)您可以在通用控件属性中找到它，或者将其添加到标记中的顶层，`<ig:WebDataGrid oninitializerow="WebDataGrid1_InitializeRow"...` 在处理程序中您可以访问网格和行，并且始终为每个数据行触发此事件：

    ```
     protected void WebDataGrid1_InitializeRow(object sender, Infragistics.Web.UI.GridControls.RowEventArgs e)
    {
        // Use:
        //e.Row.DataItem
        //e.Row.DataKey
        //e.Row.Index
    } 
    ```

*   **Client Side** [Row Rendered](http://help.infragistics.com/NetAdvantage/ASPNET/2012.1/CLR4.0/?page=Infragistics4.Web.v12.1~Infragistics.Web.UI.GridControls.GridClientEvents~RowRendered.html) / [-ing](http://help.infragistics.com/NetAdvantage/ASPNET/2012.1/CLR4.0/?page=Infragistics4.Web.v12.1~Infragistics.Web.UI.GridControls.GridClientEvents~RowRendering.html)事件，仅在启用客户端绑定/渲染时触发。在一行被渲染到 DOM 之后/之前触发的事件，通过添加`<ClientEvents RowRendered="test" />`where test 是 JavaScript 中处理函数的名称来设置：

    ```
    function test(webDataGrid, evntArgs) {
         //The data object with all attributes
         evntArgs.get_dataItem();

         //Reference to the actual TR element
         evntArgs.get_rowElement();

         //Returns index of the row inside of its container collection.
         evntArgs.get_index();

         //Returns data key of the row. It is always an array of objects even in a case of a single data key field.
         evntArgs.get_dataKey();
     } 
    ```

我认为你应该能够用这些做你想做的事情。

# ruby - Puppet 提供程序中的布尔属性

> ID：12562038
> 
> 赞同：0
> 
> 时间：2012-09-24T09:16:23.683
> 
> 标签：ruby, puppet

我正在编写一个 Puppet 提供程序，我需要一个布尔属性。我宣布它：

```
newproperty(:no_sync, :boolean => true) do
  desc "Whether to omit syncing the file after every logging, ony when action_type is file."
end 
```

然后我需要`no_sync`在提供程序中声明应该返回的函数`true`or `false`。但是，当我这样做时，返回的值似乎没有被 Puppet 正确解释。我试过返回字符串（`:true`和`:false`分别），但结果它们总是被解释为真（这很合乎逻辑）。

我们应该如何在 Puppet 提供者中声明布尔属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:14:21.793

`:true`从提供者方法返回符号`:false`是正确的做法。

您可以查看[macauthorization 源代码](https://github.com/puppetlabs/puppet/blob/2.7.19/lib/puppet/type/macauthorization.rb#L57-69)，了解如何定义类型的示例。此类型的提供程序返回`:true`或`:false`。

# math - 将笛卡尔坐标转换为地理坐标

> ID：12562042
> 
> 赞同：0
> 
> 时间：2012-09-24T09:16:37.677
> 
> 标签：math, coordinates, coordinate-systems, proj, pyproj

我有一个画布，当我绘制时，我可以在其中获取像素的位置。例如，X=1，Y=5。所以，我必须把它投射到真正的墙上。我知道墙的每个下角的地理坐标以及宽度和高度。

如何从笛卡尔坐标转换为地理坐标？

谢谢。

# javascript - 在js中替换字符串的最快方法？

> ID：12562043
> 
> 赞同：7
> 
> 时间：2012-09-24T09:16:39.297
> 
> 标签：javascript, jquery, html-encode

当我向服务器提交/发布数据时，我需要对其字符（相关字符）进行 HTML 编码，因为通过设置禁用输入检查*不是***一个**`validationRequest = false`好习惯。

 **所有解决方案*最终*都替换了字符串中的字符：

这就是我写的。

```
function htmlEncode(str) {
    str = str.replace(/\&/g, "&amp;");
    str = str.replace(/\</g, "&lt;");
    str = str.replace(/\>/g, "&gt;");
    str = str.replace(/ /g, "&nbsp;");
    return str;
} 
```

但是显然正则表达式可以用更快的东西代替（不要误会我的意思——我喜欢正则表达式）。

此外，使用索引 + 子字符串似乎很浪费。

最快的方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T09:20:13.830

```
function htmlEncode(str) {
    return String(str)
            .replace(/&/g, '&amp;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
} 
```

[**jsperf 测试表明**](http://jsperf.com/htmlencoderegex)，如果您使用的是最新的浏览器版本，此方法速度很快，并且可能是最快的选择

另一种方式也喜欢这个

```
function htmlEncode(value){
  return $('<div/>').text(value).html();
}

function htmlDecode(value){
  return $('<div/>').html(value).text();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:19:57.533

如果您只是编码 HTML 实体，您可以尝试：

```
function htmlEncode(str) {
    var d = document.createElement('b');
    d.innerText = str;
    return d.innerHTML;
} 
```

这种方式并不是*最快的*。此测试表明 regExp 更快：http: [//jsperf.com/encodehtml](http://jsperf.com/encodehtml)

但是，您使用的 HTML 越多，差异似乎就越小。

innerText 方法似乎更可靠，因为它将利用实体的本机浏览器转换表。使用 RegExp，您总是有可能遗漏某些内容，并且正如[之前的一些答案所表明](https://stackoverflow.com/a/1732454/210578)的那样，使用 RegExp 使用 HTML 并不总是最佳的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:23:25.503

```
function htmlEncode(value){
    if (value) {
        return jQuery('<div />').text(value).html();
    } else {
        return '';
    }
}

function htmlDecode(value) {
    if (value) {
        return $('<div />').html(value).text();
    } else {
        return '';
    }
} 
```**

# php - 如何动态更改输入值

> ID：12562046
> 
> 赞同：-1
> 
> 时间：2012-09-24T09:16:49.317
> 
> 标签：php, html

我想根据 $_POST 变量更改输入值。像这样的东西：

```
<?php if ($_POST['yourname'] != "") 
    { 
        $('input[name=yourname]').attr('title', $_POST['yourname']); 
    } ?> 
```

但它不起作用。我怎样才能做到这一点？

谢谢！

编辑：我有这个输入：

```
<input class="clearme" name="yourname" type="text" title="Insert your name"  /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:22:39.963

直接在html中添加：

```
<input class="clearme" name="yourname" type="text" title="Insert your name" value="<?php echo isset($_POST['yourname']) ? $_POST['yourname'] : ''; ?>"  /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:21:38.787

You can't use javascript in PHP. PHP runs on the server, while javascript runs in the clients browser.

You need to do this in pure javascript, not PHP.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:21:50.677

Try this in the one file, replacing 'name_of_cur_file.php' with the name of the current php file.:

```
<?php

if($_POST['yourname'] > ""){
$yourname = $_POST['yourname'];
}else{
$yourname = ""; // set to avoid errors
}
?>
<form action="name_of_cur_file.php" method="post">
<input type="text" value="<?php echo $yourname;?>" />
<input type="submit" value="go" />
</form> 
```

WARNING!!! - Lacking any validation for this example!!!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:22:22.293

If you want the code sent from the server to execute then:

```
<?php if ($_POST['yourname'] != "") 
    { 
        <script type="text/javascript">
             $(document).ready(function () {
                 $('input[name=yourname]').attr('title', $_POST['yourname']);
             });
        </script>
    } ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T09:22:22.620

You have jquery code in php.You have complete first php tag then you have write your jquery code in script code like

```
<?php if ($_POST['yourname'] != "") 
    { 
?>
      <script>
        $('input[name=yourname]').attr('title', $_POST['yourname']); 
      </script>
<?php
    } ?> 
```

You can also write php code only like

```
 <?php 
$title="Insert your name";
if ($_POST['yourname'] != "") 
        { 

           $title=$_POST['yourname'];

        } ?>

<input class="clearme" name="yourname" type="text" title="<?php echo $title; ?>" /> 
```

# html - 谷歌浏览器奇怪的风格行为与悬停时的负边距

> ID：12562047
> 
> 赞同：2
> 
> 时间：2012-09-24T09:16:57.893
> 
> 标签：html, css, google-chrome

我有这个 HTML 代码：

```
<nav id="menu">
    <ul>
        <li>
            <a href="#">Item1</a>
            <a href="#" class="alt">Item1</a>
        </li>
        <li>
            <a href="#">Item2</a>
            <a href="#" class="alt">Item2</a>
        </li>
    </ul>
</nav> 
```

[演示页面](http://dl.dropbox.com/u/9123555/menu-transition-chrome-test/index-simple.html)

如您所见，这是一个菜单，每个项目都有 2 个链接。菜单是水平的，目的是在项目未悬停时隐藏“alt”链接，并在悬停时显示它。

因此，每个`<li>`元素都是一个具有特定高度（34px）的框，每个链接的高度也是 34px，因此“alt”链接位于主链接下方，并且被隐藏。

当项目悬停时，34px 的负上边距应用于主链接，使“alt”出现。

但是当“悬停”时，谷歌浏览器并没有真正应用 0 的上边距，您可以在我制作的[演示页面](http://dl.dropbox.com/u/9123555/menu-transition-chrome-test/index-simple.html)上注意到。只需在链接上悬停几次，您就会注意到元素没有放回正确的位置。

我该如何解决？出于更复杂的原因，我需要保留 2 个链接（主要和“alt”），演示被简化。

供您参考，这里是 CSS：

```
nav#menu {
    background-color: #e9e9e9;
}

nav#menu > ul {
    margin: 0;
    height: 39px;
    display: block;
    list-style-type: none;
}

nav#menu > ul > li {
    display: inline-block;
    height: 34px;
    overflow: hidden;
    width: 200px;
}

nav#menu > ul > li > a {
    display: block;
    height: 34px;
    line-height: 34px;
}

nav#menu > ul > li > a:first-child {
    margin-top: 0;
}

nav#menu > ul > li:hover > a:first-child {
    margin-top: -34px;
}

nav#menu > ul > li > a.alt {
    color: white;
    background-color: #8d8d8d;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:25:17.077

对不起所有的评论。我试图让它发挥作用，只是大声思考。这是您正在寻找的解决方案...

您需要更改其中两种样式。

```
/* add the overflow: hidden; to the end of this tag set */
nav#menu > ul {  .... overflow: hidden;  }  

/* replace the inline-block with float:left;*/
nav#menu > ul > li { float:left; height: 34px; overflow: hidden; width: 200px; } 
```

这是工作链接[jsFiddle](http://jsfiddle.net/5wbZU/1/)

# objective-c - ARC 转换的应用程序在最后一次调用 .cxx_destruct 时崩溃

> ID：12562058
> 
> 赞同：4
> 
> 时间：2012-09-24T09:17:33.907
> 
> 标签：objective-c, xcode, automatic-ref-counting

下面是我的应用程序崩溃的线程的堆栈跟踪。我最近将我的应用程序转换为 ARC。最后一个调用是 HomePageViewController 的 cxx_destruct，它是我在 tabviewcontroller 中的一个选项卡的 rootviewcontroller。appdelegate 实现文件没有为编译启用 ARC，因此 HomePageViewController 一旦添加到 appdelegate 文件中的 tabbarviewcontroller 就会被释放。HomePageViewController 实现文件具有用于编译的 ARC 启用标志。有人可以指导我正确的方向。

```
0   libobjc.A.dylib                 0x35bcdf2a objc_release
1   MySample                        0x00096142 -[HomePageViewController .cxx_destruct] + 402
2   libobjc.A.dylib                 0x35bcff3a object_cxxDestructFromClass(objc_object*, objc_class*)
3   libobjc.A.dylib                 0x35bcd0ce objc_destructInstance
4   libobjc.A.dylib                 0x35bcd3a2 object_dispose
5   UIKit                           0x37b05c84 -[UIViewController dealloc]
6   MySample                        0x00095afa -[HomePageViewController dealloc] + 218
7   libobjc.A.dylib                 0x35bcd484
8   CoreFoundation                  0x3801343c _CFAutoreleasePoolPop
9   UIKit                           0x37a46d94 _wrapRunLoopWithAutoreleasePoolHandler
10  CoreFoundation                  0x380a56ca __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__
11  CoreFoundation                  0x380a39bc __CFRunLoopDoObservers
12  CoreFoundation                  0x380a3d12 __CFRunLoopRun
13  CoreFoundation                  0x38016eb8 CFRunLoopRunSpecific
14  CoreFoundation                  0x38016d44 CFRunLoopRunInMode
15  GraphicsServices                0x35ccc2e6 GSEventRunModal
16  UIKit                           0x37a8e2fc UIApplicationMain
17  MySample                        0x0002be98 main + 116
18  MySample                        0x0000315c start + 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T21:19:05.187

上面的评论是正确的；您似乎在该视图控制器上手动调用 release ，这是 ARC 不允许的。只需删除该呼叫，您就应该可以开始使用了。

另外，您为什么将您的应用程序委托排除在 ARC 之外？如果您使用的是 Core Data，那么除了 Core Data 堆栈之外，该类中甚至不应该*有太多代码......*

# php - PHP：For循环只迭代一次

> ID：12562059
> 
> 赞同：-1
> 
> 时间：2012-09-24T09:17:34.320
> 
> 标签：php, mysql, function, for-loop, iteration

我有一个函数，用于 php 游戏，其中有一个 for 循环检查房间 ID。基本上，for 循环只运行一次，而它应该运行两次。下面的代码块说明了（第一个带有 $i 的 for 循环）：

```
// successful sql login & $player is correctly set with '', and all below sql
// statements execute correctly. $count is 2
function setMonstersLocation($player,$rooms_id){
if (mysql_result(mysql_query("SELECT state FROM present WHERE player = $player AND items_id IS NULL AND monsters_id IS NULL AND quantity IS NULL AND rooms_id IS NOT NULL"),0) == 0){
    $sql = mysql_query("SELECT COUNT(*) FROM present WHERE player = $player AND items_id IS NULL AND monsters_id > 100 AND monsters_id < 300");
    $count = mysql_result($sql,0);
    $sql = mysql_query("SELECT monsters_id FROM present WHERE player = $player AND items_id IS NULL AND monsters_id > 100 AND monsters_id < 300 ORDER BY monsters_id");
    for ($i = 0; $i < $count; $i+= 1) {
        $sql = mysql_query("SELECT monsters_id FROM present WHERE player = $player AND items_id IS NULL AND monsters_id > 100 AND monsters_id < 300 ORDER BY monsters_id");
        $result = mysql_result($sql,$i);
        if (mysql_result(mysql_query("SELECT COUNT(*) FROM present WHERE player = $player AND items_id IS NULL AND monsters_id=$result AND quantity = 1"),0) == 1){
            $final = -1;
            $array[1] = $rooms_id - 1;
            $array[2] = $rooms_id + 1;
            $array[3] = $rooms_id - 100;
            $array[4] = $rooms_id + 100;
            $array[5] = $rooms_id - 200;
            $array[6] = $rooms_id - 101;
            $array[7] = $rooms_id - 99;
            $array[8] = $rooms_id - 2;
            $array[9] = $rooms_id + 200;
            $array[10] = $rooms_id + 101;
            $array[11] = $rooms_id + 99;
            $array[12] = $rooms_id + 2;
            if ($result < 200){
                for ($j = 1; $j < 5; $j+=1){
                    $sql = mysql_query("SELECT COUNT(*) FROM present WHERE player = $player AND items_id IS NULL AND monsters_id IS NOT NULL AND rooms_id={$array[$j]}");
                    $count = mysql_result($sql,0);
                    $sql = mysql_query("SELECT COUNT(*) FROM rooms WHERE (rooms_id={$array[$j]})");
                    $roompresent = mysql_result($sql,0);
                    if ($count == 0 and $final == -1 and $roompresent == 1){
                        $final = $array[$j];
                    }
                }
            } else if ($result > 200){
                for ($k = 1; $k < 13; $k+=1){
                    $sql = mysql_query("SELECT COUNT(*) FROM present WHERE (player = $player AND items_id IS NULL AND monsters_id IS NOT NULL AND rooms_id={$array[$k]})");
                    $count = mysql_result($sql,0);
                    $sql = mysql_query("SELECT COUNT(*) FROM rooms WHERE (rooms_id={$array[$k]})");
                    $roompresent = mysql_result($sql,0);
                    if ($count == 0 and $final == -1 and $roompresent == 1){ $final = $array[$k]; }
                }
                if ($final == -1){
                    $sql = mysql_query("SELECT COUNT(*) FROM rooms");
                    $count = mysql_result($sql,0);
                    $sql = mysql_query("SELECT rooms_id FROM rooms");
                    for ($l = 0; $l < $count; $l+=1){
                        $rooms = mysql_query($sql,$l);
                        $sql = mysql_query("SELECT COUNT(*) FROM present WHERE player = $player AND items_id IS NULL AND monsters_id IS NOT NULL AND rooms_id=$rooms");
                        if (mysql_result($sql,0) == 0 and $final == -1){ $final = $rooms; }
                    }
                }
            }
            if ($final != -1){ $sql = mysql_query("UPDATE present SET rooms_id=$final WHERE player = $player AND items_id IS NULL AND monsters_id=$result;"); } 
            else { $sql = mysql_query("UPDATE present SET rooms_id=-1 WHERE player = $player AND items_id IS NULL AND monsters_id=$result");}
        }
    }
    $sql = mysql_query("UPDATE present SET state = 1 WHERE player = $player AND items_id IS NULL AND monsters_id IS NULL AND quantity IS NULL AND rooms_id IS NOT NULL");
} else {
    $sql = mysql_query("UPDATE present SET state = 0 WHERE player = $player AND items_id IS NULL AND monsters_id IS NULL AND quantity IS NULL AND rooms_id IS NOT NULL");
} 
```

}

当 $count 为 2 时，for 循环只运行一次。我已经通过每次 for 循环运行时将 1 添加到 mysql 表中的值来验证这一点。该值仅增加一次。

顶部的 if 语句是每隔一个滴答运行一次该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:27:19.653

for 循环的条件部分在循环的每次迭代中进行评估，因此您不能更改`$count`主循环内的值。您需要将变量名称更改为更有意义的名称。

试试这个：

```
// successful sql login & $player is correctly set with '', and all below sql
// statements execute correctly. $count is 2
function setMonstersLocation($player,$rooms_id){
if (mysql_result(mysql_query("SELECT state FROM present WHERE player = $player AND items_id IS NULL AND monsters_id IS NULL AND quantity IS NULL AND rooms_id IS NOT NULL"),0) == 0){
    $sql = mysql_query("SELECT COUNT(*) FROM present WHERE player = $player AND items_id IS NULL AND monsters_id > 100 AND monsters_id < 300");
    // Note here I've changed $count to $playerCount, because it is a count of the
    // number of players.
    $playerCount = mysql_result($sql,0);
    $sql = mysql_query("SELECT monsters_id FROM present WHERE player = $player AND items_id IS NULL AND monsters_id > 100 AND monsters_id < 300 ORDER BY monsters_id");
    for ($i = 0; $i < $playerCount; $i+= 1) {
        $sql = mysql_query("SELECT monsters_id FROM present WHERE player = $player AND items_id IS NULL AND monsters_id > 100 AND monsters_id < 300 ORDER BY monsters_id");
        $result = mysql_result($sql,$i);
        if (mysql_result(mysql_query("SELECT COUNT(*) FROM present WHERE player = $player AND items_id IS NULL AND monsters_id=$result AND quantity = 1"),0) == 1){
            $final = -1;
            $array[1] = $rooms_id - 1;
            $array[2] = $rooms_id + 1;
            $array[3] = $rooms_id - 100;
            $array[4] = $rooms_id + 100;
            $array[5] = $rooms_id - 200;
            $array[6] = $rooms_id - 101;
            $array[7] = $rooms_id - 99;
            $array[8] = $rooms_id - 2;
            $array[9] = $rooms_id + 200;
            $array[10] = $rooms_id + 101;
            $array[11] = $rooms_id + 99;
            $array[12] = $rooms_id + 2;
            if ($result < 200){
                for ($j = 1; $j < 5; $j+=1){
                    $sql = mysql_query("SELECT COUNT(*) FROM present WHERE player = $player AND items_id IS NULL AND monsters_id IS NOT NULL AND rooms_id={$array[$j]}");
                    // Note here I've change $count to $presentCount, because you're
                    // counting the number of presents? (Whatever presents are)
                    $presentCount = mysql_result($sql,0);
                    $sql = mysql_query("SELECT COUNT(*) FROM rooms WHERE (rooms_id={$array[$j]})");
                    $roompresent = mysql_result($sql,0);
                    if ($presentCount == 0 and $final == -1 and $roompresent == 1){
                        $final = $array[$j];
                    }
                }
            } else if ($result > 200){
                for ($k = 1; $k < 13; $k+=1){
                    $sql = mysql_query("SELECT COUNT(*) FROM present WHERE (player = $player AND items_id IS NULL AND monsters_id IS NOT NULL AND rooms_id={$array[$k]})");
                    // You can use $presentCount again here, because it's a 
                    // different code block to the previous one.
                    // This doesn't mean its in a different SCOPE, however.
                    $presentCount = mysql_result($sql,0);
                    $sql = mysql_query("SELECT COUNT(*) FROM rooms WHERE (rooms_id={$array[$k]})");
                    $roompresent = mysql_result($sql,0);
                    if ($presentCount == 0 and $final == -1 and $roompresent == 1){ $final = $array[$k]; }
                }
                if ($final == -1){
                    $sql = mysql_query("SELECT COUNT(*) FROM rooms");
                    // Note here I've change $count to $roomsCount, because you're 
                    // counting the number of rooms.
                    $roomsCount = mysql_result($sql,0);
                    $sql = mysql_query("SELECT rooms_id FROM rooms");
                    for ($l = 0; $l < $roomsCount; $l+=1){
                        $rooms = mysql_query($sql,$l);
                        $sql = mysql_query("SELECT COUNT(*) FROM present WHERE player = $player AND items_id IS NULL AND monsters_id IS NOT NULL AND rooms_id=$rooms");
                        if (mysql_result($sql,0) == 0 and $final == -1){ $final = $rooms; }
                    }
                }
            }
            if ($final != -1){ $sql = mysql_query("UPDATE present SET rooms_id=$final WHERE player = $player AND items_id IS NULL AND monsters_id=$result;"); } 
            else { $sql = mysql_query("UPDATE present SET rooms_id=-1 WHERE player = $player AND items_id IS NULL AND monsters_id=$result");}
        }
    }
    $sql = mysql_query("UPDATE present SET state = 1 WHERE player = $player AND items_id IS NULL AND monsters_id IS NULL AND quantity IS NULL AND rooms_id IS NOT NULL");
} else {
    $sql = mysql_query("UPDATE present SET state = 0 WHERE player = $player AND items_id IS NULL AND monsters_id IS NULL AND quantity IS NULL AND rooms_id IS NOT NULL");
} 
```

# linux - 获取linux中最后一个（最新的）进程pid

> ID：12562063
> 
> 赞同：4
> 
> 时间：2012-09-24T09:17:58.390
> 
> 标签：linux, unix, terminal, command

我想在 linux 中获取最后一个/最新的进程 pid。任何人都可以建议我找到它的命令吗？但我不知道哪个进程最后开始了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T06:16:29.033

如果你想要最近执行的后台命令的进程 ID，你可以使用 ! 多变的。例如：

```
 > gvim text.txt &
 > echo $!
 2842 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T10:06:40.487

**更新：**感谢 William 提供有关 awk 的提示。
**前提条件：**该过程仍需运行。

我不是 UNIX 专家，但我想到了以下方法：

```
ps aux --sort +start_time | tail -n 4 | awk 'NR==1{print $2}' 
```

`ps`将列出所有进程，我们将按 start_time 对它们进行排序。之后，我们将从输出的最后一行 [0] 中取出第四个，awk 将返回在第二个字段中找到的 pid。

```
root@unix ~ % sleep 10 &
[1] 3009
root@unix ~ % ps aux --sort +start_time | tail -n 4 | awk 'NR==1{print $2 " " $11}'
3009 sleep
root@unix ~ % 
```

* * *

[0] 第四行，因为我的命令行中有三个管道命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-22T15:44:22.570

获取`PID`：

```
#!/bin/bash
my-app & echo $! 
```

保存`PID`在变量中：

```
#!/bin/bash
my-app & export APP_PID=$! 
```

将所有实例保存`PID`在文本文件中：

```
#!/bin/bash
my-app & echo $! >>/tmp/my-app.pid 
```

保存输出、错误和`PID`单独的文件：

```
#!/bin/bash
my-app >/tmp/my-app.log 2>/tmp/my-app.error.log & echo $! >>/tmp/my-app.pid

echo "my-app PID's: $(cat /tmp/my-app.pid)" 
```

# http - Nodejs 服务器主机名

> ID：12562065
> 
> 赞同：16
> 
> 时间：2012-09-24T09:18:07.177
> 
> 标签：http, node.js, express

好的，所以在 Node.js 中获取对我的服务器发出的请求的主机名似乎很容易：

```
app.get('/', function(req,res){
    console.log(req.headers.host);
}); 
```

有没有一种简单的方法来确定我的实际 http 服务器的主机名？例如，我的服务器在该地址运行`http://localhost:3000`- 我可以通过编程方式确定该地址吗？我正在使用 expressjs。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-24T13:40:57.537

是的，您可以使用；

```
var express = require('express'),
    app = express(),
    server  = require('http').createServer(app);

server.listen(3000, function(err) {
        console.log(err, server.address());
}); 
```

应该打印

```
{ address: '0.0.0.0', family: 'IPv4', port: 3000 } 
```

您还可以通过以下方式检索操作系统的主机名；

```
require('os').hostname(); 
```

# java - 在 JBOSS 7 或 Glassflish 中将属性文件放在哪里？（最佳实践）

> ID：12562069
> 
> 赞同：1
> 
> 时间：2012-09-24T09:18:30.640
> 
> 标签：java, jakarta-ee, jboss, glassfish

我已经用 eclipse 为 JBOSS EAP 5 开发了应用程序。我将属性文件放在 server-conf/conf/... 我现在正在 Netbeans (7.2) 下开发。捆绑的 glassfish 服务器用于更轻松的开发。目标环境是 JBOSS EAP 6。放置属性文件的最佳位置是什么？两种环境的共同地方会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:38:47.067

如果您想让它们在应用程序外部，您可能必须编写一个自定义模块。这并不像听起来那么糟糕，请查看[HowToPutAnExternalFileInTheClasspath](https://community.jboss.org/wiki/HowToPutAnExternalFileInTheClasspath)。

另请参阅[迁移问题到 jboss-7-1](https://stackoverflow.com/questions/12400280/migration-issues-to-jboss-7-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:59:11.870

最实用的解决方案是在 JBOSS 和 Glassfish（即`C:\PropertiesFolder`）之外创建一个自定义文件夹，然后将此文件夹添加到每个服务器的类路径中。请阅读我[的帖子](https://stackoverflow.com/questions/11040936/how-do-you-specify-an-external-log4j-properties-file-to-start-a-jboss-server/12516178#12516178)以获取有关 JBoss 中的类路径的更多详细信息

# java - JMeter 看不到自定义侦听器

> ID：12562075
> 
> 赞同：0
> 
> 时间：2012-09-24T09:19:05.363
> 
> 标签：java, swing, jmeter

我正在为 JMeter 开发自定义侦听器。

问题是监听器在我的机器上工作正常，它没有出现在“监听器”列表中，并且在另一台机器的日志和控制台中没有错误。

*   我的配置：Win7-32​​bit，JMeter 2.7
*   另一种配置：Mac OS X 10.8_x86_64、JMeter 2.7

我应该检查什么来澄清这一点？
你能给我进一步调查这个问题的起点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:59:28.223

我找到了解决方案。问题是我已经使用 Java 1.7 构建了 Listener 并尝试将 ti 与 Java 1.6 一起使用。使用 Java 1.7 监听器重新构建后工作正常。

# web-services - soapUI：如何断言属性

> ID：12562080
> 
> 赞同：0
> 
> 时间：2012-09-24T09:19:18.937
> 
> 标签：web-services, soap, soapui

我想验证一下`result`，在 Response/json 中出现的那个 - 小于`maxValue`

响应 jason 如下所示：

```
{

   "result": 4
} 
```

我定义的属性如下：

> 结果：4
> 
> 最大值：5

使用`contains Assertions`，我可以断言，它`result`等于 4，如下所示：

```
"result":"${#TestCase#result}" 
```

我的问题：如何断言`result`< `maxValue`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:07:29.520

检查this [how to assert json in soapui](http://www.robert-nemet.com/2012/08/json-asserting-in-soapui.html)。

# html - 如何将样式应用于选定单选按钮的标签

> ID：12562082
> 
> 赞同：2
> 
> 时间：2012-09-24T09:19:28.720
> 
> 标签：html, css, forms

是否可以使用以下标记仅使用 CSS 设置活动标签的样式：

```
<label class="inputOption" for="1"><input type="radio" name="radio1" id="1" /><span class="aText">Option 1</span></label> 
```

一旦选择了里面的收音机，我想为标签添加一些背景样式。最好不要使用javascript。它适用于移动设备，因此不必在较旧的浏览器上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:44:49.950

为此，您可以为此使用 CSS :checked 属性。像这样写：

```
#one{
    position:relative;
}
#one:checked + span{
    display:inline-block;
    margin-left:-20px;
    padding-left:20px;
    background-color: #aa2233;
} 
```

检查这个[http://jsfiddle.net/5TxyJ/5/](http://jsfiddle.net/5TxyJ/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:28:46.390

当然，你应该添加第二个课程，让我们对标签说“活动”，**只有**选择单选按钮：

```
<style type="text/css">
    label.active {
      background-color: #aa2233;
    }
</style>
<label class="inputOption active" for="1"><input type="radio" name="radio1" id="1" /><span class="aText">Option 1</span></label> 
```

[见这里](http://jsfiddle.net/5TxyJ/)。

# git - 如何恢复某些用户在 GIT 存储库中所做的更改

> ID：12562086
> 
> 赞同：2
> 
> 时间：2012-09-24T09:19:35.273
> 
> 标签：git, github, git-svn, git-revert

我有一个 GIT 存储库，其中许多用户（例如 A、B、.....X）提交了该文件。我想删除或恢复用户“X”提交的所有文件。

有可能还是我必须手动执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:45:28.260

试试这个：

```
git log --author=X --format="%H" | xargs git revert 
```

管道的第一部分生成用户名与正则表达式 (!) 匹配的所有提交的 SHA1 `X`；第二部分`git revert`对这些提交调用 a 。但是，如果其中一个提交未能完全恢复，您可能只想浏览

```
git log --author=X --oneline 
```

并手动还原。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:30:08.050

我相信，您可以为此使用 git revert 。有关更多信息，请参阅[git 手册部分。](http://schacon.github.com/git/user-manual.html#reverting-a-commit)

要点是你可以说：

git revert 你要撤消的提交的 id 在哪里，它会尝试撤消它。

# c++ - 除了 std::string 之外，增强 c++ 函数以获取 stringstream

> ID：12562087
> 
> 赞同：0
> 
> 时间：2012-09-24T09:19:39.313
> 
> 标签：c++

> **可能重复：**
> [C++ 在 << 作为参数之后使用字符串流](https://stackoverflow.com/questions/12519829/c-using-stringstream-after-as-parameter)

我有这样的功能

```
print(const std::string& message); 
```

我怎样才能把它包在其他地方，这样我就可以使用了，比如说

```
print2("some message"<<object); 
```

这应该在内部调用上述函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:33:26.790

这是使用可变参数模板的 C++11 解决方案：

```
void print(std::string const & message);   // your original function as before

void print2(std::istringstream & iss)
{
    print(iss.str());
}

template <typename T, typename ...Rest>
void print2(std::istringstream & iss, T && t, Rest &&... rest)
{
     iss << std::forward<T>(t);
     print2(iss, std::forward<Rest>(rest)...);
}

template <typename ...Args>
void print2(Args &&... args)
{
     std::istringstream iss;
     print2(iss, std::forward<Args>(args)...);
} 
```

用法：

```
print2("Some message", x, foo, "text"); 
```

与在函数调用中笨拙地使用移位运算符相比，具有可变数量参数的接口更简洁，更直接，因为后者需要您显式创建流对象，然后您需要处理流的低- level`rdbuf`直接，并且该方法不会将原始的无参数版本作为特例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:24:28.793

您可以创建一个`operator<<`返回字符串流的模板

```
template<class T>
std::stringstream operator<<(const char* c_str, T t)
{
   std::stringstream tmp;

   tmp << t;

   return tmp;
} 
```

那么你需要定义

```
void print2(std::stringstream sstream)
{
    print(sstream.str())
} 
```

你也可以重载原始的 print 方法，这样你也可以写得很好

```
print("something"<<some_obj); 
```

# qt - QFileSystemModel::canFetchMore() returns false always

> ID：12562088
> 
> 赞同：1
> 
> 时间：2012-09-24T09:19:45.513
> 
> 标签：qt, qt4

I have the following code in which i want to check if there are any sub directories exist. I expect the canFetchMore() fn to return true(since root directory contains sub directories). But it returns false. Is there any other fn to be called before calling canFetchMore() fn.

```
QFileSystemModel model;
model.setFilter(QDir::AllDirs);
model.setRootPath("/");
QModelIndex index = model.index(model.rootPath());
qDebug()<<index.child(0,0).isValid()<<model.canFetchMore(index)<<index; 
```

I have tried using hasChildren() fn and it returns always true irrespective of the folder contains sub-dirs or not.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:54:53.760

奇怪，没有这方面的文档。方法

```
 model.setRootPath("/"); 
```

自动调用`model.fetchMore(index);`。这意味着此时所有子目录都已找到。这就是你的调用`model.canFetchMore(index)`返回 false 的原因，因为没有更多的子目录要获取。

一种方法（使用[QDir](http://qt-project.org/doc/qt-4.8/qdir.html)，[QFileInfo](http://qt-project.org/doc/qt-4.8/qfileinfo.html#isDir)）：

```
QDir mytopdir("/path/to/dir");
if(mytopdir.exists()){
    QFileInfoList list = mytopdir.entryInfoList();
    foreach(QFileInfo fileInfo, list){
        if(fileInfo.isDir()){
            //FOUND IT!!
        }
    }
} 
```

# windows - dump of 32bit-process running on windows2003 enterprise x64 sp2

> ID：12562089
> 
> 赞同：0
> 
> 时间：2012-09-24T09:19:47.613
> 
> 标签：windows, 32bit-64bit, dump

I try analyse this dump with Windbg. But it can't show x86 callstack. symbol path configed as:

```
srv*D:\dev_head\win_symbols* 
```

Some command result:

```
0:000> !teb
Wow64 TEB32 at 000000007efdd000
*************************************************************************
***                                                                   ***
***                                                                   ***
***    Your debugger is not using the correct symbols                 ***
***                                                                   ***
***    In order for this command to work properly, your symbol path   ***
***    must point to .pdb files that have full type information.      ***
***                                                                   ***
***    Certain .pdb files (such as the public OS symbols) do not      ***
***    contain the required information.  Contact the group that      ***
***    provided you with these symbols if you need this command to    ***
***    work.                                                          ***
***                                                                   ***
***    Type referenced: wow64!_TEB32                                  ***
***                                                                   ***
*************************************************************************
error InitTypeRead( wow64!_TEB32 )...
Wow64 TEB at 000000007efdb000
ExceptionList:        000000007efdd000
StackBase:            000000000016fcfc
StackLimit:           000000000016b000
SubSystemTib:         0000000000000000
FiberData:            0000000000001e00
ArbitraryUserPointer: 0000000000230bf0
Self:                 000000007efdb000
EnvironmentPointer:   0000000000000000
ClientId:             00000000000007e0 . 0000000000000ecc
RpcHandle:            0000000000000000
Tls Storage:          0000000000000000
PEB Address:          000000007efdf000
LastErrorValue:       0
LastStatusValue:      0
Count Owned Locks:    0
HardErrorMode:        0

0:000> !load wow64exts
0:000> !sw
The current thread doesn't have an x86 context. 
```

symbols file wow64.pdb, wow64win.pdb can download/load correctly, but only wow64cpu.pdb just can not download. Is this problem lead to analyse failure?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:44:54.020

我假设你有一个完整的转储而不是一个小的内存转储文件。WOW64CPU 程序数据库应与符号包库一起[下载。](http://www.microsoft.com/whdc/devtools/debugging/symbolpkg.mspx)

使用以下标志强制加载特定的 pdb：（但请注意，由于不匹配，调试结果可能在多个点上是错误的）

```
.reload /f [name] /i 
```

其他开发人员报告了类似的问题。请参阅“[无法从 64 位 Windows 2003 Server SP2 获取 wow64cpu.dll 的符号文件](http://social.msdn.microsoft.com/Forums/en/windbg/thread/ba44ef7b-51a4-4660-ba60-7c8b27089d4e)”

*   你运行 x86 版本的 WinDBG 吗？

您还可以考虑在 VirtualBox 或 VMWare 中运行另一个 Windows 版本。

**另见**：

[如何读取 Windows 为调试而创建的小内存转储文件](http://support.microsoft.com/kb/315263)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:44:36.173

通常，您需要同时配置 Microsoft 的符号服务器和下游（本地）缓存位置。

在本地网络中使用 Samba/CIFS 服务器的示例（您必须能够对其进行写入）：

```
symsrv*symsrv.dll*\\sambasrv\symbols*http://msdl.microsoft.com/download/symbols 
```

...或者改为磁盘位置：

```
symsrv*symsrv.dll*C:\Windows\Symbols*http://msdl.microsoft.com/download/symbols 
```

`.symfix`在 WinDbg 中使用将 MS 符号服务器设置为默认值，然后`.reload`重新加载所有符号信息。

通常配置一个名为的全局环境变量`_NT_SYMBOL_PATH`：

```
setx /s _NT_SYMBOL_PATH=symsrv*symsrv.dll*\\sambasrv\symbols*http://msdl.microsoft.com/download/symbols 
```

（以上是批处理/NT脚本语法...咨询`setx /?`）

`-y`如果您像我一样使用各种不同的命令行创建快捷方式（例如调试 VM），还请查看 WinDbg 的命令行开关。

# iphone - how to detect the tag ofimage subviews when i touched the image in the rotatory uiview

> ID：12562090
> 
> 赞同：0
> 
> 时间：2012-09-24T09:19:47.253
> 
> 标签：iphone, ios, xcode

I want to create a dial and i want to get the tag of images when clicked the images in the dial.i tried a lot , but i didn't get it.see the code below

```
- (void) drawWheel {

container = [[UIView alloc] initWithFrame:self.frame];

CGFloat angleSize = 2*M_PI/numberOfSections;

for (int i = 0; i < numberOfSections; i++) {

    UIImageView *im = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"segment.png"]];

    im.layer.anchorPoint = CGPointMake(1.0f, 0.5f);
    im.layer.position = CGPointMake(container.bounds.size.width/2.0-container.frame.origin.x, 
                                    container.bounds.size.height/2.0-container.frame.origin.y); 
    im.transform = CGAffineTransformMakeRotation(angleSize*i);
    im.alpha = minAlphavalue;
    im.tag = i;

    if (i == 0) {
        im.alpha = maxAlphavalue;
    }

    cloveImage = [[UIImageView alloc] initWithFrame:CGRectMake(12, 15, 40, 40)];
    cloveImage.image = [UIImage imageNamed:[NSString stringWithFormat:@"icon%i.png", i]];
    cloveImage.tag=i;
   [im addSubview:cloveImage]; 
```

}

```
 -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
```

{

//i want to get cloveImage.tag when i clicked the imageview

}

So my question is how can I detect tag of image in the rotatory wheels when i touched the
particular image?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:25:35.390

我建议您在 UIImageView 上添加按钮，然后将背景图像添加到 uibuttons。就获取标签而言，您应该在其目标方法中获得点击按钮的相应标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:01:47.287

尝试这个：

```
... ...
cloveImage = [[UIImageView alloc] initWithFrame:CGRectMake(12, 15, 40, 40)];
cloveImage.image = [UIImage imageNamed:[NSString stringWithFormat:@"icon%i.png", i]];
cloveImage.tag=i;
//   **********add begin**********
UITapGestureRecognizer *tapGR = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(showCloveImageTagOnImageView:)];
[cloveImage addGestureRecognizer:tapGR];
//   **********add end**********
[im addSubview:cloveImage];
... ...

//  copy the selector below and log the cloveImageTag
- (void)showCloveImageTagOnImageView: (UIImageView *)tappedImageView
{
    NSLog(@"tappedImageView.tag: %d", tappedImageView.tag);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:43:38.860

```
for (UIImageView *img in self.view.subviews)
    {
        if ([img isKindOfClass:[UIImageView class]])
        {
            if (img.tag==index)
            {
                Your code....
            }
        }

    } 
```

您使用上面的代码通过使用 for 循环获取 Perticular 图像的 tha 标签。

# javascript - foreach loop with timer

> ID：12562091
> 
> 赞同：0
> 
> 时间：2012-09-24T09:19:49.430
> 
> 标签：javascript, timer, foreach

I need to write a for each loop with timer in javascript.

It will pass each index of the object with a specific time interval.
Lets say we have `obj = {a:1,b:2,c:3,...}`

```
time: 0ms => obj.a 
time: 100ms => obj.b 
time: 200ms => obj.c 
. 
. 
. 
```

I have done the following two things but can't unite these two.

Please check out [http://jsfiddle.net/WFtaG/11/](http://jsfiddle.net/WFtaG/11/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:34:04.520

用这个：

```
var obj = {a:1, b:2, c:5, z:12, x:0};

var timer = 0;
for (var prop in obj) (function(key, val) {
    setTimeout(function() {
        $('#curr_elem').append( key + " => " + val + " | " );
    }, timer += 1000);
})(prop, obj[prop]); 
```

# jquery - DataTable row delete change classes accordingly

> ID：12562093
> 
> 赞同：1
> 
> 时间：2012-09-24T09:20:04.157
> 
> 标签：jquery, jquery-plugins, datatable

I have a function that deletes row like this:

```
function DeletePublisher(element, publisherid) {

jConfirm('Are you sure you want to delete this publisher?', 'Delete publisher', function (r) {
    if (r) $.post('includes/publishers/delete-publisher.php?publisherid=' + publisherid, 
    function(data) {
            if ($.trim(data) == 'error') {
            $.jGrowl('This publisher was already deleted', { header: '<strong style="text-align:center;">ERROR</strong>' });    
            $(element).parents('tr').remove();
            } else {
            $(element).parents('tr').remove();
            $.jGrowl('Publisher deleted');       
            }
        });
}); 
```

Now this works perfectly, but after row is deleted other rows are not updated classes (odd and even classes). So after I delete a row (in this example second TR is deleted:

```
<tr class="odd">
<tr class="even">
<tr class="odd">
<tr class="even"> 
```

I am getting it like this:

```
<tr class="odd">
<tr class="odd">
<tr class="even"> 
```

Now I am not sure if this is my error or I am missing something ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:23:40.070

您需要再次根据奇偶数删除所有类并添加类

```
$('tr').removeClass();

// Now add class names again

$('tr:odd').addClass('odd');
$('tr:even').addClass('even'); 
```

# hadoop - Running UIMA job on Hadoop with Behemoth

> ID：12562098
> 
> 赞同：2
> 
> 时间：2012-09-24T09:20:15.700
> 
> 标签：hadoop, uima

I have a fully functional UIMA job that does simple annotation. I can successfully launch it via my local CAS GUI.

I have been trying to run the UIMA job on Hadoop using Apache Behemoth. I am wondering if someone has worked on this? The job runs successfully but in the hadoop output directory; there is no output from the UIMA job. I can see in the Hadoop job tracker output that the job completed successfully and it copied its input data to the final output directory.

Can someone point me to what could be going on here, and is there any additional changes we need to make in our UIMA code?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T16:25:35.797

以下是我整理的适用于小型管道的步骤：

*   将 UIMA 管道导出为 jar (Your-pipeline.jar)
*   复制到 HDFS
*   生成 Behemoth Corpus（** 记住以下所有路径都是 hdfs 路径**）

    ```
    hadoop jar tika/target/behemoth-tika-1.1-SNAPSHOT-job.jar com.digitalpebble.behemoth.tika.TikaDriver -i /user/blah/ -o /user/blah/

    ```

*   使用您的管道进行处理

    ```
    hadoop jar uima/target/behemoth-uima-1.1-SNAPSHOT-job.jar com.digitalpebble.behemoth.uima.UIMADriver /user/blah/ /user/blah/ /apps/Your-pipeline.pear
    ```

*   列出注释：

    ```
    hadoop jar uima/target/behemoth-uima-1.1-SNAPSHOT-job.jar com.digitalpebble.behemoth.util.CorpusReader -i -a /user/blah/

    ```

*   将注释转换为文本：

    ```
    hadoop jar uima/target/behemoth-uima-1.1-SNAPSHOT-job.jar com.digitalpebble.behemoth.uima.UIMABin2TxtConverter -a -i /user/blah/ -o /user/blah/

    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:54:15.857

试试这个场景：

1) Gererate Behemoth 语料库

2) 在 Behemoth 语料库上运行 Tika 作业 => Tika 语料库

3) 在 Tika 语料库上运行 UIMA 作业 => UIMA 语料库

4) 通过 Behemoth 的 CorpusReader 使用 -a 选项查看 UIMA 输出语料库 - 它显示您在 /hadoop/conf 中的 behemoth-site.xml 中定义的已创建 UIMA 注释。

但是我不知道如何从 Behemoth(UIMA) 语料库中提取有根据的注释的问题。

我也有 CAS 消费者（在 PEAR 文件中），它应该将 UIMA 注释写入本地文件系统（不在 HDFS 中）上的文件，但我在我的文件系统上没有找到这个文件（（

# javascript - TinyMCE merges A tags incorrectly

> ID：12562103
> 
> 赞同：1
> 
> 时间：2012-09-24T09:20:20.233
> 
> 标签：javascript, tinymce, rich-text-editor

I've got the following problem with TinyMCE:

I've inserted the following code into a TinyMCE instance:

```
<p><a href="/_pics/articles/large/WAbOlemChF.jpg" rel="gallery"><img class="img-center" src="/_pics/articles/WAbOlemChF.jpg" alt="b" /></a></p>
<p><a href="/_pics/articles/large/cT89QKCChs.jpg" rel="gallery"><img class="img-center" src="/_pics/articles/cT89QKCChs.jpg" alt="v" /></a></p> 
```

This results is the following:

![](../Images/442dd3bfe53f5122a785455e86afe05e.png)

If I place the cursor as indicated in the image above, and I hit the DELETE key, I get the following:

![](../Images/cf717323108d9a3e90a49d574ac2c6c2.png)

So far, so good, except that when I check out the code, it looks like this:

```
<p><a href="/_pics/articles/large/cT89QKCChs.jpg" rel="gallery"><img class="img-center" src="/_pics/articles/WAbOlemChF.jpg" alt="b" /><img class="img-center" src="/_pics/articles/cT89QKCChs.jpg" alt="v" /></a></p> 
```

Note, that the A tags have been merged. As you'd image this raises a big problem since the "href" attribute was different. I would've expected it to put both A tags in the same paragraph, but keep them distinct.

Is it a TinyMCE bug, or there's something in the configuration that I can tweak so it merges only identical A tags?

I'm using v3.5.6, jQuery version.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:45:33.973

如果您不希望 TinyMCE 弄乱您的代码，只需给它一个类。这适用于 WordPress 实现，因此希望它也适用于您。

例子..

```
<p class="image"><a href="/_pics/articles/large/WAbOlemChF.jpg" rel="gallery"><img class="img-center" src="/_pics/articles/WAbOlemChF.jpg" alt="b" /></a></p>
<p class="image"><a href="/_pics/articles/large/cT89QKCChs.jpg" rel="gallery"><img class="img-center" src="/_pics/articles/cT89QKCChs.jpg" alt="v" /></a></p> 
```

不必定义该类，如果需要，只需给它一个空类。重点是，TinyMCE 不会删除任何有类的东西，因此你的代码应该保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:31:39.353

我们有很多奇怪的删除行为可能是因为浏览器有错误。解决方案是处理 delte 进程并执行自己的操作以绕过默认行为。为此，我们定义了几种发生意外情况的场景，并尝试隔离这些情况以便能够纠正它。

# wpf - TabControl DataTemplate 实例创建问题

> ID：12562108
> 
> 赞同：0
> 
> 时间：2012-09-24T09:20:56.660
> 
> 标签：wpf, datatemplate, tabcontrol

我有一个我不明白的 WPF 问题 - 谁能帮忙？

下面的 WPF 用作标准 TabControl 的 ContentTemplate 并驻留在 ResourceDictionary 中。MyElementItemsControl 是 ItemsControl 的简单派生，而 MyDesignCanvas 是 Canvas 的简单派生。

```
 <DataTemplate x:Key="TabContent"  x:Shared="False">
    <Grid>
        <Grid Grid.RowSpan="2">
            <ScrollViewer x:Name="contentScrollViewer" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" >
                <Grid>
                    <View:MyElementItemsControl BorderBrush="Transparent" x:Name="schedulePanel" ItemsSource="{Binding Path=Elements}" Background="White">
                        <View:MyElementItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <View:MyDesignCanvas Height="1000" Width="1000" HorizontalAlignment="Left" VerticalAlignment="Top" 
                                                                     SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
                                                                     Background="Transparent">
                                </View:MyDesignCanvas>
                            </ItemsPanelTemplate>
                        </View:MyElementItemsControl.ItemsPanel>
                    </View:MyElementItemsControl>

                    <Grid.LayoutTransform>
                        <TransformGroup>
                            <ScaleTransform>
                                <ScaleTransform.ScaleX>
                                    <Binding ElementName="SlideZoom" Path="Value" Mode="OneWay"/>
                                </ScaleTransform.ScaleX>
                                <ScaleTransform.ScaleY>
                                    <Binding ElementName="SlideZoom" Path="Value" Mode="OneWay"/>
                                </ScaleTransform.ScaleY>
                            </ScaleTransform>
                        </TransformGroup>
                    </Grid.LayoutTransform>

                </Grid>
            </ScrollViewer>

        </Grid>

        <Slider Opacity="0.5" VerticalAlignment="Top" HorizontalAlignment="Left" Width="300" Grid.Row="1" Name="SlideZoom" Orientation="Horizontal" Minimum="0.1" Maximum="3" Value="1">
        </Slider>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="30" />
        </Grid.RowDefinitions>

    </Grid>
</DataTemplate> 
```

当我运行代码时，我遇到了两个我不明白的问题：

1.  当我期望每个项目都有一个 ScrollViewer 时，我似乎只得到一个 ScrollViewer。因此，如果我添加两个选项卡项并使画布大小不同，则滚动条仅调整为最大画布的大小。我希望 Shared=False 属性会为每个选项卡创建模板的新实例。
2.  可能与第 1 项有关 - 如果我在 MyDesignCanvas 的构造函数上放置一个断点，它会在添加第一个选项卡时被命中，但在添加其他选项卡时不会命中。只有当我开始关闭选项卡时，断点才会再次被击中 - 我希望每个选项卡添加都会被击中。

我想我对数据模板的理解还不够，所以任何人都可以解释可能发生的事情或指出一些可以帮助我诊断的资源吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:26:03.537

我已经意识到问题出在哪里——WPF TabControl 对选项卡内容进行了内部虚拟化，因此尽管我使用了 Shared=False，但我一直在重新使用选项卡内容并只是更改数据上下文。有关更多详细信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/4993159/why-do-tab-controls-reuse-view-instances-when-changing-tab)和[此](https://stackoverflow.com/questions/2080764/how-to-preserve-control-state-within-tab-items-in-a-tabcontrol)问题。

# jquery - How can I see the background image on my iPhone?

> ID：12562109
> 
> 赞同：2
> 
> 时间：2012-09-24T09:20:58.453
> 
> 标签：jquery, iphone, html, css, mobile

Im making a mobile website with jQuery Mobile, HTML and CSS and Im trying to add a bakground image. On my computer I can see it, its fully visible and reacting when Im making changes but when I test it on my iPhone there is no image. I cant see it. I know the phone is fully connected and all because text and other things I can change. Anyone know how to solve this? This is the CSS-code:

```
body {
    background: transparent url(Images/phoneWallpaper.jpg) 0 0 no-repeat fixed !important;
    background-size: cover;
    background-repeat: no-repeat;
    background-position:center center;
    background-attachment:scroll;

}

.ui-page {
    background: transparent;

}​

.ui-content{
    background: transparent;

}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:24:55.110

您可能需要在后台添加一些供应商前缀`CSS`

这篇文章可能会有所帮助：[这里](http://www.developerdrive.com/2012/01/developing-a-responsive-website-background-images/)

要检查您可能需要哪些前缀，您可以`CSS`通过以下方式运行您的代码`Prefixr`：[这里](http://prefixr.com/)

# emacs - 如何在 Emacs 中删除文件模板

> ID：12562113
> 
> 赞同：2
> 
> 时间：2012-09-24T09:21:10.170
> 
> 标签：emacs

每次我在 Emacs 中创建 HTML 文件时，都会加载一个模板。它询问我的标题并创建以下文本：

```
<html>
    <head>
<title></title>
</head>
<body>
<h1></h1>

<address>
<a href="mailto:my_email"></a>
</address>
</body>
</html> 
```

但我不需要它。如何禁用此模板？我正在使用 yasnippet，也许它会创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:16:07.703

我找到了。原因是 .emacs 中的这些行：

```
(auto-insert-mode)
(setq auto-insert-query nil) 
```

似乎，该模块在您创建文件时插入模板。

# javascript - 单击缩略图后弹性图像幻灯片自动播放恢复

> ID：12562118
> 
> 赞同：0
> 
> 时间：2012-09-24T09:21:21.867
> 
> 标签：javascript

嗨，我正在使用从这里下载的弹性图像幻灯片：

[http://tympanus.net/Tutorials/ElasticSlideshow/index2.html](http://tympanus.net/Tutorials/ElasticSlideshow/index2.html)

但点击缩略图后自动播放将停止。我想知道几秒钟后如何再次恢复自动播放。我在js中看到了这段代码：

```
 // click the thumbs
        this.$thumbs.on( 'click.eislideshow', function( event ) {

            if( _self.options.autoplay ) {

                clearTimeout( _self.slideshow );
                _self.options.autoplay  = false;

            }

            var $thumb  = $(this),
                idx     = $thumb.index() - 1; // exclude sliding div

            _self._slideTo( idx );

            return false;

        }); 
```

我想知道如何修改它。让自动播放在我指定的 5 秒或特定持续时间后恢复。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:47:41.477

您可以通过在该`_self.options.autoplay = false;`行之后添加以下代码来做到这一点：

```
setTimeout( function() { 
                        _self.options.autoplay  = true;
                        _self._startSlideshow();
            }, 5000); //restart autoplay after 5 seconds 
```

那应该做你想做的事。

# php - 视图中会话的可访问性

> ID：12562128
> 
> 赞同：0
> 
> 时间：2012-09-24T09:21:59.013
> 
> 标签：php, zend-framework, session

我在视图中创建了一个 Zend 会话：

```
$user = Tools::getUserByLoginAndPassword($form);

if ($user instanceof Membre)
{
  $sessionUser = new Zend_Session_Namespace('user');
  $sessionUser->data = $user;

  $this->_redirect('/adresse');
} 
```

我已经测试了 $sessionUser->data，它包含正确的数据。但是我需要在另一个视图中获得这个会话，并且在那里，它不再工作了......

例如

```
<?php var_dump($sessionUser->data->prenom); ?> 
```

显示“NULL”它在前一个视图中工作正常，但在这个视图中没有。

我已将我的放在`Zend_Session::start();` 控制器的 init() 函数中......

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:57:41.523

如果你想在另一个视图中使用你的会话，你必须再次实例化它。因此，如果您使用以下代码，您应该能够访问您的数据：

```
<?php 
    $session = new Zend_Session_Namespace('user');
    Zend_Debug::dump($session->data);
?> 
```

# iphone - UIViewControllerHierarchyInconsistency exception when

> ID：12562130
> 
> 赞同：0
> 
> 时间：2012-09-24T09:22:15.167
> 
> 标签：iphone, objective-c, ios

I am getting `UIViewControllerHierarchyInconsistency exception` when assigning,

```
txtFieldDelegate.view = self.view;  
txtFirstName.delegate = txtFieldDelegate;
txtLastName.delegate = txtFieldDelegate; 
```

I am having text field delegate methods in some other class and creating objects for the text field delegate class to use the same. Please provide suggestions to resolve this..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:07:08.450

This view controller was inheriting a class which inherits UIViewController. The inherited class's inheritance is changed as NSObject. Instead of TheClass: UIViewController, it was changed as TheClass:NSObject

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:42:07.950

尝试这个：

```
SomeOtherClassViewController *txtFieldDelegateVC = [[SomeOtherClassViewController alloc] init]; 
txtFirstName.delegate = txtFieldDelegateVC;
txtLastName.delegate = txtFieldDelegateVC; 
```

# ftp - 如何在用户名中使用 @ 配置 FTP 端点

> ID：12562136
> 
> 赞同：0
> 
> 时间：2012-09-24T09:22:34.613
> 
> 标签：ftp, wso2, wso2esb, vfs, synapse

我们正在使用 WSO2 访问不同的 FTP，并且特定 FTP 的用户名确实包含“@”，这是服务器配置的预定义字符。

下面是使用用户名“MY@USERNAME”访问此类 FTP 的端点示例：

```
<endpoint xmlns="http://ws.apache.org/ns/synapse" name="FTPEndpoint">
   <address uri="vfs:ftp://MY@USERNAME:PASSWORD@SERVER/Path?vfs.passive=true"/>
</endpoint> 
```

有没有办法为用户名转义@？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:51:58.607

通过将 @ 替换为 %40 终于很简单了，它可以工作：

```
<endpoint xmlns="http://ws.apache.org/ns/synapse" name="FTPEndpoint">
  <address uri="vfs:ftp://MY%40USERNAME:PASSWORD@SERVER/Path?vfs.passive=true"/>
</endpoint> 
```

# java - org.smslib 端口使用异常

> ID：12562141
> 
> 赞同：0
> 
> 时间：2012-09-24T09:22:42.770
> 
> 标签：java, jsp, sms, sms-gateway

我正在尝试创建 Web 应用程序以通过 JSP 中的 gsm 调制解调器发送短信首先我将目标手机号码和短信文本放入 url 并通过 request.getparameter 和第一条消息发送没有问题但是当通过引用同一页面再次发送消息时我得到这个例外：

```
org.smslib.GatewayException: Comm library exception: java.lang.RuntimeException: gnu.io.PortInUseException: org.smslib
    at org.smslib.modem.SerialModemDriver.connectPort(SerialModemDriver.java:102)
    at org.smslib.modem.AModemDriver.connect(AModemDriver.java:114)
    at org.smslib.modem.ModemGateway.startGateway(ModemGateway.java:189)
    at org.smslib.Service$1Starter.run(Service.java:276) 
```

我试图停止网关并停止服务但没有希望我的代码：

```
public boolean sendMessage(String strMobileNo,String strSMSText)
    {
        try
        {   
            OutboundMessage outboundMessage=new OutboundMessage();
            SMS message=new SMS();
            SerialModemGateway gateway = new SerialModemGateway("modem.com1", "COM12", 9600, "Huawie", "EF200");
            gateway.setInbound(true);
            gateway.setOutbound(true);
            gateway.setSimPin("0000");
            gateway.setSmscNumber("+9647701144010");
            Service.getInstance().setOutboundMessageNotification(message);
            Service.getInstance().addGateway(gateway);
            Service.getInstance().startService();
            outboundMessage.setText(strSMSText);
            outboundMessage.setRecipient(strMobileNo);
            outboundMessage.setEncoding(Message.MessageEncodings.ENCUCS2);
            //outboundMessage.setDeliveryDelay(5000);
            Service.getInstance().sendMessage(outboundMessage);
            System.out.println(outboundMessage);
            gateway.stopGateway();
            Service.getInstance().stopService();
            Thread.sleep(10000);
            return true;
        }
        catch (Exception e)
        {
            e.printStackTrace();
            return false;
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:36:26.393

您的代码中的问题是每次发出请求时都会`SerialModemGateway`创建一个新请求，这不应该这样做。

尝试`SerialModemGateway gateway = new SerialModemGateway("modem.com1", "COM12", 9600, "Huawie", "EF200");`仅在应用程序运行时调用语句，而不是每次发出请求时调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T05:49:09.490

在你的最后一个代码中尝试`Service.getInstance().stopService()`它的工作，你也可以在再次运行之前终止你的程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-20T06:15:54.850

我解决了这个问题 `Service.getInstance().removeGateway(gateway);`

# php - 尝试在“模式 2（在临时目录中编译 HipHop 并从命令行运行已编译的程序）”中运行 HipHop 时出错

> ID：12562142
> 
> 赞同：1
> 
> 时间：2012-09-24T09:22:43.477
> 
> 标签：php, hiphop

我已经在我的 VM（Ubuntu 12.04 LTS）中安装了 HipHop 和所有依赖项，在设置环境时没有遇到任何问题。但我无法按照 wiki 文档*[https://github.com/facebook/hiphop-php/wiki/Running-HipHop](https://github.com/facebook/hiphop-php/wiki/Running-HipHop)*中指定的模式 2 或 3 或 4 或 5 运行 HipHop 。

我正在尝试在**模式 2**中运行 HipHop，然后遇到一些错误，显示“sudo: /tmp/hphp_DF8jr8/program: command not found”消息，您能帮我解决这个问题并开始正确使用 HipHop方向。

只是发布我的终端回复供您参考：

***siva@siva-Parallels-Virtual-Platform:~/dev/hiphop-php$*** $HPHP_HOME/src/hphp/hphp /var/www/test.php k 1 --log=3
running hphp...
创建临时目录 / tmp/hphp_DF8jr8 ...
解析输入...
解析输入耗时 0'00" (3 ms) wall time
pre-optimizing...
预优化耗时 0'00" (0 ms) wall time
分析包括...
分析包括耗时 0'00" (0 ms) 的墙时间
推断类型...
推断类型耗时 0'00" (0 ms) 墙时间
后优化...
优化后耗时 0'00" (1 ms) 墙时间
创建二进制 HHBC 文件...
创建二进制 HHBC 文件耗时 0'00" (6 ms)
运行可执行文件 /home/siva/dev/hiphop-php/src/hhvm/hhvm -vRepo.Authoritative=true -vRepo.Commit=false -vRepo.Local.Mode=r -vRepo.Local.Path=/tmp/hphp_DF8jr8/ hhvm.hhbc --file /var/www/test.php...
这是我的第一个 php 程序...所有文件保存在 /tmp/hphp_DF8jr8 ...
运行 hphp 花费了 0'00" (443 ms) 挂起时间

***siva@siva-Parallels-Virtual-Platform:~/dev/hiphop-php$*** /tmp/hphp_DF8jr8/program
bash: /tmp/hphp_DF8jr8/program: 没有这样的文件或目录

***siva@siva-Parallels-Virtual-Platform:~/ dev/hiphop-php$*** sudo /tmp/hphp_DF8jr8/program
sudo: /tmp/hphp_DF8jr8/program: 找不到命令

谢谢，
湿婆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:36:25.673

您忘记添加 --keep-tempdir 选项。更仔细地查看链接上的文档。

# asp.net - 更新了 Google Analytic API 和旧版本

> ID：12562143
> 
> 赞同：0
> 
> 时间：2012-09-24T09:22:43.850
> 
> 标签：asp.net, google-analytics, google-api

在 Google Analytic Update 之前有 api 这段代码有效。

```
 string userName = GAEmailAddress.ToString();//Its From Database
    string passWord = GAPassword.ToString();//Its From Database

    const string dataFeedUrl = "https://www.google.com/analytics/feeds/data";

    AccountQuery query = new AccountQuery();
    AnalyticsService service = new AnalyticsService("AnalyticsApp");
    if (!string.IsNullOrEmpty(userName))
    {
        service.setUserCredentials(userName, passWord);
    }
    string str = "";
    try
    {
        AccountFeed accountFeed = service.Query(query);
        foreach (AccountEntry entry in accountFeed.Entries)
        {
            str = entry.ProfileId.Value;
        }

        DataQuery query1 = new DataQuery(dataFeedUrl);
        // Bounce Rate Calculations
        query1.Ids = str;
        query1.Metrics = "ga:visits,ga:bounces";//visitors
        query1.Sort = "ga:visits";
        query1.GAStartDate = DateTime.Now.AddMonths(-1).AddDays(-2).ToString("yyyy-MM-dd");
        query1.GAEndDate = DateTime.Now.AddDays(-3).ToString("yyyy-MM-dd");
        query1.StartIndex = 1;

  //Others code and other data for bound 
```

我在 SO 中搜索并找到此链接。

[gapi 帐户数据 url 转到 404](https://stackoverflow.com/questions/12104801/gapi-account-data-url-goes-to-404)

我替换此链接：

`const string dataFeedUrl = "https://www.google.com/analytics/feeds/data";`

和：

```
https://www.googleapis.com/analytics/v2.4/management/accounts?start-index=1&max-results=100&key=API_KEY 
```

但我仍然收到错误：

```
Execution of request failed: https://www.google.com/analytics/feeds/accounts/default 
```

我仍然搜索并找到此链接：

[https://developers.google.com/analytics/devguides/reporting/core/v2/#register](http://developers.google.com/analytics/devguides/reporting/core/v2/#register)

正如链接所说，我替换：

```
https://www.googleapis.com/analytics/v2.4/data 
```

但我还是有错误？我在这里缺少什么？谢谢。

# mysql - 使用存在的慢mysql搜索查询

> ID：12562149
> 
> 赞同：1
> 
> 时间：2012-09-24T09:22:58.250
> 
> 标签：mysql, performance

字符串搜索查询（MySQL 5.5）存在性能问题。主表包含几个文本列。表 multi 每个主条目包含零个或多个多值字段。我们想计算有多少主要项目具有以特定字符串开头的字段之一。

这是查询：

```
select count(main_id) from main ma
where s1 like '888%' or s2 like '888%' or s3 like '888%'
or exists (select m.multivalue 
           from multi m 
           where ma.main_id=m.main_id and (m.multivalue like '888%')) 
```

main 中已经有大约几十万条记录，而 multi 中的记录数量也差不多，查询需要几秒钟才能完成。

这是解释：

```
PRIMARY ma  ALL s1,s2,s3                100407  100.00  Using where
DEPENDENT SUBQUERY  m   ref PRIMARY,main_id,multivalue  PRIMARY 8   sample.ma.main_id   1   100.00  Using where; Using index 
```

和表定义：

```
CREATE TABLE `main` (
  `main_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `s1` varchar(50) CHARACTER SET utf8 NOT NULL,
  `s2` varchar(50) CHARACTER SET utf8 DEFAULT NULL,
  `s3` varchar(50) CHARACTER SET utf8 DEFAULT NULL,
  PRIMARY KEY (`main_id`),
  KEY `s1` (`s1`),
  KEY `s2` (`s2`),
  KEY `s3` (`s3`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

CREATE TABLE `multi` (
  `main_id` bigint(20) NOT NULL,
  `multivalue` varchar(50) CHARACTER SET utf8 NOT NULL,
  PRIMARY KEY (`main_id`,`multivalue`),
  KEY `main_id` (`main_id`),
  KEY `multivalue` (`multivalue`),
  CONSTRAINT `FK_multi_main` FOREIGN KEY (`main_id`) REFERENCES `main` (`main_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

任何想法如何使这个查询更快？

innodb 设置：

```
innodb_additional_mem_pool_size=32M
innodb_flush_log_at_trx_commit=1
innodb_log_buffer_size=64M
innodb_buffer_pool_size=1000M
innodb_log_file_size=128M
innodb_thread_concurrency=16
innodb_file_per_table
innodb_file_format=Barracuda 
```

# android - android获取所有联系人

> ID：12562151
> 
> 赞同：115
> 
> 时间：2012-09-24T09:23:21.400
> 
> 标签：android

如何在我的 Android 中获取所有联系人的姓名并将它们放入字符串数组中？

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-09-24T09:27:59.773

也试试这个

```
private void getContactList() {
    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
            null, null, null, null);

    if ((cur != null ? cur.getCount() : 0) > 0) {
        while (cur != null && cur.moveToNext()) {
            String id = cur.getString(
                    cur.getColumnIndex(ContactsContract.Contacts._ID));
            String name = cur.getString(cur.getColumnIndex(
                    ContactsContract.Contacts.DISPLAY_NAME));

            if (cur.getInt(cur.getColumnIndex(
                    ContactsContract.Contacts.HAS_PHONE_NUMBER)) > 0) {
                Cursor pCur = cr.query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?",
                        new String[]{id}, null);
                while (pCur.moveToNext()) {
                    String phoneNo = pCur.getString(pCur.getColumnIndex(
                            ContactsContract.CommonDataKinds.Phone.NUMBER));
                    Log.i(TAG, "Name: " + name);
                    Log.i(TAG, "Phone Number: " + phoneNo);
                }
                pCur.close();
            }
        }
    }
    if(cur!=null){
        cur.close();
    }
} 
```

如果您需要更多参考方式，请参阅此链接[阅读联系人列表](http://saigeethamn.blogspot.in/2011/05/contacts-api-20-and-above-android.html)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-01-24T11:27:09.380

获取联系人信息、照片联系人、照片 uri 并转换为 Class 模型

1）。类模型示例：

```
 public class ContactModel {
        public String id;
        public String name;
        public String mobileNumber;
        public Bitmap photo;
        public Uri photoURI;
    } 
```

2）。获取联系人并转换为模型

```
 public List<ContactModel> getContacts(Context ctx) {
        List<ContactModel> list = new ArrayList<>();
        ContentResolver contentResolver = ctx.getContentResolver();
        Cursor cursor = contentResolver.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        if (cursor.getCount() > 0) {
            while (cursor.moveToNext()) {
                String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
                if (cursor.getInt(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER)) > 0) {
                    Cursor cursorInfo = contentResolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[]{id}, null);
                    InputStream inputStream = ContactsContract.Contacts.openContactPhotoInputStream(ctx.getContentResolver(),
                            ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, new Long(id)));

                    Uri person = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, new Long(id));
                    Uri pURI = Uri.withAppendedPath(person, ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);

                    Bitmap photo = null;
                    if (inputStream != null) {
                        photo = BitmapFactory.decodeStream(inputStream);
                    }
                    while (cursorInfo.moveToNext()) {
                        ContactModel info = new ContactModel();
                        info.id = id;
                        info.name = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                        info.mobileNumber = cursorInfo.getString(cursorInfo.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        info.photo = photo;
                        info.photoURI= pURI;
                        list.add(info);
                    }

                    cursorInfo.close();
                }
            }
            cursor.close();
        }
        return list;
    } 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-08-06T10:09:26.793

```
public class MyActivity extends Activity 
                        implements LoaderManager.LoaderCallbacks<Cursor> {

    private static final int CONTACTS_LOADER_ID = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Prepare the loader.  Either re-connect with an existing one,
        // or start a new one.
        getLoaderManager().initLoader(CONTACTS_LOADER_ID,
                                      null,
                                      this);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        // This is called when a new Loader needs to be created.

        if (id == CONTACTS_LOADER_ID) {
            return contactsLoader();
        }
        return null;
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        //The framework will take care of closing the
        // old cursor once we return.
        List<String> contacts = contactsFromCursor(cursor);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        // This is called when the last Cursor provided to onLoadFinished()
        // above is about to be closed.  We need to make sure we are no
        // longer using it.
    }

    private  Loader<Cursor> contactsLoader() {
        Uri contactsUri = ContactsContract.Contacts.CONTENT_URI; // The content URI of the phone contacts

        String[] projection = {                                  // The columns to return for each row
                ContactsContract.Contacts.DISPLAY_NAME
        } ;

        String selection = null;                                 //Selection criteria
        String[] selectionArgs = {};                             //Selection criteria
        String sortOrder = null;                                 //The sort order for the returned rows

        return new CursorLoader(
                getApplicationContext(),
                contactsUri,
                projection,
                selection,
                selectionArgs,
                sortOrder);
    }

    private List<String> contactsFromCursor(Cursor cursor) {
        List<String> contacts = new ArrayList<String>();

        if (cursor.getCount() > 0) {
            cursor.moveToFirst();

            do {
                String name = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                contacts.add(name);
            } while (cursor.moveToNext());
        }

        return contacts;
    }

} 
```

不要忘记

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-06-18T12:41:29.827

在不到一秒钟的时间内获取所有联系人，并且不会对您的活动造成任何负担。按照我的步骤就像一个魅力。

```
ArrayList<Contact> contactList = new ArrayList<>();

private static final String[] PROJECTION = new String[]{
        ContactsContract.CommonDataKinds.Phone.CONTACT_ID,
        ContactsContract.Contacts.DISPLAY_NAME,
        ContactsContract.CommonDataKinds.Phone.NUMBER
};

private void getContactList() {
    ContentResolver cr = getContentResolver();

    Cursor cursor = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, PROJECTION, null, null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " ASC");
    if (cursor != null) {
        HashSet<String> mobileNoSet = new HashSet<String>();
        try {
            final int nameIndex = cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME);
            final int numberIndex = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);

            String name, number;
            while (cursor.moveToNext()) {
                name = cursor.getString(nameIndex);
                number = cursor.getString(numberIndex);
                number = number.replace(" ", "");
                if (!mobileNoSet.contains(number)) {
                    contactList.add(new Contact(name, number));
                    mobileNoSet.add(number);
                    Log.d("hvy", "onCreaterrView  Phone Number: name = " + name
                            + " No = " + number);
                }
            }
        } finally {
            cursor.close();
        }
    }
} 
```

联系人

```
 public class Contact {
public String name;
public String phoneNumber;

public Contact() {
}

public Contact(String name, String phoneNumber ) {
    this.name = name;
    this.phoneNumber = phoneNumber;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getPhoneNumber() {
    return phoneNumber;
}

public void setPhoneNumber(String phoneNumber) {
    this.phoneNumber = phoneNumber;
}

} 
```

好处

*   不到一秒
*   无负载
*   升序
*   没有重复的联系人

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-01-17T02:37:12.830

改进@Adiii 的答案 - 它将清理电话号码并删除所有重复项

声明一个全局变量

```
// Hash Maps
Map<String, String> namePhoneMap = new HashMap<String, String>(); 
```

然后使用下面的函数

```
private void getPhoneNumbers() {

        Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);

        // Loop Through All The Numbers
        while (phones.moveToNext()) {

            String name = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

            // Cleanup the phone number
            phoneNumber = phoneNumber.replaceAll("[()\\s-]+", "");

            // Enter Into Hash Map
            namePhoneMap.put(phoneNumber, name);

        }

        // Get The Contents of Hash Map in Log
        for (Map.Entry<String, String> entry : namePhoneMap.entrySet()) {
            String key = entry.getKey();
            Log.d(TAG, "Phone :" + key);
            String value = entry.getValue();
            Log.d(TAG, "Name :" + value);
        }

        phones.close();

    } 
```

请记住，在上面的示例中，键是电话号码，值是名称，因此请阅读您的内容，例如 998xxxxx282->Mahatma Gandhi 而不是 Mahatma Gandhi->998xxxxx282

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-24T09:40:41.190

```
Cursor contacts = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
String aNameFromContacts[] = new String[contacts.getCount()];  
String aNumberFromContacts[] = new String[contacts.getCount()];  
int i = 0;

int nameFieldColumnIndex = contacts.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME);
int numberFieldColumnIndex = contacts.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);

while(contacts.moveToNext()) {

    String contactName = contacts.getString(nameFieldColumnIndex);
    aNameFromContacts[i] =    contactName ; 

    String number = contacts.getString(numberFieldColumnIndex);
    aNumberFromContacts[i] =    number ;
i++;
}

contacts.close(); 
```

结果将是一个充满联系人的NameFromContacts 数组。还要确保您已添加

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

在 main.xml

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-17T10:02:13.390

**这是获取联系人列表名称和号码的方法**

```
 private void getAllContacts() {
    ContentResolver contentResolver = getContentResolver();
    Cursor cursor = contentResolver.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " ASC");
    if (cursor.getCount() > 0) {
        while (cursor.moveToNext()) {

            int hasPhoneNumber = Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER)));
            if (hasPhoneNumber > 0) {
                String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
                String name = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                Cursor phoneCursor = contentResolver.query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[]{id},
                        null);
                if (phoneCursor != null) {
                    if (phoneCursor.moveToNext()) {
                        String phoneNumber = phoneCursor.getString(phoneCursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

   //At here You can add phoneNUmber and Name to you listView ,ModelClass,Recyclerview
                        phoneCursor.close();
                    }

                }
            }
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-28T05:02:57.760

```
//GET CONTACTLIST WITH ALL FIELD...       

public ArrayList < ContactItem > getReadContacts() {
         ArrayList < ContactItem > contactList = new ArrayList < > ();
         ContentResolver cr = getContentResolver();
         Cursor mainCursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
         if (mainCursor != null) {
          while (mainCursor.moveToNext()) {
           ContactItem contactItem = new ContactItem();
           String id = mainCursor.getString(mainCursor.getColumnIndex(ContactsContract.Contacts._ID));
           String displayName = mainCursor.getString(mainCursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

           Uri contactUri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, Long.parseLong(id));
           Uri displayPhotoUri = Uri.withAppendedPath(contactUri, ContactsContract.Contacts.Photo.DISPLAY_PHOTO);

           //ADD NAME AND CONTACT PHOTO DATA...
           contactItem.setDisplayName(displayName);
           contactItem.setPhotoUrl(displayPhotoUri.toString());

           if (Integer.parseInt(mainCursor.getString(mainCursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
            //ADD PHONE DATA...
            ArrayList < PhoneContact > arrayListPhone = new ArrayList < > ();
            Cursor phoneCursor = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] {
             id
            }, null);
            if (phoneCursor != null) {
             while (phoneCursor.moveToNext()) {
              PhoneContact phoneContact = new PhoneContact();
              String phone = phoneCursor.getString(phoneCursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
              phoneContact.setPhone(phone);
              arrayListPhone.add(phoneContact);
             }
            }
            if (phoneCursor != null) {
             phoneCursor.close();
            }
            contactItem.setArrayListPhone(arrayListPhone);

            //ADD E-MAIL DATA...
            ArrayList < EmailContact > arrayListEmail = new ArrayList < > ();
            Cursor emailCursor = cr.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", new String[] {
             id
            }, null);
            if (emailCursor != null) {
             while (emailCursor.moveToNext()) {
              EmailContact emailContact = new EmailContact();
              String email = emailCursor.getString(emailCursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
              emailContact.setEmail(email);
              arrayListEmail.add(emailContact);
             }
            }
            if (emailCursor != null) {
             emailCursor.close();
            }
            contactItem.setArrayListEmail(arrayListEmail);

            //ADD ADDRESS DATA...
            ArrayList < PostalAddress > arrayListAddress = new ArrayList < > ();
            Cursor addrCursor = getContentResolver().query(ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_URI, null, ContactsContract.CommonDataKinds.StructuredPostal.CONTACT_ID + " = ?", new String[] {
             id
            }, null);
            if (addrCursor != null) {
             while (addrCursor.moveToNext()) {
              PostalAddress postalAddress = new PostalAddress();
              String city = addrCursor.getString(addrCursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY));
              String state = addrCursor.getString(addrCursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.REGION));
              String country = addrCursor.getString(addrCursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY));
              postalAddress.setCity(city);
              postalAddress.setState(state);
              postalAddress.setCountry(country);
              arrayListAddress.add(postalAddress);
             }
            }
            if (addrCursor != null) {
             addrCursor.close();
            }
            contactItem.setArrayListAddress(arrayListAddress);
           }
           contactList.add(contactItem);
          }
         }
         if (mainCursor != null) {
          mainCursor.close();
         }
         return contactList;
        }

    //MODEL...
        public class ContactItem {

            private String displayName;
            private String photoUrl;
            private ArrayList<PhoneContact> arrayListPhone = new ArrayList<>();
            private ArrayList<EmailContact> arrayListEmail = new ArrayList<>();
            private ArrayList<PostalAddress> arrayListAddress = new ArrayList<>();

            public String getDisplayName() {
                return displayName;
            }

            public void setDisplayName(String displayName) {
                this.displayName = displayName;
            }

            public String getPhotoUrl() {
                return photoUrl;
            }

            public void setPhotoUrl(String photoUrl) {
                this.photoUrl = photoUrl;
            }

            public ArrayList<PhoneContact> getArrayListPhone() {
                return arrayListPhone;
            }

            public void setArrayListPhone(ArrayList<PhoneContact> arrayListPhone) {
                this.arrayListPhone = arrayListPhone;
            }

            public ArrayList<EmailContact> getArrayListEmail() {
                return arrayListEmail;
            }

            public void setArrayListEmail(ArrayList<EmailContact> arrayListEmail) {
                this.arrayListEmail = arrayListEmail;
            }

            public ArrayList<PostalAddress> getArrayListAddress() {
                return arrayListAddress;
            }

            public void setArrayListAddress(ArrayList<PostalAddress> arrayListAddress) {
                this.arrayListAddress = arrayListAddress;
            }
        }

        public class EmailContact
        {
            private String email = "";

            public String getEmail() {
                return email;
            }

            public void setEmail(String email) {
                this.email = email;
            }
        }

        public class PhoneContact
        {
            private String phone="";

            public String getPhone()
            {
                return phone;
            }

            public void setPhone(String phone) {
                this.phone = phone;
            }
        }

        public class PostalAddress
        {
            private String city="";
            private String state="";
            private String country="";

            public String getCity() {
                return city;
            }

            public void setCity(String city) {
                this.city = city;
            }

            public String getState() {
                return state;
            }

            public void setState(String state) {
                this.state = state;
            }

            public String getCountry() {
                return country;
            }

            public void setCountry(String country) {
                this.country = country;
            }
        } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-05-17T09:23:48.697

```
//In Kotlin     
private fun showContacts() {
        // Check the SDK version and whether the permission is already granted or not.
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M && checkSelfPermission(
                requireContext(),
                Manifest.permission.READ_CONTACTS
            ) != PackageManager.PERMISSION_GRANTED
        ) {
            requestPermissions(
                arrayOf(Manifest.permission.READ_CONTACTS),
                1001
            )
            //After this point you wait for callback in onRequestPermissionsResult(int, String[], int[]) overriden method
        } else {
            // Android version is lesser than 6.0 or the permission is already granted.
            getContactList()
        }
    }
    private fun getContactList() {
        val cr: ContentResolver = requireActivity().contentResolver
        val cur: Cursor? = cr.query(
            ContactsContract.Contacts.CONTENT_URI,
            null, null, null, null
        )
        if ((if (cur != null) cur.getCount() else 0) > 0) {
            while (cur != null && cur.moveToNext()) {
                val id: String = cur.getString(
                    cur.getColumnIndex(ContactsContract.Contacts._ID)
                )
                val name: String = cur.getString(
                    cur.getColumnIndex(
                        ContactsContract.Contacts.DISPLAY_NAME
                    )
                )
                if (cur.getInt(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER)) > 0) {
                    val pCur: Cursor? = cr.query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?",
                        arrayOf(id),
                        null
                    )
                    pCur?.let {
                        while (pCur.moveToNext()) {
                            val phoneNo: String = pCur.getString(
                                pCur.getColumnIndex(
                                    ContactsContract.CommonDataKinds.Phone.NUMBER
                                )
                            )
                            Timber.i("Name: $name")
                            Timber.i("Phone Number: $phoneNo")
                        }
                        pCur.close()
                    }

                }
            }
        }
        if (cur != null) {
            cur.close()
        }
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-18T11:24:07.373

我正在使用这种方法，并且效果很好。它得到收藏、图片、姓名、号码等（联系人的所有详细信息）。而且它不是重复的。

> 列表

```
private static List<FavContact> contactList = new ArrayList<>(); 
```

> 获取联系人的方法

```
@SuppressLint("Range")
public static void readContacts(Context context) {

    if (context == null)
        return;

    ContentResolver contentResolver = context.getContentResolver();

    if (contentResolver == null)
        return;

    String[] fieldListProjection = {
            ContactsContract.CommonDataKinds.Phone.CONTACT_ID,
            ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME_PRIMARY,
            ContactsContract.CommonDataKinds.Phone.NUMBER,
            ContactsContract.CommonDataKinds.Phone.NORMALIZED_NUMBER,
            ContactsContract.Contacts.HAS_PHONE_NUMBER,
            ContactsContract.Contacts.PHOTO_URI
            ,ContactsContract.Contacts.STARRED
    };
    String sort = ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME_PRIMARY + " ASC";
    Cursor phones = contentResolver
            .query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI
                    , fieldListProjection, null, null, sort);
    HashSet<String> normalizedNumbersAlreadyFound = new HashSet<>();

    if (phones != null && phones.getCount() > 0) {
        while (phones.moveToNext()) {
            String normalizedNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));

            if (Integer.parseInt(phones.getString(phones.getColumnIndex(
                    ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                if (normalizedNumbersAlreadyFound.add(normalizedNumber)) {

                    int id = phones.getInt(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.CONTACT_ID));
                    String name = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                    String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                    int fav = phones.getInt(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.STARRED));
                    boolean isFav;
                    isFav= fav == 1;

                    String uri = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.PHOTO_URI));
                    if(uri!=null){
                        contactList.add(new FavContact(id,isFav,uri,name,phoneNumber));
                    }
                    else{
                        contactList.add(new FavContact(id,isFav,name,phoneNumber));
                    }

                }
            }
        }
        phones.close();
    }
} 
```

> 模型类

```
public class FavContact{

    private int id;

    private boolean isFavorite;

    private String image;

    private String name;

    private String number;

    public FavContact(int id,boolean isFavorite, String image, String name, String number){
        this.id=id;
        this.isFavorite = isFavorite;
        this.image = image;
        this.name = name;
        this.number = number;
    }

    public FavContact(int id,boolean isFavorite, String name, String number){
        this.id=id;
        this.isFavorite = isFavorite;
        this.name = name;
        this.number = number;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public boolean isFavorite() {
        return isFavorite;
    }

    public void setFavorite(boolean favorite) {
        isFavorite = favorite;
    }

    public String getImage() {
        return image;
    }

    public void setImage(String image) {
        this.image = image;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getNumber() {
        return number;
    }

    public void setNumber(String number) {
        this.number = number;
    }

} 
```

> 适配器

```
public class ContactAdapter extends RecyclerView.Adapter<ContactAdapter.MyViewHolder> implements Filterable {

private final Context context;
private final List<FavContact> contactList;
private final List<FavContact> filterList;
private final OnMyOwnClickListener onMyOwnClickListener;
private final FavContactRepo favContactRepo;

public ContactAdapter(Application application,Context context, List<FavContact> contactList, OnMyOwnClickListener onMyOwnClickListener) {
    this.context = context;
    this.contactList = contactList;
    this.onMyOwnClickListener = onMyOwnClickListener;
    filterList = new ArrayList<>(contactList);
    favContactRepo = new FavContactRepo(application);
}

@NonNull
@Override
public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
    final LayoutInflater inflater = LayoutInflater.from(context);
    @SuppressLint("InflateParams") final View view = inflater.inflate(R.layout.design_fav_contact, null, false);
    return new MyViewHolder(view,onMyOwnClickListener);
}

@Override
public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {
    final FavContact obj = contactList.get(position);
    holder.tv_contact_name.setText(obj.getName());

    holder.tv_contact_number.setText(obj.getNumber());

    if(obj.getImage()==null){
        Picasso.get().load(R.drawable.ic_circle_fav_no_dp).fit().into(holder.img_contact);
    }
    else{
        Bitmap bp;
        try {
            bp = MediaStore.Images.Media
                    .getBitmap(context.getContentResolver(),
                            Uri.parse(obj.getImage()));
            Glide.with(context).load(bp).centerInside().into(holder.img_contact);
        } catch (IOException e) {
            e.printStackTrace();
            Picasso.get().load(R.drawable.ic_circle_fav_no_dp).fit().into(holder.img_contact);
        }

    }
    obj.setFavorite(favContactRepo.checkIfFavourite(obj.getId()));

    if(obj.isFavorite()){
        Picasso.get().load(R.drawable.ic_menu_favorite_true).into(holder.img_fav_true_or_not);
    }
    else{
        Picasso.get().load(R.drawable.ic_menu_favorite_false).into(holder.img_fav_true_or_not);
    }

}

@Override
public int getItemCount() {
    return contactList.size();
}

@Override
public long getItemId(int position) {
    return position;
}
@Override
public int getItemViewType(int position) {
    return position;
}

static class MyViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {
    CircleImageView img_contact;
    TextView tv_contact_name,tv_contact_number;
    ImageView img_fav_true_or_not;
    ImageView img_call;
    RecyclerView fav_contact_rv;

    OnMyOwnClickListener onMyOwnClickListener;
    public MyViewHolder(@NonNull View itemView, OnMyOwnClickListener onMyOwnClickListener) {
        super(itemView);
        img_contact = itemView.findViewById(R.id.img_contact);
        tv_contact_name = itemView.findViewById(R.id.tv_contact_name);
        img_fav_true_or_not = itemView.findViewById(R.id.img_fav_true_or_not);
        tv_contact_number = itemView.findViewById(R.id.tv_contact_number);
        img_call = itemView.findViewById(R.id.img_call);
        fav_contact_rv = itemView.findViewById(R.id.fav_contact_rv);

        this.onMyOwnClickListener = onMyOwnClickListener;
        img_call.setOnClickListener(this);
        img_fav_true_or_not.setOnClickListener(this);
        img_contact.setOnClickListener(this);
        itemView.setOnClickListener(this);
    }

    @Override
    public void onClick(View view) {
        onMyOwnClickListener.onMyOwnClick(getAbsoluteAdapterPosition(),view);
    }
}

public interface OnMyOwnClickListener{
    void onMyOwnClick(int position,View view);
}

@Override
public Filter getFilter() {
    return filteredList;
}

public Filter filteredList = new Filter() {
    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        List<FavContact> filteredList = new ArrayList<>();
        if (constraint == null || constraint.length() == 0) {
            filteredList=filterList;
        } else {
            String filterText = constraint.toString().toLowerCase().trim();
            for (FavContact item : filterList) {
                if (item.getName().toLowerCase().contains(filterText)
                        ||item.getNumber().toLowerCase().contains(filterText)) {
                    filteredList.add(item);
                }
            }

        }

        FilterResults results = new FilterResults();
        results.values = filteredList;

        return results;
    }

    @SuppressLint("NotifyDataSetChanged")
    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {
        contactList.clear();
        contactList.addAll((ArrayList)results.values);
        notifyDataSetChanged();

    }
}; 
```

[![演示](../Images/18b8070c28dbdb74ce87025155121750.png)](https://i.stack.imgur.com/5Vluz.png)

# ios - 替换 CLLocationManager 的“目的”属性

> ID：12562152
> 
> 赞同：43
> 
> 时间：2012-09-24T09:23:23.913
> 
> 标签：ios, cocoa-touch, ios6, cllocationmanager, deprecated

在 iOS 6`purpose`中，用于描述使用位置服务 ( `@property(copy, nonatomic) NSString *purpose`) 原因的 CLLocationManager 属性已被弃用。

Apple 提出了哪些替代方案（如果有）？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-25T12:24:53.570

iOS 6 中该属性的替换`purpose`是一个名为`NSLocationUsageDescription`（又名“隐私 - 位置使用说明”）的新 Info.plist 键。

该密钥[记录在信息属性列表密钥参考](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html)中，但不幸的是，该`purpose`属性的弃用说明中没有提到它。

但是，`CLLocationManager.h`确实有这样的评论：

> `*` 已弃用。使用键 NSLocationUsageDescription 在 Info.plist 中设置目的字符串。

在您的代码中，您可以同时设置键和`purpose`属性（但您可能需要检查位置管理器是否首先响应该选择器，如果/当该方法在未来被实际删除时）。

如果在 iOS 6 下运行，位置管理器将使用密钥。
在低于 iOS 6 下运行时，将忽略密钥并使用`purpose`属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T11:04:42.527

我刚刚在我的应用程序中遇到了同样的问题。

我发现你现在可以设置Activity的`CLLocationManager!`你可以选择不同的CLActivityTypes，这样你就不需要再写你自己的目的了。

这是基于导航的应用程序的示例

```
[self.gps setActivityType:CLActivityTypeAutomotiveNavigation]; 
```

其他可能的 CLActivityTypes 是：

```
 - CLActivityTypeFitness
 - CLActivityTypeOther
 - CLActivityTypeOtherNavigation 
```

# ios - iOS 透明 ViewController

> ID：12562153
> 
> 赞同：0
> 
> 时间：2012-09-24T09:23:25.193
> 
> 标签：ios, modal-dialog, transparent, viewcontroller

我正在尝试创建一个透明的模态 ViewController，它覆盖当前的 ViewController。我将 backgroundcolor 设置为 clearcolor 但背景是黑色的，因为另一个 viewcontroller 没有显示在新的 viewcontroller 后面。我想要一个像 UIAlertView 这样的叠加层。

我用谷歌搜索了很多，我发现的唯一解决方案是添加一个子视图。我正在使用iOS5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:33:18.510

**在你呈现模型视图后将**背景颜色设置为清除，将背景设置为清除然后呈现将不起作用。

如果您想呈现 UIAlertView 之类的视图，请使用此-

```
CAKeyframeAnimation *animation = [CAKeyframeAnimation
        animationWithKeyPath:@"transform"];

    CATransform3D scale1 = CATransform3DMakeScale(0.5, 0.5, 1);
    CATransform3D scale2 = CATransform3DMakeScale(1.2, 1.2, 1);
    CATransform3D scale3 = CATransform3DMakeScale(0.9, 0.9, 1);
    CATransform3D scale4 = CATransform3DMakeScale(1.0, 1.0, 1);

    NSArray *frameValues = [NSArray arrayWithObjects:
        [NSValue valueWithCATransform3D:scale1],
        [NSValue valueWithCATransform3D:scale2],
        [NSValue valueWithCATransform3D:scale3],
        [NSValue valueWithCATransform3D:scale4],
        nil];
    [animation setValues:frameValues];//Courtesy zoul.fleuron.cz

    NSArray *frameTimes = [NSArray arrayWithObjects:
        [NSNumber numberWithFloat:0.0],
        [NSNumber numberWithFloat:0.5],
        [NSNumber numberWithFloat:0.9],
        [NSNumber numberWithFloat:1.0],
        nil];    
    [animation setKeyTimes:frameTimes];

    animation.fillMode = kCAFillModeForwards;
    animation.removedOnCompletion = NO;
    animation.duration = .2;
    [self.backColor SETCOLOUR HERE];
    [self.layer addAnimation:animation forKey:@"uialertViewPopUP"]; 
```

您可以使用上面给出的代码覆盖该`willMoveToSuperView`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:35:03.990

沿着这些路线做一些事情是可行的。我们是根据这篇文章做的：

[http://trongdth.blogspot.com/2011/08/create-overlay-view-in-ios.html](http://trongdth.blogspot.com/2011/08/create-overlay-view-in-ios.html)

# php - 查找出现在所有给定数组中的元素

> ID：12562155
> 
> 赞同：-1
> 
> 时间：2012-09-24T09:23:34.533
> 
> 标签：php, arrays, sorting

我有一个数组数组：

```
(1, 3), (3, 5, 7), (2, 3, 4), (3, 7, 9) 
```

我需要找到一个出现在所有子数组中的值，在这种情况下，该数字是“3”。

我能找到的最有效的解决方案是 O(n^3)，我想知道是否有更有效的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:25:35.183

您可以尝试[`array_intersect`](http://php.net/array_intersect)：

```
$output = array_intersect($array1, $array2, $array3, ...); 
```

或自动：

```
$input  = array( array(1, 3), array(3, 5, 7), array(2, 3, 4), array(3, 7, 9) );
$output = $input[0];

foreach ( $input as $key => $subarray ) {
  if ( $key == 0 ) {
    continue;
  }

  $output = array_intersect($output, $subarray);
  if ( empty($output) ) {
    break;
  }
}

var_dump($output); 
```

# php - 带有（n 深度）对象吸气剂的 Isset

> ID：12562156
> 
> 赞同：0
> 
> 时间：2012-09-24T09:23:37.080
> 
> 标签：php, zend-framework, doctrine-orm

一个使用 Doctrine 的 Zend-Framework 项目。数据以对象的形式出现。在我的 Zend View 中，我像访问它一样

```
$this->personData->getPersonAdress()->getPersonStreet(); 
```

由于 Person 可能没有关联的地址，因此我们必须检查 personadress 是否存在以及在回显之前是否填充了 personStreet，否则可能会出现回显 NULL 错误。

所以我们使用一些带有 isset 的 IF：

```
<? if($this->personData->getPersonaddress()) echo $this->personData->getPersonaddress()->getPersonstreet(); else echo "''"?> 
```

示例（最坏情况）：

```
<?
   if(isset($this->address[0]) && is_object($this->address[0]))
   {
      $help2=$this->address[0]->getAddress();
      if (isset($help2) && is_object($help2))
      {
         $help=$this->address[0]->getAddress()->getCountry();
         if (isset($help) && is_object($help) && $help->getCountryId())
         {
            echo $this->address[0]->getAddress()->getCountry()->getCountryId();
         }
      }
   }
?> 
```

我们需要一个解决方案，或者最终需要一个 Zend_view 助手来简化回显这些值的过程。

任何想法将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:28:07.457

您可以使用 HYDRATE_ARRAY 告诉 Doctrine 返回一个数组，而不是映射的对象。

这样，可以直接调用isset()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:11:43.877

我自己解决了这个问题，实现了一个 Zend View Helper，它打印出每个值，忽略非对象属性或 NULL 关联可能发生的错误。这对使用 Zend Framework + Doctrine 2 的每个人都应该有用。

## 用法

代替

> $this->address[0]->getAddress()->getCountry()->getCountryId()

使用（如果未设置，则提供值或默认值（0，第三个参数））

> $this->Printsafe($this->address[0], "getAddress/getCountry/getCountryId", 0)

## 代码如下

```
class Printsafe extends Zend_View_Helper_Abstract {

    public function isObjectOrSet($data, $properties)
    {
        if ($data != null)
        {
            if(is_object($data))
            {
                if (isset($properties[0]))
                {
                    $actual_property = array_shift($properties);
                    return $this->isObjectOrSet($data->{$actual_property}(), $properties);
                }
            }
            elseif(isset($data))
            {
                return $data;
            }
            else
                return null;
        }
        else
            return null;
    }

    /**
    * Wants data and getters + properties
    * Tests if they are set and returns requested value
    * Returns empty value (instead of NULL) if any error occurs
    * 
    * @param  mixed $data - Example $this->personData
    * @param  string $properties - Example "getPersontype/getNotation"
    * @param  mixed $default - return value if not set. Default is empty string. 
    * 
    * @return mixed $value
    */
    public function printsafe($data = null, $properties='', $default = '') {

        $return = null;

        if ($data != null)
        {
            if ($properties != '')
            {
                $prop_array = explode("/", $properties);
                $return = $this->isObjectOrSet($data, $prop_array);
            }
        }

        if ($return == null)
            $return = $default;

        return $return;
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-24T12:40:50.030

您可以在链前面加上 @，这会抑制错误输出 - 然后您根本不需要检查它。如果它不存在，它就不会输出任何东西。

```
<?php echo @$this->personData->getPersonAdress()->getPersonStreet(); ?> 
```

通常不建议使用 @ 运算符，但在这种情况下，它似乎是一个合适的解决方案。（缺点是您会错过可能来自此行的其他错误）

# android - 是否有任何“android”库可用于 HTTP POST、GET

> ID：12562159
> 
> 赞同：0
> 
> 时间：2012-09-24T09:23:42.503
> 
> 标签：android, google-app-engine

在性能、稳定性、成熟度等方面，是否有任何 Android 库可用于 HTTP POST、GET 等？

我有一个 android 应用程序，我想向服务器 (GAE) 提交 HTTPS POST 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:25:15.307

Apache HTTPClient 内置在 Andorid 中。请参阅[文档](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)。

它稳定且成熟，并且根据我的经验，它具有良好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:32:05.573

试试这个代码：

```
 HttpParams httpParams = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(httpParams,
                    TIMEOUT_MILLISEC);
            HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
            HttpClient client = new DefaultHttpClient(httpParams);
            HttpPost request = new HttpPut(post_url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:38:47.827

根据您的意愿，您还可以从 jsoup.org 查看 jsoup

我在几个项目中使用它并且对它非常满意。

# bash - Bash - 我把引文放在正确的地方了吗？

> ID：12562163
> 
> 赞同：0
> 
> 时间：2012-09-24T09:24:12.430
> 
> 标签：bash, shell

我对在函数中使用 bash 去除 URL 的文件名感到有点困惑。这是我写的，但我是新手，不知道我是否做得对。

```
function file_download()
{
    filename={$1##*/}
    tar xzf $filename

}

file_download "http://www.url.com/test.zip" 
```

我应该在“$ 1”周围加上引号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:29:40.453

`$`应该在表达式*之外*：

```
filename="${1##*/}" 
```

`test.zip`正如预期的那样，这会给你。否则，你会得到`{http://www.url.com/test.zip##*/}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:56:32.300

您应该`basename`为此使用：

```
filename="$(basename "$1")" 
```

这样，如果您尝试下载`http://www.example.com/`.

# javascript - 上传消息和文件名没有出现

> ID：12562165
> 
> 赞同：1
> 
> 时间：2012-09-24T09:24:28.563
> 
> 标签：javascript, jquery, html

下面是图片输入表格：

```
 var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target_image' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
"<input type='hidden' class='numimage' name='numimage' value='" + numimage + "' />" +
"<div class='display_content_image'>" +
"<p class='imagef1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p>" +
"<p class='imagef1_upload_form' align='center'><br/><label>" + 
"Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
"</p><p class='imagef1_cancel' align='center'><label>" +
"<input type='reset' name='imageCancel' class='imageCancel' value='Cancel' /></label>" +
"</p><p class='listImage' align='left'></p>" +
"<iframe class='upload_target_image' name='upload_target_image' src='#' style='width:300px;height:300px;border:0px;solid;#fff;'></iframe></div></form>");

$image.append($fileImage); 
```

下面是开始上传图片文件的完整 jquery 代码：

```
 function startImageUpload(imageuploadform){

      $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
      $(imageuploadform).find('.imagef1_cancel').css('visibility','visible');
      $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');

      $(imageuploadform).find('.imagef1_upload_form').find('.display_content_image')
           .css('visibility','hidden');
      sourceImageForm = imageuploadform;

      $(imageuploadform).find(".imageCancel").on("click", function(event) {
           $('.upload_target_image').get(0).contentwindow
           $("iframe[name='upload_target_image']").attr("src", "javascript:'<html></html>'");
           return stopImageUpload(2);        
      });    

      return true;
} 
```

下面是完整的 jquery 代码，它在其中停止图像文件上传：

```
 function stopImageUpload(success, imagefilename){

      var result = '';
      imagecounter++;

      var replaceForm = function(result) { 
           $(sourceImageForm).find('.imagef1_upload_form').html(result + '<label>Image File: <input name="fileImage" class="fileImage" type="file"/></label><br/><br/><label><input type="submit" name="submitImageBtn" class="sbtnimage" value="Upload" /></label><label><input type="button" name="imageClear" class="imageClear" value="Clear File"/></label>');
      } 

      var updateForm = function(result) { 
           $(sourceImageForm).find('.imagef1_upload_form').find('.display_content_image').html(result);
      } 

    var displayInfo;

      if (success === 1){
           result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span><br/><br/>';      
           $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
           displayInfo = replaceForm;      
      }
      else if (success === 2){
           result = '<span class="imagemsg'+imagecounter+'"> The file upload was canceled</span><br/><br/>';
           displayInfo = updateForm;    
      }
      else {
           result = '<span class="imagemsg'+imagecounter+'">There was an error during file upload</span><br/><br/>';
           displayInfo = updateForm;  
      }
      displayInfo(result); 

      $(sourceImageForm).find('.imagef1_upload_process').css('visibility','hidden');
      $(sourceImageForm).find('.imagef1_cancel').css('visibility','hidden');
      $(sourceImageForm).find('.imagef1_upload_form').css('visibility','visible');               
 }); 
```

问题是，如果文件已成功上传、取消或上传不成功，则没有成功消息，例如`result = '<span class="imagemsg'+imagecounter+'"> The file upload was canceled</span><br/><br/>';`. 有谁知道为什么消息没有出现。

此外，如果用户成功上传文件，则上传文件的名称应出现在文件输入下方，旁边有一个删除按钮，但这也不适用。有谁知道为什么这也没有出现？

我相信当我在表单`display_content_image`中包含 div 标签时，这突然发生了，但我不起诉我需要为此改变什么

# c++ - 从 C++ 中的 txt 文件中读取十六进制

> ID：12562169
> 
> 赞同：1
> 
> 时间：2012-09-24T09:24:35.233
> 
> 标签：c++, hex

我有一个 txt 文件，其中每行包含十六进制形式的整数，例如：232B2344 A2BC34893 DEF9433 .....他们。还给定十六进制 232B2344 说我想说明每个字节条目的值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:53:54.910

首先包括一个标题

```
#include "sstream" 
```

然后使用文件处理在一个简单的 char[] 数组字符串中获取十六进制值。

字符 str[100];

声明一个 Unsigned int 变量...

```
unsigned int value; 
```

然后声明一个“std::stringstream”变量。例如

```
std::stringstream ss;
ss<<std::hex<<str;
ss>>value; 
```

现在“值”以整数形式包含文件中的十六进制值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:52:09.650

据您描述，文件中的每个数字都是一个 4 字节的无符号整数（适合 32 位）。在这里，您有一个用于解析文件并获取 numbers 数组的 c++ 版本：

```
std::vector<std::string> fromFileToArray( const std::string & fileName )
{
  std::string line;
  std::vector<uint32_t> numbers;
  std::stringstream ss;
  uint32_t tmp;

  std::ifstream numbersFile( fileName.c_str() );
  while( numbersFile.good() )
  {
    getline( numbersFile, line );
    ss << std::hex << line;
    ss >> tmp;
    numbers.push_back( tmp );
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:36:00.073

这个怎么样（虽然它是用 C 函数编写的，但可以帮我移植它以使用 C++ 函数）：

```
const char hexstring[] = "deadbeef10203040b00b1e50", *pos = hexstring;
unsigned char val[12];
size_t count = 0;

/* WARNING: no sanitization or error-checking whatsoever - MAGIC. DO NOT TOUCH. */
for(count = 0; count < sizeof(val)/sizeof(val[0]); count++) {
    sscanf(pos, "%2hhx", &val[count]);
    pos += 2 * sizeof(char);
}

/* Does it work? */
printf("0x");
for(count = 0; count < sizeof(val)/sizeof(val[0]); count++)
    printf("%02x", val[count]);
printf("\n"); 
```

如果字符串中有奇数个十六进制数字，您必须确保在其前面加上一个起始 0。例如，上面的示例`"f00f5"`会将字符串评估为`{0xf0, 0x0f, 0x05}`错误的，而不是正确的`{0x0f, 0x00, 0xf5}`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:51:41.317

要以十六进制格式读取值 - 使用`std::hex`from `<iomanip>`。就像在这个非常简短的例子中一样：

```
#include <iostream>
#include <iomanip>

int main() {
  int value;
  std::cin >> std::hex >> value;
  std::cout << value;
} 
```

只要你的数组有元素就读多少次。

# xml - 将两个具有一个名称但属性不同的 xml 节点相加

> ID：12562170
> 
> 赞同：0
> 
> 时间：2012-09-24T09:24:37.757
> 
> 标签：xml, xquery, xquery-sql

我有一个 sql 查询。我需要对两个具有相同名称（）但属性不同（ident=“1cat”+“3cat”）的xml节点求和。我可以通过它们的编号（[1] 和 [3]）获取节点，但我需要通过“ident”对它们求和。我如何按他们的身份对 1Category 和 3Category 求和？

```
DECLARE @xml XML  
SET @xml = 
'<cat:catalog xmlns:cat="http://datypic.com/cat" xmlns:prod="http://datypic.com/prod">
  <cat:number ident="1Category">10</cat:number>
  <cat:number ident="2Category">20</cat:number>
  <cat:number ident="3Category">30</cat:number>
</cat:catalog>'; 

WITH XMLNAMESPACES (
'http://datypic.com/cat' AS cat
)
SELECT 
    c.c.value('(cat:number/text())[1]', 'INT') '1Category',
    c.c.value('(cat:number/text())[3]', 'INT') '3Category'
FROM @xml.nodes('cat:catalog') c(c) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:30:52.637

```
WITH XMLNAMESPACES ( 
'http://datypic.com/cat' AS cat 
) 
SELECT  
    c.c.value('(cat:number[@ident="1Category"])[1]', 'INT') +
    c.c.value('(cat:number[@ident="3Category"])[1]', 'INT') 
FROM @xml.nodes('cat:catalog') c(c) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:39:31.783

```
WITH XMLNAMESPACES ( 
'http://datypic.com/cat' AS cat 
) 
SELECT @xml.value('sum(/cat:catalog/cat:number[@ident=("1Category", "3Category")]/text())', 'INT') 
```

# java - Java 库的标准配置文件位置？

> ID：12562172
> 
> 赞同：1
> 
> 时间：2012-09-24T09:24:41.200
> 
> 标签：java, configuration, resourcebundle, properties-file

对于我当前的项目（[Better Checks - 一个小参数验证库](http://better-checks.trick17.ch/)），我试图找出使用该库的应用程序应该放置配置文件的位置（在类路径中）。它是一个具有自定义错误消息格式的 .properties 文件。

库配置文件是否有标准或事实上的标准位置？

我目前的看法是`/better-checks.properties`。我有点担心这不是一个好主意，因为它直接位于类路径的根目录中，*理论上*可能与其他文件发生冲突。

另一种方法是将其放入库的根包中，`/ch/trick17/betterchecks/config.properties`这样可以防止名称冲突，但看起来有点奇怪。

**编辑：**考虑到如果我想通过使用资源包来支持国际化，应用程序最终可能会`better-checks_*.properties`在类路径根目录中有很多。这不是很好，是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:27:02.050

你担心一个不太可能出现的问题。我同意——这很奇怪。只要它在 CLASSPATH 中，你就不会有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:38:48.887

大多数应用程序选择将配置文件放在类路径中，就像您所做的那样。

一些框架将它们的一些配置文件放在 META-INF 目录中。例如，EJB3 持久性配置文件默认为 META-INF/persistence.xml

然而，这是否是一个好的做法值得商榷。请参阅[此处](https://stackoverflow.com/questions/70216/whats-the-purpose-of-meta-inf)进行良好的讨论并自行决定。

# php - 当我单击提交时，它应该更改文本并更新行，那里有问题

> ID：12562177
> 
> 赞同：0
> 
> 时间：2012-09-24T09:25:03.867
> 
> 标签：php, forms, mysqli

程序员们早上好，我有一个包含新闻控制面板的小代码，我在那里创建了一个提交按钮来激活或不激活新闻行，所以如果我点击这个按钮，它应该会改变，如果它是活动的，它将是非活动的，它工作但有当我单击第一个项目时出现问题，它会更新桌子上的最后一个而不是应该做的第一个。这是我使用的代码

```
<?php
$getNewsData="select * from news";
    $QgetNewsData=$db->query($getNewsData)or die($db->error);
    $count=mysqli_num_rows($QgetNewsData);
while($newsRow = mysqli_fetch_array($QgetNewsData)) {
$getActivityStatus=$newsRow['news_activity']; 
    switch($getActivityStatus){
    case 1: echo"<input style='color:red; font-weight:bold; background:none; border:0;' name='inactive' type='submit' value='تعطيل' /><input name='inActive' type='hidden' value='".$newsRow['news_id']."'/>"; 
    break; 
    case 0: echo"<input style='color:green; font-weight:bold; background:none; border:0;' name='active' type='submit' value='تفعيل' /><input name='Active' type='hidden' value='".$newsRow['news_id']."'/>"; break;}
    }
if(isset($_POST['inactive'])){
            $inActive=$_POST['inActive'];
            echo $inActive;
        $updateStatus="UPDATE news SET news_activity=0 WHERE news_id='".$inActive."' ";
        $QupdateStatus=$db->query($updateStatus)or die($db->error);
        if($QupdateStatus){ 
            }
        }

        if(isset($_POST['active'])){
            $Active=$_POST['Active'];
            echo $Active;
        $updateStatus="UPDATE news SET news_activity=1 WHERE news_id='".$Active."' ";
        $QupdateStatus=$db->query($updateStatus)or die($db->error);
        if($QupdateStatus){
        header("Location:CpanelHome.php?id=7"); 
            }
        }
    ?> 
```

请任何想法来解决这个问题。感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:36:30.493

您创建了很多`<input name='inActive'`和`<input name='Active'`字段。请注意，当单击**任何**提交按钮时，它们**都会被提交。**我能想到的最简单的解决方案是将每对提交按钮和隐藏输入放在单独的 .**`<form>`**

 ****笔记**

你的代码很糟糕，你应该考虑做一些改进。对于初学者：

*   请正确格式化您的代码或找到可以为您执行此操作的编辑器。
*   请在查询中使用 POST 数据之前对其进行验证。
*   请不要从字符串中粘贴查询，而是使用[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)**

# user-interface - Powershell GUI 应用程序，richtextbox 不应该更新内容

> ID：12562182
> 
> 赞同：0
> 
> 时间：2012-09-24T09:25:20.990
> 
> 标签：user-interface, powershell, richtextbox

我创建了一个打包为 .exe 的 powershell gui 应用程序。该脚本调用其他脚本，并在调用的脚本启动和完成时通过只读富文本框通知用户。

问题是它只会显示指示第一个脚本开始的消息，然后它不会显示任何内容，直到所有脚本完成执行。

这是我的代码：

```
foreach ($item in $checkedlistbox1.CheckedItems) {
        $richtextbox1.AppendText("Installing " + [IO.Path]::GetFileNameWithoutExtension($item) + "...")
        $richtextbox1.Update()
        $path = $scriptdir+ "\" + $item + ".exe"
        [System.Diagnostics.Process]::Start($path)
        $Process = (Get-Process | `
                        Where-Object { $_.ProcessName -ieq [IO.Path]::GetFileNameWithoutExtension($item) })
        $Process.WaitForExit() 
        $richtextbox1.AppendText("Done."+[char]13+[char]10)
        $richtextbox1.Update()
    } 
```

我想知道这里可能出了什么问题:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:08:16.133

找到了一个肮脏的方法来解决这个问题：

```
[System.Windows.Forms.Application]::DoEvents() 
```

就在附加富文本框之后。

# c# - c#：如何创建可序列化的 c# 类以反映具有动态子元素的 XML 文件？

> ID：12562185
> 
> 赞同：0
> 
> 时间：2012-09-24T09:25:27.143
> 
> 标签：c#, xml-serialization

谁能建议如何创建 ac# 类来反映以下 XML 结构示例？*基本上，元素Value*中的子元素可以包含*Integer*或*String*元素。

```
<Preferences>
   <Preference>
      <Tag>CY3A</Tag>
      <Precedence>XML</Precedence>
      <Value>
         <Length>4</Length>
         <Integer>0</Integer>
      </Value>
   </Preference>    
   <Preference>
      <Tag>CYRV</Tag>
      <Precedence>XML</Precedence>
      <Value>
         <Length>16</Length>
         <String>0000 00 @00000</String>
      </Value>
   </Preference>
</Preferences> 
```

我试图将类定义如下，但它并没有导致我正在寻找什么。它会生成不需要的*d*元素。

```
public class ProgrammingConfiguration
{
   public int Version { get; set; }
   public preferences Preferences { get; set; }
}

public class preferences
{
   public preference Preference { get; set; }
}

public class preference
{
   public string Tag { get; set; }
   public string Precedence { get; set; }                                     
   public value Value { get; set; }
}

public class value
{
   [XmlElement]
   public int Length;

   [XmlElement(Type = typeof(Integer)),
    XmlElement(Type = typeof(HexBinary))]
   public object datafield;
}

public class Integer
{          
   public string d;            
}  

public class String
{            
   public string d;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:27:18.247

我通常创建一个 xsd，然后使用 xsd.exe 工具从 xsd 创建一个 .cs 类文件。

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.269
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Xml.Serialization;

// 
// This source code was auto-generated by xsd, Version=4.0.30319.1.
// 

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class Preferences {

    private PreferencesPreference[] itemsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Preference", Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PreferencesPreference[] Items {
        get {
            return this.itemsField;
        }
        set {
            this.itemsField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
public partial class PreferencesPreference {

    private string tagField;

    private string precedenceField;

    private PreferencesPreferenceValue[] valueField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string Tag {
        get {
            return this.tagField;
        }
        set {
            this.tagField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string Precedence {
        get {
            return this.precedenceField;
        }
        set {
            this.precedenceField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Value", Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public PreferencesPreferenceValue[] Value {
        get {
            return this.valueField;
        }
        set {
            this.valueField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
public partial class PreferencesPreferenceValue {

    private string lengthField;

    private string stringField;

    private string integerField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string Length {
        get {
            return this.lengthField;
        }
        set {
            this.lengthField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string String {
        get {
            return this.stringField;
        }
        set {
            this.stringField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string Integer {
        get {
            return this.integerField;
        }
        set {
            this.integerField = value;
        }
    }
} 
```

[xsd.exe](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.100%29.aspx)是 Visual Studio 附带的实用程序......

看看[http://quickstart.developerfusion.co.uk/quickstart/howto/doc/xmlserialization/XSDFromCls.aspx](http://quickstart.developerfusion.co.uk/quickstart/howto/doc/xmlserialization/XSDFromCls.aspx)

但是你也可以从 XML 中做到这一点

```
c:\temp>xsd test.xml
Microsoft (R) Xml Schemas/DataTypes support utility
[Microsoft (R) .NET Framework, Version 4.0.30319.1]
Copyright (C) Microsoft Corporation. All rights reserved.
Writing file 'c:\temp\test.xsd'.

c:\temp>xsd test.xsd /classes
Microsoft (R) Xml Schemas/DataTypes support utility
[Microsoft (R) .NET Framework, Version 4.0.30319.1]
Copyright (C) Microsoft Corporation. All rights reserved.
Writing file 'c:\temp\test.cs'. 
```

要解决字符串与整数的问题，您可以在 xsd 中添加一个 xs:choice 字段，这将生成一个“项目”，然后您可以根据需要将其转换为 Int 或 String。看看[http://msdn.microsoft.com/en-us/library/exchange/bb426064(v=exchg.140).aspx](http://msdn.microsoft.com/en-us/library/exchange/bb426064(v=exchg.140).aspx)

```
<xs:complexType name="FindItemParentType">
  <xs:choice>
    <xs:element name="Items" type="t:ArrayOfRealItemsType"/>
    <xs:element name="Groups" type="t:ArrayOfGroupedIetmsType"/>
  </xs:choice>
  <xs:attributeGroup ref="t:FindResponsePagingAttributes"/>
</xs:complexType>

FindItemParentType fipt = new FindItemParentType();
object obj = fipt.Item;
if (obj is ArrayOfGroupedItemsType)
{
    ArrayOfGroupedItemsType groupedItems = (obj as ArrayOfGroupedItemsType);
    //TODO: Write code to handle grouped items.
}
else if (obj is ArrayOfRealItemsType)
{
    ArrayOfRealItemsType items = (obj as ArrayOfRealItemsType);
    //TODO: Write code to handle items.
} 
```

# php - 使用 php 文件中的两个按钮制作一个表单以选择一个操作

> ID：12562192
> 
> 赞同：1
> 
> 时间：2012-09-24T09:25:40.350
> 
> 标签：php, javascript, ajax, mysqli

我有以下html：

```
<body onload="showcontent()"> <!-- onload optional -->
        <div id="content"><img src="loading.gif"></div> <!-- leave img out if not onload -->
    </body> 
```

我也有以下脚本：

功能显示内容（）{

```
 if(window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();
  } else {
    xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
  }

  xmlhttp.onreadystatechange = function() {
    if(xmlhttp.readyState == 1) {
        document.getElementById('content').innerHTML = "<img src='loading.gif' />";
    }
    if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
      document.getElementById('content').innerHTML = xmlhttp.responseText;
    } 
  }

  xmlhttp.open('GET', 'elsevier.php', true);
  xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');
  xmlhttp.send(null);

} 
```

在 elsevier.php 中，我希望当表格的行数超过 500 时显示两个按钮，告诉我是继续还是取消。如果我将此代码放在 .php 文件中，则不会发生任何事情.....（除了出现两个按钮）。

```
if(mysqli_errno($con)==1062){
                    @$q55="SELECT COUNT(*) FROM testarticles";
                    $result55 = mysqli_query($con, $q55);
                    $row = $result55->fetch_row();
                    echo '#: ', $row[0].'<br>';

                    if($row[0]>=500&&$answer==false){
                        echo '<form action="" method="GET">';
                        echo "<label>Do you want to continue or cancel?</label>";
                        echo '<input type="button" id="but1" name="but1" value="Continue">';
                        echo '<input type="button" id="but2" name="but2" value="Cancel">';
                        echo '</form>';

                        //sleep(2);

                        if(isset($_GET["but1"])){
                           $answer=true;
                           break;
                         }
                         elseif(isset($_GET["but2"])){
                           @$q56="DELETE * FROM journal, volume, issue, articles, testarticles WHERE import_time=$unixtimestamp";
                           $result56 = mysqli_query($con, $q56);
                           exit;
                         }
                    } 
```

我希望在这一步中停止执行 php 脚本并向我显示两个可供选择的按钮。如果我按继续，我希望脚本从它停止的地方执行。

有人知道吗？？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:45:38.087

```
session_start();

if(mysqli_errno($con)==1062){ 

                $where = isset($_SESSION['last_id']) ? " WHERE id > '" . $_SESSION['last_id'] . "'" : "";
                if(isset($_SESSION['last_id']))
                    unset($_SESSION['last_id']);

                @$q55="SELECT COUNT(*) FROM testarticles$where ORDER BY id"; 
                $result55 = mysqli_query($con, $q55); 
                $row = $result55->fetch_row(); 
                echo '#: ', $row[0].'<br>'; 

                if($row[0] >= 500 && $answer == false){

                    $_SESSION['last_id'] = $row['id'];

                    echo "<label>Do you want to continue or cancel?</label>"; 
                    echo '<input type="button" id="but1" name="but1" value="Continue" onclick="showcontent(true)" />'; 
                    echo '<input type="button" id="but2" name="but2" value="Cancel">'; 

                    //sleep(2); 

                    if(isset($_GET["but1"])){ 
                       $answer=true; 
                       break; 
                     } 
                     elseif(isset($_GET["but2"])){ 
                       @$q56="DELETE * FROM journal, volume, issue, articles, testarticles WHERE import_time=$unixtimestamp"; 
                       $result56 = mysqli_query($con, $q56); 
                       exit; 
                     } 
                } 
```

您还必须修改 showcontent 功能，因为当您按下继续按钮时，检索到的内容应该被附加而不是替换

```
function showcontent(){
  if(window.XMLHttpRequest) {           
    xmlhttp = new XMLHttpRequest();           
  } else {           
    xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');           
  }           

  xmlhttp.onreadystatechange = function() {           
    if(xmlhttp.readyState == 1 && !update) {           
        document.getElementById('content').innerHTML = "<img src='loading.gif' />";           
    }           
    if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
      if(update)
        alert("this is an update and I should append data, not to replace the div content");
      else {       
        document.getElementById('content').innerHTML = xmlhttp.responseText;           
        //this is the first call of the function so the content of the div will be replaced
      }
    }            
  }           

  xmlhttp.open('GET', 'elsevier.php', true);           
  xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');           
  xmlhttp.send(null);           

} 
```

HTML 代码：

```
<body onload="showcontent(false)"> <!-- onload optional -->              
   <div id="content"><img src="loading.gif"></div> <!-- leave img out if not onload -->              
</body> 
```

请注意，这不是经过验证的代码，因此您应该对其进行修改

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-12T23:31:59.447

使用 ' **`echo`**' 后跟 < *html code* > 来创建按钮。你会完成的。

# ios - iOS：如何在 UITableView 中添加/插入带有标识符的特定单元格？

> ID：12562197
> 
> 赞同：0
> 
> 时间：2012-09-24T09:25:57.097
> 
> 标签：ios, xcode, insert, tableview, cells

我在 UITableView 中对静态单元格进行了分组。现在我想添加或删除（什么更容易？）一个特定的单元格，我已经在我的故事板中创建了它。它取决于一个 NSString：如果我的字符串 == YES，则应显示单元格，否则不应显示。

已经尝试过`tableView:insertRowsAtIndexPaths:withRowAnimation:`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:59:01.847

你需要的是：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
```

此方法是 UITableViewDelegate 协议的一部分，当表格视图即将为特定行绘制单元格时将调用此方法。这提供了一个 UITableViewCell 供您使用。

要识别需要隐藏的单元格，可以在情节提要中的 UITableViewCell 中添加标签。这更容易，因为您正在添加静态单元格。

然后你可以这样做：

```
if ([cell tag] == someInteger) {
    cell.hidden = YES;
} 
```

您可以根据您提到的字符串的值将其包装在一个条件中。

[我在 Github 上添加了一些示例代码来说明这一点。](https://github.com/n9986/SelectiveTableViewCells)

# android - 从数据库错误中获取一个特定条目

> ID：12562200
> 
> 赞同：0
> 
> 时间：2012-09-24T09:26:06.283
> 
> 标签：android, database

我正在尝试使用以下代码从我的数据库中获取一个特定条目：

```
Object specificObject = myDbHelper.getObject(int id, int level);

// code in DataBaseHelper:

public Object getObject(int id, int level){

        c = myDataBase.rawQuery("SELECT * FROM QUESTIONS WHERE ID =" + id + " AND LEVEL = " + level, null);

        Object q = new Object();
        q.setQuestion(c.getString(1));
        q.setName(c.getString(2));
        q.setFile(c.getInt(3));
        q.setAnswer(c.getString(4));
        return q;

    } 
```

问题是这会导致以下错误：

09-24 11:12:52.299：E/AndroidRuntime(7388)：由：android.database.CursorIndexOutOfBoundsException：请求索引 -1，大小为 1

有任何想法吗？似乎它知道它的大小为一个（一个条目？），但我没有得到索引 -1 请求的问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:27:59.493

在从游标访问数据之前，您必须移动第一条记录。

```
c.moveToFirst() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:29:33.190

你应该这样做：

```
c = myDataBase.rawQuery("SELECT * FROM QUESTIONS WHERE ID =" + id + " AND LEVEL = " + level, null);

    if(c.moveToFirst()) {
      Object q = new Object();
      q.setQuestion(c.getString(1));
      q.setName(c.getString(2));
      q.setFile(c.getInt(3));
      q.setAnswer(c.getString(4));
      return q;
    }
return null; 
```

# php - fbml 应用程序错误

> ID：12562201
> 
> 赞同：-1
> 
> 时间：2012-09-24T09:26:10.117
> 
> 标签：php, facebook, facebook-graph-api, fbml

表单托管在我的网站上，当用户提交表单时，我想将数据传递给我的 facebook 应用程序。怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:07:39.380

尝试

```
if(!$user) {
       $login_url = $facebook->getLoginUrl(array('scope' => "publish_stream,user_photos,friends_photos"));

    die("<script> top.location.href='".$login_url."'</script>");

} 
```

# php - time() 函数给出的值小于第一次调用 time()

> ID：12562209
> 
> 赞同：1
> 
> 时间：2012-09-24T09:26:28.573
> 
> 标签：php, time

有这个代码：

```
$query = "INSERT INTO table1 SET posted='".mysql_real_escape_string(time())."'";
@mysql_query($query);
....
$q = "UPDATE table2 SET activated='".mysql_real_escape_string(time())."'";
@mysql_query($q); 
```

然后，当我查看数据库时，table2 中的发布值小于 table1 中的发布值。

这怎么可能，或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:29:40.900

这个查询是错误的

```
$query = "INSERT INTO table1 SET posted='".mysql_real_escape_string(time())."'";
@mysql_query($query); 
```

它应该是

```
$query = "update table1 SET posted='".mysql_real_escape_string(time())."'";
@mysql_query($query); 
```

并尝试将时间存储在变量中并在查询中使用它..

# jquery - jquery自动完成不会清除无序列表

> ID：12562211
> 
> 赞同：2
> 
> 时间：2012-09-24T09:26:38.280
> 
> 标签：jquery, autocomplete

我的代码是：

```
 $("#contactSearch").autocomplete({
            source: "bulk_GetContacts.php",
            minLength: 4,
            delay: 100
        })          
        .data( "autocomplete" )._renderItem = function( ul, item ) {
            console.log(ul);
            return $( "<li class=\"ui-state-highlight\"></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.label + "</a>" )
                .appendTo("#autocompleteResults");

        }; 
```

问题是当我输入 abcd 时，它正确地显示了我的 div 中的结果（“#autocompleteResults”）。但是当我添加“e”（abcde）时，它不会清除过去的结果并将新的结果添加到 div 的底部。如何清除过去的结果列表？

问候， 尼科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:35:22.793

我在创建自动完成时添加了以下行。因此，每次您在自动完成中添加内容时，列表都会被清除。

```
$("#contactSearch").autocomplete({
                source: "bulk_GetContacts.php",
                minLength: 4,
                delay: 100,
                **search: function(event, ui) {
                    $("#autocompleteResults").empty();
                }** 
```

# knockout.js - knockout.js 教程使用什么 UI 库？

> ID：12562212
> 
> 赞同：5
> 
> 时间：2012-09-24T09:26:38.313
> 
> 标签：knockout.js

在[http://learn.knockoutjs.com/](http://learn.knockoutjs.com/)有一个关于[单页应用程序](https://en.wikipedia.org/wiki/Single-page_application)的教程。在第二步附近，项目符号列表被转换为水平菜单。那是如何渲染的？

（即，它是一个纯粹的 CSS 解决方案，还是使用 jQuery UI 或什么？）

我查看了页面的源代码，看起来有很多自动化正在运行演示中的代码。我不清楚它是如何工作的，我真的很想知道，因为我正试图在我自己的测试应用程序中重现这种方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T10:07:15.803

它是纯 CSS。

**HTML**

```
<ul class="folders">
    <li>Inbox</li>
    <li>Archive</li>
    <li class="selected">Sent</li>
    <li>Spam</li>
</ul>​ 
```

**CSS**

```
.folders { background-color: #bbb; list-style-type: none; padding: 0; margin: 0; border-radius: 7px; 
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #d6d6d6), color-stop(0.4, #c0c0c0), color-stop(1,#a4a4a4)); 
    margin: 10px 0 16px 0;
    font-size: 0px;
}
.folders li:hover { background-color: #ddd; }    
.folders li:first-child { border-left: none; border-radius: 7px 0 0 7px; }
.folders li { font-size: 16px; font-weight: bold; display: inline-block; padding: 0.5em 1.5em; cursor: pointer; color: #444; text-shadow: #f7f7f7 0 1px 1px; border-left: 1px solid #ddd; border-right: 1px solid #888; }
.folders li { *display: inline !important; } /* IE7 only */
.folders .selected { background-color: #444 !important; color: white; text-shadow:none; border-right-color: #aaa; border-left: none; box-shadow:inset 1px 2px 6px #070707; }    ​ 
```

你可以在这个小提琴中看到这个工作：http: [//jsfiddle.net/jearles/UcwC7/](http://jsfiddle.net/jearles/UcwC7/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-10T17:28:15.883

Ryan Neimeyer 在[http://jsfiddle.net/rniemeyer/PKDdG/](http://jsfiddle.net/rniemeyer/PKDdG/)的示例包括对 webmail.css 的外部引用，它指向[http://learn.knockoutjs.com/Content/TutorialSpecific/webmail.css](http://learn.knockoutjs.com/Content/TutorialSpecific/webmail.css)。这就是我发现教程是如何工作的，因为当我尝试在教程页面上查看源代码时，我没有看到正在使用 webmail.css。

如果我包括

```
<link rel="stylesheet" href="http://learn.knockoutjs.com/Content/TutorialSpecific/webmail.css" /> 
```

在我的本地测试应用程序文件中的标记之间，我得到了与教程相同的更新 css 视图。您也可以打开 /Content/TutorialSpecific/webmail.css 来查看内容。

# sql-server - Zend Framework 2 Microsoft SQL Server 2008 数据库连接

> ID：12562213
> 
> 赞同：10
> 
> 时间：2012-09-24T09:26:39.810
> 
> 标签：sql-server, zend-framework2, connection

我试用了 Zend Framework 2 框架应用程序，它在 Zend Server 5.6（PHP 版本 5.4.0 apache 2.2.21 MYSQL 5.0.10）中运行良好。但我希望 Zend Framework 2 与 MS SQL 2008 连接。我尝试了以下操作，但它不起作用并抛出异常“一个无效的参数被传递给 sqlsrv_execute。”

```
'db' => array(
    'driver'    => 'sqlsrv',
    'hostname'  => 'testserver\test',
    'Database'  => 'payroll',
    'UID'       => 'sa',
    'PWD'       => '123456'
), 
```

上面的 db 数组有什么问题？请建议我使用正确的连接字符串

供参考 ：

我已经测试了 php 5.4 和 MS SQL 2008 连接，它工作正常，以下连接已成功建立。

```
/*
$serverName = "testserver\test"; //serverName\instanceName
$connectionInfo = array( "Database"=>"payroll", "UID"=>"sa", "PWD"=>"123456");
$conn = sqlsrv_connect( $serverName, $connectionInfo);
if( $conn ) {
    echo "---------- Connection established --------------------.<br />";     
    $sql = "select * from users";
    $stmt = sqlsrv_query($conn, $sql);
    while( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC) ) {
          echo $row['id'].", ".$row['username']."<br />";
    }    
} else{
     echo "Connection could not be established.<br />";
     die( print_r( sqlsrv_errors(), true));
}
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T02:22:02.547

由于您没有从技术上“回答”您自己的问题，我会为您解决。

试试这些连接参数，它们可能使用 PDO 工作：

```
'db' => array(
    'driver'    => 'pdo',
    'dsn'       => 'sqlsrv:database=payroll;Server=testserver\test',
    'username'  => 'sa',
    'password'  => '123456'
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T11:35:27.050

在您的 global.php 文件中添加以下连接详细信息：

```
'db' => array(
        'driver' => 'Sqlsrv',
        'hostname' => 'SERVERNAME',
        'Database' => 'DBNAME',
        'uid' => 'username',
        'pwd' => 'password',
) 
```

要添加 sqlsrv 驱动程序，请从以下网址下载：http: [//www.microsoft.com/en-us/download/details.aspx?id= 20098](http://www.microsoft.com/en-us/download/details.aspx?id=20098)

像这样在您的 php ini 文件中添加扩展名，然后重新启动 apache 服务器：

> 扩展=php_sqlsrv_53_ts.dll

# range - 年龄范围的 MDX

> ID：12562214
> 
> 赞同：2
> 
> 时间：2012-09-24T09:26:40.387
> 
> 标签：range, mdx

我有以下 MDX 查询：

```
SELECT {[Measures].[PARTICIPANT ID]} ON columns,
{[GENDER].[Female Gender]} ON rows
FROM [Dystonia DS] 
```

我有一个名为的维度`AGE IN YEARS`，我想`PARTICIPANT ID`使用年龄范围进行过滤，即`PARTICIPANT ID`AGE 20 到 54 之间等。

我在这个论坛上得到了日期范围的解决方案，但无法通过引用日期范围 MDX 来解决年龄范围。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:40:24.817

如果真的是另外一个维度，又不想显示，就不能直接加到WHERE子句中吗？

```
SELECT {[Measures].[PARTICIPANT ID]} ON columns,
{[GENDER].[Female Gender]} ON rows
FROM [Dystonia DS]
WHERE {[Age Range].&[20]:[Age Range].&[54]} 
```

如果您需要查看它，请将其添加到 ROWS 维度中的元组中。

```
SELECT {[Measures].[PARTICIPANT ID]} ON columns,
([GENDER].[Female Gender],
{[Age Range].&[20]:[Age Range].&[54]}) ON rows
FROM [Dystonia DS] 
```

# java - Jira 中的计算字段

> ID：12562218
> 
> 赞同：3
> 
> 时间：2012-09-24T09:27:03.247
> 
> 标签：java, jira

我正在为 Jira 编写一个插件，我需要添加自定义计算列来发布导航器。该栏应显示最后发表的评论。但在此列中的问题导航器值类似于“ClassName@123456”，而不是评论的正文。我应该怎么做才能将评论的正文返回到此列？

到目前为止的代码：

```
public class LastCommentField extends CalculatedCFType {
    private CommentManager commentManager = null;

    public LastCommentField(CommentManager commentManager) {
        this.commentManager=commentManager;
    }

    public Object getValueFromIssue(CustomField field, Issue issue) {
        Comment lastComment=null;
        List<Comment> comments = commentManager.getComments(issue);
        if(comments != null && !comments.isEmpty()) {
            lastComment = (Comment)comments.get(comments.size() - 1);
        }   
        return lastComment;
    }

    public String getStringFromSingularObject (Object object) {
        return object.toString();
    }

    public Object getSingularObjectFromString(String value) {
        return value;       
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:27:19.853

此功能至少存在于两个插件中，例如[https://marketplace.atlassian.com/plugins/net.customware.jira.utils.customware-jira-utilities](https://marketplace.atlassian.com/plugins/net.customware.jira.utils.customware-jira-utilities)

但在上面的代码中，所使用的单数对象是一个 Comment 对象，如[http://docs.atlassian.com/jira/4.4/com/atlassian/jira/issue/comments/Comment.html](http://docs.atlassian.com/jira/4.4/com/atlassian/jira/issue/comments/Comment.html)中所述 ，但您可能只是想要一个字符串，所以试试

返回 lastComment.getBody();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:25:57.773

不幸的是，我从事物的编码方面不了解 JIRA，但从 Java 方面来说，这听起来很像列后面的对象没有被`ToString()`覆盖。您看到的是类的名称，后跟内存中的地址。

如果您可以向我们展示该专栏背后的代码，我可能会更了解它。

# ios - iOS6下NSUserDefaults导致异常

> ID：12562223
> 
> 赞同：1
> 
> 时间：2012-09-24T09:27:22.647
> 
> 标签：ios, nsuserdefaults, ios6

iOS6 SDK下`NSUserDefaults`异常原因，异常如下：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: attempt to insert nil object from objects[0]'
*** First throw call stack:
(0x3527a2a3 0x32d7a97f 0x351cb55f 0x352020d3 0xe2f9d 0x351cb037 0x372a1d91 0x372aa13b 0xcd813 0x34e36f1f 0x34e379a9 0x36d5d35d 0x3524f173 0x3524f117 0x3524df99 0x351c0ebd 0x351c0d49 0x32e762eb 0x34c38301 0xcc20f 0xc5e40)
libc++abi.dylib: terminate called throwing an exception 
```

这是代码：

```
NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
NSString *shortVersionString = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleShortVersionString"];
// the shortVersionString is 2.0.1
[ud setBool:YES forKey:@"hasBeenLaunched"];
[ud setObject:shortVersionString forKey:@"CurrentVersion"]; 
```

如果我注释掉`[ud setBool:YES forKey:@"hasBeenLaunched"];`并且`[ud setObject:shortVersionString forKey:@"CurrentVersion"];`应用程序运行良好。

任何人都可以帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:40:08.487

如果添加日志消息，您会发现版本字符串为 nil。您不能将 nil 写入默认值，这是失败的原因：

```
NSString *shortVersionString = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleShortVersionString"];
NSLog(@"Bet this is nil: %@", shortVersionString);
NSLog(@"Get ready for crash");
[ud setObject:shortVersionString forKey:@"CurrentVersion"];
NSLog(@"Guess I was wrong - no crash :-("); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T02:15:42.800

我注册了一个`NSUserDefaultsDidChangeNotification`通知，如果更改 NSUserDefaults 设置，则调用通知方法。有些变量在第一次启动之前是 nil，我将这些变量保存到 NSUserDefaults，所以发生了崩溃。

# c# - aspx 到 jpeg 图像转换

> ID：12562229
> 
> 赞同：-1
> 
> 时间：2012-09-24T09:27:41.663
> 
> 标签：c#, asp.net

我正在尝试将 aspx 页面转换为图像，即将其保存为 png 文件。我为此使用了iecapt。我在 aspx 页面上有很多文本框。问题是文本框值未保存在图像文件中。我只是获取源文件图像。希望我能得到一些建议。谢谢你

受保护的无效btnsend_Click（对象发送者，EventArgs e）{

```
 string url = "http://localhost:4101/WebForm3.aspx"; 

        if(Request.Params["weburl"] != null)
        {     
            url = Request.Params["weburl"];      
        }               
        string savepath = String.Format("C:\\IECapt\\{0}.png" , System.Guid.NewGuid());    
        System.Diagnostics.Process process = new System.Diagnostics.Process();   
        process.StartInfo.FileName  = "C:\\IECapt\\IECapt.exe";
        process.StartInfo.Arguments = String.Format("\"{0}\" \"{1}\"",url,savepath);
        process.StartInfo.UseShellExecute = false;  
        process.Start();    
        process.WaitForExit();  
        process.Dispose();  
        Response.Clear();
        Response.ContentType = "image/png";
        Response.WriteFile(savepath);
        Response.End(); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:32:54.487

```
The problem is the textbox values are not saved in the image file. 
```

当然不是，如果他们这样做了，那么每个人都可以读出输入的数据——但情况并非如此，**你加载的页面不包含任何输入的数据——是一种隔离加载**。

当您这样做时，您会加载用户看到的内容，但实际上没有，您看不到用户看到的内容，您只需再加载一次页面。

**您必须区分在服务器上运行的代码和在客户端浏览器上运行的代码。**

你也在问同样的问题：[asp.net c#中的网页截图](https://stackoverflow.com/questions/12541780/screenshot-of-webpage-in-asp-net-c-sharp)

# android - android EditText中的虚线

> ID：12562230
> 
> 赞同：1
> 
> 时间：2012-09-24T09:27:45.927
> 
> 标签：android, android-edittext, dotted-line

我需要在我的编辑文本字段中有虚线。这是我到目前为止所尝试的。但是没有达到我的目的。它什么也不显示。为什么虚线不见了？我哪里错了？

在 main.xml 中归档的 EditText

```
 <view
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/editText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        class="com.xxx.yyy.MainActivity$LinedEditText"
        android:background="@android:color/transparent"
        android:inputType="textEmailAddress"
        android:maxHeight="30dp"
        android:singleLine="true"
        android:minHeight="30dp"
        android:textSize="13dp" /> 
```

在 MainActivity..

```
public static class LinedEditText extends EditText {
    private Rect mRect;
    private Paint mPaint;

    // we need this constructor for LayoutInflater
    public LinedEditText(Context context, AttributeSet attrs) {
        super(context, attrs);

        mRect = new Rect();
        mPaint = new Paint();

        mPaint.setARGB(255, 0, 0,0);
        mPaint.setStyle(Style.STROKE);
        mPaint.setPathEffect(new DashPathEffect(new float[] {1,2}, 0));
        mPaint.setColor(Color.RED);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        int count = getLineCount();

        for (int i = 0; i < count; i++) {
            int baseline = getLineBounds(i, mRect);
            canvas.drawLine(mRect.left, baseline + 1, mRect.right, baseline + 1, mPaint);
        }

        super.onDraw(canvas);
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-24T09:32:51.310

将此添加到您的视图 xml

```
android:ellipsize="end"; 
```

希望能帮助到你...

# url-rewriting - nginx 重写重定向规则无法正常工作

> ID：12562238
> 
> 赞同：0
> 
> 时间：2012-09-24T09:28:21.657
> 
> 标签：url-rewriting, nginx

我想将网址重定向`http://mysite.com/?action=add&goback=1`到`http://myiste.com/add/?goback=1`.

我来到：

```
location / {
    if ($request_uri ~* /\?action.*) {
        add_header Cache-Control private;
        rewrite ^/\?action=([^&]*)&?(.*)$ /$1/?$2 permanent;
    }
} 
```

但它不起作用，我不明白为什么。

PS我`add_header`只需要表明`if ($request_uri ~* /\?action.*) {`发生了。我尝试了其他几种解决方案，例如

```
rewrite ^/\?action=(\w+).*$ /$1/?$query_string permanent; 
```

没有成功。

**更新**：

实际目标是：

如果 URL 看起来像这样

```
http://mysite.com/add/?param1=param1&... 
```

/(add)/ 应该成为一个动作参数：

```
location  ~ /[\-\w]+/ {
    rewrite ^/([^/]*).*$ /?action=$1 last;
    ...
} 
```

这似乎工作正常，我想我不需要额外的帮助

如果 URL 看起来像这样：

```
http://mysite.com/?action=add&param1=param1&... 
```

nginx 应该重定向到：

```
http://mysite.com/add/?param1=param1&... 
```

当我尝试做这部分时，我得到了我不需要的结果 - 无限重定向循环、URL 等`http://mysite.com/add/?action=add&param1=param1&...`。

有解决我的目标的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:50:56.253

这是因为`rewrite`只匹配 URI 路径，没有查询字符串 aka 参数，很像`location`. 尝试这样的事情：

```
location = / {
    if ($arg_action) {
        rewrite ^ /$arg_action/ permanent;
    }
} 
```

检查将`location = /`确保规则仅适用于对 的请求`/`，`if ($arg_action)`检查是否有`action=...`参数，并且`rewrite ^ /$arg_action/ permanent;`实际上会重定向到重写的 URI。查询字符串将从原始请求中保留（默认情况下）。

有关文档，请参阅[http://nginx.org/r/rewrite](http://nginx.org/r/rewrite)。

# wpf - 将控件添加到 caliburn micro 中的另一个控件

> ID：12562245
> 
> 赞同：0
> 
> 时间：2012-09-24T09:28:48.377
> 
> 标签：wpf, caliburn.micro

我正在学习 Caliburn Micro，并创建了一个类似于本教程的项目：

[http://caliburnmicro.codeplex.com/wikipage?title=Basic%20Configuration%2c%20Actions%20and%20Conventions&referringTitle=Documentation](http://caliburnmicro.codeplex.com/wikipage?title=Basic%20Configuration%2c%20Actions%20and%20Conventions&referringTitle=Documentation)

现在我想创建另一个用户控件并将其添加到上述模型中。所以我创建了一个简单的用户控件，它与教程中的 shellViewModel 基本相同。视图和视图模型与 shellViewModel 和 ShellView 相同，但名称不同。

当我运行应用程序时，我可以看到该视图显示在屏幕上，但它没有绑定到 ViewModel。我应该对引导程序进行任何更改以使其有效吗？

更多信息：我创建了一个类似于上述教程的 wpf 项目。它运作良好。

我在项目中添加了一个新的用户控件并将其命名为 NewUCView。所以我的项目中有以下文件：

新UCView.xaml

```
<UserControl x:Class="CaliburnMicroTest.NewUCView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
  <StackPanel>
    <TextBox x:Name="Name" />
    <Button x:Name="SayHello"
            Content="Click Me" />
  </StackPanel>
</UserControl> 
```

新UCView.xaml.cs

```
namespace CaliburnMicroTest
    {
    /// <summary>
    /// Interaction logic for NewUC.xaml
    /// </summary>
    public partial class NewUCView : UserControl
    {
         public NewUCView()
        {
            InitializeComponent();
        }
    }
} 
```

新UCViewModel.cs

```
namespace CaliburnMicroTest
{
   using System;
   using System.Collections.Generic;
   using System.Linq;
   using System.Text;
   using System.Windows;

   using global::Caliburn.Micro;

   /// <summary>
   /// TODO: Update summary.
   /// </summary>
   public class NewUCViewModel : PropertyChangedBase
   {
       string name;

       public string Name
       {
           get { return name; }
           set
           {
               name = value;
               NotifyOfPropertyChange(() => Name);
               NotifyOfPropertyChange(() => CanSayHello);
            }
       }

       public bool CanSayHello
       {
           get { return !string.IsNullOrWhiteSpace(Name); }
       }

        public void SayHello()
       {
            MessageBox.Show(string.Format("Hello {0}!", Name)); //Don't do this in real life :)
        }
   }
} 
```

我将 ShellView 更改如下，并在其中添加了对 NewUCView 的引用。

```
 <StackPanel>
    <my:NewUCView x:Name="newUC" />
    <TextBox x:Name="Name" />
    <Button x:Name="SayHello"
            Content="Click Me" />

</StackPanel> 
```

还将 ShellViewModel 更改为具有一个名为 newUC 的属性，它是一个 NewUCViewModel，如下所示：

```
 private NewUCViewModel newUC=new NewUCViewModel();
    public  NewUCViewModel NewUC
    {
        get
        {
            return newUC;
        }

    } 
```

但是当我运行这个应用程序并按第一次单击我（在用户控件上）时，它不起作用。另一个按钮（在 ShellView 上）有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:11:17.640

您不应该将用户控件直接添加到视图中，而让 caliburn 框架为您执行此操作。您需要在主视图中添加一个占位符并将其绑定到代表您的 ViewModel 的属性：

```
<ContentControl x:Name="NewUC"/> 
```

由于 caliburn 可以通过查看控件的名称来解析数据绑定，因此在我的代码中，框架会将 NewUCView 与在您的示例中名为 NewUC 的 NewUCViewModel 绑定，并在 ContentControl 占位符内显示 NewUCView 的实例。

# facebook - 通过 Facebook API 将照片上传到相册的问题 - PHP

> ID：12562247
> 
> 赞同：2
> 
> 时间：2012-09-24T09:28:55.993
> 
> 标签：facebook, api, facebook-graph-api, facebook-opengraph

我在将照片上传到相册时遇到问题`facebook API`。这是我的代码。

```
$facebook->setFileUploadSupport(true);

    //Create an album
    $album_details = array(
            'message'=> 'Message',
            'name'=> 'Album Name'
    );
    $create_album = $facebook->api('/me/albums?access_token='.$access_token, 'post', $album_details);

    //Get album ID of the album you've just created
    $album_id = $create_album['id'];

    echo $album_id." - ";

    //Upload a photo to album of ID...
    $photo_details = array();

    $img = "app.jpg";

    $photo_details['source'] = '@' . $img;
    $photo_details['message'] = 'Wow.. cool image!';

    $upload_photo = $facebook->api('/'.$album_id.'/photos?access_token='.$access_token, 'post', $photo_details); 
```

当我用表格上传图像时，它可以工作！但是此代码不会将图像上传到相册中。我也试过了，`CURL`但什么都没有……我不知道问题出在哪里……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T00:35:27.593

在 Graph API Explorer 上测试了一些东西之后，这是一个有效的 PHP 版本：

```
<?php
# Path to facebook's PHP SDK.
require_once("facebook.php");

# Facebook application config.
$config = array(
    'appId'      => 'YOUR_APP_ID',
    'secret'     => 'YOUR_APP_SECRET',
    'fileUpload' => true # Optional and can be set later as well (Using setFileUploadSupport() method).
);

# Create a new facebook object.
$facebook = new Facebook($config);

# Current user ID.
$user_id = $facebook->getUser();

# Check to see if we have user ID.
if($user_id) {

  # If we have a user ID, it probably means we have a logged in user.
  # If not, we'll get an exception, which we handle below.
  try {

    # Get the current user access token:
    $access_token = $facebook->getAccessToken();

    # Create an album:
    $album_details = array(
            'access_token' => $access_token,
            'name'         => 'Album Name',
            'message'      => 'Your album message goes here',
    );

    $create_album = $facebook->api('/me/albums', 'POST', $album_details);

    # Get album ID of the album you've just created:
    $album_id = $create_album['id'];

    # Output album ID:
    echo 'Album ID: ' . $album_id;

    # Upload photo to the album we've created above:
    $image_absolute_url = 'http://domain.com/image.jpg';

    $photo_details = array();
    $photo_details['access_token']  = $access_token;
    $photo_details['url']           = $image_absolute_url;                        # Use this to upload image using an Absolute URL.
    $photo_details['message']       = 'Your picture message/caption goes here';

    //$image_relative_url             = 'my_image.jpg';
    //$photo_details['source']        = '@' . realpath($image_relative_url);      # Use this to upload image from using a Relative URL. (Currently commented out).

    $upload_photo = $facebook->api('/' . $album_id . '/photos', 'POST', $photo_details);

    # Output photo ID:
    echo '<br>Photo ID: ' . $upload_photo['id'];

  } catch(FacebookApiException $e) {
    // If the user is logged out, you can have a 
    // user ID even though the access token is invalid.
    // In this case, we'll get an exception, so we'll
    // just ask the user to login again here.
    $login_url = $facebook->getLoginUrl( array('scope' => 'publish_stream, user_photos')); 
    echo 'Please <a href="' . $login_url . '">login.</a>';
    error_log($e->getType());
    error_log($e->getMessage());
  }   
} else {

  # No user, print a link for the user to login and give the required permissions to perform tasks.
  $params = array(
      'scope' => 'publish_stream, user_photos', # These permissions are required in order to upload image to user's profile.
  );

  $login_url = $facebook->getLoginUrl($params);
  echo 'Please <a href="' . $login_url . '">login.</a>';

    }
?> 
```

我添加了注释，因此您可以通过阅读代码来了解它的作用。

这适用于绝对 url 和相对 url，我已经注释掉了使用相对 url 上传图像的代码，正如您在评论中提到的那样，您无法读取图像的真实路径。

**编辑：**注意：用户必须向您的 facebook 应用程序授予扩展权限才能将图像上传到他们的个人资料，这些权限是`publish_stream`和`user_photos`。

让我知道这是否对您有帮助以及是否有效:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T09:43:44.933

```
 $user = $this->facebook->getUser();
        $this->facebook->setFileUploadSupport(true);
        $user_profile = $this->facebook->api('/me');
        $album_details = array(
            'message' => 'Hello everybody this is me ' . $user_profile['name'],
            'name' => 'I am so slim because I dont have money to eat....:('
        );
        $create_album = $this->facebook->api('/me/albums', 'post', $album_details);

// Upload a picture
        $photo_details = array(
            'message' => 'I am so slim because I dont have money to eat....:('
        );
        $photo_details['image'] = '@' . realpath('./a.jpg');
        $upload_photo = $this->facebook->api('/' . $create_album['id'] . '/photos', 'post', $photo_details); 
```

请在 $this->facebook 上使用 $facebook

# java - Android Socket Client Runnable 没有停止

> ID：12562251
> 
> 赞同：0
> 
> 时间：2012-09-24T09:29:12.383
> 
> 标签：java, android, android-intent, network-programming

我正在使用以下代码将我的客户端连接到服务器。问题是这不会终止，我无法在此之后开始新的活动。

我认为问题是我没有关闭套接字或线程没有终止。

我开始线程`onCreate()`

```
cThread = new Thread(new ClientThread());
cThread.start(); 
```

这是我的`Runnable`

```
public class ClientThread implements Runnable {
    public void run() {
        try {
            InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
            Log.d("ClientActivity", "C: Connecting...");
            socket = new Socket(serverAddr, 8080);
            connected = true;
            while (connected) {
                try {
                    Log.d("ClientActivity", "C: Sending command.");
                    PrintWriter out = new PrintWriter(new BufferedWriter(new
                      OutputStreamWriter(socket
                                .getOutputStream())), true);
                        // where you issue the commands

                        out.println(serverIpAddress);
                        Log.d("ClientActivity", "C: Sent.");

                } catch (Exception e) {
                    Log.e("ClientActivity", "S: Error while sending", e);
                }

                connected = false;
            }
            //socket.close();
            Log.d("ClientActivity", "C: Closed.");

        } catch (Exception e) {
            Log.e("ClientActivity", "C: Error while connecting", e);
            connected = false;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:47:37.253

你的程序很没用。假设套接字已建立，则`while`循环仅执行一次，因为在第一次迭代结束时，您设置`connected`为`false`，从而禁用任何进一步的循环。您不会刷新缓冲输出以确保已写入，**甚至不会从套接字读取**，所以我想知道您的自定义协议是什么样的......此时，您的程序所做的只是将字符串写入服务器，然后退出。我们甚至无法说出您为什么无法开始新活动，因为在提供的代码中没有任何东西可以阻止您这样做。

TCP协议基本上有两种

1.  基于请求-响应（如 HTTP，不适合聊天程序）。客户端建立连接、发出请求、读取响应、发出另一个请求、读取新响应等等，直到客户端完成其工作。图形客户端至少需要 2 个线程：一个用于 UI 更新，另一个用于网络通信。
2.  客户端和服务器都随机发送消息。这利用了套接字通信的全双工功能，但是在一个 GUI 程序中至少需要三个线程：一个用于 UI，一个在套接字的输入流上阻塞，一个用于写入。事情变得非常混乱，因为您可能会共享流并且必须手动同步。

如果这是另一个聊天程序，我建议不要设计自己的 TCP 协议，而从[WebSockets 之](https://www.rfc-editor.org/rfc/rfc6455)类的标准技术开始。有可用的[Java 客户端](https://github.com/koush/android-websockets)，您可以在浏览器中使用一些 Javascript 简单地测试您的服务器，并且在服务器端还有更多选择（[Socket.IO](http://socket.io) - 用于 JS 解决方案，[Jetty，Glassfish](http://java.dzone.com/articles/creating-websocket-chat)，...） .

在您获得一些经验并熟悉工作后，您可以尝试设计自己的自定义 TCP 协议。到那时，您将至少了解套接字、线程和 Android 编程的基础知识。

顺便说一句，您可能想查看不需要用户交互的后台任务的[`Service`API 。](http://developer.android.com/reference/android/app/Service.html)

# sql - Wikipedia Database 'pagelinks' “这里有什么链接” SQL 查询

> ID：12562254
> 
> 赞同：0
> 
> 时间：2012-09-24T09:29:29.560
> 
> 标签：sql, wikipedia

我正在尝试搜索所有文章，例如链接到特殊的维基百科文章。例如，有多少文章指向“汽车共享”。在“真正的”Wiki 页面上，我可以通过单击“工具箱”类别中的“这里的链接”来完成此操作。此请求所需的时间很短。

但是，当我尝试通过搜索“页面链接”表以编程方式在本地安装的 Wiki 数据库上执行此类查询时，例如这样做`SELECT * FROM `pagelinks` WHERE `pl_title` = 'Carsharing'`，它至少需要 1 分钟（在非常快的本地系统上）。

有什么方法可以像在“真实”Wiki 页面上一样快速获得结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:33:02.167

在 pl_title 列（如果不存在）上创建索引可以显着提高查询的性能，将 O(n) 查找更改为 O(log(n)) 查找。

# android - Android刷新IMediaPlaybackService当前歌曲内容

> ID：12562261
> 
> 赞同：0
> 
> 时间：2012-09-24T09:30:04.787
> 
> 标签：android, android-mediaplayer, android-music-player

我做一个简单的例子让你明白我需要做什么：

1）我打开一首未知歌曲（一首我删除了所有 ID3 标签的歌曲），所以 IMediaPlaybackService 没有用户友好的信息

2）我更新歌曲信息添加ID3文件

3）当前的IMediaPlaybackService服务没有关于当前歌曲的更新信息，并且总是显示旧数据，如果我转到下一首歌曲而不是上一首歌曲，它将有更新的信息。

但是，有没有办法不使用该解决方法并告诉 IMediaPlaybackService 刷新当前歌曲信息？

# python - 使用 lxml 返回节点的 XML 源

> ID：12562262
> 
> 赞同：0
> 
> 时间：2012-09-24T09:30:07.000
> 
> 标签：python, lxml

请想象变量中的 XML 节点`n`。

如果我通过 MSXML 访问这个节点，我可以通过`.xml`属性获取节点的 XML 源，即`n.xml`返回整个节点源。

我怎样才能对 lxml 做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:39:32.133

使用[`.tostring()`方法](http://lxml.de/api/lxml.etree-module.html#tostring)：

```
from lxml import etree

print etree.tostring(node) 
```

# widget - Google TV 小部件的尺寸应该是多少？

> ID：12562265
> 
> 赞同：0
> 
> 时间：2012-09-24T09:30:13.397
> 
> 标签：widget, google-tv

有谁知道谷歌电视应该是什么尺寸的小部件？

# xml - Windows 8 中的 XML 序列化

> ID：12562268
> 
> 赞同：2
> 
> 时间：2012-09-24T09:30:34.597
> 
> 标签：xml, object, xml-serialization, windows-8

如何将 Windows 8 Metro App Development 中的对象序列化为 xml 文件？我不知道如何创建流，当我创建 streamWriter 时，文件方向出现错误

> StreamWriter nsw = new StreamWriter(@"C:\sample.xml");

错误：最佳重载方法匹配 'system.io.streamwriter..streamwriter(system.io.stream) 有一些无效参数

这是主要代码：

> ```
>  StorageFolder storageFolder = KnownFolders.DocumentsLibrary;
>  StorageFile sampleFile = await storageFolder.CreateFileAsync("sample.xml");
>  XmlSerializer serializer = new XmlSerializer(ob.GetType());
>  serializer.Serialize(Stream stream,ob); 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:37:31.713

这是我使用的一个例子。Serialize 调用（代码中的最后一行）看起来不对。

```
private async void SaveButton_Click(object sender, RoutedEventArgs e)
{
    FileSavePicker fileSavePicker = new FileSavePicker();
    fileSavePicker.DefaultFileExtension = ".bla";
    fileSavePicker.FileTypeChoices.Add("Bla Files", new List<string> { ".bla" });
    fileSavePicker.SuggestedFileName = "New Bla File";
    fileSavePicker.SuggestedStartLocation = PickerLocationId.DocumentsLibrary;
    var file = await fileSavePicker.PickSaveFileAsync();
    if (file != null)
    {
        using (var stream = await file.OpenAsync(FileAccessMode.ReadWrite))
        {
            XmlSerializer serializer = new XmlSerializer(typeof(TypeToBeSerialized));
            serializer.Serialize(stream.AsStreamForWrite(), objectToBeSerialized);
            await stream.FlushAsync();
            stream.Size = stream.Position;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T23:50:12.787

这是[我在相关帖子上发布](https://stackoverflow.com/questions/11205565/serialize-xml-data-incremental-storing-in-windows-8/17055503#17055503)的代码片段。

## 将序列化的 XML 写入文件

使用适用于 Windows 8 / RT 的 Windows 存储异步序列化为 XML：

```
/// <summary>
/// Saves the given class instance as XML asynchronously.
/// </summary>
/// <param name="fileName">Name of the xml file to save the data to.</param>
/// <param name="classInstanceToSave">The class instance to save.</param>
public static async void SaveToXmlAsync(string fileName, T classInstanceToSave)
{
    using (var stream = await ApplicationData.Current.LocalFolder.OpenStreamForWriteAsync(fileName, CreationCollisionOption.ReplaceExisting))
    {
        XmlSerializer serializer = new XmlSerializer(typeof(T));
        using (XmlWriter xmlWriter = XmlWriter.Create(stream, new XmlWriterSettings() { Indent = true }))
        {
            serializer.Serialize(xmlWriter, classInstanceToSave);
        }
    }
} 
```

* * *

## 从文件中读取序列化 XML

使用适用于 Windows 8 / RT 的 Windows 存储异步读取序列化 XML：

```
/// <summary>
/// Loads a class instance from an XML file asynchronously.
/// </summary>
/// <param name="fileName">Name of the file to load the data from.</param>
public static async System.Threading.Tasks.Task<T> LoadFromXmlAsync(string fileName)
{
    try
    {
        var files = ApplicationData.Current.LocalFolder.GetFilesAsync(Windows.Storage.Search.CommonFileQuery.OrderByName).GetResults();
        var file = files.FirstOrDefault(f => f.Name == fileName);

        // If the file exists, try and load it it's data.
        if (file != null)
        {
            using (var stream = await ApplicationData.Current.LocalFolder.OpenStreamForReadAsync(fileName))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(T));
                T data = (T)serializer.Deserialize(stream);
                return data;
            }
        }
    }
    // Eat any exceptions unless debugging so that users don't see any errors.
    catch
    {
        if (IsDebugging)
            throw;
    }

    // We couldn't load the data, so just return a default instance of the class.
    return default(T);
}

/// <summary>
/// Gets if we are debugging the application or not.
/// </summary>
private static bool IsDebugging
{
    get
    {
#if (DEBUG)
        // Extra layer of protection in case we accidentally release a version compiled in Debug mode.
        if (System.Diagnostics.Debugger.IsAttached)
            return true;
#endif
        return false;
    }
} 
```

* * *

两个代码片段都需要在文件顶部添加“使用 Windows.Storage”。

对我来说，这些是辅助函数，这就是为什么它们被标记为静态的，但它们不需要是静态的。此外，IsDebugging 函数仅用于糖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T11:46:20.853

如果您不想询问用户将文件保存在哪里，您可以将对象保存到本地应用程序文件夹或远程文件夹。检查这个类：[https ://github.com/emilpytka/Win8Extensions/blob/master/Win8Extensions/Utils/ApplicationDataSerializer.cs](https://github.com/emilpytka/Win8Extensions/blob/master/Win8Extensions/Utils/ApplicationDataSerializer.cs)

使用此类的示例： [https ://github.com/emilpytka/Win8Extensions/blob/master/Win8Extensions.Test/Utils/ApplicationDataSerializerTest.cs](https://github.com/emilpytka/Win8Extensions/blob/master/Win8Extensions.Test/Utils/ApplicationDataSerializerTest.cs)

# android - Android 在 setContentView 之后应用设置

> ID：12562269
> 
> 赞同：2
> 
> 时间：2012-09-24T09:30:38.720
> 
> 标签：android, layout, orientation

我有一个应用程序，使用`onConfigurationChanged(Configuration cfg)`. 我也设置了`android:configChanges="orientation|keyboardHidden"`. 所以这个`onConfigChanged()`方法被调用了，因为我有两个方向的布局`layout-land`和`layout-port`目录，我有一段代码看起来像这样：

```
@Override
public void onConfigurationChanged(Configuration cfg) {
    super.onConfigurationChanged(cfg);
    setContentView(R.layout.activity_main);
    controller.applySettingsToButtons();
} 
```

（activity_main 和竖屏版的布局一样，但需要重新设置，否则应用程序会将竖屏版设置为横屏模式，我显然不想要）

**我想要的是**

我希望，当我旋转显示器时，让应用程序切换到`layout-land`文件，并在切换后将一些（动态）设置应用于按钮和东西。

**怎么了**

设置了新的景观内容视图，但未应用按钮的设置，尽管该`applySettingsToButtons()`方法已运行。

**想法**

首先，我认为 setContentview 可能在另一个线程中运行，导致`applySettingsToButtons()`首先完成。但是当我将它们都放在一个新线程中并运行它时，会发生与以前相同的事情。

**问题**

设置另一个（或相同）内容视图后，如何将设置应用于按钮和内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:13:42.780

通过`(setcontentview)`in再次设置 XML 后`configurationChange`，初始化`findviewbyid`按钮。那应该行得通。

# java - 在 J2ME 中创建我自己的事件

> ID：12562272
> 
> 赞同：0
> 
> 时间：2012-09-24T09:30:55.300
> 
> 标签：java, web-services, asynchronous, java-me

我正在制作一个调用 web 服务异步的小型应用程序，我想在响应完成时触发加载完成事件以便能够移动到下一个表单

我怎样才能以一种好的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:27:13.707

Event firing in Java requires the following elements

*   An event class to transmit information about the event
*   An interface that describes how the bean will notify interested parties, known as listeners A data structure to track listeners
*   Registration methods to add and remove listeners
*   Code to fire the events

The event class will extend java.util.EventObject like this:

```
public class MyEventClass extends java.util.EventObject {
         //here's the constructor
         public MyEventClass(Object source) {
             super(source);
         }
} 
```

The interface will look something like this:

```
 public interface MyEventClassListener {
     public void handleMyEventClassEvent(EventObject e);
} 
```

The event source will look something like this:

```
public class MyEventSource {
  private List _listeners = new ArrayList();
  public synchronized void addEventListener(MyEventClassListener listener){
     _listeners.add(listener);
  }
  public synchronized void removeEventListener(MyEventClassListener listener){
    _listeners.remove(listener);
  }
  // call this method whenever you want to notify
  //the event listeners of the particular event
  private synchronized void fireEvent(){
    MyEventClass event = new MyEventClass(this);
    Iterator i = _listeners.iterator();
    while(i.hasNext()){
      ((MyEventClassListener) i.next()).handleMyEventClassEvent(event);
    }
  }
} 
```

The event listener will look something like this:

```
public class MyEventListener implements MyEventClassListener {
  // ... code here

  //implement the required method(s) of the interface
  public void handleMyEventClassEvent(EventObject e) {
    // handle the event any way you see fit
  }
} 
```

You’ll need to register the MyEventListener object with the MyEventSource object by call its addEventListener method.

Good luck, be free to contact me for more details.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:14:43.220

*要在J2ME*中创建事件，请尝试以下代码：

```
EventList eventList = (EventList)PIM.getInstance().openPIMList(PIM.EVENT_LIST, PIM.READ_WRITE);

Event event = eventList.createEvent();
...
event.addString(Event.SUMMARY, PIMItem.ATTR_NONE, summary);
...
event.commit(); 
```

有关更多详细信息，请参阅*JSR 75*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:48:37.237

我已经通过创建一个接口并将其提供给我的方法解决了这个问题，该接口更改标志布尔值并调用另一个方法，告诉我它已经完成工作，所以我可以继续我的工作并且它正在运行另一个线程

# html - 清除 div 在 IE 和 chrome 中不起作用

> ID：12562273
> 
> 赞同：0
> 
> 时间：2012-09-24T09:30:55.567
> 
> 标签：html, css

在[这个](http://jsfiddle.net/opmaster/8gVqy/)Jsfiddle 中，我试图创建 2 个输入字段，如下所示：

标签（新行）

输入（新行）

label2（新行）

input2（新行）

电子邮件标签忽略 IE 和 chrome 中的清除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:46:53.377

在此处查看此模式的公式：http: [//pea.rs/forms/top-labels](http://pea.rs/forms/top-labels)

您也可以尝试添加：

```
display:block;
clear:both; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:43:47.080

**第一点**- 您没有为`.clear`.

**二**试试下面的

```
<label for="Email" style="padding-top:10px">E-mail:</label> 
```

这将起作用。

[这是关于清除](http://www.w3schools.com/cssref/pr_class_clear.asp)的一些想法

# active-directory - ldap 嵌套组成员资格过滤器

> ID：12562275
> 
> 赞同：4
> 
> 时间：2012-09-24T09:31:11.943
> 
> 标签：active-directory, ldap

我尝试使用 LDAP 匹配规则，但无法使用 LDAP 匹配规则过滤器检索搜索条目。

这就是我发送过滤器的方式： filter `(&(objectclass=*)(memberof:1.2.840.113556.1.4.1941:=)(cn=gasaxena))`

我也将过滤器转储到 ldap 服务器上收到的 pcap 中，这就是它的样子：过滤器：`(&(&(objectclass=*)(memberof:1.2.840.113556.1.4.1941:=[NULL]))(cn=gasaxena))`

有人可以指出，如果我错过了什么？服务器是AD

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T10:27:23.907

您应该对类似于以下的组执行搜索：

```
(member:1.2.840.113556.1.4.1941:=CN=John Smith,DC=MyDomain,DC=NET) 
```

不是用户的 memberOf。

-吉姆

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T04:00:29.503

要了解 Active-Directory 过滤器，只需查看[Search Filter Syntax](http://msdn.microsoft.com/en-us/library/aa746475%28v=vs.85%29.aspx)。

要查找“user1”所属的所有组：

在您的搜索中，将基数设置为组容器 DN；例如根 DN (dc=dom,dc=fr)

将范围设置为子树

使用以下过滤器：`(member:1.2.840.113556.1.4.1941:=cn=user1,cn=users,DC=x)`

**LDIFDE.EXE**示例（Windows 上的本机命令行 AD 搜索）：****

 **```
ldifde -f t.txt -d "DC=dom,DC=fr" -r "(member:1.2.840.113556.1.4.1941:=CN=jblanc,OU=MonOu,DC=dom,DC=fr)" 
```

这会找到 jpblanc 所属的所有组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-08T19:27:35.853

**使用memberOf:1.2.840.113556.1.4.1941:=**在我的情况下，您必须使用组的完整可分辨名称**CN=MyGroup,OU=User,OU=Groups,OU=Security,DC=domain,DC=com**是整个专有名称

```
(&(objectCategory=person)(objectClass=user)(memberOf:1.2.840.113556.1.4.1941:=CN=MyGroup,OU=User,OU=Groups,OU=Security,DC=domain,DC=com)) 
```

您可以通过运行以下代码并放入此过滤器**(&(objectClass=group)(name=MyGroup))来获取组的专有名称**

```
 Imports System.DirectoryServices

    Module Module1

        Sub Main()
            Dim run As Boolean = True
            Dim Filter As String
            While run
                Console.WriteLine("Enter Filter:")
                Filter = Console.ReadLine()
                If Filter = "exit" Then
                    run = False
                Else
                    checkFilter(Filter)
                End If
            End While
        End Sub

        Function checkFilter(Filter As String) As Boolean
            Dim search As New DirectorySearcher("LDAP://dc=Domain,dc=com")
            Try
                search.Filter = Filter
                search.PropertiesToLoad.Add("name")
                search.PropertiesToLoad.Add("distinguishedName")
                search.SearchScope = SearchScope.Subtree
                Dim results As SearchResultCollection = search.FindAll()
                If results Is Nothing Then
                    Console.WriteLine("Nothing")
                    Return False
                Else
                    If results.Count() = 0 Then
                        Console.WriteLine("non found")
                    End If
                    Dim result As SearchResult
                    For Each result In results
                        Console.WriteLine(result.Properties("name")(0).ToString())
                        Console.WriteLine(result.Properties("distinguishedName")(0).ToString())
                        'For Each prop In result.Properties("members")
                        '    Console.WriteLine(prop.ToString())
                        'Next
                    Next
                    Console.WriteLine(String.Format("{0} Users Found", results.Count()))
                End If
            Catch ex As Exception
                Console.WriteLine(ex.Message)
            End Try
            Return True
        End Function
    End Module 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:31:48.467

此组件不正确：`(&(objectclass=*)(memberof:1.2.840.113556.1.4.1941:=)(cn=gasaxena))`。

也许你的意思是：

`(&(objectclass=*)(memberOf:1.2.840.113556.1.4.1941:=cn=gasaxena,<superior-portion-of-distinguished-name-here>))`**

# lucene - 使用 lucene 的自动提示

> ID：12562276
> 
> 赞同：1
> 
> 时间：2012-09-24T09:31:16.120
> 
> 标签：lucene, lucene.net

> **可能重复：**
> [如何在 Lucene 中进行查询自动完成/建议？](https://stackoverflow.com/questions/120180/how-to-do-query-auto-completion-suggestions-in-lucene)

我是 lucene 新手，我对自动建议有疑问。目前我正在实施自动建议，就像谷歌的自动建议一样，您可以在其中输入“这是”并且建议包括“这是一个很好的”等内容。但我的实施表现不一样。它确实只建议一个术语。

任何对如何实现像自动建议这样的谷歌有想法或解决方案的人都将受到高度赞赏。

# jquery - 如何在选择器中搜索 id？

> ID：12562277
> 
> 赞同：0
> 
> 时间：2012-09-24T09:31:19.910
> 
> 标签：jquery, ajax

受此答案的启发，[我](https://stackoverflow.com/questions/501719/dynamically-adding-a-form-to-a-django-formset-with-ajax)正在使用 jquery 克隆一组元素，并在 .find .each 循环中相应地重命名 id 以保持它们的唯一性。

像这样：

```
newElement.find(':input').each(function() {
    var name = $(this).attr('name').replace('-' + 0 + '-','-' + total + '-');
    var id = 'id_' + name;
    $(this).attr({'name': name, 'id': id}).val('').removeAttr('checked');
}); 
```

到目前为止一切顺利，我的目标是检查那里的复选框以及表单最初是克隆的。

1）我有两种方法可以实现这一点，在重命名 id 之前，我在选择器中设置了复选框。

```
$newElement  ??? -->  $('#id_deals-0-is_form_cloned_by_ajax').prop('checked', true); 
```

2）或者我等到 id 被重命名并变得唯一：

```
$('#id_deals-' + total + '-is_form_cloned_by_ajax').prop('checked', true); 
```

第二种方法的问题是 .find 。每个都是异步方法，当我尝试查找该复选框的 id 来设置它时，重命名可能尚未发生。

因此，我认为方法一种更安全，但我不知道如何仅在选择器中检查 ID。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:33:12.427

像以前一样使用 .find 来查找 ID。单纯？

[http://api.jquery.com/find/](http://api.jquery.com/find/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:39:40.060

```
$newElement.find(':input').each(function() {
    var name = $(this).attr('name').replace('-' + 0 + '-','-' + total + '-');
    var id = 'id_' + name;
    $(this).attr({'name': name, 'id': id}).val('').removeAttr('checked');
});

// Find an element within $newElement
$newElement.find('#id_deals-' + total + '-is_form_cloned_by_ajax').attr('checked', true); 
```

# mirth - 笑声：当源中发生任何错误时，后处理器脚本不会执行

> ID：12562279
> 
> 赞同：0
> 
> 时间：2012-09-24T09:31:25.940
> 
> 标签：mirth

当欢乐源发生任何类型的错误时，后处理器脚本不会执行。

谁能告诉我为什么会发生这种情况？

**更新：**

我发现 mirth [http://www.mirthcorp.com/community/issues/browse/MIRTH-1294中存在错误](http://www.mirthcorp.com/community/issues/browse/MIRTH-1294)

所以，现在我的问题是如何处理源代码中发生的错误。即如何知道源中发生的任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:00:50.870

如果出现错误，我不确定您为什么要继续处理。通常，如果您有错误，则删除该消息并继续或关闭整个频道（如果订单很重要）。设置警报以向您发送有关错误的电子邮件是我的首选通知。您可以构建一个 JavaScript 转换器步骤或阅读器，并构建您自己的 TRY CATCH 以按照您的方式处理错误。

# iphone - NSString stringWithFormat 调用 XX 次导致内存警告

> ID：12562282
> 
> 赞同：2
> 
> 时间：2012-09-24T09:31:43.807
> 
> 标签：iphone, objective-c, memory-management, memory-leaks, nsstring

我开始使用此处描述的技术监控应用程序内存使用情况： [Programmatically retrieve memory usage on iPhone](https://stackoverflow.com/questions/787160/programmatically-retrieve-memory-usage-on-iphone)

我写了 3 个测试来尝试一下，这就是我发现的：

```
- (void)test1 {
for (int i = 0; i < 1000; i++) {
    NSMutableString *str = [NSMutableString stringWithString:@""];
    for (int j = 0; j < 1000; j++) {
        [str appendString:@"some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string "];
    }
}    

- (void)test2 {
for (int i = 0; i < 100000; i++) {
    @autoreleasepool {
        NSString *stri = @"";
        stri = [NSString stringWithFormat:@"%d some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really", i];
    }
}

- (void)test3 {
NSString *str = @"";
for (int i = 0; i < 500; i++) {
    str = [str stringByAppendingFormat:@"%d some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really", i];
} 
```

当我调用 test1 或 test3 时，内存被正确分配和释放 - 我可以使用上面链接中描述的 report_memory 函数看到它。但是当我调用 test2 时，内存并没有被释放-report_memory 不断上升。如果我多次调用 test2，我的应用程序会收到内存警告并被终止。

我正在使用ARC。谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:41:35.440

stringWithFormat 返回一个自动释放的 NSString 对象。因此，当自动释放池在此线程结束时释放时，对象将被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:25:22.917

搞定了！！！我启用了僵尸对象并忘记了它们，因此即使我使用 @autoreleasepool 块，任何分配的对象都没有被释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:40:28.683

这是因为您在每次迭代中使用单独的自动发布实例。在第一种情况下，您调用了一个对象`str`，并且要附加到同一个实例。这就是为什么内存没有在那里泄漏的原因。

尝试像这样更改呼叫并检查，

```
- (void)test2 
{
    NSString *str = @"";
    for (int i = 0; i < 100000; i++) 
    {
       str = [str stringByAppendingFormat:@"%d some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really long string some really", i];
    }
} 
```

# git - 在两个存储库之间保持两个文件同步 - 符号链接？或其他方式？

> ID：12562283
> 
> 赞同：5
> 
> 时间：2012-09-24T09:31:47.150
> 
> 标签：git, svn, symlink

在我们的一个学校项目中，使用的 VCS 是 SVN。

约束：

*   我们的教授不想将非工作代码提交到中央存储库中。

*   我将在旅途中处理代码。我在一天中的不同时间在办公室的笔记本电脑、台式机和 PC 上编写代码（我想是很有效率的）

*   我们不允许分支

我在想我会将我正在处理的文件存储在另一个存储库（可能还有 GIT）上，以便四处移动并避免在主存储库上提交“死代码”。之后，为避免在两个存储库之间复制粘贴内容，我会将一个存储库上的文件符号链接到另一个存储库。因此，我会在一个 repo 上无休止地提交文件，然后在完成后，我会在另一个 repo 上提交。

*但是，我不知道 VCS 在符号链接方面的行为是什么。*

我[在 StackOverflow 中阅读了一个答案，](https://stackoverflow.com/a/954575/575527)即 GIT 将符号链接存储为文件，并且在检索它时，无论目标是否存在，它都会将其返回到符号链接 - 这不好。我可能会得到“死文件”。

我还阅读[了 SVN 的此文档，](http://subversion.apache.org/faq.html#symlinks)并没有说明检索符号链接后会出现什么。

那么，我应该怎么做才能将两个存储库与同一个文件同步？我应该使用符号链接还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:36:36.970

这是我的建议：

1.  **git svn clone <教授回购的网址>**
2.  在第 1 步之后，你有你的颠覆 repo 的本地副本
3.  **git branch < 分支名称 >** - 不要担心你的教授不会看到这个分支
4.  在你的分支上工作并提交你想要的任何东西，直到你完成——所有的工作和测试都通过了——是时候把你的代码交给教授了
5.  **git结账大师**
6.  **git svn rebase** - 将从 svn 主线中选择最新的更改
7.  **git merge <你的分支名称>** - 如果教授喜欢查看单个提交，你可以使用 --squash 选项
8.  **git svn dcommit** - 将您的更改发布到主线

HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T10:16:42.173

介绍：

“没有死代码”和“没有分支”是糟糕和丑陋的开发政策，政策导致巨大的、不可管理的提交（大多数时候）

1.  忘记纯符号链接，使用**本机**工具和方法
2.  （一些）外部源可以使用[Subversion externals链接到 Subversion repo](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)
3.  移动开发（几乎）与问题的第一部分无关：使用任何选择的 (D)VCS，最近可以桥接到 Subversion（Mercurial、Git、Bazaar、Fossil-SCM/over git-export/）

# ios - 删除通用存折中缩略图周围的白色边框？

> ID：12562284
> 
> 赞同：2
> 
> 时间：2012-09-24T09:31:51.090
> 
> 标签：ios, ios6, passbook

由于某种原因，通行证会自动在我们放入存折中的缩略图周围放置一个白色边框，而我在文档中没有找到任何参考。

![](../Images/5ae444f4330a04b337c2b03faa5bfa3c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:23:06.900

可以在此处找到存折格式的完整文档：[https ://developer.apple.com/library/ios/#documentation/UserExperience/Reference/PassKit_Bundle/Chapters/Introduction.html](https://developer.apple.com/library/ios/#documentation/UserExperience/Reference/PassKit_Bundle/Chapters/Introduction.html)

我只能找到 suppressStripShine 选项，但与此边框无关。因此，目前最有可能不支持您寻求的修改。归档雷达。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T22:16:56.910

没有白色边框的缩略图似乎在称为 Event Ticket 的通行证样式中可用。有关示例，请参见[http://img.gawkerassets.com/img/1807rfmzhutezjpg/original.jpg上的图像。](http://img.gawkerassets.com/img/1807rfmzhutezjpg/original.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-19T14:01:31.963

我认为这个问题现在已经解决了，因为 iOS 上不再有任何白色边框了。但是，它们仍然存在于 macOS 上（打开*.pkpass*文件时）。没有找到任何东西可以从那里删除它们...

# sql - 找不到行时如何显示0

> ID：12562285
> 
> 赞同：0
> 
> 时间：2012-09-24T09:31:56.123
> 
> 标签：sql, oracle

我有一个 SQL 查询，其中我将 sysdate 传递给查询问题是，当表中没有与 sysdate 匹配的日期时，即使此处应用了 nvl，它也不显示零是我的查询

```
select * from molasses
where trunc(trn_dte) = trunc(sysdate) 
```

但它仅在表中存在当前日期时显示数据，但如果在表中找不到数据，我想显示零。请帮助我在 oracle 10 g 中执行此操作。因为有时情况就像上面一样，当没有找到数据时我必须显示零

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:39:56.563

像这样的东西*会*起作用，但我认为这不是一个好主意：

```
select nvl(t.a, n.a) as a, nvl(t.b, n.b) as b, ...
from molasses t
right outer join (select 0 as a, 0 as b, ... from dual) n on 1 = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:49:52.023

这是一个非常不寻常的问题。当没有数据存在时，为什么查询应该返回 0？通常由客户端软件/报告生成器在没有数据时显示有意义的内容，而不是查询本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:41:46.437

这很奇怪，我不会使用它，它更像是一个 hack：

```
SELECT col1, col2, ..., colN              --- numeric columns
FROM molasses
WHERE trunc(trn_dte) = trunc(sysdate)

UNION ALL

SELECT 0, 0, ..., 0
FROM dual
WHERE NOT EXISTS
      ( SELECT *
        FROM molasses
         WHERE trunc(trn_dte) = trunc(sysdate)
      ) ; 
```

人们只是想知道当表中只有一行并且所有值都为零时，应用程序/用户会理解什么。

* * *

我认为这也可以：

```
SELECT m.col1, m.col2, ..., m.colN              --- numeric columns
FROM dual LEFT JOIN molasses m
  ON trunc(m.trn_dte) = trunc(sysdate) ; 
```

并显示 Nulls 而不是（想要的）0s。使用该`COALESCE()`功能也可以轻松解决该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:42:03.427

假设您的表有四个数字列，您可以编写：

```
select * from molasses
where trunc(trn_dte) = trunc(sysdate)
union all
select 0, 0, 0, 0 from dual
where ( select count(*) from molasses where trunc(trn_dte) = trunc(sysdate) ) = 0 
```

# c# - 在用户控件中使用 NLog

> ID：12562287
> 
> 赞同：0
> 
> 时间：2012-09-24T09:32:03.397
> 
> 标签：c#, .net, logging, user-controls, nlog

我正在尝试将 NLog 用于我的 WindowsFormsControlLibrary，但它不起作用。有没有办法提供登录使用我的 Control.dll 的 .exe 应用程序？

```
 <?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <!-- make sure to set 'Copy To Output Directory' option for this file -->
  <!-- go to http://nlog-project.org/wiki/Configuration_file for more information -->

  <targets>
    <target name="file" xsi:type="File" fileName="${basedir}/${shortdate}/file.txt"
     layout="${stacktrace} ${longdate} ${message}" />
  </targets>

  <rules>
    <logger name="*" minlevel="Trace" writeTo="file" />
  </rules>
</nlog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:54:53.133

我今天早上也遇到了这个问题。也许，我的解决方案为时已晚，但我会在这里发布以防有人需要。nlog 无法写入文件的原因是因为缺少 Nlog.config，这听起来不合理啊？但就是这样，您必须将 Nlog.config 复制到**应用程序**文件夹而不是您的 DLL 文件夹，在您的情况下，它是包含使用您的 UserControl dll 的应用程序的文件夹:)！如果您无法通过我的解决方案解决问题，请与我联系：tanh1989@gmail.com

# wpf - Windows8或wpf中的颜色数组？

> ID：12562288
> 
> 赞同：2
> 
> 时间：2012-09-24T09:32:04.423
> 
> 标签：wpf, arrays, colors, windows-8

我试图将我的 WP7 项目导入到 Windows 8。我有一个数组

```
Color[] g_colors = { Colors.Yellow, Colors.Blue, Colors.Brown, Colors.Cyan,
                    Colors.DarkGray, Colors.Gray, Colors.Green, Colors.LightGray,
                         Colors.Magenta, Colors.Orange,Colors.Purple,Colors.Red,Colors.White }; 
```

我如何在 WPF 中做同样的事情？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:37:42.163

您是否在代码中添加了适当的命名空间？

```
using System.Windows.Media; 
```

应该解决问题。

根据您尝试过的评论，它“没有用”，我把这个页面放在 VS 中。.cs 文件如下，所有编译正常。

```
using System;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Media;

namespace MyNamespace
{
    public partial class ColorTestPage : Window
    {
        public ColorTestPage()
        {
            InitializeComponent();
            Color[] g_colors = { Colors.Yellow, Colors.Blue, Colors.Brown, Colors.Cyan,
                             Colors.DarkGray, Colors.Gray, Colors.Green, Colors.LightGray,
                             Colors.Magenta, Colors.Orange,Colors.Purple,Colors.Red,Colors.White };
        }
    }
} 
```

# php - 查找公共子串

> ID：12562295
> 
> 赞同：0
> 
> 时间：2012-09-24T09:32:21.653
> 
> 标签：php, arrays, substring

我有N个字符串。我正在寻找至少出现在 2 个字符串中的至少 2 个字符长的所有子字符串。

对于以下字符串：

1.  我的名字是丹尼尔
2.  你叫什么名字？
3.  他们叫我丹尼尔

它应该返回（不包括只有一个字符的字符串）：

*   “名称” – 1\. & 2.
*   “是” – 1\. & 2.
*   “丹尼尔” – 1\. & 3.
*   “我” – 1\. & 3.
*   "y" – 1\. & 3.

字符串的长度可能非常长（1KB-10KB）。我几乎没有内存问题（~2GB）——我只需要尽快计算出那些常见的字符串。

提前致谢！丹尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:13:27.280

我发现我最好的选择是在字符串之间进行所有可能的组合（大约 n^2 组合），然后对每个组合运行 LCS 算法。现在我可以比较所有处理它们的结果。

对于 LCS 算法的每次运行，它是 O(n^2*m^2) - n^2 的 O(m^2) 组合。

我知道这是幼稚的实现，但它是我能找到的最好的实现。

不管怎么说，还是要谢谢你 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:44:23.540

我建议在数据库中创建 3 个表：

1.  包含文本中单个单词的索引表
2.  包含文本的表格
3.  包含从单词到文本的引用的表

该方法将是这样的：

1.  将字符串添加到文本表(2)
2.  将字符串拆分为单词
3.  对于每个单词：如果该单词不在索引 (1) 表中，则添加它。
4.  对于每个单词：在参考表中添加一个条目（3），链接到单词和文本表

如果你有这个结构，你现在可以很容易地计算某些单词，它们出现的频率以及它们出现的位置。

如果你把索引放在索引表上的话，你可以搜索得非常快。

# c++ - 覆盖基模板类方法

> ID：12562299
> 
> 赞同：0
> 
> 时间：2012-09-24T09:32:30.690
> 
> 标签：c++, templates, methods, overriding, virtual

如何覆盖子类中的基本*模板化类*方法（即具有非模板方法的模板类）？

```
#include <Windows.h>
#include <iostream>

struct S{};

template <typename T>
class Base
{
public:
    Base()
    {
        Init(); // Needs to call child
    }

    virtual void Init() = 0; // Does not work - tried everything
    // - Pure virtual
    // - Method/function template
    // - Base class '_Base' which Base extends that has
    //      pure virtual 'Init()'
    // - Empty method body
};

class Child : public virtual Base<S>
{
public:
    virtual void Init()
    {
        printf("test"); // Never gets called
    }
};

int main()
{
    Child foo; // Should print "test"

    system("pause");
    return 0;
} 
```

我知道将子类类型作为模板参数传递给基类然后使用 a 的技术`static_cast`，但它对我来说太不干净了，因为它应该非常容易。

我确信模板背后有一些我只是没有掌握的基本思想，因为我已经搜索了几个小时，但找不到任何代码或解决方案来解决这个特定的场景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:34:01.757

从构造函数调用`virtual`方法是个坏主意，因为它没有得到您期望的行为。当 的构造函数`Base`执行时，对象还没有完全构造，还不是一个`Child`.

在构造函数之外调用它会起作用。

# java - Java中的启动窗口

> ID：12562306
> 
> 赞同：1
> 
> 时间：2012-09-24T09:33:07.327
> 
> 标签：java, awt, splash-screen

我正在尝试创建一个显示 gif 动画的启动画面。我希望在 main() 函数返回后实际显示我的启动屏幕的事情（Main() 只是创建一个登录屏幕。我希望我的 GUI 初始化在用户输入密码后开始）。此外，在完成某些非 GUI 后台操作后，我的启动画面应该会消失。

那么......我可以（或者我应该）在这种情况下使用 awt 的 SplashScreen 类吗？

我当前的实现设法显示一个空白的初始屏幕并在正确的时间隐藏它。问题是 gif 动画只有在GUI 初始化*后才加载。*我认为是因为 EDT 忙于 GUI 初始化，无法显示动画。

我希望 SplashScreen 类可能会解决这个问题。如果有人有任何提示或提示，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:34:35.300

该[教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)似乎建议您可以使用动画。

> 初始屏幕可以显示任何 gif、png 或 jpeg 图像，具有透明度、半透明和动画效果。下图是一个开发成动画 gif 文件的 Java 应用程序闪屏示例。

# jquery - jquery导航到另一个页面并将php页面加载到div中

> ID：12562309
> 
> 赞同：0
> 
> 时间：2012-09-24T09:33:16.873
> 
> 标签：jquery, load, window.location

```
//i am trying to press an href   
<div id="block-left">
<a href="#serv/compA">Company Administration</a> 
```

我想点击href，首先我想去页面services.php，然后从href加载到div =“serv-content”页面。

//这是我正在尝试的脚本

```
$(document).ready(function(){
  $("#block-left a").click(function() {
    var page= this.hash.substr(1);
    window.location("services.php");
    $("#serv-content").load(page);
  });
  return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:40:35.543

您无需调用 window.location，id.load 将负责动态内容加载。使用下面的代码，它将对您有所帮助。

```
 $(document).ready(function() {
        function loadContent() {
        $("#serv-content").load("http://sitename.com/services.php", function() {
            alert("Done");                
        });
        }

        $("#block-left a").click(loadContent);
        loadContent();
    }); 
```

# android - 设计布局

> ID：12562312
> 
> 赞同：0
> 
> 时间：2012-09-24T09:33:20.760
> 
> 标签：android, android-layout

我正在尝试设计一个布局，但我想以正确的方式完成它。

到目前为止，我有这个作为我的布局（它是一个登录表单）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/color_header"
        android:padding="10dp" >

        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@android:color/white"
            android:typeface="sans"
            android:textStyle="bold"
            android:text="@string/app_name"/>
    </TableRow>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical|center_horizontal"
        android:orientation="vertical">

        <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:gravity="center">

            <TextView
                android:id="@+id/txtUser"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/login_user"
                android:typeface="sans"
                android:textAppearance="@android:style/TextAppearance.Medium" />

            <EditText
                android:id="@+id/etUser"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:inputType="text" >

                <requestFocus />
            </EditText>

            <TextView
                android:id="@+id/txtPassword"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/login_password"
                android:typeface="sans"
                android:textAppearance="@android:style/TextAppearance.Medium" />

            <EditText
                android:id="@+id/etPassword"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:inputType="textPassword" />

            <CheckBox
                android:id="@+id/cbRemember"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:typeface="sans"
                android:text="@string/login_remember" />

            <Button
                android:id="@+id/btnLogin"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/login_login" />

        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

这是输出：

![在此处输入图像描述](../Images/a7bd746550e42d7165c3f86b66bc9bb8.png)

它按预期工作，但它给了我`This LinearLayout layout or its LinearLayout parent is useless`第 29 行（第 3 线性布局）。

哪个是实现我想要的正确方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:35:42.693

通过警告，系统只想说你有空间优化你的布局代码。

注意警告是个好习惯。

从下面的 LineraLayout 中，您必须删除任何线性布局。

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical|center_horizontal"
        android:orientation="vertical">

        <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:gravity="center"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:44:25.813

使用表格布局

```
 <?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tableLayout1"    
android:layout_width="fill_parent"
android:layout_height="fill_parent"       
android:gravity="center_vertical"   
android:stretchColumns="1">

<TableRow
    android:id="@+id/row1"
    android:layout_marginTop="25dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/username"
        android:layout_marginLeft="50dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="2dp"                
        android:text="user_name"           
        android:textSize="16sp" />
</TableRow>

<TableRow
    android:id="@+id/row2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <EditText
        android:inputType="text"
        android:id="@+id/editUsername"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_weight="2"
        android:singleLine="true"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="2dip"
        android:layout_marginRight="50dp"   
        android:padding="10dp"/>
</TableRow>

<TableRow
    android:id="@+id/row5"          
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
    <CheckBox
        android:id="@+id/remember"
        android:layout_width="wrap_content"      
        android:layout_height="wrap_content"            
        android:button="@drawable/checkbox_selector"      
        android:layout_marginLeft="52dp"
        android:padding="8dp" 
        android:textSize="12sp"
        android:text="remember"
        />
</TableRow>
<TableRow
    android:id="@+id/row6"            
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/login"
        android:layout_width="100dp"
        android:layout_height="35dp"
        android:text="login"                   
        android:textStyle="bold"
        android:layout_marginLeft="102dp"
         />
</TableRow> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:57:46.363

试试这个 ：

```
<TableRow
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/color_header"
    android:padding="10dp" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/app_name"
        android:textColor="@android:color/white"
        android:textStyle="bold"
        android:typeface="sans" />
</TableRow>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtUser"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/login_user"
        android:textAppearance="@android:style/TextAppearance.Medium"
        android:typeface="sans" />

    <EditText
        android:id="@+id/etUser"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="text" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/txtPassword"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/login_password"
        android:textAppearance="@android:style/TextAppearance.Medium"
        android:typeface="sans" />

    <EditText
        android:id="@+id/etPassword"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPassword" />

    <CheckBox
        android:id="@+id/cbRemember"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/login_remember"
        android:typeface="sans" />

    <Button
        android:id="@+id/btnLogin"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/login_login" />
</LinearLayout> 
```

![在此处输入图像描述](../Images/f0898d9d25665a944cae83c9aa2eb453.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:14:06.437

在挖掘了@Siddharth Lele 评论链接之后，我最终得到了这个布局，它可以按我的意愿工作，而且它与更小的设备以及更大的设备兼容。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/color_header"
        android:padding="10dp" >

        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@android:color/white"
            android:typeface="sans"
            android:textStyle="bold"
            android:text="@string/app_name"/>
    </TableRow>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:layout_gravity="center_vertical|center_horizontal"
                android:gravity="center">

            <TextView
                android:id="@+id/txtUser"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/login_user"
                android:typeface="sans"
                android:textAppearance="@android:style/TextAppearance.Medium" />

            <EditText
                android:id="@+id/etUser"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:inputType="text" >

                <requestFocus />
            </EditText>

            <TextView
                android:id="@+id/txtPassword"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/login_password"
                android:typeface="sans"
                android:textAppearance="@android:style/TextAppearance.Medium" />

            <EditText
                android:id="@+id/etPassword"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:inputType="textPassword" />

            <CheckBox
                android:id="@+id/cbRemember"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:typeface="sans"
                android:text="@string/login_remember" />

            <Button
                android:id="@+id/btnLogin"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/login_login" />

        </LinearLayout>

    </ScrollView>

</LinearLayout> 
```

谢谢大家的回答，我最终肯定会从他们那里学到一些东西，因此，我会为每个答案和@Siddharth Lele 的评论 +1！

# android - 调用 requestRender 后不调用 onDrawFrame

> ID：12562313
> 
> 赞同：3
> 
> 时间：2012-09-24T09:33:20.760
> 
> 标签：android, opengl-es

我已经制作了一个 View 实现 GLSurfaceView.Renderer 并实现了 onDrawFrame 函数。我要求像这样渲染：

```
@Override
    public void postInvalidate()
    {
        super.postInvalidate();
        requestRender();
    } 
```

这个视图是由另一个视图添加的，它可以工作（绘制我想要的）。但我想在另一个视图中使用 GLSurfaceView.Renderer，所以我在第一个视图中将其删除并将其添加到第二个视图中，如下所示

```
m_oMapView = FirstView.getMapView();
        FirstView.remove();//oo
        SecondView = (RelativeLayout) findViewById(R.id.mapview);
        SecondView.addView(m_oMapView,new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT));
        m_oMapView.refreshDrawableState();
        m_oMapView.findViewWithTag("map").bringToFront(); 
```

在我将它添加到secondView之后，requestRender似乎不起作用，我强制调用，但是ondrawFrame函数永远不会执行。requestRender之后没有调用ondrawFrame有什么原因吗？

# javascript - 不熟悉的 Javascript 语法

> ID：12562321
> 
> 赞同：0
> 
> 时间：2012-09-24T09:33:57.747
> 
> 标签：javascript, syntax

长话短说，在阅读 John Resig 的博客（特别是[http://ejohn.org/blog/javascript-trie-performance-analysis/](http://ejohn.org/blog/javascript-trie-performance-analysis/)）时，我遇到了一条对我来说绝对没有意义的线。基本上它归结为

```
object = object[key] = something; 
```

（这可以在我链接的文章的第一个代码块中找到。）

事实证明这对谷歌来说相当困难，所以如果有人可以提供一些见解/一个很好的在线资源供我自己学习，我将非常感激。

为了阐明一个点，多重赋值中的对象是相同的，即。

```
A = A[key] = something; 
```

也许我的问题应该是，这样做有什么意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:36:39.057

该行将某些内容分配给 object[key] 和 object。你可以这样读：

```
object[key] = something;
object = object[key]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:36:43.147

它被称为[括号表示法](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Objects_and_properties)

> JavaScript 对象的属性也可以使用方括号表示法访问或设置。对象有时称为关联数组，因为每个属性都与可用于访问它的字符串值相关联。因此，例如，您可以按如下方式访问 myCar 对象的属性：

```
myCar["make"] = "Ford";
myCar["model"] = "Mustang";
myCar["year"] = 1969; 
```

**更新**啊，我错过了两个平等。- 另一个答案中提到的多重分配

**注意：**您不太可能想要

```
object=object[somekey]=something 
```

因为它会覆盖你刚刚在中间使用的对象，而是

```
objectA=objectB[somekey]=something 
```

**其中 objectA与** *objectB* [somekey] 的类型相同

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:37:17.000

这称为多重赋值。

让我们举个例子：

```
a = b = 5; 
```

在这条指令之后，**a 和 b**的值都是**5**。

就像这样做：

```
a = 5;
b = 5; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:41:54.020

它是多重赋值和括号表示法的组合。

你也可以这样读：

```
// Key is a string value!
var key = 'foobar';
object[key] = something;    
object = something;

// Or, if key is known
object.foobar = something;
object = something; 
```*

# c++ - 如何获取程序的状态？

> ID：12562323
> 
> 赞同：6
> 
> 时间：2012-09-24T09:33:58.950
> 
> 标签：c++, c, winapi, thread-state

我正在观察一个程序并想杀死它，如果它处于“等待：执行”状态一段时间。

这是进程资源管理器的屏幕截图：

![状态：等待：执行](../Images/5e49849664fc06c7b2c3d87282ce6211.png)

**如何通过代码获得该状态？**或者也许可以告诉我那个状态到底是什么意思？这可能会帮助我找到正确的查询来解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:10:33.473

这意味着线程正在等待调度程序/执行程序的组件

可以使用 WMI [`Win32_Thread`](http://msdn.microsoft.com/en-us/library/aa394494.aspx)（或 .net `System.Diagnostics.ProcessThread WaitReason`）获取

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T10:18:14.417

它不是程序的状态，而是线程的状态。一个进程可以有多个线程。

您可以调用[WaitForSingleObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)来确定某些状态。

您也可以使用 COM 实例化 WMI 并选择[Win32_Thread 类](http://msdn.microsoft.com/en-us/library/aa394494.aspx)。

[这是一些例子。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390423%28v=vs.85%29.aspx)

更多信息在这里：[如何在 c++ 中确定一个 win32 线程处于等待或加入或睡眠状态](https://stackoverflow.com/questions/8185437/how-to-determine-that-a-win32-thread-is-either-in-wait-or-join-or-sleep-state-in)

# f# - 如何在 F# 中执行 Seq.takeWhile + 一项

> ID：12562327
> 
> 赞同：19
> 
> 时间：2012-09-24T09:34:07.920
> 
> 标签：f#, functional-programming, lazy-sequences

我想编写一个函数，它使用谓词过滤序列，但结果还应该包括谓词返回 false 的第一项。

如果在 F# 中有一个 break 关键字，逻辑将是这样的

```
let myFilter predicate s =
    seq {
        for item in s do
            yield item
            if predicate item then
                break
    } 
```

我尝试了 Seq.takeWhile 和 Seq.skipWhile 的组合，如下所示：

```
Seq.append 
    (Seq.takeWhile predicate s) 
    (Seq.skipWhile predicate s |> Seq.take 1) 
```

...但问题是与谓词匹配的第一项在 takeWhile 和 skipWhile 之间丢失

另请注意，输入序列是惰性的，因此任何消耗该序列并随后做出决定的解决方案都是不可行的。

有任何想法吗？

谢谢！

编辑：非常感谢所有的答案！没想到这么快就有这么多回复。我很快就会看看他们中的每一个。现在我只想提供更多背景信息。考虑以下实现 shell 的编码 kata：

```
let cmdProcessor state = function
    | "q" -> "Good bye!"
    | "h" -> "Help content"
    | c -> sprintf "Bad command: '%s'" c

let processUntilQuit =
    Seq.takeWhile (fun cmd -> cmd <> "q")

let processor = 
    processUntilQuit
    >> Seq.scan cmdProcessor "Welcome!"

module io =
    let consoleLines = seq { while true do yield System.Console.ReadLine () }

    let display : string seq -> unit = Seq.iter <| printfn "%s" 

io.consoleLines |> processor|> io.display

printf "Press any key to continue..."
System.Console.ReadKey ()|> ignore 
```

这个实现的问题是它**不**打印“再见！” 输入命令 q 时。

我想要做的是实现函数**processUntilQuit**以便它处理直到“q”的所有命令，**包括**“q”。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-24T12:17:50.890

缺乏对`break`in 计算表达式的支持有点烦人。它不适合 F# 使用的模型（这就是不支持它的原因），但在这种情况下它会非常有用。

如果您只想对序列进行一次迭代来实现这一点，那么我认为最干净的解决方案是只使用序列的底层结构并将其编写为递归循环，使用`IEnumerator<'T>`

这相当短（与此处的其他解决方案相比），而且代码也非常清晰：

```
let myFilter predicate (s:seq<_>) = 
  /// Iterates over the enumerator, yielding elements and
  /// stops after an element for which the predicate does not hold
  let rec loop (en:IEnumerator<_>) = seq {
    if en.MoveNext() then
      // Always yield the current, stop if predicate does not hold
      yield en.Current
      if predicate en.Current then
        yield! loop en }

  // Get enumerator of the sequence and yield all results
  // (making sure that the enumerator gets disposed)
  seq { use en = s.GetEnumerator()
        yield! loop en } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T11:30:11.060

不要真正了解您的解决方案有什么问题。

两个小修正：

(1) 使用序列表达式以提高可读性。

(2)在输入序列为空的情况下使用`Seq.truncate`代替。`Seq.take`

```
let myFilter predicate s = 
    seq { yield! Seq.takeWhile predicate s
          yield! s |> Seq.skipWhile predicate |> Seq.truncate 1 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T11:03:51.510

```
let duplicateHead xs = seq { yield Seq.head xs; yield! xs }
let filter predicate xs =
    xs
    |> duplicateHead
    |> Seq.pairwise
    |> Seq.takeWhile (fst >> predicate)
    |> Seq.map snd 
```

的替代版本`duplicateHead`，以防您不喜欢此处的计算表达式：

```
let duplicateHead' xs =
    Seq.append 
        (Seq.head xs)
        xs 
```

这种方法基于构建当前元素和下一个元素的元组。`predicate`正在应用于当前元素，但会返回以下元素。

**注意**：对于第一个元素失败的情况是不安全的**。**`predicate`为了使其正常工作，您必须`duplicateHead`通过添加一个肯定会通过`predicate`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-03T20:44:17.903

另一个较晚的答案，但它是“功能性的”，简单并且不会读取结果序列中最后一个元素之后的任何元素。

```
let myFilter predicate =
    Seq.collect (fun x -> [Choice1Of2 x; Choice2Of2 (predicate x)])
    >> Seq.takeWhile (function | Choice1Of2 _ -> true | Choice2Of2 p -> p)
    >> Seq.choose (function | Choice1Of2 x -> Some x | Choice2Of2 _ -> None) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T11:49:34.623

好一点的。:)

```
let padWithTrue n xs = seq { for _ in 1..n do yield true; done; yield! xs }
let filter predicate n xs =
    let ys = xs |> Seq.map predicate |> padWithTrue n
    Seq.zip xs ys
    |> Seq.takeWhile snd
    |> Seq.map fst 
```

这需要一个附加参数`n`，该参数定义要添加多少个附加元素。

**注意**：小心单行`padWithTrue`（`done`关键字）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-26T05:04:47.740

我猜你想要什么直到：

```
let takeUntil pred s =
  let state = ref true
  Seq.takeWhile (fun el ->
    let ret= !state
    state := not <| pred el
    ret
    ) s 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T10:39:23.820

丑陋的功能解决方案:)：

```
let rec myFilter predicate =
        Seq.fold (fun acc s ->
            match acc with
                | (Some x, fs) -> 
                    match predicate s with
                        | true -> (Some x, fs @ [s])
                        | false -> (Some x, fs)
                | (_, fs) ->
                    match predicate s with
                        | true -> (None, fs @ [s])
                        | false -> (Some s, fs))
            (None, []) 
```

你最终得到元组，其中第一个元素包含源列表中第一个不匹配元素的选项，第二个元素包含过滤列表。

丑陋的功能懒惰解决方案（对不起，我第一次没有正确阅读您的帖子）：

```
let myFilterLazy predicate s =
        let rec inner x =
            seq {
                match x with
                    | (true, ss) when ss |> Seq.isEmpty = false ->
                        let y = ss |> Seq.head
                        if predicate y = true then yield y
                        yield! inner (true, ss |> Seq.skip 1)
                    | (_, ss) when ss |> Seq.isEmpty = false ->
                        let y = ss |> Seq.head
                        if predicate y = true then
                            yield y
                            yield! inner (false, ss |> Seq.skip 1)
                        else
                            yield y
                            yield! inner (true, ss |> Seq.skip 1)
                    | _ -> 0.0 |> ignore
            }

        inner (false, s) 
```

我在 F# 中的流利程度不足以使匹配中的终止大小写看起来不错，也许某些 F# 大师会有所帮助。

**编辑：**受 Tomas Petricek 启发的不那么丑的纯 F# 解决方案 答案：

```
let myFilterLazy2 predicate s =
        let rec inner ss = seq {
            if Seq.isEmpty ss = false then
                yield ss |> Seq.head
                if ss |> Seq.head |> predicate then
                    yield! ss |> Seq.skip 1 |> inner
        }

        inner s 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-24T09:55:06.413

丑陋的非功能性解决方案

```
let myfilter f s =
    let failed = ref false
    let newf = fun elem -> match !failed with 
                           |true -> 
                               failed := f elem
                               true
                           |false->false
    Seq.takeWhile newf s 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-14T17:03:14.740

这已经很老了，但我认为我会做出贡献，因为其他解决方案没有提出这个建议......

使用`Seq.scan`建立一个包含两个元素的谓词结果堆栈并简单地获取表示前一个元素的谓词结果的堆栈底部是`true`什么？（注意，没有测试过这段代码）

```
Seq.scan (fun (a,b,v) e -> (pred e, a, Some e)) (true, true, None )
>> Seq.takeWhile (fun (_,b,_) -> b)
>> Seq.map (fun (_,_,c) -> c) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-18T17:33:59.133

我知道这是一个老问题。但是还有一个更实用的解决方案。

尽管如此，老实说，对于这个问题，我更喜欢[Tomas Petricek 提出的更为迫切的解决方案](https://stackoverflow.com/questions/12562327/how-to-do-seq-takewhile-one-item-in-f/12564899#12564899)。

```
let takeWhileAndNext predicate mySequence =
    let folder pred state element =
        match state with
            | Some (_, false) ->
                None
            | _ ->
                Some (Some element, pred element)
    let initialState = Some (None, true)
    Seq.scan (folder predicate) initialState mySequence |> Seq.takeWhile Option.isSome
                                                        |> Seq.map Option.get
                                                        |> Seq.map fst
                                                        |> Seq.filter Option.isSome
                                                        |> Seq.map Option.get 
```

在倒数第二行中，`|> Seq.filter Option.isSome`可以替换为，因为除了match`|> Seq.tail`之外没有其他状态。`initialState``Some (None, _)`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-26T07:25:25.407

自从提出问题以来，我知道它的年龄，但我不得不处理类似但更通用的问题，我希望有人会发现我的解决方案很有用。

这个想法是在闭包中捕获枚举器，然后返回一个迭代原始序列其余部分的函数。此函数有一个布尔参数 - 是否包含当前元素（OP 的情况）

```
/// allows fetching elements from same sequence
type ContinueSequence<'a> (xs: 'a seq) =

    let en = xs.GetEnumerator()

    member _.Continue (includeCurrent: bool) =
        let s = seq { while en.MoveNext() do yield en.Current }
        let c = seq { en.Current }
        if includeCurrent then
            Seq.append c s
        else
            s

    interface IDisposable with 
        member _.Dispose() =
            en.Dispose() 
```

这个问题的实际答案是：

```
use seq = new ContinueSequence a 
let result = Seq.append
   seq.Continue(false) |> Seq.takeWhile(predicate) 
   seq.Continue(true) |> Seq.take(1)  //include element which breaks predicate 
```

更通用的例子

```
/// usage example:
let a = seq [1; 2; 3; 4; 5; 6; 7]

use seq = new ContinueSequence<_>(a)
let s1 = seq.Continue(false) |> Seq.takeWhile((>) 3) // take 1 and 2, 3 is current
let s2 = seq.Continue(true) |> Seq.take(2)    // take 3 and 4
let s3 = seq.Continue(false) |> Seq.skip(1)   // skip 5

let s = 
    s1 
    |> Seq.append <| s2 
    |> Seq.append <| s3 
    |> Seq.toList

// s = [1; 2; 3; 4; 6; 7] 
```

# c++ - 在 C++ 中使用排序谓词

> ID：12562329
> 
> 赞同：0
> 
> 时间：2012-09-24T09:34:12.383
> 
> 标签：c++, comparison, predicate

我在函数中实现了 struct Track 的比较：

```
bool sortingPredicate(const Track& l, const Track& r) 
```

然后我有一个功能：

```
void sortPlaylist(std::list<Track>& playlist, bool (*predicate)(const Track& l, const Track& r)) {
    playlist.sort(predicate);
} 
```

我已经尝试过：

```
std::list<Track> mergeWithoutDuplicates(const std::list<Track>& l, const std::list<Track>& r) {
    sortPlaylist(l, sortingPredicate<Track>());
    ...
} 
```

我得到了 sortPlaylist 调用：

```
error: expected primary-expression before ‘&gt;’ token
error: expected primary-expression before ‘)’ token" 
```

我在函数调用中遗漏了什么/做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:37:40.793

```
sortingPredicate<Track>() 
```

是一个函数调用，你没有将它作为回调传递。它应该是：

```
sortPlaylist(l, sortingPredicate); 
```

另外，请注意`l`在`const`inside `mergeWithoutDuplicates`，但您将它传递给`sortPlaylist`期望非`const`引用。这也是错误的。

# database - Oracle：创建一个矩阵化视图

> ID：12562330
> 
> 赞同：1
> 
> 时间：2012-09-24T09:34:24.160
> 
> 标签：database, oracle

我有一个特定的查询，一旦该查询创建了一个显示每天的特定总和数量的表，我每天都必须执行该查询，而不是我想在物化查询中执行它，以免每天都创建这里是查询：

```
create table close_qty
as
select item_code,item_conc_code,tran_bran_code,sum(tran_qty) bal_qty
from tranhist a,itemmast b
where a.tran_item_code = b.item_code
group by item_code,item_conc_code,tran_bran_code 
```

我正在尝试创建物化视图，但出现以下错误

```
ERROR at line 1:
ORA-00901: invalid CREATE command 
```

这是我的查询

```
CREATE MATERIALIZED VIEW vwCloseQty
AS
select item_code,item_conc_code,tran_bran_code,sum(tran_qty) bal_qty
from tranhist a,itemmast b
where a.tran_item_code = b.item_code
group by item_code,item_conc_code,tran_bran_code 
```

如果它会影响性能以及如何解决错误，请提出建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:06:14.700

也许

```
CREATE MATERIALIZED VIEW vwCloseQty(item_code,item_conc_code,tran_bran_code, bal_qty)
as
select item_code,item_conc_code,tran_bran_code,sum(tran_qty)
from tranhist a,itemmast b
where a.tran_item_code = b.item_code
group by item_code,item_conc_code,tran_bran_code; 
```

不过，您仍然需要每天刷新它——因此，如果您每天只运行一次查询，那么物化视图将无济于事。

# c# - 在 C# ( WCF ) 中创建的可序列化动态对象在 VB.NET 中无法访问

> ID：12562331
> 
> 赞同：2
> 
> 时间：2012-09-24T09:34:28.200
> 
> 标签：c#, vb.net, wcf, dynamicobject

在我的解决方案中，我使用 C# 编写了 Web 服务（后端），并通过 WCF 提供给客户端，该客户端是带有 VB.NET 的 MVC3 Web 前端。对于一个 Web 服务，我需要向客户端发送一个动态对象列表 `List<SerializableDynamicObject>`。

我实现了此处描述的解决方案：[DLR 的 WCF Serializaiont](http://loosexaml.wordpress.com/2011/01/01/wcf-serialization-of-dlr-dynamic-types/)，[示例代码](http://www.ninjarobotarmy.com/ninjarobotarmy/dynsrv/dynsrv.zip)。在我用 C# 编写的测试控制台应用程序中，我可以轻松读取 WCF 提供的动态属性。不幸的是，在 VB.NET 控制台应用程序中，当我尝试调用其中一个属性时，我收到第一个属性的错误消息“未找到类型‘SerializableDynamicObject’的公共成员‘TRIP_ID’”。有趣的是，我可以在 C# 和 VB.NET 中的服务对象的“Watch”和“Locals”窗口动态属性中看到。

谁能向我解释问题是什么以及如何解决？谢谢...

网络服务代码：

```
public class Service1 : IService1
{        
    public object Process(object value)
    {
        dynamic d = new SerializableDynamicObject();
        d.TRIP_ID = Convert.ToInt64(1);
        d.TRIP_NAM = "TRIP NAM";
        d.TRIP_USR_CRE_DTE = DateTime.Now;
        d.TripValue = new SerializableDynamicObject();
        d.TripValue.TPVL_TRIP_ID = Convert.ToInt64(1);
        d.TripValue.TPVL_VAL = "TPVL VAL";
        return d;
    }

} 
```

C#版本读取WCF动态对象（作品），动态属性可见并可调用：

```
 class Program
{
    static void Main(string[] args)
    {
        dynamic d = new SerializableDynamicObject();
        d.Testing = "this is a test.";
        DynService.Service1Client client = new DynService.Service1Client();
        dynamic res = client.Process(d);
        Int64  TRIP_ID = res.TRIP_ID; 
        string TRIP_NAM = res.TRIP_NAM;
        DateTime TRIP_USR_CRE_DTE = res.TRIP_USR_CRE_DTE;
        Int64 TPVL_TRIP_ID = res.TripValue.TPVL_TRIP_ID;
        string TPVL_VAL = res.TripValue.TPVL_VAL;             
    }
} 
```

读取 WCF 动态对象的 VB.NET 版本（不工作）

```
Option Strict Off
Option Infer On
Imports System.Linq
Imports DynSrv
Module Module1
    Sub Main()
        Dim d As Object = New SerializableDynamicObject()
        d.Testing = "this is a test."
        Dim client As New ServiceReference1.Service1Client()
        Dim res As Object = client.Process(d)
        Dim TRIP_ID As Int64 = res.TRIP_ID
        Dim TRIP_NAM As String = res.TRIP_NAM
        Dim TRIP_USR_CRE_DTE As Date = res.TRIP_USR_CRE_DTE
        Dim TPVL_TRIP_ID As Int64 = res.TripValue.TPVL_TRIP_ID
        Dim TPVL_VAL As String = res.TripValue.TPVL_VAL

    End Sub
End Module 
```

# android - 如何在 source-android.frandroid.com 下载 android 源代码

> ID：12562334
> 
> 赞同：0
> 
> 时间：2012-09-24T09:34:44.480
> 
> 标签：android, macos

如何在[http://source-android.frandroid.com](http://source-android.frandroid.com)下载所有文件？我正在使用macos。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:00:11.010

你为什么想这么做？只需使用官方工具从官方仓库下载：http: [//source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)

或者至少从他们的 github 镜像下载一个存档。找到你想要获取源的包，然后点击下载为 zip 按钮，plateform_frameworks_base 的例子：[https ://github.com/android/platform_frameworks_base](https://github.com/android/platform_frameworks_base)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:56:02.153

[我在这里](https://github.com/android/)找到了一个类似的来源，我可以在其中使用 GIT 进行检查

# c# - System.Data.SqlClient.SqlException：必须声明标量变量“@”

> ID：12562338
> 
> 赞同：3
> 
> 时间：2012-09-24T09:34:55.410
> 
> 标签：c#, sql, asp.net, sqlexception

我一直在尝试查询一个表，如果条件为真，则执行另一个查询。

我收到以下异常：

> System.Data.SqlClient.SqlException：必须声明标量变量“@”

这是我的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyServer"].ConnectionString);
    SqlConnection con1 = new SqlConnection(ConfigurationManager.ConnectionStrings["MyServer"].ConnectionString);
    int amounts = Convert.ToInt32(InstallmentPaidBox.Text) + Convert.ToInt32(InterestPaid.Text) + Convert.ToInt32(PenaltyPaid.Text);
    int loans = Convert.ToInt32(PrincipalPaid.Text) + Convert.ToInt32(InterestPaid.Text);

    con.Open();
    DateTime date = Convert.ToDateTime(DateOfProcessing.Text);
    int month1 = Convert.ToInt32(date.Month);
    int year1 = Convert.ToInt32(date.Year);
    SqlCommand a = new SqlCommand("Select Date,max(Amount)as Amount from Minimum_Amount group by Date",con);

    SqlDataReader sq = a.ExecuteReader();
    while (sq.Read()) {
        DateTime date2 = Convert.ToDateTime(sq["Date"]);
        int month2 = Convert.ToInt32(date2.Month);
        int year2 = Convert.ToInt32(date2.Year);

        if (month1 == month2 && year1 == year2)
        {
            int amount = Convert.ToInt32(sq["Amount"]);
            string scrip = "<script>alert('Data Successfully Added')</script>";
            Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "Added", scrip);
            int areas = amount - Convert.ToInt32(InstallmentPaidBox.Text);
            int forwarded = Convert.ToInt32(BalanceBroughtTextBox.Text) + Convert.ToInt32(InstallmentPaidBox.Text);

            if (firsttime.Checked)
            {
                int balance = areas + Convert.ToInt32(PenaltyDue.Text) + Convert.ToInt32(InterestDue.Text);

                SqlCommand cmd = new SqlCommand("insert into Cash_Position(Member_No,Welfare_Amount, BFWD,Amount,Installment_Paid,Loan_Repayment,Principal_Payment,Interest_Paid,Interest_Due,Loan_Balance,Penalty_Paid,Penalty_Due,Installment_Arrears,CFWD,Balance_Due,Date_Prepared,Prepared_By) values(@a,@b,@c,@d,@e,@)f,@g,@h,@i,@j,@k,@l,@m,@n,@o,@p,@q", con);

                cmd.Parameters.Add("@a", SqlDbType.Int).Value = MemberNumberTextBox.Text;
                cmd.Parameters.Add("@b", SqlDbType.Int).Value = WelfareAmount.Text;
                cmd.Parameters.Add("@c", SqlDbType.Int).Value = BalanceBroughtTextBox.Text;
                cmd.Parameters.Add("@d", SqlDbType.Int).Value = amounts;
                cmd.Parameters.Add("@e", SqlDbType.Int).Value = InstallmentPaidBox.Text;
                cmd.Parameters.Add("@f", SqlDbType.Int).Value = loans;
                cmd.Parameters.Add("@g", SqlDbType.Int).Value = PrincipalPaid.Text;
                cmd.Parameters.Add("@h", SqlDbType.Int).Value = InterestDue.Text;
                cmd.Parameters.Add("@i", SqlDbType.Int).Value = InterestDue.Text;
                cmd.Parameters.Add("@j", SqlDbType.Int).Value = 0;
                cmd.Parameters.Add("@k", SqlDbType.Int).Value = PenaltyPaid.Text;
                cmd.Parameters.Add("@l", SqlDbType.Int).Value = PenaltyDue.Text;
                cmd.Parameters.Add("@m", SqlDbType.Int).Value = areas;
                cmd.Parameters.Add("@n", SqlDbType.Int).Value = forwarded;
                cmd.Parameters.Add("@o", SqlDbType.Int).Value = balance;
                cmd.Parameters.Add("@p", SqlDbType.Date).Value = date;
                cmd.Parameters.Add("@q", SqlDbType.Text).Value = PreparedBy.Text;
                int rows = cmd.ExecuteNonQuery();
                con.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:36:57.963

一个错误

**错误的**

```
SqlCommand cmd = new SqlCommand("insert into Cash_Position(Member_No,Welfare_Amount, BFWD,Amount,Installment_Paid,Loan_Repayment,Principal_Payment,Interest_Paid,Interest_Due,Loan_Balance,Penalty_Paid,Penalty_Due,Installment_Arrears,CFWD,Balance_Due,Date_Prepared,Prepared_By) values(@a,@b,@c,@d,@e,@)f,@g,@h,@i,@j,@k,@l,@m,@n,@o,@p,@q", con); 
```

以前是`@)f`，更正后 ->`@f`

以前是`@q`，更正后 ->`@q)`

**正确的**

```
SqlCommand cmd = new SqlCommand("insert into Cash_Position(Member_No,Welfare_Amount, BFWD,Amount,Installment_Paid,Loan_Repayment,Principal_Payment,Interest_Paid,Interest_Due,Loan_Balance,Penalty_Paid,Penalty_Due,Installment_Arrears,CFWD,Balance_Due,Date_Prepared,Prepared_By) values(@a,@b,@c,@d,@e,@f,@g,@h,@i,@j,@k,@l,@m,@n,@o,@p,@q)", con); 
```

# ruby - rubylinkedin gem 权限

> ID：12562339
> 
> 赞同：1
> 
> 时间：2012-09-24T09:34:57.280
> 
> 标签：ruby, linkedin

我正在尝试使用 ruby​​ linkedin gem - [https://github.com/pengwynn/linkedin](https://github.com/pengwynn/linkedin)。我只是在玩普通的红宝石（不是铁轨）

如果我按照 gem 给出的例子，我可以得到 client.profile。但是，当我尝试 client.group_memberships 或 client.connections 时，我得到 403 访问被拒绝。

我怀疑问题与授予的权限有关： [https ://developer.linkedin.com/documents/authentication#toggleview:id=ruby](https://developer.linkedin.com/documents/authentication#toggleview:id=ruby)

如何设置这些选项？还有其他可能出错的地方吗？

# eclipse - 为什么jsp：包含带有get参数的页面在eclipse中标记为错误？

> ID：12562341
> 
> 赞同：2
> 
> 时间：2012-09-24T09:35:00.013
> 
> 标签：eclipse, jsp, jstl

我的同事正在使用 netbeans，以下验证很好：

```
<jsp:include page="/somepage.jsp?parameter=value"/> 
```

然而在日食中我得到

> 在所选路径中未找到片段

这与添加参数有关，因为以下验证很好：

```
<jsp:include page="/somepage.jsp"/> 
```

有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:37:53.370

您应该使用`<jsp:param>`传递请求参数。

```
<jsp:include page="/somepage.jsp">
  <jsp:param name="parameter1" value="value1"/>
</jsp:include> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T11:24:49.913

将参数传递到另一个 JSP 页面 包含操作（请参阅在 JSP 页面中包含文件）执行包含的 JSP 页面并将生成的输出附加到它自己的输出流中。从 URL 的查询字符串解析的请求参数不仅可用于主 JSP 页面，还可用于所有包含的 JSP 页面。在调用 JSP 页面时，可以临时覆盖请求参数或临时引入新的请求参数。这是通过使用 jsp:param 操作完成的。

在此示例中，param1 在查询字符串中指定，并自动提供给被调用者 JSP 页面。param2 也在查询字符串中指定，但被调用者覆盖。请注意，调用后 param2 恢复为原始值。param3 是调用者创建的新请求参数。请注意，param3 仅对被调用者可用，当被调用者返回时，param3 不再存在。这是调用者 JSP 页面：

```
<html>
<head></head>
<body>

<jsp:include page="callee.jsp" />
   <jsp:param name="param2" value="value2" />
   <jsp:param name="param3" value="value3" />
</jsp:include>

Caller:
param1: <%= request.getParameter("param1") %>
param2: <%= request.getParameter("param2") %>
param3: <%= request.getParameter("param3") %>

</body>
</html> 
```

这是被调用的 JSP 页面：

被叫方：

```
param1: <%= request.getParameter("param1") %>
param2: <%= request.getParameter("param2") %>
param3: <%= request.getParameter("param3") %> 
```

如果使用 URL 调用示例：

```
http://hostname.com?param1=a&param2=b 
```

输出将是：

被叫方：

参数1：一个

参数2：值2

参数 3：值 3

呼叫者：

参数1：一个

参数2：b

参数3：空

访问[http://www.exampledepot.com/egs/javax.servlet.jsp/caller.jsp.html](http://www.exampledepot.com/egs/javax.servlet.jsp/caller.jsp.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-03T17:04:06.270

Eclipse 认为被包含的文件的名称是“somepage.jsp?parameter=value”，这当然不存在。它在 NetBeans 中验证良好，因为它用于解析/验证路径的任何机制都比 Eclipse 更智能。

Eclipse 中的错误是误报（假设“somepage.jsp”确实存在于预期位置），因为 JSP 编译器将正确解释路径并将“parameter=value”作为参数包含在包含的 JSP 中，可通过以下方式访问：

`${param.parameter}`或者`${param['parameter']}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-30T10:02:50.137

如果您想使用 url 中的参数，请在 eclipse 中禁用“JSP Syntax Validator”。

项目右键->属性->验证

[![在此处输入图像描述](../Images/07877dea92c5bef5a54f1143da2a491b.png)](https://i.stack.imgur.com/DncAS.png)

确保启用项目特定设置，上面的复选框。否则将采用默认设置。

# xml - 如何编组和取消编组 HashMap >

> ID：12562343
> 
> 赞同：1
> 
> 时间：2012-09-24T09:35:00.980
> 
> 标签：xml, binding, jaxb, jax-ws, marshalling

I have a javabean which have HashMap (String, ArrayList(String) ) hashMap attribute. i have generated a jax ws client . But i am not able to access ArrayList from hashMap as it has converted to some default type arraylist.How can I solve this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:07:07.540

使用附加类`Pair`

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Pair
{
   private String key;

   private String[] value;

   public Pair()
   {
   }

   public Pair(String key, String[] value)
   {
      this.key = key;
      this.value = value;
   }
} 
```

和`XmlJavaAdaptor`

```
public class PairAdaptor extends XmlAdapter<Pair[], HashMap<String, ArrayList<String>>>
{
   @Override
   public HashMap<String, ArrayList<String>> unmarshal(Pair[] v) throws Exception
   {
      final HashMap<String, ArrayList<String>> retVal = new HashMap<String, ArrayList<String>>();
      for (Pair pair : v)
      {
         retVal.put(pair.key, new ArrayList<String>(Arrays.asList(pair.value)));
      }

      return retVal;
   }

   @Override
   public Pair[] marshal(HashMap<String, ArrayList<String>> v) throws Exception
   {
      final Pair[] retVal = new Pair[v.size()];
      int counter = 0;
      for (String key : v.keySet())
      {
         retVal[counter] = new Pair(key, v.get(key).toArray(new String[]{}));
         counter++;
      }

      return retVal;
   }
} 
```

用法

```
@XmlJavaTypeAdapter(PairAdaptor.class)
private HashMap<String, ArrayList<String>> value; 
```

**更新。泛型而不是字符串**
对

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Pair<T>
{
   private String key;

   private T[] value;

   public Pair()
   {
   }

   public Pair(String key, T[] value)
   {
      this.key = key;
      this.value = value;
   }

   public String getKey()
   {
      return key;
   }

   public T[] getValue()
   {
      return value;
   }
} 
```

通用适配器

```
public class GenericAdaptor<T> extends XmlAdapter<Pair[], HashMap<String, ArrayList<T>>>
{
   @Override
   public HashMap<String, ArrayList<T>> unmarshal(Pair[] v) throws Exception
   {
      final HashMap<String, ArrayList<T>> retVal = new HashMap<String, ArrayList<T>>();
      for (Pair<T> pair : v)
      {
         retVal.put(pair.getKey(), new ArrayList<T>(Arrays.asList(pair.getValue())));
      }

      return retVal;
   }

   @Override
   public Pair[] marshal(HashMap<String, ArrayList<T>> v) throws Exception
   {
      final Pair[] retVal = new Pair[v.size()];
      int counter = 0;
      for (String key : v.keySet())
      {
         retVal[counter] = new Pair(key, v.get(key).toArray());
         counter++;
      }

      return retVal;
   }
} 
```

对于每种类型，您都应该有自己的适配器。
对于字符串

```
public class StringAdaptor extends GenericAdaptor<String>
{
} 
```

对于猫

```
public class CatAdaptor extends GenericAdaptor<Cat>
{
} 
```

用法

```
 @XmlJavaTypeAdapter(StringAdaptor.class)
   private HashMap<String, ArrayList<String>> value;   

   @XmlJavaTypeAdapter(CatAdaptor.class)
   private HashMap<String, ArrayList<Cat>> cats; 
```

# php - Yii CActiveDataProvider如何实现解析复杂表达式？

> ID：12562348
> 
> 赞同：1
> 
> 时间：2012-09-24T09:35:26.097
> 
> 标签：php, yii

我正在尝试实现类似于 Yii CActiveDataProvider 解析复杂表达式的方式。以下面的代码为例，我基本上希望能够在值中指定类似 'date("M j, Y", $data->create_time)' 的内容。

有人知道 Yii 中的哪个类会提供很好的洞察力吗？我查看了 CDataColumn 类，但运气不佳。

```
$this-widget('zii.widgets.grid.CGridView', array(
'dataProvider'=$dataProvider,
'columns'=array(
    'title',          // display the 'title' attribute
    'category.name',  // display the 'name' attribute of the 'category' relation
    'content:html',   // display the 'content' attribute as purified HTML
    array(            // display 'create_time' using an expression
        'name'='create_time',
        'value'='date("M j, Y", $data-create_time)',
    ),
), 
```

));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:49:58.800

您想创建一个可以评估 PHP 表达式的小部件吗？

[`evaluateExpression`](http://www.yiiframework.com/doc/api/1.1/CComponent#evaluateExpression-detail)CDataColumn 也使用了这种方法。您可以在方法中看到 CDataColumn 如何使用它[`renderDataCellContent`](https://github.com/yiisoft/yii/blob/1.1.12/framework/zii/widgets/grid/CDataColumn.php#L129)。

正如您在方法中看到的代码[`evaluateExpression`](https://github.com/yiisoft/yii/blob/1.1.12/framework/base/CComponent.php#L602)，它使用[`eval`](http://php.net/manual/en/function.eval.php)and [`call_user_func`](http://php.net/manual/en/function.call-user-func.php)。

如果你使用 PHP 5.3，你可以使用匿名函数。例如

```
$this-widget('zii.widgets.grid.CGridView', array(
    'dataProvider' = $dataProvider,
    'columns' = array(
        'title',          // display the 'title' attribute
        'category.name',  // display the 'name' attribute of the 'category' relation
        'content:html',   // display the 'content' attribute as purified HTML
        array(            // display 'create_time' using an expression
            'name' => 'create_time',
            'value' => function($data){
                return date("M j, Y", $data->create_time);
            }
        ),
    ),
)); 
```

# objective-c - XCode：更改 xcarchive 文件夹和文件名

> ID：12562349
> 
> 赞同：0
> 
> 时间：2012-09-24T09:35:28.123
> 
> 标签：objective-c, ios, xcode, xcodebuild

我正在从命令行生成 .xcarchive 文件，使用：

```
xcodebuild -scheme fullxsTest archive CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO 
```

这会将文件放入...

```
/Users/name/Library/Developer/Xcode/Archives/2012-09-12/App 10-09-12 13.45.xcarchive 
```

...这很不幸，因为我想将文件上传到服务器并想**为 .xcarchive 文件指定自定义目录和文件名。**

我尝试了 XCode 首选项中的位置，但它仍然将文件放在带有时间戳文件名的时间戳文件夹中。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:52:50.853

我设法提取了文件的路径和名称，即使它们是使用以下几行自动生成的：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *dirContents = [fileManager contentsOfDirectoryAtPath:BUILD_DIR_ROOT error:nil];
NSString *archiveDir = [NSString stringWithFormat:@"%@/%@",BUILD_DIR_ROOT,[dirContents lastObject]];
NSArray *arcContents = [fileManager contentsOfDirectoryAtPath:archiveDir error:nil];
return [NSString stringWithFormat:@"%@/%@/%@",BUILD_DIR_ROOT,[dirContents lastObject],[arcContents lastObject]]; 
```

在此之后，我检查返回的值是否不是自动创建的隐藏 .DS_Store 文件，如果不是，那么我很高兴。

# php - json_encode() PHP 的不同结果

> ID：12562350
> 
> 赞同：5
> 
> 时间：2012-09-24T09:35:33.867
> 
> 标签：php, json, codeigniter

如果我这样做：

```
$new_arr = array(
0 => 'keyboard',
1 => 'mouse',
2 => 'computer'
);

print_r(json_encode($new_arr)); 
```

输出：

> [“键盘”，“鼠标”，“电脑”]

但是假设我从我的数据库中获取“产品”表的所有行并且我这样做：

```
$product_with_id_map = array();
foreach($query as $result) {
$product_with_id_map[$result->id] = $result->name;
}
print_r(json_encode($product_with_id_map)); 
```

输出：

> {"0":"键盘","1":"鼠标","2":"电脑"}

当我 json_encode 时，我真的需要保留数组的键，你能告诉我如何在第一个示例中实现第二个输出吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T09:40:05.950

使用选项（[自 PHP 5.3 起](http://php.net/json_encode)）：

```
print_r(json_encode($product_with_id_map, JSON_FORCE_OBJECT)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T09:38:39.683

将数组转换为对象。

```
$new_arr = array(
  0 => 'keyboard',
  1 => 'mouse',
  2 => 'computer'
);

print_r(json_encode((object)$new_arr));
// output: {"0":"keyboard","1":"mouse","2":"computer"} 
```

***补充：*** 如果你在javascript中使用这个结果，我建议你使用数组，数组在javascript中也是对象，而且它为`length`你提供了更多的方法和属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T09:40:24.853

发生这种情况是因为从数据库返回的索引作为字符串返回，因此也在 JSON 中编码。当您自己创建数组时，您将它们设置为整数，因此它们被忽略。

你可以尝试

```
$new_arr = array(
'0' => 'keyboard',
'1' => 'mouse',
'2' => 'computer'
);

print_r(json_encode($new_arr)); 
```

或者您可以将数组转换为将保留索引的对象。

```
print_r(json_encode((object)$new_arr)); 
```

# c# - 如何在富文本框中创建的表格中添加文本？

> ID：12562357
> 
> 赞同：0
> 
> 时间：2012-09-24T09:35:55.717
> 
> 标签：c#, richtextbox, rtf

我像这样创建了一个表`richtextbox`：

```
 //Since too much string appending go for string builder
       StringBuilder tableRtf = new StringBuilder();

       //beginning of rich text format,dont customize this begining line              
    tableRtf.Append(@"{\rtf1 ");             

    //create 5 rows with 3 cells each

        for (int i = 0; i < 5; i++)
        {

            tableRtf.Append(@"\trowd");

           //A cell with width 1000.
            tableRtf.Append(@"\cellx1000"); 

            //Another cell with width 2000.end point is 3000 (which is 1000+2000).
            tableRtf.Append(@"\cellx2000"); 

            //Another cell with width 1000.end point is 4000 (which is 3000+1000)
            tableRtf.Append(@"\cellx3000");

            //Another cell with width 1000.end point is 4000 (which is 3000+1000)
            tableRtf.Append(@"\cellx4000");

            tableRtf.Append(@"\intbl \cell \row"); //create row

        }

        tableRtf.Append(@"\pard");

        tableRtf.Append(@"}");

        this.misc_tb.Rtf = tableRtf.ToString(); 
```

现在我想知道如何将文本放在标题和每个单元格中。

你有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:34:45.243

如果你想动态插入文本，你应该声明DataTable，例如：DataTable dt，你可以用dt动态改变数据。每次更改后，您应该渲染到 tableRtf 并将该 tableRtf 设置为 misc_tb.Rtf。以其他方式，您应该定义单元格位置（使用类似 IndexOf 方法）并在该位置插入文本。

**更新：** 也许这些链接会帮助你：

[http://space.dl.sourceforge.net/project/netrtfwriter/netrtfwriter/latest%20-%200.9.1/RtfWriter_V0.9.1.zip](http://space.dl.sourceforge.net/project/netrtfwriter/netrtfwriter/latest%20-%200.9.1/RtfWriter_V0.9.1.zip)

[http://www.codeproject.com/Articles/11306/NRTFTTree-A-class-library-for-RTF-processing-in-C](http://www.codeproject.com/Articles/11306/NRTFTree-A-class-library-for-RTF-processing-in-C)

在 RtfTable 类中有 cell(int row, int col) 方法，肯定会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-05T08:29:18.557

在您的代码中添加 AppendLine 以添加文本。我希望它会工作

```
tableRtf.Append(@"\cellx1000").AppendLine(" ID");       
tableRtf.Append(@"\cellx2000").AppendLine(" First Name");         
tableRtf.Append(@"\cellx3000").AppendLine(" Lastname");       
tableRtf.Append(@"\cellx4000").AppendLine(" Salary"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-07T08:31:37.383

加上行中的数据

```
 StringBuilder tableRtf = new StringBuilder();

                tableRtf.Append(@"{\rtf1\fbidis\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fnil\fcharset0 Microsoft Sans Serif;}}");

                for (int j = 0; j < ds.Tables[0].Rows.Count; j++)
                {   

                    tableRtf.Append(@"\trowd");
                    tableRtf.Append(@"\cellx2500" + "  " + ds.Tables[0].Rows[j]["caption"].ToString());
                    tableRtf.Append(@"\intbl\cell");
                    tableRtf.Append(@"\cellx10000\intbl\cel");
                    tableRtf.Append("   "+ ds2.Tables[0].Rows[k][j].ToString() + @"\intbl\clmrg\cell\row");

                }

                tableRtf.Append(@"\pard");
                tableRtf.Append(@"}");                    
                richTextBox2.Rtf = tableRtf.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-21T06:15:02.450

我们可以用硬编码数据填充单元格，如下 3 行填充数据：

```
 tableRtf.Append(@"\intbl   1" + @"\cell    Raj" + @"\cell    Bangalore" + @"\cell    India" + @"\row");
      tableRtf.Append(@"\intbl   2" + @"\cell    Peter" + @"\cell    Mumbai" + @"\cell   India" + @"\row");
      tableRtf.Append(@"\intbl   3" + @"\cell    Chris" + @"\cell    Delhi"+ @"\cell   India" + @"\row"); 
```

也可以在循环中将 DataTable 数据插入 RichTextBox 表，对于这些示例，请参阅链接[Add text in a created table in a richtextbox](http://www.dotnetstuffs.com/how-to-add-text-in-a-created-table-in-a-richtextbox/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-01T19:54:59.670

您可以将文本放在循环的最后一行，即：

```
tableRtf.Append(@"\intbl \cell \row"); 
```

在提到的示例中，每行中有 3 个单元格。所以，你应该把你的文本放在 \intbl 和 \row 之间。例如：

```
tableRtf.Append(@"\intbl  MyText1 \cell  MyText2 \cell  MyText3 \cell \row"); 
```

# tridion - 在基于.net的CT中访问组件的容器页面

> ID：12562360
> 
> 赞同：4
> 
> 时间：2012-09-24T09:36:06.043
> 
> 标签：tridion, tridion-2011

我们正在开发基于 Broker 查询机制（过滤器）的基于 .net 的 CT：

```
ComponentPresentationAssembler  cpAssembler = new ComponentPresentationAssembler(Page ID,Page object); 
```

为了传递页面 ID，我需要获取组件所在页面的访问权限。如何从包中访问页面？由于这是一个 CT，组件对象将在页面中可用，而不是页面对象。尝试了以下代码，但没有成功：

```
string pageURI = _package.GetValue("Page.ID");
Page objPage = (Page)_engine.GetSession().GetObject(pageURI); 
```

这不起作用，因为没有页面对象。有哪些替代方法可以让我们从 CT 访问组件的父页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T09:46:56.207

为了解决这个问题，我创建了一个 AddPageToComponentPresentation TBB。这是代码：

```
using System;
using System.Collections.Generic;
using System.Text;

using Tridion.ContentManager;
using Tridion.ContentManager.Templating;
using Tridion.ContentManager.Templating.Assembly;

namespace Tridion.Extensions.ContentManager.Templating {
    [TcmTemplateTitle("Add Page To ComponentPresentation")]
    class AddPageToComponentPresentation : TemplateBase {
        public override void Transform(Engine engine, Package package) {
            if (engine.PublishingContext.RenderContext.ContextItem != null) {
                Item pageItem = package.CreateTridionItem(ContentType.Page, engine.PublishingContext.RenderContext.ContextItem.Id);
                package.PushItem("Page", pageItem);
                Logger.Debug("Page Item added to Package");
            } else {
                Logger.Debug("No Context Item found");
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T11:16:08.840

非常感谢杰里米。我尝试了这段代码，但无法使用接口**TemplateBase**

根据您的代码提示，我尝试了

```
Page page = _engine.PublishingContext.RenderContext.ContextItem as Page; 
```

这很好用。我也可以获得发布对象：

```
Publication pub = (Publication)page.ContextRepository; 
```

非常感谢你。

# c# - 如何向数据表行添加其他元素

> ID：12562369
> 
> 赞同：1
> 
> 时间：2012-09-24T09:36:39.657
> 
> 标签：c#

```
dTable.Rows.Add("SSN", "Firstname", "Lastname"); 
```

我想继续使用 for 循环将元素添加到与上述代码相同的行，我该怎么做？

编辑：

感谢您的快速答复！抱歉，我不清楚我的主要问题如何继续扩大行？我有一个数组，其值为“任务 1”“任务 2”“任务 3”等是否可以创建一个像这样扩展它的循环

dTable.Rows.Add("SSN", "Firstname", "Lastname");

dTable.Rows.Add("SSN", "Firstname", "Lastname", arrTask[0]);

dTable.Rows.Add("SSN", "Firstname", "Lastname" arrTask[0], arrTask[1]);

dTable.Rows.Add("SSN", "Firstname", "Lastname" arrTask[0], arrTask[1], arrTask[2]);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:38:22.610

您可以将此代码放入循环中：

```
var row = dTable.NewRow();
row.ItemArray = new object[] {"SSN", "Firstname", "Lastname"};

dTable.Rows.Add(row); 
```

**编辑**：如果您想在现有行中添加值：

```
row.ItemArray = row.ItemArray.Concat(arrTask)
                            .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:42:12.840

此代码将允许您添加行

```
DataRow newRow=dTable.NewRow();

newRow["ColName1"] = "SSN";

newRow["ColName2"] = "Firstname";

newRow["ColName3"] = "Lastname";

dTable.Rows.Add(row); 
```

# jaxb - 可以信任 xjc -version 吗？

> ID：12562371
> 
> 赞同：5
> 
> 时间：2012-09-24T09:36:47.090
> 
> 标签：jaxb, java, jaxb2

我花了一天时间调试 JAXB 导致命名空间错误或丢失的问题（可能与 Marshaller.JAXB_FRAGMENT 相关，但这不是重点）。

我发现问题出现在我认可的目录中 的 JAXB RI **2.1.10上。**

如果我使用 JAXB RI 2.2.4 或 2.2.6，它是固定的

这是真正令人困惑的地方（以及是什么让它花了这么长时间）。

在以下 JDK 中使用 JAXB 的 Linux 上会出现该问题（即没有任何内容被认可）：

```
$ java -version
java version "1.7.0_03"
OpenJDK Runtime Environment (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu2)
OpenJDK 64-Bit Server VM (build 22.0-b10, mixed mode)

$ xjc -version
xjc 2.2.4 
```

但它应该可以正常工作，*如果这个 java 真的使用与 RI 2.2.4 相同的 JAXB*！

请注意，我调试的问题与 xjc 无关；我只是使用该命令来尝试确定我正在使用的 JAXB 版本。

同样，我无法在具有 Java 1.6.0_27 的 Windows 上重现该问题（并且在我认可的目录中没有任何内容），它报告：

```
C:\Program Files\Java\jdk1.6.0_27\bin>java -version
java version "1.6.0_27"
Java(TM) SE Runtime Environment (build 1.6.0_27-b07)
Java HotSpot(TM) 64-Bit Server VM (build 20.2-b06, mixed mode)

C:\Program Files\Java\jdk1.6.0_27\bin>xjc -version
xjc version "JAXB 2.1.10 in JDK 6"
JavaTM Architecture for XML Binding(JAXB) Reference Implementation, (build JAXB 2.1.10 in JDK 6) 
```

然而，如果我将 2.1.10 RI 放在我认可的目录中，就会出现问题。*如果 1.6.0_27 确实使用等效的 JAXB RI 2.1.10*，它应该出现在 1.6.0_27中。

 *在我看来，我遇到的问题已经在 2.1.10 之后和 2.2.4 之前的某个地方的参考实现中得到修复，但是上面的 2 个 VM 都没有真正使用他们声称的 JAXB 版本。或者他们可能使用他们声称的 xjc，但不是 jaxb-api.jar 和 jaxb-impl.jar 中的内容（我知道命名空间前缀映射器属性和包名称存在差异，但这不会是导致这个问题）。

我已经在 Win 7 和 Ubuntu、tomcat（没有 eclipse）和 eclipse（没有 tomcat）中完成了这些实验，所以我非常有信心我正确地解释了我的发现。

任何人都可以提供有关正在发生的事情的任何见解吗？

如果我是对的，有谁知道各种 Sun/Oracle JDK 真正使用的 JAXB 版本是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:34:56.050

**可以`xjc -version`信任吗？**

是的。它将为您提供 XJC 工具的版本。

* * *

**可以`xjc -version`信任给出的[JAXB (JSR-222)](http://jcp.org/en/jsr/detail?id=222) Runtime Implementation 的版本吗？**

不：

*   不要求 XJC 工具的版本与 JAXB 运行时实现的版本相匹配。
*   也不要求 XJC 工具和 JAXB 运行时实现来自同一 JAXB 实现。例如，XJC 工具可能来自[**Project JAXB**](http://jaxb.java.net/)，运行时可能是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)。

* * *

**JAXB RI 和 JDK/JRE 中包含的 JAXB Impl**

Java SE 实现（版本 6 及更高版本）需要包含一个版本的 JAXB (JSR-222)。通常（但不是必须）包含的是 JAXB RI 的**包重命名**版本。因此，如果您运行以下命令：

```
import javax.xml.bind.JAXBContext;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Demo.class);
        System.out.println(jc.getClass());
    }

} 
```

你得到：

```
class com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl 
```

如果您下载[**JAXB-RI**](http://jaxb.java.net/)版本并将其添加到您的类路径并重新运行相同的演示代码，输出将更改为以下内容：

```
class com.sun.xml.bind.v2.runtime.JAXBContextImpl 
```*

# android - 自动从 NFC 标签读取数据

> ID：12562374
> 
> 赞同：2
> 
> 时间：2012-09-24T09:37:07.110
> 
> 标签：android, nfc

您好我正在尝试从 NFC 标签读取数据。读取数据没有问题。但我必须扫描我的标签两次才能显示数据。当我第一次扫描标签时，它会启动应用程序但不读取数据。所以要读取数据，我必须再次扫描我的标签。那么我应该怎么做才能在我扫描我的标签后立即启动应用程序并从标签中读取数据。该应用程序是从标签中读取数据并更改我的 android 手机的配置文件。这是我的代码.. 谢谢....

```
public class Read extends Activity {

    Tag detectedTag;
    TextView txtType,txtSize,txtWrite,txtRead;
    Button btn_back;
    NfcAdapter nfcAdapter;
    IntentFilter[] readTagFilters;
    PendingIntent pendingIntent;
    byte[] new_payload;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.read);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);

         nfcAdapter = NfcAdapter.getDefaultAdapter();
         detectedTag =getIntent().getParcelableExtra(NfcAdapter.EXTRA_TAG);
        txtType  = (TextView) findViewById(R.id.txtType);
        txtSize  = (TextView) findViewById(R.id.txtsize);
        txtRead  = (TextView) findViewById(R.id.txt_read);

        pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, 
                new Intent(this,getClass()).
                addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);

        IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);
        IntentFilter filter2     = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
        readTagFilters = new IntentFilter[]{tagDetected,filter2};

        btn_back = (Button) findViewById(R.id.btn_back);

        btn_back.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent i = new Intent(getApplicationContext(),NFCTagWriterActivity.class);
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);

            }
        });
    }

    @Override
    protected void onNewIntent(Intent intent) {
        // TODO Auto-generated method stub

        setIntent(intent); 
        if(getIntent().getAction().equals(NfcAdapter.ACTION_TAG_DISCOVERED)){
            detectedTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);

            readFromTag(getIntent());
        }

        else{
            AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext());
            builder.setMessage("Tag Not Detected! Please Bring Tag In Proximity").setCancelable(false).setPositiveButton("OK", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                }
            }).show();

            AlertDialog alert = builder.create();
            Toast.makeText(getApplicationContext(), "No Tag Detected", Toast.LENGTH_LONG).show();
        }

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        nfcAdapter.enableForegroundDispatch(this, pendingIntent, readTagFilters, null);
    }

    public void readFromTag(Intent intent){

        Ndef ndef = Ndef.get(detectedTag);

        try{
            ndef.connect();

            txtType.setText(ndef.getType().toString());
            txtSize.setText(String.valueOf(ndef.getMaxSize()));

            Parcelable[] messages = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);

            if (messages != null) {
                NdefMessage[] ndefMessages = new NdefMessage[messages.length];
                for (int i = 0; i < messages.length; i++) {
                    ndefMessages[i] = (NdefMessage) messages[i];
                }
            NdefRecord record = ndefMessages[0].getRecords()[0];

            byte[] payload = record.getPayload();
            int length = payload.length;

            new_payload = new byte[length-3];
            System.arraycopy(payload, 3, new_payload, 0,length-3);

            String text = new String(new_payload);

            txtRead.setText(text);
            Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG).show();

            if(text.equalsIgnoreCase("silent")){
                Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG).show();
                AudioManager audiomanage = (AudioManager)getSystemService(Context.AUDIO_SERVICE);  
                audiomanage.setRingerMode(AudioManager.RINGER_MODE_SILENT); 
            }
            if(text.equalsIgnoreCase("vibrate")){
                AudioManager audiomanage = (AudioManager)getSystemService(Context.AUDIO_SERVICE);  
                audiomanage.setRingerMode(AudioManager.RINGER_MODE_VIBRATE); 
            }
            if(text.equalsIgnoreCase("normal")){
                AudioManager audiomanage = (AudioManager)getSystemService(Context.AUDIO_SERVICE);  
                audiomanage.setRingerMode(AudioManager.RINGER_MODE_NORMAL); 
            }

            ndef.close();

        }
        }
        catch (Exception e) {
            Toast.makeText(getApplicationContext(),e.toString(), Toast.LENGTH_LONG).show();
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:14:57.420

问题是，onNewIntent 没有在 onCreate 方法中调用。想到的快速解决方案是：

在 onCreate 方法中，您可以检查意图类型。如果它是一个标签被发现，你处理它就像在 onNewIntent 中一样。

另一种解决方案是将处理代码放在 onResume 中（如果标记 reding 是您的应用程序所做的全部）并在那里检查意图。

也许有更清洁的解决方案，稍后再考虑一下，但是现在，这应该对您有所帮助。

# javascript - 如何取回jquery ajax请求发送的xhr错误数据？

> ID：12562377
> 
> 赞同：1
> 
> 时间：2012-09-24T09:37:15.653
> 
> 标签：javascript, ajax, jquery

我有很多 jquery ajax 请求，用一个函数发送。

```
function sendData(data){
    $.post("somepage", {"data": data}, function() {}, "json")
    .fail(function(jqXHR, textStatus, errorThrown){
        sendData(***previuoslySentData***);
    });
}
sendData(1);
sendData(2);
sendData(3);
... 
```

如您所见，当请求失败时，我希望能够使用先前发送的数据再次发送请求。
**如何取回有关 xhr 错误的已发送数据？**
我认为它应该在 xhr 中，但我找不到任何东西。
我也对这个问题的任何其他解决方案感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:42:17.450

您将 AJAX 请求包装在自己的函数中的方式，实际上是在创建一个新的闭包，这意味着`data`您接受作为输入参数的变量仍然可以在您的`.fail`回调中使用。

# c - ATI 驱动程序和设置更改

> ID：12562380
> 
> 赞同：1
> 
> 时间：2012-09-24T09:37:25.460
> 
> 标签：c, windows, winapi, ati

我需要以编程方式更改 ATI Catalyst 控制中心中的各种设置。

我从 AMD 网站下载了 ADL SDK，它似乎允许我更改缩放比例、分辨率、频率和亮度的设置。

但是，似乎我无法使用我的程序更改视频部分中的设置：例如，如果我尝试更改屏幕亮度，则不会传播或应用更改，导致屏幕不会更改亮度。

选择的操作系统是 Windows 7。ADL 是正确的技术吗？如何更改此设置？

# mysql - 从子查询 SQL 中选择最大数据，但它显示来自子查询的所有结果

> ID：12562389
> 
> 赞同：2
> 
> 时间：2012-09-24T09:37:59.450
> 
> 标签：mysql, sql, subquery

```
SELECT MAX( t.valuesum ) AS total, t.codebook
FROM (
    SELECT SUM( value ) AS valuesum, codebook
    FROM stock
    GROUP BY codebook
) t
GROUP BY t.codebook 
```

在子查询中，输出为：

```
b001 35,
b002 20,
b0003 11 
```

我只想看到：b001 35。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:48:07.967

第一种解决方案使用`where`条件：

```
SELECT t1.valuesum, t1.codebook
FROM (
        SELECT SUM( s.value ) AS valuesum, s.codebook
        FROM stock s
        GROUP BY s.codebook
     ) t1
WHERE t1.valuesum in (SELECT MAX( t2.valuesum ) AS total
                     FROM (
                             SELECT SUM( s2.value ) AS valuesum, s2.codebook
                             FROM stock s2
                             GROUP BY s2.codebook
                           )t2
                     ) 
```

## [SQL 小提琴](http://sqlfiddle.com/#!3/e11ee/9/0)演示

第二种解决方案使用`having`条件：

```
SELECT max(t1.valuesum), t1.codebook
FROM (
        SELECT SUM( s.value ) AS valuesum, s.codebook
        FROM stock s
        GROUP BY s.codebook
     ) t1
GROUP BY t1.codebook
HAVING max(t1.valuesum) = (SELECT MAX( t2.valuesum ) AS total
                     FROM (
                             SELECT SUM( s2.value ) AS valuesum, s2.codebook
                             FROM stock s2
                             GROUP BY s2.codebook
                           )t2
                     ) 
```

## [SQL 小提琴](http://sqlfiddle.com/#!3/e11ee/18/0)演示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:44:18.143

试试这个

```
SELECT SUM( value ) AS valuesum, codebook 
FROM stock 
GROUP BY codebook
ORDER BY valuesum DESC
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-14T05:54:01.717

您可以通过单个查询简单地获取它 -

```
 SELECT MAX( t2.valuesum ) AS valuesum, t2.codebook
    FROM (
          SELECT SUM( s2.value ) AS valuesum, s2.codebook
          FROM stock s2
          GROUP BY s2.codebook
         )t2 
```

演示：-http://sqlfiddle.com/#!9/ [c2534 /15](http://sqlfiddle.com/#!9/c2534/15)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:42:35.923

试试这个

```
SELECT TOP 1 * FROM
(
  SELECT SUM([value]) AS valuesum, codebook
  FROM stock
  GROUP BY codebook
)
ORDER BY valuesum DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T09:52:36.167

假设（根据评论和错误消息）您使用 MySQL：

```
SELECT SUM( value ) AS valuesum, codebook
FROM stock
GROUP BY codebook
ORDER BY valuesum DESC
  LIMIT 1 ; 
```

# apache - 托管詹金斯

> ID：12562390
> 
> 赞同：-3
> 
> 时间：2012-09-24T09:38:01.730
> 
> 标签：apache, tomcat, jenkins

运行詹金斯的最佳方式是什么？

1.  Jenkins 作为独立服务
2.  詹金斯独自支持 apache
3.  apache-tomcat 背后的詹金斯

还有为什么我要在 apache-tomcat 后面运行 Jenkins？

请问有人可以帮我解答这些问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:00:24.290

做出此决定时应考虑三个主要方面：

*   安全
*   简单
*   加载

内置的[**Winstone** Servlet-Container](https://wiki.jenkins-ci.org/display/JENKINS/Winstone)非常适合 Jenkins 的小型实现，
特别是如果位于公司的防火墙后面，可以免受互联网攻击。
当然，它开箱即用。

**Apache-Tomcat将需要一些设置，但如果您计划**[像 Jenkins 一样](https://ci.jenkins-ci.org/)
将其公开给全世界，则可以保护您的Jenkins 站点免受攻击。 它在压力下也应该表现得更好，比如当你有大量的工作需要管理时。

请参阅此处[如何使用**Tomcat**或其他 servlent-containers](https://wiki.jenkins-ci.org/display/JENKINS/Containers)设置 Jenkins 。

# windows-7 - 在 Windows 7 上从 emacs 运行 nmake

> ID：12562391
> 
> 赞同：1
> 
> 时间：2012-09-24T09:38:12.210
> 
> 标签：windows-7, emacs, cmake, nmake

我知道有一些关于该主题的帖子，但没有得到令人满意的答案：

我开发 C++ 代码并使用 CMake 作为构建系统。我通常在 Linux 环境中工作。现在我想将我的代码移植到 windows，并能够在 emacs 中编辑和编译它。

我用 CMake 生成“NMAKE Makefiles”。这工作正常，但前提是我从“Visual Studio 命令行”运行 nmake。Visual Studio 命令行就像常规的 Windows 命令行一样，设置了一堆环境变量。如果我从常规的 Windows 命令行运行 nmake，我最终会得到“nmake：无法识别的命令”（不完全是错误消息，这是法语的近似翻译）。

按照[emacs wiki](http://www.gnu.org/software/emacs/windows/Developing-with-Emacs.html)中的旧文档，我找到了设置变量的 .bat 文件。如果我从常规命令行运行 .bat 然后调用 nmake，它可以工作。但是当我从 emacs 运行 name 时，它​​只是在一个普通的常规命令行中运行程序，它对 nmake 和环境变量一无所知。

那我怎样才能让所有东西一起工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:32:12.683

最好的方法是编写一个 bat 文件，其中包含如下必要的设置：

`call "C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\vcvars32.bat"`

`nmake`

然后从 emacs 而不是普通的“nmake”命令调用这个文件。这每次都会重做初始化，但应该足够快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:12:37.273

找到了另一个解决方案：使用 Visual Studio 命令行从命令行启动 emacs，并且 emacs 中的所有变量和路径都很好。

[我还按照 Cheeso 在这个相关问题](https://stackoverflow.com/questions/4556368/compiling-c-with-emacs-on-windows-system)中的建议设置了我的 .emacs 。

# shell - 通过自动机在 shell 脚本中格式化日期

> ID：12562395
> 
> 赞同：0
> 
> 时间：2012-09-24T09:38:32.477
> 
> 标签：shell, date, automator, launchd

我需要运行 automator 应用程序中包含的 shell 脚本作为“运行 shell 脚本”操作，其中我生成一个具有此文件名的文件：

```
filename=$(date +%m-%d-%Y-%k-%M)'_test.png' 
```

当我在终端中运行此行时，它可以工作。当我通过单击“播放”手动运行自动化应用程序时，它可以工作。但是当我将 automator 应用程序添加到 launchctl 来安排它时，这不再起作用了，我得到的是：

09-22-2012-

而不是像

09-22-2012-20-10_test.png

那么手动运行automator应用程序和从launchctl作为启动守护程序之间有什么区别，我如何更改线路以使其在两种情况下都可以工作？非常奇怪的是，通过 launchctl 的格式适用于日期，但时间值有问题。

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:39:55.017

您不必在格式字符串中只有日期/时间说明符。

我无权使用自动机来测试您的案例，但请尝试

```
filename=$(date +%m-%d-%Y-%k-%M_test.png) 
```

我敢打赌，您使用的单引号引起了问题。

IHTH。

# javascript - 将 + 转换为复选框

> ID：12562404
> 
> 赞同：1
> 
> 时间：2012-09-24T09:39:23.180
> 
> 标签：javascript, checkbox

我正在尝试在 JavaScript 中创建一个复选框，每次用户按下 + 我都是这样做的

```
function Selected(e) {
    var code;
    if (!e) var e = window.event;
    if (e.keyCode) code = e.keyCode;
    else if (e.which) code = e.which;
    var character = String.fromCharCode(code);

    if(character=='+'){
        var t1= new Array();

        t1[0]=document.createElement('input');
        t1[0].type='checkbox';
        t1[0].name='checkbox1';
        t1[0].value = "value";
        document.getElementById('myDiv').appendChild(t1[0]);

    }
} 
```

但它在下一行显示复选框和+。有什么方法可以删除 + 并仅在同一行中显示复选框？

**PS：**不幸的是，有些`execCommand`仅受IE支持，这就是我没有使用的原因

```
document.execCommand ('InsertInputCheckbox', false, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:47:53.973

以这种方式附加它：

```
function Selected(e) {
    e = e || window.event;
    var code = e.keyCode || e.which;

    if(String.fromCharCode(code) == '+') {
        var t1 = [];

        t1[0] = document.createElement('input');
        t1[0].type='checkbox';
        t1[0].name='checkbox1';
        t1[0].value = "value";
        document.getElementById('myDiv').appendChild(t1[0]);
    }
} 
```

修改代码以进行一些优化， [小提琴解决方案](http://jsfiddle.net/bFEyx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:50:30.710

我稍微清理了您的代码并添加了一个小提琴供您阅读：http: [//jsfiddle.net/jLEa5/](http://jsfiddle.net/jLEa5/)

```
 function Selected(e) {
        var code, evt, character;

        evt = e || window.event;
        if (evt.keyCode) {
            code = evt.keyCode;
        }
        else if (evt.which) {
            code = evt.which;
        }

        character = String.fromCharCode(code);

        if(character=='+') {
            var t1 = [], el;

            el = document.createElement('input');
            el.type='checkbox';
            el.name='checkbox1';
            el.value = "value";
            t1.push(el);
            document.getElementById('myDiv').appendChild(t1[0]);
        }
    }

window.addEventListener('keypress', Selected);​ 
```

# css - 更改多个类 li 项中的颜色

> ID：12562405
> 
> 赞同：0
> 
> 时间：2012-09-24T09:39:29.497
> 
> 标签：css, hover, html-lists

我正在使用 pagesrcoller 演示并尝试进行一些更改。

```
 <div class="pageScrollerNav topNav light">
    <ul>
        <li><img style="padding: 25px 145px 30px 0px" src="./images/logo_demo.png" height="25" /></li>
        <li><a href="#">index</a></li>
        <li><a href="#">item1</a></li>
        <li><a href="#">item2</a></li>
        <li><a href="#">item3</a></li>
        <li class="bloger"><a href="#">Blog</a></li>
    </ul>
</div> 
```

我使用 class bloger 为最后一个 li 项目更改它的颜色这里是 css

```
 .topNav li a{
    display: block;
    height: 18px;
    margin: 25px 0 0;
    line-height: 16px;
    padding: 7px 15px;
    color: #666;
    border: 1px solid #fff;
    font-weight: normal;
    text-decoration: none;
}

.topNav li.bloger a{
    display: block;
    height: 18px;
    margin: 25px 0 0;
    line-height: 16px;
    padding: 7px 15px;
    color: #049bd9;
    border: 1px solid #fff;
    font-weight: normal;
    text-decoration: none;
}

.topNav,
.topNav.light{
    background: #fff;
}

.topNav li.active a,
.topNav.light li.active a{
    background: #f0f0f0;
    color: #444444;
    border-color: #f0f0f0;
}

.topNav li a,
.topNav.light li a{
    color: #444444;
    text-decoration: none;
}

.topNav li.active .bloger a{
    background: #9be2ff;
    color: #049bd9;
    border-color: #9be2ff;
}

.topNav li.bloger a{
    color: #049bd9;
    text-decoration: none;
} 
```

当我在其他 li 项目上时颜色改变了但没有在它上面是这个问题吗？

```
 .topNav li.active .bloger a{
    background: #9be2ff;
    color: #049bd9;
    border-color: #9be2ff;
} 
```

如何更改多个课程项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:47:50.230

删除**.active** & 之间的空格。**博客**类。这样写：

```
.topNav li.active.bloger a{....} 
```

而不是这个：

```
.topNav li.active .bloger a{....} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:12:21.733

编辑多个类很简单。

您所要做的就是用逗号划定它们！

例子：

HTML：

```
<div class='box1'></div>
<div class='box2'></div> 
```

CSS：

```
.box1,.box2{
    color:red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:43:31.227

***[演示](http://tinkerbin.com/diAuhERC)***

你好现在

**代替**

```
.topNav li.active .bloger a 
```

**进入这个**

```
 .topNav .bloger a 
```

***[现场演示](http://tinkerbin.com/diAuhERC)***

## -----------------------------------------

## ------------------------------------------

第二个习惯了这个悬停，就像这样

```
 .topNav li:hover a,  .bloger a{
    background: #9be2ff;
    color: #049bd9;
    border-color: #9be2ff;
} 
```

***[演示](http://tinkerbin.com/XmkJH5cb)***

# c++ - 在 C++ 中将整数提高到正整数幂的正确方法是什么？

> ID：12562408
> 
> 赞同：27
> 
> 时间：2012-09-24T09:39:36.923
> 
> 标签：c++, math, numerical

我们知道，由于[各种原因](https://stackoverflow.com/questions/2398442/why-isnt-int-powint-base-int-exponent-in-the-standard-c-libraries)，C++ 中没有标准的整数幂函数。我正在用相当小的整数执行精确算术，计算幂的正确方法是什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-24T09:49:24.857

标准的快速取幂使用重复平方：

```
uint_t power(uint_t base, uint_t exponent)
{
    uint_t result = 1;

    for (uint_t term = base; exponent != 0; term = term * term)
    {
        if (exponent % 2 != 0) { result *= term; }
        exponent /= 2;
    }

    return result;
} 
```

步数与 的值成对数`exponent`。该算法可以简单地扩展到模幂运算。

* * *

**更新：**这是算法的修改版本，它执行的乘法减少了一次，并且更有效地处理了一些琐碎的情况。此外，如果您知道指数从不为零，而基数从不为零或一，您甚至可以删除初始检查：

```
uint_t power_modified(uint_t base, uint_t exponent)
{
    if (exponent == 0) { return 1;    }
    if (base < 2)      { return base; }

    uint_t result = 1;

    for (uint_t term = base; ; term = term * term)
    { 
        if (exponent % 2 != 0) { result *= term; }
        exponent /= 2;
        if (exponent == 0)     { break; }
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-25T22:24:45.423

您可以使用`std::pow(double a, double b)`. 如果两者都没有误差`a`，`b`并且结果适合 32 位整数！

原因是64位双精度完全覆盖了32位整数的范围。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T22:56:37.220

虽然 Kerrek 的回答是正确的，但 g++ 中还有一个“秘密”功能可以有效地做到这一点。如果你看一下 SGI 幂函数，它可以很容易地适应你想做的事情：

[http://www.sgi.com/tech/stl/power.html](http://www.sgi.com/tech/stl/power.html)

在 g++ 中，这被实现为[__gnu_cxx::power](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/libstdc++/api/a01595.html#ga52a0d4d0aad4e35cbcc82c8be1dfcebe)。不过，您可能不应该在生产代码中使用这些东西......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T03:21:49.517

除了这里的其他答案之外，维基百科上还有一篇很好的文章，在这里解释了各种不同的实现 -> [LINK](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)

# c# - C# v4.0 上的 System.ObjectDisposedException 错误

> ID：12562414
> 
> 赞同：2
> 
> 时间：2012-09-24T09:39:57.650
> 
> 标签：c#, objectdisposedexception

我实现了这段代码： [C# Processing Fixed Width Files](https://stackoverflow.com/questions/12543223/c-sharp-processing-fixed-width-files)

但由于我的工作 PC 运行 Windows XP，我不得不使用 C# v4.0 保存程序。不幸的是以下代码：

```
static string filePath = "";

public Main()
{
    InitializeComponent();
}

private void buttonLoadFile_Click(object sender, EventArgs e)
{
    DialogResult openFile = openFileDialog.ShowDialog();
    if (openFile == DialogResult.OK)
    {
        filePath = openFileDialog.FileName;
    }
}

private void buttonProcessFile_Click(object sender, EventArgs e)
{
    if (filePath == "")
    {
        MessageBox.Show("Load Fixed Width File First", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);

    }
    else
    {
        if (textboxFilePath.Text == "")
        {
            MessageBox.Show("Enter CSV File Path", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        else
        {
            DialogResult result = DialogResult.No;

            if (File.Exists(filePath))
            {
                result = MessageBox.Show("Overwrite CSV File?", "Warning", MessageBoxButtons.YesNo, MessageBoxIcon.Warning);
            }

            if (result == DialogResult.Yes)
            {
                var lines = File.ReadLines(filePath);

                var widthList = lines.First().GroupBy(c => c)
                                             .Select(g => g.Count())
                                             .ToList();

                var list = new List<KeyValuePair<int, int>>();

                int startIndex = 0;

                for (int i = 0; i < widthList.Count(); i++)
                {
                    var pair = new KeyValuePair<int, int>(startIndex, widthList[i]);
                    list.Add(pair);

                    startIndex += widthList[i];
                }

                var csvLines = lines.Select(line => string.Join(",",
                                    list.Select(pair => line.Substring(pair.Key, pair.Value))));

                File.WriteAllLines(textboxFilePath.Text, csvLines);

                MessageBox.Show("File Saved", "Completed", MessageBoxButtons.OK, MessageBoxIcon.Information);

            }
        }
    }
} 
```

在 Windows XP 上运行并在 C# v4.0 中编译时出现此错误：

```
************** Exception Text **************
System.ObjectDisposedException: Cannot read from a closed TextReader.
   at System.IO.__Error.ReaderClosed()
   at System.IO.StreamReader.ReadLine()
   at System.IO.File.<InternalReadLines>d__0.MoveNext()
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.IO.File.InternalWriteAllLines(TextWriter writer, IEnumerable`1 contents)
   at System.IO.File.WriteAllLines(String path, IEnumerable`1 contents)
   at FixedWidthFiles.Main.buttonProcessFile_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/WINDOWS/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
----------------------------------------
FixedWidthFiles
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/TEMP/FixedWidthFiles.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Core
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll
---------------------------------------- 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:46:04.907

来自[MSDN](http://msdn.microsoft.com/en-us/library/dd383503.aspx#Y1700)文档

> ReadLines 和 ReadAllLines 方法的区别如下： 使用 ReadLines 时，可以在返回整个集合之前开始枚举字符串集合；使用 ReadAllLines 时，必须等待返回整个字符串数组才能访问该数组。因此，当您处理非常大的文件时，ReadLines 会更有效率。

更改您的代码，

```
var widthList = File.ReadLines(@"C:\input.txt").First().GroupBy(c => c)
                             .Select(g => g.Count())
                             .ToList(); 
```

或使用

```
var lines = File.ReadAllLines(@"C:\input.txt");

var widthList = lines.First().GroupBy(c => c)
                             .Select(g => g.Count())
                             .ToList(); 
```

# vb.net - Single 和 FirstOrDefault 有什么区别？

> ID：12562418
> 
> 赞同：0
> 
> 时间：2012-09-24T09:40:17.937
> 
> 标签：vb.net, linq-to-sql

> **可能重复：**
> [LINQ Single vs First](https://stackoverflow.com/questions/2724096/linq-single-vs-first)

我是 Linq 的新手，想以最好的方式学习它，我在这里有 2 个用于 linq 的工作更新事件，他们也是这样做的，但是最好的方法是什么，我需要添加一些东西来使它更好！？

解决方案 1

```
Protected Sub Button2_Click(sender As Object, e As System.EventArgs) Handles Button2.Click
    Using db As New ThedatabaseconnectionDataContext()
        Try
            Dim TheUpdateID = DirectCast(FindControl("Textbox5"), TextBox).Text
            Dim getEditing As testtable = (From c In db.testtables Where c.test_id = TheUpdateID Select c).FirstOrDefault()
            If getEditing IsNot Nothing Then
                getEditing.test_cat = DirectCast(FindControl("Textbox1"), TextBox).Text
                getEditing.test_info = DirectCast(FindControl("Textbox2"), TextBox).Text
                getEditing.test_number = DirectCast(FindControl("Textbox3"), TextBox).Text
                getEditing.test_datetime = DirectCast(FindControl("Textbox4"), TextBox).Text
                db.SubmitChanges()
                'textBox1.Text = "Contact updated."
            End If
        Catch ex As Exception
            'Me.lblMsg.Text = ex.Message
        End Try
    End Using
End Sub 
```

解决方案 2

```
Protected Sub Button2_Click(sender As Object, e As System.EventArgs) Handles Button2.Click
    Using db As New ThedatabaseconnectionDataContext()
        Try
            Dim tbltest As Table(Of testtable) = db.GetTable(Of testtable)()
            Dim TheUpdateID = DirectCast(FindControl("Textbox5"), TextBox).Text
            Dim getEditing As testtable = tbltest.Single(Function(c) c.test_id = TheUpdateID)
            If getEditing IsNot Nothing Then
                getEditing.test_cat = DirectCast(FindControl("Textbox1"), TextBox).Text
                getEditing.test_info = DirectCast(FindControl("Textbox2"), TextBox).Text
                getEditing.test_number = DirectCast(FindControl("Textbox3"), TextBox).Text
                getEditing.test_datetime = DirectCast(FindControl("Textbox4"), TextBox).Text
                db.SubmitChanges()
                'textBox1.Text = "Contact updated."
            End If
        Catch ex As Exception
            'Me.lblMsg.Text = ex.Message
        End Try
    End Using
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T10:02:39.477

首先，您应该能够将您的第一个或默认值写为

```
Dim getEditing As testtable = tbltest.FirstOrDefault(Function(c) c.test_id = TheUpdateID) 
```

未经测试，但更多需要指出的是第一个或默认处理 lambdas

至于用哪个，就看你的数据了。分解发生的事情

> 单一 - 只需要一个匹配项，如果没有找到结果或找到多个结果，则会引发异常
> 
> SingleOrDefault - 期望 0 或 1 个匹配项。如果找到多个匹配项，则会引发异常
> 
> First - 期望 1 个或多个匹配项。如果未找到匹配项，则会引发异常。第一个结果之后的任何结果都将被忽略。
> 
> FirstOrDefault - 处理 0、1 或多个匹配项。第一个结果之后的任何结果都将被忽略。

如果您根据列表框中的 ID 进行选择（即，它是唯一的，并且肯定在数据库中），那么 single 是一个安全的选择。

如果用户输入的 ID（再次唯一）可能在数据库中，也可能不在数据库中，则默认值是安全的。

如果基于可能的重复值（例如姓氏）进行搜索，则应该使用 first 或 first 或 default ，具体取决于它是否保证存在于数据库中。

就个人而言，无论数据如何，我都会坚持使用 first 或 first 或 default ，因为它可以处理更多场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:48:31.097

甚至从哪里开始这个......

首先，我知道这可能是一个测试项目，如果您已经在这样做，请道歉，但请确保您使用的是可接受的数据层层次结构 - 您的 DBML 应该位于与表示层不同的项目中。

但是，对于手头的问题。我首选的方法是获取数据对象并在对象级别对其进行更新。如（伪代码/我是一个 C# 有点家伙！）：

```
private MyObject object;

protected void Page_Load(object sender, EventArgs e)
{
    // Select usually be ID
    object = DataLayer.GetObject();

    if(!IsPostBack)
    {
         // Load object details for editing into presentation layer
         TextboxObjectName.Text = object.Name;
    }
}

protected void Button_Click(object sender, EventArgs e)
{
     // Button click event - update object and send it to database
     object.Name = TextboxObjectName.Text;

     DataLayer.UpdateObject(object);
} 
```

这利用了对象跟踪，Daya 层可以如下所示：

```
function void UpdateObject(MyObject obj)
{
    using (TestDataContext db = new TestDataContext ())
    {

       db.MyObjects.Attach(obj);

       db.Refresh(RefreshMode.KeepCurrentValues, obj);

       db.SubmitChanges();
    }
} 
```

# javascript - 使用节点 js 流式传输 app.net 的公共流

> ID：12562420
> 
> 赞同：0
> 
> 时间：2012-09-24T09:40:25.940
> 
> 标签：javascript, node.js, streaming, http-streaming

我不熟悉这种流式传输/http 长期连接的东西。

这是我到目前为止得到的：

```
var accessToken = require('./config.js').accessToken
  , https = require('https')
;

var req = https.request({
      host: 'alpha-api.app.net',
      path: '/stream/0/posts/stream/global',
      port: 443,
      method: 'GET',
      headers: {
        'Authorization': 'Bearer ' + accessToken,
      }}).on('response', function(response) {
        response.on('data', function(chunk) {
          console.log(chunk);
        })
      });
req.end();

req.on('error', function(e) {
  console.error(e);
}) 
```

我希望它尽可能长时间地运行并在更新时获取更新。但事实证明这会在几秒钟后终止。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:46:09.633

流尚未在 App.net 中实现，请参阅[https://github.com/appdotnet/api-spec/blob/master/resources/streams.md](https://github.com/appdotnet/api-spec/blob/master/resources/streams.md)

您正在进行的 API 调用仅适用于全球流中的 20 个最新帖子：[https ://github.com/appdotnet/api-spec/blob/master/resources/posts.md#retrieve-the-global-溪流](https://github.com/appdotnet/api-spec/blob/master/resources/posts.md#retrieve-the-global-stream)

# ruby - Ruby on Rails 使用标签

> ID：12562421
> 
> 赞同：1
> 
> 时间：2012-09-24T09:40:25.837
> 
> 标签：ruby, database, ruby-on-rails-3, tabs, multi-step

每个人！

起初，我制作了一个包含大量元素的表单：文本字段、文本区域等。准备好表格后，我才明白，这么大的表格要连续填写，不太方便。我不想使用“**步骤**”系统（步骤 1 -> 步骤 2 -> ... -> 步骤 n），因为我希望最终用户能够以任何顺序填写此表格（ + 用户可以预先看到他需要填写哪些表格），所以我将表格分成了几个**选项卡**。

这个想法如下：一旦用户在某个选项卡中填写了表单，他点击“保存”按钮并继续到下一个（以他选择的任意顺序）。

我想知道 - 存储中间数据的最佳方法是什么？我是否应该为每个带有选项卡 ID 的选项卡表单设置一些隐藏输入以传递给模型，以便在每个“步骤”中仅验证选项卡相关数据并将其存储在数据库中。或者，也许，我应该有一个包含当前对象的 session[:object]，最后我会将它存储在 DB 中并从会话中删除。

这个想法能实现吗？

提前致谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:57:49.200

有一个叫做[wicked](https://github.com/schneems/wicked)的 gem ，它可以让你以非常简单的方式创建向导，检查一下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:52:23.730

我不是红宝石忍者，但在其他语言（如 php）中，我们通常使用会话来执行此操作。为什么不在 Rails 上执行此操作？

除了使用会话之外，您还可以考虑为“临时存储行”创建一个表，因此每次更改页面时都可以将数据保存到该表中，最后将它们全部保存到主表中。

如果您通常会丢失会话，这很有用......您可以将临时存储行与用户相关联，如果他丢失会话，您可以从数据库中恢复他未完成的表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:52:38.427

您可以简单地使用[Railscasts 217 - Multistep form](http://railscasts.com/episodes/217-multistep-forms)方法，效果很好。

但是，这可能不适合您，因为您只能在收集完所有内容后存储数据，而不是逐步进行。

另一个解决方案 - 正如您所提到的 - 将使用例如 jQuery 选项卡来创建您的表单步骤，并在存储实际记录及其所有数据之前通过 AJAX/ [backbone.js构建一些验证。](http://www.jamesyu.org/2011/01/27/cloudedit-a-backbone-js-tutorial-by-example/)

# wix - 如何使用功能键绑定/映射快捷方式？

> ID：12562431
> 
> 赞同：0
> 
> 时间：2012-09-24T09:40:44.283
> 
> 标签：wix

我通过 Wix 在桌面上安装了一个快捷方式。如何将快捷方式与功能键 F4 关联。ie 快捷方式应该在用户按下 F4 时启动。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:51:52.577

该`<Shortcut>`元素有一个可选`Hotkey`属性：

> 快捷方式的热键。低位字节包含键的虚拟键代码，高位字节包含修饰符标志。这必须是一个非负数。安装包的作者一般不建议设置此选项，因为这会在用户桌面上添加重复的热键。此外，将热键分配给快捷方式的做法可能会给使用热键以实现可访问性的用户带来问题。

你试过了吗？请注意有关为快捷方式设置热键的警告。

# html - 最大宽度图像不展开父容器

> ID：12562435
> 
> 赞同：0
> 
> 时间：2012-09-24T09:41:01.483
> 
> 标签：html, image, css

我的图像缩略图浮动到左侧。代码如下：

```
 <div id="imgContainer">
    <div>
     <a href="#" class="item"><img src="image.png" /></a>
    </div>
   </div> 
```

这是CSS：

```
#imgContainer div {
   width: 23%;
   float: left;
   padding: 1%;
   position: relative;
}

#imgContainer img {
   position: absolute;
   top: 0;
   left: 0;
   width: 100%;
   max-width: 290px;
} 
```

问题是：它仅按宽度将图像拉伸到 290 像素。好像不影响身高。这会导致缩略图真正被拉伸。我需要它们的最大宽度为 290 像素，并且高度应该相应地缩放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:47:21.433

任何未指定的尺寸都应自动缩放，但您的图像可能会继承其他方式的样式。要恢复到自动缩放高度，您应该为 指定以下属性`#imgContainer img`：

```
height: auto; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:43:24.770

添加：

```
#imgContainer img { height: 100% } 
```

或者

```
#imgContainer img { height: auto } 
```

应该足够了。

# xpages - 有没有人能够在升级包 1 之上从 ExtLib 安装实验性功能（关系数据库）？

> ID：12562439
> 
> 赞同：0
> 
> 时间：2012-09-24T09:41:34.253
> 
> 标签：xpages, xpages-extlib

我们有 UP1 并且我们有与 Microsoft SQL 的关系数据库连接的需求；我在 Internet 上看到几篇文章提到这可以通过在 OpenNTF.org 上安装相应版本的扩展库中的实验功能来完成

有人可以概述一下这需要哪些步骤。

在此先感谢，巴勃罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:41:08.073

与从 OpenNTF 安装 extLib 相同的步骤。解压缩 zip 并将应用程序安装程序指向更新站点。安装程序只会在 UP1 之上安装附加功能。（即实验性的东西）

# sql-server - 在 SQL Server 中按优先级裁剪重叠时间跨度

> ID：12562441
> 
> 赞同：0
> 
> 时间：2012-09-24T09:41:42.227
> 
> 标签：sql-server, timespan, gaps-and-islands

`start`我有一个大型数据库表，其时间跨度由时间描述`stop`。简单的时间跨度具有优先级，并且时间跨度可能相互重叠。

我需要处理它，以便删除重叠。
如果发生重叠，优先级较高的跨度将优先，而优先级较低的时间跨度将被裁剪，以使两者不重叠。如果一个时间跨度与一个或多个具有更高优先级的时间跨度完全重叠，则应将其删除。

一个简单的示例表：

```
SELECT
    1 AS id,
    {ts '2012-09-24 10:00:00'} AS start,
    {ts '2012-09-24 11:00:00'} AS stop,
    10 AS priority
INTO #TABLE
UNION ALL SELECT 2, {ts '2012-09-24 10:15:00'}, {ts '2012-09-24 12:00:00'}, 5
UNION ALL SELECT 3, {ts '2012-09-24 10:30:00'}, {ts '2012-09-24 12:30:00'}, 1
UNION ALL SELECT 4, {ts '2012-09-24 11:30:00'}, {ts '2012-09-24 13:00:00'}, 15

SELECT * FROM #TABLE;
DROP TABLE #TABLE; 
```

应该导致：

```
Start              Stop               Priority
2012-09-24 10:00   2012-09-24 11:00   10
2012-09-24 11:00   2012-09-24 11:30   5
2012-09-24 11:30   2012-09-24 13:00   15 
```

这是可能的，但我找不到任何简单的解决方案。最好我想避免使用游标。但如果没有其他办法，好吧，游标它就是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:21:33.673

尝试

```
;with cte as 
(select start as timepoint from @table union select stop from @table)
,cte2 as (select *, ROW_NUMBER() over (order by timepoint) rn from cte) 

    select id, MIN(ts) as starttime, max(te) as stoptime, maxpri
    from @table t2
        inner join
        (               
        select ts, te, MAX(priority) as maxpri 
        from @table t1
            inner join
            (       
            select c1.rn, c1.timepoint as ts, c2.timepoint as te 
            from cte2 c1
            inner join cte2 c2 on c1.rn+1 = c2.rn
            ) v
            on t1.start<v.te and t1.stop>v.ts
        group by ts, te
        ) v
            on t2.priority = v.maxpri
            and ts>=start and te<=stop
        group by id, maxpri
        order by starttime 
```

# javascript - Cakephp 大师/细节添加

> ID：12562444
> 
> 赞同：0
> 
> 时间：2012-09-24T09:41:56.127
> 
> 标签：javascript, cakephp

我有两张表，has-many关系，在master add.ctp中，允许用户上传0~5个文件（文件路径信息存放在details表中）

我想在 master/add.ctp 中动态显示附件（详细信息）表单

1，用户从下拉列表中选择要上传的文件数，

```
echo $this->Form->input('attachments', array( 'options' => array(1, 2, 3, 4, 5),'empty' => '(choose one)', 'onchange' => 'showNumber(this.value)')); 
```

然后for循环

```
{
        echo $this->Form->input('attachment_path', array('type'=>'file','label' =>'Attachment, Maximum size: 10M'));    
} 
```

//但我不知道如何捕获this.value，我知道Javascript无法将值传递给php。

或用户单击“添加另一个附件”链接，然后显示详细信息表单。

如何实现此功能，任何帮助将不胜感激。

我读过这篇文章： [Assign Javascript variable to PHP with AJAX](https://stackoverflow.com/questions/6576656/assign-javascript-variable-to-php-with-ajax) and get same error: the variable is undefined

编辑： [http ://cakephp.1045679.n5.nabble.com/Adding-fields-to-a-form-dynamically-a-complex-case-td3386365.html](http://cakephp.1045679.n5.nabble.com/Adding-fields-to-a-form-dynamically-a-complex-case-td3386365.html)

> '对于每个字段，使用末尾带有 [] 的默认名称（这将使其像数组一样堆叠）示例：提交字段后的 data[][book_id]

我应该把[]放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:33:44.310

我使用这种方法来实现这个功能。（终于明白了：））

[http://ask.cakephp.org/questions/view/foreach_loop_with_save_only_saving_last_member_of_array](http://ask.cakephp.org/questions/view/foreach_loop_with_save_only_saving_last_member_of_array)

是的，AJAX 可以做很多事情，对我来说，一天之内很难理解其中的逻辑..

无论如何，再次感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:46:26.193

我认为您应该为此使用 Ajax。

只需创建一个 ajax 调用`select.change()`，然后在控制器中创建一个返回必要信息的方法。

您可以直接在控制器上使用（或者在自定义视图中更好）返回一组数据`echo json_encode(array('key' => 'value'))`并使用 Javascript 访问它：

```
success: function(data) {
     alert(data.key);
} 
```

编辑...

在您的 javascript 中使用类似...

```
$('select').change(function(e) {
    var select = $(this);
    $.ajax({
        type: "POST",
        dataType: "json",
        url: "/attachments/youraction",
        data: { data: { id: select.find(":selected").val() } },
        success: function(data) {
            for (i in data) {
                var input = $('<input>', {type: "file", label: data[i].Attachment.label})
                $('form.your-form').append(input);
            }
        }
    })
}); 
```

然后在“Yourcontroller”中创建“youraction”方法：

```
<?php
class AttachmentsController extends AppController
{
    public function youraction()
    {
        if (!$this->RequestHandler->isAjax() || !$this->RequestHandler->isPost() || empty($this->data['id']))
        {
            $this->cakeError('404');
        }

        // Do your logic with $this->data['id'] as the select value...
        $data = $this->Attachment->find('all', array('conditions' => array('id' => $this->data['id'])));
        // ....

        // then output it...
        echo json_encode($data);

        // This should be done creating a view, for example one named "json" where you can have there the above echo json_encode($data);
        // Then..
        // $this->set(compact('data'));
        // $this->render('json');
    }
} 
```

现在更清楚了？？如果你对 ajax + cakephp 有疑问，你应该在网上搜索一下，你会找到很多教程。

# jsp - Chrome 浏览器中的 JSP 渲染太快/太慢

> ID：12562450
> 
> 赞同：1
> 
> 时间：2012-09-24T09:42:23.833
> 
> 标签：jsp, google-chrome

我正在访问一个 JSP 页面。在这个 JSP 页面中，我有 Jquery + Scriplets + 一些 JSP 标记（div、输入、表单等）+ Java 脚本。

这个 JSP 页面将用户名作为用户的输入。如果用户没有输入他的用户名，只是点击提交按钮，页面将刷新并抛出错误消息。页面将刷新并点击相同的 URL（错误消息不在新页面中显示）

在用户点击提交按钮并抛出错误消息的过程中，Chrome 浏览器也在瞬间渲染 JSP 页面中的其他 DIV 元素并向用户抛出所需的错误消息。

当 Chrome 浏览器在 JSP 中渲染其他元素（div、input 等）时，当同一页面被点击时，它会向用户提供其他元素的图片。这在 IE 和 FF 中不会发生。

如何在 Chrome 中避免这种情况？

**@Alfasin：** 我附上了下面的 JSP 代码。让我知道是否需要任何其他详细信息。

```
<html>
<head>
<script type="text/javascript" src="/static-files/scripts/jquery-1.6.2.js"></script>
<script type="text/javascript" src="/static-files/scripts/tooltip.js"></script>
<script type="text/javascript" src="/static-files/scripts/jquery-ui.min.js"></script>
<link href="/static-files/css/jquery-ui-rev.css" type="text/css" rel="stylesheet"/>
<%@page import="javax.servlet.http.Cookie"%>
<%
        String visitingCookie = "AUTHCookie";
        String urlCookie = "URLCookie";
    String movieCookieName="movieCookie";
        String displayOnlyPwd = "false";
        Cookie[] cookielist = request.getCookies();
        if(cookielist != null)
          {
              for(int i = 0; i<cookielist.length; i++)
               {
                  Cookie cookie = cookielist[i];
                  if(cookie.getName().contains(visitingCookie) && 
!cookie.getValue().equals(""))
                    {
                          displayOnlyPwd = "true";
                          request.setAttribute("AUTHCookie",cookie.getValue());
                          request.setAttribute("displayOnlyPwd",displayOnlyPwd);
                          break;
                   }
              }
        if(displayOnlyPwd.contains("false"))
        {
            request.setAttribute("displayOnlyPwd",displayOnlyPwd);
        }
       }
    else{
        displayOnlyPwd = "false";
        request.setAttribute("displayOnlyPwd",displayOnlyPwd);
    }
%>
<script type="text/javascript">
$(function() {
    $("#toopt a").tooltip({
    bodyHandler: function() {
        return $($(this).attr("href")).html();
    },
 });
   });

function delete_cookie ( cookie_name )
{
  var cookie_date = new Date ( );  
  cookie_date.setTime ( cookie_date.getTime() - 1 );
  document.cookie = cookie_name += "=; expires=" + cookie_date.toGMTString();
}

function checkpassword() 
{
var checkPassword=document.getElementById("password").value;
var counter=0;
var errMsg=" ";
var errMsg1=" ";

    if(checkPassword.length==0)
        {

         errMsg+="Please enter a valid Password.";
                     document.writeln("<form name=\"errForm\" method=\"POST\" action=\"http://myDomain/web/portal/home/-/portal/login?_58_redirect=%2Fweb%2Fportal%2Flogout\">");
         document.writeln("<input type=\"hidden\" name=\"errMsg\" value=\"" + errMsg + "\">");
         document.writeln("</form>");
         document.errForm.submit(); 
         return false;
            }

}
function enableDisableForm(myVar)
{
if(myVar == "true")
{
$(document).ready(function()
            {
            $("#disableDivForm").dialog({
         autoOpen:true,
     position:'center',
        height:167,
        width: 472,
        modal: true

            });
            });

var div1 = document.getElementById("enableDivForm");
div1.style.display = "none";

}
else
{

var div2 = document.getElementById("disableDivForm");
div2.style.display = "none";
 }
}
</script>
</head> 
```

我在这里粘贴了 50% 的代码。还有50%要走。你需要我粘贴完整的代码吗？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:25:20.007

上传带有属性的正文：
`"style= display: none;"`

并且只有在您完成上传页面之后（如果您使用的是 jQuery，则作为就绪函数中的最后一个命令）执行：

```
$("#body).show(); 
```

# php - Web服务安全问题

> ID：12562452
> 
> 赞同：0
> 
> 时间：2012-09-24T09:42:32.993
> 
> 标签：php, iphone, web-services

我为 iphone 应用程序开发了一套网络服务（用于购买magaine），但现在我发现了一个严重的安全问题。

1.  一位用户使用他的 iphone 设备中的某个工具记录了 Web 服务调用。

2.  现在他可以在没有实际购买的情况下调用网络服务进行购买。

请帮我处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:47:33.100

在支付授权时生成一个安全的唯一字符串/数字，必须在脚本中使用该字符串/数字才能将杂志添加到该帐户。拨打电话后，禁用该键。

这样，当人们随机调用“添加杂志”网络服务时，它就会失败。

# c# - MVC 多数据库连接和应用设置

> ID：12562455
> 
> 赞同：0
> 
> 时间：2012-09-24T09:42:44.020
> 
> 标签：c#, asp.net, asp.net-mvc-3

我想知道是否有人知道实现这一目标的解决方案。基本上，我需要建立一个网站，如 -

1) www.domain1.com/subApp1 进入一个数据库和一个appsettings。2) www.domain1.com/subApp2 转到一个数据库和一个appsettings。

在 Webform 应用程序中 - 我将主域（www.domain1.com）指向一个文件夹（登陆），其中包含一个 web.config

```
 <location path="subApp1">
    <connectionStrings>
      <clear/>
      <add name="SchemaConnection" connectionString="data source=dev;initial catalog=Schema;user id=sa;password=password" providerName="System.Data.SqlClient" />
    </connectionStrings>
    <appSettings>
      <add key="brandName" value="subApp1"/>
      <add key="ImageLocation" value="~/uploaded/subApp1/"/>
    </appSettings>

  </location>
  <location path="subApp2">
    <connectionStrings>
      <clear/>
      <add name="SchemaConnection" connectionString="data source=dev;initial catalog=Schema2;user id=sa;password=password" providerName="System.Data.SqlClient" />
    </connectionStrings>
    <appSettings>
      <add key="brandName" value="subApp2"/>
      <add key="ImageLocation" value="~/uploaded/subApp2/"/>
    </appSettings>
  </location> 
```

这很好用。但是在 MVC 中，它不起作用。我希望在 MVC 中有一种方法可以实现这一点。有知道的请指教。

# iphone - 带有地图的 UIWebView 行为

> ID：12562456
> 
> 赞同：1
> 
> 时间：2012-09-24T09:42:56.097
> 
> 标签：iphone, objective-c, google-maps, uiwebview

我的应用程序中有一个加载移动网站的 UIWebView。然后，移动网站有许多不同的链接。

其中一个链接将尝试使用谷歌地图加载地图。

最初，我遇到了用户单击地图链接的问题，因为应用程序会尝试在我的 web 视图中加载地图。这样做是让用户卡住，因为一旦您在 web 视图中加载了地图，就无法返回。

![在此处输入图像描述](../Images/dc3e5426654c2d3338252f0c69f71e6a.png)

您返回的唯一方法是强制关闭应用程序，因此并不理想。

[然后我发现其他人也有同样的问题，并按照此处](https://stackoverflow.com/a/7680096/279395)描述的方式实施了解决方案。

这很好用，现在单击地图链接后，它会打开地图应用程序。为了回到原来的应用程序，我可以简单地双击主页按钮，然后在正在运行的应用程序列表中选择我的应用程序。

然而，这带来了另一个问题。当我再次选择我的应用程序时，它会短暂显示内容，然后打开以下弹出窗口：

![在此处输入图像描述](../Images/df5000964bd9d2fd3597a408828ec652.png)

无论您在那里选择什么，它都会再次加载地图，但这次是在 webview 内部，这否定了前面描述的所有工作。

这里有没有人见过这种行为，如果是这样，你知道如何绕过它，所以它甚至不会打开询问你当前位置的弹出窗口吗？

**更新** 添加我用来处理它的代码

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    // URL Starts with "http://maps?"
    if([[request.URL description] hasPrefix:@"http://maps"]){
        [[UIApplication sharedApplication] openURL:request.URL];
        return NO;
    }
    // otherwise let the webview deal with the request
    return YES;
} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:06:50.300

根据您在下面的其他评论，我已编辑此答案以专注于我最初提出的第二个解决方案：

*   在我拥有的一个应用程序中，我去访问外部网站，在我的故事板中，我创建了一个包含 UIWebView 和 UIButton 的视图，它是一个后退按钮。您可以这样做，只需让 UIWebView 加载您想要的地图并从那里开始。

.xib 看起来像下面这样......特别注意**完成**按钮在子视图顺序中的最后一个事实，以便如果需要它可以位于 webview 的顶部（是的，可以使 webview 占用 100 % 的超级视图空间，按钮可以位于其顶部；它只是在我使用的示例应用程序中没有）（并忽略背景图像；在我用来截取此屏幕截图的示例应用程序中，它在后面使用部分透明的 web 视图；如果需要，请确保它首先出现在 .xib 视图的子视图顺序中，使其位于所有其他子视图的“后面”）。

![在此处输入图像描述](../Images/e7996edaf9c36aa9f84a7f45d635d35c.png)

并且您需要的代码将位于与此 .xib 关联的视图控制器中，并且看起来类似于以下内容：

```
@interface WebGoogleMapInUIWebViewViewController () <UIWebViewDelegate>

@property (nonatomic) int backCount;

#if __IPHONE_OS_VERSION_MIN_REQUIRED > __IPHONE_4_3
@property (readonly, weak, nonatomic) IBOutlet UIWebView *webView;
#else
@property (readonly, unsafe_unretained, nonatomic) IBOutlet UIWebView *webView;
#endif
@end

@implementation WebGoogleMapInUIWebViewViewController

@synthesize webView;

// … UIViewController life-cycle code and all other code goes here …    

#pragma mark - Actions

- (IBAction)done:(id)sender
{
    if (self.webView.canGoBack) // relying on false for a nil webView
        [self.webView goBack];
}

@end 
```

这个解决方案应该允许您留在您的应用程序内部，然后如果您确实进入询问位置的对话框，结果应该是立即的并且仅适用于您的应用程序内部。

我知道这并不能按照您所说的方式解决问题，但它可能会给您带来您想要的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:29:20.920

你确定要回来`NO`吗`shouldStartLoadWithRequest:navigationType:`？地图应用程序何时打开？在我看来，地图应用程序正在打开并且方法正在返回`YES`。

```
if ([[request.URL description] hasPrefix:@"http://maps"]) {
    // open URL in Safari and return NO to prevent UIWebView from load it
    [[UIApplication sharedApplication] openURL:[request URL]];
    return NO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T05:45:54.407

我倾向于同意 SurfDev，听起来该方法返回 YES。如果没有，那么根据您提供的数据，任何人都无法真正给您答案。

就个人而言，我会 NSLog WebView 尝试访问的每个 URL。我*最好*的猜测是，第二次访问地图站点的尝试会以某种方式触发，而这一次 URL 略有不同。

底线是，NSLog 可以获取更多关于 webview 正在做什么的数据。如果需要，您可以使用它的每一个回调语句。

# c# - 需要一个关于 WCF 和 IIS 的案例的解决方案

> ID：12562457
> 
> 赞同：0
> 
> 时间：2012-09-24T09:43:05.120
> 
> 标签：c#, wcf, scope, setting

首先，对不起我的英语不好。

我有一个 WCF 服务应用程序。当它运行时，我必须输入用户名、密码并选择要连接和交互的 WCF 服务的数据库。

然后服务启动，我的客户端 ASP.Net Web 可以调用和使用它的服务。它运行成功。

## 这是问题所在：

我将我的 WCF 服务构建到一个 DLL 中并在 IIS 上托管该 DLL，IIS 主机成功，但我的客户端 Web 无法连接到它并出现此错误

**当前的配置系统不支持用户范围的设置。**

我的 WCF 服务有 Setting.Setting 存储变量供用户添加以与程序交互。

我认为这是问题的原因，我尝试将 Scope 从 User 更改为 Application 但结果出现另一个错误**Property or indexer [] cannot be assigned to -- it is read only**。

我从这里放弃了。

任何人都可以给我一个解决方案吗？非常感谢。:) 祝大家有美好的一天。

# iphone - 如何将图像动态排列成一个圆圈

> ID：12562458
> 
> 赞同：2
> 
> 时间：2012-09-24T09:43:12.913
> 
> 标签：iphone, ios, xcode, geometry

我如何在圆形图像中动态排列图标（UIButtons，带有背景图像）。类似的东西应该像同心圆。

我正在使用以下代码，

```
UIImageView *container = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0f, 299.0f, 298.0f)];
    container.image = [UIImage imageNamed:@"AR_RF004_circle.png"];
    container.center = CGPointMake(self.view.bounds.size.width/2.0, self.view.bounds.size.height/2.0);
    [self.view addSubview:container];

    NSArray *imagesArray = [[NSArray alloc]initWithObjects:[UIImage imageNamed:@"AR1.png"],[UIImage imageNamed:@"AR2.png"],[UIImage imageNamed:@"AR3.png"],[UIImage imageNamed:@"AR4.png"],[UIImage imageNamed:@"AR5.png"], nil];
int numberOfSections = 5;
    CGFloat angleSize = 2*M_PI/numberOfSections;
for (int j = 0; j < numberOfSections; ++j) {
        UIButton *sectionLabel = [[UIButton alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 150.0f, 128.0f)];
[sectionLabel setBackgroundImage:[imagesArray objectAtIndex:j] forState:UIControlStateNormal];
sectionLabel.layer.anchorPoint = CGPointMake(0.9f, 0.1f);
        sectionLabel.layer.position = CGPointMake(container.bounds.size.width/2.0, container.bounds.size.height/2.0); // places anchorPoint of each label directly in the center of the circle.

        sectionLabel.transform = CGAffineTransformMakeRotation(angleSize*j);
        [container addSubview:sectionLabel];
    NSLog(@"section label x and y is %f ,%f",sectionLabel.frame.origin.x,sectionLabel.frame.origin.y);
    }
    [container release]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:10:39.493

您可以使用这段代码：

```
UIButton *currentButton;
int buttonCount = 20;
int radius = 200; 
float angleBetweenButtons = (2 * M_PI) / buttonCount;
float x = 0;
float y = 0;
CGAffineTransform rotationTransform;

for (int i = 0; i < buttonCount; i++)
{
    // get your button from array or something
    currentButton = ...
    ...

    x = radius + cosf(i * angleBetweenButtons) * radius;
    y = radius + sinf(i * angleBetweenButtons) * radius;
    rotationTransform = CGAffineTransformIdentity;
    rotationTransform = CGAffineTransformRotate(rotationTransform, (i * angleBetweenButtons));
    currentButton.center = CGPointMake(x, y);
    currentButton.transform = rotationTransform;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:40:43.837

我认为你可以做这样的事情

`sectionLabel.center = container.center;`

我没有检查其他代码..最简单的方法

# android - Android 上的意图标志

> ID：12562459
> 
> 赞同：0
> 
> 时间：2012-09-24T09:43:16.593
> 
> 标签：android, android-intent, flags

我的应用程序有一个小部件，它需要在某种程度上独立于应用程序。

活动工作流程应该是这样的：

Widget -> Activity 作为接收者

Receiver -> LoginPage 或 Activity A（取决于登录状态）

登录页面 -> 活动 A

活动 A onKeyDown -> 活动 B

活动 B onKeyDown -> 主屏幕。

在活动 B 之前我没有问题，当我按下 onKeyDown 时它会发送回活动 A。我正在使用**FLAG_ACTIVITY_CLEAR_TOP**标志并在开始活动 B 时完成活动。

当我使用 CLEAR_TOP 标志从 ActivityA 移动到 ActivityB 时，我认为 Activity 堆栈已被清除，然后在 ActivityB 中，我在 onKeyDown() 方法上完成 Activity，假设应用程序将被关闭，但它没有。为什么？

我也尝试在接收器中使用 FLAG_ACTIVITY_CLEAR_TASK 和 FLAG_ACTIVITY_NEW_TASK 但我不太了解这种机制。对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:57:58.693

实际上是 FLAG_ACTIVITY_CLEAR_TOP，如果它没有启动或者它作为 BackStack 上的第二个活动返回，则启动你的活动 B。要完成 Activity A，您可以在启动 Activity B 后调用 finish() 或在启动 A 时不添加历史标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:37:26.787

@JesusS：我怀疑您是否可以在向前过渡期间以这种方式完成您的活动。

考虑从`Activity A to Activity B`. 现在，如果你想杀死`Activity A`并想移动到`Activity B`然后调用`startActivity(intent);` （你从哪里移动`activity A to B`）没有任何关于意图的标志，然后是`finish()`on `activity A`。

根据我的理解，您`Intent.FLAG_ACTIVITY_CLEAR_TOP`只能在向后转换期间使用，即当您已经在堆栈上拥有该活动时。

考虑以下场景：

```
A --> B --> C --> D 
```

现在，如果您想通过清除您可以参加的活动从活动 D 移回活动`Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP`A。

结果是活动 D、C、B(LIFO) 将从堆栈中删除，并`activity A`通过调用**`onResume()`**活动 A的恢复来恢复。

# sharepoint - 使用免费服务器的 Sharepoint

> ID：12562468
> 
> 赞同：-5
> 
> 时间：2012-09-24T09:43:48.760
> 
> 标签：sharepoint, sharepoint-designer

我必须查看 Microsoft Sharepoint Designer，我已经安装了 Designer，但没有组装 Microsoft Sharepoint Server 的所有依赖项（windows 2008 server 64、sql server 等...）我问的是 Microsoft（或某人）有一个免费站点为我们提供安装的 Microsoft Sharepoint Server 以测试其上的设计器，也许存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:51:19.410

看看虚拟实验室：

[http://msdn.microsoft.com/en-us/cc707678.aspx](http://msdn.microsoft.com/en-us/cc707678.aspx)

或下载已安装所有内容的预配置虚拟机：

[http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=27417](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=27417)

但我怀疑你的实际问题的答案是否定的。Sharepoint 为外部许可花费了很多钱，任何人，甚至是微软，都不太可能为你打开一个 sharepoint 服务器，尤其是当他们赠送虚拟机时。再加上黑客等给下一个用户带来的所有危险。启动虚拟机。

# session - 如何设置视图超时？

> ID：12562469
> 
> 赞同：10
> 
> 时间：2012-09-24T09:43:52.197
> 
> 标签：session, jsf-2, view, timeout

在 JBoss 7.1.1 上的**JSF2**项目中，我们定义了一个会话超时，`web.xml`它工作得很好。

但是，有时我们会遇到视图过期，即使会话仍然存在，也会导致类似这样的错误：

```
javax.faces.application.ViewExpiredException: viewId:/... - View /... could 
not be restored. 
```

我们可以在哪里**设置视图超时**，就像我们为会话所做的那样？还是视图过期是由其他原因引起的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T11:58:28.103

另一个原因`ViewExpiredException`是会话中创建了*太多的逻辑视图。*默认限制是特定于 JSF 实现的，特定视图上的每个同步 GET 请求基本上都会创建一个新视图。因此，例如，当您使用 Mojarra（默认限制为 15）并启动浏览器会话并在 16 个不同选项卡中打开相同视图，然后在第一个选项卡中提交表单时，您也可能会遇到此异常. 该限制可使用 JSF 实现特定的上下文参数进行配置，该参数[`com.sun.faces.numberOfLogicalViews`](https://wikis.oracle.com/display/GlassFish/JavaServerFacesRI#JavaServerFacesRI-Whatcontextparametersareavailableandwhatdotheydo?)适用于 Mojarra 和[`org.apache.myfaces.NUMBER_OF_VIEWS_IN_SESSION`](http://wiki.apache.org/myfaces/Performance)MyFaces（默认为 20）。

然而，这是一个非常罕见的现实世界问题。如果您的 web 应用程序确实设计为以这种方式使用（例如，邀请在多个选项卡中打开的社交/社区站点，例如讨论论坛或问答），那么您可能会考虑使用客户端状态保存来代替。

### 也可以看看：

*   [javax.faces.application.ViewExpiredException：无法恢复视图](https://stackoverflow.com/questions/3642919/javax-faces-application-viewexpiredexception-view-could-not-be-restored/3642969#3642969)
*   [com.sun.faces.numberOfViewsInSession 与 com.sun.faces.numberOfLogicalViews](https://stackoverflow.com/questions/4105439/com-sun-faces-numberofviewsinsession-vs-com-sun-faces-numberoflogicalviews/16050424#16050424)

# php - 使用 ImageMagick 将 PDF 转换为 PNG 或 JPEG 非常慢

> ID：12562471
> 
> 赞同：3
> 
> 时间：2012-09-24T09:44:01.143
> 
> 标签：php, imagemagick, image-conversion

我有一个使用 PHP 和 ImageMagick 的 PDF 到 PNG 转换脚本，但我遇到了转换速度的问题。

我知道它可以工作，因为对于非常小的 PDF，转换所需的时间并没有那么长，但是对于 250kb 的文件（实际上仍然没有那么大），转换需要超过 20 分钟。

这是PHP：

```
//***** GET PATH TO IMAGEMAGICK *****
$path_to_imagemagick = trim(`which convert`);

//***** PATH TO PDF TO CONVERT *****
$path_to_pdf = getcwd() . "/pdf/myfile.pdf[0]";

//***** PATH TO OUTPUT TO *****
$output_path = getcwd() . "/pdfimage/test_converted.png";

@exec($path_to_imagemagick . " -density 72 -quality 60 -resize 150x " . $path_to_pdf . " " . $output_path); 
```

我可以更改任何设置以加快速度吗？

如果有帮助，图像不需要是 PNG。如果 JPEG 会更快，我很乐意这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T21:53:05.500

**ImageMagick 本身根本**无法将 PDF 转换为光栅图像。

ImageMagick 使用*委托*来完成这项工作：该委托是*Ghostscript*。如果您没有在与 ImageMagick 相同的系统上安装 Ghostscript，则 PDF 转换`convert`将不起作用。

为了提高速度，不要使用 ImageMagick 进行 PDF -> 光栅图像转换。而是直接使用 Ghostscript（也可以通过 PHP）。

JPEG 输出的命令行：

```
gs                                 \
  -o ./pdfimage/test_converted.jpg \
  -sDEVICE=jpeg                    \
  -dJPEGQ=60                       \
  -r72                             \
  -dLastPage=1                     \
   pdf/myfile.pdf 
```

PNG输出的命令行：

```
gs                                 \
  -o ./pdfimage/test_converted.png \
  -sDEVICE=pngalpha                \
  -dLastPage=1                     \
  -r72                             \
   pdf/myfile.pdf 
```

这两个命令都将为您提供未缩放的输出。

要缩小输出，您可以使用类似的东西

```
gs                                 \
  -o ./pdfimage/test_converted.png \
  -sDEVICE=pngalpha                \
  -dLastPage=1                     \
  -r72                             \
  -dDEVICEWIDTHPOINTS=150          \
  -dDEVICEHEIGHTPOINTS=150         \
  -dPDFFitPage                     \
   pdf/myfile.pdf 
```

**Also please note:** You used a `-quality 60` setting for your PNG outputting command. But `-quality` for JPEG and `-quality` for PNG output do have a completely different meaning with ImageMagick (and you may not be aware of it). See also [**this answer**](https://stackoverflow.com/a/12046542/359307) for some details about this.

# java - 将jsp项目文件夹放在tomcat中的哪个位置进行托管？

> ID：12562473
> 
> 赞同：2
> 
> 时间：2012-09-24T09:44:16.143
> 
> 标签：java, jsp, tomcat6, host

我现在正在使用 JSP 并为此使用 tomcat Apache。我的问题是，当我创建一个 JSP 页面并将其放入 tomcat 的根目录时，它工作正常。但现在我有一个项目包含一些有用的 jars 和其他java类，那么如何将整个项目目录放在tomcat中。

我已将其放在 web 应用程序目录中，但它给了我如下错误

```
The requested resource (/dailymotion-cloudkey-java-73f6f35/examples/upload.jsp) is not available. 
```

我正在提供我的网络应用程序文件夹的快照，我将此文件夹名称设置为 dailymotion-cloudkey-java-73f6f35

![在此处输入图像描述](../Images/cf5a5869be0bb9cc64d3e89a656a3a85.png)

我知道在将 dailymotion-cloudkey-java-73f6f35 目录放入 tomcat 时我做错了。但我在这方面是全新的，所以我找不到所以谁能告诉我

我的项目的树结构 ![在此处输入图像描述](../Images/35690fd5426d1d99392028927b7b57ba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:01:56.590

将它放在任何地方，但将您的 webapp 的上下文文件放到 TOMCAT_HOME/conf/Catalina/localhost 中，该文件指向带有 docbase 属性的 webapps 目录。[在此处](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)阅读详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:08:22.080

我认为dailymotion-cloudkey-java-73f6f35，没有带有web.xml 文件的WEB-INF 文件夹。由于它无法找到资源。

或者

您可以将 dailymotion-cloudkey-java-73f6f35 项目目录复制到 ROOT 文件夹，然后尝试使用相同的 URL。

# c++ - 如何获取所有进程 ID？

> ID：12562477
> 
> 赞同：1
> 
> 时间：2012-09-24T09:44:24.220
> 
> 标签：c++, windows, visual-c++

> **可能重复：**
> [将显示正在运行的进程的 Windows API](https://stackoverflow.com/questions/4593493/windows-apis-which-will-show-the-running-processes)

![进程黑客中的所有进程ID](../Images/2fd0a2b00c4efa5361fafae690817036.png)

如何获取 iexplorer.exe 的所有进程的进程 ID？`getcurrentprocessid()`当我在 iexplorer.exe 进程中注入我的 DLL 时，正在获取父进程 ID。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:28:40.933

最好的方法是枚举系统上的所有进程，然后选择那些是 IE 的。有几种简单的方法可以获取有关系统上运行的所有进程的信息：

1.  [EnumProcesses](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682629%28v=vs.85%29.aspx)，来自 PSAPI。这可能是最简单的，但没有提供太多信息；您需要使用其他 API 来收集您需要的信息 (OpenProcess / [GetModuleFileNameEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683198%28v=vs.85%29.aspx) )。
2.  [CreateToolhelp32Snapshot](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682489%28v=vs.85%29.aspx)（然后是[Process32First](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684834%28v=vs.85%29.aspx)和[Process32Next](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684836%28v=vs.85%29.aspx)），来自 TlHelp32.h。使用起来非常简单，并且会自动为您提供 EXE 名称，因此您可以轻松判断它是否为 iexplorer.exe。
3.  WMI，正如@nogard 已经提到的那样。

# c# - 如何比较 OracleTimeStamps

> ID：12562487
> 
> 赞同：0
> 
> 时间：2012-09-24T09:44:52.603
> 
> 标签：c#, oracle, timestamp, compare

我有两个代表两个 Oracle 时间戳的字节 []（例如 { 0, 0, 0, 0, 52, 246, 141, 6 }）。我怎么知道哪个更老？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:48:10.017

将二进制时间戳转换为`Int64`，然后比较相应的`long`值：

```
var value = new byte[] { 0, 0, 0, 0, 52, 246, 141, 6 };
long timestamp = BitConverter.ToInt64(value, 0); 
```

值越大`long`，时间戳越近。我没有使用过 Oracle，但我猜这代表了自[Epoch](http://en.wikipedia.org/wiki/Epoch_%28reference_date%29)以来的滴答数。

# php - 如何在 Javascript 或 php 中将日期设置为 topresent 选项？

> ID：12562491
> 
> 赞同：-2
> 
> 时间：2012-09-24T09:45:13.520
> 
> 标签：php, javascript, jquery

请帮助我设置日期选项以在 php、javascript、jquery 或 ajax 中显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:48:38.720

在 php 中使用 date('Ymd')，在 js 中使用 new Date()。

# wpf - 将边框样式绑定到当前用户控件

> ID：12562493
> 
> 赞同：0
> 
> 时间：2012-09-24T09:45:19.777
> 
> 标签：wpf, binding, border

我正在开发一个向导应用程序，它有一个带有 5 个边框的侧边菜单和一个包含应用程序屏幕（用户控件）的内容控件。

边框样式应该向用户指示他在向导步骤中的位置。

我写了 2 个边框样式 - 第一个是默认样式，默认应用于所有边框。第二个（isFoucusedStyle）需要应用适合当前屏幕的边框。

例如当向导显示第一个屏幕时：第一个边框需要使用isFoucusedStyle，其他的需要使用默认样式。当用户继续下一个屏幕时，第一个边框需要恢复默认样式，第二个边框现在将应用 isFoucusedStyle。

我通过以下方式在资源下的 mainWindow 中通过 xaml 创建页面实例：

```
 xmlns:view="clr-namespace:App.View"
    xmlns:ViewModel="clr-namespace:App.ViewModel"

<Window.Resources>
    <DataTemplate DataType="{x:Type ViewModel:OpeningViewModel}">
        <view:OpeningView/>
   </DataTemplate>

    <DataTemplate DataType="{x:Type ViewModel:PersonalDataViewModel}">
        <view:PersonalDataView/>
    </DataTemplate>

    <DataTemplate DataType="{x:Type ViewModel:BusinessDataViewModel}">
        <view:BusinessDataView/>
    </DataTemplate>

    <DataTemplate DataType="{x:Type ViewModel:BusinessDataViewModel}">
        <view:BusinessDataView/>
    </DataTemplate> 
```

我还有一个属性——绑定到 ContentControl 的 CurrentPage——当用户单击“下一页按钮”时 CurrentPage 更新并且 ContentControl 切换 UserControl。

边框与用户控件之间没有任何绑定，在我目前的状态下，边框只是没有任何功能的视觉图形。

我该如何实施？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:19:48.567

首先，我强烈建议您将您的向导基于 NavigationWindow（或包含 NavigationFrame），这将免费为您提供所有的前后导航，如果您愿意，您可以随时重新设置 NavigationWindow 的样式以匹配更多的向导，例如界面（请参阅[WPF 向导](http://alski.net/post/2012/01/11/WPF-Wizards.aspx)）。NavigationWindow/Frame 还为您提供了处理页面之间转换的 Navigate() 方法。

为了处理导航链接（您的五个侧面菜单项），我将每个链接绑定到一个视图级别的 ICommand，该命令测试我们是否需要在 CanExecute 中的正确页面上。设置边界只是`{Binding CanExecute, Converter={BoolToColorConverter}}`.

在你的情况下，你可以简单地做同样的事情。设置您的命令以检查我们是否有正确的 CurrentPage，并使用转换器按上述方式绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:11:24.987

I took the "isFoucusedStyle" and config it to baseOn defultstyle. I added triger to isFoucusedStyle which turns on when Border.Focusable is true. I Created a converter which has access to current page number. At every border I bounded focusable property to the converter and sent it "converter parameter" with the suitible page number (page number which represented by current border) The converter is checking for equility between currentPageNumber to converterParameter and returns boolean result. The result is turning on (or not) the trigger and set the needed border style. Thanks anyway.

# jquery - 询问用户是否想查看页面的移动版本，并相应地重定向

> ID：12562495
> 
> 赞同：0
> 
> 时间：2012-09-24T09:45:21.270
> 
> 标签：jquery, wordpress, redirect, mobile

我只需要了解如何检测用户是否在移动设备上，并询问他们是否想查看移动设备而不是常规站点，并进行相应的重定向。有非 PHP 的解决方案吗？还是 WP 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:16:56.113

阅读以前的问题：

使用 Jquery 和 PHP 检测移动设备：

[在 jQuery 中检测移动设备的最佳方法是什么？](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)

[自动检测移动浏览器（通过用户代理？）](https://stackoverflow.com/questions/1005153/auto-detect-mobile-browser-via-user-agent)

或者使用这些东西来检查用户是否使用移动设备，你可以显示重定向它的对话框：

[http://barisaydinoglu.github.com/Detectizr/](http://barisaydinoglu.github.com/Detectizr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:50:09.727

如今，响应式设计（[此处](http://netuncovered.com/2011/05/reactive-web-design/)和[此处](http://www.saraproft.net/blog/?p=4502)）是首选路径。
虽然不是直接回答你的问题，但这将是我要走的路。

**编辑：**
如果您想在 Javascript/jQuery 中执行此操作，您可以使用[Modernizr](http://www.modernizr.com/)进行功能检测，而不是固定浏览器检测。

如果您想要严格的浏览器检测，您可以检查[UserAgent](http://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/)并采取适当的措施。

# javascript - 使用 jQuery 从 HTML 中删除表格

> ID：12562497
> 
> 赞同：0
> 
> 时间：2012-09-24T09:45:30.683
> 
> 标签：javascript, jquery, html, dom

我有很多 HTML 块进入我的应用程序，我无法控制。它们包含用于布局的表格，我想摆脱这些表格。它们可以是复杂的和嵌套的。

我想要的基本上是从表格中提取 HTML 内容，以便我可以将其注入到应用程序中的其他模板中。

我只能使用 jQuery 或纯 JS，没有服务器端的诡计。

有谁知道一个很好的 jQuery 插件可以完成这项工作？

Littm - 我的意思是从 td 标签中提取内容。完成后，我不想在代码中留下任何表格的痕迹。谢谢！

以下是相关 HTML 类型的示例。这一切都是通过 XHR 来自一些古老的应用程序，所以我无法控制标记。我想要的是完全摆脱表格，只留下 HTML 或其他文本内容的其余部分。

```
<table>
    <tr><td colspan="4"></td></tr>
    <tr>
        <td width="1%"></td>
        <td width="40%" style="padding-left: 15px">
        <p>Your access level:  <span>Total</span></p>
        </td>
        <td width="5%">
            <table><tr><td><b>Please note</b></td></tr></table>
        </td>
        <td width="45%" style="padding-left: 6px" valign="top"><p>your account</p></td>
    </tr>
    <tr><td colspan="4">&nbsp;</td></tr>
    <tr>
        <td width="1%"></td>
        <td width="40%" style="padding-left: 15px">
            <table>
                <tr>
                    <td align="right">Sort Code:  </td>
                    <td align="center"><strong>22-98-21</strong></td>
                </tr>
                <tr>
                    <td align="right">Account Number:  </td>
                    <td><strong>1234959</strong></td>
                </tr>
            </table>
        </td>
        <td width="5%"></td>
        <td width="45%" style="padding-left: 6px">Your account details for</td>
    </tr>
</table> 
```

我试过了;

```
var data = ""
$("td").each(function(){
  data += $(this).html()
});
$("article").append(data);
$("table").remove(); 
```

但是 var`data`仍然包含嵌套的 td 标签。我不是 JS 专家，所以我不确定还有什么可以尝试的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:28:27.367

假设您有 X 个表。

为了从中提取所有内容信息，您可以尝试以下操作：

```
// Array containing all the tables' contents
var content = [];

// For each table...
$("table").each(function() {

    // Variable for a table
    var tb = [];
    $(this).find('tr').each(function() {

        // Variable for a row
        var tr = [];

        $(this).find('td').each(function() {
            // We push <td> 's content
            tr.push($(this).html());
        });

        // We push the row's content            
        tb.push(tr);
    });
    // We push the table's content
    content.push(tb);
}); 
```

例如，如果我们有以下 2 个表：

```
<table>
    <tr>
        <td>1</td>
        <td>2</td>
    </tr>
    <tr>
        <td>A</td>
    </tr>
</table>

<table>
    <tr>
        <td>r1</td>
        <td>r2</td>
        <td>r3</td>
    </tr>
    <tr>
        <td>rA</td>
        <td>rB</td>
    </tr>
    <tr>
        <td>rP</td>
    </tr>
</table> 
```

数组`content`将是这样的：

```
content = [ [ [1, 2], [A] ] ] , [ [r1, r2, r3], [rA, rB], [rP] ] ]
            \_______________/   \______________________________/
                 1st table                2nd table 
```

如果你想访问第一个表，你只需要访问`content[0]`例如。

* * *

现在，假设您有一个带有和 id 的 DIV，`my_div`并且您想在其中输出一些表格内容。

例如，假设您只想拥有第一张桌子。然后，你会做这样的事情：

```
// Note: content[0] = [[1, 2], [A]]

var to_print = "<table>";

for(var i=0; i<content[0].length; i++) {
    to_print += "<tr>";     
    for(var j=0; j<content[0][i].length; j++)       
        to_print += "<td>"+ content[0][i][j] +"</td>";              

    to_print += "</tr>";        
}

to_print += "</table>";

$("#my_div").html(to_print); 
```

这会给你这样的东西：

```
<div id="my_div">
    <table>
        <tr>
            <td>1</td>
            <td>2</td>
        </tr>
        <tr>
            <td>A</td>
        </tr>
    </table>
</div> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:48:40.967

**编辑：**您应该创建一个递归函数来做到这一点。

只需创建将“td”作为值的函数：

```
function searchTexts(td) {
     if (td.find("td")) {
           searchTexts(td.find("td"));
     }
     td.each(function(){
         data += $(this).html()
         $(this).remove(); // remove it for avoiding duplicates
     });
} 
```

然后调用它，将 jQuery 对象传递给函数。

# java - 获取应用程序路径以创建新文件

> ID：12562500
> 
> 赞同：4
> 
> 时间：2012-09-24T09:45:49.617
> 
> 标签：java, eclipse, path

如何在字符串变量 LogPath 中获取项目的应用程序路径。LogPath 稍后用于创建项目的日志文件。我正在使用 Eclipse 进行编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T09:48:52.423

我会用

```
String logPath = new File(".").getAbsolutePath(); 
```

..开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T10:23:12.950

采用

```
String AbsolutePath = new File(".").getAbsolutePath(); 
```

说明：`File(".")`表示当前目录，`getAbsoultePath()`返回当前目录的绝对路径。

希望能帮助到你 ：-）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:48:28.853

此调用：`new File(".").getAbsolutePath()`为您提供应用程序的当前工作目录。我希望这回答了你的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T09:49:20.240

您使用哪种语言？

爪哇：

```
File directory = new File (".");
System.out.println ("Current directory's canonical path: " +     directory.getCanonicalPath());
System.out.println ("Current directory's absolute  path: " + directory.getAbsolutePath()); 
```

# jquery - 关于 jQuery 的 .click() 的一般问题

> ID：12562501
> 
> 赞同：1
> 
> 时间：2012-09-24T09:45:51.213
> 
> 标签：jquery

我目前正在学习Jquery的api。我了解 Jquery 具有悬停功能，如下所示：

```
hover( handlerIn(eventObject) , handlerOut(eventObject)) 
```

使用第二个`handlerOut(eventObject)`，我可以处理未悬停时折叠菜单树等事件。

然后我查看了 click 函数的 api，如下所示：

```
.click( [eventData], handler(eventObject) ) 
```

类似于我在之前的描述中想要实现的，我有一个菜单树。单击列表项时，它将下拉到子菜单。我的问题是当我点击菜单外或点击其他项目时如何折叠这个子菜单树？

最后，我使用 jquery-1.2.6.min.js 来实现这一点。

我的 jQuery：

```
 $("li.p1:has(ul)").click(function(event){
    if (this == event.target) {
    var current = this;
    $("#nav li:has(ul)").each(function() {
        if (this != current) $(this).children().slideUp(400);
    });
        $("ul:first", $(this)).slideToggle(400);
    }
    },function(){$(this).children().slideUp(400);}); 
```

我的 HTML：

```
 <div id="wrap">
    <ul id="nav">
    <li class="p1 down">Manage Subject
        <ul>
            <li><a href="#url">Add Subject</a></li>
            <li><a href="#url">Edit Subject</a></li>
            <li><a href="#url">Delete Subject</a></li>
            <li><a href="#url">Export Subject</a></li>
        </ul>
    </li>
    <li><a href="#url">Manual Crawling</a></li>
    <li><a href="#url">Crawl Interval</a></li>
    <li><a href="#url">Search Parameter</a></li>
    </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:05:20.987

我能想到的一种方法是为“body”元素创建一个事件处理程序。

```
$('body').click(function(event){
   //Needs validation.
   if ($('li.p1:has(ul)') != event.target) {
        $("#nav li:has(ul)").each(function() {
            if (this != current) $(this).children().slideUp(400);
        });
    }
}); 
```

目的是为“body”元素添加一个事件处理程序并探测是否单击了预期的元素。如果没有，则向上滑动。我认为同样可以以更好的方式完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:59:22.380

以下代码将在单击 div 时将 div 的颜色**设置**`"target"`为**红色**。
**单击其他任何地方**将使`"target"`div 的颜色再次变**回黑色**。

如果我们在`"target"`div 处于**黑色状态**（*未打开*）时单击 div 外部，则不会发生任何事情。
所以我们不会在菜单已经关闭时关闭它*。*

```
var counter = 0;
$( "html" ).live('click', function(event){    
    var myID = event.target.id;
    if (myID && myID == "target") {
        $('#'+myID).css('color', 'red');
        counter++;
    }
    else { 
         if(counter > 0){ 
             $("#target").css('color', 'black');
         }
         counter = 0;
     }
}); 
```

* * *

编辑：添加[http://jsfiddle.net/PQunY/](http://jsfiddle.net/PQunY/)来玩......

# objective-c - NSParagraphStyle 行距被忽略

> ID：12562506
> 
> 赞同：24
> 
> 时间：2012-09-24T09:46:17.480
> 
> 标签：objective-c, uitextview, ios6, nsattributedstring

一个失败的简单测试：创建一个只有一个子视图（UITextView）的新项目并将以下内容放入：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
    paragraphStyle.lineHeightMultiple = 50.f;
    paragraphStyle.lineSpacing = 100.f;
    paragraphStyle.minimumLineHeight = 200.f;
    paragraphStyle.maximumLineHeight = 500.f;

    UIFont *font = [UIFont fontWithName:@"AmericanTypewriter" size:24.f];

    self.textView.attributedText = [[NSAttributedString alloc] initWithString:
    @"This is a test.\n Will I pass?" attributes:
    @{NSParagraphStyleAttributeName : paragraphStyle, NSFontAttributeName : font}];
} 
```

行间距与该属性不存在时相同。有什么东西可以成功吗？我输入荒谬的数字只是为了表明它不会改变......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-16T16:48:10.210

这是 NSHTMLWriter 中的一个错误，它是 UITextView 用来将属性文本转换为 HTML 的私有类。在内部，它通过 UIWebDocumentView 显示此 HTML。在我的文章中阅读更多关于 UITextView 内部工作的信息：http: [//www.cocoanetics.com/2012/12/uitextview-caught-with-trousers-down/](http://www.cocoanetics.com/2012/12/uitextview-caught-with-trousers-down/)

问题来自于字体 CSS 速记中一个容易被忽略的专业。如果您使用字体简写指定像素大小，那么这将同时设置字体大小和行高。由于 NSHTMLWriter 将字体放在 line-height 之后，这会导致 line-height 被字体大小抵消。

请参阅此处了解我的雷达，其中包括对错误的完整分析：http: [//www.cocoanetics.com/2012/12/radar-uitextview-ignores-minimummaximum-line-height-in-attributed-string/](http://www.cocoanetics.com/2012/12/radar-uitextview-ignores-minimummaximum-line-height-in-attributed-string/)

我建议你也提交一份错误报告并提及我的 Radar #12863734。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-06T14:32:38.413

我不知道这是否足以满足您的目的，但我可以通过设置最小和最大行高来调整行距。此外，为了使用字体，我将其放入`font`文本视图的属性中，而不是将其作为`NSFontAttributeName`属性字典中的值传递。（也许这部分没有（很好）记录在案？）

### 关于你的属性

`lineSpacing`是从行的底部到上线的底部计算的，并且该空间被限制为 和 之间的`minimumLineHeight`值`miximumLineHeight`。我想说的是，您的属性中的某些值可能正在*取消*或*覆盖*其他值。

此外，如果您只需要调整行之间的间距，您可能不需要使用`paragraphStyle.lineHeightMultiple`:)

### 编码

这对我有用：

```
NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
paragraphStyle.minimumLineHeight = 35.f;
paragraphStyle.maximumLineHeight = 35.f;

UIFont *font = [UIFont fontWithName:@"AmericanTypewriter" size:18.f];
NSString *string = @"This is a test.\nWill I pass?\n日本語のもじもあるEnglish\nEnglish y Español";
NSDictionary *attributtes = @{
    NSParagraphStyleAttributeName : paragraphStyle,
};
self.textView.font = font;
self.textView.attributedText = [[NSAttributedString alloc] initWithString:string
                                 attributes:attributtes]; 
```

[![](../Images/12d87a67cea40fd598d7530f5b6ac701.png)](https://i.stack.imgur.com/BNqME.png)

### 补充笔记

似乎有日语/中文的情况，可能还有其他字符与同一行中的字母字符混合。它将使该线具有更大的*领先地位*，以解决您需要像我一样设置最小和最大线高的问题。渲染我的示例没有属性时，您可以看到问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-05T09:22:37.830

设置 maximumLineHeight 似乎为我解决了这个问题；

```
CGFloat fontSize = 22.f;
titleLabel.font = [UIFont boldSystemFontOfSize:fontSize];
NSMutableParagraphStyle *paragraphStyle = [[[NSMutableParagraphStyle  alloc] init] autorelease];
paragraphStyle.maximumLineHeight = fontSize/2;
titleLabel.attributedText = [[[NSAttributedString alloc]
                              initWithString:@"This is a test.\nWill I pass?"
                              attributes: @{ NSParagraphStyleAttributeName : paragraphStyle,
                                             NSFontAttributeName : titleLabel.font}]
                             autorelease]; 
```

![重叠线](../Images/e6b72c13a1952950af2f3c6bb9b9a706.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-24T09:57:28.140

对于这个特定的字符串，您需要设置`paragraphSpacing`。是什么`lineSpacing`，我相信它在 iOS 上尚不支持。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-15T14:29:37.320

正如 nacho4d 回答的那样，在**iOS 6**中，您需要使用**minimumLineHeight**和**maximumLineHeight并直接在****UITextView**中设置字体，而不是在**NSAttributedString**中，因为在这种情况下，行高将被覆盖。

请注意，当您在 UITextView 中设置字体时，**UITextView****的**“**可编辑”**属性应设置为**YES**，否则**属性文本**不会受到影响。

 ******这些问题仅存在于**iOS 6**中。在**iOS 7**及更高版本中一切正常；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-23T18:57:27.893

就我而言，段落样式都不起作用。修复是在对标签进行任何框架调整之后在标签上设置属性文本。:)******

# wordpress - Wordpress 无法使用 c# 通过 wp.uploadFile 上传图片

> ID：12562508
> 
> 赞同：3
> 
> 时间：2012-09-24T09:46:26.953
> 
> 标签：wordpress, file-upload, xml-rpc

我正在开发一个.net 程序以通过 xml-rpc.net 与 wordperss 进行通信。我发现如果我试图通过“wp.uploadFile”上传一个很大的图像，wordpress 会返回一个错误，说“解析错误（-32700），格式不正确”。我尝试了 Windows Live Write 来写一篇文章。但是，如果我选择链接源图片，我会得到一个错误，说我无法上传图片，并建议通过 ftp 上传图片。

我找到了这篇文章：图片上传失败

我认为在读取大请求不包含换行时可能仍然存在一些问题，所以我自己构建了 xml，并根据 RFC 822 每 76 个字符添加一个换行（'\r\n'）。但问题是仍然在那里，换句话说，我不能上传任何大的图像。我的xml文件如下：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<methodCall>
  <methodName>wp.uploadFile</methodName>
  <params>
    <param>
      <value>
        <i4>0</i4>
      </value>
    </param>
    <param>
      <value>
        <string>myname</string>
      </value>
    </param>
    <param>
      <value>
        <string>mypwd</string>
      </value>
    </param>
    <param>
      <value>
        <struct>
          <member>
            <name>name</name>
            <value>
              <string>MS-wedge.jpg</string>
            </value>
          </member>
          <member>
            <name>type</name>
            <value>
              <string>image/jpeg</string>
            </value>
          </member>
          <member>
            <name>bits</name>
            <value>
              <base64>
/9j/4AAQSkZJRgABAQEBLAEsAAD7gAOQWRvYmUAZAAAAAAB+EVpkV4aWYAAE1NACoAAAAIABAB
AAADAAAAARIAAAABAQADAAAAAQwAAAABAgADAAAAAwAAAM4BBgADAAAAAQACAAABDwACAAAAEgAA
<!-- ... pending other data -->
</base64>
            </value>
          </member>
          <member>
            <name>overwrite</name>
            <value>
              <boolean>false</boolean>
            </value>
          </member>
        </struct>
      </value>
    </param>
  </params>
</methodCall> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T13:54:44.187

我使用 WordPress XML-RPC 已经 3 年多了。我附上了一个上传请求示例，可以作为您的参考。我希望这可以帮助你。

```
<?xml version="1.0"?>
    <methodCall><methodName>wp.uploadFile</methodName>
        <params>
            <param>
                <value><string>1</string></value>
            </param>
        <param>
                <value><string>username</string></value>
        </param>
        <param>
                <value><string>password</string></value>
        </param>
        <param>
                <value><struct>
                    <member>
                        <name>name</name>
                        <value><string>Photo Jun 27, 2013, 3:08 PM.jpg</string></value>
                    </member>
                    <member><name>type</name><value><string>image/jpeg</string></value>
                    </member>
                    <member><name>bits</name><value><base64>/9j/4AAQSkZJRgABAQAAAQABAAD/4QBYRXhpZgAATU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQA
<!-- ... pending other data -->
</base64></value></member>
                    <member><name>overwrite</name><value><string>false</string></value></member></struct></value></param></params></methodCall> 
```

# php - 使用 get 方法从我的 sql 数据库中获取值

> ID：12562511
> 
> 赞同：-1
> 
> 时间：2012-09-24T09:46:54.037
> 
> 标签：php, mysql

我正在使用 get 方法从 mysql 数据库中获取值我从 url 传递survey_id 和 question_id

如下 [http://myserver.com/emrapp/surveyAnswersScreenOne.php?survey_id=1,question_id=1](http://myserver.com/emrapp/surveyAnswersScreenOne.php?survey_id=1,question_id=1)

但它给出了错误

下面给出了我的 php 代码用于获取

```
 $query = mysql_query("SELECT * from survey_Answers where survey_Id='".$survey_id."' AND question_Id='".$question_id"' ");

     $rows = array();

     while($row = mysql_fetch_assoc($query)) {

     $rows[] = $row;
     }

     echo json_encode($rows); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:50:35.627

此行有错误，此：

```
$question_id"' " 
```

应该

```
$question_id . "'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:50:14.097

您应该在 url 中用 & not 分隔 get 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:50:21.900

那是因为你应该在 url 参数之间使用`&`而不是`,`

`http://myserver.com/emrapp/surveyAnswersScreenOne.php?survey_id=1&question_id=1`

```
$survey_id = mysql_real_escape_string($_GET['survey_id']);
$question_id = mysql_real_escape_string($_GET['question_id']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:50:26.527

GET 参数通常用`&`not分隔`,`。所以你的链接应该看起来更像这样：

[http://myserver.com/emrapp/surveyAnswersScreenOne.php?survey_id=1&question_id=1](http://myserver.com/emrapp/surveyAnswersScreenOne.php?survey_id=1&question_id=1)

另外，请注意 GET 变量不会自动转换为 PHP 变量。您需要从`$_GET`数组中拉出它们：

`$survey_id = $_GET['survey_id']`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T09:50:28.357

您没有传递在 url 中分隔的值逗号。您在 url 中使用 &

[http://myserver.com/emrapp/surveyAnswersScreenOne.php?survey_id=1&question_id=1](http://myserver.com/emrapp/surveyAnswersScreenOne.php?survey_id=1&question_id=1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T09:51:05.560

```
 $query = mysql_query("SELECT * from survey_Answers where survey_Id='".$survey_id."' AND question_Id='".$question_id"'"); 
```

您忘记了在之后连接字符串的要点`$question_id`->这应该可以解决您的问题：

```
$query = mysql_query("SELECT * from survey_Answers where survey_Id='".$survey_id."' AND question_Id='".$question_id."'"); 
```

无论如何，还要考虑清理您的 url-inputs -> [http://xkcd.com/327/](http://xkcd.com/327/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T09:51:32.123

```
 $query = mysql_query("SELECT * from survey_Answers where survey_Id='".$survey_id."' AND question_Id='".$question_id."' "); 
```

少了一个点！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-24T09:52:01.260

URL 和 QUERY 都是错误的

```
http://myserver.com/emrapp/surveyAnswersScreenOne.php?survey_id=1&question_id=1 
```

和

```
$question_id . "' " 
```

# android - 安卓 nmea GPS

> ID：12562516
> 
> 赞同：0
> 
> 时间：2012-09-24T09:47:16.077
> 
> 标签：android, gps, locationmanager, nmea

您好正在使用带有 Nmea 侦听器的 locationManager。一切似乎都很好，但问题就在这里。

我在我的 logcat 中注销了消息，我注意到一些非常奇怪的东西......消息似乎损坏或缺少信息

来自 logcat 的示例。

```
09-24 11:41:36.899: D/BLUE(3153): LocationManager $GPGGA,094138.0,,,,,0,,,,,,,,*7F
09-24 11:41:37.899: D/BLUE(3153): LocationManager $GPGGA,094139.0,,,,,0,,,,,,,,*7E
09-24 11:41:38.899: D/BLUE(3153): LocationManager $GPGGA,094140.0,,,,,0,,,,,,,,*70
09-24 11:41:39.899: D/BLUE(3153): LocationManager $GPGGA,094141.0,,,,,0,,,,,,,,*71
09-24 11:41:40.899: D/BLUE(3153): LocationManager $GPGGA,,,,,,0,,,,,,,,*66
09-24 11:41:42.899: D/BLUE(3153): LocationManager $GPGGA,,,,,,0,,,,,,,,*66
09-24 11:41:43.899: D/BLUE(3153): LocationManager $GPGGA,,,,,,0,,,,,,,,*66
09-24 11:41:44.899: D/BLUE(3153): LocationManager $GPGGA,,,,,,0,,,,,,,,*66
09-24 11:41:45.909: D/BLUE(3153): LocationManager $GPGGA,,,,,,0,,,,,,,,*66 
```

我所知道的。GPGGA 的格式应该是这样的

```
$GPGGA,123519,4807.038,N,01131.000,E,1,08,0.9,545.4,M,46.9,M,,*47 
```

现在我尝试了其他类型，如 GLL 及其相同的问题。我也试过直接用蓝牙读取字节，但它是一样的。

有人对 Nmea 消息有类似的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:01:24.567

看起来 GPS 没有修复。你确定你有足够好的信号吗？请在户外开阔的天空下进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-12T18:08:29.307

肯定有信号，等1-2分钟数据就完成了

# java - zip4j 压缩java中的文件和文件夹

> ID：12562519
> 
> 赞同：0
> 
> 时间：2012-09-24T09:47:23.830
> 
> 标签：java, zip

我希望在 Java 中创建一个 zip 程序，其中的 zip 文件和文件夹可以说是这样的结构 -

*   文件夹一/
*   文件夹一/one.txt
*   文件夹一/二.mp3
*   文件夹一/三.jpg
*   文件夹二/
*   文件夹二/四.doc
*   文件夹二/五.rtf
*   文件夹二/文件夹三/
*   文件夹二/文件夹三/six.txt

我使用了 zip4j 开源，我在一个列表中收集了所有文件（带有绝对路径），然后将其提供给 zip，但它仅在 my.zip 中压缩文件 -

*   一个.txt
*   二.mp3
*   三.jpg
*   四.doc
*   五.rtf
*   六.txt

如何在压缩和解压缩时保留与之前在本地相同的结构。请建议是否有任何其他开源可以帮助我像其他 Windows zip 程序一样在相同结构的文件和文件夹中压缩/解压缩。

代码如下——

```
public class CreateZipWithOutputStreams {

    ArrayList filesToAdd = new ArrayList();

    public void CreateZipWithOutputStreams(String sAbsolutePath) {

        ZipOutputStream outputStream = null;
        InputStream inputStream = null;

        try {

            ArrayList arrLocal = exploredFolder(sAbsolutePath);

            outputStream = new ZipOutputStream(new FileOutputStream(new File("c:\\ZipTest\\CreateZipFileWithOutputStreams.zip")));

            ZipParameters parameters = new ZipParameters();

            parameters.setCompressionMethod(Zip4jConstants.COMP_DEFLATE);

            parameters.setCompressionLevel(Zip4jConstants.DEFLATE_LEVEL_NORMAL);

            parameters.setEncryptFiles(true);

            parameters.setEncryptionMethod(Zip4jConstants.ENC_METHOD_AES);

            parameters.setAesKeyStrength(Zip4jConstants.AES_STRENGTH_256);

            parameters.setPassword("neelam");

            for (int i = 0; i < arrLocal.size(); i++) {
                File file = (File) arrLocal.get(i);

                outputStream.putNextEntry(file, parameters);

                if (file.isDirectory()) {
                    outputStream.closeEntry();
                    continue;
                }

                inputStream = new FileInputStream(file);
                byte[] readBuff = new byte[4096];
                int readLen = -1;

                while ((readLen = inputStream.read(readBuff)) != -1) {
                    outputStream.write(readBuff, 0, readLen);
                }

                outputStream.closeEntry();

                inputStream.close();
            }

             outputStream.finish();

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (outputStream != null) {
                try {
                    outputStream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }

            if (inputStream != null) {
                try {
                    inputStream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    public ArrayList exploredFolder(String sAbsolutePath) {
        File[] sfiles;
        File fsSelectedPath = new File(sAbsolutePath);
        sfiles = fsSelectedPath.listFiles();
        if (sfiles == null) {
            return null;
        }
        for (int j = 0; j < sfiles.length; j++) {
            File f = sfiles[j];
            if (f.isDirectory() == true) {
                exploredFolder(f.getAbsolutePath());
            } else {
                filesToAdd.add(f);

            }
        }
        return filesToAdd;
    }

    public static void main(String[] args) {
        new CreateZipWithOutputStreams().CreateZipWithOutputStreams("c:\\ZipTest");
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:54:08.930

好的，所以首先附加的代码应该按原样工作，因为该`exploredFolder(String absolutePath)`方法返回“要添加的文件”，而该`CreateZipWithOutputStreams()`方法又使用该文件来创建单个分层（平面）zip文件。

需要做的是遍历各个文件夹并不断将它们添加到`ZipOutputStream`.

请通过下面的链接，您将找到代码片段和详细说明。

让我知道这是否有帮助！

[http://www.java-forums.org/blogs/java-io/973-how-work-zip-files-java.html](http://www.java-forums.org/blogs/java-io/973-how-work-zip-files-java.html)

# java - 推送我的应用程序时在 Openshift 中出错

> ID：12562520
> 
> 赞同：0
> 
> 时间：2012-09-24T09:47:24.407
> 
> 标签：java, git, openshift

在 OpenShift 中推送我的应用程序（已经使用 Tomcat 6 构建了 Java EE 应用程序）时出现了一些错误。

***服务器**：JBoss 应用服务器 7.1 **数据库**：MySQL 数据库 5.1*

*这是 Openshift 的 src 文件夹结构*

```
com
--simsystech
--Add.java (using apache log4j api || import org.apache.log4j.Logger)
--Edit.java (using csv reader api || import org.apache.log4j.Logger & import org.apache.log4j.Logger)
--Import.java (using csv reader api || import org.apache.log4j.Logger & import org.apache.log4j.Logger)
--Create.java
--Delete.java 
```

*webapp文件夹结构是*：

```
webapp
--css
--image
--images1
--jscript
--jsp(all my jsp pages are here)
--META-INF
--WEB-INF
--classes
--lib(JAR files are here:opencsv-2.3,log4j-1.2.9,javacsv) 
```

我的应用程序名称：simsystech，每当我写 cmd prompt-> git push 时，我都会收到如下错误：

```
a>remote: /var/lib/stickshift/38fe42fe1d8f469c90f496990182c478/app-root/runtime/re
po/src/main/java/com/simsystech/Delete.java:[3,23] error: package org.apache.lo
g4j does not exist

b>remote: /var/lib/stickshift/38fe42fe1d8f469c90f496990182c478/app-root/runtime/re
po/src/main/java/com/simsystech/Import.java:[92,2] error: cannot find symbol
remote: [ERROR] class Import

c>remote: [ERROR] class Export
remote: /var/lib/stickshift/38fe42fe1d8f469c90f496990182c478/app-root/runtime/re
po/src/main/java/com/simsystech/Edit.java:[20,20] error: cannot find symbol 
```

像这样的错误：“包 org.apache.lo g4j 不存在”很奇怪！:(

在openshift中部署它时我哪里出错了..？任何有关这方面的意见都将得到应用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:11:35.460

由于我们使用 Maven 构建您的项目，您需要确保在 Maven pom.xml 中正确引用了这些依赖项。pom.xml 是什么样的？

# ios - 在ios项目中使用boost框架和opencv时出现编译错误

> ID：12562521
> 
> 赞同：0
> 
> 时间：2012-09-24T09:47:27.323
> 
> 标签：ios, boost, compiler-errors

我需要在我的 iOS 项目中使用 boost 框架。我的第一个任务是为 Ios 工作获得动力。我尝试使用这个脚本

[http://goodliffe.blogspot.co.uk/2010/09/building-boost-framework-for-ios-iphone.html](http://goodliffe.blogspot.co.uk/2010/09/building-boost-framework-for-ios-iphone.html)

但由于 lipo 错误（？）而无法构建，并且无法弄清楚如何解决它。我寻找了一个预编译的框架，并在 github 上遇到了这个项目：

[https://github.com/danomatika/ofxLua](https://github.com/danomatika/ofxLua)

lib 部分包含一个 Ios 版本的 boost。所以我尝试在我的项目中使用它

但是现在当我构建我的项目时，我遇到了这些错误：

```
Undefined symbols for architecture i386:
  "vtable for boost::filesystem::detail::utf8_codecvt_facet", referenced from:
      (anonymous namespace)::path_locale() in boost(path.o)
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "_inflate", referenced from:
      MatlabIO::uncompressVariable(unsigned int&, unsigned int&, unsigned int&, std::vector<char, std::allocator<char> > const&) in MatlabIO.o
  "_inflateEnd", referenced from:
      MatlabIO::uncompressVariable(unsigned int&, unsigned int&, unsigned int&, std::vector<char, std::allocator<char> > const&) in MatlabIO.o
  "_inflateInit_", referenced from:
      MatlabIO::uncompressVariable(unsigned int&, unsigned int&, unsigned int&, std::vector<char, std::allocator<char> > const&) in MatlabIO.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我还想说明我安装了 boost 使用

```
sudo port install boost 
```

在我的 xcode 项目下，我没有链接到 /usr/local/include/boost/ 或类似的东西。似乎它正在使用不正确的架构进行编译。

有什么解决办法吗？也许框架不是为 Ios 编译的？或者我的项目没有引用正确的版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T03:53:44.043

您可以将 BOOST 1.57.0 与 ofxiOSBoost 静态库和头文件一起使用： [https ://github.com/danoli3/ofxiOSBoost](https://github.com/danoli3/ofxiOSBoost)

libc++ (c++11)、libstdc++ 的版本。

所有构建脚本都在 /scripts 文件夹中（更新的 Peter Goodliffe 脚本）

# java - com.iplanet.services.comm.client.SendRequestException：sun.security.validator.ValidatorException：PKIX 路径构建失败：

> ID：12562523
> 
> 赞同：2
> 
> 时间：2012-09-24T09:47:34.377
> 
> 标签：java, openssl, keystore, openam

我做了以下步骤，但它抛出异常：

1.我在windows server 2003上安装了openam 10.0.0。

2.在同一台windows服务器机器上配置tomcat和ssl。

3.配置正确，openam url可以通过https访问。

4.在另一台机器上安装了openam客户端sdk，它是ubuntu机器，我试图从那个ubuntu机器登录到openam服务器

```
 AuthContext lc = new AuthContext("/","https://server.ensarm.com:8443/openam/namingservice");
        AuthContext.IndexType indexType = AuthContext.IndexType.MODULE_INSTANCE;
        lc.login(indexType, "DataStore");
        return lc; 
```

但我得到以下异常：

```
ERROR: Naming service connection failed for https://server.ensarm.com:8443/openam/namingservice
com.iplanet.services.comm.client.SendRequestException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

我不明白可能是什么问题。是因为我的 java 密钥库（ssl 配置需要）在 windows 服务器机器上，而我在 ubuntu 机器上没有密钥库，

或者

需要将密钥库导入 ubuntu 机器。?? 请任何人都可以帮助我摆脱这种情况。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T10:19:27.573

“<em>javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed:”</em> 这意味着服务器没有来自授权 CA 的有效证书。

您正面临此异常，因为您尝试通过 SSL (https) 进行连接。您需要将服务器证书导入 JRE KeyStore。

执行以下步骤来解决它：

获取证书：在浏览器中输入 URL（例如[https://server.ensarm.com:8443/openam/namingservice ）。](https://server.ensarm.com:8443/openam/namingservice)

1.  您现在可能会看到一个对话框，警告您有关证书的信息。现在单击“查看证书”并安装证书。忽略任何警告消息。
2.  下一步是安装导出证书并将其安装在 jre 密钥库中。使用 keytool 证书管理实用程序执行此 http://download.oracle.com/javase/1.3/docs/tooldocs/win32/keytool.html 。
3.  导出证书：转到工具->“Internet 选项”->内容->证书。打开证书后，在“受信任的根证书颁发机构”下找到刚刚安装的证书。选择正确的证书并单击“导出”。您现在可以将其保存（DER 编码的二进制文件），例如 mycert.cer。
4.  转到 JRE\BIN 并使用 keytool -import 命令将文件导入您的 cacerts 密钥库。例如 keytool --import -alias MYCA -keystore ..\lib\security\cacerts -file c:\mycert.cer。输入密钥库密码：（默认为“changeit”）。在提示中输入“yes”。
5.  运行命令 keytool -list -keystore ..\lib\security\cacerts 。您现在将看到所有证书的列表，包括您刚刚添加的证书。

# javascript - 需要帮助从静态 json 解析名称

> ID：12562530
> 
> 赞同：-1
> 
> 时间：2012-09-24T09:48:00.233
> 
> 标签：javascript, json

我将如何使用 jquery 解析这个 json？我是 json 新手，所以无法做到这一点。我需要从 json 下面解析名称（imran）和追随者名称（ali & noor）。

> {"data":[{"data":{"name":"Imran","email":"imran@example.com","phone":"+9221-000000","location":"khi, pk","userid":"1114","date":"2012 年 7 月 7 日上午 5:39","privacy":"0","type":"0","last_updated":"9 月 11 日, 2012, 8:59 am","images_count":0,"component":"profile"},"0":null,"1":null,"2":[{"following":{"frienduserid" :"1353","name":"Haider"}},{"following":{"frienduserid":"1148","name":"Ali"}}],"3":[{"follower": {"userid":"1148","name":"阿里"}},{"follower":{"userid":"1054","name":"noor"}}]}]}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:04:50.897

一个非常简单的 PHP 示例：

```
<php?

// Convert JSON to an associative array
$arr = json_decode('{"data":[{"data":{"name":"Imran","email":"imran@example.com","phone":"+9221-000000","location":"khi,pk","userid":"1114","date":"July 7, 2012, 5:39 am","privacy":"0","type":"0","last_updated":"September 11, 2012, 8:59 am","images_count":0,"component":"profile"},"0":null,"1":null,"2":[{"following":{"frienduserid":"1353","name":"Haider"}},{"following":{"frienduserid":"1148","name":"Ali"}}],"3":[{"follower":{"userid":"1148","name":"Ali"}},{"follower":{"userid":"1054","name":"noor"}}]}]}', true);

// Dump the element containing the name
var_dump($arr['data'][0]['data']['name']);

// Loop through followers and dump each follower's name
foreach ($arr['data'][0][3] as $item)
{
    var_dump($item['follower']['name']);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:43:14.780

你的 json 结构看起来很乱……也许你应该检查一下。但是我认为您应该能够通过以下方式访问所需的数据：

```
jsonObject = JSON.Parse(yourJSONString) //This will create your jsonObject
jsonObject.data[0].data.name --> should hold the name
jsonObject.data[0].data["2"][2].follower.name --> should hold de name of the first follower. 
```

# php - zf2 创建简单服务并通过viewhelper访问

> ID：12562538
> 
> 赞同：11
> 
> 时间：2012-09-24T09:48:34.987
> 
> 标签：php, zend-framework2, view-helpers

我正在尝试在 zf2 中创建一个简单的服务，我可以在 viewhelper 中使用它来访问它

**步骤1。**我在 src/Application/Service/Service1.php 中创建了一个类，如下所示

```
namespace Application\Service;
    use Zend\ServiceManager\ServiceLocatorAwareInterface;
    use Zend\ServiceManager\ServiceLocatorInterface;

    class Service1 implements ServiceLocatorAwareInterface
    {

        public function __construct()
        {

        }

        public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
        {

        }    

        public function getServiceLocator()
        {

        }

    } 
```

**Step2**我在 module.php 文件中进行了如下设置。

```
public function getServiceConfig()
{    
     return array(
        'factories' => array(
            'Application\Service\Service1' => function ($sm) {
                return new \Application\Service\Service1($sm);
            },
        )
    );   
}

public function onBootstrap($e)
{        
   $serviceManager = $e->getApplication()->getServiceManager();

    $serviceManager->get('viewhelpermanager')->setFactory('Abc', function ($sm) use ($e) {
        return new \Application\View\Helper\Abc($sm); 
    });
} 
```

**Step3**最后我在我的视图助手 src/Application/View/Helper/Abc.php test() 方法中得到它，我评论这一行`$this->sm->get('Application\Service\Service1');`没有错误，一定有我在服务中遗漏的东西？

```
namespace Application\View\Helper;

use Zend\View\Helper\AbstractHelper;

    class Abc extends AbstractHelper 
    {
       protected $sm;

       public function test()
        {
            $this->sm->get('Application\Service\Service1');
        }
        public function __construct($sm) {
            $this->sm = $sm;

        }
    } 
```

**Step4**然后我在这样的一个视图中调用我的测试视图助手。

```
$this->Abc()->test(); 
```

我收到以下错误。

```
Fatal error: Call to undefined method Application\Service\Service1::setView() in vendor/zendframework/zendframework/library/Zend/View/HelperPluginManager.php on line 127 Call Stack: 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T06:35:53.587

仅在 PHP 5.4 中，没有特定配置的替代方法是使用[traits](http://php.net/manual/en/language.oop5.traits.php)：

module.config.php 的摘录：

```
'view_helpers' => array(
    'invokables' => array(
        'myHelper' => 'Application\View\Helper\MyHelper',
    ), 
```

MyHelper.php：

```
<?php
namespace Application\View\Helper;

use Zend\ServiceManager\ServiceLocatorAwareInterface;  

class HeadScript extends \Zend\View\Helper\MyHelper implements ServiceLocatorAwareInterface
{
    use \Zend\ServiceManager\ServiceLocatorAwareTrait;

    public function __invoke()
    {
        $config = $this->getServiceLocator()->getServiceLocator()->get('Config');
        // do something with retrived config
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T11:36:33.177

更改`$this->sm->getServiceLocator()->get('Application\Service\Service1');`以下方法中的行

```
class Abc extends AbstractHelper 
{
   protected $sm;

   public function test()
    {
        $this->sm->getServiceLocator()->get('Application\Service\Service1');
    }
    public function __construct($sm) {
        $this->sm = $sm;

    }
} 
```

# c# - 对 peek 完成时使用的异步回调方法进行单元测试

> ID：12562542
> 
> 赞同：4
> 
> 时间：2012-09-24T09:48:47.503
> 
> 标签：c#, moq, mstest, msmq

我希望对一个回调方法进行单元测试，该方法在对消息队列的窥视完成并且无法弄清楚如何执行此操作时调用。

我的抽象类；

```
public abstract class QueueHandler : WindowsServiceBase
{
    private readonly IMessageQueueWrapper _listeningQueue;
    private PeekCompletedEventHandler _peekHandler;

    protected QueueHandler(IMessageQueueWrapper listeningQueue) 
        : base()
    {
        _listeningQueue = listeningQueue;
    }

    protected override void ExecuteInternal()
    {
        _listeningQueue.BeginPeek();
    }

    protected override void ConfigureInternal()
    {
        if (_peekHandler != null) return;

        _peekHandler = OnPeekCompleted;
        _listeningQueue.PeekCompleted += OnPeekCompleted;
    }

    protected void OnPeekCompleted(object sender, PeekCompletedEventArgs e)
    {
        try
        {
            var msg = _listeningQueue.EndPeek(e.AsyncResult);

            ...
        }
        catch (Exception ex)
        {
            ...
        }
    }
} 
```

我用于单元测试的具体类；

```
internal class QueueuHandlerImplementation : QueueHandler
{
    public QueueuHandlerImplementation(IMessageQueueWrapper listeningQueue)
        : base(listeningQueue)
    {
    }
} 
```

我的单元测试；

```
public void OnPeekCompletedWhenBeginPeekShouldCallOnPeekCompleted()
{
        QueueuHandlerImplementation queueHandler = new QueueuHandlerImplementation(_listeningQueueMock.Object);

    //Arrange
    queueHandler.Configure();
    _listeningQueueMock.Setup(m => m.BeginPeek()).Raises(
                    m => m.PeekCompleted += null, new PeekCompletedEventArgs() { AsyncResult = new Mock<IAsyncResult>().Object});

    //Act
    _queueHandler.Execute();

    //Assert
    Assert.AreEqual(true, _queueHandler.IsConfigured);
} 
```

这是不可能的，因为`PeekCompletedEventArgs`没有默认构造函数。

```
public void OnPeekCompletedWhenBeginPeekShouldCallOnPeekCompleted()
{
        QueueuHandlerImplementation queueHandler = new QueueuHandlerImplementation(_listeningQueueMock.Object);

    //Arrange
    queueHandler.Configure();
    _listeningQueueMock.Setup(m => m.BeginPeek()).Raises(
                m => m.PeekCompleted += null, PeekCompletedEventArgs.Empty);

    //Act
    _queueHandler.Execute();

    //Assert
    Assert.AreEqual(true, _queueHandler.IsConfigured);
} 
```

这看起来不错，但是在调用执行时，我收到一个错误，提示“'System.EventArgs' 类型的对象无法转换为'System.Messaging.PeekCompletedEventArgs'。”...而且我没有任何 AsyncResult 需要处理如果我能走到那一步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:07:42.720

您可以使用内部构造函数创建一个实例：

```
MessageQueue sender = null;
IAsyncResult result = null;
var e = Activator.CreateInstance(typeof(System.Messaging.PeekCompletedEventArgs),
                                 BindingFlags.NonPublic | BindingFlags.Instance,
                                 null, new object[]{sender, result}, null); 
```

注意：当您访问该属性时，`sender`这`null`将导致 NullReferenceException 。`Message`

# android - 删除行后无法刷新数据库

> ID：12562544
> 
> 赞同：2
> 
> 时间：2012-09-24T09:48:51.603
> 
> 标签：android

我在 android 中使用 SQLiteDatabase。删除一行后，我无法引用我的列表视图。我的代码如下：

```
 public void delete(String i) {
    // TODO Auto-generated method stub
    String [] columns= new String[]{KEY_ROW_ID,KEY_FHR,KEY_ID,KEY_NAME,KEY_AGE};
    Cursor c= our_db.query(KEY_TABLE, columns, null, null,null, null, null);
    our_db.delete(KEY_TABLE, KEY_NAME+ "="+"\'"+i+"\'", null) ;
    c.requery();

} 
```

我从高效适配器的视图中调用它。下面是我称之为的代码：

```
 holder.del.setOnClickListener(new OnClickListener() {
                private int pos=position;
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    final long newpos;
                    sql_get db = new sql_get(c);
                    db.open();

                    db.delete(DATA[pos]);               
                    notifyDataSetChanged();                     
                    db.close();
                }
            }); 
```

谁能帮我找出问题所在。它没有给出任何错误。它只是删除了该行，但没有更新视图。

这是我使用的适配器：

```
 private static class EfficientAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    private Bitmap mIcon1;
    private Bitmap mIcon2;
    private Bitmap mIcon3;
    private Bitmap mIcon4;

    Context c;
    int window;

    public EfficientAdapter(Context context) {
        // Cache the LayoutInflate to avoid asking for a new one each time.
        mInflater = LayoutInflater.from(context);
        this.c=context;
        // Icons bound to the rows.
        mIcon1 = BitmapFactory.decodeResource(context.getResources(), R.drawable.icon48x48_1);
        mIcon2 = BitmapFactory.decodeResource(context.getResources(), R.drawable.icon48x48_2);
        mIcon3 = BitmapFactory.decodeResource(context.getResources(), R.drawable.del1);
        mIcon4 = BitmapFactory.decodeResource(context.getResources(), R.drawable.edit);
    }       
    public int getCount() {
        return DATA.length;
    }       
    public Object getItem(int position) {
        return position;
    }   
    public long getItemId(int position) {
        return position;
    }       
    public View getView(final int position, View convertView, ViewGroup parent) {
        // A ViewHolder keeps references to children views to avoid unneccessary calls
        // to findViewById() on each row.
        ViewHolder holder;
        //int i=0;

            convertView = mInflater.inflate(R.layout.list_item_icon_text, null);

            // Creates a ViewHolder and store references to the two children views
            // we want to bind data to.
            holder = new ViewHolder();
            holder.text = (TextView) convertView.findViewById(R.id.text);
            holder.icon = (ImageView) convertView.findViewById(R.id.icon);
            holder.del=(ImageView)convertView.findViewById(R.id.icon1);
            holder.edit=(ImageView)convertView.findViewById(R.id.icon2);

            window=position;
            holder.text.setOnClickListener(new OnClickListener() { 
                private int pos=position;

                //private int pos = position; 
                public void onClick(View v) { 

                    System.out.println(window);
                    sql_get db = new sql_get(c);
                    db.open();
                    String ret_id= db.getid(DATA[pos]);
                    String ret_name = db.getname(DATA[pos]);                        
                    String ret_age= db.getage(DATA[pos]); 
                    String ret_fhr= db.getfhr(DATA[pos]);                       
                    String[] result = {ret_id,ret_name,ret_age,ret_fhr};
                    db.close();
                    Bundle b=new Bundle();
                    b.putStringArray("key",result); 
                    Intent i =new Intent(c,Tabs.class);
                    i.putExtras(b);
                    c.startActivity(i)  ;
                    Toast.makeText(c, getItemId(position)+""+" Click- text " +pos+" "+ret_name, Toast.LENGTH_SHORT).show();
                } 
            });                 
            holder.del.setOnClickListener(new OnClickListener() {
                private int pos=position;
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    final long newpos;                      
                    sql_get db = new sql_get(c);
                    db.open();
                    db.delete(DATA[pos]);                       
                    notifyDataSetChanged();                     
                    db.close();                     
                    Toast.makeText(c, "deleting " + DATA[pos], Toast.LENGTH_SHORT).show();                      
                }
            });
            convertView.setTag(holder);
        }           
        holder.text.setText(DATA[position]);
        holder.icon.setImageBitmap((position & 1) == 1 ? mIcon1 : mIcon2);
        holder.del.setImageBitmap(mIcon3);
        holder.edit.setImageBitmap(mIcon4);
        return convertView;     
    static class ViewHolder {
        ImageView del;
        TextView text;
        ImageView icon;
        ImageView edit;
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:50:36.323

您还需要从保存列表视图数据的对象中删除该行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:55:12.433

我认为您还必须从适配器中删除相同的数据，然后使用 your_adapter.notifyDataSetChanged() 方法。这对我有用...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T09:41:12.667

我找到了解决方案。如上所述，我必须更改 DATA 对象。我使用以下命令来实现它。

```
db.open();                                      
db.delete(DATA[pos]);           
DATA=db.getdata();
DATA_NAME=db.getname();
DATA_AGE=db.getage();
DATA_FHR=db.getfhr();                                                   
db.close(); 
```

# c# - 如何复制单词数学表达式并将其保存为图像

> ID：12562546
> 
> 赞同：1
> 
> 时间：2012-09-24T09:48:55.060
> 
> 标签：c#

我试过下面的代码从word文档中复制数学表达式并将它们保存为图像，但它不起作用。

```
foreach (OMath math in doc.Content.OMaths)
                {
                    math.Range.Select();
                    math.Range.CopyAsPicture();

                    System.Windows.Forms.IDataObject dobj = System.Windows.Forms.Clipboard.GetDataObject();

                    if( dobj.GetDataPresent(typeof(System.Drawing.Bitmap)) )
                    {
                        System.Drawing.Bitmap bitmap = (Bitmap)dobj.GetData(typeof(System.Drawing.Bitmap));
                        bitmap.Save("C:\\tempFolder\\Image" + cnt + ".bmp", ImageFormat.Bmp);
                    }

                    cnt++;

                } 
```

任何人都可以帮忙吗？提前致谢。

# java - ConcurrentModificationException 和 HashSet.iterator()

> ID：12562548
> 
> 赞同：3
> 
> 时间：2012-09-24T09:48:59.770
> 
> 标签：java, iterator, concurrentmodification

我有一个 for 循环

```
 for (int neighbour : neighbours) { 
```

我可以`neighbours`在循环内修改的地方。发现这就是原因`ConcurrentModificationException`。并从[https://stackoverflow.com/a/8189527/292291阅读](https://stackoverflow.com/a/8189527/292291)

> 因此，如果您想修改列表（或一般的任何集合），请 **使用 iterator**，因为它知道修改，因此将正确处理这些修改。

所以我尝试了：

```
neighboursItr = neighbours.iterator();
while (neighboursItr.hasNext()) {
  // try disconnecting vertices
  neighbour = neighboursItr.next(); 
```

但这并不能解决问题。为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T09:51:53.270

你在打电话`neightbours.remove(neighbour)`吗？在这种情况下，这就是问题所在。你需要打电话`neightboursItr.remove()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:52:26.697

您是否考虑过创建`HashSet`具有所需状态的新产品？我的意思是你可以遍历`neighbours`并添加`newNeighbours`任何你想要的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:52:32.927

在对集合进行迭代时，您只能**使用迭代器的方法**修改集合。因此，您可以调用，但不能使用例如`neighboursItr.remove()`向集合添加元素。`neighbours.add()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T09:56:33.047

迭代时不能修改集合。唯一的例外是使用`iterator.remove()`方法（如果目标集合支持它）。

原因是这就是迭代器的工作方式。它必须知道如何跳转到集合的下一个元素。如果在创建迭代器后更改集合，则无法执行此操作并引发异常。

这个问题有几种解决方案。例如，如果您想在迭代期间将元素添加到现有集合中，您可以创建另一个集合来存储新元素，然后在迭代完成后添加所有这些元素。

# eventbrite - 是否有任何 API 可用于按票证类型获取销售额？

> ID：12562555
> 
> 赞同：1
> 
> 时间：2012-09-24T09:49:20.623
> 
> 标签：eventbrite

我需要根据门票类型和销售相关信息获取与会者的详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:57:10.280

Take a look at the [event_list_attendees](http://developer.eventbrite.com/doc/events/event_list_attendees/) API method: [http://developer.eventbrite.com/doc/events/event_list_attendees/](http://developer.eventbrite.com/doc/events/event_list_attendees/)

That page contains a 'Try it Now!' button that allows you to test the API call, and review the response data.
You will need to login to access any private data. Authenticated users should see a ticket_id attached to each [attendee](http://developer.eventbrite.com/doc/attendees/) record.

# multithreading - 多线程 Corba 客户端

> ID：12562559
> 
> 赞同：3
> 
> 时间：2012-09-24T09:49:29.283
> 
> 标签：multithreading, corba

Corba 服务器端有很多关于多线程的知识，但我对**客户端**很感兴趣。我们有一个多线程客户端（Solaris、Orbix 6.3）和一个初始化 ORB 的 Corba 单例“管理器”。在运行时 'lsof' 只显示一个到 Corba 服务器的 TCP 连接，因此所有从客户端工作线程进行的同步调用都应该被序列化。

想改变这种安排以利用并行性：每个线程管理自己的连接。我已经更改了设置，以便每个工作线程调用 ORB_init() 等而不是单例。

现在完全困惑：'lsof' 现在显示 2 个 TCP 连接，但有 6 个工作线程。有些事情不对劲，预计 TCP 连接数与工作线程数一样多。可能是这种方法很幼稚 - 例如每个线程调用 ORB_init() 是否有意义？

我需要有人对此发表意见。**多线程客户端**的示例代码将有很大帮助。同样，在 Solaris 上使用 Orbix 6.3。

亲切的问候，

阿德里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:56:56.040

谢谢你们的回答。我发现，正如约翰尼所说，这确实是特定于实现的。

**例如， omniORB**具有 maxGIOPConnectionPerServer - 默认为 5。即： *ORB 将打开到单个服务器的最大并发连接数。如果客户端上的多个线程调用同一服务器，ORB 会打开到服务器的附加连接，最多可达此参数指定的最大值。如果达到最大值，线程将被阻塞，直到有连接可供它们使用。*

不幸的是，我还没有找到**Orbix**的等价物（如果有的话） 。它绝对默认为 1 个连接。还在搜...

虽然发现作为 Solaris -> Linux 迁移的一部分，几个月后将从 Orbix 迁移到**TAO**。希望 TAO 会更加友好和可定制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:44:49.263

连接的管理是特定于纯 CORBA 的实现。每个供应商都有自己的专有方式来配置他们的行为。如果您检查 RTCORBA 规范，它有一种标准化的方式来配置如何使用客户端和服务器之间的连接。

我不知道 Orbix 是如何工作的以及它是否支持 RTCORBA，这可能是你可以从他们的手册中获得的东西。我知道 TAO 对客户端的线程有很多支持。默认情况下，当多个线程调用同一服务器时，可以同时打开多个 tcpip 传输。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:15:00.913

Orbix 内部使用大量优化例程来确保有效使用连接。具体来说，它不会打开到同一个服务器端点的多个连接，因为它能够在同一个 TCP 连接上多路复用多个并发 GIOP 请求。CORBA 故意对客户端和服务器程序员隐藏连接管理。

我不相信这可以通过配置来控制。向 Progress Support 发送支持票以进行确认。如果您离开单例模型并为每个客户端初始化不同的 ORB（每个客户端都有自己的唯一 ID），您可能可以强制它发生，但这将是一个非常严厉且成本高昂的问题解决方案有点模糊。底层 ORB 已经针对并发请求进行了优化，因此我不确定您要解决的问题是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T05:22:57.303

老实说，我认为对于 CORBA 应用程序没有称为多线程客户端的概念。因为在服务器端，有一个`only one object`向所有客户端都可用的命名服务注册。如果您查看`IOR`对象的 ，所有客户端都将是相同的。所以它最多只能建立一个与该对象的连接。它还导致您认为对于任意数量的客户端，您不能获得多个远程对象（这意味着您从不同客户端查找对象的次数，它们都获得相同的引用）。因此，为了支持多线程，服务器实际上必须支持不同的线程策略。POA 服务器可以有不同的线程策略。请通过[CORBA 进行 JAVA 编程](http://www.wiley.com//legacy/compbooks/brose/)更多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T11:19:40.440

我不知道 Orbix 究竟是如何工作的，但通常 ORB 初始化只完成一次，即使对于多线程设置也是如此。多线程（*服务器端*）ORB 将启动一定数量的工作线程（按需或如果需要或如果配置，则为固定数量）来处理传入连接。这些连接由工作人员处理。这个工人查找可以处理这个请求的仆人。通常这（对仆人的真正调用）也在一个额外的线程中执行。但是你不会看到这个线程`lsof`。尝试使用`ps -eLf`或`top -H`启用线程支持。

**编辑：**

在客户端，这取决于您要调用多少对象。对于每个对象，调用者线程都是可能的。每个远程对象也可以有多个调用者线程，但前提是从客户端逻辑上的不同线程调用。（想象有多个线程并且远程对象在线程之间共享）

# mono - iPhone 图标和单声道

> ID：12562560
> 
> 赞同：0
> 
> 时间：2012-09-24T09:49:29.727
> 
> 标签：mono, xamarin.ios, monodevelop, application-loader

今天我已经部署了我的应用程序，我准备在 Apple Store 上发布它。我已将**Spotlight & Settings Icons 设置**如下

*   图片 29x29（图片 icon29x29.png）
*   视网膜显示屏 (58x58)（图片 icon58x58.png）
*   iPad 兼容性 (50x50)（图片 icon50x50.png）

和**应用程序图标**

*   Ipad 兼容性 72x72（图片 icon72x72.png）

当我尝试使用 Application Loader 上传二进制文件时遇到以下问题。对于每个图像是

> iPhone/iPod Touch：icon29x29.png：图标尺寸 (29x29) 不符合尺寸要求。图标文件必须为 .png 格式的 57x57 像素

（只需更改图像名称和像素参考）。

我确信我的图像**尺寸合适**，否则如果它们是精确尺寸，monodevelop 不允许我插入它们。

我的图像在我的项目的**图像文件夹中。**我尝试将它们设置为**内容**或**iTunesArtwork**并**在输出目录中复制，**但没有任何改变。

我的系统配置是

*   MonoDevelop 3.0.4.7
*   单触 6.0.0.0
*   单声道 2.10.9

我必须在没有这些图像的情况下部署我的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:10:02.167

我找到了**解决**我的问题的方法。

如果文件在我的项目中**的目录下**Images\ 给我这种**错误**。

**相反**，如果文件处于相同的**解决方案级别**，所有工作正常并且图像加载完美。

也许这是 MonoDevelop 中的一个错误（Info.plist 文件生成）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:01:55.170

我认为这可能与未填写*所有*图标有关（应该有 57、100、114、144）。

在`Info.plist`文件中，这些图像存储在一个数组中，所以我不确定如果所有图像都不存在，Apple 如何决定如何处理。

# java - 覆盖相等方法和双向关系

> ID：12562572
> 
> 赞同：0
> 
> 时间：2012-09-24T09:50:08.477
> 
> 标签：java, stack-overflow

当检查实例与其他实例相等时，我得到

`java.lang.StackOverflowError`.

因为存在双向关系，所以我的`Override equal method`调用`equal()`函数相互递归。我应该删除一侧`override equal method`的一张支票相等条件吗？有什么更好的方法？一些 PG 建议我使用`EqualsBuilder`Apache。

订单项.java

```
 public class OrderItem {
            private String id;
            private Order order;

            public OrderItem(String id, Order order) {
                this.id = id;
                this.order = order;
            }

            public void setId(String id) {
                this.id = id;
            }

            public String getId() {
                return id;
            }

            public void setOrder(Order order) {
                this.order = order;
            }

            public Order getOrder() {
                return order;
            }

            @Override
            public boolean equals(Object object) {
                if (this == object) {
                    return true;
                }
                if (!(object instanceof OrderItem)) {
                    return false;
                }
                final OrderItem other = (OrderItem)object;
                if (!(id == null ? other.id == null : id.equals(other.id))) {
                    return false;
                }
                if (!(order == null ? other.order == null : order.equals(other.order))) {
                    return false;
                }
                return true;
            }
        } 
```

订单.java

```
 public class Order {
            private String id;
            private List<OrderItem> orderItemList;

            public Order(String id) {
                this.id = id;
            }

            public void setId(String id) {
                this.id = id;
            }

            public String getId() {
                return id;
            }

            public void setOrderItemList(List<OrderItem> orderItemList) {
                this.orderItemList = orderItemList;
            }

            public List<OrderItem> getOrderItemList() {
                return orderItemList;
            }

            @Override
            public boolean equals(Object object) {
                if (this == object) {
                    return true;
                }
                if (!(object instanceof Order)) {
                    return false;
                }
                final Order other = (Order)object;
                if (!(id == null ? other.id == null : id.equals(other.id))) {
                    return false;
                }
                if (!(orderItemList == null ? other.orderItemList == null : orderItemList.equals(other.orderItemList))) {
                    return false;
                }
                return true;
            }
        } 
```

测试

```
 public static void main(String[] args) {
            Order order1 = new Order("1");
            List<OrderItem> orderItemList = new ArrayList<OrderItem>();
            orderItemList.add(new OrderItem("1", order1));
            orderItemList.add(new OrderItem("2", order1));
            order1.setOrderItemList(orderItemList);

            Order order2 = new Order("1");
            List<OrderItem> orderItemList2 = new ArrayList<OrderItem>();
            orderItemList2.add(new OrderItem("1", order2));
            orderItemList2.add(new OrderItem("2", order2));
            order2.setOrderItemList(orderItemList2);

            if(order1.equals(order2)) {
                System.out.println("Equal");
            } else {
                System.out.println("Not Equal");
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:57:58.270

我会重写它以仅使用`id`属性进行相等性检查。但这很**重要**`hashcode()`：如果您希望实体在 Java 集合中正确运行，请不要忘记覆盖该方法。

# mysql - MySQL 查询耗时太长，Apache 挂起

> ID：12562582
> 
> 赞同：1
> 
> 时间：2012-09-24T09:50:57.680
> 
> 标签：mysql, apache

我有一个查询，有时需要很长时间才能执行。

我知道我必须调整该查询并修复一些 MySQL 问题，但是，我的问题是其他的。

当此查询在 MySQL 中“锁定”其他查询时，生成该查询的 Apache Web 请求挂起（这是正常的），但阻止其他 Web 请求执行，因为其他 Web 请求生成其他 SQL 查询，但 MySQL 被“锁定”与第一个。

我该怎么做才能防止这种情况？我希望 apache 请求的一个慢速 SQL 查询不会影响其他 Web 请求的其他查询。

# ironpython - 适用于未安装 Python 的 Excel 的 Python / IronPython 解决方案

> ID：12562583
> 
> 赞同：1
> 
> 时间：2012-09-24T09:51:00.880
> 
> 标签：ironpython

有没有办法打包 IronPython dll / xll 以便它可以在机器上运行而无需显式安装解释器？我的意思是我可以以某种方式将解释器打包到 dll / xll 中吗？

如果是这样，您会推荐什么 excel 解决方案？我在 C# 中使用了相当多的 ExcelDNA，PyXLL 看起来也不错，但似乎依赖于安装 Python。

当然，如果做不到这一点，我可能最终会使用 VBA——但已经齐心协力摆脱这种情况。C# 插件仍然是一个选项，只是基本 IO 更耗时，似乎最好留给繁重的工作。

谢谢理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:12:55.633

一种选择可能是使用[ilmerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)，但我不知道是否有人尝试过使用 IronPython。

# javascript - 将html添加到没有id的div中

> ID：12562587
> 
> 赞同：1
> 
> 时间：2012-09-24T09:51:22.833
> 
> 标签：javascript, jquery

我正在尝试将一些带有 javascript 和 jQuery 的 html 代码添加到一个没有 id 但有一个类的 div 中

我正在尝试像这样完成它，但没有成功......

飞行.js：

```
$(".myClassName").ready(function(){
    $(this).innerHTML = "<img src=\"http://mywebsite.com/img.png\" /> <span>some text</span>";
}); 
```

我正在用这个 html 代码加载 .js 文件

.html 文件：

```
<div class="myClassName">
</div>
<script>
(function()
{
    if (window['ImportFlag'] == undefined || window['ImportFlag'] == void 0) {
        var myScript = document.createElement('script');
        myScript.type = 'text/javascript';
        myScript.src = 'file.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(myScript, s);}
    window['ImportFlag'] = 1;
})();
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:53:16.447

```
$(document).ready(function(){ 
    $(".myClassName").html("<img src=\"http://mywebsite.com/img.png\" /> <span>some text</span>"); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:58:32.897

你可以试试这样

```
<div class="myClassName">
</div>
<script type="text/javascript" src="file.js">
</script>​ 
```

文件.js

```
$(document).ready(function(){
    $('.myClassName').html("<img src=\"http://mywebsite.com/img.png\" /> <span>some text</span>");
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:04:58.590

您应该首先确保在加载 file.js 之前加载 jQuery。然后你应该使用 jQuery 的函数来设置 div 内部 HTML。

这是一个极简主义的例子：

```
<html>
<head></head>
<body>
<div class="myClassName">
</div>
<script type="text/javascript" src="/js/jquery-1.7.2.min.js"></script>
<script>
(function()
{
    if (window['ImportFlag'] == undefined || window['ImportFlag'] == void 0) {
        var myScript = document.createElement('script');
        myScript.type = 'text/javascript';
        myScript.src = 'file.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(myScript, s);}
    window['ImportFlag'] = 1;
})();
</script>
</body>
</html> 
```

然后， file.js ：

```
$(document).ready(function(){ 
    $(".myClassName").html("... <span>some text</span>"); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:06:50.427

[jQuery`ready()`函数](http://api.jquery.com/ready/)应该在对象上调用，`document`而不是在元素上调用。它调用了一个 DOM-ready 处理程序，并且可以使用以下语法（来自官方文档）调用：

> `$(document).ready(handler)`
> 
> `$().ready(handler)` ***（不建议这样做）***
> 
> `$(handler)`

Matei Mihai 和 muthu 的答案在这里向您展示了这如何适用于您的示例。

# javascript - 在呈现 ajax 响应后执行 Javascript

> ID：12562595
> 
> 赞同：10
> 
> 时间：2012-09-24T09:51:49.110
> 
> 标签：javascript, jquery

我想在呈现 ajax 响应后执行一段 javascript。javascript 函数是在 ajax 请求期间动态生成的，并且在 ajax 响应中。“完成”和“成功”事件不做这项工作。我在 Firebug 控制台中检查了 ajax 请求，并且在执行完整回调时没有呈现响应。

```
Does not work:

      function reloadForm() {
        jQuery.ajax({
          url: "<generate_form_url>",
          type: "GET",
          complete: custom_function_with_js_in_response()
        });
      }; 
```

ajaxComplete 完成这项工作，但它为页面上的所有 ajax 调用执行。我想避免这种情况。有没有可能的解决方案？

```
$('#link_form').ajaxComplete(function() {
  custom_function_with_js_in_response();
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T11:46:11.307

你也可以使用 $.ajax(..).done(do_things_here());

```
$(document).ready(function() {

    $('#obj').click(function() {

    $.ajax({
        url: "<url>"
    }).done(function() {
      do_something_here();
    });
}); 
```

});

还是有其他方法

```
$(document).ready(function() {

    $('#obj').click(function() {

    $.ajax({
        url: "<url>",
        success: function(data){
          do_something_with(data);
        }
    })
}); 
```

});

请利用此引擎分享您的问题并尝试解决方案。它非常有效。

[http://jsfiddle.net/qTDAv/7/](http://jsfiddle.net/qTDAv/7/)（PS：这包含一个示例尝试）

希望有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:16:33.253

检查（并在需要时推迟调用）并执行回调函数的存在可能会起作用：

```
// undefine the function before the AJAX call
// replace myFunc with the name of the function to be executed on complete()
myFunc = null; 

$.ajax({
    ...
    complete: function() {
       runCompleteCallback(myFunc);
    },
    ...
});

function runCompleteCallback(_func) {
    if(typeof _func == 'function') {
        return _func();
    }
    setTimeout(function() {
        runCompleteCallback(_func);
    }, 100);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:02:46.760

没有代码就帮不上什么忙。作为[JQuery ajax 完整页面的一般示例](http://api.jquery.com/ajaxComplete/)

```
$('.log').ajaxComplete(function(e, xhr, settings) {
    if (settings.url == 'ajax/test.html') {
        $(this).text('Triggered ajaxComplete handler. The result is ' +
                 xhr.responseHTML);
    }
}); 
```

**在 ajaxComplete 中，您可以决定过滤要为其编写代码的 URL。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:50:29.207

尝试在没有`()`ajax 选项的情况下指定函数名称：

```
function reloadForm() {
        jQuery.ajax({
          url: "<generate_form_url>",
          type: "GET",
          complete: custom_function_with_js_in_response
        });
      }; 
```

# javascript - 在 XPATH 中使用 OR 的两个条件

> ID：12562597
> 
> 赞同：37
> 
> 时间：2012-09-24T09:51:58.163
> 
> 标签：javascript, xpath, translate, uppercase, lowercase

我有一个文本框，'txtSearch'。我用它来按姓氏搜索人。这是我的代码。

```
var xmlTempResultSearch = xmlResidentListDisplay.selectNodes(
    "//PeopleList/Row[contains(translate(@LastName, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), '" +
    txtSearch.value + "')]"); 
```

此代码选择 XML 中的所有姓氏，就像 txtSearch 文本框中的文本输入一样。

这会将所有大写字母转换为小写字母。

因此，如果我正在搜索“Dorosan”，如果我输入“doro”，它会检索到正确的人，因为它将“D”翻译成“d”。但是当我输入“Doro”时，它没有检索到正确的人。

我想知道我是否可以在 XPATH 中有两个条件，以及如何？我希望能够将所有大写字母翻译成小写字母，或者将所有小写字母翻译成大写字母。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-24T10:08:22.510

`and`并且`or`允许在条件内：`[here]`. 或者，您也可以使用管道符号在一个 XPath 表达式中使用多个路径。

`//PeopleList/Row[c1] | //PeopleList/Row[c2]`

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-09-24T10:04:10.260

你可以在里面使用`or`/`and``[....]`

例子：

```
//*[contains('abc') or contains('def') or text()='abcdef'] 
```

有关运营商的更多信息：http: [//www.w3schools.com/xpath/xpath_operators.asp](http://www.w3schools.com/xpath/xpath_operators.asp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T11:51:15.993

我认为您在这里不需要“或”。您只需要将两个操作数都翻译成小写，而不是只翻译其中一个。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-24T13:14:13.493

正如 Michael Kay 所指出的，没有`or`必要。

**只需使用**：

```
PeopleList/Row
  [contains(translate(@LastName, 
                     'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
                     'abcdefghijklmnopqrstuvwxyz'), '" 
+
           translate(txtSearch.value,
                     'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
                     'abcdefghijklmnopqrstuvwxyz')'" 

+ "')]"); 
```

# php - php gd如何在不保存的情况下为每个用户显示图像

> ID：12562599
> 
> 赞同：0
> 
> 时间：2012-09-24T09:52:00.640
> 
> 标签：php, facebook-graph-api, php-gd

我需要帮助，我使用 php gd 创建了一个 facebook 应用程序。程序是当用户打开应用程序时会出现一个图像。图像包含用户的用户名、个人资料图片和随机生成的昵称。我正在保存输出图像以 resized.jpg 格式发送到服务器，并使用 facebook graph 将该图像发布到用户墙上。问题是当 2 个用户同时使用该应用程序时，输出会有所不同。如何为每个用户生成图像而不将其保存到服务器并发布到 Facebook。现在 iam 使用 html img 标签在应用程序中显示图像..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:44:13.100

答案很简单：每个用户的图像文件名必须有不同的名称。如果`$uid`变量中有用户 ID，为什么不将目标文件另存为：

```
imagejpeg( $rImg, "resized".$uid.".jpg" ); 
```

这样，每个用户将拥有不同的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:53:56.843

与其将文件作为“resized.jpg”保存到服务器，不如将生成的图像直接输出给用户。从[http://php.net/manual/en/function.imagejpeg.php](http://php.net/manual/en/function.imagejpeg.php)它说将文件名设置为 NULL，这会导致将输出发送给用户而不是文件。注意：您可能还需要使用 header 函数设置正确的 Content-Type。

这种方法是 Tomasz 的替代方法。使用他的方法，每个图像都缓存在您的服务器上。使用我的，每次请求页面时都会生成图像。这是一个显示差异的示例：

```
<img src="http://example.com/resized1234.jpg"> #1234 is the user's id
<img src="http://example.com/generate-image.php?uid=1234"> 
```

在您的情况下，您说您将图像直接发布到 Facebook，所以我会建议我的方法，因为如果您将图像发布到他们的网站上，Facebook 将存储它自己的图像副本，并且不需要缓存。此外，您的网站上不会堆积其他用户的图像。

如果您需要我澄清我的回答中的任何内容，请告诉我！

# php - PHP：如何在特定标签之间查找文本？

> ID：12562604
> 
> 赞同：0
> 
> 时间：2012-09-24T09:52:15.930
> 
> 标签：php, parsing, text, tags

示例输入字符串：“[A][B][C]test1[/B][/C][/A] [A][B]test2[/B][/A] test3”

我需要找出文本的哪些部分不在 A、B 和 C 标签之间。因此，例如，在上面的字符串中，它是“test2”和“test3”。“test2”没有 C 标签，“test3”根本没有任何标签。

if 也可以这样嵌套： Example input string2: "[A][B][C]test1[/B][/C][/A] [A][B]test2[C]test4[/C] [/B][/A] 测试3"

在此示例中添加了“test4”，但“test4”具有 A、B 和 C 标签，因此输出不会改变。

有人知道我如何解析这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:06:20.573

该解决方案不干净，但可以解决问题

```
$string = "[A][B][C]test1[/B][/C][/A] [A][B]test2[/B][/A] test3" ;
$string = preg_replace('/<A[^>]*>([\s\S]*?)<\/A[^>]*>/', '', strtr($string, array("["=>"<","]"=>">")));
$string = trim($string);
var_dump($string); 
```

输出

```
 string 'test3' (length=5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:06:35.387

考虑到你们每个人的标签都在 [A][/A] 中，你可以做的是：分解 [/A] 并验证每个数组是否包含 [A] 标签，如下所示：

```
$string = "[A][B][C]test1[/B][/C][/A] [A][B]test2[/B][/A] test3";

$found = ''; // this will be equal to test3
$boom = explode('[/A]', $string);

foreach ($boom as $val) {
 if (strpos($val, '[A] ') !== false) { $found = $val; break; }
}

echo $found; // test3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:44:41.757

试试下面的代码

```
$str = 'test0[A]test1[B][C]test2[/B][/C][/A] [A][B]test3[/B][/A] test4';
$matches  = array();

// Find and remove the unneeded strings
$pattern = '/(\[A\]|\[B\]|\[C\])[^\[]*(\[A\]|\[B\]|\[C\])[^\[]*(\[A\]|\[B\]|\[C\])([^\[]*)(\[\/A\]|\[\/B\]|\[\/C\])[^\[]*(\[\/A\]|\[\/B\]|\[\/C\])[^\[]*(\[\/A\]|\[\/B\]|\[\/C\])/';
preg_match_all( $pattern, $str, $matches );
$stripped_str = $str;
foreach ($matches[0] as $key=>$matched_pattern) {
  $matched_pattern_str  = str_replace($matches[4][$key], '', $matched_pattern); // matched pattern with text between A,B,C tags removed
  $stripped_str = str_replace($matched_pattern, $matched_pattern_str, $stripped_str); // replace pattern string in text with stripped pattern string
}

// Get required strings
$pattern = '/(\[A\]|\[B\]|\[C\]|\[\/A\]|\[\/B\]|\[\/C\])([^\[]+)(\[A\]|\[B\]|\[C\]|\[\/A\]|\[\/B\]|\[\/C\])/';
preg_match_all( $pattern, $stripped_str, $matches );
$required_strings = array();
foreach ($matches[2] as $match) {
  if (trim($match) != '') {
    $required_strings[] = $match;
  }
}

// Special case, possible string on start and end
$pattern = '/^([^\[]*)(\[A\]|\[B\]|\[C\]).*(\[\/A\]|\[\/B\]|\[\/C\])([^\[]*)$/';
preg_match( $pattern, $stripped_str, $matches );
if (trim($matches[1]) != '') {
  $required_strings[] = $matches[1];
}
if (trim($matches[4]) != '') {
  $required_strings[] = $matches[4];
}

print_r($required_strings); 
```

# java - 运行时在面板上绘画

> ID：12562614
> 
> 赞同：0
> 
> 时间：2012-09-24T09:53:15.103
> 
> 标签：java, awt, panel

我有一个面板，我想在上面画东西。在它被创建的时候在上面绘画是没有问题的。

```
canvas = new Panel() {
    public void paint(Graphics g) {
        g.setColor(Color.WHITE);
        g.drawLine(0, 0, 10, 10);
    }
}; 
```

但后来我想在运行时利用它。本能地，我创造了这样的东西：

```
Graphics g = canvas.getGraphics();
g.setColor(Color.GREEN);
g.drawLine(10, 10, 20, 20);
canvas.paint(g); 
```

可悲的是，这不起作用。这可能是一个简单的问题，但我无法通过搜索找到令人满意的结果。那么我该如何做我想做的事呢？

* * *

对不起上面的问题。我刚刚在按钮单击事件上添加了绘制代码，它可以工作。它只是不适用于父框架的 windowOpened 事件。任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:03:49.890

问题是只要窗口系统（或操作系统）决定需要在屏幕上重新绘制特定的图形组件，就可以随时调用paint() 方法。这可能随时发生（通常在调整大小、移动、切换窗口等时）。要查看它发生的频率，只需在 paint() 方法的开头添加一条日志消息。如果您仅在画布上绘制某些东西，则很有可能已绘制，但是另一个重绘请求来自操作系统/窗口系统，并且您的绿线被对象的 paint() “透支”了。所以答案是任何自定义绘画都应该在paint()中完成。您可以为您的子类添加额外的属性（例如 boolean drawGreenLine），在paint() 中检查它并采取任何适当的操作，例如：

```
class MyPanel extends JPanel {

    boolean drawGreenLine;

    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.WHITE);
        g.drawLine(0, 0, 10, 10);
        if (drawGreenLine) {
            g.setColor(Color.GREEN);
            g.drawLine(10, 10, 20, 20);

        }  
    }
}; 
```

编辑：正如@MadProgrammer 所建议的，该示例已更改为覆盖paintComponent()。这样，组件只负责绘制自己（而不是任何子项或边框）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:11:04.253

尝试`g.dispose()`释放 GraphicsContext 的资源

# regex - 带有特殊字符的正则表达式环视无效？

> ID：12562617
> 
> 赞同：2
> 
> 时间：2012-09-24T09:53:20.610
> 
> 标签：regex, special-characters, regex-lookarounds, lookaround

我正在尝试这个正则表达式

```
(?<!(John|Joe)) (Taylor) 
```

在这个文本上 `John James Taylor`

但我在这里[http://www.rubular.com/r/TjD2d4oG5z得到“后向无效模式”](http://www.rubular.com/r/TjD2d4oG5z)

我正在尝试匹配前面没有 John 或 Joe 的“Taylor”。

请问有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:55:40.753

尝试以下操作：

```
(?<!(?:John|Joe)) (Taylor) 
```

`(?:)`是一个非捕获组，这在环顾四周是有意义的，因为您只是在做一个*assertion*，实际上并没有*匹配*任何东西。或者只是一起删除捕获组，即`(?<!John|Joe)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:56:24.253

尝试：

```
/(?<!John|Joe) (Taylor)/ 
```

# java - Java Web 应用程序中的 Servlet 示例

> ID：12562618
> 
> 赞同：6
> 
> 时间：2012-09-24T09:53:27.120
> 
> 标签：java, tomcat, maven

我是 java web 应用程序开发的新手，你能告诉我，我做错了什么吗：我使用 maven 生成了 web 应用程序：

```
mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=webapp -DarchetypeArtifactId=maven-archetype-webapp 
```

我已将**HelloWorld.java**放在 src.main.resources 文件夹中，代码如下：

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class HelloWorld extends HttpServlet{ 
  public void doGet(HttpServletRequest request, 
  HttpServletResponse response)
  throws ServletException,IOException{
  response.setContentType("text/html");
  PrintWriter pw = response.getWriter();
  pw.println("<html>");
  pw.println("<head><title>Hello World</title></title>");
  pw.println("<body>");
  pw.println("<h1>Hello World</h1>");
  pw.println("</body></html>");
  }
} 
```

我来自 src.main.webapp.WEB-INF 的**web.xml**看起来像：

```
!DOCTYPE web-app PUBLIC
          "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
          "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <display-name>Archetype Created Web Application</display-name>
    <servlet>
        <servlet-name>Hello</servlet-name>
        <servlet-class>HelloWorld</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Hello</servlet-name>
        <url-pattern>/HelloWorld</url-pattern>
    </servlet-mapping>
</web-app> 
```

这是我的**pom.xml**：

```
project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.mycompany.app</groupId>
  <artifactId>my-webapp</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>my-webapp Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
  <build>
    <finalName>my-webapp</finalName>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>tomcat-maven-plugin</artifactId>
        <configuration>
            <url>http://localhost:8080/manager/html</url>
            <server>mytomcat</server>
            <path>/my-app</path>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

然后我 `mvn package tomcat:deploy` 在链接 localhost:8080/web/HelloWorld 上键入和 -

```
HTTP Status 500 - Error instantiating servlet class HelloWorld

type Exception report

message Error instantiating servlet class HelloWorld

description The server encountered an internal error that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Error instantiating servlet class HelloWorld    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)  org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)   org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)     org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)     org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)     org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)     java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)     java.lang.Thread.run(Thread.java:680) root cause

java.lang.ClassNotFoundException: HelloWorld    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)     org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)     org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)  org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)   org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)     org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)     org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)     org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)     java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)     java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T10:00:19.660

> 我已将 HelloWorld.java 放在 src.main.resources 文件夹中

java 代码不应该在`src/main/resources`，它应该在`src/main/java`.

您`HelloWorld.java`从未构建过，因此tomcat无法找到它。您的`war`文件不包含`HelloWorld.class`.

# loops - 在 Coldfusion 中创建随机字符串时如何检查重复值？

> ID：12562620
> 
> 赞同：1
> 
> 时间：2012-09-24T09:53:42.173
> 
> 标签：loops, random, coldfusion, while-loop, duplicates

我正在运行`Coldfusion8/MySQL 5.0.88`并有带有 id 的表，这些表是随机字符串 az 0-9

我想在表中创建新记录时避免重复条目，但我不确定如何正确设置它。

这是我所拥有的：

```
<cfset variables.listOfAppIds = "">

<!--- get all ids --->
<cfquery datasource="db" name="app_ids">
    SELECT app_id FROM apps
</cfquery>

<!--- create comma-separated list --->
<cfloop query="app_ids">
    <cfset variables.listOfAppIds = variables.listOfAppIds & "," & app_ids.app_id>
</cfloop>

<!--- create random string and test if it is in listOfAppIds --->
<cfloop condition="#ListFindNoCase(variables.listOfAppIds, variables.rndString, ',')#">
    <cfset variables.stringLength = 10>
    <cfset variables.stringList = "0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z">
    <cfset variables.rndString = "">
    <cfloop from="1" to="#variables.stringLength#" index="i">
        <cfset variables.rndNum = RandRange(1, listlen(variables.stringList))>
        <cfset variables.rndString = variables.rndString & listGetAt(variables.stringlist, variables.rndNum)>
    </cfloop>
    <cfset variables.current_appId = variables.rndString>
</cfloop> 
```

**问题：**
我不确定我是否使用`while-loop`正确。这会确保没有找到重复项吗？

感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T10:06:42.693

我会重新考虑这种方法。您可以使用 GUID，然后根本不检查（很多应用程序都会这样做）。

或者创建新的随机 ID，然后查询数据库以查看是否有冲突。这样，数据库就会为您处理相同的逻辑。那么你的逻辑是：

```
collision=true;
while (collision=true) {
    newID=RandomIdFunction();
    SELECT app_id FROM apps where app_id = newID;
    if query had no rows, set collision=false;
} 
```

随着数据库填满，冲突的可能性会变得更高，这将变得更慢，这就是为什么如果可以的话我可能会使用 GUID 方法。

# objective-c - 无法调用 DCRoundSwitch UIControlEventTouchUpInside 事件

> ID：12562622
> 
> 赞同：0
> 
> 时间：2012-09-24T09:53:57.340
> 
> 标签：objective-c, ios, custom-controls, uiswitch

我使用 DCRoundSwitch 创建自定义开关，问题是我无法调用 UIControlEventTouchUpInside 事件，但只有 UIControlEventValueChanged 事件被调用。

以下是我在 viewdidload 中编写的代码：

```
self.swtchDailyReminder.on = YES;
self.swtchDailyReminder.onTintColor =[UIColor colorWithRed:47.0/255.0 green:160.0/255.0
blue:158.0/255.0 alpha:1.0];
[self.swtchDailyReminder addTarget:self action:@selector(switchDailyReminderToggled:)
forControlEvents:UIControlEventTouchUpInside]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T03:50:25.627

`UIControlEventTouchUpInside`消息由' `DCRoundSwitch`s`touchesEnded`方法发送。因此，需要调用此方法才能让您的交换机接收消息以触发您的操作。这不会发生，因为`touchesCancelled`是由`UIGestureRecognizer`s 发送的——当它们识别出他们的手势时，它们会自动取消对其他视图的触摸。`UIGestureRecognizer`如果在创建 s 并使用它们的属性附加到开关（在`DCRoundSwitch`的 setup 方法中）时关闭此行为`cancelsTouchesInView`，这将允许 touchesEnded 将其`UIControlEventTouchUpInside`消息发送到您的开关，以便可以触发您的操作。

希望这可以帮助。

// 注意：如果你的目标动作要运行一些动画，你需要做一些进一步的改变`DCRoundSwitch`来防止它阻塞你的动画。有关更多详细信息，请参阅[此 SO 答案](https://stackoverflow.com/questions/12585923/uiview-animation-not-working-when-used-with-dcroundswitch/14064309#14064309)

# terminal - Sublime Text 2 中的终端窗口

> ID：12562624
> 
> 赞同：51
> 
> 时间：2012-09-24T09:54:15.153
> 
> 标签：terminal, sublimetext2

我看到[这个项目](http://wbond.net/sublime_packages/terminal)基本上从 sublime text-2 中打开了一个新的终端窗口。
我正在寻找的是一种通过控制台**在**sublime text 2 中打开终端的方法。
有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-24T10:58:58.770

SublimeREPL 做你想做的事

[https://github.com/wuub/SublimeREPL/](https://github.com/wuub/SublimeREPL/)

当然，有一些限制，因为 Sublime Text 2 的窗口最初不是为标准输入的连续运行缓冲区而设计的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-05-21T20:08:51.237

+ 2 年（抱歉）- 但我在 ubuntu 中的解决方案是在同一个窗口中打开 sublime 和我的（真实）终端，收缩和拉伸终端以覆盖屏幕的下部，然后右键单击终端并选择“保持领先” - 一种享受。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-07-29T01:54:00.710

**编辑 04/23/2019：** [Terminus](https://packagecontrol.io/packages/Terminus)扩展 TerminalView 并添加：

*   视窗支持
*   连续的历史
*   易于定制的主题（请参阅 Terminus 实用程序）
*   Unicode 支持
*   256色支持
*   更好的 xterm 支持
*   终端面板视图
*   imgcat 支持（也适用于 Linux / WSL）

绑定快捷键以在文件路径上打开 shell（例如`ctrl+alt+t`打开）：

```
{ 
  "keys": ["ctrl+alt+t"], "command": "terminus_open", "args": {
    "cwd": "${file_path:${folder}}"
  }
} 
```

[![在此处输入图像描述](../Images/ad4376d0506883082eef914106270fab.png)](https://i.stack.imgur.com/PfVTB.gif)

[![在此处输入图像描述](../Images/f4dc302c0b6bb37b3c4a2034108fb485.png)](https://i.stack.imgur.com/c99yZ.gif)

* * *

**原答案：**

我已经尝试了几乎所有终端包，你想要的是[TerminalView](https://packagecontrol.io/packages/TerminalView)：

[![在此处输入图像描述](../Images/42df7e2c959cdcf21adb26f667c4ddef.png)](https://i.stack.imgur.com/PJDi9.gif)

要绑定快捷键，只需将其添加到您的用户快捷键绑定文件中：

```
{ "keys": ["ctrl+alt+t"], "command": "terminal_view_open" }, 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-08T11:35:33.393

使用胶水。它是一个插件，它提供了从 Sublime Text 到你的 shell 的接口。所以基本上它是 Sublime Text 的终端。

[https://packagecontrol.io/packages/Glue](https://packagecontrol.io/packages/Glue)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-31T01:50:58.070

像@mikko 一样，我也决定由于 sublime 的 shell 附加组件的限制，坚持使用真正的终端窗口 - 我已经习惯了 geany 的 F2-F4 工作流程。

所以对我来说，真正的问题是在两个窗口之间快速切换。为此，我把它搞砸了——在你的桌面管理器（在我的例子中是 XFCE）中被 F12（或任何你想要的）解雇

请注意，我从快捷方式启动了 sublime，`terminator -T st3_bash & st3`因此我有一个已知的 bash 窗口标题，用于将焦点切换到。

[https://gist.github.com/robertpearce/8725224](https://gist.github.com/robertpearce/8725224)

我知道这段代码真的，（真的）很糟糕，如果你打开了多个 sublime，它会失败，但无论如何我都没有。

随意分叉和改进它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-27T11:21:07.753

我一直想要一种在崇高文本中打开终端的方法。在尝试了不同的选项后，我找到了在 linux 系统上安装 guake 终端作为解决方案的解决方案，请按照以下步骤操作。

1.  运行命令`sudo apt-get install guake`
2.  按 F12（打开终端）

现在您可以在不离开 sublime 的情况下使用终端。

对于窗户：

1.  安装[Conemu](https://conemu.github.io/)
2.  具有如下图所示的 Quake 设置
3.  按 ctrl + ~ （用于打开终端）

注意：这只是一种解决方法。Guake 基本上是一个类似 ubuntu 的 linux 系统的终端包。

[![Conemu的地震设置](../Images/df6b5f590768d485c00c0967ccb8ec83.png)](https://i.stack.imgur.com/qx9c7.png)

# php - 如何从 cgridview 打印到 csv？

> ID：12562626
> 
> 赞同：0
> 
> 时间：2012-09-24T09:54:37.520
> 
> 标签：php, csv, yii, yii-extensions, cgridview

问：如何将过滤后的数据从 cgridview 打印到 csv？

状态：我按照[这里](http://www.yiiframework.com/wiki/306/exporting-cgridview-results-to-csv-file/)的说明进行操作。但现在我得到了平面 csv(excel) 文件。没有标题，没有数据。

这是视图

```
<?php
echo CHtml::button('Export', array('id'=>'export-button','class'=>'span-3 button')); 
?>
    <?php $this->widget('zii.widgets.grid.CGridView', array(
        'id'=>'request-grid',
        'dataProvider'=>$model->creator(),
        'filter'=>$model,
        'columns'=>array(
            'request_no',
            array(
                  'name'=>'request_type_id',
                  'value'=>'$data->requesttypes->name',
            ),
            array(
                  'name'=>'request_category_id',
                  'value'=>'$data->requestcategories->name',
            ),
            array(
                  'name'=>'financial_type_id',
                  'value'=>'$data->requestfinanicaltypes->name',
            ),
            array(
                  'name'=>'urgency_id',
                  'value'=>'$data->requesturgent->name',
            ),
            'status',
            'eta_date',
            'completed_date',
            'created_date',

            array(
            'class'=>'CButtonColumn',
            'template'=>'{update}{view}{copy}',
            'buttons'=>array(
                    'delete'=>array(
                        'visible'=>'true',
                        'options'=>array('style'=>'align:left;'),
                    ),
                    'view'=>array(
                        'visible'=>'true',
                        'options'=>array('style'=>'align:left;'),
                    ),              
                    'update'=>array(
                        'visible'=>'$data->status == \'Pending\'',
                    ),
                    'copy'=>array(
                        'imageUrl'=>Yii::app()->request->baseUrl.'/images/assets/Copy2.png',      
                        'url'=>'Yii::app()->createUrl("creator/copy", array("id"=>$data->id))',
                        'options'=>array('style'=>'border:none;'),
                    ),
                ),
            'htmlOptions'=>array(
                                    'style'=>'text-align: right; padding-right:3px;'
                            ),
            ),
        ),
    )); ?>

    <?php
    Yii::app()->clientScript->registerScript('delete-item', "

    $('#export-button').on('click',function() {

        $.fn.yiiGridView.export();
    });
    $.fn.yiiGridView.export = function() {
        $.fn.yiiGridView.update('request-grid',{ 
            success: function() {
                $('#request-grid').removeClass('grid-view-loading');
                window.location = '". $this->createUrl('exportFile')  . "';
            },
            data: 'export=true'
        });
    }
    ");
    ?> 
```

这是我的控制器

```
public function actionExport()
{
    $fp = fopen('php://temp', 'w');

    /* 
     * Write a header of csv file
     */
    $headers = array(
        'request_no',               
        'status',
        'eta_date',
        'completed_date',
        'created_date',
    );
    $row = array();
    foreach($headers as $header) {
        $row[] = Request::model()->getAttributeLabel($header);
    }
    fputcsv($fp,$row);

    /*
     * Init dataProvider for first page
     */
    $model=new Request('Creator');
    $model->unsetAttributes();  // clear any default values
    if(isset($_GET['Request'])) {
        $model->attributes=$_GET['Request'];
    }
    $dp = $model->search();

    /*
     * Get models, write to a file, then change page and re-init DataProvider
     * with next page and repeat writing again
     */
    while($models = $dp->getData()) {
        foreach($models as $model) {
            $row = array();
            foreach($headers as $head) {
                $row[] = CHtml::value($model,$head);
            }
            fputcsv($fp,$row);
        }

        unset($model,$dp,$pg);
        $model=new Request('Creator');
        $model->unsetAttributes();  // clear any default values
        if(isset($_GET['Request']))
            $model->attributes=$_GET['Request'];

        $dp = $model->search();
        $nextPage = $dp->getPagination()->getCurrentPage()+1;
        $dp->getPagination()->setCurrentPage($nextPage);
    }

    /*
     * save csv content to a Session
     */
    rewind($fp);
    Yii::app()->getRequest()->sendFile('aa.csv', stream_get_contents($fp), "text/csv", false);
    //Yii::app()->user->setState('export',stream_get_contents($fp));
    fclose($fp);
}

public function actionExportFile()
{
    Yii::app()->request->sendFile('export.csv',Yii::app()->user->getState('export'));
    Yii::app()->user->clearState('export');
} 
```

我哪里错了？

=========================更新

[我在这里](http://www.yiiframework.com/extension/csvexport/)移到另一个扩展，然后在[这里使用 CalCS](http://www.yiiframework.com/forum/index.php/topic/16402-cgridview-and-phpexcel/)

现在我正在堆叠以导出关系数据，并且一些字段由 csv 和 jason 保存数据。我不知道在报告中导出这些数据。请帮我。

这是我的模特

```
public function creator()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id,true);
        $criteria->compare('request_no',$this->request_no,true);
        //$criteria->condition('creator',$this->creator);

        $criteria->condition = 'creator =' . Yii::app()->user->id;

        $criteria->compare('request_type_id',$this->request_type_id);
        $criteria->compare('request_category_id',$this->request_category_id);
        $criteria->compare('financial_type_id',$this->financial_type_id);
        $criteria->compare('urgency_id',$this->urgency_id);
        $criteria->compare('description',$this->description,true);
        $criteria->compare('eta_cost_usd',$this->eta_cost_usd,true);
        $criteria->compare('eta_cost_kyats',$this->eta_cost_kyats,true);
        $criteria->compare('final_cost_Ks',$this->final_cost_Ks,true);
        $criteria->compare('final_cost_USD',$this->final_cost_USD,true);
        $criteria->compare('exchange_rate_Ks',$this->exchange_rate_Ks);
        $criteria->compare('exchange_date',$this->exchange_date,true);
        $criteria->compare('status',$this->status);
        $criteria->compare('reviewers',$this->reviewers,true);
        $criteria->compare('approvers',$this->approvers,true);
        $criteria->compare('approved_date',$this->approved_date,true);
        $criteria->compare('force_approved',$this->force_approved);
        $criteria->compare('implementers',$this->implementers);
        $criteria->compare('eta_date',$this->eta_date,true);
        $criteria->compare('completed_date',$this->completed_date,true);
        //$criteria->compare('created_date',$this->created_date,true);

        $criteria->order = ' created_date DESC';
         $data = new CActiveDataProvider(get_class($this), array(
                        'pagination'=>array('pageSize'=> Yii::app()->user->getState('pageSize',
                                                                        Yii::app()->params['defaultPageSize']),),
                        'criteria'=>$criteria,
                ));
        $_SESSION['Lectivo-excel']=$data; // get all data and filtered data :)

        /*return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
        */
        return $data;
    } 
```

这是我的观点

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'request-grid',
    'dataProvider'=>$model->creator(),
    'filter'=>$model,
    'columns'=>array(
        //'id',
        'request_no',
        //'creator',
        array(
              'name'=>'request_type_id',
              'value'=>'$data->requesttypes->name',
        ),
        array(
              'name'=>'request_category_id',
              'value'=>'$data->requestcategories->name',
        ),
        array(
              'name'=>'financial_type_id',
              'value'=>'$data->requestfinanicaltypes->name',
        ),
        array(
              'name'=>'urgency_id',
              'value'=>'$data->requesturgent->name',
        ),
        'status',
        'eta_date',
        'completed_date',
        'created_date',
        /*
        'description',
        'eta_cost_usd',
        'eta_cost_kyats',
        'final_cost_Ks',
        'final_cost_USD',
        'exchange_rate_Ks',
        'exchange_date',
        'status_id',
        'reviewers',
        'approvers',
        'approved_date',
        'force_approved',
        'implementer',
        'eta_date',
        'completed_date',
        'created_date',
        */
        array(
        'class'=>'CButtonColumn',
        'template'=>'{update}{view}{copy}',
        'buttons'=>array(
                'delete'=>array(
                    'visible'=>'true',
                    'options'=>array('style'=>'align:left;'),
                ),
                'view'=>array(
                    'visible'=>'true',
                    'options'=>array('style'=>'align:left;'),
                ),              
                'update'=>array(
                    'visible'=>'$data->status == \'Pending\'',
                ),
                'copy'=>array(
                    'imageUrl'=>Yii::app()->request->baseUrl.'/images/assets/Copy2.png',      
                    'url'=>'Yii::app()->createUrl("creator/copy", array("id"=>$data->id))',
                    'options'=>array('style'=>'border:none;'),
                ),
            ),
        'htmlOptions'=>array(
                                'style'=>'text-align: right; padding-right:3px;'
                        ),
        ),
    ),
)); ?>

</div>
<?php $this->endWidget(); ?>
</div>

<div id='menub'>
<?php   
$this->widget('zii.widgets.CMenu', array(
'encodeLabel'=>false,
'htmlOptions'=>array('class'=>'actions'),
'items'=>array(
               array(
                     'label'=>Yii::t('internationalization', 'Exportar'),
                    'url'=>array('CREATOR/Excel'),

))));
?></div></div> 
```

这是我的控制器

```
public function actionExcel() {

        $d = $_SESSION['Lectivo-excel'];

        $data = array();

        $data[]=array_keys($d->data[0]->attributes);//headers: cols name

        foreach ($d->data as $item) {
            $data[] = $item->attributes;

        }

        Yii::import('application.extensions.phpexcel.JPhpExcel');
        $xls = new JPhpExcel('UTF-8', false, 'test');
        $xls->addArray($data);
        $xls->generateXML('filename'); //export into a .xls file
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:32:07.400

这是模型（aaa.php）

```
public function creator()

    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id,true);

        ...........

        $criteria->order = ' created_date DESC';
         $data = new CActiveDataProvider(get_class($this), array(
                    'pagination'=>array('pageSize'=> Yii::app()->user->getState('pageSize',
                                                                    Yii::app()->params['defaultPageSize']),),
                    'criteria'=>$criteria,
            ));
        $_SESSION['excel-current']=$data; // get all data and filtered data :)

        return $data;
    } 
```

这是控制器

```
public function actionIndex()
    {
        $model=new Request('creator');
        $model->scenario = "CreatorIndex";
        $model->unsetAttributes();  // clear any default values
        if(isset($_GET['Request']))
            $model->attributes=$_GET['Request'];

        $this->render('index',array(
            'model'=>$model,
        ));
    }
public function actionExcel() {

        $d = $_SESSION['excel-current'];

        $data = array();
        //$data[]=array_keys($d->data[0]->attributes);//headers: default cols name

        // default data add
        foreach ($d->data as $item) {
            $data[] = $item->attributes;

        }

        // Custome cols
        $data[0][0] = 'Request No';

        .............

        $data[0][20] = 'Created Date';
        $i=1;

                // custom add data
        foreach($d->data as $item)
        {

            $data[$i][0] = $item->request_no;

                        ............

            $data[$i][20] = $item->created_date;
            $i++;
        }

        Yii::import('application.extensions.phpexcel.JPhpExcel');
        $xls = new JPhpExcel('UTF-8', false, 'test');
        $xls->addArray($data);
        $xls->generateXML('filename'); //export into a .xls file
    } 
```

这是我使用的[phpexcel 。](http://www.mediafire.com/?63pi7byoo99d657)（不是他们网站上的完整 phpexcel 库。）

在 views/aaa/index.php 调用 ?r=aaa/excel，这将导出您当前过滤的数据或第一页数据。

# ios - 包含某个 SDK 时 XCode Upload 挂起

> ID：12562627
> 
> 赞同：0
> 
> 时间：2012-09-24T09:54:49.833
> 
> 标签：ios, xcode, upload, organizer

这是我在 XCode 中遇到过的最奇怪的问题。

最近我想在我的应用程序中添加某个 SDK。我不会为这个 SDK 命名，因为我不想抹黑他们的名字。无论如何，奇怪的是，每当我将 SDK 包含到我的应用程序中时，虽然它可以在应用程序中正常工作，但在上传期间（验证成功后），上传程序只是挂在那里并且很长时间没有上传任何数据（我等了大约10分钟）。一点进展都没有。

然后我删除了SDK，并注释掉了相关的SDK代码（只是代表），我可以正常上传。然后可以肯定的是，我添加了 SDK 并实现了 SDK 代码，再次归档应用程序、验证并尝试上传，但它又卡在那里了。

有人知道为什么会这样吗？

这太烦人了。主办方也没有给出任何消息。

# css - 网页字体并提供备用字体

> ID：12562631
> 
> 赞同：9
> 
> 时间：2012-09-24T09:55:09.043
> 
> 标签：css, fonts, font-face, webfonts

使用`web fonts`using时，`@font-face`我想知道使用后备字体的推荐方法是什么？

例如，如果我使用的是粗体的网络字体，例如：

```
@font-face {
    font-family: 'OpenSansBold';
    src: url('../fonts/OpenSans-Bold-webfont.eot');
    src: url('../fonts/OpenSans-Bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/OpenSans-Bold-webfont.woff') format('woff'),
         url('../fonts/OpenSans-Bold-webfont.ttf') format('truetype'),
         url('../fonts/OpenSans-Bold-webfont.svg#OpenSansBold') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

现在，当您调用它时，您显然只是这样做：

```
font-family: OpenSansBold; 
```

但是，我想知道是否提供后备字体，例如字体下载是否因任何原因而失败。

显然，使用正常样式字体（非粗体/非斜体）很容易，如下所示..

```
font-family: OpenSansRegular, Arial; 
```

但是，我想知道字体是粗体还是斜体时会怎样。

是否建议这样做并且不会影响网络字体？

```
font-family: OpenSansBold, Arial;
font-weight: bold; 
```

只是想知道，因为如果您没有指定粗体，那么如果网络字体失败，他们会得到 Arial，但不会是粗体。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T11:16:34.580

您可能正在使用 FontSquirrel 生成的字体文件和 CSS 文件。他们的方法的问题在于，每种特定字体（例如 Open Sans Regular 和 Open Sans Bold）都表示为单独的字体系列，字体粗细设置为正常。这意味着您将被迫显式设置字体，而不是像标记`<p>foo <strong>bar</strong>`和简单的 CSS `p { font-family: Open Sans, Arial }`（让浏览器默认使用粗体字重并从 Open Sans 系列中选择合适的字体）。这意味着使用属性值`strong`隐式设置字体系列和字体粗细。`font-family`

您需要调整 CSS 以获得更好的方法。您将在规则中使用相同的字体系列但不同的权重`@font-family`，并且在`font-family`规则中，您只需设置系列：

```
@font-face {
    font-family: 'open_sans';
    src: url('opensans-bold-webfont.eot');
    src: url('opensans-bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('opensans-bold-webfont.woff') format('woff'),
         url('opensans-bold-webfont.ttf') format('truetype'),
         url('opensans-bold-webfont.svg#OpenSans') format('svg');
    font-weight: bold;
    font-style: normal;
}   
@font-face {
    font-family: 'open_sans';
    src: url('opensans-regular-webfont.eot');
    src: url('opensans-regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('opensans-regular-webfont.woff') format('woff'),
         url('opensans-regular-webfont.ttf') format('truetype'),
         url('opensans-regular-webfont.svg#OpenSans') format('svg');
    font-weight: normal;
    font-style: normal;
}
* { font-family: open_sans, Arial; } 
```

然后，您只需将`font-weight: bold`（或默认情况下具有这种效果的 HTML 标记，如`strong`, `b`, `th`, `h1`through `h6`）用于应该出现在 Open Sans Bold 中的那些元素。

按照您描述的方式进行操作似乎也适用于大多数浏览器，但我不会指望它。一旦你在你`@font-face`的`font-weight: bold`.加粗。如果我没记错的话，b) 是在 Safari (Win 7) 上发生的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-24T10:03:09.267

您正确地强调了网络字体的“新时代”的问题，这篇博文讨论了它并提出了一种解决方法[http://elliotjaystocks.com/blog/font-weight-in-the-age-of-web-字体/](http://elliotjaystocks.com/blog/font-weight-in-the-age-of-web-fonts/)

相关片段

> 第二个问题明显大于第一个问题。考虑 FF Enzo，它没有 400（甚至 500）的重量。在某些情况下，它的 Light (300) 重量对于体型较小的人来说可能有点太薄，所以让我们改用 600 的重量。啊，看起来还可以。
> 
> 但是这样不行！因为如果该字体无法显示并且我们回退到其他字体，则该回退字体将以 600 的权重呈现；换句话说：粗体。

**一种解决方法？**

有一种解决方法，这是 FontsLive 在他们为用户生成的 CSS 中使用的方法：您单独声明每个权重，而不是整个家庭。他们的代码看起来有点像这样：

CSS 代码：

```
{ font-family: 'FamilyName Light', 'FallbackFamily', serif; font-weight: normal; }
{ font-family: 'FamilyName Medium', 'FallbackFamily', serif; font-weight: normal; }
{ font-family: 'FamilyName Bold', 'FallbackFamily', serif; font-weight: bold; }
{ font-family: 'FamilyName Black', 'FallbackFamily', serif; font-weight: bold; } 
```

**更新：**

```
@font-face {
    font-family: 'OpenSansBold';
    src: url('../fonts/OpenSans-Bold-webfont.eot');
    src: url('../fonts/OpenSans-Bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/OpenSans-Bold-webfont.woff') format('woff'),
         url('../fonts/OpenSans-Bold-webfont.ttf') format('truetype'),
         url('../fonts/OpenSans-Bold-webfont.svg#OpenSansBold') format('svg');
    font-weight: bold;
    font-style: normal;
} 
```

然后像（如你所建议的那样）：

```
{ font-family: OpenSansBold, 'Arial'; font-weight: bold; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-11T08:22:27.840

虽然接受的答案有效，但如果您想提供真正准确的后备字体，您还需要为每个后备定义单独的行高和字母间距。这样做的主要原因是谷歌最近引入了一个关于累积布局移位（CLS）的分数，表明页面在加载时跳转了多少。

您可以通过在字体加载之前在 body 上放置一个 CSS 类来实现这一点，如果字体加载成功完成，它将被删除。我通过在页面顶部附近包含这个来做到这一点：

```
<script>!function(d){if (d.fonts.ready){d.body.className="loading";d.fonts.ready.then(function(){d.body.className=""})}}(document)</script> 
```

你的 CSS 然后看起来像这样：

```
h1,p {font-family: Open Sans, Arial}
h1.loading {font-family: Arial;line-height:16px}
p.loading {font-family: Arial;line-height:12px} 
```

通过在检查器中添加和删除“加载”类，您可以使用 CSS 来让它停止跳来跳去。有了这个，您可以可靠地将 CLS 归零以取悦 Google 之神。我发现的唯一替代方法是使用字体加载器库，它会减少加载时间。

# java - Google App Engine 无法部署并显示“版本未准备好”消息

> ID：12562638
> 
> 赞同：1
> 
> 时间：2012-09-24T09:55:48.173
> 
> 标签：java, google-app-engine

我使用 Eclipse 将我的 java 代码部署到 Google App Engine。但是在过去的两周里，我发现它经常挂在前端的“验证可用性”上。用一堆“60秒后再次检查”等了很久，部署失败。通过反复试验，我也发现如果我删除后端或者有时完全删除版本并重新部署，它更有可能成功。以下是错误消息：

```
Unable to update:
java.lang.RuntimeException: Version not ready.
at com.google.appengine.tools.admin.AppVersionUpload.commit(AppVersionUpload.java:572)
at com.google.appengine.tools.admin.AppVersionUpload.doUpload(AppVersionUpload.java:143)
at com.google.appengine.tools.admin.AppAdminImpl.doUpdate(AppAdminImpl.java:328)
at com.google.appengine.tools.admin.AppAdminImpl.update(AppAdminImpl.java:52)
at com.google.appengine.eclipse.core.proxy.AppEngineBridgeImpl.deploy(AppEngineBridgeImpl.java:433)
at com.google.appengine.eclipse.core.deploy.DeployProjectJob.runInWorkspace(DeployProjectJob.java:148)
at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:25:32.593

我使用 GAE Python。当我在部署应用程序时遇到问题时，我必须先回滚才能再次部署应用程序。有时在应用引擎团队的维护时间内部署失败（以您描述的方式）。为了解决这个问题，我不得不等待几个小时。

# c++ - Wix：从 C++ 自定义操作添加到列表框

> ID：12562643
> 
> 赞同：6
> 
> 时间：2012-09-24T09:56:14.917
> 
> 标签：c++, wix, custom-action

嗨，我正在尝试检查用户机器上的 COM 端口，然后通过 C++ 中的自定义操作将它们插入到列表框中。虽然它没有显示信息并且当我调试时它只是说“函数执行失败”这是我的列表框的 Wix 代码：

```
 <Control Id="ListBoxID" Type="ListBox" Property="COMPORT" Width="80" Height="40" X="80" Y="165" Indirect="no">
      <ListBox Property="COMPORT">
      </ListBox>
      <Condition Action="hide">(DEVICETYPE = "1")</Condition>
      <Condition Action="show">(DEVICETYPE = "2")</Condition>
      <Condition Action="show">(DEVICETYPE = "3")</Condition>
      <Condition Action="hide">(DEVICETYPE = "4")</Condition>
    </Control> 
```

这是我的自定义操作：

```
extern "C" UINT __stdcall GetDatascanPort(MSIHANDLE hInstall)
{

HRESULT hr = S_OK;
UINT er = ERROR_SUCCESS;
HKEY keyHandle;
DWORD i,openStatus,cb_value_buffer,cb_buffer,dwType;
char value_buffer[100],buffer[10];
MSIHANDLE hTable = NULL;
MSIHANDLE hColumns = NULL;
MSIDBERROR insertError = MSIDBERROR_NOERROR; 

hr = WcaInitialize(hInstall, "GetDatascanPort");
ExitOnFailure(hr, "Failed to initialize");

WcaLog(LOGMSG_STANDARD, "Initialized.");

if (RegCreateKeyEx( HKEY_LOCAL_MACHINE,
                    "HARDWARE\\DEVICEMAP\\SERIALCOMM",
                    0,
                    "",
                    REG_OPTION_NON_VOLATILE,
                    KEY_QUERY_VALUE,
                    default_sa(),
                    &keyHandle,
                    &openStatus )  == ERROR_SUCCESS )
{
    for (i=0;;i++)
    {
        cb_value_buffer = sizeof(value_buffer);
        cb_buffer = sizeof(buffer);

        if (RegEnumValue(keyHandle,
                         i,
                         value_buffer,
                         &cb_value_buffer,
                         NULL,
                         &dwType,
                         (unsigned char *) buffer,
                         &cb_buffer) != ERROR_SUCCESS)
                         break;

        if (dwType != REG_SZ || strlen(buffer) > 6)
            continue;

        hr = WcaAddTempRecord(&hTable, &hColumns, L"ListBox",&insertError, 0, 4, L"COMPORT", 1, 0, buffer);
        ExitOnFailure(hr, "failed to set COMPORT"); 

    }

    RegCloseKey(keyHandle);

    if (hTable)
        MsiCloseHandle(hTable);
    if (hColumns)
        MsiCloseHandle(hColumns);
    return WcaFinalize(hr);

}

LExit:
er = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
return WcaFinalize(er);
} 
```

任何人都可以帮助我吗？谢谢

编辑：我让它更新我的列表框，但它不清晰，奇怪的符号。我像这样将我的 char 更改为 CString ，这似乎除了显示不正确之外还有效。

```
CString ComPort;
    ComPort = buffer;

hr = WcaAddTempRecord(&hTable, &hColumns, L"ListBox",&insertError, 0, 4, L"COMPORT", 1, ComPort, ComPort);
ExitOnFailure(hr, "failed to set COMPORT"); 
```

此外，目标计算机可能有串行端口，在 for 循环中将它们全部与我的函数一起列出的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:03:45.293

我认为您向函数传递了太多参数。因为 WcaAddTempRecord 签名使用变量参数列表，所以它不会验证类型。

代替：

```
hr = WcaAddTempRecord(&hTable, &hColumns, L"ListBox",&insertError, 0, 4, L"COMPORT", 1, 0, buffer); 
```

尝试：

```
hr = WcaAddTempRecord(&hTable, &hColumns, L"ListBox",&insertError, 0, 4, L"COMPORT", nIndex,  buffer); 
```

`nIndex`您要插入的项目的基于 1 的索引在哪里。另外我不确定你是否可以使用`char`，你可能需要使用`wchar_t`。

尝试使用 wchar_t 缓冲区而不是 char 缓冲区进行快速测试，看看是否可行。删除所有其他代码，只需添加一个条目：

```
hr = WcaAddTempRecord(&hTable, &hColumns, L"ListBox",&insertError, 0, 4, L"COMPORT", 1,  L"TestPort"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:13:39.103

得到它的工作。这是我修改的代码，以防它可以帮助其他人：

```
 MultiByteToWideChar(CP_ACP,0,buffer,-1,ComPort,strlen(buffer));
        ComPort[strlen(buffer)]=0;

        hr = WcaAddTempRecord(&hTable, &hColumns, L"ListBox",&insertError, 0, 4, L"COMPORT", value++, ComPort, ComPort);
        ExitOnFailure(hr, "failed to set COMPORT"); 
```

感谢@snowdude，我知道我必须将字符转换为宽字符。

# java - Swing JCheckbox：使用自定义图标聚焦

> ID：12562646
> 
> 赞同：1
> 
> 时间：2012-09-24T09:56:27.117
> 
> 标签：java, swing, icons, jcheckbox

我用过

```
chkBox.setIcon();
chkBox.setSelectedIcon();
chkBox.setDisabledIcon();
chkBox.setDisabledSelectedIcon(); 
```

为我的 JCheckbox 设置自定义图标。但是现在，如果焦点移动到其中一个复选框，则它们周围不会显示边框或其他任何内容，这表明该复选框具有焦点。

有谁知道，当自定义复选框有焦点时如何提供一些反馈？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:10:42.573

您的问题肯定取决于您在应用程序中使用的外观 (L&F)（如果您没有设置 - 我猜您正在使用 MetalLookAndFeel？）。

无论如何，可能有很多解决方案：

1.  检查您的 JCheckBox 是否实际上是`focusable`和`focus painted`. 请注意，某些 L&F 可能会关闭焦点绘画 - 检查`checkBox.setFocusPainted()`方法。

2.  如果您对默认的焦点绘制不满意 - 您可能想要创建自己的 CheckBoxUI 来绘制更好的焦点指示器。不过，这需要一些 UI 创建方面的基本知识。

3.  如果您想直接在检查图标本身上绘制焦点指示，您可以创建自己的基于图标的实现，将其与当前检查状态一起绘制。如果你想看一个真实的例子，我已经在[其他关于状态相关图标的主题中发布了一个自定义图标示例。](https://stackoverflow.com/a/12301173/909085)

可能还有其他解决方案，但它们取决于您使用的 L&F...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:16:09.473

您可以使用这个现成的复选框替代品： [http ://codetoearn.blogspot.com/2013/01/swing-fantasy-checkbox-with-customized.html](http://codetoearn.blogspot.com/2013/01/swing-fantasy-checkbox-with-customized.html)

# jquery - SELECT 菜单中的选项被隐藏

> ID：12562647
> 
> 赞同：0
> 
> 时间：2012-09-24T09:56:28.750
> 
> 标签：jquery, select, menu, option, prepend

我正在尝试将“选择菜单”“添加到”DIV。菜单在 DIV 上的“鼠标悬停”上是“prependingTo”。在这个菜单中是带有一些选项的 SELECT。但是当我想选择其他选项时，SELECT 菜单中的选项被隐藏了。这没用。为什么 ？

[**例子**](http://jsfiddle.net/ynternet/8MSnh/)

***HTML：***

```
 <div id="add" style='width:200px; background:cyan;'> + + + + + + + + + </div>
 <div id="menu">
     <div style="display:inline-block;">
         <button>1</button>
         <button>2</button>
     </div>
     <div style="display:inline-block;">
         <select id="fs">
            <option value="Arial">Arial</option>
            <option value="Verdana ">Verdana </option>
            <option value="Impact ">Impact </option>
            <option value="Comic Sans MS">Comic Sans MS</option>
         </select>
     </div>

 </div>
 <br>
 <div id="cont">
    <div id="container">
       <div id="divA">1111<br><br>&nbsp;</div>
       <br>
       <div id="divB">2222<br><br>&nbsp;</div>
       <br>
       <div id="divC">33333<br><br>&nbsp;</div>
       <br>
       <div id="divD"><br>&nbsp;</div>
    </div>
 </div> 
```

***CSS：***

```
 #container{ padding: 100px;  }
  #menu{  font-size: 10px;  
       position: absolute;
       background-color: none;
       letter-spacing: 0px;
  }
  #divA{ background-color: yellow; }
  #divB{ background-color: red;  }
  .divB{ background-color: red; }
  #divC{ background-color: cyan; }
  #divD{ background-color: brown; } 
```

***jQuery：***

```
 $("#add").live("click", function() {
     var timestamp = Date.now();
     $("#container").prepend('<div class="divB" id="'+timestamp+'">'+timestamp+'<br><br></div>');
  });
  $("#container div").live({
     mouseover: function() {
        if( $(this).closest("#menu").length ){ return; }
        $('#menu').prependTo($(this));
     }
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:00:35.207

您可以使用`find`method 代替`closest`，`closest`选择元素的最近父元素并且您想查找元素的后代，您的 if 语句总是返回`false`，还请注意`live`已弃用，您可以使用`on`代替。

```
$(document).on({
        mouseover: function(e) {
            if( $(this).find("#menu").length ){ return; }
            // or if ( $('#menu', this).length ){ return; }
            $('#menu').prependTo($(this));

        }
}, "#container div"); 
```

[http://jsfiddle.net/h7y3Z/](http://jsfiddle.net/h7y3Z/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:12:19.190

像这样试试

```
$("#container").bind({
    mouseover: function() {
        if( $(this).closest("#menu").length ){ 
            return; 
        }
        $('#menu').prependTo(this);
        $("#container").unbind('mouseover');       
    }
}); 
```

# sql-server - 是否可以在不启用 DTC 的情况下在两个实例之间使用事务？

> ID：12562649
> 
> 赞同：0
> 
> 时间：2012-09-24T09:56:38.367
> 
> 标签：sql-server, msdtc

我有两个数据库实例位于两台服务器中。我想创建一个应用程序将数据插入第一个实例，然后在第二个实例上更新数据，如果其中一个进程失败，那么我想回滚所有操作。

数据库服务器不启用 DTC/MSDTC。我厌倦了使用事务范围，但没有运气。你们知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:40:46.840

> 如果这些过程之一失败，那么我想回滚所有操作

您正在描述分布式事务。要使用分布式事务，您需要一个事务协调器。你[不能一边吃蛋糕一边吃](http://en.wikipedia.org/wiki/Have_one%27s_cake_and_eat_it_too)。

如果您考虑更改的异步应用，还有其他选择，即。[复制](http://msdn.microsoft.com/en-us/library/ms151176.aspx)。这消除了分布式事务的要求，但是在将更改提交到第一台服务器之后，这些更改将异步应用到第二台服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:08:33.417

一种选择是将补偿代码放入您的应用程序中。例如，如果您的应用程序是基于 c# 的，您可以有一个 try...catch 块。在 catch 块中，您可以添加补偿代码以“撤消”您对第一台服务器上的数据所做的更改。

然而，最好的方法当然是向 DBA 提出启用 DTC 的案例

# c# - 使用 c# 确定在数组中多次出现的元素的所有索引

> ID：12562650
> 
> 赞同：1
> 
> 时间：2012-09-24T09:56:42.657
> 
> 标签：c#, string

调用**`Array.indexOf(input Array,"A")`**给出了输入数组中“A”的索引。但是如果“A”在输入数组中出现多次，如何使用类似的函数获取数组中“A”的所有索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:00:36.880

```
int[] indexes = input.Select((item, index) => new { item, index })
                     .Where(x => x.item == "A")
                     .Select(x => x.index)
                     .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:03:42.490

`Array`您可以在课堂上使用以下方法

```
public static int FindIndex<T>(
    T[] array,
    int startIndex,
    Predicate<T> match) 
```

它搜索从 startIndex 开始到最后一个元素结束的数组。

但是，它应该在循环中使用，并且在每次下一次迭代中`startIndex`都会被分配一个 value `= previousIndexFound + 1`。当然，如果这小于数组的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:16:24.127

`Array`您可以像这样为类编写扩展方法：

```
public static List<Int32> IndicesOf<T>(this T[] array, T value)
{
    var indices = new List<Int32>();

    Int32 startIndex = 0;
    while (true)
    {
        startIndex = Array.IndexOf<T>(array, value, startIndex);
        if (startIndex != -1)
        {
            indices.Add(startIndex);
            startIndex++;
        }
        else
        {
            break;
        }
    }

    return indices;
} 
```

使用示例：

```
 var symbols = new Char[] { 'a', 'b', 'c', 'a' };
    var indices = symbols.IndicesOf('a');
    indices.ForEach(index => Console.WriteLine(index)); 
```

# mysql - MySQL - 搜索所有数据库

> ID：12562655
> 
> 赞同：1
> 
> 时间：2012-09-24T09:56:55.803
> 
> 标签：mysql, database

我有一堆数据库，结构都一样。我需要的是每个数据库的表“config”、“serial”列和数据库名称的值。

有没有办法自动遍历数据库并获取数据库名称及其 config.serial 的值？

干杯，格温

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:58:32.280

```
SELECT <db>.<table>.config,<db>.<table>.serial,<otherdb>.<othertable>.config,<otherdb>.<othertable>.serial FROM <db>.<table>,<otherdb>.<othertable> WHERE ... 
```

# shell - shell 脚本：将命令发送到串行控制台并获取结果

> ID：12562656
> 
> 赞同：0
> 
> 时间：2012-09-24T09:56:57.253
> 
> 标签：shell, serial-port, freebsd, bsd

在我的计算机上是连接到串行接口的 Cisco WS-C3550，我可以使用以下命令连接到设备：

```
cu -l /dev/cuau0 -s 9600 
```

如果我连接到设备我发送以下命令

```
show interface FastEthernet0/2 
```

我想在 shell 脚本中使用这个命令的输出来获取一些值，我该怎么做？我使用 FreeBSD (pfsense 2.0.1) 作为操作系统。

我尝试任何类似的东西

```
echo 'show interface FastEthernet0/2' > cu -l /dev/cuau0 -s 9600 > test.log 
```

但这不起作用。我收到以下错误：

> 模棱两可的输出重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:35:34.123

尝试：

```
echo -e 'show interface FastEthernet0/2\n~.' | cu -l /dev/cuau0 -s 9600 > test.log 
```

`~.`断开连接参见[http://www.freebsd.org/cgi/man.cgi?query=cu&sektion=1](http://www.freebsd.org/cgi/man.cgi?query=cu&sektion=1)

# c# - 持久化应用程序变量/设置 C#

> ID：12562657
> 
> 赞同：2
> 
> 时间：2012-09-24T09:57:02.430
> 
> 标签：c#, visual-studio-2010, visual-studio

在我的应用程序中，我想将一个用于配置的变量作为项目的一部分持久化（我可以使用随附的文件来做到这一点，但这会很糟糕），以便在应用程序运行和保存时进行更改，以便它可以关闭并重新打开并保持相同的值。

在 Visual Studio 2010 C# 项目中，推荐或最佳实践方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:59:58.747

使用 App.config 或 Web.config。

示例：[这里](http://generally.wordpress.com/2007/09/27/using-appconfig-for-user-defined-runtime-parameters/)

这是推荐的最佳方法。

如果您不想使用“随附文件”（尽管已经说过它仍然是随附文件），您还可以将设置保存在数据库中（如果您正在使用）并在运行时加载它们。但是，您必须将连接字符串硬编码到您的数据库，如果连接字符串发生更改，这可能会很麻烦。

另请注意，连接字符串通常保存在标签下的 .Config 文件中`<connectionStrings></connectionStrings>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T10:00:03.223

使用 .Config 文件保存设置。开发人员可以使用配置文件来更改设置，而无需重新编译应用程序。

配置文件包含元素，这些元素是设置配置信息的逻辑数据结构。在配置文件中，您使用标签来标记元素的开始和结束。

[**配置文件**](http://msdn.microsoft.com/en-us/library/1xtk877y.aspx)

和

[**用于提供应用程序配置数据的配置设置文件**](http://www.codeproject.com/Articles/6538/Configuration-Settings-File-for-providing-applicat)

# cakephp - CakeEmail：没有渲染 Flash 消息

> ID：12562661
> 
> 赞同：1
> 
> 时间：2012-09-24T09:57:39.027
> 
> 标签：cakephp

在 CakePhp 2.0 中，使用 CakeEmail 新组件似乎不输出 flash 消息：在我的控制器中，我输入：

```
$email = new CakeEmail(array('log'=>true));
$email->transport('Debug'); 
```

在我看来

```
 echo $this->Session->flash('email'); 
```

但是什么都没有打印出来。在 2.0 中是否删除了该功能（闪存）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:05:50.900

蛋糕电子邮件库或组件或传输类都不会触及会话或编写任何此类闪存内容。据我所知，他们从来没有做过。但他们将电子邮件内容作为 DebugTransport 的数组返回。

所以你会想要获取返回的数组并将其记录下来：

```
$res = $this->Email->send();
$this->Session->setFlash($res ? 'Email sent' : 'Email not sent'); 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:06:18.910

当然，cakephp 2.0 中有 flash 功能，详情请查看：http: [//book.cakephp.org/2.0/en/core-libraries/components/sessions.html](http://book.cakephp.org/2.0/en/core-libraries/components/sessions.html)

如果你想在你的视图中获得你的 flash 消息，你必须首先在你的 Controller 动作中设置它。

```
//controller
$this->Session->setFlash('email');

//view
echo $this->Session->flash(); 
```

// 上面会输出。

```
<div id="flashMessage" class="message">
'email'.
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:08:08.267

在 Cake 2.x 中，调试传输不会在会话中设置电子邮件内容。只需检查返回值，`$contents = $email->send();`. $contents 将包含标题和消息，因此请根据需要使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-28T12:23:41.333

```
$response = $Email->send();

$response['headers']; // headers as string
$response['message']; // message body with attachments

$this->Session->setFlash($response['headers'].$response['message']); 
```

确保您的布局文件中有以下内容。

```
echo $this->Session->flash(); 
```

# android - Android：应用程序在 Nexus 7 上崩溃

> ID：12562667
> 
> 赞同：0
> 
> 时间：2012-09-24T09:57:48.763
> 
> 标签：android

我正在构建一个针对 Android 的所有设备的应用程序。但是我无法在 Nexus 7 上专门运行该应用程序。我已经检查了 stackoverflow 上存在的所有可能性，但我无法从这个问题中恢复过来。我在这里粘贴我的 AndroidManifest 文件。请查看并纠正我做错的地方。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.xxxxxxxxxxxxx"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true" >
</supports-screens>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT" />

<!-- Mobclix Required Permissions -->
<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<!-- Mobclix Optional Permissions -->
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:name=".AppSingleton"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Light.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".AppWidgetConfigure"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
        </intent-filter>
    </activity>

    <!-- widget stuff -->
    <receiver android:name=".MyAppWidgetProvider" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/my_appwidget_info" />
    </receiver>

    <!-- Mobclix Required Parameter -->
    <meta-data
        android:name="com.mobclix.APPLICATION_ID"
        android:value="6D72xxxxx-xxxxxxxxxxxx-xxxxxxx" />

    <activity
        android:name="com.mobclix.android.sdk.MobclixBrowserActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" />
    <activity
        android:name="UserPreference"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
</application> 
```

请给我一些建议。

DDMS 错误日志：

`09-24 16:26:48.424: E/AndroidRuntime(2213): FATAL EXCEPTION: main 09-24 16:26:48.424: E/AndroidRuntime(2213): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jutera.allsearch/com.jutera.allsearch.MainActivity}: java.lang.NullPointerException 09-24 16:26:48.424: E/AndroidRuntime(2213): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059) 09-24 16:26:48.424: E/AndroidRuntime(2213): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084) 09-24 16:26:48.424: E/AndroidRuntime(2213): at android.app.ActivityThread.access$600(ActivityThread.java:130) 09-24 16:26:48.424: E/AndroidRuntime(2213): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195) 09-24 16:26:48.424: E/AndroidRuntime(2213): at android.os.Handler.dispatchMessage(Handler.java:99) 09-24 16:26:48.424: E/AndroidRuntime(2213): at android.os.Looper.loop(Looper.java:137) 09-24 16:26:48.424: E/AndroidRuntime(2213): at android.app.ActivityThread.main(ActivityThread.java:4745) 09-24 16:26:48.424: E/AndroidRuntime(2213): at java.lang.reflect.Method.invokeNative(Native Method) 09-24 16:26:48.424: E/AndroidRuntime(2213): at java.lang.reflect.Method.invoke(Method.java:511) 09-24 16:26:48.424: E/AndroidRuntime(2213): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 09-24 16:26:48.424: E/AndroidRuntime(2213): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 09-24 16:26:48.424: E/AndroidRuntime(2213): at dalvik.system.NativeStart.main(Native Method) 09-24 16:26:48.424: E/AndroidRuntime(2213): Caused by: java.lang.NullPointerException 09-24 16:26:48.424: E/AndroidRuntime(2213): at com.jutera.allsearch.MainActivity.connectionAvailable(MainActivity.java:748) 09-24 16:26:48.424: E/AndroidRuntime(2213): at com.jutera.allsearch.MainActivity.onCreate(MainActivity.java:159) 09-24 16:26:48.424: E/AndroidRuntime(2213): at android.app.Activity.performCreate(Activity.java:5008) 09-24 16:26:48.424: E/AndroidRuntime(2213): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 09-24 16:26:48.424: E/AndroidRuntime(2213): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 09-24 16:26:48.424: E/AndroidRuntime(2213): ... 11 more 09-24 16:26:51.684: D/dalvikvm(2213): GC_CONCURRENT freed 368K, 10% free 7726K/8519K, paused 12ms+12ms, total 46ms`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:32:33.387

为我工作！我如何检查我的互联网连接存在一些问题。这是我解决的代码：

```
/**
 * Checking network state
 * */
public boolean connectionAvailable() {
    ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager
            .getActiveNetworkInfo();
    return activeNetworkInfo != null;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T10:16:25.750

```
<supports-screens android:normalScreens="true" android:resizeable="true" android:anyDensity="true" android:largeScreens="true" android:smallScreens="true" android:xlargeScreens="true"></supports-screens> 
```

请参阅上面的代码并添加对 xlargeScreens 的支持！

# opencv - 使用 OpenCV 将 IplImage 写入 .avi 文件

> ID：12562673
> 
> 赞同：0
> 
> 时间：2012-09-24T09:58:02.193
> 
> 标签：opencv

我想要做的是从网络摄像头（在服务器端）捕获帧，并通过套接字（使用 Qt）发送它们并将它们保存到客户端的 .avi 文件中。

我设法从服务器端的网络摄像头（使用 OpenCV）抓取帧，我必须从 IplImage 转换为 QImage（所以我可以通过 QTcpSocket 发送图像）。在客户端，我收到 QImage，将其转换回 IplImage，这样我就可以将接收到的帧写入 .avi 文件。

问题是，我无法将接收到的帧（之前转换为 IplImage）写入 .avi 文件。当我构建项目或运行项目时，我没有收到任何错误。.avi 文件已创建，但为空。我设法使用 cvShowImage() 显示 IplImages。

为了将帧写入 .avi（在客户端），我使用了 cvWriteFrame()。

我在 32 位 windows7 上使用 Qt Creator 2.4.1 和 OpenCV 库 2.4.2。

# wolfram-mathematica - 找到所有第一个连续的素因子并找到 Mathematica 的最大值

> ID：12562675
> 
> 赞同：-1
> 
> 时间：2012-09-24T09:58:12.413
> 
> 标签：wolfram-mathematica, prime-factoring

让

> 2|n, 3|n,..., p_i|n, p_j|n,..., p_k|n
> 
> p_i < p_j< ... < p_k

其中直到 p_i 的所有素数除以 n 和

> j > i+1

我想在 Mathematica 中编写代码来查找 p_i 并确定 {2,3,5,...,p_i}。

谢谢。

> B = {};
> 
> n = 2^6 * 3^8 * 5^3 * 7^2 * 11 * 23 * 29；
> 
> 对于[i = 1, i <= k, i++,
> 
> If[Mod[n, Prime[i]] == 0, AppendTo[B, Prime[i]]
> 
> If[Mod[n, Prime[i + 1]] > 0, Break[]]]];
> 
> mep1=最大[B]；
> 
> 乙
> 
> mep1

结果是

> {2,3,5,7,11}
> 
> 11

我想编写代码而不是 B 来获得 B[n]，因为我需要为给定的 n 绘制 mep1[n] 的图形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:26:25.490

如果我正确理解您的问题和代码，您需要整数的素数列表，`n`但只有该列表的初始部分与所有素数列表的初始部分匹配。

我将首先观察到您发布的内容看起来更像 C 或其亲属之一，而不像*Mathematica*。事实上，您似乎根本没有使用过*Mathematica*内置函数的任何功能。如果您想真正使用*Mathematica*，您需要开始熟悉这些功能；如果这对 C 及其同类语言没有吸引力，那么它是一种相当有用的编程语言。

我要采取的第一步是获得这样的主要因素`n`：

```
listOfFactors = Transpose[FactorInteger[n]][[1]] 
```

查看文档以了解`FactorInteger`返回的详细信息；在这里，我使用转置和部分来仅获取主要因子列表并删除它们的系数。你可能没有注意到`Part`函数的使用，双方括号是常用的符号。另请注意，我在这台机器上没有*Mathematica*，所以我的语法可能有点错误。

接下来，您只需要那些`listOfFactors`与所有素数列表中的相应元素匹配的元素。分两步执行此操作。首先，获取从 1 到`k`两个列表匹配的整数：

```
matches = TakeWhile[Range[Length[listOfFactors]],(listOfFactors[[#]]==Prime[#])&] 
```

接着

```
listOfFactors[[matches]] 
```

我会把它留给你：

*   将这些片段组装成你想要的功能；
*   纠正我所犯的语法错误；和
*   弄清楚每个（子）表达式中到底发生了什么。

我不保证这种方法在任何一般意义上都是最好的方法，但它比您自己的第一次尝试更好地利用了*Mathematica 的* 内在功能，并且我希望，它会指引您在未来更好地使用该系统。

# java - XML 转换器排除参数 xml:base

> ID：12562676
> 
> 赞同：1
> 
> 时间：2012-09-24T09:58:15.393
> 
> 标签：java, xml, xml-parsing

使用 javax.xml.Transform 在转换后的 xml 文件中包含 xml:base 属性。这是场景。

**示例 XML 文件：**

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE security [
<!ENTITY attachparam SYSTEM "attach-value.xml">
<!ENTITY udf SYSTEM "udfasset.xml">
]>
<property>
           &attachparam;

</property> 
```

**附加值.xml**

```
<value regex=".+">localhost</value>
<value regex="^[A-Z]+">allow</value> 
```

**输出：**

```
<?xml version="1.0" encoding="UTF-8" standalone="no">
<property> 
     <value regex=".+" xml:base="file:///home/bharathi/attach-value.xml">localhost</value>    
     <value regex="^[A-Z]+" xml:base="file:///home/bharathi/attach-value.xml">allow</value>    
</property> 
```

**Java 代码：**

```
 TransformerFactory transformerFactory = TransformerFactory.newInstance();
                Transformer transformer = transformerFactory.newTransformer();

                DOMSource source = new DOMSource(document);

                String tempFile = "/home/bharathi/out.xml";
                LOGGER.log(Level.INFO, "tempFile is :: " + tempFile);

                StreamResult result = new StreamResult(new File(tempFile));

                transformer.transform(source, result); 
```

转换时如何排除 xml:base 属性？

# php - 自定义输入数量

> ID：12562677
> 
> 赞同：1
> 
> 时间：2012-09-24T09:58:20.063
> 
> 标签：php, jquery, mysql, html, forms

我需要将某些多边形的 UTM 坐标输入到 HTML 表单中。我将使用 php 处理表单值以插入 mysql db。但是多边形的数量和多边形的点可以是不同的。因此可以在表单上调整文本输入框。

```
+---------+------------+-----------+-------------+
| polygon | point      | y         | x           |
+---------+------------+-----------+-------------+
| 1       | 1          | 0         | 0           |
+---------+------------+-----------+-------------+
| 1       | 2          | 0         | 50          |
+---------+------------+-----------+-------------+
| 1       | 3          | 50        | 50          |
+---------+------------+-----------+-------------+
| 1       | 4          | 50        | 0           |
+---------+------------+-----------+-------------+
| 2       | 1          | 50        | 75          |
+---------+------------+-----------+-------------+
| 2       | 2          | 50        | 100         |
+---------+------------+-----------+-------------+
| 2       | 3          | 75        | 75          |
+---------+------------+-----------+-------------+ 
```

让用户输入点数来创建输入框对我来说似乎是一个好习惯。但是我不确定序列化值和使用 php 处理值的最佳做法是什么？我应该使用 JSON 还是只输入带有索引的名称。或者是其他东西？

这是一个简单的例子：http: [//jsfiddle.net/UVZNq/](http://jsfiddle.net/UVZNq/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:06:57.310

你可以尝试这样的事情：

```
+---------+------------+-----------+-------------+
| polygon | point      | y         | x           |
+---------+------------+-----------+-------------+

                                ***************
                                * Add Another *
                                *************** 
```

当用户按下“添加另一个”时，使用 Ajax 提交当前点并将现有（已提交）点转换为简单文本（而不是文本框）并添加新的文本框集。

这样，php 脚本一次处理一个点，并且 UI 也不会混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:05:44.287

如果您只是将输入命名为通用名称，例如（带括号）

```
<td><input type="text" name="ply[]" /></td>
<td><input type="text" name="pnt[]" /></td>
<td><input type="text" name="y[]"/></td>
<td><input type="text" name="x[]" /></td> 
```

您应该能够在 $_POST 或 $_GET 中检索包含所有值的数组（取决于您的表单的方法）。例如：

```
print_r($_GET['ply']); 
```

将打印您所有的层输入值。

# c++ - ASCII码输出？需要解决方案

> ID：12562678
> 
> 赞同：2
> 
> 时间：2012-09-24T09:58:25.050
> 
> 标签：c++, file-io, menu

嘿，我想在文本文件中输出一些 ascii 字符，然后加载它们并将它们用于菜单。任何人都可以帮助我如何做到这一点。这是我的代码：

```
#include "MenuText.h"
#include <iostream>//To allow the use of Header files.
#include <fstream>//To allow the use of external .txt files.
using namespace std;
using std::cout;

MenuText::MenuText()
{
    mText = "Default";

}
MenuText :: MenuText(string text)
{
mText = text;
}
void MenuText::print()
{
cout<< "Story= " << mText<< endl;
cout<< endl;
}
void MenuText::save(ofstream& outFile)
{
outFile<<   "┏┳┳┳┳┳┳┳┳●●●●●●━┓ ┣╋╋╋╋╋╋╋┫●●●●●●●┃\n" 
            "┣┻┻┻┻┻┻┻┻━━−●●●●┃ ┃Marooned ™ ●●●●┏┫\n "
            "┣┳┳┳┳┳┳┳┳−●●●●┏╋┫ ┣╋╋╋╋╋╋╋┫●●●●−┻┻┫\n" 
            "┣╋╋╋╋╋╋╋┫●●●●●●●┃ ┗┻┻┻┻┻┻┻┻●●χ " << mText<< endl;
cout<< endl;
outFile<< endl;
}
void MenuText::load(ifstream& inFile)
{
string garbage;
inFile>> garbage >> mText;
}

void MenuText::Menu()
{
cout<< "\n\t******Menu******\n\n";
cout<< "Please choose one of the following:\n";
cout<< "1 -Play Game.\n";
cout<< "2 -Exit.\n";

}
void MenuText::text()
{
ifstream text;                                                                                                     
        string line;                                                                                                            
        text.open("Text.txt");                                                                                        
        if (text.is_open())                                                                                
        {
                while ( text.good() )                                                                              
                {
                        getline (text,line);                                                                       
                        cout << line << endl;
                }
                text.close();                                                                                           
        }
        else{
                throw("The text file did not load.......!!!");                                                             
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:36:39.327

首先搜索**每个字符**的 ASCII/UNI 代码，然后使用这些代码数字创建**char***或**char[]**字符串/数组。之后，您可以根据需要使用此字符串。例如

```
char str[5]={125,124,126,122,121}; 
```

[这](http://www.asciitable.com/)是这些代码的链接...

# java - 蚀。获取类名的变量

> ID：12562679
> 
> 赞同：0
> 
> 时间：2012-09-24T09:58:28.310
> 
> 标签：java, eclipse, maven

> **可能重复：**
> [正确使用 Java -D 命令行参数](https://stackoverflow.com/questions/5045608/proper-usage-of-java-d-command-line-parameters)

我正在尝试从 Eclipse 启动此命令：

```
mvn test -Dtest=com.yyy.xxx.myTest 
```

因此，要在“运行配置”中配置命令，我需要一个 Eclipse 变量来获取 com.yyy.xxx.myTest

我的想法是在选择课程后启动命令。

在这里，我还没有找到变量：

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-exttools.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-exttools.htm)

关于变量的任何想法？

# java - 如何水平翻转图像

> ID：12562680
> 
> 赞同：4
> 
> 时间：2012-09-24T09:58:27.933
> 
> 标签：java

嗨，我想知道如何水平翻转和图像，对于一个实践任务，我得到了一个读取图像的代码，将其反转为指示其亮度为 0-5 的图像，我不得不翻转图像。

这是我阅读图像并绘制它的代码

```
public int[][] readImage(String url) throws IOException
{
    // fetch the image
    BufferedImage img = ImageIO.read(new URL(url));

    // create the array to match the dimensions of the image
    int width = img.getWidth();
    int height = img.getHeight();
    int[][] imageArray = new int[width][height];

    // convert the pixels of the image into brightness values
    for (int x = 0; x < width; x++)
    {
        for (int y = 0; y < height; y++)
        {
            // get the pixel at (x,y) 

            int rgb = img.getRGB(x,y);
            Color c = new Color(rgb);
            int red = c.getRed();
            int green = c.getGreen();
            int blue = c.getBlue();

            // convert to greyscale
            float[] hsb = Color.RGBtoHSB(red, green, blue, null);                
            int brightness = (int)Math.round(hsb[2] * (PIXEL_CHARS.length - 1));

            imageArray[x][y] = brightness;
        }
    }
    return imageArray;
}

public void draw() throws IOException
{
    int[][] array = readImage("http://sfpl.org/images/graphics/chicklets/google-small.png");
    for(int i=0; i<array.length; i++)
    {
        for(int pic=0; pic<array[i].length; pic++)
        {
            if(array[pic][i] == 0)
            {
                System.out.print("X");
            }
            else if(array[pic][i] == 1)
            {
                System.out.print("8");
            }

            else if(array[pic][i] == 2)
            {
                System.out.print("0");
            }       

            else if(array[pic][i] == 3)
            {
                System.out.print(":");
            }

            else if(array[pic][i] == 4)
            {
                System.out.print(".");
            }

            else if (array[pic][i] == 5)
            {
                System.out.print(" ");
            }

            else 
            {
                System.out.print("error");
                break;
            }   

        }
        System.out.println();
    }
} 
```

这是我试图创建水平翻转它的代码，

```
void mirrorUpDown()
{
    int[][] array = readImage("http://sfpl.org/images/graphics/chicklets/google-small.png");
    int i = 0;

    for (int x = 0; x < array.length; x++)
    {
        for (int y = 0; y < array[i].length; y++)
        {{
                int temp = array[x][y]; 
                array[x][y]= array[-x][y]; 
                array[array[i].length-x][y]=temp;
            }
        }
    }

} 
```

我收到一个错误

```
 unreported exception java.io.IException;
 must be caught or declared to be thrown 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-04T18:38:00.863

我真的会这样做...

```
 BufferedImage flip(BufferedImage sprite){
        BufferedImage img = new BufferedImage(sprite.getWidth(),sprite.getHeight(),BufferedImage.TYPE_INT_ARGB);
        for(int xx = sprite.getWidth()-1;xx>0;xx--){
            for(int yy = 0;yy < sprite.getHeight();yy++){
                img.setRGB(sprite.getWidth()-xx, yy, sprite.getRGB(xx, yy));
            }
        }
    return img;
} 
```

只是一个循环，其 x 从第一张图像的末尾开始，并将其 rgba 值放在第二张图像的翻转位置。干净，简单的代码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T13:10:24.500

很抱歉一年多后在此处发布此内容，但它应该在某个阶段对某人有所帮助

```
 try{
   java.awt.image.BufferedImage bi = javax.imageio.ImageIO.read(getClass().getResource("Your image bro.jpg")) ;
 int[] h = bi.getRGB(0, 0, bi.getWidth(), bi.getHeight(), null, 0, bi.getWidth());
 int [] h1 = new int[h.length];
 System.out.println(""+h.length);
  for(int j = 0;500>j;j++){
   for(int i = 500;i>0;i--){
         h1[j*500+(500-i)] = h[(j*500)+(i-1)];
   }
  }
 bi.setRGB(0, 0, bi.getWidth(), bi.getHeight(), h1, 0, bi.getWidth());
      }
      catch(Exception e){e.printStackTrace();} 
```

让我们分解代码

```
java.awt.image.BufferedImage bi =javax.imageio.ImageIO.read(getClass().getResource("Your image bro.jpg")); 
```

尝试读取图像并将读取的图像存储到 BufferedImage 变量 bi

```
 int[] h = bi.getRGB(0, 0, bi.getWidth(), bi.getHeight(), null, 0, bi.getWidth());
  int [] h1 = new int[h.length]; 
```

实例化两个数组，h 是原始 RGB 数组，h1 将是水平翻转的 RGB 数组。

```
for(int j = 0;500>j;j++){
 for(int i = 500;i>0;i--){
  h1[j*500+(500-i)] = h[(j*500)+(i-1)];
 }
} 
```

让我们更仔细地看一些特别的东西

```
 h1[j*500+(500-i)] = h[(j*500)+(i-1)]; 
```

图像从位置 0;0 扫描到 x.length;y.length，但它是在连续数组中扫描的。因此，我们使用伪数组来操纵图像的翻转。j*500 引用 Y 值， (500-i) 引用 x 值。

```
 bi.setRGB(0, 0, bi.getWidth(), bi.getHeight(), h1, 0, bi.getWidth()); 
```

最后，图像被存储回 BufferedImage 变量。

请注意，500 常量是指图像的 x 分辨率。例如，1920 x 1080 大小的图像使用最大值 1920。逻辑由您决定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T10:39:55.177

您的图像应该如何知道它应该从 imageArray 获取数据？

相反，您应该访问图像的栅格并修改其中的数据。

```
void flip(BufferedImage image) {
         WritableRaster raster = image.getRaster();
         int h = raster.getHeight();
         int w = raster.getWidth();
         int x0 = raster.getMinX();
         int y0 = raster.getMinY();
         for (int x = x0; x < x0 + w; x++){
             for (int y = y0; y < y0 + h / 2; y++){
                 int[] pix1 = new int[3];
                 pix1 = raster.getPixel(x, y, pix1);
                 int[] pix2 = new int[3];
                 pix2 = raster.getPixel(x, y0 + h - 1 - (y - y0), pix2);
                 raster.setPixel(x, y, pix2);
                 raster.setPixel(x, y0 + h - 1 - (y - y0), pix1);
             }
         }
         return;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T10:15:10.107

函数 mirrorUpDown() ，在那里添加一个 throws IOException 。

此外，您从中调用这些方法的函数，是否处理异常，是否包含在 try catch 块中的代码或该函数也设置为抛出 IOException（其中一个应该在那里）

# c# - 使用 C# 跳过 pdf 中损坏的页面

> ID：12562683
> 
> 赞同：0
> 
> 时间：2012-09-24T09:58:39.660
> 
> 标签：c#, asp.net, .net, pdf

我有一个损坏的 .pdf 文件。当我尝试打开文件时，它会在

```
PdfReader pdfReader = new PdfReader(fileName); 
```

如果页面上有任何错误，则行。

> 你调用的对象是空的

完整代码：

```
public string ReadFile(string Filename)
{
    string fileName = Server.MapPath(@"PDFFiles//" + Filename);

    string pdfText = string.Empty;
    if (File.Exists(fileName1))
    {
        try
        {
            // Exception on this line
            PdfReader pdfReader = new PdfReader(fileName);

            for (int i = 1; i <= pdfreader.NumberOfPages; i++)
            {
                ITextExtractionStrategy itextextStrat = new pdf.parser.SimpleTextExtractionStrategy();
                PdfReader reader = new PdfReader(Filename);
                String extractText = PdfTextExtractor.GetTextFromPage(reader, i, itextextStrat);

                extractText = Encoding.UTF8.GetString(ASCIIEncoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.Default.GetBytes(extractText)));
                pdfText = pdfText + extractText;
                reader.Close();
            }
        }
        catch(Execption e)
        {
        }
    }

    return pdfText;
} 
```

但是我需要毫无例外地遍历文件。如果特定页面上有任何错误，我必须跳过它并转到下一页。它不应该抛出异常。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:03:52.740

我相信一个`try-catch`街区对你来说应该足够了。只需包装有问题的代码以捕获任何异常，然后循环将继续进行。

# pdf - org-mode pdf 导出的表格模板

> ID：12562686
> 
> 赞同：3
> 
> 时间：2012-09-24T09:58:44.240
> 
> 标签：pdf, emacs, export, org-mode, xelatex

我希望我的表格在我的 org pdf 导出中具有相同的宽度（75% 的文本宽度）。

我已经使用[http://emacs-fu.blogspot.co.uk/2011/04/nice-looking-pdfs-with-org-mode-and.html](http://emacs-fu.blogspot.co.uk/2011/04/nice-looking-pdfs-with-org-mode-and.html)来添加一个漂亮的标题页和其他一些自定义项，但我无法弄清楚如何阻止出口商将 \begin{center} 放在桌子周围。

理想情况下，我希望能够控制这些实体和可能的其他实体的导出，但是在搜索了文档之后，我找不到太多可以让我在全局级别完成此操作的文档，而不必在每个表上指定它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:44:51.270

快速阅读 org-mode 代码得到了这个排序。

```
(setq org-export-latex-tables-centered nil) 
```

/lisp/org-latex.el 中列出的大量其他变量供好奇。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-10T21:51:46.920

```
#+ATTR_LATEX: :center nil 
```

如果您不想关闭全局居中，将为单个表执行此操作。

# asp.net-mvc - ASP.NET MVC HttpPostedFIleBase 为空

> ID：12562687
> 
> 赞同：3
> 
> 时间：2012-09-24T09:58:44.673
> 
> 标签：asp.net-mvc, httppostedfilebase

我`@Html.BeginForm`认为允许用户上传图像并添加有关图像的一些详细信息。

这是视图：

```
@Html.BeginForm("SaveImage", "Listing", FormMethod.Post, new { enctype = "multipart/form-data" }))) {
<div id="modalAddImage" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
    <p>Image</p>
    <input type="file" name="file"></input>

     @foreach (Image translation in Model.Listing.Images)
     {
        @Html.TextBoxFor(m => m.Description)
     }
     </div>
     <div class="modal-footer">
     <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
     <button class="btn btn-primary">Save changes</button>
 </div>
</div>
} 
```

在这个之前我有一个不同的`@Html.BeginForm`权利，它是为了别的东西。

这是我的控制器：

```
 [HttpPost]
    public ActionResult SaveImage(HttpPostedFileBase file)
    {
        if (file!= null && file.ContentLength > 0)
        {
            var fileName = Path.GetFileName(file.FileName);
            var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
            file.SaveAs(path);
        }

        return View("Maintain");
    } 
```

当我在 中放置断点时`SaveImage`，文件始终为空。我试图上传大小图像。

任何人都可以看到我要去哪里可怕的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T10:06:00.210

你可以简单地这样做：

```
[HttpPost]
public ActionResult SaveImage(HttpPostedFileBase file)
{
     if (Request.Files.Count > 0)
     {
        foreach (string upload in Request.Files)
        {
           if (upload != null)
           {
              var fileName = Path.GetFileName(file.FileName);
              var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);      
              Request.Files[upload].SaveAs(path);

           }
        }
     }
    return View("Maintain");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T09:12:33.787

遇到同样的问题然后意识到我没有在我的表单中指定（enctype =“multipart/form-data”）

# jpa - JBoss 4.0.5 + Equinox + JPA + EclipseLink

> ID：12562688
> 
> 赞同：0
> 
> 时间：2012-09-24T09:58:45.080
> 
> 标签：jpa, eclipselink, equinox, jboss-4.0.x

我正在尝试将我的应用程序上使用的 JPA（EclipsLink 实现）连接到 JBoss DS，但不知道该怎么做。

我正在使用的应用程序是在 Equinox 容器上运行的基于 OSGi 的应用程序，该容器作为 JBoss WAR 文件上的 servlet 运行。

如何配置我的应用程序以连接 JBoss DS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:47:12.453

听起来相当复杂。你试过什么，你得到了什么错误？

通常你只需在 JPA persistence.xml 中设置数据源，这样行吗？

# java - 这是 JSlider 中的错误吗？

> ID：12562694
> 
> 赞同：8
> 
> 时间：2012-09-24T09:59:11.647
> 
> 标签：java, swing, user-interface, jslider

我在使用[JSlider](http://docs.oracle.com/javase/6/docs/api/javax/swing/JSlider.html#setLabelTable%28java.util.Dictionary%29)类时遇到了一些问题——特别是使用刻度标签。

我第一次使用`setMajorTickSpacing`，`setMinorTickSpacing`一切都按预期工作。但是，后续调用`setMajorTickSpacing`更新刻度，而不是标签。我写了一个简单的例子来演示这种行为：

```
import java.awt.event.*;
import javax.swing.*;

public class SliderTest {
    public static void main(String args[]) {
        JFrame frame = new JFrame();
        frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent we) {
                System.exit(0);
            }
        });
        frame.setSize(300, 250);

        JSlider slider = new JSlider(0, 100, 0);
        slider.setMajorTickSpacing(10);
        slider.setMinorTickSpacing(1);
        slider.setPaintLabels(true);
        slider.setPaintTicks(true);

        slider.setMajorTickSpacing(25);
        slider.setMinorTickSpacing(5);

        frame.add(slider);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

两个简单的解决方法似乎可以解决问题 - 使用`slider.setLabelTable(null)`或`slider.setLabelTable(slider.createStandardLabels(25))`在第二次调用`setMajorTickSpacing`. 鉴于此，标签表似乎没有正确更新。

我不确定这是否是预期的行为。我的第一直觉是更新刻度间距也应该更新标签，但也有将两者分开的论点。

所以我想知道它是什么 - 这是一个错误`JSlider`还是预期的行为？如果这*是*预期的行为，那么做出该选择的突出原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T10:53:05.873

`setMajorTickSpacing`您可以通过查看源代码轻松查看此问题的原因：

```
public void setMajorTickSpacing(int n) {
    int oldValue = majorTickSpacing;
    majorTickSpacing = n;
    if ( labelTable == null && getMajorTickSpacing() > 0 && getPaintLabels() ) {
        setLabelTable( createStandardLabels( getMajorTickSpacing() ) );
    }
    firePropertyChange("majorTickSpacing", oldValue, majorTickSpacing);
    if (majorTickSpacing != oldValue && getPaintTicks()) {
        repaint();
    }
} 
```

如果您两次调用此方法 -`labelTable`值将不再为 null 并且不会更新。根据方法的评论，这可能是预期的行为：

> ```
>  * This method will also set up a label table for you.
>  * If there is not already a label table, and the major tick spacing is
>  * {@code > 0}, and {@code getPaintLabels} returns
>  * {@code true}, a standard label table will be generated (by calling
>  * {@code createStandardLabels}) with labels at the major tick marks. 
> ```

因此，每次要更新标签时，您都必须手动更新标签（除非您使用自己的更新方法覆盖此方法）。

# ruby-on-rails - OpenSSL::SSL::SSLError SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed

> ID：12562697
> 
> 赞同：2
> 
> 时间：2012-09-24T09:59:21.507
> 
> 标签：ruby-on-rails, curl, openssl, omniauth, homebrew

我的环境，

```
% openssl version
OpenSSL 0.9.8r 8 Feb 2011
% curl --version
curl 7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtsp smtp smtps telnet tftp
Features: AsynchDNS GSS-Negotiate IPv6 Largefile NTLM NTLM_WB SSL libz
% rails -v
Rails 3.0.3
% ruby -v
ruby 1.9.2p320 (2012-04-20 revision 35421) [x86_64-darwin12.2.0]
% rvm --version
rvm 1.15.0 (latest) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

omniauth version is '0.2.6' 
```

然后我使用omniauth通过facebook登录并收到以下错误。

```
 OpenSSL::SSL::SSLError
 SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed 
```

我试图解决这个问题。

在 ~/.zshrc 中添加一行

```
 export CURL_CA_BUNDLE='/System/Library/OpenSSL/certs/cert.pem' 
```

我正在使用自制软件。curl-config --ca 显示空行。

```
 % curl-config --ca 
 (empty output) 
```

我怎么解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T18:21:34.107

如果您使用 brew 和 rvm，请使用以下命令：

```
rvm remove 1.9.3
brew install openssl
rvm install 1.9.3 --with-openssl-dir=`brew --prefix openssl` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T08:47:14.000

这里有很多可能对您有用的解决方案：

[http://railsapps.github.com/openssl-certificate-verify-failed.html](http://railsapps.github.com/openssl-certificate-verify-failed.html)

如果它仍然不起作用，Rahul 的答案几乎对我有用，除了我不得不强制下载 rvm SSL 文件夹中的证书：

```
rvm pkg install openssl
rvm install 1.9.3-p374 –with-openssl-dir=$rvm_path/usr
cd $rvm_path/usr/ssl
curl -O http://curl.haxx.se/ca/cacert.pem
mv cacert.pem cert.pem 
```

希望这会有所帮助，文森特

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:13:30.407

有两件事可能会有所帮助。首先，您可以在命令行中使用 openssl 来测试您的证书是否正确链接在一起。例如：

```
openssl verify -CAfile your-bundle.crt your.crt 
```

这可能涉及将来自 facebook 的公钥添加到您的捆绑包中，但是如果没有您正在使用的证书的更多详细信息，就很难说。其次，您在导出 CURL_CA_BUNDLE 时处于正确的路径。一旦链是正确的，那么另一个选择是使用 curl 和一些命令行选项。例如：

```
curl --verbose --head https://example.com:443/ --cert ./testclient.crt --key testclient.key --cacert test-bundle.crt 
```

抱歉，我无法帮助您解决问题的omniauth方面。祝你好运！

# forms - 表格没有被打印，没有在codeigniter中显示，我怎样才能让它显示？

> ID：12562700
> 
> 赞同：0
> 
> 时间：2012-09-24T09:59:25.697
> 
> 标签：forms, codeigniter

我已经创建了一个页面，我需要发送一个表单，没什么特别的，一切都应该很简单.. 听起来可能很糟糕，但它正在工作，现在我尝试提交它并且没有结果，检查打印的代码（你知道，在浏览器中下载的代码）我看到我的表单丢失了，我试图找出问题所在，但没有，我检查了未关闭的标签，但问题仍然存在，知道如何解决这个问题吗？有人有同样的问题吗？只有表单的标签没有显示。谢谢

我的代码：

```
echo form_open('form/form/do_upload');
echo form_fieldset('Login Form');
inputs here (they are visible);
echo form_submit('login', 'Login');
echo form_fieldset_close();
echo form_close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:16:18.157

当您通过表单上传内容时，您必须提供

```
echo form_open_multipart(); 
```

**form_open_multipart()**

> 此函数与上面的 form_open() 标记完全相同，只是它添加了一个 multipart 属性，如果您想使用表单**上传文件**，这是必需的。

来源：[form_helper](http://codeigniter.com/user_guide/helpers/form_helper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:11:12.853

我找到了答案，好吧，我的页面中有 12 个表单，其中一个（我是从某人的代码中调用它）没有关闭，这导致其他人都失踪了，我不知道为什么。

谢谢您的帮助！

# c# - 如何在 Windows Phone 后面的代码的列表框中获取控件？

> ID：12562702
> 
> 赞同：0
> 
> 时间：2012-09-24T09:59:33.053
> 
> 标签：c#, silverlight, windows-phone-7, xaml, windows-phone

我的 Windows Phone 应用程序中有一个列表框。在列表框 DataTemplate 中，我放置了一个按钮。如何在代码隐藏中获取按钮对象。我没有在 .cs 文件中获得 rowButton 的引用。我想更改每行按钮的按钮背景颜色。如何在后面的代码中获取按钮引用？

我遵循用于列表视图的代码。

```
<Grid  Height="530" Grid.Row="1" VerticalAlignment="Top" Margin="0,30,0,0">
            <ListBox Margin="0,0,0,0" Name="TransactionList">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Button  Width="460" Height="150" Click="user_click" Name="rowButton" >
                            <Button.Content>
                                <StackPanel Orientation="Horizontal" Height="auto" Width="400">
                                    <Image Width="80" Height="80" Source="{Binding Type}"></Image>
                                    <StackPanel Orientation="Vertical" Height="150" Margin="20,0,0,0">
                                        <StackPanel Orientation="Horizontal" Height="40">
                                            <TextBlock Width="100" FontSize="22" Text="Name :" Height="40" ></TextBlock>
                                            <TextBlock Width="auto" FontSize="22" Text="{Binding Name}" Height="40" ></TextBlock>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Height="40">
                                            <TextBlock Width="100" FontSize="22" Text="Date :" Height="40" ></TextBlock>
                                            <TextBlock Width="100" FontSize="22" Text="{Binding Date}" Height="40" ></TextBlock>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Height="40">
                                            <TextBlock Width="100" FontSize="22" Text="Amount :" Height="40" ></TextBlock>
                                            <TextBlock Width="auto" FontSize="22" Text="{Binding Amount}" Height="40" ></TextBlock>
                                            <TextBlock Width="auto" FontSize="22" Text=" $" Height="40" ></TextBlock>
                                        </StackPanel>
                                    </StackPanel>
                                </StackPanel>
                            </Button.Content>
                        </Button>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:12:35.470

如果要更改用户单击的背景，请在单击事件处理程序中使用

```
 Button button1 = sender as Button;
            button1.Backgorund = new SolidColorBrush(Colors.Red); 
```

更改背景颜色。

否则为每个按钮绑定背景属性，并在列表框中的项目迭代时更改其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:08:56.207

如果没有看到您如何尝试在代码中访问它，就不可能说出为什么您正在做的事情不起作用。

但是，如果您使用数据绑定来设置模板项的颜色会容易得多

# ruby-on-rails-3 - 使用 Sunspot 构建逻辑查询

> ID：12562703
> 
> 赞同：1
> 
> 时间：2012-09-24T09:59:38.287
> 
> 标签：ruby-on-rails-3, solr, sunspot-solr

我有一个用户和技能模型，具有（has_many 关联）索引是使用太阳黑子完成的。现在的要求是实现逻辑查询。

示例“技能 1 与技能 2”“技能 1 或技能 2”“技能 1 与技能 2 或技能 3”

Sunspot 正在使用 dismax 请求处理程序，其中 minimum_match 字段用于实现 OR 查询。

现在的问题是当我们需要将 AND 和 OR 运算符组合在一起时。如何实现相同。

问候， 卡兰

# extjs - 如何在 Controller 中获取 Store 以将数据绑定到 View？

> ID：12562704
> 
> 赞同：1
> 
> 时间：2012-09-24T09:59:45.377
> 
> 标签：extjs, sencha-touch-2

我有一个带有处理程序 onLogin() 的控制器，它在成功登录请求后被调用：

```
Ext.define('AddressBook.controller.Application', {
extend: 'Ext.app.Controller',
...
onLogin: function(form, record) {
    var editButton = this.getEditButton();

    if (!this.showContact) {
        this.showContact = Ext.create('AddressBook.view.contact.Show');
    }

    //how to get this store?
    var store = getContactsStore();
    //how to get the data in the store or should I get the model?
    this.showContacts.updateDataProvider(store.array);

    // Push the show contact view into the navigation view
    this.getMain().push(this.showContact);
},
...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:21:47.177

试试这个代码

```
Ext.getStore('storeId') 
```

它会给你商店的对象

# ios - 在 XMPP 中更改状态并上传头像

> ID：12562707
> 
> 赞同：0
> 
> 时间：2012-09-24T09:59:56.953
> 
> 标签：ios, xmpp, chat

我是 XMPP 的新成员。我正在开发一个 iOS 聊天项目。我学会了获取在线好友的方法，发送和接收消息：D，非常高兴。

但是今天，我正在研究改变我的头像和状态，我不知道我应该从哪里开始。希望得到您的帮助:) 非常感谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:23:34.460

您可以使用 vcard 在您的应用中实现头像。请访问以下 URL 获取基于 vcard 的头像：

**XEP-0153：基于 vCard 的头像** [http://xmpp.org/extensions/xep-0153.html](http://xmpp.org/extensions/xep-0153.html)

要更改状态，您必须发送带有您想要更新的状态的存在节。

# vb.net - 复选框和十六进制等效项

> ID：12562708
> 
> 赞同：-3
> 
> 时间：2012-09-24T09:59:58.293
> 
> 标签：vb.net

我有四个复选框，从复选框 1 到复选框 4。将这四个复选框视为二进制 0000。如果选中复选框 1，则二进制应更改为 1000。其他复选框的方式相同，应设置相应的位。最后，我想要的输出是四位的十六进制等效值。如果未选中任何复选框，则应返回 0 到 F.0。F，当所有复选框都被选中时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:42:51.680

有很多方法。例如，如果它只有 4 位，则将它们单独相加：

```
 Dim intValue As Integer = 0
    If CheckBox0.Checked Then intValue += 1
    If CheckBox1.Checked Then intValue += 2
    If CheckBox2.Checked Then intValue += 4
    If CheckBox3.Checked Then intValue += 8
    Dim strHex As String = intValue.ToString("x") 
```

如果可能超过 4 个，最好用循环替换中间位。最后一行的 .ToString("x") 给出了十六进制表示的数字。我想这就是你所需要的？

# c# - 撤消/重做的多个上下文

> ID：12562712
> 
> 赞同：1
> 
> 时间：2012-09-24T10:00:04.783
> 
> 标签：c#, entity-framework

我正在尝试使用实体框架创建撤消/重做的过程。

我想创建一个这样的类：

```
public class multiContext
{
    public int _id { get; set; }
    public undoEntities _context { get; set; }
} 
```

并为每次修改创建一个新的 multiContext

```
private void btnSendB_Click(object sender, RoutedEventArgs e)
{
     multiContext nContext = new multiContext { _id = multiContextManager.getEntityID(listEntities), _context = new undoEntities};
     listEntities.Add(nContext);
     foreach (TB1 item in gridA.SelectedItems)
     {
         item.Status = "B";

         nContext._context.Entry(item).State = System.Data.EntityState.Modified;
         nContext._context.SaveChanges();
     }

     refreshGrids();
 } 
```

但问题是当我 SaveChanges() 时，它会更改列表中的所有上下文。

我怎样才能只保存实际。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:59:57.270

我想到了同样的想法。您必须将每个修改存储在堆栈中的单独上下文中，以便撤消然后重做。在添加之前，调用

```
this.DBContext.Entry(item).State = System.Data.EntityState.Modified; 
```

然后，当您将其从撤消或重做堆栈中取出时，您只需调用 this.DBContext.SaveChanges() 然后使用新上下文重新加载文本框。

# python - 从matplotlib中的重叠椭圆合并边缘

> ID：12562719
> 
> 赞同：0
> 
> 时间：2012-09-24T10:00:19.900
> 
> 标签：python, matplotlib

我需要绘制两个重叠的椭圆，当前代码将第二个椭圆的边缘放在第一个椭圆的顶部。这是代码：

```
from matplotlib.pyplot import figure, show
from matplotlib import patches
fig = figure()
ax = fig.add_subplot(111)
ell = patches.Ellipse((0.15, 0.7), .3, .1, angle = 25, facecolor = 'white', edgecolor = 'gray', linewidth = 2, transform=ax.transAxes)
ax.add_artist(ell)
ell = patches.Ellipse((0.30, 0.7), .3, .1, angle = -25, facecolor = 'white', edgecolor = 'gray', linewidth = 2, transform=ax.transAxes)
ax.add_artist(ell)
show() 
```

[这会产生一个像如何加入重叠圆圈中](https://stackoverflow.com/questions/4463933/how-to-join-overlapping-circles)的第一个图一样的图？（我不能在这里发布我自己的数字）而我想要第二个数字。

matplotlib 中是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:13:02.277

是的。但是您需要使用[http://matplotlib.org/1.1.1/api/artist_api.html?highlight=arc#matplotlib.patches.Arc](http://matplotlib.org/1.1.1/api/artist_api.html?highlight=arc#matplotlib.patches.Arc)，因为 Ellipse 没有所需的角度参数`theta1`和`theta2`.

至于实际计算这些角度，椭圆的封闭形式解决方案可能比参考问题中给出的圆方程更复杂。如果您无法找到几何解，您可能不得不求助于数值近似来找到它们：编写一个距离函数 f(ta, tb)，计算椭圆 A 上的点 ta 和椭圆 B 上的点 tb 之间的距离，然后搜索两个局部最小值 f(ta1, tb1) 和 f(ta2, tb2)。

# c# - System.GC.RunFinalizers() 位于哪里？

> ID：12562726
> 
> 赞同：0
> 
> 时间：2012-09-24T10:01:11.977
> 
> 标签：c#, garbage-collection

我看到其他人参考了该方法，但如果我包括

`System.GC.RunFinalizers()`

我得到错误`'System.GC' does not contain a definition for 'RunFinalizers'`

`System.GC.Collect();`运行良好。如何运行 RunFinalizers 方法？它似乎不是 GC 类的成员：http: [//msdn.microsoft.com/en-us/library/system.gc.aspx](http://msdn.microsoft.com/en-us/library/system.gc.aspx)

**编辑：** 可以在此处找到对此方法的引用：

[如果您坚持使用 .NET 中的标准编码，是否有理由手动调用 GC 或运行终结器？](https://stackoverflow.com/questions/2900808/if-you-stick-to-standard-coding-in-net-is-there-reason-to-manually-invoke-the)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:13:20.227

没有名为的公共方法：

```
System.GC.RunFinalizers() 
```

您读到的任何参考资料很可能是对以下内容的混淆参考：

```
System.GC.WaitForPendingFinalizers() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:01:17.793

此方法从未在 .Net BCL 中可用。

但似乎这种方法在 .net 1.0 beta 2 之前确实可用，然后从后续版本中删除。很难获得有关 .net 1.0 beta 版本的任何信息，但可以通过查看以下代码得出推论（尽管并非万无一失）：

资料来源：[CodeForge](http://www.codeforge.com/read/54437/Form1.cs__html)

```
protected void Form1_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        ci=null;
        System.GC.RunFinalizers();
        Application.ExitThread();
        Application.Exit();

    } 
```

上面代码的作者正在使用这个函数。

Exes 包含在下载中（这意味着作者能够成功构建应用程序）。现在源文件和 exe 的创建日期是 2001 年 2 月，当时只有 .Net Framework 1.0 beta 2 可用。因此，上述代码的作者很可能是针对 .Net 1.0 beta2 构建的。

# php - 如何在scriptcase中配置生产环境

> ID：12562727
> 
> 赞同：0
> 
> 时间：2012-09-24T10:01:20.463
> 
> 标签：php

我正在使用 scriptcase php 代码生成器，当我构建我的项目时，我将它上传到我在 siteground.com 的帐户中。现在，我尝试使用 mydomain.com/project_folder 从浏览器打开它，它需要初始配置.. 到目前为止，当我进入需要设置或编辑数据库连接的第三步时，问题就开始了。 . 这里它向我展示了这个：

"404 - Not Found 您尝试访问的页面不存在。如果此错误仍然存​​在，请联系网站站长。如果您是该网站的站长，请确保： 您已将文件正确上传到 public_html 目录是您帐户的网络根目录；您没有拼错 URL。请记住，字母区分大小写，建议不要使用空格；如果您应用了 SEO - SEF URL 重写规则，请确保您已重命名 htaccess .txt 文件到 .htaccess。如果已经有一个非空的 .htaccess 文件，请检查它并确保未注释必要的规则。

..并且，当我单击重命名连接时，它显示：“重命名连接生产环境中没有保存任何连接。”

这些原因都不是导致问题的原因..比我该怎么办？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T05:24:50.330

不确定siteground，但重要的是在设置应用程序777权限的_lib目录中的所有文件

SC 还大量使用会话——确保在从一个 SC 应用程序移动到另一个应用程序时清除浏览器中的所有 cookie

# asp.net - 在发布时强制将外部文件复制到 bin 文件夹

> ID：12562731
> 
> 赞同：11
> 
> 时间：2012-09-24T10:01:31.787
> 
> 标签：asp.net, .net, msbuild, web-application-project

我有一个引用第三方程序集的 Web 应用程序项目，该程序集又使用一些它需要在运行时找到的本机 dll。正因为如此，我想将这些dll添加到项目的bin文件夹中，这样就可以肯定地找到它们。

但是，如果我将文件添加到 /bin/ 中的项目中，选择“复制到输出”，文件将被编译并发布到 /bin/bin。将它们添加到根文件夹是可行的，但很难成为正确的解决方案。

发布时将它们添加到构建目标“AfterBuild”没有效果（例如“构建部署包”）

通过 TFS 构建解决方案时，它也必须工作，其中调用 MSBuild 目标 _CopyWebApplicationLegacy。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T12:48:08.743

解决方案是我已经尝试过的东西的组合：

*   在项目中包含“Bin”文件夹
*   添加所需文件（由于我们的开发结构，我将它们添加为链接）
*   设置以下属性：“构建操作 = 内容”和“复制到输出 = 不复制”

现在，即使在 TFS 上自动构建时，文件也会在发布时复制到 bin 文件夹中。

需要这个的组件是 GdPicture，它在运行时使用了几个本地 DLL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T10:10:55.827

在您的解决方案或工作区中通常有一个**lib**文件夹来放置您的第三方 dll。然后，您将从您的项目中添加对该位置的引用，并确保该位置处于源代码控制之下。

您还可以查看使用[NuGet](http://nuget.org/)为您打包它，它会自动使用解决方案级别的包文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T13:29:13.143

基于这篇文章[http://sedodream.com/2010/05/01/WebDeploymentToolMSDeployBuildPackageIncludingExtraFilesOrExcludingSpecificFiles.aspx](http://sedodream.com/2010/05/01/WebDeploymentToolMSDeployBuildPackageIncludingExtraFilesOrExcludingSpecificFiles.aspx)。可以将 msbuild 目标定义到主项目文件中（按解决方案的构建顺序最新），该项目文件将捕获 bin 文件夹的所有文件。像这样

```
<Target Name="CustomCollectFiles">
    <ItemGroup>
      <_CustomFiles Include="$(OutDir)\**\*" />
      <FilesForPackagingFromProject  Include="%(_CustomFiles.Identity)">
        <DestinationRelativePath>$(OutDir)\%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
      </FilesForPackagingFromProject>
    </ItemGroup>
  </Target>
  <PropertyGroup>
    <CopyAllFilesToSingleFolderForPackageDependsOn>
      CustomCollectFiles;
      $(CopyAllFilesToSingleFolderForPackageDependsOn);
    </CopyAllFilesToSingleFolderForPackageDependsOn>
  </PropertyGroup> 
```

并将其放在关闭根项目元素之前。

# c# - 动态 SQL INSERT 比应有的时间长 30 倍

> ID：12562736
> 
> 赞同：0
> 
> 时间：2012-09-24T10:01:49.213
> 
> 标签：c#, sql-server-2008, dynamic-sql

我们构建了一个可用于创建数据仓库的 C# .NET 系统。该系统采用选定的数据库并针对这些数据库运行脚本以创建组合的数据库/仓库。

现在，我将三个数据库编译成一个数据库，并且我从每个数据库中复制两个表（表 [XI] 和表 [XII] - 它们具有一对多关系，但在副本/ `INSERT INTO`)。脚本运行的数字和每个表的相关大小如下：

执行的脚本由 30 个 SQL 查询组成。

1.  **数据库A**：

    ```
    Table [XI]  29,026 Rows (size 20,128Kb).
    Table [XII] 531,958 Rows (size 50,168Kb).
    Time taken for entire script: 1.51s. 
    ```

2.  **数据库B**：

    ```
    Table [XI]  117,877 Rows (size 17,000Kb).
    Table [XII] 4,000,443 Rows (size 512,824Kb).
    Time taken for entire script: 2.04s. 
    ```

这些都运行良好且快速。下一个几乎与第一个大小完全相同，但需要 40 倍的时间！

1.  **数据库C**：

    ```
    Table [XI]  29,543 Rows (size 20,880Kb).
    Table [XII] 538,302 Rows (size 68,000Kb).
    Time taken for entire script: 44.38s. 
    ```

我无法弄清楚为什么这需要这么长时间。我使用过 SQL Server Profiler 和性能监视器，但我无法确定性能发生如此巨大变化的原因。

用于进行更新的查询是动态的，并显示在此问题的底部 - 由于明确引用了所需列，因此它很大。我的问题是；什么可能导致执行时间过度增加？

任何线索将不胜感激。

*SQL：*

```
DECLARE @DbName NVARCHAR(128);
SET @DbName = (SELECT TOP 1 [DbName] 
               FROM [IPACostAdmin]..[TmpSpecialOptions]);
DECLARE @FilterSql NVARCHAR(MAX);
SET @FilterSql = (SELECT TOP 1 [AdditionalSQL] 
                  FROM [IPACostAdmin]..[TmpSpecialOptions]);
DECLARE @SQL NVARCHAR(MAX);
DECLARE @SQL1 NVARCHAR(MAX);
DECLARE @SQL2 NVARCHAR(MAX);
SET @SQL1 = 
    'INSERT INTO [' + @DbName + ']..[Episode] 
        ([Fields1], ..., [FieldN])'; 
SET @SQL2 = 
'SELECT 
     [Fields1], ..., [FieldN] 
FROM [B1A] ' + @FilterSql + ';'; 
SET @SQL = @SQL1 + @SQL2;
EXEC(@SQL);
GO 
```

注意：为了清楚起见，我将动态 SQL 拆分为`@SQL1`和`@SQL2`。另请注意，由于空间以及它在很大程度上是多余的事实，我没有显示所有列。

*编辑1。*

*1\. 数据库在同一台服务器上。*

*2\. 包括日志在内的数据库文件位于同一驱动器的同一目录中。*

*3\. 此时源数据库（DatabaseA/B/C）或数据仓库数据库上没有设置主/外键或约束`INSERT INTO`。*

*编辑2。我在管理工作室运行了上述查询，花了 5 秒！？*

*编辑3。我添加了一个临时`CLUSTERED INDEX`的，希望这将有助于这个查询，这也没有帮助。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:14:41.653

一些信息会很高兴知道：

1：数据库在同一台服务器上？

2：A和C的情况下db文件和日志文件在同一个驱动器上？

（有一次我遇到了两个数据库的问题，其中一个在 SSD 驱动器上，另一个在 HDD 上。这是读取数据的问题）

3：关于碎片的数据库统计？（表没有约束，但定义了索引？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:42:20.733

这是由`DELETE`在前面的`CREATE CLUSTERED INDEX`查询有时间更新整个表之前运行的查询引起的。解决方案是使用`BEGIN TRANSACTION`and`COMMIT`关键字。这会强制 SQL Server在尝试任何其他操作*之前*完成索引。

`CREATE CLUSTERED INDEX`请注意，只有在使用修改现有表的动态 SQL 语句进行查询时，才可能出现此问题。

我希望这对其他人有帮助。

# android - 在 android 4.0 及更高版本中未调用 Spinner OnItemClick

> ID：12562741
> 
> 赞同：0
> 
> 时间：2012-09-24T10:02:10.057
> 
> 标签：android, spinner, onitemclicklistener, onitemclick

我对 android spinner onItemClickListener() 有一个问题。

我知道 onItemClickListener 不适用于微调器，所以我只是自定义微调器类并覆盖微调器类的 setOnItemClickListener() 方法。

以下是我自定义的代码....

```
import android.content.Context;
import android.content.DialogInterface;
import android.util.AttributeSet;

import android.widget.Spinner;

public class MySpinner extends Spinner {

private OnItemClickListener onItemClickListener;

public MySpinner(Context context) {
    super(context);
}

public MySpinner(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public MySpinner(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
public void onClick(DialogInterface dialog, int which) {

    super.onClick(dialog, which);

    if (this.onItemClickListener != null) {

        this.onItemClickListener.onItemClick(this, this.getSelectedView(), which, this.getSelectedItemId());

    }

}

@Override
public void setOnItemClickListener(android.widget.AdapterView.OnItemClickListener l) {

    this.onItemClickListener = l;
}

}

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;

public class SpinnerOnItemClickActivity extends Activity implements OnItemClickListener {

private MySpinner spinner;

String[] str_arr = new String[]{"abc", "efg", "hij"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_spinner_on_item_click);

    spinner = (MySpinner) findViewById(R.id.spinner1);

    spinner.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, str_arr));

    this.spinner.setOnItemClickListener(this);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_spinner_on_item_click, menu);
    return true;
}

@Override
public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {

    Log.i("Test", "********************Spinner Item Click**************************" + position);
}
} 
```

上面的代码与 android 版本 2.2 和 2.3 完美配合，但不适用于 android 版本 4.0 及更高版本。

我已经调试了代码，发现在 android 4.0 版中没有调用微调器类的 onClick() 方法。

任何帮助都将是可观的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:28:07.537

对于 Spinner，您必须使用`OnItemSelectedListener`，因为 Spinner 的行为是从 Spinner 项目列表中选择项目。

`OnItemClickListener`用于拥有所有列表项的 ListView，您必须单击 ListView 中的项目并听取其操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:23:31.830

好的试试下面的代码

```
 list = (Spinner)findViewById(R.id.ListView1);
    list.setAdapter(new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_single_choice, RATINGS));

    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

            selected = RATINGS[arg2];

            // Toast.makeText(getApplicationContext(), selected + " selected", Toast.LENGTH_LONG).show();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:15:41.117

试试下面的代码：

```
 samplespin = (Spinner) findViewById(R.id.audspinner1);
     samplespin.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position,
            long id) {
        edtsample.setText(samplevalues[position]);

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        edtsample.setText("");

    }
});

ArrayAdapter sample = new ArrayAdapter(
            this,
            android.R.layout.simple_spinner_item, 
            samplevalues);

    sample.setDropDownViewResource(
       android.R.layout.simple_spinner_dropdown_item);
    samplespin.setAdapter(sample); 
```

# iphone - UIGraphicsBeginImageContextWithOptions 中的 CGContextDrawImage 上的 UIEdgeInsets 被忽略

> ID：12562742
> 
> 赞同：4
> 
> 时间：2012-09-24T10:02:13.097
> 
> 标签：iphone, ios, ios5, core-graphics

在绘制到屏幕外缓冲区时，我正在努力让 Image Insets 工作。

使用 resizableImageWithCapInsets: 在 UIImage 上直接 setImage: 进入按钮对我来说很好：

```
UIImage * base = [UIImage imageNamed:@"button.png"];
UIImage * img = [base resizableImageWithCapInsets:UIEdgeInsetsMake(20,20,20,20)];
[self setImage:img forState:UIControlStateNormal]; 
```

如下图（左边是原始缩放，右边是用插图缩放）：

![毫不费力地拉伸图像](../Images/afbcba24c79cff4acf20ea333f92e122.png) ![图像拉伸与体面的插图](../Images/18b7eff6d8601693024fcceae243c7d7.png)

所以右边的很好——上/下/左/右的线条是等距的。到目前为止，一切都很好。

现在，如果我尝试对绘制的图像进行相同的操作，然后将其捕获到屏幕外缓冲区：

```
UIImage * base = [UIImage imageNamed:@"button.png"];
base = [base resizableImageWithCapInsets:UIEdgeInsetsMake(20,20,20,20)];

UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 0);
ctx = UIGraphicsGetCurrentContext();

CGContextDrawImage(ctx, CGRectMake(0,0,self.bounds.size.width,
         self.bounds.size.height), [base CGImage]);

img = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
[self setImage:img forState:UIControlStateNormal]; 
```

我得到下面（同样左边是原始缩放，右边是插图）：

![原始缩放，侧缓冲区](../Images/9a6ab215501d81b033e75fb09d9b07ea.png)![使用插图缩放，侧缓冲区（错误！）](../Images/23af84107aa8bc835eed210a87d3379d.png).

所以这里似乎忽略了插图。

有人对这里出了什么问题有任何建议吗？[http://people.apache.org/~dirkx/insetSample.zip](http://pastebin.com/rm8h6YFV)上的全功能示例和[http://pastebin.com/rm8h6YFV](http://people.apache.org/~dirkx/insetSample.zip)上的关键代码。

任何和所有建议表示赞赏。

矮

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T10:44:58.127

我猜想可拉伸 UIImages 的处理级别比 Quartz2D 更高，因此使用`CGContextDrawImage`是行不通的。

您可以尝试`-[UIImage drawInRect]`改用。这将绘制到当前 UIGraphics 上下文，这是您在代码片段中创建的位图上下文。

相关线路是：

```
[base drawInRect:CGRectMake(0,0,self.bounds.size.width,
                                    self.bounds.size.height)]; 
```

# android - 图库图像应填满屏幕宽度

> ID：12562747
> 
> 赞同：0
> 
> 时间：2012-09-24T10:02:39.930
> 
> 标签：android, android-layout, imageview, gallery

根据可用图片的数量，我使用 imageview 或 Gallery。当只有一张图片可用时，它会使用 imageview，这就像一个魅力。我使用来自 u [niversalloader](https://github.com/nostra13/Android-Universal-Image-Loader/tree/master/UniversalImageLoader/src/com/nostra13/universalimageloader/core)的图像加载器。图片在我的屏幕顶部全宽。

当有多张图片时，我使用带有 pagerindicators 的画廊。在较小的屏幕上，这可以正常工作。但是在平板电脑上，图片不会填满全屏，这很奇怪，因为单个图像视图会，而图像加载器可以完美地完成它的工作。我认为这与我的画廊设置有关。

画廊代码：

```
// define pager identifier
        pager = (LinearLayout)findViewById(R.id.pager);
        pagerdot1 =(ImageView)pager.findViewById(R.id.pager_dot_1);
        pagerdot2 =(ImageView)pager.findViewById(R.id.pager_dot_2);
        pagerdot3 =(ImageView)pager.findViewById(R.id.pager_dot_3);
        venueImage = (ImageView)findViewById(R.id.venueImage);
        venueGallery = (CustomGallery)findViewById(R.id.GVvenueImage);

        imageLoader=new LargerImageLoader(this.getApplicationContext());

        if(venue.photos.size()>1){//multiple photos --> gallery

            if(venue.photos.size()==2){
                pagerdot3.setVisibility(View.GONE);
            }

            venueGallery.setVisibility(View.VISIBLE);
            venueImage.setVisibility(View.GONE);

            String[] fotos = new String[venue.photos.size()]; 
            for(int i=0;i<venue.photos.size();i++){
                if(venue.photos.get(i).large !=null){
                    fotos[i] = venue.photos.get(i).large;
                    System.out.println(venue.photos.get(i).large);
                }
            }
            ImagePagerAdapter galleryad = new ImagePagerAdapter(fotos);

            venueGallery.setAdapter(galleryad);
            venueGallery.setOnItemSelectedListener(new OnItemSelectedListener(){
                @Override
                public void onItemSelected(AdapterView<?> adapter, View view, int position, long id) {
                    switch(position) {
                    case 0:
                        pagerdot1.setImageResource(R.drawable.pager_oranje);
                        pagerdot2.setImageResource(R.drawable.pager_wit);
                        pagerdot3.setImageResource(R.drawable.pager_wit);
                        break;
                    case 1:
                        pagerdot2.setImageResource(R.drawable.pager_oranje);
                        pagerdot1.setImageResource(R.drawable.pager_wit);
                        pagerdot3.setImageResource(R.drawable.pager_wit);
                        break;
                    case 2:
                        pagerdot3.setImageResource(R.drawable.pager_oranje);
                        pagerdot2.setImageResource(R.drawable.pager_wit);
                        pagerdot1.setImageResource(R.drawable.pager_wit);
                        break;
                    default:
                        pagerdot1.setImageResource(R.drawable.pager_oranje);
                        pagerdot2.setImageResource(R.drawable.pager_wit);
                        pagerdot3.setImageResource(R.drawable.pager_wit);
                    }

                }
                @Override
                public void onNothingSelected(AdapterView<?> adapter) {

                }

            });
        }else if(venue.photos.size() ==1 ){ //1 foto
            if(venue.photos.get(0).large != null){
                venueGallery.setVisibility(View.GONE);
                venueImage.setVisibility(View.VISIBLE);
                imageLoader.DisplayImage(venue.photos.get(0).large, venueImage);
            } else{
                setStandardPic();
            }
            pager.setVisibility(View.GONE);
            //                
        } else{
            setStandardPic();           
        } 
```

与：

```
private class ImagePagerAdapter extends BaseAdapter {

    private String[] images;
    private LayoutInflater inflater;

    ImagePagerAdapter(String[] images) {
        this.images = images;
        inflater = getLayoutInflater();
    }

    @Override
    public int getCount() {
        return images.length;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = null;
        RelativeLayout borderImg;
        if (convertView == null) {
            imageView = new ImageView(getBaseContext());
            imageView.setLayoutParams(new LayoutParams(width,height)); // size
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);
            imageView.setPadding(0,0,0,0);
            imageView = (ImageView) inflater.inflate(R.layout.item_gallery_image, parent, false);
            borderImg = new RelativeLayout(getBaseContext());
            borderImg.setPadding(0,0,0,0);
            borderImg.setBackgroundColor(Color.TRANSPARENT); // no color
        }else {
                    imageView = (ImageView) convertView;
                    borderImg = (RelativeLayout) convertView;
                }

        imageLoader.DisplayImage(images[position], imageView);
        borderImg.addView(imageView);
        return borderImg;
    }
} 
```

顶部屏幕的xml：

```
<RelativeLayout
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent" >

                    <ImageView
                        android:id="@+id/venueImage"
                         android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:adjustViewBounds="true"
                        android:fadingEdge="none"
                        android:scaleType="centerCrop"
                        android:src="@drawable/header_food" />

                    <com.hera.ontdekdelft.lazyloader.CustomGallery
                        android:id="@+id/GVvenueImage"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:adjustViewBounds="true"
                        android:fadingEdge="none"
                        android:scaleType="centerCrop"
                        android:visibility="gone" />

                    <ImageView
                        android:id="@+id/venueCategoryImage"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentBottom="true"
                        android:layout_alignParentRight="true"
                        android:src="@drawable/venuecategory_sights" />

                    <include
                        android:id="@+id/pager"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentBottom="true"
                        android:layout_alignParentLeft="true"
                        layout="@layout/gallery_pager" />
                </RelativeLayout> 
```

我的自定义画廊只是一个普通画廊，重写了 onFling 方法以获得更好的投掷设置。

我应该改变什么以使我的画廊在平板电脑屏幕上也能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:35:47.317

目前尚不清楚您的宽度和高度在源中的来源......我没有平板电脑，但这在我的银河笔记和模拟器上运行良好。您的身高数学可能会因图像的纵横比而异。

screen_width 和 screen_height 在适配器的构造函数中出现：

在主要活动中

```
 Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    screen_width = size.x;
    screen_height = size.y; 
```

适配器getview

```
 @Override
    public View getView(int postion, View view, ViewGroup group)
        {
            ImageView imageView = new ImageView(_context);

            imageView.setImageResource(imageIds[postion]);
            imageView.setScaleType(ScaleType.FIT_XY);
            imageView.setLayoutParams(new Gallery.LayoutParams(_screen_width, (int) ((double)_screen_height/2.5)));
            return imageView;
        } 
```

# javascript - TypeError：无法调用 null 的方法“getThreads”。（第 59 行）+ 1 个其他错误

> ID：12562748
> 
> 赞同：1
> 
> 时间：2012-09-24T10:02:45.603
> 
> 标签：javascript, api, gmail, google-apps-script

我对 Javascript 知之甚少，但想使用此代码来增强我的 GMail 体验。它有效，但我也遇到错误。当我在 Google 电子表格中运行调试器时，两个函数出现故障：

> TypeError：无法调用 null 的方法“getThreads”。（第 59 行）

使用以下执行记录

> GmailApp.getUserLabelByName([FollowUp])
> 
> GmailApp.getUserLabelByName([FollowUp/1undefined])

*插入评论：*这里有一些关于 GMail API 调用 getThreads（和其他）的信息：[https ://developers.google.com/apps-script/class_gmaillabel#getThreads](https://developers.google.com/apps-script/class_gmaillabel#getThreads)

我不明白为什么它调用 Followup/1undefined -> 为什么它是未定义的？应该是Followup/1days

另一个函数的另一个错误：

> 找不到方法 moveThreadsT​​oInbox(. (line 26)

执行记录中没有任何内容

整个代码是：

```
// Adapted from:
// http://gmailblog.blogspot.com/2011/07/gmail-snooze-with-apps-script.html
//
// To setup:
// - From the |Run| menu select |setup|
//   - if prompted to authorize, do so, and then repeat this step.
//
// - Verify the script is set to be triggered to run
//   - |Triggers| menu |Current script's triggers...|
//   - 3 triggers should exist to call e.g. 
//     - dailyUpdate, Time Driven, Daily

function getLabelName(i, labelSuffixString) {
  return "FollowUp/" + i + labelSuffixString;
}

function setup() {
  for (var i = 1; i <= 7; ++i) {
    GmailApp.createLabel(getLabelName(i, "days"));
    GmailApp.createLabel(getLabelName(i, "weeks"));
  }
  GmailApp.createLabel("FollowUp");
}

function moveToInbox(page) {
  GmailApp.moveThreadsToInbox(page);
  GmailApp.markThreadsImportant(page);
}

function cleanOldFollowUpLabels() {
  var searchString = "-label:inbox label:FollowUp";
  for (var i = 1; i <= 7; ++i) {
    searchString += " -label:" + getLabelName(i, "days");
    searchString += " -label:" + getLabelName(i, "weeks");
  }
  searchString = searchString.replace(RegExp("/", "g"), "-");
  Logger.log("cleanOldFollowUpLabels() Search String:");
  Logger.log(searchString);
  var followUpLabel = GmailApp.getUserLabelByName("FollowUp");  
  var page = null;
  // Get threads in "pages" of 100 at a time
  while(!page || page.length == 100) {
    page = GmailApp.search(searchString, 0, 100);
    Logger.log("found: " + page.length);
    if (page.length > 0)
      followUpLabel.removeFromThreads(page);   
  }
}

function update(labelSuffixString) {
  var oldLabel, newLabel, page;
  var followUpLabel = GmailApp.getUserLabelByName("FollowUp");
  for (var i = 1; i <= 7; ++i) {
    newLabel = oldLabel;
    oldLabel = GmailApp.getUserLabelByName(getLabelName(i, labelSuffixString));
    page = null;
    // Get threads in "pages" of 100 at a time
    while(!page || page.length == 100) {
      page = oldLabel.getThreads(0, 100);
      if (page.length > 0) {
        followUpLabel.addToThreads(page);
        if (newLabel) {
          // Move the threads into "today’s" label
          newLabel.addToThreads(page);
        } else {
          moveToInbox(page);
        }     
        // Move the threads out of "yesterday’s" label
        oldLabel.removeFromThreads(page);
      }  
    }
  }
}

function dailyUpdate() {
  update("days");
}
function weeklyUpdate() {
  update("weeks");
} 
```

也在这里： http: [//pastie.org/4790086.js](http://pastie.org/4790086.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:19:17.760

mm..在同事的帮助下，我们找到了自己问题的答案。我运行了三个触发器：每日触发器、每周触发器和更新触发器。现在**更新触发器不是必需**的，因为它是由每日和每周触发器调用的，并且没有任何输入。这导致了错误。现在我必须等待，看看是否有任何错误以及脚本是否有效。

# javascript - 用哈希片段调用 window.location.replace(...) 后统一后退按钮的行为？

> ID：12562751
> 
> 赞同：2
> 
> 时间：2012-09-24T10:02:57.733
> 
> 标签：javascript, html, mobile, back-button, browser-history

调用后我的后退按钮的行为有所不同`window.location.replace(...)`，但我需要找到一种方法在所有浏览器（包括移动设备）上获得相同的行为。

给定以下 html（包含在文件 testpage.html 中）：

```
<html>
    <body>
        <button onclick="window.location.replace('testpage.html#test2');">Replace</button>
        <button onclick="window.location.assign('testpage.html#test3');">Assign</button>
    </body>
</html> 
```

最初的 url 是 testpage.html。

1.  单击替换按钮 - URL 更改为 testpage.html#test2
2.  单击分配按钮 - URL 更改为 testpge.html#test3
3.  点击返回按钮...

然后不同的浏览器做不同的事情：

*   在 Chrome (21) 和 Firefox (15) 上，URL 变回 testpage.html#test2 并且无法再单击。**这是我所期望的，这正是我想要的行为。**

*   在 Safari (5) 和 iOS (5) 上，URL 变回 testpage.html（没有哈希片段），完全跳过了包含 #test2 的中间 URL。

*   在 IE (9) 和 WP7 上，url 完全跳回到我在 testpage.html 之前的位置

*   在 android 浏览器（姜饼和冰淇淋三明治）上，第一次单击替换按钮没有任何作用（行为不正确）。第二次单击分配按钮将 URL 设置为 testpage.html#test3，如预期的那样。然后后退按钮返回到 testpage.html 的 url，没有哈希片段，这与 Safari 和 iOS 相同，但在第一个按钮单击没有做任何事情的情况下，这似乎是正确的行为。问题是调用`replace(...)`不起作用。

无论如何，行为不同的原因是什么？有什么方法可以统一我在 Chrome 和 Firefox 上的行为。

# html - 如何设置可变宽度（带背景的 div）以使其在不同设备上看起来不错？

> ID：12562753
> 
> 赞同：1
> 
> 时间：2012-09-24T10:03:00.370
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Twitter 引导程序。这是我的问题：我需要设置 div 的背景颜色，它应该是全屏的，但是当我尝试时：

和我的 HTML：

```
 <div class="rowHome">
      <div class="container">  
       <div class="row">
     ...
        </div>
      </div>
     </div> 
```

和完整的CSS：

```
 .container{
    width: 960px;       
}
    ...
     .rowHome{
margin-top:10px;
width:100%;
background-color:#400143;
} 
```

当我调整页面大小时，它看起来像这样：

![](../Images/f58f3900955e202d97680e1883a6eff9.png)

但是当我向右滚动时，我看到了错误：

![](../Images/a1b694ec9aff915e85d1356268d1e0b8.png)

有人能告诉我我的错误在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:06:28.870

这类问题主要出现在宽度`parent`灵活**且宽度**固定**时**。在你的css中写下：`child`

 **```
body{
  min-width:960px;
} 
```

检查此以获取更多[iPad 背景，以获取不跨越整个屏幕宽度的 div 块](https://stackoverflow.com/questions/5708203/ipad-background-for-div-blocks-not-spanning-entire-width-of-screen/5775968#5775968)**

# javascript - jquery：执行顺序

> ID：12562756
> 
> 赞同：0
> 
> 时间：2012-09-24T10:03:15.143
> 
> 标签：javascript, jquery, getjson

以下是我的代码：

```
$(document).on("click",".ball_link", function makeDiv(){
    function fetchLevels(){
        $.getJSON('fetch_level.php',{level: clicked_ball}, function(data) {
        $.each(data, function(i,name) {
                alert(name.level_id); //Line 1
            });
        });
    }
    fetchLevels();
    alert(name.level_id); //Line 2
    while (//some condition){
        alert("hi 2"); //Line 3
    }
}); 
```

所需的执行顺序：

1号线

第 2 行（与第 1 行的值相同）

3号线

实际执行顺序：

第 2 行（值：未定义）

3号线

第 1 行（正确值）

如何控制这些行的执行顺序以获得具有正确值的所需行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:07:09.950

由于 ajax 调用是异步的，要么您在成功回调中移动所有代码，要么使用延迟对象来处理正确的执行顺序

```
function fetchLevels() {

    $.getJSON('fetch_level.php', { level: clicked_ball })

    .done(function(data) {
        $.each(data, function(i,name) {
            alert(name.level_id); //Line 1
        });

        alert(name.level_id); //Line 2
        while (//some condition) {
            alert("hi 2"); //Line 3
        }
    });
}

fetchLevels(); 
```

或者你可以使用这个

```
function fetchLevels() { 
    return $.getJSON('fetch_level.php', { level: clicked_ball })
}

$.when(fetchLevels()).done(function(data) {
    $.each(data, function(i,name) {
          alert(name.level_id); //Line 1
    });

    alert(name.level_id); //Line 2
          while (//some condition) {
             alert("hi 2"); //Line 3
         }
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:09:04.263

通常在您的场景中，您会调用 .ajax 并使用成功命令进行处理，例如：

```
$.ajax({
  url: myUrl,
  dataType: 'json',
  data: myData,
  success: function(data) {
    // do stuff here.
  }
}); 
```

如果您*真的*需要按照您的建议进行编码，您可以使用`async: false`，例如：

```
$.ajax({
  url: myUrl,
  dataType: 'json',
  async: false,
  data: myData,
  success: function(data) {
    // set variable here, then work with it outside the function
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:06:44.067

将第 2 行和第 3 行放在`$.getJSON`回调中，否则第 1 行在回调完成后异步执行，其余的则同步执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:07:46.433

`getJSON`是异步的。您希望在加载后发生的所有事情都需要在回调中：

```
$(document).on("click", ".ball_link", function makeDiv() {
     $.getJSON('fetch_level.php', {
         level: clicked_ball
     }, function (data) {
         $.each(data, function (i, name) {
             alert(name.level_id); //Line 1
         });

         fetchLevels();
         alert(name.level_id); //Line 2
         while ( //some condition){
             alert("hi 2"); //Line 3
         }
     });
 }); 
```

# mysql - 使用 LIKE 进行 MySQL 查询

> ID：12562758
> 
> 赞同：0
> 
> 时间：2012-09-24T10:03:22.087
> 
> 标签：mysql

我对这个查询有疑问。

```
SELECT id, zadane, firma, nazov, miesto, ukoncenie
FROM praca
WHERE LOWER( nazov ) LIKE '%administratívny pracovník, referent%'
AND potvrdena =1
AND LOWER( miesto ) LIKE '%bratislavský kraj%'
OR LOWER( miesto ) LIKE '%bratislava%'
OR LOWER( miesto ) LIKE '%malacky%'
OR LOWER( miesto ) LIKE '%pezinok%'
OR LOWER( miesto ) LIKE '%senec%'
ORDER BY nazov
LIMIT 0 , 30 
```

它应该只显示 LOWER(nazov) LIKE 的记录，但它仍然显示包含来自 LOWER(miesto) 的东西的所有内容。我不确定我是否解释正确。对不起我的英语。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:05:58.853

您需要将`OR`s 包装在`()`.

```
SELECT id, zadane, firma, nazov, miesto, ukoncenie
FROM praca
WHERE LOWER( nazov ) LIKE '%administratívny pracovník, referent%'
AND potvrdena =1
AND ( 
   LOWER( miesto ) LIKE '%bratislavský kraj%'
   OR LOWER( miesto ) LIKE '%bratislava%'
   OR LOWER( miesto ) LIKE '%malacky%'
   OR LOWER( miesto ) LIKE '%pezinok%'
   OR LOWER( miesto ) LIKE '%senec%' 
)
ORDER BY nazov
LIMIT 0 , 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:07:07.817

尝试这个：

```
SELECT id, zadane, firma, nazov, miesto, ukoncenie
FROM praca
WHERE LOWER( nazov ) LIKE '%administratívny pracovník, referent%'
AND potvrdena =1
AND( 
   LOWER( miesto ) LIKE '%bratislavský kraj%'
OR LOWER( miesto ) LIKE '%bratislava%'
OR LOWER( miesto ) LIKE '%malacky%'
OR LOWER( miesto ) LIKE '%pezinok%'
OR LOWER( miesto ) LIKE '%senec%'
)
ORDER BY nazov
LIMIT 0 , 30 
```

# c# - Rebex FTPS 组件上传文件耗时过长

> ID：12562760
> 
> 赞同：0
> 
> 时间：2012-09-24T10:03:30.230
> 
> 标签：c#, ftps, rebex

我正在尝试使用[Rebex 的 FTP 组件](http://www.rebex.net/ftp-ssl.net/)将 230 多个文件上传到 FTPS 服务器。所有文件的总大小都像 5MB。所以每个都是几KB。我用这行代码上传文件：

```
ftps.PutFiles(
    @"C:blablabla*.csv", 
    @"blablafolder/test", 
    FtpBatchTransferOptions.XCopy, 
    FtpActionOnExistingFiles.OverwriteAll); 
```

但是需要2到3个小时。谁能帮助解释为什么这很慢或建议如何更快地完成？

编辑：

通过执行 for 循环并使用不带 S 的 PutFile 插入每个文件来修复它，它可以工作，现在只有 180 个文件它才会停止，现在试图解决这个问题，欢迎回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:25:40.793

一般来说，它可能是由多种原因引起的。在大多数情况下，找出正在发生的事情的最简单方法是创建一个通信日志并对其进行详细调查。可以按照[此处](http://forum.rebex.net/questions/10/how-to-create-a-log-of-communication-between-component-and-server)所述进行。如果你把日志文件发给我，我可以帮你。

也欢迎您在我们的[论坛](http://forum.rebex.net)上提问有关 Rebex 产品的问题。实际上，它是由组件开发人员自己在每个工作日进行检查的。

顺便提一句。`FtpBatchTransferOptions.XCopy`选项遍历整个目录结构（包括所有子目录）。如果不需要此功能，您可以尝试此行来加快整个过程：

```
ftps.PutFiles(
    @"C:\blablabla\*.csv", 
    @"blablafolder/test", 
    FtpBatchTransferOptions.Default, 
    FtpActionOnExistingFiles.OverwriteAll); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:31:41.123

1.  你试过用普通的 ftp 客户端上传它吗？
2.  您是否 100% 确定带宽不是限制因素（客户端和服务器端）？
3.  （即你有没有证明你可以达到更高的速度）？

试试[http://winscp.net/eng/index.php](http://winscp.net/eng/index.php)

# android - 单击按钮时打开列表视图

> ID：12562761
> 
> 赞同：1
> 
> 时间：2012-09-24T10:03:38.993
> 
> 标签：android

我想做一些事情，当我点击按钮时，他会为我打开类似列表视图的内容，其中包含我手机中所有联系人的名称......我该怎么做？我知道如何获取手机中所有联系人的姓名并将它们放入字符串数组中，但是当我单击按钮时，如何打开一个包含所有联系人姓名列表视图的新窗口？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:22:35.683

在您单击按钮时的第一个活动中：

```
startActivity(new Intent(this, ContactsActivity.class)); 
```

然后在您的 ContactsActivity 中：

```
public class ContactsActivity extends ListActivity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            setContentView(R.layout.contacts_view);

            ListAdapter adapter = createAdapter();
            setListAdapter(adapter);
        }

        /**
         * Creates and returns a list adapter for the current list activity
         * @return
         */
        protected ListAdapter createAdapter()
        {
            // List with strings of contacts name
            contactList = ... someMethod to get your list ...

            // Create a simple array adapter (of type string) with the test values
            ListAdapter adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, contactList);

            return adapter;
        }
    } 
```

ContactsActivity 的 XML 文件（将其命名为 contacts_view.xml）：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     >
     <ListView  
         android:id="@android:id/list"
         android:layout_width="fill_parent" 
         android:layout_height="wrap_content" 
         />
     <TextView android:id="@android:id/empty"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="Empty set"
         />
 </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:18:24.880

在按钮上单击您需要启动包含所有联系人列表的新 Activity（或 ListActivity）。因此您需要`onClicklistener`在函数中设置然后`onClick`您需要编写代码来启动 Activity

在第二个活动上创建一个 CustomAdapter，它将用说 List 初始化

```
class Contact
{
    private String number;
    private String name
} 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:12:37.277

可以使用 listActivity

[android开发人员上的listActivity](http://developer.android.com/reference/android/app/ListActivity.html)

# java - oracle sql - 在我的数据库表的一列中存储 4000 个字符

> ID：12562762
> 
> 赞同：3
> 
> 时间：2012-09-24T10:03:40.167
> 
> 标签：java, sql, database, oracle, spring-mvc

在我的 Web 应用程序中，我将一些文本消息保存在数据库表（Oracle）的 COLUMN 中。之前的 VARCHAR2 长度（最大长度）是（500 BYTE）。现在客户要求我将最大长度增加到 4000 个字符。
是否可以在数据库表的列中保存 4000 个字符，或者我们是否需要将其保存为 BLOB。
哪个提供更好的性能？
任何人都可以澄清一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T10:20:12.427

Oracle对一列有4000***字节***`VARCHAR2`的限制，并且无法解决该限制。

`VARCHAR2`因此，如果您使用*单字节*字符集，则只能在列中存储 4000个字符。

如果您使用 UTF8 或任何其他多字节字符集，您可能无法存储 4000 个*字符*（因为某些字符需要超过一个字节）。**将**列定义为`VARCHAR2(4000 Char)`不会克服该限制。

 **如果您确实在使用多字节字符集，则必须使用一`CLOB`列，否则您将无法存储 4000 个字符（如 gTito 所建议的那样）。

如果您使用的是单字节字符集，那么您可以使用一`VARCHAR2(4000 Char)`列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T10:12:03.340

你检查[过 CLOB](http://www.orafaq.com/wiki/CLOB)吗？对于保存大文本，oracle 建议使用 CLOB。

> CLOB（字符大对象）是一种 Oracle 数据类型，最多可容纳 4 GB 数据。CLOB 可以方便地存储文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:16:14.830

如果你需要通过 sql 查询来搜索，它必须是 varchar2。否则 clob/blob 更好，因为它需要**

# c# - 如何在 nopcommerce 中添加命名空间？

> ID：12562763
> 
> 赞同：0
> 
> 时间：2012-09-24T10:03:40.037
> 
> 标签：c#, namespaces, nopcommerce

我正在使用[nopcommerce](http://www.nopcommerce.com/)。

我想从外部数据库获取库存数量。

因此，我在 Presentation 文件夹中添加了另一个项目，并在 Web 配置文件中设置了数据库连接字符串。

我尝试在 Nop.Admin 项目中使用新的项目功能。

为此我写

```
using ExternalDB; 
```

但是有错误-

```
The type or namespace name 'ExternalDB' could not be found (are you missing a using directive or an assembly reference?) 
```

您对为什么找不到名称空间有任何想法吗？如何在 nopcommerce 中添加带有外部数据库的外部项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:05:38.443

在另一个项目中没有一个项目的概念。*您可以在 Visual Studio 的解决方案*中拥有一个项目，但这不是一回事。

您应该查看该`ExternalDB`类型在哪个命名空间中，并且该命名空间只有一个 using 指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:26:57.623

“ExternalDB”是项目名称还是类型？我猜您错过了将与“ExternalDB”关联的引用添加到您的管理项目。

# iphone - 我可以在视图控制器中使用标签栏控制器而不是委托类吗？

> ID：12562769
> 
> 赞同：0
> 
> 时间：2012-09-24T10:03:52.180
> 
> 标签：iphone, uitabbarcontroller, uitabbar

我`UINavigation`在委托类中使用控制器。在第三个视图类上导航两个视图类后，我需要一个`tabbar`控制器，它可以控制另外三个`ViewControllers`，并且在前两个视图控制器上不应该看到标签栏。我怎样才能做到这一点 ？

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    self.title =@"Scan";

    tabController =[[UITabBarController alloc]init];

    ScanTicketView *scan =[[ScanTicketView alloc]initWithNibName:@"ScanTicketView" bundle:nil];

    SearchView *search =[[SearchView alloc]initWithNibName:@"SearchView" bundle:nil];

    HistoryView *history =[[HistoryView alloc]initWithNibName:@"HistoryView" bundle:nil];

   tabController.viewControllers=[NSArray arrayWithObjects:scan,search,history, nil];

    [self presentModalViewController:tabController animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:23:29.167

按照我的回答...您可以随时添加和删除 tabBar
[链接](https://stackoverflow.com/questions/12370748/overlay-tabbar-with-a-view/12370879#12370879)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:06:49.097

是的你可以。请参阅此[链接的示例](http://ioscoderef.blogspot.com/2012/08/adding-uitabbarcontroller-in.html)

在您想要推送给您的第三个视图（选项卡控制器）的第二个视图控制器中执行此操作

```
UITabBarController *tabBarController=[[UITabBarController alloc]init];
tabBarController.viewControllers=[NSArray arrayWithObjects:firstViewController,secondViewController,thirdViewController, nil];
//[self.navigationController pushViewController:tabBarController animated:YES];// this works too but since it seems to be against Apple's Human interface Guidelines you can present the view instead of pushing
[self presentModalViewController:tabBarController animated:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:28:09.747

理想情况下，TabBarcontroller 应该是应用程序的起始案例。但在极少数情况下，您希望在视图控制器中显示它，请遵循 ..

```
 UITabBarController *tabBarController=[[UITabBarController alloc]init];
    tabBarController.viewControllers=[NSArray arrayWithObjects:firstViewController,secondViewController,thirdViewController, nil];

    [self presentModalViewController:tabBarController animated:NO]; 
```

# android - 如何从图像的中心开始创建动画

> ID：12562772
> 
> 赞同：1
> 
> 时间：2012-09-24T10:04:07.187
> 
> 标签：android, animation

我有一个自定义对话框类，用于在触摸它时弹出图像。对话框显示在屏幕的中心。我正在为此对话框设置弹出和下推动画。

popup_show.xml

```
<scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="250"
    android:fromXScale="0.0"
    android:fromYScale="0.0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toXScale="1.0"
    android:toYScale="1.0" /> 
```

popup_hide.xml

```
<scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="250"
    android:fromXScale="1.0"
    android:fromYScale="1.0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toXScale="0.0"
    android:toYScale="0.0" /> 
```

这些动画完美地工作。通过使用这些动画，对话框会弹出屏幕的中心。

但我想让这个对话框从图像的中心弹出并显示在屏幕的中心。否则如何从图像中心开始对话并显示在屏幕中心？怎么可能？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:34:41.900

我认为这 mi8 帮助：

```
<scale                
android:toXScale="1.0"              
android:fromXScale="0.0"            

android:toYScale="1.0"
android:fromYScale="0.0"

android:pivotX="0%"
android:pivotY="0%"

android:startOffset="100"
android:duration="1000">
</scale> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:24:53.973

似乎可以使用[resources](https://stackoverflow.com/questions/4152041/scale-translate-animation)或[code](https://stackoverflow.com/questions/11422421/android-image-view-scale-animation)。

您唯一需要做的就是在动画开始之前进行计算 - 图像的中心（调用 smth like `View.getLocationOnScreen()`or `View.getLocationInWindow()`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T04:38:28.010

使用这种风格

```
<scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="250"
    android:fromXScale="0.0"
    android:fromYScale="0.0"
    android:pivotX="50%"
    android:pivotY="0"
    android:toXScale="1.0"
    android:toYScale="1.0" /> 
```

# c# - 当前上下文中不存在名称“类”

> ID：12562773
> 
> 赞同：0
> 
> 时间：2012-09-24T10:04:08.303
> 
> 标签：c#, asp.net

我制作了一个用户控件，可以在我的页面上生成一个超链接列表。问题是它似乎不想工作。这是我的用户控件代码：

```
<%@ Control Language="C#" AutoEventWireup="True" CodeBehind="DepartmentsList.ascx.cs"
Inherits="BaloonShop.UserControls.DepartmentsList" %>
<asp:DataList ID="list" runat="server" CssClass="departmentslist" Width="200px">
<HeaderStyle CssClass="departmentslisthead" />
<HeaderTemplate>
    Choose a Department
</HeaderTemplate>
<ItemTemplate>
    <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='<%# Classes.Link.ToDepartment(Eval("DepartmentID").ToString())%>'
    Text='<%# HttpUtility.HtmlEncode(Eval("Name").ToString()) %>'
    ToolTip='<%# HttpUtility.HtmlEncode(Eval("Description").ToString()) %>'
    CssClass='<%# Eval("DepartmentID").ToString() == Request.Querystring["DepartmentID"] ? "departmentselected" : "departmentunselected" %>'>
    </asp:HyperLink>
</ItemTemplate> 
```

我的文件结构如下：

![文件结构](../Images/21aca74c518d4f258e965834c8d89f3e.png)

为什么说找不到Classes文件夹？

如果您需要更多信息，请询问。

**编辑**

链接类代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace BaloonShop.Classes
{
/// <summary>
/// Link factory class
/// </summary>
public class Link
{
    // Builds an absolute URL
    private static string BuildAbsolute(string relativeUri)
    {
        // get current uri
        Uri uri = HttpContext.Current.Request.Url;
        // build absolute path
        string app = HttpContext.Current.Request.ApplicationPath;
        if (!app.EndsWith("/")) app += "/";
        relativeUri = relativeUri.TrimStart('/');
        // return the absolute path
        return HttpUtility.UrlPathEncode(String.Format("http://{0}:{1}{2}{3}", uri.Host, uri.Port, app, relativeUri));
    }

    // Generate a department URL
    public static string ToDepartment(string departmentId, string page)
    {
        if (page == "1")
            return BuildAbsolute(String.Format("Catalog.aspx?DepartmentID={0}", departmentId));
        else
            return BuildAbsolute(String.Format("Catalog.aspx?DepartmentId={0}&Page={1}", departmentId, page));
    }

    // Generate a department URL for the first page
    public static string ToDepartment(string departmentId)
    {
        return ToDepartment(departmentId, "1");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:29:38.197

`public link link= new link();`在 DepartmentsList.ascx.cs" 将解决你的问题。使用这个： `NavigateUrl='<%# Link.ToDepartment(Eval("DepartmentID").ToString())%>'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:12:54.353

右键单击您的项目（在 Visual Studio 中）并选择添加 ASP.NET 文件夹，然后选择**App_Code**。接下来将您的类文件夹**拖到 App_Code**。然后它可能会解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:07:54.243

您的代码只是指`Classes`. 除非您已经在导入`BaloonShop`，否则 this 仅指的是`global::Classes`，但您的命名空间是`global::BaloonShop.Classes`.

所以：使用`BaloonShop.Classes`而不是`Classes`：

```
<asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='<%# BaloonShop.Classes.Link.ToDepartment(Eval("DepartmentID").ToString())%>' 
```

# javascript - 将对象数组设置为 sessionStorage

> ID：12562778
> 
> 赞同：14
> 
> 时间：2012-09-24T10:04:29.033
> 
> 标签：javascript, json, session-storage

好的，所以我有这个 JSON：

```
{"Status":"OK!","ListaPermessi":
[{"IdPermesso":10,"Nome":"WIND_PARAMS"},
 {"IdPermesso":11,"Nome":"ADMIN_SERVER"},
 {"IdPermesso":21,"Nome":"REC"},
 {"IdPermesso":22,"Nome":"REC_DIST"},
 {"IdPermesso":23,"Nome":"REC_DIST_CR"}
]} 
```

我的代码是：

```
var parsedResult = JSON.parse(result); // where result is the above JSON
if (parsedResult.Status === "OK!") {
    // Set sessionStorage vars
    if (typeof(Storage) !== "undefined") {
        // localStorage & sessionStorage support!

        sessionStorage.setItem("ListaPermessi", parsedResult.ListaPermessi);
    }
    else {
        // Sorry! No web storage support :(
    }
} 
```

但是......这不能正常工作！赋值后，从 Firebug 看到的 sessionStorage 是这样的：

**会话存储**：

*   ListaPermessi = " *[对象对象],[对象对象],[对象对象],[对象对象],[对象对象]* "

从javascript将对象数组分配给**sessionStorage变量的正确方法是什么？**

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-24T10:06:36.713

您需要将其转回 JSON 字符串。您可以使用以下[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)方法做到这一点：

```
sessionStorage.setItem("ListaPermessi", JSON.stringify(parsedResult.ListaPermessi)); 
```

这样做的原因是 Web 存储只能存储字符串，并且返回的默认`toString`方法`Object`，如您现在所见，“[object Object]”。

* * *

旁注：[`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)是运算符，而不是函数，因此不需要括号：

```
if (typeof Storage !== "undefined") { //... 
```

# android - android中特定属性的XML解析

> ID：12562780
> 
> 赞同：0
> 
> 时间：2012-09-24T10:04:37.473
> 
> 标签：android, android-layout, android-intent, xml-parsing, android-xml

我如何在 android 上解析这个 xml 文件以获取大图像的 Url

```
<image size="small">http://userserve-ak.last.fm/serve/34/62210477.png</image> <image size="medium">http://userserve-ak.last.fm/serve/64/62210477.png</image>
<image size="large">http://userserve-ak.last.fm/serve/126/62210477.png</image> 
```

在 ICS 和 JellyBean 等较新的 Android 版本上访问图像大小 =“大”的 url 的最佳方法是什么 *已*编辑问题 ** 作为答案中提供的链接 我现在根据我的 xml 文件进行了一些更改 ii 获取数据但我想访问 url大图像我需要做什么修改才能获得大图像 url

修改代码（我认为）

```
@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    elementOn = true;
    if (localName.equals("artist"))
    {
        data = new XMLGettersSetters();
    } else if (localName.equals("image")) {
        /** 
         * We can get the values of attributes for eg. if the CD tag had an attribute( <CD attr= "band">Akon</CD> ) 
         * we can get the value "band". Below is an example of how to achieve this.
         * 
         * String attributeValue = attributes.getValue("attr");
         * data.setAttribute(attributeValue);
         * 
         * */
    }
}
/** 
 * This will be called when the tags of the XML end.
 **/
@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    elementOn = false;
    /** 
     * Sets the values after retrieving the values from the XML tags
     * */ 
    if (localName.equalsIgnoreCase("name"))
        data.setTitle(elementValue);
    else if (localName.equalsIgnoreCase("listeners"))
        data.setArtist(elementValue);
    else if (localName.equalsIgnoreCase("url"))
        data.setCountry(elementValue);
    else if (localName.equalsIgnoreCase("image"))
        data.setCompany(elementValue);
    }
/** 
 * This is called to get the tags value
 **/
@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    if (elementOn) {
        elementValue = new String(ch, start, length);
        elementOn = false;
    }
} 
```

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:13:30.683

尝试这个：

```
 XMLParser parser = new XMLParser();
    String URL = "http://ws.audioscrobbler.com/2.0/?method=artist.gettopalbums&artist=akon&api_key=your_api_key";
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName("album");

    for (int i = 0; i < nl.getLength(); i++) {
        Element e = (Element) nl.item(i);
        Log.e("name", parser.getValue(e, "name"));
        NodeList k = e.getElementsByTagName("image");
        for (int j = 0; j < k.getLength(); j++) {
            Element e1 = (Element) k.item(j);
            if(e1.getAttribute("size").equals("large"))
            Log.e("ImageURL", parser.getValue(e1, "image"));
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:10:46.467

为此，您可以使用 Sax 或 dom 解析器，我推荐使用 Sax 解析器，因为它的内存占用少且速度快。

有关示例的更多详细信息，请查看此[链接](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example)

```
@Override 
  public void startElement(String namespaceURI, String localName, String qName, Attributes atts) throws SAXException {

      //do some checking.

      if(atts.getValue("size").equals("large")&&localName.equals("Image"))
      {
            //do some action
      }; 

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:12:24.877

```
 public static String getTextValue(Element ele, String tagName) {
    String textVal = "";
    NodeList nl = ele.getElementsByTagName(tagName);
    if(nl != null && nl.getLength() > 0) {
        Element el = (Element)nl.item(0);
        if(el.getFirstChild()!=null)    
        {
            textVal = el.getFirstChild().getNodeValue();
        }
    }
    return textVal;
}

or try using ele.getAttribute(tagName) 
```

在上述方法中输入您的元素节点和标记名“image”...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:13:06.043

将图像的 url 从 xml 的 url 解析成一个字符串，并将该字符串用于任何目的。

您可以从 jsoup.org 查看 jsoup。我在几个项目中使用它并且对它很满意。

# sonarqube - 在声纳中安排项目报告

> ID：12562782
> 
> 赞同：0
> 
> 时间：2012-09-24T10:04:40.987
> 
> 标签：sonarqube

我们如何在声纳服务器上为各种项目安排报告？可能吗？如果是，请让我知道如何做到这一点。

您的回应将是可观的。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:11:20.133

Sonar 内部没有内置调度程序。这是 Jenkins/Hudson 等软件的作用，用于定义计划并在需要时触发声纳分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:29:57.560

安排报告是什么意思。运行声纳分析？如果是这种情况，那么您应该查看 Sonar 如何与 Jenkins 或 Hudson 等 CI 工具集成。[http://docs.codehaus.org/display/SONAR/Hudson+and+Jenkins+Plugin](http://docs.codehaus.org/display/SONAR/Hudson+and+Jenkins+Plugin)

# jquery - 页面加载时的jquery砌体排水沟宽度

> ID：12562785
> 
> 赞同：0
> 
> 时间：2012-09-24T10:04:55.097
> 
> 标签：jquery

当站点加载时，砌体箱首先排列在左侧（http://herrfischerhamburg.de/re/），1 或 2 秒后，它们以正确的排水沟宽度排列。知道如何在页面加载时直接以正确的装订线宽度排列它们吗？

```
function init_masonry(){
var $container = $('.content');
var gutter = 12;
var min_width = 250;
$container.imagesLoaded( function(){
    $container.masonry({
        itemSelector : '.box',
        gutterWidth: gutter,
        isAnimated: true,
          columnWidth: function( containerWidth ) {
            var num_of_boxes = (containerWidth/min_width | 0);
            var box_width = (((containerWidth - (num_of_boxes-1)*gutter)/num_of_boxes) | 0) ;
            if (containerWidth < min_width) {
                box_width = containerWidth;
            }
            $('.box').width(box_width);
            return box_width;
          }
    });
}); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:32:53.570

您可能错过了最重要的部分之一......

调用 init_masonry() 的内容，您也可以`$container.masonry()`使用随附的插件 .imagesLoaded() 进行包装。

`ImagesLoaded`, 是一个插件，只有在所有图像完全加载后才会触发。砌体这样做是因为不确定每块砖应该有多大。您可以采取的一种方法是在每个图像上设置高度和宽度（无论如何您都应该这样做），然后不要使用 imagesLoaded。这样，您就不应该在砌体初始化和放置之间出现延迟。

另外，您是否需要`isAnimated`设置为true。这可能会加剧延迟，因为我相信默认情况下延迟是 750 。

[http://masonry.desandro.com/docs/animating.html](http://masonry.desandro.com/docs/animating.html)

# php - $_SESSION['user'] 有什么问题？

> ID：12562790
> 
> 赞同：0
> 
> 时间：2012-09-24T10:04:58.277
> 
> 标签：php, session, session-variables

我检测到与另一个用户已经发现的相同的事情 -[在 PHP 会话中存储对象](https://stackoverflow.com/questions/1442177/storing-objects-in-php-session)：

如果我在此对象中存储一个序列化对象（即字符串），`$_SESSION['user']`则在下一页调用时会消失。这不是我的问题，因为如果我使用不同的东西`user`作为键，一切都很好。有什么魔法吗？这是预留的吗？

`$_SESSION['user']`变成`false`. 键仍然存在，但值为`false`。我不太确定，但我认为在`false`第二次通话后会获得价值。

有什么想法或提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:41:24.320

问题可能是 $name 已经在代码中和/或 session_star() 放置在错误的位置。seesion_start() 需要始终位于页面顶部！

# iphone - ios：在应用程序文件夹中缓存图像

> ID：12562795
> 
> 赞同：0
> 
> 时间：2012-09-24T10:05:27.487
> 
> 标签：iphone, objective-c, ios, caching, uiimage

我正在开发一个 Iphone 应用程序。

该应用程序的想法是允许用户下载图片并将其保存在手机上。他可以稍后打开它。（普通缓存系统）

我现在正在做的是从服务器获取 UIIamge，然后使用以下命令将其保存在手机上：

```
UIImageWriteToSavedPhotosAlbum 
```

然后我使用`imagePickerController`允许用户加载图像。

我的问题是：

有没有办法可以将图像保存在应用程序文件夹中？这个想法是我不想让用户从应用程序外部删除图像（我有一个“清除图像”按钮）。除了照片库，还有什么地方可以缓存图片吗？也许在应用程序包或文件夹中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:26:37.930

使用以下任一方法将 UIImage 保存到应用程序的文档目录中

```
[UIImageJPEGRepresentation(image, JPEG_COMPRESSION_QUALITY) 
          writeToFile:photoPath atomically:YES]; 
```

或者

```
[UIImagePNGRepresentation(image) writeToFile:photoPath atomically:YES]; 
```

# java - j2sdk1.4.2_16 中缺少 GetStaticMethodID

> ID：12562796
> 
> 赞同：0
> 
> 时间：2012-09-24T10:05:32.007
> 
> 标签：java, visual-c++, java-native-interface

重新安装我的电脑后，我发现我无法编译使用`Java 1.4`. 项目在我的旧电脑上运行没有问题。目前我有错误：

```
Error   4   error C2039: 'GetStaticMethodID' : is not a member of 'JNIEnv_' 
```

`jmethodID GetStaticMethodID(jclass clazz, const char *name,const char *sig)`我在 jni.h 版本中找不到结构 JNIEnv_ 的功能`j2sdk1.4.2_16`。此功能在版本的 jni.h 中可用`jdk1.7.0_01`。

可能有什么问题？新的 Java 安装有问题吗？我想我不能将较新的 jni.h 与较旧的 java lib 一起使用。

**jni.h版本j2sdk1.4.2_16**有顶注释行

 **```
/*
 * @(#)jni.h    1.55 03/01/23
 *
 * Copyright 2003 Sun Microsystems, Inc. All rights reserved.
 * SUN PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 */

/*
 * We used part of Netscape's Java Runtime Interface (JRI) as the starting
 * point of our design and implementation.
 */

/******************************************************************************
 * Java Runtime Interface
 * Copyright (c) 1996 Netscape Communications Corporation. All rights reserved.
 *****************************************************************************/ 
```

**jni.h版本jdk1.7.0_01**有顶注释行

 **```
/*
 * Copyright (c) 1996, 2006, Oracle and/or its affiliates. All rights reserved.
 * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 */

/*
 * We used part of Netscape's Java Runtime Interface (JRI) as the starting
 * point of our design and implementation.
 */

/******************************************************************************
 * Java Runtime Interface
 * Copyright (c) 1996 Netscape Communications Corporation. All rights reserved.
 *****************************************************************************/ 
```****

# javascript - 激活隐私浏览时防止内容脚本注入？

> ID：12562799
> 
> 赞同：0
> 
> 时间：2012-09-24T10:05:37.683
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我有一个内容脚本，我想防止在启用隐私浏览时注入自身。我正在使用最新版本的 Firefox 附加 SDK (1.9)。

我正在注入这样的内容：

```
// lib/main.js
var pb = require('private-browsing');

pageMod.PageMod({
  include: "http://*",
  contentScriptFile: [self.data.url('jquery.min.js'),
                      self.data.url('content.js')],
  contentSriptWhen: 'start',
  onAttach: function(worker) {
    // do some stuff
  }
}); 
```

包装整个事情是一个 if 语句不起作用，因为没有为每次注入评估 pageMode 附件。进入和离开私人浏览也不会触发重新评估。

```
if (!pb.isActive) {
  // the code I have above.
} 
```

我可以收听该`pb.on('start')`事件，但我认为没有办法取消附加页面模块。如果启用了隐私浏览模式，我可能不操作内容脚本，但这似乎是一种黑客行为，可能会导致未来的安全问题。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:20:27.047

有一个`destroy`方法：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/page-mod.html#destroy%28%29](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/page-mod.html#destroy%28%29)

请务必注意，如果您对现有页面进行了一些更改，则必须手动删除它们。

所以，你可以有类似的东西：

```
const pb = require('private-browsing');
const { PageMod } = require('page-mod');

var mod = null;

var options = {
  include: "http://*",
  contentScriptFile: [self.data.url('jquery.min.js'),
                      self.data.url('content.js')],
  contentSriptWhen: 'start',
  onAttach: function(worker) {
    // do some stuff
  }
}

if (!pb.isActive)
  mod = PageMod(options);

pb.on("start", function(){
  if (mod) {
    mod.destroy();
    mod = null;
  }
})

pb.on("stop", function() {
  if (!mod) {
    mod = PageMod(options);
  }
}) 
```

没有测试，只是给你一个粗略的想法。我不确定每次创建/销毁 PageMod 是一件好事。

***请注意**mozilla-labs-jetpack 邮件列表上的原始帖子，将答案复制到此处以对不了解 ML 的其他人有用。*

# ruby-on-rails - 从 Ruby 中的 DateTime 变量获取时间

> ID：12562804
> 
> 赞同：23
> 
> 时间：2012-09-24T10:05:42.600
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, datetime

我在 ruby​​ 中工作，我有一个对象，其中包含数据库中今天的日期时间。我只想要时间截断日期。我怎么能得到那个？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-24T10:17:03.563

试试[DateTime#strftime](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime)。

```
DateTime.now.strftime("%H:%M")
# => "12:17" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T10:17:31.850

```
#!/usr/bin/ruby -w
time1 = Time.now
puts "Current Time : " + time1.hour + ":" + time1.min + ":" + time1.sec 
```

取自并归功于 - [This TutorialsPoint Post](http://www.tutorialspoint.com/ruby/ruby_date_time.htm "教程点")。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-13T05:15:45.150

如果你经常使用它，你可以使用 gem [time_splitter](https://github.com/shekibobo/time_splitter)来帮助你为你的 datetime 属性设置一些日期、时间、小时和分钟的访问器。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-12T10:28:04.383

您可以从这里查看不同的 Rails 日期格式：[Rails Date Formats](http://www.wetware.co.nz/2009/07/rails-date-formats-strftime/)

例子 ：

```
time = Time.now
time.strftime("%d %B %Y")
# => 12 December 2016 
```

# c++ - #include c/c++中的绝对路径语法

> ID：12562807
> 
> 赞同：10
> 
> 时间：2012-09-24T10:05:47.437
> 
> 标签：c++, c, path, include, absolute

出于某种原因，我需要`#include`为我的系统使用绝对路径。

使用`#include "D:\temp\temp_lib\temp.h"`可以接受吗？

我已经尝试过这些不同的用法，而且一切似乎都有效。

1.  `#include "D:\temp\temp_lib\temp.h"`
2.  `#include "D:\\temp\\temp_lib\\temp.h"`
3.  `#include "D:/temp/temp_lib/temp.h"`

我只想知道我应该使用哪一个？我正在使用 MSVC 2005。我想知道这三个是否仍然可以在 Linux 或其他环境中工作。

我期待#1 在编译期间出现错误，但我没有得到任何错误。任何人都知道这是为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T10:21:05.027

我知道的每个实现，当然还有 MSVC 2005 和 linux，都允许您指定在其中查找头文件的目录路径。您应该在目录路径列表中包含 D:\temp\temp_lib，然后使用

```
#include <temp.h> 
```

对于 gcc，使用 -I *path*。对于 MSVC，请参阅[Visual Studio 在哪里查找 C++ 头文件？](https://stackoverflow.com/questions/335408/where-does-visual-studio-look-for-c-header-files)

#1 不是语法错误的原因是，虽然它看起来像字符串文字，但它不是。规范是

```
#include "q-char-sequence" 
```

q-char 在哪里

> 源字符集的任何成员，除了换行符和 "

特别是，`\`没有特别的意义。q-char-sequence 的解释是实现定义的。

# sql-server - 迄今为止的 VARCHAR

> ID：12562813
> 
> 赞同：2
> 
> 时间：2012-09-24T10:06:16.890
> 
> 标签：sql-server

目前我有一个名为 date 作为 varchar 而不是日期时间的列。格式当前为“sep12”。我怎样才能将其转换为日期类型？我知道这是模板，但由于我当前的格式为 MMMYY，我不确定将数字更改为什么。

```
CAST (
    SUBSTRING(date, 3, 2) + '/' +
    SUBSTRING(date, 1, 2) + '/' +
    SUBSTRING(date, 5, 4) 
AS DATETIME) 
```

任何帮助将不胜感激

在按日期字段排序时，它的排序类似于 apr09、apr10。aug09, aug10 但我需要按年份顺序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:25:13.123

首先，以这种方式存储日期是一个糟糕的主意。但是如果你知道这一年总是从开始的，`20`那么你可以使用这样的东西（参见[SQL Fiddle Demo](http://sqlfiddle.com/#!3/d41d8/4619)）：

```
declare @dt varchar(10) = 'Sep12'

select convert(datetime, left(@dt, 3) + '01 20' + right(@dt, 2), 100) 
```

如果从表中提取数据：

```
select convert(datetime, left(yourDateField, 3) + '01 20' + right(yourDateField, 2), 100)
from yourTable 
```

# c# - 重建 ASMX Web 服务时出错

> ID：12562814
> 
> 赞同：0
> 
> 时间：2012-09-24T10:06:19.480
> 
> 标签：c#, asp.net, web-services, asmx

我正在尝试发布我的 Web 服务，我已经将 .asmx 文件的构建操作属性更改为“编译”，并将 Web.config 更改为“无”，但是当我尝试重建解决方案时仍然出现以下错误：

```
Error   1   Keyword, identifier, or string expected after verbatim specifier: @ \MyVirtualCartWS\MyVirtualCartWS.asmx

Error   2   A namespace cannot directly contain members such as fields or methods   \MyVirtualCartWS\MyVirtualCartWS.asmx 
```

两个错误都指向 .asmx 文件，所以它是：

```
<%@ WebService Language="C#" CodeBehind="MyVirtualCartWS.asmx.cs" Class="MyVirtualCartWS.MyVirtualCartWS" %> 
```

背后的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Collections;

namespace MyVirtualCartWS
{
    /// <summary>
    /// Summary description MyVirtualCartWS
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class MyVirtualCartWS : System.Web.Services.WebService
    {

        #region Using LoggedUser

        [WebMethod]
        public LoggedUser AddUser(string _login, string _email, string _password)
        {
            LoggedUser lUser = new LoggedUser();
            lUser.AddUser(_login, _email, _password);
            return lUser;
        }

        [WebMethod]
        public LoggedUser LogIn(string _login, string _password)
        {
            LoggedUser lUser = new LoggedUser();
            lUser.LogIn(_login, _password);
            return lUser;
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-08T11:52:36.927

该行：

```
[System.Web.Script.Services.ScriptService] 
```

应该先取消注释。

# vb.net - Linq：按时间间隔分组

> ID：12562834
> 
> 赞同：3
> 
> 时间：2012-09-24T10:07:19.993
> 
> 标签：vb.net, linq, time, intervals, linq-group

我有以下数据表：

```
[Date];[Time];[ProcessID];[ID]
24.09.2012;08:18:00;4000;1
24.09.2012;08:18:00;4000;2
24.09.2012;08:19:00;4001;3
24.09.2012;08:23:00;4002;4
24.09.2012;08:32:00;4003;5
... 
```

结果，我希望按 15 分钟的时间间隔进行分组来计算 ProcessID：

```
[Interval];[ProcessID Count]
8:15:00 - 8:29:00;3
8:30:00 - 8:45:00;1 
```

如何实现这个目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:30:34.287

这是针对 Linq-to-SQL（在 SQL Server 上）的解决方案，其中 DateTime 在单个字段中（LINQpad 查询）：

```
Const BaseDate As Date = #9/24/2012#
Const PeriodMinutes As Integer = 15
Dim p = From t In TestData _
      Group By q=CInt(Math.Floor((t.SomeDate - BaseDate).TotalMinutes/PeriodMinutes)) Into Group _
      Select s=BaseDate.AddMinutes(q*PeriodMinutes), _
             e=BaseDate.AddMinutes((q+1)*PeriodMinutes), _
             ids=Aggregate g In Group Select g.ProcessID Distinct Into Count()
p.Dump 
```

使用不同的类型和其他“小”调整可以产生更简单的 SQL 后端代码。

对于您的实际数据库，您需要调整`Group By`，尽管它现在取决于您的 Time 列通过 Linq-to-SQL 和/或您的数据库驱动程序转换为什么。

因为它是这样`TimeSpan`的`Group By`：

```
 Group By d=t.[Date], q=CInt(Math.Floor(t.[Time].TotalMinutes/PeriodMinutes)) Into Group _
    Select s=d.AddMinutes(q*PeriodMinutes), _
           e=d.AddMinutes((q+1)*PeriodMinutes), _
           ids=Aggregate g In Group Select g.ProcessID Distinct Into Count() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:43:11.520

这应该有效（~~但是，未经测试~~）：

```
Dim groupedByQuarter =
    From r In table
    Let day = r.Field(Of Date)("Date").Date
    Let time = r.Field(Of TimeSpan)("Time")
    Let quarter = time.Add(TimeSpan.FromMinutes((-1) * time.Minutes Mod 15))
    Group r By Key = New With {Key .day = day, Key .quarter = quarter} Into TimeGroup = Group
    Select New With {
        .Interval = String.Format("{0} - {1}",
                Key.quarter,
                Key.quarter.Add(TimeSpan.FromMinutes(14))),
        .ProcessCount = TimeGroup.Select(Function(r) r.Field(Of Int32)("ProcessID")).Distinct().Count()
    } 
```

# android - 以编程方式通过应用程序处理 Activity 堆栈

> ID：12562841
> 
> 赞同：1
> 
> 时间：2012-09-24T10:07:51.897
> 
> 标签：android, android-activity, activity-stack

我的应用程序 A-->B-->C-->D 中有四个活动。

我写了一个我自己的类**MyActivity**，它扩展了 Activity 类。我编写这个类来处理活动堆栈。这个类有两个方法 addActivitiyTostack() 和 getActivityFromStack() 我使用堆栈来存储活动。

所有其他活动都扩展了这个类。当我使用意图从一个活动移动到另一个活动时，它会添加到堆栈中。

当我移动 backword 活动时会弹出。我可以正确地将活动添加到堆栈中，但是在弹出活动时遇到问题。

另外我在所有活动上都有Logout Button，这个按钮的OnClick 我要关闭应用程序怎么实现呢？任何人都知道如何在 Android 中处理活动堆栈。

这是我的代码。

```
package com.example.iprotect;

import java.util.Enumeration;
import java.util.Stack;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class MyActivity extends Activity {

    private static Stack<Activity> stack = new Stack<Activity>();
    static int top=0;

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        addActivityToStack(this);
    }

    public static void addActivityToStack(MyActivity myActivity) {
        // TODO Auto-generated method stub
        stack.push(myActivity);
        for (int i =0; i< stack.size() ; i++) {
            Activity act=stack.get(i);
            Log.i("Element in stack", ""+act);
        }
    }

    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        //getActivityFromStack();
        //logoutFromApplication();

    }

    public static void logoutFromApplication() {
        // TODO Auto-generated method stub
        Enumeration<Activity> enm=stack.elements();

        while(enm.hasMoreElements())
        {
            Activity act=enm.nextElement();
            stack.pop();
        }

    }

    public static Activity getActivityFromStack() {
        return stack.pop();
    }

} 
```

一个-->

```
public class WebServiceActivity extends MyActivity{

    EditText editText1, editText2;
    Button button;
    String response = "";
    String email, password;

    public final Pattern EMAIL_ADDRESS_PATTERN = Pattern
            .compile(".+@.+\\.[a-z]+");

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final EditText editText1 = (EditText) findViewById(R.id.etEmail);
        final EditText editText2 = (EditText) findViewById(R.id.etPassword);

        button = (Button) findViewById(R.id.loginButton);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (TextUtils.isEmpty(editText1.getText().toString())) {
                    Toast.makeText(getApplicationContext(),
                            "please enter email id", Toast.LENGTH_SHORT).show();
                } else if (TextUtils.isEmpty(editText2.getText().toString())) {

                    Toast.makeText(getApplicationContext(),
                            "please enter passwod", Toast.LENGTH_SHORT).show();
                } else {
                    Boolean bool = EMAIL_ADDRESS_PATTERN.matcher(
                            editText1.getText().toString()).matches();
                    if (bool == true) {

                    } else {
                        Toast.makeText(getApplicationContext(),
                                "Invalid email id", Toast.LENGTH_SHORT).show();
                    }

                    email = editText1.getText().toString();
                    password = editText2.getText().toString();
                    // final ProgressDialog pd = ProgressDialog.show(
                    // WebServiceActivity.this, "Calling webservice...",

                    // "Please wait...", true, false);

                    final ProgressBar bar = (ProgressBar) findViewById(R.id.progressBar2);
                    bar.setVisibility(View.VISIBLE);

                    new AsyncTask<Void, Void, Void>() {
                        String r;

                        protected void onPreExecute() {
                        };

                        @Override
                        protected Void doInBackground(Void... params) {
                            r = invokeWebService();

                            return null;
                        };

                        protected void onPostExecute(Void result) {
                            bar.setVisibility(View.VISIBLE);

                        };

                    }.execute();

                }
            }

            private String invokeWebService() {
                String response = "";
                try {
                    WebService webService = new WebService(
                            "http://sphinx-solution.com/iProtect/api.php?");
                    Map<String, String> params = new HashMap<String, String>();
                    params.put("action", "auth");
                    params.put("email", email);
                    params.put("password", password);
                    response = webService.WebGet("auth", params);

                    JSONObject jsonObject = new JSONObject(response);
                    String rr = jsonObject.optString("status");

                    if (TextUtils.equals(rr, "success")) {
                        Log.e("MSG", "status==success");
                        Intent intent = new Intent(WebServiceActivity.this,
                                SecondActivity.class);
                        //MyActivity.addActivityToStack(WebServiceActivity.this);
                        intent.putExtra("email", email);
                        intent.putExtra("password", password);
                        WebServiceActivity.this.startActivity(intent);
                        finish();

                    } else {
                        Log.e("MSG", "status ==failed");

                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }
                return response;
            }
        });
    }
} 
```

乙-->

```
public class SecondActivity extends MyActivity {

    ListView listView;
    String email1, password1;
    ArrayList<JSONStructure> arrayList = new ArrayList<JSONStructure>();
    String r;
    String r1;
    String tablename;
    String rows;
    JSONObject jsonObject;
    String tablename2;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.second_layout);

        Intent intent = getIntent();
        email1 = intent.getExtras().getString("email");
        password1 = intent.getExtras().getString("password");

        Button btn1 = (Button) findViewById(R.id.refreshbutton);
        btn1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                final ProgressDialog pd = ProgressDialog.show(
                        SecondActivity.this, "Refresh List...",
                        "Please wait...", true, false);

                new AsyncTask<Void, Void, Void>() {

                    @Override
                    protected Void doInBackground(Void... params) {
                        pd.dismiss();
                        r = invokeWebService();
                        return null;
                    }

                    protected void onPostExecute(Void result) {
                    };

                }.execute();

            }
        });

        Button btn = (Button) findViewById(R.id.logoutbutton);

        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                final ProgressDialog pd = ProgressDialog.show(
                        SecondActivity.this, "Calling webservice...",
                        "Please wait...", true, false);

                new AsyncTask<Void, Void, Void>() {

                    @Override
                    protected Void doInBackground(Void... params) {
                        pd.dismiss();
                        return null;
                    }

                    @Override
                    protected void onPostExecute(Void result) {
                        Intent intent = new Intent(SecondActivity.this,
                                WebServiceActivity.class);
                        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        SecondActivity.this.startActivity(intent);

                    }

                }.execute();

            }

        });

        listView = (ListView) findViewById(R.id.listview1);

        listView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view,
                    int position, long id) {

                JSONStructure jsonstructure = (JSONStructure) listView
                        .getAdapter().getItem(position);

                final String tablename1 = jsonstructure.getTableName()
                        .toString();

                Intent intent = new Intent(SecondActivity.this,
                        ProgressBarActivity.class);
                //MyActivity.addActivityToStack(SecondActivity.this);

                intent.putExtra("tablename", tablename1);
                intent.putExtra("Rows", rows);
                intent.putExtra("email", email1);
                intent.putExtra("password", password1);

                SecondActivity.this.startActivity(intent);

            }

        });

        new AsyncTask<Void, Void, Void>() {

            @Override
            protected void onPreExecute() {

                super.onPreExecute();
            }

            @Override
            protected Void doInBackground(Void... params) {
                r = invokeWebService();

                try {
                    JSONArray jsonArray = new JSONArray();
                    JSONObject jsonObject = new JSONObject(r);
                    jsonArray = jsonObject.getJSONArray("Records");

                    for (int i = 0; i < jsonArray.length(); i++) {
                        JSONObject c = jsonArray.getJSONObject(i);
                        tablename = c.optString("TABLE NAME");
                        rows = c.optString("Rows");
                        JSONStructure jsonStructure = new JSONStructure();
                        jsonStructure.setTableName(tablename);
                        jsonStructure.setRows(rows);
                        arrayList.add(jsonStructure);
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }

                return null;

            }

            @Override
            protected void onPostExecute(Void result) {
                if (arrayList != null && arrayList.size() > 0) {

                    MyAdapter adapter = new MyAdapter(SecondActivity.this,
                            arrayList);
                    listView.setAdapter(adapter);
                }
            }

        }.execute();

    }

    private String invokeWebService() {
        String response = "";
        try {
            WebService webService = new WebService(
                    "http://sphinx-solution.com/iProtect/api.php?");
            Map<String, String> params = new HashMap<String, String>();
            params.put("action", "getTables");
            params.put("email", email1);
            params.put("password", password1);
            response = webService.WebGet("getTables", params);

        } catch (Exception e) {
            e.printStackTrace();
        }
        return response;
    }

} 
```

C-->

```
public class ThirdActivity extends MyActivity {
    String tablename1, row1, json1;
    ArrayList<JSONStructure> arrayList = new ArrayList<JSONStructure>();

    JSONArray jsonArray, jsonArray2;
    JSONObject jsonObject;
    String row;
    String email1, password1;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.third_layout);

        ListView listView = (ListView) findViewById(R.id.listview2);

        TextView textView = (TextView) findViewById(R.id.title_textview);

        Intent intent = getIntent();
        tablename1 = intent.getExtras().getString("tablename");
        row = intent.getExtras().getString("Rows");
        textView.setText(tablename1);
        json1 = intent.getExtras().getString("Json");
        email1 = intent.getExtras().getString("email");
        password1 = intent.getExtras().getString("password");

        new AsyncTask<Void, Void, Void>() {

            @Override
            protected Void doInBackground(Void... params) {

                return null;
            }

            @Override
            protected void onPostExecute(Void result) {

                Button button = (Button) findViewById(R.id.goback);
                button.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        Intent intent = new Intent(ThirdActivity.this,
                                SecondActivity.class);
                        MyActivity.getActivityFromStack();
                        intent.putExtra("email", email1);
                        intent.putExtra("password", password1);
                        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        ThirdActivity.this.startActivity(intent);

                    }
                });

            }

        }.execute();

        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> adapterView, View view,
                    final int position, long id) {
                final ProgressDialog pd = ProgressDialog.show(
                        ThirdActivity.this, "Calling webservice...",
                        "Please wait...", true, false);

                new AsyncTask<Void, Void, Void>() {

                    @Override
                    protected Void doInBackground(Void... paramArrayOfParams) {

                        pd.dismiss();

                        try {

                            jsonObject = new JSONObject(json1);

                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        return null;
                    }

                    @Override
                    protected void onPostExecute(Void result) {
                        Intent intent = new Intent(ThirdActivity.this,
                                FinalActivity.class);
                        //MyActivity.addActivityToStack(ThirdActivity.this);
                        intent.putExtra("tablename", tablename1);
                        intent.putExtra("Json", jsonObject.toString());
                        intent.putExtra("Row", position);
                        intent.putExtra("email", email1);
                        intent.putExtra("password", password1);
                        ThirdActivity.this.startActivity(intent);

                    }

                }.execute();

            }

        });

        try {

            JSONObject jsonObject = new JSONObject(json1);
            JSONArray jsonArray = new JSONArray();
            jsonArray = jsonObject.getJSONArray("FirstThree");
            jsonArray2 = jsonObject.getJSONArray("Color");

            for (int i = 0; i < jsonArray.length(); i++) {

                JSONObject c = jsonArray.getJSONObject(i);
                String one = c.optString("One");
                String two = c.optString("Two");
                String three = c.optString("Three");

                JSONObject c1 = jsonArray2.getJSONObject(i);

                String color = c1.optString("color");

                JSONStructure jsonStructure = new JSONStructure();
                jsonStructure.column1 = one;
                jsonStructure.column2 = two;
                jsonStructure.column3 = three;
                jsonStructure.setColumn1(one);
                jsonStructure.setColumn2(two);
                jsonStructure.setColumn3(three);
                jsonStructure.setColor(color);

                arrayList.add(jsonStructure);
                Log.e("one", c.optString("One"));
                Log.e("two", c.optString("Two"));
                Log.e("three", c.optString("Three"));
                Log.e("color", c1.optString("color"));

            }

        } catch (Exception e) {
            e.printStackTrace();

        }

        if (arrayList != null && arrayList.size() > 0) {

            MyAdapter1 adapter1 = new MyAdapter1(ThirdActivity.this, arrayList);
            listView.setAdapter(adapter1);

        }

        Button btn = (Button) findViewById(R.id.logoutbutton);

        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                final ProgressDialog pd = ProgressDialog.show(
                        ThirdActivity.this, "Calling webservice...",
                        "Please wait...", true, false);

                new AsyncTask<Void, Void, Void>() {

                    @Override
                    protected Void doInBackground(Void... params) {
                        pd.dismiss();
                        return null;
                    }

                    @Override
                    protected void onPostExecute(Void result) {
                        Intent intent = new Intent(ThirdActivity.this,
                                WebServiceActivity.class);
                        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        ThirdActivity.this.startActivity(intent);
                        super.onPostExecute(result);
                    }

                }.execute();

            }

        });

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:48:42.177

假设您仅需要此堆栈用于注销功能，则有更好的方法。请改用广播。在 MyActivity.onCreate 中注册一个 BroadcastReceiver。接收者应该只调用活动的finish()。从按钮的单击侦听器发送广播（btn1？那个按钮有什么作用？无法从名称中猜测；需要更好的名称；））。就是这样。

# javascript - $.param() 生成的查询字符串包含数组的方括号

> ID：12562842
> 
> 赞同：2
> 
> 时间：2012-09-24T10:07:51.710
> 
> 标签：javascript, jquery

我有一个这样的对象：

```
var queryObject= {
      name: 'Shwetanka',
      subjects: ['Mathematics', 'Physics', 'Computers'],
      stream: 'science'
    }; 
```

当我使用它创建查询字符串时，`$.param(queryObject)`我将其作为查询字符串：

```
name=Shwetanka&subjects%5B%5D=Mathematics&subjects%5B%5D=Physics&subjects%5B%5D=Computers&stream=science 
```

预期的：`name=Shwetanka&subjects=Mathematics&subjects=Physics&subjects=Computers&stream=science`

如何避免`[]`在查询字符串中为同名参数添加方法。在后端，我使用[struts2](http://struts.apache.org/2.x/)来读取参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:19:33.363

我找到了解决方案。我只需要在`$.param(queryObject, true)`. 这会生成我想要的查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:23:53.577

当我们在表单中有同名的字段并通过 提交时`GET/POST`，它必然会作为同名的参数数组发送。服务器会期望这样的值。所以，即使你以某种方式删除它`[]`，它也不再是一个数组，服务器只会得到一个值。设计 jQuery param 方法时，考虑到了同样的事情。查看[http://api.jquery.com/jQuery.param/](http://api.jquery.com/jQuery.param/)中的示例。

# python - 实现FTP接口/协议

> ID：12562844
> 
> 赞同：1
> 
> 时间：2012-09-24T10:07:55.293
> 
> 标签：python, ftp, ftp-server

我被要求使用 python 设置一个 FTP 服务器，不同的用户可以登录，并且根据他们的登录将显示不同的文件结构。

结构的一部分是只读的，另一部分是写、读、创建和删除。

服务器上不存在文件结构和文件，当用户通过查询外部服务器扩展文件夹时，必须以惰性方式构建。

我想，服务器需要从外部模仿 FTP 接口/协议，但在内部的工作方式完全不同。

我想知道这项工作有多大或有多大难度，因为我需要提供某种时间尺度来完成这项工作。

那里已经有这样的东西了吗？有没有人做过类似的事情？

尝试实施这种模型有什么明显的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T10:13:15.793

该[`twisted`项目](http://twistedmatrix.com/trac/)将是显而易见的起点；以下示例启动一个简单的 FTP 服务器，该服务器根据密码文件对用户进行身份验证，但也允许匿名访问

```
from twisted.protocols.ftp import FTPFactory, FTPRealm
from twisted.cred.portal import Portal
from twisted.cred.checkers import AllowAnonymousAccess, FilePasswordDB
from twisted.internet import reactor

p = Portal(FTPRealm('./'),
           [AllowAnonymousAccess(), FilePasswordDB("pass.dat")])
f = FTPFactory(p)

reactor.listenTCP(21, f)
reactor.run() 
```

您可以从那里轻松扩展。如何实现“文件”和“目录”完全取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:12:10.833

为什么是蟒蛇？我的意思是python与它有什么关系？我会寻找一些 PAM 模块，能够在登录时创建用户特定的虚拟文件系统结构，如果没有现成的，考虑修改一些 pam_mount，类似的东西..

[http://pam-mount.sourceforge.net](http://pam-mount.sourceforge.net)

# objective-c - 如何在 ibook 应用程序中创建书架类型

> ID：12562846
> 
> 赞同：-2
> 
> 时间：2012-09-24T10:08:09.607
> 
> 标签：objective-c, ios, xcode, ipad, uitableview

我想创建一个类似于 ibook 应用程序的书架，我将一些书或 pdf 放在书架上，然后单击应该启动的书或 pdf。所以任何人都可以告诉我如何实现或任何示例代码可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:26:38.723

All you need is custom interface. Main container is a scrollView, it will contain repeatable pattern of your bookshelf. Then you need to put some UIView in proper coordinates, which will contain your book cover images. Other part of application is a book reader, you can use some framework, something like FastPdfKit or another.

# ibatis - 是否有任何类似于 MyBatis 中的 Criteria API 的功能，或者任何像 QueryDSL 这样的包装器来提供该功能？

> ID：12562852
> 
> 赞同：5
> 
> 时间：2012-09-24T10:08:28.580
> 
> 标签：ibatis, criteria-api, mybatis, querydsl

在`JPA/Hibernate`中，我们可以编写类型安全的查询并一次一步累积我们的查询谓词。我相信在 中没有等价物`MyBatis`，但是否有任何抽象框架（如`QueryDSL`）提供上面的层`MyBatis`，使我们能够编写类似条件的查询。我想要条件 API 的基本原因是我需要构造一个查询，每个查询的谓词都来自一个单独的逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T11:18:51.133

MyBatis Generator 对我来说似乎没有维护。在构建过程中还需要从现有数据库生成类非常麻烦。

MyBatis [SQL Builder Class](http://mybatis.github.io/mybatis-3/statement-builders.html)不是更好的解决方案吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:54:59.330

您可以将 MBG（[MyBatis 生成器](http://www.mybatis.org/generator/)）与[示例类](http://www.mybatis.org/generator/generatedobjects/exampleClassUsage.html)一起使用。

尽管我怀疑示例类是否与 Hibernate 的 Criteria Queries 一样强大，但它们应该很适合您构建查询的任务。

# backbone.js - Backbone.js 获取未知错误

> ID：12562853
> 
> 赞同：0
> 
> 时间：2012-09-24T10:08:37.647
> 
> 标签：backbone.js

我的主干.js 应用程序遇到问题：我正在尝试从 JSON Web 服务获取数据，GET HTTP 请求成功（我查看了 chrome 的开发人员控制台）但主干获取触发了一个错误并且不更新模型。

您可以在这里查看代码： [https ://github.com/tdurand/faq-app-client-mobile](https://github.com/tdurand/faq-app-client-mobile)

您可以运行该应用程序并尝试在此处调试：http: [//tdurand.github.com/faq-app-client-mobile/](http://tdurand.github.com/faq-app-client-mobile/)

JSON Feed 是这样的

```
[
    {
       "title":"Probleme ou Bug",
       "desc":"Pour les problemes ou les bugs rencontrés",
       "entries":[
           {
             "title":"testdqs",
             "desc":"testqsdqs"
           }
        ]
    }
] 
```

我的收藏模型是：

```
var Categories = Backbone.Collection.extend({

url:"http://cryptic-eyrie-7716.herokuapp.com/faq/fr",

model:Category,

parse:function(response) {
    console.log("test")
    console.log(response);
    return response;
},

sync: function(method, model, options) {
    var params = _.extend({
        type: 'GET',
        dataType: 'jsonp',
        url: model.url,
        processData:false
    }, options);

    return $.ajax(params);
}, 
```

});

而我的观点：

```
var IndexView = Backbone.View.extend({

el: '#index',

initialize:function() {
    Categories.fetch({
        success: function(m,r){
          console.log("success");
          console.log(r); // => 2 (collection have been populated)
        },
        error: function(m,r) {
          console.log("error");
          console.log(r.responseText);
        }
    });
    Categories.on( 'all', this.render, this );
},

//render the content into div of view
render: function(){
  //this.el is the root element of Backbone.View. By default, it is a div.
  //$el is cached jQuery object for the view's element.
  //append the compiled template into view div container
  this.$el.html(_.template(indexViewTemplate,{categories:Categories}));
  //Trigger jquerymobile rendering
  $("#index").trigger('pagecreate');

  //return to enable chained calls
  return this;
}
});
return IndexView; 
```

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:26:36.543

我发现了我的错误。

我的后端服务器（带有 play！框架）没有正确呈现 JSONP

如果有人有同样的问题，这是我现在用来做的代码。

```
 //Render JSONP
    if (request.params._contains("callback")) {

        Gson gson = new Gson();

        String out = gson.toJson(categoryJSON(categories,lang));

        renderText(request.params.get("callback") + "(" + out + ")");

     } else {

        renderJSON(categoryJSON(categories,lang));

     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:52:22.790

据我所知，您没有在任何地方创建您的集合的实例。Javascript 并不是真正面向对象的，它具有这种奇怪的函数作为类和`prototype`继承类型的交易，这可能会使来自 OO 世界的任何人感到困惑。

```
var Categories = Backbone.Collection.extend... 
```

上面发生的事情是您使用您定义的对象（或字典）扩展了 Backbone`Collection`的（这是一个函数）原型属性。为了能够将此“类”实例化为对象，您需要使用`new`关键字。你不这样做，所以你调用了`fetch`'class'的函数`Categories`，这会产生意想不到的结果。

因此，在获取之前实例化您的集合：

```
initialize:function() {
    this.collection = new Categories(); // instantiate the collection

    // also set event handlers before producing events
    this.collection.on( 'all', this.render, this );

    this.collection.fetch({
        success: function(m,r){
          console.log("success");
          console.log(r); // => 2 (collection have been populated)
        },
        error: function(m,r) {
          console.log("error");
          console.log(r.responseText);
        }
    });
} 
```

希望这可以帮助！

# ajax - 带有 OnComplete 的 Ajax.BeginForm 总是更新页面

> ID：12562857
> 
> 赞同：12
> 
> 时间：2012-09-24T10:08:52.363
> 
> 标签：ajax, asp.net-mvc, events, ajaxform

我在 MVC 中有简单的 ajax 形式。在 AjaxOptions 中有 OnComplete 设置为简单的 javascript 函数，它做一件事 - 返回 false。

```
@using (Ajax.BeginForm("Action", "Controller", new AjaxOptions { UpdateTargetId = "DivFormId", HttpMethod = "Post", OnComplete = "preventUpdate" }))

function preventUpdate(xhr) {
    return false;       
} 
```

问题是，该页面已经更新。例如，在一种情况下，控制器在回发后返回部分视图，在另一种情况下，它返回一些 Json 对象。我希望它在返回部分视图时更新页面，并在返回 json 时显示对话框窗口。不幸的是，当返回 json 时，即使 OnComplete 函数返回 false，它也会清除页面（使用 json 更新），如 MSDN 所说：要取消页面更新，请从 JavaScript 函数返回 false。

如何根据收到的响应防止页面更新？

谢谢！

- - - 更新 - - - -

到目前为止，我找到了以下解决方案。当我没有指定 UpdateTargetId 时，我可以手动处理我想要的响应。但它仍然没有记录返回 false 的行为。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T07:37:50.617

使用`OnSuccess`和摆脱`UpdateTargetId`. 像这样：

```
@using (Ajax.BeginForm("Action", "Controller", new AjaxOptions { HttpMethod = "Post", OnSuccess = "foo" }))
{
    ...
} 
```

接着：

```
function foo(result) {
    if (result.SomePropertyThatExistsInYourJsonObject) {
        // the server returned a JSON object => show the dialog window here
    } else {
        // the server returned a partial view => update the DOM:
        $('#DivFormId').html(result);
    }
} 
```

# php - ZF2中ZendServiceManager和ZendDI的关系

> ID：12562858
> 
> 赞同：1
> 
> 时间：2012-09-24T10:08:55.973
> 
> 标签：php, zend-framework2

我试图了解 Zend\Di（我的意思是依赖注入容器，而不是依赖注入本身）与 ServiceManager 的关系。可调用对象、工厂、别名和服务与容器无关，对吗？

我能找到的唯一关系是 DiAbstractServiceFactory，它默认注册在 MVC 中。它使用 DiC 来搜索类。

这个对吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:54:55.687

我会说你的评估是正确的——如果你想使用 DI 容器，它就在那里，但与工厂、别名和服务无关。

在添加 ServiceManager 之前，DI 容器的使用更加频繁。在添加 ServiceManager 时创建了一个有趣的线程 - [http://zend-framework-community.634137.n4.nabble.com/Services-Instances-Dependencies-in-ZF2-td4584632.html](http://zend-framework-community.634137.n4.nabble.com/Services-Instances-Dependencies-in-ZF2-td4584632.html)

# signalr - SignalR 作为 WCF Web 套接字服务

> ID：12562859
> 
> 赞同：3
> 
> 时间：2012-09-24T10:08:59.137
> 
> 标签：signalr

是否可以将 SignalR 作为 WCF websocket 服务的一部分而不是 ASP.net 网站的一部分托管。我知道将消息从 Web 服务推送到 signalR 客户端，但是当从浏览器打开套接字连接时，它是否也可能映射到 Web 服务合同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T13:48:50.000

您可以自托管 SignalR 服务器：

取自（[https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)）：

入门 要开始，请安装以下软件包：

```
Install-Package Microsoft.Owin.Hosting -pre
Install-Package Microsoft.Owin.Host.HttpListener -pre
Install-Package Microsoft.AspNet.SignalR.Owin -pre

using System;
using Microsoft.AspNet.SignalR;
using Microsoft.Owin.Hosting;
using Owin;

namespace SignalR.Hosting.Self.Samples
{
class Program
{
    static void Main(string[] args)
    {
        string url = "http://172.0.0.01:8080";

        using (WebApplication.Start<Startup>(url))
        {
            Console.WriteLine("Server running on {0}", url);
            Console.ReadLine();
        }
    }
}

class Startup
{
    public void Configuration(IAppBuilder app)
    {
        // This will map out to http://localhost:8080/signalr by default
        // This means a difference in the client connection.

        app.MapHubs();
    }
}

public class MyHub : Hub
{
    public void Send(string message)
    {
        Clients.All.addMessage(message);
    }
} 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:24:55.443

You can host the SignarR hub in any .Net application, like:

```
public class Program
{
public static void Main(string[] args)
{
    // Connect to the service
    var hubConnection = new HubConnection("http://localhost/mysite");

    // Create a proxy to the chat service
    var chat = hubConnection.CreateProxy("chat");

    // Print the message when it comes in
    chat.On("addMessage", message => Console.WriteLine(message));

    // Start the connection
    hubConnection.Start().Wait();

    string line = null;
    while((line = Console.ReadLine()) != null)
    {
        // Send a message to the server
        chat.Invoke("Send", line).Wait();
    }
}
} 
```

Ref: [https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)

If there any specific reason you want to use WCF? you can write your service as SignarR hub only.

# git - 如何获取以前版本的 sha hash，git

> ID：12562862
> 
> 赞同：1
> 
> 时间：2012-09-24T10:09:04.583
> 
> 标签：git, revert

我从 Git 存储库下载了一个开源代码。现在我想恢复到以前的版本。我怎样才能做到这一点？有这样的命令：“git revert ，但我不知道版本的哈希，比如代码的版本 264

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:14:29.010

`cd`进入 git 存储库。键入`git tag`并查看您要查找的版本是否显示。如果是这样，你很幸运。然后你可以做这样的事情（我假设你正在寻找的版本显示为`v1.2.3`）：

```
git checkout v1.2.3
autoreconf # with git repos, this is often necessary before the next step
./configure
make
sudo make install 
```

但是，如果版本没有显示`git tag`，那么您需要执行类似的操作`git log --oneline | more`并以这种方式查找相关的哈希 id。如果这给您的信息太少，请执行`git log | more`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:12:16.843

您可以使用它`gitk`来探索存储库及其历史和版本的哈希，或者用于提交消息的简单输出和提交哈希使用`git log`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T10:35:22.260

```
git rev-list --tags --max-count=2 
```

还会列出最后两个标签 SHA1。第二个将是 git checkout 工作所需的（并将 repo 的内容恢复为以前的标签）

一旦你有了那个 SHA1，a`git describe --tags xxx`就会把这个 SHA1 翻译成一个标签。

# qt - Qt - 如何将 QListView 项目转移到另一个 QListView？

> ID：12562866
> 
> 赞同：1
> 
> 时间：2012-09-24T10:09:27.867
> 
> 标签：qt, qt4.7, qlistview, model-view, qlineedit

我有一个**QLineEdit**、**两个 QPush 按钮**（添加和删除按钮）和一个**QListView**。**单击添加按钮**时，我在**QLineEdit 中输入的文本将添加**到**QListView**中。如果我**从 QListView 中选择任何一个项目**并单击**删除按钮**，则所选项目将被删除。我完成了这些事情，它工作正常。**现在我想添加另一个 QListView，如果双击 QListView 项目（QListView 1），项目应该被转移**（QListView 1 中的项目应该完全删除）**到新的 QListView（QListView 2），反之亦然。************请帮我提出你的建议。提前致谢。**********

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:50:35.843

**例子.h**

```
class Example : public QWidget
{
    Q_OBJECT

public:
    explicit Example(QWidget *parent = 0);
    ~Example();

private slots:
     void on_listView_doubleClicked(const QModelIndex &index);
     void on_listView_2_doubleClicked(const QModelIndex &index);

private:
    QStandardItemModel *model;  // This model is used when the add button is clicked.
    QStandardItemModel *listViewModel;
}; 
```

**例子.cpp**

```
void Example::on_listView_doubleClicked(const QModelIndex &index)
{  
    QStandardItem *Item1;
    Items1 = new QStandardItem();

    Items1->setData(ui->listView->currentIndex().data(), Qt::DisplayRole );
    Items1->setEditable( false );

    listViewModel->appendRow( Items1 );
    listViewModel->sort( 0, Qt::AscendingOrder );
    ui->listView_2->setModel( listViewModel );

    model->removeRow( ui->listView->currentIndex().row() );
}

void Example::on_listView_2_doubleClicked(const QModelIndex &index)
{
    QStandardItem *Items2;
    Items2 = new QStandardItem();
    Items2->setData( ui->listView_2->currentIndex().data(), Qt::DisplayRole );
    Items2->setEditable( false);

    model->appendRow( Items2 );
    model->sort( 0,Qt::AscendingOrder );

    ui->listView->setModel( model );
    model->removeRow( ui->listView_2->currentIndex().row() );

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-13T07:12:47.997

一种更可扩展的方法是创建自定义模型（可能继承`QStringListModel`满足您需求的 if），然后实施`moveRows`和/或拖放工具。******

# tcsh - tcsh 'ls_colors' 不工作

> ID：12562867
> 
> 赞同：6
> 
> 时间：2012-09-24T10:09:44.053
> 
> 标签：tcsh, ls-colors

我使用 tcsh 作为我的默认 shell。但是， LS_COLORS 环境似乎不起作用。这是我与 ls 相关的环境：

```
setenv CLICOLOR "true"
setenv LS_COLORS "di=37:fi=00" 
```

目录应该是白色的，但结果是它们是蓝色/青色。任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-12T23:03:29.280

我遇到了同样的问题。我需要使用 tcsh 和 xterm。我对 setenv CLICOLOR 也没有运气。

尝试：

```
alias ls ls --color=always 
```

来源：[ls 手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?ls)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T16:19:24.033

[网络上的这个线程](http://forums.freebsd.org/showthread.php?t=28541)可能有助于`LS_COLORS`一般的语法。

在您的特定情况下，它看起来不错。你`set color`在你的壳里吗？

# php - 无法使用谷歌 API 将对象上传到谷歌云存储

> ID：12562870
> 
> 赞同：4
> 
> 时间：2012-09-24T10:09:49.567
> 
> 标签：php, google-cloud-storage

我正在使用以下链接来使用 Google Cloud Storage：

[谷歌云](http://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/Google_StorageService.php)

我想使用上述 API 中给出的插入函数上传对象。我正在使用 PHP。我使用的代码如下：

```
$StorageService = new Google_StorageService($client);
$objects = $StorageService->objects;
$gso = new Google_StorageObject();
$gso->setName('myobj');
$postbody = array(file_get_contents('buc.jpg'));
$resp = $objects->insert('mybucket', $gso, $postbody); 
```

但我得到错误为：

致命错误： /home/www/public_html/abc/google 中的消息“错误调用 POST [https://www.googleapis.com/storage/v1beta1/b/mybucket/o](https://www.googleapis.com/storage/v1beta1/b/mybucket/o) : (400) 必需”未捕获异常“Google_ServiceException” -api-php-client/src/io/Google_REST.php 第 66 行

我在做什么错请帮帮我..

我发送参数的方式存在一些问题。请如果有人知道帮助我..

这里有一个例子：

[例子](https://developers.google.com/storage/docs/json_api/v1/objects/insert)

但那是在 Java 中请帮助我在 PHP 中做同样的事情。请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:47:01.537

我想出了答案。要使用的代码如下：

```
$objects = $StorageService->objects;
$postbody = array('data' => file_get_contents('buc.jpg'));
$gso = new Google_StorageObject();
$gso->setName('mybuc');
$resp = $objects->insert('mybucket', $gso ,$postbody);
print_r($resp); 
```

然后它起作用了..我没有在数组中设置参数“data”作为函数的第三个参数传递。我发现它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T22:33:38.863

桶共享一个全局命名空间。您必须先创建存储桶，然后才能在其中存储对象，并且“mybucket”不是可用的名称。

如果您在[https://storage.cloud.google.com/](https://storage.cloud.google.com/)访问 GCS 浏览器，您可以在那里创建您的存储桶，然后在您的 PHP 代码中引用现有存储桶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T14:06:25.857

我必须添加`uploadType`以使其正常工作，如此处所述：[https ://cloud.google.com/storage/docs/json_api/v1/objects/insert](https://cloud.google.com/storage/docs/json_api/v1/objects/insert)

```
$postbody = array('uploadType' => 'media', 'data' => file_get_contents('buc.jpg')); 
```

`data`参数记录在哪里？

# asp.net - 如何在我的 HTTPS 站点中使用 Request.UrlReferrer？

> ID：12562871
> 
> 赞同：0
> 
> 时间：2012-09-24T10:09:52.940
> 
> 标签：asp.net

我`Request.UrlReferrer`用来获取上一个链接，但它不适用于我的 HTTPS 站点。我不能使用查询字符串；有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:15:56.717

如果来自加密站点（使用 SSL fx），则无法获取 referrerUrl。推荐人标头非常不安全，可以简单地点击您的 URL 并传递他们想要的任何推荐人。

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec15.html#sec15.1.3](http://www.w3.org/Protocols/rfc2616/rfc2616-sec15.html#sec15.1.3)

> 如果引用页面是使用安全协议传输的，则客户端不应在（非安全）HTTP 请求中包含Referer 头字段。

# asp.net-mvc - 使用 WebApi 在 JqGrid 中分配 JSON 数据

> ID：12562872
> 
> 赞同：3
> 
> 时间：2012-09-24T10:09:54.380
> 
> 标签：asp.net-mvc, json, jqgrid, asp.net-web-api

我正在使用 MVC 和 Web Api 构建应用程序。在我使用 JqGrid 的视图上。以前我们曾经将本地数据分配给运行良好的 JqGrid。现在由于逻辑上的一些变化，我们使用 WebApi 从服务器获取数据，这是一个 Json 数据，我们将其存储在变量中，然后我们将此数据对象分配给 JqGrid，但数据不会显示。当我给出 web api 的“url”而不是 data 选项时，一切正常，但是一旦我们使用“data”选项，jqgrid 就不起作用。可能的原因是什么？这样做的原因是我想在本地添加、编辑、更新数据，然后当按下最终保存按钮时，数据会返回到服务器。

```
 $().ready(function () {        
    //{"total":1,"page":1,"records":3,"rows":[{"id":"1","cell":["1","Tomato        
    //Soup","db@db.com","db@db.com","Groceries"]},{"id":"2","cell":["2","Yo-
    //yo","db@db.com","db@db.com","Toys"]},{"id":"3","cell":
    //["3","Hammer","db@db.com","db@db.com","Hardware"]}]}
    //   

    $.getJSON("api/userwebapi/",
         function (data) {
             //userDataFromApi = jQuery.parseJSON(data);
             userDataFromApi =data;
             //alert(userDataFromApi[0].ID);
             ConfigureUserGrid(userDataFromApi);
         });

});

function ConfigureUserGrid(userDataFromApi) {

    var grdUsers = $("#grdUsers");
    var lastsel = 0;
    $("#grdUsers").jqGrid({            
        datatype: "json"
        , data: userDataFromApi
        //, url: "api/userwebapi"
        ,colNames: ['ID', 'Name', 'User Role', 'Email', 'Address']
        ,colModel: [
            { name: 'ID', index: 'ID', width: 80, hidden: true }
        , { name: 'Name', index: 'Name', width: 150 }
        , { name: 'UserRole', index: 'UserRole', width: 150 }
        , { name: 'Email', index: 'Email', width: 200, sortable: true }
        , { name: 'Address', index: 'Address', width: 200, sortable: true }]            
        , viewrecords: true            
        , pager: '#pager1'
        , mtype: 'GET'
    ,rowNum:true
    ,caption: 'My first grid'
    });                            //close of jQuery("#grdUsers").jqGrid({

    $("#grdUsers").jqGrid('navGrid', '#pager1',
            { add: false, del: false, edit: false, search: false, refresh: false });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:05:26.493

问题的原因是 jqGrid 参数（选项）的错误使用。确切地说，您使用**了错误的 jqGrid 选项组合**。Tony Tomov（jqGrid 的开发者）在每个新版本中都在 jqGrid 中添加了许多特性。如果可能的话，他想保持向后兼容性。结果有很多选项没有明确的名称转换。许多选项只有在设置了一些其他选项时才有效。就像 jQuery 或 jQuery UI 一样，*没有输入参数的验证*。开始使用 jqGrid 的人会遇到很多问题。

您的问题是`data`参数与`datatype: "json"`. 这是错误的参数组合。问题是 jqGrid 支持两种远程数据类型和一些本地数据类型。

如果您使用`datatype: "json"`或`datatype: "xml"`然后 jqGrid 为您获取 AJAX 请求，用于初始填充网格以及每次排序、分页和（可选）过滤。以任何方式`url`发送请求。`mtype`一种使用由参数指定的 HTTP 命令。数据的分页和排序必须*在服务器端*实现。请求中包含请求的页码、页面长度、用于排序的列索引和排序方向。从服务器返回的数据应采用[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)描述的格式。如果您有非标准数据格式，您可以使用`jsonReader`jqGrid 和`jsonmap`( `xmlmap`) in选项`colModel`来指定应如何使用服务器响应来填充网格。

如果您不想实现服务器端分页、数据排序和过滤，您可以使用`loadonce: true`option. 在这种情况下，服务器应该*一次返回所有数据*。应根据初始排序列（基于您使用的列）`sortname`对数据进行一次排序。`sortorder`jqGrid 将在第一次加载数据后`datatype`自动更改为。`"local"`

所有其他数据类型将被解释为**本地**数据类型。该`data`参数仅在 的情况下使用`datatype: "local"`。在这种情况下，应该使用*另一种格式的数据*。可以使用`localReader`（参见[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#array_data)`data`）更改从参数中读取数据的方式。

在某些特殊情况下`datatype: "jsonstring"`，您可以使用接近的方式填充网格`datatype: "json"`，但使用对象或 JSON 字符串作为输入。在这种情况下，应该使用`datastr`（不是`data`！！！）作为数据的输入。在第一次填充后`datatype`，jqGrid 将其从 更改`datatype: "jsonstring"`为`datatype: "local"`。

所以你有一些选择来解决这个问题：

*   如果您不想实现数据分页，请使用`url`和选项。`loadonce: true`
*   使用`datatype: "jsonstring"`and`datastr`而不是`data`.
*   使用`datatype: "local"`并`data`填充为命名项的数组（项的属性应`name`与列的属性值相同）。

# android - 如何检测我周围的无线信号？

> ID：12562873
> 
> 赞同：0
> 
> 时间：2012-09-24T10:09:54.100
> 
> 标签：android, signals, wireless

有没有办法使用 Android 手机检测任何类型的无线信号并识别它？或者信号必须是某种预定义的信号，如 Wi-fi？或被隐藏摄像头等间谍设备使用。我希望 android 设备充当 spy finder 设备

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:26:50.770

This depends on what sensors, hardware & drivers your phone has. Android can only use the hardware existing on your phone.

# javascript - 覆盖jquery onclick事件？

> ID：12562874
> 
> 赞同：-1
> 
> 时间：2012-09-24T10:09:58.013
> 
> 标签：javascript, jquery, asp.net

我在 ASP.NET 中有一个按钮，它呈现为 HTML，如下所示：

```
<input id="btn" type="submit" value="clickme"> 
```

如果我再添加jquery：

```
$('#btn').click(function(){return false;}); 
```

每次单击按钮时，什么都不会发生（即没有回发）。这可以。

Javascript中有什么方法可以以编程方式调用点击（这将导致回发），同时也忽略jquery-attached，`return false`函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:20:15.047

您可以让事件处理程序接受其他参数。触发处理程序时，[`.trigger`](http://api.jquery.com/trigger/)您可以为这些参数指定值，这将使处理程序相应地修改其行为。

例如：

```
$("#btn").click(function(event, submitForm) {
    submitForm = submitForm || false;
    if (!submitForm) return false;
});

// This will not submit the form
$("#btn").trigger("click");

// But this will
$("#btn").trigger("click", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:14:09.693

默认情况下，按钮本身除了提交表单之外什么都不做，所以试试这个：

```
$('#btn').closest('form').submit(); 
```

# android - Android 蓝牙示例

> ID：12562875
> 
> 赞同：57
> 
> 时间：2012-09-24T10:10:06.050
> 
> 标签：android, bluetooth

谁能给我Android`Bluetooth`通信教程链接或提示？请不要告诉我参考BluetoothChat的例子，我只能了解如何发现和连接设备，但不知道如何通过蓝牙发送和接收数据。

我实际上正在开发一个 Android 和嵌入式`Bluetooth`设备项目。请帮帮我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-12T07:03:56.703

我也使用了以下链接，因为其他人建议您进行蓝牙通信。

[http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

事情就是你所需要的只是一堂课`BluetoothChatService.java`

这个类有以下线程：

1.  接受
2.  连接
3.  连接的

现在，当您调用 BluetoothChatService 的启动函数时，例如：

```
mChatService.start(); 
```

它开始接受线程，这意味着它将开始寻找连接。

现在当你打电话

```
mChatService.connect(<deviceObject>,false/true); 
```

这里第一个参数是设备对象，您可以从配对设备列表中获取，或者当您扫描设备时，您将获得范围内的所有设备，您可以将该对象传递给此函数，第二个参数是用于建立安全或不安全连接的布尔值。

`connect`函数将开始连接线程，该线程将查找任何正在运行接受线程的设备。

当找到这样的设备时，接受线程和连接线程都会调用 BluetoothChatService 中的连接函数：

```
connected(mmSocket, mmDevice, mSocketType); 
```

此方法在两个设备中启动连接线程：使用此套接字对象连接线程获取到另一个设备的输入和输出流。并在 while 循环中调用`read`inputstream 上的函数，以便它始终尝试从其他设备读取，以便每当其他设备发送消息时，此读取函数都会返回该消息。

BluetoothChatService 也有一个`write`方法，它`byte[]`作为输入并在连接的线程上调用 write 方法。

```
mChatService.write("your message".getByte()); 
```

连接线程中的 write 方法只是将此字节数据写入另一个设备的输出流。

```
public void write(byte[] buffer) {
   try {
       mmOutStream.write(buffer);
    // Share the sent message back to the UI Activity
    // mHandler.obtainMessage(
    // BluetoothGameSetupActivity.MESSAGE_WRITE, -1, -1,
    // buffer).sendToTarget();
    } catch (IOException e) {
    Log.e(TAG, "Exception during write", e);
     }
} 
```

现在要在两台设备之间进行通信，只需调用 mChatService 上的 write 函数并处理您将在另一台设备上收到的消息。

# macos - Mac App Store 应用程序加载器异常

> ID：12562879
> 
> 赞同：1
> 
> 时间：2012-09-24T10:10:22.410
> 
> 标签：macos, cocoa, application-loader

我正在尝试将我的 pkg 文件发送给 Apple，但它说：

> “执行时出现一般异常”
> 
> “发生异常：null”

那么我现在该怎么办：D？有什么线索吗？我唯一做的就是下载新的 XCode，这样我就可以使用 iconutil 制作一个 1024x1024 的图标，这似乎工作正常。

这是控制台中的错误输出：

```
23/09/12 22:15:17,993 Application Loader:  Error:
[2012-09-23 22:14:48 CEST] <main>  INFO: Transporter is searching for updated software components.
[2012-09-23 22:14:52 CEST] <main>  INFO: Transporter is up-to-date.
[2012-09-23 22:14:53 CEST] <main>  INFO: MD5 checksum calculation in the transporter will be skipped.
[2012-09-23 22:14:53 CEST] <main>  INFO: Logging level set to eXtreme
[2012-09-23 22:14:53 CEST] <main>  INFO: Logging configured successfully.
[2012-09-23 22:14:53 CEST] <main> DEBUG: Attempting refresh of configuration data from https://contentdelivery.itunes.apple.com/transporter/Defaults.properties
[2012-09-23 22:14:54 CEST] <main> DEBUG: Configuration refresh successful.
[2012-09-23 22:14:54 CEST] <main> DEBUG: Saving configuration to local path: /Users/Home/.itmstransporter/Defaults.properties
[2012-09-23 22:14:54 CEST] <main>  INFO: iTMSTransporter : iTunes Store Transporter [1.7.5.1]
[2012-09-23 22:14:54 CEST] <main>  INFO: OS identifier: Mac OS X 10.7.5 (x86_64); jvm=20.10-b01-428; jre=1.6.0_35-b10-428-11M3811
[2012-09-23 22:14:54 CEST] <main>  INFO: Memory: [JVM] 21M free, 31M total, 1011M max [System] (Physical) 445M free, 4096M total (Swap) 216M free, 256M total
[2012-09-23 22:14:54 CEST] <main>  INFO: Client: Application Loader 2.7 (273)
[2012-09-23 22:14:54 CEST] <main>  INFO: Upload mode selected.
java.util.zip.ZipException: ZIP_Read: error reading zip file
    at java.util.zip.ZipFile.read(Native Method)
    at java.util.zip.ZipFile.access$1200(ZipFile.java:31)
    at java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:459)
    at java.util.zip.ZipFile$1.fill(ZipFile.java:242)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:141)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
    at java.io.FilterInputStream.read(FilterInputStream.java:90)
    at org.apache.felix.framework.cache.BundleCache.copyStreamToFile(BundleCache.java:328)
    at org.apache.felix.framework.cache.JarContent.extractEmbeddedJar(JarContent.java:471)
    at org.apache.felix.framework.cache.JarContent.getEntryAsContent(JarContent.java:266)
    at org.apache.felix.framework.ModuleImpl.calculateContentPath(ModuleImpl.java:595)
    at org.apache.felix.framework.ModuleImpl.initializeContentPath(ModuleImpl.java:546)
    at org.apache.felix.framework.ModuleImpl.getContentPath(ModuleImpl.java:532)
    at org.apache.felix.framework.ModuleImpl.access$800(ModuleImpl.java:71)
    at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.findClass(ModuleImpl.java:1810)
    at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:727)
    at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)
    at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.apache.felix.framework.ModuleImpl.getClassByDelegation(ModuleImpl.java:645)
    at org.apache.felix.framework.resolver.WireImpl.getClass(WireImpl.java:99)
    at org.apache.felix.framework.ModuleImpl.searchImports(ModuleImpl.java:1390)
    at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:722)
    at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)
    at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at com.apple.transporter.operation.Verify.dealWithIgnorablePackagesInPackagePath(Verify.java:615)
    at com.apple.transporter.operation.Upload.performUploadRequest(Upload.java:77)
    at com.apple.transporter.operation.Upload.performRequest(Upload.java:883)
    at com.apple.transporter.operation.Verify.execute(Verify.java:85)
    at com.apple.transporter.Application.begin(Application.java:149)
    at com.apple.transporter.osgi.TransporterService.run(TransporterService.java:46)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.apple.transporter.osgi.OSGiBootstrapper.runTransporter(OSGiBootstrapper.java:399)
    at com.apple.transporter.osgi.OSGiBootstrapper.bootstrap(OSGiBootstrapper.java:233)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.apple.transporter.FrameworkLoader.start(FrameworkLoader.java:143)
    at com.apple.transporter.Application.main(Application.java:71)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.webobjects._bootstrap.WOBootstrap.main(WOBootstrap.java:71)
java.lang.RuntimeException: Unable to open JAR file, probably deleted: error in opening zip file
    at org.apache.felix.framework.cache.JarContent.openZipFile(JarContent.java:489)
    at org.apache.felix.framework.cache.JarContent.<init>(JarContent.java:63)
    at org.apache.felix.framework.cache.JarContent.getEntryAsContent(JarContent.java:275)
    at org.apache.felix.framework.ModuleImpl.calculateContentPath(ModuleImpl.java:595)
    at org.apache.felix.framework.ModuleImpl.initializeContentPath(ModuleImpl.java:546)
    at org.apache.felix.framework.ModuleImpl.getContentPath(ModuleImpl.java:532)
    at org.apache.felix.framework.ModuleImpl.access$800(ModuleImpl.java:71)
    at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.findClass(ModuleImpl.java:1810)
    at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:727)
    at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)
    at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.apache.felix.framework.ModuleImpl.getClassByDelegation(ModuleImpl.java:645)
    at org.apache.felix.framework.resolver.WireImpl.getClass(WireImpl.java:99)
    at org.apache.felix.framework.ModuleImpl.searchImports(ModuleImpl.java:1390)
    at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:722)
    at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)
    at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at com.apple.transporter.operation.Verify.dealWithIgnorablePackagesInPackagePath(Verify.java:615)
    at com.apple.transporter.operation.Upload.performUploadRequest(Upload.java:77)
    at com.apple.transporter.operation.Upload.performRequest(Upload.java:883)
    at com.apple.transporter.operation.Verify.execute(Verify.java:85)
    at com.apple.transporter.Application.begin(Application.java:149)
    at com.apple.transporter.osgi.TransporterService.run(TransporterService.java:46)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.apple.transporter.osgi.OSGiBootstrapper.runTransporter(OSGiBootstrapper.java:399)
    at com.apple.transporter.osgi.OSGiBootstrapper.bootstrap(OSGiBootstrapper.java:233)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.apple.transporter.FrameworkLoader.start(FrameworkLoader.java:143)
    at com.apple.transporter.Application.main(Application.java:71)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.webobjects._bootstrap.WOBootstrap.main(WOBootstrap.java:71)
[2012-09-23 22:15:15 CEST] <main> ERROR: There was a general exception while executing
[2012-09-23 22:15:15 CEST] <main> ERROR: An exception has occurred: null
[2012-09-23 22:15:15 CEST] <main> DEBUG: java.lang.NullPointerException
    at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.findClass(ModuleImpl.java:1813)
    at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:727)
    at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)
    at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.apache.felix.framework.ModuleImpl.getClassByDelegation(ModuleImpl.java:645)
    at org.apache.felix.framework.resolver.WireImpl.getClass(WireImpl.java:99)
    at org.apache.felix.framework.ModuleImpl.searchImports(ModuleImpl.java:1390)
    at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:722)
    at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)
    at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at com.apple.transporter.operation.Verify.dealWithIgnorablePackagesInPackagePath(Verify.java:615)
    at com.apple.transporter.operation.Upload.performUploadRequest(Upload.java:77)
    at com.apple.transporter.operation.Upload.performRequest(Upload.java:883)
    at com.apple.transporter.operation.Verify.execute(Verify.java:85)
    at com.apple.transporter.Application.begin(Application.java:149)
    at com.apple.transporter.osgi.TransporterService.run(TransporterService.java:46)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.apple.transporter.osgi.OSGiBootstrapper.runTransporter(OSGiBootstrapper.java:399)
    at com.apple.transporter.osgi.OSGiBootstrapper.bootstrap(OSGiBootstrapper.java:233)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.apple.transporter.FrameworkLoader.start(FrameworkLoader.java:143)
    at com.apple.transporter.Application.main(Application.java:71)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.webobjects._bootstrap.WOBootstrap.main(WOBootstrap.java:71)

[2012-09-23 22:15:16 CEST] <main> DBG-X: Returning 1
23/09/12 22:15:17,995 Application Loader:  Out:
ERROR: Unable to extract embedded JAR file. (java.util.zip.ZipException: ZIP_Read: error reading zip file)
ERROR: Unable to get module class path. (java.lang.RuntimeException: Unable to open JAR file, probably deleted: error in opening zip file) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T20:58:21.807

我向苹果提出了这个问题。他们非常友善，这是他们的回答：

1) 将 ~/.itmstransporter/ 重命名为 ~/old.itmstransporter/

2) 尝试上传

3）如果上传成功，继续删除~/old.itmstransporter/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-08T18:40:09.260

我有同样的错误。我更改了我的版本号而不是内部版本号。一旦我更改了内部版本号，它就通过了。

# java - 在 Hibernate 中删除父子对象的问题“删除的对象将被级联重新保存”

> ID：12562888
> 
> 赞同：0
> 
> 时间：2012-09-24T10:10:52.607
> 
> 标签：java, hibernate, hibernate-annotations, hibernate-cascade

我有以下两个实体：

**1- 交易**

```
@OneToMany(cascade=CascadeType.ALL,mappedBy = "deal", fetch = FetchType.EAGER)
@Fetch( FetchMode.SELECT)
private List<DealCheckList> dealCheckList; 
```

**2- 交易清单**

```
@JoinColumn(name = "DEAL_ID", referencedColumnName = "DEAL_ID", insertable = false, updatable = false)
@ManyToOne(fetch = FetchType.LAZY)  
private Deal deal; 
```

在这样做`session.delete(deal)`时，我收到以下错误

```
Caused by: org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:19:34.153

这可能意味着您要删除的对象是其他集合的子对象。为对象设置 cascade="all" 意味着它的子级将被自动删除/更新，除非它们不属于其他父级。

您必须从其父集合中删除您尝试删除的对象。

例子：

```
objectBeingDeleted.getParent().getChildren().remove(objectBeingDeleted); 
```

然后你可以做

```
session.delete(objectBeingDeleted); 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:11:13.187

您有一个`DealCheckList`仍然引用此交易的对象，需要在 Java 中将其从那里删除，然后再通过休眠调用删除该交易。

# symfony - 添加新的子节点

> ID：12562892
> 
> 赞同：0
> 
> 时间：2012-09-24T10:11:06.793
> 
> 标签：symfony

我创建了一个配置类，并构建了一个在该类中定义我的配置的树，还创建了一个我喜欢的子节点：

```
->children()
    ->scalarNode('node1')
        ->isRequired()
        ->cannotBeEmpty()->defaultValue('em_profession_label')->end()
        ->arrayNode('node2') 
            ->isRequired()
            ->requiresAtLeastOneElement()
            ->useAttributeAsKey('id')
            ->prototype('array')
        ..... 
```

现在我的问题是当我需要在我的 yml 文件中添加一个新的子节点时，所以我必须一次又一次地重复上面的代码，然后我正在寻找一种解决方案来自动完成它，当我添加一个新的子节点而不添加一个我的配置类中的新代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:41:43.137

致电后，`prototype()`您可以指定每个子节点的外观。

```
//...
->arrayNode('nodes')
    ->prototype('array')
        ->children()
            ->scalarNode('option_name1')->end()
            ->scalarNode('option_name2')->end()
        ->end()
    ->end()
->end()
//... 
```

这意味着在您的 YML 配置文件中，您可以定义任意数量的节点，只要它们与您在配置中映射的内容相匹配。例如...

```
nodes:
    node1:
        option_name1: somevalue
        option_name2: someothervalue
    node2:
        option_name1: somevalue
        option_name2: someothervalue
    node3:
        option_name1: somevalue
        option_name2: someothervalue 
```

# java - 当同步方法正在执行时，非同步方法是否阻塞

> ID：12562893
> 
> 赞同：3
> 
> 时间：2012-09-24T10:11:15.380
> 
> 标签：java, multithreading, concurrency, synchronized

在调用 plain() 方法之前，同步 sync() 方法中的以下代码块。为什么会这样，内部锁块不应该只调用同步方法——例如，如果 plain() 也被同步，这种行为会很好。

由于 java 使用的监视器概念仅适用于同步方法/块——根据定义，它不应影响非同步代码的执行。总是这种情况还是这种行为特定于 JVM 实现。

```
public class Main {

    public static void main(final String[] args) {
        final Main main = new Main();
        new Thread(new Runnable() {
            @Override
            public void run() {
                main.sync();
            }
        }).run();
        main.plain();
    }

    public synchronized void sync() {
        try {
            System.out.println("sleeping...");
            Thread.sleep(2000);
            System.out.println("out...");
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    public void plain() {
        System.out.println("plain...");
    }
} 
```

输出：

```
sleeping...
out...
plain... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T10:13:32.163

您应该调用`start()`而不是`run()`在新线程上调用。调用将在当前线程中`run()`执行runnable的方法，而不是启动一个新线程来运行它。`run`

# android - 在整个应用生命周期中随机丢失或不正确的图像和背景

> ID：12562896
> 
> 赞同：13
> 
> 时间：2012-09-24T10:11:19.637
> 
> 标签：android, image, layout, tearing

我希望这里的某个人可能知道导致这种行为的原因：

在我的整个应用程序中，在看似随机的地方和随机条件下，我都在观察这个奇怪的 UI 问题。图像有时被加载为黑色（具有正确的边界）或不正确的图像源（再次，具有正确的边界）。这影响`ImageViews`并已经影响`android:background`了引用颜色资源的标签。

我的应用程序依赖于 6 个库项目，它通过服务运行本机代码，应用程序中的活动使用 GlSurfaceViews（尽管并非所有显示问题的活动都包含 OpenGL 组件）。我认为问题可能来自这些地方中的任何一个或通过使用大量内存来组合它们。

您可以在以下屏幕截图中看到此行为：

*   这实际上是一个 6 像素左右宽的列分隔符图像，它被错误地绘制到我的 ImageView 中（ImageView 本身的大小似乎正确）。

    ![撕裂](../Images/d830ec95f5d72225c7367da8f55a04d2.png)

*   当退出应用程序然后再次（重复）返回时，它反而出现（并保持）如下：

    ![黑色的](../Images/93c9bb44acf60daa3c86460c4b7fa22f.png)

*   在 Force Clear 和 Clear App Data 之后，它返回到正确的格式：

    ![这是原文：](../Images/4cebdf911642d1db50c98b76ba0aecc1.png)

正如您还可以看到它旁边的放大镜图像在每个图像中都显示得很好。这些丢失/不正确的图像和背景的问题似乎在整个应用程序生命周期中随机发生，我一直无法找到重现它的方法。

这些图像的布局没什么特别的，在渲染生命周期中我没有做任何有趣的事情（我没有覆盖`onDraw()`或`onMeasure()`类似的东西）。这些图像的来源不是动态设置的，而是通过 XML 设置的。

正如您从上面的示例中看到的那样，这不是构建问题，因为它发生在应用生命周期之间而不是安装之间。它也发生在不同的设备上，三星 8.9、Acer Iconia Tab、Motarola XOOM、

在我看来，参考表有某种错误，它可能是由我的本机代码推动的吗？或者它是我在应用程序的某些阶段使用太多内存的影响？

以下是上述示例的 XML 源代码：

```
<LinearLayout   xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/browseProgressWrapper"
                android:layout_width="match_parent"
                android:layout_height="@dimen/actionbar_compat_height"
                android:orientation="horizontal">
    <RelativeLayout android:layout_width="@dimen/search_bar_width"
                    android:layout_height="match_parent">       
        <EditText       android:id="@+id/browseFilter"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:layout_marginTop="4dp"
                        android:layout_marginLeft="5dp"         
                        android:imeOptions="actionSearch"
                        android:background="@drawable/edit_text_blue"
                        android:maxLength="30"/>
        <ImageView      android:id="@+id/clearSearch"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentRight="true"
                        android:layout_centerVertical="true"
                        android:src="@drawable/ic_input_delete"
                        android:layout_marginRight="5dp"/>
    </RelativeLayout>                   
    <ImageView      android:id="@+id/browseFilterButton"
                    android:src="@drawable/ic_menu_search"
                    android:scaleType="center"
                    android:layout_width="@dimen/actionbar_compat_height"
                    android:layout_height="@dimen/actionbar_compat_height"
                    android:layout_gravity="center_vertical"
                    android:minWidth="@dimen/actionbar_compat_height"/>         
</LinearLayout> 
```

**我碰巧得到了另一个这样的事件的代码/布局的更完整描述：**

我有一个“设置” `Activity`，它会在保存新的设置详细信息后重新启动我的应用程序。它通过停止 a `Service`、调用新`Activity`的（Splash Activity）并完成自身来做到这一点：

```
 mConfiguration.save();
   mConfiguration = new Configuration(Configuration.getInstance());
   getActivity().stopService(new Intent(getActivity(), NativeService.class));
   getActivity().finish();
   startActivity(new Intent(getActivity(), SplashActivity.class)); 
```

大多数时候（在大多数设备上）这工作正常，Splash Activity 包含正确加载的图像。有时，尽管在某些设备上，Splash Activity 加载了不正确的资源（我的测试人员称之为“颠倒的耐克刻度”）或只是一个空白框（如下所示）。有谁知道为什么？

![在此处输入图像描述](../Images/c79f64c873c6a75f08d98c6070936994.png)

这是 Splash 页面的布局，您可以看到它非常简单，毫不奇怪：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/ContentBackgroundColor"
    android:orientation="vertical" >

    <View
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="2" />

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:src="@drawable/manager_android_400" />

    <View
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="1" />

    <ProgressBar
        style="@android:style/Widget.ProgressBar.Large"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal" />

    <View
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="2" />

</LinearLayout> 
```

**理论测试和证明：**

我推测这可能是处理器/内存问题，在启动画面退出并移动到下一个活动之前布局没有被完全绘制，所以我输入了这段代码：

```
 image = (ImageView) findViewById(R.id.image);
    image.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

        @Override
        public void onGlobalLayout() {
            image.getViewTreeObserver().removeGlobalOnLayoutListener(this);
            moveToStartScreen.start();
        }
    }); 
```

希望上面的代码可以确保在移动到开始页面之前肯定加载了图像，但似乎没有明显的效果。

**另一种理论**

我还想知道这是否可能是由 R.id / R.colour / R.drawable 资源引起的，在程序执行中如何被破坏？有谁知道为什么*会*发生这种情况。

我的本机代码是否会在一些 Android 未正确分配的内存地址上猖獗？

以前有没有人注意到这一点 - 或者可能知道为什么会发生这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:12:40.383

Graeme，我几乎遇到了同样的问题，发现这是android平台的一个报告[错误。](http://code.google.com/p/android/issues/detail?id=20283)我认为它在 3.0 版本中得到了纠正。您正在使用哪个 API 进行编译？尝试使用最后一个可用的 api 进行构建，并确保使用 JDK 1.6 进行编译

如果您的问题与此错误有关，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:27:54.963

这是一个简单的刷新、清理和重建问题。各种可绘制文件夹或资源 id 索引中的图像是乱序的，因为它们要么在 eclipse IDE 之外更改（通过外部源代码控制，如 GIT、SVN 或其他编辑），并且没有在 eclipse 导航器中刷新。或者，这些文件可能已在您的 UI 活动所依赖的库项目中更新。

我发现虽然 .java 文件依赖项在整个系统中传播，但对于图像和 .xml 文件等资源而言，情况并非总是如此。

**解决方案相当简单，清理所有内容，刷新所有项目，然后重新构建。**拉伸或黑色边缘应该消失。

*注意：当 9-patch 图像被视为标准 .png 图像时，会出现此问题的主要表现。这意味着它们会在图像上以线性方式拉伸，而不仅仅是在边缘。对我来说，这解释了您的“撕裂/拉伸”示例。我经常看到类似的。另一个常见的表现是文本字符串偶尔会显示错误的资源！*

# oracle11g - 如何使用alter命令为已经有主键的表定义复合主键？

> ID：12562897
> 
> 赞同：3
> 
> 时间：2012-09-24T10:11:31.640
> 
> 标签：oracle11g, primary-key, alter-table, composite-primary-key

`ALTER`当已经为现有表定义了主键时，我需要知道如何使用 table 命令定义复合主键？

**数据库：** Oracle 11g

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T10:14:29.107

删除现有`PRIMARY KEY`约束，然后重新创建它。假设调用了现有的`table_pk`，并且新的复合主键将打开`column1`并且`column2`：

```
ALTER TABLE table DROP CONSTRAINT table_pk;
ALTER TABLE table ADD CONSTRAINT table_pk PRIMARY KEY (column1, column2); 
```

# spring-security - 在 Spring 3.1 中未调用 CustomPermissionEvaluator

> ID：12562901
> 
> 赞同：1
> 
> 时间：2012-09-24T10:11:43.740
> 
> 标签：spring-security

我已经实现了一个自定义 PermissionEvaluator 并将其配置如下

```
<security:http access-denied-page="/" auto-config="true" use-expressions="true">
    <security:anonymous />
    <security:form-login always-use-default-target="false" default-target-url="/people/login/redirect" login-page="/people/login" login-processing-url="/people/login/submit" password-parameter="password" username-parameter="emailAddress" />
    <security:logout delete-cookies="true" invalidate-session="true" logout-success-url="/people/login/redirect" logout-url="/people/logout" />
</security:http>

<security:authentication-manager erase-credentials="false">
    <security:authentication-provider ref="authenticationProvider" />
</security:authentication-manager>

<security:global-method-security jsr250-annotations="enabled" pre-post-annotations="enabled" secured-annotations="enabled" >
    <security:expression-handler ref="expressionHandler"/>
</security:global-method-security>

<bean id="expressionHandler" class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler">
     <property name="permissionEvaluator" ref="appPermissionEvaluator"/>
</bean>

<bean class="com.web.security.ApplicationPermissionEvaluator" id="appPermissionEvaluator" /> 
```

然后我在我的一个 ControllerClass 上的一种方法上应用了 hasPermissionCheck，如下所示

```
@PreAuthorize("hasPermission(#accountCode, 'AdministerPosition')")
    @RequestMapping(method = RequestMethod.GET, value =  "/cloud/{account}/position")
    public String list(@PathVariable String account, @RequestParam(required = false, value = URLParameter.ACCOUNT_CODE) final String accountCode, final Model model) {

} 
```

在这种情况下，我在`ApplicationPermissionEvaluator`课堂上从来没有得到控制。

我发现`DenyAllPermissionEvaluator`在我的情况下总是会执行以下错误消息

```
DenyAllPermissionEvaluator - Denying user ****** permission 'AdministerPosition' 
```

请尽快给我建议。我真的坚持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:44:09.243

让这个工作的方法是`<security:global-method-security ..>`在你的 spring mvc 上下文中配置，而不是在主上下文中

即在这里`mvc-servlet-context.xml`

```
 <servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:META-INF/spring/mvc-servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

# asp.net - 一个简单的跨域 SSO

> ID：12562902
> 
> 赞同：1
> 
> 时间：2012-09-24T10:11:49.357
> 
> 标签：asp.net, html, asp.net-mvc, single-sign-on

假设我有 2 个网站：domain1.com 和 domain2.com

我实现了 sso 如下：一旦用户使用 domain1.com 成功登录，我生成一个 iframe 以使他也登录 domain2.com。

```
<iframe width=1 height=1 src="domain2.com/sso-login?username=abc&password=encripted_password" /> 
```

在 domain2.com 上，我实现了一个方法 sso-login 来处理这个调用，如果用户名和密码有效，我创建 auth-cookie 来返回浏览器。因此，当他在其他选项卡中打开 domain2.com 时，他将自动登录。

用户登录 domain2.com 时的流程相同，我生成了一个 iframe 以使用户登录 domain1.com。

我想知道这个实现中是否有任何安全漏洞或劣势点？我还应该做些什么来使它更安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:07:39.680

不要发送用户名和密码。仅发送身份验证令牌：

```
<iframe width=1 height=1 src="https://domain2.com/sso-login?token=<%= Request.Cookies[FormsAuthentication.FormsCookieName].Value %>" /> 
```

然后让两个应用程序共享相同的[机器密钥](http://msdn.microsoft.com/en-us/library/ff649308.aspx)，以便远程域可以解密它并为该域发出 Forms Authentication cookie。还要确保您仅通过 HTTPS 发送令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:57:37.583

您会遇到问题，因为许多现代浏览器不允许在指向另一个域的 iframe 中设置 cookie。

# java - 导入白宫android开源失败？

> ID：12562905
> 
> 赞同：0
> 
> 时间：2012-09-24T10:12:04.300
> 
> 标签：java, android

我使用java文件导入现有Android代码到工作区。然后添加ActionBarSherlock，undergarment，ViewPageIndicato作为它的库。然后修复它的属性。在我启动AVD之前一切都很好。这是错误信息。

```
 09-24 18:13:36.441: E/AndroidRuntime(588): FATAL EXCEPTION: main
09-24 18:13:36.441: E/AndroidRuntime(588): java.lang.RuntimeException: Unable to create application gov.whitehouse.ui.WhiteHouseApplication: java.lang.IllegalArgumentException: Application configuration is invalid.
09-24 18:13:36.441: E/AndroidRuntime(588):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3957)
09-24 18:13:36.441: E/AndroidRuntime(588):  at android.app.ActivityThread.access$1300(ActivityThread.java:123)
09-24 18:13:36.441: E/AndroidRuntime(588):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)
09-24 18:13:36.441: E/AndroidRuntime(588):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-24 18:13:36.441: E/AndroidRuntime(588):  at android.os.Looper.loop(Looper.java:137)
09-24 18:13:36.441: E/AndroidRuntime(588):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-24 18:13:36.441: E/AndroidRuntime(588):  at java.lang.reflect.Method.invokeNative(Native Method)
09-24 18:13:36.441: E/AndroidRuntime(588):  at java.lang.reflect.Method.invoke(Method.java:511)
09-24 18:13:36.441: E/AndroidRuntime(588):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-24 18:13:36.441: E/AndroidRuntime(588):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-24 18:13:36.441: E/AndroidRuntime(588):  at dalvik.system.NativeStart.main(Native Method)
09-24 18:13:36.441: E/AndroidRuntime(588): Caused by: java.lang.IllegalArgumentException: Application configuration is invalid.
09-24 18:13:36.441: E/AndroidRuntime(588):  at com.urbanairship.UAirship.takeOff(Unknown Source)
09-24 18:13:36.441: E/AndroidRuntime(588):  at gov.whitehouse.ui.WhiteHouseApplication.onCreate(WhiteHouseApplication.java:74)
09-24 18:13:36.441: E/AndroidRuntime(588):  at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
09-24 18:13:36.441: E/AndroidRuntime(588):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3954)
09-24 18:13:36.441: E/AndroidRuntime(588):  ... 10 more 
```

有人成功了吗？任何重播都会有很好的帮助。

# visual-studio-2010 - 为项目设置提醒

> ID：12562909
> 
> 赞同：1
> 
> 时间：2012-09-24T10:12:16.797
> 
> 标签：visual-studio-2010, reminders

有没有办法在 Visual Studio 2010 中设置某些项目/解决方案的提醒？

就像项目打开时出现的弹出消息之类的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:14:18.297

[这样](http://stickynotes4code.com/)的东西合适吗？

这是用于执行类似于您所要求的操作的插件的屏幕截图，只是在 VS2008 中：

![](../Images/46977de1b114d74a6bba9fb87b2eb84d.png)

# html - 由于 .htaccess 导致格式丢失

> ID：12562914
> 
> 赞同：0
> 
> 时间：2012-09-24T10:12:37.187
> 
> 标签：html, apache, .htaccess, webserver

我正在为我的网页制作 .htaccess，代码如下：

```
Options -Indexes

RewriteEngine On
RewriteRule ^([A-Za-z]+)/([0-9]+)/$ files.php?row=$1&column=$2 

RewriteRule ^([A-Za-z]+)/?$ $1/1/ 

RewriteCond %{HTTP_REFERER} !^http://(www\.)?mywebpage\.at [NC]
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} ^http://.*$
RewriteRule \.(jpe?g|gif|bmp|png)$ /imgs/hotlinks.png [L] 

RewriteCond %(REQUEST_URI) ^imgs/$ [NC]
RewriteRule / - [F]

ErrorDocument 404 /404.html

ErrorDocument 403 /403.html 
```

问题是，我的图像没有显示在具有重写 URL 的页面中。显然，他们的路线也受到重写的影响。简单解释：位于 www.mywebpage.at/imgs/pic1.jpg 的图像加载到 www.mywebpage.at/files.php?row=first&column=3，但是当我尝试输入 www.mywebpage.at/first/ 3/ 浏览器在 www.mywebpage.at/first/3/imgs/pic1.jpg 中查找图片，显然无法加载。

我该如何解决这个问题，以便图像的路径不会改变，无论我在哪里使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:17:39.803

你可以做：

```
RewriteCond $1 !^(imgs)
RewriteRule ^([A-Za-z]+)/([0-9]+)/$ files.php?row=$1&column=$2 
```

这将重写除 imgs 文件夹之外的所有内容。

编辑：道歉，误读的问题。

使您的图像路径绝对。例如相对路径是：

```
imgs/image1.jpg 
```

绝对路径是：

```
/imgs/image1.jpg 
```

开头的斜线告诉它转到站点的根目录，然后转到 imgs，然后是 image1.jpg。

# nhibernate - nhibernate通过使用CreateQuery的ID列表删除多条记录

> ID：12562917
> 
> 赞同：1
> 
> 时间：2012-09-24T10:12:51.027
> 
> 标签：nhibernate, fluent-nhibernate, sql-server-ce

我正在尝试从表 A 中删除多条记录，这些记录在表 B 中的 id 列表中退出，如下所示：

```
List<ulong> ids = new List<ulong> {1, 2};

string deleteQuery = string.Format(
                @"DELETE FROM TABLE_A WHERE EXISTS 
                (SELECT id FROM TABLE_B WHERE checkpoint_id IN :idList)");

Session.CreateQuery(deleteQuery).SetParameterList("idList", ids).ExecuteUpdate(); 
```

我得到以下异常：

```
NHibernate.Hql.Ast.ANTLR.QuerySyntaxException: Exception of type 'Antlr.Runtime.NoViableAltException' was thrown. near line 2, column 100 
```

如果我将列表硬编码 [IN (1,2)] 它可以工作。我想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:22:56.637

发现问题：

我需要一个额外的**括号**围绕：idList。

```
string deleteQuery = string.Format(
            @"DELETE FROM TABLE_A WHERE EXISTS 
            (SELECT id FROM TABLE_B WHERE checkpoint_id IN (:idList))"); 
```

# database - 如何在不影响应用程序性能的情况下清除 DB2 中的大量数据？

> ID：12562921
> 
> 赞同：-1
> 
> 时间：2012-09-24T10:13:01.523
> 
> 标签：database, db2

请让我知道在不影响应用程序性能的情况下从事务数据库中清除数据的有效方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:51:13.093

您可以使用 alter table 命令清空具有“未登录初始”的表

[http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000888.html](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000888.html)

您还可以使用截断命令

[http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0053474.html](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0053474.html)

如果您需要对多个表执行此操作，您可以通过查询目录生成删除行的查询。

# postgresql - psql.exe - Windows 中的密码验证失败

> ID：12562928
> 
> 赞同：19
> 
> 时间：2012-09-24T10:13:23.237
> 
> 标签：postgresql

我是 PostgreSQL 的菜鸟。我在 windows7 上安装了 9.2 版。在安装过程中它要求输入密码，我输入了它。现在，每当我运行 d:\tools\PostgreSQL9.2\bin\psql.exe 时，它​​都会要求输入密码。当我输入它不接受的密码时，它显示“用户“user1”的密码验证失败。我已经重新安装了两次。我也尝试输入我的系统密码。

我正在尝试使以下命令正常工作

```
psql.exe -f db/codedb.sql development 
```

我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-24T11:27:13.503

连接时尝试设置用户名。

```
psql.exe -U username -d dbname -f somefile.sql 
```

您可能在安装过​​程中设置了默认的“postgres”用户。不确定您是否创建了其他任何人。

要添加其他用户和数据库，只需作为 postgres 连接到 postgres 数据库并执行以下操作：

```
CREATE USER myuser WITH ENCRYPTED PASSWORD 'secret';
CREATE DATABASE mydb OWNER myuser; 
```

如果您的机器是安全的，您可能还想设置一个[密码文件](http://www.postgresql.org/docs/9.2/static/libpq-pgpass.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-24T11:41:02.680

在 pg_hba.conf 中更改“trust”而不是“md5”以连接到数据库并更改您的密码。

```
 --------------------configuration in pg_hba.conf---------------
    local   all         all                               trust  
    local   all         postgres                          trust          
    host    all         all         ::1/128               trust 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-30T08:03:43.720

这是安装 Postgresql 而不会出现错误（集群错误和身份验证错误）的简单解决方案，我按照以下步骤操作，并且成功安装了 postgresql

1.  从控制面板->用户帐户在Windows中创建新用户

2.  登录到新用户（你已经创建）后，将 postrgresql(.exe) 应用程序复制到任何目录（'C' 除外）并单击要安装的应用程序（不要忘记更改你已将应用程序复制到的安装目录上面的文件）。

3.  安装完成后更改 postgresql.conf 和 pg_hba.cof 中的以下配置

在你的下面添加如下`postgresql.conf`

```
listen_addresses = '*' 
```

在你的下面添加如下`pg_hba.cof`

```
# IPv4 local connections:
host     all     all     127.0.0.1/32    trust
# IPv6 local connections:
host     all     all     ::1/128     trust
# Allow replication connections from localhost, by a user with the
# replication privilege.
# host   sameuser    postgres    127.0.0.1/32    trust
#host    replication     postgres        ::1/128                 md5 
```

# javascript - 在 Rails 中自动提交 HTML 选择下拉菜单

> ID：12562940
> 
> 赞同：1
> 
> 时间：2012-09-24T10:14:23.393
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, html

我有一个使用 HTML 的 select 标签的简单下拉菜单。选择标签的代码变为：

```
<select name="menu_id" id="menu_id">
  <option selected="selected" value="1">Dinner</option>
  <option value="2">Lunch</option>
</select> 
```

在我的 menu.js.coffee 文件中，我有：

```
$("select#menu_id").change(-> $(this).closest("form").submit()) 
```

这变成了 menu.js：

```
(function() {
  $("select#menu_id").change(function() {
    return $(this).closest("form").submit();
  });
}).call(this); 
```

问题是更改选择菜单不提交表单！它甚至没有输入上面的 menu.js 代码（我在那里放置了断点，并且在选择菜单选项后它永远不会进入）。

如果我只是复制上面的内容`(function() {`，然后将其粘贴到 Firebug 或 Chrome 控制台中，那么它会按预期运行并且更改菜单实际上会提交表单。那么我应该如何在rails中编写coffeescript代码以允许在更改选择菜单时提交表单？

我正在使用 Rails 3.2.8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:04:02.060

尝试将您的代码放入`$(document).ready () ->`块中。

```
$(document).ready () ->
  $("select#menu_id").change(-> $(this).closest("form").submit()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:28:31.210

document.ready 函数仅在页面重新加载时使用。您可以使用单独的函数并使用 onchange 调用。

例子：

```
 <select name="menu_id" id="menu_id" onchange="callThisFunction()">
    <option selected="selected" value="1">Dinner</option>
    <option value="2">Lunch</option>
    </select>

    <form name="myform"></form>

    function callThisFunction()
    {
      document.forms["myform"].submit();
    } 
```

# android - 布局 XML 中的条件小部件可见性

> ID：12562945
> 
> 赞同：1
> 
> 时间：2012-09-24T10:14:36.200
> 
> 标签：android, android-layout, android-widget

我只是想问一下，小部件是否可以在布局 XML 中具有条件可见性？

具体来说，我有 2 个布局，每个布局都有一个 ListView。我还为列表项实现了自定义布局。

自定义列表项布局有 3 个按钮，但是，对于其中一个活动，其中一个按钮不相关，必须删除/隐藏。

是否可以在布局 XML 中完成此操作？我真的不想创建另一个自定义列表项布局只是为了删除一个活动的一个按钮。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:19:09.400

在活动中放置一个 button.setVisibility(View.GONE);

# jquery - DataTables 根据另一个字段的摘要计算字段

> ID：12562946
> 
> 赞同：1
> 
> 时间：2012-09-24T10:14:40.880
> 
> 标签：jquery, datatables

我有最终版本的数据将来自服务器，但现在它是静态的，看起来像这样：

```
[
 {"name": "John","c1": 12,"c2": 10,"c3": 5},
 {"name": "Jack","c1": 10,"c2": 20,"c3": 15},
 {"name": "Bill","c1": 8,"c2": 30,"c3": 15}
] 
```

我正在初始化 DataTable，如下所示：

```
var iTotal = [0, 0, 0];

var oTable1 = $('#example1').dataTable({
    "table-layout": "fixed",
    "oLanguage": {
        "sZeroRecords": "No data"
    },
    "fnPreDrawCallback": function(oSettings) {
        iTotal = [0, 0, 0];
        for (var i = 0; i < oSettings.aoData.length; i++) {
            iTotal[0] += oSettings.aoData[i]._aData.c1;
            iTotal[1] += oSettings.aoData[i]._aData.c2;
            iTotal[2] += oSettings.aoData[i]._aData.c3;
        }
        //set percentage value
        for (i = 0; i < oSettings.aoData.length; i++) {
            oSettings.aoData[i]._aData.perc = (oSettings.aoData[i]._aData.c1 / iTotal[0] * 100).toFixed(2) + '%';
        }
        console.log(oSettings.aoData); //here data is set correct 
    },
    "fnFooterCallback": function(nRow, aaData, iStart, iEnd, aiDisplay) {
        var nCells = nRow.getElementsByTagName('th');
        nCells[1].innerHTML = iTotal[0];

        //check if column[2] is visible??!!how
        //nCells[2].innerHTML=iTotal[1];

        var secondRow = $(nRow).next()[0]; //see this
        var ndCells = secondRow.getElementsByTagName('th');
        ndCells[1].innerHTML = aaData.length > 0 ? (iTotal[0] / aaData.length).toFixed(2) : 0;
    },
    "bPaginate": false,
    "bLengthChange": false,
    "bFilter": false,
    "bSort": true,
    "bInfo": false,
    "bAutoWidth": false,
    "aaSorting": [[0, "asc"]],

    "aaData": [{"name": "John","c1": 12,"c2": 10,"c3": 5},
               {"name": "Jack","c1": 10,"c2": 20,"c3": 15},
               {"name": "Bill","c1": 8,"c2": 30,"c3": 15}
              ],
    "aoColumns": [{
        "mData": "name"},
    {
        "mData": "c1"},
    {
        "mData": "c2"},
    {
        "mData": "c3"},
    {
        "mData": null,
        "bVisible": false,
        "mRender": function(data, type, full) {
            return (full.c1 / iTotal[0]);
        }},
    {
        "mData": null,
        "sClass": "center",
        "mRender": function(data, type, full) {
            return '<img title="Remove"  class="deleteMe" src="http://openfire-websockets.googlecode.com/svn-history/r2/trunk/plugin/web/images/delete-16x16.gif" style="cursor: pointer">';
        }}]
}); 
```

在`fnPreDrawCallback`我试图计算 perc 字段的值并使用 console.log 我能够看到正确的数据，但是当我尝试在正确的列中显示 perc 时，我没有得到任何数据。

这是我的示例代码：http: [//jsfiddle.net/Misiu/kS9bj/1/](http://jsfiddle.net/Misiu/kS9bj/1/)

**我应该如何更新我的代码以“即时”计算我的百分比列**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:12:55.393

请参阅此链接[http://jsfiddle.net/kS9bj/6/](http://jsfiddle.net/kS9bj/6/)

HTML 代码

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example1">
    <thead>
      <tr>
      <th>Name</th>
      <th>Column1</th>
      <th>Column2</th>
      <th>Column3</th>
      <th>%</th>
      <th>Delete</th>
      </tr>
    </thead>
    <tbody id="prec">
        <tr >
        <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
          </tr>
      </tbody>            
    <tfoot>
      <tr id="sum">
        <th>Sum</th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
      <tr id="avg">
        <th>Avg</th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
    </tfoot>
  </table> 
```

数据表代码

```
$(document).ready(function() {

var iTotal = [0, 0, 0];

var oTable1 = $('#example1').dataTable({
    "table-layout": "fixed",
    "oLanguage": {
        "sZeroRecords": "No data"
    },
    "fnDrawCallback": function(oSettings) {
        iTotal = [0, 0, 0];
        for (var i = 0; i < oSettings.aoData.length; i++) {
            iTotal[0] += oSettings.aoData[i]._aData.c1;
            iTotal[1] += oSettings.aoData[i]._aData.c2;
            iTotal[2] += oSettings.aoData[i]._aData.c3;
        }
        //Sum
        $("#sum").empty();
        $("#sum").append('<th>sum</th><th>'+iTotal[0]+'</th><th>'+iTotal[1]+'</th><th>'+iTotal[2]+'</th>')
        //AVG    
        $("#avg").empty();
        $("#avg").append('<th>avg</th><th>'+iTotal[0]/3+'</th><th>'+iTotal[1]/3+'</th><th>'+iTotal[2]/3+'</th>')    

        for (i = 0; i < oSettings.aoData.length; i++) {
            oSettings.aoData[i]._aData.perc = (oSettings.aoData[i]._aData.c1 / iTotal[0] * 100).toFixed(2) + '%';
       // $("#prec").empty();  
        $("#prec").append('<tr><td></td><td></td><td></td><td></td><td>'+oSettings.aoData[i]._aData.perc+'</td><td></td></tr>');
              }  

    },   

    "fnFooterCallback": function(nRow, aaData, iStart, iEnd, aiDisplay) {
    var nCells = nRow.getElementsByTagName('th');
    nCells[1].innerHTML = iTotal[0];

    //check if column[2] is visible??!!how
    //nCells[2].innerHTML=iTotal[1];

    var secondRow = $(nRow).next()[0]; //see this
    var ndCells = secondRow.getElementsByTagName('th');
    ndCells[1].innerHTML = aaData.length > 0 ? (iTotal[0] / aaData.length).toFixed(2) : 0;
     },

    "bPaginate": false,
    "bLengthChange": false,
    "bFilter": false,
    "bSort": true,
    "bInfo": false,
    "bAutoWidth": false,
    "aaSorting": [[0, "asc"]],

    "aaData": [{"name": "John","c1": 12,"c2": 10,"c3": 5},
               {"name": "Jack","c1": 10,"c2": 20,"c3": 15},
               {"name": "Bill","c1": 8,"c2": 30,"c3": 15}
              ],
    "aoColumns": [{
        "mData": "name"},
    {
        "mData": "c1"},
    {
        "mData": "c2"},
    {
        "mData": "c3"},
    {  },                        
    {
        "mData": null,
        "sClass": "center",
        "mRender": function(data, type, full) {
            return '<img title="Remove"  class="deleteMe" src="http://openfire-websockets.googlecode.com/svn-history/r2/trunk/plugin/web/images/delete-16x16.gif" style="cursor: pointer">';
        }}]

}); 
```

});

# c# - 无法获取当前 Metro App 的 AppUserId

> ID：12562954
> 
> 赞同：1
> 
> 时间：2012-09-24T10:15:13.240
> 
> 标签：c#, c++, windows-8

我`GetApplicationUserModelId()`用来获取当前应用程序的应用程序用户 ID。然后使用`ActivateApplication()`启动 Metro App。

但是登录屏幕中有一些应用程序，例如邮件、人员和 SkyDrive，我无法获取`AppUserId`。

我怎么才能得到它？

# java - 我可以用 Quartz 配置一种触发隔离吗？

> ID：12562960
> 
> 赞同：0
> 
> 时间：2012-09-24T10:15:48.140
> 
> 标签：java, concurrency, quartz-scheduler

我的应用程序分为 2 个 Web 应用程序，它们在同一个容器中运行，共享一个数据库。

第一场战争只做后台处理，另一场是客户端 GUI + 一些背景的东西。

具有客户端 GUI 的应用程序允许用户配置将由“后台应用程序”执行的某些任务的调度。基本上，它配置 Quartz 作业和触发器。

我希望后台应用程序的调度程序只处理某个组的作业（bg-jobs），而另一个调度程序处理另一个组（fg-jobs）。

是否可以用石英配置这种隔离？

注意：我想保持简单，如果我可以避免使用 Quartz Where 这似乎是一把锤子来撬动这可能对我的需要来说太过分了。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:16:11.967

最简单和最快的方法是为每个应用程序创建单独的表加载。所以有一组以“bg-”为前缀的石英表，另一组以“fg-”为前缀。然后只需更改您的调度程序配置以指向适当的表。我知道这可能有点尴尬，但你确实说过你想保持简单:)。

# javascript - 我正在处理书签，我的问题是 js 没有得到更新

> ID：12562962
> 
> 赞同：2
> 
> 时间：2012-09-24T10:15:50.650
> 
> 标签：javascript, bookmarklet

我正在处理书签，我的问题是 js 没有得到更新

我用我的书签加载 js 文件，我的问题是它没有更新我的最新版本。即使我已经在我的数据库中更新了它。

所以我希望它在单击书签时检查并加载最新版本。所以我想知道是否要在 js 文件中添加一些内容，以便加载最新版本。或者是否有办法检查日期和时间或检查版本。ETC

我对代码没有问题，因为它们工作正常。

**假设这是我的 js**

```
function start() {
    // codes
};

//  ---------------------------------------
//  Ajax
//  ---------------------------------------
function AJAXInteraction(url, callback) {
    var req = init();
    req.onreadystatechange = processRequest;

    function init() {
        if (window.XMLHttpRequest) {
            return new XMLHttpRequest();
        }
        else if (window.ActiveXObject) {
            return new ActiveXObject("Microsoft.XMLHTTP");
        }
    }

    function processRequest() {
        if (req.readyState == 4) {
            if (req.status == 200) {
                if (callback) callback(req.responseText);
            }
        }
    }
    this.doGet = function () {
        req.open("GET", url, true);
        req.send(null);
    }
    this.doPost = function (str) {
        req.open("POST", url, true);
        req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");
        req.send(str);
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:31:54.577

如果您将 JS 文件附加到页面，并且希望强制浏览器始终获取文件的新副本而不使用缓存，那么您可以附加任何随机文本作为查询字符串的一部分。这是示例代码。

```
document.body.appendChild(document.createElement('script')).src = 'http://server.com/script.js?ts=' + new Date().getTime(); 
```

* * *

或者，从中加载文件的服务器可以指定某些到期信息。为确保您始终获得最新信息，您可以指定过去某个时间的到期时间。

看看这个：[Setup HTTP expires headers using PHP and Apache](https://stackoverflow.com/questions/1036941/setup-http-expires-headers-using-php-and-apache)

# php - 向 WordPress 帖子添加新行

> ID：12562964
> 
> 赞同：0
> 
> 时间：2012-09-24T10:15:52.600
> 
> 标签：php, wordpress

首先，我浏览了这个链接[http://codex.wordpress.org/Integrating_WordPress_with_Your_Website](http://codex.wordpress.org/Integrating_WordPress_with_Your_Website)。我不能用这个。

我正在尝试从我拥有的远程服务器上的 WordPress 安装中获取最新帖子。他们共享同一个数据库服务器，所以我现在就在这里发帖，然后将它带回到我的 PHP 应用程序中。这一切都有效。

不工作的是显示器。在我`nl2br`用来制作新线之前，但这不起作用。

我注意到 WordPress 会进行一些后期处理，以将`p`标签添加到他们认为应该是段落的某些行（例如，不在`ul`s 或`li`s 中）。他们在从数据库中获取帖子后执行此操作（`p`标签未保存到数据库）。

我试图找出他们在源代码中使用的后处理，但在找到`the_content`函数等以及`$post`var 来自哪里但没有找到我正在寻找的代码后，我出现了空白。

WordPress 使用什么后处理功能来添加这些段落以使他们的帖子看起来不错？

## 编辑

对于这里的正则表达式或一般 PHP 人员，我希望更改如下内容：

```
<em><a href="link">awesome link</a></em>
<h3>Awesome Head</h3>
lalalaalal
<ul>
<li>Awesome li</li>
</ul> 
```

变成这样的东西：

```
<p>
    <em><a href="link">awesome link</a></em>
</p>
<h3>Awesome Head</h3>
<p>lalalaalal</p>
<ul>
<li>Awesome li</li>
</ul> 
```

错过了显然不应该有标签的标签，`p`比如`h`和标签。`ul``li`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:50:16.503

最简单、最快的方法：解析来自 RSS 提要的最新帖子。您会发现`<p>`自动为您添加的所有标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:36:39.773

正如@BryanH 所说，正确的做法是：使用已经为您预先格式化帖子的 RSS 提要。

但是，如果您不想制作 XML 解析器并处理它附带的所有内容只是为了获得博客文章，那么您可以使用类似的东西：

```
$content = preg_split('/\\r?\\n/', str_replace(']]>', ']]&gt;', $post->content));

foreach($content as $line){
    if(strlen(trim($line)) > 0){
        $line = trim($line);
        if(!preg_match('/^(<|<\/)(ul|li|div|h[1-6])/', $line)){
            echo '<p>'.$line.'</p>';
        }else{
            echo $line;
        }
    }
} 
```

这是我个人最后用来解决这个问题的代码。

可能有一种更健壮、更优雅的方法（快速编码），但是我在一篇非常复杂的博客文章中测试了它，其中包含图像和许多不同的标签，它似乎运行良好，没有任何错误。

我仍然不确定 WP 使用什么，但这最终解决了我的问题。

# asp.net-mvc - 控制器中具有多线程的多个 HttpResponse 导致 MVC

> ID：12562968
> 
> 赞同：0
> 
> 时间：2012-09-24T10:16:03.463
> 
> 标签：asp.net-mvc, multithreading

我有一个 PDF 文件列表，用户想要选择多个文件并以一种操作方法同时下载它们。

是否可以创建多个线程并且每个线程都返回 pdf 文件作为响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:16:51.363

尝试使用 PDF 列表创建一个类

当您的用户选择多个文件时，您会填充您的班级列表。

向类添加一个方法，将一个文件推送到客户端，另一个循环遍历列表，将文件推送到客户端。

从您的控制器调用循环方法。

# java - Java：使用静态变量在基于 Web 的应用程序中存储应用程序特定数据

> ID：12562984
> 
> 赞同：0
> 
> 时间：2012-09-24T10:17:11.643
> 
> 标签：java

我正在开发一个现有的基于 Web 的应用程序，它使用静态地图来存储特定于 Application 的数据。

这是我下面的代码，它负责将数据存储在 a`ConcurrentHashMap`中，如下所示。

```
public class MyClass 

    // Class variable
    private static Map<String, UserThread> usermap = new ConcurrentHashMap<String, UserThread>();  

// Inside a Method 
public void userData()
 {
 UserThread  userThread= usermap.get(getLoginId());
 if (userThread == null) {
 userThread = new UserThread();
 userThread.start();
 usermap.put(getLoginId(), userThread);
 }
} 
```

应用程序运行良好，我的问题是，这是一个有效的代码，因为我们可以将数据存储在静态变量中吗？（这里的静态`ConcurrentHashMap`包含特定于应用程序的数据）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:29:07.243

应避免使用任何类型的静态变量和缓存，尤其是在 Web 应用程序等多线程环境中。您的代码有几个问题：

1.  您是否从地图中删除了 UserThreads？你怎么知道什么时候应该删除它们？如果客户端的浏览器崩溃了怎么办？如果您不删除它们，您将在应用程序运行一段时间后询问内存不足错误。
2.  以您使用它的方式使用 ConcurrentHashMap 不是线程安全的，因为另一个线程可能会在`if (userThread == null)` 和之间添加一个 UserThread `usermap.put(getLoginId(), userThread);`。HashMap 的并发版本并没有像看起来那样神奇地解决所有线程安全问题。
3.  在 servlet 容器中生成自己的线程并不是一个好主意。有更好的方法来执行后台任务，但首先你需要说明线程正在尝试做什么。

在任何类型的应用程序中，通常使用任何类型的此类静态缓存都是坏主意。在您的情况下，将特定于应用程序的数据保留在用户会话中会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:24:28.057

使用静态映射，除非您确定添加到映射中的每个条目的生命周期，即谁将添加它们，条目将在那里停留多长时间以及何时将它们删除，否则您将面临内存泄漏的风险可以在 GC 期间声明它们。否则，您的应用程序将耗尽内存并开始抛出 OOME。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:22:56.200

在这种情况下，将在一台机器上登录的用户将拥有与在第二台机器上相同的会话。我敢打赌这不是一个好方法。

前段时间我问过[`Semi static field in Java application`](https://stackoverflow.com/questions/9189304/semi-static-field-in-java-application)，Alessandro Santini 给了我非常好的解决方案`ThreadLocal`。看一下这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:31:43.603

1.  AFAIK 根据规范不能在容器内启动自己的线程。您应该为此使用 WorkManager。但我所知道的唯一执行该规则的服务器是 Websphere 应用程序服务器。

2.  原则上静态变量是可以的，当然，如果您在集群环境中运行，每个服务器都会有自己的静态变量实例。这可能是也可能不是问题。

所以从技术上讲，你可能没问题。

另一方面，我真的很好奇你想用所有这些线程实现什么。如果您为每个用户启动一个线程，这是 DOS 攻击的绝佳攻击媒介。我也不知道你为什么想做这样的事情。

# c# - 在 DataGridView 中排序会引发 NullReferenceException

> ID：12562991
> 
> 赞同：0
> 
> 时间：2012-09-24T10:17:45.120
> 
> 标签：c#, winforms, visual-studio-2010, sorting, datagridview

亲爱的同事们

我在 DataGridView 模块中排序时遇到问题。当我单击需要排序的列时，系统会抛出 NullReferenceException。我知道该列有一些空值，这会导致错误消息。您知道如何将排序模块更改为将空值作为不带任何字符的字符串进行线程处理吗？

您的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:20:42.007

为什么不使用空字符串而不是空字符串？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:34:10.233

我知道这对于您的需要来说有点复杂，但是您可以在以编程方式选择其中包含空值的那些行之后尝试类似的解决方法。

[对 DataGridView 中的选定行进行排序](https://stackoverflow.com/questions/6616633/sorting-selected-rows-in-datagridview?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:36:35.360

亲爱的乔治和玛姆塔

再次感谢你们俩的帮助。我找到了解决问题的解决方案。正如我所写，所有数据都从数据库传输到 Visual Studio，因此我将查询更改为：

```
"SELECT number_of_invoice FROM invoices" 
```

到：

```
"SELECT CASE WHEN (number_of_invoice is null) then '' else number_of_invoice END FROM invoices" 
```

这会自动将 null 值更改为 ''，并且问题被忽略。

祝你有美好的一天！

# android - 获取 jquery 移动点击/点击事件以触发 android 本机事件

> ID：12562993
> 
> 赞同：0
> 
> 时间：2012-09-24T10:17:51.490
> 
> 标签：android, html, jquery-mobile

我是 android 中 jquery mobile 的新手，将它用于我的应用程序的动画菜单，一切正常，点击打开链接，但问题是我如何在我的 jquery 菜单上触发我的原生 android 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:26:33.573

我确定您需要为您的原生 android 事件创建自己的 phonegap 插件...

我添加了一篇文章的链接，我认为这可能会有所帮助......

[使用适用于 Android 的本机插件扩展 Phonegap](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html)

# macos - 是否有适用于 Mac 的 NSLocalizedIndexedCollat ion，例如适用于 iOS 的 UILocalizedIndexedCollat ion？

> ID：12562994
> 
> 赞同：1
> 
> 时间：2012-09-24T10:17:53.207
> 
> 标签：macos, cocoa, contacts

需要对联系人列表进行一些分组。但找不到适用于 Mac 的 UILocalizedIndexedCollat​​ion。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:20:37.937

Checkout`NoodleIPhoneTableView`和`JAListView`，都在 GitHub 上可用：

*   [https://github.com/MrNoodle/NoodleKit/](https://github.com/MrNoodle/NoodleKit/)
*   [https://github.com/joshaber/JAListView/](https://github.com/joshaber/JAListView/)

截图：

![面条IPhoneTableView](../Images/c90887aa926b94d50435f90547c40181.png)

![JAListView](../Images/ddbc959f034ceb0ec177d802f67fecff.png)

# android - android清单中的权限名称不区分大小写吗？

> ID：12562996
> 
> 赞同：3
> 
> 时间：2012-09-24T10:17:58.227
> 
> 标签：android, android-manifest, android-permissions

我正在开发一款分析 android 应用程序的软件。在查看结果时，我发现几个开发人员的权限大小写不一，例如`ACCESS_iNTERNET`

权限处理不区分大小写吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:12:13.137

它们区分大小写。没有记录，但我试过了。

无论如何，`android.permission.ACCESS_INTERNET`或者`android.permission.ACCESS_iNTERNET`不会改变任何东西，因为正确的名称是`android.permission.INTERNET`. [http://developer.android.com/reference/android/Manifest.permission.html#INTERNET](http://developer.android.com/reference/android/Manifest.permission.html#INTERNET)

# javascript - Socket.io TypeError：this.transport 未定义

> ID：12562997
> 
> 赞同：1
> 
> 时间：2012-09-24T10:18:10.317
> 
> 标签：javascript, node.js, socket.io

我在我的网站上添加了用户端错误日志记录。有时它会记录来自 socket.io 代码的这种错误：

```
TypeError: this.transport is undefined 
```

只有在 Windows 上使用 Firefox 15th 版本的用户才能看到该错误。

在服务器端，我这样定义我的传输：

```
this.io.configure(function(){
    self.io.set('transports', ['websocket', 'flashsocket', 'htmlfile', 'xhr-polling', 'jsonp-polling']);
    self.io.set('log level', 0);
}); 
```

Socket.io 版本是 0.9.10。

你能告诉我这个错误的原因是什么吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:59:04.913

该`configure`方法用于为特定环境设置配置。您没有指定环境，因此您可以删除`configure`回调函数并简单地执行以下操作：

```
this.io.set('transports', ['websocket', 'flashsocket', 'htmlfile', 'xhr-polling', 'jsonp-polling']);
this.io.set('log level', 0); 
```

# android - 使用 webview 读取文件？

> ID：12562999
> 
> 赞同：1
> 
> 时间：2012-09-24T10:18:13.827
> 
> 标签：android, pdf

```
String googleDocsUrl = "http://docs.google.com/viewer?url="+urlPDF;
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(googleDocsUrl ), "text/html");
startActivity(intent); 
```

但它会留下当前活动并在 google doc url 中打开。我想在 webview 的当前活动中打开它。请提供建议，并在可能的情况下提供示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:19:41.787

简单地，

```
webView.loadUrl(googleDocsUrl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:23:45.190

您应该在 shouldOverrideUrlLoading 中添加类似的内容：

```
public boolean shouldOverrideUrlLoading(WebView view, String url) {

        if (url != null )) {
             view.getContext().startActivity(
                 new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
             return true;

        }
            if( url.startsWith("http://docs") || url.startsWith("https:") ) {
                 return false;

            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:11:04.770

```
 webView = (WebView) findViewById(R.id.webView_medicalpricing);

    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebViewClient(new WebViewClient() {

        public void onPageFinished(WebView view, String url) {
            if (mDialog.isShowing()) {
                mDialog.dismiss();
            }
        }

    });
    webView.loadUrl("http://www.google.com");
    return true; 
```