# StackOverflow 问答 14130000-14130999

# magento - 获取导入配置文件批次的 uRapidFlow 日志

> ID：14130001
> 
> 赞同：0
> 
> 时间：2013-01-02T22:09:04.467
> 
> 标签：magento, import

我正在使用 cron 作业运行 php 脚本来运行 uRapidFlow / RapidFlow 导入配置文件。[这](http://www.unirgy.com/wiki/urapidflow/run_scheduled)是我发现可以帮助我执行此操作的文档化代码。

我需要能够逐行运行导入的批次，并根据该行是否成功导入进行一些处理。一般来说，能够发送有关失败导入的电子邮件通知也将非常方便和有用。如果有人有任何想法，或者可以指出我正确的方向，我将不胜感激。我没有在网上看到任何文档，所以我正在浏览模块代码和数据库，试图自己弄清楚。

我正在使用 Magento EE 1.12.0.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:38:49.420

最好的选择，除非您修改 uRapidFlow 扩展（在此之前检查许可证信息）。将扩展它并使用观察到的事件。

尝试观察者：catalog_product_import_finish_before 在每个产品导入后触发。请记住，对于任何手动导入，此解决方案都将被全局触发，因此如果您构建一个小型扩展，也许可以轻松地打开和关闭。

更多可以在这里找到 Magento 的观察员：http: [//www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

请注意，由于您没有指定您使用的 Magento 版本，您必须检查您的版本是否支持该观察者。

# php - 函数内部与外部的php变量

> ID：14130002
> 
> 赞同：-1
> 
> 时间：2013-01-02T22:09:03.977
> 
> 标签：php

> **可能重复：**
> [php函数变量范围](https://stackoverflow.com/questions/5912036/php-function-variable-scope)

有什么理由我不能在函数中推送这些变量吗？如果我这样做

```
//function scraping_for_text_2
for($i=0; $i<$l; $i++) { 
echo "$contents[$i]";
echo "$fnamearray[$i].torrent";
} 
```

它回响了正确的价值

但是当我有这样的功能时

```
function scraping_for_text_2($iUrl,$iText)

$curl = curl_init();

curl_setopt($curl, CURLOPT_URL, $uploadurl);
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($curl, CURLOPT_VERBOSE, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl, CURLOPT_COOKIEFILE, 'cookies.txt');
curl_setopt($curl, CURLOPT_POST, true);
 curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); 
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE);
curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
$curlresult = curl_exec($curl);
curl_close ($curl);
                      $data = array( 

"description" => "testing",
"torrent" => "@$fnamearray[$i]",
"submit" => "Upload"
); 
```

我得到这个通知：未定义的变量：fnamearray 注意：未定义的变量：我在

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:10:44.103

在过度参与任何编程语言之前，您可能想学习一些基本概念，例如[变量作用域。](http://php.net/manual/en/language.variables.scope.php)

在这种情况下，您的变量根本没有在函数内部定义。

# wpf - WPF 绑定嵌套对象

> ID：14130004
> 
> 赞同：3
> 
> 时间：2013-01-02T22:09:13.963
> 
> 标签：wpf, object, binding, nested

我对 WPF 非常陌生，并且在将***请求***对象与从 WSDL 派生的嵌套对象绑定到 XAML 文本框时遇到了困难。以编程方式，我能够绑定到文本框，但我想了解通过 XAML 绑定所需的语法。一旦我有了一些方向，研究一个完整的解决方案就会变得容易得多。谢谢

ResultSet 和消息对象将始终为 [0]。

# 代码

```
MainWindow()
{
    InitializeComponent();
    GetMarketingMessagesResponse request = new GetMarketingMessagesResponse();
    request = (GetMarketingMessagesResponse)XMLSerializerHelper.Load(request, @"C:\SSAResponse.xml");
    DataContext = request;
    Binding bind = new Binding();
    bind.Source = request.ResultSet[0].Message[0];
    bind.Path = new PropertyPath("SubjectName");
    this.txtbSubject.SetBinding(TextBox.TextProperty, bind);
 } 
```

Visual Studio Watch 中的返回值***bind.Source = request.ResultSet[0].Message[0];*** 是 bind.Source = {GetMarketingMessagesResponseResultSetMessage} 这是类名。

# XAML

我正在寻找如何绑定到这个类和里面的属性的方向

```
<TextBox Name="txtbMessageDetails" HorizontalAlignment="Right" Margin="0,50.08,8,0"    TextWrapping="Wrap" Text="{Binding Source=ResultSet[0].Message[0], Path=SubjectName}" VerticalAlignment="Top" Height="87.96" Width="287.942"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:19:47.237

您已经将*请求*对象放入 DataContext 中，使其成为所有绑定的默认*Source*。因此，您无需指定另一个 Source（它只会覆盖 DataContext），而是使用绑定的 Path 从 DataContext 到您需要的属性：

```
<TextBox Name="txtbMessageDetails" Text="{Binding Path=ResultSet[0].Message[0].SubjectName}" /> 
```

这是一篇解释 DataContext 如何工作的文章，以及它是如何在您的窗口中从控件“继承”到控件的：http: [//www.codeproject.com/Articles/321899/DataContext-in-WPF](http://www.codeproject.com/Articles/321899/DataContext-in-WPF)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:19:22.263

使用将接收请求并提取消息的**[转换器。](http://wpftutorial.net/ValueConverters.html)**

```
<Window.Resources>
    <local:MessageExtractorConverter x:Key="messageExtractorConverter" />
</Window.Resources>

<TextBox Name="txtbMessageDetails" HorizontalAlignment="Right" Margin="0,50.08,8,0"    TextWrapping="Wrap" Text="{Binding Converter={StaticResource messageExtractorConverter}" VerticalAlignment="Top" Height="87.96" Width="287.942"/> 
```

转换器实现：

```
public class MessageExtractorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var val = value as GetMarketingMessagesResponse;
        if (val != null)
        {
            // You can modify this code to extract whatever you want...
            return val.ResultSet[0].Message[0];
        }
        else
        {
            return null;
        }
   } 
```

# java - 创建图像模型

> ID：14130010
> 
> 赞同：2
> 
> 时间：2013-01-02T22:09:55.833
> 
> 标签：java, python, image, image-recognition

我正在开发可以检测字母的图像识别软件。我想知道如何创建一个字母模型（例如“J”），这样当我拍摄带有字母“J”的照片时，软件会将图像与模型进行比较并检测字母“J” ”。我将如何创建模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:25:07.313

看来您想做 OCR（光学字符识别）。

如果这只是较大项目的一部分，请尝试使用 OpenCV。即使您正在制作商业产品，它也具有许可的 BSD 许可证。

如果您已经着手建立自己的图书馆，请阅读一些可以通过任何好的搜索引擎获得的论文。有很多机器学习和神经网络教程，可以生成你想要的图像模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:16:49.527

您可以使用 Java 的 OpenCv 库，该库包含已经实现的模板匹配模型，但图像识别更好的是使用学习机或神经网络

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:31:02.510

如果我要这样做，我会使用标准化浮点数。

字母 A 将是：[(0.0,0.0),(0.5,1.0),(1.0,0.0),(0.1,0.5)(0.9,0.5)]

更新（进一步解释）

所以我的想法是你应该能够用一组标准化点唯一地识别一个字母。点将位于字母的重要特征处，例如线的开始、结束和中点。曲线将被分割成多个较小的线段，这些线段也将由点表示。

要使用此模型，将对源图像进行分析。然后，您将分析图像中的文本。您可以使用边缘检测和其他方法来查找文本。您还必须分析文本上的任何转换。弄清楚文本的变换后，将文本拆分为字符，然后分析字符的重要特征点。然后，您将编写一个算法来对点进行归一化，并确定哪个模型最准确地代表找到的点。

# sql - 从子表创建值数组

> ID：14130011
> 
> 赞同：0
> 
> 时间：2013-01-02T22:09:58.310
> 
> 标签：sql, arrays, postgresql, join, plpgsql

例如，我有表`users`（id、name、email）。有表`photos`（id，值） 有一个表`userphotos`，由关系组成：user_id，photo_id。

我需要一个函数来以这种方式获取所有用户的照片：

> 1.  id1 姓名1 电子邮件1 照片1
> 2.  id2 姓名2 电子邮件2 照片2

等等

用户的照片数量未知。

如何创建 plpgsql 函数来创建这样的结果？

```
CREATE OR REPLACE FUNCTION test_function()
  RETURNS TABLE(id int, name character varying, email character varying,  photos int[]) AS $
DECLARE
    u RECORD;
BEGIN
    FOR u IN SELECT * FROM users LOOP
        return NEXT u; -- will return user without photos
    -- but how to populate u with photos as array
    -- got from query:
    --          SELECT photo_id FROM userphotos WHERE user_id = u.id
    END LOOP;
END;
$ LANGUAGE plpgsql 
```

PostgreSQL 版本。9.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:24:15.903

可能看起来像这样：

```
CREATE OR REPLACE FUNCTION test_function()
  RETURNS TABLE(id int, name varchar, email varchar, photos int[]) AS
$func$
BEGIN

RETURN QUERY
SELECT u.id, u.name, u.email, array_agg(up.photo_id)  -- AS photo_ids
FROM   users u
LEFT   JOIN userphotos up ON  up.user_id = u.id
GROUP  BY u.int, u.name, u.email;

END
$func$ LANGUAGE plpgsql 
```

*   使用正确的引用。阅读有关[美元报价](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)的手册。
*   [`RETURN QUERY`](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)用作从 plpgsql 函数返回行的最简单方法。没有`LOOP`必要。
*   其中`LEFT JOIN`包括根本没有照片的用户。
*   小心命名冲突。子句中的所有`OUT`参数在`RETURNS TABLE`正文中随处可见。

* * *

### 评论后补充

如果你想加入*多个*1:n 表，你不能一次加入它们。这就是会发生的事情：
[https ://stackoverflow.com/a/12464135/939860](https://stackoverflow.com/a/12464135/939860)

另一个与此问题的解决方案密切相关的答案：
[https ://stackoverflow.com/a/14110017/939860](https://stackoverflow.com/a/14110017/939860)

# tortoisesvn - Tortoise SVN 移动文件但没有冲突

> ID：14130014
> 
> 赞同：0
> 
> 时间：2013-01-02T22:10:08.560
> 
> 标签：tortoisesvn

那么我有以下情况：

*   带有文件“foo.h”的树干
*   从主干创建一个新分支
*   分支被修改并提交
    *   在提交中，“foo.h”使用右键单击拖动移动到“bar/foo.h”，移动版本
*   修改“foo.h”并将更改提交到主干
*   将主干与分支合并
    *   与“foo.h”没有冲突，因为它不存在（在合并中被删除）
    *   “bar/foo.h”没有改变

我注意到移动命令只是一个删除/添加，真的没有移动功能吗？这是 move 的预期行为吗？有什么办法可以告诉 TortoiseSVN，嘿嘿这里有冲突需要解决！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:00:11.700

创建分支时，虽然分支的内容与主干共享历史，但它们是不同的对象。

如果 foo.h 在分支之后但合并之前在主干中更改，则可能会触发冲突或其他警告（我没有亲自检查过）。

如果您先将分支合并回主干，则移动应记录在主干上。

移动不是简单的删除/添加 - 它是*带有历史记录*的添加，然后是删除。重命名是一样的（事实上，它们是同义词——一个是另一个的别名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:33:59.843

是的，根据[TortoiseSVN](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-rename.html#tsvn-dug-rename-move)指南，没有真正的移动功能。因此，这种行为是正常的。

# while-loop - while(true)、转义条件和阻塞方法

> ID：14130016
> 
> 赞同：0
> 
> 时间：2013-01-02T22:10:16.460
> 
> 标签：while-loop, blocking

我遇到了将 while() 循环与阻塞方法结合起来的问题。为了便于查看，我使用了 while(true) + 转义条件。

```
while(true)
{
    //this is my blocking method 
    BlockingMethod();

    //do other things here

    //escape condition to get out of the loop
    if(escape_condition) { break; }

} 
```

我担心的是，一旦线程进入 while() 循环，它就会卡在阻塞方法上，并且永远不会到达转义条件才能退出。我该如何处理？

另外，我相信我的代码与此等效，对吗？

```
while(!escape_condition)
{
    //this is my blocking method 
    BlockingMethod();

    //do other things here

} 
```

或者线程会在满足入口条件的情况下被阻塞方法卡住，永远不会出去？（这将需要在循环内实现转义条件。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:21:01.750

我认为 BlockingMethod 是您无法控制的东西？即，您不能更改函数以获取超时值，以便它不会永远阻塞？

如果没有，并且您不想在那里冻结，那么您应该考虑将 BlockingMethod() 调用旋转到一个单独的线程中。然后你可以修改你的while循环来检查线程是否仍在运行，如果你需要休眠，如果你的情况花费太长时间，那么终止线程并退出。

# c# - 覆盖 Telerik 关闭按钮

> ID：14130019
> 
> 赞同：3
> 
> 时间：2013-01-02T22:10:23.743
> 
> 标签：c#, wpf, xaml, telerik, styles

我在码头上有一个 Telerik 关闭按钮，我想覆盖它的样式，以允许用户选择他们想要关闭的内容。

以 Notepad++ 为例。有一个“关闭”和一个“关闭所有但这个”选项。

这正是我想要用这个 Telerik radDock 关闭按钮做的事情。

我对此进行了研究，但找不到任何足以让我真正入门的有用信息。我刚开始使用 WPF（实际上是 C#），因此任何有用的建议、代码或示例项目都将不胜感激。提前谢谢你。

Metro Smurf，它与此时的教程非常相似。我对 WPF 和 C# 还很陌生，所以请客气，哈哈。

这是我的 XAML：

```
<Window x:Class="RadDockCloseButton1.MainWindow"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
                xmlns:local="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls.Docking"
                Title="MainWindow" Height="350" Width="525">

<Window.Resources>
    <DataTemplate x:Key="ContextMenuTemplate">
        <telerik:RadContextMenu InheritDataContext="False">
            <telerik:RadMenuItem
                IsChecked="{Binding IsFloatingOnly}"
                Command="telerik:RadDockingCommands.Floating"
                CommandParameter="{Binding}"
                CommandTarget="{Binding}"
                Header="{Binding Command.Text, RelativeSource={RelativeSource Self}}"/>

            <telerik:RadMenuItem
                IsChecked="{Binding IsDockableOptionChecked}"
                Command="telerik:RadDockingCommands.Dockable"
                CommandParameter="{Binding}"
                CommandTarget="{Binding}"
                Header="{Binding Command.Text, RelativeSource={RelativeSource Self}}" />

            <telerik:RadMenuItem
                Command="local:RadDockingCommands.CloseAllButThisCommand"
                CommandParameter="{Binding}"
                CommandTarget="{Binding}"
                Header="{Binding Command.Text, RelativeSource={RelativeSource Self}}" />

        </telerik:RadContextMenu>
    </DataTemplate>

    <Style TargetType="telerik:RadPane">
        <Setter Property="ContextMenuTemplate" Value="{StaticResource ContextMenuTemplate}" />
    </Style>

</Window.Resources>

<Grid>
    <telerik:RadDocking x:Name="radDocking">
        <telerik:RadDocking.DocumentHost>
            <telerik:RadSplitContainer>
                <telerik:RadPaneGroup x:Name="radPaneGroup">
                    <telerik:RadPane TitleTemplate="{StaticResource ContextMenuTemplate}" Title="Pane 1">
                        <TextBlock Text="Some simple text here"/>
                    </telerik:RadPane>
                </telerik:RadPaneGroup>
            </telerik:RadSplitContainer>
        </telerik:RadDocking.DocumentHost>
    </telerik:RadDocking>

</Grid>

</Window> 
```

这是我的 C#：

```
using System.Windows;

namespace RadDockCloseButton1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        public static class RadDockingCommands
        {
            private static RoutedUICommand closeAllPanesButThisCommand;

            public static RoutedUICommand CloseAllPanesButThisCommand
            {
                get
                {
                    if (closeAllPanesButThisCommand == null)
                    {
                        closeAllPanesButThisCommand = new RoutedUICommand("Close all panes but this", "CloseAllPanesButThisCommand", typeof(RadDockingCommands));
                    }

                    return closeAllPanesButThisCommand;
                }
            }

            public static void OnCloseAllPanesButThis(object sender, ExecutedRoutedEventArgs e)
            {
                var pane = e.Parameter as RadPane;
                if (pane != null)
                {
                    var paneGroup = pane.PaneGroup;
                    if (paneGroup != null)
                    {
                        var panesToClose = paneGroup.EnumeratePanes().Where(x => !x.IsHidden && x.IsPinned);
                        foreach (var paneToClose in panesToClose)
                        {
                            if (paneToClose != pane)
                            {
                                paneToClose.IsHidden = true;
                            }
                        }
                    }
                }
            }

            public static void OnCloseAllPanesButThisCanExecute(object sender, CanExecuteRoutedEventArgs e)
            {
                e.CanExecute = false;
                var paneGroup = sender as RadPaneGroup;
                if (paneGroup != null)
                {
                    int childrenCount = paneGroup.EnumeratePanes().Count(x => !x.IsHidden && x.IsPinned);

                    if (childrenCount > 1)
                    {
                        e.CanExecute = true;
                    }
                    else
                    {
                        e.CanExecute = false;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:55:36.317

我正在添加带有完整代码示例的第二个答案。请注意，此示例的全部内容直接取自[Telerik How to Customize or Remove the RadPane's Menu](http://www.telerik.com/help/wpf/raddocking-how-to-add-menu-items-to-the-radpanes-menu.html)。我只是将各个片段中的片段拼凑在一起。换句话说，这是 Telerik 教程中的 OOB 实现。

**XAML**

```
<Window x:Class="so.Tel.RadPaneCloseAll.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:so.Tel.RadPaneCloseAll"
        xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
        Title="MainWindow"
        Width="525"
        Height="350"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <DataTemplate x:Key="ContextMenuTemplate">
            <telerik:RadContextMenu InheritDataContext="False">
                <telerik:RadMenuItem Command="telerik:RadDockingCommands.Floating"
                                     CommandParameter="{Binding}"
                                     CommandTarget="{Binding}"
                                     Header="{Binding Command.Text,
                                                      RelativeSource={RelativeSource Self}}"
                                     IsChecked="{Binding IsFloatingOnly}" />

                <telerik:RadMenuItem Command="telerik:RadDockingCommands.Dockable"
                                     CommandParameter="{Binding}"
                                     CommandTarget="{Binding}"
                                     Header="{Binding Command.Text,
                                                      RelativeSource={RelativeSource Self}}"
                                     IsChecked="{Binding IsDockableOptionChecked}" />

                <telerik:RadMenuItem Command="local:RadDockingCommands.CloseAllPanesButThisCommand"
                                     CommandParameter="{Binding}"
                                     CommandTarget="{Binding}"
                                     Header="{Binding Command.Text,
                                                      RelativeSource={RelativeSource Self}}" />
            </telerik:RadContextMenu>
        </DataTemplate>

        <Style TargetType="telerik:RadPane">
            <Setter Property="ContextMenuTemplate" Value="{StaticResource ContextMenuTemplate}" />
        </Style>
    </Window.Resources>
    <Grid>

        <telerik:RadDocking>
            <telerik:RadDocking.DocumentHost>
                <telerik:RadSplitContainer>
                    <telerik:RadPaneGroup>
                        <telerik:RadPane Header="Pane 1" />
                        <telerik:RadPane Header="Pane 2" />
                        <telerik:RadPane Header="Pane 3" />
                        <telerik:RadPane Header="Pane 4" />
                        <telerik:RadPane Header="Pane 5" />
                    </telerik:RadPaneGroup>
                </telerik:RadSplitContainer>
            </telerik:RadDocking.DocumentHost>
        </telerik:RadDocking>

    </Grid>
</Window> 
```

**代码背后**

```
using System.Linq;
using System.Windows;
using System.Windows.Input;
using Telerik.Windows.Controls;

namespace so.Tel.RadPaneCloseAll
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            CommandManager.RegisterClassCommandBinding(
                typeof( RadPaneGroup ),
                new CommandBinding(
                        RadDockingCommands.CloseAllPanesButThisCommand,
                        RadDockingCommands.OnCloseAllPanesButThis,
                        RadDockingCommands.OnCloseAllPanesButThisCanExecute ) );
        }
    }

    public static class RadDockingCommands
    {
        private static RoutedUICommand closeAllPanesButThisCommand;

        public static RoutedUICommand CloseAllPanesButThisCommand
        {
            get
            {
                if( closeAllPanesButThisCommand == null )
                {
                    closeAllPanesButThisCommand = new RoutedUICommand( "Close all panes but this",
                                                                       "CloseAllPanesButThisCommand",
                                                                       typeof( RadDockingCommands ) );
                }
                return closeAllPanesButThisCommand;
            }
        }

        public static void OnCloseAllPanesButThis( object sender, ExecutedRoutedEventArgs e )
        {
            var pane = e.Parameter as RadPane;
            if( pane != null )
            {
                var paneGroup = pane.PaneGroup;
                if( paneGroup != null )
                {
                    var panesToClose = paneGroup.EnumeratePanes().Where( x => !x.IsHidden && x.IsPinned );
                    foreach( var paneToClose in panesToClose )
                    {
                        if( paneToClose != pane )
                        {
                            paneToClose.IsHidden = true;
                        }
                    }
                }
            }
        }

        public static void OnCloseAllPanesButThisCanExecute( object sender, CanExecuteRoutedEventArgs e )
        {
            e.CanExecute = false;
            var paneGroup = sender as RadPaneGroup;
            if( paneGroup != null )
            {
                int childrenCount = paneGroup.EnumeratePanes().Count( x => !x.IsHidden && x.IsPinned );

                if( childrenCount > 1 )
                {
                    e.CanExecute = true;
                }
                else
                {
                    e.CanExecute = false;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:35:56.350

根据您的代码，您就快到了。

```
<Window x:Class="RadDockCloseButton1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
        xmlns:local="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls.Docking"
        Title="MainWindow" Height="350" Width="525"> 
```

应该是（注意`local`命名空间）：

```
<Window x:Class="RadDockCloseButton1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
        xmlns:local="clr-namespace:RadDockCloseButton1"
        Title="MainWindow" Height="350" Width="525"> 
```

`local`命名空间是指哪个类具有自定义命令。在本例中，您已将该类添加到`RadDockCloseButton1`命名空间。

在构造函数中注册命令：

```
public MainWindow()
{
    InitializeComponent();

    CommandManager.RegisterClassCommandBinding(
    typeof( RadPaneGroup ),
    new CommandBinding(
        RadDockingCommands.CloseAllPanesButThisCommand,
        RadDockingCommands.OnCloseAllPanesButThis,
        RadDockingCommands.OnCloseAllPanesButThisCanExecute ) );
} 
```

并移动`public static class RadDockingCommands`该类，使其不嵌套在`MainWindow`. IE

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        CommandManager.RegisterClassCommandBinding(
                typeof( RadPaneGroup ),
                new CommandBinding(
                        RadDockingCommands.CloseAllPanesButThisCommand,
                        RadDockingCommands.OnCloseAllPanesButThis,
                        RadDockingCommands.OnCloseAllPanesButThisCanExecute ) );
    }
}

public static class RadDockingCommands
{
    private static RoutedUICommand closeAllPanesButThisCommand;

    // etc...
} 
```

最后，用几个窗格进行测试。向您的示例添加额外的窗格，或者只使用它：

```
<telerik:RadDocking>
    <telerik:RadDocking.DocumentHost>
        <telerik:RadSplitContainer>
            <telerik:RadPaneGroup>
                <telerik:RadPane Header="Pane 1" />
                <telerik:RadPane Header="Pane 2" />
                <telerik:RadPane Header="Pane 3" />
                <telerik:RadPane Header="Pane 4" />
                <telerik:RadPane Header="Pane 5" />
            </telerik:RadPaneGroup>
        </telerik:RadSplitContainer>
    </telerik:RadDocking.DocumentHost>
</telerik:RadDocking> 
```

如果这仍然不适合您，我将发布整个工作示例。

# java - JPA 持久化具有一对多关系的实体

> ID：14130041
> 
> 赞同：12
> 
> 时间：2013-01-02T22:11:30.907
> 
> 标签：java, jpa, netbeans, persistence

配置

*   EcliplseLink 2.3.2
*   JPA 2.0
*   实体是从 netbeans 的 db 模式自动创建的，带有*来自数据库的实体类...*向导。
*   *控制器类是使用来自实体类的 JPA 控制器类*的 netbeans 自动创建的...向导

**问题的简短版本**

在经典场景中，两个表具有一对多关系。我创建父实体，然后创建子实体，并将子实体附加到父实体的集合中。当我*创建*（控制器方法）父实体时，我希望子实体被创建并与父实体相关联。为什么不发生？

**长版**

家长班

```
@Entity
@XmlRootElement
public class Device implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    private Integer id;
    @Column(unique=true)
    private String name;
    @Temporal(TemporalType.TIMESTAMP)
    private Date updated;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "deviceId")
    private Collection<NetworkInterface> networkInterfaceCollection;

    public Device() {
    }

    public Device(String name) {
        this.name = name;
        updated = new Date();
    }

    // setters and getters...

    @XmlTransient
    public Collection<NetworkInterface> getNetworkInterfaceCollection() {
        return networkInterfaceCollection;
    }

    public void setNetworkInterfaceCollection(Collection<NetworkInterface> networkInterfaceCollection) {
        this.networkInterfaceCollection = networkInterfaceCollection;
    }

    public void addNetworkInterface(NetworkInterface net) {
        this.networkInterfaceCollection.add(net);
    }

    public void removeNetworkInterface(NetworkInterface net) {
        this.networkInterfaceCollection.remove(net);
    }
    // other methods
} 
```

儿童班

```
@Entity
@Table(name = "NETWORK_INTERFACE")
@XmlRootElement
public class NetworkInterface implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    private Integer id;
    private String name;
    @Temporal(TemporalType.TIMESTAMP)
    private Date updated;
    @JoinColumn(name = "DEVICE_ID", referencedColumnName = "ID")
    @ManyToOne(optional = false)
    private Device deviceId;

    public NetworkInterface() {
    }

    public NetworkInterface(String name) {
        this.name = name;
        this.updated = new Date();
    }

    // setter and getter methods...

    public Device getDeviceId() {
        return deviceId;
    }

    public void setDeviceId(Device deviceId) {
        this.deviceId = deviceId;
    }
} 
```

主班

```
public class Main {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("wifi-dbPU");
        DeviceJpaController deviceController = new DeviceJpaController(emf);
        NetworkInterfaceJpaController netController = new NetworkInterfaceJpaController(emf);

        Device device = new Device("laptop");
        NetworkInterface net = new NetworkInterface("eth0");

        device.getNetworkInterfaceCollection().add(net);
        deviceController.create(device);
    }
} 
```

此类在行中抛出 NullPointerException：`device.getNetworkInterfaceCollection().add(net);`

系统知道有一个新实体`device`，并且它的集合中有一个元素`net`。我希望它写入`device`数据库，获取设备的 ID，将其附加到`net`数据库中并将其写入数据库。

而不是这个，我发现这些是我必须做的步骤：

```
deviceController.create(device);
net.setDeviceId(device);
device.getNetworkInterfaceCollection().add(net);
netController.create(net); 
```

**当父类知道它是孩子并且应该为我创建它时，为什么我必须创建孩子？**

DeviceJpaController 中的 create 方法（对不起，字段中的长名称，它们是自动生成的）。

```
public EntityManager getEntityManager() {
    return emf.createEntityManager();
}

public void create(Device device) {
    if (device.getNetworkInterfaceCollection() == null) {
        device.setNetworkInterfaceCollection(new ArrayList<NetworkInterface>());
    }
    EntityManager em = null;
    try {
        em = getEntityManager();
        em.getTransaction().begin();
        Collection<NetworkInterface> attachedNetworkInterfaceCollection = new ArrayList<NetworkInterface>();
        for (NetworkInterface networkInterfaceCollectionNetworkInterfaceToAttach : device.getNetworkInterfaceCollection()) {
            networkInterfaceCollectionNetworkInterfaceToAttach = em.getReference(networkInterfaceCollectionNetworkInterfaceToAttach.getClass(), networkInterfaceCollectionNetworkInterfaceToAttach.getId());
            attachedNetworkInterfaceCollection.add(networkInterfaceCollectionNetworkInterfaceToAttach);
        }
        device.setNetworkInterfaceCollection(attachedNetworkInterfaceCollection);
        em.persist(device);
        for (NetworkInterface networkInterfaceCollectionNetworkInterface : device.getNetworkInterfaceCollection()) {
            Device oldDeviceIdOfNetworkInterfaceCollectionNetworkInterface = networkInterfaceCollectionNetworkInterface.getDeviceId();
            networkInterfaceCollectionNetworkInterface.setDeviceId(device);
            networkInterfaceCollectionNetworkInterface = em.merge(networkInterfaceCollectionNetworkInterface);
            if (oldDeviceIdOfNetworkInterfaceCollectionNetworkInterface != null) {
                oldDeviceIdOfNetworkInterfaceCollectionNetworkInterface.getNetworkInterfaceCollection().remove(networkInterfaceCollectionNetworkInterface);
                oldDeviceIdOfNetworkInterfaceCollectionNetworkInterface = em.merge(oldDeviceIdOfNetworkInterfaceCollectionNetworkInterface);
            }
        }
        em.getTransaction().commit();
    } finally {
        if (em != null) {
            em.close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-04T08:01:56.530

我终于明白了坚持一对多实体背后的逻辑。过程是：

1.  创建父类
2.  坚持下去
3.  创建子类
4.  将孩子与父母联系起来
5.  Persist child（父集合更新）

带代码：

```
public class Main {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("wifi-dbPU");
        DeviceJpaController deviceController = new DeviceJpaController(emf);
        NetworkInterfaceJpaController netController = new NetworkInterfaceJpaController(emf);

        Device device = new Device("laptop");                 // 1
        deviceController.create(device);                      // 2

        NetworkInterface net = new NetworkInterface("eth0");  // 3
        net.setDeviceId(device.getId());                      // 4
        netController.create(net);                            // 5 
        // The parent collection is updated by the above create     
    }
} 
```

现在，我可以找到一个设备（例如带有 id），我可以让它的所有孩子使用

```
Collection<NetworkInterface> netCollection = device.getNetworkInterfaceCollection() 
```

在我在问题中发布的设备实体类中，不需要方法`addNetworkInterface`和`removeNetwokrInterface`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T22:37:06.317

@Dima K 的说法是正确的。当你这样做时：

```
 Device device = new Device("laptop");
    NetworkInterface net = new NetworkInterface("eth0");

    device.getNetworkInterfaceCollection().add(net);
    deviceController.create(device); 
```

设备中的集合尚未初始化，因此在尝试添加时会得到 NPE。在您的`Device`班级中，在声明您的 时`Collection`，您还可以对其进行初始化：

```
private Collection<NetworkInterface> networkInterfaceCollection = new CollectionType<>(); 
```

至于坚持，你的假设是正确的，但我认为执行是错误的。创建设备时，立即使用 JPA 使其持久化（在需要的地方进行事务管理）。

```
Device device = new Device("laptop");
getEntityManager().persist(device); 
```

对 NetworkInterface 执行相同操作：

```
NetworkInterface net = new NetworkInterface("eth0");
getEntityManager().persist(net); 
```

现在，由于您的两个实体都是持久的，您可以将一个添加到另一个。

`device.getNetworkInterfaceCollection().add(net);`

JPA 应该负责其余的工作，而您不必调用任何其他持久性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T22:18:25.897

这是集合数据成员的已知行为。最简单的解决方案是修改您的集合吸气剂以延迟创建集合。

```
@XmlTransient
public Collection<NetworkInterface> getNetworkInterfaceCollection() {
    if (networkInterfaceCollection == null) {
        networkInterfaceCollection = new Some_Collection_Type<NetworkInterface>();
    }
    return networkInterfaceCollection;
} 
```

此外，请记住仅通过 getter 方法引用此数据成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T22:42:14.727

此异常意味着您正在尝试定位尚未持久化的实体（可能通过 em.getReference()）。您不能在仍然没有 PK 的实体上使用 em.getReference() 或 em.find()。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-07-19T09:08:24.887

为了启用 @OneToMany 关系的保存功能，例如

```
@OneToMany(mappedBy="myTable", cascade=CascadeType.ALL) 
private List<item> items; 
```

然后你必须告诉你的 @ManyToOne 关系，它可以像这样更新 myTable 可更新 = true

```
@ManyToOne @JoinColumn(name="fk_myTable", nullable = false, updatable = true, insertable = true) 
```

# css - 纵向媒体查询解析错误 - wordpress

> ID：14130043
> 
> 赞同：1
> 
> 时间：2013-01-02T22:11:35.240
> 
> 标签：css, wordpress, media-queries

我正在构建我的第一个响应式 Wordpress 主题，但是当我将静态 HTML 转换为主题时，我的肖像媒体查询已停止工作。奇怪的是，纵向查询作为静态站点运行良好。

这是我的代码：

```
@media all and (orientation: portrait) {

            #main {
                display: table;
                max-width: 100%;
                        }

            #content img {
                                width:100%;
                                height:auto;
                                display: table-cell;
                                vertical-align: middle
                            }

             #tabbtn {
                        width:20%;
                        min-width: 30px;
             }

} 
```

& 这是 W3C 验证检查中出现的错误：

```
Parse Error [ @media all and (orientation: portrait)] 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:51:40.483

啊，对于任何人来说 - 实际的错误是图像没有响应我的流体 CSS（由于 Wordpress 添加了固定的高度/宽度）。我以前没有意识到这一点。我认为解析错误无关紧要。

目前正在尝试使用此处的信息解决问题：http: [//www.netmagazine.com/tutorials/getting-wordpress-play-nice-responsive-images](http://www.netmagazine.com/tutorials/getting-wordpress-play-nice-responsive-images)

# android - Android 计费异常

> ID：14130044
> 
> 赞同：23
> 
> 时间：2013-01-02T22:11:38.970
> 
> 标签：android, android-billing

我正在测试我的帐单，我得到了这个例外：

```
java.lang.IllegalStateException: Can't start async operation (launchPurchaseFlow) because another async operation(launchPurchaseFlow) is in progress.
        at utils.IabHelper.flagStartAsync(IabHelper.java:711)
        at utils.IabHelper.launchPurchaseFlow(IabHelper.java:316)
        at utils.IabHelper.launchPurchaseFlow(IabHelper.java:294)
        at com.problemio.SubscribeIntroActivity$6.onClick(SubscribeIntroActivity.java:117)
        at android.view.View.performClick(View.java:2532)
        at android.view.View$PerformClick.run(View.java:9308)
        at android.os.Handler.handleCallback(Handler.java:587)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:150)
        at android.app.ActivityThread.main(ActivityThread.java:4293)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        at dalvik.system.NativeStart.main(Native Method) 
```

在我运行这段代码之后：

```
 Button subscribe = (Button)findViewById(R.id.subscribe);
    subscribe.setOnClickListener(new Button.OnClickListener() 
    {  
       public void onClick(View v) 
       {              
           // FIRST CHECK IF THE USER IS ALREADY A SUBSCRIBER.
          mHelper.launchPurchaseFlow(SubscribeIntroActivity.this, SUBSCRIBE_SKU, RC_REQUEST, mPurchaseFinishedListener);

       }
    }); 
```

但在此之前，我以测试用户身份运行它，测试产品 id 是这样的：android.test.purchased 并且它有效。但是，当我将产品 ID 更改为我自己的产品 ID 之一时，它崩溃了，但出现了上述异常。

任何想法为什么会这样？谢谢！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-02T22:18:33.307

IabHelper 一次只允许执行一个异步查询。您需要实现`onActivityResult()`并将参数传递到`handleActivityResult()`IabHelper 的方法中。

应用内计费示例代码实现的方法如下：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.d(TAG, "onActivityResult(" + requestCode + "," + resultCode + "," + data);

    // Pass on the activity result to the helper for handling
    if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
        // not handled, so handle it ourselves (here's where you'd
        // perform any handling of activity results not related to in-app
        // billing...
        super.onActivityResult(requestCode, resultCode, data);
    }
    else {
        Log.d(TAG, "onActivityResult handled by IABUtil.");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-24T23:08:51.603

以防万一有人像我一样为了树木而错过森林......

我`java.lang.IllegalStateException`在 Play 开发者控制台中收到了一个堆栈跟踪，它提供的只是错误消息......所以我被难住了。

起初我无法弄清楚这是怎么发生的，因为我从没想过要尝试点击两次触发 IAB 的按钮！（第一次点击后它看起来被禁用了，因为我们可以点击覆盖，[有时]）。

因此，请确保您的用户不能点击您的按钮两次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-14T19:06:10.703

您正在使用 google 的示例代码，并且在 IabHelper 类第 793 行中有这段代码

```
 if (mAsyncInProgress) throw new IllegalStateException("Can't start async operation (" +
            operation + ") because another async operation(" + mAsyncOperation + ") is in       progress."); 
```

当您第一次购买时，“mAsyncInProgress”变为真，直到您没有消费您的购买它仍然是真实的，所以您需要消费您的购买。我建议你完整阅读 util 包中的所有类，它会对你有所帮助。

成功购买后，您需要消费它

```
mHelper.consumeAsync(purchase, mConsumeFinishedListener) 
```

但有时消费请求会失败，因此您需要在每次创建活动时处理您的购买：

```
mHelper.queryInventoryAsync(mGotInventoryListener); 
```

并尝试在 mGotInventoryListener 回调中消耗您的购买。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-27T20:37:05.550

在此处获取最新版本的库：[https](https://code.google.com/p/marketbilling/source/browse/) ://code.google.com/p/marketbilling/source/browse/他们在那里解决了问题

# search - 谷歌高级搜索

> ID：14130057
> 
> 赞同：0
> 
> 时间：2013-01-02T22:12:48.840
> 
> 标签：search

是否可以同时在谷歌搜索中使用 site: 和 allintitle: ？我想在 Google 返回的页面标题中查找包含各种搜索词的结果，但仅限于特定站点。我知道如何做任何一个但不能同时做，并且在网上找不到任何东西？所有帮助都向您展示了如何分别进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:43:38.303

否 - 该`allintitle`运算符**不能**与其他运算符一起使用。您可以改为使用多个`intitle`运算符。

有关谷歌搜索的更多信息： [http ://en.wikipedia.org/wiki/Google_hacking](http://en.wikipedia.org/wiki/Google_hacking)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T18:26:27.013

虽然 allintitle:, allinurl, allintext:, & allinanchor: 是独占的，但您可以在同一个查询中使用多个 intitle: & site: 过滤器来实现与将它们与其他过滤器组合起来几乎相同的结果，例如，

*   标题：（狗屋）（网站：cnn.com | 网站：*.gov）
*   intitle:((cat | dog*) AROUND() people) (site:cnn.com | site:*.gov)

# ruby-on-rails - 将设计模块包含在 Rails 之外定义的用户模型中

> ID：14130058
> 
> 赞同：1
> 
> 时间：2013-01-02T22:12:49.840
> 
> 标签：ruby-on-rails, ruby, rspec, devise

我正在使用 Rails 2.3 和 Devise 1.0.11。由于我是 Rails 新手，请原谅任何明显的错误。

User 模型定义在 Rails 之外的一个文件夹中（名为“Common”），它在不同的组件之间共享，Rails 就是其中之一。我在 User 模型中包含了设计模块，如下所示：

```
class User < ActiverRecord::Base
  devise :database_authenticable, :recoverable, :rememberable, :trackable
  attr_accessible :email, :password, :password_confirmation
end 
```

在 Rails 应用程序中，Devise 工作正常。

问题是当我尝试从 Common 文件夹运行 rspec 测试时，我得到`undefined method 'devise'`. 我已经从[这个问题尝试过](https://stackoverflow.com/questions/10654469/undefined-method-devise-when-including-user-model-outside-rails)[这个答案](https://stackoverflow.com/a/10656659/1943995)，但它对我不起作用。我明白了。当我得到. 我猜它需要 Rails 环境中的一些东西，但不确定到底是什么。`uninitialized constant ActionController``require 'action_controller'``uninitialized constant Rails`

我还尝试通过`devise_extension.rb`文件包含设计模块，`config/initializers`以便根本不必从 Common 调用设计。

```
 class User
      devise :database_authenticable, :recoverable, :rememberable, :trackable
    end 
```

这似乎可以解决问题，直到我调用`:password`一个视图并且我`undefined method 'password'`清楚地知道我在那里也遗漏了一些东西。

不知道从这里去哪里，但任何帮助表示赞赏。

# asp.net - 使用在类文件中选择新的 linq to sql

> ID：14130059
> 
> 赞同：-1
> 
> 时间：2013-01-02T22:12:50.717
> 
> 标签：asp.net, linq-to-sql

我通常使用带有***IQueryable***或***IEnumerable***的 linq to sql来获取如下数据：

```
 public static IQueryable getSomething() 
    {
        var getit = from d in database.table select d;

        return getit;
    } 
```

它工作正常，但我试图像这样使用 select new ：

```
 public static IQueryable getSomething() 
    {
       var getit = from d in database.table select new 
       { 
          value1 = d.1,
          value2 = d.2
       };

    return getit;
} 
```

> 这是一个示例代码，而不是实际代码。

但这不起作用，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:24:21.793

您不能在 C# 中将任何方法键入为匿名类型的显式类型。可以说它们不能被“命名”，因此不能出现在元数据签名中。

[https://stackoverflow.com/a/1070564/971839](https://stackoverflow.com/a/1070564/971839)

首先，您需要创建一个类，例如，

```
public class MyClass
    {

        public string Property1{get;set;}
        public string Property2{ get; set; }
    } 
```

然后将您的方法替换为，

```
public static IEnumerable<MyClass> getSomething() 
        {
           var getit = from d in database.table select new 
          MyClass  { 
              Property1 = d.1,
              Property2 = d.2
                   };

        return getit;
    } 
```

# caching - 文件读取和缓存

> ID：14130062
> 
> 赞同：-1
> 
> 时间：2013-01-02T22:13:06.003
> 
> 标签：caching, memory, file-io, filesystems

当使用 Java（或任何语言）读取文件时，数据是否从磁盘复制到应用程序级缓冲区之外的内存？例如，当我执行以下操作时，会生成多少个数据副本：

```
FileInputStream fileReader = new FileInputStream(new File("/path/to/file"));
byte[] buffer = new byte[4096];
fileReader.read(buffer); 
```

除了从磁盘写入缓冲区的数据副本之外，数据是否也被操作系统或文件系统缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:24:05.410

### 简答

也许

### 长答案

这取决于操作系统和文件系统选择从磁盘或类似磁盘的设备读取时创建任何特定数据的多少副本。所有现代桌面文件系统都有一个读/写缓冲区，用于在应用程序级别和物理设备级别之间缓存数据。移动设备和嵌入式设备通常没有这一层，因为它们写入的是基于内存的设备，而不是物理旋转磁盘。

*我认为随着 SSD 设备变得更大、更便宜，桌面设备上的这种缓存级别会变得更小，或者完全消失，因为 SSD 设备没有与旋转磁盘相同的速度问题。它们仍然比主内存慢，但它们不应该需要由于旋转媒体的缓慢访问速度而进行的积极缓存。*

# javascript - 当应用大约一半透明度的 alpha 时，我将使用什么代码来获取颜色的值？

> ID：14130070
> 
> 赞同：0
> 
> 时间：2013-01-02T22:13:55.353
> 
> 标签：javascript, actionscript-3, colors, hex

> **可能重复：**
> [当应用大约一半透明度的 alpha 时，我将使用什么代码来获取颜色的十六进制值？](https://stackoverflow.com/questions/14127060/what-code-would-i-use-to-get-the-hex-value-of-a-color-when-an-alpha-at-about-hal)

如果我有一个视觉元素（可以是带有颜色填充的文本或 div，没关系）并且颜色设置为黑色**0x000000**，并且它的 alpha 设置为**.4**或**.5**并且背景是纯**白色****0xFFFFFF**，结果将是灰色。我们可以在 Photoshop 中进行测试。

我想知道的是我将使用什么代码来获得该结果？

我正在寻找诸如方程式之类的东西：

```
newColor = foregroundColor * alpha * backgroundColor 
```

或者类似 JavaScript、ActionScript 或 VBScript 中的内容：

```
var color:uint = (0x888888 * .5) * 0x000000; 
```

解决这个问题的部分困难是对十六进制以及它与颜色的关系缺乏充分的理解，无法自行解决。

**更新**
根据下面的答案，我想出了这个：

```
// set values
var topColorValue:uint = 0x000000;
var topColorAlphaValue:Number = .5;
var bottomColorValue:uint = 0xFFFFFF;

// get RGB
var redMix:int = ((topColorValue >> 16) & 0xFF);
var greenMix:int = ((topColorValue >> 8) & 0xFF);
var blueMix:int = (topColorValue & 0xFF);

// apply alpha to top color
if (alphaValue<1) {
    var colorPlusAlpha:uint = combineRGB((redMix * (1-alphaValue)), (greenMix*(1-alphaValue)), (blueMix * (1-alphaValue)));
}
else {
    colorPlusAlpha = topColorValue;
}

redMix = ((bottomColorValue >> 16) & 0xFF);
greenMix = ((bottomColorValue >> 8) & 0xFF);
blueMix = (bottomColorValue & 0xFF);

var secondColorPlusAlpha:uint = combineRGB((redMix * (alphaValue)), (greenMix*(alphaValue)), (blueMix * (alphaValue)));

var firstColorPlusSecondColor:uint = colorPlusAlpha + secondColorPlusAlpha; 
```

上述解决方案的问题在于它偏离了 1。如果顶部颜色为**0x999999**且 alpha 为**0.5**且底部颜色为**0xFFFFFF**则结果为**0xCBCBCB**。在 Photoshop 中获取该像素或使用滴管时，该值为**0xCCCCCC**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:19:56.463

IIU alpha 通道的功能正确，它给出了之前颜色和现在添加的颜色之间的混合分数。这意味着：

```
colorVisible=colorNew*(1-alpha)+colorOld*alpha 
```

粗略的健全性检查：

*   `alpha=0%`给出`colorVisible=colorNew`听起来不错
*   `alpha=100%=1`听起来`colorVisible=colorOld`也不错

# unit-testing - 如何在某个文件夹下运行测试？

> ID：14130071
> 
> 赞同：4
> 
> 时间：2013-01-02T22:14:07.350
> 
> 标签：unit-testing, visual-studio-2012

我希望能够在如下文件夹结构下运行所有​​测试。我想运行的“测试”下的任何内容。这可能吗？

我们的项目中有许多其他测试尚未维护。我们正在将测试迁移到这个新的测试文件夹中。

测试类别会起作用吗？

![文件夹中的嵌套测试](../Images/68339bfaa1e0b11567e9330d678b4ac9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:27:32.717

从 VS2012 SP1 开始，有新的测试过滤器。您可以使用它们来运行测试。

![测试过滤器](../Images/2134819bec3ce94dfddb18e5f3020ca2.png)

当然，您也可以为此使用类别：您只需要标记每个测试类。

# cloud-foundry - Cloudfoundry 中是否有不同的环境（Dev、Stage、Production）模式？

> ID：14130075
> 
> 赞同：0
> 
> 时间：2013-01-02T22:14:41.557
> 
> 标签：cloud-foundry

Cloudfoundry 中是否有不同的环境（Dev、Stage、Production）模式？最近我通过 STS CloudFoundry 插件将我的 Spring MVC 应用程序从本地设置移动到 CloudFoundry 设置（只需单击一下即可公开，很棒的功能）。

是否有任何环境模式，即 Dev、Stage 模式，以便我将我的应用程序部署在 Dev 和 Stage env 中？因此测试人员将在那里完成工作，开发人员将开发新功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:48:43.223

Cloud Foundry 中没有强烈的“环境”概念，但在即将发布的版本中将有一个*空间*概念，可用于该目的（和其他用途）。您可以在此处阅读更多信息：http: [//blog.cloudfoundry.org/2012/06/20/heads-up-on-some-new-cloud-controller-features/](http://blog.cloudfoundry.org/2012/06/20/heads-up-on-some-new-cloud-controller-features/)

目前，您可以在 Cloud Foundry 帐户范围内多次部署您的应用程序，为其赋予不同的名称（以及相应的 URL），或者如果您想限制谁可以做什么，您可以使用不同的帐户

# ios - 在 TabBarViewController 的选项卡之间传递数据

> ID：14130076
> 
> 赞同：2
> 
> 时间：2013-01-02T22:14:44.427
> 
> 标签：ios, uitabbarcontroller, storyboard

我有一个基于 UITabBarController 的应用程序，我想将数据从一个视图传递到另一个视图。我在情节提要中执行此操作，并且在将其带入主应用程序之前进行了一些测试。

我现在只是用一个 NSString 来尝试这个。

当我使用以下代码使用模态转换时，我能够将数据传递给有问题的 VC：

```
NSString *sendingString = @"This string has some content";    
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
NextViewController *nVC = (NextViewController *)[storyboard instantiateViewControllerWithIdentifier:@"goToNextVC"];

nVC.receivingString = sendingString;
[self presentViewController:nVC animated:YES completion:nil]; 
```

现在，这会将 VC 向上推并按我的意愿传递，但不是向上推 VC，而是希望它被推到另一个标签栏。

现在我可以使用以下代码轻弹到所需的 TabBar：

```
self.tabBarController.selectedIndex = 1; 
```

我卡住的地方是，我如何向这个 ViewController 发送数据？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:18:35.793

您可以子类化您的`TabBarController`，并为其添加一个属性，或者创建一个单例（例如 DataManager），您的所有人`ViewControllers`都可以访问它。您可以将数据传递给它。

# objective-c - Objective C 如何检查对象是否被选中？

> ID：14130078
> 
> 赞同：0
> 
> 时间：2013-01-02T22:14:58.737
> 
> 标签：objective-c, if-statement

我正在尝试编写一个 if 语句来检查一个对象数组以查看某个对象是否存在（在这种情况下，我的数组中的单词“NBC”，“channel”）。我是新手，我不确定如何在目标 c 中做到这一点。请看下面我的代码：

```
if ([[self.channel objectAtIndex:path.row] containsObject: @"NBC"]) 

{
//Arguments
} 
```

在我运行它之后，模拟器崩溃并出现此错误：2013-01-02 17:11:44.778 Master Detail Practice App[50056:207] -[__NSCFConstantString containsObject:]: unrecognized selector sent to instance 0xc698

我知道我的语法或逻辑可能是错误的。任何帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:16:55.257

`[self.channel objectAtIndex:path.row]`正在向您返回一个`NSString`对象。然后，您尝试向该`NSString`实例发送一条`containsObject:`消息，但它不知道如何处理。也许你的意思是：

```
[self.channel objectAtIndex:path.row] isEqualToString:@"NBC"] 
```

或者

```
[self.channel containsObject:@"NBC"] 
```

但是没有更多的上下文，很难说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:18:08.100

看来您是从数组中提取字符串，而不是检查数组中的字符串。尝试像这样重写您的代码：

```
if ([self.channel containsObject: @"NBC"]) {
   //Arguments
} 
```

# javascript - javascript splice() 奇函数

> ID：14130079
> 
> 赞同：0
> 
> 时间：2013-01-02T22:14:59.880
> 
> 标签：javascript, splice

我喜欢做递归脚本，比如：

```
var slask="http://www.vskg.se/a-konstnarer/kn_1180/t_bild1.jpg?1357162516228";
slask.split("/").splice(3,50).join("/"); 
```

删除`http://www.vskg.se/`，这将返回：

```
/a-konstnarer/kn_1180/t_bild1.jpg?1357162516228 
```

如我所愿！为什么这很奇怪？因为`splice()`应该删除从 3 到 50 的所有项目，但它所做的是返回从 3 到 50 的所有项目。这是正常的，还是仅在 OSX 的 Opera、Safari 和 Chrome 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:20:51.817

`splice`从原始数组中删除项目并返回它们。

如果您在`slask`运行此代码后查看，您会看到它是“已删除”的部分。

实际上，您实际上是从 URL 中删除路径并返回它。

非破坏性的替代方案是`slice`.

另外，请注意第二个参数是可选的。您不必将其设置为很高的数字。

```
slask.split("/").slice(3).join("/"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:24:54.290

splice 删除和添加项目到数组：

```
var leftovers = array.splice(index,howmany,item1,.....,itemX) 
```

其中 index 是起点 `howmany`是要删除的数量（如果有的话）剩余的参数注入在给定`index`

`array`now 是从剩余参数中添加任何项目减去 . 指定的删除项目的结果`howmany`。 `leftovers`如果howmany大于零，就是你拼接取出的物品。

所以：

```
var arr = ["one","two","three"];
var removed = arr.splice(1,1,"green");

removed >> ["two"] 
arr >> ["one","green","three"] 
```

# f# - single 和 double 不能用 Measure 增加

> ID：14130080
> 
> 赞同：4
> 
> 时间：2013-01-02T22:15:11.477
> 
> 标签：f#, units-of-measurement

有谁知道为什么 [<Measure>] 类型只增加了一些代数类型？这么多有用的类型不能用 Measure 来扩充，这对我来说很奇怪。

```
type FooType =
| FooByte       of byte<1>          // Error
| FooSbyte      of sbyte<1>         // Ok
| FooInt16      of int16<1>         // Ok
| FooUint16     of uint16<1>        // Error
| FooInt        of int<1>           // Ok
| FooInt32      of uint32<1>        // Error
| FooInt64      of int64<1>         // Ok
| FooUint64     of uint64<1>        // Error
| FooNativeint  of nativeint<1>     // Error
| FooUnativeint of unativeint<1>    // Error
| FooChar       of char<1>          // Error
| FooDecimal    of decimal<1>       // Ok
| FooFloat32    of float32<1>       // Ok
| FooSingle     of single<1>        // Error
| FooFLoat      of float<1>         // Ok
| FooDouble     of double<1>        // Error 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T22:23:49.047

好吧，这里有两个不同的问题：

1.  似乎无符号类型无法通过设计进行注释。我不确定这是为什么，但是如果您尝试类似`let _ = 1u<1>`.
2.  由于类型同义词的工作方式，您只能使用具有“真实”类型的度量，而不能使用它们的同义词。这就是为什么您可以使用带有`float32`和的度量`float`，但不能使用`single`和`double`。请注意，同样如此`int32`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T22:37:58.910

根据规范，只有以下文字类型可以有度量

```
 sbyte < measure-literal > //signed byte
  int16 < measure-literal >
  int32 < measure-literal >
  int64 < measure-literal >
  ieee32 < measure-literal > //float32
  ieee64 < measure-literal > //float
  decimal < measure-literal > 
```

所以这就是无符号类型没有度量类型的原因。此外，从物理角度来看，几乎任何带有单位的数量都可以是负数，所以这似乎是一个合理的选择。

其余部分不起作用的原因来自规范：

```
The F# core library defines the following types:

type float<[<Measure>] 'U>
type float32<[<Measure>] 'U>
type decimal<[<Measure>] 'U>
type int<[<Measure>] 'U>
type sbyte<[<Measure>] 'U>
type int16<[<Measure>] 'U>
type int64<[<Measure>] 'U> 
```

这就是为什么你不能这样做`single<1>`，因为没有相关的类型。

# jquery - jquery自定义滚动条

> ID：14130081
> 
> 赞同：0
> 
> 时间：2013-01-02T22:15:21.903
> 
> 标签：jquery, jquery-ui

所以我试图用 div 复制浏览器滚动条的行为，到目前为止我一无所获，首先让我们看看我的代码[**jsFiddle**](http://jsfiddle.net/aUuBk/)和这里​​的实际代码：

```
(function( $ ) {
    $.widget( "ui.slider", $.ui.mouse,{

    _create: function() {
        this._mouseInit();
    },

    _mouseDrag: function(e) {
        mouseOffset = (e.offsetY / this.element.height()) * 100;
        handleOffset = (e.target.offsetTop / this.element.height()) * 100;

        $(".handle").css("top", (mouseOffset - handleOffset) + "%");        
    }

    });

}( jQuery ) ); 
```

如您所见，我正在使用 jquery 小部件来捕获鼠标事件，并且您可以使用当前代码看到它在 jsFiddle 中变得疯狂，我想要实现的是无论您单击滚动条并开始拖动该条都会跟着鼠标走，不要跳下或上跳或跳到中间等等，基本上它应该像在浏览器中一样工作，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:22:26.867

只是出于好奇，实现滚动条比仅处理内容滚动需要付出更多的努力。

jQuery的[滚动条插件对](http://manos.malihu.gr/jquery-custom-content-scroller/)你更有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T14:37:24.280

这个也很好用：

[https://github.com/mzubala/jquery-custom-scrollbar](https://github.com/mzubala/jquery-custom-scrollbar)

并且安装非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:06:51.360

这是一个很好的滚动条，可以很好地与 DIV 标签配合使用。您可以自定义任何您想要的方式，包括您自己的图形和颜色、尺寸等等。它对我有用，但它是有代价的。

请访问： [www.sa-wired.com/scrollbar/plugins.php](http://sa-wired.com/scrollbar/plugins.php)

祝你好运。

# wordpress - 自定义wordpress评论css类

> ID：14130085
> 
> 赞同：0
> 
> 时间：2013-01-02T22:15:47.253
> 
> 标签：wordpress, class, function, filter

有没有办法将自定义类添加到作为父评论的“回复评论”的评论中？

*注意：我的模板使用 'max_depth' => '1'。

输出代码：

```
<div>
  <div class="comment-1"></div> // comment 1
    <div class="comment-2"></div> // reply 1
    <div class="comment-3"></a functiondiv> // reply 2
  <div class="comment-4"> // comment 2
</div> 
```

我需要一个回复类，如：

```
<div>
  <div class="comment-1"></div> // comment 1
    <div class="comment-2" class="reply"></div> // reply 1
    <div class="comment-3" class="reply"></div> // reply 2
  <div class="comment-4"> // comment 2
</div> 
```

过滤器还是函数？

**编辑：**
循环评论的代码是：

1.  在`comments.php`
    wp_list_comments(array('style' => 'div', 'type' => 'comment', 'max_depth' => '1' , 'callback' => 'comments_template'));

2.  在`functions.php`
    [http://pastebin.com/4T5DiZY4](http://pastebin.com/4T5DiZY4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:04:21.440

该函数[`comment_class()`](http://codex.wordpress.org/comment_class)有一个同名的过滤器[`comment_class`](http://adambrown.info/p/wp_hooks/hook/comment_class?version=3.4&file=wp-includes/comment-template.php)

```
function parent_comment_SE_14130085($classes, $class, $comment_id, $post_id) {
    $cur_comment = get_comment($comment_id);

    if ( ! empty( $cur_comment->comment_parent ) ) {
        $classes[] = 'nested';
    }
    return $classes;
}
add_filter('comment_class', 'parent_comment_SE_14130085', 10, 4); 
```

# oauth-2.0 - 尝试下载文件时出现 Google Drive API 401

> ID：14130088
> 
> 赞同：0
> 
> 时间：2013-01-02T22:15:53.327
> 
> 标签：oauth-2.0, google-drive-api, google-oauth, google-api-php-client

我正在使用[google-api-php-client](http://code.google.com/p/google-api-php-client/)获取我的 Google Drive 上文档的 URL。当我将 URL 粘贴到浏览器中时，该 URL 可以正常工作，并且可以下载该文件。

但是，在我的 PHP 应用程序中，我总是得到 401。这是我的代码：

```
private function _get_document_contents($url)
{
    // prepare opts
    $opts = array(
        'http' => array(
            'method' => 'GET',
            'header' => "Gdata-version: 3.0\r\nAuthorization: Bearer " . $this->_token . "\r\n"
        )
    );

    // get the doc
    return file_get_contents($url . '&exportFormat=html&format=html', false, stream_context_create($opts));
} 
```

我尝试更改`Bearer`为`OAuth`（这就是 OAuth 2.0 游乐场使用的），但都失败了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:24:45.373

啊，问题似乎是我正在使用旧的 Google Docs API，应该迁移到 Google Drive SDK。哦！

# python - 从字典中制作重叠字典

> ID：14130089
> 
> 赞同：0
> 
> 时间：2013-01-02T22:15:57.327
> 
> 标签：python

这个问题在逗我：

我有 6 个不同的序列，每个序列都重叠，它们的名称为 1-6。我制作了一个表示字典中序列的函数，以及一个给出重叠部分序列的函数。

现在我应该使用这两个函数来构建一个字典，该字典以从右到左的顺序和从左到右的顺序获取重叠位置的数量。

我制作的字典看起来像：

```
{'1': 'GGCTCCCCACGGGGTACCCATAACTTGACAGTAGATCTCGTCCAGACCCCTAGC',
 '2': 'CTTTACCCGGAAGAGCGGGACGCTGCCCTGCGCGATTCCAGGCTCCCCACGGG',
 '3': 'GTCTTCAGTAGAAAATTGTTTTTTTCTTCCAAGAGGTCGGAGTCGTGAACACATCAGT',
 '4': 'TGCGAGGGAAGTGAAGTATTTGACCCTTTACCCGGAAGAGCG',
 '5': 'CGATTCCAGGCTCCCCACGGGGTACCCATAACTTGACAGTAGATCTC',
 '6': 'TGACAGTAGATCTCGTCCAGACCCCTAGCTGGTACGTCTTCAGTAGAAAATTGTTTTTTTCTTCCAAGAGGTCGGAGT'} 
```

我最终应该得到如下结果：

```
{'1': {'3': 0, '2': 1, '5': 1, '4': 0, '6': 29},
'3': {'1': 0, '2': 0, '5': 0, '4': 1, '6': 1},
'2': {'1': 13, '3': 1, '5': 21, '4': 0, '6': 0},
'5': {'1': 39, '3': 0, '2': 1, '4': 0, '6': 14},
'4': {'1': 1, '3': 1, '2': 17, '5': 2, '6': 0},
'6': {'1': 0, '3': 43, '2': 0, '5': 0, '4': 1}} 
```

我似乎不可能。我想不是，所以如果有人可以（不这样做）但将我推向正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:26:15.143

这有点复杂，但它应该可以工作。用作`find_overlaps()`发现重叠的函数和`seq_dict`序列的原始字典：

```
overlaps = {seq:{other_seq:find_overlaps(seq_dict[seq],seq_dict[other_seq])
    for other_seq in seq_dict if other_seq != seq} for seq in seq_dict} 
```

这是一个更好的间距：

```
overlaps = \
{seq:
    {other_seq:
        find_overlaps(seq_dict[seq],seq_dict[other_seq])
    for other_seq in seq_dict if other_seq != seq}
for seq in seq_dict} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:38:07.683

干净的方式：

```
dna = {
    '1': 'GGCTCCCCACGGGGTACCCATAACTTGACAGTAGATCTCGTCCAGACCCCTAGC',
    '2': 'CTTTACCCGGAAGAGCGGGACGCTGCCCTGCGCGATTCCAGGCTCCCCACGGG',
    '3': 'GTCTTCAGTAGAAAATTGTTTTTTTCTTCCAAGAGGTCGGAGTCGTGAACACATCAGT',
    '4': 'TGCGAGGGAAGTGAAGTATTTGACCCTTTACCCGGAAGAGCG',
    '5': 'CGATTCCAGGCTCCCCACGGGGTACCCATAACTTGACAGTAGATCTC',
    '6': 'TGACAGTAGATCTCGTCCAGACCCCTAGCTGGTACGTCTTCAGTAGAAAATTG' \
         'TTTTTTTCTTCCAAGAGGTCGGAGT'
}

def overlap(a, b):
    l = min(len(a), len(b))
    while True:
        if a[-l:] == b[:l] or l == 0:
            return l
        l -= 1

def all_overlaps(d):
    result = {}
    for k1, v1 in d.items():
        overlaps = {}
        for k2, v2 in d.items():
            if k1 == k2:
                continue
            overlaps[k2] = overlap(v1, v2)
        result[k1] = overlaps
    return result

print all_overlaps(dna) 
```

（顺便说一句，您本可以`overlap`在问题中提供自己，以使每个人都更容易回答。）

# bash - Bash/Shell - 带有空格的路径搞砸了

> ID：14130093
> 
> 赞同：3
> 
> 时间：2013-01-02T22:16:08.223
> 
> 标签：bash, awk, find

我有一个 bash/shell 函数，它应该查找文件，然后 awk/将它找到的第一个文件复制到另一个目录。不幸的是，如果包含 的目录`file`名称中有空格，那么整个事情都会失败，因为它会出于某种原因截断路径。我如何解决它？

如果 file.txt 在 /path/to/search/中，**空格是错误的**/ 它会失败。

```
dir=/path/to/destination/ | find /path/to/search -name file.txt | head -n 1 | awk -v dir="$dir" '{printf "cp \"%s\" \"%s\"\n", $1, dir}' | sh

cp: /path/to/search/spaces: No such file or directory 
```

*如果 file.txt 位于 /path/to/search/ **spacesarebad** / 它可以工作，但请注意没有空格。：-/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:18:53.307

awk 的默认分隔符是空格。只需通过执行以下操作将其更改为其他内容：

```
awk -F"\t" ... 
```

您的脚本应如下所示：

```
dir=/path/to/destination/ | find /path/to/search -name file.txt | head -n 1 | awk -F"\t" -v dir="$dir" '{printf "cp \"%s\" \"%s\"\n", $1, dir}' | sh 
```

正如评论所指出的，您实际上并不需要所有这些步骤，您实际上可以简单地执行（单行）：

```
dir=/path/to/destination/ && path="$(find /path/to/search -name file.txt | head -n 1)" && cp "$path" "$dir" 
```

格式化代码（可能看起来更好，在这种情况下^^）：

```
dir=/path/to/destination/
path="$(find /path/to/search -name file.txt | head -n 1)"
cp "$path" "$dir" 
```

`""`用于将字符串的全部内容分配给变量，导致默认情况下为空格的分隔符不`IFS`被考虑在字符串上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T22:37:26.133

如果您认为空格不好，请等到换行遇到麻烦。考虑例如：

```
mkdir spaces\ are\ bad
touch spaces\ are\ bad/file.txt
mkdir newlines$'\n'are$'\n'even$'\n'worse
touch newlines$'\n'are$'\n'even$'\n'worse/file.txt 
```

和：

```
find . -name file.txt 
```

head 命令采用换行符分隔符。您可以通过使用分隔符来解决 GNU find 和 GNU grep（可能是其他）的空格和换行问题`\0`：

```
find . -name file.txt -print0 | grep -zm1 . | xargs -0 cp -t "$dir" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-06T06:53:01.563

你可以试试这个。

```
awk '{print substr($0, index($0,$9))}' 
```

例如，这是 ls 命令的输出：

-rw-r--r--。1 根 73834496 12 月 6 日 10:55 带空格的文件 2

如果你像这样使用简单的 awk

```
# awk '{print $9}' 
```

它只返回

```
# File 
```

如果与完整命令一起使用

```
# awk '{print substr($0, index($0,$9))}' 
```

我得到了整个输出

# 带空格的文件 2

这里 substr(s, a, b) ：它从字符串 s 返回 b 个字符，从位置 a 开始。参数 b 是可选的。

例如，如果匹配是 addr:192.168.1.133 并且您使用 substr 如下

```
# awk '{print substr($2,6)}' 
```

你得到 IP 即 192.168.1.133。注意 6 是从 a in addr 开始的字符

因此，在正确的命令中， $2 是 $0 （打印整行。）并且 index($0,$9) 匹配 $9 并打印第 9 列之前的所有内容。您可以将其更改为 index($0,$8) 并查看输出更改到

```
# 10:55 File with spaces 2 
```

`index(IN, FIND)' 这会在字符串 IN 中搜索字符串 FIND 的第一次出现，并返回该出现在字符串 IN 中的开始位置（以字符为单位）。

我希望它有所帮助。此外，如果您将此值分配给脚本中的变量，则需要将变量括在双引号中。否则，如果您对提取的文件名执行其他操作，您将收到错误。

# javascript - 如何测试一个数组是否是另一个数组的子集？

> ID：14130104
> 
> 赞同：36
> 
> 时间：2013-01-02T22:17:33.407
> 
> 标签：javascript, underscore.js

提供这种逻辑的最佳（最干净）方式是什么？

```
var colors = ["red","white","blue"];

logic(colors,["red","green"]); //false
logic(colors,["red"]); //true
logic(colors,["red","purple"]); //false
logic(colors,["red","white"]); //true
logic(colors,["red","white","blue"]); //true
logic(colors,["red","white","blue","green"]); //false
logic(colors,["orange"]); //false 
```

可能使用[underscore.js](http://underscorejs.org/)吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-02T22:21:18.333

假设数组中的每个元素都是唯一的：将 的长度`hand`与两个数组的交集的长度进行比较。如果它们相同，则 in 中的所有元素`hand`也在`colors`.

```
var result = (hand.length === _.intersection(hand, colors).length); 
```

[**演示**](http://jsfiddle.net/GXGun/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-02T22:20:03.890

也许[差异](http://underscorejs.org/#difference)是您正在寻找的：

```
_(hand).difference(colors).length === 0 
```

# java - 空速测试，意外结果

> ID：14130107
> 
> 赞同：1
> 
> 时间：2013-01-02T22:17:51.033
> 
> 标签：java, testing

为什么这段代码

```
 long s, e, sum1 = 0, sum2 = 0, TRIALS = 10000000;

    for(long i=0; i<TRIALS; i++) {
        s = System.nanoTime();
        e = System.nanoTime();
        sum1 += e - s;            
        s = System.nanoTime();
        e = System.nanoTime();
        sum2 += e - s;
    }        
    System.out.println(sum1 / TRIALS);
    System.out.println(sum2 / TRIALS); 
```

产生这个结果

```
-60  
61 
```

“在我的机器上？”

编辑：
[我是 Sam 的回答](https://stackoverflow.com/a/14130190/1907998)指向 nanoSecond() 文档，该文档有帮助，但现在，更准确地说，为什么结果始终有利于第一个总和？

“我的机器”：
JavaSE-1.7、Eclipse
Win 7 x64、AMD Athlon II X4 635

在循环内切换顺序会产生相反的结果

```
for(int i=0; i<TRIALS; i++) {            
    s = System.nanoTime();
    e = System.nanoTime();
    sum2 += e - s;            
    s = System.nanoTime();
    e = System.nanoTime();
    sum1 += e - s;
}  
61
-61 
```

在将其添加到 sum1 之前查看 (es) 会使 sum1 为正。

```
for(long i=0; i<TRIALS; i++) {
    s = System.nanoTime();
    e = System.nanoTime();
    temp = e-s;
    if(temp < 0)
        count++;
    sum1 += temp;

    s = System.nanoTime();
    e = System.nanoTime();
    sum2 += e - s;
}
61  
61 
```

正如 Andrew Alcock 指出的那样， sum1 += -s + e 产生了预期的结果。

```
for(long i=0; i<TRIALS; i++) {
    s = System.nanoTime();
    e = System.nanoTime();
    sum1 += -s + e;

    s = System.nanoTime();
    e = System.nanoTime();
    sum2 += -s + e;
}
61
61 
```

其他一些测试： http: [//pastebin.com/QJ93NZxP](http://pastebin.com/QJ93NZxP)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:39:48.967

这个答案是假设。如果您使用有关您的环境的一些详细信息更新您的问题，那么其他人可能会给出更详细、更扎实的答案。

该`nanoTime()`功能通过访问一些具有低访问延迟的高分辨率计时器来工作。在 x86 上，我相信这是[Time Stamp Counter](http://en.wikipedia.org/wiki/Time_Stamp_Counter)，它由机器的基本时钟周期驱动。

如果您看到 +/- 60 ns 的一致结果，那么我相信您只是看到了机器上计时器的基本间隔。

但是，负数呢？再次假设，但如果您阅读 Wikipedia 文章，您会看到英特尔处理器可能会重新排序指令的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:07:44.170

结合 roundar，我们对这段代码进行了许多测试。总之，在以下情况下效果消失了：

1.  在解释模式下运行相同的代码 (-Xint)
2.  将聚合逻辑*顺序*从更改`sum += e - s`为`sum += -s + e`
3.  在一些不同的架构或不同的虚拟机上运行（例如，我在 Mac 上的 Java 6 上运行）
4.  放置日志语句检查 s 和 e
5.  对 s 和 e 执行附加算术

另外，效果不是线程：

1.  没有产生额外的线程
2.  只涉及局部变量
3.  这种效果在 roundar 环境中是 100% 可重现的，并且总是产生完全相同的时序，即 +61 和 -61。

效果不是时间问题，因为：

1.  执行超过 10m 次迭代
2.  这种效果在圆形环境中是 100% 可重现的
3.  结果在所有迭代中都是完全相同的时间，即 +61 和 -61。

鉴于上述情况，我相信我们在 Java VM 的热点模块中存在错误。编写的代码*应该*返回积极的结果，但没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:23:32.667

直接来自[oracle 的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#nanoTime%28%29)

简而言之：更新值的频率可能会导致结果不同。

> 纳米时间
> 
> 公共静态长纳米时间（）
> 
> 返回最精确的可用系统计时器的当前值，以纳秒为单位。
> 
> 此方法只能用于测量经过的时间，与系统或挂钟时间的任何其他概念无关。
> 
> 返回的值表示自某个固定但任意时间以来的纳秒（可能在将来，因此值可能为负数）。此方法提供纳秒精度，但不一定提供纳秒精度。不保证值的变化频率。由于数值溢出，超过大约 292 年（263 纳秒）的连续调用的差异将无法准确计算经过的时间。
> 
> ```
> For example, to measure how long some code takes to execute:
> 
>    long startTime = System.nanoTime();
>    // ... the code being measured ...
>    long estimatedTime = System.nanoTime() - startTime;
>  
> 
> Returns:
>     The current value of the system timer, in nanoseconds.
> Since:
>     1.5 
> ```

# fips - 满足 FISMA/其他联邦信息系统要求的散列算法

> ID：14130110
> 
> 赞同：4
> 
> 时间：2013-01-02T22:18:02.843
> 
> 标签：fips

我在一个必须满足启用 FIPS 的系统的 FISMA 要求的组织中工作。我正在尝试做的一件事是为我们的密码实现哈希算法。我对此有很多选择：SHA-2、MD5、bcrypt（使用 Blowfish）、RIPE 等。

阅读各种 NIST 出版物，FISMA 没有说我必须使用特定的算法来满足他们的要求。

但是，FIPS 180-4 指定根据 FISMA 认为哪种哈希算法是安全的，即 SHA-1 到 SHA-512/256。NIST SP 800-132 也推荐使用 PBKDS2。

这是否意味着：a）。我必须使用 SHA 作为哈希算法才能通过 FISMA 审核/要求？

...或者...

乙）。我可以使用任何算法，只要它比 SHA 更好？即不使用MD5，但bcrypt 或RIPE 是可以的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:59:49.757

两者怎么样？使用 bcrypt 对您的密码进行哈希/加盐处理，以利用其工作因素功能来提供面向未来的大规模并行蛮力攻击。然后对 bcrypt 的结果进行 SHA-512 处理并存储。

您可以从 bcrypt 获得保护，并选中 FISMA/FIPS 框，因为您正在存储使用他们接受的算法生成的哈希。

即使有人可以暴力破解 SHA-512 来查找生成与您存储在数据库中的相同哈希值的输入，该输入也不是可以将用户登录到系统的有效密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T08:24:51.843

是的，您必须使用 SHA。 [SP 800-53](http://csrc.nist.gov/publications/nistpubs/800-53-Rev3/sp800-53-rev3-final_updated-errata_05-01-2010.pdf)到处引用 FIPS 140-2，暗示您必须使用 SHA-256 或 SHA-512。（[避免使用 SHA-1](http://csrc.nist.gov/groups/ST/hash/policy.html)）。

总统办公厅的[行政部门和机构负责人备忘录](http://www.whitehouse.gov/sites/default/files/omb/assets/memoranda_2010/m10-15.pdf)中清楚地阐明了这一点：

> 11\. 是否需要使用美国国家标准与技术研究院 (NIST) 的出版物？
> 
> 是的。对于非国家安全计划和信息系统，机构必须遵循 NIST 标准和指南。**...**
> 
> 12\. NIST 指南是否灵活？
> 
> 是的。虽然机构必须按照 OMB 政策遵守 NIST 标准和指南，但 NIST 的指南（特别是 800 系列）在机构如何应用它们方面具有灵活性。**但是，联邦信息处理标准 (FIPS) 是强制性的。...**

（想想看。NIST 没有将 SHA 作为标准发布，以便您可以使用其他东西来代替......）

此外，SHA 和 Bcrypt 并没有真正的直接可比性。SHA 是一组散列算法。Bcrypt 更像是一个以 Blowfish 算法为核心生成哈希的过程。Bcrypt 的 FIPS 等价物是[PBKDF2](http://csrc.nist.gov/publications/nistpubs/800-132/nist-sp800-132.pdf)，它使用 SHA 作为其核心算法。

# java - 在后台运行活动

> ID：14130111
> 
> 赞同：0
> 
> 时间：2013-01-02T22:18:06.753
> 
> 标签：java, android

我有一个向我的数据库发送一些详细信息的活动，但是当我单击后退按钮时它会停止。是否可以让它在后台运行？我听说使用服务可以解决这个问题，但由于我所有的课程都写成活动，我想知道它是否可能。不能用 onStop 方法上的一些代码来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:25:41.847

嘿，

创建一个扩展服务的新类。添加必要的覆盖。

```
@Override
public IBinder onBind(Intent intent)
{
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    //this service will run until we stop it
            // This will execute when the service starts

    return START_STICKY; //makes it sticky to keep it on until its destroyd
}

@Override
public void onDestroy()
{
    super.onDestroy();
            // when the service is destroyd
} 
```

您可以使用以下方式启动服务：

```
stopService(new Intent(getBaseContext(), ServiceClassName.class)); 
```

您可以通过以下方式停止服务：

```
stopService(new Intent(getBaseContext(), ServiceClassName.class)); 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:23:42.047

您提到您的所有类都编写为活动，我假设这意味着您将应用程序逻辑嵌入到用户界面逻辑中。这通常不是一个好的做法——您应该尝试将特定于应用程序的代码迁移到单独的类。通过在您的用户界面之外拥有此功能，您的应用程序将在许多方面受益。

要回答您的问题，可以通过子类化让您的应用程序在后台执行功能`Service`。[在这里](http://developer.android.com/guide/components/services.html)查看一个很好的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T22:26:00.863

您必须重写 onBackPressed 方法才能执行您想要的操作。如果您想“隐藏”活动（以便用户看到它“关闭”），您可以调用[moveTaskToBack](http://developer.android.com/reference/android/app/Activity.html#moveTaskToBack%28boolean%29)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T22:24:05.093

您应该编写一个 Activity 使用意图与之通信的服务。因此，它应该将数据发送到服务以将其发送到数据库，然后服务可以通知活动。当 Activity 监听来自 Service 的事件时，您正在实现观察者模式（Java 和 Android 中的监听器以及许多其他事件处理系统）。

您也可以轮询服务，但这不是获取状态更新的首选模式。

# asp.net-mvc - 启用 windows azure 身份验证返回空名称

> ID：14130123
> 
> 赞同：0
> 
> 时间：2013-01-02T22:18:55.233
> 
> 标签：asp.net-mvc, authentication, azure

我已经下载了VS2012的秋季更新，我有一个windows Azure Active Directory账号和一个Office 365账号

如果我创建一个标准的 MVC 4.5 互联网项目，从帐户控制器中删除 [InitializeSimpleMembership] 并启用 Windows Azure 身份验证，我将完成注册过程，但是当我运行解决方案时，我在登录页面上收到错误，因为 user.identity.name 是空值。

谁能告诉我如何创建初始 MVC 项目并启用 Windows Azure 身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:59:47.663

在 Visual Studio 中，转到工具 -> 单击扩展和更新 -> 在左侧窗格中单击在线 -> 搜索身份和访问工具并安装它。或转到此链接[http://visualstudiogallery.msdn.microsoft.com/e21bf653-dfe1-4d81-b3d3-795cb104066e?SRC=VSIDE](http://visualstudiogallery.msdn.microsoft.com/e21bf653-dfe1-4d81-b3d3-795cb104066e?SRC=VSIDE)。

安装扩展程序后，当您在 VS 中右键单击您的 MVC 项目时，您将看到一个名为“Identity and Access...”的链接。单击它，它将引导您完成项目的设置。

# java - 制作一个接受某些字符的正则表达式

> ID：14130126
> 
> 赞同：-3
> 
> 时间：2013-01-02T22:19:04.727
> 
> 标签：java, regex

我正在尝试在 Java 中制作 RegEx 并测试一个单词以查看它是否包含一些字符，例如`a-z`or`A-Z`或or or or or `0-9`or `"$"`or `"_"`without the rest of the possible characters including the space。

我试过：

```
boolean test = Pattern.matches("[a-zA-Z||[_]||[$]]",wordTest); 
```

或者

```
boolean test = Pattern.matches("[a-z]|[A-Z]|\\*|_+",wordTest); 
```

所以有些词像 : `"&_bird"`，`"bi_r&"` 但不是`" bird"`，`"b ird^("`例如。

我在网上寻找解决方案已经几个小时了，但我什么也没找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:24:12.823

`boolean test = Pattern.matches("[a-zA-Z0-9_$]+", wordTest);`

# quickbooks - 在 Quickbooks Online 中访问交易

> ID：14130133
> 
> 赞同：0
> 
> 时间：2013-01-02T22:19:29.703
> 
> 标签：quickbooks, quickbooks-online

我正在尝试与 Quickbooks Online 交互，以实现一个内部应用程序，该应用程序将使用 qbXML 推送和拉取事务。我的问题是我无法弄清楚我需要发送哪条消息才能列出和添加“银行”>“注册”页面下列出的项目。我已经浏览了[Intuit Software Development Kits 的屏幕参考中](http://developer.intuit.com/qbsdk-current/common/newosr/index.html)列出的消息，但似乎没有一个提供给我这些信息。

另外，有没有人知道解释每条消息的作用的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:39:11.733

如果您在银行帐户登记簿中，则您正在写支票。QuickBooks 中有 3 种检查：

1.  费用支票 - 如果您直接在注册窗口中添加支票，您将添加费用支票。
2.  账单支付支票 - 这些出现在支票登记簿中，但您只能通过账单支付操作添加它们。
3.  工资单支票 - 这些出现在支票登记簿中，但只能使用 Intuit Payroll Service 或通过启用手动工资单添加（在实际实践中几乎没有人进行手动工资单，但最好了解一下以用于测试目的）。

前两种类型的支票有自己的消息类型：分别是 Add/Mod Check 和 Add/Mod BillPayment 消息。SDK 无法添加工资单支票。您可以使用事务查询消息查询所有 3 种类型。我还应该提到，可以使用日记条目在任何寄存器中添加条目，但这不是一个好主意，除非您确定自己知道自己在做什么。

我不想告诉你这一点，但 QuickBooks 消息的最佳参考是你已经在使用的那个。<sdk root>\docs 目录中还有描述 SDK 操作的 XML 文件。但是，从用户的角度理解 QuickBooks 的运作方式确实无可替代。

如果您要使用 QuickBooks 集成，最好与一个或多个 QuickBooks Pro 顾问交朋友，这样您就可以通过他们处理这类问题。这种关系通常是互惠互利的，因为 QuickBooks Pro 顾问经常发现访问 SDK 程序员很方便。

# spring - Spring 中的 @ManagedProperty 等效项

> ID：14130140
> 
> 赞同：1
> 
> 时间：2013-01-02T22:19:52.020
> 
> 标签：spring, jsf-2

我正在为我的 DI 使用 Spring。是否有相当于@ManagedProperty？我想将一个视图范围 bean 中的值注入到下一页上的另一个视图中。

例如

```
@Component
@Scope("view")
public class Page1Bean(){
   private String value;
}

@Component
@Scope("view")
public class Page2Bean(){
    @ManagedProperty(value = #{page1Bean}")  //doesnt work in Spring
    private Page1Bean bean;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:24:34.870

`@Resource`或者`@Autowired`应该工作。 `@Resource`是Java EE 实现，`@Autowired`是spring 特有的注解。我现在找不到参考资料，但似乎我读过一次更`@Resource`喜欢`@Autowired`.

这是我发现的一篇博客文章，讨论了`@Inject`与[http://blogs.sourceallies.com/2011/08/spring-injection-with-resource-and-autowired/#more-2350](http://blogs.sourceallies.com/2011/08/spring-injection-with-resource-and-autowired/#more-2350)`@Resource``@Autowired`

# html - 是否应该使用 IFRAME 或 IMG 在网站中插入谷歌地图

> ID：14130144
> 
> 赞同：2
> 
> 时间：2013-01-02T22:20:05.023
> 
> 标签：html, google-maps

要将地图插入我的网站，我一直在使用服务器端代码来创建类似以下内容。我以为我最初这样做是有充分理由的，但现在不记得原因了。快速搜索表明大多数解决方案都使用 IFRAME。IFRAME 解决方案是最好的方法吗，或者我的 IMG 解决方案有时更好的原因是什么？谢谢

```
<img alt="Map" src="http://maps.google.com/maps/api/staticmap?center=5th+%26+College+St%3Ch1%3EHello%3C%2Fh1%3E+SEATTLE+WA+98101&amp;zoom=14&amp;size=400x400&amp;sensor=false"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:39:15.547

使用使用[Google Maps Static Maps API](https://developers.google.com/maps/documentation/staticmaps/)的 IMG创建一个您的用户只能看到的静态图像，[例如在这个 Fiddle 中看到的](http://jsfiddle.net/8PdpS/)：

![在此处输入图像描述](../Images/eb24a502b3d615b4c59c2807e3260a6e.png)

这使用以下代码：

```
<img alt="Map" src="http://maps.google.com/maps/api/staticmap?center=5th+%26+College+St%3Ch1%3EHello%3C%2Fh1%3E+SEATTLE+WA+98101&amp;zoom=14&amp;size=400x400&amp;sensor=false">    ​ 
```

但是，当您创建一个允许用户与地图*交互*的 IFrame 时，例如平移、缩小、在“地图、周六、Ter 和地球模式”之间进行选择，如下面的[Fiddle](http://jsfiddle.net/5Ue7D/1/)所示：

![](../Images/d4ee467e23d8fe033d30730e428e3d21.png)

产生的代码：

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?f=q&amp;ie=UTF8&amp;ll=53.800651,-4.064941&amp;spn=11.629588,33.815918&amp;t=m&amp;z=6&amp;output=embed"></iframe> 
```

回顾一下，IMG 生成静态图像，而 IFrame 生成动态交互（平移、缩放等）

注意：如果您采用 IMG 方式，Google 会限制您

> 每个应用程序每天 25 000 个免费静态地图请求。

这对大多数人来说应该足够了，但知道它很有用。如果您需要更多信息，请查看 Google Maps API for Business。

# c# - 网站发布后 ReportViewer 无法正常工作

> ID：14130146
> 
> 赞同：0
> 
> 时间：2013-01-02T22:20:12.063
> 
> 标签：c#, asp.net, acumatica

问题：

我们有一个 asp.net reportviewer，它动态地将数据集分配给 .rdlc，在我的本地机器上它工作得非常好，当我们发布到网络服务器并尝试运行它时会发生错误。

错误：

```
An error occurred during local report processing.
    The report definition for report 'C:\Program Files (x86)\Acumatica ERP\WRIGHTACUMATICA\rErrorCompilation.rdlc' has not been specified
        Could not find file 'C:\Program Files (x86)\Acumatica ERP\WRIGHTACUMATICA\rErrorCompilation.rdlc'. 
```

附加信息：

错误中指定的目录不在服务器上。temp 是分配的数据集。

C＃：

```
this.rvErrorCompilation.Reset();
                    this.rvErrorCompilation.LocalReport.ReportPath = Server.MapPath("~/rErrorCompilation.rdlc");
                    ReportDataSource rds = new ReportDataSource("dsErrorCompilation", temp);
                    this.rvErrorCompilation.LocalReport.DataSources.Clear();
                    this.rvErrorCompilation.LocalReport.DataSources.Add(rds);
                    this.rvErrorCompilation.DataBind();
                    this.rvErrorCompilation.LocalReport.Refresh(); 
```

ASP.NET：

```
<rsweb:ReportViewer ID="rvErrorCompilation" runat="server" Width="100%">
            <LocalReport ReportPath="rErrorCompilation.rdlc">
            <DataSources>
                <rsweb:ReportDataSource />
            </DataSources>
        </LocalReport>
            </rsweb:ReportViewer> 
```

问题：

1.  为什么会这样？
2.  我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:35:10.383

Microsoft Visual Studio 显然没有在发布时复制 .rdlc 文件，即使已指定这样做，在手动将其移动到 Web 根目录后，它现在可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:06:38.040

尝试这个：`ReportPath="~/rErrorCompilation.rdlc"`

```
<rsweb:ReportViewer ID="rvErrorCompilation" runat="server" Width="100%">
        <LocalReport ReportPath="~/rErrorCompilation.rdlc">
        <DataSources>
            <rsweb:ReportDataSource />
        </DataSources>
    </LocalReport>
        </rsweb:ReportViewer> 
```

# php - 协助 .htaccess 文件夹重写

> ID：14130150
> 
> 赞同：2
> 
> 时间：2013-01-02T22:20:27.583
> 
> 标签：php, image, .htaccess, uploader

我想对我网站上的图像上传器进行 .htaccess 重写，但是对于我尝试过的所有教程，我无法让它工作。

目前，我将图像上传到文件夹的代码： `http://www.example.com/server/php/files/jkgh4f54.jpg`

我想重写它，所以当您访问此 URL 时：`http://www.example.com/jkgh4f54.jpg`它显示来自上述位置的图像。

有什么想法吗？正如我所提到的，到处都有很多关于类似内容的教程，但到目前为止，我还无法让它们适应我的工作。

当前的.htaccess：

```
RewriteEngine On
RewriteCond %(REQUEST_FILENAME} !-f [OR]
RewriteCond %(REQUEST_FILENAME} !-d
RewriteRule ^[a-zA-Z0-9]+\.(jpe?g|png|gif|bmp)$ /server/php/files/$0 [L]
RewriteRule ^([a-zA-Z0-9]+)$ index.php?code=$1 //For URL Shortener
ErrorDocument 404 http://localhost/site.com/404.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:34:45.693

使用此代码，当用户访问 时`http://example.com/h3h2js.jpg`，他们将看到来自 的图像`http://example.com/server/php/files/h3h2js.jpg`，但浏览器中的 URL 将保持不变：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^[a-zA-Z0-9]+\.(jpe?g|png|gif|bmp)$ /server/php/files/$0 [L] 
```

我已经在 Windows 上全新安装 XAMPP 时彻底测试了这段代码。图像名称**只能**包含任意大小写的字母数字字符（az、AZ、0-9），并且必须以 jpg、jpeg、png、gif 或 bmp 文件扩展名结尾。如果请求的图像文件已经存在于站点根目录中，则不会进行重写

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:31:30.567

尝试：

```
RewriteEngine on
RewriteRule ^(.*)\.jpg$ http://site.com/server/php/files/$1\.jpg [R=301,L] 
```

# field - 使用流口水调用方法

> ID：14130153
> 
> 赞同：0
> 
> 时间：2013-01-02T22:20:38.940
> 
> 标签：field, drools, rules

这是一个流口水的初学者问题。我查看了文档和代码示例，但仍然无法弄清楚应该做什么非常简单。

在我的 when 语句中，我有一个 HttpServletRequest 类型的变量 $servletRequest。我知道如何调用不带任何输入参数的 getter，例如 getCharacterEncoding。即，这个：

```
when
  ...
  HttpServletRequest( characterEncoding == "xxx" ) from $servletRequest
then 
```

作品。但是，我不知道如何调用需要输入参数的 getter。即，我想从我的请求中访问标题“X-REQUESTED-PAGE”，但以下内容不起作用：

```
when
  ...
  HttpServletRequest( header["X-REQUESTED-PAGE"] == "xxx" ) from $servletRequest
then 
```

它给了我一个例外：

```
org.drools.RuntimeDroolsException: Exception executing predicate header["X-REQUESTED-PAGE"] == "xxx"
    at org.drools.rule.PredicateConstraint.isAllowed(PredicateConstraint.java:279)
... 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:09:25.200

在 Drools 5.5 中，这应该有效：

```
when
  ...
  HttpServletRequest( getHeader("X-REQUESTED-PAGE").equals("xxx") ) from $servletRequest
then 
```

# c++ - 调试器如何使用 ReadProcessMemory？

> ID：14130154
> 
> 赞同：-1
> 
> 时间：2013-01-02T22:20:45.133
> 
> 标签：c++, windows, debugging, memory

据我了解，调试器使用 ReadProcessMemory（在 Windows 环境中）来读取另一个进程的内存。我想知道的是：ReadProcessMemory 将另一个进程的内存读取到缓冲区中，因此会导致开销。调试器是读取小块内存还是一次性读取整个进程的内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:32:03.837

API 不保证原子读取。最终它会复制数据（而不是通过地址映射提供对原始字节的访问），并且如果调试器仍在运行，它可能会在 API 调用正在进行时更改有问题的内存。

# javascript - 带有 RegExp 构造函数 JavaScript 的 RegExp 字符类

> ID：14130162
> 
> 赞同：0
> 
> 时间：2013-01-02T22:21:06.370
> 
> 标签：javascript, regex

我正在构建一个简单的 RegExp 助手供我个人使用。本质上，它将使用方法链接并返回包含所有选定元素的字符串。

我的问题是如何在构造函数中使用字符类`RegExp`。这是我的代码：

```
var pattern = new RegExp(this.expression.join(''), "g"); 
```

如您所见，我在第一个参数中传递了我的表达式，在第二个参数中传递了一个标志。

我的问题是，如何使用`RegExp`构造函数并将其包装在字符类中，例如`/[...]/`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:22:45.640

构造`RegExp`函数接受一个字符串，所以你可以用它做字符串的事情：

```
var pattern = new RegExp("["+this.expression.join('')+"]","g"); 
```

# php - 可比较的哈希

> ID：14130167
> 
> 赞同：2
> 
> 时间：2013-01-02T22:21:35.370
> 
> 标签：php, hash, locality-sensitive-hash

我无法回答我的问题。

我需要一种哈希方法，它会生成一个哈希值，可以与其他哈希值进行比较并找出保真度，

假设我必须有 2 个字符串，“mother”，“father”，当我比较 2 个哈希值时，它会说由于“ther”，它们之间存在保真度。

是否有任何哈希方法可以做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:26:00.997

PHP 提供了一个函数[`similar_text`](http://php.net/manual/en/function.similar-text.php)，用于计算两个字符串之间的相似度。您还可以使用该[`levenshtein`](http://php.net/manual/en/function.levenshtein.php)函数来计算两个字符串之间的距离。虽然这些不是散列函数，但我认为它们应该提供我认为您所追求的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:42:07.840

我不确定您是否正在寻找特定于 2 个单词的特定情况的答案，但肯定有哈希样式的函数可用于比较整体的各个部分。[哈希树](http://en.wikipedia.org/wiki/Hash_tree)是一种此类结构的完美示例。哈希树用于比较数据块的部分，它们聚合以比较整个数据块。

我还要注意，虽然其他人指出大多数现实世界的哈希函数不允许从输出中派生任何有关输入的信息，但他们正在谈论[Cryptographic Hash Function](http://en.wikipedia.org/wiki/Cryptographic_hash_function)。[常规散列函数](http://en.wikipedia.org/wiki/Hash_function)的保证集远没有加密散列函数严格。例如，在 Java 中，您可以`.hashCode()`为每个对象覆盖并返回 4。这是完全有效的，但不是非常有用。这是有效的，因为在一般散列函数中冲突是可以的，但在密码散列函数中它们被认为是失败的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:25:56.640

我相信 rot13，连同取出所有元音将符合条件。任何现实世界的哈希都不会。这就是重点。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-02T22:27:55.733

简而言之：这个词不能具有普遍意义

这就是为什么：

*   散列的主要功能之一是压缩 - 除了琐碎的用法（例如“母亲”和“父亲”）之外，散列总是比散列信息短。例如，作为快速检查的 SHA1（甚至 MD5），下载 600MB ISO 是否没有损坏将比文件本身短得多。
*   哈希的另一个主要功能是（非常高级的）混淆。如果不是这样，散列加盐密码将无济于事（或至少少得多）来防止字典攻击，因为相似的密码会导致相似的散列。

# ios - 像在本机应用程序中一样从 Facebook 注销

> ID：14130168
> 
> 赞同：0
> 
> 时间：2013-01-02T22:21:35.977
> 
> 标签：ios, facebook, ios6

我的应用程序支持使用 facebook 登录，但是当我注销并再次登录时，我不会被要求提供任何凭据 - 它会立即使用 iOS6 中的本机用户名登录。我想要在原生 facebook 应用程序中类似的东西： ![点击时](../Images/3a96cd5bb83c1f82e3145a4427e35686.png)

当点击“不是你”时，facebook 会提供新的登录屏幕。

我跟着这个[教程](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)

问题似乎在这里的某个地方：

```
- (void)openSession
{
    NSArray *permissions=[NSArray arrayWithObjects: @"publish_stream", @"publish_actions",@"create_event", nil];
   // [FBSession open]

    [FBSession openActiveSessionWithPublishPermissions:permissions
                                       defaultAudience:FBSessionDefaultAudienceEveryone
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {

         [self sessionStateChanged:session state:state error:error];
     }];
}

- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen: {
            NSLog(@"Sesstion opened");
            UIViewController *topViewController =
            [self.navController topViewController];
            NSLog(@"Class: %@", [[topViewController presentedViewController] class]);
            if ([[topViewController presentedViewController]
                 isKindOfClass:[LoginViewController class]])
            {
                [topViewController dismissViewControllerAnimated:YES completion:nil];
            }

                ViewController *basic=(ViewController*)topViewController;
                NSLog(@"Populating details");
                [basic populateUserDetails];

        }
            break;
        case FBSessionStateClosed:
        {
            NSLog(@"Session closed");
            [FBSession.activeSession closeAndClearTokenInformation];

        }

        case FBSessionStateClosedLoginFailed:

            NSLog(@"Login failed");
            [self.navController popToRootViewControllerAnimated:NO];

            [FBSession.activeSession closeAndClearTokenInformation];

            [self showLoginView];
            break;
        default:
            break;
    }

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:39:35.943

我不确定 Facebook SDK 是否支持——尽管我可能错了。这个想法（据我了解）是 Facebook 登录允许当前登录的 Facebook 用户登录到您的应用程序。如果没有人登录 Facebook，则会显示凭据页面。提供有效凭据后，用户将登录到 Facebook，并将 auth_token 发送到您的应用程序。

关键是您无法验证与当前登录 Facebook 的用户不同的用户。这首先需要注销当前用户，我认为 Facebook 希望将这种“更改用户”功能保留到 Facebook 应用程序中。

另外，请注意，当从您的应用程序中注销时，用户会保持登录到 Facebook。这与适用于使用 Facebook 身份验证的网站的策略不同。在这种情况下，用户应该从网站和 Facebook 中注销。

# c - 在 Eclipse 中构建遗留的 C 代码

> ID：14130172
> 
> 赞同：1
> 
> 时间：2013-01-02T22:21:55.553
> 
> 标签：c, linux, eclipse

我继承了一个用 C 编写的项目，在 Linux 上运行，Cmake 文件是前人编写的。以前的人没有使用IDE来做这个项目，所以我发现维护这个相当大的项目有点困难，不幸的是我是Cmake的新手:(。

我想为这个项目使用 eclipse（我的操作系统是 Linux）来帮助我更快地理解项目，并且能够在 Eclipse 中构建和调试它，所以我不必每次都手动运行构建脚本。该项目在 Mercurial 中，因此我使用 Eclipse 将其签出到我的存储库中，然后我有一些选择：

1.  打开项目，并以某种方式将其变成我可以编译的 C 项目

2.  将代码转换为makefile项目，使用Cross GCC toolchian，尝试将所有路径添加到'include'，然后尝试构建（我在这个路径上，但似乎Eclipse Juno需要我自己找到包含文件的路径, 这要手动添加很多T_T)

3.  新建一个makefile项目，边走边逐步导入代码，我对代码还不是很熟悉...

4.  其他一些方法...

请问有什么建议吗？

[此外，就我而言， http://www.vtk.org/Wiki/CMake:](http://www.vtk.org/Wiki/CMake:Eclipse_UNIX_Tutorial) Eclipse_UNIX_Tutorial 中提到的 3 个选项中的哪一个是一个不错的选择？

# python - Django：列表中的外键值显示管理员

> ID：14130174
> 
> 赞同：10
> 
> 时间：2013-01-02T22:22:06.680
> 
> 标签：python, django, django-admin

我正在尝试在管理员列表视图中显示外键“公司名称”。但是，列表视图仅显示公司的 (None)。我做错了什么？

**管理员.py**

```
class CampaignAdmin(admin.ModelAdmin):
    #fields = ['name', 'Company_name', 'active', 'modified', 'created']
    list_display = ['name', 'related_company', 'active', 'modified', 'created']
    list_filter = ['active']
    search_fields = ['name']
    sortable_field_name = "name"
    autocomplete_lookup_fields = {
        'name': ['name'],
        }

    def related_company(self, obj):
        return '%s'%(obj.Company.name)
    related_company.short_description = 'Company'

admin.site.register(Campaign, CampaignAdmin) 
```

**模型.py**

```
class Company(models.Model):
    companyid = models.CharField(max_length=255, primary_key=True, db_column='companyID')
    name = models.CharField(max_length=105)
    logourl = models.CharField(max_length=255, db_column='logoURL')
    website = models.CharField(max_length=255, blank=True)
    active = HibernateBooleanField(default=False)
    created = models.DateTimeField()
    modified = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = u'company'
        ordering = ['name']

    @staticmethod
    def autocomplete_search_fields():
        return ("id__iexact", "name__icontains",)

    def __unicode__(self):
        return self.name

class Campaign(models.Model):
    campaignid = models.CharField(max_length=255, primary_key=True, db_column='campaignID')
    name = models.CharField(max_length=105)
    active = HibernateBooleanField(default=False)
    created = models.DateTimeField()
    modified = models.DateTimeField(null=True, blank=True)
    companyid = models.ForeignKey(Company, null=True, db_column='companyID', blank=True)

    class Meta:
        db_table = u'campaign'

    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-02T22:29:26.497

您的`Campaign`模型没有`Company`属性 - ForeignKey 是 field `companyid`。您需要将功能更改为

```
def related_company(self, obj):
    return obj.companyid.name
related_company.short_description = 'Company' 
```

而且由于`__unicode__()`公司对象的方法无论如何都会返回名称，因此您可能无论如何都不需要自定义函数-我认为您可以将外键字段直接放在显示列表中：

```
list_display = ['name', 'companyid', 'active', 'modified', 'created'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-20T14:01:05.627

以这种方式链接到 ForeignKey 对象时要考虑的附加功能是`related_company.allow_tags = True`在函数上设置。

这将使您可以返回 HTML 并将其呈现为列表视图中的可用链接。

# gwt - smartgwt-skins.jar 必须在服务器上吗？

> ID：14130175
> 
> 赞同：0
> 
> 时间：2013-01-02T22:22:12.630
> 
> 标签：gwt, smartgwt

我正在尝试为我的 GWT / SmartGWT Web 应用程序从 .war 文件中删除多余的内容。smartgwt-skins.jar 必须在 .war 文件中吗？IOW，它提供服务器使用的任何东西吗？还是只需要在我的类路径上，以便 GWT 编译器在构建客户端时可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:46:25.627

不，您不需要在服务器上使用它。smartgwt.jar 也是如此。

如果您使用 Pro 或其他付费版本和 SmartGWT 服务器端功能，那么您将需要服务器上的一些 isomorphic-*.jar 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:20:46.673

理想情况下，它只需要在您的类路径中，GWT 编译器就可以在构建客户端时找到它。

这实际上取决于编码实践。如果您无意中在服务器端代码中使用了一些客户端常量或 smartgwt-skins.jar 中的代码，则需要将其放在 WAR 的 WEB-INF/lib 中。

# asp.net-mvc-3 - 来自telerik mvc treeviewitem的Ajax

> ID：14130176
> 
> 赞同：0
> 
> 时间：2013-01-02T22:22:13.263
> 
> 标签：asp.net-mvc-3, treeview, telerik-mvc

我正在尝试使用 Telerik MVC TreeView。我在树视图中有三个级别。单击第 3 级树视图项时，我需要加载视图而不刷新页面。我尝试使用 item.Url。但是整个页面刷新并且树视图消失了。我在“菜单”部分视图中有一个树视图，它由 _layout.cshtml 调用

```
 @(Html.Telerik().TreeView()
    .Name("TreeView")
    .ShowLines(false)

    .BindTo(Model, mappings =>
    {
        mappings.For<AdminTool.Web.Models.ProjectModel>(binding => binding
                .ItemDataBound((item, project) =>
                {
                    item.Text = project.Name;
                })
                .Children(project => project.ApiModels));

                mappings.For<AdminTool.Web.Models.ApiModel>(binding => binding
                .ItemDataBound((item, api) =>
                {
                    item.Text = api.Name;
                    item.Value = api.Id;
                })
                .Children(api => api.ApiMethods));

                mappings.For<AdminTool.Web.Models.ApiMethodModel>(binding => binding
                .ItemDataBound((item, apimethod) =>
                {
                    item.Text = apimethod.Name;
                  item.Url = Url.Action("ApiMethodById", "ApiMethod", new { id= apimethod.Id });

                }));

    })
  ) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:46:01.747

我建议为此使用 jQuery。您将执行以下操作：

1) 将您希望加载的任何位置放置在带有一些 id 的标签内（例如“myDiv”）

2) 编写一个 jQuery 函数，单击您的第三级项目（例如 apiMethodID）来运行一个函数，该函数将调用您正在寻找的控制器操作，并将其发布到 myDiv。您可能想尝试以下方法：

```
$(document).ready(function()){
  $('#apiMethodID').click(function(){
      var value = $('#apiMethodID').val();
      var url = "/ApiMethod/ApiMethodById";
      $.get(url, { apiMethodId: value }, function(data){
         $('#myDiv').html(data);
      });
   })
} 
```

$.get 这里实际上会调用你的控制器方法。您应该能够调试该事实以确保它有效。

3) 确保您要返回的控制器操作返回 PartialView，否则您将在该 div 内重新渲染整个页面。

让我知道这是否有效。

# javascript - 将复选框放在标签标签内会导致 :before 和 :after 出现问题

> ID：14130177
> 
> 赞同：0
> 
> 时间：2013-01-02T22:22:25.587
> 
> 标签：javascript, jquery, html, css

我正在尝试使用如下所示的翻转开关：

[http://proto.io/freebies/onoff/](http://proto.io/freebies/onoff/)

我遇到的问题是我需要动态地进行这些开关，所以我不能在每个开关上设置一个 id（我也想避免通过 javascript 这样做）。

我尝试将复选框放在标签内，但是这似乎导致示例中的“onoffswitch-inner”上的 :before 和 :after 无法正常工作。我对 CSS 和 HTML 非常缺乏经验，所以我有点卡住了。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:32:10.203

轻松修复：-p 我设置了一个[演示 jsFiddle](http://jsfiddle.net/bcJuC/)。

*   将`INPUT`移入`LABEL`，确保它出现在之前`<div class="onoffswitch-inner">`
*   从最后一个 CSS 选择器中删除`.onoffswitch-label`（它在选择器的中间……）

    .onoffswitch-checkbox:checked + **.onoffswitch-label** .onoffswitch-inner { margin-left: 0; }

# ruby-on-rails - Rails - 使用 before_filter 运行方法

> ID：14130179
> 
> 赞同：0
> 
> 时间：2013-01-02T22:22:26.757
> 
> 标签：ruby-on-rails, ruby, methods, before-filter

我希望在每次加载页面时（现在）运行过滤器以检查项目是否超过 7 天，如果是，则对其运行一些操作以更新其属性。

我`before_filter :update_it`在应用程序控制器中。`update_it`在同一控制器中定义如下：

```
def update_it
  @books = Book.all
  @books.each do |book|
    book.update_queue
  end
end 
```

然后`update_queue`是在书本模型中定义的。这是模型中与此相关的所有内容：

```
scope :my_books, lambda {|user_id|
    {:conditions => {:user_id => user_id}}  
  }

  scope :reading_books, lambda {
    {:conditions => {:reading => 1}}
  }

  scope :latest_first, lambda {
    {:order => "created_at DESC"}
  }

  def move_from_queue_to_reading
    self.update_attributes(:queued => false, :reading => 1);
  end

  def move_from_reading_to_list
    self.update_attributes(:reading => 0);
  end

  def update_queue
    days_gone = (Date.today - Date.parse(Book.where(:reading => 1).last.created_at.to_s)).to_i

    # If been 7 days since last 'currently reading' book created
    if days_gone >= 7

        # If there's a queued book, move it to 'currently reading'
        if Book.my_books(user_id).where(:queued => true)
            new_book = Book.my_books(user_id).latest_first.where(:queued => true).last
            new_book.move_from_queue_to_reading
            currently_reading = Book.my_books(user_id).reading_books.last
            currently_reading.move_from_reading_to_list

        # Otherwise, create a new one
        else
            Book.my_books(user_id).create(:title => "Sample book", :reading => 1)

        end
    end
  end 
```

我的关系是一本书属于一个用户，而一个用户拥有许多书。我通过用户显示视图在视图中显示这些书籍，但这并不重要。

所以我不断得到的错误`move_from_queue_to_reading`是`move_from_reading_to_list`未定义的方法。怎么会这样？我清楚地定义了它们，然后在下面调用它们。我真的很茫然，非常感谢对我做错了什么的一些见解。我是这里的初学者，所以任何结构化的批评都会很棒:)

**编辑**

我得到的确切错误消息和堆栈跟踪如下：

```
NoMethodError in UsersController#show
undefined method `move_from_queue_to_reading' for nil:NilClass

app/models/book.rb:41:in `update_queue'
app/controllers/application_controller.rb:22:in `block in update_it'
app/controllers/application_controller.rb:21:in `each'
app/controllers/application_controller.rb:21:in `update_it' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:27:07.333

我怀疑返回的集合是一个空数组（在测试时仍然是“真实的”）。所以调用`.last`是返回`nil`到`new_book`和`currently_reading`局部变量。尝试改变：

```
if Book.my_books(user_id).where(:queued => true) 
```

至：

```
if Book.my_books(user_id).where(:queued => true).exists? 
```

此外，您在查找时正在修改范围`currently_reading`。这可能会导致查询再次不返回任何结果。改变：

```
currently_reading.move_from_reading_to_list 
```

至：

```
currently_reading.move_from_reading_to_list if currently_reading 
```

# rest - 为 A/B 测试而跟踪 Web 应用程序中任意事件的最灵活工具？

> ID：14130180
> 
> 赞同：0
> 
> 时间：2013-01-02T22:22:32.097
> 
> 标签：rest, web-applications, analytics, ab-testing

我正在寻找一些可用于跟踪基于 Web 的软件中的任意事件的工具或服务，目的是运行 A/B 测试和测量其他各种事物。我知道 Optimizely，但这似乎只适用于在普通网站中测试简单的东西，而 Google Analytics 并不真正适合这种类型的东西，当你想从后端跟踪事件并将它们链接起来时会有很多麻烦GA 中的用户会话。

一个理想的解决方案是一些服务接受带有任意参数的 HTTP GET 请求，然后让用户使用类似 SQL 的语言进行查询。我曾多次将一些可扩展性较差的解决方案与 MySQL 或不太灵活的解决方案放在一起，将所有内容存储在文本文件中，然后分别处理和聚合成所需的格式。但是构建一个既灵活又可扩展的版本需要更多的时间，我想已经有很好的解决方案了。有人知道吗？

其他要求是：

*   必须可以同时进行后端和前端请求。
*   必须可以在小部件中使用它，在其他人的网站上运行
*   如果它可以自动创建带有一些图表等的可读报告，那就太好了。

如果有人对这种工具有任何经验，我会很高兴听到你的想法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:30:28.953

你试过混合面板吗？我们发现它非常灵活和强大。

*   [https://mixpanel.com/](https://mixpanel.com/)

# arrays - 在 Verilog 中用常量值初始化可合成二维数组的方法

> ID：14130181
> 
> 赞同：7
> 
> 时间：2013-01-02T22:22:32.620
> 
> 标签：arrays, initialization, constants, vhdl, verilog

在 VHDL 中，我可以很容易地做到这一点：

```
constant    cmdbytes       : bytearray(0 to Total) := (x"05", x"00", x...}; 
```

我想要可综合的常量，这样当 FPGA 启动时，这个数组就有我提供的数据。这些寄存器连接到 VCC 或接地以表示 1 或 0。然后我可以使用它们来生成波形。我也想有 2D 字节数组，它在 verilog 世界中是 3D。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T10:15:25.030

如果您只是使用数组一次提取一个值，那么使用`case`语句怎么样？当然，这是一种冗长的方法，但您始终可以编写一个脚本来为您编写 RTL。

```
reg [7:0] value;
reg [7:0] i;

always @(posedge clk or negedge rst_n) begin
    if(!rst_n)
        i <= 8'd0;
    else
        i <= i + 1;
end

always @(*) begin
    case(i) 
        8'h00: value = 8'd0;
        8'h01: value = 8'd34;
        ...
    endcase
endcase 
```

另一种方法是使用`initial`语句。据我所知，FPGA 综合工具将允许您以下列方式设置数组的初始值。同样，编写这个脚本可能是要走的路。

```
reg [0:35][7:0] my_array;

initial begin
    my_array[0] = 8'd45;
    my_array[1] = 8'd26;
    ...
end 
```

如果您的 FGPA 综合工具支持某些 SystemVerilog，您将能够像这样初始化数组：

```
reg [0:34][7:0] my_array = '{ 8'd90, 8'd34, ... }; // note the '{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-31T12:05:35.610

语句方法的替代`case`方法是使用 a`function`来访问值。

包含 8 位常量的大小为 4 的“数组”示例：

```
function [7:0] cmdbytes;
        input    [1:0] index;
        reg      [7:0] t[0:3];
    begin
        {   
             t[0],t[1],t[2],t[3]
        } = {   
             8'h05, 8'h00, 8'h5b, 8'h45
        };

        cmdbytes = t[index];
    end
endfunction 
```

可以像这样访问常量：

```
wire [7:0] value0;
wire [7:0] value1;
wire [7:0] value2;
wire [7:0] value3;

assign value0 = cmdbytes(2'd0);
assign value1 = cmdbytes(2'd1);
assign value2 = cmdbytes(2'd2);
assign value3 = cmdbytes(2'd3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T06:21:07.623

```
module test (

   input [7:0]   p1_sa,            // i
   input [7:0]   p1_sb,            // i
   output [7:0]   p3,            // o
   output [7:0]   p3b            // o
);

logic [7:0] array2d [7:0] = {99,124,119,123,242,107,111,197};

   assign p3    = array2d[p1_sa];
   assign p3b   = array2d[p1_sb];

endmodule 
```

我尝试了上述系统 verilog 代码，它在 modelsim 和 Vivado 中运行良好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-03T06:00:18.330

Verilog 2005 不允许数组初始化。尽管您的 FPGA 供应商应该有办法生成 ROM。

# ios - Storyboard uiviewcontroller，“自定义类”未显示在下拉列表中

> ID：14130184
> 
> 赞同：65
> 
> 时间：2013-01-02T22:22:59.707
> 
> 标签：ios, storyboard

我有一个在我的应用程序故事板中创建的 UIViewController，以及一个我添加到项目中的自定义 UIViewController 子类（并且正确地处于我的目标的编译阶段）。但是，当我在 Storyboard 中的视图控制器上设置“自定义类”属性时，我的自定义类不会显示在列表中。

*   检查该类是我的应用程序目标的一部分，而不是测试'
*   仔细检查它是否正确地是 UIViewController 的子类
*   编译程序只是为了确保 xcode 使用最新信息
*   重启xcode

什么会导致我的班级没有出现在“自定义班级”下拉菜单中？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-04T00:26:42.660

我发现有两种方法可以解决问题，但它们是解决方法：-

1.  只需在文本字段中输入视图控制器名称，或
2.  关闭项目，然后重新打开它，并在项目初始化中将文件放在列表中。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-02-24T17:57:32.570

如果您仍有问题或可能遇到相同问题的人：

确保在情节提要上选择“ViewController”而不是“视图”（单击情节提要中的视图时会自动选择该视图）。The difference between those two is that when the view controller is selected, a blue rectangle pop up around your app. 要确保选择视图控制器，请打开文档大纲并直接在情节提要层次结构中选择它。

![在此处输入图像描述](../Images/0527d5b428e2219a96b3281182885b01.png) ![在此处输入图像描述](../Images/56d149c63624e1f0aa7fc47819e07178.png) ![在此处输入图像描述](../Images/c5844a77a287473be0514f2776e7a9c0.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-02T22:51:15.067

我会尝试以下方法：

1.  检查实现类的文件是**构建阶段**的一部分（在**target** > **build phase**下检查）
2.  将`.m`文件添加到**构建阶段**（如果还没有）。
3.  重新启动 Xcode。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-07-31T02:28:01.920

您可以通过编辑 Storyboard 的 XML 来解决此问题。

1.  右键单击*Project Navigator*面板`My.storyboard`中的条目并选择*Open As->SourceCode*菜单选项。在 XML 中找到您的视图控制器条目，然后添加属性。**`customClass="MyController"`**

***   保存故事板。

    *   再次右键单击*Project Navigator*面板`My.storyboard`中的条目，然后选择*Open As->Interface Builder - Storyboard*菜单选项。** 

 ***自定义类条目现在将包含您的`MyController`类名。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-01-02T03:41:47.907

确保你的类继承自 UIViewController。

```
@interface ClassName : UIViewController 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-01-02T00:00:18.380

在 Xcode 8 中，我的一些类为其文件位置指定了错误的路径（区分大小写）。

```
MyProject/mysubdirectory/MyViewController.xib (.m, .h) 
```

与：

```
MyProject/MySubdirectory/MyViewController.xib (.m, .h) 
```

真的不确定它是如何以这种状态结束的，但我的项目表现出与上述完全相同的行为（IB 中没有显示出口/操作），并且修复该路径解决了问题。

我用两种不同的方式解决了这个问题。一种方法是我打开 .pbxproj 文件并手动修复区分大小写的问题。另一种可行的方法是点击文件“文件检查器”选项卡的“身份和类型”部分下的文件夹图标，然后在那里重新选择文件。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-07-09T07:06:33.957

单击故事板中的另一个视图控制器，然后单击它的自定义类下拉菜单以确认列出了新类，但不要选择它。单击您创建的新视图控制器，您应该会看到它现在列在其自定义类下拉菜单中。奇怪，嗯？我认为只是强制刷新。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-03-07T17:45:07.767

我遇到了与此问题中描述的相同的问题。但是，没有一个建议的答案为我解决了这个问题。我的项目编译正常，没有警告或错误，但是在 .h 文件中没有“插座”指示符表明我的插座已链接到情节提要元素。

此外，尝试通过右键单击并拖动到我的头文件中在我的代码中创建新的出口，并没有将我的头源识别为该操作的潜在目标。此外，我的 Class 没有出现在 ViewController 的属性检查器面板的 Custom-Class 下拉列表中。

然而，该项目编译成功。

仔细检查表明我已经以以下方式定义了我自己的类......

```
@interface KJBMainDataViewTrackConMk2<UIScrollViewDelegate> : UIViewController 
```

这显然编译得很好。

但是，如果将其更改为以下内容，（将协议移至末尾）...

```
@interface KJBMainDataViewTrackConMk2 : UIViewController<UIScrollViewDelegate> 
```

然后一切都生机勃勃。所有出口都突然被指示为与情节提要元素“连接”。并且右键单击拖动再次开始工作，我的自定义类出现在情节提要 ViewController 的属性检查器面板的自定义类下拉列表中！

这里的其他答案可能代表了这种情况的最可能原因，但是，我觉得至少值得一提这另一个潜在原因。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-05-05T04:06:09.733

我有同样的问题，但没有其他解决方案对我有用。对我来说，问题是我有一个 Mac 和 iOS 目标，它们都有自己版本的同一个视图控制器。例如，对于 Mac，我有一对名为 FooViewController 的 .h/.m 文件，而对于 iOS，我有一对名为 FooViewController 的 .h/.m 文件。每一对都正确包含在它们各自的目标中，但由于某种原因 Xcode 不喜欢它，我的视图控制器不会显示在故事板视图控制器的自定义类下拉列表中。我最终在 iOS 视图控制器中重命名了我的类，它立即出现在下拉列表中。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-03-01T22:43:42.983

对于那些在尝试了所有方法后仍然遇到此问题的人可能是因为您单击了`View`而不是`ViewController`.

**您必须在`ViewController`单击时选择文件。**

这解决了我的问题。

[![在此处输入图像描述](../Images/80850b73376a318b8cb36f823cffc405.png)](https://i.stack.imgur.com/Adsy8.png)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-01-01T12:59:22.473

就我而言，我将一个新的 TableViewController 对象拖到情节提要中，但我添加了一个新文件，其子类为“UIViewController”....然后，我添加了一个子类为“UITableViewController”的文件，问题解决了！！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-03-24T16:15:43.317

我碰巧遇到了这个问题，在尝试了以前的建议后没有运气。最后我发现原因是头文件的类型设置为`C++ header`. 将其更改为`C header`（与所有其他头文件一样）后，该类出现在下拉列表中。不知道为什么...可能对其他人有帮助，所以我将其发布在这里。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-09-08T12:21:01.547

Storyboard 正在寻找自定义类，但实际上它不存在，并且它没有在列表中显示自定义类名称，也没有显示 outlets 。以下解决方案非常适合我。

1.  只需将您的代码复制到其他地方即可。（让我们在桌面上说）
2.  打开您现有的代码。
3.  删除自定义类文件。（移至垃圾箱）
4.  现在从复制的项目文件夹中添加文件（从桌面）
5.  不要忘记选中“如果需要则复制”复选框
6.  打开故事板和宾果游戏，您将在下拉列表中获得自定义类文件

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-05-27T21:03:24.293

以上（或以下：）都没有帮助我。虽然我发现

1.  将新的视图控制器添加到情节提要后（只需将其拖入）
2.  并通过 File\New\File\Objective-C 类添加我的类，给它一个名字，没有 XIB，下一步，创建

如果我在情节提要中选择我的视图控制器并尝试将我的班级分配给它 - 我的班级不在那里

但

如果我单击视图控制器本身中的视图，然后单击自定义类中的类下拉菜单

接着

选择视图控制器（单击视图控制器下方的栏），现在再次单击自定义类中的类下拉菜单，我新添加的类神奇地出现了。

奇怪，一定是刷新的bug。Xcode 版本 5.1 (5B130a)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-02-05T18:47:19.290

确保最初不要将 CustomViewController 添加到任何组或文件夹中。将其放在应用程序的根目录中。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-11-30T14:33:02.583

确保选择要附加类的 View Controller。最简单的方法是打开`Document Outline`并选择您的视图控制器（当您从情节提要中点击它时，有时它根本不会选择您想要的对象）。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-09-08T06:43:20.347

对于`macOS`项目，创建一个新类`NSObject`会生成一个继承自 on的类`NSViewController`。

从改变

```
import Cocoa

class AppsViewController: NSObject {

} 
```

至

```
import Cocoa

class AppsViewController: NSViewController {

} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-02-06T13:20:11.790

尝试清理您的项目，并重新启动您的 Mac。我做的一件特别的事情是更改所有自定义类的名称并再次构建项目。有效！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-06-23T20:30:49.553

确保视图控制器与 storyboard 中的相同类型匹配。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-09-25T14:28:59.987

我对这个问题感到非常沮丧，因为上面的答案都没有解决我的问题。

在我的例子中：我正在处理 swift view controller 文件并且正在进行主动更改（例如创建自定义集合单元类）。我还没有完成代码块并像这样打开它：

```
class tableViewCell: UITableViewCell { 
}
class collectionCell: 

class viewController: UIViewController {
     override func viewDidLoad(){
     super.viewDidload()

     }

} 
```

注意不完整的代码块 'collectionCell2' 这足以让 xcode 无法识别我的 viewController 文件。一旦我完成了这个块，文件作为一个选项重新出现在我的 xcode 中。

非常愚蠢和简单。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-12-22T22:31:55.213

对我有用的是，单击项目导航器中的文件，然后在“位置”下拉框下方的“身份和类型”下的文件检查器中，单击小文件夹图标，然后在弹出窗口中选择文件.

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-03-30T10:55:18.050

就我而言，我选择了错误的 UI .. 所以我删除了类文件并创建了一个新文件并选择了正确的父类

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-12-12T00:27:12.947

就我而言，不知何故捆绑资源被删除了，所以我添加回来并开始工作！

Build Phases -> Add Build Phase -> Copy Bundle Resources 找到你的文件然后将你的文件拖放到那里

然后确保检查您的目标成员资格。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-06-13T11:24:31.563

我不得不重新启动 XCode 7.3 (7D175)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-03-21T13:53:47.900

在我的情况下，swift文件名与swift类名不同，即

文件名是**ViewControllerTest.swift** 和类名是**ViewController.swift**

将两者都更改为通用名称后解决了我的问题

**上述更改后重启 Xcode**

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2017-04-25T00:11:05.423

确保 的类名`ViewController`是您想要的名称。IE

```
class MyCustomNameViewController: UIViewController {
.
.
} 
```

仅更改文件名是不够的。***

# php - 加载页面时将时间存储在变量中

> ID：14130185
> 
> 赞同：0
> 
> 时间：2013-01-02T22:23:00.770
> 
> 标签：php

有没有办法将页面加载到变量中的时间存储起来？

这就是我得到的：

```
<?php 
$time = time();
echo "Page loaded:"  . time() ?> 
```

但是，这并不能满足我的要求，它显示的是当前时间，而不是加载页面的时间。

任何有关如何做到这一点的提示都非常感谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:24:19.333

您想要`$time`创建的变量，而不是`time()`对 time 函数的另一个调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T22:24:39.843

那是因为你没有回应 var：

```
echo "Page loaded:"  . $time; 
```

# matlab - 等效于单元格的 Fieldnames 函数

> ID：14130188
> 
> 赞同：2
> 
> 时间：2013-01-02T22:23:22.793
> 
> 标签：matlab, cells, field-names

正如标题所说，只是想知道是否有一个函数可以作为字段名（http://www.mathworks.co.uk/help/matlab/ref/fieldnames.html），但对于单元格。

所以如果我有类似的东西：

```
a = imread('redsquare.bmp');
b = imread('bluesquare.bmp');
c = imread('yellowsquare.bmp');
d = imread('greysquare.bmp');

e = {a, b, c, d}; 
```

我正在尝试检索：a、b、c、d 或不带扩展名的图像名称。

我试过`fn = fileparts(e)`and `fntemp = cell2struct(e,2)`，但我无法让它工作。

希望这是有道理的谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:37:01.260

元胞数组不包含任何元信息，例如字段名或文件名。如果您想访问该信息，则需要更改数据存储结构。一些选项包括：

**标量结构** 适用于只有一个名称要引用的情况。

```
images.red = imread('redsquare.bmp');
images.blue = imread('bluesquare.bmp'); 
```

用于`fieldnames(images)`获取名称。

**结构数组** 更通用一点。允许完全通用名称（包括特殊字符和空格）和其他元数据（如“大小”、“作者”）

```
images(1).name = 'red';
images(1).im   = imread('redsquare.bmp');
images(2).name = 'blue';
images(3).im   = imread('bluesquare.bmp'); 
```

用于`{fieldnames.name}`仅获取名称。

**Containers.map** 可能比您需要的更多，但很高兴知道。 `help comtainers.map`更多。

# java - 如何显示多个 LinkedList 元素看起来像 JAVA 中的表格？

> ID：14130189
> 
> 赞同：2
> 
> 时间：2013-01-02T22:23:26.840
> 
> 标签：java, linked-list, listiterator

我是新人，第一次发帖，如有错误请见谅。我想显示来自 4 LinkedList 的元素以及要像在表格中一样显示的元素。我不需要 JTable，因为我不需要 GUI。我试过使用 ListIterator 但它并没有全部显示：我的意思是如果一个列表有 5 个元素而另一个有 3 个元素，则每个列表中只会显示 3 个元素。一段代码价值超过一百万字，所以：

```
 LinkedList list1 = new LinkedList();
    LinkedList list2 = new LinkedList();
    LinkedList list3 = new LinkedList();
    LinkedList list4 = new LinkedList();

    list1.addFirst("A");
    list1.addFirst("B");
    list1.addFirst("C");
    list1.addFirst("D");
    list1.addFirst("E");
    list1.addFirst("F");

    list2.addFirst("G");
    list2.addFirst("H");
    list2.addFirst("I");
    list2.addFirst("J");
    list2.addFirst("K");
    list2.addFirst("L");
    list2.addFirst("M");

    list3.addFirst("N");
    list3.addFirst("O");
    list3.addFirst("P");
    list3.addFirst("Q");
    list3.addFirst("R");
    list3.addFirst("S");
    list3.addFirst("T");
    list3.addFirst("U");

    list4.addFirst("V");
    list4.addFirst("W");
    list4.addFirst("X");
    list4.addFirst("Y");
    list4.addFirst("Z");

    ListIterator it1 = list1.listIterator();
    ListIterator it2 = list2.listIterator();
    ListIterator it3 = list3.listIterator();
    ListIterator it4 = list4.listIterator();

    while (it1.hasNext() && it2.hasNext() && it3.hasNext() && it4.hasNext()){

        System.out.println(it1.next()+"\t\t\t"+ it2.next()+"\t\t\t"+it3.next()+"\t\t\t"+it4.next());
    } 
```

输出是这样的：

![http://imageshack.us/photo/my-images/9/capturelkt.png/](../Images/4c353ea55f7b976d87bcca64e87314eb.png)

我很困惑为什么这是输出，所以如果有人能解释我做错了什么或者能给我一个提示或一个例子，我将不胜感激。这不是作业，我只是一个人学习JAVA。先感谢您 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:29:19.920

您看不到其中的行的原因`A`是因为这一行：

```
it1.hasNext() && it2.hasNext() && it3.hasNext() && it4.hasNext() 
```

一旦您的列表中的一个元素不足，您就会停止。

要修复它，您必须继续工作，直到您的所有列表都没有元素为止。但是，如果它们没有元素，你不能只访问这些列表，所以你必须解决它。

```
// change && to ||
while(it1.hasNext() || it2.hasNext() || it3.hasNext() || it4.hasNext()) {
    Object[] objs = new String[] { "", "", "", ""}; // empty strings
    // if iterators on this row are not empty, replace with values
    if(it1.hasNext()) objs[0] = it1.next();
    if(it2.hasNext()) objs[1] = it2.next();
    if(it3.hasNext()) objs[2] = it3.next();
    if(it4.hasNext()) objs[3] = it4.next();
    // now print
    String tabs = "\t\t\t";
    System.out.println(objs[0] + tabs + objs[1] + tabs + objs[2] + tabs + objs[3]);

} 
```

如果没有数组，这会更快，而是使用严格数量的对象。但我认为如果我们将它保留为数组，它会更清晰、更容易重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:28:20.283

它从头开始打印，因此当您下次打印时（遍历它），您将打印最近添加的项目，因为您每次都在开始添加项目）

用这条线

```
while (it1.hasNext() && it2.hasNext() && it3.hasNext() && it4.hasNext()){ 
```

您也仅在所有列表都有下一个值时才打印，仅打印 5 个值，因为您的最短列表的大小仅为 5（列表 4）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T22:29:09.553

您正在使用`&&`迭代器`hasNext()`返回 false 的那一刻，整个评估`(it1.hasNext() && it2.hasNext() && it3.hasNext() && it4.hasNext())`将是 false。

# java - Android：如何从 sqlite 数据库中检索数据

> ID：14130196
> 
> 赞同：0
> 
> 时间：2013-01-02T22:23:48.233
> 
> 标签：java, android, sql

我一直在研究用于 sqlite 数据库的 android sdk 的信息和文档，但我仍然有点卡住。我有一个从[此处](http://www.hdelossantos.com/2009/12/23/creating-a-sqlite-database-in-android/)找到的示例中检索到的数据库类。这是我的课：

```
package com.example.medtracker;

import java.sql.Timestamp;
import java.util.ArrayList;
import java.util.Calendar;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
    private static final String DATABASE_NAME = "meds.db";
    private String DATABASE_TABLE;
    private static final int DATABASE_VERSION = 1;

    // Index Key column
    public static final String KEY_ID = "_id";

    // Name of the column index of each column in DB
    public ArrayList<String> TABLE_KEYS = new ArrayList<String>();
    public ArrayList<String> TABLE_OPTIONS = new ArrayList<String>();
    public final String KEY_TIMESTAMP = "timeStamp";
    public final int TIMESTAMP_COLUMN = 1;

    // Create new database
    private String DATABASE_CREATE;

    // Variable to hold database instant
    private SQLiteDatabase db;

    // Database open/upgrade helper
    private myDBHelper dbHelper;

    public DBAdapter(Context context, String table, ArrayList<String> keys,
            ArrayList<String> options) {
        // Start initializing all of the variables
        DATABASE_TABLE = table;
        TABLE_KEYS = (ArrayList<String>) keys.clone();
        TABLE_OPTIONS = options;

        String keyString = "";
        for (int i = 0; TABLE_KEYS.size() > i; i++) {

            // Add commas to the options elements if there is a next value.
            if (i + 1 < TABLE_OPTIONS.size() && TABLE_OPTIONS.get(i) != null) {
                TABLE_OPTIONS.set(i, TABLE_OPTIONS.get(i) + ",");
            } else if (i + 1 == TABLE_OPTIONS.size()
                    && TABLE_OPTIONS.get(i) != null) {
                if (i + 1 < TABLE_KEYS.size()) {
                    TABLE_OPTIONS.set(i, TABLE_OPTIONS.get(i) + ",");
                } else {
                    TABLE_KEYS.set(i, TABLE_KEYS.get(i) + "");
                }
            } else if (i + 1 != TABLE_KEYS.size()) {
                TABLE_KEYS.set(i, TABLE_KEYS.get(i) + ",");
            } else {
                TABLE_KEYS.set(i, TABLE_KEYS.get(i) + "");
            }

            System.out.println(TABLE_OPTIONS.toString());
            System.out.println(TABLE_KEYS.toString());

            if (i + 1 <= TABLE_OPTIONS.size() && TABLE_OPTIONS.get(i) != null)
                keyString = keyString + " " + TABLE_KEYS.get(i) + " "
                        + TABLE_OPTIONS.get(i);
            else if (i + 1 > TABLE_OPTIONS.size()
                    || TABLE_OPTIONS.get(i) == null) {
                keyString = keyString + " " + TABLE_KEYS.get(i);
            }
        }

        // Create the database creation string.
        DATABASE_CREATE = "CREATE TABLE IF NOT EXISTS " + DATABASE_TABLE + " ("
                + "_id" + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                + KEY_TIMESTAMP + "," + keyString + ");";

        // Create a new Helper
        dbHelper = new myDBHelper(context, DATABASE_NAME, null,
                DATABASE_VERSION, DATABASE_TABLE, DATABASE_CREATE);
    }

    public DBAdapter open() throws SQLException {
        db = dbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        db.close();
    }

    public long insertEntry(ArrayList<String> key, ArrayList<String> value) {
        String timeStamp = new Timestamp(Calendar.getInstance()
                .getTimeInMillis()).toString();
        ContentValues contentValues = new ContentValues();
        for (int i = 0; key.size() > i; i++) {
            contentValues.put(key.get(i), value.get(i));
        }
        contentValues.put(KEY_TIMESTAMP, timeStamp);
        return db.insert(DATABASE_TABLE, null, contentValues);
    }

    public boolean removeEntry(long rowIndex) {
        return db.delete(DATABASE_TABLE, KEY_ID + "=" + rowIndex, null) > 0;
    }

    public Cursor getAllEntries(String[] columns, String selection,
            String[] selectionArgs, String groupBy, String having,
            String sortBy, String sortOption) {
        return db.query(DATABASE_TABLE, columns, selection, selectionArgs,
                groupBy, having, sortBy + " " + sortOption);
    }

    public int updateEntry(long rowIndex, ArrayList<String> key,
            ArrayList<String> value) {
        String timeStamp = new Timestamp(Calendar.getInstance()
                .getTimeInMillis()).toString();
        String where = KEY_ID + "=" + rowIndex;
        ContentValues contentValues = new ContentValues();
        for (int i = 0; key.size() > i; i++) {
            contentValues.put(key.get(i), value.get(i));
        }
        contentValues.put(KEY_TIMESTAMP, timeStamp);
        return db.update(DATABASE_TABLE, contentValues, where, null);
    }

    public boolean clearTable() {
        return db.delete(DATABASE_TABLE, null, null) > 0;
    }

    private static class myDBHelper extends SQLiteOpenHelper {
        private String creationString;
        private String tableName;
        @SuppressWarnings("unused")
        SQLiteDatabase db;

        /**
         * Creates a myDBHelper object.
         * 
         * @param context
         *            The context where the access is needed
         * @param name
         *            Name of database file
         * @param factory
         *            A CursorFactory, or null to use default CursorFactory
         * @param version
         *            Database version
         * @param tableName
         *            Name of table within database
         * @param creationString
         *            SQL String used to create the database
         */
        public myDBHelper(Context context, String name, CursorFactory factory,
                int version, String tableName, String creationString) {
            super(context, name, factory, version);
            this.creationString = creationString;
            this.tableName = tableName;
        }

        /**
         * Creates the database table.
         * 
         * @param db
         *            The database used by this helper to create the table in
         */
        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(creationString);
        }

        /**
         * This method determines if the database needs to be updated or not.
         * 
         * @param db
         *            The database used by this helper
         * @param oldVersion
         *            The old database version
         * @param newVersion
         *            The new database version
         */
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // Log the version upgrade
            Log.w("TaskDBAdapter", "Upgrading from version " + oldVersion
                    + " to " + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS " + tableName);
            onCreate(db);

        }

        /**
         * Creates tables when the database is opened if the tables need to be
         * created.
         * 
         * @param db
         *            The database used by this helper
         */
        @Override
        public void onOpen(SQLiteDatabase db) {
            db.execSQL(creationString);
        }

    }
} 
```

然后我做了一个类来添加对象： public class AddMed extends Activity implements OnClickListener {

```
Button submit;
    EditText name, dossage;
    DBAdapter database;
    String names, amount;
    String total;
    ArrayList<String> btr;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addmed);
        submit = (Button) findViewById(R.id.bSubmit);
        name = (EditText) findViewById(R.id.etNameOfMed);
        dossage = (EditText) findViewById(R.id.etHowMuch);
    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        switch (arg0.getId()) {
        case R.id.bSubmit:
            names = name.getText().toString();
            amount = dossage.getText().toString();
            total = names + amount;
            btr.add(total);
            database.open();
            database.insertEntry(btr, btr);
            database.close();
            break;
        }
    }

} 
```

然后我有另一个带有文本视图的类，我尝试创建一个新的 DBAdatper 实例并使用光标中的 getAllEntries 方法，但我对参数感到困惑。有人可以启发我吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:48:47.257

您引用的示例似乎只是试图充当`SQLLiteDatabase`类的包装器。该示例列出了 getAllEntries 中每个参数的用途。似乎有很多参数，但如果您不想对结果集进行分组或排序，其中一些参数可以为空。以下是每个参数的作用列表，取自`SQLLiteDatabase` [API](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)：

![在此处输入图像描述](../Images/2033734c24ae517498ec568b00ff3104.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:44:02.873

你找到的教程提供了一个试图自动为你做很多事情的类：如果你得到它很好，但如果你没有得到它就不是很好。

我建议你放弃这个非常复杂的例子，而是自己从头开始，使用更合适的教程。 [http://www.vogella.com/](http://www.vogella.com/)有很多很好的教程，包括 SQLite 数据库：[SQLite](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:51:32.907

从[SQLiteDatabase 文档中查询](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

```
public Cursor query (String table, String[] columns, String selection, String[]
selectionArgs, String groupBy, String having, String orderBy, String limit)

Added in API level 1

Query the given table, returning a Cursor over the result set.

Parameters

table       The table name to compile the query against.

columns     A list of which columns to return. Passing null will return all
            columns, which is discouraged to prevent reading data from storage
            that isn't going to be used.

selection   A filter declaring which rows to return, formatted as an SQL WHERE
            clause (excluding the WHERE itself). Passing null will return all rows for
            the given table.

selectionArgs   You may include ?s in selection, which will be replaced by the
                values from selectionArgs, in order that they appear in the
                selection. The values will be bound as Strings.

groupBy     A filter declaring how to group rows, formatted as an SQL GROUP BY 
            clause (excluding the GROUP BY itself). Passing null will cause the rows
            to not be grouped.

having      A filter declare which row groups to include in the cursor, if row
            grouping is being used, formatted as an SQL HAVING clause (excluding the
            HAVING itself). Passing null will cause all row groups to be included,
            and is required when row grouping is not being used.

orderBy     How to order the rows, formatted as an SQL ORDER BY clause (excluding
            the ORDER BY itself). Passing null will use the default sort order, which
            may be unordered.

limit       Limits the number of rows returned by the query, formatted as LIMIT
            clause. Passing null denotes no LIMIT clause. 
```

假设您有一个名为 table1 的表，其中包含名为 x、y、z 的三列。你想做以下声明：

```
SELECT x,y FROM table1 WHERE x = 'squirrels' AND y = 'cats'; 
```

表参数只是表的名称（“table1”）。columns 参数将是您有兴趣获取其值的列（在本例中为“x”和“y”列）。选择参数将是“x = ? AND y = ?”。selectionArgs 参数将是一个包含“squirrels”和“cats”的数组。如果你知道 SQL，其余的就很容易解释了。

# extjs - 如何让我的自定义主题为 iOS 模拟器上为 Native 打包的 Sencha Touch 2 应用程序加载？

> ID：14130209
> 
> 赞同：0
> 
> 时间：2013-01-02T22:24:24.707
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我在 Sencha Touch 2 中创建了一个应用程序，并通过密切关注“Theming with Sencha Touch”教程 (http://www.sencha.com/learn/theming-sencha-touch) 对其进行主题化。我的 CSS 在开发和生产中加载。但是，它不会在 Native 中加载。

我尝试更改我的 Compass config.rb 文件`environment=:native`并编译了 sass，我什至将生成的样式表包含在 app.json 中；不工作。

在 iOS 模拟器中，除了我的自定义 CSS 不会修改应用程序的外观（因此，我想，它不会加载）之外，应用程序在各个方面都可以加载和运行。

**我的问题是：**我必须做些什么才能让我的自定义主题在 Native 中工作？

这是我的 index.html：

```
<!DOCTYPE HTML>
<html manifest="" lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>App</title>
    <!-- The line below must be kept intact for Sencha Command to build your application -->
    <script id="microloader" type="text/javascript" src="touch/microloader/development.js"></script>

</head>
<body></body>
</html> 
```

这是我的 /styles/config.rb：

```
# Get the directory that this configuration file exists in
dir = File.dirname(__FILE__)

# Load the sencha-touch framework
load File.join(dir, '..', 'touch', 'resources', 'themes')

# Look for any *.scss files in same directory as this file
# Place compiled *.css files in the parent directory
sass_path    = dir
css_path     = File.join(dir, "..")
output_style = :compressed
environment  = :native 
```

这是我的 app.json：

```
{
    /**
     * The application's namespace, used by Sencha Command to generate classes
     */
    "name": "App",

    /**
     * The file path to this application's front HTML document, relative to this app.json file
     */
    "indexHtmlPath": "index.html",

    /**
     * The absolute URL to this application in development environment, i.e: the URL to run this application
     * on your web browser during development, e.g: "http://localhost/myapp/index.html".
     *
     * This value is needed when build to resolve your application's dependencies if it requires server-side resources
     * that are not accessible via file system protocol.
     */
    "url": null,

    /**
     * List of all JavaScript assets in the right execution order.
     * Each item is an object with the following format:
     *      {
     *          "path": "path/to/script.js" // Path to file, if local file it must be relative to this app.json file
     *          "remote": true              // (Optional)
     *                                      // - Defaults to undefined (falsey) to signal a local file which will be copied
     *                                      // - Specify true if this file is a remote file which will not to be copied
     *          "update": "delta"           // (Optional)
     *                                      //  - If not specified, this file will only be loaded once, and
     *                                      //    cached inside localStorage until this value is changed.
     *                                      //  - "delta" to enable over-the-air delta update for this file
     *                                      //  - "full" means full update will be made when this file changes
     *
     *      }
     */
    "js": [
        {
            "path": "touch/sencha-touch.js"
        },
        {
            "path": "app.js",
            "bundle": true,  /* Indicates that all class dependencies are concatenated into this file when build */
            "update": "delta"
        }
    ],

    /**
     * List of all CSS assets in the right inclusion order.
     * Each item is an object with the following format:
     *      {
     *          "path": "path/to/item.css" // Path to file, if local file it must be relative to this app.json file
     *          "remote": true             // (Optional)
     *                                     // - Defaults to undefined (falsey) to signal a local file which will be copied
     *                                     // - Specify true if this file is a remote file which will not to be copied
     *          "update": "delta"          // (Optional)
     *                                     //  - If not specified, this file will only be loaded once, and
     *                                     //    cached inside localStorage until this value is changed to either one below
     *                                     //  - "delta" to enable over-the-air delta update for this file
     *                                     //  - "full" means full update will be made when this file changes
     *
     *      }
     */
    "css": [
        {
            "path": "resources/css/app.css",
            "update": "delta"
        },
        {
            "path": "default-theme.css",
            "update": "delta"
        }
    ],

    /**
     * Used to automatically generate cache.manifest (HTML 5 application cache manifest) file when you build
     */
    "appCache": {
        /**
         * List of items in the CACHE MANIFEST section
         */
        "cache": [
            "index.html"
        ],
        /**
         * List of items in the NETWORK section
         */
        "network": [
            "*"
        ],
        /**
         * List of items in the FALLBACK section
         */
        "fallback": []
    },

    /**
     * Extra resources to be copied along when build
     */
    "resources": [
        "resources/images",
        "resources/icons",
        "resources/startup"
    ],

    /**
     * File / directory name matchers to ignore when copying to the builds, must be valid regular expressions
     */
    "ignore": [
        "\.svn$"
    ],

    /**
     * Directory path to store all previous production builds. Note that the content generated inside this directory
     * must be kept intact for proper generation of deltas between updates
     */
    "archivePath": "archive",

    /**
     * Default paths to build this application to for each environment
     */
    "buildPaths": {
        "testing": "build/testing",
        "production": "build/production",
        "package": "build/package",
        "native": "build/native"
    },

    /**
     * Build options
     */
    "buildOptions": {
        "product": "touch",
        "minVersion": 3,
        "debug": false,
        "logger": false
    },

    /**
     * Uniquely generated id for this application, used as prefix for localStorage keys.
     * Normally you should never change this value.
     */
    "id": "<<<REDACTED>>>"
} 
```

]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:09:12.327

这里出现了答案：[http](http://www.sencha.com/forum/showthread.php?198112-NATIVE-Theming-and-Css) ://www.sencha.com/forum/showthread.php?198112-NATIVE-Theming-and-Css 。从表单的角度来看，它看起来可能不正确（意思是，必须有一种更合适的方法来做到这一点，与问题中引用的 Theming Sencha Touch 教程一致）。但是，该解决方案*确实*有效。

# asp.net-mvc - 在实体框架代码优先模型中编辑数据

> ID：14130211
> 
> 赞同：-1
> 
> 时间：2013-01-02T22:24:34.353
> 
> 标签：asp.net-mvc, entity-framework, code-first

在下面的代码中，我有 country=1、school=2 和 course=3。但在那之后，当我试图分配类似的，userdata.UserCountry.CountryId=Convert.ToInt32(country)。它说“对象引用未设置为.......对象实例”表示空值。

```
[HttpPost]
    public ActionResult Settings(FormCollection frm)
    {

            UsersContext db = new UsersContext();

            var userdata = db.UserDetails.Where(k => k.UserId == WebSecurity.CurrentUserId).FirstOrDefault();

            string country = frm["UserCountry"]; // here I have 1.
            string school = frm["UserSchool"];
            string course = frm["UserCourse"];

            userdata.UserCountry.CountryId= Convert.ToInt32(country); // Here i have the null reference error.. !!
            userdata.UserSchool.SchoolId = Convert.ToInt32(school);
            userdata.UserCourse.CourseId = Convert.ToInt32(course);
            userdata.Link = frm["Link"];
            userdata.FullName = frm["FullName"];
            userdata.Email = frm["Email"];
            userdata.About = frm["About"];

            db.SaveChanges();

            return Content(Boolean.TrueString);
    } 
```

这是模型：

```
public class UserDetail
{
    public int Id { get; set; }
    public int UserId { get; set; }
    [Required]
    [Display(Name="Full name")]
    public string FullName { get; set; }
    public string Link { get; set; }
    public bool? Verified { get; set; }

    [Required]
    [Display(Name="Email")]
    public string Email { get; set; }

    [Display(Name="About")]
    public string About { get; set; }
    public virtual School UserSchool { get; set; }
    public virtual Course UserCourse { get; set; }

    [Display(Name = "Country")]
    public virtual Country UserCountry { get; set; }

} 
```

谁能帮我解决这个问题...plz。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:27:11.117

尝试在查询结果中包含相关实体：

```
 var userdata = db.UserDetails
                  .Include("UserCountry")
                  .Include("UserSchool")
                  .Include("UserCourse")
                  .Where(k => k.UserId == WebSecurity.CurrentUserId)
                  .FirstOrDefault(); 
```

顺便说一句，验证您是否确实拥有带有您搜索的 UserId 的 UserDetails。

# objective-c - NSApplescript 将不接受 initWithContentsOfURL

> ID：14130213
> 
> 赞同：0
> 
> 时间：2013-01-02T22:24:40.067
> 
> 标签：objective-c, macos, cocoa, applescript

我是新手，所以请多多包涵。我的问题出在以下代码中：

AppleScriptController.h

```
#import <Foundation/Foundation.h>
#import <Cocoa/Cocoa.h>        
@interface AppleScriptController : NSObject    
-(void)test;
@end 
```

AppleScriptController.m

```
#import "AppleScriptController.h"    
@implementation AppleScriptController

-(void)test{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"beep" 
                                                 ofType:@"scpt"];    
    NSAppleScript *script2 = [[NSAppleScript alloc]
                          initWithContentsOfURL:[NSURL fileURLWithPath:path] 
                          error:nil];    
    [script2 executeAndReturnError:nil];    
}
@end 
```

（beep.scpt 的副本在支持文件中）

主文件

```
#import <Foundation/Foundation.h>
#import "AppleScriptController.h"

AppleScriptController *myScript = [[AppleScriptController alloc] init];
[myScript test]; 
```

当我运行它时，我收到以下错误消息：线程 1：程序收到信号：“SIGABRT”

```
NSAppleScript *script2 = [[NSAppleScript alloc]
                          initWithContentsOfURL:[NSURL fileURLWithPath:path] 
                          error:nil];    Thread 1: Program received signal: "SIGABRT" 
```

并得到以下错误代码：

> 2013-01-02 23:09:09.269 Test8[1627:707] ***终止应用程序
> 
> 由于未捕获的异常“NSInvalidArgumentException”，
> 
> 原因：' *** -[NSURL initFileURLWithPath:]: nil 字符串
> 
> 范围'
> 
> ***首先抛出调用栈：
> 
> (
> 
> 0 核心基础 0x00007fff8db7df56 __exceptionPreprocess + 198
> 
> 1 libobjc.A.dylib 0x00007fff95dfbd5e objc_exception_throw + 43
> 
> 2 核心基础 0x00007fff8db7dd8a +[NSException raise:format:arguments:] + 106
> 
> 3 CoreFoundation 0x00007fff8db7dd14 +[NSException raise:format:] + 116
> 
> 4 基础 0x00007fff8fd6ae40 -[NSURL(NSURL) initFileURLWithPath:] + 78
> 
> 5 基础 0x00007fff8fd6add9 +[NSURL(NSURL) 文件URLWithPath:] + 47
> 
> 6 Test8 0x0000000100000d9d -[AppleScriptController 测试] + 205
> 
> 7 测试8 0x0000000100000cac 主要 + 108
> 
> 8 测试8 0x0000000100000c34 开始 + 52
> 
> 9 ？？？0x0000000000000001 0x0 + 1
> 
> )
> 
> 终止调用抛出异常sharedlibrary apply-load-rules all
> 
> 当前语言：自动；目前客观-c
> 
> (gdb)

当我将 m 文件更改为 initWithSource 时，程序运行良好：

```
NSAppleScript *script1 = [[NSAppleScript alloc] initWithSource:@"beep 10"];
[script1 executeAndReturnError:nil]; 
```

我在 OS X 10.7.5 上运行 XCode 4.2.1

请告诉我我哪里出错了。我确定这是某种新手错误，但我似乎无法找到它。

任何建议都感激不尽！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:39:14.220

从错误代码：

```
reason: '* -[NSURL initFileURLWithPath:]: nil string 
```

所以在这里：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"beep" 
                                             ofType:@"scpt"];    
NSAppleScript *script2 = [[NSAppleScript alloc]
                      initWithContentsOfURL:[NSURL fileURLWithPath:path] 
                      error:nil]; 
```

路径为零。因此，该文件很可能不在捆绑包中。将其添加为项目的目标。

**怎么做**

例如，昨天我需要在包中添加鲨鱼的图像，这就是如何做到的：

![在此处输入图像描述](../Images/26276a9c79ffbdeb7d2825b285295f2c.png)

# java - Image.getBitmap() 返回空值？

> ID：14130215
> 
> 赞同：0
> 
> 时间：2013-01-02T22:25:03.843
> 
> 标签：java, android, teechart

考虑这段代码：

```
Image img = chart.getExport().getImage().image(WIDTH, HEIGHT); 
```

我希望它使用以下代码返回实际的位图：

```
img.getBitmap(); 
```

但是，这将返回 null！为什么我无法检索底层位图？它是如何产生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:48:03.257

尝试使用`bitmap`而不是`getBitmap()`. 以下代码在这里对我来说似乎很好用：

```
Bar bar = new Bar(tChart1.getChart());
bar.fillSampleValues();
bar.setColorEach(true);

tChart1.doInvalidate();
Image img = tChart1.getExport().getImage().image(400, 200);
MediaStore.Images.Media.insertImage(getContentResolver(), img.bitmap, "test.jpg", "test.jpg"); 
```

# php - 文件上传和输入文本字段一起

> ID：14130221
> 
> 赞同：0
> 
> 时间：2013-01-02T22:25:19.867
> 
> 标签：php, html

我的表单中有文件上传和文本输入字段，我想要在同一页面上显示文件上传的错误消息，如果有错误不要转到下一页...如果文件上传有错误还将文本字段的值返回到同一页面......我该怎么做？

```
<form action="send.php" method="post"  enctype="multipart/form-data">
<input type="hidden" name="submited" value="true" /><br>
<label for="file">Choose Photo:</label>
<input type="file" name="file" required><br>
First Name:<input type="text" name="fname" required><br>
Last Name:<input type="text" name="lname" required><br>
Choose Username:<input type="text" name="username" required><br>
Age:<input type="text" name="age" required><br>
<input type="submit" value="Submit" name="submit" >

</form>
</body>
</html> 
```

这是文件上传的 php 代码....我将把数据从`<input type="text">`数据库中插入，我现在没有代码...

```
 <?php
ini_set( "display_errors", 0);
if(isset($_REQUEST['submited'])) {

// your save code goes here

$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 2097152)
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
else
{
echo "";

if (file_exists("images/" . $_FILES["file"]["name"]))
{
echo "<font color='red'><b>We are sorry, the file you trying to upload already exists.</b></font>";
  }

else
{
move_uploaded_file($_FILES["file"]["tmp_name"],
"images/" . $_FILES["file"]["name"]);
echo "<font color='green'><b> Success! Your photo has been uploaded.</b></font>";
}
}
}
else
{
echo "<font color='red'><b>We are sorry, the file you trying to upload is not an image or it exceeds 2MB in size.</b></font><br><font color='blue'><i>Only images under size of 2MB are allowed</i></font>.";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:29:14.413

如果发生错误，只需让您的 PHP 重新生成填写了字段的表单（即 sst value 属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T14:35:51.263

```
<?php
    if (!empty($_POST)){
        //send.php code
    }
?>

<form action="send.php" method="post"  enctype="multipart/form-data">
    <input type="hidden" name="submited" value="true" /><br>
    <label for="file">Choose Photo:</label>
    <input type="file" name="file" required><br>
    First Name:<input type="text" name="fname" required><br>
    Last Name:<input type="text" name="lname" required><br>
    Choose Username:<input type="text" name="username" required><br>
    Age:<input type="text" name="age" required><br>
    <input type="submit" value="Submit" name="submit" >
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:30:14.430

嘿，

要将其保持在同一页面上，您可以删除该操作

> 发送.php

然后将此处显示的 html 和 php 代码添加到同一文件中。执行该文件时，它将保留在同一页面上。

# powershell - 错误：说明 = 无效查询

> ID：14130226
> 
> 赞同：6
> 
> 时间：2013-01-02T22:25:46.240
> 
> 标签：powershell, powershell-2.0

由于混乱的组策略对象，多台计算机在不应该安装的时候安装了 TightVNC。GPO 已消失，因此仅从那里删除软件不是我所知道的选项。因此，我正在编写脚本以便从计算机列表中删除 PowerShell。

这是我的脚本：

```
if ($args.length -ne 1) {
    Write-Warning "Must pass computer name, ending script.";
    break
}

$pc = $args[0]

Write-Output "Scanning $pc for TightVNC...."
$prod = wmic /node:$pc product get name | where {$_ -match "TightVNC"}
if ($prod) {
    Write-Output "Found TightVNC, attempting uninstall...."
    wmic /node:$pc product where name="TightVNC" call uninstall
} else {
    Write-Warning "Could not find TightVNC on $pc."
}
Write-Output "Done." 
```

现在，我的输出如下：

```
Scanning [computer] for TightVNC....
Found TightVNC, attempting uninstall....
ERROR:
Description = Invalid query
Done. 
```

但是，如果我将第二个 wmic 行复制并粘贴到提升的命令提示符中并将 $pc 替换为 [computer]，它就可以正常工作。我的 PowerShell 窗口被提升了。

有谁知道为什么我的剧本会适合这个？我知道第一个 wmic 命令确实需要很长时间才能完成（> = 5 分钟），但它在实际工作的第二个命令窗口中也是如此。我很感激对此的任何见解。

注意：我使用 wmic 是因为这里的计算机没有正确配置为远程 PowerShell 访问。它在我要做的事情清单上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T03:01:53.480

您正在与 PowerShell 的字符串解析发生冲突。试试这个：

```
wmic /node:$pc product where name=`"TightVNC`" call uninstall 
```

请注意，对于 PowerShell V3 上的用户，您可以使用：

```
wmic /node:$pc --% product where name="TightVNC" call uninstall 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-27T04:36:44.333

[这是来自http://www.tinyint.com/index.php/2011/04/20/escaping-quotes-in-powershell-exe-command-via-command-prompt/](http://www.tinyint.com/index.php/2011/04/20/escaping-quotes-in-powershell-exe-command-via-command-prompt/)的答案，对我有用：

```
wmic /node:$pc product where 'name=\"TightVNC\"' call uninstall 
```

# python - heroku 应用程序中新对象的时间戳设置为 heroku 的服务器启动时间，而不是实际的 utcnow 时间

> ID：14130239
> 
> 赞同：0
> 
> 时间：2013-01-02T22:26:48.767
> 
> 标签：python, django, postgresql, heroku

我在 heroku 上有一个应用程序，它为新对象设置了不正确的时间戳。我无法弄清楚为什么我的生活。

发生了什么：

1.  我正在 heroku-run 网站上提交表格。

2.  Django 视图创建新对象并保存

3.  models.py 有“ *ts = models.DateTimeField(default = datetime.now(utc))* ”所以它应该在提交时保存 utc 时间戳（它在本地执行），但在 heroku 上它保存服务器启动时的时间戳.

模型.py：

```
class NewsArticle(models.Model):
    link = models.URLField(max_length = 2000)
    title = models.CharField(max_length = 300)
    img_path = models.CharField(null = True, max_length = 300)
    ts = models.DateTimeField(default = datetime.now(utc))
    user = models.ForeignKey(User)
    hostname = models.CharField(max_length = 300)
    deleted = models.BooleanField(default = False) 
```

视图.py：

```
news_article = NewsArticle(...)
news_article.save()

print news_article.ts
print datetime.now(utc)
import sys
sys.stdout.flush() 
```

heroku 日志中的相应输出（我在 22:00:34 UTC 重新启动了 Heroku 服务器）：

```
2013-01-02T22:01:56+00:00 app[web.1]: 2013-01-02 22:00:34.746547+00:00
2013-01-02T22:01:56+00:00 app[web.1]: 2013-01-02 22:01:56.919520+00:00 
```

15分钟后又一次：

```
2013-01-02T22:15:46+00:00 app[web.1]: 2013-01-02 22:00:34.746547+00:00
2013-01-02T22:15:46+00:00 app[web.1]: 2013-01-02 22:15:46.489815+00:00 
```

显然，models.py 中发生的 datetime.now(utc) 调用有问题，但我不知道为什么。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:41:55.910

您的问题可能在于您如何设置默认值。以下两组代码相同：

```
now_at_import = datetime.now(utc)
MyModel
  ...
  ts = models.DateTimeField(default = now_at_import)

#is exactly the same as
MyModel
  ...
  ts = models.DateTimeField(default = datetime.now(utc)) 
```

你想要的是：

```
def get_utc_now():
  return datetime.now(utc)

MyModel
  ...
  ts = models.DateTimeField(default = get_utc_now) 
```

# json - JSON 数组结构变体

> ID：14130245
> 
> 赞同：7
> 
> 时间：2013-01-02T22:27:23.257
> 
> 标签：json

以下是 3 种 JSON 数组结构格式...

第一个，在 JSON.org 上概述的，是我熟悉的：

**格式 #1**

```
{"People": [
  {
    "name": "Sally",
    "age": "10"
  },
  {
    "name": "Greg",
    "age": "10"
  }
]} 
```

第二个是命名数组元素的细微变化。我个人不关心它；您不在代码中命名数组的元素（它们通过索引访问），为什么要在 JSON 中命名它们？

**格式 #2**

```
{"People": [
  "Person1": {
    "name": "Sally",
    "age": "10"
  },
  "Person2": {
    "name": "Greg",
    "age": "10"
  }
]} 
```

最后一个是另一种变体，与**Format #2**非常相似，但我有一种预感，这个是不正确的，因为它似乎有额外的花括号，它们不属于它们。

**格式 #3**

```
{"People": [
  {
    "Person1": {
      "name": "Sally",
      "age": "10"
    }
  },
  {
    "Person2": {
      "name": "Greg",
      "age": "10"
    }
  }
]} 
```

同样，我相信**Format #1**是有效的，因为它是 JSON.org 中概述的 JSON Array 格式。但是，**格式 #2**和**格式 #3**呢？其中任何一个都被认为是有效的 JSON 吗？如果是，这些格式是从哪里来的？我没有在 JSON.org 或 Wikipedia 上看到它们的概述。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T22:34:48.360

#1 和 #3 都是（几乎 - 缺少逗号）有效的 JSON，但编码不同的结构：

*   #1 给你一个**对象****数组**，每个对象都有名字和年龄**字符串属性**
*****   #3 给你一个**对象****数组**，每个对象都有一个**对象属性**，每个对象都有名称和年龄**字符串属性**。****

 ******#2 无效：数组（由`[`...定义`]`）可能不包含属性名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-22T12:15:09.763

**Format#1**的解决方案 默认情况下：

```
array=[];
object={}; 
```

JSON 代码：

```
var Json = {
    People:[]
};
Json.People.push({
     "name": "Sally",
     "age": "10"                        
});
Json.People.push({
     "name": "Greg",
     "age": "10"                        
}); 
```

JSON结果：

`{"People": [ { "name": "Sally", "age": "10" }, { "name": "Greg", "age": "10" } ] }`******

# turing-machines - 图灵机和想出一个想法

> ID：14130247
> 
> 赞同：1
> 
> 时间：2013-01-02T22:27:34.283
> 
> 标签：turing-machines, computation-theory

我读了很多关于图灵机的东西并了解它是如何工作的，但是我无法掌握（而且似乎没有一本书试图教的）是我应该如何解决我要解决的问题？我的意思是：例如，检查一个单词是否是回文，由我正在学习的书中的 11 个状态组成。就我目前的知识水平而言，至少可以说，仅仅坐在一张空纸上并想出所有这些状态似乎几乎是不可能的。当我尝试做这样的事情时，我立即卡住了，因为我不知道我应该怎么做才能让这些状态以某种方式“一起”工作。我在编程时没有这样的问题，但是在这里，我只是不知道应该如何处理由一些 n-teen 状态组成的东西。你能给我一些学习的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-01T13:09:58.570

图灵机是一种架构模型，与冯诺依曼机器相距不远。因此，它是一个非常低级的计算模型，使用它们解决编程问题的最佳方法是使用与传统硬件相同的技术，即通过抽象。

人们认为图灵机不是组合式的，但事实并非如此。将图灵机实现顺序组合、条件和循环的转换功能结合起来并不难。然后，从一个执行字符比较、字符交换和类似操作的基本机器的小型库开始，您可以构建非常复杂的程序。

我们使用这种技术编写了通用图灵机，并在 Matita Proof Assistant（类似于 Coq 的系统）中证明了它的正确性。参考是：

Asperti, Ricciotti “多磁带图灵机的形式化”，TCS 603，2015。

# ios - ios，设备上的文档文件夹为空，但模拟器上没有？

> ID：14130248
> 
> 赞同：0
> 
> 时间：2013-01-02T22:27:36.140
> 
> 标签：ios, plist

当我在模拟器上 NSLog 我的 Documents 目录时，我看到了文件

```
2013-01-02 17:02:02.398 ForPlayAtl[2113:1a903] docs check (
"biz.plist",
"sched.plist",
"ver.plist",

)
2013-01-02 17:02:02.400 ForPlayAtl[2113:1a903] docs path check /Users/Dude/Library/Application Support/iPhone Simulator/6.0/Applications/ 
```

当我在我的设备上做同样的事情时，我得到

```
2013-01-02 16:56:01.896 ForPlayAtl[2253:907] docs check (
)
2013-01-02 16:56:01.900 ForPlayAtl[2253:907] docs path check /var/mobile/Applications/A7B36683-C41B-4DF5-A9C3-1FDF0F0DCBDD/Documents 
```

我的功能看起来像这样

```
-(NSString *) dataFilePath
{
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [path objectAtIndex:0];

    return [documentDirectory stringByAppendingPathComponent:@"sched.plist"];

    } 
```

区分大小写已被检查。我的工作假设是 .plist 从 /Documents 目录复制到设备？不 ？我是否需要先初始化一个 .plist ？

我错过了什么......感谢您的帮助。非常感激

# cucumber - sublime 有彩色黄瓜日志文件吗？

> ID：14130249
> 
> 赞同：0
> 
> 时间：2013-01-02T22:27:39.697
> 
> 标签：cucumber, sublimetext2

我已经到了 ANSICON 在发生错误时对我没有帮助的地步。

如果我运行一个完整的冒烟测试并且前几个功能之一发生错误，它将超出 ansicon 的缓冲区，迫使我重新运行该特定功能。

我的解决方案是将其发布到日志文件...

```
cucumber --tags @smoke > cukelog.log 
```

这里唯一的悲伤是我失去了颜色:(

这让我相信 sublime 有一个彩色黄瓜日志文件的附加功能（不是 .feature）

有这样的动物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:50:11.967

您可以使用 Cucumber 格式化程序来格式化 Cucumber 输出。

我认为标志`--format html --out output.html`将满足您的需求。您可以通过键入查看其他格式化程序`cucumber --help`

# objective-c - GCC / LLVM编译优化转换？

> ID：14130251
> 
> 赞同：0
> 
> 时间：2013-01-02T22:28:02.297
> 
> 标签：objective-c, gcc, casting, compilation, llvm-gcc

我正在为一个 Objective-C 项目编写一系列匿名函数（即这些函数不是特定于类/实现是隐藏的），我遇到了一个有趣的问题......

我有一个宏函数： div(c)((CGFloat)c/255.0f) 这种用法几乎总是类似于 div(0.0f)，但其他人可能不知道它需要一个浮点数，所以 div(0) 是可能的

我的问题是：当变量被显式转换并且变量与转换的类型相同时，转换是否会损失任何性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:44:46.397

强制转换是一个承诺，不是数据类型，不是方法，也不是扩展。你只是让编译器对一个类型感到舒服。没有什么应该改变执行，因此没有什么可以优化执行。如果你担心你请求的参数的类型，你总是可以在操作之前明确地将它存储在不同的 CGFloat 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:56:50.777

机器使用内存。最后，您使用的所有变量都只是原始字节。

那么为什么 Objective-C 有类型呢？在编译时保护程序员，显示错误和警告。

在运行时，您所做的所有操作都是在内存上进行的，因此您无需担心强制转换的开销。

# javascript - jQuery 不会返回预期的 .text 值

> ID：14130253
> 
> 赞同：0
> 
> 时间：2013-01-02T22:28:28.953
> 
> 标签：javascript, jquery, html

我是 jQuery 新手，我有一个包含这个 div 元素的 html 文件。

```
<div id="test div">Test Text</div> 
```

和这个 div 元素。

```
<div id="dump contents"></div> 
```

在我的 javascript 文件中，我有这个：

```
var testvariable = $("#test div").text();
$("#dump contents").html(testvariable); 
```

但无论我做什么，什么都没有发生:(

有什么建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T22:30:24.470

`id`属性应该没有空格

```
<div id="test-div">Test Text</div> 
```

和

```
<div id="dump-contents"></div> 
```

JavaScript：

```
var testvariable = $("#test-div").text();
$("#dump-contents").html(testvariable); 
```

来自[w3.org](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#the-id-attribute)

> id 属性指定其元素的唯一标识符 (ID)。该值在元素的主子树中的所有 ID 中必须是唯一的，并且必须包含至少一个字符。该值不得包含任何空格字符。

# php - Nanoc 的 HAML 代码中的 PHP 代码过滤器

> ID：14130254
> 
> 赞同：3
> 
> 时间：2013-01-02T22:28:30.533
> 
> 标签：php, syntax, haml, contact-form, nanoc

我想在我的 nanoc 网站上制作一个联系表格，我需要在我的`.haml`文件中放置一些 php 代码 - 有什么方法（过滤器可能吗？）可以轻松实现这一点，或者我必须将整个页面保存为`.php`（并使用标准 html语法而不是haml？）。

或者可能有纯 Ruby 解决方案（托管在 github 上可以实现？）

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T03:19:04.323

您可以使用 :plain 过滤器来保留 php，它不会解析过滤后的文本。当您保留多行 php 时，这很有用。

前任：

```
:plain
  <?php foreach ($es as $e) {
    echo $e;
  } ?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T05:28:58.280

Haml 3.2 即将发布（rc3 刚刚[发布](https://groups.google.com/forum/#!topic/haml/m3mFOsT_s08)），并且应该有一个新的[`haml-contrib`](https://github.com/haml/haml-contrib)gem 随之发布。`haml-contrib`有一个[PHP 过滤器](https://github.com/haml/haml-contrib/blob/master/lib/haml/filters/php.rb)，可能是您正在寻找的。

php 过滤器的文档注释说：

```
# A PHP Filter for Haml. This simply wraps code inside <?php ?> tags. While this
# may seem like a strange idea, some people use Haml to generate mostly static
# HTML documents that then include small amounts of PHP.
#
# This code also serves as an example of how to implement a simple filter for
# Haml. 
```

它实际上并没有比[Kevin Granger 回答](https://stackoverflow.com/a/14575116/214790)`:plain`中的过滤器做得更多，但可能会使事情变得更容易。

一个例子：

```
$ cat php.haml 
:php
  foreach ($es as $e) {
    echo $e;
  }
$ haml -rhaml/filters/php php.haml 
<?php
  foreach ($es as $e) {
    echo $e;
  }
?> 
```

# c# - 使用 C# 在 ASP.Net MVC3 或 MVC4 中进行条件编译

> ID：14130255
> 
> 赞同：0
> 
> 时间：2013-01-02T22:28:32.753
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

C# 预处理器 [http://msdn.microsoft.com/en-us/library/4y6tbswk(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/4y6tbswk(v=vs.100).aspx)

有什么方法可以通过条件编译来控制 MVC 视图、控制器、模型？这适用于不同版本的软件版本。

例如：发布 1.1 发布 1.2 等...

我的意思是某些功能在基于条件编译的 1 个版本中将不可用。这是为了不维护不同的分支并最终将它们合并在一起。

仅供参考...我在 vs 2010 中找不到选项条件编译选项，我曾经使用 Visual Basic 6.0 执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:35:21.000

好吧，你*可以*：

型号/控制器：

```
 #if DEBUG
     // your content
  #else
     // your content
  #endif 
```

浏览量（剃刀）：

```
@{
  #if DEBUG
     // your content
  #else
     // your content
  #endif
} 
```

但这听起来不是支持版本控制的好方法......（JMO）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:35:06.667

您需要两个项目文件，每个版本一个，并自己定义符号。[看到这个答案](https://stackoverflow.com/questions/1205908/what-net-framework-and-c-sharp-version-should-i-target-with-my-class-library#answer-1206049)。

# django - 如何为 django 分页设置语言？

> ID：14130258
> 
> 赞同：3
> 
> 时间：2013-01-02T22:28:57.040
> 
> 标签：django, django-pagination

如您所见，django-pagination 有波兰语（pl）翻译 - [https://github.com/ericflo/django-pagination/tree/master/pagination/locale](https://github.com/ericflo/django-pagination/tree/master/pagination/locale)但我不知道如何为 django-pagination 设置波兰语? （默认英文）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:43:06.643

这应该自动发生。检查您的 django 设置是否`USE_I18N`设置为`True`，如果您`LANGUAGE_CODE`设置为`pl`.

有关更多信息，请查看[django 本地化页面](https://docs.djangoproject.com/en/1.4/topics/i18n/)。您可以在[此处](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/)找到有关 django 中的翻译如何工作的更详细的文档。

还有一个[语言代码列表](http://www.i18nguy.com/unicode/language-identifiers.html)，我想`pl`应该是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T15:55:27.327

您可以更改浏览器的语言设置，这将在每个请求中发送适当的标头并触发要使用的翻译，或者您可以提供语言设置选择，以便用户可以选择他们的语言。

您可以滚动自己的代码来提供此接口或使用[django-user-accounts](http://github.com/pinax/django-user-accounts/)。

您可能还想检查是否安装了本文档中所述的适当[中间件](https://docs.djangoproject.com/en/1.0/topics/i18n/#how-django-discovers-language-preference)。

# perl - 具有多个设备的 Perl NetSNMP 扩展

> ID：14130259
> 
> 赞同：0
> 
> 时间：2013-01-02T22:28:58.303
> 
> 标签：perl, net-snmp

我有一台带有一些温度传感器的机器（基于 Debian），我想从一个脚本通过 snmp 查询它们。我可以用一个传感器工作，但是当我插入另一个传感器时我很挣扎。

我要做的是遍历每个设备，并给每个设备一个 id，然后将此 ID 用作 OID 的一部分，然后给它一个值。

我以前从未使用过 snmp，而且我的 perl 不是很好，因此非常感谢任何帮助。下面是我的代码：

```
#!/usr/bin/perl

use NetSNMP::agent (':all');
use NetSNMP::ASN qw(ASN_OCTET_STR ASN_INTEGER);

$BASE_OID=".1.3.6.1.4.1.41050";
$dev_id=1;
$string_value;
$integer_value;

sub pimon_handler {
  my ($handler, $registration_info, $request_info, $requests) = @_;
  my $request;
  my $oid_key;

  for($request = $requests; $request; $request = $request->next()) {

    $oid_key=$BASE_OID . '.' . $dev_id;
    my $oid = $request->getOID();
    if ($request_info->getMode() == MODE_GET) {
      if ($oid == new NetSNMP::OID($oid_key . '.0')) {
        $request->setValue(ASN_OCTET_STR, $string_value);
      }
      elsif ($oid == new NetSNMP::OID($oid_key . '.1')) {
        $request->setValue(ASN_INTEGER, $integer_value);
      }
    } elsif ($request_info->getMode() == MODE_GETNEXT) {
      if ($oid == new NetSNMP::OID($oid_key . '.0')) {
        $request->setOID($oid_key . '.1');
        $request->setValue(ASN_INTEGER, $integer_value);
      }
      elsif ($oid < new NetSNMP::OID($oid_key . '.0')) {
        $request->setOID($oid_key . '.0');
        $request->setValue(ASN_OCTET_STR, $string_value);
      }
    }
  }
}

#location of where we are going to find the 1wire devices
@sensors = `cat /sys/bus/w1/devices/w1_bus_master1/w1_master_slaves`;
chomp(@sensors);

#loop through the sensors we find
foreach $line(@sensors) {

        #work out the temp we have got. Need to change this for other sensor types
        $output = `cat /sys/bus/w1/devices/$line/w1_slave`;
        $output =~ /t=(?<temp>\d+)/;
        $integer_value = sprintf "%.0f",$+{temp} / 1000;
        $string_value = $line;

        my $agent = new NetSNMP::agent();
        $agent->register("Pimon$looptest", $BASE_OID . '.' . $dev_id,
                 \&pimon_handler);

        print "Dev $dev_id temp $line temp is $integer_value\n";
        $dev_id ++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:31:38.350

您是否收到任何错误或输出？

我怀疑您的问题在于您通过对 cat 进行脱壳而不是打开文件并循环遍历逐行内容来读取数据文件。

尝试转储@sensors 的值。如果它是一个单条目数组，并且唯一的元素包含整个文件，那么只需将 @sensors 切换为标量。然后将 $sensors 拆分为一个数组并循环遍历它。

```
my $sensors = `read something`
chomp $sensors;
my @sensors = split(/\n/, $sensors); 
```

foreach $line (@sensors) { ...

# java - Java HTML元素读取

> ID：14130261
> 
> 赞同：0
> 
> 时间：2013-01-02T22:29:01.350
> 
> 标签：java, html

我正在尝试创建一个 java 程序来检测网页上 HTML 元素的变化。例如：[http ://timer.onlineclock.net/](http://timer.onlineclock.net/)

每过一秒，时钟的 HTML 元素就会改变它们显示的图像的来源。无论如何，使用java，我可以有效地打开到这个页面的连接，并且能够看到这些元素何时发生变化？

我使用过 HTMLUnit，但我认为加载页面需要很长时间才能被认为足够高效。

我知道如何使用 URL 的唯一方法是使用 BufferedReader 读取页面，然后使用正则表达式解析源中的 HTML 元素，但这需要我每次“重新加载”页面我想查看元素的属性。谁能给我一个关于如何在几毫秒内检测到这些变化而不使用太多网络资源的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:33:55.350

您最好的选择是学习和使用 javascript 而不是服务器端 java。Javascript 程序运行在客户端（即：网络浏览器）而不是服务器端。

典型的 HTML 文档由元素组成（例如：文本、段落、列表项等）。使用 javascript，您可以创建计时器，相应地操作用户事件并操作这些元素。

[http://www.w3schools.com/js/default.asp](http://www.w3schools.com/js/default.asp)大概是一个不错的javascript入门介绍，建议大家花点时间了解一下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:36:02.993

有问题的页面似乎是...Javascript 数字时钟。

如果您想要当前时间，请尝试`new Date();`.

如果您希望以恒定速率调用代码，请尝试`Timer`该类。您可以将任务设置为每秒调用一次，这与您通过轮询页面获得的频率相同。

如果您想将该页面用作外部时间源，请尝试使用网络时间协议。[http://en.wikipedia.org/wiki/Network_Time_Protocol](http://en.wikipedia.org/wiki/Network_Time_Protocol)它将提供更低的延迟，实际上就是为此目的而设计的。

# javascript - 为什么我的主干模型奇怪地嵌套在一个集合中，需要深入访问方法/属性？

> ID：14130262
> 
> 赞同：0
> 
> 时间：2013-01-02T22:29:06.703
> 
> 标签：javascript, backbone.js, underscore.js

我有一个集合和一个模型，它们都使用属性/选项来增加它们的附加功能。这是模型（**LoadRouteGroup**）：

```
return Backbone.Model.extend({
    initialize: function () {
        console.log(this);
    },
    fetchf: function () {
        console.log("FETCH");
    }
}); 
```

和集合（**LoadRouteGroups**）：

```
return Backbone.Collection.extend({
    constructUrl: function(options) {
        if (options.groupingType === "facility") {
            // TODO: new endpoint: /api/v1/loadroutes?grouping=facility
            this.url = clawConfig.endpoints.webApiRootUrl + "/api/loads/facilities";
        }
        else {
            this.url = clawConfig.endpoints.webApiRootUrl + "/api/v1/loadroutes";
        }
    },
    initialize: function (models, options) {
        options || (options = {});

        this.constructUrl(options);

        console.log(this);
    }
}); 
```

它们被实例化为：

```
var loadRouteGroup = new LoadRouteGroup({
    entityType: "facility"
});

// WORKS
loadRouteGroup.fetchf();

// assign groupingType option to collection to denote which URL to use
var loadRouteGroups = new LoadRouteGroups({
    model: loadRouteGroup
}, {
    groupingType: "facility"
});

var firstGroup = loadRouteGroups.at(0);

// DOESN'T WORK
firstGroup.fetchf();

// WORKS
firstGroup.attributes.model.fetchf(); 
```

我希望这个电话能`firstGroup.fetchf()`奏效……但事实并非如此。相反，我必须奇怪地向下钻取并使用`firstGroup.attributes.model.fetchf()`才能访问该方法。

这里发生了什么？这对我来说似乎很简单，但我一生都无法弄清楚我的 Collection 和 Model 之间的关系出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:33:37.773

在扩展集合而不是实例化时指定模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:34:11.700

集合定义应包括模型类型：

```
return Backbone.Collection.extend({
    // ....
    model: LoadRouteGroup
}); 
```

初始化集合时，传入一个模型数组：

```
var loadRouteGroup = new LoadRouteGroup({
    entityType: "facility"
});
var loadRouteGroups = new LoadRouteGroups([loadRouteGroup], {
    groupingType: "facility"
}); 
```

# java - java中的并发和并行之间有区别吗？

> ID：14130266
> 
> 赞同：35
> 
> 时间：2013-01-02T22:29:14.283
> 
> 标签：java, multithreading, concurrency, parallel-processing

我一直在谷歌做一些研究，并不能完全理解 Java 中并发和并行程序之间的差异（如果有的话）。我看过的一些信息表明两者之间没有区别。是这样吗？？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-02T22:32:57.883

这取决于定义它的人。创建 Go 编程语言的人[调用代码 Concurrent](http://rspace.googlecode.com/hg/slide/concur.html)如果它被分解成*可以*并行处理的部分，而 Parallelism 意味着这些部分实际上是同时运行的。

由于这些是编程原则，因此编程语言与它们的定义方式无关。但是，Java 8 将具有更多功能来支持并发和并行性，而不会过多地弄乱您的代码。例如，像这样的代码：

```
List<Integer> coolItemIds = new List<Integer>();
for(Item item : getItems())
{
    if(item.isCool())
    {
        int itemId = item.getId();
        coolItemIds.add(item);
    }
} 
```

...这是非并发和非并行的，可以这样写（我的语法可能是错误的，但希望你明白）：

```
Iterable<Item> items = getItems();
Iterable<Item> coolItems = items.filter(item -> item.isCool());
Iterable<Integer> coolItemIds = coolItems.map(item -> item.getId()); 
```

上面的代码是以*并发*的方式编写的：没有一个给定的代码要求一次过滤一个coolItems，或者一次只能调用`getId()`一个项目，甚至是列表开头的项目需要在最后的项目之前进行过滤或映射。根据`Iterable`返回的类型`getItems()`，给定的操作可能会或可能不会*并行*运行，但您编写的代码是*并发*的。

还有兴趣：

*   [并发不是并行](http://vimeo.com/49718712)（演示视频）
*   [并发不是并行？](https://stackoverflow.com/questions/11700953/concurrency-is-not-parallelism)（关于 StackOverflow 的讨论

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-02T22:33:56.020

我想这取决于你的定义，但我的理解大致是这样的：

*   **并发**是指以某种未指定的顺序发生的事情。多任务处理——通过时间片交错指令来执行多个程序——是考虑这种并发性的好方法。
*   **并行**性（或“真正的”并行性）指的是在字面上同时发生的事情。这需要硬件支持（协处理器、多核处理器、联网机器等）。所有并行性都是并发的，但并非所有并发性都是并行的。

据我所知，这两个术语都不是 Java 特定的，也没有任何 Java 特定的细微差别。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-02T22:37:45.487

**并行**化（或并行或并行计算）是一种计算形式，其中许多计算同时进行。本质上，如果一个 CPU 密集型问题可以划分为较小的独立任务，那么这些任务可以分配给不同的处理器

**并发**更多的是关于多任务处理，它执行许多操作，但不是必要的 CPU 密集型问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-02T23:48:51.483

我认为这两个术语没有明确定义的不同含义。它们都是艺术术语而不是技术术语。

也就是说，我解释它们的方式是，如果某件事可以与其他事情同时完成，那么它就是*并发*的，如果它可以由多个线程同时完成，那么它就是*并行的。*我主要从[JVM 垃圾收集文档](http://docs.oracle.com/javase/6/docs/technotes/guides/vm/cms-6.html)中获取这种用法，其中说类似

> **并发**标记清除收集器，也称为**并发**收集器或 CMS，针对对垃圾收集暂停敏感的应用程序。**它同时**执行大多数垃圾收集活动，即*在应用程序线程运行时*

和

> CMS 收集器现在*使用多个线程*在具有多个处理器的平台上**并行**执行并发标记任务。

诚然，这是一个非常具体的背景，从中概括可能是不明智的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-22T12:55:24.817

如果您使用线程进行编程（并发编程），则不一定会这样执行（并行执行），因为这取决于机器是否可以处理多个线程。

这是一个视觉示例。非线程机器上的线程：

```
 --  --  --
      /              \
 >---- --  --  --  -- ---->> 
```

线程机器上的线程：

```
 ------
      /      \
  >-------------->> 
```

破折号代表执行的代码。如您所见，它们都分开并单独执行，但线程机器可以一次执行多个单独的部分。

请参考这篇[并发编程和并行编程有什么区别？](https://stackoverflow.com/questions/1897993/difference-between-concurrent-programming-and-parallel-programming)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-07-04T16:22:50.217

从 oracle 文档[页面](https://docs.oracle.com/cd/E19455-01/806-5257/mtintro-6/index.html)：

在**单个处理器**上的多线程进程中，处理器可以在线程之间切换执行资源，从而实现***并发执行***。

在**共享内存多处理器环境**中的同一个多线程进程中，进程中的每个线程可以同时运行在单独的处理器上，从而实现***并行执行***。

当进程的线程数与处理器数一样少或多时，线程支持系统与操作环境一起确保每个线程在不同的处理器上运行。

[Java SE 7 通过添加ForkJoinPool](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html) API进一步增强了并行处理。

有关更多详细信息，请参阅以下帖子：

[使用 Java 中的线程进行并行编程](https://stackoverflow.com/questions/44901843/parallel-programming-with-threads-in-java/44905131#44905131) （特定于 Java）

[并发与并行 - 有什么区别？](https://stackoverflow.com/questions/1050222/concurrency-vs-parallelism-what-is-the-difference)（语言不可知）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-04T20:42:30.433

并发是一种架构设计模式，它允许您一次运行多个操作（可以但不必并行执行）。

在此类操作的单核执行的情况下，可以通过例如上下文切换来“模拟”并行化（假设您的编程语言使用线程进行并行执行）。

假设您有两个线程，在一个线程中将作业排入队列。第二个等待，直到任何作业存在并拿起它执行。尽管使用单核处理器，但它们都在运行和通信（通过队列）。

这是一个并发执行——即使线程在单个核心上顺序执行（共享它）。

* * *

同一练习的并行版本看起来很相似，但有一个区别：

线程的执行将发生在多核处理器上。线程将彼此并行运行，而不是按顺序运行（每个线程都在自己的核心上）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-21T11:46:53.243

问题很老了，但我想以非常简洁明了的方式总结这两个：

1.  **并发**-***考虑一个参与者的多任务处理：***
    当 x 个进程/线程 (x>1) 竞争相同的资源时。在并发的情况下，当两个进程/线程在一个 CPU 上执行时，它们并不是真正并行的，这意味着 CPU 时钟将以超快的方式在进程之间来回切换，这将描绘出一种错觉并行性，但同样 - 它是不同进程/线程之间共享的 1 个 CPU。想象一下要执行 5 条指令，它们竞争 CPU 的资源，以便得到执行；

2.  **并行**性-***考虑多个任务，其中每个任务由单独的参与者处理：***
    当 x 个进程/线程 (x>1) 同时并行执行时。想象一下如果有 5 个进程/线程，并且有 5 个 CPU 核心，这意味着每个核心可以独立执行每个线程/进程。

# iphone - 加载 iPhone5 支持的替代 UITabBarController

> ID：14130267
> 
> 赞同：0
> 
> 时间：2013-01-02T22:29:19.243
> 
> 标签：iphone, ios, uitabbarcontroller

我必须在我的应用程序中添加对 iPhone5 的支持。目前，appdelegate 使用一个 nib，它是一个 UITabBarController，和这样的代码。工作正常。

```
[window addSubview:rootController.view];
[window makeKeyAndVisible]; 
```

rootController 是 UITabBarController 的一个实例。

所以我为 iPhone5 创建了一个新的笔尖并将代码更改为...

```
if ([self IsTall])
    rootController = [[[UITabBarController alloc] initWithNibName:@"MainWindow_5" bundle:nil] autorelease];
else
    rootController = [[[UITabBarController alloc] initWithNibName:@"MainWindow" bundle:nil] autorelease];
[window addSubview:rootController.view];
[window makeKeyAndVisible]; 
```

但是，这段代码的屏幕是空白的，就像笔尖没有加载一样。

如果我尝试这个，我会在屏幕上加载和显示正确的笔尖，但没有显示“更多”按钮，只显示前 4 个选项卡（tabBarController 中有 7 个选项卡

```
if ([self IsTall])
    rootController = [[rootController initWithNibName:@"MainWindow_5" bundle:nil] autorelease];
else
    rootController = [[rootController initWithNibName:@"MainWindow" bundle:nil] autorelease];
[window addSubview:rootController.view];
[window makeKeyAndVisible]; 
```

我也试过...

```
if ([self IsTall])
    [[NSBundle mainBundle] loadNibNamed:@"MainWindow_5" owner:rootController options:nil];
else
    [[NSBundle mainBundle] loadNibNamed:@"MainWindow" owner:rootController options:nil]; 
```

但这会导致未在主要“nib 文件基本名称”设置下的 plist 中声明的 nib 的选项卡按钮崩溃。

非常感谢任何帮助。这让我困扰了几天。亲切的问候罗布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:36:25.093

这是我使用的方法

```
+ (BOOL)isPad{
    BOOL result = NO;
    if ([[UIDevice currentDevice] respondsToSelector:@selector(userInterfaceIdiom)]){
        result = [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad;
    }
    return result;
}

+ (BOOL) isPhone{
    BOOL result = NO;
    static NSString *model;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        model = [UIDevice currentDevice].model;
    });
    if ([model hasPrefix:@"iPhone"]){
        result = YES;
    }
    return result;
}

+ (BOOL)isWidescreen{
    BOOL result = NO;
    static CGFloat ratio;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        CGSize size = [UIScreen mainScreen].bounds.size;
        CGFloat numerator = MAX(size.height, size.width);
        CGFloat denominator = MIN(size.height, size.width);

        ratio = numerator / denominator;
    });

    if (ratio > 1.77 && ratio < 1.78){
        result = YES;
    }

    return result;
} 
```

然后我有定义语句，使它们更容易到达

```
#define IS_IPAD() [StaticContainer isPad]
#define IS_WIDESCREEN() [StaticContainer isWidescreen]
#define IS_IPHONE() [StaticContainer isPhone] 
```

我也有一个 UIViewController 类别

```
@implementation UIViewController (initHelpers)

- (id) initClassDevice{
    NSString *device = @"";
    if (IS_IPAD()) {
        device = @"iPad";
    }
    else if (IS_WIDESCREEN()){
        device = @"iPhone5";
    }
    else {
        device = @"iPhone";
    }

    NSString *nibName = [NSString stringWithFormat:@"%@_%@",[self class],device];

    self = [self initWithNibName:nibName bundle:nil];

    return self;

}

@end 
```

您需要为每个包含不同项目的文件创建一个 nib 文件。他们需要单独连接到所有东西。

我的目前只将 iphone 和 ipad 分开，所以对于视图控制器，我会有

MyMagicViewController.h/MyMagicViewController.m

对于 xib 文件，我将拥有

MyMagicViewController_iPad.xib、MyMagicViewController_iPhone5.xib 和 MyMagicViewController_iPhone.xib

重要的是将 xib 文件的名称与对 initWithNibName 的调用相匹配：

还有另一件事要考虑。是您正在初始化的视图需要与它要进入的视图大小相同。

```
view.frame = superView.bounds; 
```

然后它会合适

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:38:42.993

各种想法：

iPhone 5 是 iOS 6。您的应用程序之前是否在 iOS 6 下运行？*如果没有，请先*让它在 iOS 6 上运行。即使没有进行其他更改，我的应用程序在与 iOS 6 链接时也是空白的。那是因为视图控制器以完全不同的方式工作。因此，第一步是为 iOS 6 简化启动操作。如果您要启动横向应用程序，则尤其如此；在这方面，一切都完全改变了。

不要自己添加子视图。只需设置窗口的`rootViewController`. 它为您添加子视图。

总的来说，无论如何你都不应该加载不同的笔尖。您应该使用布局来布置相同的界面，以使屏幕高不高无关紧要。

希望里面的东西会有所帮助...

你的第二个代码是完全非法的。永远不要永远不要说“init”，除非在您刚刚说“alloc”的同一行中（当然，在初始化程序中除外）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:36:12.513

对我来说，将 Default-568h@2x.png 添加到我的项目中解决了它。

# actionscript-3 - AS3 - 从外部 .txt 读取文本并在匹配时更改对象的颜色

> ID：14130270
> 
> 赞同：1
> 
> 时间：2013-01-02T22:29:29.437
> 
> 标签：actionscript-3

我正在开发一个项目，该项目使用批处理脚本来检查特定网络中计算机的可用性（ping）。当脚本结果完全匹配时，它还会更改基于 Flash 的 UI 中对象的颜色。

例子：

1) 脚本运行检查并输出到 results.txt：

> 192.168.0.1=向上
> 
> 192.168.0.2=向下
> 
> 192.168.0.3=向上

2) 使用 AS3，我想读取此文件并搜索类似“192.168.0.1=UP”的字符串。如果有匹配，它会将对象的颜色更改为绿色。否则，它将设置为 RED。

到目前为止，我已经设法从 Flash 中的脚本导入输出文件，使用：

```
var textLoader:URLLoader = new URLLoader();
textLoader.addEventListener(Event.COMPLETE, onLoaded);
function onLoaded(e:Event):void {
trace(e.target.data);
}
textLoader.load(new URLRequest("Path:/To/result.txt")); 
```

我知道我不能让 AS3 仅在文件中搜索“192.168.0.1=UP”并在匹配时更改颜色。

如何使用导入的文本？我是否必须制作一个仅使用我需要的部分文本的字符串，然后在匹配时制作一个 IF 语句来为对象着色？

提前致谢。

**更新：**

感谢*Gunther Fox*，我能够将整个代码放在一起：

```
import flash.geom.ColorTransform;

var textLoader:URLLoader = new URLLoader();
textLoader.addEventListener(Event.COMPLETE, onLoaded);
function onLoaded(e:Event):void {
    trace(e.target.data);
    if (e.target.data.indexOf("192.168.0.1=UP") != -1) {
        var colorGREEN:ColorTransform = <instance_name>.transform.colorTransform;
        colorGREEN.color = 0x00FF00;
        <instance_name>.transform.colorTransform = colorGREEN;
    }
    else {
        var colorRED:ColorTransform = <instance_name>.transform.colorTransform;
        colorRED.color = 0xFF0000;
        <instance_name>.transform.colorTransform = colorRED;
    }
}
textLoader.load(new URLRequest("Path:/To/result.txt")); 
```

现在我的 AS3 根据批处理脚本输出更改特定对象的颜色。

**更新 2**

我解决了重新加载文本文件的问题：

```
var timer:Timer = new Timer(10000);
timer.addEventListener(TimerEvent.TIMER, onTimer);
timer.start();

function onTimer(evt:TimerEvent):void {
var textLoader:URLLoader = new URLLoader();
textLoader.addEventListener(Event.COMPLETE, onLoaded);
textLoader.load(new URLRequest("C:/Folder/output/result.txt"));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:37:03.483

如果您正在寻找非常具体的内容，例如字符串“192.168.0.1=UP”，您可以使用`indexOf()`并检查结果是否为 -1：

```
function onLoaded(e:Event):void {
    trace(e.target.data);

    if (e.target.data.indexOf("192.168.0.1=UP") != -1) {
        // Change to green
    }
    else {
        // Change to red
    }
} 
```

# java - 在 JTable 中搜索通过 JTextField 数据输入的数据

> ID：14130272
> 
> 赞同：2
> 
> 时间：2013-01-02T22:29:43.407
> 
> 标签：java, swing, jtable, jtextfield

我有一个从数据库中填充数据的 JTable。我添加了一个搜索功能，当数据输入到 JTextField 中时会突出显示一个单元格。但是在你必须输入确切的单词或数字的那一刻，我想要做的是能够搜索几个字母或数字，JTable 将显示包含这些字母或数字的结果。

我曾尝试使用：

```
button.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            String text = jTextField1.getText();
            if (text.length() == 0) {
                sorter.setRowFilter(null);
            } else {
                sorter.setRowFilter(RowFilter.regexFilter(text));
            }
        }
    }); 
```

但它似乎确实影响了 JTable。

所以我使用了这段代码：

```
private class HighlightRenderer extends DefaultTableCellRenderer {

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {

        // everything as usual
        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

        // added behavior
        if(row == table.getSelectedRow()) {

            // this will customize that kind of border that will be use to highlight a row
            setBorder(BorderFactory.createMatteBorder(1, 1, 1, 1, Color.BLACK));
        }

        return this;
    }
}

private void searchResultsActionPerformed(ActionEvent evt) {
    String value = jTextField1.getText();

    for (int row = 0; row <= table.getRowCount() - 1; row++) {

        for (int col = 0; col <= table.getColumnCount() - 1; col++) {

            if (value.equals(table.getValueAt(row, col))) {

                // this will automatically set the view of the scroll in the location of the value
                table.scrollRectToVisible(table.getCellRect(row, 0, true));

                // this will automatically set the focus of the searched/selected row/value
                table.setRowSelectionInterval(row, row);

                for (int i = 0; i <= table.getColumnCount() - 1; i++) {

                    table.getColumnModel().getColumn(i).setCellRenderer(new HighlightRenderer());
                }
            }
        }
    }
} 
```

使用输入到 JTextField 中的数据可以工作，但就像我之前提到的，您必须输入确切的名称或编号。这不是我想要的工作方式。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T23:00:12.857

你的测试

```
value.equals(table.getValueAt(row, col)) 
```

导致您描述的行为。`equals`仅适用于完全匹配。

你可以尝试一些更复杂的东西，比如

```
Object value = table.getValueAt(row, col);
if (value!=null && value.toString().matches(".*"+Pattern.quote(text)+".*"))
   ... 
```

就个人而言，我会在您的渲染器中执行此测试，以便突出显示所有匹配的单元格（您仍然需要执行`scrollRect()`但不在渲染器中）：

```
private class HighlightRenderer extends DefaultTableCellRenderer {

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {

        // everything as usual
        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

        // added behavior
        if (value!=null && value.toString().matches(".*"+Pattern.quote(text)+".*")) {

            // this will customize that kind of border that will be use to highlight a row
            setBorder(BorderFactory.createMatteBorder(1, 1, 1, 1, Color.BLACK));
        } else
            setBorder(BorderFactory.createEmptyBorder(1, 1, 1, 1);

        return this;
    }
} 
```

并且每次`actionPerformed`调用时，我都会调用`table.repaint();`

# c# - 保存按键以传递给 SendKeys.Send() 中的“keys”参数

> ID：14130273
> 
> 赞同：1
> 
> 时间：2013-01-02T22:29:49.750
> 
> 标签：c#, .net, wpf, vb.net

这是我的代码：

```
void tbHotkey_KeyDown(object sender, System.Windows.Input.KeyEventArgs e)
{
    if (e.Key == Key.LeftShift || e.Key == Key.RightShift || e.Key == Key.LeftCtrl || e.Key == Key.RightCtrl || e.Key == Key.LeftAlt || e.Key == Key.RightAlt || e.Key == Key.LWin || e.Key == Key.RWin)
    {
        return;
    }
    bool IsWinDown = e.KeyboardDevice.IsKeyDown(Key.LWin) | e.KeyboardDevice.IsKeyDown(Key.RWin);
    bool IsCtrlDown = e.KeyboardDevice.IsKeyDown(Key.LeftCtrl) | e.KeyboardDevice.IsKeyDown(Key.RightCtrl);
    bool IsAltDown = e.KeyboardDevice.IsKeyDown(Key.LeftAlt) | e.KeyboardDevice.IsKeyDown(Key.RightAlt);
    bool IsShiftDown = e.KeyboardDevice.IsKeyDown(Key.LeftShift) | e.KeyboardDevice.IsKeyDown(Key.RightShift);
    if (IsWinDown | IsCtrlDown | IsAltDown | IsShiftDown)
    {
        (sender as TextBox).Text =
          (IsWinDown ? "Windows + " : "") +
          (IsCtrlDown ? "Control + " : "") +
          (IsAltDown ? "Alt + " : "") +
          (IsShiftDown ? "Shift + " : "") +
          e.Key.ToString();
    }
} 
```

它保存了用户键入的热键，`KeyEventArgs.Key.ToString()`但我需要保存它以便我可以`SendKeys.Send()`轻松地将它传递给方法中的“keys”参数。

谁能建议我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:59:11.237

您正在尝试将 WPF [Key](http://msdn.microsoft.com/en-us/library/system.windows.input.key.aspx)枚举与 Winforms [SendKeys.Send()](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)方法混合，我可能不推荐这种方法。最终使用 WPF 事件系统发送击键会更干净，更简单，直接使用 Key 枚举，根本不涉及 Winforms，请参阅[这个问题](https://stackoverflow.com/questions/13534693/wpf-equivalent-to-sendinput)。

但是，如果您真的想这样做，则需要根据文档格式化字符串`SendKeys.Send()`，其中修饰键具有以下代码：

*   SHIFT = "+"
*   CTRL = "^"
*   ALT = "%"

所以你的代码可能是这样的：

```
 (sender as TextBox).Text = "(" +
              (IsCtrlDown ? "^" : "") +
              (IsAltDown ? "%" : "") +
              (IsShiftDown ? "+" : "") + ")" +
              e.Key.ToString().ToLower(); 
```

例如，如果您按 Ctrl+Alt+R，这将为您提供`(^%)r`一个有效输入的字符串`SendKeys.Send()`。请注意，这目前仅适用于字母键，如果要处理其他特殊键（如大写锁定），则必须修改代码以查看值并从文档中`e.Key`输出适当的字符串。`SendKeys`

windows 键很有趣，它实际上是 Ctrl 和 Esc 的组合，因此您可以发送`^{ESC}`to`SendKeys`来模拟它，但我不确定这是否适合您的需要或只是调出开始菜单。

另请注意，在 WPF 中您实际上需要使用`SendKeys.SendWait()`，请参阅[此问题](https://stackoverflow.com/questions/11572411/sendkeys-send-method-in-wpf-application)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:50:21.363

我使用`SendInput`API 发送击键并使用`KeyInterop.VirtualKeyFromKey`函数将键从转换`System.Windows.Input.Key`为虚拟键代码。

# html - 在 HTML 中嵌入 XML（用于 Mozilla Nightly）

> ID：14130275
> 
> 赞同：0
> 
> 时间：2013-01-02T22:29:51.927
> 
> 标签：html, xml, firefox, mozilla

我看到有另一个名称相似的帖子，但它对我没有帮助。

我用这个：

```
<embed src="../xml/menu.xml" /> 
```

将一些 XML 内容嵌入 HTML 文件的 div 中。它在 Google Chrome 和 Internet Explorer 中有效（显示内容），但在 Mozilla Nightly 中无效。

你知道如何让它甚至适用于 Nightly 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:27:38.367

改为使用`<object>`。根据规范，`<embed>`只会显示通过插件和 SVG 处理的内容，而不是 XML 等随机文档类型。

# java - 插入 SQLite 数据库 - Android

> ID：14130277
> 
> 赞同：0
> 
> 时间：2013-01-02T22:30:01.887
> 
> 标签：java, android, sqlite, nullpointerexception

我正在尝试为高分表实现 SQLite 数据库。我只是在测试它以查看我的数据库创建和插入是否正在使用以下代码。但是我在下面的几行中得到了 NullPointerException 。

先感谢您！

结果.java

```
public class Results extends Activity {
    DatabaseHelper dh;

    public void onCreate(Bundle savedInstanceState) {
        dh = DatabaseHelper.getInstance(this);

    public void showResults() {
        dh.openDB();  
        dh.insert(1231423, 436346);  //Line 104
    }
} 
```

数据库助手.java

```
private static final String SCORE = "score"; 
private static final String PERCENTAGE = "percentage";
public static DatabaseHelper mSingleton = null;

public synchronized static DatabaseHelper getInstance(Context context) {
    if(mSingleton == null) {
        mSingleton = new DatabaseHelper(context.getApplicationContext());
    }
    return mSingleton;
}

public SQLiteDatabase openDB() {
    return this.getWritableDatabase();
}

public long insert(long score, int percentage) {
    ContentValues values = new ContentValues();
    values.put(SCORE, score);  
    values.put(PERCENTAGE, percentage); 

    return db.insert(TABLE, null, values);  //Line 91
} 
```

LogCat 输出

```
01-02 17:56:47.609: E/AndroidRuntime(1322): FATAL EXCEPTION: main
01-02 17:56:47.609: E/AndroidRuntime(1322): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Results}: java.lang.NullPointerException
01-02 17:56:47.609: E/AndroidRuntime(1322):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at android.os.Looper.loop(Looper.java:137)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at java.lang.reflect.Method.invokeNative(Native Method)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at java.lang.reflect.Method.invoke(Method.java:511)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at dalvik.system.NativeStart.main(Native Method)
01-02 17:56:47.609: E/AndroidRuntime(1322): Caused by: java.lang.NullPointerException
01-02 17:56:47.609: E/AndroidRuntime(1322):     at com.example.test.DatabaseHelper.insert(DatabaseHelper.java:91)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at com.example.test.Results.showResults(Results.java:104)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at com.example.test.Results.onCreate(Results.java:50)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at android.app.Activity.performCreate(Activity.java:5008)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-02 17:56:47.609: E/AndroidRuntime(1322):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-02 17:56:47.609: E/AndroidRuntime(1322):     ... 11 more 
```

**编辑：** NullPointerException 至少在跳跃，但错误仍然存​​在。我已经编辑了我的代码并发布了新的 LogCat 输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:08:08.853

更改`openDB()`以保存它打开的 SqliteDatabase 并打开一个*可写*数据库：

```
public void openDB() {
    db = this.getWritableDatabase();
} 
```

但这仍然与您的堆栈跟踪不匹配，但它与您提供的代码匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:08:11.913

你说你在做：

```
DatabaseHelper dh;

dh.insert(1231423, 436346); 
```

看起来你没有实例化 dh：

```
dh = new DatabaseHelper(this); 
```

更好的方法是使用单例模式，因为您将只需要一个 DatabaseHelper 实例：

```
private static final String TABLE_NAME = "table_name";
private static final int SCHEME_VERSION = 1;
public static DatabaseHelper mSingleton = null;

private DatabaseHelper(Context ctxt) {
    super(ctxt, DATABASE_NAME, null, SCHEME_VERSION);
}

public synchronized static DatabaseHelper getInstance(Context ctxt) {
    if (mSingleton == null)
        mSingleton = new DatabaseHelper(ctxt.getApplicationContext());
    return mSingleton;
} 
```

现在你可以这样调用：

```
DatabaseHelper dh = DatabaseHelper.getInstance(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:36:23.683

如果您遵循常见的 SqlliteHelper 模式，您可能忘记在调用 insert 之前调用 .open() 方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-14T03:51:03.707

```
package com.example.hostelmangement;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DataBaseHelper extends SQLiteOpenHelper {

public DataBaseHelper(Context context, String name, CursorFactory factory,
        int version)
{
    super(context, name, factory, version);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db)
{
    db.execSQL("create table demo(id integer primary key,join_date date,name text,father_name text,date_of_birth text,house_name text,place text,pin_no text,blood_group text,mobile text,email text,company text,company_place text,company_phone text,company_pin,rent text,pending integer,status text,photo text,Proof text)");

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
{
    // TODO Auto-generated method stub

} 
```

}

# javascript - 无法在 for 循环中使用 Javascript 添加到数组

> ID：14130281
> 
> 赞同：0
> 
> 时间：2013-01-02T22:30:18.983
> 
> 标签：javascript, arrays

我正在尝试编写一些代码来查找网页上的所有链接图像。到目前为止，我能够生成所有链接 (imageLinks) 的数组，但在最终 console.log(linkedImages) 下面的代码中始终显示一个空数组。

我无法理解的是我评论过“这有效/但这不起作用：”

我究竟做错了什么？非常感谢这个有点菜鸟的任何帮助。谢谢！

```
//Create an array of all the links containing img tags
var imageLinks = $("img").parent("a").map(function () {
    var h = $(this).attr("href");
    return h;
}).get();
//This correctly shows all the links:
//console.log(imageLinks);
//Declare an array to hold all the linked images 
var linkedImages = [];
//Loop through all the links to see if they're images or not
for (var l = 0; l < imageLinks.length; l++) {
    var currLink = imageLinks[l];

    function myCallback(url, answer) {
        if (answer) {
            //This works:
            console.log(url + ' is an image!');
            //But this doesn't work
            linkedImages.push(url);
        } else {
            //alert(url+' is NOT an image!');
        }
    }

    function IsValidImageUrl(url, callback) {
        var img = new Image();
        img.onerror = function () {
            callback(url, false);
        }
        img.onload = function () {
            callback(url, true);
        }
        img.src = url
    }
    IsValidImageUrl(currLink, myCallback);
};
//HELP! This always evaluates as just "[]"
console.log(linkedImages); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:44:39.733

@SLaks 说了什么。由于图像的加载是异步的，因此您的回调在图像加载完成之前不会触发。要解决此问题，您可以使用jQuery 中的[$.Deferred](http://api.jquery.com/category/deferred-object/)（我假设您使用的是 jQuery，因为您的代码中有 $(...) ）：

```
 function callback(dfd, url, answer) {
        if (answer) {
            //This works:
            console.log(url+' is an image!');
            //But this doesn't work
            dfd.resolve(url);
        } else {
            //alert(url+' is NOT an image!');
            dfd.reject();
        }
    }

    //Create an array of all the links containing img tags
    var imageLinks = $("img").parent("a").map(function() {
        var h = $(this).attr("href");
        return h;
    }).get();

    //This correctly shows all the links:
    //console.log(imageLinks);

    //Declare an array to hold all the linked images 
    var linkedImages = [];

    //Loop through all the links to see if they're images or not
    var dfds = [];
    for (var l=0; l<imageLinks.length; l++) {
        var currLink = imageLinks[l];
        var dfd = $.Deferred();
        dfd.done(function(url) { linkedImages.push(url); });
        dfds.push(dfd.promise());

        (function(dfd, url) {
            var img = new Image();
            img.onerror = function() { callback(dfd, url, false); }
            img.onload =  function() { callback(dfd, url, true); }
            img.src = url
        })(dfd, currLink);
    };

    $.when.apply(null, dfds).done(function() {
         console.log(linkedImages);
    }); 
```

尚未对此进行测试，但是关于如何使用 deferred 来实现目标的一般想法就在那里。

# delphi - 从“普通”非提升权限启动具有提升权限的 EXE？

> ID：14130282
> 
> 赞同：0
> 
> 时间：2013-01-02T22:30:22.397
> 
> 标签：delphi, delphi-2010, privileges

我有一个以正常权限运行的 EXE，但在某些情况下（例如使用 VSS/卷影副本）我需要管理员权限（如果我没记错的话）

这个想法是将需要额外权限的代码放在单独的 EXE 中，并根据需要启动它。

这是我很少需要的东西，但我仍然需要将它作为最后的选择（也就是说我很少需要调用它，可能平均每天一次/两次）

**我的问题是：如何从普通 EXE 调用管理员提升的进程？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T22:38:46.287

在启用 UAC 的 Vista 和更高版本上，最好的选择是为第二个 EXE 提供 UAC 清单（最好作为资源嵌入，但也可以使用外部 .manifest 文件完成），将`requestedExecutionLevel`值设置为`requireAdministrator`. 然后你就可以`CreateProcess()`正常的EXE文件了。如果提供清单不是一个选项，或者如果您需要支持 XP 和/或非 UAC 设置，那么您可以使用`ShellExecute/Ex()`指定`"runas"`动词来代替。在任何这些设置下，操作系统都会提示用户输入权限和帐户凭据，然后根据需要将适当的安全权限应用于新进程。

另一种选择是本文中提供的第三方`CreateProcess...Elevated()`（和`ShellExecute...Elevated()`）实现：

[Vista UAC：权威指南](http://www.codeproject.com/Articles/19165/Vista-UAC-The-Definitive-Guide)

# xml - Yahoo Pipes，在 RSS 项目生成器中保留 HTML

> ID：14130283
> 
> 赞同：1
> 
> 时间：2013-01-02T22:30:22.323
> 
> 标签：xml, yahoo-pipes

我正在使用“XPath fetch page”来获取网页的 DOM 树的子树。我想将未修改的子树放入 RSS（包含所有标签、链接等）。我正在使用“RSS 项目构建器”来制作 RSS 项目，但似乎该模块从输入中删除了所有标签。这样所有的链接都丢失了。我应该怎么做才能保留元素？

我正在处理的管道：[Tatoeba 墙柱](http://pipes.yahoo.com/pipes/pipe.info?_id=508470e4e64dfe2b6b21d2f3f140efee)。倒数第二个元素是一个循环的“RSS 项目生成器”，它应该将一个子树存储在`item.message`一个项目的描述字段中。例如，一个项目（在“RSS 项目构建器”之前跟踪元素的调试器的屏幕截图）：

![在此处输入图像描述](../Images/fca4addd9144ae7ba26cf82ad8e99079.png)

将由“RSS Item Builder”转换：

![在此处输入图像描述](../Images/5a1bff64fa72a0494a7571c24910b4e0.png)

至：

![在此处输入图像描述](../Images/ce421b883786b4205c5517a9795891cd.png)

其中`item.description`元素不再包含任何 html。

# git - 无法将 git 推送到 Heroku 端口 22：错误的文件号

> ID：14130287
> 
> 赞同：7
> 
> 时间：2013-01-02T22:30:39.687
> 
> 标签：git, heroku, ssh, git-push

创建我的 Rails 项目后，将其推送到 GIT 存储库中，但无法将其推送到 Heroku。当我运行命令时：

```
git push heroku master 
```

我收到此错误：

```
ssh: connect to host heroku.com port 22: Bad file number
fatal: The remote end hung up unexpectedly 
```

不在防火墙、代理或 vpn 后面。我已经运行

```
 heroku status 
```

它工作正常。

我什至确保 ssh 可以在 Git 上正常工作。并运行

```
 ssh -vT git@github.com 
```

它运行成功

我跑

```
 telnet heroku.com 22 
```

它失败了

```
 connecting to heroku.com .. could not open connection to the host, on port 22:Connect failed 
```

也运行并失败

```
 ssh git@heroku.com
 ssh: connect to host heroku.com port 22: bad file number 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T03:56:06.040

可怕的坏文件号。这是 git 的 PC LOAD LETTER。这是不可思议的，但几乎总是一把坏钥匙。尝试在 heroku 中更新您的密钥，并确保在尝试连接时提供正确的密钥。

# android - android如何将对象传递给新类

> ID：14130290
> 
> 赞同：0
> 
> 时间：2013-01-02T22:31:08.203
> 
> 标签：android, oop

我有以下活动

```
public class BmiHistory extends Activity {

public Cursor cursor;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.bmihistory);
    final DatabaseHandler databaseOpen = new DatabaseHandler(this);
    final SQLiteDatabase db = databaseOpen.getReadableDatabase();

    Cursor c1 = db.rawQuery("select * from bmi", null);
    startManagingCursor(c1);
    c1.moveToFirst();
    this.cursor = c1; 
    while(!c1.isAfterLast()) {
        System.out.println(c1.getString(2));
        c1.moveToNext();
    }
    c1.close();

    BmiGraph drawView = new BmiGraph(this);
    drawView.setBackgroundColor(Color.WHITE);
    setContentView(drawView);

}

} 
```

我从这个活动中调用了以下课程

```
public class BmiGraph extends View {

Paint paint = new Paint();

public BmiGraph(BmiHistory context) {
    super(context);
    // TODO Auto-generated constructor stub
    System.out.println(context.toString());
}

public void onDraw(Canvas canvas) {
    paint.setColor(Color.BLACK);
    paint.setStrokeWidth(3);
    ...
}

} 
```

我的问题是如何将 Activity 中光标的数据提供给第二类以绘制图表？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:28:27.543

您可以修改 BmiGraph 类的构造函数以接受您的光标作为输入（见下文）。然后，您将可以从 BmiGraph 类中访问您的光标。

```
public class BmiGraph extends View {

Paint paint = new Paint();

Cursor _someCursor;    

public BmiGraph(BmiHistory context, Cursor someCursor) {
    super(context);
    // TODO Auto-generated constructor stub
    System.out.println(context.toString());

    _someCursor = someCursor
}

public void onDraw(Canvas canvas) {
    paint.setColor(Color.BLACK);
    paint.setStrokeWidth(3);
    ...
}

} 
```

# extjs - ExtJS 网格面板不显示页码

> ID：14130304
> 
> 赞同：0
> 
> 时间：2013-01-02T22:32:18.160
> 
> 标签：extjs, grid, panel, paging

我正在使用带有 ASP.NET MVC 的 ExtJS 分页网格面板。除了网格不显示页码外，一切似乎都正常。它仅显示在底部工具栏页面**BLANK** out of 3 中。

这是我的商店：

```
 Ext.define('EJ.store.Locations', {
     extend: 'Ext.data.Store',
     model: 'EJ.model.Location',
     autoLoad: {
         params: {
             start: 0,
             limit: 5
         }
     },
     pageSize: 5,
     remoteSort: true,
     proxy: {
         type: 'ajax',
         url: '/location/read',
         reader: {
             type: 'json',
             root: 'locations',
             totalProperty: 'totalLocations',
             successProperty: 'success'
         }
     }
 }); 
```

这是我的观点：

```
Ext.define('EJ.view.location.List', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.locationlist',
    store: 'Locations',
    title: 'All locations',
    autoScroll: true,

    columns: [{
        text: 'Location Id',
        flex: 1,
        sortable: true,
        dataIndex: 'LocationId'
    }, {
        text: 'Name',
        flex: 1,
        sortable: true,
        dataIndex: 'Name'
    }],
    bbar: Ext.create('Ext.PagingToolbar', {
        pageSize: 5,
        store: 'Locations',
        displayInfo: true,
        displayMsg: 'Displaying Locations {0} - {1} of {2}',
        emptyMsg: "No topics to display"

    }),
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:20:33.923

看起来您定义了一个商店和网格，并在`bbar`配置中实例化了一个不知道商店的分页工具栏，因为它尚未创建。

尝试使用延迟加载添加它（也可以是 bbar 配置）：

```
dockedItems: [{
    xtype: 'pagingtoolbar',
    dock: 'bottom',
    pageSize: 5, 
    store: 'Locations',   
    displayInfo: true,
    displayMsg: 'Displaying Locations {0} - {1} of {2}',
    emptyMsg: "No topics to display"
}], 
```

# c# - 可以通过 Crystal Reports 中的代码设置 ODBC 连接

> ID：14130306
> 
> 赞同：0
> 
> 时间：2013-01-02T22:32:24.520
> 
> 标签：c#, crystal-reports, odbc

我有一些使用 odbc 连接进行的报告。我现在将它投入生产，报告将无法运行，因为它似乎正在寻找开发 odbc 连接而不是使用生产连接。

我厌倦了给两个 odbc 连接使用相同的名称，但这不起作用。是否可以通过代码设置切换到正确的odbc连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:53:10.960

我不确定您问题的编码部分，但我会打开报告转到“数据库”、“设置数据源位置”并更新到生产 ODBC。然后保存并关闭报告。

# javascript - 你如何更改流星中的重置密码URL？

> ID：14130310
> 
> 赞同：25
> 
> 时间：2013-01-02T22:32:31.653
> 
> 标签：javascript, meteor

我正在使用[流星](http://meteor.com)和[帐户密码](http://docs.meteor.com/#accounts_api)包。我正在滚动自己的登录名和密码更改/重置 UI，并想知道...

**如何在发送的重置密码电子邮件中自定义密码重置链接`Accounts.resetPassword`？**

目前它的形式如下：`/#/reset-password/<id>'`. 由于我使用的是[流星路由器](https://github.com/tmeasday/meteor-router)，我想以表格形式发送，`'/reset-password/<id>'`这样我就可以用路由捕获它`'/reset-password/:id'`。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2015-02-20T05:11:21.903

派对迟到了……

您无需更改整个文本，只需更改 url：

```
Meteor.startup(function() {
 Accounts.urls.resetPassword = function(token) {
    return Meteor.absoluteUrl('reset-password/' + token);
  };
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-20T11:23:53.433

它发生了一点变化：

你必须使用

```
Accounts.emailTemplates.resetPassword.text 
```

对于 url，您可以简单地替换 hashbang，而不是从 url 解析令牌。举个例子（在咖啡脚本中）：

```
Meteor.startup(() ->
  Accounts.emailTemplates.resetPassword.text = (user, url) ->
     url = url.replace('#/', '')
     return "Click this link to reset your password: " + url
) 
```

ES6

```
Meteor.startup(() =>
  Accounts.emailTemplates.resetPassword.text = function(user, url) {
     url = url.replace('#/', '');
     return `Click this link to reset your password: ${url}`;
   }
); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-02T23:11:08.773

请参阅[Meteor 文档中有关电子邮件模板的部分](http://docs.meteor.com/#accounts_emailtemplates)：

> resetPassword：具有两个字段的对象：
> 
> *   resetPassword.subject：一个函数，它接受一个用户对象并为重置密码电子邮件的主题行返回一个字符串。
> *   resetPassword.text：接受用户对象和**url**的函数，并返回重置密码电子邮件的正文。

您可以自定义将哪个 url 传递给重置密码电子邮件方法：

```
Accounts.resetPassword.text = function(user, url) {
  return "Click this link to reset your password: /reset-password/" + myId;
} 
```

# php - 使用 PHP 的 exec() 会出现错误：致命：[Errno 2] 没有这样的文件或目录；你安装了吗

> ID：14130311
> 
> 赞同：4
> 
> 时间：2013-01-02T22:32:36.673
> 
> 标签：php, ubuntu, web-scraping, phantomjs, casperjs

我正在尝试将 PHP 用于`exec()`二进制文件`casperjs`，

```
exec('casperjs /var/www/mysite/application/phantomjs/test.js'); 
```

但我得到了错误

```
Fatal: [Errno 2] No such file or directory; did you install phantomjs? 
```

CasperJS 运行在 PhantomJS 之上，我手动安装并`/usr/local/bin/phantomjs`在`/usr/local/bin/casperjs`. 所以我猜 casperjs 在运行时会调用 phantomjs。

但是，当我 ssh 进入服务器并运行时，它工作正常

```
casperjs /var/www/mysite/application/phantomjs/test.js 
```

什么地方出了错？我认为`casperjs`不能`phantomjs`以网络用户身份运行？如果这是真的，如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T12:17:26.500

我遇到了完全相同的问题，并在这里找到了一个可行的解决方案：[https ://groups.google.com/forum/?fromgroups=#!topic/casperjs/92yUM9O0XjA](https://groups.google.com/forum/?fromgroups=#!topic/casperjs/92yUM9O0XjA)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T22:39:11.943

只需尝试`exec`使用程序的完整路径调用命令。例如

```
exec('/usr/local/bin/casperjs /var/www/mysite/application/phantomjs/test.js'); 
```

还要确保允许您通过 Web 服务器执行该程序，特别是如果您使用 php `safe_mode on`. 看看[safe_mode_exec_dir](http://php.net/manual/en/ini.sect.safe-mode.php#ini.safe-mode-exec-dir)

# php - PHP 后正文编码问题

> ID：14130312
> 
> 赞同：0
> 
> 时间：2013-01-02T22:32:47.673
> 
> 标签：php, http, post, encoding, bytearray

我试图模仿一个向服务器发送八位字节流的应用程序。正文中包含的数据看起来像原始字节，并且我相当确定为每个命令发送的数据是静态的，所以我希望将字节映射到我的应用程序中更易读的东西。例如，我将有一个数组：`"test" => "&^D^^&@*#dgkel"`所以我可以调用“test”并获取需要发送的真实字节。麻烦的是，PHP 似乎可以转换这些字节。我不确定这是编码问题还是什么，但一直发生的事情是我会给它一些`�ھ����@�qs��������������������X����������������������������`长度为 67 的字节（例如，）我相信，但 PHP 会说（当我做HTTP 请求的 var_dump ）发送的标头包含“Content-Length：174”或接近的内容，字节看起来像`ï¿½Ú¾ï¿½ï¿½ï¿½ï¿½@ï¿½qsï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Xï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½`

所以我不确定如何解决这个问题..有人有什么想法吗？干杯!

编辑，一点 PHP：

```
$request = new HttpRequest($this->GetMessageURL(), HTTP_METH_POST);
$request->addHeaders($headers);
$request->addRawPostData($buttonMapping[$button]);
$request->send(); 
```

# ant - 停止 ant 脚本而不失败构建

> ID：14130315
> 
> 赞同：9
> 
> 时间：2013-01-02T22:33:09.593
> 
> 标签：ant, build, ant-contrib

在我的 ant 脚本中，我想在满足条件时退出（停止执行构建）而不失败。我曾尝试使用：

```
<if>
    <equals arg1="${variable1}" arg2="${variable2}" />
  <then>
    <fail status="0" message="No change, exit" />
  </then>
</if> 
```

Ant 脚本在条件下停止但构建失败。我想停止构建但没有错误。我在 Jenkins 中使用“Invoke Ant”步骤。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-13T15:54:01.870

使用内置（从 JDK 6 开始）javascript 引擎，不需要额外的库（antcontrib .. 等）！

***1.Java System.exit()***

```
<script language="javascript">
 self.log("Ending intentionally \n...\n..\n.");
 java.lang.System.exit(0);
</script> 
```

在 Eclipse 中运行时，您可能会遇到 BUILD FAILED：BUILD FAILED javax.script.ScriptException: sun.org.mozilla.javascript.internal.WrappedException: Wrapped org.eclipse.ant.internal.launching.remote.AntSecurityException => 然后使用 Ant api代替

***2.蚂蚁API***

```
<script language="javascript">
 self.log("Ending intentionally \n...\n..\n.");
 project.fireBuildFinished(null);
</script> 
```

输出 Eclipse，没有 BUILD SUCCESSFUL 被打印：

```
 [script] Ending intentionally 
   [script] ...
   [script] ..
   [script] .
Total time: 410 milliseconds 
```

输出控制台，BUILD SUCCESSFUL 打印 2 次：

```
 [script] Ending intentionally
   [script] ...
   [script] ..
   [script] .

BUILD SUCCESSFUL
Total time: 0 seconds

BUILD SUCCESSFUL
Total time: 0 seconds 
```

包装在一个宏定义中以供重用， fe ：

```
<macrodef name="stopbuild">
 <attribute name="condition"/>
 <attribute name="paramtype" default="math"/>
 <attribute name="param1"/>
 <attribute name="param2"/>
 <attribute name="when" default="true"/>
 <sequential>
 <script language="javascript">
 falsecondition = false;
 switch ("@{condition}")
 {
  case "lt" :
   b = "@{paramtype}" == "math" ? parseInt("@{param1}") &lt; parseInt("@{param2}") : "@{param1}" &lt; "@{param2}";
   break;
  case "gt" :
   b = "@{paramtype}" == "math" ? parseInt("@{param1}") &gt; parseInt("@{param2}") : "@{param1}" &gt; "@{param2}";
   break;
  case "eq" :
   b = "@{paramtype}" == "math" ? parseInt("@{param1}") == parseInt("@{param2}") : "@{param1}" == "@{param2}";
   break;
  default:
   self.log("Wrong condition : @{condition}, supported: lt, gt, eq");
   falsecondition = true;
 }
 if(!falsecondition &amp;&amp; b == java.lang.Boolean.valueOf("@{when}")) {
   self.log("Stopping Build because @{param1} @{condition} @{param2} is @{when} !!");
   java.lang.System.exit(0);
   // alternatively use
   //project.fireBuildFinished(null);
 }
 </script>
 </sequential>
</macrodef> 
```

例子

```
 <!-- compare int, default paramtype=math and when=true -->
 <stopbuild param1="10" param2="11" condition="lt"/> 
```

输出 ：

```
[script] Stopping Build because 10 lt 11 is true !! 
```

```
 <!-- compare strings, default when=true -->
 <stopbuild param1="abc" param2="abcd" paramtype="foo" condition="lt"/> 
```

输出 ：

```
[script] Stopping Build because abc lt abcd is true !! 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-03T14:46:26.310

我建议通过重新考虑您的方法来重构您的 ant 脚本。如果您通过“在满足某个条件时执行构建”而不是“如果满足另一个条件则构建失败”来解决您的问题，则更容易实现：

```
<!-- add on top of your build file -->
<if>
    <equals arg1="${variable1}" arg2="${variable2}" />
  <then>
    <property name="runBuild" value="true"/>
  </then>
  <else>
    <property name="runBuild" value="false"/>
  </else>
</if>

<!-- add to the target that shall be executed conditionally -->
<target name="myTarget" if="${runBuild}">
...

<!-- exit message as separate target -->
<target name="exitTarget" unless="${runBuild}">
  <echo message="No Change, exit" />
</target> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:08:36.627

内部`<fail>`会抛出 a`BuildException`以使构建过程失败，因此，只要您使用此任务，您就会得到带有错误的 ant 构建退出。

就我个人而言，我不知道是否还有其他任务可以“正常”退出构建，但是自己编写一个并不难。

编写一个执行以下代码的任务应该可以工作......

```
public void execute() {
    // do something as you like
    System.exit(0);
} 
```

# .net - 事件点击带有 highslide 的饼图

> ID：14130316
> 
> 赞同：0
> 
> 时间：2013-01-02T22:33:10.237
> 
> 标签：.net, highcharts, highlight, highstock

我正在将此代码用于高库存，但我想将其用于派，我可以这样做吗？原因不起作用：/

```
url = ...
$.get(url, function (data) {
          hs.htmlExpand(null, {
          pageOrigin: {
          x: pageX,
          y: pageY
     },
     headingText: title,
     maincontentText: data
     });
}); 
```

我尝试直接在 click 函数中添加该代码，并使用以下命令：

```
.AddJavascripFunction("test", 
                "hs.htmlExpand(null, {" +
                    "pageOrigin: {"+
                    "},"+
                    "headingText: '...: '," +
                    "maincontentText: 'msje'"+
                "});"
        ) 
```

但是刷新页面（我不知道为什么）并且不显示窗口。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:05:46.923

它应该可以工作，看看例子：

[http://jsfiddle.net/tkEwD/2/](http://jsfiddle.net/tkEwD/2/)

```
chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        title: {
            text: 'Browser market shares at a specific website, 2010'
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: [
                ['Firefox',   45.0],
                ['IE',       26.8],
                {
                    name: 'Chrome',
                    y: 12.8,
                    sliced: true,
                    selected: true
                },
                ['Safari',    8.5],
                ['Opera',     6.2],
                ['Others',   0.7]
            ]
        }]
    }); 
```

# ubuntu - 无法从本地计算机访问 Ubuntu Web 服务器

> ID：14130319
> 
> 赞同：3
> 
> 时间：2013-01-02T22:33:47.020
> 
> 标签：ubuntu, webserver, port, paster

我在 Ubuntu 11.10 的 8087 端口上运行 python paste http 服务器

nmap 说 8087/tcp 是开放的

ufw防火墙处于非活动状态

但是，如果我在另一台本地网络机器上拉起它的本地 ip (192.168.1.50:8087)，它就无法连接。

我可以在本地网络机器上ping 192.168.1.50 很好。我不能telnet到端口8087，这告诉我有什么东西阻止了它？

在这里待了几个小时 0_o

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T22:44:19.403

> 它绑定到 127.0.0.1:8087 – Vigrond 46 秒前

那是你的问题。您需要重新配置粘贴服务器以绑定到`192.168.1.50`或`0.0.0.0`; `127.0.0.1`是一个不接受来自外部的连接的环回接口。

# excel - 具有多个 if 条件的 For 循环无法正确完成

> ID：14130320
> 
> 赞同：1
> 
> 时间：2013-01-02T22:33:48.157
> 
> 标签：excel, for-loop, offset, vba

我编写了一个相对简单的程序，旨在执行以下操作：

*   我的电子表格中有两列，B 和 C。两个数据集都从第 26 行开始
*   B 包含一个项目的编号（例如项目 1），C 包含每个行项目的标识符，以便可以将多个服务分配给一个项目。然后，这两个变量的组合将形成每个行项目的唯一 ID（例如，项目 1 中第三个项目的 1/3）
*   每次在 B 列中输入新的项目 ID 时，C 列应重新从 1 开始
*   一旦项目列表完成，循环应该停止（第一个 if 条件）
*   我使用另一个过程按项目编号和另一个标准对数据集进行排序，这意味着我每次之后还必须重写 C 列
*   为了使代码更易于阅读，我创建`ThisRow`并`LastRow`

我的代码不会产生错误消息，但也不会返回所需的结果：单元格 C27 的值应该为 2，但它返回 1，并且同一列中下面的所有单元格都是空白的。这看起来很奇怪，因为在即时窗口中它们都得到了 1 的值（这仍然不正确，但与它打印到电子表格的不同）。

我已经尝试了一段时间来修复它，但我不知道错误可能出在哪里。非常感谢您的帮助！下面的代码：

```
Sub DataSort()

Dim i As Object, ThisRow As Integer , LastRow As Integer

Range("C26").Value = 1
Range("C27").Activate    
ThisRow = ActiveCell.Offset(0, -1).Value

LastRow = ActiveCell.Offset(-1, -1).Value

    For Each i In Range("ProcessID")
        If ThisRow = 0 Then
            Exit Sub
        ElseIf ThisRow > LastRow Then
            ActiveCell.Value = ActiveCell.Offset(0, -1).Value + 1
        Else
            ActiveCell.Value = 1
        End If
        Debug.Print ActiveCell.Value
    Next i
End Sub 
```

**>更新：** 这是电子表格的截图；希望这会有所帮助： ![截屏](../Images/08f7c822f8094ca9ab2cfd6f7b50ae88.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:21:37.933

您正在循环同一组单元格，因为您永远不会更改循环中的活动单元格。您还需要为每一行重新计算 ThisRow 和 LastRow 的值，因此需要将其包含在循环中。

```
Sub DataSort()

Dim i As Range, ThisRow As Integer , LastRow As Integer

' Set the initial active cell and first process number
Range("C26").Value = 1
Range("C27").Activate    

   ' Loop through each cell in the Process column  
    For Each i In Range("ProcessID")
        ' Load the value of this row and the last row
        ThisRow = ActiveCell.Offset(0, -1).Value
        LastRow = ActiveCell.Offset(-1, -1).Value

        ' Check if we are at the change of a project - update process number
        If ThisRow = 0 Then
            Exit Sub              
        ElseIf ThisRow > LastRow Then
            ActiveCell.Value = 1
        Else
            ActiveCell.Value = ActiveCell.Offset(0, -1).Value + 1
        End If
        ' Move the active cell down one row
        ActiveCell.Offset(1,0).Activate
    Next i
End Sub 
```

注意：我没有测试过这段代码。

但是，您的代码不会靠近`i`变量。使用它，我们不需要使用`ActiveCell`

```
Sub DataSort()

Dim i As Range, ThisRow As Integer , LastRow As Variant

   ' Loop through each cell in the Process column  
    For Each i In Range("ProcessID")
        ' Load the value of this row and the last row
        ThisRow = i.Offset(0, -1).Value
        LastRow = i.Offset(-1, -1).Value

        ' Check if we are at the change of a project - update process number
        If ThisRow = 0 Then
            Exit Sub
        ' First Row of Data
        ElseIf LastRow = "Project ID" Then
            i.Value = 1
        'Change of Project - reset Process ID
        ElseIf ThisRow > LastRow Then
            i.Value = 1
        'Same Project so increase the Process ID
        Else
            i.Value = i.Offset(-1, 0).Value + 1
        End If
        ' Move the active cell down one row
    Next i
End Sub 
```

我认为您在检查 ThisRow 是否大于 Last 行时也可能已经交换了逻辑 - 这应该意味着项目发生了变化，因此请重置进程 ID 号。

# xaml - ViewModelLocator MVVM Light 中的 ViewModel

> ID：14130327
> 
> 赞同：34
> 
> 时间：2013-01-02T22:34:16.710
> 
> 标签：xaml, mvvm-light

将我所有的 ViewModel 存储在 SimpleIoc 中是否正确？例如，我有三个页面 MainPage、Photos、Directories（因此三个 ViewModels -> MainVM、PhotosVM、DirectoriesVM）。我应该将每个页面中的 DataContext 设置为 ViewModelLocator 中的 View Model Property 还是将 ViewModels 作为属性嵌套在 MainVM 中并将每个页面 DataContext 绑定到 Main.PhotosVMProperty、Main.DirectoriesVMProperty 等等？谁能解释一下 IoC 的想法和目的？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-01-04T09:09:22.497

首先，让我们看看 ViewModelLocator 做了什么以及我们为什么使用它：

ViewModelLocator 在我们的 App.xaml 页面上被声明为一个对象，并且是一个应用程序单例。我们将拥有一个，并且只有一个在应用程序运行时可供应用程序使用。

ViewModelLocator 是 MVVM Light 中所有 ViewModel 的来源。对于每个 ViewModel，我们在 ViewModelLocator 上都有一个属性，它允许我们获取 View 的 ViewModel。此代码如下所示：

```
public class ViewModelLocator
{
    public MainPageViewModel MainPage
    {
        get { return new MainPageViewModel(); }
    }
} 
```

这是我的 App.xaml 的一部分：

```
<Application.Resources>
    <vm:ViewModelLocator
        x:Key="ViewModelLocator" />
</Application.Resources> 
```

这是 View.xaml 的一部分

```
DataContext="{Binding MainPage, Source={StaticResource ViewModelLocator}}" 
```

到现在为止还挺好。要回答您的第一个问题，您是否必须在 MVVM Light 中使用 Ioc？不，没有必要，因为您的视图模型将提供给由 ViewModelLocator 完全构建和实例化的视图。

现在，关于您的第二个问题：IoC 的目的是什么？

IoC 旨在允许您执行以下操作：

使用 Mvvm Light，您可以像这样执行上述操作：

```
public class ViewModelLocator
{
    public ViewModelLocator()
    {
        ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

        if (ViewModelBase.IsInDesignModeStatic)
        {
            SimpleIoc.Default.Register<IDataService, Design.DesignDataService>();
        }
        else
        {
            SimpleIoc.Default.Register<IDataService, DataService>();         
        }

        SimpleIoc.Default.Register<MainViewModel>();
    }

    public MainViewModel Main
    {
        get { return SimpleIoc.Default.GetInstance<MainViewModel>(); }
    }
}

public class MainViewModel
{
    public ObservableCollection<Foo> Foos { get; set; }

    public MainViewModel(IDataService dataService)
    {
        _dataService=dataService;
        Foos=_dataService.GetFoos();
    }
} 
```

当我打电话时解决我的 MainViewModel

```
SimpleIoc.Default.GetInstance<MainViewModel>() 
```

内部发生的是 SimpleIoc 检查 MainViewModel 是否有任何依赖项（其构造函数中的参数）。然后它尝试通过查看已注册的接口来解析这些参数。它以递归方式执行此操作，因此如果 DataService 具有依赖关系，它将被实例化并在实例化时传递给 DataService 构造函数。

我为什么要做所有这些工作？

1.  使您的课程易于单元测试
2.  使您的代码接口驱动。这意味着您引用的是接口而不是具体的类
3.  使您的代码松散耦合。这意味着某人可以更改接口的实现，而使用该接口的类不需要重新编码。
4.  以自动方式解决您的类依赖关系。
5.  在 MVVM Light 中，您会看到它可以判断何时在设计模式 ( `ViewModelBase.IsInDesignModeStatic`) 下运行，这意味着您可以创建设计时服务来提供您的视图模型数据，以便您在 Visual Studio 中的视图包含实际数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-19T16:47:39.127

MVVM Light 有很多不错的功能，但在我看来，Service Locator 创建了视图对视图模型的不必要依赖。理想情况下，我希望在库 A 中拥有 ViewModelLocator，在库 B 中拥有视图模型，在库 C 中拥有视图。然后我可以根据未来项目的需要混合和匹配这些。但是，在 MVVM Light 的设计中，据我所知，视图（库 C）将始终依赖于 ViewModelLocator（这没关系），但是因为 ViewModelLocator（库 A）将始终依赖于视图模型（库 B），那么视图将始终依赖于视图模型（这是不行的，因为视图现在必须包含它曾经在所有产品中使用过的所有视图模型库）。

我相信 Prism 以某种方式使用字符串键来解决这个问题。我错过了什么吗？

哎呀！我想我只是回答了我自己的问题。解决方案是使库 A（ServiceLocator）特定于特定的解决方案（产品）。然后它只包含对该解决方案的视图模型的引用。然后视图依赖于这个 ServiceLocator，而后者又依赖于该产品的所有视图模型。最终结果是视图仅取决于将用于该产品的视图模型。我们为每个解决方案复制 ServiceLocator 这一事实没有问题，因为该模块仅包含特定于解决方案的代码。ServiceLocator 的组件（例如 SimpleIoc 类）当然对所有解决方案都是通用的，但这些组件已被分解为我们在 ServiceLocator 中调用的可重用类。

总结一下，我要解决的问题是假设一个解决方案有 6 个视图模型，其中四个密切相关，其中两个密切相关。因此，我们创建了两个程序集，每个程序集都包含密切相关的视图模型。假设我们设计了一个使用一组视图模型的产品，并且该解决方案设计为运行 Windows 8。现在视图都不同了，我们只想重用一组（组合）视图模型。因此，我们只需创建一个新的 ServiceLocator 程序集，它指向该视图模型程序集以及我们需要的任何其他程序集。我们的新 Windows 8 视图现在依赖于这个新的 ServiceLocator 程序集，并且仅依赖于我们的新产品（解决方案）中使用的视图模型。

# google-app-engine - GSUtil 无权访问在应用引擎中创建的对象

> ID：14130328
> 
> 赞同：3
> 
> 时间：2013-01-02T22:34:20.547
> 
> 标签：google-app-engine, google-cloud-storage

我的 App Engine 应用程序创建了一个对象。我现在正在尝试使用 gsutil 更改 acls，但即使我是该项目的所有者也无法这样做：

```
$ gsutil getacl gs://mybucket/3c3765c2e7d4bfe6320c54fa4c8538dc.png
GSResponseError: status=403, code=AccessDenied, reason=Forbidden.

$ gsutil ls -L gs://mybucket/3c3765c2e7d4bfe6320c54fa4c8538dc.png
gs://mybucket/3c3765c2e7d4bfe6320c54fa4c8538dc.png:
    Creation time:  Mon, 31 Dec 2012 00:17:06 GMT
    Cache-Control:  public, max-age=3600, no-transform
    Content-Length: 30317
    Content-Type:   image/png
    ETag:           3df68afeffcba39dbfdf568d78bb4c72
    ACL:            ACCESS DENIED. Note: you need FULL_CONTROL permission
                    on the object to read its ACL.
TOTAL: 1 objects, 30317 bytes (29.61 KB) 
```

为什么我对这个对象没有 FULL_CONTROL？

来自[https://groups.google.com/d/msg/gs-discussion/-aQISyaeeFo/9L_ML2SnV0MJ](https://groups.google.com/d/msg/gs-discussion/-aQISyaeeFo/9L_ML2SnV0MJ)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:51:36.933

App Engine 通常使用应用的服务帐号来访问 Google Cloud Storage。服务帐户与您在 gsutil 中使用的 gmail 帐户是不同的用户。

拥有`WRITE`或`FULL_CONTROL`访问存储桶意味着您可以删除对象。这并不意味着您可以读取对象或更改对象 ACL。为此，您需要`READ`或`FULL_CONTROL`访问该对象。对象 ACL 与存储桶 ACL 正交。

所以正在发生的事情是：

*   存储桶 acl 允许您和服务帐户写入存储桶。
*   服务帐户创建一个新对象，应用存储桶的默认对象 acl。
*   存储桶的[默认对象 acl](https://developers.google.com/storage/docs/accesscontrol#defaultobjects)不会授予您对此对象的完全控制权。

运行`gsutil getdefacl gs://mybucket`并确保默认对象 acl 将您或您的组之一授予`FULL_CONTROL`新对象。

如果没有，则编辑 xml 文档以包含类似以下内容并运行`gsutil setdefacl acl.xml gs://mybucket`：

```
<?xml version="1.0" ?>
<AccessControlList>
 <Entries>
  <Entry>
   <Scope type="UserByEmail">
    <EmailAddress>example@gmail.com</EmailAddress>
   </Scope>
   <Permission>FULL_CONTROL</Permission>
  </Entry>
  <Entry>
   <Scope type="GroupByEmail">
    <EmailAddress>foo@googlegroups.com</EmailAddress>
   </Scope>
   <Permission>FULL_CONTROL</Permission>
  </Entry>
  <Entry>
   <Scope type="GroupByEmail">
    <EmailAddress>group@mydomain.com</EmailAddress>
   </Scope>
   <Permission>FULL_CONTROL</Permission>
  </Entry>
 </Entries>
</AccessControlList> 
```

# regex - 仅替换括号之间的空格

> ID：14130329
> 
> 赞同：7
> 
> 时间：2013-01-02T22:34:21.910
> 
> 标签：regex, bash, sed, awk

在一个字符串中，我试图用下划线替换括号之间的所有空格。例如，假设`this ( is my ) simple example`我想得到`this (_is_my_) simple example`.

我正在研究 bash 并考虑为 sed 创建一个替换表达式，但是我无法想出一个简单的单行解决方案。

期待您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T00:37:26.053

使用 sed：

```
sed ':l s/\(([^ )]*\)[ ]/\1_/;tl' input 
```

如果括号不平衡：

```
sed ':l s/\(([^ )]*\)[ ]\([^)]*)\)/\1_\2/;tl' input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T23:04:10.097

```
$ cat file
this ( is my ) simple example
$ awk 'match($0,/\([^)]+\)/) {str=substr($0,RSTART,RLENGTH); gsub(/ /,"_",str); $0=substr($0,1,RSTART-1) str substr($0,RSTART+RLENGTH)} 1' file
this (_is_my_) simple example 
```

如果模式可以在一行上多次出现，则将 match() 放入循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:22:32.497

使用真正的编程语言：

```
#!/usr/bin/python

import sys

for line in sys.stdin:
    inp = False
    for x in line:
        if x == '(':
            inp = True
        elif x == ')':
            inp = False
        if inp == True and x == ' ':
            sys.stdout.write('_')
        else:
            sys.stdout.write(x) 
```

这只处理最简单的情况，但应该很容易扩展到更复杂的情况。

```
$echo "this ( is my ) simple case"|./replace.py
$this (_is_my_) simple case
$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T00:32:01.393

假设没有嵌套括号或破括号对，最简单的方法是这样使用`Perl`：

```
perl -pe 's{(\([^\)]*\))}{($r=$1)=~s/ /_/g;$r}ge' file 
```

结果：

```
this (_is_my_) simple example 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T02:30:41.957

这可能对您有用（GNU sed）：

```
sed 's/^/\n/;ta;:a;s/\n$//;t;/\n /{x;/./{x;s/\n /_\n/;ta};x;s/\n / \n/;ta};/\n(/{x;s/^/x/;x;s/\n(/(\n/;ta};/\n)/{x;s/.//;x;s/\n)/)\n/;ta};s/\n\([^ ()]*\)/\1\n/;ta' file 
```

这迎合了多行的嵌套括号。然而，它可能非常缓慢。

# date - jqGrid 日期选择器自动弹出

> ID：14130330
> 
> 赞同：2
> 
> 时间：2013-01-02T22:34:22.717
> 
> 标签：date, jqgrid

我正在使用具有基本功能且没有附加 javascript 的 PHP jqGrid。弹出框第一次打开时，一切正常。

当我再次编辑时，日期选择器每次都会自动弹出。这是一个错误吗？

我的代码是如此基本，我不知道它还能是什么。

![在此处输入图像描述](../Images/f8bd532f31d6378c1c1edd450e56b78b.png)

这是我的代码：

```
<?php

// Connection to the server
$conn = new PDO(DB_DSN,DB_USER,DB_PASSWORD);
// Tell the db that we use utf-8
$conn->query("SET NAMES utf8");

// Create the jqGrid instance
$grid = new jqGridRender($conn);

$grid->SelectCommand = 'SELECT id, date, description, goal,
    type  FROM events';

$grid->table = 'events';
$grid->setPrimaryKeyId('id');
$grid->serialKey = false;
// Set output format to json
$grid->dataType = 'json';
// Let the grid create the model
$Model = array (
    array ("name" => "date"),
    array ("name" => "description"),
    array ("name" => "goal"),
    array ("name" => "type")

);
$grid->setColModel($Model);

// Set the url from where we obtain the data
$grid->setUrl('event-grid.php');
// Set some grid options
$grid->setGridOptions(array(
    "caption"=>"Events",
    "rowNum"=> 5,
    "rowList"=>array(5,10,20,30),
    "sortname"=>"date",
    "width" => 400,
    "height" => 113,
    "hoverrows" => true,
    "viewrecords" => false,
    "sortable"=>true
));

///*** Use this to define both server and user date params for date picker and field please remeber that the grid CRUD interactions are separate from jqueryui Datepicker you must integrate them together ***/
$grid->setUserTime("h:i:s");
$grid->setUserDate('Y M d');
$grid->setDbDate('Y-m-d');

$grid->setColProperty("date", array(
        "label"=>"Event Date",
        "width"=>80,
        "align"=>"center",
        "fixed"=>true,
        "formatter"=>"date",
        "formatoptions"=>array(
            "srcformat"=>"Y-m-d",
            "newformat"=>"Y M d")

//    CODE BLOCK BELOW TO USE JS DATE PICKER
//
//        "editoptions"=>array("dataInit"=>
//                "js:function($){setTimeout(function(){
//                    jQuery($).datepicker({dateFormat:'yy-mm-dd',
//                    changeMonth: true,
//                    showOn: 'both',
//                    buttonImage: 'img/83-calendar.png',
//                    buttonImageOnly: true,
//                    minDate: '-5Y',
//                    maxDate: '+5Y'});
//                    jQuery('.ui-datepicker').css({'zIndex':'1200','font-size':'75%'});},200);}")

    ));

// Set the datepicker on OrderDate field. Note that the script automatically
// converts the user date set in the jqGrid
$grid->setDatepicker('date', array("buttonIcon"=>true), true, false);
$grid->datearray = array('date');

// Enable navigator
$grid->navigator = true;
// Enable only deleting
$grid->setNavOptions('navigator', array(
    "excel"=>false,
    "add"=>true,
    "edit"=>true,
    "del"=>true,
    "view"=>false,
    "search"=>false,
    "csv" => true
    ));

$grid->setNavOptions('add', array(
    "closeAfterAdd"=>true,
    "reloadAfterSubmit"=>true
));

$grid->setNavOptions('edit', array(
    "closeAfterEdit"=>true,
    "reloadAfterSubmit"=>true
));

$grid->csvsep=",";

//$grid->debug = true;

//Enjoy
$grid->renderGrid('#event-grid','#event-pager',true, null, null, true,true);
$conn = null;

?> 
```

代码非常简单，与演示中的完全一样。

```
$conn = new PDO(DB_DSN,DB_USER,DB_PASSWORD); 
// Tell the db that we use utf-8 
$conn->query("SET NAMES utf8"); 

// Create the jqGrid instance 
$grid = new jqGridRender($conn); 
// Write the SQL Query 
$grid->SelectCommand = 'SELECT EmployeeID, FirstName, LastName, BirthDate FROM employees'; 
// Set the table to where you add the data 
$grid->table = 'employees'; 
// Set output format to json 
$grid->dataType = 'json'; 
// Let the grid create the model 
$grid->setColModel(); 
// Set the url from where we obtain the data 
$grid->setUrl('grid.php'); 
$grid->setColProperty('EmployeeID', array("editable"=>false)); 
/* 
$grid->setColProperty('BirthDate',  
        array("formatter"=>"date", 
            "formatoptions"=>array("srcformat"=>"Y-m-d H:i:s", "newformat"=>"Y-m-d"), 
            "editoptions"=>array("dataInit"=> 
                "js:function(elm){setTimeout(function(){ 
                    jQuery(elm).datepicker({dateFormat:'yy-mm-dd'}); 
                    jQuery('.ui-datepicker').css({'zIndex':'1200','font-size':'75%'});},100);}") 
            )); 
 *  
 */ 
$grid->setColProperty("BirthDate", array( 
    "formatter"=>"date", 
    "formatoptions"=>array("srcformat"=>"Y-m-d H:i:s","newformat"=>"Y M d") 
    ) 
);  

// Date options to edit 
$grid->setUserDate("Y M d"); 
$grid->setUserTime("Y M d"); 

$grid->setDatepicker('BirthDate'); 

$grid->datearray = array("BirthDate"); 

// Set some grid options 
$grid->setGridOptions(array( 
    "rowNum"=>10, 
    "scrollrows"=>true, 
    "rowList"=>array(10,20,30), 
    "sortname"=>"EmployeeID" 
)); 
$grid->navigator= true; 
$grid->setNavOptions('navigator', array("excel"=>false,"add"=>true,"edit"=>true,"del"=>false,"view"=>false, "search"=>false));
// Close the dialog after editing 
$grid->setNavOptions('edit',array("height"=>150,"dataheight"=>'auto', "closeAfterEdit"=>true)); 
$grid->setNavOptions('add',array("height"=>150,"dataheight"=>'auto',"closeAfterEdit"=>true)); 

// Enjoy 
$grid->renderGrid('#grid','#pager',true, null, null, true,true); 
$conn = null; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:09:13.480

原因是一些因素的综合。您在编辑表单的*第一个*字段上设置 datepicker，在编辑表单的第一个控件上使用 datepicker 选项打开`on focus`和 jqGrid `set focus`。

有很多方法可以解决这个问题，但是如果第一次打开编辑表单的行为对您来说是可以的，那么您可以尝试只使用[editGridRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#editgridrow)`recreateForm: true`的选项。

# sql-server - SQL Server SPID 被杀死后返回

> ID：14130331
> 
> 赞同：0
> 
> 时间：2013-01-02T22:34:24.903
> 
> 标签：sql-server

我的 SQL Server 2008 R2 数据库中有一个不应存在的 SPID。它是在复制数据库作业上创建的，并且该数据库和作业早已被删除。

然而，SPID 并没有消失，而是每 1 分钟尝试重新连接到我的数据库，并且正在填满我的错误日志。

我尝试使用`KILL ##`## 是进程 ID 的命令，但它只是返回一个新的会话 ID。

我重新启动了服务器，确保所有可能相关的作业都已完成。

有人知道我怎样才能永远结束这个 SPID 吗？

当它尝试每分钟运行时，它会在我的日志中显示以下错误消息：

```
Log Name:      Application   
Source:        MSSQLSERVER  
Date:          1/2/2013 11:34:24 AM  
Event ID:      18456  
Task Category: Logon  
Level:         Information  
Keywords:      Classic,Audit Failure  
User:          DOMAIN\userid  
Computer:      server.domain.com  
Description:  
Login failed for user 'domain\userid. Reason: Failed to open the explicitly specified database. CLIENT: <local machine>]  
Event Xml:  
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">  
  <System>  
    <Provider Name="MSSQLSERVER" />  
    <EventID Qualifiers="49152">18456</EventID>  
    <Level>0</Level>  
    <Task>4</Task>  
    <Keywords>0x90000000000000</Keywords>  
    <TimeCreated SystemTime="2013-01-02T19:34:24.000000000Z" />  
    <EventRecordID>19934006</EventRecordID>  
    <Channel>Application</Channel>  
    <Computer>server.domain.com</Computer>  
    <Security UserID="S-1-5-21-3027188495-1942244818-4144419180-3136" />  
  </System>  
  <EventData>  
    <Data>DOMAIN\userid</Data>  
    <Data> Reason: Failed to open the explicitly specified database.</Data>  
    <Data> [CLIENT: &lt;local machine&gt;]</Data>  
      <Binary>184800000E00000006000000410043004500500034000000070000006D00610073007400650072000000</Binary>  
  </EventData>  
</Event> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:24:22.513

该错误表明您有一个外部（SQL Server 外部）进程尝试连接到 SQL Server。登录失败，因为进程无法连接到数据库，我怀疑该数据库已被删除。此过程继续重试连接到 SQL Server。您无法终止 SPID，因为外部进程旨在重新连接。

该进程与复制数据库作业相关联。您是否通过右键单击 SSMS 对象管理器中的源数据库或其他类似技术来创建复制数据库作业？外部进程可能与 DTS 包相关联。

在 Windows 任务管理器中，选择进程并查找类似于 DTExec.exe 或 DTExecUI.exe 的映像名称。如果找到一个，则选择结束进程。这应该会终止该进程并停止与 SQL Server 的连接。

当您说“我已重新启动服务器”时，您是指重新启动计算机还是停止并启动 SQL Server 服务？重新启动 SQL Server 服务不会停止此过程。

# ios - 需要从另一个viewController调用其他viewController中的方法

> ID：14130334
> 
> 赞同：1
> 
> 时间：2013-01-02T22:34:44.417
> 
> 标签：ios, uiviewcontroller

我有一个具有多个视图控制器的应用程序，其中一些视图控制器包含运行各种任务的方法。我需要做的是在初始 viewController 加载时，在其他 viewController 中调用这些方法，以便它们在后台运行，但是，我在执行此操作时遇到了一些困难。

假设我有 4 个 viewController，A、B、C 和 D，其中 A 是初始 viewController，在每个 viewController 中，我分别有 aMethod、bMethod、cMethod 和 dMethod。以下是相关代码：

在我打开的viewController（AviewController）里面：

在 .h 文件中：

```
#import "BViewController"
#import "CViewController"
#import "DViewController"

@interface AViewController:UIViewController {

BViewController *bViewCon;
CViewController *cViewCon;
DViewController *dViewCon;

}

@property (nonatomic, retain) BViewController *bViewCon;
@property (nonatomic, retain) CViewController *cViewCon;
@property (nonatomic, retain) DViewController *dViewCon;

@end 
```

在我的 .m 文件中，我有以下内容：

```
#import "BViewController"
#import "CViewController"
#import "DViewController"

@implementation AviewController

@synthesize bViewCon, cViewCon, dViewCon;

- (void) viewDidLoad {

[super viewDidLoad];

bViewCon = [[BViewController alloc] init];
[bViewCon bMethod];

...

} 
```

但是，我收到错误消息“'BViewController' 没有可见的@interface 声明选择器'bMethod'”。我需要从这个类（即AViewController）中以相同的方式从其他viewControllers 中调用其他方法。

提前感谢所有回复的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T22:40:05.910

你考虑过使用`NSNotificationCenter`吗？在通知上设置方法，并在需要它们运行时对它们执行 ping 操作。如果您的其他视图控制器已实例化且可用，例如隐藏在导航控制器堆栈或单独的选项卡中，这将有所帮助。

要回答有关该错误的问题，您需要在头文件中声明要调用的方法。错误表明它找不到该方法的声明。

通知中心示例

```
// listen for notifications - add to view controller doing the actions
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(mySpecialMethod) name:@"SomeNotificationName" object:nil];

// when you want your other view controller to do something, post a notification
[[NSNotificationCenter defaultCenter] postNotificationName:@"SomeNotificationName" object:nil];

// you don't want this notification hanging around, so add this when you are done or in dealloc/viewDidUnload
[[NSNotificationCenter defaultCenter] removeObserver:self]; // this removes all notifications for this view
// if you want to remove just the one you created, you can remove it by name as well 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:55:13.977

要解决您收到的错误，请确保在每个控制器的头 (.h) 文件中声明了所有方法（否则，编译器将无法看到它们）。

由于所有这些控制器都是子控制器`AViewController`（它们是由`AViewController`它创建并作为 ivars 保存的），我不会`NSNotificationCenter`在这里使用（除非还有其他对象需要在某些事件发生时得到通知，这不是拥有`AViewController`）。

相反，我会按照您的尝试直接调用这些方法。

另一方面，如果这些方法正在启动正在进行的任务（在后台运行任务），最好将方法调用移动`init:`到`AViewController`. （在 iOS 5 上，可以卸载视图，因此`viewDidLoad:`可能会多次调用......例如在内存警告和视图被屏蔽的情况下）。我可能会做这样的事情：

```
- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)bundle
{
    self = [super initWithNibName:nibName bundle:bundle];  // your correct stuff here
    if (self)
    {
         bViewCon = [[BViewController alloc] init];
         [bViewCon bMethod];
         // ... and so on for the other controllers
    }
    return self;
} 
```

**编辑**

虽然，正如评论中所提到的，`UIViewController`s 在内存方面并不便宜......老实说，最好将这段代码重构为有一个控制器（`NSObject`而不是的子类`UIViewController`，它更便宜）充当将在后台运行的任务的管理器。我想这也可能会在以后对您有所帮助，因为它将有助于划分每个控制器的任务和目的（在这种情况下，`UIViewController`s 应该主要负责管理视图（在某些情况下是/视图层次结构）和关联的任务...如果正在进行的任务超出了与所述视图相关的范围，这可能表明`UIViewController`不应该处理它们...

# laravel - Laravel - 真的很难理解雄辩

> ID：14130338
> 
> 赞同：2
> 
> 时间：2013-01-02T22:34:58.673
> 
> 标签：laravel, eloquent

我是从 Codeigniter 过来的 Laravel 的新手，在大多数情况下我真的很喜欢它，但我真的无法理解 Eloquent。

如果我想做一个这样的简单查询：

```
SELECT * FROM site INNER JOIN tweeter ON tweeter.id = site.tweeter_id 
```

我尝试做这样的事情（带有“属于”）：

```
$site = Site::with('tweeter')->find($site_id); 
```

但是现在我有两个查询和一个并不真正需要的 IN() ，如下所示：

```
SELECT * FROM `site` WHERE `id` = '12' LIMIT 1

SELECT * FROM `tweeter` WHERE `id` IN ('3') 
```

所以我尝试像这样强制加入：

```
$site = Site::join('tweeter', 'tweeter.id', '=', 'site.tweeter_id')->find($site_id); 
```

现在我得到一个像这样的错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1052 Column 'id' in where clause is ambiguous

SQL: SELECT * FROM `site` INNER JOIN `tweeter` ON `tweeter`.`id` = `site.tweeter_id` WHERE `id` = ? LIMIT 1

Bindings: array (
  0 => 12,
) 
```

很明显错误在哪里，哪里需要使用“site.id =？”之类的东西。但是我无论如何都看不到要发生这种情况？

所以我只是坚持回到流利的状态并使用：

```
DB::table('site')->join('tweeter', 'tweeter.id', '=', 'site.tweeter_id')->where('site.id','=',$site_id)->first() 
```

我想这不是一个大问题。我真的很想理解雄辩。我不禁觉得我弄错了，误解了它的工作原理。我错过了什么吗？还是真的必须以非常特定的方式使用它？

我想我真正的问题是：无论如何，我想使用 Eloquent 进行查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:26:02.707

我实际上发现这种行为是有利的。考虑一下（我将修改您的示例）。所以我们有很多站点，每个站点都有很多高音扬声器。每个站点在数据库中都有很多信息：很多列，其中一些包含大量文本/数据的文本列。

您按照自己的方式进行查询：

```
SELECT * FROM site INNER JOIN tweeter ON tweeter.id = site.tweeter_id 
```

有两个缺点：

1.  你会得到很多冗余数据。您为同一站点的高音扬声器获得的每一行都将具有您只需要一次的相同站点数据，因此 PHP 和您的数据库之间的通信需要更长的时间。
2.  你如何做foreach（tweeter_of_this_site）？我猜你会在某种列表中显示所有站点，然后在每个站点中显示所有的高音扬声器。您必须编写一些自定义逻辑才能做到这一点。

使用 ORM 方法解决了这两个问题：它只获取站点数据一次，并且允许您这样做：

```
foreach ($sites as $site) {
    foreach($site->tweeters as $tweeter) {}
} 
```

我还要说的是：**不要打它！**我曾经说过：我为什么要使用 ORM，我可以编写自己的 SQL，谢谢。现在我在 Laravel 中使用它，它很棒！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:45:12.717

您总是可以将 Eloquent 视为 Fluent 的扩展。

您遇到的问题是由 find() 命令引起的。它使用`id`没有表名，这变得模棱两可。

**这是一个记录在案的问题：** [https ://github.com/laravel/laravel/issues/1050](https://github.com/laravel/laravel/issues/1050)

要创建您正在寻找的命令，您可以这样做：

```
$site = Site::join('tweeter', 'tweeter.id', '=', 'site.tweeter_id')->where('site.id', '=', $site_id)->first($fields); 
```

当然，***一旦采用了问题修复程序***，您的 join()->find() 语法就是正确的。

# c# - 用于混淆程序集的托管调试器

> ID：14130341
> 
> 赞同：0
> 
> 时间：2013-01-02T22:35:09.780
> 
> 标签：c#, obfuscation, mdbg

我只是想知道是否有任何工具（最好是免费的）可以用来从混淆的程序集中运行 IL。我知道[mdbg](http://www.microsoft.com/en-ca/download/details.aspx?id=19621)可用于调试托管程序集，但我不确定当该程序集被混淆时是否可以使用它。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:37:24.787

混淆的 IL 应该像非混淆的 IL 一样运行 - 您应该能够直接使用程序集。否则，运行时本身将无法执行代码。

主要问题是名称会被混淆，因此很难找到和调用*正确的成员。*然而，更好的混淆器使这变得非常困难，这确实是重点。

通常，最好针对非混淆版本进行开发，然后一次性使用程序集混淆您的应用程序。对于大多数混淆器，这通常会为您提供正确的调试信息（或至少展开并理解调用堆栈）。

# python - Pygame 表面力学

> ID：14130345
> 
> 赞同：3
> 
> 时间：2013-01-02T22:35:35.030
> 
> 标签：python, pygame, geometry-surface

我目前正在为我正在处理的一个小项目编写一些 GUI 代码，并且我已经到了需要实现滚动条及其相关容器的地步。为了便于执行，我希望能够将“滚动框”（滚动条将影响的窗口）中的所有元素绘制到与主显示表面不同的表面。然后将根据需要裁剪单独的表面，然后在渲染循环中将其绘制到显示表面。但是，我无法使其正常工作。

在`draw()`我班级的方法中`ScrollBox`，我有以下代码。

```
def draw(self):
    self.subSurface.blit(self.image, (x, y)) 
    #subSurface is, naturally, a Surface, and image is a pygame.Image; x and y are whatever
    self.displaySurface.blit(self.subSurface, (x,y)) 
```

与我的代码中的所有可绘制 GUI 元素一样，`draw()`每次通过主渲染循环时都会调用它。上面的代码给我的是默认填充的黑色 Rect 并且`self.image`不以任何容量显示。我尝试将第一行替换为

```
pygame.draw.rect(self.subSurface, color, rect) 
```

但它产生了相同的结果。从我对其他 Pygame GUI 库的阅读来看，我想做的似乎是可能的，但我认为我没有正确执行它。如何将其他源/表面附加到`subSurface`然后`subSurface`被绘制（附有源）`displaySurface`？

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:50:28.070

对于将来访问此问题的人：

请记住，`dest`参数 for`Surface.blit()`是相对于目标表面的左上角的。因此，如果您在地下组装图像，请记住使用相对于您组装对象左上角的坐标，而不是绝对显示坐标。

所以要组装一个滚动条并将其绘制在某处：

```
class ScrollBar:
    # ... code ...
    def render(self, display, x, y):
        self.subSurface.blit(self.handle_image, (0, self.handle_pos))
        self.subSurface.blit(self.upbtn_image, (0, 0))
        self.subSurface.blit(self.dnbtn_image, (0, self.height - self.btn_height))
        # ... other rendering operations
        display.blit(self.subSurface, (x, y)) 
```

调整所有数字和变量名称以适应口味，但你明白了。请注意，所有滚动条元素都位于“scrollbar-local”坐标中，只有显示表面的最终 blit 位于屏幕/应用程序坐标中。

# php - 如何在 PHP 中实现服务器发送事件？

> ID：14130347
> 
> 赞同：10
> 
> 时间：2013-01-02T22:35:46.540
> 
> 标签：php, server-sent-events

我已经使用 php 和一个 while 循环设置了一个服务器发送事件脚本，我不希望脚本必须继续关闭并且必须重新轮询，所以我把它全部放在一个 while 循环中。

问题是脚本被卡住了，我不得不放弃那条路线，而是使用了 node.js websocket 后端。

我的问题是，如果我回去制作服务器发送事件 php 脚本，我该如何实现它？
`while`循环似乎并没有削减它，因为它挂起脚本，如果它只是每秒连接和断开连接，它与长轮询没有什么不同，所以我如何创建一个不会挂起的 PHP 脚本，同时还发送上证所消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T23:04:41.597

您似乎对 php 输出缓冲有问题。尝试将这些行添加到`while`循环的末尾：

```
ob_flush();
flush(); 
```

这应该禁用输出缓冲。

**编辑**您也可以在一段时间（即 10 分钟）后终止脚本以减少服务器负载。

我为您创建了一个库，以便您轻松完成。[在这里](https://github.com/licson0729/libSSE-php)检查。

**第二次编辑** 您是否有反向代理，例如 nginx 或 varnish？这可能是原因，因为代理尝试缓存输出的内容，但 SSE 脚本永远不会结束，直到您停止它，所以整个事情都挂起。捕获输出的其他事物可能具有类似的结果，例如 mod_deflate。

**第三次编辑** 如果您有反向代理，您可以尝试关闭缓存以允许 SSE 工作。

PHP 中还有另一种禁用输出缓冲的方法。请看下面的代码：

```
<?php
for($i=0;$i<ob_get_level();$i++){
    ob_end_flush();
}
@apache_setenv('no-gzip',1);
@ini_set('implict_flush',1);
ob_implict_flush(true); 
```

# list - 如何将列表中的列表添加为元素？

> ID：14130350
> 
> 赞同：1
> 
> 时间：2013-01-02T22:35:50.617
> 
> 标签：list, append, common-lisp

出于演示目的，

我有一个列表有一个列表：

```
 > (setf x (list '(1 2 1) '(4 5 4)))
 ((1 2 1) (4 5 4))
 > (length x)
 2 
```

我想向它添加一个新列表 '(2 3 2) 。**附加**功能：

```
 > (append '(2 3 2) x)
 (2 3 2 (1 2 1) (4 5 4))

 > (length (append '(2 3 2) x))
 5 
```

并没有真正做我想做的事。

我想要的是像这样添加'（2 3 2）：

```
((8 7 8) (1 2 1) (4 5 4)) 
```

所以长度为3。

到目前为止，我还没有看到任何示例或方法来做我想做的事。是否有内置功能或有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:39:59.967

[APPEND](http://www.lispworks.com/documentation/lw50/CLHS/Body/f_append.htm#append)不是破坏性功能，这是您所要求的。APPEND 所做的是分配一个新列表，然后它会返回该列表。

你可以做些什么来实现你的目标：

`(setf x (append '((...)) x)) ;;appends the quoted list to x`

还有一个函数[NCONC](http://www.lispworks.com/documentation/lw50/CLHS/Body/f_nconc.htm)，它破坏性地调整指针。

对于您的冥想，我提供示例工作：

```
CL-USER> (defparameter *x* nil)
*X*
CL-USER> (setf *x* '((1 2 3) (4 5 6)))
((1 2 3) (4 5 6))
CL-USER> (append *x* '(10 11 12))
((1 2 3) (4 5 6) 10 11 12)
CL-USER> (append *x* '((10 11 12)))
((1 2 3) (4 5 6) (10 11 12))
CL-USER> (setf *x* (append *x* '((10 11 12))))
((1 2 3) (4 5 6) (10 11 12))
CL-USER> *x*
((1 2 3) (4 5 6) (10 11 12))
CL-USER> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T23:42:08.760

`APPEND` appends lists. If you have a list of two sublists `((1 2 1) (4 5 4))` and you want to append another list of one sublist `((2 3 2))` in front of it.

```
CL-USER 99 > (append '((2 3 2)) '((1 2 1) (4 5 4)))
((2 3 2) (1 2 1) (4 5 4)) 
```

or use this, if you want to add one item in front of the list:

```
CL-USER 98 > (cons '(2 3 2) '((1 2 1) (4 5 4)))
((2 3 2) (1 2 1) (4 5 4)) 
```

# java - 通过 JDBC/ODBC/Microsoft Access 进行字符编码

> ID：14130351
> 
> 赞同：2
> 
> 时间：2013-01-02T22:36:01.473
> 
> 标签：java, ms-access, jdbc, character-encoding, odbc

我正在通过 JDBC/ODBC 成功连接到 Microsoft Access。之后，我进行查询以从 Microsoft Access 中选择行，并将这些结果写入 TXT 文件。一切正常，但我有一些包含重音符号的字符串，这些字符串显示为“？” 在 TXT 文件中。我已经尝试过各种形式的方法来用 java 编写文件，如 PrintWriter、FileWriter、Outputstream 等，包括在其中一些方法中添加字符编码参数（UTF-8 或 ISO-8859-1）。我需要任何有关以正确方式显示这些字符的方法的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:01:27.850

试试下面的行，

```
 String OUTPUTFILE = "PATH/TO/FILE/";
  BufferedWriter bf = new BufferedWriter(new OutputStreamWriter(
                      new FileOutputStream(OUTPUTFILE),"UTF8")); 
```

将其添加到代码中后，您应该可以很好地使用`bf.write('VALUE')`将`UTF8`字符写入文件。并且，还要确保将您的文本编辑器编码设置为`Unicode`or `UTF8`，如果您不这样做，它可能看起来孔处理不起作用，这会导致更多的混乱。

编辑：

读取 UTF8 txt

```
String IPUTFILE = "PATH/TO/File";

BufferedReader in = new BufferedReader(
                    new InputStreamReader(
                    new FileInputStream(INPUTFILE), "UTF8")); 
```

然后读线`String str = in.readLine();`

# sql - 将两行中相似的列数据合并为一行

> ID：14130353
> 
> 赞同：3
> 
> 时间：2013-01-02T22:36:03.620
> 
> 标签：sql

我的查询结果具有以下特征：

```
LIDCode                         Total   Domain  Region  VSE   Version       
AB02                               15   GLOBAL  CANLA    0     6943 
AB02 - 5925 CENTRE STREET SW       31   GLOBAL  CANLA   30     6943 
```

我从 2 个不同的表中获取数据，但我想为 LIDCode 值使用较长的条目。这是许多人的一组结果。如何将这两行组合在一起以获得组合行的总数？LIDcode 值发生变化，所以我不能使用 AB02 作为常数值进行比较。

我需要的结果是：

```
AB02 - 5925 CENTRE STREET SW       46   GLOBAL  CANLA   30     6943 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:45:03.367

您可以尝试这样的事情（作为 SQL Server 中的示例）：

```
select max(LIDCode) as LIDCode
      , sum(Total) as Total
      , Domain
      , Region
      , sum(VSE) as VSE -- or max(VSE)
      , Version
from Mytable
group by left(LIDCode, 4), Domain, Region, Version 
```

您可能必须按 LIDCode 的不同子字符串（空格前的第一个子字符串等）进行分组

这是一个可以在另一个 RDBMS 中尝试并可能尝试的[SQL Fiddle 。](http://sqlfiddle.com/#!6/bc95a/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:47:10.980

你可以为 MySQL 尝试这样的事情：

```
SELECT LEFT(LIDCODE, 4) AS LIDCODE, SUM(TOTAL) AS total, `Domain`, `Region`, SUM(VSE) AS vse, `Version`
FROM tbl
GROUP BY LEFT(LIDCODE, 4), `Domain`, `Region`, `Version` 
```

## [SQL小提琴](http://sqlfiddle.com/#!2/05601/1)

# bash - 在 Bash 中编辑文件

> ID：14130356
> 
> 赞同：1
> 
> 时间：2013-01-02T22:36:12.010
> 
> 标签：bash, awk

我有一些包含 IP 地址的文件。我正在创建一个脚本，并且必须弄清楚如何使用基于之前创建的文件的 IP 地址创建一个新的用户文件。如果最后一个文件包含 ABCD 的 IP，则新文件需要是 ABC(D+4)。

我想我需要使用 'sed' 和 'awk' 命令，但无法让任何工作。我将如何编写这部分脚本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T22:40:23.393

下面是一些可以帮助您入门的内容：假设有一个名为`input`如下所示的文件：

**输入：**内容`input`

```
127.0.0.1
127.0.0.2
127.0.0.3
127.0.0.200 
```

您可以在 cmdline 上执行以下操作：

```
awk 'BEGIN{FS=OFS="."} {$4=$4+4; print}' input > output 
```

**[关于awk](/questions/tagged/awk "显示标记为“awk”的问题")在这里做什么的**解释：****

 ***   `awk '...'`- 调用awk，一个主要用于逐行操作文件的工具，单引号括起来的东西是awk的指令。
*   `BEGIN{FS=OFS="."}`- 告诉 awk`.`用作输入和输出的分隔符​​。`FS`代表“字段分隔符”
*   `{$4=$4+4; print}`-`$4`表示第 4 个字段。由于`.`是分隔符，`D`对应于第 4 个字段，我们将整数值添加`4`到第 4 个字段。这里`print`只是打印整条线的简写。
*   `input`- 将输入文件命名为 awk 的参数；救猫
*   `> output`- 将输出重定向到一个文件，这样您就可以在基于它制作用户文件之前检查它们是否存在任何问题。

**输出：**内容`output`

```
127.0.0.5
127.0.0.6
127.0.0.7
127.0.0.204 
```

然后您可以一次读取`output`一行以根据需要创建新的用户文件，也许是另一个脚本，其中包含以下内容：

```
while read line
do
    echo "this is a user file" > "$line"
done < output 
```

（并根据您的需要进行调整）

**最后**，只要您了解上面的内容，您就可以`output`完全跳过该文件，只需在一行中完成所有操作：

```
awk 'BEGIN{FS=OFS="."} {$4=$4+4; print}' input | while read line; do echo "hello world" > "$line"; done 
```**

# xcode - The destination does not support the architecture 是什么意思？

> ID：14130361
> 
> 赞同：1
> 
> 时间：2013-01-02T22:36:31.077
> 
> 标签：xcode, facebook

我有同样的问题[Xcode 无法在选定的目标上运行](https://stackoverflow.com/questions/11767945/xcode-cannot-run-on-the-selected-destination)

> 目标不支持构建所选软件的体系结构。切换到支持该架构的目的地以运行所选软件。

我在那里尝试了解决方案，但它不起作用。

所以我会尝试做一些更合理的事情。

无论如何，错误是什么意思？当 Xcode 说要切换到支持该架构的目的地时，它想说什么？架构在哪里指定？什么软件？问题是什么？

虽然解决方案可能很好，但我正在寻找的是理解它的真正含义。

1.  该项目曾经工作
2.  该项目仍然可以在真正的 iPhone 上运行，但不能在模拟器中运行
3.  我使用了最新的 facebook SDK。但是，它甚至在 SDK 之后运行。在我清理项目之后它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:12:14.223

虽然我没有针对您的问题的解决方案，但我可以回答您的问题，即 Xcode**认为**什么是错误的以及该错误意味着什么。

因此，在这种情况下，目的地实际上是您的模拟器（如果您正在为它构建，也可能是 iPhone）。架构[在这里](http://en.wikipedia.org/wiki/List_of_CPU_architectures)得到了体面的解释。您需要了解的是，为了让软件在特定架构上运行，需要为它构建（或者为它组装，更准确地说）。这意味着对于相同的软件，iPhone（具有 ARM CPU）的 CPU 指令与 iMac（x64）的 CPU 指令不同。

现在，考虑到上述情况，Xcode 想说的是您正在尝试为您的模拟器构建错误的架构，您应该切换到支持该架构的不同目的地（正如您所提到的，您可以在iPhone，这是一个不同的架构），以便软件运行。

这可能是 Xcode 错误或配置错误。**您最好创建一个新项目并将所有类复制到其中，而不是寻找它。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T19:58:41.127

你会很高兴知道这个问题有一个非常简单的解决方案。在项目导航树中选择 Info.plist 并确保它没有分配给目标。我已经确认这是正确的解决方案。如果为 iOS 6 或更早版本构建，您可能还需要将 armv6 添加到支持的架构中

# c# - 将对象列表（从 DB）转换为站点地图数据源

> ID：14130362
> 
> 赞同：1
> 
> 时间：2013-01-02T22:36:42.683
> 
> 标签：c#, asp.net, treeview, hierarchy

我正在使用一个文件夹列表对象，它有一个文件夹 obj 的列表，其中包含`name`、`ID`和`parentID`。我正在尝试填写一个`asp:TreeView`控件，但 a 的数据源与`List<>`a 不同`IHeiraricialDataSource`。

`IHeiraricalDataSource`在不使用 Linq的情况下将列表转换为 a 的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:53:36.480

您需要实现`IHierarchicalDataSource`和`HierarchicalDataSourceControl`. 看看这里的示例部分：http: [//msdn.microsoft.com/en-us/library/system.web.ui.hierarchicaldatasourcecontrol.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.hierarchicaldatasourcecontrol.aspx)

# objective-c - 如何在 Objective-C 中运行代码片段

> ID：14130369
> 
> 赞同：3
> 
> 时间：2013-01-02T22:37:12.333
> 
> 标签：objective-c

在尝试从书中学习目标 C 时，我希望能够运行一些代码片段，例如......

```
NSString *str = @"Hello, world!";
NSLog(@"Retain count is %d", [str retainCount]); 
```

在 Ruby 中，我只需将其放在一个 snippet.rb 文件中并`ruby snippet.rb`从终端运行。JavaScript 有 jsfiddle.net。是否有一种同样简单的方法可以用目标 c 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T22:40:45.623

如果您使用的是 Mac，则可以使用方便的[CodeRunner](http://krillapps.com/coderunner/)。App Store 上的售价为 9.99 美元，但对我来说，每一分钱都物有所值。

# primefaces - primefaces remotecommand 部分进程

> ID：14130375
> 
> 赞同：2
> 
> 时间：2013-01-02T22:37:35.670
> 
> 标签：primefaces, spring-webflow-2

我正在开发 webflow 2.3.1，primefaces 3.4.2 项目。如您所见，我尝试根据父城市更新 selectOneMenu，如 primefaces 展示中的示例所示。但是我使用 p:remoteCommand 来调用 webflow 操作。在 remoteCommand ，如果我设置了 process="@this, subSelectOneMenu"，则没有调用操作。但是如果我没有设置“进程”，它会调用动作，但它也会为空的验证码给出错误。

如何使用 remoteCommand 部分调用操作？

```
 <h:form id="signUpUserInfo">
        <p:panelGrid id="grid" columns="2">

            <p:selectOneMenu  id="citySelectOneMenu" value="#{userBean.address.cityId}" label="#{label.address_city}" onchange="selectionChanged()">
                <f:selectItem itemValue="" itemLabel="" />
                <f:selectItems value="#{flowScope.cityList}" /> 
            </p:selectOneMenu >

            <p:selectOneMenu id="subSelectOneMenu"
                value="#{userBean.address.subId}" label="#{label.address_sub}">
                <f:selectItem itemValue="" itemLabel="" />
                <f:selectItems value="#{flowScope.subList}" />
            </p:selectOneMenu>

             <p:captcha id="captcha" label="Captcha" language="en" theme="white" required="true" secure="true"  /> 

            <f:facet name="footer">
                <p:commandButton id="save" value="#{label.save_button}" ajax="false"
                    action="signUpStandartMember" update="signUpUserInfo" />
            </f:facet>

        </p:panelGrid>

            <p:remoteCommand id="selectionChanged" name="selectionChanged" action="cityChangedAction" update="subSelectOneMenu" process="@this, subSelectOneMenu" />                    

    </h:form> 
```

# c# - C# 泛型无法识别类型

> ID：14130379
> 
> 赞同：4
> 
> 时间：2013-01-02T22:38:01.490
> 
> 标签：c#, .net, generics

我不知道为什么下面的代码返回 a `Cannot resolve method Write(T)`- 这对我来说似乎很明确：

> ```
>  private static void WriteToDisk<T>(string fileName, T[] vector)
>     {
>         using (var stream = new FileStream(fileName, FileMode.Create))
>         {
>             using (var writer = new BinaryWriter(stream))
>             {
>                foreach(T v in vector) writer.Write(v);
>                 writer.Close();
>             }
>         }
>     } 
> ```

我想定义一个通用的二进制写入方法，可以处理向量，例如`int[]`，`long[]`或`double[]`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T22:39:29.343

调用的哪个重载`Write()`将在编译时确定，而不是在运行时确定。 `BinaryWriter`需要`Write(object)`重载（或`Write<T>(T)`泛型重载）才能允许以这种方式调用该方法。此错误（正确）表明它两者都没有。

您将需要编写自己的包装器方法，该方法接受一个`object`（或通用类型的参数）并检查其类型以确定`BinaryWriter.Write()`要调用的重载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T22:46:55.787

cdhowie 有正确的解释。重载解决发生在编译时，在这种情况下，对 没有任何了解`T`，因此不适用重载。

使用`dynamic`，重载决议发生在运行时。也许你可以使用：

```
writer.Write((dynamic)v) 
```

由于在运行时发生装箱和重复的重载解析，它会有点慢。

**编辑：**如果由于某种原因您无权访问`dynamic`，则可以通过显式反射获得类似的行为：

```
private static void WriteToDisk<T>(string fileName, T[] vector)
{
    var correctMethod = typeof(BinaryWriter).GetMethod("Write", new[] { typeof(T), });
    if (correctMethod == null)
        throw new ArgumentException("No suitable overload found for type " + typeof(T), "T");
    using (var stream = new FileStream(fileName, FileMode.Create))
    {
        using (var writer = new BinaryWriter(stream))
        {
           foreach(var v in vector)
               correctMethod.Invoke(writer, new object[] { v, });
        }
    }
} 
```

我不知道这是否比`dynamic`.

在任何一种情况下，如果您不小心使用了不支持的类型`T`（例如） ，一切都会正常编译，并且您只会在运行时（代码运行时）发现错误。有关更类型安全的解决方案，请参阅 jam40jeff 的答案，您可以通过将委托实例传递给方法来自己指定重载。`DateTime``BinaryWriter`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T04:58:51.547

我不同意这`dynamic`是最好的方法。这里的问题是你需要保证调用者传递一个`T`可以`BinaryWriter.Write()`处理的类型。由于没有通用类或接口可以通过约束来保证这一点`T`，因此最好的方法是将责任“转嫁”给调用者，如下所示：

```
private static void WriteToDisk<T>(string fileName, T[] vector, Action<BinaryWriter, T> callWrite)
{
    using (var stream = new FileStream(fileName, FileMode.Create))
    {
        using (var writer = new BinaryWriter(stream))
        {
            foreach (T v in vector)
                callWrite(writer, v);
            writer.Close();
        }
    }
} 
```

这被称为如下：

```
WriteToDisk("filename", new int[0], (w, o) => w.Write(o)); // compiles
WriteToDisk("filename", new string[0], (w, o) => w.Write(o)); // compiles
WriteToDisk("filename", new DateTime[0], (w, o) => w.Write(o)); // doesn't compile (as desired) 
```

当然，如果只有一小部分已知类型，您可以这样创建“便捷方法”：

```
private static void WriteToDisk(string fileName, int[] vector)
{
    WriteToDisk(fileName, vector, (w, o) => w.Write(o));
}

private static void WriteToDisk(string fileName, string[] vector)
{
    WriteToDisk(fileName, vector, (w, o) => w.Write(o));
} 
```

现在你的电话很简单：

```
WriteToDisk("filename", new int[0]);
WriteToDisk("filename", new string[0]); 
```

更多的代码，但更多的编译时类型安全和速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T22:46:51.937

您可以将其更改为：

```
private static void WriteToDisk<T>(string fileName, T[] vector) where T : struct, IComparable,IComparable<T> 
```

如果要将数组类型保留为数值类型。

# html - 文本未显示在 html 页面中

> ID：14130389
> 
> 赞同：0
> 
> 时间：2013-01-02T22:39:06.407
> 
> 标签：html

我所有的其他页面都可以使用，这是针对学校项目的。我比较了它们，但这个有问题。我不想重做它，因为我将它用作模板并且只想使用它。我发布了整个页面，以防万一你需要它。问题是关于佛罗多的两段没有出现。

```
<html>
<head>
<TITLE>Lord of the Rings: Frodo</TITLE>
<style>
pre{font-family:"Times New Roman", Times, serif;}
pre{font-size:25px;}
pre{color:gold;}

body
{
background-image:url('http://awesomewallpapers.files.wordpress.com/2010/08/one-ring-to-rule-them-all-                1.png');
background-color:#cccccc;
} 

background-repeat:no-repeat;
background-attachment:fixed;
background-position:topleft; 
a{color:blue;}
a:hover{color:gold;}
a:visited{color:white;}
background-repeat:no-repeat;
background-attachment:fixed;
background-position:center; 

</style>
</head>

<body link="white">
<center>

<hr><A HREF="MoviePage.html">Home</A> <A HREF="Characters.html>Characters</A></hr>

<pre>
    Frodo is the main character in this series, the carrier of the One Ring and the
one who must support its burden.  Frodo goes through many trials through the course of
the movies, some include battles, attacks on his mind and even a near death experience.

    Frodo is the nephew of Bilbo Baggins, the once great adventurer who first brought
the ring to the shire.  He is a friend of Gandalf, whom he speaks with everytime he goes
through the Shire.  Frodo and Bilbo's birthday are on the same day, and hold a massive
party in their name.

</pre>

</center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:42:01.463

您在这里缺少一个 " 标记：

```
 <a HREF="Characters.html"> 
```

查一下，一切正常，用jsfiddle检查过。你可以在这里看到更新的工作：http: [//jsfiddle.net/2FBqm/](http://jsfiddle.net/2FBqm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:42:22.393

你错过了一个双引号。

```
<hr><A HREF="MoviePage.html">Home</A> <A HREF="Characters.html>Characters</A></hr>
                                                              ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:44:12.853

第 31 行；您忘记关闭双引号 ( " )。

将此行替换为：

```
<hr><A HREF="MoviePage.html">Home</A> <A HREF="Characters.html">Characters</A></hr> 
```

顺便说一句，欢迎登机 :)

# ruby-on-rails - Rails link_to 语法错误：意外'，'，期待'）'

> ID：14130392
> 
> 赞同：1
> 
> 时间：2013-01-02T22:39:11.387
> 
> 标签：ruby-on-rails, twitter-bootstrap-rails

我最近尝试将 bootstrap-sass 添加到我的 rails 应用程序中，它似乎破坏了我的所有链接（在安装 bootstrap-sass gem 之前，这些链接功能齐全）。我正在使用红宝石 1.8.7。

我拥有的示例链接是：

```
<%=link_to image_tag ("right_arrow.png", :size => '20x20'), project_step_path(@project, @step.number+1) %> 
```

我得到的错误是：

```
syntax error, unexpected ',', expecting ')' ...o(image_tag ("right_arrow.png", :size => '20x20'), project_s... 
```

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T22:41:07.973

image_tag 后面有一个额外的空格。

```
image_tag ("right_arrow.png", :size => '20x20') 
```

它应该是

```
image_tag("right_arrow.png", :size => '20x20') 
```

# android - AsyncTask - onPostExecute 永远不会被调用

> ID：14130407
> 
> 赞同：0
> 
> 时间：2013-01-02T22:40:28.417
> 
> 标签：android, android-asynctask

我在我的应用程序中使用了 asyncTask，但它没有调用 onPostExecute 方法。我读了几十遍，找不到错误。

它像这样流动：

1.  主要活动
2.  --> 用户点击按钮
3.  --> 调用一个类
4.  --> 使用显示一些消息的方法调用另一个类，然后执行 AsyncTask。

这是完整的类和 AsyncTask：

```
package com.vdlow.socialnotification.twitter;

import java.util.ArrayList;

import com.vdlow.socialnotification.R;

import oauth.signpost.OAuth;
import twitter4j.IDs;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.auth.AccessToken;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.os.Looper;
import android.util.Log;
import android.widget.Toast;

public class TwitterUtils {
    static long userID;
    static Context c;
    static Boolean retornoSend;

    public static boolean isAuthenticated(SharedPreferences prefs) {

        String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
        String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

        AccessToken a = new AccessToken(token,secret);
        Twitter twitter = new TwitterFactory().getInstance();
        twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
        twitter.setOAuthAccessToken(a);

        try {
            twitter.getAccountSettings();
            return true;
        } catch (TwitterException e) {
            return false;
        }
    }

    public static void sendTweet(SharedPreferences prefs,String msg, Context cs) throws Exception {
        String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
        String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");
        String values[] = {token, secret, msg};
        TwitterUtils tu = new TwitterUtils();
        TweetSender ts = tu.new TweetSender();
        ts.execute(values);
        Log.i("retornoSend", retornoSend.toString());
        if(retornoSend){
            Toast.makeText(cs, cs.getString(R.string.tweet_sent), Toast.LENGTH_LONG).show();
        }
        else{
            Toast.makeText(cs, cs.getString(R.string.fail_sending), Toast.LENGTH_LONG).show();
        }
    }   

    public static ArrayList<String> getUserId(final SharedPreferences prefs) throws Exception{
        String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
        String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

        AccessToken a = new AccessToken(token,secret);
        Twitter twitter = new TwitterFactory().getInstance();
        twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
        twitter.setOAuthAccessToken(a);
        try {
            userID = twitter.getId();
        } catch (IllegalStateException e) {
            Log.e("Error! Method: getUserId() Class: TwitterUtils", e.toString());
        } 
        Log.i("USERID", String.valueOf(userID));
        ArrayList<String> following = new ArrayList<String>();
        long lCursor = -1;
        try{
            userID = twitter.getId();
            IDs friendsIDs = twitter.getFriendsIDs(userID, lCursor); 
            do
            {
                for (long i : friendsIDs.getIDs())
                {
                    following.add("@"+twitter.showUser(i).getScreenName());
                }
            }while(friendsIDs.hasNext());
        }
        catch(Exception e){
            Log.e("Exception! Class TwitterUtils Method: getFriendsName()", e.toString()+"\n User ID "+String.valueOf(userID));
        }
        return following;

    }

    private class TweetSender extends AsyncTask<String, Void, Boolean>{

        @Override
        protected Boolean doInBackground(String... msg) {
            Looper.prepare();
            String token = msg[0];
            String secret = msg[1];

            AccessToken a = new AccessToken(token,secret);
            Twitter twitter = new TwitterFactory().getInstance();
            twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
            twitter.setOAuthAccessToken(a);
            try {
                twitter.updateStatus(msg[2]);
            } catch (TwitterException e) {
                Log.e("Error sending tweet Class TwitterUtils Method sendTweet() AsyncTask TweetSender", e.toString());
                return false;
            }           

            return true;
        }

        @Override
        protected void onPostExecute(Boolean result){
            Log.i("Post execute", "Runned");
            retornoSend = result;
        }
    } 
```

任何想法为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:45:52.867

您`doInBackground`要么永远不会完成，要么您在某个时候取消了请求：

来自开发者文档（见下面的粗体文本）：http: [//developer.android.com/reference/android/os/AsyncTask.html#cancel](http://developer.android.com/reference/android/os/AsyncTask.html#cancel(boolean) (boolean )

> 尝试取消此任务的执行。如果任务已完成、已被取消或由于其他原因无法取消，则此尝试将失败。如果成功，并且在调用取消时此任务尚未启动，则此任务不应该运行。如果任务已经开始，则 mayInterruptIfRunning 参数确定是否应该中断执行该任务的线程以尝试停止该任务。
> 
> 调用此方法将导致在 doInBackground(Object[]) 返回后在 UI 线程上调用 onCancelled(Object)。**调用此方法可确保永远不会调用 onPostExecute(Object)。** 调用此方法后，应定期从 doInBackground(Object[]) 中检查 isCancelled() 返回的值，以尽早完成任务。

# java - 制作可变类级别与最终本地的优缺点

> ID：14130410
> 
> 赞同：2
> 
> 时间：2013-01-02T22:40:50.303
> 
> 标签：java, variables, scope

我已经用 Java 编码一段时间了，我必须决定是否创建一个变量类级别还是创建一个最终的局部变量，这样我就可以在我的代码中使用它。是否有做出这个决定的标准或逻辑？以某种方式这样做有什么优点和缺点吗？

提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T22:48:23.173

通常，您最好使用最严格的范围界定。原因是它可以防止写得不好的类的用户弄乱它的内部并导致错误。

如果我是你，如果可能的话，我会将所有变量设为私有的 final 和本地的。如果您必须将其设为非最终版本，请将其设为私有，并且仅允许通过 setter 方法（当然还有 getter）访问它。

如果需要，您可以随时打开范围，但是一旦属性出现并使用中，就很难锁定它。

有关更深入的解释，请参阅[Effective Java](http://books.google.com/books/about/Effective_Java.html?id=ka2VUBqHiWkC)的“最小化类和成员的可访问性”和“支持不变性”。经典读物

# java - 为 Netbeans java 项目创建一个安装文件

> ID：14130411
> 
> 赞同：1
> 
> 时间：2013-01-02T22:40:51.007
> 
> 标签：java, netbeans, installation

> **可能重复：**
> [如何将我的 Java 程序转换为 .exe 文件？](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)

我有 Java 项目，并将为我的项目制作一个安装文件。在我的项目中，我有一个运行我的项目的 jar 文件。我该怎么做才能为我的 Netbeans Java 项目创建一个安装文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:47:20.013

有像 JAR2EXE 这样从 jar 转换为 exe 的软件，但它不是安装文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:49:30.177

查看[Launch4J](http://launch4j.sourceforge.net/)，它将从 Java JAR 文件创建一个 Windows 可执行文件。

# html - 输入中的右对齐文本

> ID：14130413
> 
> 赞同：2
> 
> 时间：2013-01-02T22:41:05.663
> 
> 标签：html, css, forms, input

我正在一个网站上工作，设计师在输入表单中放置了一些额外的文本 ![在此处输入图像描述](../Images/3d8b6f06de2a6703d2f9d27478a5de59.png)

我的代码：

```
<form id="hmail">
    <input autocapitalize="off" autocorrect="off" autocomplete="on" type="text" name="register" id="getemail" value="your company" onFocus="if(this.value==this.defaultValue)this.value='';" onBlur="if(this.value=='')this.value=this.defaultValue;"/>
    <input type="submit" id="sendmail" value="Claim">
</form> 
```

我在想一些像 value="...dock.com" 和浮动的东西，对吗？只有我似乎无法让这个工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:49:59.813

通过 CSS 将“dock.com”实现为背景图片；就像是：

```
background-image:url(dockimage.png); 
background-repeat:no-repeat; 
background-position:right; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:50:31.187

将背景图像设置为文本，如下所示：

```
input[name=theName] {
    background: #fff url(path/to/bg.jpg) no-repeat right center;
} 
```

并在输入上设置最大长度以防止输入的文本超出背景。

# excel - 从 VBA 转到 SQL Server 2008 R2 时，如何提高数据库性能？

> ID：14130415
> 
> 赞同：2
> 
> 时间：2013-01-02T22:41:08.947
> 
> 标签：excel, sql-server-2008-r2, table-valued-parameters, vba

我正在开发一个财务应用程序，该应用程序执行从 Excel 到 SQL Server 2008 R2 的 CRUD 操作。该应用程序使用 VBA 和 ADO。我正在尝试优化循环数千行并将更新发送到数据库的操作的性能。目前，存储过程每行调用一次。

当用户与应用程序的连接速度很慢时，性能也很慢，足以让他们开始抱怨。为了优化性能，我尝试了：

1.  将所有操作批处理到一个 XML 文件中，然后一次性发送。不幸的是，性能变得更糟了。
2.  接下来，我想在一个表值参数中批量处理所有更新。但是，VBA 和 ADO 不能使用表值参数。

我已经没有东西可以尝试了。从 VBA 转到 SQL Server 2008 R2 时，如何提高数据库性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T19:47:56.690

我想到了。虽然 ADO 中没有可用的表值参数 (TVP) 对象，但您可以在 SQL Server 连接上执行原始 SQL 语句。解决方案是：

1.  构建使用 TVP 的 SQL 语句
2.  在 ADO 连接上执行 SQL 语句。

例如：

```
Dim cnSQLServer As ADODB.Connection
Dim rst As ADODB.Recordset
Dim strSQL As String

Set cnSQLServer = New ADODB.Connection
cnSQLServer.Open "Provider=SQLOLEDB;Data Source=localhost;Initial Catalog=Northwind;Integrated Security = SSPI"

' Build a SQL statement that uses a TVP
strSQL = "DECLARE @ReturnMessage nvarchar(255) " + _
    "DECLARE @catType CategoryTableType " + _
    "INSERT INTO @catType" + _
    "EXEC ('" + _
    "SELECT ''Organic'', ''Organically grown produce and grains'' " + _
    "SELECT ''Conventional'', ''Non-organically grown produce and grains'' " + _
    "SELECT ''Irish'', ''Mrs. O''''Leary''''s creamery products'' " + _
    "') " + _
    "EXEC dbo.usp_InsertCategory @catType, @ReturnMessage OUTPUT; " + _
    "SELECT @ReturnMessage as ReturnMessage'"

' Execute the SQL statement on the ADO connection.
Set rst = cnSQLServer.Execute(strSQL) 
```

该解决方案在有关从 MS Access 调用 TVP 的文章中进行了更详细的描述：[在 Access 2007 中使用 SQL Server 2008 表值参数](http://msdn.microsoft.com/en-us/library/office/dd721896%28v=office.12%29.aspx)

使用 TVP 给了我很好的性能提升。希望这对其他人有帮助。干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T20:19:48.890

老实说，根据我的经验，VBA/ADO 的速度非常快（与网站相比）。这种数据库连接方法的开销很大，尤其是在执行 SQL 语句时，而且对排除故障没有多大帮助。

尝试的一种途径是更新记录集对象而不是执行存储过程，我发现这在某些情况下会有所帮助。

也就是说，根据您更新的复杂性，这可能只会让事情变得更糟。

# asp.net - 服务器标签未在 asp 中解析：超链接

> ID：14130417
> 
> 赞同：1
> 
> 时间：2013-01-02T22:41:21.247
> 
> 标签：asp.net, server-tags, servertag

我不得不承认，我对 ASP.NET 还比较陌生，而且可耻的是还没有真正在客户端页面上使用过服务器标签。我的页面上有一个中继器，它遍历数据表的行并使用以下标记为每个项目显示一个超链接对象：

```
<asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl="~/DiseaseInfo/Syndrome.aspx?SyndromeID=<%# Eval('SYNDROME_ID')%>&SpeciesID=<%# Eval('SPECIES_ID')%>" Text='<%# Eval("SYNDROME_NAME").ToString%>'></asp:HyperLink> 
```

我遇到的问题是服务器没有呈现 <%# %> 标记。如果我将相同的链接放入标签中，那么它就可以正常工作。我确信这与超链接已经在服务器端呈现的事实有关，但我不知道如何更改以使其正常工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:21:56.177

反转单/双引号的顺序。

```
<asp:HyperLink runat="server" NavigateUrl='~/DiseaseInfo/Syndrome.aspx?
  SyndromeID=<%# Eval("SYNDROME_ID")%>&SpeciesID=<%# Eval("SPECIES_ID")%>'
  Text='<%# Eval("SYNDROME_NAME").ToString()%>'>
</asp:HyperLink> 
```

这在 JavaScript / HTML 级别通常无关紧要，但 C# / VB 的正确引号是应该在`Eval()`方法中使用的双引号。

更好的方法是调用一个方法来返回这个有点复杂的 url：

```
<asp:HyperLink runat="server" NavigateUrl='<%# GetUrl() %>' />

protected string GetUrl()
{
    return string.format("Syndrome.aspx?SyndromeID={0}...", Eval("SYNDROME_ID");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:43:51.920

这是我最终处理此问题的方式：

```
Public Sub Repeater2_ItemDataBound(sender As Object, e As RepeaterItemEventArgs)
    If (e.Item.ItemType = ListItemType.Item) Or (e.Item.ItemType = ListItemType.AlternatingItem) Then
        Dim SpeciesID As String = CType(e.Item.DataItem, System.Data.DataRowView)("SPECIES_ID").ToString
        Dim DiseaseID As String = CType(e.Item.DataItem, System.Data.DataRowView)("DISEASE_ID").ToString
        Dim DiseaseName As String = CType(e.Item.DataItem, System.Data.DataRowView)("DISEASE_NAME").ToString
        Dim Hyperlink = CType(e.Item.FindControl("Hyperlink1"), HyperLink)

        Hyperlink.NavigateUrl = String.Format("~/DiseaseInfo/Disease.aspx?DiseaseID={0}&SpeciesID={1}", DiseaseID, SpeciesID)
        Hyperlink.Text = DiseaseName
    End If
End Sub 
```

# c++ - 有没有办法在 Windows 下编译为 Linux 编写的 C++ 代码？

> ID：14130431
> 
> 赞同：-2
> 
> 时间：2013-01-02T22:42:26.630
> 
> 标签：c++, linux, windows

有没有办法在 Windows 下编译为 Linux 编写的 C++ 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:44:54.290

是的，试试[Cygwin](http://www.cygwin.com)和[GCC，即 Gnu 编译器集合](http://gcc.gnu.org)。

*   [http://www.cygwin.com](http://www.cygwin.com)
*   [http://gcc.gnu.org](http://gcc.gnu.org)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T22:45:38.503

您可以使用 CygWin，它提供了 POSIX 兼容层和 GNU Linux 兼容工具链。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T23:01:05.560

正如其他人指出的那样，您可以使用包括 gcc 和 g++ C 和 C++ 编译器的 Cygwin。您还应该知道，您可以使用 Eclipse 作为 Cygwin 的 IDE。只需确保安装 Eclipse CDT 插件并确保 Cygwin 二进制目录在您的 PATH 环境变量中，然后再配置 CDT。如果您已经在 Linux 上使用 Eclipse 进行 C++ 开发，那么这应该是一个相当轻松的过渡。

# asp.net - 如何调试损坏的 zip 文件生成？

> ID：14130433
> 
> 赞同：1
> 
> 时间：2013-01-02T22:42:51.723
> 
> 标签：asp.net, compression, dotnetzip

我们有一个网页，它从一个 url 中获取一系列字符串，找到一些与这些字符串相关联的 pdf，使用[DotNetZip](http://dotnetzip.codeplex.com/)将它们压缩起来，然后将它们返回给用户。执行此操作的页面非常简单 - 这是 Page_Load：

```
protected void Page_Load(object sender, EventArgs e)
{
    string[] fileNames = Request.QueryString["requests"].Split(',');
    Response.Clear();
    Response.ClearHeaders();
    Response.ContentType = "application/zip";
    string archiveName = String.Format("MsdsRequest-{0}.zip", DateTime.Now.ToString("yyyy-mm-dd-HHmmss"));
    Response.AddHeader("Content-Disposition", "attachment; filename=\"" + archiveName + "\"");

    using (ZipFile zip = new ZipFile())
    {
        foreach (string fileName in fileNames)
        {
            zip.AddFile(String.Format(SiteSettings.PdfPath + "{0}.pdf", msdsFileName), "");
        }
        zip.Save(Response.OutputStream);
    }
    Response.Flush();
} 
```

（在你问之前，如果有人在这个 url 中输入其他值会很好......这些不是安全文件。）

这在我的开发箱上运行良好。但是，在我们的 QA 系统上进行测试时，它会下载压缩文件，但它已损坏。不会引发错误，并且事件日志中不会记录任何内容。

我可能会找到一种在 QA 环境中进行交互式调试的方法，但是由于抛出错误（例如找不到 dll 等）实际上并没有失败，并且它成功地生成了一个非空（但已损坏）的 zip 文件，我想我不会通过单步执行来发现太多。

这是否可能是某种问题，Web 服务器通过某种方式“修复”文件来“帮助”我？

我查看了 http 响应标头，它在我的本地盒子上运行，而不是在 qa 盒子上运行，但是虽然它们略有不同，但我没有看到任何确凿的证据。

作为我拒绝的另一个想法，内容长度对我来说是一种可能性，因为如果内容长度值太小，我想这会使其损坏......但我不清楚为什么会发生这种情况，我不知道认为就是这样，因为如果我尝试压缩并下载 1 个文件，我会得到一个小 zip……而下载多个文件会给我一个更大的 zip。因此，再加上没有记录错误的事实，让我认为 zip 实用程序正在正确查找和压缩文件，而问题出在其他地方。

这是标题，要完整。

我的开发机器上的响应头（工作）

```
HTTP/1.1 200 OK
Date: Wed, 02 Jan 2013 21:59:31 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Content-Disposition: attachment; filename="MsdsRequest-2013-59-02-165931.zip"
Transfer-Encoding: chunked
Cache-Control: private
Content-Type: application/zip 
```

qa 机器上的响应标头（不工作）

```
HTTP/1.1 200 OK
Date: Wed, 02 Jan 2013 21:54:37 GMT
Server: Microsoft-IIS/6.0
P3P: CP="NON DSP LAW CUR TAI HIS OUR LEG"
SVR: 06
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Content-Disposition: attachment; filename="MsdsRequest-2013-54-02-165437.zip"
Cache-Control: private
Content-Type: application/zip
Set-Cookie: (cookie junk removed);expires=Wed, 02-Jan-2013 21:56:37 GMT;path=/;httponly
Content-Length: 16969 
```

不知道如何解决这个问题，因为没有任何东西声称失败。我觉得这可能是一个 Web 服务器配置问题（因为我没有更好的想法），但不知道去哪里找。有没有我可以采取的机智？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:43:54.417

因为它是你错过了`End()`在 as 之后给页面一个`Flush()`：

```
 ...
        zip.Save(Response.OutputStream);
    }
    Response.Flush();
    Response.End();
} 
```

但这不是正确的方法，使用页面发送 zip 文件，可能 IIS 也 gZip 页面，这也可能导致问题。[**正确的方法是使用处理程序**](https://stackoverflow.com/a/10912955/159270)，并通过以太网配置 IIS 来避免对该处理程序进行额外的 gZip 压缩，如果您进行 gZip 压缩，请避免为该处理程序进行额外的 gZip 压缩。

例如，为您的案例命名的处理程序`download.ashx`将如下：

```
public void ProcessRequest(HttpContext context)
    {
      string[] fileNames = Request.QueryString["requests"].Split(',');          
      context.Response.ContentType = "application/zip";          
      string archiveName = String.Format("MsdsRequest-{0}.zip", DateTime.Now.ToString("yyyy-mm-dd-HHmmss"));          
      context.Response.AddHeader("Content-Disposition", "attachment; filename=\"" + archiveName + "\"");

      // render direct
      context.Response.BufferOutput = false;

      using (ZipFile zip = new ZipFile())
      {
        foreach (string fileName in fileNames)
        {
            zip.AddFile(String.Format(SiteSettings.PdfPath + "{0}.pdf", msdsFileName), "");
        }
        zip.Save(context.Response.OutputStream);
      }
    } 
```

# android - 自定义（垂直）进度条 - 与父级不匹配

> ID：14130443
> 
> 赞同：3
> 
> 时间：2013-01-02T22:43:50.253
> 
> 标签：android, progress-bar, custom-controls

我有垂直进度条，这里是可绘制文件夹中定义的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@android:id/background">
        <shape>

            <gradient
                    android:startColor="#ff9d9e9d"
                    android:centerColor="#ff5a5d5a"
                    android:centerY ="0.75"
                    android:endColor="#ff747674"
                    android:angle="180"
            />
        </shape>
    </item>     
    <item android:id="@android:id/secondaryProgress">
        <clip android:clipOrientation="vertical" android:gravity="bottom">
            <shape>

                <gradient
                        android:startColor="#80ffd300"
                        android:centerColor="#80ffb600"
                        android:centerY="0.75"
                        android:endColor="#a0ffcb00"
                        android:angle="180"
                />
            </shape>
        </clip>
    </item>     
    <item android:id="@android:id/progress">
        <clip android:clipOrientation="vertical" android:gravity="bottom">
            <shape>

                <gradient
                        android:startColor="#ffffd300"
                        android:centerColor="#ffffb600"
                        android:centerY="0.75"
                        android:endColor="#ffffcb00"
                        android:angle="180"
                />
            </shape>
        </clip>
    </item>

</layer-list> 
```

这我已经添加到 styles.xml ：

```
<style name="Widget"></style>

    <style name="Widget.ProgressBar">
        <item name="android:indeterminateOnly">true</item>
        <item name="android:indeterminateBehavior">repeat</item>
        <item name="android:indeterminateDuration">3500</item>
        <item name="android:minWidth">48dip</item>
        <item name="android:maxWidth">48dip</item>
        <item name="android:minHeight">48dip</item>
        <item name="android:maxHeight">480dip</item>
    </style>

    <style name="Widget.ProgressBar.Vertical">
        <item name="android:indeterminateOnly">false</item>
        <item name="android:progressDrawable">@drawable/vertical_progress_bar</item>
        <item name="android:indeterminateDrawable">@android:drawable/progress_indeterminate_horizontal</item>
        <item name="android:minWidth">1dip</item>
        <item name="android:maxWidth">12dip</item>
    </style> 
```

当我使用它时：

```
<ProgressBar
        android:id="@+id/vertical_progressbar"
        style="@style/Widget.ProgressBar.Vertical"        
        android:layout_width="12dip"
        android:layout_height="match_parent"              
        android:layout_marginRight="5dp" 
```

“match_parent”（自定义ListView中的父项是item（row））值无效并将高度设置为minHeigh，只有显式值可以设置高度（示例：“100dip”），我也尝试将值设置为我的`getView()`方法：

```
itemRow.vProgressBar.setMinimumHeight(convertView.getHeight()); 
```

它没有帮助，有什么问题？请帮忙 ）

# ios - 通过 Objective C 调用时未命中 Web 服务方法

> ID：14130450
> 
> 赞同：0
> 
> 时间：2013-01-02T22:44:39.487
> 
> 标签：ios, sql, json, web-services, post

我的 App_Code/IGetEmployees.vb 文件

```
<ServiceContract()> _
Public Interface IGetEmployees
 <OperationContract()> _
<WebInvoke(Method:="POST", ResponseFormat:=WebMessageFormat.Json, BodyStyle:=WebMessageBodyStyle.Wrapped, UriTemplate:="json/contactoptions")> _
Function GetAllContactsMethod(strCustomerID As String) As List(Of NContactNames)
End Interface 
```

我的 App_Code/GetEmployees.vb 文件

```
 <WebMethod()> _
 <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
Public Function GetAllContactsMethod(strCustomerID As String) As List(Of NContactNames) Implements IGetEmployees.GetAllContactsMethod
    Utilities.log("Hit get all contacts at 56")
    Dim intCustomerID As Integer = Convert.ToInt32(strCustomerID)
    Dim lstContactNames As New List(Of NContactNames)
 'I add some contacts to the list.
Utilities.log("returning the lst count of " & lstContactNames.Count)
    Return lstContactNames
End Function 
```

NContactNames 是一个具有 3 个属性的类。所以我正在使用 ASP.NET Web 服务从 SQL 服务器检索信息并以 JSON 格式将其传递给我的 iPad。我在传递参数时遇到问题。所以就像你看到的，我有 2 个文件 IGetEmployees.vb 和 GetEmployees.vb。我正在实现方法 GetAllContactsMethod。发生的事情是 GetEmployees.vb 文件 (Utilities.log) 中的两行，它们永远不会被记录。该函数根本没有被调用。

我的目标 c 代码来调用这个函数

```
 NSString *param = [NSString stringWithFormat:@"strCustomerID=%@",strCustomerID];
    jUrlString = [NSString stringWithFormat:@"%@",@"http://xyz-dev.com/GetEmployees.svc/json/contactoptions"];
    jurl = [NSURL URLWithString:jUrlString];
    NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:jurl];

    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:[param dataUsingEncoding:NSUTF8StringEncoding]];
    NSLog(@" request string is %@",[[request URL] absoluteString]);
    NSLog(@"Done");

    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];
    if(theConnection)
    {
        jData = [NSMutableData data];
        NSError *jError;
        NSMutableDictionary *json =[NSJSONSerialization JSONObjectWithData:jData options:kNilOptions error:&jError];
        NSLog(@"%@",json); //Gets Here and prints (null)
        NSLog(@"Done"); //prints this as well.

    }
    else
    {
        NSLog(@"No");
    } 
```

在发布此代码时，“if”语句为真并且（null）被打印，然后是“Done”我的绝对请求的输出是：请求字符串是[http://xyz-dev.com/GetEmployees.svc/ json/contactoptions](http://xyz-dev.com/GetEmployees.svc/json/contactoptions) 这是我第一次写 json 来接受参数。所以我可能会遗漏一些东西。它是什么？为什么在 Visual Studio 端根本没有调用该函数。如果您需要更多信息，请询问。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T16:20:14.827

为此，这是 Objetive-C 中的方法。

```
-(void) insertEmployeeMethod

{

    if(firstname.text.length && lastname.text.length && salary.text.length)

    {

        NSString *str = [BaseWcfUrl stringByAppendingFormat:@"InsertEmployee/%@/%@/%@",firstname.text,lastname.text,salary.text];

        NSURL *WcfSeviceURL = [NSURL URLWithString:str];
        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

        [request setURL:WcfSeviceURL];

        [request setHTTPMethod:@"POST"];

        // connect to the web

        NSData *respData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

        // NSString *respStr = [[NSString alloc] initWithData:respData encoding:NSUTF8StringEncoding];

        NSError *error;

        NSDictionary* json = [NSJSONSerialization 

                              JSONObjectWithData:respData 

                              options:NSJSONReadingMutableContainers 

                              error:&error];  

        NSNumber *isSuccessNumber = (NSNumber*)[json objectForKey:@"InsertEmployeeMethodResult"];

        //create some label field to display status
        status.text = (isSuccessNumber && [isSuccessNumber boolValue] == YES) ? [NSString stringWithFormat:@"Inserted %@, %@",firstname.text,lastname.text]:[NSString stringWithFormat:@"Failed to insert %@, %@",firstname.text,lastname.text];
    }
} 
```

在运行代码之前，请使用 POSTMAN 测试您的 URL，这是来自 Google Chrome 的应用程序。问候。

# svn - Zend Studio 9：SVN 日志在哪里

> ID：14130454
> 
> 赞同：1
> 
> 时间：2013-01-02T22:44:50.953
> 
> 标签：svn, zend-studio

我正在尝试集成的 Zend Studio Subversion 功能。

我正在寻找一种方法来查看运行“svn up”时已更新的内容。在乌龟中，当我更新时，我可以看到哪些文件到达并双击一个以查看发生了什么变化。

控制台视图中没有任何内容。

谢谢大家的解答，再见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:44:04.820

您显然需要启用控制台输出。

在工具栏中选择`Window`-> `Preferences`。

在首选项中，选择`Team`-> `SVN`-> `Console`。

在 中`Show console automatically`，选择`On output`。

单击确定。

之后，您将能够在 SVN 控制台中查看 SVN 更新后发生的变化。

`Shift`++然后选择 SVN 控制台`Alt`。`Q` `C`

# integration - 如何集成 QC 和 Perforce

> ID：14130457
> 
> 赞同：1
> 
> 时间：2013-01-02T22:45:09.280
> 
> 标签：integration, perforce, hp-quality-center

如何集成 perforce 和 HP Quality Center？我想将 perforce 作业和 HP QC 缺陷联系起来，更重要的是，我们希望在 QC 中看到 perforce 更改列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:00:23.067

Perforce 通过缺陷跟踪网关支持 HP Quality Center。这是为他们的客户提供的免费插件，并得到完全支持。

[https://www.perforce.com/plugins-integrations/defect-tracking-gateway](https://www.perforce.com/plugins-integrations/defect-tracking-gateway)

# unix - sched.c 文件在内核编译后保持不变

> ID：14130461
> 
> 赞同：0
> 
> 时间：2013-01-02T22:45:21.857
> 
> 标签：unix, process, kernel, fork, scheduling

我对 unix 内核编译有疑问。我们正在为进程设计一种调度算法。我们改变了 fork.c ,sched.c 的内容。然而，虽然内核编译后更新了 fork.c，但 sched.c 保持不变。我在网上搜索过此类问题，但找不到解决方案。如果你们中有人对这个主题有想法，我将非常高兴。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:03:43.947

假设您`make`用于构建内核：

`make`如果依赖项的时间戳早于现有目标文件，则可能会跳过目标的制作。

如果您编辑了一些源文件，并且`make`没有将其重新编译为新的目标文件，您应该检查主机的时钟并清除可能具有未来时间戳的文件。

在您的情况下，您希望`sched.c`在内核编译期间发生更改，对吗？这是*非常*少见的，因为通常源未被触及而目标文件被更改。也许这会导致一些奇怪的循环依赖，从而阻止想要的动作：

```
sched.c : sched.c
        command_to_edit -i sched.c -o sched.c 
```

也许`make`不会构建`sched.c`，因为目标（`sched.c`）的时间戳与依赖项（`sched.c`）的时间戳相同。

# javascript - 显示：无，在滑动面板关闭的情况下加载页面，但无法正确显示谷歌地图

> ID：14130469
> 
> 赞同：-1
> 
> 时间：2013-01-02T22:46:10.577
> 
> 标签：javascript, css

好的，当按下链接视图地图时，我的网站 (http://www.security-vacancies.net/index.php) 上有一个滑动面板，滑动面板打开以显示 Google 地图。

我遇到的问题是 CSS 地图元素具有以下内容

```
 Display: none 
```

当网页加载时，面板关闭，当我打开滑动面板时，地图无法正确显示，只显示一小段。现在我已经阅读了这个网站上的一些其他线程，这些线程解释了地图没有显示，因为显示没有显示。

当我删除显示元素时，地图显示完美，但当页面加载时，滑动面板处于打开位置。我尝试了几种不同的方法来找到解决方案，但我没有运气，想知道是否有人知道我如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:04:16.423

```
​$(document).ready(function(){
    $('#jobmap').on('click', '.slide', function(){
        $('#panel').slideToggle();
        $('#map').toggleClass('visible');
    });
});​

<style> #panel {display:none; height:600px; width:960px; background:#ccc;}#map {opacity:0; transition(all 0.4s linear); -webkit-transition(all 0.4s linear); -moz-transition(all 0.4s linear); -o-transition(all 0.4s linear);} #map.visible {opacity:1; transition(all 0.4s linear); -webkit-transition(all 0.4s linear); -moz-transition(all 0.4s linear); -o-transition(opacity 0.4s linear);}​&lt;/style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:28:08.123

我多次遇到这个问题。它以这种方式加载地图，因为您在它具有“显示：无”时启动它；并且 gmap 以画布大小 0:0 启动。

有两种方法可以解决它：

1) 用网站加载地图（不要在加载时使用“display: none;”）和 onready() 模拟点击隐藏地图的触发器（“查看工作地图”）。地图加载然后隐藏将在视觉上可见。

2) 不要在加载时启动地图。首次单击“查看工作地图”后启动地图。请记住将地图启动的地方保存并在之后检查它以避免每次触发“查看工作地图”时启动。

# asp.net-mvc-3 - 在 MVC3 中请求经典 asp 页面时遇到 404 错误

> ID：14130471
> 
> 赞同：2
> 
> 时间：2013-01-02T22:46:21.370
> 
> 标签：asp.net-mvc-3, iis-7.5, http-status-code-404

我正在将一个经典的 asp 应用程序转换为 ASP.NET MVC3。

我在 global.asax 中有以下路由映射：

```
routes.MapRoute("LogOn", "Scripts/Logon", New With {.controller = "Account", .action = "Logon"})
routes.MapRoute("LogOnASP", "Scripts/Logon.asp", New With {.controller = "Account", .action = "Logon"})
routes.MapRoute("LogOnASPX", "Scripts/Logon.aspx", New With {.controller = "Account", .action = "Logon"}) 
```

文件夹“Scripts”中既不存在 logon.asp 也不存在 logon.aspX。但只有 logon.asp 呈现 404 错误。似乎 IIS 检查 logon.asp 是否存在，如果没有这样的文件则报告 404。

如何配置 IIS 设置以允许 asp url 通过？

当我在 url 中使用 Logon.asp 时，我的 localhost IIS（Windows 7 64 位）、IIS 7.5）没有呈现任何错误，这让我感到困惑。该错误仅在演示服务器（Windows 2008 R2 服务器上的 IIS 7.5）中呈现。

# objective-c - Objective-C：使用 Game Center 匹配两台设备后无法发送/接收数据

> ID：14130472
> 
> 赞同：0
> 
> 时间：2013-01-02T22:46:24.773
> 
> 标签：objective-c, ios, game-center

我希望有人能够帮助解决我遇到的与使用 GameCenter 在两台设备之间发送和接收信息有关的 Objective-C 问题，一旦他们完成了配对。

我正在使用一本名为“Beginning iOS Game Center and Game Kit”的教科书作为我的指南，它正在通过一个示例程序，但我被困在我想从玩游戏的设备接收数据的部分。

我可以成功匹配两个设备并显示相应的视图。我的 GameCenterManager.m 文件中有两个函数用于发送信息 - 一个如下：

```
- (void)sendStringToAllPeers:(NSString *)dataString reliable:(BOOL)reliable
{
NSLog(@"Send String To All Peers");
NSLog(@"Data String: %@", dataString);
NSLog(@"match or session %@", self.matchOrSession);

if (self.matchOrSession == nil)
{
    NSLog(@"GC Manager matchorsession ivar was not set - this needs to be set with the GKMatch or GKSession before sending or receiving data");
    return;
}
NSData *dataToSend = [dataString dataUsingEncoding:NSUTF8StringEncoding];
GKSendDataMode mode;
if (reliable)
{
    mode = GKSendDataReliable;
}
else{
    mode = GKSendDataUnreliable;
}

NSError *error = nil;
if ([self.matchOrSession isKindOfClass:[GKSession class]])
{
    NSLog(@"Match or session 1");
    NSLog(@"Data to send: %@", dataToSend);
    [self.matchOrSession sendDataToAllPeers:dataToSend withDataMode:mode error:&error];

}

else if ([self.matchOrSession isKindOfClass:[GKMatch class]])
{
    NSLog(@"Match or session 2");
    NSLog(@"Data to send: %@", dataToSend);
    [self.matchOrSession sendDataToAllPlayers:dataToSend withDataMode:mode error:&error];
}

else
{   
    NSLog(@"GC Manager matchOrSession was not a GKMatch or a GK Session, we are unable to send data");
}

if (error != nil)
{
NSLog(@"An error occurred while sending data %@", [error localizedDescription]);

}
} 
```

我从我的 racetohundredViewController.m 文件中的一个函数调用这个函数：

```
- (void)generateAndSendHostNumber;
{
NSLog(@"Generate and send host number");
randomHostNumber = arc4random();
NSString *randomNumberString = [NSString stringWithFormat: @"$Host:%f", randomHostNumber];
NSLog(@"the random number string is: %@", randomNumberString);
[self.gcManager sendStringToAllPeers:randomNumberString reliable: YES];
} 
```

我成功地得到了以下 NSLog 输出：

```
2013-01-02 22:27:43.519 First to 50[1376:907] Send String To All Peers
2013-01-02 22:27:43.520 First to 50[1376:907] Data String: $Host:2087825492.000000
2013-01-02 22:27:43.521 First to 50[1376:907] match or session <GKMatch 0x200853d0 expected count: 0 seqnum: 2
G:1656671636:connected
reinvitedPlayers:(
)>
2013-01-02 22:27:43.522 First to 50[1376:907] Match or session 2
2013-01-02 22:27:43.523 First to 50[1376:907] Data to send: <24486f73 743a3230 38373832 35343932 2e303030 303030> 
```

所以我可以看到“要发送的数据”输出，这很棒。

但是我现在有了命令

```
[self.matchOrSession sendDataToAllPeers:dataToSend withDataMode:mode error:&error]; 
```

这似乎根本没有带我去任何地方。我在 GameCenterManager.m 中有以下功能：

```
- (void)receiveData:(NSData *)data fromPeer:(NSString *)peer inSession: (GKSession *)session context:(void *)context
{
NSLog(@"*****Receive Data In Session");
NSString *dataString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

NSDictionary *dataDictionary = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:dataString, peer, session,  nil] forKeys:[NSArray arrayWithObjects: @"data", @"peer", @"session", nil]];

[self callDelegateOnMainThread: @selector(receivedData:) withArg: dataDictionary error: nil];
} 
```

但我没有看到这个的 NSLog 输出。同样，我的racetohundredViewController.m 文件中有一个函数

```
- (void)receivedData:(NSDictionary *)dataDictionary
{
    NSLog(@"------Received Data");
} 
```

也不会被调用；大概是因为以前的函数无法调用它。

我一直在试图弄清楚为什么这在一段时间内不起作用，但没有任何用处。谁能指出我哪里出错了？我希望我已经输入了所有相关代码，但如果您有任何问题，请提出。

谢谢大家，提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:57:33.603

在网上查看其他人对同一件事的问题后，我意识到自己做了什么。我找到匹配后没有设置我的代表，一个非常菜鸟的错误！

# android - 如何在 iOS/Android 应用程序中使用 Livestream 播放器？

> ID：14130473
> 
> 赞同：-2
> 
> 时间：2013-01-02T22:46:24.617
> 
> 标签：android, ios, flash, live-streaming

您可以使用他们的播放器在[Livestream](http://new.livestream.com/home)上观看视频流。

是否可以嵌入到 iOS/Android 应用程序中以仅跟踪一个频道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:54:32.113

是的，您可以使用 LiveStream 的[Mobile API](http://www.livestream.com/userguide/index.php?title=Mobile_API)通过 HTML for mobile 执行此操作。

例如，在 iOS 中，您可以通过 html 执行此操作：

```
<html>
<body>
<h1>iPhone Example:</h1>
<video width="300" height="225" 
   src="http://xmashablex.is.channel.livestream.com/onDemand/ls/mashable/pla_2bc0bbfa-cc39-4f80-b9ef-376b97da94a4/playlist.m3u8" 
   poster="http://www.livestream.com/filestore/user-files/chmashable/2010/06/08/d333a646-94aa-4035-a66e-1185bd885622_1.jpg" 
   controls="" 
   autoplay="true" 
   tabindex="0">
</video>
</body>
</html> 
```

和安卓/黑莓：

```
<html>
<body>
<h1>Android Example:</h1>
<a href="rtsp://xmashablex.is.channel.livestream.com:1935/onDemand/ls/mashable/pla_2bc0bbfa-cc39-4f80-b9ef-376b97da94a4" id="thumbnail">
<img width="320" height="240" 
src="http://www.livestream.com/filestore/user-files/chmashable/2010/06/08/d333a646-94aa-4035-a66e-1185bd885622_1.jpg" 
alt="thumbnail" title="thumbnail"/>
</a><br>
Click image to play
</body>
</html> 
```

# android - Android - 使用真实商品 ID 测试计费购买会出现错误：未找到商品

> ID：14130477
> 
> 赞同：1
> 
> 时间：2013-01-02T22:46:52.267
> 
> 标签：android

我有一种情况，我在带有项目 id 的测试设备上进行了测试：android.test.purchased 并且一切正常。然后，一旦我用真实的项目 ID 更改了该字符串，当我按下购买按钮时，我开始收到 Item Not Found 错误。

此外，购买项目是订阅，而不是 1 次购买。这有什么区别吗？

我不确定代码的哪一部分可能有问题，或者可能缺少什么，所以这里是这个类：

```
public class SubscribeIntroActivity extends BaseActivity
{
    IabHelper mHelper;

    // Does the user have the premium upgrade?
    boolean isSubscriber = false;   

    // (arbitrary) request code for the purchase flow
    static final int RC_REQUEST = 105;

    // Subscribe SKU
    static final String SUBSCRIBE_SKU = "11";

    // Subscribe SKU
    static final String TAG = "BILLING";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.subscribe_intro);

        String base64EncodedPublicKey = "my_real_key";

        // Create the helper, passing it our context and the public key to verify signatures with
        mHelper = new IabHelper(this, base64EncodedPublicKey);
        mHelper.enableDebugLogging(true);

        mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
            public void onIabSetupFinished(IabResult result) 
            {
                if (!result.isSuccess()) 
                {
                    // Oh noes, there was a problem.
                    //complain("Problem setting up in-app billing: " + result);
                    return;
                }

                // Hooray, IAB is fully set up. Now, let's get an inventory of stuff we own.
                mHelper.queryInventoryAsync(mGotInventoryListener);
            }
        });        

        // Listener that's called when we finish querying the items we own
        IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {
            public void onQueryInventoryFinished(IabResult result, Inventory inventory) {

                if (result.isFailure()) 
                {
                    //complain("Failed to query inventory: " + result);
                    return;
                }

                Log.d(TAG, "Query inventory was successful.");

                // Do we have the premium upgrade?
                isSubscriber = inventory.hasPurchase(SUBSCRIBE_SKU);
                Log.d(TAG, "User is " + (isSubscriber ? "SUBSCRIBER" : "NOT SUBSCRIBER"));

                // Check for gas delivery -- if we own gas, we should fill up the tank immediately
                if (inventory.hasPurchase( SUBSCRIBE_SKU )) 
                {
                    Log.d(TAG, "HAS SUBSCRIPTION");
                    return;
                }

                //updateUi();
                // TODO: TELL USER HE IS SUBSCIBED AND TAKE THEM TO THE QUESTION

                //setWaitScreen(false);
                Log.d(TAG, "Initial inventory query finished; enabling main UI.");
            }
        };

        Button subscribe = (Button)findViewById(R.id.subscribe);
        subscribe.setOnClickListener(new Button.OnClickListener() 
        {  
           public void onClick(View v) 
           {              
               // FIRST CHECK IF THE USER IS ALREADY A SUBSCRIBER.
              mHelper.launchPurchaseFlow(SubscribeIntroActivity.this, SUBSCRIBE_SKU, RC_REQUEST, mPurchaseFinishedListener);

               // Send me an email that a comment was submitted on a question. 
              //sendEmail("My Questions -> Add Question", "Someone clicked on add-question from my questions.  User id: " + user_id  );   

              //Intent myIntent = new Intent(MotivationActivity.this, WePromoteActivity.class);
              //MotivationActivity.this.startActivity(myIntent);              
           }
        });         

//        mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
//             public void onIabSetupFinished(IabResult result) 
//             {
//                if (!result.isSuccess()) 
//                {
//                   // Oh noes, there was a problem.
//                    
//                   Log.d("INAPP BILLING", "Problem setting up In-app Billing: " + result);
//                }            
//                      
//                // Hooray, IAB is fully set up!  
//                
//                
//                // First arg is whether product details should be retrieved
//                // The List argument consists of one or more product IDs (also called SKUs) for the products that you want to query.
//                // the QueryInventoryFinishedListener argument specifies a listener is 
//                // notified when the query operation has completed 
//                // and handles the query response.
////                  mHelper.queryInventoryAsync(false, new ArrayList ( ).add("1"), 
////                          mQueryFinishedListener);
//                
//                //mHelper.queryInventoryAsync(mGotInventoryListener);
//                
//                
////                  mHelper.launchPurchaseFlow(SubscribeIntroActivity.this, "11" , 105, mPurchaseFinishedListener, "" );             
//             }
//          });        
    }

    IabHelper.QueryInventoryFinishedListener 
    mQueryFinishedListener = new IabHelper.QueryInventoryFinishedListener() 
    {
        public void onQueryInventoryFinished(IabResult result, Inventory inventory)   
        {
           if (result.isFailure()) {
              // handle error
              return;
            }

            String applePrice =
               inventory.getSkuDetails("1").getPrice();
            String bananaPrice =
               inventory.getSkuDetails(SUBSCRIBE_SKU).getPrice();
        }
        // update the UI 
    };

    IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener 
    = new IabHelper.OnIabPurchaseFinishedListener() {
    public void onIabPurchaseFinished(IabResult result, Purchase purchase) 
    {
       if (result.isFailure()) 
       {
          Log.d("ERROR", "Error purchasing: " + result);
          return;
       }      
       else if (purchase.getSku().equals("1")) 
       {
          // consume the gas and update the UI
       }

       else if (purchase.getSku().equals(SUBSCRIBE_SKU)) 
       {
          // give user access to premium content and update the UI
           Log.d(TAG, "PURCHASED: " + result);

       }
    }
 };    

     IabHelper.QueryInventoryFinishedListener mGotInventoryListener 
     = new IabHelper.QueryInventoryFinishedListener() {
     public void onQueryInventoryFinished(IabResult result,
        Inventory inventory) {

        if (result.isFailure()) {
          // handle error here
        }
        else 
        {
          // does the user have the premium upgrade?
          isSubscriber = inventory.hasPurchase(SUBSCRIBE_SKU);        
          // update UI accordingly
        }
     }
    }; 

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        Log.d(TAG, "onActivityResult(" + requestCode + "," + resultCode + "," + data);

        // Pass on the activity result to the helper for handling
        if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
            // not handled, so handle it ourselves (here's where you'd
            // perform any handling of activity results not related to in-app
            // billing...
            super.onActivityResult(requestCode, resultCode, data);
        }
        else {
            Log.d(TAG, "onActivityResult handled by IABUtil.");
        }
    }

    @Override
    public void onDestroy() 
    {
       super.onDestroy();   

       if (mHelper != null) mHelper.dispose();
       mHelper = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:33:58.650

由于这是订阅，我相信您必须替换此行：

```
mHelper.launchPurchaseFlow(SubscribeIntroActivity.this, SUBSCRIBE_SKU, RC_REQUEST, mPurchaseFinishedListener); 
```

有了这个：

```
mHelper.launchSubscriptionPurchaseFlow(SubscribeIntroActivity.this, SUBSCRIBE_SKU, RC_REQUEST, mPurchaseFinishedListener); 
```

至少这是我在我的代码中使用的并且我已经成功地测试了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:07:43.193

我认为新的应用内计费版本 3 目前不支持订阅。我可能是错的，但我没有在示例代码或文档中看到任何提及订阅，所以这可能是您收到“找不到项目”错误的原因。

一般来说，要测试购买真实物品，您需要将应用的版本上传到开发者控制台（但您不需要发布），并且您必须使用相同（签名）的版本进行测试. Google Play 也需要一些时间来处理/传播新添加的项目......所以有时不幸的是你只需要等待。如果您还没有，请查看[developer.android.com/training/in-app-billing/test-iab-app.html 。](http://developer.android.com/training/in-app-billing/test-iab-app.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T16:47:52.167

还有一件事要知道。购买不会立即出现。您可以在发布后的 2-3 小时后对其进行测试。

对不起我的英语=）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T13:08:56.480

每个请求限制为 20 个项目。即使您将它们分成 20 个项目的组，它仍然可以

```
skuList.addAll(inv.getAllOwnedSkus(itemType)); 
```

`number_of_owned_items + number_of_queried_items`如果大于 20，特别是如果`number_of_owned_items`是 21 ，则保证错误。

现在我明白了为什么有人建议从头开始重写代码。

# android - Android 调试监视器 - 暂停日志记录

> ID：14130478
> 
> 赞同：0
> 
> 时间：2013-01-02T22:46:54.573
> 
> 标签：android, logging, android-logcat

尝试调试我的应用程序，来自 logcat 的恒定流首先使其难以保持原状（滚动锁定问题），然后覆盖所有内容。有没有办法暂停 LogCat？目前正在拔掉电缆，并以这种方式停止日志。

使用 ADM 以外的东西的答案很好，但我想要我可以从 ADM 做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:52:37.930

如果您使用的是 Eclipse，取消选择最右边的按钮应该可以解决问题。

![在此处输入图像描述](../Images/f2f4f248da9c0fd4de01021260bbf5d8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:56:56.350

您可以使用以下内容清除logcat

```
adb logcat -C 
```

# android - Android Facebook SDK 3.0 身份验证

> ID：14130481
> 
> 赞同：7
> 
> 时间：2013-01-02T22:46:58.907
> 
> 标签：android, facebook, facebook-android-sdk

我实际上是在关注 facebook sdk 示例中的 SessionLoginFragment.java 示例。

我真的不明白的是：

当我做

```
session.openForRead(new Session.OpenRequest(fragment).setCallback(statusCallback)); 
```

将我的用户登录到 facebook 并询问基本的读取权限（只是为了测试集成）它根本不起作用。

我用调试器挖了一点，然后沿着这条路走。如果您没有将 requestCode 放入会话的 OpenRequest 中，它将给它一个随机的（这没关系）。

openForRead（我的实际会话处于创建状态）将创建权限对话框。当您点击“确定”按钮时，它将执行

```
request.getStartActivityDelegate().startActivityForResult(intent, request.getRequestCode()); 
```

您可以从 fb sdk 源代码中查看代码。那么 requestCode 与会话相同（这里没问题）。

当 fb 将您登录到系统时，它将完成他的 facebook.LoginActivity 并在我的活动中回叫我的 onActivityResult。问题是这里的 requestCode 与请求的不同。而且我不知道它为什么以及它来自哪里！

如果我进入我的 fb 帐户，我的应用程序就在那里，这意味着我已经完成了正确的身份验证流程。但是由于这个问题，我不会从我的应用程序中获得正确的身份验证。

你知道为什么以及如何解决它吗？

谢谢。

更新流程细节：

这是实际流程（来自**fragment**）：

```
session.openForRead(new Session.OpenRequest(fragment).setCallback(statusCallback)); 
```

创建后，请求代码是（总是）**64206** 现在 openForRead 流将调用（最后部分）

```
request.getStartActivityDelegate().startActivityForResult(intent, request.getRequestCode()); 
```

从 facebook SDK 调用 LoginActivity 并执行客户端/服务器验证/oauth

现在我的**活动**被称为 onActivityResult （不是在片段上，而是在活动部分）

我在这里打电话

```
Session.getActiveSession().onActivityResult(activity, requestCode, resultCode, data); 
```

这里的 requestCode 是 requestCode **129742**

这怎么可能？正如我已经说过的，所有这个流程中的问题是返回到 onActivityResult 的 requestCode 与我的 pendingRequest requestCode 不同，并且这个中断（getActiveSession().onActivityResult 返回而不执行代码）登录客户端部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-01T06:42:51.927

我遇到了同样的问题，除了在我的情况下，冒犯的`requestCode`是`326350`（`0x4face`）。而且我确实在打电话`super.onActivityResult`，所以[Eric Savage 提出的解决方法](https://stackoverflow.com/a/16801050/)已经到位但没有效果。最奇怪的是，这些东西在几周前确实有效，而且我没有升级任何东西（Facebook SDK 版本、Android 版本、支持库版本，甚至我正在开发/测试的手机，都是和我让它工作时一样）。

但是，Eric 的回答包含其他有趣的提示，我利用这些提示让我的代码再次工作。基本上，我没有将整个传递`requestCode`给`Session.onActivityResult`，而是削减了最低的 16 位并仅传递那些。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session session = Session.getActiveSession();
    int sanitizedRequestCode = requestCode % 0x10000;
    session.onActivityResult(this, sanitizedRequestCode, resultCode, data);
} 
```

我确实相信这是一个应该在 Facebook SDK 中修复的错误，并且会坚持在下一个版本中对其进行修补。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-28T20:37:13.260

刚刚遇到同样的问题。64206 (0xface) 和 129742 (0x1face) 之间的区别是因为 FragmentActivity 附加了一个额外的 0x10000 以确定它来自哪个片段。通过确保在 onActivityResult 期间调用了超级活动来解决此问题

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
        // ...
    }
} 
```

如 FragmentActivity.startActivityFromFragment 中所述，您“只能将低 16 位用于 requestCode”

# javascript - 遍历javascript中的复选框

> ID：14130486
> 
> 赞同：1
> 
> 时间：2013-01-02T22:47:42.697
> 
> 标签：javascript, html

我有 3 个 HTML 列表，我正在尝试遍历检查选择了哪些选项并将内部 HTML 传递给 Web 服务。第一个表`id="colorList"`正确传递变量，但数量和一致性不是，我看不出我做错了什么。我尝试过创建不同的功能，但没有奏效。

下面的 JavaScript 代码：

```
function iterateCheckBoxList(listname) {
    var checkBoxListId = listname;
    var elementRef = document.getElementById(checkBoxListId);
    var checkBoxArray = elementRef.getElementsByTagName('input');
    var checkedValues = '';
    for (var i = 0; i < checkBoxArray.length; i++) {
        var checkBoxRef = checkBoxArray[i];
        if (checkBoxRef.checked == true) {
            var labelArray = checkBoxRef.parentNode.getElementsByTagName('span');
            if (labelArray.length > 0) {
                if (checkedValues.length > 0) checkedValues += ',';
                checkedValues += labelArray[0].innerHTML;
            }
        }
    }
    return checkedValues;
}

function updateSymptoms() {
    Parse.initialize("v9s5EdsZ4u9fSfTpr8SD0u3Xcb56nen1GWge47kV", "fjuiNrsJk3AubBY1zDfosLKDoPxzGgKlUxegxbtx");
    var UsualSymptoms = Parse.Object.extend("UsualSymptoms");
    var query = new Parse.Query(UsualSymptoms);
    query.equalTo("PatientID", getUserID());
    query.find({
        success: function (results) {
            var object = results[0];
            object.set("SputumColour", iterateCheckBoxList("colourList"));
            object.set("SputumAmount", iterateCheckBoxList("amountList"));
            object.set("SputumConsistency", iterateCheckBoxList("consistencyList"));
            object.save(null, {
                success: function (object) {
                    // The object was saved successfully.
                },
                error: function (object, error) {
                    // The save failed.
                    // error is a Parse.Error with an error code and description.
                    alert('PARSE didnt work');
                    console.log(error);
                }
            });
        },
        error: function (error) {
            alert("Error: " + error.code + " " + error.message);
        }
    });
} 
```

HTML 代码如下：

```
<div class="sputumDetails" style="display:none" id="checkboxdiv">
    <h2>Colour</h2>

    <ul id="colourList" class="lists">
        <li><span>Clear</span>
            <input id="Clear" type="checkbox" class="checkbox" />
        </li>
        <li><span>White</span>
            <input id="White" type="checkbox" class="checkbox" />
        </li>
        <li><span>Yellow</span>
            <input id="Yellow" type="checkbox" class="checkbox" />
        </li>
        <li><span>Green</span>
            <input id="Green" type="checkbox" class="checkbox" />
        </li>
    </ul>
    <h2>Consistency</h2>

    <ul id="consistencyList" class="lists">
        <li>Watery
            <input type="checkbox" class="checkbox" />
        </li>
        <li>Sticky
            <input type="checkbox" class="checkbox" />
        </li>
    </ul>
    <h2>Amount</h2>

    <ul id="amountList" class="lists">
        <li>1 Teaspoon
            <input type="checkbox" class="checkbox" />
        </li>
        <li>1 Eggcup
            <input type="checkbox" class="checkbox" />
        </li>
        <li>Half a cup
            <input type="checkbox" class="checkbox" />
        </li>
        <li>1 Cup
            <input type="checkbox" class="checkbox" />
        </li>
    </ul>
</div>
<div id="nextSection">
    <input onclick="updateSymptoms()" type="button" class="next" value="Next" />
    <br/>
    <br/>
    <br/>
</div> 
```

该`onclick`方法`updateSymptoms()`由按钮调用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:56:46.457

这是因为您正在跨度内寻找 innerHTML。

```
var labelArray = checkBoxRef.parentNode.getElementsByTagName('span'); 
```

`amountList`并且`consistencyList`它们内部没有跨度。

只需将这些标签包装在跨度标签中，就像您在中所做的那样`colourList`，您会很好。

# java - 这个java教程是错的？

> ID：14130488
> 
> 赞同：-2
> 
> 时间：2013-01-02T22:48:05.573
> 
> 标签：java, object

我正在尝试学习 java 中的对象和类，在线教程给了我无法在 Eclipse 上编译/运行的代码。

当我在保存类后编译程序时，它给了我错误：

*线程“主”java.lang.Error 中的异常：未解决
的编译问题：方法 setAge(int) 未定义 Puppy
类型 Puppy.main(Puppy.java:23) 的方法 getAge() 未定义*

```
public class Puppy{

       int puppyAge;

       public Puppy(String name){
      // This constructor has one parameter, name.
      System.out.println("Passed Name is :" + name ); 
   }
   public setAge( int age ){
       puppyAge = age;
   }

   public getAge( ){
       System.out.println("Puppy's age is :" + puppyAge ); 
       return puppyAge;
   }
   public static void main(String []args){
      /* Object creation */
      Puppy myPuppy = new Puppy( "tommy" );

      /* Call class method to set puppy's age */
      myPuppy.setAge( 2 );

      /* Call another class method to get puppy's age */
      myPuppy.getAge( );

      /* You can access instance variable as follows as well */
      System.out.println("Variable Value :" + myPuppy.puppyAge ); 
   }
} 
```

[http://www.tutorialspoint.com/java/java_object_classes.htm](http://www.tutorialspoint.com/java/java_object_classes.htm)

（代码在页面中间）

它是一个构造函数类程序。**不应该有返回类型。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T22:49:15.523

您（或教程）缺少方法签名中的返回类型。

```
public setAge( int age ){
       puppyAge = age;
   }

   public getAge( ){
       System.out.println("Puppy's age is :" + puppyAge ); 
       return puppyAge;
   } 
```

应该

```
public void setAge( int age ){
       puppyAge = age;
   }

   public int getAge( ){
       System.out.println("Puppy's age is :" + puppyAge ); 
       return puppyAge;
   } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T22:49:04.150

您缺少方法的返回类型。

```
 public setAge( int age ){ 
```

应该

```
 public void setAge( int age ){ 
```

和

```
 public getAge( ){ 
```

应该

```
 public int getAge( ){ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T22:49:51.153

您的方法没有说明返回什么（类型）。将它们更改为：

```
 public void setAge(int age) { ... }
 public int getAge() { ... } 
```

该文档列出了 Java 方法的六个部分：

1.  修饰符——例如 public、private 以及您稍后将了解的其他修饰符。
2.  **返回类型**——方法返回值的数据类型，如果方法没有返回值，则为 void。（*你错过了这个*）
3.  方法名称——字段名称的规则也适用于方法名称，但约定略有不同。
4.  括号中的参数列表 — 输入参数的逗号分隔列表，前面是它们的数据类型，用括号 () 括起来。如果没有参数，则必须使用空括号。
5.  例外列表——稍后讨论。
6.  方法体，用大括号括起来——方法的代码，包括局部变量的声明，放在这里。

更多阅读：[http ://docs.oracle.com/javase/tutorial/java/javaOO/methods.html](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T21:03:46.983

## 为什么它不起作用？

您必须将返回类型添加到`getAge()`和`setAge()`。

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html)指出方法声明应遵循以下格式：

MethodModifiers（可选） TypeParameters（可选） Result MethodDeclarator Throws（可选）

放松，让我们慢慢看这个：

*   MethodModifiers(optional) - 您可以将每个方法标记为私有/公共/受保护。如果省略这个参数方法是包。还有一些修饰符，但现在这些对你来说最有趣
*   TypeParameters(optional) - 它是关于泛型方法的。你现在可以安全地跳过这个
*   结果 - 这个很重要。每个方法都必须明确说明它返回的内容。您的示例中缺少此内容。
*   MethodDeclarator - 您的方法的名称。
*   Throws(optional) - 如果你的方法会抛出异常你必须在这里写。现在你可以安全地跳过它。

![在此处输入图像描述](../Images/a22d5aa08dc82d202a28b5a7614525fe.png)

## 只需向我展示工作代码！

```
public class Puppy{

    int puppyAge;

    public Puppy(String name){
        // This constructor has one parameter, name.
        System.out.println("Passed Name is :" + name );
    }
    public void setAge( int age ){
        puppyAge = age;
    }

    public int getAge( ){
        System.out.println("Puppy's age is :" + puppyAge );
        return puppyAge;
    }
    public static void main(String []args){
      /* Object creation */
        Puppy myPuppy = new Puppy( "tommy" );

      /* Call class method to set puppy's age */
        myPuppy.setAge( 2 );

      /* Call another class method to get puppy's age */
        myPuppy.getAge( );

      /* You can access instance variable as follows as well */
        System.out.println("Variable Value :" + myPuppy.puppyAge );
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-31T16:53:38.487

您的方法签名有问题。它们应该是这样的： public void setAge(int age) { } public int getAge() { }

你错过了类型。我建议你查看这个[核心 Java 教程](http://www.how-to-program-in-java.com/core-java-tutorial/)。解释得很好。

# php - URL 中的正则表达式

> ID：14130489
> 
> 赞同：0
> 
> 时间：2013-01-02T22:48:20.000
> 
> 标签：php, regex, codeigniter, url-routing

我已经尝试寻找答案，但首先要问这个问题很棘手，就这样吧。

考虑以下 URL：

*   伦敦肯辛顿五星级酒店
*   伦敦肯辛顿梅菲尔五星级酒店
*   伦敦五星级酒店

将使用正确的正则表达式返回以下内容：

*   伦敦-肯辛顿
*   伦敦-肯辛顿-梅菲尔
*   伦敦

我正在尝试使用正则表达式来获取中心值。在所有情况下，我都知道字符串的第一个和最后一个词，即“酒店”（第一个）和“5star”（最后一个）。

更新：我需要使用正则表达式，因为 URL 正在通过 Codeigniters URI 路由器进行路由。URI 的中心部分是为搜索结果动态构建的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T22:50:21.007

因为你知道第一个词和最后一个词，你也知道它们的长度。

```
$out = substr($in,7,-6); 
```

或更一般地说：

```
$out = substr($in,strlen($begin),-strlen($end)); 
```

编辑：如果*需要*正则表达式，只需使用`/(?<=hotels-).*(?=-5star)/`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T22:50:53.103

对于这种简单的情况，您可以使用[`explode()`](http://php.net/explode)

```
$parts = explode('-', $string);
$wanted = array_slice($parts, 1, count($parts)-2); 
```

更新：正则表达式。我仍然认为手动将字符串分成几部分更容易。

```
~hotels-(.+)-5start~ 
```

# bash - bash 字符串作为引号中的可执行文件的参数

> ID：14130490
> 
> 赞同：1
> 
> 时间：2013-01-02T22:48:21.337
> 
> 标签：bash, arguments, echo, double-quotes

我确定这很简单。我尝试了多种可能性，但都没有运气。

我正在寻求在 shell 中执行以下操作。

```
 ./secondexecutable -t "A string with spaces" -s "Another string with spaces" -o outfile.txt 
```

问题是可执行文件从一个可执行文件中获取一个字符串，然后应用于第二个可执行文件。第二个可执行文件需要引号（单引号或双引号）以保留空格。

```
tmp=`./firstexecutable`

echo $tmp   prints out the following     -t "A string with spaces" -s "Another string with spaces"

./secondexecutable $tmp -o outfile.txt 
```

shell 截断了参数，所以它基本上是相似的

```
 ./secondexecutable -t "A" -s "Another" -o outfile.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:51:18.007

在脚本中的变量周围加上引号：

```
./secondexecutable "$tmp" -o outfile.txt 
```

以下是您使用和不使用引号时会发生的情况：

```
$ cat countargs 
#!/bin/sh

echo $#
$ var='O HAI I IZ A VAR'
$ ./countargs $var
6
$ ./countargs "$var"
1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:03:15.193

在我看来，这是一个糟糕的设计。一旦将多个带有空格的字符串连接成一个字符串，就没有简单的方法可以将它们分开而不回退到`eval`

```
eval ./secondexecutable "$tmp" -o outfile.txt 
```

*可能*会这样做，但要注意评估任意字符串的风险

* * *

如果可以，您应该重新处理第一个可执行文件。如果它可以只返回 -t 和 -s 选项的**值**，你的生活会容易得多。例如，如果它甚至可以在单独的行上输出值，如下所示：

```
A string with spaces
Another string with spaces 
```

你可以这样做：

```
{ IFS= read -r t_option; IFS= read -r s_option; } < <(./firstexecutable)
./secondexecutable -t "$t_option" -s "$s_option" -o output.txt 
```

或者，如果这两个值不相关，则让第一个可执行文件一次计算一个

```
./second -t "$(./first -t)" -s "$(./first -s)" -o output.txt 
```

# delphi - 转换为火猴

> ID：14130508
> 
> 赞同：0
> 
> 时间：2013-01-02T22:50:11.380
> 
> 标签：delphi, firemonkey

什么变成了

> TStatusBar.Simpletext

将程序从 VCL 转换为firmonkey 时的属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T23:06:41.473

`TLabel`在 顶部添加一个`TStatusBar`，将`Align`属性设置为 alClient。设置标签文本属性，就可以了。

Fmx 组件尝试尽可能多地重用其他基本组件。不幸的是，帮助文档信息量不是很大。

研究[FMX.ControlsDemo_Sample](http://docwiki.embarcadero.com/CodeExamples/XE3/en/FMX.ControlsDemo_Sample)。

# c# - 我的清单有什么问题 。清楚的（）？

> ID：14130509
> 
> 赞同：3
> 
> 时间：2013-01-02T22:50:12.270
> 
> 标签：c#, wpf, overriding, gethashcode

我有一个实现 IEqualityComparer 并覆盖以下方法的 MyItems 类：

```
public bool Equals(MyItems item1, MyItems item2)
{
    return (item1.ID == item2.ID && item1.itemName.Equals(item2));
}
public int GetHashCode(MyItems item)
{
    return item.ID.GetHashCode() ^ item.itemName.GetHashCode();
} 
```

首先，为什么`GetHashCode`需要？我理解覆盖该`Equals`方法，但是，`GetHashCode`必要性已经避开了我。

其次，这似乎不起作用。我在这里做错了吗？我不明白的`GetHashCode,`地方可能是我绊倒的地方。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T22:54:09.490

要回答您的第一个问题，请[在此处](https://stackoverflow.com/questions/3661801/why-gethashcode-matters)查看更多信息。

回答你的第二个问题：你忘了 item2 应该是 item2.itemName

```
return (item1.ID == item2.ID && item1.itemName.Equals(item2.itemName)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T22:52:59.510

该`Distinct`方法的工作原理如下：

1.  使用 . 检查两个对象是否具有相同的哈希码`GetHashCode`。
2.  如果是这样，现在确保它们绝对等于`Equals`.

这`GetHashCode`是更昂贵的检查的第一次检查：`Equals`

您的`Equals`方法有错误：

```
return (item1.ID == item2.ID && item1.itemName.Equals(item2)); 
```

应该：

```
return (item1.ID == item2.ID && item1.itemName.Equals(item2.itemName));
//                                                         ^^^^^^^^^ 
```

此外，如果您使用的 List 或数组类型不是`<MyItems>`类型，您还需要覆盖 Equals 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T22:55:06.743

如果要比较对象，则应`Equals(object obj)`在其类中覆盖。

此外，每当您覆盖`Equals(object obj)`时，最好的做法是覆盖`GetHashCode`

# php - imagepolygon()，如何使线条变粗？

> ID：14130511
> 
> 赞同：1
> 
> 时间：2013-01-02T22:50:17.713
> 
> 标签：php, gd

是否可以使使用 imagepolygon() 生成的线条更粗？另外，你能得到“更高分辨率”吗？当线条弯曲时，我得到了很多可见的像素。

[http://php.net/manual/en/function.imagepolygon.php](http://php.net/manual/en/function.imagepolygon.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:52:08.040

您可以使用该[`imagesetthickness`](http://php.net/manual/en/function.imagesetthickness.php)功能更改厚度。

```
imagesetthickness($img, 5);
imagepolygon($img, array(5, 5, 60, 80, 10, 50), 3, $color); 
```

[（例子）](http://codepad.viper-7.com/sJoRdR)

# android - 当前在 Android 上支持使用 html5 音频标签一次播放多个音轨

> ID：14130516
> 
> 赞同：0
> 
> 时间：2013-01-02T22:50:29.987
> 
> 标签：android, html, audio

我正在编写一个 html5 / javascript 游戏，并且阅读了很多关于 iOS 只能使用 html5 音频标签在任何时候播放一个音轨的各种博客文章。这似乎已在 iOS6 中得到修复，但我没有看到很多关于 Android 支持的信息。我有几个 Android 设备 - 运行 Jelly Bean (v4.2.1) 的三星 Galaxy Nexus 和运行最新版本 (10.2.4) 的 Kindle Fire，我认为这是冰淇淋三明治的改编版本。Galaxy nexus 在任何时候都只会播放一首曲目，但 Kindle Fire 会播放多首曲目。我假设这是因为 Kindle Fire 上的 Silk 浏览器比默认的 Android 浏览器对音频标签的支持更好，但我想确认这一点，以便我可以尝试衡量问题的影响有多大.

这是在 Galaxy Nexus 上无法正常工作的代码：

```
<audio id="audio1" controls>
    <source src="http://dl.dropbox.com/u/1538714/article_resources/cat.m4a" type="audio/mpeg" />
    <source src="http://dl.dropbox.com/u/1538714/article_resources/cat.ogg" type="audio/ogg" />
</audio><br />
<audio id="audio2" controls>
    <source src="http://dl.dropbox.com/u/1538714/article_resources/song.m4a" type="audio/mpeg" />
    <source src="http://dl.dropbox.com/u/1538714/article_resources/song.ogg" type="audio/ogg" />
</audio><br />
<button onclick="play();">Play</button><br />

<script type='text/javascript'>

var play = function() {
    var audio1 = document.getElementById('audio1');
    var audio2 = document.getElementById('audio2');
    audio1.play();
    audio2.play(); // this will stop audio1 on the Galaxy Nexus
}

</script> 
```

其他运行 Ice Cream Sandwich 或 Jelly Bean 的 android 设备一次只支持一个轨道吗？

[这个网页](http://jsfiddle.net/aarongloege/gzLAe/embedded/result/)提供了一个很好的快速测试。如果您单击“播放”，则两者应一起播放。我对在 Android 之上运行专有软件的设备特别感兴趣，而不仅仅是 Galaxy Nexus 上的“纯”Android。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T17:15:47.490

您在上面评论的页面在本机 Android 4.1.2 浏览器中不起作用。我听说过 Web Audio API，但它在 Android 平台的各种浏览器中运行有很多限制。

我知道 HTML5 Audio 和 Web Audio API 在不同的移动浏览器中不能很好地工作。

但是我在这个项目中找到了一个关于使用 HTML5 运行多个音频的解决方案：由 Christoph Martens 维护的**[*lycheejs.org*](http://lycheejs.org/index.html)**，但没有任何论坛或类似的东西可以讨论（至少我没有找到）。实际上，**[*cosmo.lycheejs*](http://cosmo.lycheejs.org/index.html)**是一个可以在 Android 平台中同时运行多个音频的示例。然而，这仅在 Firefox 中是可能的。Chrome 和 Navite Android 浏览器不工作。观看此视频：**www.youtube.com/watch ?v=PojeyUiFLi4**

如果有人可以使用此解决方案举例，请在此处回复。

请参阅这些网站以了解在移动浏览器中同时运行多个音频的复杂性：

**www.codetheory.in/html5-audio-behaviour-and-support-in-ios-and-android/**

**www.codetheory.in/solve-your-game-audio-problems-on-ios-and-android-with-web-audio-api/**

# twitter-bootstrap - Twitter Bootstrap - 向左/向右滑动 Span

> ID：14130519
> 
> 赞同：1
> 
> 时间：2013-01-02T22:50:36.803
> 
> 标签：twitter-bootstrap, grid, collapse

我正在使用 twitter bootstrap spans 在网格布局中形成两列。我想让用户关闭最左边的跨度，以便右跨度填充视口。我通过隐藏左侧面板并更改右侧面板的宽度来完成此操作，并且效果很好。但是，我更喜欢关闭左面板滑动并更改右面板宽度以填充剩余空间。到目前为止，我想出的最好的是：

```
if ( show )
    $('.content-panel').css( { width: '76.6%' } );

$('.left-panel').animate( {width: 'toggle'}, function(){
    if ( !show )
        $('.content-panel').css( { width: '100%' } );
}); 
```

其中 .content 面板是右侧列。这种工作，但看起来很笨重。它确实需要两个跨度一起调整大小。欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:13:28.203

这是一个似乎可以完成您想要的快速解决方案。看[这里的小提琴](http://jsfiddle.net/mark47/5DV5X/)。

它从宽度的 Bootstrap 跨度类开始，然后在单击时动画右框宽度的扩展，同时减小左框的大小，然后将其完全隐藏。动画完成后，我修改了添加 span12 。

```
$("#moveTrigger").click(function() {
  // Left box animates to 0 width
  $(".leftbox").animate({ "width": "0%" }, "slow", function() {
    // Hide when width animation finishes
    $(this).hide();
  });
  // Right box expands. Tinkered with add span12 after animation is complete
  $(".rightbox").animate({ "width": "90%" }, "slow", function() {
    $(this).removeClass('span6').addClass('span12').css('width','');
  });
});​ 
```

这可能需要一些改进，但可以达到效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T02:54:26.810

为了好玩，我破解了 Voodoo 的示例并使用 Javascript 来操作类，然后使用 CSS 转换来管理动画：http: [//jsfiddle.net/WDV69/29/](http://jsfiddle.net/WDV69/29/)

不一定是更好的解决方案，只是不同。

如果我的 javascript 有点粗糙，那不是我的部门。

```
$("#closeTrigger").click(function() {

$('.container').removeClass('openLeft').addClass('closeLeft');  
});

$("#openTrigger").click(function() {
$('.container').removeClass('closeLeft').addClass('openLeft');  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T03:41:38.963

根据要求，另一种响应式解决方案：http:
[//jsfiddle.net/panchroma/pwP5V/](http://jsfiddle.net/panchroma/pwP5V/)

同样，这是基于 @Voodo 启动的 javascript

它使用媒体请求来管理动画，所以如果你查看 CSS，你会看到一堆设置，比如

```
@media (max-width: 480px) {
.to-hide {
background-color: yellow;  
}
....
} 
```

它仍然需要一些微调，但我认为此时您需要使用现实生活中的内容，因为某些设置可能取决于左右栏的相对高度。

您可以进行无止境的定制。例如检查关闭在最窄窗口的工作方式。还可以针对打开和关闭以及不同的窗口大小定制转换时间。

这里应该有足够的东西让你坚持一段时间！

# python - 由于交互问题，matplotlib 不再工作

> ID：14130527
> 
> 赞同：6
> 
> 时间：2013-01-02T22:51:32.627
> 
> 标签：python, matplotlib

我正在使用 python 和 matplotlib，但我的脚本崩溃了，所以我不得不关闭终端（Ubuntu 12.04、matplotib-1.1.0、python2.7）。现在，如果我尝试运行任何脚本，它就会在线崩溃

```
import matplotlib.pyplot as plt 
```

出现以下错误

```
Traceback (most recent call last):
  File "new.py", line 4, in <module>
    import matplotlib.pyplot as plt
  File "/usr/local/lib/python2.7/dist-packages/matplotlib-1.2.0-py2.7-linux-i686.egg/matplotlib/__init__.py", line 151, in <module>
    from matplotlib.rcsetup import (defaultParams,
  File "/usr/local/lib/python2.7/dist-packages/matplotlib-1.2.0-py2.7-linux-i686.egg/matplotlib/rcsetup.py", line 20, in <module>
    from matplotlib.colors import is_color_like
  File "/usr/local/lib/python2.7/dist-packages/matplotlib-1.2.0-py2.7-linux-i686.egg/matplotlib/colors.py", line 54, in <module>
    import matplotlib.cbook as cbook
  File "/usr/local/lib/python2.7/dist-packages/matplotlib-1.2.0-py2.7-linux-i686.egg/matplotlib/cbook.py", line 32, in <module>
    import new
  File "/home/federico/Documents/doc_uni/idraulica_ambientale/relazione/scripts/variabili/new.py", line 4, in <module>
    import matplotlib.pyplot as plt
  File "/usr/local/lib/python2.7/dist-packages/matplotlib-1.2.0-py2.7-linux-i686.egg/matplotlib/pyplot.py", line 23, in <module>
    from matplotlib import _pylab_helpers, interactive
ImportError: cannot import name interactive 
```

注意最后一行。我尝试从源代码和 pip 和 easy_install 删除和重新安装 matplotlib，但我无法摆脱它。如果我尝试从 python 解释器中导入，也会发生同样的错误。我还安装了 1.2.0 版来查看它是否有效，但它没有。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T03:31:54.643

如果您通读堆栈跟踪中的文件，

`new.py`-> `/matplotlib/__init__.py`-> `matplotlib/rcsetup.py`, `/matplotlib/colors.py`-> `/matplotlib/cbook.py`--> **/home/federico/Documents/../new.py** ->`matplotlib/pyplot.py`

您已经命名`new`了使用 import in 遮蔽的模块`matplolib.cbook`，这导致您在导入时尝试 imort `pyplot`，`pyplot`这显然会爆炸（确切地说*为什么*高于我的工资等级）。您只需要将模块重命名为`new.py`（并记住删除`new.pyc`创建的文件）。

作为`import matplotlib.pyplot as plt`在交互式 shell 中运行的测试。

仅供参考[，这](http://docs.python.org/2/library/new.html)就是您要隐藏的内容。

此导入将在 mpl 1.3 中删除

# mysql - 语法 WHERE 子句

> ID：14130531
> 
> 赞同：1
> 
> 时间：2013-01-02T22:52:06.837
> 
> 标签：mysql, sql

我正在尝试`row 3(id=8)`在我的表中更新![](../Images/71276650692f6e6fc69c1ed238bad342.png)

使用以下查询：

```
UPDATE player_ban 
   SET until = Now(), 
       unbanned_by = "MrSnare", 
       unbanned_reason = "test", 
       unbanned_date = Now() 
 WHERE name = "MCYasman" 
     & unbanned_by = NULL 
     & until > NOW(); 
```

查询正在运行，但没有更新任何行。

出了什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T22:56:00.970

我会更改您的查询以使用`AND`而不是`&`and `unbanned_by IS NULL`。所以查询将是：

```
UPDATE player_ban 
SET until = Now(), 
    unbanned_by = "MrSnare", 
    unbanned_reason = "test", 
    unbanned_date = Now() 
WHERE name = "MCYasman" 
  AND unbanned_by IS NULL 
  AND until > now(); 
```

一个值永远不会是`= null`，你必须使用`IS NULL`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T22:56:26.050

不使用`&`，`AND`改为使用

```
 WHERE name = "MCYasman" AND unbanned_by IS NULL AND until > now(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:57:15.177

您需要更改 unbanned_by 检查以使用“is null”而不是“= NULL”。像这样。

```
UPDATE player_ban SET until = Now(), unbanned_by = "MrSnare", unbanned_reason = "test", unbanned_date = Now() WHERE name = "MCYasman" & unbanned_by is NULL & until > now(); 
```

NULL 在 SQL 中不等于自身。

```
> select null = null, null is null, null is not null;
+-------------+--------------+------------------+
| null = null | null is null | null is not null |
+-------------+--------------+------------------+
|        NULL |            1 |                0 |
+-------------+--------------+------------------+
1 row in set (0.00 sec) 
```

# objective-c - ASIHTTPRequest 没有身份验证信息并且不要求它

> ID：14130537
> 
> 赞同：1
> 
> 时间：2013-01-02T22:52:39.430
> 
> 标签：objective-c, ios, authentication, asihttprequest

我正在使用 ASIHTTPRequest 让 iPhone 应用程序与我的 Rails 服务器通信。（我知道我可能不应该使用 ASIHTTPRequest，但我现在对它非常投入，而且它大部分时间都有效）。

当应用程序启动时，我向服务器发送一个请求，请求一个 JSON 文件。我指望 ASIHTTPRequest 来检查它是否以前存储过登录凭据并使用这些凭据。如果没有，则请求的委托实现 authenticationNeededForRequest:，它会显示我自己的自定义登录对话框。

当请求没有先前存储的凭据时，服务器会发送 401 响应。问题是在 ASIHTTPRequest 内部，一旦看到 401 响应，它就会记录：

```
[AUTH] Request <ASIHTTPRequest: 0x2031a800> received 401 challenge and must authenticate using (null) 
```

这是...的结果

```
ASI_DEBUG_LOG(@"[AUTH] Request %@ received 401 challenge and must authenticate using %@%@",self,[self authenticationScheme],realm); 
```

所以基本上，没有领域，身份验证方案为空。请求放弃并立即失败，而无需尝试任何其他获得身份验证的方法。

我在我的主视图中发起这样的请求：

```
/* When using a storyboard, this method gets called instead of the old initWithNibName:bundle:. */
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        self.delegate = self;

    NSURL* url = [NSURL URLWithString:@"http://myserver/file.json"];
        [ASIHTTPRequest setDefaultTimeOutSeconds:20];
        request = [[ASIHTTPRequest alloc] initWithURL:url];
        [request setDelegate:self];
        hasConnected = NO;

        newPicturesPaths = [[NSMutableArray alloc] init];
    }

    return self;
} 
```

和 ...

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  // Do any additional setup after loading the view.

  /* We will try to access the server, if we don't have authentication,
   * we'll present the login view. */
   [request setAuthenticationScheme:(NSString*)kCFHTTPAuthenticationSchemeBasic];
   [request startAsynchronous];
   ...
} 
```

如果我们以前没有保存用户名/密码（并且还保存用户名/密码供以后使用），关于如何实现我想要的行为并且只显示登录屏幕的任何建议？

编辑：我的逻辑基于[this](http://allseeing-i.com/ASIHTTPRequest/ASIHTTPRequest-AuthenticationProcess.pdf)，但这似乎不是 ASIHTTPRequest 的实际行为方式。

# php - 在 CakePHP 中验证多语言数据

> ID：14130539
> 
> 赞同：1
> 
> 时间：2013-01-02T22:52:58.220
> 
> 标签：php, security, cakephp, internationalization, cakephp-model

我有一个用 cakephp 2.3 开发的网站。在我的站点中，用户可以创建各种语言的产品：`American`、`Italian`、`Japanese`、`Russian`等。
是否有必要保护数据或 CakePHP 会自动执行此操作？

例如，我有这个模型：

```
class Product extends AppModel {
    public $name = 'Product'; 
    public $validationDomain = 'validation_errors';
        public $validate = array(
           'name' => array(
          'not_empty' => array(
            'rule'=> 'notEmpty',
            'message'=> 'No empty'  
           ),
          'string' => array(
            'rule'=> 'alphanumeric',
            'message'=> 'Alphanumeric'  
                )
            ),
                 )
        );
} 
```

我的目标是字符串可以包含`blank space`, `-`, `_`, 可能还有一个`japanese`or`russian`字符。

我是否需要制作一些验证功能来做到这一点，因为字符串可以包含几乎所有内容？

我不知道 CakePHP 中多语言字段的安全性如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:26:52.280

通过“安全”，我假设您的意思是 SQL 注入？如果您正确使用内置模型查询方法，CakePHP 在执行数据库操作时会自动转义值。所以是的，我认为它是安全的。

[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

[http://book.cakephp.org/2.0/en/models/saving-your-data.html](http://book.cakephp.org/2.0/en/models/saving-your-data.html)

[http://book.cakephp.org/2.0/en/models/deleting-data.html](http://book.cakephp.org/2.0/en/models/deleting-data.html)

# html - 使用 CSS，如何在鼠标悬停时创建更大的元素？

> ID：14130543
> 
> 赞同：5
> 
> 时间：2013-01-02T22:53:25.837
> 
> 标签：html, css, dropshadow

看到的效果是，当鼠标悬停在框上时，框的大小会增加，并且还会出现阴影。

当鼠标不在盒子上时，它们会回到相同的大小而没有阴影。

**普通的：**

![在此处输入图像描述](../Images/b4fd52bb616a23198db53410d8d0958f.png)

**鼠标移到：**

![在此处输入图像描述](../Images/978d1e86d27b31d0e78da7f598ebf19d.png)

滚动这些框以查看[**此处**](http://bestlinkbuildingservice.net/buy-facebook-likes.html)的效果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T00:33:17.790

[**jsFiddle 演示**](http://jsfiddle.net/Hz97u/)

将鼠标悬停在元素上并使它们变大可以通过多种方式完成，这取决于您的布局要求和您使用的框架。

由于这些框似乎是具有 CSS3 框阴影属性的 div，因此您可以使用 :hover 在纯 CSS 中执行类似的操作

**HTML：**

```
<div class="box">1</div>
<div class="box">2</div>
<div class="box">3</div> 
```

**CSS：**

```
body {
  background-color: black;
}

.box {
  background-color: grey;
  width: 200px;
  height: 400px;
  float: left;
  border: 6px solid red;
  margin: 10px;
}

.box:hover{
  width: 250px;
  /* This is 52px total. 1/2 of that is for top and the other half is for bottom. */
  height: 452px;
  /* Below we are not using -26px for margin-top because .box has 6px border and 10px margin. */
  /* That 16px is then divide by 2 since it's for both top and bottom, or 8px per side. */
  /* Having said that, 26px - 8px is 18px. We need negative value to position it correctly. */
  margin-top: -18px;
 -moz-box-shadow:    0 0 50px red;
 -webkit-box-shadow: 0 0 50px red;
 box-shadow:         0 0 50px red;    
} 
```

* * *

**编辑2：**

[**修改后的 jsFiddle DEMO**](http://jsfiddle.net/wZD6c/)

![在此处输入图像描述](../Images/cbeeb9e3b9a6e929fa6f95102fdfffb4.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T14:18:35.643

您可以使用“transform: scale(x,y)”来缩放元素。

例如

```
 div:hover{
 transform: scale(1.5, 1.25);
 -moz-transform: scale(1.5, 1.25);
-ms-transform: scale(1.5, 1.25);
-webkit-transform: scale(1.5, 1.25);
-o-transform: scale(1.5, 1.25);
} 
```

将您的 div 在 x 轴上缩放 1.5 倍，并在 y 轴上保持 1.25 倍。

添加阴影 -

```
div:hover{
-moz-box-shadow: 5px 5px 5px #888;
-webkit-box-shadow: 5px 5px 5px #888;
box-shadow: 5px 5px 5px #888;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T22:57:02.953

这可以通过一些 HTML 和 CSS 轻松完成。它们通常被称为“下拉”菜单或“弹出”菜单，并且有大量关于如何制作它们的教程；这是一个：

[http://www.seoconsultants.com/css/menus/tutorial/](http://www.seoconsultants.com/css/menus/tutorial/)

# python - 更改 numpy 数组中特定值的 dtype？

> ID：14130546
> 
> 赞同：1
> 
> 时间：2013-01-02T22:53:56.763
> 
> 标签：python, arrays, numpy

我有一个 numpy 数组 x，维度 = (20, 4)，其中只有第一行和第一列是真实的字符串值（字母），其余的值是数字，它们的类型分配为字符串。我想将这些数值更改为浮点或整数类型。

我尝试了一些步骤：

一种。我将数组的第一行和第一列复制为单独的变量：

```
x_row = x[0]
x_col = x[:,0] 
```

然后从原始数组中删除它们`x`（使用 numpy.delete() 方法）并通过应用迭代每个值的 for 循环来转换剩余值的类型。`numpy.vstack()`但是，当我使用and堆叠复制的行和列时`numpy.hstack()`，所有内容都会再次转换为字符串类型。所以，不知道为什么会这样。

湾。与 a 点相同的过程，除了我使用`numpy.insert()`插入行和列的方法，但做同样的事情 - 将所有内容转换回字符串类型。

那么，有没有一种方法可以让我不必通过这种删除和堆叠机制（无论如何都不起作用）并且我可以将数组的所有值（第一行和第一列除外）更改为`int()`或`float()`键入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T22:58:27.750

numpy 数组中的所有项目都必须具有相同的 dtype。这是关于 numpy 的一个基本事实。你可以使用一个 numpy recarray，或者你可以使用`dtype=object`它基本上让所有值都是任何值。

我建议你看看[pandas](http://pandas.pydata.org)，它提供了一个表格数据结构，允许不同的列有不同的类型。听起来你所拥有的是一个带有行和列标签的表格，而这正是 pandas 可以很好地处理的。

# c# - UserControl 中的自定义控件无法正确呈现

> ID：14130547
> 
> 赞同：2
> 
> 时间：2013-01-02T22:53:57.450
> 
> 标签：c#, winforms

在这张图片中... ![在此处输入图像描述](../Images/070c458247d4080743b5288b637fea21.png) ...您可以看到每个“线条颜色”标签旁边都有一个彩色圆圈。

在我的项目中，彩色圆圈是一个 Swatch。这是 Swatch 的完整代码文件：

```
public class Swatch : System.Windows.Forms.Panel
{
    /*private int _Radius = 20;

    [System.ComponentModel.Category("Layout")]
    public int Radius
    {
        get { return _Radius; }
        set { _Radius = value; }
    } */
    private System.Drawing.Color _BorderColor = System.Drawing.Color.Transparent;

    [System.ComponentModel.Category("Appearance")]
    public System.Drawing.Color BorderColor
    {
        get { return _BorderColor; }
        set { _BorderColor = value; }
    }

    private System.Drawing.Color _FillColor = System.Drawing.Color.Blue;

    [System.ComponentModel.Category("Appearance")]
    public System.Drawing.Color FillColor
    {
        get { return _FillColor; }
        set { _FillColor = value; }
    }

    protected override void OnPaint(System.Windows.Forms.PaintEventArgs e)
    {
        base.OnPaint(e);
        System.Drawing.Rectangle RealRect = new System.Drawing.Rectangle(e.ClipRectangle.Location, e.ClipRectangle.Size);
        RealRect.Inflate(-1, -1);

        int Radius = Math.Min(RealRect.Size.Height, RealRect.Size.Width);
        System.Drawing.Rectangle SqRect = new System.Drawing.Rectangle();
        SqRect.Location = RealRect.Location;
        SqRect.Size = new System.Drawing.Size(Radius, Radius);

        System.Drawing.Drawing2D.CompositingQuality PrevQual = e.Graphics.CompositingQuality;
        using (System.Drawing.SolidBrush Back = new System.Drawing.SolidBrush(this.FillColor))
        {
            using (System.Drawing.Pen Pen = new System.Drawing.Pen(new System.Drawing.SolidBrush(this.BorderColor)))
            {
                //e.Graphics.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
                e.Graphics.FillEllipse(Back, SqRect);
                e.Graphics.DrawEllipse(Pen, SqRect);
            }
        }

        e.Graphics.CompositingQuality = PrevQual;
    }

    public Swatch()
    {
        this.SetStyle(System.Windows.Forms.ControlStyles.UserPaint, true);
        this.SetStyle(System.Windows.Forms.ControlStyles.OptimizedDoubleBuffer, true);
        this.SetStyle(System.Windows.Forms.ControlStyles.AllPaintingInWmPaint, true);
        this.SetStyle(System.Windows.Forms.ControlStyles.ResizeRedraw, true);
        this.SetStyle(System.Windows.Forms.ControlStyles.SupportsTransparentBackColor, true);
        this.DoubleBuffered = true;
    }
} 
```

每行都是一个 UserControl，它由一个 TableLayoutPanel、标签、一个 Swatch 控件和一个 NumericUpDown 框组成。

大约有 10 行，它们被放置在 TableLayoutPanel 中，它位于选项卡控件上的 TabPage 内。标签页已`AutoScroll`设置为`true`溢出导致标签页滚动。

**问题**是每当我运行应用程序并上下滚动时，色板（彩色圆圈）会撕裂并显示各种伪影，如上图所示。我想要干净的滚动，没有渲染工件。

我尝试过使用`SetStyle`（如这里建议[的以 Windows 形式绘制问题](https://stackoverflow.com/a/1287914)），但它没有任何效果。

UserControl（每行）已`DoubleBuffered`设置为`true`，这也没有任何效果。

我担心我错过了一些相当明显的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T23:05:50.307

问题是您根据剪切矩形计算圆的半径。因此，当线条仅部分可见时，会产生错误的值。

您应该根据基类提供的真实矩形计算它，并让它正常裁剪。

# java - 使用 JSOUP 解析 HTML 文档，无法选择表节点？

> ID：14130548
> 
> 赞同：1
> 
> 时间：2013-01-02T22:53:57.727
> 
> 标签：java, html, web-scraping, html-table, jsoup

我已经研究了几个带有类似问题的 Stack Overflow 主题。

我有以下问题：我有一个简单的 html 页面，下载并在本地保存为 .html 文件，我正在用 JSoup 解析它以读取该表的内容。不幸的是，当我用 .select("table") 查找我的表时，它没有返回任何元素。因此我已经对其进行了调试，我注意到的是......我的主体节点有一个子节点，它似乎完全是字符串，因此我假设我找不到任何表节点？

谁能帮帮我？

这是我的代码片段：

```
 for (Element table : doc.select("table.creditsuisse")) {
        for (Element row : table.select("tr")) {
            for (Element tds : row.select("td")){
                for(Element link : row.select("href")){
                    System.out.println(link.text());
                }
                System.out.println(tds.text());
            }
        }
    } 
```

这是我的输入文件的样子：

```
<html>
<head>
</head>
<body>
<table class="creditsuisse" width="100%" cellspacing="0" cellpadding="0">
      <tbody>
    <tr>
        <th>Name</th>
        <th style="width:170px;">Funktion</th>
        <th style="width:180px;">
        Amtsdauer (Seit)        </th>
        <th style="width:130px;">Alter (Geburtsdatum)</th>
        <th style="width:45px;">Neuigkeit</th>
      </tr>
            <tr>

          <td>
            <a onclick="document.location='/u/p/al_thani_jassim_hamad_j_j-9293792/credit_suisse_ag_CH-020.3.923.549-1.htm'" href="/u/p/al_thani_jassim_hamad_j_j-9293792/credit_suisse_ag_CH-020.3.923.549-1.htm">Al-Thani Jassim Hamad J.J.</a> *&nbsp;<br>

          </td>

          <td>
                          VR-Mitglied           
          </td>
                    <td><a onclick="document.location='http://www.moneyhouse.ch/u/pub/credit_suisse_ag_CH-020.3.923.549-1.htm#28.06.2010'" href="/u/pub/credit_suisse_ag_CH-020.3.923.549-1.htm#28.06.2010">2 Jahre (28.06.2010)</a></td>
                  <td>-</td>
          <td align="center"></td>
        </tr>
            <tr>

          <td>
            <a onclick="document.location='/u/p/albers_franz-4438178/credit_suisse_ag_CH-020.3.923.549-1.htm'" href="/u/p/albers_franz-4438178/credit_suisse_ag_CH-020.3.923.549-1.htm">Albers Franz</a> *&nbsp;<br>

          </td>

          <td>
                          VR-Mitglied           
          </td>
                    <td><a onclick="document.location='http://www.moneyhouse.ch/u/pub/credit_suisse_ag_CH-020.3.923.549-1.htm#04.05.1998'" href="/u/pub/credit_suisse_ag_CH-020.3.923.549-1.htm#04.05.1998">14 Jahre (04.05.1998)</a></td>
                  <td>-</td>
          <td align="center"></td>
        </tr>
     </tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:19:07.190

为了读取本地文件，`JSoup`您需要使用接受[对象的](http://jsoup.org/apidocs/org/jsoup/Jsoup.html#parse%28java.io.File,%20java.lang.String,%20java.lang.String%29)[parse 方法，`File`](http://jsoup.org/apidocs/org/jsoup/Jsoup.html#parse%28java.io.File,%20java.lang.String,%20java.lang.String%29)而不是接受 HTML 内容的方法。代替

```
Document doc = Jsoup.parse("C:\\...\\myFile.html", "UTF-8"); 
```

和

```
Document doc = Jsoup.parse(new File("C:\\...\\myFile.html"), "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:40:37.410

你是如何阅读你的文件的？如果它只是一个字符串，那么您需要先将其转换为“文档”您可以尝试这样的事情：

```
Document document = Jsoup.parse(YOUR_STRING);
Elements elements = document.getElementsByTag("table");
Element table = elements[0]; 
```

# java - 这个异常的原因是什么，java.io.IOException: Stream closed

> ID：14130552
> 
> 赞同：3
> 
> 时间：2013-01-02T22:54:10.543
> 
> 标签：java, file

我使用的 zip 文件中有 2 个文件：

```
while( (entry = zis.getNextEntry()) != null){
    if(entry.getName() == null ? gomrokcode != null : !entry.getName().equals(gomrokcode))
        maxversion=0;
    Scanner scanner = new Scanner(zis);
    while(scanner.hasNextLine()){
        line = scanner.nextLine();
    }
    scanner.close();
}
zis.close(); 
```

为了访问文件，我得到了第一个文件，然后当我返回到第二个文件的循环开始时，我得到了这个异常

```
 SEVERE: null
java.io.IOException: Stream closed
at java.util.zip.ZipInputStream.ensureOpen(ZipInputStream.java:66)
at java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:115) 
```

是什么原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T23:06:54.110

您使用 Scanner 包装您的`zis`流，当您关闭 Scanner 时，它将关闭`zis`流。因此例外。

如果您删除`scanner.close()`呼叫，我想迭代将继续进行。

# jquery - 带有 web 服务、ajax 和 json 的 jquery 自动完成不会以正确的方式返回值

> ID：14130553
> 
> 赞同：0
> 
> 时间：2013-01-02T22:54:14.950
> 
> 标签：jquery, json, jquery-autocomplete

我想使用 jquery 自动完成功能。数据来自一个以 json 格式返回数据的 web 服务。但相关 texbox 中的输出不起作用。我显示了完整的 json 数组。

请给我一个提示。

我的网络服务看起来像：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Script.Services;
using System.Web.Script.Serialization;
using System.Data.SqlClient;
using MySql.Data;
using MySql.Data.MySqlClient;
using System.Data;
using System.Configuration;

namespace WebApplication1
{
/// <summary>
/// Zusammenfassungsbeschreibung für WebService1
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]

[System.Web.Script.Services.ScriptService]

public class WebService1 : System.Web.Services.WebService
{

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string customer(string queryParam)
    {

 string conStr=
 ConfigurationManager.ConnectionStrings["mySql_classicmodels"].ConnectionString;

        MySqlConnection con = new MySqlConnection(conStr);
        MySqlCommand readCommand = new MySqlCommand("SELECT customerName, contactLastName, contactFirstName, phone   FROM customers where customerName like '%" + queryParam + "%'", con);
        MySqlDataAdapter adapter = new MySqlDataAdapter(readCommand);
        DataTable datatable = new DataTable();

        adapter.Fill(datatable);

        return DataTableToJSON(datatable);

    }

public static string DataTableToJSON(DataTable table)
{
List<Dictionary<string, object>> list = new List<Dictionary<string, object>>();

foreach (DataRow row in table.Rows)
{
    Dictionary<string, object> dict = new Dictionary<string, object>();

    foreach (DataColumn col in table.Columns)
    {
        dict[col.ColumnName] = row[col];
    }
    list.Add(dict);
}
JavaScriptSerializer serializer = new JavaScriptSerializer();
return serializer.Serialize(list);
}

}

} 
```

我的 ASP / JQuery 代码如下所示：

```
 $(document).ready(function () {
        $("#auto").autocomplete({
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    url: "Webservice1.asmx/customer",
                    dataType: "json",
                    data: '{ queryParam: "' + request.term + '" }',
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        response($.map(data, function (item) {
                            return {
                                value:item

                            }
                        }));
                    },
                    minLength: 2,
                    error: function (xhr, ajaxOptions, thrownError) {
                        alert(xhr.status);
                        alert(thrownError);
                        alert(xhr.responseText);
                    }
                });
            }
        })
    })

</script> 
```

我的结果是这样的：

```
[{"customerName":"Australian Collectors,  Co.","contactLastName":"Ferguson","contactFirstName":"Peter","phone":"03 9520 4555"},{"customerName":"Australian Gift Network, Co","contactLastName":"Calaghan","contactFirstName":"Ben","phone":"61-7-3844-6555"},{"customerName":"Australian Collectables, Ltd","contactLastName":"Clenahan","contactFirstName":"Sean","phone":"61-9-3844-6555"}] 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:52:49.783

因为您将整个对象设置为一个值。我相信这应该是一个字符串。尝试：

```
return { value: item.customerName }; 
```

# java - 如何保存矢量 > 变成一个 ArrayList？

> ID：14130559
> 
> 赞同：0
> 
> 时间：2013-01-02T22:54:53.160
> 
> 标签：java, android, vector, arraylist, vector-graphics

我有一个简单的问题，我无法解决。我有一个`Vector<Vector<PointF>>`要保存到 ArrayList 中的对象。我试过这样做：

```
ArrayList<Vector<Vector<PointF>>> my_arraylist = new ArrayList<Vector<Vector<PointF>>>(); 
```

并像这样保存：

```
 public void setMyArrayList(Vector<Vector<PointF>> polyLines) {
        my_arraylist.add(polyLines);
        this.my_arraylist = my_arraylist;
 } 
```

当我尝试获取 my_arraylist 中的特定元素时，我总是得到 my_arraylist 中的最后一个元素。有没有一种特定的方法可以将 a 保存`<Vector<Vector<PointF>>`到 ArrayList 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:06:22.463

我只看到你的初始化有一点问题

```
ArrayList<Vector<Vector<PointF>>> my_arraylist = new ArrayList<Vector<Vector<PointF>>>(); 
```

，并删除了一些不必要的代码：

```
public void setMyArrayList(Vector<Vector<PointF>> polyLines) {
    my_arraylist.add(polyLines);
} 
```

我看不出有什么理由，为什么这不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:02:03.580

所以你总是只得到你添加到 ArrayList 的最新元素？这表明在向 ArrayList 添加值之前，您要么 clear() ArrayList，要么创建一个全新的空 ArrayList。

您的问题不在您向我们展示的代码中。

尝试添加如下调试输出。如果每次调用 setMyArrayList 时写入 System.err 的对象引用都发生了变化，则表明您在某处创建了一个新的 ArrayList 并因此丢弃了您在那里添加的所有旧值。如果你有一个日志框架，请使用它。

```
public void setMyArrayList(Vector<Vector<PointF>> polyLines) {
    System.err.println("Appending to ArrayList " + my_arraylist + ", size " + my_arraylist.size());
    my_arraylist.add(polyLines);
    this.my_arraylist = my_arraylist;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:43:10.853

我解决了。我必须通过克隆数组来创建一个`Object`并存储在其中：`Vector`

```
Object temp = new Object();

temp =  polyLines.clone(); 
```

并将临时值存储在我的`Arraylist<Object>.`Convert it back to`Vector<Vector<PointF>>`每当我需要使用 arraylist 中的特定元素时。

# node.js - NodeJS UDP 多播如何

> ID：14130560
> 
> 赞同：31
> 
> 时间：2013-01-02T22:54:56.317
> 
> 标签：node.js, udp, socket.io, multicast

我正在尝试将 UDP 多播数据包发送到：230.185.192.108，这样每个订阅的人都会收到。有点卡住了。我相信它正在正确广播，但似乎无法与任何客户取得任何联系。

**服务器：**

```
var news = [
   "Borussia Dortmund wins German championship",
   "Tornado warning for the Bay Area",
   "More rain for the weekend",
   "Android tablets take over the world",
   "iPad2 sold out",
   "Nation's rappers down to last two samples"
];

var dgram = require('dgram'); 
var server = dgram.createSocket("udp4"); 
server.bind();
server.setBroadcast(true)
server.setMulticastTTL(128);
server.addMembership('230.185.192.108'); 

setInterval(broadcastNew, 3000);

function broadcastNew() {
    var message = new Buffer(news[Math.floor(Math.random()*news.length)]);
    server.send(message, 0, message.length, 8088, "230.185.192.108");
    console.log("Sent " + message + " to the wire...");
    //server.close();
} 
```

**客户**

```
var PORT = 8088;
var HOST = '192.168.0.102';
var dgram = require('dgram');
var client = dgram.createSocket('udp4');

client.on('listening', function () {
    var address = client.address();
    console.log('UDP Client listening on ' + address.address + ":" + address.port);
    client.setBroadcast(true)
    client.setMulticastTTL(128); 
    client.addMembership('230.185.192.108');
});

client.on('message', function (message, remote) {   
    console.log('A: Epic Command Received. Preparing Relay.');
    console.log('B: From: ' + remote.address + ':' + remote.port +' - ' + message);
});

client.bind(PORT, HOST); 
```

**参考**更多关于 NodeJS 数据报的信息

*   [http://nodejs.org/api/dgram.html](http://nodejs.org/api/dgram.html)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T02:45:41.470

**改变：**

```
client.addMembership('230.185.192.108'); 
```

到

```
client.addMembership('230.185.192.108',HOST); //Local IP Address 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-03-31T22:09:21.780

这个答案很旧，但在 Google 的搜索结果中显示很高。使用 Node v4.4.3，服务器示例失败并出现错误 EBADF。下面列出了完整的工作代码块：

**服务器：**

```
//Multicast Server sending messages
var news = [
   "Borussia Dortmund wins German championship",
   "Tornado warning for the Bay Area",
   "More rain for the weekend",
   "Android tablets take over the world",
   "iPad2 sold out",
   "Nation's rappers down to last two samples"
];

var PORT = 41848;
var MCAST_ADDR = "230.185.192.108"; //not your IP and should be a Class D address, see http://www.iana.org/assignments/multicast-addresses/multicast-addresses.xhtml
var dgram = require('dgram'); 
var server = dgram.createSocket("udp4"); 
server.bind(PORT, function(){
    server.setBroadcast(true);
    server.setMulticastTTL(128);
    server.addMembership(MCAST_ADDR);
});

setInterval(broadcastNew, 3000);

function broadcastNew() {
    var message = new Buffer(news[Math.floor(Math.random()*news.length)]);
    server.send(message, 0, message.length, PORT,MCAST_ADDR);
    console.log("Sent " + message + " to the wire...");
} 
```

**客户：**

```
//Multicast Client receiving sent messages
var PORT = 41848;
var MCAST_ADDR = "230.185.192.108"; //same mcast address as Server
var HOST = '192.168.1.9'; //this is your own IP
var dgram = require('dgram');
var client = dgram.createSocket('udp4');

client.on('listening', function () {
    var address = client.address();
    console.log('UDP Client listening on ' + address.address + ":" + address.port);
    client.setBroadcast(true)
    client.setMulticastTTL(128); 
    client.addMembership(MCAST_ADDR);
});

client.on('message', function (message, remote) {   
    console.log('MCast Msg: From: ' + remote.address + ':' + remote.port +' - ' + message);
});

client.bind(PORT, HOST); 
```

对于像我这样的新手来说，`client.bind(PORT,HOST);`这是重要的一点。绑定到 时我无法让客户端接收任何内容`HOST=127.0.0.1`，但在使用 IP 地址时工作。同样，如果排除 HOST，则在使用单机测试时示例将不起作用（客户端将抛出 EADDRINUSE 错误）

# php - Facebook PHP SDK 和页面标签；getUser() 在授权过程后总是返回 0

> ID：14130562
> 
> 赞同：0
> 
> 时间：2013-01-02T22:55:06.300
> 
> 标签：php, facebook, laravel

我是一名 PHP 开发人员，我对 Facebook PHP SDK 有很好的体验，但这次我迷路了 :(

我的问题如下：我正在使用 PHP 框架 Laravel 开发一个 facebook 页面选项卡应用程序。这是我的代码：

```
 //getting the Facebook class instance
    $facebook = IoC::resolve('facebook-sdk');

    if(!$facebook->getUser()){
        $pagetab_url = 'https://www.facebook.com/PAGEUSERNAME?sk=app_APPID';    

        $loginUrlParams = array(
               'scope' => 'publish_stream',
               'redirect_uri' => $pagetab_url
        );

        $loginUrl = $facebook->getLoginUrl($loginUrlParams);

        echo("<script> top.location.href='" . $loginUrl . "'</script>");
    }
    else{
        echo $facebook->getUser();
    } 
```

此代码生成一个无限循环，因为 $facebook->getUser() 总是返回零。AppId 和 AppSecret 是正确的，事实上，如果我将“redirect_uri”更改为我的应用程序域的任何页面，它都会起作用（例如：“redirect_uri”=>“ [https://www.mysite.com/fb_callback](https://www.mysite.com/fb_callback) ”）。

其他详细信息：签名的请求始终为空。你有什么主意吗？

非常感谢！

编辑这解决了我的问题 [Facebook iframe 选项卡签名请求始终为空](https://stackoverflow.com/questions/5253830/facebook-iframe-tab-signed-request-always-empty)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:06:31.433

我认为与其注入重新加载页面的脚本，不如让用户有机会登录到您的应用程序并对其进行授权。

我错过了什么吗？（除非用户登录并授权您的应用程序，否则您永远不会从 $facebook->getUser() 调用中获得结果）。

最后，有什么理由你不使用：

```
header('Location: '.$loginUrl) ? 
```

而不是注入javascript？

您是否在多台服务器上进行开发？（可能是本地主机和测试服务器？）另一种可能性是您正在两个不同的域上进行测试（例如 localhost 与 stage.whatever.com），并且您需要授予您的应用程序在这两个域上工作的权限。

基本上，从 getUser() 调用记录错误（如果有）并查看该输出是什么。

# php - 将文本区域逐行转换为数组，然后使用 Jquery 将其附加到 div？

> ID：14130563
> 
> 赞同：1
> 
> 时间：2013-01-02T22:55:06.893
> 
> 标签：php, javascript, jquery, html

我已经尝试了大量代码，并在 javascript 文件中将其注释掉。我想获取文本区域（由用户定义）的内容并将其转换为数组。然后，我将使用 for 循环将每个元素附加到新的 div。所有当 button1 被点击时。

我为此设置了一个jsfiddle

[http://jsfiddle.net/34uBW/1/](http://jsfiddle.net/34uBW/1/)

我看过这里的其他帖子，我想我错过了一些我需要使用 php 的东西吗？（以前从未使用过php）

谢谢

js看起来像这样

```
$(document).ready(function()
{

$('#button').click(function()
{    
     var toAdd = $('input[name=checkListItem]').val();
     var $newdiv = "<div class='draggable'>" + toAdd + "</div>";
     $("#1").append($($newdiv).draggable());

}
);

$('#button1').click(function()
{
   /* //var yes = $('input[name=myname]').val();
    //var yes = $('input[name=myname]').val().split('\n');
   var yes = document.getElementById('textarea').value.split('\n');
   //var yes = $('#textarea')[0].value.split('\n');        
   var $newdiv1 = "<div class='draggable'>" + yes[0] + "</div>";
    $("#1").append($($newdiv1).draggable());
    var lines = $('#textarea').val().split(/\n/);
    var texts = []
    for (var i=0; i < lines.length; i++) {
    // only push this line if it contains a non whitespace character.
    if (/\S/.test(lines[i])) {
    texts.push($.trim(lines[i]));
    }
    }

    alert(JSON.stringify(texts));​*/

}
);

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:03:27.680

这是你想要的吗？

```
var lines = $("textarea").val().split(/\n/g);      //Split the lines
for(var i=0; i < lines.length; i++){               //Loop through the Array
    var ele = $("<p>");                            // ├─ Create a node
    ele.html(lines[i]);                            // ├─ Put in the text
    $("#opt").append(ele);                         // └─ Append it
} 
```

[http://jsfiddle.net/DerekL/Ge2yF/](http://jsfiddle.net/DerekL/Ge2yF/)
[http://jsfiddle.net/DerekL/Ge2yF/16](http://jsfiddle.net/DerekL/Ge2yF/16)

这会将 textarea 的值通过`\n`（换行符）拆分为一个数组，然后将其附加到`div`.

# php - 使用 preg_replace_callback 将数字后面的字母大写

> ID：14130564
> 
> 赞同：0
> 
> 时间：2013-01-02T22:55:12.023
> 
> 标签：php, regex

我想将“5a”之类的模式转换为“5A”。此模式可能出现在较大字符串的开头或中间。我试过这个：

```
$string = preg_replace_callback("/(0-9)([a-z]) /", function($matches) {
  return $matches[1].strtoupper($matches[2]).' ';
}, $string); 
```

但它不起作用。没有错误 - 字符串保持为“5a”。你能看出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:58:28.373

```
/(0-9)([a-z]) / 
```

应该

```
/([0-9])([a-z]) / 
```

# intuit-partner-platform - 创建发票时是否可以选择税务机构？

> ID：14130566
> 
> 赞同：1
> 
> 时间：2013-01-02T22:55:26.333
> 
> 标签：intuit-partner-platform, quickbooks-online

在创建发票时，是否有办法联系我的客户税务机构？

我正在针对 QBO 使用 C# IPP DevKit。

我没有在文档中看到它，但是我无法想象我会被要求将所有客户的税表硬编码到我的应用程序中，因为这很愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:00:03.743

您正在寻找的（税率列表）并不是您真正要求的（税务机构）。

无论如何，这个线程回答你的问题： [https ://idnforums.intuit.com/messageview.aspx?catid=87&threadid=18930&enterthread=y](https://idnforums.intuit.com/messageview.aspx?catid=87&threadid=18930&enterthread=y)

不幸的是，答案是：

> 在当前的 SDK 或 Services V2 中，这是一个限制，即由于税收模型的更改，不保留税码 Id。此限制将在 QBO Service V3 中解决。

因此，您现在无法完成您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:52:12.620

我不确定您使用的是 QuickBooks Online 还是 Windows。无论哪种方式，税务机构很可能是客户 QuickBooks 文件中的供应商。

因此，使用 devkit 中的供应商查询来拉取供应商列表，然后您可以稍后使用 CDCasOf 过滤器来获取新的或修改过的供应商以保持最新状态。

此处列出了支持的对象和操作以供将来参考。

QBO：[链接](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0500_Supported_Entities_and_Operations "QBO")
QBD：[链接](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference "QBD")

问候，
杰瑞德

# java - 将json解析为java中的哈希

> ID：14130568
> 
> 赞同：0
> 
> 时间：2013-01-02T22:55:30.893
> 
> 标签：java, json

我是 Java 新手，无法直接思考这个问题。

我有一个包含 json 对象的文本文件：

```
{"from":"1","to":["a","b"]} 
```

等等

我想将这些文件加载​​到哈希图中，以便“from”部分是键，“to”部分是值。我确定我在问一个非常愚蠢的问题，但是关于如何有效地做到这一点有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:57:52.977

您可以使用[杰克逊](http://wiki.fasterxml.com/JacksonInFiveMinutes)：

```
// (1) deserialize JSON
ObjectMapper mapper = new ObjectMapper(); // can reuse, share globally
HashMap map = mapper.readValue(
    "{\"from\":\"1\",\"to\":[\"a\",\"b\"]}", HashMap.class);

// (2) reorder stuff (use a new Map object if needed, or delete obsolete keys)
map.put(map.get("from"), map.get("to")); 
```

输出将是：

```
{to=[a, b], 1=[a, b], from=1} 
```

或者

```
{1=[a, b]} 
```

如果您要在 (2) 中创建一个新的地图对象。至于效率，解析比较重的部分交给Jackson来处理，

> ... 旨在为开发人员提供快速、正确、轻便和符合人体工程学的最佳组合。

# android - 服务在不应该时启用

> ID：14130569
> 
> 赞同：1
> 
> 时间：2013-01-02T22:55:34.893
> 
> 标签：android

我为我的应用程序添加了一个小部件，基本上点击小部件可以启用服务。但有时即使我没有按下小部件，我也会随机启用服务

我按照android开发人员指南制作小部件，代码如下所示

```
public class ToggleWidget extends AppWidgetProvider {

    static RemoteViews remoteViews;
    boolean status = false;

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

        final int N = appWidgetIds.length;

        // Perform this loop procedure for each App Widget that belongs to this provider
        for (int i=0; i<N; i++) {
            int appWidgetId = appWidgetIds[i];

            remoteViews = new RemoteViews(context.getPackageName(), R.layout.toggle_widget);
            Intent intent = new Intent(context.getApplicationContext(), WakeService.class);
            intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
            PendingIntent pendingIntent = PendingIntent.getService(
                    context.getApplicationContext(), 0, intent,
                    PendingIntent.FLAG_UPDATE_CURRENT);
            remoteViews.setOnClickPendingIntent(R.id.bulb_widget, pendingIntent);
            appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);

            context.startService(intent);

            Log.w(getClass().getName(), "Widget Worked");

         // Tell the AppWidgetManager to perform an update on the current app widget
            appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
        }
    }

} 
```

当我单击 ImageButton 时，此代码应运行服务意图。单击它可以正常工作，但是我得到了那些随机启用（该服务在启用时会显示一条通知，所以我知道它正在运行）您能在代码中发现一些错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:11:17.977

取出

```
context.startService(intent); 
```

由于在`PendingIntent`单击小部件时已经启动了服务，因此无论是否单击小部件，显式`context.startService()`in都会使服务启动。`onUpdate()`

# javascript - 在谷歌地图 api 3 中切换位置

> ID：14130570
> 
> 赞同：2
> 
> 时间：2013-01-02T22:55:48.233
> 
> 标签：javascript, jquery, google-maps

我有一个自定义样式的地图，它工作得很好，我想知道我是否可以使用页面中的一些链接以某种方式控制地图的位置，假设我有 2 个位置，我想要

```
<a href="#" id="locaation1">Location1</a> 
```

&

```
<a href="#" id="locaation2">Location2</a> 
```

然后，当我单击位置 1 时，地图会转到该位置，并且位置 2 的故事相同，是否可以使用 jquery？如果我也可以为每个位置添加自定义标记，那也很棒。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T23:06:11.830

是的，你甚至可以在没有 jquery 的情况下做到这一点，panto 方法就是你想要使用的，基本上， [https://developers.google.com/maps/documentation/javascript/reference#Map](https://developers.google.com/maps/documentation/javascript/reference#Map) ，只需将一个预定义函数的调用添加到您的锚点 onclick 事件（或使用 jquery 中的单击处理程序将其连接起来）。

使用 jquery，你需要类似的东西：

```
$("#location1").click(function(){
   var pos = new google.maps.LatLng(-25.363882, 131.044922),
   g_map.panTo(pos);  //reference to globally defined google maps object
}); 
```

这是 google api 文档中的一个简单示例，可以使用我上面提供的提示轻松进行改造：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/event-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/event-simple)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:06:34.360

如果您的地图实例名为“地图”，您可以使用：

`<a href="#" onclick="map.setCenter(new google.maps.LatLng(lat, long))" id="location1">Location1</a>`

# android - Android - 平铺图像按钮

> ID：14130571
> 
> 赞同：2
> 
> 时间：2013-01-02T22:55:52.780
> 
> 标签：android, android-relativelayout, imagebutton

我正在尝试平铺图像按钮，使其在 Android 中看起来像这样：

[![平铺图像按钮](../Images/f059092e8516d117a3398f1434ab74e2.png)](https://i.stack.imgur.com/xm2TN.png) .

为了实现这一点，我尝试使用它`RelativeLayout`，但没有任何成功。

我使用的 XML 布局如下：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal" android:layout_width="match_parent"
        android:layout_height="match_parent">

        <ImageButton android:id="@+id/ibutton1" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:src="@drawable/ic_launcher"></ImageButton>

        <ImageButton android:id="@+id/ibutton2" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:layout_below="@+id/ibutton1"  
            android:src="@drawable/ic_launcher"></ImageButton>

        <ImageButton android:id="@+id/ibutton3" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:layout_toRightOf="@+id/ibutton1" 
            android:src="@drawable/ic_launcher"></ImageButton>

        <ImageButton android:id="@+id/ibutton4" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:layout_toRightOf="@+id/ibutton2" 
            android:src="@drawable/ic_launcher"></ImageButton>

    </RelativeLayout> 
```

实现这一目标的正确方法是什么？

附加问题：有没有办法以编程方式执行此操作？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T11:08:30.253

您是否尝试过使用 LinearLayout 并在使用 ImageButton 属性后？在 ImageButton 的属性中有 Margin --> Left,Top 等，您可以在此处放置所需的距离对象。

我使用了本教程：[http ://www.youtube.com/watch?v=nCadO2NgzD0](http://www.youtube.com/watch?v=nCadO2NgzD0)

# python - 覆盖 Django 用户管理器以仅返回查询中的活动用户

> ID：14130576
> 
> 赞同：4
> 
> 时间：2013-01-02T22:56:23.470
> 
> 标签：python, django, django-models, django-queryset

需要一种方法来调用`User.objects.filter/get`仅返回`is_active`设置为 True 的用户对象。

我尝试定义一个自定义 Manager 并将其修补到 User 模型上，如下所示：

```
class CustomUserManager(UserManager):

    def get_query_set(self):
        return super(CustomUserManager, self).get_query_set().
          filter(is_active=True)

User.objects = CustomUserManager()
User.objects_all = UserManager() 
```

但是，当我尝试调用 User.objects.get() 时，我得到：
`AttributeError: 'NoneType' object has no attribute '_meta'`

在我进一步讨论之前，我想说我知道像这样的猴子补丁在可维护性方面是非常糟糕的形式——这将被标记为稍后重新访问，但现在我们需要一个快速的解决方案。

这是完整的堆栈跟踪，如果有人也想要的话：

```
 File "<console>", line 1, in <module>
  File "/Users/zarathustra/Virtual_Envs/fierce-spring-7383/venv/lib/python2.7/site-packages/django/db/models/manager.py", line 131, in get
    return self.get_query_set().get(*args, **kwargs)
  File "/Users/zarathustra/Virtual_Envs/fierce-spring-7383/venv/lib/python2.7/site-packages/django/db/models/query.py", line 358, in get
    clone = self.filter(*args, **kwargs)
  File "/Users/zarathustra/Virtual_Envs/fierce-spring-7383/venv/lib/python2.7/site-packages/django/db/models/query.py", line 621, in filter
    return self._filter_or_exclude(False, *args, **kwargs)
  File "/Users/zarathustra/Virtual_Envs/fierce-spring-7383/venv/lib/python2.7/site-packages/django/db/models/query.py", line 639, in _filter_or_exclude
    clone.query.add_q(Q(*args, **kwargs))
  File "/Users/zarathustra/Virtual_Envs/fierce-spring-7383/venv/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1250, in add_q
    can_reuse=used_aliases, force_having=force_having)
  File "/Users/zarathustra/Virtual_Envs/fierce-spring-7383/venv/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1114, in add_filter
    opts = self.get_meta()
  File "/Users/zarathustra/Virtual_Envs/fierce-spring-7383/venv/lib/python2.7/site-packages/django/db/models/sql/query.py", line 233, in get_meta
    return self.model._meta
AttributeError: 'NoneType' object has no attribute '_meta' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:02:12.653

是否需要将过滤器应用于用户模型？你为什么不尝试对这个模型进行子类化呢？并为这个模型编写一个管理器。

```
class CustomUserManager(UserManager):

    def get_query_set(self):
        return super(CustomUserManager, self).get_query_set().
          filter(is_active=True)

class MyUser(User):
    objects = CustomUserManager()

# get an active user which username is 'foo'
MyUser.objects.get(username='foo') 
```

或使用[代理模型](https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:26:40.093

[在这篇文章](https://stackoverflow.com/questions/531892/django-perform-case-insensitive-lookups-by-default?rq=1)中找到了答案。由于他的问题是具体的，而我的问题是一般性的，我不认为它们是重复的，但他的问题的答案也回答了我的问题。

# asp.net-mvc - 使用 smtp 发送电子邮件仅在通过 Outlook 发送后有效

> ID：14130579
> 
> 赞同：4
> 
> 时间：2013-01-02T22:56:40.387
> 
> 标签：asp.net-mvc, c#-4.0, smtpclient, smtp-auth

我正在尝试使用 asp.net mvc 应用程序发送电子邮件。SMTP 客户端在 web.config 中配置，例如：

```
<mailSettings>
    <smtp from="noreply@test.sk">
        <network host="mail.test.sk" defaultCredentials="false" userName="noreply@test.sk" password="pass" port="25"/>
</smtp>
</mailSettings> 
```

C＃：

```
using (SmtpClient client = new SmtpClient())
{
    MailMessage message = new MailMessage(from, to, subject, body);
    client.Timeout = 10000;
    client.Send(message);
    return false;
} 
```

问题是，在我尝试使用 Outlook 发送电子邮件之前，它不起作用（我得到超时异常）。通过 Outlook 发送电子邮件后，它也通过我的 Web 应用程序成功发送。是否有某种特殊类型的身份验证，Outlook 正在执行该身份验证，然后允许对来自我 IP 的所有电子邮件进行身份验证？是什么原因只能通过outlook发送后才起作用？

顺便说一句：我在 VS asp.net 开发服务器中运行该应用程序。当我将它部署到虚拟主机服务器时，它不起作用（超时）。我的虚拟主机提供商告诉我，该服务器上有一个经典的 smtp 身份验证（不是 smtp 之前的 pop3）。

**编辑：**

我发现，当它工作时，我通过 telnet 尝试或通过 wireshark 跟踪它，通信开始于：

```
220 mail2.hostmaster.sk ESMTP Postfix
EHLO fernet-PC
250-mail2.hostmaster.sk
250-PIPELINING
250-SIZE 104857600
250-ETRN
250-STARTTLS
250-AUTH PLAIN LOGIN
250-AUTH=PLAIN LOGIN
250-ENHANCEDSTATUSCODES
250-8BITMIME
250 DSN
... 
```

与它不起作用时（前一天刚尝试过）相比，整个通信看起来像：

```
220-mail2.hostmaster.sk ESMTP Postfix
EHLO fernet-PC
250-mail2.hostmaster.sk
250-SIZE 104857600
250-ETRN
250-STARTTLS
250-ENHANCEDSTATUSCODES
250-8BITMIME
250 DSN 
```

所以支持的身份验证方法和对流水线的支持是有区别的。我猜 System.Net.Mail.SmtpClient 然后不知道它应该使用哪种身份验证方法，所以它卡住了，因此我得到了超时异常。

有趣的是，Outlook 连接和发送电子邮件没有问题。

我没有使用他们的 smtp 服务器解决了我的问题，因为我的时间不多了。我正在使用 gmail 的 smtp 服务器。我创建了新的 gmail 帐户，并在其中将别名设置为我需要的内容，因此电子邮件看起来好像不是来自 gmail。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T10:59:14.070

我在一个网站上修复了一个类似的问题，并在研究这个问题时遇到了这个问题。

以下代码适用于 Google Apps for Business；

```
public class SendSMTPEmail
    {
    public static void SendText(string ToName, string ToEmail, string FromName, string FromEmail, string Subject, string Content)
    {
        MailAddress from = new MailAddress(ToEmail, ToName);
        MailAddress to = new MailAddress(ToEmail, ToName);

        var smtp = new SmtpClient
        {
            Host = "smtp.gmail.com",
            Port = 587,
            EnableSsl = true,
            DeliveryMethod = SmtpDeliveryMethod.Network,
            Credentials = new NetworkCredential("username@googlemail.com", "yourpassword"),
            Timeout = 20000
        };

        MailMessage message = new MailMessage()
        {
            From = from,
            Body = Content,
            Subject = Subject
        };

        message.To.Add(to);

        smtp.Send(message);

    }
} 
```

这有帮助吗？

# maven - 使用 maven 和 Intellij IDEA，如何修改依赖项而不需要每次都手动安装？

> ID：14130580
> 
> 赞同：5
> 
> 时间：2013-01-02T22:56:41.160
> 
> 标签：maven, intellij-idea

我正在使用 Intellij-IDEA 11。如果有适用于 12 的解决方案，我愿意为此进行升级。

我构建了一个很多项目都依赖的库，但库经常更改。该库作为正常依赖项添加到我的项目的 pom.xml 中：

```
 <dependency>
        <groupId>my.company</groupId>
        <artifactId>MyLibrary</artifactId>
    </dependency> 
```

这是我在项目中添加功能时需要采取的一系列典型步骤：

1.  修改我项目中的一些代码
2.  修改我所依赖的库中的一些代码
3.  检查该功能是否有效
4.  如果没有，请重复

在我的 IDE（恰好是 Intellij-IDEA）之外，这是一个简单的过程：我添加步骤 2.5，即 cd 到依赖项的项目文件夹，然后`mvn install`是库。

但我不知道在 Intellij-IDEA 中执行此操作的便捷方法。理想情况下，我会在 Intellij 中修改库的源代码，单击绿色的播放按钮，IDE 会找出使用修改后的库源代码。

现在，由于该库是一个依赖项，它只使用我本地存储库中已有的内容。因此，在我手动修改库的源代码之前，它不会产生影响`mvn install`。

> 注意：我想出了一个似乎有效的技巧。如果我修改项目的父 pom 以将库包含为 maven 模块，然后包含与 intellij 模块相同的库，它会使用该源而不是本地 repo 中的 jar。但我不喜欢这个解决方案，因为我永远不想提交修改后的 pom（因为模块必须指向只存在于我的本地文件系统上的文件系统路径）。

我在 Intellij-IDEA 错误跟踪器中发现了一个似乎与此相关的错误：http: [//youtrack.jetbrains.com/issue/IDEA-25146](http://youtrack.jetbrains.com/issue/IDEA-25146)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T20:55:26.083

我找到了一种方法来做到这一点。首先，在 Maven 项目工具窗口中添加库的 pom.xml。然后您编辑您的配置，以便它们运行您的库的安装目标。下面提供了如何执行此操作的图像。

[单击此处获取完整大小的链接](https://i.stack.imgur.com/8Wold.png) ![如何在运行之前安装库](../Images/e50307863959b2ca4b31c8dbe41b7045.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:02:25.707

打开模块设置（模块上的 F4），转到模块，选择模块中依赖于您的库的依赖项选项卡。

如果库是模块添加模块依赖如果库不是模块，我假设它被构建并放在某个地方，将该目录添加到模块依赖项。

列表越高，其优先级越高

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:45:54.540

我有类似的架构，这就是我所做的（而且效果很好）。

1.  基于我的主项目的pom.xml创建一个IDEA maven项目（项目使用频繁变化的库）。
2.  将maven项目添加到我的主项目中（点击maven项目选项卡中的“+”图标并选择我经常更改的库的pom.xml）

**编辑**

**注意：**所有模块（来自库和主项目）都有一个 *-SNAPSHOT 版本

更详细地说，我的图书馆项目的 pom.xml ：

```
<groupId>com.company</groupId>
<artifactId>mylibrary</artifactId>
<version>2.0.1-SNAPSHOT</version> 
```

还有我主要项目的 pom.xml

```
<groupId>com.company</groupId>
<artifactId>myproject</artifactId>
<version>1.1-SNAPSHOT</version>
<dependencies>
    <dependency>
        <groupId>com.company</groupId>
        <artifactId>mylibrary</artifactId>
        <version>2.0.1-SNAPSHOT</version>
    </dependency>
</dependencies> 
```

我认为 IDEA 足够聪明，可以看到依赖项是 SNAPSHOT，并且该库位于当前的 IDEA 项目中（即相同的 IDEA 窗口）......因此 IDEA 不要查看本地存储库，因为 SNAPSHOT 在当前的“工作区”。

希望它澄清情况。

如果我需要运行某些东西，我也有不同的选择

1.  在 IDEA 中定义一个新的*maven 运行配置*，以使用任何配置文件运行任何 maven 目标（来自我的 IDEA 项目中的任何 pom.xml）。
2.  在 IDEA 中定义一个简单的*单元测试配置*（除了 classpath 是从 pom.xml 中定义的 classpath 派生出来的，不直接与 maven 链接）
3.  在 IDEA 中定义一个新的*Tomcat/JBoss 配置*并在其中部署一些工件。（IDEA 从 pom.xml 中检测可部署的工件，例如 war 或 ejb）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-15T05:51:11.357

我的情况和你一样，我使用的是 Intellij 2016.02。

这是我解决它的方法：

1 - 在 Intellij 上打开 maven 面板，转到 View -> Tool Windows -> Maven Projects，然后单击加号绿色按钮（添加 maven 项目）并从依赖项项目中选择 pom.xml 文件

2 - 在运行/调试配置设置中，添加一个启动前任务作为 Maven 目标，选择依赖项目的工作目录，然后在命令行中键入“安装”。

3 - 现在编辑您的依赖项目中的任何内容，并重新部署您的主应用程序，更改可能会影响。

**编辑：**

我找到了一个新的解决方案，它解决了“更新类和资源”的缺点，这就是我所做的：

1 - 执行上一个解决方案的第一步，但如果您在步骤 2 中添加安装目标，请从启动前任务中删除它。

2 - 编辑分解的工件，并将“可用元素”面板中的依赖项目“编译输出”元素添加到输出左侧面板。

更改可能无需安装即可工作，现在我的“更新类和资源”就像一个魅力:)

# java - TeeChart切换图表类型丢失Legend

> ID：14130590
> 
> 赞同：0
> 
> 时间：2013-01-02T22:57:17.777
> 
> 标签：java, android, teechart

在我正在开发的 Android 应用程序中，我有一个微调器，您可以在其中选择不同数据的不同视图。目前大多数图形类型都是 Pie，这可以正常工作。如果我也从 Pie 切换到 Line，那就可以了。但是，如果我从该折线图切换回饼图，图表显示正常，但图例仅显示“系列 0”。切换回折线图显示图例 ok。

这是它的外观：

![问题](../Images/4f53d607ed98b39f494718ab851dab4a.png)

这是设置图表基础的代码：

```
 //set up the TeeChart basics
LinearLayout group = (LinearLayout) view.findViewById(R.id.linearLayoutTchart);
chart = new TChart(PainRecordSummary_ViewPager.this);
group.addView(chart);
chart.getPanel().setTransparent(true);

//default 3D to true (will need to reset per chart)
chart.getAspect().setView3D(true); 
```

这是处理切换图表类型的代码：

```
 switch (graphType) {
case 0: // Location PIE CHART
if(PLS.getLocation() != null){
Pie pieLocation = new Pie(chart.getChart());

chart.removeLegendResolver();
chart.removeAllSeries();
chart.getAspect().setView3D(true);
try {
series = Series.createNewSeries(chart.getChart(), Pie.class,  null);
                } catch (InstantiationException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } catch (IllegalAccessException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

for(int i=0; i<PLS.getLocation().size(); i++){
    series.add(PLS.getLocation().get(i).getItemPercent(), PLS.getLocation().get(i).getLocation());
}
pieLocation.add(series);
ColorPalettes.applyPalette(chart.getChart(), Theme.ModernPalette);
chart.getLegend().setAlignment(LegendAlignment.BOTTOM);
chart.getHeader().setVisible(false);
chart.getPanel().setTransparent(true);
chart.getWalls().getBack().setVisible(true);
((com.steema.teechart.styles.Pie)chart.getSeries(0)).setCircled(true);
((com.steema.teechart.styles.Pie)chart.getSeries(0)).getMarks().setVisible(false);
((com.steema.teechart.styles.Pie)chart.getSeries(0)).setExplodeBiggest(12);
((com.steema.teechart.styles.Pie)chart.getSeries(0)).getPen().setVisible(false);
}else{
//show no data
}
break;
case 5: //this will display a TIME SERIES of Pain Locations AVG. SEVERITY
chart.removeAllSeries();
chart.getAspect().setView3D(false);
//X AXIS
//set the x-axis date display to e.g. '01-JAN'
chart.getAxes().getBottom().getLabels().setDateTimeFormat("dd-MMM");
//set the angle of the date display
chart.getAxes().getBottom().getLabels().setAngle(45);
//Y AXIS
//set up the y axis title
AxisTitle yTitle;
yTitle=chart.getAxes().getLeft().getTitle();
yTitle.setCaption("Severity");
//end title
//set y to increment by 1
//override the auto min/max and set to 0/10
chart.getAxes().getLeft().setIncrement(1.00);

for(int i=0; i<PLR.size(); i++){
    Series ln = new Line(chart.getChart());
    ln.setTitle(PLR.get(i).getName());
    SeriesPointer tmpPointer;
    tmpPointer = ((CustomPoint)ln).getPointer();
    tmpPointer.setInflateMargins(true);
    tmpPointer.setStyle(PointerStyle.CIRCLE);
    tmpPointer.setVisible(true);
    for(int j=0; j<PLR.get(i).getItems().size(); j++){
        DateTime dt = new DateTime(
   DateDiff.getYearFromString(PLR.get(i).getItems().get(j).getDateRecord()),
   DateDiff.getMonthFromString(PLR.get(i).getItems().get(j).getDateRecord()),
   DateDiff.getDayFromString(PLR.get(i).getItems().get(j).getDateRecord()));

   ln.add(dt, (double)PLR.get(i).getItems().get(j).getSeverity().intValue());
    }
    ((com.steema.teechart.styles.Line)chart.getSeries(i)).getLinePen().setWidth(2);
} 
```

任何人都知道为什么那个传奇没有重新填充？我已经尝试了很多东西试图使图例无效或清除它，但无济于事。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:15:05.707

在显示 Line 系列时尝试将 LegendStyle 强制为 LegendStyle.SERIES：

```
tChart1.getLegend().setLegendStyle(LegendStyle.SERIES); 
```

并在显示您的 Pie 系列时显示 LegendStyle.VALUES：

```
tChart1.getLegend().setLegendStyle(LegendStyle.VALUES); 
```

刚刚在 Steema 支持论坛中回答了同样的[问题](http://www.teechart.net/support/viewtopic.php?f=10&t=13764&p=60324#p60324)。

# web-crawler - 创建机器人/爬虫

> ID：14130591
> 
> 赞同：2
> 
> 时间：2013-01-02T22:57:25.483
> 
> 标签：web-crawler, dart

我想制作一个小机器人，以便在一些合作伙伴网站上自动进行牙周冲浪。这将为这里的许多员工节省几个小时。

机器人必须能够：

*   连接到该网站，其中一些以用户身份登录，访问和解析网站上的特定信息。
*   该机器人必须集成到我们的网站并使用我们网站的数据更改其设置（使用的用户……）。最终它必须总结解析信息。
*   最好此操作必须从客户端完成，而不是在服务器上。

我上个月试过飞镖，很喜欢……我想用飞镖来做。

但是我有点迷茫：我可以为每个要解析的网站使用 Document 类对象吗？可能是无头的还是我应该使用 chrome/dartium api 来控制网络浏览器（我想避免这种情况）？

我一直在阅读这个帖子：[https](https://groups.google.com/a/dartlang.org/forum/?fromgroups=#!searchin/misc/crawler/misc/TkUYKZXjoEg/Lj5uoH3vPgIJ) ://groups.google.com/a/dartlang.org/forum/?fromgroups=#!searchin/misc/crawler/misc/TkUYKZXjoEg/Lj5uoH3vPgIJ 使用[https://github。 com/dart-lang/html5lib](https://github.com/dart-lang/html5lib)对我来说是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T08:15:16.650

这有两个部分。

1.  从远程站点获取页面。
2.  将页面读入一个可以解析的类。

对于第一部分，如果您计划运行此客户端，则可能会遇到跨站点问题，因为您的页面从服务器 X 提供，无法从服务器 Y 请求页面，除非设置了正确的标头.

请参阅：[CORS 与 Dart，我如何让它工作？](https://stackoverflow.com/questions/10456591/cors-with-dart-how-do-i-get-it-to-work) Dart 应用程序和[跨域策略](https://stackoverflow.com/questions/14021021/dart-application-and-cross-domain-policy) 或相关站点需要返回正确的[CORS 标头](http://www.html5rocks.com/en/tutorials/cors/)。

假设您实际上可以从远程站点客户端获取页面，您可以使用 HttpRequest 来检索实际内容：

```
// snippet of code...
new HttpRequest.get("http://www.example.com", (req) {
  // process the req.responseText
}); 
```

您也可以使用`HttpRequest.getWithCredentials`. 如果该站点有一些自定义登录，那么您可能会遇到问题（因为您可能不得不将您站点的用户名和密码 Http POST 到他们的服务器 -

这是第二部分的时候。您可以使用`DocumentFragment.html(...)`构造函数处理您的 HTML，它为您提供了一个可以迭代和递归的节点集合。下面的示例显示了一个静态 html 块，但您可以使用从`HttpRequest`上面返回的数据。

```
import 'dart:html';

void main() {
  var d = new DocumentFragment.html("""
    <html>
      <head></head>
      <body>Foo</body>
    </html>
  """);

  // print the content of the top level nods
  d.nodes.forEach((node) => print(node.text)); // prints "Foo"
  // real-world - use recursion to go down the hierarchy.

} 
```

我猜（之前没有写过蜘蛛）你会想要在特定位置/深度提取特定标签以总结为你的结果，并将 <a> 超链接中的 url 添加到你的机器人将导航到。

# android - ORMLite 如何进行这个查询？

> ID：14130595
> 
> 赞同：0
> 
> 时间：2013-01-02T22:57:56.880
> 
> 标签：android, android-sqlite, ormlite

我想做这个查询：

```
SELECT * FROM table_one INNER JOIN table_two ON
    table_one.column_foreign_id = table_two.id WHERE table_two.column_one
    <= table_two.column_two AND table_one.column_one = [param]; 
```

我试过了：

```
QueryBuilder<TableTwo, Integer> tableTwoQb = getTableTwoDao().queryBuilder();
tableTwoQb.selectColumns(TableTwo.COLUMN_ONE, TableTwo.COLUMN_TWO); 
QueryBuilder<TableOne, Integer> tableOneQb = getTableOne().queryBuilder();
SelectArg columnOneSelectArg = new SelectArg();
tableOneQb.where().eq(TableOne.COLUMN_ONE, columnOneSelectArg);
tableOneQb.join(tableTwoQb); 
```

但我不能`WHERE`在`table_two`.

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:08:30.087

我认为这是你想要完成的

```
tableOneQb.where().le(columnOneSelectArg, columnTwoSelectArg).and().eq(columnOneSelectArg, "something"); 
```

乐是 <=

如果这没有帮助，请尝试在[这里查看。](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/Where.html)

# php - PCRE 模式修饰符常量，它们在哪个范围内可见？

> ID：14130601
> 
> 赞同：1
> 
> 时间：2013-01-02T22:58:47.940
> 
> 标签：php, constants, pcre

在阅读有关[PCRE 模式修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)的信息时，我注意到每个修饰符都有一个我熟悉使用的字符串文字和一个常量，我认为这是一个公平的游戏作为一个明确的替代方案。

然而，当提到这些常数时，这样说

`echo PCRE_CASELESS === "i";`

我收到这个错误

`PHP Notice: Use of undefined constant PCRE_CASELESS - assumed 'PCRE_CASELESS'`

仔细阅读手册，我注意到它说

`The names in parentheses refer to internal PCRE names for these modifiers`

对内是什么？文档列出它们的事实使我假设它们在全球范围内以某种方式可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:06:01.900

该文档指的是底层 PCRE 库内部使用的名称，无法从 PHP 用户空间直接访问。这些名称只是为了方便文档中的原因。

您将修饰符指定为实际正则表达式的一部分 - 例如，如果您想使用无大小写修饰符 (i)，您将使用`/regex/i`：

```
preg_match('/pattern/i', ...); 
```

请参阅[http://php.net/manual/en/regexp.reference.delimiters.php](http://php.net/manual/en/regexp.reference.delimiters.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:04:10.933

pcre 库内部。它们不会暴露于 php 用户空间代码。它们出现在手册中仅为那些知道库本身的常量或其他语言实现的人提供信息。因此，看到“PCRE_CASELESS”并知道发生了什么，而无需再次阅读整个文本。

# javascript - iPad 上不显示下拉菜单

> ID：14130603
> 
> 赞同：0
> 
> 时间：2013-01-02T22:59:00.777
> 
> 标签：javascript, jquery, css, ipad, mobile-safari

我正在构建一个网站时遇到问题，在 iPad 上查看时下拉菜单并不总是显示。该网站可以在这里找到：http: [//bit.ly/RtGfPn](http://bit.ly/RtGfPn)

要查看菜单，iPad 应该是横向的。导致问题的是导航栏（即男性、女性、品牌）

下拉菜单似乎只适用于某些页面，即使那样它似乎也有点不一致。在桌面浏览器上似乎总是很好。

有谁知道为什么菜单有时只显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:59:36.817

不久前，我遇到了类似的问题，添加`"onClick="return true"`到我的顶级导航项目似乎会强制打开子菜单。

# android - onResume 之后调用的方法？

> ID：14130608
> 
> 赞同：0
> 
> 时间：2013-01-02T22:59:28.637
> 
> 标签：android, orientation

不幸的是，在方向更改时，Android 中会丢失很多信息，因此必须对其进行重建。我有一个计算器类型的应用程序，它使用存储在布局中的用户输入数据的信息进行计算，并且在方向更改时，Android 会为我恢复布局数据。问题是在 onResume 中我调用了一个方法来重新计算数据以重置显示，因为这会在方向更改中丢失。但是，似乎在 Android 恢复数据之前调用了 onResume。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:05:03.827

问题是，android 不会为您恢复数据。轮换后，您的活动将重新创建。

您应该将数据保存在 onSaveInstanceState() 并从 [onRestoreInstanceState中恢复](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)

根据文档，onResume 在 onRestoreInstanceState 之后立即被调用。

# ant - 如何将 zipfile 集的所有元素移动到前缀目录

> ID：14130615
> 
> 赞同：0
> 
> 时间：2013-01-02T23:00:34.690
> 
> 标签：ant, zip

我有一棵树，我想将其压缩并展平到一个目录中。例如，

```
lib/a/x.jar
lib/y.jar 
```

我想最终在 zip 的 lib 目录中，如下所示：

```
lib/x.jar
lib/y.jar 
```

我尝试了以下方法：

```
<zipfileset  dir="lib" prefix="lib">
    <include name="**/*.jar"  />
</zipfileset> 
```

但这会导致 zip 文件中出现相同的树。我知道我可以定义单独的文件集，但这似乎很糟糕，因为如果我将另一个 jar 目录添加到 lib 目录（即，它不是非常面向对象），我将不得不添加一个文件集并且很容易将新目录从 zip 中删除。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T23:41:59.137

```
try this 
<include name="*.jar"/> 
instead of 
<include name="**/*.jar"  /> 
```

# javascript - javascript 或 jquery regxp

> ID：14130618
> 
> 赞同：-2
> 
> 时间：2013-01-02T23:01:16.497
> 
> 标签：javascript, jquery, regex

我需要使用 JavaScript 或 jQuery 从给定值中获取 ID。值为`"name (id)"`, name 可以是`"a-zA-Z0-9._"`id 唯一的数字。

例如它可以是

```
test (123)
   or
test_456.123 (456) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:05:07.543

一种选择（使用正则表达式）：

```
var str = "test_456.123 (456)",
    id = (str.match(/\((\d+)\)$/) || []).pop();

console.log(id);  // "456" 
```

另一种选择（没有正则表达式）：

```
var str = "test_456.123 (456)",
    id = parseInt(str.split("(").pop(), 10);

console.log(id);  // 456 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:03:48.547

正则表达式：`/([a-zA-Z0-9\._]+)\ (\(\d+\))/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T23:05:03.523

```
var id = value.replace(/[a-zA-Z0-9._]+\(([0-9]+)\)/gi, "$1") 
```

# vba - 在 Lotus-Notes、VBA 中模拟单击按钮

> ID：14130621
> 
> 赞同：1
> 
> 时间：2013-01-02T23:01:43.070
> 
> 标签：vba, lotus-notes

我在 Lotus-Notes 中有一个应用程序。我没有开发者权利。我的主要目标是自动化一些过程。为此，我需要知道如何在 Lotus-Notes 应用程序的视图中模拟单击按钮。我用VBA开发它。

我的入口点是使用 NotesUIWorkspace 的 OpenDatabase 方法打开视图：

```
Call notesUIWorkspace.OpenDatabase( server$, file$, view$, key$, newInstance, temp ) 
```

现在，当视图打开时，我想模拟单击其上的按钮。非常感谢您的帮助。

顺便说一句，我不想​​直接从数据库中插入/读取文档。我需要按原样完成所有过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:33:38.413

我相信您可能会在使用这种方法时遇到一些障碍。Notes 中没有模拟按钮单击的 COM 方法。您可能能够获得 NotesUIDocument 的句柄，然后运行 ​​Save 操作等，但如果您的按钮执行的操作不止这些，那将无济于事。

我会检查[AutoHotKey](http://www.autohotkey.com/)。它是一个 Windows 键盘和鼠标自动化工具。您可以编写一个脚本来自动执行所有操作，也许只使用键盘快捷键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:23:17.160

在那个按钮中，你想执行什么？

通常，您不能以编程方式单击注释操作。您可以在 Queryopen 中针对您的所有视图编写代码。

否则，您可以创建自定义工具栏操作，您可以在那里创建和计算 @Formula。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.notes85.help.doc/fram_customize_toolbars_t.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.notes85.help.doc/fram_customize_toolbars_t.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:48:08.817

为什么不能简单地将代码从按钮移动到库并调用函数而不是单击按钮？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T10:59:12.093

没办法通过COM，你可以通过Winapi发送消息功能的办法。像下面这样的东西会起作用，虽然它很笨重。我在一些自动化项目中使用它来模拟点击注释按钮。

```
 Declare Function FindWindowEx Lib "user32" Alias "FindWindowExA" (ByVal hWnd1 As Long, ByVal hWnd2 As Long, ByVal lpsz1 As String, ByVal lpsz2 As String) As Long
Declare Function GetClassName Lib "user32" Alias "GetClassNameA" (ByVal hwnd As Long, ByVal lpClassName As String, ByVal nMaxCount As Long) As Long
Declare Function FindWindow Lib "user32" Alias "FindWindowA" (ByVal lpClassName As String, ByVal lpWindowName As String) As Long
Declare Function GetWindowText Lib "user32" Alias "GetWindowTextA" (ByVal hwnd As Long, ByVal lpString As String, ByVal cch As Long) As Long
Declare Function GetWindow Lib "user32" Alias "GetWindow" (ByVal hwnd As Long, ByVal wCmd As Long) As Long
Declare Function SendMessage Lib "user32" Alias "SendMessageA" (ByVal hwnd As Long, ByVal wMsg As Long, ByVal wParam As Long, lParam As Long) As Long

' GetWindow() Constants
Public Const GW_HWNDFIRST = 0
Public Const GW_HWNDLAST = 1
Public Const GW_HWNDNEXT = 2
Public Const GW_HWNDPREV = 3
Public Const GW_OWNER = 4
Public Const GW_CHILD = 5
Public Const GW_MAX = 5

'button click constants for SendMessage
Public Const WM_LBUTTONDOWN = &H201
Public Const WM_LBUTTONUP = &H202
Public Const BM_SETSTATE = &HF3
Public Const BM_GETSTATE = &HF2
Public Const BM_CLICK = &HF5

Public hwndAction As String
Public hwndClass As String
Public hwndCaption As String
Public hwndHandle As Long

Sub ClickNotes()

hwndAction = "FindHandle"
hwndCaption = "WindowCaption" ''Window Caption here
hwndClass = "NotesSubprog"

FindChildWindows(FindWindow("SWT_Window0", "Windowtitle"))

hwndAction = "FindHandle"
hwndCaption = "WindowCaption"
hwndClass = "NotesSubprog"

FindChildWindows(hwndHandle)

hwndAction = "FindHandle"
hwndCaption = ""
hwndClass = "ActionBar"

FindChildWindows(hwndHandle)

hwndAction = "Click"
hwndCaption = "Comment"
hwndClass = "IRIS.bmpbutton"

FindChildWindows(hwndHandle)

Do While FindWindow("SWT_Window0","New Comment - IBM Notes") = 0
DoEvents
Loop

Wait 3

End Sub

'the method signature is like this only to stay compatible with the Win32 API - lParam will not be used anyway
Function EnumChildWindow(ByVal hChild As Long, ByVal lParam As Long) As Long

Dim ClassBuffer As String
Dim CaptionBuffer As String
Dim TempVar As Long

ClassBuffer = Space(150)
TempVar = GetClassName(hChild, ClassBuffer, 149)
ClassBuffer = Left(ClassBuffer, TempVar)

CaptionBuffer = Space(250)
TempVar = GetWindowText(hChild, CaptionBuffer, 250)

CaptionBuffer = Left(CaptionBuffer, TempVar)

Debug.Print "Handle: " & hChild & ", Class: " & ClassBuffer & ", Caption: " & CaptionBuffer

If hwndClass = ClassBuffer And hwndCaption = CaptionBuffer Then
Select Case hwndAction
Case "Click"
SendMessage(hChild, WM_LBUTTONDOWN, 0, 0)
SendMessage(hChild, WM_LBUTTONUP, 0, 0)
SendMessage(hChild, BM_SETSTATE, 1, 0)
Case "FindHandle"
hwndHandle = hChild
End Select

Exit Function

End If

'Continue enumeration by recursion
EnumChildWindow = True

End Function

Function FindChildWindows(ByVal hParent As Long)

Dim hChild As Long
Dim Continue As Boolean

Continue = True
hChild = GetWindow(hParent, GW_CHILD)
Continue = EnumChildWindow(hParent, 0)

While Not hChild = 0 And Continue

If Continue Then Continue = FindChildWindows(hChild)
hChild = GetWindow(hChild, GW_HWNDNEXT)

Wend

FindChildWindows = Continue

End Function 
```

# javascript - 如何使用 API 请求中的特殊字符 ID？

> ID：14130622
> 
> 赞同：0
> 
> 时间：2013-01-02T23:01:42.890
> 
> 标签：javascript, ajax, api

考虑以下 AJAX 请求：

```
$.ajax({
    url: 'http://www.minecraftwiki.net/api.php?action=query&meta=siteinfo&siprop=namespaces&format=json',
    dataType: 'json',
    async: false,
    success: function(siResponse) {
        for(var ns in siResponse.query.namespaces) {
            if(siResponse.query.namespaces[ns].id >= 0) {
                if(siResponse.query.namespaces[ns].id != namespaces.length) {
                    break;
                }
                if(siResponse.query.namespaces[ns].id === 0) {
                    namespaces[siResponse.query.namespaces[ns].id] = 'Main';
                } else {
                    namespaces[siResponse.query.namespaces[ns].id] = siResponse.query.namespaces[ns].&asterisk;;
                }
                movelog[siResponse.query.namespaces[ns].id] = 0;
                protectlog[siResponse.query.namespaces[ns].id] = 0;
            }
        }
    }
}); 
```

[这是 API 响应](http://www.minecraftwiki.net/api.php?action=query&meta=siteinfo&siprop=namespaces&format=json)

现在，我可以只使用 .canonical 并将 ID 4 和 5 从默认的“Project”重命名为“Minecraft Wiki”，但我想改用“*”：值。这可能吗，或者这只是一个糟糕的维基设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:07:47.010

据我所知：不，您不能以星号、数字或其他特殊字符开头的 id。有关更多信息，请参阅[此](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:11:12.180

您需要使用`foo['*']`来访问该字段，而不是`foo.*`使用 SyntaxError。

所以在你的情况下`siResponse.query.namespaces[ns]['*']`

# eclipse - Eclipse 和 PDT：我不能再输入 f 字母了

> ID：14130624
> 
> 赞同：0
> 
> 时间：2013-01-02T23:02:34.723
> 
> 标签：eclipse, ubuntu, eclipse-pdt

对不起，如果它看起来像一个愚蠢的问题，但我真的不能再工作了，这……很伤心。Eclipse 继续将 F 分配给格式代码（Menu->Source->Format）。我找到了一种重置为默认值的方法，但是在切换到其他窗口（浏览器）之后突然恢复键绑定。我可以再回去了。

是否有一个快速的方向可以让它像以前一样工作？有什么可能导致这种情况发生吗？什么？一个键序列？它一直工作到现在，我在哪里寻找这种奇怪行为的可能原因？

我确实为 ubuntu 菜单更改了文件 /usr/lib/x86_64-linux-gnu/gtk-2.0/2.10.0/menuproxies/libappmenu.so (s/Eclipse/Xclipse/)，它会导致问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:17:57.533

最后一个问题得出一个结论：是的，它与主菜单问题有关。

所以禁用它

cd /usr/lib/x86_64-linux-gnu/gtk-2.0/2.10.0/menuproxies sudo sed -i 's/Xclipse/Eclipse/' libappmenu.so

我认为应该在这里继续讨论： [https ://bugs.launchpad.net/ubuntu/+source/libdbusmenu/+bug/618587](https://bugs.launchpad.net/ubuntu/+source/libdbusmenu/+bug/618587)

# .net - 为什么我的 c:\NativeImage\mscorsvw.exe\ 和 C:\Default\mscorsvw.exe 文件夹这么大（每个文件夹都在 25 到 35 个演出之间）。我可以删除它们吗？

> ID：14130625
> 
> 赞同：4
> 
> 时间：2013-01-02T23:02:41.633
> 
> 标签：.net, sql, space

这些文件夹中最大的文件的标题如下：

**(690MB)**

```
Microsoft.VisualStudio.Shell.Immutable.10.0, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a.HTM 
```

**(673MB)**

```
Microsoft.VisualStudio.Settings, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a.HTM     

etc... 
```

我可以安全地删除这些文件夹的内容并为自己节省超过 90 GB 的空间吗？

请提供某种证据/证明您的回答不会破坏我的系统。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-15T13:53:41.007

看起来 Fusion Logging 已使用自定义位置打开。要关闭此功能，请从 Visual Studio 命令提示符运行 fuslogvw.exe，然后单击设置按钮，然后单击禁用。

# msbuild - Nuget 包的增量构建

> ID：14130628
> 
> 赞同：0
> 
> 时间：2013-01-02T23:03:05.167
> 
> 标签：msbuild, nuget, msbuild-4.0

我想执行一个 msbuild 项目，它使用批处理来确定一个或多个`csproj`项目是新构建的，因此需要新的 nuget 打包。到目前为止，我制作的脚本似乎是一个合理的开始，但增量构建机制不起作用。`MainBuild`无论如何，目标每次都会执行。

这是我所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="MainBuild" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)'=='' ">Debug</Configuration>
    <Content>content\plugins\</Content>
  </PropertyGroup>
  <ItemGroup>
    <Nuspec Include="$(MSBuildProjectDirectory)\plugins\*\*.nuspec" />
  </ItemGroup>

<Target Name="MainBuild"
        Inputs="%(Nuspec.RootDir)%(Nuspec.Directory)bin\$(Configuration)\*.dll"
        Outputs="%(Nuspec.RootDir)%(Nuspec.Directory)%(FileName).pkg" >
  <ItemGroup>
    <Inputs Include="%(Nuspec.RootDir)%(Nuspec.Directory)bin\$(Configuration)\*.dll" />
    <Outputs Include="%(Nuspec.RootDir)%(Nuspec.Directory)%(FileName).pkg" />
  </ItemGroup>
  <Message Text="INPUTS: %(Inputs.FullPath)" />
  <Message Text="OUTPUTS: @(Outputs->'%(FullPath)')" />

  <Copy SourceFiles="@(Inputs)" DestinationFiles="@(Outputs->'%(FullPath)')" />

</Target>
</Project> 
```

该`Copy`任务只是一个调试占位符，用于调用 nuget 并创建一个新包。

这个想法是，如果`bin\Debug`目录中的任何文件比相应的 .nuspec 文件（在上面找到两个文件夹`bin\Debug`）新，那么`MainBuild`目标应该执行。

有任何想法吗？

ps 的`Inputs`和`Outputs`属性`Target`大概每个都创建一个项目。我认为创建的项目无法在目标内部引用，这很奇怪。在上面的示例中，我必须创建一个 target-interna 动态 ItemGroup 来重新创建项目，以便我可以访问它们。有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:33:12.150

我在[MSBuild Batching 文档中读到了这个](http://msdn.microsoft.com/en-us/library/ms171473.aspx)

> 如果目标内的任务使用批处理，则 MSBuild 需要确定每批项目的输入和输出是否是最新的。否则，每次命中目标时都会执行该目标。

这可能是杯子。尝试更改您的复制目标以使用批处理而不是 ite 转换（我认为在项目组中使用项目元数据不能满足上述要求）。

```
<Target Name="MainBuild"
        Inputs="%(Nuspec.RootDir)%(Nuspec.Directory)bin\$(Configuration)\*.dll"
        Outputs="%(Nuspec.RootDir)%(Nuspec.Directory)%(FileName).pkg" >
    <ItemGroup>
        <Inputs Include="%(Nuspec.RootDir)%(Nuspec.Directory)bin\$(Configuration)\*.dll" />
        <Outputs Include="%(Nuspec.RootDir)%(Nuspec.Directory)%(FileName).pkg" />
    </ItemGroup>
    <Message Text="INPUTS: %(Inputs.FullPath)" />
    <Message Text="OUTPUTS: @(Outputs->'%(FullPath)')" />

    <Copy SourceFiles="@(Inputs)" DestinationFiles="%(Outputs.FullPath)" />

</Target> 
```

看起来输入的数量可能与输出的数量不同（我怀疑每个项目的输出目录中有多个 .dll 文件），这也会导致目标执行。

# objective-c - 调试时如何更改 XCode 中的 NSNumber 值？

> ID：14130629
> 
> 赞同：3
> 
> 时间：2013-01-02T23:03:05.497
> 
> 标签：objective-c, xcode, debugging, nsnumber

我的班级有一个成员变量，它是一个 NSNumber，如下所示：

```
@interface C : NSObject {
    NSNumber* _n;
} 
```

在调试过程中，我在断点处停止，我想更改 NSNumber 的值。我该怎么做？

我尝试了 XCode 变量窗口，但这不起作用。

例如，我尝试了 XCode 调试控制台

```
expr _n = @1 
```

但这给出了奇怪的消息**错误：从不兼容的类型'NSNumber *'分配给'NSNumber *'** - 不开玩笑！尝试一下。

我也试过

```
expr _n = [NSNumber numberWithInt:1] 
```

但这给出了同样的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T23:09:19.247

这对我有用：

```
(lldb) expr -- _n = (NSNumber *)[NSNumber numberWithInt:123]
(NSNumber *) $0 = 0x0000000000007b83 (int)123
(lldb) po _n
(NSNumber *) $1 = 0x0000000000007b83 123 
```

`--`需要标记命令选项的结束和“原始”输入的开始。

严格来说，这不会改变现有 的值`NSNumber`，而是将新`NSNumber`对象分配给`_n`。但是`NSNumber`对象是不可变的，所以无论如何改变它们的值是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T08:26:30.757

尝试使用这一行：

```
po _n = @(123) 
```

# php - 将 CakePHP 应用程序与第三方 API 框架集成的最佳方式是什么？

> ID：14130631
> 
> 赞同：0
> 
> 时间：2013-01-02T23:03:28.520
> 
> 标签：php, cakephp, cakephp-2.0, restler

在同一台服务器上，我有一个[Restler](http://luracast.com/products/restler/) 3.0 API 服务器和一个 CakePHP 2.3 应用程序，我希望能够使用来自 Restler 应用程序的 CakePHP 控制器功能。当然我不希望 CakePHP 做任何渲染，只是为了处理数据。

我考虑只从 Restler api 向 CakePHP 应用程序发出 https 请求，但这对于 Restler 服务器的客户端来说似乎效率很低。我还考虑过使用 RabbitMQ 在应用程序之间进行 RPC，但 PHP 中的 RPC 对于我试图保持简单的事情来说似乎太复杂了。

理想情况下，在 Restler 我可能会有这样的事情：

```
<?php
class Content {
    function post() {
        // CakePHP stuff:
        $data = array('title'=>'fake data');
        $this->Content->create();
        if ($this->Content->save($data)) {
            return 'ok';
        }
    }
} 
```

对于实现这种集成的最佳方式，我完全愿意接受任何好的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:29:12.530

这是否可能真的取决于您的环境的性质。

**注意事项：**

1.  您的控制器是否使用其他蛋糕框架组件（控制器、模型、组件等）？如果是这种情况，您可能会感到震惊，因为蛋糕是面向约定的。如果没有蛋糕管道来解释这些约定，它们就毫无意义。

如果您只需要重新利用一些非蛋糕特定的 PHP 逻辑，您总是可以将其重构为自己的 php 类，甚至只是一个包含一些函数的 .php 文件，并在您的 Restler 应用程序和您的 Cake 应用程序之间共享它们。

# c# - CheckboxList 显示所有选中的框

> ID：14130633
> 
> 赞同：3
> 
> 时间：2013-01-02T23:03:43.123
> 
> 标签：c#, asp.net, checkboxlist

我提交表单并收到一封说明表单结果的电子邮件，在这种情况下，如果三个复选框中的任何一个已被选中，则将是。我当前的问题是，如果选中了多个复选框，则不会显示第二个或第三个复选框被选中。

示例：我检查了所有三个复选框，我的结果是：

*   营销邮件：是的
*   第 3 方邮件：否
*   签证促销：没有

什么时候应该显示为他们都说是这样的：

*   营销邮件：是的
*   第 3 方邮件：是
*   签证促销：是的

我的首页代码：

```
<td class="nobor">
        <asp:CheckBoxList ID="OptList" runat="server">
        </asp:CheckBoxList> 
```

我的页面加载：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            OptList.Items.Add(new ListItem("Marketing Mailings", "1"));
            OptList.Items.Add(new ListItem("3rd Party Mailings", "2"));
            OptList.Items.Add(new ListItem("VISA Promotions", "3"));
        } 
```

在我的 Submit_Click 中创建电子邮件正文的位置：

```
sb.Append("<u>Opt-Out Preference</u><br/>");

if (OptList.SelectedItem.Value == "1") sb.Append("<b>Marketing Mailings:</b>&nbsp;Yes<br />");
else sb.Append("<b>Marketing Mailings:</b>&nbsp;No<br />");

if (OptList.SelectedItem.Value == "2") sb.Append("<b>3rd Party Mailings:</b>&nbsp;Yes<br />");
else sb.Append("<b>3rd Party Mailings:</b>&nbsp;No<br />");

if (OptList.SelectedItem.Value == "3") sb.Append("<b>VISA Promotions:</b>&nbsp;Yes<br />");
else sb.Append("<b>VISA Promotions:</b>&nbsp;No<br />"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:12:21.837

将`SelectedItem`返回一项，而不是全部。
您应该将代码修改为以下内容：

```
if (OptList.Items[0].Selected) sb.Append("<b>Marketing Mailings:</b>&nbsp;Yes<br />");
else sb.Append("<b>Marketing Mailings:</b>&nbsp;No<br />");

if (OptList.Items[1].Selected) sb.Append("<b>3rd Party Mailings:</b>&nbsp;Yes<br />");
else sb.Append("<b>3rd Party Mailings:</b>&nbsp;No<br />"); 
```

等等...请注意，我正在检查每个项目是否被选中而不是`SelectedItem`值。

另一种选择是遍历所有项目并找到被选中的项目：

```
var ListOfSelectedValues = OptList.Items.Cast<ListItem>().Where(x => x.Selected).Select(x => x.Value).ToList(); 
```

这将返回所有选择的**值**的列表...

# python - Python多线程文件处理

> ID：14130642
> 
> 赞同：5
> 
> 时间：2013-01-02T23:04:25.780
> 
> 标签：python, multithreading, file

我有几个文件驻留在服务器上，我试图实现一个多线程进程来提高性能，我阅读了一个教程，但实现它的问题很少，

这是文件，

```
filelistread = ['h:\\file1.txt', \
                'h:\\file2.txt', \
                'h:\\file3.txt', \
                'h:\\file4.txt']

filelistwrte = ['h:\\file1-out.txt','h:\\file2-out.txt','h:\\file3-out.txt','h:\\file4-out.txt']

def workermethod(inpfile, outfile):
    f1 = open(inpfile,'r')
    f2 = open(outfile,'w')
    x = f1.readlines()
    for each in x:
        f2.write(each)
    f1.close()
    f2.close() 
```

如何使用线程类和队列来实现？

我从下面的课程开始，但不确定如何将 inpfile 和 outputfile 传递给 run 方法。任何输入都表示赞赏

```
class ThreadUrl(threading.Thread):
    def __init__(self,queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def run(self):
        while True:
            item = self.queue.get() 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-02T23:19:38.190

您正在混合两种不同的解决方案。

如果您想为每个文件创建一个专用的工作线程，则不需要任何队列。如果要创建线程池和文件队列，则不*希望*将`inpfile`and传递`outfile`给`run`方法；您想将它们放入队列中的每个作业中。

你如何在两者之间做出选择？嗯，第一个显然更简单，但是如果你有 1000 个文件要复制，你最终会创建 1000 个线程，这比你想要创建的线程多，而且线程数远远多于并行副本的数量操作系统将能够处理。一个线程池可以让你创建，比如说，8 个线程，并将 1000 个作业放在一个队列中，它们将被适当地分配给线程，因此一次运行 8 个作业。

让我们从解决方案 1 开始，每个文件都有一个专用的工作线程。

首先，如果您没有与 subclassing 结婚`Thread`，那么这里真的没有理由这样做。您可以将一个`target`函数和一个`args`元组传递给默认构造函数，然后该`run`方法将`target(*args)`完全按照您的意愿执行。所以：

```
t = threading.Thread(target=workermethod, args=(inpfile, outfile)) 
```

这就是你所需要的。当每个线程运行时，它会调用`workermethod(inpfile, outfile)`然后退出。

但是，如果您出于某种原因*确实*想要子类化，您可以。您可以在构建时`Thread`传递`inpfile`and ，您的方法将被修改为使用而不是获取参数。像这样：`outfile``run``workermethod``self.inpfile``self.outfile`

```
class ThreadUrl(threading.Thread):
    def __init__(self, inpfile, outfile):
        threading.Thread.__init__(self)
        self.inpfile, self.outfile = inpfile, outfile

    def run(self):
        f1 = open(self.inpfile,'r')
        f2 = open(self.outfile,'w')
        x = f1.readlines()
        for each in x:
            f2.write(each)
        f1.close()
        f2.close() 
```

无论哪种方式，我都建议使用`with`语句而不是显式`open`and `close`，并摆脱`readlines`（不必要地将整个文件读入内存），除非您需要处理真正旧版本的 Python：

```
 def run(self):
        with open(self.inpfile,'r') as f1, open(self.outfile,'w') as f2:
            for line in f1:
                f2.write(line) 
```

现在，解决方案 2：线程池和队列。

同样，您在这里不需要子类；两种做事方式之间的差异与解决方案 1 中的相同。但是坚持您已经开始的子类设计，您需要这样的东西：

```
class ThreadUrl(threading.Thread):
    def __init__(self,queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def run(self):
        while True:
            inpfile, outfile = self.queue.get()
            workermethod(inpfile, outfile) 
```

然后你通过将一个单一的传递`queue`给所有线程来启动你的线程：

```
q = queue.Queue
threadpool = [ThreadUrl(q) for i in range(poolsize)] 
```

并提交这样的工作：

```
q.put((inpfile, outfile)) 
```

如果您要认真使用线程池，您可能希望考虑使用健壮、灵活、简单和优化的实现，而不是自己编写代码。例如，您可能希望能够取消作业、很好地关闭队列、加入整个池而不是一个一个地加入线程、进行批处理或智能负载平衡等。

如果您使用的是 Python 3，则应该查看标准库`ThreadPoolExecutor`。如果你被 Python 2 卡住了，或者不知道`Future`s，你可能想看看`ThreadPool`隐藏在`multiprocessing`模块中的类。两者都具有从多线程切换到多处理的优势（例如，如果您有一些需要与 IO 并行化的 CPU 密集型工作）是微不足道的。你也可以[搜索 PyPI](http://pypi.python.org/pypi?:action=search&term=thread%20pool&submit=search)，你会发现许多其他好的实现。

作为旁注，您不想调用 queue `queue`，因为这会隐藏模块名称。`workermethod`此外，有一个名为实际上是一个自由函数而不是一个方法的东西有点令人困惑。

最后，如果您所做的只是复制文件，您可能不想在文本模式下阅读，或者逐行阅读。事实上，您可能根本不想自己实现它。只需使用`shutil`. 您可以使用上述任何一种方法非常轻松地做到这一点。例如，而不是这个：

```
t = threading.Thread(target=workermethod, args=(inpfile, outfile)) 
```

做这个：

```
t = threading.Thread(target=shutil.copyfile, args=(inpfile, outfile)) 
```

实际上，看起来您的整个程序可以替换为：

```
threads = [threading.Thread(target=shutil.copyfile, args=(inpfile, outfile))
           for (inpfile, outfile) in zip(filelistread, filelistwrte)]
for thread in threads:
    thread.start()
for thread in threads:
    thread.join() 
```

# c# - 通过 DataGridView 对 DataTable 中的列重新排序

> ID：14130652
> 
> 赞同：0
> 
> 时间：2013-01-02T23:05:10.753
> 
> 标签：c#, .net, data-binding, datagridview

我有一个 DataGridView 并启用了 AllowUserToOrderColumns 属性，以便用户可以使用拖放对列重新排序。我为 ColumnDisplayIndexChanged 事件创建了一个处理程序。DataGridView 绑定到一个DataTable。当用户重新排序 DataGridView 中的列时，我想重新排序 DataTable 中的列。

这是我到目前为止所得到的：

```
private void dataGridView_Main_ColumnDisplayIndexChanged(object sender, DataGridViewColumnEventArgs e)
{
    if(!_isDatabinding)
    {
        if(_data.Columns[columnName].Ordinal != e.Column.DisplayIndex)
        {
            _data.Columns[e.Column.DataPropertyName].SetOrdinal(e.Column.DisplayIndex);
        }
    }
} 
```

问题是这会导致以下异常：

“集合已修改；枚举操作可能无法执行。”

我意识到这是因为调用 SetOrdinal 方法导致再次调用事件处理程序，因为 DataTable 绑定到 DataGridView。所以我将其更改为以下内容：

```
private void dataGridView_Main_ColumnDisplayIndexChanged(object sender, DataGridViewColumnEventArgs e)
{
    if(!_isDatabinding && !_isChangingColumnOrder)
    {
        if(_data.Columns[columnName].Ordinal != e.Column.DisplayIndex)
        {
            _isChangingColumnOrder = true;
            _data.Columns[e.Column.DataPropertyName].SetOrdinal(e.Column.DisplayIndex);
            _isChangingColumnOrder = false;
        }
    }
} 
```

现在这会在 DataGridViewColumn::DisplayIndex 属性设置器中引发 NullReferenceException。这是调用堆栈：

```
System.Windows.Forms.dll!System.Windows.Forms.DataGridViewColumn.DisplayIndex.set(int value) + 0xc5 bytes   
System.Windows.Forms.dll!System.Windows.Forms.DataGridView.EndColumnRelocation(System.Windows.Forms.MouseEventArgs e, System.Windows.Forms.DataGridView.HitTestInfo hti) + 0x27f bytes  
System.Windows.Forms.dll!System.Windows.Forms.DataGridView.OnMouseUp(System.Windows.Forms.MouseEventArgs e) + 0x3a6 bytes   
System.Windows.Forms.dll!System.Windows.Forms.Control.WmMouseUp(ref System.Windows.Forms.Message m, System.Windows.Forms.MouseButtons button, int clicks) + 0x48b bytes 
System.Windows.Forms.dll!System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m) + 0xe14 bytes 
System.Windows.Forms.dll!System.Windows.Forms.DataGridView.WndProc(ref System.Windows.Forms.Message m) + 0x134 bytes    
System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.DebuggableCallback(System.IntPtr hWnd, int msg = 514, System.IntPtr wparam, System.IntPtr lparam) + 0x14c bytes 
```

我不确定是什么导致了这个异常。

在调用 SetOrdinal 之前，我还尝试在事件处理程序中将 DataGridView 的 DataSource 属性设置为 null，然后在方法结束时重新绑定它。尝试避免在重新排序时将 DataTable 绑定到 DataGridView 的问题。但这仍然会引发相同的 NullReferenceException。无论如何，这可能并不理想，因为每个受影响的列都会调用一次处理程序（即总是不止一次），并且似乎没有任何事件我可以处理来告诉我列重新排序何时开始并完成。

我可以让它工作的唯一方法是执行以下操作（注意副本）：

```
private void dataGridView_Main_ColumnDisplayIndexChanged(object sender, DataGridViewColumnEventArgs e)
{
    if(!_isDatabinding)
    {
        if(_data.Columns[columnName].Ordinal != e.Column.DisplayIndex)
        {
            var newData = _data.Copy();
            newData.Columns[e.Column.DataPropertyName].SetOrdinal(e.Column.DisplayIndex);
            _data = newData;
        }
    }
} 
```

不过，我真的不想做这个副本，因为数据可能非常大。

有没有什么办法可以在没有副本的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T05:50:07.600

将 datagridview 重新绑定到数据表

```
 DataTable dt = new DataTable();
 foreach(DataGridViewColumn col in dgv.Columns)
    {
   dt.Columns.Add(col.HeaderText);    
    }

   foreach(DataGridViewRow row in dgv.Rows)
   {
     DataRow dRow = dt.NewRow();
    foreach(DataGridViewCell cell in row.Cells)
     {
      dRow[cell.ColumnIndex] = cell.Value;
     }
    dt.Rows.Add(dRow);
   } 
```

# css - Firefox 计算块更大？

> ID：14130653
> 
> 赞同：1
> 
> 时间：2013-01-02T23:05:49.653
> 
> 标签：css, firefox

我在仅出现在 Firefox 中的导航菜单上有一个奇怪的问题（在 IE7、8、9、10 和 Chrome 中运行良好）。菜单上的链接显示为块，但是它们在 Firefox 中计算得比任何其他浏览器都大（宽度更大），因此它们不能正确对齐。奇怪的是，一旦点击了链接，即使是右键单击，Firefox 也会将它们置于应有的状态。

CSS 已被重置，并且这个问题发生在 Firefox 中，所以我认为这是一个 Firefox 错误？

```
<nav>
    <ul id="primary-nav">

        <li><a id="nav-home" href="/wordpress">HOME</a></li>
        <li><a id="nav-work" href="/wordpress/work">WORK</a></li>
        <li><a id="nav-about" href="/wordpress/about">ABOUT</a></li>
        <li><a id="nav-contact" href="/wordpress/contact">CONTACT</a></li>
        <li><a id="nav-blog" href="">BLOG</a></li>

    </ul>
</nav>

ul#primary-nav li {
    float: left;
    list-style-type: none;
    background: none;
    padding: 0;
    margin-left: 25px;
}

ul#primary-nav li a {
    font-size: 1.5em;
    display: block;
    padding-top: 40px;
}

ul#primary-nav li a#nav-home {
    background: url('./images/nav-home-button.png') top center no-repeat;
}

ul#primary-nav li a#nav-work {
    background: url('./images/nav-work-button.png') top center no-repeat;
}

ul#primary-nav li a#nav-about {
    background: url('./images/nav-about-button.png') top center no-repeat;
}

ul#primary-nav li a#nav-contact {
    background: url('./images/nav-contact-button.png') top center no-repeat;
}

ul#primary-nav li a#nav-blog {
    background: url('./images/nav-blog-button.png') top center no-repeat;
}

ul#primary-nav li a:first-letter {
    font-size: 1.3em;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:12:15.120

**结论**：如果 :first-letter 设置了字体大小**，Firefox中存在错误计算元素宽度的错误。**

这个 bug 已在 2007 年填补：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=385615) ://bugzilla.mozilla.org/show_bug.cgi?id=385615 。截至 2013 年 1 月，*它仍然是开放*的。从那里链接到这个答案。

事实上，从 2011 年 9 月开始，[已经有一个 Stack Overflow 问题](https://stackoverflow.com/questions/7548255/is-there-a-css-workaround-for-firefox-bug-inline-block-first-letter-with-cha)要求解决。

公认的解决方法是通过执行动画来**触发回流（**[信用：kizu](https://stackoverflow.com/a/7553176/499214)）

```
@-moz-keyframes bugfix { from { padding-right: 1px ; } to { padding-right: 0; } }

.test {-moz-animation: bugfix 0.001s;} 
```

* * *

* * *

这是演示该问题的最小测试用例（[http://jsfiddle.net/6eYu6/1/](http://jsfiddle.net/6eYu6/1/)）：

```
<div><a href="#">HOME</a></div>
<div><a href="#">WORK</a></div>

div{float: left;}
a{display: block;}
a:first-letter {font-size: 1.3em;}​ 
```

在 Chrome 中，没有间隙（预期行为）。在 Firefox 中，由于`a`元素更宽，因此存在间隙。

* * *

我的研究：

在单击第一个链接*或点击它*时，间隙消失了。当链接失去焦点时，间隙不会再次出现。该链接会在页面重新加载时重新出现。

如果`href`删除该属性 ( [http://jsfiddle.net/6eYu6/2/](http://jsfiddle.net/6eYu6/2/) )，差距仍然存在。点击不再有任何效果。

添加点击处理程序或阻止点击操作（`return false`在 jQuery 中）在任何一个方向上都没有效果。这同样适用于`focus`事件（它*由*存在触发`href`）。阻止该`focus`事件会消除在链接上使用选项卡的效果。

* * *

Removing the `float` attribute and turning all elements inline causes predictable behavior (a whitespace-sized gap, no effect on clicking). However, the effect of `:first-letter` disappears as well.

When the `font-size` is removed, or given to the whole link, *or given to a span*, the gap disappears.

**The width of the link (in firefox, before the click-fix) is the same as if the entire text had that font size.**

When a `hover` effect *that involves resizing the element* is added to the link, the gap disappears on first hover.

When the float is removed, the link width is 100% (naturally).

# asp.net - Crystal Reports：刷新 .NET 中的动态参数

> ID：14130657
> 
> 赞同：0
> 
> 时间：2013-01-02T23:05:57.643
> 
> 标签：asp.net, .net, parameters, crystal-reports, crystal-reports-2008

我正在使用 Crystal Reports 2008 和 Visual Studio 2010（.NET 4.0 框架）构建一个 ASP.NET Web 应用程序，以通过“CrystalReportsViewer”Web 控件显示 Crystal Reports 文件。我的应用程序在运行时根据配置文件更改报表的数据源。

我使用的一些报告具有从数据库表中提取值的动态参数。当我运行 Crystal Report 时，它会填充参数列表框并允许用户选择其中的一个或多个。当我在 ASP.NET 页面上的 CrystalReportsViewer 控件中运行报表时，它给了我一个空的文本框，该文本框曾经是参数列表。

有没有办法可以“刷新”或重新填充动态参数？

提前致谢，

-史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:05:30.117

我一直在动态参数方面遇到麻烦。我使用 Crystal 的方式与您不同，但我注意到当我的数据来自存储过程时，运行报表时动态参数为空。我的解决方法是在运行报告时将参数设置为空，然后在参数屏幕上单击“确定”。此时，水晶会刷新参数列表，我会看到数据库中的值可供选择。当我将数据表直接添加到报表而不是使用存储过程时，动态参数对我来说效果很好。

我不知道这是否真的回答了你的问题，但我希望它有所帮助。

# c# - 为什么实体框架调用我的存储过程但返回不正确的值？

> ID：14130661
> 
> 赞同：1
> 
> 时间：2013-01-02T23:06:12.703
> 
> 标签：c#, asp.net, sql-server, entity-framework

我有一个存储过程，它只返回记录总数除以传入的任何值。这是为了帮助网站上的分页。

但是，我正在使用实体框架绑定到该存储过程，并且它正在返回对它的`-1`所有调用。当我使用 SQL Management Studio 查询存储过程时，它返回了正确的值。

我的存储过程如下所示：

```
CREATE PROCEDURE [dbo].[GetAuditRecordPageCount]
@Count INTEGER
AS
RETURN ((SELECT COUNT(Id) FROM AuditRecords) / @Count) + 1 
```

我在 C# 中对实体框架的调用是这样的：

```
int pageCount;
using (Entities entities = new Entities())
{
    pageCount = entities.GetAuditRecordPageCount(count);
} 
```

我以这种方式编写 C# 代码是否正确？

根据评论中的要求，EF生成的SQL是：

```
exec [dbo].[GetAuditRecordPageCount] @Count=100 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:08:11.457

你试过吗？ [http://www.devtoolshed.com/using-stored-procedures-entity-framework-scalar-return-values](http://www.devtoolshed.com/using-stored-procedures-entity-framework-scalar-return-values)

我认为您的程序将如下所示：

```
CREATE PROCEDURE [dbo].[GetAuditRecordPageCount]
@Count INTEGER
AS
declare @retVal int
set @retVal = ((SELECT COUNT(Id) FROM AuditRecords) / @Count) + 1
select @retVal 
```

在 c# 代码中：

```
int? pageCount;
using (Entities entities = new Entities())
{
   pageCount = entities.GetAuditRecordPageCount(count).SingleOrDefault();

   if (pageCount.HasValue)
   {
      //do something here
   }
   else
   {

   }
} 
```

不要忘记在编辑功能导入屏幕中输入“Scalars: Int32”。

# deployment - Powershell - 这个脚本中返回了什么？

> ID：14130667
> 
> 赞同：0
> 
> 时间：2013-01-02T23:06:34.090
> 
> 标签：deployment, reporting-services, powershell-3.0

我在这里使用这个脚本：

[https://gist.github.com/3043878](https://gist.github.com/3043878)

尝试使用 Powershell 将报告服务 Visual Studio 项目部署到 SSRS。但是请注意，我已对其进行了修改以使用 2010 Web 服务，并相应地修改了对象初始化命名空间。

在第 115 行，返回新创建和填充的对象 $DataSource。

在调用此方法并使用结果输出的第 147 和 148 行，我收到以下错误：

```
 Property 'Name' cannot be found on this object. Make sure that it exists. 
```

但是，如果我执行：

```
$DataSource | Select Name
$DataSource | Select Path 
```

它返回预期值

另外，执行：

```
$DataSource | Get-Member
$DataSource | Select * 
```

还列出了 Name 和 Path 属性。

Powershell 实际上从 New-SSRSDataSource 方法返回了什么 - 它似乎不仅仅是 DataSource 对象？为什么我不能访问返回的 Name 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:42:37.047

我讨厌回答自己的问题……但是……

在将服务从 2005 年更改为 2010 年时，CreateDataSource 方法从 void 返回变为返回表示创建的数据源的 CatalogItem，该数据源还具有 Name 和 Path 属性。

在方法返回后尝试访问这些属性时，powershell 发现多个同名属性，并导致混淆。不再需要在 New-SSRSDataSource 方法中创建 DataSource 对象（或者，还有其他解决问题的方法）。

# c# - 安装了 glimpse 试图访问 glimpse.axd 并收到 404 错误？

> ID：14130668
> 
> 赞同：13
> 
> 时间：2013-01-02T23:06:35.613
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2012, glimpse

这很简单，因为我在此页面之后安装了 glimpse。：

[http://getglimpse.com/About/QuickStart](http://getglimpse.com/About/QuickStart)

然后我尝试导航到`http://myApp/glimpse.axd`并收到未找到的 404 错误。

正如您在快速入门中看到的那样，有此声明。：

如果您在浏览“/glimpse.axd”时收到“找不到页面”，请检查常见问题解答中的故障排除部分。

常见问题解答中没有关于此的内容。我浏览了这个网站和 getGlimpse.com，尝试了许多其他配置，但没有任何效果。还有其他人遇到这个问题并解决它吗？

这个也试过了。：

[在 NuGet 安装 Glimpse.MVC3 后未找到 MVC3 模块的 Glimpse](https://stackoverflow.com/questions/6668914/glimpse-for-mvc3-module-not-found-after-nuget-install-of-glimpse-mvc3)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-31T09:41:12.063

我遇到了同样的问题，在我的情况下，解决方案是将以下代码添加到 MvcApplication 类中的 Application_Start() ：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-02T23:18:13.943

确保根据您使用的 Web 服务器在 web.config 中注册了 Glimpse 模块和处理程序。

*   如果您在 IIS6 上使用站点，则在 IIS7.x 经典管道模式或 Visual Studio Development Server

    ```
    <system.web>
        <httpModules>
            <add 
                name="Glimpse" 
                type="Glimpse.Core.Module, Glimpse.Core"
            />
        </httpModules>
        <httpHandlers>
            <add 
                path="glimpse.axd" 
                verb="GET,POST" 
                type="Glimpse.Core.Handler, Glimpse.Core"
            />
       </httpHandlers>
       ... 
    ```

*   如果您在集成管道模式或 IIS Express 中使用 IIS 7.x：

    ```
    <system.webServer>
        <modules>
            <add 
                name="Glimpse" 
                type="Glimpse.Core.Module, Glimpse.Core" 
                preCondition="integratedMode" 
            />
        </modules>
        <handlers>
            <add 
                name="Glimpse" 
                path="glimpse.axd" 
                verb="GET,POST" 
                type="Glimpse.Core.Handler, Glimpse.Core" 
                preCondition="integratedMode" 
            />
        </handlers>
        ...
    </system.webServer> 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-18T22:21:45.420

我有一个多项目解决方案，并且正在从包管理器控制台安装它。我发现使用以下命令安装它是有效的：

```
 PM> Install-Package -ProjectName <MyProject> Glimpse.MVC4 
```

当然你需要`<MyProject>`用你自己的项目名称替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-06T11:47:58.050

我遇到了一个非常相似的问题，这些选项都没有帮助我，但我确实让它工作了。这是我必须做的：

我正在使用 MVC 5，因此请确保您已阅读[最新配置](http://getglimpse.com/Docs/Configuration)以了解您正在使用的版本。我应该一直使用**Glimpse.AspNet**而不是~~**Glimpse.Core**~~

我的网络配置如下所示：

```
 <handlers>
    ....
    <remove name="Glimpse" />
    <add name="Glimpse" path="glimpse.axd" verb="GET"
         type="Glimpse.AspNet.HttpHandler, Glimpse.AspNet"   
         preCondition="integratedMode" />  
</handlers>
<modules>
    ....
    <remove name="Glimpse" />
    <add name="Glimpse" 
         type="Glimpse.AspNet.HttpModule, Glimpse.AspNet" 
         preCondition="integratedMode"/>    
</modules> 
```

我正在使用 IIS Express、Vs2015 并且由于某种原因我的*C:\Users\me\Documents\IISExpress\config\applicationhost.config*搞砸了，并且有一个 Glimpse 的特殊条目。

所以我找到并删除了所有带有**Glimpse**的条目（小心，您可能想将它们注释掉）

```
<application path="/Glimpse.axd" applicationPool="Clr4IntegratedAppPool">
    <virtualDirectory path="/" physicalPath="\path\to\extra\website" />
</application> 
```

我认为这可能是因为安装了一个非常早期的 glimpse 版本，也与升级到 MVC5 有关，但不是 100% 确定为什么......

希望这对其他人有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-17T15:33:30.927

在我的例子中，网络应用程序没有部署在根目录中，所以 url 是：

```
http://localhost:54026/MyApp/glimpse.axd 
```

很明显，但我会留下这个答案作为提醒。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-08T18:05:59.200

安装 Glimpse.AspNet 它将为您解决问题，并通过添加处理程序和模块来修改 web.config。

# rspec - rspec“无法加载这样的文件”

> ID：14130673
> 
> 赞同：8
> 
> 时间：2013-01-02T23:06:56.720
> 
> 标签：rspec, railstutorial.org

使用 Rails 教程第一次运行 rspec，p。95\. 得到这个输出：

```
 david@david-desktop:~/rails_projects/sample_app1$ bundle exec rspec /spec/requests/static_pages_spec.rb
/home/david/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2nded/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `load': cannot load such file -- /spec/requests/static_pages_spec.rb (LoadError)
    from /home/david/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2nded/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
    from /home/david/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2nded/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `map'
    from /home/david/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2nded/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `load_spec_files'
    from /home/david/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2nded/gems/rspec-core-2.9.0/lib/rspec/core/command_line.rb:22:in `run'
    from /home/david/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2nded/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:69:in `run'
    from /home/david/.rvm/gems/ruby-1.9.3-p362@rails3tutorial2nded/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

这是Gemfile：

```
 source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.9.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby
end

gem 'jquery-rails'

group :test do
  gem 'capybara', '1.1.2'
end 
```

已经完成 rails generate rspec:install 和 rails generate integration_test static_pages 命令。想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T23:50:59.430

删除文件名中的前导斜杠：

```
bundle exec rspec spec/requests/static_pages_spec.rb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T04:35:00.280

仅供参考 - 当我的规范文件格式不正确时，我也遇到过这种情况。我错过了一个“做”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T15:12:25.747

我有同样的问题 - 删除前导“/”修复它。

# xaml - 从存储加载图像后无法更新视图

> ID：14130674
> 
> 赞同：0
> 
> 时间：2013-01-02T23:07:04.850
> 
> 标签：xaml, binding, windows-8, winrt-xaml

我正在将 Windows 存储中的图像绑定到`Image`我的视图中的控件这里是一些代码：（`Images`是一个`ObservableCollection`）

```
 // Loading images from storage
        foreach (var imagesVM in Images)
        {
            var img = new BitmapImage();
            var tmp = await ImageHelpers.LoadImageFromStorageAsync(
                imagesVM.name);
            if (tmp != null)
            {
                img.SetSource(tmp);
                imagesVM.Logo = img;
                RaisePropertyChanged(() => imagesVM.Logo);
                RaisePropertyChanged(() => Images);
            }
        } 
```

`LoadImageFromStorageAsync`如果找不到图像，我的方法返回 null。

我的问题是加载图像时我的视图没有更新，如果我正在拖放元素，元素更新并显示图像，这是我的绑定：

```
 <StackPanel Orientation="Horizontal">
            <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                <Image Source="{Binding Logo, Mode=TwoWay}" Stretch="UniformToFill" />
            </Border>
            <StackPanel Margin="20,0,0,0" HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="{Binding Brand}"/>
                <TextBlock Text="{Binding Name}" Margin="0,5,0,0"/>
            </StackPanel>
        </StackPanel> 
```

绑定效果很好，因为它在更新时显示（也当我返回然后重新打开此页面时）

更奇怪的是，有时会显示我的图像...

有什么猜测吗？我想这与`RaisePropertyChanged`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:31:22.553

大概是这样的：`RaisePropertyChanged(() => imagesVM.Logo);`

尝试更改您的`imagesVM`类型以在设置时引发其自己的属性更改通知`Logo`。

# jquery-ui-autocomplete - 附加搜索词时如何重用 jquery-ui-autocomplete 缓存结果？

> ID：14130676
> 
> 赞同：2
> 
> 时间：2013-01-02T23:07:15.353
> 
> 标签：jquery-ui-autocomplete

我有以下 JS 方法将 jQuery UI 自动完成小部件绑定到搜索文本框。一切正常，包括缓存，除了我在附加搜索词时进行了不必要的服务器调用，因为我不重用刚刚检索到的结果。

例如，搜索“ab”会从服务器获取一些结果。在搜索框中的“ab”之后键入“c”会从服务器获取“abc”结果，而不是重复使用缓存的“ab”结果并忽略与“abc”不匹配的结果。

我走上了手动查找“ab”搜索结果的路径，使用正则表达式过滤它们以选择“abc”子集，但这似乎完全像是在重新发明轮子。告诉小部件使用“ab”结果，但过滤它们以使用“abc”术语并重新显示缩短的下拉列表的正确、规范的方法是什么？

```
function bindSearchForm() {
    "use strict";
    var cache = new Object();

    $('#search_text_field').autocomplete({
        minLength: 2,
        source: function (request, response) {
            var term = request.term;
            if (term in cache) {
                response(cache[term]);
                return;
            }
            $.ajax({type: 'POST',
                    dataType: 'json',
                    url: '/get_search_data',
                    data: {q: term},
                    success: function (data) {
                        cache[term] = data;
                        response(data);
                    }
            });
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:27:53.547

这是我的“蛮力，重新发明轮子”方法，目前看来，它是正确的解决方案。

```
function bindSearchForm() {
    "use strict";
    var cache = new Object();
    var terms = new Array();

    function cacheNewTerm(newTerm, results) {
        // maintain a 10-term cache
        if (terms.push(newTerm) > 10) {
            delete cache[terms.shift()];
        }
        cache[newTerm] = results;
    };

    $('#search_text_field').autocomplete({
        minLength: 2,
        source: function (request, response) {
            var term = request.term.toLowerCase();
            if (term in cache) {
                response(cache[term]);
                return;
            } else if (terms.length) {
                var lastTerm = terms[terms.length - 1];
                if (term.substring(0, lastTerm.length) === lastTerm) {
                    var results = new Array();
                    for (var i = 0; i < cache[lastTerm].length; i++) {
                        if (cache[lastTerm][i].label.toLowerCase().indexOf(term) !== -1) {
                            results.push(cache[lastTerm][i]);
                        }
                    }
                    response(results);
                    return;
                }
            }
            $.ajax({type: 'POST',
                    dataType: 'json',
                    url: '/get_search_data',
                    data: {q: term},
                    success: function (data) {
                        cacheNewTerm(term, data);
                        response(data);
                        return;
                    }
            });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-31T15:37:43.577

如果有人想要一个支持文本框中多个条目的版本，请参见下文：

```
$(function () {
function split(val) {
    return val.split(/,\s*/);
}

function extractLast(term) {
    return split(term).pop();
}

var cache = new Object();
var terms = new Array();

function cacheNewTerm(newTerm, results) {
    // keep cache of 10 terms
    if (terms.push(newTerm) > 10) {
        delete cache[terms.shift()];
    }
    cache[newTerm] = results;
}

$("#searchTextField")
    .on("keydown",
        function (event) {
            if (event.keyCode === $.ui.keyCode.TAB &&
                $(this).autocomplete("instance").menu.active) {
                event.preventDefault();
            }
        })
    .autocomplete({
        minLength: 2,
        source: function (request, response) {
            var term = extractLast(request.term.toLowerCase());
            if (term in cache) {
                response(cache[term]);
                return;
            } else if (terms.length) {
                var lastTerm = terms[terms.length - 1];
                console.log('LAst Term: ' + lastTerm);
                if (term.substring(0, lastTerm.length) === lastTerm) {
                    var results = new Array();
                    for (var i = 0; i < cache[lastTerm].length; i++) {
                        console.log('Total cache[lastTerm[.length] = ' +
                            cache[lastTerm].length +
                            '....' +
                            i +
                            '-' +
                            lastTerm[i]);
                        console.log('Label-' + cache[lastTerm][i]);
                        var cachedItem = cache[lastTerm][i];
                        if (cachedItem != null) {
                            if (cachedItem.toLowerCase().indexOf(term) !== -1) {
                                results.push(cache[lastTerm][i]);
                            }
                        }
                    }
                    response(results);
                    return;
                }
            }

            $.ajax({
                url: '@Url.Action("GetSearchData", "Home")',
                dataType: "json",
                contentType: 'application/json, charset=utf-8',
                data: {
                    term: extractLast(request.term)
                },
                success: function (data) {
                    cacheNewTerm(term, data);
                    response($.map(data,
                        function (item) {
                            return {
                                label: item
                            };
                        }));
                },
                error: function (xhr, status, error) {
                    alert(error);
                }
            });
        },
        search: function () {
            var term = extractLast(this.value);
            if (term.length < 2) {
                return false;
            }
        },
        focus: function () {
            return false;
        },
        select: function (event, ui) {
            var terms = split(this.value);
            terms.pop();
            terms.push(ui.item.value);
            terms.push("");
            this.value = terms.join(", ");
            return false;
        }
    }); 
```

# javascript - jsdoc 有效参数类型

> ID：14130679
> 
> 赞同：62
> 
> 时间：2013-01-02T23:07:37.547
> 
> 标签：javascript, jsdoc

jsdoc的参数标签是否有有效类型的列表？例如，

```
@param {type} myParam Some parameter description 
```

我知道 和 之类的东西`number`是`String`有效的，但是如果我想记录这个数字是一个整数怎么办。`int`有效吗？

我做了一些谷歌搜索，但似乎找不到完整的列表。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-03T00:28:59.877

无论如何，我使用的 JS 文档工具只是将注释标记为字符串，从而可以在 {type} 部分中放置您想要的任何内容。

如果你想要 {number} 或 {string}，你可以坚持使用 JavaScript 类型，或者如果你想指定你可以做 {integer}... 但我可能会推荐类似的东西：

`@param {number} myParam must be an integer`

干杯

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2018-05-29T17:42:33.673

回答实际问题

> jsdoc的参数标签是否有有效类型的列表？

[此处](http://usejsdoc.org/tags-param.html)`@param`的状态文档表明您可以使用内置类型和“[名称路径](http://usejsdoc.org/about-namepaths.html)”（指向您之前创建/记录的类型的路径以及您使用.`@type`

如果您查找`built-in Javascript types`，您会得到以下内容，例如[在这里](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures)，您会得到原始类型的列表：

*   布尔值
*   空值
*   不明确的
*   数字
*   细绳
*   符号（ECMAScript 2015 中的新功能）
*   目的

以下是一些名称路径示例：

*   示例函数
*   exampleClass#someInstanceMember
*   exampleClass.staticMember
*   exampleClass~innerMember

例如`@param {exampleClass} exampleParam Instance of your example class`

# jquery - 如何在 jQuery 或其他平台中创建连接到 paypal 的进度条

> ID：14130682
> 
> 赞同：0
> 
> 时间：2013-01-02T23:07:57.917
> 
> 标签：jquery, html, css, progress-bar

我想为捐赠活动创建一个进度条。我想将它实时连接到贝宝帐户，这样每次捐赠时，进度条上的付款百分比都会改变。例如：如果活动的金额设置为 100 美元，并且捐赠者向活动捐赠了 10 美元，则进度条将仅显示 10% 达到 100%。我试图用 jQuery 做一个，但我失败了。也许是因为我根本不擅长编程 :) 我在谷歌、论坛中搜索了一些示例，但没有找到有用的东西。请帮助我，你是我最后的希望。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T00:24:51.970

```
<style>#progress-container {display:block; width:200px; height:40px; overflow:hidden;​}#progress {height:50px; width:0%; background:green;}</style>

​$(document).ready(function(){

    $('body').on('click','#update', function(){
    var progress = $('#progress').width();
    var completed_value = $('#completed').val();
    $('#progress').width(completed_value+"%");               
    });

});​

​&lt;div id="progress-container">
<div id="progress"></div>
</div>
<input id="completed" type="text"><button id="update">Update</button> 
```

​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ ​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​</p>

# java - 有没有办法在 Eclipse 中重新生成 serialVersionUID？

> ID：14130684
> 
> 赞同：0
> 
> 时间：2013-01-02T23:08:08.000
> 
> 标签：java, eclipse, serialization

我知道`serialVersionUID`当您还没有 Eclipse 时，它​​可以创建一个新的，但我正在寻找一种在您进行一些更改后生成一个新的方法。

与[这个问题](https://stackoverflow.com/questions/1464529/eclipse-auto-generation-of-serialversionuid-with-each-change)不同，我不是在寻找一个工具来让它自己改变，而是一个菜单项/热键可以解决问题。任何比删除它并让 Eclipse 生成一个新的更快的方法都可以。

我知道这个[Ant 工具](http://serialver.sourceforge.net/)，但我更喜欢 Eclipse 中的一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:16:36.700

可悲的是，我不知道有任何这样的插件可用。

但是，您可以使用 Ant 工具创建单个 Ant 脚本来修改您的项目，并且您可以将该脚本添加为外部工具（可从项目的菜单中运行）甚至作为增量构建器（需要更多时间来设置正确向上）。

前段时间我写了一篇博客文章，当时我使用 Ant 脚本在源模型发生变化时自动[从 EMF 模型生成代码。](http://cubussapiens.hu/2010/12/generating-java-code-from-emf-models-automatically/)该脚本在我们的代码库中运行良好，但有一个已知问题：构建有时会意外触发......

# android - Theme.NoTitleBar 如何继承 Theme 的所有属性？

> ID：14130687
> 
> 赞同：0
> 
> 时间：2013-01-02T23:08:13.003
> 
> 标签：android, themes

Theme.NoTitleBar 定义如下。

```
<style name="Theme.NoTitleBar"> // It does not have parent="Theme"
    <item name="android:windowNoTitle">true</item>
</style> 
```

但是，它继承了 Theme 的所有属性。我不知道它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:38:48.063

它继承了的所有属性，`Theme`因为它基本上是该主题的*扩展*。这有点类似于说`Class A extends B`，尽管在属性或任何东西的可见性方面没有区别。

请注意如何`Theme.NoTitleBar`以 为前缀`Theme`，这是所有属性的来源。

通常，`name`样式的 提供了一种分层方法来构建和命名样式和子样式。您可以使用分层特征来替代`parent`您自己定义的样式的属性。要扩展现有的平台定义样式，您始终需要使用`parent`.

[所有这些在Styles and Themes 文档的 Inheritance 小节](http://developer.android.com/guide/topics/ui/themes.html#Inheritance)中都有很好的解释。总结上述大部分内容的两个相关引述：

> 如果您想继承您自己定义的样式， *则不必*使用 parent 属性。相反，只需将要继承的样式名称添加到新样式名称的前面，并用句点分隔。
> 
> 注意：这种通过将名称链接在一起的继承技术仅适用于由您自己的资源定义的样式。您不能以这种方式继承 Android 内置样式。要引用内置样式，例如`TextAppearance`，您必须使用该`parent`属性。

前往链接了解更多详情或查看一些示例。

# javascript - 隐藏 href 链接，除非它们已被点击

> ID：14130690
> 
> 赞同：0
> 
> 时间：2013-01-02T23:08:31.587
> 
> 标签：javascript, html

我有这个简单的隐藏/显示输入框代码，但我想更改它，以便您不会一次看到所有链接，而是只看到已单击的链接和最后一个链接之后的一个链接被单击所以一开始只显示链接 1。然后，如果单击它，则仅显示链接 1 和 2，如果单击链接 2，则仅显示链接 1,2 和 3，依此类推，有没有办法调整此代码以使其成为可能？

```
<script type="text/javascript">

function show(id){ 
if(document.getElementById(id).style.display=="none")
{ 
   document.getElementById(id).style.display="block"  
} 
else{ 
       document.getElementById(id).style.display="none" 
    } 
                 } 

</script>

<a href="#null" onclick="show('t1')">Link 1</a> <input type="text" id="t1"    
 style="display:none"><BR>
<a href="#null" onclick="show('t2')">Link 2</a> <input type="text" id="t2"   
style="display:none"><BR> 
<a href="#null" onclick="show('t3')">Link 3</a> <input type="text" id="t3" 
style="display:none"><BR>
<a href="#null" onclick="show('t4')">Link 4</a> <input type="text" id="t4"   
style="display:none"><BR>
<a href="#null" onclick="show('t5')">Link 5</a> <input type="text" id="t5"    
style="display:none"><BR> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:21:09.190

根据我对原始帖子的评论中假设选项“a”，将代码稍微更改为：

```
<script type="text/javascript"> 
function show(id){ 
  if(document.getElementById(id+"-link").style.display=="none") { 
    document.getElementById(id+"-link").style.display="block";  
    document.getElementById(id+"-input").style.display="block";  
  } 
} 
</script>

<a href="#null" onclick="show('t2')">Link 1</a> <input type="text" id="t1"><BR>
<a href="#null" style="display:none" id="t2-link" onclick="show('t3')">Link 2</a> <input type="text" id="t2-input" style="display:none"><BR>  
<a href="#null" style="display:none" id="t3-link" onclick="show('t4')">Link 3</a> <input type="text" id="t3-input" style="display:none"><BR> 
```

基本上，在对“显示”的调用中偏移 id，以便单击每个链接显示下一个链接，而不是隐藏第一个链接。请注意，“t2”等现在只是 id 的一部分，“show”函数必须将其扩展为包含所有要显示/隐藏的元素

我没有费心包含一个单独的切换来显示/隐藏输入，如果用户第二次点击，我已经删除了隐藏链接的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:34:01.757

我可能是错的，但看起来您希望它在单击链接时展开和折叠。

我有一个解决方案让你看看。单击链接时，它会展开和折叠。此外，如果他们在最后一个展开之前单击链接，则崩溃级联。

[http://jsfiddle.net/XxURd/14/](http://jsfiddle.net/XxURd/14/)

希望这可以帮助。

Javascript如下

```
$('a.control').click( function(){
    var show = this.id;
    if($('#wrapper > div.' + show).is(':hidden')) {
        $('#wrapper > div.' + show).show();
        return false;
    }
    else {
        if(show == 'fieldset1') {
            $('#wrapper > div.fieldset5').hide();
            $('#wrapper > div.fieldset4').hide();
            $('#wrapper > div.fieldset3').hide();
            $('#wrapper > div.fieldset2').hide();
            $('#wrapper > div.fieldset1').hide();
            return false;
        }
        if(show == 'fieldset2') {
            $('#wrapper > div.fieldset5').hide();
            $('#wrapper > div.fieldset4').hide();
            $('#wrapper > div.fieldset3').hide();
            $('#wrapper > div.fieldset2').hide();
            return false;
        }
        if(show == 'fieldset3') {
            $('#wrapper > div.fieldset5').hide();
            $('#wrapper > div.fieldset4').hide();
            $('#wrapper > div.fieldset3').hide();
            return false;
        }
        if(show == 'fieldset4') {
            $('#wrapper > div.fieldset5').hide();
            $('#wrapper > div.fieldset4').hide();
            return false;
        }
        if(show == 'fieldset5') {
            $('#wrapper > div.fieldset5').hide();
            return false;
        }
    }
});​ 
```

CSS 跟随

```
#wrapper {
    left: 0px;
    width: 300px;
    margin: 0 auto;
}

#wrapper > div {
    display: none;
    width: 300px;
    height: 55px;
    float: left;
}​ 
```

HTML 如下

```
<div id="wrapper">
    <a href="#" id="fieldset1" class="control">link 1</a><br/>
    <div class="fieldset1" id="fs1">
        fieldset1: <input type="text" name="fld1"><br />
        &nbsp;<br />
        <a href="#" id="fieldset2" class="control">link 2</a><br/>
    </div>

    <div class="fieldset2" id="fs2">
        fieldset2: <input type="text" name="fld2"><br />
        &nbsp;<br />
        <a href="#" id="fieldset3" class="control">link 3</a><br/>
    </div>

    <div class="fieldset3" id="fs3">
        fieldset3: <input type="text" name="fld3"><br />
        &nbsp;<br />
        <a href="#" id="fieldset4" class="control">link 4</a><br/>
    </div>

    <div class="fieldset4" id="fs4">
        fieldset4: <input type="text" name="fld4"><br />
        &nbsp;<br />
        <a href="#" id="fieldset5" class="control">link 5</a><br/>
    </div>

    <div class="fieldset5" id="fs5">
        fieldset5: <input type="text" name="fld5"><br />
        &nbsp;<br />
    </div>
</div>​ 
```

# c - OS/X 和 Linux 之间的 tcphdr 字段名称更改

> ID：14130692
> 
> 赞同：2
> 
> 时间：2013-01-02T23:08:47.713
> 
> 标签：c, linux, tcp, bsd

我在 OS/X 上开发了一些网络代码，但我被 struct tcphdr 中重命名的字段所吸引。我收到了一堆形式的错误：`"dpkt.c:597:36: error: ‘struct tcphdr’ has no member named ‘th_sport’ "`. 我试过`#define __FAVOR_BSD 1`and `#define _BSD_SOURCE 1`，没有成功。

命令行是：

```
$ g++ -o dpkt -g  dpkt.c -lpcap 
```

我尝试时没有变化

```
$ g++ -o dpkt -g  -D_BSD_SOURCE=1 dpkt.c -lpcap 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:40:29.930

在这种特殊情况下，顺序定义很重要。不确定您是否意识到这一点，但请尝试添加

```
#define _BSD_SOURCE
#define __FAVOR_BSD 
```

按照文件开头某处的特定顺序。

# java - Java小程序加载图像不工作

> ID：14130693
> 
> 赞同：-1
> 
> 时间：2013-01-02T23:08:54.367
> 
> 标签：java, applet

我正在尝试创建一个加载 52 张牌的小程序，将它们洗牌（使用随机数生成器），然后在两排五张中显示牌组的前 10 张牌。这是我的代码，但它似乎没有打印任何图像。

```
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Color;

public class cards extends Applet {
Image c1;
Image c2;
Image c3;
Image c4;
Image c5;
Image c6;
Image c7;
Image c8;
Image c9;
Image c10;
Image cj;
Image cq;
Image ck;
Image h1;
Image h2;
Image h3;
Image h4;
Image h5;
Image h6;
Image h7;
Image h8;
Image h9;
Image h10;
Image hj;
Image hq;
Image hk;
Image d1;
Image d2;
Image d3;
Image d4;
Image d5;
Image d6;
Image d7;
Image d8;
Image d9;
Image d10;
Image dj;
Image dq;
Image dk;
Image s1;
Image s2;
Image s3;
Image s4;
Image s5;
Image s6;
Image s7;
Image s8;
Image s9;
Image s10;
Image sj;
Image sq;
Image sk;
    public void init(){
    this.setBackground( Color.blue );
    c1 = getImage ( getDocumentBase (), "cards/c1.gif" );
        c2 = getImage ( getDocumentBase (), "cards/c2.gif" );
        c3 = getImage ( getDocumentBase (), "cards/c3.gif" );
        c4 = getImage ( getDocumentBase (), "cards/c4.gif" );
        c5 = getImage ( getDocumentBase (), "cards/c5.gif" );
        c6 = getImage ( getDocumentBase (), "cards/c6.gif" );
        c7 = getImage ( getDocumentBase (), "cards/c7.gif" );
        c8 = getImage ( getDocumentBase (), "cards/c8.gif" );
        c9 = getImage ( getDocumentBase (), "cards/c9.gif" );
        c10 = getImage ( getDocumentBase (), "cards/c10.gif" );
        cj = getImage ( getDocumentBase (), "cards/cj.gif" );
        cq = getImage ( getDocumentBase (), "cards/cq.gif" );
        ck = getImage ( getDocumentBase (), "cards/ck.gif" );
        h1 = getImage ( getDocumentBase (), "cards/h1.gif" );
        h2 = getImage ( getDocumentBase (), "cards/h2.gif" );
        h3 = getImage ( getDocumentBase (), "cards/h3.gif" );
        h4 = getImage ( getDocumentBase (), "cards/h4.gif" );
        h5 = getImage ( getDocumentBase (), "cards/h5.gif" );
        h6 = getImage ( getDocumentBase (), "cards/h6.gif" );
        h7 = getImage ( getDocumentBase (), "cards/h7.gif" );
        h8 = getImage ( getDocumentBase (), "cards/h8.gif" );
        h9 = getImage ( getDocumentBase (), "cards/h9.gif" );
        h10 = getImage ( getDocumentBase (), "cards/h10.gif" );
        hj = getImage ( getDocumentBase (), "cards/hj.gif" );
        hq = getImage ( getDocumentBase (), "cards/hq.gif" );
        hk = getImage ( getDocumentBase (), "cards/hk.gif" );
        d1 = getImage ( getDocumentBase (), "cards/d1.gif" );
        d2 = getImage ( getDocumentBase (), "cards/d2.gif" );
        d3 = getImage ( getDocumentBase (), "cards/d3.gif" );
        d4 = getImage ( getDocumentBase (), "cards/d4.gif" );
        d5 = getImage ( getDocumentBase (), "cards/d5.gif" );
        d6 = getImage ( getDocumentBase (), "cards/d6.gif" );
        d7 = getImage ( getDocumentBase (), "cards/d7.gif" );
        d8 = getImage ( getDocumentBase (), "cards/d8.gif" );
        d9 = getImage ( getDocumentBase (), "cards/d9.gif" );
        d10 = getImage ( getDocumentBase (), "cards/d10.gif" );
        dj = getImage ( getDocumentBase (), "cards/dj.gif" );
        dq = getImage ( getDocumentBase (), "cards/dq.gif" );
        dk = getImage ( getDocumentBase (), "cards/dk.gif" );
        s1 = getImage ( getDocumentBase (), "cards/s1.gif" );
        s2 = getImage ( getDocumentBase (), "cards/s2.gif" );
        s3 = getImage ( getDocumentBase (), "cards/s3.gif" );
        s4 = getImage ( getDocumentBase (), "cards/s4.gif" );
        s5 = getImage ( getDocumentBase (), "cards/s5.gif" );
        s6 = getImage ( getDocumentBase (), "cards/s6.gif" );
        s7 = getImage ( getDocumentBase (), "cards/s7.gif" );
        s8 = getImage ( getDocumentBase (), "cards/s8.gif" );
        s9 = getImage ( getDocumentBase (), "cards/s9.gif" );
        s10 = getImage ( getDocumentBase (), "cards/s10.gif" );
        sj = getImage ( getDocumentBase (), "cards/sj.gif" );
        sq = getImage ( getDocumentBase (), "cards/sq.gif" );
        sk = getImage ( getDocumentBase (), "cards/sk.gif" );

    }
    public void paint( Graphics screen ){
    int x = 10;
    int y = 10;
    int x2 = 10;
    int y2 = 110;

        Image [] cards = new Image [ 52 ];
        cards [ 0 ] = c1;
        cards [ 1 ] = c2;
        cards [ 2 ] = c3;
        cards [ 3 ] = c4;
        cards [ 4 ] = c5;
        cards [ 5 ] = c6;
        cards [ 6 ] = c7;
        cards [ 7 ] = c8;
        cards [ 8 ] = c9;
        cards [ 9 ] = c10;
        cards [ 10 ] = cj;
        cards [ 11 ] = cq;
        cards [ 12 ] = ck;
        cards [ 13 ] = h1;
        cards [ 14 ] = h2;
        cards [ 15 ] = h3;
        cards [ 16 ] = h4;
        cards [ 17 ] = h5;
        cards [ 18 ] = h6;
        cards [ 19 ] = h7;
        cards [ 20 ] = h8;
        cards [ 21 ] = h9;
        cards [ 22 ] = h10;
        cards [ 23 ] = hj;
        cards [ 24 ] = hq;
        cards [ 25 ] = hk;
        cards [ 26 ] = d1;
        cards [ 27 ] = d2;
        cards [ 28 ] = d3;
        cards [ 29 ] = d4;
        cards [ 30 ] = d5;
        cards [ 31 ] = d6;
        cards [ 32 ] = d7;
        cards [ 33 ] = d8;
        cards [ 34 ] = d9;
        cards [ 35 ] = d10;
        cards [ 36 ] = dj;
        cards [ 37 ] = dq;
        cards [ 38 ] = dk;
        cards [ 39 ] = s1;
        cards [ 40 ] = s2;
        cards [ 41 ] = s3;
        cards [ 42 ] = s4;
        cards [ 43 ] = s5;
        cards [ 44 ] = s6;
        cards [ 45 ] = s7;
        cards [ 46 ] = s8;
        cards [ 47 ] = s9;
        cards [ 48 ] = s10;
        cards [ 49 ] = sj;
        cards [ 50 ] = sq;
        cards [ 51 ] = sk;
    for (int i = 0; i < 4; i++){
        screen.drawImage (cards[( int ) ( float ) Math.random () * 52 - 1], x, y, this);
        x = x + 5;
    }
    for (int i = 0; i < 4; i++){
        screen.drawImage (cards [( int ) ( float ) ( Math.random () ) * 52 - ( int ) ( 1 )], x2, y2, this);
        x = x + 10;
    }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:27:12.427

即使加载了图像，您的小程序也会在第一次绘制事件时终止，因为随机化总是生成 -1 的卡片索引：

```
( int ) ( float ) Math.random () * 52 - 1 
```

这始终是 -1，因为随机数是在 [0-1) 之间生成的，并且它被转换为整数，这会将它向下舍入为零。在那之后，你减去一个。这是一个无效的索引，你会得到一个异常。

将此随机化代码更改为常数 0 以检查加载是否正确完成。

如果没问题，您应该第一次真正将卡加载到数组中。这样你就可以体面地洗牌。另外，尝试将卡片包装到某个类，因为稍后它会派上用场。

# java - 当一张表小得多时，编程联接表或使用 SQL 联接语句是否更快？

> ID：14130695
> 
> 赞同：3
> 
> 时间：2013-01-02T23:09:15.477
> 
> 标签：java, sql, oracle, join

当一张表小得多时，以编程方式连接表或使用 SQL Join 语句会更快吗？

更具体地说，如何从`hashmap<int, string>`较小的表中获取字符串并将其值设置为从较大表返回的对象与预先连接数据库中的表相比如何？两张桌子的相对大小有区别吗？

***更新：***改写我的问题。是否抓取较大表的**子集**（我关心的 5,000 - 20,000 条记录）然后以编程方式加入较小的表（我将在本地缓存）执行 SQL 连接？SQL 连接适用于整个表还是仅适用于将返回的较大表的子集？

SQL 连接语句：

```
SELECT id, description
FROM values v, descriptions d
WHERE v.descID=d.descID
AND v.something = thingICareAbout; 
```

个人陈述：

```
SELECT id, descID
FROM values
WHERE v.something = thingICareAbout;

SELECT descID, description
FROM descriptions d; 
```

程序化加入：

```
for (value : values){
    value.setDescription(descriptions.get(value.getDescID))
} 
```

***附加信息：***大表中共有 800,000,000 条记录，对应于小表中的 3,000 个值。大多数搜索返回 5,000 - 20,000 个结果。这是一个甲骨文数据库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T23:19:50.837

想都别想。数据库至少可以尽可能快地在本地执行操作，而无需通过网络传输所有数据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T23:14:44.973

一般来说，像这样的连接表是 SQL 数据库优化的那种操作，所以很有可能在这种操作上它们很难被击败。

如果您尝试“手动”进行连接，则两个表的相对大小可能会有所不同，因为您在处理时必须考虑额外的内存消耗以将更大的表数据保存在内存中。

虽然这个例子很容易做对，但如果你自己进行连接，你也会失去一个内置的数据完整性检查，如果你让它进行连接，数据库会给你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T23:20:02.777

可能 SQL 会更快地完成这项工作。据我了解，如果您在程序中执行此操作，则必须将数据库中的 800,000,000 条记录加载到应用程序的内存中，然后将 3,000 条用于小表，然后匹配每条记录，丢弃几乎所有记录（您只期望几千个结果）并显示给用户。

如果您在 oracle 中的正确列上放置索引（两个表中的 descID），那么它将能够非常快速地找到连接记录，并且只需加载您期望的 5,000-20,000。

话虽如此，但最简单的找出方法是测试两者并取数字！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T23:30:07.350

如果在内存中加入，则需要下载 800,000,000 + 3,000 条记录。如果您在数据库中进行连接，则每次需要下载 5,000 - 20,000 个结果。哪个听起来更快？提示：如果您进行 100,000 次搜索，第一个选项*可能*会更快。

# android - 如何将未发布的应用从我的开发者控制台上传到我的设备？

> ID：14130697
> 
> 赞同：0
> 
> 时间：2013-01-02T23:09:22.580
> 
> 标签：android

我将我的应用程序的新版本上传到我的 Android 开发者控制台。但是，我如何真正将这个应用程序从控制台下载到我的手机上呢？

应用程序已发布。但是我需要测试的当前版本尚未发布。那么如何将未发布的版本发送到我的手机？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:12:57.747

只需重新安装您的应用程序

1.  卸载应用程序

    adb 卸载 package_name

2.  安装你的开发版本

    adb 安装 app.apk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:13:25.500

您可以尝试导出 .apk 文件并复制到您的手机中。然后你就可以安装它了。如果您使用的是 Eclipse（带有 Emulator），则在 Emulator 中运行应用程序后，该文件位于 bin 目录中。

# youtube-api - 如何使用 Youtube API json 而不是通过 javascript API/xml api 将 youtube 视频作为 HD/NEW/3D 电影查找？

> ID：14130698
> 
> 赞同：0
> 
> 时间：2013-01-02T23:09:35.467
> 
> 标签：youtube-api, gdata

我在我的网络搜索中看到他们正在检索`hd`、、`3d`和`new`视频过滤器（左下角），我需要相同的功能。

> search.mywebsearch.com/mywebsearch/video.jhtml?searchfor=ipod

是否可以使用 youtube获取搜索过滤`hd`器？`3d``new``jsonc`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:27:07.863

你为什么不那样做？

[https://gdata.youtube.com/feeds/api/videos?q=birds&alt=jsonc&prettyprint=True&hd=true&3d=true&orderby=published&v=2](https://gdata.youtube.com/feeds/api/videos?q=birds&alt=jsonc&prettyprint=True&hd=true&3d=true&orderby=published&v=2)

干杯

# c++ - C++ 中的 Eigen MatrixXd 推回

> ID：14130699
> 
> 赞同：10
> 
> 时间：2013-01-02T23:09:37.880
> 
> 标签：c++, matrix, eigen

Eigen 是 C++ 中一个众所周知的矩阵库。我很难找到一个内置函数来简单地将一个项目推到矩阵的末尾。目前我知道可以这样做：

```
Eigen::MatrixXd matrix(10, 3);
long int count = 0;
long int topCount = 10;
for (int i = 0; i < listLength; ++i) {
    matrix(count, 0) = list.x;
    matrix(count, 1) = list.y;
    matrix(count, 2) = list.z;
    count++;
    if (count == topCount) {
        topCount *= 2;
        matrix.conservativeResize(topCount, 3);
    }
}
matrix.conservativeResize(count, 3); 
```

这将起作用（*某些语法可能已失效*）。但是对于一件简单的事情来说，它非常复杂。是否已经有内置功能？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T00:59:28.583

特征矩阵没有这样的功能。这样做的原因是这样的函数要么非常慢，要么使用过多的内存。

为了使`push_back`函数不会过于昂贵，它必须像您所做的那样在空间不足时将矩阵的容量增加一些因素。但是，在处理矩阵时，内存使用通常是一个问题，因此矩阵的容量大于必要的容量可能会出现问题。如果它改为增加大小`rows()`或`cols()`每次操作将是`O(n*m)`. 这样做以填充整个矩阵`O(n*n*m*m)`，即使是中等大小的矩阵也会非常慢。

此外，在线性代数中，矩阵和向量的大小几乎总是恒定的并且事先已知。通常在调整矩阵大小时，您并不关心矩阵中的先前值。这就是特征`resize`函数不保留旧值的原因，这与`std::vector`'s不同`resize`。

我能想到的唯一情况是您事先不知道矩阵的大小是从文件中读取时。在这种情况下，我会先将数据加载到标准容器中，例如`std::vector`使用`push_back`，然后将其复制到已经调整大小的矩阵中，或者如果内存很紧，则通过文件运行一次以获取大小，然后再次复制值.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-03T01:10:31.060

没有这样的功能，但是，您可以自己构建类似的东西：

```
using Eigen::MatrixXd;
using Eigen::Vector3d;

template <typename DynamicEigenMatrix>
void push_back(DynamicEigenMatrix& m, Vector3d&& values, std::size_t row)
{
    if(row >= m.rows()) {
        m.conservativeResize(row + 1, Eigen::NoChange);
    }
    m.row(row) = values;
}

int main()
{
    MatrixXd matrix(10, 3);
    for (std::size_t i = 0; i < 10; ++i) {
       push_back(matrix, Vector3d(1,2,3), i);
    }
    std::cout << matrix << "\n";
    return 0;
} 
```

但是，如果这需要执行太多的调整大小，那将会非常缓慢。

# java - 安排活动日历的最佳 Swing 解决方案

> ID：14130704
> 
> 赞同：1
> 
> 时间：2013-01-02T23:10:29.927
> 
> 标签：java, swing, user-interface, architecture, awt

朋友们！

我想创建一个像这样的简单日程事件日历

![在此处输入图像描述](../Images/88ac81dc6fd54dc152e2d987c9dfb45b.png)

问题：为了拥有如此灵活的网格，我可以在 Swing/AWT 层次结构中使用什么。

PS我试图用Custom CellRenderers在JTable方向上做一些解决方案，但它很丑。也许它可以类似于 JPanel-in-JPanel 解决方案？你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:11:57.347

这不是一个简单的解决方案，您有多种选择...

因为内容可以扩展到多行，`JTable`所以并不是一个真正可行的解决方案（可能有很多方法可以做到，但随着时间的推移，每种方法都会变得更加复杂......而且我见过的任何解决方案都没有考虑到考虑当前的外观和感觉）。

但是如果你有兴趣，你可以看看

*   [spantable](http://code.google.com/p/spantable/)（没用过）
*   [JTable 示例](http://www.crionics.com/public/swing_examples/JTableExamples4.html)（未使用）

您的另一个选择是创建一个能够呈现数据模型的自定义组件。

我个人会专注于一个单独的专栏，让它成为它的面板。使用自定义布局管理器，您可以根据数据模型的要求布局其他组件。

一旦你弄清楚了，你就可以扩展这个概念以允许多行。

这使您在如何布置和渲染各个组件方面具有更大的灵活性，但非常复杂。

我会看看[如何使用滚动窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)，这样你就可以看到行和列标题是如何工作的；）

# java - 无法正确使用 BufferedReader 类

> ID：14130705
> 
> 赞同：0
> 
> 时间：2013-01-02T23:10:32.770
> 
> 标签：java, keyboard, bufferedreader

嗨，我正在使用 Eclipse，我在 Windows 7 系统上工作。我想使用 BufferedReader 类从键盘读取一些字符。我在 Thread 类中使用该代码：

```
public void run()
{
    int ch;
    while(!done)
    {
        try
        {
            BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
            ch = keyboard.read();
            System.out.println(ch);
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //System.out.println(s);
        System.out.println("petla");
    }
} 
```

问题是，在我运行线程后（它进入循环）并按下一些按钮并确认使用 enter(\n) 没有发生任何事情。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:18:34.737

您正在丢失缓冲数据。不要一直`BufferedReader`为每个角色创造一个新角色。使用在循环之前创建的同一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:40:31.507

现在我明白了问题所在。我以为当我按下符号时，它会立即被缓冲，但我必须将它写入控制台。我需要阅读未在控制台中输入的按下按钮。例如，有人建议我初始化 JTextField 并使用焦点读取符号。但它是优雅的分辨率吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T00:14:03.147

确定我的问题。我有一个看起来像这样的窗口应用程序：http: [//img846.imageshack.us/img846/5859/scaning.jpg](http://img846.imageshack.us/img846/5859/scaning.jpg) 我需要按下一些按钮（不集中在 JTextField 中）并在此基础上向 JTable 添加一些位置. 但是，当我打开我的应用程序时，我无法在控制台上放置标志。这很简单。我只想打开我的全屏程序，输入一些字符并在此基础上将位置添加到 JTable。我不能说得更清楚。谢谢回复。

# javascript - 单击按钮 > 添加 div > 在 div 中按钮以删除 div

> ID：14130706
> 
> 赞同：0
> 
> 时间：2013-01-02T23:10:39.850
> 
> 标签：javascript, jquery, javascript-events

我有一个页面，需要可以添加然后删除添加的 div。div 不能隐藏，因为它应该包含设置，所以当删除 div/div = 时，这个 div/div 中的设置也会被删除。加载/添加的 div 是：`#settings1` `#settings2` `#setting3`.

在页面中有一个应该添加 div 的按钮（例如：单击 3 次添加`#settings1` `#settings2` `#settings3`：

```
<a href="" class="design_button">Click here to add more divs</a> 
```

然后有一个 div`#settings1` `#settings2` `#settings3`在加载时应该接收内容（）：

```
<div id="this_div_contains_settings">Here the #settings gets loaded in, then deleted if its not needed anymore</div> 
```

然后在另一个页面（content.html）中有包含设置的 div #settings：

```
<div id="settings1">Some forms etc.</div>
<div id="settings2">Some forms etc.</div>
<div id="settings3">Some forms etc.</div> 
```

在这些 div 中有一个按钮，可以在添加特定 div 后将其删除。

```
<a href="" class="design_button">Remove this div</a> 
```

* * *

**基本上：**单击“单击此处添加更多 div”按钮将多个`#settings`div 添加到 div`#this_div_contains_divs`中。点击 div 中的“Remove this div”按钮，`#settings`可以删除当前的 div。

**我做了一张图片来描述我的意思：http: [//imgur.com/DVPSR](http://imgur.com/DVPSR)**

我需要一些帮助：

通过单击按钮加载内容`#settings1` `#settings2` `#settings3`，`#this_div_contains_settings`然后通过单击该 div 中的按钮删除当前 div。

我希望有人可以帮助我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:27:33.240

为 index.html 页面使用 jQuery 看起来像这样：

HTML：

```
<a href="#" class="design_button add">Click here to add more divs</a>
<div id="this_div_contains_settings"></div> 
```

jQuery（您需要加载高于 1.7.2 的 jQuery 版本才能使 on() 工作）：

```
$(function(){
   var number = 1;
   $('a.add').click(function(e){
      e.preventDefault();
      $('#this_div_contains_settings').append('<div id="settings'+number+'">Some forms etc.<a href="#" class="design_button">Remove this div</a></div>');
      number++;
   });
   $('#this_div_contains_settings').on('click','a.design_button', function(e){
      e.preventDefault();
      $(this).parent().remove();
   });
}); 
```

在这里工作小提琴：http: [//jsfiddle.net/WdcTK/](http://jsfiddle.net/WdcTK/)

然后将数据添加到 cookie 仍然...

# ruby-on-rails - 尝试将 rails 3.0 站点从 ruby 1.8.7 升级到 1.9.3 时 Bundler 出现问题

> ID：14130707
> 
> 赞同：1
> 
> 时间：2013-01-02T23:10:44.427
> 
> 标签：ruby-on-rails, ruby, bundler

我正在尝试将我的所有应用程序从 ruby​​ 1.8.7 升级到 1.9.3。

一些应用程序运行良好。但是，我有一个 rails 3.0.x 站点，当我运行它或使用 bundle install 时，它会不断抛出有关错误捆绑器版本的错误。

```
Bundler could not find compatible versions for gem "bundler":
  In Gemfile:
    refinerycms (~> 0.9.8.5) ruby depends on
      bundler (~> 1.0.0) ruby

  Current Bundler version:
    bundler (1.2.3)

This Gemfile requires a different version of Bundler.
Perhaps you need to update Bundler by running `gem install bundler`? 
```

我同时安装了 bundler 1.2.3（乘客需要）和 bundler 1.0.22。但是，它不会让我运行`bundle install`，并且运行该站点也会引发一个错误，即 rails 3.0 需要旧版本的 bundler。

更新：我使用旧版本的捆绑器安装了我的 gem：

```
bundle _1.0.3_ install 
```

就安装 gems 而言，这工作得很好，但是当我运行该站点时，Passenger 仍然抱怨我正在使用捆绑程序 1.2.3 并且它需要 (~>1.0.0)。~> 不是表示“大于 1.0”吗？我在 Ruby 1.8.7 下没有任何这些问题。

这是我的 Gemfile。如您所见，我尝试在我的 gemfile 中包含旧版本的 bundler 并排除。两种方法都行不通。:(

```
source 'http://rubygems.org'

#gem 'bundler', '1.0.3'
gem 'rails', '3.0.0'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2', '0.2.6'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug'

# Bundle the extra gems:
# gem 'bj'
# gem 'nokogiri'
# gem 'sqlite3-ruby', :require => 'sqlite3'
# gem 'aws-s3', :require => 'aws/s3'

# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
# group :development, :test do
#   gem 'webrat'
# end

# REFINERY CMS ================================================================

# Specify the Refinery CMS core:
gem 'refinerycms',              '~> 0.9.8.5'

# Specify additional Refinery CMS Engines here (all optional):
gem 'refinerycms-inquiries',    '~> 0.9.8.10'
gem 'refinerycms-search',       '~> 0.9.8'
gem "refinerycms-news",         '~> 0.9.9'

# Add i18n support (optional, you can remove this if you really want to).
gem 'refinerycms-i18n',         '~> 0.9.8.7'

# Figure out how to get RMagick:
rmagick_options = {:require => false}
rmagick_options.update({
  :git => 'git://github.com/refinerycms/rmagick.git',
  :branch => 'windows'
}) if Bundler::WINDOWS

# Specify a version of RMagick that works in your environment:
gem 'rmagick',                  '~> 2.12.2', rmagick_options

# END REFINERY CMS ============================================================

# USER DEFINED

# END USER DEFINED
gem 'validates_timeliness', '~> 3.0.0'

engine_path = File.join(File.dirname(__FILE__), 'vendor/engines')

#puts engine_path

gem 'refinerycms-venues', '1.0', :path => "./vendor/engines", :require => 'venues'
gem 'refinerycms-events', '1.0', :path => './vendor/engines', :require => 'events'
gem 'refinerycms-available_spaces', '1.0', :path => './vendor/engines', :require => 'available_spaces'
gem 'refinerycms-contents', '1.0', :path => 'vendor/engines', :require => 'contents'
gem 'refinerycms-news_alerts', '1.0', :path => 'vendor/engines', :require => 'news_alerts' 
```

如果我安装了较新版本的捆绑程序，它就像 Rails 3.0 将不允许我运行该站点，但这似乎很疯狂。拥有较新版本的捆绑程序会破坏旧网站吗？

# c++ - 使用 C++ 在 Mac OS X 上创建应用程序？（不含可可）

> ID：14130708
> 
> 赞同：3
> 
> 时间：2013-01-02T23:10:49.713
> 
> 标签：c++, c, xcode, macos, opengl

似乎在 Xcode 4 中不再有一种方法可以创建不受限于使用 C 或 C++ 的命令行的应用程序。我想这样做，但是 Glut 似乎是唯一可用于 Mac 的可与 C++ 和 OpenGL 一起使用的框架之一，但是 gluts 功能开始停止在现代操作系统上工作。是否有其他替代方法可以让我在 Mac 上使用 C++ 或 C 进行软件开发？它不必局限于使用 xcode 或 opengl。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T00:47:49.510

是的，这是可能的，但这可能不是一个好主意。真正的问题是您要解决什么问题？

如果您只是不喜欢 Obj-C，那么编写一个非常薄的 shim 来包装您在 C++ 中关心的调用应该很简单。

如果你想证明一个观点，你实际上可以用纯 C 代码直接调用 Obj-C 运行时。例如：[使用 objc_msgSend 调用具有命名参数的 Objective C 函数](https://stackoverflow.com/questions/2573805/using-objc-msgsend-to-call-a-objective-c-function-with-named-arguments)

如果是其他问题，请赐教，以便我们更好地回答您的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T23:22:55.330

QT 是您最好的选择。它带有一个严肃的 IDE，并且库是用非常好的和直观的 C​​++ 编写的。

QT 可以在这里找到：http: [//qt-project.org/downloads](http://qt-project.org/downloads)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T02:04:14.617

如果您想要的只是一个窗口、一个 OpenGL 上下文和用户界面，那么请采用 SDL 方式。完全用 C 语言编写，跨平台，几乎面向对象（无论如何，大多数数据类型都是结构）。它也非常节省内存（它的核心 DLL 大小小于 500KB，Linux 上的无窗口程序使用的 RAM 不到 1MB），不像 Qt 那样的怪物。

我还推荐[LazyFoo 的教程](http://www.lazyfoo.net/SDL_tutorials/)开始，因为它们确实涵盖了从 C++ 程序员的角度学习，而不是 C 程序员。

# wcf - Visual Studio Express 2012 - 启用 Silverlight 的 WCF 服务？

> ID：14130715
> 
> 赞同：0
> 
> 时间：2013-01-02T23:11:18.030
> 
> 标签：wcf, entity-framework, silverlight-5.0

我刚刚使用 Visual Studio Express 2012 for Web 开始了一个新的 Silverlight 项目。

我使用 EF 5 创建了启用 Silverlight 的 WCF 服务来访问 SQL Server 数据库。

我遇到的问题是该服务似乎无法返回从数据库中检索到的任何实体。返回一个新实体或任何旧对象就好了，但是当我尝试从上下文中返回一个实体时，我得到以下异常：

```
{System.ServiceModel.CommunicationException: The remote server returned an error: NotFound. --->      System.Net.WebException: The remote server returned an error: NotFound. ---> System.Net.WebException:  The remote server returned an error: NotFound.
   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)
   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClassa.<EndGetResponse>b__9(Object sendState)
   at System.Net.Browser.AsyncHelper.<>c__DisplayClass4.<BeginOnUI>b__0(Object sendState)
   --- End of inner exception stack trace ---
   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.ClientBase`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result)
   at NewProj.DataSvcRef.DataServiceClient.DataServiceClientChannel.EndGetAgency(IAsyncResult result)
   at NewProj.DataSvcRef.DataServiceClient.NewProj.DataSvcRef.DataService.EndGetAgency(IAsyncResult result)
   at NewProj.DataSvcRef.DataServiceClient.OnEndGetAgency(IAsyncResult result)
   at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)} 
```

服务方法代码再简单不过了：

```
[OperationContract]
public Contact GetContact(int aID)
{
  Contact res = null;
  using (var db = new OFBEntities())
  {
    try
    {
      res = db.Contacts.Find(aID);
    }
    catch (Exception ex)
    {
      res = null;
    }

    return res;
  }
} 
```

正如我所提到的，如果我返回一个新创建的对象（*return new Contact(){ name="test contact};*），或者返回一个不在上下文中的类型（例如一个整数），一切正常。

这是快速版本的限制，还是我忘记了一些设置？过去，我创建了一些使用 VS 2010、Silverlight 4 消耗数据服务的 Silverlight 应用程序，我不记得需要设置什么特别的东西，但也许我只是忘记了我做了什么？

任何帮助表示赞赏！

**编辑：** 它与 DbContext 及其序列化方式有什么关系吗？我以前从未使用过 DbContext，我总是使用 EF 4 中的默认 ObjectContext ...

**EDIT2：解决方案** 已经有一段时间了，但我还有其他事情要做：o）如果有人在同一条船上，问题出在服务的序列化中。DbContext 默认创建代理，不同意序列化。我还不确定为什么——事实上，我需要对这些代理进行自我教育——但是禁用它们可以解决我的序列化问题。感谢 Pawel 的评论，我错误地认为我的序列化工作正常，重新检查服务器端错误让我回到了正确的轨道上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:41:47.813

问题在于 DBContext 的自动代理创建，它干扰了序列化。默认情况下，代理在 DBContext 中处于启用状态，您可以在类构造函数中禁用它们

```
 this.Configuration.ProxyCreationEnabled = false; 
```

或在创建 DBContext 的实例之后

```
 using (var db = new myDBContext())
  {
    db.Configuration.ProxyCreationEnabled = false;

    ...
  } 
```

不知道为什么，但它的工作原理。是时候去阅读了！

# azure - Windows Azure 门户连接字符串

> ID：14130719
> 
> 赞同：2
> 
> 时间：2013-01-02T23:11:42.623
> 
> 标签：azure, azure-sql-database

关于 Windows azure 门户中网站的连接字符串部分的几个问题：

门户中的设置是否优先于 web.config 中的设置？如果是这样，我不应该在 web.config 文件中包含连接字符串吗？门户中的设置是否有时称为 app.config？

我可以在 Windows azure 门户中为 ado.net 实体设置连接字符串吗？这似乎不适用于这种特定类型的连接字符串。

在门户中，我包含了以下连接字符串，并将其命名为与我的 web.config 中的名称相同的名称：

metadata=res:// */Models.TABLENAME.csdl|res://* /Models.TABLENAME.ssdl|res://*/Models.TABLENAME.msl;provider=System.Data.SqlClient;provider connection string="Server =tcp:SERVERNAME.database.windows.net;Database=DATABASENAME;User ID=USER;Password=PASSWORD;Trusted_Connection=False;Encrypt=True;

我的 web.config 文件中的连接字符串在我的开发环境中工作，但我认为我在 azure 门户上输入了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:06:16.250

“门户中的设置是否优先于 web.config 中的设置？” **是的。**

“如果是这样，我不应该在 web.config 文件中包含连接字符串吗？” **使用 Azure 门户中找到的连接字符串并将其插入到您的 web.config 中。当然，这不适用于您使用本地数据库的情况。然后你应该使用本地连接字符串。**

“门户中的设置是否有时称为 app.config？” **不，如果您仍然在连接字符串的主题上，则不会。**

“我可以在 Windows azure 门户中为 ado.net 实体设置连接字符串吗？这似乎不适用于这种特定类型的连接字符串” **在步骤 2（2）下查看我关于基本设置的博客文章。现在，转到管理门户并创建一个新数据库。）[http://geekswithblogs.net/MagnusKarlsson/archive/2012/10/31/add-sql-azure-database-to-azure-web-role-and-persist。 aspx](http://geekswithblogs.net/MagnusKarlsson/archive/2012/10/31/add-sql-azure-database-to-azure-web-role-and-persist.aspx)**

# batch-file - 批处理：在 for 循环中评估变量的文件名

> ID：14130722
> 
> 赞同：0
> 
> 时间：2013-01-02T23:12:13.103
> 
> 标签：batch-file, filenames, evaluate

包含变量的文件名和目录正在内部过程中进行评估。如何在不评估的情况下将文件名批量存储为变量？

EG：我的路径是：

```
"C:\Rare\Names in a File\%CD%\"
                              batchfile.bat
                              file.txt 
```

我想在这个目录中运行一个脚本：

```
REM #####BATCHFILE.BAT#######

pushd "%dp0"
for %%A in ("C:\Test") do set EXEPATH=%%~A
for %%A in ("Test.exe") do set EXECUTABLE=%%~A
for %%A in ("%CD%") do set DIRNAME=%%~A
for %%A in ('dir /b /a-d "*.txt"') do (
SET FILENAME=%%~A
CALL :PROCEDURE
)
exit /b
:PROCEDURE
start /w "" "%EXEPATH%\%EXECUTABLE%" "%DIRNAME%\%FILENAME%" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:15:21.690

我已经批量制作了一个菜单，这与您的问题有点不同。

每个文件需要一个变量。最简单的方法是增加他们的名字：

```
var1=path1\exe1
var2=path1\exe2
var3=path2\exe1
var4=path2\exe2 
```

在 for 循环中的每个变量上，您都可以调用一个过程，该过程将带有路径的文件保存在变量中。

```
for ....(
   call :Var %path% %file%
)

:Var
set /a id+=1
set %id%.path=%1&& shift
set %id%.file=%1
goto:EOF

after this you could do

for ..(1,1,%id%) do (
   start !%id%.path!\!%id%.file!
) 
```

如果你想看看我的批处理菜单，你可以联系我。

# vb.net - 为什么我的 IF 语句不起作用

> ID：14130727
> 
> 赞同：0
> 
> 时间：2013-01-02T23:12:30.227
> 
> 标签：vb.net, if-statement

任务是创建一个评分系统，因此当用户输入他们的评分（满分 5）时，评分将显示在下面的星号中：

例如`4 = ****`

，但我相信我的代码编写正确，但它似乎仍然无法正确执行。

```
 Protected Sub btnRate_Click(sender As Object, e As EventArgs) Handles btnRate.Click

        Dim txtStar As Integer

        If txtStar = "1" Then
            lblStar.Text = "*"
        End If

        If txtStar = "2" Then
            lblStar.Text = "**"
        End If

        If txtStar = "3" Then
            lblStar.Text = "***"
        End If

        If txtStar = "4" Then
            lblStar.Text = "****"
        End If

        If txtStar = "5" Then
            lblStar.Text = "*****"
        End If

    End Sub
End Class 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:32:57.050

试试这个。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim rate As Integer
    rate  = txtStar.Text
    lblStar.Text = String.Empty
    For index = 1 To rate
        lblStar.Text += "*"
    Next
End Sub 
```

**编辑**

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim rate As Integer
    rate = txtStar.Text
    If rate = 1 Then
        lblStar.Text = "*"
    ElseIf rate = 2 Then
        lblStar.Text = "**"
    ElseIf rate = 3 Then
        lblStar.Text = "***"
    ElseIf rate = 4 Then
        lblStar.Text = "****"
    ElseIf rate = 5 Then
        lblStar.Text = "*****"
    Else
        lblStar.Text = String.Empty
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:15:34.070

文本框也是如此`txtStar`。您应该使用`Int32.Parse`或`TryParse`将文本转换为数字，然后您可以使用[此字符串构造函数](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)：

```
Dim starCount As Int32
Dim canBeParsed = Int32.TryParse(txtStar.Text, starCount)
If canBeParsed Then
    lblStar.Text = New String("*"c, starCount)
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:16:39.060

如果 txtStar 是一个文本框，那么您应该将此文本框的 Text 属性与您的常量进行比较

```
 If txtStar.Text = "1" Then
       lblStar.Text = "*"
   End If 
```

等等 ...

但是不清楚代码中声明的整数变量的含义是什么

```
 Dim txtStar As Integer 
```

您没有设置初始值，所以我认为这只是一个死代码，因此可以删除。
但是如果你想使用它，你需要分配一个值然后比较....

```
txtStar = Convert.ToInt32(txtStar.Text)
If txtStar = 1 Then
    lblStar.Text = "*"
End If 
```

请注意我如何删除与字符串常量的比较并使用整数常量。
此外，这个变量的不同名称可能不会那么令人困惑......

# ruby - 构建 ruby gem 原生扩展需要多长时间？

> ID：14130728
> 
> 赞同：1
> 
> 时间：2013-01-02T23:12:43.410
> 
> 标签：ruby, macos, gem

我在具有 4GB RAM 的全新 MacBook Pro 上运行以下命令：

```
sudo gem install json nokogiri uglifier therubyracer -V 
```

它显示了一些进展，但已停留在以下消息超过 1.5 小时：

```
...
/Library/Ruby/Gems/1.8/gems/json-1.7.6/tests/test_json_unicode.rb
/Library/Ruby/Gems/1.8/gems/json-1.7.6/tests/test_json_addition.rb
/Library/Ruby/Gems/1.8/gems/json-1.7.6/tests/test_json_generate.rb
/Library/Ruby/Gems/1.8/gems/json-1.7.6/tests/test_json_encoding.rb
/Library/Ruby/Gems/1.8/gems/json-1.7.6/tests/test_json_generic_object.rb
/Library/Ruby/Gems/1.8/gems/json-1.7.6/tests/test_json.rb
Building native extensions.  This could take a while... 
```

在 Activity Monitor 中，我看到它`xcrun`使用了 95% 的 CPU，并且在整个持续时间内一直在使用，并且尚未完成 json gem 的编译。这个构建过程需要多长时间？有什么办法可以加快速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:34:38.133

我通过从 App Store 安装 Xcode（即使我已经安装了 Xcode 命令行工具）然后运行 ​​Xcode 解决了这个问题。

要验证这是否正确完成，请运行以下命令：

```
xcode-select --print-path 
```

它应该显示：

```
/Applications/Xcode.app/Contents/Developer 
```

# entity-framework - 有什么方法可以控制 SqlEntityConnection 上的 AutoDetectChanges？

> ID：14130729
> 
> 赞同：5
> 
> 时间：2013-01-02T23:12:44.987
> 
> 标签：entity-framework, f#, type-providers

[本文](http://ilmatte.wordpress.com/2013/01/01/entity-framework-code-first-always-disable-autodetectchanges-when-importing-data/)提供了一些证据，证明在您的 Entity Framework 数据上下文中关闭 AutoDetectChanges 可以在插入大量实体时提供显着的性能改进。

```
context.Configuration.AutoDetectChangesEnabled = false; 
```

但是，[SqlEntityConnection 类型提供程序](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28Microsoft.FSharp.Data.TypeProviders.SqlEntityConnection%29;k%28DevLang-fsharp%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29&rd=true)提供的 DataContext似乎没有提供任何控制此设置的方法。

没有`context.Configuration`财产，也没有`context.DataContext.Configuration`财产。有一个`context.DataContext.ContextOptions`，但它甚至没有任何相似之处`AutoDetectChangesEnabled`。

类型提供者上下文的`DataContext`属性是 type [`System.Data.Objects.ObjectContext`](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)。有谁知道从那里影响这个特定环境的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T23:33:15.800

去年我写了一篇关于检测变化性能的非常相似的文章，你可以在这里找到：http: [//blog.staticvoid.co.nz/2012/5/7/entityframework_performance_and_autodetectchanges](http://blog.staticvoid.co.nz/2012/5/7/entityframework_performance_and_autodetectchanges)我的经验主要是 DbContext（它包装了 ObjectContext），但我做了一些搜索，发现以下内容

[与 ObjectContext 相比，为什么在 EF 4.1 中插入实体如此缓慢？](https://stackoverflow.com/questions/5943394/why-is-inserting-entities-in-ef-4-1-so-slow-compared-to-objectcontext)

这说明 ObjectContext 实际上并没有进行自动更改检测，所以这不是您应该担心的事情。但是，您仍然需要注意，大型对象图会减慢速度，因为所有快照跟踪方案都需要在某些时候检测到更改，这涉及对象图的完整枚举

# linux - 打印Unix中两个大文件不常见的行的最佳方法

> ID：14130733
> 
> 赞同：3
> 
> 时间：2013-01-02T23:13:02.490
> 
> 标签：linux, unix, awk

我有两个格式如下的文件。
**File1:** - 它包含 4 列。第一个字段是文本格式的 ID，其余列也是一些文本值。

```
id1 val12 val13 val14
id2 val22 val23 val24
id3 val32 val33 val34 
```

**文件**2 - 在文件 2 中，我只有 ID。

```
id1
id2 
```

**输出**

> ```
> id3 val32 val33 val34 
> ```

我的问题是：如何从第一个文件中查找 ID（第一个字段）未出现在第二个文件中的行。这两个文件的大小都非常大，file1 包含 4200 万行，大小为 8GB，file2 包含 3300 万个 ID。两个文件中的 ID 顺序可能不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:18:20.513

假设这两个文件是按 id 排序的，那么类似

```
join "-t " -j 1 -v 1 file1 file2 
```

应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T23:15:40.413

我并不是说这是“最好”的方法，因为最好可以包括许多权衡标准，但这是一种方法：

您可以使用`-f`选项指定`File2`包含搜索模式的文件来执行此操作`grep`：

```
grep -v -f File2 File1 > output 
```

正如@glennjackman 建议的那样：

> 强制 id 在行首匹配的一种方法：`grep -vf <(sed 's/^/^/' File2) File1`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T23:19:40.640

你可以用 awk 这样做：

```
awk 'FNR == NR { h[$1] = 1; next } !h[$1]' file2 file1 
```

第一个块从散列中收集`file2`id `h`。如果 id 中不存在，最后一部分 ( `!h[$1]`) 将执行默认块 ( ) 。`{ print $0 }``file2`

# build - 在 mac os x 上构建 z3

> ID：14130739
> 
> 赞同：6
> 
> 时间：2013-01-02T23:14:00.353
> 
> 标签：build, z3

我正在尝试在 mac os x 上构建[Z3 。](http://z3.codeplex.com/releases/view/95640)

在 README 文件之后，我刚刚执行了

```
autoconf
./configure
make 
```

得到一个错误“omp.h”文件未找到。

我将 omp.h 文件从目录复制`/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin11/4.2.1/include`到`lib`解决此问题。

然后，我`lib/buffer.h:243:13: error: use of undeclared identifier 'push_back'`在构建代码时出错。

有什么解决办法？我有`gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)`Mac OS X 10.7.5。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T01:09:26.690

下一个版本（Z3 v4.3.2）将对 OSX、clang 和旧版本的 gcc 提供更好的支持。您应该能够使用以下说明编译候选版本。`rc`是包含当前候选版本的分支。

```
git clone https://git01.codeplex.com/z3 -b rc
cd z3
python scripts/mk_make.py
cd build
make 
```

顺便说一句，链接[http://z3.codeplex.com/releases/view/95640](http://z3.codeplex.com/releases/view/95640)不包含最新版本（Z3 v4.3.1）。我们不再使用源代码创建 zip 文件，因为 codeplex 会自动为任何版本生成它们。有关其他详细信息，请参阅[此链接](http://research.microsoft.com/en-us/um/people/leonardo/blog/2012/11/11/reorg-z3.html)。

**编辑** 于 2013 年 2 月，我们开始为所有主要平台（包括 OSX）提供夜间构建。[以下](http://research.microsoft.com/en-us/um/people/leonardo/blog/2013/02/15/precompiled.html)是有关如何下载这些预编译二进制文件的说明。 **结束编辑**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-25T14:30:57.167

或者，您可以使用[Homebrew](https://brew.sh/)：

```
> brew install z3 
```

# geometry - 检测多边形中的点时的“射线通过顶点”特殊情况

> ID：14130742
> 
> 赞同：3
> 
> 时间：2013-01-02T23:14:13.317
> 
> 标签：geometry, gis, polygon, point

要检测一个点是否在多边形中，您可以从该点投影一条线到无穷远，并查看它与多边形的多少个顶点相交......足够简单。我的问题是，如果光线在其中一个点上与多边形相交，则它被视为与两个线段相交，并被视为在多边形之外。我更改了我的函数，使其仅在光线与多边形的一个点相交时计算其中一个线段，但在某些情况下，一条线也可以与该点相交，同时仍然在外面。以这张图片为例：

![穿过多边形顶点的光线的两个示例](../Images/6d390837ebea8bb9b9d064c30c5e0b0d.png)

如果您假设左上角的点是“无穷大”，并向其他点中的任何一个投射一条射线，它们都在多边形的一个点处相交，并且即使一个在内部，也会被视为与相同数量的顶点相交，一个在外面。

有没有办法弥补这一点，还是我只需要假设那些边缘案例不会弹出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:37:14.377

如果光线恰好在一个顶点上穿过一侧，则仅当另一个顶点位于光线上方时才计算该侧。这将解决你的角落案例。

例如，在您发布的图片中，较低的射线在左上角顶点处穿过正方形的两侧，但一侧在射线上方，另一侧在下方，因此贡献为 1，并且发现目标点在内部。上面的射线在右上角的顶点处穿过两侧，两侧都在射线下方，因此它们对计数的贡献为 0，并且发现目标点在外面。

**更新**：

我记得读过一篇文章，它描述了一种处理一般情况的技术。如果有兴趣，请阅读我的其他答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:10:32.977

向另一个方向发送光线。

如果您尝试`n+1`不同的方向（`n`是多边形点的数量），其中一个肯定不会通过任何顶点。

与考虑极端情况相比，这将简化代码。

最坏的情况成为`O(n)*CheckComplexity(n)`可能`O(n^2)`。如果不可接受，您可以按从点到它们的方向对所有顶点进行排序，然后选择某个区间的中间。这会给`O(n*log n)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:01:07.863

虽然我的第一个答案应该可以解决这个简单的问题，但我不得不提到存在处理这些特殊情况的通用技术。

[本文](http://arxiv.org/pdf/math/9410209.pdf)介绍了一种处理此类问题的技术。他们提供的第一个示例恰好是您询问的算法！

这个想法是应用[自动微分](http://en.wikipedia.org/wiki/Automatic_differentiation)又名对[偶数](http://en.wikipedia.org/wiki/Dual_number)来计算符号扰动。

顺便说一句，同样的技术也可以用来避免在程序中将 0/0 作为特殊情况处理！

[这](http://blog.sigfpe.com/2008/05/desingularisation-and-its-applications.html)是我最初从中学到的博客文章，它为该技术提供了一些很好的背景，并且作者在博客中写了很多关于自动微分 (AD) 的文章。

尽管看起来 AD 是一种非常实用的技术，尤其是在对运算符重载有很好支持的语言中（例如：C++、Haskell、Python ...），我已经在“现实生活”中使用过它（C++ 中的工业应用程序）。

# iphone - 绘制不连续的数学表达式？

> ID：14130743
> 
> 赞同：2
> 
> 时间：2013-01-02T23:14:14.690
> 
> 标签：iphone, cocoa, math, plot, mathematical-expressions

我正在尝试绘制数学函数并使用 CoreGraphics 框架。我通过手动计算用户定义的数学函数的 y 坐标来计算路径。

为了绘制函数，我包含了代码的简化版本：

```
CGContextBeginPath(context);
CGContextMoveToPoint(context, coordinateSystemOriginX, coordinateSystemOriginY);

//Add all points
CGContextAddLineToPoint(context, newPoint.x,newPoint.y);

CGContextSetLineWidth(context, 2);
CGContextSetStrokeColorWithColor(context, [[UIColor redColor] CGColor]);
CGContextStrokePath(context); //Connect them 
```

这工作正常，但遗憾的是用户可能会输入一个不连续的函数，比如

```
 y = 10/x //undefined value for x=0 
```

但是图形是在 x=0 处绘制的，并且点是连接的。看图片：

![在此处输入图像描述](../Images/9e6bda5e2eb9e90b4684edc8f03f934a.png)

**如何评估未定义的点，以便能够正确绘制图形？**我知道有一个解决方案，因为有许多绘图网站可以正确绘制图表。

小费或任何类型的帮助将不胜感激。您还可以免费包含一些神奇的代码；）谢谢！

```
 NSArray*undefinedPoints = [self someMagicFunction:(id)mathematicalExpression];
 //returns 0 for mathematicalExpression = 10/x and 1 for 10/(x-1) 
```

顺便说一句，我正在使用 ANExpressionParser 类来解析用户输入。( [http://mac.softpedia.com/progDownload/ANExpressionParser-Download-86833.html](http://mac.softpedia.com/progDownload/ANExpressionParser-Download-86833.html) )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:45:09.783

我假设您正在`x`以固定的增量提升您的价值，这可能取决于分辨率和缩放级别。

如果您有幸实际除以零，您将产生`+Inf`或`-Inf`并且可以检查它，并在构建曲线时跳过该值（将曲线分成多个部分），这可以解决您的问题。

更普遍和更常见的是，您实际上不会除以零，而是会除以一个非常小的数字，从而产生一个非常大的数字。您应该能够将该值与视口的边界进行比较。如果该值超出视口的范围，您可以决定结束该曲线，并且一旦出现新值（对于 x 的新值）再次出现在您的视口内，您就可以开始一条新曲线，从而解决您的问题在这种情况下也有问题。

如果您正在提高每像素的 x 值，那么以上应该是一个解决方案。

如果您比每像素更粗略地推进您的 x 值，那么您还必须处理剪裁线段，并避免在检测不连续性方面出现误报。

* * *

还要检查您的特定库是否可以为您生成分析确定的不连续性列表。提前使用这样的列表，您可以将曲线拆分为由这些不连续点分隔的部分。

* * *

另请参见[计算机算术](http://en.wikipedia.org/wiki/Division_by_zero#In_computer_arithmetic)、[渐近线](http://en.wikipedia.org/wiki/Asymptote)和[不连续性](http://en.wikipedia.org/wiki/Discontinuity_%28mathematics%29)中的除零。

# android - 为什么android应用程序不缩放图像而是挂起

> ID：14130746
> 
> 赞同：0
> 
> 时间：2013-01-02T23:14:46.190
> 
> 标签：android, android-imageview, android-image

我正在尝试从 imageView 获取缩放位图，因为我需要一个高度相等宽度的图像，以便稍后将它们划分为相等的较小位图。我正在使用以下代码：

```
 public void breakImage(View v)
    {
        ImageView imageView = (ImageView) findViewById(R.id.imgView);
        Drawable d = imageView.getBackground();
        BitmapDrawable bitmapDrawable = ((BitmapDrawable) d);
        Bitmap image = bitmapDrawable .getBitmap();
        Bitmap scaledImage = Bitmap.createScaledBitmap(image, 240, 240, true);
        int width = image.getWidth();
        int height = image.getHeight();
} 
```

但是程序在到达语句时卡住了

```
 BitmapDrawable bitmapDrawable = ((BitmapDrawable) d); 
```

有谁知道这段代码有什么问题？

提前致谢

这是LogCat：

```
01-03 04:47:57.078: D/dalvikvm(10411): GC_EXTERNAL_ALLOC freed 52K, 52% free 2634K/5379K, external 1605K/2108K, paused 22ms
01-03 04:47:58.507: D/AndroidRuntime(10411): Shutting down VM
01-03 04:47:58.507: W/dalvikvm(10411): threadid=1: thread exiting with uncaught exception (group=0x40015578)
01-03 04:47:58.531: E/AndroidRuntime(10411): FATAL EXCEPTION: main
01-03 04:47:58.531: E/AndroidRuntime(10411): java.lang.IllegalStateException: Could not execute method of the activity
01-03 04:47:58.531: E/AndroidRuntime(10411):    at android.view.View$1.onClick(View.java:2154)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at android.view.View.performClick(View.java:2538)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at android.view.View$PerformClick.run(View.java:9152)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at android.os.Handler.handleCallback(Handler.java:587)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at android.os.Looper.loop(Looper.java:123)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at android.app.ActivityThread.main(ActivityThread.java:3687)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at java.lang.reflect.Method.invokeNative(Native Method)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at java.lang.reflect.Method.invoke(Method.java:507)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at dalvik.system.NativeStart.main(Native Method)
01-03 04:47:58.531: E/AndroidRuntime(10411): Caused by: java.lang.reflect.InvocationTargetException
01-03 04:47:58.531: E/AndroidRuntime(10411):    at java.lang.reflect.Method.invokeNative(Native Method)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at java.lang.reflect.Method.invoke(Method.java:507)
01-03 04:47:58.531: E/AndroidRuntime(10411):    at android.view.View$1.onClick(View.java:2149)
01-03 04:47:58.531: E/AndroidRuntime(10411):    ... 11 more
01-03 04:47:58.531: E/AndroidRuntime(10411): Caused by: java.lang.NullPointerException
01-03 04:47:58.531: E/AndroidRuntime(10411):    at com.example.imagegallerydemo.MainActivity.breakImage(MainActivity.java:105)
01-03 04:47:58.531: E/AndroidRuntime(10411):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:01:18.330

以下是日志中错误的原因：

```
01-03 04:47:58.531: E/AndroidRuntime(10411): Caused by: java.lang.NullPointerException
01-03 04:47:58.531: E/AndroidRuntime(10411):    at com.example.imagegallerydemo.MainActivity.breakImage(MainActivity.java:105) 
```

发生是因为`d`为空，而`d`为空是因为`getBackground()`为空。

你确定要`getBackground()`吗？这将返回 的背景，而不是使用or ,,等`ImageView`设置的图像。要获取该可绘制对象，请使用该方法。`android:src``setImageBitmap``setImageDrawable``setImageResource``getDrawable()`

# c++ - 获得系统正常运行时间

> ID：14130747
> 
> 赞同：0
> 
> 时间：2013-01-02T23:14:46.720
> 
> 标签：c++, c, windows

我无法确定系统运行了多长时间。我只是现在太累了，但无事可做。我使用 GetTickCount() 来获取毫秒，但我必须将它们转换为人类可读的格式。我尝试过这样的事情，但我得到了奇怪的结果。

```
void GetUpTime(DWORD Tick) //GetTickCount() argument.
{
    wchar_t temp[256] = {0};
    ZeroMemory(tmpBuff, sizeof(tmpBuff));

    wsprintfW(temp, L"%uh %um %us", Tick/60, Tick/60*60, Tick/60*60*60);
    lstrcpyW(Time, tmpBuff);
} 
```

正如我在这里猜测的那样，Tick/60 = 秒，Tick/60*60 = 分钟和 Tick/60*60*60 = 小时。但我需要类似：1h 5m 36s 不是整个对话。问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T23:16:32.697

`Tick/60*60`与 的意思相同`(Tick/60)*60`，这显然不是您想要的。你可能的意思是`Tick/(60*60)`。

* * *

如果您想要更具可读性的内容，您可以“剥离”每个单元：

```
DWORD seconds = Tick / 1000;  /* Milliseconds -> seconds */
DWORD minutes = seconds / 60; /* Seconds -> minutes */
DWORD hours = minutes / 60;   /* Minutes -> hours */

/* Adjust seconds and minutes to leave only the remainder. */
seconds %= 60;
minutes %= 60;

wsprintfW(temp, L"%uh %um %us", hours, minutes, seconds); 
```

# vector - 如何将 illustrator 中的各个图层导出为 png？

> ID：14130748
> 
> 赞同：4
> 
> 时间：2013-01-02T23:14:51.417
> 
> 标签：vector, adobe, png, adobe-illustrator

我有一个 Illustrator 文件，它在各个图层上有许多不同的矢量，所有这些矢量都需要组合在一起制作网页，我想将它们批量导出到单独的组件 png 或图像文件中。我对 Adob​​e Illustrator 不是很熟悉。有人可以向我解释如何将所有这些导出到单独的 png 中吗？

提前感谢您的任何帮助/见解！我担心我使用了错误的术语，因为我似乎无法在网上的任何地方找到答案......所以任何提示将不胜感激:)

我想我知道这对单个作品是如何起作用的……无论如何，有没有办法将整个画板分解成单独的组件？像批量项目导出？——</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:05:00.590

那么插画家可以将画板的各个图层导出为自己的图像吗？不，illustrator 没有此功能。

但是，我们并不是第一个希望这样做的人，并且 Illustrator 是可编写脚本的。看看[这个](http://www.arcticmill.com/2012/08/export-layers-as-png-files-from-illustrator-in-multiple-resolutions.html)。希望对你有帮助哈哈

# html - 将 textarea 滚动条应用到它的外部 div

> ID：14130749
> 
> 赞同：2
> 
> 时间：2013-01-02T23:14:54.270
> 
> 标签：html, css, textarea, scrollbar

我正在寻找一种实现以下屏幕截图的好方法：

![截屏](../Images/52a3ee0c9678fb88dba7a6b56e4f7dfa.png)

html 看起来像这样：

```
<div class="outer">
  <textarea class="content"></textarea>
</div> 
```

真的只需要得到：

*   textarea 在特定宽度或字符限制后换行
*   滚动条应用于文本区域中的外部 div

尽量避免`contenteditable`，因为它会引入其他问题。

> 注意：该解决方案还需要有一个流畅的外部 div（文本区域上的宽度固定宽度）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:17:24.507

你可以在你的 html 上做这样的事情。

```
<div id="divScroll" class="scroll">
     <textarea class="content"></textarea>
</div> 
```

在 CSS 部分。

```
.scroll {
  display: block;
  padding: 5px;
  margin-top: 5px;
  width: 95%;
  height: 75%;
}

.content{
  width: 50%;
  text-align: left;
  white-space: pre-wrap;
  font-family: Verdana, Helvetica, Arial, sans-serif; 
```

}

这个适合我。祝你好运！

# sql - 将 nvarchar 值 'some name 转换为数据类型 int 时转换失败。

> ID：14130750
> 
> 赞同：0
> 
> 时间：2013-01-02T23:15:03.550
> 
> 标签：sql, sql-server, sql-server-2008, tsql

当我运行整个查询时，我收到此错误消息：

```
------------------------------------
--POPULATE SECTIONAAVGTAT-----------
------------------------------------
;with SpecimenDetail as (
select
s.*
,a.[mlis id]
,a.director
,a.rm
,a.rep
,a.css
,a.css2
,dbo.networkdays(s.[date received],GETDATE())-1 [Days On Hold]
,(case when dbo.networkdays(s.[date received],GETDATE())-1>=7 then '7+' 
   when dbo.networkdays(s.[date received],GETDATE())-1 in (5,6) then '5-6'
   when dbo.networkdays(s.[date received],GETDATE())-1 in (3,4) then '3-4'
   when dbo.networkdays(s.[date received],GETDATE())-1 in (1,2) then '1-2'
   when dbo.networkdays(s.[date received],GETDATE())-1=0 then '0'
  else 'na'
end) as [Days on Hold Group]
 from specimendetailtmp s
left join sectionaalignment a
on s.[mlis practice id]=a.[mlis id]
where s.[date distributed] is not null
and s.[date received]>='20121112'
and s.sectiona='not marked'
)

,

AvgTAT as
(
select 'director' emptype,director employee, cast(round(AVG(cast (dbo.networkdays(s.[date received],s.[date distributed])-1  as float)), 3, 1) as decimal(10,1)) AvgTAT,month(s.[date received]) month from SpecimenDetail s
where s.[date distributed] is not null
group by director,month(s.[date received])

union all

select 'rm' emptype,rm employee, cast(round(AVG(cast (dbo.networkdays(s.[date received],s.[date distributed])-1  as float)), 3, 1) as decimal(10,1))AvgTAT,month(s.[date received]) month from SpecimenDetail s
where s.[date distributed] is not null
group by rm,month(s.[date received])

union all

select 'rep' emptype,rep employee,cast(round(AVG(cast (dbo.networkdays(s.[date received],s.[date distributed])-1 as float)), 3, 1) as decimal(10,1)) AvgTAT,month(s.[date received]) month from SpecimenDetail s
where s.[date distributed] is not null
group by rep,month(s.[date received])

union all

select 'css' emptype,css employee,cast(round(AVG(cast (dbo.networkdays(s.[date received],s.[date distributed])-1  as float)), 3, 1) as decimal(10,1)) AvgTAT,month(s.[date received]) month from SpecimenDetail s
where s.[date distributed] is not null
group by css,month(s.[date received])

union all

select 'css2' emptype,css2 employee,cast(round(AVG(cast (dbo.networkdays(s.[date received],s.[date distributed])-1  as float)), 3, 1) as decimal(10,1)) AvgTAT,month(s.[date received]) month from SpecimenDetail s
where s.[date distributed] is not null
group by css2,month(s.[date received])
)

select * from avgtat 
```

但是，如果我运行任何内部选择，一切正常！

**为什么只有在执行整个脚本时才会出现此错误？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:44:19.290

我怀疑段中的一个或多个`SELECT`子句`UNION ALL`正在产生隐式转换为`int`. 并且，其他`SELECT`子句返回的结果是`nvarchar`. 当结果中的列值都是整数时，可能会发生隐式转换。

如果您不知道是哪一列导致了问题，您应该查看每个列的结果`SELECT`并确定是否存在共同模式（例如，nvarchar 列中的所有值都是整数。）然后，当您知道生成的列时问题，使用`CAST`或`CONVERT`将值显式转换为所需的数据类型。

# objective-c - 如何用 cocos2d 正确处理这个 NSString？

> ID：14130751
> 
> 赞同：0
> 
> 时间：2013-01-02T23:15:10.480
> 
> 标签：objective-c, crash, nsstring, cocos2d-iphone, nslog

我是 cocos2d 的新手，所以我的应用内购买类助手有问题。我在 Cocoa Touch 中编写了游戏，并且这个类运行良好，但我现在正在 Cocos2d 中编写相同的游戏，问题出在 NSString 上。

这里有一些片段。

当我单击某个按钮时，首先调用此方法。如您所见，是带有一些字符串参数`completeIdentifier`的简单字符串。`bundleIdentifier`没关系，在这个地方我可以记录这个`completeIdentifier`。

```
- (void)prepareToPurchaseItemWithIdentifier:(NSString *)aIdentifier showAlertWithTitle:(NSString *)title description:(NSString *)description delegate:(id)aDelegate{

    self.delegate = aDelegate;

    identifier = aIdentifier;
    completeIdentifier = [NSString stringWithFormat:@"%@.%@", [[NSBundle mainBundle] bundleIdentifier], aIdentifier];

    askToPurchase = [[UIAlertView alloc] initWithTitle:title message:description delegate:self cancelButtonTitle:nil otherButtonTitles:@"Later", @"Yes", nil];
    askToPurchase.delegate = self;
    [askToPurchase show];
} 
```

下一个方法是`UIAlertViewDelegate`方法。当我从第一种方法单击`YES`时调用。`alertView`

```
#pragma mark - UIAlertViewDelegate Methods
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSLog(@"%@", completeIdentifier);
    if (alertView == askToPurchase) {

        NSLog(@"[TSIAPHelper] Clicked YES. Prepare...");
        if ([SKPaymentQueue canMakePayments]) {

            NSLog(@"[TSIAPHelper] Prepare to purchase [%@].",completeIdentifier);
            SKProductsRequest *request =[[SKProductsRequest alloc] initWithProductIdentifiers:
                                     [NSSet setWithObject:completeIdentifier]];
            request.delegate = self;
            [request start];

            pleaseWait = [[UIAlertView alloc] initWithTitle:@"Please wait..." message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:nil, nil];
            UIActivityIndicatorView *activity = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
            [activity startAnimating];
            [pleaseWait addSubview:activity];
            activity.frame = CGRectMake(125, 50, 36, 36);
            [pleaseWait show];
        }
        else {

            NSLog(@"[TSIAPHelper] Purchase [FAILURE]. Prohibited by Parentar Control or something like that.");
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Prohibited." message:@"Parental Control is enabled, cannot make a purchase. Turn off and try again." delegate:self cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
            [alert show];
        }
    }
} 
```

问题是：无论何时何地我想记录变量，`completeIdentifier`我都会在选定的行上崩溃：`0x39e965d0: ldr r3, [r4, #8]`但我不知道那是什么意思。并选择了这一行：

```
NSLog(@"%@", completeIdentifier); 
```

我该如何解决？在 Cocoa Touch 中运行良好。当我使用 cocos2d 时不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:39:00.463

我猜你没有使用ARC。在这种情况下，completeIdentifier 将被自动释放。

Cocos2d 每帧都会清空自动释放池，而在 Cocoa 中这并没有严格定义，但仍然可能会崩溃。您可以通过保留或复制字符串来解决此问题。

```
completeIdentifier = [NSString stringWithFormat:@"%@.%@", [[NSBundle mainBundle] bundleIdentifier], aIdentifier];
completeIdenfitier = [completeIdentifier retain]; 
```

# asp.net-mvc - 使用 Ajax/jsonp 从 Web Api 接收数据

> ID：14130752
> 
> 赞同：1
> 
> 时间：2013-01-02T23:15:13.833
> 
> 标签：asp.net-mvc, jquery, asp.net-ajax, asp.net-web-api, jsonp

我已经使用 Web Api 构建了一个简单的 Web 服务，我想使用 jQuery 从一个简单的 mVC 视图中使用它。我在 localhost 上开发并使用 Azure 的服务，这就是我使用 jsonp 的原因。

当我运行我的 jQuery 时，我在 Fiddler 中查看并且请求成功并且 json 被发回，但是 .Ajax 函数返回这些错误：

未调用 NaN、parsererror 和回调

```
<script>
    $(function () {

        var callback = function(data) {
            alert(data);
        };
            $.ajax({
                url: 'http://itjobsdirect.azurewebsites.net/api/values/getbytitle?title=developer',
                type: 'GET',
                dataType: 'jsonp',
                jsonpCallback: 'callback',
                success: function (data) {
                    $('#main').text(data);

                },
                error: function(jqXHR, textStatus, error) {
                    alert(jqXHR.status + jqXHR.message);
                    alert(textStatus);
                    alert(error);
                }
            });

    });
</script> 
```

我发现了这个问题：[JsonP with Web Api](https://stackoverflow.com/questions/9421312/jsonp-with-asp-net-web-api) is it still relevant?

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:25:06.927

是的，您那里的那个问题的链接仍然相关。

ASP.NET Webapi 没有提供理解“jsonp”数据类型的默认格式化程序，因此这里的解决方案是添加自定义 JsonpMediaTypeFormatter（如您所链接问题的答案所示）。

# android - 在自定义显示器（如 7 英寸 mdpi）中测试我的 android 应用程序？

> ID：14130756
> 
> 赞同：1
> 
> 时间：2013-01-02T23:15:41.960
> 
> 标签：android, layout, user-interface, scale, dpi

如何在 7" mdpi 显示器或 10" hdpi 显示器等自定义显示器中测试我的 android 应用程序？在 Eclipse 中只能测试预定义的设备，当我尝试放置自定义 dpi 或屏幕尺寸时，只有模拟器显示会被缩放。

谢谢

** [已解决] 我自己找到了答案，当您转到 Android Virtual Device Manager 时，第二个选项卡中有 2 个选项卡，您可以创建自定义设备

# regex - 小时后前 5 分钟时间戳的正则表达式

> ID：14130759
> 
> 赞同：0
> 
> 时间：2013-01-02T23:16:13.027
> 
> 标签：regex, shell, grep

我有一个进程的日志文件，该进程每 5 分钟记录一次，但不是精确的分钟/秒，我想找到每小时的第一条日志消息。示例行如下所示：

```
2013-01-01 09:03:55 foo bar some log message foo bar 
```

`grep`提取那些第一时间行的正则表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:38:25.050

就像是

```
grep "[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\} [0-9]\{2\}:0[0-5]" logfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:42:14.063

您不能使用 grep 每小时只获取第一行，因为它不会在匹配之间保持状态。像这样的事情会在例如每小时的前五分钟获得所有线路：

```
grep '\d\d:0[0-5]:\d\d' logfile 
```

您可以使用 awk 获取每小时前五分钟的第一个条目：

```
awk -F'[ :]' 'BEGIN {hh=-1} $2!=hh && $3>=0 && $3<5 {hh=$2; print}' test 
```

# sql - 如何对多个 INSERT 进行分组？

> ID：14130761
> 
> 赞同：1
> 
> 时间：2013-01-02T23:16:25.240
> 
> 标签：sql, sql-server, sql-server-2008

我正在将一个表中的数据插入到其他几个表中。第一次插入将创建一个新的用户 ID。此新用户 ID 将用于后续插入。我还将继续将源表中的用户名插入到其他表中。下面的插入链适用于一位用户。可能会涉及 2000 名用户。

我熟悉如何使用光标完成此操作。有没有其他方法可以在没有游标的情况下执行此插入链？

```
insert into table 1 using @username and @firstname from source table

insert into table 2 using userid generated from table 1 (userid1)

insert into table 3 using @username and userid1

insert into table 4 using userid1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:16:30.003

您可以使用 Insert 语句的[输出子句](http://msdn.microsoft.com/en-gb/library/ms174335%28v=sql.100%29.aspx)批量捕获生成的 Id。

例如：

```
Create Table dbo.Source (
  FirstName nvarchar(100),
  LastName nvarchar(100)
);

Create Table dbo.Attrs (
  Id int Identity Not Null Primary Key,
  Name nvarchar(100) Not Null,
  DefaultVal nvarchar(100)
);

Create Table dbo.Table1 (
  Id Int Identity Not Null Primary Key,
  FirstName nvarchar(100),
  LastName nvarchar(100)
);

Create Table dbo.Table2 (
  Id int Identity Not Null Primary Key,
  Table1ID int Not Null Foreign Key References dbo.Table1 (Id),
  AttrId int Not Null Foreign Key References dbo.Attrs (Id)
);

Insert Into dbo.Source Values
  (N'Mickey', N'Mouse'),
  (N'Donald', N'Duck'),
  (N'Goofy', Null);

Insert Into dbo.Attrs Values
  ('Size', 'Small'),
  ('Wings', 'No');

Declare @Temp1 Table (Id Int, FirstName nvarchar(100), LastName nvarchar(100))
Declare @Temp2 Table (Id int, Table1ID int, AttrId int)

Insert Into dbo.Table1
  (FirstName, LastName)
Output 
  inserted.Id, inserted.FirstName, inserted.LastName
Into 
  @Temp1
Select
  FirstName, LastName
From
  dbo.Source

Insert Into dbo.Table2
  (Table1ID, AttrId)
Output
  inserted.Id, Inserted.Table1ID, Inserted.AttrID
Into
  @Temp2
Select
  t.Id,
  a.Id
From
  @Temp1 t
    Cross Join
  dbo.Attrs a

Select * From @Temp2 
```

[http://sqlfiddle.com/#!3/31110/3](http://sqlfiddle.com/#!3/31110/3)

# sql - 被动/主动sql注入 这种分类存在吗？

> ID：14130764
> 
> 赞同：0
> 
> 时间：2013-01-02T23:16:34.843
> 
> 标签：sql, sql-injection

也许这听起来很奇怪，但有人告诉我 SQL 注入攻击可以分类为：

> `passive and active`

**被动**SQLi：

*   它与 SQL 语句有关，例如： `SELECT,UNION,GROUP BY,LOAD,HAVING EXECUTE, BEGIN, DECLARE`...等

**活动**SQLi：

*   它应该更危险，因为它涉及通过以下语句修改 DBMS：`UPDATE,DELETE,INSERT`..etc 所以

在白皮书、学习资料等方面，我还没有找到任何关于它的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:19:21.620

SQL 注入只是将不需要的文本添加到您的查询中。
您可以根据需要对其进行分组，但这并不重要，简单的事情是，您的查询不会做您想要的，或者不仅仅做您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:27:28.377

[OWASP在这里](https://www.owasp.org/index.php/OWASP_Testing_Guide_Appendix_C%3a_Fuzz_Vectors#SQL_Injection)定义了被动和主动 sql 注入

> SQL 注入根据数据库信息的暴露（被动）或数据库信息的更改（主动）分为以下两类。

两者都有问题，如果你有一个，你可能有另一个。active 的问题相当明显（有人以您未计划的方式更新/创建/删除您的数据）。不过，被动对您和您的用户来说同样危险。想象一下，如果他们得到一个用户名和密码列表。这些可用于合法登录您的网站或其他网站，因为大多数用户在多个网站上重复使用密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:26:37.637

我从未听说过将 sql 注入攻击分为几类。正如gdoron如此雄辩地指出的那样，这并不重要。

然而，看看你是如何把它分解的，这几乎是有道理的。我会将该分类稍微更改为：

**被动**：
涉及以绕过正常安全控制的方式覆盖预期输入的攻击。例如，假设您有一个带有查询字符串的页面，例如：

```
/accounts/edit.php?id=50 
```

在这种情况下，手动将 id 更改为 1 或 10 可能会提取用户无权访问的记录。前提是编辑页面不执行额外检查以确保用户具有访问权限。

**主动**：攻击将 sql 语句传递到输入字段以使应用程序执行新语句。

例如，把[' or (1=1);drop table users;'](http://xkcd.com/327/) 进入登录字段。一些应用程序只是将 sql 与未经处理的用户输入连接起来。这可能允许攻击者绕过安全控制，甚至将 DDL 语句发送到数据库服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T23:30:05.337

我不会说涉及 DELETE 的 SQL 注入一定比涉及 SELECT 的 SQL 注入“更糟糕”。确实，一个可以修改数据，另一个不能。

但是很多可怕的 SQL 注入只是为了读取应该被限制的数据，例如窃取[信用卡号码](http://en.wikipedia.org/wiki/Albert_Gonzalez)。

Usually the terminology around SQL injection has to do with the methods of attack, such as "blind SQL injection," "union-based SQL injection," etc.

If you want to read a mighty book that covers the subject very well, try [SQL Injection Attacks and Defense](https://rads.stackoverflow.com/amzn/click/com/1597499633) by Justin Clarke et. al.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T23:40:50.223

Because SQL Injection is a technique used to **ATTACK** a website, wether it is passive or active is of inconsequence as many of the others members have said already.

No the TERMS you use in the first paragraph are PASSIVE is incorrect, Execute is not passive, its active... its Executing (something or other)

And even a passive term such as SELECT when used with DropTable can cause you to lose data too! So you would still insist on calling it passive? When its ACTIVELY dropping a table?

A good source of further information is wikipedia. [http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

# css - 选择元素时在css中使用的插入符号^是什么？

> ID：14130765
> 
> 赞同：41
> 
> 时间：2013-01-02T23:16:35.160
> 
> 标签：css, css-selectors

我在这样的文件中遇到了一个 css 选择器：

```
#contactDetails ul li a, a[href^=tel] {....} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-03T08:50:22.357

像这样的抑扬符“^”在 CSS 中没有明确的含义。两个字符的运算符“^=”可用于[属性选择器](http://www.w3.org/TR/selectors/#attribute-substrings)。通常，`[attr^=val]`指具有以`attr`开头的值的属性的元素`val`。

因此，`a[href^=tel]`指的是具有以 开头的值`a`的属性的元素。这可能是为了将电话号码链接与其他链接区分开来；这还不够，因为选择器也匹配例如，但它可能意味着只匹配作为协议部分的链接。这样会更安全。`href``tel``<a href="tel.html">...</a>``tel:``a[href^="tel:"]`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T17:00:37.120

```
a[href^="tel"] 
```

( `^`) 表示它选择具有指定属性的元素，其值恰好以给定字符串开头/开始。

在这里，它选择所有“锚”元素，`href`属性的值恰好以字符串开头`'tel'`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-02T23:20:35.080

像这样使用的克拉“^”将匹配href以“tel”开头的标签（[http://csscreator.com/content/attribute-selector-starts](http://csscreator.com/content/attribute-selector-starts)）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-02T23:20:23.213

表示href属性以“tel”开头的标签

例子：

```
<a href="tel123xxx">This is a link</a> 
```

会匹配。

# python - 导入 Gtk 并关闭窗口后访问 Gdk 区域

> ID：14130769
> 
> 赞同：2
> 
> 时间：2013-01-02T23:17:03.447
> 
> 标签：python, window, destroy, gtk3, gdk

我发现自己处于需要关闭从`Gtk.Window`. 我最初连接 window.destroy 事件以关闭窗口以`Gtk.main_quit`进行测试，但是当我将模块加载到我的主程序中时，当然，如果不关闭主程序，我就不能这样做。当我编写一个函数时，我愚蠢地调用了该`window.destroy()`方法，这对我来说很愚蠢，导致最大递归错误。所以，我决定连接一个“删除事件”，然后调用`window.destroy()`它仍然递归，因为（据我所知）销毁事件调用删除事件。因此，我将销毁事件连接到一个函数并尝试调用：

```
window.emit('delete-event') 
```

这有效，但导致需要另一个参数的错误。研究，我从 gtk2 了解到它需要是这样的：

```
window.emit("delete-event", gtk.gdk.Event(gtk.gdk.DELETE)) 
```

我找不到`Gdk`under`Gtk`就像我可以找到`gdk`under一样`gtk`。我不喜欢这个。我导入了 Gdk 并`Gdk.Event`找到了，但不等同于`gtk.gdk.DELETE variable`. 我做了一个：

```
l = dir(Gdk)
for i in l:
    if 'DELETE' in i:
        print(i) 
```

并想出在 Gdk 中没有定义 DELETE 变量。

我们如何从 Gtk 访问 Gdk？如果不是，我们如何翻译这些 gtk.gdk... 在 Gdk 下不存在的东西？

最终，我只是做了：

```
del window 
```

做我需要做的事情，但我仍然想知道如何在 Gtk3 中发出上面的信号以用于学习目的。

谢谢，

纳尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:39:40.610

GTK 3中没有`gtk.gdk`，所有这些功能或其等效功能都*必须*使用`from gi.repository import Gdk`. 之前的`gtk.gdk`层次结构实际上是为了方便，但没有任何意义，因为 GDK 是一个完全独立的包，不是 GTK 的一部分。新组织更有意义，因为层次结构和变量名称与 C、Javascript 等 API 中的完全相同。

在这种情况下，`gtk.gdk.DELETE`可以作为`Gdk.EventType.DELETE`，所以你应该能够做到

```
window.emit('delete-event', Gdk.Event(Gdk.EventType.DELETE)) 
```

但是，[您不应该自己发出事件信号](http://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-event)，所以最好这样做：

```
window.event(Gdk.Event(Gdk.EventType.DELETE)) 
```

或者更好的是，根本不连接到模块中的事件。然后你可以使用`window.destroy()`没有递归错误。连接到主程序中的销毁信号，然后您可以简单地调用`Gtk.main_quit`.

# jquery - jquery Fancybox 在某些照片上返回错误，但每次都不同

> ID：14130771
> 
> 赞同：1
> 
> 时间：2013-01-02T23:17:14.007
> 
> 标签：jquery, fancybox

我按照说明包含所需的代码和 js 文件，它在我的计算机上以及在我使用的临时工作站点上上传到服务器时都可以工作。但是当我将它上传到客户端的站点（并且它是到同一台服务器）时，我收到错误代码“无法加载请求的内容。请稍后再试。” 在大约一半的照片上，但每次我访问该页面时产生错误的照片都不同。没有意义。

这是网络上的页面[http://smittysbar.com/gallery.htm](http://smittysbar.com/gallery.htm)

我在代码中有两个 jquery 实例，因为我将另一个用于不同页面上的简单 Jquery 幻灯片。他们有冲突吗？-

这是画廊页面上的代码-

```
<!-- Add fancyBox main JS and CSS files -->
<script type="text/javascript" src="jquery.fancybox.js?v=2.1.3"></script>   
<link href="jquery.fancybox.css" rel="stylesheet" type="text/css" /> 
```

这是页面从模板中获取的代码：

```
<script type="text/javascript" src="jquery-1.2.6.min.js"></script>
<script type="text/javascript"> 
```

这是使用另一个 jquery 实例的页面： http: [//smittysbar.com/index.htm](http://smittysbar.com/index.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:21:06.890

我看到的问题是某些图像没有传送到 Fancybox。例如，您的一位主播想要花式框显示[http://smittysbar.com/images/galleryLG/08.JPG](http://smittysbar.com/images/galleryLG/08.JPG)但在我的浏览器中查看该项目时出现 404 错误。

这可能是一个案例问题。将所有 .JPG 文件更改为 .jpg。

# c - popen 与 KornShell 安全性

> ID：14130772
> 
> 赞同：1
> 
> 时间：2013-01-02T23:17:21.590
> 
> 标签：c, shell, unix, ksh, popen

我正在使用一些外部二进制文件编写一个 C 程序来实现计划的目标。我需要运行一个命令给我一个输出，然后我需要处理它，然后作为输入输入另一个程序。我正在使用 popen，但想知道这是否与使用 KornShell (ksh) 临时文件相同。

**例如：**

```
touch myfile && chmod 700
cat myfile > /tmp/tempfile 
process_file < /tmp/tempfile  && rm /tmp/tempfile 
```

由于这会创建一个可由 root 读取的临时文件，如果在 C 中使用 popen，知道管道也是文件，它会是一样的吗？或者假设操作系统（OS）不允许任何其他进程读取您的管道是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:23:57.997

您说“这会创建一个 root 可以读取的临时文件”，这意味着您正在尝试以 root 用户无法读取的方式传输数据。这不可能; 一般来说，root 用户完全控制系统，因此可以读取系统上的任何数据，无论它是否在临时文件中。即使在单个进程中，root 用户也可以读取该进程的内存。

如果使用`popen()`，则文件系统上不会有该文件的条目；它创建了一个管道，它就像一个文件，但实际上并不将该数据写入磁盘，而是在两个程序之间传递它。

它会有一个文件描述符；根据系统的不同，截取该数据可能更容易或更难，但始终可以这样做。例如，在 Linux 上，您只需`/proc/<pid>/fd/`查找所有打开的文件描述符并操作它们（读取或写入它们）。

# java - 读取最后一个单词时停止扫描仪

> ID：14130773
> 
> 赞同：0
> 
> 时间：2013-01-02T23:17:41.070
> 
> 标签：java, java.util.scanner

我对扫描仪不太熟悉，但我编写了一种方法来从 txt 文件中读取每个单词，并为每个单词添加一个到 int，但它们 int 只是不断增加。我希望它在读取最后一个单词/添加最后一个单词时停止。

```
 public void drawnames(Graphics g) throws FileNotFoundException{
    int str = 0;
    String[] string = new String[800*600];
    int xpos = 100;
    int ypos = 100;
    @SuppressWarnings("resource")
    Scanner s = new Scanner(new BufferedReader(new FileReader("Particles/Names.txt")));
    while(s.hasNext()){
        string[str] = s.next();
        g.drawString(string[str] + str, xpos, ypos);
        str = str + 1;
        ypos = ypos + 100;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:39:12.103

在你的 while 循环之后立即添加：

```
s.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:25:33.443

s.HastNext() 将始终返回 true，因为 s 永远不会改变。

您也许可以改用 hasNextline() 。

看看这里的文档：http: [//docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNext%28%29](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNext%28%29)

# c++ - decltype 和 typeof 的区别？

> ID：14130774
> 
> 赞同：33
> 
> 时间：2013-01-02T23:17:50.730
> 
> 标签：c++, c++11, typeof, decltype

`decltype`关于and的两个问题`typeof`：

*   `decltype`和运算符之间有什么区别`typeof`吗？
*   `typeof`在 C++11 中过时了吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-03T00:13:45.827

中没有`typeof`运算符`c++`。虽然大多数编译器确实提供了这样的功能很长一段时间，但它一直是编译器特定的语言扩展。因此，比较两者的行为通常没有意义，因为`typeof`（如果它甚至存在的话）的行为非常依赖于平台。

由于我们现在有了获取变量/表达式类型的标准方法，因此真的没有理由依赖不可移植的扩展，所以我会说它**已经过时了。**

要考虑的另一件事是，如果行为与给定的编译器`typeof`不兼容，则扩展可能不会在未来获得太多开发以包含新的语言功能（这意味着它可能根本不适用于例如 lambdas ）。我不知道目前是否如此，但这是一种明显的可能性。`decltype``typeof`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-11-02T08:39:03.223

两者之间的区别在于`decltype`始终将引用保留为信息的一部分，而`typeof`可能不会。所以...

```
int a = 1;
int& ra = a;
typeof(a) b = 1;     // int
typeof(ra) b2 = 1;   // int
decltype(a) b3;      // int
decltype(ra) b4 = a; // reference to int 
```

该名称`typeof`是首选（与`sizeof`and一致`alignof`，并且该名称已在扩展中使用），但正如您在提案 N1478 中看到的那样，对与现有实现的兼容性的担忧导致他们给它一个独特的名称。

“我们通常使用运算符名称 typeof 来指代查询表达式类型的机制。decltype 运算符是指建议的 typeof 变体。......一些编译器供应商（EDG、Metrowerks、GCC）提供 typeof 运算符作为具有引用删除语义的扩展。如第 4 节所述，这似乎是表达变量类型的理想选择。另一方面，引用删除语义未能提供一种机制来准确表达泛型的返回类型函数......在这个提议中，提供表达式类型信息的运算符的语义反映了声明的类型。因此，我们建议将运算符命名为 decltype。

*J. Jarvi、B. Stroustrup、D. Gregor、J. Siek：Decltype 和 auto。N1478/03-0061。*

所以说`decltype`完全消除是不正确的`typeof`（如果你想引用删除语义，那么这些编译器中的 typeof 扩展仍然可以使用），而是`typeof`在很大程度上被它所消除 plus `auto`，它确实删除了引用并替换了使用 where`typeof`用于变量推理。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-29T10:45:01.607

对于遗留代码，我一直在成功使用以下代码：

```
#include <type_traits>
#define typeof(x) std::remove_reference<decltype((x))>::type 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T00:12:04.070

typeof 尚未标准化，尽管它已由多个编译器供应商实现，例如[GCC](http://gcc.gnu.org/onlinedocs/gcc/Typeof.html)。它因 decltype 而过时。

可以[在这个相关答案](https://stackoverflow.com/questions/2763824/decltype-result-of-or-typeof/2764052#2764052)中找到对 typeof 缺点的一个很好的解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-02T08:49:32.757

好吧，`typeof`这是一个非标准的 GNU C 扩展，您可以在 GNU C++ 中使用它，因为 GCC 允许您在另一种语言中使用其他语言的功能（尽管并非总是如此），所以它们真的不应该被比较。

当然，其他编译器可能存在其他非标准扩展，但 GCC 绝对是最广泛记录的实现。

回答这个问题：如果它从来不是一个功能，它就不会过时。

如果您想在 C++ 中比较这两种方法的优点，那么语义上没有区别，除非您正在处理引用。您应该使用`decltype`它，因为它是可移植的并且符合标准。

# facebook - Facebook 是否仍支持代理邮件电子邮件地址？

> ID：14130782
> 
> 赞同：0
> 
> 时间：2013-01-02T23:18:26.650
> 
> 标签：facebook

Facebook 过去曾允许用户通过提供类似`xxxx@proxymail.facebook.com`. 我再也找不到办法了。对此授权对话框的控制已消失。但我也找不到任何关于它被弃用的提及。

Facebook 是否仍支持代理邮件电子邮件地址？现在是否假设应用程序将始终获取用户的真实电子邮件地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:12:51.570

你是对的。Facebook 不再发布代理邮件地址。

# python - 从一个真正的循环终止（Calico IDE）

> ID：14130783
> 
> 赞同：0
> 
> 时间：2013-01-02T23:18:32.760
> 
> 标签：python, calico-project

我在 Calico IDE 中使用 Graphics 和 Myro 包，任何人都可以想办法让我按下“q”键并让程序终止吗？目前，当我按下“q”键时，我必须在窗口上单击鼠标才能终止。

```
def main():
    win = Window(800,500)
    bg = Picture("http://www.libremap.org/data/boundary/united_states/contig_us_utm_zone_14_600px.png")
    bg.draw(win)
    while True:
        char = win.getKeyPressed()
        if char == 'q':
            win.close()
            break
        x, y = win.getMouse()
        MPO = Rectangle(Point(x,y), Point(x+10,y+10))
        MPO.fill = Color("white")
        MPO.draw(win) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:54:00.963

我以前从未听说过 Calico，但是从 5 秒看[文档](http://calicoproject.org/Calico_Graphics#Mouse)，我看到了：

> getMouse() - 等待用户点击并返回窗口中的 (x, y) 位置

所以，我敢打赌这就是为什么你必须在按下 Q 键之前单击窗口的原因——因为你的程序卡在`getMouse()`调用内部等待，正如文档所说的那样。

即使文档没有解释这一点，您也可以通过添加一些打印/日志记录和/或在调试器中运行，以查看当它没有响应您的按键时它在哪里陷入困境。

例如，快速而肮脏的方式来做到这一点：

```
while True:
    print 'Before getKeyPressed'
    char = win.getKeyPressed()
    print 'After getKeyPressed, got', char
    if char == 'q':
        print 'About to close because of q'
        win.close()
        print 'Closed'
        break
    print 'Before getMouse'
    x, y = win.getMouse()
    print 'After getMouse, got', x, y 
```

… 等等。

当然，在现实生活中，您不想为每一行代码添加打印语句。（并且，当您*确实*需要时，您需要一种比手动编写所有这些行更智能的检测方式。）但是您可以添加一些以将其缩小到一般区域，然后放大并在该区域内添加更多，依此类推，直到找到罪魁祸首。

同时，如果您将代码更改为使用`getMouseNow()`而不是`getMouse()`，那将解决问题，但只有通过忙循环和一遍又一遍地重绘窗口，无论您是否已经做过任何事情。

您在这里真正需要的——对于任何 GUI 应用程序——是一个事件循环。我可以看到有一些名为`onMouseDown`and的函数`onKeyPress`，这看起来正是您在这里所需要的。

# asp.net - 显示上传的图片

> ID：14130788
> 
> 赞同：0
> 
> 时间：2013-01-02T23:19:22.183
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我正在尝试创建一个简单的图片库。上传作品，但我在显示这些图像时遇到问题。

**在互联网上，我发现这是正确的方法：**

```
 [NotMapped]
    public string ImageUrl
    {
        get
        {
            var isEmpty = String.IsNullOrWhiteSpace(ImgName);

            if(isEmpty)
            {
                return Path.Combine("~/Images", "noImageAvailable.png");
            }else
            {
                return Path.Combine("~/Images/uploaded", ImgName);
            }
        }
    } 
```

并且在视图中

```
@foreach (var item in Model) {
    ...
    @{ var imgPath = HostingEnvironment.MapPath(item.ImageUrl); }
    <img src="@Url.Content(imgPath)"/> 
```

产生：

```
<img src="C:\......\Images\uploaded\0_634927659072110613.jpg"/> 
```

**对我有用的是：**

```
 [NotMapped]
    public string ImageUrl
    {
        get
        {
            var isEmpty = String.IsNullOrWhiteSpace(ImgName);

            if(isEmpty)
            {
                return Path.Combine("../Images", "noImageAvailable.png");
            }else
            {
                return Path.Combine("../Images/uploaded", ImgName);
            }
        }
    } 
```

在视图中：

```
@foreach (var item in Model) {
    .....
    <img src="@Url.Content(item.ImageUrl)"/> 
```

产生：

```
<img src="../Images/uploaded\0_634927649098750170.jpg"/> 
```

**评论**

有2个区别：

1.  〜/图像与../图像
2.  视图中的线条

有趣的是，这条线

```
<img src="C:\......\Images\uploaded\0_634927659072110613.jpg"/> 
```

**在静态独立文件**中显示图像，而当它由 IIS 提供时，它不会。只有空白空间而不是图像。

我的问题是什么是正确的方法，为什么第一个方法不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:05:03.497

您的代码完全按照您的要求执行。第一个不起作用，因为`var imgPath = HostingEnvironment.MapPath(item.ImageUrl);`将服务器上的物理路径返回到图像 URL，而不是 URL。将第一个块与`<img src="@Url.Content(item.ImageUrl)"/>`. 这看起来像：

```
[NotMapped]
public string ImageUrl
{
    get
    {
        var isEmpty = String.IsNullOrWhiteSpace(ImgName);

        if(isEmpty)
        {
            return Path.Combine("~/Images", "noImageAvailable.png");
        }else
        {
            return Path.Combine("~/Images/uploaded", ImgName);
        }
    }
} 
```

以你的观点：

```
@foreach (var item in Model) {
    .....
    <img src="@Url.Content(item.ImageUrl)"/> 
```

1.  .net 中的“~/Images/...”从网络根目录说，找到文件夹 Images，然后...
2.  “../Images/...”是相对于当前位置的 - 上一个文件夹，找到文件夹图像，然后...

# objective-c - UITabBar 自定义未按预期工作

> ID：14130794
> 
> 赞同：3
> 
> 时间：2013-01-02T23:19:52.437
> 
> 标签：objective-c, ios, uitabbar, uiappearance

我有一个三个选项卡`UITabBar`，其中设置了每个选项卡的背景以及选项卡栏本身的背景，如下面的第一张图片所示。每个`UITabBarItem`都有它的`FinishedSelectedImage`和`FinishedUnselectedImage`集合，以及`NSString`它的标题。这些图像是字形（图标）。

但是，将 设置为`selectionIndicatorImage`大小为 106x48px 的图像后，第三个选项卡的右侧有约 1px 的空间，当处于选中状态时（参见第二张照片）。

请你能告诉我如何删除额外的空间吗？我曾尝试使用宽 1 像素的图像，但这并没有什么区别。

编辑---我读到这可能是由于尺寸不正确的 selectionIndicatorImage 导致的问题，但我可以确认这不是修复——我尝试使用 107x49px 图像，但这也没有任何区别。

最大限度。

标签栏（选择时应该如何）

![](../Images/18f64e253dd4ee6643e04d68d1b75e2a.png)

标签栏（它如何显示在第三个标签上 - 请注意右侧的 1px）

![](../Images/8a3554b2bee7f6a76e41d694202d557d.png)

```
// customise the UITabBar - set the background image and the selected background image
[self.tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_bar"]];
[self.tabBarController.tabBar setSelectionIndicatorImage:[UIImage imageNamed:@"tabbar_selection_bg_3"]];

// this is in a for loop.
UITabBarItem *item = [[UITabBarItem alloc] init];
[item setTitle:[titles objectAtIndex:index]];
[item setImage:[UIImage imageNamed:[image_titles objectAtIndex:index]]];
[item setFinishedSelectedImage:[UIImage imageNamed:[[image_titles objectAtIndex:index] stringByAppendingString:@"_selected"]] withFinishedUnselectedImage:[UIImage imageNamed:[image_titles objectAtIndex:index]]];
[navigationController setTabBarItem:item];
[item release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:43:26.250

我最终`UITabBarController`使用三个`UIImageViews`作为每个选项卡的子类`selectionIndicatorBackground`，然后使用进一步`UIImageView`来显示选项卡的字形，并使用 UILabel 来显示其标题。

这是代码：

```
@interface LPTabBarController : UITabBarController

@property (nonatomic, retain) UIImageView *firstTab, *secondTab, *thirdTab, *firstTabBG, *secondTabBG, *thirdTabBG;
@property (nonatomic, retain) UILabel *firstTabLabel, *secondTabLabel, *thirdTabLabel;

@end

@implementation LPTabBarController

@synthesize firstTab, secondTab, thirdTab, firstTabBG, secondTabBG, thirdTabBG, firstTabLabel, secondTabLabel, thirdTabLabel;

- (id) init {

    if ((self = [super init])) {

        [self initialise];

    }

    return self;

}

- (void) setViewControllers:(NSArray *)viewControllers {

    [self setViewControllers:viewControllers animated:NO];

}

- (void) setViewControllers:(NSArray *)viewControllers animated:(BOOL)animated {

    [super setViewControllers:viewControllers animated:animated];

    for (UITabBarItem *item in self.tabBar.items) {

        [item setEnabled:NO];

    }

}

- (void) initialise {

    UIImageView *bg = [[UIImageView alloc] initWithFrame:CGRectMake(0, self.tabBar.frame.origin.y - 10, 320, 59)];
    [bg setUserInteractionEnabled:YES];
    [bg setImage:[UIImage imageNamed:@"tab_bar"]];

    CGFloat widthbg   = ceilf(self.view.frame.size.width / 3);
    CGFloat heightbg  = self.tabBar.frame.size.height;
    CGFloat width = 23, y = 5;

    UITapGestureRecognizer *gest = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];

    self.firstTab = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tab_bar_user"]] autorelease];
    [self.firstTab setFrame:CGRectMake(ceilf((widthbg - width) / 2), y, 23, 23)];

    self.firstTabLabel = [[[UILabel alloc] initWithFrame:CGRectMake(0, 27, widthbg, 20)] autorelease];
    [self.firstTabLabel setTextAlignment:NSTextAlignmentCenter];
    [self.firstTabLabel setText:@"Profile"];
    [self.firstTabLabel setFont:[UIFont boldSystemFontOfSize:13]];
    [self.firstTabLabel setTextColor:RGB(80, 23, 17)];
    [self.firstTabLabel setShadowColor:[UIColor colorWithWhite:1 alpha:0.35]];
    [self.firstTabLabel setShadowOffset:CGSizeMake(0, 1)];
    [self.firstTabLabel setBackgroundColor:[UIColor clearColor]];

    self.firstTabBG = [[[UIImageView alloc] initWithImage:nil] autorelease];
    [self.firstTabBG setTag:01];
    [self.firstTabBG setFrame:CGRectMake(0, 10, widthbg, heightbg)];
    [self.firstTabBG addSubview:self.firstTab];
    [self.firstTabBG addSubview:self.firstTabLabel];
    [self.firstTabBG setUserInteractionEnabled:YES];
    [self.firstTabBG addGestureRecognizer:gest];
    [bg addSubview:self.firstTabBG];

    [gest release];

    gest = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];

    self.secondTab = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tab_bar_explore_selected"]] autorelease];
    [self.secondTab setFrame:CGRectMake(ceilf((widthbg - width) / 2), y, 23, 23)];

    self.secondTabLabel = [[[UILabel alloc] initWithFrame:CGRectMake(0, 27, widthbg, 20)] autorelease];
    [self.secondTabLabel setTextAlignment:NSTextAlignmentCenter];
    [self.secondTabLabel setText:@"Explore"];
    [self.secondTabLabel setFont:[UIFont boldSystemFontOfSize:13]];
    [self.secondTabLabel setTextColor:RGB(80, 23, 17)];
    [self.secondTabLabel setShadowColor:[UIColor colorWithWhite:1 alpha:0.35]];
    [self.secondTabLabel setShadowOffset:CGSizeMake(0, 1)];
    [self.secondTabLabel setBackgroundColor:[UIColor clearColor]];

    self.secondTabBG = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tab_bar_selected_bg"]] autorelease];
    [self.secondTabBG setTag:02];
    [self.secondTabBG setUserInteractionEnabled:YES];
    [self.secondTabBG addGestureRecognizer:gest];
    [self.secondTabBG setFrame:CGRectMake(widthbg, 10, widthbg, heightbg)];
    [self.secondTabBG addSubview:self.secondTab];
    [self.secondTabBG addSubview:self.secondTabLabel];
    [bg addSubview:self.secondTabBG];

    [self tapped:gest];
    [gest release];

    gest = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];

    self.thirdTab = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tab_bar_settings"]] autorelease];
    [self.thirdTab setFrame:CGRectMake(ceilf((widthbg - width) / 2), y, 23, 23)];

    self.thirdTabLabel = [[[UILabel alloc] initWithFrame:CGRectMake(0, 27, widthbg, 20)] autorelease];
    [self.thirdTabLabel setTextAlignment:NSTextAlignmentCenter];
    [self.thirdTabLabel setText:@"Settings"];
    [self.thirdTabLabel setFont:[UIFont boldSystemFontOfSize:13]];
    [self.thirdTabLabel setTextColor:RGB(80, 23, 17)];
    [self.thirdTabLabel setShadowColor:[UIColor colorWithWhite:1 alpha:0.35]];
    [self.thirdTabLabel setShadowOffset:CGSizeMake(0, 1)];
    [self.thirdTabLabel setBackgroundColor:[UIColor clearColor]];

    self.thirdTabBG = [[[UIImageView alloc] initWithImage:nil] autorelease];
    [self.thirdTabBG setTag:03];
    [self.thirdTabBG setFrame:CGRectMake(widthbg * 2, 10, widthbg, heightbg)];
    [self.thirdTabBG addSubview:self.thirdTab];
    [self.thirdTabBG addSubview:self.thirdTabLabel];
    [self.thirdTabBG setUserInteractionEnabled:YES];
    [self.thirdTabBG addGestureRecognizer:gest];
    [bg addSubview:self.thirdTabBG];
    [gest release];

    [self.view addSubview:bg];
    [bg release];

}

static int lastIndex = 2;

- (void) tapped:(UITapGestureRecognizer *) gest {

    switch (lastIndex) {
        case 1:
            [self.firstTab setImage:[UIImage imageNamed:@"tab_bar_user"]];
            [self.firstTabBG setImage:nil];
            [self.firstTabLabel setTextColor:RGB(80, 23, 17)];
            [self.firstTabLabel setShadowColor:[UIColor colorWithWhite:1 alpha:0.35]];
            [self.firstTabLabel setShadowOffset:CGSizeMake(0, 1)];
            break;

        case 2:
            [self.secondTab setImage:[UIImage imageNamed:@"tab_bar_explore"]];
            [self.secondTabBG setImage:nil];
            [self.secondTabLabel setTextColor:RGB(80, 23, 17)];
            [self.secondTabLabel setShadowColor:[UIColor colorWithWhite:1 alpha:0.35]];
            [self.secondTabLabel setShadowOffset:CGSizeMake(0, 1)];

            break;

        case 3:
            [self.thirdTab setImage:[UIImage imageNamed:@"tab_bar_settings"]];
            [self.thirdTabBG setImage:nil];
            [self.thirdTabLabel setTextColor:RGB(80, 23, 17)];
            [self.thirdTabLabel setShadowColor:[UIColor colorWithWhite:1 alpha:0.35]];
            [self.thirdTabLabel setShadowOffset:CGSizeMake(0, 1)];
            break;
    }

    switch (gest.view.tag) {
        case 1 :{

            [self setSelectedIndex:0];
            [self.firstTab setImage:[UIImage imageNamed:@"tab_bar_user_selected"]];
            [self.firstTabBG setImage:[UIImage imageNamed:@"tab_bar_selected_bg"]];
            [self.firstTabLabel setTextColor:RGB(252, 208, 170)];
            [self.firstTabLabel setShadowColor:RGB(80, 23, 17)];
            [self.firstTabLabel setShadowOffset:CGSizeMake(0, -1)];

            break;

        }

        case 2: {

            [self setSelectedIndex:1];
            [self.secondTab setImage:[UIImage imageNamed:@"tab_bar_explore_selected"]];
            [self.secondTabBG setImage:[UIImage imageNamed:@"tab_bar_selected_bg"]];
            [self.secondTabLabel setTextColor:RGB(252, 208, 170)];
            [self.secondTabLabel setShadowColor:RGB(80, 23, 17)];
            [self.secondTabLabel setShadowOffset:CGSizeMake(0, -1)];
            break;

        }

        case 3: {

            [self setSelectedIndex:2];
            [self.thirdTab setImage:[UIImage imageNamed:@"tab_bar_settings_selected"]];
            [self.thirdTabBG setImage:[UIImage imageNamed:@"tab_bar_selected_bg"]];
            [self.thirdTabLabel setTextColor:RGB(252, 208, 170)];
            [self.thirdTabLabel setShadowColor:RGB(80, 23, 17)];
            [self.thirdTabLabel setShadowOffset:CGSizeMake(0, -1)];
            break;

        }
    }

    lastIndex = gest.view.tag;

}

- (void) dealloc {

    [firstTab release];
    [firstTabBG release];
    [secondTab release];
    [secondTabBG release];
    [thirdTab release];
    [thirdTabBG release];
    [firstTabLabel release];
    [secondTabLabel release];
    [thirdTabLabel release];
    [super dealloc];

} 
```

# javascript - 如何使顶点和片段着色器在three.js中工作

> ID：14130796
> 
> 赞同：2
> 
> 时间：2013-01-02T23:19:56.863
> 
> 标签：javascript, three.js, webgl

我已经开始阅读一本名为 WebGL：Up and Running 的书，它使用我首选的 THREE.js 解决方案在浏览器中呈现 3D 对象。我试图模仿书中他介绍着色器以制作动态、明亮的太阳的部分，但当我尝试时，我得到的只是一个黑色球体。使着色器更简单（如 Lampert 着色器）效果很好，所以它似乎不是照明 - 只是着色器的实现方式。

那么我做错了什么？我设置场景的javascript代码是

```
var renderer, scene, camera, sunMesh, clock, uniforms;

$(function(){          

    //set scene size
    var WIDTH = 1200,
            HEIGHT = 800;

    //set some camera attributes
    var VIEW_ANGLE = 45,
        ASPECT = WIDTH / HEIGHT,
        NEAR = 0.1,
        FAR = 10000;

    // get the DOM element to attach to
    // - assume we've got jQuery to hand
    var $container = $('#container');

    // create a WebGL renderer, camera
    // and a scene
    renderer = new THREE.WebGLRenderer();
    camera = new THREE.PerspectiveCamera(  VIEW_ANGLE,
                                    ASPECT,
                                    NEAR,
                                    FAR  );
    scene = new THREE.Scene();

    // the camera starts at 0,0,0 so pull it back
    camera.position.z = 300;

    // start the renderer
    renderer.setSize(WIDTH, HEIGHT);

    // attach the render-supplied DOM element
    $container.append(renderer.domElement);

    // Create a group to hold our sun mesh and light
    var sunGroup = new THREE.Object3D();
    var SUNMAP = "./images/lavatile.jpg";
    var NOISEMAP = "./images/cloud.png";
    uniforms = {
            time: { type: "f", value: 1.0 },
            texture1: { type: "t", value: 0, texture: THREE.ImageUtils.loadTexture( NOISEMAP ) },
            texture2: { type: "t", value: 1, texture: THREE.ImageUtils.loadTexture( SUNMAP ) }
    };

    uniforms.texture1.texture.wrapS = uniforms.texture1.texture.wrapT = THREE.Repeat;
    uniforms.texture2.texture.wrapS = uniforms.texture2.texture.wrapT = THREE.Repeat;
    var material = new THREE.ShaderMaterial( {
            uniforms: uniforms,
            vertexShader: document.getElementById( 'vertexShader' ).textContent,
            fragmentShader: document.getElementById( 'fragmentShader' ).textContent
    } );

    //USING THIS MATERIAL WORKS, SO ITS DEFINITELY THE SHADER!
    //var material = new THREE.MeshLambertMaterial(
    //{
    //    color: 0x5B92E5
    //});

    // Create our sun mesh
    var geometry = new THREE.SphereGeometry(50, 64, 64);
    sunMesh = new THREE.Mesh( geometry, material );
    // Tuck away the uniforms so that we can animate them over time
    // Set up a clock to drive the animation
    clock = new THREE.Clock();
    // Create a point light to show off our solar system
    var light = new THREE.PointLight( 0xffffff );
    light.position.set(0,0,100);
    sunGroup.add(sunMesh);
    sunGroup.add(light);
    scene.add(sunGroup);
    // and the camera
    scene.add(camera);

    renderer.render(scene, camera);

    // setup an interval to loop the game loop
    setInterval(gameloop, 50);     

});

function gameloop() {  
    var delta = clock.getDelta();
    uniforms.time.value += delta;
    renderer.render(scene, camera);
} 
```

我将保存完整的 HTML（在[http://pastebin.com/PGLXkzkA](http://pastebin.com/PGLXkzkA)中列出），但其中包含我的着色器，这些着色器是我从 WebGL 书的来源中提取的。这些可能是错误的，但我怀疑这是我使用着色器的方式。据我了解，我应该看到一个太阳，其纹理基于噪声遮挡贴图而变化，顶点位置有一些移动以使太阳脉动。正如我所说，我可以看到一个球体，但它不亮而且是黑色的。

我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:18:31.567

真可惜。这本书似乎已经过时了。

Three.js 处于 alpha 阶段，并且正在迅速变化。**而是从 three.js 示例中学习。**它们始终是最新的。

查看[Migration Wiki](https://github.com/mrdoob/three.js/wiki/Migration)以获取有关升级到当前版本的帮助。

您的代码中有一些明显的错误：

```
texture1: { type: "t", value: 0, texture: THREE.ImageUtils.loadTexture( NOISEMAP ) }, 
```

应该

```
texture1: { type: "t", value: THREE.ImageUtils.loadTexture( NOISEMAP ) }, 
```

`THREE.Repeat`应该是`THREE.RepeatWrapping`，`uniforms.texture1.texture`应该是`uniforms.texture1.value`。

抱歉，您可能还有其他问题，但我只能帮助您使用当前版本的 three.js。

三.js r.54

# c# - 日期作为文件夹名称

> ID：14130798
> 
> 赞同：5
> 
> 时间：2013-01-02T23:20:01.613
> 
> 标签：c#, datetime, directory, filenames

快一个，为什么这段代码对我不起作用：

```
Directory.CreateDirectory(DateTime.ToString("dd-MM-yyyy")); 
```

错误：

```
Error   1   An object reference is required for the non-static field, method, or property 'System.DateTime.ToString(string)'    Documents\Visual Studio 2008\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs    83  39  WindowsFormsApplication1 
```

怎么了？如果我想将文件夹名称命名为“这是文件夹”，然后添加今天的日期，它应该是什么样子？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-02T23:20:54.550

也许你的意思是：

```
Directory.CreateDirectory(DateTime.Now.ToString("dd-MM-yyyy")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T23:23:15.533

> 怎么了？

`ToString`是*实例*方法而不是静态方法，因此您不能`DateTime`直接在类上调用它 - 您需要在类的*实例*上调用它`DateTime`。

> 如果我想将文件夹名称命名为“这是文件夹”，然后添加今天的日期，它应该是什么样子？

您可以使用该类的`Now`/`UtcNow`属性，该属性`DateTime`将为您提供当前时间实例，例如

```
DateTime.UtcNow.ToString("dd-MM-yyyy"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T23:21:32.227

```
Directory.CreateDirectory(DateTime.Now.ToString("dd-MM-yyyy")); 
```

# iphone - iPhone 表格视图和搜索栏隐藏

> ID：14130804
> 
> 赞同：0
> 
> 时间：2013-01-02T23:20:31.870
> 
> 标签：iphone, uitableview, uisearchbar

我有一个表格视图，顶部有一个搜索栏。我使用 UIEdgeInserts 将其隐藏在状态栏下，直到用户拉下表格视图。它按预期工作。

我的问题是，当我离开此屏幕并使用 segues 再次返回时，搜索栏和边缘插入会显示片刻然后隐藏:(有人可以建议一个可能的解决方案吗？

```
- (void)viewDidLoad {

[super viewDidLoad];

self.searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
[self.searchBar setShowsCancelButton:TRUE];
[self.searchBar setDelegate:self];
[self.searchBar setBackgroundImage:[UIImage new]];
[self.searchBar setTranslucent:YES];

[self.listingTable setContentInset:UIEdgeInsetsMake(44, 0, 0, 0)];
}

- (void) viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];
[self.listingTable setContentOffset:CGPointMake(0, 44)];
} 
```

我尝试将 setContentOffset 放入 viewWillAppear 方法，但它不起作用。

# css - 水平导航无法右对齐

> ID：14130805
> 
> 赞同：2
> 
> 时间：2013-01-02T23:20:34.060
> 
> 标签：css, navigation

我知道这已经在这里讨论过 - 因为我已经阅读了很多关于同一件事的问题。并尝试了解决方案，但我似乎无法让这个愚蠢的导航右对齐（需要 li 块向右对齐）。有人可以指出我的错误 - 谢谢。

[http://jsfiddle.net/gstricklind/vP38J/4/](http://jsfiddle.net/gstricklind/vP38J/4/)

**CSS**

```
ul#menu-main-top {
    float: right;
}
.nav-bar > li {
    border: 1px solid #333;
    display: block;
    float: left;
    line-height: 38px;
    margin: 0;
    padding: 0;
    position: relative;
}
ul#menu-main-top li a {
    color: #222222 !important;
}
.top-nav > li > a {
    color: #E6E6E6 !important;
}
.nav-bar > li > a:first-child {
    margin: 0 0 0 10px;
    padding: 0 0 0 30px;
}
.nav-bar > li > a:first-child {
    display: block;
    font-size: 14px;
    padding: 0 20px;
    position: relative;
    text-decoration: initial;
} 
```

​<strong>HTML

```
<div class="eight columns">
    <ul id="menu-main-top" class="top-nav nav-bar hide-for-small">
        <li id="menu-item-58">                
            <a href="#">Home</a>
        </li>
        <li id="menu-item-94">
            <a href="#">Calendar</a>
        </li>
        <li id="menu-item-59">
            <a href="#">Meanings</a>
        </li>
        <li id="menu-item-77">
            <a href="#">About Us</a>
        </li>
        <li id="menu-item-67">
            <a href="#">Contact Us</a>
        </li>
        <li id="menu-item-343" class="active">
            <a href="#">My Account</a>
        </li>
        <li class="logout">
            <a href="#">Logout</a>
        </li>
    </ul>                    
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T00:06:24.757

这是你想做的吗？

[http://jsfiddle.net/vP38J/5/](http://jsfiddle.net/vP38J/5/)

相关更改代码：

```
.nav-bar > li {
    border:1px solid #333;
    display:block;
    float: right;
    line-height:38px;
    margin:0;
    padding:0;
    position:relative;
 } 
```

此外，如果您希望顺序保持不变，只需颠倒 HTML 中列表的顺序即可。

# java - 遍历Java中的列表

> ID：14130807
> 
> 赞同：-7
> 
> 时间：2013-01-02T23:20:34.880
> 
> 标签：java

我有一个疑问：我可以遍历一个列表吗？我的意思是一个列表，而不是一个集合。我知道 List 是一个接口，但似乎可以迭代 List （在转换后返回`"String[]`“使用`"Arrays.asList(String[])"`.

有可能还是我错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:23:31.233

是的，[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)有[`Iterable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Iterable.html)一个超级接口，所以（如果你有一个`List<String>`命名`list`的例子）你可以做

```
for (String str : list)
  // do something with `str` 
```

这可能是迭代列表的最简单方法（称为*for-each*循环）。事实上，你可以`Collection`像这样迭代任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:23:44.867

[指示的方法](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)返回`java.util.List`一个[Collection](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)。有什么问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:24:29.733

```
List yourList = Arrays.asList(yourStringArray);
for (String s : yourList) {
  // do something with s
} 
```

或更简单（您不需要列表）

```
for (String s : yourStringArray) {
  // do something with s
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T23:24:31.500

您可以遍历列表、数组或包装数组的列表。您可以通过使用带有 while 循环或 for 循环的迭代器来迭代它，但通过索引计数，或者使用 for each 构造。

没有很多方法可以做到这一点，并且已经有很多例子我不会添加到它们中。

# android - 如何监视和记录哪些模块在 linux 内核中持有锁？

> ID：14130808
> 
> 赞同：0
> 
> 时间：2013-01-02T23:20:43.040
> 
> 标签：android, c, linux, linux-kernel, arm

是否可以监视哪个模块在 linux 内核中持有锁？

**我的意思是我怎么知道谁锁定了`spin_lock`,`semaphore`等`mutex`。**

对于用户空间：

[Linux：如何找到持有特定锁的线程？](https://stackoverflow.com/questions/11391379/linux-how-can-i-find-the-thread-which-holds-a-particular-lock)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:36:00.263

通常，当检测到软锁定时，内核将打印当前堆栈跟踪。例如：

```
INFO: task bdi-default:19 blocked for more than 120 seconds.
"echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
bdi-default   D 0000000000000001     0    19      2 0x00000000
ffff88013cd7fc60 0000000000000046 ffff88013cd7fc10 ffffffff810096f0
ffff88013806f4f8 0000000000000000 0000000000d7fc20 ffff880028313b40
ffff88013cd7b0b8 ffff88013cd7ffd8 000000000000f4e8 ffff88013cd7b0b8
Call Trace:
[<ffffffff810096f0>] ? __switch_to+0xd0/0x320
[<ffffffff814eca40>] ? thread_return+0x4e/0x77e
[<ffffffff814ed8c5>] schedule_timeout+0x215/0x2e0
[<ffffffff814ed543>] wait_for_common+0x123/0x180
[<ffffffff8105fa50>] ? default_wake_function+0x0/0x20
[<ffffffff814ed65d>] wait_for_completion+0x1d/0x20
[<ffffffff810909f9>] kthread_create+0x99/0x120
[<ffffffff81134d40>] ? bdi_start_fn+0x0/0x100
[<ffffffff8100bc0e>] ? apic_timer_interrupt+0xe/0x20
[<ffffffff81134bb7>] bdi_forker_task+0x187/0x310
[<ffffffff81134a30>] ? bdi_forker_task+0x0/0x310
[<ffffffff81090886>] kthread+0x96/0xa0
[<ffffffff8100c14a>] child_rip+0xa/0x20
[<ffffffff810907f0>] ? kthread+0x0/0xa0
[<ffffffff8100c140>] ? child_rip+0x0/0x20 
```

如果调用跟踪没有提供足够的信息，请尝试在内核中启用锁定检测（需要重新编译内核）

```
 make menuconfig
         \--> Kernel Hacking
           \--> Detect Soft Lockups 
```

然后调用跟踪将显示更多信息，开头为：

```
BUG: soft lockup detected on CPU#0! 
```

要查看调用跟踪，请检查 dmesg，或者您最好使用串行控制台来捕获所有内核日志（在某些情况下，由于软锁定，内核可能会挂起而不会将所有日志吐出到文件中，但使用串行控制 -或其他替代品，例如 netconsole 等 - 您可以捕获日志）。

# django - 在 Django 中，我想实现一个一对多的关系

> ID：14130814
> 
> 赞同：0
> 
> 时间：2013-01-02T23:21:08.317
> 
> 标签：django, one-to-many

我读过有人谈论在 Django 中使用 ForeignKey 进行一对多关系，但这不是我想要的。假设我有一个名为 Club 的模型，简单定义为：

```
class Club(models.Model):
  name = models.CharField(max_length = 64) 
```

我想要的是添加一个名为 owner 的字段，它与用户（用户模型）是一对多的关系。我不想向引用 Club 的 User 添加 ForeignKey，因为这会使 User 混乱。我真的想要俱乐部模型中的一个字段，该字段维护与被视为俱乐部所有者的 0、1 或更多用户的关系。有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:24:13.473

您正在寻找的是[多对多](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)关系。

> 在多对多关系中，表 A 中的每一行可以有很多（零个或多个）表 B 中的匹配行，表 B 中的每一行可以有很多表 A 中的匹配行。每个俱乐部可以有多个所有者，例如，每个所有者可以拥有许多俱乐部。

改编自： http: [//my.safaribooksonline.com/book/databases/sql/9780321584069](http://my.safaribooksonline.com/book/databases/sql/9780321584069)

# jquery - 使用复选框触发 jQuery 事件 - 并传递值？

> ID：14130816
> 
> 赞同：1
> 
> 时间：2013-01-02T23:21:14.597
> 
> 标签：jquery

抱歉，这个问题的标题可能很糟糕 - 我努力想出更好的东西！

作为更广泛应用程序的一部分，我正在编写一个简单的“待办事项”列表，并且由于我有限的 jQuery/Javascript 知识而遇到了一个绊脚石。

该页面具有许多复选框 - 每个“任务”旁边都有一个。我需要做的是每次选中或取消选中复选框时触发一个'get'事件（'get'将触发一个保存状态的后端脚本 - 即选中将其保存为'done'，而取消选中它将将其保存为“待处理”）。

到目前为止，当用户与复选框交互时，我已经触发了一个警报，现在已经获得了显示复选框的值（这是任务的简单 ID）的警报，但我坚持我如何将所有这些放在一起来触发 .get

这是我到目前为止所拥有的...

```
<script>
$(document).ready(function(){
$(":checkbox").change(function(){
    if($(this).attr("checked"))
    {
        alert($(this).is(':checked'))
    }
    else
    {
        alert($(this).val());
    }
});
});
</script>

<input type="checkbox" value="#itemID#"> 
```

非常感谢指点！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T23:38:29.963

可以做一个AJAX请求如下：

```
$(":checkbox").change(function(){
     var data= { 
         id: this.value,
         status : this.checked ? 'done' :'pending'
     } ;
    $.get( 'serverFile.php', data, function(response){
         /* ajax is complete here, can do something with response if needed*/
     })

}); 
```

在服务器上，您会像收到带有字段名称的表单一样接收数据，`id`并且`status`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:37:08.293

你基本上拥有它，只需使用 jQuerys [$.get()](http://api.jquery.com/jQuery.get/)

```
<script>
$(document).ready(function(){
    $(":checkbox").change(function() {
        $.get('/url/to/response', { id: this.value, is_checked: this.checked });
    });
});
</script>

<input type="checkbox" value="#itemID#"> 
```

# xsd - 如何在 XML Schema 中同时使用递归和继承？

> ID：14130820
> 
> 赞同：1
> 
> 时间：2013-01-02T23:21:36.000
> 
> 标签：xsd

我有一个用例来定义 XSD 模式来描述类似于文件和目录的结构。

1.  `File`是具有多个属性的复杂类型。
2.  `Directory`是 a `File`，所以它应该是 a 的扩展，`File`或者换句话说，继承自 a `File`。
3.  `Directory`可以包含 more`Files`和 sub `Directories`，所以应该递归定义。
4.  `File`可能是一个元素。
5.  `Directory`可以是根元素。

任何人都可以提供示例模式文件吗？

例如，以下 C++ 代码编译/运行良好：

```
 #include <iostream>
    #include <vector>

    using namespace std;

    class FileClass {
    public:
       string name;
       int   type;
       string path;
       long long size;
       virtual int open(){
       };
       virtual int close (){
       };
       virtual ~FileClass(){
       };
    };

    class DirectoryClass: public FileClass {
    public:
       vector<FileClass*> dir_contents;
    };

    int main() {
    cout<<"started"<<endl;
    DirectoryClass root;
    root.open();
    FileClass* newFile = new FileClass();
    root.dir_contents.push_back(newFile);
    DirectoryClass* subDir = new DirectoryClass();
    root.dir_contents.push_back(subDir);
    root.close();
    cout<<"finished"<<endl;
    } 
```

如您所见，DirectoryClass 仅包含一个 FileClass 向量，并且它能够存储子目录，因为 DirectoryClass 是从 FileClass 派生的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:49:26.103

我同意托尼的观点，为什么要从文件中派生目录？但是，如果这就是您要建模的内容...

![XSD 的图形表示](../Images/fd2891d14bbb186eeafcee4f4e638bc1.png)

```
<?xml version="1.0" encoding="utf-8" ?>
<!--Created with Liquid XML Studio 2013 Designer Edition 11.0.0.0 (http://www.liquid-technologies.com)-->
<xs:schema elementFormDefault="qualified"
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="FileType">
        <xs:attribute name="name"
                      type="xs:string"
                      use="required" />
        <xs:attribute name="creationDate"
                      type="xs:dateTime"
                      use="required" />
    </xs:complexType>
    <xs:element name="File"
                type="FileType" />
    <xs:element name="Directory">
        <xs:complexType>
            <xs:complexContent>
                <xs:extension base="FileType">
                    <xs:sequence>
                        <xs:element ref="File"
                                    minOccurs="0"
                                    maxOccurs="unbounded" />
                        <xs:element ref="Directory"
                                    minOccurs="0"
                                    maxOccurs="unbounded" />
                    </xs:sequence>
                </xs:extension>
            </xs:complexContent>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

然后，如果您尝试从 C#、C++、Java 等读取/写入结构化 XML 数据，您可以查看[XML Data Binding](http://www.liquid-technologies.com/xml-data-binding.aspx)。这会从您的 XSD 生成一组强类型对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:39:32.820

这会稍微改变一些东西并使 XML 变得复杂。有 2 种方法 ComplexType 继承或替换组。复杂类型更适合 breif。

![在此处输入图像描述](../Images/d736b70c806fa84c3ddcac60ff6081c7.png)

```
<?xml version="1.0" encoding="utf-8" ?>
<!--Created with Liquid XML Studio 2013 Designer Edition (Trial) 11.0.0.0 (http://www.liquid-technologies.com)-->
<xs:schema elementFormDefault="qualified"
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="FileType">
        <xs:attribute name="name"
                      type="xs:string"
                      use="required" />
        <xs:attribute name="creationDate"
                      type="xs:dateTime"
                      use="required" />
        <xs:attribute name="type"
                      type="xs:int" />
        <xs:attribute name="size"
                      type="xs:long" />
    </xs:complexType>
    <xs:complexType name="DirectoryType">
        <xs:complexContent>
            <xs:extension base="FileType">
                <xs:sequence>
                    <xs:element name="Content"
                                type="FileType"
                                minOccurs="0"
                                maxOccurs="unbounded" />
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:element name="Directory"
                type="DirectoryType" />
</xs:schema> 
```

**示例 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Created with Liquid XML Studio 2013 Designer Edition (Trial) 11.0.0.0 (http://www.liquid-technologies.com) -->
<Directory xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="FoldersCT.xsd"
           name="string"
           creationDate="1975-12-12T08:25:00.94"
           type="393"
           size="-5191">
    <Content name="FileA1"
             creationDate="1993-02-23T21:13:52.11"
             type="4931"
             size="-1984" />
    <Content name="FileA2"
             creationDate="1991-12-26T15:57:44.30"
             type="-6155"
             size="18" />
    <Content name="FileA3"
             creationDate="1979-01-05T21:36:13.80"
             type="8362"
             size="5579" />
    <Content xsi:type="DirectoryType"
             name="DirA4"
             creationDate="1979-01-05T21:36:13.80"
             type="8362"
             size="5579">
        <Content name="FileB1"
                 creationDate="1979-01-05T21:36:13.80"
                 type="8362"
                 size="5579" />
        <Content name="FileB2"
                 creationDate="1979-01-05T21:36:13.80"
                 type="8362"
                 size="5579" />
    </Content>
</Directory> 
```

请注意在目录中使用 xsi:type="DirectoryType" 属性。这告诉 XML Parser 内容是由 DirectoryType 定义的。没有这个它的文件。这就是您的规范所说的，但我会说它非常混乱。

另一种解决方案是使用替换组，我个人不喜欢它，因为它们很难在模式中阅读。这与原始解决方案相同。

![在此处输入图像描述](../Images/9b6c7c5901075306013e6b6cd5992238.png)

```
<?xml version="1.0" encoding="utf-8" ?>
<!--Created with Liquid XML Studio 2013 Designer Edition (Trial) 11.0.0.0 (http://www.liquid-technologies.com)-->
<xs:schema elementFormDefault="qualified"
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="FileType">
        <xs:attribute name="name"
                      type="xs:string"
                      use="required" />
        <xs:attribute name="creationDate"
                      type="xs:dateTime"
                      use="required" />
        <xs:attribute name="type"
                      type="xs:int" />
        <xs:attribute name="size"
                      type="xs:long" />
    </xs:complexType>
    <xs:element name="File"
                type="FileType"
                substitutionGroup="File" />
    <xs:element name="Directory"
                substitutionGroup="File">
        <xs:complexType>
            <xs:complexContent>
                <xs:extension base="FileType">
                    <xs:sequence>
                        <xs:element ref="File"
                                    minOccurs="0"
                                    maxOccurs="unbounded" />
                    </xs:sequence>
                </xs:extension>
            </xs:complexContent>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

**示例 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Created with Liquid XML Studio 2013 Designer Edition (Trial) 11.0.0.0 (http://www.liquid-technologies.com) -->
<Directory xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="FoldersSG.xsd"
           name="string"
           creationDate="1992-01-13T17:58:08.38"
           type="-2296"
           size="-8752">
    <File name="string"
          creationDate="1982-11-03T17:57:40.96"
          type="6813"
          size="5278" />
    <File name="string"
          creationDate="1986-12-08T12:38:03.46"
          type="4479"
          size="8453" />
    <Directory name="string"
               creationDate="1992-01-13T17:58:08.38"
               type="-2296"
               size="8752">
        <File name="string"
              creationDate="1982-11-03T17:57:40.96"
              type="6813"
              size="5278" />
        <File name="string"
              creationDate="1986-12-08T12:38:03.46"
              type="4479"
              size="8453" />
    </Directory>
</Directory> 
```

# asp.net-mvc-3 - 如果我想使用属性来处理 MVC 返回的 contentType，在 OnResultExecuting 或 OnResultExecuted 中执行此操作会更好吗？

> ID：14130822
> 
> 赞同：1
> 
> 时间：2013-01-02T23:21:53.863
> 
> 标签：asp.net-mvc-3, actionfilterattribute

为了解决一个荒谬的问题，我需要在我的查询字符串中附加一个值（在 javascript 中这样做）并测试它是否存在于服务器上（因为这可能来自 ajax 或 iframe，所以遗憾的是没有标题潜力，并且我试图避免向我的`<form>`元素添加值）。为此，我设计了这个小片段，但我不确定将“setter”块放在哪里：

```
using System.Web.Mvc;

namespace Company.Client.Framework.Mvc
{
  class CreateFormDialogResponseAttribute : ActionFilterAttribute
  {
    private bool SetContentType { get; set; }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        SetContentType = !filterContext.HttpContext.Request.Params["FormDialogRequest"].IsEmpty();

        base.OnActionExecuting(filterContext);
    }
    public override void OnResultExecuting(ResultExecutingContext filterContext)
    { 
        //do I set it here? (A)
        if (SetContentType)
            filterContext.HttpContext.Response.ContentType = "text/json";
        base.OnResultExecuting(filterContext);
    }
    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        //do I set it here? (B)
        if (SetContentType)
            filterContext.HttpContext.Response.ContentType = "text/json";
        base.OnResultExecuted(filterContext);
    }
  }
} 
```

如果我将其设置为，`(A)`那么客户端似乎仍有时间“覆盖”该属性（如果需要）。而`(B)`看起来像*“我不在乎你认为你想做什么”的*立场。这是一个准确的理解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:45:06.133

self-answer:

Because I need to override the value set by the ActionResult itself, I have to come in after the method as already done it's work. Because I want to avoid the situation where the developer has manually set the type, I'm doing two checks, one to see if we should set it, and one to see if it's "application/json" (the default).

# javascript - Three.js raycast 产生空的相交数组

> ID：14130825
> 
> 赞同：3
> 
> 时间：2013-01-02T23:22:27.490
> 
> 标签：javascript, three.js, raycasting

我试图检测用户何时单击了我的 3d 场景中的特定立方体我已经看到了一些类似的问题，但似乎没有一个问题与我完全相同。

我有一个 3D 立方体数组，可以很好地填充和显示，但是当我的鼠标按下函数被调用时，相交数组总是空的——我看不出有什么问题，希望能得到任何帮助。

我的渲染器设置如下：

```
function setupRenderer()
{
    renderer = new THREE.WebGLRenderer({antialias: true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColorHex( 0xEEEEEE, 1 );
    renderer.domElement.addEventListener( 'mousedown', onDocumentMouseMove, false );
    $('body').append(renderer.domElement);
} 
```

事件处理程序是：

```
function onDocumentMouseDown(event)
{
    console.log("mouse clicked!");
    event.preventDefault();
    if(event.target == renderer.domElement)
    {
        var mouseX = (event.clientX / window.innerWidth)*2-1;
        var mouseY = -(event.clientY /window.innerHeight)*2+1;

        var vector = new THREE.Vector3(mouseX, mouseY, 0.5);
        projector.unprojectVector(vector, camera);

        var raycaster = new THREE.Raycaster(camera.position, vector.subSelf(camera.position).normalize());
        var intersects = raycaster.intersectObjects(cubes);
        console.log("intersects.length: " + intersects.length);
        if ( intersects.length > 0 ) {
            console.log("intersected objects");
            /* do stuff */
        }
    }
} 
```

您可以在[http://kev-adsett.co.uk/experiments/three.js/experiment1/查看当前的项目](http://kev-adsett.co.uk/experiments/three.js/experiment1/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T00:42:11.030

您需要将单个对象数组传入

```
var intersects = raycaster.intersectObjects( objects ); 
```

如果对象数组是分层的（即其中一个对象有一个子对象），那么您需要以这种方式指定它：

```
var intersects = raycaster.intersectObjects( objects, true ); 
```

也可以传入`scene.children`。

此功能不适用于您的“立方体”数据结构。

三.js r.54

# php - PHP 未定义索引：HTTP_USER_AGENT

> ID：14130830
> 
> 赞同：28
> 
> 时间：2013-01-02T23:22:40.120
> 
> 标签：php, user-agent

以下代码验证了访问该站点的用户代理，但是我收到了错误消息。我需要更新什么以适应没有设置用户代理的场景？

**ERROR** PHP Notice: Undefined index: HTTP_USER_AGENT in Utils.php on line 7

**代码**

```
public static function detectBrowser()
    {
        $userAgent = strtolower($_SERVER['HTTP_USER_AGENT']);

        if (preg_match('/opera/', $userAgent)) {
            $name = 'opera';
        }
        elseif (preg_match('/webkit/', $userAgent)) {
            $name = 'safari';
        }
        elseif (preg_match('/msie/', $userAgent)) {
            $name = 'msie';
        }
        elseif (preg_match('/mozilla/', $userAgent) && !preg_match('/compatible/', $userAgent)) {
            $name = 'mozilla';
        }
        else {
            $name = 'unrecognized';
        }

        if (preg_match('/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/', $userAgent, $matches)) {
            $version = $matches[1];
        }
        else {
            $version = 'unknown';
        }

        if (preg_match('/linux/', $userAgent)) {
            $platform = 'linux';
        }
        elseif (preg_match('/macintosh|mac os x/', $userAgent)) {
            $platform = 'mac';
        }
        elseif (preg_match('/windows|win32/', $userAgent)) {
            $platform = 'windows';
        }
        else {
            $platform = 'unrecognized';
        }

        return array(
            'name'      => $name,
            'version'   => $version,
            'platform'  => $platform,
            'userAgent' => $userAgent
        );
    } 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-02T23:26:27.980

User-Agent 标头是可选的。防火墙可能会对其进行过滤，或者人们可能会将其客户端配置为忽略它。只需检查 using`isset()`是否存在。或者更好的是，`!empty()`用作空标题也没有用：

```
public static function detectBrowser() {
    if(empty($_SERVER['HTTP_USER_AGENT'])) {
        return array(
            'name' => 'unrecognized',
            'version' => 'unknown',
            'platform' => 'unrecognized',
            'userAgent' => ''
        );
    }

    // your old code here
} 
```

但是，由于您的所有代码似乎都可以在空字符串上正常工作并且还会产生“未知”值，因此您可以简单地更改以下行：

```
$userAgent = strtolower($_SERVER['HTTP_USER_AGENT']); 
```

像这样：

```
$userAgent = isset($_SERVER['HTTP_USER_AGENT'])
               ? strtolower($_SERVER['HTTP_USER_AGENT'])
               : ''; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-02T23:26:19.313

使用 isset：

```
if( !isset( $_SERVER['HTTP_USER_AGENT'])){
    $name = "none";
}else{
     $userAgent = strtolower($_SERVER['HTTP_USER_AGENT']);

    if (preg_match('/opera/', $userAgent)) {
        $name = 'opera';
    } [... yourcode ...]
} 
```

# ios - 核心数据相关对象被移除

> ID：14130832
> 
> 赞同：0
> 
> 时间：2013-01-02T23:23:01.530
> 
> 标签：ios, cocoa-touch, core-data

我目前在核心数据方面遇到了一个奇怪的问题。我正在编写的应用程序从服务器下载一堆数据，这些数据被转换为核心数据对象并存储。该设备还可以创建新对象并将它们上传到服务器。其中一个对象是 Document，它本质上是文件的表示。

这个模型是`MPDocument`。一个文档也可以链接到一个`MPPlace`模型，一个`MPUser`模型（用户创建文档，文档属于地方）。

我从服务器下载对象没有问题，并且所有关系都被正确创建和分配。当我尝试在设备本身上创建一个新文档时，问题就出现了。文档被创建，我设置了所有的关系，文档被上传，一切看起来都很好。但是当我通过核心数据查看器工具检查数据库时，所有的文档对象都没有位置关系的价值。这发生在所有现有文件上，而不仅仅是新文件。我实在想不通是怎么回事！

我正在创建这样的文档：

```
 MPUser *current = [MPUser currentUser];
   MPDocument *doc = [[MPDocument alloc] init];
          doc.name = @"App Upload";
     doc.local_url = [NSString stringWithFormat:@"%@", [info valueForKey:UIImagePickerControllerReferenceURL]];
doc.local_url_type = @(MPDocumentUrlTypeAsset);
          doc.user = current;

[current addCreatedDocumentsObject:doc];
[doc setValue:self.place forKey:@"place"];
[self.place addDocumentsObject:doc]; 
```

然后我有一个文件上传器来处理所有上传：

```
MPDocumentUploader *uploader = [[MPDocumentUploader alloc] initWithDocument:doc];
    uploader.requestDelegate = self;
       uploader.successBlock = ^(MPDocumentUploader *uploader, MPDocument *doc) {
           NSLog(@"Got doc = %@", doc);
       };
[uploader upload]; 
```

当调用成功块时，文档对象确实设置了位置关系。因此，即使上传完成，位置也已设置，所以我现在真的很困惑关系在哪里被完全清除。

文档上传器看起来像这样：

```
- (void) upload
{
    .... retrieve the local file and turn into NSData. This is fine
    MPRequest *request = [MPRequest requestWithURL:_url];
    [MPUser signRequest:request];
    [request setDelegate:_requestDelegate];
    [request setRequestMethod:@"POST"];
    [request mountDocumentUploader:self];

    [request submit:^(MPResponse *resp, NSError *error) {
        if (!error) {
            NSDictionary *data = (NSDictionary *)[resp paramForKey:@"data"];
            if (data) {
                NSLog(@"Document = %@", _document);
                _document.url = [data objectForKey:@"url"];
                _document.objID = [data objectForKey:@"id"];
                [_document saveLocally];
            }

            if (_successBlock) {
                _successBlock(self, _document);
            }
        } else {
            if (_failBlock) {
                _failBlock(self, error);
            }
        }
    }];
} 
```

该类`MPRequest`处理所有实际的上传和服务器请求，但实际上并不涉及 MPDocument 对象。

我不知道发生了什么，也不知道为什么要清除这些关系。请问有人可以帮忙吗！？

**更新**

玩了一圈，发现是调用提交块的时候报错。注释掉

```
_document.url = [data objectForKey:@"url"];
_document.objID = [data objectForKey:@"id"];
[_document saveLocally]; 
```

按预期工作，但现在显然没有设置这些值。将这些行中的任何一条单独添加回 1 仍然会导致问题，因此似乎只是简单地编辑它就会破坏它。仍然不知道为什么:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:13:32.927

好吧，我不完全确定发生了什么或为什么，但是在摆弄代码、清理项目和重新启动我的笔记本电脑之间，它似乎已经修复了自己，所以不知道问题是什么，但目前似乎没问题. 很困惑:S

# sql - 将数据从实时表复制到 SQL Server 2008R2 中的另一个表？

> ID：14130834
> 
> 赞同：2
> 
> 时间：2013-01-02T23:23:10.667
> 
> 标签：sql, sql-server, tsql, triggers, replication

我有一个作为 RealTimetable 的表和另一个作为 HistoryTable 的表。现在 RealTimetable 和 HistoryTable 具有相同的结构。我们需要一个过程来将数据从 RealTimetable 复制到 HistoryTable，然后每天从 realtimetable 中删除数据。由于实时表不能变得太大（它会导致我们的应用程序大幅减速），但我们需要保留实时表中的所有数据以用于记录和历史记录，因此我们将这些数据保留在 HistoryTable 中。

在这种情况下，触发器和复制不是最好的解决方案，因为实时表每天插入超过 60,000 到 100,000 次，设置其中任何一个都会导致数据库的开销很大，不是吗？

我想只有一个 sp 每天将不在 HistoryTable 中的数据从 realtimetable 插入到 HistoryTable 中，然后在 15 分钟前的数据插入过程之后从 realtimetable 中删除数据（因为数据可能会被写入插入过程和删除过程之间的实时表）。我们不想丢失这些数据..但是这样做有点肮脏..

请向我建议适用于我的场景的替代解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:50:12.597

没有一种干净的方法可以做到这一点，基本上你是在乱搞，因为你不能将所有数据保存在一个表中。

我会先从简单的开始，然后从一张桌子转到另一张桌子，然后看看这项工作做得如何，然后再开始为您还不知道存在的问题构建复杂的算法。

无论如何，我不会使用触发器来填充历史记录。历史表上的缓慢报告会阻止实时插入，这可能是您想要的最后一件事。

您是否考虑过 sql 是否是持久化实时数据的最佳选择？如果你“只是”在那里敲打东西，这样你就不会丢失它，那么你从 sql 中得到的东西很少。

# javascript - 避免来自 .focus 的多个事件监听器

> ID：14130840
> 
> 赞同：2
> 
> 时间：2013-01-02T23:23:39.937
> 
> 标签：javascript, jquery

我目前有一个文本框，我在焦点上调用键盘敲击：

```
$myTextBox.on('focus', function(e){
    $(document).keydown(function(e){ 
       if(e.which==13)
         e.preventDefault() 
    });
    $(document).keyup(function(e){
       if(e.which ==13)
         alert("hey");
    });
}); 
```

如果我多次单击它，按一次“输入”会导致许多警报，我该如何避免这种情况，以便只调用一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:34:40.897

每次字段获得焦点时，您都​​会添加事件侦听器。

只需在文档就绪功能上添加 keydown、keyup 侦听器...

```
$(function() {
    $("#myTextBox").keydown(function(e){ 
       if(e.which==13)
         e.preventDefault() 
    });
    $("#myTextBox").keyup(function(e){
       if(e.which ==13)
         alert("hey");
    });
});​ 
```

[http://jsfiddle.net/ShHkP/](http://jsfiddle.net/ShHkP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:38:33.880

就像其他人说的那样，您不必继续在`focus`. 同样，您应该只将事件附加到文本框本身，因为这实际上是您在将事件添加到焦点时尝试做的事情。

```
$myTextBox.on({
  'keydown': keyDown,
  'keyup': keyUp
});​ 
```

为了使您的应用程序不会进入 enter-alert-ok 循环，您必须在`alert()`调用之前关闭 keyup 侦听器，然后在点击 ok 后将其重新打开。

[这是一个小提琴。](http://jsfiddle.net/scrimothy/3S4LJ/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T23:26:02.910

```
var alreadyPressed = false;
    $("textarea").keypress(function (e) {
        if (e.which == 13) {
            e.preventDefault();
            alreadyPressed = true
        }
    });
    $("textarea").keyup(function (e) {
        if (e.which == 13 && !alreadyPressed) {
            alert("hey");
            alreadyPressed = false;
        }
    }); 
```

[http://jsfiddle.net/DerekL/Dr6t2/](http://jsfiddle.net/DerekL/Dr6t2/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-02T23:28:49.597

我知道您要做什么（或不做什么？）。您可以将事件附加到表单并排除文本区域，而不是在每次输入获得焦点时将其添加到文档中。

```
$('form').on('keydown', function( e ) {
  // Prevent submit when pressing enter but exclude textareas
  if ( e.which == 13 && e.target.nodeName != 'TEXTAREA' ) {
    e.preventDefault();
  }
} 
```

# sharepoint - Noob Sharepoint 2013 动态与静态 URL

> ID：14130857
> 
> 赞同：0
> 
> 时间：2013-01-02T23:25:05.577
> 
> 标签：sharepoint, sharepoint-2013

Sharepoint的总菜鸟。我刚刚创建了一个新的网站集。然后我创建了几个虚拟页面，然后在顶部编辑栏上添加了新页面的新链接。

这是我的问题。我给这些链接静态 URL。反正有没有使这些链接动态？（即，如果我使用 Sharepoint 站点作为外部网站，我不会重新破解所有这些 URL 以匹配该站点映射到的任何域名）。

我认为这里有一些我没有掌握的概念，并且创建新网站集所附带的基本顶部链接交易可能必须以某种方式进行调整或替换，但我还不确定该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:10:28.297

例如：`http://domainname/sites/sitecollname/pages/default.aspx`是绝对 URL。您可以为链接提供相对 URL，它应该可以工作。在这种情况下，相对 URL 是`/sites/sitecollname/pages/default.aspx`

# flash - ActionScript 3：添加到舞台的影片剪辑不出现或不工作

> ID：14130859
> 
> 赞同：1
> 
> 时间：2013-01-02T23:25:21.240
> 
> 标签：flash, actionscript, movieclip, stage, cs4

我正在使用 ActionScript 3 在 Adob​​e Flash CS4 中制作一个简单的游戏。我最近实现了一个新的、非常小的预加载器来替换我正在使用的占位符。然而，一旦我这样做了，我似乎打破了一切。

第一帧只有一个`stop();`“动作”，然后是一个 DocumentClass 外部类文件（我所有的类都是外部的），它设置了预加载器，它在它自己的类文件中。一旦预加载器完成，它会触发一个事件到 DocumentClass，它运行一个`gotoAndStop(3);`. 第三张幻灯片是一个名为**Main**的影片剪辑，它有自己的类文件。

**Main**导入一堆东西，然后加载游戏的开始屏幕。在这一点上，一切基本上都崩溃了。任何修改此打开屏幕上的内容（同时具有类文件和 MovieClip 对象）的尝试都会导致“TypeError：错误 #1009：无法访问空对象引用的属性或方法”。我认为这段代码可能在 MovieClip 上台之前就已经运行了，所以我将`addEventListener( Event.ADDED_TO_STAGE, onAddtoStage );`代码添加并移动到了一个`onAddtoStage`函数中；在执行`trace("this is the stage: "+stage);`并将`trace("this is my parent: "+this.parent);`返回正确的非空值时，我仍然无法修改任何内容（例如，通过设置使我想隐藏的 MovieClip 对象`invisibleBG.alpha = 0;`仍然返回错误 #1009）。

此外，虽然**Main** MovieClip 在舞台上可见，但打开屏幕 MovieClip 不显示。我不确定它是否在 Main 对象的后面**，***但*它似乎根本不在舞台上。

 **下面是我的一些代码。如果这不能显示问题所在，我可以添加更多。我一直在为此挠头；当然，我花了两天时间才弄清楚我无法修改 a`TextField`因为它被拉伸了两帧，所以可能有一个非常简单的解决方案。在此先感谢您的帮助！

这是处理初始加载的大部分类：

```
public class DocumentClass extends MovieClip  
{
    public var loadingScreen:LoadingScreen;

    public function DocumentClass()
    {
        loadingScreen = new LoadingScreen();
        addChild( loadingScreen );

        stage.stageFocusRect = false;

        loadingScreen.addEventListener( Event.COMPLETE, onPreloaderComplete );
        loadingScreen.setLoaderInfo( loaderInfo );
    }

    public function onPreloaderComplete( e:Event ):void
    {
        loadingScreen.removeEventListener( Event.COMPLETE, onPreloaderComplete );
        removeChild( loadingScreen );
        loadingScreen = null;

        gotoAndStop( 3 );
    }
} 
```

**这是Main**类的相关部分：

```
public class Main extends MovieClip
{
    public function Main()
    {
        showDesktop();
    }
    public function showDesktop():void
    {
        desktopScreen = new DesktopScreen();
        addChild( desktopScreen );

        stage.focus = desktopScreen;
    }
} 
```

**以及DesktopScreen**的相关部分，游戏的开始画面：

```
public class DesktopScreen extends MovieClip
{
    public function DesktopScreen()
    {
        addEventListener( Event.ADDED_TO_STAGE, onAddtoStage );
    }

    public function onAddtoStage( e:Event ):void
    {
        Mouse.show();

        invisibleBG.alpha = 0;
        fakeButton.stop();

        time = new Time;
        time.x = 504;
        time.y = 3;
        addChild( time );
    }
} 
```

**TL;DR**我正在向舞台添加一个 MovieClip，即使我可以通过`trace`函数判断它认为它在舞台上，但我看不到它或以需要它实际的方式修改它的任何内容在舞台上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:17:52.760

好的，我今天设法解决了这个问题。这就是发生的事情。

当我实现我的新预加载器时，我尝试使用[此处](http://active.tutsplus.com/tutorials/workflow/the-comprehensive-guide-to-preloading-a-single-swf-file/)详述的三帧方法。顺便说一句，如果您正在寻找一个，那是关于预加载器的一个很好的通用教程。

但是，我在教程后面尝试使用四帧方法，但我错过了一个关键事实：Flash 无法访问资源，直到它到达它们所在的帧。因此，第 1 帧只有我的预加载器（和非常小的 DocumentClass），第 2 帧是我的类帧，第 3 帧有 Main 对象及其相关代码，第 4 帧有我的 AssetHolder 对象和我的所有库对象。

结果是，当我运行时`gotoAndStop(3);`，Main 类和对象都可用，称为 DesktopScreen 类和对象。但是只有 DesktopScreen*类*可用（就像在第 2 帧中一样），而*对象*不可用（直到第 4 帧才可用）。结果是代码运行了，但由于舞台上实际上没有任何东西（即使 Flash 告诉我它是），它引发了一堆错误。

[当我在这里查看](http://gamedev.michaeljameswilliams.com/2009/02/24/avoider-game-tutorial-8/)Michael James Williams 的内容丰富的教程时，我终于明白了这一点。如果您想开始使用 Flash，这是另一个值得回顾的好教程！

所以，这很容易解决；停止对我的资产使用（不必要的）第 4 帧，并将它们移动到第 2 帧。第 1 帧仍然`stop();`在操作面板中，因此游戏在开始加载后立即停止，查看 DocumentClass，开始预加载，然后继续加载到第 3 帧（在所有资产和类都可用之后）。

我希望这可以帮助任何有类似的、令人难以置信的模糊问题的人。如果您有任何问题随时问！**

# c# - Visual Studio 智能感知显示我的属性的自定义选项

> ID：14130861
> 
> 赞同：2
> 
> 时间：2013-01-02T23:25:54.513
> 
> 标签：c#, wpf

我不知道正确的谷歌词是什么，所以我很抱歉这个愚蠢的问题。

当我在编码时在 VS 中使用智能感知时，如果我输入类似“WindowStartupLocation =”之类的内容，我会得到一个可供选择的选项列表；例如“WindowStartupLocation.CenterScreen”。我可以选择此选项，而不是手动输入。

我有一个包含我的属性的类，其中一个属性必须包含一组选项中的一个，所以我想我希望在 VS 中呈现给我的各种选项。

我该如何设置我的财产？

非常感谢

```
internal class DatabaseLocks
    {
        public string Table { get; set; }
        public int Record { get; set; }
        public int User { get; set; }
        public DateTime Timestamp { get; private set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:29:13.300

你正在寻找的是一个枚举。

例如

```
public enum MyColors
{
     Red,
     Blue,
     Green,
     White,
     Blue
 } 
```

当你使用这个枚举时，你会得到你正在寻找的智能感知下拉菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:29:14.790

您正在寻找[枚举](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.100%29.aspx)

```
enum MyKinds 
{
   Normal,
   Good,
   Bad,
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T00:18:40.950

您应该使用`enum`将提供智能感知的类型。`///<summary>`您可以通过在类型和单个成员上放置 xml 注释 () 来获得额外的智能感知上下文。

例如，如果您想表示一组状态，您可以像这样创建一个枚举。摘要将作为智能感知信息的一部分出现。 ![在此处输入图像描述](../Images/211bc7ae846e82a684c98ec86a24d410.png)

```
/// <summary>Indicates processing status</summary>
public enum ItemStatus
{
    /// <summary>Indicates item was not processed</summary>
    NotProcessed = 0,

    /// <summary>Item was rejected</summary>
    Rejected

    // etc.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T00:08:29.240

知道了。

```
private int myVar;

    public AfTables Table
    {
        get { return (AfTables)myVar; }
        set { myVar = (int) value; }
    }

    public enum AfTables
    {
        Users,
        PermissionGroups
    } 
```

# node.js - 获取有关数据库更改的通知：是否可以在 riak 中查看条目？

> ID：14130868
> 
> 赞同：5
> 
> 时间：2013-01-02T23:26:11.377
> 
> 标签：node.js, riak

我正在寻找一种有效的方法来从节点订阅 riak 中的事件。我希望能够收到有关 riak 条目更改的通知。

例如，当一个 node.js 服务器更新一个条目时，另一个使用并监视该条目的服务器会自动接收更新的条目或有关其更新的通知。

如果这是不可能的，是否有一个可以跨 node.js 服务器有效使用的高效消息传递系统？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T02:48:41.633

Riak 实现了所谓的[Pre 和 Post 提交钩子](http://docs.basho.com/riak/1.2.1/references/appendices/concepts/Commit-Hooks/#Post-Commit-Hooks)。Post-commits，将在写入成功发生时触发（并且可能是您想要的）只能用 Erlang 代码编写，并且需要将 Riak 配置为触发您的自定义 Erlang 函数，作为适当存储桶上的属性。

根据您的需求和应用程序的规模，您的 Erlang 设置可以有多个选项来通知您的 Node.js 服务器。编写一个将 HTTP 请求发送到您的 Node.js 服务器的 Erlang 函数相对容易，但这会带来相当多的开销，这很可能不适合您的应用程序。[使用Redis](http://redis.io/topics/pubsub)或[ZeroMQ](http://www.zeromq.org)（仅举几例）提供的发布/订阅系统会更好，但稍微复杂一些，这些系统经过实战测试并证明在重负载下表现良好。如果您想使用 ZeroMQ，请参阅[本指南](http://zguide.zeromq.org/page%3aall#toc114)，了解如何实现非常可靠的发布/订阅。

这两种消息传递工具以及许多其他工具都可以通知您的 Node.js 实例对来自 Riak 或有效修改数据的 Node.js 实例的监视条目的更新。第二个选项（Node.js 到 Node.js）可能更简单，因为如果您不熟悉 Erlang，它不需要您学习它。这两个工具都有经过良好测试的 node.js 库：

*   [Zeromq.node](https://github.com/JustinTulloss/zeromq.node)
*   [redis节点](https://github.com/mranney/node_redis)

如果您要使用它们作为提交后挂钩从 Riak 中发送通知，以下是相应的 erlang 驱动程序：

*   [erlzmq2](https://github.com/zeromq/erlzmq2)
*   [埃雷迪斯](https://github.com/wooga/eredis)

# linux - 无法编译 GCC，但没有给出具体错误

> ID：14130874
> 
> 赞同：0
> 
> 时间：2013-01-02T23:26:50.177
> 
> 标签：linux, gcc, compiler-errors

我正在尝试使用 gcc 4.7.2 在 Mint Linux 上编译 gcc 4.7.1 并获得以下输出：

```
[snip]
ar rc .libs/libgmp.a assert.o compat.o errno.o [snip]
rm -fr .libs/libgmp.lax
creating libgmp.la
(cd .libs && rm -f libgmp.la && ln -s ../libgmp.la libgmp.la)
make[5]: Leaving directory `/home/justin/projects/os/linux/src/gcc-4.7.0/build/gmp'
make[4]: Leaving directory `/home/justin/projects/os/linux/src/gcc-4.7.0/build/gmp'
make[3]: Leaving directory `/home/justin/projects/os/linux/src/gcc-4.7.0/build/gmp'
make[2]: Leaving directory `/home/justin/projects/os/linux/src/gcc-4.7.0/build'
make[1]: *** [stage1-bubble] Error 2
make[1]: Leaving directory `/home/justin/projects/os/linux/src/gcc-4.7.0/build'
make: *** [all] Error 2 
```

我什至不知道从哪里开始寻找，因为我没有收到描述性错误！看起来它编译 GMP 成功，然后失败，无法完成下一步应该是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T11:51:31.757

这个问题在上面的评论中得到了回答。总结一下：错误是由于不正确的全局*（可能是环境）*变量，在回滚的更早的时候；那是因为 OP 正在使用 -j 标志，并且其他当前活动的分支确实继续构建。

# algorithm - SICP 2.16 区间算术（方案）

> ID：14130878
> 
> 赞同：9
> 
> 时间：2013-01-02T23:27:04.860
> 
> 标签：algorithm, scheme, sicp

这不是一个家庭作业问题，我只是对我对区间算术的理解和练习 2.16 的含义不满意。

2.14 节定义的区间算术不具备普通算术的特性。两个应该是等价的操作，(r1*r2)/(r1 + r2) 和 1/(1/r1 + 1/r2)，给出不同的结果。练习询问为什么会出现这种情况，以及是否有可能构建一个不是这种情况的区间算术系统。

该部分正在解决电气元件电阻误差范围的计算。我不确定我是否理解在这些术语中乘以和除以间隔的含义。将两个间隔相乘有什么用？

在这个例子中是否可以构造一个没有问题的区间算术系统？

[http://mitpress.mit.edu/sicp/full-text/book/book-ZH-14.html#%_sec_2.1.4](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-14.html#%_sec_2.1.4)

```
(define (make-interval a b)
  (cons a b))

(define (make-center-width c w)
  (make-interval (- c w) (+ c w)))

(define (make-center-percent c p)
  (make-center-width c (* c (/ p 100.0))))

(define (lower-bound i)
  (car i))

(define (upper-bound i)
  (cdr i))

(define (center i)
  (/ (+ (upper-bound i) (lower-bound i)) 2))

(define (width i)
  (/ (- (upper-bound i) (lower-bound i)) 2))

(define (percent i)
  (* 100.0 (/ (width i) (center i))))

(define (add-interval x y)
  (make-interval (+ (lower-bound x) (lower-bound y))
                 (+ (upper-bound x) (upper-bound y))))

(define (sub-interval x y)
  (make-interval (- (lower-bound x) (lower-bound y))
                 (- (upper-bound x) (upper-bound y))))

(define (mul-interval x y)
  (let ((p1 (* (lower-bound x) (lower-bound y)))
        (p2 (* (lower-bound x) (lower-bound y)))
        (p3 (* (lower-bound x) (lower-bound y)))
        (p4 (* (lower-bound x) (lower-bound y))))
    (make-interval (min p1 p2 p3 p4)
                   (max p1 p2 p3 p4))))

(define (div-interval x y)
  (if (= (width y ) 0) 
      (error "division by interval with width 0")
      (mul-interval x
                    (make-interval (/ 1.0 (upper-bound y))
                                   (/ 1.0 (lower-bound y))))))

(define (parl1 r1 r2)
  (div-interval (mul-interval r1 r2)
                (add-interval r1 r2)))

(define (parl2 r1 r2)
  (let ((one (make-interval 1 1)))
              (div-interval one
                           (add-interval (div-interval one r1)
                                         (div-interval one r2))))

(define (r1 (make-interval 4.0 3.2)))
(define (r2 (make-interval 3.0 7.2)))

(center (parl1 r1 r2))
(width (parl1 r1 r2))
(newline)
(center (parl2 r1 r2))
(width (parl2 r1 r2)) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T00:03:49.763

发生这种情况是因为区间算术中的操作没有[字段](http://en.wikipedia.org/wiki/Field_%28mathematics%29?%7B%7B%7Bqs%7D%7D%7D)的算术结构。

正如 Sussman 所说，这个练习很困难——你需要检查字段结构的每一个操作，看看哪个不满足。

练习要求我们证明[区间算术](https://en.wikipedia.org/wiki/Interval_arithmetic)不是函数范围的算术。

在域 [-1, 1] 上定义的 f (x) = x^2 等函数的范围为 [0,1]，包含在 [-1,1] * [-1,1] = [- 1,1]，通过将符号替换为符号`x`的域而获得`x`。

如果我们定义一个类似的函数，它对每个维度使用不同的变量，比如 f(x,y) = x * y，那么这个函数的范围，当定义在域 [-1,1] * [-1 ,1]，与区间 [-1,1] * [-1,1] = [-1, 1] 相同，因为 x 只使用一次，y 也是如此。

碰巧的是，当函数 f(.., x, ..) 在每个变量中是连续的时，`x`如果每个符号在 f 的定义中只使用一次，则范围算术与区间算术相同。

在 Alice 的第一个公式中，并联电阻的计算重复变量 R1 的 2 倍，变量 R2 的 2 倍，并且使用相同的参数，该函数的范围包含在从公式获得的相应区间的乘积中函数，通过将每个名称替换为相应的域间隔，但并不严格相同。

我们被要求重写任何函数，使得重写函数的范围与通过应用重写函数的公式获得的区间相同，名称替换为与重写函数中相应名称的域相等的区间，或者表明这对于每个可能的功能是不可能的。

这个问题叫做[*依赖问题*](https://en.wikipedia.org/wiki/Interval_arithmetic#Dependency_problem)，是一个很大的问题，对它的理解超出了SICP的目的，需要多变量的微分方程来解决。

正如 Sussman 自己所说，这个练习的目的是为了表明数据可以以多种方式编码。重点不是数学，而是数据抽象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-05T03:33:11.110

理解问题的最简单方法是查看非常简单的表达式`e = x/x`where `x`is in `[2,3]`。如果我们使用区间算术，我们会得到`e`，`[2/3, 3/2]`但是二年级算术表明`e=x/x=1`。那么给了什么？

嗯，它实际上很简单：使用区间算术时，我犯了一个错误，即假设***`x`可以同时有两个不同的值***。当分子为 3 且分母为 2 时给出最大值`e`，但是由于两者应该始终相同，所以这是不可能的。

那么，有没有可能使用区间算术？是的，当所有区间只出现一次时，从那时起，在不同的区间计算中，同一变量的不同值就不会出现问题。

是否可以创建一个没有这个问题的算术包？不，因为不是每个函数都可以写成每个变量只出现一次的地方。这个问题被称为[依赖问题](https://en.wikipedia.org/wiki/Interval_arithmetic#Dependency_problem)。

# visual-studio-2008 - VS2008无法打开C++项目

> ID：14130879
> 
> 赞同：0
> 
> 时间：2013-01-02T23:27:08.900
> 
> 标签：visual-studio-2008, project-management, ogre

我已经安装了 VS2010 和 VS2012，而且我一直使用 C#。我开始使用 OGRE3D 进行 3D 开发，并尝试使用它设置 Newton Game Dynamics，但看起来所有的教程和设置说明都非常非常旧，我只找到了在 VS2008 中编译和构建它的说明。

所以我从这里下载了一个名为 vcsetup.exe 的文件：http: [//www.microsoft.com/en-us/download/details.aspx?id=](http://www.microsoft.com/en-us/download/details.aspx?id=6506) 6506我安装得很好。设置说“Visual C++ Studio 2008 express”所以我认为这是正确的。

但是，当我尝试打开解决方案和相关的 .vcproj 文件（Visual C++ 项目文件）时，会弹出一个错误提示“无法使用此版本的 Visual Studio 打开此项目文件”。

我试图创建一个空白的 C++ 项目，但没有任何模板。

我也尝试用 VS2010 和 VS2012 编译这个牛顿引擎，但是当我进行转换并尝试编译它时，或多或少出现以下 6 个错误，还有一些其他的说`couldn't find Newton.h`

> 错误错误 MSB3073：命令 "xcopy "Win32/dContainers/Debug\dContainers.lib" "../Win32/Debug/ *。*" /F /Y /R :VCEnd" 以代码 4 退出。C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets 134

所以我不知道该怎么办。VS2008 还支持吗？可能这就是它不允许我在上面打开项目的原因。

这是我一直在遵循的使用 OgreNewt 和 Newton 创建项目的教程：[http ://www.ogre3d.org/tikiwiki/tiki-index.php?page=OgreNewt](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=OgreNewt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:38:01.207

根据您链接的网站：

> 最后，您可以在此处下载整个项目的副本，包括所有媒体和 MSVC++ (7.1) 项目文件。

VC++ 7.1*其实*就是VS 2003。这里的麻烦是，将VS 2003项目转换成VS 2008项目是非常困难的。

我的建议是手动将文件逐行手动转换为 VS 2008，或者如果可用，您可以下载 VS 2005。VS 2005 可能与这个项目更兼容，但如果一切都失败了，你将不得不在某个地方找到 VC++ 7.1（又名 VS 2003）并使用它。

请注意，Ogre3D*与*最新的 VS 兼容（据我所知），但您将无法遵循特定的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:30:14.123

Ogre 在 VS2008、VS2012 和 VS2012 上运行良好。并且使用 VS2012 构建 OgreNewt 也[可以，](http://www.ogre3d.org/addonforums/viewtopic.php?p=100644#p100644)并且应该使用任何其他版本。

我们还为每个 VS 版本（甚至是 VS2003）提供了[专门的 wiki 文章](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Setting+Up+An+Application+-+Visual+Studio)，您可能想查看。然而，无法找到 Newton.h 的问题是一个简单的问题，您可能没有告诉 VS 在哪里可以找到它。

有关如何纠正该问题，请参阅此[SO 线程。](https://stackoverflow.com/questions/4702302/how-to-include-header-files-in-visual-studio-2008)

# windows-phone-7 - Windows Phone - 用户控件中的 OnNavigatedTo 和 OnNavigatedFrom

> ID：14130881
> 
> 赞同：3
> 
> 时间：2013-01-02T23:27:15.727
> 
> 标签：windows-phone-7, events

如何让 OnNavigatedTo 和 OnNavigatedFrom 事件在 Windows Phone 用户控件中触发？我的 UserControl 位于绑定的 ListBox 内，因此它们的数量不同，所以我认为我需要在页面中引发一个事件并让 UserControls 进入并处理这些事件，但我不知道该怎么做.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:50:21.960

`OnNavigatedTo`并且`OnNavigatedFrom`是导航服务在导航页面时引发的方法，这些方法是`Page`类的一部分。

对于您的问题，您可以做的是让您的用户控件从`Page`类派生，然后设置`Navigation`上下文和`Navigation`服务。

# c# - 对 SQLite 的调用在 C#/MonoDevelop 中工作，但当程序从命令行运行时崩溃

> ID：14130882
> 
> 赞同：0
> 
> 时间：2013-01-02T23:27:18.743
> 
> 标签：c#, sqlite, mono, monodevelop

在 Windows 7 上使用 SQLite 4.0 在 MonoDevelop 3.0.5 和 Mono 2.10.9 上进行开发。为我的活动运行时设置了使用 C# 和 Mono。目标框架是 Mono/.NET 4.0。

我的模式脚本可以很好地加载到 SQLite 中，我可以从命令行的 sqlite3.exe/sqlite3.dll 访问它，没有任何问题。当我在 MonoDevelop IDE 中执行代码时，我可以连接到数据库并执行 select/update/insert 并从我的 C# 代码中调用 count 和 last_insert_row_id 等函数（运行和调试都可以正常工作）。

当我尝试从命令行执行代码并调用 myprogram.exe 时，程序在第一次数据库调用时崩溃。异常的重要数据似乎是：

System.IO.FileNotFoundException：无法加载文件或程序集“Mono.Data.Sqlite，版本=4.0.0.0，文化=中性，PublicKeyToken=0738eb9f132ed756”或其依赖项之一。该系统找不到指定的文件。文件名：'Mono.Data.Sqlite，版本=4.0.0.0，文化=中性，PublicKeyToken=0738eb9f132ed756'

数据库和 sqlite3.dll 与 myprogram.exe 位于同一目录中。这似乎是一个系统配置问题，这不是我的强项。希望对于我未能在我的开发机器上配置的人来说是显而易见的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:06:06.600

如果您运行的是 Windows 7 x64，请注意位数。

在 MonoDevelop（32 位）中运行时，您的应用程序（编译为 Any CPU）将作为 32 位进程启动。所以当你说它运行良好时，这意味着在 32 位模式下它运行良好。

在命令提示符下（cmd.exe，默认为 64 位），您的应用程序将自动在 64 位模式下运行。如果在这种情况下失败，则意味着您将不得不使用 64 位 SQLite 东西（64 位 sqlite3.dll 和 64 位 ADO.NET 提供程序程序集）。这应该在 SQLite 网站或 ADO.NET 提供程序程序集文档的其他地方明确说明。

# php - PHP“记住我”安全漏洞？

> ID：14130888
> 
> 赞同：12
> 
> 时间：2013-01-02T23:28:11.093
> 
> 标签：php, security, login, remember-me

我正在编写一个“记住我”的登录表单，到目前为止，我读过的教程（部分是为了确保我做对了）都说将加密的密码存储在一个 cookie 中与用户名。然后，每次 PHP 检查当前用户是否未登录时，检查他们的 cookie 并查找这些值。如果用户名与密码匹配，您就进入了。

对我来说，这是一个巨大的安全漏洞。如果有人要破解数据库或以某种方式访问​​加密密码，他们甚至不需要破解它们。只需设置您自己的 cookie 即可。我是正确的，还是只是偏执？

我的登录系统使用会话来跟踪当前用户 ID，并使用 1/0 进行快速登录/注销检查。用户无法编辑会话 AFAIK，因此这是安全的（如果不是，请告诉我）。我正在考虑将会话 ID 存储在 cookie 中，以便稍后恢复它，但这也不安全。

我非常关心用户的安全，我怎样才能在保持网站正常运行的同时正确保护他们的信息？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T23:37:14.280

通常当服务器被请求*记住用户时，它会在**正常*会话 cookie之外发出一个额外的cookie，这个新字符串包含用户名和合理数量的随机字符，使其无法猜测。这显然保存在数据库中（出于安全原因，您可能希望将其视为密码，因此对其进行加盐和哈希处理），并且下次用户使用同一浏览器连接时（假设旧会话已过期），应用程序会收到随机字符串，检查数据库，如果匹配，则用户通过身份验证。

另一种方法是将会话到期时间提前一些时间。

这里有哪些安全漏洞？如果您使用一个好的随机生成器，唯一可能发生的事情是用户从共享浏览器访问应用程序，并且在结束时没有手动注销。

由于您处于不安全的通道上，因此*通常*的规则始终适用：使用 HTTPS，否则位于您的计算机和服务器之间的任何人都可以窃取 cookie（会话之一或*记住我*的）并像您一样行事。

[奖金，杰夫阿特伍德必读](https://stackoverflow.com/a/477578/315306)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T00:17:34.660

切勿在客户端以任何方式保存密码（可用于登录的加密密码仍然是密码）。

使用随机生成的密钥，安全地存储在服务器上。这些密钥可以在以后撤销，这与加密密码不同，加密密码在更改之前一直有效。

使用 php 你可以像这样生成随机密钥`md5(uniqid(mt_rand(), true))`。为了更好的安全存储，它在数据库中加盐和散列。

示例表：

```
login_keys (
  user_id int,
  key char(40), # sha1
  salt char(15)
) 
```

另请注意，您应该启用*仅 HTTP cookie*选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:40:53.257

如果您希望它安全，请不要让您的用户保持登录状态。

设置会话时，一定要把ipaddress绑定到会话ID上，这样以后如果有人接了会话，只能从同一个IP地址进行。你可以通过使用（散列）会话 ID + 散列 IP 地址来保存数据库来做到这一点。我使用 phps 函数[http://php.net/manual/en/class.sessionhandler.php](http://php.net/manual/en/class.sessionhandler.php)来设置会话处理程序并将会话与 ipaddresses 匹配。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-02T23:37:07.270

我在自己的网站上工作时遇到了同样的问题，我发现解决它的最佳方法是根本不记住密码，只记住用户名，提供更快的登录，但不会降低安全性。事实是，没有可靠的方法来保证密码的绝对安全。除了使用新浏览器外，用户还可以让他们的浏览器记住它。

但是，如果您必须保存密码，请尝试以下操作：

拥有多个 cookie，其中 2 个是最简单的，一个用于加密密码，另一个用于保存加密密钥。数据库中的密码将包含一个进一步加密的密码，通过使用您存储的加密密钥获得。当您准备好检查密码时，提取值并加密密码。

希望这会有所帮助。祝你好运！

编辑：我可能误解了这一点，如果用户仍然登录，最好存储会话变量。

# java - 为什么 jdb 不能识别“整数” 类？

> ID：14130892
> 
> 赞同：2
> 
> 时间：2013-01-02T23:28:55.937
> 
> 标签：java, jdb

我这样连接：

```
$ jdb -connect com.sun.jdi.SocketAttach:hostname=x.x.x.x,port=8008 
```

在 jdb 提示符下，我这样做：

```
> stop in com.me.some.Gizmo.function 
```

然后它会正确中断，但是当我这样做时：

```
> print Integer.parseInt("4") 
```

它输出这个：

```
com.sun.tools.example.debug.expr.ParseException: Name unknown: java.lang.Integer 
```

为什么jdb不能识别“整数”​​类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T21:27:03.380

尽管 java 允许在`java.lang`没有完全限定名称的情况下引用包中的类，但 JDB 不允许。

```
> print java.lang.Integer.parseInt("4") 
```

应该管用。

# jquery-mobile - JQM 弹出窗口 - fieldcontain 在弹出窗口中不起作用

> ID：14130893
> 
> 赞同：3
> 
> 时间：2013-01-02T23:29:00.400
> 
> 标签：jquery-mobile, popup

我正在使用 Jquery 移动弹出窗口并希望在弹出窗口中显示一个表单。我想在同一行显示文本标签和文本框。所以，我使用 div 和 fieldcontain 。它在弹出窗口之外有效，但在内部无效。

```
<a href="#popupBasic" data-rel="popup">Open Popup</a>
<div data-role="popup" id="popupBasic">
    <div data-role="fieldcontain">
        <label for="input"> Fieldname </label>
        <input type="text" id="input" value="" />
    </div>
</div>

<div data-role="fieldcontain">
    <label for="input"> Fieldname   </label>                                                
    <input type="text" id="input" value="" />
</div> 
```

看到这个jsfiddle：http: [//jsfiddle.net/B3pyG/](http://jsfiddle.net/B3pyG/)

我想知道这是否是弹出窗口的限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-06T05:49:44.197

虽然问题是 3 年前的问题，但只是一个建议，也许您可​​以在弹出窗口中使用表格？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:49:50.923

看起来字段容器受到用于弹出窗口的样式的阻碍。我尝试了他们的表单示例：http: [//jsfiddle.net/Twisty/BrsR2/](http://jsfiddle.net/Twisty/BrsR2/)

**HTML**

```
<div data-role="page">
    <div data-role="header">
        <h1>Test PopUp</h1>
    </div>
    <div data-role="content">
        <a href="#popupBasic" data-rel="popup">Open Popup</a>
        <div data-role="popup" id="popupBasic">
            <form>
                <div style="padding:10px 20px; width: 440px">
                    <h3>Please sign in</h3>
                    <div data-role="fieldcontain">
                        <label for="un">Username:</label>
                        <input placeholder="username" id="un" value="" name="user">
                        <label for="pw">Password:</label>
    <input id="pw" type="password" placeholder="password" value="" name="pass">
                    </div>
                    <div data-shadow="true" data-iconshadow="true" data-icon="" data-iconpos="" data-theme="b" aria-disabled="false">
                    </div>
                </div>
            </form>
        </div>
        <div data-role="fieldcontain">
             <label for="input"> Fieldname </label>
             <input type="text" id="input" value="" />
        </div>
    </div>
</div> 
```

Popup 包装器似乎将所有内容都拉入并尽可能多地包装。他们在文档中谈论它：

> 弹出窗口由两个元素组成：屏幕，它是覆盖整个文档的透明或半透明元素，以及容器，它是弹出窗口本身。如果你的原始元素有一个 id 属性，那么屏幕和容器都会收到一个基于它的 id 属性。屏幕的 id 后缀为“-screen”，容器的 id 后缀为“-popup”（上例中分别为 id="popupBasic-screen" 和 id="popupBasic-popup"）。
> 
> 该框架为文本元素添加了少量边距，但它实际上只是一个带有圆角和阴影的容器，可作为您设计的空白板（即使这些功能也可以通过[options](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/options.html)禁用）。

您可以通过为标签制作一个框并将输入向右浮动来解决此问题。就像是：

```
<span display="width: 100%; display: block;">
    <span style="display: inline-block; width: 100px;">Label: </span>
    <input type="text" name="test" style="width: 340px; float: right;">
</span> 
```

# php - 在php代码中插入DIV

> ID：14130894
> 
> 赞同：0
> 
> 时间：2013-01-02T23:29:02.360
> 
> 标签：php, html

我在 Joomla 中修改了我的开源购物车，但我无法为 2 条信息插入 DIV。

我的购物车在前端看起来像这样：

* * *

DIN INDKØBSKURV

**1 x SALE rund gul hvid**（数量 x 产品名称）

**Pris 10,00** （产品价格）

Ialt ex mom DKK:10,00（总价）

* * *

我需要添加 div

> "1 x SALE rund gul hvid" = div class="mod_cart_product_name" id="mod_cart_product_name"

和

> "Pris 10,00" = div class="mod_cart_productprice" id="mod_cart_productprice"

由于 ELSE 和 IF 代码，我不能自己做 :-)

我已经提取了这样的代码：

```
case 'extended':

    $output = '<div class="mod_cart_products" id="mod_cart_products">';
    if ($count)
    {
        $cartTotalProduct = $idx;

        for($i = 0; $i < $idx; $i ++)
        {
            $carthelper         = new rsCarthelper();
            if($carthelper->rs_multi_array_key_exists('giftcard_id',$cart [$i]) && $cart [$i] ['giftcard_id'])
            {
                $giftcardData = $producthelper->getGiftcardData($cart [$i] ['giftcard_id']);
                $name = $giftcardData->giftcard_name;
            }
            else
            {
                $product_detail = $producthelper->getProductById ( $cart [$i] ['product_id'] );
                $name = $product_detail->product_name;
            }
            $output .= $cart [$i] ['quantity'] . " x " . $name . "<br />";
            if (! DEFAULT_QUOTATION_MODE || (DEFAULT_QUOTATION_MODE && SHOW_QUOTATION_PRICE))
            {
                if ($show_with_vat)
                {
                    $output .= JText::_('COM_REDSHOP_PRICE' ) . " " . $producthelper->getProductFormattedPrice ( $cart [$i] ['product_price'], true ) . "<br />";
                }
                else
                {
                    $output .= JText::_('COM_REDSHOP_PRICE' ) . " " . $producthelper->getProductFormattedPrice ( $cart [$i] ['product_price_excl_vat'], true ) . "<br />";
                }
            }
        }
    }

    $output .='</div>'; 
```

# tfs - 如何将代码从 Dev 移动到 TFS 中的 QA 分支？

> ID：14130897
> 
> 赞同：0
> 
> 时间：2013-01-02T23:29:11.077
> 
> 标签：tfs, merge

**介绍：**

开发分支具有部署到开发环境和进行开发的代码，QA 分支是部署到 QA 环境的代码，因此 QA 可以进行测试。

**我的问题是：**

在我完成开发环境中的代码并将其签入到开发分支之后。将变更集（或我在 Dev 中更改的代码）从 Dev 分支移动到 QA 分支的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T00:13:29.070

您似乎对源代码控制以及分支和合并过程非常陌生。将一个变更集（或一系列变更集）从一个分支移动到另一个分支的过程称为合并。

我建议您查看MSDN 上的[Merge Folders and Files](http://msdn.microsoft.com/en-us/library/ms181428.aspx)，它解释了如何执行合并。

其他可能有助于您理解的优秀资源是 Wrox [ALM](http://www.amazon.co.uk/gp/product/1118314085/ref=ox_sc_sfl_title_2?ie=UTF8&smid=A3P5ROKL5A1OLE)和[TFS](http://www.amazon.co.uk/gp/product/1118314093/ref=ox_sc_sfl_title_1?ie=UTF8&smid=A3P5ROKL5A1OLE)书籍以及[ALM Rangers 分支和合并指南](http://vsarbranchingguide.codeplex.com/releases/view/96396)（按技术级别顺序递增）。

# asp.net-mvc-3 - 如何从 HttpContext.Request.Params 集合中删除参数？

> ID：14130901
> 
> 赞同：1
> 
> 时间：2013-01-02T23:29:17.717
> 
> 标签：asp.net-mvc-3, actionfilterattribute

如何从`HttpContext.Request.Params`集合中删除参数？

我将它作为“无法将标头添加到 iframe 请求”的形式添加到客户端，但现在我想将其从集合中删除，这样它就不会打扰其他嗅探管道的人。*我*不必删除它，但我愿意。

我正在编写一个 ActionFilterAttribute 并使用它`OnActionExecuting`来测试它是否存在，所以我想我会看看我是否可以删除它，因为不会污染管道而不是发送我的请求所必需的。

# html - 我无法对齐顶部或中间的文本区域标签

> ID：14130902
> 
> 赞同：0
> 
> 时间：2013-01-02T23:29:22.373
> 
> 标签：html, css

看看[这个](http://www.rsadler.com/hadiaris/home.html)，如果你点击顶部的输入之一，就会发生一些 jquery。现在您可以看到我的问题，即文本“消息：”应与其右侧的文本区域顶部对齐。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:34:04.143

这一点应用于 textarea 的 css 工作：

**CSS**

```
vertical-align: top; 
```

# javascript - 将颜色编码应用于特定的类成员或命名空间？

> ID：14130903
> 
> 赞同：1
> 
> 时间：2013-01-02T23:29:22.563
> 
> 标签：javascript, visual-studio-2010, namespaces, resharper, color-coding

**是否可以使用 VS 2010 + ReSharper（或任何其他 3rd 方插件/扩展）对特定**的类成员或命名空间应用颜色编码？

例如，假设我有以下代码，它使用硬编码的字符串文字创建了一个名为“Home”的面包屑项目：

```
var bcHome = new um.classes.Breadcrumb(um.nav.nodeIds.home,
            um.nav.nodeIds.root,
            "Home",
            um.bc.events.home); 
```

在我的编辑器中，我将字符串着色为*洋红色*，因此很容易看到。

现在我决定为字符串创建一个**“um.tokens”**命名空间。我有这样的事情：

```
um.tokens = {
    "BREADCRUMB_HOME": "Home"
}; 
```

最后，我将原始代码块更新如下：

```
var bcHome = new um.classes.Breadcrumb(um.nav.nodeIds.home,
            um.nav.nodeIds.root,
            um.tokens.BREADCRUMB_HOME,
            um.bc.events.home); 
```

我希望 IDE在*magenta的***“um.tokens”**中显示任何成员。我怎样才能做到这一点？

 ***编辑**- 换句话说，我如何使**um.tokens.BREADCRUMB_HOME以与引用的字符串文字***"Home"*相同的样式出现？*

# json - 如何从 Jenkins 构建请求中获取 JSON 对象

> ID：14130904
> 
> 赞同：4
> 
> 时间：2013-01-02T23:29:27.130
> 
> 标签：json, bash, build, jenkins

类似于如何`http://localhost/jenkins/job/job_name/25/api/json`返回具有`JSON`构建 26 详细信息的对象，有没有办法在第一次启动作业时获得类似的对象，即在您知道构建号是什么之前？

我注意到从`curl`发布请求到构建 url 返回的输出`html`包含构建号；但是，我宁愿不必解析这个，而是有一个`JSON`带有内部版本号的对象。目前，我正在使用：

```
curl -v --data "param1=value&param2=value" \
http://localhost/jenkins/job/job_name/buildWithParameters 
```

这可以很好地启动工作并输出一堆`html`. 有没有办法开始这项工作并接收`JSON`带有内部版本号的对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T08:42:42.730

nextBuildNumber 可能并非在所有情况下都是正确的内部版本号。如果您触发了同一个 Job 的两个不同构建，我们不知道哪个最先触发。这里有一个竞争条件。检查构建队列也可能不会给出正确的构建号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T23:41:46.857

如果您查询`http://localhost/jenkins/job/job_name/api/json`，您可以随时获取该`nextBuildNumber`字段，这将为您提供下一个内部版本号。

当您触发构建时，您可以放心，构建将获得这个数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T23:52:13.083

触发构建后，您可以从以下位置获取其 URL：

```
http://localhost/jenkins/job/job_name/api/json?tree=lastBuild[url] 
```

如果有，这将返回正在运行的构建，否则将返回最新完成的构建。然后，您可以将“/api/json”添加到该 URL 以获取构建的 JSON 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-07T14:25:01.883

在我的场景中，我需要一个 JSONP 数据类型才能通过。我所做的是从 Jenkins 那里获得我特定工作的原始对象，以便我可以根据需要对其进行操作。

要求：

```
$.ajax({
  url: "http://<jenkins server>/job/<job name>/api/json?jsonp=?",
  dataType: 'jsonp',
  success: success
}); 
```

成功调用：

```
var success = function(json) {

 console.log('Raw JSON object for this job:');
 console.log(json);    
} 
```

然后，获取您需要的信息，例如：

```
console.log(json.lastCompletedBuild.number);
console.log(json.lastBuild.url); 
```

# c++ - 类使用自身/深拷贝时的赋值/复制运算符重载

> ID：14130906
> 
> 赞同：0
> 
> 时间：2013-01-02T23:29:48.380
> 
> 标签：c++, pointers, overloading, deep-copy

我的问题是，我有一个作为自身对象的类。当我尝试编写作业或复制方法时，我会以一种“classception”结束

缩短课程：

```
class Node
{
public:
    Node(QString name, Node *parent = 0);
    ~Node(void);

    // copy
    Node(const Node &srcNode);
    // assignment
    Node& operator=(const Node &srcNode);

    private:

    QString name;
    QList<Node*> children;
    Node *parent;
}; 
```

和方法（只有一个，因为它几乎相同）

```
// Copy
Node::Node(const Node &srcNode)
{
    name = srcNode.name;

    for(int i = 0; i < srcNode.children.size(); i++)
    {
        children.replace(i, srcNode.children.at(i));
    }

    // how is it done?
    parent = srcNode.parent;
} 
```

我的问题出在方法的最后一行。如您所见，父对象也是 Node 类型的对象，所以我最终会陷入无限循环。

我如何正确地深度复制这个类？

希望有人能给我提示:)

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:36:31.877

这里没有无限循环，因为两个对象都是 type `Node*`，所以复制构造函数不会在该表达式中被调用。某种类型的指针之间的动作与那些实际类型的对象之间的动作完全分开。

# html - 如何将 html 代码和小部件集成到图片中

> ID：14130910
> 
> 赞同：-1
> 
> 时间：2013-01-02T23:30:29.910
> 
> 标签：html, widget, image

我想在图片中引入/插入 html 代码和小部件，例如 paypal 按钮和 time coundown 。以女巫的方式可以做到这一点吗？我感谢每一个答案。请给我一些提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:31:11.893

就像我说的。使用 z-index css 属性。取一个 div，将其设置为图像的精确大小，然后使用边距和 z-index，将计数器放在其顶部。

举个例子：

```
<div id="image">
   <div id="progress"> ... </div>
</div> 
```

每个的 css 将是：

```
#image{
   width: 400px;
   height: 500px;
   z-index: 0;
}

#progress {
   z-index:10;
   margin-bottom: 20px;
} 
```

宽度和高度属性应该是图像的大小。其余的取决于您要放置此代码的确切位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:18:01.537

给一些其他的线索伙伴。从您死记硬背的内容来看，我认为您只需一点 css 就可以实现这一目标。假设 css 的 z-index 5 上的图像，以及您想要放置在 z-index 6、7、10 上的内容，只要它大于图像的 z-index 就可以了。

然后，柜台，只需谷歌一点，你会发现很多关于 javascript 倒计时的教程。

# android - 使用短信管理器 Android 发送文本时将短信保存到收件箱

> ID：14130911
> 
> 赞同：-1
> 
> 时间：2013-01-02T23:30:31.237
> 
> 标签：android, sms, inbox

我有一些代码用于向用户通过按下按钮输入的号码发送短信。但是，当消息发送时，它不会显示在他们的消息收件箱中，因此他们不知道它是否准确发送。有什么办法可以更改下面的文本以将所有短信保存到用户收件箱？谢谢！

这是我的代码：

```
buttonSend.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

              String phoneNo = textPhoneNo.getText().toString();
              String sms = textSMS.getText().toString();
              try {               
                SmsManager smsManager = SmsManager.getDefault();
                smsManager.sendTextMessage(phoneNo, null, sms, null, null);
                Toast.makeText(getApplicationContext(), "Message Sent!", Toast.LENGTH_LONG).show();} 
                catch (Exception e) {
                Toast.makeText(getApplicationContext(),
                    "Unable to send message",
                    Toast.LENGTH_LONG).show();
                e.printStackTrace();
              }

            }
        }); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-26T06:51:07.360

将此方法添加到您的课程中

```
 private void addMessageToSent(String telNumber, String messageBody) {
    ContentValues sentSms = new ContentValues();
    sentSms.put("address", telNumber);
    sentSms.put("body", messageBody);

    ContentResolver contentResolver = getContentResolver();
    contentResolver.insert(Uri.parse("content://sms/sent"), sentSms);
} 
```

希望能帮助到你！

# ios - 这是键盘遮挡内容的有效解决方法吗

> ID：14130914
> 
> 赞同：1
> 
> 时间：2013-01-02T23:30:48.720
> 
> 标签：ios

我有一个 Tableview，用户可以在其中将值输入到 textField 作为自定义单元格之一

Apple 有一些关于如何通过将视图重新定位到键盘的垂直尺寸（[此处](https://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)）来调整视图内容的文档，但它依赖于将视图放入 UIScrollView。我不能用 tableview 做到这一点。

我可以重新设计应用程序，以便使用通常的导航控制器在单独的详细视图中完成输入，但如果可能的话，我宁愿用户不必执行额外的触摸（并被运送到另一个屏幕）。我喜欢“在我们所在的地方”做事的想法

所以我的解决方法是在底部有一些额外的 tableview 单元格包含 %20 左右，正常使用不应该注册奇怪，因为它们只关注可见的内容。我必须将空格存储在我的数据源数组中，然后按降序排序，但这没关系

问题是，这是好的做法吗？更有可能的是，反对苹果的HIG足以拒绝吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:45:32.627

UITableView is a subclass of UIScrollView, so should be able to adjust the content and scroll view insets just like in the example you linked.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T23:46:44.450

The way I've solved this issue is to subclass `UITableView`. Here's what I've done:

```
// AOTableView.h file

typedef enum
{
    AOKeyboardStateUnknown = 0,
    AOKeyboardStateShowing,
    AOKeyboardStateHidden
} AOKeyboardState;

#import <UIKit/UIKit.h>
#import "AOKeyboardState.h"

@interface AOTableView : UITableView
@property (nonatomic) BOOL observeKeyboardNotifications;
@property (nonatomic) AOKeyboardState keyboardState;
@end

// AOTableView.m file

#import "AOTableView.h"

@interface AOTableView(Private)
@property (nonatomic) CGRect frame0;
- (void)setup;
- (void)keyboardWillShow:(NSNotification *)notification;
- (void)keyboardWillHide:(NSNotification *)notification;
@end

@implementation AOTableView

#pragma mark - Object lifecycle

- (void)awakeFromNib
{       
    [self setup];
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

    if (self)
    {
        [self setup];
    }
    return self;
}

- (void)setup
{
    self.contentSize = self.frame.size;
    self.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

    _keyboardState = AOKeyboardStateUnknown;
    _frame0 = self.frame;
    _observeKeyboardNotifications = NO;
}

- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

#pragma mark - Custom setters

- (void)setObserveKeyboardNotifications:(BOOL)observeKeyboardNotifications
{
    if (_observeKeyboardNotifications == observeKeyboardNotifications)
        return;

    _observeKeyboardNotifications = observeKeyboardNotifications;

    if (_observeKeyboardNotifications)
    {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];
    }
    else
    {
         [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillShowNotification object:nil];
        [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil];
    }
}

#pragma mark - UIKeyboard Notifications

- (void)keyboardWillShow:(NSNotification *)notification
{
    if (self.keyboardState == AOKeyboardStateShowing)
        return;

    self.frame0 = self.frame;
    self.keyboardState = AOKeyboardStateShowing;

    NSDictionary* info = [notification userInfo];
    CGRect keyboardFrame = CGRectZero;
    [[info objectForKey:UIKeyboardFrameEndUserInfoKey] getValue:&keyboardFrame];

    CGRect frame = self.frame0;    
    frame.size.height = CGRectGetMinY(keyboardFrame) - CGRectGetMinY(frame);
    self.frame = frame;

    [self scrollToRowAtIndexPath:self.indexPathForSelectedRow atScrollPosition:UITableViewScrollPositionMiddle animated:YES];
    [self deselectRowAtIndexPath:self.indexPathForSelectedRow animated:NO];
}

- (void)keyboardWillHide:(NSNotification *)notification
{
    if (self.keyboardState == AOKeyboardStateHidden)
        return;

    self.keyboardState = AOKeyboardStateHidden;
    self.frame = self.frame0;
}
@end 
```

After creation (or loading the view from an IBOutlet), you call this method to tell the class to start listening for keyboard notifications:

```
[tableViewInstance setObserveKeyboardNotifications:YES]; 
```

Whenever a user clicks on a cell, it becomes the `self.indexPathForSelectedRow` cell... so its scrolled to by the `AOTableView` instance automatically.

For this to work, though, I've had to turn off `userInteraction` on the `UITextField` within the cell (otherwise, the device can get confused about if the user is clicking on the cell or on the text field). Instead, when a user selects a cell that has a text field, I tell the text field to the become first responder, like this:

```
[cell.textField becomeFirstResponder]; 
```

I hope this helps.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T00:16:20.277

你不需要额外的细胞或任何花哨的东西。

由于您的文本字段位于表格视图单元格内，因此您可以使用以下内容：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    UITableViewCell *cell = (UITableViewCell *)textField.superview.superview;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionMiddle animated:YES];
    return YES;
} 
```

这意味着每次文本字段成为第一响应者时，键盘都会适当地滚动。这利用了作为滚动视图子类的表格视图。

请注意，这假设：

*   您的（表）视图控制器是文本字段的代表。
*   您的文本字段是单元格内容视图的子视图，而不是单元格本身。
    *   如果文本字段是单元格的子视图，则上述方法的第一行应该只引用一个超级视图（即 textField.superview）。

# canvas - 填充复杂形状（画线）

> ID：14130920
> 
> 赞同：1
> 
> 时间：2013-01-02T23:31:04.173
> 
> 标签：canvas, html5-canvas

我们可以在这里看到的填充效果[http://hakim.se/experiments/html5/coil/](http://hakim.se/experiments/html5/coil/)是相当惊人的。我什至无法猜测这样的填充（在绘制时关闭形状，您会看到您正在创建闭合形状的填充）如何工作..

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T00:28:26.867

听起来您正在寻找整体高级流程。如果不对该站点使用的方法进行逆向工程，我可能会考虑这样做。

从鼠标当前位置的一个点开始。每隔一段时间，

1.  从鼠标的先前位置到鼠标的当前位置绘制一条线段。
2.  删除太旧的线段。
3.  如果新线段与任何现有线段相交*（谷歌“检测线段相交”或类似的）*，在它们相交的点分割它们*（搜索“算法在相交处分割线段”可能会让你到达那里）*。

    假设您从

    ```
       o----o
        \
         \ o
          \ /
           \ /
            ○

    ```

    并从右侧的点添加一个向左延伸的线段：

    ```
       o----o
        \
    o---------o
          \ /
           \ /
            ○

    ```

    请注意，新线段与现有线段相交。在交叉点拆分它们：

    ```
       o----o
        \
    o----o-----o
          \ /
           \ /
            ○

    ```

    *注意`o`表示线段的结束。我们已经从四个线段（其中两个相交）到六个线段，其中四个共享一个公共点。*

    这些步骤将为您提供连续的线段轨迹。现在让我们弄清楚它们是否形成多边形：

4.  端到端地遍历每个线段。识别在多个非相邻线段之间共享的线段的第一*端。*找到终点后，将所有线段绘制到该点：

    ```
       ●----●
        \
         ●

    ```

5.  从另一端开始，做同样的事情。

    ```
       o----o
        \
    ●----●

    ```

6.  所有剩余的线段都是多边形的一部分。现在，在画布上[绘制封闭的多边形。](https://stackoverflow.com/questions/4839993/how-to-draw-polygons-on-an-html5-canvas)

    ```
       o----o
        \
    o----●-----●
          \.../
           \./
            ●

    ```

7.  最后，是时候确定多边形中包含哪些圆了。借助上面实际形成多边形的线段列表，在网上搜索“算法点在多边形内”之类的搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:53:21.643

你基本上是在画一条折线（一条线，在 OpenGL 术语中）。存在三个关键问题：

*   如何测试您是否关闭了折线。
*   一旦确定存在闭合折线，如何获得闭合折线。
*   如何栅格化闭合的折线以获得填充的形状。

对于第一个问题，您可以（粗略地说，尽管在实践中会有点繁琐）存储您在绘制多段线时遇到的像素序列，然后在您正在绘制的当前位遇到您之前绘制的东西时停止. （在游戏中，线的旧位会在一段时间后过期 - 这可以通过存储像素的时间值并在它们的年龄大于某个阈值时移除它们来建模。）

对于第二个问题，您只需将像素序列的一部分保留在起点和终点交叉点之间。

如果你想稳健地完成第三个问题（有很多“令人愉快”的特殊情况），第三个问题会有些困难 - 搜索“多边形光栅化”并准备好阅读大量内容。我曾经写了一些代码来做到这一点，这是在这里，它的价值：

[https://github.com/sgolodetz/millipede/blob/master/trunk/source/common/graphics/PolylineRasterizer.cpp](https://github.com/sgolodetz/millipede/blob/master/trunk/source/common/graphics/PolylineRasterizer.cpp)

请注意，在实践中，所有这些都可能比我在这里描述的要复杂得多——但沿着这些思路大致就是你可能会如何去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T15:17:15.397

使用开始路径[http://www.html5canvastutorials.com/tutorials/html5-canvas-shape-fill/](http://www.html5canvastutorials.com/tutorials/html5-canvas-shape-fill/)

```
<!DOCTYPE HTML>
<html>
<head>
<style>
  body {
    margin: 0px;
    padding: 0px;
  }
</style>
</head>
<body>
<canvas id="myCanvas" width="578" height="200"></canvas>
<script>
  var canvas = document.getElementById('myCanvas');
  var context = canvas.getContext('2d');

  // begin custom shape
  context.beginPath();
  context.moveTo(170, 80);
  context.bezierCurveTo(130, 100, 130, 150, 230, 150);
  context.bezierCurveTo(250, 180, 320, 180, 340, 150);
  context.bezierCurveTo(420, 150, 420, 120, 390, 100);
  context.bezierCurveTo(430, 40, 370, 30, 340, 50);
  context.bezierCurveTo(320, 5, 250, 20, 250, 50);
  context.bezierCurveTo(200, 5, 150, 20, 170, 80);

  // complete custom shape
  context.closePath();
  context.lineWidth = 5;
  context.fillStyle = '#8ED6FF';
  context.fill();
  context.strokeStyle = 'blue';
  context.stroke();
</script>
</body>
</html> 
```

# java - Hibernate envers spring web app如何记录用户名

> ID：14130922
> 
> 赞同：3
> 
> 时间：2013-01-02T23:31:10.483
> 
> 标签：java, spring, hibernate, jboss, hibernate-envers

我正在使用 hiberbate 3.5 和 spring 3.x

我有工作，现在正在写入 ... _aud 和 revinfo 记录。

我现在需要将用户名添加到审计记录中我猜 revinfo 是我见过的最好的地方，我看到了 seam 应用程序的例子，但 jboss 中的 spring 应用程序没有

任何人都可以帮忙吗？

我的主要目标是能够记录经过 Windows 身份验证的用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:09:56.557

如果您使用 Seam ，Envers 文档[对此有一个答案](http://docs.jboss.org/envers/docs/index.html#revisionlog)。

```
public class ExampleListener implements RevisionListener {
    public void newRevision(Object revisionEntity) {
        ExampleRevEntity exampleRevEntity = (ExampleRevEntity) revisionEntity;
        Identity identity = (Identity) Component.getInstance("org.jboss.seam.security.identity");

        exampleRevEntity.setUsername(identity.getUsername());
    }
} 
```

所以，我想你的问题是*如果你不使用 Seam* ，那么如何检索当前登录的用户？我敢肯定有几种方法可以做到这一点，我们就是这样做的。

*   [编写一个 ServletFilter](http://www.jguru.com/article/server-side/writing-servlet-filters.html)
*   在过滤器中从会话中获取主体（或者如果您使用像 Spring Security 这样的安全框架，则获取安全上下文）
*   将其存储在[log4j MDC中](http://blog.oio.de/2010/11/09/logging-additional-information-like-sessionid-in-every-log4j-message/)

**过滤器中的代码示例**

```
protected void beforeRequest(final HttpServletRequest request, final String message) {
  final Principal principal = request.getUserPrincipal();
  final String username = principal != null ? principal.getName() : null;
  if (username != null) {
    MDC.put(USER, username);
  }
}
protected void afterRequest(final HttpServletRequest request, final String message) {
  MDC.remove(USER);
} 
```

稍后您可以从代码中的任何位置获取用户，因为 MDC 有一个静态`get(String)`方法。

# maven - 无法从引用的 pom 使用 ant buildfile 中的属性

> ID：14130925
> 
> 赞同：1
> 
> 时间：2013-01-02T23:31:31.943
> 
> 标签：maven, ant, maven-ant-tasks

（我希望我正确地表达了标题！）

我有一个 ant 构建文件，它引用了一个像这样的 maven pom：

```
 <artifact:dependencies filesetId="dependency.fileset" useScope="compile">
    <pom file="pom.xml"/>
 </artifact:dependencies>

 <copy todir="${jar.location}">
    <fileset refid="dependency.fileset" />
    <mapper type="flatten" />
 </copy> 
```

在 pom.xml 中，一些依赖项使用属性代替硬编码的版本号。但是复制任务似乎并没有解决该属性 - 它试图从字面上使用“jarname-{app.version}”。我尝试在构建文件中的某处设置“app.version”的值，但没有效果。我究竟做错了什么？？

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:59:34.960

如[maven site](http://maven.apache.org/ant-tasks/examples/pom.html)所述，您应该使用它`artifact:pom`来获取该信息：

```
<artifact:pom id="mypom" file="pom.xml" />

<artifact:dependencies filesetId="dependency.fileset" useScope="compile" pomRefId="mypom" /> 
```

如果您必须`profiles`处理：

```
<artifact:pom id="maven.project" file="pom.xml">
  <profile id="my-profile"/>
</artifact:pom> 
```

# ruby-on-rails-3 - 从 Rails 活动记录中获取旧属性值的哈希

> ID：14130926
> 
> 赞同：0
> 
> 时间：2013-01-02T23:31:36.630
> 
> 标签：ruby-on-rails-3, activerecord

我想一般地访问模型中已更改的旧属性 - 也就是说，我想获取旧属性值的散列。我的代码对所有已更改的属性感兴趣，每次运行时可能是不同的设置。

我知道你可以得到一组更改的属性名称

```
model.changed 
```

我知道你能做到

```
model.attribute_was 
```

如果您知道名称，则获取属性的旧值，但是我找不到以编程方式将两者结合或以其他方式获取旧值集的方法

我用它来创建关于对象的新闻故事，例如

> 用户 'Bob' 将 x 从 a 更改为 b

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:37:37.280

您可以使用属性哈希来生成此数组：

```
old = model.changed.map{|attr| model.send("#{attr}_was".to_sym) } 
```

# c# - 对象初始化器

> ID：14130927
> 
> 赞同：0
> 
> 时间：2013-01-02T23:31:44.610
> 
> 标签：c#, .net

两个代码片段都有效，但是，我想知道哪个更好（如果有的话）。有真正的区别吗？我所指的代码部分在 LINQ 中。任何见解将不胜感激。

```
select new Product {... 
```

第一个片段：

```
public static IEnumerable<Product> GetProducts(IEnumerable<Product> products)
{
    var query = from p in products
                select new Product
                {
                    Category = p.Category,
                    Id = p.Id,
                    CategoryId = p.CategoryId,
                    Name = p.Name
                };
    return query;
}

class Product
{
    public int Id { get; set; }
    public String Name { get; set; }
    public Category Category { get; set; }
    public int CategoryId { get; set; }
}

class Category
{
    public int Id { get; set; }
    public String CategoryName { get; set; }
} 
```

第二个片段：

```
 public static IEnumerable<Product> GetProducts(IEnumerable<Product> products)
    {
        var query = from p in products
                    select p;
        return query;
    }

class Product
{
    public int Id { get; set; }
    public String Name { get; set; }
    public Category Category { get; set; }
    public int CategoryId { get; set; }
}

class Category
{
    public int Id { get; set; }
    public String CategoryName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:33:28.247

第一个片段将返回一个查询，该查询将在枚举时创建枚举中每个对象的*副本*`products`，并遍历这些副本。（警告：如果输入对象的类型是派生自`Product`而不是实际上`Product`本身，那么您会将这些对象“切片”为 的实例`Product`。）

第二个片段将返回一个查询，该查询将在枚举时迭代原始序列中的对象，并且在语义上实际上与做没有什么不同`return products;`（假设它`products`不为空，即——两种变体在枚举时都会抛出异常if`products`为 null，但会抛出不同的异常类型）。

“tl;dr”版本是：**第一种方法按顺序复制对象，第二种方法不复制。**

当您需要制作序列的深层副本时使用第一个，以便修改结果序列中的对象不会修改原始序列中的对象。如果您确实希望修改影响原始序列，请使用第二种方法，*或者*您不会修改两个序列中的任何一个。

* * *

旁白：如果您确实需要复制，请考虑在`Product`类 ( `public virtual Product Clone()`) 上创建一个虚拟方法，以便 (a) 封装克隆逻辑，以及 (b) 如果您派生`Product`，您可以覆盖`Clone()`以返回正确类型的副本。

# c# - Task.Factory.StartNew 与 Parallel.Invoke

> ID：14130929
> 
> 赞同：37
> 
> 时间：2013-01-02T23:32:02.610
> 
> 标签：c#, parallel-processing

在我的应用程序中，我并行执行了几十到几百个动作（这些动作没有返回值）。

哪种方法是最优化的：

1.  在 foreach 循环中使用`Task.Factory.StartNew`迭代`Action`数组 ( `Action[]`)

    `Task.Factory.StartNew(() => someAction());`

2.  使用数组`Parallel`where`actions`的类 ( )`Action``Action[]`

    `Parallel.Invoke(actions);`

这两种方法是否等效？是否有任何性能影响？

**编辑**

我已经进行了一些性能测试，并且在我的机器上（每台 2 CPU 2 核）结果似乎非常相似。我不确定它在 1 CPU 等其他机器上会是什么样子。另外我不确定（不知道如何非常准确地测试它）什么是内存消耗。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-02T23:40:36.780

这两者之间最重要的区别是，**`Parallel.Invoke`在继续执行代码之前将等待所有操作完成**，而`StartNew`将继续执行下一行代码，允许任务在自己的好时机完成。

这种语义差异应该是您首先（也可能是唯一）考虑的因素。但出于信息目的，这里有一个基准：

```
/* This is a benchmarking template I use in LINQPad when I want to do a
 * quick performance test. Just give it a couple of actions to test and
 * it will give you a pretty good idea of how long they take compared
 * to one another. It's not perfect: You can expect a 3% error margin
 * under ideal circumstances. But if you're not going to improve
 * performance by more than 3%, you probably don't care anyway.*/
void Main()
{
    // Enter setup code here
    var actions2 =
    (from i in Enumerable.Range(1, 10000)
    select (Action)(() => {})).ToArray();

    var awaitList = new Task[actions2.Length];
    var actions = new[]
    {
        new TimedAction("Task.Factory.StartNew", () =>
        {
            // Enter code to test here
            int j = 0;
            foreach(var action in actions2)
            {
                awaitList[j++] = Task.Factory.StartNew(action);
            }
            Task.WaitAll(awaitList);
        }),
        new TimedAction("Parallel.Invoke", () =>
        {
            // Enter code to test here
            Parallel.Invoke(actions2);
        }),
    };
    const int TimesToRun = 100; // Tweak this as necessary
    TimeActions(TimesToRun, actions);
}

#region timer helper methods
// Define other methods and classes here
public void TimeActions(int iterations, params TimedAction[] actions)
{
    Stopwatch s = new Stopwatch();
    int length = actions.Length;
    var results = new ActionResult[actions.Length];
    // Perform the actions in their initial order.
    for(int i = 0; i < length; i++)
    {
        var action = actions[i];
        var result = results[i] = new ActionResult{Message = action.Message};
        // Do a dry run to get things ramped up/cached
        result.DryRun1 = s.Time(action.Action, 10);
        result.FullRun1 = s.Time(action.Action, iterations);
    }
    // Perform the actions in reverse order.
    for(int i = length - 1; i >= 0; i--)
    {
        var action = actions[i];
        var result = results[i];
        // Do a dry run to get things ramped up/cached
        result.DryRun2 = s.Time(action.Action, 10);
        result.FullRun2 = s.Time(action.Action, iterations);
    }
    results.Dump();
}

public class ActionResult
{
    public string Message {get;set;}
    public double DryRun1 {get;set;}
    public double DryRun2 {get;set;}
    public double FullRun1 {get;set;}
    public double FullRun2 {get;set;}
}

public class TimedAction
{
    public TimedAction(string message, Action action)
    {
        Message = message;
        Action = action;
    }
    public string Message {get;private set;}
    public Action Action {get;private set;}
}

public static class StopwatchExtensions
{
    public static double Time(this Stopwatch sw, Action action, int iterations)
    {
        sw.Restart();
        for (int i = 0; i < iterations; i++)
        {
            action();
        }
        sw.Stop();

        return sw.Elapsed.TotalMilliseconds;
    }
}
#endregion 
```

结果：

```
Message               | DryRun1 | DryRun2 | FullRun1 | FullRun2
----------------------------------------------------------------
Task.Factory.StartNew | 43.0592 | 50.847  | 452.2637 | 463.2310
Parallel.Invoke       | 10.5717 |  9.948  | 102.7767 | 101.1158 
```

如您所见，使用 Parallel.Invoke 大约比等待一堆新任务完成快 4.5 倍。当然，那是你的行为完全没有任何作用的时候。每个动作做的越多，你注意到的差异就越小。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-02T23:36:01.013

在总体方案中，考虑到在任何情况下实际处理大量任务的开销时，这两种方法之间的性能差异可以忽略不计。

`Parallel.Invoke`基本上`Task.Factory.StartNew()`为您执行。所以，我想说可读性在这里更重要。

此外，正如 StriplingWarrior 所提到的，它会为您`Parallel.Invoke`执行`WaitAll`（阻止代码直到所有任务完成），因此您也不必这样做。如果您想让任务在后台运行而不关心它们何时完成，那么您需要`Task.Factory.StartNew()`.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-03T14:19:02.597

我使用了 StriplingWarror 的测试来找出差异的来源。我这样做是因为当我使用 Reflector 查看代码时，Parallel 类与创建一堆任务并让它们运行没有什么不同。

从理论的角度来看，这两种方法在运行时间方面应该是等效的。但是由于（不是很现实的）带有空动作的测试确实表明 Parallel 类要快得多。

任务版本确实花费了几乎所有时间来创建新任务，这确实导致了许多垃圾收集。您看到的速度差异纯粹是由于您创建了许多很快变成垃圾的任务。

相反，Parallel 类确实创建了自己的任务派生类，该类在所有 CPU 上同时运行。只有一个物理任务在所有内核上运行。同步确实发生在任务委托内部，这确实解释了 Parallel 类的速度要快得多。

```
ParallelForReplicatingTask task2 = new ParallelForReplicatingTask(parallelOptions, delegate {
        for (int k = Interlocked.Increment(ref actionIndex); k <= actionsCopy.Length; k = Interlocked.Increment(ref actionIndex))
        {
            actionsCopy[k - 1]();
        }
    }, TaskCreationOptions.None, InternalTaskOptions.SelfReplicating);
task2.RunSynchronously(parallelOptions.EffectiveTaskScheduler);
task2.Wait(); 
```

那么什么更好呢？最好的任务是永远不会运行的任务。如果您需要创建如此多的任务以至于它们成为垃圾收集器的负担，您应该远离任务 API 并坚持使用 Parallel 类，它可以让您在所有核心上直接并行执行而无需新任务。

如果您需要变得更快，那么手动创建线程并使用手动优化的数据结构为您的访问模式提供最大速度可能是最高效的解决方案。但是您不太可能成功这样做，因为 TPL 和并行 API 已经经过大量调整。通常，您需要使用众多重载之一来配置正在运行的任务或 Parallel 类，以用更少的代码实现相同的目标。

但是如果你有一个非标准的线程模式，那么你最好不要使用 TPL 来充分利用你的内核。甚至 Stephen Toub 也确实提到过 TPL API 并不是为超快速性能而设计的，但主要目标是让“普通”程序员更容易处理线程。要在特定情况下击败 TPL，您需要远高于平均水平，并且您需要了解很多关于 CPU 缓存行、线程调度、内存模型、JIT 代码生成等方面的知识……以便在您的特定场景中提出一些建议更好的。

# robots.txt - 我可以使用 robots.txt 阻止某些 URL 参数吗？

> ID：14130935
> 
> 赞同：5
> 
> 时间：2013-01-02T23:32:53.300
> 
> 标签：robots.txt

在您告诉我“您尝试过什么”和“自己测试”之前，我想指出`robots.txt`更新速度非常慢~~我的网站~~搜索引擎上的任何网站，因此，如果您能提供理论经验，将不胜感激。

例如，是否可以允许：

```
http://www.example.com 
```

并阻止：

```
http://www.example.com/?foo=foo 
```

我不太确定。

帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T23:39:58.517

根据[Wikipedia](http://en.wikipedia.org/wiki/Robots_exclusion_standard)，“robots.txt 模式通过简单的子字符串比较匹配”，并且由于 GET 字符串是一个 URL，您应该能够添加：

```
Disallow: /?foo=foo 
```

或者更花哨的东西

```
Disallow: /*?* 
```

禁用所有获取字符串。星号是通配符，因此它匹配任何内容的一个或多个字符。

[带有动态网址的 robots.txt 示例。](http://productforums.google.com/d/msg/webmasters/G7WXqB1MLAw/H92N-aE_CIQJ)

# r - 显示透明度和填充颜色的ggplot图例

> ID：14130943
> 
> 赞同：15
> 
> 时间：2013-01-02T23:34:03.333
> 
> 标签：r, ggplot2, legend, alpha-transparency

我正在将两个半透明的色带绘制在一起。使用下面的代码，没有该`scale_fill_manual`部分，我基本上得到了我想要的，带有一个名为`"red"`, 和标签的图例`blue`和`red`. 添加该`scale_fill_manual`部分允许我将图例及其条目命名为我想要的名称，但我失去了图例中彩色矩形的透明度。

```
x=1:10
y1=1:10
y2=2:11
y3=10:1
y4=9:0
dt=data.frame(x,y1,y2,y3,y4)
library(ggplot2)    
ggplot(dt)+
  geom_ribbon(aes(x=x,ymin=y1,ymax=y2,fill='red'),
              alpha=0.4,)+
  geom_ribbon(aes(x=x,ymin=y3,ymax=y4,fill='blue'),
              alpha=0.5)+
  scale_fill_manual(name='legendname',
                    values=c('red','blue'),
                    labels=c('one','two')) 
```

[![在此处输入图像描述](../Images/bc304a35c9cb66b85adeeebeb7272a5d.png)](https://i.stack.imgur.com/lYSMX.png)

sessionInfo() 的输出

```
R version 2.15.2 (2012-10-26)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] scales_0.2.3   ggplot2_0.9.3  plyr_1.8       reshape2_1.2.2

loaded via a namespace (and not attached):
 [1] colorspace_1.2-0   dichromat_1.2-4    digest_0.6.0       grid_2.15.2        gtable_0.1.2       labeling_0.1      
 [7] MASS_7.3-22        munsell_0.4        proto_0.3-10       RColorBrewer_1.0-5 rstudio_0.97.248   stringr_0.6.2     
[13] tools_2.15.2 
```

有很多类似问题的解决方案（[在 ggplot 中自定义图例](https://stackoverflow.com/questions/8427668/customize-legend-in-ggplot)，[https:](https://stats.stackexchange.com/questions/5007/how-can-i-change-the-title-of-a-legend-in-ggplot2) //stats.stackexchange.com/questions/5007/how-can-i-change-the-title-of-a-legend-in-ggplot2等），但我找不到任何专门解决这个问题的东西。

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T23:54:15.453

您可以通过添加以下内容来覆盖图例中的美学：

```
+ guides(fill = guide_legend(override.aes= list(alpha = 0.4))) 
```

到你的 ggplot 电话。

`geom_ribbon`但与 ggplot 中的大多数事情一样，以一种不需要多次调用的方式排列数据可能更简单：

```
dt1 <- data.frame(x = c(x,x),
                  ymin = c(y1,y3),
                  ymax = c(y2,y4),
                  grp = rep(c('red','blue'),each = 10))
ggplot(data = dt1,aes(x = x,ymin = ymin, ymax = ymax,fill = grp)) + 
    geom_ribbon(alpha = 0.4) + 
    scale_fill_manual(name = "legendname",
                      values = c('red','blue'),
                      labels = c('one','two')) 
```

![在此处输入图像描述](../Images/91420484fb712c137bd3683dc283e0fb.png)

# php - MySQL/PHP/HTML 如何在分层下拉表单菜单中插入子项？

> ID：14130947
> 
> 赞同：2
> 
> 时间：2013-01-02T23:34:16.627
> 
> 标签：php, html, mysql, drop-down-menu, optgroup

我有以下从我的数据库中获取值的变量。这些变量存储分层列表（格式）的父值和同一分层列表的子值：

```
$getSolos = $wpdb->get_results($wpdb->prepare("
        SELECT * FROM wp_terms p 
        LEFT OUTER JOIN wp_term_taxonomy t ON p.term_id = t.term_id
        WHERE t.taxonomy = 'format'
        AND t.parent = 0
        AND t.term_id NOT IN (SELECT parent FROM wp_term_taxonomy WHERE taxonomy = 'format' AND parent > 0)
        ORDER BY t.parent
        "));

$getParents = $wpdb->get_results($wpdb->prepare("
        SELECT * FROM wp_terms p 
        LEFT OUTER JOIN wp_term_taxonomy t ON p.term_id = t.term_id
        WHERE t.taxonomy = 'format'
        AND t.parent = 0
        AND t.term_id IN (SELECT parent FROM wp_term_taxonomy WHERE taxonomy = 'format' AND parent > 0)
        ")); 
```

虽然以上不一定重要，但以下是我的数据库如下所示：

```
term_id name          slug                   term_id1    parent
1         Entry Form    entry-form           1           0
2         Facebook      facebook             2           0
3         Entry Form    entry-form-facebook  3           2
4         Twitter       twitter              4           0
5         Page          page-facebook        5           2 
```

所以从逻辑上讲，我的 OBJECT ARRAYS 包含：

```
$getParents->parent = 2 // contains only IDs of parent formats
$getSolos->term_id = 1,5 // contains only IDs of formats that have no children 
```

这个想法是用这些格式填充下拉表单菜单，父格式是包含其子格式的 optgroup。到目前为止，我已经实现了以下目标：

```
<form>
    Format: <select name="format">
        <option value="empty"></option>
            <?php 
                foreach ($getSolos as $solo) {
                    echo "<option value='".$solo->name."' ".$selected.">".$indent.$solo->name."</option>";
                }
                foreach ($getParents as $parent) {
                    echo "<optgroup label='".$parent->name."'>";
                    // How do I get the children in here?
                    echo "</optgroup>";
                }
            ?>
    </select>
</form> 
```

上述输出：

```
Entry Form
Twitter
Facebook // Bold as it is an optgroup header 
```

输出应该是：

```
Entry Form
Twitter
Facebook // Bold as it is an optgroup header
    Entry Form
    Page 
```

所以这是我的问题：1）如何让孩子出现在父 optgroup 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:01:20.660

您确实可以`NOT IN`在 PHP 中构造一个合适的条件并将其传递给 MySQL，例如：

```
$parents_sql = implode(',', array_map(intval, $getParents->parent));

$getSolos = $wpdb->get_results($wpdb->prepare("
    SELECT term_id FROM wp_term_taxonomy            
    WHERE taxonomy = 'format'           
    AND parent = 0 AND term_id NOT IN ($parents_sql)
    ")); 
```

（注意：这`intval`是为了*确保*此代码不会导致 SQL 注入。在您的情况下，这应该不是问题，但永远不能太确定，无论如何这是一个好习惯。如果您正在使用字符串键执行此操作，您可以将其替换为适合您数据库的字符串引用函数。）

但是，如果有很多父记录，使用子查询可能更有效（[SQLFiddle 上](http://sqlfiddle.com/#!2/ae32e/3/0)的演示）：

```
SELECT term_id FROM wp_term_taxonomy AS t1            
WHERE taxonomy = 'format'           
AND parent = 0
AND term_id NOT IN (
    SELECT parent FROM wp_term_taxonomy         
    WHERE taxonomy = 'format'           
    AND parent > 0) 
```

或`LEFT JOIN`（[SQLFiddle 上](http://sqlfiddle.com/#!2/ae32e/5/0)的演示）：

```
SELECT t1.term_id
FROM wp_term_taxonomy AS t1            
  LEFT JOIN wp_term_taxonomy AS t2
    ON t1.term_id = t2.parent
WHERE t1.taxonomy = 'format'           
  AND t1.parent = 0
  AND t2.term_id IS NULL 
```

# linux - GIOChannel 不会检测到 G_IO_IN

> ID：14130948
> 
> 赞同：2
> 
> 时间：2013-01-02T23:34:18.933
> 
> 标签：linux, sockets, glib, gio

我使用阻塞 IO（因为这似乎是向套接字写入大量数据的最简单方法）。

我想检测是否有任何数据要读取，所以我使用`g_io_channel_get_buffer_condition()`. 问题是它总是会回馈`4`，并且永远不会设置位`1`。`G_IO_IN`

发送和接收在所有其他方面都很好。该对象是从 Unix 套接字创建的。我是否需要为此功能设置任何其他方面才能正确发出有字节可供读取的信号？

# regex - 如何检查一个字符串是否至少有一个字母字符？

> ID：14130950
> 
> 赞同：2
> 
> 时间：2013-01-02T23:34:36.267
> 
> 标签：regex, linux, bash, shell

我想检查一个字符串是否至少有一个字母字符？正则表达式可能像：

```
"^.*[a-zA-Z].*$" 
```

但是，我想判断一个字符串是否至少有一个字母字符？所以我想使用，比如

```
 if [ it contains at least one alphabetic character];then
 ...
 else
 ...
 fi 
```

所以我不知道如何使用正则表达式

我试过

```
if [ "$x"=~[a-zA-Z]+ ];then echo "yes"; else echo "no" ;fi
or
if [ "$x"=~"^.*[a-zA-Z].*$" ];then echo "yes"; else echo "no" ;fi 
```

并用 x="1234" 测试，上面的脚本输出结果都是"yes"，所以它们是错误的

如何实现我的目标？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:46:24.653

试试这个：

```
 #!/bin/bash

x="1234"
y="a1234"

if [[ "$x" =~ [A-Za-z] ]]; then
        echo "$x has one alphabet"
fi

if [[ "$y" =~ [A-Za-z] ]]; then
        echo "Y is $y and has at least one alphabet"
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T23:48:09.193

如果你想便携，我会打电话`/usr/bin/grep`给`[A-Za-z]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T00:45:13.727

使用符合`[:alpha:]`您的语言环境的字符类和正则表达式

```
[[ $str =~ [[:alpha:]] ]] && echo has alphabetic char 
```

或全局样式的模式

```
[[ $str == *[[:alpha:]]* ]] && echo has alphabetic char 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T05:41:55.557

**在sh**脚本中，在**if**子句中使用**grep**是很常见的。您可以在 /etc/rc.d/ 中找到许多这样的示例。

 **```
if echo $theinputstring | grep -q '[a-zA-Z]' ; then
    echo yes
else
    echo no
fi 
```**

# java - JPA/HQL - 查找具有包含一个或多个特定元素的一对多关系的行

> ID：14130953
> 
> 赞同：1
> 
> 时间：2013-01-02T23:34:52.720
> 
> 标签：java, hibernate, jpa, hql

我有一个`GrantedRole`类允许跨一个或多个授予特定角色`Site`，例如：

```
public class GrantedRole {
    private RoleType role;

    private User granter;
    private User grantee;
    private Collection<Site> grantSites;

    @Column(nullable = false)
    public UserRoleType getRole() {
        return role;
    }

    @ManyToOne(optional = false, fetch=FetchType.LAZY)
    public User getGranter() {
        return granter;
    }

    @ManyToOne(optional = false, fetch=FetchType.LAZY)
    public User getGrantee() {
        return grantee;
    }

    @ManyToMany
    public Collection<Site> getGrantSites() {
        return grantSites;
    }
} 
```

我想要提出的是一个查询，它将找到`GrantedRole`特定授予者给出的所有`Site`' 在他们的`grantSites`集合中具有一个或多个指定的 '。所以像：

```
SELECT g FROM GrantedRole g WHERE g.granter = :granter AND 
    g.grantSites [contains at least one of] (:sites) 
```

...但我不确定使用什么语法`[contains at least one of]`，或者是否可以使用 JPA/HQL。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:55:11.327

我能够通过调整此处找到的答案来完成这项工作：

[通过 HQL 检查两个集合的交集](https://stackoverflow.com/questions/3083152/checking-the-intersection-of-two-collections-via-hql)

具体来说：

```
SELECT DISTINCT g FROM GrantedRole g, Site s WHERE g.granter = :granter 
    AND s IN (:sites) AND s IN ELEMENTS(g.grantSites) 
    ORDER BY g.grantee.firstName ASC, g.grantee.lastName ASC 
```

# javascript - IE8 阻止此站点下载文件 - javascript window.open 位置差异

> ID：14130955
> 
> 赞同：1
> 
> 时间：2013-01-02T23:35:01.773
> 
> 标签：javascript, html, internet-explorer-8

我管理一个 ASP.NET 站点，他们希望通过单击按钮打开多个报告（最好每个在其自己的选项卡中）。报告现在保存为 URL，所以我只需要使用这些 url 打开多个窗口。

我正在尝试使用javascript（即window.open）这样做。这是我正在做的一个例子（尽管我删除了实际的网址）：

```
<html>
<body>
<button onclick="openLinks();return false;">Open both links</button>
<script type="text/javascript">
    function openLinks(){
        var FirstWindow = window.open('');
        FirstWindow.location = 'https://myssrsReportURL/rs:Format=EXCEL';

        window.open('https://myssrsReportURL/rs:Format=EXCEL');
    }
</script>
</body>
</html> 
```

上面 js 方法的前 2 行的优点是强制 url 在新选项卡中打开而不是在新窗口中打开。但是，在上面的示例中，当我在打开空白窗口后设置位置时，我收到文件下载错误 IE “阻止此站点下载”： ![在此处输入图像描述](../Images/6724618eeab238a2252b5f36481a158b.png)

当第二个 url 打开时（在新窗口中）没有问题（我收到文件下载提示）。

为什么第二种方法有效（我收到文件下载提示），而第一种方法无效（我收到 IE 安全警告），如果他们打开相同的 url？有没有办法使用javascript（或jQuery）解决这个问题？

客户要求单击一个按钮即可打开所有这些报告。我不能在一个请求中将它们全部压缩，因为报告是由 SSRS 根据对特定 url 的获取请求（我试图在新选项卡中打开的那些）生成的。

**请注意，问题不是“我如何打开多个选项卡”**，这就是为什么 window.open('') 与 window.open('url') 之间存在行为差异的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:40:43.963

没有 JavaScript 魔术可以欺骗浏览器打开多个标签。如果有......它将被停止，因为它是一个安全漏洞（下载/标签垃圾邮件拒绝服务）。

有一个更好的解决方案，适用于所有浏览器。您甚至可以在 JavaScript 和 ASP.NET 之间进行选择。

创建多个 iframe 元素并使用页面上的选项卡/链接/按钮一次显示一个（简单的 onclick 操作可显示一个 iframe 并隐藏其余部分）。对于下载，如果服务器端脚本失败，此方法的优点是不会丢失当前页面（因此用户保留在当前页面上，而不是 500 内部错误或空白页面）。

对于多个下载，为什么不压缩服务器上的文件以获得单个下载提示？不要用许多下载提示来惹恼用户是有道理的。

# c - 访问全局数组会导致分段错误

> ID：14130956
> 
> 赞同：0
> 
> 时间：2013-01-02T23:35:11.043
> 
> 标签：c, arrays, pointers, pthreads, segmentation-fault

我正在尝试执行一项分配，其中我将使用多个线程对文件中的输入进行排序，但是当我尝试使用结构数组来存储我需要在线程之后恢复的信息时，我遇到了分段错误。根据我的消息来源，我不确定它为什么会导致故障。

这是主文件，Threads.c seg 错误在 for 循环中，导致的行由注释指定。排序方法是我没有使用的另一个功能

```
#include "threads.h"
Threads* threadArray[4];
int linesPerThread;
int extraLines;

main(int argc, char *argv[]){
 int n;

 if( argc != 4){
  printf("Wrong Number of Arguements!\n");
  return;
}
  n = atoi(argv[1]);
 char *inName = argv[2];

*threadArray = (Threads*) (*threadArray, n*sizeof(Threads));  

FILE* file = fopen(inName, "r");
 if(!file){
printf("invalid file Name \n");
return;}

int lines = 0;
char xyz[5000]; //makes fgets happy
while(fgets(xyz, 5000, file) != NULL){
  lines = lines+1;
}
fclose(file);
linesPerThread = lines / n;

 extraLines = lines - linesPerThread;

 int i =0;
 int methodCounter =1;

 printf("Right before Loop \n \n");

 for(i; i < n; i++){

   printf("first part of loop \n");
 \\The ling below here Seg Faults.
   (*threadArray + i)->id = i;

   printf("right after first ThreadArray access \n");
   if(methodCounter < 3){
 printf("method counter 1\n");
(*threadArray+i)->methodID = methodCounter;
 methodCounter++;
   }else{
 printf("method counter condition 2 \n");
(*threadArray + i)->methodID = 3;
   methodCounter = 1;}
   if(extraLines > 0){
 printf("extra Lines condition 1 \n");
(*threadArray+i)->lines = linesPerThread +1;
 extraLines= extraLines -1;
   }else{
 printf("extraLines condition 2 \n");
 (*threadArray+i)->lines = linesPerThread;
   }
   printf("Right before Thread Creation \n \n");
   pthread_t tID;
   pthread_create(&tID, NULL, sortMethod, (void*) &((*threadArray+i)->id));
   (*threadArray+i)->threadID = tID;
   printf("right after thread creation \n \n");
 }
 printf("right after loop \n \n");
 int c=0;

 printf("before thread joining \n");
 for(c; c< n; c++){
   pthread_join( (*threadArray+ c)->threadID, NULL);
 }

 } 
```

这是头文件，Threads.h

```
#include <sys/time.h>
#include <stdio.h> 
#include <pthread.h>
#include <stdlib.h>
#include <string.h>

typedef struct{
  int id;
  int lines;
  pthread_t threadID;
  int methodID;
}Threads;

void* sortMethod(void*ptr);
int main(int argc, char *argv[]); 
```

您能提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:41:18.593

在行

```
*threadArray = (Threads*) (*threadArray, n*sizeof(Threads)); 
```

你设置`threadArray[0]`为`(Threads*)(n*sizeof(Threads)`. 您可能想要 a`realloc`或 a`calloc`在该行中。

就目前而言，

```
(*threadArray, n*sizeof(Threads)) 
```

是一个逗号表达式，并且该逗号表达式的值被强制转换为`Threads*`.

由于您从未将内存分配给 的任何元素`threadArray`，

```
(*threadArray + i)->id = i; 
```

取消引用无效的指针。由于数组是静态的，因此指针最初初始化为空指针，您只需设置`threadArray[0]`为不同的值（但这也很可能也不指向有效内存）。

# php - $.ajax 从 PHP 文件中获取返回值

> ID：14130957
> 
> 赞同：1
> 
> 时间：2013-01-02T23:35:11.863
> 
> 标签：php, jquery, ajax, function, return-value

在这里，我有 jQuery ajax 调用有时会执行的 .php 文件让我们说以下内容

```
echo "hello" 
```

这里是：

```
 $.ajax({
        type: "POST",
        url: myurl.php
        data: data_string,
        timeout: 6000,
        success: function () {

        }
    }); 
```

我想知道：当在 PHP 文件中执行类似前面的 echo 时，是否可以让 ajax 返回 ERROR 而不是 SUCCESS？我的意思是，检查这个 $.ajax 中的 php 文件是否按照我的意愿执行。

更好地解释： **当请求无法完成时我得到错误，而当它可以时成功。但我想从这个 PHP 文件中得到一个返回值。如果它返回 1，我想做点什么。相反，如果它返回 2，我想做其他事情。希望我解释得更好..**

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T23:52:35.733

我建议`json_encode()`在您的 PHP 文件中使用。例如：

```
echo json_encode(array('success' => 'do_foo'));
exit(); 
```

然后您可以在成功回调中添加条件：

```
$.ajax({
  type: "POST",
  url: myurl.php
  data: data_string,
  dataType: "JSON", //tell jQuery to expect JSON encoded response
  timeout: 6000,
  success: function (response) {
    if (response.success === 'hello'){
      console.log(response);
    } else {
      console.log('else');
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:06:45.307

根据您的问题，使 php 返回 1 或返回 2。您可以使其在失败时返回 1，在成功时返回 0（为空）。然后您可以为您的 ajax 返回执行此操作。

```
$.ajax({
                type: "POST",
                url: "YOUR URL",
                data: dataString,
                success: function(server_response)
                    {
                        if(server_response == 1)
                        {
                            alert("You have made a mistake");
                            return true;
                        }

                        HERE YOU WILL PUT WHAT HAPPENS ON SUCCESS

                        }
                    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:43:46.830

```
$.ajax({
    type: "POST",
    url: myurl.php
    data: data_string,
    timeout: 6000,
    success: function (msg) {
       if (msg != "Hi")
       {
          //TODO
       } else
       {
          //TODO
       }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T23:44:49.690

您可以为此使用错误回调：

```
$.ajax({
    type: "POST",
    url: myurl.php
    data: data_string,
    timeout: 6000,
    success: function () {

    },
    error: function() {
        /* Code reacting to error here */
    }
}); 
```

此外，还有其他回调机会，您可以在[$.ajax 文档页面查看](http://api.jquery.com/jQuery.ajax/)。

如果您要从 PHP 中“说”有错误，可以通过 2 种方式完成：

您可以在 PHP 中打印一个表示错误的关键字，然后在您的成功函数中检查它：

```
success: function (data) {
    if (data == 'error') {
    } else {
    }
} 
```

或者，另一种方式，您可以提供 PHP 正确的标头以导致“错误”。然后你可以像往常一样使用错误回调。我会选择这种方式。

# amazon-ec2 - Amazon EC2 上的 ActiveMQ 共享文件系统主从

> ID：14130958
> 
> 赞同：4
> 
> 时间：2013-01-02T23:35:29.753
> 
> 标签：amazon-ec2, activemq, master-slave

我们希望使用[基于 Amazon EC2 上共享文件系统的 ActiveMQ 主/从配置](http://activemq.apache.org/shared-file-system-master-slave.html)——这是最终目标。操作系统应该是 Ubuntu 12.04，但这不应该有太大的区别。

*为什么不是基于 RDS 的主/从配置？*我们已经尝试过了，它很容易设置（包括多可用区）。但是，它[相对较慢](http://activemq.apache.org/masterslave.html)，并且故障转移大约需要三分钟 - 所以我们想找到其他东西。

*我们应该使用哪个共享文件系统？*我们做了一些研究，得出了以下结论（可能是错误的，请纠正我）：

*   GlusterFS[经常被建议](https://stackoverflow.com/questions/9415265/glusterfs-as-shared-storage-for-activemq-master-slave-cluster)并且应该[支持多可用区](http://sanketdangi.tumblr.com/post/5601762671/gluster-config-aws-multi-az)。
*   NFSv4 应该可以工作（据说 NFSv3 会[破坏文件系统](http://activemq.2283324.n4.nabble.com/Feasibility-of-Shared-File-System-Master-Slave-using-NFSv4-td3536513.html)），但我在 EC2 上没有看到太多对它的引用（而是：[要求 NFS](https://serverfault.com/questions/347936/redundant-nfs-on-amazon-ec2)，得到使用 GlusterFS 的建议）。有什么特别的原因吗？
*   [Ubuntu 的 Ceph](http://www.canonical.com/about-canonical/resources/white-papers/what%E2%80%99s-new-ubuntu-server-1204-lts)还不稳定。
*   Hadoop 分布式文件系统 (HDFS) 对我来说听起来有点矫枉过正，NameNode 将再次成为单点故障。

*那么GlusterFS是什么呢？*我们几乎没有发现任何成功案例。相反，错误跟踪器中的条目相当劝阻，没有任何真正的解释：[“我不建议将 GlusterFS 与主/从共享文件系统一起使用，每秒可能有超过 15 条入队/出队消息。”](https://issues.apache.org/jira/browse/AMQ-4071) 有谁知道为什么或有人在 GlusterFS 上成功使用 ActiveMQ 并发送大量消息？

*EBS 还是临时存储？*由于 GlusterFS 应该复制所有数据，我们可以使用临时存储，或者使用 EBS 有什么优势（恕我直言，快照与我们的场景无关）。

我们可能会尝试 GlusterFS，但根据墨菲定律，我们会在最糟糕的时刻遇到问题。因此，我们宁愿通过（希望）就此获得更多意见来避免这种情况。提前致谢！

PS：*为什么我没有在ServerFault上发布这个？*这会更合适，但是关于这个主题的帖子有 10 倍多，所以我坚持使用羊群。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:38:18.620

只是一个想法......但是使用 activemq 5.7（或者可能已经是 5.6），您可以拥有可插入的储物柜（http://activemq.apache.org/pluggable-storage-lockers.html）。因此，将文件系统用作存储和 RDS 仅用作锁定机制可能是一种选择。注意我以前从未尝试过。

# php - 本地从浏览器静默打印 PDF 到特定打印机

> ID：14130959
> 
> 赞同：2
> 
> 时间：2013-01-02T23:35:30.180
> 
> 标签：php, javascript, jquery, virtual-printer

我有一个生成两个不同 PDF 的网络应用程序。我需要将一个打印到名为“A”的打印机，另一个打印到名为“B”的打印机。这些打印机未连接到服务器。如今，用户每次都必须选择打印机。我需要系统知道在哪里打印各种 pdf。我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:45:04.263

If you know Printer A and Printer B, you can get the SDK from the printer manufacturer and make them auto print.

Without knowing the printers you can not do this. If so every time you went to web page the owner would make your printer, print out advertisements. See why this is not allowed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:05:19.507

我们正在使用您`CUPS`将文件发送到打印机。看看这个例子如何`CUPS`与`php` [http://www.cups.org/articles.php?L545+TNews+Q一起使用](http://www.cups.org/articles.php?L545+TNews+Q)

...但是正如@ROY Finley 回答的那样，您需要知道打印机地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T18:07:33.823

您可以简单地在 Print&Share 中配置配置文件识别。此视频示例使用带有打印机通道的配置文件和带有文件打印机通道的配置文件： [https ://www.youtube.com/watch?v=nvTly9qXQMI&list=PLDF2C2AD95B2B2FC2&index=38](https://www.youtube.com/watch?v=nvTly9qXQMI&list=PLDF2C2AD95B2B2FC2&index=38)

您可以根据需要轻松创建仅包含打印机通道的配置文件。这样您只需打印，软件将自动选择正确的配置文件或 A 或 B（如果您启用“自动发送并关闭”，它也会自动打印而不显示用户界面）。

# c++ - 扫描进程内存导致崩溃

> ID：14130961
> 
> 赞同：0
> 
> 时间：2013-01-02T23:36:01.887
> 
> 标签：c++, memory, allocation, wow64, virtualquery

我已将我的 DLL 注入进程，我尝试扫描内存以查找与我的值相同的地址，但在我获得第一个地址后它导致崩溃，它应该是 10 个地址

```
for(DWORD i = MEM_START; i< MEM_END ;i++)
{
    VirtualQuery((void*)i,pMemInfo,sizeof(MEMORY_BASIC_INFORMATION));
    if(pMemInfo->AllocationProtect == PAGE_READONLY || PAGE_EXECUTE_WRITECOPY || PAGE_READWRITE || PAGE_WRITECOMBINE)
    {
        if(*(DWORD*)i==1337)
        {
           addresses.push_back(i);
        }
    } 
} 
```

我相信我的保护检查是错误的，但不太确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:20:12.260

虚拟内存扫描仪

```
MEMORY_BASIC_INFORMATION mbi = {0};
unsigned char *pAddress   = NULL,
              *pEndRegion = NULL;

DWORD   dwFindData          = 0xBAADF00D,
        dwProtectionMask    = PAGE_READONLY | PAGE_EXECUTE_WRITECOPY 
                              | PAGE_READWRITE | PAGE_WRITECOMBINE;

while( sizeof(mbi) == VirtualQuery(pEndRegion, &mbi, sizeof(mbi)) ){
    pAddress = pEndRegion;
    pEndRegion += mbi.RegionSize;
    if ((mbi.AllocationProtect & dwProtectionMask) && (mbi.State & MEM_COMMIT)){
         for (pAddress; pAddress < pEndRegion ; pAddress++){
             if (*pAddress == dwFindData){
                 // dostaff  
             }
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:21:51.617

是的，有几个错误。您需要使用 | 运算符而不是 ||。的值`i`没有意义，您必须使用 MEMORY_BASIC_INFORMATION.AllocationBase 来查找区域的开始位置。和 .RegionSize 知道它有多大。传递给 VirtualQuery 的下一个值应该是 .AllocationBase + .RegionSize 以查找下一个区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:54:24.520

这不是`||`操作员的工作方式。您可能会发现改为使用`switch`语句更具可读性。

```
for (DWORD i = MEM_START; i < MEM_END ;i++)
{
    VirtualQuery((void*)i, pMemInfo, sizeof(MEMORY_BASIC_INFORMATION));
    switch (pMemInfo->AllocationProtect)
    {
    case PAGE_READONLY:
    case PAGE_EXECUTE_WRITECOPY:
    case PAGE_READWRITE:
    case PAGE_WRITECOMBINE:
        if(*(DWORD*)i==1337)
        {
           addresses.push_back(i);
        }
    } 
} 
```

# objective-c - 如何在 iOS 中为视图的移动设置动画？

> ID：14130963
> 
> 赞同：10
> 
> 时间：2013-01-02T23:36:28.830
> 
> 标签：objective-c, ios, xcode, arrays, animation

我是一个非常初学者的程序员，我正在尝试找到最简单的方法来做到这一点。我以前从未做过动画。我想尝试在我的应用程序中为图像设置动画，但遇到了一些问题。这是之前有人建议我使用的代码（来自另一个问题）：

```
imageView.image = yourLastImage;  
// Do this first so that after the animation is complete the image view till show your last image.

NSArray * imageArray  = [[NSArray alloc] initWithObjects:
[UIImage imageNamed:@"image1.png"],  
[UIImage imageNamed:@"image2.png"],
[UIImage imageNamed:@"image3.png"],                         
[UIImage imageNamed:@"image4.png"],
nil]; 

// Note: here you may instead want to use something like [UIImage imageWithContentsOfFile:[self localImagePath:NO]] instead depending upon your targeted iOS version.

UIImageView * animatedImageView = [[UIImageView alloc] initWithFrame:
    CGRectMake(100, 125, 150, 130)];
animatedImageView.animationImages = imageArray;
animatedImageView.animationDuration = 1.1;
    myAnimation.animationRepeatCount = 1;
animatedImageView.contentMode = UIViewContentModeBottomLeft;

[self.view addSubview:animatedImageView];
[animatedImageView startAnimating]; 
```

好吧，首先，这是否实用？我想为从屏幕中间到屏幕底部的东西设置动画。这是否意味着我必须有 500 张图像，每张图像相距 1 个像素？最佳像素间隔是多少，这样它看起来流畅、均匀且不需要大量工作？有没有比上述方式更好的动画制作方法？是否有一个程序可以帮助您制作以后可以添加到 Xcode 中的动画？

另外，有人可以解释一下上面的代码吗？我是动画新手，我真的不明白这意味着什么。

对不起，如果这是一个愚蠢的问题，我在开幕式上说我是初学者。感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-02T23:42:53.730

`UIView`对于大多数动画，您可以简单地更改动画块内视图的属性。类`UIView`文档列出了哪些属性是可动画的。

```
[UIView animateWithDuration:0.5f animations:^{
    aView.frame = CGRectOffset(aView.frame, 0, 250); 
}]; 
```

这是一个示例项目，演示如何在按下按钮时触发动画。您可以将此动画代码放在许多其他地方，因此除非您提供有关所需内容的更多详细信息，否则您关于将代码放在哪里的问题没有一个好的答案。

[https://github.com/MaxGabriel/AnimationDemonstration](https://github.com/MaxGabriel/AnimationDemonstration)

您采用的方法是为`UIImageView`. 我从来没有这样做过，但我的理解是这就像制作动画 GIF。对于诸如移动视图或淡出它们之类的事情，您需要使用上面显示的动画块方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-28T08:16:40.170

在 iOS 中做动画很简单。

```
CGRect basketTopFrame = self.upperview.frame;
basketTopFrame.origin.y = -basketTopFrame.size.height;

CGRect basketBottomFrame = self.lowerview.frame;
basketBottomFrame.origin.y = self.view.bounds.size.height;

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationDelay:1.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

self.upperview.frame = basketTopFrame;
self.lowerview.frame = basketBottomFrame;

[UIView commitAnimations]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-19T11:43:50.620

以下代码对我有用，可以在打开键盘或其他东西时移动视图。

```
[UIView animateWithDuration:(timeYouWantAnimate - 0.3f) animations:^{
 [nameOfView setFrame:CGRectMake(0,spaceYouWantMove like -100, self.view.with, self.view.height)];
} 
```

希望也能帮到你:D

# php - 数据库结果是对象还是数组？

> ID：14130964
> 
> 赞同：11
> 
> 时间：2013-01-02T23:36:30.093
> 
> 标签：php, mysql

这个问题类似于[PHP 中的 Mysql 结果 - 数组还是对象？](https://stackoverflow.com/questions/124240/mysql-results-in-php-arrays-or-objects)但是，我的问题扩展了那里讨论的内容。

我正在尝试确定哪种格式更适合处理数据库结果：**objects 或 arrays**。我不关心性能（据我所知，这没什么区别）。我的重点还在于显示结果——而不是创建、更新或删除它们。

迄今为止，我一直使用对象，通过类似`mysqli_fetch_object`或 PDO 的函数`fetchObject`。这通常工作得很好，直到我开始做连接。连接会导致奇怪的对象，这些对象是来自两个或多个表的字段的混合。我的代码很快开始变得混乱。

我应该注意，我正在分配特定的类名，而不是坚持使用默认的`stdClass`. 我这样做是为了可以访问我在类中创建的任何辅助方法。例如：

```
foreach ($members as $member)
{
    echo $member->full_name();
    echo $member->age();
} 
```

为了清楚起见，我正在考虑将所有数据库结果转移到数组中。从我读到的其他人也这样做。但是，这让我无法轻松访问我的辅助方法。

使用上面的例子，我想我可以只输出名字和姓氏而不是使用`full_name()`方法，没什么大不了的。至于age() 方法，我想我可以创建一个通用实用程序类并将其放入其中。

## 我的问题：

1.  如果您使用（模型）对象，您如何处理连接？
2.  如果你使用数组，你如何处理辅助方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T15:56:51.757

我一直使用对象——但我不会直接从查询中放入数据。使用“设置”函数我创建了布局，因此避免了连接和命名冲突的问题。在您的“full_name”示例中，我可能会使用“as”来获取名称部分，在对象中设置每个部分并提供“get_full_name”作为成员 fn。

如果你觉得雄心勃勃，你可以在“get_age”中添加各种东西。设置一次出生日期，然后从那里开始疯狂。

编辑：有几种方法可以从您的数据中制作对象。您可以预定义类并创建对象，也可以“即时”创建它们。

--> 一些简化的例子——如果这还不够，我可以添加更多。

**即时：**

```
$conn = DBConnection::_getSubjectsDB();  
$query = "select * from studies where Status = 1";  
$st = $conn->prepare( $query );  

$st->execute();  
$rows = $st->fetchAll();  
foreach ( $rows as $row )  
{  
    $study = (object)array();  
    $study->StudyId = $row[ 'StudyId' ];  
    $study->Name = $row[ 'StudyName' ];  
    $study->Investigator = $row[ 'Investigator' ];  
    $study->StartDate = $row[ 'StartDate' ];  
    $study->EndDate = $row[ 'EndDate' ];  
    $study->IRB = $row[ 'IRB' ];  

    array_push( $ret, $study );  
} 
```

**预定义：**

```
/** Single location info
*/
class Location  
{  
    /** Name  
    * @var string  
    */  
    public $Name;  

    /** Address  
    * @var string  
    */  
    public $Address;  

    /** City  
    * @var string  
    */  
    public $City;

    /** State
    * @var string
    */
    public $State;

    /** Zip
    * @var string
    */
    public $Zip;

    /** getMailing
    * Get a 'mailing label' style output
    */
    function getMailing()
    {  
         return $Name . "\n" . $Address . "\n" . $City . "," . $State . "  " . $Zip;
    }
} 
```

**用法：**

```
$conn = DBConnection::_getLocationsDB();  
$query = "select * from Locations where Status = 1";  
$st = $conn->prepare( $query );  

$st->execute();  
$rows = $st->fetchAll();  
foreach ( $rows as $row )  
{  
    $location = new Location();  
    $location->Name= $row[ 'Name' ];  
    $location->Address = $row[ 'Address ' ];  
    $location->City = $row[ 'City' ];  
    $location->State = $row[ 'State ' ];  
    $location->Zip = $row[ 'Zip ' ];  

    array_push( $ret, $location );  
} 
```

然后你可以循环 $ret 并输出邮件标签：

```
foreach( $ret as $location )
{ 
    echo $location->getMailing();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:56:06.200

我认为最好以模型的形式表示您的所有数据及其类型。对于连接对象和单个对象。这样做总是会忽略你的问题。

```
class Member_Details {
    public $id;    
    public $first_name;
    public $last_name;

    public function FullName() {
         return $this -> first_name." ".$this -> last_name;
    }
}

class Member_Address {
    public $id;
    public $address;
    public $city;
}

class MemberJoins {
     public $objects = array();
} 
```

创建此类类后，您可以通过以下方式配置 JOIN。

```
$obj_details = new Member_Details();
$obj_address = new Member_Address();
//Add data to the objects and then

//Then create the join object
$obj_address_details = new MemberJoins();
$obj_address_details -> objects = array($obj_details, $obj_address); 
```

它们都有一个共同的属性`id`，可以从中链接其数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:32:15.163

这是一天结束时的偏好。就个人而言，我更喜欢对象。尽管 CakePHP 使用数组作为结果，使用“对象”名称作为数组键。然而，当您在 CakePHP 中获取相关记录时，事情开始变得有趣起来。

对于您的问题，您可以简单地在对象中包含对象。例如：

```
stdClass Object
(
    [id] => 1
    [title] => Article Title
    [published] => 2013-03-04 16:30:00
    [category] => stdClass Object
        (
            [id] => 1
            [name] => Category Name
        )

) 
```

然后，您可以在视图中显示相关数据，如下所示：

```
<?php echo $article->category->name; ?> 
```

或者，如果您使用 getter 和 setter：

```
<?php echo $article->getCategory()->getName(); ?> 
```

没有正确或错误的答案。正如我所说，这都是个人喜好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T23:40:09.343

我*认为*您正在谈论在两个或多个表上使用 SELECT 出现的奇怪对象。

我通过`AS`在我的 sql 中使用给它一个更简单的名称来解决这个问题。

```
SELECT IFNULL(SUM(table2.big_name),0) AS sumBig

...

$result=$PDO->fetchObject();
$sum=$result->sumBig; 
```

# jquery-ui - 如何将文本区域合并到 Jquery 对话框中

> ID：14130977
> 
> 赞同：0
> 
> 时间：2013-01-02T23:38:14.243
> 
> 标签：jquery-ui, textarea, modal-dialog

我正在尝试将 textarea 插入到 JQuery 对话框中，并且我对如何设置必须使用的对话框的语法感到困惑（顺便说一下，我没有编写对话框，我只是想进行更改给它）。我在这个网站上查看了与此类似的其他一些问题，但他们似乎没有回答我的问题，所以我希望有人可以为我阐明这一点。

这是代码：

```
$('.rejection_toggle').button().click(function(event) {
 var $dialog = $('<div />', {
   text: Drupal.t('Are you sure you want to reject this form? If so, then please leave a comment as to why you are rejecting it.')
    })
 var $button = $(this);
 $('body').append($dialog);
 $dialog.dialog({
  title: Drupal.t('Reject this form?'),
  buttons: {
      'Reject': function (event) {
        var $submitID = $button.attr('id').replace('rejection-toggle', 'approval-buttons-reject'),
        $submitButton = $('#' + $submitID);

        $submitButton.click();
        $dialog.dialog('close');
      },
      'Cancel': function (event) {
        $dialog.dialog('close');
      }
    }
  });
  return false;
}); 
```

那么我将如何在按钮之前插入一个 textarea 呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:17:36.190

好的，我想通了。我需要补充：

```
var textArea = $('<textarea style="width:100%" />'); 
$dialog.append(textArea); 
```

在 var $dialog 行之后。

现在我需要弄清楚如何将输入返回到 Drupal。

# symfony - 将对象保存在与另一个相关的表中

> ID：14130980
> 
> 赞同：1
> 
> 时间：2013-01-02T23:38:35.750
> 
> 标签：symfony, doctrine

当单元格与另一个表相关时，如何创建新对象？就我而言，存在一个包含状态的表，例如 id=1,state=active;id=2,state=inactive。

我的实体/States.php

```
class States
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $id;
.... 
```

实体/用户.php

```
 ....
 /**
 * Set state
 *
 * @param \Frontend\AccountBundle\Entity\States $state
 * @return User
 */
public function setState(\Frontend\AccountBundle\Entity\States $state = null)
{
    $this->state = $state;

    return $this;
} 
```

我的帐户控制器：

```
....
$user = new User();
$em = $this->get('doctrine')->getEntityManager();
$state = $this->getDoctrine()->getRepository('FrontendAccountBundle:States')->find(1);

$user->setEmail($formData->getEmail());
$user->setStateId(1);
$em->persist($user);
$em->flush(); 
```

这是行不通的，而且方法很复杂：[http](http://symfony.com/doc/current/book/doctrine.html#relationship-mapping-metadata) ://symfony.com/doc/current/book/doctrine.html#relationship-mapping-metadata 。在 symfony1.4 中这太容易了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:49:01.580

您的`User`实体有一个方法`setState()`，它采用单个参数`$state`. 该参数必须是类型`\Frontend\AccountBundle\Entity\States`。

在您的控制器中，您可以通过以下调用获取该对象：

```
$state = $this->getDoctrine()->getRepository('FrontendAccountBundle:States')->find(1); 
```

所以当你去设置用户的状态时，你不需要为 ID 操心。相反，只需直接设置状态，Doctrine 会处理其余的：

```
$user->setState($state); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-14T14:57:33.747

这个解决方案对我有用： [https ://stackoverflow.com/a/14131067/2400373](https://stackoverflow.com/a/14131067/2400373)

但在 Symfony 4 中更改以下行`getRepository`：

```
$role = $this->getDoctrine()
                ->getRepository(Role::class)
                ->find(1);
$usuario->setRole($role); 
```

# ruby-on-rails - 使用rails同时批量分配多个自连接的新记录

> ID：14130986
> 
> 赞同：1
> 
> 时间：2013-01-02T23:39:56.927
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-3.2

我有一个 javascript 表单，它允许用户在父对象下创建类别层次结构。

因此，层次结构是使用自引用连接创建的：

```
class DefaultCategory < ActiveRecord::Base
  belongs_to :client
  belongs_to :parent, :class_name => "DefaultCategory", :inverse_of => :children
  has_many :children, :class_name => "DefaultCategory", :inverse_of => :parent
end 
```

提交此表单后，我希望正确填充“parent_id”字段，但是父级也可能是新记录，因此还没有 ID。

到目前为止，我的尝试看起来像这样曾经被解析为参数：

```
{"default_categories_attributes"=>
  {"new_category_1"=>
    {"id"=>"", "parent_id"=>"", "name"=>"New Category 1"},
   "new_category_2"=>
    {"id"=>"", "parent_id"=>"new_category_1", "name"=>"New Category 2"},
   "new_category_3"=>
    {"id"=>"", "parent_id"=>"new_category_2", "name"=>"New Category 3 "},
   "new_category_4"=>
    {"id"=>"", "parent_id"=>"new_category_3", "name"=>"New Category 4"}
  }
} 
```

批量分配是否可以正确创建这些新记录并相互引用？可能通过将每个子类别嵌套到其父项的“children_attributes”中并以某种方式让顶级关联 ID 向下复制？

# sql - DELETE 查询需要很长时间才能执行 - 如何优化？

> ID：14130989
> 
> 赞同：1
> 
> 时间：2013-01-02T23:40:30.220
> 
> 标签：sql, sql-server, query-optimization

> **可能重复：**
> [在具有聚集索引的表中删除命令太慢](https://stackoverflow.com/questions/914637/delete-command-is-too-slow-in-a-table-with-clustered-index)

我`DELETE`在我的 SQL Server 2005 数据库上运行以下查询：

```
DELETE
    pa
FROM
    dbo.ProductAttribute pa
INNER JOIN
    dbo.Product p ON pa.ProductID = p.ProductID
INNER JOIN
    @UpdatedProducts up ON p.ProductID = up.ProductId
LEFT JOIN
    dbo.ProductOption pos ON pa.ProductOptionID = pos.StartProductOptionId
LEFT JOIN
    dbo.ProductOption pof ON pa.ProductOptionID = pof.FinishProductOptionId
WHERE
    p.ProductTypeID = 1
AND
    pos.StartProductOptionId IS NULL
AND
    pof.FinishProductOptionId IS NULL 
```

对我的数据集执行此查询需要很长时间（约 18 分钟）。

这里有一些上下文：

*   `@UpdatedProducts`是一个具有 ~90K 行的表变量
*   我加入的所有列都已编入索引
*   该`DELETE`查询正在影响约 3K 行

以下是我迄今为止的发现：

*   替换`@UpdatedProducts`为临时表（由于它的大小）——这没什么区别。
*   当我将查询转换为 a`SELECT`时，它运行得非常快（几秒钟）。所以我不确定 my 是否有问题，因为大概这在执行or`JOIN`时会以相同的方式运行？`SELECT``DELETE`
*   为了`FK`让`DELETE`_ `dbo.ProductOption`_ `dbo.ProductAttribute`_ `IS NULL`_ `WHERE`_检查）。
*   我查看了查询计划，最显着的成本是“Clustered Index Delete”，成本为 59%——大多数其他步骤的成本在 0%-3% 之间。

关于如何加快此查询的任何建议？

# php - 数据包和功能冲突

> ID：14130993
> 
> 赞同：-3
> 
> 时间：2013-01-02T23:40:36.173
> 
> 标签：php

我回来了，这次在玩游戏时遇到了一个问题。所以我正在追踪一些数据包，并在我的来源上复制了一份。所以，函数：

```
function handleBakeryStateUpdate( $data, $str, $clientid )
{
    $client    = $this->clients[ $clientid ]; //$client SHOULD ALWAYS BE A MEMBER OF THE CLIENT CLASS!
    $this->sendToRoom( $client->extRoomID, "%xt%barsu%" . $client->ID . "%"{'CurrentStation':'IngredientsStation','IngredientsStation':[{'IngredientType':'Eggs','TotalRequired':1,'CurrentCount':0},{'IngredientType':'Milk','TotalRequired':1,'CurrentCount':0},{'IngredientType':'Hay','TotalRequired':1,'CurrentCount':0},{'IngredientType':'Flour','TotalRequired':1,'CurrentCount':0}],'CheerStation':{'CheerCapacity':7,'CurrentCheerCount':7,'Emote':7},'MultiplierStation':{'Counter':-1,'Multiplier':'Small'}}"%" );
} 
```

该数据包应该发送一堆东西，并且在该数据包中它具有{和}。而且，另一个问题是该函数也有 { 和 }。所以它给了我：

```
PHP Parse error:  syntax error, unexpected '{' in ... 
```

我怎样才能解决这个问题？

更多信息：它发送的数据包是这样的：

```
{'CurrentStation':'IngredientsStation','IngredientsStation':[{'IngredientType':'Eggs','TotalRequired':1,'CurrentCount':0},{'IngredientType':'Milk','TotalRequired':1,'CurrentCount':0},{'IngredientType':'Hay','TotalRequired':1,'CurrentCount':0},{'IngredientType':'Flour','TotalRequired':1,'CurrentCount':0}],'CheerStation':{'CheerCapacity':7,'CurrentCheerCount':7,'Emote':7},'MultiplierStation':{'Counter':-1,'Multiplier':'Small'}} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:49:16.647

如果您实际上只是想将 JSON 作为封装在百分比符号中的字符串传递，那么：

```
function handleBakeryStateUpdate( $data, $str, $clientid )
{
    $client    = $this->clients[ $clientid ]; //$client SHOULD ALWAYS BE A MEMBER OF THE CLIENT CLASS!
    $this->sendToRoom( $client->extRoomID, "%xt%barsu%" . $client->ID . "%" . "{'CurrentStation':'IngredientsStation','IngredientsStation':[{'IngredientType':'Eggs','TotalRequired':1,'CurrentCount':0},{'IngredientType':'Milk','TotalRequired':1,'CurrentCount':0},{'IngredientType':'Hay','TotalRequired':1,'CurrentCount':0},{'IngredientType':'Flour','TotalRequired':1,'CurrentCount':0}],'CheerStation':{'CheerCapacity':7,'CurrentCheerCount':7,'Emote':7},'MultiplierStation':{'Counter':-1,'Multiplier':'Small'}}" . "%" );
} 
```

我不知何故怀疑这实际上是你想要的，但除非你表现出`sendToRoom`期望的东西，否则这是我能给出的最佳答案。

另请注意，以您的方式使用“数据包”非常令人困惑。您实际上只是将字符串传递给函数。数据包一词的使用令人困惑，因为它在网络方面具有非常特定的含义。