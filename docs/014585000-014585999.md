# StackOverflow 问答 14585000-14585999

# php - 我的移动站点可以将坐标发送到手机的导航应用程序吗？

> ID：14585003
> 
> 赞同：0
> 
> 时间：2013-01-29T14:17:11.537
> 
> 标签：php, mobile, navigation

我最近听说一个移动网站可以将坐标推送到手机的导航应用程序（或者至少让它询问用户是否想用他们的导航应用程序打开它）。我做了一些谷歌搜索无济于事。我不确定我是否只是没有使用正确的关键字或什么，但我找不到此信息。有人知道这个能力吗？如果是这样，你能给出一些链接或例子吗？提前致谢。

**编辑以便更好地理解**

我正在寻找一种将位置推送到导航应用程序的方法，以便用户可以获得行车路线。所以网站会有一个商店的位置，用户点击商店，它会询问他们是否要打开他们的导航应用程序以获取那里的行车路线，他们按下是并被带到带有商店位置设置的导航应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:45:32.330

这样做的唯一方法是将数据传递给 Google 或 iOS 地图 - 可能其他一些导航应用程序正在提供一些 url 方案，但您无法检查是否从浏览器级别安装了此类应用程序。在浏览器内调用 Google/iOS 地图 url 时，Android/iOS 将打开正确的应用程序。

对于 Android 和 iOS <= 5 手机（也适用于台式机），您只需打开 URL：

```
// for example from JS
location.href = "https://maps.google.com/maps?saddr=Current+Location&daddr="+destination;

// or from PHP
header('Location: https://maps.google.com/maps?saddr=Current+Location&daddr='.$destination); 
```

对于 iOS6，您可以使用类似的地址，但将域从 更改`maps.google.com`为`maps.apple.com`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:21:08.880

您正在寻找[地理位置](http://dev.w3.org/geo/api/spec-source.html)

> Geolocation API 定义了一个高级接口，指向仅与托管实现的设备相关联的位置信息，例如纬度和经度。API 本身与底层位置信息源无关。位置信息的常见来源包括全球定位系统 (GPS) 和从网络信号（如 IP 地址、RFID、WiFi 和蓝牙 MAC 地址、GSM/CDMA 小区 ID）以及用户输入推断的位置。不保证 API 返回设备的实际位置。

# web-services - 如何在服务器端调试 SSL/TLS

> ID：14585004
> 
> 赞同：1
> 
> 时间：2013-01-29T14:17:12.920
> 
> 标签：web-services, iis, ssl, encryption

我有一个使用 ssl/tls 协议连接到服务器的应用程序，我想知道的是它选择了哪个密码来进行握手，我的应用程序服务器在 IIS win2008r2 上，我可以告诉它连接到哪个地址。

我知道存在这样的解决方案来检查服务器允许使用哪些类型的密码（如 sslscan 或 ssllabs 网站），但我需要它反过来。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:38:19.377

您可以使用[wireshark](http://www.wireshark.org)查看请求流，以查看客户端和服务器协商的密码。我不认为此时握手是加密的，因此您甚至不需要使用 Web 服务器的私钥配置wireshark 来解密请求流。

# php - PHP move_uploaded_file 函数很挑剔

> ID：14585008
> 
> 赞同：1
> 
> 时间：2013-01-29T14:17:28.630
> 
> 标签：php, file-upload, file-io

我的网站上的 move_uploaded_file 功能有问题。

整个想法是在表单中插入项目的标题、描述和屏幕截图。一切正常。它将标题和描述以及 id 和创建日期保存在 mysql 数据库中，并将文件移动到服务器上的文件夹中。

然而，问题是有些文件被传输到文件夹，而有些则没有。问题似乎出在文件中，但我似乎无法弄清楚问题所在。

这不是文件大小；我有 5/6MB 的文件放在文件夹中没有任何问题，我有大约 3MB 的文件。扩展名也不是问题，它们都是.jpg。

.jpg 文件是否还有其他要求才能上传？

我 99% 确定问题不在我的代码中，因为它可以毫无问题地上传一些文件，但无论如何这是我的代码。

HTML部分：

```
<form action="" method="post" enctype="multipart/form-data">
    <h2>Title*</h2>
    <input type="text" id="title" name="title">
    <h2>Description*</h2>
    <textarea id="descr" name="descr" cols="40" rows="4"></textarea>
    <h2>Add file*</h2>
    <input type="file" id="file" name="file">
    <h2><input type="submit" id="submit" name="submit" value="Uploaden"></h2>
    <p id="requirements">Fields marked with * are required.</p>
</form> 
```

这是 PHP 部分：

```
if (isset($_POST['submit'])) {

$destination = "../uploadedfiles/" . basename($_FILES['file']['name']);

if (move_uploaded_file($_FILES['file']['tmp_name'], $destination)) {
    echo '<p id="succes">File has been uploaded</p>';
} else {
    echo '<p id="error">File has not been uploaded</p>';
}

$title = $_POST['title'];
$descr = $_POST['descr'];
$name = ($_FILES['file']['name']);

include "../connect/connect.php";

if ($title == "" || $descr == "") {
    echo '<p id="error">Fill in the required fields</p>';
} else {

    $query = "INSERT INTO file(title, descr, name, created) VALUES ('{$title}', '{$descr}', '{$name}', NOW())";

    $upload = $connect->query($query);

    if ($upload) {
        echo '<p id="succes">Info is stored in database</p>';
    } else {
        echo '<p id=error>Failed to store info in database</p>';
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:34:28.633

一堆东​​西可能会出错。move_uploaded_file 非常挑剔，有时它的行为与记录的方式不同。老实说，我曾经遇到过问题，如果正确实施，在大多数情况下复制存档相同的结果。

*   有报告称单独的文件名会引起麻烦。$destination 上的 249 个字符似乎是限制。
*   不仅要设置upload_max_filesize，还要设置post_max_size
*   utf-8 名称可能是个问题
*   如果您遇到上传文件似乎无法访问的问题，请尝试使用 copy() 代替。有报道说上传后找不到文件，move_uploaded_file只是限制路径超过复制，如果你不输入任何用户var，结果是一样的。

# php - PHP Smarty 现在函数返回随机日期

> ID：14585013
> 
> 赞同：2
> 
> 时间：2013-01-29T14:17:39.120
> 
> 标签：php, date, smarty, template-engine, smarty2

我正在使用 Smarty 2.6.9，我发现我遇到了以下代码块的问题。

```
Copyright &copy; {$smarty.now|date_format:'%Y'} CRMPicco. All rights reserved 
```

Smarty 生成的日期似乎是随机的，有时是 8780，有时是 1872……正如我所说，完全随机。

我发现这似乎也是一个环境问题，因为它在我的开发环境（CentOS 5.6）中工作，但在测试环境中被破坏。现在，我意识到这将指向测试环境的配置问题，但我在整个代码库中都使用 PHP 日期函数，如果它不起作用，我很快就会知道。

我很感激我可能会得到类似“如果 PHP 日期函数有效，然后将其发送到您的 Smarty 模板”的建议，但 Smarty 中也必须有办法做到这一点？

这是 Smarty 中的错误还是配置问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:25:43.747

这是一个众所周知的[配置问题](http://www.smarty.net/forums/viewtopic.php?p=63047)，由[`$smarty->plugins_dir`](http://www.smarty.net/docsv2/en/variable.plugins.dir.tpl)未正确设置（或其他阻止访问该目录的问题）引起。

`date_format`是 Smarty[插件](http://www.smarty.net/docsv2/en/language.modifier.date.format)的名称，但它也是 PHP[函数](http://php.net/manual/en/function.date-format.php)的名称。如果 Smarty 找不到它的插件，它会回退到调用 PHP 函数，该函数需要一组完全不同的参数。由此产生的破损就是你所看到的。

# c# - 尽可能快地并行处理 webrequest 项目列表

> ID：14585016
> 
> 赞同：1
> 
> 时间：2013-01-29T14:17:56.123
> 
> 标签：c#, asynchronous, httpwebrequest, task-parallel-library, parallel-extensions

我有一批要获取的网址。该列表包含具有不同域名的 url（超过 50.000 个），但所有域都使用相同的负载平衡服务器 ip。

对于每个 url，我想记录其结果代码、获取持续时间以及内容的哈希值及其重定向标头。

当前方法每秒获取大约 10 次，响应时间大约为半秒。

我怎样才能更快地执行以下操作？

我目前有以下代码结构：

```
Parallel.ForEach(domainnames, ProcessItem); 
```

`ProcessItem`是基于以下几点：

```
static void Fetch2(Uri url)
{
    HttpWebResponse response;
    try
    {
        var request = (HttpWebRequest)WebRequest.Create(url);
        request.AllowAutoRedirect = false;
        response = (HttpWebResponse)request.GetResponse())
    }
    catch (WebException ex)
    {
        response = ex.Response as HttpWebResponse;
    }

    if (response == null) return;

    using (response)
    {
        // Process response.....
    }
} 
```

我应用了以下配置：

```
<system.net>
    <connectionManagement>
        <add address="*" maxconnection="100" />
    </connectionManagement>
</system.net> 
```

我尝试了以下方法：

*   通过指定新的 ParallelOptions { MaxDegreeOfParallelism = 25 } 来限制 Parallel.ForEach，因为我认为我可能正在处理很多 Web 请求，但即使降低它更多也不会提高性能。
*   应用`async`with`Task.WaitAll(Task[])`但这会导致很多错误，因为所有任务的创建速度都*非常*快，但几乎所有任务都会导致连接错误。

有趣的观察是：

*   我的互联网网络连接并没有真正处于负载状态，因此没有拥塞
*   cpu、内存和 IO 也没有真正测试，但 IO 显示下降。

# r - 如何将 shapefile 裁剪为 R 中的特定集？

> ID：14585017
> 
> 赞同：0
> 
> 时间：2013-01-29T14:17:57.247
> 
> 标签：r, shapefile

我有一个英国的 shapefile，但我只想要英格兰和威尔士。这是我到目前为止使用的代码：

```
RG <- readOGR("filepath", "filename")
UK <- grep("England", "Wales", RG$NAME_1)
RG_EW <- RG[UK]
plot(RG_EW) 
```

但我最终还是选择了整个英国。我正在使用从[http://www.gadm.org/下载的 shapefile](http://www.gadm.org/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:27:43.010

如果名称是明确的并且您只需要选择两个，我将只使用单行而不是使用`grep`：

```
e.w.shp <- uk.shp[uk.shp$NAME_1 == "England" | uk.shp$NAME_1 == "Wales", ] 
```

结果如下所示：

```
> str(e.w.shp)
Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots
  ..@ data       :'data.frame': 134 obs. of  11 variables:
  .. ..$ ID_0     : int [1:134] 239 239 239 239 239 239 239 239 239 239 ...
  .. ..$ ISO      : chr [1:134] "GBR" "GBR" "GBR" "GBR" ...
  .. ..$ NAME_0   : chr [1:134] "United Kingdom" "United Kingdom" "United Kingdom" "United Kingdom" ...
  .. ..$ ID_1     : int [1:134] 1 1 1 1 1 1 1 1 1 1 ...
  .. ..$ NAME_1   : chr [1:134] "England" "England" "England" "England" ...
  .. ..$ ID_2     : int [1:134] 1 2 3 4 5 6 7 8 9 10 ...
  .. ..$ NAME_2   : chr [1:134] "Barking and Dagenham" "Bath and North East Somerset" "Bedfordshire" "Berkshire" ...
  .. ..$ NL_NAME_2: chr [1:134] NA NA NA NA ...
  .. ..$ VARNAME_2: chr [1:134] NA NA NA NA ...
  .. ..$ TYPE_2   : chr [1:134] "London Borough" "Unitary Authority" "Administrative County" "County" ...
  .. ..$ ENGTYPE_2: chr [1:134] "London Borough" "Unitary Authority" "Administrative County" "County" ...
  ..@ polygons   :List of 134 
```

因此，使用而不是基本图形的完整示例`ggplot2`可能会是这样的：

```
library(rgdal)
library(ggplot2)
library(rgeos)

shape.dir <- "your_directory_name" # use your directory name here
uk.shp <- readOGR(shape.dir, layer = "GBR_adm2")
e.w.shp <- uk.shp[uk.shp$NAME_1 == "England" | uk.shp$NAME_1 == "Wales", ]
e.w.df <- fortify(e.w.shp, region = "ID_2") # convert to data frame for ggplot

ggplot(e.w.df, aes(x = long, y = lat, group = group)) +
    geom_polygon(colour = "black", fill = "grey80", size = 0.5) +
    theme() 
```

![截屏](../Images/a95e7c5e8f8a8babd6407656d882cd1f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:33:25.487

首先，你的`grep`电话不正确。如果您正在寻找包含“England”或“Wales”的字符串，您应该这样做：

```
UK <- grep("(England|Wales)", RG$NAME_1) 
```

然后您可以使用以下方法对数据进行子集化：

```
RG_EW <- RG[UK,] 
```

你终于得到：

```
plot(RG_EW) 
```

![在此处输入图像描述](../Images/b46a9910009af6ecf26fc3dfe71f4f57.png)

# qt - 从布局 QT 中删除 qwidget

> ID：14585018
> 
> 赞同：2
> 
> 时间：2013-01-29T14:18:03.737
> 
> 标签：qt, layout, qwidget

我在另一个 qwidget（我们将其称为 qwidget2）的布局内有一个 qwidget（我们将其称为 qwidget1），我想删除 qwidget2 布局中的所有内容：我想清除布局，所以里面什么都没有了..到目前为止，我能做的就是完全删除 qwidget2：

```
void QCell::deleteMyChildren(){
   delete this;
} 
```

但它会删除 qwidget2 本身。这不是我想要的。请帮我删除布局内的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:31:33.347

只需在布局中的项目内循环并从布局中删除项目，然后删除项目：

```
void QCell::deleteMyChildren() {
    while (count() > 0) {
        QLayoutItem * item = takeAt(0);
        delete item;
    }
} 
```

# android - Ksoap2 .NET 网络服务连接

> ID：14585019
> 
> 赞同：0
> 
> 时间：2013-01-29T14:18:04.640
> 
> 标签：android, .net, web-services, ksoap2, android-ksoap2

[http://i.stack.imgur.com/pK9rm.png](http://i.stack.imgur.com/pK9rm.png) [http://i.stack.imgur.com/27Qj0.png](http://i.stack.imgur.com/27Qj0.png)

我想使用 ksoap2 连接 Web 服务，我有一个工作示例，但是如何集成我的应用程序？

公共类 WebServiceDemoActivity 扩展 Activity {

```
 private static String SOAP_ACTION = "http://tempuri.org/UrunleriListele";
  private static String NAMESPACE = "http://tempuri.org/";
  private static String METHOD_NAME = "UrunleriListele";
  private static String URL = "http://services.annebebekavm.com/Service1.asmx?WSDL";

  Button btnFar,btnCel,btnClear;
  EditText txtFar,txtCel;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnFar = (Button)findViewById(R.id.btnFar);

    txtFar = (EditText)findViewById(R.id.txtFar);

    btnFar.setOnClickListener(new View.OnClickListener()
    {
              @Override
              public void onClick(View v)
              {

              SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

              request.addProperty("Fahrenheit",txtFar.getText().toString());

              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

              envelope.setOutputSoapObject(request);
              envelope.dotNet = true;

              try {
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                    androidHttpTransport.call(SOAP_ACTION, envelope);

                    SoapObject result = (SoapObject)envelope.bodyIn;

                    if(result != null)
                    {

                          txtFar.setText(result.getProperty(0).toString());
                    }
                    else
                    {
                          Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
                    }
              } catch (Exception e) {
                    e.printStackTrace();
              }
              }
        });

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:06:21.127

Please reconsider to use another client

[http://code.google.com/p/android-ws-client/](http://code.google.com/p/android-ws-client/)

you can create all classe what you need to. by one application copy libs to your project with your generate classes

Here is example it look really simple to

```
 Service servis = new Service();
    ServiceSoap soap12 = servis.getServiceSoap12();
    LoginParams inParams = new LoginParams();
    inParams.setLogin("user");
    inParams.setPassword("pass");
    inParams.setStrategy(LoginStrategy.NOHASHPASS); // even enums are supported
    LoginState result = soap.authorize(inParams);

    result.isLogin(); // boolean if is succesfull 
```

# android - 无法让我的 Android 应用程序连接到服务器

> ID：14585021
> 
> 赞同：0
> 
> 时间：2013-01-29T14:18:07.823
> 
> 标签：android, mysql, database, json, mobile-application

我已经在我的应用程序上设置了一个登录屏幕（现在就是这样）。它有一个用户名和密码字段以及一个登录按钮。当用户输入他们的详细信息并按下登录时，它会检查用户是否存在于我的 MySQL 数据库中并且详细信息是否正确，然后显示一条 Toast 消息，如果是，则显示“成功”，如果不存在或存在则显示“无效...”是与服务器的错误连接，然后显示“连接错误”。

我不断收到连接错误消息，我不知道为什么。我已经在 php 文件中测试了数据库连接，它工作正常，对数据库的查询也是如此，所以我假设问题出在我的 android 代码中。

这是您的整个代码块（隐藏了我的域）

```
 package uk.co.mypackage.mypackagename;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

import android.os.Bundle;
import android.app.Activity;
import android.content.SharedPreferences;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener{
    EditText etUser, etPass;
    Button bLogin;

//Create String variables that have input assigned to them
String username, password;

//Create an HTTPClient as form container
HttpClient httpClient;

//User HTTP Post method
HttpPost httppost;

//Create an array list for the input data to be sent
ArrayList<NameValuePair> nameValuePairs;

//Create an HTTP Response and HTTP Entity
HttpResponse response;
HttpEntity entity;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    initialise();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;

}

private void initialise() {
    etUser = (EditText) findViewById(R.id.etUser);
    etPass = (EditText) findViewById(R.id.etPass);
    bLogin = (Button) findViewById(R.id.bSubmit);
    //Now to set an OnClickListener
    bLogin.setOnClickListener(this);
}

@Override
public void onClick(View v) {

    //Create New default HTTPClient
    httpClient = new DefaultHttpClient();

    //Create new HTTP POST with URL to PHP file as parameter
    httppost = new HttpPost("http://www.mydomain.co.uk/android_api/index.php"); 

    //Assign input text to string
    username = etUser.getText().toString();
    password = etPass.getText().toString();

    try{
        //Create New Array List
        nameValuePairs = new ArrayList<NameValuePair>();

        //Place them in an array list
        nameValuePairs.add(new BasicNameValuePair("username", username));
        nameValuePairs.add(new BasicNameValuePair("password", password));

        //Add array list to HTTP POST
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        //assign executed form container to response
        response = httpClient.execute(httppost);

        //check status code, need to check status code 200
        if(response.getStatusLine().getStatusCode()== 200){

            //assign response entity to http entity
            entity = response.getEntity();

            //check if entity is not null
            if(entity != null){

                //Create new input stream with received data assigned
                InputStream instream = entity.getContent();

                //Create new JSON object. assign converted data as parameter
                JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                //assign JSON responses to local string
                String retUser = jsonResponse.getString("user");//MySQL table field
                String retPass = jsonResponse.getString("pass");//MySQL table field

                //Validate login
                if(username.equals(retUser)&& password.equals(retPass)){

                    //Create a new shared preference by getting the preference
                    SharedPreferences sp = getSharedPreferences("logindetails", 0);

                    //Edit the shared preferences
                    SharedPreferences.Editor spedit = sp.edit();

                    //Put the login details as string
                    spedit.putString("user", username);
                    spedit.putString("pass", password);//May not need to store password

                    //close the editor
                    spedit.commit();

                    //Display a Toast saying login was a success
                    Toast.makeText(getBaseContext(), "SUCCESS!", Toast.LENGTH_SHORT).show();

                } else {
                    //Display a Toast status saying it failed
                    Toast.makeText(getBaseContext(), "Invalid Login Details", Toast.LENGTH_SHORT).show();
                }

        }

    } 
    }   catch(Exception e){
        e.printStackTrace();
        //Display Toast when there is a connection error
        Toast.makeText(getBaseContext(), "Connection Error", Toast.LENGTH_SHORT).show();
    }

} //End OnClick()

 private static String convertStreamToString(InputStream is) {
        /*
         * To convert the InputStream to String we use the BufferedReader.readLine()
         * method. We iterate until the BufferedReader return null which means
         * there's no more data to read. Each line will appended to a StringBuilder
         * and returned as String.
         */
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }//End ConvertStreamToString

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:08:39.087

在发送带有用户名和密码的发布请求时，会发送一条警告消息未定义变量：num。包含非 json 元素的响应会导致 json 对象解析出错并返回 null 对象。

# android - 创建代码以解锁设备的指南

> ID：14585023
> 
> 赞同：1
> 
> 时间：2013-01-29T14:18:12.003
> 
> 标签：android, locking, android-sensors, unlock

我正在开发一个基于传感器的应用程序来使用传感器解锁和锁定设备。我可以使用设备管理员 API 锁定设备。

但是，不幸的是，我找不到任何代码来以编程方式解锁屏幕。我也搜索过 Google 和其他 Android 开发网站。然后，我也没有找到任何解决方案。

尝试了几种技巧，例如唤醒锁，但它不适用于某些设备并消耗电池然后，我尝试了 KeyguardManager，但它会删除锁屏但不会解锁设备

我正在尝试使用 Receiver 来接收屏幕开/关事件，但我不知道如何实现

希望，任何人都可以帮助我

我已经进行了彻底的搜索，但没有希望

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:24:37.920

我认为[这篇文章](https://stackoverflow.com/questions/3621599/wake-android-device-up/4541982#4541982)将解决您的问题。您需要使用 PowerManager。

# ruby-on-rails - 所有的任务都是通过 Ruby/Rails 中的 setter 完成的吗？

> ID：14585024
> 
> 赞同：0
> 
> 时间：2013-01-29T14:18:12.613
> 
> 标签：ruby-on-rails

我有一个`belongs_to`与另一个模型有关系的 Rails 模型。

```
class Foo < ActiveRecord::Base
  belongs_to :bar
end 
```

每次在 a`bar`上设置/更新时，`foo`我都想“拦截”对该更改的修改并在`foo`.

我的猜测是我可以覆盖 setter`bar`并做我想做的事。但是，由于我对 Ruby/Rails 比较陌生，我担心的是有一些“神奇”的方式`bar`可以设置在`foo`不通过我的设置器的情况下（可能是批量分配、更新/更新所有调用， ETC）。

什么是最安全的方法来确保任何更改`bar`运行一个响应该更改的代码块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:24:27.400

根据您的需要，您可以在 bar 上使用回调来在 foo.xml 上执行特定代码。

您需要的所有文档都在这里[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

例如 ：

```
class Bar < ActiverRecord::Base
    has_many :foos
    before_save :do_something

    private
        def do_something
            self.foos.each {|f| f.update_attribute('bar_has_changed', true) }
        end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:32:15.503

覆盖 setter`bar`不是一个好主意。

一个例子：

```
class Foo < ActiveRecord::Base
  belongs_to :bar

  def bar=(value)
    # do nothing
  end
end

f = Foo.create
b = Bar.create
f.update_attributes(bar_id: b.id)
f.bar
# => #<Bar id: 1, ... > 
```

尽管`bar`setter 已被覆盖，因此它什么也不做，但您可以很容易地绕过它。对于您实现的任何自定义更新也是如此`Foo`：在这种情况下，更新关联时不会调用它。

改用回调。

# javascript - Javascript 适用于 Firefox，但不适用于 Chrome 或 IE

> ID：14585025
> 
> 赞同：1
> 
> 时间：2013-01-29T14:18:13.347
> 
> 标签：javascript, internet-explorer, google-chrome, firefox, spiceworks

我正在为 Spiceworks 开发一个重新格式化文本块的插件。不幸的是，它只适用于 Firefox，不适用于 Chrome 或 IE。

```
plugin.includeStyles();
function log(msg) {
  throw new Error(msg);
}
SPICEWORKS.app.helpdesk.ticket.ready(function(){
  console.log('###Start function###');
  console.log('###URL###');
  var url = jQuery("li.custom")[2].lastElementChild.firstChild.wholeText;

  //Check to see if category is project.
  for(var i=0;i<jQuery("li.custom").length;i++)
  {
    if (jQuery("li.custom")[i].lastElementChild.firstChild.wholeText == "Project")
    {
        for(var u=0;u<jQuery("li.custom").length;u++)
        {
          if (jQuery("li.custom")[u].lastElementChild.firstChild.wholeText.contains("http"))
          {
            jQuery("li.custom")[u].innerHTML = '<a href="'+url+'" target="_blank"><span class="projectLink">Project Link</span></a>';
          }
       }
    }
  }
});​ 
```

Chrome 显示第 9 行出现错误“Uncaught TypeError: Cannot read property 'lastElementChild' of undefined”（var url = ...）[这是比较不同浏览器显示的屏幕截图。](http://i.imgur.com/1ADqsRP.png)

我该怎么做才能使不同浏览器的显示保持一致？

# c++ - MATLAB 并行工具箱，remoteParallelFunction：函数评估期间的 RUNTIME_ERROR

> ID：14585027
> 
> 赞同：2
> 
> 时间：2013-01-29T14:18:16.150
> 
> 标签：c++, matlab

我将并行计算工具箱 (PCT) 与 MATLAB 2012b 中的 Simbiology 工具箱结合使用。当我使用远程工作人员池而不是本地工作人员池运行脚本时，我收到一条间歇性错误消息：

捕获`std::exception`的异常消息是：

```
vector::_M_range_check

Error using parallel_function (line 589)
Error in remote execution of remoteParallelFunction : RUNTIME_ERROR

Error in PSOFit (line 486)
                        parfor ns = 1:r.NumSwp

Error in PSOopt_driver (line 209)
        PSOFit(ObjFuncName,LB,UB,PSOopts); 
```

当我注释掉对函数 sbiosimulate （用于模型评估的 SimBiology 函数）的调用时，不会发生错误。

我有几个想法：

*   我引入了某种竞争条件，这会导致访问模型变量时出现问题（这在 MATLAB 中可能吗？）
*   simbiology 中的模型编译有时但并不总是与 PCT 兼容，而且我遇到了某种极端情况
*   由于 sbiosimulate 评估已编译的 C++ 代码，因此对于某些输入，源中可能存在生成异常的错误

我知道[这一点](http://www.mathworks.com/support/solutions/en/data/1-6BT0PX/?solution=1-6BT0PX)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:11:07.440

我是 SimBiology 的开发人员。我相信这是在 R2012a 版本中引入 SimBiology 的 C++ 代码的错误。当模拟结束而没有产生任何模拟结果时会触发该错误。当模型配置为仅报告特定时间（使用 OutputTimes 选项）并且模拟配置为在特定数量的实时后结束（使用 MaximumWallClock 选项）时，有时会发生这种情况。基本上，模拟在有机会记录第一个输出时间之前“超时”。

解决此问题的一种方法是始终在 OutputTimes 中包含时间 0。在评估 MaximumWallClock 标准之前，将始终记录此时间，以防止触发错误。我也在直接联系这个用户，并将在未来的版本中修复这个错误。

# c# - 单例与 GetSafeUninitializedObject

> ID：14585029
> 
> 赞同：1
> 
> 时间：2013-01-29T14:18:23.440
> 
> 标签：c#, reflection, singleton, system.reflection

我遇到[了](https://stackoverflow.com/questions/995408/what-is-the-net-object-life-cycle)Marc Gravell 关于如何在不调用其构造函数的情况下创建对象的答案。有人可以确认这甚至不会绕过单例模式的完整和最佳实现（参考实现[在这里](http://csharpindepth.com/Articles/General/Singleton.aspx)。为什么？我想更具体地说，我不清楚 GetSafeUninitializedObject() 在类的构造函数上下文中的内部工作原理（静态，私人等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:27:29.427

在单例模式中，您的类型上有一个静态变量，该变量将由*类型构造函数*初始化。

通过调用`GetSafeUninitializedObject`，您只能避免在*类型构造函数***之后**调用的*实例构造*函数。

 ***例子：

```
public sealed class Singleton
{
    private static readonly Singleton instance = new Singleton();
    private static string _StaticMessage = "Type ctor;";

    private string _Message = "init; ";

    static Singleton()
    { }

    private Singleton()
    {
        _Message += "ctor; ";
    }

    public static Singleton Instance
    {
        get { return instance; }
    }

    public string Message { get { return _StaticMessage + _Message; } }
}

internal class Program
{
    private static void Main(string[] args)
    {
        var singleton = Singleton.Instance;
        // writes "Type ctor;init; ctor;"
        Console.WriteLine(singleton.Message);

        var instance = (Singleton)System.Runtime.Serialization.FormatterServices
        .GetSafeUninitializedObject(typeof(Singleton));

        // writes "Type ctor;"
        Console.WriteLine(instance.Message);
    }
} 
```

### 更新以澄清 IllidanS4 要求的类型初始化程序和静态 ctor 之间的区别

这并不真正属于上面的答案，而是属于评论中的问题：答案根本不适合简单的评论。

@IllidanS4：类型初始化器只是编写隐式静态构造函数的*快捷方式。*如果您创建一个包含两种初始化方法的类并反编译生成的程序集，您只能看到一个静态构造函数 (.cctor)，它将初始化所有变量。这两个赋值将被合并，首先调用类型初始化器，最后调用静态构造函数中的语句。

采取这个示例类：

```
internal static class C
{
    public static readonly string ByTypeCtor;
    public static readonly string ByTypeInitializer = "From type init; ";
    public static string ByBoth = "From type init; ";

    static C()
    {
        ByTypeCtor = "From static ctor; ";
        ByBoth += "From static ctor";
    }
} 
```

如果你编译它然后反编译它（例如通过使用[ILSpy](http://ilspy.net/)）你会得到以下代码：

```
internal static class C
{
    public static readonly string ByTypeCtor;
    public static readonly string ByTypeInitializer;
    public static string ByBoth;
    static C()
    {
        C.ByTypeInitializer = "From type init; ";
        C.ByBoth = "From type init; ";
        C.ByTypeCtor = "From static ctor; ";
        C.ByBoth += "From static ctor";
    }
} 
```

由于这个事实，我通常不会在声明变量时直接初始化它。相反，我总是让它们未初始化（如`ByTypeCtor`变量）并在构造函数中进行所有初始化。这只是避免了将变量初始化到类中不同位置的混乱，从而提高了可维护性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:32:32.723

正如大家所提到的，它**可以**规避和破坏您的设计模式。但是看看推荐的用法`GetSafeUninitializedObject`

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatterservices.getsafeuninitializedobject.aspx)：

> 只有当用户打算立即填充所有字段时，**才**应使用GetSafeUninitializedObject进行反序列化。它不会创建未初始化的字符串，因为创建不可变类型的空实例没有任何意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:24:00.397

*是的，在大多数*情况下，默认的 Singleton 模式**肯定**更好。您的类型的*预期*行为是必须调用它的 ctor。

 **创建一个对象*而不*调用该类型的 ctor 方法是不“正常的”，所以我个人**总是**避免使用这个解决方案，直到有**非常**充分的理由这样做。

旁注：单例模式只是一种*模式*，而不是框架行为。在我看来，在这个问题中，你混合了两个不能混合在一起的概念。

第一种情况*是一种创建对象的方式*，第二种情况是*一种架构代码的方式*。

一般规则是：不要做“奇怪的事情”（`GetSafeUninitializedObject`很奇怪），直到你真的需要这样做。继续在所有开发人员模式中共同共享，并尽可能保持简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T14:25:04.593

GetSafeUninitializedObject 方法甚至适用于具有私有构造函数的对象，因此它可以潜在地用于规避单例模式。*****

# sql-server - SQL 2 语句创建一个 3 语句，并将 2 连接在一起

> ID：14585030
> 
> 赞同：0
> 
> 时间：2013-01-29T14:18:24.190
> 
> 标签：sql-server, select, join

这是我的 SQL 语句：

```
SELECT repnr, DATEDIFF(day, MIN(start), MAX(start) +1) AS DaysTotal
FROM TBLstatus 
WHERE status IN (1, 2, 3, 4, 8, 11, 20, 7, 23)
GROUP BY repnr HAVING COUNT(*) = 2 AND MAX(Start) > GETDATE()-30

Select repnr as repnr, CONVERT(float, SUM(DATEDIFF(day, start, slut))) as extern
From TBLstatus 
where status IN (5, 15, 17)
group by repnr 
```

第一个将返回此数据：

```
repnr daystotal
1000  100
1001  90
1003  91 
```

第二个声明：

```
repnr extern
900   100
901   102
1000  21
1003  23 
```

我想要的是 repnr （这是一个 ID）匹配的地方，我想减去 to 值，所以我看起来像这样：

```
repnr result
1000  79
1003  68 
```

我如何为 MSSQL 执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:22:59.007

```
SELECT q1.repnr, q1.daystotal - q2.extern as [result]
FROM
(
SELECT repnr, DATEDIFF(day, MIN(start), MAX(start) +1) AS DaysTotal
FROM TBLstatus 
WHERE status IN (1, 2, 3, 4, 8, 11, 20, 7, 23)
GROUP BY repnr HAVING COUNT(*) = 2 AND MAX(Start) > GETDATE()-30
)q1
INNER JOIN 
(
Select repnr as repnr, CONVERT(float, SUM(DATEDIFF(day, start, slut))) as extern
From TBLstatus 
where status IN (5, 15, 17)
group by repnr
)q2 ON q1.repnr = q2.repnr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:26:59.347

将您的查询设置为子查询并加入您的密钥，您应该一切顺利。

```
select repnr, DaysTotal - extern as result from (SELECT repnr, DATEDIFF(day, MIN(start), MAX(start) +1) AS DaysTotal
FROM TBLstatus 
WHERE status IN (1, 2, 3, 4, 8, 11, 20, 7, 23)
GROUP BY repnr HAVING COUNT(*) = 2 AND MAX(Start) > GETDATE()-30) a inner join (Select repnr as repnr, CONVERT(float, SUM(DATEDIFF(day, start, slut))) as extern
From TBLstatus 
where status IN (5, 15, 17)
group by repnr) b on a.repnr = b.repnr 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:24:04.317

```
SELECT a.repnr, ABS(A.daystotal - b.extern) AS result
FROM(
SELECT repnr, DATEDIFF(day, MIN(start), MAX(start) +1) AS DaysTotal
FROM TBLstatus 
WHERE status IN (1, 2, 3, 4, 8, 11, 20, 7, 23)
GROUP BY repnr HAVING COUNT(*) = 2 AND MAX(Start) > GETDATE()-30
)A
JOIN(
Select repnr as repnr, CONVERT(float, SUM(DATEDIFF(day, start, slut))) as extern
From TBLstatus 
where status IN (5, 15, 17)
group by repnr
)B
ON A.repnr = b.repnr 
```

# objective-c - 具有跨互联网双向文件传输的 Objective-C 应用程序

> ID：14585032
> 
> 赞同：1
> 
> 时间：2013-01-29T14:18:35.107
> 
> 标签：objective-c, p2p, file-transfer

基本上，我正在构建一个避免云存储的*Dropbox克隆。*好的，我不是在构建它，而是试图估计所需的工作量。

在 SO 上阅读了不同的 p2p 选项，但实际上，关于集中式 p2p 连接以及如何从头开始构建它们的主题很少。我什至不确定将其称为*p2p*是否合适。

从 ActionScript 背景中，我知道它可以使用提供的集中式服务器 (RTMFP) 在全球 2 个不同的客户端之间建立 UDP 连接。它是高度抽象的，甚至不需要打开端口，客户端也不知道彼此的 IP。因此，给定选项的子集非常有限。

无论如何，我需要创建一个服务器端应用程序和一个客户端应用程序，它们将尝试在连接的客户端之间同步文件。我读过套接字连接用于文件传输。这里的问题是：

*   **如何配对客户端**？
*   **服务器应该做什么**？
*   **客户应该怎么做**？

谢谢你。

**注意**

建立连接和文件同步解决方案是不可能的。

# android - PreferenceCategory 之间的分隔符

> ID：14585033
> 
> 赞同：3
> 
> 时间：2013-01-29T14:18:36.060
> 
> 标签：android, listview

我知道如何更改标题中的颜色`PreferenceCategory`。

```
public class PreferenceCategory1 extends PreferenceCategory {
    public PreferenceCategory1(Context context) {
        super(context);
    }

    public PreferenceCategory1(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public PreferenceCategory1(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onBindView(View view) {
        super.onBindView(view);
        TextView titleView = (TextView) view.findViewById(android.R.id.title);
        titleView.setTextColor(Color.rgb(238, 120, 30));

    }
} 
```

但我也想改变`PreferenceCategory`下面的元素之间的分隔线。我试图抓住列表视图并使用 setDivider() 方法：

```
 ListView v = (ListView)view.findViewById(android.R.id.list);
  v.setDivider(new ColorDrawable(Color.rgb(238, 120, 30))); 
```

`list`但这会导致 NullPointerException ，因为它在 this 中找不到`view`。我知道我可以在 xml 文件中设置它并将其添加为样式，但如果可能的话，我希望在 java 中执行此操作。有什么建议么？

# resharper - 如何调整 ReSharper 的大括号布局？

> ID：14585034
> 
> 赞同：0
> 
> 时间：2013-01-29T14:18:46.133
> 
> 标签：resharper

在 ReSharper 的代码清理之后我有这个代码

```
foreach (XElement childElement in
            childSchema.Element(this.xs + "complexType").Element(this.xs + "sequence").Elements(this.xs + "element")
    )
{
    // some code here
} 
```

我的 StyleCop 设置不允许*foreach*中的这个右括号位于单独的行上，但 resharper 在进行静默清理时将其放在单独的行上。我在格式样式设置中找不到合适的选项。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:27:28.150

您需要确保用于清理的默认配置文件使用 StyleCop 规则。您可以尝试按照[此](http://stylecopforresharper.codeplex.com/wikipage?title=ConfiguringStyleCopFriendlyCodeCleanUpSettings&referringTitle=Home&ProjectName=stylecopforresharper)链接中的步骤进行操作。此外，如果您转到 Stylecop 插件选项，应该有一个按钮，如果 StyleCop 规则与 Resharper 使用的规则不同，您可以按下该按钮，它应该为您调整它。

# jquery - 如何将对象列表拆分为 div

> ID：14585036
> 
> 赞同：1
> 
> 时间：2013-01-29T14:18:57.480
> 
> 标签：jquery

我有这样的事情：

```
<div class="l-logo-window">
<img alt="X" src=".../7e1571ec597e_18dbe64431">
<img alt="X" src=".../073c03a63161_a7b6976ea8">
<img alt="X" src=".../a3d64882c398_0a8a1e5c9a">
...
<img alt="X" src=".../ae6082c9b3b1_fc020700ee">
<img alt="X" src=".../d154cb017e7a_f03972285a">
<img alt="X" src=".../975809963413_6c999604ab"> 
```

我试图将它们拆分为 div，并在该 div 中制作另外 2 个 div，每个 4 个 imgs，以获得如下结果：

```
 <div class="l-logo-window">
        <!-- 8 Elements in total - wrap -->
        <div>
            <!-- 4 Elements in div -->
                <div>
                        <img alt="X" src=".../7e1571ec597e_18dbe64431">
                        <img alt="X" src=".../073c03a63161_a7b6976ea8">
                        <img alt="X" src=".../a3d64882c398_0a8a1e5c9a">
                        <img alt="X" src=".../3318b65041f2_3447b0bf60">
                </div>
            <!-- 4 Elements in div -->
                <div>
                        <img alt="X" src=".../7e1571ec597e_18dbe64431">
                        <img alt="X" src=".../073c03a63161_a7b6976ea8">
                        <img alt="X" src=".../a3d64882c398_0a8a1e5c9a">
                        <img alt="X" src=".../3318b65041f2_3447b0bf60">
                </div>
        </div>  
        <!-- 8 Elements in total - wrap -->
        <div>
            <!-- 4 Elements in div -->
                <div>
                        <img alt="X" src=".../7e1571ec597e_18dbe64431">
                        <img alt="X" src=".../073c03a63161_a7b6976ea8">
                        <img alt="X" src=".../a3d64882c398_0a8a1e5c9a">
                        <img alt="X" src=".../3318b65041f2_3447b0bf60">
                </div>
            <!-- 4 Elements in div -->
                <div>
                        <img alt="X" src=".../7e1571ec597e_18dbe64431">
                        <img alt="X" src=".../073c03a63161_a7b6976ea8">
                        <img alt="X" src=".../a3d64882c398_0a8a1e5c9a">
                        <img alt="X" src=".../3318b65041f2_3447b0bf60">
                </div>
        </div>  

</div> 
```

我懂了：

```
$('.l-logo-window > img:nth-child(8n-7)').each(function() {
     $(this).nextAll().slice(0, 7).add(this).wrapAll('<div class="subclass-js"></div>');
 }).eq(0).closest('div').unwrap();

 $('.subclass-js > img:nth-child(4n-3)').each(function() {
     $(this).nextAll().slice(0, 3).add(this).wrapAll('<div></div>');
 }).eq(0).closest('div').unwrap(); 
```

但它有 2 个缺点： - 第一：我丢失了我的 wrap div[class="l-logo-window"]， - 第二：前两个 div 缺少一个 div。

请帮帮我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:14:48.957

你可以在两个循环中这样做

```
// get every 8th element 
$('.l-logo-window > img:nth-child(8n+8)').each(function(){
   // wrap all prev img + current with div
   $(this).prevAll('img').addBack().wrapAll('<div/>'); 
});

// find ever 4th img inside the child div
$('.l-logo-window > div > img:nth-child(4n+4)').each(function () {
    // wrap all prev img + current with div
    $(this).prevAll('img').addBack().wrapAll('<div/>');
}); 
```

[http://jsfiddle.net/eReKd/](http://jsfiddle.net/eReKd/)

**编辑：**

只需要一个循环 - 另一个循环用一个 div 包裹 2 个 div

```
$('.l-logo-window > img:nth-child(4n+4)').each(function (i, v) {
  $(this).prevAll('img').addBack().wrapAll('<div/>');
  if (i % 2 !== 0) { // ever other one wrap another div     
    $('.l-logo-window > div:last').prev().addBack().wrapAll('<div/>');
  }
});

if($('.l-logo-window > div:last > div').length == 0){
    $('.l-logo-window > div:last >  img').wrapAll('<div/>');
    $('.l-logo-window > img').appendTo('.l-logo-window > div:last').wrapAll('<div/>');
}else{
    $('.l-logo-window > img').wrapAll('<div/>').parent().wrap('<div/>');
} 
```

[小提琴](http://jsfiddle.net/wv68r/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:20:45.857

我没有时间测试它，但应该是这样的：

```
var result = $('img.l-logo-window').each(function() { result.push($(this)) });

$('body').append('<div class="new-l-logo-window"><div class="l-logo-window-eight"><div class="l-logo-window-four"></div></div></div>');

for(var i = 0; i < result.length; i++) {

  if( (i+1) % 8 == 0){
     // 8 Elements in total - wrap
     $('div.new-l-logo-window:last').append('<div class="l-logo-window-eight"><div class="l-logo-window-four"></div></div>');

  }else if( (i+1) % 4 == 0){
     // 4 Elements in div
     $('div.l-logo-window-eight:last').append('<div class="l-logo-window-four"></div>');
  }

  // add new img element
  $('div.l-logo-window-four:last').append(result[i]); 
} 
```

# svn - 包括转速和差异？

> ID：14585037
> 
> 赞同：0
> 
> 时间：2013-01-29T14:18:59.173
> 
> 标签：svn

有没有办法包括使用时返回的每个文件的修订号

```
svn diff -r REV1:REV2 --summarize <URL> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:46:44.903

是的，只需更改命令格式并使用 PEG 修订

`svn diff --summarize <URL@REV1> <URL@REV2>`

编辑：

`--summarize`仅生成**范围内受影响的列表（****与 start 相比 end 的**变化）文件

如果要获取范围内**每个预定义的文件列表**，则必须使用`svn log -v -q`（或使用不带 --summarize 的 diff）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:53:51.680

`svn blame`会有用吗？这将向您显示特定版本更改了哪一行。

否则，您可以通过管道输出`svn diff`to `svn info`：

```
$ svn diff --summarize -r$rev1:rev2 $REPO_URL | while read status url
do
    echo $url
    svn info $url | grep "Last Changed Rev:"
done 
```

输出将如下所示：

```
http://svn.vegicorp.com/trunk/project1/file1.txt
Last Changed Rev: 157264
http://svn.vegicorp.com/trunk/project1/file2.txt
Last Changed Rev: 157264
http://svn.vegicorp.com/trunk/project1/file3.txt
Last Changed Rev: 157264
http://svn.vegicorp.com/trunk/project1/file4.txt
Last Changed Rev: 157264
http://svn.vegicorp.com/trunk/project1/file5.txt
Last Changed Rev: 157264 
```

如果您需要在同一行上的文件的修订和 URL，您可以使用`printf`. 如果您不在 Unix 系统上，您可以使用[Cygwin](http://cygwin.org)为您提供 BASH shell 和大多数标准的类 Unix 实用程序，您需要执行此类操作。否则，您将需要使用 PowerShell、Perl 或 Python 并对其进行编程。

# .net-4.0 - 为什么这些哈希码相等？

> ID：14585041
> 
> 赞同：3
> 
> 时间：2013-01-29T14:19:13.737
> 
> 标签：.net-4.0, gethashcode

此测试失败：

```
var hashCode = new 
{
    CustomerId = 3354,
    ServiceId = 3,
    CmsThematicId = (int?)605,
    StartDate = (DateTime?)new DateTime(2013, 1, 5),
    EndDate = (DateTime?)new DateTime(2013, 1, 6)
}.GetHashCode();
var hashCode2 = new
{
    CustomerId = 1210,
    ServiceId = 3,
    CmsThematicId = (int?)591,
    StartDate = (DateTime?)new DateTime(2013, 3, 31),
    EndDate = (DateTime?)new DateTime(2013, 4, 1)
}.GetHashCode();
Assert.AreNotEqual(hashCode, hashCode2); 
```

你能告诉我为什么吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:31:58.337

你发现这个巧合真是太神奇了。

匿名类有一个生成的`GetHashCode()`方法，它通过组合所有属性的哈希码来生成一个哈希码。

计算基本上是这样的：

```
 public override int GetHashCode()
  {
    return        -1521134295 * 
                ( -1521134295 * 
                ( -1521134295 * 
                ( -1521134295 * 
                ( -1521134295 * 
                   1170354300 + 
                  CustomerId.GetHashCode()) +
                  ServiceId.GetHashCode()) + 
                  CmsThematicId.GetHashCode()) + 
                  StartDate.GetHashCode()) + 
                  EndDate.GetHashCode();
  } 
```

如果您更改任何字段的任何值，哈希码确实会更改。您发现两组不同的值恰好获得相同的哈希码，这是一个巧合。

请注意，哈希码不一定是唯一的。不可能说哈希码总是唯一的，因为对象可能比哈希码多（尽管对象很多）。好的散列码提供随机分布的值。

注意：以上来自 .NET 4。不同版本的 .NET 可能不同，Mono 也不同。

如果您想实际比较两个对象是否相等，请使用`.Equals()`. 对于匿名对象，它比较每个字段。一个更好的选择是使用 NUnit 约束来比较每个字段并报告哪个字段不同。我在这里发布了一个约束：

[https://stackoverflow.com/a/2046566/118703](https://stackoverflow.com/a/2046566/118703)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:45:16.230

您在处理大量数据时遇到过这种情况吗？

欢迎来到哈希码的美妙世界。哈希码不是“唯一标识符”。不可能。该匿名类型的可能不同实例基本上是无限数量的，但只有 2^32 个可能的哈希码。所以可以保证，如果你创建了足够多的这些对象，你会看到一些重复的。事实上，如果你随机生成 70,000 个这样的对象，其中两个具有相同哈希码的几率超过 50%。

有关详细信息，请参阅[生日、随机数和哈希码](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=792)以及链接的 Wikipedia 文章。

至于为什么有些人没有看到重复而其他人看到，很可能他们在不同版本的 .NET 上运行该程序。不保证生成哈希码的算法在不同版本或平台之间保持相同：

> 只要确定对象的 Equals 方法的返回值的对象状态没有修改，对象的 GetHashCode 方法就必须始终返回相同的哈希码。**请注意，这仅适用于应用程序的当前执行，如果再次运行应用程序，则可以返回不同的哈希码**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:22:22.897

您的测试无效。

因为哈希码不能保证是唯一的（请参阅其他答案以获得很好的解释），您不应该测试哈希码的唯一性。

在编写自己的`GetHashCode()`方法时，最好测试随机输入的均匀分布，而不是唯一性。只要确保您使用足够的随机输入来获得良好的测试。

GetHashCode 上的 MSDN 规范特别指出：

> 为了获得最佳性能，散列函数必须为所有输入生成随机分布。

当然，这都是相对的。用于将 100 个对象放入字典中的`GetHashCode()`方法不需要像`GetHashCode()`将 10,000,000 个对象放入字典中那样随机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:50:26.137

Jim 建议我（在聊天室）存储我的参数，所以当我显示我的参数时，选择未使用的参数，然后当有人注册时我将其标记为已使用。但是生成所有参数是一个很大的 PITA。

所以我的解决方案是像这样构建一个 int64 哈希码

```
const long i = -1521134295;    
return -i * (-i * (-i * (-i * -117147284 + customerId.GetHashCode()) + serviceId.GetHashCode()) + cmsThematicId.GetHashCode()) + startDate.GetHashCode(); 
```

我删除了结束日期，因为它的值取决于 serviceId 和 startDate 所以我不应该首先将它添加到哈希码中。我从生成的类的反编译中复制/粘贴它。如果我用 300 000 种不同的组合进行测试，我不会发生大肠杆菌。

# sqlite - 从 SQLite 数据库中检索数据并将其显示在 ListView 上

> ID：14585044
> 
> 赞同：0
> 
> 时间：2013-01-29T14:19:31.980
> 
> 标签：sqlite, listview, android-arrayadapter, android-sqlite

我已经在 Internet 上进行了搜索，但我不明白将数据库中的数据显示到 ListView 需要做什么。他们有教程，但我不太明白。这是我的数据库处理程序代码

```
 package com.example.databasetest;

    import android.content.ContentValues;
    import android.content.Context;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.util.Log;
    import android.widget.Toast;

    public class DBHandler {

        public static final String TABLE_NAME = "tableKo";
        public static final String DATABASE_NAME = "databaseKo";
        private static final int DATABASE_VERSION = 1;
        private static final String TAG = "DBHandler";

        public static final String COL_ID = "_id";
        public static final String COL_NAME = "name";
        public static final String COL_ADDRESS = "address";
        public static final String COL_PHONE = "phone";
        public static final String COL_EMAIL = "email";

        private final Context context;
        private SQLiteDatabase db;
        private MySQLiteOpenHelper DBHelper;
        private String[] data;

        private static final String CREATE_DATABASE ="create table "
                + TABLE_NAME + "(" + COL_ID
                + " integer primary key, " + COL_NAME
                + " text not null, " + COL_ADDRESS + " text not null,"
                + COL_PHONE + " text not null," + COL_EMAIL + " text not null);";
        public DBHandler(Context ctx) {
            this.context = ctx;
            DBHelper = new MySQLiteOpenHelper(context);
        }
        private static class MySQLiteOpenHelper extends SQLiteOpenHelper{
            public MySQLiteOpenHelper(Context context) {
                super(context, DATABASE_NAME, null, DATABASE_VERSION);
            }
            @Override
            public void onCreate(SQLiteDatabase db) {
                // TODO Auto-generated method stub
                try {
                    db.execSQL(CREATE_DATABASE);
                  } catch (SQLException e) {
                    e.printStackTrace();
                  } 
            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                // TODO Auto-generated method stub
                Log.w(TAG, oldVersion + " to " + newVersion
                        + ", which will destroy all old data");
                db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
                onCreate(db);
            }

        }
        public DBHandler open() throws SQLException {
            db = DBHelper.getWritableDatabase();
            return this;
        }

        public void close() {
            DBHelper.close();
        }
        public void insertData (String name, String address, String phone, String email) {
            open();
            ContentValues values = new ContentValues();
            values.put(COL_NAME, name);
            values.put(COL_ADDRESS, address);
            values.put(COL_PHONE, phone);
            values.put(COL_EMAIL, email);

            db.insert(TABLE_NAME, null, values);
            //db.execSQL("Insert into " +TABLE_NAME+ " VALUES('"+COL_ID+"','"+name+"','"+address+"','"+phone+"','"+email+"');");
            db.close();

        }
// now here I want to make a return type method to return "I don't know what data type or anything that will fit the listView
        public void getData() {

            DBHelper.getReadableDatabase();

        }
    } 
```

我想做一个方法来返回适合 ListView 的东西。我应该返回 arrayAdapter 还是只返回一个简单的字符串数组？如果它是arrayAdapter，我不知道我应该放入什么类型（为了澄清我的意思是这个ArrayAdapter“我到底应该放什么？将使用它的活动还是String？”）。该方法应该是什么样的？

我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:51:22.747

这个解决方案对我有用。您需要将`public void getData()`方法声明为 ArrayList 或 ArrayAdapter，如下所示：

```
 public ArrayList<String> getData() {
    ArrayList<String> values = new ArrayList<String>();
    String columns[] = new String[] { COL_NAME }; //considering you wanna return name
    Cursor c = db.query(TABLE_NAME, columns, null, null, null, null,
            null);
    String result;
    int iName = c.getColumnIndex(COL_NAME);
    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        result = c.getString(iName);
        values.add(result);
    }
    return values;
} 
```

现在在要显示列表视图的主类中，输入以下代码：

```
 private DBHandler dbHandler;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    dbHandler = new DBHandler(Classname.this);
    dbHandler.open();
    ArrayList<String> data = dbHandler.getData();
    final ListView listView = getListView();
    setListAdapter(new ArrayAdapter<String>(ExpSubList.this,
            android.R.layout.simple_list_item_1, data));
} 
```

这应该有望在您的列表视图中显示名称。我没有使用xml布局来定义listview，直接在java中定义。您可以根据需要进行操作。

# bash - 在bash中从mysql读取时是否可以避免管道

> ID：14585045
> 
> 赞同：0
> 
> 时间：2013-01-29T14:19:36.653
> 
> 标签：bash

我有这样的：

```
 mysql  --user=$db_user --password=$db_pwd -e"$expQ" | while read name; do
   if [ $name != 'name' ];then
     COUNTER=$(($COUNTER + 1))
   fi
 done 
```

我想更新全局计数器，但是当我执行下一个查询时，`COUNTER`不会选择“|”的前一个值 bcz （管道） 。

如何更改上述代码以使用命名管道或任何其他替代方法。这是[参考](http://mywiki.wooledge.org/BashFAQ/024)，但我是 bash 新手，无法理解 mysql 是否可行 我的 bash 版本说：

`GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin10.0) Copyright (C) 2007 Free Software Foundation, Inc.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:22:10.017

请改用[流程替换](http://tldp.org/LDP/abs/html/process-sub.html)，如下所示：

```
COUNTER=0
while read -r name 
do
   if [[ $name != "name" ]]
   then
     ((COUNTER++))
   fi
done < <(mysql  --user="$db_user" --password="$db_pwd" -e"$expQ") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:42:18.620

如果您使用的是 4.2 或更高版本`bash`，您还可以设置该`lastpipe`选项，以便 while 循环不在子 shell 中运行，并`COUNTER`根据需要更新 的值。

```
shopt -s lastpipe
mysql  --user=$db_user --password=$db_pwd -e"$expQ" | while read name; do
  if [ $name != 'name' ];then
    COUNTER=$(($COUNTER + 1))
  fi
done 
```

也就是说，流程替代可能仍然是一个更好的主意。

# leaflet - 最大缩放和用户输入

> ID：14585046
> 
> 赞同：17
> 
> 时间：2013-01-29T14:19:37.257
> 
> 标签：leaflet

我想通过输入（缪斯滚动等）和按钮来限制用户的最大缩放级别。换句话说，我将“maxZoom”限制为-let say- level9。但是我还是希望能够在特殊情况下放大到level10。当我设置 maxZoom 时，它显然不会让我以任何方式放大，那么在这种情况下我的解决方案是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-04T10:04:49.013

设置最大缩放级别：

**map._layersMaxZoom=15**（将最大缩放级别设置为 15）

同样，我们可以设置最小缩放级别：

**map._layersMinZoom=2**，（将最小缩放级别设置为 2）。

另一种做同样的方式-

**map.options.maxZoom = 15;**

**map.options.minZoom = 10;**

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-30T09:31:56.463

`map.options.maxZoom`您可以在这些特殊条件下动态设置地图的最大缩放级别，并在完成后将其重新设置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-21T17:49:03.557

这对我有用：

L.tileLayer('...', { minZoom: 5, maxZoom: 15 }).addTo(map)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-22T10:30:23.607

如果您正在显示控件并更改`maxZoom`或`minZoom`选项，则控件将不会更新。例如，如果您的最小缩放级别为 10，而当前缩放级别为 10，则即使您更改缩放级别，缩小控件也会显示为禁用。

此解决方案的一种解决方法是在地图上触发“zoomend”事件：

```
map.options.minZoom = 9;
map.fire('zoomend'); 
```

`setZoom()`如果您以使当前缩放级别无效的方式更改最大/最小缩放级别，您可能还需要考虑调用该方法。

# algorithm - 找到 2013 年 Facebook 黑客杯的最低人数

> ID：14585049
> 
> 赞同：3
> 
> 时间：2013-01-29T14:19:48.690
> 
> 标签：algorithm

既然比赛已经结束了，我想问一下这个问题。在过去的三天里，我一直在为这个问题苦苦挣扎，因为实际上我无法理解它。

**问题来了：** [找到 2013 年 Facebook 黑客杯的最低人数](http://pastebin.com/raw.php?i=zupdZnkQ)

**这是我为这个问题找到解决方案的网站：** [解决方案](http://notes.tweakblogs.net/blog/8648/facebook-hacker-cup-2013-qualification-round-problem-analysis.html)

**我无法理解的是以下部分：**

> 尽管这些前 K 值可以是任何值，但我们可以对初始 K 元素之后的数组内容进行一些有用的观察：
> 
> 1.  根据鸽巢原理，每个元素都在 0 和 K（含）之间。
> 2.  因此，K + 1 个连续元素的每个窗口将包含 0 到 K 之间的每个值恰好一次（即它包含整数 0 到 K 的排列）。
> 3.  因此，对于 i > 2K：M[i] = M[i - (K + 1)]。

虽然如果第一点是真的，我能够理解第二点和第三点。第一个真的让我很困扰。为什么元素必须在 0 和 K 之间，为什么它们不能都是初始 K 元素中不存在的最小非负整数。

例如：对于以下测试用例：

> 1
> 
> 46 18
> 
> 7 11 9 46

前 K 个元素是：

> [7、40、35、26、19、34、15、36、37、2、31、28、41、0、9、16、1、20]

现在为什么其余元素必须在 0 到 18 之间，而我之前的 K 个元素中有超过 18 个的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:26:53.843

假设你有 K 个数字`{a0,a1,a2...a(k-1)}`，现在你想找到第一个不在其中的非负数。能超过`K`吗？好吧，如果这是真的，那么所有数字`{0,1,...K}`都存在于上述集合中，即`K+1`数字应该存在于上述由`K`数字组成的集合中。这是不可能的，并且与新数字大于 的假设相矛盾`K`。因此，在每个步骤中，您添加的下一个数字将在该范围内`[0,K]`，因此在该`K+1`步骤上，所有最后一个`K+1`数字都将在该步骤中，因此在该范围内是不同的数字。

# jquery - 使用 JQuery 禁用共享点 CHOICE 字段的最佳方法

> ID：14585053
> 
> 赞同：0
> 
> 时间：2013-01-29T14:19:59.113
> 
> 标签：jquery, sharepoint

我有一个简单的要求，即禁用 SharePoint 编辑表单中的多个选择字段。

我尝试设置不起作用的 attr('readonly','readonly') ，选择字段仍然可以编辑。

然后我尝试了 attr('disabled','disabled') 这有效，因为该字段显示为灰色，并显示先前设置的值。但是在保存其他编辑的值时，选择字段恢复为选择中的第一项列表...

感激地收到任何想法，我对此很陌生！

干杯

拉斯

```
 $("document").ready(function() {
    //$("select[title='Department']").attr('disabled', 'disabled');
    //$("select[title='Department']").attr('readonly', 'readonly');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T23:59:10.303

SharePoint 列表表单实际上以名为的 JavaScript 函数的形式公开了一种将功能附加到保存操作的方法`PreSaveAction`

在您的列表表单上声明它，它将在用户单击确定之后和表单回发之前被调用。在此处重新启用该字段。您必须返回一个布尔值，让表单知道它是否应该继续保存。

例如

```
function PreSaveAction() {
   alert("Hi");
   // Re-enable any disabled fields here
   return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T20:12:05.190

在您的 XSL 中，使用 SharePoint Designer 替换您的 SharePoint:SaveButton 控件并添加一个表单操作按钮。

这...
<SharePoint:SaveButton runat="server" ControlMode="New" id="savebutton1" />

对此的更改...
<input type="button" id="savebutton1" name="savebutton1" class="ms-ButtonHeightWidth" value="Save" onclick="javascript: $('select[title="Department" ;]').removeAttr('disabled'); {ddwrt:GenFireServerEvent('__commit')}" />

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:36:03.657

据我了解，您仅在您的选择设置为部门时才应用它。如果是，您需要创建另一个函数来 removeAttr('disabled')。

应用后，该属性不会自动删除。您的代码是说，当文档准备好（请求）时，禁用 Department 的所有选择字段。

# php - PHP - 从请求中生成干净的 TXT 输出

> ID：14585054
> 
> 赞同：0
> 
> 时间：2013-01-29T14:20:01.623
> 
> 标签：php, content-type

我有这个从数据库中获取值的 php 页面。从另一台服务器上的另一个脚本，我向该页面发出 http 请求并获取结果。结果必须是一个干净的 TXT，例如一个短语、一个数字或其他任何东西。

当我调试得到的结果时，我看到了类似这样的内容（假设我期望的答案是 +OK:server ready+）：

```
+OK:server ready+
1.1 200 OK 
```

我得到了这条额外的线。

如果我使用浏览器发出直接请求，我会看到 +OK:server ready+ 但是当我查看该结果页面的页面源时，我会看到：

```
<html>
<head>
  <style type="text/css"></styles>
</head>
<body>
  <pre style="word-wrap: break-word; white-space: pre-wrap;">+OK:server ready+</pre>
</body>
</html> 
```

显然浏览器正在添加这个，对吧？

无论如何，生成我想要的行的代码是这样的：

```
header('Content-Type: text/plain');
echo("+" . $resultFromServer . "+"); 
```

这是从 PHP 发送干净文本的正确方法，没有任何格式、标签等？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:40:16.000

我从未见过PHP 在输出*下方添加了额外的行。*我建议你检查：

*   我假设 PHP 文件在 Web 服务器上运行。这意味着在调试时，您可能正在使用某些工具通过 HTTP 获取结果。我认为这个工具是增加附加线的原因。使用命令行工具`curl`获得干净的输出。这也将准确显示服务器发送的内容。添加的 HTML 可能是 Chrome 出于显示目的而添加的。

*   您的代码可以生成它（例如，通过在生成所需输出的回显之后添加退出/死亡语句）。还要在此处临时添加一个额外的回显，以确保您没有执行包含旧调试输出的过时文件。

由于不需要的行没有出现在浏览器显示的（HTML 包装的）响应中，我很确定您的 HTTP 获取工具正在添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:30:40.227

标头中缺少编码：

```
header('Content-type: text/plain; charset=utf-8'); 
```

但只要您只发送 ASCII 字符，它应该可以正常工作。

浏览器不应该添加任何 html 代码，但我看到一些 PHP 框架搞砸了非标准输出。检查您的应用程序中是否有任何额外的输出处理。但是，如果您的 PHP 脚本中只有那两行，那么它一定可以工作。

顺便说一句，echo 不是一个函数，它接受多个参数，所以你不必用点运算符连接字符串——`echo 'a', $b, 'c';`速度要快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:45:02.160

[这里](https://stackoverflow.com/questions/4506679/rendering-plain-text-through-php)有一篇以前的文章。它提出的重要一点：header() 注释必须是文件中的第一件事——没有空格，没有任何东西。

我刚刚为自己做了一个测试用例：

```
<?php header("Content-Type: text/plain");
echo "hello world\n";
?> 
```

有效 - 它生成“纯文本”作为输出。

如果您有兴趣 - 该文件位于[http://www.floris.us/SO/SO1.php](http://www.floris.us/SO/SO1.php)

它是如何到达您的浏览器的（当您查看源代码时）？

# java - Java 占位符：对 webapp 文件夹的引用

> ID：14585056
> 
> 赞同：0
> 
> 时间：2013-01-29T14:20:12.377
> 
> 标签：java, web-applications, file-upload, location, classpath

我正在构建一个用于上传内容的 webapp。目前，我正在使用一个属性文件，我在其中定义了一些变量，其中包含一些我希望存储文件的文件夹的路径。这些路径指的是我的文件系统中的文件夹。

**P1：**由于我想让我的应用程序更便携，我决定将我上传的内容存储在项目类路径内的某个文件夹中，但我在占位符中使用的路径不起作用。

```
#path.images=C:/uploads/images    

#path.images=classpath:/webapp/uploads/images     (NOT working) 
```

**Q1：**如果可能的话，我想知道我是否将内容存储在正确的位置（在**webapp**目录内）。

**注意：**我进行这些更改也是因为我试图`FileInputStream`用`getResourceAsStream()`.

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:30:10.673

不; 未随应用程序部署的资产应存储在其他地方。

通常，像这样的资产属于可配置的外部目录。配置机制包括 JNDI、上下文/初始化参数、环境变量或系统变量。

将资产保留在 Web 应用程序中是一个坏主意，原因有很多，其中最大的原因是：

1.  如果应用程序部署为战争文件，则无论如何都无法写入战争文件，并且
2.  您的资产受部署机制的支配，可能会被覆盖。

将它们保存在已知良好的位置，然后将它们流式传输回来，通过您的容器配置访问权限，或使用各种 CDN 机制中的任何一种来提供访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:32:47.197

您不能将数据存储在类路径中 - 它是只读的。

为了获得最大的可移植性，您应该完全避免将数据存储在文件系统中（例如，在集群场景中，您需要确保您的文件系统在所有节点上都是相同的）。

# php - 在一个 foreach 中创建 php 正则表达式规则

> ID：14585060
> 
> 赞同：0
> 
> 时间：2013-01-29T14:20:45.683
> 
> 标签：php, variables, foreach

我有一页，会有一些正则表达式工作。导致将来会添加或删除正则表达式规则。我想将它们写入一个输出文件。因为这里的正则表达式规则很长，以我的方式我在那里写入了一个 json 数据，但是`php variable`没有工作。有没有人可以给我一些工作解决方案的好方法？谢谢。

json.txt

```
$json=<<<'EOT'
[
    {
        "a": "!preg_match('@www\\.aaa\\.com@',$url,$match)&&!preg_match('@www\\.bbb\\.com@',$url,$match)&&!preg_match('@www\\.ccc\\.com@',$url,$match)",
        "b": "1"
    },
    {
        "a": "!preg_match('@www\\.ddd\\.com@',$url,$match)&&!preg_match('@www\\.eee\\.com@',$url,$match)",
        "b": "2"
    },
    {
        "a": "!preg_match('@www\\.fff\\.com@',$url,$match)",
        "b": "3"
    }
]
EOT; 
```

主文件

```
include("json.txt");
$date = json_decode($json);
foreach($date as $row){
    if($row->a){// i'd like to make some judge like if(!preg_match('@www\\.fff\\.com@',$url,$match)), but now the $url make non-sence, un-worked `php variable`
       echo $row->b.'<hr />';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:39:53.703

您可能想尝试该`eval`方法（请参阅此处的文档：http: [//php.net/manual/en/function.eval.php](http://php.net/manual/en/function.eval.php)）

```
if(eval("return $row->a;")){ 
```

但正如文档所述，如果您以外的其他人可以编辑您的 json.txt 文件，这是一种危险的方法。`$row->a`因此，在尝试此解决方案之前，请确保只有授权人员才能修改内容。

# tcl - 我们可以根据标志交换执行顺序（从上到下更改为从下到上）吗？

> ID：14585065
> 
> 赞同：0
> 
> 时间：2013-01-29T14:21:01.910
> 
> 标签：tcl

我有一个 if 循环循环，我在路由器中将命令配置为

```
 mode contains config or unconfig as values

if {[regexp -nocase {^config$} $mode]} {

set conf ""

} else {

 set conf no

}

 $router config "$conf primary command\n"

 $router config "$conf secondary command\n" 
```

当模式设置为 config everthing 时，首先配置主命令，然后配置辅助命令”但是在取消配置时，我希望先执行辅助命令，然后只有它允许我删除主命令...所以当 $mode 更改时我会可以交换执行顺序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:23:34.603

您可以尝试让您的代码在用户列出它们时保留要执行的操作列表，而不是立即执行它们，仅实际对某个信号执行操作。然后交换执行顺序只是反向处理列表的问题，这非常简单（并且`lreverse`可能会有所帮助）。

不过，我个人并不倾向于这样做。通常的 Tcl 方式是立即按照指定的顺序做事；唯一值得注意的例外是 Tk（它推迟显示和布局“直到空闲”，即当没有待处理的事件时）和 Expect 在某些用途中（这是部分的；你可以`expect`一次做很多事情，但它们会被检查按照指定的顺序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:30:02.743

类似的东西？

```
if {$conf == "no"} {
    $router config "$conf primary command\n"
    $router config "$conf secondary command\n"
} else {
    $router config "$conf secondary command\n"
    $router config "$conf primary command\n"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:52:12.407

```
proc myConf {cmd} {
  global myConfs router

  $router config "$cmd\n"
  lappend myConfs $cmd
}

# configure
set myConfs {}
myConf "primary command"
myConf "secondary command"

# unconfigure
foreach cmd [lreverse $myConfs] {
  $router config "no $cmd\n"
} 
```

# java - 在android开发中选择查询编写

> ID：14585069
> 
> 赞同：-1
> 
> 时间：2013-01-29T14:21:09.257
> 
> 标签：java, android

请帮助我在android开发中编写查询

```
"SELECT * FROM '" + pendingpost_tb + "'" +
" where '" + AppUtil.post_type + "'" + "=history " +
" order by '" + AppUtil.datetime + "'" + " DESC" 
```

我想要按日期和时间按 desc 顺序排列的 AppUtil.post_type 列表，日期时间我已从数据库中获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:32:05.003

你的陈述有问题。我认为这是一份工作声明：

```
"SELECT * FROM " + pendingpost_tb +
" where " + AppUtil.post_type +  "='history'" +
" order by " + AppUtil.datetime + " DESC" 
```

您确定 AppUtil.datetime 是您的列名吗？

此外，最好使用 PreparedStatments。我不确定 PreparedStatement 是否可用于 android，但必须有与之等效的东西。

# css - CSS：伪元素后没有出现？

> ID：14585070
> 
> 赞同：23
> 
> 时间：2013-01-29T14:21:13.563
> 
> 标签：css, pseudo-element

我有一个图像，当您将其悬停时，它会从菜单中向上滑动。因为它隐藏在菜单下，所以我想通过在底部添加暗淡来给图像的底部一点深度。我认为实现这一目标的最佳方法是使用伪元素。我不太关心 IE 支持，因为它是一个很小的细节。

所以，这就是我所拥有的：

```
.header-section .trygg-ehandel-icon {
    position: absolute;
    top: 45px;
    right: 280px;
    z-index: 0;
    display: block;
    // Stripped out some transition style here
  }

  // Here's where the cool stuff begins!
  .header-section .trygg-ehandel-icon::after {
    position: absolute;
    top: 0px; left: 0px;
    height: 20px; width: 20px;
    display: block;
    content: '.';
    z-index: -999999px;
    background: red;
  } 
```

首先，我不确定在“之后”之前是使用双冒号还是单冒号。我一直用一个，但最近我注意到有人用两个，那该怎么办？要么似乎工作！

你可以在这里看到它的实际效果：http: [//goo.gl/RupQa](http://goo.gl/RupQa)

这是标题菜单上方弹出的黄色徽标。为什么我在图像上方看不到 20x20 的红色框？父 ( `.trygg-ehandel-icon`) 是绝对定位的，所以伪元素应该相对于它显示，对吧？

我已经尝试解决这个问题一个多小时了，有什么建议吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-29T15:38:22.327

正如[这个问题所回答的那样](https://stackoverflow.com/questions/5843035/)。

***根据设计***，在大多数浏览器中使用标签`before`和`after`伪元素`img`不起作用。

 *图像标签是自闭合 ( `<tag />`) 标签，因为它们不包含任何内容。由于它们不包含任何内容，因此生成的内容不能附加 ( `::after`) 或附加 ( `::before`) 到现有内容。

上面链接的文章列出了两种解决方案。CSS 变通方法本质上是非常骇人听闻的，而 jQuery 解决方案要优雅得多，但取决于启用的 Javascript 和包含的 jQuery 库。*

# linq-to-excel - 使用 LinqToExcel 创建一个数据集：

> ID：14585071
> 
> 赞同：1
> 
> 时间：2013-01-29T14:21:14.043
> 
> 标签：linq-to-excel

我在我的 Web 应用程序中使用 LinqToExcel 来获取 WorksheetNames 和列名，现在我想在 gridview 中显示一些数据。有没有使用 LinqToExcel 创建数据集的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:45:31.403

如果您使用 LinqToExcel，则必须手动创建数据集。

gridview.ls 是否有 DataSource 属性？如果是这样，那么您可以让 LinqToExcel 从电子表格中检索对象列表并将 DataSource 设置为该列表。

# css - 无法强制 webkit 使用 GPU 进行渲染

> ID：14585074
> 
> 赞同：0
> 
> 时间：2013-01-29T14:21:29.400
> 
> 标签：css, rendering, gpu, css-transitions

所以，我不能使用`scale()`，因为当我渲染我的 3200x3200 区域时，它需要 GPU 提供的太多能量。所以我决定使用`height/width/left/top`，因为我怀疑它需要更少的性能，甚至 FF 也可以很好地渲染它。

**问题：**当我转换`width/height/top/left` `-webkit-`时不再使用 GPU 进行渲染，即使我添加`translate3d()`或`translateZ()`值`-wbkit-transform`。

**问题：**

1.  我可以做些什么来提高 Chrome 的性能或触发 GPU 渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:38:45.453

试试这个来强制 GPU 渲染：

```
-webkit-backface-visibility:hidden; 
```

# servicestack - 想要提供没有扩展名的 html

> ID：14585075
> 
> 赞同：1
> 
> 时间：2013-01-29T14:21:36.303
> 
> 标签：servicestack, webstorm, liveedit

我想在 ServiceStack 中提供 html 页面，而 .html 扩展名不会出现在 url 上。ServiceStack 有可能吗？

我不想使用 ServiceStack 的 Razor 来实现无扩展 url，我无法让它的 Razor 与 WebStorm Live Edit 一起使用。只有 HTML 适用于 WebStorm Live Edit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:29:40.597

[似乎应该修复 WebStorm Live Edit，JetBrains 问题跟踪器 ( http://youtrack.jetbrains.com](http://youtrack.jetbrains.com) )中是否存在错误？可能是您可以创建有关问题的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T20:03:14.983

可能会使用一段时间

```
t := "Google"
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.
#SingleInstance force
;hardBackup 

;clipboard:=""
;~ MsgBox,%A_LineNumber%

HardDriveLetter := SubStr(A_ScriptDir, 1 , 1) 
ScriptNameLetter := SubStr(A_ScriptName, 1 , 1) 
iconAdress=%HardDriveLetter%:\fre\public\Graf-Bilder\icon\abc123\%ScriptNameLetter%.ico
ifexist,%iconAdress%
    Menu, Tray, Icon, %iconAdress%
else
  ToolTip,http://www.branchenbuch-weltweit.dk/img/abc/a.png

IfWinNotExist,%t%
{
    ToolTip,%t% `n does not exist.
    MsgBox,%t% `n does not exist.
    Sleep,5000
    ExitApp
}
; aAa
SetTitleMatchMode,2
#IfWinActive,PhpStorm 7.1 ahk_class SunAwtFrame
 ~A::
    SingleKeyInput("dummy")
  return 

 ~B::
    SingleKeyInput("dummy")
  return 

 ~C::
    SingleKeyInput("dummy")
  return 

 ~D::
    SingleKeyInput("dummy")
  return 

 ~E::
    SingleKeyInput("dummy")
  return 

 ~F::
    SingleKeyInput("dummy")
  return 

 ~G::
    SingleKeyInput("dummy")
  return 

 ~H::
    SingleKeyInput("dummy")
  return 

 ~I::
    SingleKeyInput("dummy")
  return 

 ~J::
    SingleKeyInput("dummy")
  return 

 ~K::
    SingleKeyInput("dummy")
  return 

 ~L::
    SingleKeyInput("dummy")
  return 

 ~M::
    SingleKeyInput("dummy")
  return 

 ~N::
    SingleKeyInput("dummy")
  return 

 ~O::
    SingleKeyInput("dummy")
  return 

 ~P::
    SingleKeyInput("dummy")
  return 

 ~Q::
    SingleKeyInput("dummy")
  return 

 ~R::
    SingleKeyInput("dummy")
  return 

 ~S::
    SingleKeyInput("dummy")
  return 

 ~T::
    SingleKeyInput("dummy")
  return 

 ~U::
    SingleKeyInput("dummy")
  return 

 ~V::
    SingleKeyInput("dummy")
  return 

 ~W::
    SingleKeyInput("dummy")
  return 

 ~X::
    SingleKeyInput("dummy")
  return 

 ~Y::
    SingleKeyInput("dummy")
  return 

 ~Z::
    SingleKeyInput("dummy")
  return

 ~Enter::
    SingleKeyInput("activate")
  return

SingleKeyInput(m)
{
    global t
    ;~ MsgBox,ControlSend f5 %t%
    ; /develop/ConverterIni2awl/php/www/ConverterIni2awl.class.php - Google Chrome ahk_class Chrome_WidgetWin_1
    if( StrLen(t)<1 )
        MsgBox, :( len(t)<1
    SetTitleMatchMode,2
    IfWinActive,PhpStorm
    {
        WinGetActiveTitle,at
        ;~ Suspend,on
        Sleep,1000
        if(m = "activate")
        {
            ; this works more often then the alternative method
            WinActivate,%t%
            WinWaitActive,%t%,,1
            IfWinActive,%t%
            {
            send,{f5}
            WinActivate,%at%
            Sleep,1100
            Reload ; sometimes reloading helps faster developing thte ahk script.
            }
        }

        IfWinNotActive,%t%
            ControlSend,,{f5},%t%
        ToolTip, f5
        Sleep,1000
        ToolTip, 
        ;~ Suspend,off
    }
    return
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:07:36.923

默认情况下不支持此功能，但[ServiceStack](https://github.com/ServiceStack/ServiceStack/wiki/Order-of-Operations)中有许多挂钩可让您有机会执行此操作。我会 **AppHostBase.CatchAllHandler**：

```
appHost.CatchAllHandlers.Add((httpMethod, pathInfo, filePath) => {
    var relativePath = "{0}.html".Fmt(pathInfo);
    var fileExists = appHost.VirtualPathProvider.FileExists(relativePath);
    return fileExists ? new MyStaticFileHttpHandler(pathInfo) : null;
}); 
```

查看[StaticFileHandler](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/Support/StaticFileHandler.cs)以获取在 .NET 和 Mono ASP.NET/HttpListener 主机上可靠运行的文件内容下载的最佳实现。

# javascript - 通过另一个函数透明地传递函数的参数

> ID：14585077
> 
> 赞同：2
> 
> 时间：2013-01-29T14:21:45.717
> 
> 标签：javascript, inheritance, casting

我正在构建一个由数百个函数组成的相当大的 JavaScript 库。每个函数都有一定数量的参数，有时在设计时是未知的。我需要通过某种参数`cleanUp()`函数来传递每个函数参数。我可以做这样的事情：

```
function myFunction(param1, param2, ..., paramN) {
  var param1 = cleanUp(param1);
  var param2 = cleanUp(param2);
  ...
  var paramN = cleanUp(paramN);

  // Function's implementation goes here
}

function cleanUp(param) {
  // Cleanup code goes here
  return cleanParam;
} 
```

但这会非常冗长和重复（请记住，我有数百个这样的函数）。

**我的问题是：**通过函数透明地传递所有函数参数的最佳方式是什么`cleanUp`，无论是继承，还是更合适的方式。我知道我可以使用该`arguments`变量来访问所有函数的参数，但我希望清理发生在函数本身*之外*，进入我的函数可以“继承”的其他函数。

**注意：**在所有函数中，为便于阅读，参数必须保留其原始名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:34:07.193

我想我没有正确表达我的问题，但我仍然不确定如何改进它。

无论如何，这是我从同事那里得到的答案。以危险的方式，如果有人可以改写我最初的问题以匹配我正在寻找的答案，我会很高兴，因为我很确定由此产生的问答具有一定的价值。

```
// Parameter cleanup function
function cleanUp(param) {
  // Cleanup code goes here
  return cleanParam;
}

// Implementation of one of the hundreds of functions in the library
function _myFunction(param1, param2, ..., paramN) {
  // Function's implementation goes here
}

// Proxy of one of these functions with clean parameters
function myFunction = makeProxy(_myFunction);

// Utility function to create a proxies for the library functions
function makeProxy(fn) {
  function proxy() {
    var cleanParams = [];
    for (var i = 0; i < arguments.length; i++) {
      cleanParams.push(cleanUp(arguments[i]));
    }
    return fn.apply(this, cleanParams);
  }
  return proxy;
} 
```

谢谢帕斯卡！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:25:16.213

在函数中使用“参数”变量。这是一个......好吧......所有论点的列表:-)

```
function test (a,b) {
   console.log(arguments);
}
test('test','test'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:25:40.073

//传递内部参数对象

```
function myFunction(param1, param2, ..., paramN) {
  var paramters = cleanUp(arguments);
} 
```

# android - 只在我的活动中吐司

> ID：14585078
> 
> 赞同：0
> 
> 时间：2013-01-29T14:21:47.697
> 
> 标签：android

我有一个应用程序，当应用程序进入后台时，它也会定期显示相同的祝酒词。所以当我使用其他应用程序时，我会看到我的应用程序的祝酒词。如何仅在我的活动中允许显示敬酒？

```
Toast.makeText(getApplicationContext(), "level",
Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:25:58.673

只有在活动可见时，您才能告诉 Toast 可见。当您的应用程序在后台运行时，您应该避免调用 show() 函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:42:59.943

您可以查看 Croutons 库，它准确地解决了 Toast 脱离其上下文显示的问题。

[在这里](http://www.grokkingandroid.com/useful-android-libraries-crouton/)您可以找到解释以及在哪里下载。

# android - 从 Android 访问谷歌驱动器

> ID：14585079
> 
> 赞同：1
> 
> 时间：2013-01-29T14:21:48.383
> 
> 标签：android, google-drive-api

我按照[如何使用我的 android 应用程序](https://stackoverflow.com/questions/13833358/how-to-upload-file-on-google-drive-using-my-android-application/14584010#14584010) 和 [http://www.youtube.com/watch?v=Ied1CjJ0iP0](http://www.youtube.com/watch?v=Ied1CjJ0iP0)在 google drive 上上传文件中列出的步骤进行操作 。但是我收到了这些错误。请帮帮我。我还有一个问题如果我想在没有用户交互的情况下将创建我的应用程序的某些文件上传到某些用户的（未添加到手机上）驱动器怎么办

```
 01-29 18:48:07.925: E/Trace(5134): error opening trace file: No such file or directory (2)
 01-29 18:48:26.955: E/AndroidRuntime(5134): FATAL EXCEPTION: Thread-6566
 01-29 18:48:26.955: E/AndroidRuntime(5134): java.lang.NullPointerException
 01-29 18:48:26.955: E/AndroidRuntime(5134):     at java.net.URI.parseURI(URI.java:353)
 01-29 18:48:26.955: E/AndroidRuntime(5134):     at java.net.URI.<init>(URI.java:204)
 01-29 18:48:26.955: E/AndroidRuntime(5134):     at com.google.api.client.http.GenericUrl.<init>(GenericUrl.java:100)
 01-29 18:48:26.955: E/AndroidRuntime(5134):     at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:269)
 01-29 18:48:26.955: E/AndroidRuntime(5134):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:408)
 01-29 18:48:26.955: E/AndroidRuntime(5134):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
 01-29 18:48:26.955: E/AndroidRuntime(5134):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
 01-29 18:48:26.955: E/AndroidRuntime(5134):     at com.example.googlevideo.MainActivity$1.run(MainActivity.java:103)
 01-29 18:48:26.955: E/AndroidRuntime(5134):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:04:38.327

此异常是因为我的请求无效；我在 Google 控制台中提供的包名称与我在应用程序中使用的不匹配。

# entity-framework - 自定义列的 ExecuteStoreQuery

> ID：14585082
> 
> 赞同：3
> 
> 时间：2013-01-29T14:22:00.520
> 
> 标签：entity-framework

我正在尝试运行自定义查询并且我正在使用实体框架，我尝试了这个

```
string query = @"SELECT dm.DistrictName,sm.SchoolName,u.UserId,u.FirstName,u.LastName, sa.StudentId, sa.ReadingLevel
                 FROM  studentassessment sa
                 INNER JOIN assessmentmaster am ON sa.AssessmentId = am.AssessmentId
                 INNER JOIN studentclass sc ON sa.StudentId = sc.StudentId
                 INNER JOIN USER u ON sc.TeacherId = u.UserId
                 INNER JOIN schoolmaster sm ON u.SchoolCode = sm.SchoolCode
                 INNER JOIN  districtmaster dm ON sm.DistrictId = dm.DistrictId
                 WHERE u.RoleId = 5 && sa.GradeId = " + objParam.Grade + " && sa.AssessmentPeriodId = " + x.AssessmentPeriodId + " && dm.DistrictId = " + districtCode + " && am.DRAType = '" + objParam.LanguageType + "' && am.AssessmentTypeId = 1";

var dt = db.ExecuteStoreQuery<List<object>>(query).FirstOrDefault(); 
```

但是没有成功。

有没有办法`ExecuteStoreQuery`从未映射到任何对象类型的结构中获取结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:57:52.100

不。EF`ExecuteStoreQuery`要求数据类型（类）具有与您的查询结果集中的列同名的属性。如果要在不为其结果集创建特殊类型的情况下执行查询，则必须`SqlDataReader`直接使用 ADO.NET。

# c# - C#，使用“-”为通过 CMD 运行的 exe 添加参数

> ID：14585090
> 
> 赞同：0
> 
> 时间：2013-01-29T14:22:10.583
> 
> 标签：c#, cmd, arguments, exe

这里绝对没有 C# 经验，但被要求编辑 Windows 窗体应用程序并且有点卡住了！

单击表单上的按钮后，将运行以下代码：

```
private void RunHPPreSort_Click(object sender, EventArgs e)
{
    System.Diagnostics.Process.Start("cmd.exe", @"/k C:\Program Files\Hewlett-Packard\HP Exstream\HP Exstream 8.0.310\Engine.exe");            
} 
```

这工作正常，但我需要添加一个参数以允许 Engine.exe 获取控制文件的设置。我尝试将代码更改为：

```
private void RunHPPreSort_Click(object sender, EventArgs e)
{
    System.Diagnostics.Process.Start("cmd.exe", @"/k C:\Program Files\Hewlett-Packard\HP Exstream\HP Exstream 8.0.310\Engine.exe -CONTROLFILE=C:\Users\adam.pope\Desktop\Accenture\Control Files\Accenture Control File Step One.opt");            
} 
```

我这样做是因为`C:\Program Files\Hewlett-Packard\HP Exstream\HP Exstream 8.0.310\Engine.exe -CONTROLFILE=C:\Users\adam.pope\Desktop\Accenture\Control Files\Accenture Control File Step One.opt`直接从命令行运行完美。但是，当我通过 Windows 窗体应用程序使用它时，我在命令行中收到以下错误：

```
'C:\Program' is not recognized as an internal or external command, operable program or batch files. 
```

似乎在参数之前添加“-”会导致问题，但这是`Engine.exe`接受参数的唯一方法。

有针对这个的解决方法吗？对不起，如果它非常明显，但我不知道我在 C# 世界中在做什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:28:19.017

我不知道它在没有任何引号之前是如何工作的，因为如果 cmd 有不带引号的空格，它就不会运行它。

尝试改用这个

```
System.Diagnostics.Process.Start("cmd.exe", "/k \"C:\\Program Files\\Hewlett-Packard\\HP Exstream\\HP Exstream 8.0.310\\Engine.exe\" -CONTROLFILE=C:\\Users\\adam.pope\\Desktop\\Accenture\\Control Files\\Accenture Control File Step One.opt"); 
```

您可能还必须引用参数，但这取决于您调用的程序如何处理带有空格的参数。

# jquery - Fancybox 无法正确打开谷歌地图

> ID：14585093
> 
> 赞同：0
> 
> 时间：2013-01-29T14:22:20.280
> 
> 标签：jquery, google-maps-api-3, fancybox

我正在尝试通过单击同样是谷歌地图的缩略图在fancybox 中打开谷歌地图。Fancybox 可以正常打开，但在 fancybox 上没有正确显示地图。

如果我在 fancybox 上缩放/调整地图大小，那么它工作正常。这是我用来生成地图的代码。

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">     
</script>

<script>
var mapHash = [];
var bound = new google.maps.LatLngBounds();
finishedCoding = false;
function initMap(map_container_div) {

    var latlng = new google.maps.LatLng(38.5111, -96.8005);
    if(map_container_div == 'map1')
    {
        var myOptions = {
        zoom:0,
        center:latlng,
        mapTypeId:google.maps.MapTypeId.ROADMAP
    };

    }
    else
    {
    var myOptions = {
        zoom:1,
        center:latlng,
        mapTypeId:google.maps.MapTypeId.ROADMAP,
        streetViewControl: false
    };
    } 

    if(map_container_div == 'map1')
    {
        var map = new google.maps.Map(document.getElementById(map_container_div), myOptions);
    }
    else
    {
        var map = new google.maps.Map(document.getElementById(map_container_div), myOptions);           
    }

    if (!getMap(map_container_div)) {
        var mapInfo = {
            mapkey:'',
            map:'',
            geocoder : new google.maps.Geocoder()
        };
        mapInfo.map = map;
        mapInfo.geocoder = new google.maps.Geocoder();
        mapInfo.mapKey = map_container_div;
        mapHash.push(mapInfo);
    }
}

function palceMarker(myAddress, mapId) {
        mapIndex = getMap(mapId)
    //alert(myAddress + mapId + map)
    mapHash[mapIndex].geocoder.geocode({
        'address':myAddress
    }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            mapIndex = getMap(mapId)
            var marker = new google.maps.Marker({
                map:mapHash[mapIndex].map,
                position:results[0].geometry.location,
                title: results[0].formatted_address
            });
            bound.extend(results[0].geometry.location);
            mapHash[mapIndex].map.fitBounds(bound);

            finishedCoding = true;

        }
    });
}

function getMap(mapKey) {

    for (var i = 0 ; i < mapHash.length ; i++) {
        if (mapHash[i].mapKey == mapKey) {
            return i;
        }
    }
    return false;
}

function init() {
    initMap("map1")
    initMap("map_thumb")

    palceMarker("1/86-100 Market St, Sydney New South Wales 2000", "map1")
    palceMarker("120 Market St, Sydney New South Wales 2000", "map_thumb")
} 
```

HTML代码是：

```
<div style="display:none;">
<div id="map1" style="width: 900px; height: 480px; position: relative; background-color: rgb(229, 227, 223); overflow: hidden;" >
</div>
</div> <!-- large map div ends --> 
```

FancyBox 的代码：

```
<script type="text/javascript">
    $(document).ready(function() {
    init();
    $("a#inline").fancybox({
    'hideOnContentClick': false,
    'overlayColor'      : '#6b0202',
    'overlayOpacity'    : 0.8,
    'width' : '100%',
    'height' : '100%',
    'afterLoad': function(){
    google.maps.event.trigger(map, "resize");
  }

    });
});
</script> 
```

当前打开弹出窗口：

![在此处输入图像描述][1]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:54:05.123

在你展示了幻想框*之后*尝试初始化你的地图：

```
$('#yourelement').fancybox({
    afterShow: function() { 
        initMap(); 
    }
}); 
```

当我在一个隐藏元素中初始化一个谷歌地图地图时，我遇到了同样的问题，并且像上面这样的结构为我解决了这个问题。

# html - 当关键字匹配某些条件时在文本中查找关键字 - C#

> ID：14585100
> 
> 赞同：1
> 
> 时间：2013-01-29T14:22:33.587
> 
> 标签：html, search, tags, conditional-statements, keyword

我正在寻找一种很好的方法来执行以下操作：

我有一篇文章，其中包含 HTML 标记，例如锚点和段落等。
我也有我需要在文章中找到的关键字并将其设置为锚点（我有一些网址要设置在那里）。
如果文章中确实存在关键字，则在使其成为锚点之前，它应该匹配以下两个条件：

1.  它不能在任何标签内。例如，像

    ```
    <img alt="keyword"> 
    ```

    将无效/不匹配。

2.  关键字不能已经在锚点内。例如，类似的东西

    ```
    <a>keyword</a> 
    ```

    将无效/不匹配。

    任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:42:07.810

我已经成功完成了！

非常感谢这篇文章，它对 xpath 表达式有很大帮助：http: [//social.msdn.microsoft.com/Forums/en-US/regexp/thread/beae72d6-844f-4a9b-ad56-82869d685037/](http://social.msdn.microsoft.com/Forums/en-US/regexp/thread/beae72d6-844f-4a9b-ad56-82869d685037/)

我的任务是使用我数据库中的关键字和 url 表将 X 个关键字添加到文章中。
一旦关键字匹配 - 它不会再次搜索它，但会尝试在文本中找到下一个关键字。
“关键字”可能由多个单词组成。这就是我添加替换（“”，“\s+”）的原因。
另外，我必须首先优先考虑最长的关键字。也就是说，如果我有：
“美好的一天”和“美好的”作为两个不同的关键字——“美好的一天”总是获胜。

这是我的解决方案：

```
static public string AddLinksToArticle(string article, int linksToAdd)
    {
        try
        {
            //load keywords and urls
            var dt = new DAL().GetArticleLinks();

            //sort the it
            IEnumerable<ArticlesRow> sortedArticles = dt.OrderBy(row => row.keyword, new StringLengthComparer());

            // iterate the dictionary to get keyword to replace with anchor
            foreach (var item in sortedArticles)
            {
                article = FindAndReplaceKeywordWithAnchor(article, item.keyword, item.url, ref linksToAdd);
                if (linksToAdd == 0)
                {
                    break;
                }
            }

            return article;
        }
        catch (Exception ex)
        {
            Utils.LogErrorAdmin(ex);
            return null;
        }
    }

    private static string FindAndReplaceKeywordWithAnchor(string article, string keyword, string url, ref int linksToAdd)
    {
        //convert text to html
        HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
        doc.LoadHtml(article);

        // \w* - means it can start with any alphanumeric charactar
        // \s+ - was placed to replace all white spaces (when there is more than one word).
        // \b - set bounderies for the keyword
        string pattern = @"\b" + keyword.Trim().Insert(0, "\\w*").Replace(" ", "\\s+") + @"\b";

        //get all elements text propery except for anchor element 
        var nodes = doc.DocumentNode.SelectNodes("//text()[not(ancestor::a)]") ?? new HtmlAgilityPack.HtmlNodeCollection(null);
        foreach (var node in nodes)
        {
            if (node.InnerHtml.Contains(keyword))
            {
                Regex regex = new Regex(pattern);
                node.InnerHtml = regex.Replace(node.InnerHtml, "<a href=\"" + url + "\">" + keyword + "</a>", 1);//match only first occurrence
                linksToAdd--;
                break;
            }
        }

        return doc.DocumentNode.OuterHtml;
    }
}

public class StringLengthComparer : IComparer<string>
{
    public int Compare(string x, string y)
    {
        return y.Length.CompareTo(x.Length);
    }
} 
```

希望它会在未来对某人有所帮助。

# css - 仅使用 css 的旧纸张背景纹理

> ID：14585101
> 
> 赞同：25
> 
> 时间：2013-01-29T14:22:36.090
> 
> 标签：css, background, textures

是否可以使用看起来像旧纸的纯 CSS（不使用图像）创建背景纹理，例如：http: [//i.stack.imgur.com/kb0Zm.jpg](https://i.stack.imgur.com/kb0Zm.jpg)

我知道有限制，纹理不需要像示例那样复杂。

有没有办法在 CSS 中做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2020-08-27T11:57:51.917

我可以建议我的解决方案吗？（在 Chrome v92+、Firefox v90+、Edge v92+ 上测试）。

一点盒子阴影：

```
 #parchment {
  position: absolute;
  display: flex;
    width: 75%;
  min-height: calc((1vw + 1vh) * 75);
  /* center page with absolute position */
  top: 0%; left: 50%; transform: translate(-50%, 0);
  margin: 2em 0;
    padding: 4em;
    box-shadow: 2px 3px 20px black, 0 0 60px #8a4d0f inset;
    background: #fffef0;
  filter: url(#wavy2);
} 
```

和一些 SVG feTurbulence 作为过滤器：

```
<svg>
  <filter id="wavy2">
    <feturbulence x="0" y="0" baseFrequency="0.02" numOctaves="5" seed="1"></feturbulence>
    <feDisplacementMap in="SourceGraphic" scale="20" />
  </filter>
</svg> 
```

例如： [混合了css和svg的旧羊皮纸](https://codepen.io/AgnusDei/pen/NWPbOxL)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-01T06:09:18.700

# 背景图像生成器站点

我在 2016 年发现的最好的是这个创建噪声纹理图像的 API。它不是基于聪明的 CSS3，但我只是发布这个，因为其他答案都没有达到 OP 想要的。

[http://www.cssmatic.com/noise-texture](http://www.cssmatic.com/noise-texture)

请注意该站点的输出 CSS 代码错误。它应该是这样的：

```
body {
    background-image : url(http://api.thumbr.it/whitenoise-361x370.png?background=ffffffff&noise=5c5c5c&density=13&opacity=62);
} 
```

欢迎任何人为该 API 调用建议看起来更像纸的替代参数。如果我想出一个好的答案，我会更新我的答案。

[![在此处输入图像描述](../Images/24439fb3db3d5c9d96c7d309410a9784.png)](https://i.stack.imgur.com/9TQsy.png)
[（来源：[thumr.it](http://api.thumbr.it/whitenoise-600x200.png?background=f8faebff&noise=6c702d&density=17&opacity=15)）]

它在我的个人网站上看起来不错，并向您展示了纯白色是多么不自然以及在人眼中它是多么不舒服：http: [//netgear.rohidekar.com/inventory/books.html](http://netgear.rohidekar.com/inventory/books.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:42:24.150

正如这里所回答的（[如何使用没有图像的 CSS 创建纹理纸背景](https://stackoverflow.com/questions/5970312/how-to-create-a-texture-paper-background-using-css-without-image)）达斯汀说，没有“纹理”CSS 功能。然而，如果你使用 CSS3，你可以做一些很酷的技巧，比如渐变或阴影来制作一些整洁的背景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:28:39.970

不，你可以用 CSS 做的最好的事情是一些渐变。[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# internet-explorer - Facebook Like 插件未在 Chrome 上显示，仅适用于一个网站

> ID：14585102
> 
> 赞同：0
> 
> 时间：2013-01-29T14:22:35.713
> 
> 标签：internet-explorer, google-chrome, facebook-like

我在 www.ibmarketingdigital.com.br 上使用 facebook like 插件，它工作正常。我尝试在 www.weshare.net.br 上使用它，但它不能在 Chrome 或 Internet Explorer 上运行，只能在 firefox 上运行。我使用 facebook 开发者插件页面生成了代码。

问题是，如果我在 Chrome 上打开这个 URL [https://www.facebook.com/plugins/like.php?href=https://www.facebook.com/ibsistemas](https://www.facebook.com/plugins/like.php?href=https://www.facebook.com/ibsistemas)

它工作得很好。

但是，如果我打开另一个： [https://www.facebook.com/plugins/like.php?href=https://www.facebook.com/WeShareCoworking](https://www.facebook.com/plugins/like.php?href=https://www.facebook.com/WeShareCoworking)

它不会在 Chrome 或 IE 上显示任何内容。

有谁知道如何解决它？显然它只是第二个不能正常工作的。

在此先感谢，费尔南多

# unit-testing - CruiseControl 未合并来自 MSTest 的测试结果

> ID：14585106
> 
> 赞同：3
> 
> 时间：2013-01-29T14:22:47.353
> 
> 标签：unit-testing, msbuild, integration-testing, mstest, cruisecontrol.net

我已经使用 CruiseControl 设置了集成构建，并且根据 ccnet.log 文件，它正在合并到我的测试结果中，但是当我查看日志时，我找不到它们的任何迹象，并且构建页面显示在那里没有运行测试（即使它们已经运行）......

以下是 CCNET.LOG 的最后 3 行：

```
2013-01-29 08:02:51,325 [GEMS - Continuous Integration:INFO] Merging file 'E:\GEMS_Build\Integration\TestResults\GEMS.Shared.UnitTests.trx'
2013-01-29 08:02:51,325 [GEMS - Continuous Integration:INFO] Merging file 'E:\GEMS_Build\Integration\TestResults\GEMS.Web.UnitTests.trx'
2013-01-29 08:02:51,325 [GEMS - Continuous Integration:INFO] Integration complete: Success - 1/29/2013 8:02:46 AM 
```

这些路径和文件名是正确的。我验证过了。另外，如果不是，则会出现错误（我知道是因为我最初输入了错误的目录名称）。

这些文件似乎是完全有效的 MSTest .trx 文件，其中包含来自测试结果的信息。我正在运行 VS.NET 2012，如果这很重要...

以下是其中一个文件的结果摘要：

```
<ResultSummary outcome="Completed">
    <Counters total="24" executed="24" passed="24" error="0" failed="0" timeout="0" aborted="0" inconclusive="0" passedButRunAborted="0" notRunnable="0" notExecuted="0" disconnected="0" warning="0" completed="0" inProgress="0" pending="0" />
</ResultSummary> 
```

但是 CruiseControl 网页的构建结果显示：

```
Suites run: 0, Tests run: 0, Failures: 0, Not run: 0, Time: 0seconds 
No Tests Run 
This project doesn't have any tests 
```

测试运行清楚地显示在日志中，从最终 MSBuild 任务的日志中可以看出（请注意，这与我正在合并的 .trx 文件不同。这只是 CCNET 捕获的控制台日志记录）。

```
<msbuild startTime="01/28/2013 16:31:36" elapsedTime="00:00:12" elapsedSeconds="132" success="true">
  <project name="Coverage" file="E:\GEMS_Build\Integration\Coverage.xml" startTime="01/28/2013 16:31:37" elapsedTime="00:00:11" elapsedSeconds="131" success="true">
    <target name="Coverage" startTime="01/28/2013 16:31:38" elapsedTime="00:00:10" elapsedSeconds="130" success="true">
      <message level="high"><![CDATA[E:\OpenCover\OpenCover.Console.exe -register:user -target:"E:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\mstest.exe" -output:"E:\GEMS_Build\Integration_Artifacts\0.1.1.270\OpenCover\shared.coverage.xml" -targetargs:"/testcontainer:E:\GEMS_Build\Integration\src\GEMS.Shared\GEMS.Shared.UnitTests\bin\Debug\GEMS.Shared.UnitTests.dll /resultsfile:E:\GEMS_Build\Integration\TestResults\GEMS.Shared.UnitTests.trx" -filter:"+[GEMS.Shared]* -[GEMS.Shared]GEMS.Shared.PerformanceCounters* -[GEMS.Shared]GEMS.Shared.Cache.* " -mergebyhash]]></message>
      <message level="high"><![CDATA[Microsoft (R) Test Execution Command Line Tool Version 11.0.50727.1]]></message>
      <message level="high"><![CDATA[Copyright (c) Microsoft Corporation. All rights reserved.]]></message>
      <message level="high"><![CDATA[    ]]></message>
      <message level="high"><![CDATA[Loading E:\GEMS_Build\Integration\src\GEMS.Shared\GEMS.Shared.UnitTests\bin\Debug\GEMS.Shared.UnitTests.dll...]]></message>
      <message level="high"><![CDATA[Starting execution...]]></message>
      <message level="high" />
      <message level="high"><![CDATA[Results               Top Level Tests]]></message>
      <message level="high"><![CDATA[-------               ---------------]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.ANDFilterTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.BasicFilterTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.ComplexFilterTranslationTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.ComplexParameterDictionaryTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.FilterEncodeDecodeTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.FilterRolloverTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.IsNullFilterTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.ORFilterTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.SimpleEncodedFilterTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.ValidateComplexExpressionTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.ValidateFieldsTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.FilterTests.ValidateTranslateTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Data.JsonTests.ComplexJsonObjectConversionTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetDaysInMonthTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetEndOfLastMonthTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetEndOfLastYearTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetEndOfMonthTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetEndOfYearTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetLastWeekOfMonthTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetStartOfLastMonthTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetStartOfLastYearTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetStartOfMonthTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetStartOfYearTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetWeekOfMonthTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.GetWeekOfYearTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.MaxDateTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Date.DateTimeExtensionTests.MinDateTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Enums.EnumMapperTests.EnumMapperSimpleFail1Test]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Enums.EnumMapperTests.EnumMapperSimpleFail2Test]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Enums.EnumMapperTests.EnumMapperSimpleSuccessfultTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Security.ActiveDirectoryHelperUnitTests.AuthenticateUserTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Security.ActiveDirectoryHelperUnitTests.GetADUserInfoTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Security.ActiveDirectoryHelperUnitTests.GetAllUsersTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Security.ActiveDirectoryHelperUnitTests.IsInGroupTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.NoParameter]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.NoParameterWithCallback]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.OneParameterNoCallback]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.OneParameterWithCallback]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Text.StringExtensionsTests.DeleteLinesTest]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Text.StringExtensionsTests.IsNullOrEmptyTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Text.StringExtensionsTests.TestPlurals]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Text.StringExtensionsTests.ToDateTimeTests]]></message>
      <message level="high"><![CDATA[Passed                GEMS.Shared.UnitTests.Text.StringExtensionsTests.ToEnumTests]]></message>
      <message level="high"><![CDATA[43/43 test(s) Passed]]></message>
      <message level="high" />
      <message level="high"><![CDATA[Summary]]></message>
      <message level="high"><![CDATA[-------]]></message>
      <message level="high"><![CDATA[Test Run Completed.]]></message>
      <message level="high"><![CDATA[  Passed  43]]></message>
      <message level="high"><![CDATA[  ----------]]></message>
      <message level="high"><![CDATA[  Total   43]]></message>
      <message level="high"><![CDATA[Results file:  E:\GEMS_Build\Integration\TestResults\GEMS.Shared.UnitTests.trx]]></message>
      <message level="high"><![CDATA[Test Settings: Default Test Settings]]></message>
      <message level="high"><![CDATA[Committing...]]></message>
      <message level="high"><![CDATA[Visited Classes 20 of 26 (76.9230769230769)]]></message>
      <message level="high"><![CDATA[Visited Methods 74 of 102 (72.5490196078431)]]></message>
      <message level="high"><![CDATA[Visited Points 533 of 718 (74.2339832869081)]]></message>
      <message level="high"><![CDATA[Visited Branches 141 of 243 (58.0246913580247)]]></message>
      <message level="high" />
      <message level="high"><![CDATA[==== Alternative Results (includes all methods including those without corresponding source) ====]]></message>
      <message level="high"><![CDATA[Alternative Visited Classes 21 of 27 (77.7777777777778)]]></message>
      <message level="high"><![CDATA[Alternative Visited Methods 91 of 125 (72.8)]]></message>

.... and it goes on and on with the other unit tests, but 
I showed the above just to demonstrate that my unit tests are in fact being run

    </target>
  </project>
</msbuild> 
```

这是我的 ccnet.config 中的发布者部分

```
<publishers>
    <statistics />
    <xmllogger />
    <artifactcleanup cleanUpMethod="KeepLastXBuilds"
                   cleanUpValue="50" />
    <buildpublisher>
        <sourceDir>E:\GEMS_Build\Integration\TestResults\</sourceDir>
        <publishDir>E:\GEMS_Build\Integration_Artifacts\</publishDir>
        <useLabelSubDirectory>true</useLabelSubDirectory>
    </buildpublisher>
    <merge>
        <files>
            <file>TestResults\GEMS.Shared.UnitTests.trx</file>
            <file>TestResults\GEMS.Web.UnitTests.trx</file>
        </files>
    </merge>
</publishers> 
```

我搜索了整个构建日志，从我的 .trx 文件中的标签中查找单词。像**TestResult**、**TestDefinitions**、**ResultSummary**等词......我找不到它们（除了作为路径名的一部分出现的词 TestResult ）。.trx 文件显然没有被合并到......我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:03:34.307

我认为问题在于您在 xmllogger 之后进行了合并

来源： [http ://www.cruisecontrolnet.org/projects/ccnet/wiki/File_Merge_Task](http://www.cruisecontrolnet.org/projects/ccnet/wiki/File_Merge_Task)

# python - 覆盖烧瓶 url 前缀

> ID：14585107
> 
> 赞同：2
> 
> 时间：2013-01-29T14:22:49.163
> 
> 标签：python, url, flask

我有一个包含许多路由的蓝图，它使用 url_prefix 选项进行实例化：

```
myxyz = Blueprint('xyz', __name__, url_prefix='/xyz') 
```

这适用于所有路线，没问题。但是，蓝图中的一条路由不需要此前缀，但仍然是蓝图中的一部分。

有没有办法覆盖蓝图中路由定义中的前缀？

编辑：

似乎没有直接的方法，快速的解决方法是将前缀硬编码到所有需要它的路由中，这与我所要求的相反（但现在有效）。

# css - CSS3 1px 对角线渐变

> ID：14585110
> 
> 赞同：2
> 
> 时间：2013-01-29T14:23:02.497
> 
> 标签：css, gradient, diagonal

我想使用 CSS3 创建一个对角线图案，如下所示：

![在此处输入图像描述](../Images/06b771ea1a4389eb42830930cfac00ba.png)

所以1px深色对角线，1px浅对角线等等......

这就是我想出的，我觉得我很接近，但有些事情肯定是不对的：

```
background-color: #454545;
background-image: repeating-linear-gradient(-45deg, rgba(0,0,0,0.2), rgba(0,0,0,0.2) 1px, transparent 1px, transparent 4px); 
```

演示：

[http://tinkerbin.com/6mTBtADt](http://tinkerbin.com/6mTBtADt)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:39:29.310

只需在现有代码中使用背景尺寸尝试添加此背景尺寸：8px 8px;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:29:32.877

您的代码在 Firefox 中看起来很棒，但是当我在 Chrome 中查看它时可以看到问题。

它实际上看起来你的渐变是正确的，因为如果你在浏览器上重新绘制（即通过调整它的大小）它有时看起来接近 Firefox 版本。这让我相信这是 Chrome 中的一个错误。

如果你从 1px 增加到 4px，你可以看到它正在工作，但非常参差不齐。

# c - 使用 libxml2 的 XPath 在 XML 文档中查找命名空间节点时出现问题

> ID：14585111
> 
> 赞同：0
> 
> 时间：2013-01-29T14:23:03.127
> 
> 标签：c, xml, xpath, xml-parsing, libxml2

鉴于以下文件，我想提取`tns:EchoResponse`. （为了便于阅读，对原始文档进行了美化。）

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
  xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <tns:EchoResponse 
          xmlns:tns="http://www.apis-it.hr/fin/2012/types/f73" 
          xsi:schemaLocation="http://www.apis-it.hr/fin/2012/types/f73 FiskalizacijaSchema.xsd "
          >
            hello
         </tns:EchoResponse>
    </soap:Body>
</soap:Envelope> 
```

我解析了文档，创建了 XPath 上下文，注册了命名空间`soap`和`tns`，然后使用以下 XPath 表达式运行了查询。

```
//soap:Envelope[1]/soap:Body[1]/tns:EchoResponse[1] 
```

不幸的是，只有忽略名称空间并仅使用本地名称的查找似乎有效：

```
//*[local-name(.) = 'Envelope']/*[local-name(.) = 'Body'][1]/*[local-name(.) = 'EchoResponse'][1] 
```

所以……**我做错了什么？我错误地假设了什么？**这是处理此文档的代码片段。

```
 xmlDocPtr xmldoc = xmlReadMemory(databuffer, datasize, ISFEndpointURL(), NULL, 0);
    if(!xmldoc)
    {
        err = -1;
        goto finalize;
    }

    xmlXPathContextPtr xpathCtx = xmlXPathNewContext(xmldoc);
    if(!xpathCtx)
    {
        err = -1;
        xmlFreeDoc(xmldoc);
        goto finalize;
    }

    xmlXPathRegisterNs(xpathCtx, BAD_CAST "soap", BAD_CAST "http://schemas.xmlsoap.org/soap/envelope");
    xmlXPathRegisterNs(xpathCtx, BAD_CAST "tns", BAD_CAST "http://www.apis-it.hr/fin/2012/types/f73");

    // //soap:Envelope[1]/soap:Body[1]/*[local-name(.) = 'EchoResponse']
    xmlXPathObjectPtr xpathObj = xmlXPathEvalExpression(BAD_CAST "./*[local-name(.) = 'Envelope']/*[local-name(.) = 'Body'][1]/*[local-name(.) = 'EchoResponse'][1]", xpathCtx);
    if(!xpathObj)
    {
        err = -1;
        xmlXPathFreeContext(xpathCtx);
        xmlFreeDoc(xmldoc);
        goto finalize;
    }
    if(xmlXPathNodeSetIsEmpty(xpathObj->nodesetval)){
        err = -1;
        xmlXPathFreeObject(xpathObj);
        xmlXPathFreeContext(xpathCtx);
        xmlFreeDoc(xmldoc);
        printf("%s: No XPath result\n", __FUNCTION__);
        goto finalize;
    }

    if(strcmp((char *)xmlXPathCastNodeSetToString(xpathObj->nodesetval), echoText))
    {
        err = 1;
        xmlXPathFreeObject(xpathObj);
        xmlXPathFreeContext(xpathCtx);
        xmlFreeDoc(xmldoc);
        printf("%s: Incorrect echo result: %s\n", __FUNCTION__, xpathObj->stringval);
        goto finalize;
    }

    xmlXPathFreeObject(xpathObj);
    xmlXPathFreeContext(xpathCtx); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:50:44.340

XML 文档中的`soap`前缀绑定到命名空间 URI

```
http://schemas.xmlsoap.org/soap/envelope/ 
```

`soap`而您的代码将XPath 上下文中的前缀绑定到不同的 URI

```
http://schemas.xmlsoap.org/soap/envelope 
```

XPath 不匹配任何内容，因为它正在寻找错误的名称空间。

# c# - “Abend in target program”作为托盘执行 Web 服务时的一般异常

> ID：14585117
> 
> 赞同：0
> 
> 时间：2013-01-29T14:23:25.110
> 
> 标签：c#, .net, web-services, wsdl, mainframe

我只有一个与**大型机**通信的 Web 服务，我不只管理**.Net**部分的大型机。

直到上周一切正常。当服务调用服务上的 Input 函数时，我刚开始收到此错误

消息：

> “在目标程序中终止”

来源：

> `System.Web.Services`

堆栈跟踪：

```
 at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   at ws.UIBP0012Service.UIBP0012Operation(ProgramInterface UIBP0012Operation1)
   at CW.BusinessLayer_C.boServiceIVRTwo.Traer_Perfil_IVRTwo() 
```

请帮助，如果您需要任何其他信息，请发表评论

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T12:39:16.013

由于目标程序出现异常结束（异常结束），很可能您的 SOAP 请求格式正确，并且在一定程度上符合 WSDL。如果这是您正在与之通信的 CICS Web 服务，则可能是验证已关闭（根据 IBM 的建议，它通常在生产环境中），因此您可能已经传递了目标程序在您的请求中认为无效的数据。目标程序中也可能存在错误。

在任何情况下，您都可能希望与负责目标程序的人员交谈，并且你们两个可以就解决方案进行协作。

# excel - 从电子邮件列中获取名称

> ID：14585118
> 
> 赞同：1
> 
> 时间：2013-01-29T14:23:28.037
> 
> 标签：excel, excel-formula

我有一个由电子邮件组成的专栏。其中大部分采用以下格式：

```
name.surname@domain.com 
```

有什么方法可以提取“姓名”并填充第 2 列，并提取“姓氏”并使用 excel 公式填充第 3 列？

因此，这些列将显示为：

```
name.surname@domain.com       name         surname 
```

任何帮助深表感谢。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:27:45.107

姓名：`=LEFT(A1,SEARCH(".",A1)-1)`

姓：`=MID(A1, SEARCH(".",A1)+1,SEARCH("@",A1)-SEARCH(".",A1)-1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:25:51.430

我将使用 Left 和 Mid 函数分别获取第 2 列和第 3 列。我会在一分钟内为你写出公式...

第 2 栏：

```
=LEFT(A1,FIND(".",A1)-1) 
```

第 3 栏：

```
=MID(A1,FIND(".",A1)+1, FIND("@",A1)-FIND(".",A1)-1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:30:17.323

此版本可以提取姓氏

`=REPLACE(LEFT(A1,FIND("@",A1)-1),1,FIND(".",A1),"")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-26T17:59:03.347

考虑到格式是 firstname.lastname@domain.com，第一行是您的标题行，您需要格式正确的名字和姓氏，这是公式

### 名

```
=PROPER(MID(A2,1,FIND(".",A2)-1)) 
```

### 姓

```
=PROPER(MID(A2,FIND(".",A2)+1,FIND("@",A2)-FIND(".",A2)-1)) 
```

假设您的电子邮件 ID 在 A2 中，并且需要分别在 B2 和 C2 中提取名字和姓氏

# mobile - Sencha Touch 2：如何在列表项点击上创建/显示新视图

> ID：14585128
> 
> 赞同：1
> 
> 时间：2013-01-29T14:24:03.463
> 
> 标签：mobile, extjs, sencha-touch, sencha-touch-2

我有一个要动态填充的列表，我想创建一个新视图，然后通过在项目上的按钮点击动态显示它（在选项卡视图中），但我认为我做的不正确，我怎样才能正确地实现这一点？

```
 Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    name: 'MyApp',
    launch: function () {

        Ext.Viewport.add({
            xclass: 'MyApp.view.Main'
        });

    }
});

Ext.define('MyApp.view.Main', {
    extend: 'Ext.TabPanel',
    config: {
        fullscreen: true,
        tabBarPosition: 'bottom',

        defaults: {
            styleHtmlContent: true
        },
        items: [
            {xtype:'schedulecard'},
            {xtype: 'settingscard'}
        ]
    }

});

var scheduleItems = Ext.create('Ext.data.Store', {
    storeId: 'schedulestore',
    fields: ['name', 'day'],
    sorters: 'day',
    grouper: {
        groupFn: function (record) {
            return record.get('day')[0];
        }
    },

    data: [
     { name: 'Cowper', day: 'Monday' },
     { name: 'Everett', day: 'Monday' },
     { name: 'University', day: 'Tuesday' },
     { name: 'Forest', day: 'Tuesday' }
    ]
}); // create()

Ext.define('MyApp.view.Schedule', {
    extend: 'Ext.List',
    xtype: 'schedulecard',
    grouped: true,
    config: {
        title: 'Schedule',
        iconCls: 'settings',
        store: 'schedulestore',
        itemTpl: '<span style="font-weight:bold;">{name}</span> {day}',
        listeners: {
            itemtap: function (list, index, item, evt) {
                **//In here is where I wish to to display new View**
            }
        },
        items: [{
            xtype: 'titlebar',
            docked: 'top',
            title: 'MyApp'
        }]
    }
});

scheduleItems.add({ name: 'test', day: 'Wednesday' });
scheduleItems.add({ name: 'test', day: 'Wednesday' });
scheduleItems.add({ name: 'test', day: 'Wednesday' });
scheduleItems.add({ name: 'test', day: 'Wednesday' });
scheduleItems.add({ name: 'test', day: 'Thursday' });
scheduleItems.add({ name: 'test', day: 'Thursday' });
scheduleItems.add({ name: 'test', day: 'Thursday' });
scheduleItems.add({ name: 'test', day: 'Friday' });
scheduleItems.add({ name: 'test', day: 'Friday' });

Ext.define('MyApp.view.Settings', {
    extend: 'Ext.Panel',
    xtype: 'settingscard',
    config: {
        title: 'Settings',
        iconCls: 'settings',
        html: 'Settings new',
        items: [{
            xtype: 'titlebar',
            docked: 'top',
            title: 'MyApp',
            items: [
                {
                    align: 'left',
                    text: 'Back'
                },
                {
                    align: 'right',
                    text: 'refresh'
                }
            ]
        }]
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:12:06.873

这取决于您要创建什么，但假设您要创建一个浮动面板，您可以这样做：

```
itemtap: function(list, index, item, e) {
    var panel = Ext.create('Ext.Panel', {
        floating: true,
        centered: true,
        width: 200,
        height: 200,
        html: 'Hello world!'
    });

    Ext.Viewport.add(panel);
    panel.show();
} 
```

# php - 我的基于数组值为空的 if 语句拒绝工作

> ID：14585130
> 
> 赞同：0
> 
> 时间：2013-01-29T14:24:05.310
> 
> 标签：php

我编写了以下脚本来回显 Outlook CSV 文件的内容。

这是脚本的一部分，它将 CSV 分解为一个数组，该数组仅提取以下三个值，名字、姓氏和电子邮件。

```
for ($i=87; $i<= $countdel-87; $i=$i+88 ){

if(empty($readout[$i])){ echo "<b style=\"color:RED;\">FIRST NAME N/A</b>"; }
else{ echo str_replace("Categories","",$readout[$i]).".........................."; }

if(empty($readout[$i+2])){ echo "<b style=\"color:RED;\">LAST NAME N/A</b>".".........................."; }
else{ echo $readout[$i+2].".........................."; };

if(empty($readout[$i+14])){ echo "<b style=\"color:RED;\">EMAIL N/A</b>"; }
else{ echo $readout[$i+14]; };

echo "<br>";
} 
```

然后代码会输出一个如下所示的字符串：

```
Joe ............. Smith ...............jSmith@yahoo.com 
```

现在说我们没有姓氏或电子邮件，而是会吐出

```
Joe .......... LAST NAME N/A .............. EMAIL N/A 
```

这一切都只是花花公子。我遇到问题的地方是当我没有名字时，它会打印出来。

```
........... Smith ..............jSmith@yahoo.com 
```

这段代码似乎是问题所在：

```
if(empty($readout[$i])){ echo "<b style=\"color:RED;\">FIRST NAME N/A</b>"; } 
```

看起来它`$readout[$i]`永远不会是空的，尽管当没有价值时我从来没有看到任何打印出来的东西。但是所有其他`$readout[$i+$foo]`数组都可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:09:43.933

我能够让它工作，发生的事情是`$readout[$i]`在它的开头有空白，导致它不是“空的”。除此之外，Outlook CSV 群集的第二行的第一列与第一列的最后一行共享该列。所以这就是为什么我必须从`$readout[$i]`FYI 中删除“类别”。

以下是我如何将新结构构建到问题 if 语句中。

我只是使用该`trim()`功能删除空白，然后使用`str_replace()`删除“类别”一词。最后我检查该值是否为空白。

```
if(trim(str_replace("Categories","",$readout[$i])) == ""){ echo "<b style=\"color:RED;\">FIRST NAME N/A</b>".".........................."; }
else{ echo str_replace("Categories","",$readout[$i]).".........................."; } 
```

谢谢大家的回答和建议。

# http-status-code-404 - Orchard Cms Custom 404 不会在正常页面布局中显示

> ID：14585136
> 
> 赞同：2
> 
> 时间：2013-01-29T14:24:29.997
> 
> 标签：http-status-code-404, orchardcms

我在我的 Orchard CMS 网站上创建了一个自定义 404 和一个自定义错误页面，如[David Haydan 的博客所述](http://www.davidhayden.me/blog/creating-custom-404-and-error-pages-in-orchard-cms)

自定义模板工作正常。但是，错误显示没有任何正常的页面布局。或造型

![在此处输入图像描述](../Images/2833535747fc373fc56643dbedb936f1.png)

如何使用我的默认 Layout.cshtml 呈现此内容？

当我切换到主题机主题时，也会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:49:44.313

你在使用**重写规则**模块吗？

如果是这种情况，那么这里已经报告了这个问题：http: [//orchardrewriterules.codeplex.com/workitem/11](http://orchardrewriterules.codeplex.com/workitem/11)

它说：“它可以通过 ThemedAttribute 修复”。这是通过在项目 Contrib.RewriteRules/Controllers/HomeController.cs 的 HomeController 中添加属性“Themed”来完成的。完成后将如下所示：

```
using Orchard.Themes;
using System.Web.Mvc;

namespace Contrib.RewriteRules.Controllers {
  [Themed]
  public class HomeController : Controller {
    public ActionResult Rewrite(string path) {
      return new HttpNotFoundResult();
    }
  }
} 
```

（重现错误很简单。启动一个全新的 Orchard 站点，并测试 404 是否可以与 The Theme Machine 一起使用。然后我安装并启用 1.2.5 版的“重写规则”模块，您应该能够看到NotFound.cshtml 的内容没有布局。禁用重写规则模块将其恢复为正常。）

# javascript - crm 2011 如何使用 javascript 隐藏/显示功能区按钮

> ID：14585141
> 
> 赞同：4
> 
> 时间：2013-01-29T14:24:45.050
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm, dynamics-crm-4

我试图隐藏/显示`CRM 2011`功能区中定义的条件的按钮`JavaScript`。JavaScript 函数返回`true/false`. 所以我不想将 XML 更改为`Hide/Show`按钮。

我试图按如下方式进行操作，但没有任何运气。谁能建议我正确的方法。

提前致谢

```
<RibbonDiffXml>
  <CustomActions>
    <CustomAction Id="Email.Form.email.MainTab.Send.CustomAction" Location="Mscrm.Form.email.Send" Sequence="2">
      <CommandUIDefinition>
        <Button Id="Mscrm.Form.email.Send" Command="Mscrm.Form.email.Send_Custom" Sequence="1" Alt="$Resources:Ribbon.Form.email.MainTab.Actions.Send"     LabelText="$Resources:Ribbon.Form.email.MainTab.Actions.Send" Image16by16="/_imgs/SFA/SendAsEmail_16.png" Image32by32="/_imgs/SFA/SendAsEmail_32.png" TemplateAlias="o1" ToolTipTitle="$Resources:Mscrm_Form_email_MainTab_Actions_Send_ToolTipTitle" ToolTipDescription="$Resources:Mscrm_Form_email_MainTab_Actions_Send_ToolTipDescription" />
      </CommandUIDefinition>
    </CustomAction>
  </CustomActions>
  <Templates>
    <RibbonTemplates Id="Mscrm.Templates"></RibbonTemplates>
  </Templates>
  <CommandDefinitions>
    <CommandDefinition Id="Mscrm.Form.email.Send_Custom">
      <EnableRules/>
      <DisplayRules>
        <DisplayRule Id="Mscrm.CanWritePrimary" />
        <DisplayRule Id="Mscrm.Form.email.InDraftOrFailedState" />
        <DisplayRule Id="Mscrm.Form.email.Send.DisplayRule" />
      </DisplayRules>
      <Actions>
        <JavaScriptFunction FunctionName="HideSendEmailButton"     Library="$webresource:sandbox_email.js" />
      </Actions>
    </CommandDefinition>
  </CommandDefinitions>
  <RuleDefinitions>
    <TabDisplayRules />
    <DisplayRules>
      <DisplayRule Id="Mscrm.Form.email.Send.DisplayRule">
        <ValueRule Field="new_type" Value="false" InvertResult="false" />
      </DisplayRule>
    </DisplayRules>
    <EnableRules />
  </RuleDefinitions>
  <LocLabels />
</RibbonDiffXml> 
```

**Javascript**

```
function HideSendEmailButton() {

     // Query for full name of the current user 
     var userId = Xrm.Page.context.getUserId(); 

    if(userId == '---some Id---')
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T23:53:22.067

你真的不能这样做（感谢微软）..你可以使用具有自定义规则选项的启用规则，你可以在其中使用 javascript 函数：

[http://msdn.microsoft.com/en-us/library/gg328073.aspx](http://msdn.microsoft.com/en-us/library/gg328073.aspx)

但是在 displsy 规则中，您没有 customrule 选项：

[http://msdn.microsoft.com/en-us/library/gg334209.aspx](http://msdn.microsoft.com/en-us/library/gg334209.aspx)

因此，有一个示例如何在启用/禁用规则中使用 javascript：

[http://howto-mscrm.com/2011/04/how-to-series-6-how-to-use-customrule.html](http://howto-mscrm.com/2011/04/how-to-series-6-how-to-use-customrule.html)

# javascript - 解析 responseText 或更改 responseXML 中的 responseText

> ID：14585142
> 
> 赞同：0
> 
> 时间：2013-01-29T14:24:46.297
> 
> 标签：javascript, xml

好的，所以我的 responseText 包含一个 '&' 字符，这似乎在解析时会导致问题。所以我想抓住我的 responseText 并将 ' ' 更改`&`为 ' `&amp;`'

我知道 responseText 是一个字符串，理想情况下我想将它反馈到 responseXML 中，以使用带有 & 的新 xml 进行解析

非常感谢任何帮助

```
 responseXML  = xmlhttp.responseXML;
        var myResponseText = "<document-metadata><item><name>ccms_customer_key</name><value>0100000931012004110</value></item><item><name>ccms_customer_name</name><value>Mr Joe Bloggs</value></item><item><name>ccms_customer_salutation_name</name><value>Mr</value></item><item><name>ccms_rm_name</name><value></value></item><item><name>ccms_dms_key</name><value>2432559OEKM</value></item><item><name>ccms_customer_address</name><value>Main & Street Dublin </value></item></document-metadata>";
        /*
        if(myResponseText.indexOf('&') >= 0)    
        {
            var str = myResponseText.replace(/&/g,"&amp;");
            return str;
        }
        */
        //old line getSession().setAttribute('LH_METADATA_XML',xmlhttp.responseText);
        getSession().setAttribute('LH_METADATA_XML',myResponseText);

        // extract COMP_DMS_KEY from metadata
        var root = responseXML.getElementsByTagName('document-metadata').item(0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:39:34.247

为什么不以完全不同的方式解析字符串，例如 with [`DOMParser`](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)or （可能是由于错误而需要的）[`document.implementation.createHTMLDocument("")`](https://developer.mozilla.org/en-US/docs/DOM/DOMImplementation.createHTMLDocument)，甚至只是创建一个*HTMLDivElement*和设置`innerHTML`？

```
var doc = document.implementation.createHTMLDocument(""); // create a HTML document
doc.body.innerHTML = "<document-metadata><item><name>ccms_customer_key</name><value>0100000931012004110</value></item><item><name>ccms_customer_name</name><value>Mr Joe Bloggs</value></item><item><name>ccms_customer_salutation_name</name><value>Mr</value></item><item><name>ccms_rm_name</name><value></value></item><item><name>ccms_dms_key</name><value>2432559OEKM</value></item><item><name>ccms_customer_address</name><value>Main & Street Dublin </value></item></document-metadata>";
doc.body; // navigate to your root node from here 
```

这样做（即使用*text/html*而不是*application/xml*）将意味着解析器不那么严格，并且不会被`&`DOM 方法的能力所困扰。

从这里您现在甚至可以重新序列化并将其转换为真正的 XML 文档，例如`root`您的根节点

```
var x = new XMLSerializer(), p = new DOMParser(), xml_string, xml_doc;
xml_string = x.serializeToString(root); // now we have a valid string
xml_doc = p.parseFromString(xml_string, 'application/xml'); // and now it is an XML document 
```

# android - 我可以只提供一个可绘制文件夹而不是 4 个吗（hdpi、ldpi、mdpi、xhpi）

> ID：14585144
> 
> 赞同：0
> 
> 时间：2013-01-29T14:24:49.487
> 
> 标签：android

如果我只提供一个可绘制文件夹会怎样？我是否必须提供 4 种不同类型的图像，否则我的应用程序会崩溃？

我知道不同的屏幕有不同的文件夹。如果我为高分辨率屏幕提供低分辨率图像，会发生什么？只是屏幕上的图像不好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:28:49.097

如果您将所有可绘制对象放在`res/drawable`文件夹中，则不会发生任何严重的事情。但是，正如您已经提到的，取决于设备屏幕的分辨率，结果可能是好的或可怕的（或介于两者之间）。

因此，当您仍在编写应用程序时，这是一个合适的选择（以节省一些时间），但是当您将应用程序发布给公众（并允许它在多种设备类型上运行）时，您确实应该为所有人提供 drawable各种（支持的）分辨率！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:28:25.557

你可以通过用“drawable”命名你的文件夹来做到这一点。但我不推荐这样做，因为：

1.  你不能通过添加新图像来扩展你的应用程序，因为你有不同的设备；
2.  您必须注意调整和图像处理；
3.  您必须注意低 dpi 导致的低分辨率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:34:41.617

如果有问题的图像都是 9-patch 图像，它们会按比例放大/缩小就好了。如果不是，它们看起来好坏取决于您在哪个文件夹中拥有可绘制对象以及应用程序当前正在运行的设备。

例如，如果您将所有可绘制对象放在 drawable-mdpi 文件夹中并在受支持的设备上使用该应用程序，它们*可能*看起来不错。当 dpi 变为更高的**hdpi**或**xhdpi**设备时，它们几乎总是看起来很糟糕（像素化）。

根据您正在处理的图像类型，尝试使用尽可能多的 9-patch 图像，并在您可以使用的任何地方使用。

话虽这么说，你有可绘制的变体是有原因的。而且我不确定仅使用标识符是否是一种好习惯，特别是考虑到现在大多数开发人员也在为平板电脑构建。

我想每个人都是他自己的......

阅读有关[NinePatch](http://developer.android.com/reference/android/graphics/NinePatch.html)和[Draw 9-patch 工具的](http://developer.android.com/tools/help/draw9patch.html)更多信息。

# android - Android：如何读取低级网络信息（RSCP、EcN0、第 3 层信令）？

> ID：14585159
> 
> 赞同：4
> 
> 时间：2013-01-29T14:25:28.997
> 
> 标签：android, gsm, at-command, umts

我正在尝试创建类似于[QualiPoc](http://www.swissqual.com/index.php/systems/qualipoc_android.html)的用于测量 2G 3G 网络的 android 应用程序。

我知道有用于收集网络信息的基本 Android API，例如：[How to know Location Area Code and Cell ID in android phone](https://stackoverflow.com/questions/4152373/how-to-know-location-area-code-and-cell-id-in-android-phone)

但是，此 API 相当有限，而且还不够（例如：在我的手机上，RSCP 值每 10 秒刷新一次……）

由于我的手机已经植根，我已经设法在高通调制解调器 /dev/smd0 上运行基本的 AT 命令 [如何向 android 发送命令然后得到它的答案？](https://stackoverflow.com/questions/9306813/how-to-send-a-command-to-android-and-then-get-its-answer)

我应该使用哪些 AT 命令来读取 RxLevel、RXQuality、CellID、LocationAreaCode、RSCP、EcN0、CQI？

是否可以使用 AT 命令读取 3 级信号？

是否有更好的 Android Qualcomm API 来获取这些信息？

什么是 Gobi / QMI 接口，可以用来读取网络数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:51:04.887

> 我应该使用哪些 AT 命令来读取 RxLevel、RXQuality、CellID、LocationAreaCode、RSCP、EcN0、CQI？

AT+CREG? 给出 CellId 和 LAC

+CSQ 以 dBm 和 RXQUAL 为单位给出 RSSI

有关标准 3GPP AT 命令，请参阅 3GPP TS 27.007，可从[www.3gpp.org 获得](http://3gpp.org)。您的设备可能也支持某些制造商特定的 AT 命令。

> 是否可以使用 AT 命令读取 3 级信号？

不，您不能读取 RRC 消息，只能从中选择参数。您可以使用 Qualcomm 诊断工具读取第 3 层信令消息，但您必须与 Qualcomm 达成协议才能获得这些消息。

> 是否有更好的 Android Qualcomm API 来获取这些信息？什么是 Gobi / QMI 接口，可以用来读取网络数据吗？

Gobi/QMI 是高通接口。[Qualcomm 文档](https://developer.qualcomm.com/download)中还有关于 Qualcomm 设备支持的 AT 命令的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T06:52:52.127

在终端窗口中，您可以运行例如 (busybox) awk 脚本，该脚本处理 logcat -b radio 的输出，生成例如，

```
16:33:18 CREG: 1, "28D6", "01C6B623", 2
[10454 29799971 00454 46627]
16:33:19 ECSQ: 8, 99, -392, [-98] -455, -62 
```

无论如何，“logcat -b radio”可能已经包含您正在寻找的所有内容。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2014-01-21T11:23:33.590

Android 市场上有一个名为“RF Signal Tracker”的应用程序，它会为您提供 RF 级别以及 Cell ID 信息。

# php - 用于 HTML 表单和 php 的更新语法

> ID：14585161
> 
> 赞同：1
> 
> 时间：2013-01-29T14:25:30.707
> 
> 标签：php, mysql, sql-update

我有一个用 HTML 创建的表单。有时，我们的代表需要回来编辑他们之前输入表格的数据。我已经设置了他们可以输入 OrderForm ID（例如 1234）的位置，它将相应地填充字段。我希望他们能够更新或更改字段，然后当他们点击提交时，它将创建一个附加 .1 的新数字（1234.1），并更新 MySQL 数据库。

我已经能够创建表单、填充搜索字段，但不知道如何更新和分配“.1”给表单 ID。

这是我的代码：

```
<?php

$connection = mysql_connect('localhost','username','*******') or die ("Couldn't connect to server."); 
$db = mysql_select_db('DBName', $connection) or die ("Couldn't select database.");

// -------------------------------------------------------------------
// Field Names
// -------------------------------------------------------------------

$drepid=mysql_real_escape_string($_POST['drepid']);
$datepicker=mysql_real_escape_string($_POST['datepicker']);
$repemail=mysql_real_escape_string($_POST['repemail']);
$dateneeded=mysql_real_escape_string($_POST['dateneeded']);
$description=mysql_real_escape_string($_POST['description']);
$qty=mysql_real_escape_string($_POST['qty']);
$pgsizeh=mysql_real_escape_string($_POST['pgsizeh']);
$pgsizew=mysql_real_escape_string($_POST['pgsizew']);
$pageno=mysql_real_escape_string($_POST['pageno']);
$stock=mysql_real_escape_string($_POST['stock']);
$ink=mysql_real_escape_string($_POST['ink']);
$inknote=mysql_real_escape_string($_POST['inknote']);
$rfq=mysql_real_escape_string($_POST['rfq']);
$finishing=mysql_real_escape_string($_POST['finishing']);
$dfirstname=mysql_real_escape_string($_POST['dfirstname']);
$dlastname=mysql_real_escape_string($_POST['dlastname']);
$dorganization=mysql_real_escape_string($_POST['dorganization']);
$email=mysql_real_escape_string($_POST['email']);
$daddress1=mysql_real_escape_string($_POST['daddress1']);
$daddress2=mysql_real_escape_string($_POST['daddress2']);
$dcity=mysql_real_escape_string($_POST['dcity']);
$dstate=mysql_real_escape_string($_POST['dstate']);
$dzip=mysql_real_escape_string($_POST['dzip']);
$phone=mysql_real_escape_string($_POST['phone']);
$fax=mysql_real_escape_string($_POST['fax']);
$proof=mysql_real_escape_string($_POST['proof']);
$whoproof=mysql_real_escape_string($_POST['whoproof']);
$quote=mysql_real_escape_string($_POST['quote']);
$amount=mysql_real_escape_string($_POST['amount']);
$delivery=mysql_real_escape_string($_POST['delivery']);
$notes=mysql_real_escape_string($_POST['notes']);

$data = "UPDATE DB_Table SET drepid='$drepid', datepicker='$datepicker', repemail='$repemail', dateneeded='$dateneeded', description='$description', qty='$qty', pgsizeh='$pgsizeh', pgsizew='$pgsizew', pageno='$pageno', stock='$stock', ink='$ink', inknote='$inknote', rfq='$rfq', finishing='$finishing', dfirstname='$dfirstname', dlastname='$dlastname', dorganization='$dorganization', email='$email', daddress1='$daddress1', daddress2='$daddress2', dcity='$dcity', dstate='$dstate', dzip='$dzip', phone='$phone', fax='$fax', proof='$proof', whoproof='$whoproof', quote='$quote', amount='$amount', delivery='$delivery', notes='$notes' WHERE drfq=.$drfq";
$query = mysql_query($data) or die("Couldn't execute query\"$data\" Error:" . mysql_error()); 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:00:37.550

*   你永远不会更新一行，你将永远插入一个新行
*   如果多人同时使用系统，你如何处理冲突？如果 A 加载记录，B 加载记录，A 保存更改并且... B 覆盖这些更改，会发生什么情况
*   您的 id 字段是小数（数字）还是字符串？假设您正在多次编辑记录 1004。当达到记录 1004.9 时会发生什么，您是否递增到 1004.10（在数学上相当于 1004.1）。您如何对 ID 进行排序？您如何确定哪个 ID 是“最后一次”更新？

另一种可能值得考虑的方法是使用历史表。基本上，您将原始表保留为每条记录一条记录，并在历史记录表中跟踪所做的更改、日期、用户 ID。通过这种方式，您可以重建任何先前版本的记录。冲突也可以相当容易地解决。您还可以使用您想要的任何伪十进制表示法来呈现记录的每个版本，而不会出现排序问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:11:34.293

另一种方法是像其他答案一样添加几个字段。添加一个名为 deleted 的字段和一个 child_id/parent_id 字段或类似的东西。当用户修改记录时，将记录标记为已删除并复制记录（不设置已删除字段）并将 parent_id 设置为父记录。添加到代码以进行更新等，您只需要搜索未删除的记录。而且还允许您查看一段时间内记录的更改。

# android - 上传文件时出现Android OutOfMemoryError

> ID：14585175
> 
> 赞同：1
> 
> 时间：2013-01-29T14:26:06.790
> 
> 标签：android, out-of-memory

我正在使用此博客中的代码上传文件[教程链接](http://reecon.wordpress.com/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/)。它工作正常，但如果文件大小很大，我将面临 OutOfMemoryError。我尝试使用这种方法，但它不起作用（请求本身下降）

```
 conn.setChunkedStreamingMode(1024); 
```

我也尝试设置标题的长度，但没有用

```
 conn.setFixedLengthStreamingMode(((int) file.length())); 
```

但这也没有用。我该怎么办？？

# java - 使用 HtmlUnit 下载页面会引发异常

> ID：14585178
> 
> 赞同：0
> 
> 时间：2013-01-29T14:26:25.117
> 
> 标签：java, javascript, http, http-headers, htmlunit

我正在尝试下载此页面：[http](http://ekw.ms.gov.pl/pdcbdkw/pdcbdkw.html) ://ekw.ms.gov.pl/pdcbdkw/pdcbdkw.html使用 HtmlUnit 2.11。在这个页面GET之后是JS脚本计算和设置cookie并提交表单。我使标题看起来与我的 FF 18 上的完全一样 - 我检查了它，并且 HtmlUnit 使用 javascript 计算的标题和 cookie 是正确的。我通过下载带有脚本的页面并更改表单中的操作来检查它以发布我自己的脚本，从而打印请求标头和正文。我使用以下代码：

```
WebClient client = new WebClient();

        client.setWebConnection(new HttpWebConnection(client) {
            public WebResponse getResponse(WebRequest request) throws IOException {
                if(request.getHttpMethod() == HttpMethod.POST) {
                    request.removeAdditionalHeader("Cache-Control");
                }
                else {
                    request.setAdditionalHeader("Cache-Control","max-age=0");
                }
                WebResponse response = super.getResponse(request);
                return response;
            }
        });

        client.addRequestHeader("User-Agent","Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0");
        client.addRequestHeader("Host","ekw.ms.gov.pl");
        client.addRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
        client.addRequestHeader("Accept-Language","en-gb,en;q=0.5");
        client.addRequestHeader("Accept-Encoding","gzip, deflate");
        client.addRequestHeader("Connection", "keep-alive");
        HtmlPage html = client.getPage("http://ekw.ms.gov.pl/pdcbdkw/pdcbdkw.html"); 
```

执行代码时出现以下异常（在快捷方式中是由连接重置引起的）：

```
Exception in thread "main" ======= EXCEPTION START ========
Exception class=[java.lang.RuntimeException]
com.gargoylesoftware.htmlunit.ScriptException: Exception invoking submit
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:663)
    at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:559)
    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:525)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.callFunction(JavaScriptEngine.java:594)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.callFunction(JavaScriptEngine.java:569)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.executeJavaScriptFunctionIfPossible(HtmlPage.java:996)
    at com.gargoylesoftware.htmlunit.javascript.host.EventListenersContainer.executeEventHandler(EventListenersContainer.java:208)
    at com.gargoylesoftware.htmlunit.javascript.host.EventListenersContainer.executeBubblingListeners(EventListenersContainer.java:227)
    at com.gargoylesoftware.htmlunit.javascript.host.Node.fireEvent(Node.java:813)
    at com.gargoylesoftware.htmlunit.javascript.host.Node.fireEvent(Node.java:737)
    at com.gargoylesoftware.htmlunit.html.HtmlElement$1.run(HtmlElement.java:853)
    at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:559)
    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:525)
    at com.gargoylesoftware.htmlunit.html.HtmlElement.fireEvent(HtmlElement.java:858)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.executeEventHandlersIfNeeded(HtmlPage.java:1259)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.initialize(HtmlPage.java:227)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:440)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:308)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:373)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:358)
    at cenatorium.kwtest.App.main(App.java:49)
Caused by: java.lang.RuntimeException: Exception invoking submit
    at net.sourceforge.htmlunit.corejs.javascript.MemberBox.invoke(MemberBox.java:163)
    at net.sourceforge.htmlunit.corejs.javascript.FunctionObject.call(FunctionObject.java:452)
    at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpretLoop(Interpreter.java:1473)
    at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpret(Interpreter.java:815)
    at net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.call(InterpretedFunction.java:109)
    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.doTopCall(ContextFactory.java:415)
    at com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.doTopCall(HtmlUnitContextFactory.java:274)
    at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3132)
    at net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.call(InterpretedFunction.java:107)
    at com.gargoylesoftware.htmlunit.javascript.host.EventHandler.call(EventHandler.java:80)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$4.doRun(JavaScriptEngine.java:587)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:651)
    ... 20 more
Caused by: java.lang.RuntimeException: java.net.SocketException: Connection reset
    at com.gargoylesoftware.htmlunit.WebClient.download(WebClient.java:2233)
    at com.gargoylesoftware.htmlunit.javascript.host.html.HTMLFormElement.submit(HTMLFormElement.java:310)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at net.sourceforge.htmlunit.corejs.javascript.MemberBox.invoke(MemberBox.java:137)
    ... 31 more
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:166)
    at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:90)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:281)
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:92)
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:62)
    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:254)
    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:289)
    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:252)
    at org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:191)
    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:300)
    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:127)
    at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:712)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:517)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
    at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:171)
    at cenatorium.kwtest.App$1.getResponse(App.java:38)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1484)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1402)
    at com.gargoylesoftware.htmlunit.WebClient.download(WebClient.java:2226)
    ... 37 more
Enclosed exception: 
java.lang.RuntimeException: Exception invoking submit
    at net.sourceforge.htmlunit.corejs.javascript.MemberBox.invoke(MemberBox.java:163)
    at net.sourceforge.htmlunit.corejs.javascript.FunctionObject.call(FunctionObject.java:452)
    at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpretLoop(Interpreter.java:1473)
    at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpret(Interpreter.java:815)
    at net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.call(InterpretedFunction.java:109)
    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.doTopCall(ContextFactory.java:415)
    at com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.doTopCall(HtmlUnitContextFactory.java:274)
    at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3132)
    at net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.call(InterpretedFunction.java:107)
    at com.gargoylesoftware.htmlunit.javascript.host.EventHandler.call(EventHandler.java:80)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$4.doRun(JavaScriptEngine.java:587)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:651)
    at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:559)
    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:525)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.callFunction(JavaScriptEngine.java:594)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.callFunction(JavaScriptEngine.java:569)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.executeJavaScriptFunctionIfPossible(HtmlPage.java:996)
    at com.gargoylesoftware.htmlunit.javascript.host.EventListenersContainer.executeEventHandler(EventListenersContainer.java:208)
    at com.gargoylesoftware.htmlunit.javascript.host.EventListenersContainer.executeBubblingListeners(EventListenersContainer.java:227)
    at com.gargoylesoftware.htmlunit.javascript.host.Node.fireEvent(Node.java:813)
    at com.gargoylesoftware.htmlunit.javascript.host.Node.fireEvent(Node.java:737)
    at com.gargoylesoftware.htmlunit.html.HtmlElement$1.run(HtmlElement.java:853)
    at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:559)
    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:525)
    at com.gargoylesoftware.htmlunit.html.HtmlElement.fireEvent(HtmlElement.java:858)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.executeEventHandlersIfNeeded(HtmlPage.java:1259)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.initialize(HtmlPage.java:227)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:440)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:308)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:373)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:358)
    at cenatorium.kwtest.App.main(App.java:49)
Caused by: java.lang.RuntimeException: java.net.SocketException: Connection reset
    at com.gargoylesoftware.htmlunit.WebClient.download(WebClient.java:2233)
    at com.gargoylesoftware.htmlunit.javascript.host.html.HTMLFormElement.submit(HTMLFormElement.java:310)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at net.sourceforge.htmlunit.corejs.javascript.MemberBox.invoke(MemberBox.java:137)
    ... 31 more
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:166)
    at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:90)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:281)
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:92)
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:62)
    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:254)
    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:289)
    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:252)
    at org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:191)
    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:300)
    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:127)
    at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:712)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:517)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
    at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:171)
    at cenatorium.kwtest.App$1.getResponse(App.java:38)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1484)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1402)
    at com.gargoylesoftware.htmlunit.WebClient.download(WebClient.java:2226)
    ... 37 more
== CALLING JAVASCRIPT ==
function () {
    [native code, arity=0]
}

======= EXCEPTION END ======== 
```

以下是 POST 中发送的标头（与 FF18 中相同，但顺序不同，但没关系）：

```
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0
Accept-Language: en-gb,en;q=0.5
Host: localhost
Referer: http://localhost/test.php
Accept-Encoding: gzip, deflate
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Content-Length: 69
Content-Type: application/x-www-form-urlencoded
Cookie: TS37535a_75=a538065ddccf975d9ae56e368a94eea0:hklh:781te27c:861731662
----------------- POST content
TS37535a_id=3&TS37535a_md=1&TS37535a_rf=0&TS37535a_ct=0&TS37535a_pd=0 
```

cookie 的值是正确的 - 我检查了它。

那怎么了？？我如何获取此页面 - 它应该返回 html 表单，如您在浏览器中键入[http://ekw.ms.gov.pl/pdcbdkw/pdcbdkw.html](http://ekw.ms.gov.pl/pdcbdkw/pdcbdkw.html)所见...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:24:24.383

经过 2 晚并编写自己的 http 客户端并发送原始请求后，我发现：

1.  在 POST 请求中，数据的发送顺序与它们以 html 形式显示的顺序不同：

    key2=val2&key1=val1&key3=val3

并且应该是

```
key1=val1&key2=val2&key3=val3 
```

它应该无关紧要，但它确实适用于该服务器。

1.  在向服务器发出第二次请求后`connection reset`，我的套接字总是出现异常，我必须重新连接并重试请求。

# kendo-ui - 如何以编程方式添加剑道菜单项？

> ID：14585181
> 
> 赞同：0
> 
> 时间：2013-01-29T14:26:38.077
> 
> 标签：kendo-ui

如何以编程方式将菜单项添加到剑道菜单？

```
var menu = $("#menu").data("kendoMenu");
var item1 = menu.append({text: "Option 1"});
var item2 = menu.append({text: "Option 2"}, item1); 
```

这会将项目彼此相邻添加，但我希望选项 2 成为选项 1 的子项目。

我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:52:14.407

我希望这个例子可以帮助你：

```
|Menu 1 | Menu 2 | 
```

代码

```
var menu = $("#menu1").data("kendoMenu");

menu.append({text: "OneMoreMenu",cssClass:"OneMoreMenu"}); 
```

结果 ：

```
|Menu 1 | Menu 2 | **OneMoreMenu** 
```

代码：

```
menu.append({text: "SubMenu1", cssClass:"SubMenu1"}, $('.OneMoreMenu'));
menu.append({text: "SubMenu2",cssClass:"SubMenu2"}, $('.OneMoreMenu')); 
```

结果 ：

```
|Menu 1 | Menu 2 | **OneMoreMenu**
___________________ |SubMenu1
___________________ |SubMenu2 
```

代码：

```
menu.append({text: "SubMenu2_1",cssClass:"SubMenu2_1"}, $('.SubMenu2'));
menu.append({text: "SubMenu2_2",cssClass:"SubMenu2_2"}, $('.SubMenu2')); 
```

结果 ：

```
|Menu 1 | Menu 2 | **OneMoreMenu**
___________________ |SubMenu1
___________________ |SubMenu2___|SubMenu2_1
________________________________|SubMenu2_2 
```

# database - Laravel 3 Schema 表列排序规则

> ID：14585182
> 
> 赞同：1
> 
> 时间：2013-01-29T14:26:38.953
> 
> 标签：database, database-schema, laravel, database-migration, laravel-3

我正在学习 laravel，我被困在一个简单的过程中。我希望将表生成为 UTF-8，但 varchar 和文本字段就像 latin-1。

[指南中的架构部分](http://laravel.com/docs/database/schema)根本没有帮助。我找到[了这个 GitHub 条目](https://github.com/laravel/laravel/pull/897) ，但它也不起作用（向我抛出错误）。

我有这样的架构：

```
<?php

class Create_Authors_Table {

    /**
     * Make changes to the database.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('authors',function($table){
         //$table->charset('utf8'); //does not work
         //$table->collate('utf8_general_ci'); //does not work

         $table->increments('id');
         $table->string('name')->charset('utf8'); //adding ->collate('utf8_general_ci') does not work
         $table->text('bio')->charset('utf8');
         $table->timestamps();
        });
    }

    /**
     * Revert the changes to the database.
     *
     * @return void
     */
    public function down()
    {
        Schema::drop('authors');
    }

} 
```

这是 SQL 输出：

```
CREATE TABLE IF NOT EXISTS `authors` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(200) NOT NULL,
  `bio` text NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

但这就是我需要的：

```
CREATE TABLE IF NOT EXISTS `authors` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(200) NOT NULL,
  `bio` text NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

我什至把`collation`钥匙放在我的 application/config/database.php

```
'mysql' => array(
    'driver'   => 'mysql',
    'host'     => '',
    'database' => '',
    'username' => '',
    'password' => '',
    'charset'  => 'utf8',
    'collation'=> 'utf8_unicode_ci', //this line was not there out of the box, googling provided me this
    'prefix'   => '',
), 
```

我错过了什么，我该如何解决？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-19T12:23:54.190

支持`MySQL character sets`并`collation`已添加到`Laravel 4`. 检查这个例子。

[https://github.com/laravel/laravel/pull/897](https://github.com/laravel/laravel/pull/897)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:26:34.403

对于 Laravel 3 master 中的单个架构构建，似乎没有实际实现。（在源代码中找不到任何东西）

我认为您需要手动执行此操作（尝试使用[原始查询](http://laravel.com/docs/database/raw)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:24:16.317

我坚持同样的做法，我想 Laravel 无法更改/设置字符集的排序规则。但是您可以在您`my.ini/my.cnf`的 MySQL 服务器中更改 charset 的默认排序规则！

```
[mysqld]
#...
collation-server = utf8_unicode_ci
#... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T15:03:01.770

刚刚解决了它，（使用 mysql 5.5 (5.5.29)）和 Linux Mint 13 Mate（基于 Ubuntu 12.04 LTS）

我在 /etc/mysqld/my.cnf 添加了这些行

```
[client]
default-character-set = utf8

[mysqld]
init_connect='SET collation_connection = utf8_unicode_ci'
character-set-server = utf8
collation-server = utf8_unicode_ci 
```

这样，SQL 查询在 shell 上正常工作，但在 laravel 或 phpmyadmin 等上，它们没有工作。所以我这样做了：

我打开 /etc/apache2/conf.d/charset 并删除了 ; 从这一行：

```
AddDefaultCharset UTF-8 
```

然后我重新启动了 apache2 和 mysql，现在它可以正常工作了。

稍后编辑：[GitHub Core Hack](https://github.com/laravel/laravel/pull/897)就像一种享受。我最终做到了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-18T07:12:52.837

这是我的解决方案

1.在laravel `public $charset;`/database/schema/table.php 下`public $engine;` 添加 2.替换 laravel/database/schema/grammars/mysql.php 中的函数 create 像这样

```
public function create(Table $table, Fluent $command)
{
    $columns = implode(', ', $this->columns($table));

    // First we will generate the base table creation statement. Other than auto
    // incrementing keys, no indexes will be created during the first creation
    // of the table as they're added in separate commands.
    $sql = 'CREATE TABLE '.$this->wrap($table).' ('.$columns.')';

    if ( ! is_null($table->engine))
    {
        $sql .= ' ENGINE = '.$table->engine;
    }
    if ( ! is_null($table->charset))
    {
        $sql.="DEFAULT CHARSET=".$table->charset;
    }
    return $sql;
} 
```

3.现在您可以在迁移 php 中设置任何字符集，例如`$table->charset='utf8';`

# c# - c# 表达式中的闭包变量捕获问题

> ID：14585184
> 
> 赞同：10
> 
> 时间：2013-01-29T14:26:47.037
> 
> 标签：c#, lambda, closures

我有一个使用表达式树创建委托的函数。在这个表达式中，我使用从传递给函数的多个参数中捕获的变量。实际的表达式树相当大，例如：

```
Delegate GenerateFunction<T>(T current, IList<T> parents) {
    var currentExpr = Expression.Parameter(typeof(T), "current");
    var parentsExpr = Expression.Parameter(parents.getType(), "parents");
    var parameters = new List<ParameterExpression>();

    ....

    return Expression.Lambda(Expression.Block(new List<ParameterExpression> { parentsExpr, currentExpr }, ....), parameters.ToArray()).Compile();
} 
```

然后我从另一个方法调用这个方法，然后将该函数传递给另一个函数以使用。完成后，我想访问在表达式树中更新的父母的内容。

一切似乎都可以编译，我的表达式看起来还不错，但是当我运行它时，我似乎（虽然我不能确定）在访问父变量（在表达式/闭包内）时出现空引用异常。

我想我想知道我是否做错了什么或者这是否可能以及了解正在发生的事情的提示。我似乎无法在方法中找到任何提升的（？）局部变量，所以我想知道它们是否被捕获了？

谢谢，马克

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T15:27:28.073

> 我似乎无法在该方法中找到任何提升的局部变量，所以我想知道它们是否被捕获了？

看起来您正在通过“手动”调用工厂方法自己构建表达式树 lambda。编译器不知道你在做什么；它只看到方法调用。如果你想提升本地人，那么你将不得不（1）让编译器为你做这件事，*让它*重写 lambda，或者（2）自己提升他们。

那是：

```
int x = 123;
Expression<Func<int>> ex = ()=>x; 
```

编译器重写 lambda 并为您提升它，就好像您说过：

```
Closure c = new Closure();
c.x = 123;
Expression<Func<int>> ex = ()=>c.x; 
```

where`c`通常成为一个常量表达式。

但如果你说

```
Expression<Func<int>> ex = Expression.Lambda( ...something that uses x ... ); 
```

编译器不知道您正在做一些需要提升 x 的事情；x 不在 lambda 表达式内。如果您使用的是工厂，编译器会假定您知道自己在做什么，并且不会乱七八糟地重写它。你必须自己把它吊起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T10:11:14.937

我认为您正在寻找`Expression.Quote`，它支持 Lambda 表达式中的变量捕获。基本上内部`LambdaExpression`（将引用捕获的变量）需要包含在`Expression.Quote(...)`调用中。

此处的示例和讨论：[Expression.Quote() 做了哪些 Expression.Constant() 不能做的事情？](https://stackoverflow.com/questions/3716492/what-does-expression-quote-do-that-expression-constant-cant-already-do)

# jasper-reports - JasperManager 类是否已弃用？

> ID：14585197
> 
> 赞同：-2
> 
> 时间：2013-01-29T14:27:13.377
> 
> 标签：jasper-reports

JasperManager类是否***已***弃用？

我已经在我的 Eclipse Java 项目中包含了*jasperreports-5.0.0.jar*，但是我找不到这个类并且我有这个编译错误：`JasperManager cannot be resolved`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:42:11.813

发现，替代的更具体的类是：

```
JRXmlLoader 
```

资料来源：[JasperManager](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JasperManager.html)

# android - 未在 android 设备上创建文件夹

> ID：14585198
> 
> 赞同：0
> 
> 时间：2013-01-29T14:27:15.747
> 
> 标签：android, eclipse, file, directory

我用我的 android 设备和我写的 PictureCallback 类的 onPictureTaken 方法拍照

```
 File imagesFolder = new File(Environment.getExternalStorageDirectory(),"test");
 imagesFolder.mkdirs(); 
```

因为我想在设备的 SD 卡中创建一个文件夹。

然而，我的文件夹没有创建（据说文件夹没有创建，并且文件夹不存在）并且我在 Logcat 上没有错误我怎么可能测试出了什么问题？

（是的，我已经在 Android 清单中设置了授权 WRITE EXTERNAL STORAGE）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:28:41.463

试试这样

```
File imagesFolder = new File(Environment.getExternalStorageDirectory()+ "/test");  
imagesFolder.mkdirs(); 
```

# ruby-on-rails - 如何在单个嵌入式 Mongoid 文档之间移动双嵌套嵌入式 Mongoid 文档？

> ID：14585205
> 
> 赞同：0
> 
> 时间：2013-01-29T14:27:45.140
> 
> 标签：ruby-on-rails, ruby, mongoid, mongoid3

扩展 Mongoid 关系文档中的示例，假设我有三个类......

```
class Band
  include Mongoid::Document
  embeds_many :albums
end

class Album
  include Mongoid::Document
  field :name, type: String
  embedded_in :band
  embeds_many :tracks
end

class Track
  include Mongoid::Document
  field :name, type: String
  field :length, type: String
  embedded_in :album
end 
```

如何将曲目从一张专辑移动到另一张专辑？我已经尝试了明显的...

```
~/Projects/mongoid_testing (development) > Band.last.albums.first.tracks.first.update_attribute :album_id, Band.last.albums.second.id
☘ MongoDB (8ms) [mongoid_testing_development::Bands] QUERY selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil
☘ MongoDB (0ms) [mongoid_testing_development::Bands] QUERY selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil
☘ MongoDB (0ms) [mongoid_testing_development::Bands] UPDATE selector={"_id"=>"51005ceb93e53c2eec000012"} update={"$set"=>{"albums.0.tracks.0.album_id"=>"51005d2993e53c2eec000017"}} flags=[]
=> true
~/Projects/mongoid_testing (development) > Band.last
☘ MongoDB (0ms) [mongoid_testing_development::Bands] QUERY selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil
=> #<Band:0x007fa22725b1f8> {
           :_id => "51005ceb93e53c2eec000012",
      :albums => [
        [0] {
               "_id" => "51005d2293e53c2eec000016",
            "tracks" => [
                [0] {
                         "_id" => "5107d87993e53c7191000007",
                    "album_id" => "51005d2993e53c2eec000017",
                       "title" => "Pipeline"
                }
            ],
              "name" => "Violater"
        },
        [1] {
             "_id" => "51005d2993e53c2eec000017",
            "name" => "Construction Time Again"
        }
    ]
} 
```

而且我已经尝试了不那么明显的...

```
class Track
  ...
  def move_to(new_album_id)
    _parent.albums.delete self
    _root.albums.find(new_album_id).tracks.push self
  end
end 
```

但无论如何，我似乎都无法重新关联双嵌套嵌入文档。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:19:08.160

这是解决方案

```
new_parent = Band.first.albums.second
old_track = Band.first.albums.first.tracks.first

unless new_parent.id == old_track.parent.id
  new_parent.tracks << old_track.dup
  old_track.delete
end 
```

# python - 使用 PostgreSQL 聚合 ORDER BY 和 sqlalchemy

> ID：14585206
> 
> 赞同：5
> 
> 时间：2013-01-29T14:27:44.997
> 
> 标签：python, postgresql, sqlalchemy

我有一个查询，它使用 PostgreSQL 的语法在聚合函数中使用 ORDER BY，如下所示：

```
SELECT some_agg_func(a ORDER BY b DESC) FROM table; 
```

有谁知道用 sqlalchemy 表达式语言来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-05T17:45:17.953

我认为 SqlAlchemy 1.1 现在有本机支持`string_agg`：http: [//docs.sqlalchemy.org/en/latest/dialects/postgresql.html#sqlalchemy.dialects.postgresql.aggregate_order_by](http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html#sqlalchemy.dialects.postgresql.aggregate_order_by)（搜索页面“func.string_agg”）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-05T16:21:46.870

从[SQLAlchemy 文档](https://docs.sqlalchemy.org/en/latest/dialects/postgresql.html#sqlalchemy.dialects.postgresql.aggregate_order_by)：

```
from sqlalchemy.dialects.postgresql import aggregate_order_by

expr = func.array_agg(aggregate_order_by(table.c.a, table.c.b.desc()))
stmt = select([expr]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T16:15:42.233

您需要使用 SQLAlchemy 的[编译器](http://docs.sqlalchemy.org/en/rel_0_8/core/compiler.html)扩展来实现这一点。`string_agg`这是 Postgres函数的示例：

```
from sqlalchemy.sql.expression import ColumnElement, _literal_as_column
from sqlalchemy.dialects import postgresql
from sqlalchemy.ext.compiler import compiles

class string_agg(ColumnElement):
    def __init__(self, expr, separator, order_by=None):
        self.type = Text()
        self.expr = _literal_as_column(expr)
        self.separator = literal(separator)
        self.order_by = _literal_as_column(order_by)

    @property
    def _from_objects(self):
        return self.expr._from_objects

@compiles(string_agg, 'postgresql')
def compile_string_agg(element, compiler, **kwargs):
    head = 'string_agg(%s, %s' % (
        compiler.process(element.expr),
        compiler.process(element.separator)
    )
    if element.order_by is not None:
        tail = ' ORDER BY %s)' % compiler.process(element.order_by)
    else:
        tail = ')'
    return head + tail

query = session.query(string_agg(Foo.bar, ', ', order_by=Foo.bar.desc()))
# Print compiled SQL query.
print query.statement.compile(dialect=postgresql.dialect())
# Run the query and print result.
print query.scalar() 
```

# c++ - C++ 转换为任意基数的向量表示

> ID：14585208
> 
> 赞同：-3
> 
> 时间：2013-01-29T14:27:48.317
> 
> 标签：c++, vector, numbers, base, base-conversion

> **可能重复：**
> [用于在十进制和任意基数之间转换的 c++ 模板](https://stackoverflow.com/questions/8870121/c-template-for-conversion-between-decimal-and-arbitrary-base)

我想将 的实例转换为`unsigned int`以 X 为基数的实例，`std::vector<unsigned int>`其中 X 是从 2 到`unsigned int`可以表示的最大数的任意数字。

**编辑：**我曾经说过以`unsigned int`10 为基数，但这得到了批评性的评论，我认为这是正确的，所以我将其删除以避免混淆。

SO上有很多问题和答案，涵盖了`itoa`转换为基数16或32或一些小数字的内容（[此`itoa`实现页面](http://www.jb.man.ac.uk/~slowe/cpp/itoa.html)被指出为很好的资源）。对于比这大得多的碱基，我无法找到一个很好的转换。

注意：性能不是问题（在合理范围内）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:30:56.940

这应该这样做。

```
std::vector<unsigned int> result;
unsigned int base = ...;
unsigned int input = ...;
while(input) {
  result.push_back(input%base);
  input /= base;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:36:12.680

```
std::vector<unsigned int> toBaseX(unsigned int number, unsigned int base)
{
    std::vector<unsigned int> res;

    if (number == 0)
    {
        res.push_back(0);
        return res;
    }

    while (number > 0)
    {
        unsigned int currentDigit = number % base;
        res.push_back(currentDigit);
        number /= base;
    }
    return res;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:27:10.750

以下代码转换`x`为 base 中的向量`base`。如果需要满足`minSize`结果向量的大小，它还会用额外的零填充结果向量。

```
vector<unsigned int> intToAnyBase(unsigned int x, int base, int minSize = 1) {
    assert(base >= 2);

    // minSize allows us to pad the resulting vector
    // with extra zeros at the front if needed
    minSize = std::max(1, minSize);

    std::vector<unsigned int> v;
    while(x > 0) {
        res.push_back(x % base);
        x /= base;
    }

    // Append zeros to the "front" to satisfy 'minSize' requirement.
    // This also adds support for x
    if(v.size() < minSize) {
        v.reserve(minSize);
        while(v.size() < minSize)
            v.push_back(0);
    }

    std::reverse(v.begin(), v.end());

    return v;
} 
```

请注意，结果向量在函数中被反转，例如，十进制 4`{1,0,0}`作为结果而不是`{0,0,1}`.

# php - 文件下载部分，我需要整个文件

> ID：14585209
> 
> 赞同：1
> 
> 时间：2013-01-29T14:27:51.763
> 
> 标签：php, header, http-headers

我有一些文件试图通过使用标头下载到我的服务器上。它会找到该文件，但当它们为 2 到 3 MB 时，它只会下载 200 到 300 kb 的这些文件。我似乎无法将手指放在这个上。

这是我的代码。

我在文件 FYI 的开头有一个 ob_start 方法。

```
$fileName = $row['fileURL'];
$fileURL = 'powerpoints/' . $fileName;
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename=' . $fileName);
header("Content-Transfer-Encoding: binary");
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($fileURL);
exit(); 
```

在下面编辑..修改代码

```
$fileName = $row['fileURL'];
$fileURL = 'powerpoints/' . $fileName;
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename=' . $fileName);
header("Content-Transfer-Encoding: binary");
header('Cache-Control: must-revalidate');
header('Content-Length: ' . filesize($row['size']));

$fdl = fopen($fileURL, "r"); 

if ($fdl === false) {
    die("Issue opening $fileURL");
}

while (!feof($fdl))
{
    $buffer = fread($fdl, 4096); 
    print $buffer;
}  

fclose($fdl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:36:53.190

Readfile 将尝试一次将所有内容读入内存。另外，我看不出在此处使用输出缓冲的意义，因为您只需读取和输出块中的文件就有更好的成功机会。

所以我会摆脱输出缓冲，并尝试这样的东西而不是 readfile：

```
sleep(1);
$fdl = fopen($fileURL, 'r');
if ($fdl === false) {
  die("Issue opening $fileURL");
}
while(!feof($fdl)) {
  $buffer = fread($fdl, 4096);
  print $buffer;
}
fclose($fdl); 
```

附加说明，为什么`Pragma: public`必须重新验证缓存控制？

# c# - 带有 DapperExtensions 的谓词

> ID：14585212
> 
> 赞同：4
> 
> 时间：2013-01-29T14:28:04.850
> 
> 标签：c#, dapper

我试图用 DapperExtensions 制作一个通用的 Find 方法

这是我的方法

```
 public IEnumerable<T> Find(Expression<Func<T, object>> expression)
    {
        using (IDbConnection cn = GetCn())
        {
            cn.Open();

            var predicate = Predicates.Field<T>(expression, Operator.Eq, true);
            return cn.GetList<T>(predicate);
        }
    } 
```

但我`System.NullReferenceException`上了这一行 `var predicate = Predicates.Field<T>(expression, Operator.Eq, true);`

这是来自 DapperExtensions 帮助文档但我尝试将其转换为通用方法。

```
using (SqlConnection cn = new SqlConnection(_connectionString))
{
    cn.Open();
    var predicate = Predicates.Field<Person>(f => f.Active, Operator.Eq, true);
    IEnumerable<Person> list = cn.GetList<Person>(predicate);
    cn.Close();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T08:58:06.243

我没有复制，但*看起来*问题部分在于您使表达式比示例更复杂。作为建议，请尝试：

```
public IEnumerable<T> Find<TValue>(Expression<Func<T, TValue>> expression,
                                   TValue value)
{
    using (IDbConnection cn = GetCn())
    {
        cn.Open();

        var predicate = Predicates.Field<T>(expression, Operator.Eq, value);
        return cn.GetList<T>(predicate);
    }
} 
```

和：

```
var data = Find(p => p.MarketId, marketId); 
```

这完全未经测试，仅基于您的评论和示例。

如果您的代码库不实用，那么我建议您使用上面的方法*尝试*一下，看看是否可行，因为有一些方法*可以*拆分表达式来提取这些部分。但在我们知道上述方法是否有效之前，不值得举一个例子。

# heroku - UTF-8 编码不能在 Heroku 上使用静态构建

> ID：14585216
> 
> 赞同：2
> 
> 时间：2013-01-29T14:28:17.490
> 
> 标签：heroku, utf-8, middleman

我正在使用静态站点生成器（中间人）来构建我的站点。我正在使用带有 Heroku 的 buildpack，以便在我将代码库推送到站点时构建站点，然后将其作为带有一些机架中间件的静态站点托管。在本地，我的编码显示得很好，但在 Heroku 上它会呕吐。我尝试通过控制台设置 LANG 变量，但仍然没有任何效果。任何帮助，将不胜感激。

# jquery - IE 7 的缩放背景

> ID：14585217
> 
> 赞同：0
> 
> 时间：2013-01-29T14:28:20.117
> 
> 标签：jquery, css, internet-explorer, internet-explorer-7

我需要创建缩放背景，并且必须向后兼容 IE 7 :( 。是否有 jQuery 代码可以用来为 IE 7 创建缩放背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:31:34.180

您需要了解的有关全屏背景的所有信息：

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:34:09.087

如果您询问 CSS 渐变，请查看[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)。该生成器中有大量选项，包括“IE 安全”。

# haskell - 了解具有类约束的 2 级类型别名

> ID：14585220
> 
> 赞同：12
> 
> 时间：2013-01-29T14:28:30.817
> 
> 标签：haskell, types, typeclass, higher-rank-types

我的代码经常使用看起来像

```
foo :: (MyMonad m) => MyType a -> MyOtherType a -> ListT m a 
```

为了尝试缩短它，我编写了以下类型别名：

```
type FooT m a = (MyMonad m) => ListT m a 
```

GHC 要求我打开 Rank2Types（或 RankNTypes），但当我使用别名将代码缩短为

```
foo :: MyType a -> MyOtherType a -> FooT m a 
```

相比之下，当我写另一个类型别名时

```
type Bar a b = (Something a, SomethingElse b) => NotAsBar a b 
```

并在负面位置使用它

```
bar :: Bar a b -> InsertTypeHere 
```

GHC 大声斥责我错了。

我想我知道发生了什么，但我相信我可以从你的解释中得到更好的理解，所以我有两个问题：

*   类型别名实际上在做什么/它们实际上是什么意思？
*   有没有办法在这两种情况下都保持简洁？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T15:18:51.710

类型签名基本上包含三个部分：

1.  变量声明（这些通常是隐式的）
2.  变量约束
3.  类型签名头

这三个元素本质上是叠加的。必须先声明类型变量，然后才能使用它们，无论是在约束中还是在其他地方，并且类约束作用于类型签名头中的所有用途。

我们可以重写您的`foo`类型，以便显式声明变量：

```
foo :: forall m a. (MyMonad m) => MyType a -> MyOtherType a -> ListT m a 
```

变量声明由`forall`关键字引入，并扩展到`.`. 如果你没有明确地引入它们，GHC 会自动将它们限定在声明的顶层。接下来是约束，直到`=>`. 剩下的就是类型签名头。

看看当我们尝试拼接您的`type FooT`定义时会发生什么：

```
foo :: forall m a. MyType a -> MyOtherType a -> ( (MyMonad m) => ListT m a ) 
```

类型变量`m`在 的顶层存在`foo`，但您的类型别名仅在最终值内添加约束！有两种方法可以修复它。您可以：

*   将 forall 移到最后，所以`m`以后才存在
*   或将类约束移到顶部

将约束移到顶部看起来像

```
foo :: forall m a. MyMonad m => MyType a -> MyOtherType a -> ListT m a 
```

GHC 的启用建议是`RankNTypes`前者（有点，我仍然缺少一些东西），导致：

```
foo :: forall a. MyType a -> MyOtherType a -> ( forall m. (MyMonad m) => ListT m a ) 
```

这是有效的，因为`m`它没有出现在其他任何地方，而且它在箭头的右边，所以这两个意思本质上是一样的。

相比于`bar`

```
bar :: (forall a b. (Something a, SomethingElse b) => NotAsBar a b) -> InsertTypeHere 
```

类型别名在负数位置时，更高级别的类型具有不同的含义。现在 to 的第一个参数`bar`必须是 and 中的多态，`a`并`b`具有适当的约束。这与通常的含义不同，`bar`调用者选择如何实例化这些类型变量。它不是

很可能，最好的方法是启用`ConstraintKinds`扩展，它允许您为约束创建类型别名。

```
type BarConstraint a b = (Something a, SomethingElse b)

bar :: BarConstraint a b => NotAsBar a b -> InsertTypeHere 
```

它不像您希望的那样简洁，但比每次都写出长约束要好得多。

另一种方法是将您的类型别名更改为 GADT，但这会带来其他一些您可能不想引入的后果。如果您只是希望获得更简洁的代码，我认为这`ConstraintKinds`是最好的选择。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-29T22:19:37.790

您可以将类型类约束本质上视为隐式参数 - 即认为

```
Foo a => b 
```

作为

```
FooDict a -> b 
```

where`FooDict a`是类中定义的方法字典`Foo`。例如，`EqDict`将是以下记录：

```
data EqDict a = EqDict { equal :: a -> a -> Bool, notEqual :: a -> a -> Bool } 
```

不同之处在于，每种类型的每个字典只能有一个值（对 MPTC 进行适当的概括），而 GHC 会为您填写其值。

考虑到这一点，我们可以返回您的签名。

```
type FooT m a = (MyMonad m) => ListT m a
foo :: MyType a -> MyOtherType a -> FooT m a 
```

扩展到

```
foo :: MyType a -> MyOtherType a -> (MyMonad m => ListT m a) 
```

使用字典解释

```
foo :: MyType a -> MyOtherType a -> MyMonadDict m -> ListT m a 
```

这等效于将参数重新排序为

```
foo :: MyMonadDict m -> MyType a -> MyOtherType a -> ListT m a 
```

这相当于字典变换的逆

```
foo :: (MyMonad m) => MyType a -> MyOtherType a -> ListT m a 
```

这就是你要找的。

但是，在您的另一个示例中，情况并非如此。

```
type Bar a b = (Something a, SomethingElse b) => NotAsBar a b
bar :: Bar a b -> InsertTypeHere 
```

扩展到

```
bar :: ((Something a, SomethingElse b) => NotAsBar a b) -> InsertTypeHere 
```

这些变量仍然在顶层量化（即

```
bar :: forall a b. ((Something a, SomethingElse b) => NotAsBar a b) -> InsertTypeHere 
```

)，因为您在 的签名中明确提到了它们`bar`，但是当我们进行字典转换时

```
bar :: (SomethingDict a -> SomethingElseDict b -> NotAsBar a b) -> InsertTypeHere 
```

我们可以看到这不等于

```
bar :: SomethingDict a -> SomethingElseDict b -> NotAsBar a b -> InsertTypeHere 
```

这会产生你想要的。

很难想出一个现实的例子，其中类型类约束被用在与量化点不同的地方——我在实践中从未见过它——所以这里有一个不切实际的例子，只是为了证明正在发生的事情：

```
sillyEq :: forall a. ((Eq a => Bool) -> Bool) -> a -> a -> Bool
sillyEq f x y = f (x == y) 
```

对比如果我们`==`在没有将参数传递给时使用 try 使用会发生什么`f`：

```
sillyEq' :: forall a. ((Eq a => Bool) -> Bool) -> a -> a -> Bool
sillyEq' f x y = f (x == y) || x == y 
```

我们得到一个错误的*No 实例。`Eq a`*

`(x == y)`in`sillyEq`得到它的`Eq`dict `f`; 它的字典形式是：

```
sillyEq :: forall a. ((EqDict a -> Bool) -> Bool) -> a -> a -> Bool
sillyEq f x y = f (\eqdict -> equal eqdict x y) 
```

退后一步，我认为您在这里感到恐惧的方式会很痛苦-我认为您只想使用某些东西来量化其上下文，其中上下文被定义为“使用它的函数签名”。这个概念没有简单的语义。您应该能够将其`Bar`视为集合上的函数：它将两个集合作为参数并返回另一个集合。我不相信会有这样的功能供您尝试实现。

至于缩短上下文，您可以使用`ConstraintKinds`允许您制作约束同义词的扩展，因此至少您可以说：

```
type Bars a = (Something a, SomethingElse a) 
```

要得到

```
bar :: Bars a => Bar a b -> InsertTypeHere 
```

但是你想要的仍然是可能的——你的名字不足以让我说出。您可能想研究[Existential Quantification](http://www.haskell.org/haskellwiki/Existential_type)和[Universal Quantification](http://www.haskell.org/haskellwiki/Rank-N_types)，这是对类型变量进行抽象的两种方式。

故事的寓意：记住这`=>`就像`->`除了那些参数是由编译器自动填充的，并确保您尝试定义具有明确定义的数学含义的类型。

# xml - 如何在 Jenkins 中发布粗略的安全审计工具 (RATS) xml 结果

> ID：14585222
> 
> 赞同：2
> 
> 时间：2013-01-29T14:28:36.830
> 
> 标签：xml, junit, jenkins, xsd, report

我有junit-4.xsd

```
<?xml version="1.0" encoding="UTF-8" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:element name="failure">
        <xs:complexType mixed="true">
            <xs:attribute name="type" type="xs:string" use="optional"/>
            <xs:attribute name="message" type="xs:string" use="optional"/>
        </xs:complexType>
    </xs:element>

    <xs:element name="error">
        <xs:complexType mixed="true">
            <xs:attribute name="type" type="xs:string" use="optional"/>
            <xs:attribute name="message" type="xs:string" use="optional"/>
        </xs:complexType>
    </xs:element>

    <xs:element name="properties">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="property" maxOccurs="unbounded"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <xs:element name="property">
        <xs:complexType>
            <xs:attribute name="name" type="xs:string" use="required"/>
            <xs:attribute name="value" type="xs:string" use="required"/>
        </xs:complexType>
    </xs:element>

    <xs:element name="skipped" type="xs:string"/>
    <xs:element name="system-err" type="xs:string"/>
    <xs:element name="system-out" type="xs:string"/>

    <xs:element name="testcase">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="skipped" minOccurs="0" maxOccurs="1"/>
                <xs:element ref="error" minOccurs="0" maxOccurs="unbounded"/>
                <xs:element ref="failure" minOccurs="0" maxOccurs="unbounded"/>
                <xs:element ref="system-out" minOccurs="0" maxOccurs="unbounded"/>
                <xs:element ref="system-err" minOccurs="0" maxOccurs="unbounded"/>
            </xs:sequence>
            <xs:attribute name="name" type="xs:string" use="required"/>
            <xs:attribute name="assertions" type="xs:string" use="optional"/>
            <xs:attribute name="time" type="xs:string" use="optional"/>
            <xs:attribute name="classname" type="xs:string" use="optional"/>
            <xs:attribute name="status" type="xs:string" use="optional"/>
        </xs:complexType>
    </xs:element>

    <xs:element name="testsuite">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="properties" minOccurs="0" maxOccurs="1"/>
                <xs:element ref="testcase" minOccurs="0" maxOccurs="unbounded"/>
                <xs:element ref="system-out" minOccurs="0" maxOccurs="1"/>
                <xs:element ref="system-err" minOccurs="0" maxOccurs="1"/>
            </xs:sequence>
            <xs:attribute name="name" type="xs:string" use="required"/>
            <xs:attribute name="tests" type="xs:string" use="required"/>
            <xs:attribute name="failures" type="xs:string" use="optional"/>
            <xs:attribute name="errors" type="xs:string" use="optional"/>
            <xs:attribute name="time" type="xs:string" use="optional"/>
            <xs:attribute name="disabled" type="xs:string" use="optional"/>
            <xs:attribute name="skipped" type="xs:string" use="optional"/>
            <xs:attribute name="timestamp" type="xs:string" use="optional"/>
            <xs:attribute name="hostname" type="xs:string" use="optional"/>
            <xs:attribute name="id" type="xs:string" use="optional"/>
            <xs:attribute name="package" type="xs:string" use="optional"/>
        </xs:complexType>
    </xs:element>

    <xs:element name="testsuites">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="testsuite" minOccurs="0" maxOccurs="unbounded"/>
            </xs:sequence>
            <xs:attribute name="name" type="xs:string" use="optional"/>
            <xs:attribute name="time" type="xs:string" use="optional"/>
            <xs:attribute name="tests" type="xs:string" use="optional"/>
            <xs:attribute name="failures" type="xs:string" use="optional"/>
            <xs:attribute name="disabled" type="xs:string" use="optional"/>
            <xs:attribute name="errors" type="xs:string" use="optional"/>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

vul.xml --结果文件

```
<?xml version="1.0"?><rats_output>
<stats>
<dbcount lang="perl">33</dbcount>
<dbcount lang="ruby">46</dbcount>
<dbcount lang="python">62</dbcount>
<dbcount lang="c">334</dbcount>
<dbcount lang="php">55</dbcount>
</stats>
<analyzed>filename</analyzed>
.....
</vulnerability>
<timing>
<total_lines>112547</total_lines>
<total_time>0.088372</total_time>
<lines_per_second>1273559</lines_per_second>
</timing>
</rats_output> 
```

和 vul.xsd 架构为：

vul.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
  <xs:element name="rats_output">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="stats"/>
        <xs:element maxOccurs="unbounded" ref="analyzed"/>
        <xs:element maxOccurs="unbounded" ref="vulnerability"/>
        <xs:element ref="timing"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="stats">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="dbcount"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="dbcount">
    <xs:complexType>
      <xs:simpleContent>
        <xs:extension base="xs:integer">
          <xs:attribute name="lang" use="required" type="xs:NCName"/>
        </xs:extension>
      </xs:simpleContent>
    </xs:complexType>
  </xs:element>
  <xs:element name="analyzed" type="xs:string"/>
  <xs:element name="vulnerability">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="severity"/>
        <xs:element ref="type"/>
        <xs:element ref="message"/>
        <xs:element maxOccurs="unbounded" ref="file"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="severity" type="xs:NCName"/>
  <xs:element name="type" type="xs:NCName"/>
  <xs:element name="message" type="xs:string"/>
  <xs:element name="file">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="name"/>
        <xs:element maxOccurs="unbounded" ref="line"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="name" type="xs:string"/>
  <xs:element name="line" type="xs:integer"/>
  <xs:element name="timing">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="total_lines"/>
        <xs:element ref="total_time"/>
        <xs:element ref="lines_per_second"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="total_lines" type="xs:integer"/>
  <xs:element name="total_time" type="xs:decimal"/>
  <xs:element name="lines_per_second" type="xs:integer"/>
</xs:schema> 
```

现在，我如何将 Jenkins 中的结果呈现为 JUNIT 插件输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T00:45:20.403

使用 XSLT 样式表将 RATS 测试结果转换为类似 JUnit 的输出。这是来自类似问题的示例：

*   [需要 XSL 文件将内部 xml 测试格式转换为 Junit 格式（jenkins 的 xUnit 插件）](https://stackoverflow.com/questions/6345737/1113772)

然后通过执行以下操作配置 Jenkins 以应用它：

*   选择`Custom Tool`下`Publish xUnit test result report`
*   指定 RATS 文件的路径和要应用的样式表

**参考**

*   [xUnit 插件：用户 XSL](https://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin#xUnitPlugin-ProvideUserXSL)

# android - 使用公共构建服务器时如何使用秘密 API 密钥

> ID：14585228
> 
> 赞同：2
> 
> 时间：2013-01-29T14:28:49.133
> 
> 标签：android, maven, oauth, jenkins, cloudbees

[Mark Murphy 在他的博客](http://commonsware.com/blog/2013/01/28/what-not-to-put-in-your-repo.html)上做了一个很好的案例，什么样的信息应该被保留在公共存储库之外。密钥材料，例如各种服务的 OAuth 密钥或 API 密钥，就是一个很好的例子。

有问题的应用程序将是一个移动 android 应用程序，因此有人对其进行反编译以获取密钥不在此问题的范围内。

如何配置公共 CI 实例（例如 cloudbees）上的构建作业，以使秘密不会在构建日志或编译目录中泄露？我的主要目的是演示具有基于 OAuth 的身份验证的应用程序的架构和构建过程，而无需在整个互联网上传播我的私钥。因此，需要一个公共代码存储库和一个公开可见的构建服务器。

目前，我在我的 java 代码中使用 maven 过滤和占位符来创建静态常量类，但这些类在目标目录中始终可见。目标的构建后清理仍然会留下一小段时间，其中生成的 java 文件对世界可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:35:53.377

从您的描述中，听起来您在谈论一个不应该在 SCM 存储库中但需要包含在最终应用程序中的密钥。据推测，应用程序二进制文件本身不能免费下载，否则无论如何都可以打开它并获取您的密钥，但如果构建结果只是被部署到某个服务器，这很好。

`target`在这种情况下，将密钥存在于目录（即 Jenkins 工作区）中或确实存在于构建工件（例如）中不一定有任何问题`lastSuccessfulBuild/artifact/target/myapp.war`，只要这些东西不是公开可读的。对于 CloudBees DEV@cloud Jenkins 实例，您可以使用基于角色的访问控制来允许公众查看您的项目的更改日志，也许还有构建日志（在审查它们以确保不打印机密之后），但拒绝访问工作区和工件。

（就工件读取权限而言，似乎这被授予具有整体读取权限的任何人，除非运行 Jenkins，`-Dhudson.security.ArtifactsPermission=true`这不是托管 Jenkins 的选项。可能需要创建一个启用此权限的插件，并且可能还有“工作区清除”权限，类似于现有的[扩展读取权限插件](https://wiki.jenkins-ci.org/display/JENKINS/Extended+Read+Permission+Plugin)。工作区浏览权限至少是 Jenkins 的标准部分，如果您不归档工件而是在成功构建结束时直接部署就足够了。 )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:38:38.910

即使您不使用公共构建服务器，这也是一个问题。

想一想：如果密钥在最终的包中，那么每个人都可以看到。无论它在构建的哪个步骤到达那里，它都是公开的。任何人都可以下载包（JAR、APK 等）、分解、反编译`.class`并查看密钥。做这一切很容易。

在 CloudBees 中，您可以将此类信息放入环境变量中。请参阅此链接：http: [//developer.cloudbees.com/bin/view/RUN/Configuration+Parameters](http://developer.cloudbees.com/bin/view/RUN/Configuration+Parameters)。我对 CloudBees 了解不多，但我认为所有公共服务器都有这种选择，将敏感信息放在不公开的地方。

# python - wxPython 多线程 matplotlib 绘图不在主线程中

> ID：14585230
> 
> 赞同：4
> 
> 时间：2013-01-29T14:28:51.167
> 
> 标签：python, matplotlib, wxpython

我想做的事：

1.  在线程中运行 TCPServer
2.  获取数据“从套接字接收”
3.  更新绘图并显示数据

我成功地做了什么：

1.  wxPython 的框架有一个按钮，
2.  单击按钮启动套接字
3.  从套接字接收数据

问题：

1.  当我尝试从 TCPServer 线程调用绘图函数时，我收到此错误

    ```
    "PyAssertionError: C++ assertion "wxThread::IsMain()" failed at ..\..\src\common\timercmn.cpp(66)
    in wxTimerBase::Start(): timer can only be started from the main thread " 
    ```

编码：

1.  Main，我开始线程的地方

    ```
    def start_socket(self):

        HOST = ''
        PORT_A = 6340
        self.server_A = ThreadedTCPServer((HOST, PORT_A), ThreadedTCPRequestHandler)
        self.server_temp = self.server_A
        self.server_A_thread = threading.Thread(target=self.server_A.serve_forever)
        self.server_A_thread.setDaemon(True)
        self.server_A_thread.start() 
    ```

2.  我尝试绘制的线程：

    ```
    class ThreadedTCPRequestHandler(SocketServer.BaseRequestHandler):
        def handle(self):
            self.Main =  Main(None, -1, '')
            self.data = self.request.recv(1024).strip()
            print "%s wrote: " % self.client_address[0]
            print self.data
            plt.ion()    
            self.fig = plt.figure(1)
            print self.image_scale
            ax = self.fig.add_subplot(111)
            self.image_scale = ([1,2], [ 4,10 ] )
            cax = plt.imshow(self.image_scale, cmap='Greys', interpolation='nearest' )
            draw() 
    ```

通过调试，错误来自这一行：

```
self.fig = plt.figure(1)

Error:  "timer can only be started from the main thread" 
```

所以，不确定，但我想我需要在 wx.Frame 的主函数中进行绘图，是否有任何解决方案可以保持正常程序运行，并允许在另一个线程中实时绘图？特别是我打算制作多个 TCPServer 线程。

提前感谢您，我们将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-30T16:55:26.120

无论如何，谢谢，我解决了，现在从不同的线程运行计时器，

它在语言上的限制，通过解决方法可以工作

# c# - 从 Ldap 值字符串中提取信息

> ID：14585235
> 
> 赞同：0
> 
> 时间：2013-01-29T14:29:18.683
> 
> 标签：c#, .net, ldap

我正在使用以下代码从 LDAP 中的所有组中获取所有用户

```
 using (SearchResultCollection results = searcher.FindAll())
        {
            foreach (SearchResult result in results)
            {
                 ResultPropertyValueCollection userValueCollection =
                   result.Properties["member"];
                    foreach (var cn in userValueCollection)
                    {
                        System.Console.WriteLine(cn.ToString());
                    }

            }
        } 
```

输出如下：

CN=068IGHf,OU=个人,OU=通用,OU=特权 CN=064IMHf,OU=技术,OU=通用,OU=特权 CN=060IGHJ,OU=功能,OU=通用,OU=特权 CN=061UGHf,OU =Tester,OU=Generic,OU=Privileged

Q1：如何从输出中获取每个用户示例的类型信息：个人、技术、功能？Q2：我怎样才能只得到用户名的例子：068IGHF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:41:06.400

不要使用`User.ToString()`然后期望能够解析结果字符串。

`User`对象有自己的方法和属性。使用它们。

例如获取通用名称：

```
 DirectoryEntry user = new DirectoryEntry(result.Properties["member"]);

 group.Users.Add(user.Properties.Item["cn"][0]); 
```

# c# - 在 SQLCLR 方法中使用 SqlXml 参数

> ID：14585237
> 
> 赞同：2
> 
> 时间：2013-01-29T14:29:20.433
> 
> 标签：c#, tsql, xpath, xquery, sqlclr

这是 SQL CLR，我只是想创建一个从 SQL 接收 XML 的函数，然后获取某个节点的值并返回它：

```
[SqlFunction]
public static SqlString FnGetQuoteNumber(XmlDocument xmlDoc)
        {
            string nodeValue = null;

            xmlDoc.Load(xmlDoc.ToString());

            XmlNode node = xmlDoc.DocumentElement.SelectSingleNode("//Identifier[@name='Item1']");

            if (xmlDoc.DocumentElement != null)
            {
                nodeValue = node.Attributes["value"].Value;
            }

            return new SqlString(nodeValue);
        } 
```

但后来我意识到，不应该将我的参数声明为`SqlXml xmlDoc`而不是`XmlDocument xmlDoc`？

如果是这种情况，那么我不能执行上述操作，因为我不再处理 an `XmlDocument`（没有`DocumentElement`/`selectSingleNode`等）。

**为 s 执行此操作的正确方法是什么`SqlXml`？**

此外，当我尝试部署它时，我不断得到它（我认为这与`XmlDocument`我试图作为参数传递）：

> 开始将程序集 SolutionName.dll 部署到服务器 localhost：DATABASE
> 
> 如果部署为与 SQL Server 目标实例不兼容的 .NET Framework 版本构建的 SQL CLR 项目，则可能会出现以下错误：“部署错误 SQL01268：为程序集创建程序集失败，因为程序集验证失败”。要解决此问题，请打开项目的属性，然后更改 .NET Framework 版本。
> 
> c:\****** name.dll：部署错误：无法为参数 System.Xml.XmlDocument xmlDoc 创建类型
> 
> 构建失败。
> 
> 经过时间 00:00:01.96
> 
> ========== 构建：1 个成功或最新，0 个失败，0 个跳过 ==========
> 
> ========== 部署：0 成功，1 失败，0 跳过 ==========

任何人都可以帮我一把吗？

XML 截图：

![](../Images/412c2ab118c592f4a9f63c9419382e7d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:03:43.557

我认为您的 xmldoc.load 拥有秘密。如果您只是将 xml 作为字符串传递给 clr 过程怎么办。然后您可以创建 xmlDoc 并将其加载到字符串的 clr 中。

如果这不起作用，这个线程似乎接近你所说的：[CLR Link](https://stackoverflow.com/a/533745/197684)

我不能说错误......但上面的字符串方法可能会解决你的问题。

# css - 不同图像扩展名（jpg、png）的浏览器加载速度是否存在差异？

> ID：14585241
> 
> 赞同：5
> 
> 时间：2013-01-29T14:29:38.640
> 
> 标签：css, optimization, browser

我有一张要转换为 png / jpg 的图像。每种类型的文件大小差异非常小（photoshop save-for-web-and-devices 优化）： image.png 155 字节 image.jpg 357 字节

我也不太关心文件类型，因为没有不透明度。

图像类型之间的浏览器加载速度有什么不同吗？例如，firefox 更喜欢 .png 文件，因为它们未压缩，因此加载速度更快（只是一个想法）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:38:34.937

图片的加载速度取决于文件的大小和用户的连接速度。加载站点时，浏览器会下载页面的临时副本，包括图像。您可能无法区分，但 JPG 加载 355 字节需要两倍的时间。这些文件非常小，除非您在单个页面上说 100 个独特的图像，否则它真的不应该对加载速度产生影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:33:17.977

您需要测试一个非常大的样本来找出呈现两种不同文件类型之间的差异。即使大小差异如此之小，较小的文件大小可能会给您带来比文件类型更大的差异。

唯一确定的方法是尝试并测量它 - 然后重复加载多次以获得良好的数据样本。

如果您真的希望进行超优化，那么减少请求数量会比文件大小（基于您提供的数字）或文件类型给您带来更多好处 - 因此您可以选择图像精灵来减少`n`图像1 张图片。

# c++ - 在 C++ 中使用 xerces 的 XML SAX 解析器

> ID：14585242
> 
> 赞同：0
> 
> 时间：2013-01-29T14:29:40.140
> 
> 标签：c++, xml, xml-parsing, xerces, xerces-c

```
 #include <xercesc/sax2/SAX2XMLReader.hpp>
#include <xercesc/sax2/XMLReaderFactory.hpp>
#include <xercesc/sax2/DefaultHandler.hpp>
#include <xercesc/util/XMLString.hpp>
#include <conio.h>
#include <xercesc/parsers/SAXParser.hpp>
#include <xercesc/sax/HandlerBase.hpp>
#include <xercesc/util/XMLString.hpp>
#include <iostream>
#include <xercesc/dom/DOM.hpp>
#include <xercesc/parsers/XercesDOMParser.hpp>
using namespace std;
using namespace xercesc;

class ErnstSax2Handler : public DefaultHandler 
{
public:
ErnstSax2Handler(void);
virtual ~ErnstSax2Handler(void);

void startElement(
    const   XMLCh* const    uri,
    const   XMLCh* const    localname,
    const   XMLCh* const    qname,
    const   Attributes&     attrs
);
void endElement(
    const   XMLCh* const    uri,
    const   XMLCh* const    localname,
    const   XMLCh* const    qname
);
void characters(
    const   XMLCh* const    chars,
    const   XMLSize_t       length
);

void fatalError(const SAXParseException&);

protected:
// define variables to save the state
};

void ErnstSax2Handler::startElement(const   XMLCh* const    uri,
                        const   XMLCh* const    localname,
                        const   XMLCh* const    qname,
                        const   Attributes&     attrs)
{
char* name = XMLString::transcode(localname);
cout<<name;
// ...
XMLString::release(&name);
}
void ErnstSax2Handler::endElement(
                const   XMLCh* const    uri,
                const   XMLCh* const    localname,
                const   XMLCh* const    qname)
{
char* name = XMLString::transcode(localname);

//...
XMLString::release(&name);
}
void ErnstSax2Handler::fatalError(const SAXParseException& exception)
{
char* message = XMLString::transcode(exception.getMessage());
cout << "Fatal Error: " << message
     << " at line: " << exception.getLineNumber()
     << endl;
XMLString::release(&message);
}
void ErnstSax2Handler::characters(
const   XMLCh* const    chars,
const   XMLSize_t       length
)
{
 // This is called when the parser is reading text.
 // You will need to save what state you are in via
 // startElement / endElement.
 }

int main () {

    try {
        XMLPlatformUtils::Initialize();
    }
    catch (const XMLException& toCatch) {
        char* message = XMLString::transcode(toCatch.getMessage());
        cout << "Error during initialization! :\n";
        cout << "Exception message is: \n"
             << message << "\n";
        XMLString::release(&message);
        return 1;
    }

    char* xmlFile = "test.xml";
    SAX2XMLReader* parser = XMLReaderFactory::createXMLReader();
    parser->setFeature(XMLUni::fgSAX2CoreValidation, true);
    parser->setFeature(XMLUni::fgSAX2CoreNameSpaces, true);   // optional

    DefaultHandler* defaultHandler = new DefaultHandler();
    xercesc::ContentHandler* h  = new DefaultHandler();

    parser->setContentHandler(h);
    parser->setErrorHandler(defaultHandler);

    try {
        parser->parse(xmlFile);
    }
    catch (const XMLException& toCatch) {
        char* message = XMLString::transcode(toCatch.getMessage());
        cout << "Exception message is: \n"
             << message << "\n";
        XMLString::release(&message);
        return -1;
    }
    catch (const SAXParseException& toCatch) {
        char* message = XMLString::transcode(toCatch.getMessage());
        cout << "Exception message is: \n"
             << message << "\n";
        XMLString::release(&message);
        return -1;
    }
    catch (...) {
        cout << "Unexpected Exception \n" ;
        return -1;
    }

    getch();
    delete parser;
    delete defaultHandler;
    return 0;
} 
```

当我在 Visual Studio 2010 中运行上述代码时，它不会在屏幕上打印任何元素名称及其内容。谁能帮我如何调用任何处理程序以及如何从元素（节点）获取内容？提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:56:41.630

您正在创建默认处理程序并将它们传递给解析器，这不是您想要做的，我猜是这样的：

```
DefaultHandler* defaultHandler = new DefaultHandler();
xercesc::ContentHandler* h  = new DefaultHandler();

parser->setContentHandler(h);
parser->setErrorHandler(defaultHandler); 
```

相反，您需要创建自己的类：

```
DefaultHandler* defaultHandler = new ErnstSax2Handler();
xercesc::ContentHandler* h  = new ErnstSax2Handler(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-27T19:25:12.117

如果有人想编译这段代码：你必须从类中删除默认构造函数的声明，或者你必须提供一个实现。

例如。

```
public:
//ErnstSax2Handler(void);
//virtual ~ErnstSax2Handler(void); 
```

# jquery - jQ/UI 升级后无法使 jQ UI 选项卡与 cookie 一起工作

> ID：14585247
> 
> 赞同：2
> 
> 时间：2013-01-29T14:29:46.117
> 
> 标签：jquery, jquery-ui, cookies, tabs

我有这段代码，它使用 cookie 使 jquery 选项卡选择通过刷新保持不变

问题是它只适用于 jQuery UI 1.7.2 和 jQuery JavaScript Library v1.4.1

如果我更新到 jQuery UI - v1.10.0 和 jQuery JavaScript Library v1.9.0，它不会再持续存在（没有错误，只是不会在页面加载时持续选择选项卡）

有谁知道为什么？

这是代码

```
$( function(){
  var cookieName = 'stickyTab';
  $( '#tabs' ).tabs( {
     selected: ( $.cookies.get( cookieName ) || 0 ),
     select: function( e, ui ){
       $.cookies.set( cookieName, ui.index );
     }
  } );
} ); 
```

在我的 html 中我有

```
 <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="jquery-ui.js"></script>
    <script type="text/javascript" src="jquery.cookies.js"></script> 
```

cookie 由[http://code.google.com/p/cookies/提供](http://code.google.com/p/cookies/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:44:25.327

cookie 代码很好，但 jQuery UI Tabs API 已随着您的升级而改变。

1.  `selected`不再是一个有效的选项——它已被重命名为`active`.
2.  `select`不再是有效事件——它已更改为`activate`.
3.  传入的参数的`index`属性已被删除，留下更多工作要做以确定哪个选项卡刚刚激活。`ui``activate`

这是正在使用的新 API 的现场演示：http: [//jaaulde.com/test_bed/stickytabNewAPI/](http://jaaulde.com/test_bed/stickytabNewAPI/)

这是特定的JS：

```
 $(function () {
        var cookieName = 'stickyTabNewAPI',
            $tabs = $('#tabs'),
            $lis = $tabs.find('ul').eq(0).find('li');

        $tabs.tabs({
            active: ($.cookies.get(cookieName) || 0),
            activate: function (e, ui) {
                $.cookies.set(cookieName, $lis.index(ui.newTab));
            }
        });
    }); 
```

我可以理解从选择到激活的名称更改等。但是，我不明白他们为什么删除了参数的`index`属性`ui`。它使更多的工作......

# php - 一个复选框的代码，使我能够选择在 php 中删除哪个

> ID：14585251
> 
> 赞同：0
> 
> 时间：2013-01-29T14:30:04.600
> 
> 标签：php, mysql, database, wamp, web-development-server

我有这段代码将显示我的数据库中的条目。

```
<html>
<head>
<center>

<form action="delete.php">

<a href='display.php'><input type='submit' value='Delete Records'></a></th></tr><br><br><br></form>

<?php

mysql_connect("localhost","root","");

mysql_select_db("bfp6");

$result=mysql_query("Select*From station");

$display="<table border=\"1\"><tr>

<th><font color='yellow'>ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>

<th><font color='yellow'>Station&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>

<th><font color='yellow'>Email&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>

<th><font color='yellow'>Password&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><td></tr>";

while($row=mysql_fetch_array($result)){

$id=$row['id'];

$stations=$row['stations'];

$email=$row['email'];

$password=$row['password'];

$z="<tr><td>".$id."</td><td>".$stations."</td><td>".$email."</td><td>".$password."</td><tr>";

$display=$display.$z;}

$display=$display."</table>";

echo $display;

?><html><body bgcolor="eb3a3a"></body></html> 
```

这是我删除记录的代码（单击即可删除所有记录，除了id = 234的记录）

```
<?php

error_reporting(0);

header("location:display.php");

$con=mysql_connect("localhost","root","");

mysql_select_db("bfp6",$con);

$result=mysql_query("DELETE FROM station WHERE id<>234");

$row=mysql_fetch_array($result);

mysql_close($con);

?> 
```

所以伙计们，我将如何为复选框添加代码，每当我点击时，比如说一个名为“标记要删除的项目”的按钮，它就会出现，当我检查这些并单击删除按钮时，只有那些被选中的才会被删除。 .please在这里帮一点忙。我不太擅长这个:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:32:03.647

看起来您的标头在数据库可以连接之前重定向...

# c++ - 如何通过写入其输入流来退出“mysql.exe”进程（使用 CreateProcess() 创建的进程）

> ID：14585259
> 
> 赞同：0
> 
> 时间：2013-01-29T14:30:24.523
> 
> 标签：c++, mysql

我正在尝试`mysql.exe`优雅地退出，它是使用`CreateProcess()`Windows API 创建的。我的问题是`mysql.exe`没有被杀死。如果我在主线程休眠一段时间后终止该进程，那么我正在写入其 INPUT 流（使用管道）的数据库“转储”不会正确应用。

我将`FLUSH TABLES; EXIT;`作为最后一个命令发送到输入流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:48:57.680

不要使用`TerminateProcess`.

而是发送你的`FLUSH_TABLES; EXIT;`命令，并使用`WaitForSingleObject(hProcess)`它来等待它完成它正在做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:06:38.980

两个答案：

1.  `FLUSH TABLES;EXIT;\n`在写入输入文件流时使用。工作正常

2.  继承句柄使用安全属性和`SetHandleInformation()`. 这个请参考msdn

# .htaccess - 只有当目标是主页时，我才会在 .htaccess 中输入哪些代码行来执行重定向？

> ID：14585262
> 
> 赞同：0
> 
> 时间：2013-01-29T14:30:31.853
> 
> 标签：.htaccess, redirect, mobile, target

只有当目标是主页时，我才会在 .htaccess 中输入哪些代码行来执行重定向？这是这里的主要问题。我会详细说明：

我使用了以下描述的方法：[Mobile Redirect using htaccess to redirect mobile](https://stackoverflow.com/questions/3680463/mobile-redirect-using-htaccess)。效果很好。现在，我的客户正在尝试做的是当有人在移动设备上时，如果他们试图访问不是主页（即博客）的页面，那么他们不会被重定向。因此，如果目标是主页，则重定向正常工作。说得通？

所以，我将再次简化它——仅当目标是主页时，我将在 .htaccess 中输入哪些代码行来执行重定向？

这是我所拥有的（减去检测部分）

```
RewriteCond %{REQUEST_URI} ^/index.php$ [OR]
RewriteCond %{REQUEST_URI} ^/$
RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP:Profile}       !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} "acs|alav|alca|amoi|audi|aste|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd-" [NC,OR]
#there is a bunch of other user agents #
# Check if we're not already on the mobile site
RewriteCond %{HTTP_HOST}          !^m\. 
# Can not read and write cookie in same request, must duplicate condition
RewriteCond %{QUERY_STRING} !(^|&)m=0(&|$) 
# Check to make sure we haven't set the cookie before
RewriteCond %{HTTP_COOKIE}        !^.*mredir=0.*$ [NC]
# Now redirect to the mobile site
RewriteRule ^ http://m.thesiteurl.com [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:49:28.603

这前两行应该可以工作，根据您的需要替换 RewriteRule 。

```
RewriteCond %{REQUEST_URI} ^/index.php$ [OR]
RewriteCond %{REQUEST_URI} ^/$
RewriteRule .* /something.php 
```

是的，它应该像这样工作：

```
RewriteCond %{REQUEST_URI} ^/index.php$ [OR]
RewriteCond %{REQUEST_URI} ^/$
RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP:Profile} !^$ 
RewriteCond %{HTTP_HOST} !^m\. 
RewriteCond %{HTTP:Cookie} !\smredir=0(;|$) 
RewriteRule ^ m.example.org%{REQUEST_URI} [R,L] 
```

# java - 使用 lucene 4 删除文档并检索已删除文档的所有 docId

> ID：14585264
> 
> 赞同：1
> 
> 时间：2013-01-29T14:30:35.780
> 
> 标签：java, lucene

我正在使用 Lucene 4 来保存我的数据。我现在面临的问题如下：

如何从索引中删除文档，然后检索已删除文档的 docIds？

这是我用来删除文档的方法：

```
Query query = new BooleanQuery();
...
indexWriter.deleteDocuments(query); 
```

但是一旦调用了这个方法，我还没有找到一种方法（方法或回调）来获取已删除的文档（及其字段）。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:16:32.667

我不认为你可以在一个电话中做到这一点。

由于 Lucene 删除不会立即发生（需要额外`commit()`的），因此返回已删除的文档 ID 会有点模棱两可。如果您查看 delete 方法，它实际上只是将作业添加到删除队列之一。也就是说，`commit()`也不返回与此相关的任何内容；-(

无论如何，我能想到的唯一方法是运行你的`query`，收集文档/文档 ID，然后运行`deleteDocuments(query)`。您可能会遇到一些重叠（例如，如果另一个线程会删除相同的文档），但由于`commit()`阶段的原因，这是不可避免的。

# asp.net - 存储和检索页面回发的内容。

> ID：14585265
> 
> 赞同：0
> 
> 时间：2013-01-29T14:30:37.980
> 
> 标签：asp.net

我想以这样的格式存储内容，并能够在页面回发后检索。我可以使用隐藏字段吗？如果是这样，哪种数据类型（不是字符串？） Stringbuilder ？

```
 <b>Email Template:</b> UserAssignment
    <b>TO:</b> manojp.nayak@gmail.com<b>CC:</b> 
    <b>FROM:</b>admin@gmail.com <b>SUBJECT:</b>Task Assignment Project Activity  has been assigned to you.

    <b>BODY:</b> Deliverable Information :
    Test Deliverable 01 Test Issue 01   

    Project Activity  assigned by: Admin at: 2013-01-29 7:50 PM

    Automated Email Notification. Do not reply.

    Email Comments: 123test

    <b>FILES:</b> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:38:50.713

你当然可以。你可以使用类似的东西：

```
<asp:HiddenField ID="HiddenField_data" runat="server" /> 
```

从事件背后的代码中，您可以在此处保存所需的值，例如：

```
HiddenField_data.Value = @"<b>Email Template:</b> UserAssignment
    <b>TO:</b> manojp.nayak@gmail.com<b>CC:</b> 
    <b>FROM:</b>admin@gmail.com <b>SUBJECT:</b>Task Assignment Project Activity  has been assigned to you.

    <b>BODY:</b> Deliverable Information :
    Test Deliverable 01 Test Issue 01   

    Project Activity  assigned by: Admin at: 2013-01-29 7:50 PM

    Automated Email Notification. Do not reply.

    Email Comments: 123test

    <b>FILES:</b> "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:38:55.170

您可以使用用户控件来封装您的内容

Visibility ：您可以使用用户控件的 Visible 属性

持久性：您可以使用 EnableViewState 属性

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.usercontrol (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.usercontrol(v=vs.80).aspx)

# blackberry - 黑莓删除突出显示的蓝色焦点

> ID：14585267
> 
> 赞同：0
> 
> 时间：2013-01-29T14:30:43.540
> 
> 标签：blackberry, focus, imagebutton

我有一个自定义 ImageButton，我在其中放置了一个 png 和悬停图像，它对某些部分是透明的。因此，当它集中注意力时，它也会以蓝色焦点为自己。我想删除那个焦点蓝色，但同时我希望我的 hoverImage 工作！
这是我的 ImageButton 类：[http ://codepad.org/mjtIUKLR](http://codepad.org/mjtIUKLR)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:48:32.037

一个对我有用的解决方案是将此功能添加到paint方法并跟踪是否已获得焦点：

```
boolean hasFocus = false;
public void onFocus(int direction) {
    invalidate();
    hasFocus = true;
}

public void onUnfocus() {
    hasFocus = false;
    invalidate();
    super.onUnfocus();
} 
```

然后在您的绘画方法中使用它：

```
public void paint(Graphics graphics) {
    if (hasFocus){
        graphics.drawShadedFilledPath(xPositions, yPositions, null,      
                                      HIGHLIGHTED_GRADIENT, null);
    }else{
        graphics.drawShadedFilledPath(xPositions, yPositions, null,      
                                      GRADIENT, null);      
    }
   super.paint(graphics);
} 
```

在上面的示例中，我使用自定义渐变来突出显示，它会覆盖默认的蓝色。在你的情况下，你显然会想要改变你的形象或其他东西。

# asp.net-mvc-3 - 使用 Unity 将服务注入控制器

> ID：14585268
> 
> 赞同：0
> 
> 时间：2013-01-29T14:30:44.523
> 
> 标签：asp.net-mvc-3, wcf, unity-container

我正在使用 Unity 将 wcf 服务注入到控制器中。但是我注意到没有办法关闭服务。在服务方法返回后，如何确保与服务的连接关闭？

```
public ITiers TierClient { get; set; }

    public HomeController(ITiers tierClient)
    {
        TierClient = tierClient;
    }

    public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        bool result = TierClient.CheckIfTierExiste("***", "***", null, true);

        return View();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:36:35.290

您可以将 a[`custom lifetime manager`](http://www.devtrends.co.uk/blog/introducing-the-unity.mvc3-nuget-package-to-reconcile-mvc3-unity-and-idisposable)用于此依赖项。我建议您使用[`Unity.MVC3`](http://unitymvc3.codeplex.com/)注册自定义依赖解析器的 NuGet 包和允许您处理`IDisposable`资源的自定义生命周期管理器。

# linux - 某些 Linux 浏览器中的字体样式和大小差异

> ID：14585271
> 
> 赞同：0
> 
> 时间：2013-01-29T14:30:55.233
> 
> 标签：linux, fonts

我网站上的默认字体在外部样式表中定义为：

```
body { font-family: Arial; font-size:62.5%;} 
```

这在 Windows 和 Mac 中运行良好。

为了测试我的站点，我安装了 Linux Mint 13 (Mate) 并从存储库中加载了一系列浏览器。我在不同的 PC 上进行了两次安装。我将所有浏览器设置保留为默认设置。

Firefox、Opera、Konqueror 和 Reconq 按预期显示了我的页面。

Web (Epiphany) 会覆盖默认字体样式（即它不是 Arial）并且还会显示太大的字体大小。

Midori 显示的字体太大。（安装在 windows 中，midori 显示正确的字体大小）。

我相信 Web (Epiphany) 主要是为 GNOME 桌面环境设计的，也许这是一个因素，或者我需要为这两个浏览器进行不同的设计以使它们在 Linux 中正确显示字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:48:51.990

似乎某些 Linux 发行版不包含 Arial 字体。我添加了 Liberation Sans 作为替代字体，这似乎没问题。

但是我不明白为什么有些浏览器不需要这个。除非他们在浏览器中包含字体或准确映射一些替代方案？

# sql - 连接两个表（具有多对一关系）需要很长时间

> ID：14585273
> 
> 赞同：0
> 
> 时间：2013-01-29T14:30:57.327
> 
> 标签：sql, performance, join, common-table-expression

我有两个表，表 1 有一个 X 列，表 2 有一个与 X 列相关的列。

在表 1 中，列 X 的条目被重复（即条目可以是 {1,1,2,3,5,4,4,4,9}）

在表 2 中，X 列不重复但表 1 中所有不同的条目出现

所以有一对多的关系

现在我想加入这两个表（如下代码所示），性能非常慢！

有任何想法吗？

```
> CTE_DE_Normalised AS
        (
            SELECT  *

            FROM    Table1 a

            JOIN    Table2 b
            ON  a.Id = b.Table1Id
        ) 
```

# c# - 如何创建/使用 WCF 服务，使其长期稳定？

> ID：14585275
> 
> 赞同：1
> 
> 时间：2013-01-29T14:31:09.810
> 
> 标签：c#, wcf, nettcpbinding, net-tcp

我正在尝试创建 WCF 客户端-服务器应用程序，它可以运行数天/数周而无需干预。

以下是客户端处理服务器交互的方式：

```
 static object myLock=new object();
    static MyService.IMyService myService;

    static void PerformServerInteraction(ref MyService.IMyService myService,  Action<MyService.IMyService> action)
    {
        for (int i = 0; i < 10; i++)
        {
            lock (myLock)
            {
                try
                {
                    action(myService);
                    break;
                }
                catch (Exception e)
                {
                    LogException(e);
                }
                myService = new MyServiceClient(); 
            }
            Thread.Sleep(5000);

        }
    } 
```

`PerformServerInteraction`由客户端应用程序从多个线程调用。

服务器似乎大部分时间都运行良好（日志中没有显示错误）。

客户端调用服务器操作最多需要几毫秒。

几个小时后，应用程序运行良好。但在那之后，客户端调用开始大量超时：

```
System.TimeoutException: The open operation did not complete within the allotted timeout of 00:01:00\. The time allotted to this operation may have been a portion of a longer timeout. ---> System.TimeoutException: The socket transfer timed out after 00:01:00\. You have exceeded the timeou
t set on your binding. The time allotted to this operation may have been a portion of a longer timeout. ---> System.Net.Sockets.SocketException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected
 host has failed to respond
   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
   at System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout, Boolean closing)
   --- End of inner exception stack trace ---
   at System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout, Boolean closing)
   at System.ServiceModel.Channels.SocketConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   at System.ServiceModel.Channels.DelegatingConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.SendPreamble(IConnection connection, ArraySegment`1 preamble, TimeoutHelper& timeoutHelper)
   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.DuplexConnectionPoolHelper.AcceptPooledConnection(IConnection connection, TimeoutHelper& timeoutHelper)
   at System.ServiceModel.Channels.ConnectionPoolHelper.EstablishConnection(TimeSpan timeout)
   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)
   --- End of inner exception stack trace ---

Server stack trace:
   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]:
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at .....my code 
```

问题一直存在，直到我重新启动客户端应用程序或服务器应用程序。如果我运行多个客户端应用程序，其中一个客户端中的此类问题会干扰其他客户端。

这是服务器启动代码：

```
try
{
    ThreadPool.SetMaxThreads(int.MaxValue, int.MaxValue);
    //lets make sure that BW2 does not disturb the other software on the computer
    Process.GetCurrentProcess().PriorityClass = ProcessPriorityClass.BelowNormal;

    //load the shedluer static constructor
    ServiceHost svh = new ServiceHost(typeof(MyService));

    var tcpbinding = new NetTcpBinding(SecurityMode.None);

    //remove limits on the max array size
    tcpbinding.MaxBufferPoolSize = 2147483647;
    tcpbinding.MaxBufferSize = 2147483647;

    tcpbinding.MaxReceivedMessageSize = 2147483647;
    tcpbinding.ReaderQuotas.MaxArrayLength = 2147483647;
    tcpbinding.ReaderQuotas.MaxBytesPerRead = 2147483647;
    tcpbinding.ReaderQuotas.MaxStringContentLength = 2147483647;
    tcpbinding.ReaderQuotas.MaxDepth = 2147483647;

    if (IsWindowsServer())
    {
        tcpbinding.MaxConnections = int.MaxValue;
    }

    var location = "net.tcp://localhost:12345";
    svh.AddServiceEndpoint(typeof(IMyService), tcpbinding, location);

    // Check to see if the service host already has a ServiceMetadataBehavior
    if (!IsWindowsServer())
    {
        ServiceMetadataBehavior smb = svh.Description.Behaviors.Find<ServiceMetadataBehavior>();
        // If not, add one
        if (smb == null)
            smb = new ServiceMetadataBehavior();
        //smb.HttpGetEnabled = true;
        smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
        svh.Description.Behaviors.Add(smb);

        // Add MEX endpoint

        svh.AddServiceEndpoint(
            ServiceMetadataBehavior.MexContractName,
            MetadataExchangeBindings.CreateMexTcpBinding(),
            location + "/mex"
            );
    }

    svh.Open();
    Console.WriteLine("Service maunted at {0}", location);
    Console.WriteLine("Press any key to exit");
    Console.ReadKey();
    svh.Close();
    Console.WriteLine("Done");
}
catch (Exception e)
{
    Console.WriteLine("Exception");
    Console.WriteLine(e);
} 
```

为什么我会得到这个，我怎样才能避免将来得到这个？

# json - $.ajax() - 使用返回的 json 数据

> ID：14585276
> 
> 赞同：0
> 
> 时间：2013-01-29T14:31:17.573
> 
> 标签：json, jquery

我无法从 ASP.NET webmethod 返回的 json 数据中提取数据。这是我的代码：

```
$.ajax({
    type: "POST",
    url: "myurl",
    data: "{}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (appdata) {
        console.log(appdata.d);
        var testdata = appdata.d;
        //$.each(testdata, function (index, appt) {
        //    console.log(appt);
        //});
    }
}); 
```

`console.log(appdata.d)`返回以下格式的数据

```
[
 {
  'PRODUCTID' : '51',
  'ENTRYDATE' : '2/13/2013 12:00:00 AM',
  'CATEGORYID' : ''
 },

 {
  'PRODUCTID' : '52',
  'ENTRYDATE' : '2/13/2013 12:00:00 AM',
  'CATEGORYID' : ''
 }
] 
```

代码

```
//$.each(testdata, function (index, appt) {
//    console.log(appt);
//}); 
```

导致以下错误：

```
Uncaught TypeError: Cannot use 'in' operator to search for... 
```

我怎样才能提取这些数据？

**编辑** `console.log(appdata)`给出以下

```
Object {d: "[{'PRODUCTID' : '51','ENTRYDATE' : '2/13…ENDTIME' : '2/13/2013 3:45:00 AM','CATEGORYID' : ''}]"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:49:55.463

我怀疑如果`console.log( appdata )`你得到这样的东西：

```
{
    d: "[
    {
      'PRODUCTID' : '51',
      'ENTRYDATE' : '2/13/2013 12:00:00 AM',
      'CATEGORYID' : ''
    },
    ..."
} 
```

也就是说，服务器将包含`d`在引号中的数组包装起来。响应是有效的 JSON，所以 jQuery 不会抱怨它，但值`d`不是一个对象，而是另一个 JSON 字符串。

修复服务器脚本使其不这样做，或者如果不可能，则将字符串解析为单独的 JSON 实体。

# caching - 通过 TypoScript 对象路径引导的 Extbase 扩展不会缓存他的操作

> ID：14585278
> 
> 赞同：2
> 
> 时间：2013-01-29T14:31:25.777
> 
> 标签：caching, plugins, typo3, extbase

我通过 TypoScript 对象路径 (USER_INT) 引导 Extbase 插件：

```
lib.pagefiles = USER_INT
lib.pagefiles {
    userFunc = tx_extbase_core_bootstrap->run
    pluginName = Pi1
    extensionName = Pagefiles
    controller = PageFiles
    action = list
    view =< plugin.tx_pagefiles.view
    settings =< plugin.tx_pagefiles.settings
} 
```

此扩展的列表操作现在不再缓存（我在控制器中打印了时间戳对其进行了测试）。

当我通过页面上的前端插件加载操作时，扩展缓存工作正常。

我的`ext_localconf.php`：

```
<?php
if (!defined('TYPO3_MODE')) {
    die ('Access denied.');
}

Tx_Extbase_Utility_Extension::configurePlugin(
    $_EXTKEY,
    'Pi1',
    array(
        'PageFiles' => 'list',
    ),
    // non-cacheable actions
    array(

    )
);

?> 
```

有谁明白这里发生了什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:36:49.187

扩展输出没有被缓存，因为您`USER_INT`在 TypoScript 配置中使用了一个对象（`USER_INT`对象从不被定义缓存）。

尝试使用一个`USER`对象。

# android - Air for Android 应用程序在大约 1 小时后关闭，可能存在内存泄漏？

> ID：14585281
> 
> 赞同：1
> 
> 时间：2013-01-29T14:31:33.820
> 
> 标签：android, actionscript-3, flash, logcat

我有一个需要 24/7 全天候运行的 Air 应用程序。

该应用程序在 Android TV Stick 上运行大约 1 小时后会在没有任何警告的情况下自行关闭。

这是我的 logcat 读数：

> I/ActivityManager（1234）：211911 kB：air.mycompany.myapp（pid 7629）
> 
> I/ActivityManager（1234）：7629 238272K 224692K 208012K 205652K air.mycompany.myapp
> 
> I/ActivityManager(1234)：进程 air.mycompany.myapp (pid 7629) 已终止。
> 
> W/ActivityManager（1234）：强制删除 ActivityRecord{41378f50 air.mycompany.myapp/.AppEntry}：应用程序死亡，没有保存状态
> 
> I/WindowManager（1234）：WIN DEATH：Window{412e5718 air.mycompany.myapp/air.mycompany.myapp.AppEntry paused=false}
> 
> W/InputDispatcher（1234）：通道'412e5718 air.mycompany.myapp/air.mycompany.myapp.AppEntry（服务器）'〜消费者关闭输入通道或发生错误。事件=0x8
> 
> E/InputDispatcher(1234): 通道 '412e5718 air.mycompany.myapp/air.mycompany.myapp.AppEntry (server)' ~ 通道已不可恢复地损坏，将被处理！
> 
> W/InputDispatcher（1234）：试图取消注册已经未注册的输入通道“412e5718 air.mycompany.myapp/air.mycompany.myapp.AppEntry（服务器）”
> 
> W/WindowManager（1234）：从容器 Window{412e5718 air.mycompany.myapp/air.mycompany.myapp.AppEntry paused=false} 强制删除子 win Window{41390cd8 SurfaceView paused=false}
> 
> W/WindowManager（1234）：从容器 Window{412e5718 air.mycompany.myapp/air.mycompany.myapp.AppEntry paused=false} 强制删除子 win Window{4137d548 SurfaceView paused=false}
> 
> I/WindowManager（1234）：WINDOW DIED Window{412e5718 air.mycompany.myapp/air.mycompany.myapp.AppEntry paused=false}

首先的想法是它是内存泄漏（我试图弄清楚的事情，我通过movieclips循环，我认为它们在内存中堆积而不是被正确地重用）

有什么想法吗？

# vba - Excel 2007 宏移动重复项

> ID：14585284
> 
> 赞同：3
> 
> 时间：2013-01-29T14:31:39.107
> 
> 标签：vba, excel, merge, split, excel-2007

我首先对 Excel 宏一无所知，所以我真的不知道我在做什么，但任何帮助将不胜感激。

我有一个电子表格，在 A - G 行中有列（无标题）。

A 列包含一个 ID，我要做的是将所有重复的 ID 从列结构剪切到行结构。每个 ID 最多可能有 9 行需要移动。

例如当前格式：

```
Row 1 - ID123 / Bob / James / 12345 / 1 / A1 / 120
Row 2 - ID124 / John / Smith / 2351 / 5 / C2 / 121
Row 3 - ID124 / John / Smith / 25562 / 1 / A2 / 162
Row 4 - ID162 / Gary / Barlow / 251767 / 9 / B1 / 167 
```

目标格式：

```
Row 1 - ID123 / Bob / James / 12345 / 1 / A1 / 120
Row 2 - ID124 / John / Smith / 2351 / 5 / C2 / 121 / 25562 / 1 / A2 / 162
Row 3 - ID162 / Gary / Barlow / 251767 / 9 / B1 / 167 
```

所以我的问题是-a）这是可行的b）我将如何去做（我很高兴自己制定解决方案，但由于我是VBA初学者，指向正确的方向会很方便！）

应用宏之前数据的外观

![示例数据](../Images/71684d7304b9f28b76cd508b62e7934e.png)

数据最终应该如何看待

![这些数据最终应该如何看待](../Images/fb04c289b7d7d5aac25529f85bd82e55.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:27:37.927

你可以试试这个。它正在使用一个`dictionary`对象。此解决方案假定每一行都以`Row 1 - ID123 / Bob / James`模式开头。

```
Option Explicit

Sub mergeDuplicates()
Dim d As Object
Dim rng As Range
Dim vArr As Variant
Dim i As Integer, j As Integer

Set rng = Sheets(3).Range("A2:H5")
Set d = CreateObject("Scripting.Dictionary")
vArr = rng.Value

For i = LBound(vArr) To UBound(vArr)
    If Not d.Exists(vArr(i, 2)) Then '-- check for unique ID
        d.Add vArr(i, 2), Trim(Replace(vArr(i, 1), "-", ""))
        For j = 2 To UBound(vArr, 2)
            d.Item(vArr(i, 2)) = d.Item(vArr(i, 2)) + "/" & Trim(Replace(vArr(i, j), "/", ""))
        Next j
    Else
        For j = 5 To UBound(vArr, 2)
            d.Item(vArr(i, 2)) = d.Item(vArr(i, 2)) + "/" & Trim(Replace(vArr(i, j), "/", ""))
        Next j
    End If
Next i

'-- output to sheet
rng.Offset(5).Resize(UBound(d.items) + 1, 1) = Application.Transpose(d.items)

'-- split the text to columns
rng.Offset(5).Resize(UBound(d.items) + 1, 1).TextToColumns Destination:= _
        rng.Offset(5), DataType:=xlDelimited, _
        TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, _
        Tab:=True, Semicolon:=False, Comma:=False, Space:=False, _
        Other:=True, OtherChar:="/"

Set d = Nothing
End Sub 
```

**输出：**

![在此处输入图像描述](../Images/22f4e05296080cea2de083473c0750f0.png)

* * *

## 根据 OP 的评论和更新

`for loop`根据他的真实数据更改内容以适应。

```
For i = LBound(vArr) To UBound(vArr)
    If Not d.Exists(vArr(i, 1)) Then '-- check for unique ID
        d.Add vArr(i, 1), Trim(vArr(i, 1)) '-- add RowID as first element in item
        For j = 2 To UBound(vArr, 2)  '-- then append each element(column) to the first element
            d.Item(vArr(i, 1)) = d.Item(vArr(i, 1)) + "/" & Trim(Replace(vArr(i, j), "/", ""))
        Next j
    Else
        For j = 4 To UBound(vArr, 2)  '-- when duplicates found, append from 4th column
            d.Item(vArr(i, 1)) = d.Item(vArr(i, 1)) + "/" & Trim(Replace(vArr(i, j), "/", ""))
        Next j
    End If
Next i 
```

**基于 OP 更新的样本数据的输出：**

![在此处输入图像描述](../Images/af0359cd78167adcc3376b856c55e47b.png)

# zend-framework2 - ZF2 使用 composer 自动加载自定义模块

> ID：14585285
> 
> 赞同：0
> 
> 时间：2013-01-29T14:31:40.210
> 
> 标签：zend-framework2, composer-php, autoloader

我正在尝试设置一个 ZF2 项目（与 zf2skeleton 略有不同），我想使用 composer 来处理所有自动加载，不仅来自供应商的自动加载（通过 composer 安装），还包括我创建的那些模块。

出于某种原因，我无法访问我的应用程序模块索引控制器。我认为它的自动加载不起作用......我只是不知道我可能做错了什么......

谢谢！

**文件和数据如下：**

这是我的文件夹结构：

```
index.php
private
- modules
-- Aplication
--- src
----- Aplication
------- Controller
---------- IndexController.php
- vendor
-- zendframework
-- composer
-- autoload.php
- composer.json
- composer.phar 
```

主配置文件

```
return array(
    'modules' => array(
        'Application',
    ),
    'module_listener_options' => array(
        'config_glob_paths' => array(
            'private/config/autoload/{,*.}{global,local}.php',
        ),
        'cache_dir' => realpath(dirname(__DIR__) . '/../../data/cache'),
        'module_paths' => array(
            realpath(__DIR__ . '/../module'),
            realpath(__DIR__ . '/../vendor'),
        ),
    ),
); 
```

索引.php

```
include_once 'private/vendor/autoload.php';

$application = Zend\Mvc\Application::init(include 'private/config/main.config.php');
return $application; 
```

作曲家.json

```
{
    "repositories": [
        {
            "type": "composer",
            "url": "http://packages.zendframework.com/"
        }
    ],
    "require": {
        "php": ">=5.3.3",
        "zendframework/zendframework": "2.*"
    },
    "autoload": {
        "psr-0": {
            "Application\\": "module/Application/src"
        }
    }
} 
```

应用程序配置

```
return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route' => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action' => 'index',
                    ),
                ),
            ),
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Application\Controller\Index' => 'Application\Controller\IndexController'
        ),
    ),
); 
```

索引控制器

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;

class IndexController extends AbstractActionController {

    public function indexAction() {
        die("app ok");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:36:20.643

首先，据我所知，您没有运行您的应用程序：

```
$application = Zend\Mvc\Application::init(include 'private/config/main.config.php');
$application->run(); 
```

另一点是，您不必使用 composer 来加载您的模块。由于您的应用程序配置已经包含该`module`目录，模块加载过程将自动扫描该目录并使用在您的模块类级别定义的加载策略。

# c++ - C++ - RegCreateKeyEx 成功但没有结果

> ID：14585286
> 
> 赞同：8
> 
> 时间：2013-01-29T14:31:41.120
> 
> 标签：c++, winapi, registry

谁能告诉我这段代码有什么问题？没有错误。一切都返回 ERROR_SUCCESS 但在寄存器中看不到任何更改。

```
void Utils::writePath(LPCTSTR data)
{
    HKEY hkey;
    DWORD dwDisposition;
    if(RegCreateKeyEx(HKEY_LOCAL_MACHINE, 
      TEXT("SOFTWARE\\aaTestCompany\\testApp"), 
      0, NULL, 0, 
      KEY_WRITE, NULL, 
      &hkey, &dwDisposition) == ERROR_SUCCESS) 
    {
        long setRes = RegSetValueEx (hkey, "testPath", 0, REG_SZ, (LPBYTE)data, strlen(data)+1);
         if (setRes == ERROR_SUCCESS) {
                printf("Success writing to Registry.");
            } else {
                printf("Error writing to Registry.");
            }
        RegCloseKey(hkey);
    }
    else
        MessageBox(NULL,"error","",0);
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-29T14:35:27.210

由于应用程序在 64 位操作系统上是 32 位的，因此注册表项实际上将在`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node`.

请参阅[注册表中的 32 位和 64 位应用程序数据](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724072%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:40:10.147

您可以尝试将第 5 个和第 6 个参数设置为 REG_OPTION_NON_VOLATILE、KEY_ALL_ACCESS

# teamcenter - Teamcenter Visualization Professional/Mockup/Normal 等是否可定制？

> ID：14585287
> 
> 赞同：0
> 
> 时间：2013-01-29T14:31:44.457
> 
> 标签：teamcenter, teamcenter-visualization

Teamcenter 富客户端 (RAC) 是可定制的，因为它是基于 Eclipse 的应用程序。但是，Teamcenter 可视化工具似乎是 Teamcenter 套件中的一个单独组件。

**可以自定义这个软件吗？**我的目标是开发一个移动应用程序来远程控制 Vis View/Mockup 应用程序。在第一步中，没有必要可视化 3D 图像。只有手指手势就足够了。在第二步中，将桌面和移动设备中的 3D 图像同步就好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T14:14:38.337

Teamcenter Visualization 已经有一个移动应用程序。但要回答您问题的第一部分，TCVis 是使用 COM 组件构建的。虽然我不确定供应商是否提供任何文档，但至少可以从 FrameBroker 和 ObjectBroker dll 开始调用 tcvis 应用程序。只需添加对这些 dll 的引用，您就会找到这样做的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T08:39:56.473

COM API 的文档位于安装文件夹 C:\Program Files\Siemens\Teamcenter11.1\Visualization\Examples\Automation\Documentation\Start.html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:32:08.370

我相信 teamcenter 可视化软件已经支持移动应用程序，我不认为您可以使用 Visualization 进行任何自定义....但是您仍然有机会浏览安装目录并找到退出的安装文件，如果您可以赶上一些东西。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-01-30T20:58:43.040

您可以自定义 Teamcenter 可视化，但您应该拥有 SDK 许可证

# java - '.' 的 Eclipse 格式化程序选项 对齐 (Java)

> ID：14585288
> 
> 赞同：14
> 
> 时间：2013-01-29T14:31:49.943
> 
> 标签：java, eclipse

我希望 Eclipse 格式化一些调用构建器的代码，如下所示：

```
final Item item = new Item.Builder()
                          .name("something")
                          .field("a value")
                          .build(); 
```

即在“。”上对齐 第一行的字符。我可以通过手动对齐第二行（.name("something")）来手动说服 Eclipse 执行此操作，但是任何自动格式化都会破坏这一点。

我已经使用了在 Eclipse 中可以找到的所有各种格式选项，但它们似乎都没有做我想要的。关于是否有格式选项以这种方式布置代码的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T19:43:34.383

在点位置精确对齐是不可能的，但是每个方法调用的换行符可以自动完成。我已经创建了这个输出

```
void format() {
    Test test = new Test()
            .a()        // this call can also be configured to be one line above
            .b()
            .c();
} 
```

通过在格式化程序设置中选择*Line Wrapping选项卡，选择**Function Calls, Qualified invocations* ，将组合框中的*Line wrapping 策略*切换为**Wrap all elements, each element on a new line**最后选中复选框*Force split, even if line short比最大线宽*。

您可以通过选择“...除了第一个元素”策略来将第一个方法调用放入第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:05:40.160

创建一个新的格式化程序：

`Properties -> Formater -> Configure Workspace Settings -> New`

然后在标签`Off/On Tags`集上`Enable Off/On tags`

然后像这样围绕你的代码：

```
/* @formatter:off */
final Item item = new Item.Builder()
                          .name("something")
                          .field("a value")
                          .build();
/* @formatter:on */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:17:16.640

我认为，您可以通过使用“jalopy”来实现这一点。如果您使用 Maven，则有一个 Maven 插件。

如果您想使用 jalopy，那么您感兴趣的设置是您应该将其值设置为`<methodCallChain>`的元素。`alignment``true`

编辑：[maven jalopy 插件](https://www.google.co.in/url?sa=t&source=web&cd=2&cad=rja&ved=0CDoQFjAB&url=http://mojo.codehaus.org/jalopy-maven-plugin/&ei=rioYUYW1Koub1AXtsIGgAg&usg=AFQjCNEdjx-6tB8jjXa4BFK6CoE_yvrd_w&sig2=r2_-avFL2VIkOvARtXY_JA)。确保以`clean`阶段为目标并使用目标`format`

# macos - 如果 CTRun 包含表情符号字符，有没有办法查询它？

> ID：14585289
> 
> 赞同：1
> 
> 时间：2013-01-29T14:31:53.983
> 
> 标签：macos, core-text

我正在对使用 CTFontDrawGlyphs 渲染的字形进行颜色转换，但我不想对表情符号字形进行这些转换，因为它们已经具有有意义的颜色信息。

那么，当我有字形的 CTRun 时，我可以检测它是否真的是表情符号/彩色字体？

我可以用“AppleColorEmoji”将字符串与后记名称进行比较，但一直这样做似乎非常浪费，而且如果碰巧有另一种具有相同功能的字体，这也有点麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T21:03:27.737

啊，我可以使用 CTFontGetSymbolicTraits 获得符号特征，并检查 kCTFontTraitColorGlyphs（或 kCTFontColorGlyphsTrait），虽然没有记录，但在公共标头中可用。

# bash - 创建几个变量并将它们传递给脚本

> ID：14585290
> 
> 赞同：0
> 
> 时间：2013-01-29T14:31:53.977
> 
> 标签：bash, variables, send

希望你能帮我解决这个问题，我对 bash 还很陌生，所以我搜索并找到了很多我正在研究的例子，但我有点卡在这里。

我有 2 个脚本。

script1.sh 一个工作正常：它下载包含标题、艺术家和曲目 url 的 youtube 播放列表的 rss 提要，下载这些项目并将它们存储到 playlist.txt 中。

问题是，我有其他 youtube 播放列表，如果我想使用不同的 rss 提要页面，我需要手动更改 script1.sh 中播放列表的 url。

因此，我正在编写 script2.sh，它将下载包含所有不同播放列表 rss 提要的 url，然后将它们一个接一个地发送到 script1.sh。

播放列表网址是这样的：

[http://gdata.youtube.com/feeds/api/playlists/](http://gdata.youtube.com/feeds/api/playlists/) **hashtag_playlist** ?&max-results=50&fields=entry%28title,link%29&prettyprint=true

到目前为止，我已经在 script2.sh 上收集了我的 5 个播放列表的名称和主题标签，在 playlists.txt 中，如下所示：

*   “播放列表1” PLYNrAD9Jn2WDWZFp23G3a2tkOBtdeNAbc6
*   “播放列表2” PLYNrAD9Jn2WCf54CoS22kn3pBX1XUFinE

我还设法为每个播放列表创建了一个文本文件，并根据播放列表的名称命名它们。我现在要做的是将一个标签一个接一个地发送到 script1.sh，并使其在每个适当的文件中输出每个播放列表的 url、标题和艺术家。我需要将 playlists.txt 中的每一行都设为一个变量，并将它们传递到 script1.sh 的 url 中，但我并不真正理解如何做到这一点。

我希望我很清楚。我可以回答你的任何问题以澄清我错过的一些事情。

先感谢您

编辑：我刚开始写 bash 所以我真的很糟糕，这些对你来说一定很丑陋。提前抱歉:)

脚本1.sh

```
url="http://gdata.youtube.com/feeds/api/playlists/PLYNrAD9Jn2WDmpu3gNVxIVO8bAiOcQkx7?&max-results=50&fields=entry%28title,link%29&prettyprint=true"

name="SlickSlickSound" 
```

将 url rss 提要页面下载到 utube

```
wget -O $HOME/Music/"Youtube Playlist"/utube $url 2>&1 
```

将下载页面的标题提取到 temp0 使用 xml-twig-tools 中的 xml_grep

```
xml_grep 'title' utube --text_only > temp0 
```

将 URL 提取到 temp2

```
grep -o 'href=['"'"'"][^"'"'"']*&amp;feature=youtube_gdata' utube  > temp 
```

为了清楚起见，将网址剥离到最低限度：www.example.com

```
sed "s/href='http\?:\/\///" temp > temp1
sed "s/&amp;feature=youtube_gdata//" temp1 > temp2 
```

在同一文件 output.txt 中合并 URL 和 Title 临时文件

```
paste temp2 temp0 > output.txt 
```

脚本2.sh

```
url="http://www.youtube.com/user/SterylMreep/videos?flow=grid&view=1" 
```

下载包含所有播放列表信息的页面源

```
wget -O "$HOME/Music/Youtube Playlist"/Playlists/collection $url 2>&1 
```

提取播放列表的名称

```
grep -o 'data-context-item-title=......................' collection > tmp0 
```

为了清楚起见，将网址剥离到最低限度

```
sed 's/data-context-item-title=//' tmp0 > tmp2
sed 's/" d...*$/"/' tmp2 > tmp3 
```

删除空格和\

```
sed 's/^[ \t]*//' tmp3 > tmp4
sed 's/\///' tmp4 > tmp5 
```

将播放列表 ID 提取到 tmp

```
grep -o 'href="/playlist?list=..................................' collection  > tmp 
```

为了清楚起见，将网址剥离到最低限度

```
sed 's/href="\/playlist?list=//' tmp > tmp1 
```

使用播放列表和主题标签的名称创建文件

```
paste tmp4 tmp1 > playlists.txt 
```

使用播放列表名称创建文件

```
cat tmp4 | xargs touch 
```

接下来将 playlists.txt 中的主题标签传递到 script1.sh 并获取标题、艺术家和网址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:36:22.303

```
while read line
do
  sh script1.sh $line
done < script2.sh 
```

# jsf - PrimeFaces DataList 可以使用哪些事件

> ID：14585292
> 
> 赞同：1
> 
> 时间：2013-01-29T14:32:03.080
> 
> 标签：jsf, primefaces

**当用户使用DataList**上的 Paginator 单击页面时，我试图捕获 Page 事件。用户指南没有提到这个组件的任何 Ajax 行为，但我还是尝试`<p:ajax event="page">`了，发现不支持事件“页面”。

**DataList**有可用的事件吗？如果没有，有没有人知道如何将每个页面保存为用户页面？

谢谢 :) 尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:20:27.733

`preRenderComponent`您可以使用 datalist 上的通用事件挂钩组件的渲染生命周期（每次分页操作都会重新渲染组件） 。只需将以下内容添加到您的数据列表中：

```
 <p:dataList>
      <f:event type="preRenderComponent" listener="#{yourBean.operation}"/>
   </p:dataList> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T17:21:39.103

如果您单击页面链接，则可以覆盖标准的 PrimeFaces javascript 函数。从那里你可以调用 remoteCommand 或任何你想要的......

我知道这不是最佳做法，而是一种可能性；）

```
PrimeFaces.widget.Paginator.prototype.bindPageLinkEvents = function(){

  var $this = this;

  this.pagesContainer.children('.ui-paginator-page').on('click.paginator', function(e) {
    var link = $(this);

    if(!link.hasClass('ui-state-disabled')&&!link.hasClass('ui-state-active')) {
      $this.setPage(parseInt(link.text()) - 1);
    }

    // your code goes here

  })
  .on('mouseover.paginator', function() {
    var item = $(this);
    if(!item.hasClass('ui-state-disabled')&&!item.hasClass('ui-state-active')) {
      item.addClass('ui-state-hover');
    }
  })
  .on('mouseout.paginator', function() {
    $(this).removeClass('ui-state-hover');
  })
  .on('focus.paginator', function() {
    $(this).addClass('ui-state-focus');
  })
  .on('blur.paginator', function() {
    $(this).removeClass('ui-state-focus');
  })
  .on('keydown.paginator', function(e) {
    var key = e.which,
        keyCode = $.ui.keyCode;

    if((key === keyCode.ENTER||key === keyCode.NUMPAD_ENTER)) {
      $(this).trigger('click');
      e.preventDefault();
    }
  });
}; 
```

或者看看这个答案。我非常喜欢它！ [https://stackoverflow.com/a/25930991/2265727](https://stackoverflow.com/a/25930991/2265727)

# javascript - 活动链接（css？）

> ID：14585305
> 
> 赞同：0
> 
> 时间：2013-01-29T14:32:31.203
> 
> 标签：javascript, css

我的 CSS 有问题。通常我可以做对，但现在它对我不起作用。

得到菜单代码

```
<nav>
    <ul class="ca-menua">
        <li class="home"><a href="#home" id="1" class="tooltip"><div class="ca-icona">O</div><span>Home</span></a>
        </li>
        <li class="info"><a href="#info" id="2" class="tooltip"><div class="ca-icona">e</div><span>Info</span></a>
        </li>
        <li class="komp"><a href="#komp" id="3" class="tooltip"><div class="ca-icona">S</div><span>Kompetencer</span></a>
        </li>
        <li class="cases"><a href="#cases" id="4" class="tooltip"><div class="ca-icona">F</div><span>Cases</span></a>
        </li>
        <li class="kontakt"><a href="#kont" id="5" class="tooltip"><div class="ca-icona">@</div><span>Kontakt</span></a>
        </li>
    </ul>
</nav> 
```

我有添加活动类的javascript。

```
<script type="text/javascript">      
    $(document).ready(function(){
        $('.home a.tooltip').addClass('active');
    });
</script> 

<script type="text/javascript"> 
$(function() {
    $('a.tooltip').click(function(e) {
        var $this = $(this);
        $("#nav").load($this.attr('href'));
        $('a.tooltip').removeClass('active');
        $(this).addClass('active');

        // prevent default link click
        e.preventDefault();
    })
});
</script> 
```

这工作正常，并添加了类，但我就是无法让 CSS 正确！

我需要一些帮助。小问题。网站链接是：[这里](http://sabinequardon.dk/JSQ/)

CSS：

```
a.tooltop.active{
    color: #f3cb12;
    font-size: 50px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:36:47.103

只需将`div`部分添加到`a.tooltip.active`选择器中，您就会得到如下内容：

```
a.tooltip.active div {
    color: #F3CB12;
    font-size: 50px;
} 
```

如果菜单项处于活动状态，我假设您正在尝试使图标变大并突出显示。问题是应该获得新样式的不是锚，而是子 div 元素。

# jboss - JMS/Seam——创建会话时出现异常？

> ID：14585308
> 
> 赞同：5
> 
> 时间：2013-01-29T14:32:39.963
> 
> 标签：jboss, queue, jms, seam, hornetq

我有一个 JBoss Seam 2.3 应用程序正在尝试将事件写入 JBoss AS 7.1 上的 JMS 队列。写入发生在无状态 EJB 中，并使用标准 Seam 注入机制。代码看起来像这样（不是确切的代码片段。只是显示我正在做的事情的类型）：

```
@Name("myEjb")
@Stateless
public class MyEjb {

   ...

   @In
   private QueueSession queueSession;

   @In
   private QueueSender myQueueSender;

   ...

   public foo() {
       ...
       // Code to place a TextMessage on the queue
       ...
   }
} 
```

但是，我注意到当应用程序处于负载状态并且经常调用此方法时，我在日志中收到以下异常：

```
21:58:57,800 ERROR [org.hornetq.ra.HornetQRASessionFactoryImpl] (http--0.0.0.0-8080-1) Could not create session: javax.jms.IllegalStateException: Only allowed one session per connection. See the J2EE spec, e.g. J2EE1.4 Section 6.6

at org.hornetq.ra.HornetQRASessionFactoryImpl.allocateConnection(HornetQRASessionFactoryImpl.java:816)

at org.hornetq.ra.HornetQRASessionFactoryImpl.createQueueSession(HornetQRASessionFactoryImpl.java:237)

at org.jboss.seam.jms.QueueSession.create(QueueSession.java:38) [jboss-seam.jar:2.3.0.Final]

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_07]

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_07]

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_07]

at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_07]

at org.jboss.seam.util.Reflections.invoke(Reflections.java:22) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.util.Reflections.invokeAndWrap(Reflections.java:144) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.Component.callComponentMethod(Component.java:2313) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.Component.callCreateMethod(Component.java:2236) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.Component.newInstance(Component.java:2196) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.Component.getInstance(Component.java:2034) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.Component.getInstance(Component.java:1996) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.Namespace.getComponentInstance(Namespace.java:60) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.Component.getInstanceInAllNamespaces(Component.java:2427) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.Component.getValueToInject(Component.java:2366) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.Component.injectAttributes(Component.java:1743) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.Component.inject(Component.java:1561) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.core.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:61) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.3.0.Final]

at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:44) [jboss-seam.jar:2.3.0.Final] 
```

将请求发送到 RESTful 服务后，最终会调用 foo() 方法。客户端可能会连续多次调用此服务，但它们都是不同的调用。

知道什么会导致此异常吗？我过去成功地使用了 Seam 和 JMS，没有任何问题，但是这个应用程序对 JMS 队列的写入比我过去编写的要多得多。我的 components.xml 文件是 seutp 正确，我没有得到任何错误。此外，我对 foo() 进行一次调用并将消息写入队列没有问题。只有当我对 foo() 方法进行大量顺序调用时才会发生这种情况。

想法？对于我可以尝试的事情或解决此问题的方法有什么建议吗？

**更新：** 我应该提到我使用的消息队列是嵌入在 JBoss AS 7.1 中的 HornetQ。在我看来，这*似乎*是围绕多个线程尝试将消息写入队列的某种问题。除此之外，我没有任何信息，也不知道如何解决这个问题。我真的很感激你能提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:34:17.597

That's part of the JCA specification. when you a pooled connection factory, you can't create more than one session, since the JCA connections internally are a tupple of connection / session.

JCA Connections will give you a pool and seamless integration with XA. If you don't need XA, you could just use the regular connection factories defined in your standalone.xml.

if you do need pool and XA, create one connection per session and you should be over this issue.

# mysql - 在查找性能方面，与普通列相比，mediumblob 会导致任何额外的开销吗？

> ID：14585316
> 
> 赞同：2
> 
> 时间：2013-01-29T14:33:05.437
> 
> 标签：mysql

`mediumblob`与普通列相比，在查找性能方面会导致任何额外的开销吗？

我很清楚它会导致每个插入数据的标准磁盘开销（数据的字节数 + 3 个字节），但是如果我（例如）执行涉及`where`语句的查找，并且`join`在所有其他列上执行简单与 相比，如果该列不存在`mediumblob`，性能会有所不同吗？`mediumblob`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:04:50.790

简短的回答：可能不是；）

长答案：

我推荐阅读这篇有趣[的博文](http://www.mysqlperformanceblog.com/2010/02/09/blob-storage-in-innodb/)：

> 使用 COMPACT 和 REDUNDANT 行格式（在 Innodb 插件之前使用并在 Innodb 插件和 XtraDB 中命名为“Antelope”）Innodb 会尝试将整行放入 Innodb 页面。至少 2 行必须适合每个页面加上一些页面数据，这使得限制约为 8000 字节。如果行完全适合 Innodb 会将其存储在页面上，而不使用外部 blob 存储页面。

在这种情况下，是的，您很可能会看到性能下降。

[相反](http://dev.mysql.com/doc/refman/5.5/en/innodb-row-format-dynamic.html)：

> 当 innodb_file_format 设置为 Barracuda 并使用 ROW_FORMAT=DYNAMIC 或 ROW_FORMAT=COMPRESSED 创建表时，长列值完全离页存储，并且聚集索引记录仅包含指向溢出页的 20 字节指针。

在这种情况下，我预计性能成本是微不足道的，如果有的话。但是，和往常一样，YMMV 和您应该使用您的实际数据集进行测试。

# ajax - IE 中的动画 gif 在多个回发的情况下停止

> ID：14585319
> 
> 赞同：2
> 
> 时间：2013-01-29T14:33:13.880
> 
> 标签：ajax, internet-explorer, http-post

我正在使用 ajax 来检索 xml 和 xsl 来创建输出 HTML。处理完成后，我们将显示加载 gif 图标。对于 IE 浏览器，加载 gif 停止播放.. 当发生 ajax 回发时它会冻结。谁能建议可以做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:37:35.873

我猜你会做类似 jQuery 的 AJAX 请求的事情。如果是这样，在`success`函数中，添加这个...

```
$.post({
    url: 'url',
    success: function(){
        $('img').attr('src', $('img').attr('src'));
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:30:41.950

找到了一个解决方案......这很有效。有多个回发，因此在 jquery ajax 中设置 async = true 在另一个回调中调用一个 ajax 发布函数解决了这个问题。无需重新加载图像。

# c# - 如何使用 Microsoft.SmartDevice.Connectivity 从 WinCe 设备获取目录

> ID：14585322
> 
> 赞同：2
> 
> 时间：2013-01-29T14:33:18.577
> 
> 标签：c#, windows-ce

我试图从桌面应用程序中使用 Microsoft.SmartDevice.Connectivity dll 获取 Win CE 设备信息。我能够连接、获取系统信息、获取正在运行的进程并断开连接。我正在尝试获取设备上现有的目录和文件，但我无法做到。如果有人知道如何获取它们，请提供一些代码示例。这会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:10:47.160

当我浏览 ctacke 提供的链接时，我发现它还有一些可用的部分。我浏览了[CoreCon API - Part V](http://blogs.msdn.com/b/vsdteam/archive/2007/12/06/corecon-api-part-v.aspx)并按照他的步骤进行操作，它奏效了。事实上，他也提供了一个示例应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:57:07.890

CoreCon API (Microsoft.SmartDevice.Connectivity) 不能固有地为您提供设备上的文件列表。它提供了一些基本功能来获取设备信息和推送文件，但它的主要目的是提供 API 管道以允许您创建自己的客户端工具。VSD 团队在[博客中写了一个使用 CoreCon API 从](http://blogs.msdn.com/b/vsdteam/archive/2007/11/20/corecon-api-part-ii.aspx)控制台应用程序中连接的设备获取文件列表的示例，这应该可以让您大部分时间了解您所追求的内容。

# typescript - 如何使用来自DefinitelyTyped的下划线库和打字稿？

> ID：14585324
> 
> 赞同：12
> 
> 时间：2013-01-29T14:33:22.747
> 
> 标签：typescript, underscore.js, definitelytyped

[DefinitiveTyped](https://github.com/borisyankov/DefinitelyTyped)提供了一个下划线声明文件，它定义了一个`List`接口，并在代码中大量使用它。

```
// Common interface between Arrays and jQuery objects
interface List {
    [index: number]: any;
    length: number;
}

interface UnderscoreStatic {
    sortBy(list: List, iterator?: any, context?: any): any;
    groupBy(list: List, iterator: any): any;
    countBy(list: List, iterator: any): any;
} 
```

我正在尝试使用该`countBy`功能：

```
// <reference path="../DefinitelyTyped/underscore/underscore.d.ts" />

declare var _: UnderscoreStatic;

_.countBy([1,2,3], function(item) {
    return item%2;
}); 
```

当我编译文件时，它会抛出错误：

```
> tsc commons.ts

> E:/commons.ts(5,0): Supplied parameters do not match any signature of call target:
    Could not apply type 'List' to argument 1, which is of type 'number[]' 
```

我不知道为什么会发生这个错误，因为`number[]`适合界面`List`。

哪里出了问题，如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T14:37:35.263

你需要传递一个与`List`接口兼容的对象，它是一个长度为的数组：

```
/// <reference path="underscore.d.ts" />

var list: List;
list[0] = 1;
list[1] = 2;
list[2] = 3;
list.length = 3;

_.countBy(list, function (item) {
    return item % 2;
}); 
```

老实说，数组在技术上实现了这一点，因为它具有长度属性——但上面的代码可以编译。

这个的简写版本有点讨厌：

```
/// <reference path="underscore.d.ts" />

var list = <List><any> [1, 2, 3];

_.countBy(list, function (item) {
    return item % 2;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T11:04:29.087

检查下划线 TypeScript 定义文件是否与您正在使用的下划线版本匹配。countBy 的签名已经改变，如果 TS 定义与底层 JS 不匹配，你会得到一些意想不到的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T15:28:32.290

首先添加下划线输入：

```
npm install typings --global
typings install dt~jasmine --save --global 
```

然后在您的 .ts 源中引用此文件

```
/// <reference path="../../../typings/underscore.d.ts" /> 
```

然后导入下划线以避免编译错误（小心 - 在这种情况下下划线库应安装为 npm 参考，而不是凉亭：**npm install underscore --save**）

```
import _ = require('underscore'); 
```

然后像往常一样使用下划线使用**“_”**全局变量

```
_.isNumber(123); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-23T16:55:26.567

使用 Typescript 2.0，您可以使用如下`import`语句导入下划线：

```
import * as _ from "underscore"; 
```

然后，使用 . 调用任何下划线函数`_.<function_name>`。

PS：例如，不要忘记使用 npm 安装下划线库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-30T15:46:21.760

# 2021 年更新

将以下依赖项添加到`package.json`：

```
 "dependencies": {
    "underscore": "^1.13.1"
  },
  "devDependencies": {
    "@types/underscore": "^1.11.3"
  } 
```

然后运行：

```
$ npm install 
```

在您的 TypeScript 文件中，使用以下命令导入`underscore`：

```
import * as _ from 'underscore'; 
```

# php - 上传到主机后出现 500 内部服务器错误

> ID：14585327
> 
> 赞同：1
> 
> 时间：2013-01-29T14:33:39.087
> 
> 标签：php, .htaccess, codeigniter, url, mod-rewrite

我在这个论坛上搜索了一整天，发现了和我一样的问题，尝试了所有的答案，但就是不行。

在我的本地主机中，一切都很好，但后来当我决定将它上传到实时网络服务器时，它开始显示

> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 webmaster@reportingsystem.cnnpa.com 并告知他们错误发生的时间，以及您可能所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。

在我的错误日志中，我看到了这个：

```
[Tue Jan 29 22:05:53 2013] [error] [client 112.198.77.50] File does not exist: /home/cnnpa/crs/404.shtml
[Tue Jan 29 22:05:53 2013] [error] [client 112.198.77.50] File does not exist: /home/cnnpa/crs/crimeindex 
```

基于阅读类似问题，我认为这与 .htaccess 和 mod_rewrite 有关。当我删除 .htaccess 时，它似乎可以工作，但我不想要这个解决方案，因为首先我使用 .htaccess 来获得更清晰的 URL（通过删除 index.php）。

这是我当前的 .htaccess

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /crs/

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

在我的 config.php

```
$config['base_url'] = 'http://reportingsystem.cnnpa.com/';
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:48:54.860

```
RewriteBase /crs/ 
```

我的第一个嫌疑人将是您的 htaccess 文件中的[RewriteBase](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)值。

查看您的 config.php，您似乎正在从 DocumentRoot 提供应用程序。如果是这种情况，则 RewriteBase 应编写如下。

```
RewriteBase / 
```

# ios - 将 Wordpress 网站的新闻读入 iOS 应用程序

> ID：14585329
> 
> 赞同：0
> 
> 时间：2013-01-29T14:33:50.227
> 
> 标签：ios, xcode, wordpress, parsing

我想为某人开发一个应用程序，从他的 Wordpress 网站上阅读新闻。我已经尝试过一些类似 MWFeedParser 的东西（但我无法显示图像），我经常找到一个链接：[http ://www.kieranmcgrady.com/blog/2012/4/25/tutorial-how-to-create -a-simple-rss-reader-for-ios.html](http://www.kieranmcgrady.com/blog/2012/4/25/tutorial-how-to-create-a-simple-rss-reader-for-ios.html)但该网站已过期。

MWFeedParser 非常好，但我不知道如何用它解析图像......

是否有其他框架或类似的东西可以轻松解析带有图像的 wordpress 网站？

这就是我要解析的内容：

```
<img src="the_url" alt="the description" width="460" height="352" class="size-full wp-image-16009 colorbox-16008" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:34:53.407

您不需要自己下载图像。查看[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)，了解一个实现图像延迟下载的出色框架。您只需要提供 URL `SDImageView`，它就会在显示占位符图像的同时开始下载图像。

您可以使用从您的提要`NSRegularExpression`中提取信息：`img`

```
NSString *context = ...;
NSError *error = NULL;

NSRegularExpression *regex = [NSRegularExpression
                              regularExpressionWithPattern:@"<img[^>]*src=['\"]([^'\"]*)['\"][^>]*>"
                              options:NSRegularExpressionCaseInsensitive error:&error];

NSArray *matches = [regex matchesInString:context
                               options: NSMatchingReportCompletion
                                 range:NSMakeRange(0, [context length])];

NSTextCheckingResult *match = [matches objectAtIndex:0];
NSRange range = [match rangeAtIndex:1];
NSString *result = [context substringWithRange:range]; 
```

请注意，在上面的代码片段中，我对`img`标签的格式做了一些假设。如果它不起作用，如果您可以发布您获得的确切字符串，这将有所帮助。

# ios - 翻转卡片后检查相同的图像（目标-C）

> ID：14585336
> 
> 赞同：0
> 
> 时间：2013-01-29T14:34:20.880
> 
> 标签：ios, objective-c, ipad, cocoa, nsimage

我有 4 张卡片，我可以翻转卡片，我想检查我的图像是否相同，显示 2 张图像，如果不是背面翻转，

你能给我一些教程或示例代码吗？

提前致谢！

编辑：

这是我的图片：

```
UIImage *img1 = [UIImage imageNamed:@"card_front.png"];

[self addCardAtX:90 y:120 andFrontImage:img1 andTag:1];
[self addCardAtX:230 y:120 andFrontImage:img1 andTag:1];
[self addCardAtX:90 y:340 andFrontImage:img1 andTag:1];
[self addCardAtX:230 y:340 andFrontImage:img1 andTag:1];

- (void)addCardAtX:(CGFloat)x y:(CGFloat)y andFrontImage:(UIImage *) img1 andTag:(int)tag
{

UIImage *img2= [UIImage imageNamed:@"card_back.png"];

CardView *cv = [[CardView alloc] initWithFrontImage:img1 backImage:img2];

CGRect f = cv.frame;
f.origin.x = x-(f.size.width/2.0);
f.origin.y = y-(f.size.height/2.0);
cv.frame = f;

[self.view addSubview:cv];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:51:06.790

您可以通过**名称或 URL/路径**比较图像 但在 Objective-c 中您还可以比较两个对象，按，

```
if ([object1 isEqual:object2]) 
```

取 BOOL 变量 imgCompare=NO; 并检查条件

```
if([Imgobject1 isEqual:ImgObject2])
  imgCompare=YES;
else
  imgCompare=NO; 
```

这是相关讨论的最佳[问题，](https://stackoverflow.com/questions/843972/image-comparison-fast-algorithm)并检查[此链接。](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)

**谢谢 ：）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:36:41.843

您可以检查图像是否相等购买使用...

```
BOOL imagesAreTheSame = [image1 isEqual:image2]; 
```

# c# - 如何将数据从模型绑定到 ASP 控制器？

> ID：14585339
> 
> 赞同：1
> 
> 时间：2013-01-29T14:34:24.503
> 
> 标签：c#, asp.net-mvc-3, sql-server-2008-r2

我正在为我的项目使用 asp.net mvc3(C#)。我是新来的。我有一个表，其中包含名称、年龄、state_id 等数据。现在我希望当我使用 asp 控件 GRIDVIEW 时，它应该将我的表的数据绑定到 gridview 以及 2 列作为编辑和视图。我怎么能通过MVC做？我完全迷失了。

我还有另外两张桌子

1)`Country_Master`有列`country_id,country_name`

2）`City_Master`有列`state_id,state_name`。

我希望当我在下拉列表中选择国家时，其对应的州列表应该显示在另一个下拉列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:40:59.200

> 当我使用 asp 控件 GRIDVIEW 时，它应该将我的表数据绑定到 gridview 以及 2 列作为编辑和视图。我怎么能通过MVC做？

我认为您误解了[`ASP.NET MVC`](http://www.asp.net/mvc). 不再有任何服务器端控件，例如 GridView。在 ASP.NET MVC 中，不再有经典 WebForms 中使用的 ViewState 或 PostBack 模型。由于这个原因，您可能在 WebForms 中使用的任何服务器端控件都不能在 ASP.NET MVC 中工作。这是一种完全不同的 Web 开发方法。

在 ASP.NET MVC 中，您可以从定义一个保存数据的模型开始：

```
public class PersonViewModel
{
    public string Name { get; set; }
    public int Age { get; set; }
    public string Country { get; set; }
} 
```

然后是一个控制器，它将与您的 DAL 对话并填充模型：

```
public class PersonController: Controller
{
    public ActionResult Index()
    {
        IEnumerable<PersonViewModel> model = ... talk to your DAL and populate the view model
        return View(model);
    }
} 
```

最后你有一个相应的视图，你可以在其中显示这个模型的数据：

```
@model IEnumerable<PersonViewModel>
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Age</th>
            <th>Country</th>
        </tr>
    </thead>
    <tfoot>
    @foreach (var person in Model)
    {
        <tr>
            <td>@person.Name</td>
            <td>@person.Age</td>
            <td>@person.Country</td>
        </tr>
    }
    </tfoot>
</table> 
```

在 ASP.NET MVC 视图中，您还可以使用一些内置帮助器。例如，有一个[WebGrid 帮助](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)器允许您简化表格输出：

```
@model IEnumerable<PersonViewModel>
@{
    var grid = new WebGrid();
}

@grid.GetHtml(
    grid.Columns(
        grid.Column("Name"),
        grid.Column("Age"),
        grid.Column("Country")
    )
) 
```

我建议您阅读[`getting started tutorials`](http://www.asp.net/mvc/tutorials)关于 ASP.NET MVC 以更好地熟悉基本概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:48:23.240

对于 gridview，您可以使用[MvcContrib Grid](http://mvccontrib.codeplex.com/wikipage?title=Grid)或[JQuery Grid for MVC](http://jqmvcgrid.codeplex.com/)

# google-apps-script - 很抱歉，发生服务器错误。请稍等，然后重试 Google Apps 脚本

> ID：14585340
> 
> 赞同：1
> 
> 时间：2013-01-29T14:34:26.597
> 
> 标签：google-apps-script, google-sheets, server-error

请问有人可以帮助我吗？这是我的代码并抛出我们很抱歉，发生服务器错误。请稍等片刻，然后再试一次。这个想法是获取一张通用表和另一张表，并将所有数据从一张表复制到通用表。

```
function importData(id){
  try{
    var sheet = SpreadsheetApp.openById(id);

    Logger.log("name of sheet: " + sheet.getName())

    var sheetToImport = sheet.getSheetByName("planilla para carga de datos");

    var sheetGeneric = DocsList.getFileById('0ArvYhlthIEV-dGxLOTI1MG5OSkI2SzRGRDhlendwcnc');

    var newSheet = sheetGeneric.makeCopy(sheet.getName()+" V2");

    var row = sheetToImport.getRange('A:Z');

    var range = row.getA1Notation();

    var values = row.getValues();

    var ss = SpreadsheetApp.openById(newSheet.getId()).getSheetByName("planilla para carga de datos");
    Logger.log("Valores a insertar:  " + values)
    var valuesNewSheet = ss.getRange(range).getValues();
    Logger.log("Rango: " + range + "valores del sheet antes: " + valuesNewSheet);
    ss.getRange(range).setValues(values);
    Logger.log("valores del sheet dsp: " + ss.getRange(range).getValues());
    Logger.log("new id: " + ss.getId());

  }catch(e){
    Logger.log("error: " + e )
    return;
  }

  return ss.getId();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:09:59.393

将代码更改为以下代码适用于包含 Sheet1 的普通新电子表格，但有时我在 makeCopy 调用期间也会遇到服务器错误。为此添加了重试并将包含 ss.getId() 的行更改为 newSheet.getId() 并将堆栈跟踪添加到异常日志记录中。

```
function importData(id){
  if (id==undefined) {
    id="0AowkhKY0KeQAdDZCMXZPb2VOc1NoN2pFZk9Qd0xHNGc";
  }
  try{
    var sheet = SpreadsheetApp.openById(id);
    Logger.log("name of sheet: " + sheet.getName())
    var sheetToImport = sheet.getSheetByName("Sheet1");
    var sheetGeneric = DocsList.getFileById('0AowkhKY0KeQAdEZ0NFBkXzdMY05VVWFRa0J2bVJvelE');
    var newSheet;
    retried (5,"Permanent error while trying to copy sheet", function () {
      newSheet = sheetGeneric.makeCopy(sheet.getName()+" V2");
    });
    var row = sheetToImport.getRange('A:Z');
    var range = row.getA1Notation();
    var values = row.getValues();
    var ss = SpreadsheetApp.openById(newSheet.getId()).getSheetByName("Sheet1");
    Logger.log("Valores a insertar:  " + values)
    var valuesNewSheet = ss.getRange(range).getValues();
    Logger.log("Rango: " + range + "valores del sheet antes: " + valuesNewSheet);
    ss.getRange(range).setValues(values);
    Logger.log("valores del sheet dsp: " + ss.getRange(range).getValues());
    Logger.log("new id: " + newSheet.getId());
  }catch(e){
    Logger.log("error: " + e +"\n"+e.stack)
    return;
  }
  return newSheet.getId();
} 
```

这种服务器错误有时会发生，并且通常在片刻后重试时会起作用。为了轻松地重复这样的调用，下面的函数很方便：

```
function retried (maxRetries, msg, f) {
  var retries=0;
  do {
    try {
      f ();
      if (retries>0) {
        Logger.log ("succeeded after "+retries+" retries for "+f);
      }
      return; // success;
    }
    catch(err) { 
      Logger.log ("catched "+err.toString()+"\n"+err.stack);
      retries++;
      Utilities.sleep (5000);
    }
  } while (retries<maxRetries);
  Logger.log (msg);
  throw msg;
} 
```

在上面的代码中用于重试 makeCopy 调用

# c# - PhoneGap 通过 restfull WS 将图像上传到服务器（服务器端处理数据）

> ID：14585345
> 
> 赞同：1
> 
> 时间：2013-01-29T14:34:35.737
> 
> 标签：c#, javascript, android, cordova, wcf-rest

我正在尝试将我的 PhoneGap 应用程序中的图像上传到服务器上的某个文件夹。我的服务器端有宁静的 WS，方法如下：

```
[OperationContract]
[WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json,  UriTemplate = "fileUpload")]
    string fileUpload(Stream fileStream); 

public string fileUpload(Stream fileStream)
         {
         try
             {
             FileStream fileToupload = new FileStream("D:\\FileUpload\\" + "images.jpg", FileMode.Create);

             byte[] bytearray = new byte[10000];
             int bytesRead, totalBytesRead = 0;
             do
                 {
                 bytesRead = fileStream.Read(bytearray, 0, bytearray.Length);
                 totalBytesRead += bytesRead;
                 } while (bytesRead > 0);

             fileToupload.Write(bytearray, 0, bytearray.Length);
             fileToupload.Close();
             fileToupload.Dispose();

             return "Success;

             }
         catch (Exception e)
             {
             return e.Message;
             throw (e);
             }                   
         } 
```

[我使用了http://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html#FileUploadOptions](http://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html#FileUploadOptions)中最常见的示例 ，它在正确的位置上传图像并给我成功调用，但我无法打开图像在它之后，“Windows 查看器”会显示“损坏、损坏或太大”。当我在记事本++中打开图像时，我在乞求图像上有以下文字：

```
--*****
Content-Disposition: form-data; name="value1";

test
--*****
Content-Disposition: form-data; name="value2";

param
--*****
Content-Disposition: form-data; name="file"; filename="32"
Content-Type: image/jpeg 
```

当我删除这些部分时，我得到了原始正确的图像。如何在我的服务器端处理这些数据。我想提取图像名称和参数并将其用作字符串，并且在没有这些参数的情况下仅将图像内容推送到我的图像？

谢谢，米洛斯

# macos - 开发者 ID 确保 Gatekeeper 接受？

> ID：14585353
> 
> 赞同：2
> 
> 时间：2013-01-29T14:35:15.440
> 
> 标签：macos, code-signing, osx-gatekeeper

苹果目前的政策是什么？[谈到 Gatekeeper](http://support.apple.com/kb/HT5290?viewlocale=en_US)，他们从未提及获得开发者 ID 可以保证您的应用程序将被允许在默认的**Mac App Store 和已识别的开发者**选项中运行。他们从不说每个有效签名的应用程序都会被自动接受。

我无法在 App Store 中分发我的应用程序，因为它违反了它的准则。但它很好用，不包含恶意软件、广告等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T07:39:19.630

如果您注册为 Apple 开发人员，可以通过三种方式发布您的应用程序：

*   通过 App Store，在这种情况下，Apple 会在允许客户下载之前对它们进行预筛选。如果您选择此选项，则无法保证 Apple 会接受您的应用程序（尽管遵循他们的[App Store 指南](https://developer.apple.com/appstore/guidelines.html)会给您很大的机会）。

*   通过使用您的[开发者 ID](https://developer.apple.com/resources/developer-id/)对应用程序进行签名，然后自行分发。当您注册为开发者时，开发者 ID 会自动授予，Apple 根本不会筛选您的应用程序，并且以这种方式签名的应用程序将在 Gatekeeper 的默认设置下运行（“Mac App Store 和已识别的开发者”）。

    但是，如果 Apple 注意到正在分发带有您签名的恶意软件，他们可以撤销您的开发者 ID 证书。如果发生这种情况，Gatekeeper 将开始阻止您签名的应用程序（包括任何非恶意应用程序）。不幸的是，虽然我记得我读过苹果公司的一份声明，定义了他们认为什么是恶意的，但我现在找不到了。

*   无论是否拥有开发者会员资格，您都可以分发未签名的应用程序。Apple 在这方面没有发言权，无论是在分发之前还是之后，但 Gatekeeper 的默认策略会阻止它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:39:34.913

您可以检查 Gatekeeper 是否会接受您的应用程序的签名。

```
$spctl -vat execute MyApp.app 
```

你会看到的..

```
MyApp.app: accepted
source=Developer ID 
```

# cloud - 使用 jclouds 模板的 HP 块存储

> ID：14585354
> 
> 赞同：0
> 
> 时间：2013-01-29T14:35:17.727
> 
> 标签：cloud, jclouds, hp-cloud-services

遵循此处的文档： [http](http://code.google.com/p/jclouds/wiki/EBS) ://code.google.com/p/jclouds/wiki/EBS 我了解如何将 EBS 卷附加到新配置的 ec2 实例。有人知道 HP Block Storage 是否有与此相同的功能？还是机架空间块存储？

我正在寻找一种方法来指定我希望在模板中将一个卷附加到我的 VM，并让 jclouds 连接到其余部分……我不想调用特定的云存储 API。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:34:12.120

对于 Rackspace，您想要开始的地方是[入门：Rackspace 开放云](http://www.jclouds.org/documentation/quickstart/rackspace/)。

特别是对于云块存储，您需要从[示例](https://github.com/jclouds/jclouds-examples/tree/master/rackspace)开始，然后[查看 cloudblockstorage 包](https://github.com/jclouds/jclouds-examples/tree/master/rackspace/src/main/java/org/jclouds/examples/rackspace/cloudblockstorage)。CreateVolumeAndAttach.java示例可能正是您正在寻找的[。](https://github.com/jclouds/jclouds-examples/blob/master/rackspace/src/main/java/org/jclouds/examples/rackspace/cloudblockstorage/CreateVolumeAndAttach.java)

jclouds 中的块存储没有像计算和 blobstore（又名对象存储）那样的可移植抽象，因此您将无法通过模板执行此操作。但上面的代码适用于任何基于 OpenStack 的云。

顺便说一句，jclouds 的 code.google.com 站点已经过时，不应使用。去的地方是[jclouds 文档](http://www.jclouds.org/documentation/)。

# java - 对 CompositeKey 使用 JoinColumn 两次获得重复列异常

> ID：14585355
> 
> 赞同：6
> 
> 时间：2013-01-29T14:35:18.193
> 
> 标签：java, hibernate, jpa, jpa-2.0

我有以下情况：

我正在尝试构建一个具有相同表的数据库中具有相同租户的多租户应用程序。正如我发现的那样，Hibernate 在 5.0 之前不支持此变体。

我试图通过向每个表添加一个brandId 字段来解决这个问题。

当我建立多对多关系时，我还将这个brandId添加到ManyToMany连接表，在这里（不知道我是否可以这样做，mysql没有抱怨）我为两个表创建了一个外键，同时都包含brandid

所以现在例如我有一个表 Text(ID,name,brandId) 和一个 Tag(ID,name,brandId) 和一个连接表 (text_id,tag_id,brand_id) ，其中外键是

```
CONSTRAINT FK_TAG_TEXTS_TAG FOREIGN KEY (TAG_ID,BRAND_ID) REFERENCES TAG (ID,brand),

CONSTRAINT FK_TAG_TEXTS_TEXT FOREIGN KEY (TEXT_ID,BRAND_ID) REFERENCES TEXT (ID,brand) 
```

如您所见，品牌 ID 被使用了两次。

然后我使用 Hibernate Tools 生成了我的类，它创建了一个应有的复合主键类以及标记类中的关联。

```
 @ManyToMany(fetch = FetchType.EAGER,cascade = {CascadeType.PERSIST,CascadeType.MERGE })
  @JoinTable(name = "tag_texts", , joinColumns = {
    @JoinColumn(name = "TAG_ID", nullable = false, insertable = false, updatable = false),
    @JoinColumn(name = "BRAND_ID", nullable = false, insertable = false, updatable = false) }, inverseJoinColumns = { @JoinColumn(name = "TEXT_ID", insertable = false, nullable = false, updatable = false),@JoinColumn( name = "BRAND_ID",  insertable = false, nullable = false, updatable = false) })
public List<Text> getTexts() {
    return this.texts;
} 
```

现在的问题是我得到以下异常：

> org.hibernate.MappingException：集合映射中的重复列：de.company.domain.Tag.texts 列：brand_id

我查看了引发异常的 Collection 类中的 Hibernate 代码。这里调用了一个方法'checkColumnDupliation'，它使用一个Set并插入名称，这意味着第二次插入“BRAND_ID”作为列会导致这种行为。

我发现重复列错误的最常见解决方案是在多个引用中使用同一列时插入“可插入 = 假和可更新 = 假”。此处对此进行了描述：
[Hibernate: where do insertable = false, updatable = false 属于涉及外键的复合主键星座？](https://stackoverflow.com/questions/3669883/hibernate-where-do-insertable-false-updatable-false-belong-in-composite-pr)

但这似乎与我的问题不同。

所以我的问题是：是否有可能使用 JPA 注释解决此问题并在 joinColumns 和 inverseJoinColumns 中使用品牌 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T12:25:17.503

问题是您需要 3 个实体之间的 JoinTable `Text`：`Tag`和`Brand`.

可能您将不得不使用**IdClass**，例如：

```
public class AssociationId implements Serializable {
  private long textId;
  private long tagId;
  private long brandId;

  hash and equals function
  ...
} 
```

Id 类实体：

```
@Entity
@Table(name="tag_text_brand")
@IdClass(AssociationId.class)
public class TagTextBrandAssociation {
  @Id
  private long tagId;
  @Id
  private long textId;
  @Id
  private long textId;

  @ManyToOne
  @PrimaryKeyJoinColumn(name="TAG_ID", referencedColumnName="ID")
  private Tag tag;
  @ManyToOne
  @PrimaryKeyJoinColumn(name="TEXT_ID", referencedColumnName="ID")
  private Text text;
  @ManyToOne
  @PrimaryKeyJoinColumn(name="BRAND_ID", referencedColumnName="ID")
  private Brand brand;
  ...
} 
```

您可以在您的 3 个实体中使用它，如下所示：

```
@Entity
public class Text {
  @Id
  private long id;
  ...
  @OneToMany(mappedBy="text")
  private List<TagTextBrandAssociation> tagsAndBrands;
  ...
} 
```

请参阅[此处](http://en.wikibooks.org/wiki/Java_Persistence/ManyToMany#Example_join_table_association_object_annotations)了解更多信息。

# c# - SimpleInjector 解除绑定/重新绑定

> ID：14585356
> 
> 赞同：7
> 
> 时间：2013-01-29T14:35:20.380
> 
> 标签：c#, .net, dependency-injection, simple-injector

我有一组核心库，可以“开箱即用”地交付和工作。这意味着服务都在内部连接起来。我希望能够修改核心库（不修改库本身）。

话虽如此，SimpleInjector 中是否有 Unbind/Rebind 支持？我没有在容器上看到任何公开可见的方法。我确实找到了一本可以通过反思获得的私人注册词典。

有没有人看到我不能在运行时通过反射从这个私有字典中删除项目（然后重新添加）的原因？有没有我错过的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:56:51.287

无法删除注册。然而，压倒一切的注册是。您必须标记容器以允许这样做：

```
var container = new Container();

container.Register<IService, FirstService>();

container.Options.AllowOverridingRegistrations = true;

// Replaces the former registration
container.Register<IService, AnotherService>(); 
```

# html - 在画布中重现类似 GIF 的图像

> ID：14585357
> 
> 赞同：0
> 
> 时间：2013-01-29T14:35:23.367
> 
> 标签：html, html5-canvas

我需要在 html5 画布中绘制的图像看起来像 gif 图像（使其只有 256 种颜色）。是否有任何功能使画布只有 256 种或更少的颜色，并使其转换放入其中的图像只有 256 种或更少的颜色？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:26:01.587

我不确定画布的 2D 上下文中是否存在这样的方法。

但是，它似乎并不是很复杂。256 种颜色 = 8 级红、绿、蓝。因此，您可以转换图像以遵守此规则。

为此，您需要更改每个像素的颜色。我要做的是创建一个临时画布来操纵图像，像这样（未经测试）：

```
//create copy of the image in a temporary context
        this.tmpCanvas = document.createElement('canvas');
        this.tmpCanvas.width = myIMage.width;
        this.tmpCanvas.height = myIMage.height;
        var scaledContext = this.tmpCanvas.getContext('2d');
        scaledContext.drawImage(myIMage, 0, 0, myIMage.width, myIMage.height, 0, 0, myIMage.width, myIMage.height);

        //get image data
        imageData = scaledContext.getImageData(0, 0, myIMage.width, myIMage.height);

        //loop over copied image date and modifiy pixels value
        for(var i = 0; i < imageData.length; i += 4) { // 4 because RGBA
            //red component
            imageData[i] = Math.round(imageData[i] / 64);
            //green component
            imageData[i + 1] = Math.round(imageData[i+1] / 64);
            //blue component
            imageData[i + 2] = Math.round(imageData[i+2] / 64);
        }

        scaledContext.putImageData(imageData, 0, 0); 
```

我没有测试这段代码，但想法就在那里

# jquery - 让 $(window).blur 和 $('#id').click 执行相同的功能

> ID：14585358
> 
> 赞同：1
> 
> 时间：2013-01-29T14:35:26.123
> 
> 标签：jquery

我有 2 个不同的事件，我想要执行相同的功能。我如何“合并”它们？

```
$(window).blur(function(e) {
    e.preventDefault();
    togglebackground();
});

$("#show-wall-link, #maximage, iframe").click(function (e) {
    e.preventDefault();
    togglebackground();
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T14:36:31.763

试试这个：

```
$(window).blur(togglebackground);
$("#show-wall-link, #maximage, iframe").click(togglebackground);

function togglebackground(e) {
    e.preventDefault();
    // do stuff...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:36:42.630

嗯……它们是函数。目前匿名内联函数，但您可以将任何函数设为事件侦听器。

```
function blurOrClick (e) {
    e.preventDefault();
    togglebackground();
}

$(window).blur(blurOrClick);
$("#how-wall-link, #maximage, iframe").click(blurOrclick); 
```

# jsf - 为什么客户端状态保存对单个用户更快？

> ID：14585361
> 
> 赞同：0
> 
> 时间：2013-01-29T14:35:31.690
> 
> 标签：jsf, primefaces, websphere, viewstate, myfaces

我在 WebSphere 7 上使用 PrimeFaces 3.4 和 MyFaces 2.0.7。我注意到将状态保存到客户端导致请求处理比服务器保存状态快约 2 倍。当客户端保存状态被激活时，请求从 150 到 350m。保存服务器状态的时间为 300 到 600 毫秒。POST 中的 ViewState 大约有 200kb。

因此，速度所付出的代价就是数据传输。幸运的是，它只是 Intranet 应用程序。

但是让我感到奇怪的是，如何实现，在 http 请求中发送状态比从会话中恢复更快？我知道虽然有几千个并发用户会话将被序列化到磁盘，所以从会话中恢复某些内容将是磁盘绑定操作，而从客户端仅是客户端绑定。

但我是测试期间唯一的用户。这种速度差异是预期的行为，还是服务器的错误配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:13:48.317

**MyFaces**`ViewState`默认在会话中序列化。所以即使 session 本身没有序列化，也增加了序列化的开销，另外在 session 中存储 value 也需要一些时间。

解决方案是通过参数更改默认行为`web.xml`：

```
<context-param>
    <param-name>org.apache.myfaces.SERIALIZE_STATE_IN_SESSION</param-name>
    <param-value>false</param-value>
</context-param> 
```

现在我有 125 到 250 毫秒的时间，存储`ViewState`在服务器上。所以它更快。

# java - 如何从java与MySQL通信

> ID：14585363
> 
> 赞同：0
> 
> 时间：2013-01-29T14:35:38.183
> 
> 标签：java, mysql

> **可能重复：**
> [如何将 MySQL 连接到 Java 程序](https://stackoverflow.com/questions/3377151/how-to-connect-mysql-to-java-program)

嗨，我有一些数据想输入 MySQL 服务器。然而，数据是由我用 java 编写的程序生成的。是否可以使用 java 访问和写入 MySQL 服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:37:43.407

您可以使用 JDBC 执行此操作。您需要下载[MySQL JDBC 驱动程序](http://dev.mysql.com/downloads/connector/j/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:39:55.183

是的，有可能，如果我是你，我会查看 mysql 自己的网站，他们也有一个教程，供你入门[http://dev.mysql.com/usingmysql/java/](http://dev.mysql.com/usingmysql/java/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T14:38:48.060

[是的，这里](http://docs.oracle.com/javase/tutorial/jdbc/index.html)有 JDBC 说明

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T15:14:55.317

如果您没有任何经验，这应该对您有很大帮助：

[在 Microsoft Windows 上安装 MYSQL Connector/J JDBC](http://primeroblogmio.blogspot.com/2010/08/installing-mysql-connectorj-jdbc-on.html)

然后按照 JDBC 教程中的说明进行操作。

祝你好运！

# wiki - 如何为 Confluence 创建文本文件，然后将其作为 Confluence wiki 页面导入？

> ID：14585365
> 
> 赞同：1
> 
> 时间：2013-01-29T14:35:43.733
> 
> 标签：wiki, markup, confluence

这是我想要完成的事情：

1.  我正在编写一个脚本，它将解析一些源代码，提取一些我希望它提取的注释，并将这些文本存储在一个文本文件中。

2.  我想编写另一个脚本，使用此文本文件的内容以编程方式将其转换为 Confluence wiki 页面。

请告诉我最好的方法来做到这一点。我已经看到[了](https://confluence.atlassian.com/display/DISC/XML-RPC+Page+Updater+Example)

我觉得我可以将上面示例中的输入更改为从文本文件中获取输入并更新 Confluence 页面的内容。但是，我不确定它将如何格式化。如果我必须格式化它，我需要做什么？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T15:35:11.627

作为 XML-RPC 的替代方案，您可以使用集成的[WebDAV 插件](https://marketplace.atlassian.com/plugins/confluence.extra.webdav)。

1.  编写一个脚本，在选定的空间中创建一个目录。目录名称将是页面名称。创建目录后，将在包含页面内容的目录中创建一个具有相同名称（扩展名为 .txt）的文本文件
2.  让您的脚本在插入文本文件的内容时编辑此文件。

关于插件使用的信息：

*   [为 Confluence 配置 WebDAV 客户端](https://confluence.atlassian.com/display/DOC/Configuring+a+WebDAV+client+for+Confluence)
*   [Confluence WebDAV 插件](https://studio.plugins.atlassian.com/wiki/display/WBDV/Confluence+WebDAV+Plugin)
*   [WebDAV 故障排除](https://confluence.atlassian.com/display/CONFKB/Troubleshooting+WebDAV)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-22T21:48:58.467

我还看到了您所指的代码。我对其进行了一些调整，生成了以下代码，可以帮助您解决问题的第二部分。

我的代码从插入先前创建的空间的文本文件中创建了一个新空间以及一个新页面。

```
import sys
import xmlrpc.client
import os
import re

# Connects to confluence server with username and password
site_URL = "YOUR_URL"
server = xmlrpc.client.ServerProxy(site_URL + "/rpc/xmlrpc")

username = "YOUR_USERNAME"
pwd = "YOUR_PASSWORD" 
token = server.confluence2.login(username, pwd)

# The space you want to add a page to
spacekey = "YOUR_SPACENAME"

# Retrives text from a file
f = open('FileName.txt', 'r')
content = f.read()
f.close()

# Creates a new page to insert in the new space from text file content
newpage = {"title":"NEW_PAGENAME", "space":spacekey, "content":content}
server.confluence2.storePage(token, newpage)

server.confluence2.logout(token) 
```

对于您的格式问题，支持 html，但我还没有完全弄清楚如何使用除内联之外的 CSS 样式（其他一切似乎都不起作用）。

当您在 Confluence 中使用 HTML 宏编写这些样式时，它们会起作用，但从远程 API 来看，它的行为方式似乎不同。

更新：您可以使用 {html} 宏通过以下方式包含您的 html：

```
content = server.confluence2.convertWikiToStorageFormat(token, content) 
```

您还可以在全局 CSS 样式表中指定您的 CSS。另一种选择是开发一个包含 CSS 资源的插件： [https ://developer.atlassian.com/display/CONFDEV/Creating+a+Stylesheet+Theme](https://developer.atlassian.com/display/CONFDEV/Creating+a+Stylesheet+Theme)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-17T10:16:41.653

我已经尝试过这种方式并且对我来说效果很好：

1.  我使用 Java 程序创建了一个程序化客户端来创建动态内容。这从我的纯文本中创建了一个 HTML 文档。
2.  我使用连接到 Confluence 的 RPC 客户端将其作为新页面上传。

您的 html 将被保留。但是，如果您想在 html 之上添加 CSS 或 JS/JQuery 等，则需要创建一个宏并为特定页面启用它。此功能在 Confluence OnDemand 中不可用。

# java - 将 Java Web Start 与 JavaFX 的本机捆绑包一起使用

> ID：14585368
> 
> 赞同：2
> 
> 时间：2013-01-29T14:35:58.163
> 
> 标签：java, javafx, native, updates, java-web-start

我已经开发了一个 JavaFX 应用程序，我将把它作为一个[原生包](https://blogs.oraclegha.com/talkingjavadeployment/entry/native_packaging_for_javafx)分发，以避免 Java 版本低于 7（因此没有 JavaFX）或根本没有 Java 的用户感到头疼。

但是，我也希望能够提供我的应用程序的更新。一种解决方案是让应用调用 home（它已经通过 XMLRPC 与后端通信），获取 JAR 并自我更新。我可以看到实际更新过程的潜在问题（需要构建一个单独的更新程序，但是如何更新更新程序？）。

我知道并且很想**使用**Java Web Start。但是，我不知道这是否适用于 Native Package。如果用户已经安装了 Java，它将忽略我捆绑的 JRE。如果他没有Java……那么，他不能使用Java Web Start，对吧？

如何以一种不会对用户体验产生不利影响的优雅方式解决这个问题？（并且最好不会​​很长时间来实施）

*注意：我使用[e(fx)clipse](http://efxclipse.org/)作为构建工具。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:42:22.313

> 如果他没有Java……那么，他不能使用Java Web Start，对吧？

没错，但正如[JWS 标签 Wiki](https://stackoverflow.com/tags/java-web-start/info)中所述：

> [Java 富 Internet 应用程序部署建议](http://download.oracle.com/javase/7/docs/technotes/guides/jweb/deployment_advice.html)。描述`deployJava.js` 旨在确保在提供 JWS 应用程序链接之前安装合适的最低 Java 版本的脚本。或启动小程序。

请注意，JWS 还提供细粒度的版本控制，详见[Java Web Start-Runtime Versioning](http://pscode.org/jws/version.html)。

话虽如此，JWS*可以*允许您通过将 JavaFX 2 API 选择性地添加到那些早期系统来支持早期系统。这是使用启动文件中基于版本的资源部分来实现的。

因此，JWS 结合`deployJava.js`实际上将是该页面讨论的 Native Package 的“替代品”。

# php - 在php中检索多个值的txt中的变量

> ID：14585379
> 
> 赞同：0
> 
> 时间：2013-01-29T14:36:38.553
> 
> 标签：php, text, text-files

txt文件中的内容：

```
<test@test.com>: connect to test.com[00.00.00.0]:0: Connection timed out
recipient=test@test.com
offset=00000
status=0.0.0
action=delayed
reason=connect to test.com[00.00.00.0]:0: Connection timed out

<test234@test234.com>: connect to e-mail.com[00.00.00.0]:0: Connection timed out
recipient=test234@test234.com
offset=00000
status=0.0.0
action=delayed
reason=connect to test234.com[00.00.00.0]:0: Connection timed out 
```

我需要在 txt 文件中输入变量：例如：

```
$email =    test234@test234.com
$content = : connect to e-mail.com[00.00.00.0]:0: Connection timed out
             recipient=test234@test234.com
             offset=00000
             status=0.0.0
             action=delayed
             reason=connect to test234.com[00.00.00.0]:0: Connection timed out 
```

我尝试但不工作

```
<?php 
$connect = mysql_connect('localhost','root','');
if(!$connect)
{
  die('Could not connect:' . mysql_error());
}
mysql_select_db('test',$connect);

// txt file

$file = fopen("email_errors.txt", "r") or exit ("Unable to open file");

while ( ($line = fgets($file)) !== false) {

   // get the email <email@email.com>
   preg_match_all('/\<(.+)\>/', $line, $coincidencias);

foreach ($coincidencias[1] AS $email) 
{
   // create a query and insert into database
    $sql = "INSERT INTO errormailer(id_error, email, description, fecha)    VALUES(NULL,'".$email."',' $description (the description)',now());";

    echo '<pre>'.$sql. '</pre>';
    mysql_query($sql);
}
} 
```

我找不到正确的方法，我需要将它们放入变量中以存储在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:12:34.727

```
$connect = mysql_connect('localhost','root','');
if(!$connect)
{
  die('Could not connect:' . mysql_error());
}
mysql_select_db('test',$connect);

// txt file

$file = fopen("email_errors.txt", "r") or exit ("Unable to open file");

$i = 0;

while ( ($line = fgets($file)) !== false) {

   // get the email <email@email.com>
   if (preg_match('/\<(.+)\>/', $line, $email)) {
     $coincidencias[] = $email[1];  
   }
   if (strlen(trim($line)) > 0) {
        $still_empty = false;
        $content[$i] .= preg_replace('/\<.+\>: /', '', $line);
   } else {
       if (!$still_empty) {
            $i++;   
       }
       $still_empty = true; 
   }
}

$i = 0;
foreach ($coincidencias as $email) 
{
    // create a query and insert into database
    $sql = "INSERT INTO errormailer(id_error, email, description, fecha) VALUES(NULL,'".$email."','".$content[$i]."',now());";
    echo '<pre>'.$sql.'</pre>';
    $i++;
    mysql_query($sql);
} 
```

# c++ - 最佳实践：如何获取对象的唯一标识符

> ID：14585385
> 
> 赞同：16
> 
> 时间：2013-01-29T14:36:43.897
> 
> 标签：c++

我有几个对象，需要为它们生成一个唯一标识符，在每个对象的生命周期内不会更改/重复。

基本上我想为我的对象获取/生成一个唯一的 id，像这样

```
int id = reinterpret_cast<int>(&obj); 
```

或者

```
int id = (int)&obj; 
```

我知道上面的代码是坏主意，因为 int 可能不够大，无法存储地址等。

那么从对象中获取唯一标识符的最佳实践是什么，这将是一个可移植的解决方案？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T14:56:09.377

根据您的“独特性”要求，有几种选择：

*   如果在一个地址空间内（“在一个程序执行内”）是唯一的，**并且您的对象保持在内存中的位置，**那么指针就可以了。但是有一些陷阱：如果您的对象存在于容器中，则每次重新分配都可能更改对象的身份，并且如果您允许复制对象，则从某些函数返回的对象可能已在同一地址创建。
*   如果您需要更全局的唯一性，例如因为您正在处理通信程序或持久数据，请使用 GUID/UUId，例如[boost.uuid](http://www.boost.org/doc/libs/1_52_0/libs/uuid/)。
*   您可以从某个静态计数器创建唯一整数，但要注意以下陷阱：
    *   确保你的增量是原子的
    *   防止复制或创建您的自定义复制构造函数、赋值语句。

Personally, my choice has been UUIDs whenever I can afford them, because they provide me some ease of mind, not having to think about all the pitfalls.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-29T14:39:41.773

如果对象需要唯一标识，可以在构造函数中生成唯一id：

```
struct Obj
{ 
   int _id;
   Obj() { static int id = 0; _id = id++; }
}; 
```

您必须决定如何处理副本/分配（相同的 id - 以上将起作用/不同的 id - 您将需要一个复制构造函数，并且可能需要一个`static`类成员而不是`static`局部变量）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-29T14:43:44.547

当我研究这个问题时，我很快就找到了**Boost UUID** 库（通用唯一标识符，[http://www.boost.org/doc/libs/1_52_0/libs/uuid/](http://www.boost.org/doc/libs/1_52_0/libs/uuid/)）。但是，随着项目的增长，我切换到**Qt 的 GUID**库（全局唯一标识符，[https://doc.qt.io/qt-5/quuid.html](https://doc.qt.io/qt-5/quuid.html)）。

不过，对我来说，一个教训是开始声明你自己的 UUID 类并隐藏实现，以便以后可以切换到你认为合适的任何东西。

我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:41:41.317

如果您的对象是一个类，那么您可以有一个静态成员变量，您可以将其设为 0。然后在构造函数中将此值存储到类实例中并递增静态变量：

班级

```
Indexed
{
public:
   Indexed() :
       m_myIndex( m_nextIndex++ )
   { }

   int getIndex() const
   { return m_myIndex; }

private:
   const int m_myIndex;
   static int m_nextIndex;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T14:44:00.913

直接使用对象地址作为唯一（对于此运行）标识符似乎不是一个坏主意。为什么要把它转换成整数？只需将指针与`==`：

```
MyObject *obj1, *obj2;
...
if (obj1 == obj2) ... 
```

当然，如果您需要将 ID 写入数据库等，这将不起作用。运行之间可以使用相同的指针值。此外，不要重载比较运算符 ( `==`)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T14:44:56.633

如果您需要分布式环境的唯一 ID，请使用[boost::uuid](http://www.boost.org/doc/libs/1_52_0/libs/uuid/)

# opengl - openGL Resizing 保持纵横比但也缩放对象

> ID：14585387
> 
> 赞同：0
> 
> 时间：2013-01-29T14:36:47.933
> 
> 标签：opengl, resize, clipping, aspect-ratio

因此，我正在使用 openGL 和 C++ 开发一个简单的项目，现在我在屏幕上只绘制了一个白色圆圈。

我添加了一个功能来保持我正在使用的画布中的纵横比，它似乎可以完美地工作。

如果您水平调整窗口大小，则会发生剪辑（这就是我的意图）

但是，如果您垂直调整窗口大小，则不会发生剪切，而是对象按比例缩小/放大..

现在我被困在弄清楚如何保持正确的纵横比，同时还防止对象缩放，同时记住我稍后将实现平移和缩放。

考虑到这一点，这是我用来调整比率的代码。

请注意，glViewPort 在调整大小时也设置正确，但我只复制了这一部分，因为我知道问题出在此处。

```
if ( dx/dy < w/h ){
    // Need to expand dx
    GLdouble diff = w/h*dy - dx;

    minX -= 0.5*diff;
    maxX += 0.5*diff;
}
else{
    // Need to shrink dx
    GLdouble diff = h/w * dx - dy;

    minX += 0.5*diff;
    maxX -= 0.5*diff;
}

glOrtho( minX, maxX, minY, maxY, minZ, maxZ ); 
```

# wxpython - StaticText 出现得太晚

> ID：14585388
> 
> 赞同：1
> 
> 时间：2013-01-29T14:36:48.193
> 
> 标签：wxpython

我有一个脚本可以复制一个大文件（>100MB）。此复制需要约 2 秒，因此我想在复制开始*之前*显示一个文本（“开始”），并在复制完成时显示另一个文本（“结束”）。这是我的代码：

```
def copy(self,event):
    wx.StaticText(self.startpanel, -1, 'start', (80,110))
    if not(os.path.exists(path2)):
        os.mkdir(path2)
    shutil.copy(path1+'/test.zip',path2+'/test.zip')
    wx.StaticText(self.startpanel, -1, 'end', (80,150)) 
```

问题：当调用事件*复制*时，我的面板上没有显示 2 秒，在这 2 秒后（复制完成时）两个静态文本同时出现！为什么我的第一个 StaticText 在复制 zip 文件之前没有出现，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:40:00.437

您正在通过事件处理程序中的长时间运行任务来阻止您的 GUI 线程。你应该使用多线程。请参阅[**此处**](http://wiki.wxpython.org/LongRunningTasks)的说明。图书馆也[`wx.lib.delayedresult`](http://www.wxpython.org/docs/api/wx.lib.delayedresult-module.html)非常有用。

所以基本上我的解决方案是：将您的标签设置为“开始”并使用`wx.lib.delayedresult`. 工作线程应该复制文件。完成后，将调用消费者函数。您在消费者函数中将标签设置为“结束”。

# selenium - 如何在 Selenium IDE 中使用循环

> ID：14585392
> 
> 赞同：0
> 
> 时间：2013-01-29T14:36:55.987
> 
> 标签：selenium, selenium-ide

Selenium IDE 中是否存在 for 循环？如果是，我如何在 Selenium IDE 中使用它？

谢谢，尼特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:11:09.497

我们可以在 Selenium IDE 中使用 while 循环和 goto 函数。

为此，我们必须安装插件流控制。从以下链接添加：

[Selenium IDE：流量控制](https://addons.mozilla.org/en-us/firefox/addon/flow-control/)

安装后，您将在 Selenium IDE 中获得命令 while 和 gotoif

**`while`1)循环示例**

```
<tr>
    <td>getEval</td>
    <td>index = 0;</td>
    <td></td>
</tr>
<tr>
    <td>while</td>
    <td>index &lt; 10;</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>index</td>
    <td>value</td>
</tr>
<tr>
    <td>echo</td>
    <td>${value}</td>
    <td></td>
</tr>
<tr>
    <td>getEval</td>
    <td>index++;</td>
    <td></td>
</tr>
<tr>
    <td>endWhile</td>
    <td></td>
    <td></td>
</tr> 
```

**2）示例`gotoif`**

```
store  |  10  |  x

gotoIf | storedVars['x'] > -2 && storedVars['x'] <50  |  true

getEval| alert("Condition Fails")

gotolabel | finish

label  |  true

getEval  | alert("Condition Pass")

label  | finish

try this Thank you.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:01:01.710

是的，我们可以在 IDE 中循环
您可以参考下面的 URL 在 IDE 中循环

[Selenium IDE：如何传递变量](https://stackoverflow.com/questions/11588508/selenium-ide-how-to-pass-variables)
[如何在 Selenium IDE 中编写 gotoif (i > -2 && i < 100)？](https://stackoverflow.com/questions/11413653/how-to-write-gotoif-i-2-i100-in-selenium-ide/11415085#11415085)
[http://radical-qa.blogspot.in/2012/02/selenium-ide_09.html](http://radical-qa.blogspot.in/2012/02/selenium-ide_09.html)

# css - 带有描述的图片库和带有 CSS 的全尺寸图片

> ID：14585394
> 
> 赞同：0
> 
> 时间：2013-01-29T14:37:04.933
> 
> 标签：css

[http://i47.tinypic.com/29kot3o.jpg](http://i47.tinypic.com/29kot3o.jpg)

请检查上面链接中的图片（版主不允许我发布图片）

在上图中，有三个部分，第一个只是显示缩略图，第二个是描述，第三个是全尺寸图像。

我刚刚为每个部分创建了三个不同的部分。我想制作这样一个页面，如果用户单击左侧的特定缩略图，那么第二个和 div 将显示描述，第三个将显示全尺寸图像。

我不想使用 javascript ，如果有任何方法可以使用简单的 CSS 或 CSS3 吗？

# java - 在剪贴板中插入字符串而不会丢失格式化文本/样式

> ID：14585396
> 
> 赞同：0
> 
> 时间：2013-01-29T14:37:17.987
> 
> 标签：java, awt, clipboard

我需要在剪贴板的开头插入一个字符串，而不会丢失包含该字符串的文本的内联格式。目前这在我的代码中没有发生！

```
public String getClipboard()
{           
    Transferable t = Toolkit.getDefaultToolkit().getSystemClipboard().getContents(null);
    try
    {   
        if (t != null && t.isDataFlavorSupported(DataFlavor.stringFlavor))
        {
            String text = (String) t.getTransferData(DataFlavor.stringFlavor);
            return text;
        }
    }
    catch (UnsupportedFlavorException e)
    {
        e.printStackTrace();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

    return null;
}

public void setClipboard(String str)
{
    StringSelection ss = new StringSelection(str);
    Toolkit.getDefaultToolkit().getSystemClipboard().setContents(ss, this);  
}

public void uso()
{
    String claveVM = "Text I want insert";  
    setClipboard(claveVM + getClipboard());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:40:44.430

你不能用纯文本（字符串）来做。您需要 RTF 或 HTML。

# asp.net - 从 ActiveX 访问 Web.config

> ID：14585397
> 
> 赞同：0
> 
> 时间：2013-01-29T14:37:20.447
> 
> 标签：asp.net, web-config, activex

有一种方法可以读取 activex 代码中的 web.config 设置吗？我需要在我的 activex 中设置连接字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:09:34.347

ActiveX 控件在浏览器中运行，因此它们无法访问`Web.config`.

您可以做的是在控件中公开属性，然后在您的代码后面 (C#/VB.NET) 或 .ASPX 页面中填写这些属性。服务器端代码确实可以访问`Web.config`，因此它可以从那里读取数据并通过填写属性将其传递给 ActiveX 控件。

或者，您可以在生成客户端 JavaScript 的 ASP.NET 页面中编写代码，然后此 JavaScript 可以填充 ActiveX 控件的属性。确实是一回事，因为您总是从服务器端代码访问配置文件并将数据传递给 ActiveX 控件，方法是生成 HTML 或生成 JavaScript。

# java - 打开 mcafee 防病毒软件时，使用 Java 的 Webdriver 脚本未运行

> ID：14585399
> 
> 赞同：7
> 
> 时间：2013-01-29T14:37:25.687
> 
> 标签：java, webdriver, selenium-webdriver

打开 McAfee 防病毒软件后，使用 Java 的 Web 驱动程序脚本未运行。有什么方法可以在不关闭 McAfee 防病毒软件并运行脚本的情况下运行 Web 驱动程序脚本。这个问题在我的客户端机器上。他们在那里的系统中安装了 McAfee 防病毒软件。我的客户不想关闭他们系统中的 McAfee 并运行脚本。

谁能帮助我解决这个问题，如何在不关闭客户端计算机中的 McAfee 的情况下运行 Web 驱动程序脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:14:34.313

[WebDriver 是有线协议](https://webdriver.io/docs/api/webdriver.html)，因此您需要将驱动程序（例如 InternetExplorerDriver）和端口号（默认为 5555）添加到 Mcafee 白名单。

# android - 在 SDK 中使用 Samsung 的 Samsung Comic Fun Filter

> ID：14585402
> 
> 赞同：1
> 
> 时间：2013-01-29T14:37:35.210
> 
> 标签：android, filter, camera, samsung-mobile, action-filter

我正在寻找在我的 Android 应用程序中使用三星漫画趣味过滤器的可能性。有可能这样做吗？或者这是三星应用程序独有的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:07:19.503

是的。有可能的。三星为此提供了一个 API。图像过滤器包含在 S-Pen SDK 中。

您可以从这里下载 S-Pen SDK：http: [//developer.samsung.com/s-pen-sdk](http://developer.samsung.com/s-pen-sdk)

有关使用 S-Pen SDK 使用图像过滤器的教程可在此处获得：http: [//developer.samsung.com/s-pen-sdk/technical-docs/S-Pen-SDK-2-2-5-Tutorial#h7](http://developer.samsung.com/s-pen-sdk/technical-docs/S-Pen-SDK-2-2-5-Tutorial#h7)

# javascript - javascript输入只允许数字

> ID：14585407
> 
> 赞同：3
> 
> 时间：2013-01-29T14:37:49.400
> 
> 标签：javascript

我使用此代码并且它有效

```
<HTML>
  <HEAD>
    <SCRIPT language=Javascript>
       <!--
       function isNumberKey(evt)
       {
          var charCode = (evt.which) ? evt.which : event.keyCode;
          if (charCode != 46 && charCode > 31 
            && (charCode < 48 || charCode > 57))
             return false;

          return true;
       }
       //-->
    </SCRIPT>
  </HEAD>
  <BODY>
    <INPUT id="txtChar" onkeypress="return isNumberKey(event)" 
           type="text" name="txtChar">
  </BODY>
</HTML> 
```

但我无权访问 html，只有 javascript

```
document.getElementById("txtChar").addEventListener("keypress", <<your code>>, false); 
```

应该采取什么措施`<<your code>>`？

ps 发现此组件的另一个错误：
当您复制粘贴（ctrl-v 或右键单击粘贴）时，它不起作用
有人知道如何解决它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:40:23.840

如果您擅长使用`HTML5`并且只针对现代浏览器，那么新的属性`required`就`pattern`在这里为您服务。例子：

```
<input id="txtChar" type="number" required pattern="\d+"/> 
```

你可以通过*CSS*来处理状态，比如

```
#txtChar:required:valid {
    border: 1px solid green;
}

#txtChar:required:invalid {
    border: 1px solid red;
} 
```

如果在`<form>`标签中使用，用户将无法在*无效*状态下提交。

* * *

**我刚刚读到您无权访问标记，因此深表歉意。我将把它作为信息性答案。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T01:01:22.380

在这种情况下，`<<your code>>`添加处理它的函数的名称；`isNumberKey`而且您还需要在`evt.preventDefault();`之前添加`return false;`

下面的这个函数只接受对应于从 0 到 9 的数字的代码，并忽略点（“.”）、连字符（“-”）和减号（“-”）。

```
function isNumberKey(evt){
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    if (charCode == 46 || charCode > 31 && (charCode < 48 || charCode > 57)){
        evt.preventDefault();
        return false;
    }
    return true;
} 
```

为 HTML5 浏览器配置输入字段：

```
txtChar = document.getElementById("txtChar")
txtChar.addEventListener("keypress", isNumberKey, false);

//Attributes
txtChar.type = "number";
txtChar.min = 0;
txtChar.pattern = "\\d+";
txtChar.placeholder = "Only integer positive numbers";
txtChar.required = "required"; 
```

工作示例，包括 jAndy 答案中的样式：http: [//jsfiddle.net/pL9Zk/](http://jsfiddle.net/pL9Zk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T16:37:10.937

我知道我参加聚会有点晚了。

jAndy 的 HTML5 示例可能是支持它的浏览器的最佳答案。Josaph 的 JavaScript 回答也很好，因为它启发了我解决提问者的附录和我的问题的答案。

以下丢弃与正则表达式匹配的输入（不是数字，替换为空字符串），并在有输入的任何时候调用，即使来自粘贴。

```
 function stripNonNumeric() {
   this.value = this.value.replace(/\D+/g, '');
 }

 var txtChar = document.getElementById("txtChar");
 if (txtChar.addEventListener) {
   txtChar.addEventListener("input", stripNonNumeric);
 } else if (txtChar.attachEvent) {
   txtChar.attachEvent("oninput", stripNonNumeric);
 } 
```

我不是 JavaScript 人，我不确定这是否是解决问题的好方法，或者是否需要考虑性能问题。但是，它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-19T11:56:08.123

如果您不能使用 HTML5，`<input type="number">`那么我将正则表达式输入值仅允许数字。我修改了我编写的脚本来完成类似的任务。它允许粘贴和剥离任何非整数字符。

```
var arrowKeys = [37, 38, 39, 40];  

function stripChars( e ) {
  // Don't execute anything if the user is just moving the cursor around and
  // not really entering anything new.
  if(arrowKeys.indexOf(e.keyCode) !== -1){ return; }

  var elem = e.currentTarget,
      cursorPos = elem.selectionEnd;

  // strip any unwanted character and assign the value back
  elem.value =  elem.value.replace(/\D/g,'');
  // this avoids the cursor shifting to the end of the input 
  // when inserting an integer in the middle of an already existing number
  elem.selectionEnd = cursorPos;
  elem.focus();
}

var elem = document.getElementById('elem');

elem.addEventListener('keyup', stripChars, false); 
elem.addEventListener('paste', stripChars, false); 
```

无论如何，您可以在此处查看带有测试的原始脚本，并[在此处](https://github.com/nobitagit/dotdot)[查看](http://jsbin.com/coqezi/3/edit?js,output)上述代码的演示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T14:42:19.027

这是一个错误？

```
document.getElementById(**"txtChar"**).addEventListener("keypress", function(){
                return isNumberKey(event);
            }, false); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-18T01:20:59.533

试试这个代码兄弟。我希望它会帮助你很多我使用jQUERY。

```
<head>
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
</head>
<body>

<input id="txtChar" type="text" name="txtChar">

</body>

<script>

    $("#txtChar").keypress(function(e) {
       var charCode = (e.which) ? e.which : event.keyCode;
          if (charCode != 46 && charCode > 31 
            && (charCode < 48 || charCode > 57))
             return false;

          return true;
    });

</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T14:40:33.083

事件在函数内部未知。所以提到要运行的事件对象：

~~document.getElementById("myElement").addEventListener("keypress", function( **event** ){ return isNumberKey(event); }, false);~~

编辑：问题有所改变，所以引用答案：
1.将“myElement”更改为“txtChar”
2.将事件对象作为参数包含在内

```
document.getElementById("txtChar").addEventListener("keypress", function(event){
                    return isNumberKey(event);
                }, false); 
```

# android - TabActivity 中的多个地图 v2

> ID：14585409
> 
> 赞同：13
> 
> 时间：2013-01-29T14:37:50.010
> 
> 标签：android, google-maps, android-tabs, google-maps-android-api-2

我目前正在尝试使用 MapView 对象在 TabActivity 的不同选项卡中拥有 2 个地图 v2。问题出现在以下场景中：

*   显示带有地图的 tab1
*   转到 tab2 以显示另一张地图
*   在第二个选项卡中，第一个选项卡中的地图图像看起来与新地图重叠。见下图：

![带有 2 个地图的 TabActivity](../Images/cb209b183bb8ebbe67434f50d5b5a20b.png)

在右侧，您可以看到第一张地图仍然显示在其顶部。触摸事件将转到新地图，但这并没有真正帮助。我花了很多时间尝试将我们的应用程序转换为使用片段并遇到其他类型的问题。其中之一是[http://code.google.com/p/android/issues/detail?id=40035](http://code.google.com/p/android/issues/detail?id=40035)所以这也不是一个好的选择。

到目前为止，我还没有找到任何解决方法。为了轻松尝试各种更改，我编写了一个简单的应用程序并在此处提供：[https](https://github.com/cristizmf/TestMapsV2) ://github.com/cristizmf/TestMapsV2 。它只需要地图库项目的正确位置和清单中的良好地图键。

任何想法将不胜感激。

稍后编辑：我为此记录了一个问题：[https ://code.google.com/p/gmaps-api-issues/issues/detail?id=5027&thanks=5027&ts=1362071369](https://code.google.com/p/gmaps-api-issues/issues/detail?id=5027&thanks=5027&ts=1362071369)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:17:53.220

我们遇到了完全相同的问题。我怀疑这是由于新地图使用 OpenGL 造成的——即使隐藏了一个，android 也可能无法同时处理视图层次结构中的两个 OpenGL 小部件。

我们解决此问题的唯一方法是在离开选项卡时实际删除地图视图，然后构建一个新的并在返回选项卡时将其重新添加。这确保了不会同时构建两个映射。

讨厌，但它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:34:09.473

几天前我遇到了同样的问题，并且正在为该怎么做而烦恼。

最初，我使用“Tabs the Fragment way”设置了我的应用程序，如此处所示[，](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)以避免弃用的 TabActivity，并使用[此 hack](https://github.com/inazaruk/map-fragment)允许我将 Maps v1 与 Fragments 合并。它基本上只是将 Activity 屏蔽为 Fragment。

但是为了简单起见，后来切换到 TabActivity 更进一步/它更适合整个应用程序。但现在显然这个 2x Maps v2 片段问题已经成为一个问题。

所以我已经恢复到“带有片段的选项卡”，并且只为每个选项卡设置了上面提到的“黑客设置”，它允许为每个选项卡设置一个 Activity，并为每个选项卡显示多个 Maps v2。我没有深入了解它，但它似乎正在完成工作 atm，只是将一些代码放在一起进行测试..

不知道您是否对此仍有疑问/这显然不是最正确的解决方案，但只是想我会分享我的两分钱，以防您仍然需要它。

干杯。

# d3.js - D3 流图的可读标签

> ID：14585410
> 
> 赞同：2
> 
> 时间：2013-01-29T14:37:49.463
> 
> 标签：d3.js, label, stream-graph

我正在尝试将可读标签应用于使用完全动态数据呈现的 D3 Streamgraph - 各种不同的数据集随着时间的推移从实时数据演变而来，并且提供的控件也用于操作所显示的内容。所有这一切都很好——问题是如何清楚地标记流——没有使用图例。

所需的色调和亮度的巨大变化使得为浮动在图形上的标签选择可读的样式非常棘手，特别是在有限的 SVG 样式可用跨平台并且标签有时也会不可避免地在背景上重叠的情况下。例如，黑色标签“有效”，但有时在较暗颜色的顶部很难阅读（我们确实需要确保良好的范围）......

有人做过类似/解决过同样挑战的事情吗？我目前正在考虑改用图例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-21T04:02:46.837

一些想法可能会有所帮助：

在文本周围添加一个背景矩形，不透明度设置为 0.7（颜色与数据系列相同）。这有助于使文本弹出。对于矩形的边框，使用 d3js [rgb.darker](https://github.com/mbostock/d3/wiki/Colors#rgb_darker)或[rbg.brighter](https://github.com/mbostock/d3/wiki/Colors#rgb_brighter)。

```
var pathStroke = d3.rgb( item.color ).darker(1.4).toString() 
```

为了防止标签重叠，我可以想到两种解决方案——都很难。使用 d3js[强制布局](https://github.com/mbostock/d3/wiki/Force-Layout)或编写自己的布局代码。我们最终为[d3-traits](https://github.com/gec/d3-traits)中的工具提示编写了自己的布局代码。请参阅[tooltips.js](https://github.com/gec/d3-traits/blob/master/src/focus/tooltip.js#L202)和[layout.js](https://github.com/gec/d3-traits/blob/master/src/layout.js)。

```
d3.trait.layout.verticalAnchorLeftRight( foci, self.chartRect()) 
```

layout.js 确实有一些通用且非常灵活的布局例程。它将在边界框中布局矩形，避免重叠，并确定标签是否需要左对齐或右对齐。如果矩形的原点朝向边界框的右边缘，则它们是右对齐的。

# validation - Codeigniter Validaton_error() 到数组

> ID：14585412
> 
> 赞同：0
> 
> 时间：2013-01-29T14:37:56.233
> 
> 标签：validation, codeigniter-2

我想将 validation_errors() 的输出转换为数组（最终是 json 对象）。到目前为止，我在其他教程的帮助下所做的是 -> 我扩展了 CI_Form_Validation 库以返回受保护的数组 _error_message

```
static function errorToArray()
{
    $CI =& get_instance();
    return $CI->form_validation->_error_messages;
} 
```

但不幸的是，我无法查看数组中的内容，甚至考虑将其传递给视图。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:28:22.257

这很简单

```
if($this->form_validation->run() === TRUE){

}else{
    $array  =   validation_errors();
    echo json_encode($array);
} 
```

# ios - 带有标题的 uitableview，如 instagram 用户个人资料

> ID：14585413
> 
> 赞同：2
> 
> 时间：2013-01-29T14:38:00.000
> 
> 标签：ios, uitableview, uiscrollview, instagram

我已经为此苦苦挣扎了一段时间。我必须实现一个类似于 Instagram 在他们的 ios 应用程序中的用户配置文件。

![在此处输入图像描述](../Images/1f4bae668240dfefe515616ccbca029a.png)

当单击该选项卡栏上的第一个按钮时，所有向下的内容都会发生变化。底部显示的表格视图具有动态大小，因此他们也考虑到了这一点。

我已经实现了一些顶部是带有 5 个按钮的 UIView 并基于它们底部（女巫就像一个容器视图）更改内容的东西。而这两个（顶部 uiview 和底部容器视图）是 UIScrollView 的一部分。但是这样我就无法及时获得关于我想在底部显示的表格视图大小的信息，以便修改 UIScrollView 的大小。我有一种感觉，这是一种有缺陷的方法。我真的很感激任何想法哦如何实现这个交互之王。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T05:49:28.200

我知道这个答案已经晚了一年多，但我想就此陈述我的假设……以防它以后可能对其他人有所帮助。我实施了类似的观点并得出了这个结论。如果我错了，欢迎任何人纠正我。

我认为也许顶视图是标题视图，而看起来像集合视图和表格视图的两个选项都是集合视图。

因为集合视图的布局可以微调到最细微的细节，我认为看起来像表格视图的视图只是一个真正专门设计的集合视图。在视图之间切换时，集合视图的数据和属性正在交换和重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:53:11.580

这就是我所拥有的。我的问题是，为了改变后者的滚动视图大小，我不想在有用的时间将 tableview 的框架高度从 tableview 控制器返回到 UserProfileViewController。我也觉得我在某种程度上是在倒退，所以任何建议都非常受欢迎。

此视图有两个部分：上部和下部。父视图是滚动视图。我想要实现的是在上部有一种标签栏，它将控制 waht 将出现在下部。

当按下左上角按钮以显示另一个视图时，上部有一个翻转动画。实现这一点的方法是拥有 2 个视图：虚拟视图和后视图。虚拟视图具有小时候的正视图。前视图是包含所有按钮的视图。这个动画的代码是这样实现的：

```
- (IBAction)infoButtonPressed:(id)sender
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.hoverView cache:YES];

    if ([self.headerView superview]) {

        [self.headerView removeFromSuperview];
        [self.hoverView addSubview:self.backOfHeaderView];
        [self.infoButton removeFromSuperview];
        [self.backOfHeaderView addSubview:self.infoButton];

    } else {

        [self.backOfHeaderView removeFromSuperview];
        [self.hoverView addSubview:self.headerView];
        [self.infoButton removeFromSuperview];
        [self.headerView addSubview:self.infoButton];

    }
    [UIView commitAnimations];
} 
```

下部由充当占位符的容器视图制成。当按下按钮时，容器视图中会显示不同的视图控制器。

每个视图控制器都有自己的容器视图。当控制器加载时，该视图控制器（tableview）的特定视图被添加到它的容器视图中。它还确保如果 tableview 已经添加到容器视图中，它将被删除。所有这些都是在每个特定的视图控制器中完成的。

在 User Profile 视图的视图控制器中，有一个容器视图的实例和一个 UIViewController，它也充当占位符（从现在开始命名为 currentViewController）。当按下特定按钮时，它会检查我们想要显示的视图控制器的实例是否已经存在。如果不是，它将创建一个并将其 tableview 的框架设置为容器视图的边界。之后，它将从父视图控制器中删除 currentViewController 的视图，并从父视图控制器中删除 currentViewController 本身，以确保如果有分配给这些的东西，它们将不存在。然后它将所需的视图控制器分配给 currentViewController。它还分配所需的视图控制器' s containerView 实例到父视图控制器（用户配置文件视图控制器）中的容器视图。最后，它会将所需的视图控制器作为子视图添加到主视图控制器（用户配置文件视图控制器）中，并将所需的视图控制器的视图添加到主视图控制器的 containerView 中。这是其中一个按钮的代码：

```
 //Check if there is an instance of the viewcontroller we want to display. If not make one and set it's tableview frame to the container's view bounds
    if(!_userWallViewController) {
        self.userWallViewController = [[WallViewController alloc] init];
//        self.userWallViewController.activityFeedTableView.frame = self.containerView.bounds;

    }

    [self.userWallViewController.containerView addSubview:self.userWallViewController.activityFeedTableView];
    //If the currentviewcontroller adn it's view are already added to the hierarchy remove them
    [self.currentViewController.view removeFromSuperview];
    [self.currentViewController removeFromParentViewController];

    //Add the desired viewcontroller to the currentviewcontroller
    self.currentViewController = self.userWallViewController;

    //Pass the data needed for the desired viewcontroller to it's instances
    self.userWallViewController.searchURLString = [NSString stringWithFormat:@"event/user/%@/", self.userID];
    self.userWallViewController.sendCommentURLString = [NSString stringWithFormat:@"event/message/%@", self.userID];

    self.userWallViewController.totalCellHeight = ^(float totalCellHeight){

        self.userWallViewController.numberOfCells = ^(float numberOfCells){
            NSLog(@"The total number of cells: %f", numberOfCells);
            NSLog(@"The total cell height: %f", totalCellHeight);

            self.scrollView.contentSize = CGSizeMake(320.0, totalCellHeight + 172.0 + 33.0);
            CGRect newFrame = self.userWallViewController.containerView.frame;
            newFrame.size.height = totalCellHeight + 33.0;
            self.userWallViewController.containerView.frame = newFrame;

            NSLog(@"Container view: %f", self.containerView.frame.size.height);
            NSLog(@"Scroll view: %f",self.scrollView.contentSize.height );
        };
    };

    //Add this containerview to the desired viewcontroller's containerView
    self.userWallViewController.containerView = self.containerView;

    //Add the needed viewcontroller and view to the parent viewcontroller and the containerview
    [self addChildViewController:self.userWallViewController];
    [self.containerView addSubview:self.userWallViewController.view];

    [self performSelector:@selector(changeScrollView) withObject:self afterDelay:0.5];

    //CLEAN UP THE CONTAINER VIEW BY REMOVING THE PREVIOUS ADDED TABLE VIEWS
    [self.userFansViewController.userSimpleTableView removeFromSuperview];
    [self.fanOfViewController.userSimpleTableView removeFromSuperview];
    [self.userPublishedMovellaListViewController.gridView removeFromSuperview];

    [self.userPublishedMovellaListViewController removeFromParentViewController];
    self.userPublishedMovellaListViewController = nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:54:58.723

我相信它是 UITableView 或 UICollectionView 上的 headerView，具体取决于您选择的视图模式。当您点击其中一个按钮时，它会将 UITableView 更改为 UICollectionView，反之亦然。

您希望跟踪正在显示的内容的当前 contentOffset（UICollectionView 和 UITableView 都是 UIScrollView 的子类，因此您可以从两者中获取此内容），然后在要切换到的视图上设置 contentOffset。

为 UIView 标头子类设置一个 ivar，以便您可以轻松地重用它。

# mysql - SQL 查询 - 标记系统，分隔字符串 + 唯一值

> ID：14585417
> 
> 赞同：0
> 
> 时间：2013-01-29T14:38:14.350
> 
> 标签：mysql, sql

我正在为一个在 MySQL 数据库中存储项目标签的客户工作（我知道，我知道 - 不理想）：

```
coats_and_jackets-Woven_Jacket-brand:Hobbs;
coats_and_jackets-Woven_Jacket-color:Black;
coats_and_jackets-Woven_Jacket-style:Boucle;
coats_and_jackets-Woven_Jacket-pattern:Plain;
dresses-Pinafore-brand:COS;
dresses-Pinafore-color:Blue _ Navy;
dresses-Pinafore-style:Wool;
dresses-Pinafore-pattern:Plain;
shoes-Ankle_Boot-brand:Topshop;
shoes-Ankle_Boot-color:Black;
shoes-Ankle_Boot-style:Leather;
shoes-Ankle_Boot-pattern:Plain;
bags-Tote-brand:Mulberry;
bags-Tote-color:Brown _ Tan;
bags-Tote-style:Leather;
bags-Tote-pattern:Plain;
shoes-Ballet_shoes-brand:Chanel;
shoes-Ballet_shoes-color:Black;
shoes-Ballet_shoes-style:Leather;
shoes-Ballet_shoes-pattern:Plain;
accessories-Scarf-brand:Zara;
accessories-Scarf-color:Brown _ Tan;
accessories-Scarf-style:Wool;
accessories-Scarf-pattern:Checked; 
```

每个标签分为 4 个部分，如下所示：category-type-brand、category-type-color、category-type-style、category-type-pattern

并非标签的所有 4 个部分都是必需的，并且可以从 DB 中省略。

我的任务是找出一个项目有多少个标签，所以在这个例子中使用了 6 个标签，每个标签都有 4 个部分。

到目前为止，我的查询计算了所有标签部分，在本例中为 24，但我不能假设每个标签都会存储所有 4 个部分。所以不能将零件数量除以4来得到标签的数量。

在本例中，使用的 6 个标签如下：

大衣和夹克（梭织夹克） 连衣裙（围裙） 鞋履（踝靴） 包袋（手提包） 鞋履（芭蕾舞鞋） 配饰（围巾）

现在我不关心类别、类型或部件（品牌、颜色、样式、图案）——我只关心获取该项目的标签总数。

此外，上面的数据示例将存储在 db 行中，如下所示：

```
+----------+-------------+----------------------------+
|  ID      | meta_key    |   meta_value               |
+----------+-------------+----------------------------+
|        1 |   tags      |  coats_and_jackets-wove... |
+----------+-------------+----------------------------+
|        2 |   item_desc |  Fashion editor            |
+----------+-------------+----------------------------+ 
```

帮助构建此查询将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:53:04.730

假设我正确理解了您的要求，那么这样的事情怎么样（使用 CTE 来演示假定的表结构）

```
WITH CTE1(tag) AS(
    select 'coats_and_jackets-Woven_Jacket-brand:Hobbs' union
    -- ...
    select 'accessories-Scarf-color:Brown _ Tan' union
    select 'accessories-Scarf-style:Wool' union
    select 'accessories-Scarf-pattern:Checked'
)
, CTE2(tag_prefix) AS(
    select LEFT(tag, CHARINDEX('-', tag, CHARINDEX('-', tag) + 1) - 1) from CTE1
)
select tag_prefix, COUNT(*) from CTE2 group by tag_prefix 
```

这将为您提供...的结果

```
accessories-Scarf   4
bags-Tote   4
coats_and_jackets-Woven_Jacket  4
dresses-Pinafore    4
shoes-Ankle_Boot    4
shoes-Ballet_shoes  4 
```

...它为您提供标签前缀和使用的零件数量。从那里您可以计算各个行或总结零件的数量或您需要的任何其他内容......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:39:11.973

我刚刚意识到我的解决方案完全没有意义，因为我错过了“mysql”标签；）但无论如何我都会把它贴在这里。希望它可以为您提供有关如何进行的指示。

```
WITH CTE1(ID, meta_key, meta_value) AS(
    select 1, 'tags', 'coats_and_jackets-Wo...' union all
    select 2, 'item_desc', 'Fashion editor'
)
, TagsCTE AS(
    select t.ID, x.Item as tag_and_value
    from CTE1 t
    cross apply dbo.fn_SplitString(t.meta_value, ';') x
    where meta_key = 'tags' and LEN(x.Item) > 0
)
select ID, COUNT(parts_count) from (
    select ID, COUNT(*) as parts_count
    from TagsCTE
    group by ID, LEFT(tag_and_value, CHARINDEX('-', tag_and_value, CHARINDEX('-', tag_and_value) + 1) - 1)
) a group by ID 
```

这给出了以下结果：

```
1   6 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:41:27.497

标签使用连字符作为分隔符。这是一种查找给定项目使用的标签数量的方法：

```
select it.*, length(it.tags) - length(replace(it.tags, '-', ''))+1
from itemtags it 
```

这将用空字符串替换连字符，并测量长度差异。

# firefox - CKeditor、oembed 插件、firefox 唯一问题

> ID：14585419
> 
> 赞同：1
> 
> 时间：2013-01-29T14:38:15.333
> 
> 标签：firefox, ckeditor, oembed

我用这个把头发拉出来。我正在使用 ckeditor 的 oembed 插件，这里可用：[https ://github.com/w8tcha/CKEditor-oEmbed-Plugin](https://github.com/w8tcha/CKEditor-oEmbed-Plugin)

该插件在 Chrome、Safari 甚至 IE9 中加载并按预期运行。

但是在 Firefox 中，我在控制台中收到此错误：

> TypeError: plugin is null [Break On This Error]
> if (plugin.icons) {

在我尝试加载的页面上，我有以下内容：

```
 var editor = CKEDITOR.replace( 'editor1', {
    extraPlugins : 'autogrow,oembed',
    toolbar: [
      [ 'Bold', 'Italic', '-', 'NumberedList', 'BulletedList', '-', 'Link', 'Unlink', 'oembed' ],   
    ],
    width: 700,
    removePlugins: 'elementspath,resize'
  }); 
```

正如我所说，这在其他浏览器中运行良好，所以不确定是什么导致 Firefox 出现这种情况？

非常感谢任何帮助。如果您需要更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:07:53.023

对于其他感兴趣的人 - 我发现一些插件是冲突的。我没有仔细检查所有内容并找出哪些冲突（我的配置文件中有 50 个左右），而是采用了懒惰的方法，从基本版本开始，并添加了我需要的最低限度的内容。

现在它起作用了。

# ruby-on-rails - 订购搜索结果 - 太阳黑子铁轨

> ID：14585420
> 
> 赞同：0
> 
> 时间：2013-01-29T14:38:18.357
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sunspot, sunspot-rails

我有两个模型，一个学校模型，一个价格模型。一所学校有一个价格。

这是我的学校控制器，我渴望用学校模型加载价格模型：

```
def index
@search = School.search(:include => [:price]) do  
   fulltext params[:search]
   paginate :page => params[:page], :per_page => 7
end
 @results = @search.results
end 
```

在我的学校模型中，我做了这样的事情：

```
searchable do
  string :name 
  text :locality
end 
```

在 sunspot 中，您可以使用一种方法对搜索结果进行排序和排序：[https](https://github.com/sunspot/sunspot#ordering)
://github.com/sunspot/sunspot#ordering 如果您想按学校的名称对结果进行排序，您可以这样做：

```
@search = School.search(:include => [:price]) do  
  fulltext params[:search]
  order_by(:name, :desc)
  paginate :page => params[:page], :per_page => 7
end 
```

但就我而言，我想按价格模型中的一列订购。我如何在黑子中做到这一点？

# ios - 如何验证混音器单元和 iPodEQ 单元的 AudioUnit 属性

> ID：14585423
> 
> 赞同：0
> 
> 时间：2013-01-29T14:38:26.880
> 
> 标签：ios, audio, audiounit, mixer

我想使用 AudioGraph 来提高 VOIP 音频质量。现在，我已经合并 ​​AUGraph 来处理来自远程的音频数据，连接节点：混音器节点--> iPodEQ 节点--> I/O 输出节点。远程音频是单声道的。我将本地输出设置为立体声通道，配合SpokenWord EQ模式的iPodEQ单元，以改善音效。

我的问题是如何验证输出数据是否为立体声以及 SpokenEQ 模式是否设置成功？

感谢您的阅读，希望您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:10:34.180

在输入端应用已知频谱内容的参考信号，然后在输出端测量信号的频谱。

您可能需要构建一个测试工具来执行此操作，在 VOIP 编解码器的输出处插入一个信号，并将音频图的输出捕获到一个文件中。

我个人怀疑 iPodEQ 做的不是 EQ，所以我希望两个输出是相同的。同样，这很容易验证。

在输入信号方面，我会推荐[粉红](http://en.wikipedia.org/wiki/Pink_noise)噪声或[白](http://en.wikipedia.org/wiki/White_noise)噪声。

有很多工具可以用来查看记录信号的频谱。如果你手头没有东西，如果你手头没有东西，我会选择[Sonic Visualiser](http://www.sonicvisualiser.org)。如果应用了正确的 EQ 曲线，在频谱图上将非常明显。

# java - FoxPro 可以使用 JAR 文件吗？

> ID：14585435
> 
> 赞同：0
> 
> 时间：2013-01-29T14:38:58.213
> 
> 标签：java, .net, dll, jar, foxpro

我在用 Java 编写的 jar 文件中有一些代码。我想在 Fox Pro 中使用我的 JAR。

有人告诉我，用 Fox Pro 调用 JAR 文件中的函数是不可能的。

FoxPro 是否可以在 jar 文件中调用函数？如果有怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T02:59:56.940

**不， FoxPro**不可能调用用 java **JAR**编写的函数。除非您想用死语言编写 Java 解释器。

但是，您可能可以为您的 java 代码创建一个**ActiveX**或**COM***包装器，然后使用生成的对象。Java 似乎有一个“JavaBeans ActiveX Bridge”接口。

[http://www.oracle.com/technetwork/java/activex-142114.html](http://www.oracle.com/technetwork/java/activex-142114.html)

根据您拥有多少 Java 和 FoxPro 代码，您可能会走得更好，让 Java 使用 OLE DB 读取 FoxPro 数据或调用基于 FoxPro 的 COM 对象。OLE DB 应该很容易找到，并且在 sourceforge 上有一个“JACOB”项目可以让 Java 读取 COM。

[http://sourceforge.net/projects/jacob-project/](http://sourceforge.net/projects/jacob-project/)

如果这些都不适合你，你总是可以做 GNU 人会做的事情，将你的 Java 代码包装到一个简单的命令行应用程序中。不确定如何准确地取回数据，但如果不出意外，您总是可以修改您的 java 代码以将文本文件写入`%TEMP%`.

# javascript - JavaScript 循环混合 div

> ID：14585437
> 
> 赞同：1
> 
> 时间：2013-01-29T14:39:11.037
> 
> 标签：javascript, html, google-feed-api

这是我在这里的第一篇文章，大家好。我是 JavaScript 新手，这就是我正在努力解决的问题。可能我的问题的标题有点嘲讽，但我正在研究的是 Google Api 提要。该代码将所有标题放入一个 div 并将内容放入另一个。我希望看到它们混合在一起。请看一下，并在此先感谢您。

```
 <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

    google.load("feeds", "1");

    function initialize() {
      var feed = new google.feeds.Feed("http://encompassme.com/rss/posts/en.xml");
      feed.setNumEntries(2);
      feed.load(function(result) {
        if (!result.error) {

        var containerTitle = document.getElementById("title");
        var containerContent = document.getElementById("content");

          for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];

            var div = document.createElement("div");
            var diva = document.createElement("div");

            div.appendChild(document.createTextNode(entry.title)); 
            diva.appendChild(document.createTextNode(entry.content)); 

            containerTitle.appendChild(div);
            containerContent.appendChild(diva);

          }

        }
      });
    }
    google.setOnLoadCallback(initialize);

    </script>
  </head>
  <body>
  <div id="entry">
    <div id="title"></div>
    <div id="content"></div> 
   </div> 
  </body>
</html> 
```

我得到了什么：

```
title
title
content
content 
```

我想要的是：

```
title
content
title
content 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:43:56.233

只需将 title 和 div 元素都附加到同一个容器中，如下所示：

```
containerContent.appendChild(div);
containerContent.appendChild(diva); 
```

**[工作示例](http://fiddle.jshell.net/4fBdb/1/)**

问题是您将所有标题附加到一个 div，并将所有内容附加到另一个 div。

发生的事情是这样的：

首先，您添加了标题和内容`1`：

```
<div> <!-- Fist div here -->
    Title 1
</div>
<div> <!-- Second div -->
    Content 1
</div> 
```

一切似乎都很好，但是当您添加另一篇文章时，发生了这样的事情：

```
<div> <!-- Fist div here -->
    Title 1
    Title 2
</div>
<div> <!-- Second div -->
    Content 1
    Content 2
</div> 
```

如果您只是将元素附加到 one 中`<div>`，它们将按照您添加它们的顺序在那里，因此导致：

```
<div> <!-- Fist div here -->
    Title 1
    Content 1
    Title 2
    Content 2
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:46:32.830

好吧，这似乎是一个排序问题，你有：

```
 for (var i = 0; i < result.feed.entries.length; i++) {
        var entry = result.feed.entries[i];

        var div = document.createElement("div");
        var diva = document.createElement("div");

        div.appendChild(document.createTextNode(entry.title));    //this places node after div
        diva.appendChild(document.createTextNode(entry.content)); //this places node after diva

        containerTitle.appendChild(div); // append after containerTitle
        containerContent.appendChild(diva); //append after containerContent

      } 
```

在 containerContent 之后追加：

```
 containerContent.appendChild.appendChild(div); // append after containerTitle
        containerContent.appendChild(diva); //append after containerContent 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:46:54.563

尝试关注

```
 <head>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">

        google.load("feeds", "1");

        function initialize() {
          var feed = new google.feeds.Feed("http://encompassme.com/rss/posts/en.xml");
          feed.setNumEntries(2);
          feed.load(function(result) {
            if (!result.error) {

             var mastercontainer=document.getElementById("master");
          //  var containerTitle = document.getElementById("title");
           // var containerContent = document.getElementById("content");

              for (var i = 0; i < result.feed.entries.length; i++) {
                var entry = result.feed.entries[i];

                var div = document.createElement("div");
                var diva = document.createElement("div");

                div.appendChild(document.createTextNode(entry.title)); 
                diva.appendChild(document.createTextNode(entry.content)); 

                mastercontainer.appendChild(div);
                mastercontainer.appendChild(diva);

              }

            }
          });
        }
        google.setOnLoadCallback(initialize);

        </script>
      </head>

  <body>
  <div id="entry">
    <div id="master"></div>

   </div> 
  </body>
</html> 
```

# c# - 有没有办法通过覆盖关闭按钮来隐藏控制台？

> ID：14585438
> 
> 赞同：0
> 
> 时间：2013-01-29T14:39:12.547
> 
> 标签：c#, wpf, console

我正在制作一个 C# WPF 应用程序。我可以通过 C 导入函数隐藏/显示控制台（如[显示/隐藏 C# 控制台应用程序的控制台窗口](https://stackoverflow.com/questions/3571627/show-hide-the-console-window-of-a-c-sharp-console-application)）。有没有办法通过覆盖关闭按钮来隐藏控制台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:56:08.133

您应该考虑使用 Console.SetOut 并在窗口上显示输出：[Console.SetOut](http://msdn.microsoft.com/de-de/library/system.console.setout.aspx)

然而，最好的方法是使用一些不错的日志记录机制而不是控制台。

# r - 一张图中两个随机效应的点图

> ID：14585439
> 
> 赞同：4
> 
> 时间：2013-01-29T14:39:18.603
> 
> 标签：r, lme4

如果我制作一个具有两个随机效应的简单混合效应模型：

```
library(lme4)
(fm3 <- lmer(strength ~ 1 + (1 | batch) + (1 | sample), Pastes)) 
```

我可以像这样访问随机效果：

```
ranef(fm3)
ranef(fm3)$batch
ranef(fm3)$sample 
```

我没有设法将随机效应绘制在两个彼此相邻的单独点图中。以下代码确实绘制了两个图，但我不管理重新编码，以便我可以分别绘制每个图：

```
dotplot(ranef(fm3, postVar=TRUE)) 
```

以下对我来说似乎是合乎逻辑的，但它是不正确的

```
dotplot(ranef(fm3, postVar=TRUE)$batch) 
```

感谢所有帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:26:37.913

以下代码可以解决问题：

```
print((dotplot(ranef(fm3, postVar=TRUE))$sample), position=c(0, .5, 1, 1), more=TRUE)
print((dotplot(ranef(fm3, postVar=TRUE))$batch), position=c(0, 0, 1, .5) 
```

它来自于这样的认识，即绘制两个随机效应之一的预测区间可以通过以下方式完成：

```
(dotplot(ranef(fm3, postVar=TRUE))$sample) 
```

和

```
(dotplot(ranef(fm3, postVar=TRUE))$batch) 
```

我上面提出的建议是错误的（`dotplot(ranef(fm3, postVar=TRUE)$batch)`即使它确实产生了一些东西）。@juba：感谢您将我指向格子。我找到的组合情节的解决方案更简洁......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:27:57.760

您遇到的问题是`ranef()`将分析结果存储为列表，而不是数据框。您正在尝试访问此列表，就像访问数据框一样，这就是它不起作用的原因。诀窍是使用方括号 with`dotplot`来访问列表。然后你可以`grid.arrange`用来快速组合你的情节（或者你可以使用@juba 解决方案）。

```
library(lme4)
fm3 <- lmer(strength ~ 1 + (1 | batch) + (1 | sample), Pastes)
d1 <- ranef(fm3, postVar=TRUE)
#double square bracket access the lists in d1
a <- dotplot(d1)[["batch"]]
b <- dotplot(d1)[["sample"]]
#grid.arrange combines your plots
library(gridExtra)
grid.arrange(a,b, nrow=1) 
```

![在此处输入图像描述](../Images/cbf6bc5a7707a79916231a93ce126150.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:43:16.543

作为包`dotplot`的一部分`lattice`，您必须在一个图表上使用`grid.layout`并`viewports`显示多个图。

这是一种并排显示两个点图的方法，但是由于我对它很陌生，`lattice` 所以肯定有一种更好，更清洁的方法：

```
grid.newpage()
pushViewport(viewport(0.25,0.5,.5,1))
print(dotplot(rnorm(100)),newpage=FALSE)
upViewport()
pushViewport(viewport(.75,.5,.5,1))
print(dotplot(runif(100)),newpage=FALSE) 
```

这使 ：

![在此处输入图像描述](../Images/2906bbb6852340b3f90375f9468bf4f2.png)

# sql - 确保表统计信息在 PostgreSQL 中是最新的

> ID：14585446
> 
> 赞同：3
> 
> 时间：2013-01-29T14:39:44.830
> 
> 标签：sql, database, postgresql, database-design, relational-database

我们将[使用 PostgreSQL 中的一个系统表](https://stackoverflow.com/questions/14570488/how-do-i-speed-up-counting-rows-in-a-postgresql-table)来获取几个表的行数估计值。我知道要使这些估计更好，统计数据需要更新；[此处](http://wiki.postgresql.org/wiki/Slow_Counting)的 wiki声明应确保“您已经`ANALYZE`在桌面上运行了足够多的数据以使这些统计信息保持最新”。

我们预计某些表格最终会被频繁地写入或更新（例如，我的大致目标是每秒大约 150 次 - 这对我来说“相当频繁”，但我不确定这在现实生活中是否合格数据库）。计数应该每秒发生一次，我会说它们有必要返回一个值，该值反映表中更改的行数具有一定程度的准确性（即，如果数字确实会很奇怪如果在此期间有很多插入，几秒钟后不会改变）。

什么是“足够”的好价值？有什么方法可以自动运行`ANALYZE`表吗？如果需要更多信息，请说出来，我会尽快编辑帖子。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:07:53.137

[`AutoVacuum`](http://www.postgresql.org/docs/9.2/static/routine-vacuuming.html#AUTOVACUUM)应该能够处理你想要做的事情。如果它正在运行，您可以调整参数`autovacuum_analyze_threshold (integer)`以`postgresql.conf`满足您的需要。

根据[文档](http://www.postgresql.org/docs/9.2/static/runtime-config-autovacuum.html)：

> **autovacuum_analyze_threshold（整数）**
> 
> 指定在任何一个表中触发 ANALYZE 所需的最小插入、更新或删除元组数。默认值为 50 个元组。此参数只能在 postgresql.conf 文件或服务器命令行中设置。可以通过更改存储参数来覆盖单个表的此设置。

请记住，该数字并不能保证它运行的频率，只是一个最低阈值。与大多数配置选项一样，最好使用多个值进行一些测试，以获得准确性和性能之间的最佳平衡，并确保它满足您的需求。

# comments - 可以更改评论的数量/顺序吗？

> ID：14585449
> 
> 赞同：0
> 
> 时间：2013-01-29T14:39:49.387
> 
> 标签：comments, powerpoint-2010

我想在一些显示事件流的 PowerPoint 幻灯片上使用注释（带有我的首字母和数字的小标记），以提供事件发生顺序的指示，并且 - 因为当将鼠标悬停在标记上时会弹出注释 - 同时为每个事件提供简短的解释。

然而，由于一些编辑，数字最终是不连续的，它们也不是以 1 开头，而是系列以 3 开头。因此我的问题是：可以控制用于这些评论的顺序和数字吗？即：一个。如何控制起始编号？湾。如何重新排序（或重新分配）评论编号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:04:24.587

我实际上改变了我的整个方法，并使用[这个](http://www.pptfaq.com/FAQ00691_Use_VBA_to_create_popup_text.htm)非常有用的描述来使用 VBA 宏创建鼠标悬停弹出窗口。它工作得很好。我唯一的愿望是，当用鼠标离开该区域时，自动创建的文本框也会再次自动消失（而不必点击它们）......

# c++ - C级警告

> ID：14585451
> 
> 赞同：-5
> 
> 时间：2013-01-29T14:39:52.430
> 
> 标签：c++, c, visual-studio-2010

> **可能重复：**
> [Visual Studio 警告级别的含义？](https://stackoverflow.com/questions/644011/visual-studio-warning-level-meanings)

用 MSVC 编译器编译 C 代码后，我们得到警告列表。

我看到根据我的警告列表，警告分为 1、2、3 和 4 级。

我的问题是：

警告级别是否表示警告的严重性？

如果是，哪个级别更严重？1级还是4级？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:41:39.210

来自[http://msdn.microsoft.com/en-us/library/thxezb7y.aspx](http://msdn.microsoft.com/en-us/library/thxezb7y.aspx)：

> *   0 级禁用所有警告。
> *   1 级显示严重警告。级别 1 是默认设置。
> *   级别 2 显示所有级别 1 警告和低于级别 1 严重程度的警告。
> *   级别 3 显示所有级别 2 警告和建议用于生产目的的所有其他警告。
> *   级别 4 显示所有级别 3 警告和信息警告。我们建议您仅使用此选项来提供类似 lint 的警告。但是，对于一个新项目，最好在所有编译中使用 /W4；这将确保尽可能少的难以发现的代码缺陷。

# c# - 将查询数据存储在变量中

> ID：14585453
> 
> 赞同：1
> 
> 时间：2013-01-29T14:39:52.393
> 
> 标签：c#

我想知道如何遍历下面的查询并将值存储在不同的变量中 下表向我们展示了查询中输出的数据，并将每个值存储在 str1、str2、str3 中

```
sortByColumn |   numberOfRow  |  coloumnsInExcel
8            |    10          |       10

var queryAD1 = (from m in configurationData.AsEnumerable()
                              where m.Field<String>("QuestionStartText") == question && m.Field<String>("slideNo") == Convert.ToString(slideNumber)
                             group m by m.Field<String>("slideNo") into A123Group
                             select new {
                                 sortByColumn = A123Group.Select(sorted => sorted.Field<String>("SortByColumn")).Distinct(),
                                 numberOfRow = A123Group.Select(sorted => sorted.Field<String>("NoOfRows")).Distinct(),
                                 coloumnsInExcel = A123Group.Select(sorted => sorted.Field<String>("ColumnInExcel")).Distinct(),
                             }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:42:45.140

你是这个意思吗？

```
foreach (var query in queryAD1)
{
    str1 = query.sortByColumn;
    str2 = query.numberOfRow;
    str3 = query.coloumnsInExcel;

    //do something with the variables...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:46:30.223

你试过了吗

```
queryAD1.sortByColumn
queryAD1.numberOfRow
queryAD1.columnsInExcel 
```

# endianness - 根据大端或小端加载mat文件unicode

> ID：14585456
> 
> 赞同：1
> 
> 时间：2013-01-29T14:39:54.607
> 
> 标签：endianness

我正在尝试将 matlab 结构从 .mat 文件转换为 python dict。我使用 scipy.io 模块来做到这一点。其实我有一些麻烦。对于 mat 文件中包含的相同数据，loadmat 函数返回一个 unicode，该 unicode 取决于 mat 文件的生成方式（Windows 操作系统或 Linux/Inux 操作系统）我认为这是大端还是小端的问题（我不确定)

你能帮我吗

# matlab - 警告：排名不足，MATLAB

> ID：14585472
> 
> 赞同：3
> 
> 时间：2013-01-29T14:40:47.493
> 
> 标签：matlab, matrix

我收到一条错误消息：

```
Warning: Rank deficient, rank = 1, tol =  3.845925e-13\. 
In ed1 at 38 

Warning from ed1 at 38
 pf2(i)= length (find(sum((y)/(sqrt(NV))).^2)/(n<Tgam))/1000000; 
```

`[y1,y2,y3,y4]= ed1(1,1,20,2);`在命令提示符中运行以下代码类型。导致此错误的行是`pf2(i)`和`pd2(i)`

```
function [y1,y2,y3,y4]= ed1(SNRL,SNRS,SNRH,n) %ed is the energy detection
g1= SNRL:SNRS:SNRH;
g=10.^(g1/10); %SNR
beta=0.8; % is the probability pfa, it cannot be more than 1

pf1=zeros(1,length(g));
pd1=zeros(1,length(g));
pf2=zeros(1,length(g));
pd2=zeros(1,length(g));
x=zeros(n,1000000);
y=zeros(n,1000000);
NV=zeros(n,1000000);

for a= 1:g %diff SNR
for b= 1:n %DIFF USERS,users are columns 
            NV(a,b)=1*b ;%assigning a value to the element of the matrix.
end
end

for i=1 : g %samples

for j=1:n       %diff users. 
 %NV=ones(1000000,n);
    x(j,:)=randn(1,1000000)*sqrt(NV(i,j));  
    y(j,:)=randn(1,1000000)*sqrt(g(i)/NV(i,j))+x(j,:);

end

 %Tgam is the threshold of gamma distribution 
 Tgam = gaminv((1-beta),n/2,(2/n)*(1+(g(i)/NV(i,j)))); %probab of flase detection;

 pf2(i)= length (find(sum((y)/(sqrt(NV))).^2)/(n<Tgam))/1000000;
 pd2(i)= length (find(sum(x/sqrt(NV)).^2)/n<Tgam)/1000000; 

 y1=pf1; y2=pd1; y3=pf2; y4=pd2;
end 
```

有什么建议是什么原因造成的？以及如何解决。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:52:10.677

在行

```
pf2(i)= length (find(sum((y)/(sqrt(NV))).^2)/(n<Tgam))/1000000; 
```

您真的要执行矩阵除法吗？如果您对元素划分感兴趣（即第一个元素`y`除以`sqrt(NV)`等的第一个元素，您应该使用`./`：

```
pf2(i)= length (find(sum((y)./(sqrt(NV))).^2)/(n<Tgam))/1000000; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:52:01.890

您正在使用`/`（矩阵右除法），而您可能的意思是`./`（右除法）。

至于错误消息的解释，请参阅 EitanT 的评论。

# ios - Xcode 警告“分析：无效的幻数”

> ID：14585477
> 
> 赞同：25
> 
> 时间：2013-01-29T14:41:09.533
> 
> 标签：ios, xcode, ocunit, xcode4.6

我刚刚安装了 Xcode 4.6。当我现在运行我的 OCUnit 测试时，在所有测试完成后，我会在输出窗口中看到多行带有“profiling：invalid magic number”的行。我很确定 Xcode 4.5.2 没有给我那个输出。

有人知道这条线是什么意思吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-30T14:14:22.817

经过一番谷歌搜索后，我发现了这个 LLVM 源文件[GCDAProfiling.c](https://llvm.org/svn/llvm-project/compiler-rt/trunk/lib/profile/GCDAProfiling.c)

从那里我可以看到，当分析器尝试合并两个文件但其中一个文件具有不同的版本（=幻数）时，在代码覆盖生成期间会打印错误。

我做了一个完整的清理（它也删除了所有`gcda`文件），问题就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:19:12.640

最终不得不为我的应用程序删除适当的 DerivedData 文件夹 -

~/库/开发者/Xcode/DerivedData/#application-name#

但这最终清除了一切。

# java - 如何让一个执行者等待另一个？

> ID：14585480
> 
> 赞同：-1
> 
> 时间：2013-01-29T14:41:22.863
> 
> 标签：java, runnable

我有两个任务，一个用于下载，另一个用于解压缩；

```
public class DownloadUtil {

    public static void downloadHtml(MainViewController controller, String dns, int port, String offlineUUID, String filePath, Map<String, String> cookies) throws IOException {

        String urlHtml = "http://" + dns + ":" + port + Constants.TARGET_SERVICE_DOWNLOADFILES + offlineUUID;

        System.out.println(urlHtml);

        Executors.newSingleThreadExecutor().execute(new DownloaderTask(controller, urlHtml, filePath, cookies));
    } 
```

和

```
public class UnzipUtil {

    public static void unZipIt(String zipFile, String outputFolder) {

        Executors.newSingleThreadExecutor().execute(new UnzipTask(zipFile, outputFolder));
    }
} 
```

我在我的代码中这样称呼它们：

```
DownloadUtil.downloadHtml(this, dns, port, uuid, filePathHtmlDownload, cookies);
UnzipUtil.unZipIt(filePathHtmlDownload, outputFolder); 
```

但问题是 Unzip 方法在下载方法完成之前调用，我该怎么做才能 unZipIt 等待 downloadHtml 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:49:33.270

将相同的内容传递`SingleThreadExecutor`给两种方法。然后，您的任务将由`Executor`.

```
Executor e = Executors.newSingleThreadExecutor();
DownloadUtil.downloadHtml(e, this, dns, port, uuid, filePathHtmlDownload, cookies);
UnzipUtil.unZipIt(e, filePathHtmlDownload, outputFolder); 
```

你的方法现在看起来像：

```
public class DownloadUtil {

public static void downloadHtml(Executor e, MainViewController controller, String dns, int port, String offlineUUID, String filePath, Map<String, String> cookies) throws IOException {

    ...

    e.execute(new DownloaderTask(controller, urlHtml, filePath, cookies));
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T14:45:46.647

看看[CountDownLatch](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)。这将对您的情况有所帮助。您可以为两个线程创建一个闩锁，下载完成后您可以执行`countDown()`。在解压缩的开头，您可以放置​​类似`latch.await()`. 因此，只有在下载完成后才会开始解压缩。

# bash - 将 bash 变量传递给 awk 以提取特定位置的字符

> ID：14585483
> 
> 赞同：2
> 
> 时间：2013-01-29T14:41:28.963
> 
> 标签：bash, awk, character, extract

我正在使用以下命令从字符串中的某些位置提取字符：

```
left=1; right=4; grep ETM21CH01EPU3Z -A1 SLf_454.fna | tail -n 1 | awk '{print substr($0,1,4)}' 
```

并得到这个正确的输出：

```
GTTG 
```

现在我想用bash 变量**left**和**right中的值替换****1**和**4**。

 ****我试过这个：

```
left=1; right=4; grep ETM21CH01EPU3Z -A1 SLf_454.fna | tail -n 1 | awk -v l=$left r=$right '{print substr($0,l,r)}' 
```

awk：命令。行：1：致命：无法打开文件 `{print substr($0,l,r)}' 进行读取

请问有什么建议吗？谢谢。

编辑：从下面的评论中复制，所以我们可以实际阅读它：

好吧，我还有一个文件，其中写有要搜索的内容（例如 ETM21CH01EPU3Z）和位置。所以整个代码是：

```
while read -r line; do
   echo $line;
   name=`echo $line | cut -d' ' -f 1`;
   left=`echo $line | cut -d' ' -f 2`;
   right=`echo $line | cut -d' ' -f 3`;
   grep $name -A1 SLf_454.fna | tail -n 1 | awk -v l=$left -v r=$right '{print substr($0,l,r)}';
done < CL6o_blastoutput_SLf_454.fna_out 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:49:02.927

@dogbane 为您提供了您要求的具体答案，但您不需要那长长的命令和管道链，只是在找到某种模式后打印该行的前 4 个字符。试试这个：

```
left=1; right=4; awk -v l="$left" -v r="$right" 'f{print substr($0,l,r);f=0} /ETM21CH01EPU3Z/{f=1}' SLf_454.fna 
```

显然，如果这就是您使用它们的全部，您也不需要左右 shell 变量：

```
awk -v l="1" -v r="4" 'f{print substr($0,l,r);f=0} /ETM21CH01EPU3Z/{f=1}' SLf_454.fna 
```

编辑：我将您的命令复制到您的原始问题中，以便我们可以阅读您的脚本。

试试这个（未经测试）：

```
awk -F, '
NR==FNR { left[$1]=$2; right[$1]=$3; next }
{
   for (name in found) {
      print substr($0,left[name],right[name])
      delete found[name]
   }
   for (name in left) {
      if ($0 ~ name) {
         found[name]
      }
   }
}
' CL6o_blastoutput_SLf_454.fna_out SLf_454.fna 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:43:41.750

您在变量`-v`之前缺少 a 。`right`您要传入的每个变量都`awk`必须以`-v`.

将其更改为：

```
awk -v l=$left -v r=$right '{print substr($0,l,r)}' 
```****

# java - Java 7 | 使用 Proguard 4.8 进行混淆

> ID：14585485
> 
> 赞同：0
> 
> 时间：2013-01-29T14:41:39.003
> 
> 标签：java, maven, obfuscation, proguard

我正在尝试使用 Proguard 4.8 混淆我在 java 7 中的项目。

这是我的 Maven 插件配置：

```
 <plugin>
            <groupId>com.pyx4me</groupId>
            <artifactId>proguard-maven-plugin</artifactId>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>proguard</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <proguardVersion>4.8</proguardVersion>
                <obfuscate>true</obfuscate>

                <options>
                    <option>-ignorewarnings</option>
                    <option>-dontshrink</option>
                    <option>-dontoptimize</option>
                    <option>-allowaccessmodification</option>
                    <option>-keep class !ua.com.sintez.exceptions.** { *; }</option>
                </options>
                <injar>${project.build.finalName}.jar</injar>
                <outjar>${project.build.finalName}-proguard.jar</outjar>
                <outputDirectory>${project.build.directory}</outputDirectory>
                <libs>
                    <lib>${java.home}/lib/rt.jar</lib>
                    <lib>${java.home}/lib/jsse.jar</lib>
                </libs>
                <addMavenDescriptor>false</addMavenDescriptor>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>net.sf.proguard</groupId>
                    <artifactId>proguard</artifactId>
                    <version>4.8</version>
                    <scope>runtime</scope>
                </dependency>
            </dependencies>
        </plugin> 
```

我试图混淆只有一个包“ua.com.mycompany.exceptions”，看看它是否有效。该软件包不包含任何有关 JPA 的内容。persistence.xml 就在它的位置，所有实体都在那里。但是当我启动程序时，我收到以下错误：

```
 The collection of metamodel types is empty. Model classes may not have been found during entity search for Java SE and some Java EE container managed persistence units.<br/> 
java.lang.IllegalArgumentException: Unknown entity bean class: class ua.com.mycompany.entity.Currency, please verify that this class has been marked with the @Entity annotation.<br/> 
java.lang.IllegalArgumentException: An exception occurred while creating a query in EntityManager: Exception Description: Problem compiling [select count(p) from Product as p]. 
The abstract schema type 'Product' is unknown. 
```

所以我有以下问题：

1.  该错误的原因可能是什么？
2.  proguard配置错了吗？
3.  我也收到了很多这样的：`Note: duplicate definition of library class ...`和许多这样的警告：`Warning:net.sf.jasperreports.compilers.JavaScriptEvaluator: can't find referenced class org.mozilla.javascript.Context`。
    可以吗，如果可以，我该如何抑制它？

# bash - Bash 脚本 if 语句后跟多个 OR

> ID：14585488
> 
> 赞同：2
> 
> 时间：2013-01-29T14:41:46.230
> 
> 标签：bash, shell, if-statement

我有一个问题，我想要一个 if 语句来确保第一个语句为真，并且以下三个语句中的一个或多个在 bash 脚本中也为真。

我目前拥有的代码是：

```
if [[ $TAIL != "true" ]] && [[ -f $FILE_DIR/.completed ]] || [[ -f $FILE_DIR/../.completed ]] || [[ -f $FILE_DIR/../../.completed ]] 
```

我也试过：

```
if [[ $TAIL != "true" ]] && [[ [[ -f $FILE_DIR/.completed ]] || [[ -f $FILE_DIR/../.completed ]] || [[ -f $FILE_DIR/../../.completed ]] ]] 
```

但两者都不起作用。

有人对如何解决这个问题有任何想法吗？

提前感谢您的帮助。

答案如下图：

```
if [[ $TAIL != "true" ]] && ( [[ -f $FILE_DIR/.completed ]] || [[ -f $FILE_DIR/../.completed ]] || [[ -f $FILE_DIR/../../.completed ]] ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:11:32.647

您可以在一个 [[]] 中完成所有操作：

```
if [[ $TAIL != "true" && ( -f $FILE_DIR/.completed || -f $FILE_DIR/../.completed || -f $FILE_DIR/../../.completed ) ]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:44:58.260

您可以用括号对 OR 语句进行分组：

```
if [[ $TAIL != "true" ]] && ( [[ -f $FILE_DIR/.completed ]] || [[ -f $FILE_DIR/../.completed ]] || [[ -f $FILE_DIR/../../.completed ]] ) 
```

# php - 提交表单数据问题

> ID：14585489
> 
> 赞同：0
> 
> 时间：2013-01-29T14:42:00.893
> 
> 标签：php, javascript, html

好的，超级简单，我相信它会在 10 分钟内解决。

我有一个表单，很好，表单将数据提交到我服务器上的 PHP 文件（然后将其发送到 MYSQL 数据库并重定向页面）

提交按钮实际上是一个普通的按钮，我已经给出了提交代码。这是停止“输入提交表单”问题的最佳方法，我不需要禁用输入，只需停止提交即可。

我第一次使用该按钮时，它工作正常，发送数据，重定向发生得很好。

如果我返回该页面并再次提交，PHP 脚本将不会执行任何操作，我会得到通用数据提交页面。

```
<input type="button" style="position:absolute; left:639px; top:1669px; width:81px; height:22px; /*Tag Style*/"       id="butn_7" value="Submit" onclick="submit()" __AddCode="here"> 
```

那是我正在使用的按钮，如果我使用普通的提交按钮，它会一遍又一遍地正常工作，但我遇到了 Enter 提交表单的烦人问题。

这是表格标题

```
<form id="form_28" name="egumemsurvey" onsubmit="return validate_form_28(this)" action="http://mrrsystems.net/blerg.php" accept-charset="UTF-8" method="post" target="_self" enctype="multipart/form-data" style="margin:0px; /*MainDivStyle*/" __AddCode="here"> 
```

有什么想法可能导致这种情况吗？

干杯

稻田

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:02:35.263

如果需要显示结果，在返回页面时，需要将结果发送到页面。如果你想验证你的表单，那么你需要停止表单提交；使用 js-validation 检查表单或将您的数据发送到服务器，当检查结果出现时，您可以提交表单，或向用户显示错误。

# mercurial - 如何设置从 Windows 和 Linux 克隆的 mercurial 子存 储库

> ID：14585491
> 
> 赞同：1
> 
> 时间：2013-01-29T14:42:01.767
> 
> 标签：mercurial

我在 Linux 机器上有以下存储库结构：

```
-- source_control
    -- projects
        project1
        project2
        ...
    -- repositories
        repo1
        repo2
        repo3
        ... 
```

这意味着我有一个`source_control`目录，其中包含两个名为`projects`and的嵌套目录`repositories`。该`repositories`目录包含“简单”存储库（即，没有子存储库的存储库）并`projects`包含只是薄层的存储库并包含`repositories`目录中的子存储库。

现在我在各种项目中的 .hgsub 文件看起来像这样：

```
repo1 = /mnt/network/drive/source_control/repositories/repo1
repo2 = /mnt/network/drive/source_control/repositories/repo2 
```

等等。现在，由于所有开发人员都在安装了相同网络驱动器的 linux 机器上工作，所以这非常有效。但是，我们现在也需要在 Windows 上工作。这会导致一些问题，因为 Windows 机器无法访问 subrepos 路径（网络驱动器可以从 Windows 机器访问，它们只是使用不同的路径）。

我尝试将`.hgsub`文件更改为：

```
repo1 = ../../repositories/repo1
repo2 = ../../repositories/repo2 
```

但这不起作用（当我提交`.hgsub`文件时，子存储库为空）。

我也尝试在 HTTP 中提供存储库，但它大大减慢了速度，我想找到一种更好的方法（所有机器都在本地网络中）。在我的中使用相对路径的正确方法是什么，`.hgsub`以便我可以在 Windows 和 Linux 机器上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:46:45.063

根据[Mercurial](http://mercurial.selenic.com/wiki/Subrepository#Nested_repository_subpaths) wiki，让它与一个全新的存储库一起工作的方法是：

```
$ echo repo1 = ../../repositories/repo1 > .hgsub
$ hg clone ../../repositories/repo1
; here you could update to whichever version you wanted
$ hg add .hgsub
$ hg commit -m "New relative subrepo added" 
```

然后克隆主存储库也会克隆子存储库，因为路径是相对的。它适用于我的 Windows 机器，所以你的想法基本上是正确的。

在您的实例中，我认为提交修改`.hgsub`的内容是清除目录，因为您已经重新定义了子存储库指向的内容（我不知道这种行为是否是设计使然）。因此，也许在您提交之前，您可以自己删除整个子目录并重新克隆：

```
; modify .hgsub as above
$ rm -rf repo1
$ hg clone ../../repositories/repo1
$ hg commit -m "Made repo1 relative" 
```

这样做可能意味着更新人员需要再次拉下整个子存储库，或者他们甚至可能需要重新克隆整个项目，但之后它应该“正常工作”。

当然，首先在测试项目上尝试一下，以确保:)

# joomla - 在 Joomla 2.5 上启用 JSmallfib 时，“已弃用：调用时传递引用已被弃用”

> ID：14585494
> 
> 赞同：0
> 
> 时间：2013-01-29T14:42:10.583
> 
> 标签：joomla, joomla-extensions

我正在尝试在 Joomla 2.5 上使用 JSmallfib PRO。安装成功，但是当我尝试启用插件时遇到错误

> 已弃用：第 220 行的 C:\wamp\www\Clap\plugins\content\jsmallfib\jsmallfib.php 中已弃用调用时传递引用

...在前端和后端。

这是正常的吗？如果不是，我应该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:45:25.047

在第 220 行将 (&$article) 更改为 ($article)。同样在第 447、686、3518 和 3678 行将 &= 更改为 =。换句话说，删除传递引用运算符 (&)，因为这是 php 自 php5 以来的默认行为。

# c# - 在 Blogger 上发布帖子

> ID：14585502
> 
> 赞同：0
> 
> 时间：2013-01-29T14:42:30.053
> 
> 标签：c#, windows-runtime, google-api, blogger

我目前正在使用以下库来执行我对 Blogger 的 API 请求（[http://code.google.com/p/google-api-dotnet-client/wiki/Downloads?tm=2](http://code.google.com/p/google-api-dotnet-client/wiki/Downloads?tm=2)）。

然而，在这个库中几乎没有关于 Blogger API 的文档，而且据我所见，没有使用该库与博客站点交互的示例。

如何使用这个库来实现将新帖子发布到用户博客的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:22:59.390

您是否尝试过使用 Blogger Atom Api 版本，使用 Atom api / feeds 将内容发布到 Blogger 非常简单

要在博客上创建新帖子，请按如下方式创建请求

POST /atom/3187374 HTTP/1.1 内容类型：application/xml 主机：www.blogger.com 授权：BASIC c3RldmVqOm5vdGFyZWFscGFzc3dvcmQ=

atom test 2004-04-12T06:07:20Z 你的客户的名字在这里。测试 Atom API

如果您需要任何第三方软件来创建博客文章，您可以参考此文档 [http://webtoolsin.wordpress.com/2013/02/08/get-rss-to-blogger-script/](http://webtoolsin.wordpress.com/2013/02/08/get-rss-to-blogger-script/)

# set - Scala 2.9：在 Set 内联上使用 toArray 的任何方式

> ID：14585504
> 
> 赞同：1
> 
> 时间：2013-01-29T14:42:33.000
> 
> 标签：set, inline-code, scala-2.9, toarray

如果我的问题的答案已经在这里，请链接它......我确实看过。

我正在学习一些教程，这段代码让我有点奇怪：

```
val my_set = Set("one","two","three")
println("First Value:" + my_set.toArray(0)) 
```

从命令行运行时导致此错误：

```
$ scala settoarray.scala 
/Users/rwheadon/devStuff/scala_sandbox/so_settoarray.scala:2: error: type mismatch;
found   : Int(0)
required: ClassManifest[?]
println("First Value:" + my_set.toArray(0))
                                        ^
one error found 
```

我用谷歌搜索并搜索了一些关于提供 ClassManifest[?] 要求的方向，但无法内联工作。

出于好奇，我尝试将相同的简单 toArray() 放入 val 并成功拉出数组绑定：

代码：

```
val my_set = Set("one","two","three")
val my_arry = my_set.toArray
println("First Value:" + my_arry(0)) 
```

从控制台运行：

```
$ scala so_settoarray.scala 
First Value:one 
```

我想知道的是，在尝试像 my_set toArray(0) 这样的快速内联转换以快速打印第一个元素时，是否需要添加一些东西？如果我*必须*设置变量的结果，我可以很容易地接受这一点，但我的猜测是我在这里遗漏了一些小点，以使内联数组强制转换工作。

（...... Scala**很**神奇，对吧？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:14:31.323

该`toArray`方法采用 type 的隐式参数`ClassManifest[A]`，其中`A`是元素类型。如果你把它叫做 like `mySet.toArray(0)`，编译器会认为你想显式地传递隐式参数，然后抱怨它没有正确的类型。为了避免这种情况，你可以这样写：

```
mySet.toArray.apply(0) 
```

# java - JPA 和 Guice-persist：永久打开的连接问题？

> ID：14585505
> 
> 赞同：1
> 
> 时间：2013-01-29T14:42:45.077
> 
> 标签：java, hibernate, jpa, entitymanager, guice-persist

使用 Hibernate、c3p0、Guice 和 Guice-persist，我们遇到了奇怪的问题，即事务后数据连接没有释放到池中。

似乎它与[JpaPersistService](http://code.google.com/p/google-guice/source/browse/extensions/persist/src/com/google/inject/persist/jpa/JpaPersistService.java)的完成方式有关，将 EntityManager 缓存在 threadLocal 变量中：

```
private final ThreadLocal<EntityManager> entityManager = new ThreadLocal<EntityManager>(); 
```

我的问题是：

*   我们是否应该删除 guice-persist 并将其替换为创建新 entityManager 的东西，然后在每次需要时关闭它（如此[处](http://javanotepad.blogspot.ch/2007/08/managing-jpa-entitymanager-lifecycle.html)建议）？
*   或者缓存 entityManager 是要走的路，我们应该用别的东西来解决我们的问题？

（我们的问题：1）mysqld在经典的8h超时后终止mysql连接，因此entityManager不再可用。可以通过开启c3p0 keep-alive来解决，但由于应用程序有时会长时间不使用，我们希望避免保持无用的活动连接。2）似乎每个EntityManager都做了一些缓存，entite在entityManager之间是不连贯的。没看怎么解决）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T10:45:24.640

终于找到了解决办法。

似乎这是 guice-persist 中的一个特殊错误。

如果 EntityManager 在事务外部`UnitOfWork`或外部注入，则会创建一个永不关闭的 EntityManager，从而导致奇怪的问题。

guice-persist 的文档并没有指出这一点。

解决方案是如果您不在事务`Provider<EntityManager>`或`EntityManager``UnitOfWork`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T16:06:58.523

我相信您遇到的问题和我遇到的一样：[Guice JPA - “此连接已关闭。” 错误](https://stackoverflow.com/questions/12915427/guice-jpa-this-connection-has-been-closed-error)

这在第 730 期中有很好的描述[：自动启动的 UnitOfWork 永远不会结束](http://code.google.com/p/google-guice/issues/detail?id=730)

> 使用 JpaPersistService 时，如果您尝试访问活动 UnitOfWork 之外的 EntityManager，Guice 将自动为您启动一个。然而，由于 Guice 不（也不可能）知道何时结束这个 UnitOfWork，所以它永远不会知道。
> 
> 结果？在应用程序的整个生命周期中，有问题的线程将被同一个 EntityManager 卡住。这对于应用程序运行来说是一个糟糕的状态，我们不可避免地会在一段时间后耗尽可用内存并崩溃。
> 
> 这里真正的杀手是当你犯了这个错误时一点都不明显。唯一真正的提示是您在不同线程之间从数据库中获取不一致的数据（由于 EM 一级缓存），或者应用程序的内存消耗不断增长。就我而言，是池中的活动连接让我怀疑它，然后，当我打开详细日志记录时，我注意到应用程序根本没有从池中借用连接，而是重用了已经持有的连接未关闭的EntityManager。

实际上，实际上报告了此问题的很多重复项：[http ://code.google.com/p/google-guice/issues/list?can=1&q=UnitOfWork](http://code.google.com/p/google-guice/issues/list?can=1&q=UnitOfWork)

因此，我认为注入 EntityManager 并没有多大用处。当您实际使用任何 EntityManager 方法时，就会出现问题。您只需要确保每个访问都在 UnitOfWork 内。如何做到这一点取决于您的应用程序。

# javascript - MongoDB 无法更新文档，因为 _id 是字符串，而不是 ObjectId

> ID：14585507
> 
> 赞同：8
> 
> 时间：2013-01-29T14:42:46.280
> 
> 标签：javascript, json, node.js, mongodb, bson

我正在做一个 rest api 来在 mongo 数据库和 web 应用程序之间交换数据。这些数据是 json 格式的。

我在更新文档时遇到了麻烦：

```
cannot change _id of a document. 
```

事实上，在我的 JSON 中，文档的 _id 存储为字符串并反序列化为字符串。而它在 mongo中存储为**ObjectID 。**这解释了为什么 mongo 会引发错误。

*   在mongo中：_id：ObjectId（'51051fd25b442a5849000001'）
*   在 JSON 中：_id:"51051fd25b442a5849000001"

为了避免这种情况，我手动将 _id 属性从**字符串**转换为**ObjectID**。但它看起来很难看，并且会与其他 BSON 类型一起失败。

**问：有没有一种干净的方法可以避免这种情况或进行良好的 JSON/BSON 转换？**

下面是我用来更新文档的代码。我将 nodejs 与 express 和 mongodb 与本机驱动程序一起使用。

```
exports.updateById = function(req, res) {
var id = req.params.id;
var map = req.body;

map._id = new ObjectID.createFromHexString( map._id); // Manual conversion. How to avoid this???

console.log( 'Updating map: ' + id);
console.log( 'Map: ' + JSON.stringify( map));

db.collection('maps', function(err, collection) {
    if(err) throw err;
    collection.update(
        {'_id': new BSON.ObjectID(id)}, map, {safe:true}, 
        function(err, result) {
            if (err) {
                console.log('Updating map err: ' + JSON.stringify( err));
                res.json( 500, {'message':'An error has occurred while updating the map', 'error': err});
            } else {
                console.log('Updating succeed');
                res.send(map);
            }
        }
    );
}); 
```

};

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T14:50:16.177

因为您不能修改该`_id`字段，所以更好的方法是简单地从您的对象中删除该字段，`map`而不是将其转换为 ObjectId。

所以这：

```
delete map._id; 
```

而不是这个：

```
map._id = new ObjectID.createFromHexString( map._id); 
```

如果您想返回更新的对象，就像您尝试使用的一样`res.send(map);`，您应该使用[`findAndModify`](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#findandmodify)而不是`update`这样您就可以访问生成的文档，而不仅仅是发布的内容。

# mysql - 更新（选择...）设置...

> ID：14585508
> 
> 赞同：2
> 
> 时间：2013-01-29T14:42:46.970
> 
> 标签：mysql, sql, nested, sql-update

我想更新通过 SELECT 语句返回的表的结果。

所以我想：

```
UPDATE (SELECT [a bunch of joins etc.]) SET thisRecord = 1 WHERE [blah blah] 
```

这对我来说似乎根本不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:45:29.743

尝试：

```
UPDATE Table1
SET column1 = t2.Column
FROM  table1 t1
JOIN (SELECT ... FROM ... lots of joins etc) t2
ON t1.id = t2.otherid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:46:43.420

做就是了：

```
UPDATE your table name SET thisRecord = 1 WHERE your_criteria = (SELECT [a bunch of joins etc.]) 
```

如果我很好地理解了你的问题，这就是你想要做的。

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:45:14.633

[文档](http://dev.mysql.com/doc/refman/5.0/en/update.html)说明了一切。你不能按照你的想法去做。但是，您可以做的是翻译您的内在选择

```
SELECT [a bunch of joins etc.] 
```

应用于要更新的​​表的条件。

# php - imagecreatefromjpeg 函数在 Firefox 中不起作用

> ID：14585509
> 
> 赞同：0
> 
> 时间：2013-01-29T14:42:46.837
> 
> 标签：php, firefox, imagecreatefrompng

我在应用程序中使用 gd 库函数并使用 imagecreatefromjpeg 保存创建的图像。奇怪的是，在 Chrome 中一切正常，但在 Firefox 中使用该应用程序时图像没有保存。

任何机构都可以给出任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:24:13.883

尝试清除浏览器的缓存以获得更新的结果。PHP是服务器端而不是客户端。

# mysql - 如何在 MySQL 中排除重复的报告地址？

> ID：14585512
> 
> 赞同：0
> 
> 时间：2013-01-29T14:43:05.630
> 
> 标签：mysql

我有一份公司的经销商名单。

每个都有邮政邮寄信息，例如`address1, address2, city, state, zip`. 我正在使用 MySQL 进行销售报告，并希望将其从报告中**排除**`duplicated addresses`，因此它只生成每个位置的列表。我无法从数据库中删除它，因为他们（设置它的人）使用它为同一经销商的每个联系人保留一行。

如何从报告中排除重复的行？（mysql伪代码）

```
Select address1,address2,city,state,zip from distributors_db
where address1 only exists once? 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:44:40.253

在 MySQL 中使用[`DISTINCT`](http://dev.mysql.com/doc/refman/5.1/en/select.html)关键字：

```
SELECT DISTINCT address1
     , address2
     , city
     , state
     , zip 
  FROM distributors_db 
```

# jquery - jQuery 声明式

> ID：14585516
> 
> 赞同：1
> 
> 时间：2013-01-29T14:43:37.247
> 
> 标签：jquery

因此，我现在多次需要为尚不存在的上下文定义 jquery 选择的能力。我想做的是建立一个jquery链并在未来的某个上下文中执行它们。

就像是

```
var $future = $.future().find('.stuff').each(function(v) {
    // do stuff
}).on('click', function(e) {
    // stuff
}).hide(); 
```

并且在未来的某个地方能够做到

```
$future(ctx); 
```

因此您可以将其传递给事件处理程序等

这将非常有用，`$.bind`因此您可以将 jquery 选择绑定到尚不存在的元素，并在它确实存在时发生。

当它获得类 showme 时显示一个元素。

```
$.bind('.showme', $.future().show()); 
```

想到的最后一个用途是当您尝试在同步代码中使事物异步时。因此，当元素存在时，您可以继续调用它，但调用代码不需要知道还没有真正的上下文。

这存在吗？如果不是我在宇宙中需要这种能力吗？如果它不存在，并且我在宇宙中并不孤单，也许我会刺伤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:25:03.563

它已经实施了。我想这就是你要找的东西 - [https://github.com/furf/jquery-future](https://github.com/furf/jquery-future)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:46:24.817

你不需要做任何这些。jQuery 已经有事件委托来支持处理 DOM 中尚不存在的元素的事件。

经典事件绑定通常是这样的：

```
$(...selector...).on('click', doSomething); 
```

这很容易理解为“当任何选定的元素被点击时，做某事”

jQuery 有一个事件委托形式：

```
$(...selector...).on('click', ...sub-selection..., doSomething); 
```

在事件委托格式中，事件实际上是绑定到 中匹配的元素`...selector...`，但只有当它的任何匹配的子元素`...sub-selection...`被点击时才会触发。触发事件时会进行检查，因此匹配选择器的新元素也会触发该`doSomething`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:47:48.490

你可以创建一个这样的函数

```
function doStuffLater(e){
 $(body).on(e,".stuff",function(){
   $(this).each(function(v){ /*do stuff*/ }).hide();
 });
} 
```

你可以稍后调用 doStuffLater(ctx);

# c# - 无论 URL 如何，我如何路由到 /Home/Index 操作？

> ID：14585519
> 
> 赞同：0
> 
> 时间：2013-01-29T14:43:44.420
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing

我正在寻找一种将所有流量路由到我的 Home 控制器和 Index 操作的方法，而不管它们用于到达我的站点的 URL 是什么。

只要他们使用 www.MyDomain.com，访问 www.MyDomain.com/Controller1/Action1 的用户就需要与访问 www.MyDomain.com/Controller2/Action3/ID6 的用户都被路由到相同的操作

我可以手动重定向其中的每一个，但某些 URL 可能是动态生成的，因此我需要学习如何捕获所有内容并重定向。

非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:18:58.147

设置路由时，您可以尝试将默认路由定义为**最后一个**路由定义

```
 routes.MapRoute(
        "Default",
        "{*any}",
        new { controller = "Home", action = "Index" }
    ); 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:47:42.257

您的解决方案的根目录中存在一个文件`Global.asax.cs`，其中编写了路由逻辑，请根据您的要求修改逻辑。

# c# - 按值过滤 linq 查询

> ID：14585520
> 
> 赞同：1
> 
> 时间：2013-01-29T14:43:44.887
> 
> 标签：c#, linq

如果我有以下查询：-

```
var Values = from data in DtSet.Tables["tblCosts"].AsEnumerable()
            group data by new
            {
                InvNo = data.Field<double>("InvoiceNo"),
                AccRef = data.Field<double>("SiteRefNum"),
            }
            into g
            select new
            {
                Code = "1",
                InvType = "I",
                Account = g.Key.AccRef,
                InvNo = g.Key.InvNo,
                ChargeTotal = g.Sum(d => d.field<double>("Charge")
            }; 
```

...排除 ChargeTotal 列总和为零的行的最佳方法是什么？我假设我必须使用 a `WHERE`，但我不确定在哪里放置它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:45:49.657

您没有很多解决方案，因为`where`必须在`group by`（取决于组）之后调用，然后：

```
var Values = from data in DtSet.Tables["tblCosts"].AsEnumerable()
             group data by new
             {
                 InvNo = data.Field<double>("InvoiceNo"),
                 AccRef = data.Field<double>("SiteRefNum"),
             }
             into g
             let sum = g.Sum(d => d.field<double>("Charge"))  // Sum only computed once
             where sum != 0
             select new
             {
                 Code = "1",
                 InvType = "I",
                 Account = g.Key.AccRef,
                 InvNo = g.Key.InvNo,
                 ChargeTotal = sum
             }; 
```

为了稍微提高性能（您必须测试两者以查看是否有任何性能改进，因为它高度依赖于数据），如果 d.field("Charge") 始终 >= 0，您可以执行以下操作：

```
var Values = from data in DtSet.Tables["tblCosts"].AsEnumerable()
             group data by new
             {
                 InvNo = data.Field<double>("InvoiceNo"),
                 AccRef = data.Field<double>("SiteRefNum"),
             }
             into g
             where g.Any(d => d.field<double>("Charge") != 0)  
             select new
             {
                 Code = "1",
                 InvType = "I",
                 Account = g.Key.AccRef,
                 InvNo = g.Key.InvNo,
                 ChargeTotal = g.Sum(d => d.field<double>("Charge"))
             }; 
```

# php - 在表单和链接中使用 $_SERVER['REQUEST_URI'] 或 $_SERVER['PHP_SELF'] 的风险

> ID：14585525
> 
> 赞同：5
> 
> 时间：2013-01-29T14:43:54.560
> 
> 标签：php

`$_SERVER['REQUEST_URI']`使用或`$_SERVER['PHP_SELF']`作为表单中的操作或链接中的 href是否有任何风险？

如果是这样，可以采取什么措施来减轻风险？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:55:00.470

您在 www.example.com/form.php 上制作表格。一年后，您会忘记 URL 只是抓取页面加载的任何 URL。

在某个时候，假设您在框架中添加了一个“删除所有内容”全局选项，作为完全不同（有点奇怪）请求的一部分。

现在，有人给你发了这个链接：www.example.com/form.php?delete_everything=true。由于您只是获取该 URL 并将其设置为操作，因此这就是您的表单上的操作。哎呀。XSS 攻击基本上以这种方式工作。

始终假设您的代码将被使用（甚至是您，尤其是黑客）以您第一次编写它时没有预料到的方式使用。

你如何绕过它？硬编码网址！您可以包含一个返回 URL 的函数。实际上，这就是 Symfony 或 CodeIgniter 等框架解决它的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:52:28.447

这是因为`$_SERVER['PHP_SELF']`并且`$_SERVER['REQUEST_URI']`可以通过某种方式进行操作，**如果您没有正确地转义它**，它可以用于 XSS 攻击。

这很大程度上是因为这样的 URL 可以正常工作：

```
/path/to/index.php/" onmouseover="alert('hi') 
```

让我们使用这段代码：

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>">
...
</form> 
```

它调用`/path/to/index.php`, 即`SCRIPT_NAME`, 但是当你只是回显`$_SERVER['PHP_SELF']`它会破坏你想要的 HTML。

```
<form action="/path/to/index.php/" onmouseover="alert('hi')">
...
</form> 
```

**解决方案**

在许多情况下，使用`<form action="">`足以使表单发布到脚本本身。否则，如果你知道脚本被调用`"bla.php"`，那么 set `action="bla.php"`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T14:56:30.803

$_SERVER 容易受到 XSS 攻击，应在使用前使用 htmlspecialchars() 进行清理。

一个示例注入：

```
 <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>"></form> 
```

现在使用以下注入调用表单：

[http://www.example.com/form.php/%22%3E%3Cscript%3Ealert](http://www.example.com/form.php/%22%3E%3Cscript%3Ealert) ('xss 攻击')%3C/script%3E%3Cbr%20class=%22irrelevant

永远记得清理输入数据......永远！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-12T06:17:08.797

我意识到这是一个相当老的帖子，但这是我前段时间也遇到过的一个问题。我现在做的是这样的：

```
$php_self = filter_input(INPUT_SERVER, 'PHP_SELF', 522);
define('PHP_SELF', $php_self); 
```

有了这个，您可以安全地使用常量 PHP_SELF 作为表单操作。这段代码所做的是`$_SERVER['PHP_SELF']`通过过滤器运行超级全局，同时将结果分配为变量`$php_self`。ID 号 522 指的是`FILTER_SANITIZE_FULL_SPECIAL_CHARS`它消除了某人注入 javascript 等的能力。

您可以在此处查看这段代码可以使用哪些过滤器：

```
<table>
<tr><td>Filter Name</td><td>Filter ID</td></tr>
<?php
foreach(filter_list() as $id =>$filter)
{
  echo '<tr><td>'.$filter.'</td><td>'.filter_id($filter).'</td></tr>'."n";
}
?>
</table> 
```

相同的原则可以应用于大多数（如果不是全部）超级全局`$_SERVER`变量。

以下是我最喜欢玩的一些：

```
# FILTER_SANITIZE_STRING or _STRIPPED
$server_http_xrw = filter_input(INPUT_SERVER, 'HTTP_X_REQUESTED_WITH', 513);
# FULL_SPECIAL_CHARS
$server_request_method = filter_input(INPUT_SERVER, 'REQUEST_METHOD', 522);
$http_encoding = filter_input(INPUT_SERVER, 'HTTP_ACCEPT_ENCODING', 522); 
```

所以，无论如何，通过使用 PHP 的（现在）内置过滤器，我们可以使用`$_SERVER`变量而不用担心太多。

我希望这可以帮助那些徘徊在这个线程上寻找答案的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-01T22:07:04.760

不要忘记在整个脚本中将每次出现的“$_SERVER['PHP_SELF']”转换为“htmlentities($_SERVER['PHP_SELF'])”。

**如何避免 PHP_SELF 漏洞利用** [http://www.html-form-guide.com/php-form/php-form-action-self.html](http://www.html-form-guide.com/php-form/php-form-action-self.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-29T14:45:08.913

不，因为任何人都可以更改`href`链接（使用 Firebug 之类的工具）。当然，请确保您没有在该链接中放置任何敏感数据。

始终确保正确验证和解析您**收到**的用户数据。

# ios - 如何根据条件语句切换到视图控制器？

> ID：14585529
> 
> 赞同：0
> 
> 时间：2013-01-29T14:44:03.137
> 
> 标签：ios, objective-c, core-location, cllocationmanager, segue

我有一个视图控制器，我想检查用户是否允许应用程序使用他们的位置。如果他们接受，那么应用程序从 RootViewController 移动到 OffersViewController，如果他们拒绝，那么他们应该继续使用 OffersNoGPSViewController。

目前，如果用户说“允许”，如果他们说“不允许”，它会保留在 RootViewController 上。

当他们在触摸“确定”并允许应用程序使用他们的位置后移动到 OffersViewController 时，我也会收到这个“开始/结束外观的不平衡调用”警告。

谢谢您的帮助。这是我的代码：

```
- (void)locationUpdate:(CLLocation *)location {
    locLabel.text = [location description];

    NSLog(@"auth status is %u", [CLLocationManager authorizationStatus]);

    if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized) {
        [self performSegueWithIdentifier: @"SegueOffersGPS" sender: self];

    } else if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusDenied)

    [self performSegueWithIdentifier: @"SegueOffersNoGPS" sender: self];

}

- (void)locationError:(NSError *)error {
    locLabel.text = [error description];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"SegueOffersNoGPS"])
    {
        OffersViewController *vc = [segue destinationViewController];
        //vc.dataThatINeedFromTheFirstViewController = self.theDataINeedToPass;

        NSLog(@"auth status no GPS");
    }

    if ([[segue identifier] isEqualToString:@"SegueOffersGPS"])
    {
        OffersViewController *vc = [segue destinationViewController];

        //vc.dataThatINeedFromTheFirstViewController = self.theDataINeedToPass;

        NSLog(@"auth status is GPS");

    }
} 
```

我完整的 RootViewController 代码：

```
 @interface RootViewController ()

@end

@implementation RootViewController
@synthesize CLController;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

}

-(void) viewWillAppear:(BOOL)animated {

    CLController = [[CoreLocationController alloc] init];
    CLController.delegate = self;
    [CLController.locMgr startUpdatingLocation];

    NSLog(@"RootViewController");

    [CLController.locMgr startUpdatingLocation];
//    
//    if ([CLLocationManager authorizationStatus] ==3) {
//        [self performSegueWithIdentifier: @"SegueOffersGPS" sender: self];
//        
//        
//    }
//    if ([CLLocationManager authorizationStatus] !=3) {
//        [self performSegueWithIdentifier: @"SegueOffersNoGPS" sender: self];
//    }

}

-(void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status {

    if (status == kCLAuthorizationStatusDenied) {
        // denied
        [self performSegueWithIdentifier: @"SegueOffersNoGPS" sender: self];
        [CLController.locMgr stopUpdatingLocation];

    }
    else if (status == kCLAuthorizationStatusAuthorized) {
        // allowed
        [self performSegueWithIdentifier: @"SegueOffersGPS" sender: self];
        [CLController.locMgr stopUpdatingLocation];
    }
}

- (void)locationUpdate:(CLLocation *)location {
    //locLabel.text = [location description];

    NSLog(@"auth status is %u", [CLLocationManager authorizationStatus]);

    if ([CLLocationManager authorizationStatus] ==3) {
        [self performSegueWithIdentifier: @"SegueOffersGPS" sender: self];

    }
    if ([CLLocationManager authorizationStatus] !=3) {
        [self performSegueWithIdentifier: @"SegueOffersNoGPS" sender: self];

    }      
}

- (void)locationError:(NSError *)error {

    [self performSegueWithIdentifier: @"SegueOffersNoGPS" sender: self];

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"SegueOffersNoGPS"])
    {
        self.navigationController.toolbarHidden=YES;

        NSLog(@"auth status no GPS");
    }

    if ([[segue identifier] isEqualToString:@"SegueOffersGPS"])
    {
        self.navigationController.toolbarHidden=NO;

        NSLog(@"auth status is GPS");

    }
}

-(void)viewDidDisappear:(BOOL)animated {

    [CLController.locMgr stopUpdatingLocation];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:14:56.273

如果用户不允许定位服务，则永远不会调用位置更新方法，并且您对状态的检查也永远不会发生。尝试实现 CLLocationManagerDelegate 的`locationManager:didChangeAuthorizationStatus:`方法。当用户在“允许定位服务”警报中选择是或否时，它会被调用。

# java - Android 上的 Guava-Splitter 初始化需要 1.7 秒？

> ID：14585531
> 
> 赞同：2
> 
> 时间：2013-01-29T14:44:10.410
> 
> 标签：java, android, performance, guava, lag

我正在调查一个滞后，发生在我的 android 应用程序的第一次触摸输入之后。我使用 TraceView 并追踪到 Guava 的`Splitter`.

![在此处输入图像描述](../Images/3b14b67c339230da41901b31a75b58a4.png)

*   为什么这需要这么长时间？
*   我是否正确读取 TraceView 的输出？
*   我能做些什么呢？

这是调用的行`Splitter`：

```
String desc = /* loaded from assets */
List<String> descList = Lists.newArrayList(Splitter.on("\n").split(desc)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T16:17:11.627

我认为这可能与[Guava Charmatcher 静态初始化缓慢](https://stackoverflow.com/questions/13143401/guava-charmatcher-static-initialization-slow)和[http://code.google.com/p/guava-libraries/issues/detail?id=1192](http://code.google.com/p/guava-libraries/issues/detail?id=1192)有关，因为您需要在构造 Splitter 时构造 CharMatcher。正如你在 TraceView 中看到的，很多时间都花在`CharMatcher.<clinit>`（clinit = 类初始化）上。

你用的是什么版本的番石榴？

# ruby-on-rails - 在 ruby 中对哈希数组进行排序

> ID：14585533
> 
> 赞同：2
> 
> 时间：2013-01-29T14:44:21.547
> 
> 标签：ruby-on-rails, ruby

如果我有预先确定的顺序，如何对哈希数组进行排序我有一个需要像这样排序的数组：

```
 array =  [{:attr_name=>:phone, :attr_value=>30}, {:attr_name=>:name, :attr_value=>20}, {:attr_name=>:similarity, :attr_value=>0}, {:attr_name=>:weight, :attr_value=>50}] 
```

我有一个哈希值，我希望根据它对其进行排序：

```
pre_sorted = {
            :name => 0,
            :phone => 1,
            :weight=> 2,
            :similarity => 3
        } 
```

排序后我的数组应该是这样的：

```
[{:attr_name=>:name, :attr_value=>20}, {:attr_name=>:phone, :attr_value=>30}, {:attr_name=>:weight, :attr_value=>50}, {:attr_name=>"similarity", :attr_value=>0}] 
```

我查看了 ruby​​ 排序并按文档排序，并在 So 上找到了相关问题，但无法弄清楚，因为我只是从 rails 开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:49:42.567

要按给定标准对数组进行排序，您可以使用`sort_by`. 在您的情况下，您想按`pre_sorted`哈希中的条目进行排序，因此：

```
array.sort_by do |hash|
  pre_sorted[ hash[:attr_name] ]
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:49:22.317

Array#sort 接受用于比较的代码块：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-sort](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-sort)

```
array.sort{|a,b| pre_sorted[a[:attr_value]] <=> pre_sorted[b[:attr_value]]} 
```

# css - Bootstrap 响应式导航栏仅在手机模式下折叠（无平板电脑模式）

> ID：14585535
> 
> 赞同：3
> 
> 时间：2013-01-29T14:44:27.383
> 
> 标签：css, twitter-bootstrap

我有一个响应式引导菜单，但我不想在平板电脑模式下折叠它。我尝试在桌面和平板电脑模式下显示相同的菜单。菜单在 940px 或以下折叠，我想在 768px 或以下进行。

谁能帮我？谢谢

编码：

```
div class="navbar">
  <div class="navbar-inner">
    <div class="container">

      <!-- I want to display this code only in Phone mode-->
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="#">Project name</a>

      <!-- This  part is hidden (collapsed) at 940px or less
           But I want to collapse it at 768px or less!!!!
      -->
      <div class="nav-collapse collapse">
           <!-- menu items -->
      </div>

    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T01:15:06.133

1.  转到 bootstrap-responsive.css 文件。
2.  转到第 952 行。
3.  将最大宽度从 979px 更改为 768px。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T20:47:34.313

最好的方法是使用[LESS](http://twitter.github.com/bootstrap/extend.html)重新编译并将 @navbarCollapseWidth 变量从 979px 更改为 768px。如果您不想使用 LESS，您可以使用 Bootstrap 站点上的自定义页面来更改该变量：http: [//twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

# javascript - “[object Function]”是内置函数独有的吗？

> ID：14585537
> 
> 赞同：3
> 
> 时间：2013-01-29T14:44:30.907
> 
> 标签：javascript, bookmarklet, built-in

我正在尝试编写一个仅将非内置全局变量转储到控制台的小书签。我发现 window.Audio 和其他一些内置函数让 toString() 返回“[object Function]”。

是否可以构建函数（这有意义吗？）其 .toString() 返回“[object Function]”而不覆盖 .toString() 换句话说，我是否有可能跳过非内置函数，因为我跳过了“ [对象功能]"的？

这个问题是我试图完善我的书签的一部分：[https ://gist.github.com/4635185](https://gist.github.com/4635185)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:45:31.283

由于`window.Audio`具有与 ( )不同的`toString`方法 ，因此任何其他s 或s方法都可能被覆盖并返回`Object`
`Audio.toString === Object.toString //false`
`function``Object``toString``[object Function]`

现在，人们不会到处乱跑并覆盖他们的函数`toString`方法。所以你可能会用这种方法做得很好。但是可能出于调试原因或其他原因，有人可能会决定这样做。

## 更新：

一个简单的 ECMAScript 5 的解决方案也是可能的（*[兼容性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys#Compatibility)*）

```
(function () {
    var keys = Object.keys(window),
        r = {};
    for (var i = 0, j; j = keys[i]; i++) {
        r[j] = window[j];
    }
    console.dir(r);
})(); 
```

## 编辑：

正如您幸运地指出的那样，最后一个答案不起作用*（我什至不知道我在想什么）*

无论如何，另一种方法可能是

*   创建一个新的空 iframe (about:blank)
*   获取所有`window`属性*从一开始就包含的属性*
*   将所有其他人推入一个数组

## [例子](http://jsbin.com/ajotid/1/edit)

```
function getNonNatives(window) {
var iframe = document.createElement("iframe");
iframe.src = "about:blank";
document.body.appendChild(iframe);
var natives = iframe.contentWindow,nonnatives = {};
for(var prop in window)
  if(!natives[prop] && window[prop] !== null)
    nonnatives[prop] = window[prop];
document.body.removeChild(iframe);
  return nonnatives;
};
console.log(getNonNatives(window)); 
```

这样，如果有人重写 Objects/Functions 方法，您就不必费心了`toString`。

*为了便于阅读，我不会在此编辑中包含旧代码*

## 评论

要回答评论中的问题是什么`!!~`：

这`~`是一个按位非运算符，它反转其操作数的位。

因此，鉴于这个逻辑，它可以用作`indexOf`检查是否找到任何东西的简写，
因为如果没有找到任何东西，它就会返回`-1`一个正数。

`~-1 == 0`例如`~4 == -5`

然后`!!`用于将其转换为布尔值

`!!0 == false`和`!!-5 == true`

基本上它的简写

`if( myString.indexOf("myValue") > -1)`

# php - 自定义 WordPress 画廊 html 布局

> ID：14585538
> 
> 赞同：9
> 
> 时间：2013-01-29T14:44:38.230
> 
> 标签：php, wordpress, image-gallery

在使用默认媒体上传器在 WordPress 中创建图片库时，WordPress 会将图片包装在一堆 HTML 标记中。

如何在生成之前覆盖它，以便我可以输出所需的标记并更改画廊布局的创建方式？

目前，WordPress 正在生成如下代码：

```
<div id="container">
   <div src="<?php bloginfo('template_directory'); ?>/images/small.jpg">
   <div src="<?php bloginfo('template_directory'); ?>/images/medium.jpg" data-media="(min-width: 400px)"></div>
   <div src="<?php bloginfo('template_directory'); ?>/images/large.jpg" data-media="(min-width: 950px)"></div>
   <div src="<?php bloginfo('template_directory'); ?>/images/extralarge.jpg" data-media="(min-width: 1200px)"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-05-01T15:07:20.010

与其覆盖画廊简码函数，更好的方法是使用该函数中包含的 post_gallery 过滤器。

在functions.php中添加这个

```
add_filter('post_gallery','customFormatGallery',10,2);

function customFormatGallery($string,$attr){

    $output = "<div id=\"container\">";
    $posts = get_posts(array('include' => $attr['ids'],'post_type' => 'attachment'));

    foreach($posts as $imagePost){
        $output .= "<div src='".wp_get_attachment_image_src($imagePost->ID, 'small')[0]."'>";
        $output .= "<div src='".wp_get_attachment_image_src($imagePost->ID, 'medium')[0]."' data-media=\"(min-width: 400px)\">";
        $output .= "<div src='".wp_get_attachment_image_src($imagePost->ID, 'large')[0]."' data-media=\"(min-width: 950px)\">";
        $output .= "<div src='".wp_get_attachment_image_src($imagePost->ID, 'extralarge')[0]."' data-media=\"(min-width: 1200px)\">";
    }

    $output .= "</div>";

    return $output;
} 
```

[这是假设您已经使用https://codex.wordpress.org/Function_Reference/add_image_size](https://codex.wordpress.org/Function_Reference/add_image_size)为您需要的不同尺寸设置了图像尺寸

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-29T17:16:33.877

我错过了这个[答案下方](https://stackoverflow.com/a/23410472/1259882)提到的[`post_gallery`过滤器](https://developer.wordpress.org/reference/hooks/post_gallery/)。**您应该真正考虑使用该过滤器，**而不是复制整个函数。

 **~~将此代码添加到模板的 functions.php 并修改 HTML 内部函数。此功能是 WP35 默认图库短代码功能的副本。根据[Codex](https://codex.wordpress.org/Function_Reference/add_shortcode#Notes)，每个短代码只能分配一个功能，因此，您的功能将覆盖 WordPress 默认的功能：~~

```
add_shortcode('gallery', 'my_gallery_shortcode');    
function my_gallery_shortcode($attr) {
    $post = get_post();

static $instance = 0;
$instance++;

if ( ! empty( $attr['ids'] ) ) {
    // 'ids' is explicitly ordered, unless you specify otherwise.
    if ( empty( $attr['orderby'] ) )
        $attr['orderby'] = 'post__in';
    $attr['include'] = $attr['ids'];
}

// Allow plugins/themes to override the default gallery template.
$output = apply_filters('post_gallery', '', $attr);
if ( $output != '' )
    return $output;

// We're trusting author input, so let's at least make sure it looks like a valid orderby statement
if ( isset( $attr['orderby'] ) ) {
    $attr['orderby'] = sanitize_sql_orderby( $attr['orderby'] );
    if ( !$attr['orderby'] )
        unset( $attr['orderby'] );
}

extract(shortcode_atts(array(
    'order'      => 'ASC',
    'orderby'    => 'menu_order ID',
    'id'         => $post->ID,
    'itemtag'    => 'dl',
    'icontag'    => 'dt',
    'captiontag' => 'dd',
    'columns'    => 3,
    'size'       => 'thumbnail',
    'include'    => '',
    'exclude'    => ''
), $attr));

$id = intval($id);
if ( 'RAND' == $order )
    $orderby = 'none';

if ( !empty($include) ) {
    $_attachments = get_posts( array('include' => $include, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => $order, 'orderby' => $orderby) );

    $attachments = array();
    foreach ( $_attachments as $key => $val ) {
        $attachments[$val->ID] = $_attachments[$key];
    }
} elseif ( !empty($exclude) ) {
    $attachments = get_children( array('post_parent' => $id, 'exclude' => $exclude, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => $order, 'orderby' => $orderby) );
} else {
    $attachments = get_children( array('post_parent' => $id, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => $order, 'orderby' => $orderby) );
}

if ( empty($attachments) )
    return '';

if ( is_feed() ) {
    $output = "\n";
    foreach ( $attachments as $att_id => $attachment )
        $output .= wp_get_attachment_link($att_id, $size, true) . "\n";
    return $output;
}

$itemtag = tag_escape($itemtag);
$captiontag = tag_escape($captiontag);
$icontag = tag_escape($icontag);
$valid_tags = wp_kses_allowed_html( 'post' );
if ( ! isset( $valid_tags[ $itemtag ] ) )
    $itemtag = 'dl';
if ( ! isset( $valid_tags[ $captiontag ] ) )
    $captiontag = 'dd';
if ( ! isset( $valid_tags[ $icontag ] ) )
    $icontag = 'dt';

$columns = intval($columns);
$itemwidth = $columns > 0 ? floor(100/$columns) : 100;
$float = is_rtl() ? 'right' : 'left';

$selector = "gallery-{$instance}";

$gallery_style = $gallery_div = '';
if ( apply_filters( 'use_default_gallery_style', true ) )
    $gallery_style = "
    <style type='text/css'>
        #{$selector} {
            margin: auto;
        }
        #{$selector} .gallery-item {
            float: {$float};
            margin-top: 10px;
            text-align: center;
            width: {$itemwidth}%;
        }
        #{$selector} img {
            border: 2px solid #cfcfcf;
        }
        #{$selector} .gallery-caption {
            margin-left: 0;
        }
    </style>
    <!-- see gallery_shortcode() in wp-includes/media.php -->";
$size_class = sanitize_html_class( $size );
$gallery_div = "<div id='$selector' class='gallery galleryid-{$id} gallery-columns-{$columns} gallery-size-{$size_class}'>";
$output = apply_filters( 'gallery_style', $gallery_style . "\n\t\t" . $gallery_div );

$i = 0;
foreach ( $attachments as $id => $attachment ) {
    $link = isset($attr['link']) && 'file' == $attr['link'] ? wp_get_attachment_link($id, $size, false, false) : wp_get_attachment_link($id, $size, true, false);

    $output .= "<{$itemtag} class='gallery-item'>";
    $output .= "
        <{$icontag} class='gallery-icon'>
            $link
        </{$icontag}>";
    if ( $captiontag && trim($attachment->post_excerpt) ) {
        $output .= "
            <{$captiontag} class='wp-caption-text gallery-caption'>
            " . wptexturize($attachment->post_excerpt) . "
            </{$captiontag}>";
    }
    $output .= "</{$itemtag}>";
    if ( $columns > 0 && ++$i % $columns == 0 )
        $output .= '<br style="clear: both" />';
}

$output .= "
        <br style='clear: both;' />
    </div>\n";

return $output;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-01T18:15:24.397

基于[@DaveF 的](https://stackoverflow.com/a/23410472/884953)回答，这里有一个画廊功能，可以维护画廊的顺序，并且如果在 WP 编辑器中选择它也会随机化 -

```
add_filter('post_gallery','customFormatGallery',10,2);

function customFormatGallery($string,$attr){

    $posts_order_string = $attr['ids'];
    $posts_order = explode(',', $posts_order_string);

    $output = "<div class=\"gallery-container\">";
    $posts = get_posts(array(
          'include' => $posts_order,
          'post_type' => 'attachment', 
          'orderby' => 'post__in'
    ));

    if($attr['orderby'] == 'rand') {
        shuffle($posts); 
    } 

    foreach($posts as $imagePost){
        $output .= '<img src="' . wp_get_attachment_image_src($imagePost->ID, 'full')[0] . '" alt="" />';
    }

    $output .= "</div>";

    return $output;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-06T08:03:25.213

只是除了接受的答案要使其正常工作，您首先需要删除默认的画廊短代码，如下所示：

```
add_action( 'after_setup_theme', 'my_override_of_default_gallery' );

function my_override_of_default_gallery() {
    remove_shortcode( 'gallery' );
    add_shortcode('gallery', 'my_gallery_shortcode');  
}

//add_shortcode('gallery', 'my_gallery_shortcode'); 

function my_gallery_shortcode($attr) {
    $post = get_post();
    ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T10:07:36.737

这是我更改以获得我正在寻找的布局的代码：

```
/******    REWRITE THE GALLERIE FUNCTION FROM WORDPRESS   **********/

add_shortcode('gallery', 'my_gallery_shortcode');  

function my_gallery_shortcode($attr) {
  $counter=0;
//var_dump("Rewrite the shortcode gallery");

    $post = get_post();

static $instance = 0;
$instance++;

if ( ! empty( $attr['ids'] ) ) {
    // 'ids' is explicitly ordered, unless you specify otherwise.
    if ( empty( $attr['orderby'] ) )
        $attr['orderby'] = 'post__in';
    $attr['include'] = $attr['ids'];
}

// Allow plugins/themes to override the default gallery template.
$output = apply_filters('post_gallery', '', $attr);
if ( $output != '' )
    return $output;

// We're trusting author input, so let's at least make sure it looks like a valid orderby statement
if ( isset( $attr['orderby'] ) ) {
    $attr['orderby'] = sanitize_sql_orderby( $attr['orderby'] );
    if ( !$attr['orderby'] )
        unset( $attr['orderby'] );
}

extract(shortcode_atts(array(

/******    CHANGE TO FULL SIZE TO GET THE CORRECT INFORMATION **********/
    'order'      => 'ASC',
    'orderby'    => 'menu_order ID',
    'id'         => $post->ID,
    'itemtag'    => 'dl',
    'icontag'    => 'dt',
    'captiontag' => 'dd',
    'columns'    => 3,
    'size'       => 'Full size',
    'include'    => '',
    'exclude'    => ''    
), $attr));

/***********************************************************************/

$id = intval($id);
if ( 'RAND' == $order )
    $orderby = 'none';

if ( !empty($include) ) {
    $_attachments = get_posts( array('include' => $include, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => $order, 'orderby' => $orderby) );

    $attachments = array();
    foreach ( $_attachments as $key => $val ) {
        $attachments[$val->ID] = $_attachments[$key];
    }
} elseif ( !empty($exclude) ) {
    $attachments = get_children( array('post_parent' => $id, 'exclude' => $exclude, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => $order, 'orderby' => $orderby) );
} else {
    $attachments = get_children( array('post_parent' => $id, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => $order, 'orderby' => $orderby) );
}

if ( empty($attachments) )
    return '';

if ( is_feed() ) {
    $output = "\n";
    foreach ( $attachments as $att_id => $attachment )
        $output .= wp_get_attachment_link($att_id, $size, true) . "\n";
    return $output;
}

$itemtag = tag_escape($itemtag);
$captiontag = tag_escape($captiontag);
$icontag = tag_escape($icontag);
$valid_tags = wp_kses_allowed_html( 'post' );
if ( ! isset( $valid_tags[ $itemtag ] ) )
    $itemtag = 'dl';
if ( ! isset( $valid_tags[ $captiontag ] ) )
    $captiontag = 'dd';
if ( ! isset( $valid_tags[ $icontag ] ) )
    $icontag = 'dt';

$columns = intval($columns);
$itemwidth = $columns > 0 ? floor(100/$columns) : 100;
$float = is_rtl() ? 'right' : 'left';

$selector = "gallery-{$instance}";
$gallery_div ="<div pictures-content>";
$gallery_style ="";

$output = apply_filters( 'gallery_style', "\n\t\t" . $gallery_div );

$i = 0;
$count=0;
foreach ( $attachments as $id => $attachment ) {

$test = $attachments[$id];
$link=$test->guid;
    $nocsript="";
    if ($count==0){$nocsript ="<noscript><img src='$link'</noscript>";$sentence ="<div data-src='$link'></div>";}
    if ($count==1){$sentence ="<div data-src='$link' data-media='(min-width: 400px)'></div>";}
    if ($count==2){$sentence ="<div data-src='$link' data-media='(min-width: 800px)'></div>";}
    if ($count==3){$sentence ="<div data-src='$link' data-media='(min-width: 1000px)'></div>";}
    if($nocsript==""){ $output .= "$sentence";} else { $output .= $nocsript."$sentence";}
    $count++;
}
$output .= "</div>\n";
return $output;
} 
```**

# javascript - 单击div后将焦点返回到输入字段

> ID：14585541
> 
> 赞同：3
> 
> 时间：2013-01-29T14:44:42.660
> 
> 标签：javascript, input, focus, field, diacritics

为了便于在输入字段中输入重音字符，我显示了一个弹出 div，其中显示了字符，以便您可以选择并单击。我想将注意力集中在输入字段上（或在任何将其带走的操作后将其返回）。单击输入重音后，焦点将不会在 javascript 控制下返回。我已经用 Mac Safari 和 Firefox 进行了测试，但没有成功。最终它将需要在所有平台上工作。

非常感谢任何帮助。

大卫

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Untitled Document</title>
    <script type="text/javascript" charset="utf-8">
    var showaccentswindow = 0;

    function displayaccents() {
          if (showaccentswindow==0) {
          document.getElementById('accentswindow').style.display='block';
          showaccentswindow=1;
         }
         else
         {
             document.getElementById('accentswindow').style.display='none';
             showaccentswindow=0;
         }
          document.getElementById('inputbox').focus();
      }
       function insertchar(c) {
          /*for inserting accented chars*/
          document.getElementById('inputbox').value=document.getElementById('inputbox').value + c;
          document.getElementById('inputbox').focus();  **// DOESN'T WORK!!!**

          }
    </script>
    <style type="text/css">
    #accentswindow {
        display:none;
        position:absolute;
        top: 50px;
        background-color: #FFF;
        width: 200px;
        border: 2px solid #999;
        z-index: 100;
        left: 150px;
        text-align: left;
        padding-bottom: 20px;
        padding-left: 20px;
    }
    .accentlink {
        background-color: #F3EED7;
        text-align: center;
        display: block;
        float: left;
        height: 22px;
        width: 17px;
        margin-top: 9px;
        margin-right: 3px;
        font-family: Verdana, Geneva, sans-serif;
        font-size: 15px;
        font-weight: bold;
        color: #666;
        cursor: pointer;
    }
    </style>
    </head>

    <body onload="document.getElementById('inputbox').focus();">
    <div id="accentswindow" >
      <div class="accentlink" onmousedown="insertchar('À')">À</div>
      <div class="accentlink" onmousedown="insertchar('Û')">Û</div>
      <img src="http://www.revilolang.com/images/closebox.png" width="28" height="26" style="float:right;" onmouseup="displayaccents()"/> </div>
    <input name="" id="inputbox" type="text" />
    <input name="accents" type="button" value="accents"onclick="displayaccents()" />
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:01:58.587

由于 mouseup 再次“仍然”焦点，您应该添加一个侦听器来设置焦点

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Untitled Document</title>
    <script type="text/javascript" charset="utf-8">
    var showaccentswindow = 0;

    function displayaccents() {
          if (showaccentswindow==0) {
          document.getElementById('accentswindow').style.display='block';
          showaccentswindow=1;
         }
         else
         {
             document.getElementById('accentswindow').style.display='none';
             showaccentswindow=0;
         }
          document.getElementById('inputbox').focus();
      }
       function insertchar(c) {
          /*for inserting accented chars*/
          document.getElementById('inputbox').value=document.getElementById('inputbox').value + c;
            // DOESN'T WORK!!!**

          }

          function addListeners(){
            document.getElementById('accentswindow').addEventListener("mouseup",function(){
                document.getElementById('inputbox').focus();
            })
          }
    </script>
    <style type="text/css">
    #accentswindow {
        display:none;
        position:absolute;
        top: 50px;
        background-color: #FFF;
        width: 200px;
        border: 2px solid #999;
        z-index: 100;
        left: 150px;
        text-align: left;
        padding-bottom: 20px;
        padding-left: 20px;
    }
    .accentlink {
        background-color: #F3EED7;
        text-align: center;
        display: block;
        float: left;
        height: 22px;
        width: 17px;
        margin-top: 9px;
        margin-right: 3px;
        font-family: Verdana, Geneva, sans-serif;
        font-size: 15px;
        font-weight: bold;
        color: #666;
        cursor: pointer;
    }
    </style>
    </head>

    <body onload="addListeners();document.getElementById('inputbox').focus();">
    <div id="accentswindow" >
      <div class="accentlink" onmousedown="insertchar('À')">À</div>
      <div class="accentlink" onmousedown="insertchar('Û')">Û</div>
      <img src="http://www.revilolang.com/images/closebox.png" width="28" height="26" style="float:right;" onmouseup="displayaccents()"/> </div>
    <input name="" id="inputbox" type="text" />
    <input name="accents" type="button" value="accents"onclick="displayaccents()" />
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:54:46.523

好吧，您必须将焦点绑定到不聚焦（模糊）动作

如果您有 jQuery，您可以执行以下操作：

```
 inputbox.blur(function(){
       inputbox.focus();
  }); 
```

普通的 javascript 会是这样的：

```
 inputbox.onblur=function(){
       inputbox.focus();
  }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:03:45.017

只需添加`onclick = "document.getElementById('inputbox').focus();"`每个`accentlink`DIV。

例如：

```
<div class="accentlink" onclick = "javascript:document.getElementById('inputbox').focus();" onmousedown="javascript:insertchar('À');">À</div> 
```

# jquery - jQuery自动完成停用引导菜单下拉菜单

> ID：14585542
> 
> 赞同：2
> 
> 时间：2013-01-29T14:44:43.980
> 
> 标签：jquery, asp.net, twitter-bootstrap, autocomplete

我使用 twitter bootstrap 作为我的网站框架。我也在使用 jQuery。

在我的主导航栏中，我有一个包含搜索框的引导下拉菜单。搜索框有一个完美运行的 jQuery 自动完成功能。

然而，我的问题是，当用户单击自动完成列表中的一项时，引导下拉菜单会关闭，从而阻止用户单击“搜索”按钮，直到他们重新打开下拉菜单（搜索查询仍然存在）。

显然这让我的用户很恼火......

从自动完成列表中进行选择时，是否有一种简单的方法可以防止下拉菜单关闭？这是由于两个框架之间的冲突吗？

![自动完成](../Images/c875b994664ed02cdf8c6406de4f7bd0.png)

提前致谢。

戈登

更新：

用下面的代码解决了这个问题：

```
 <script type="text/javascript">
           $(document).ready(function () {
               $('body').find('.ui-autocomplete').click(function (e) {
                        e.stopPropagation();
               });
            });
    </script> 
```

这会在单击时停止 ui-autocomplete 下拉元素上的传播，并使引导下拉菜单保持打开状态以允许用户单击搜索按钮。

感谢isherwood的指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:49:56.543

这不是冲突，而是 Bootstrap 菜单的正常行为。我为此目的使用这些功能：

```
$(function() {
    //prevent menu from closing when clicking into a form element
    $('.drop').find('form').click(function (e) {
        e.stopPropagation();
    });

    // other elements with the 'stay-open' class
    $('.drop').find('.stay-open').click(function (e) {
        e.stopPropagation();
    });
}); 
```

# php - 如何使用其中可用的 Zend Application 类创建独立的 .php

> ID：14585545
> 
> 赞同：1
> 
> 时间：2013-01-29T14:44:47.053
> 
> 标签：php, zend-framework

我是 Zend Framework 的新手，在任何地方都找不到答案，所以我想问你。

我已经准备好一个应用程序，在浏览器中一切正常，但我想每天运行一次 .php 文件，该文件将处理数据并从其他 SQL 服务器下载更多内容。我希望能够访问所有类/函数，基本上是 Zend 应用程序中的所有内容。

我知道如何设置 CRON，只是不知道应该在 .php 文件中放入什么来获取项目中可供我使用的所有功能以及数据库连接。

我正在使用 Zend Framework 1.11.11

谢谢大家，米尔科。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:00:44.583

据我了解，您可以在独立文件中包含 Zend Framework Autoloader，然后您可以使用任何 Zend Framework 类。

```
require_once('Zend/Loader/Autoloader.php');
$autoloader = Zend_Loader_Autoloader::getInstance();
$autoloader->registerNamespace('myOneFile_'); 
```

[在这里阅读更多](http://framework.zend.com/manual/1.12/en/learning.autoloading.usage.html "文件")

但这并不酷=）

# c++ - 如何用 VDM++ 语言编写函数

> ID：14585546
> 
> 赞同：-2
> 
> 时间：2013-01-29T14:44:52.500
> 
> 标签：c++, compiler-construction, vdm++

我正在制作 VDM++ 的翻译器。它将 VDM++ 代码转换为 C++。为此，我正在将 VDM++ 映射到 C++。

我想知道如何在 VDM++ 中编写函数？

例如。

```
float functionX(int var1,float var2){
int x= 10;
float y= 0.3;
return y;
} 
```

我如何在 VDM++ 中编写此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:07:06.190

您的示例函数有点不寻常，因为它不使用其参数，但通常 VDM 函数可能如下所示：

```
func: int * real -> real
func(var1, var2) ==
    var1 + var2; 
```

请注意，该函数是“纯”的，因为它只是一个涉及其参数的表达式（它也可以引用常量并调用其他函数）。有关更多详细信息，我建议您查看语言参考手册。

# c# - 似乎无法调用另一个类中的方法

> ID：14585551
> 
> 赞同：0
> 
> 时间：2013-01-29T14:45:08.020
> 
> 标签：c#, class

我正在尝试一种通过不同类共享字符串的新方法，但我似乎无法让它工作......以前我制作了公共静态字符串，但我读到不推荐这样做等等，所以我正在尝试一个新的方式，但不幸的是我不知道如何调用这个方法......

这是我制作的代码：

```
public class AddServer
{
    public AddServer(string name, string seed, List<string> ops)
    {
        Ops = ops;
        Seed = seed;
        Name = name;
    }

    public string Name { get; private set; }
    public string Seed { get; private set; }
    public List<string> Ops { get; private set; } 
} 
```

老实说，我不知道这是否是正确的做法，如果不是，有人能把我推向正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:58:28.303

```
public class AddServer
{
    public AddServer(string name, string seed, List<string> ops)//constructor
    {
        Ops = ops;
        Seed = seed;
        Name = name;
    }

    public string Name { get; private set; }
    public string Seed { get; private set; }
    public List<string> Ops { get; private set; } 
} 
```

在这种情况下，我们不会调用另一个类的方法。我们正在构建一个`AddServer`. 这些属性有一个私有集。这使得属性对外部类型只读。换句话说，属性只能在构造函数中设置。

创建类的实例并传递参数值以设置属性。

```
List<string> operations = new List<string>() {"1", "2" };
AddServer addServer = new AddServer("nameValue", "seedValue", operations); 
```

现在属性有了值，您可以通过以下方式访问它们：

```
string nameResult = addServer.Name;
string seedresult = addServer.Seed;
List<string> opsResult = addServer.Ops 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:48:36.040

```
List<string> ops = new List<string>();
AddServer asvr = new AddServer("newName", "newSeed", ops);

Console.WriteLine(asvr.Name);
Console.WriteLine(asvr.Seed);
Console.WriteLine(asvr.Ops.Count); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:48:50.853

从另一个班级，你会：

```
//Create list of strings to pass to AddServer class's constructor method
List<string> ops = new List<string> {"ops1", "ops2", "ops3");

//Call the AddServer constructor to create a new instance of the class AddServer
AddServer myAddserver = new AddServer("server01", "some seed", lstOps); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:49:20.820

除非我遗漏了什么：

```
var server = new AddServer();
server.AddServer("name", "seed", new List<string>()); 
```

显然用合理的值代替你的参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T14:49:49.290

这本身不是一种方法，它是一个[构造函数](http://msdn.microsoft.com/es-es/library/ace5hbzh%28v=vs.80%29.aspx)

调用方法是：

`var addserver = new AddServer("Name","Seed",new List<string>{"asdasd","asdasd2","etc"});`

# applescript - Applescript打开和保存Indesign文档不起作用

> ID：14585552
> 
> 赞同：1
> 
> 时间：2013-01-29T14:45:08.400
> 
> 标签：applescript, adobe-indesign

我目前正在创建一个applescript droplet，它最终将允许我删除多个要打开然后保存的文件。这就是我需要做的所有事情，因为这会将旧的 indesign 文件更新为 CS5（我们有很多）。

我能够创建一个可打开多个 indesign 文件的液滴，但我无法保存它们。这是到目前为止的脚本：

```
on open these
    tell application "Adobe InDesign CS5"
        open these
    end tell
end open
tell application "Adobe InDesign CS5"
 save these
end tell 
```

目前它没有执行“保存这些”命令。似乎它很简单，但我发现很难获得信息如何告诉 indesign 保存这些我已经放在 droplet 中的打开的文档。我可能没有使用正确的“选择器”（如果我可以使用该术语）。所以我希望脚本“选择”打开的文档，然后需要保存这些“选择的”文档（一个简单的保存命令而不是另存为）。

理想情况下，我希望脚本在转到第二个文档之前打开第一个文档并保存它，依此类推。但那是次要的。

我也试过这个脚本：

```
on open these
    tell application "Adobe InDesign CS5"
        open these
    end tell
end open
tell these
    save
end tell 
```

这里的结果也是一样的。我在这方面有点初学者，所以我可能忽略了一些非常基本的东西。任何帮助将非常感激！

谢谢你。

编辑：标题中的错字，哎呀！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:53:37.457

您不能只告诉 indesign 保存“thees”，您必须与每个项目交谈，指定项目和位置格式等以进行保存

所以你必须遍历每一个

伪代码在这里

```
on open these
    repeat with afile in these
        tell application "Adobe InDesign CS5"
            open afile
            tell document 1
                   save afile to "/location/to/save"
               close afile
            end tell
        end tell
    end repeat
end open 
```

这是保存的字典说明

save v : 保存文档 save specifier [to alias or text] : 保存文档的位置。如果文档已经保存，则在该路径保存一份副本，关闭原文件打开新副本 [stationery boolean] : 是否将文件保存为文具。可以接受：布尔值（默认值：FALSE）。[版本注释文本] ：此版本的注释 [强制保存布尔值] ：强制保存版本。可以接受：布尔值（默认值：FALSE）。→ 文档：保存的文档

正如 DigiMonk 指出的那样，您可能只能单独使用 close

```
on open these
    repeat with afile in these
        tell application "Adobe InDesign CS5"
            open afile
            tell document 1
                close afile saving yes
            end tell
        end tell
    end repeat
end open 
```

# jquery - 在下拉过程中动态更改列表图标

> ID：14585555
> 
> 赞同：0
> 
> 时间：2013-01-29T14:45:11.437
> 
> 标签：jquery, html

我有一个下面结构的多层列表。我知道如何动态更改图标，但由于列表的结构，顶层列表不会动态更改。我需要一种方法来从 p class='handle' 上的点击事件中引用第一个 ul 。在这里完整设置 JSfiddle [http://jsfiddle.net/Gwbfd/](http://jsfiddle.net/Gwbfd/)

```
$(document).ready(function(){
    $('.drawer').hide();
    $('.handle').click(function(){
        $(this).parent().children().not(this).slideToggle('slow');
    });
}); 
```

我需要的是对 parent 的引用`ul`。

列表结构为 UL LI P(clickable) UL LI P(clickable 2nd tier)

当我单击 时，我无法更改第一个 UL `<P>`。后续会变

就像是

```
$(this).parent().toggleClass('expanded'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:35:21.103

尝试使用`.closest('ul')`它会给你一个匹配选择器的第一个祖先，即`ul`. 这是一个稍微更新的[小提琴](http://jsfiddle.net/Gwbfd/1/)，但我认为你应该再整理一下 html。

# c# - 如何自动将布局加载到我的 AvalonDock 实例中？

> ID：14585556
> 
> 赞同：3
> 
> 时间：2013-01-29T14:45:12.690
> 
> 标签：c#, wpf, mvvm, avalondock

我已将 AvalonDock 2.0 集成到我的应用程序中。我已将文档和可锚定源绑定到我的视图模型，这些视图模型通过`DataTemplate`s 使用适当的用户控件呈现。

我可以使用`XmlLayoutSerializer`. 我需要支持按需加载预定义的布局（通过`Button`s 和`ICommand`s）。这也有效。

我无法工作的事情`DockingManager`是在加载完视图模型及其视图（用户控件）后自动加载序列化布局。

我已经尝试加载我的布局，`DockingManager.DataContextChanged`但我认为它触发得太早了，因为布局加载了隐藏部分中的文档和可见部分中的重复文档。渲染的窗格不反映加载的布局，当再次保存布局时，重复项会累积在隐藏部分中。

```
<ad:DockingManager Name="DockingManager"
                   DataContext="{Binding Project}"
                   DataContextChanged="DockingManager_OnDataContextChanged"
                   ActiveContent="{Binding Active}"
                   AnchorablesSource="{Binding Anchorables}"
                   DocumentsSource="{Binding Documents}">
    <ad:DockingManager.Theme>
        <ad:AeroTheme/>
    </ad:DockingManager.Theme>

    <ad:DockingManager.LayoutItemTemplateSelector>
        <views:PanesTemplateSelector>
            <views:PanesTemplateSelector.ChartTemplate>
                <DataTemplate>
                    <views:Chart/>
                </DataTemplate>
            </views:PanesTemplateSelector.ChartTemplate>
            <views:PanesTemplateSelector.WorkspaceTemplate>
                <DataTemplate>
                    <Views:Workspace/>
                </DataTemplate>
            </views:PanesTemplateSelector.WorkspaceTemplate>
            ...
        </views:PanesTemplateSelector>
    </ad:DockingManager.LayoutItemTemplateSelector>

    <ad:DockingManager.LayoutItemContainerStyle>
        <Style TargetType="{x:Type ad:LayoutItem}">
            <Setter Property="Title" Value="{Binding Model.DisplayText}"/>
            <Setter Property="ContentId" Value="{Binding Model.ContentId}"/>
        </Style>
    </ad:DockingManager.LayoutItemContainerStyle>

    <ad:LayoutRoot>
        <!--<ad:LayoutPanel>
            <ad:LayoutDocumentPane/>
            <ad:LayoutAnchorablePane/>
        </ad:LayoutPanel>-->
    </ad:LayoutRoot>
</ad:DockingManager> 
```

...和代码隐藏...

```
private void SaveLayout() {
    if (this.DataContext == null)
        return;
    var xmlLayoutSerializer = new XmlLayoutSerializer(this.DockingManager);
    var stringBuilder = new StringBuilder();
    using (var textWriter = new StringWriter(stringBuilder))
        xmlLayoutSerializer.Serialize(textWriter);
    var serialized = stringBuilder.ToString();
    (this.DataContext as dynamic).XmlSerializedAndEscapedLayout = HttpUtility.HtmlEncode(serialized);
}
private void LoadLayout()
{
    if (DataContext == null)
        return;
    var encoded = (DataContext as dynamic).XmlSerializedAndEscapedLayout;
    var window = Window.GetWindow(this);
    window.Closing += (sender, args) => SaveLayout();
    if (String.IsNullOrWhiteSpace(encoded))
        return;
    var serialized = HttpUtility.HtmlDecode(encoded);
    var xmlLayoutSerializer = new XmlLayoutSerializer(DockingManager);
    using (var stringReader = new StringReader(serialized))
        xmlLayoutSerializer.Deserialize(stringReader);
}
private void DockingManager_OnDataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
{
    if (e.NewValue != null) // A type check here would be best, I know.
        LoadLayout();
} 
```

...和视图模型...

```
public class ProjectViewModel
{
    public IModel Model { get; private set; }
    public String SerializedLayout { get; set; }
    public ViewModelBase Active { get; set; }
    private readonly ObservableCollection<ViewModelBase> documents;
    public ReadOnlyObservableCollection<ViewModelBase> Documents { get; private set; }
    private readonly ObservableCollection<ViewModelBase> anchorables;
    public ReadOnlyObservableCollection<ViewModelBase> Anchorables { get; private set; }

    public ProjectViewModel(String filePath, String serializedLayout)
    {
        SerializedLayout = serializedLayout;
        using (var fileStream = new FileStream(filePath, FileMode.Open))
        {
            IModelRepository modelRepository = Ioc.DependencyInjectionContainer.DefaultContainer.Resolve<IModelRepository>();
            Model = modelRepository.Load(fileStream);
        }
        documents = new ObservableCollection<ViewModelBase>();
        anchorables = new ObservableCollection<ViewModelBase>();
        documents.Add(new Workspace());
        anchorables.Add(new RiskLimitsViewModel(Model.RiskLimits));
        ...
        Documents = new ReadOnlyObservableCollection<ViewModelBase>(documents);
        Anchorables = new ReadOnlyObservableCollection<ViewModelBase>(anchorables);
    }
} 
```

任何见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T06:16:24.513

我必须在 XAML 中添加它...

```
...
</ad:DockingManager.Theme>
<ad:DockingManager.LayoutUpdateStrategy>
    <views:LayoutUpdateStrategy/>
</ad:DockingManager.LayoutUpdateStrategy>

<ad:DockingManager.LayoutItemTemplateSelector>
... 
```

...这在代码隐藏中...

```
class LayoutUpdateStrategy : ILayoutUpdateStrategy
{
    private bool BeforeInsertContent(LayoutRoot layout, LayoutContent anchorableToShow)
    {
        var viewModel = (ViewModelBase) anchorableToShow.Content;
        var layoutContent = layout.Descendents().OfType<LayoutContent>().FirstOrDefault(x => x.ContentId == viewModel.ContentId);
        if (layoutContent == null)
            return false;
        layoutContent.Content = anchorableToShow.Content;
        // Add layoutContent to it's previous container
        var layoutContainer = layoutContent.GetType().GetProperty("PreviousContainer", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(layoutContent, null) as ILayoutContainer;
        if (layoutContainer is LayoutAnchorablePane)
            (layoutContainer as LayoutAnchorablePane).Children.Add(layoutContent as LayoutAnchorable);
        else if (layoutContainer is LayoutDocumentPane)
            (layoutContainer as LayoutDocumentPane).Children.Add(layoutContent);
        else
            throw new NotSupportedException();
        return true;
    }
    public bool BeforeInsertAnchorable(LayoutRoot layout, LayoutAnchorable anchorableToShow, ILayoutContainer destinationContainer)
    {
        return BeforeInsertContent(layout, anchorableToShow);
    }
    public void AfterInsertAnchorable(LayoutRoot layout, LayoutAnchorable anchorableShown) {}
    public bool BeforeInsertDocument(LayoutRoot layout, LayoutDocument anchorableToShow, ILayoutContainer destinationContainer)
    {
        return BeforeInsertContent(layout, anchorableToShow);
    }
    public void AfterInsertDocument(LayoutRoot layout, LayoutDocument anchorableShown) {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T08:45:24.733

我用这个：

XAML：

```
<avalonDock:DockingManager 
x:Name="dockManager" 
AllowMixedOrientation="True" 
DocumentClosing="dockManager_DocumentClosing" 
AnchorablesSource="{Binding ListUserPanelAnchorable}"
DocumentsSource="{Binding ListUserPanel}"
Theme="{Binding avalondockTheme}"> 
```

模型 ：

```
public ObservableCollection<UserPanel> _ListUserPanelAnchorable;
ReadOnlyObservableCollection<UserPanel> _readonyFiles = null;
public ReadOnlyObservableCollection<UserPanel> ListUserPanelAnchorable
{
    get
    {
        if (_readonyFiles == null)
            _readonyFiles = new ReadOnlyObservableCollection<UserPanel>(_ListUserPanelAnchorable);

        return _readonyFiles;
    }
} 
```

xml.cs：

```
private void loadLayout()
{
    //dockPanelModel.ListUserPanel.Clear();
    //dockPanelModel.ListUserPanelAnchorable.Clear();
    var serializer = new XmlLayoutSerializer(dockManager);
    serializer = new XmlLayoutSerializer(dockManager);
    serializer.LayoutSerializationCallback += (s, args) =>
    {
        args.Content = userPanel;
                dockPanelModel._ListUserPanelAnchorable.Add(userPanel);
    }
}

public AvaladonDockPanel()
{
    InitializeComponent();
    this.Loaded += AvaladonDockPanel_Loaded;                
}       

void AvaladonDockPanel_Loaded(object sender, RoutedEventArgs e)
{
    loadLayout();          
} 
```

用户面板：

```
public class UserPanel
{
    public string Title { get; set; }
    public string ToolTip { get; set; }
    public string IconSource { get; set; }

    private Guid _contentGuid = Guid.NewGuid();
    public Guid ContentId
    {
        get { return _contentGuid; }
        set { _contentGuid = value; }
    }

    private UserControl _UserInterface;
    public UserControl UserInterface { get { return _UserInterface; } set { _UserInterface = value; NotifyPropertyChanged("UserInterface"); } }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            Debug.WriteLine(string.Format("PropertyChanged-> {0}", propertyName));
        }
    }
} 
```

将 avalon 绑定到用户面板：

```
<avalonDock:DockingManager.LayoutItemContainerStyle>
    <Style TargetType="{x:Type avalonDock:LayoutItem}">
        <Setter Property="Title" Value="{Binding Model.Title}"/>
        <Setter Property="ToolTip" Value="{Binding Model.ToolTip}"/>
        <Setter Property="IconSource" Value="{Binding Model.IconSource}" />
        <Setter Property="ContentId" Value="{Binding Model.ContentId}"/>
    </Style>
</avalonDock:DockingManager.LayoutItemContainerStyle>
<avalonDock:DockingManager.LayoutItemTemplate >
    <DataTemplate >
        <ContentPresenter Content="{Binding UserInterface}"  />
    </DataTemplate>
</avalonDock:DockingManager.LayoutItemTemplate> 
```

# java - 尽管定义了空闲实例，但前端实例预热

> ID：14585558
> 
> 赞同：1
> 
> 时间：2013-01-29T14:45:13.510
> 
> 标签：java, google-app-engine

我有一个启用了计费的 AppEngine 应用程序。我还设置了 1 个空闲实例，并将挂起延迟设置为 500 毫秒。

问题是我得到了很多新的前端实例预热：

> 此请求导致为您的应用程序启动一个新进程，从而导致您的应用程序代码首次加载。因此，与您的应用程序的典型请求相比，此请求可能需要更长的时间并使用更多的 CPU。

这主要是因为它通常发生在几分钟没有活动之后，尽管我设置了一个空闲实例。即使设置了 2 个空闲实例，问题也没有解决。

这让我们的客户感到非常沮丧。任何帮助将不胜感激。

谢谢，吉拉德。

编辑：

附上日志：

```
2013-01-29 15:00:09.569 /gwtRequest 200 1169ms 0kb Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17
I 2013-01-29 15:00:08.455 [s~my-appengine-app/5.364695570610280531].<stdout>: NamespaceFilter - namespace is: *******
I 2013-01-29 15:00:08.976 com.*.common.server.rf.LogServiceLayerDecorator invoke: Server RF: Calling functionB()
I 2013-01-29 15:00:08.985 com.*.common.server.apis.MyService functionB: MyService-functionB: statId: 95001; someBean-Id:950010000001666; someBean-o
I 2013-01-29 15:00:09.564 com.*.common.server.apis.MyService functionB: MyService-functionB-finish:
2013-01-29 15:00:08.198 /gwtRequest 200 15664ms 0kb Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17
I 2013-01-29 14:59:59.928 com.google.inject.internal.util.$FinalizableReferenceQueue$SystemLoader loadFinalizer: Not allowed to access system class loader.
I 2013-01-29 14:59:59.957 com.google.inject.internal.util.$FinalizableReferenceQueue <init>: Failed to start reference finalizer thread. Reference cleanup will only occur when
I 2013-01-29 15:00:03.164 [s~my-appengine-app/5.364695570610280531].<stdout>: TRACE: Manifest file jar:file:/base/data/home/apps/s~my-appengine-app/5.364695570610280531
I 2013-01-29 15:00:03.166 [s~my-appengine-app/5.364695570610280531].<stdout>: INFO : Hibernate Validator 4.1.0.Final at org.hibernate.validator.util.Version.(Version.java:
I 2013-01-29 15:00:03.194 [s~my-appengine-app/5.364695570610280531].<stdout>: DEBUG: Found javax.persistence.PersistenceUtil on classpath. at org.hibernate.validator.engin
I 2013-01-29 15:00:03.199 [s~my-appengine-app/5.364695570610280531].<stdout>: INFO : Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResol
I 2013-01-29 15:00:03.209 [s~my-appengine-app/5.364695570610280531].<stdout>: DEBUG: No META-INF/validation.xml found. Using annotation based configuration only at org.hib
I 2013-01-29 15:00:03.860 [s~my-appengine-app/5.364695570610280531].<stdout>: NamespaceFilter - namespace is: *******
I 2013-01-29 15:00:07.796 com.*.common.server.rf.LogServiceLayerDecorator invoke: Server RF: Calling functionA()
I 2013-01-29 15:00:07.967 com.*.common.server.apis.MyService functionA: MyService-functionA: amountInCents: 1100; Id:-1799069631; statId:95001
I 2013-01-29 15:00:08.197 This request caused a new process to be started for your application, and thus caused your application code to be loaded for the first time. This requ
2013-01-29 14:49:01.044 /gwtRequest 200 740ms 0kb Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17
I 2013-01-29 14:49:00.365 [s~my-appengine-app/5.364695570610280531].<stdout>: NamespaceFilter - namespace is: *******
I 2013-01-29 14:49:00.411 com.*.common.server.rf.LogServiceLayerDecorator invoke: Server RF: Calling functionB()
I 2013-01-29 14:49:00.425 com.*.common.server.apis.MyService functionB: MyService-functionB: statId: 95001; someBean-Id:950010000001665; someBean-o
I 2013-01-29 14:49:01.032 com.*.common.server.apis.MyService functionB: MyService-functionB-finish: 
```

如你看到的：

1) functionB() 在 14:49 被调用

2) 10 分钟左右没有活动

3) functionA() 在 14:59:59 被调用

4) functionA() 导致产生一个新实例

5) 下一次对 functionB() 的调用仅在对 functionA() 的调用结束时调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:53:39.477

将延迟设置为更高的数字，一旦 idel 实例处理请求的时间超过您设置的延迟，就会生成一个新实例。

日志显示您有两个请求：一个耗时 740 毫秒，一个耗时 15.6 秒，这意味着当 740 毫秒的请求开始时，已经有一个请求处理（15.6 的请求）导致加载新实例。

# delphi - 将 Delphi 2009 项目转移到另一台 PC

> ID：14585561
> 
> 赞同：0
> 
> 时间：2013-01-29T14:45:23.530
> 
> 标签：delphi, migration, delphi-2009, transfer

> **可能重复：**
> [如何迁移 Delphi 或克隆 Delphi 注册表设置？](https://stackoverflow.com/questions/9140013/how-to-migrate-delphi-or-clone-delphi-registry-settings)

我开始学习 Delphi 2009。我已经获得了使用旧 Tech 的 PC (Windows XP) 的权限，他在那里开发了几个 Delphi '09 项目，我想将这些项目迁移到我的新 PC (Windows 7)。我已经使用 cnPack 在 PC 上迁移/传输我可以迁移的内容，但是当我尝试在我的新 PC 上运行旧项目时，我无法找到一些依赖项（我相信是插件）。

有人知道将任何东西从Delphi '09 从Windows XP 转移到Windows 7 的最简单方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:53:09.750

最安全的方法是在新 PC 上安装所有必需的插件。这也是列出它们的好时机，包括使用的版本和供应商。稍后你会为此感谢自己。

另一种选择是手动安装所有组件，但您必须 100% 确定您拥有所有文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:52:36.490

从记忆里：

当我在 Delphi 工作时，我们设法组合了一种简单的方法，以便我们所有人都安装了相同的包。它涉及一些包含库和一些我们应该加载到注册表中的注册表文件的存储库。它工作得很好，因为我们都在 Windows XP 下。

但是，据我所知，W7 下的注册表项略有不同。

但是，您可以要求某人制作 WinXP 的相同副本并将其作为虚拟机运行在您的 W7 上。

# ruby - Dir#chdir() 是否会虚拟更改目录？

> ID：14585566
> 
> 赞同：1
> 
> 时间：2013-01-29T14:45:34.930
> 
> 标签：ruby

我有实际的目录路径：`C:\Documents and Settings\Matt\`现在我在这里尝试`Dir::chdir()`看看它是如何工作的。

```
C:\Documents and Settings\Matt>cd..

C:\Documents and Settings>cd..

C:\>irb
irb(main):001:0> Dir.pwd
=> "C:/"
irb(main):002:0> Dir.chdir('\Documents and Settings')
=> 0
irb(main):003:0> Dir.pwd
=> "C:/Documents and Settings" 
```

现在下面为什么会出现错误，而之前`pwd`显示当前目录更改为`"C:\Documents and Settings"`？

```
irb(main):004:0> Dir.chdir('\Matt')
Errno::ENOENT: No such file or directory - \Matt
        from (irb):4:in `chdir'
        from (irb):4
        from C:/Ruby193/bin/irb:12:in `<main>' 
```

但在它下面有效 - 这是否意味着 chdir 没有将目录更改为`"C:\Documents and Settings"`？从`C:\`我用的时候开始`Dir.chdir('\Documents and Settings')`？

```
irb(main):005:0> Dir.chdir('\Documents and Settings\Matt')
=> 0
irb(main):006:0> Dir.pwd
=> "C:/Documents and Settings/Matt"
irb(main):007:0> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:48:43.020

它改变了正在运行的程序的工作目录，而不是虚拟的。（但不是物理意义上的，当你退出时，提示符会显示一个不同的目录）

但是前面的反斜杠是指文件系统的根。

`\Matt`，以反斜杠开头，指的是在文件系统`Matt`的*根*目录中调用的目录，如`C:\Matt`. 那是不存在的。您想更改相对于 的目录`Documents and Settings`，因此请不要使用反斜杠。

```
Dir.pwd
=> "C:/"

Dir.chdir('\Documents and Settings')
# Matt is inside Documents and Settings, not at the root \
Dir.chdir('Matt')
# Or use .\ to refer to the current directory
Dir.chdir('.\Matt')
# Even better, use File.join to supply the correct separator, which makes this platform-independent
Dir.chdir(File.join('.','Matt')) 
```

如果你这样做：

```
Dir.chdir('\Matt') 
```

...它会尝试变成不存在的`C:\Matt`。

# vb.net - 如何设置控件颜色以匹配 VB.NET 中的 Windows Office 2007 颜色设置

> ID：14585568
> 
> 赞同：1
> 
> 时间：2013-01-29T14:45:38.393
> 
> 标签：vb.net, colors, infragistics, color-scheme

我一直在使用一些可以应用 Office 2007 样式的 Infragistics 组件，它们使用三种样式中的一种，蓝色、黑色或银色，带有一些自定义选项，以及 AppStylist 功能来制作自定义颜色/样式图书馆。

我需要做的是动态匹配 Windows 为这些样式设置的颜色，因为用户可能会更改他们的设置，并且某些组件需要匹配这些颜色，样式库不会更新，因为它们不是基础设施组件。（即第三方绘图工具插件背景颜色）

我试图确定这些颜色值将存储在哪里，以及如何访问它们。

到目前为止，我的想法是抓取 Infragistics 控件的颜色并将其转换为 RBG，然后将其用于其他控件。

另一种解决方案可能是使用 SystemColors，但我不确定这些是否与 Office 2007 风格相匹配。

最烦人的解决方案，但也许是最好的解决方案是专门使用 Infragistics 组件，但在绘图工具的情况下，这不是 100% 可能的。

最终目标是为我在软件中使用的图表获得漂亮的背景颜色，并更改当前丑陋的灰色弹出窗口。

# django - 在依赖项目上运行 selenium 测试

> ID：14585569
> 
> 赞同：1
> 
> 时间：2013-01-29T14:45:39.057
> 
> 标签：django, selenium, django-unittest

我有两个 Django 项目（项目 A 和项目 B），它们使用相同的代码库并具有单独的设置文件（我们使用 contrib.sites 框架）。这些项目也使用相同的数据库。

项目 A 依赖于项目 B：如果用户想从项目 A 登录，他将被重定向到项目 B 视图（以执行某些操作），然后返回到项目 A。一切正常，但当涉及测试。

我们有一个测试套件，其中包括一些 Selenium 测试。要测试项目 A 的登录视图，项目 A 和 B 在 selenium 测试运行时都必须处于活动状态。通常一个人会做

```
python manage_b.py runserver 8003 
```

接着

```
python manage_a.py test 
```

但是两个项目应该使用相同的数据库，并且项目 A 的测试数据库是在运行时创建的。

我怎么解决这个问题？测试运行器有什么办法也可以部署项目 B 吗？

当时我们使用标准的 Django 测试运行器，但是进行切换（例如切换到鼻子或您建议的任何内容）不会有问题。

# python - 按钮委托问题

> ID：14585575
> 
> 赞同：0
> 
> 时间：2013-01-29T14:45:58.797
> 
> 标签：python, pyqt, qitemdelegate

我希望有人可以帮助我解决我一直在努力解决的这个烦人的问题。我已经使用附加的代码在委托列的表格视图中插入按钮进行了管理。

问题是要按下按钮，我需要双击“激活”包含单元格。一旦单元格处于活动状态，我就可以按下按钮，所以我总共需要 3 次点击才能按下它。这可能会让您的普通用户感到困惑。

我将这个问题发布到 pyqt 邮件列表，得到的答案是：

“发生的情况是，当 TableWidget 收到点击时，它会创建一个编辑器，但编辑器还没有收到点击。这在大多数情况下是完美的，但如果你绘制一个按钮，它就不是了。”

有人来过这里吗？

在此先感谢，克里斯

```
class AnimLinkButtons(QtGui.QStyledItemDelegate):
    mouse_isPressed = False

    def __init__(self, parent = None):
        QtGui.QStyledItemDelegate.__init__(self, parent)

    def createEditor(self, parent, option, index):
        column = index.column()
        button = QtGui.QPushButton(parent)
        button.setText(self.text(index))
        ButtonLoc = self.ButtonLocation(option)
        button.setGeometry(ButtonLoc)
        Cellvalue = index.model().data(index, QtCore.Qt.EditRole)
        row = index.row()
        AssetId = index.model().data(index.model().index(row, 0)).toString()

        AnimTurntablePath = shotsGetData.getAssetTurntablePath(AssetId)
        browsePath = shotsGetData.getAssetPath(AssetId)
        #toAvidComp = shotsGetData.gettoAvidComp(ShotId)

        # Connect to button
        button.clicked.connect(lambda: self.mousePressEvent(index, browsePath, AssetTurntablePath))
        return button

    def setEditorData(self, editor, index):
        button = editor
        if not button:
            return

    def setModelData(self, editor, model, index):
        button = editor
        if not button:
            return

    def updateEditorGeometry(self, editor, option, index):
        ButtonLoc = self.ButtonLocation(option)
        editor.setGeometry(ButtonLoc)

    def paint(self, painter, option, index):
        opt = QtGui.QStyleOptionButton()
        #opt.icon = self.icon()
        opt.text = self.text(index)
        opt.rect = option.rect
        opt.palette = option.palette
        opt.rect = self.ButtonLocation(opt)
        QtGui.QApplication.style().drawControl(QtGui.QStyle.CE_PushButton, opt, painter)

    def ButtonLocation(self,  option):
        r = option.rect
        x = r.left() + 10
        y = r.top() + 10
        w = 30;
        h = 30
        return QRect(x,y,w,h);

    def text(self,  index):
        #print self.column
        column = index.column()
        if column == 7:
            return QtCore.QString("Mov")

    def mousePressEvent(self, index, browsePath , AssetTurntablePath):
        column = index.column()
        print "PRESSSED"

        if column == 7:
            subprocess.Popen(AnimTurntablePath, shell=True) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:47:38.277

我最近做了类似的东西。如果您在 中制作了按钮`createEditor`，您将在编辑模式下激活它。当您双击单元格时会发生这种情况。所以邮件列表中的评论是正确的。

在不编辑的情况下做到这一点很棘手。您在`paint`方法中绘制的按钮只是一幅画，而不是实际的按钮。您应该监视`editorEvent`鼠标事件。它为此目的捕获`mouseButtonPress`和事件。`mouseButtonRelease`

此外，如果您想要单击按钮的“视觉”效果，这会使事情变得复杂。无论如何，下面是一个基本的实现。它用和发出`buttonClicked`信号。`row``column`

*注意*：重绘依赖于委托也将接收来自其他列的事件这一事实。如果您将它与 一起使用，这很可能*无法*`setItemDelegateForColumn`正常工作，因为在这种情况下，委托将仅接收来自该列的事件。因此，我建议您将其用于整个表格并根据列进行绘制。

```
class ButtonDelegate(QtGui.QStyledItemDelegate):
    buttonClicked = QtCore.pyqtSignal(int, int)

    def __init__(self, parent = None):
        super(ButtonDelegate, self).__init__(parent)
        self._pressed = None

    def paint(self, painter, option, index):
        painter.save()
        opt = QtGui.QStyleOptionButton()
        opt.text = index.data().toString()
        opt.rect = option.rect
        opt.palette = option.palette
        if self._pressed and self._pressed == (index.row(), index.column()):
            opt.state = QtGui.QStyle.State_Enabled | QtGui.QStyle.State_Sunken
        else:
            opt.state = QtGui.QStyle.State_Enabled | QtGui.QStyle.State_Raised
        QtGui.QApplication.style().drawControl(QtGui.QStyle.CE_PushButton, opt, painter)
        painter.restore()

    def editorEvent(self, event, model, option, index):
        if event.type() == QtCore.QEvent.MouseButtonPress:
            # store the position that is clicked
            self._pressed = (index.row(), index.column())
            return True
        elif event.type() == QtCore.QEvent.MouseButtonRelease:
            if self._pressed == (index.row(), index.column()):
                # we are at the same place, so emit
                self.buttonClicked.emit(*self._pressed)
            elif self._pressed:
                # different place.
                # force a repaint on the pressed cell by emitting a dataChanged
                # Note: This is probably not the best idea
                # but I've yet to find a better solution.
                oldIndex = index.model().index(*self._pressed)
                self._pressed = None
                index.model().dataChanged.emit(oldIndex, oldIndex)
            self._pressed = None
            return True
        else:
            # for all other cases, default action will be fine
            return super(ButtonDelegate, self).editorEvent(event, model, option, index) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-27T11:22:18.907

问题是很久以前写的，所以我没有花很多时间来回答......但是前几天也遇到了同样的问题。在stackoverflow上找到了解决方案，但找不到帖子了，忘记了书签和upvote ...但仍然有github上解决方案文件的链接！

[以她为例](https://gist.github.com/Riateche/5984815)

重要的是`openPersistentEditor(index)`在 QTableView 上使用。在初始化视图时调用它，您的委托小部件将立即被绘制。

如果您使用代理模型，请注意在调用 openPersistentEditor(index) 时使用代理模型的 QModelInstances。

# ruby-on-rails - Rails 外部 MySQL 数据库 - 无需迁移

> ID：14585578
> 
> 赞同：2
> 
> 时间：2013-01-29T14:46:13.690
> 
> 标签：ruby-on-rails

我正在开发一个 Rails 应用程序作为更大解决方案的一部分。该解决方案的核心将是一个 mySQL 数据库，将来还会有其他 Web 服务和连接器。

我们计划首先根据 Rails 约定对数据、列名、关系进行建模。但我希望我将使用“建立连接”来将表映射到实际数据库，然后不在 rails 本身使用任何迁移。

所以我的问题是，将 Rails 应用程序附加到外部数据源以对数据模型进行持续更改的最佳实践是什么。

我是否应该简单地使用新字段和手动关系更新 model.rb 文件，然后允许 rails 通过建立连接到每个表？

是否有任何工具可以同步已更改的字段和/或数据模型中可能已更改的关系？其他开发人员之一熟悉 Symfony，并表示他们使用过类似的东西。我为数据库进行逆向工程而找到的 gem 要么已经过时，要么似乎只是删除了 .rb 文件，而没有考虑到字段或关系。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:03:47.677

> 是否有任何工具可以同步已更改的字段和/或数据模型中可能已更改的关系？

按照设计，Ruby on Rail 的迁移旨在在对 RoR 模型进行更改时增量更新数据库。

如果我理解正确，您有兴趣记录相反方向的变化；如果您愿意，可以进行反迁移；）。如果是这样，那么迁移不是一个很好的匹配。

根据您的数据库更改的记录方式（您提到此 web 应用程序是大型机器中的一个齿轮），我建议您一起放弃迁移，因为这些迁移旨在对数据库进行更改。话虽如此，我强烈建议使用迁移来记录您的数据库更改。

回到你的问题。`rake db:migrate`通过简单地运行（没有任何迁移）简单地更新`db\schema.rb`文件，我可能会在这个问题上出错。`schema.rb`将始终反映调用时的最新数据库结构。不幸的是，这就是魔法停止的地方。如果影响模型的属性名称，Rails webapp 将需要更新以反映任何 DB 元数据更改。

> 我是否应该简单地使用新字段和手动关系更新 model.rb 文件，然后允许 rails 通过建立连接到每个表？

是的，恕我直言：）

HTH，祝你好运。

# c++ - 内存管理的想法，std::map，boost::shared_ptr

> ID：14585579
> 
> 赞同：1
> 
> 时间：2013-01-29T14:46:24.070
> 
> 标签：c++, design-patterns, shared-ptr, observer-pattern, command-pattern

这个问题很长，请多多包涵。

我正在尝试解决我在内存管理、共享指针和映射方面遇到的困境。我只是想得到一些关于我的架构的反馈，也许你们中的一些人过去会做得更好。

下面的例子会做的是伪代码。

我有一个监听器类：

```
class MyListener {
   friend class Command;
   public:
      MyListener() {}
      virtual ~MyListener() {}
      void handleUpdate() {
           std::cout << "Update Handled" << std::endl;
      }
}; 
```

每次调用对象更新时都会调用它。我正在使用一个名为 OpenDDS 的中间件来实现进程间通信框架。

我有一个命令类，它继承了一个 DDS 对象，并利用了 on_data_received()。当 on_data_received() 被调用时，我想从上面的类中调用 handleUpdate() 方法。

```
class Command {
   public:
      /*standard constructor destructor here*/
      void on_data_received() {
          m_listener->handleUpdate();
      }
      void write();
   private:
      MyListener *m_listener;
 }; 
```

问题就在这里。管理这个的类是一个 Singleton，并使用两种方法*发布*和*订阅*来发布 DDS 消息或订阅一个。*subscribe*方法接受一个键值和一个原始指针。

单例管理一个

```
std::map<std::string name, Command> 
```

其中一个*Command*类包含*MyListener*类。

这是一个破坏它的伪代码片段：

```
class TaterTotListener : public MyListener {
     void handleCommand() {
         std::cout << "Tater tot found" << std::endl;
     }
};

int main() {
    // make a new smart pointer to the listener
    boost::shared_ptr<TaterTotListener> ttl(new TaterTotListener);
    // tell the singleton we want to publish an object called "TaterTot"
    CommandManager::instance()->publish("TaterTot");
    // tell the singleton we want to subscribe to an object called tater tot
    CommandManager::isntance()->subscribe("TaterTot", ttl.get());

    // processing goes here
    // deallocation

} 
```

在解除分配时，boost 正在删除它对共享指针的所有权。CommandManager 尝试通过删除所有名为“TaterTot”的对象来“清理”，但由于 boost::shared_ptr 已经清理了自己，因此引发了双重可用内存损坏。CommandManager 单例*总是*最后清理，因此声明一个原始指针并传递给 subscribe 方法将导致相同的行为。

有什么想法吗？我错过了一些明显和直观的东西吗？我是否误解了在这种情况下共享指针的使用？

任何帮助是极大的赞赏。我给你买啤酒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:21:20.637

您的设计混合了两种著名的设计模式[**Observer**](http://sourcemaking.com/design_patterns/observer)和[**Command**](http://sourcemaking.com/design_patterns/command)。

Observer 定义了对象之间的一对多依赖关系，这样当一个对象改变状态时，它的所有依赖客户端都会被通知并自动更新。

Command 将请求封装为对象，从而使您可以对具有不同请求、队列或日志请求的客户端进行参数化，并支持可撤消的操作。

我建议研究这些模式（参见上面的链接）并重构您的设计以将请求的封装与对这些请求的观察分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:22:10.477

首先，我建议在另一个答案中遵循 rhalbersma 的建议。另外，我会仔细检查您是否需要单身人士。从您的描述中，我看不出对它的强烈需求。

从技术上讲，这是所有权问题。您提供的信息需要我猜测几件事。我想`MyListener`实例应该在不同的东西、一个`Command`对象和其他东西之间共享（因为你使用`shared_ptr`）。因此，您需要通过以下方式真正分享这种所有权：

```
class Command {
   private:
      boost::shared_ptr<MyListener> m_listener;
}; 
```

和

```
CommandManager::isntance()->subscribe("TaterTot", ttl); 
```

所以 MyListener 将被最后一个所有者释放。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T19:46:37.650

感谢贡献者，我已经成功地创建了一个最小的、可编译的示例，这正是我想要的，正如@rhalbersma 所建议的那样，使用观察者设计模式。

```
#include <cstdlib>
#include <iostream>
#include <map>
#include <boost/shared_ptr.hpp>
#include <vector>

class Listener {
public:
    virtual void handleUpdate() = 0;
    std::string *string;
};

class Command {
    std::vector<boost::shared_ptr<Listener> > listener;

public:

    ~Command() {
    }

    void setListener(boost::shared_ptr<Listener> l) {
        listener.push_back(l);
    }

    void handleCommand() {
        for (int i = 0; i < listener.size(); i++) {
            //std::cout << "Handle command " << i << std::endl;
            listener.at(i)->string = string;
            listener.at(i)->handleUpdate();
        }
    }

    void write(std::string value) {
        std::cout << "Write 1" << std::endl;
        string = &value;
        handleCommand();
    }

private:
    std::string *string;
};

class MyListener : public Listener {
public:

    MyListener(int num) : num(num) {
    };

    ~MyListener() {
    }

    void handleUpdate() {
        std::cout << "Listener " << num << " with string " << *string << std::endl;
    }

private:

    int num;
};

class CommandManager {
public:

    void publish(std::string name, std::string value) {
        std::map<std::string, boost::shared_ptr<Command> >::iterator it;
        it = commandMap.find(name);
        if (it == commandMap.end()) {
            // add a new one
            boost::shared_ptr<Command> command(new Command());
            commandMap[name] = command;
        }

        it = commandMap.find(name);
        it->second->write(value);
    }

    void subscribe(std::string name, boost::shared_ptr<Listener> l) {
        std::map<std::string, boost::shared_ptr<Command> >::iterator it;
        it = commandMap.find(name);
        if (it == commandMap.end()) {
            boost::shared_ptr<Command> command(new Command());
            command->setListener(l);
            commandMap[name] = command;
        } else {

            it->second->setListener(l);
        }
    }        

private:

    std::map<std::string, boost::shared_ptr<Command> > commandMap;
};

int main(int argc, char** argv) {

    boost::shared_ptr<MyListener> myListener0(new MyListener(0));
    boost::shared_ptr<MyListener> myListener1(new MyListener(1));
    boost::shared_ptr<MyListener> myListener2(new MyListener(2));

    CommandManager commandManager;

    commandManager.subscribe("Tyler", myListener0);
    commandManager.subscribe("Tyler", myListener1);
    commandManager.subscribe("Tyler", myListener2);

    commandManager.publish("Tyler", " is cool");

    return 0;
} 
```

我为可能遇到同样问题的谷歌用户提供了完整的资源。再次感谢 StackOverflow。

# plsql - 一个批量收集操作循环中的两个（或多个）DML

> ID：14585590
> 
> 赞同：3
> 
> 时间：2013-01-29T14:46:51.003
> 
> 标签：plsql, oracle11g, bulkinsert, paradigms, bulk-collect

我对 Oracle 11g 上的 BULK COLLECT 逻辑有疑问。

存储过程中的原始逻辑是：

```
PROCEDURE FOO(IN_FOO IN VARCHAR2) IS
BEGIN
  FOR CUR IN (SELECT COL1,COL2,COL3 FROM SOME_TABLE) LOOP
    INSERT INTO OTHER_TABLE (C1,C2,C3) VALUES (CUR.COL1,CUR.COL2,CUR.COL3);
    UPDATE THIRD_TABLE T SET T.C_SUM = CUR.COL2 + CUR.COL3 WHERE T.C_ID = CUR.COL1);
  END LOOP;
EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE(SQLERROR || ': ' || SQLERRM);
END FOO; 
```

但我想使用`BULK COLLECT`功能。

我写了这样的东西：

```
PROCEDURE FOO_FAST(IN_FOO IN VARCHAR2) IS
  CURSOR CUR IS SELECT COL1,COL2,COL3 FROM SOME_TABLE;
  TYPE RT_CUR IS TABLE OF CUR%ROWTYPE;
  LT_CUR RT_CUR;
  DML_EXCEPTION EXCEPTION;
  PRAGMA EXCEPTION_INIT(DML_EXCEPTION, -24381);
BEGIN
  OPEN CUR;
  LOOP
    FETCH CUR BULK COLLECT INTO LT_CUR LIMIT 1000;
    EXIT WHEN LT_CUR.COUNT = 0;
    BEGIN
      FORALL I IN 1 .. LT_CUR.COUNT 
        INSERT INTO OTHER_TABLE (C1,C2,C3) VALUES (LT_CUR(I).COL1,LT_CUR(I).COL2,LT_CUR(I).COL3);
      FORALL I IN 1 .. LT_CUR.COUNT 
        UPDATE THIRD_TABLE T SET T.C_SUM = LT_CUR(I).COL2 + LT_CUR(I).COL3 WHERE T.C_ID = LT_CUR(I).COL1);
    EXCEPTION
      WHEN DML_EXCEPTION THEN
        FORALL I IN 1 .. SQL%BULK_EXCEPTIONS(1).ERROR_INDEX-1
          UPDATE THIRD_TABLE T SET T.C_SUM = LT_CUR(I).COL2 + LT_CUR(I).COL3 WHERE T.C_ID = LT_CUR(I).COL1);
        DBMS_OUTPUT.PUT_LINE(SQLERRM(-SQL%BULK_EXCEPTIONS(1).ERROR_CODE));
        RETURN;
    END;
  END LOOP;
EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE(SQLERROR || ': ' || SQLERRM);
END FOO_FAST; 
```

这是解决这个问题的好方法吗？

如果我要执行更多 DML 怎么办？

* * *

行。我的问题更复杂，但我想简化它并用漂亮的示例代码丰富它。错误`OTHERS`处理不是这个问题的一部分。也许这会更清楚：

这是怎么回事：

```
 FOR CUR IN (SELECT COL1,COL2,COL3 FROM SOME_TABLE) LOOP
    INSERT INTO OTHER_TABLE (C1,C2,C3) VALUES (CUR.COL1,CUR.COL2,CUR.COL3);
    UPDATE THIRD_TABLE T SET T.C_SUM = CUR.COL2 + CUR.COL3 WHERE T.C_ID = CUR.COL1);
  END LOOP; 
```

更改为`BULK COLLECT`和`FORALL`语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:34:52.267

某事是否是“好方法”是非常主观的——这取决于您要比较的对象。

如果我们假设您的查询`some_table`没有谓词，那么在集合中工作而不是进行任何类型的循环几乎肯定会更有效（除了更少的代码）

```
PROCEDURE FOO(IN_FOO IN VARCHAR2) IS
BEGIN
  INSERT INTO other_table( c1, c2, c3 )
    SELECT col1, col2, col3
      FROM some_table;

  UPDATE third_table tt
     SET tt.c_sum = (SELECT st.col2 + st.col3
                       FROM some_table st
                      WHERE tt.c_id = st.col1)
   WHERE EXISTS( SELECT 1
                   FROM some_table st
                  WHERE tt.c_id = st.col1);
END; 
```

通常，`WHEN OTHERS`异常处理程序是一个坏主意。捕获异常只是为了尝试将其写入`DBMS_OUTPUT`调用者不知道发生错误的位置，错误堆栈丢失的位置，以及无法保证调用应用程序甚至为要写入的数据分配缓冲区的位置to 是一个等待发生的错误。如果你的系统中有这样的代码，你将不可避免地最终努力重现错误，因为某处的某些代码遇到并吞下了异常，导致后面的代码以意想不到的方式失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T15:56:45.470

你原来的错误管理过程有问题，这使得很难将逻辑转换为批量处理。

基本上你的第一个过程的逻辑是：在一个循环中运行这两个语句，当你第一次遇到错误或光标结束时成功退出，以先发生者为准。

这不是正确的事务逻辑。如果您的两个语句协同工作而第二个语句失败，则第一个语句不会回滚！

您可能想要做的是：在循环中运行这两个语句；如果遇到错误，记录信息并撤消更改，如果没有成功退出。在 PL/SQL 中撤消更改非常容易，您只需要让错误传播：

```
PROCEDURE FOO(IN_FOO IN VARCHAR2) IS
BEGIN
  FOR CUR IN (SELECT COL1,COL2,COL3 FROM SOME_TABLE) LOOP
    BEGIN
       INSERT INTO OTHER_TABLE (C1,C2,C3) VALUES (CUR.COL1,CUR.COL2,CUR.COL3);
       UPDATE THIRD_TABLE T SET T.C_SUM = CUR.COL2 + CUR.COL3 
        WHERE T.C_ID = CUR.COL1;
    EXCEPTION
       WHEN OTHERS THEN
          dbms_output.put_line(cur.col1/*...*/); -- log **useful** debug info
          RAISE;-- very important for transactional logic
    END;
  END LOOP;
END; 
```

顺便说一句`DBMS_OUTPUT`，不是最好的日志记录工具，您可能希望创建一个日志记录表和一个自治事务过程来插入相关的错误消息和标识符。

如果您想通过使用批量逻辑来转换上述过程，您最好的做法是使用[Justin Cave](https://stackoverflow.com/a/14586518/119634)描述的方法（单个 DML 语句）。使用批量数组时，[`SAVE EXCEPTIONS`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/tuning.htm#sthref998)如果要记录单个异常，则需要使用该子句。不要忘记重新提出错误。这应该有效：

```
PROCEDURE foo_fast(in_foo IN VARCHAR2) IS
   CURSOR cur IS
      SELECT col1, col2, col3 FROM some_table;
   TYPE rt_cur IS TABLE OF cur%ROWTYPE;
   lt_cur rt_cur;
   dml_exception EXCEPTION;
   PRAGMA EXCEPTION_INIT(dml_exception, -24381);
BEGIN
   OPEN cur;
   LOOP
      FETCH cur BULK COLLECT
         INTO lt_cur LIMIT 1000;
      EXIT WHEN lt_cur.COUNT = 0;
      BEGIN
         FORALL i IN 1 .. lt_cur.COUNT SAVE EXCEPTIONS -- important clause
            INSERT INTO other_table (c1, c2, c3) 
               VALUES (lt_cur(i).col1, lt_cur(i).col2, lt_cur(i).col3);
         FORALL i IN 1 .. lt_cur.COUNT SAVE EXCEPTIONS -- 
            UPDATE third_table t SET t.c_sum = lt_cur(i).col2 + lt_cur(i).col3 
             WHERE t.c_id = lt_cur(i).col1;
      EXCEPTION
         WHEN dml_exception THEN
            FOR i IN 1 .. SQL%BULK_EXCEPTIONS.COUNT LOOP
               dbms_output.put_line('error '||i||':'||
                      SQL%BULK_EXCEPTIONS(i).error_code);
               dbms_output.put_line('col1='|| 
                      lt_cur(SQL%BULK_EXCEPTIONS(i).error_index).col1);-- 11g+
            END LOOP;
         raise_application_error(-20001, 'error in bulk processing');
      END;
   END LOOP;
END foo_fast; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T16:27:25.413

我通过使用这种流程找到了解决方案：

```
PROCEDURE FOO_FAST(IN_FOO IN VARCHAR2) IS
  CURSOR CUR IS SELECT COL1,COL2,COL3 FROM SOME_TABLE;
  TYPE RT_CUR IS TABLE OF CUR%ROWTYPE;
  LT_CUR RT_CUR;
  DML_EXCEPTION EXCEPTION;
  PRAGMA EXCEPTION_INIT(DML_EXCEPTION, -24381);
BEGIN
  OPEN CUR;
  LOOP
    FETCH CUR BULK COLLECT INTO LT_CUR LIMIT 1000;
    EXIT WHEN LT_CUR.COUNT = 0;
    BEGIN
      FORALL I IN 1 .. LT_CUR.COUNT SAVE EXCEPTIONS
        INSERT INTO OTHER_TABLE (C1,C2,C3) VALUES (LT_CUR(I).COL1,LT_CUR(I).COL2,LT_CUR(I).COL3);
    EXCEPTION
      WHEN DML_EXCEPTION THEN
        FOR I IN 1 .. SQL%BULK_EXCEPTIONS.COUNT
          DBMS_OUTPUT.PUT_LINE(SQLERRM(-SQL%BULK_EXCEPTIONS(1).ERROR_CODE));
          LT_CUR.DELETE(SQL%BULK_EXCEPTIONS(1).ERROR_INDEX);
    END;
    FORALL I IN INDICES OF LT_CUR 
        UPDATE THIRD_TABLE T SET T.C_SUM = LT_CUR(I).COL2 + LT_CUR(I).COL3 WHERE T.C_ID = LT_CUR(I).COL1);
  END LOOP;
EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE(SQLERROR || ': ' || SQLERRM);
END FOO_FAST; 
```

在这个流程中：

1.  发生的所有异常`INSERT`都将存储在`SQL%BULK_EXCEPTIONS`集合中
2.  每个异常都将由`DBMS_OUTPUT.PUT_LINE`（在现实生活中按`AUTONOMOUS TRANSACTION`过程记录在日志表中）
3.  的每个错误索引`LT_CUT`将通过`DELETE`集合上的方法删除。
4.  只使用“好”行，`UPDATE`因为`INDICES OF`子句允许通过删除对特定元素的引用对稀疏集合进行批量操作

# java - 将 SQL 与 JAVA 代码分离

> ID：14585593
> 
> 赞同：4
> 
> 时间：2013-01-29T14:47:00.113
> 
> 标签：java, sql, dao

**问题**

在我的一些项目中，我使用了 SQL 代码，这没什么特别的。但我正在重新考虑这个策略。我搜索了一些东西来分隔我的代码和 SQL 语句。

我找到了一个我喜欢的答案，将所有 SQL 语句收集在一个属性文件中。我认为它很好，很干净。但是如果你想插入变量怎么办。

我发现的另一个解决方案是使用 DAO 对象。例如，您使用以下方法创建一个 MYSQLFactory 类：addCustomer(Customer customer)、deleteCustomer(int CustomerId) 等。您将集中您的 SQL 代码。仍然不会称它为分开的。

有没有更好的方法来做到这一点而不使用像 Hibernate 这样的 ORM。我读得越多，我就越相信 JAVA 没有一种简洁的方法可以做到这一点。

**搜索来源**

[Java - 将 SQL 语句存储在外部文件中](https://stackoverflow.com/questions/1544335/java-storing-sql-statements-in-an-external-file)

[将 SQL 与 Java 代码分离](https://stackoverflow.com/questions/10872919/separating-sql-from-the-java-code)

**更新**

感谢您的好评。我只是对此感到好奇。@Gilbert，我认为这是一个很好的解决方案，事实上，我曾经曾经使用过您的解决方案，所以谢谢。:)

有时我只是喜欢研究某些问题的新方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:55:41.303

你没有说明你的目标是什么。我不确定您是否只是在寻找将所有 SQL 代码放在一个地方的技术解决方案，或者是关于如何跨多种语言管理应用程序的建议。

对于用另一种语言管理 SQL 代码，以下是你的朋友：

*   存储过程
*   意见

以下不是你的朋友：

*   即席查询

问题是数据库的“API”。SQL 是原始数据表的接口。但是，通常数据库是应用程序的一个组件，应该有自己的 API。通常，该层应由视图和存储过程组成。因此，例如，更新和插入（即即席查询）应该包装在存储过程中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:52:38.663

不，没有。如果您不使用 ORM，则需要在代码中的某处进行直接 SQL 调用。如果您开始混淆工厂模式中的 sql 调用，那么您只是在制作一个糟糕的 ORM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:56:23.830

我个人更喜欢将 SQL 查询放在执行它的 Java 文件中。这使得维护代码更容易：无需在多个文件之间切换。

也就是说，将 SQL 查询存储在外部文件（属性或 XML 或其他文件）中非常简单。如果你需要插入一个变量，无论如何你都会使用准备好的语句，所以你的 SQL 看起来像

```
select foo.* from Foo foo where foo.id = ? 
```

唯一的困难是动态生成的 SQL 查询（例如，来自一组可选的搜索条件）。但是有些 API 允许生成这种 SQL 查询，而无需连接查询的各个部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:59:04.107

关于您的问题：
没有理想的方法，有几种解决方案：
A. 使用 ORM - 不确定您为什么不想要它。
B.按照您的建议使用属性文件 - 关于参数，
您需要处理它，考虑使用一些框架为您执行参数替换。
C. 您可以使用数据库中的存储过程/视图层抽象一些 SQL 查询。

# python - 学习python中的Queue模块（如何运行）

> ID：14585597
> 
> 赞同：3
> 
> 时间：2013-01-29T14:47:21.557
> 
> 标签：python, multithreading, python-3.x, queue

最近在队列设计中介绍了延迟处理以及实现“FIFO”等的能力。

浏览了文档，试图获得一个示例队列，以了解如何在我自己的设计/程序中实现它。但是我在运行这段代码时遇到了问题：

```
import queue

def worker():
    while True:
        item = q.get()
        do_work(item)
        q.task_done()

def main():

    q = queue.Queue(maxsize=0)
    for i in range(num_worker_threads):
         t = Thread(target=worker)
         t.daemon = True
         t.start()

    for item in source():
        q.put(item)

    q.join()       # block until all tasks are done

main() 
```

问题：希望有人解释 for 循环在做什么，我在运行代码时遇到错误，所以我必须遗漏一些东西。

发生的问题错误： **NameError：未定义全局名称'num_worker_threads'**

谢谢你来自-Python新手-

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-29T15:41:48.390

for 循环正在启动许多工作线程来执行“worker”定义的功能。这是应该在您的系统上以 python 2.7 运行的工作代码。

```
import Queue
import threading

# input queue to be processed by many threads
q_in = Queue.Queue(maxsize=0)

# output queue to be processed by one thread
q_out = Queue.Queue(maxsize=0)

# number of worker threads to complete the processing
num_worker_threads = 10

# process that each worker thread will execute until the Queue is empty
def worker():
    while True:
        # get item from queue, do work on it, let queue know processing is done for one item
        item = q_in.get()
        q_out.put(do_work(item))
        q_in.task_done()

# squares a number and returns the number and its square
def do_work(item):
    return (item,item*item)

# another queued thread we will use to print output
def printer():
    while True:
        # get an item processed by worker threads and print the result. Let queue know item has been processed
        item = q_out.get()
        print "%d squared is : %d" % item
        q_out.task_done()

# launch all of our queued processes
def main():
    # Launches a number of worker threads to perform operations using the queue of inputs
    for i in range(num_worker_threads):
         t = threading.Thread(target=worker)
         t.daemon = True
         t.start()

    # launches a single "printer" thread to output the result (makes things neater)
    t = threading.Thread(target=printer)
    t.daemon = True
    t.start()

    # put items on the input queue (numbers to be squared)
    for item in range(10):
        q_in.put(item)

    # wait for two queues to be emptied (and workers to close)   
    q_in.join()       # block until all tasks are done
    q_out.join()

    print "Processing Complete"

main() 
```

每个 @handle 的 Python 3 版本

```
import queue 
import threading

# input queue to be processed by many threads
q_in = queue.Queue(maxsize=0) 

# output queue to be processed by one thread
q_out = queue.Queue(maxsize=0) 

# number of worker threads to complete the processing
num_worker_threads = 10

# process that each worker thread will execute until the Queue is empty
def worker():
    while True:
        # get item from queue, do work on it, let queue know processing is done for one item
        item = q_in.get()
        q_out.put(do_work(item))
        q_in.task_done()

# squares a number and returns the number and its square
def do_work(item):
    return (item,item*item)

# another queued thread we will use to print output
def printer():
    while True:
        # get an item processed by worker threads and print the result. Let queue know item has been processed
        item = q_out.get()
        print("{0[0]} squared is : {0[1]}".format(item) )
        q_out.task_done()

# launch all of our queued processes
def main():
    # Launches a number of worker threads to perform operations using the queue of inputs
    for i in range(num_worker_threads):
         t = threading.Thread(target=worker)
         t.daemon = True
         t.start()

    # launches a single "printer" thread to output the result (makes things neater)
    t = threading.Thread(target=printer)
    t.daemon = True
    t.start()

    # put items on the input queue (numbers to be squared)
    for item in range(10):
        q_in.put(item)

    # wait for two queues to be emptied (and workers to close)   
    q_in.join()       # block until all tasks are done
    q_out.join()

    print( "Processing Complete" )

main() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T15:31:23.683

您可以将工作线程的数量视为银行的银行柜员数量。因此，人们（您的物品）排队（您的队列）由银行出纳员（您的工作线程）处理。队列实际上是一种简单且易于理解的机制来管理线程中的复杂性。

我已经稍微调整了您的代码以显示它是如何工作的。

```
import queue
import time
from threading import Thread

def do_work(item):
    print("processing", item)

def source():
    item = 1
    while True:
        print("starting", item)
        yield item
        time.sleep(0.2)
        item += 1

def worker():
    while True:
        item = q.get()
        do_work(item)
        q.task_done()

q = queue.Queue(maxsize=0)
def main():
    for i in range(2):
        t = Thread(target=worker)
        t.daemon = True
        t.start()

    for item in source():
        q.put(item)

    q.join()       # block until all tasks are done

main() 
```

# python - 为 python 安装 numba

> ID：14585598
> 
> 赞同：20
> 
> 时间：2013-01-29T14:47:24.280
> 
> 标签：python, installation, numba

我正在尝试为 python 安装[numba](http://numba.pydata.org/)，但是在按照主页的说明进行操作后，我收到了无法找到 extension_types 页面的错误。

如果有人知道我做错了什么或者我错过了应该安装的东西，我将不胜感激。

非常感谢您提前。

```
Python 2.7.2+ (default, Jul 20 2012, 22:15:08) 
Type "copyright", "credits" or "license" for more information.

IPython 0.10.2 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object'. ?object also works, ?? prints more.

In [1]: import numba
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)

/home/mijc/Downloads/numba/<ipython console> in <module>()

/home/mijc/Downloads/numba/numba/__init__.py in <module>()
      2 # type inferer

      3 from numba.special import *
----> 4 from numba import module_type_inference
      5 
      6 import os

/home/mijc/Downloads/numba/numba/module_type_inference.py in <module>()
      6 from numba import *
      7 from numba.minivect import minitypes
----> 8 from numba import typesystem, symtab
      9 
     10 import numpy.random

/home/mijc/Downloads/numba/numba/typesystem/__init__.py in <module>()
      2 from exttypes import *
      3 from closuretypes import *
      4 from ssatypes import *
      5 from templatetypes import *
      6 from typemapper import *

/home/mijc/Downloads/numba/numba/typesystem/basetypes.py in <module>()
      6 
      7 import numba
----> 8 from numba import  extension_types, error
      9 from numba.minivect.minitypes import *
     10 from numba.minivect.minitypes import map_dtype

ImportError: cannot import name extension_types 
```

编辑：我通过以下方式安装了 numba：

```
git clone https://github.com/numba/numba.git
cd numba
python setup.py install 
```

当我尝试通过 pip 安装它时，出现以下错误：

```
pip install numba --upgrade
Downloading/unpacking numba
  Downloading numba-0.5.0.tar.gz (333Kb): 333Kb downloaded
  Running setup.py egg_info for package numba
    Traceback (most recent call last):
      File "<string>", line 14, in <module>
      File "/home/mijc/Downloads/numba/build/numba/setup.py", line 90, in <module>
        cython_gdb=True),
      File "/usr/local/lib/python2.7/dist-packages/Cython/Distutils/extension.py", line 108, in __init__
        **kw)
    TypeError: unbound method __init__() must be called with Extension instance as first argument (got Extension instance instead)
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 14, in <module>

  File "/home/mijc/Downloads/numba/build/numba/setup.py", line 90, in <module>

    cython_gdb=True),

  File "/usr/local/lib/python2.7/dist-packages/Cython/Distutils/extension.py", line 108, in __init__

    **kw)

TypeError: unbound method __init__() must be called with Extension instance as first argument (got Extension instance instead)

----------------------------------------
Command python setup.py egg_info failed with error code 1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-04T17:12:51.537

我希望你在 Linux 上并且你已经安装了 pip。在我的 Debian Linux 上，我可以通过以下命令轻松安装 numba：

```
sudo apt-get install build-essential
sudo apt-get install llvm
pip install llvmpy
pip install cython
pip install numba 
```

然后你就完成了！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-29T02:21:04.230

在 Windows 上工作我添加了安装[Miniconda](http://conda.pydata.org/miniconda.html) 执行的相同问题

```
conda install numba 
```

这会安装一个带有所有 numba 包的 python 解释器，然后我将此包复制到我的解释器的环境中

你完成了

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-09T11:00:33.753

我有同样的问题，对我来说，解决方案是将[分发](https://pypi.python.org/pypi/distribute/0.6.45)升级到 0.6.45。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-20T15:35:30.073

我看到这个问题有点老了，但我会把我的经验放在这里，以防它帮助其他人使用谷歌搜索。对我来说最简单的解决方案是安装 Anaconda 发行版： [https](https://store.continuum.io/) ://store.continuum.io/ 请注意，有一个“非常免费”的通用版本，还有一个不错的学术版本……嗯，学术用途。:)

Numba 实际上得到了 Continuum 人员的支持，至少根据他们的[教程](http://continuum.io/blog/numba_growcut)之一。我已经安装了它，现在才开始玩这个东西。到目前为止，我一直很喜欢它（尽管在让它与我之前创建的一些 Cython 模块配合使用时遇到了一些小麻烦）。如果你走 Continuum 路线，他们有一个有点隐藏的[博客](http://continuum.io/blog/index)，我发现它很有用（主页上的链接在“公司”下，这不是我第一个看的地方）。查看他们标记为“Numba”的东西；那里有例子。

我通过 Anaconda 使用 Numba 的另一个秘密原因：由于它们似乎相对较新，我推测它们可能非常“超越”解决 Qs 或让 Numba 在他们的发行版中为您工作的问题——想要建立一个好名声和产品等等。当然，这只是我个人的纯粹猜测。

唯一的缺点：Anaconda 中没有包含 Picloud。我过去用过很多次，所以这令人失望。这对我自己来说意味着更多的工作，但零工作很好:)

注意：我根本不隶属于 Continuum。到目前为止，我对他们的产品感到惊喜。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-19T05:39:53.787

以下代码行解决了我的问题。

```
python -m pip install --user numba 
```

这是针对 ubuntu 的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-01T14:14:53.977

尝试：

> pip install numba==0.48

看起来装饰器模块在以后的 numba 版本中被删除了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-27T08:56:10.740

[使用virtualenv](https://pypi.python.org/pypi/virtualenv/)创建一个新的虚拟环境，并按照安装说明中给出的顺序在此环境中安装所有需要的组件。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-12-19T15:11:03.377

我有同样的问题，我只是通过在我的代码中导入 quantecon 之前导入 pandas 来修复它：

```
import pandas as pd
import quantecon as qe 
```

这个对我有用。

# java - 从 Java 中的阿拉伯 Unicode 代码点列表中检索表示形式的任何方法

> ID：14585600
> 
> 赞同：1
> 
> 时间：2013-01-29T14:47:26.233
> 
> 标签：java, unicode, arabic

在阿拉伯语中，每个字母都有基于周围字母的四种表示。更多信息：[Arabic](http://en.wikipedia.org/wiki/Arabic_script) Sc​​ript 、[Arabic in Unicode](http://en.wikipedia.org/wiki/Arabic_script_in_Unicode)和[Unicode 6.2.0 Chapter 8](http://www.unicode.org/versions/Unicode6.2.0/ch08.pdf)

我正在寻找一种算法实现，或者给定阿拉伯代码点数组的 OS 库，可以计算用于呈现文本的表示形式（孤立的、中间的等）。

我不想渲染文本本身，所以像 java.awt.font 这样的低级库将无济于事。我也尝试使用 ICU4J，但我找不到如何提取信息。

在我开始实施自己的解决方案之前有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:33:36.570

找到了可行的解决方法。使用 ICU4J 和 ArabicShapping 类，您可以将代码点从 06XX 代码块转换为 FEXX 代码块。FEXX 代码块包含有关表单的信息。有点牵强，所以如果我们实现 Unicode 标准中定义的连接算法可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:33:37.803

通常，如果您正在渲染阿拉伯文本，您实际上并没有更改 Unicode 代码点，您只需将每个字符映射到所选字体的字形，然后应用 OpenType 替换功能将每个字形更改为所需的形式。相关的 OpenType 功能是“medi”、“init”、“fina”和“isol”。

但是平台字体渲染应该为您处理这个问题，那么您实际上想要做什么？

# perl - 如何调用单个 perl 脚本以通过循环并行运行不同的输入参数

> ID：14585603
> 
> 赞同：2
> 
> 时间：2013-01-29T14:47:28.343
> 
> 标签：perl, parallel-processing

我是 perl 新手。目前我正在运行一个 perl 脚本，它将调用另一个 perl 脚本。第二个 perl 脚本有 2 个输入参数

```
sample2.pl -itest.txt -ffile1.txt 
```

我有不同的输入参数`-f`like `file1,file2,file3...file10`。

现在我想为当前运行的所有输入参数（file1、file2、file3）并行运行第二个 perl 脚本 -

```
#!/usr/bin/perl
use warnings;

use strict;

my $fi="output3.txt";--(output3.txt will contain the files file1,file2..file10)
    open (OF, $fi);

foreach(<OF>)
{
system ("perl ucm3.pl -iinput.txt -f$_ ");

print $_;
} 
```

但它不是并行运行的，而是一个接一个地运行。请帮助并行运行这些脚本。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:00:34.410

您需要创建一个新进程并将其与主程序分离。您可以使用 步行执行此操作[，`fork`](http://perldoc.perl.org/perlfork.html)但您也可以使用[Parallel::ForkManager](https://metacpan.org/module/Parallel%3a%3aForkManager)执行此操作。它会为你处理一切。

```
use strict; use warnings;
use Parallel::ForkManager;

my $pm = Parallel::ForkManager->new($MAX_PROCESSES);

open (my $fh, '<', "output3.txt") or die $!;
while (my $data = <$fh>) {
  chomp $data;

  # Forks and returns the pid for the child:
  my $pid = $pm->start and next;

  # we are now in the child process
  print system ("perl ucm3.pl -iinput.txt -f$data ");

  $pm->finish; # Terminates the child process
} 
```

**编辑**：如果您还不熟悉 Perl，请查看[本手册](http://www.cpan.org/modules/INSTALL.html)。它将告诉您如何从 CPAN 获取 Parallel::FormManager （和其他东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:46:14.013

除了给出的其他好的答案之外，您还应该考虑重新设计，这样您就不会使用`system`每个进程来启动一个新的 Perl 实例。

启动所有这些`perl`s 将增加开销（如果您试图通过并行处理加快速度，这可能是您关心的事情）。

理想情况下，您会将 ucm3.pl 制作成可以从主程序调用的模块。

但是对于快速破解解决方案，您可以将整个文件包装在一个子例程调用中：

```
sub ucm3
{
    #a trick to make the sub arguments look like program arguments.
    local @ARGV = @_;

    [ rest of the ucm3.pl file in here. ]

} 
```

现在，在您的程序中，包含该文件：

```
require 'ucm3.pl'; 
```

而不是你的系统调用，你可以这样做：

```
ucm3("-iinput.txt", "-f$_"); 
```

结合`fork`或`threads`按照其他答案中的建议。

**更新：**由于您每次都使用相同的“input.txt”文件，您可以通过重构代码来进一步提高效率，以便“input.txt”只处理一次。如果该文件很大，则尤其如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:59:28.527

对于并行处理，您可以使用`threads`. 可以在[此处](http://perldoc.perl.org/threads.html)研究文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T15:10:06.777

如果您正在使用类似 Unix 的系统，您将能够进行系统调用，在系统命令的末尾放置一个 & ：

```
system "perl ucm3.pl -iinput.txt -f$_ &" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T15:47:58.123

您也可以使用线程和 Thread::Queue 来执行此操作。它比 Parallel::ForkManager 稍微冗长一些，但它易于管理，并且可以轻松修改以捕获所有输出并将它们传递到另一个队列。

```
#!/usr/bin/env perl

use warnings;
use strict;

use threads;
use Thread::Queue;
use contant MAX_THREADS => 10;

# create a queue that we will fill with work
my $q = Thread::Queue->new();

open (my $fh, '<', "output3.txt") or die "cannot open output3.txt $!";
while (my $data = <$fh>) {
  chomp $data;
  # add each file to the queue
  $q->enqueue($data);
}

for (1..MAX_THREADS) {
  # create some faux signals to end work
  $q->enqueue("SIGEXIT");
  # create threads and do work
  threads->create("work");
}

# wait until threads are all done
while (threads->list(threads::running)) {
  sleep 1;
}
print "all done\n";

# subroutine each thread performs
sub work {
  while (my $file = $q->dequeue()) {
    last if $file eq 'SIGEXIT';
    print system ("perl ucm3.pl -iinput.txt -f$file");
  }
  # detach thread for automatic cleanup
  threads->detach;
} 
```

# linux - 在我的 .tcshrc 文件中在 Linux 上以只读模式为 emacs 创建别名

> ID：14585605
> 
> 赞同：0
> 
> 时间：2013-01-29T14:47:34.830
> 
> 标签：linux, emacs, command-line

只是让你知道这是我第一次发帖。

基本上，我试图在我的 .tcshrc 文件中放入一个别名（或其他东西），以便我可以在 emacs 中以只读方式打开一个文件（而不必每次都在下面输入简介）。我发现了这个 - [https://superuser.com/questions/204236/how-can-i-open-a-file-read-only-from-command-line-with-emacs-vi-vim](https://superuser.com/questions/204236/how-can-i-open-a-file-read-only-from-command-line-with-emacs-vi-vim) - 但是因为 tcsh不支持功能（我认为）我不能使用这种方法。

以只读格式打开 emacs 的命令行文本是这样的：

emacs *FILE_NAME* --eval '(setq buffer-read-only t)'

有任何想法吗？

谢谢P。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:27:32.087

我会创建名为的脚本`emacs-ro`并将其放置在您的 PATH 中

```
#!/bin/bash
emacs "$@" --funcall toggle-read-only 
```

或者你也可以使用你的选项。

```
--eval '(setq buffer-read-only t)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:39:10.660

tcsh 别名中的引号和括号可能有问题，因此`--funcall toggle-read-only`在 Satish 的答案中可能比`--eval`. 要在文件名之后插入参数，可以使用`\!:1`第一个参数的表达式：

```
alias emacs-ro emacs \!:1 --funcall toggle-read-only 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-20T10:15:16.910

根据 Satish 的回答，但建议如果您使用 Emacs >=24.3，您可以而且应该使用`read-only-mode`而不是`toggle-read-only`，后者仍将“工作”，但现在已过时。

```
#!/bin/sh
emacs "$@" --funcall read-only-mode 
```

# asp.net - 在子文件夹中托管网站

> ID：14585606
> 
> 赞同：0
> 
> 时间：2013-01-29T14:47:35.220
> 
> 标签：asp.net, web-hosting

我在 example.com 域上托管了 2 个单独的网站，在 fr.example.com 上托管了另一个用于法语的网站。

现在，我们需要将网站语言的流程更改为：example.com/en example.com/fr

有没有办法在 example.com 的子文件夹中托管 fr.example.com 网站？

问候， Moayyad

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:04:53.853

您可以使用 .htaccess 将 example.com/fr/* 的所有请求重定向到特定目录：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !(^/fr/.*) [NC]
RewriteRule ^(.*)$ /fr/$1 [L,R=301] 
```

正确设置它需要更多时间，但您可以进行研究:)

[htaccess 如何](http://httpd.apache.org/docs/2.2/howto/htaccess.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:52:59.257

fr.example.com 只是 example.com 的子域。该站点可能已经在服务器上的子文件夹中，并且只有一个“指针”作为子域的内容。做你想做的事，用“fr”、“en”等名称创建一个子目录，然后把你的网站放在那里。每个目录都有它自己的。index.html 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:53:55.170

我猜您正在尝试为您的站点创建一个特定于语言的子域。您可以使用主机名来实现这一点。尝试[为网站配置主机头 (IIS 7)](http://technet.microsoft.com/en-us/library/cc753195%28WS.10%29.aspx)

# git - 如果这些笔记的提交被压扁，有没有办法自动合并笔记？

> ID：14585613
> 
> 赞同：10
> 
> 时间：2013-01-29T14:47:51.813
> 
> 标签：git, git-notes

例如：

```
git commit -am "Something"
git notes append -m "Dark "
git commit -am "Something"
git notes append -m "Side"

git rebase -i
# now I squash two commits and I expect to see "Dark Side" here
# but it show that note is undefined
git notes show 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T10:15:05.417

问题几乎可以肯定是您的配置；假设您有其他默认配置，则需要将`notes.rewriteRef`选项设置`refs/notes/commits`为才能正常工作。

因此，您需要的魔术命令是：

```
git config notes.rewriteRef refs/notes/commits 
```

在上述之后，压缩提交应该加入两个注释。

但是，它们之间会有换行符；我怀疑禁用该行为以便您在与示例相同的行上进行操作将需要在 Git 源代码中进行修改。

### 背景

来自[`git help config`](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)（强调我的）：

> `notes.rewriteRef`
> 
> > 在重写期间复制注释时，指定应复制其注释的（完全限定的）参考。ref 可能是一个 glob，在这种情况下，所有匹配的 ref 中的注释都将被复制。您也可以多次指定此配置。
> > 
> > 没有默认值；您必须配置此变量以启用笔记重写。**将其设置`refs/notes/commits`为启用对默认提交注释的重写。**
> > 
> > 这个设置可以被`GIT_NOTES_REWRITE_REF`环境变量覆盖，它必须是一个冒号分隔的 refs 或 glob 列表。

（另见 和 的描述`notes.rewriteMode`，`notes.rewrite.<command>`两者都默认为我们需要的值，即`concatenate`和`true`。）

### 例子

以下是上述测试的类似内容：

```
$ git init
Initialized empty Git repository

$ git config notes.rewriteRef refs/notes/commits

$ git add a # Here's a file I created earlier

$ git commit -am 'Initial commit'
[master (root-commit) 93219cb] Initial commit
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 a

$ echo a >>a

$ git commit -am 'Something'
[master 3c17aca] Something
 1 files changed, 1 insertions(+), 0 deletions(-)

$ git notes append -m 'Dark '

$ echo b >>a

$ git commit -am 'Something'
[master 6732d81] Something
 1 files changed, 1 insertions(+), 0 deletions(-)

$ git notes append -m 'Side'

$ git rebase -i HEAD~2 # Will squash the last commit into the one before and accept the default commit message.
[detached HEAD 552668b] Something
 1 files changed, 2 insertions(+), 0 deletions(-)
Successfully rebased and updated refs/heads/master.

$ git show
commit 552668b4b96e4b2f8fcd7763dcc115edd159eb89 (HEAD, master)
Author: me_and <not.an@email.address>
Date:   Wed Jan 30 10:09:10 2013 +0000

    Something

    Something

Notes:
    Dark

    Side

diff --git a/a b/a
index 7898192..4ac2bee 100644
--- a/a
+++ b/a
@@ -1 +1,3 @@
 a
+a
+b 
```

# python - AWS DynamoDDB + python：未达到吞吐量，如何加快速度？

> ID：14585614
> 
> 赞同：0
> 
> 时间：2013-01-29T14:47:51.833
> 
> 标签：python, amazon-web-services, amazon-dynamodb

我有一个执行以下操作的 python 脚本。它逐行读取文本文件。每行的信息都必须记录在 DynamoDDB 表中。我处理每条摄取的行，然后像这样执行一次写入：

```
with open(fPath, 'r') as f:
   for line in f:
      # process line, extract data to be written into DDB into item_data
      # also extract key
      item = table.new_item(hash_key=key_from_line,attrs=item_data)
      item.put() 
```

我注意到有效吞吐量，即我每秒（平均）进行的写入次数远低于我在 AWS DDB 控制台上为表设置的最大吞吐量。现在，生产线处理步骤可能存在严重的低效率。但我想知道我是否也可以通过不同的方式写入表格来加快速度。例如，收集一组项目然后一次将它们全部写入是否有意义？如果是这样，有没有办法确定数组的最佳大小？还有其他简单的（也许不是那么简单的方法）可以加快写作速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:04:12.317

您没有获得最大吞吐量的原因是您正在创建“热区”。那就是您对表的同一分区有太多调用。

最快的解决方法是反转您的密钥或对它们进行哈希处理，因为它们可能具有相同的前缀。

预置吞吐量取决于主键选择以及各个项目的工作负载模式。在存储数据时，Amazon DynamoDB 将表中的项目划分为多个分区，并主要基于散列键元素分发数据。与表关联的预置吞吐量也在分区之间平均分配，不跨分区共享预置吞吐量。

> 总预配吞吐量/分区 = 每个分区的吞吐量。

因此，要实现您为表预置的全部请求吞吐量，请保持您的工作负载均匀分布在哈希键值上。跨哈希键值分配请求将请求跨分区分配。

您可以在此处查看更多信息：http: [//docs.aws.amazon.com/amazondynamodb/latest/developerguide/GuidelinesForTables.html#GuidelinesForTables.DataUpload](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GuidelinesForTables.html#GuidelinesForTables.DataUpload)

# excel - 在 Excel 工作表中自动生成列

> ID：14585615
> 
> 赞同：0
> 
> 时间：2013-01-29T14:47:54.313
> 
> 标签：excel, scripting, data-manipulation, vba

本周数据处理挑战：

我有一个看起来像这样的 Excel 表：

```
ProductGroup    ProductName
------------    -----------
Mountain Bikes  MTB Thunder
Mountain Bikes  MTB Lightning
Road Bikes      Road Killer
Road Bikes      Road First Class 
```

我需要在产品名称周围添加两个带有自动生成文本的额外列，如下所示：

```
Text1                               Text2 
------------                        -----------
I love MTB Thunder so much          MTB Thunder and MTB Thunder
I love MTB Lightning so much        MTB Lightning and MTB Lightning
I love Road Killer so much          Road Killer and Road Killer
I love Road First Class so much     Road First Class and Road First Class 
```

文字仅供说明...

我可以想出几种方法来实现这一点。制作脚本来加载和操作 Excel 文件，使用 SQL Server 集成服务，但我不禁想到有更简单的方法来做到这一点！？

进行这种数据操作的最简单和最优雅的方法是什么？

尽管我已经编程了十多年，但我从未接触过 Excel 中的宏......但也许它们是一个解决方案？

有什么建议么？

问候亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:53:18.613

这里不需要宏——简单的公式就足够了。

假设您的 Productname 在 B 列中，从第 2 行开始，这些公式将为您提供文本：

文本1：`="I love "&B2&" so much"`

文本2：`=B2&" and "&B2`

然后只需将公式复制到以填充列。

# c# - 创建用于测试目的的 Http 请求

> ID：14585619
> 
> 赞同：0
> 
> 时间：2013-01-29T14:48:15.377
> 
> 标签：c#, http, testing

我需要一些与类似主题的问题完全不同的东西。

我想知道是否存在一个.NET 库来创建一个**真正的 http 请求流**（显然是以参数方式）。这不适用于 ASP.NET 或其他 Web 框架，我想要一个原始字节流（不是各种*http 上下文*的模拟对象）。

我故意从问题标题中省略了*fake*，因为我需要一个真正的 http 请求，但我不想要一个通过网络发送它的组件。

[ebohlman 的注释]：如果我没看错的话，更清晰的表达方式是“......根据提供的参数创建一个模拟的 http 请求流（在原始字节级别）......”

基本上我应该能够（它遵循伪 C#）：

```
[Fact]
void Parse_http_request_headers() {
  HttpRequest req = HttpRequestBuilder.Create(HttpMethod.Get, "http://someserver/app/etc/etc");

  HttpParser parser = new HttpParser(req.ToByteArray());

  parser.Method.Should().Be("GET");
  parser.Scheme.Should().Be("http");
  // Remainder omitted
} 
```

我只是想知道是否有人已经创建了这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:32:20.040

一种方法是创建一个[`TcpListener`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)用于捕获和保存请求流的程序。在本地计算机上运行它。

然后，在一个单独的程序中，创建一个常规`HttpWebRequest`并将其发送到正在收听的程序。侦听器将流保存到二进制文件中，您现在有了可以检查的请求流。

# c# - 枚举 DataFlow 脚本组件中的 RecordSet 作为数据源

> ID：14585623
> 
> 赞同：5
> 
> 时间：2013-01-29T14:48:35.510
> 
> 标签：c#, ssis

这是一个与 SSIS 相关的问题

我有一个设置为类型对象的变量。一个 Dataflow 将一些过滤的行导入记录集中，并且该记录集存储在对象变量中。

在完全独立的数据流中，我需要使用该记录集作为源。所以我创建了一个脚本组件并告诉它它将是一个数据源。

我将其设置为具有我需要的三个输出列。我的问题是，如何让记录集中的每一行在脚本组件中创建一个新行？

我将记录集变量作为只读变量传递，当我尝试对变量进行 foreach 以获取每一行时，我无法做到这一点，因为该变量没有定义获取枚举器方法。

因此，我无法将每一行打印到这些列中，也无法将我的脚本组件用作数据源。

有没有其他人遇到过类似的情况？我是在做一些愚蠢的事情，还是你以另一种方式做的？

作为说明，我在脚本和 Visual Studio 2008 中使用 C#

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T15:25:40.847

所以我环顾四周，找到了我的问题的 VB 解决方案，我将它翻译成 C#，现在编译并按预期运行。我使用的代码是这样的：

```
 DataTable datatable = new DataTable();
    System.Data.OleDb.OleDbDataAdapter oAdapter = new System.Data.OleDb.OleDbDataAdapter();

    oAdapter.Fill(datatable,ReadOnlyVariables["User::XXXXX"]);

    foreach (DataRow row in datatable.Rows)
    {
        Output0Buffer.AddRow();
        Output0Buffer.CoverAmount = Convert.ToInt32(row["XXXX"].ToString());
    } 
```

对于面临类似问题的任何其他人！

感谢大家的帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T15:09:04.103

[我基于Andy Leonard 的 Incremental Load framework](http://www.sqlservercentral.com/stairway/72494/)的旧版本做了类似的事情。我们的子包填充一个记录集，指示我们有多少新的、更改的、未更改的等行数。在父包中，我们测试该对象以确保在使用它之前已填充它。我需要跳到一个会议，所以请原谅这段代码，因为它不能完全解决您的特定需求，但希望能在正确的方向上提供坚实的推动力，直到我可以回来为您的情况量身定制。我在那里有你想做的事情的伪代码。

```
 public void Main()
    {
        bool debug = Convert.ToBoolean(Dts.Variables["Debug"].Value);
        string taskName = string.Empty;
        string packageName = string.Empty;
        string sourceName = string.Empty;
        bool fireAgain = false;

        taskName = Convert.ToString(Dts.Variables["TaskName"].Value);
        packageName = Convert.ToString(Dts.Variables["PackageName"].Value);
        // Fix this by defining and passing in params
        sourceName = Convert.ToString(Dts.Variables["TaskName"].Value);

        System.Data.OleDb.OleDbDataAdapter adapater = null;
        System.Data.DataTable table = null;
        System.Data.DataColumn column = null;
        System.Data.DataRow row = null;
        string message = string.Empty;

        object rowCounts = null;
        rowCounts = Dts.Variables["RowCounts"].Value;
        table = new DataTable();

        try
        {
            // Get us out of this crazy thing - should only be an issue
            // first pass through
            if (rowCounts == null)
            {
                Dts.TaskResult = (int)ScriptResults.Success;
                return;
            }
        }
        catch (Exception ex)
        {
            throw new Exception("Failed here");
        }

        adapater = new System.Data.OleDb.OleDbDataAdapter();
        try
        {
            // This works if we pass in a dataset
            //adapater.Fill(table, Dts.Variables["RowCounts"].Value);
            adapater.Fill(table, rowCounts);
            // TODO: Enumerate through adapter
            // Call Output0Buffer.AddRow();
            // and Output0Buffer.MyColumn.Value = adapter[i].value // possibly casting to strong type
        }
        catch (Exception ex)
        {
            try
            {
                // This works if we use a datatable
                System.Data.DataSet ds = null;
                //ds = (DataSet)Dts.Variables["RowCounts"].Value;
                ds = (DataSet)rowCounts;
                table = ds.Tables[0];
                // TODO: Enumerate through datatable as we do with adapter

            }
            catch (Exception innerException)
            {
                // continue to swallow exceptions
            }
            Dts.Variables["ValidCounts"].Value = false;

            // trap "Object is not an ADODB.RecordSet or an ADODB.Record
            // parse ex.Message
            if (ex.Message.Contains("System.ArgumentException: "))
            {
                System.Text.StringBuilder exceptionMessage = null;
                exceptionMessage = new System.Text.StringBuilder();
                exceptionMessage.Append(ex.Message);
                exceptionMessage.Replace("\nParameter name: adodb", string.Empty);
                exceptionMessage.Replace("System.ArgumentException: ", string.Empty);

                if (exceptionMessage.ToString() != "Object is not an ADODB.RecordSet")
                {
                    Dts.Events.FireInformation(0, string.Format("{0}.{1}", packageName, taskName), exceptionMessage.ToString(), string.Empty, 0, ref fireAgain);
                }
            }
        }

        Dts.Variables["ValidCounts"].Value = false;
        if (table.Rows.Count > 0)
        {
            Dts.Variables["ValidCounts"].Value = true;
        }

        if (debug)
        {
            message = string.Format("SourceName:  {0}\nValidCounts:  {1}", sourceName, false);
            //System.Windows.Forms.MessageBox msgBox = null;
            //msgBox = new MessageBox();
            System.Windows.Forms.MessageBox.Show(message, string.Format("{0}.{1}", packageName, taskName));
            //MessageBox(message, string.Format("{0}.{1}", packageName, taskName));
        }

        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-04T20:05:22.213

我正在解决与 OP 相同的问题。在我的例子中，我假设它是一个对象，我花了很多时间尝试将它转换为数据表。我发现该对象已经是一个数据表，所以从一个 SSIS 脚本任务组件中，我可以这样写：

```
DataTable dt = (DataTable)ReadOnlyVariables["User::FTP_DataPath_File_Metadata"].Value;

foreach (DataRow row in dt.Rows)
{
    CustomOutputBuffer.AddRow();
    CustomOutputBuffer.FileName = row.ItemArray[0].ToString();
    CustomOutputBuffer.FileLastModified = Convert.ToDateTime(row.ItemArray[1]);
    CustomOutputBuffer.FileSize = Convert.ToInt32(row.ItemArray[2]);
} 
```

这成功地将我的“对象变量”转换为数据流，使用脚本组件作为源。

这个例子是为了适应任务工厂安全 FTP 组件，它将“获取带有元数据的文件列表”的结果保存到对象变量中。

# cassandra - 寻找基本和最新的 Cassandra 教程

> ID：14585631
> 
> 赞同：10
> 
> 时间：2013-01-29T14:49:03.373
> 
> 标签：cassandra

我想学习卡桑德拉。

不幸的是，我能找到的几篇教程帖子要么是指旧的 Cassandra 版本（之前的 1）和/或需要一些复杂的设置，比如安装 twissandra。

所以，我想知道是否有人知道无需安装任何东西就可以学习 Cassandra 的资源，当然，除了 Cassandra 本身。

我的设置：

*   Windows 7（应该没关系，对吧？）
*   Cassandra 1.2.0（使用 DataStax 的二进制安装程序安装）
*   OpsCenter（由 DataStax 提供）

我对 MongoDB 非常满意，并且对 MySql 有一些经验，尽管 Cassandra 似乎与上述任何一个都不一样。

任何人？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-17T07:52:23.103

我推荐视频教程

[http://www.devoxx.com/display/Devoxx2K10/Cassandra+by+Example](http://www.devoxx.com/display/Devoxx2K10/Cassandra+by+Example)

以及 datastax 的一些演示文稿

[http://www.datastax.com/company/news-and-events/events/cassandrasf2011/presentations](http://www.datastax.com/company/news-and-events/events/cassandrasf2011/presentations)

我也推荐下面的链接，我觉得它包含所有基本的数据库管理主题，您可能有兴趣使用最新版本学习...

试试这个教程[https://www.i2tutorials.com/cassandra-tutorial/](https://www.i2tutorials.com/cassandra-tutorial/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T15:05:10.267

这个问题的答案可能取决于你想做什么。像任何数据库技术一样，Cassandra 有很多方面。我会说这些分为几类：

1.  特性和功能概述
2.  安装
3.  读取和写入数据
4.  运营
5.  架构设计

DataStax 在前 4 点创建文档方面做得非常好，所以如果这是您的担忧，我建议您阅读他们的文档。此外，您还需要查看您计划使用的特定客户端库的文档。

模式设计有点棘手，因为一直在发现好的规则和设计模式。在这个领域有一些人迹罕至的路径，但在很大程度上，这是你通过经验学习的东西，并在像这样的地方或 Cassandra IRC 频道提出具体问题。

如果您在自己的心理 Cassandra 引导过程的某些特定方面遇到问题，我建议您提出一个具体问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-17T01:00:17.817

我向您推荐 Eben Hewitt 的《Cassandra：权威指南》 [http://www.amazon.com/Cassandra-Definitive-Guide-Eben-Hewitt/dp/1449390412](https://rads.stackoverflow.com/amzn/click/com/1449390412)

它包含数据库和非 SQL 建模的基础知识。

在了解 Cassandra 配置参数时，我还发现此资源非常有用：http: [//www.ecyrd.com/cassandracalculator/](http://www.ecyrd.com/cassandracalculator/)

[当然，如果没有http://www.datastax.com/docs](http://www.datastax.com/docs)，您将无法生存

# html - 菜单在调整大小时跳下，响应式设计，仅限某些浏览器

> ID：14585632
> 
> 赞同：1
> 
> 时间：2013-01-29T14:49:09.727
> 
> 标签：html, css, navigation

我目前在[这个网站](http://soegaardcykler.dk/wp/)上工作，我在 Safari 和 Chrome（最新版本）中的顶部菜单导航有问题。它可以在 Firefox 中运行，甚至可以在最新的 Internet Explorer 中运行！

![该网站应该是这样的。](../Images/2348e78ffbc17849b8d2b3f10c29a3ff.png)

有四种响应式解决方案；标准和最大宽度、iPad 纵向、iPhone 横向和 iPhone 纵向。在 iPhone 纵向以外的所有分辨率上来回调整大小时不会出现此问题。当从 iPhone 纵向调整大小时，顶部菜单导航会跳到标题底部边框下方。

![从 iPhone 肖像调整大小后的网站](../Images/f2008e9be3de8b399b4bb91d6eb2c15c.png)

我试过查看我的 iPhone 肖像的媒体查询，但无法弄清楚问题所在。

![iPhone 纵向视图](../Images/4af71fa11f5975bb12cca3fa5dcec905.png)

我希望你能帮助我提供我所提供的小信息，将所有代码放入 jsfiddle 太复杂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:12:38.433

我也不明白*为什么*会发生这种情况，但如果你添加`overflow: hidden`到你的`#main-header`，你会看到发生*了什么*。如果您在 HTML 中的块元素之后有正确的浮动元素，则存在一些浮动混淆，这是 IE6 中的一个常见问题......如果您保留标题上的隐藏溢出并添加`float: left`到`#logo`它对我有用，但是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:17:47.533

你的标题应该以不同的方式处理你的内部元素应该有内联块；标题应该有宽度为 100% 的内联块，这将受到父宽度的影响，它应该可以解决您的响应问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:25:17.937

我挖了更多，并使用不同的 css 选项进行了一些测试，我发现我实际上忘记在主标题 div 上放置一个高度，并清除它下面的容器 div。我这样做了，它解决了这个问题。

我知道我拥有的一些代码，即导航并没有完全按照它应该的方式完成，但它现在可以在所有浏览器和分辨率上运行，这是重要的部分。

感谢您带领我朝着正确的方向前进！

# jquery - 点击下拉的javascript在Ipad上不起作用

> ID：14585634
> 
> 赞同：1
> 
> 时间：2013-01-29T14:49:15.137
> 
> 标签：jquery, ipad, drop-down-menu, tablet

我有以下脚本，使导航中的下拉菜单在单击时出现和消失。

我正在创建它，以便用户在使用 ipad 时可以在我的导航中看到下拉菜单。

该脚本适用于我桌面上的所有浏览器，但是当我在 Ipad 上尝试时，下拉菜单不显示。

知道为什么这不起作用吗？

```
$("li.dropdown-control > a").click( function (event) {
    event.preventDefault()
    var nextSibling = $(this).next();
    nextSibling.toggleClass("dropped");  
    $('.dropped').not(nextSibling).removeClass('dropped');  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:53:41.673

问题是，iPad 点击事件不会像在桌面上那样触发。

您将希望观看以下任何事件：

*   触摸启动
*   触摸移动
*   触摸端
*   触摸屏

使用此代码：

```
$('body').on('click touchstart','li.dropdown-control > a',function(event){
    event.preventDefault()
    var nextSibling = $(this).next();
    nextSibling.toggleClass("dropped");  
    $('.dropped').not(nextSibling).removeClass('dropped'); 
 }); 
```

*这适用于台式机和平板电脑。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:52:07.263

以前有同样的问题，但我找到了解决方法。

尝试这个：

```
$(document).ready(function(){

$('#clickme').click(function() {
$('#me').slideToggle(function() {
$('.showhide').text(
  $(this).is(':visible') ? "Close" : "Open"
 );
 });
}); 
```

然后只需编辑它以满足您的需要:) 希望它有所帮助！

# java - Guice 如何将带注释的常量重新绑定到另一个名称？

> ID：14585640
> 
> 赞同：0
> 
> 时间：2013-01-29T14:49:29.463
> 
> 标签：java, guice

假设我有一个值绑定到某个模块中用“xxx”注释的字符串，但我想从另一个注释名称（比如“yyy”）中获得这个常量。反正我可以给这样的同义词吗？

例如，某些模块包含：

```
bindConstant().annotatedWith(Names.named("xxx")).to("testing"); 
```

我想写一些类似的东西：

```
bindConstant().annotatedWith(Names.named("yyy")).to(value of xxx); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:36:53.000

如果您看一下，[`ConstantBindingBuilderImpl.java`](https://github.com/google/guice/blob/master/core/src/com/google/inject/internal/ConstantBindingBuilderImpl.java#L55)您会发现它只是用于从原语推断绑定类型的语法糖。Guice 不允许您将常量绑定到另一个绑定，但它允许您将“正常”绑定绑定到另一个绑定。

```
bind(String.class).annotatedWith(Names.named("yyy"))
    .to(Key.get(String.class, Names.named("xxx"))); 
```

这看起来不如 有用`bindConstant()`，因为您必须明确指定绑定的类型，但实际情况是`bindConstant()`无论如何在幕后悄悄地为您执行此操作。（顺便说一下，Guice 中的 String 元素有点神奇——如果你已经将注解绑定到 String，你可以[将它作为各种其他原始类型](https://github.com/google/guice/blob/master/core/src/com/google/inject/internal/InjectorImpl.java#L438)注入。这就是为什么[`Names.bindProperties`](http://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/name/Names.html)可以注入各种类型，而不仅仅是 Strings .)

# c# - 有没有办法将 app.config 文件放入程序集中？

> ID：14585641
> 
> 赞同：0
> 
> 时间：2013-01-29T14:49:30.317
> 
> 标签：c#, .net, hide, connection-string, app-config

> **可能重复：**
> [如何在 C# 项目中嵌入 app.config？](https://stackoverflow.com/questions/1846975/how-do-you-embed-app-config-in-c-sharp-projects)

我正在使用 app.config 文件进行连接字符串配置，我也在使用 Enterprise Library 来记录它，所以我的 app.config 文件包含一些有价值的数据，我想对最终用户隐藏它们，有什么办法吗（例如将 app.config 放在 exe 中）以隐藏这些数据？

# c++ - 转换字符 > 十六进制

> ID：14585648
> 
> 赞同：0
> 
> 时间：2013-01-29T14:49:57.090
> 
> 标签：c++, hex, character

我正在尝试从磁盘读取文件，并输出其十六进制表示。

我使用的代码是：

```
#include <iostream>
#include <fstream>
using namespace std;

int main() {
        ifstream file ("mestxt", ios::binary);
        if (file.is_open())
        {
                char* buffer;
                buffer= new char[0];
                cout<< "File open"<<endl;
                int count=0;
                while (file.good())
                {
                        file.read(buffer, 1);
                        cout<<hex<<int(*buffer)<<" ";
                        count++;
                        if (count%16==0) cout<<endl;
                }
                file.close();
        }
} 
```

它有效，但它只是......让我感到恐惧，我不禁认为必须存在一些功能可以完成我所做的事情，只是更好。

输入：

> bn0y5328w9gprjvn87350pryjgfpxl

输出：

> 文件打开
> 
> 62 6e 30 79 35 33 32 38 77 39 67 70 72 6a 76 6e
> 
> 38 37 33 35 30 70 72 79 6a 67 66 70 78 6c 6c

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:09:32.013

有一种简单的方法可以做到这一点。只需让 STL 负责设置循环即可。如果您只关心输出十六进制代码，这里是最简单的版本：

```
#include <iterator>
#include <algorithm>
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
    ifstream is("content", ios::binary);
    cout << hex;
    copy(
       istream_iterator<char>(is), 
       istream_iterator<char>(), 
       ostream_iterator<int>(cout, " ")
       );
} 
```

如果您还想计算字符数并进行格式化，则应将其更改为以下内容：

```
#include <iterator>
#include <algorithm>
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
    int cnt = 0; // Will hold the number of characters
    ifstream is("content", ios::binary);
    cout << hex;
    transform(
        istream_iterator<char>(is),
        istream_iterator<char>(),
        ostream_iterator<int>(cout, " "), [&cnt] (char c) -> int {
            if (cnt % 16 == 0) cout << endl;
            cnt++; 
            return c; 
            }
        );
} 
```

以上是使用 lambda 函数，所以需要 C++11。但是，您可以使用 C++98 中的自定义函子轻松实现相同的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:56:41.140

除了易于修复未定义的行为（分配`char[0]`而不是`char[1]`，然后写入`buffer[0]`- 超过已分配空间的一个字节）之外，您的程序还可以。您可以使用标量代替单元素数组。

```
#include <iostream>
#include <fstream>
using namespace std;

int main() {
    ifstream file ("mestxt", ios::binary);
    if (file.is_open())
    {
        char buffer;
        cout<< "File open"<<endl;
        int count=0;
        while (file.good())
        {
            file.read(&buffer, 1);
            cout<<hex<<int(buffer)<<" ";
            if ((++count)%16==0) cout<<endl;
        }
        file.close();
    }
} 
```

您可以通过一次读取多个字符来提高程序的效率，但是对于小尺寸的输入，这根本不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:17:26.080

如果您知道您的文件将足够小以适合内存，那么将整个文件读入缓冲区然后解析它会更快*：*

```
std::ifstream file("mestxt", std::ios_base::binary);
file.seekg(0, std::ios_base::end);
std::vector<char> buffer(file.tellg()); 
file.seekg(0, std::ios_base::beg);
file.read(&buffer.front(), buffer.size());

std::cout << std::hex;
std::copy(buffer.cbegin(), buffer.cend(), std::ostream_iterator<int>(std::cout, " ")); 
```

# browser - 可见的？如果父项被隐藏，则为可见元素返回 false

> ID：14585649
> 
> 赞同：2
> 
> 时间：2013-01-29T14:49:59.943
> 
> 标签：browser, watir

Watir 的`visible?`方法迭代 DOM 元素树并检查是否有任何父元素的可见性属性设置为隐藏。如果任何父母被隐藏然后`visible?`返回`false`，就是这样。

如果是以下 HTML：

```
<div id="parent" style="display: block; visibility:hidden;">
  <div id="child" style="display: block; visibility:visible;">
    Visibility Check.
  </div>
</div> 
```

`visible?`将返回`false`，因为“父” div 被隐藏。

但是 div 实际上在浏览器中是可见的。

它是 Watir 中的一个功能，我会接受它还是这里有一个很好的解决方法？

# javascript - mouseup 在 Windows 7 上的 Chrome 中未触发

> ID：14585651
> 
> 赞同：1
> 
> 时间：2013-01-29T14:50:11.113
> 
> 标签：javascript, jquery, google-chrome, windows-7

我在我的网站上使用[dragdealer](http://code.ovidiu.ch/dragdealer/)作为自定义滚动条。我刚刚发现，在 Windows 7 上的 Chrome 中，当您单击滚动条按钮并移动它时，该按钮会“卡住”并在您移动鼠标时移动。
您可以在上面链接的页面上的任何滚动条中看到此行为。这不会发生在任何其他浏览器中，也不会发生在 Windows XP 中完全相同的 Chrome 版本 (24.0.1312.56 m) 中。

`mouseup`当用户释放鼠标按钮时，我有办法“强制”吗？或者任何其他解决方案？

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:46:46.867

原来罪魁祸首是我在 Chrome 中使用的巴比伦翻译扩展！一旦我禁用它，一切都按照它应该的方式工作......！

# laravel - Laravel 4 嵌套资源控制器 Route::resource('admin/photo', 'PhotoController'); 不工作

> ID：14585654
> 
> 赞同：4
> 
> 时间：2013-01-29T14:50:20.270
> 
> 标签：laravel, laravel-4

在 Larvel 4 中，我正在尝试设置嵌套资源控制器。

在**routes.php**中：

```
Route::resource('admin/photo', 'Controllers\\Admin\\PhotoController'); 
```

在**app\controllers\Admin\PhotoController.php 中**：

```
<?php namespace Controllers\Admin;

use Illuminate\Routing\Controllers\Controller;

class PhotoController extends Controller {

    /**
     * Display a listing of the resource.
     *
     * @return Response
     */
    public function index()
    {
        return 'index';
    }

    /**
     * Show the form for creating a new resource.
     *
     * @return Response
     */
    public function create()
    {
        //
    }

    /**
     * Store a newly created resource in storage.
     *
     * @return Response
     */
    public function store()
    {
        //
    }

    /**
     * Display the specified resource.
     *
     * @return Response
     */
    public function show($id)
    {
        return $id;
    }

    /**
     * Show the form for editing the specified resource.
     *
     * @return Response
     */
    public function edit($id)
    {
        return "edit $id";
    }

    /**
     * Update the specified resource in storage.
     *
     * @return Response
     */
    public function update($id)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     *
     * @return Response
     */
    public function destroy($id)
    {
        //
    }

} 
```

**index** (/admin/photo GET)、**create** (/admin/photo/create) 和**store** (/admin/photo POST) 操作工作正常……但不能**编辑**和**显示**，我只是得到一个页面未找到 404 状态。

如果我删除管理员根路径，它会起作用。

谁能告诉我如何设置 Route::resource 控制器以使用像 admin/photo 这样的嵌套路径

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-29T16:07:38.340

见[https://github.com/laravel/framework/issues/170](https://github.com/laravel/framework/issues/170) 在那里找到我的答案（看看泰勒写的）

对于那些想查看我现在在 routes.php 中工作的代码的人：

```
Route::group(array('prefix' => 'admin'), function() {

    // Responds to Request::root() . '/admin/photo'
    Route::resource('photo', 'Controllers\\Admin\\PhotoController');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-13T09:33:48.730

实际上，您应该将“admin/photo”替换为“admin.photo”，以便 laravel 为 photo 作为 admin 的子资源设置资源。

检查这个 [https://tutsplus.com/lesson/nested-resources/](https://tutsplus.com/lesson/nested-resources/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T07:19:27.617

可能你需要告诉 Composer 重新加载类，从你的命令行运行：

```
composer dump-autoload 
```

那应该行得通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-17T12:47:03.450

只需简单地使用组前缀 -> admin。使用嵌套的 admin.photo 会为您创建一个错误的 url，例如 admin/{admin}/photo/{photo}，这是您不想要的。

# sqlite - Sqlite 中如何知道磁盘 I/O 的数量

> ID：14585660
> 
> 赞同：0
> 
> 时间：2013-01-29T14:50:35.917
> 
> 标签：sqlite

我在我的程序中使用 sqlite 并且想调整一些参数以提高性能，所以我想知道在 sqlite 中执行查询时如何获取磁盘 I/O 的数量。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:59:55.657

尝试使用[SQLITE_DBSTATUS_CACHE_MISS](http://www.sqlite.org/c3ref/c_dbstatus_options.html)调用[sqlite3_db_status()](http://www.sqlite.org/c3ref/db_status.html)。

# ruby-on-rails - 如何从 Rails 测试中排除全局过滤器？

> ID：14585662
> 
> 赞同：0
> 
> 时间：2013-01-29T14:50:46.573
> 
> 标签：ruby-on-rails, filter

我正在开发一个 API，它将在 ApplicationController 中有一个“before_filter：authorize_request”。

'authorize_request' 方法将使用签名和 HMAC 验证进行一些请求标头验证。但是，我想避免在每个“开发或测试”请求之前调用此方法，因为这意味着我将不得不模拟一切和/或为使测试正常工作而头疼。

目前，我正在破解这句话：

```
if Rails.env.production?
  before_filter :authorize_request
end 
```

但这感觉就像一个彻头彻尾的黑客攻击。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:53:13.430

您也可以从过滤器中提前返回

```
def authorize_request
  return true if Rails.env.test?

  # carry on

end 
```

# ios - tabBarController presentModalViewController 在 iOS5 中不显示在前台

> ID：14585664
> 
> 赞同：1
> 
> 时间：2013-01-29T14:50:52.330
> 
> 标签：ios, objective-c, ios5, ios6

我必须将一个相当旧的 iOS 应用程序“转换”为当前的 iOS6 SDK。不幸的是，我几乎没有 iOS 开发经验。简短的问题描述。

在我在最新的 iOS6 SDK 上编译应用程序后，方向自动转向不再适用于 iOS5。经过一番搜索，我发现我必须实现该`supportedInterfaceOrientations`功能。为了让它最终打开方向更改，我必须在函数中更改`[window addSubView:tabBarController.view]`为。`window.rootViewController = tabBarController``didFinishLaunchingWithOptions`

通过这些更改，方向转向再次在 iOS5/6 上工作，但显示模式登录视图`[tabBarController presentModalViewController:loginController animated:YES]`在 iOS5 上不再工作。登录视图正在显示，但登录视图的内容（子视图）显示在 tabBarController 内容的后面。但是 tabBarController 应该被登录视图完全隐藏。

看起来像是 iOS5 上的一种 z-index 问题。目前我不知道为什么它可以在 iOS6 上运行，而不再在 iOS5 上运行。

我怎样才能让我的登录视图和它的子视图再次成为最顶层的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:17:59.913

根据我的理解，通常模式视图控制器总是显示在顶部，所以很奇怪，这不是您应用程序中的行为..

也许您可以尝试修改视图/图层的 z-index：

```
someView.layer.zPosition = 1; 
```

或者您可以尝试不是从 tabBarController 而是从另一个控制器呈现 loginController。

# javascript - 使用jQuery将数据数组存储到输入中

> ID：14585666
> 
> 赞同：0
> 
> 时间：2013-01-29T14:50:58.413
> 
> 标签：javascript, jquery

每次用户单击复选框时，我都会向隐藏的输入值添加几个值。

每个复选框存储 2 个值，如下所示：

```
<input type="checkbox" class="first" value="9598864;3"> 
```

第一个值是：`9598864`和第二个值：`3`。

目前我正在以这种方式将数据添加到输入中：

```
var currentValue = $('#myInput').val();
var text;

//adding the value to the input + separator "-"
if($(this).is(':checked')){
    $('#myInput').val(currentValue + "-" + $(this).val());
}

//erasing the value from the input + separator "-"
else{
    text = currentValue .replace("-" + $(this).val(), "");
    $('#myInput').val(text);
} 
```

结果是这样的：

```
<input type="hidden" name="demo" value="-9582856;3-9598864;3" id="myInput"> 
```

我得到一个由 2 个元素组成的数组，每个元素里面有另外 2 个元素：

**元素 1：**

> *   9582856
> *   3

**要素 2：**

> *   9598864
> *   3

我现在正在做的是在服务器端（PHP）处理数据，并通过这些字符串分解`-`并`;`获取所需的元素。

还有其他更好的方法来完成这项任务吗？使用 jQuery 或 Javascript 在输入中存储数据数组的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:55:57.803

我认为你的方法很好，因为即使你在其他类型的数据结构中发布 var。obj 或数组，您必须在服务器端编写一些代码来处理它。在这种情况下，使用 explod funk 更容易使用。

希望这有帮助

# java - jsp中的过滤器字符串不适用于括号[]

> ID：14585670
> 
> 赞同：2
> 
> 时间：2013-01-29T14:51:14.970
> 
> 标签：java, sql, jsp

我有一个 jsp 页面，它向 servlet 发送请求，以根据选定的下拉值过滤表中列的结果，该下拉值由对 MSSQL 数据库的 SQL 查询填充。现在我遇到了下拉列表中的一个项目有括号（ something[something] ）的问题，并且由于某种原因，当我选择该项目并过滤表格时，即使很明显有它也不会返回任何结果在过滤器之前与该项目一起显示的数据行。这是我现在在 jsp 页面上的过滤器下拉列表：

```
<select title="Something Filter" name="${MODULE.REQUEST_SOMETHING}"
    id="${MODULE.REQUEST_SOMETHING}" tabindex="30"
    onkeydown="typeSelect(this, -1, 'xbin', 1);" onchange="clearTTID();"
    onblur="clearTTID();">
    <option value=""></option>
    <c:forEach items="${requestScope.something}" var="row">
        <option value="${row.something}"
            <c:set var="setSelected" value="${row.something }" />
            <c:if test="${requestScope.something eq setSelected}">selected</c:if>
        >${row.something}</option>
    </c:forEach>
</select> 
```

所有其他项目都可以正常工作，只有文本、数字或括号，过滤器将按预期按这些项目过滤表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:50:06.233

您需要`[`使用`[]`. 因此，如果您要查找名称`t[t]`，您的查询将是

```
select * from student where name like '%t[[]t]%' 
```

**更新**

第二种方法是在左括号上使用转义选项`[`（这对我来说是新的，WOOHOO）

```
select * from student where name like '%t\[t]%' escape '\' 
```

# javascript - .load() 没有从 html 文件中提取内容

> ID：14585679
> 
> 赞同：0
> 
> 时间：2013-01-29T14:52:02.220
> 
> 标签：javascript, jquery

我一直在使用 jQuery Docs，我正在尝试设置一个从单独的 html 文件填充模态内容的情况。所有文件都在同一个域，同一个文件夹中。到目前为止，模式将在点击时启动，但没有从 html 文件中提取任何内容。我正在使用 Zurb 显示模态。

jQuery：

```
$('.video-btn').click(function (e) {
    e.preventDefault();
    var modalUrl = $(this).attr('href');
    $('#myModal').load('modalUrl #vidModal').reveal({
        animationspeed: 500,
        animation: 'fadeAndPop',
        dismissmodalclass: 'close-reveal-modal'
    });

    //$('.video-wrapper').children().show();
}); 
```

链接

```
<a href="modal1.html" class="info-btn video-btn">
     <h2>Video</h2>
     <p>Cambridge at a glance</p>
</a>

/*Outer modal hidden on page*/
<div id="myModal" class="reveal-modal"></div>/*Content that is in a file named modal1.html*/
<div id="vidModal" class="reveal-modal">
    <div class="inner-modal">
        <div class="modal-head">
            <h2>Video</h2>
            <p>Cambridge at a glance</p>
            <a class="close-reveal-modal"></a>
        </div>
        <div class="modal-share-btns"></div>
        <div class="video-wrapper">
            <iframe id="vid" src="http://player.vimeo.com/video/20800836?api=1" width="700" height="400" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
        </div>
    </div>
    <!-- /inner-modal -->
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:54:51.300

您的代码应如下所示：

`$('#myModal').load(modalUrl+ ' #vidModal')`

在您的代码中，您加载的是 url `modalUrl #vidModal`，而不是`modalUrl`与 `#vidModal`

*（根据评论更新）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:26:02.160

问题：

```
$('#myModal').load('modalUrl #vidModal') 
```

`modalURl`被作为字符串文字的一部分包含在内。

你应该做：

```
$('#myModal').load(modalUrl + ' #vidModal') 
```

# c# - 使用 RegEx 检测 11 个相邻数字

> ID：14585682
> 
> 赞同：0
> 
> 时间：2013-01-29T14:52:08.537
> 
> 标签：c#, regex, string-parsing

如何使用 RegEx 检测 11 个相邻（即 11 个数字之间没有其他字符）数字？

即它应该匹配`asd 12345678901 asd 11`并且`AA12345678901as`

但**不是** `asd 123456789012 asd 11`因为它有 12 个相邻的数字

我试过`(^[0-9])*(\d{11})(^[0-9])*`但它匹配`asd 123456789012 asd 11`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:54:49.383

Try `\b\d{11}\b`，它指定围绕 11 位数字的单词边界，因此您不匹配 12 位长度的前 11 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:04:54.460

您可以通过环视来做到这一点：

```
(?<!\d)\d{11}(?!\d) 
```

它将匹配正好 11 位数字的序列，并且您可以确定它的前面或后面没有任何其他数字（不过，它可以是任何其他字符，例如字母、空格等）。

所以这些字符串被认为包含一个匹配：`jhgjad12345678901`, `12345678901`, `12345678901skjdhks`, `sdfjhsdf 12345678901 sdfjgj 2342 sdkfl`,`=-=342_12345678901:}{]'`

或另一种方式，无需环顾：

```
(?:\D|^)(\d{11})(?:\D|$) 
```

11 位数字将在捕获组 1 中。

您可以使用`IsMatch`上述正则表达式的方法来检查字符串是否具有正好 11 位数字的序列。您可以使用`Match`or`Matches`方法在字符串中找到一个或全部（分别）序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:55:39.020

那将是

```
[^\d]+\d{11}[^\d]+ 
```

1.  至少一个非数字
2.  正好 11 位数字
3.  至少一个非数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:58:38.400

你快到了。只是你需要确保`non-digit`在你的序列之前和之后都有一个。因此，您需要`[^\d]`在两端插入不带任何量词的 a 。

你可以试试这个正则表达式： -

```
(?:.*?[^\d]|^)\d{11}(?:[^\d].*|$) 
```

见演示：- [http://www.myregextester.com/?r=14ad3bb5](http://www.myregextester.com/?r=14ad3bb5)

上面的正则表达式匹配以下字符串：-

```
asd 12345678901 asd 11
12341234234
af23412434353 saf  // 11 digits preceded by characters. I suppose you expect it to match. 
```

并拒绝此字符串：-

```
asd 123456789012 asd 11 
```

# javascript - 清除传单地图中的所有折线

> ID：14585688
> 
> 赞同：13
> 
> 时间：2013-01-29T14:52:37.030
> 
> 标签：javascript, leaflet

我正在努力清除地图上的所有折线，我只清除最新的。

```
var polylines;

// add map polylines
function addPolyline(polyArray, colour) {
    polylines = L.polyline(polyArray, {color: colour});
    polylines.addTo(map);
}

// clear polylines   
function clearPolylines() {
    map.removeLayer(polylines);
} 
```

其中 addPolylines 被多次调用，而 clear Polylines 被调用一次。如何清除地图上的所有折线？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-29T22:48:55.143

您必须全部记住它们，或者稍微作弊并窥视`map._layers`才能找到它们。

编辑@Ben 添加示例代码：

```
function clearMap() {
    for(i in m._layers) {
        if(m._layers[i]._path != undefined) {
            try {
                m.removeLayer(m._layers[i]);
            }
            catch(e) {
                console.log("problem with " + e + m._layers[i]);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-10T20:13:57.523

您可以将折线添加到图层组，并轻松将其添加到地图/从地图中删除。像这样的东西：

```
pLineGroup = L.layerGroup()
var latlngs = [
    [45.51, -122.68],
    [37.77, -122.43],
    [34.04, -118.2]
];
this.pLineGroup.addLayer(L.polyline(latlngs, {color: 'red'}))
pLineGroup.addTo(map)
pLineGroup.removeFrom(map) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-14T17:41:35.133

以下将删除多边形和标记，但将图像图块保留在背景中：

```
for (i in map._layers) {
    if (map._layers[i].options.format == undefined) {
        try {
            map.removeLayer(map._layers[i]);
        } catch (e) {
            console.log("problem with " + e + map._layers[i]);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-23T09:31:45.850

您可以创建一个数组来存储地图中存在的所有折线。

```
var polylines = []; 
```

创建每条折线时，我们将其添加到我们的数组中：

```
var polyline = new L.Polyline(latlongs, {
    color: 'red',
    opacity: 1,
    weight: 1,
    clickable: false
}).addTo(map);
polylines.push(polyline); 
```

现在，当我们需要从地图中清除折线时，我们可以这样做：

```
polylines.forEach(function (item) {
    map.removeLayer(item)
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-28T06:33:02.383

一些答案建议使用`map._layers`which 应该是`private`属性并且不应该使用。最好使用`L.Map`-type 的 API。

此外，您会发现如果没有附加层，则会`for(i in m._layers) {`崩溃，因为.`map._layers``i``undefined`

我想提出以下方法，它也会跳过你的归属：

```
function clearMap(map) {
  map.eachLayer((layer) => {
    const hasEmptyContrib = !(layer.getAttribution && layer.getAttribution());
    const hasNoContrib = !layer.getAttribution;
    if (hasEmptyContrib || hasNoContrib) {
        map.removeLayer(layer);
    }
  })
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-02T22:08:12.687

这是我在传单中的做法。老派风格...我创建了一个名为 counter 的变量，设置为 0。

```
var cnt = 0; 
```

在我每次拖动标记（并擦除先前的多段线）时应该更新多段线的标记的“dragend”事件的最后，我补充说，如果计数器大于 0，则删除多段线。所以，在第一次运行时，这个删除折线的命令被忽略了，因为没有折线。每次下一次，它将被执行，而不是添加另一条线，我得到一条从 POINT A 到我的标记（POINT B）的“新”折线。这是代码：

```
if(cnt > 0) { travel.removeFrom(map)};
travel = L.polyline([pointRome, dragPointsArray],{color: 'red', weight: 15, interactive: false}).addTo(map);
cnt++; 
```

# git - 如何使用 git-svn 只签出主干而不签出分支和标签？

> ID：14585692
> 
> 赞同：44
> 
> 时间：2013-01-29T14:52:45.807
> 
> 标签：git, svn, git-svn

我正在开发一个 Java 遗留项目，该项目有 20 个相互连接的模块。因此，每个模块都有自己的分支和标签。结构是这样的：

```
 /projects
   .svn
   - module1
       .svn
       -trunk
       -branch
       -tag
   - module2
       .svn
       -trunk
       -branch
       -tag 

```

项目文件夹大约 30 GB，几乎不可能用于`git-svn clone`检出所有模块，但这是因为它计算了所有分支和标签。

是否可以只克隆项目主干，以便我可以开始在本地提交？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-30T09:43:04.990

**编辑**：我误读了这个问题并回答了我认为你在问的问题，而不是你实际问的问题。

### 仅克隆主干

克隆单个 Subversion 目录很容易，实际上克隆哪个目录并不重要。只是不要指定任何“布局”参数，并直接给出主干的路径：

```
git svn clone http://path.to.svn.repo/module1/trunk 
```

### 克隆特定模块，包括标签和分支等

“正常”`git svn clone`看起来像下面这样：

```
git svn clone --stdlayout http://path.to.svn.repo/ 
```

您想要使用的将是：

```
git svn clone --stdlayout http://path.to.svn.repo/module1/ 
```

这将找到文件夹的`trunk`,`branch`和`tag`子`module1`文件夹，并为您克隆它们。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-20T22:08:24.577

我发现带有 --stdlayout 的 git svn clone 并没有为我做正确的事情。

在同样的情况下，这个策略效果很好：

```
git svn init --trunk $repo/projects/module1/trunk --tags $repo/projects/module1/tag --branches $repo/projects/module1/branch
git svn 获取

```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-24T12:11:53.530

我只是想根据@me_and 的回答添加更多信息。

用于克隆主干的命令将起作用，但在 git 文件夹中创建的结构是：

```
refs
 |--remotes
    |--git-svn 
```

这相当于**refs/remotes/git-svn**。

如果我们这样做：

```
git svn clone https://domain/svn/repo/trunk --no-metadata --authors-file=authors.txt --trunk=https://domain/svn/repo/trunk 
```

那么创建的结构是：

```
refs
 |--remotes
    |--origin
       |--trunk 
```

相当于**refs/remotes/origin/trunk**

第二种结构看起来对 git 更友好，并且可能会减少您必须编写的命令和 shell 脚本 :)

**PS** [--no-metadata] 和 [--author-file] 参数是可选的。

*   元数据选项禁用 git 在提交消息后附加 svn 信息。
*   authors-file 选项允许你将你的 svn 贡献者映射到 git 贡献者，这样你的 svn 历史版本就不会在 git 中被弄乱。

# python - 如何使用 rpm 为 python 2.6.8 安装 python-dev？

> ID：14585693
> 
> 赞同：0
> 
> 时间：2013-01-29T14:52:44.907
> 
> 标签：python, numpy, rpm

我正在尝试在新建立的 linux 服务器中安装 BioPython。要安装 BioPython，需要 NumPy。我下载了 numpy-1.6.2 并尝试安装它，但它给出了错误消息

```
File "numpy/core/setup.py", line 271, in check_types
"Cannot compile 'Python.h'. Perhaps you need to "\
SystemError: Cannot compile 'Python.h'. Perhaps you need to install python-dev|python-devel. 
```

所以，我需要先安装 python-dev 但我发现在我的系统中没有办法做到这一点。我拥有的 python 版本是 2.6.8，唯一安装的包管理器是 rpm。我有 root 访问权限，但我对管理问题不是很熟悉。谁能给我一个想法，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:07:22.210

你应该能够安装它

```
rpm -i package.rpm 
```

和

```
rpm -qa 
```

您应该能够搜索包的正确名称（如果我记得，在 rpm bsaed 发行版上，它应该类似于 python-devel.xyzrpm）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T05:19:36.470

我使用 PC fedora 21 并遇到了同样的问题。我直接在终端中输入了 dnf install python-devel 。可能你可以试试。

```
[YB@localhost ~]$ rpm -qa |grep python-dev 
```

python-devel-2.7.8-15.fc21.i686

# view - Domino Designer：从嵌入视图访问选定的行

> ID：14585695
> 
> 赞同：3
> 
> 时间：2013-01-29T14:52:48.283
> 
> 标签：view, formula, lotus-domino, lotusscript

我再次有一个关于 Domino Designer 的问题。

* * *

有应分配给多个联系人的时事通讯。

因此，我构建了一个包含组合框的表单来选择时事通讯。下面是一个包含所有可用联系人的嵌入式视图。

```
Combobox:
 _______________________
| ComboBox Newsletter  ⇓|
 -----------------------

Embedded View:
__________________________________
  |  Name   | Lastname |  Company |
-----------------------------------
   John       Smith        ABC 
 • Anna       Tylor        XYZ      (<- Anna is selected)
   Michael    Williams     ZYX

Button:
 ________
| Submit | 
```

这个想法是，要选择通讯，选择每个所需的联系人（按选择边距），然后点击一个按钮。应该由按钮完成的魔术是通过将选定的时事通讯附加到联系人表单中的预期多值字段来将选定的时事通讯分配给每个选定的联系人。

但是我如何找出哪些行被选择了`Formula`，`LotusScript`或者`JavaScript`（按此顺序选择：-P）？

`@GetFocusTable`对我没有产生有价值的结果。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:25:02.243

如果您从嵌入视图的操作栏中的操作运行代码，则可以实现此目的。这必须是嵌入视图的视图动作

我不认为你可以用@Formulas 做到这一点。您需要的是 LotusScript。您可以使用 NotesDatabase 类的 UnprocessedDocuments 属性获取所选文档的句柄。以下是一些详细信息和代码示例： [http ://www-01.ibm.com/support/docview.wss?uid=swg21279380](http://www-01.ibm.com/support/docview.wss?uid=swg21279380)

要在嵌入视图中显示操作栏，您必须在嵌入视图的属性中启用“显示操作栏”选项。

![在此处输入图像描述](../Images/35b0388c7a71e0bd25fff0101eb4ac33.png)

在设计器中查看：

![在此处输入图像描述](../Images/5bf63cc0ab0cb3baa823f70c5bc5944a.png)

这就是它在笔记客户端中的样子：

![在此处输入图像描述](../Images/77834b052f5aae7a2188fdc6f6f7ab7f.png)

# objective-c - NSUserDefaults 不起作用

> ID：14585698
> 
> 赞同：0
> 
> 时间：2013-01-29T14:52:50.190
> 
> 标签：objective-c, cocoa-touch

我的应用程序包含以下内容：

1.  主要数据视图控件
2.  设置视图控制器（有 3 个设置文本字段）

在 (2).m 中，当按键被按下时，使用以下代码：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {

    if(textField==_serverAddress){

        NSLog(@"new server adress %@", textField.text);
        [[NSUserDefaults standardUserDefaults] setObject:textField.text forKey:@"serverAddress"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
    if(textField==_login){
        NSLog(@"new login %@", textField.text );
        [[NSUserDefaults standardUserDefaults] setObject:textField.text forKey:@"login"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }

    if(textField==_password)
{
        NSLog(@"new password %@", textField.text);
        [[NSUserDefaults standardUserDefaults] setObject:textField.text forKey:@"password"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }

    [textField resignFirstResponder];
    return YES;
} 
```

在 viewDidLoad 中，使用了以下代码：

```
- (void)viewDidLoad
{

    // Get the stored data before the view loads

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *savedServerAddress = [defaults objectForKey:@"savedServerAddress"];
    NSString *savedLogin = [defaults objectForKey:@"savedLogin"];
    NSString *savedPassword = [defaults objectForKey:@"savedPassword"];

    // Update the UI elements with the saved data
    self.serverAddress.text = savedServerAddress;
    self.login.text = savedLogin;
    self.password.text = savedPassword;
    [super viewDidLoad];
    _serverAddress.delegate = self;
    _login.delegate = self;
    _password.delegate = self;

} 
```

当我在 (2) 中将设置更改为新设置然后返回 (1) 然后返回 (2) 我看到纯文本字段时，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:01:29.330

您有*不同的键*来存储和读取用户默认值。例如，服务器地址与 key 一起存储`@"serverAddress"`，但使用 key 读取`@"savedServerAddress"`。

您必须使用相同的键，否则读取用户默认值将始终返回`nil`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:55:24.980

调用`[super viewDidLoad];`应该是`viewDidLoad`方法中的第一条语句。

# css - ie10 样式表

> ID：14585703
> 
> 赞同：7
> 
> 时间：2013-01-29T14:53:02.027
> 
> 标签：css, styles, internet-explorer-10, conditional-comments

我正在尝试使用外部样式表链接到 IE10，但它无法正常工作。发生的事情是 IE10 使用与其他浏览器相同的样式表。我为 IE 9 和 8 附加了不同的样式表，这些都很好。我什至尝试为其他浏览器创建样式表，但 IE 10 似乎认为它是其他浏览器之一。

```
<!--[if lt IE 10]>
<link rel="stylesheet" type="text/css" href="ie10.css" />
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T14:58:17.033

[如果 gt IE 9] 对于“大于”9

在这里解释：http: [//msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)

但是您应该仔细阅读网络 ( [http://www.sitepoint.com/microsoft-drop-ie10-conditional-comments/](http://www.sitepoint.com/microsoft-drop-ie10-conditional-comments/) ) ... **ie10 删除了条件评论**。

此处相同主题[如何在某些情况下仅针对 Internet Explorer 10，例如特定于 Internet Explorer 的 CSS 或特定于 Internet Explorer 的 JavaScript 代码？](https://stackoverflow.com/questions/9900311/how-do-i-target-only-ie10-for-certain-situations-like-ie-specific-css-or-ie-spec)

[不再支持有条件的评论](http://blogs.msdn.com/b/ie/archive/2011/07/06/html5-parsing-in-ie10.aspx?Redirected=true)

并回答：链接到 IE10 -->

也许你可以尝试一些像这样的**jQuery**（注意：这个属性在 jQuery 1.9 中被删除并且只能通过 jQuery.migrate 插件使用。）：

```
if ($.browser.msie && $.browser.version == 10) {
  $("html").addClass("ie10");
} 
```

或者你可以尝试像这样的**@media -ms-high-contrast Hack**：

```
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {  
   /* IE10-specific styles go here */  
} 
```

或者你可以试试**@media Zero Hack**

```
@media screen and (min-width:0\0) {  
    /* IE9 and IE10 rule sets go here */  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:57:37.930

您可能想要 lte（小于或等于）或完全匹配而不是 lt（小于）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-17T19:21:33.457

刚刚完成了一封 html 电子邮件（响应式）。从我到目前为止所阅读的内容来看，IE 10 的解决方案没有外部，而是使用：

```
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) { 

} 
```

作为主要 css 的一部分。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-04-10T18:09:50.813

如果您将此添加到 wp 主题中，则必须正确链接它。前任：

```
<!--[if lt IE 10]><link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/ie10.css" /><![endif]--> 
```

# php - 在最终删除记录之前将显示警告的代码

> ID：14585707
> 
> 赞同：0
> 
> 时间：2013-01-29T14:53:13.873
> 
> 标签：php, html, web

所以这是我删除数据库中记录的代码

```
<?php
error_reporting(0);

header("location:display.php");

$con=mysql_connect("localhost","root","");

mysql_select_db("bfp6",$con);

$result=mysql_query("DELETE FROM station WHERE id<>234");

$row=mysql_fetch_array($result);

mysql_close($con);

?> 
```

我应该添加什么代码才能显示“所有记录将被删除，继续？”的警告。然后有一个是和取消选项。当我单击“是”时，它将删除除 id=234 之外的所有内容，当我单击“取消”时，它不会做任何事情。我真的不知道这一点，即使它是可能的。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:56:20.907

这是客户端 javascript 的工作。您可以通过这种方式使用本机确认对话框：

```
<a href="delete.php" onclick="return confirm('All records will be deleted, continue?')">Delete records</a> 
```

单击“是”后，浏览器将导航到您的脚本删除记录。

# c# - 打开包含查询字符串的 URL

> ID：14585709
> 
> 赞同：3
> 
> 时间：2013-01-29T14:53:17.417
> 
> 标签：c#, windows-8, query-string

我需要能够从 C# 应用程序在浏览器中打开链接。通常，我会使用这样的代码来打开链接：

```
Process.Start(new ProcessStartInfo("explorer.exe", @"http://www.google.com")); 
```

不幸的是，只有当 URL 包含查询字符串时，它才能成功打开资源管理器而不是浏览器： [http ://www.google.com/search?q=stackoverflow](http://www.google.com/search?q=stackoverflow)

如何打开带有查询字符串的 URL？

编辑说明：我正在使用带有非 IE 默认浏览器的 Windows 8。我在尝试仅使用 Process.Start 时看到与“未注册的类”相同的错误，如此处所述：[Process.Start(url) 在 Windows 8/Chrome 上损坏 - 有其他选择吗？](https://stackoverflow.com/questions/12206368/process-starturl-broken-on-windows-8-chrome-are-there-alternatives)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T15:16:36.220

终于找到了一个解决方案——在几年前编写批处理文件后，我没有尝试过这个，这很常见，这给我留下了深刻的印象。

```
Process.Start(new ProcessStartInfo("explorer.exe", "\"" + @"http://www.google.com/search?q=stackoverflow" + "\"")); 
```

只是在它周围添加引号似乎工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:54:41.667

您可以使用默认浏览器：

```
Process.Start(@"http://www.google.com"); 
```

是不是很简单？

它适用于查询字符串：

```
Process.Start(@"http://www.google.com/search?q=stackoverflow"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:56:08.840

你只需要这样做：

```
try
{
   Process.Start(@"http://www.google.com/search?q=stackoverflow");
}
catch(Exception ex)
{
   MessageBox.Show(ex.ToString());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:56:14.297

尝试“开始”而不是“explorer.exe”。拉起命令行并输入 < start [http://google.com?q=blah](http://google.com?q=blah) > 对我有用。

# php - 将计数器变量添加到变量名称

> ID：14585711
> 
> 赞同：2
> 
> 时间：2013-01-29T14:53:19.740
> 
> 标签：php, string, if-statement, for-loop

我不明白如何将计数器变量内容添加到另一个变量的名称中。虽然我意识到使用数组可以更优雅地解决我的问题，但我想在变量名中使用计数器。

到目前为止，我的代码如下所示：

```
 <?php
        $f2 = bla2;
        $f3 = bla3; 
```

……

```
 $f13 = bla13;
        $f14 = 0;
        echo $f2;
        for($j = 3; $j <= 14; ++$j){
        if (!empty('$f'.$j)){
        echo(', ');
        eval('print $f'.$j.';');
        };
     };
     ?> 
```

我想为每个 $f 提供输出，并在回显之前检查它是否为空。在添加 if 条件之前，for 循环已经工作。我假设我没有在 if 条件内正确命名变量，而且我不知道该怎么做，因为这段代码不能像现在这样工作。

我还想知道，是否可以将 if 条件包含到 for 循环中。我已经尝试将解决方案应用于这些问题

[使用计数器作为变量名的一部分访问变量](https://stackoverflow.com/questions/4327218/access-a-variable-using-a-counter-as-part-of-the-variable-name)

[在变量末尾添加计数器？](https://stackoverflow.com/questions/12664712/add-counter-to-the-end-of-variables/12664734#12664734)

[使用计数器作为变量的一部分](https://stackoverflow.com/questions/4990901/use-counter-as-part-of-variable/4990922#4990922)

但到目前为止还没有成功。也许有人在这里发现了我的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:56:03.877

像这样的东西应该工作：

```
for ($i = 3; $i <= 14; ++$i) {
    if (empty(${"f$i"})) {
        ${"f$i"} = ${"bla$i"}();
    }
} 
```

最重要的是，您可以使用它`${"f$i"}`来查找您的变量变量。

# c# - 是否可以在 c# 中以编程方式添加 css ？

> ID：14585713
> 
> 赞同：1
> 
> 时间：2013-01-29T14:53:23.860
> 
> 标签：c#, asp.net, html, css

我的样式表是；

```
.rsAptContent{ background-color: transparent !important; margin: 5px !important;} 
```

是否可以在后面的代码中创建这样的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:41:31.767

有点难以理解您的问题，因为它的格式不正确，但我试一试，这里有几种可能的解决方案可能适合您的问题。

如果您想将 css 文件读出到文本框，请执行此操作

```
//To read/load the file
Output = File.ReadAllText(Server.MapPath(Request.ApplicationPath) + "StylesheetPath.css");
//To write/save the file
File.WriteAllText(Server.MapPath(Request.ApplicationPath) + "StylesheetPath.css", Input); 
```

如果您想在每个页面加载时动态地在页面上编写 css，您可以这样做。

```
string styles = ".rsAptContent{ background-color: transparent !important; margin: 5px !important;}"
HeaderID.InnerText = "<style>"+styles+"</style>"; 
```

我不建议这样做，因为它会在每次负载时窃取 CPU，最好在这样的几个静态样式表之间进行切换

```
string stylesheet = @"\style1.css";
Head1.InnerText = "<link href=\"" + stylesheet + "\" rel=\"stylesheet\" type=\"text/css\" />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:58:16.557

css 文件是扩展名为 .css 的文本文件，使用 C# 中的 StreamWriter 类可以像任何其他文本文件一样生成它

# java - 在 JPanel 上绘制可移动线

> ID：14585715
> 
> 赞同：1
> 
> 时间：2013-01-29T14:53:27.533
> 
> 标签：java, swing, jpanel, line, graphics2d

我正在编写一个程序，它应该允许用户创建房间的平面图 - 这意味着他们可以画线来表示墙壁等。我正在使用带有 Graphics 2D 的 JPanel 来完成所有绘图工作，目前我有一个网格设置为 JPanel 的背景，我可以根据鼠标移动绘制线条（我有一个具有两种状态的鼠标状态枚举 - 拖动和空闲）。但是，我想向线条添加控制点，以便在绘制它们后可以在 JPanel 周围移动它们，但我不知道如何做到这一点。我知道我需要矩形来表示点，但我不知道如何将它们链接到线，以便如果点移动，线也会移动。我将不胜感激。

这是 JPanel 类的代码：

```
 package floorplan;

 /**
 *
 * @author xodkx
 */

 import java.awt.*;
 import java.awt.event.*;
 import javax.swing.*;
 import java.awt.image.BufferedImage;
 import java.awt.event.MouseListener;

 public class Floor extends JPanel implements MouseListener, MouseMotionListener
 {

 private static final int WIDTH = Integer.parseInt(JOptionPane.showInputDialog("Please 
                                  enter the width of your room"));
 private static final int LENGTH = Integer.parseInt(JOptionPane.showInputDialog("Please       
                                  enter the width of your room"));
 private static final Color BACKGROUND = Color.WHITE;
 private static final Color INITIAL_COLOUR = Color.BLACK;
 private static final Framework INITIAL_FRAMEWORK = Framework.WALL;  

 private MouseState state = MouseState.IDLE;
 private Framework frameworkType = INITIAL_FRAMEWORK; 
 private Color colour = INITIAL_COLOUR;

 private Point start = null;
 private Point end = null;
 private Rectangle startpt = new Rectangle(0, 0, 8, 8);// Start control point
 private Rectangle endpt = new Rectangle(0, 0, 8, 8);// End control point

 private BufferedImage bufImage = null;

 public Floor()
  {
      setPreferredSize(new Dimension(LENGTH,WIDTH));
      setBackground(Color.white);
      setBorder(BorderFactory.createLineBorder (Color.black, 5));

      this.addMouseListener(this);
      this.addMouseMotionListener(this);

  }

    public void setColor(Color color)
  {
      colour = color;

  }  

   public void setFramework(Framework framework)
  {
      frameworkType = framework;
  }  

@Override
 public void paintComponent(Graphics g)
  {
     super.paintComponent(g);
     Graphics2D g2 = (Graphics2D)g;
     g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, 
                          RenderingHints.VALUE_ANTIALIAS_ON);

      if(bufImage == null)
      {
          int h = this.getHeight();
          int w = this.getWidth();
          bufImage = (BufferedImage)this.createImage(h,w);
          Graphics2D gc = bufImage.createGraphics(); 
          gc.setColor(BACKGROUND);   
          gc.fillRect(0, 0, w, h);
      }

      g2.drawImage(bufImage,null,0,0);

      drawGrid(g2);

      if(state == MouseState.DRAGGING)
      {
          createComponent(g2);
      }
  }

public void drawGrid(Graphics g2)// sets a grid as the background of the JPanel
{
     int gridDivisions = 20;
     int divisionSize = WIDTH/gridDivisions;
     int grid = WIDTH*LENGTH;

     g2.setColor(Color.lightGray);

     for(int i=1; i<grid; i++)
    {
        int x = i * divisionSize;
        g2.drawLine(x,0,x,getSize().height);
    }

     for(int i=1; i<grid; i++)
    {  
       int y = i*divisionSize;
       g2.drawLine(0,y,getSize().width,y);
    }
}

  public void createComponent(Graphics2D g2)// method that draws the lines for various  
                                                components of the room
  {
      g2.setColor(colour);

      switch (frameworkType)
      { 
          case WALL:
            g2.setStroke(new BasicStroke(5));
            g2.drawLine(start.x, start.y, end.x,end.y);
            break;

          case DOOR:
            g2.setStroke(new BasicStroke(5));
            g2.drawLine(start.x, start.y, end.x,end.y);
            break;

          case WINDOW:
            g2.setStroke(new BasicStroke(5));
            g2.drawLine(start.x, start.y, end.x,end.y);
            break;

          default:
          g2.drawString("test", 10, 20);
          break;   
      }        
  }

@Override
public void mousePressed(MouseEvent e) 
{
     state = MouseState.DRAGGING;
     start = e.getPoint();
     end = start;
}

@Override

public void mouseDragged(MouseEvent e) 
{

    state = MouseState.DRAGGING;
    end = e.getPoint();
    this.repaint();

}

@Override
public void mouseReleased(MouseEvent e) 
{
    end = e.getPoint();
    if(state == MouseState.DRAGGING)
    {
       state = MouseState.IDLE;
       createComponent(bufImage.createGraphics());
       this.repaint();
    } 
}

 @Override
public void mouseClicked(MouseEvent e) 
{

}

@Override
public void mouseEntered(MouseEvent e) 
{

}

@Override
public void mouseExited(MouseEvent e) 
{

}

@Override
public void mouseMoved(MouseEvent e) 
{

}
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T14:57:38.447

为什么不创建一个控制点的 ArrayList，或者更好的是，以控制点为中心的 Ellipse2D 对象？然后您可以测试鼠标是否在 Ellipse 中被按下以确定它的行为应该是什么，并且您可以使用 Ellipse2D 对象列表来获取在方法中绘制时的线端点`paintComponent(...)`。

请注意，您的代码不会为我们编译或运行，因此我们很难对其进行全面分析、测试和修改。为了获得更好更具体的帮助，请考虑将您的代码压缩为仍然可以编译、运行并能够重现您的问题的最小可能代码，即[sscce](http://sscce.org)。

例如：

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.Stroke;
import java.awt.event.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.List;

import javax.swing.*;

@SuppressWarnings("serial")
public class Floor2 extends JPanel {
   private static final Color BACKGROUND = new Color(0, 0, 0, 0);
   private static final Color INITIAL_COLOUR = Color.BLACK;
   private static final int BORDER_WIDTH = 5;
   private static final Color LINE_DRAWING_COLOR = new Color(200, 200, 255);
   private static final Color LINE_COLOR = Color.blue;
   private static final Stroke DRAWING_LINE_STROKE = new BasicStroke((float)BORDER_WIDTH);
   public static final int ELLIPSE_DIAMETER = 10;
   private MouseState mouseState = MouseState.IDLE;
   private BufferedImage bufImage = null;
   private int width;
   private int height;
   private int gridDivisions;
   private List<List<Ellipse2D>> ellipseList = new ArrayList<List<Ellipse2D>>();
   private Line2D drawingLine = null;

   public enum MouseState {
      IDLE, DRAGGING
   }

   public Floor2(int width, int height, int gridDivisions) {
      this.width = width;
      this.height = height;
      this.gridDivisions = gridDivisions;
      setBackground(Color.white);
      setBorder(BorderFactory.createLineBorder(Color.black, BORDER_WIDTH));

      MyMouseAdapter mouseAdapter = new MyMouseAdapter();
      addMouseListener(mouseAdapter);
      addMouseMotionListener(mouseAdapter);
   }

   private static void createAndShowGui() {
      int w = 600;
      int h = w;
      int gridDiv = 20;
      Floor2 mainPanel = new Floor2(w, h, gridDiv);

      JFrame frame = new JFrame("Floor2");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(width, height);
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      if (bufImage == null) {
         bufImage = createGridImage();
      }

      Graphics2D g2 = (Graphics2D) g;
      g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);

      Stroke initStroke = g2.getStroke();
      g2.setStroke(DRAWING_LINE_STROKE);
      if (mouseState == MouseState.DRAGGING && drawingLine != null) {
         g2.setColor(LINE_DRAWING_COLOR);
         g2.draw(drawingLine);
      }

      g2.setColor(LINE_COLOR);
      for (List<Ellipse2D> ellipses : ellipseList) {
         Point2D p2d1 = new Point2D.Double(ellipses.get(0).getCenterX(), ellipses.get(0).getCenterY());
         Point2D p2d2 = new Point2D.Double(ellipses.get(1).getCenterX(), ellipses.get(1).getCenterY());
         Line2D line = new Line2D.Double(p2d1, p2d2);
         g2.draw(line);
      }

      g.drawImage(bufImage, 0, 0, this);
      g2.setStroke(initStroke);
   }

   private BufferedImage createGridImage() {
      BufferedImage gridImage = new BufferedImage(width, height,
            BufferedImage.TYPE_INT_ARGB);
      Graphics2D g2 = gridImage.createGraphics();
      g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
      g2.setBackground(BACKGROUND);
      g2.clearRect(0, 0, width, height);

      int divisionSize = width / gridDivisions;
      int grid = width * height;
      g2.setColor(Color.lightGray);
      for (int i = 1; i < grid; i++) {
         int x = i * divisionSize;
         g2.drawLine(x, 0, x, getSize().height);
      }
      for (int i = 1; i < grid; i++) {
         int y = i * divisionSize;
         g2.drawLine(0, y, getSize().width, y);
      }

      g2.dispose();
      return gridImage;
   }

   private class MyMouseAdapter extends MouseAdapter {
      private Point p1;

      @Override
      public void mousePressed(MouseEvent e) {
         if (e.getButton() != MouseEvent.BUTTON1) {
            return;
         }

         for (List<Ellipse2D> endPts : ellipseList) {
            // check if one of the ellipses has been selected
            // if so, remove it from elipseList
            // set drawingLine == to end points
            // setdragging = true
            // repaint
            // return
         }
         mouseState = MouseState.DRAGGING;
         p1 = e.getPoint();
      }

      @Override
      public void mouseDragged(MouseEvent e) {
         if (mouseState != MouseState.DRAGGING) {
            return;
         }
         drawingLine = new Line2D.Double(p1, e.getPoint());
         repaint();
      }

      @Override
      public void mouseReleased(MouseEvent e) {
         if (drawingLine != null) {
            List<Ellipse2D> newEndPoints = new ArrayList<Ellipse2D>();

            double x1 = drawingLine.getX1() - ELLIPSE_DIAMETER / 2;
            double y1 = drawingLine.getY1() - ELLIPSE_DIAMETER / 2;
            Ellipse2D ellipse1 = new Ellipse2D.Double(x1, y1, ELLIPSE_DIAMETER, ELLIPSE_DIAMETER);
            x1 = drawingLine.getX2() - ELLIPSE_DIAMETER / 2;
            y1 = drawingLine.getY2() - ELLIPSE_DIAMETER / 2;
            Ellipse2D ellipse2 = new Ellipse2D.Double(x1, y1, ELLIPSE_DIAMETER, ELLIPSE_DIAMETER);
            newEndPoints.add(ellipse1);
            newEndPoints.add(ellipse2);
            ellipseList.add(newEndPoints);
            repaint();
         }

         mouseState = MouseState.IDLE;
         drawingLine = null;
      }
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

编辑：mousePressed 方法更改：

```
private class MyMouseAdapter extends MouseAdapter {
  private Point2D p1;

  @Override
  public void mousePressed(MouseEvent e) {
     if (e.getButton() != MouseEvent.BUTTON1) {
        return;
     }

     for (List<Ellipse2D> endPts : ellipseList) {
        for (int i = 0; i < endPts.size(); i++) {
           Ellipse2D endPt = endPts.get(i);
           if (endPt.contains(e.getPoint())) {
              Ellipse2D endPt2 = endPts.get(Math.abs(i - 1));
              ellipseList.remove(endPts);

              Point2D p2 = new Point2D.Double(endPt.getCenterX(), endPt.getCenterY());
              p1 = new Point2D.Double(endPt2.getCenterX(), endPt2.getCenterY());
              drawingLine = new Line2D.Double(p1, p2);
              mouseState = MouseState.DRAGGING;
              repaint();
              return;
           }
        }
     }
     mouseState = MouseState.DRAGGING;
     p1 = e.getPoint();
  }

  @Override
  public void mouseDragged(MouseEvent e) {
     if (mouseState != MouseState.DRAGGING) {
        return;
     }
     drawingLine = new Line2D.Double(p1, e.getPoint());
     repaint();
  }

  @Override
  public void mouseReleased(MouseEvent e) {
     if (drawingLine != null) {
        List<Ellipse2D> newEndPoints = new ArrayList<Ellipse2D>();

        double x1 = drawingLine.getX1() - ELLIPSE_DIAMETER / 2;
        double y1 = drawingLine.getY1() - ELLIPSE_DIAMETER / 2;
        Ellipse2D ellipse1 = new Ellipse2D.Double(x1, y1, ELLIPSE_DIAMETER, ELLIPSE_DIAMETER);
        x1 = drawingLine.getX2() - ELLIPSE_DIAMETER / 2;
        y1 = drawingLine.getY2() - ELLIPSE_DIAMETER / 2;
        Ellipse2D ellipse2 = new Ellipse2D.Double(x1, y1, ELLIPSE_DIAMETER, ELLIPSE_DIAMETER);
        newEndPoints.add(ellipse1);
        newEndPoints.add(ellipse2);
        ellipseList.add(newEndPoints);
        repaint();
     }

     mouseState = MouseState.IDLE;
     drawingLine = null;
  }
} 
```

# jquery - 使用 jQuery 过滤谷歌地图

> ID：14585719
> 
> 赞同：0
> 
> 时间：2013-01-29T14:53:38.003
> 
> 标签：jquery, maps

有没有办法用 jQuery 过滤谷歌地图位置变量？

前任：

*   车*   船

单击带有 ID car 的链接，过滤所有带有 ID car 的字符串。点击 ID car 会隐藏地图上带有 ID 船的所有字符串，并在地图上只显示带有 ID car 的字符串。

可能吗？

```
function initialize() {

    var locations = [

  ['<strong>Firm 1</strong><br />1111 Country<br />Street<br /><br />', 47.6801806,8.7499505, 1, id car here?? ],

  ['<strong>Firm 2</strong><br />2222 Country<br />Street<br /><br />', 47.6801806,8.7499505, 2, id boat here?? ],

];

    var map = new google.maps.Map(document.getElementById('map_canvas'), {
      zoom: 10,
      center: new google.maps.LatLng(47.603786, 9.055737),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map,
       icon: new google.maps.MarkerImage('/assets/templates/style/images/iconKarte.png')
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }

 }

</script>

 <div id="map_canvas" style="width:750px;height:500px;"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:13:12.220

您需要执行[此 JsFiddle 中所示的以下操作，其中包含大量冗余代码](http://jsfiddle.net/farrukhsubhani/XLHDg/show/)

1.  一旦地图对象在那里。用你所有的标记填充它
2.  当有人点击过滤器时（例如在我的小提琴中点击汽车或人），它将清除地图并从无序列表中重绘标记，仅供人使用。该功能不会改变您缩放或平移的位置，但您可以轻松地做到这一点。
3.  没有第 3 步。也许您希望他们回到地图上的所有对象的原始状态，因此放置一个显示所有标记的功能。

过滤的实际代码是：

```
{clear:{}},
{ action: 'addMarkers',
marker:{
values:ulmarkerspeople,
options:{
    draggable: false,
    icon:'http://mapicons.nicolasmollet.com/wp-content/uploads/mapicons/shape-default/color-ffc11f/shapecolor-color/shadow-1/border-dark/symbolstyle-white/symbolshadowstyle-dark/gradient-no/male-2.png'
}} 
```

我正在使用 gmap3 清除一个空对象，因为它也允许清除标签或 ID。如果您使用的是 google map v3 API，则`{action:'clear'}`在重绘标记之前使用清除地图。

# python - 您可以将关键字参数而不是位置参数传递给 argparse 吗？

> ID：14585722
> 
> 赞同：2
> 
> 时间：2013-01-29T14:53:48.893
> 
> 标签：python, arguments, argparse

假设你有一个 python 函数，如下所示：

```
def foo(spam, eggs, ham):
    pass 
```

您可以仅使用位置参数 ( `foo(1, 2, 3)`) 来调用它，但您也可以明确地说`foo(spam=1, eggs=2, ham=3)`，或混合使用两者 ( `foo(1, 2, ham=3)`)。

是否可以使用 argparse 获得相同的功能？我有几个带有关键字的位置参数，我不想在只使用一个时定义所有这些参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:59:21.767

你可以这样做：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('foo',nargs='?',default=argparse.SUPPRESS)
parser.add_argument('--foo',dest='foo',default=None)

parser.add_argument('bar',nargs='?',default=argparse.SUPPRESS)
parser.add_argument('--bar',dest='bar',default=None)

parser.add_argument('baz',nargs='?',default=argparse.SUPPRESS)
parser.add_argument('--baz',dest='baz',default=None)

print parser.parse_args() 
```

主要如您所描述的那样工作：

```
temp $ python test.py 1 2 --baz=3
Namespace(bar='2', baz='3', foo='1')
temp $ python test.py --baz=3
Namespace(bar=None, baz='3', foo=None)
temp $ python test.py --foo=2 --baz=3
Namespace(bar=None, baz='3', foo='2')
temp $ python test.py 1 2 3
Namespace(bar='2', baz='3', foo='1') 
```

在函数调用类比中，python 会给你一个错误，但 argparse 会允许它：

```
temp $ python test.py 1 2 3 --foo=27.5
Namespace(bar='2', baz='3', foo='27.5') 
```

您可能可以通过使用[互斥分组来解决这个问题](http://docs.python.org/2.7/library/argparse.html#mutual-exclusion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:22:54.057

你也可以使用这个模块：[docopt](https://github.com/docopt/docopt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:58:36.357

我相信这就是您正在寻找的[Argparse 默认值](http://docs.python.org/dev/library/argparse.html#default)

# javascript - JQuery，页面加载后加载元素

> ID：14585723
> 
> 赞同：1
> 
> 时间：2013-01-29T14:53:53.790
> 
> 标签：javascript, jquery, html

我想做这样的事情：

```
<img src="" class="after-all" data="/assets/huge-bg.png" />
<div class="after-all" data="/actions/div-content.html"></div> 
```

在 JS 中

```
$("after-all").loadMissing(); 
```

我认为最好的方法是使用识别方法构建一个插件：

```
if (img) $(this).attr('src', $(this).attr('data'));
if (div) $(this).load($(this).attr('data')); 
```

这可能吗 ？做这个的最好方式是什么 ？这个怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:57:03.650

您可以使用[is()](http://api.jquery.com/is/)：

```
$.fn.loadMissing = function() {
    return this.each(function() {
        var $this = $(this);
        if ($this.is("img")) {
            $this.attr("src", $this.attr("data"));
        } else if ($this.is("div")) {
            $this.load($this.attr("data"));
        }
    });
}; 
```

请注意，您应该使用另一个属性`data`来存储此信息。像 HTML5 数据属性这样`data-content`的可能是更好的解决方案。

# php - stdClass 对象和数组键值

> ID：14585726
> 
> 赞同：3
> 
> 时间：2013-01-29T14:53:56.590
> 
> 标签：php, arrays, object, stdclass

我有以下带有数组的对象，并试图获取电子邮件的价值。如何才能做到这一点？

```
stdClass Object (
    [status] => stdClass Object ( 
        [info] => Unsubscribe List [code] => 200 
    ) 
    [data] => Array ( 
        [o1958147@rtrtr.com] => stdClass Object ( 
            [date] => 2013-01-28 08:09:19 
            [origin] => 
        ) 
        [phil.houston@granherne.com] => stdClass Object ( 
            [date] => 2013-01-28 08:35:59 
            [origin] => 
        ) 
    )    
) 
```

目前我可以使用以下 foreach 访问日期值。

```
foreach ($fnret->data as $msg)
{
    echo $msg->date;      // shows 2013-01-28 08:35:59
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T14:55:32.030

这个应该工作：

```
foreach ($fnret->data as $email => $msg) {
    // echo $msg->date;      // shows 2013-01-28 08:35:59
    echo $email;
} 
```

# ruby - Bundler 在安装或更新 gems 时卡住了

> ID：14585728
> 
> 赞同：5
> 
> 时间：2013-01-29T14:54:02.643
> 
> 标签：ruby, rubygems, bundler

我最近尝试运行`bundle update`，但我的一个核心卡在 100%。我试图重置所有内容，包括删除我的 RVM gemset，但没有任何帮助。

我曾经`bundle install --verbose`看到发生了什么，整个过程在这一点上停止了：

```
Unmet Dependencies: ["spicycode-rcov", "tenderlove-frex"]
Fetching gem metadata from http://rubygems.org/
Query List: ["spicycode-rcov", "tenderlove-frex"]
Query Gemcutter Dependency Endpoint API: spicycode-rcov tenderlove-frex
Fetching from: http://rubygems.org/api/v1/dependencies?gems=spicycode-rcov,tenderlove-frex
HTTP Success
Query List: [] 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T15:34:29.607

我已经多次遇到这种行为。Bundler 可能没有被卡住，而是正在探索可能的 gem 版本的退化大搜索空间。您可以通过设置 env var 获得有关如何评估可能性的详细调试信息`DEBUG_RESOLVER=1`。阅读“ [Bundler 如何捆绑？](http://patshaughnessy.net/2011/9/24/how-does-bundler-bundle) ”以了解解析器跟踪的算法和输出。

我通过从 Bundler 始终回溯并重试许多不同候选版本并将版本限制为高于某些最新版本的跟踪中识别 gem 来解决该问题。这通常有助于 Bundler 大大减少搜索空间并快速完成其评估。当然，您添加的约束可能会与另一个 gem 的要求产生无法解决的冲突，在这种情况下，您可以逐步放松您的约束，直到它兼容为止。

我有一个个人 TODO 可以返回到其中一个退化的解决条件，并将其转换为一组可以公开的依赖项和版本历史记录，以便我可以向 Bundler 开发人员提交可重现的问题。（我们的许多 gem 是我们公司私有的。）来源中的这条[评论](https://github.com/carlhuda/bundler/blob/master/lib/bundler/resolver.rb#L3)表明他们认为算法总是在合理的时间内完成，但根据经验，有一些困难的案例有有效的解决方案，这些解决方案无法通过*数小时*的计算来解决。

如果您的情况类似于我的情况，但完全依赖于公共 gem，如果您可以将问题 gemfile 和 gemset 公开并将[问题提交](https://github.com/carlhuda/bundler/issues?state=open)给 Bundler 以便深入了解算法的人可以改进它。

[问题 #2030](https://github.com/carlhuda/bundler/issues/2030)表明可能存在解析器实际上陷入无限循环的错误。如果您看到这方面的证据，您可能希望将您的 gemfile 提交给该问题，特别是如果您的重现案例小于已提交的案例。

# matlab - Matlab - 缩放时固定文本大小

> ID：14585729
> 
> 赞同：1
> 
> 时间：2013-01-29T14:54:01.613
> 
> 标签：matlab, text, plot, zooming

我希望在放大绘图时保持文本大小固定。因此，我希望指定文本区域 4 个角的位置。换句话说：当情节缩小时，文本应该几乎不可见，因为它太小了。这可能吗？应该是，但我还没有看到任何解决方案。

至于现在我正在绘制一个圆圈

```
rectangle('Position',[xpos, ypos, 0.06, 0.2], 'Curvature',[1,1]);
% I wish to plot textstrings of num2str(val) inside the circle here
% Another alternative, to be able to se num2str(val) whenever I click the circle 
```

提前致谢

/fixitinthemix

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:38:10.713

您可以`FontUnits`在文本句柄上设置属性以使文本随轴缩放。请参阅[此处](http://www.mathworks.se/help/matlab/ref/text_props.html)了解不同的可能性。

# javascript - 为现有复选框生成标签以用于 jQuery UI

> ID：14585737
> 
> 赞同：0
> 
> 时间：2013-01-29T14:54:36.737
> 
> 标签：javascript, jquery, jquery-ui

我希望能够使用[jQuery UI 按钮](http://jqueryui.com/button/)为页面上的所有复选框设置样式。但是，许多按钮没有标记。有没有办法我可以做这样的事情：

```
$(".unlabeled-checkbox").append("<label> </label>").button(); 
```

还要正确填写标签的“for”属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:58:10.567

您可以将`wrap()`方法传递给要执行的函数，试试这个：

```
$('.unlabeled-checkbox').wrap(function() {
    return $('<label></label>').attr('for', $(this).prop('name'));
}); 
```

在函数内部，`this`将引用`.unlabeled-checkbox`数组中的当前元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:12:25.470

你可以使用 jQuery 的“wrap”函数来包装你所有的复选框：

```
$(".unlabeled-checkbox").wrap("<label></label>"); 
```

这将产生 HTML：

```
<label>
    <input class="unlabeled-checkbox" type="checkbox" value="a" />
</label>
<label>
    <input class="unlabeled-checkbox" type="checkbox" value="b" />
</label> 
```

如果你环绕`<label>`你`<input>`，你不需要“for”属性。单击标签将触发单击内部复选框。

# mysql - Mysql自定义函数

> ID：14585743
> 
> 赞同：0
> 
> 时间：2013-01-29T14:54:49.207
> 
> 标签：mysql, sql, phpmyadmin, sqlyog

有人可以解释为什么这不起作用吗？我在 phpMyAdmin 中尝试过，在 SQLYog 中尝试过修改版本

```
CREATE FUNCTION `manageDate`(a VARCHAR(200),b DATETIME) RETURNS DATETIME
BEGIN
DECLARE datevar DATETIME;
IF (a REGEXP '[0-9]{1,2}/[0-9]{1,2}/[0-9]{2,4}') THEN 
SET datevar = STR_TO_DATE(SUBSTRING(TRIM(a),-8,8),'%d/%c/%y');
ELSE 
SET datevar = DATE_FORMAT(b,'%Y-%c-%d');
END IF;
RETURN datevar;
END 
```

谢谢

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:01:27.580

看起来您只分配`datevar`了 DATETIME 的 DATE 部分。

尝试这个：

```
CREATE FUNCTION `manageDate`(a VARCHAR(200),b DATETIME) RETURNS DATETIME
BEGIN
DECLARE datevar DATETIME;
IF (a REGEXP '[0-9]{1,2}/[0-9]{1,2}/[0-9]{2,4}') THEN 
SET datevar = STR_TO_DATE(SUBSTRING(TRIM(a),-8,8),'%d/%c/%y');
ELSE 
SET datevar = DATE_FORMAT(b,'%Y-%c-%d %H:%i:%s');
END IF;
RETURN datevar;
END 
```

# visual-studio-2010 - 如何为多个窗口提供 Word VSTO 自定义任务窗格？

> ID：14585747
> 
> 赞同：2
> 
> 时间：2013-01-29T14:54:53.533
> 
> 标签：visual-studio-2010, ms-word, vsto

我正在创建一个显示自定义任务窗格的 Word 加载项。然后将此窗格绑定到要显示或隐藏的功能区（只需更改可见属性）。

加载第一个文档后，我可以看到任务窗格。但是，当我打开一个新文档（打开一个新窗口）时，可见的切换按钮会不断检查（从而隐藏/显示）与第一个窗口关联的自定义任务*面板*。

如何在自定义任务窗格上设置窗口属性以正确显示它。（也许总是在所有窗口中显示它？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:07:04.527

显然我做错了，我希望在所有窗口中共享一个任务窗格，但我需要每个窗口都有一个任务窗格。因此，每个打开/新建的文档我都会创建一个并将其与当前窗口相关联。

# iphone - 带边框的透明按钮

> ID：14585749
> 
> 赞同：1
> 
> 时间：2013-01-29T14:54:57.510
> 
> 标签：iphone, ios, objective-c, uibutton, transparency

我试图通过使它们透明但仍然有边框的按钮来获得这种效果。当我制作透明图像时，由于某种原因，它们会使按钮变大。以下是一些效果示例。

![在此图像中，导航栏上的按钮对于导航栏的背景是半透明的。](../Images/4f88bcc6c77ac7c8bf37b1e2961af3dc.png)

![在左侧](../Images/4bc5726a04210c519bec96075425a244.png)

在第一幅图中，导航栏上的按钮对于导航栏的背景是半透明的。

在左侧的第二张图片中，“Action Composer”按钮是透明的，但仍有边框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:57:40.123

试试这个：

这将创建一个透明按钮：

```
UIButton *button=[UIButton buttonWithType:UIButtonTypeCustom];
button.frame  GRectMake(x, y, w, h);
[button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
[button setTitle:@"Button" forState:UIControlStateNormal];
button.backgroundColor=[UIColor clearColor];
[button setTitleColor:[UIColor colorWithRed:0.3 green:0.1 blue:0.4 alpha:1.0] forState:UIControlStateNormal];
[self.view addSubview:btn]; 
```

现在边界：

```
[[button layer] setBorderWidth:2.0f];
[[button layer] setBorderColor:[UIColor greenColor].CGColor]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:58:32.797

最简单的方法是为按钮创建一个图像资源。

图像将有一个边框和一个清晰的中间。

然后使用图像作为按钮图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:20:38.410

我可以推荐看看[FTWButton](https://github.com/FTW/FTWButton)。它是一个超级可定制的 UIControl，它复制了 UIButton 并在外观方面提供了疯狂的多功能性。它在控制状态之间也有一些不错的动画。

它带有一些内置样式，但您可以根据自己的喜好完全自定义按钮。

我与该项目没有任何关系，我只是将它用于我自己的一个项目并且喜欢它:)

# ruby-on-rails - rails Phusion Passenger apache是 什么关系？

> ID：14585755
> 
> 赞同：0
> 
> 时间：2013-01-29T14:55:17.323
> 
> 标签：ruby-on-rails

我知道 rails 是 ruby​​ 框架，而 apache 是 rails 的服务器。而 Phusion Passenger 是用来做什么的？它是服务器还是部署工具？

现在我正在尝试在服务器上部署我的 rails 应用程序，而我不知道如何使用 Phusion Passenger 和 apache 来运行我的应用程序）：

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:09:51.677

Phusion Passenger 只是一个 apache mod，需要在您的应用程序使用的虚拟主机中激活，告诉 apache 使用的是哪个版本的 Rails 以及其他类似的配置。所以基本上，Apache 使用Passenger 来运行Ruby on Rails 应用程序。

您必须阅读此内容才能安装Passenger：[https](https://www.phusionpassenger.com/download) ://www.phusionpassenger.com/download（只需向下滚动一点以阅读开源版本文档）。

这是为了设置它并为您的一个应用程序运行它：[http](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_configuring_phusion_passenger) ://www.modrails.com/documentation/Users%20guide%20Apache.html#_configuring_phusion_passenger所以，是的，这里有很多文字，但你幸运的是，不需要阅读所有内容。

此外，当您安装它时，Passenger 会准确地告诉您在虚拟主机配置中要写什么，基本上只有 2 行文本。:)

大多数情况下，如果您有一个看起来像这样的虚拟主机：

```
<VirtualHost *:80>
    ServerName www.wsgiapp.com
    DocumentRoot /webapps/wsgiapp/public
    <Directory /webapps/wsgiapp/public>
        Allow from all
        Options -MultiViews
    </Directory>
</VirtualHost> 
```

安装后，Passenger 会告诉你写这样的东西：

```
<VirtualHost *:80>
    ServerName www.wsgiapp.com
    DocumentRoot /webapps/wsgiapp/public

    PassengerRuby /usr/bin/ruby
    PassengerRoot /somewhere/passenger/x.x.x

    <Directory /webapps/wsgiapp/public>
        Allow from all
        Options -MultiViews
    </Directory>
</VirtualHost> 
```

# javascript - 在 DOM 中获取 Chid 元素

> ID：14585761
> 
> 赞同：1
> 
> 时间：2013-01-29T14:55:26.797
> 
> 标签：javascript, dom

我有一个类似于以下代码段的代码

```
 <div id="main">
  <div>
   <ul>
    <li>
      <table><tbody><tr><td></td></tr></tbody></table>
        <ul id="inner" > /* this ul has many nested children */</ul>
    </li>
    </ul>
  </div> 
```

我想在“主” div 中获取所有标签，如果它们已经有一个，则为它们设置新的 id。我有一个像下面这样的 javascript

```
 var InfoMsg = "";
        var nodes = element.getElementsByTagName('*');
        for (var i = 0; i < nodes.length; i++) 
        {
            InfoMsg += nodes[i]
        }  
        alert(InfoMsg); 
```

我收到以下警报

```
 [object HTMLDivElement][object HTMLUListElement][object HTMLLIElement]
 [object HTMLTableElement][object HTMLTableSectionElement]
 [object HTMLTableRowElement][object HTMLTableCellElement]
 [object HTMLImageElement][object HTMLTableCellElement]
 [object HTMLTableCellElement] 
```

为什么 getElementsByTagName() 方法没有检索到内部 ul 及其子项，或者有没有其他方法可以这样做；

注意：在运行时我只会知道“主” div id。所有的孩子都是动态的，可以跑到任何长度。

提前致谢！！

# javascript - 在 sencha ext js 应用程序中嵌入普通的 html 表单

> ID：14585764
> 
> 赞同：1
> 
> 时间：2013-01-29T14:55:33.880
> 
> 标签：javascript, html, extjs, extjs4

目前我们有一个用普通 HTML（只有一页）和 Javascript（纯 JS + JQuery）编写的大组件（功能）。Sencha EXT JS 重写是非常困难或不可能的。我们正在开发一个完全在 Sencha 中的新应用程序。

无论如何，我可以将此功能嵌入到新的 Sencha 应用程序中，从而使原始源代码（HTML + JS）保持不变？

谢谢！米尔多尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:21:22.080

您可以使用[`Ext.ComponentLoader`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentLoader).

```
var cmp = Ext.create('Ext.Component', {
    renderTo: Ext.getBody(),
    loader: {
        url: 'myPage.html',
        renderer: 'html' //default
    }
}); 
```

如果您已经拥有 javascript 中的内容，则可以使用。

> Ext.getCmp('yourComponentId')。[更新（theHtmlorData，[loadScriptsOnPage]，[callback]）](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Component-method-update)

其中 yourComponentId 是具有 id 的元素（不建议使用 id）

# python - 调整浮动以保持高精度

> ID：14585771
> 
> 赞同：0
> 
> 时间：2013-01-29T14:55:42.503
> 
> 标签：python, floating-point, precision, floating-accuracy, floating-point-precision

我正在编写一些需要非常高精度的 Python 代码。我开始使用 Numpy float64，但这并没有按要求工作，然后我开始使用“十进制”模块，然后工作正常。

但是，理想情况下，我更喜欢使用浮点数而不是使用小数模块 - 我记得有人曾经告诉我，可以以某种方式操纵浮点数，以便可以达到精度水平（通过乘法或其他方式？）。

这是真的还是我记错了？对不起，如果这有点模糊。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:17:52.210

这取决于您拥有的号码类型。例如，如果您在区间中添加值，则`[1...2)`最好使用 offsettet 值：

```
>>> a = 1.0000000000000000001
>>> a
1.0
>>> a+a
1.0
>>> a = 0.0000000000000000001
>>> a
1e-19 
```

为了更简单的存储，您可以将它们写为元组`(n, f)`，其中 n 是自然数 (int) 和`f`区间中的分数`[0...1)`。

然而，使用这种值进行计算是很棘手的。

```
>>> (1+1, a+a)
(2, 2e-19) 
```

如果有疑问，请按照 BenDundee 的建议坚持`Decimal`或使用。[`bigfloat`](http://packages.python.org/bigfloat/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T15:07:02.653

另一个有用的包是[`mpmath`](http://mpmath.org/)：

```
import mpmath as mp
p.dps = 64       #64 decimal places
msqrt(3)/2
mpf('0.8660254037844386467637231707529361834714026269051903140279034897246')
p.dps = 30       #30 decimal places
mpf('0.866025403784438646763723170752918') 
```

# javascript - Jquery Accordion 插件在销毁后无法重新初始化

> ID：14585779
> 
> 赞同：0
> 
> 时间：2013-01-29T14:56:08.463
> 
> 标签：javascript, jquery, jquery-ui-accordion

[http://api.jqueryui.com/accordion/](http://api.jqueryui.com/accordion/)这个插件用于创建手风琴。手风琴的内容需要动态更新，因此我做了一个

```
obj.accordion('destroy')
// update the contents here...
obj.accordion()  // recreating it 
```

这会导致新添加的面板正常工作，但之前存在的面板（h3 + 内容）好像发生了 2 次点击（打开快速关闭）

行为在 Chrome 中是可重现的，而不是在 Firefox 中。

感谢帮助以检测问题。

# jquery - jQuery mobile +主干：无法在初始化之前调用listview上的方法

> ID：14585780
> 
> 赞同：9
> 
> 时间：2013-01-29T14:56:08.973
> 
> 标签：jquery, css, listview, jquery-mobile, backbone.js

我正在尝试结合 Backbone.js 和 jQuery mobile 的优点。我正在为移动设备开发，目前正在尝试开发一个动态列表，用于调试日志消息。想象一下，你有一个控制台窗口，你想在里面放条目。问题是，在插入一个新`<li>`的 之后，必须用 刷新列表`$('#myList').listview('refresh')`。这对我不起作用，我收到此错误：

> *错误：无法在初始化之前调用列表视图上的方法；试图调用方法“刷新”*

```
tagName : 'ul',
id : 'console',
consoleTemplate : _.template($('#console-template').html()),
initialize : function() {
  console.log('ConsoleView:init');
  this.$el.attr('data-inset', 'true');
  this.$el.attr('data-role', 'listview');
  this.$el.css('width', '50%');
  this.$el.append(this.consoleTemplate());
  // für alle Funktionen die mit this arbeiten
  _.bindAll(this, 'render', 'addConsoleItem', 'appendConsoleItem');
  this.consoleItemCollection = new ConsoleItemCollection();
  this.consoleItemCollection.bind('add', this.appendConsoleItem);
  this.counter = 0;
  this.render();
},
render : function() {
  console.log('ConsoleView:render');
  var self = this;
  _(this.consoleItemCollection.models).each(function(item) {
    self.addConsoleItem(item);
  }, this);
  return this;
}, 
```

这是我的控制台视图的摘录。

```
var view = Backbone.View.extend({
  el : 'div',
  id : 'content',
  consoleView : null,
  initialize : function() {
    console.log('ApplicationView:init');
    _.bindAll(this, 'render');
    this.$el.attr('data-role', 'content');
    _.bindAll(this, 'render');
    this.consoleView = new ConsoleView();
    this.consoleView.addConsoleItem(new ConsoleItemModel());
  },
  render : function() {
    console.log('ApplicationView:render');
    this.$el.append(this.consoleView.render().el);
    return this;
  }
}); 
```

这是我的应用程序视图。

那么什么时候调用刷新方法呢？

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-29T14:58:50.113

**`jQuery Mobile`**在触发刷新之前需要初始化listview：

```
$('#myList').listview().listview('refresh'); 
```

如果你想了解更多关于这个以及为什么在 jQuery Mobile 中使用动态创建的内容时要小心很重要，请查看我的博客**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**。或者你可以在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到它。

# ruby-on-rails - 模板缺少用户/创建

> ID：14585783
> 
> 赞同：0
> 
> 时间：2013-01-29T14:56:09.693
> 
> 标签：ruby-on-rails

我正在关注 ruby​​ on rails 教程，我在第 8 课注册失败。我在提交信息时收到模板缺失错误。

```
Missing template users/create, application/create with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "/Users/lexi87/rails_projects/sample_app/app/views" 
```

我仔细检查了他逐行打开的文件。没有什么不同。

**users_controllers.rb**

```
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
    @title = @user.name
  end

  def new
    @user = User.new
    @title = "Sign up"
end

def create
  @user = User.new(params[:user])
  if @user.save
    # Handle a successful save.
  else
  @title = "Sign up"
  render = 'new'
  end
end
end 
```

**新的.html.erb**

```
<h1>Sign up</h1>

<%= form_for(@user) do |f| %>
<%= render 'shared/error_messages'%>
<div class="field">
<%= f.label :name %><br/>
<%= f.text_field :name %>
</div>

<div class="field">
<%= f.label :email %><br/>
<%= f.text_field :email %>
</div>

<div class="field">
<%= f.label :password %><br/>
<%= f.password_field :password %>
</div>

<div class="field">
<%= f.label :password_confirmation, "Confirmation" %><br/>
<%= f.password_field :password_confirmation %>
</div>

<div class="actions">
<%= f.submit "Sign up" %>
</div>
<% end %> 
```

**Error_messages.html.erb**

```
<% if @user.errors.any? %>
    <div id="error_explanation">
        <h2>
            <%= pluralize(@user.errors.count, "error") %>
            prohibited this user from being saved:
            </h2>
            <p>There were problems with the following fields:</p>
            <ul>
            <% @user.errors.full_messages.each do |message| %>
            <li><%= message %></li>
            <% end %>
            </ul>
    </div>

    <% end %> 
```

**users_controller_spec.rb**

```
require 'spec_helper'

describe UsersController do
  render_views

describe "GET 'show'" do

  before(:each) do
    @user = Factory(:user)
  end

  it "should be successful" do
    get :show, :id => @user
    response.should be_success
  end

it "should find the right user" do
  get :show, :id => @user
  assigns(:user).should == @user
end

it "should have the right title" do
  get :show, :id => @user
  response.should have_selector('title', :content => @user.name)

end

it "should have the user's name" do
  get :show, :id => @user
  response.should have_selector('h1', :content => @user.name)
end

it "should have a profile image" do
  get :show, :id => @user
  response.should have_selector('h1>img', :class => "gravatar")
end

it "should have the right URL" do
   get :show, :id => @user
   response.should have_selector('td>a' :content => user_path(@user), :href => user_path(@user))
end

end
  describe "GET 'new'" do

    it "should be successful" do
      get :new
      response.should be_success
    end

    it "should have the right title" do
      get :new
      response.should have_selector('title', :content => "Sign up")
  end

 end

 describe "POST 'create'" do

   describe "failure" do

 before(:each)do
 @attr = { :name => "", :email => "", :password => "", :password_confirmation => "" }
 end

 it "should have the right title" do
 post :create, :user => @attr
 response.should have_selector('title', :content => "Sign up")
 end

 it "should render the 'new' page"
 post :create, :user => @attr
 response.should render_template('new')
 end

 it "should not create a user" do
  lambda do
    post :create, :user => @attr
  end.should_not change(User, :count)

end
end

end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:07:25.987

```
def create
  @user = User.new(params[:user])
  if @user.save
    redirect_to :action => :index
  else
    @title = "Sign up"
    render 'new'
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T16:00:27.497

Rails 期望有一个名为 create.html.erb 的文件，它会在您成功创建用户时呈现。

如果您不想拥有 create.html.erb 文件，则必须呈现不同的操作或重定向。这需要在您有“#Handle a successful save”的地方进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T13:25:57.110

感谢您的建议。

实际问题是渲染后我有一个“=”符号。它显示在他们的文件中，但是当我快进视频时，我注意到它不存在。

再次感谢。

# javascript - HTML5 输入属性，通过 Javascript 访问？

> ID：14585789
> 
> 赞同：18
> 
> 时间：2013-01-29T14:56:21.827
> 
> 标签：javascript, html, css

您可能知道，在*HTML5 规范*中，我们为`<input>`元素添加了一些新属性，例如`required`和`pattern`。这提供了一种验证用户输入的好方法，我们甚至可以使用*CSS*和*伪选择器*将其可视化。例子

**HTML**

```
<input type="number" pattern="\d+" required/> 
```

**CSS**

```
input:required:valid {
    border: 1px solid green;
}

input:required:invalid {
    border: 1px solid red;
} 
```

如果该`<input>`元素是元素的一部分`<form>`，则用户将无法在`invalid state`.

但是，我的问题是，如果我们想在没有`<form>`元素的情况下使用这些新属性怎么办？有没有办法直接通过 ECMAscript访问这样一个节点的**当前状态？**`<input>`

有什么活动吗？有听众吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-29T15:00:45.850

[正如@Zirak](https://chat.stackoverflow.com/transcript/message/7431516#7431516)所指出的，有一个[`checkValidity`](https://developer.mozilla.org/en-US/docs/HTML/Forms_in_HTML#Constraint_Validation_API)方法，它是[约束验证 API](http://developers.whatwg.org/association-of-controls-and-forms.html#the-constraint-validation-api)的一部分。

```
var s = document.createElement('input');
s.checkValidity(); // true
s.required = true;
s.checkValidity(); // false 
```

但是，`checkValidity`如果它无效，则触发一个无效事件。（表格将用红色勾勒出轮廓。）您可能想改用该`willValidate`属性（或该`.validity.valid`属性）。

此外，该`validity`属性非常值得关注（有关每个属性在[Constraint Validation API](http://developers.whatwg.org/association-of-controls-and-forms.html#the-constraint-validation-api)上的含义的更多信息）：

```
s.validity
    ValidityState
        customError: false
        patternMismatch: false
        rangeOverflow: false
        rangeUnderflow: false
        stepMismatch: false
        tooLong: false
        typeMismatch: false
        valid: false
        valueMissing: true 
```

这篇文章指出了浏览器之间的实现差异：http: [//www.html5rocks.com/en/tutorials/forms/constraintvalidation/](http://www.html5rocks.com/en/tutorials/forms/constraintvalidation/)（即：像往常一样一团糟。）

您还可以监听[`invalid`](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/invalid)事件，在提交表单时触发，或者在`checkValidity`调用方法时触发。

*演示*：http: [//jsfiddle.net/XfV4z/](http://jsfiddle.net/XfV4z/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T15:01:52.700

输入元素有一个`validity`属性：

```
var i = document.getElementsByTagName('input')[0]
i.validity.valid // True or false

console.log(i.validity);

// Logs (when `1` is entered):

 ValidityState
   customError: false
   patternMismatch: false
   rangeOverflow: false
   rangeUnderflow: false
   stepMismatch: false
   tooLong: false
   typeMismatch: false
   valid: true
   valueMissing: false 
```

有关我不打算复制的更多详细信息，请查看[Florian Margaine](https://stackoverflow.com/users/851498/florian-margaine)[的答案](https://stackoverflow.com/a/14585861/1835379)

# jquery - 通过指定类名查找值

> ID：14585793
> 
> 赞同：0
> 
> 时间：2013-01-29T14:56:32.787
> 
> 标签：jquery, html, asp.net-mvc-3, telerik

> **可能重复：**
> [jquery按其类获取telerik行（网格）的字段值](http://stackoverflow.com/questions/14584512/jquery-get-field-value-of-a-telerik-rowgrid-by-its-class)

我在 MVC3 上使用 Telerik

我的网格有（事件“onRowSelect(e)”）：

`e.row.cells[1].innerHtml`//包含“我的价值”

`e.row.cells[1].className`//包含“myClass”

如何根据className（jQuery - Find（）？）找到innerHtml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:08:25.767

HTML：

```
 <div class="myDiv">Some text</div> 
```

jQuery：

```
$(document).ready(function() {
  alert($('.myDiv').text());
}); 
```

将输出：

> 一些文字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:05:49.050

感谢上帝，

并感谢大家，

从大家的评论中，我找到了正确答案：

```
$(e.row).find('myClass').text(); 
```

# php - 输入字段不可恢复？

> ID：14585797
> 
> 赞同：0
> 
> 时间：2013-01-29T14:56:53.403
> 
> 标签：php, ldap

我正在使用 LDAP，出于某种奇怪的原因，我能够通过 PHP 恢复所有条目，但我无法获取*phonenumber*。它表现得好像是空的，但显然不是。

以下是相关代码：

```
$ds = ldap_connect($LDAP_SERVER);

$sr = ldap_search($ds, $LDAP_PEOPLE, "(|(cn=*$search*)(sn=*$search*)(gn=*$search*)(uid=*$search*)(mail=*$search*))", array('uid', 'sn', 'givenname', 'mail', 'telephoneNumber', 'o') );

ldap_sort($ds, $sr, $_GET['tri']);

foreach ($entries as $entry) {
    if (! isset($entry['uid'])) continue;

    $uid = $entry['uid'][0];
    $telnum = $entry['telephoneNumber'][0];
    if (! isset($entry['telephonenumber'])) continue; //THIS IS EVALUATED AS TRUE
...
} 
```

如果错误以某种方式很明显，请原谅我。我已经为此工作了几个小时，但我是 LDAP 新手，适用于其他领域的方法似乎不适用于*phonenumber*。我知道 LDAP+电话上还有其他条目，但我没有找到一个似乎适合我的问题的条目。

* * *

编辑：

我发现 LDAP 管理器不允许访问某些字段，包括*电话号码*。我不对授权负责。我向系统管理员发送了一个请求以更改授权。我认为它应该可以解决问题。我会及时向大家发布。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:59:59.143

正在设置的数组项和具有值的数组项之间存在差异。

例如：

```
$array['test'] = "";
if (!isset($array['test'])) //false
if (empty($array['test'])) //true 
```

我想你的 LDAP 服务器总是返回一个电话号码，不管是否有值。

你可以使用

```
if (empty($entry['telephonenumber'])) continue; 
```

反而？

尝试`var_dump($entry['telephonenumber'])`查看输出以查看`$entry`设置的内容

# c# - XmlSerializer 反序列化类层次结构

> ID：14585802
> 
> 赞同：2
> 
> 时间：2013-01-29T14:57:29.587
> 
> 标签：c#, xml, serialization

我在 .NET 中遇到了 XmlSerializer 的一些问题。

这里我有一个我刚刚建立的小例子。（也可用@gist [https://gist.github.com/2d84be9041a3f9c06237](https://gist.github.com/2d84be9041a3f9c06237)）

```
using System.IO;
using System.Xml.Serialization;

namespace XmlSerializingSample
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var specialType = new SpecialType()
                {
                    Id = 1,
                    Name = "test"
                };

            var serializer = new XmlSerializer(typeof (SpecialType));
            var des = new XmlSerializer(typeof (BaseType));
            using (var memeStream = new MemoryStream())
            {
                serializer.Serialize(memeStream, specialType);
                memeStream.Flush();

                memeStream.Seek(0, SeekOrigin.Begin);
                var instance = des.Deserialize(memeStream); // Here it throws the exception
            }
        }
    }

    [XmlInclude(typeof(SpecialType))]
    [XmlType("baseType")]
    public class BaseType
    {
        public long Id { get; set; }
    }

    [XmlRoot("special")]
    public class SpecialType : BaseType
    {
        public string Name { get; set; }
    }
} 
```

在代码的第 24 行，我得到一个 InvalidOperationException 声明“{”<special xmlns=''> wurde nicht erwartet."}" [是的，它是德语]

我发现的所有帖子都指出，在被反序列化的基本类型上添加 XmlIncludeAttribute 之后，这应该可以工作。我是不是忘了……？

问候， MacX

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:34:39.433

问题是您的序列化程序正在使用根元素序列化 SpecialType，如下所示：

```
<special ...>
   <Id>... 
```

但是然后您尝试使用它来反序列化它， `var des = new XmlSerializer(typeof (BaseType));`它知道这两种类型，但它不知道如何处理`root`xml 中的元素。

如果你想让它工作，你还需要将基类型的根元素设置为序列化为`special`. 换句话说，您需要这样做：

```
[XmlInclude(typeof(SpecialType))]
[XmlType("baseType")]
[XmlRoot("special")]
public class BaseType
{
      public long Id { get; set; }
} 
```

这样，反序列化器就知道如何将其`special`作为根元素进行处理。

我认为没有其他简单的替代方案可以使这项工作开箱即用。

# 更新

[这是使用XmlAttributeOverrides](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlroot.aspx)类的另一种替代方法。

LinqPad 代码：

```
void Main()
{
      var specialType = new SpecialType()
                {
                    Id = 1,
                    Name = "test"
                };

            var serializer = new XmlSerializer(typeof (SpecialType));

            XmlAttributeOverrides attrOverrides = new XmlAttributeOverrides();
            XmlAttributes attrs = new XmlAttributes();

            // Create an XmlRootAttribute to override.
            XmlRootAttribute attr = new XmlRootAttribute();
            attr.ElementName = "special";

            // Add the XmlRootAttribute to the collection of objects.
            attrs.XmlRoot=attr; 
            attrOverrides.Add(typeof(BaseType),  attrs);
            var des = new XmlSerializer(typeof (BaseType), attrOverrides);

            using (var memeStream= new MemoryStream())
            {
                serializer.Serialize(memeStream, specialType);
                memeStream.Flush();

                memeStream.Seek(0, SeekOrigin.Begin);
                var instance = des.Deserialize(memeStream); 
            }

}

[XmlInclude(typeof(SpecialType))]
[XmlType("baseType")]
public class BaseType
{
      public long Id { get; set; }
}

[XmlRoot("special")]
public class SpecialType : BaseType
{
        public string Name { get; set; }
} 
```

# php - 如何预防 ) 从被插入到 PHP 的数据库中？

> ID：14585803
> 
> 赞同：0
> 
> 时间：2013-01-29T14:57:30.593
> 
> 标签：php

我正在研究一个 PHP/MySQL 脚本，它将数据插入到这样的数据库中......

```
Caesar &amp;#40;courtesy post&amp;#41; 
```

我知道这是一个基本问题，但我怎样才能防止特殊字符这样做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:02:29.387

看来您不仅仅是一次对内容进行 HTML 转义，而是实际上做了两次。您应该做的第一件事是尝试找出您的内容以这种方式结束的*原因*，而不是尝试将其解码为未转义的格式。您应该始终对要使用数据的格式进行转义，在插入时使用 SQL 转义函数进行转义，在 HTML 中呈现数据时使用 htmlspecialchars（或类似函数）进行转义（并注意字符编码用过的）。

如果数据以这种格式来自另一个来源，请使用`html_entity_decode`再次规范化文本。然而，这似乎很奇怪。

# c# - excel 数据通过数据集使用 OLE 到 datagridview 跳过初始的空白行和空白列

> ID：14585806
> 
> 赞同：1
> 
> 时间：2013-01-29T14:57:36.653
> 
> 标签：c#, datagridview, dataset, connection-string, oledb

我正在使用 OLE 相关的 API 将数据读取到 DataSet，然后在 DataGridView 中查看。源是一个excel文件。如果第一行或第一列为空，则跳过该行或列。我希望读取数据而不考虑空/有数据。其他行/列即使是空的也可以正常工作，但只缺少开始。

我阅读了 ColumnHeader 并尝试更改 connectionString (HDR=NO) 和其他内容，但没有任何结果。

调用 API 时需要指定任何其他内容吗？由于跳过了此初始空白行/列，缺少与 excel 列和 DataGridView 列的一对一映射。

需要向此 OleDbDataAdapter 参数添加/修改任何内容，该参数实际上读取数据并填充到数据集：

```
 OleDbDataAdapter cmd = new System.Data.OleDb.OleDbDataAdapter(
                    "select * from [" + worksheetName + "$]", con); 
```

是的，我正在设置一些必需的信息并调用一个方法来从每张纸上读取数据。除了阅读它们之外，我没有对行/列执行任何操作。

```
 OleDbConnection con = new System.Data.OleDb.OleDbConnection(connectionString);

    System.Data.DataTable getWorksheetData(OleDbConnection con, OleDbDataAdapter cmd)
    {
        con.Open();
        System.Data.DataSet excelDataSet = new DataSet();

        cmd.Fill(excelDataSet);
        con.Close();

        return excelDataSet.Tables[0];
    } 
```

我的连接字符串是：

```
 string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + 
        fileName + "; Extended Properties=\"Excel 12.0 Xml;HDR=NO;Mode=Read;ReadOnly=True;\""; 
```

# struts2 - 删除convention.annotation - 替换为struts.xml 中的配置

> ID：14585812
> 
> 赞同：1
> 
> 时间：2013-01-29T14:57:47.243
> 
> 标签：struts2, struts2-convention-plugin

我在从操作中删除`@Action`和`@Result`约定插件注释并将其替换为`struts.xml`.

```
package com.microed.cars.web;

import org.apache.struts2.convention.annotation.Action;
import org.apache.struts2.convention.annotation.Result;

import com.opensymphony.xwork2.ActionSupport;

public class HomeAction extends ActionSupport {

    @Action(results = {
            @Result(location = "/jsp/home.jsp")
    })
    @Override
    public String execute() throws Exception {
        return super.execute();
    }
} 
```

当这些注释存在时，我可以成功访问`localhost:port/context/home.action`

当我删除注释时，我得到“没有为操作定义结果.....”struts 错误，尽管 struts.xml 中有一个“全部捕获”结果 - 整个 struts.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN"
    "http://struts.apache.org/dtds/struts-2.1.dtd">

<struts>
    <constant name="struts.devMode" value="true"/>
    <constant name="struts.convention.package.locators" value="web"/>
    <constant name="struts.convention.default.parent.package" value="beetroot"/>

    <package name="beetroot" extends="json-default">

        <action name="home" class="homeAction">
            <result>/jsp/home.jsp</result>
        </action>

        <action name="cars" class="baseCarsAction">
            <result name="input" type="json">
                <param name="root">autoResults</param>
                /jsp/home.jsp
            </result>
        </action>
    </package>
</struts> 
```

它扩展了 json-default 因为我需要 json 结果类型来实现自动完成功能。

我不知道为什么它没有为`homeAction`班级选择动作映射。我知道`struts.xml`正在阅读，因为如果我删除动作映射“汽车”，那么自动完成功能将被禁用（但这需要我试图删除的注释以验证这一点）。

我知道“未定义结果”是一个简单的错误，通常是由拼写/大写错误引起的，但这里绝对不是这种情况，它似乎只是忽略了整个“家庭”动作映射。

单步执行时`DefaultActionInvocation.createResult`，根本没有“结果”可供它尝试匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:33:17.150

就目前而言，`cars`行动声明无效（IMO，这也没有意义）：

```
<action name="cars" class="baseCarsAction">
  <result name="input" type="json">
    <param name="root">autoResults</param>
    <param name="location">/jsp/home.jsp</param>
  </result>
</action> 
```

也就是说：如果它是 JSON 结果，JSP 没有帮助，它会被忽略（或完全拒绝，我不确定它是否是错误）。单个结果将*是*JSON 或 HTML。

将日志记录提高到`DEBUG`级别以捕获启动错误以缩小可能原因的范围。

如果`baseAction`在您的 Spring 配置文件中进行了配置（如果您使用 Spring 注释进行注入，则不需要），则该`home`操作的配置是有效的。

如果您实际上没有使用约定插件，我会谨慎部署它：它改变了操作的映射方式；它可能会对周围的应用程序产生影响并导致问题。坚持一个或另一个，避免两者——这使得推理应用程序行为的来源变得更加困难。

不相关，但我建议将 JSP 页面放在下面`/WEB-INF`以禁止直接客户端访问。

# griffon - griffon 编程错误：找不到类注释

> ID：14585817
> 
> 赞同：3
> 
> 时间：2013-01-29T14:58:10.830
> 
> 标签：griffon

我正在尝试为一个项目掌握 griffon/grails/groovy 的窍门。

我在编译时从我的 Test1Controller.groovy 文件中收到此错误：

```
[griffonc] /home/ironmantis7x/griffon_projects/test1/griffon-app/controllers/test1/Test1Controller.groovy: 14: unable to resolve class Threading ,  unable to find class for annotation
 [griffonc]  @ line 14, column 5.
 [griffonc]        @Threading(Threading.Policy.SKIP)
 [griffonc]        ^
 [griffonc] 
 [griffonc] /home/ironmantis7x/griffon_projects/test1/griffon-app/controllers/test1/Test1Controller.groovy: 14: unable to find class 'Threading.Policy.SKIP' for annotation attribute constant
 [griffonc]  @ line 14, column 16.
 [griffonc]        @Threading(Threading.Policy.SKIP)
 [griffonc]                   ^
 [griffonc] 
 [griffonc] 2 errors                                                                                                             
Compilation error: Compilation Failed 
```

这是我的控制器文件：

```
package test1

import griffon.util.GriffonNameUtils as GNU

class Test1Controller {

    def model

    def clear = {
            model.griffonClass.propertyNames.each { name -> model[name] = ''
            }
    }

    @Threading(Threading.Policy.SKIP)
    def submit = {
            java.swing.JoptionPane.showMessageDialog(
            app.windowManager.windows.find{it.focused}, 
            model.griffonClass.propertyNames.collect([]) {
                     name -> "${GNU.getNaturalName(name)} = ${model[name]}"
            }.join('n')
            )
    }

} 
```

就像我说我是 griffon/grails/groovy 的新手 - 有人可以帮助我了解我似乎缺少什么吗？

谢谢！

铁螳螂7x

我做了下面建议的更改，现在运行时出现此错误：griffon run-webstart -clean：

```
net.sourceforge.jnlp.LaunchException: Fatal: Initialization Error: Could not initialize application. 
    at net.sourceforge.jnlp.Launcher.createApplication(Launcher.java:778)
    at net.sourceforge.jnlp.Launcher.launchApplication(Launcher.java:552)
    at net.sourceforge.jnlp.Launcher$TgThread.run(Launcher.java:889)
Caused by: net.sourceforge.jnlp.LaunchException: Fatal: Application Error: Cannot grant permissions to unsigned jars. Application requested security permissions, but jars are not signed.
    at net.sourceforge.jnlp.runtime.JNLPClassLoader.setSecurity(JNLPClassLoader.java:312)
    at net.sourceforge.jnlp.runtime.JNLPClassLoader.<init>(JNLPClassLoader.java:232)
    at net.sourceforge.jnlp.runtime.JNLPClassLoader.getInstance(JNLPClassLoader.java:357)
    at net.sourceforge.jnlp.runtime.JNLPClassLoader.getInstance(JNLPClassLoader.java:330)
    at net.sourceforge.jnlp.Launcher.createApplication(Launcher.java:770)
    ... 2 more 
```

如何签署应用程序以克服此错误？

这是我运行 griffon -version 的配置：

```
------------------------------------------------------------
  Griffon 1.2.0
------------------------------------------------------------

   Build: 11-Jan-2013 09:10 AM
  Groovy: 2.0.6
     Ant: 1.8.4
   Slf4j: 1.7.2
  Spring: 3.2.0.RELEASE
     JVM: 1.7.0_09 (Oracle Corporation 23.2-b09)
      OS: Linux 3.5.0-22-generic amd64 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:08:27.817

当您使用线程注释时，您应该在控制器上导入 griffon.transform.Threading。

```
package test1

import griffon.util.GriffonNameUtils as GNU
import griffon.transform.Threading 

class Test1Controller {

    def model

    def clear = {
            model.griffonClass.propertyNames.each { name -> model[name] = ''
            }
    }

    @Threading(Threading.Policy.SKIP)
    def submit = {
            java.swing.JoptionPane.showMessageDialog(
            app.windowManager.windows.find{it.focused}, 
            model.griffonClass.propertyNames.collect([]) {
                     name -> "${GNU.getNaturalName(name)} = ${model[name]}"
            }.join('n')
            )
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:23:29.413

应用程序签名应该默认发生。当`run-webapp`被调用时，签名取自`griffon-app/conf/BuildConfig.groovy`. 在开发中运行时，此签名是自签名的。例如，以下输出是在开发中运行 webstart 模式的表单，没有任何配置更改

```
Welcome to Griffon 1.2.0 - http://griffon-framework.org/
Licensed under Apache Standard License 2.0
Griffon home is set to: /usr/local/griffon

Base Directory: /private/tmp/test1
Running script /usr/local/griffon/scripts/RunWebstart.groovy
Resolving dependencies...
Dependencies resolved in 857ms.
Environment set to development
Resolving framework plugin dependencies ...
Framework plugin dependencies resolved in 1495 ms.
Resolving plugin dependencies ...
Plugin dependencies resolved in 807 ms.
    [mkdir] Created dir: /Users/aalmiray/.griffon/1.2.0/projects/test1/classes/cli
    [mkdir] Created dir: /Users/aalmiray/.griffon/1.2.0/projects/test1/classes/main
    [mkdir] Created dir: /Users/aalmiray/.griffon/1.2.0/projects/test1/classes/test
    [mkdir] Created dir: /Users/aalmiray/.griffon/1.2.0/projects/test1/test-classes
    [mkdir] Created dir: /Users/aalmiray/.griffon/1.2.0/projects/test1/test-resources
    [mkdir] Created dir: /Users/aalmiray/.griffon/1.2.0/projects/test1/resources
 [griffonc] Compiling 8 source files to /Users/aalmiray/.griffon/1.2.0/projects/test1/classes/main
 [griffonc] Compiling 3 source files to /Users/aalmiray/.griffon/1.2.0/projects/test1/classes/main
    [mkdir] Created dir: /private/tmp/test1/dist/webstart
    [mkdir] Created dir: /Users/aalmiray/.griffon/1.2.0/projects/test1/resources/griffon-app/i18n
    [mkdir] Created dir: /Users/aalmiray/.griffon/1.2.0/projects/test1/resources/griffon-app/resources
     [copy] Copying 2 files to /Users/aalmiray/.griffon/1.2.0/projects/test1/resources/griffon-app/i18n
     [copy] Copying 8 files to /Users/aalmiray/.griffon/1.2.0/projects/test1/resources/griffon-app/resources
     [copy] Copying 1 file to /Users/aalmiray/.griffon/1.2.0/projects/test1/classes/main
     [copy] Copying 11 files to /Users/aalmiray/.griffon/1.2.0/projects/test1/resources
     [copy] Copied 8 empty directories to 8 empty directories under /Users/aalmiray/.griffon/1.2.0/projects/test1/resources
Auto-generating a local self-signed key
   [genkey] Generating Key for development
     [copy] Copying 1 file to /private/tmp/test1/staging
  [signjar] Signing JAR: /private/tmp/test1/staging/groovy-all-2.0.6.jar to /private/tmp/test1/staging/groovy-all-2.0.6.jar as development
  [signjar] Warning: 
  [signjar] The signer certificate will expire within six months.
  [signjar] Enter Passphrase for keystore: Enter key password for development: 
     [copy] Copying 1 file to /private/tmp/test1/staging
  [signjar] Signing JAR: /private/tmp/test1/staging/griffon-rt-1.2.0.jar to /private/tmp/test1/staging/griffon-rt-1.2.0.jar as development
  [signjar] Warning: 
  [signjar] The signer certificate will expire within six months.
  [signjar] Enter Passphrase for keystore: Enter key password for development: 
     [copy] Copying 1 file to /private/tmp/test1/staging
  [signjar] Signing JAR: /private/tmp/test1/staging/slf4j-api-1.7.2.jar to /private/tmp/test1/staging/slf4j-api-1.7.2.jar as development
  [signjar] Warning: 
  [signjar] The signer certificate will expire within six months.
  [signjar] Enter Passphrase for keystore: Enter key password for development: 
     [copy] Copying 1 file to /private/tmp/test1/staging
  [signjar] Signing JAR: /private/tmp/test1/staging/log4j-1.2.17.jar to /private/tmp/test1/staging/log4j-1.2.17.jar as development
  [signjar] Warning: 
  [signjar] The signer certificate will expire within six months.
  [signjar] Enter Passphrase for keystore: Enter key password for development: 
     [copy] Copying 1 file to /private/tmp/test1/staging
  [signjar] Signing JAR: /private/tmp/test1/staging/slf4j-log4j12-1.7.2.jar to /private/tmp/test1/staging/slf4j-log4j12-1.7.2.jar as development
  [signjar] Warning: 
  [signjar] The signer certificate will expire within six months.
  [signjar] Enter Passphrase for keystore: Enter key password for development: 
     [copy] Copying 1 file to /private/tmp/test1/staging
  [signjar] Signing JAR: /private/tmp/test1/staging/jcl-over-slf4j-1.7.2.jar to /private/tmp/test1/staging/jcl-over-slf4j-1.7.2.jar as development
  [signjar] Warning: 
  [signjar] The signer certificate will expire within six months.
  [signjar] Enter Passphrase for keystore: Enter key password for development: 
     [copy] Copying 1 file to /private/tmp/test1/staging
  [signjar] Signing JAR: /private/tmp/test1/staging/jul-to-slf4j-1.7.2.jar to /private/tmp/test1/staging/jul-to-slf4j-1.7.2.jar as development
  [signjar] Warning: 
  [signjar] The signer certificate will expire within six months.
  [signjar] Enter Passphrase for keystore: Enter key password for development: 
     [copy] Copying 1 file to /private/tmp/test1/staging
  [signjar] Signing JAR: /private/tmp/test1/staging/griffon-swing-runtime-1.2.0.jar to /private/tmp/test1/staging/griffon-swing-runtime-1.2.0.jar as development
  [signjar] Warning: 
  [signjar] The signer certificate will expire within six months.
  [signjar] Enter Passphrase for keystore: Enter key password for development: 
      [jar] Building jar: /private/tmp/test1/staging/test1.jar
   [delete] Deleting directory /Users/aalmiray/.griffon/1.2.0/projects/test1/resources/griffon-app/resources
    [mkdir] Created dir: /Users/aalmiray/.griffon/1.2.0/projects/test1/resources/griffon-app/resources
     [copy] Copying 1 file to /private/tmp/test1/staging
  [signjar] Signing JAR: /private/tmp/test1/staging/test1.jar to /private/tmp/test1/staging/test1.jar as development
  [signjar] Warning: 
  [signjar] The signer certificate will expire within six months.
  [signjar] Enter Passphrase for keystore: Enter key password for development: 
     [copy] Copying 11 files to /private/tmp/test1/staging
     [copy] Copying 18 files to /private/tmp/test1/dist/webstart
     [copy] Copied 3 empty directories to 2 empty directories under /private/tmp/test1/dist/webstart
      [zip] Building zip: /private/tmp/test1/dist/webstart/test1-0.1-webstart.zip 
```

在您发布的堆栈跟踪中不能不注意到`net.sourceforge.jnlp.LaunchException`。您使用的 JNLP 启动器与 JDK 提供的启动器不同吗？另外，运行的输出是`griffon -version`什么？我的是

```
------------------------------------------------------------
  Griffon 1.2.0
------------------------------------------------------------

   Build: 11-Jan-2013 09:10 AM
  Groovy: 2.0.6
     Ant: 1.8.4
   Slf4j: 1.7.2
  Spring: 3.2.0.RELEASE
     JVM: 1.6.0_37 (Apple Inc. 20.12-b01-434)
      OS: Mac OS X 10.7.5 x86_64 
```

# twitter-bootstrap - 引导网格系统：水平形式的不良包装

> ID：14585821
> 
> 赞同：1
> 
> 时间：2013-01-29T14:58:20.430
> 
> 标签：twitter-bootstrap

我只是使用引导程序和标签构建一个表单`.form-horizontal`，一行中有 4 列，例如

```
<form class="form-horizontal">
    <div class="row span12">
      <div class="control-group span3">
        <label class="control-label" for="inputEmail">Email</label>
        <div class="controls">
          <input type="text" id="inputEmail" placeholder="Email">
        </div>
      </div>
      <div class="control-group span3">
        <label class="control-label" for="inputEmail">Email</label>
        <div class="controls">
          <input type="text" id="inputEmail" placeholder="Email">
        </div>
      </div>
      <div class="control-group span3">
        <label class="control-label" for="inputEmail">Email</label>
        <div class="controls">
          <input type="text" id="inputEmail" placeholder="Email">
        </div>
      </div>                    
      <div class="control-group span3">
        <label class="control-label" for="inputPassword">Password</label>
        <div class="controls">
          <input type="password" id="inputPassword" placeholder="Password">
        </div>
      </div>
    </div>
</form> 
```

但是在调整它的大小时，它的布局确实很糟糕，如下图所示：

![在此处输入图像描述](../Images/791867c45ede6cd6451983220e2d6073.png)

这是一个演示它的小提琴：http: [//jsfiddle.net/juristr/XXXqN/](http://jsfiddle.net/juristr/XXXqN/)
*（只需尝试调整 HTML 窗口的大小以查看效果）*

关于我做错了什么的任何提示？Bootstrap 是否不能自动包装不再适合的项目，以每行 2 列结束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:06:46.967

我不确定您是否可以使用表单控件来适应表单，因为它有自己的边距。检查它是否有效

```
<div class="row-fluid">    
    <form class="form-horizontal">
        <div class="span3">
            <label>Email</label>
            <input type="text" class="span12" placeholder="Email" />
        </div>
        <div class="span3">
            <label>Email</label>
            <input type="text" class="span12" placeholder="Email" />
        </div>
        <div class="span3">
            <label>Email</label>
            <input type="text" class="span12" placeholder="Email" />
        </div>
        <div class="span3">
            <label>Password</label>
            <input type="password" class="span12" placeholder="Password"  />
        </div>
    </form>
</div> 
```

[小提琴](http://jsfiddle.net/causesevenatenine/CBS5y/)

# windows-installer - 远程安装：Windows 安装程序

> ID：14585822
> 
> 赞同：0
> 
> 时间：2013-01-29T14:58:24.693
> 
> 标签：windows-installer

我需要在远程 Windows 机器上安装我的 Windows 应用程序；我看到有几个人已经使用 WMI 和其他方法了。但我对这种手工制作的解决方案并不满意。如果 Windows Installer 可以做到这一点会容易得多；如果使用WMI等方式可以做到，为什么Windows Installer不做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:03:05.350

Windows Installer 是一种安装 MSI 数据库的服务。做一个软件分发系统不是它的工作。为此，Microsoft 在 Active Directory 中包含[GPO 部署](http://support.microsoft.com/kb/816102)和更强大的工具，例如 Systems Center Configuration Manager (SCCM)。

您还可以使用诸如 PSEXEC 之类的工具或与 WMI 或 PowerShell 交互来访问计算机并调用 MSIEXEC 来运行 MSI。但归根结底，Windows Installer 并不关心这个空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:24:09.913

如果您启用了管理共享，那么您始终可以将文件推送到远程计算机上的文件夹中，例如 \\hostname\c$\temp 或类似的文件夹，然后使用 WMI、PSEXEC 或远程 PowerShell 调用远程执行 msiexec。

# java - 删除已删除的 ConcurrentHashMap 元素有多安全？

> ID：14585829
> 
> 赞同：2
> 
> 时间：2013-01-29T14:58:48.930
> 
> 标签：java, multithreading, synchronization, concurrenthashmap

以下代码，多线程运行：

```
private static final Map<String, keyinfo> mapKeys = new ConcurrentHashMap<String, keyinfo>();

private static void purgeOldKeys() {
    for (Map.Entry<String, keyinfo> key : mapKeys.entrySet()) {
        if(key.getValue().createTime + keyCacheTime < getCurrentDBTime())
            mapKeys.remove(key);
    }
} 
```

我可以避免同步器吗？

还是因为删除已经删除的元素，没有根据 JavaDoc 定义，仍然需要同步器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T15:03:32.337

一般来说，从集合中*删除*`Iterator`时，使用完整的 API 比使用惰性的“foreach”概念要干净得多（而且速度更快！） 。

`iterator.remove();`不会使迭代器失效；它知道它所处的位置。使用此模式：

```
for (Iterator<> iter = map.entrySet().iterator(); iter.hasNext(); ) {
    Map.Entry<> entry = iter.next();
    if (testRemoval(entry))
        iter.remove(); // <----- remove using the iterator position!
} 
```

它更快，因为它不涉及再次*搜索*对象。它更健壮，因为迭代器知道对象已被删除。在许多集合中，您上面显示的代码将由于并发修改而“快速失败”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T15:11:40.790

1) 此代码无法删除任何内容，因为其中存在错误 -`mapKeys.remove(key);`您代码中的键实际上是 Map.Entry。它应该是

```
for (Map.Entry<String, keyinfo> e : map.entrySet()) {
    if (e.getValue().createTime + keyCacheTime < getCurrentDBTime())
            map.remove(e.getKey());
    }
} 
```

2）至于在迭代 ConcurrentHashMap 时删除条目是安全的，ConcurrentHashMap.entrySet API

```
The view's iterator is a "weakly consistent" iterator that will never throw ConcurrentModificationException 
```

这个测试证实了这一点

```
 Map<String, String> map = new ConcurrentHashMap<String, String>();
    map.put("1", "2");
    map.put("2", "2");
    map.put("3", "3");
    for (String k : map.keySet()) {
        map.remove(k);
    }
    System.out.println(map); 
```

印刷

```
{} 
```

# ruby-on-rails - 将 form_tag 更改为 form_for

> ID：14585832
> 
> 赞同：0
> 
> 时间：2013-01-29T14:58:50.987
> 
> 标签：ruby-on-rails, form-for

我想将此表单从更改`form_tag`为`form_for`，因此我将能够在同一个表单中使用两个提交按钮。如何更改它？

**画廊.html.haml**

```
- form_tag bulk_content_destroy_admin_project_path(params[@project.id]), :method => "get" do
            -if @entries.length == 0
              %h1 Theres is no design in project.
            -else 
              %input.select_all{:type => "checkbox"}
              = submit_tag "Delete All", :style => "margin-bottom: 10px;" 
              %ul.gallery
                -@entries.each  do |p|
                  %li.gallery_list{ :id => 'entry_' + p.id.to_s }
                    .left_column
                      = check_box_tag "designs_ids[]", p.id, false, :class => "chose_data"
                      %a.group{:href => p.design_url(:original) }
                        =image_tag(p.design_url(:_300px), {:title => p.title, :width => '300px', :height => '225px' }) 
                      .info    
                        %br  
                        ="#" + p.entry_no.to_s +  " - " +  p.title 
                        %ul
                          -if p.withdrawn? 
                            %li 
                              Design is withdrawn
                          %li 
                            Designer :
                            =link_to p.owner.user_name, admin_users_profile_path(p.owner) if p.owner
                          %li
                            Rating :
                            =p.rating
                          %li
                            =link_to "Download File", p.design_url(:original)
                          -if p.view_in_showcase == true
                            =link_to "Remove from top", showcase_admin_project_path(:id => p.project_id, :content_id => p.id)
                          -else  
                            =link_to "Add to top", showcase_admin_project_path(:id => p.project_id, :content_id => p.id)
                          %li
                            = link_to "Delete", content_destroy_admin_project_path(:id => p.project_id, :content_id => p.id, :page => params[:page]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:05:53.373

**rails 中的form_tag**和**form_for**助手你可以用 form_for 做什么同样可以使用 form_tag 完成。

您可以将单个表单（form_tag）与两个不同的提交按钮一起使用。提交表单后，您可以使用**params[:commit]**在控制器操作中检查单击了哪个提交按钮。基于此，您可以执行您的任务。

例如：

```
 <%= submit_tag 'Delete All', :name => 'delete_all' %>
 <%= submit_tag 'your other submit', :name => 'other_submit' %>

 if params[:delete_all] #in controller
   #do something
 elsif params[:other_submit]
   #do something
 end

 or

# if you don't want to give name attribute
 commit_action = params[:commit].gsub(' ', '_').downcase
 if commit_action.eql? 'delete_all'
   #do something
 elsif commit_action.eql? 'other_commit'
   #do something
 end 
```

**当您希望表单知道模型属性时使用**form_for 。**除此之外，它是一个正常的形式。form_tag 是一种基本形式。**

# java - Hibernate 多对多级联删除

> ID：14585836
> 
> 赞同：27
> 
> 时间：2013-01-29T14:59:06.290
> 
> 标签：java, sql, hibernate, annotations, many-to-many

我的数据库中有 3 个表`Students`：`Courses`和`Students_Courses`

学生可以有多个课程，课程可以有多个学生。`Students`和之间存在多对多的关系`Courses`。

我的项目和课程添加了 3 个案例`Courses`。

*   (a) 当我添加一个用户时，它会保存得很好，
*   (b) 当我为学生添加课程时，它会在`User_Courses`- 再次创建预期行为中创建新行。
*   (c) 当我试图删除学生时，它正在删除 and 中的相应记录`Students`，`Students_Courses`但它也在删除`Courses`不需要的记录。即使我在课程中没有任何用户，我也希望课程在那里。

下面是我的表格和注释类代码。

```
 CREATE TABLE `Students` (
    `StudentID` INT(11) NOT NULL AUTO_INCREMENT,
    `StudentName` VARCHAR(50) NOT NULL 
    PRIMARY KEY (`StudentID`)
)

CREATE TABLE `Courses` (
    `CourseID` INT(11) NOT NULL AUTO_INCREMENT,
    `CourseName` VARCHAR(50) NOT NULL 
    PRIMARY KEY (`CourseID`)
)

CREATE TABLE `Student_Courses` (
    `StudentId` INT(10) NOT NULL DEFAULT '0',
    `CourseID` INT(10) NOT NULL DEFAULT '0',
    PRIMARY KEY (`StudentId`, `CourseID`),
    INDEX `FK__courses` (`CourseID`),
    INDEX `StudentId` (`StudentId`),
    CONSTRAINT `FK__courses` FOREIGN KEY (`CourseID`) REFERENCES `courses` (`CourseID`) ON DELETE NO ACTION,
    CONSTRAINT `FK_students` FOREIGN KEY (`StudentId`) REFERENCES `students` (`StudentId`)
) 
```

这是 Hibernate 生成的 Java 代码：

```
@Entity
@Table(name = "Students")
public class Students implements java.io.Serializable {

    private Integer StudentID;
     private String Students;
    private Set<Courses> Courseses = new HashSet<Courses>(0);

    public Students() {
    }

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "StudentID", unique = true, nullable = false)
    public Integer getStudentID() {
        return this.StudentID;
    }

    public void setStudentID(Integer StudentID) {
        this.StudentID = StudentID;
    }

    @Column(name = "Students", nullable = false, length = 50)
    public String getCampaign() {
        return this.Students;
    }

    public void setCampaign(String Students) {
        this.Students = Students;
    }

 @ManyToMany(cascade = {CascadeType.ALL}, fetch = FetchType.LAZY)
    @JoinTable(name = "Student_Courses", joinColumns = {
        @JoinColumn(name = "StudentId", nullable = false, updatable = false)}, inverseJoinColumns = {
        @JoinColumn(name = "CourseID", nullable = false, updatable = false)})
    public Set<Courses> getCourseses() {
        return this.Courseses;
    }

     public void setCourseses(Set<Courses> Courseses) {
        this.Courseses = Courseses;
    }

    }

    @Entity
@Table(name = "Courses")
public class Courses implements java.io.Serializable {

  private Integer CourseID;
    private String CourseName;
     private Set<Students> Studentses = new HashSet<Students>(0);

    public Courses() {
    }

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "CourseID", unique = true, nullable = false)
    public Integer getCourseID() {
        return this.CourseID;
    }

    public void setCourseID(Integer CourseID) {
        this.CourseID = CourseID;
    }

     @Column(name = "CourseName", nullable = false, length = 100)
    public String getCourseName() {
        return this.CourseName;
    }

    public void setCourseName(String CourseName) {
        this.CourseName = CourseName;
    }

    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "Courseses")
    public Set<Students> getStudentses() {
        return this.Studentses;
    }

    public void setStudentses(Set<Students> Studentses) {
        this.Studentses = Studentses;
    }

    } 
```

我怎样才能达到我所描述的？我在网上找不到任何合理的文档。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-09-04T07:57:57.390

我在类似的场景中找到了正确的映射（并使用带有广泛案例的 JUnit 对其进行了测试）。我不认为我会发布测试代码，因为适应这个例子需要很长时间。无论如何，关键是：

*   注释不使用`mappedBy`属性，使用连接列
*   列出可能的`CascadeTypes`排除`REMOVE`

在 OP 的例子中

```
@ManyToMany(fetch = FetchType.LAZY,
        cascade =
        {
                CascadeType.DETACH,
                CascadeType.MERGE,
                CascadeType.REFRESH,
                CascadeType.PERSIST
        },
        targetEntity = Course.class)
@JoinTable(name = "XTB_STUDENTS_COURSES",
        inverseJoinColumns = @JoinColumn(name = "COURSE_ID",
                nullable = false,
                updatable = false),
        joinColumns = @JoinColumn(name = "STUDENT_ID",
                nullable = false,
                updatable = false),
        foreignKey = @ForeignKey(ConstraintMode.CONSTRAINT),
        inverseForeignKey = @ForeignKey(ConstraintMode.CONSTRAINT))
private final Set<Course> courses = new HashSet<>();

@ManyToMany(fetch = FetchType.LAZY,
        cascade =
        {
                CascadeType.DETACH,
                CascadeType.MERGE,
                CascadeType.REFRESH,
                CascadeType.PERSIST
        },
        targetEntity = Student.class)
@JoinTable(name = "XTB_STUDENTS_COURSES",
        joinColumns = @JoinColumn(name = "COURSE_ID",
                nullable = false,
                updatable = false),
        inverseJoinColumns = @JoinColumn(name = "STUDENT_ID",
                nullable = false,
                updatable = false),
        foreignKey = @ForeignKey(ConstraintMode.CONSTRAINT),
        inverseForeignKey = @ForeignKey(ConstraintMode.CONSTRAINT))
private final Set<Student> students = new HashSet<>(); 
```

广泛的 JUnit 测试证实：

*   我可以完美地为学生添加课程，反之亦然
*   如果我从学生那里删除课程，该课程不会被删除
*   反之亦然
*   如果我删除一个学生，所有课程都会被分离，但它们仍然（对其他学生）保留在数据库中
*   反之亦然

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-30T13:26:40.313

根据您告诉我的内容，您不想在 Student 的 getCourseses 方法上使用 cascade=CascadeType.ALL。请记住，Hibernate 级联与数据库级联不同。即使您没有任何级联，Hibernate 也会删除 Students_Courses 记录。

考虑 Hibernate 级联的最佳方式是，如果您对实体调用操作并且该操作列在级联列表中，那么将对所有子实体调用该操作。

例如，当您对 Student 调用 delete 时，由于 delete 位于 Courses 的级联列表中，Hibernate 将对该学生引用的每个 Course 实体调用 delete。这就是您看到课程记录消失的原因。

不用担心数据库级联，Hibernate 会自己处理这些。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-08T05:26:11.173

您只需要在*Student类中删除***cascade = CascadeType.ALL就不需要在***Courses*类中进行任何更改

 **并添加以下代码 **cascade = {CascadeType.PERSIST,CascadeType.MERGE,CascadeType.DETACH}** ..

这意味着在删除所有者类记录时，它不会删除非所有者记录。

在此之后，删除时它只会从学生表和学生课程中删除。课程表数据保持不变。**

# android - 如何从 android 应用程序将用户定义的数据类型发送到 asmx Web 服务？

> ID：14585841
> 
> 赞同：1
> 
> 时间：2013-01-29T14:59:25.150
> 
> 标签：android, .net, web-services, asmx

我想从我的 android 应用程序将用户定义的数据类型（一个复杂的数据类型 - 一个对象说）传递给 asmx Web 服务。我尝试过发送原始数据

类型和工作正常。当我尝试按原样发​​送对象时，我收到以下错误。（见下面的链接）

[http://pastie.org/5935960](http://pastie.org/5935960)

这是我用来调用 Web 服务的代码 [http://pastie.org/5936733](http://pastie.org/5936733)

这是我的课程实施[http://pastie.org/5936414](http://pastie.org/5936414)和

另一个类的实现在这里 [http://pastie.org/5936586](http://pastie.org/5936586)。

注意：当我使用原始数据类型发送数据时，一切正常，但是当我使用类对象发送数据时，它会引发异常。

请任何人都可以尝试告诉我可能是什么问题。过去 4 天我一直在处理这个问题，但仍然无法解决。

谢谢 Ganesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:07:01.290

您需要一种序列化/写入数据的方法，以便可以对其进行解析并转换回接收方的对象（asmx Web 服务）。

流行的方法是将 JSON/XML 用于基于文本的解决方案，即人类可读的。还有将数据序列化为二进制的解决方案。我只有使用 Google 协议缓冲区的经验，这对我来说效果很好。

对于 JSON 方法，您基本上在要传输的每个类中都有一个读写方法。这些方法用于将您的对象转换为您想要的格式 (JSON/XML)。

希望有帮助。

# ruby - 使用 ruby 从网站检索文档

> ID：14585843
> 
> 赞同：1
> 
> 时间：2013-01-29T14:59:29.027
> 
> 标签：ruby, rubygems, nokogiri, mechanize, mechanize-ruby

我用 ruby​​ 编写了一个脚本，可以浏览网站并进入表单页面。填写表单页面后，脚本会点击提交按钮，然后会打开一个对话框，询问您将其保存在哪里。我在尝试获取此文件时遇到问题。我已经在网上搜索并找不到任何东西。我将如何检索文档的文件名？

如果有人可以帮助我，我将不胜感激

我的代码如下：

```
browser = Mechanize.new

## CONSTANTS
LOGIN_URL = 'https://business.airtricity.com/ews/welcome.jsp'
HOME_PAGE_URL = 'https://business.airtricity.com/ews/welcome.jsp'
CONSUMPTION_REPORT_URL = 'https://business.airtricity.com/ews/touConsChart.jsp?custid=209495'
LOGIN = ""
PASS = ""
MPRN_GPRN_LCIS = "10000001534"
CONSUMPTION_DATE = "20/01/2013"
END_DATE = "27/01/2013"
DOWNLOAD = "DL"

### Login page
begin
    login_page = browser.get(LOGIN_URL)
rescue Mechanize::ResponseCodeError => exception
    login_page = exception.page
end

puts "+++++++++"
puts login_page.links
puts "+++++++++"

login_form = login_page.forms.first
login_form['userid'] = LOGIN
login_form['password'] = PASS
login_form['_login_form_'] = "yes"
login_form['ipAddress'] = "137.43.154.176"
login_form.submit

## home page
begin
    home_page = browser.get(HOME_PAGE_URL)
rescue Mechanize::ResponseCodeError => exception
    home_page = exception.page
end

puts "----------"
puts home_page.links
puts "----------"

# Consumption Report
begin
    Report_Page = browser.get(CONSUMPTION_REPORT_URL)
rescue Mechanize::ResponseCodeError => exception
    Report_Page = exception.page
end

puts "**********"
puts Report_Page.links
pp Report_Page
puts "**********"

Report_Form = Report_Page.forms.first
Report_Form['entity1'] = MPRN_GPRN_LCIS
Report_Form['start'] = CONSUMPTION_DATE
Report_Form['end'] = END_DATE
Report_Form['charttype'] = DOWNLOAD
Report_Form.submit

## Download Report

begin
    browser.pluggable_parser.csv = Mechanize::Download
    Download_Page = browser.get('https://business.airtricity.com/ews/touConsChart.jsp?custid=209495/meter_read_download_2013-1-20_2013-1-27.csv').save('Hello')
rescue Mechanize::ResponseCodeError => exception
    Download_Page = exception.page
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:40:36.830

[http://mechanize.rubyforge.org/Mechanize.html#method-i-get_file](http://mechanize.rubyforge.org/Mechanize.html#method-i-get_file)
从 url 下载文件，使用 mechanize 非常简单：

```
browser = Mechanize.new
file_url = 'https://raw.github.com/ragsagar/ragsagar.github.com/c5caa502f8dec9d5e3738feb83d86e9f7561bd5e/.html'
downloaded_file = browser.get_file file_url
File.open('new_file.txt', 'w') { |file| file.write downloaded_file } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:28:06.030

由于浏览器代理，我已经看到自动化失败。也许你可以试试

```
browser.user_agent_alias = "Windows Mozilla" 
```

# batch-file - 批处理文件：查找IP并打开程序

> ID：14585845
> 
> 赞同：1
> 
> 时间：2013-01-29T14:59:39.317
> 
> 标签：batch-file, ip-address

好吧，在批处理文件方面我有点菜鸟，所以请温柔:)

我正在编写一个重新启动程序的批处理文件。仅当计算机具有特定 IP 地址时，才应打开其中一个程序。所以我坚持的那条线，必须得到机器的IP（它们被设置为静态IP），如果它有正确的IP，它会打开程序。如果它没有正确的 IP，则继续执行下一个命令。我已经做了很多搜索，但找不到任何我能够开始工作的东西。

所以这一行应该： 1\. 搜索 IP 2\. 如果机器的 IP（为了论证）是 192.168.1.5 那么它应该运行某个程序。3\. 如果 IP 不是 192.168.1.5，它将继续到下一行关闭另一个程序。任何帮助将非常感激！谢谢！

***编辑***

```
setlocal enabledelayedexpansion
taskkill /f /im "program1.exe"
for /f "tokens=2 delims=:" %%a in ('ipconfig ^| find "IPv4 Address"') do (
set ip=%%a
set ip=!ip: =!
goto :BREAK
)
:BREAK
if %ip%==192.168.165.82 (
C:\Folder\Folder\Folder\program1.exe
) else (
taskkill /f /im "Pro gram 2.exe"
)
start "" "C:\Program Files\folder\Pro gram 2.exe"
taskkill /f /im "program3.exe"
if exist "C:\Program Files\folder\program3.exe" start "" "C:\Program Files\folder\program3.exe" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:05:59.607

```
setlocal enabledelayedexpansion
for /f "tokens=2 delims=:" %%a in ('ipconfig ^| find "IPv4 Address"') do (
set ip=%%a
set ip=!ip: =!
goto :BREAK
)
:BREAK
if %ip%==192.168.1.5 (
yourprogram.exe
) else (
taskkill /im anotherprogram.exe /f
) 
```

这将采用第一个适配器 IP，如果您有多个，则需要过滤掉您想要的一个。

通过主机名，您可以使用类似这样的内容

```
for /f "tokens=*" %%a in ('hostname') do if "%%a"=="t2" runprogram.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:21:39.607

请让我们知道您正在运行的 Windows 版本。我在 XP 机器上，如果我这样做`IPCONFIG`，结果是 IP 地址而不是 IPv4。

我知道如果我在 Windows 7 机器上运行相同的命令，我必须按 IPv4 过滤结果，但这在 Windows XP 上不起作用。

话虽如此，如果您在 XP 机器上运行，那么您正在过滤不存在​​的 IPv4，因此您的 IP 变量将永远不会设置为任何值，您的代码也不会运行。

请报告您正在运行的操作系统版本。相应地更改您的过滤器。您可以转到命令行并键入`IPCONFIG`并查看输出的内容。

Fow Windows XP 将 for 循环更改为以下内容：

```
for /f "tokens=2 delims=:" %%a in ('ipconfig ^| find "IP Address"') do... 
```

当我在我的 PC 上执行此操作时，会将所需的 IP 地址设置为变量。

# python - 删除列表中的某些元素

> ID：14585846
> 
> 赞同：-7
> 
> 时间：2013-01-29T14:59:41.000
> 
> 标签：python, list, range

所以我想删除列表中所有 2 的倍数。我该怎么做？但是还有另一个问题，如果我想删除所有 3 的倍数，例如，6 会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:06:04.320

要删除列表中 2 或 3 的所有倍数，您可能需要执行列表推导，在其中输入一个过滤掉整数的条件，该整数可以除以您要查找的任何倍数。如果您发布了代码示例，我可能会为您提供更好的帮助，但是根据您的问题，我建议以下...

```
nums = [0,1,2,3,4,5,6,7,8]

no_mult_of_2 = [ x for x in nums if x%2 != 0 ]
no_mult_of_3 = [ x for x in nums if x%3 != 0 ]

print no_mult_of_2
print no_mult_of_3 
```

印刷....

```
[1, 3, 5, 7]
[1, 2, 4, 5, 7, 8] 
```

如您所见，在这两种情况下都没有 6，因为它是 2 和 3 的倍数。请注意，缺少 0。不确定您是否希望发生这种情况，因此请记住这一点。

另外...您的问题可能会收到很多反对票，因为这里的文化鼓励用户尝试思考问题，而不仅仅是寻求解决方案。起初我自己并不理解这一点，有几次我的问题被否决了。不过不要气馁，我们在这里为您提供帮助，只是尝试向我们展示您在未来提出问题时取得了什么样的进展（示例）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T15:08:05.303

```
a = range(10)
a = filter(lambda n: n%2 != 0, a) 
```

它会给你 [1, 3, 5, 7, 9]

如您所见，不再有六个（任何六个的倍数都会发生同样的情况）

那么，如果你删除三的倍数

```
a = filter(lambda n: n%3 != 0, a) 
```

a 将是 [1, 2, 4, 5, 7, 8]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:04:04.690

您可以这样做（如果按索引）：

```
>>> l=range(100)
>>> l[:]=[e for i,e in enumerate(l) if i%2] 
```

或者如果它是列表元素值的倍数：

```
>>> l=range(100)
>>> l[:]=[e for e in l if e%2] 
```

使用`e`（或`i`）`% 3`表示 3 的倍数。由于 6 是 2 或 3 的倍数，因此无论哪种情况都将删除它。

# php - Json_decode 返回截断的数组

> ID：14585848
> 
> 赞同：0
> 
> 时间：2013-01-29T14:59:47.940
> 
> 标签：php, json

我正在 json_encoding 一个多维数组，它会转储如下内容：

```
$array = 

Array
(
    [a] = Array
        (
            [0] = Array
                (
                    [x0] = some-string
                    [y0] = some-string
                )
            [1] = Array
                (
                    [x1] = some-string
                    [y1] = some-string
                )
        )
    [b] = Array
        (
            [b1] = Array
                (
                    [0] = Array
                        (
                            ...
                        )
                )
            [b2] = Array
                (
                    [0] = Array
                        (
                            ...
                        )
                )
            ...
     )
) 
```

但是，如果我执行以下操作并转储结果：

```
$json = json_encode( $array );
json_decode( $json, true ); 
```

仅返回数组“a”：

```
Array
(
    [a] = Array
        (
            [0] = Array
                (
                    [x0] = some-string
                    [y0] = some-string
                )
            [1] = Array
                (
                    [x1] = some-string
                    [y1] = some-string
                )
            ...
        )
    )
) 
```

我的第一个想法是导致解析错误的无效字符，但 json_decode 应该只从解析错误返回 null，而不是部分解析的数组。

附加信息：原始数组最多可嵌套 9 层，编码后为约 52,000 个字符串。

更新：我在 PHP 5.2.11 上看到了这个问题，所以 json_last_error() 不可用。我们有这个代码在许多不同的服务器上运行，这是这个问题的唯一情况，所以我猜它是一个基于服务器的问题，而不是基于代码的问题，不管它有什么价值。

有任何想法吗？

# sql-server - 将大量数据粘贴到 Excel

> ID：14585849
> 
> 赞同：1
> 
> 时间：2013-01-29T14:59:58.533
> 
> 标签：sql-server, excel, export-to-excel, export-to-csv

我有一个使用 Management Studio 在 SQL Server 中运行的查询。结果输出到网格，然后我将其复制并粘贴到以 .csv 格式保存的 Excel 工作表中。我以前从来没有遇到过任何问题，但是这个特定的查询包含一个包含大量 HTML（几千个字符）的列。如果我尝试将整个查询输出粘贴到 excel 中，它将无法处理该列并且工作表无法使用。

我必须粘贴其他所有内容，然后单独复制包含 HTML 的每一行，然后双击 Excel 中的目标单元格以进入“编辑模式”。有没有办法解决？

我试过：输出到文本，但无论我在 SSMS 中将最大列值设置为什么，它都会截断 HTML 列。我试过输出到文件，但它给我的唯一文件选择是 Crystal Reports。有没有办法将 Excel 全局置于编辑模式，以便我可以一次粘贴整个内容，或者告诉 SSMS（Express 版本）输出到 .csv 文件？

ETA：我尝试​​右键单击网格结果并保存为 .csv，但它仍然会截断 HTML 列。即使我将“结果到文本”选项设置为 8K 字符。和非 XML 数据在结果到网格选项中设置为超过 64K。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:08:00.187

正如@Remy 指出的那样，您是否尝试过使用`OPENROWSET`：

```
insert into OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
'Excel 8.0;Database=C:\template.xls;', 
'SELECT * FROM [SheetName$]') 
select * from myTable 
```

- 编辑

确保您启用了 Ad Hoc 分布式查询：

```
sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO
sp_configure 'Ad Hoc Distributed Queries', 1;
GO
RECONFIGURE;
GO 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T00:03:12.693

右键单击 SSMS 中的数据库，选择“任务”，然后选择“导出数据...”。将 SQLServer 设置为源，将 Excel 文件设置为目标。在下一步中，选择“编写查询以指定...”并粘贴您的查询。如果您需要自动执行此操作，您可以使用 SSIS。如果您没有 SSMS 或者您不想每次都通过导出向导，您可以使用免费工具。[从www.r-tag.com](http://www.r-tag.com)下载 R-Tag Report Manager ，将您的查询添加为 SQL Ad-hoc 报告并将其导出到 Excel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:07:16.977

在 SSMS 2012（不确定早期版本）中，您可以右键单击结果并选择`Save Results As...`然后选择`CSV`作为输出文件。

# java - Android:解析自定义论坛标签

> ID：14585852
> 
> 赞同：1
> 
> 时间：2013-01-29T15:00:32.833
> 
> 标签：java, android, html, json, parsing

我想解析一些包含自定义论坛标签的字符串，例如：

```
[url=https://play.google.com/store/apps/details?id=xxx]----sent from my Sony Ericsson LT28h,Android 4.2.1[/url] 
```

并在文本视图中显示此标记字符串作为可点击链接[----从我的索尼爱立信 LT28h，Android 4.2.1 发送](http://www.google.com)

我尝试了 Html.fromhtml 并使用了自定义标签处理程序，但似乎只支持自定义标签以“<”开头并结束“>”有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:21:52.547

一种方法是为这些编写自定义处理程序，检查下面的示例代码，它可能会给您一个提示（注意此代码将返回您需要创建的 [url]...[/url] 标记的内部值[url=....] 标签的更多迭代使用相同的逻辑来获取 url 的值）：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class MyHandler {

    public static void main(String[] args) {
        Pattern p = Pattern.compile(
                "\[url.*\](.*)\[/url\]",
                Pattern.DOTALL
            );

        Matcher matcher = p.matcher(
                "[url=https://play.google.com/store/apps/details?id=xxx]----sent from my Sony Ericsson LT28h,Android 4.2.1[/url]"
            );

        if(matcher.matches()){
            System.out.println(matcher.group(1));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:05:53.033

当然，您不能指望通用方法知道论坛提出的所有可能的自定义标签。所以你需要手动完成。

我想你最好的选择是设置一种方法，用他们的“官方”HTML标签替换自定义标签，如果他们有的话。您可以为此使用 String.replace() 。

# html - 我可以制作 HTML5 可更新数据库以在本地搜索吗？

> ID：14585855
> 
> 赞同：1
> 
> 时间：2013-01-29T15:00:35.723
> 
> 标签：html, node.js, search, indexeddb, web-sql

我正在制作一个非常注重网站内索引搜索的网站。问题在于查询，因为生产服务器非常便宜。我认为从 node.js 而不是 PHP 开始开发可能是一个好主意。但问题远在前面。

我想将站点数据库的**部分**（姓名、姓氏、标签、URL）推送到客户端浏览器并在本地进行搜索，每次用户在数据库中添加新条目时推送实时更新，然后重新或多或少在 24 小时后下载所有内容。这样，服务器就不会过多地将结果放在客户端中，而只会推送新条目或数据库。

我可以这样做吗？我需要什么？我考虑过使用 IndexedDB 并为 WebSQL 浏览器添加一个 polyfill，但我不知道这些技术是否可以做到我今天要求的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:39:58.407

IndexedDB 是完成这项工作的完美工具，假设兼容性适用于您的客户群。虽然 WebSQL 将是一个令人羡慕的替代方案，但要知道，出于所有意图和目的，该规范已经“死”并且不会进一步开发。

IDB 是一个“索引”JavaScript 对象存储，因此您可以在对象属性上添加索引并在它们之间添加“游标”，而不会因尝试使用`localStorage`. 例如，假设您有一个客户列表。您可以添加客户对象`{ 'name': 'blah', 'surname': 'McBlaherson', 'tags': [ 1, 2, 3] }`，添加一些索引并使用 IDB，例如，按姓氏返回所有客户。

您所描述的最大挑战是处理客户端-服务器模型的“同步”方面。假设用户在浏览器和手机上打开网站。如何合并数据存储？这听起来很简单，但我向你保证它不是（这就是为什么`git`其他版本控制系统如此神奇）。

# parameters - RenderStrategy.ONE_PASS_RENDER 是在 Wicket 应用程序中摆脱 ?1 等页面版本参数的合理方法吗？

> ID：14585858
> 
> 赞同：4
> 
> 时间：2013-01-29T15:00:39.090
> 
> 标签：parameters, wicket, stateful

我们已经使用 Wicket 1.3.7 几年了，目前正在将我们的项目升级到 wicket 6.x

我对`?1`附加到每个 URL 的页面版本参数（例如）以及如何摆脱它们进行了大量研究。（不幸的是，在官方文档中找不到有关此的详细信息。）在这样做的同时，我阅读了很多声明（来自 Wicket 开发人员**和**用户，例如

> 需要跟踪页面版本，否则不可能有状态

和

> 您需要使您的页面无状态才能摆脱它

还建议使用自定义实现`AbstractComponentMapper`，覆盖`encodePageComponentInfo`不附加参数。这具有破坏已安装页面的状态的明显缺点。（例如，请参阅[此 SO 答案](https://stackoverflow.com/a/8667136/1006823)）

昨天我偶然发现了[RenderStrategy.ONE_PASS_RENDER](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/settings/IRequestCycleSettings.RenderStrategy.html#ONE_PASS_RENDER)。

我试了一下，做了一些测试后，我的印象是这是“恢复旧检票口方式”的设置：页面版本参数消失了，但我的页面是有状态的。

好吧，也有一个缺点。如果必须自己处理双重提交问题，但我可以忍受。

问题：还有其他我（还）不知道的缺点吗？有什么惊喜可以期待吗？

这似乎是一个完美的解决方案，我只是想知道为什么有这么多关于如何摆脱这些参数的讨论，即使是 wicket 开发人员，**也不**建议这样做......

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T00:12:44.717

我们经历了类似的升级路径，升级后我的第一反应是“哇，这些都是一些讨厌的 URL……”。

最初，我们还切换到一次性渲染以获得更好的 URL。但在深入研究之后，“?id”似乎不仅仅解决了双重问题。

带有 Ajax 组件的页面可能是有状态的：当用户与页面交互时，您可以添加组件、删除其他组件等。使用 URL 参数中的页面 ID，您可以返回与离开页面相同的状态，如果您刷新页面 (F5) 或导航到另一个页面，然后按返回按钮。

如果切换到单遍渲染，您将失去该功能，因为浏览器无法识别页面存储中的哪个页面是目标页面，并且通常以页面对象的另一个实例结束。

这在“列表结果”页面（显示带有 Ajax 分页和过滤的“项目”列表/表格的页面）中尤其明显。在这种一次性渲染的页面上，即使您多次单击“下一页”，您也经常会丢失搜索条件或返回到结果的开头。

我们最终使用了“标准”渲染机制（不是一次性渲染）。URL 看起来不太好，但我们觉得利大于弊（而且 href 看起来不错，它只是浏览器的 URL 栏）。

另一个问题是我们网站的“可抓取性”。为了不让 302 或“url?id”影响 Google 索引，我们在 Wicket 应用程序的 init 方法中添加了以下代码，以强制 Google Bot 一次性渲染：

```
 setPageRendererProvider(new IPageRendererProvider() {
        @Override
        public PageRenderer get(RenderPageRequestHandler handler) {
            return new WebPageRenderer(handler) {
                @Override
                protected boolean isOnePassRender() {
                    // To avoid 302s with Google Bot and have good SEO.
                    String userAgent = ((HttpServletRequest) RequestCycle.get().getRequest().getContainerRequest()).getHeader("User-Agent");
                    if (StringUtils.contains(userAgent, "Googlebot")) {
                        return true;
                    } else {
                        return super.isOnePassRender();
                    }
                }
            };
        }
    }); 
```

# php - 从直接打开的安全视图 (html) 文件

> ID：14585862
> 
> 赞同：0
> 
> 时间：2013-01-29T15:00:49.827
> 
> 标签：php, kohana

在 kohana 中，此代码可以保护`controller`直接打开的示例文件，对吗？

`<?php defined('SYSPATH') OR die('No Direct Script Access'); ?>`

此代码还将为安全`html`文件编写吗？也就是说，如果我们不需要那个人直接打开`APPPATH/views/home.php`，我们必须在这个文件中写入：

```
 <?php defined('SYSPATH') OR die('No Direct Script Access'); ?>
 <!DOCTYPE html>
 <html>
   ......
   ...... 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:15:08.847

在 Kohana 中，对应用程序/视图的访问在 htaccess 中受到以下限制：

```
# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L] 
```

因此，您无需通过将该代码放在顶部来限制对视图的访问。

# django - Django sweetpie 将 DecimalField 序列化为 json 字符串而不是数字

> ID：14585863
> 
> 赞同：3
> 
> 时间：2013-01-29T15:00:51.403
> 
> 标签：django, json, tastypie

我有一个`django`应用程序`tastypie`。我的应用程序中的一个模型有一个`DecimalField`. 当我从 API 收到`JSON`格式的响应时，所有小数字段都显示`strings`为`numbers`：

例如我得到：

```
objects: [
    {
        id: "1",
        my_decimal_field: "84.54"
    } 
```

代替

```
objects: [
    {
        id: "1"
        my_decimal_field: 84.54
    } 
```

这也发生在 id 字段中。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-19T23:37:59.400

在 JavaScript 中，JSON 解码为[双精度浮点格式](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)，这会导致精度损失。`Decimal`对象被编码`string`以保持精度。

如果要编码为 JSON 数字格式，可以使用`FloatField`.

# mysql - 在 MySQL 中更新分隔字符串值

> ID：14585867
> 
> 赞同：1
> 
> 时间：2013-01-29T15:01:05.323
> 
> 标签：mysql

假设我有一列值为`'1|2|3|4|5'`. 这些值是数组的字符串表示形式，我想删除字符串中的单个值（按整数），结果为`'1|2|4|5'`. 鉴于要删除的整数可能在字符串中的任何位置，MySQL 中最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:24:05.063

你可以使用这样的东西：

```
UPDATE yourtable
SET col = TRIM(BOTH '|' FROM REPLACE(
            REPLACE(
              CONCAT('|',REPLACE(col, '|', '||'), '|'),
              '|3|', '')
            , '||', '|')
          ) 
```

在这里，我将每个加倍`|`，`||`然后`|`在开头添加一个，在结尾添加一个。这样，每个元素`|`在开始和`|`结束时都有自己的元素。

现在我们可以安全地`|3|`用空字符串替换。

我们现在需要将 double 转换`||`回`|`，并修剪字符串以最终删除`|`开头的那个和结尾的那个。

看到它在[这里](http://sqlfiddle.com/#!2/ff0ea0/1)工作。

如果您确定元素 3 不能多次出现，则可以跳过加倍`|`到`||`，并且必须替换`|3|`为`|`。其余的都是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:04:22.007

```
update table set col=replace ( col, '3','') 
```

这将对列进行区分大小写的搜索。如果它是一个巨大的表，则在此列上有一个索引。结果将相当快。

# css - 显示一个 像悬停的线

> ID：14585868
> 
> 赞同：1
> 
> 时间：2013-01-29T15:01:18.360
> 
> 标签：css, hover, html-lists, line

我有一个简单的 CSS 列表。我希望第一`<li>`行显示为悬停。我怎样才能做到这一点？我曾尝试过这样的事情：`<li class="#menu a:hover"><a href="#">Option 1</a></li>`但不幸的是不起作用。

**感谢您的时间！**

代码是：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>A simple menu</title>
<style type="text/css">
#menu a:hover{
    background-color:   yellow;
}
</style>
</head>
 <body>
  <div id="menu">
   <ul>
    <li class="#menu a:hover"><a href="#">Option 1</a></li>
    <li><a href="#">Option 2</a></li>
    <li><a href="#">Option 3</a></li>
    <li><a href="#">Option 4</a></li>
   <ul>
  </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:03:34.783

我猜你想要第一个链接的黄色背景，所以这样做

```
#menu ul li:nth-child(1) a {
    background-color:   yellow;
} 
```

或者简单地给出一个类，例如`.current`

```
.current {
   background-color:   yellow;
}

<div id="menu">
  <ul>
    <li><a href="#" class="current">Option 1</a></li>
    <li><a href="#">Option 2</a></li>
    <li><a href="#">Option 3</a></li>
    <li><a href="#">Option 4</a></li>
  <ul>
</div> 
```

如果您打算突出显示当前页面而不是答案是**否定**的，则无法使用 CSS 来实现，您将需要 JavaScript/jQuery 或 PHP 等服务器端编程

# ruby-on-rails - 在 JSON 输出中隐藏 password_digest 错误消息

> ID：14585871
> 
> 赞同：1
> 
> 时间：2013-01-29T15:01:29.297
> 
> 标签：ruby-on-rails, json, validation, rails-api

我正在使用 rails-api gem 构建一个简单的 JSON API。

**模型/用户.rb：**

```
class User < ActiveRecord::Base
  has_secure_password
  attr_accessible :email, :password, :password_confirmation

  validates :email, presence: true, uniqueness: { case_sensitive: false }, format: { with: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i }
  validates :password, presence: { on: :create }, length: { minimum: 6 }
end 
```

当我尝试在没有密码的情况下注册时，这是我得到的 JSON 输出：

```
{
  "errors": {
      "password_digest": [
          "can't be blank"
      ],
      "password": [
          "can't be blank",
          "is too short (minimum is 6 characters)"
      ]
   }
} 
```

是否可以隐藏密码摘要的错误消息？我在控制器中返回带有 respond_with 的 @user 对象。

我尝试了以下但没有运气（它只是重复错误“不能为空白”）：

```
validates :password_digest, presence: false 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T12:04:34.263

@freemanoid：我试过你的代码，但没有用。但它给了我一些提示。谢谢！这对我有用：

**模型/用户.rb**

```
after_validation { self.errors.messages.delete(:password_digest) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:47:28.423

您可以在用户模型的 json 处理程序中手动删除此消息。喜欢：

```
class User < ActiveRecord::Base
  def as_json(options = {})
    self.errors.messages.delete('password_digest')
    super(options)
  end
end 
```

# javascript - Ascensor.js 不工作？

> ID：14585872
> 
> 赞同：0
> 
> 时间：2013-01-29T15:01:31.170
> 
> 标签：javascript, jquery, html

我必须为我的客户制作一个单页网站，而 Ascensor.js 插件似乎可以完成我需要它做的所有事情。但是，我终其一生都无法让它发挥作用。

[http://kirkas.ch/ascensor/#/Home](http://kirkas.ch/ascensor/#/Home)

最初我试图让它在 WordPress 主题中工作，但我放弃了，并试图让它完全像网站上的例子一样工作，没有乐趣。

这是代码；

```
<!DOCTYPE html>
<html>
<head>

<script type="text/javascript" src="./js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="./js/jquery.ascensor.js"></script>  
<script type="text/javascript" src="./js/jquery.scrollTo-min.js"></script>

</head>

<body>

<script>

$('#ascensorBuilding').ascensor({
AscensorName:'ascensor',
ChildType:'section',
AscensorFloorName:'Home | Implementation | HTML',
Time:1000,
WindowsOn:1,
Direction:'chocolate',
AscensorMap:'2|1 & 2|2 & 3|2',
Easing:'easeInOutQuad',
KeyNavigation:true,
Queued:false,

});

</script>

<div id="ascensorBuilding">
    <section>
        <article class="container_12">
            <h1>Home</h1>
        </article>
    </section>

    <section>
        <article class="container_12">
            <h1>About</h1>
        </article>
    </section>

    <section>
        <article class="container_12">
            <h1>Contact</h1>
        </article>
    </section>
</div>
</body>
</html> 
```

这确实应该起作用，因为我完全按照示例进行了操作。我已经尝试过使用和不使用文章元素上的类（我认为插件应该创建这些）。有没有人有这个插件的经验可以给我一些帮助？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T07:36:12.227

我将在这里留下一个我正在使用 ascensor 做的简单工作。随意获取您想要的所有代码。请记住将“overflow:auto”设置为css中的“section”标签，并将“overflow:hidden”设置为您用于建筑物的div，在我的例子中是#house。

[http://www.thegrowth.eu/mari/index.php](http://www.thegrowth.eu/mari/index.php)

我正在使用的插件版本不适用于当前的 jQuery 版本，除非您破解代码。坚持 1.8.3 版，你可以从我的网站上获取它。此外，您只需要 jQuery-UI 即可使用 ascensor 的一些缓动功能等。

并原谅我的英语：p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:08:57.553

首先你需要用 jQuery.ready 包装你的代码

```
$(function(){
    $('#ascensorBuilding').ascensor({
        AscensorName:'ascensor',
        ChildType:'section',
        AscensorFloorName:'Home | Implementation | HTML',
        Time:1000,
        WindowsOn:1,
        Direction:'chocolate',
        AscensorMap:'2|1 & 2|2 & 3|2',
        Easing:'easeInOutQuad',
        KeyNavigation:true,
        Queued:false,
    });
}); 
```

您缺少[迁移插件](http://code.jquery.com/jquery-migrate-1.0.0.js)和缓[动插件](http://gsgd.co.uk/sandbox/jquery/easing/)。

演示：[小提琴](http://jsfiddle.net/arunpjohny/ufDgu/1/)

# jquery - jQuery Mobile 应用程序当 iframe 插入后退按钮不起作用

> ID：14585875
> 
> 赞同：3
> 
> 时间：2013-01-29T15:01:39.680
> 
> 标签：jquery, jquery-mobile, video, iframe

当我为在我的应用程序中播放的视频放置 iframe 时，jQuery UI 标题上的后退按钮不再起作用。

当我从代码中取出 iframe 时，它​​会再次正常运行。想知道是否有人知道这里的修复是打开 iframe 的页面的代码。

```
<div data-role="page" id="about" data-add-back-btn="true" data-back-btn-text="Back" >

<div data-role="header" >
    <h1>About</h1>
</div><!-- /header -->

<div data-role="content">

    <div id ="aboutsection">
        <div id="about-logo"><img src="images/small-logo.png" /></div>

        <div id="video-thumb">
        <a href="#popupVideo" data-rel="popup" data-position-to="window"><img src="images/video-thumb.png"/></a>        
        <div data-role="popup" id="popupVideo" data-tolerance="15,15" class="ui-content">
                <iframe src="
                http://player.vimeo.com/video/54553882?portrait=0" seamless></iframe>
            </div>
        </div><!--/video-thumb-->
        <p>&#169; Be Active North-East</p>
    </div><!--/aboutsection-->
</div><!-- /content -->

<div data-role="footer" data-position="fixed">
    <h4>Be Active North East </h4>
</div><!-- /footer --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T22:20:30.460

我有类似的问题，并且用这个js得到了很好的结果；

```
function goBack(){
    var url = $.mobile.urlHistory.getPrev().url;
    if (url === null || url == "") url = $.mobile.firstPage.attr("data-url");
    $.mobile.changePage(url, "slide", true, true, true);
} 
```

还有这个后退按钮

```
<a href="" data-role="button" data-inline="true" data-icon="back" onclick="goBack()">Back</a> 
```

# joomla - Joomla 的 Pubsubhubbub 插件

> ID：14585879
> 
> 赞同：3
> 
> 时间：2013-01-29T15:01:57.190
> 
> 标签：joomla, websub

有谁知道 Joomla 的 Pubsubhubbub 插件是否存在？例如，我为 Wordpress 和 Drupal 找到了以下插件：

*   [http://wordpress.org/extend/plugins/pubsubhubbub/](http://wordpress.org/extend/plugins/pubsubhubbub/)
*   [http://drupal.org/project/push_hub](http://drupal.org/project/push_hub)

我在询问之前进行了搜索:)，但我找不到任何东西。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:07:17.140

我不知道……尽管我为 PubSubHubbub 社区做出了重大贡献。另一方面，创建一个确实应该很容易。有几个“Pinging”模块，例如[Easy Ping](http://extensions.joomla.org/extensions/site-management/seo-a-metadata/site-verification/8488)或[Blog Ping](http://extensions.joomla.org/extensions/authoring-a-content/blog/7702)（我没有测试过），应该很容易将 PubSubHubbub ping 到集线器。

# google-maps - Google Maps API v3 多个信息框在点击时未打开

> ID：14585882
> 
> 赞同：0
> 
> 时间：2013-01-29T15:02:07.533
> 
> 标签：google-maps, infowindow

有人可以解释为什么我的谷歌地图信息窗口只在左下角的标记处打开吗？请参阅此处的小提琴[http://jsfiddle.net/Vj3nw/7/](http://jsfiddle.net/Vj3nw/7/)

当我单击*任何*标记时，只会打开左下角的标记。我想要点击打开的标记。

我相信问题是由于下面的循环引起的，这个问题似乎也有同样的问题[Setting onclick to use current value of variable in loop](https://stackoverflow.com/questions/6048561/setting-onclick-to-use-current-value-of-variable-in-loop)

“您遇到的问题是 javascript 不使用块作用域。相反，所有变量都有其包含函数的生命周期。因此，在所有 onclick 函数中只捕获了一个 a，它们都看到它的最终值。”

我只是不能把那个解决方案翻译成我的。

非常感谢。

```
for (var i = 0; i < 4; i++) {
    var marker = new google.maps.Marker({
        position: flightPlanCoordinates[i],
        icon: Symbol,
        map: map
    });

    infowindow = new google.maps.InfoWindow();
    infowindow.setContent("hello");

    google.maps.event.addListener(marker, 'click', function () {
        infowindow.open(map, marker);
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:58:31.043

生成标记并将侦听器添加到自己的函数中，从循环中调用，就像更新的[小提琴](http://jsfiddle.net/Vj3nw/10/)一样。

```
function create_marker(i,flightPlanCoordinates,Symbol,map){
        var marker = new google.maps.Marker({
            position: flightPlanCoordinates[i],
            icon: Symbol,
            map: map
        });

        infowindow = new google.maps.InfoWindow();
        infowindow.setContent("hello" + i);

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map,marker);
        });
    } 
```

# javascript - 是否可以循环结束代码？

> ID：14585884
> 
> 赞同：0
> 
> 时间：2013-01-29T15:02:08.517
> 
> 标签：javascript, jquery

我在这个页面上有 25 个元素：

```
<div id="test1"></div>
<div id="test2"></div>
<div id="test3"></div>
<div id="test4"></div>
<div id="test5"></div> 
```

我也有在 div 中更新 html 的代码：

```
setInterval(function() {

  $.post("./main/", {
    record:1,
    opt:'get_res'
  }, function(data){
    $test1=data;
  });

}, 15000); 
```

要更改所有块中的 html，我需要运行此代码 5 次，例如：

```
setInterval(function() {

  $.post("./main/", {
    record:1,
    opt:'get_res'
  }, function(data){
    $test1=data;
  });

}, 15000);

setInterval(function() {

  $.post("./main/", {
    record:2,
    opt:'get_res'
  }, function(data){
    $test2=data;
  });

}, 15000);

.....
.....

setInterval(function() {

  $.post("./main/", {
    record:3,
    opt:'get_res'
  }, function(data){
    $test3=data;
  });

}, 15000); 
```

例如对于 25 个元素的 div 需要编写此代码 25 次 - 这将是非常大的代码。

请告诉我是否在循环中执行代码，以免重复多次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:07:12.430

你应该看看[http://api.jquery.com/each/](http://api.jquery.com/each/)函数：

**更新**：基本上你可以使用任何选择器来找到你的元素

假设页面上有一个简单的无序列表：

```
<ul>
    <li>foo</li>
    <li>bar</li>
    <li class="findMe">foo2</li>
    <li class="findMe">bar2</li>
</ul> 
```

您可以选择列表项并遍历它们：

```
$( ".findMe" ).each(function( index ) {
  //do something ... post or anything else
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T15:06:16.783

只需以某种方式迭代元素，使用索引或从 ID 中提取数字，然后存储在数组或对象中，只要最适合：

```
var test = {};
setInterval(function() {
    $('div[id^="test"]').each(function(i, ele) {
        (function(idx) {
            $.post("./main/", {
                record: idx,
                opt:'get_res'
            }, function(data){
                test[idx] = data;
            });
        })(i+1);
    });
}, 15000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:07:14.003

您可以做的是您可以将测试作为数组并使用此代码

```
 for (i = 1 , i<=25 , i++)
  $.post("./main/", {
  record:i,
  opt:'get_res'
  }, function(data){
  $test[i]=data;
  });

  }, 15000); 
```

# gwt - GWT UI 上的动态按钮数

> ID：14585885
> 
> 赞同：0
> 
> 时间：2013-01-29T15:02:12.867
> 
> 标签：gwt

我有一个 MVP 类型的应用程序，其中我将有一个包含一个或多个按钮的视图。按钮的数量直到运行时才知道，并且每次呈现页面时可能会有所不同。除了仅显示 1 - n 个传递给视图的按钮的简单循环之外，解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:30:29.690

我的建议：在创建时添加所有按钮并使用 CSS 动态隐藏或显示它们。我认为这将产生更少的 DOM 操作并且仍然可以正常工作，而且它可能会产生更简单的代码。我目前使用 SmartGwt 这样做。

# javascript - 我应该在哪里放置我的自定义 javascript 对象？

> ID：14585894
> 
> 赞同：0
> 
> 时间：2013-01-29T15:02:27.877
> 
> 标签：javascript, jquery, html

假设我有以下脚本

```
<script type="text/javascript">
  $(function($, d) { 
    var custom = {
      settings: { news: $('div.news') },
      init: function() { this.settings.news.html('new'); }
    }
  }(jQuery, $(document)))
</script> 
```

您可以假设该对象具有更多功能，但我的问题是我应该将它放在哪里？我知道两种方法：

1.  将脚本放在`<head>`标签中。这样，我必须确保仅在 document.ready 之后调用对象，因此设置 jQuery 对象 ( `$('div.news')`) 不会为空。

2.  在我看来，第二种方式在语义上不太正确，但我可以放弃 document.ready 功能：我可以“物理地”将脚本放在 html 之后。

您更喜欢哪种解决方案，为什么？预先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:06:59.830

任何不能帮助呈现页面布局的脚本都应该放在正文的底部，最好作为对脚本文件的引用（而不是脚本本身）。这允许 CSS + HTML 以可视方式呈现页面，然后将 JavaScript（或 jQuery，在您的情况下）应用于呈现的元素。

它不会提高页面本身的性能，但它确实加快了视觉渲染，似乎为最终用户提供了更快的体验。

[有关更多详细信息，请参见此处。](http://developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:06:31.340

我将这样的代码放在结束 body 标记之前，然后运行 ​​init()：

```
var custom: {
    settings: { news: null },
    init: function() {
        this.settings.news = $('#news');
        this.settings.news.html('new'); 
    }
}

custom.init(); 
```

类似的东西。

**编辑**以反映安东尼的评论。

# symfony - 如何在 Symfony2 的表单生成器中检查用户角色？

> ID：14585897
> 
> 赞同：12
> 
> 时间：2013-01-29T15:02:33.417
> 
> 标签：symfony, formbuilder, role

好的，我正在尝试检查用户是否具有特定角色，我这样做[了](https://stackoverflow.com/questions/11998761/how-can-i-access-the-user-role-in-form-builder-class-in-symfony2)

但是，当我这样做时：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('nombre',null,array('label' => 'Usuario'))
        ->add('email')
        ->add('password', 'repeated', array(
            'type' => 'password',
            'invalid_message' => 'Los campos deben coincidir',
            'first_name' => 'password',
            'second_name' => 'confirmar password',
            'options' => array('required' => false)
            ))

        ->add('cliente', 'entity', array(
        'class' => 'ClientesBundle:Cliente',
        'empty_value' => 'Company',            
        'required'    => false,
        'empty_data'  => null)
    **)**
      $user = $this->securityContext->getToken()->getUser();
      **if ($user->getRol() == 'ROLE_SUPER_ADMIN'){**
        ->add('rol') 
        **}**
    ;

} 
```

也试过这个：

```
 **if ($this->securityContext->getToken()->getUser()->getRol() === 'ROLE_SUPER_ADMIN'){**
            ->add('rol') 
            **}** 
```

粗体线（带有 ** 的线）有一条小红线，表示错误，如果... 我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T15:13:00.713

从控制器您必须将用户对象传递给表单构建器

```
$form = $this->createForm(
    new YourType(), 
    $data, 
    array('user' => $this->getUser())
); 
```

然后在表单生成器中，您可以从以下位置获取它`$options`：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $user = $options['user']
} 
```

不要忘记`setDefaultOptions()`使用`user`索引进行扩展：

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        ...
        'user' => null
    ));
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-10-05T23:16:12.073

如果将表单类型声明为服务，则可以在类中注入令牌存储。

所以你`services.yml`像这样声明服务：

```
my_form:
    class: AppBundle\Services\MyFormType
    public: true
    arguments:  ['@security.token_storage'] 
```

和这样的表单类：

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Security\Core\Authentication\Token\Storage\TokenStorage;

class MyFormType extends AbstractType
{
    protected $tokenStorage;

    public function __construct(TokenStorage $tokenStorage)
    {
        $this->tokenStorage = $tokenStorage;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $user = $this->tokenStorage->getToken()->getUser();
        // Use the user object to build the form
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-12-31T02:19:18.620

我知道这是一个老问题，但我想提出一个更好的替代方法来检查表单类型中的角色。

### 问题

使用 TokenInterface 和 User 对象的问题是它不检查继承。例如，考虑以下内容`security.yml`：

```
security:
    role_hierarchy:
        ROLE_ADMIN: ROLE_USER
        ROLE_SUPER_ADMIN: ROLE_ADMIN 
```

如果您的用户已添加`ROLE_SUPER_ADMIN`但未添加到他们的角色，如果您使用`ROLE_ADMIN`上述解决方案将**失败**`$user->hasRole('ROLE_ADMIN')`，因为用户没有明确`ROLE_ADMIN`分配给他们的用户并且`hasRole()`没有检查层次结构。

* * *

### 解决方案

使用`AuthorizationCheckerInterface`代替来访问该`isGranted()`功能。

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Security\Core\Authorization\AuthorizationCheckerInterface;

class MyFormType extends AbstractType {

    protected $auth;

    public function __construct(AuthorizationCheckerInterface $auth) {
        $this->auth = $auth;
    }

    public function buildForm(FormBuilderInterface $builder, array $options) {

        // ...

        if($this->auth->isGranted('ROLE_ADMIN')) {
            // Do the thing here
        }
    }
} 
```

这将尊重`security.yml`. 如果我们使用与上面相同的 yml 文件，如果用户已分配但未分配到他们的个人资料，`$auth->isGranted('ROLE_ADMIN')`则将返回*true 。*`ROLE_SUPER_ADMIN``ROLE_ADMIN`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-08T10:03:49.457

我成功地完成了这件事而没有传递到 symfony 3.4 中的服务。我知道我的方法不是最“专业”的，但它很简单而且很有效。

首先，从您的控制器以您的 formType 发送用户

```
$form = $this->get('form.factory')->create(addPlanExpectedType::class, $business,
            array('user' => $this->getUser())
        ); 
```

其次，恢复角色，并验证“ROLE_AMIN”是否在这个 $roles 数组中

```
public function buildForm(FormBuilderInterface $builder, array $options)
    {

        $businessId = $options['data']->getId();

        $user = $options['user'];
        $roles = $user->getRoles();

        $boolAdmin = in_array('ROLE_ADMIN', $roles); 
```

# javascript - javascript函数重载操作细节

> ID：14585899
> 
> 赞同：0
> 
> 时间：2013-01-29T15:02:39.687
> 
> 标签：javascript

我阅读了关于函数重载的 Jhon resig 帖子：

[http://ejohn.org/blog/javascript-method-overloading/](http://ejohn.org/blog/javascript-method-overloading/)

功能：

```
function Users(){
  addMethod(this, "find", function(){
    // Find all users...
  });
  addMethod(this, "find", function(name){
    // Find a user by name
  });
  addMethod(this, "find", function(first, last){
    // Find a user by first and last name
  });
}

// addMethod - By John Resig (MIT Licensed)
function addMethod(object, name, fn){
    var old = object[ name ];
    object[ name ] = function(){
        if ( fn.length == arguments.length )
            return fn.apply( this, arguments );
        else if ( typeof old == 'function' )
            return old.apply( this, arguments );
    };
} 
```

我理解这个概念。我无法理解的一件事是为什么每次`else if`执行语句时`return old.apply(this, arguments)`参数长度都会减一。

我使用警报来跟踪该功能，这是我无法理解的主要内容。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:12:21.287

它有效地导致一系列`old`函数被一个接一个地调用，直到`arguments.length`找到一个其数量匹配的函数。因此，在第一次调用 时`addMethod`，您最终将`old`成为`undefined`。

第二次调用`addMethod`，`old`最终将成为第一次调用期间分配的函数。

如果你运行这个：

```
var users = new Users();
users.find("James"); 
```

它将查找`users`带有标识符的属性`find`。它会找到一个，并且该函数的元数将为 2（因为`addMethod`构造函数中的最终调用创建了一个需要 2 个参数的方法）。因此，它不是调用它，而是调用`old`，这将是需要 1 个参数的方法的版本。我们的调用只有一个参数，并且匹配，所以这就是被执行的方法。

如果你运行这个：

```
users.find(); 
```

它会完全按照我上面描述的那样做，但是当它调用时`old`，arity 将不匹配，它会`old`再次调用。在这种情况下， 的值`old`将是第一次调用后的值`addMethod`（这是对通常称为闭包的事物的演示 -`old`在父函数返回后旧函数仍然可用）。

# android - 单击 ListView 内的 ImageButton

> ID：14585900
> 
> 赞同：1
> 
> 时间：2013-01-29T15:02:40.463
> 
> 标签：android

我有一个列表视图。每行都是一个自定义布局，有一些文本视图和 2 个图像按钮。每个教程/主题/文档/等。我试过了，对我没有任何效果，即使你测试教程本身也很完美。因此，我填充 ListView，而不是通过单击行 x 上的图像按钮来至少向我展示敬酒或做一些事情，就像它应该做的那样。

下面是代码（MainActivity.java）。

```
package ro.pca.pizzarecipes;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.Map;
import com.google.ads.AdRequest;
import com.google.ads.AdView;
import android.os.Bundle;
import android.app.Activity;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class MainActivity extends Activity{
    protected AdView adView;
    public ListView lv;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        AdRequest re = new AdRequest();
        re.setGender(AdRequest.Gender.FEMALE);
        adView = (AdView)findViewById(R.id.ad);
        adView.setVisibility(AdView.VISIBLE);
        adView.loadAd(re);

        ArrayList<HashMap<String, String>> map = new ArrayList<HashMap<String, String>>();
        HashMap mapItem1 = new HashMap();
        mapItem1.put("Nume","Neapolitan style (alla Napoletana)");
        mapItem1.put("Timp","30");
        mapItem1.put("Calorii","");
        mapItem1.put("Ingrediente","1 1/2 cups warm water...");
        mapItem1.put("Preparare"," 1\. In the bowl...");
        mapItem1.put("Altele","Makes 8 servings.");
        map.add(mapItem1);

        HashMap mapItem2 = new HashMap();
        mapItem2.put("Nume","Pan fried Hawaiian");
        mapItem2.put("Timp","20");
        mapItem2.put("Calorii","");
        mapItem2.put("Ingrediente","Olive oil...");
        mapItem2.put("Preparare"," Preheat...");
        mapItem2.put("Altele","Makes 2 pizzas.");
        map.add(mapItem2);

        SimpleAdapter adapter = null;   
        adapter = new SimpleAdapter(this, map, R.layout.customlistlayout,
                new String[]{"Nume", "Timp", "Calorii", "Ingrediente", "Preparare", "Altele"}, 
                new int[]{R.id.textView1, R.id.textView2, R.id.textView4, R.id.textView7, R.id.textView9, R.id.textView10}); 

        Collections.sort(map, new Comparator<Map<String, String>>() {
            @Override
            public int compare(Map<String, String> o1, Map<String, String> o2) {
                String name1 = o1.get("Nume");
                String name2 = o2.get("Nume");
                if (name1 == null) return -1;
                return name1.compareTo(name2);
            }
        });

        setContentView(R.layout.activity_main);
        lv = (ListView)findViewById(R.id.listView1);
        lv.setChoiceMode(lv.CHOICE_MODE_MULTIPLE);
        lv.setAdapter(adapter);   

    }

} 
```

主布局（activity_main.xml）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:orientation="vertical" >

        <com.google.ads.AdView
            android:id="@+id/ad"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            ads:adSize="SMART_BANNER"
            ads:adUnitId="a150d19cc5b81d8"
            ads:loadAdOnCreate="true" />

    </LinearLayout>

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/linearLayout1"   
        android:text="my fridge" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:divider="#C60202"
        android:dividerHeight="3dip"
        android:layout_below="@+id/button1" >
    </ListView>

</RelativeLayout> 
```

行布局 (customlistlayout.xml)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="italic" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView2"
        android:layout_alignBottom="@+id/textView2"
        android:layout_toLeftOf="@+id/textView2"
        android:text="time (min):"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView2"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="italic" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView4"
        android:layout_alignBottom="@+id/textView4"
        android:layout_toLeftOf="@+id/textView4"
        android:text="calories:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView5"
        android:text="ingredients"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold|italic" />

    <TextView
        android:id="@+id/textView7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView6"
        android:layout_marginLeft="18dp"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="14sp" />

    <TextView
        android:id="@+id/textView8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView7"
        android:text="preparation"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold|italic" />

    <TextView
        android:id="@+id/textView9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView7"
        android:layout_below="@+id/textView8"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="14sp" />

    <ImageButton
        android:id="@+id/imageButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/imageButton1"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:src="@drawable/ic_launcher"
        android:tag="2" />

    <TextView
        android:id="@+id/textView11"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView9"
        android:text="other info:"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold|italic" />

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView10"
        android:layout_marginTop="20dp"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:src="@drawable/googletranslate"
        android:tag="1" />

    <TextView
        android:id="@+id/textView10"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView9"
        android:layout_below="@+id/textView11"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="15sp"
        android:textStyle="italic" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="5dp"
        android:background="@layout/gradient"
        android:text="nume"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="30sp"
        android:textStyle="bold" />

</RelativeLayout> 
```

和一点渐变布局（gradient.xml）

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
  <gradient
      android:startColor="#A0C2F2"      
      android:endColor="#D0E6F2"
      android:angle="135" />
</shape> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:06:07.190

您需要扩展列表适配器类，然后在 getView 方法中为每个 ImageButton 设置 OnClickListener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:12:38.980

尝试这个，

而不是`ImageButton`使用`TextView`. 我在`ListView` `Button`点击时遇到了同样的问题。它会工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:12:57.400

我完全同意@Dan，而是使用**BaseAdapter**并在其上**getView**为图像按钮设置侦听器

```
//example
class Example extends BaseAdapter{
     Context context;

        public CardAdapt(Context context) {
            this.context = context;

        }

        public int getCount() {
            return //size of the list u have with the button
        }

        public Card getItem(int position) {
            return //position of the button
        }

        public long getItemId(int position) {
            return position;
        }

        // create a new ImageView for each item referenced by the Adapter
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
            ViewHolder viewHolder;
            Card card;

            if (convertView == null) {
                 viewHolder                 = new ViewHolder();
                 convertView                = inflater.inflate(R.layout.//ur layout, null);

                 viewHolder.imgbtn (ImageButton) convertView.findViewById(R.id.//id for the imagebutton);
             convertView.setTag(viewHolder);
            }  

            viewHolder   = (ViewHolder) convertView.getTag();

            return convertView;
        }
        private class ViewHolder{

            ImageButton imgbtn;

        }
//the do the onclicklistner for the button and do what u want 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-11T13:57:55.427

据此[_](https://stackoverflow.com/questions/11428303/cant-click-on-listview-row-with-imagebutton)

应该通过将此属性添加到行布局（customlistlayout.xml）来解决问题

```
...
<RelativeLayout
    ...
    android:descendantFocusability="blocksDescendants" > 
```

# java - Blackberry java，使用同步从非UI线程打开对话框

> ID：14585901
> 
> 赞同：2
> 
> 时间：2013-01-29T15:02:42.227
> 
> 标签：java, multithreading, blackberry

我想从一个单独的线程打开一个对话框，但是在使用这种`synchronized`方式时，我得到了一个错误。

如果我使用该方法`invokeAndWait`一切正常，但是我不明白为什么我不能使用`synchronized`.

这是我在屏幕上调用的代码：

```
public void Login() {

        new HttpRequestDispatcher("http://www.google.com", "GET", this) {
            public void onSuccess(byte[] baos, String contentType) {
                synchronized(UiApplication.getEventLock()){
                    Dialog.alert("Cooooooool....");
                }
            }
            public void onFail(String message){
                synchronized(UiApplication.getEventLock()){
                    Dialog.alert(message);
                }
            }
        }.start();
    } 
```

这是 HttpRequestDispatcherThread：

```
public abstract class HttpRequestDispatcher extends Thread {

    String url;
    String method;
    Screen scr;

    public HttpRequestDispatcher(String url, String method, Screen scr) {
        this.url = url;
        this.method = method;
        this.scr = scr;
    }

    public abstract void onFail(String message);
    public abstract void onSuccess(byte[] baos, String contentType);
    public void beforeSend() {}
    public void onComplete() {}

    public void run() {

        beforeSend();

        try {

            HttpConnection connection = (HttpConnection) Connector.open(url);
            connection.setRequestMethod(method);

            int responseCode = connection.getResponseCode();
            if (responseCode != HttpConnection.HTTP_OK) {
                onFail(connection.getResponseMessage());
                connection.close();
                return;
            }

            String contentType = connection.getHeaderField("Content-type");
            int contentLength = (int) connection.getLength();
            if (contentLength < 0)
                contentLength = 10000;

            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            InputStream responseData = connection.openInputStream();
            byte[] buffer = new byte[contentLength];
            int bytesRead = responseData.read(buffer);

            while (bytesRead > 0) {
                baos.write(buffer, 0, bytesRead);
                bytesRead = responseData.read(buffer);
            }

            baos.close();
            connection.close();

            onComplete();
            onSuccess(baos.toByteArray(), contentType);

        } catch (Exception e) {
        }
    }
} 
```

我在模拟器中收到此错误：“JVM Error 104 Uncought: ArrayIndexOutOfBoundsException”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:30:27.010

找到了答案：

“不能从主事件线程以外的线程打开对话框”

`Synchronized`在当前线程中执行一条语句，但持有事件锁，相反，`invokeAndWait`将语句发送到事件队列，稍后在主事件线程上执行。

这就是为什么我的代码无法使用`synchronized`

这有帮助：[https ://stackoverflow.com/a/6515542/1680787](https://stackoverflow.com/a/6515542/1680787)

@Nate，您对我的 catch 块、+1 和我的坏事是绝对正确的，只是黑莓的新手。

# opengl - 使用 OpenGL 在 HSV 颜色空间而不是 RGB 中渲染点

> ID：14585904
> 
> 赞同：1
> 
> 时间：2013-01-29T15:03:08.673
> 
> 标签：opengl, colors, shader, rgb, hsv

我目前正在尝试使用 HSV 颜色空间来渲染我的观点。为此，我在片段着色器中使用了一个函数，生成正确的转换向量。现在我的问题是如何告诉 OpenGL 它应该将此向量解释为 HSV 颜色而不是 RGB 颜色。

我的片段着色器如下所示：

```
 const GLchar *fragment_shader2 =
 "#version 330\n"
 ""
 "/* Output Variables */"
 "out vec4 out_color;"
 ""
 "/* Function Prototypes */"
 "vec3 convertRGBtoHSV(vec3 rgbColorVector);"
 ""
 "void main()"
 "{"
 "  vec3 rgbColor = vec3(1.0, 0.0, 0.55);"
 "  "
 "  out_color = vec4(convertRGBtoHSV(rgbColor), 1.0);"
 "}"
 ""
 "vec3 convertRGBtoHSV(vec3 rgbColorVector)"
 "{"
 "  vec3 hsvColorVector = vec3(0.0, 0.0, 0.0);"
 "  float maxValue = max(rgbColorVector.r, max(rgbColorVector.g, rgbColorVector.b));"
 "  float minValue = min(rgbColorVector.r, min(rgbColorVector.g, rgbColorVector.b));"
 "  "
 "  /* Set Value */"
 "  hsvColorVector[2] = maxValue;"
 "  "
 "  /* Set Saturation */"
 "  if(maxValue != 0.0)"
 "  {"
 "      hsvColorVector[1] = (maxValue - minValue) / maxValue;"
 "  }"
 "  "
 "  /* Set Hue */"
 "  float hue = 0.0;"
 "  if(maxValue == rgbColorVector.r)"
 "  {"
 "      hue = (0.0 + (rgbColorVector.g - rgbColorVector.b) / (maxValue - minValue)) * 60.0;"
 "  }"
 "  else if(maxValue == rgbColorVector.g)"
 "  {"
 "      hue = (2.0 + (rgbColorVector.b - rgbColorVector.r) / (maxValue - minValue)) * 60.0;"
 "  }"
 "  else if(maxValue == rgbColorVector.b)"
 "  {"
 "      hue = (4.0 + (rgbColorVector.r - rgbColorVector.g) / (maxValue - minValue)) * 60.0;"
 "  }"
 "  "
 "  if(hue < 0.0)"
 "  {"
 "      hue = hue + 360.0;"
 "  }"
 "  "
 "  hsvColorVector[0] = hue / 360.0;"
 "  "
 "  /* Return converted color vector */"
 "  return hsvColorVector;"
 "}"
 "\0"; 
```

在此示例中，输出为 vec3(0.908, 1.0, 1.0)，显示为白色而不是粉红色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:05:45.477

OpenGL 无法使用 HSV 颜色空间显示颜色。您只能使用 RGBA 格式（或 SRGBA 等一些变体）

但是在内部使用 HSV 颜色空间并最终产生 RGBA 值是没有问题的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T12:43:28.960

实际上，您应该编写 HSVtoRGB 转换函数。您将 HSV 颜色传递给此函数。它将 HSV 颜色转换为 RGB 颜色，然后绘制为 RGB。换句话说，您将在内部使用 HSV 颜色空间，并且仅在绘图时转换为 RGB。

# android - 从我的使用通用图像加载器的应用程序中共享图像

> ID：14585905
> 
> 赞同：2
> 
> 时间：2013-01-29T15:03:12.013
> 
> 标签：android

在我的应用程序中，我使用 Universal Image Loader 查看我的图像，它们的链接保存为字符串数组，我尝试修改 ImagePager 类以添加图像的共享按钮，但对我不起作用？？我在 Item_image_pager 的布局中添加了共享按钮，并编写了这段代码

```
share.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            /*
            Intent share = new Intent(Intent.ACTION_SEND);
            share.setType("image/jpeg");

            share.putExtra(Intent.EXTRA_STREAM,
              Uri.parse("images[position]"));

            startActivity(Intent.createChooser(share, "Share Image"));*/
        }
    }); 
```

但是出现了以下错误！！

致命异常：主要 java.lang.RuntimeException：无法启动活动 java.lang.NullPointerException

我在 ImagePagerActivity 通用图像加载器代码[通用图像加载器中添加我的共享按钮](https://github.com/nostra13/Android-Universal-Image-Loader/tree/master/sample/src/com/nostra13/example/universalimageloader)

# multithreading - NLog 什么时候捕获 ThreadID？

> ID：14585906
> 
> 赞同：1
> 
> 时间：2013-01-29T15:03:14.180
> 
> 标签：multithreading, asynchronous, system.reactive, nlog

如果我在 nlog.config 中打开了异步日志记录，那么`ThreadID`捕获的内容在哪里？

背景：我正在使用 .NET、Rx 和 TPL 数据流（又名 TDP）开始一个新项目。它将大量使用异步操作和后台工作队列。

目标：在我的日志记录中，我想捕获`ManagedThreadId`正在执行工作的位置以及并行完成工作的时间（在 Rx 中很容易出错，其中默认调度程序不是 ThreadPool）。如果我在 nlog.config 中打开了异步日志记录，那么 ThreadID 是在哪里捕获的？

关注点：我在`LogEntry`NLog 的核心类中看不到 ThreadID。例如，它不会发送到[cbley/NLog.SignalR](https://github.com/cbley/NLog.SignalR)中的浏览器。如果我在 nlog.config 中打开了异步日志记录，那么`ThreadID`捕获的内容在哪里？如果在呈现日志条目（在 NLog 后台线程中）之前没有捕获它，那么它对`ThreadId`我来说毫无用处，我需要找到一个更合适的日志库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:31:29.787

NLog 正确地捕获了 threadid。

NLog 使用`[ThreadAgnostic]`on`LayoutRender`派生类，这些类可以在调用线程之外使用/呈现。因为`ThreadIdLayoutRender`没有那个属性，所以它不能延迟到异步转换之后。

# jsf - 使用 Primefaces 将复选框设置为只读

> ID：14585909
> 
> 赞同：9
> 
> 时间：2013-01-29T15:03:37.187
> 
> 标签：jsf, primefaces

我目前正在使用 a `<p:selectBooleanCheckbox />`，我想知道是否有办法让它只读。

基本上，我希望您能够打开一个复选框的子列表，并且如果选中任何其他复选框，原始复选框只会显示复选标记。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-12T17:51:39.263

```
<p:selectBooleanCheckbox value="#{formBean.value1}" disabled="true"/> 
```

这将禁用该元素。如果需要，我曾经通过 primeface 蒙皮更改 CSS。

将属性与管理 bean 中的一些布尔变量绑定。在更改布尔变量的事件[根据要求]完成时刷新/重新加载组件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-12T12:13:26.823

环境

```
disabled="true" 
```

解决了这个复选框不能再编辑的问题，但是它很苍白，并且它的外观和感觉不符合页面样式。我使用以下技巧使它像一个普通的（未禁用）组件：

```
$(document).ready(function(){
  $('.ui-chkbox div').removeClass('ui-state-disabled');
}); 
```

这会从页面上的所有 primefaces 复选框中删除“禁用”样式。您可以轻松地将其调整为您需要的组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-22T09:51:48.037

这个对我有用，它的外观和感觉还可以：

```
<p:selectBooleanCheckbox value="#{beanc.value}" onchange="return false;"/> 
```

# wordpress - 发布时wordpress自定义帖子类型错误

> ID：14585912
> 
> 赞同：2
> 
> 时间：2013-01-29T15:03:41.360
> 
> 标签：wordpress, custom-post-type

我在 Wordpress 中有 2 种自定义帖子类型：“主页”和“故事”，并且我安装了一个插件“从网站发布”。当我尝试使用此插件从首页发布到“故事”时，我遇到了一些错误。

您也可以在这里尝试：[http](http://www.teenbetween.relationshipsireland.com/your-family-life/accepting-the-decision/) ://www.teenbetween.relationshipsireland.com/your-family-life/accepting-the-decision/ - 您会在下面的图片中找到一个链接，使用它。

文章已发布，但我收到错误消息。

```
Notice: Trying to get property of non-object in teenbetween.relationshipsireland.com/wp-content/themes/teenbetween/includes/homepage.php on line 79 
Notice: Undefined index: link_homepage in teenbetween.relationshipsireland.com/wp-content/themes/teenbetween/includes/homepage.php on line 79 
Notice: Trying to get property of non-object in teenbetween.relationshipsireland.com/wp-content/themes/teenbetween/includes/story.php on line 45 
Notice: Trying to get property of non-object in teenbetween.relationshipsireland.com/wp-includes/capabilities.php on line 1069 
Notice: Trying to get property of non-object in teenbetween.relationshipsireland.com/wp-includes/capabilities.php on line 1073 
Notice: Trying to get property of non-object in teenbetween.relationshipsireland.com/wp-includes/capabilities.php on line 1075 
Notice: Trying to get property of non-object in teenbetween.relationshipsireland.com/wp-includes/capabilities.php on line 1076 
Notice: Trying to get property of non-object in teenbetween.relationshipsireland.com/wp-includes/capabilities.php on line 1079 
Notice: Trying to get property of non-object in teenbetween.relationshipsireland.com/wp-content/themes/teenbetween/includes/story.php on line 46 {"image":"none","error":"","success":"Post added, please wait to return to the previous page.","post":1139} 
```

这是story.php 45：

```
if ( !current_user_can( 'edit_post', $post->ID )){
    return $post->ID;
} 
```

和 homepage.php 79：

```
add_action('save_post', 'save_details');
function save_details(){ 
global $post;   
update_post_meta($post->ID, "link_homepage", $_POST["link_homepage"]);  // homepage.php 79
} 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:15:34.230

该对象在函数`$post`期间不可用。`save_details`调用函数时，将 传入`$post_id`作为第一个参数。您还需要将授权代码`story.php`移入`save_details`函数中。

```
function save_details($post_id){ 
    update_post_meta($post_id, "link_homepage", $_POST["link_homepage"]);  // homepage.php 79
} 
```

请参阅此参考：[http ://codex.wordpress.org/Plugin_API/Action_Reference/save_post](http://codex.wordpress.org/Plugin_API/Action_Reference/save_post)

如果这不起作用，您可以尝试[http://wordpress.org/extend/plugins/advanced-custom-fields/](http://wordpress.org/extend/plugins/advanced-custom-fields/)

# css - CSS 类链接

> ID：14585920
> 
> 赞同：1
> 
> 时间：2013-01-29T15:04:21.557
> 
> 标签：css, class, hyperlink

我正在一个网站上工作，我想为不同的链接集制作不同的样式。我已经阅读了教程，但我仍然无法让我的代码正常工作。所以这里是代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<style type="text/css">
a.test: link {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #C00;
}
a.test: hover {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #6F0;
 }
a.test: active {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #90F;
}
a.test: visited {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #FF0;
}

</style>
</head>

<body>
Emily

<p>sdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjlsdkf
sdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjlsdkf
sdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjlsdkf
sdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjlsdkf
<p><span class="test"><a href="http://www.ehow.com/how_2080242_style-link-css.html">rose</a> 

  <a href="http://www.ehow.com/how_2080242_style-link-css.html" class="test"> daisy</a> 

  <a href="http://www.ehow.com/how_2080242_style-link-css.html" class="test">tulip</a> 

  <a href="http://www.ehow.com/how_2080242_style-link-css.html" class="test"> cactus</a>     </span>
<p>ldkfjsldkfjlsdkfsdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjs    ldkfjsldkfjlsdkfsdlkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsldkfjsld

</body>
</html> 
```

根据我的阅读，我知道我需要将一个类合并到这样的链接样式中：a.test:link

并将样式合并到链接中，您可以给它一个像这样的类，
仙人掌

而且我无法弄清楚为什么这不起作用。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T15:05:53.703

尝试省略规则中的空格：

```
a.test:link {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #C00;
}
a.test:hover {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #6F0;
 }
a.test:active {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #90F;
}
a.test:visited {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #FF0;
} 
```

我不希望这个伪类在它们的名字中允许一个空格。

顺便说一句，您可以将 CSS 简化为：

```
a.test {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
}
a.test:link {
    color: #C00;
}
a.test:hover {
    color: #6F0;
 }
a.test:active {
    color: #90F;
}
a.test:visited {
    color: #FF0;
} 
```

# entity-framework - 与实体框架的派生关联

> ID：14585933
> 
> 赞同：1
> 
> 时间：2013-01-29T15:04:54.993
> 
> 标签：entity-framework

本周我刚刚开始使用实体框架，并且正在为一些概念而苦苦挣扎。

现在，我有一个数据库结构，我正在努力将其转移到实体框架。

我首先从模型开始，并且有这个：

```
------------------        -----------------------
|   Order_Item   |        | Order_FetchableItem |
 ----------------          ---------------------
|   order_id     |        |     order_id        |
|   item_id      |        |     item_id         |
------------------        |     fetch_url       |
                          ----------------------- 
```

这个想法是订单包含项目，并且这种关系在 order_item 表中传达。但是，订单中的某些（不是全部）商品具有 URL，因此也需要存储此属性。

我无法在 EF 中使用它，因为 EF 将 Order_Item 检测为关系，我无法从中派生。这样做的最佳选择是什么？

我已经考虑将 fetch_url 字段移动到 Order_Item 表，但由于它是一个宽列，我不希望 order_item 表中有很多 NULL 值。

谢谢，请原谅上面的格式！

# matlab - 具有连接点的 3D 散点图 Matlab

> ID：14585934
> 
> 赞同：0
> 
> 时间：2013-01-29T15:04:59.570
> 
> 标签：matlab, plot

我想在 Matlab 中连接具有相同 Z 值的 3d 散点图中的点。

```
num=1e2;
x=rand(num,1);
y=rand(num,1);
z=zeros(num,1);
z(randsample(num,.25*num),:)=1;
scatter3(x,y,z);hold on;scatter3(x1,y1,z1);hold on;
%connect dots with same Z value, so there should be horizontal line between points in the same Z plane 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:08:10.780

当你说“连接点”时，我不确定你在想什么，但这里有一个方向：

```
figure, hold on
for u = unique(z(:))'
    plot3(x(z == u), y(z == u), z(z == u))
end
view(-37.5, 30) 
```

或者，也许您可​​以修改数据并改用该[`contour3`](http://www.mathworks.com/help/matlab/ref/contour3.html)命令。

# sql - 为什么我没有得到不同的结果？

> ID：14585937
> 
> 赞同：1
> 
> 时间：2013-01-29T15:05:07.867
> 
> 标签：sql, sql-server, join, distinct

下面是我编写的 SQL 代码，但我意识到事情正在被重复，这是不可接受的。我对 SQL 不是很熟悉，并且一直遇到问题，非常感谢任何帮助。我也编辑了这个，所以我知道这里有额外的表格，但这会减慢性能吗？

```
select distinct
ru.registername AS [1]
,lc.lifecyclename AS [2]
,s.statename AS [3]
,t.timername AS [4]
,t.lastexecuted AS [5]
from hsi.wfsrvrxlcstate wxs with (nolock)
join hsi.registeredusers ru with (nolock) on wxs.registernum = ru.registernum
join hsi.lcstate s with (nolock) on wxs.statenum = s.statenum
join hsi.lcxstate lxs with (nolock) on s.statenum = lxs.statenum
join hsi.lifecycle lc with (nolock) on lxs.lcnum = lc.lcnum
join hsi.lcstatextimer sxt on s.statenum = sxt.statenum
join hsi.lctimer t on sxt.timernum = t.timernum
join hsi.tasklist tl with (nolock) on t.actionnum = tl.tasklistnum
join hsi.tasklistxtask tlxa with (nolock) on tl.tasklistnum = tlxa.tasklistnum
join hsi.action a with (nolock) on tlxa.tasknum = a.actionnum
order by  registername, lastexecuted desc, lifecyclename 
```

提前感谢所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:11:36.633

如果不查看所有有问题的表格数据，就不可能回答您的问题:'(

...但是话虽如此，如果我被拒绝屈服于 DISTINCT 语句的复杂连接所阻碍，我通常会采用以下技巧。

**在select**语句中显示所有表涉及的字段。在你的情况下：

```
select distinct wxs.*, ru.*, s.*.....etc
from ... as per your original query
join ... as per your original query 
```

执行查询并监控所有 table_name.id 列。重复行加上原始表很容易发现，因为它的主键将显示两次。您可能需要按所有 PK 排序以使其更容易被发现。

这将为您提供查找丢失的 FK 连接所需的线索。

祝你好运！

# django - 使用 pip 设置 django-nonrel

> ID：14585938
> 
> 赞同：0
> 
> 时间：2013-01-29T15:05:09.493
> 
> 标签：django, virtualenv, pip, django-nonrel

我正在尝试以正确的方式安装 django-nonrel -**并且能够重现该过程**。

我已经使用 pip 安装了 django-nonrel - 如下：

```
pip install git+https://github.com/django-nonrel/django-nonrel.git
pip install git+https://github.com/django-nonrel/django-dbindexer.git
pip install git+https://github.com/django-nonrel/django-permission-backend-nonrel
pip install hg+https://bitbucket.org/wkornewald/djangoappengine
pip install hg+https://bitbucket.org/wkornewald/djangotoolbox
pip install hg+https://bitbucket.org/twanschik/django-autoload
pip install hg+https://bitbucket.org/twanschik/nonrel-search/src 
```

安装后，我得到了这个 req.txt 文件（pip freeze > req.txt）：

```
Django==1.3.1
django-autoload==0.01
django-dbindexer==0.3
djangoappengine==1.0
djangotoolbox==0.9.2
nonrel-search==0.1
permission-backend-nonrel==0.1
wsgiref==0.1.2 
```

但我不能使用我的 req.txt 文件来获得相同的东西。如果我卸载一个包（例如 django-autoload）并尝试使用需求文件再次获取它

```
(gae-first)bentzy@lama:~/.virtualenvs/gae-first$ pip uninstall django-autoload
Uninstalling django-autoload:
...
Successfully uninstalled django-autoload
(gae-first)bentzy@lama:~/.virtualenvs/gae-first$ pip install -r req.txt 
Requirement already satisfied (use --upgrade to upgrade): Django==1.3.1       in ./lib/python2.7/site-packages (from -r req.txt (line 1))
Downloading/unpacking django-autoload==0.01 (from -r req.txt (line 2))
Could not find any downloads that satisfy the requirement django-autoload==0.01 (from -r req.txt (line 2))
No distributions at all found for django-autoload==0.01 (from -r req.txt (line 2))
Storing complete log in /home/bentzy/.pip/pip.log 
```

为什么这些包不在 pip 存储库中？

使用 pip 安装它们仍然有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T23:14:25.113

问题是您的需求文件没有足够的信息。

例如，当您请求它安装时，您`pip`将要做`django-autoload`的是查看该包的 PyPI（并在找到 PyPI 条目后废弃一些页面）。

如果您想要一个要求文件以与您在安装时相同的方式下载这些软件包，请执行相同操作：告诉 pip 在哪里可以找到软件包。

创建一个需求文件，如：

```
git+https://github.com/django-nonrel/django-nonrel.git
git+https://github.com/django-nonrel/django-dbindexer.git
git+https://github.com/django-nonrel/django-permission-backend-nonrel
hg+https://bitbucket.org/wkornewald/djangoappengine
hg+https://bitbucket.org/wkornewald/djangotoolbox
hg+https://bitbucket.org/twanschik/django-autoload
hg+https://bitbucket.org/twanschik/nonrel-search/src 
```

或者，如果您想从特定标签或提交安装，请执行以下操作：

```
git+https://github.com/django-nonrel/django-nonrel.git@1.3.1#egg=Django 
```

[在http://www.pip-installer.org/en/latest/logic.html#requirements-file-format](http://www.pip-installer.org/en/latest/logic.html#requirements-file-format)阅读有关需求文件的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:30:29.860

如果您使用的是 GAE，则使用 pip 没有任何意义，因为您使用的所有包都需要位于您实际的 GAE 项目文件夹中。安装在您的系统或 virtualenv 环境中的软件包不会上传到 GAE 生产服务器。

# css - 悬停链接以使用 css 更改 *PAGE* 背景颜色

> ID：14585941
> 
> 赞同：1
> 
> 时间：2013-01-29T15:05:14.390
> 
> 标签：css, background, hover

使用css将鼠标悬停在页面上单独div中的不同链接上时，是否可以更改整个页面背景？我对JS不是很熟悉，所以如果JS是强制性的，就需要解释一下。感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:18:47.257

单独使用 CSS，不可能影响悬停元素的祖先的样式。您的问题需要 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:09:49.467

[div背景颜色，改变悬停](https://stackoverflow.com/questions/676324/div-background-color-to-change-onhover)

这可能会对您有所帮助。

使用 javascript，您可以执行以下操作：

```
<div onmouseover="document.body.backgroundColor='yourColor';"> </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:24:55.870

嗯，这是有可能的。您实际上不会更改页面的背景，但效果会相似。

[看看代码](http://jsfiddle.net/s3Dx3/1/)。

```
 body {
        background: lightblue;
    }
    a:hover:before {
        content: '';
        position: absolute;
        display: block;
        top: 0; bottom: 0; left: 0; right: 0;
        z-index: -1;
    }
    li:nth-of-type(1) a:hover:before {
        background-color: blue;
    }
    li:nth-of-type(2) a:hover:before {
        background-color: red;
    }
    li:nth-of-type(3) a:hover:before {
        background-color: green;
    } 
```

基本上，当光标悬停在链接上时，您只需要创建一个伪元素。该伪元素的上、下、左、右的绝对位置等于 0，将占据整个屏幕，并给它一个 z-index -1 将确保它低于页面上的所有其他元素。当然，您在相应的伪元素中声明背景颜色或图像。

不过有一个缺点。它不太灵活。例如，如果任何祖先元素的位置不是静态（默认），这将有点难以实现——如果不是不可能的话——因为您必须调整顶部、底部、左侧和右侧属性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-11T09:56:54.460

在鼠标悬停中丢失`style`：

```
class="test" onmouseover="document.body.style.backgroundColor='red';" 
```

# ruby-on-rails-3 - 拉取/显示 Public 文件夹中的 MHTML 文件列表，并将它们作为 IFrame 嵌入到我的 Rails 应用程序视图中

> ID：14585948
> 
> 赞同：0
> 
> 时间：2013-01-29T15:05:47.390
> 
> 标签：ruby-on-rails-3, iframe, directory-structure, mhtml

我有一个使用**SQL Server Reporting Services**生成报告并以 MHTML 格式导出的客户端。客户只想将预定义目录结构中的 MHTML 推送到我的 Rails public/reports 文件夹。

Rails 有什么方法可以“吸收”目录结构，递归地创建文件列表，生成无序列表，然后为每个 MHTML 文件动态创建路由？我知道 MHTML 文件可以嵌入 iframe（虽然浏览器支持有限，但这对我来说不是问题）

预定义的目录结构是 Public/Reports/Dashboard/Exceptions/

Dashboard 将包含 1 个 MHTML 文件，异常（将是 Dashboard 的子导航或子项）将包含未定义的数量。

布局模板将是一种包装器。

任何有 Rails 经验的人都知道达到预期结果的最佳方法吗？

任何帮助将不胜感激。我使用的是 Rails 3.0.20（它没有资产管道），它不会托管在 Heroku 上（我知道无写权限）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:25:05.783

（抱歉，我对 MHTML 文件不是很熟悉，所以我假设这些只是浏览器可以解释的静态文件。）

Rails 中没有什么特别提供您所指的行为。Rails 只是一个帮助提供动态响应的框架，您想要的功能与文件系统相关，Rails 主要将其抽象出来。

我能想到几个选择。

1.  自己滚

    Ruby 具有文件和目录实用程序，您可以使用它们来读取公共目录的内容并呈现您想要的响应类型。我将从这里开始：

    [http://www.ruby-doc.org/core-1.9.3/Dir.html](http://www.ruby-doc.org/core-1.9.3/Dir.html)

    并使用 ruby​​ 的目录 globbing 来获取文件列表。

2.  使用[机架](http://rack.github.com/)

    Rails 建立在 Rack 之上，Rack 是现在大多数 ruby​​ 应用程序服务器实现的标准 Web 服务器接口。Rack 提供了一些库，可以更轻松地提供像传统 Web 服务器这样的静态资产。

    这里有几个资源可供查看：

    [http://quickleft.com/blog/rack-130-serving-static-files](http://quickleft.com/blog/rack-130-serving-static-files) [http://edgeguides.rubyonrails.org/rails_on_rack.html](http://edgeguides.rubyonrails.org/rails_on_rack.html)

# java - 如何使用 Java 中的 XPath 解析其标记名称中包含 & 的 XML？

> ID：14585958
> 
> 赞同：0
> 
> 时间：2013-01-29T15:06:04.003
> 
> 标签：java, xpath, xml-parsing

我想解析一个`XML`其标签包含`&`例如：`<xml><OC&C>12.4</OC&C></xml>`。我试图逃到`&`，`&amp;`但这并没有解决标签名称的问题（它只修复了值），目前我的代码正在抛出异常，请参阅下面的完整函数。

```
public static void main(String[] args) throws Exception
{
  String xmlString        = "<xml><OC&C>12.4</OC&C></xml>";
  xmlString = xmlString.replaceAll("&", "&amp;");
  String path             = "xml";
  InputSource inputSource = new InputSource(new StringReader(xmlString));
  try
  {
    Document xmlDocument            = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(inputSource);
    XPath xPath                     = XPathFactory.newInstance().newXPath();
    XPathExpression xPathExpression = xPath.compile(path);

    System.out.println("Compiled Successfully.");
  }
  catch (SAXException e)
  {
    System.out.println("Error while retrieving node Path:" + path + " from " + xmlString + ". Returning null");
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:14:59.667

嗯...我不认为这是[一个合法的 XML 名称](http://www.w3.org/TR/2000/REC-xml-20001006#NT-Name)。我会考虑先使用正则表达式将 OC&C 替换为合法的东西，然后再解析它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:14:53.807

它不是“XML”。这是一个非 XML。XML 不允许在名称中使用与号。因此，您无法使用 XML 解析器成功解析它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:13:33.677

`xml`不能是任何 XML 元素的名称。因此，您的 XML 片段无论如何都无法解析。然后你可以尝试类似的东西。

```
<name><![CDATA[<OC&C>12.4</OC&C>]]></name> 
```

# matlab - 在矩阵上绘制一行

> ID：14585965
> 
> 赞同：3
> 
> 时间：2013-01-29T15:06:24.850
> 
> 标签：matlab, matrix, line

我有一个矩阵`m = zeros(1000, 1000)`。在这个矩阵中，我想从我的矩阵中绘制穿过 2 个点的线的估计值。让我们说`x = [122 455];`和`y = [500 500];`。

我怎样才能在 Matlab 中做到这一点？是否有任何预定义的功能可以做到这一点？我正在使用 Matlab 2012b。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:36:53.097

我将这两个端点表示为`p1`and`p2`因为我打算使用`x`and`y`来做其他事情。我还假设`p1`and的第一个坐标`p2`是*x*，第二个是*y*。所以这是一个相当简单的方法：

1.  获得直线*y* = *ax* + *b*的方程。在 MATLAB 中，这可以通过以下方式完成：

    ```
    x = p1(1):p2(1)
    dx = p2(1) - p1(1);
    dy = p2(2) - p1(2);
    y = round((x - p1(1)) * dy / dx + p1(2)); 
    ```

2.  `x`将和的值转换为`y`矩阵中元素的索引，并将这些元素设置为 1。

    ```
    idx = sub2ind(size(m), y, x);
    m(idx) = 1; 
    ```

### 例子

下面是一个小型 10×10 矩阵的示例：

```
%// This is our initial conditon
m = zeros(10);
p1 = [1, 4];
p2 = [5, 7];

%// Ensure the new x-dimension has the largest displacement
[max_delta, ix] = max(abs(p2 - p1));
iy = length(p1) - ix + 1;

%// Draw a line from p1 to p2 on matrix m
x = p1(ix):p2(ix);
y = round((x - p1(ix)) * (p2(iy) - p1(iy)) / (p2(ix) - p1(ix)) + p1(iy));
m(sub2ind(size(m), y, x)) = 1;
m = shiftdim(m, ix > iy); %// Transpose result if necessary 
```

结果是：

```
m =
     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0
     1     0     0     0     0     0     0     0     0     0
     0     1     0     0     0     0     0     0     0     0
     0     0     1     1     0     0     0     0     0     0
     0     0     0     0     1     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0 
```

**更新：**我已经修补了这个算法，使其在*dy* > *dx*时工作，方法是将具有最大位移的维度视为 x 维度，然后在必要时转置结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-06T09:16:32.010

所提供的答案都不适用于`y`大于`x`( `dy > dx`) 的位移。正如所指出的，布雷森汉姆的线算法正是为此而生的。

[此处](https://ch.mathworks.com/matlabcentral/fileexchange/28190-bresenham-optimized-for-matlab/content/bresenham.m)提供的 matlab 文件与其他答案中提供的示例类似，但涵盖了所有用例。为了与之前提供的示例相关，可以像这样使用脚本：

```
% initial conditions
m = zeros(10);
p1 = [1, 4];
p2 = [5, 10];% note dy > dx
% use file provided on file exchange
[x y] = bresenham(p1(1),p1(2),p2(1),p2(2));
% replace entries in matrix m
m(sub2ind(size(m), y, x)) = 1; 
```

结果如下所示：

```
m = 
    0     0     0     0     0     0     0     0     0     0
    0     0     0     0     0     0     0     0     0     0
    0     0     0     0     0     0     0     0     0     0
    1     0     0     0     0     0     0     0     0     0
    0     1     0     0     0     0     0     0     0     0
    0     1     0     0     0     0     0     0     0     0
    0     0     1     0     0     0     0     0     0     0
    0     0     0     1     0     0     0     0     0     0
    0     0     0     1     0     0     0     0     0     0
    0     0     0     0     1     0     0     0     0     0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-08T10:58:28.370

对我来说`(matlab R2013b)`，以下行不起作用，当`p1(1)>p2(2)`（“：”不能倒数）：

```
x = p1(1):p2(1);

E.G.:

1:10

1 2 3 4 5 6 7 8 9 10

10:1

Empty matrix: 1-by-0 
```

但是当我改用 linspac 时它起作用了：

```
x = linspace(p1(1), p2(1), abs(p2(1)-p1(1))+1); 
```

# c - 在 C 中输入字母时如何终止循环？

> ID：14585968
> 
> 赞同：1
> 
> 时间：2013-01-29T15:06:37.733
> 
> 标签：c

在我的任务中，我需要使用循环并获得 1-5 之间的输入，如果我得到任何其他输入，我需要继续迭代直到获得 1-5。

你能告诉我我在做什么错吗？

我的部分代码：

```
int rateSelected, weeklyHours;

    printf("Enter the number corresponding to the desired pay rate or action:\n");
    printf("1) %.2lf$/hr                               2) %.2lf$/hr\n", RATE1, RATE2);
    printf("3) %.2lf$/hr                              4) %.2lf$/hr\n", RATE3, RATE4);
    printf("5) Quit\n");

    while ((scanf("%d", &rateSelected)) != EOF && rateSelected != 5)
    {
        if (rateSelected > 5 || isalpha(rateSelected) ==1){
            printf("please enter a number between 1-5:\n");
        continue;
        }

        printf("Now enter your weekly hours:\n");
        scanf("%d", &weeklyHours);
        ChoosePayRate(rateSelected, weeklyHours);
    } 
```

tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:10:24.700

问题是您使用`%d`格式说明符。当输入字母而不是数字时，`scanf`返回零以指示未读取任何内容。如果您希望允许输入字母和数字，则应在`scanf`返回零时添加对字符串的读取，或始终读取到字符串缓冲区，然后使用`sscanf`或`atoi`将字符串转换为整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:10:11.017

删除`isalpha(rateSelected)`.

`isalpha()`检查作为参数传递的`int`值是否是字母数字字符 - 但您传递的是刚刚读取的值。

但是，这仍然不够——您需要捕获返回值`scanf()`以检查是否`scanf()`实际读取了`int`. 但如果没有输入 int，则字符不会被丢弃，因此下一个 scanf() 将再次尝试转换它们，从而导致无限循环。更好地使用@dasblinkenlight 提供的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:10:49.560

`isalpha(rateselected)`永远不会是真的，因为您将 int 存储在`rateselected`. `scanf("%d",rateselected)`allready 负责捕获字符输入，如果是这种情况，则返回 0。因此，您应该将`isalpha`测试更改为`rateselected == 0`测试。

此外，scanf 永远不会返回 EOF。它会返回 0，然后你需要测试`feof(stdin)`一下你是否真的到达了输入的末尾。（这将对应`ctrl-Z`于键盘输入）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T15:12:33.213

你最好使用`fgets()`和`strtol()`为此。Scanf 和 line-buffering`stdio`一起不是很有帮助......

```
char line[LINE_MAX];
do {
    fgets(line, sizeof(line), stdin);
} while(!isdigit(line[0]));
int choice = strtol(line, NULL, 10); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T15:19:19.310

用这个：

```
int e;
while ((e = scanf("%d", &rateSelected)) != EOF)
{
    scanf("%*[^\n]"); // this clean your input buffer
    if (e==0 || rateSelected>5 || rateSelected<1) {
        printf("please enter a number between 1-5:\n");
        continue;
    } 
```

代替

```
 while ((scanf("%d", &rateSelected)) != EOF && rateSelected != 5)
    {
        if (rateSelected > 5 || isalpha(rateSelected) ==1){
            printf("please enter a number between 1-5:\n");
        continue;
        } 
```

# ruby-on-rails - belongs_to 关系不起作用

> ID：14585971
> 
> 赞同：3
> 
> 时间：2013-01-29T15:06:45.867
> 
> 标签：ruby-on-rails, belongs-to, rails-activerecord

我有以下活动记录类

```
class Car < ActiveRecord::Base
  belongs_to :owner
end 
```

当我尝试这个时在代码中

```
Car.first.owner 
```

它给了我错误“未定义的方法所有者”

如果我缺少任何东西，任何人都可以让我现在

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T15:19:36.843

您需要在所有者方面编写关系：`has_one :car`或`has_many :cars`根据您的需要。

```
class Car < ActiveRecord::Base
    belongs_to :owner
end

class Owner < ActiveRecord::Base
    has_one :car
end 
```

# unit-testing - 代码覆盖工具是否必须运行单元测试进行分析？

> ID：14585974
> 
> 赞同：2
> 
> 时间：2013-01-29T15:06:55.650
> 
> 标签：unit-testing, code-coverage

我是使用代码覆盖率的新手，而不是他们的行为方式。我尝试过的所有工具似乎都想运行整套单元测试来进行分析。虽然我认为他们会以某种方式静态分析代码，也就是说，无需运行单元测试。

我的假设不正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:14:41.610

通常的开源工具，如 Cobertura、Emma 等，需要运行测试。他们使用诸如字节码操作或 AOP 之类的东西来检测代码并跟踪在测试运行时执行了哪些行，然后生成结果报告。它的简单性使其成为一个非常有吸引力的解决方案。

您可以使用静态分析来近似测试覆盖率真的很有趣，但对于运行测试不切实际的情况，这似乎是最后的选择。引用[Ira Baxter 的回答](https://stackoverflow.com/a/14589479/217324)中引用的论文的摘要：

> 测试覆盖率是单元测试质量的一个重要指标。Clover 等工具通过首先使用日志功能检测代码，然后记录在单元测试运行期间执行了哪些部分来计算覆盖率。由于测试覆盖率的计算是一种动态分析，它以软件的工作安装为前提。在独立第三方进行软件质量评估的情况下，工作安装通常不可用。评估者可能无法访问所需的库或硬件平台。安装过程可能不是自动化的或记录在案的。在本文中，我们提出了一种仅通过静态分析在方法级别估计测试覆盖率的技术。该技术使用静态调用图的切片来估计动态测试覆盖率。我们解释了该技术及其实现。我们通过与使用 Clover 的动态分析获得的值进行统计比较来验证静态估计的结果。我们发现静态覆盖估计与系统级别的实际覆盖率之间存在高度相关性，但对包和类级别的更深入分析揭示了进一步改进的机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:14:13.367

在运行时收集信息的标准测试覆盖工具必然需要一些东西来运行代码，而测试套件至少具有覆盖所有功能的目的。如果您没有测试套件，您可以运行临时测试，但您的覆盖率可能不会很好，当然这是一个很难重复的实验。

但是您不一定必须使用动态分析。本文展示[了](http://www.computer.org/csdl/proceedings/scam/2009/3793/00/3793a055-abs.html)如何通过静态分析获得测试覆盖率的非常好的近似值。我个人认识作者，对他们的工作非常尊重。

# javascript - 我似乎无法在我的 javascript 中正确嵌入我的一些 html

> ID：14585982
> 
> 赞同：-1
> 
> 时间：2013-01-29T15:07:15.377
> 
> 标签：javascript, html

我有一个嵌入 html 的 javascript 函数。我有一个变量，我正在尝试对其调用 toString 方法。但是，我的页面不喜欢我认为的引用方式。这就是我所拥有的：

```
function (item) {
    '<h3>' + item.StartDate.ToString("MM/dd/yyyy") + '</h3>'
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:10:48.407

我认为它可能看起来像：

```
function printMyItem(item) {
    return '<h3>' + item.StartDate.toString("MM/dd/yyyy") + '</h3>';
}

document.write(printMyItem()); 
```

语法也是`toString`代替`ToString`.

类似的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:09:06.827

你的报价很好，但`toString`不是`ToString`。

# python - 使类在同一实例中可调用

> ID：14585987
> 
> 赞同：21
> 
> 时间：2013-01-29T15:07:24.947
> 
> 标签：python, class, callable

```
class Foo(object):
    def tick(self):
        print("something")

class Bar(object):
    def __init__(self):
        self.foo = Foo()

    def tick(self):
        #Here's what I do....
        self.foo.tick()

        #here's what my goal would be
        self.foo()

b = Bar()
b.tick() 
```

这基本上是我的目标。根据我收集到的信息，我可以将 tick 函数更改为`__call__`，这将允许我做我想做的事。其他几个答案说这将创建一个对象的新实例，这是否意味着它将使用 self.foo 的内存？还是会创建一个全新的对象，新实例化？或复制self.foo？

还想到了一些可能会或可能不会表现出来的缺点。对于我程序的特定部分，我检查对象是否具有`__call__`确定我传递的参数是函数还是变量，并且我真的不认为我希望允许调用它（尽管如此，我认为该类在技术上将是一个函数。）有没有办法区分函数和可调用类？

还有什么其他的东西会让这样做不受欢迎（这是一种pythonic的工作方式吗？）？我的下一个想法是，鉴于`__`不能在他们的班级之外使用其他以前缀为前缀的变量，但这里似乎并非如此。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-29T15:14:01.227

更改`tick(self)`为`__call__(self)`是正确的解决方案。

这与内存分配无关。一切都`__call__`表示当您使用（对于对象`foo`）语法时 Python 调用的函数`foo()`。

对于您以后的问题：检查某物是否是对象，请使用`isinstance`or `issubclass`（可能与`object`类一起使用）。在我看来，[这个答案](https://stackoverflow.com/a/624948/383402)比“如何确定某物是否是函数？”的公认答案更好。您可能已经看到的问题。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-29T15:17:41.107

要使类实例可调用，您需要做的就是实现一个`__call__`方法。然后，要调用该`__call__`方法，您只需： `instance(arg1,arg2,...)`-- 换句话说，您调用实例的方式与调用函数的方式相同。

请注意，如果需要，您可以`__call__`使用在类上定义的其他方法进行别名：

```
>>> class Foo(object):
...     def tick(self):
...         print ("something")
...     __call__ = tick
... 
>>> a = Foo()
>>> a()
something
>>> a.tick()
something 
```

# jquery - 在列表中的最后一个孩子之后添加内容，而不是在使用 jQuery 的整个列表之后

> ID：14585990
> 
> 赞同：0
> 
> 时间：2013-01-29T15:07:38.690
> 
> 标签：jquery, html

我正在使用一个 jQuery 插件，它可以自动最大化列表项，然后使用按钮将它们最小化。

该插件是[https://github.com/jawinn/Hide-Max-List-Items-Expander-jQuery-Plugin/blob/master/hideMaxListItem.js](https://github.com/jawinn/Hide-Max-List-Items-Expander-jQuery-Plugin/blob/master/hideMaxListItem.js)

该插件会在列表后自动添加一个“展开”按钮。我需要在列表中的最后一个孩子之后添加展开按钮。此列表也是从数据库中的值生成的，并且无法编辑单个列表项。

moreHTML 变量包含插入到页面中以创建“展开”按钮的 HTML。

用于发送变量的代码：

```
$(this).after(op.moreHTML); 
```

这就是我在变量中传递的内容：

```
'moreHTML':'<li class="maxlist-more"><a href="#"></a></li>' 
```

如何将“更多”按钮添加到列表中的最后一项而不是添加到整个列表之后？

*编辑* 为澄清起见，我希望将“阅读更多”按钮作为最后一个列表项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:10:38.873

你想要[.append()](http://api.jquery.com/append/)。

```
$(this).append(op.moreHTML); 
```

这会将 op.moreHTML 元素添加到任何 $(this) 上。如果您想变得更漂亮（如果出于某种原因， $(this) 不适用于您的代码）。

```
var $list = $('#WhateverListNameIs'),
    $item = $list.find('li'),
    len = $item.length-1;

$item.eq(len).append(op.moreHTML); 
```

未经测试，但我应该将 HTML 添加到最后一个列表项。如果在函数中完成，这也应该是动态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:10:19.157

假设这`this`是你的`<ul>`元素，你想使用[`.append()`](http://api.jquery.com/append/)而不是`.after()`：

```
$(this).append(op.moreHTML); 
```

# ios - ios将uiview的约束从代码添加到uiscrollview

> ID：14585993
> 
> 赞同：0
> 
> 时间：2013-01-29T15:07:56.797
> 
> 标签：ios, autolayout

在我的应用程序中，我有两个在 IB 中创建的顶级 UIView。一个是 UIViewControllers 视图，它有一个 UIScrollView 的子视图。另一个顶级 UIView 是要进入 UIScrollView 的内容。该部分工作正常，我将 UIScrollView 的 contentsize 设置为另一个 UIView 的大小，并且在纵向模式下一切正常。但是，如果我切换到横向模式， UIScrollView 会很好地调整大小，但它的子视图保持在左上角，但我希望它位于水平中心。所以我创建了这个约束并将其添加到 UIScrollView：

```
 NSLayoutConstraint* iPhoneTextFieldContainerAlwaysInHorizontalCenter = [NSLayoutConstraint
                                                                                constraintWithItem:self.iPhoneTextFieldContainerView
                                                                                attribute:NSLayoutAttributeCenterX
                                                                                relatedBy:NSLayoutRelationEqual
                                                                                toItem:self.iPhoneMainScrollView
                                                                                attribute:NSLayoutAttributeCenterX
                                                                                multiplier:1.0
                                                                            constant:0]; 
```

但是，当我切换到横向模式时，获取此约束异常：

> ( NSAutoresizingMaskLayoutConstraint:0x76dacb0 h=-&- v=-&- UIView:0x76d6eb0.width == UIViewControllerWrapperView:0x76d5b10.width, NSAutoresizingMaskLayoutConstraint:0x76d7e70 h=--& v=--& UIView:0x76d3110.midX == + 160, NSLayoutConstraint:0x76d7030 UIScrollView:0x7680f10.trailing == UIView:0x76d6eb0.trailing, NSLayoutConstraint:0x76d6ff0 H:|-(0)-[UIScrollView:0x7680f10]
> 
> （名称：'|':UIView:0x76d6eb0），NSLayoutConstraint:0x76d7330 UIView:0x76d3110.centerX == UIScrollView:0x7680f10.centerX, NSAutoresizingMaskLayoutConstraint:0x76deb70 h=-&- v=-&- UIViewControllerWrapperView:0x76d5b10.width ==UINavigationTransitionView 0x76d1ab0.width, NSAutoresizingMaskLayoutConstraint:0x75a3b60 h=--- v=--- V:[UIWindow:0x91979a0(480)], NSAutoresizingMaskLayoutConstraint:0x7595510 h=-&- v=-&- UILayoutContainerView:0x76a5da0.height == UIWindow: 0x91979a0.height, NSAutoresizingMaskLayoutConstraint:0x759e020 h=-&- v=-&- UINavigationTransitionView:0x76d1ab0.width == UILayoutContainerView:0x76a5da0.width)
> 
> 将尝试通过打破约束来恢复 NSLayoutConstraint:0x76d7330 UIView:0x76d3110.centerX == UIScrollView:0x7680f10.centerX

你能告诉我我在这里做错了什么吗？我应该删除约束吗？我能做这样的事吗？

谢谢是提前！

真挚地，

佐利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:23:35.663

看起来您的自定义约束和自动调整大小的蒙版约束正在发生冲突。使用此行来避免生成它并根据需要添加其他约束。

```
self.iPhoneMainScrollView.translatesAutoresizingMaskIntoConstraints = NO; 
```

# c - 如何在 LINUX (Ubuntu) 上用 C 语言实现 TCP SO_KEEPALIVE

> ID：14585996
> 
> 赞同：2
> 
> 时间：2013-01-29T15:08:03.793
> 
> 标签：c, linux, ubuntu, tcp

当保持活动消息未收到响应时，我正在尝试实现 TCP SO_KEEPALIVE 以关闭并重新连接我的连接。我的问题是我对此没有任何运气，我认为（希望）这是因为我没有正确实施它。下面是我如何实现这一点的示例。

```
//var to re-set socket's timeout value
struct timeval timeout; 

//creates a variable for KEEPALIVE's optval parm
 int optval; 

//creates a variable for KEEPALIVE's optlen parm
   socklen_t optlen = sizeof(optval); 

// sets KEEPALIVE parms
optval = 1;
optlen = sizeof(optval);

// turns on KEEPALIVE property on socket
if (setsockopt (Socket, SOL_SOCKET, SO_KEEPALIVE, &optval, optlen) < 0)
    {
        CloseSocket(Socket, 0);
        connect(Socket);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:10:37.053

您的代码仅显示您设置套接字选项，然后立即关闭并重新打开它。设置 socket 选项不会告诉你 keepalive 失败了。您将通过检查套接字（通过读取、写入、轮询/选择等）得到它。设置选项仅打开保持活动发送和检查。查找 ETIMEDOUT 作为 errno。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:45:34.840

如果 TCP KEEPALIVE 失败，您会在检测后的下一次读取或写入套接字时收到错误，通常是 ECONNRESET。它无法区分为 KEEPALIVE 故障，只是一般的 I/O 错误，实际上就是这样。