# StackOverflow 问答 13087000-13087999

# sharepoint - 我收到一个错误。访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）。当我给 listitem.BreakRoleInheritance(false)

> ID：13087001
> 
> 赞同：0
> 
> 时间：2012-10-26T12:33:54.713
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

我设置了自定义列出项目的权限。但我得到了一个错误：

`"Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))" .`

```
 if (!listitem.HasUniqueRoleAssignments) 
 { 
    listitem.BreakRoleInheritance(false);//I got an error here 
 } 
```

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:04:59.277

调用此代码将要求用户有权更改列表设置甚至更多。使用[RunWithElevatedPrivileges](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges.aspx)委托将像使用应用程序池的身份一样运行代码。

可以检查用户是否有权进行此更改，但该查找需要的权限级别不仅仅是普通用户才能调用，因此简单的答案是使用 RunWithElevatedPrivileges 委托包装您的代码。

# silverlight - 当 Silverlight MVVM 中的文本框为空或空时需要禁用我的按钮吗？

> ID：13087007
> 
> 赞同：0
> 
> 时间：2012-10-26T12:34:22.233
> 
> 标签：silverlight, mvvm

海我在 Silverlight5 中使用 MVVM 模式做了一个简单的应用程序。在设计页面中，我有三个文本框和一个按钮。这里我的要求是如果 3 文本框为空或 null 意味着按钮将被禁用。如何实现这一目标..任何帮助..？我的问题是：

1）它适用于第一个文本框。当我在第一个文本框中输入任何内容时，按钮处于禁用模式。但是，如果我移至第二个文本框，则表示该按钮已启用。2）我需要所有的文本框都将在仅启用按钮之后进行验证。如果任何一个文本框为空意味着按钮再次进入禁用模式..任何帮助..？在这里，我附上了我的编码.. Xaml：

```
<Button Content="Add"  Width="59" IsEnabled="{Binding ButtonIsEnabled}" Height="23" Margin="256,75,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" TabIndex="4" >
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <si:CallDataMethod Method="AddEmployee"/>
                    <si:SetProperty TargetName="LayoutRoot" PropertyName="Background" Value="LightBlue"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Button>
        <TextBlock FontWeight="Bold" Height="26" HorizontalAlignment="Left" Margin="47,12,0,0" Name="textBlock1" Text="First Name:" VerticalAlignment="Top" Width="77" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="130,12,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text="{Binding Fname,Mode=TwoWay}" TabIndex="1" AcceptsReturn="False">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="TextChanged">
                    <si:CallDataMethod Method="ButtonIsEnabled"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </TextBox> 
        <TextBlock FontWeight="Bold" Height="25" HorizontalAlignment="Left" Margin="35,44,0,0" Name="textBlock2" Text="Second Name:" VerticalAlignment="Top" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="130,44,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" Text="{Binding Sname,Mode=TwoWay}" TabIndex="2" >
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="TextChanged">
                    <si:CallDataMethod Method="ButtonIsEnabled"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </TextBox> 
        <TextBlock FontWeight="Bold" Height="23" HorizontalAlignment="Left" Margin="45,75,0,0" Name="textBlock3" Text="Department:" VerticalAlignment="Top" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="130,75,0,0" Name="textBox3" VerticalAlignment="Top" Width="120"  Text="{Binding Dept,Mode=TwoWay}" TabIndex="3" >
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="TextChanged">
                    <si:CallDataMethod Method="ButtonIsEnabled"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </TextBox> 
```

视图模型代码：

EmployeeListViewModel.cs

```
public bool ButtonIsEnabled
        {
            get
            {
                return !(((string.IsNullOrEmpty(this.Fname)) && (string.IsNullOrEmpty(this.Sname)) && (string.IsNullOrEmpty(this.Dept))));
            }
        }
        private string _fname;
        public string Fname
        {
            get
            {
                return _fname;
            }
            set
            {
                if (_fname != value)
                {
                    _fname = value;
                    RaisePropertyChanged("Fname");
                    //RaisePropertyChanged("ButtonIsEnabled");
                }
                else
                {
                    _fname = value;
                    RaisePropertyChanged("Fname");
                }
            }
        }

private string _sname;
        public string Sname
        {
            get
            {
                return _sname;
            }
            set
            {
                if (_sname != value)
                {
                    _sname = value;
                    RaisePropertyChanged("Sname");
                    RaisePropertyChanged("ButtonIsEnabled");
                }
                else
                {
                    _sname = value;
                    RaisePropertyChanged("Sname");
                }
            }
        }
        private string _dept;
        public string Dept
        {
            get
            {
                return _dept;
            }
            set
            {
                if (_dept != value)
                {
                    _dept = value;
                    RaisePropertyChanged("Dept");
                    RaisePropertyChanged("ButtonIsEnabled");
                }
                else
                {
                    _dept = value;
                    RaisePropertyChanged("Dept");
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:02:49.803

您需要删除触发器并在绑定中使用 UpdateSourceTrigger，例如

```
Text="{Binding Fname,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
```

所以你的 XAML 看起来像：

```
<StackPanel>

    <Button Content="Add"  Width="59" IsEnabled="{Binding ButtonIsEnabled}" Height="23" Margin="256,75,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" TabIndex="4" />

    <TextBlock FontWeight="Bold" Height="26" HorizontalAlignment="Left" Margin="47,12,0,0" Name="textBlock1" Text="First Name:" VerticalAlignment="Top" Width="77" />
    <TextBox Height="23" HorizontalAlignment="Left" Margin="130,12,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text="{Binding Fname,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TabIndex="1" AcceptsReturn="False"/>

    <TextBlock FontWeight="Bold" Height="25" HorizontalAlignment="Left" Margin="35,44,0,0" Name="textBlock2" Text="Second Name:" VerticalAlignment="Top" />
    <TextBox Height="23" HorizontalAlignment="Left" Margin="130,44,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" Text="{Binding Sname,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TabIndex="2" />

    <TextBlock FontWeight="Bold" Height="23" HorizontalAlignment="Left" Margin="45,75,0,0" Name="textBlock3" Text="Department:" VerticalAlignment="Top" />
    <TextBox Height="23" HorizontalAlignment="Left" Margin="130,75,0,0" Name="textBox3" VerticalAlignment="Top" Width="120"  Text="{Binding Dept,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TabIndex="3" />

</StackPanel> 
```

并且您的 VM 类需要如下所示：

```
 public bool ButtonIsEnabled
        {
        get
            {
            return !(string.IsNullOrEmpty(this.Fname) || string.IsNullOrEmpty(this.Sname) || string.IsNullOrEmpty(this.Dept));
            }
        }

    private string _fname;
    public string Fname
        {
        get { return _fname; }
        set
            {
            _fname = value;
            OnPropertyChanged("Fname");
            OnPropertyChanged("ButtonIsEnabled");  
            }
        }

    private string _sname;
    public string Sname
        {
        get { return _sname;}
        set
            {
            _sname = value;
            OnPropertyChanged("Sname");
            OnPropertyChanged("ButtonIsEnabled");          
            }
        }

    private string _dept;
    public string Dept
        {
        get { return _dept; }
        set
            {
            _dept = value;
            OnPropertyChanged("Dept");
            OnPropertyChanged("ButtonIsEnabled");
            }             
        }

    #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string propertyName)
            {
            if (PropertyChanged != null)
                {
                PropertyChanged(this,
                    new PropertyChangedEventArgs(propertyName));
                }
            }

    #endregion /****** InotifyPropertyChanged Members *********************/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:57:14.433

如果您希望仅在每个文本框都有文本时才启用按钮，则需要更改 ButtonIsEnabled 属性，如下所示：

```
public bool ButtonIsEnabled
{
    get
    {
        return !(((string.IsNullOrEmpty(this.Fname)) || (string.IsNullOrEmpty(this.Sname)) || (string.IsNullOrEmpty(this.Dept))));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T12:58:35.013

在wpf中我会做以下事情，不知道它是否适用于silverlight

```
 public bool ButtonIsEnabled
 {
        get
        {
            return !string.IsNullOrEmpty(this.Fname) && !string.IsNullOrEmpty(this.Sname) && !string.IsNullOrEmpty(this.Dept);
        }
    }

    private string _fname;
    public string Fname
    {
        get
        {
            return _fname;
        }
        set
        {
            if (_fname != value)
            {
                _fname = value;
                RaisePropertyChanged("Fname");
                RaisePropertyChanged("ButtonIsEnabled");
            }
        }
    }

    private string _sname;
    public string Sname
    {
        get
        {
            return _sname;
        }
        set
        {
            if (_sname != value)
            {
                _sname = value;
                RaisePropertyChanged("Sname");
                RaisePropertyChanged("ButtonIsEnabled");
            }
        }
    }

    private string _dept;
    public string Dept
    {
        get
        {
            return _dept;
        }
        set
        {
            if (_dept != value)
            {
                _dept = value;
                RaisePropertyChanged("Dept");
                RaisePropertyChanged("ButtonIsEnabled");
            }
        }
    } 
```

# regex - 与此匹配相反的正则表达式

> ID：13087009
> 
> 赞同：0
> 
> 时间：2012-10-26T12:34:52.700
> 
> 标签：regex, numbers, notepad++

我的问题是你如何正则表达式不是我当前正则表达式的东西。

我的正则表达式是： 9\d\d\d\d\d\d\d\d\d

我试图找到以 9 开​​头的 10 位数字。但现在我想找到与此相反的人。

我怎么做？我正在尝试将它与 notepad++ 正则表达式一起使用，找到那些不是 10 位且不以 9 开​​头的人，然后将其删除。

我需要删除：只要不是 10 位且不以 9 开​​头的所有内容，无论位数多少。

谢谢你。

我有一个长文件，看起来像这样，

```
 905664572
 9055148
 9052836956
 9054950806
 9059105646
 905403434
 905654765
 9058618018
 90547214 
```

我需要摆脱所有不是 10 位数的地方。

使用记事本++时

此正则表达式有效： 9\d\d\d\d\d\d\d\d\d

此正则表达式不： 9\d{9} AND ^9(\d{0,9}

* * *

这对我想要做的事情有效：

```
 (?<!\d)[0-9](\d{0,8}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:39:54.093

```
^9(\d{0,8}|\d{10,})$ 
```

这是您的测试。 [http://www.rubular.com/r/Ls56UCYRHa](http://www.rubular.com/r/Ls56UCYRHa)

有关正则表达式的更多信息[http://www.regular-expressions.info](http://www.regular-expressions.info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:40:53.170

您的正则表达式是`9\d\d\d\d\d\d\d\d\d`并且可以缩短为`9\d{9}`...

好吧，相反的可能是`(?!9\d\d\d\d\d\d\d\d\d)`或`(?!9\d{9})`或`9(?>!\d{9})`

编辑：工作快递：`(?<!\d)9(\d{0,8}|\d{10,})(?=\D)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T12:41:55.677

您可以使用正则表达式：

```
^9(\d{0,8}|\d{10,})$ 
```

这可确保您的输入以 a 开头，`9`后跟除 9 之外的任意位数。

# c++ - QWebView中的注销功能

> ID：13087011
> 
> 赞同：0
> 
> 时间：2012-10-26T12:35:13.120
> 
> 标签：c++, session, qt4, qwebview, qwebkit

我正在 Qt 4.8.1 中开发应用程序。我试图开发一个简单的网络浏览器。我想在现场创建功能注销。

据我了解，所需信息存储在 cookie 中。在`webView->page()->networkAccessManager()->cookieJar()`我还没有找到清除cookies。可能是会话必须关闭。不是吗？帮我创建注销功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:34:35.187

也许尝试删除 webview 的网页对象并实例化一个 newPage 对象。接着`webView->setPage(newPage);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:10:19.183

您需要在 webPage->page()->mainFrame() 对象上使用 Javascript 评估来模拟注销。例如，您可以创建一个这样的函数来注销：

```
void Program::logout()
{
    webView->page()->mainFrame->evaluateJavaScript("websiteLogoutJavaScript();");
} 
```

当然，更改评估调用中的 JS 以匹配注销过程。此方法将取决于如何物理注销网站。如果它是一个按钮，您可以在该按钮上调用一个单击事件。如果它是一个指向注销页面的超链接，您可以导航到注销页面。这些只是一些建议，但您需要使用 JavaScript 更改 DOM 的状态。

# python - 生成连续的字母数字

> ID：13087012
> 
> 赞同：1
> 
> 时间：2012-10-26T12:35:18.493
> 
> 标签：python

需要更好的方法来生成从 AAAAA00001 到 ZZZZZ99999 开始的升序字符串？

例如 AAAA00001、AAAA00002、……。AAAAA99999，AAAAB00001，…… ZZZZZ99999

当前正在使用的样本高度未优化（我觉得）如下：

```
def generateAlphanumericSequence():
    for i in range(65, 91):
        for j in range(65, 91):
            for k in range(65, 91):
                for l in range(65, 91):
                    for m in range(65, 91):
                        for z in range(1, 100000):
                            print '%s%s%s%s%s%05d' % (chr(i), chr(j), chr(k), chr(l), chr(m), z) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T12:43:26.447

使用`itertools.product`.

```
from string import ascii_uppercase
import itertools
def generateAlphanumericSequence():
    for i,j,k,l,m in itertools.product(ascii_uppercase,repeat=5):
         for z in range(1, 100000):
              yield '%s%s%s%s%s%05d' % (i, j, k, l, m, z) 
```

您可以轻松地将其概括为接受前面的任意数量的字符（如果您用于`str.join`修复 的输出`itertools.product`）：

```
from string import ascii_uppercase
import itertools
def generateAlphanumericSequence(repeat=5):
    for seq in itertools.product(ascii_uppercase,repeat=repeat):
         sseq = ''.join(seq)
         for z in range(1, 100000):
              yield '%s%05d' % (sseq, z) 
```

当然，您也可以使用范围的默认参数——您只需要弄清楚创建`%0?d`字符串需要多少位数，但您可以使用`math.log10`. 例如

```
fmtstring = '%s%0{size}d'.format(size=int(math.log10(rmax-1)+1)) 
```

*有关数字部分的其他选项，请参阅我自己和@DSM 的评论——那里也可能有优化机会。你需要`timeit`看看。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:53:39.130

您基本上是从 0 计数到 1188137599999 ((26 ** 5) * 100000 - 1)，但超过 100000 的值以 26 为基数表示，只有字母。如果将数字格式与计数分开，您将得到：

```
from string import ascii_uppercase

def _format(value, lettercount=5, digitcount=5):
    upper, lower = divmod(value, 10 ** digitcount)
    letters = []
    for i in xrange(lettercount):
        upper, val = divmod(upper, 26)
        letters.insert(0, ascii_uppercase[val])
    return '%s%0*i' % (''.join(letters), digitcount, lower)

def lettercounter(lettercount=5, digitcount=5):
   for i in xrange((26 ** lettercount) * (10 ** digitcount)):
       yield _format(i, lettercount, digitcount) 
```

它将有效地一一生成您的所有值。

演示：

```
>>> lettercounter().next()
'AAAAA00000'
>>> _format(123456789)
'AABVM56789'
>>> _format(26**5*100000-1)
'ZZZZZ99999' 
```

这些函数还接受任意数字和字母长度：

```
>>> lettercounter(2, 2).next()
'AA00' 
```

我的方法的优点是您可以将任意数字格式化为字母 + 数字序列号，以及生成从 0 开始的序列。但[mgilson 的解决方案](https://stackoverflow.com/a/13087132/100297)可能更快，因为`itertools.product`用于生成字母序列不需要您分解将序列号的上半部分转换为一组以 26 为基数的“数字”。

# ios - 从在线数据库读取的新闻 iphone 应用程序

> ID：13087013
> 
> 赞同：1
> 
> 时间：2012-10-26T12:35:22.687
> 
> 标签：ios, objective-c, feed

我有一个显示科学新闻的 Wordpress 博客。
我需要创建一个 iPhone 应用程序，即从网站的同一个 MySQL 数据库在线读取的新闻阅读器。如果我能找到可以提供帮助的教程，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:45:19.083

Wordpress 有一个[XML-RPC 和 AtomPub web api](http://wordpress.org/support/topic/getting-started-with-xml-rpc-or-atom-publising-protocal)。这将允许您使用 NSURLConnection 或其他 http api 从 iOS 进行 http 调用。为此，您将在 iOS 端使用[NSXMLParser](http://codesofa.com/blog/archive/2008/07/23/make-nsxmlparser-your-friend.html)。

如果您需要从 MySQL 数据库中查询您的数据，那么我强烈建议您使用[ASP.net web api](http://www.asp.net/web-api/overview/creating-web-apis/creating-a-web-api-that-supports-crud-operations)、[PHP](http://blog.programmableweb.com/2011/09/23/short-list-of-restful-api-frameworks-for-php/)、[node.js](http://pixelhandler.com/blog/2012/02/09/develop-a-restful-api-using-node-js-with-express-and-mongoose/)等将 http web api 放在它上面...

http 服务器可以将 json 作为数据返回，在 iOS 5 及更高版本中，有一个 JSON 解析器：[http ://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:16:10.760

您可以将 RSS 小部件添加到您的博客，然后 iPhone 应用程序会使用它 - 看看[如何制作一个简单的 RSS 阅读器 iPhone 应用程序教程](http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial)

# iphone - 如何在 iPhone 的 Sqlite3 中插入 NSMutableArray 元素

> ID：13087014
> 
> 赞同：0
> 
> 时间：2012-10-26T12:35:22.327
> 
> 标签：iphone, objective-c, sqlite, nsmutablearray

当我将数组元素插入 sqlite 时，它​​会正确插入。它只需要数组中的第一个元素，其余元素在插入时会显示错误。我的代码是：

```
NSString *path=[self getDBPath];
sqlite3_stmt *insert_statement = nil;    

if (sqlite3_open([path UTF8String], &database) == SQLITE_OK) {
    for (int i = 0; i < [array count]; i++) 
    {
        NSLog(@"Array Count is %d",[array count]);
        NSString *name=[[array objectAtIndex:i]objectForKey:@"name"];
        NSString *add=[[array objectAtIndex:i]objectForKey:@"address"];

        if (insert_statement == nil) {
            NSString *statement1 = [NSString stringWithFormat:@"insert into tableName (name,address) Values( ?,?)",name,add];
            const char *insertSql = [statement1 UTF8String];
            if(sqlite3_prepare_v2(database, insertSql, -1, &insert_statement, NULL) != SQLITE_OK){
                NSLog(@"Error while creating insert statement.");
                insert_statement = nil;
                continue;
            }

        sqlite3_bind_text(insert_statement, 1, [name UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(insert_statement, 2, [add UTF8String], -1, SQLITE_TRANSIENT);

        if(SQLITE_DONE != sqlite3_step(insert_statement)){
            //NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
            NSLog(@"Error while inserting data.");
            insert_statement = nil;
            continue;
        }
        else{}

            sqlite3_reset(insert_statement);
            sqlite3_finalize(insert_statement);
            insert_statement = nil;
        }
    }
sqlite3_close(database);
} 
```

为什么它只允许一条记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:37:25.647

这是由于每次循环中的 finalize 语句而发生的。所以它不会让在第一个对象之后插入其他对象。

只需`"sqlite3_finalize(insert_statement);"`从循环中删除并设置`nil`为插入语句`"insert_statement = nil;"`

完成循环后。确保将`"sqlite3_reset(insert_statement);"`for 每个对象放在循环中。它重置语句，无需设置`nil`循环中的语句。

试试这段代码，它对我有用：

```
if (sqlite3_open([path UTF8String], &database) == SQLITE_OK) {  

    for (int i = 0; i < [array count]; i++)
    {
        NSLog(@"Array Count is %d",[array count]);
        NSString *name=[[array objectAtIndex:i]objectForKey:@"name"];
        NSString *add=[[array objectAtIndex:i]objectForKey:@"address"];

        if (insert_statement == nil) {
            NSString *statement1 = [NSString stringWithFormat:@"insert into tableName (name,address) Values( ?,?)",name,add];
            const char *insertSql = [statement1 UTF8String];
            if(sqlite3_prepare_v2(database, insertSql, -1, &insert_statement, NULL) != SQLITE_OK){
                NSLog(@"Error while creating insert statement.");
                insert_statement = nil;
                continue;
            }

            sqlite3_bind_text(insert_statement, 1, [name UTF8String], -1, SQLITE_TRANSIENT);
            sqlite3_bind_text(insert_statement, 2, [add UTF8String], -1, SQLITE_TRANSIENT);

            if(SQLITE_DONE != sqlite3_step(insert_statement)){
                //NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
                NSLog(@"Error while inserting data.");
                insert_statement = nil;
                continue;
            }
            else{

            sqlite3_reset(insert_statement);

            }
        }
    }
    insert_statement = nil;
    sqlite3_finalize(insert_statement);
    sqlite3_close(database);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T13:04:29.627

试试这个代码它对我有用

```
 for(int i=0;i<[data count];i++) 
        {
            NSMutableDictionary *myDict = [data objectAtIndex:i];

            selectSql=[NSString stringWithFormat:@"INSERT INTO [commentTable] values('%@','%@')",[myDict valueForKey:@"usertype"],[myDict valueForKey:@"userid"]];

            if (sqlite3_prepare_v2(database, [selectSql cStringUsingEncoding:NSUTF8StringEncoding], -1, &statement, NULL) == SQLITE_OK)
            {
                if (sqlite3_step(statement) == SQLITE_DONE)
                {
                    ret = YES;
                    NSLog(@"DB SUPPORT - commentTable INSERTED");
                }
                else
                {
                    NSLog(@"DB SUPPORT - ERROR commentTable INSERT");
                }

            }
            else
            {
                NSLog(@"DB SUPPORT - Sql Preparing Error ( INSERT commentTable)");
            }

            sqlite3_finalize(statement);
        }

        sqlite3_close(database); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:11:01.297

您可以使用 ：

```
for (int i = 0; i < [mutArray count]; i++)
    {
       NSString *string = [mutArray objectAtIndex:i];
       // insert query
       insert into table_name ('string') values(column_name);
    } 
```

参考：[如何将 nsmutable 数组添加到 sqlite 数据库表中](https://stackoverflow.com/questions/12563996/how-to-add-nsmutable-array-into-sqlite-database-table)

# clearcase - Rational Clearcase Explorer 已停止工作错误

> ID：13087016
> 
> 赞同：1
> 
> 时间：2012-10-26T12:35:49.070
> 
> 标签：clearcase

我正在使用带有 Windows 7 64 位的 Clearcase 7.1.2。
我反复崩溃（似乎是当我使用滚动条时 - 尽管我并不肯定总是如此）。
查看事件日志，我看到：

```
Faulting application name: clearexplorer.exe, version: 7.1200.0.214, time stamp: 0x4c87f2c3  
Faulting module name: clearlist.ocx_unloaded, version: 0.0.0.0, time stamp: 0x4c87f0ab  
Exception code: 0xc0000005  
Fault offset: 0x03597c1f  
Faulting process id: 0x16e4  
Faulting application start time: 0x01cdb2ddb53e24d7  
Faulting application path: C:\Program Files (x86)\IBM\RationalSDLC\ClearCase\bin\clearexplorer.exe
Faulting module path: clearlist.ocx  
Report Id: f29793dd-1eda-11e2-b4a5-0023ae7ecd09 
```

谁能建议需要做些什么来解决这个问题？
`clearlist.ocx`似乎是罪魁祸首，但我不知道该怎么办。ClearCase 每隔几分钟就会崩溃，这让我抓狂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:17:11.697

如果您还没有 C:\temp 目录，请创建一个。将用户和系统的环境变量设置为 C:\TEMP 右键单击​​ C:\temp 目录并选择属性。选择安全选项卡。授予 USERS FUll 权限。单击确定。重新启动工作站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:32:42.393

[管理员手册](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.books.cc_ms_platforms_guide.doc/clearcase_on_windows.htm)确实提到：

> 当托管在 64 位 Windows 平台上时，Rational ClearCase 客户端有几个限制。
> 大多数这些限制都与动态视图有关。
> 有关 Rational ClearCase 和 64 位 Windows 平台的更多信息，请参阅[Rational ClearCase 的 IBM 软件支持网站](http://www.ibm.com/software/awdtools/clearcase/support/index.html)。

7.1.2的[帮助页面](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/index.jsp?topic=/com.ibm.rational.clearcase.platforms.doc/topics/r_win_win64.htm)呼应了这一点，尽管适用于 Windows Xp（我想它也扩展到 Windows 7，但这尚未得到证实）：

> 当托管在 64 位 Windows 平台（例如 Windows XP Professional x64 Edition）上时，Rational® ClearCase® 客户端有几个限制。
> 
> *   Rational ClearCase 与 Windows Explorer 的集成不适用于 64 位版本的 Windows Explorer。要启用此集成，请运行 32 位版本的 Windows Explorer。
> *   64 位 Windows 平台不支持 Rational ClearCase 远程客户端和其他 Eclipse 驱动的软件。

ClearCase 7.1 的这个[系统要求](http://www-01.ibm.com/support/docview.wss?uid=swg21302974)确实包含[一些限制](http://www-01.ibm.com/support/docview.wss?uid=swg21302974#Footnote%201)，包括技术说明[“ **在 64 位 Windows 平台上使用 Rational ClearCase 的已知限制**”](http://www-01.ibm.com/support/docview.wss?uid=swg21247988)。

理想情况下，ClearCase 8 对 Windows 有更好的 64 位支持（即使您可以找到[在 CC7.1、7.1.2 和 8 的 Windows 64 位上安装 ClearCase 的说明](http://www-01.ibm.com/support/docview.wss?uid=swg21567211)）。

Windows 64 位上 ClearCase Explorer 的常见问题与[上下文菜单（不存在）有关](http://www-01.ibm.com/support/docview.wss?uid=swg1PM62172)。
但是我只在一种情况下看到了间歇性崩溃：由防病毒软件扫描的动态视图（因此请尝试查看在暂时停用防病毒软件时是否仍然发生崩溃）

# android - Eclipse android LogCat：GCMRegistrar：在应用程序错误时保存 regId

> ID：13087019
> 
> 赞同：3
> 
> 时间：2012-10-26T12:36:02.767
> 
> 标签：android, save, google-cloud-messaging

我无法弄清楚这一点，在我的一个测试应用程序中，关闭应用程序时出现错误。

在 LogCat 中，我看到 handleRegistration 长代码正常，以蓝色文本显示，但在将 regId 保存在应用程序上后的一些行中，注册码以红色文本显示。

有人知道为什么吗？

在另一个应用程序中，在同一个模拟器中，它不会发生，但我找不到解决方案。

编辑

你是对的，对不起，这是 LogCat 输出：

```
10-26 12:22:11.383: I/dalvikvm(754): threadid=3: reacting to signal 3
10-26 12:22:11.539: I/dalvikvm(754): Wrote stack traces to '/data/anr/traces.txt'
10-26 12:22:11.644: I/dalvikvm(754): threadid=3: reacting to signal 3
10-26 12:22:11.718: I/dalvikvm(754): Wrote stack traces to '/data/anr/traces.txt'
10-26 12:22:11.873: D/GCMRegistrar(754): resetting backoff for nl.easy.gcmnotification
10-26 12:22:11.883: V/GCMRegistrar(754): Registering app nl.easy.gcmnotification of senders 182xxxxxx601
10-26 12:22:12.153: I/dalvikvm(754): threadid=3: reacting to signal 3
10-26 12:22:12.163: I/dalvikvm(754): Wrote stack traces to '/data/anr/traces.txt'
10-26 12:22:12.445: D/gralloc_goldfish(754): Emulator without GPU emulation detected.
10-26 12:22:13.843: V/GCMBroadcastReceiver(754): onReceive: 
com.google.android.c2dm.intent.REGISTRATION
10-26 12:22:13.843: V/GCMBroadcastReceiver(754): GCM IntentService class: nl.easy.gcmnotification.GCMIntentService
10-26 12:22:13.853: V/GCMBaseIntentService(754): Acquiring wakelock
10-26 12:22:13.864: V/GCMBaseIntentService(754): Intent service name: GCMIntentService-182537982601-1
10-26 12:22:13.953: E/GCMRegistrar(754): internal error: retry receiver class not set yet
10-26 12:22:13.953: V/GCMRegistrar(754): Registering receiver
10-26 12:22:13.953: D/GCMBaseIntentService(754): handleRegistration: registrationId = APAxxxxxx8Kg, error = null, unregistered = null (IN COLOR BLUE)
10-26 12:22:13.953: D/GCMRegistrar(754): resetting backoff for nl.easy.gcmnotification
10-26 12:22:13.964: V/GCMRegistrar(754): Saving regId on app version 1
10-26 12:22:13.973: E/(754): registration id : APAxxxxxx8Kg (IN COLOR RED)
10-26 12:22:13.973: V/GCMBaseIntentService(754): Releasing wakelock
(WHEN SHUTTING DOWN APP)
10-26 12:22:35.033: V/GCMRegistrar(754): Unregistering receiver
10-26 12:22:35.033: D/AndroidRuntime(754): Shutting down VM
10-26 12:22:35.033: W/dalvikvm(754): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
10-26 12:22:35.155: E/AndroidRuntime(754): FATAL EXCEPTION: main
10-26 12:22:35.155: E/AndroidRuntime(754): java.lang.RuntimeException: Unable to destroy activity {nl.easy.gcmnotification/nl.easy.gcmnotification.MainActivity}: java.lang.IllegalArgumentException: Receiver not registered: com.google.android.gcm.GCMBroadcastReceiver@412bc5c0
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3112)
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3130)
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.app.ActivityThread.access$1200(ActivityThread.java:123)
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1180)
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.os.Looper.loop(Looper.java:137)
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-26 12:22:35.155: E/AndroidRuntime(754):  at java.lang.reflect.Method.invokeNative(Native Method)
10-26 12:22:35.155: E/AndroidRuntime(754):  at java.lang.reflect.Method.invoke(Method.java:511)
10-26 12:22:35.155: E/AndroidRuntime(754):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-26 12:22:35.155: E/AndroidRuntime(754):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-26 12:22:35.155: E/AndroidRuntime(754):  at dalvik.system.NativeStart.main(Native Method)
10-26 12:22:35.155: E/AndroidRuntime(754): Caused by: java.lang.IllegalArgumentException: Receiver not registered: com.google.android.gcm.GCMBroadcastReceiver@412bc5c0
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:628)
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1066)
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:354)
10-26 12:22:35.155: E/AndroidRuntime(754):  at com.google.android.gcm.GCMRegistrar.onDestroy(GCMRegistrar.java:266)
10-26 12:22:35.155: E/AndroidRuntime(754):  at nl.easy.gcmnotification.MainActivity.onDestroy(MainActivity.java:49)
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.app.Activity.performDestroy(Activity.java:4629)
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1079)
10-26 12:22:35.155: E/AndroidRuntime(754):  at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3099)
10-26 12:22:35.155: E/AndroidRuntime(754):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:49:49.060

通过重新启动eclipse并清理/重建项目来解决问题......奇怪但真实！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:11:25.733

您可以发布用于破坏活动的代码吗？

我认为您的问题与此问题相同： [GCMRegistrar.onDestroy(context) crashing, Receiver not registered](https://stackoverflow.com/questions/11935680/gcmregistrar-ondestroycontext-crashing-receiver-not-registered)

另一个潜在问题：您是否在清单中声明了该服务？

# c++ - 我可以使用基于范围的 for 循环轻松迭代地图的值吗？

> ID：13087028
> 
> 赞同：40
> 
> 时间：2012-10-26T12:36:55.293
> 
> 标签：c++, dictionary, for-loop, c++11, key-value

`std::map`是否可以仅使用“foreach”来迭代 a 中的所有值？

这是我当前的代码：

```
std::map<float, MyClass*> foo ;

for (map<float, MyClass*>::iterator i = foo.begin() ; i != foo.end() ; i ++ ) {
    MyClass *j = i->second ;
    j->bar() ;
} 
```

有没有办法可以做到以下几点？

```
for (MyClass* i : /*magic here?*/) {
    i->bar() ;
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2017-11-12T14:51:29.587

从**C++1z/17**开始，您可以使用**结构化绑定**：

```
#include <iostream>
#include <map>
#include <string>

int main() {
   std::map<int, std::string> m;

   m[1] = "first";
   m[2] = "second";
   m[3] = "third";

   for (const auto & [key, value] : m)
      std::cout << value << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-26T12:48:45.823

```
std::map<float, MyClass*> foo;

for (const auto& any : foo) {
    MyClass *j = any.second;
    j->bar();
} 
```

在 c++11（也称为 c++0x）中，您可以像在 C# 和 Java 中一样执行此操作

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-26T12:39:12.137

神奇之处在于[Boost.Range 的`map_values`适配器](http://www.boost.org/doc/libs/1_51_0/libs/range/doc/html/range/reference/adaptors/reference/map_values.html)：

```
#include <boost/range/adaptor/map.hpp>

for(auto&& i : foo | boost::adaptors::map_values){
  i->bar();
} 
```

它被正式称为“基于范围的 for 循环”，而不是“foreach 循环”。:)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-08-11T07:05:29.470

从[C++20](https://en.wikipedia.org/wiki/C%2B%2B20)开始，您可以将 Ranges 库中的范围适配器添加`std::views::values`到[基于](https://en.cppreference.com/w/cpp/ranges)范围[的 for 循环](https://en.cppreference.com/w/cpp/language/range-for)中。这样，您可以实现与[Xeo 的答案](https://stackoverflow.com/a/13087074/2675154)类似的解决方案，但不使用 Boost：

```
#include <map>
#include <ranges>

std::map<float, MyClass*> foo;

for (auto const &i : foo | std::views::values)
    i->bar(); 
```

[魔杖盒上的代码](https://wandbox.org/permlink/MeElLXb01khCRnB9)

# java - Java HbackgroundImage 重绘

> ID：13087033
> 
> 赞同：0
> 
> 时间：2012-10-26T12:37:05.613
> 
> 标签：java, image, netbeans, ide

我有一个显示背景图像的 java 代码。（pizza1.png）我希望它在我按下箭头键时改变（案例 HRcEvent.VK_RIGHT :) 但我不知道输入什么所以它会重绘图像，它改变了图像路径的字符串，但它没有不要重绘它。有人可以帮助我吗？

```
public class HelloTVXlet implements Xlet, UserEventListener, ResourceClient, HBackgroundImageListener{

   public String afbeelding = "pizza1.png";

    private HScreen screen;
    private HBackgroundDevice bgDevice;
    private HBackgroundConfigTemplate bgTemplate;
    private HStillImageBackgroundConfiguration bgConfiguration;
    private HBackgroundImage agrondimg = new HBackgroundImage(afbeelding);

    public void notifyRelease(ResourceProxy proxy){}
    public void release(ResourceProxy proxy){}
    public boolean requestRelease(ResourceProxy proxy, Object requestData){
    return false;
    }

    public void imageLoaded (HBackgroundImageEvent e){
    try{
    bgConfiguration.displayImage(agrondimg);
    }
    catch (Exception s){
    System.out.println(s.toString());
    }
    }

    public void imageLoadFailed(HBackgroundImageEvent e){
    System.out.println("Image kan niet geladen worden");
    }

    private XletContext actueleXletContext;
    public static HScene scene;
    int waardex = 20;
    int waardey = 20;
    // x; y; 
//   public static MijnComponent mc = new MijnComponent("sterren.PNG");
    // debuggen of niet ?
    private boolean debug=true;

    public HelloTVXlet(){

    }

    public void initXlet(XletContext context) throws XletStateChangeException {

      screen = HScreen.getDefaultHScreen();
      bgDevice = screen.getDefaultHBackgroundDevice();
      if(bgDevice.reserveDevice(this)){

          System.out.println("BackgroundImage device ahs been reserved");
      }
      else{

          System.out.println("Background image device cannot be reserved");

      } 

      bgTemplate = new HBackgroundConfigTemplate();
      bgTemplate.setPreference(HBackgroundConfigTemplate.STILL_IMAGE, HBackgroundConfigTemplate.REQUIRED);

      bgConfiguration = (HStillImageBackgroundConfiguration)bgDevice.getBestConfiguration(bgTemplate);

      try{
      bgDevice.setBackgroundConfiguration(bgConfiguration);
      }catch(java.lang.Exception e){
      System.out.println(e.toString());
      }      

      if(debug) System.out.println("Xlet initialiseren");
      this.actueleXletContext = context;

      HSceneTemplate sceneTemplate = new HSceneTemplate();

      sceneTemplate.setPreference(HSceneTemplate.SCENE_SCREEN_DIMENSION, new HScreenDimension(1.0f, 1.0f), HSceneTemplate.REQUIRED);

      sceneTemplate.setPreference(HSceneTemplate.SCENE_SCREEN_LOCATION, new HScreenPoint(0.0f,0.0f), HSceneTemplate.REQUIRED);

      scene = HSceneFactory.getInstance().getBestScene(sceneTemplate);

    }

    public void startXlet () throws XletStateChangeException {

    agrondimg.load(this);
    if(debug) System.out.println("Xlet starten");

    EventManager manager = EventManager.getInstance();
    UserEventRepository repository = new UserEventRepository("voorbeeld");

    repository.addKey( org.havi.ui.event.HRcEvent.VK_RIGHT);
    repository.addKey( org.havi.ui.event.HRcEvent.VK_LEFT);

    manager.addUserEventListener(this, repository);

    scene.validate();
    scene.setVisible(true);
    }

    public void pauseXlet() {

    }

    public void destroyXlet(boolean unconditional)throws XletStateChangeException {
     agrondimg.flush();
    }

    public void userEventReceived(org.dvb.event.UserEvent e){

        if(e.getType() == KeyEvent.KEY_PRESSED){
        System.out.println("pushed button");
        switch (e.getCode()){

            case HRcEvent.VK_RIGHT:
                System.out.println("vk right");

                if(afbeelding == "pizza1.png"){
                afbeelding = "pizza2.png";

                System.out.println("1 naar 2");

                }else

                if(afbeelding == "pizza2.png"){
                afbeelding = "pizza3.png";

                System.out.println("2 naar 3");
                }else

                if(afbeelding == "pizza3.png"){
                afbeelding = "pizza4.png";

                System.out.println("3 naar 4");
                }else

                if(afbeelding == "pizza4.png"){
                afbeelding = "pizza1.png";

                System.out.println("4 naar 1");
                };

                break;

            case HRcEvent.VK_LEFT:
                System.out.println("vk left");

                break;

        }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:11:06.287

我认为您必须创建一个新的 HBackgroundImage 对象，因为一旦实例化文件，您就无法更改该文件。尝试：

```
agrondimg = new HBackgroundImage(afbeelding);
agrondimg.load(this);
try{
    bgConfiguration.displayImage(agrondimg);
} catch (Exception s){
    s.printStackTrace();
} 
```

在 userEventReceived() 方法的末尾。

# objective-c - 警告“使用 GNU 语句表达式扩展”

> ID：13087034
> 
> 赞同：13
> 
> 时间：2012-10-26T12:37:14.553
> 
> 标签：objective-c, cocoa-touch, compiler-construction, llvm, llvm-4.0

我有这个Objective-C指令：

```
NSRange range = NSMakeRange(i, MIN(a, b)); 
```

在哪里`a`和`b`是`NSUInteger`s。

`MIN()`是标准`NSObjCRuntime.h`头文件中定义的宏：

```
#if !defined(MIN)
   #define MIN(A,B) ({ __typeof__(A) __a = (A); __typeof__(B) __b = (B); __a < __b ? __a : __b; })
#endif 
```

在编译期间，LLVM Compiler 4.1 突出显示我的指令，显示警告：“使用 GNU 语句表达式扩展”。

这是什么意思？是我的错吗？如果是，我该如何解决？如果没有，如何删除编译器警告？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-16T21:28:50.303

我知道，这是一个迟到的答案，但您可以通过添加`-Wno-gnu`编译器标志来避免此消息。

（在 Xcode 5 中，我相信您可以通过转到项目的 Build Settings 并添加`-Wno-gnu`到“Apple LLVM 5.0 – Custom Compiler Flags”部分中的“Other C Flags”来更改此设置。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-26T12:44:22.157

“语句表达式”是 GNU C 编译器的扩展，允许您执行一组语句，返回最后一条语句的值：

```
x = ({
    statement1;
    statement2;
    statement3;
}); 
```

在上面的示例中，`x`将具有返回的值`statement3`。

这是一个方便的功能，使您能够拥有可以轻松嵌套到其他表达式中的多语句宏。但是，它不是由任何 C 标准定义的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-08-27T15:57:10.520

不要使用`-Wno-gnu`，这会关闭太多警告。相反，使用：

```
-Wno-gnu-statement-expression 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-03T00:52:30.657

声明表达式已被声明。

您可以通过使用杂注代码选择性地忽略警告，而无需更改项目设置。

```
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wgnu"

NSRange range = NSMakeRange(i, MIN(a, b));

#pragma GCC diagnostic pop 
```

# java - 我可以以编程方式从字节数组安装 Android 应用程序吗？

> ID：13087040
> 
> 赞同：4
> 
> 时间：2012-10-26T12:37:31.853
> 
> 标签：java, android

[我知道我可以通过以下传递APK](http://en.wikipedia.org/wiki/APK_%28file_format%29)文件[URI](http://en.wikipedia.org/wiki/Uniform_Resource_Identifier)的代码以编程方式安装 Android 应用程序。我可以在不传递 APK 文件 URI 的情况下安装应用程序吗？例如，获取 APK 文件的字节数组并安装它？

```
File appFile = new File("application.apk");
Intent installIntent = new Intent(Intent.ACTION_VIEW);
installIntent.setDataAndType(Uri.fromFile(appFile),"application/vnd.android.package-archive");
startActivity(installIntent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:06:34.693

当您以这种方式安装应用程序时，您实际上并没有直接安装该应用程序。发生的情况是您启动**安装程序**并将安装程序的引用传递给您要安装的 APK。安装程序不是应用程序代码的一部分，并且无法访问应用程序进程中的内存。

如果您有一个包含 APK 的字节数组，那么执行此操作的唯一方法是将字节数组写入文件，然后启动安装程序并向其传递一个指向您编写的文件的 URI。安装完成后，您可以删除该文件（以免在用户手机上留下随机垃圾）。

# php - 拥有隐藏界面的更好方法

> ID：13087044
> 
> 赞同：0
> 
> 时间：2012-10-26T12:37:44.717
> 
> 标签：php, interface, hidden, hidden-field

假设我有以下代码：

```
<?php
    $html = ' 
        <form id="formA">
            <!-- Form for user another than admin goes here /--> ';

    if ($userrole == 'admin') {
        $html .= ' <!-- Form for admin goes here /--> ';
    }

    $html .= '
            <input type="submit" value="Submit" />
        </form> ';

    print $html;
?> 
```

我认为在我们的网页上实现隐藏接口是不好的，尤其是当您尝试在其上使用`$_GET['']`时`$userrole`，因为攻击者可能会尝试滥用 URL 上的查询字符串来查看页面上是否有任何调试模板。

我知道这对开发人员来说是一个糟糕的实现，但我不知道如何安全地做这些事情。有任何想法吗？谢谢。

* * *

**更新 1**

当我尝试将`userrole`信息保存在 a 上`_SESSION`并且在页面上具有与我上面提到的相同的检查部分时是否相同，这意味着页面上仍然有隐藏的接口？

* * *

**更新 2**

假设我有这两个表：

**tbl用户**

```
UserID    UserName    UserRole
 101       Abc         1
 102       Bcd         1
 103       Cde         2 
```

**tbl角色**

```
UserRole   RoleName    V    A    U    D
 1          Admin      1    1    1    1
 2          User       1    1    0    0 
```

注：V、A、U、D 代表`VIEW`、`ADD`、`UPDATE`和`DELETE`的授权。

此代码用于检查用户对页面上查看、添加、更新或删除内容的授权（似乎与上面提到的第一个问题不同）。

然后，假设自第一次登录以来我已经保存了会话（我省略了登录和存储会话的代码 -`UserID`和`UserRole`）。我下面要做的是，检查每个授权并检查使用`if`条件。

```
$V = checkauth($_SESSION['UserRole'], 1);
$A = checkauth($_SESSION['UserRole'], 2);
$U = checkauth($_SESSION['UserRole'], 3);
$D = checkauth($_SESSION['UserRole'], 4);

if($V == 1) { //Do something here }
if($A == 1) { //Do something here }
if($U == 1) { //Do something here }
if($D == 1) { //Do something here }

function checkauth($userRole, $mode) {
    $q = " SELECT V, A, U, D FROM tblRole WHERE UserRole = '" . $userRole . "' ";
    //I omit the connection code since it's not important here (not the topic)
    $fetch = mysqli_fetch_array($r);

    switch($mode) {
        case '1': return $fetch[0]; break;
        case '2': return $fetch[1]; break;
        case '3': return $fetch[2]; break;
        case '4': return $fetch[3]; break;
    }
} 
```

代码在网页上实现是否相当安全？还是有比这更好的东西？我敢肯定有... 需要你的想法，伙计们！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:41:58.160

您应该将他们的访问级别存储在数据库中。**不在**查询字符串中，**不在**cookie 中，**也不**在会话中。当他们进入页面时，检查数据库是否有正确的访问权限，如果有，则显示正确的 html。

# javascript - 使用 AJAX 请求下载文件数据 - ruby on rails 3

> ID：13087051
> 
> 赞同：3
> 
> 时间：2012-10-26T12:37:59.413
> 
> 标签：javascript, jquery, ruby, ajax, ruby-on-rails-3

我最近了解到，我不能在 ruby​​ on rails 中使用单个 HTTP 请求下载超过 1 个文件，除非我使用 AJAX 请求。我现在正试图弄清楚如何做到这一点。

（我在 RAils 3 上使用 Prawn 作为 PDF 创建者）我的控制器中有一个操作可以呈现 PDF 并使用 send_data

```
def download_quote          
pdf = QuotesPdf.new(params)
send_data pdf.render, filename: "foo.pdf",
                    type: "application/pdf",
                    disposition: "download"
end 
```

然后我的 HTML 视图中有一个按钮，其中包含此工作 Jscript 代码

```
// AJAX, download
function ajaxRequest(){
    $.ajax({
      type: 'POST',
      url: '/download_quote/126',
      success: function(data){
        alert(data);
      }
    });
    return false;
  }

  $("#mydownload").click(ajaxRequest); 
```

当我在渲染 PDF 几秒钟后单击“#mydownload”时，我收到一个成功的警报框，里面包含所有 PDF 文件的内部数据。

问题是：如何将数据转换为 pdf 文件并自动下载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:52:15.363

我不认为“下载”是一种有效的内容处置类型。尝试改用“附件”。

[内容处置](http://en.wikipedia.org/wiki/MIME#Content-Disposition)

```
def download_quote          
    pdf = QuotesPdf.new(params)
    send_data pdf.render, filename: "foo.pdf",
        type: "application/pdf",
        disposition: "attachment"
end 
```

# logging - 嵌入式模式下的 Neo4j 日志级别

> ID：13087054
> 
> 赞同：3
> 
> 时间：2012-10-26T12:38:01.873
> 
> 标签：logging, neo4j

一般来说，我有两个问题：

1.  有没有办法在嵌入式模式下禁用日志记录？（我有一个有很多删除/写入的数据库，一段时间后日志变得很大）

2.  我可以在不损坏“主”数据库的情况下删除日志文件吗？（nioneo_logical.log.v26 等……以及 lucene 日志 lucene.log.v13 等……）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:53:32.190

Please have a look at [http://docs.neo4j.org/chunked/stable/configuration-logical-logs.html](http://docs.neo4j.org/chunked/stable/configuration-logical-logs.html)

Would that make your life easier? Those logs contain the transaction information and can most likely be deleted after a while. In a High Availability setup they play a bigger role as they are the main mean of transferring data between the HA cluster members.

nioneo_logical.log... files contain the transaction data for the nodes, relationships and all that, whereas lucene.log... contain the index transaction data.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T08:31:30.720

没有尝试过，但似乎是传递配置的合适解决方案：

```
Map<String, String> config = new HashMap<String, String>();
config.put( "keep_logical_logs", "30 days" );
// Or: config.put( "keep_logical_logs", "100M size" );
graphDb = new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(
    "target/read-only-db/location" )
    .setConfig( config )
    .newGraphDatabase(); 
```

# ruby-on-rails - Rails 创建或更新用户

> ID：13087055
> 
> 赞同：3
> 
> 时间：2012-10-26T12:38:05.553
> 
> 标签：ruby-on-rails, rails-activerecord, rails-routing

我对 Rails 非常陌生，并且有点挣扎。

我的用户遵循基本的注册、编辑流程。

我有一种情况，用户可以“部分注册”，即数据库中的用户电子邮件地址具有随机密码，因为他们通过现有用户的邀请过程放入其中。

当技术上已经存在于数据库中的受邀用户尝试注册时，我会得到“电子邮件已经存在”，因为我确实对用户对象应用了唯一性检查，并且在表上设置了唯一索引。

我确实将其关闭并在 create 方法中使用 if 语句来查看用户是否存在并检查其他值是否进行了更新或新建并保存。所有 if 条件都被忽略并创建了一个新用户。

我想要做的是使用“创建”用户的相同注册表单，以使用输入的密码和名称更新现有的“部分注册”用户（如果存在）（电子邮件地址检查），并且其他数据库标志设置为 true。如果用户确实存在但不满足条件，则加载“忘记密码”页面，或者如果用户是新用户，则创建并保存。

关于如何实现上述目标的任何帮助或建议都将是绝妙的。

谢谢

维姬

* * *

这是我的设置：

用户类

```
class User < ActiveRecord::Base
  attr_accessor :password
  attr_accessible :email, :name, :password, :password_confirmation, :tandc

  email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

  validates :name, :presence => true,
                   :length => { :maximum => 50 }

  validates :email, :presence => true,
                    :format => {:with => email_regex },
                    :uniqueness => { :case_sensitive => false }

  validates :password,  :presence => true,
                        :confirmation => true,
                        :length => { :within => 6..40 }

  validates :tandc, :presence => true

  before_save :encrypt_password
  .
  .
  .
end 
```

我有一个带有以下内容的 UsersController

```
 def new
    @user = User.new
    @title = "Sign Up"
  end

def create
 if @user.save
    sign_in @user
    redirect_to @user
 else
    @title = "Sign up"
    render 'new'
 end
end

def update
  if @user.update_attributes(params[:user])
    redirect_to @user
  else
   @title = "Edit"
   render 'edit'
  end
end
.
.
. 
```

我有意见：用户 > new.html.erb

```
<%= form_for(@user, :html => { :class => "validateUser", :name =>"edit_user"}) do |f| %>
  .
  .
  .
  form stuff here
  .
  .
  .
<% end %> 
```

和用户 > edit.html.erb

```
 <%= form_for(@user, :html => { :class => "validateUser", :name =>"edit_user"}) do |f| %>
  .
  .
  .
  form stuff here
  .
  .
  .
  <% end %> 
```

我的用户路线如下

```
 users GET    /users(.:format)                users#index
          POST   /users(.:format)                users#create
 new_user GET    /users/new(.:format)            users#new
edit_user GET    /users/:id/edit(.:format)       users#edit
     user GET    /users/:id(.:format)            users#show
          PUT    /users/:id(.:format)            users#update
          DELETE /users/:id(.:format)            users#destroy 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:17:29.090

一个快速但不优雅的解决方案可能是：

```
def create
 if user = User.find_by_email(params[:user][:email])
    if user.part_registered?
       user.update_attributes(params[:user])
       user.save
       sign_in user
       redirect_to user
    else
       @user = User.new(params[:user])
       if @user.save
       # just to trigger the error messages ...
       else
          @title = "Sign up"
          render 'new'
       end
    end
 else
    @user = User.new(params[:user])
    if @user.save
       sign_in @user
       redirect_to @user
    else
       @title = "Sign up"
       render 'new'
    end
 end
end 
```

抱歉，我现在没有时间优化这些条件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T13:18:05.273

首先，*不要删除用户电子邮件上的唯一索引*。如果您使用它作为模型的自然密钥，您需要它是唯一的，也就是使用它登录。

问问自己，邀请的意义何在？我有一个偷偷摸摸的怀疑创建一个新用户并不是你想要应用程序做的事情......如果用户从不接受邀请的邀请人怎么办？

相反，您可以使用用户的电子邮件和邀请者（如果这是邀请的目的）创建一个 Invitation 对象。然后您可以提供一个链接，将邀请作为参数传递：`<%= link_to new_user_url, email: invitation_email_here %>`并将该链接放入电子邮件中给受邀用户。

您可以传入值以`users/new.html.erb`使用电子邮件预先填写表单：

`<%= f.email_field :email, value: params[:email] %>`

* * *

另外，我会把你的表格放在一个部分，不要重复你自己。

form_for 的工作方式，如果@user 是新的，它将`create`向UsersController 的操作发出一个带有填充值的POST 请求。如果@user 是现有模型，它将使用现有值填充表单，向用户控制器的`update`操作发出 PUT 请求。

长话短说`edit`和`new`视图可以有相同的形式。要简单地显示相同的表单，请在 users/veiws 目录中创建一个部分。

```
<!-- app/views/users/_form.html.erb -->
<%= form_for(@user, html: { class: "validateUser" }) do |f| %>
  ...
<% end %> 
```

然后在要放置表单的视图中，放置`<%= render 'users/form' %>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T13:20:15.737

您可以使用类似的东西`User.find_or_initialize_by_email(:email => params[:user_email])`来获取 User 对象。

基本上，`find_or_initialize`将尝试从数据库中获取用户，如果它无法获取任何内容，它将创建一个新的，您可以稍后保存。

获得 User 对象后，您可以对其字段执行任何操作，然后将结果保存到数据库中（更新旧条目或创建新条目）。

（注意：如果你想检查用户之前是否存在，使用`.persisted?`返回的对象`find_or_initialize`，这将返回一个布尔值，告诉你它是否已经在数据库中。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-26T13:22:09.127

当有人在网站上注册时，您可以在他们登录之前发送一封帐户验证电子邮件。该电子邮件包含一个带有系统生成令牌的链接（例如“User.token”）。当他们单击链接时，您的 verification_controller 会通过他们的令牌检索用户并让他们设置密码。

```
# In class User < ActiveRecord::Base
# Give the user a unique, random token
user.token = SecureRandom.urlsafe_base64(20)

# In class VerificationsController < ApplicationController
# Retrieve the user with their token
@user = User.find_by_token(params[:token]) 
```

现在让我们考虑你的情况。当受邀用户在接受邀请之前尝试注册时，您仍然可以发送帐户验证电子邮件。现在他们有两封电子邮件：1）来自邀请和 2）来自他们的注册。没关系...他们只需单击链接并设置密码。

您可能希望使令牌过期，因为它提供了访问帐户的方法。一个流行的身份验证框架 [AuthLogic](https://github.com/binarylogic/authlogic)有一个很有帮助的[密码重置教程](http://www.binarylogic.com/2008/11/16/tutorial-reset-passwords-with-authlogic/)。它展示了一种类似的技术，并可能为您的手工构建解决方案提供一些想法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T13:13:24.387

你可以试试 users_controller.rb

```
def edit
  @user = User.find(params[:id])
end

def update
  @user = User.find(params[:id])

  respond_to do |format|
    if @user.update_attributes(params[:user])
      format.html { redirect_to @collection, notice: 'User was successfully updated.'}
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
```

添加链接到您的视图

```
<%= link_to content_tag(:span, "Edit"), edit_user_path(@user), :class => 'edit' %> 
```

在 new.html.erb 中删除表单并添加

```
<%= render 'form' %> 
```

（这将呈现您将添加表单代码的部分）

创建 _form.html.erb 并将表单代码添加到此

然后创建您的 edit.html.erb 视图并添加代码

```
<%= render 'form' %> 
```

# magento - 如何在 magento admin 的选项卡下添加第二个网格？

> ID：13087056
> 
> 赞同：1
> 
> 时间：2012-10-26T12:38:07.010
> 
> 标签：magento, tabs, grid, admin

我正在开发一个新的 Magneto 模块。
对于我的管理面板，我制作了一个网格“A”，我想在网格“A”的一个选项卡下添加一个网格“B”。
就像产品网格下的追加销售网格一样。
我做了很多搜索，但我没有找到有趣的东西。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:55:19.420

那个网格叫做 Grid Serializer Block，你可以在这里找到一个很好的教程：

[http://magebase.com/magento-tutorials/understanding-the-grid-serializer-block/](http://magebase.com/magento-tutorials/understanding-the-grid-serializer-block/)

我也遵循同样的方法。

希望这个帮助！

# ios - 仅通过 Wifi 测试连接 iOS

> ID：13087057
> 
> 赞同：1
> 
> 时间：2012-10-26T12:38:09.240
> 
> 标签：ios, xcode, networking, wifi

我有一个方法实现了测试我的 iOS 应用程序中的互联网连接。问题是，我只想要通过 wifi 测试互联网连接的方法，而不是蜂窝网络。我怎么做？:-) PS 我正在使用最新版本的 Xcode 和 iOS 6。

```
NSURL *scriptUrl = [NSURL URLWithString:@"http://10.247.245.87/stores/test.html"];
NSData *data = [NSData dataWithContentsOfURL:scriptUrl];
if (data != nil){
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle: @"Success"
                                                   message: @"You're connected to the server"
                                                  delegate: self
                                         cancelButtonTitle: @"Close"
                                         otherButtonTitles:nil];

//Show Alert On The View
[alert show];
}

else {
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle: @"Connection Failed"
                                                   message: @"Please connect to network and try again"
                                                  delegate: self
                                         cancelButtonTitle: @"Close"
                                         otherButtonTitles:nil];

//Show Alert On The View
[alert show];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:41:06.963

你看过可达性类吗？

[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

它可能会为您提供更多的灵活性，如果 Apple 已经完成了这项工作，为什么还要自己推出 :) 希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T12:44:01.200

检查 [托尼百万可达性类](https://github.com/tonymillion/Reachability)

必须有一种`isReachableViaWiFi`方法只能检查wifi

```
// allocate a reachability object
Reachability* reach = [Reachability reachabilityWithHostname:@"www.google.com"];

// tell the reachability that we DONT want to be reachable on 3G/EDGE/CDMA
reach.reachableOnWWAN = NO; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T13:15:21.977

AFNetworking 提供检查网络连接的设施 -

```
AFNetworkReachabilityManager.sharedManager().setReachabilityStatusChangeBlock { (status: AFNetworkReachabilityStatus) -> Void in
        // check your connectivity...
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T12:44:46.323

你有没有看过这个类似的问题：

[如何在 iOS 或 OSX 上检查活动的 Internet 连接？](https://stackoverflow.com/questions/1083701/how-to-check-for-an-active-internet-connection-on-iphone-sdk)

投票率最高的问题提供了一个简洁的解决方法的 github 链接，并显示互联网连接是否通过 wifi 或 WWAN（蜂窝）处于活动状态

# c# - 将 SQL Server 数据事件用于消息传递

> ID：13087058
> 
> 赞同：13
> 
> 时间：2012-10-26T12:38:09.170
> 
> 标签：c#, sql-server-2005, rabbitmq

在我们的组织中，我们有一个 SQL Server 2005 数据库和相当数量的数据库客户端：网站（php、zope、asp.net）、富客户端（legacy fox pro）。现在我们需要将核心数据库中的某些事件传递给其他系统（MongoDb、LDAP 等）。消息传递范式似乎非常有能力解决这类问题。所以我们决定使用 RabbitMQ 代理作为中间件。

最初从数据库消费事件的问题似乎只有两种可能的解决方案：

1.  轮询数据库以获取传出消息并将它们传递给消息代理。
2.  在某些表上使用触发器将消息传递到同一台机器上的代理。

由于涉及定期执行 sql 时出现的延迟问题，我不喜欢第一个想法。

但是基于事件的触发方法有一个问题，目前我似乎无法解决。考虑这种情况：

1.  将一行插入到表中。
2.  触发器触发并发送消息（使用 C# 编写的 CLR 存储过程）

除非写数据的事务被回滚，否则一切正常。在这种情况下，数据将是一致的，但消息已经发送并且无法回滚，因为触发器在写入数据库日志时触发，而不是在事务提交时触发（这是 RDBMS 的正确行为） .

我现在意识到我对触发器的要求太多了，它们不适合处理数据以外的任务。

所以我的问题是：

1.  有没有人设法使用触发器提取数据事件？
2.  您还能建议哪些其他使用数据事件的方法？
3.  查询通知（建立在 Service Broker 之上）是否适合我的情况？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T13:13:59.407

以免首先从等式中剔除明显的不合适之处：查询通知不适用于此技术，因为它旨在解决相对稳定数据的缓存失效问题。使用 QN，您将只知道该表已更改，但您无法知道*发生了什么*更改。

感谢您弄清楚为什么触发器调用 SQLCRL 不起作用：回滚时一致性被破坏。

那么有什么*作用*呢？考虑一下：[BizTalk Server](http://www.microsoft.com/biztalk/en/us/default.aspx)。换句话说，围绕这个问题空间建立了一个完整的业务，并且解决方案远非微不足道（否则没有人会*购买*这样的产品）。

尽管遵循一些原则，你可以走得很远：

*   **解耦**。基于事件的触发器可以，但不要从触发器发送消息。除了回滚的一致性问题之外，您还存在每个 DML 操作现在等待外部 API 调用（RabbitMQ 发送）的延迟问题和外部 API 调用失败的可用性问题（如果 RabbitMQ 不可用，则您的数据库不可用）。解决方案是让触发器使用普通[表作为队列](http://rusanu.com/2010/03/26/using-tables-as-queues/)，触发器将在本地数据库队列中加入一条消息（即插入到该表中），并且外部进程将通过使消息出队来服务该队列（即从表）并将它们转发到 RabbitMQ。这将事务与 RabbitMQ 操作解耦（外部进程能够*看到*仅当原始 xact 提交时才发送消息），但代价是一些明显增加的延迟（涉及额外的跃点，本地表充当队列）。
*   **幂等性**。由于 RabbitMQ 无法使用数据库注册分布式事务，因此您无法保证 DB 操作（从本地表中出列充当队列）和 RabbitMQ 操作（发送）的原子性。当另一个失败时，任何一个都可以成功，并且如果没有明确的分布式事务注册支持，根本无法绕过它。这意味着应用程序*将*每隔一段时间发送一次重复的消息（通常是当事情由于某种原因已经变坏时）。快速提醒一下：加入显式“确认”消息并发送序列号的行为是一场失败的战斗，因为您很快就会发现您正在重新发明 TCP 在消息传递之上，这条道路铺满了主体。
*   **宽容**。出于与上述项目相同的原因，有时您认为发送的消息永远不会发送。同样，这造成的损害完全是业务特定的。问题不在于如何防止这种情况（几乎不可能......），而是如何*检测*这种情况以及如何处理。恐怕没有灵丹妙药。

您在传递 Service Broker 时确实提到了（支持查询通知的事实是它最不感兴趣的方面......）。作为内置于 SQL Server 中的消息传递平台，它提供 Exactly Once In Order 交付保证并且完全交易，它将解决上述所有痛点（您可以[`SEND`](http://msdn.microsoft.com/en-us/library/ms188407.aspx)从触发器中不受惩罚，您可以使用[Activation](http://msdn.microsoft.com/en-us/library/ms171617%28v=sql.105%29.aspx)为了解决延迟问题，您将永远不会看到重复或丢失的消息，有明确的错误语义）和我之前没有提到的其他一些痛点（备份/恢复的一致性，因为数据和消息是相同的存储单元 - 数据库、HA/DR 故障转移的一致性，因为 SSB 支持数据库镜像和集群等）。缺点是 SSB 只能与另一个 SSB 服务通信，换句话说，它只能用于在两个（或多个）SQL Server 实例之间交换消息。任何其他用途都需要双方使用 SQL Server 来交换消息。但是，如果您的端点都是 SQL Server，那么请考虑[使用 Service Broker 进行一些大规模部署](http://rusanu.com/2011/06/01/scale-out-sql-server-by-using-reliable-messaging/)。请注意，像 php 或 asp.net 这样的端点*可以*被认为是 SQL Server 端点，它们只是 DB API 之上的编程层，例如，不同的端点需要将消息从手持设备（电话）直接发送到数据库（而且 99% 的时间都过去了）通过 Web 服务，这意味着它们最终可以访问 SQL Server）。另一个考虑因素是 SSB 面向[吞吐量](http://rusanu.com/2006/10/16/writing-service-broker-procedures/)和可靠交付，*而不是*低延迟。例如，绝对不是用于在 HTTP Web 请求中取回响应的技术。是一种用于提交处理由 Web 请求触发的内容的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-05T01:44:46.717

Remus 的回答列出了一些用于生成和处理事件的合理原则。您可以从触发器启动事件推送以实现低延迟。

您可以通过触发器实现一切所需。我们仍将其**解耦**为两个组件：生成事件的触发器和读取事件的本地读取器。

第一个组件是触发器。

*   制作一个 CLR 触发器，准备在事务提交时需要执行的操作。
*   创建一个`System.Transactions.IEnlistmentNotification`始终同意准备好的，并且其`void Commit(System.Transactions.Enlistment)`方法执行准备好的操作。
*   在触发器中，调用`System.Transactions.Transaction.Current.EnlistVolatile(enlistmentNotification, System.Transactions.EnlistmentOptions.None)`

您将希望您的操作简短而甜蜜，例如将数据附加到内存中的无锁队列或更新内存中的某些其他状态。不要尝试与其他机器或进程通信。不要写入磁盘（如果您想写入磁盘，只需制作一个插入到队列表中的普通触发器）。您需要小心确保您的程序集只加载一次，以便任何共享的静态状态都是唯一的；如果您的静态处于未被其他程序集引用的顶级程序集中，这是最容易做到的，因此没有其他程序集会尝试加载它。

您还需要

*   以这样的方式初始化您的状态，即使系统重新启动而没有发送所有先前排队的消息，它也是正确的（因为内存中的短队列不会持久）。这意味着您可能正在重新发送消息，因此它们需要是**幂等**的。或者
*   依靠另一个组件的**容忍度**来接收丢失的消息

第二个组件读取由触发器更新的状态。制作一个单独的 CLR 组件，该组件从您的队列或状态中读取数据，并执行您需要完成的任何操作（例如将幂等消息发送到消息传递系统，记录它已发送，等等）。如果这个组件可能失败（提示：它可以），您将需要某种形式的**容差**，它可能属于另一个系统。当新状态可用时，您可以通过将触发信号作为第二个组件来实现低延迟。

一种架构可能性是让触发器在提交时将事件放入内存中，以便另一个低延迟组件接收并让第二个组件发送幂等消息的低延迟、低可靠性副本。您可以将其与更可靠或更持久的消息传递系统（例如 SSB）配对，该系统将可靠且持久地发送相同的幂等消息，但延迟更大。

# emacs - aquamacs 上的常见 lisp 自动完成

> ID：13087065
> 
> 赞同：7
> 
> 时间：2012-10-26T12:38:41.057
> 
> 标签：emacs, autocomplete, lisp, common-lisp, aquamacs

当我启动安装了自动补全程序的 aquamacs 时，[http:](http://cx4a.org/software/auto-complete/)`el` //cx4a.org/software/auto-complete/ 带有一个扩展名为 ( `example.el`)的 lisp 文件，
然后所有 lisp 功能都被加载到其中，`aquamacs`包括自动补全。
但是当我加载一个普通的 lisp 文件 ( `example.lisp`) 时，没有加载自动完成功能。

所以我的问题是，是否可以更改自动完成代码以便识别常见的 lisp 文件？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:07:31.037

从自动完成手册：

> ### `auto-complete-mode`为特定模式自动启用
> 
> `auto-complete-mode`对于不在`ac-modes`. 所以必要时需要设置：

```
(add-to-list 'ac-modes 'brandnew-mode) 
```

或者在你的情况下

```
(add-to-list 'ac-modes 'lisp-mode) 
```

仅供参考。默认情况下包括以下模式

```
(defcustom ac-modes
  '(emacs-lisp-mode
    lisp-interaction-mode
    c-mode cc-mode c++-mode
    java-mode clojure-mode scala-mode
    scheme-mode
    ocaml-mode tuareg-mode
    perl-mode cperl-mode python-mode ruby-mode
    ecmascript-mode javascript-mode js-mode js2-mode php-mode css-mode
    makefile-mode sh-mode fortran-mode f90-mode ada-mode
    xml-mode sgml-mode)
  "Major modes `auto-complete-mode' can run on."
  :type '(repeat symbol)
  :group 'auto-complete) 
```

# xslt - XSLT 中的应用模板与下一个匹配

> ID：13087066
> 
> 赞同：2
> 
> 时间：2012-10-26T12:38:42.210
> 
> 标签：xslt, xslt-2.0

给定这样的 XML：

```
<a id="1">
  <b>
    <code>42</code>
  </b>
</a> 
```

目标是：

```
<request>
  <aId>1</aId>
  <bCode>42</bCode>
</request> 
```

我可以使用这个 XSLT 来实现：

```
<template match="/">
  <element name="request">
    <apply-templates/>
  </element>
</template>

<template match="a">
  <element name="aId"><value-of select="@id"/></element>
  <apply-templates/>
</template>

<template match="b/code">
  <element name="bCode"><value-of select="."/></element>
</template> 
```

但是，如果我`<apply-templates/>`用`<next-match/>`. 有什么建议可以在什么时候使用，什么时候它们似乎都可以正常工作？例如，如果我稍后添加更多内容，是否`next-match`有其他效果可能会搞砸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:48:05.863

那么在这种情况下，您的使用`next-match`依赖于内置元素模板`apply-templates`（参见[http://www.w3.org/TR/xslt20/#built-in-rule](http://www.w3.org/TR/xslt20/#built-in-rule)）。一旦您为元素添加了模板，例如

```
<xsl:template match="*">
  <xsl:copy>
    <xsl:apply-templates/>
  </xsl:copy>
</xsl:template> 
```

将`next-match`不再使用内置模板，它什么都不做`apply-templates`，只会选择上面添加结果节点的模板。

因此，对于您的代码，我将继续使用`apply-templates`.

# asp.net - 无法覆盖 web.config 中的 clientCache@cacheControlMaxAge

> ID：13087069
> 
> 赞同：0
> 
> 时间：2012-10-26T12:38:52.043
> 
> 标签：asp.net, caching, web-config

我的 web.config 中有以下内容：

```
<clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="30.00:00:00" cacheControlCustom="public"></clientCache> 
```

但是，浏览器会在响应中报告以下内容：

```
Cache-Control:public,max-age=86400 
```

更奇怪的是，applicationHost.config 如下：

```
<clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="7.00:00:00" /> 
```

所以我不确定86400（1天）来自哪里，以及如何覆盖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:49:02.303

感谢[Mamba Dai](http://forums.iis.net/p/1192707/2040588.aspx/1?Re+Can+t+override+clientCache+cacheControlMaxAge)在[forums.iis.net](http://forums.iis.net)上的回复，我发现网站根目录下的虚拟目录有自己的缓存到期设置，这是最重要的值的来源。

# java - java查找PostgreSQL服务器是否正在运行

> ID：13087071
> 
> 赞同：0
> 
> 时间：2012-10-26T12:39:00.863
> 
> 标签：java, postgresql

是否可以通过 java 代码找到 PostgreSQL 服务器是否正在运行？我力图在 net.xml 中找到任何相关的解决方案。任何建议都非常感谢。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:42:16.047

**有点有趣，但它会起作用，如果服务器没有运行，这里的用户名、密码和 url 必须正确，你会得到*Failed to make connection*检查输出控制台**

```
 try {
        Class.forName("org.postgresql.Driver");

        Connection connection = DriverManager.getConnection(
                    "jdbc:postgresql://127.0.0.1:5432/testdb", "username",
                    "password");

          if (connection != null) {
                System.out.println("You made it, take control your database now!");
            } else {
                System.out.println("Failed to make connection!");

        }

    } catch (Exception e) {

        System.out.println("Connection Failed! Check output console");
        e.printStackTrace();
        return;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:52:41.437

如果足以让您检查 PostgreSQL 服务器的 HOST+PORT 可用性，您可以执行以下操作：

```
public static boolean psqlAvailable(String host, int port) {
    boolean ret = false;
    try {
        Socket s = new Socket(host, port);
        ret = true;
        s.close();
    } catch (Exception e) {
        // 
    }
    return ret;
} 
```

不过，它可能会很慢。要使用它：

```
// assuming these are IP+PORT configuration on your PostgreSQL server.
boolean psql = psqlAvailable("192.168.16.1", 5432); 
```

# wcf - 启用 WCF 读取已经存在的 MSMQ 队列

> ID：13087078
> 
> 赞同：3
> 
> 时间：2012-10-26T12:39:31.733
> 
> 标签：wcf, c#-4.0, msmq

我使用 .Net Framework 4.0 开发了 WCF 自托管服务。

```
[ServiceContract(SessionMode=SessionMode.Required)]
[ServiceKnownType(typeof(XmlDocument))]
public interface IMyMSMQ
{
    [OperationContract(IsOneWay=true, Action="*")]
    void OnMessageReceived(MsmqMessage<XmlDocument> msg);
} 
```

这个接口的我的类实现看起来像这样。

```
public class MyMSMQ : IMyMSMQ, IErrorHandler 
{
    public void OnMessageReceived(MsmqMessage<XmlDocument> msg)
    {
      // Log Message To appropriate destination
      Logger.LogMessage(msg);
    }
} 
```

我尝试了多种场景。

场景一：

1.  启动服务。
2.  启动客户端应用程序。
3.  使用客户端应用程序将消息发送到队列
4.  请注意，队列似乎没有填充消息，因为服务已经读取了消息。
5.  请注意，服务中没有其他任何事情发生。
6.  再发一条消息
7.  请注意，消息留在队列中

场景 #2：这与场景 1 类似，但启动应用程序的顺序不同

1.  启动客户端应用程序。
2.  使用客户端应用程序将消息发送到队列
3.  请注意，队列似乎确实填充了消息，因为服务没有启动并且没有读取消息。
4.  启动服务。
5.  请注意，该消息消失了。
6.  请注意，服务中没有其他任何事情发生。
7.  再发一条消息
8.  请注意，消息留在队列中

每次服务启动时，都会从队列中删除一条消息，因此，我的服务似乎实际上正在读取该消息，但是一旦读取该消息，它就无法确定将其发送到何处或如何处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:19:34.663

我发现 WCF 库中的代码不是问题所在。这就是我定义端点绑定的方式。

```
 MsmqIntegrationBinding binding = new MsmqIntegrationBinding(MsmqIntegrationSecurityMode.None);
            binding.ReceiveTimeout = new TimeSpan(0, 1, 0);  // set timeout to 1 minute.
            binding.ReceiveErrorHandling = ReceiveErrorHandling.Fault;

            this.AddServiceEndpoint(typeof(eRxMsmqWCF.IeRxMSMQ), binding, GetMQUri()); 
```

它需要具有`MsmqIntegrationBinding`( 这要求您包含以下 using 语句： `using System.ServiceModel.MsmqIntegration;`.

有时我过于依赖智能感知。在其他绑定所在的`MsmqIntegrationBinding`标准下不存在。`System.ServiceModel`所以我改用了`NetMsmqBinding`。

# javascript - jqueryUI 可排序：未捕获的错误：HIERARCHY_REQUEST_ERR：DOM 异常 3

> ID：13087080
> 
> 赞同：0
> 
> 时间：2012-10-26T12:39:40.083
> 
> 标签：javascript, jquery, jquery-ui-sortable, domexception

我一直在使用本教程构建一个页面，我们可以在其中重新排序和移动页面上的 div：http: [//net.tutsplus.com/tutorials/javascript-ajax/inettuts/](http://net.tutsplus.com/tutorials/javascript-ajax/inettuts/)

我已对其进行了修改，以便能够在页面上动态添加一些 div，但是在尝试重新排序/移动某些 div 时，有时会收到此错误：未捕获错误：HIERARCHY_REQUEST_ERR：DOM Exception 3。

这是我的html：

```
<div id="columns">
<ul id="column1" class="column">
</ul>
<ul id="column2" class="column">
</ul>
<ul id="column3" class="column">
</ul>
<ul id="column4" class="column">
</ul> 
```

​</p>

这是js：

```
$('.column').sortable({
    items: $('li', '.column'),
    connectWith: '.column',
    handle: '.widget-head',
    placeholder: 'widget-placeholder',
    forcePlaceholderSize: true,
    containment: 'document',
    start: function(e, ui) {
        $(ui.helper).addClass('dragging');
    },
    stop: function(e, ui) {
        $(ui.item).css({
            width: ''
        }).removeClass('dragging');
        $('.column').sortable('enable');
    }
    });

$('#addAWidget').on('click', function(event) {
    var newWidget = '<li class="widget color-white"><div class="widget-head"><h3>Newly         added widget</h3></div><div class="widget-content"><p>Yet another lorem ipsum !</p></div>    </li>';
    $(newWidget).appendTo('#column' + $('#columnNumber').val()).sortable({
        items: $('> li', '.column'),
        connectWith: '.column',
        handle: '.widget-head',
        placeholder: 'widget-placeholder',
        forcePlaceholderSize: true,
        containment: 'document',
        start: function(e, ui) {
            $(ui.helper).addClass('dragging');
        },
        stop: function(e, ui) {
            $(ui.item).css({
                width: ''
           }).removeClass('dragging');
            $('.column').sortable('enable');
        }
    });
}); 
```

这是我的（简化的）代码：http: [//jsfiddle.net/XnEwg/5/](http://jsfiddle.net/XnEwg/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:37:50.813

Sortable 应该只在项目容器上初始化一次，添加新项目时不需要做任何事情。选项也`items`应该是字符串（选择器）而不是元素数组。这是您的代码的简化工作版本：

```
$('.column').sortable({
    items: '> li',
    connectWith: '.column',
    handle: '.widget-head',
    placeholder: 'widget-placeholder',
    forcePlaceholderSize: true,
    revert: 300,
    delay: 100,
    opacity: 0.8,
    containment: 'document',
    start: function(e, ui) {
        $(ui.helper).addClass('dragging');
    },
    stop: function(e, ui) {
        $(ui.item).css({
            width: ''
        }).removeClass('dragging');
    }
});

$('#addAWidget').on('click', function(event) {
    var newWidget = '<li class="widget color-white"><div class="widget-head"><h3>Newly added widget</h3></div><div class="widget-content"><p>Yet another lorem ipsum !</p></div></li>';
    $(newWidget).appendTo('#column' + $('#columnNumber').val());
}); 
```

[小提琴](http://jsfiddle.net/BHrBw/)

# security - postgres公共架构的不安全默认值？

> ID：13087084
> 
> 赞同：5
> 
> 时间：2012-10-26T12:39:52.387
> 
> 标签：security, postgresql

问题基本上归结为：如何在 postgres 上安全地创建新数据库，这意味着默认情况下，没有人对新数据库拥有任何特权，并且必须明确定义所有访问权限。

我尝试了互联网上的各种资源，但无法得到明确的答案。我在带有 postgres 9.1 的 fedora 17 linux 上尝试过这个，但最终会在带有 postgres 8.4 的 redhat 6.3 上使用它。

过程：

1.  安装 postgres，运行 initdb，启动服务器
2.  与 postgres 超级用户在本地连接
3.  使用选项 createdb 和 createrole 创建新用户 u1
4.  断开并重新连接为 u1
5.  创建数据库 db1
6.  创建用户 u2
7.  断开并重新连接为 u2
8.  在 db1 中创建表 t1

我不指望最后一步会成功。u2 没有在 db1 上获得任何特权，并且在查询数据库或模式时也没有显示任何特权。据我了解，由于公共模式和内置公共角色的默认权限，u2 可以在 db1 上创建表。如果我想撤销它们，我只能在数据库上这样做，但不能在架构上这样做，因为它归 postgres 所有。所以最终我必须为我创建的每个新数据库都用一个超级用户撤销这些权限。我不能将它委托给数据库的所有者，而且我不能忘记对每个新数据库都这样做。

默认值将允许每个用户在任何新数据库中向公共模式发送垃圾邮件。这很危险，因为默认情况下其他用户可能在公共模式上工作，而不检查表是否已经存在，而只是使用某个陌生人拥有的现有表。

我该如何解决这些不安全的默认设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T13:05:57.600

您可以撤销`template1`数据库中的公共架构“创建”权限，默认情况下这将传播到任何新创建的数据库：数据库是通过复制创建的`template1`（或其他一些标记为模板的数据库，但这`template1`是默认设置）。

实际上，您可能希望`public`在这种情况下完全删除模式，并将创建它的作业（如果需要）委托给数据库所有者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T13:46:40.857

当我需要安全数据库时，我使用了这篇文章：

[PostgreSQL 数据库中的全面安全性](http://www.ibm.com/developerworks/opensource/library/os-postgresecurity/index.html)

# php - Composer - 仅在开发环境中运行脚本

> ID：13087088
> 
> 赞同：38
> 
> 时间：2012-10-26T12:40:01.587
> 
> 标签：php, jenkins, composer-php

这是我的 composer.json 文件：

```
"require": {
    "php": ">=5.4",
    "zendframework/zendframework": "2.*",
    "doctrine/doctrine-module": "dev-master",
    "doctrine/doctrine-orm-module": "0.*",
    "gedmo/doctrine-extensions": "dev-master"
},
"require-dev": {
    "phpunit/phpunit": "3.7.*"
},
"scripts": {
    "post-update-cmd": [
        "rm -rf vendor/Behat",
        "git clone git://github.com/Behat/Behat.git",
        "cp composer.phar Behat/composer.phar",
        "cd Behat && git submodule update --init",
        "cd Behat && php composer.phar install",
        "cd Behat && php composer.phar require guzzle/guzzle:3.0.*",
        "mv Behat vendor/Behat",
        "ln -sf ../Behat/bin/behat vendor/bin/"
    ]
} 
```

我怎样才能使脚本只在开发环境中运行？

基本上我希望脚本仅在我调用时运行：

```
php composer.phar update --dev 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-26T13:00:45.223

要在不触发任何脚本的情况下进行非开发环境更新，请使用[命令`--no-scripts`行开关`update`命令](http://getcomposer.org/doc/03-cli.md#update)：

```
php composer.phar update --no-scripts
                         ^^^^^^^^^^^^ 
```

默认情况下，Composer 脚本仅在基本包中执行。因此，您可以拥有一个用于开发的包，并在实时环境中使其成为实时系统的依赖项。

除此之外，我看不到任何自动区分脚本的方法。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-10-27T14:01:17.047

**介绍**

有些答案有点简短，并没有详细介绍完成此操作的上下文。看了前面的回答后还有疑惑的朋友，我想和大家分享一些知识。

**为您确定正确的选择**

首先，花点时间意识到您正在有效地创建一个不同的流程，特定于某个环境（即您的开发服务器/容器）。这违反了任何最佳实践，因为它通常容易出错。话虽如此，您可以通过多种方式实现您想要的；

**不触发任何脚本**（[文档](https://getcomposer.org/doc/03-cli.md#install-i)）

如果在某些环境中您不想触发任何脚本，您可以使用该`--no-scripts`标志来阻止这种情况。

文档内容如下`--no-scripts`：：跳过 composer.json 中定义的脚本的执行。

```
composer upgrade --no-scripts 
```

这在您的代码当前不工作时升级软件包时特别有用。如果您唯一的脚本是开发和测试相关的，它也可以工作。

**单独运行一个脚本**（[文档](https://getcomposer.org/doc/articles/scripts.md#running-scripts-manually)）

只需根据需要运行特定命令：

```
composer run-script [--dev] [--no-dev] script 
```

当您只想在特定场合运行脚本时，这很有用。

例如，在运行任何测试之前必须执行某个脚本的构建系统上；构建系统提供配置选项来调用像上面这样的自定义脚本。

**在命令中定义条件**（[文档](https://getcomposer.org/doc/articles/scripts.md#defining-scripts)）

文档内容如下：*在作曲家安装或更新过程中，一个名为的变量`COMPOSER_DEV_MODE`将被添加到环境中。如果命令使用 --no-dev 标志运行，则此变量将设置为 0，否则将设置为 1。*

一个例子可能看起来像

```
"scripts": {
    "post-install-cmd": [
         "[ $COMPOSER_DEV_MODE -eq 0 ] || <your command>"
    ]
} 
```

如果您使用容器，我个人会说这是**推荐的方式。**

*注意：这在 Windows 上不起作用，因为它需要`%COMPOSER_DEV_MODE%`.*

还有一些包（如[neronmoon 的 scriptsdev](https://github.com/neronmoon/scriptsdev)）可以帮助您实现相同的目标，而无需在所有命令中键入上述内容，使用composer.json`dev-scripts`部分中的部分`extra`

**在 PHP 脚本中定义条件**（[文档](https://getcomposer.org/doc/articles/scripts.md#defining-scripts)）

调用 PHP 方法，该方法会根据您的应用程序已经执行此操作的方式检查您的环境。您甚至可以通过将其与上述方法组合来重用此条件；“在命令中定义条件”。

```
"scripts": {
    "post-update-cmd": [
        "AppNameSpaceName\\YourClassName::methodName"
    ]
} 
```

然后，您可以继续创建类，如下所示：

```
<?php

namespace AppNameSpaceName;

class YourClassName 
{
    methodName() {
         // do stuff
    }
} 
```

在许多现代框架中，已经存在一种确定应用程序运行时环境的机制（[Symfony 方式](https://symfony.com/doc/current/components/dotenv.html)、[Laravel 方式](https://laravel.com/docs/5.7/configuration#environment-variable-types)）。

**纱线运行**（[文档](https://yarnpkg.com/lang/en/docs/cli/run/)）

由于现在大多数 PHP 应用程序也转换它们的 javascript 文件，因此将安装 NPM 或 Yarn。您可以使用脚本部分仅在开发机器/容器上运行此部分。例如：

```
yarn run dev-only-script 
```

在 package.json 中有一个部分

```
"scripts": {
    "dev-only-script": "rm some/folder && ln -s path/to/your/folder some/"
} 
```

重点是对您的 composer.json 进行清理。在 yarn 中，你可以有`dev-server`,`test`和`build`.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-26T09:29:57.837

无法为默认安装和**--dev 选项**选择不同的脚本，但您可以使用**Composer\Script\Event**中的**isDevMode()**方法仅在开发环境中运行命令。[http://getcomposer.org/apidoc/master/Composer/Script/Event.html](http://getcomposer.org/apidoc/master/Composer/Script/Event.html)

 *** * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-09-05T10:16:44.023

您可以使用[COMPOSER_DEV_MODE](https://getcomposer.org/doc/articles/scripts.md#defining-scripts)环境变量（版本 1.3.0-RC - 2016-12-11 中的新增功能）：

```
"scripts": {
    "post-install-cmd": [
        "[ $COMPOSER_DEV_MODE -eq 0 ] || echo devmode only"
    ]
}, 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-07-18T14:31:40.587

您可以通过为 dev 路径设置自定义脚本来实现相同的效果，而不是使用`post-update-cmd`钩子。

```
"scripts": {
    "update-behat": [
        "rm -rf vendor/Behat",
        "git clone git://github.com/Behat/Behat.git",
        "cp composer.phar Behat/composer.phar",
        "cd Behat && git submodule update --init",
        "cd Behat && php composer.phar install",
        "cd Behat && php composer.phar require guzzle/guzzle:3.0.*",
        "mv Behat vendor/Behat",
        "ln -sf ../Behat/bin/behat vendor/bin/"
    ],
    "dev-update": [
        "@composer update --dev",
        "@update-behat"
    ]
} 
```

然后简单地运行`php composer.phar dev-update`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-20T09:15:18.553

这是您可以用来执行此操作的小包 [https://github.com/neronmoon/scriptsdev](https://github.com/neronmoon/scriptsdev) 它增加了定义 only-dev 脚本的能力。用法

```
...
"extra": {
    "scripts-dev": {
    "post-install-cmd": [
        "npm install --dev"
    ],
    "post-update-cmd": "php ./someCoolCommand.php"
    },
}
... 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-02-13T07:47:41.753

运行以下命令。

```
 composer update --no-scripts 
```**

# linux - 从 Windows 到 linux 的 RPC

> ID：13087092
> 
> 赞同：16
> 
> 时间：2012-10-26T12:40:08.907
> 
> 标签：linux, winapi, rpc, dcom

是否有一些（工作）示例如何创建从 Windows 到 linux 的 RPC？

客户端应该是windows NT应用，服务器是linux。

它**需要**是[MSRPC](http://en.wikipedia.org/wiki/Microsoft_RPC)。

没有 Corba、没有 XML-RPC、SUN-RPC 等

MSDN[说](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378651%28v=vs.85%29.aspx)：

> RPC 可用于所有基于 Windows 操作系统的客户端/服务器应用程序。它还可用于为包括**Unix 和 Apple 等操作系统的异构网络环境创建客户端和服务器程序。**

不幸的是，在谷歌上花了几个小时后，我放弃了。

**我的期望：**

*   Linux 节点应该安装了 samba，因为它们的 MSRPC 实现有效。
*   使用 IDL 文件我为客户端和服务器生成存根
*   客户端是使用 MSVC 构建的
*   服务器是使用 gcc 构建的，其中包含一些来自 samba（或其他库）的包含/库
*   Linux节点必须有这样的RPC端口映射器

有人可以指出我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:38:09.717

我认为您有两种可能的方法来处理这个问题：

1-您可以尝试将[DCOM 与 wine 一起](http://www.winehq.org/docs/winedev-guide/dcom-1)使用，这意味着您实际上*将为 windows*编写代码，但同时您可以在此过程中测试您的结果并避免使用 wine 无法正确处理的 WinAPI 调用。这种方法将允许您从 IDL 文件生成存根代码。

2-您可以尝试使用[Samba RPC Pluggable Modules](http://www.samba.org/samba/docs/man/Samba-Developers-Guide/rpc-plugin.html)，但恐怕在这种情况下 RPC 通信会更加原始。

**编辑：**

好像还有很多其他的方法。我在[DCOM-Wikipedia](http://en.wikipedia.org/wiki/Distributed_Component_Object_Model)中找到了一个库列表，例如[j-Interop看起来特别有前途。](http://j-interop.org/)

# sql-server - 在 SQL Server Reporting Services 中处理 NULL 值

> ID：13087095
> 
> 赞同：0
> 
> 时间：2012-10-26T12:40:23.140
> 
> 标签：sql-server, ssrs-2008, reporting-services

我使用 SSRS Report Builder 开发了一份报告。该报告包含几个参数，其中一个参数包含 NULL 值，而不是它从数据库中获取的值。

现在，当我从该参数中选择 NON-NULL 值时，报告运行良好，因为我使用的是 IN 子句（因为参数值是多选的）。但是当我从该参数中选择 NULL（而不是任何其他值）时，IN 子句不起作用，因为 IN 不采用 NULL。

因此，我应该如何/如何修改我的查询，以便它可以同时处理 --- NULL 和 NON-NULL 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:27:44.063

以下强制包含所有 NULL，并让报告用户清楚地知道缺少该值：

```
SELECT ISNULL([ColumnNameHere],'[ None ]') AS [ColumnNameHere]
WHERE ISNULL([ColumnNameHere],'[ None ]') IN (@MultiParam) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:45:32.043

我以前遇到过这个问题。

解决方案不是传递 NULL，而是传递一个实际上您的数据库从不使用的默认值。这并不理想，但似乎是实施的一个怪癖。

因此，如果您正在搜索`ThingId`. `ThingId`是我们知道永远不可能的代理键`>0`。

您使用 0 作为*any*的值，并传递它而不是 NULL，然后像这样更改您的查询：-

```
WHERE
  @ThingId = 0 OR ThingId = @ThingId 
```

# c++ - 如何避免 std::reference_wrapper 衰减为 std::make_tuple 中的普通引用？

> ID：13087096
> 
> 赞同：3
> 
> 时间：2012-10-26T12:40:24.930
> 
> 标签：c++, c++11, tuples, reference-wrapper

我正在尝试正确地`std::reference_wrapper`为对象生成一个 s 元组。通过使用[此处显示](https://stackoverflow.com/questions/13070218/how-to-get-from-a-tuple-to-a-tuple-of-references-to-elements-in-the-tuple)的技术，我设法将`std::ref`函数映射到所有原始元组，但是，根据[这一点](http://en.cppreference.com/w/cpp/utility/tuple/make_tuple)（并且它实际上发生了），在此过程中会*衰减*`std::reference_wrapper`为普通的refs (&)。有没有办法避免这种情况？我有一整套接受s 元组的函数，我不想将它们更改为使用引用。*`std::reference_wrapper`*

 *谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:41:28.560

做就足够了

```
tuple<reference_wrapper<T>...> = /* my tuple of references */; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-03T18:24:58.513

如果可以更改包装器类型，则使用[boost::reference_wrapper](https://www.boost.org/doc/libs/1_72_0/libs/core/doc/html/boost/reference_wrapper.html) / [boost::ref](https://www.boost.org/doc/libs/1_72_0/libs/core/doc/html/boost/ref_idm45818739683584.html)可能是解决问题的方法。*

# c - 如何在 UNIX 上的 udp 套接字上获取 icmp

> ID：13087097
> 
> 赞同：3
> 
> 时间：2012-10-26T12:40:29.660
> 
> 标签：c, unix, udp, ping, icmp

获取原始套接字需要 root 权限，而 tcp/udp 没有它，所以我需要知道如何获取 udp 套接字并获取 icmp 数据。编程语言是 C，操作系统是类 BSD。

（换句话说我想写一个没有root权限的ping）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-27T14:50:26.770

**您可以在没有 root 权限的情况下编写 UDP ping。**

> 当启用**IP_RECVERR**选项时，所有错误都存储在套接字错误队列中，并且可以通过设置**MSG_ERRQUEUE**标志的**recvmsg** (2) 接收。

 **[请参阅 UDP 手册。](http://man7.org/linux/man-pages/man7/udp.7.html)

我假设 forge&send 例程已经在 SOCK_DGRAM 套接字上实现。然后，访问 ICMP 消息的源地址：

*   设置套接字选项以接收错误 (IP_RECVERR)
*   在错误队列 (MSG_ERRQUEUE) 上调用 recvmsg()
*   解析返回的结构（msghdr 和 iovec），它包含 ICMP 发布者的源地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:59:50.880

UDP是OSI第四层协议，ICMP也是。因此，您无法在 UDP 套接字上实现 ICMP，因为它的第四层协议已经固定为 UDP。您可以考虑编写一个需要打开原始套接字的权限的实现。然后，您要么为应用程序或您的帐户提供正确的功能，要么翻转可执行文件的 SUID 位以使其以 root 身份运行。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-26T13:10:02.810

所以，呃，绕过这个要求是微不足道的，你认为它还会存在吗？

它旨在提供一些安全性，因此并不是很容易四处走动。

我不认为它可以做到。**

# bash - 判断一个值是否存在于数组中

> ID：13087099
> 
> 赞同：0
> 
> 时间：2012-10-26T12:40:33.573
> 
> 标签：bash

非常感谢您的帮助！！！

我有以下代码：

```
base[0]='coordfinder'
base[1]='editor_and_options'
base[2]='global'
base[3]='gyro'
base[4]='movecamera'
base[5]='orientation'
base[6]='sa'

for d in $dest_include/*; do
    if [ $d == "${base[@]}" ]; then
        echo $plugin='y' >> vt_conf.sh
    else
        plugin=$(basename $d)
        echo $plugin'?'
        read $plugin
        echo $plugin=${!plugin} >> vt_conf.sh
    fi
done 
```

它不起作用，但这是一个很好的起点。基本上不起作用的是 if 循环。我只是编造的，因为我不知道该怎么做。

我想做以下事情：

遍历 $dest_include 文件夹的内容。如果任何 forlders ($d) 与数组中的任何元素匹配，则执行一件事，否则执行其他操作。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:44:43.280

遍历一个内部循环，如果找到匹配项则设置一个标志。

```
base=( coordfinder editor_and_options global gyro movecamera orientation sa )
for d in "$dest_include/"*; do
  found_match=0
  for i in "${base[@]}"; do
    [[ $d = "$i" ]] && { found_match=1; break; }
  done
  if (( found_match )) ; then
    ...do one thing...
  else
    ...do the other...
  fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:42:12.527

您也可以扭转检查：将整个数组用作空格分隔的字符串，并尝试匹配其中的空格分隔的单词。

```
for d in "$dest_include"/* do
    if [[ " ${base[*]} " == *" $(basename "$d") "* ]]; then
        do something with matching directory
    else
        do another thiing
    fi
done 
```

# javascript - Box2dWeb 旋转关节“拉伸”

> ID：13087107
> 
> 赞同：0
> 
> 时间：2012-10-26T12:40:58.783
> 
> 标签：javascript, box2d

我正在尝试使用[box2dweb](http://code.google.com/p/box2dweb/)在 2D 中创建类似汽车的东西。我有一个用于车身的盒子和两个圆圈，通过旋转接头连接到它，作为车轮。一段时间内一切正常，但车轮中心与它们所连接的盒子上的点之间的间隙逐渐增加。为求解器设置更多迭代无济于事，而且轮子迟早会完全离开盒子。它看起来像是某种累积的错误。此外，车轮与地面上的一些颠簸碰撞似乎是造成这个问题的最主要原因。最初就像左图一样，但在我将它从地面上的大球上开几次后，它就像右图一样，并保持这种状态：

![左：初始状态，右：我驾驶它经过大圈数次后。](../Images/57bebc8b9f41fb0b6da8f34c34b7866b.png)

我之前使用过一个较旧的 bo​​x2djs 库，但那里似乎没有这个问题。将代码移植到box2dweb后出现问题。在这两个库中创建事物的方式有很多不同，所以我一定错过了一些东西，但不知道是什么。

盒子的代码：

```
function createBox(world, x, y, width, height)
{
    var fixDef = new b2FixtureDef;
    fixDef.density = 1.0;
    fixDef.friction = 1.0;
    fixDef.restitution = 1.0;

    var bodyDef = new b2BodyDef;
    bodyDef.type = b2Body.b2_dynamicBody;
    bodyDef.position.x = x;
    bodyDef.position.y = y;

    fixDef.shape = new b2PolygonShape;
    fixDef.shape.SetAsBox(width, height);

    var b = world.CreateBody(bodyDef);
    b.CreateFixture(fixDef);
    return b;
} 
```

对于轮子（几乎相同，除了它会创建圆圈）：

```
function createBall(world, x, y, r)
{
    var fixDef = new b2FixtureDef;
    fixDef.density = 1.0;
    fixDef.friction = 1.0;
    fixDef.restitution = 1.0;

    var bodyDef = new b2BodyDef;
    bodyDef.type = b2Body.b2_dynamicBody;
    bodyDef.position.x = x;
    bodyDef.position.y = y;

    fixDef.shape = new b2CircleShape(r);

    var b = world.CreateBody(bodyDef);
    b.CreateFixture(fixDef);
    return b;
} 
```

对于关节：

```
var jointDef_rear = new b2RevoluteJointDef();   
jointDef_rear.Initialize(rear_wheel, car_body, rear_wheel.GetPosition());
jointDef_rear.maxMotorTorque = 10.0;
jointDef_rear.enableMotor = true;

rear_joint = world.CreateJoint(jointDef_rear);

var jointDef_front = new b2RevoluteJointDef();  
jointDef_front.Initialize(front_wheel, car_body, front_wheel.GetPosition());
jointDef_front.maxMotorTorque = 10.0;
jointDef_front.enableMotor = true;

front_joint = world.CreateJoint(jointDef_front); 
```

所以尽管我讨厌问“我的代码有什么问题”——有点问题，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:06:57.960

看来问题是由零位置迭代引起的：

```
world.Step(dt, iterations); 
```

似乎在旧版本的 Box2Djs 中，函数的原型就是这样。但是，在较新的版本中，它已更改为

```
function (dt, velocityIterations, positionIterations) 
```

所有参数默认为 0。用旧方式调用它，就像`world.Step(dt, iterations)`然后等于`world.Step(dt, iterations, 0)`，它仍然“有点”工作，但连接体的相对位置没有正确解决。我试着把它称为`world.Step(dt, iterations, iterations)`，然后突然间一切都修复了，即使迭代次数很少，比如 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:49:39.187

最有可能的是，原因在于身体的质量。

> Box2D maunal 说：
> 如果较轻的身体支撑较重的身体，由关节连接的身体链条可能会伸展。例如，连接到一连串轻质物体的破坏球可能不稳定。随着质量比超过 10:1，稳定性会降低。

你的前轮太小了，密度和其他车身一样。因此，它的质量与车身的质量有很大不同。例如，尝试将车身密度设置为 0.2，后轮密度设置为 0.5 以上，前轮密度设置为 1.5 以上。或者更好地为每个身体设置质量手册`b2Body::SetMassData`。我认为，最好让轮子比箱子更重。

# axapta - 如何通过取消选中复选框来禁用字段？

> ID：13087111
> 
> 赞同：2
> 
> 时间：2012-10-26T12:41:31.823
> 
> 标签：axapta, dynamics-ax-2012

我对如何实现此代码有疑问

```
public void setFieldAccess()
{

if(HcmWorkerBankAccount.FullAmount == NoYes::Yes)
{

    hcmworkerbankaccount_ds.allowedit(false);
}
else
{
    hcmworkerbankaccount_ds.allowedit(true);
}
} 
```

信用：[http ://axhelper.blogspot.com/2011/02/to-disable-record-in-form-b​​y-unchecking.html](http://axhelper.blogspot.com/2011/02/to-disable-record-in-form-by-unchecking.html)

它说在表单的方法上创建它并在数据源的活动方法和字段的修改方法中调用它。我假设这是数据源中的字段，而不是表单设计中的字段。

我的问题是这是否是我调用该方法的方式：

```
public int active()
{
int ret;
element.setFieldAccess();
ret = super();

return ret;
}

public void modified()
{

element.setFieldAccess();
super();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:19:17.300

首先，你的方法太冗长了，这就是它的表达方式：

```
public void setFieldAccess()
{
    hcmworkerbankaccount_ds.object(fieldNum(HcmWorkerBankAccount,Amount)).allowEdit(!HcmWorkerBankAccount.FullAmount);
} 
```

另外，在调用*之后*`super()`调用方法：

```
public int active()
{
    int ret = super();
    element.setFieldAccess();    
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T23:08:27.987

碰巧我今天在 Global 类中发现了一个方法，它也可以做到这一点。

```
public static void enableDSField(FormDataSource _datasource, fieldId _fieldId, boolean _enable)
{
    if (_datasource && _fieldId)
    {
        enableDatasourceFieldObject(_datasource.object(_fieldId), _enable);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:19:28.750

它不起作用，因为我覆盖了错误字段的修改方法。我覆盖了受影响的字段上的方法，而不是确定它是 allowEdit 功能的字段。

还

```
public void setFieldAccess()
{

if(HcmWorkerBankAccount.FullAmount == NoYes::Yes)
{

hcmworkerbankaccount_ds.object(fieldNum(HcmWorkerBankAccount,Amount)).allowEdit(false);
}
else
{
hcmworkerbankaccount_ds.object(fieldNum(HcmWorkerBankAccount,Amount)).allowEdit(true);
}
} 
```

# java - 俄语字符在java中显示不好但在php中可以吗？

> ID：13087113
> 
> 赞同：0
> 
> 时间：2012-10-26T12:41:44.540
> 
> 标签：java, php

我们有一个 Web 应用程序，可以在其中插入俄语字符，在 mysql 数据库中它看起来像这样 Ð”Ð¾ÑÑ,Ð°Ð²ÐºÐ° Ð³Ñ€ÑƒÐ·Ð°。但是当在网上查看时以俄语字符形式正确显示。但是，当我们在 Java 应用程序中执行此操作时，它会以这种格式显示 Ð”Ð¾ÑÑ,Ð°Ð²ÐºÐ° Ð³Ñ€ÑƒÐ·Ð°? 有什么帮助吗？

部分java代码如下。

```
Statement stmt1 = null;
                         //System.out.println("\n\nSELECT selectOTACommand : "+selectOTACommand);
                         String select1 = "Select locName from tblLoc where locID=2280"
                         ResultSet rs1= stmt1.executeQuery(select1);
                         while(rs1.next()) 
                         {
                            System.out.println("Loc Name : "+rs1.getString("locName"));

                         }      

                          try{
                            if ( rs1 != null ){
                              rs1.close();
                            }
                            else{
                                System.out.println("MyError:rs1 is null in finally close");
                            }
                            if ( stmt1 != null ){
                              stmt1.close();
                            }
                            else{
                                System.out.println("MyError:stmt1 is null in finally close");
                            }
                          }
                          catch(SQLException ex){
                                System.out.println("MyError:SQLException has been caught for stmt1 close");
                                ex.printStackTrace(System.out);
                          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:50:18.407

你必须在三个地方设置使用的编码，这样它就可以了，它应该是这样的。

1.  php
2.  mysql数据库和表
3.  php 用来与 mysql 通信的链接（这是大多数人想念的）你在这里有两个选择。phps' `mysql_set_charset()`-> [mysql_set_charset](http://php.net/manual/en/function.mysql-set-charset.php)或使用两个查询`SET NAMES 'charset_name'`+`SET CHARACTER SET charset_name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:50:54.830

[该应用程序](http://2cyr.com/decode/)说它是 windows-1251 编码。您可能应该[将其转换为 UTF](https://stackoverflow.com/questions/8613957/windows-1251-to-utf-8-codes)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T14:26:32.920

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T12:57:02.420

我建议，正如 Nikola 上面所说， SET NAMES 'utf8' 会解决你的问题。您必须说明 MySQL 您的客户端将使用什么字符集编码来发送 SQL 语句以及它希望以什么字符集编码接收结果。SET NAMES 影响所有这些设置。

# c# - xsd.exe 忽略 cdata？

> ID：13087114
> 
> 赞同：0
> 
> 时间：2012-10-26T12:41:47.357
> 
> 标签：c#, xml, xsd, xml-serialization, xml-deserialization

我使用 Microsoft SDK 中的 xsd.exe 首先生成 xml 文件的架构，然后生成先前生成的 xsd 文件的 C# 文件。这是我的xml文件：

```
<event topic="event.system.visualization.initialization.response" subject="CIBEK204Test0" producer="de.cibek.configurator" timeToLive="0" too="1351252459919" duration="0">
<payload>
    <![CDATA[
        <?xml version="1.0" encoding="UTF-8" standalone="no"?>
            <building>
                <floor name="">
                    <location name="Wohnen">
                        <item category="event.environment.apartment.window" groupaddress="10248" location="Wohnen" location.floor="" location.specification="Mitte links"/>
                    </location>
                </floor>
            </building>
    ]]>
</payload>
<properties/>
<traces/> 
```

现在生成的xsd：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
<xs:element name="event">
 <xs:complexType>
  <xs:sequence>
    <xs:element name="payload" type="xs:string" minOccurs="0" msdata:Ordinal="0" />
    <xs:element name="properties" type="xs:string" minOccurs="0" msdata:Ordinal="1" />
    <xs:element name="traces" type="xs:string" minOccurs="0" msdata:Ordinal="2" />
  </xs:sequence>
  <xs:attribute name="topic" type="xs:string" />
  <xs:attribute name="subject" type="xs:string" />
  <xs:attribute name="producer" type="xs:string" />
  <xs:attribute name="timeToLive" type="xs:string" />
  <xs:attribute name="too" type="xs:string" />
  <xs:attribute name="duration" type="xs:string" />
 </xs:complexType>
 </xs:element>
 <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
  <xs:complexType>
  <xs:choice minOccurs="0" maxOccurs="unbounded">
    <xs:element ref="event" />
  </xs:choice>
</xs:complexType>
</xs:element>
</xs:schema> 
```

以及生成的cs文件：

```
using System.Xml.Serialization;

// 
// This source code was auto-generated by xsd, Version=4.0.30319.17929.
// 

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class @event {

private string payloadField;

private string propertiesField;

private string tracesField;

private string topicField;

private string subjectField;

private string producerField;

private string timeToLiveField;

private string tooField;

private string durationField;

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
public string payload {
    get {
        return this.payloadField;
    }
    set {
        this.payloadField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
public string properties {
    get {
        return this.propertiesField;
    }
    set {
        this.propertiesField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
public string traces {
    get {
        return this.tracesField;
    }
    set {
        this.tracesField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlAttributeAttribute()]
public string topic {
    get {
        return this.topicField;
    }
    set {
        this.topicField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlAttributeAttribute()]
public string subject {
    get {
        return this.subjectField;
    }
    set {
        this.subjectField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlAttributeAttribute()]
public string producer {
    get {
        return this.producerField;
    }
    set {
        this.producerField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlAttributeAttribute()]
public string timeToLive {
    get {
        return this.timeToLiveField;
    }
    set {
        this.timeToLiveField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlAttributeAttribute()]
public string too {
    get {
        return this.tooField;
    }
    set {
        this.tooField = value;
    }
}

/// <remarks/>
[System.Xml.Serialization.XmlAttributeAttribute()]
public string duration {
    get {
        return this.durationField;
    }
    set {
        this.durationField = value;
    }
}
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class NewDataSet {

private @event[] itemsField;

/// <remarks/>
[System.Xml.Serialization.XmlElementAttribute("event")]
public @event[] Items {
    get {
        return this.itemsField;
    }
    set {
        this.itemsField = value;
    }
}
} 
```

现在我的问题是：为什么 xsd.exe 会忽略 CDATA 中嵌入的 xml 代码？是否有可能强制 xsd.exe 不忽略 CDATA？或者是否可以生成 2 个 xsd 和 cs 文件并告诉第一个（其中包含事件）有一个 CDATA 节点，其中包含另一个 xml 文件并将它们链接到生成的代码中？

对不起，我希望任何人都可以帮助我：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:22:15.133

如果使用 CDATA，解析器将忽略 CDATA 部分内的所有内容。如果您的目标是获取 CDATA 中的部分，请点击此链接。

[使用 Linq 获取 CDATA XML 部分](https://stackoverflow.com/questions/7620434/getting-cdata-xml-section-using-linq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-30T12:37:07.370

我使用 xsd.exe 和以下 xsd 文件成功反序列化 CDATA：

```
<xs:element name="event">
  <xs:complexType>
    <xs:sequence>
      <xs:element ref="payload" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>
</xs:element>

<xs:element name="payload">
  <xs:complexType>
    <xs:simpleContent>
      <xs:extension base="xs:string"/>
    </xs:simpleContent>
  </xs:complexType>
</xs:element> 
```

xsd.exe 生成的代码是：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class @event {

    private payload[] payloadField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("payload")]
    public payload[] payload {
        get {
            return this.payloadField;
        }
        set {
            this.payloadField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class payload {

    private string valueField;

    /// <remarks/>
    [System.Xml.Serialization.XmlTextAttribute()]
    public string Value {
        get {
            return this.valueField;
        }
        set {
            this.valueField = value;
        }
    }
} 
```

并使用 XmlSerializer.Deserialize 用 CData 填充 payload.Value

# javascript - 移除 HTML 元素的属性

> ID：13087116
> 
> 赞同：0
> 
> 时间：2012-10-26T12:41:57.217
> 
> 标签：javascript, lift

在这个问题之后：[Modify attribute of element](https://stackoverflow.com/questions/12917298/modify-attribute-of-element)，我想知道是否有一种干净的方法可以删除 Lift 中的属性。现在我直接运行 javascript 命令：

```
Run("document.getElementById(\"elem_id\").removeAttribute(\"disabled\", 0);") 
```

有没有更好的方法来做到这一点？

例如，要编辑属性，可以使用以下命令：

```
(JqId("elem_id")~> JqAttr("disabled", "disabled")).cmd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:54:40.247

我在 JqJE 中没有看到内置的 removeAttribute 选项，但您应该可以自己滚动。如果你定义这样的东西：

```
case class RemoveAttr(key: String) extends JsExp with 
  JsMember with JQueryRight with JQueryLeft {

    def toJsCmd = "removeAttr(" + key.encJs + ")"
} 
```

然后像这样调用：

```
JqId("elem_id")~> RemoveAttr("disabled") 
```

我没有测试过它，但我认为它应该完成你想要做的事情。

您可以在此处找到 JqJE 的源代码：[https ://github.com/lift/framework/blob/master/web/webkit/src/main/scala/net/liftweb/http/js/jquery/JqJsCmds.scala#L168](https://github.com/lift/framework/blob/master/web/webkit/src/main/scala/net/liftweb/http/js/jquery/JqJsCmds.scala#L168)

# c# - 为什么我不能输出 AJAX POST 发送的变量？

> ID：13087121
> 
> 赞同：0
> 
> 时间：2012-10-26T12:42:16.327
> 
> 标签：c#, javascript, asp.net, razor, typescript

我正在尝试发布文本框的值，并在“您说...”部分的页面上发布相同的值。

我的 TypeScript/JavaScript 是：

```
declare var document;
declare var xmlhttp;

window.onload = () => {
    start();
};

function sayHello(msg: any) {
    // Post to server.
    xmlhttp.onreadystatechange = function () {
      if (xmlhttp.readyState == 4) {
        if (xmlhttp.status == 200) {
          // All right - data is stored in xhr.responseText
            alert("done" + " " + xmlhttp.responseText);
        }
        else {
          // Server responded with a status code.
            alert("error");
        }
      }
    }
    xmlhttp.open("POST", "Default.cshtml");
    xmlhttp.send("someValue=" + msg);

    return msg;
}

function start() {
    // Add event Listeners for user interaction
    var element = document.getElementById("link");

    element.addEventListener("click", function () {
        var tb = (<HTMLInputElement>document.getElementById("tbox"));

        var element = document.getElementById("response")
            .innerText = sayHello(tb.value);
    }, false);

    // Setup XMLHttpRequests (AJAX)
    if (XMLHttpRequest) {
        // Somewhat cross-browser
        xmlhttp = new XMLHttpRequest();
    }
    else {
        // Legacy IE
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
} 
```

HTML 是（这个页面是*Default.cshtml*）：

```
@{
    Layout = "~/_SiteLayout.cshtml";
    Page.Title = "Home Page";

    var msg = Request["someValue"];
}
<h1>TypeScript HTML App</h1>
<div id="content">
    <a href="javascript:;" id="link">Say Hello</a>:
        <br />
    <input type="text" value="dfgdfgdfg" id="tbox" />
    <br />
    <p id="response">awaiting a response.</p>
    <br />
    <p>You said:<br />
    @msg</p>
</div> 
```

我已经正确地包含了所有参考资料： `<script src="~/App.js"></script>`

我得到的响应代码是 200。

我在这里做错了吗？我已经遵循了许多教程、文档等，但我只是看不出我做错了什么。它看起来几乎相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:33:14.173

当您将 XMLHttpRequest 作为 POST 处理时，您需要添加几个额外的标头 - 在调用之前添加它们`send`，如下所示：

```
var params = "someValue=" + encodeURIComponent(msg);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", params.length.toString());
xmlhttp.setRequestHeader("Connection", "close");
xmlhttp.send(params); 
```

**更新 - 我的完整示例**

默认.cshtml

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    Page.Title = "Home Page";
    var msg = Request["someValue"];
}

@if (msg != null) {
    Layout = null;
    <text>You said @msg</text> 
} else {

    <h1>TypeScript HTML App</h1>
    <div id="content">
        <a href="javascript:;" id="link">Say Hello</a>:
        <br />
        <input type="text" value="dfgdfgdfg" id="tbox" />
        <br />
        <p id="response">awaiting a response.</p>
    </div>
} 
```

应用程序.ts

```
declare var document;
declare var xmlhttp: XMLHttpRequest;

window.onload = () => {
    start();
};

function sayHello(msg: any) {
    // Post to server.
    xmlhttp.onreadystatechange = function () {
      if (xmlhttp.readyState == 4) {
        if (xmlhttp.status == 200) {
          // All right - data is stored in xhr.responseText
            //alert("done" + " " + xmlhttp.responseText);
            document.getElementById("response").innerText = xmlhttp.responseText;
        }
        else {
          // Server responded with a status code.
            alert("error");
        }
      }
    }

    var params = "someValue=" + encodeURIComponent(msg);
    xmlhttp.open("POST", "");
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.setRequestHeader("Content-length", params.length.toString());
    xmlhttp.setRequestHeader("Connection", "close");
    xmlhttp.send(params);

    return msg;
}

function start() {
    // Add event Listeners for user interaction
    var element = document.getElementById("link");

    element.addEventListener("click", function () {
        var tb = <HTMLInputElement>document.getElementById("tbox");
        sayHello(tb.value);
    }, false);

    // Setup XMLHttpRequests (AJAX)
    if (XMLHttpRequest) {
        // Somewhat cross-browser
        xmlhttp = new XMLHttpRequest();
    }
    else {
        // Legacy IE
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:53:23.977

你可以尝试更换：

```
xmlhttp.send("someValue" + msg); 
```

和

```
xmlhttp.send("someValue=" + msg); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T14:09:54.613

我希望这有帮助。如前所述，我对您的流程有点困惑，但它仍然可能对您有所帮助。

**PageA.cshtml**（包含 javascript 的页面）

```
<h1>TypeScript HTML App</h1>
<div id="content">
    <a href="javascript:;" id="link">Say Hello</a>:
    <br />
    <input type="text" value="dfgdfgdfg" id="tbox" />
    <br />
    <p id="response">awaiting a response.</p>
</div>

<script src="app.js" type="text/javascript"></script> 
```

**PageB.cshtml**（我们通过ajax调用请求的页面）

```
@{
    var msg = Request["someValue"];
}
<p>You said:<br />
@msg</p> 
```

**App.js**（在页面 A 上运行并请求页面 B 的 javascript 文件）

```
declare var document;
declare var xmlhttp;

window.onload = () => {
    start();
};

function sayHello(msg: any, callback) {
    // Post to server.
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4) {
            if (xmlhttp.status == 200) {
                // alert(xmlhttp.responseText);
            } else {
                // Server responded with a status code.
                alert("error");
            }
        }
    };
    xmlhttp.open("POST", "PageB.cshtml");
    xmlhttp.send("someValue=" + msg);
}

function start() {
    // Add event Listeners for user interaction
    var element = document.getElementById("link");

    element.addEventListener("click", function () {
        var tb = (<HTMLInputElement>document.getElementById("tbox"));

        sayHello(tb.value);
        document.getElementById("response")
            .innerHTML = tb.value;
    }, false);

    // Setup XMLHttpRequests (AJAX)
    if (XMLHttpRequest) {
        // Somewhat cross-browser
        xmlhttp = new XMLHttpRequest();
    }
    else {
        // Legacy IE
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
} 
```

我正在做的是从 PageA 向 PageB 发出请求。然后读取结果，我操纵 PageA 的 dom 以包含从 PageB 接收到的标记。此标记包含与请求一起传递的消息。

这是您想要实现的流程吗？

# ubuntu - 多核理论编码

> ID：13087124
> 
> 赞同：3
> 
> 时间：2012-10-26T12:42:42.813
> 
> 标签：ubuntu, ogg-theora

我们将上传的视频转换为 MP4 和 OGV，但在尝试加快处理速度时遇到了困难。我们发现瓶颈是 OGV 编码，虽然将 350mb 的 AVI 转换为 MP4 可能需要 5 分钟，但将相同的文件转换为 OGV 大约需要 25-30 分钟。

avconv 支持多线程/多核，但似乎 libtheora 不支持，有没有人有任何方式对多核进行编码？我找到了一个讨论补丁的[旧邮件组](http://lists.xiph.org/pipermail/theora-dev/2007-October/003365.html)，但我找不到更多关于它的信息，或者它是否仍然可以使用 5 年。

所以。多核 theora 处理是否可行，我应该用什么来做？

以供参考：

```
avconv -y -i big_buck_bunny_720p_surround.avi -vcodec libtheora -qscale 10 -bufsize 20M -same_quant -acodec libvorbis -ac 2 -ar 44100 -ab 128k buck.ogv 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:07:25.040

[libtheora](http://wiki.xiph.org/TheoraEncoders)的官方站点中提供了多线程版本的链接：

> theora-multithread：旧的，不再开发，基于旧编码器的实验性编码器库，针对 SMP/多核系统进行了优化：[theora-multithread svn](http://svn.xiph.org/branches/theora-multithread/)。有关更多信息，请参阅此处的所有线程：[多线程 Theora 编码器](http://lists.xiph.org/pipermail/theora-dev/2007-October/003365.html)。

构建该版本，然后尝试使用它构建 ffmpeg。如果新版本的 ffmpeg 不使用它构建，请尝试旧版本的代码。

还有一个多线程版本的[ffmpeg2theora](https://launchpad.net/ffmpeg2theora/+milestone/0.16-multithread)。

# html - 这些字符在 HTML5 文档的 href 中的 url 中是否有效？:,;&

> ID：13087125
> 
> 赞同：1
> 
> 时间：2012-10-26T12:42:49.063
> 
> 标签：html, url, html-entities

我们计划有像这样的网址

```
http://www.nowhere.nu/path/file;key:value,key2:value2.html 
```

该文档说必须对特殊字符进行转义，这违背了拥有“好”网址的目的：

[http://www.blooberry.com/indexdot/html/topics/urlencoding.htm](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)

但是，在测试主流浏览器时，似乎没有必要在这个位置对 ;: 和 进行 urlencode

您能否提供一个无法使用的流行浏览器，或反对这种方案的论据？

& (invalid but works) 与 & amp; 的类似问题 （有效的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:47:22.357

如评论中所述，所引用的信息已过时。为了安全起见，任何有问题的字符都应该被转义。

使用 URL，您有 2 个目标受众，人类和机器。大多数人无法有效地处理包含字母数字字符、`.`s 和`/`s 之外的任何内容的 URL 路径。随着您越过主机名，它们的效率也会降低。所以本质上，一旦你得到一个你必须编码的字符，你就已经失去了对人类友好的感觉（很多人甚至不知道位置栏在哪里，更不用说注意它了）。

另一方面，机器没有转义字符的问题。他们*可能*会遇到无法识别的未转义字符的问题。由于 HTTP 非常简单，因此有大量可用的客户端，包括用于执行 mashup 之类的少量自定义客户端。因此，即使您覆盖了能够浏览未转义字符的主要浏览器，您也可能会破坏一些无法预料的客户端。总体而言，您没有任何实际好处，但风险更高。

# openshift-origin - 连接我自己的 OpenShift PaaS 服务器时出现 SSL 错误

> ID：13087127
> 
> 赞同：0
> 
> 时间：2012-10-26T12:42:57.900
> 
> 标签：openshift-origin

我使用以下教程在 CentOS 6.3 中配置了 OpenShift 安装：[https ://openshift.redhat.com/community/wiki/build-your-own](https://openshift.redhat.com/community/wiki/build-your-own)

所有服务都正常，正常运行。

但是，当我尝试将我的 rhc 客户端连接到我的服务器（运行以下命令）时，会出现 SSL 错误。看来我必须信任我的自签名 SSL 证书。我使用的是 OS X，所以我将 .cer 文件添加到钥匙串中。这使得从 Safari 访问 https URL 看起来不错，但是 rhc 命令仍然有错误。

```
Mac-de-Ariel:~ ariel$ export LIBRA_SERVER=MY_DOMAIN
Mac-de-Ariel:~ ariel$ rhc server 
/Users/ariel/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/http.rb:799:in `connect': SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: (null) (OpenSSL::SSL::SSLError) 
```

完全错误：[https ://gist.github.com/0e9019f39c59512eb54b](https://gist.github.com/0e9019f39c59512eb54b)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:12:30.587

'rhc server' 还不能对 Origin 服务器起作用——现在它只对 openshift.redhat.com 起作用。我建议尝试：

```
LIBRA_SERVER=yourhost rhc setup 
```

安装程序将针对您提供的服务器运行并进行必要的配置，然后将服务器变量保存到 ~/.openshift/express.conf 文件中以供将来使用。

# asp.net - 在 ASP.Net 中创建 Windows Workflow Foundation 规则

> ID：13087135
> 
> 赞同：0
> 
> 时间：2012-10-26T12:43:32.433
> 
> 标签：asp.net, workflow-foundation, workflow-foundation-3

是否可以从 ASP.Net 应用程序创建和配置 Windows Workflow Foundation 规则？有`System.Workflow.Activities.Rules.Design.RuleSetDialog`适用于 Windows 窗体项目的，但是对于使用 Razor 视图引擎的 ASP.Net MVC 项目是否有一些等价物？

无论如何，我需要能够从 ASP.Net 客户端中创建规则，将它们保存在数据库中并稍后在服务中评估规则。WF4 中是否有一些新的东西可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:45:30.887

我找不到任何 .NET 4 示例，但有一个 .NET 3 示例用于使用对象模型创建规则集。我假设您需要为其创建自己的自定义 UI 并通过对象模型创建规则集以在 Web 应用程序中处理此问题。

[引用的 .NET 3 示例](http://archive.msdn.microsoft.com/netfxsamples/Release/ProjectReleases.aspx?ReleaseId=1620)- 我所指的示例称为“使用对象模型创建规则”

# visual-studio-2012 - Visual Studio 2012 将焦点更改为设计窗格

> ID：13087139
> 
> 赞同：6
> 
> 时间：2012-10-26T12:43:36.510
> 
> 标签：visual-studio-2012

当您更改 WPF 上的文档（ctrl+tab）（可能还有其他）时，焦点总是转到设计窗格。想象一下 - 您编辑 XAML 并希望从另一个现有文档中复制现有元素。您在 Doc1 XAML 类型中，接下来您切换到 Doc2，您之前曾在 XAML 窗格中。现在Doc2 的Designer 得到了关注。由于我将焦点留在了 XAML 中，因此我使用 shift 箭头来选择一些 XAML 文本 - 而是移动了焦点控件。换回来的时候也是一样。

VS 2012 根本不记得焦点在哪个窗格（XAML / 设计）中。这对我来说真的很难，因为我经常这样做 - 现在我总是在更改当前文档后抓住鼠标并切换回 XAML。

知道这是否可以改变吗？或者至少如果有一个键盘快捷键可以从一个 XAML 切换到另一个 XAML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T15:15:04.507

按 Shift+F7 对您没有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T14:08:49.737

您在寻找**Shift+ESC**吗？这将关闭在 Visual Studio 中处于焦点的当前窗口，例如。解决方案资源管理器、输出窗口、立即窗口等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T13:55:14.940

我对此感到非常沮丧，但我终于找到了解决方法！如果您折叠了一个窗格，那么只有 shift+F7 似乎在窗格之间切换。解决方法是一次只能查看一个窗格（Designer 或 XAML）。出于某种原因，Shift+F7 在拆分视图中不起作用。小警告，我在 Visual Studio 2015 中。我怀疑 2012 年的行为是相同的。这个答案可能与遇到此问题的人更相关，但知道它适用于 vs2015。

点击折叠视图 [![XAML 设计器图](../Images/259ddba55ec83c9207effa1d0b62d703.png)](https://i.stack.imgur.com/RIiOV.png)

需要注意的另一件事是如何确保折叠一个窗格。Visual Studio 似乎记得您为该特定 XAML 文件使用 XAML 设计器的最后一个视图。您可以按文件更改它们，Visual Studio 会记住它们，或者您可以通过转到（在 Visual-studio-2015 中）工具菜单项来更改 .xaml 文件打开的默认模式。然后单击选项，这将打开选项窗口。然后单击 XAML 设计器，这是选项窗口左侧窗格中的最后一个选项。然后将标记为默认文档视图的组合框中的选定项目从拆分视图更改为源视图。

当我第一次更改默认值时，我认为它不起作用。更改默认设置不会覆盖为特定文件的最后一个文档视图保存的设置。我发现应用默认值的唯一方法是清除我的 .suo 文件以获取解决方案并关闭 Visual Studio。删除 .suo 文件并关闭并重新打开解决方案不起作用。我不得不删除文件并关闭 Visual Studio，打开 Visual Studio 备份，然后重新加载解决方案。

.suo 文件隐藏在解决方案文件夹内名为“.vs”的隐藏文件夹中。我最初只是将它重命名为 .suo.bak 以防万一发生我不喜欢的事情，但是一旦我重新加载解决方案并且一切都很好，我将其删除。

# windows - 在 Windows 8 应用程序中提供 Toast 通知的链接

> ID：13087141
> 
> 赞同：3
> 
> 时间：2012-10-26T12:43:51.683
> 
> 标签：windows, microsoft-metro, toast, windows-applications

我正在为 windows 8 开发一个应用程序，我希望 toast 可以链接到任何网页或任何其他地铁应用程序，而不是自己的应用程序。注意：网络链接或应用名称将由用户输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:04:25.427

这不受支持。Toasts 只能将用户带到发送 toast 的应用程序。见下文。

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/hh779727.aspx)：

> Toast 通知可以包含文本和/或图像，但不支持按钮等辅助操作。

和

> 当用户点击或点击通知时，相关的应用程序会启动，用户可以预期结果视图与通知的内容相关。这是一个应用程序可以中断另一个应用程序中的用户的唯一机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-01T09:39:48.400

你也可以试试这个：

使用 WebBrowser 元素创建一个新的 xaml 页面，并使用以下代码轻松导航到网页。

![代码示例](../Images/092ff506b712f9762a9926fb02779c16.png)

在这里单击外壳 Toast 时，它会导航到 URL 中指定的应用程序内的特定页面。

这只是一种解决方法，它不是很好，但会部分完成您的任务。

谢谢 。

# .htaccess - 如何在 htaccess 中结合 RewriteCond

> ID：13087146
> 
> 赞同：0
> 
> 时间：2012-10-26T12:44:13.507
> 
> 标签：.htaccess

我正在寻找`If, else`可以结合基于主机/域名的重写规则的代码类型。因此，如果域名是“domainA”，则将 a 重定向到 b，c 重定向到 d，如果域名是“domainB”，则将 x 重定向到 y，z 重定向到 p。基本上我不想一次又一次地写条件，就像我在下面所做的那样：

我为 htaccess 编写了以下代码

```
 RewriteCond %{HTTP_HOST} ^domain\.com$ [OR]
    RewriteCond %{HTTP_HOST} ^www\.domain\.com$
    RewriteRule ^home /? [L,R=301]

    RewriteCond %{HTTP_HOST} ^domain\.com$ [OR]
    RewriteCond %{HTTP_HOST} ^www\.domain\.com$
    RewriteRule ^home-old /? [L,R=301] 
```

在上面我使用主机，因为我有多个域指向同一个托管空间，所以 htaccess 在所有域之间是通用的。

我可以将域的上述多个条件合并为一个，而不是为特定域的某些重定向一次又一次地编写域名吗？

请指教，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:18:45.500

mod_rewrite 中确实没有这样的 if-then-else 结构。你必须要么对你的规则很聪明（这有时会使它们不可读或无法修改），要么对所有事情都明确。

对于您的具体示例，您可以只使用正则表达式来组合它们：

`^domain\.com$`并`^www\.domain\.com$`变成`^(www\.)?domain\.com$`

和

`^home`并且`^home-old`只是`^home`，因为第一个仅在 URI**以 开头** `home`并且`home-old`确实以开头时匹配`home`（没有`$`符号表示字符串的结尾）。所以你在看：

```
RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$ [NC]
RewriteRule ^home /? [L,R=301] 
```

如果您需要通过使用来具体化`$`，您可以将正则表达式更改为：

```
RewriteRule ^home(-old)?$ /? [L,R=301] 
```

* * *

编辑：

> 如果我有一些其他 url 而不是 home、botique 和 hairtips，那么我每次都需要写 RewriteCond 吗？我想我每次都必须写，只是向你确认

是的，您必须每次都重复该条件，或者，您可以在规则的一开始就进行传递：

```
RewriteCond %{HTTP_HOST} !^(www\.)?domain\.com$ [NC]
RewriteRule ^ - [L] 
```

这意味着：任何不是主机请求的东西：**www.domain.com**或**domain.com**，然后通过而不重写。然后您可以在此之后制定规则，因为只有与上述以外的主机的请求才会达到这些规则。

这就是我之前提到的“聪明”位。由于您在顶部设置了严格的条件，这可能会使您以后更改或修改规则变得很棘手。

# spring-mvc - 我可以在 Spring Web Flow 项目中使用 dojo.validate.us.isSocialSecurityNumber 吗？

> ID：13087147
> 
> 赞同：0
> 
> 时间：2012-10-26T12:44:19.833
> 
> 标签：spring-mvc, dojo, spring-webflow

我可以在 Spring Web Flow 项目中使用 dojo.validate.us.isSocialSecurityNumber 吗？我正在尝试在我的 Spring Web 流项目中创建一个社会安全字段，但以下代码不起作用？我应该如何使用 dijit 制作 SSN 文件？

```
<form:input path="name" class="value" /> <script
                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "name",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "US Social Security Number",
                                invalidMessage : "Invalid US Social Security Number.",
                                required : true,
                                validator: "dojo.validate.us.isSocialSecurityNumber()",
                                trim : true
                            }
                        }));
                    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:53:15.003

你需要像这样使用它`validator: dojox.validate.us.isSocialSecurityNumber`，没有括号，没有引号。

你还需要`dojo.require("dojox.validate.us");`

所以这是你应该使用的，根据你的代码：

```
<script type="text/javascript">
    dojo.require("dojox.validate.us");
    Spring.addDecoration(new Spring.ElementDecoration({
        elementId : "name",
        widgetType : "dijit.form.ValidationTextBox",
        widgetAttrs : {
            promptMessage : "US Social Security Number",
            invalidMessage : "Invalid US Social Security Number.",
            required : true,
            validator: dojox.validate.us.isSocialSecurityNumber,
            trim : true
            }
        }));
</script> 
```

# php - 从两个表中查找 MAX 和 SUM

> ID：13087154
> 
> 赞同：-2
> 
> 时间：2012-10-26T12:44:44.310
> 
> 标签：php, mysql, sql

我正在开发一个销售点系统，需要找到购买量最高的客户。

我有这两个表，第一个包含客户和交易编号，第二个包含交易编号和交易总额。这是桌子

```
--------------------------
| Customer | Transaction |
--------------------------
| 1000     | 902134      |
--------------------------
| 1001     | 798249      |
--------------------------
| 1001     | 312523      |
--------------------------
| 1002     | 741284      |
--------------------------
| 1000     | 122354      |
-------------------------- 

------------------------------
| Transaction | Total_Amount |
------------------------------
| 902134      | 9000.00      |
------------------------------
| 798249      | 3000.00      |
------------------------------
| 312523      | 5000.00      |
------------------------------
| 741284      | 4000.00      |
------------------------------
| 122354      | 1000.00      |
------------------------------ 
```

我需要获得价值 10,000.00 笔交易的客户代码 1000。

我正在使用 MySQL 和 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:49:28.547

这将检索具有相同*总数* `transaction_amount`并且（*可能*）是所有客户的最高总金额值的客户。

```
SELECT aa.customer, SUM(bb.Total_AMount) GrandTotal
FROM    tableCustomer aa
        LEFT JOIN tabletransaction bb
            ON aa.`Transaction` = bb.`Transaction`
GROUP BY aa.customer
HAVING SUM(bb.Total_AMount) =
(
    SELECT MAX(totalSum)
    FROM
    (
        SELECT  SUM(b.Total_AMount) totalSUM
        FROM    tableCustomer a
                LEFT JOIN tableTransaction b
                    ON a.`Transaction` = b.`Transaction`
        GROUP BY a.customer
    ) x
) 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/a4081/10)

*   [**SQLFiddle Demo**（*总金额相同*）](http://sqlfiddle.com/#!2/4b59a/2)

# jquery - 如何在此弹出窗口中添加关闭按钮

> ID：13087158
> 
> 赞同：-1
> 
> 时间：2012-10-26T12:44:59.847
> 
> 标签：jquery, popup

```
<script type="text/javascript">
  function media_player(url){
    embed = '<object type="application/x-shockwave-flash" data="http://flash-mp3-player.net/medias/player_mp3_maxi.swf" width="200" height="20">'+
            ' <param name="movie"  value="http://flash-mp3-player.net/medias/player_mp3_maxi.swf" />'+
            ' <param name="FlashVars" value="mp3='+url+'&amp;showstop=1&amp;showvolume=1&amp;autoplay=1&amp;slidercolor2=CECDCC&amp;sliderovercolor=CECDCC&amp;buttonovercolor=CECDCC&amp;loadingcolor=CECDCC" />'+
            '</object>';

    jQuery('#media-popup .content').html(embed);
    jQuery('#media-popup').fadeIn();
  }
</script> 
```

如何添加关闭按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:47:13.810

用jquery函数`.fadeOut()`？

```
$("#media-popup").fadeOut(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:52:38.530

为您要关闭的对象分配一个 ID（我猜在您的情况下是对象标签）。然后创建一个元素，该元素负责在单击时将其关闭。例如：

```
$('<div>')
    .attr('id','close-panel-button')
    .appendTo($('body'))
    .click(function(){

        $('#id-of-the-object-to-close-here').hide();

    }); 
```

您可以使用您喜欢的任何方法更改隐藏方法，具体取决于您要如何关闭它。相应地设置您的关闭面板按钮的样式（例如位置：绝对；和自定义坐标）。

# vb.net - 如何告诉 vb.net 等待直到加载完成？(iframe.dll)

> ID：13087164
> 
> 赞同：0
> 
> 时间：2012-10-26T12:45:33.420
> 
> 标签：vb.net, vb.net-2010

我正在尝试创建一个脚本来导航到网页，等待元素加载，然后从新页面收集元素。就目前而言，这个脚本在它应该等待的时候直接运行：

```
Do Until AxWebBrowser1.ReadyState = WebBrowserReadyState.Complete 
```

处理后：

```
htmldoc.getElementsByName("GetCase").item(0).click() 'click the submit button 
```

我立即得到第二个子的消息框弹出窗口，而实际上页面还没有完成加载。我该如何解决这个问题并让脚本等到页面准备好，然后制作 htmldoc = axwebbrowser1.document

```
Private Sub GetCase()

    htmldoc = AxWebBrowser1.Document.frames("top").document 'set the top frame to be searched for

    setval = htmldoc.getElementsByName("caseNum").item(0) 'grab the input name for contracts

    setval.value = TextBox1.Text 'set the textbox value into the web form input
    TextBox1.Clear()

    htmldoc.getElementsByName("GetCase").item(0).click() 'click the submit button

    Do Until AxWebBrowser1.ReadyState = WebBrowserReadyState.Complete 'do events until it is complete
        Application.DoEvents()
    Loop

    If ComboBox1.Text = "MM" Then
        Gather()

    End If

End Sub

Private Sub Gather()
    Do Until AxWebBrowser1.ReadyState = WebBrowserReadyState.Complete 'do events until it is complete
        Application.DoEvents()
    Loop

    htmldoc = AxWebBrowser1.Document
    MessageBox.Show("got elements")

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:38:22.380

在 click() 之后，在检查 ReadyState 之前，您需要等待一段时间，即 2 秒，以允许浏览器响应单击事件。就像是：

```
for i as integer = 0 to 10
    Sleep(200)
    Application.Doevent()
next 
```

然后检查就绪状态

# java - 选择侦听器何时在视图中注册？

> ID：13087165
> 
> 赞同：0
> 
> 时间：2012-10-26T12:45:34.997
> 
> 标签：java, eclipse, eclipse-rcp, event-listener

我`View`在我的 RCP 应用程序中有一个绘制一些东西的东西，它是在用户单击某个`Toolbar`操作时创建的。当单击`View`视图`ISelectionProvider`中的某些对象时，它们的属性将显示在属性视图中。

问题是当我以编程方式在操作方法中显示通过时`view`，似乎没有注册，因此属性视图中没有显示任何内容。`getActivePage.showView("viewid")``run()``listeners`

一旦通过按下其他按钮`view`来隐藏视图，然后我再次打开它，就会注册监听器并显示属性。

那么这些`listeners`没有被命令调用的注册方法是什么`showView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:11:27.210

它在部件被激活时触发。尝试

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().showView("myViewId", null, IWorkbenchPage.VIEW_ACTIVATE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:54:21.710

我相信如果视图有焦点，就会宣布选择，在显示它之前尝试以编程方式设置焦点。

# android - 如何在 Android 2.2+ 上检测免提 garniture？

> ID：13087167
> 
> 赞同：1
> 
> 时间：2012-10-26T12:45:43.827
> 
> 标签：android

我想知道用户何时连接了免提配件并且没有阻止通话\短信。是否可以知道它何时通过硬件端口或蓝牙连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:50:55.893

在你的 onCreate 或 onResume 中试试这个。

```
 BluetoothAdapter myLocalAdapter = BluetoothAdapter.getDefaultAdapter();
    BluetoothDevice garniture;
    Set<BluetoothDevice> connectedDevices = myLocalAdapter.getBondedDevices();
    for (BluetoothDevice device : connectedDevices){
        String name = device.getName();
        //...  check for the name you want
        if( name.equals("whatnameisit"){
             garniture = device
        } 
    }
    if (garniture != null){
        // yay we found it,  lets do our work with the device here 
    } 
```

# java - Java 泛型接口

> ID：13087168
> 
> 赞同：1
> 
> 时间：2012-10-26T12:45:45.680
> 
> 标签：java, class, interface

我有通用类类型， T 如下：

```
class MyClass<T> 
```

我也知道 T 是接口，里面只有一个方法，但我不知道是什么接口，我不能这样写：

```
class MyClass< T extends TheInterface > 
```

那么有没有办法调用这个方法呢？

```
public void callMe(T me, Object...params){
    // How can I invoke T interface method?
} 
```

我一直在尝试这个：

```
public void callMe(T me, Object... params) {
// methods.length is 244, just as in my activity class
        Method[] methods = me.getClass().getMethods(); 
        try {
            methods[0].invoke(me, params);
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
            return;
        } catch (IllegalAccessException e) {
            e.printStackTrace();
            return;
        } catch (InvocationTargetException e) {
            e.printStackTrace();
            return;

        }
} 
```

但它不工作

**编辑：**我发布了新[问题](https://stackoverflow.com/questions/13088507/java-signals-events-pattern)，解释了为什么我需要这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:48:15.027

是的，你必须写：

```
class MyClass< T extends TheInterface > 
```

有了这些信息，编译器就知道 T 有一个名为`callMe`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:05:57.727

如果您不能更改 MyClass 中的声明，那么您可以对其进行类型转换。

```
 public void callMe(T me, Object... params) {
        Someinterface instance = (Someinterface) me;
        list.callMe(me, params);
    } 
```

但仍然像下面这样声明应该是最好的解决方案

```
class MyClass<T extends Someinterface > 
```

下面是如何使用它的简单演示`reflection`

```
 class MyClass<T> {
    public void callMe(T me, Object... params) throws SecurityException,
            NoSuchMethodException {
        // How can I invoke T interface method?
        Method size = me.getClass().getMethod("size", null);
        Method add = me.getClass().getMethod("add", Object.class);

        try {
            add.invoke(me, 10);
            System.out.println(size.invoke(me, params));

        } catch (IllegalArgumentException e) {
            e.printStackTrace();
            return;
        } catch (IllegalAccessException e) {
            e.printStackTrace();
            return;
        } catch (InvocationTargetException e) {
            e.printStackTrace();
            return;

        }
    }
}

    MyClass<List> myclass = new MyClass<List>();
    myclass.callMe(new ArrayList(), null); 
```

输出 ：

```
 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T12:55:13.910

我不确定，你在寻找`Strategy`模式吗？

# javascript - 如何在javascript中替换+？

> ID：13087170
> 
> 赞同：2
> 
> 时间：2012-10-26T12:45:49.860
> 
> 标签：javascript

如何用unicode替换字符串中的字符'+'？

```
E.G.
  Before replace -> "table+end"
  After replace -> "table002Bend" 
```

我尝试使用

```
 tableName.replace(/+/g,"002B); 
```

但运行 JS 的浏览器抛出错误说明：

> *不合法的识别符*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:46:59.453

`+`如果您在正则表达式中使用它，您需要 escape 。试试这种方式：

```
tableName.replace(/\+/g,"002B") 
```

未转义的加号是匹配一个或多个量词。

请注意，您甚至不需要正则表达式来进行这个简单的替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T12:51:08.703

两件事：该`+`字符在正则表达式中具有特殊含义，如果您查看您得到的错误：

> SyntaxError：无效的正则表达式：/+/：无需重复

你看这`+`实际上意味着：*重复表达式的前一个“部分”*。您可以使用反斜杠来指定要替换文字`+`char ( `/\+/`)*或者*您可以创建一个字符类，其中您不需要转义所有特殊字符：`/[+]/`。

之后，由于缺少字符串分隔符，您可能仍然会显示错误：

```
tableName.replace(/+/g,"002B);//<--missing closing " 
```

总而言之，其中任何一个都可以解决问题：

```
tableName.replace(/\+/g,"002B");
tableName.replace(/[+]/g,"002B"); 
```

但是，如果您想对字符串*进行“url-encode”*，为什么不简单地使用`encodeURI(tableName)`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T12:48:43.133

使用正则表达式，`+`在正则表达式中有特殊含义，需要转义：

```
tableName = tableName.replace(/\+/g, '002B'); 
```

如果您只是替换单个`+`，则不需要正则表达式：

```
tableName = tableName.replace('+', '002B'); 
```

但是，需要注意的是它只会替换第一个`+`遇到的。进行“快速”全部替换的解决方法是结合`split()`和`join()`：

```
tableName = tableName.split('+').join('002B'); 
```

# python - popen 和 exec python 的区别

> ID：13087171
> 
> 赞同：1
> 
> 时间：2012-10-26T12:45:53.087
> 
> 标签：python

谁能解释 Python 中的 Popen 和 exec 有什么区别

我能够完成使用 exec 和 Popen 动态执行程序的相同任务。

这里的代码使用 EXEC 方法，但如果我使用 Popen 方法会发生什么。

代码1.py

```
def runjob(src, job):
    x = "from {src} import *" +  '\n' + "{job}(parm1=)"
    y = x.format(src=src, job=job)
    exec ( 'from ' + src + ' import *' + '\n' + job  + '(10)' )

def main():
    runjob(c:/python27/test_job', 'il') 
```

代码2.py

```
def fl(parm=None):
    print 'function1'
    print parm

def f2(parm=None):
    print 'function 2'
    print parm

def f3(parm=None):
    print 'function 3'
    print parm 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T13:02:42.027

`exec`并且`Popen`或多或少无关。

* * *

[`exec`](http://docs.python.org/reference/simple_stmts.html#the-exec-statement)用于运行一段python代码。

> 该语句支持 Python 代码的动态执行。第一个表达式应计算为字符串、打开的文件对象或代码对象。如果它是一个字符串，则该字符串被解析为一组 Python 语句，然后执行（除非出现语法错误）。如果是打开的文件，则解析文件直到 EOF 并执行。

* * *

[`Popen`](http://docs.python.org/library/subprocess.html#popen-constructor)是一个允许你运行任何程序的类。

> 在新进程中执行子程序。它提供了很大的灵活性，以便开发人员能够处理便利功能未涵盖的不太常见的情况。

您不仅可以运行其他程序，还可以读取它们的输出并设置许多有用的选项，例如工作目录或是否应该打开新终端等。

# c# - 在wpf InkCanvas上创建连接两个点的线

> ID：13087173
> 
> 赞同：0
> 
> 时间：2012-10-26T12:46:06.330
> 
> 标签：c#, wpf, inkcanvas

我有一个 wpf 墨水画布。我需要画一条连接两点的线。场景是当我点击inkcanvas时，我的线应该开始并且在mousedown事件左右，应该创建直线。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:54:06.337

在类中创建一个变量来存储该行并将其设置为空 然后在 inkcanvas 的鼠标单击事件上检查是否设置了 x1 和 y1 如果没有（或正常画布）设置 x1，y1 否则设置 x2，y2 并添加线到画布（设置你在代码变回什么都没有）

您还可以使用鼠标移动事件不断更新 x1、x2 直到用户单击，以便用户可以预览他们的行。

# ios - 钥匙串服务 API 在 iphonesimulator 6.0 中出现 errSecNotAvailable 失败

> ID：13087175
> 
> 赞同：5
> 
> 时间：2012-10-26T12:46:13.443
> 
> 标签：ios, security, unit-testing, ios-simulator, keychain

使用命令行工具执行目标并且 iphone 模拟器设置为硬件版本 6.0 (10A403) 时，对钥匙串服务的调用失败并**显示 errSecNotAvailable 。**如果我将模拟器版本更改为其他先前版本（4.3、5.0、5.1）并使用相同的命令行脚本重新执行，则调用成功。

我正在运行最新的 XCode 4.5，命令行工具是从 XCode 中下载的。

要重现此错误，只需执行以下操作：

1.  使用 OCUnit 目标设置 ios 库项目
2.  将基础 SDK 设置为 6.0
3.  将 iOS 部署目标设置为 4.3
4.  将帖子末尾的代码复制并粘贴到测试项目中（它只会尝试存储密码并检索它）
5.  将 Security.framework 添加到 OCUnit 目标

在 XCode 中执行 OCUnit 目标，并使用 iphone 模拟器中设置的任何硬件版本查看测试通过（只需在执行之间更改它）。

使用以下命令从命令行执行 OCUnit 目标：

```
xcodebuild -target TARGET_NAME_HERE -sdk iphonesimulator -configuration Release TEST_AFTER_BUILD=YES 
```

将 iphone 模拟器设置为硬件版本 6.0，测试将**失败**。如果将iphone模拟器硬件版本更改为4.3、5.0或5.1并再次执行命令行脚本，测试将**成功**。

这是命令行工具的问题吗？iphone模拟器问题？从命令行运行的 OCUnit 目标问题？

谁喜欢只有在彗星对齐时才能通过的单元测试？

有任何想法吗？

这是代码：

```
#define KEYCHAIN_ITEM_ATTRIBUTES (id)kSecClassGenericPassword, kSecClass, @"MyService", kSecAttrService, @"MyPassword", kSecAttrAccount

const NSString* MyPassword = @"blabla";

- (void)testExample
{
    // remove previous keychain item
    OSStatus status = SecItemDelete((CFTypeRef)[NSDictionary dictionaryWithObjectsAndKeys:KEYCHAIN_ITEM_ATTRIBUTES, nil]);
    NSLog(@"SecItemDelete status:%ld",status);
    NSParameterAssert(status == errSecSuccess || status == errSecItemNotFound);

    // add keychain item with new value
    NSData *data = [MyPassword dataUsingEncoding:NSUTF8StringEncoding];
    status = SecItemAdd((CFTypeRef)[NSDictionary dictionaryWithObjectsAndKeys:KEYCHAIN_ITEM_ATTRIBUTES, data, kSecValueData, nil], NULL);
    NSLog(@"SecItemAdd status:%ld",status);
    NSParameterAssert(status == errSecSuccess);

    // get password
    status = SecItemCopyMatching((CFTypeRef)[NSDictionary dictionaryWithObjectsAndKeys:KEYCHAIN_ITEM_ATTRIBUTES,
                                             kSecMatchLimitOne, kSecMatchLimit, kCFBooleanTrue, kSecReturnData, nil], (CFTypeRef *)&data);
    NSLog(@"SecItemCopyMatching status:%ld",status);
    NSParameterAssert(status == errSecSuccess);

    if (status == errSecItemNotFound)
        NSLog(@"SecItemCopyMatching status:%ld", status);
    else
        NSLog(@"SecItemCopyMatching result:%@",[[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease]);
} 
```

关于未启动的安全守护程序，我可以检查它是否正在启动，使用

```
launchctl list | grep securityd 
```

模拟器启动后，得到

```
-   0   com.apple.iPhoneSimulator:com.apple.securityd 
```

我还尝试停止此安全守护程序并手动启动另一个...我查看了 GTM 的 RunIPhoneUnitTest.sh 脚本以获取可以使用的简单行，但是当我尝试此操作时

```
launchctl submit -l ios6securityd -- /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/libexec/securityd 
```

在那个守护进程上给我一个 -5 状态码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:24:02.960

我遇到了这个问题，因为我在尝试从 Xcode 4.5.1 UI 运行我的单元测试时无法访问钥匙串。幸运的是，我在使用大多数以前的 Xcode 版本的 CI 构建中也熟悉了这种损坏，即模拟器的**securityd**没有正确启动。

尝试先启动 securityd，看看是否有帮助：

```
#!/bin/bash

simulator_root=`xcodebuild -version -sdk iphonesimulator Path`
"${simulator_root}/usr/libexec/securityd" 
```

这对我有用。

# castle-windsor - 检查注册组件的实现的正确方法是什么？

> ID：13087176
> 
> 赞同：2
> 
> 时间：2012-10-26T12:46:17.037
> 
> 标签：castle-windsor, castle

在测试模式下（当然我不关心其他地方的实现），我想检查注册组件的类型。我可以这样做：

```
 if (_container.Kernel.HasComponent(typeof(IIDAApi)))
        {
            if (_container.Resolve<IIDAApi>() is IDAApiStub)
                return;
        } 
```

但如果可能的话，我宁愿期待注册的配置。尖端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T11:08:18.867

```
var handler = container.Kernel.GetHandler(typeof(IFoo));

Assert.AreEqual(typeof(Foo), handler.Component.Implementation); 
```

# gwt - 使用 openam 从 Adfs2 到我的 gwt webapp 的身份验证

> ID：13087178
> 
> 赞同：1
> 
> 时间：2012-10-26T12:46:28.703
> 
> 标签：gwt, single-sign-on, adfs2.0, openam

我是 Adfs 和 openam 的新手。如果凭据存在于 Adfs 中，我想要做的是登录到我的应用程序。那么我该怎么做呢？

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:04:12.060

最好的办法是使用 openam 将 adfs 设置为 idp 创建一个 fedlet。

# c++ - Qt 中的多线程有问题？

> ID：13087179
> 
> 赞同：2
> 
> 时间：2012-10-26T12:46:30.203
> 
> 标签：c++, qt

我学习 Qt 已经有一段时间了，几天前我决定通过`QThread`. 我一直在关注[这个](https://www.youtube.com/watch?v=yazMHbIew0Q&list=SP2D1942A4688E9D63&index=35&feature=plpp_video)人。因为他说子类`QThread`化不是适当的方式，而是使用`QObject`是。我按照他的方法。但他创建了另一个继承自`QObject`. 我决定做一些改变：

```
class myclass
{
private:
    dowork();

private slots:
    slota();
    slotb();
    slotc();
}

myclass::dowork()
{
    QThread lett;
    QThread latt;
    QThread pltt;
    QObject lethread;
    connect(&lett, SIGNAL(started()), this, SLOT(slota()));
    lethread.moveToThread(&lett);
    QObject lathread;
    connect(&latt, SIGNAL(started()), this, SLOT(slotb()));
    lathread.moveToThread(&latt);
    QObject plthread;
    connect(&pltt, SIGNAL(started()), this, SLOT(slotc()));
    plthread.moveToThread(&pltt);

    lett.start();    
    latt.start();
    pltt.start();/*
    lett.wait();
    latt.wait();
    pltt.wait();*/
    while(lett.isRunning())
    {
        //qDebug() << "Still Running!";
    }
    lett.quit();
} 
```

如果我运行程序，它会`while`无限循环运行！它根本不是从那里出来的。我`qdebug`在 3 个插槽的实现内部使用来检查它是否正在进入它们，令人惊讶的是，没有一个插槽被调用。为什么呢？如果我删除评论，`.wait`那么程序会暂停。

这种方法有什么问题？我想避免额外的课程，因为我的程序非常小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:14:50.733

```
while(lett.isRunning())
{
    //qDebug() << "Still Running!";
}
lett.quit(); 
```

大错特错。当前线程正忙于等待，将一直在吃东西。但这不是你的问题。你的问题肯定是***主事件循环可能还没有开始***，即你还没有开始`QApplication.exec()`。

Qt 使用事件来启动线程，当您使用`movetoThread`,时`start`，特定事件会在当前线程（即执行这些方法的线程）中排队。如果主事件循环已经开始，那么将尽快处理。但在你的情况下，我敢打赌你的主要功能是：

```
 int main(){
   QApplication app();
   myclass onlyclassIwanttomake;
   onlyclassIwanttomake.dowork(); 
   app.exec(); <----HERE!!!
 } 
```

该线程将在主线程执行时启动`app.exec();`。当您忙于等待时，您正在阻止主线程处理启动事件所需的事件。

编辑：嗯，另一个问题是

```
lett.start();    
latt.start();
pltt.start(); 
```

启动 3 个已启动的线程，并永远保持空闲状态。他们没有做任何事情，但他们正在运行（即使您删除了循环）。

这是一篇[关于 Qt threading](http://blog.qt.digia.com/2006/12/04/threading-without-the-headache/)的文章。请花时间阅读。

# c# - 无法调试使用并发异步/等待的程序

> ID：13087188
> 
> 赞同：1
> 
> 时间：2012-10-26T12:47:04.600
> 
> 标签：c#, .net, debugging, .net-4.5, async-await

**[对该程序的](http://code.msdn.microsoft.com/Async-Sample-Example-from-9b9f505c)观察：**

*   通过这个程序慢慢按 F11 并不显示每次执行`ProcessURL()`

*   通过这个程序快速按 F11 显示更多的执行`ProcessURL()`

*   在 ProcessURL 中使用`Thread.Sleep(3000);`会导致 MainUI 线程挂起大约 30 秒。没有 UI 重绘，取消按钮不可用。

**需求：**

*   我想逐步执行 ProcessURL，或者使用本机 Visual Studio 工具或开源插件将其可视化

![在此处输入图像描述](../Images/e9a4f63ed1caa0c8a0200f7bf40c08b5.png)

**代码**

[可在此处下载](http://code.msdn.microsoft.com/Async-Sample-Example-from-9b9f505c)

```
namespace ProcessTasksAsTheyFinish
{
    public partial class MainWindow : Window
    {
        // Declare a System.Threading.CancellationTokenSource.
        CancellationTokenSource cts;

        public MainWindow()
        {
            InitializeComponent();
        }

        private async void startButton_Click(object sender, RoutedEventArgs e)
        {
            resultsTextBox.Clear();

            // Instantiate the CancellationTokenSource.
            cts = new CancellationTokenSource();

            try
            {
                await AccessTheWebAsync(cts.Token);
                resultsTextBox.Text += "\r\nDownloads complete.";
            }
            catch (OperationCanceledException)
            {
                resultsTextBox.Text += "\r\nDownloads canceled.\r\n";
            }
            catch (Exception)
            {
                resultsTextBox.Text += "\r\nDownloads failed.\r\n";
            }

            cts = null;
        }

        private void cancelButton_Click(object sender, RoutedEventArgs e)
        {
            if (cts != null)
            {
                cts.Cancel();
            }
        }

        async Task AccessTheWebAsync(CancellationToken ct)
        {
            HttpClient client = new HttpClient();

            // Make a list of web addresses.
            List<string> urlList = SetUpURLList();

            // ***Create a query that, when executed, returns a collection of tasks.
            IEnumerable<Task<int>> downloadTasksQuery =
                from url in urlList select ProcessURL(url, client, ct);

            // ***Use ToList to execute the query and start the tasks. 
            List<Task<int>> downloadTasks = downloadTasksQuery.ToList();

            // ***Add a loop to process the tasks one at a time until none remain.
            while (downloadTasks.Count > 0)
            {
                    // Identify the first task that completes.
                    Task<int> firstFinishedTask = await Task.WhenAny(downloadTasks);

                    // ***Remove the selected task from the list so that you don't
                    // process it more than once.
                    downloadTasks.Remove(firstFinishedTask);

                    // Await the completed task.
                    int length = await firstFinishedTask;
                    resultsTextBox.Text += String.Format
                        ("\r\nLength of the download:  {0}", length);
            }
        }

        private List<string> SetUpURLList()
        {
            List<string> urls = new List<string> 
            { 
                "http://msdn.microsoft.com",
                "http://msdn.microsoft.com/library/windows/apps/br211380.aspx",
                "http://msdn.microsoft.com/en-us/library/hh290136.aspx",
                "http://msdn.microsoft.com/en-us/library/dd470362.aspx",
                "http://msdn.microsoft.com/en-us/library/aa578028.aspx",
                "http://msdn.microsoft.com/en-us/library/ms404677.aspx",
                "http://msdn.microsoft.com/en-us/library/ff730837.aspx"
            };
            return urls;
        }

        async Task<int> ProcessURL(string url, HttpClient client, CancellationToken ct)
        {
            // GetAsync returns a Task<HttpResponseMessage>. 
            HttpResponseMessage response = await client.GetAsync(url, ct);
            // Retrieve the website contents from the HttpResponseMessage.
            byte[] urlContents = await response.Content.ReadAsByteArrayAsync();

            return urlContents.Length;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T14:18:12.480

假设您将调用放在调用之前`Thread.Sleep` *，*`await`那么 UI 线程被锁定是完全有道理的：您正在阻止它。您的方法将同步执行，直到您针对尚未完成`ProcessURL`的内容点击第一个表达式。`await`当它到达那里时，它将附加一个延续，然后返回。

因此，如果您`Thread.Sleep`在 await 之前进行了调用，则在执行 LINQ 查询时（调用时`ToList`，您将连续调用该方法 7 次，每次在 UI 线程中休眠 3 秒。UI 将被锁定发生这种情况时。如果您将 放在`Thread.Sleep` *之后*，`await`则 UI 仍将被锁定相同的时间，但会以少量爆发。

的异步等价物`Thread.Sleep`是使用[`Task.Delay`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.delay.aspx)：

```
await Task.Delay(3000); 
```

这基本上会立即返回，并附加一个将在 3 秒内触发的延续。

（我不知道调试问题 - 我不会尝试调试大多数这些语句......我不清楚你究竟想要实现什么或为什么。每个断点都*应该*`ProcessURL`被击中网址虽然。）

# html - 字体样式在前端不起作用

> ID：13087195
> 
> 赞同：1
> 
> 时间：2012-10-26T12:47:22.093
> 
> 标签：html, css, tinymce, textarea, rule

我有一个管理面板 - 由我开发 - （放置 tinymce 和 textarea）和前端（我输出保存在使用 tinymce 提交的数据库中的文本）。

问题在于前端字体样式（大小、对齐、系列、样式）不起作用。我查看了输出源文件，看到了未定义的 CSS 规则，例如：`<span class='italic'>MY TEXT</span>`或`<p class='textleft'>MY TEXT 2</p>`.

我需要包含在标题 tinymce CSS 文件中吗？或者，我需要自己写（`.italic { font-style:italic !important; }`）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:06:49.037

使用 tinymce 的[content_css 配置设置](http://www.tinymce.com/wiki.php/Configuration%3acontent_css)将自定义 css 样式包含到您的编辑器实例中。

# sql-server-2008 - 当一个 SQL 表同时收到多个更新请求时会发生什么？

> ID：13087197
> 
> 赞同：8
> 
> 时间：2012-10-26T12:47:24.270
> 
> 标签：sql-server-2008

我在 SQL Server 数据库中有一个表，其中记录了用户的最新活动时间。有人可以确认一下，当同时收到不同用户的多个更新请求时，SQL Server 会自动处理这种情况。我预计此表上有 25-50 个并发更新请求，但每个请求负责更新表中的不同行。我需要额外的东西，比如连接池等吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T12:54:15.733

是的，Sql Server 将处理这种情况。

它是一个 SGDB，它期望像这样的场景。

当您在 Sql 中插入/更新/删除一行时，sql 将锁定表/行/页以保证您将能够做您想做的事情。当您完成插入/更新/删除行时，该锁将被释放。

检查此[链接](https://stackoverflow.com/questions/2248011/when-i-update-insert-a-single-row-should-it-lock-the-entire-table)

并[介绍-locking-in-sql-server](http://www.sqlteam.com/article/introduction-to-locking-in-sql-server)

但是有几件事你应该做：

1 - 确保你会快速做你想做的事情。由于锁定问题，如果您保持连接时间过长，则对同一个表的其他请求可能会被锁定，直到您完成，这可能导致超时。

2 - 始终使用事务。

3 - 确保调整索引的填充因子。检查MSDN 上的[填充因子](http://msdn.microsoft.com/en-us/library/aa933139%28v=sql.80%29.aspx)。

4 -根据您的需要调整[隔离级别。](http://msdn.microsoft.com/en-us/library/aa213034%28v=sql.80%29.aspx)

5 - 摆脱未使用的索引以加快您的插入/更新。

连接池与您的问题不太相关。连接池是一种技术，可避免每次发送请求时创建与数据库的新连接的额外开销。在 C# 和其他使用 ADO 的语言中，这是自动完成的。看看这个：[SQL Server 连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)。

其他可能有用的链接：

[sql-2008 中插入更新大量数据的最佳实践](https://stackoverflow.com/questions/2342006/best-practices-for-inserting-updating-large-amount-of-data-in-sql-2008)

[加快插入性能](http://www.sqlcoffee.com/Tips0010.htm)

# scrollbar - 带有滚动条的 Surface Librarybar

> ID：13087199
> 
> 赞同：0
> 
> 时间：2012-10-26T12:47:27.243
> 
> 标签：scrollbar, scrollviewer, surface

我们有一个充满项目的图书馆栏，可以将其拖放到上面。现在客户希望在侧面看到类似滚动条或箭头的东西，以指示项目是否在可见端口之外。

正如您在下面的 librarybar 模板中看到的，它包含一个表面滚动查看器。但是我似乎无法显示这些滚动条。

有关如何解决此问题的任何建议？

librarybar 模板： [http ://pastebin.com/QVnvqbNm](http://pastebin.com/QVnvqbNm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:42:12.460

设法解决它。答案比预期的要容易。发现滚动条已被干净地删除，但有关它的所有属性仍然存在。有点误导。

最简单的解决方法：

1.  打开表情混合。

2.  插入 SurfaceScrollViewer

3.  从 SurfaceScrollViewer 打开模板

4.  将 SurfaceScrollbars 和必要的模板复制到库栏中的模板/资源中

5.  调整模板以满足您的要求

# c# - 问题 jquery url 在 asp.net 中找不到

> ID：13087201
> 
> 赞同：0
> 
> 时间：2012-10-26T12:47:32.573
> 
> 标签：c#, jquery, asp.net

当我在我的 jquery url 中使用它时，它会找到；

```
 $.ajax({
    url: '<%= ResolveClientUrl("~/TestJQueryTabStrip.aspx/DeleteRecord") %>',
    type: "POST",
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    data: JSON.stringify({ id: itemId })
 }); 
```

但是当我想把它改成这个时；

```
 url: '<%= ResolveClientUrl("~/UserControls/Order/OrderProductLicense.aspx/DeleteRecord") %>', 
```

我的这个文件夹中有功能。但它不火。

```
"~/UserControls/Order/OrderProductLicense.aspx/DeleteRecord" 
```

但是当使用文件夹时它可以工作。

```
'<%= ResolveClientUrl("~/TestJQueryTabStrip.aspx/DeleteRecord") %>' 
```

它没有找到。我该如何解决这个问题？

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:57:23.233

尝试

```
'<%= Page.ResolveClientUrl("~/TestJQueryTabStrip.aspx") %>' + '/DeleteRecord' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:23:01.017

我发现我的问题。我的问题是我的函数背后的代码不是静态的

# android - android微调器和数组适配器以编程方式

> ID：13087203
> 
> 赞同：9
> 
> 时间：2012-10-26T12:47:35.757
> 
> 标签：android

我正在尝试使用 ArrayAdapter 以编程方式创建 Spinner。这是作为 Android 库项目的一部分在封闭源 jar 中完成的，我无权访问资源。

我想知道如何自定义显示微调器的布局和文本视图。

--EDIT--
目前我正在使用以下代码

```
ArrayAdapter<T> spinnerData = new ArrayAdapter<T>(this, Android.R.layout.simple_spinner_item, T[]);

spinner.setAdapter(spinnerData); 
```

发生的事情是我无法控制字体、颜色或其他任何东西的大小。当我单击微调器以选择某些内容时，所有选项都以非常小的文本显示。我希望能够改变它在屏幕上的呈现方式。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-26T12:59:50.673

只需创建一个自定义 ArrayAdapter 并定义微调器文本视图在适配器的 getDropDownView 方法中的外观

```
public class CustomizedSpinnerAdapter extends ArrayAdapter<String> {

 private Activity context;
 String[] data = null;

 public CustomizedSpinnerAdapter(Activity context, int resource, String[] data2)
 {
     super(context, resource, data2);
     this.context = context;
     this.data = data2;
 }
  ...

 @Override
 public View getDropDownView(int position, View convertView, ViewGroup parent)
 {   
     View row = convertView;
     if(row == null)
     {
         //inflate your customlayout for the textview
         LayoutInflater inflater = context.getLayoutInflater();
         row = inflater.inflate(R.layout.spinner_layout, parent, false);
     }
     //put the data in it
     String item = data[position];
     if(item != null)
     {   
        TextView text1 = (TextView) row.findViewById(R.id.rowText);
        text1.setTextColor(Color.WHITE);
        text1.setText(item);
     }

     return row;
 }
...
} 
```

并为微调器设置此适配器

```
Spinner mySpinner = (Spinner) findViewById(R.id.mySpinner);
final String[] data = getResources().getStringArray(
            R.array.data);
final ArrayAdapter<String> adapter1 = new CustomizedSpinnerAdapter(
            AddSlaveActivity.this, android.R.layout.simple_spinner_item,
            data);
mySpinner.setAdapter(adapter1); 
```

# asp.net-mvc - asp.net mvc4跨域会话丢失

> ID：13087207
> 
> 赞同：1
> 
> 时间：2012-10-26T12:48:02.760
> 
> 标签：asp.net-mvc, session, dns, area

我正在使用 ASP.net MVC4 创建一个新的 Web 应用程序

我们的应用程序网站在 2 个域名 www.domain1.com 和 www.domain2.com 上运行

因为有很多常见的控制器/视图我实现了绑定到域的区域

```
public override string AreaName
        {
            get
            {
                return "NS1";
            }
        }
        public override void RegisterArea(AreaRegistrationContext context)
        {
            context.MapRoute(
            "NS1_default", "{controller}/{action}",
            new { controller = "Home", action = "Index" },
            new { hostname = new areaRedirect("www.domain1.com") }
        ).DataTokens["UseNamespaceFallback"] = true;
        } 
```

对于域2

```
public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
        "NS2_default", "{controller}/{action}",
        new { controller = "Home", action = "Index" },
        new { hostname = new areaRedirect("www.domain1.com") }
        ).DataTokens["UseNamespaceFallback"] = true;
    } 
```

这很好用，可以做我需要的一切，但是..

当我从一个区域切换到另一个区域时，我失去了登录会话。

有没有办法保持登录状态？帐户控制器对这两个领域是通用的。

所以基本上相同的应用程序，相同的服务器只是我的命名空间恰好是一个域名

而不是看到 www.somedomain/domain1/action 我们得到 www.domain1/action

谢谢你的时间

# json - 我想要一个可以通过 mvc 返回 json 的 jqGrid 类

> ID：13087214
> 
> 赞同：1
> 
> 时间：2012-10-26T12:48:17.550
> 
> 标签：json, asp.net-mvc-3, jqgrid

在 mvc razor 中使用 jqGrid

我想要一个可以使用 jqGrid json 格式并绑定网格的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:00:26.383

我认为您不需要定义任何类来生成jqGrid 所需的[JSON 数据。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)您可以返回匿名对象：

```
public JsonResult DynamicGridData (string sidx, string sord, int page, int rows)
{
    var query = ...;
    var totalRecords = query.Count();

    return Json(new {
        total = (totalRecords + rows - 1) / rows,
        page,
        records = totalRecords,
        rows = (from item in query
                select new {
                    id = item.Id.ToString(),
                    cell = new[] {
                        item.FirstName,
                        item.LastName,
                        item.Votes.ToString(),
                        item.Title
                    }
                }).ToList()
    },
    JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:16:25.880

首先，这是在 Stackoverflow.com 上提问的错误方式，请阅读[常见问题解答](https://stackoverflow.com/faq)和[whathaveyoutried.com](http://whathaveyoutried.com/)

但是由于您是 Stackoverflow 的新手，我将为您回答这个问题，

```
public class JqGridModel<T>
{
    public int page { get; set; }
    public Int32? total { get; set; }
    public Double? records { get; set; }
    public IEnumerable<T> GridData { get; set; }

    public JqGridModel<T> Bind(IEnumerable<T> data)
    {
        records = data.Count();
        GridData = data;
        page = 1;

        return this;
    }
} 
```

也从你所说的评论中，

> 实际上我正在尝试将 jqgrid 与 mvc razor 和实体框架一起使用。

我建议您阅读[这篇文章](http://yassershaikh.com/how-to-use-jqgrid-with-asp-net-mvc/)一次，它可能会有所帮助。这里也定义了一个 jqGrid 类...虽然上面的类更通用，但这完全取决于您的用例。

```
public class JqGridObject
{
    public string Page { get; set; }
    public int PageSize { get; set; }
    public string SortColumn { get; set; }
    public string SortOrder { get; set; }
    public List<Fruit> Data { get; set; }
}

public class Fruit
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

# c# - 从坐标列表中获取访问最多的区域

> ID：13087216
> 
> 赞同：1
> 
> 时间：2012-10-26T12:48:42.340
> 
> 标签：c#, sql, coordinates, latitude-longitude, geography

我从 MSSQL 数据库中的 GPS 跟踪器获得了坐标列表。

我想知道它去过的前 5 个访问量最大的地方（至少在 500 米之内）。

到目前为止，这是我得到的：

```
SELECT DeviceTime, LastValidLongitude, LastValidLatitude,
    (SELECT COUNT(*) FROM 
        (SELECT CAST(
            (SELECT geography::Point(DP1.LastValidLatitude, DP1.LastValidLongitude, 4326).STDistance(geography::Point(DP2.LastValidLatitude, DP2.LastValidLongitude, 4326))) as int
        ) AS DistanceInMeters FROM DevicePositions AS DP2 WHERE DeviceId = 110204443045041
    ) AS DIM WHERE DistanceInMeters < 500) AS NumberWithin500
FROM DevicePositions AS DP1 WHERE DeviceId = 110204443045041 
```

DeviceId 是跟踪器的 id DeviceTime 是它跟踪 LastValidLongitude 的时间，LastValidLatitude 是 wgs84 中的坐标

这给了我所有坐标的列表和 500 米内其他坐标的数量。

例子：

```
DeviceTime                LastValidLongitude    LastValidLatitude       NumberWithin500
2012-10-23 17:46:14.000   9.88183333333333      56.9835                 2
2012-10-25 13:45:17.000   9.88183333333333      56.9835                 2
2012-09-14 14:08:16.000   10.0173333333333      57.4558333333333        1 
```

但我如何从这里得到？我不能只对 NumberWithin500 进行分组，因为如果有 2 个地方我去过 12 次，我只会看到其中一个。

也将接受 C# 中的解决方案

谢谢

# c++ - C++ 中的 L 前缀究竟是什么？

> ID：13087219
> 
> 赞同：58
> 
> 时间：2012-10-26T12:48:46.267
> 
> 标签：c++, string, widestring

我了解它的作用：将字符串文字指定为`const wchar_t *`（宽字符串）而不是`const char *`（普通旧字符），但它实际上是如何定义的？

它是某种宏吗？它是 GCC 编译器的运算符吗？*它是*什么？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-10-26T12:51:07.673

字面前缀是核心语言的一部分，很像后缀：

```
'a'    // type: char
L'a'   // type: wchar_t

"a"    // type: char[2]
L"a"   // type: wchar_t[2]
U"a"   // type: char32_t[2]

1      // type: int
1U     // type: unsigned int

0.5    // type: double
0.5f   // type: float
0.5L   // type: long double 
```

请注意，*这*与 Unicode`wchar_t`无关。这是我关于这个话题的一个[扩展的咆哮。](https://stackoverflow.com/questions/6300804/wchars-encodings-standards-and-portability)

 ** * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-26T12:52:47.930

它被称为**编码前缀**：

### 2.14.5 字符串文字 [lex.string]

> `string-literal`:
> | `encoding-prefix`[`opt`]" `s-char-sequenceopt`"
> | `encoding-prefix`[`opt`]回复`raw-string`
> `encoding-prefix`：
> | `u8`
> | `u`
> | `U`
> | `L`

并标记一个宽字符串文字：

> 11) 以 开头的字符串文字`L`，例如`L"asdf"`，是宽字符串文字。宽字符串字面量的类型为“array of `n` `const wchar_t`”，其中 n 是字符串的大小，定义如下；它具有静态存储持续时间并使用给定字符进行初始化。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-29T19:09:36.333

这里 L 的意思是宽字符：`wchar_t`. 带 L 的字符串是 16 位而不是 8 位编码的，举个例子：

```
"A"    = 41
L"A"   = 00 41 
```*

# java - 用java做一个计算器

> ID：13087224
> 
> 赞同：0
> 
> 时间：2012-10-26T12:49:04.443
> 
> 标签：java

我不知道为什么我没有得到预期的结果！我把预期的结果写在了最后。好吧，我有两个类：`CalculatorEngine`和`CalculatorInput`，前者计算，而后者给出一个行模式接口。的代码`CalculatorEngine`是这样的，没什么花哨的：

```
public class CalculatorEngine {
    int value;
    int keep;
    int toDo;

    void binaryOperation(char op){
        keep = value;
        value = 0;
        toDo = op;
    }

    void add() {binaryOperation('+');}
    void subtract() {binaryOperation('-');}
    void multiply() {binaryOperation('*');}
    void divide() {binaryOperation('/');}

    void compute() {
        if (toDo == '+')
            value = keep + value;
        else if (toDo == '-')
            value = keep - value;
        else if (toDo == '*')
            value = keep * value;
        else if (toDo == '/')
            value = keep/value;
        keep = 0;
    }

    void clear(){
        value = 0;
        keep = 0;
    }

    void digit(int x){
        value = value*10 + x;
    }

    int display(){
        return (value);
    }

    CalculatorEngine() {clear();} //CONSTRUCTOR METHOD!

} 
```

的代码`CalculatorInput`是这样的：

```
import java.io.*;

public class CalculatorInput {
    BufferedReader stream;
    CalculatorEngine engine;

    CalculatorInput(CalculatorEngine e) {
        InputStreamReader input = new InputStreamReader(System.in);
        stream = new BufferedReader(input);
        engine = e;
    }

    void run() throws Exception {
        for (;;) {
            System.out.print("[" +engine.display()+ "]");
            String m = stream.readLine();
            if (m==null) break;
            if (m.length() > 0) {
                char c = m.charAt(0);
                if (c == '+') engine.add();
                else if (c == '*') engine.multiply();
                else if (c == '/') engine.divide();
                else if (c == '-') engine.subtract();
                else if (c == '=') engine.compute();
                else if (c == '0' && c <= '9') engine.digit(c - '0');
                else if (c == 'c' || c == 'C') engine.clear();
            }
        }
    }

    public static void main(String arg[]) throws Exception{
        CalculatorEngine e = new CalculatorEngine();
        CalculatorInput x = new CalculatorInput(e);
        x.run();
    }
} 
```

我希望答案是这样的：

```
[0]1
[1]3
[13]+
[0]1
[1]1
[11]=
[24] 
```

但我得到了这个：

```
[0]1
[0]3
[0]+
[0]1
[0]1
[0]+
[0] 
```

似乎`digit`功能无法正常工作。帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T12:52:56.363

改变这个：

```
if (c == '0' && c <= '9') 
```

对此：

```
if (c >= '0' && c <= '9') 
```

否则，只有当 c 为 时才会成立`'0'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T12:55:13.347

```
else if (c == '0' && c <= '9') engine.digit(c - '0'); 
```

如果 c 不等于 0 则为假..

# sql-server-2008 - 如何查看存储过程 sql 查询的最终查询文本？

> ID：13087228
> 
> 赞同：0
> 
> 时间：2012-10-26T12:49:19.813
> 
> 标签：sql-server-2008, sql-server-2008-r2, profiler, sql-server-profiler

我正在调查一个返回奇怪结果的存储过程。它动态构建 sql 并使用视图和函数。很难从代码中了解最终应用于数据库的 sql 查询实际上是什么。

我可以使用 SQL Server Profiler 查看最终查询文本吗？

如果有，步骤是什么？以及如何限制 Profiler 仅监视一个特定的存储过程？

# c# - 当 Visual Studio 只允许它成为“应用程序”设置时，如何允许用户更改 SQL 连接字符串？

> ID：13087235
> 
> 赞同：2
> 
> 时间：2012-10-26T12:49:38.770
> 
> 标签：c#, sql, winforms, visual-studio-2010

如果我可以将连接字符串`"User"`设置为供他们编辑，那现在就很好了。目前，该字符串包含对我的测试数据库所在机器的引用。我想构建一个 alpha 供其他人尝试，但他们需要将其指向他们自己的数据库实例。

`DataSets`更一般地说，在 Visual Studio 设计器中保留一个能够由用户指向配置的服务器的连接字符串的正确方法是什么？- 目前他们似乎依赖于我的设置中的连接字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:57:47.050

将 app.config 与 System.Configuration 一起使用，然后他们可以在配置中设置正确的连接字符串。

请参阅此问题以了解如何：

[从 App.config 获取连接字符串](https://stackoverflow.com/questions/6536715/get-connection-string-from-app-config)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:58:54.963

因为，据推测，返回到数据库的 ConnectionString 包含高度敏感的信息，例如服务器名称、数据库名称，甚至用户 ID 和密码；因此，该信息本质上被设计为对用户社区进行伪装或保密。您的应用程序的恶意用户会非常喜欢利用用户控制的连接字符串的机会。

看起来，如果您需要以这种方式控制数据，您应该考虑某种在后台执行特定数据主机选择的分析机制，而不是完全由用户控制的方式。

**编辑**

我建议的一种可能的替代方法是提前确定“替代”服务器，并将相应的连接字符串添加到应用程序的配置文件中。在应用程序本身中，提供某种与用户想要使用的数据集相关联的用户友好标识符，然后将该标识符在幕后与正确的连接字符串相关联，从而使连接字符串的详细信息保持私密。

# flot - 如何在 Flot 中设置标签的宽度？

> ID：13087239
> 
> 赞同：2
> 
> 时间：2012-10-26T12:49:58.200
> 
> 标签：flot

我创建了一个基本的 Flot 图表，但是标签太大了，覆盖了整个图表。谁能指导我？我查看了 flot 文档，但看不到我设置的会导致此问题的选项。

明确地说，我的意思是我得到一个与情节颜色相对应的小彩色方块，然后是很多空白，然后是系列的标签，然后加载更多空白。

这是我创建图表的方式：

```
 var d1 = [[0,5],[24, 5]];    
    var d2 = [[0,4],[64, 4]];
    var d3 = [[0,3],[2, 3]];
    var d4 = [[0,2],[49, 2]];       
    var d5 = [[0,1],[20, 1]];

var data1 = [
    {    
        label: "Product 1",
        data: d1,
        bars: {
            show: true,
            barWidth: 0.3,
            order: 5,
            fill: true,
            fillColor:  "#AA4643",
            horizontal : true

        }
    },
    {
        label: "Product 2",
        data: d2,
        bars: {
            show: true,
            barWidth: 0.3,
            order: 4,
            fill: true,
            fillColor:  "#89A54E",
            horizontal : true
        }
    },

    {
        label: "Product 3",
        data: d3,
        bars: {
            show: true,
            barWidth: 0.3,
            order: 3,
            fill: true,
            fillColor:  "#4572A7",
            horizontal : true
        }
    },
    {
        label: "Product 4",
        data: d4,
        bars: {
            show: true,
            barWidth: 0.3,
            order: 2,
            fill: true,
            fillColor:  "#80699B",
            horizontal : true
        }
    },
    {
        label: "Product 5",
        data: d5,
        bars: {
            show: true,
            barWidth: 0.3,
            order: 1,
            fill: true,
            fillColor:  "#11111B",
            horizontal : true
        }
    }
];

    jQuery.plot(jQuery("#myplaceholder"+1), data1, {colors: ["#AA4643", "#89A54E", "#4572A7", "#80699B", "#11111B"], yaxis: {show:false},
    xaxis: {     font: { size: 11, style: "italic", weight: "bold", family: "sans-serif", variant: "small-caps" }        },
    }); 
```

提前致谢！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:28:32.103

通过标签，我假设您的意思是图例中的标签（即产品 1）。

最可能的原因是您的页面中有 CSS 为不相关的内容指定了一些样式，并且它们正在渗入图例中。Flot 使用具有如下结构的 html 表来创建图例：

```
<div class="legend">
<div>
<table>
  <tr> 
    <!--This is the color box for each series, the divs are styled and colored to make it look pretty -->
    <td class="legendColorBox"><div><div></div></div></td>
  </tr>
  <tr>
    <td class="legendLabel">Product 1</td>
  </tr>
  <!-- repeated for each series -->
</table>
</div>
</div> 
```

因此，如果您在某处为所有`td`元素设置了 CSS 样式，或者您碰巧有用于`.legendLabel`or的现有 CSS 类`.legend`，那肯定会解释您的问题。

如果您查看此示例，您会发现没有任何 CSS 的代码没有任何问题：http: [//jsfiddle.net/ryleyb/AkqyC/](http://jsfiddle.net/ryleyb/AkqyC/)

# jquery - Jquery微调器初始值未设置

> ID：13087251
> 
> 赞同：5
> 
> 时间：2012-10-26T12:50:32.810
> 
> 标签：jquery, jquery-ui, spinner

我在我的 Web 表单上使用 JQuery 微调器控件。但它的初始值没有被设置。我正在使用 IE9 + VS2010

这是我在常用函数中编写的代码。我在运行时调用此函数并相应地发送参数。

```
function(spinnerid, minval, maxval, initvalue, step) {
$("#" + spinnerid).spinner({ min: minval, max: maxval, increment: step, value: initvalue });
} 
```

这些是我使用的库：

```
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<link type="text/css" rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" /> 
```

这是 HTML 代码：

```
<input type="text" id="income" class="income" /> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-26T13:18:36.903

我不知道为什么 value 选项没有像记录的那样工作。我自己试过了，也有同样的问题。不过，这将解决您的问题...

```
function setSpinner(spinnerid, minval, maxval, initvalue) {
    $("#" + spinnerid).spinner({ min: minval, max: maxval }).val(initvalue);
} 
```

我只是`val()`在末尾添加了设置初始值。（我还添加了一个函数名称，只是因为您在问题中错过了它。将其命名为您需要的名称。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-18T07:21:31.507

施工期间没有`value`选择。`spinner`您必须`.val()`像@Archer 建议的那样使用。
另外，另一个问题是`increment`，你的意思是`incremental`。或者`step`，如果您试图传递一个数字。检查链接的文档。

所以你的功能变成

```
function(spinnerId, min, max, init, step) {
    $('#' + spinnerId)
        .spinner({min:min, max:max, incremental /*or 'step'?*/:step})
        .val(init)
    ;
} 
```

参考： [微调器 API](http://api.jqueryui.com/spinner/#options)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T07:58:25.373

您是否可能将jQueryUI与[jQuery EasyUI](http://www.jeasyui.com/documentation/spinner.php)[混淆](http://api.jqueryui.com/spinner/)了？ 您的呼叫与 easyUI 的呼叫完全一样......[请参阅我的其他答案以正确使用 jQueryUI]
`.spinner()`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-26T12:55:24.617

也使用 jquery 默认库... [http://jquery.com/download/](http://jquery.com/download/)

# ios - 在哪里可以找到 tesseract->setvariable 函数的第一个参数的可用属性名称列表？

> ID：13087252
> 
> 赞同：13
> 
> 时间：2012-10-26T12:50:33.607
> 
> 标签：ios, xcode, tesseract

从大量的护目镜中，我只能找到其中几个作为 tesseract 的 setVariable(1st param, 2nd param) 的示例

```
tesseract->SetVariable("tessedit_char_whitelist", "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ");
tesseract->SetVariable("language_model_penalty_non_freq_dict_word", "0");
tesseract->SetVariable("language_model_penalty_non_dict_word", "0");
tesseract->SetVariable("tessedit_char_blacklist", "xyz");
tesseract->SetVariable("classify_bln_numeric_mode", "1"); 
```

我想知道还有多少？

有没有可用的清单？如果有请给我它的链接。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-25T22:21:06.527

对于所有沮丧的 iOS 编码员。在标题 tesseractclass.h 中找到列表，这是列表

```
 BOOL_VAR_H(tessedit_resegment_from_boxes, false,
             "Take segmentation and labeling from box file");
  BOOL_VAR_H(tessedit_resegment_from_line_boxes, false,
              "Conversion of word/line box file to char box file");
  BOOL_VAR_H(tessedit_train_from_boxes, false,
             "Generate training data from boxed chars");
  BOOL_VAR_H(tessedit_make_boxes_from_boxes, false,
             "Generate more boxes from boxed chars");
  BOOL_VAR_H(tessedit_dump_pageseg_images, false,
             "Dump intermediate images made during page segmentation");
  INT_VAR_H(tessedit_pageseg_mode, PSM_SINGLE_BLOCK,
            "Page seg mode: 0=osd only, 1=auto+osd, 2=auto, 3=col, 4=block,"
            " 5=line, 6=word, 7=char"
            " (Values from PageSegMode enum in publictypes.h)");
  INT_VAR_H(tessedit_ocr_engine_mode, tesseract::OEM_TESSERACT_ONLY,
            "Which OCR engine(s) to run (Tesseract, Cube, both). Defaults"
            " to loading and running only Tesseract (no Cube, no combiner)."
            " (Values from OcrEngineMode enum in tesseractclass.h)");
  STRING_VAR_H(tessedit_char_blacklist, "",
               "Blacklist of chars not to recognize");
  STRING_VAR_H(tessedit_char_whitelist, "",
               "Whitelist of chars to recognize");
  BOOL_VAR_H(tessedit_ambigs_training, false,
             "Perform training for ambiguities");
  INT_VAR_H(pageseg_devanagari_split_strategy,
            tesseract::ShiroRekhaSplitter::NO_SPLIT,
            "Whether to use the top-line splitting process for Devanagari "
            "documents while performing page-segmentation.");
  INT_VAR_H(ocr_devanagari_split_strategy,
            tesseract::ShiroRekhaSplitter::NO_SPLIT,
            "Whether to use the top-line splitting process for Devanagari "
            "documents while performing ocr.");
  STRING_VAR_H(tessedit_write_params_to_file, "",
               "Write all parameters to the given file.");
  BOOL_VAR_H(tessedit_adapt_to_char_fragments, true,
             "Adapt to words that contain "
             " a character composed form fragments");
  BOOL_VAR_H(tessedit_adaption_debug, false,
             "Generate and print debug information for adaption");
  INT_VAR_H(bidi_debug, 0, "Debug level for BiDi");
  INT_VAR_H(applybox_debug, 1, "Debug level");
  INT_VAR_H(applybox_page, 0, "Page number to apply boxes from");
  STRING_VAR_H(applybox_exposure_pattern, ".exp",
               "Exposure value follows this pattern in the image"
               " filename. The name of the image files are expected"
               " to be in the form [lang].[fontname].exp[num].tif");
  BOOL_VAR_H(applybox_learn_chars_and_char_frags_mode, false,
             "Learn both character fragments (as is done in the"
             " special low exposure mode) as well as unfragmented"
             " characters.");
  BOOL_VAR_H(applybox_learn_ngrams_mode, false,
             "Each bounding box is assumed to contain ngrams. Only"
             " learn the ngrams whose outlines overlap horizontally.");
  BOOL_VAR_H(tessedit_display_outwords, false, "Draw output words");
  BOOL_VAR_H(tessedit_training_tess, false, "Call Tess to learn blobs");
  BOOL_VAR_H(tessedit_dump_choices, false, "Dump char choices");
  BOOL_VAR_H(tessedit_fix_fuzzy_spaces, true,
             "Try to improve fuzzy spaces");
  BOOL_VAR_H(tessedit_unrej_any_wd, false,
             "Dont bother with word plausibility");
  BOOL_VAR_H(tessedit_fix_hyphens, true, "Crunch double hyphens?");
  BOOL_VAR_H(tessedit_redo_xheight, true, "Check/Correct x-height");
  BOOL_VAR_H(tessedit_enable_doc_dict, true,
             "Add words to the document dictionary");
  BOOL_VAR_H(tessedit_debug_fonts, false, "Output font info per char");
  BOOL_VAR_H(tessedit_debug_block_rejection, false, "Block and Row stats");
  BOOL_VAR_H(tessedit_enable_bigram_correction, false,
             "Enable correction based on the word bigram dictionary.");
  INT_VAR_H(tessedit_bigram_debug, 0, "Amount of debug output for bigram "
            "correction.");
  INT_VAR_H(debug_x_ht_level, 0, "Reestimate debug");
  BOOL_VAR_H(debug_acceptable_wds, false, "Dump word pass/fail chk");
  STRING_VAR_H(chs_leading_punct, "('`\"", "Leading punctuation");
  STRING_VAR_H(chs_trailing_punct1, ").,;:?!", "1st Trailing punctuation");
  STRING_VAR_H(chs_trailing_punct2, ")'`\"", "2nd Trailing punctuation");
  double_VAR_H(quality_rej_pc, 0.08, "good_quality_doc lte rejection limit");
  double_VAR_H(quality_blob_pc, 0.0, "good_quality_doc gte good blobs limit");
  double_VAR_H(quality_outline_pc, 1.0,
               "good_quality_doc lte outline error limit");
  double_VAR_H(quality_char_pc, 0.95, "good_quality_doc gte good char limit");
  INT_VAR_H(quality_min_initial_alphas_reqd, 2, "alphas in a good word");
  BOOL_VAR_H(tessedit_tess_adapt_to_rejmap, false,
             "Use reject map to control Tesseract adaption");
  INT_VAR_H(tessedit_tess_adaption_mode, 0x27,
            "Adaptation decision algorithm for tess");
  BOOL_VAR_H(tessedit_minimal_rej_pass1, false,
             "Do minimal rejection on pass 1 output");
  BOOL_VAR_H(tessedit_test_adaption, false, "Test adaption criteria");
  BOOL_VAR_H(tessedit_matcher_log, false, "Log matcher activity");
  INT_VAR_H(tessedit_test_adaption_mode, 3,
            "Adaptation decision algorithm for tess");
  BOOL_VAR_H(save_blob_choices, false,
             "Save the results of the recognition step"
             " (blob_choices) within the corresponding WERD_CHOICE");
  BOOL_VAR_H(test_pt, false, "Test for point");
  double_VAR_H(test_pt_x, 99999.99, "xcoord");
  double_VAR_H(test_pt_y, 99999.99, "ycoord");
  INT_VAR_H(paragraph_debug_level, 0, "Print paragraph debug info.");
  INT_VAR_H(cube_debug_level, 1, "Print cube debug info.");
  STRING_VAR_H(outlines_odd, "%| ", "Non standard number of outlines");
  STRING_VAR_H(outlines_2, "ij!?%\":;", "Non standard number of outlines");
  BOOL_VAR_H(docqual_excuse_outline_errs, false,
             "Allow outline errs in unrejection?");
  BOOL_VAR_H(tessedit_good_quality_unrej, true,
             "Reduce rejection on good docs");
  BOOL_VAR_H(tessedit_use_reject_spaces, true, "Reject spaces?");
  double_VAR_H(tessedit_reject_doc_percent, 65.00,
               "%rej allowed before rej whole doc");
  double_VAR_H(tessedit_reject_block_percent, 45.00,
               "%rej allowed before rej whole block");
  double_VAR_H(tessedit_reject_row_percent, 40.00,
               "%rej allowed before rej whole row");
  double_VAR_H(tessedit_whole_wd_rej_row_percent, 70.00,
               "Number of row rejects in whole word rejects"
               "which prevents whole row rejection");
  BOOL_VAR_H(tessedit_preserve_blk_rej_perfect_wds, true,
             "Only rej partially rejected words in block rejection");
  BOOL_VAR_H(tessedit_preserve_row_rej_perfect_wds, true,
             "Only rej partially rejected words in row rejection");
  BOOL_VAR_H(tessedit_dont_blkrej_good_wds, false,
             "Use word segmentation quality metric");
  BOOL_VAR_H(tessedit_dont_rowrej_good_wds, false,
             "Use word segmentation quality metric");
  INT_VAR_H(tessedit_preserve_min_wd_len, 2,
            "Only preserve wds longer than this");
  BOOL_VAR_H(tessedit_row_rej_good_docs, true,
             "Apply row rejection to good docs");
  double_VAR_H(tessedit_good_doc_still_rowrej_wd, 1.1,
               "rej good doc wd if more than this fraction rejected");
  BOOL_VAR_H(tessedit_reject_bad_qual_wds, true,
             "Reject all bad quality wds");
  BOOL_VAR_H(tessedit_debug_doc_rejection, false, "Page stats");
  BOOL_VAR_H(tessedit_debug_quality_metrics, false,
             "Output data to debug file");
  BOOL_VAR_H(bland_unrej, false, "unrej potential with no chekcs");
  double_VAR_H(quality_rowrej_pc, 1.1,
               "good_quality_doc gte good char limit");
  BOOL_VAR_H(unlv_tilde_crunching, true,
             "Mark v.bad words for tilde crunch");
  BOOL_VAR_H(crunch_early_merge_tess_fails, true, "Before word crunch?");
  BOOL_VAR_H(crunch_early_convert_bad_unlv_chs, false, "Take out ~^ early?");
  double_VAR_H(crunch_terrible_rating, 80.0, "crunch rating lt this");
  BOOL_VAR_H(crunch_terrible_garbage, true, "As it says");
  double_VAR_H(crunch_poor_garbage_cert, -9.0,
               "crunch garbage cert lt this");
  double_VAR_H(crunch_poor_garbage_rate, 60, "crunch garbage rating lt this");
  double_VAR_H(crunch_pot_poor_rate, 40, "POTENTIAL crunch rating lt this");
  double_VAR_H(crunch_pot_poor_cert, -8.0, "POTENTIAL crunch cert lt this");
  BOOL_VAR_H(crunch_pot_garbage, true, "POTENTIAL crunch garbage");
  double_VAR_H(crunch_del_rating, 60, "POTENTIAL crunch rating lt this");
  double_VAR_H(crunch_del_cert, -10.0, "POTENTIAL crunch cert lt this");
  double_VAR_H(crunch_del_min_ht, 0.7, "Del if word ht lt xht x this");
  double_VAR_H(crunch_del_max_ht, 3.0, "Del if word ht gt xht x this");
  double_VAR_H(crunch_del_min_width, 3.0, "Del if word width lt xht x this");
  double_VAR_H(crunch_del_high_word, 1.5,
               "Del if word gt xht x this above bl");
  double_VAR_H(crunch_del_low_word, 0.5, "Del if word gt xht x this below bl");
  double_VAR_H(crunch_small_outlines_size, 0.6, "Small if lt xht x this");
  INT_VAR_H(crunch_rating_max, 10, "For adj length in rating per ch");
  INT_VAR_H(crunch_pot_indicators, 1, "How many potential indicators needed");
  BOOL_VAR_H(crunch_leave_ok_strings, true, "Dont touch sensible strings");
  BOOL_VAR_H(crunch_accept_ok, true, "Use acceptability in okstring");
  BOOL_VAR_H(crunch_leave_accept_strings, false,
             "Dont pot crunch sensible strings");
  BOOL_VAR_H(crunch_include_numerals, false, "Fiddle alpha figures");
  INT_VAR_H(crunch_leave_lc_strings, 4,
            "Dont crunch words with long lower case strings");
  INT_VAR_H(crunch_leave_uc_strings, 4,
            "Dont crunch words with long lower case strings");
  INT_VAR_H(crunch_long_repetitions, 3, "Crunch words with long repetitions");
  INT_VAR_H(crunch_debug, 0, "As it says");
  INT_VAR_H(fixsp_non_noise_limit, 1,
            "How many non-noise blbs either side?");
  double_VAR_H(fixsp_small_outlines_size, 0.28, "Small if lt xht x this");
  BOOL_VAR_H(tessedit_prefer_joined_punct, false, "Reward punctation joins");
  INT_VAR_H(fixsp_done_mode, 1, "What constitues done for spacing");
  INT_VAR_H(debug_fix_space_level, 0, "Contextual fixspace debug");
  STRING_VAR_H(numeric_punctuation, ".,",
               "Punct. chs expected WITHIN numbers");
  INT_VAR_H(x_ht_acceptance_tolerance, 8,
            "Max allowed deviation of blob top outside of font data");
  INT_VAR_H(x_ht_min_change, 8, "Min change in xht before actually trying it");
  BOOL_VAR_H(tessedit_write_block_separators, false,
             "Write block separators in output");
  BOOL_VAR_H(tessedit_write_rep_codes, false,
             "Write repetition char code");
  BOOL_VAR_H(tessedit_write_unlv, false, "Write .unlv output file");
  BOOL_VAR_H(tessedit_create_hocr, false, "Write .html hOCR output file");
  STRING_VAR_H(unrecognised_char, "|",
               "Output char for unidentified blobs");
  INT_VAR_H(suspect_level, 99, "Suspect marker level");
  INT_VAR_H(suspect_space_level, 100,
            "Min suspect level for rejecting spaces");
  INT_VAR_H(suspect_short_words, 2,
            "Dont Suspect dict wds longer than this");
  BOOL_VAR_H(suspect_constrain_1Il, false, "UNLV keep 1Il chars rejected");
  double_VAR_H(suspect_rating_per_ch, 999.9, "Dont touch bad rating limit");
  double_VAR_H(suspect_accept_rating, -999.9, "Accept good rating limit");
  BOOL_VAR_H(tessedit_minimal_rejection, false, "Only reject tess failures");
  BOOL_VAR_H(tessedit_zero_rejection, false, "Dont reject ANYTHING");
  BOOL_VAR_H(tessedit_word_for_word, false,
             "Make output have exactly one word per WERD");
  BOOL_VAR_H(tessedit_zero_kelvin_rejection, false,
             "Dont reject ANYTHING AT ALL");
  BOOL_VAR_H(tessedit_consistent_reps, true, "Force all rep chars the same");
  INT_VAR_H(tessedit_reject_mode, 0, "Rejection algorithm");
  INT_VAR_H(tessedit_ok_mode, 5, "Acceptance decision algorithm");
  BOOL_VAR_H(tessedit_rejection_debug, false, "Adaption debug");
  BOOL_VAR_H(tessedit_flip_0O, true, "Contextual 0O O0 flips");
  double_VAR_H(tessedit_lower_flip_hyphen, 1.5,
               "Aspect ratio dot/hyphen test");
  double_VAR_H(tessedit_upper_flip_hyphen, 1.8,
               "Aspect ratio dot/hyphen test");
  BOOL_VAR_H(rej_trust_doc_dawg, false, "Use DOC dawg in 11l conf. detector");
  BOOL_VAR_H(rej_1Il_use_dict_word, false, "Use dictword test");
  BOOL_VAR_H(rej_1Il_trust_permuter_type, true, "Dont double check");
  BOOL_VAR_H(rej_use_tess_accepted, true, "Individual rejection control");
  BOOL_VAR_H(rej_use_tess_blanks, true, "Individual rejection control");
  BOOL_VAR_H(rej_use_good_perm, true, "Individual rejection control");
  BOOL_VAR_H(rej_use_sensible_wd, false, "Extend permuter check");
  BOOL_VAR_H(rej_alphas_in_number_perm, false, "Extend permuter check");
  double_VAR_H(rej_whole_of_mostly_reject_word_fract, 0.85, "if >this fract");
  INT_VAR_H(tessedit_image_border, 2, "Rej blbs near image edge limit");
  STRING_VAR_H(ok_repeated_ch_non_alphanum_wds, "-?*\075",
               "Allow NN to unrej");
  STRING_VAR_H(conflict_set_I_l_1, "Il1[]", "Il1 conflict set");
  INT_VAR_H(min_sane_x_ht_pixels, 8, "Reject any x-ht lt or eq than this");
  BOOL_VAR_H(tessedit_create_boxfile, false, "Output text with boxes");
  INT_VAR_H(tessedit_page_number, -1,
            "-1 -> All pages, else specifc page to process");
  BOOL_VAR_H(tessedit_write_images, false, "Capture the image from the IPE");
  BOOL_VAR_H(interactive_display_mode, false, "Run interactively?");
  STRING_VAR_H(file_type, ".tif", "Filename extension");
  BOOL_VAR_H(tessedit_override_permuter, true, "According to dict_word");
  INT_VAR_H(tessdata_manager_debug_level, 0,
            "Debug level for TessdataManager functions.");
  STRING_VAR_H(tessedit_load_sublangs, "",
               "List of languages to load with this one");
  // Min acceptable orientation margin (difference in scores between top and 2nd
  // choice in OSResults::orientations) to believe the page orientation.
  double_VAR_H(min_orientation_margin, 7.0,
               "Min acceptable orientation margin");
  BOOL_VAR_H(textord_tabfind_show_vlines, false, "Debug line finding");
  BOOL_VAR_H(textord_use_cjk_fp_model, FALSE, "Use CJK fixed pitch model");
  BOOL_VAR_H(tessedit_init_config_only, false,
             "Only initialize with the config file. Useful if the instance is "
             "not going to be used for OCR but say only for layout analysis.");
  BOOL_VAR_H(textord_equation_detect, false, "Turn on equation detector"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-28T13:25:05.630

这段代码应该对 iOS 有用......可能需要一些调整。

```
bool verboseOut = true;

if (verboseOut) {        //Write to console current Settings
   char buffer [256];
   FILE * pFile = tmpfile();
   tesseract->PrintVariables(pFile);
   rewind(pFile);
   while (!feof(pFile)) {
      if (fgets (buffer,256,pFile))
            fputs (buffer,stdout);
   } fclose(pFile);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T21:19:11.910

大约有 660 个变量。您可以通过执行 PrintVariablesToFile API 函数获取完整列表。

```
textord_debug_tabfind   0
textord_debug_bugs  0
textord_testregion_left -1
textord_testregion_top  -1
textord_testregion_right    2147483647
textord_testregion_bottom   2147483647
textord_tabfind_show_partitions 0
.... 
```

# ruby-on-rails - 在视图页面栏的父复选框下显示子复选框

> ID：13087254
> 
> 赞同：0
> 
> 时间：2012-10-26T12:50:45.053
> 
> 标签：ruby-on-rails

> 我在视图页面中显示复选框，数据将来自数据库。这是我的代码，问题是循环时如果出现相同的父名称，它会显示相同的父复选框两次。

```
<% @permission.each do |f| %>
        <% if @controller_code != f.controller_code %>
            <% @controller_code = f.controller_code %>
            <%= check_box_tag "cntrl_#{f.controller_code}", f.controller_code, false,  :class => "Par_#{f.controller_code}", :id => "Par_#{f.controller_code}" %> <%= f.controller_name %>
            <br/>
            <% @permission.each do |f| %>
                <% if @controller_code == f.controller_code %>
                    &nbsp;  &nbsp;<%= check_box_tag "action_#{f.controller_code}_#{f.action_code}",f.action_code, false,  :class => "Child_#{f.controller_code}", :id => "Child_#{f.controller_code}_#{f.action_code}" %> <%= f.action_name %>
                    <br/>
                <% end %>
            <% end %>   
        <% end %> 
```

> 我也尝试过这种方式，但它不能正常工作..

```
<% @permission.each do |f| %>   
            <% if @controller_code != f.controller_code %>
            <% @controller_code = f.controller_code %>
                <%= check_box_tag "cntrl_#{f.controller_code}", f.controller_code, false,  :class => "Par_#{f.controller_code}", :id => "Par_#{f.controller_code}" %> <%= f.controller_name %>
             <br/>
            <% end %>
            &nbsp;  &nbsp;<%= check_box_tag "action_#{f.controller_code}_#{f.action_code}",f.action_code, false,  :class => "Child_#{f.controller_code}", :id => "Child_#{f.controller_code}_#{f.action_code}" %> <%= f.action_name %>
            <br/>        
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:54:38.757

> 我在这里找到了我的问题的解决方案，它在控制器中执行以下操作

```
 @permission=Permission.all.where(active: 1)
if @permission.blank? == false
  @permissions =  Permission.all.where(active: 1).order_by(:controller_code => "asc")
else
  @permissions = ""
end 
```

> 并在视图页面中执行以下操作

```
<% @permissions.each do |f| %>
        <% if @controller_code != f.controller_code %>
            <% @controller_code = f.controller_code %>
            <%= check_box_tag "cntrl_#{f.controller_code}", f.controller_code, false,  :class => "Par_#{f.controller_code}", :id => "Par_#{f.controller_code}" %> <%= f.controller_name %>
            <br/>
            <% @permissions.each do |f| %>
                <% if @controller_code == f.controller_code %>
                    &nbsp;  &nbsp;<%= check_box_tag "action_#{f.controller_code}_#{f.action_code}",f.action_code, false,  :class => "Child_#{f.controller_code}", :id => "Child_#{f.controller_code}_#{f.action_code}" %> <%= f.action_name %>
                    <br/>
                <% end %>
            <% end %>   
        <% end %>
    <% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:36:30.963

我不知道我对你的问题给出了确切的答案，我认为这可以帮助你，

```
<% @permission.each do |f| %>
    <% if @controller_code != f.controller_code %>
        <% @controller_code = f.controller_code %>
        <%= check_box_tag "cntrl_#{f.controller_code}", f.controller_code, false,  :class => "Par_#{f.controller_code}", :id => "Par_#{f.controller_code}" %> <%= f.controller_name %>
    <% else %>
      <%= check_box_tag "action_#{f.controller_code}_#{f.action_code}",f.action_code, false,  :class => "Child_#{f.controller_code}", :id => "Child_#{f.controller_code}_#{f.action_code}" %>        
      <%= f.action_name %>
    <% end %>
<% end %> 
```

# exception-handling - 带有异常映射器的 Openejb REST 集成测试

> ID：13087255
> 
> 赞同：2
> 
> 时间：2012-10-26T12:50:45.940
> 
> 标签：exception-handling, junit, jax-rs, openejb

我正在为我的 jax-rs 服务编写一些集成测试，其中我有一组异常映射器。因此，在执行给定请求时，我期望基于异常映射器的特定响应代码。问题是在此环境中运行时我无法调用异常映射器。

我的服务应该在我的测试中引发逻辑异常：

```
@Stateless
@Path("/baseCustomer")
public class BaseCustomerService {
    @EJB //this one gets mocked in the unittest
    private BaseCustomerManagerBean customerManager;

    @POST
    @Path("crud")
    @Consumes({MediaType.APPLICATION_XML})
    @Produces({MediaType.APPLICATION_XML, MediaType.TEXT_XML})
    public Hkunde createCustomer(Hkunde newCustomer) throws LogicalException {
        //throws exception according to mocking
        return customerManager.createCustomer(newCustomer); 
    } 
```

和异常映射器：

```
@Provider
public class LogicalExceptionMapper implements ExceptionMapper<LogicalException> {

    @Override
    public Response toResponse(LogicalException exception) {
        return Response.status(Response.Status.FORBIDDEN).build();
    }
} 
```

我这样设置我的测试：

```
@Mock
private BaseCustomerManagerBean baseCustomerManager;
private HttpClient httpClient;
private BaseCustomerServiceClient client;

@Configuration
public Properties config() throws Exception {
    Properties properties = new Properties();
    properties.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.apache.openejb.client.RemoteInitialContextFactory");
    properties.setProperty(OpenEjbContainer.OPENEJB_EMBEDDED_REMOTABLE, Boolean.TRUE.toString());

    properties.setProperty(DeploymentFilterable.CLASSPATH_INCLUDE, LogicalExceptionMapper.class.getName());
    properties.setProperty("openejb.jaxrs.providers.auto", "true");
    properties.setProperty("openejb.servicemanager.enabled", "true");
    return properties;
}

@MockInjector
public Class<?> mockitoInjector() {
    return MockitoInjector.class;
}

@Module
public EjbModule createModule() throws Exception {
    final StatelessBean bean = (StatelessBean) new StatelessBean(BaseCustomerService.class).localBean();
    bean.setRestService(true);

    final EjbJar ejbJar = new EjbJar();
    ejbJar.addEnterpriseBean(bean);

    final OpenejbJar openejbJar = new OpenejbJar();
    openejbJar.addEjbDeployment(new EjbDeployment(ejbJar.getEnterpriseBeans()[0]));

    EjbModule module = new EjbModule(ejbJar);
    module.setOpenejbJar(openejbJar);

    return module;
}
@Module
public Class[] exceptionMappers() {
    return new Class[]{LogicalExceptionMapper.class};
}

@Before
public void setup() {
    ServiceHost serviceHost = new ServiceHost("http://localhost:4204/BaseCustomerServiceTest");
    httpClient = new HttpClient(serviceHost);
    client = new BaseCustomerServiceClient(httpClient);
}

@Test
public void createCustomer_givenLogicalException_expectsLogicalException() throws LogicalException {
    Hkunde expected = new Hkunde(true);

    when(baseCustomerManager.createCustomer(expected)).thenThrow(new LogicalException("mock"));

    try {
        client.createCustomer(expected);
        fail("Expected LogicalException");
    } catch (LogicalException ex) {
    }

    verify(baseCustomerManager).createCustomer(expected);
} 
```

因此，当我执行测试时，我`client`会从响应中读取响应代码，并根据此代码抛出异常。

问题是异常映射器从未被调用，并且我总是收到 500 内部服务器错误，而不是“禁止”响应。我猜我需要在设置 ejbjar 或类似的东西时添加更多信息。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:01:15.633

这个例子[http://svn.apache.org/repos/asf/openejb/trunk/openejb/examples/rest-applicationcomposer/src/test/java/org/superbiz/composed/rest/GreetingServiceTest.java](http://svn.apache.org/repos/asf/openejb/trunk/openejb/examples/rest-applicationcomposer/src/test/java/org/superbiz/composed/rest/GreetingServiceTest.java)（通过[http:// /rmannibucau.wordpress.com/2012/09/13/use-mockito-with-openejb/](http://rmannibucau.wordpress.com/2012/09/13/use-mockito-with-openejb/) ;-)) 正是你想要的。

之后添加以下内容`openejbJar.addEjbDeployment(...`，它应该可以工作。

```
final Properties properties = openejbJar.getEjbDeployment().iterator().next().getProperties();
properties.setProperty("cxf.jaxrs.providers", LogicalExceptionMapper.class.getName()); 
```

这是一个最小的工作示例（使用 openejb-cxf-rs 4.5.0 和 openejb-core 4.5.0）：

```
import java.util.Properties;
import javax.ejb.Singleton;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.core.Response;
import javax.ws.rs.ext.ExceptionMapper;
import org.apache.cxf.jaxrs.client.WebClient;
import org.apache.openejb.OpenEjbContainer;
import org.apache.openejb.config.EjbModule;
import org.apache.openejb.jee.EjbJar;
import org.apache.openejb.jee.StatelessBean;
import org.apache.openejb.jee.oejb3.EjbDeployment;
import org.apache.openejb.jee.oejb3.OpenejbJar;
import org.apache.openejb.junit.ApplicationComposer;
import org.apache.openejb.junit.Configuration;
import org.apache.openejb.junit.Module;
import static org.junit.Assert.assertEquals;
import org.junit.Test;
import org.junit.runner.RunWith;

@RunWith(ApplicationComposer.class)
public class RestWithExceptionMapper {

    @Configuration
    public Properties configuration() {
        return new Properties() {
            {
                setProperty(OpenEjbContainer.OPENEJB_EMBEDDED_REMOTABLE, Boolean.TRUE.toString());
            }
        };
    }

    @Module
    public EjbModule app() {
        final StatelessBean bean = (StatelessBean) new StatelessBean(MyResource.class).localBean();
        bean.setRestService(true);
        final EjbJar ejbJar = new EjbJar();
        ejbJar.addEnterpriseBean(bean);
        final OpenejbJar openejbJar = new OpenejbJar();
        openejbJar.addEjbDeployment(new EjbDeployment(ejbJar.getEnterpriseBeans()[0]));
        final Properties properties = openejbJar.getEjbDeployment().iterator().next().getProperties();
        properties.setProperty("cxf.jaxrs.providers", MyExceptionMapper.class.getName());
        final EjbModule module = new EjbModule(ejbJar);
        module.setOpenejbJar(openejbJar);
        return module;
    }

    public static class FooException extends RuntimeException {
    }

    public static class MyExceptionMapper implements ExceptionMapper<FooException> {

        @Override
        public Response toResponse(final FooException t) {
            return Response.ok("Objection!").build();
        }
    }

    @Path(value = "/test")
    public static class MyResource {

        @GET
        @Path(value = "/throw")
        public String throwException() {
            throw new FooException();
        }
    }

    @Test
    public void checkServiceWasDeployed() {
        assertEquals("Objection!", WebClient.create("http://localhost:4204/RestWithExceptionMapper").path("/test/throw").get(String.class));
    }
} 
```

# ios - sizeThatFits：返回不同的值 iOS 5 和 iOS 6

> ID：13087259
> 
> 赞同：1
> 
> 时间：2012-10-26T12:51:01.090
> 
> 标签：ios, ios5, ios6, uilabel

我正在调用`sizeThatFits:`ImageView 子类中的 UILabel，我发现错误是`sizeThatFits:`. 在 iOS 5 上我得到 3 行，在 iOS 6 上得到 1 行。

```
CGSize labelSize = [mTitleLabel sizeThatFits: CGSizeMake(self.bounds.size.width, 30)];
CGFloat lines = ceil(labelSize.width/self.frame.size.width); 
```

我尝试通过调用以下方法自己进行计算，但在两个版本上我得到的都是 7 而不是 3。

```
float lines = mTitleLabel.frame.size.height/mTitleLabel.font.lineHeight;
lines = ceilf(lines); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:25:46.313

似乎 sizeThatFits: 在 iOS5 中被破坏了，忽略了行数。

NSString * 标题 = ...; CGSize sizeToFit = [title sizeWithFont:label.font constrainedToSize:label.frame.size lineBreakMode:label.lineBreakMode];

# css - 指南针，添加导入路径

> ID：13087267
> 
> 赞同：4
> 
> 时间：2012-10-26T12:51:09.160
> 
> 标签：css, sass, compass-sass

要在多个目录中编译 .scss 文件，我们需要使用“add_import_path”（http://compass-style.org/help/tutorials/configuration-reference/），但我不明白如何。

我试图添加

```
additional_import_paths
add_import_path "_themes"
add_import_path = "_themes"
additional_import_paths = "_themes" 
```

在我的 config.rb 中，但没有运气，Compass 仅从**sass_dir = "_modules"编译**

* * *

更新：是的，这条线

```
add_import_path "_themes" 
```

没有给我们“找不到文件夹”错误，但 compass 仍然没有在其中编译 .scss

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-12T18:55:51.257

这里有一个公认的答案，但我不认为它回答了这个问题，而是提供了一个替代解决方案。这绝对没问题，我并不是要侮辱任何人，但这里没有的是关于`add_import_path`它对你有什么作用的信息。

如果有人曾经在 Magento 工作过，那么您就会熟悉它用于主题和模板文件的后备结构。为了设置使用相同默认皮肤的多个商店，我们需要包含一个备用结构，该结构允许在预定义的层次结构上进行更改。所以检查 dis config.rb 文件

**myThemeA - config.rb**

```
require "font-awesome-sass"
http_path = "/skin/frontend/rwd/myThemeA/"
add_import_path "../../../rwd/default/scss"
css_dir = "../css"
sass_dir = "../scss"
images_dir = "../images"
javascripts_dir = "../js"
fonts_dir = "../css/fonts"
relative_assets = true

output_style = :expanded
environment = :production
sourcemap = true 
```

**myThemeB - config.rb**

```
require "font-awesome-sass"
http_path = "/skin/frontend/rwd/myThemeB/"
add_import_path "../../../rwd/default/scss"
additional_import_paths = ["../../../rwd/myThemeA/scss"]
css_dir = "../css"
sass_dir = "../scss"
images_dir = "../images"
javascripts_dir = "../js"
fonts_dir = "../../myThemeA/css/fonts"
relative_assets = true

output_style = :expanded
environment = :production
sourcemap = true 
```

所以这里的想法是我们有三个皮肤，我们可以使用导入路径只覆盖某些文件，而不是在每个皮肤中包含每个文件。这也意味着，当我们想要进行全局更改时，取决于我们更改的内容，我们没有进行 3 次更改——只有在它的依赖项位于链中的位置。

所以...

**默认**是所有皮肤的基础

**myThemeA**本身就是皮肤，并使用默认值作为默认值

**myThemeB**使用 myThemeA 作为默认值，而 myThemeA 使用 default 作为默认值。

`add_import_path`使这项工作有效的是和的放置`additional_import_paths`。本质上，它`add_import_path`首先使用定义的作为默认值，然后随后的`additional_import_paths`数组将覆盖 in 中的`add_import_path`内容，但是任何未包含在附加值中的内容，它将在默认值中查找。

希望这对寻找有关导入路径的更多信息的任何人都有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:14:37.737

要编译多个`.scss`文件，您应该使用 . 将“子”文件导入“父”SASS 文件`@import "filename";`。

例如，如果您有 main.scss，您可能希望从名为 child.scss 的子样式表中导入更多 CSS，如下所示：

```
@import "_modules/child"; 
```

据我了解，`add_import_path`所做的只是允许您从其他目录导入文件。所以你也可以`@import`从`_themes/`

看到[这个线程](https://groups.google.com/forum/#!msg/compass-users/ayjkbqjfZ4M/CcDjdu3hmuIJ)。

# c# - 导致 Socket.Receive 返回的最小字节数是多少？

> ID：13087268
> 
> 赞同：3
> 
> 时间：2012-10-26T12:51:20.573
> 
> 标签：c#, .net, sockets

我们正在使用一个应用程序协议，它在前 4 个字节中指定消息的长度指示符。Socket.Receive 将返回与当时协议堆栈中的数据一样多的数据，或者阻塞直到数据可用。这就是为什么我们必须不断地从套接字读取，直到我们收到长度指示器中的字节数。如果对方关闭连接，Socket.Receive 将返回 0。我明白这一切。

是否有必须读取的最小字节数？我问的原因是从文档看来，当 socket.Receive 可以返回时，整个长度指示器（4 个字节）可能不可用。那么我们将不得不继续努力。尽量减少调用 socket.receive 的次数会更有效，因为它必须将内容复制进出缓冲区。那么一次获取一个字节来获取长度指示器是否更安全，假设 4 个字节将始终可用是否安全，或者我们是否应该继续尝试使用偏移变量获取 4 个字节？

我认为可能存在某种默认最低级别的原因是我遇到了一个名为 ReceiveLowWater 的变量，我可以在套接字选项中设置它。但这似乎只适用于 BSD。[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740476%28v=vs.85%29.aspx)请参阅 SO_RCVLOWAT。

这并不是那么重要，但我正在尝试编写单元测试。我已经在接口后面包装了一个标准的.Net Socket。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T08:48:37.880

> 是否可以安全地假设 4 个字节将始终可用

不。绝不。如果有人正在使用 telnet 和键盘测试您的协议怎么办？还是通过真正缓慢或繁忙的连接？您*可以*一次接收一个字节，也可以在多个`Receive()`调用中接收拆分“长度指示器”。这不是单元测试问题，而是导致生产问题的基本套接字问题，尤其是在压力情况下。

> 还是我们应该继续尝试使用偏移变量获取 4 个字节？

是的你应该。为了您的方便，您可以使用[`Socket.Receive()`](http://msdn.microsoft.com/en-us/library/w3xtz6a5.aspx)允许您指定要读取的字节数的重载，这样您就不会读取太多。但请注意，它*可以*返回少于所需的值，这就是`offset`参数的用途，因此它可以继续在同一个缓冲区中写入：

```
byte[] lenBuf = new byte[4];
int offset = 0;

while (offset < lenBuf.Length)
{       
    int received = socket.Receive(lenBuf, offset, lenBuf.Length - offset, 0);

    offset += received;     

    if (received == 0)
    {
        // connection gracefully closed, do your thing to handle that
    }
}

// Here you're ready to parse lenBuf 
```

> 我认为可能存在某种默认最低级别的原因是我遇到了一个名为 ReceiveLowWater 的变量，我可以在套接字选项中设置它。但这似乎只适用于 BSD。

没错，“receive low water”标志只是为了向后兼容而包含在内，除了抛出错误之外什么都不做，根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740532%28v=vs.85%29.aspx)，搜索`SO_RCVLOWAT`：

> Windows TCP/IP 提供程序不支持此选项。如果在 Windows Vista 和更高版本上使用此选项，getsockopt 和 setsockopt 函数将失败并显示 WSAEINVAL。在早期版本的 Windows 上，这些功能因 WSAENOPROTOOPT 失败。所以我猜你必须使用偏移量。

很遗憾，因为它*可以*提高性能。但是，正如@cdleonard 在评论中指出的那样，保留偏移变量的性能损失将是最小的，因为您*通常*会一次收到四个字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:06:25.263

不，没有最小缓冲区大小，接收中的长度只需要与实际空间匹配即可。

如果在消息实际数据之前发送了四个字节的长度，接收方需要处理返回1、2、3或4个字节的情况，并不断重复读取，直到接收到所有四个字节，然后重复该过程接收实际数据。

# ruby-on-rails - 太阳黑子搜索不起作用

> ID：13087269
> 
> 赞同：1
> 
> 时间：2012-10-26T12:51:21.253
> 
> 标签：ruby-on-rails, sunspot-rails, sunspot-solr

我正在尝试在我的网站中创建一个搜索选项，但在搜索查询后它不会显示结果。我遵循了本教程：[http ://collectiveidea.com/blog/archives/2011/03/08/full-text-searching-with-solr-and-sunspot/](http://collectiveidea.com/blog/archives/2011/03/08/full-text-searching-with-solr-and-sunspot/)

我的路线.rb：

```
 resources :users do
      collection do
        get :search
      end    
      member do
        get :following, :followers      
      end
    end

My index.html.erb

<table>
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th></th>
    <th></th>
    <th></th>
   </tr>

   <% @users.each do |user| %>
    <tr>
    <td><%= user.name %></td>
    <td><%= user.email %></td>
    <td><%= link_to 'Show', user %></td>
    <td><%= link_to 'Edit', edit_user_path(user) %></td>
    <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %>
              </td>
      </tr>
    <% end %>
    </table>
    <br />

<%= link_to 'New User', new_user_path %>

My model user.rb

searchable do
  text :name
end    

And my user controller

def index
  @users = User.paginate(page: params[:page])
end

   def search
    @users = User.search do
      keywords params[:query]
    end.results

    respond_to do |format|
      format.html { render :action => "index" }
    end
   end 
```

我究竟做错了什么？

# php - 我想将此格式“$1,000,000”更改为“1000000”

> ID：13087270
> 
> 赞同：-1
> 
> 时间：2012-10-26T12:51:23.483
> 
> 标签：php, javascript, html

> **可能重复：** [如何在 JavaScript 中用逗号打印一个数字作为千位分隔符](https://stackoverflow.com/questions/2901102)

我正在尝试以这种格式获取值，`$1,000,000`. 现在我得到了这种格式的值，`1000000`它工作正常，但我不想要这个。我希望它的价值为 1,000,000 美元，并在我的[PHP](http://en.wikipedia.org/wiki/PHP)代码中更改并接受它。

我的[HTML](http://en.wikipedia.org/wiki/HTML)：

```
<form action="index.php" method="Get">
    Enter the present value of pet: <input type="text" name="v" value="1000000"/><br>
    Enter the value of the pet you want: <input type="text" name="sv" value="1951153458"/><br>

    <input type="submit" />
</form> 
```

这是我的PHP：

```
<?php
    $i           = 0;
    $v           = isset($_GET['v']) ? (float) $_GET['v'] : 1000000;
    $sv          = isset($_GET['sv']) ? (float) $_GET['sv'] : 1951153458;
    $petearn     = 0;
    $firstowner  = 0;
    $secondowner = 0;

    And so on.............. 
```

我的计算器以这种方式工作正常：

```
http://ffsng.deewayz.in/index.php?v=1000000&sv=1951153458 
```

但我希望它是：

```
http://ffsng.deewayz.in/index.php?v=$1,000,000&sv=$1,951,153,458 
```

我很困惑如何将此格式更改`$1,000,000`为此`1000000`或是否有其他方式。我需要使用任何 JavaScript 代码吗？在提交表格之前？

有人试图通过以下方式帮助我，但我不知道如何使用它。

```
function reverse_number_format($num)
{
    $num = (float)str_replace(array(',', '$'), '', $num);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T12:55:45.153

只需替换字符串中的任何非数字字符：

```
$filteredValue = preg_replace('/[^0-9]/', '', $value); 
```

**更新**：

```
$value = '$1,951,1fd53,4.43.34'; // User submitted value

// Replace any non-numerical characters but leave dots
$filteredValue = preg_replace('/[^0-9.]+/', '', $value);

// Retrieve "dollars" and "cents" (if exists) parts
preg_match('/^(?<dollars>.*?)(\.(?<cents>[0-9]+))?$/', $filteredValue, $matches);

// Combine dollars and cents
$resultValue = 0;
if (isset($matches['dollars'])) {
    $resultValue = str_replace('.', '', $matches['dollars']);
    if (isset($matches['cents'])) {
        $resultValue .= '.' . $matches['cents'];
    }
}

echo $resultValue; // Result: 1951153443.34 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T12:55:12.983

```
$num = preg_replace('/[\$,]/', '', $num); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T12:58:16.727

要使用您提供的功能来做到这一点：

```
 $v = 1000000;
if(isset($_GET['v'])){
  $v = reverse_number_format($_GET['v']);
} 
```

在您的 reverse_number_format 函数中添加该行`return $num;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T12:54:29.010

您应该使用 PHP[的 floatval](http://php.net/manual/en/function.floatval.php)函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T13:01:06.833

在服务器上进行计算，就像你已经在做的那样。然后只需使用掩码将其显示给用户。

像：

```
function formated(nStr) {
    curr = '$ ';
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    if (x1 + x2) {
        return curr + x1 + x2
    }
    else {
        return ''
    }
} 
```

[请参阅http://jsfiddle.net/RASG/RXWTM/](http://jsfiddle.net/RASG/RXWTM/)上的工作示例。

# java - 聚合对象和边界

> ID：13087274
> 
> 赞同：0
> 
> 时间：2012-10-26T12:51:42.470
> 
> 标签：java, jakarta-ee, domain-driven-design

我对聚合对象感到困惑，并且只有聚合对象才有存储库，因为我不知道如何正确编码。

假设您有一个`User`,`Question`和`QuestionLog`实体。我不明白如何设置应该在聚合对象中放入多少的界限。你可以说没有用户就没有问题会存在于我的系统中，如果没有问题要附加，问题日志就不会存在。那么用户会是聚合根吗？

例如，您将如何添加问题日志？
对我来说，你似乎最终有很多嵌套等`User.addQuestionLog`？我不明白当它应该是一个聚合并被视为一个单元时，边界在哪里？`User`对我来说，一种聚合和另一种聚合会更自然`Question`。但是我不明白如何真正知道这一点。

一个问题也可以有类别，这个类别是否也是问题的一部分？为什么/为什么不？如何发现它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:35:01.100

不要考虑对象，DDD 是关于现实生活的。

真正的问题是：

*   X可以没有Y而存在吗？
*   Y 是 X 的一部分吗？

因此：

*   用户可以毫无疑问地存在吗？**是的**
*   如果用户退出，问题是否仍然可用？**是的**
*   日志是用户的一部分吗？**不**
*   日志是问题的一部分吗？**否**（因为它属于用户，但不属于用户）
*   类别是问题的一部分吗？**通常是**

所以我们最终得到了三个根聚合。

类别是值对象

# iphone - 在 iOS 中访问媒体库

> ID：13087280
> 
> 赞同：3
> 
> 时间：2012-10-26T12:52:21.180
> 
> 标签：iphone, ios

我想从媒体库中访问歌曲，然后想剪切该歌曲的一部分。我已经编写了从捆绑中剪切一首歌曲的功能，它工作正常。现在我想允许用户从库中选择歌曲，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:11:28.127

就像您在 ios 中使用 AssetsLibrary 访问所有其他媒体的方式一样，在此处了解更多信息：http: [//developer.apple.com/library/ios/#documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html)

请注意，所有媒体都是只读的，您只能操作歌曲的副本而不是原始媒体。

# php - 如何检查是否允许使用单个字符？

> ID：13087282
> 
> 赞同：-5
> 
> 时间：2012-10-26T12:52:21.543
> 
> 标签：php, regex, arrays, preg-match, pcre

我有一个包含 5 个单个字符的数组。应使用此正则表达式检查它们：

```
$regex = "/[a-zA-Z0-9]/"; 
```

如何检查是否允许使用单个字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T12:55:11.613

您也可以使用接受数组的 preg_grep [：](http://www.php.net/manual/en/function.preg-grep.php)

```
$matchedArray = preg_grep("/[a-zA-Z0-9]/", $array); 
```

根据文档：[preg_grep](http://www.php.net/manual/en/function.preg-grep.php)返回由与给定模式匹配的输入数组元素组成的数组。

然后你可以这样做：

```
if ($array === $matchedArray)
    echo "matched\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:58:24.087

为什么不将它们作为字符串进行检查？

```
if (preg_match('/^[a-z0-9]+$/i',implode('',$yourCharArray)))
{
    echo 'all chars are ok';
} 
```

哦，如果您想知道`/[a-z]/i`与 , 相同`/[a-zA-Z]/`，`i`是不区分大小写的标志。

如果您仍然想要/需要单独检查每个元素，因为您的评论让我相信：

```
foreach($yourChars as $char)
{
    if (!preg_match('/[a-z0-9]/i',$char))
    {
        echo 'Error: '.$char.' is not allowed';
    }
} 
```

但在这种情况下，我建议*不要*使用正则表达式。只是：

```
if (!ctype_alnum($char)) 
```

会做，它更快，并且完全符合您的需要。[请参阅文档](http://www.php.net/manual/en/function.ctype-alnum.php)
再次，内爆数组并检查结果字符串的长度仍然要快得多：

```
$check = implode('',$charArr);
if (strlen($check) > 5 || !ctype_alnum($check))
{//more than 5 chars, other chars than a-z/0-9
    echo 'invalid input';
}
//if > 5 should be allowed, but the array elements should be single chars:
if (strlen($check) > count($charArr) || !ctype_alnum($check)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T12:54:16.300

您遍历数组并一一检查它们是否与此模式匹配？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T12:55:37.947

您的正则表达式没有定义数量

您可以使用 {} 来执行此操作。以下正则表达式接受 1 到 5 个字符，这些字符由 [] 指定

`[a-zA-Z0-9]{1,5}`

或者您可以使用“+”表示“一个或多个”，或者不使用逗号来表示固定数量的字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T12:59:57.460

首先，如果您需要检查输入是否**仅**包含模式，则需要添加锚点：

```
^pattern$ 
```

哪里`^`是字符串/行的开头，`$`是它的结尾。

关于模式，使用这些>>

单字：

```
[a-zA-Z0-9] 
```

无或一个字符：

```
[a-zA-Z0-9]? 
```

一个或多个字符：

```
[a-zA-Z0-9]+ 
```

没有或更多字符：

```
[a-zA-Z0-9]* 
```

确切的字符数 (n)：

```
[a-zA-Z0-9]{n} 
```

范围内的字符数 (n,m)：

```
[a-zA-Z0-9]{n,m} 
```

n 个或更多字符：

```
[a-zA-Z0-9](n,} 
```

不超过 n 个字符：

```
[a-zA-Z0-9]{0,n} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T13:03:45.163

不确定我是否理解你的问题，但你可以循环数组吗？

```
$myArray = ('0', 'a', 'b', 'c', 'L');
$validArray = true;
foreach ($myArray as $value) {
    if (preg_match("/[a-zA-Z0-9]/", $value) == 0)
            $validArray = false;
} 
```

这将验证整个数组，您可以将其包装到一个函数中。但就像我说的，我不确定你到底需要什么。

作为旁注，您可以从中创建一个函数：

```
function validateArray($arr) {
    $validArray = true;
    foreach ($arr as $value) {
        if (preg_match("/[a-zA-Z0-9]/", $value) == 0)
                $validArray = false;
    }
    return $validArray;
}

$myArray = ('0', 'a', 'b', 'c', 'L');
$myArrayValid = validateArray($myArray); 
```

# postgresql - 将 GIS 点分成彼此靠近的点组

> ID：13087288
> 
> 赞同：8
> 
> 时间：2012-10-26T12:52:55.190
> 
> 标签：postgresql, gis, postgis

有一组坐标，需要分成彼此靠近的组。

针对 PostgreSQL 数据库使用 Python。我想出了一个可行的解决方案，但后来我意识到我可能正在重新发明轮子。是否有库可以用来完成此任务而无需推出自己的解决方案？

**例子：**

![在此处输入图像描述](../Images/aa87827d970a103d0ad792ae2c31fefb.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T13:40:54.090

在这个 GIS SE 问题的答案中有两个直接在 PostGIS 中实现的好的解决方案：

[**使用 PostGIS 进行空间聚类**](https://gis.stackexchange.com/questions/11567/spatial-clustering-with-postgis)

您还可以在以下答案中找到一些有用的提示：

[**如何识别矢量点数据中的簇？**](https://gis.stackexchange.com/questions/11342/how-to-identify-clusters-in-vector-point-data)

# java - JGit CheckoutCommand 不起作用

> ID：13087290
> 
> 赞同：0
> 
> 时间：2012-10-26T12:52:56.947
> 
> 标签：java, jgit

我正在克隆一个远程存储库，并希望签出几个分支以与它们互操作（而不对工作目录应用更改）。

所以我克隆了存储库：

```
CloneCommand clone = Git.cloneRepository();
clone.setURI(project.getUrl());
clone.setDirectory(new File(RepositoryHandlerHelper
        .getFilePath(project)));
clone.setCredentialsProvider(getCredentials());
clone.setCloneAllBranches(true);

clone.call(); 
```

那行得通。现在我在本地硬盘上创建远程分支（循环）：

```
git.branchCreate().setName(currentBranchToBuild)
.setUpstreamMode(SetupUpstreamMode.TRACK)
.call(); 
```

这也有效。我不确定这是必要的。之后我尝试检查每个分支：

```
git.checkout().setName(currentBranchToBuild).call(); 
```

我确定正确的分支名称已提交到`setName()`. 没有抛出异常，但该命令似乎对我的工作目录没有任何影响。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:16:24.650

我想您需要添加`setStartPoint("origin/branchtotrack")`，另请参阅[我对类似问题的回答](https://stackoverflow.com/a/12928374/305973)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:56:16.653

找到了一个可行的解决方案：我不需要创建每个分支的本地副本。如果我只是检查远程分支，它就可以工作。我的问题是不同的。我正在生成每个分支的 JavaDoc（结帐然后创建 JavaDoc）。但似乎结帐不会立即生效。如果我在 git.checkout... 和生成 JavaDoc 的调用之间放置一个 Thread.sleep(1000)，它就可以正常工作。

谢谢您的帮助。

# android - 在滑出式菜单中滑动时淡化布局

> ID：13087299
> 
> 赞同：2
> 
> 时间：2012-10-26T12:53:27.627
> 
> 标签：android, android-animation

我有一个自定义的滑出菜单实现（不使用任何库），在其中我将布局向右滑动并在左侧显示菜单（就像 facebook、google+ 应用程序一样）。显示菜单后，我通过提供一些 alpha 值淡化正确的布局，如下面的代码所示：

```
 <FrameLayout
        android:id="@+id/fl_mask"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:alpha="0.7"
        android:background="@color/black">
    </FrameLayout> 
```

但这一切都发生在我的菜单显示时。我想要的是，当布局向右滑动时，我想让它变暗。布局离左边缘越远，布局越暗。此外，我使用以下代码进行布局动画，将我的布局向右滑动。

```
public Animation SlidingAnimation(int animateDuration, boolean slideLeftToright, final boolean executeOnAnimEndCode) {
    Animation animation = null;
    AnimationSet set = new AnimationSet(true);

    if (slideLeftToright) {
        animation = new TranslateAnimation(Animation.RELATIVE_TO_SELF, -1.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f,
                Animation.RELATIVE_TO_SELF, 0.0f);
    } else {
        animation = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, -1.0f, Animation.RELATIVE_TO_SELF, 0.0f,
                Animation.RELATIVE_TO_SELF, 0.0f);
    }

    animation.setDuration(animateDuration);

    animation.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            if (executeOnAnimEndCode) {
                               ... // Some piece of code
            }
        }
    });
    set.addAnimation(animation);

    return animation;
} 
```

当布局向右滑动时，如何使布局淡化/变暗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:16:55.393

在你的

```
public void onAnimationEnd(Animation animation) 
{
            if (executeOnAnimEndCode) 
            {
               AlphaAnimation alphaAnimation = new AlphaAnimation(1.0f, 0.5f);

               alphaAnimation.setFillAfter(true);

               someLayout.startAnimation(alphaAnimation);
            }
        }
    }); 
```

或者您也可以将动画声明为 xml 然后使用它....

# wordpress - 在永久链接中使用帖子标题是否很好？

> ID：13087300
> 
> 赞同：0
> 
> 时间：2012-10-26T12:53:32.500
> 
> 标签：wordpress

目前我在我的永久链接中使用帖子名称，例如：-domain.com/post-name，但我想知道我们可以使用帖子标题代替帖子名称，例如：-domain.com/post-title。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:22:38.763

使用`post-name`slug 作为 URL，这就是它的用途。`post-title`可能包含不适合 URL 的空格和其他可能的特殊字符。出于 SEO 的目的，您还应该考虑将 URL 自动链接到您的网站的网站，请为名为“我的页面”的页面考虑以下内容：

[http://example.com/my-page](http://example.com/my-page)（使用蛞蝓）

[http://example.com/My](http://example.com/My) Page（使用标题，注意断开的链接）

[http://example.com/My%20Page](http://example.com/My%20Page)（使用编码标题，难以阅读）

# android - 面向移动开发人员的 Eclipse 中的错误 (JUNO)

> ID：13087304
> 
> 赞同：1
> 
> 时间：2012-10-26T12:53:42.953
> 
> 标签：android, eclipse

当我运行 Eclipse 时，显示以下信息：

![在此处输入图像描述](../Images/71666c6aa29bdd2ca0b41ff714dce42c.png)

这个消息是什么意思？为什么要 Git？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:16:29.857

这意味着您应该为 git 安装命令行工具。这里是方向： [https ://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)

# php - 通过 Ajax 提交表单并更新结果 div

> ID：13087305
> 
> 赞同：2
> 
> 时间：2012-10-26T12:53:43.310
> 
> 标签：php, ajax

我使用自提交表单来处理数据，但我现在需要单独处理它，所以现在我需要提交一个表单，返回结果并将其放在一个 div 中。似乎使用`AJAX`是一种很好的方法来让数据返回到表单所在的原始页面。我看过很多例子，但我真的不明白如何去做或真正了解它是如何工作的。

假设我想将此表单数据发送`index.php`到我的流程页面`twitterprocess.php`我需要做什么并让它返回以显示处理的数据。

```
<form method="POST" action="twitterprocess.php">
    Hashtag:<input type="text" name="hashtag" /><br />
    <input type="submit" value="Submit hashtag!" />
</form> 
```

这是我一直用来显示结果的。

```
<?php foreach($results as $result) { 
    $tweet_time = strtotime($result->created_at);?>
    <div>
    <div class="tweet"> <?php echo displayTweet($result->text),"\r\n"; ?>
    <div class="user"><?php echo "<strong>Posted </strong>" . date('j/n/y H:i:s ',$tweet_time) ?><strong> By </strong><a rel="nofollow" href="http://twitter.com/<?php echo $result->from_user ?>"><?php echo $result->from_user ?></a></div>
    </div>
    <br />
<? } ?> 
```

我是 AJAX 的新手，但任何指导将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T13:25:03.053

*当您使用 AJAX 时，在其他页面上生成的输出就是该页面的结果。

*现在，当您想通过使用 AJAX 发布数据和检索结果时，请不要在 html 的一部分中使用 type="submit" 作为按钮，而只需使用 type="button"。

*action 属性应留空，因为您将通过 AJAX 代码触发操作。

*将所有解决方案放在下面的代码片段中：

下面是 HTML 代码和 AJAX

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Simple Form Handling Through AJAX</title>
<script type="text/javascript">
    function loadXmlDoc(fname, lname){
        var xmlhttp;
        if (window.XMLHttpRequest){
            xmlhttp = new XMLHttpRequest();
        }
        else{
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function(){
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
                document.getElementById("ajaxify").innerHTML =                xmlhttp.responseText;
            }
        }
        xmlhttp.open("POST", "demo_ajax3.php", true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("fname=" + fname + "&" + "lname=" + lname);
    }
</script>
</head>

 <body>
<p>
    <span id="ajaxify">&nbsp;</span>
</p>
<form  id="frm" action="#">
    <input type="text" name="fn" />
    <input type="text" name="ln" />
    <input type="button" name="submit" value="submit" onclick="loadXmlDoc(fn.value, ln.value)" />
</form>
</body>
</html> 
```

以下是上述代码中使用的 PHP 代码

```
<?php
$fname = $_POST["fname"];
$lname = $_POST["lname"];
echo "Hello " . $fname . " " . $lname;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T13:06:25.033

为您的提交按钮分配一些 id，我将使用 id="submit" 和一些 id 作为您的文本字段（我使用 id="text"）；

客户端js：

```
$("#submit").click(function () {
   var postData = new Object(); //for complex-form
   postData.hashTag = $("#text").val();
   $.ajax({
       type: 'POST', //or 'GET' if you need
       contentType: "application/json; charset=UTF-8", //i use json here
       dataType: "json",
       url: "some_url",
       data: JSON.stringify(postData), //or smth like param1=...&param2=... etc... if you don't want json
       success: function (response) {
           //handle response here, do all page updates or show error message due to server-side validation
        },
        error: function () {
            //handle http errors here
        }
    });
  return false; //we don't want browser to do submit 
```

});

因此，如果用户启用了 js = 您的代码将执行 ajax 请求，否则 - 将发出常规的 post 请求；

在服务器端，您必须处理不同的 ajax 和定期提交，以使其在两种情况下都能正常工作。我不擅长 php，所以在这里不能做任何建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:16:00.673

我发现 Ajax Form 插件是完成这项工作的好工具。

[http://www.malsup.com/jquery/form/#tab4](http://www.malsup.com/jquery/form/#tab4)

一个基本的代码示例可能是：

```
$(document).ready(function() { // On Document Ready
    var options = {
         target: '#output1', // ID of the DOM elment where you want to show the results
         success: showResponse  
    };

    // bind form using 'ajaxForm'     
    $('#myForm1').ajaxForm(options); 
});

// the callback function
function showResponse(responseText, statusText, xhr, $form)  {
    alert('status: ' + statusText + '\n\nresponseText: \n' + responseText +  
    '\n\nThe output div should have already been updated with the responseText.');
} 
```

您的 PHP 文件所要做的就是在表单提交后要在 DIV 中显示`echo`的（或文本）背面。`html`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T13:25:14.143

如果您不想使用 jquery，请在纯 javascript 中尝试此操作

```
function SendData(Arg) {
    xmlhttp=null;
    var uri = "/twitterprocess.php";
    if(window.XMLHttpRequest) {
        xmlhttp=new XMLHttpRequest();
    } else if(window.ActiveXObject) {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    if(xmlhttp!=null)  {
        xmlhttp.onreadystatechange = function() {
        if(xmlhttp.readyState==4) {
            if(xmlhttp.status==200) {
                var xmlDoc = xmlhttp.responseXML;
                var DateNode=xmlDoc.getElementsByTagName('Date')[0].firstChild.nodeValue;
                var Xml2String;
                if(xmlDoc.xml) {
                    Xml2String = xmlDoc.xml
                } else {
                    Xml2String = new XMLSerializer().serializeToString(xmlDoc);
                }
                document.getElementById("CellData").value=Xml2String;
            } else {
                alert("statusText: " + xmlhttp.statusText + "\nHTTP status code: " + xmlhttp.status);
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T13:00:21.700

例如，您可以使用 jQuery，

```
function doPost(formdata){
    var url="/twitterprocess.php";
    var senddata={'data':formdata};
    $.post(url,senddata,function(receiveddata){
       dosomethingwithreceiveddata(receiveddata);
    } 
```

您的 php 将以 JSON 形式获取 senddata。您可以处理并发送适当的响应。该响应可以通过 dosomethingwithreceiveddata 来处理。

# objective-c - EDSDK 2.11 和 XCode 4.5.1

> ID：13087306
> 
> 赞同：0
> 
> 时间：2012-10-26T12:53:48.887
> 
> 标签：objective-c, xcode, edsdk

我正在寻找从 EDSDK 和 Objective-C 开始的简短教程。我使用 OS X 10.8 和 XCode 4.5.1。首先是抱怨缺少头文件`windows.h`。甚至无法编译示例项目。EDSDK 参考对任何人都没有帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T08:35:37.037

EDSDK 头文件有问题。

要解决此问题，请转到 /EDSDK2.11.3M/EDSDK/Header（或放置 EDSDK 的位置）并打开 EDSDK.h 文件并在第 30 行和第 762 行进行更改：

删除**MACOS**
（前后有 2 个下划线，由于某种原因这里没有显示）并用 **APPLE**替换它 （同样，前后有 2 个下划线）

保存更改并关闭文件。

打开 EDSDKTypes.h 并在第 25、37、88、1335 行进行相同的更改。

另外，不要忘记 EDSDK 目前仅适用于 32 位，因此在 XCode 中您必须处于 i386 模式。

# java - 不打印 Arraylist

> ID：13087310
> 
> 赞同：-1
> 
> 时间：2012-10-26T12:54:12.703
> 
> 标签：java, object, collections, arraylist

我有一堂课，我有一个注册`ArrayList`的`Checkbook`

在同一个班级我有一个方法

```
imprimirTalonario () 
```

`deveria`打印`ArrayList`我将要处理的记录

```
public class Talonario
{
    Boleta bol;
    ArrayList registro = new ArrayList();
    UsaBoleta usaboleta;
    public void imprimirTalonario()
    {
         // Convert ArrayList to Object array
        Object[] elements = registro.toArray();

        // Print Object content
        for (int a = 0; a < elements.length; a++) 
        {
            System.out.println(elements[a]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:56:30.680

您将需要`add`元素`ArrayList`默认`ArrayList`为空

```
 ArrayList<Integer> registro = new ArrayList<Integer>();
    registro.add(10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T12:55:39.697

when`registro`为空，则为空，`elements`并且您的`for`循环将不会被执行

在循环`System.out.println(registro.size())`之前创建一个以查看因此是否为空`for``registro``elements`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:03:59.950

您在数组中没有任何元素，如果您调试代码，您会看到循环没有执行。

如果您尝试打印类型`Object`或具体类型的值，您应该重写该方法`toString`以显示对象数据的内容而不是对象的引用。

# jmeter - JMeter 嵌入式资源下载属性

> ID：13087316
> 
> 赞同：4
> 
> 时间：2012-10-26T12:54:25.667
> 
> 标签：jmeter

是否可以设置全局属性以自动从 JMeter 中的 html 文件中检索所有嵌入资源。我知道我们可以在计划中的 Http Request 和 Http Request Defaults 中选中/取消选中它，但是 .properties 文件中是否有类似的选项。

此外，如果我确实检查了 Http Request Defaults 元素上的选项，如何为计划中的单个 Http Request 禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:21:04.707

从 2.8 开始还不可能，对此有一个增强请求：

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=43380](https://issues.apache.org/bugzilla/show_bug.cgi?id=43380)

关于第二个问题，答案在这里：

*   [http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request_Defaults](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request_Defaults)

见说明：

```
 Note: radio buttons only have two states - on or off. This makes it impossible to
   override settings consistently - does off mean off, or does it mean use the current 
   default? JMeter uses the latter (otherwise defaults would not work at all). So if    
   the button is off, then a later element can set it on, but if the button is on, a 
   later element cannot set it off. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T13:03:18.117

您可以 通过将脚本代码设置为 javascript 语言来添加一个覆盖默认配置的脚本代码`BSF PreProcessor`：`HTTP Sampler`

```
 sampler.setProperty("HTTPSampler.image_parser",${LOAD_ALL_PAGE_RESOURCES},false); 
```

`LOAD_ALL_PAGE_RESOURCES`用户定义的变量在哪里

如果将其设置`BSF PreProcessor`为 a它对其中定义`Thread Group`的所有内容均有效。`Http Sampler`

如此链接所述： [http ://www.havecomputerwillcode.com/blog/?p=543](http://www.havecomputerwillcode.com/blog/?p=543)

# android - 扩展 ActonBar 标头

> ID：13087319
> 
> 赞同：1
> 
> 时间：2012-10-26T12:54:33.783
> 
> 标签：android, android-actionbar

我正在尝试做 GMail for Android 所做的事情 - 它在拆分 ActionBar 的右上角显示许多未读电子邮件。在文档中找不到任何容易实现的东西，我只想在顶角添加一个带有大字体的标签并更新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:11:44.593

那可能是使用`setCustomView()`on `ActionBar`。

# sql-server - 在 MDX 函数中使用计算成员作为参数

> ID：13087320
> 
> 赞同：0
> 
> 时间：2012-10-26T12:54:38.533
> 
> 标签：sql-server, ssas, mdx

我是 MDX 的新手，但希望我的代码尽可能干净。

我有一个查询，查看今天的销售额，并使用 ParallelPeriod 函数将它们与 LY 和 LY-1 进行比较。它看起来像这样..

```
With Member [Date].[SalesCalendar].[DateToday] as [Date].[SalesCalendar].[Date].&[2012-10-26T00:00:00]

SELECT 

    {[Date].[SalesCalendar].[DateToday],

    ParallelPeriod([Date].[SalesCalendar].[Year],1,[Date].[SalesCalendar].[Date].&[2012-10-26T00:00:00]),

    ParallelPeriod([Date].[SalesCalendar].[Year],2,[Date].[SalesCalendar].[DateToday]}

    *  

    {[Measures].[Total Sales],[Measures].[Units],[Measures].[Sales Target]}
    ON Columns,

    [Locations].[Location PK].[Location PK]
    on Rows

From MyCube 
```

我首先定义一个指向今天日期的成员。我想定义一次并在整个查询（以及我编写的其他查询）中使用它，理论是我可以在一次更改它并且基础查询做出反应。

我遇到的问题是，如果我尝试在 ParallelPeriod 函数中使用这个计算成员，我不会得到任何结果。通过上面的查询，我得到了第一列的结果，第一次调用 ParallelPeriod（对于 LY）有效，但第二次调用 LY-1，使用声明的成员，失败。

我猜这是因为我对 MDX 缺乏了解，所以我想我错过了一些基本的东西。但是，将我的头撞在墙上是行不通的，所以我需要一些帮助！

任何想法我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:36:37.820

这不起作用，因为在评估您的查询时`[Date].[SalesCalendar].[DateToday]`不会替换为`[Date].[SalesCalendar].[Date].&[2012-10-26T00:00:00]`.

您创建了一个成员，该成员将提供与数据透视表单元格中相同的数值`[Date].[SalesCalendar].[Date].&[2012-10-26T00:00:00]`。

你可以试试这个查询：

```
With Member [Date].[SalesCalendar].[DateToday] as [Date].[SalesCalendar].[Date].&[2012-10-26T00:00:00]
     Member [Measures].[name] as [Date].[SalesCalendar].CurrentMember.Name

SELECT 
    {[Measures].[name], [Measures].[Total Sales]} ON Columns,
    {[Date].[SalesCalendar].[DateToday], [Date].[SalesCalendar].[Date].&[2012-10-26T00:00:00]} on Rows
From MyCube 
```

将`Total Sales`是相同的，但不是`[Measures].[name]`。

# java - 从android中的两个不同活动访问单个PHP文件

> ID：13087321
> 
> 赞同：-1
> 
> 时间：2012-10-26T12:54:42.233
> 
> 标签：java, php, android

我有两个活动：`Mainpage.java`和`Secondary.java`。我正在尝试从两个类访问相同的 php 文件。当第二个类被调用时，以下***错误***被撤销。

```
 java.lang.nullpointerexception. 
```

我怎样才能消除这个错误？

这导致应用程序强制关闭。谢谢。这是第一类的代码： void login(){ try{

```
 httpclient=new DefaultHttpClient();

       httppost= new HttpPost("http://10.0.2.2/ABC/login.php"); 
       nameValuePairs = new ArrayList<NameValuePair>(2);
       nameValuePairs.add(new BasicNameValuePair("username",et.getText().toString().trim()));  
       nameValuePairs.add(new BasicNameValuePair("password",pass.getText().toString().trim()));
       nameValuePairs.add(new BasicNameValuePair("action","LOGIN"));

       httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

       ResponseHandler<String> responseHandler = new BasicResponseHandler();
       response=httpclient.execute(httppost);
       final String response = httpclient.execute(httppost, responseHandler);
       System.out.println("Response : " + response);

               tv.setText("Response from PHP : " + response);

               if(response.equalsIgnoreCase("User Found"))
               {
                   Toast.makeText(Axdroid.this,"Login Success",Toast.LENGTH_SHORT).show();   

                   startActivity(new Intent(getApplicationContext(),Secondary.class));
               }                   else
               {
                    showAlert();     
               }                                     

       dialog.dismiss();   

   }catch(Exception e){

       System.out.println("Exception : " + e.getMessage());
   } 
```

}

这对于二级类 void jsr(){

```
 try{
        httpclient = new DefaultHttpClient();
        httppost= new HttpPost("http://10.0.2.2/AndroidLeave/login.php");
        nameValuePairs.add(new BasicNameValuePair("action","SUMMARY"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        response = httpclient.execute(httppost);

        System.out.println(" ++++++++  +++++++++++++"+response);                    

        entity = response.getEntity();
        is = entity.getContent();
    }catch(Exception e){
        Log.e("log_tag", "Error in http connection"+e.toString());
    }

    System.out.println(" ++++++++ After getting data from PHP file +++++++++++++");

    //convert response to string
    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");
        String line="0";

        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }

        is.close();
        result=sb.toString();

    }catch(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());}
    }} 
```

日志猫：

```
 10-26 18:10:01.313: W/SingleClientConnManager(2296): Make sure to release the connection before allocating another one.
 10-26 18:10:01.964: E/log_tag(2296): Error in http connectionjava.lang.NullPointerException
 10-26 18:10:01.974: E/log_tag(2296): Error converting result java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:00:50.700

发生错误是因为您尝试启动第二个连接，但您没有关闭第一个连接。由于您没有`InputStream`在第一堂课中使用 and ，因此您没有像在第二堂课中那样调用`is.close()`.

我不太明白为什么在第一堂课中，您两次调用`execute()`.

你可以这样做：删除这两行

```
ResponseHandler<String> responseHandler = new BasicResponseHandler();
final String response = httpclient.execute(httppost, responseHandler); 
```

在这条线之后

```
response=httpclient.execute(httppost); 
```

添加：

```
final String responseString = EntityUtils.toString(response.getEntity()); 
```

然后使用`responseString`你曾经使用过的地方`response`作为`String`. 如果它仍然发生，请在之后添加 EntityUtils.consume(response.getEntity()); 应该也做消耗，但`toString`以防万一。

如果它仍然不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:01:54.603

Just quickly looking at your code, the exception is probably occurring on this line in the second class:

```
nameValuePairs.add(new BasicNameValuePair("action","SUMMARY")); 
```

because `nameValuePairs` is null. You might try adding something like:

```
nameValuePairs = new ArrayList<NameValuePair>(2); 
```

before you try calling `nameValuePairs.add()`

# javascript - 覆盖特定函数的 toString

> ID：13087322
> 
> 赞同：5
> 
> 时间：2012-10-26T12:54:43.207
> 
> 标签：javascript, overloading

**看看下面的编辑！** 我目前正在寻找一种方法来重载**一个动态生成的特定函数**`toString`的方法（由函数返回）。我知道我可以重载 的函数，但这会重载*所有*函数的*所有*函数，我想避免这种情况。**`toString``Function.prototype` *`toString`***

 ****我的示例函数：

```
var obj = {
    callme: function() {
        return function() {
            // Dynamically fetch correct string from translations map
            return "call me, maybe"; 
        }
    }
}
// Binding callme to func, allowing easier access
var func = obj.callme.bind(obj); 
console.log(func, func()) 
```

到目前为止，我试图将函数视为常规 JavaScript 对象。

```
func.toString = function() {
    return this();
} 
```

这导致`Function.prototype.toString`仍然被调用而不是`func.toString`.

尝试访问`func.prototype`是不可能的，该`prototype`属性是未定义的，因为它是一个函数而不是一个对象。覆盖`toString`不是`Function.prototype`一种选择，`func`也无法更改为对象，因为它可能会破坏与旧代码部分的兼容性。

**编辑：**上面所做的尝试显然不起作用，因为我正在覆盖`toString`函数的`func`而不是`toString`返回函数的。现在有一个更好的问题：是否有一种优雅的方法来覆盖`toString`所有返回的函数，`func`以便它们“共享”相同的`toString`. （意味着我不必`toString`为每个返回的函数指定。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:12:36.320

您可以通过在返回之前将其存储在变量`toString`中来定义返回的函数：`callme`

```
var obj = {
  callme: function (){
    function toString(){
      return this();
    }

    var f = function (){
      // Dynamically fetch correct string from translations map
      return "call me, maybe"; 
    };

    f.toString = toString;

    return f;
  }
};

var func = obj.callme.bind(obj);
console.log(func);                //=> [Function]
console.log(func());              //=> { [Function] toString: [Function: toString] }
console.log(func().toString());   //=> 'call me, maybe' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:11:19.067

如果您需要自定义值，您不能只为此编写一个方法，而不是尝试覆盖 toString 原型。

否则，如果您需要全部更改它，您可以执行以下操作：

```
String.prototype.toString = function() {return this+"test";} 
```****

# perl - 匹配不同文件的列

> ID：13087325
> 
> 赞同：-2
> 
> 时间：2012-10-26T12:54:52.490
> 
> 标签：perl

我有这样的情况：我有一个像 file1 这样的文件

文件 1

```
List      ID 
1         NM_00012  
2         NM_00013   
2         NM_00013
3         NM_00021  
3         NM_00021
4         NM_000254
5         NM_000765 
```

第二个文件如下所示：

文件2

```
List      Count 
1         Gene1 
2         Gene2
2         Gene2
3         Gene3 
3         Gene3 
4         Gene4
5         Gene5 
```

我想要以下输出：

文件 3

```
List       Count 
NM_00012   Gene1    
NM_00013   Gene2        
NM_00021   Gene3                
NM_000254  Gene4        
NM_000756  Gene5 
```

谁能帮我？我是 Perl 的新手。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:54:51.897

好吧，有一个简单明了的实现：

```
open FILE1, "file1.txt";
open FILE2, "file2.txt";
open OUTPUT, ">", "output.txt";

my (%file1content, %file2content);

%file1content = ProcessFile(\*FILE1);
%file2content = ProcessFile(\*FILE2);

sub ProcessFile {
my (%ret, @arr);
my $fh = shift;
while (@arr = split(/[\s\t]+/,<$fh>)) {
next unless(scalar(@arr) == 2);
next unless(($arr[0]+0) > 0); 
$ret{$arr[0]} = $arr[1];
}
return %ret;
}   

foreach my $key (sort {$a cmp $b} keys %file1content){
print OUTPUT $file1content{$key},"\t",$file2content{$key},"\n";
}   
close (OUTPUT);
close (FILE1);
close (FILE2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:02:03.873

你可以像（未经测试）：

```
my (%hash1, %hash2, $list, $count, $ID);
open F,"<","file2.txt" or die;
while(<F>) {
  chomp;
  ($list,$count) = split/\s+/;
  $hash1{$list} = $count;  
}
close F;

open F,"<","file1.txt" or die;
while(<F>) {
  chomp;
  ($list,$ID) = split/\s+/;
  if(! exits $hash2{$ID}) {
    print "$ID $hash1{$list}";
    $hash2{$ID} = 1;
  }
}
close F; 
```

# java - 上传图片在服务器上已损坏

> ID：13087326
> 
> 赞同：3
> 
> 时间：2012-10-26T12:54:59.837
> 
> 标签：java, android, image, ftp

您好我正在尝试使用 ftp4j 将图像上传到服务器。我的图像已上传到服务器但已损坏。我知道我的代码中缺少某些内容。我的代码是

```
private class UploadBackgroundTask extends AsyncTask<String, Void, String> {

    protected void onPreExecute() {
        dialog = new ProgressDialog(xxx.this);
        dialog.setMessage("Loading");
        dialog.setCancelable(false);
        dialog.show();

    }

    protected String doInBackground(final String... args) {

        try{
            TrustManager[] trustManager = new TrustManager[] { new X509TrustManager() {
                public X509Certificate[] getAcceptedIssuers() {
                    return null;
                }
                public void checkClientTrusted(X509Certificate[] certs, String authType) {
                }
                public void checkServerTrusted(X509Certificate[] certs, String authType) {
                }
            } };

            SSLContext sslContext = null;
            try {
                sslContext = SSLContext.getInstance("TLS");
                sslContext.init(null, trustManager, new SecureRandom());
            } catch (Exception e) {
                e.printStackTrace();
            }
            SSLSocketFactory sslSocketFactory = sslContext.getSocketFactory();
            FTPClient client = new FTPClient();

            client.setSSLSocketFactory(sslSocketFactory);
            client.setSecurity(FTPClient.SECURITY_FTPES);

            client.connect("xxx.xxx.com");
            client.login("xxx", "xxx");

            client.changeDirectory("product_images/import");
            client.setType(FTPClient.TYPE_BINARY);
            //@TODO read file from android system
            System.out.println("temPath -->"+picturepath);
            client.upload(new File(picturepath));

            FTPFile[] list = client.list();
            for(int i=0;i<list.length;i++){
                System.out.println("-->"+list[i]);
            }

            Log.v("SUCCESFULLY UPLOADED", "SUCCESFULLY UPLOADED");
            }catch(Exception ex){
                ex.printStackTrace();
            }

        return null;

    }

    protected void onPostExecute(String list) {
        dialog.dismiss();

    }
} 
```

我在服务器上的图像是： ![在此处输入图像描述](../Images/2c6c9c1791b2bf6075c0d36e32a947f0.png)

我的日志跟踪是：

```
it.sauronsoftware.ftp4j.FTPException [code=450, message= Transfer aborted. Link to file server lost]
at it.sauronsoftware.ftp4j.FTPClient.upload(FTPClient.java:2799)
at it.sauronsoftware.ftp4j.FTPClient.upload(FTPClient.java:2586)
at it.sauronsoftware.ftp4j.FTPClient.upload(FTPClient.java:2495)
at com.Activity.xxx.AddProducts$UploadBackgroundTask.doInBackground(AddProducts.java:902)
at com.Activity.xxx.AddProducts$UploadBackgroundTask.doInBackground(AddProducts.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:264)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
 Window already focused, ignoring focus gain of:
com.android.internal.view.IInputMethodClient$Stub$Proxy@41174c80 
```

上传后服务器上的文件大小始终为 4 KB。为什么？

我搜索了很多但没有得到答案。请告诉我我的代码有什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:13:04.417

尝试像这样实现监听器：

```
import it.sauronsoftware.ftp4j.FTPDataTransferListener;

public class MyTransferListener implements FTPDataTransferListener {

    public void started() {
        // Transfer started
    }

    public void transferred(int length) {
        // Yet other length bytes has been transferred since the last time this
        // method was called
    }

    public void completed() {
        // Transfer completed
    }

    public void aborted() {
        // Transfer aborted
    }

    public void failed() {
        // Transfer failed
    }

} 
```

并上传文件`client.upload(new File(picturepath), new MyTransferListener());`因此您可以跟踪文件上传时发生的情况。

编辑：

1.  检查方法中更新的图像大小和参数`transferred(int length)`是否相等。（如果图像小于 64k）
2.  检查 FTP 服务器上收到的相同字节数（检查 FTP 服务器上的日志）
3.  如果上述条件之一不成立，则 ftp4j 有问题，如果两者都成立，则说明您的 FTP 服务器有问题。

# c# - 使用“大量”的 LINQ to Objects 语句是否有一些缺点？

> ID：13087328
> 
> 赞同：5
> 
> 时间：2012-10-26T12:55:06.903
> 
> 标签：c#, .net, performance, linq

我来自 Java 编程并转向 C# 编程，我发现了 LINQ 的强大功能。

在我最近的实现中，我注意到我经常在我的代码中使用它（特别是 LINQ to Objects）来避免`foreach`循环、搜索列表中的元素和执行类似任务。

现在我想知道在大量使用 Linq to Objects 时是否存在一些性能劣势......

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-26T13:13:46.490

Linq 比原生 C# 循环慢。
C# 比 C++ 慢。
C++ 比汇编慢。
组装比设计您自己的定制微处理器要慢。

因此，您应该始终设计自己的定制微处理器，而不是使用 Linq .....

是否有性能影响？*可能，但在实际测量*之前你不会知道多少。它可能足够小，不会很重要，您可以花时间避免 Linq 处理应用程序中*通过*优化受益的部分。

底线是 - 使用使您最高效的库和框架构建您的应用程序，然后从那里进行优化。您可能会发现应用程序中最慢的部分根本不是 Linq 代码，因此如果您禁止它只是因为它*可能*比滚动您自己的循环慢，那么您将优化错误的东西。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-26T21:21:45.610

为了客观地回答您的问题，LINQ 大量使用了委托和迭代器，它们具有实例化（委托和迭代器）和方法调用（委托调用和`MoveNext()`迭代器）的开销。现在， a `foreach`(on a `List<T>`) 将具有迭代器的开销，但没有委托的开销。所以预计 LINQ 在这里会比`foreach`.

同样，使用索引器遍历列表`[i]`预计会更快，因为它也没有迭代器的开销。更快的不是使用`List<T>`数组而是数组。但即使这样也有数组边界检查的开销（`IndexOutOfRangeException`如果你试图超出数组边界，就会抛出一个位），并且*可以*通过指针使用原始内存访问来避免这种情况，或者通过简单地迭代整个列表（`for(var i = 0; i < array.Length; i++) { Console.WriteLine(array[i]); }`不会有边界检查，因为编译器可以证明这个循环永远不会越界）。

这些是各种迭代方式带来的不同程度的开销。这些间接费用重要吗？如果您正在执行 10,000 x 10,000 矩阵乘法，那么可以。否则，可能不会，除非您已将其测量为（这是一个令人厌烦的旧答案，但同样有效）。

但是，除了这些事实之外，您*如何*使用它们也很重要。假设您想要一个 1980 年以后出生的客户列表，这些客户来自更大的客户群，并对他们进行进一步处理。如果没有 LINQ，您将几乎被迫`foreach`使用原始客户列表并创建一个中间列表，将 1980 年之后出生的客户放入其中。*使用*LINQ，您将不需要节省大量开销的中间列表（创建列表、调用`Add`在它上面，随着它的增长而调整它的大小几次）并且可能更快。而且它的内存效率肯定更高，因为 1980 年之后出生的客户被一个一个地“流式传输”，而中间列表不会占用内存。使用 LINQ，您可以处理无限长的序列。

使用 LINQ 的另一个性能原因是某些操作的并行化`AsParallel()`在查询结束时调用变得微不足道。

因此，如果使用 LINQ 存在性能劣势，请回答您的问题：

*这取决于。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:14:47.783

从广义上讲，LINQ 没有提供任何性能优势，但它的某些实现可能会。如果您想要高性能代码，那么您仍然需要广泛了解每个 LINQ 查询的算法时间复杂度。

例如，我见过的一个常见场景是针对特定值对列表执行 WHERE 子句，这将导致扫描列表中的项目，这将具有 O(n) 复杂度。`Dictionary<K,V>`如果您维护一个哈希表（例如）来执行查找，那么这样的操作当然可以用 O(1) 复杂度来实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T13:02:14.913

对于任何你失去控制并且必须依赖于你不知道底层代码的实现的抽象，性能往往会变慢（因为 LINQ 必须是通用的，并且不能以牺牲为代价对一种类型的对象进行完全优化另一个）。但是多少取决于你的情况。例如，如果您的应用程序每天被命中数百万次并且您需要绝对性能，那么使用 LINQ 到实体进行数据库查询可能不是一个好主意，您可能希望对 LINQ 不允许您执行的 SQL 查询进行性能优化做。但是，如果您的应用程序用作用户数量相对较少的企业应用程序的一部分，那么您可能可以大量使用 LINQ。所以我的回答是肯定的，它会变慢，

# python - python函数默认参数只评估一次？

> ID：13087344
> 
> 赞同：47
> 
> 时间：2012-10-26T12:56:11.580
> 
> 标签：python, function, parameters

我是一个 python 初学者，正在阅读“python 教程”，它说我们是否有一个函数：

```
def f(a, L=[]):
     L.append(a)
     return L
print f(1)
print f(2)
print f(3) 
```

这将打印

```
[1]
[1, 2]
[1, 2, 3] 
```

因为默认值只计算一次，并且 list 是一个可变对象。我能理解。

它说继续，如果我们不希望在后续调用之间共享默认值，我们可以：

```
def f(a, L=None):
   if L is None:           #line  2
       L = []            
   L.append(a)
   return L
print f(1)            
print f(2)
print f(3) 
```

这将输出：

```
[1]
[2]
[3] 
```

但是**为什么**？这要怎么解释。我们知道默认值仅被评估`once`，当我们调用 f(2) 时，L 不是 None 并且`if`（在第 2 行）不能为真，所以 L.append(a) == [1, 2]。**我是否可以猜测由于某种原因**再次评估默认值，但什么是“某种原因”，只是因为 python 解释器看到`if L is None: L = []`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-11-06T18:25:05.313

Python按值传递参数给函数；所以对于对象，传递的值是*对对象的引用*，而不是对象的新副本。

这与[官方文档](https://docs.python.org/3.5/reference/compound_stmts.html#function-definitions "这里")的以下部分一起帮助我更好地理解它（强调我的）：

> 执行函数定义时会评估默认参数值 [...]。**这意味着在定义函数时对表达式求值一次，并且每次调用都使用相同的“预计算”值。**当默认参数是可变对象（例如列表或字典）时，这一点尤其重要：如果函数修改了对象（例如，通过将项目附加到列表中），则默认值实际上已被修改。[...] 解决这个问题的一种方法是使用 None 作为默认值，并在函数体中显式测试它 [...]

把它们放在一起：

如果您将参数的默认值定义为可变对象（例如`[]`），则“预计算”值是对该对象的*引用*，因此对函数的每次调用将始终引用同一个对象，然后可以对其进行变异跨函数的多次调用。

但是，由于`None`是不可变的内置类型，因此默认的“预计算”值`None`就是这样。`None`因此，每次调用该函数时，该参数都会出现。

希望这会有所帮助！我确实认为本教程可以有更好的措辞，因为一开始我也对此感到困惑。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-26T13:03:25.973

“默认值仅评估一次”并不意味着具有默认值的参数在函数调用之间保留其值。这意味着您指定的表达式（的`None`一部分`def f(a, L=None)`）被评估一次，并且它产生的对象被存储在一个隐藏的位置，如果在调用时没有给出该参数的值，则可以重新使用它。每次调用时，参数仍会重置为值（默认或非默认）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T12:59:13.797

在您的第二个示例中，您有一个变量`L`。起初`L`指`None`. 您在每次调用时**将其**重新指向一个新的空列表，然后改变该新列表。记住`L = []`是一样的`L = list()`

但是，在您的第一个示例中， L 在函数声明时设置为新列表一次。`[]`L 不会在每次调用函数时重置为。所以你总是在改变同一个列表。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-05T07:07:29.843

我认为这是因为列表是可变对象，而值 None 是不可变的。

对于第一个函数，变量 L 在函数环境之外（在函数定义中），它指的是一个空列表。然后你在函数环境中对这个列表进行更改，但是由于一个列表是可变的，所以函数环境之外的变量 L 引用这个现在已经变异的列表，并且每次调用函数时都会传播更改。

对于第二个函数，变量 L 也在函数环境之外（在函数定义中），但这次它指的是 None，它是不可变的。现在，您在函数环境中所做的每一次更改都不会影响 L 在函数环境之外引用的内容。函数环境中的变量 L 在您更改它时指的是不同的东西。首先，它引用一个空列表，然后是一个获取附加值的列表。然后，您返回此列表。下次调用该函数时，使用函数环境之外的变量 L 调用它，该变量没有改变，仍然引用 None。

希望这是有道理的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-31T20:00:07.923

发生的情况如下：

当调用 python 函数时，它会在**定义它**的环境中进行评估，而不是在**调用**它的环境中进行评估，尽管第二部分是次要的（没有双关语），目的是回答您的问题。

默认参数仅在函数定义时评估一次。这将创建一个闭包。将闭包视为定义函数的函数代码+环境。

因此，在这种情况下，当定义函数时，将`L`其分配给`[]`，现在对该函数的每个后续调用都将使用`L`.

该教程还提到：

**默认值在定义范围内的函数定义点进行评估**（并且定义范围与函数代码一起是闭包的一部分）

[http://docs.python.org/2/tutorial/controlflow.html#default-argument-values](http://docs.python.org/2/tutorial/controlflow.html#default-argument-values)

# c# - 调用 await file.OpenAsync 似乎挂起

> ID：13087352
> 
> 赞同：0
> 
> 时间：2012-10-26T12:56:55.107
> 
> 标签：c#, windows-runtime, winrt-async

我有一个绑定在 XAML 中的属性，该属性应该从文件中返回图像。该属性调用以下代码：

```
private async Task<BitmapImage> GetBitmapImageAsync(StorageFile file)
{
   Debug.WriteLine("GetBitmapImageAsync for file {0}", file.Path);
   BitmapImage bitmap = new BitmapImage();
   Debug.WriteLine("... opening the stream");
   using (IRandomAccessStream stream = await file.OpenAsync(FileAccessMode.Read))
   {
      Debug.WriteLine("... setting the source");
      bitmap.SetSource(stream);
      Debug.WriteLine("... and returning");
      return bitmap;
   }
} 
```

我遇到的问题是代码将输出调试文本“...打开流”，然后它似乎挂起。

任何人都可以看到我做错了什么或者我可以尝试解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:20:19.977

我有一个类似的问题：[WinRT: Loading static data with GetFileFromApplicationUriAsync()](https://stackoverflow.com/questions/12235085/winrt-loading-static-data-with-getfilefromapplicationuriasync)

请看亚历山大的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:03:23.383

物业在等待任务吗？如果是这样，您有一个同步上下文问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T09:54:40.407

只是为了清楚起见（对上面提供的 Raubi 的回答进行了评论），以下是我如何重组代码以便它可以在没有在错误线程上访问 UI 对象的情况下工作。

调用代码如下所示：

```
BitmapImage bitmap = new BitmapImage();
IRandomAccessStream stream = GetBitmapStreamAsync(file).Result;
bitmap.SetSource(stream);
return bitmap; 
```

GetBitmapStreamAsync 的代码是这样的：

```
private async Task<IRandomAccessStream> GetBitmapStreamAsync(StorageFile file)
{
   Debug.WriteLine("GetBitmapStreamAsync for file {0}", file.Path);
   IRandomAccessStream stream = await file.OpenReadAsync().AsTask().ConfigureAwait(false);
   return stream;
} 
```

几点注意事项：

1.  我将 BitmapImage 的创建移至调用代码而不是将其保留在原始 GetBitmapImageAsync 中的原因是，当您使用 ConfigureAwait 时，代码会在*不同*的线程上执行，然后引发异常。

2.  调用代码转到 GetBitmapStreamAsync(file).Result 而不是使用 await 的原因是因为此代码位于属性中，您不能使用 async 。

# eclipse - 休眠控制台配置在 Eclipse 中消失了

> ID：13087355
> 
> 赞同：1
> 
> 时间：2012-10-26T12:57:02.627
> 
> 标签：eclipse, hibernate

我正在使用 JBoss Red Hat 的 Eclipse Indigo 和 Hibernate 工具/插件（3.4.0...）。为了对 Hibernate 值对象类进行逆向工程，我使用在 Hibernate Configurations 视图中单击 add 时弹出的向导创建了几个控制台配置。

后来当我想重新生成类时，一些配置已经消失。当我想使用现在消失的配置之一的名称添加新配置时，向导会告诉我该配置已经存在。

由于我无法找到这些配置的存储位置，因此我无能为力。

我是否必须创建一个具有不同名称的新配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-19T23:10:55.747

我有同样的问题，最后我在这个目录中找到了文件：

```
.\WORK-SPACE\.metadata\.plugins\org.eclipse.debug.core\.launches\miConsoleConfig.launch 
```

但最好从eclipse编辑。控制台配置仅在 Hibernate 透视图中在包资源管理器旁边的选项卡**Hibernate Configurations下可见。**

# apache - 在服务器上编辑/更改 300 多项选择

> ID：13087356
> 
> 赞同：2
> 
> 时间：2012-10-26T12:57:02.830
> 
> 标签：apache

我编辑了我所有的服务器 http 状态消息......当我输入错误的地址时，300 多项选择仍然出现，所以它向我显示选项。你知道我怎样才能摆脱它吗？我不希望用户有选择。要么我想重定向到 .index.html，要么我想显示一个自己创建的带有“>返回！”的消息页面。选项。服务器是阿帕奇...

我会很感激一些帮助:)（如果我的问题有解决方案）

提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-11T10:17:10.100

将此添加到您的 .htaccess 文件中：

```
Options -MultiViews
CheckSpelling off 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-18T20:44:57.617

我没有使用 RewriteRules 来解决这个问题，而是以不同的方式解决了这个问题。

![MultipleChoices300 错误](../Images/854f8d36d41492c884b00a0597af40b1.png)

如果您有 index.html 或`index.htm`其中的第一个值，`DirectoryIndex`它将尝试首先加载它们。我将`index.php`其作为第一个加载脚本，Multiple Choices 300 错误消失了。尽管我的旧配置甚至从未出现 Multiple Choices 300 错误。它与将 PHP 更新到版本`v5.4.16`或更高版本有关。

# vba - VBA 和数据透视表过滤器显示 id 但不显示值

> ID：13087362
> 
> 赞同：1
> 
> 时间：2012-10-26T12:57:28.943
> 
> 标签：vba

请帮忙。我必须使用过滤器创建数据透视表，我可以选择 2 个过滤器，但是当我尝试选择第三个过滤器时出现错误，我使用宏记录来查看它应该如何完成并得到这个：

```
"[Product].[System Source].[System Source]").CurrentPageName = _
"[Product].[System Source].&[SIMHKG_HSB]"

ActiveSheet.PivotTables("PivotTable4").PivotFields( _
"[Product].[Shareclass].[Shareclass]").ClearAllFilters

ActiveSheet.PivotTables("PivotTable4").PivotFields( _
"[Product].[Shareclass].[Shareclass]").CurrentPageName = _
"[Product].[Shareclass].&[5]" 
```

正如您在此代码中看到的那样，Shareclass 过滤器值为 5，但在数据透视表字段中我看到的不是数字，而在 VBA 中我想用名称而不是数字来过滤它，我该怎么写？因为当我使用名称而不是 [5] 时，我得到一个错误。为了简单起见，当我单击以在多维数据集中进行过滤并选择称为 ABCD 的东西时，在 VBA 中我看到数字但没有 ABCD .. 我需要在 VBA 中使用 ABCD 而不是 ID。

谢谢

# firefox - jQuery 1.8.2 与 Firefox 16 扩展不兼容吗？

> ID：13087370
> 
> 赞同：1
> 
> 时间：2012-10-26T12:58:17.397
> 
> 标签：firefox, jquery, firefox-addon

这是我为此示例添加的一些示例 xul 和一些脚本：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://linktargetfinder/skin/skin.css" type="text/css"?> 
<!DOCTYPE linktargetfinder SYSTEM "chrome://linktargetfinder/locale/translations.dtd">
<overlay id="sample" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:html="http://www.w3.org/1999/xhtml">
    <html:script type="application/x-javascript" src="jquery.js" />
 <script>
   $(window).load(function(){
     $('#loginBtn).click(function(){
      alert("hi!");
    });
   });
 </script> 
```

jquery.js 是 jQuery 1.8.2 的未压缩版本。在我的脚本中，我每次都得到 $ 或 jQuery 未定义，并且我在加载 jquery 之后包含了我的脚本文件。如果我降到 1.7.2，我就不会再收到错误了。如果有更好的方法来加载 jQuery 并从 Firefox 扩展进行 AJAX 调用，我很想听听。

多谢你们！

# ffmpeg - 使用 ffmpeg（或类似的）打印详细的 h264 信息

> ID：13087371
> 
> 赞同：5
> 
> 时间：2012-10-26T12:58:17.340
> 
> 标签：ffmpeg, h.264, analysis

我在 mpeg 传输流中有一些 h264 视频，我怀疑在视频中的某些点它会从 1080i/50Hz 切换到 1080p/25Hz。我想证明使用一些视频分析工具。ffmpeg（或类似的）可以打印出如此详细的解码信息吗？我已经尝试过 ffmpeg 设置“-loglevel debug”，但它不会打印有关实际解码的更多信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T18:14:47.027

`ffprobe`是一个更简单的解决方案，并且包含在 FFmpeg 中：

```
$ ffprobe -show_frames -i input.mp4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:08:34.827

对其进行排序。最后，我将一些 printfs 放入 ffmpeg 源代码中以获取我需要的信息。

# javascript - 如何在 jquery 模板中编写带有条件的循环？

> ID：13087373
> 
> 赞同：0
> 
> 时间：2012-10-26T12:58:28.563
> 
> 标签：javascript, jquery, client-side, jquery-templates

考虑以下逻辑作为要求：

```
var count=4;

for(var i=0;i<count;i++)
{
  /* create a table row <tr></tr> */
} 
```

现在，如果我尝试对我的 jquery 模板执行相同的操作，我想尝试执行以下操作：

```
<script id="MyTemplate" type="text/html">
        <table id="MyTable" class="Grid">            
            <tbody>
               {{each count}}
                <tr>
                  <td>${Name}</td>
                <tr>
           </tbody>
        </table>
</script> 
```

我试图绑定到模板的数据中的位置是：

```
var count=4;
var Name=["Peter","Michael","John","Thomas","James","Joseph","Mary","Simon"]; 
```

我希望我的模板生成的输出是：

```
<table id="MyTable" class="Grid">            
            <tbody>
                  <tr>
                    <td>Peter</td>
                    <td>Michael</td>
                    <td>John</td>
                    <td>Thomas</td>
                  <tr>
                  <tr>
                    <td>James</td>
                    <td>Joseph</td>
                    <td>Mary</td>
                    <td>Simon</td>
                  <tr>

           </tbody>
       </table> 
```

我已经尝试过：

```
<script id="TestTemplate" type="text/x-jQuery-tmpl">
    Day:<br/>
    <table>
     <tbody>
        {{for(i=1;i<=${count};i++)}}
        <tr></tr>
        {{/for }}
     </tbody>
    </table>
</script> 
```

但是通过在模板中执行上述实现，tmpl 库会抛出“找不到模板命令”错误。

任何人都可以建议解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:04:11.267

你可以试试这个：

```
{{each(i) Name}}
    {{if i < count}}
        <tr></tr>
    {{/if}}
{{/each}} 
```

# directx - 以 Direct3D 的常用运行时版本为目标

> ID：13087375
> 
> 赞同：0
> 
> 时间：2012-10-26T12:58:43.810
> 
> 标签：directx, direct3d

我想将 Direct3D 添加为 2D 游戏的可选图形后端，以绕过 DirectDraw 的限制（例如 Windows 8 中可怕的 DirectDraw 仿真）。

我可以以大多数用户不需要安装任何东西的方式做到这一点吗？我注意到 Windows XP 带有一些 Direct3D 文件，我可以针对该版本的运行时吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:58:43.810

根据 Steam 软件工程师 John McCaskey 的说法：

> 不使用 D3DX 助手的游戏（例如 Source 引擎游戏）不需要在首次启动时运行烦人的安装程序，因为它们只依赖于安装的主要 d3d9/10/11 版本。但是，使用 D3DX 的游戏必须运行它，因为这是 Microsoft 允许分发和检查文件版本信息的唯一方式。

因此，假设用户安装了某些版本的 DirectX 9，直接使用 Direct3D 9 (d3d9.h) 应该没问题。

资料来源：[为什么 Steam 会让您重新安装 DirectX](http://www.rockpapershotgun.com/2011/08/03/why-steam-makes-you-install-directx-repeatedly/) - Rock、Paper、Shotgun

# php - 如何将javascript插入mysql数据库？

> ID：13087378
> 
> 赞同：-3
> 
> 时间：2012-10-26T12:58:56.477
> 
> 标签：php, javascript, mysql

当我尝试插入 javascript 链接时，我遇到了这个问题

```
Database error 1064: You have an error in your SQL syntax;
check the manual that corresponds to your MySQL server version
for the right syntax to use near 'text/javascript'   
src='http://www.domain.com/js/embed.js'></script>'' at line 3 
```

除了那个 javascript 链接，它还接受文本和 youtube 嵌入代码。如何纠正这个问题？

这是桌子

```
 CREATE TABLE IF NOT EXISTS `livedata` (
`livedata_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
`livedata_cat_id` int(11) NOT NULL,
`title` varchar(255) NOT NULL,
`image` varchar(255) NOT NULL,
`code` text NOT NULL,
 PRIMARY KEY (`livedata_id`)
 ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=78 ; 
```

我的 Htm 代码

```
 <textarea class="text-input textarea" id="textarea" name="code" cols="100" rows="8"></textarea> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T13:00:59.350

考虑使用[base64_encode](http://php.net/manual/en/function.base64-encode.php)和[base64_decode](http://www.php.net/manual/en/function.base64-decode.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T13:02:31.933

不评论您实际在做什么，但您的问题在于撇号。[使用mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)转义它们。

# git - Git - 将其他存储库链接到我的存储库

> ID：13087379
> 
> 赞同：1
> 
> 时间：2012-10-26T12:58:57.897
> 
> 标签：git, svn, github

我有一些`repo A`和`repo B`。中的项目`repo A`取决于来自 的项目`repo B`。我想这样做，当某些用户尝试从 my 中提取源时`repo A`，在 pull from`repo A`时，来自的源`repo B`也必须被拉到某个文件夹中。我已经看到，什么 SVN 可以将一些 SVN 存储库链接到其他 SVN 存储库。如何链接 git repos？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:08:20.740

Git为此提供了[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)。

例子：

```
$ git init repo_a
Initialized empty Git repository in /Users/messa/temp/submodule-example/repo_a/.git/
$ git init repo_b
Initialized empty Git repository in /Users/messa/temp/submodule-example/repo_b/.git/

$ cd repo_b
$ echo 'This is Project B.' >> README.txt
$ git add README.txt 
$ git commit -am 'Initial commit in B'
[master (root-commit) 5158772] Initial commit in B
 1 file changed, 1 insertion(+)
 create mode 100644 README.txt

$ cd ../repo_a
$ echo 'This is Project A, that depends on Project B.' >> README.txt
$ git add README.txt 
$ git commit -am 'Initial commit in A'
[master (root-commit) 7e8275b] Initial commit in A
 1 file changed, 1 insertion(+)
 create mode 100644 README.txt

$ git submodule add ../repo_b project_b
Cloning into 'project_b'...
done.
$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   new file:   .gitmodules
#   new file:   project_b
#
$ git commit -am 'Added submodule project_b'
[master c8fc469] Added submodule project_b
 2 files changed, 4 insertions(+)
 create mode 100644 .gitmodules
 create mode 160000 project_b

$ tree
.
├── README.txt
└── project_b
    └── README.txt

1 directory, 2 files 
```

您可以精确控制来自 repo_b 的哪些提交将从 repo_a 链接。

有关更多信息，请参阅`git help submodule`或上面的链接。

但是有一个问题——当有人克隆 repo_a 时，project_b 会在那里，但是是空的。之后`git clone`，`git submodule init`将`git submodule update`需要。

我没有子模块的实际经验，但我看到了一些批评——例如[这篇文章](http://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/)。我认为选择正确的工作流程以避免大多数问题很重要。

# sql - 查找表分区详细信息

> ID：13087386
> 
> 赞同：1
> 
> 时间：2012-10-26T12:59:07.850
> 
> 标签：sql, oracle

> **可能重复：**
> [如何获取有关 Oracle 中表的所有信息？](https://stackoverflow.com/questions/3306876/how-can-i-get-all-the-information-about-a-table-in-oracle)

我需要将分区添加到现有表中，我们没有生产数据库访问权限，我们需要发送 sql 查询以查找有关现有分区的详细信息，我试过了

```
desc <table-name>; 
```

但它只提供有关表结构的信息，我们需要表结构以及分区详细信息。

数据库是oracle 10g

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:09:11.143

`get_ddl`包的功能`dbms_metadata`会给你这样的信息：

```
SQL> create table Tb_Test(
  2    id number primary key
  3  )
  4  partition by range(id)(
  5    partition part1 values less than (100),
  6    partition part2 values less than (300),
  7    partition part3 values less than (maxvalue)
  8  )
  9  ;

Table created 

SQL> select dbms_metadata.get_ddl('TABLE', 'TB_TEST')
  2    from dual
  3  ;

DBMS_METADATA.GET_DDL('TABLE',
--------------------------------------------------------------------------------

  CREATE TABLE "BUDGET2011"."TB_TEST"
   (    "ID" NUMBER,

     PRIMARY KEY ("ID")

  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS"  ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
  STORAGE(
  BUFFER_POOL DEFAULT)
  TABLESPACE "USERS"
  PARTITION BY RANGE ("ID")
 (PARTITION "PART1"  VALUES LESS THAN (100)
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" NOCOMPRESS ,
 PARTITION "PART2"  VALUES LESS THAN (300)
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" NOCOMPRESS ,
 PARTITION "PART3"  VALUES LESS THAN (MAXVALUE)
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" NOCOMPRESS ) 
```

# erlang - Erlang：自动填充 .hosts.erlang 文件？

> ID：13087391
> 
> 赞同：7
> 
> 时间：2012-10-26T12:59:16.637
> 
> 标签：erlang, distribution

我正在使用 net_adm:world() 连接到其他主机上的节点，但我让它工作的唯一方法是手动创建一个主机文件并在文件中列出其他主机的名称。如果我有 10 台主机，我必须将这个文件放在所有 10 台机器上，并在每次将新主机添加到集群时更新列表十次。

每次与新主机上的节点建立连接时，是否无法自动更新此文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T03:44:36.750

您的 .hosts.erlang 文件不需要完整或 100% 正确。一个节点只需要相互连接就可以了解集群中的每个其他节点。

您可以跳过维护 .hosts.erlang 文件并使用多播 UDP 动态发现节点。有关示例代码，请参见[节点查找器。](http://code.google.com/p/nodefinder/)

我们开始关闭多播 UDP 路由，但后来决定只维护一个中央主机文件并使用 rsync 将其分发给所有主机。我们不经常重启节点，所以这不是一个大问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T22:39:19.183

我们使用[chef](http://www.opscode.com/chef/)`.hosts.erlang`为属于集群的节点预填充文件。该函数`net_adm:world()`可用于确定当前属于集群的节点，这些节点不一定匹配所包含的内容`.hosts.erlang`，例如，当其中一个节点关闭时。使用的替代方法`net_adm:world()`是`net_adm:world_list(Hosts)`获取主机列表（而不是从 读取`.hosts.erlang`）并执行相同操作`net_adm:world()`以确定当前连接的节点。

# function - 如何覆盖magento函数？

> ID：13087394
> 
> 赞同：2
> 
> 时间：2012-10-26T12:59:45.060
> 
> 标签：function, magento, prefix

我在客户注册页面上添加了前缀和电话字段，并希望在结帐帐单地址中使用该值

所以，我必须为客户选择的前缀和电话覆盖 magento \app\code\core\Mage\Checkout\Block\Onepage\Billing.php。

我希望您的帮助在本地覆盖此特定功能

公共函数 getPrefix() { ... }

请帮我 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T09:19:30.563

将文件夹 mage 创建到您的 app\code\local 文件夹中

\app\code\local\Mage\Checkout\Block\Onepage\Billing.php

只需将函数 getPrefix() 放在 Billing.php 中，您的修改将在这里起作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T13:58:46.890

1) 在模块中编辑 Config.xml 文件

```
<global>
   <blocks>
      <checkout>
        <rewrite>
            <onepage_billing>Namespace_ModuleName_Block_Onepage_Billing</onepage_billing>
        </rewrite>
     </checkout>
   </blocks>
</global> 
```

2) 在 namespace/Module/Block/Onepage/Billing.php 中创建 Billing.php 文件

```
class Namespace_ModuleName_Block_Onepage_Billing extends Mage_Checkout_Block_Onepage_Billing
{

    getPrefix() { ... }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:24:19.813

只需扩展 Mage_Checkout_Block_Onepage_Billing 类，并使用相同的符号执行一个公共函数 getPrefix()。

Magento 完成剩下的工作。

# magento - 如何在 Magento 的 Product Sort By 下拉菜单中添加自定义选项？

> ID：13087395
> 
> 赞同：1
> 
> 时间：2012-10-26T12:59:45.773
> 
> 标签：magento, sorting, product

我开发了我的第一个 Magento 网站，我的客户要求我做一些我不知道该怎么做的事情。

目前，在任何给定类别中，产品排序方式下拉菜单都包含以下选项：

```
Position
Name
Price 
```

我需要将其更改为：

```
Relevance
Popular
Price 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-31T14:45:59.860

这都与你的属性有关。假设你有一个属性

> Admin>Catalog>Attributes>Manage Attributes>[attribute like: 'name' etc>Properties>Frontend Properties>“用于在产品列表中排序”。

您需要选择**Yes**。然后，一旦您在要排序的属性中选择**“是**”，进入

> Admin>Catalog>Manage Categories>[选择您在下拉菜单中显示的类别]>显示设置选项卡，

然后在可用产品列表排序依据列表中选择要排序的属性。如果该框显示为灰色，请取消选中使用所有可用属性复选框。您可能需要按住 Ctrl 并单击属性以选择多个值。然后保存。

完毕

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T13:07:36.313

看起来带有下拉菜单的产品类型是可配置产品。你可以看到这三个选项，

```
Position
Name
Price 
```

您可以在下面找到这些选项，

```
Catalog->Manage Products->Your_product->Associated Products->Super product attributes configuration 
```

此外，您可以直接将其更新为，

```
Relevance
Popular
Price 
```

如果缺少这些字段，您可以搜索命名的属性，`Position||Name||Price.` 您可以找到标签，

```
Catalog->Attributes->Manage Attributes->Your_attribute->Manage Labels/Options. 
```

# c - Pthread条件等待和信号

> ID：13087398
> 
> 赞同：1
> 
> 时间：2012-10-26T12:59:54.930
> 
> 标签：c, linux, multithreading, pthreads

我对 pthread_cond_wait 和 pthread_cond_signal 函数有疑问。阅读手册页后我也无法理解。

请考虑以下代码。

```
void* thread_handler(){
... // counts till COUNT_LIMIT is reached
if (count == COUNT_LIMIT) {
  pthread_cond_signal(&count_threshold_cv);
  printf("inc_count(): thread %ld, count = %d  Threshold reached.\n",
         my_id, count);
}
printf("inc_count(): thread %ld, count = %d, unlocking mutex\n",
       my_id, count);
...
}

void* thread_handler1(){
... // waits till the previous thread has finished counting
pthread_mutex_lock(&count_mutex);
while (count<COUNT_LIMIT) {
   pthread_cond_wait(&count_threshold_cv, &count_mutex);
   printf("watch_count(): thread %ld Condition signal received.\n", my_id);
}
pthread_mutex_unlock(&count_mutex);
pthread_exit(NULL);
} 
```

该代码按预期工作。我正在尝试理解代码。这是程序的工作原理

1.  输入 thread_handler1 并执行 cond_wait。从手册页我了解到 cond_wait 将立即以原子方式释放锁。**那么为什么他们在thread_handler1下面再次释放锁**

2.  在第一个线程满足条件并达到条件信号后**，我期望阻塞的线程执行其步骤。相反，我在执行 cond_signal 的线程下面得到了 printfs。为什么会这样**

3.  总的来说，为什么我们需要在等待和发出信号之前锁定。没有锁就不能做到这一点。

有关该程序的简要介绍，请参阅此处的[完整程序](https://computing.llnl.gov/tutorials/pthreads/)。您可以在“使用条件变量”部分找到它

提前致谢

奇丹巴拉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:02:44.430

> 输入 thread_handler1 并执行 cond_wait。从手册页我了解到 cond_wait 将立即以原子方式释放锁。那么为什么他们在thread_handler1下面再次释放锁

因为应该等待的线程将在调用时释放锁`wait`，但在收到信号后（当它变得可用时）会重新获取。这就是为什么您需要稍后明确地重新发布它。

> 在第一个线程满足条件并达到条件信号后，我期望阻塞的线程执行其步骤。相反，我在执行 cond_signal 的线程下面得到了 printfs。为什么会这样

因为调用`signal`不会从 CPU 切换线程。它将继续正常运行。

# android - android ORMLite 在数据库创建时填充表

> ID：13087401
> 
> 赞同：1
> 
> 时间：2012-10-26T12:59:56.570
> 
> 标签：android, database, ormlite

我在我的 android 应用程序中使用 ORMLite。有没有办法在数据库助手中创建数据库以添加一些行，或者如果已经创建了一个数据库，我必须检查主要活动，然后创建它并在它不存在时填充它。我想要实现的目标：当应用程序第一次启动时，在数据库中添加一些数据（创建数据库文件时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:15:01.760

您当然可以在`onCreate` *or* `onUpgrade`方法中添加任意数量的内容。创建表后，生成 DAO 并执行`dao.create(...);`.

如果您查看[`HelloAndroid`示例应用程序](http://svn.code.sf.net/p/ormlite/code/examples/android/HelloAndroid/src/com/example/helloandroid/DatabaseHelper.java)，您会发现它正是这样做的。

```
public void onCreate(SQLiteDatabase db, ConnectionSource connectionSource) {
    TableUtils.createTable(connectionSource, SimpleData.class);
    // here we try inserting data in the on-create as a test
    RuntimeExceptionDao<SimpleData, Integer> dao = getSimpleDataDao();
    // create some entries in the onCreate
    SimpleData simple = new SimpleData(System.currentTimeMillis());
    dao.create(simple);
} 
```

# javascript - 如何在 vbscript 或 javascript 中关闭 Internet Explorer 的当前选项卡

> ID：13087404
> 
> 赞同：2
> 
> 时间：2012-10-26T13:00:07.430
> 
> 标签：javascript, internet-explorer, vbscript

我想在单击“注销”按钮时关闭 Internet Explorer 的当前选项卡。这是一个要在我的 Web 应用程序中实现的新功能。我的应用程序仅支持 Internet Explorer。注销按钮所在的页面是window.close（）的许多页面的组合不起作用。

我在 vbscript 中使用了以下代码来关闭 Internet Explorer 的当前浏览器窗口：

```
 if(window.opener = Empty) then
     dim x
     x = "<%=Request.Browser.MajorVersion%>"

     if(x="6") then
        window.parent.opener = "x"
        window.parent.close
     else  
      'I need code for closing the tab here for IE7
      end if   

  end if 
```

我使用“<%=Request.Browser.MajorVersion%>”来获取 Internet Explorer 的版本。如果是 IE6，那么代码可以正常工作，因为 IE6 中没有选项卡功能，但是如何关闭 IE7 的当前选项卡。请在这种情况下帮助我，以便我也可以关闭 IE7 的当前选项卡。提前感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:33:15.653

您可以尝试关闭 IE7 中的选项卡：-

```
 window.parent.opener = "x"
    window.parent.close 
```

我遇到了同样的问题，发现这对我来说很好。虽然这会给你一个额外的信息（微软警告信息）： -

![在此处输入图像描述](../Images/55780e736a33080c06b2ed0e879806e6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:17:27.567

现代浏览器不允许您关闭不是用 window.open 创建的窗口或选项卡。使其工作的任何方法都是 HACK，并且在升级浏览器时必然会中断。

# android - 将 Activity1 中的视图转换/动画化为 Activity2 中的视图

> ID：13087406
> 
> 赞同：4
> 
> 时间：2012-10-26T13:00:19.843
> 
> 标签：android, android-activity, android-animation, android-imageview

我有两个`ImageViews`包含相同的图像。`Views`它们位于两个不同的`Activities`. 我想要一个动画 - 对于用户 - 将 Image1 转换为 Image2。

是否可以创建一个`Transformation`或`Animation`将 Activity1 的大小和重新定位到Acitivity2`ImageView`的位置和大小？`ImageView`

希望我的观点有点清楚......

谢谢！

罗恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:02:31.807

不（如果我正确理解您的问题）。活动是独立的。您所能做的就是从第一个 ImageView 传递属性（如大小、位图等）并应用于第二个。或者将这两个活动合二为一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:36:20.920

您只能通过非常仔细的定时自定义活动转换以及 ImageView 的动画来实现您所描述的内容。如果可以创建自己的 Activity 转换，请参阅[`Activity.overridePendingTransition()`](http://developer.android.com/reference/android/app/Activity.html#overridePendingTransition%28int,%20int%29)。有关创建动画的一般信息，另请参阅此[官方指南](http://developer.android.com/guide/topics/resources/animation-resource.html)。

如果可能，请考虑重新设计，以便您可以在同一活动中的片段之间转换，或者使用 ViewSwitcher，例如：

```
viewSwitcher.setInAnimation(this, R.anim.in_animation);
viewSwitcher.setOutAnimation(this, R.anim.out_animation);
viewSwitcher.showNext(); 
```

# javascript - JQuery .css() 返回 100% 作为 100px

> ID：13087412
> 
> 赞同：7
> 
> 时间：2012-10-26T13:00:36.820
> 
> 标签：javascript, jquery, html, css

```
<style>
.info{
        width:94%;
      }
</style> 
```

现在使用 JQuery 这样做

```
$('.info').css('width'); 
```

返回**94px**而不是像素中的等效值（在我的情况下为**500px 。）**

如果我将 css 中的宽度设置为**105%**，JQuery 会将其返回为**105px**。

父容器的高度和宽度分别为 600px 和 500px。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T22:00:58.610

我认为一个可能的原因是在您尝试获取尺寸时隐藏元素的容器。

嵌套的 div 和表格也有类似的情况。

请参阅以下小提琴，我设法重现了该行为：

[http://jsfiddle.net/36yvb/](http://jsfiddle.net/36yvb/)

`%`我仍然认为当无法实际计算元素的尺寸时，jQuery 将百分比作为整数（不带符号）返回是一个错误。更改（以％表示）的宽度，`#another-cell`并在隐藏表格时看到它返回相同的值而没有`%`符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:13:18.317

它返回的宽度取决于它写入 HTML 的哪个部分。意思是如果它写在标签内，那么 94% 的百分比将反映该特定 div 的 94%。

但同样，如果同一标签中的另一个标签已经使用了一定数量的定义宽度，那么如果标签在信息标签之前定义，则信息甚至可能获得更小的空间。

请放弃更多的实际代码以获得更好的答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:25:28.480

解释这种行为的唯一原因是你的类有多个元素`info`

当这种情况发生并且你做一个`$('.info').css('width');`jQuery 将返回给你`width`集合中的第一个元素。

如果是这种情况，您可能需要更具体地使用您的选择器。

[演示](http://jsfiddle.net/e9Ytg/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T13:06:48.793

实际上，似乎并非如此：[请参阅this fiddle](http://jsfiddle.net/QreBa/6/)。

html:

```
<div id="info"></div> 
```

CSS：

```
html, body {
    position: relative;
    width: 500px;
}

#info {        
    width: 94%;
} 
```

js：

```
$( function() {
    document.write( $('#info').css('width') );
}); 
```

信息宽度相对于什么？它可能是一个宽度为 100px 的元素吗？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-26T13:11:02.123

使用 .css() 时，每个浏览器都会返回文本不同但逻辑上相等的值，例如 #FFF、#ffffff 和 rgb(255,255,255)

而不是使用`.css('width')`使用`.width()`

根据jQuery：[http ://api.jquery.com/width/](http://api.jquery.com/width/)

> .css(width) 和 .width() 之间的区别在于后者返回一个无单位的像素值（例如，400），而前者返回一个单位完整的值（例如，400px）。当需要在数学计算中使用元素的宽度时，建议使用 .width() 方法。

# authentication - DropboxUnlinkedException 但会话内部已经有令牌并且用户没有撤 销访问权限

> ID：13087418
> 
> 赞同：1
> 
> 时间：2012-10-26T13:00:47.207
> 
> 标签：authentication, dropbox, access-token, dropbox-api

我的问题是我在数据库中有现有用户，它存储第一次身份验证的密钥和秘密。当我回来时，我希望再次使用它。第一次认证，一切正常。我可以使用来自 Dropbox API 的每个方法调用，并且令牌（密钥和秘密）存储在数据库中。

我回到应用程序并从数据库中获取令牌，将其设置为会话，将当前会话与 API 链接。

```
session = new WebAuthSession(appKeys, ACCESS_TYPE);
api = new DropboxAPI<WebAuthSession>(session);
String userKey = dropboxUserObj.getUserKey(); //Key from database
String userSecret = dropboxUserObj.getUserSecret();//Secret from database
AccessTokenPair userAccessTokenPair = new AccessTokenPair(userKey, userSecret);
session.setAccessTokenPair(userAccessTokenPair); 
```

当我想使用 api 从 api 获取用户数据时，它会向我返回 DropboxUnlinkedException

```
String userDisplayName = api.accountInfo().displayname; 
```

我已经检查了调试模式。Api 与当前会话相关联。当前会话存储了 Appkey 和用户的令牌以及正确的访问类型。我怀疑的一点是我看到了“client = null”。我可能忘记了一些东西，但我检查了所有内容，尝试了我能想到的所有可能性，但它仍然返回“DropboxUnlinkedException”，这意味着我没有在会话上设置访问令牌对，我也没有确定撤销访问权限。

请帮我弄清楚...

我添加了一个屏幕截图也许它可以说明我的问题 ![在此处输入图像描述](../Images/2f3ef415ee0bf5438232fc6e5548b64f.png)

# cakephp - x秒后Cakephp重定向？

> ID：13087419
> 
> 赞同：0
> 
> 时间：2012-10-26T13:00:53.790
> 
> 标签：cakephp, redirect, wait

我正在寻找一个带有等待时间的 cakephp 2.1 的简​​单重定向。

我希望查看页面在 - 让我们说 5 秒后重定向到外部 url。

知道如何实现吗？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T13:33:12.960

最简单的解决方案在视图中涉及 jquery/javascrpt、meta 或 php 标头。我不相信 cake 有专门的方法来做到这一点，但替代方法可能是一个简单的 for 循环，只需简单的 +1 计数到 5000 或任何需要 5 秒的值，然后执行正常的蛋糕重定向。

简单的视图示例。

php头文件

```
header('Refresh: 5; URL=http://site.com/controller/action'); 
```

元

```
<meta http-equiv="refresh" content="5;url=http://site.com/controller/action"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-26T09:55:17.520

我的回答可能晚了。但它对其他想要使用 CakePHP View Helper 的人很有用：

```
 echo $this->Html->meta(
        null,
        null,
        ['http-equiv' => 'refresh', 'content' => '10;url=https://example.com/controller/action']
    ); 
```

它适用于 CakePHP 2.x、3.x 和 4.x

# javascript - 如何使用jQuery检查ajax调用是否存在？

> ID：13087421
> 
> 赞同：5
> 
> 时间：2012-10-26T13:01:02.777
> 
> 标签：javascript, jquery, ajax

我知道我的标题不是很清楚。

例如，这是我的代码结构：

```
if (foo == something) {
  // Ajax call 1, let it be $.ajax("foo1.html") and so on
} else {
  // Ajax call 2, let it be $.ajax("foo2.html") and so on
} 
```

我将如何测试是否`$.ajax("foo1.html")`已实际运行？

请不要告诉我再测试`foo == something`一次。我的实际代码要复杂得多，所以请从ajax调用的角度回答这个问题。

这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T13:03:53.883

我不确定我是否理解正确，但是 jQuery 会将*Deferred*对象混合到它的*jXHR*对象中，你可以检查它的状态。

```
var resp = $.ajax({});

// somewhere else...
if( resp.state() === 'resolved' ) {
} 
```

其他状态是`rejected`and `pending`，请参阅[http://api.jquery.com/deferred.state/](http://api.jquery.com/deferred.state/)

当然，您也可以获得这些*Deferred*对象的所有优点，例如在之后为某些事情添加更多*事件处理程序*`.done()`（ 、`.fail()`等），或者只是*等待*使用`$.when()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T13:03:15.790

您可以在 ajax 调用中设置回调：

```
$.ajax({
  url: "foo1.html"
}).done(function() { 
  alert('Done!');
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-26T13:04:30.603

我会在 AJAX 调用之前设置变量并在成功回调中将其重置，如下所示：

```
var isRunning = true;

$.ajax({
    url: url,
    success: function(resp){
      isRunning = false;
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-20T08:04:35.163

我有类似的问题。我使用了这段代码：

```
var isRunning = false; // whether ajax call is running
if(isRunning==false){
   isRunning = true;
   $.ajax({
     // do your stuff
     // make sure you set
     isRunning = false;
     // on success
   });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T13:04:36.797

将调用包装在 try catch 中。

如果由于服务器上不存在该方法而导致对 'foo1' 的调用失败，则在 catch 调用中调用 foo 两个然后三个，直到你用尽了所有的后备。

如果您知道该方法存在并认为它会失败，则在其上设置一个状态，如果服务器失败则可以返回，然后在 ajax 回调中处理返回。

# asp.net-mvc - 在 MVC 中，有一种方法可以将模型属性别名以显示在 html.Labelfor 中

> ID：13087424
> 
> 赞同：3
> 
> 时间：2012-10-26T13:01:11.767
> 
> 标签：asp.net-mvc, model-view-controller, view, model, alias

在我的用户表单中，我想使用 html.Labelfor 助手，但不是 CatName 的模型属性名称，而是类别名称。我知道我可以把它放在 a 中，但我必须一遍又一遍地重复使用这些名称。下面是例子。

模型属性：

```
public string CatName { get; set; } 
```

看法：

```
@Html.LabelFor(model => model.CatName)  //Displays CatName , I want Category Name 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T13:02:37.697

您可以使用[`DataAnnotations`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx)

```
 [Display(Name = "Category Name")]
 public string CatName { get; set; } 
```

这是首选方式。

您还可以使用`LabelFor`带有标签文本的字符串的重载

```
 @Html.LabelFor(model => model.CatName, "Category Name") 
```

# php - 生成图像上的单色

> ID：13087428
> 
> 赞同：0
> 
> 时间：2012-10-26T13:01:48.203
> 
> 标签：php, gd, image-manipulation

我的脚本将几个图像粘合到一个图像中，但结果图像在胶水图像集中的第一张图像上具有单一颜色：

![在此处输入图像描述](../Images/06a9f12ba50f982f76683dac1be7329c.png)

但是输入的 4 张图像颜色不同（黄色、绿色、蓝色、红色）。只有第一张图片看起来是正确的。

```
$images = array();

foreach ($fileNames as $fileName) {
    $image = imagecreatefrompng($path . $fileName);
    if ($image) {
        $images[] = $image;
    }
}

// ...

$img = imagecreate($w, $h);

$x = 0;
foreach ($images as $image) {
    $width = imagesx($image);
    $height = imagesy($image);

    imagecopy($img, $image, $x, 0, 0, 0, $width, $height);
    $x += $width;
} 
```

另一个例子（如果胶水组的第一张图片是蓝色的，其他颜色不同）：

![在此处输入图像描述](../Images/2bacea569cb42af9c69432f694c56095.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:23:01.017

您可能正在混合调色板图像，因此调色板将从第一个目标图像中获取。

通过创建合适大小的真彩色图像将它们转换为真彩色，然后将所有图像复制到该图像中。

之后，您可以尝试再次将目标图像缩小到调色板，即使这可能会产生稍微“偏”的颜色。

```
$img = imageCreateTrueColor($w, $h);
// Add transparency management if needed

$x = 0;
foreach ($images as $image) {
    $width  = imagesx($image);
    $height = imagesy($image);    
    imagecopy($img, $image, $x, 0, 0, 0, $width, $height);
    $x += $width;
}
// Reduce image to non-dithered, 256-color paletted if needed
// imageTrueColorToPalette($img, False, 256); 
```

# php - 使用工厂获取特定对象有什么好处？

> ID：13087432
> 
> 赞同：2
> 
> 时间：2012-10-26T13:02:03.030
> 
> 标签：php, design-patterns, factory

> **减轻以下方面的特定方面：**
> [工厂模式。什么时候使用工厂方法？](https://stackoverflow.com/questions/69849/factory-pattern-when-to-use-factory-methods)

在我的团队中，有一个关于工厂设计模式的讨论。

在我们的项目中，我们有一些像这样构建的工厂：

```
class ProductFactory {

    const PRODUCT_A = 'product_a';
    const PRODUCT_B = 'product_b';
    const PRODUCT_C = 'product_c';

    private static $classMapping = array(self::PRODUCT_A => 'A',
                                         self::PRODUCT_B => 'B',
                                         self::PRODUCT_C => 'C');

    public function create($productConstant) {
        $className = self::$classMapping[$productConstant];
        return new $className();
    }
} 
```

讨论是关于这家工厂的用途。如果我从不动态定义产品并且总是定义我喜欢从中获得的产品，是否有必要使用这种模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:06:45.033

工厂的优势在于它们可以解耦代码。参加你的课程`Foo`，这需要一个实例`A`：

```
class Foo {

    public function __construct() {
        $a = new A;
    }

} 
```

该类`Foo`现在与该类耦合`A`，因为它在其源代码中硬编码了类名。如果您愿意，您无法提供`A`to的替代实现`Foo`，例如`A`在测试中模拟。这里是工厂进来的地方：

```
class Foo {

    public function __construct(ProductFactory $factory) {
        $a = $factory->create($factory::PRODUCT_A);
    }

} 
```

您现在可以在需要时注入任何类型的内容`A`，`Foo`您已经解耦了这两个类。

这就是工厂的用途。在适当的时候使用它们。如果与 耦合没有问题，则为您`Foo`提供`A`更多动力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:03:20.993

这取决于。

设计模式的目的是解决问题，而不是制造问题。

*   如果您要在另一个类中创建产品，工厂可以提供一个模拟对象进行测试。
*   如果您要为构造函数创建具有不同类型数据的产品，工厂将派上用场。
*   如果您要严格使用依赖注入，则不需要工厂
*   如果工厂没有真正的理由，请不要使用。

# freemarker - Freemarker 将字符串解析为 Json

> ID：13087436
> 
> 赞同：8
> 
> 时间：2012-10-26T13:02:24.303
> 
> 标签：freemarker

可能这是不可能的，
但我想用freemarker在地图中转换一个json字符串

前任：

```
<#assign test = "{\"foo\":\"bar\", \"f\":4, \"text\":\"bla bla\"}"> 
```

并能够从此字符串中获取**文本键**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-26T15:59:52.933

使用`?eval_json`（需要 FreeMarker 2.3.31）：

```
<#-- Using '...' instead of "..." for convenience: no need for \" escapes this way. -->
<#assign test = '{"foo":"bar", "f":4, "text":"bla bla"}'>
<#assign m = test?eval_json>

${m.foo}  <#-- prints: bar -->

<#-- Dump the whole map: -->
<#list m as k, v>
  ${k} => ${v}
</#list> 
```

在 2.3.31 之前，`?eval`为此目的很流行，但实际上需要 FreeMarker 表达式。这是一个问题，因为它不支持`null`或`\uXXXX`转义（因此解析此类 JSON 将失败）。它也可能是一个安全问题，因为它支持访问变量和调用方法/函数，而 JSON 不支持。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T15:23:42.397

[freemarker.sourceforge.net/docs/pgui_datamodel_method.html](http://freemarker.sourceforge.net/docs/pgui_datamodel_method.html)

在代码中：

```
// a class to parse Json, just add this method to your rendered template data
// with data.put("JsonParser", new FreemarkerJsonParser()); 
// or in shared variables http://freemarker.sourceforge.net/docs/pgui_config_sharedvariables.html
public class FreemarkerJsonParser implements TemplateMethodModel{
    @Override
    public Object exec(List args) throws TemplateModelException {
        return new Gson().fromJson(s, new TypeToken<Map<String, String>>() {}.getType());((String) args.get(0));
    }
} 
```

在模板中：

```
<#assign map = JsonParser("{\"foo\":\"bar\", \"f\":4, \"text\":\"bla bla\"}")>
${map.text} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:06:57.840

听起来您需要定义/实现一个读取 JSON的[模板。](http://freemarker.sourceforge.net/docs/pgui_datamodel_directive.html)

# c# - 如何从使用数据表创建的组合框中获取选定的项目

> ID：13087437
> 
> 赞同：5
> 
> 时间：2012-10-26T13:02:25.447
> 
> 标签：c#, combobox

在我的项目中，组合框值来自一个名为“getArticles”的方法。这是方法：

```
public void getArticles(ComboBox cb)
{
    var getAll = getAllFromDB("articles", "", "articleName ASC");
    DataTable dt = getAll.Tables["articles"];
    cb.DataSource = dt;
    cb.DisplayMember = "articleName";
    cb.ValueMember = "id";
} 
```

“getAllFromDB”方法正在从文章表中进行选择并返回 DataSet。现在我的问题就在这里。当我使用时`cb.SelectedValue`，我可以获得文章名称的 id 值。这很好。但是当我使用`cb.SelectedItem`它时显示“System.Data.DataRowView”。
请你能帮助我，我怎样才能得到像使用一样的文章名称`cb.selectedItem`？
亲切的问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T13:06:14.807

尝试以下行代码，可能有助于获取所选项目。

```
 ComboBoxItem requiredItem = (ComboBoxItem)cboType.SelectedItem;
        string value = requiredItem.Content.ToString(); 
```

编辑：

抱歉，上面的 ComboBoxItem 仅适用于 .Net Framework 4.5，它位于`System.Windows.Controls`命名空间中。请参阅以下代码部分以获取答案并检查

```
 DataTable dtable = (DataTable)comboBox1.DataSource;
        label1.Text = dtable.Rows[comboBox1.SelectedIndex][0].ToString();//gives you article id
        label2.Text = dtable.Rows[comboBox1.SelectedIndex][1].ToString();//gives you article name 
```

# c# - 如何实现 SearchByID？

> ID：13087438
> 
> 赞同：0
> 
> 时间：2012-10-26T13:02:27.143
> 
> 标签：c#, .net, wpf

大家下午好！

作为更好地掌握基于对象的编程的一些大部分方面的一部分，我已经开始尝试一些比我过去所做的更大的事情。因此，我正在尝试学习继承、代码重用、更广泛地使用类等等。为此，我试图将基本 RPG/地牢爬行者所需的所有部分拼凑起来。我知道这已经完成了十亿次，但我发现实际上尝试编写类似的代码会让你遇到比你想象的更多的问题，这是一种很好的学习方式（我认为）。

现在我只加载了一个 WPF 应用程序，因为我 95% 的兴趣在于能够将工作类、例程、函数等拼凑在一起。而不是对它的外观感兴趣。我实际上正在阅读 XNA，但由于我主要是想掌握基本的工作原理，我还不想让这些方面与事物的图形方面复杂化。

我现在面临的问题是，当我要一个角色攻击或防御时，它应该知道它来自哪个其他角色，或者应该指向哪个角色。我想我可以使用 GUID 或手动指定的 ID。但问题是我真的不知道如何实现这样的事情。我想到的是，我可以添加对数组 (Character[]) 的引用，并让 SearchByID 函数循环遍历它们以找到正确的数组并将其返回。像这样：

```
internal Character SearchByID(string _ID)
{
   foreach(Character charToFind in Character[])
   {
       if(charToFind.ID == _ID)
       return charToFind;
   }
} 
```

当然，由于目前的回归，这必须稍作改变，但只是为了给你一个想法。我坚持的是如何在“字符”类之外创建适当的数组？我可以很好地填写它，但是我该如何将它添加到班级级别之上呢？“Character”类的构建方式是每个新角色都从 Character 类实例化。然后构造函数加载适当的值。但除此之外，我认为不可能在此之外初始化一个数组。

如果最好发布我拥有的整个代码，那根本没有问题！

感谢您为我提供的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:54:45.363

我认为您可以只使用 Character-class 并将其他 Characters 传递给它，例如：

```
public class Character
{
    public string Name { get; private set; }

    public int HitPoints { get; private set; }

    public int Offense { get; private set; }

    public int Defense { get; private set; }

    public Character(string name, int hitPoints, int offense, int defense)
    {
        Name = name;
        HitPoints = hitPoints;
        Offense = offense;
        Defense = defense;
    }

    public void Defend(Character source)
    {
        HitPoints = HitPoints - (source.Offense - Defense);
        if (HitPoints <= 0)
        {
             Console.WriteLine("{0} died", Name);
        }
    }

    public void Attack(Character target)
    {
        // Here you can call the other character's defend with this char as an attacker
        target.Defend(this);
        if (target.HitPoints <= 0)
        {
            Console.WriteLine("{0} killed {1}", Name, target.Name);
        }
    }
} 
```

面向对象编程的问题是你必须开始思考对象。物体在具体时就像盒子。你可以制作新的并赋予它们一些属性，例如名称、高度、宽度、生命值等等。您还可以让这些对象执行操作。现在一个简单的盒子本身不会做很多事情，但是一个角色可以做很多事情，所以将这些动作放在 Character-class 中是有意义的。

除了拥有角色之外，您可能还有一个游戏类来管理游戏状态、角色、怪物、宝箱等......

现在这个简单的例子可能会让你在你的防御高于攻击者的进攻时获得生命值，但这是细节，我将把具体的实现留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:37:19.920

查看键控集合

[键控集合](http://msdn.microsoft.com/en-us/library/ms132438.aspx)

它就像一个字典，其中键是类的属性。
您将能够使用
Characters[id]
语法 引用字符

在您的 Character 类上覆盖 GetHashCode 和 Equals 以获得性能。
如果您使用 Int32 作为 ID，那么您将获得一个完美的哈希值。
非常快且 O(1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:13:18.410

我猜你想要一种在实例化字符时在数组中插入字符的方法。

您可以制作**静态**数组或列表

所以，我认为你的课应该是

```
class Character
{
    static List<Character> characterList=new List<Character>();//all characters are here
    public Character(string id,...)
    {
     //initialize your object
     characterList.Add(this);//store them in the list as and when created
    }

    internal Character SearchByID(string _ID)
    {
       foreach(Character charToFind in characterList)
       {
       if(charToFind.ID == _ID)
       return charToFind;
       }
    }
} 
```

您可能知道`static`成员与`class`不相关联。因此`object`，当您创建一个新`character`对象时，它将自动添加到`characterList`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T13:11:15.570

您可以使用在控制器类中实例化的字典：

```
Dictionary<Guid, Character> _characterList = new Dictionary<Guid, Character>(); 
```

初始化：

```
var someCharacter = new Character() { stats = something };
var otherCharacter = new Character() { stats = anotherThing };

var char1Id = Guid.NewGuid();
var char2Id = Guid.NewGuid();

_characterList.Add(char1Id, someCharacter);
_characterList.Add(char2Id, otherCharacter); 
```

然后，访问字符：

```
var charToFind = _characterList[char1Id]; 
```

或者

```
var charToFind = _characterList.Single(c => c.Name = "Fred The Killer"); 
```

或者别的什么...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T13:08:43.870

除非您正在处理单独的进程，例如客户端-服务器，否则您可能根本不想使用“Id”。

无论你在哪里经过`string _ID`，都可以通过实际的`Character`。这样可以节省您在数组或其他内容中查找的时间。

发布更多代码，我可以告诉你我的意思。

# ios - UITableView 单元格不显示正确的详细信息

> ID：13087448
> 
> 赞同：-2
> 
> 时间：2012-10-26T13:02:59.153
> 
> 标签：ios, uitableview, uisearchbar

我创建了表格视图和搜索栏。

单元格 1 的名称是 iPhone。

当我单击单元格 iPhone 时，在详细视图中它会写入 iPhone。当我搜索 iPod 时，它成为搜索列表中的第一个单元格，但是当我单击它时，它写的是 iPhone 而不是 iPod。我尝试将所有代码插入此处。

```
 - (BOOL)shouldAutootateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
    // Return YES for supported orientations
   return (interfaceOrientation == UIInterfaceOrientationPortrait);
      }

     #pragma  mark - Table View Methods

    - (NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{

    return 1;
  }
    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section      {
  return [displayItems count];
       }

   - (UITableViewCell *)tableView:(UITableView *)aTableView       cellForRowAtIndexPath:(NSIndexPath *)indexPath {
   static NSString *cellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
}

cell.textLabel.text = [displayItems objectAtIndex:indexPath.row];

return cell;

 }

 -(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{

if ([searchText length] == 0) {
    [displayItems removeAllObjects];
    [displayItems addObjectsFromArray:allItems];

} else {

    [displayItems removeAllObjects];
    for (NSString * string in allItems ){
        NSRange r =[string rangeOfString:searchText options:NSCaseInsensitiveSearch];

        if (r.location != NSNotFound){
            [displayItems addObject:string];
        }
    }

    [tableView reloadData];

   } 

  }

   -(void)searchBarSearchButtonClicked:(UISearchBar *)asearchBar {

   [searchBar resignFirstResponder];

      }

    - (UITableViewCellAccessoryType)tableView:(UITableView *)tableView accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath{
return UITableViewCellAccessoryDisclosureIndicator;
    }

       - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

      {
   DetailViewController *DVC = [[DetailViewController alloc] init];

   //Pass the row to the DVC

DVC.characterNumber = [indexPath row];

//Push the DetailViewController object onto the stack

[self.navigationController pushViewController:DVC animated:YES];

 }
 @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:05:56.750

You are passing to detail controller row number for allItems array, but it is not same that in displayItems

```
DVC.characterNumber = [indexPath row]; 
```

There is you should assing correct row from allItems array, not displayItems array

**Update:**

```
NSString *item = [displayItems objectAtIndex:indexPath.row;
DVC.characterNumber = [allItems indexOfObject:item]; 
```

# c# - 从另一个表单刷新 dataGridView 的 DataSource

> ID：13087462
> 
> 赞同：1
> 
> 时间：2012-10-26T13:03:53.447
> 
> 标签：c#, winforms, datagridview

我制作了一个在 DataGridView 控件中显示一些数据的应用程序。数据存储在 SQL 数据库中。由于此特定显示有很多参数，因此我在同一个项目中创建了另一个（子）表单，以帮助用户添加或替换数据库中的数据。添加和交替功能都可以正常工作，但 DataGridView 中的数据保持不变。我知道如何刷新 DataGridView 的 DataSource，但我不知道如何从另一个表单触发该函数。

我使用这个函数来刷新 DataGridView 的 DataSource：

```
private void RefreshMyDGV()
{
    command.CommandText = "SELECT * FROM MyDataBase";
    SDA.SelectCommand = command;
    SDA.Fill(myDataTable);
    dataGridView1.DataSource = MyDataTable;
} 
```

我试图将此函数更改为公共静态函数，以便能够从另一个（子）表单访问它，但随后编译器抛出错误“非静态字段、方法或属性需要对象引用”。

我还尝试将 DataGridView 定义为公共的，然后从另一种形式访问它：

```
((Form1)fr1).dataGridView1.DataSource = myDataTable; 
```

但这也没有用。

请提出一种方法来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T13:24:43.840

问题是你正在制作函数`static`。你不需要那样做——只要去做`public`。

有关静态方法和实例方法之间的区别，请参阅此文档：http:
[//msdn.microsoft.com/en-us/library/aa645629 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645629(v=vs.71).aspx)

为了调用公共函数，您需要从子表单中引用父表单*实例*（不仅仅是类）。向您的子表单添加一个名为`LogicalParent`type的属性`ParentForm`（替换您的实际父表单的类型）（已经有名为`Parent`and的属性`ParentForm`，但它们用于其他用途，您不应该使用它们）：

```
public ParentForm LogicalParent{ get; set; } 
```

现在，在父窗体上，当您打开子窗体的新实例时，在调用 Show 函数之前设置此属性：

```
ChildForm l_childForm = new ChildForm();
l_childForm.LogicalParent = this;
l_childForm.Show(); 
```

现在，在子窗体上，您有对父窗体的引用。您现在可以调用公共函数：

```
this.LogicalParent.RefreshMyDGV(); 
```

* * *

选择：

在父窗体上，将对父窗体的引用传递给`ShowDialog`函数：

```
ChildForm l_childForm = new ChildForm();
l_childForm.ShowDialog(this); 
```

现在，在子窗口中，您可以通过`Owner`属性访问父窗体。但是您需要将`Owner`属性转换为父表单的类型。因此，在子窗体中：

```
((ParentForm)this.Owner).RefreshMyDGV(); 
```

* * *

计量吸入器：

如果您使用的是 MDI 环境（如果您不知道那是什么，请忽略它），那么您可以像使用上面的`ParentForm`属性一样使用该`Owner`属性（您需要将其强制转换为父类型）。MDI环境解释起来比较复杂，既然你没说你用的就是这个，这里就不解释了。如果您需要更多信息，请访问：http: [//msdn.microsoft.com/en-us/library/xyhh2e7e.aspx](http://msdn.microsoft.com/en-us/library/xyhh2e7e.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:22:47.707

我会将 RefreshMyDGV() 方法公开。然后，您可以通过子表单上的父级访问它。

由于您更改了数据，因此重置绑定应该可以解决问题。

```
dataGridView1.ResetBindings() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T10:37:59.953

您可以使用子窗体的 DialogResult

然后代替`childform.Show();`

你会用 `childform.ShowDialog();`

ParentForm 现在将在继续之前等待 DialogResult

在子窗体中成功更改数据库的位置，您可以设置 Dialogresult

在子窗体中：

```
try
{

//alter database

//set DialogResult
this.Dialogresult = DialogResult.OK;

}

catch(System.Exception)
{
//Error Message
this.Dialogresult = DialogResult.NO;
} 
```

在父窗体中：

```
ChildForm cf = new ChildForm();
cf.ShowDialog();

if(cf.DialogResult = DialogResult.OK)
{
    //SET DATASOURCE
} 
```

# antlr - “！未知版本！” 错误

> ID：13087475
> 
> 赞同：1
> 
> 时间：2012-10-26T13:04:31.310
> 
> 标签：antlr

我在 Python 中使用 ANTLR 语法。它曾经工作正常，但现在我在导入词法分析器时收到以下错误：

> ValueError：错误的版本字符串'！未知版本！'

我可以将其追溯到 antlr3 可执行文件：

> $ antlr3 -version
> ANTLR 解析器生成器版本！未知版本！

生成的解析器和词法分析器看起来很好，除了版本字符串。我正在使用 Ubuntu 存储库（12.04）提供的 antlr3。我想我可以手动安装 ANTLR，但我认为这应该是开箱即用的——也许我在某个地方配置错误？我是否缺少已知的技巧，或者这是一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T19:15:05.350

我一直在尝试做同样的事情，并得出结论认为`antlr3`Ubuntu 存储库中的当前包不能与 Python 运行时支持一起正常工作。另一个 Ubuntu 软件包`python-antlr`更加过时，因为它应该与 ANTLR 2 一起使用。我建议您`antlr3`手动卸载和安装 ANTLR，同时提供正确的 Python 运行时支持。

由于我自己刚刚经历过这个，发现说明有点分散，这里总结一下如何做。

1.  卸载antlr3包：

    ```
    sudo apt-get purge antlr3 
    ```

2.  获取最新 ANTLR 3.x 的完整 Java 二进制文件：

    ```
    wget http://www.antlr3.org/download/antlr-3.5.tar.gz 
    ```

3.  准备安装 Python 运行时：

    ```
    tar xzf antlr-3.5.tar.gz
    cd antlr3-antlr-3.5/runtime/Python 
    ```

4.  在调用安装脚本之前，您必须修补版本号以指向在线可用的内容。您可以通过编辑`ez_setup.py`并更改`DEFAULT_VERSION = "0.6c5"`为`DEFAULT_VERSION = "0.6c11"`.

5.  现在您应该可以使用以下命令安装 Python 运行时：

    ```
    sudo python setup.py install 
    ```

    要查看它是否有效，请尝试`import antlr3`使用 Python shell。你不应该得到任何错误。

6.  现在，您必须正确安装相应版本的 ANTLR，它是 Java 语言。为此，请确保您安装了 JVM（例如`sudo apt-get install default-jdk`）。

7.  获取最新的 ANTLR 3 jar：

    ```
    wget http://www.antlr3.org/download/antlr-3.5-complete.jar 
    ```

8.  将 jar 永久添加到您的类路径中（当然，您可以将其移动到您想要的位置并相应地调整路径）：

    ```
    echo 'export CLASSPATH=~/antlr-3.5-complete.jar:$CLASSPATH' >> ~/.bashrc 
    ```

9.  可选，但推荐：添加一个 shell 别名来调用 ANTLR 3：

    ```
    echo "alias antlr3='java -jar ~/antlr-3.5-complete.jar'" >> ~/.bashrc 
    ```

而已！重新阅读 .bashrc 后，看看是否一切都适用于`antlr3 -version`. 您应该收到一条消息，例如：

```
ANTLR Parser Generator  Version 3.5 
```

# php - 如何处理zend元数据缓存

> ID：13087477
> 
> 赞同：2
> 
> 时间：2012-10-26T13:04:37.303
> 
> 标签：php, zend-framework, zend-cache

我正在开发一个在 zend 框架中开发的项目。工作的开发人员已经使用`zend metadata cache`并使用了zend函数`info()`来获取表的元数据。

现在我`status`在表中插入了一个新字段。现在该表没有返回新字段。

创建缓存的代码如下

```
$frontendOptions = array(
        'automatic_serialization' => true,
        'lifetime' => 100000,
        'cache_id_prefix' => 'metaData_',
    );
    $backendOptions = array();
    $cache = Zend_Cache::factory(
        'Core', 
        'File',
        $frontendOptions,
        $backendOptions
    );
    Zend_Db_Table_Abstract::setDefaultMetadataCache($cache); 
```

我试图通过使用删除缓存

```
$cache = Zend_Cache::factory();
Zend_Db_Table_Abstract::setDefaultMetadataCache($cache);
$cache->clean(Zend_Cache::CLEANING_MODE_ALL); 
```

有人可以告诉我如何处理这个问题吗？

# javascript - OnClick - 防止用户多次提交

> ID：13087478
> 
> 赞同：0
> 
> 时间：2012-10-26T13:04:39.853
> 
> 标签：javascript, onsubmit

> **可能重复：**
> [如何防止客户端提交多个表单？](https://stackoverflow.com/questions/926816/how-to-prevent-multiple-form-submit-from-client-side)

我们有一个正在使用的项目管理工具，但是当用户在任务下提交日志时，他们会多次单击提交按钮。这增加了相同信息的几个条目。

我已经追踪了 PHP 文件中的代码，并且我在网上看到了许多关于提交点击的解决方案。在过去的四五个小时里，我一直在玩耍，但不幸的是，我无法得到任何工作。我希望有人可以提供一点帮助：

这是我在 PHP 文件中的代码：

```
<input type="submit"  class="button" value="<?php echo $AppUI->_('update task'); ?>" onclick="updateTask();" /> 
```

实际上，我只希望用户单击按钮，然后单击一下。它要么是灰色的，要么用户无法再点击。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T13:07:26.347

只需禁用`updateTask()`功能中的按钮：

```
document.getElementById("mysubmit").disabled = true; 
```

这假设您将 ID 添加到您的提交按钮。

如果是 AJAX 提交，请确保在提交失败时重新启用按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T13:06:45.380

为什么不简单地禁用 updateTask() 脚本中的按钮？

```
document.getElementByID("myButton").disabled='disabled' 
```

如果 updateTask 函数过于通用，那么您的按钮可以调用更具体的函数来处理该按钮：

```
function myButtonClicked() {
    document.getElementByID("myButton").disabled='disabled';
    updateTask();
} 
```

然后将您的按钮更改为调用 myButtonClicked 而不是 updateTask。

```
<input type="submit" ... onclick="myButtonClicked();" /> 
```

# coldfusion - 在代码中获取 CFAdmin 邮件服务器

> ID：13087486
> 
> 赞同：1
> 
> 时间：2012-10-26T13:05:15.740
> 
> 标签：coldfusion, mail-server, cfadmin

我在我的 CFAdmin 中指定了一个邮件服务器，我想在我的代码中获取它。有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T13:13:32.293

我不得不承认我从来不需要专门做你需要做的事情，但是 CF 有一个管理 API。详细信息在文档中的[管理员 API](http://help.adobe.com/en_US/ColdFusion/10.0/Admin/WSc3ff6d0ea77859461172e0811cbf364104-7fcf.html)页面上。

相关摘录：

> mail.cfc 管理 ColdFusion 邮件设置。

我想这就是你所追求的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T13:12:26.847

与数据源不同，邮件服务器是自动使用的——您不需要指定它们。

但是，您也可以直接将邮件服务器的各种属性作为[cfmail](http://cfdocs.org/cfmail)标记上的属性提供，然后仅针对该实例覆盖管理员中的属性。

*（如果这不是您要问的，您需要编辑您的问题以澄清和添加更多信息。）*

# asp.net - html表的列/行跨度

> ID：13087487
> 
> 赞同：-4
> 
> 时间：2012-10-26T13:05:16.820
> 
> 标签：asp.net, html

我想把我的控件放在附加的 html 结构中。谁能给我快速的代码？![桌子](../Images/2ba05e96509b3b5bfbae1bcd386d9f3e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:09:24.827

在您的图像中，表格中有 2 行 4 列。

1.  第一行有 3 个单元格，首先是 colspan 2，其他没有任何跨度
2.  第二行有 4 个单元格，没有任何跨度。

您可以使用此代码获取此表结构。

* * *

```
<table style="width:100%" border="1">
  <tr>
    <td colspan="2">&nbsp;</td>
    <td>&nsp;</td>
    <td>&nsp;</td>
  </tr>
  <tr>
    <td>&nsp;</td>
    <td>&nsp;</td>
    <td>&nsp;</td>
    <td>&nsp;</td>
  </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:09:52.337

```
<table border="1">
<tr>
    <td colspan="2"> column 1 </td>
    <td> column 2 </td>
    <td> column 3 </td>
</tr>
<tr>
    <td> column 1 </td>
    <td> column 2 </td>
    <td> column 3 </td>
    <td> column 4 </td>
</tr>
</table> 
```

# bash - 对变量中的每个参数重复命令

> ID：13087488
> 
> 赞同：3
> 
> 时间：2012-10-26T13:05:18.787
> 
> 标签：bash, shell, backup

```
#!/bin/sh
dblist=mail ftp www
for arg in $dblist; do
mysqldump -u dumper --password=$dbpass --socket $socket --database $dblist >> /tmp/backup/$dblist.sql
done 
```

来自变量 dblist 的每个数据库都应该编写一个新的 mysqldump 行并将数据库名称添加到相应的字段中，如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:08:41.347

使用变量`arg`（即您的数据库名称）为每个数据库创建一个单独的 sql 转储文件，如下所示：

```
#!/bin/sh
declare -a dblist=(mail ftp www)
for arg in "${dblist[@]}"
do
   mysqldump -u dumper --password=$dbpass --socket $socket --database $arg >> /tmp/backup/$arg.sql
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:08:15.967

为什么不声明`dblist`为数组？

```
dblist=(mail ftp www)
for arg in ${dblist}; do
   mysqldump .... $arg 
```

并在您的调用中使用该`$arg`变量。

这是一个[bash 数组教程](http://www.thegeekstuff.com/2010/06/bash-array-tutorial/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:36:46.290

```
dblist=(mail ftp)

for arg in ${dblist[*]}
do
   mysqldump -u $dbuser --password=$dbpass --socket $socket --database $arg >> /tmp/backup/$arg.sql
done 
```

有效，谢谢！

# php - 签名查询字符串以进行身份 验证

> ID：13087489
> 
> 赞同：2
> 
> 时间：2012-10-26T13:05:28.350
> 
> 标签：php, api, rest, authentication

我们在使 REST Api 的身份验证变得健壮时遇到了麻烦。

我们正在使用 api 密钥、时间戳等以及请求正文或 url 查询字符串生成我们的签名哈希。正文中发送的所有内容都必须始终是 JSON，所以没问题。但是对查询字符串进行签名让我们很头疼。

> 所有 REST 查询都必须通过使用私有凭证作为签名令牌以小写字母顺序对查询参数进行签名来进行身份验证。签名应该发生在 URL 编码查询字符串之前。

但是现在用 key[0]=somevalue&key[1]=someothervalue 怎么办？如何订购？另一种方法是始终在查询字符串中强制使用 JSON，这是一个可行的解决方案吗？

someurl?{"somekey":"somevalue"}

*编辑*

让我们走到这一步的问题如下：我（客户端）使用 ?a=value1&b=value2 发送请求，并使用此查询字符串创建散列。但是我们的请求失败了，因为服务器（Apache、PHP）有时会收到 ?b=value2&a=value1。散列会给出不同的结果，因此身份验证失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:30:50.030

不确定我是否正确遵循，所以你有一个包含名为的参数的数组`$key`？这需要按字母顺序排列吗？

我会做以下事情

```
sort($key);
$queryStr = '';
for($k = 0; $k < count($key); $k++)
{
      $queryStr .= 'key['.$k.']='.strtolower($key[$k]);
      if($k < count($key)-1)
             $queryStr .= '&';
}

$restURL = 'someurl?'.$queryStr; 
```

# css - Dreamweaver CSS - 文本不会换行

> ID：13087490
> 
> 赞同：2
> 
> 时间：2012-10-26T13:05:35.427
> 
> 标签：css, html, tags, dreamweaver, word-wrap

我正在尝试制作一个简单的网页，但我无法让页面包裹在正文部分、滚动条或没有。页面上的文字不断进入无穷大。CSS表如下：

```
@charset "utf-8";

*{
background-color:#CCC;
margin:0;
padding:0;
}

body {
    font-family: Verdana, Geneva, sans-serif;
    font-size: 15px;
    font-style: normal;
    color: #609;
    text-align:left;
}

#container
 {
    margin-left:auto;
    margin-right:auto;
    background-color: #CCC;
    height: 768px;
    width: 1366px;
    border: thin solid #FFF;
}

#header 
{
    height: 50px;
    width: 1214px;
    border-bottom-width: thin;
    border-bottom-style: solid;
    border-bottom-color: #FFF;
    clear: right;
    float: right;
    border-right-width: thin;
    border-right-style: solid;
    border-right-color: #FFF;
}

#sitelogo 
{
    float: left;
    height: 101px;
    width: 150px;
    border-bottom-width: thin;
    border-bottom-style: solid;
    border-right-color: #FFF;
    border-bottom-color: #FFF;
    border-left-color: #FFF;
    border-right-width: thin;
    border-right-style: solid;
    border-top-color: #FFF;
}

#lrftnavbar 
{
    clear:both ;
    float: left;
    height: 616px;
    width: 150px;
    border-right-width: thin;
    border-right-style: solid;
    border-right-color: #FFF;
}

#navbar
 {
    float: right;
    height: 50px;
    width: 1214px;
    border-bottom-width: thin;
    border-bottom-style: solid;
    border-bottom-color: #FFF;
    border-right-width: thin;
    border-right-style: solid;
    border-right-color: #FFF;
}

#footer
 {
    clear: both;
    float: left;
    height: 50px;
    width: 1353px;
    border-top-width: thin;
    border-top-style: solid;
    border-top-color: #FFF;
}

#body 
{
    background-color: #CCC;
    height: 610px;
    width: 1180px;
    white-space: nowrap;
    overflow: scroll;
    float: left;
    clear: none;
    padding: 15px; 
    margin:auto;
}

.new 
{
    font-size: 9px;
    font-style: italic;
    color: #630;
    background-color: #0FF;

}

#utube 
{
    background-color: #CCC;
    float: left;
    height: 240px;
    width: 320px;
    border: thin solid #FFF;
    margin-top: 0px;
    margin-right: 15px;
    margin-bottom: 15px;
    margin-left: 0px;
} 
```

尽管有容器，但我放入 HTML #body div 的内容仍然存在，并且不会进入下一行。此外，文本位于我拥有的 youtube div 的顶部，在它和它上方的顶部导航栏（navbar）的边界之间。有没有正确的方法来分隔它？在那里放置一个边距只会将 youtube div 进一步向下移动。任何帮助表示赞赏，请随时要求进一步澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:16:35.753

尝试`white-space: nowrap;`从`#body`.

您可以在此处阅读有关该`white-space`属性的更多信息：http: [//www.w3schools.com/cssref/pr_text_white-space.asp](http://www.w3schools.com/cssref/pr_text_white-space.asp)

# c# - 我如何获得构建/重建实时输出

> ID：13087499
> 
> 赞同：3
> 
> 时间：2012-10-26T13:06:15.470
> 
> 标签：c#, visual-studio, vspackage, processstartinfo

我正在制作 Visual Studio 包，我在其中启动 devenv.exe 并尝试构建其他解决方案。我需要实时构建输出，以便用户可以看到构建进度（输出），但我不知道该怎么做如果可能的话。

我试过这样的方式：

```
 string rebuildLog = string.Empty;
            string logFileName = System.IO.Path.GetTempFileName();

            System.Diagnostics.ProcessStartInfo psi = new System.Diagnostics.ProcessStartInfo();
            psi.FileName = @"devenv.exe";
            psi.Arguments = "\"" + config.DmsPath + "\"" + @" /rebuild" + " Release|x64 " +" /out " + logFileName;

            System.Diagnostics.Process process = new System.Diagnostics.Process();
            process.StartInfo = psi;
            process.StartInfo.RedirectStandardOutput = true;
            process.StartInfo.UseShellExecute = false;

            process.Start();

            while (!process.StandardOutput.EndOfStream)
            {
                string line = process.StandardOutput.ReadLine();
                MessageBox.Show(line); // just to see if it works. It should go to log form
            }

            rebuildLog = GetRebuildLog(logFileName); 
```

并且rebuildLog 有输出。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T14:00:04.810

我找到了答案。devenv.exe 不写简单的控制台输出，所以我不得不改变

psi.FileName = @"devenv.exe"; 到 psi.FileName = @"devenv.com **"** ; 它奏效了。

# php - Apache FTP 路径

> ID：13087500
> 
> 赞同：0
> 
> 时间：2012-10-26T13:06:19.863
> 
> 标签：php, apache

我刚刚使用 Webmin 和 Kloxo 设置了我的 VPS。Kloxo 刚刚为我创建了一个 FTP 帐户：/home/admin/public_html

当我尝试访问我的 ftp 帐户时，它只能访问特定的 public_html 目录，这是实际问题。我希望能够通过 public_html 访问 1 个目录，所以：/home/admin/

这是因为我想将我的包含文件放在 public_html 之外，所以人们将无法访问它。

这是个好主意吗？如果是，我怎样才能创建我的 FTP 帐户，以便它可以通过 public_html 进入 1 个目录？我想我应该对 Apache 做点什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:10:25.740

ftp 与 apache 无关。apache只响应http请求...

我不知道这些工具，但 ftp 帐户是 chrooted（更改根目录）。您可以使用您的工具完全禁用 ftp 的 chroot 监狱，或者设置自定义 chroot 路径。

# asp.net - Image.GenerateEmptyAlternateText 与仅在 asp.net webforms 中设置 Image.AlternateText = "" 之间有区别吗

> ID：13087506
> 
> 赞同：1
> 
> 时间：2012-10-26T13:06:46.187
> 
> 标签：asp.net, webforms

标题说明了一切，真的。

我`Image.GenerateEmptyAlternateText`在 ASP.NET`Image`控件上找到了该属性，现在我想知道设置 `<asp:Image GenerateEmptyAlternateText="True" />`和是否有任何区别`<asp:Image AlternateText="" />`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:28:28.980

事实证明，设置 AlternateText="" 无法设置空的 alt 文本，如果设置为空字符串，则在呈现图像 HTML 时将被忽略。要获得 alt=""，必须使用 GenerateEmptyAlternateText 属性。

请参阅下面的“ [Visual Studio 2010 和 ASP.NET 4 中的辅助功能](http://blogs.msdn.com/b/aspnetue/archive/2009/07/31/accessibility-in-visual-studio-2010-and-asp-net-4.aspx)”

> 如果您只是将空字符串分配给 AlternateText 属性，则呈现图像的 ASP.NET 控件会忽略呈现的 HTML 中的 alt 属性。例如，假设您将以下 ASP.NET Image 控件添加到页面：
> 
> ```
> <asp:Image ImageUrl="PageDivider.gif" AlternateText="" Runat="Server" /> 
> ```
> 
> 在这种情况下，将呈现以下 HTML：
> 
> ```
> <img src="PageDivider.gif" /> 
> ```
> 
> 请注意，alt 属性已消失。这是所有 ASP.NET 控件属性的默认行为。当您不为属性分配值时，它不会被呈现。不幸的是，在这种情况下，我们真的想渲染一个空字符串作为 alt 属性值。
> 
> 为了确保为 ASP.NET Image 控件呈现的 HTML 包含 alt=""，您必须将 GenerateEmptyAlternateText 属性设置为 true。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T13:13:50.373

来自[MSDN 的 ImageButton.GenerateEmptyAlternateText 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagebutton.generateemptyalternatetext.aspx)：

> 获取或设置一个值，该值指示控件是否为空字符串值生成替代文本属性。
> 
> 默认情况下，`ImageButton`控件使用 alt 属性呈现`AlternateText`属性。`AlternateText`未设置该属性时，`ImageButton`控件不包含用于在控件呈现中指定替代文本的 alt 属性。
> 
> XHTML 文档类型定义需要图像控件的 alt 属性。但是，可访问性最佳实践建议不传达与网页上下文相关的信息的图像控件不应指定 alt 属性。`AlternateText`您可以通过将属性设置为 来满足 XHTML 和可访问性要求`true`。

# windows-mobile-6.5 - 我想在 Windows 移动应用程序中向自定义域电子邮件提供商发送邮件

> ID：13087507
> 
> 赞同：0
> 
> 时间：2012-10-26T13:06:46.447
> 
> 标签：windows-mobile-6.5

我想从我的 Windows 移动应用程序发送邮件。我在 windows mobile emulator 6.5.3 上配置了新的邮件帐户。使用自定义域电子邮件提供商，现在我可以使用该设备发送和接收邮件，并且我想在单击按钮时从我的代码发送邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:46:50.470

此处提供了通过代码发送邮件的代码：[在 Windows 中的 Windows 移动应用程序中发送邮件](https://stackoverflow.com/questions/13048272/sending-mail-in-windows-mobile-application-in-windows/13088783#13088783)

如果您需要更多帮助，请提供更多详细信息。

编辑：为了更清楚：

首先，您必须创建一个 Outlook 会话并指定要使用的帐户：

```
public sendMail(string sMailAccount)
{
    session = new OutlookSession();
    //eMail = new EmailMessage();
    bool bFound = false;
    foreach (Account acc in session.EmailAccounts)
    {
        System.Diagnostics.Debug.WriteLine(acc.Name);
        if (acc.Name == sMailAccount)
            bFound = true;
    }
    if (bFound)
        account = session.EmailAccounts[sMailAccount];
    if (account != null)
    ... 
```

以上启动了一个seesion，并使用提供的字符串 sMailsAccount 来查找现有的已定义邮件帐户。该字符串必须与您已经在袖珍 Outlook 中创建的任何邮件帐户匹配。

然后，当您要发送电子邮件时，使用现有会话：

```
public bool send(string sImagePath)
{
    if (account == null)
        return false;
    try
    {
        eMail = new EmailMessage();
        rcp = new Recipient(_to);
        eMail.To.Add(rcp);
        eMail.Subject = "Visitenkarten";
        eMail.BodyText = "VCard " + DateTime.Now.ToShortDateString() + " " + DateTime.Now.ToShortTimeString() + "\r\nsent from eMDI2Mail";

        attachement = new Attachment(sImagePath);
        eMail.Attachments.Add(attachement);                
        eMail.Send(account);                
        //account.Send(eMail);
        if (this._syncImmediately)
        {
            if (this.account != null)
                Microsoft.WindowsMobile.PocketOutlook.MessagingApplication.Synchronize(this.account);
        }
        return true;
    }
    ... 
```

上面的代码创建一个新的电子邮件，附加一个文件并立即发送电子邮件，或者让 Outlook 决定，我们发送（以指定的时间间隔）。如果使用同步功能，电子邮件会立即发送。

让它更清楚？

# django - Django Q 链式查询

> ID：13087511
> 
> 赞同：1
> 
> 时间：2012-10-26T13:06:57.053
> 
> 标签：django, chain, django-q

我需要一个 Django Q 查询的帮助，我试图将它串在一起，它看起来不错，但它不是很有效。查询是

```
( Q(src__lte=4) & Q(src__startswith='2') ) | 
( Q(src__gt=4) & ~Q(src__istartswith='713') & ~Q(src__istartswith='281') ) ) 
```

我试图完成的是“选择 src 小于 4 且 startsiwth 2 或 src 大于 4 且不以 713 或 281 开头”

结果显示以 713 和 281 开头的 src，我在这里做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:54:23.883

看来你是混合类型。src 是整数还是字符串？保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:18:00.623

你试过用'and'代替'&'吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:50:38.377

你忘了放括号，

```
-->> ( <<-- (Q(src__lte=4) & Q(src__startswith='2')) | (Q(src__gt=4) & ~Q(src__istartswith='713') & ~Q(src__istartswith='281'))) 
```

要么你必须删除最后一个。

或者你没有粘贴整行..

你可能想试试这个：

```
(Q(src__gt=4) & !(Q(src__startswith=u'713') | Q(src__startswith=u'281')) 
```

您的“src”是什么类型的数据？整数还是字符串？

# sql - 查询从字段中删除值

> ID：13087515
> 
> 赞同：0
> 
> 时间：2012-10-26T13:07:08.110
> 
> 标签：sql, tsql

我有一个查询，查看关税和增值税信息并根据返回值进行计算。

告诉我税率的列在表格中，格式为，例如两个基数中的 3.7% 或 8%，我需要从返回值中删除 %。否则我的 SUM 子句失败。

我已经对 3.7% 示例的问题进行了以下排序：

```
CASE WHEN CustomsTariff.CommodityCode.StandardDuty = 'Free' THEN '0.0' ELSE SUBSTRING(CustomsTariff.CommodityCode.StandardDuty, 1, 3) END AS DutyRate, 
```

这会降低任何有小数位的退货的 %，但我需要在 CASE 中添加说明，如果 StandardDuty 值没有小数位，那么也会丢弃 % 字符，而不会弄乱第一个查看第 3 位数字的语句。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:11:15.120

你试过一个`replace()`角色`%`吗？[代替](http://msdn.microsoft.com/en-us/library/ms186862.aspx)

```
CASE WHEN CustomsTariff.CommodityCode.StandardDuty = 'Free'
     THEN '0.0' ELSE REPLACE(CustomsTariff.CommodityCode.StandardDuty, N'%', N'')
END AS DutyRate, 
```

# flash - Flash Player 在站点根 URL 中查找跨域并挂起

> ID：13087516
> 
> 赞同：1
> 
> 时间：2012-10-26T13:07:11.640
> 
> 标签：flash, crossdomain.xml, cross-domain-policy

我的闪存`site.com`和其他站点上的资源（图像）只有 IP 地址（假设`1.1.1.1`）。

我有 itemrenderers `s:Image sorce="{FullPathTo1.1.1.1/imageName}"`。

在`http://1.1.1.1/crossdomain.xml`我们有：

```
<cross-domain-policy>
  <site-control permitted-cross-domain-policies="master-only"/>
  <allow-access-from domain="site.com"/>
  <allow-access-from domain="*.site.com"/>
</cross-domain-policy> 
```

当 FlashPlayer 将图像加载到 itemrenderers 时 - 它出于未知原因不仅请求`http://1.1.1.1/crossdomain.xml`，而且请求`http://1.1.1.1/`（根站点）。1.1.1.1 根目录中没有默认答案 - 它完全是空白页面。但是，在那之后，flash 会抛出未捕获的 ioError（不是 s:Images，而是一些系统类）。

我试图解决的问题：

1.  如果我隐藏`s:Image`在项目渲染器中 - 现在错误。因此，正是这种图像加载会产生错误。
2.  如果我在代理中替换`http://1.1.1.1/`root 答案`http://1.1.1.1/crossdomain.xml`- Flash 播放器可以正常工作，没有任何错误。

因此，由于某些愚蠢的原因，它`crossdomain.xml`在根 URL 中查找，但不是`http://1.1.1.1/crossdomain.xml`

有人知道原因以及如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:08:54.397

我发现了问题：我用过`Image.contentLoader = ContentCache`

这个愚蠢的 ContentCache 在跨域策略上存在错误。所以我使用了其他缓存机制，我在同一个项目中使用它来加载 SFW。

# c# - RDLC 报告仅在页面加载时加载，而不是按钮单击事件

> ID：13087522
> 
> 赞同：1
> 
> 时间：2012-10-26T13:07:30.283
> 
> 标签：c#, asp.net, rdlc, dynamic-rdlc-generation

我是 asp.net 编程的新手，我想在单击按钮时在 reportviewer 中加载 rdlc 报告。问题是如果我在页面加载时调用 LoadReport 函数，报告会正确加载，但是当我在按钮单击时加载报告时会出现问题.它没有显示错误。我已经创建了DataSet1.xsd并将其附加到rdlc报告中，在另一个aspx页面中我填充了DataSet1.xsd并附加到ReportDataSource（）。它显示了数字列以及数据并且它被绑定报告没有错误，但每当我看到 aspx 页面时，它总是空白。请提供解决方案，因为它是我的优先任务。这是我的代码；

```
 private void LoadReport()
    {
GetData();

            ReportViewer1.LocalReport.ReportPath = Server.MapPath("Reports/Report2.rdlc");
            ReportViewer1.ProcessingMode = ProcessingMode.Local;

            ReportDataSource rds = new ReportDataSource();
            rds.Name = "DataSet1";
            rds.Value = ds.DataTable1;          
            ReportViewer1.LocalReport.DataSources.Clear();
            ReportViewer1.LocalReport.DataSources.Add(rds);
            ReportViewer1.DataBind();
            LocalizeReport(ReportViewer1.LocalReport);

            ReportViewer1.LocalReport.Refresh();
            ReportViewer1.Visible = true;
}

 private void GetData()
    {

            DataSet1.DataTable1Row dr = ds.DataTable1.NewDataTable1Row();

            dr[0] = "abc";
            dr[1] = "49/Male";
            dr[2] = "21656";
            dr[3] = " ";
            dr[4] = " ";
            dr[5] = " ";
            dr[6] = " ";
            dr[7] = " ";
            dr[8] = " ";
            dr[9] = " ";
            dr[10] = "abc";
            dr[11] = "ccvc";
            dr[12] = "abc";
            dr[13] = " ";
            dr[14] = " ";
            dr[15] = "abc ";
            dr[16] = " ";            
            ds.DataTable1.AcceptChanges();

            ds.DataTable1.AddDataTable1Row(dr);

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T08:54:42.107

使用触发器......

```
enter code here <asp:UpdatePanel ID="Report_UP" runat="server">
    <ContentTemplate>
    </ContentTemplate>
     <Triggers> 
         <asp:PostBackTrigger ControlID="SubmitButton"/>        
     </Triggers>         
</asp:UpdatePanel> 
```

它对我有用，希望它对你有用....

# asp.net-mvc - 仅在 MVC4 BundleConfig 中的缩小脚本

> ID：13087527
> 
> 赞同：9
> 
> 时间：2012-10-26T13:08:00.487
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, bundle, asp.net-optimization

我在 BundleConfig 中添加以下 ScriptBundle：

```
 bundles.Add(new ScriptBundle("~/bundles/javascript").Include(
        "~/Scripts/jquery-1.*",
        "~/Scripts/load-image.min.js",
        "~/Scripts/bootstrap.*",
        "~/Scripts/bootstrap-image-gallery.*",
        "~/Scripts/my.global.js")); 
```

这在我的 _Layout.cshtml 末尾被引用为：

```
@Scripts.Render("~/bundles/javascript") 
```

调试时，我注意到此脚本渲染的输出是：

```
<script src="/Scripts/jquery-1.8.2.js"></script>
<script src="/Scripts/bootstrap.js"></script>
<script src="/Scripts/bootstrap-image-gallery.js"></script>
<script src="/Scripts/my.global.js"></script> 
```

注意到 load-image.min.js 脚本丢失了吗？无论我是否在调试，我想要的是使用相同的缩小脚本。在发布条件下，脚本包含在捆绑的 JS 文件中。

我假设它看到了“最小”，寻找一个未缩小的版本，没有找到一个，然后决定什么是最好的就是完全忽略它。杰出的。如果我复制 load-image.min.js，将其命名为 load-image.js，然后在 BundleConfig 中将其引用为“load-image.*”，我发现它包含在两种配置中，但必须这样做有什么意义去做？

我想我在这里遗漏了一些东西。我没有未缩小的版本，坦率地说我不在乎。它由我的 Bootstrap 图片库插件使用，仅此而已。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T13:54:29.047

有`ignoreList`，如果需要，您可以清除它，它看起来像：

```
public static void AddDefaultIgnorePatterns(IgnoreList ignoreList)
{
    if (ignoreList != null)
    {
        ignoreList.Ignore("*.intellisense.js");
        ignoreList.Ignore("*-vsdoc.js");
        ignoreList.Ignore("*.debug.js", OptimizationMode.WhenEnabled);
        ignoreList.Ignore("*.min.js", OptimizationMode.WhenDisabled);
        ignoreList.Ignore("*.min.css", OptimizationMode.WhenDisabled);
        return;
    }
    else
    {
        throw new ArgumentNullException("ignoreList");
    }
} 
```

更多详细信息：[ASP.NET 捆绑和缩小的高级选项](http://weblogs.asp.net/imranbaloch/archive/2012/09/30/hidden-options-of-asp-net-bundling-and-minification.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T21:22:16.500

此行为已在 1.1.0-alpha1 版本中得到改进（修复）。我们将所有旧的默认忽略列表条目移动到一个新的 DirectoryFilter 忽略列表中，该列表仅在包含 *.js 之类的搜索模式时使用，这是此功能的原始意图。因此，当您明确包含单个文件时，这应该不再是问题。

注意：这可能仍然是一个问题的一个地方是，如果您尝试包含类似 jquery-{version}.min.js 的内容。

# php - PHP MySQL 查询输出

> ID：13087528
> 
> 赞同：-1
> 
> 时间：2012-10-26T13:08:00.287
> 
> 标签：php, mysql

我正在尝试进行查询，我可以在其中查看用户名和密码是否可以匹配。如果匹配，那么我将转到管理员页面。我遇到的问题是我认为查询没有给我正确的结果。数据库表名为 admin，它有 adminname 和 passadmin。我在数据库中输入 IS 的用户。密码已加密。

```
<?php

    $f_user = $_POST['f_user'];
    $f_pass = $_POST['f_pass'];

    $status = authenticate($f_user, $f_pass);

    if ($status == 1)
    {
        include("../connections/config.php");

        session_start();
        //session_register("SESSION_UNAME");
        $_SESSION['SESSION_UNAME'] = $f_user;
        $SESSION_UNAME = $f_user;
        header("Location: unoadmin.php");
        exit();
    }
    else
    {
        $mensa= "Informaci&oacute;n Incorrecta...Int&eacute;ntelo de Nuevo";
        header("Location: register.php?mensa=$mensa");
        exit();
    }

    function authenticate($user, $pass)
    {
        include("../connections/config.php");

        $connection = mysql_connect($mach,$userna,$paso) or die ("Unable to connect!");
        $query = "SELECT * from admin WHERE adminame = '$f_user'";
        mysql_select_db($db);
        $result = mysql_query($query, $connection) or die ("Error in query: $query. " . mysql_error());
        $num_results = mysql_num_rows($result);

        if ($num_results == 1)
        {
            for($i=0; $i < $num_results; $i++)
            {
                $row = mysql_fetch_array($result);
                $pas = $row["passadmin"];
            }
            if(crypt($pass,$pas) == $pas)
            {
                return 1;
            }
            else
            {
                return 0;
            }
        }
        else
        {
            return 0;
        }
    }
?> 
```

有人可以告诉我错误是什么吗？它引导我进入“Informacióncorrecta. Intentelo de nuevo”或英文“错误信息。再试一次”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:19:27.230

这有点猜测，但您的`authenticate`函数返回 false （错误消息）

我不确定包含中会发生什么，它建议包含数据库设置。

您正在为用户名使用 2 个不同的变量：是：

```
function authenticate($user, $pass) // <-- you pass $user
{
   include("../connections/config.php");

   $connection = mysql_connect($mach,$userna,$paso) or die ("Unable to connect!");
   $query = 
    "SELECT * from admin WHERE adminame = '$f_user'"; // <-- you use $f_user 
```

也许不是一个真正的答案，但它渴望发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:26:25.300

这个问题的一个简单解决方案是将您的用户名和密码放入变量中并将其与数据库匹配，如果结果大于 1 值，它将转到管理页面。例如

```
 $myusername=addslashes($_POST['username']); 
            $mypassword=addslashes($_POST['password']); 

            $sql="SELECT * FROM admin WHERE username='$myusername' and password=md5('$mypassword')";
$query = mysql_query($sql);
$row = mysql_num_rows($query);
if($row>0) {
  header("location:administrator.php");
}
else {
 echo"Please check username and password";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:16:31.950

从您的代码中，您可以：

*   您提供的用户名在您的数据库中没有此类条目
*   密码错误

此外，您应该检查您的代码是否有[SQL 注入！](http://en.wikipedia.org/wiki/SQL_injection)

请花时间阅读下面的文章，

*   [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# java - Java中的显式成员方法引用

> ID：13087531
> 
> 赞同：0
> 
> 时间：2012-10-26T13:08:11.603
> 
> 标签：java, coding-style, code-readability

基于以下示例：

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingConstants;

public class ExempleJFrame extends JFrame {

    public ExempleJFrame() {
        super("JFrame example");
        setLocation(50, 50);
        setSize(200, 200);
        getContentPane().add(new JLabel("This is a text label!", SwingConstants.CENTER));
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        ExempleJFrame frame = new ExempleJFrame();
        frame.setVisible(true);
    }

} 
```

有没有办法让我调用成员方法更明确（请参阅`setLocation()`和`setSize()`）？

我正在寻找一些东西`this.setLocation()`来明确我调用一个成员方法而不是来自外太空的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:25:48.823

如果您使用的是 Eclipse，您可以设置保存操作（附加保存操作 -> 成员访问 -> 使用 'this' qualifier for method accesss'），它将自动转换`setLocation`为`this.setlocation`保存。

我个人觉得它不是特别有用，因为无前缀的方法调用只能是

*   静态方法调用（在 Eclipse 中为斜体）
*   一个 this 成员调用
*   超级会员通话

由于运行时调度，最后两个很少需要区分恕我直言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:15:49.673

好的做法是[支持组合而不是继承](https://stackoverflow.com/questions/1143923/why-shouldnt-you-extend-jframe-and-other-components)：不要扩展`JFrame`，而是删除`JFrame yourFrame;`类中的成员。然后你自然地调用 JFrame 方法：

```
yourFrame.someMethod(); 
```

[ps：并从 EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)调用您的 GUI 方法：

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            yourFrame = new JFrame("JFrame example");
            initFrame();
            yourFrame.setVisible(true);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:15:34.817

正如评论中的其他人所说，您可以使用`this.setwatever()`。通常它被认为是一种使用的好习惯，`this.membervariable`但从未真正使用 this.method() 遇到过代码。但它工作得非常好。

# java - 如何以编程方式隐藏或禁止搜索建议列表？

> ID：13087534
> 
> 赞同：3
> 
> 时间：2012-10-26T13:08:18.463
> 
> 标签：java, android, android-searchmanager

如何以编程方式隐藏在 ? 下方弹出的建议列表`SearchView`？

有时我希望`SearchView`不要被 inconified 并且没有焦点。我可以分别使用`setIconified(false)`和`clearFocus()`方法来做到这一点，但如果其中`SearchView`有任何文本，它将显示搜索建议列表，我需要隐藏/禁止它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-16T18:15:12.220

`searchView.setSuggestionsAdapter(null);`为我做了那个把戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:16:26.970

尝试为`OnQueryTextListener`您的搜索视图设置一个，并`true`在`onQueryTextChange`您不希望显示任何建议时返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-12T07:04:53.240

如果您在`SearchView.OnQueryTextListener`上设置了 ，则可以在`SearchView`中返回。`false``onQueryTextSubmit`

这将确保在用户提交搜索查询时（通过单击建议或键盘上的“搜索”按钮）关闭/隐藏建议。

# c# - 如何在 C# 中将字符添加到字符串的开头和结尾？

> ID：13087536
> 
> 赞同：0
> 
> 时间：2012-10-26T13:08:27.897
> 
> 标签：c#, string, char, add

我有一个`string`，可以说是`myStr = "My name is user something something";`

我想将此字符串更改为：

```
'My name is user something something' 
```

我想将字符串从：

**我的名字是用户某事某事**

至：

**'我的名字是用户某事'**

我尝试了几种方法，但都没有奏效，看起来很简单，但我错过了一些东西。您能否制作一个代码块，将`"'"`字符添加到字符串的开头和结尾。谢谢你。

编辑：我的代码；

```
 StringBuilder sb = new StringBuilder();

         gecici = gecici + "'";//I think this adds to the ending
         sb.Append(gecici);
         sb.Insert(0, "'");// this to the beginning
         gecici = sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T13:10:31.517

您可以使用[`string.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)方法：

```
myStr = "My name is user something something";
var newStr = string.Format("'{0}'", myStr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T13:10:06.463

一种方法是

```
 myStr = "'" + "My name is user something something" + "'"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:10:17.083

您希望将值包含在单引号中作为值的一部分吗？只需像这样添加它们：

```
string myStr = "'My name is user something something'"; 
```

如果您实际上是以变量的形式获取字符串并想要更改它，那么请执行以下操作：

```
myStr = "'" + myStr + "'"; 
```

# spotify - 通过浏览器扩展控制 Spotify 播放按钮

> ID：13087544
> 
> 赞同：1
> 
> 时间：2012-10-26T13:08:53.670
> 
> 标签：spotify, browser-extension

我可以使用浏览器扩展程序控制（播放和暂停）Spotify 播放按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:42:56.350

播放按钮位于 iframe 内。如果浏览器扩展可以获取 iframe 中的内容，那么我猜是这样。

这个问题很笼统——你为什么不试试看呢？

# java - 从 Jackson 的 ObjectNode 创建一个继承的自定义类

> ID：13087546
> 
> 赞同：0
> 
> 时间：2012-10-26T13:09:02.080
> 
> 标签：java, json, jackson

我想扩展 ObjectNode 以便我可以有几个辅助方法来从 JSON 中获取几个特定字段。例如

```
public class MyNode extends ObjectNode {
  public void Long getTimestamp() {
    return this.get(HEADER).get(TIMESTAMP).asLong();
  }
} 
```

但我遇到的问题是 ObjectMapper().readTree("<...my JSON here...>") 返回一个 JsonNode 对象，我显然无法将其转换为 MyNode。

并且没有使用另一个 JsonNode 的 ObjectNode 构造函数。将 JSON 的字符串表示形式转换为 MyNode 对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:00:53.600

您需要创建自定义`JsonNodeFactory`（并使用 注册`ObjectMapper`），这应该允许您提供自定义实现——它们必须是子类；但您只需要创建自己的实例，然后反序列化器就可以填充它们。因此，您不需要使用复制构造函数或转换。相反，工厂被调用来创建新的空实例。

# jquery - 由于 URL 参数更改内容（向 Adwords 访问者显示不同的电话号码）

> ID：13087551
> 
> 赞同：2
> 
> 时间：2012-10-26T13:09:18.197
> 
> 标签：jquery, url, parameters, google-ads-api

我想更改显示在我的一个网站上的电话号码，具体取决于访问者是来自谷歌广告词还是通过自然方式。

我发现我应该使用 jquery 来查找 adwords 使用的 gclid url 参数。

为简单起见，我们会说我的自然推荐和普通推荐的电话号码是 123456789，而我的 adwords 访问者的电话号码是 987654321。

这样，如果我接到 123456789 的电话，我就知道这是一个自然的点击，而 987654321 将来自 adwords，帮助我们证明我们的投资回报率。

我对代码有非常基本的理解，所以到目前为止我发现的大部分代码我都明白了要点，但其中很多都在我的脑海中。

我是否认为我必须将一些信息写入 cookie 才能在登录页面后访问的页面上显示一致的电话号码？因为 gclid 将不再存在。

我找到的代码在这里：[How to show content based on url parameter via JavaScript?](https://stackoverflow.com/questions/8431425/solvedhow-to-show-content-based-on-url-parameter-via-javascript) 不过，我正在努力查看如何根据我的要求对其进行编辑。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:25:24.177

在第一个视图中搜索是否存在 URL 字符串，并设置 cookie

```
if (document.location.search.match(/gclid/).length > 0) {
    document.cookie = "mycookie=true; path=/";
} 
```

在后续页面浏览中读取 cookie

```
function getCookie(name) {
    var nameEQ = name + '=';
    var ca = document.cookie.split(';');

    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1, c.length);
        }

        if (c.indexOf(nameEQ) == 0) {
            return unescape(c.substring(nameEQ.length, c.length));
        }
    }

    return "";
}

var value = getCookie('mycookie'); 
if (value != '') { 
  // this user has the cookie, which means they came from gclid
} else { 
  // this user lacks the cookie, which means they came from somewhere else
} 
```

# r - R中的热图如何调整列标签的大小？

> ID：13087555
> 
> 赞同：1
> 
> 时间：2012-10-26T13:09:34.590
> 
> 标签：r, heatmap

我有一个大约 4000 行和 100 列的 data.matrix。我正在做一个数据的热图，例如：

```
data<-heatmap(data_matrix,Rowv=NA,Colv=NA,col=cm.colors(256),scale="column",margins=c(5,10)) 
```

但我遇到的问题是列中出现的标签过于分组，因此无法正确可视化它们。如何调整热图的大小以便查看列标签的值？我试图以pdf格式打印它，但它只出现一条黑色条纹。谢谢

我包括了一张热图，我想看到的部分是右侧的标签，但它们靠得太近了。 ![在此处输入图像描述](../Images/79e99d7a9207830a8e81eb1eb34bb8f9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T23:52:17.877

首先，最好将输出直接放入 PDF 文件 - 您可以使用其他图像格式，但 PDF 是最好的，因为它是矢量输出，您可以随意缩放：

```
pdf("Your-file.pdf", paper="a4", width=8, height=8) 
```

那么最好使用`pheatmap`（=漂亮的热图）包。除了热图之外，它还可以使用颜色键制作更好的热图。最后，尽管该`pheatmap()`函数会在您有很多行时尝试减小标签大小，但是对于非常多的行它会失败。因此，我将下面的代码用于非常高但不太高的行数：

```
library(pheatmap)   
library(gplots)
if (nrow(table) > 100) stop("Too many rows for heatmap, who can read?!")
fontsize_row = 10 - nrow(table) / 15
pheatmap(table, col=greenred(256), main="My Heatmap", cluster_cols=F, 
         fontsize_row=fontsize_row, border_color=NA) 
```

您可以更改`fontsize_col`列标签。您有许多有趣的选项，例如`display_numbers`将值放在热图的单元格内。刚读`?pheatmap`。

这是由命令的默认参数生成的示例`pheatmap()`：

![在此处输入图像描述](../Images/2760dd81d2912132b59fa8dc53a06466.png)

最后请注意，太多的行在显示器上很容易阅读，但对打印无用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:09:45.993

在 Rstudio 中，您可以轻松调整图形窗口的大小，Rgui 也是如此。或者，如果您将绘图保存到文件中，您可以为您的图形使用更大的尺寸，例如在调用`width`或时更大。`height``pdf``png`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T13:27:36.387

您可以使用 cexRow = 和 cexCol =。

您可以在 ??heatmap.2 中获取更多信息

```
# Row/Column Labeling
margins = c(5, 5),
ColSideColors,
RowSideColors,
cexRow = 0.2 + 1/log10(nr),
cexCol = 0.2 + 1/log10(nc),
labRow = NULL,
labCol = NULL,
srtRow = NULL,
srtCol = NULL,
adjRow = c(0,NA),
adjCol = c(NA,0),
offsetRow = 0.5,
offsetCol = 0.5,
colRow = NULL,
colCol = NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-02T21:14:25.540

如果您使用**pheatmap** ( )，您可以通过调整参数`https://www.rdocumentation.org/packages/COMPASS/versions/1.10.2/topics/pheatmap`来展开这些标签。`cellheight`

如果您在 R notebook 中执行此操作，即使在运行代码时整个热图不会显示在输出窗口中，但当您使用`filename` 参数将热图保存到计算机时，pheatmap 会自动计算最佳大小输出文件，以便您的整个热图将显示在输出文件中。如果您不喜欢这个大小，您可以使用`width`和`height`参数进行调整，但您不太可能想要这样做。

# c# - 如何在使用安装项目的安装过程中传递文件夹路径（不是安装文件夹）

> ID：13087556
> 
> 赞同：0
> 
> 时间：2012-10-26T13:09:33.920
> 
> 标签：c#, .net, setup-project

我想在我的应用程序安装过程中传递保存日志文件的文件夹路径。文件路径保存在 app.config 中。如何自定义安装过程以添加自定义对话框以传递文件夹路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:13:33.760

[这](http://aspalliance.com/1220_CodeSnip_Editing_WebConfig_File_for_an_Application_using_Visual_Studio_2005)是一个如何执行此操作的示例。

# maps - 从国家名称获取经度和纬度

> ID：13087561
> 
> 赞同：2
> 
> 时间：2012-10-26T13:09:56.430
> 
> 标签：maps, google-maps-markers, latitude-longitude, countries

我在我的网站中嵌入了 Gmaps，它从我的数据库中提取了全球经销商列表，并根据 Gmaps 中的经销商邮政编码用标记绘制了他们的位置。这很好用，但是我需要扩展此功能以支持没有邮政编码而是分配给国家/地区的经销商。

例如，可以将测试经销商分配给德国和比利时，因此我需要以某种方式获取国家名称“德国”和“比利时”的通用经度和纬度值，然后显示这些经度/纬度值的标记。

这可能吗？如果是这样，我从哪里开始？！

谢谢阅读。克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:38:30.970

尝试使用谷歌的地理编码器。只需提供一个通用地址，在您的情况下是一个国家，它将返回该国家的中心点以及坐标（纬度和经度）

这是一个链接。[https://developers.google.com/maps/documentation/javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding)

# php - 从 PHP 类中的静态函数访问静态数组的正确方法

> ID：13087567
> 
> 赞同：2
> 
> 时间：2012-10-26T13:10:09.003
> 
> 标签：php, class, static, member

> **可能重复：**
> [我如何访问类的静态成员？](https://stackoverflow.com/questions/3818333/how-do-i-access-static-member-of-a-class)

我有这堂课。在其`createNew`功能中，我指的是`$reftbArr = tc_group::$tblFields;`.

我有好几次类似这门课的课。它们具有相同的方法和变量，但类名当然不同。

`createNew`函数中访问`tc_group::$tblFields;`但没有硬编码类名的最佳方式是什么？

```
<?php
class tc_group {
    public $id;
    public $password;
    private static $tableName = "tc_group";

    public static $tblFields = array(
        ':id'        => array('value' => '','required' => 0),
        ':password'  => array('value' => '','required' => 0)
    );

   public static function createNew($link , $tblfields){
    $reftbArr = tc_group::$tblFields;
   }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:44:55.413

您可以使用 self 例如：`self::$variable`

您可以使用静态例如：`static::$variable`

不同之处在于 self 将访问它所使用的当前类（忽略继承）， static 将遵循继承。

**扩展答案**

> 我有几次相同的课程。它们具有相同的方法和变量，但类名当然不同。

听起来它需要重构。在这种情况下，创建一个“抽象类”，它定义了其他类定义的所有属性和方法，并将它们从其他类中删除（因为它们现在在抽象类中）。然后扩展抽象类以根据需要创建单独的类，其中仅包含其中的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:11:22.947

您将使用 static 关键字[`self`](http://php.net/manual/en/language.oop5.static.php)。

```
public static function createNew($link , $tblfields){
    $reftbArr = self::$tblFields;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:12:37.583

$tableFields = self::$tblFields;

print_r($tableFields);

# javascript - 如果延迟的 AJAX 对象不存在，$.when 会不会打扰它？

> ID：13087568
> 
> 赞同：3
> 
> 时间：2012-10-26T13:10:12.040
> 
> 标签：javascript, jquery, ajax, jquery-deferred

只是想知道在我开始破解我的代码之前。例如：

```
if (blahblah) {
  $.ajax("randomthingy1");
}
if (blahblahblah) {
  $.ajax("randomthingy2");
}
// Use jQuery to test when they've both finished. Obviously they won't always both finish, as they might not both exist, and none of them might exist either.

$.when($.ajax("randomthingy1"), $.ajax("randomthingy2"), function (stuff) {
  // foo
}

// Might produce an error, as one might not exist. But will it move on and not bother? 
```

就是想。如果它确实会产生错误并停止执行，有没有办法捕捉错误并继续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:15:01.030

`.when()``done() handler`如果您传入的所有*Defered*对象都可以*解决*，则只会触发。因此，在您的实例中，如果一个*Ajax 请求*由于某种原因失败，则混合的*Defered*对象将解析为*失败*，并且您绑定的处理程序`.when() -> done`将不会触发。但当然，在这种情况下，您的所有处理程序都绑定`fail`或`always`将触发。

```
$.when( $.ajax({}), $.ajax({}) )
   .done(function() {
      // all promises (ajax requests) resolved successfully
   })
   .fail(function() {
      // at least one promise (ajax request) failed
   })
   .always(function() {
      // will always get fired
   }); 
```

见[http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:17:42.900

我不确定这是否能回答您的问题，但这是我处理此类事情的方式：

```
var requests = [];
if (blahblah) {
  requests.push( $.ajax("randomthingy1") );
}
if (blahblahblah) {
  requests.push( $.ajax("randomthingy2") );
}
$.when.apply( $, requests ).then( function( ) {
  // handle success
}, function( ) {
  // handle error
}); 
```

这确保即使这些条件都不满足，即不存在请求，代码也会进入处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:22:43.683

您可以使用此布局来确保始终响应延迟完成，无论是否已解决或拒绝：

```
$.when(deferred1, deferred2, ...)
    .done(function (data1, data2, ...) {
        // success handlers - fires if all deferreds resolve
    })
    .fail(function (error1, error2, ...) {
        // failure handlers - fires if one or more deferreds reject or throw exceptions
    })
    .always(function () {
        // complete handlers - always fires after done or fail
    }); 
```

# c# - 使属性与 CLR 一起工作的魔力是什么？

> ID：13087571
> 
> 赞同：8
> 
> 时间：2012-10-26T13:10:19.147
> 
> 标签：c#, clr, syntactic-sugar

我注意到当我反映到程序集中时，对属性访问器的调用有时看起来像方法

```
// "Reflected" example
class Class1 {
   public bool Boolean { get; set;}
}

class Class2 {
   public Class2() {
       var class1 = new Class1();
       var boolean = class1.get_Boolean();
   }
} 
```

现在我很好奇，我放了一个类似签名的方法`Class1`，看起来像是访问器的标准约定。

```
// "Hacked" example
class Class1 {
   public bool get_Boolean() { return true; }
} 
```

不知何故，C# 编译器仍然将`get_Boolean`其视为一种方法。

让方法成为属性的魔法酱是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T13:15:01.777

.NET 程序集不仅包含代码，它还包含描述代码的**元数据。**

对于方法，会发出描述方法名称、签名等的元数据。

在 property 的情况下`X`，它被编译为一堆访问器方法（`get_X`和/或`set_X`），并且对于其中的每一个，都会发出通常的方法元数据。然后，发出额外的元数据，它指定所有这些访问器方法实际上属于一个逻辑实体（属性）。

现在，回到您的示例：如果您定义一个`get_Boolean`使用 C# 调用的方法，C# 编译器将仅发出方法元数据，但不会发出其他属性元数据。本质上，编译器可以选择要发出的元数据。并且由于您没有使用 C# 语法来处理属性，而是使用方法声明语法，因此 C# 编译器将为其生成元数据。

元数据在[**ECMA 335 标准**](http://www.ecma-international.org/publications/standards/Ecma-335.htm)中有详细描述，该标准描述了 CLI（.NET 平台）。有关属性元数据如何工作的说明，请参阅**第 241 页的第 II.22.34 章。**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-26T13:16:00.090

如果您查看 IL，您会发现如下内容：

```
.property instance string Source()
{
    .get instance string System.Exception::get_Source()
    .set instance void System.Exception::set_Source(string)
}

.method public hidebysig specialname newslot virtual 
    instance string get_Source () cil managed 
{
    ...
}

.method public hidebysig specialname newslot virtual 
    instance void set_Source (
        string 'value'
    ) cil managed 
{
    ...
} 
```

因此，“魔术”是`.property`将两种方法粘合在一起的成员。

# javascript - 如何在 Typescript 中从另一个文件声明函数？

> ID：13087573
> 
> 赞同：27
> 
> 时间：2012-10-26T13:10:27.330
> 
> 标签：javascript, typescript

我在文件中有以下功能：

```
function alertWin(title, message) {
   .......
   .......
} 
```

在另一个打字稿文件中，我有：

```
function mvcOnFailure(message) {
    "use strict";
    alertWin("Internal Application Error", message);
} 
```

我收到一条错误消息，说当前范围内不存在“alertwin”。

解决这个问题的方法是让我在另一个文件中定义这个函数然后引用它吗？如果是这样，那么定义会是什么样子？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-26T13:25:18.050

您可以这样做（假设标题和消息都应该是字符串）：

```
interface alertWinInterface{
    (title:string, message: string):any;
}

declare var alertWin: alertWinInterface; 
```

您可以将其放在同一个文件中，或者将其放在您导入的单独环境定义文件 (.d.ts) 中：

```
/// <reference path="myDefinitions.d.ts" /> 
```

或者，您可以只导入具有实际函数定义的其他文件，但您不会获得静态类型支持。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-06-11T23:46:56.070

这种方法似乎对我有用：

```
declare function alertWin(title: string, message: string) : void; 
```

和马特的解决方案一样，你把它放在一个定义文件中，然后引用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-26T13:40:15.973

您只需要通过添加对文件顶部的引用来告诉工具和编译器在哪里可以找到您的函数：

```
/// <reference path="fileWithFunction.ts" /> 
```

此外，您的所有参数当前都键入为`any`，如果您愿意，可以显式键入它们。

```
function alertWin(title: string, message: string) : void {
   //.......
   //.......
} 
```

# installshield - Linux 上的 ISMP 静默模式安装

> ID：13087578
> 
> 赞同：1
> 
> 时间：2012-10-26T13:10:40.033
> 
> 标签：installshield

我正在尝试安装一些使用 ISMP（InstallShield Multi Platform）打包的软件。我正在尝试以静默模式安装类似 ./setup.bin -silent 的东西，它可以完全完成安装。但是，我希望可以选择使用某些属性文件或类似的东西在静默模式下安装特定功能。任何帮助，将不胜感激。谢谢。

# python - python递归深度是如何计算的？

> ID：13087579
> 
> 赞同：2
> 
> 时间：2012-10-26T13:10:54.183
> 
> 标签：python, recursion

这是我的函数 Foo：

```
def Foo(n=10):
    if 1<n<=10:
        for i in range(1, 10):
            #### Do_Something
            Foo(n-1) 
```

我得到`RuntimeError: maximum recursion depth exceeded`了，这令人沮丧，因为我期望 Foo 的递归深度为 10+，远不及 python 的默认 500 限制。我知道我会用这个 Foo 获得大量的堆栈，但这是可以忍受的。我尝试增加`sys.setrecursionlimit`但仍然收到 RuntimeError。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:17:23.480

的[文档](http://docs.python.org/library/sys.html#sys.getrecursionlimit)`sys.setrecursionlimit`指定递归限制实际上是python*堆栈的深度*。

**编辑**我不知道你为什么要达到递归限制，但你可能没有因为这个函数而达到（我已经修改了它，以便它打印它在堆栈上的最大次数）：

```
count = 0
maxcount = 0

def Foo(n=10):
    global count
    global maxcount
    count = count + 1

    if(count > maxcount):
        maxcount = count
        print maxcount

    if 1<n<=10:
        for i in range(1, 10):
            #### Do_Something
            Foo(n-1)
    count = count - 1

Foo(10) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T14:51:57.863

There was an error in my calculation apologies. The function does not in fact crash on foo(10) but simply makes 4 billion calls but halts correctly.

# jquery - 为什么jquery第一个孩子在ie6中工作？

> ID：13087587
> 
> 赞同：0
> 
> 时间：2012-10-26T13:11:10.610
> 
> 标签：jquery, css-selectors

为什么 jquery first child 在 ie6 中工作而 :first-child 不工作？
是否有一些黑客攻击。

```
:first-child 
```

对比

```
$(":first-child") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:13:08.893

jQuery 使用它自己的解析器，而不是浏览器中的解析器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:13:18.857

如果您的意思是 CSS 选择器`:first-child`与 jQuery 选择器`:first-child`：这是因为 jquery 有自己的 javascript 实现，而 css 依赖于浏览器...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:14:35.647

jQuery 将实现该功能。实际上它会实现所有选择器，因为 IE6 不支持 querySelectorAll()

# php - 使用多维关联 php 数组实现购物车系统

> ID：13087593
> 
> 赞同：-1
> 
> 时间：2012-10-26T13:11:18.717
> 
> 标签：php, multidimensional-array

我没有得到 PHP 中二维数组的概念。我正在尝试实现一个购物车系统，其中数组 Session 变量存储 productid 及其数量。对于每个新条目，如果它存在，它的数量应该增加，或者如果它不存在，那么应该添加一个新的 id。这是我的初始代码。

```
function cart_increment_ajax($data, $qtt) {
    $_SESSION['count']+=$qtt;
    set_cart( $data );
    echo $_SESSION['count'];
}

function initialise_cart( ) {
        $_SESSION['cart'] =array( );
        $_SESSION['totalprice'] = 0;
}

function set_cart( $pid )  {
                    if(!isset($_SESSION['cart'])) {
        initialise_cart( );
                     }
        //else if( int $_SESSION['cart'] pid exists increment count ))
                    else
                    //     ($_SESSION['cart'] add new pid.

} 
```

我没有得到如何通过多维关联数组来实现注释行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:25:07.893

会话中的多数组的一个小型快速 n 脏示例保持购物车

```
<?php

function add_to_cart($product_id,$count)
{
    // no need for global $_SESSION is superglobal
    // init session variable cart
    if (!isset($_SESSION['cart']))
        $_SESSION['cart'] = array();
    // check if product exists
    if (!isset($_SESSION['cart'][$product_id]))
        $_SESSION['cart'][$product_id]=$count;
    else
        $_SESSION['cart'][$product_id]+=$count;
}

// add some foos and a bar
add_to_cart('foo',2);
add_to_cart('foo',1);
add_to_cart('bar',1);

print_r($_SESSION['cart']);
?> 
```

这将产生

```
Array
(
    [foo] => 3
    [bar] => 1
) 
```

高温高压

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T13:25:29.297

使用产品 ID 作为数组中的索引，然后使用 ++ 简单地递增它。

```
$_SESSION['cart'][$pid]++; 
```

# visual-studio-2010 - 如果文件被另一个进程锁定，则强制 Git Pull 失败

> ID：13087597
> 
> 赞同：2
> 
> 时间：2012-10-26T13:11:26.367
> 
> 标签：visual-studio-2010, git, configuration, pull

有时，如果我在从 Git 中提取时在 Visual Studio 中打开了一个解决方案（这种开发环境中的常见情况），Visual Studio 似乎会锁定某些文件，因此 Git 无法覆盖它们。

当这种情况发生时，Git 似乎并不在意——它会继续拉取并认为我的本地存储库是最新的。但是，由于它无法写入的文件（通常是 .csproj 文件）尚未更新，因此在 Visual Studio 中不会构建任何内容，或者更糟糕的是，一切都会构建，但会添加一些新的古怪错误或文件丢失项目造成不可预测的结果。

如果 Git 失败并在存在无法覆盖的文件时回滚拉取，而不是仅仅忽略它，这对我来说会更有用。我猜这可以在某处进行配置，但我似乎无法找到要搜索的内容 - 任何人都可以建议我需要做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:33:37.077

我收到的解释是，这与 Git 没有任何关系——如果 Visual Studio 打开了文件，它不会锁定它们，但会在你下次构建时重新保存它们（或出于其他异想天开的原因own ) 的结果是，如果它在 pull 之后执行此操作，它将覆盖 Git 已成功替换的更改，从而导致这些类型的问题。

# java - JSP 上的动态图像预览

> ID：13087600
> 
> 赞同：1
> 
> 时间：2012-10-26T13:11:32.213
> 
> 标签：java, image, jsp, dynamic, preview

我的rich:dataTable 中有一个文本字段，在一列中：

```
<h:inputText id="logourl" value="#{item.logoUrl}" /> 
```

我在另一列中有这个标签：

```
<h:graphicImage id="logoimage" value="#{item.logoUrl}" url="#{item.logoUrl}" /> 
```

一个元素将值放入 bean "item" 中，另一个元素读取它，但它仅在页面重新呈现时发生。我想要的是当我更改图像中的值时必须自动刷新。我听说它可以用 a4j:mediaOutput 完成，但我发现的只是如何手动创建图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:18:29.920

我认为您需要提交表单以使其自动更改，我个人会使用 JavaScript 来执行此操作。

```
 <script type="text/javascript">
function swapImage(divId) {
    document.getElementById("img").src=divId;
}
</script> 
```

# python - urllib2 文件下载失败...由于系统安全性？

> ID：13087604
> 
> 赞同：0
> 
> 时间：2012-10-26T13:11:48.890
> 
> 标签：python, urllib2

我正在尝试从 NASA 服务器（[URL](http://avdc.gsfc.nasa.gov/index.php?site=1480884223&id=40&go=list&path=/H2O//2010) ）下载文件（大约 1 - 1.5MB/文件） ，但无济于事！我用 urllib2 尝试了一些东西并遇到了两个结果：

1.  我在我的机器上创建了一个只有 ~200KB 的新文件，其中没有任何内容
2.  我在我的机器上创建了一个 1.5MB 的文件，其中没有任何内容！

“里面什么都没有”我的意思是当我打开文件时（这些是 hdf5 文件，所以我在 hdfView 中打开它们）我看不到任何层次结构......从字面上看，它看起来像一个空的 h5 文件。但是，当我在文本编辑器中打开文件时，我可以看到那里有一些东西（它是二进制的，所以在文本中它看起来像......嗯，二进制）。

我认为我正在适当地使用 urllib2，尽管我以前从未成功使用过 urllib2。您能否评论一下我所做的是否正确，并提出更好的建议？

```
from urllib2 import Request, urlopen, URLError, HTTPError
base_url = 'http://avdc.gsfc.nasa.gov/index.php?site=1480884223&id=40&go=list&path=%2FH2O%2F/2010'
file_name = 'download_2.php?site=1480884223&id=40&go=download&path=%2FH2O%2F2010&file=MLS-Aura_L2GP-H2O_v03-31-c01_2010d360.he5'

url = base_url + file_name
req = Request(url)

# Open the url
try:
    f = urlopen(req)
    print "downloading " + url

    # Open our local file for writing
    local_file = open('test.he5', "w" + file_mode)
    #Write to our local file
    local_file.write(f.read())
    local_file.close()

except HTTPError, e:
    print "HTTP Error:",e.code , url
except URLError, e:
    print "URL Error:",e.reason , url 
```

[我从这里](http://www.techniqal.com/blog/2008/07/31/python-file-read-write-with-urllib2/)得到了这个脚本（这似乎是最接近工作的）。
我不确定 file_name 应该是什么。我查看了存档的页面源信息并提取了其中列出的文件名（与网页上显示的不同），这样做会产生 1.5MB 的文件，在 hdfview 中没有显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:15:30.250

您正在创建一个无效的网址：

```
base_url = 'http://avdc.gsfc.nasa.gov/index.php?site=1480884223&id=40&go=list&path=%2FH2O%2F/2010'
file_name = 'download_2.php?site=1480884223&id=40&go=download&path=%2FH2O%2F2010&file=MLS-Aura_L2GP-H2O_v03-31-c01_2010d360.he5'

url = base_url + file_name 
```

你可能的意思是：

```
base_url = 'http://avdc.gsfc.nasa.gov/'
file_name = 'download_2.php?site=1480884223&id=40&go=download&path=%2FH2O%2F2010&file=MLS-Aura_L2GP-H2O_v03-31-c01_2010d360.he5' 
```

下载大文件时，最好使用从文件句柄到文件句柄的缓冲副本：

```
import shutil

# ...
f = urlopen(req)
with open('test.he5', "w" + file_mode) as local_file:
    shutil.copyfileobj(f, local_file) 
```

[`.copyfileobj`](http://docs.python.org/library/shutil.html#shutil.copyfileobj)将有效地从打开的 urllib 连接加载并写入打开的`local_file`文件句柄。请注意`with`语句，当下面的代码块结束时，它会自动为您关闭文件。

# asp.net - / 和 ~/ 相对路径有什么区别？

> ID：13087606
> 
> 赞同：2
> 
> 时间：2012-10-26T13:11:59.300
> 
> 标签：asp.net, html, relative-path, relative-url

我认为这两种类型都会将您带到根文件夹，但显然，一旦您进行 URL 重写，它们的工作方式就会不同。

例如，我通常使用 / 我知道它会将您带到根文件夹，并且当 URL 被重写时它会这样做。

当其他人在重写 URL 后尝试使用 ~/ 时，路径无法找到该文件。这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T13:17:39.557

/ 将带您回到网站的根目录。

~/ 将带您到网站上应用程序的主文件夹。

例如，如果您的应用程序位于名为 myApp 的文件夹中，则 URL 如下所示

```
http://www.YourSite.com/myApp/ 
```

并在您的应用程序中使用 ~/Scripts/jquery.js 然后引用的路径将是

```
http://www.YourSite.com/myApp/Scripts/jquery.js 
```

而仅使用 / 会将您一路送回网站的根目录

```
http://www.YourSite.com/Scripts/jquery.js 
```

# mysql - 我应该如何编写这个包含多个左连接的 MySQL 查询

> ID：13087608
> 
> 赞同：0
> 
> 时间：2012-10-26T13:12:09.877
> 
> 标签：mysql, performance, join

我有一个由多个连接组成的查询，我想知道是否可以重写它以提高性能。

我有 2 个表如下（我已删除此示例的非重要列）：

插槽

```
------------------------------------------
| id   | name | slot_1 | slot_2 | slot_3 |
------------------------------------------
| 1    | Bob  | 1      | 2      | 3      |
| 2    | Jim  | 4      | 3      | 3      |
| 3    | Alf  | 1      | 2      | 5      |
------------------------------------------ 
```

（总共有 25 个插槽，每个插槽都有自己的列）

slot_details

```
-----------------------------------
| id   | stat_1 | stat_2 | stat_3 |
-----------------------------------
| 1    | 1      | 5      | 6      |
| 2    | 4      | 31     | 23     |
| 3    | 6      | 5      | 7      |
| 4    | 7      | 4      | 9      |
| 5    | 2      | 3      | 5      |
----------------------------------- 
```

（总共有10个统计）

查询如下：

```
SELECT
    slots.name,
    slot_1_details.stat_1 AS slot_1_stat_1,
    slot_1_details.stat_2 AS slot_1_stat_2,
    slot_1_details.stat_3 AS slot_1_stat_3,
    slot_2_details.stat_1 AS slot_2_stat_1,
    slot_2_details.stat_2 AS slot_2_stat_2,
    slot_2_details.stat_3 AS slot_2_stat_3,
    slot_3_details.stat_1 AS slot_3_stat_1,
    slot_3_details.stat_2 AS slot_3_stat_2,
    slot_3_details.stat_3 AS slot_3_stat_3
FROM
    slots
LEFT JOIN
    slot_details AS slot_1_details
ON (
    slot_1_details.id = slots.slot_1
)
LEFT JOIN
    slot_details AS slot_2_details
ON (
    slot_2_details.id = slots.slot_2
)
LEFT JOIN
    slot_details AS slot_3_details
ON (
    slot_3_details.id = slots.slot_3
)
WHERE (
    slots.id = 1
) 
```

此查询的预期结果如下：

```
| name | slot_1_stat_1 | slot_1_stat_2 | slot_1_stat_3 | slot_2_stat_1 | slot_2_stat_2 | slot_2_stat_3 | slot_3_stat_1 | slot_3_stat_2 | slot_3_stat_3 |
|bob   | 1             | 5             | 6             | 4             | 31            | 23            | 6             | 5             | 7             | 
```

不幸的是，我无法更改表格。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:19:08.297

也许

```
SELECT * FROM slots s LEFT JOIN slot_details sd ON s.id=sd.id 
```

但我不确定，因为您发布的查询非常混乱。

这些表的键是什么？

# jquery - Jquery 自动完成总是建议每一个选项

> ID：13087614
> 
> 赞同：2
> 
> 时间：2012-10-26T13:12:32.497
> 
> 标签：jquery, ajax, json, autocomplete

不管我在文本框中输入什么，总是显示整个列表。这是我的代码：

```
$("#tb_country").autocomplete({
  source: function(request, response) {
    $.ajax({
      url: "/index.php/ajax_calls/select_countries",
      dataType: "json",
      data:  request,
      success: function(data) {
        response(data);
      }
    });
  },
  minLength: 3
}); 
```

select_countries函数以正确的自动完成**格式**返回 JSON 数据，即*[{"label":"United States"},{"label":"Canada"}........]* 请有人告诉我出了什么问题有了这个，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T13:28:08.170

[确保您实际上在](http://api.jqueryui.com/autocomplete/#option-source)服务器端代码中过滤了您的响应，如下所述：

> 自动完成插件不过滤结果，而是添加了一个带有术语字段的查询字符串，**服务器端脚本应该使用它来过滤结果**。例如，如果源选项设置为“http://example.com”并且用户键入 foo，则会向[http://example.com?term=foo](http://example.com?term=foo)发出 GET 请求。

您确实发送了正确的请求（`term`参数由`input`元素的当前值填充），但很可能不在服务器代码中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:31:16.783

也许问题是响应不在上下文中？

除了使用 response(data) 之外，您还可以尝试从服务器获取数据的 onchange，而不仅仅是像这样设置源：

```
$("#tb_country").autocomplete( "option", "source", serverData ); 
```

Also I didn't understood if the problem is in the returned data from the server or in the jquery. If the problem is the data from the server you should make sure what is being sent in the request.

Edit: Must be a server problem since data was already filled once. Can you please please post the Request Headers and or server function?

# c# - 在 XAML 中对可编辑的组合框进行排序

> ID：13087617
> 
> 赞同：0
> 
> 时间：2012-10-26T13:12:39.390
> 
> 标签：c#, wpf, xaml

添加新记录后，我想在纯 WPF 中对可编辑的组合框进行排序。经过一些研究，我发现了一些使用 a 的提示`CollectionViewSource.SortDescription`，但它对我不起作用。我究竟做错了什么？使用我的项目的 DataContext`DataTemplate`工作正常，但`DataTemplate`与资源部分之间的绑定以对我的条目列表进行排序却没有。

* * *

**我的 XAML 部分**

```
<DataTemplate x:Key="Document">
    <DataTemplate.Resources>
        <CollectionViewSource x:Key="SortedLabels" Source="{Binding Parent.Labels}">
            <CollectionViewSource.SortDescriptions>
                <scm:SortDescription PropertyName="Items"/>
            </CollectionViewSource.SortDescriptions>
        </CollectionViewSource>
    </DataTemplate.Resources>

    <Grid>
    ...
        <ComboBox Name="cbLabel"
                  ItemsSource="{Binding Source={StaticResource SortedLabels}}"
                  IsEditable="True"
                  LostFocus="cbLabel_LostFocus"
                  KeyUp="cbLabel_KeyUp"
                  Visibility="{Binding Path=IsUndiscovered, Converter={StaticResource ResourceKey=BooleanToVisibilityConverter}}"/>
    ...
    </Grid>
</DataTemplate> 
```

* * *

**编辑** 集合`Parent.Labels`是类型`ObservableCollection<String>`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:34:40.833

很难说，因为您没有显示要排序的集合是什么，但我的猜测是 Parent.Labels 中的每个对象都没有 Items 属性。PropertyName 指的是列表中单个对象的属性，它将查看并尝试排序。我猜您想要更多类似于“名称”或其他属性的东西。

# gis - 什么是获取定义美国城市边界的多边形的好 API？

> ID：13087618
> 
> 赞同：1
> 
> 时间：2012-10-26T13:12:45.180
> 
> 标签：gis

什么是获取定义美国城市边界的多边形的好 API？

看过google，但似乎只返回一个边界框。

# django - 我不想在 VIM 中的 makeprg 之后看到空缓冲区

> ID：13087620
> 
> 赞同：4
> 
> 时间：2012-10-26T13:12:54.427
> 
> 标签：django, vim

使用 VIM 我想执行当前的 sql 文件并查看结果。我已经尝试了以下（`./manage.py dbshell`是一个 Django 包装器`psql`）

```
nmap <silent> <Leader>r :make<CR>
autocmd FileType sql set makeprg=cat\ %\\\|./manage.py\ dbshell 
```

它工作正常。但是在*按 ENTER 或键入命令继续*VIM 后总是显示空缓冲区（可能是错误列表）。如何跳过它的开放？

如果我在命令模式下运行相同的命令，它将像我预期的那样（没有烦人的缓冲区）

```
:!cat %|./manage.py dbshell 
```

我的 SQL 脚本包含一个 select 语句。魔术缓冲区看起来像： ![在此处输入图像描述](../Images/73bb4cf3be077ca9c801220407a7af1d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T21:06:50.323

这很可能是错误的`'errorformat'`选择。尝试做

```
:make! 
```

（砰！），看看这个窗口是否出现。如果不是，这是真的，您应该阅读`:h 'errorformat'`并设置它`'make'`。或者永远不要使用plain `:make`without bang而忘记跳转到错误（如果该脚本能够输出有关错误的信息）。

* * *

另一个想法：你能显示输出

```
:au ShellCmdPost,QuickFixCmdPre,QuickFixCmdPost 
```

? 这也可能是在这三个事件之一上启动的某些插件或 vimrc 代码的问题。

* * *

顺便说一句，您发布的命令中有两件事可以改进。首先，映射应该写成`nnoremap`。您不需要在这里重新映射，当您向 vimrc 添加一些其他映射时，它可能会节省您的时间。

其次，`setlocal`在 autocmd 中使用，而不是`set`. 为将在 sql one 之后打开的所有缓冲区设置`set`默认值。`'makeprg'`

# git - git gitolite (v3) 所有提交消息的预接收钩子

> ID：13087625
> 
> 赞同：4
> 
> 时间：2012-10-26T13:13:08.067
> 
> 标签：git, hook, gitolite, githooks

我正在尝试执行一项策略，当即使其中一个提交消息不满足规则时，每次推送都会被拒绝。我已经向开发人员分发了一个钩子，以便他们在本地存储库中使用它，但我也想在他们推送到源时强制执行此操作。

我有两个问题：

1.  我应该使用更新挂钩还是预接收挂钩？（我试图设置一个 update.secondary 钩子，但在我看来它不会被触发，而预接收会）。

2.  如何获取推送中包含的每个提交的消息？更具体地说，我希望每条提交消息都有一个特定的“有效”（满足我的需要）前缀。因此，我想在此推送中扫描提交消息中的每个提交，并在接受推送之前对其进行验证。

我正在使用简单的 bash 对钩子进行编码。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T13:56:23.910

我建议不要使用链式更新挂钩，而是使用Gitolite V3 提供的[VREFS 。](http://sitaramc.github.com/gitolite/vref.html)你可以[在这里看到它的所有论点](http://sitaramc.github.com/gitolite/vref.html#vref-args)。

由于 VREF 基本上就像一个**钩子**，你可以像在[这个脚本](https://gist.github.com/3677248)中一样，获取每个提交的日志消息：**`git update`** **`git log --format=%s -1 $commit`**

 **对 git 提交消息执行策略的脚本示例：

```
#!/bin/bash

refname="$1"
oldrev="$2"
newrev="$3"
result=0

# Make sure we handle the situation when the branch does not exist yet
if ! [ "$oldrev" = "0000000000000000000000000000000000000000" ] ; then
    excludes=( ^$oldrev )
else
    excludes=( $(git for-each-ref --format '^%(refname:short)' refs/heads/) )
fi

# Get the list of incomming commits
commits=`git rev-list $newrev "${excludes[@]}"`

# For every commit in the list
for commit in $commits
do
  # check the log message for ticket number
  message=`git log --format=%s -1 $commit`
  ticket=`echo "$message" | grep -o "^[A-Z]\{2,3\}-[0-9]\+"`
  if [ "$ticket" = "" ] ; then
    echo "Commit $commit does not start with a ticket number"
    result=1
  fi
done

exit $result 
```

* * *

[cwhsu](https://stackoverflow.com/users/2160028/cwhsu)在评论中提到：

> *   如果您尝试使用 shell 脚本编写服务器端钩子，您可能想看看“ [Can git `pre-receive`hooks 评估传入的提交吗？](https://stackoverflow.com/q/22546393/6309) ”。
>     我终于得到了`oldrev`,`newrev`并`refname`通过在 shell 脚本中使用 read 。
>     
>     
> *   这也是[全零 SHA1 的含义](https://stackoverflow.com/a/18982443/6309)。
>     
>     
> *   这一行“ `excludes=( ^$oldrev )`”，' `^`'只是意味着排除！**

# serial-port - linux-device-driver - 串行 8250 环回驱动程序代码？

> ID：13087631
> 
> 赞同：1
> 
> 时间：2012-10-26T13:13:19.890
> 
> 标签：serial-port, linux-device-driver

我想在 linux-3.6.1 内核中找到的 /drivers/tty/serial/8250.c 中的 8250.c 中实现串行环回驱动程序代码。我不想使用硬件环回（即通过短接标准串行端口的引脚 2（tx）和 3（rx）），而是我想修改 8250.c 驱动程序，以便来自用户空间的数据将传输从“serial8250_tx_char”函数直接到“serial8250_rx_char”而不用去硬件，即我想接收发送的什么？

一种可能的实现是将传输循环缓冲区数据放入 tty 翻转缓冲区，然后将此数据推送到 tty 核心，以便用户空间可以接收它？我想知道如何在代码中做到这一点。我们可以搜索上面提到的“rx 和 tx”函数——这就是我正在寻找的地方，以及我将如何测试它，意味着通过写入设备文件然后立即接收相同的内容。

我也有一个示例补丁，但不确定它是否会起作用。

任何帮助，将不胜感激...

阿比吉特

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-26T09:50:04.463

```
`@@ -2112,6 +2116,7 @@ static int serial8250_startup(struct uart_port *port)
                if (is_real_interrupt(up->port.irq))
                        up->port.mctrl |= TIOCM_OUT2;

   + up->port.mctrl |= TIOCM_LOOP;
    serial8250_set_mctrl(&up->port, up->port.mctrl);

    /* Serial over Lan (SoL) hack: 
```

这会将 UART 设置为在内部环回模式下工作。`

# c# - 根据表中的名称绑定日期时间以下拉

> ID：13087634
> 
> 赞同：1
> 
> 时间：2012-10-26T13:13:31.197
> 
> 标签：c#, asp.net, sql, sql-server, stored-procedures

![在此处输入图像描述](../Images/9258eb3fbcaa7c22ed26ace2b27a7187.png)

我有一个像这样的表，在后面的代码中，我必须在标签中显示 tempname 并在下拉列表中显示 rundate 我必须在下拉列表中显示最近 10 个 rundates 而没有重复的名称DDL 中的运行日期。我怎样才能做到这一点？我需要一个相同的存储过程。

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        DataTable dt = new DataTable();
        dt = Common.rundate();
        DropDownList ddl = e.Row.FindControl("DropDownList1") as DropDownList;

        ddl.DataTextField = "RunDate";
        ddl.DataValueField = "TempID";
        ddl.DataSource = dt;
        ddl.DataBind();

    }

}

   public static DataTable rundate()
    {
        DBAccess objDBAccess = new DBAccess();
        DataTable dt = new DataTable();

        try
        {
            objDBAccess.AddParameter("@tempname", SqlDbType.VarChar);
            objDBAccess.AddParameter("@tempid", SqlDbType.Int);
            objDBAccess.AddParameter("@rundate", SqlDbType.DateTime);
            dt = objDBAccess.ExecuteDataTable("display_rundates");
            return dt;
        }
        catch
        {
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:40:51.307

试试这个查询：

```
 SELECT 
      TOP 10
         MAX(RunDate) RunDate
      ,  TempName
  From 
      tblTest
  GROUP BY
      TempName
  ORDER BY 
      RunDate DESC 
```

如果您需要获取 TempID，请尝试以下操作（假设 TempID 是标识列）：

```
;WITH cteDllLastRun AS (
                             SELECT 
                                  MAX(TempID) TempID
                                 ,TempName
                             FROM
                                 tblTest
                             GROUP BY
                                 TempName
                        )
SELECT 
   TOP 10
     tblTest.*
FROM
   cteDllLastRun
INNER JOIN
   tblTest
ON
   tblTest.TempID = cteDllLastRun.TempID
ORDER BY
    tblTest.RunDate DESC 
```

如果 tempID 不唯一，则此查询：

```
;WITH cteDlls AS (
     SELECT 
          DISTINCT 
             TempName
     FROM
         tblTest
)
SELECT 
    TOP 10
     vwLastRun.*
FROM
   cteDlls 
CROSS APPLY
    (
         SELECT TOP 1 
              *
         FROM
             tblTest
         WHERE
             tblTest.TempName = cteDlls.TempName
         ORDER BY
            RunDate DESC
    ) vwLastRun
ORDER BY
    RunDate DESC 
```

对于最后一个解决方案，您需要确保 TempName 和 RunDate 已编入索引，以便您获得适当的性能。

# java - 通过 Java 使用 HP Quality Center 10

> ID：13087643
> 
> 赞同：1
> 
> 时间：2012-10-26T13:14:00.573
> 
> 标签：java, hp-quality-center, j-integra

我正在尝试使用以下代码从 Java+jIntegra 连接到 HP QC 10：

```
System.setProperty("JINTEGRA_NATIVE_MODE", ""); 

TDConnection connection = new TDConnection();
System.out.println("TDConnection object created");

connection.initConnectionEx("http://myserver:8080/qcbin/");
System.out.println("Connection initialized");

connection.login("user", "pass");
System.out.println("Logged in");

connection.connect("domain", "project");
System.out.println("Connected");

System.out.println(connection.isConnected()); 
```

在我调用 connection.isConnected() 之前一切看起来都很好，这会导致 JVM 崩溃：

```
# An unexpected error has been detected by Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0b1d3cfc, pid=24452, tid=24052
#
# Java VM: Java HotSpot(TM) Client VM (10.0-b22 mixed mode windows-x86)
# Problematic frame:
# C  [ntvinv.dll+0x13cfc] 
```

据我所知，错误报告文件没有显示任何有意义的内容。不幸的是，我无法使用 QC11，因此无法使用 RESTful API。

知道如何解决这个问题吗？

谢谢，马可

# php - 无法使用ajax发送数据

> ID：13087644
> 
> 赞同：0
> 
> 时间：2012-10-26T13:14:09.890
> 
> 标签：php, jquery, ajax

我需要通过 ajax 插入数据，我有两个页面，一个是带有图标的表单，我单击它并将我发送到其他页面并插入新数据

这里是ajax代码

```
<script type="text/javascript">
$(function() {
  $("#dialog1").click(function() {
        $('#welcome').slideToggle('#loginhandle'); 
        $('#loginhandle').show("slow");

      var name = $("input#ausers_ID").val();
      var dataString = 'ausers_ID='+ ausers_ID  ;
        $.ajax({
               type: "POST",
               url: "OpenCashier.php",
               data: dataString,
               success: function(msg) {
                 $('#loginhandle').slideToggle('#msgreturn');
                 $('#msgreturn').show("slow");
                 $('#msgreturn').html(msg)
                .hide()
                .fadeIn(1500, function() {
        });
      }
     });
    return false;
    });

});
</script> 
```

当我点击这个底部

```
<input type="submit" id="dialog1" name="dialog1" value="Insert" /> 
```

我们必须调用这个页面

```
<? session_start();
include("sec.php");
include("../include/connect.php");
include("../include/safe.php");

    if($_POST["dialog1"]){

            // Every thing is OK    
            $ausers_ID=$_POST["ausers_ID"];
            $cashiers_CashierOpenDate=date('Y/m/d');
            $query="INSERT INTO `cashiers` ( `cashiers_CashierID` , `cashiers_CashierOpenDate` , `cashiers_User` , `cashiers_Status` , `cashiers_Delete`  ) VALUES ('', '$cashiers_CashierOpenDate', '$ausers_ID', '0','0');";
            mysql_query($query);
            $num=mysql_affected_rows();         
            if($num==1)
                $message="Account was added successfully";
            else                
                $message=$_POST["dialog1"]." Account is already exists in database";
    }
?> 
```

但是数据不能插入为什么！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:21:08.120

您错过了包含 PHP 代码中使用的“dialog1”参数。

我建议将您的数据更改为发送到：

```
var dataString = {ausers_ID : ausers_ID, dialog1 : true} 
```

# php - 尝试管理类的所有实体时出错

> ID：13087646
> 
> 赞同：-1
> 
> 时间：2012-10-26T13:14:23.277
> 
> 标签：php, entity-framework, yii

当我尝试执行管理操作以列出特定类的所有实例化实体时出现此错误：

> 包括（authenticate.php）：无法打开流：没有这样的文件或目录/home/user/NetBeansProjects/yii/framework/YiiBase.php（423）

```
{
412                             include($classFile);
413                             if(YII_DEBUG && basename(realpath($classFile))!==$className.'.php')
414                                 throw new CException(Yii::t('yii','Class name "{class}" does not match class file "{file}".', array(
415                                     '{class}'=>$className,
416                                     '{file}'=>$classFile,
417                                 )));
418                             break;
419                         }
420                     }
421                 }
422                 else
423                     include($className.'.php');
424             }
425             else  // class name with namespace in PHP 5.3
426             {
427                 $namespace=str_replace('\\','.',ltrim($className,'\\'));
428                 if(($path=self::getPathOfAlias($namespace))!==false)
429                     include($path.'.php');
430                 else
431                     return false;
432             }
433             return class_exists($className,false) || interface_exists($className,false);
434         }
435         return true; 
```

视图文件夹管理文件中的 CGridView

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'utente-crea-evento-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'id',
        'status',
        'username',
        'password', other properties 
```

管理员操作

```
public function actionAdmin()
    {
        $model=new UtenteCreaEvento('search');
        $model->unsetAttributes();  // clear any default values
        if(isset($_GET['UtenteCreaEvento']))
            $model->attributes=$_GET['UtenteCreaEvento'];

        $this->render('admin',array(
            'model'=>$model,
        ));
    } 
```

更多堆栈跟踪信息

```
#0  
+  /home/sigturk/NetBeansProjects/yii/framework/YiiBase.php(423): YiiBase::autoload()
#1  
+  /home/sigturk/NetBeansProjects/yii/framework/YiiBase.php(298): YiiBase::autoload("authenticate")
#2  
+  /home/sigturk/NetBeansProjects/yii/framework/validators/CValidator.php(187): YiiBase::import("authenticate", true)
#3  
+  /home/sigturk/NetBeansProjects/yii/framework/base/CModel.php(285): CValidator::createValidator("authenticate", UtenteCreaEvento, "password", array())
#4  
+  /home/sigturk/NetBeansProjects/yii/framework/base/CModel.php(259): CModel->createValidators()
#5  
+  /home/sigturk/NetBeansProjects/yii/framework/web/helpers/CHtml.php(1871): CModel->getValidators("numTel")
#6  
+  /home/sigturk/NetBeansProjects/yii/framework/web/helpers/CHtml.php(1217): CHtml::activeInputField("text", UtenteCreaEvento, "numTel", array("name" => "UtenteCreaEvento[numTel]", "id" => "UtenteCreaEvento_numTel"))
#7  
+  /home/sigturk/NetBeansProjects/yii/framework/web/widgets/CActiveForm.php(658): CHtml::activeTextField(UtenteCreaEvento, "numTel", array())
#8  
–  /home/sigturk/NetBeansProjects/sitoEventi/protected/views/utenteCreaEvento/_search.php(42): CActiveForm->textField(UtenteCreaEvento, "numTel")
37         <?php echo $form->textField($model,'cognome',array('size'=>60,'maxlength'=>128)); ?>
38     </div>
39 
40     <div class="row">
41         <?php echo $form->label($model,'numTel'); ?>
42         <?php echo $form->textField($model,'numTel'); ?>
43     </div>
44 
45     <div class="row">
46         <?php echo $form->label($model,'numEventiCreati'); ?>
47         <?php echo $form->textField($model,'numEventiCreati'); ?>
#9  
+  /home/sigturk/NetBeansProjects/yii/framework/web/CBaseController.php(127): require("/home/sigturk/NetBeansProjects/sitoEventi/protected/views/utente...")
#10 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CBaseController.php(96): CBaseController->renderInternal("/home/sigturk/NetBeansProjects/sitoEventi/protected/views/utente...", array("model" => UtenteCreaEvento), true)
#11 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CController.php(870): CBaseController->renderFile("/home/sigturk/NetBeansProjects/sitoEventi/protected/views/utente...", array("model" => UtenteCreaEvento), true)
#12 
–  /home/sigturk/NetBeansProjects/sitoEventi/protected/views/utenteCreaEvento/admin.php(40): CController->renderPartial("_search", array("model" => UtenteCreaEvento))
35 
36 <?php echo CHtml::link('Advanced Search','#',array('class'=>'search-button')); ?>
37 <div class="search-form" style="display:none">
38 <?php $this->renderPartial('_search',array(
39     'model'=>$model,
40 )); ?>
41 </div><!-- search-form -->
42 
43 <?php $this->widget('zii.widgets.grid.CGridView', array(
44     'id'=>'utente-crea-evento-grid',
45     'dataProvider'=>$model->search(),
#13 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CBaseController.php(127): require("/home/sigturk/NetBeansProjects/sitoEventi/protected/views/utente...")
#14 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CBaseController.php(96): CBaseController->renderInternal("/home/sigturk/NetBeansProjects/sitoEventi/protected/views/utente...", array("model" => UtenteCreaEvento), true)
#15 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CController.php(870): CBaseController->renderFile("/home/sigturk/NetBeansProjects/sitoEventi/protected/views/utente...", array("model" => UtenteCreaEvento), true)
#16 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CController.php(783): CController->renderPartial("admin", array("model" => UtenteCreaEvento), true)
#17 
–  /home/sigturk/NetBeansProjects/sitoEventi/protected/controllers/UtenteCreaEventoController.php(146): CController->render("admin", array("model" => UtenteCreaEvento))
141         if(isset($_GET['UtenteCreaEvento']))
142             $model->attributes=$_GET['UtenteCreaEvento'];
143 
144         $this->render('admin',array(
145             'model'=>$model,
146         ));
147     }
148 
149     /**
150      * Returns the data model based on the primary key given in the GET variable.
151      * If the data model is not found, an HTTP exception will be raised.
#18 */
+  /home/sigturk/NetBeansProjects/yii/framework/web/actions/CInlineAction.php(50): UtenteCreaEventoController->actionAdmin()
#19 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CController.php(309): CInlineAction->runWithParams(array())
#20 
+  /home/sigturk/NetBeansProjects/yii/framework/web/filters/CFilterChain.php(134): CController->runAction(CInlineAction)
#21 
+  /home/sigturk/NetBeansProjects/yii/framework/web/filters/CFilter.php(41): CFilterChain->run()
#22 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CController.php(1146): CFilter->filter(CFilterChain)
#23 
+  /home/sigturk/NetBeansProjects/yii/framework/web/filters/CInlineFilter.php(59): CController->filterAccessControl(CFilterChain)
#24 
+  /home/sigturk/NetBeansProjects/yii/framework/web/filters/CFilterChain.php(131): CInlineFilter->filter(CFilterChain)
#25 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CController.php(292): CFilterChain->run()
#26 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CController.php(266): CController->runActionWithFilters(CInlineAction, array("accessControl", "postOnly + delete"))
#27 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CWebApplication.php(283): CController->run("admin")
#28 
+  /home/sigturk/NetBeansProjects/yii/framework/web/CWebApplication.php(142): CWebApplication->runController("utenteCreaEvento/admin")
#29 
+  /home/sigturk/NetBeansProjects/yii/framework/base/CApplication.php(162): CWebApplication->processRequest()
#30 
+  /home/sigturk/NetBeansProjects/sitoEventi/index.php(13): CApplication->run() 
```

模型

```
class UtenteCreaEvento extends CActiveRecord
{
    /**
     * Returns the static model of the specified AR class.
     * @param string $className active record class name.
     * @return UtenteCreaEvento the static model class
     */
    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    /**
     * @return string the associated database table name
     */
    public function tableName()
    {
        return 'tbl_utenteCreaEvento';
    }

    /**
     * @return array validation rules for model attributes.
     */
    public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('username, password, nome, cognome, email', 'required'),
            array('status, numTel, numEventiCreati, numFeedPositivi, statoCanone', 'numerical', 'integerOnly'=>true),
            array('username, password, nome, cognome', 'length', 'max'=>128),
                        array('password','length','min'=>6),
            array('password','authenticate'),
                        array('email', 'length', 'max'=>256),
            array('email', 'email'),
                        array('numTel, numEventiCreati, numFeedPositivi, statoCanone','safe'),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('id, status, username, nome, cognome, numTel, numEventiCreati, numFeedPositivi, email, statoCanone, dataCreazioneProfilo', 'safe', 'on'=>'search'),
        );
    }

    /**
     * @return array relational rules.
     */
    public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'eventiCreati' => array(self::HAS_MANY, 'Evento', 'creatoDa'),
            'fotoCaricate' => array(self::HAS_MANY, 'Foto', 'caricataDaUtenteEventi'),
        );
    }

    /**
     * @return array customized attribute labels (name=>label)
     */
    public function attributeLabels()
    {
        return array(
            'id' => 'ID',
            'status' => 'Status',
            'username' => 'Username',
            'password' => 'Password',
            'nome' => 'Nome',
            'cognome' => 'Cognome',
            'numTel' => 'Num Tel',
            'numEventiCreati' => 'Num Eventi Creati',
            'numFeedPositivi' => 'Num Feed Positivi',
            'email' => 'Email',
            'statoCanone' => 'Stato Canone',
            'dataCreazioneProfilo' => 'Data Creazione Profilo',
        );
    }

    /**
     * Retrieves a list of models based on the current search/filter conditions.
     * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
     */
    public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id,true);
        $criteria->compare('status',$this->status);
        $criteria->compare('username',$this->username,true);
        $criteria->compare('password',$this->password,true);
        $criteria->compare('nome',$this->nome,true);
        $criteria->compare('cognome',$this->cognome,true);
        $criteria->compare('numTel',$this->numTel);
        $criteria->compare('numEventiCreati',$this->numEventiCreati);
        $criteria->compare('numFeedPositivi',$this->numFeedPositivi);
        $criteria->compare('email',$this->email,true);
        $criteria->compare('statoCanone',$this->statoCanone);
        $criteria->compare('dataCreazioneProfilo',$this->dataCreazioneProfilo,true);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    }

        /**
     * This is invoked before the record is saved.
     * @return boolean whether the record should be saved.
     */
    protected function beforeSave()
    {
              if ($this->isNewRecord)
                $this->dataCreazioneProfilo = new CDbExpression('NOW()');
              $this->status = 0;
              $this->statoCanone = 0;

            return parent::beforeSave();
        } 
```

控制器

```
public function actionView($id)
    {
        $this->render('view',array(
            'model'=>$this->loadModel($id),
        ));
    }

    /**
     * Creates a new model.
     * If creation is successful, the browser will be redirected to the 'view' page.
     */
    public function actionCreate()
    {
        $model=new UtenteCreaEvento;

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['UtenteCreaEvento']))
        {
            $model->attributes=$_POST['UtenteCreaEvento'];
            if($model->save())
                $this->redirect(array('view','id'=>$model->id));
        }

        $this->render('create',array(
            'model'=>$model,
        ));
    }

    /**
     * Updates a particular model.
     * If update is successful, the browser will be redirected to the 'view' page.
     * @param integer $id the ID of the model to be updated
     */
    public function actionUpdate($id)
    {
        $model=$this->loadModel($id);

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['UtenteCreaEvento']))
        {
            $model->attributes=$_POST['UtenteCreaEvento'];
            if($model->save())
                $this->redirect(array('view','id'=>$model->id));
        }

        $this->render('update',array(
            'model'=>$model,
        ));
    }

    /**
     * Deletes a particular model.
     * If deletion is successful, the browser will be redirected to the 'admin' page.
     * @param integer $id the ID of the model to be deleted
     */
    public function actionDelete($id)
    {
//      $this->loadModel($id)->delete();
                $utentecreaEvento = new UtenteCreaEvento();
                $utentecreaEvento = UtenteCreaEvento::model()->find('id',$id);
                $utentecreaEvento->status = 0;

        // if AJAX request (triggered by deletion via admin grid view), we should not redirect the browser
        if(!isset($_GET['ajax']))
            $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array('admin'));
    }

    /**
     * Lists all models.
     */
    public function actionIndex()
    {
        $dataProvider=new CActiveDataProvider('UtenteCreaEvento');
        $this->render('index',array(
            'dataProvider'=>$dataProvider,
        ));
    }

    /**
     * Manages all models.
     */
    public function actionAdmin()
    {
        $model=new UtenteCreaEvento('search');
        $model->unsetAttributes();  // clear any default values
        if(isset($_GET['UtenteCreaEvento']))
            $model->attributes=$_GET['UtenteCreaEvento'];

        $this->render('admin',array(
            'model'=>$model,
        ));
    }

    /**
     * Returns the data model based on the primary key given in the GET variable.
     * If the data model is not found, an HTTP exception will be raised.
     * @param integer the ID of the model to be loaded
     */
    public function loadModel($id)
    {
        $model=UtenteCreaEvento::model()->findByPk($id);
        if($model===null)
            throw new CHttpException(404,'The requested page does not exist.');
        return $model;
    }

    /**
     * Performs the AJAX validation.
     * @param CModel the model to be validated
     */
    protected function performAjaxValidation($model)
    {
        if(isset($_POST['ajax']) && $_POST['ajax']==='utente-crea-evento-form')
        {
            echo CActiveForm::validate($model);
            Yii::app()->end();
        }
    } 
```

仅当我尝试管理此类的实体时才会出现这种错误，但所有其他类型的操作都不会产生任何问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:47:59.573

在您指定的验证规则中`array('password','authenticate'),`。所以要么模型应该包含一个名为的函数`authenticate()`，要么你必须添加一个`authenticate`从`CValidator`.

# wpf - Caliburn.Micro 和自定义依赖属性不起作用

> ID：13087647
> 
> 赞同：1
> 
> 时间：2012-10-26T13:14:24.257
> 
> 标签：wpf, mvvm, caliburn.micro

我正在使用 Caliburn.Micro 框架来构建我的应用程序。我正在尝试创建一个从 WPF 工具包图表派生的自定义图表控件，它需要添加 2 个自定义依赖项属性。

出于某种原因，Caliburn.Micro 没有正确绑定到我创建的 DP，但对现有的 DP 运行良好。CM 需要做些什么来识别这些附加属性吗？

（在我的示例中，绑定`Title="{Binding ChartSeriesType}"`工作正常。`ChartData`和`ChartType`没有被更新。）

SampleChart.xaml.cs

```
public partial class SampleChart : Chart
{
    public ChartSeriesType ChartType
    {
        get { return (ChartSeriesType)GetValue(ChartTypeProperty); }
        set
        {
            SetValue(ChartTypeProperty, value);
            dataChaged();
        }
    }

    // Using a DependencyProperty as the backing store for ChartType.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ChartTypeProperty =
        DependencyProperty.Register("ChartType", typeof(ChartSeriesType), typeof(SampleChart), new UIPropertyMetadata(null));

    public AgilityTableBase ChartData
    {
        get { return (AgilityTableBase)GetValue(ChartDataProperty); }
        set
        {
            SetValue(ChartDataProperty, value);
            dataChaged();
        }
    }

    // Using a DependencyProperty as the backing store for ChartData.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ChartDataProperty =
        DependencyProperty.Register("ChartData", typeof(AgilityTableBase), typeof(SampleChart), new UIPropertyMetadata(null));

    private void dataChaged()
    {
        Console.WriteLine("data changed");
    } 
} 
```

SampleChartView.xaml：

```
<UserControl x:Class="Agility.Presentation.ReportViewing.SampleChartView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:cal="http://www.caliburnproject.org"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:local="clr-namespace:Agility.Presentation.ReportViewing"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" d:DesignHeight="300"
         d:DesignWidth="300" mc:Ignorable="d">
<local:SampleChart Title="{Binding ChartSeriesType}" ChartData="{Binding ReportTable}" ChartType="{Binding ChartSeriesType}" /> 
```

SampleChartViewModel.cs：

```
public class SampleChartViewModel : PropertyChangedBase
{
    private ChartSeriesType _chartType;
    private SampleTableBase _reportTable;

    public SampleChartViewModel(SampleTableBase reportTable)
    {
        _reportTable = reportTable;
    }

    public SampleTableBase ReportTable
    {
        get { return _reportTable; }
        set
        {
            _reportTable = value;
            this.NotifyOfPropertyChange(() => ReportTable);
        }
    }

    public ChartSeriesType ChartSeriesType
    {
        get { return _chartType; }
        set
        {
            _chartType = value;
            this.NotifyOfPropertyChange(() => ChartSeriesType);
        }
    }
} 
```

**编辑**

正确的注册方法`ChartType DependencyProperty`是：

```
// Using a DependencyProperty as the backing store for ChartType.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ChartTypeProperty =
        DependencyProperty.Register("ChartType", typeof(ChartSeriesType), typeof(AgilityChart), new UIPropertyMetadata(ChartSeriesType.Bar
            , new PropertyChangedCallback(dataChanged)));

    private static void dataChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        Console.WriteLine("data changed");
    } 
```

现在，`dataChanged()`正在调用该方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:31:05.903

我在您的代码中看到的一个错误是您将`dataChaged()`调用添加到您的属性设置器。这个二传手只是给你一个方便。它不会被绑定调用。为了响应依赖属性更改设置回调委托`UIPropertyMetadata`，您在注册 dp 时传递。

此外，`UIPropertyMetadata`构造函数的第一个参数是属性的默认值，`ChartSeriesType`看起来像一个枚举，因此在不合适的默认值中为 null。

接下来是 dp 所有者类型设置为`AgilityChart`并且应该是`SampleChart`，因为那是您的类名。

# c# - 更改列表视图中的颜色线

> ID：13087648
> 
> 赞同：4
> 
> 时间：2012-10-26T13:14:25.333
> 
> 标签：c#, winforms, listview, ado.net

如何更改列表视图中的颜色线。例如`if line == 4`然后`line is red`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T13:23:09.357

如果您想浏览整个列表并有条件地为每个项目着色，那么您可以使用：

```
foreach (ListViewItem lvw in myListView.Items)
{
    if (lvw.SubItems[x].ToString() == "True")
    {
        lvw.BackColor = Color.Red;
    }
} 
```

或者，如果您总是想为索引 4 处的项目着色：

```
myListView.Items[4].BackColor = Color.Red; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:16:32.913

答案可能像下面这样简单吗？

```
listView1.Items[3].BackColor = Color.Red; 
```

# javascript - jQuery hide() 后 div 闪烁一次

> ID：13087654
> 
> 赞同：0
> 
> 时间：2012-10-26T13:14:44.317
> 
> 标签：javascript, jquery, animation, hide, blink

我目前正在制作一个小导航菜单。在其中一个下拉菜单中，我需要一个类别来扩展。有用。但是，当类别在 jQuery .hide('slow') 的帮助下收回时，我要隐藏的菜单在隐藏动画结束时闪烁一次，然后被正确隐藏。

下面是一些代码来说明我的问题：

```
$(document).ready(function(){

    var verif = false;

        $("a").hover(function() {

        var texte = $(this).text();
        var tab = new Array;
        tab = texte.split("      ");
            if (tab[0] === "+ Deroule" && verif === false) {
                    $("#submenu").show("slow");
                    verif = true;
            }
            else if (tab[0] === "+ Deroule" && verif === true) {
                        $("#submenu").hide(8000);

 //There, I can clearly see, at the end of the hide animation, the previously opened content blinking once before it hides completely.

                                                     verif = false;
                }                                               
        }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:13:02.197

如果没有看到您的 HTML/CSS，很难真正确定问题 -*提示提示*创建一个小提琴*提示提示*:) - 但如果我是你，我要做的第一件事是将`.hover()`方法更改为`.mouseenter()`and `.mouseleave()`(NOT `.mousein()`and `.mouseout()`- 那是另一个关于 IE 支持的对话——如果你不熟悉，你可以/应该在 jQuery 的网站上查看）。

为什么要这样做？该`.hover()`方法实际上只是`.mouseenter()`/的简写，`.mouseleave()`但由于各种原因（包括它不像两个完整方法那样被广泛支持的事实），它有时无法正常工作。我不能保证这就是这种情况下的问题，但是，特别是因为这似乎是一个浏览器问题，所以最好回到基础并从尽可能多的支持开始。

**编辑：**

看到您简化的小提琴后，我想我对您的问题和您正在尝试做的事情有了更好的理解。我以前也遇到过同样的问题，根据我的经验，我可以告诉你，这实际上是一个难以解释的问题。

`.show()`使用, , slide 和 fade 方法显示/隐藏元素时会跳转`.hide()`，因为一旦动画完成，它们就会从流程中移除（在大多数浏览器中 - 不是 chrome - 显示/隐藏方法不会导致元素缩小一直到什么都没有，所以仍然有波动）。这是我最近针对此问题的两个解决方案：

在一种情况下，我的任务是在菜单中创建多视图和少视图按钮，这将使元素一次出现/消失一个平滑。如果您只是尝试在要显示的集合上调用显示/隐藏、滑动或淡入淡出方法，它们将同时进行动画处理，并且在尝试使它们在回调时运行时会发生同样的事情。此外，滑动方法不起作用，因为该动画将一次在多个项目上调用，从而导致大量开销并使效果在较慢的浏览器中不稳定（甚至在 FF 中有点）。显示/隐藏方法在某些浏览器中有效，因为它们实际上确实减小了元素的大小，但在其他浏览器中它们不稳定，因此它们被淘汰了（实际上，它们的动画在所有浏览器中都没有“完整” - 见上文）。因此，我有三个选择：

*解决方案 1：* 最初的计划是（在给定的规格下）当时最好的解决方案，是使用 animate 方法简单地滑动包装器`div`（`overflow`设置为`hidden`向上或向下，基于目标元素的偏移量在列表中）。这很好用，但是我被要求通过淡入淡出效果让每个元素连续消失。如果您确实选择了这种方法，那么我建议您改用幻灯片方法 - 因为您不是试图显示更多/更少的链接，这应该不是问题（是的，我知道这听起来可能不像查看更多/更少链接将是一个问题，但我必须实现它的方式，幻灯片确实会导致问题）。

*解决方案 2：* 单独使用淡入淡出是一个问题，因为所有东西仍然会同时淡出，即使它们没有淡出，一旦淡出完成，动画仍然会跳跃。因此，我需要解决的第一个问题是同时运行的动画。由于开销，使用计时器是不可能的，所以我编写了一个函数，在计算调用之间的必要延迟之后递归调用集合中每个元素的淡入淡出（基于提供的速度参数，以及要褪色）。接下来，我仍然必须在动画完成后解决跳跃问题。为了解决这个问题，我实现了该`.fadeTo()`方法，从而在动画之后将元素保留在文档流中。然而，这确实导致了另外两个问题：

1.  IE 不支持该`.fadeTo()`方法（可能在 9 和 10 - 我不记得了）
2.  动画结束后，由于元素没有从流中移除，所以有很多空白空间

为了解决第一个问题，我为 IE 添加了一个特定于浏览器的方法，一旦它们的淡出完成，它将每个元素的属性设置为`display`和`block`它们- 它也在它们的淡入开始之前执行相反的操作。 `visibility``hidden`

我通过使用我之前描述的动画方法解决了第二个问题。为了完成这项工作，我必须编写另一个辅助方法，根据给定的动画速度和显示/隐藏的元素数量计算容器需要滑动的速度。

我知道这是很多细节，但我希望它可以帮助您确定如何最好地解决这个问题。

在您推进实施时，如果您有任何问题或需要任何澄清，请告诉我。祝你好运！:)

# mongodb - MongoDB 聚合查询

> ID：13087657
> 
> 赞同：2
> 
> 时间：2012-10-26T13:14:53.537
> 
> 标签：mongodb, output, aggregation-framework

在 MongoDB 中，我有一个集合：

```
Statistics
{
    UserID:  int          //User id
    Url: string           //Url
    Clicks: [DateTime]    //A time array    
} 
```

当用户单击 url 时，在 Clicks 数组中添加单击日期的日期。我的问题是如何编写聚合查询，例如获取从 [date1] 到 [date2] 的点击次数并按 UserID 分组？如何将，输出到文件？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:18:31.847

假设您有这样的数据（请参阅底部如何生成此数据）：

```
{ "_id": ObjectId("508ab0e27bb16229520c9561"), "userid": 0, "url": "", "clickDate": ISODate("20120101T12:01:00Z") }
{ "_id": ObjectId("508ab0e27bb16229520c9562"), "userid": 1, "url": "", "clickDate": ISODate("20120202T12:01:00Z") }
{ "_id": ObjectId("508ab0e27bb16229520c9563"), "userid": 2, "url": "", "clickDate": ISODate("20120303T12:01:00Z") }
{ "_id": ObjectId("508ab0e27bb16229520c9564"), "userid": 3, "url": "", "clickDate": ISODate("20120404T11:01:00Z") }
{ "_id": ObjectId("508ab0e27bb16229520c9565"), "userid": 4, "url": "", "clickDate": ISODate("20120505T11:01:00Z") } 
```

这是聚合函数：

```
db.test.aggregate( {
                      $match: {
                        clickDate: { $gte: new Date(2012,8,30,12,0,0) }
                      }
                    },
                    {
                      $group: {
                        _id: "$userid",
                        clicks: { $sum: 1 }
                      }
                    }
                 ); 
```

确保你`$match`有`$group`. 请参阅[早期过滤](http://docs.mongodb.org/manual/applications/aggregation/#early-filtering)。

结果：

```
{
  "result": [
    { "_id": 8,
      "clicks": 1
    },
    { "_id": 7,
      "clicks": 2
    },
    { "_id": 6,
      "clicks": 2
    },
    { "_id": 3,
      "clicks": 2
    },
    { "_id": 2,
      "clicks": 2
    },
    { "_id": 1,
      "clicks": 2
    },
    { "_id": 4,
      "clicks": 2
    },
    { "_id": 0,
      "clicks": 2
    },
    { "_id": 5,
      "clicks": 2
    },
    { "_id": 9,
      "clicks": 1
    }
  ],
  "ok": 1
} 
```

使用此循环生成数据：

```
// d=days, m=months (for ISODate months start from 0, while days from 1) 
for (var i = 0, d = 1, m = 0, id = 0; i < 100; i++, d++, m++, id++) {
  if (d > 30){
    d=1;
  }
  if (m > 10){
    m=0;
  }
  if (id > 9){
    id=0;
  }
  db.test.insert({userid: id, url:"", clickDate: new Date(2012,m,d,12,1,0)});
} 
```

# visual-studio-2010 - 我们如何使用 Visual Studio 2010 编译 OpenHaptics v3.0？

> ID：13087671
> 
> 赞同：1
> 
> 时间：2012-10-26T13:15:33.150
> 
> 标签：visual-studio-2010, visual-studio, compiler-construction, compilation

我想用 Visual Studio 2010 编译我的触觉应用程序，但 OpenHaptics v3.0 的学术版仅支持 Visual Studio 2005 编译器。

VS2005 没有任何问题，我可以毫无问题地编译和运行我的应用程序，但是由于其他库，我想迁移到 VS2010。

有什么方法可以将 VS2010 与 OpenHaptics® v3.0 一起使用。hl.lib 和 hd.lib 的唯一问题，我可以用 VS2010 成功重新编译 hdu.lib 和 hlu.lib，但我不知道如何用 VS2010 编译 hl.lib 和 hd.lib。

我从 1 年以来一直在考虑使用 vs2010，但仍然没有成功，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:41:30.470

如果您安装 Daffodil，您可以将 VS 2010 IDE 与 VS 2005 构建工具一起使用：http: [//daffodil.codeplex.com](http://daffodil.codeplex.com)

# android - MediaMetadataRetriever getFrameAtTime 检索视频帧

> ID：13087673
> 
> 赞同：1
> 
> 时间：2012-10-26T13:15:35.850
> 
> 标签：android

```
 private void sample(){
        int FRAME_BYTES=326;
        int FRAMESMAX=36;
        String subFolder="media";
        String mediafileName="sample.mp4";
        MediaMetadataRetriever mediaMetadata=new MediaMetadataRetriever();

        try{
            AssetFileDescriptor afd=getApplicationContext().getAssets().openFd(subFolder+File.separator+mediaFileName);
            ;

            mediaMetadata.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());

            Bitmap frame=null;
            for(int currentFrame=0;currentFrame<FRAMESMAX; currentFrame++){

                if(currentFrame<=0){ 
                    frame = mediaMetadata.getFrameAtTime();
                }else{
                    frame =   mediaMetadata.getFrameAtTime(FRAME_BYTES*currentFrame*1000, MediaMetadataRetriever.OPTION_CLOSEST_SYNC );
                    //currentFrame++;
                }
                // do some thing with frame
            }
        }catch(Exception e){
            Log.i(TAG, "  unable to get file descriptor of the frame"+e.toString());
        }
    }
} 
```

我能够在模拟器和其他设备上从 mp4 媒体文件中读取帧，但三星 Galaxy S III 抛出错误并指出

`MediaMetadataRetriever getFrameAttime failed to retrieve video frames`.

对此有任何意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:13:24.137

要获取数据源，您可以使用：

```
mediaMetadata.setDataSource(Environment.getExternalStorageDirectory().getPath()+"your_folder/your_file"); 
```

# php - mbfpdf 不起作用

> ID：13087674
> 
> 赞同：0
> 
> 时间：2012-10-26T13:15:36.707
> 
> 标签：php, pear, fpdf

我尝试制作一个包含一些日文字符的 pdf 文件。但是，输出文件是一些奇怪的字符。我使用 mbfpdf 而不是 fpdf。

```
<?php
define('FPDF_FONTPATH','fpdf/font/');
require('fpdf/mbfpdf.php');

$pdf=& new MBFPDF('P','mm','A4');

$pdf->AddMBFont(GOTHIC ,'EUC-JP');
$pdf->AddPage();
$pdf->SetFont(GOTHIC,'',20);
$pdf->Write(20,'日本語');
$pdf->Output('test.pdf');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:25:28.923

在 head 标签内添加以下行

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

如果您在执行 mysql 查询后收到垃圾文本，请先执行以下两个查询。

```
SET NAMES utf8
SET CHARACTER SET utf8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:28:50.137

您可以使用 utf8_decode() 转换为 ISO-8859-1（有些不准确）：

```
 $str = utf8_decode($str); 
```

或者如果 iconv 扩展可用（首选）：

```
 $str = iconv('UTF-8', 'windows-1252', $str); 
```

# assembly - Visual Studio Express 和宏汇编器包括

> ID：13087679
> 
> 赞同：1
> 
> 时间：2012-10-26T13:15:48.863
> 
> 标签：assembly, visual-studio-express, masm

我同时拥有 Visual Studio Express 2012 和 Vicual C++ Express 2010。我使用它们的 32 位 MASM 编译器 (ml.exe) 得到了相同的结果。*我不知道，但我怀疑非快递用户可能有同样的问题。*

我正在尝试用 MASM 编译一个小程序。显然我需要包括`masm32rt.inc`. 编译器抱怨它找不到这样的文件，实际上我的系统上似乎没有它。经过一番搜索，我设法找到了该文件的一个版本，但结果却是我没有的更多`include`-s 和-s 文件。`includelib`

我试过`include \masm32\include\masm32rt.inc`, `include \masm32\include\windows.inc`,`include windows.inc`和`include masm32rt.inc`. 我尝试使用 Visual Studio Express 命令提示符为 2010 和 2012 编译它们，并使用`> ml test.asm`. 我尝试搜索这些文件，但我的电脑上没有它们。我确实有一些（大约 30 个）`.inc`文件，比如`macamd64.inc`and `mm.inc`，但它们似乎都不包含我需要的东西：Windows 函数和常量的声明。

有什么我想念的吗？谷歌没有提供太多帮助。大多数教程都假设我有这些文件。但话又说回来，大多数教程都以从[masm32.com](http://www.masm32.com/)下载 MASM 的说明开始。我不能使用我已经拥有的任何 MASM 编译器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:26:42.337

不，ml 只是汇编程序。除非您想重新发明轮子并创建所有包含和导入库，否则您需要安装 masm32。它包括所需的包含、导入库、结构、等式等...它将让您的生活更轻松

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-28T15:59:59.743

您尝试编译的代码使用*MASM32*宏和/或*MASM32*库。这意味着它是为*MASM32*构建的。*MASM32宏和库在**Visual Studio*中不可用，因为*MASM32*是不同的*MASM*兼容（在一定程度上）编译器。您必须至少拥有所需的包含文件才能成功编译该代码。

# javascript - 更改背景图片 onClick

> ID：13087684
> 
> 赞同：-1
> 
> 时间：2012-10-26T13:15:56.270
> 
> 标签：javascript, jquery, html, css, responsive-design

如何使用 jquery 或 java 脚本更改背景图像 onClick？

例如：我有六（6）张图像，当我单击“>”（下一个箭头）时，我想更改为下一个背景图像，并在单击“<”（后退箭头）时更改为上一个背景图像。

我正在使用响应式 html5 和 css3 开发这个网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:25:55.207

您可以在数组中列出您的图像，然后在单击时更改背景图像 css 属性：

```
var images = ['url("image1.png")', ...], curIndex = 0;

// Left arrow selector
$('.left-arrow').click(function () {
    if (curIndex > 0) {
        // Container selector
        $('#container').css('background-image', images[--curIndex]);
    }
});

// Right arrow selector
$('.right-arrow').click(function () {
    if (curIndex < images.length - 1) {
        // Container selector
        $('#container').css('background-image', images[++curIndex]);
    }
}); 
```

HTML 将是：

```
<div id="container">
    <img class="left-arrow" src="image-path" />
    <img class="right-arrow" src="image-path" />
<div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:24:32.933

如果您不想使用任何其他 3rd 方库：

```
$("#YourElementId").css("background-image", "url('http://url.com/image1.jpg')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:26:24.370

```
$("#id").on("click", function () {
    $(this).css("background-image", "url(/url/to/background/image.jpg)");
}); 
```

# python - 导入 paramiko 时出现“密码”的 ValueError

> ID：13087693
> 
> 赞同：1
> 
> 时间：2012-10-26T13:16:09.003
> 
> 标签：python, windows, paramiko, python-3.3

我想在 win 7 32bit 上安装 paramiko，python 是 3.3。我可以编译它，但得到以下错误：

```
Installed c:\python33\lib\site-packages\paramiko-1.8.0-py3.3.egg
Processing dependencies for paramiko==1.8.0
Searching for pycrypto==2.6
Best match: pycrypto 2.6
Adding pycrypto 2.6 to easy-install.pth file

Using c:\python33\lib\site-packages
Finished processing dependencies for paramiko==1.8.0

C:\Users\MC\Downloads\paramiko-paramiko-v1.8.0-9-g786920a>python
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:55:48) [MSC v.1600 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import paramiko
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File ".\paramiko\__init__.py", line 62, in <module>
    from .transport import SecurityOptions, Transport
  File ".\paramiko\transport.py", line 68, in <module>
    class SecurityOptions (object):
ValueError: 'ciphers' in __slots__ conflicts with class variable
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T12:40:48.960

Paramiko 不能在 Python 3 上运行。然而。我正在开发一个分支 ( [https://github.com/dorianpula/paramiko/tree/python3-support](https://github.com/dorianpula/paramiko/tree/python3-support) ) 以添加对 Python 3 的支持，并且我正在努力解决这个特定问题。

# c# - ASP.NET Web.sitemap 生成 sitemap.xml

> ID：13087696
> 
> 赞同：2
> 
> 时间：2012-10-26T13:16:13.883
> 
> 标签：c#, asp.net, webforms, seo, web.sitemap

基本上，我正在尝试找到一种方法来设置处理程序，以便在有人访问[http://www.example.com/sitemap.xml](http://www.example.com/sitemap.xml) web.sitemap xml 时运行。当用户或机器人点击该 url 时，我想在我的解决方案中提取我的本地 Web.sitemap 文件并生成 sitemap.xml 语法。此语法必须符合[https://www.sitemaps.org/protocol.html](https://www.sitemaps.org/protocol.html)语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:37:51.290

我总是更喜欢编写自己的代码，而不是使用库，在可能的情况下并在前一段时间这样做过 - 现在找不到代码，尽管本教程会让你继续前进。它基本上是读取站点地图，然后使用这些信息创建一个新的谷歌站点地图。

您还可以扩展它以添加您在数据库中可能拥有的任何页面。真的超越极限:)

它在 C# 和 VB 中都有

[这是教程| 动态创建谷歌站点地图 aspnet](http://www.mikesdotnetting.com/article/94/create-a-google-site-map-with-asp-net)

# jquery - 如果列表项包含 x 元素，则添加类

> ID：13087698
> 
> 赞同：0
> 
> 时间：2012-10-26T13:16:13.960
> 
> 标签：jquery, css

有一个快点，希望。我在下面包含了这两个列表项。RoyalHtmlContent 的字体颜色为灰色，但如果它在 royalSlide 列表项中有royalImage，我需要字体颜色为白色。

```
<li class="royalSlide" style="height: 420px; width: 610px; ">
<div class="royalHtmlContent">Text</div>
</li>

<li class="royalSlide" style="height: 420px; width: 610px; ">
<img class="royalImage" src="#" width="610" height="420" style="margin-left: 0px; margin-top: 0px; ">
<div class="royalHtmlContent royalHtmlContentOverlay">Text text text</div>
</li> 
```

我试过这个，但它不起作用......它只是将类（它将具有白色字体颜色的样式）应用于所有的royalHtmlContent。只有当它在列表中也有 RoyalImage 时，我才需要它来执行此操作。

```
if ($('.royalSlide').has('.royalImage')) {
    $('.royalHtmlContent').addClass('royalHtmlContentOverlay');
} 
```

在此先感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:24:53.963

您的代码不起作用有两个原因（优先）

*   一个 jQuery 选择总是返回一个选择，而不是一个虚假的值，所以总是满足条件
*   if 中使用的选择独立于 if 中的选择。

首先选择图像。如果选择为空，则链的其余部分将不执行任何操作

```
$(".royalSlide > .royalImage").next("div.royalHtmlContent")
                              .addClass('royalHtmlContentOverlay'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:23:31.000

```
$('img.royalImage').next('div.royalHtmlContent').addClass('royalHtmlContentOverlay'); 
```

认为这也可以吗？基本上只是寻找所有的，如果那里有一个，向 div 添加一个类，您可以在其中使用 css 对其进行样式设置。

# sql-server-2005 - 计算列还是索引视图？

> ID：13087699
> 
> 赞同：2
> 
> 时间：2012-10-26T13:16:20.777
> 
> 标签：sql-server-2005

我有一个列部分 # 可以包含许多非字母数字字符。我经常需要将来自客户或供应商的零件编号与我们的数据进行比较。我已经使用仅返回字母数字的用户定义函数成功地做到了这一点。我通过在索引视图上创建一个名为 stripPartNum 的计算列来提高性能。我想将此计算列移动到表中。

我无法将计算列创建为持久化，因此我可以在该列上创建索引。
错误：无法保留表“inventory”中的计算列“stripPartNum”，因为该列是不确定的。

我创建了一个不使用 patIndex 的新用户定义函数，但仍然有同样的问题。这是功能：

```
Create FUNCTION [dbo].[anOnly]
(
@string VARCHAR(900)
)
RETURNS VARCHAR(900)

AS
BEGIN

Declare @pos int,@newString varchar(1000),@charAt char(1)
Set @pos = 0
Set @newString = ''

while @pos <= len(@string)
    begin
    Set @charAt = substring(@string,@pos,1)
    if @charAt not like '[^0-9A-Za-z]'
        Set @newString = @newString + @charAt
    Set @pos = @pos + 1
    end

return @newString
END 
```

为什么我可以在视图中的计算列上创建索引，但不能在表上创建索引？有没有我忽略的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:02:50.577

Ah, I just found the answer. My function must be schema bound.

# javascript - 是什么导致它返回 NaN？

> ID：13087711
> 
> 赞同：0
> 
> 时间：2012-10-26T13:16:39.643
> 
> 标签：javascript

这应该是一个简单的订单计算器，但由于某种原因它无法正常工作。这是代码：

```
var name, product, price, discount, quantity;

var name = prompt("What is your name?", "Enter name");
var sentence = "Hello " + name + " please look through our available products and services before placing your order.";
alert(sentence);

var product = prompt("Please enter the name of the product you are looking to purchase from the table.", "Enter product");
var quantity = 1*prompt("How many " + product + " would you like to purchase?", "Enter quantity");

var cost = price * quantity;
var orderdiscount = price * discount * quantity;
var totalcost = cost - orderdiscount;

a = confirm(+ name + ", you ordered " + quantity + " of " + product + ". Is this correct?");

if (a) {
    total = cost - (price * discount * quantity);
        if (product === "ice cream cake") {
                price = 20;
                discount = .15;
        } else if (product === "ice cream cone") {
                price = 3;
                discount = .01;
        } else if (product === "small ice cream sundae") {
                price = 5;
                discount = .05;
        } else if (product === "large ice cream sundae") {
                price = 6;
                discount = .05;
        } else if (prompt = ("Sorry, " + name + ". You entered an invalid product. Refresh the page to reload and place the order again.")) {
        }
        }

else 
{
    alert("Refresh the page to reload and place a new order");
}

document.write("Thank you for placing an order with us, " + name + ".");
document.write("</br>");
document.write("The cost of buying " + quantity + " of " + product + " is " + cost + ".");
document.write("</br>");
document.write("The discount for this purchase is " + orderdiscount + ".");
document.write("</br>");
document.write("With the discount, your total order cost is " + totalcost + "."); 
```

当我加载页面并输入所有必要信息时，它会返回：

“感谢您向我们下订单。购买 1 个冰淇淋蛋糕的成本为 NaN。此次购买的折扣为 NaN。加上折扣后，您的总订单成本为 NaN。”

应该有计算数字来代替那些 NaN。这段代码中的什么导致这种情况发生？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T13:19:17.600

在设置变量的值之前，您正在进行计算。

```
 var cost = price * quantity;  <-- calculation here
    ....

    total = cost - (price * discount * quantity);  <-- calculation here
    if (product === "ice cream cake") {
            price = 20;
            discount = .15;  <-- setting variable here
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T13:19:42.290

我会说这是因为 的值`price`没有在任何地方设置，并且在使用时未定义。

因此，当您计算时，`cost`您将乘以`price`（未定义）`quantity`，因此您不会得到有效的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:30:25.720

在返回值上使用 parseInt(..)：

```
prompt("How many " + product + " would you like to purchase?", "Enter quantity") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T13:26:47.047

主要问题我可以在为其分配值之前使用价格变量看到它的成本变量，首先只需简单地添加`var cost = price * quantity;`这种`var cost = function(){return price*quantity;};` 方式，每次调用成本时它都会重新计算价格*数量，而不是在文件的顶部在您完成操作以获取价格之前。发生这种情况是因为直到这里`if (product === "ice cream cake") { price = 20; discount = .15; } else if (product === "ice cream cone") { price = 3; discount = .01;`价格和折扣都是空的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T13:19:48.483

您在`cost`设定价格之前进行计算。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T13:22:20.713

`price`对于开球来说是未定义的，但即便如此，如果用户要订购`a dozen`或`twelve`代替`12`他/她订购的任何物品，您仍然会得到一个`NaN`when `quantity = 1*'a dozen';`。检查用户输入始终是必要的

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-26T13:20:59.200

是因为你没有公布价格吗？如果它不是您的用户所需的字段。把它藏起来。

约拿

# asp.net-mvc-3 - 为什么 Visual Studio 不会在这个未处理的异常上中断？

> ID：13087712
> 
> 赞同：4
> 
> 时间：2012-10-26T13:16:40.730
> 
> 标签：asp.net-mvc-3, visual-studio-2010, debugging

提交表单时，即使在 Visual Studio 的调试模式下也会出现黄屏死机。我遇到的问题已解决，它是缺少资源值，但我对为什么我无法打破异常感兴趣。

我尝试了以下方法，但没有改变这种情况：

*   单步执行代码。
*   更改`Debug -> Exceptions`设置。
*   检查`Enable .NET Framework source stepping`和`Enable source server support`。

这样的异常怎么能被捕获，或者为什么不能捕获呢？

> **说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> **异常详细信息：** System.ArgumentNullException：值不能为空。参数名称：值
> 
> **源错误：**
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> **堆栈跟踪：**

```
[ArgumentNullException: Value cannot be null.
Parameter name: value]
   System.ComponentModel.DataAnnotations.ValidationContext.set_DisplayName(String value) +52015
   System.Web.Mvc.<Validate>d__1.MoveNext() +135
   System.Web.Mvc.<Validate>d__5.MoveNext() +318
   System.Web.Mvc.DefaultModelBinder.OnModelUpdated(ControllerContext controllerContext, ModelBindingContext bindingContext) +139
   System.Web.Mvc.DefaultModelBinder.BindComplexElementalModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Object model) +66
   System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +1367
   System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +449
   System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +317
   System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +117
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:00:34.050

不可能打破这个异常，因为微软的公共符号服务器不提供所有东西的源代码。

通过对话框添加断点`System.ComponentModel.DataAnnotations.ValidationContext.set_DisplayName`会中断，但 Visual Studio 会说没有可用的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:20:35.920

看起来你有一些模型字段的 dataAnnotationAttribute，所以 asp.net 会处理它 - 在你的请求在控制器中触发断点之前

# delphi - 有没有办法在 Delphi 中实例化所需数量的对象，而无需迭代？

> ID：13087713
> 
> 赞同：4
> 
> 时间：2012-10-26T13:16:43.787
> 
> 标签：delphi, delphi-2007

我认为 C++ 支持以下内容：

```
Object objects[100]; 
```

这将实例化 100 个对象，对吗？是否可以在 Delphi（特别是 2007 年）中做到这一点？除了：

```
for i:=0 to 99 do
  currentObject = TObject.Create; 
```

或使用该`Allocate`函数，传递的大小值是大小的一百倍`TObject`，因为这只是分配内存，它实际上并没有划分内存并将其“分配”给对象。如果我假设 c++ 实例化是即时的而不是引擎盖下的迭代，我很抱歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T13:35:54.507

您正在寻找的东西是不可能的，因为

*   Delphi 不支持静态（堆栈分配）对象。
*   Delphi 对象没有可以由编译器自动调用的默认构造函数。

所以这并不是缺少“糖语法”。

* * *

为了完整披露：

*   Delphi 还支持允许静态分配对象的遗留“旧对象模型”（Turbo Pascal 对象模型）；
*   动态对象分配本身并不会阻止自动对象实例化语法，但会使这种语法不受欢迎；
*   自动对象实例化语法是不可能的，因为 Delphi 没有默认构造函数：Delphi 编译器从不隐式实例化对象，因为它不知道调用什么构造函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T14:08:19.467

虽然你不能用对象做你想做的事，但如果你的对象比较简单，你也许可以通过使用记录数组来得到你想要的。

Delphi 中的记录可以具有属性（包括 setter 和 getter），以及类和实例方法。它们在声明时自动创建，因此声明它们的数组将在不迭代的情况下创建它们。

欲了解更多信息：[http](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Records_.28advanced.29) ://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Records_.28advanced.29 。

（我不确定新功能何时添加到 Delphi，可能是在 2007 版本之后）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T13:25:28.887

除了迭代之外，我不知道有任何非 hacky 方法可以做到这一点：

```
var
  MyObjects: array[0..99] of TMyObject;
  i: Integer;
begin
  for i := 0 to 99 do
    MyObjects[i] := TMyObject.Create;
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T13:42:20.790

该声明不会创建 100 个对象，它只会为您提供一个包含 100 个对象引用的数组，这些引用没有任何用处。

创建对象是一个两步过程。第一步是分配内存（您的代码也没有），第二步是调用构造函数（Create 方法）来初始化该内存，创建其他对象等。

分配部分可以在没有循环的情况下完成，但是需要调用构造函数来初始化每个实例。

许多 VCL 类没有额外的构造函数。他们只有一个什么都不做的空构造函数。在这种情况下，没有必要调用它。

例如，要获取字符串列表数组，您可以使用以下代码，[根据此示例进行调整](http://www.nldelphi.com/forum/showpost.php?p=250168&postcount=17)：

```
type
  TStringListArray = array of TStringList;v
var
  Instances: array of Byte;

function GetStringLists(Number: Integer): TStringListArray;
var
  i: Integer;
begin
  // Allocate instance memory for all of them
  SetLength(Instances, Number * TStringList.InstanceSize);
  // Zero the memory.
  FillChar(Instances[0], Length(Instances), 0);
  // Allocate array for object references.
  SetLength(Result, Number);

  for i := 0 to High(Result) do
  begin
    // Store object reference.
    Result[i] := @Instances[i * TStringList.InstanceSize];
    // Set the right class.
    PPointer(Result[i])^ := TStringList;
    // Call the constructor. 
    Result[i].Create;
  end;
end; 
```

并获得一个包含 100 个字符串列表的数组：

```
var
  x: TStringListArray;
begin
  x := GetStringLists(100); 
```

因此，虽然此过程可以为您节省可忽略的时间，并且理论上可能更节省内存（更少碎片），但您仍然需要循环。没有捷径。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-27T04:55:36.323

这在 Delphi 中**有些**可能（但在 Delphi 环境中不是很实用，除非您正在编写自定义内存管理器）。创建对象实例是一个两步过程 - 为对象分配内存，并在该内存中构造对象的成员。没有什么需要单独分配给定对象的内存。您可以分配更大的内存块并在该块内构造多个对象，利用 Delphi 的一个特性，如果它是从实例变量而不是类类型调用的，则它像普通方法一样调用构造函数，例如：

```
var
  objects: array of Byte;
  obj: TSomeClass;
begin
  SetLength(objects, 100 * TSomeClass.InstanceSize); 
  FillChar(objects[0], 0, Length(objects));
  for i := 0 to 99 do
  begin
    obj := TSomeClass.InitInstance(@objects[i * TSomeClass.InstanceSize]));
    obj.Create;
  end;
  ...
  for i := 0 to 99 do
  begin
    obj := TSomeClass(@objects[i * TSomeClass.InstanceSize]);
    obj.CleanupInstance;
  end;
  SetLength(objects, 0);
end; 
```

这与 C++ 在声明对象实例数组时在幕后所做的没有太大区别，只有 C++ 支持静态声明数组，并且会自动调用构造函数和析构函数，而 Delphi 不支持。

有许多第三方实现允许您在堆栈或用户定义的缓冲区中分配对象，例如：

[堆栈上的对象：德尔福遗物](http://rmarsh.com/2005/08/28/objects-on-the-stack-a-delphi-relic/)

[在堆栈上、指定内存地址或通过任何内存管理器分配对象](http://www.kbasm.com/delphi-stack-local-object.html)

仅举一对夫妇的名字。

# android - 如何设置多个每日闹钟？

> ID：13087715
> 
> 赞同：3
> 
> 时间：2012-10-26T13:16:59.950
> 
> 标签：android

我想在我的 android 应用程序中设置多个每日警报，因为我正在制作这样的演示代码

```
Intent i = new Intent(this, AlarmReceiver.class);
PendingIntent pi = PendingIntent.getBroadcast(this, 0, i,PendingIntent.FLAG_ONE_SHOT);

Calendar calendar = Calendar.getInstance();
calendar.add(Calendar.MINUTE, 1);

AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 30000, pi); 
```

我给了 30000 毫秒作为间隔，所以我认为应该每 30 秒重复一次。但不重复。在我启动应用程序 1 分钟后响起一次是我错了吗？我应该怎么做才能在我的应用程序中设置多个每日警报？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:36:05.737

我认为你的问题在于你`PendingIntent`的标志`FLAG_ONE_SHOT`，所以你只能设置一次警报。如果您想重复警报，请尝试使用 flag `FLAG_UPDATE_CURRENT`。

来源：http: [//developer.android.com/reference/android/app/PendingIntent.html](http://developer.android.com/reference/android/app/PendingIntent.html)

# ajax - phonegap api调用不起作用

> ID：13087717
> 
> 赞同：0
> 
> 时间：2012-10-26T13:17:16.843
> 
> 标签：ajax, cordova

我有一个在 localhost:3000 上运行的 rails api。在我的 phonegap 应用程序上，我试图通过 api 登录，但它给出了一个错误（“错误”）并且没有访问 api。跨域请求可能有问题，但据说在移动设备中没有这样的事情。互联网正在工作。

我的阿贾克斯：

```
$.ajax({
        url: 'localhost:3000/api/v1/login',
        type: "POST",
        dataType: "json",
        data : {username:"demo",password:"demo"},
        success: function(data) {
           navigator.notification.alert("ok");
        },
        error: function(xhr, textStatus, errorThrown) {
              console.log("Error status " + status);
        }
}); 
```

编辑 2 - 已解决

您必须使用本地 IP，例如。192.168.2.2 并在 ExternalHosts 键的 Cordova.plist 中添加主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:25:07.193

这是因为当您在设备/模拟器上运行此代码时使用“localhost”，然后“localhost”指的是设备/模拟器本身，而不是包含您的 rails API 的 Web 服务器。您需要将“localhost”切换到服务器的 IP 地址或主机名。

# java - 与初始 UI 起始帧结合时，游戏类帧事件处理丢失

> ID：13087721
> 
> 赞同：0
> 
> 时间：2012-10-26T13:17:22.710
> 
> 标签：java, swing, concurrency, event-dispatching

我正在为我的大学项目开发​​一个 java 游戏。游戏由用户界面（用于选择播放/操作方法/高分等）和游戏本身组成。UI 和游戏完全分开运行，但我无法将它们结合起来。虽然，我已经能够将两者结合起来。但是当通过 UI 访问游戏时，游戏会丢失所有事件处理（因此卡在“按空格键继续”）

检查以下代码，请帮助：

**这是 Game 类（绘制并显示游戏）**

```
package AllPanels;

import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.RenderingHints;
import java.awt.Window;
import java.awt.event.*;
import javax.swing.ImageIcon;

public class BailoutGame extends Core implements MouseListener, MouseMotionListener, KeyListener {

    public static void main(String args[]) {
        System.out.println("inside main");
        new BailoutGame().run();
        System.out.println("outside main");
    }
    private Image map,t1,t2,t3,t4,t5,scope,background,stopwatch,hitmarker,shot;
    int x=329,y=30,escapePressCount, xShot,yShot,xMarker,yMarker,xBullet,yBullet,xTargetMedian,yTargetMedian,xMarkerMedian,yMarkerMedian;
    int totalBullets=15,bulletsCounter,bulletsLeft,killCounter=1,targetShotCounter=3;
    private boolean spaceBar,escapePressed,t1Shot;
    String msg="",space="Press Space-Bar To Start";

    @Override
    public void init(){
        System.out.println("inside game init");
        super.init();
        Window w = s.getFullScreenWindow();
        w.addKeyListener(this);
        w.addMouseListener(this);
        w.addMouseMotionListener(this);
        System.out.println("outside game init");
    }

    @Override
    public synchronized void draw(Graphics2D g) {
        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);     
        Window w = s.getFullScreenWindow();
        map = new ImageIcon("/home/vivek/Projects/Java/GameRenderingTest/src/ImagesFolder/Map.png").getImage();
        scope = new ImageIcon("/home/vivek/Projects/Java/GameRenderingTest/src/ImagesFolder/Sniper Scope.png").getImage();
        t1 = new ImageIcon("/home/vivek/Projects/Java/GameRenderingTest/src/ImagesFolder/Target 1.png").getImage();
        t2 = new ImageIcon("/home/vivek/Projects/Java/GameRenderingTest/src/ImagesFolder/t2.png").getImage();
        background = new ImageIcon("/home/vivek/Projects/Java/GameRenderingTest/src/ImagesFolder/background.png").getImage();
        stopwatch = new ImageIcon("/home/vivek/Projects/Java/GameRenderingTest/src/ImagesFolder/Stopwatch.png").getImage();
        hitmarker = new ImageIcon("/home/vivek/Projects/Java/GameRenderingTest/src/ImagesFolder/HitMarker.png").getImage();
        shot = new ImageIcon("/home/vivek/Projects/Java/GameRenderingTest/src/ImagesFolder/Shot.png").getImage();

        g.drawImage(map, 0, 0, null);
        if(t1Shot == false){
            g.drawImage(t1,247,255,null);
        }
        g.drawImage(scope, x-1366,y-768,null);
        g.drawImage(stopwatch,1366-200,25,null);
        g.drawImage(hitmarker,-7,409,null);
        g.setColor(w.getForeground());
        g.drawString(PointSystem.displayPoints,50,50);
        if(spaceBar){
            g.drawString(GameTimer.time, 1250, 125);
        }
        if(t1Shot){
            if(PointSystem.headshot){
                xMarkerMedian = (62 + 124) / 2;
                yMarkerMedian = (426 + 530) / 2;
            }
            if(PointSystem.bodyshot){
                xMarkerMedian = (2 + 184) / 2;
                yMarkerMedian = (530 + 766) / 2;
            }
            g.drawImage(shot,xMarkerMedian+xMarker,yMarkerMedian+yMarker,null);
        }
        if(spaceBar == false ){
            g.setColor(w.getBackground());
            g.fillRect(0, 0, 1366, 768);
            g.setColor(w.getForeground());
            g.drawString(space, 550, 500);
        }
    }

    @Override
    public void mouseReleased(MouseEvent e) { }

    @Override
    public void mouseClicked(MouseEvent e) { }

    @Override
    public void mouseEntered(MouseEvent e) { }

    @Override
    public void mouseExited(MouseEvent e) { }

    @Override
    public void mouseDragged(MouseEvent e) { }

    @Override
    public void keyTyped(KeyEvent e) { }

    @Override
    public void keyReleased(KeyEvent e) { }

    @Override
    public void mousePressed(MouseEvent e) { 
        PointSystem.headshot = false;
        PointSystem.bodyshot = false;
        xShot = e.getX();
        yShot = e.getY();
        bulletsCounter++;
        bulletsManager(bulletsCounter);
        if((xShot >= 237) && (yShot >=247) && (xShot <= 282) && (yShot <= 298)){
            target1(xShot,yShot);
        }
    }

    @Override
    public void mouseMoved(MouseEvent e) {
        x = e.getX();
        y = e.getY();
    }

    @Override
    public void keyPressed(KeyEvent e) {
        if(e.getKeyCode() == KeyEvent.VK_ESCAPE){
            stop();
            if((escapePressCount % 2) != 0 && escapePressCount != 0 )
                escapePressed = true;
            else
                escapePressed = false;

            escapePressCount++;
        }
        if(e.getKeyCode() == KeyEvent.VK_SPACE){
            GameTimer.watchStart = System.currentTimeMillis();
            GameTimer.chronometer.start();
            spaceBar = true;
        }
    }

    public void target1(int xShot, int yShot) {

            }
        }
        PointSystem.TotalPoint(targetShotCounter);
    }

    public void bulletsManager(int bulletsCounter) {
        bulletsLeft = totalBullets - bulletsCounter;
        if(bulletsLeft==0){
            //GameOver Dialog.
        }
    }
} 
```

**核心类（完成所有后端工作）。**

```
package AllPanels;

import java.awt.*;

public class Core {

    private static final DisplayMode modes[] = {
        new DisplayMode(800,600,32,0),
        new DisplayMode(800,600,24,0),
        new DisplayMode(800,600,16,0),
        new DisplayMode(1366,768,32,0),
        new DisplayMode(1366,768,24,0),
        new DisplayMode(1366,768,16,0),
    };
    private boolean running;
    protected ScreenManager s;

    public void stop(){
        running = false;
    }

    public void run(){
        System.out.println("inside run");
        try{
            init();
            gameLoop();
        }finally{
            s.restoreScreen();
        }
        System.out.println("outside run");
    }

    public void init(){
        System.out.println("inside Core init");
        s = new ScreenManager();
        DisplayMode dm = s.findFirstCompatibleMode(modes);
        s.setFullScreen(dm);               
        Window w = s.getFullScreenWindow();
        w.setFont(new Font("ubuntu",Font.PLAIN,20));
        w.setBackground(Color.BLACK);
        w.setForeground(Color.WHITE);
        running = true;       

        Toolkit toolkit = Toolkit.getDefaultToolkit();
        Image cursorImage = toolkit.getImage("Scope.png");
        Point cursorHotSpot = new Point(0,0);
        Cursor customCursor = toolkit.createCustomCursor(cursorImage, cursorHotSpot, "Cursor");
        w.setCursor(customCursor);

        GameTimer.watchStart = System.currentTimeMillis();
        System.out.println("outside Core init");
    }

    public void gameLoop(){
        System.out.println("inside gameLoop");
        long startingTime = System.currentTimeMillis();
        long cumTime = startingTime;
        while(running){
            long timePassed = System.currentTimeMillis() - cumTime;
            cumTime += timePassed;
            update(timePassed);
            Graphics2D g = s.getGraphics();
            draw(g);
            g.dispose();
            s.update();
            try{
                Thread.sleep(20);
            }
            catch(Exception ex){}
        }
        System.out.println("outside gameLoop");
    }

    public void update(long timePassed) {}

    public void draw(Graphics2D g) {};
} 
```

**最后一段代码：这是我需要从中访问游戏的 UI 框架中的面板**

```
package AllPanels;

import java.awt.Cursor;
import java.awt.Graphics2D;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.util.Random;
import javax.swing.SwingWorker;

public class LoadingPanel extends javax.swing.JPanel implements PropertyChangeListener  {
     public static Task task;

    @Override
    public void propertyChange(PropertyChangeEvent evt) {
         if ("progress".equals(evt.getPropertyName())) {
            int progress = (Integer) evt.getNewValue();
            loadingBar.setValue(progress);
        } 
    } 
     public class Task extends SwingWorker<Void, Void> {
        @Override
        public Void doInBackground() {
            Random random = new Random();
            setProgress(0);
            for(int progress=0;progress<=100;progress++) {
                if(progress==2){
                    loadingLabel.setEnabled(true);
                }
                else if(progress==4){
                    detailsLabel.setEnabled(true);
                }
                else if(progress==7){
                    nameLabel.setText(""+MainFrame.playerName.toUpperCase());
                    nameLabel.setEnabled(true);
                }
                else if(progress==10){
                    if(AllPanels.MapPanel.mapNumber==1){
                        aoLabel.setText("BAILOUT");
                    }
                    aoLabel.setEnabled(true);
                }
                else if(progress==13){
                    missionLabel.setText("Find and Eliminate the 5 targets silently");
                    missionLabel.setEnabled(true);                           
                }
                else if(progress==16){
                    etaLabel.setText("03:00 Minutes");
                    etaLabel.setEnabled(true);   
                    loadingLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Loading Objects.png")));
                }
                else if(progress==31){
                    loadingLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Loading Shadows.png")));
                }
                else if(progress==46){
                    loadingLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Loading Sounds.png")));
                }
                else if(progress==61){
                    loadingLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Loading Targets.png")));
                }
                else if(progress==71){
                    loadingLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Loading AI.png")));
                }
                else if(progress==91){
                    loadingLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Loading Weapons.png")));
                }
                else if(progress==100){
                    loadingLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Done.png")));
                }
                try {
                    Thread.sleep(random.nextInt(500));
                } catch (InterruptedException e) {}
                setProgress(Math.min(progress, 100));
            }
            return null;
        }
        public void done(){
            setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
            startGameButton.setEnabled(true);
        }
    }

    public LoadingPanel() {
        initComponents();      
    }

    private void initComponents() {

        loadingBarCoverLabel = new javax.swing.JLabel();
        loadingBar = new javax.swing.JProgressBar();
        loadingStartButton = new javax.swing.JButton();
        detailsLabel = new javax.swing.JLabel();
        detailsCoverLabel = new javax.swing.JLabel();
        nameLabel = new javax.swing.JLabel();
        aoLabel = new javax.swing.JLabel();
        missionLabel = new javax.swing.JLabel();
        etaLabel = new javax.swing.JLabel();
        loadingLabel = new javax.swing.JLabel();
        startGameButton = new javax.swing.JButton();
        bgLabel = new javax.swing.JLabel();

        setOpaque(false);
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        loadingBarCoverLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Progress Bar Cover.png"))); 
        add(loadingBarCoverLabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(25, 300, 820, 30));

        loadingBar.setBackground(new java.awt.Color(255, 255, 255));
        loadingBar.setFont(new java.awt.Font("BankGothic Md BT", 0, 24)); // NOI18N
        loadingBar.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(51, 153, 255), 2));
        loadingBar.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        loadingBar.setStringPainted(true);
        add(loadingBar, new org.netbeans.lib.awtextra.AbsoluteConstraints(25, 300, 820, 30));

        loadingStartButton.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Start Off.png"))); 
        loadingStartButton.setBorder(null);
        loadingStartButton.setDisabledIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Start Disabled.png"))); 
        loadingStartButton.setPressedIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Start Pressed.png"))); 
        loadingStartButton.setRolloverIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Start On.png")));
        loadingStartButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                loadingStartButtonActionPerformed(evt);
            }
        });
        add(loadingStartButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(475, 20, 125, 40));

        detailsLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Details.png"))); 
        detailsLabel.setDisabledIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Details disabled.png"))); 
        detailsLabel.setEnabled(false);
        add(detailsLabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(15, 90, 185, 170));
        detailsLabel.getAccessibleContext().setAccessibleDescription("");

        detailsCoverLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Text Cover.png"))); 
        add(detailsCoverLabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 90, 800, 170));

        nameLabel.setFont(new java.awt.Font("BankGothic Md BT", 0, 30));
        nameLabel.setForeground(new java.awt.Color(153, 191, 211));
        nameLabel.setEnabled(false);
        nameLabel.setVerticalTextPosition(javax.swing.SwingConstants.TOP);
        add(nameLabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 85, 800, 40));

        aoLabel.setFont(new java.awt.Font("BankGothic Md BT", 0, 30)); 
        aoLabel.setForeground(new java.awt.Color(153, 191, 211));
        aoLabel.setToolTipText("");
        aoLabel.setEnabled(false);
        add(aoLabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 130, 800, 40));

        missionLabel.setFont(new java.awt.Font("BankGothic Md BT", 0, 30)); 
        missionLabel.setForeground(new java.awt.Color(153, 191, 211));
        missionLabel.setEnabled(false);
        add(missionLabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 175, 800, 40));

        etaLabel.setFont(new java.awt.Font("BankGothic Md BT", 0, 30)); 
        etaLabel.setForeground(new java.awt.Color(153, 191, 211));
        add(etaLabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 220, 800, 40));

        loadingLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Loading Buildings.png"))); 
        loadingLabel.setDisabledIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Loading Disabled.png")));
        loadingLabel.setEnabled(false);
        add(loadingLabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(475, 260, 385, 40));

        startGameButton.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/StartGame Off.png"))); 
        startGameButton.setDisabledIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/StartGame Disabled.png"))); 
        startGameButton.setEnabled(false);
        startGameButton.setOpaque(false);
        startGameButton.setPressedIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/StartGame Pressed.png"))); 
        startGameButton.setRolloverIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/StartGame On.png"))); 
        startGameButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                startGameButtonActionPerformed(evt);
            }
        });
        add(startGameButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(860, 20, 140, 70));

        bgLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UserInterface/Loading Panel/Loading Page.png")));
        add(bgLabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));
    }                       

    private void loadingStartButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                   
        this.remove(loadingBarCoverLabel);
        MainFrame.backButton.setEnabled(false);
        loadingStartButton.setEnabled(false);
        setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
        task = new Task();
        task.addPropertyChangeListener(this);
        task.execute();
    }                                                  

    private void startGameButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                
        if(MapPanel.mapNumber==1){
            new BailoutGame().run();
        }
    }                                                          
    public static javax.swing.JLabel aoLabel;
    private javax.swing.JLabel bgLabel;
    private javax.swing.JLabel detailsCoverLabel;
    public static javax.swing.JLabel detailsLabel;
    public static javax.swing.JLabel etaLabel;
    public static javax.swing.JProgressBar loadingBar;
    public static javax.swing.JLabel loadingBarCoverLabel;
    public static javax.swing.JLabel loadingLabel;
    private javax.swing.JButton loadingStartButton;
    public static javax.swing.JLabel missionLabel;
    public static javax.swing.JLabel nameLabel;
    public static javax.swing.JButton startGameButton;               
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:54:06.473

扫描源代码，我一直在寻找您在哪里有多个线程并且没有看到它，尽管我可能错过了那部分。但是，您描述的症状是一种经典行为，其中需要多个线程的应用程序是单线程的，因此线程执行正在从某些操作中停止，例如在轮询设备或从某个源读取输入时。

在我看来，Core 确实应该扩展 Thread。看看[这篇关于并发和多线程的文章](http://docs.oracle.com/javase/tutorial/essential/concurrency)。

# matlab - 在Matlab中计算[a1 a2 a3 ... an]的所有两个元素和

> ID：13087729
> 
> 赞同：2
> 
> 时间：2012-10-26T13:17:45.367
> 
> 标签：matlab, for-loop, vector, sum

背景：我正在使用 Matlab 处理 Project Euler[问题 23](http://projecteuler.net/problem=23)，以练习我几乎不存在的编程技能。

我的问题：

现在我有一个包含大约 6500 个数字（范围从 12 到 28122）作为元素的向量，并且想要计算所有两个元素的总和。也就是说，我只需要每个总和的一个实例，因此计算了 a1 + an 后，就不必计算 an + a1。

编辑澄清：这包括总和 a1+a1、a2+a2、...、an+an。

问题是这太慢了。

问题特定约束：

无需计算总和 28123 或以上是给定的，因为这些不能用于进一步解决问题。

我的做法：

```
AbundentNumberSumsRaw=[];
for i=1:3490
    AbundentNumberSumsRaw=[AbundentNumberSumRaw AbundentNumbers(i)+AbundentNumbers(i:end);
end 
```

这非常有效：p

我的评论：

我很确定逐渐增加向量 AbundentNumbersRaw 是不好的编码，因为这意味着内存使用量会不必要地飙升。我没有这样做，因为a）我不知道要预先分配什么大小的向量，b）我无法想出一种方法来有序地将总和注入 AbundentNumbersRaw 而不使用一些丑陋的嵌套循环。

"for i=1:3490" 低于元素的数量，仅仅是因为我检查并看到索引高于 3490 的数字的所有结果总和对于我来说太大而无法使用。

我很确定我的主要问题是程序需要对向量 AbundentNumbersRaw 进行大量增量增加。

任何和所有的帮助和建议将不胜感激:)

干杯

拉斯穆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:19:33.100

认为

```
a = 28110*rand(6500,1)+12; 
```

然后

```
sums = [
 a(1) + a(1:end)
 a(2) + a(2:end)
 ... 
]; 
```

是您要进行的计算。

您还声明应丢弃值超过 28123 的总和。

这可以这样概括：

```
% Compute all 2-element sums without repetitions
C = arrayfun(@(x) a(x)+a(x:end), 1:numel(a), 'uniformoutput', false);
C = cat(1, C{:});

% discard sums exceeding threshold
C(C>28123) = []; 
```

或使用循环

```
% Compute all 2-element sums without repetitions
E = cell(numel(a),1);
for ii = 1:numel(a)
    E{ii} = a(ii)+a(ii:end); end
E = cat(1, E{:});

% discard sums exceeding threshold
E(E>28123) = []; 
```

简单的测试表明这`arrayfun`比循环要快一些，所以我会选择这个`arrayfun`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:31:45.017

由于您的主要问题是找出给定集合中的哪些整数可以写为不同集合的两个整数的总和，所以我会选择不同的方法：

```
AbundantNumbers = 1:6500; % replace with the list you generated somewhere else
maxInteger = 28122;
AbundantNumberSum(1:maxInteger) = true; % logical array

for i = 1:length(AbundantNumbers)
  sumIndices = AbundantNumbers(i) + AbundantNumbers;
  AbundantNumberSum(sumIndices(sumIndices <= maxInteger)) = false;
end 
```

不幸的是，这不是对您的问题的回答，而是对您的问题的回答；-) 对于 MatLab 解决原始问题的方法，请参阅 Rody Oldenhuis 的优雅回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T14:39:38.193

我的方法如下：

```
v = 1:3490;   % your vector here
s = length(v);
result = zeros(s);  % preallocate memory

for m = 1:s
     result(m,m:end) = v(m)+v(m:end);    
end 
```

您将获得一个由 3490 x 3490 元素组成的矩阵，其中一半以上为 0。

# ruby - Ruby：Random#rand 和 Kernel#rand 之间的区别

> ID：13087730
> 
> 赞同：5
> 
> 时间：2012-10-26T13:17:49.530
> 
> 标签：ruby, random

Random#rand 和 Kernel#rand 之间真的有区别吗？

从我可以看到他们使用不同的'C'函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:25:41.077

它看起来像一个稍微不同的 API，但两者似乎都将实际生成留给了`genrand_real`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-27T03:53:33.270

当用 a 调用时，它们的行为相同`Range`，但在其他几种情况下则不同。

1.  当用负整数*-n*（如 -3）调用时，`Random#rand` raises `ArgumentError`，而`Kernel#rand`只是表现得好像你用*n*（by `(-n).to_int.abs`）调用它。
2.  当用*0*调用时，`Random#rand`raises `ArgumentError`，而 `Kernel#rand`只是表现得好像你在没有任何参数的情况下调用它。
3.  `Float` *当使用n*调用时，返回一个介于 0 和*n*`Random#rand`之间的浮点数（如预期的那样）。进行转换，例如等价于，它总是返回 0；等价于，因此等价于。*`Kernel#rand``n.to_int.abs``rand(-1.9)``rand(1)``rand(0.1)``rand(0)``rand`*

 *似乎`Random#rand`（`Random::rand`当然也）比`Kernel#rand`奇怪的参数更健壮。[`Kernel#rand`](https://ruby-doc.org/core-2.4.1/Kernel.html#method-i-rand)和的文档中的更多信息[`Random#rand`](https://ruby-doc.org/core-2.4.1/Random.html#method-i-rand)。*

# java - Spring Security Kerberos/SPNEGO 扩展错误“访问被拒绝”

> ID：13087731
> 
> 赞同：0
> 
> 时间：2012-10-26T13:17:59.417
> 
> 标签：java, spring-security, spnego

我在使用 Spring Security Kerberos/SPNEGO Extension 示例时遇到了麻烦。我在用：

*   窗口 2008
*   雄猫 7
*   Spring Security Kerberos/SPNEGO 扩展
*   1.7 jdk1.7.0_09

我正在使用此博客设置示例： http: [//blog.springsource.com/2009/09/28/spring-security-kerberos/](http://blog.springsource.com/2009/09/28/spring-security-kerberos/) 所以我开始：在 Windows 2008 服务器中，我使用命令创建了主体：

```
C:\>ktpass -princ HTTP/XENA2.mydomain.org@MYDOMAIN.ORG -pass xena2 -mapuser MYDOMAIN\xena2 -out c:\xena2.keytab -kvno 0 -ptype KRB5_NT_PRINCIPAL -mapop set -crypto All 
```

并得到了这个结果：

```
Targeting domain controller: SERVAS.mydomain.org
Using legacy password setting method
Successfully mapped HTTP/XENA2.mydomain.org to xena2.
Key created.
Key created.
Key created.
Key created.
Key created.
Output keytab to c:\xena2.keytab:
Keytab version: 0x502
keysize 59 HTTP/XENA2.mydomain.org@MYDOMAIN.ORG ptype 1 (KRB5_NT_PRINCIPAL) vno 0 etype 0x1 (DES-CBC-CRC) keylength 8 (0xa8fbb6cde346579e)
keysize 59 HTTP/XENA2.mydomain.org@MYDOMAIN.ORG ptype 1 (KRB5_NT_PRINCIPAL) vno 0 etype 0x3 (DES-CBC-MD5) keylength 8 (0xa8fbb6cde346579e)
keysize 67 HTTP/XENA2.mydomain.org@MYDOMAIN.ORG ptype 1 (KRB5_NT_PRINCIPAL) vno 0 etype 0x17 (RC4-HMAC) keylength 16 (0x9200ac342847bbeb60bdc8a5821a5fac)
keysize 83 HTTP/XENA2.mydomain.org@MYDOMAIN.ORG ptype 1 (KRB5_NT_PRINCIPAL) vno 0 etype 0x12 (AES256-SHA1) keylength 32 (0x904dbaf53675f18254aaacdcef91cd29f5bb0a3d10919b983c76b9f00014d966)
keysize 67 HTTP/XENA2.mydomain.org@MYDOMAIN.ORG ptype 1 (KRB5_NT_PRINCIPAL) vno 0 etype 0x11 (AES128-SHA1) keylength 16 (0x56fd36768f184efeb729eb8b22c4c168) 
```

之后，我将 xena2.keytab 文件复制到计算机（XENA2）并测试与服务器的连接：

```
C:\>kinit HTTP/XENA2.mydomain.org@MYDOMAIN.ORG -k -t xena2.keytab
New ticket is stored in cache file C:\Users\xena2\krb5cc_xena2 
```

直到现在对我来说都很好。

向 Tomcat 启动添加变量：

```
-Djava.security.krb5.conf=C:\krb5.conf
-Djava.security.krb5.realm=MYDOMAIN.ORG
-Djava.security.krb5.kdc=servas.MYDOMAIN.ORG 
```

在 C: 磁盘中创建文件**krb5.conf ：**

```
[libdefaults]
    default_realm = MYDOMAIN.ORG
    default_tkt_enctypes = aes128-cts rc4-hmac des3-cbc-sha1 des-cbc-md5 des-cbc-crc
    default_tgs_enctypes = aes128-cts rc4-hmac des3-cbc-sha1 des-cbc-md5 des-cbc-crc
    permitted_enctypes   = aes128-cts rc4-hmac des3-cbc-sha1 des-cbc-md5 des-cbc-crc

[realms]
    MYDOMAIN.ORG  = {
        kdc = servas.mydomain.org 
        default_domain = MYDOMAIN.ORG
}

[domain_realm]
    .MYDOMAIN.ORG = MYDOMAIN.ORG 
```

像这样更新**spnego.xml**文件：

```
<property name="servicePrincipal" value="HTTP/XENA2.mydomain.org@MYDOMAIN.ORG" />
<property name="keyTabLocation" value="classpath:xena2.keytab" /> 
```

也试过：

```
<property name="keyTabLocation" value="FILE:C:/xena2.keytab" /> 
```

将项目部署到 tomcat 运行它（在与服务器不同的计算机上），进入受限位置，写入用户并通过并得到 HTTP 500 错误。日志文件看起来像这样（有点清理）：

```
2012-10-26 15:48:25 Commons Daemon procrun stdout initialized
Root WebApplicationContext: initialization started 
Refreshing Root WebApplicationContext: startup date [Fri Oct 26 15:48:28 EEST 2012]; root of context hierarchy 
Loading XML bean definitions from ServletContext resource [/WEB-INF/spnego.xml] 
Using JAXP provider [com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl] 
Loading schema mappings from [META-INF/spring.schemas] 
Loaded schema mappings: {http://www.springframework.org/schema/util/spring-util.xsd=org/springframework/beans/factory/xml/spring-util-3.0.xsd, http://www.springframework.org/schema/task/spring-task.xsd=org/springframework/scheduling/config/spring-task-3.0.xsd, http://www.springframework.org/schema/security/spring-security-2.0.2.xsd=org/springframework/security/config/spring-security-2.0.2.xsd, http://www.springframework.org/schema/aop/spring-aop-3.0.xsd=org/springframework/aop/config/spring-aop-3.0.xsd, http://www.springframework.org/schema/aop/spring-aop-2.0.xsd=org/springframework/aop/config/spring-aop-2.0.xsd, http://www.springframework.org/schema/tool/spring-tool-2.5.xsd=org/springframework/beans/factory/xml/spring-tool-2.5.xsd, http://www.springframework.org/schema/beans/spring-beans.xsd=org/springframework/beans/factory/xml/spring-beans-3.0.xsd, http://www.springframework.org/schema/jee/spring-jee-2.5.xsd=org/springframework/ejb/config/spring-jee-2.5.xsd, http://www.springframework.org/schema/aop/spring-aop.xsd=org/springframework/aop/config/spring-aop-3.0.xsd, http://www.springframework.org/schema/beans/spring-beans-2.0.xsd=org/springframework/beans/factory/xml/spring-beans-2.0.xsd, http://www.springframework.org/schema/beans/spring-beans-3.0.xsd=org/springframework/beans/factory/xml/spring-beans-3.0.xsd, http://www.springframework.org/schema/security/spring-security-2.0.1.xsd=org/springframework/security/config/spring-security-2.0.1.xsd, http://www.springframework.org/schema/task/spring-task-3.0.xsd=org/springframework/scheduling/config/spring-task-3.0.xsd, http://www.springframework.org/schema/security/spring-security-2.0.xsd=org/springframework/security/config/spring-security-2.0.xsd, http://www.springframework.org/schema/security/spring-security-3.0.xsd=org/springframework/security/config/spring-security-3.0.xsd, http://www.springframework.org/schema/tx/spring-tx-2.5.xsd=org/springframework/transaction/config/spring-tx-2.5.xsd, http://www.springframework.org/schema/context/spring-context-2.5.xsd=org/springframework/context/config/spring-context-2.5.xsd, http://www.springframework.org/schema/tool/spring-tool-3.0.xsd=org/springframework/beans/factory/xml/spring-tool-3.0.xsd, http://www.springframework.org/schema/tx/spring-tx.xsd=org/springframework/transaction/config/spring-tx-3.0.xsd, http://www.springframework.org/schema/tool/spring-tool-2.0.xsd=org/springframework/beans/factory/xml/spring-tool-2.0.xsd, http://www.springframework.org/schema/util/spring-util-2.5.xsd=org/springframework/beans/factory/xml/spring-util-2.5.xsd, http://www.springframework.org/schema/lang/spring-lang.xsd=org/springframework/scripting/config/spring-lang-3.0.xsd, http://www.springframework.org/schema/lang/spring-lang-2.5.xsd=org/springframework/scripting/config/spring-lang-2.5.xsd, http://www.springframework.org/schema/security/spring-security-2.0.4.xsd=org/springframework/security/config/spring-security-2.0.4.xsd, http://www.springframework.org/schema/jee/spring-jee-3.0.xsd=org/springframework/ejb/config/spring-jee-3.0.xsd, http://www.springframework.org/schema/jee/spring-jee-2.0.xsd=org/springframework/ejb/config/spring-jee-2.0.xsd, http://www.springframework.org/schema/security/spring-security.xsd=org/springframework/security/config/spring-security-3.0.xsd, http://www.springframework.org/schema/context/spring-context.xsd=org/springframework/context/config/spring-context-3.0.xsd, http://www.springframework.org/schema/jee/spring-jee.xsd=org/springframework/ejb/config/spring-jee-3.0.xsd, http://www.springframework.org/schema/aop/spring-aop-2.5.xsd=org/springframework/aop/config/spring-aop-2.5.xsd, http://www.springframework.org/schema/tx/spring-tx-2.0.xsd=org/springframework/transaction/config/spring-tx-2.0.xsd, http://www.springframework.org/schema/tx/spring-tx-3.0.xsd=org/springframework/transaction/config/spring-tx-3.0.xsd, http://www.springframework.org/schema/context/spring-context-3.0.xsd=org/springframework/context/config/spring-context-3.0.xsd, http://www.springframework.org/schema/tool/spring-tool.xsd=org/springframework/beans/factory/xml/spring-tool-3.0.xsd, http://www.springframework.org/schema/util/spring-util-3.0.xsd=org/springframework/beans/factory/xml/spring-util-3.0.xsd, http://www.springframework.org/schema/lang/spring-lang-3.0.xsd=org/springframework/scripting/config/spring-lang-3.0.xsd, http://www.springframework.org/schema/util/spring-util-2.0.xsd=org/springframework/beans/factory/xml/spring-util-2.0.xsd, http://www.springframework.org/schema/lang/spring-lang-2.0.xsd=org/springframework/scripting/config/spring-lang-2.0.xsd, http://www.springframework.org/schema/beans/spring-beans-2.5.xsd=org/springframework/beans/factory/xml/spring-beans-2.5.xsd} 
Found XML schema [http://www.springframework.org/schema/beans/spring-beans-2.0.xsd] in classpath: org/springframework/beans/factory/xml/spring-beans-2.0.xsd 
Found XML schema [http://www.springframework.org/schema/security/spring-security-3.0.xsd] in classpath: org/springframework/security/config/spring-security-3.0.xsd 
Loading bean definitions 
Loaded NamespaceHandler mappings: {http://www.springframework.org/schema/p=org.springframework.beans.factory.xml.SimplePropertyNamespaceHandler, http://www.springframework.org/schema/util=org.springframework.beans.factory.xml.UtilNamespaceHandler, http://www.springframework.org/schema/jee=org.springframework.ejb.config.JeeNamespaceHandler, http://www.springframework.org/schema/aop=org.springframework.aop.config.AopNamespaceHandler, http://www.springframework.org/schema/security=org.springframework.security.config.SecurityNamespaceHandler, http://www.springframework.org/schema/tx=org.springframework.transaction.config.TxNamespaceHandler, http://www.springframework.org/schema/task=org.springframework.scheduling.config.TaskNamespaceHandler, http://www.springframework.org/schema/lang=org.springframework.scripting.config.LangNamespaceHandler, http://www.springframework.org/schema/context=org.springframework.context.config.ContextNamespaceHandler} 
Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 300, <spnegoAuthenticationProcessingFilter>, order = 1200, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1300, Root bean: class [org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1400, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1600, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 1900] 
Neither XML 'id' nor 'name' specified - using generated bean name [org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator#1a40cf5] 
Neither XML 'id' nor 'name' specified - using generated bean name [org.springframework.security.extensions.kerberos.GlobalSunJaasKerberosConfig#0] 
Loaded 18 bean definitions from location pattern [/WEB-INF/spnego.xml] 

...

Eagerly caching bean 'kerberosServiceAuthenticationProvider' to allow for resolving potential circular references 
Creating instance of bean 'org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator#1a40cf5' 
Invoking afterPropertiesSet() on bean with name 'org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator#1a40cf5' 
Your keytab is in the classpath. This file needs special protection and shouldn't be in the classpath. JAAS may also not be able to load this file from classpath. 
Debug is  true storeKey true useTicketCache false useKeyTab true doNotPrompt true ticketCache is null isInitiator false KeyTab is file:/C:/Program%20Files/Apache%20Software%20Foundation/Tomcat%207.0/webapps/spring-security-kerberos-sample-1.0.0.M2/WEB-INF/classes/xena2.keytab refreshKrb5Config is false principal is HTTP/XENA2.mydomain.org@MYDOMAIN.ORG tryFirstPass is false useFirstPass is false storePass is false clearPass is false
principal is HTTP/XENA2.mydomain.org@MYDOMAIN.ORG
Will use keytab
Ordering keys wrt default_tkt_enctypes list
Config name: classpath:krb5.conf
Using builtin default etypes for default_tkt_enctypes
default etypes for default_tkt_enctypes: 17 16 23 1 3.
Commit Succeeded 

Finished creating instance of bean 'org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator#1a40cf5' 
Creating shared instance of singleton bean 'dummyUserDetailsService' 
Creating instance of bean 'dummyUserDetailsService' 
Eagerly caching bean 'dummyUserDetailsService' to allow for resolving potential circular references 
Finished creating instance of bean 'dummyUserDetailsService' 

...

HttpSession returned null object for SPRING_SECURITY_CONTEXT 
No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@12ef3bb. A new one will be created. 
/secure/index.jsp at position 2 of 8 in additional filter chain; firing Filter: 'org.springframework.security.extensions.kerberos.web.SpnegoAuthenticationProcessingFilter@2b7684' 
/secure/index.jsp at position 3 of 8 in additional filter chain; firing Filter: 'org.springframework.security.web.savedrequest.RequestCacheAwareFilter@171ff47' 
/secure/index.jsp at position 4 of 8 in additional filter chain; firing Filter: 'org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12ec880' 
/secure/index.jsp at position 5 of 8 in additional filter chain; firing Filter: 'org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a3db5' 
Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@6faeba70: Principal: anonymousUser; Password: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffbcba8: RemoteIpAddress: 192.168.189.1; SessionId: 3FBB484FF373A965218474C88211DFA7; Granted Authorities: ROLE_ANONYMOUS' 
/secure/index.jsp at position 6 of 8 in additional filter chain; firing Filter: 'org.springframework.security.web.session.SessionManagementFilter@139406a' 
/secure/index.jsp at position 7 of 8 in additional filter chain; firing Filter: 'org.springframework.security.web.access.ExceptionTranslationFilter@1b42103' 
/secure/index.jsp at position 8 of 8 in additional filter chain; firing Filter: 'org.springframework.security.web.access.intercept.FilterSecurityInterceptor@e38854' 
Converted URL to lowercase, from: '/secure/index.jsp'; to: '/secure/index.jsp' 
Candidate is: '/secure/index.jsp'; pattern is /secure/**; matched=true 
Secure object: FilterInvocation: URL: /secure/index.jsp; Attributes: [IS_AUTHENTICATED_FULLY] 
Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@6faeba70: Principal: anonymousUser; Password: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffbcba8: RemoteIpAddress: 192.168.189.1; SessionId: 3FBB484FF373A965218474C88211DFA7; Granted Authorities: ROLE_ANONYMOUS 
Voter: org.springframework.security.access.vote.RoleVoter@183b617, returned: 0 
Voter: org.springframework.security.access.vote.AuthenticatedVoter@27cff7, returned: -1 
Access is denied (user is anonymous); redirecting to authentication entry point 
org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:71)
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:203)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:106)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.extensions.kerberos.web.SpnegoAuthenticationProcessingFilter.doFilter(SpnegoAuthenticationProcessingFilter.java:152)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:149)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

所以问题是为什么我收到这个错误：*org.springframework.security.access.AccessDeniedException: Access is denied*

难道是keytab文件没有使用成功？如果是，那么为什么？另外我认为这个错误产生了另一个错误： *原因：GSSException：检测到有缺陷的令牌（机制级别：GSSHeader没有找到正确的标签）*

我希望这是足够的信息，有人会帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:03:16.977

除了这个扩展是垃圾之外，您的客户端会向您发送一个 NTLM 令牌而不是 Kerberos 令牌。这种行为是绝对正确的，因为客户端可以协商（在这里它作为后备）。检查您的整个 Kerberos、DNS、AD 设置。使用 Wireshark！

# mingw - 用mingw编译libjpeg

> ID：13087749
> 
> 赞同：5
> 
> 时间：2012-10-26T13:19:17.980
> 
> 标签：mingw, libjpeg

我终于设置了mingw和msys，现在我想编译libjpeg。我从 projekt 页面 (jpeg-8d) 下载了最新的 libjpeg 源并提取了文件。

然后我像这样运行配置命令：

```
./configure --build=x86_64-w64-mingw32 --prefix=/D/Libraries/bin/jpegd-8d 
```

之后我想用 make 进行构建，但出现以下错误：

```
$ make 
make  all-am
make[1]: Entering directory `/D/Libraries/sources/jpeg-8d'
CC    jaricom.lo
CC    jcapimin.lo
jcapimin.c:127:1: error: conflicting types for 'jpeg_suppress_tables'
jcapimin.c:128:1: note: an argument type that has a default promotion can't match an empty parameter name list declaration
In file included from jcapimin.c:22:0:
jpeglib.h:982:14: note: previous declaration of 'jpeg_suppress_tables' was here
make[1]: *** [jcapimin.lo] Error 1
make[1]: Leaving directory `/D/Libraries/sources/jpeg-8d'
make: *** [all] Error 2 
```

我在这里看到了这篇文章，其中一个人和我有同样的问题：[libjpeg：编译错误](https://stackoverflow.com/questions/10834250/libjpeg-compile-error)

建议运行“autoheader”命令。我尝试这样做，但出现以下错误：

```
 sh: autoheader:command not found 
```

我用谷歌搜索 autoheader 和 mingw / msys 但我找不到答案。

所以我的问题是：是否有另一种解决方案来编译它？如果没有，我如何在 msys / mingw64 中安装所需的工具？

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T11:26:35.063

如果由于某种原因您无法运行

```
 $ autoheader 
```

将以下定义添加到 jconfig.h

```
 #define HAVE_PROTOTYPES 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T00:41:38.250

按照 install.txt 的建议手动编译 ckconfig.c 并让它为你生成一个 jconfig.h，然后继续 make 和 make install。

# c# - 带有子目录的解压缩文件

> ID：13087751
> 
> 赞同：2
> 
> 时间：2012-10-26T13:19:21.567
> 
> 标签：c#, rar

我使用[NUnrar](http://nunrar.codeplex.com)来提取我的文件：

```
NUnrar.Archive.RarArchive archive = NUnrar.Archive.RarArchive.Open(location + "1.rar");

foreach (RarArchiveEntry item in archive.Entries)
{
    string path = Path.Combine(location, Path.GetFileName(item.FilePath));
    item.WriteToFile(path);
} 
```

如果我的文件没有任何子目录，一切正常，但如果 rar 文件有子目录，所有这些子目录都提取到同一个文件夹，我如何保留子目录和文件位置的模型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T23:19:31.717

我必须做一些实验才能让 NUnrar 也能正常工作。也许我所取得的小小的成功可以帮助到你。

```
RarArchive archive = RarArchive.Open(@"D:\Archives\Test.rar");
foreach (RarArchiveEntry entry in archive.Entries)
{
    try
    {
        string fileName = Path.GetFileName(entry.FilePath);
        string rootToFile = Path.GetFullPath(entry.FilePath).Replace(fileName, "");

        if (!Directory.Exists(rootToFile))
        {
            Directory.CreateDirectory(rootToFile);
        }

        entry.WriteToFile(rootToFile + fileName, ExtractOptions.ExtractFullPath | ExtractOptions.Overwrite);
    }
    catch (Exception ex)
    {
        //handle your exception here..
    }
} 
```

我已经使用了 (Exception e) 的代码，所以我不得不使用 (Exception ex) 代替。这可能是草率的代码，并且可以进行整理-但是到现在为止，我倾向于将其保留为“有效”的状态..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T07:53:40.557

```
NUnrar.Archive.RarArchive.WriteToDirectory("update.rar", Application.StartupPath,NUnrar.Common.ExtractOptions.ExtractFullPath | NUnrar.Common.ExtractOptions.Overwrite); 
```

如果“update.rar”与可执行文件位于同一目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:30:48.563

[我认为](http://nunrar.codeplex.com/documentation) `RarArchive.ExtractToDirectory(source, destination);`应该工作。

或使用您的循环，将其更改为`string path = Path.Combine(location, item.FilePath);`

# java - Java 两个 get() 方法一个接一个

> ID：13087752
> 
> 赞同：-4
> 
> 时间：2012-10-26T13:19:24.520
> 
> 标签：java

我正在尝试将两个 int 值与一种方法进行比较。

我将两个 get 方法放在一起，因为 array[i] 是一个人员对象列表，而 gethouse 只给出了 house 对象，而 houseid 在另一个类中。

我想知道是否可以依次设置两个 get() 方法？

```
public Person findperson( int houseId ){

    for ( int i = 0; i < array.length; i++ ){
        if ( array[ i ].gethouse().gethouseID() == houseId  ){
            return array[ i ];
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:32:01.770

你可以这样做。

但是，我认为这不是一个好习惯。

1.  我首先担心的是空指针异常 (NPE) 的可能性。如果你写`a.getB().getC().getD()`，其中任何一个都可以返回 null。您无法判断结果堆栈跟踪中哪个返回了 null（不包括返回 null 的最后一次调用，这很好）。您可能希望在这种情况下使用[空对象模式。](http://en.wikipedia.org/wiki/Null_Object_pattern)
2.  我的第二个问题是更面向设计。你向 A 询问它所知道的信息，然后询问结果，等等。*对象的存在是为了为你做事，*所以你应该这样做，让你的对象为你工作。让您的`Person`对象完成繁重的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:24:11.500

如果你的`house`类（无论从`gethouse()`实现 gethouseID() 返回什么，person 实例`array[i]`不为空，并且`gethouse()`返回非空值，这将正常工作。否则，这将因编译失败或在运行时出现空指针异常。你更安全地获取人，检查它是否为空，获取房子，检查它是否为空，然后获取 houseID 并与你正在寻找的人进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:23:59.533

首先你得到一个 Person 对象，然后调用 gethouse() 你得到一个 house 对象，然后你调用 gethouseID() 来获取 Integer。这应该是绝对可能的。

# c# - 谁能告诉我为什么这个 C# 电子邮件验证正则表达式 (regex) 挂起？

> ID：13087755
> 
> 赞同：5
> 
> 时间：2012-10-26T13:19:37.247
> 
> 标签：c#, regex

我得到了一个很好的电子邮件验证正则表达式： [电子邮件正则表达式](https://stackoverflow.com/questions/997078/email-regular-expression)

```
 public static void Main(string[] args)
    {
        string value = @"cvcvcvcvvcvvcvcvcvcvcvvcvcvcvcvcvvccvcvcvc";
        var regex = new Regex(
            @"^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$",
            RegexOptions.Compiled);
        var x = regex.Match(value); // Hangs here !?!
        return;
    } 
```

它在大多数情况下都有效，但上面的代码挂起，消耗 100% CPU……我在 W8 Metro App 中测试过。在标准的 .Net 4.5 应用程序上。

谁能告诉我为什么会发生这种情况，以及是否有一个很好的电子邮件验证 REGEX 不会挂起，或者是否有办法解决这个问题？

非常感谢，乔恩

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T13:30:13.853

它挂起的解释：[灾难性回溯](http://www.regular-expressions.info/catastrophic.html)。

让我们简化正则表达式的关键部分：

```
(\w*[0-9a-zA-Z])*@ 
```

你有

*   一个可选部分`\w*`，可以匹配后面部分相同的字符`[0-9a-zA-Z]`，所以两者结合翻译，本质上，`\w+`
*   嵌套量词：`(\w+)*`

这意味着，给定`s = "cvcvcvcvvcvvcvcvcvcvcvvcvcvcvcvcvvccvcvcvc"`，正则表达式的这一部分需要在未找到以下内容时决定不匹配之前检查`s`（在 处的哪个数字）的所有可能排列。`2**(len(s)-1)``@`

由于您无法使用任何正则表达式验证电子邮件地址（规范中有太多极端情况），因此通常最好

*   做一个最小的正则表达式检查 ( `^.*@.*$`)
*   使用解析器检查有效性（如@Fake.It.Til.U.Make.It 建议）
*   尝试向它发送电子邮件——即使是看似有效的地址也可能是伪造的，所以无论如何你都必须这样做。

为了完整起见，您*可以在*[原子组](http://www.regular-expressions.info/atomic.html)的帮助下避免回溯问题：

```
var regex = new Regex(
    @"^([0-9a-zA-Z](?>[-.\w]*[0-9a-zA-Z])*@(?>[0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$",
    RegexOptions.Compiled); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T13:22:48.617

永远不要`regex`用来验证电子邮件..

您可以使用[MailAddress](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)类来验证它

```
try 
{
    address = new MailAddress(address).Address;
   //address is valid
} 
catch(FormatException)
{
    //address is invalid
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:25:14.400

猜想是因为正则表达式中的 [-.\w] ，尝试使用这个：

```
^[a-zA-Z0-9_-]+(?:\.[a-zA-Z0-9_-]+)*@(?:(\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$ 
```

此外，在 .net 4.5 EmailAttribute 中应该可用，但不确定

# c# - 通用类中 T 的 XML 元素名称

> ID：13087756
> 
> 赞同：0
> 
> 时间：2012-10-26T13:19:40.110
> 
> 标签：c#, xml, generics, inheritance

对于当前项目，我正在尝试`XML`使用`XmlSerializer`该类创建一个通用创建者-我需要其中一个类中的某个元素来`ElementName`根据创建者在此上下文中所处的类的类型来设置集合，这很简单。这是一个例子：

```
 public abstract class ElementTypeBase
  {
    public abstract string ElementName { get; }
  }
  public class ElementTypeA : ElementTypeBase
  {
    public override string ElementName
    {
      get { return "ElementA"; }
    }
  } 
```

然后将其传递给我的`XML`对象类，该类将用于`XmlSerializer`但我希望`ElementName`特定于类型。

```
 public class XMLObject<T> where T : ElementTypeBase
  {
    [XmlElement(Activator.CreateInstance<T>().ElementName)]
    public string SomeElement;
  } 
```

我以为我能做到这一点，但得到：

> 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

所以我认为我可以`override ToString()`，但这不起作用，我正在考虑使用常量，但感觉很脏。还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:40:39.833

您可以通过`XmlAttributeOverrides`如下所示的课程来做到这一点。但是，您需要缓存`XmlSerializer`实例，对于您的问题，我不推荐这种方法。

当你说你有一个元素对于每个继承的对象都不同时，我建议把这个元素放在继承的类中，而不是通用的类中，然后硬编码它的`XmlElement.ElementName`.

```
using System;
using System.Xml.Serialization;

public class Program
{
    static void Main(string[] args)
    {
        XmlSerializer serializer =
            new XmlSerializer(typeof(XMLObject<MyElement>),
                XMLObject<MyElement>.Overrides);
        serializer.Serialize(Console.Out,
            new XMLObject<MyElement>() { SomeElement = "value" });
        Console.ReadLine();
    }
}
public class XMLObject<T> where T : ElementTypeBase, new()
{
    public static XmlAttributeOverrides Overrides { get; private set; }
    static XMLObject()
    {
        Overrides = new XmlAttributeOverrides();
        Overrides.Add(typeof(XMLObject<T>), "SomeElement",
            new XmlAttributes
            {
                XmlElements =
                {
                    new XmlElementAttribute(new T().ElementName)
                }
            });
    }

    public string SomeElement { get; set; }
}
public abstract class ElementTypeBase
{
    public abstract string ElementName { get; }
}
public class MyElement : ElementTypeBase
{
    public override string ElementName
    {
        get { return "ElementA"; }
    }
} 
```

# css - 在 CSS 梯形上放置文本

> ID：13087770
> 
> 赞同：2
> 
> 时间：2012-10-26T13:20:49.730
> 
> 标签：css

我继承了一个遗留应用程序进行重写，并遇到了一个奇怪的问题。页面上显示了表格数据，其中表格的标题位于类似于马尼拉信封标签的梯形形状内。在此类表格的底部，通常有一个与表格标题形状相同但旋转 180° 的按钮行。目前，这种效果正在通过使用透明背景上一半白色三角形的正方形图像作为矩形块角落的背景图像来实现梯形外观。但是，这种技术在页面刷新时容易出现闪烁。

作为一个练习，我试着看看我是否可以用纯 CSS 技术来代替它。我在 CSS 中找到了指向不同形状的[链接](http://css-tricks.com/examples/ShapesOfCSS/)，并模拟了梯形以使其看起来像我需要的那样。我能够正确地将表格标题文本放置在梯形内。但是，当我需要 180° 旋转梯形的外观时，我无法将文本放置在形状内。我的代码包含在下面，这是一个[jsFiddle](http://jsfiddle.net/HJPfG/)，显示了我到目前为止所完成的工作。我知道文本显示在旋转梯形下方，因为高度设置为 0，并且我使用border-top 来构建形状。我能做些什么来让它正常工作吗？

请记住，我需要它在 IE8 中显示（也可能在兼容模式下的 IE8 -- IE7）中显示。此外，我希望将额外的 HTML 元素保持在最低限度，因为我希望尽可能保持语义化。我知道我可以在 div 内放置一个跨度并绝对定位该跨度，以便它在形状内显示文本，但是当我这样做时，我必须手动设置梯形上的宽度，并且宽度可以从按钮行变化到按钮行，我宁愿不走那条路。

谢谢。

HTML：

```
<div class="trap">Title Text</div>
<div class="trap180">Button Row</div>​ 
```

CSS：

```
.trap {
    color: black;
    font: normal bold 13px Arial;
    border-bottom: 27px solid #F00;
    border-right: 27px solid transparent;
    height: 0px;
    float: left;
    line-height: 27px;
    padding: 0 4px;
}

.trap180 {
    clear: both;
    color: black;
    font: normal bold 13px Arial;
    border-top: 27px solid #F00;
    border-left: 27px solid transparent;
    height: 0px;
    float: right;
    margin: 20px 0 0 0;
    line-height: 27px;
    padding: 0px 4px 0;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:37:21.820

使用伪元素是可能的。但我无权访问那些旧浏览器进行测试。

```
.trap, .trap180 {
    color: black;
    font: normal bold 13px Arial;
    float: left;
    line-height: 30px;
    height: 30px;
    padding: 0 4px;
    background: salmon;
    position: relative;
}

.trap180 {
    float: right;
    margin: 20px 0 0 0;
}

.trap:after,.trap180:after {
    content: '';
    position: absolute;
    height: 0px;
    width: 40px;
    top: 0;
}
.trap:after {
    right: -30px;
    border-bottom: 30px solid salmon;
    border-right: 30px solid transparent;
    z-index: -10;
}
.trap180:after {
    left: -30px;
    border-top: 30px solid salmon;
    border-left: 30px solid transparent;
    z-index: -10;
}
​ 
```

[演示](http://jsfiddle.net/HJPfG/1/)

坦率地说，如果您仍然需要支持 IE7，我只会使用图像或允许稍微优雅的降级。

# jquery - jQuery中变音符号的HTML代码

> ID：13087772
> 
> 赞同：-1
> 
> 时间：2012-10-26T13:21:01.727
> 
> 标签：jquery, html

我在 jQuery 的句子中使用德语变音符号。在 HTML i 中，代码例如用于 ä -> `&auml;`。
现在我显示一个带有 ä 的句子。当我使用`&auml;`时，它会显示代码。当我只使用 ä 时，它会显示 �。
jQuery中变音符号的HTMLcode如何？

代码：

```
var choseError = 'Bitte wähle ein Album aus!';
//or
var choseError = 'Bitte w&auml;hle ein Album aus!';

$('.album').text(choseError); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T13:27:33.850

`jQuery.text()`将给定的文本作为 textNode 插入，也就是说，您在其中输入的任何内容都将完全按原样显示，它不会被解释为 HTML。`jQuery.html()`将给定的文本解释为 HTML 并插入它，这意味着您的 HTML 实体已被解释。

你真正想做的是正确处理编码。您不需要将 HTML 实体用于元音变音或其他非 ASCII 字符，您只需确保浏览器知道文本的编码并正确处理它。您的文本（源代码）似乎以 Latin-1 编码，但浏览器将其解释为 UTF-8。设置适当的 HTTP`Content-Type`标头以告诉浏览器内容是 Latin-1 编码的，或者更好的是，将您的文本保存为 UTF-8。

# jquery - 在现有表中插入行

> ID：13087776
> 
> 赞同：2
> 
> 时间：2012-10-26T13:21:13.010
> 
> 标签：jquery, html

![在此处输入图像描述](../Images/6be28669c9d6e3dd3ad3aed3d7204531.png)

我在将内容插入现有表格时遇到问题。除插入外，一切正常。插入点是 thead 元素下方和 php for 循环上方的跨度，该循环生成图片中看到的表格行。要插入的内容正确地嵌入到表格行和表格数据中。甚至可以在创建表后动态插入行吗？

编辑：

```
 <table class="table table-hover" id="revolver">
                    <thead>
                        <td id="profile-message-indicator"></td>
                        <td id="profile-message-space">Message</td>
                        <td id="profile-message-name-space">To</td>
                        <td>Date/Time</td>
                    </thead>

                    <span id="insert-sent-message">

                    </span>

                    <?php if(isset($message_list[1][0]['message_state'])){?>

                    <?php for($i = 0; $i < $array_length_send; $i++){ ?>

                    <tr>

                        <?php if(strlen($message_list[1][$i]['message']) >= 54){?>

                            <td id="profile-message-indicator">

                                <a href="" class="extend-message" data-messageid="<?php echo $message_list[1][$i]['message_id']; ?>"><strong class="profile-extend-message">+</strong></a>

                            </td>

                            <td class="table-data-string">

                            <span id="substring-message<?php echo $message_list[1][$i]['message_id']; ?>">

                                <p class="comments-layout"><?php echo substr($message_list[1][$i]['message'], 0, 54); ?>...</p>

                            </span>

                        <?php } else { ?>

                            <td></td>

                            <td class="table-data-string">

                            <span id="substring-message<?php echo $message_list[1][$i]['message_id']; ?>">

                                <p class="comments-layout"><?php echo $message_list[1][$i]['message']; ?></p>

                            </span>

                        <?php }?>

                            <span class="complete-message" id="complete-message<?php echo $message_list[1][$i]['message_id']; ?>">

                                <p class="comments-layout"><?php echo $message_list[1][$i]['message']; ?></p>

                            </span>

                        </td>

                        <td>

                            <a href="" class="goto-author" data-author="<?php echo $message_list[1][$i]['author']; ?>"><?php echo $message_list[1][$i]['recip']; ?></a>

                        </td>

                        <td>

                            <p><?php echo date("Y-m-d H:i", strtotime($message_list[1][$i]['message_timestamp'])); ?></p>

                        </td>

                    </tr>

                    <?php }} else {?>

                        <!-- EMPTY NO MESSAGES -->

                    <?php  }?>
                </table> 
```

插入的 HTML 模板：

```
<tr>

<?php if(strlen($reply) >= 54){ ?>

    <td id="profile-message-indicator">

        <a href="" class="extend-message" data-messageid="<?php echo $message_id[0]?>"><strong class="profile-extend-message">+</strong></a>

    </td>

    <td class="table-data-string">

        <span id="substring-message<?php echo $message_id[0]; ?>">

            <p class="comments-layout"><?php echo substr($reply, 0, 54); ?>...</p>

        </span>

<?php } else { ?>

    <td>
    </td>

    <td class="table-data-string">

        <span id="substring-message<?php echo $message_id[0]; ?>">

            <p class="comments-layout"><?php echo $reply;?></p>

        </span>
<?php }?>

    <span class="complete-message-reply" id="complete-message<?php echo $message_id[0]; ?>">

        <p class="comments-layout"><?php echo $reply;?></p>

    </span>

</td>

<td>

    <a href="" class="goto-author" data-author="<?php echo $recipient; ?>"><?php echo $recipient; ?></a>

</td>

<td>
    <?php echo $today; ?>
</td>
</tr> 
```

JS：

```
 $(document).on('click','.submit-message-reply',function(e){
    e.preventDefault();
    var messageid = $(this).data('messageid');
    var reply = $('#message-reply-container'+messageid).val();
    var recipient = $(this).data('recipient');
    $.ajax({
        type: 'POST',
        url: '?a=profile_message_reply',
        data: {
            "messageid" : messageid,
            "reply" : reply,
            "recipient" : recipient
        },
        success: function(data){
            $('#message-reply-container'+messageid).val("");
            $('#insert-sent-message').append(data);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:41:34.287

就像是

```
$("#revolver").append("<tr><td class='table-data-string'>"+val+"</td></tr>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:42:32.507

摆脱`span`表格行之间的中间，它会使您的 html 无效。出于同样的原因，也`thead`用 with包裹表格单元格。`tr`

然后`.after()`在表格标题行而不是`.append()`跨度上使用。

```
$('#revolver tr:first').after(data);​ 
```

看到这个[FIDDLE](http://jsfiddle.net/sPC6g/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:49:56.130

第一个问题的答案是肯定的 - 可以在插入表格后在表格中插入行。

你可以这样做

```
$.ajax({
    type: 'POST',
    url: '?a=profile_message_reply',
    data: {
        "messageid" : messageid,
        "reply" : reply,
        "recipient" : recipient
    },
    success: function(data){
        var new_row = document.createElement("tr");

        var new_tds = {
            td_indicator: document.createElement("td"),
            td_space: document.createElement("td"),
            td_name_space: document.createElement("td"),
            td_date: document.createElement("td")
        };

        new_tds.td_indicator.addAttribute("class", "profile-message-indicator");
        new_tds.td_space.addAttribute("class", "profile-message-space");
        new_tds.td_name_space.addAttribute("class", "profile-message-name-space");
        new_tds.td_date.addAttribute("class", "profile-message-date");

        var td_texts = {
            td_indicator: document.createTextNode(response.indicator),
            td_space: document.createTextNode(response.space),
            td_name_space: document.createTextNode(response.name_space),
            td_date: document.createTextNode(response.date)
        };

        $.each(new_tds, function(key, value) {
            new_tds[key].appendChild(td_texts[key]);
            new_row.appendChild(new_tds[key]);
        });

        $("table#revolver").append(new_row);
    },
    dataType: "json"
}); 
```

您在服务器端所要做的就是对数据数组进行 json_encode。

# jquery - 如何在jquery中找到父元素并删除该父元素的子元素文本？

> ID：13087780
> 
> 赞同：2
> 
> 时间：2012-10-26T13:21:24.630
> 
> 标签：jquery, jquery-ui, jquery-selectors

这是我使用的标记

```
<table cellpadding="0" cellspacing="0" border="0">
        <thead>
            <tr class="tr-head">
                <th>Amount Owed</th>
                <th>Amount Paid</th>
                <th>Check / Cash / Online</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr class="row0">
                <td>$10 <input type="text" name="amount_owed" id="amount_owed" value="10" style="display: none; width: 40px;" /></td>
                <td>$20 <input type="text" name="amount_paid" id="amount_paid" value="20" style="display: none; width: 40px;" /></td>
                <td>$30 <input type="text" name="check_cash_online" id="check_cash_online" value="30" style="display: none; width: 40px;" /></td>
                <td><a href="javascript:void(0);" class="edit-row" title="row0">Edit</a></td>
            </tr>
            <tr class="row1">
                <td>$10 <input type="text" name="amount_owed" id="amount_owed" value="10" style="display: none; width: 40px;" /></td>
                <td>$20 <input type="text" name="amount_paid" id="amount_paid" value="20" style="display: none; width: 40px;" /></td>
                <td>$30 <input type="text" name="check_cash_online" id="check_cash_online" value="30" style="display: none; width: 40px;" /></td>
                <td><a href="javascript:void(0);" class="edit-row" title="row1">Edit</a></td>
            </tr>
        </tbody>
    </table> 
```

当我单击特定行的编辑时，我想删除前三个子单元格`td`文本（即 10 美元、20 美元 ....），但元素除外。`input`输入类型应在隐藏单元格文本后显示。请帮助我如何使用 jquery 脚本制作它。谢谢

我已经尝试了一些脚本来做到这一点，即

```
$(document).ready(function(){
            $('.edit-row').click(function(){
                    var title = $(this).attr('title');
                    $('.'+title+' td').text('');
                });
        }); 
```

但是上面的脚本使单元格为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:39:42.007

此代码将为您工作：

```
​$('.edit-row​​').click(function() {
    $(this).closest('tr').find('td').not(':last')
        .contents().filter(
            function() {
                return this.nodeType == 3;
            }).remove();
});​ 
```

[在这里](http://jsfiddle.net/YVa9k/1/)测试。

Zachary Kniebel 用**.contents()**方法击中它

抱歉，我忘记了显示输入元素的部分：

```
$('.edit-row').click(function() {
    $(this).closest('tr').find('td').not(':last').contents()
        .filter(
            function() {
                return this.nodeType != 3;
            })
        .show().parent().contents()
        .filter(
            function() {
                return this.nodeType == 3;
            }).remove();
});​ 
```

测试和工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:26:59.063

查找 jQuery 的`.contents()`方法。它将返回调用元素/集合的所有文本、元素和内容节点。您要做的是创建一个过滤器方法，如下所示：

```
var filterNodes = function() {
    return this.nodeType === 1 || this.nodeType === 3;
} 
```

这将返回所有元素和文本节点。从那里，选择要从中删除文本的元素节点并删除文本节点。

注意：该`.contents()`方法返回 CHILDREN 而不是 DESCENDANTS

**编辑：**

我重新阅读了您的问题，我认为这更适合您：

1.  `td`使用标准 jQuery 选择器循环前三个
2.  运行以下过滤器方法，仅获取文本节点：

    `var filterNodes = function () { return this.nodeType == 3; }`

3.  像这样调用过滤器方法：

    `var firstThreeTDs = ....`

    `var nodeSet = firstThreeTDS.contents().filter(filterNodes).toArray();`

    `for (var i = 0; i < nodeSet.length; i++) {`

    ```
     nodeSet[i].parentNode.removeChild(nodeSet[i]);` 
    ```

    `}`

4.  使用`.show()`方法、`.css()`方法或效果方法（淡入淡出、幻灯片等）显示输入框

**编辑2：**

有一个替代解决方案，但它不是最好的，它未经测试，并且需要大量的调试时间（特别是因为你可能会丢失一些属性/属性，基于你的实现）：你可以使用 jQuery 的`clone()`方法，复制每个 中的输入元素`td`，然后使用该`.html()`方法将`td`的内部 HTML 设置为该重复的输入元素。这不是一个好的解决方案，它的开销更大，而且有点新手，但如果您对手动操作 DOM 感到不舒服，它会起作用。

如果您需要更多帮助/说明，请告诉我。祝你好运！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:26:04.807

```
$('.row0 #amount_owed,.row0 #amount_paid,row0 #check_cash_online').remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T13:34:42.640

```
 $('.edit-row').click(function(){
       $(this).parents("tr").find('td').not(":last").hide().html("");
    }); 
```

[http://jsfiddle.net/bLygN/2/](http://jsfiddle.net/bLygN/2/)

# redirect - 301 重定向错误应用。可以更改为新的重定向吗？

> ID：13087783
> 
> 赞同：0
> 
> 时间：2012-10-26T13:21:34.040
> 
> 标签：redirect

我正在接管一个最近更改了整个网址的网站。不是将每个旧页面的 301 重定向应用到其对应的新页面，而是将整个站点重定向到新主页。

撤消这个 301 重定向并应用正确的重定向会不会很痛苦？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:32:06.280

我不认为它会伤害。但是，您的新更改只会应用于旧站点的新请求。

# sql-server - SQL Server：查询 XML 列时，我可以返回 XML 列吗？

> ID：13087787
> 
> 赞同：1
> 
> 时间：2012-10-26T13:21:40.880
> 
> 标签：sql-server, xml, cursor

我有以下格式的 XML：

```
<filters>
  <filter name="filterByOperatingSystem">
   <parameters operatingSystem="Windows" />
  </filter>
  <filter name="filterBySoftware">
   <parameter software="Office" />
  </filter>
</filters> 
```

存储在`@XML`.

我想做的是遍历每个过滤器，以便我可以进行一些处理。

我的想法是我可以在光标中获取每个过滤器名称以及参数元素，但到目前为止我能得到的最接近的是：

```
DECLARE crsDTO cursor static forward_only read_only for 
SELECT  
  tab.col.value('@name','NVARCHAR(64)')
FROM
  @XML.nodes('//filter') tab(col) 
```

我尝试了以下查询以查看是否可以获取参数 xml：

```
DECLARE crsDTO cursor static forward_only read_only for 
SELECT  
  tab.col.value('@name','NVARCHAR(64)'),
  tab.col.value('parameter[1]' 'XML')
FROM
  @XML.nodes('//filter') tab(col) 
```

但我得到了错误：

> *值类型中使用的数据类型 XML 无效*

因为我的过滤器可以有不同的属性，所以我不想尝试使用第一个查询直接获取属性（我的想法是做光标，然后根据过滤器名称，我可以从节点获取特定参数），但是由于无法取出 xml 节点，我不知道该怎么做。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:33:27.380

你需要这个吗？

```
DECLARE @XML xml = '<filters>
  <filter name="filterByOperatingSystem">
   <parameters operatingSystem="Windows" />
  </filter>
  <filter name="filterBySoftware">
   <parameter software="Office" />
  </filter>
</filters>'

SELECT  
  tab.col.value('@name','NVARCHAR(64)') as name,
  tab.col.query('./*') as parameters
FROM
  @XML.nodes('//filter') tab(col) 
```

如果过滤器可能具有您可能想要更改的其他子元素类型

```
 tab.col.query('./*') as parameters 
```

到

```
 tab.col.query('./parameters') as parameters 
```

或者

```
 tab.col.query('./parameter') as parameters 
```

正确的名字是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T13:35:24.623

改用[`.query()`](http://msdn.microsoft.com/en-us/library/ms191474.aspx)：

```
declare @xml xml = '<filters>
  <filter name="filterByOperatingSystem">
   <parameters operatingSystem="Windows" />
  </filter>
  <filter name="filterBySoftware">
   <parameter software="Office" />
  </filter>
</filters>';

SELECT  
  tab.col.value('@name','NVARCHAR(64)'),
  tab.col.query('.')
FROM
  @XML.nodes('//filter') tab(col) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:28:20.513

您的 xml`Parameter`在其中一个`Filter`节点中没有元素，并且已插入`Parameters`元素。所以如果你想获取所有元素，你应该写`*`而不是`parameter[1]`

```
declare @xml xml

select @xml = '<filters>
  <filter name="filterByOperatingSystem">
   <parameters operatingSystem="Windows" />
  </filter>
  <filter name="filterBySoftware">
   <parameter software="Office" />
  </filter>
</filters>'

select @xml

select
    T.C.value('@name', 'nvarchar(64)'),
    T.C.query('./parameter[1]') as parameters
from @xml.nodes('/filters/filter') as T(C) 
```

# mysql - 如何使用 Mysql 查询浏览器恢复转储文件

> ID：13087790
> 
> 赞同：-1
> 
> 时间：2012-10-26T13:21:48.687
> 
> 标签：mysql, database, restore, database-administration

当我尝试从批处理文件运行一些查询时，我在查询浏览器中收到一些错误消息

我试过了

```
source E:\Rename_scripts_unused_tables_msp.sql 
```

我收到错误消息，例如

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'source   E:\Rename_scripts_unused_tables_msp updated.sql' at line 1' 
```

查询在命令行中运行良好。

**这是我的源文件语句：**

```
rename table appliance_backup_usage_history to unused_appliance_backup_usage_history;

rename table backup_core_server to unused_backup_core_server;

rename table bdr_vms to unused_bdr_vms;

rename table client_details1 to unused_client_details1;

rename table client_service_technologies_backup to unused_client_service_technologies_backup;

rename table cloud_instances to unused_cloud_instances; 
```

**以及更多类似的陈述**

这背后的原因是什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:09:49.233

`source`是`mysql`CLI 命令 - 不是 SQL 查询命令。它仅适用于命令行客户端`mysql`。

[https://dev.mysql.com/doc/refman/5.7/en/mysql-batch-commands.html](https://dev.mysql.com/doc/refman/5.7/en/mysql-batch-commands.html)

# python - Python：如何在 for 循环中选择所有其他项目

> ID：13087791
> 
> 赞同：-2
> 
> 时间：2012-10-26T13:21:49.293
> 
> 标签：python, recursion

假设我有：

```
def recursive(data):
    for i in data:
        if condition:
            recursive(HERE IS THE ISSUE) 
```

如何将数据从当前元素传递`i`到列表中的最后一个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:23:40.437

如果您基于索引进行迭代会更容易：

```
def recursive(data):
  for i in range(len(data)):
    if condition:
      recursive(data[i:]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:26:17.880

查看[enumerate](http://docs.python.org/library/functions.html#enumerate)这也将返回当前循环索引，然后您可以使用该索引进行切片。

```
def recursive(data):
   for i,j in enumerate(data):
      if condition:
         recursive(data[i:]) 
```

# mysql - mysql表损坏？

> ID：13087795
> 
> 赞同：0
> 
> 时间：2012-10-26T13:22:09.003
> 
> 标签：mysql, count, records

我有一个包含两个文本字段的表，它们的索引长度 = 4。

```
SELECT COUNT(*) cnt FROM `mytable` WHERE `field1` = ‘blue’; 
```

向我展示了 4 条记录和

```
SELECT COUNT(*) cnt FROM `mytable` WHERE `field2` = ‘blue’; 
```

显示另外 4 条记录（不同的结果）

但：

```
SELECT COUNT(*) cnt FROM `mytable` WHERE `field1` = ‘blue’ OR `field2` = ‘blue’; 
```

只显示了 5 条记录！为什么？？？

当我使用`DESCRIBE SELECT`etc.（没有 COUNT）时，它会告诉我以下信息：

**id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE mytable index_merge field1,field2 field1,field2 6,6 NULL 495 使用 sort_union(field1,field2); 使用哪里**

这怎么可能？为什么我看不到全部 8 条记录？

（注：我已经替换了表名，因为实名是荷兰人）

如果您需要更多表格信息，我会发布。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:25:34.707

只需这样做`'SELECT * FROM mytable WHERE field1 = ‘blue’ OR field2 = ‘blue’;'`，您就会看到您的问题:) 这实际上不是问题，因为`field1`并且两者都可能连续`field2`具有价值`blue`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:24:54.353

你需要

```
SELECT COUNT(*) cnt FROM mytable WHERE field1 = ‘blue’ AND field2 <> ‘blue’;
SELECT COUNT(*) cnt FROM mytable WHERE field2 = ‘blue’ AND field1 <> ‘blue’;
SELECT COUNT(*) cnt FROM mytable WHERE field2 = ‘blue’ AND field1 = ‘blue’; 
```

# android - 无法为 Android 视频录制应用程序设置摄像机配置文件

> ID：13087798
> 
> 赞同：0
> 
> 时间：2012-10-26T13:22:14.777
> 
> 标签：android, android-camera, video-capture, video-recording, android-mediarecorder

以下代码不允许录制视频。此代码通过按钮调用，但按钮冻结。我正在尝试使用摄像机配置文件来录制视频。

```
 public void startRecording() {

    mCamera.unlock();
    mrec.setCamera(mCamera);
    CamcorderProfile cpHigh = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
    mrec.setProfile(cpHigh);        

    File dir = new File(SdCardPath + Directory);
    if (!dir.exists()) {
        if (dir.mkdir()) {
            Log.v(STORAGE_SERVICE, "Created directory");
        } else {
            Log.v(STORAGE_SERVICE, "Failed to create Directory");
        }
    }

    FullFilePath = SdCardPath + Directory + RecordFileName;

    mrec.setOutputFile(FullFilePath);
    mrec.setPreviewDisplay(surfaceHolder.getSurface());
    try {
        mrec.prepare();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    mrec.start();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:15:16.447

总是尽力捕捉抛出的异常：

```
public void startRecording() {

    try {
        mCamera.unlock();
    catch (RuntimeException ex){
        //  looks like camera was locked in the first place, who is using it? 
    }
    mrec.setCamera(mCamera);

            ///...the rest of your code.
} 
```

# javascript - 从简单的 Google Maps v3 示例中删除标记

> ID：13087800
> 
> 赞同：0
> 
> 时间：2012-10-26T13:22:24.057
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我是 Javascript 的初学者，并试图了解 Google Maps API v3 的工作原理。在这个网站上找到了一个很好的答案，这是最受好评的答案。[Google Maps JS API v3 - 简单的多标记示例](https://stackoverflow.com/questions/3059044/google-maps-js-api-v3-simple-multiple-marker-example)

```
> <!DOCTYPE html> <html>  <head>    <meta http-equiv="content-type"
> content="text/html; charset=UTF-8" />    <title>Google Maps Multiple
> Markers</title>    <script
> src="http://maps.google.com/maps/api/js?sensor=false" 
>           type="text/javascript"></script> </head>  <body>   <div id="map" style="width: 500px; height: 400px;"></div>
> 
>   <script type="text/javascript">
>     var locations = [
>       ['Bondi Beach', -33.890542, 151.274856, 4],
>       ['Coogee Beach', -33.923036, 151.259052, 5],
>       ['Cronulla Beach', -34.028249, 151.157507, 3],
>       ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
>       ['Maroubra Beach', -33.950198, 151.259302, 1]
>     ];
> 
>     var map = new google.maps.Map(document.getElementById('map'), {
>       zoom: 10,
>       center: new google.maps.LatLng(-33.92, 151.25),
>       mapTypeId: google.maps.MapTypeId.ROADMAP
>     });
> 
>     var infowindow = new google.maps.InfoWindow();
> 
>     var marker, i;
> 
>     for (i = 0; i < locations.length; i++) {  
>       marker = new google.maps.Marker({
>         position: new google.maps.LatLng(locations[i][1], locations[i][2]),
>         map: map
>       });
> 
>       google.maps.event.addListener(marker, 'click', (function(marker, i) {
>         return function() {
>           infowindow.setContent(locations[i][0]);
>           infowindow.open(map, marker);
>         }
>       })(marker, i));
>     }   </script> </body> </html> 
```

这很有效，但现在我正在尝试实现一个删除特定标记的函数。无论我试图做什么都会使代码崩溃。我最后的尝试是调用一个函数来删除所有标记，如下所示：

```
 function deleteMarker(){
    for (i = 0; i < locations.length; i++) { 

        marker.setMap(null);
    }
} 
```

这仍然不起作用。

我在这里想念什么？感谢所有帮助，因为我花了几个小时试图弄清楚这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:41:41.577

您正在覆盖每个循环上的标记对象，因此您的函数 deleteMarker 将只能删除最后一个标记。

将创建的标记存储在某处（位置数组将是一个好地方）：

```
for (i = 0; i < locations.length; i++) {  
       locations[i][4] 
         = marker 
           = new google.maps.Marker({
         position: new google.maps.LatLng(locations[i][1], locations[i][2]),
         map: map
       }); 
```

现在您可以稍后访问标记对象：

```
function deleteMarker(m){
    for (i = 0; i < locations.length; i++) { 
         if(m===locations[i][3]){
          locations[i][4].setMap(null);
         } 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T07:03:41.803

```
 function initmap(result) {
        if (result.length > 0) {
            var map_options = {
                center: new google.maps.LatLng(result[0].latitude, result[0].longitude),
                zoom: zoomcount,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var google_map = new google.maps.Map(document.getElementById("map_canvas"), map_options);

            var info_window = new google.maps.InfoWindow({
                content: 'loading'
            });

            var t = []; // --> Title
            var x = []; // --> latitude
            var y = []; // --> longitude
            var h = []; // --> HTML
            var f = "female.png";
            var m = "male.png";
            // alert(obj.value);
            // var result = getPingDetails();

            if (result.length > 0) {
                for (_count = 0; _count < result.length; _count++) {
                    t.push(result[_count].mobileuser);
                    x.push(result[_count].latitude);
                    y.push(result[_count].longitude);
                    var src = "http://www.eangelgps.com/image.ashx?id=" + result[_count].mobileuser;
                    //if (result[_count].gender == "Male") src += m;
                    //else src += f;
                    //h.push('<div style="height:120px;"><p><img src="' + src + '" /><strong>' + result[_count].firstname + " " + result[_count].lastname + '</strong><br/>' + result[_count].companyname + '(' + result[_count].designation + ')<br/>Gender:' + result[_count].gender + '<br />Mobile:' + result[_count].mobilenumber + '<br /><a href="#" onclick="moreinfo(\'' + result[_count].mobileuser + '\');">More details...</a><br /><br /><input type="button" value="Acknowledge" onclick="javascript:acknowledged(' + result[_count].pingId + ');" /></p></div>');
                    if (result[_count].acknowledge == "False" && result[_count].done == "False") {
                        h.push('<div style="width:290px;"><div style="width:290px; height:auto;"><div style="float:left;"><img src="' + src + '" width="100" height="auto" /></div><div>' +
                       '<b style="color:#004bb2; padding:7px 0 0 10px;">' + result[_count].firstname + " " + result[_count].lastname + '</b></div><div>' +
                       '<span style="font-size:15px; color:#292727;line-height:20px;">' + result[_count].companyname + '(' + result[_count].designation + ')</span><br />' +
                       '<span style="font-size:15px; color:#292727; line-height:20px;">Gender :' + result[_count].gender + '</span><br />' +
                       '<span style="font-size:15px; color:#292727;line-height:18px;">Mobile :' + result[_count].mobilenumber + '</span><br />' +
                       '<span style="font-size:11px; color:#004bb2; font-weight:bold;"><a href="#" onclick="moreinfo(\'' + result[_count].mobileuser + '\');">More details</a></span></div>' +
                       '<div style="margin-top:17px;">' +
                       '<input type="button" value="Acknowledge" class="button" onclick="javascript:acknowledged(' + result[_count].pingId + ',this);" /><input type="button" class="button" value="Done" style="display:none;" onclick="javascript:markdone(' + result[_count].pingId + ',this);" />' +
                       '</div></div></div>');
                    }
                    else if (result[_count].acknowledge == "True" && result[_count].done == "False") {
                        h.push('<div style="width:290px;"><div style="width:290px; height:auto;"><div style="float:left;"><img src="' + src + '" width="100" height="auto" /></div><div>' +
                       '<b style="color:#004bb2; padding:7px 0 0 10px;">' + result[_count].firstname + " " + result[_count].lastname + '</b></div><div>' +
                       '<span style="font-size:15px; color:#292727;line-height:20px;">' + result[_count].companyname + '(' + result[_count].designation + ')</span><br />' +
                       '<span style="font-size:15px; color:#292727; line-height:20px;">Gender :' + result[_count].gender + '</span><br />' +
                       '<span style="font-size:15px; color:#292727;line-height:18px;">Mobile :' + result[_count].mobilenumber + '</span><br />' +
                       '<span style="font-size:11px; color:#004bb2; font-weight:bold;"><a href="#" onclick="moreinfo(\'' + result[_count].mobileuser + '\');">More details</a></span></div>' +
                       '<div style="margin-top:17px;">' +
                       '<input type="button" value="Done" class="button" onclick="javascript:markdone(' + result[_count].pingId + ',this);" />' +
                       '</div></div></div>');
                    }
                }
                // t.push('Location Name 2');
                // x.push(33.84659);
                // y.push(-84.35686);
                // h.push('<p><strong>Location Name 2</strong><br/>Address 2</p>');

                var i = 0;
                for (item in t) {

                     m = new google.maps.Marker({
                        map: google_map,
                        animation: google.maps.Animation.DROP,
                        title: t[i],
                        position: new google.maps.LatLng(x[i], y[i]), html: h[i]
                        //position:
                    });

                    google.maps.event.addListener(m, 'click', function () {
                        info_window.setContent(this.html);
                        info_window.open(google_map, this);
                    });
                    i++;
                }
            }
            //result = null;
        }

        //else { window.document.getElementById('map_canvas').innerHTML = '<div style="vertical-align:middle;width:50%; height:50%;margin:0 auto; padding:20% 0 0 0;"> On click of iOS user name on left panel<br /> OR <br /> Check state(s) on right panel <br /> <br /> Google Map will update here accordingly.</div>'; }
    }

 var markers = [];
    function setAllMap(google_map) {
        for (var i = 0; i < markers.length; i++) {
            markers[i].setMap(google_map);
        }
    }
    function clearMarkers() {  
        //setMap(null); or
        setMap(clearMarkers);
    } 
```

# c# - 如何将 C# 数据连接代码分离到类文件中

> ID：13087808
> 
> 赞同：-1
> 
> 时间：2012-10-26T13:22:57.687
> 
> 标签：c#

```
private void button2_Click(object sender, EventArgs e)
{
    OleDbConnection cn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;data source=c://library//lib.mdb");
    OleDbDataAdapter cmd = new OleDbDataAdapter("select * from entry where LTRIM(subjet)=?", cn);
    cmd.SelectCommand.Parameters.AddWithValue("1", comboBox1.Text);
    DataSet fg = new DataSet();
    cmd.Fill(fg);

    label1.Text = "No. of Rows:-    " + fg.Tables[0].Rows.Count.ToString();
    dataGridView1.DataSource = fg.Tables[0];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:30:16.003

如果这是一个简单的小型应用程序，那么这样的东西就足够了......

```
 private void button2_Click(object sender, EventArgs e) 
   {
        DataRetriever dr = new DataRetriever();
        DataSet fg = dr.GetData(comboBox.Text);
        label1.Text = "No. of Rows:-    " + fg.Tables[0].Rows.Count.ToString();
        dataGridView1.DataSource = fg.Tables[0];
    }

public class DataRetriever
{
    public void GetData(string text)
    {
        OleDbConnection cn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;data source=c://library//lib.mdb");

        OleDbDataAdapter cmd = new OleDbDataAdapter("select * from entry where LTRIM(subjet)=?", cn);
        cmd.SelectCommand.Parameters.AddWithValue("1", text);
        DataSet fg = new DataSet();
        cmd.Fill(fg);
   }
} 
```

如果这是一个复杂的应用程序，您将需要研究多层应用程序设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:32:34.413

您可以简单地用一些类包装连接部分，但我建议您使用 ORM 工具，例如[Entity Framework](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)，它可以简单灵活地处理不同的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:33:08.507

对于初学者，您应该将连接字符串放在 app.config 中的[connectionStrings](http://msdn.microsoft.com/en-us/library/ms254494.aspx)下。

当您打开连接时，请确保无论发生什么都会关闭它：

```
using (OleDbConnection cn = new OleDbConnection(connectionString))
{
 try
 {
   cn.Open();

   //db operations 
 }
 catch(Exception ex)
 {

 }
} 
```

# android - jQuery 鼠标移动到 android 触摸移动

> ID：13087811
> 
> 赞同：-1
> 
> 时间：2012-10-26T13:23:06.143
> 
> 标签：android, mobile

我正在使用 jquery 鼠标移动功能。以及我如何为 Android 更改该方法或功能？

请通过代码...

```
function init(){
        width = $(window).width();
        height = $(window).height();            
        draw = false;                       
         $(document).mousedown(function(){draw=true;}); 
         $(document).mouseup(function(){draw=false;});  
         $(document).mousemove(function(e) {       
        if(draw==true){
            mx = e.pageX;
            my = e.pageY;
        console.log(mx + "***" + my)        
        });         
    } 
```

这在网络浏览器中运行良好。当我通过eclipse使用phonegap编译它时，它不会在模拟器中工作。

所以，我错过了什么，或者我需要做什么来将鼠标移动事件转换为移动设备的触摸移动事件。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:25:30.547

您只需要添加 jQuery Touch Punch 包含。

请参阅此处的参考：[jQuery UI Touch Punch](http://touchpunch.furf.com/)

# c++ - 对未定义的 C++ 移位运算符行为和包装“模式空间”感到困惑

> ID：13087816
> 
> 赞同：2
> 
> 时间：2012-10-26T13:23:27.907
> 
> 标签：c++, undefined-behavior, bit-shift

[我在一篇关于未定义 C++ 行为](http://blogs.msdn.com/b/vcblog/archive/2012/10/25/hello-arm-exploring-undefined-unspecified-and-implementation-defined-behavior-in-c.aspx)的文章的 Shift Operators 部分中读到的内容让我感到困惑。

> 在 ARM 体系结构上，移位运算符总是表现得好像它们发生在 256 位模式空间中，而与操作数大小无关——也就是说，模式仅每 256 个位置重复或“回绕”一次。另一种思考方式是模式以 256 为模移动指定数量的位置。然后，当然，结果只包含模式空间的最低有效位。

这些表格特别奇怪：

```
Given a 32-bit integer with a value of 1:
+-----------------------------------+
| Shift left    ARM    x86    x64   |
+-----------------------------------+
| 32            0      1      1     |
| 48            0      32768  32768 |
| 64            0      1      1     |
+-----------------------------------+ 
```

这些价值观是什么，它们为什么重要？

[移位运算符](http://msdn.microsoft.com/en-us/library/336xbhcz)不换行。~~根据 C++ 规范，如果将 32 位值左移 32，结果始终为 0。~~ *（编辑：我错了，请参阅答案！）*那么这篇文章的目的是什么？什么是未定义的行为？

当我在 x86 上运行此代码时，我得到`0`：

```
printf("%d", 1 << 32); 
```

假设[这个代码片段](http://msdn.microsoft.com/en-us/library/cx0bb1cy)说明了这个问题：

```
// C4293.cpp
// compile with: /c /W1
unsigned __int64 combine (unsigned lo, unsigned hi) {

    return (hi << 32) | lo;   // C4293

    // try the following line instead
    // return ( (unsigned __int64)hi << 32) | lo;
} 
```

我希望返回值是`lo`，因为程序员移走了所有`hi`位。警告很好，因为这可能是一个错误，但我没有看到任何未定义的行为......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T13:32:15.637

如果您使用 x86 或 x64 机器指令来移位值，它们将屏蔽移位量并且仅使用低位进行实际移位。其他一些硬件可能不会这样做。

这就是为什么它是未定义的。

在您使用文字的示例中`1 << 32`，编译器可能会计算该值，这就是它的原因`0`。在真正的 x86 硬件上尝试操作，你会得到`1`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T13:33:49.093

> 根据 C++ 规范，如果将 32 位值左移 32，则结果始终为 0

不，这不是标准所说的。将 32 位类型移动 32 位或更多 (5.8/1) 是未定义的行为

由于在 ARM（没有 257 位或更高类型）上移动 256 位是未定义的行为，因此 CPU 完全有权在该点进行换行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T13:26:30.010

> 结果的类型是提升的左操作数的类型。如果右操作数为负数，或者大于或等于提升的左操作数的位长度，则行为未定义。

这是来自 C++11 的 §5.8/1。如果您的整数是 32 位的，则不能移动 32 位（右移或左移，无论左操作数的符号性如何）。

# linux - 替换文本中的一个数字并用新值克隆它

> ID：13087820
> 
> 赞同：0
> 
> 时间：2012-10-26T13:23:42.647
> 
> 标签：linux, shell, replace

我需要更改规则中的一些数字，例如 192.168.1.2 到 192.168.1.x，其中 x 是 3-254 之间的值。所以会有多行，一个值为 192.168.1.2，另一个值为 192.168.1.3，依此类推。好吧，我不知道该怎么做。如果有人知道在 linux 中使用脚本的程序或某种方式，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:31:21.167

另一种选择，`awk`用于避免毛茸茸的正则表达式路线（一般来说正则表达式没有错，但有时它们会让你的眼睛流血......）：

```
awk -F. '{printf "%s.%s.%s.x\n",$1,$2,$3}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:57:26.497

这是使用`GNU sed`. 只需替换`X`为您希望使用的值。

```
sed 's/\(\([0-9]\{1,3\}\.\)\{3\}\)[0-9]\{1,3\}/\1X/g' file.txt 
```

测试：

```
echo "192.168.1.4" | sed 's/\(\([0-9]\{1,3\}\.\)\{3\}\)[0-9]\{1,3\}/\1X/g' 
```

结果：

```
192.168.1.X 
```

# ruby - Ruby LDAP：在工头 + sinatra 之外工作，但不在内部

> ID：13087821
> 
> 赞同：1
> 
> 时间：2012-10-26T13:23:55.120
> 
> 标签：ruby, ldap

我已经设置了`Adauth`gem，以便它可以连接到我的 ActiveDirectory，并在我这样做时成功返回一个对象（来自独立脚本）：

```
require 'adauth'

Adauth.configure do |c|
  c.server = "server"
  c.port = 389
  c.base = "DC=company,DC=org"
  c.domain = "company.org
end

Adauth.authenticate('username','password') 
```

`nil`如果我为用户输入了错误的密码，也会成功返回。

但是，一旦我将其放入 sinatra 应用程序中，即使我硬编码正确的凭据，`authenticate()`调用也会返回。`nil`

如果我用内部结构四处寻找，当我在 sinatra 内部以及独立运行时，LDAP`.bind`调用似乎正在返回。任何想法为什么会这样以及我如何解决它？`nil``true`

非常感谢！

# nhibernate - 懒惰初始化失败 - 没有会话或会话被关闭

> ID：13087822
> 
> 赞同：2
> 
> 时间：2012-10-26T13:23:56.100
> 
> 标签：nhibernate, c#-4.0

我正在使用单个会话，我的应用程序包含不同的模块，并且从会话中获取的对象被保留。当我从任何模块调用 Session.Clear 以刷新会话或实体时。在获取任何其他模块中的子实体时，我收到异常**“无法延迟初始化 - 没有关闭会话或会话” 。**

[LazyInitializationException] 无法延迟初始化角色集合：Application.Modules.Repository.childRepository，没有会话或会话已关闭

这就是我创建 Session 工厂和 Session 的方式：

```
var createdSessionFactory = Fluently.Configure(configuration)
                                          .Mappings(m => m.FluentMappings.AddFromAssemblyOf<DMProgram>())
                                          .ExposeConfiguration(c => c.SetProperty("command_timeout", "500"))
                                          .BuildSessionFactory();

ISession Session = NHibernateConfiguration.SessionFactory.OpenSession(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:18:05.420

案例：当我们从会话中获取对象（A）时。该对象有一些延迟加载的集合（B）。您关闭或清除会话。现在您正在尝试获取集合（B）。确保您收到此错误。

原因：因为会话不知道父对象（A）。

解决方案：您需要保持会话，或者您可以急切负载收集（B）。

# c# - 在 LINQ 中附加新创建的元素以进行删除

> ID：13087823
> 
> 赞同：0
> 
> 时间：2012-10-26T13:23:57.263
> 
> 标签：c#, .net, linq, linq-to-sql, ado.net

我有一个与之连接的网格和数据集对象。和使用 LINQ 的数据层。所以我需要从 LINQ 数据源中删除网格中删除的元素。

我有一种方法可以将我的 DataRow 项转换为 LINQ 项。例如：

```
DataRow forDelete = ...;
LinqItem itemForDelete = ConvertFromDataRow(forDelete);
dataContext.DeleteOnSubmit(itemForDelete); 
```

此代码引发异常，即无法删除未附加到表的项目。但是，如果我将其更改为

```
DataRow forDelete = ...;
LinqItem itemForDelete = ConvertFromDataRow(forDelete);
dataContext.Attach(itemForDelete)
dataContext.DeleteOnSubmit(itemForDelete); 
```

比它会抛出异常，即不可能附加已经存在的项目。

**问题将是在这种情况下如何正确附加项目。那应该可以解决问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:12:34.750

看起来这个问题没有正确的答案，或者没有办法做我需要的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:23:14.073

例外是因为您试图删除未跟踪的项目。

在 DeleteOnSubmit 之前按 ID 查找。

更多信息：

[http://msdn.microsoft.com/en-us/library/bb386982.aspx](http://msdn.microsoft.com/en-us/library/bb386982.aspx)

和

[如何在 linq to sql 中删除？](https://stackoverflow.com/questions/1319981/how-to-delete-in-linq-to-sql)

# c# - 加密密钥存储

> ID：13087824
> 
> 赞同：1
> 
> 时间：2012-10-26T13:23:58.673
> 
> 标签：c#, encryption

我正在尝试在我的项目中实现文件加密，但我想知道密钥存储的最佳实践。

我们的应用程序被部署到不同的客户群。每个组由多个地理站点组成，每个站点又由多个用户组成。用户创建文件，然后通过中央同步服务器与其他站点同步。这些文件必须在保存点加密，并且只有在客户端站点加载时才能解密。

因此，任何对称密钥都需要在组级别是唯一的，并安全地存储在每个站点。

我们正在使用 AES，但密钥目前是硬编码并存储在应用程序中，因此既可以通过反编译轻松访问，也可以对所有客户端进行访问，这让我非常担心。一旦您可以访问我们的应用程序，破解这种设置似乎很简单。

那么，如何确保为每个组生成唯一密钥，然后将该密钥安全地存储在每个站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:37:58.283

保持单个对称密钥的唯一真正*安全*的方法是让他们输入密码短语/密码并从中生成密钥。这样，您的应用程序在没有用户输入的情况下不知道密钥。

要么在某个单独的文件中提供密钥，要么他们需要提供给应用程序（通过接口、注册表或简单地将其放置在适当的路径），以使加密工作。

归根结底，安全始终取决于用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:13:48.713

这不是对称密码学的好用例。这就是非对称安全性实际上是一个要求的地方。您可以分发公钥（使用 PKI，或通过将其分发到应用程序内的信任库中）。然后，您使用接收方的公钥（例如，属于中央服务器的密钥对之一或一组密钥对）加密对称密钥，并使用对称密钥加密实际数据。

有时以这种方式使用对称加密，例如将密钥存储在智能卡中，但与非对称加密相比，密钥管理总是很糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:38:35.710

这有点超出我的范围，所以我只是说出我所知道的。

您是否查看过使用证书并在 Windows 证书存储中使用它们？

我的意思是，那基本上是唯一可以安全存放它的地方，我想...

# c# - 关于 c# 泛型类型的维度信息有什么用

> ID：13087826
> 
> 赞同：2
> 
> 时间：2012-10-26T13:23:58.860
> 
> 标签：c#

因此，之前已经在 SO 上讨论过这个问题，但是我认为我没有真正看到过为什么会发生这种情况的解释，我似乎也无法了解这对尝试在代码中使用反射的普通开发人员有何用处。

所以检查一下这段代码。

```
var fields = typeof(Person).GetFields(BindingFlags.DeclaredOnly | BindingFlags.NonPublic | BindingFlags.Instance); 
```

如果我的对象`List<int>`中有一个，`Person`那么我将取回一个反射“名称”设置为的字段`List`1`，或者如果我有一本字典，它将是`Dictionary`2`。从表面上看，这似乎很难处理，我不能说以下

```
foreach (var fieldInfo in fields.Where(fieldInfo => fieldInfo.FieldType == typeof(List<int>)))
{
     //Do something.
} 
```

出现这种情况的原因是因为我在我目前正在从事的项目中发现了以下内容。

```
 //Initialize collections
    FieldInfo[] properties = type.GetFields(BindingFlags.DeclaredOnly | BindingFlags.NonPublic | BindingFlags.Instance);
    foreach (FieldInfo f in properties)
    {
       if (f.FieldType.Name == "IList`1" && f.GetValue(obj) == null)
       {
             object value = Container.Resolve(f.FieldType);
             f.SetValue(obj, value);

       }
   } 
```

然后在统一的配置中我看到了这种幸福

```
<alias alias="IList`1" type="System.Collections.Generic.IList`1, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/> 
```

我真的不知道我知道这很糟糕？是吗？它当然有效，但即使这没问题（这会导致我的可疑代码 dar 消失），我最初的问题仍然存在。作为程序员，关于泛型的维度信息对我们有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:46:35.740

它当然不是为了帮助程序员。它在那里是因为 CLI 需要它。进一步的理由是，它确保具有相同标识符名称但类型参数数量不同的泛型类型具有唯一的类型名称。来自 ECMA 335 规范的一些措辞：

> CLS 规则 43：根据上面定义的规则，泛型类型的名称应编码在非嵌套类型上声明的类型参数的数量，或者如果嵌套，则新引入类型。[注意：CLS（消费者）：不需要消费违反此规则的类型。CLS（扩展器）：与消费者相同。选择支持泛型类型定义的扩展程序应遵循外部可见类型的此规则。CLS（框架）：不应公开违反此规则的类型。尾注]

在第 II.9 节中进行了一些澄清：

> 泛型类型由名称后跟以 <…> 分隔的泛型参数列表组成，如`C<T>`. 两个或多个泛型类型不应在同一范围内定义为具有相同名称但具有不同数量的泛型参数。但是，为了允许在源语言级别对泛型数量进行此类重载，定义 CLS 规则 43 以将泛型类型名称映射到唯一的 CIL 名称。该规则规定，具有一个或多个泛型参数的类型 C 的符合 CLS 的名称应具有形式的后缀``n`，其中 n 是十进制整数常量（不带前导零），表示 C 具有的泛型参数的数量。例如：类型`C`, `C<T>`, 和`C<K,V>`具有 CLS 兼容的名称`C`, C `1<T>, and`C`2<K,V>`， 分别。[注意：所有标准库类型的名称都符合 CLS；例如，System.Collections.Generic.IEnumerable`1。尾注]

抱歉，没有以正确的方式出现，发布答案时反引号很棘手。查看 ECMA 文档的准确性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T14:04:02.113

当您处理在编译时已知的类型时，您永远不需要处理`Name`的`Type`，因此诸如此类的名称`Thing`n`不应该成为问题。

我不确定您的第一个示例中发生了什么，就像我这样做时一样：

```
class Person
{
    private List<int> intList;
} 
```

和这个：

```
class Program
{
    static void Main(string[] args)
    {
        var fields = typeof(Person).GetFields(BindingFlags.DeclaredOnly 
                                            | BindingFlags.NonPublic 
                                            | BindingFlags.Instance);

        foreach (var fieldInfo in 
            fields.Where(fieldInfo => fieldInfo.FieldType == typeof(List<int>)))
        {
            Console.WriteLine(fieldInfo.ToString());

        }
    }
} 
```

我得到了我所期望的，即

```
System.Collections.Generic.List`1[System.Int32] intList 
```

在您提供的代码示例中，类型在编译时也是已知的；比你展示的更好

```
//Initialize collections
FieldInfo[] properties = type.GetFields(BindingFlags.DeclaredOnly 
                                      | BindingFlags.NonPublic 
                                      | BindingFlags.Instance);
foreach (FieldInfo f in properties)
{
   if(typeof(IList<int>).IsAssignableFrom(f.FieldType)
   && f.GetValue(obj) == null)
   {
         object value = Container.Resolve(f.FieldType);
         f.SetValue(obj, value);
   }
} 
```

你*知道*什么是a `IList<int>`；您可以根据需要使用`IsAssignableFrom`或`==`。

[（如果您`IsAssignableFrom`像我一样对 感到困惑，请记住：`if (a is b)`与 是相同的测试`if (typeof(b).IsAssignableFrom(a.getType()))`。订单交换轮次。]

# f# - 为什么空检查会导致 F# 中的等式约束？

> ID：13087827
> 
> 赞同：5
> 
> 时间：2012-10-26T13:24:03.467
> 
> 标签：f#, type-constraints

如果泛型类型与`null`（并且仅与`null`）进行比较，这会导致编译器将类型约束为可空（可以）和可相等的类型。

为什么是后者？`null`对于可以为空但不支持相等的类型，似乎只比较应该是可以的。

我知道我可以用它`Unchecked.equals`来获得可为空的约束，只是想知道我是否遗漏了一些明显的原因，为什么`((=) null)`需要一个可平等的论点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T14:04:30.513

运算符`(=)`具有类型。`'a -> 'a -> bool when 'a : equality`因此，运算符的任何使用都将限制其参数的类型以支持相等。虽然在与 null 文字进行比较时，这在技术上确实是一个不必要的限制，但我认为编译器只使用其正常的推理过程而不是将其视为特殊情况是合理的。

请注意，`obj.ReferenceEquals(x, null)`如果添加的约束令人反感，您始终可以使用。

# android - 在本地网络上使用 android 作为网络服务器

> ID：13087828
> 
> 赞同：0
> 
> 时间：2012-10-26T13:24:03.730
> 
> 标签：android, connection, webserver, localhost

我见过一些应用程序，您可以在其中打开您的计算机网络浏览器，将本地 IP 地址输入到 android 设备，然后访问从设备托管的主页。

一个例子是这个应用程序：[Finger Timer - play.google.com](https://play.google.com/store/apps/details?id=tw.url.omega.fingertimerfree&feature=search_result#?t=W251bGwsMSwxLDEsInR3LnVybC5vbWVnYS5maW5nZXJ0aW1lcmZyZWUiXQ)

有谁知道这是怎么做到的？谷歌有这方面的 API，或者你有什么我可以开始的例子吗？我不是专业的开发人员，所以我更喜欢保持简单（很少有技术）。

我的想法是这样的：

*   在我的设备上创建 HTML 或 PHP 页面
*   以某种方式从我的应用程序中提供一些信息
*   托管该页面，以便可以从本地网络上任何设备上的任何 Web 浏览器访问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:28:26.897

“爪子服务器”就是这样做的。

这是有关如何使用它的一些[文档。](http://paw-android.fun2code.de/pdf/paw_functions.pdf)

*   在 XDA-Devs 查看这个线程，它解释了这个过程。 [http://forum.xda-developers.com/showthread.php?p=9893301](http://forum.xda-developers.com/showthread.php?p=9893301)
*   在[谷歌播放](https://play.google.com/store/apps/details?id=de.fun2code.android.pawserver)
*   PawServer[主页](http://paw-android.fun2code.de/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:55:59.347

我发现这个页面非常好。正是我想要的。它甚至有源代码，所以这就是我可以更快学习的方法。 [Android 开发博客](http://www.androiddevblog.net/android/a-bare-minimum-web-server-for-android-platform) 正如博主所说，它包含：“ *Android 平台的最低限度的 Web 服务器*”。

# android - 使用“Run As”运行 JUnit 测试和 Maven 的测试有什么区别？

> ID：13087832
> 
> 赞同：4
> 
> 时间：2012-10-26T13:24:24.213
> 
> 标签：android, unit-testing, maven, m2e, jmockit

我有一些我不完全理解的问题。我有一些名为 ApplicationContext 的类，它扩展了 android.app.Application。这个类将被 JMockIt's 模拟`MockUp<T>`。当我让我的 JUnit 测试运行时`mvn install`，一切正常，但是当我运行我的测试时，`Run As->JUnit Test`我得到了这样的异常（只有这个扩展了 android.app.Application 的测试）......

```
java.lang.TypeNotPresentException: Type [unknown] not present 
```

我想这与 android 必须在提供的范围内有关：

```
 <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>${platform.version}</version>
        <scope>provided</scope>
    </dependency> 
```

也许测试在运行时没有这个包或其他东西。但我想知道为什么他们只是将它放在`mvn install`，因为包总是链接为 Maven 依赖项。我需要了解为什么在使用“运行方式”运行测试时找不到来自 android.app.Application 的类。以下是我的一些配置设置：

![构建路径](../Images/aa70a12fcd7fbf738bdc5eb095a3ca4d.png)

**.classpath**

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>
    <classpathentry kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
    <classpathentry kind="src" output="bin/classes" path="src/main/java">
        <attributes>
            <attribute name="optional" value="true"/>
            <attribute name="maven.pomderived" value="true"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="src" path="gen"/>
    <classpathentry kind="src" output="bin/classes" path="src/test/java">
        <attributes>
            <attribute name="maven.pomderived" value="true"/>
        </attributes>
    </classpathentry>
    <classpathentry exported="true" kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER">
        <attributes>
            <attribute name="maven.pomderived" value="true"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="output" path="bin/classes"/>
</classpath> 
```

**。项目**

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>net.devgems.android.kurzparkzonewien-TRUNK</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.ResourceManagerBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.PreCompilerBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.ApkBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.m2e.core.maven2Builder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>com.android.ide.eclipse.adt.AndroidNature</nature>
        <nature>org.eclipse.jdt.core.javanature</nature>
        <nature>org.eclipse.m2e.core.maven2Nature</nature>
    </natures>
</projectDescription> 
```

**pom.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>net.devgems.android</groupId>
    <artifactId>kurzparkzonewien</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>apk</packaging>
    <name>kurzparkzonewien</name>

    <properties>
        <platform.version>1.6_r2</platform.version>
        <android.sdk.path>/opt/android-sdk-linux</android.sdk.path>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>${platform.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.googlecode.json-simple</groupId>
            <artifactId>json-simple</artifactId>
            <version>1.1.1</version>
            <exclusions>
                <exclusion>
                    <groupId>junit</groupId>
                    <artifactId>junit</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.0.1</version>
        </dependency>

        <dependency>
            <groupId>com.googlecode.jmockit</groupId>
            <artifactId>jmockit</artifactId>
            <version>0.999.17</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>support-v4</artifactId>
            <version>r6</version>
        </dependency>
    </dependencies>

    <build>
        <outputDirectory>bin/classes</outputDirectory>
        <testOutputDirectory>bin/test-classes</testOutputDirectory>

        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.1.1</version>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                    <sdk>
                        <platform>4</platform>
                        <path>${android.sdk.path}</path>
                    </sdk>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

如果您需要更多其他信息，请告诉我，因为我不确定在哪里正确隔离问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:16:49.127

我得出的结论是，我的问题中解释的错误是正确的行为。之所以如此，是因为您不能期望 Eclipse（或 ADT 插件）知道如何处理由 Maven 组织的依赖项。这是一个 Maven 项目，所以必须使用 Maven 来安装、部署和测试。我认为“Run As”和“mvn test”之间的区别在于，第一个使用Eclipse内置的位于plugins目录中的JUnit库，后者使用Maven配置的库。所以这是两个不同的世界，没有任何共同之处。在我看来，Maven 项目主要与 Eclipse Run As 等一起工作只是巧合。但是如果存在依赖问题，Eclipse 无法管理它，因为它是一个 Maven 项目，而不是一个 Eclipse 项目。

但是对于上面的这种情况，我找到了一个很好的解决方法，它至少适用于测试。我必须转到“Java Build Path -> Libraries”，并且必须添加所有 Maven 依赖项，包括使用的 android.jar 作为外部依赖项（它不影响 Maven）。然后我能够通过“Run As -> JUnit Test”执行所有测试（有时我必须首先执行“Project Clean”，否则我会遇到 ClassNotFoundExceptions）。

如果我的假设有误，请随时纠正我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-26T17:02:40.467

我认为主要区别在于：

`Run as Maven test`*只会执行以“Test”*结尾的测试类。
例如，如果测试类以“Tests”或其他任何内容结尾，则它们不会被执行。
但`Run as JUnit Test`将测试所有类中的所有测试用例。

详细的区别在下面的 URL 中列出：
[https ://cwiki.apache.org/confluence/display/UIMA/Differences+between+Running+Unit+Tests+in+Eclipse+and+in+Maven](https://cwiki.apache.org/confluence/display/UIMA/Differences+between+Running+Unit+Tests+in+Eclipse+and+in+Maven)

# mysql - 加入查询也返回空

> ID：13087836
> 
> 赞同：0
> 
> 时间：2012-10-26T13:24:44.370
> 
> 标签：mysql, sql

我有三张表（更多的列，但列出了重要的列）：

```
users
user_id - name
1         DAN
2         TED
3         SAM

list_shares
list_shares_id - user_id - list_id
1                1         123
2                3         123
3                2         456

list_contribute
list_contr_id - list_id - can_contribute
1               123       3 
```

我想显示在 list_id 下的表 list_shares 中的所有用户，将其与 users 表连接以获取用户信息，并计算其中有多少也在贡献表中

基本上 - 用户可以与用户共享列表并邀请一些用户贡献，但并非所有共享的用户都可以贡献，因此单独的 list_contribute 表。

这是我首先使用的，它只显示具有特定 ID 的所有用户：

```
select u.name, u.live_prof_pic, u.url, u.user_id from list_shares ls 
join users u on ls.user_id = u.user_id
where ls.list_id = '123' 
```

这带来了两个结果，这是正确的——下一个查询试图找出这两个中的哪一个也在 list_contribute 表中——但是，它将结果减少到一个，而我希望它返回两个结果，如果不是，则显示 0 表示 how_many在 list_contribute

```
select u.name, u.live_prof_pic, u.url, count(ls.list_shares_id) as how_many, u.user_id from list_shares ls
join users u on ls.user_id = u.user_id
left join list_contribute lc on ls.list_id = lc.list_id
where ls.list_id = '123' 
```

在上面的数据中我想返回

```
user_id    name    how_many    
3          SAM     1
1          DAN     0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:19:44.847

如果我说得对 - 这就是你需要的

[**SQL 小提琴示例**](http://sqlfiddle.com/#!2/c048f/9)

```
select
    u.user_id, u.name,
    count(case when lc.can_contribute = u.user_id then 1 else null end) as HowMany
from users as u
    inner join list_shares as ls on ls.user_id = u.user_id
    inner join list_contribute as lc on lc.list_id = ls.list_id
group by
    u.user_id, u.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:27:35.157

添加 GROUP BY 使其成为标准 SQL 聚合

```
select u.name, u.live_prof_pic, u.url, count(ls.list_shares_id) as how_many, u.user_id
from 
list_shares ls
join users u on ls.user_id = u.user_id
left join list_contribute lc on ls.event_id = lc.event_id
where ls.list_id = '123'
group by u.name, u.live_prof_pic, u.url, u.user_id 
```

MySQL 有一个[垃圾](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html#sqlmode_only_full_group_by)扩展，它试图删除要求但经常提供不正确的数据

编辑，评论后。

您仍然应该使用正确的 GROUP BY 语法

但是，您的 COUNT 应该是`COUNT(lc.event_id)`计算子行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T14:05:30.263

如果没有返回所需的结果集，请使用下面的查询，这意味着您在 list_shares 中有没有相应用户的孤立记录集。

```
 select 
          u.name
        , u.user_id   
        , count(lc.list_id) as how_many
    from 
        list_shares ls
    INNER JOIN
        users u 
    on 
        ls.user_id = u.user_id
    left join 
        list_contribute lc 
    on 
        ls.list_id = lc.list_id
    where 
        ls.list_id = '123'
    GROUP BY
          u.name
        , u.user_id 
```

不确定 mysql 计数是如何工作的，所以要 100% 确定：

```
 select 
          u.name
        , u.user_id   
        , SUM(CASE WHEN lc.list_id IS NOT NULL THEN 1 ELSE 0 END CASE) as how_many
    from 
        list_shares ls
    INNER JOIN
        users u 
    on 
        ls.user_id = u.user_id
    left join 
        list_contribute lc 
    on 
        ls.list_id = lc.list_id
    where 
        ls.list_id = '123'
    GROUP BY
          u.name
        , u.user_id 
```

# actionscript-3 - 在外部类函数中声明阶段并在其他类中使用它？

> ID：13087837
> 
> 赞同：0
> 
> 时间：2012-10-26T13:24:48.670
> 
> 标签：actionscript-3, positioning, stage

我想要实现的是制作一个“centerItem”方法，将你的对象集中在舞台上。我想在我的**Misc**类文件中添加这个方法，并在我的应用程序的任何地方使用它。我已经像下面这样尝试过，但这没有用：

```
public static function centerItem(item:*):void
{
    item.x = (stage.stageWidth - item.width) >> 1;
    item.y = (stage.stageHeight - item.height) >> 1;
} 
```

并这样称呼它：

```
Misc.centerItem(myObjectToPlaceOnStage); 
```

但是当我尝试它时，它只会给我一个错误。我已经在网上看了，但我没有找到任何建设性的解决方案。我希望有人能找到解决方案/黑客

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:33:23.853

如果您的对象已经添加到舞台上，您可以访问其舞台属性：

```
public static function centerItem(item:DisplayObject):void
{
    item.x = (item.stage.stageWidth - item.width) >> 1;
    item.y = (item.stage.stageHeight - item.height) >> 1;
} 
```

顺便说一句，我已将您的 item 参数输入到`DisplayObject`，因此您确定它具有`width`,`height`和`stage`属性。

# jquery - jquery在2个链式表单之间传递值

> ID：13087838
> 
> 赞同：0
> 
> 时间：2012-10-26T13:24:50.470
> 
> 标签：jquery, html

下午，我的问题与 2 个链式表单有关，其中第一个表单的值得到验证，如果确定，则显示第二个表单（第一个表单的输入字段被停用，提交按钮被隐藏）。

我的问题是：如何从第一个表单中获取值作为隐藏字段附加到第二个表单。

我的代码是这样的：

```
<form id="upfotos_dados" action="POST">
     <p class="desc_nome"><strong>O seu nome: </strong></p>
     <input type="text" id="fotos_nome" />

     <p class="desc_email"><strong>O seu email: </strong></p>
     <input type="text" id="fotos_email" />

     <p class="desc_especie"><strong>Fotografias da espécie: </strong></p>
     <input type="text" size="20" id="fotos_especie" value="Asplenium Cetarach" disabled />

     <input value="Confirmar" type="submit" name="submit" class="button submit_dados" />
     <div class="clearfix"></div>
</form>

<form id="upload_imagens" action="javascript:$('#file_upload').uploadifive('upload')">
  <div id="queue"></div>
  <input id="file_upload" name="file_upload" type="file" multiple>
  <input value="Enviar Fotografias" type="submit" name="submit" class="enviafotos-button" /> 
</form> 
```

和 jQuery：

```
 $(document).ready(function(){
        $("#upload_imagens").hide();    
    });

    $('.submit_dados').live("click",function(){

        if($('#fotos_email').val() == ''){ $('#fotos_email').parent().find('.desc_email').append("<span style='color:#A00'>Campo obrigatório.</span>"); return false; }
        else if(!IsEmail($('#fotos_email').val()) ){ $('#fotos_email').parent().find('.desc_email').append("<span style='color:#A00'>Email incorrecto.</span>"); return false; }
        if($('#fotos_nome').val() == ''){ $('#fotos_nome').parent().find('.desc_nome').append("<span style='color:#A00'>Campo obrigatório.</span>"); return false; }
        if($('#fotos_especie').val() == ''){ $('#fotos_especie').parent().find('.desc_especie').append("<span style='color:#A00'>Campo obrigatório.</span>"); return false; }

        if($('#fotos_email').val() != '' && IsEmail($('#fotos_email').val()) && $('#fotos_nome').val() != '' && $('#fotos_especie').val() != ''){
            $("#upload_dados").hide();
            $("#upload_imagens").show();
            return false;
        }
    }); 
```

有些事情仍在进行中，例如同时验证字段，不幸的是我还没有设法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:35:06.990

虽然我不知道为什么你必须有两个单独的表单而不是一个，但一种可能的方法是循环遍历第一个表单的所有输入并将它们作为子项附加到第二个表单。像这样的事情：

```
$('#form1 input, #form1 select').each(function(index, element){
  $(#form2).append('<input type="hidden" name="'+$(element).attr('id')+'" value="'+$(element).val()+'">');
}); 
```

类似的东西，也许这就是你要找的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:39:51.407

这应该从 upfotos_dados 获取所有输入，并在 upload_imagens 中为每个输入附加隐藏输入，其中包含 id -> name 和 value -> value

```
$("#upfotos_dados input").each(function() {
    $(#upload_imagens).append('<input type="hidden" name="'+this.id+'" value="'+this.value+'">');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:49:27.053

您可以修改 .submit_dados 单击事件处理程序。使用一些重构代码，例如，并将输入值附加`upload_dados`到`upload_imagens`.

而且您不需要在附加这些值时再次检查值，因为您已经完成了这些验证。

```
$('.submit_dados').on("click", function () {
    var parent =$("#upload_dados");
    var fotos_email = $('#fotos_email');
    var fotos_email_value = fotos_email.val();
    var fotos_nome = $('#fotos_nome');
    var fotos_nome_value = fotos_nome.val();
    var fotos_especie = $('#fotos_especie');
    var fotos_especie_value = fotos_especie.val();

    if (fotos_email_value == '') { parent.find('.desc_email').append("<span style='color:#A00'>Campo obrigatório.</span>"); return false; }
    else if (!IsEmail(fotos_email_value)) { parent.find('.desc_email').append("<span style='color:#A00'>Email incorrecto.</span>"); return false; }
    if (fotos_nome_value == '') { parent.find('.desc_nome').append("<span style='color:#A00'>Campo obrigatório.</span>"); return false; }
    if (fotos_especie_value == '') { parent.find('.desc_especie').append("<span style='color:#A00'>Campo obrigatório.</span>"); return false; }

    //if (fotos_email_value != '' && IsEmail(fotos_email_value) && fotos_nome_value != '' && fotos_especie_value.val() != '') {
    //var upload_dados = $("#upload_dados");
    parent.hide();
    var upload_imagens = $("#upload_imagens");

    parent.find('input').each(function () {
        upload_imagens.append($('<input/>').attr('type', 'hidden').attr('name', this.id).val(this.value));
    });
    return false;
    //}
}); 
```

# ruby-on-rails - rails: 为 current_user 选择 collection_select

> ID：13087848
> 
> 赞同：0
> 
> 时间：2012-10-26T13:25:16.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个盒子，里面有很多属于一个类别的项目。创建 Box 时，它具有 user_id。项目有一个 category_id。

我已经看到，如果您在相关表中有一个 user_id，它可以正常工作：

```
<%= f.collection_select :category_id, Category.where(:user_id => current_user.id), :id , :name %> 
```

但是如何从 current_user 输入的内容中获取 Category collection_select - 我必须将 user_id 添加到 Categories 还是可以以某种方式加入我的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:00:39.760

也许这种方式更容易：

```
<%= f.collection_select :category_id, current_user.categories, :id, :name %> 
```

PS：如果你把它放在你的控制器中会更好，所以，如果你必须改变选择并添加一些子句，你几乎不需要改变你的所有视图，只需要改变控制器（MVC）。

# verilog - Verilog中数组错误的初始化

> ID：13087867
> 
> 赞同：1
> 
> 时间：2012-10-26T13:26:08.877
> 
> 标签：verilog, system-verilog, hdl, array-initialization

初始化数组`sbox`时，出现语法错误。请帮帮我。

```
 reg  [7:0] sbox[15:0];
sbox = '{
 8'h63, 8'h7c, 8'h77, 8'h7b,
 8'hf2, 8'h6b, 8'h6f, 8'hc5,
 8'h30, 8'h01, 8'h67, 8'h2b,
 8'hfe, 8'hd7, 8'hab, 8'h76
}; 
```

这实际上是 sbox。它显示的错误：

> “=”附近：语法错误，意外的“=”，需要 IDENTIFIER 或 TYPE_IDENTIFIER

我正在使用modelsim模拟器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T14:50:37.403

您用于数组赋值的语法仅在 中有效，在`SystemVerilog`中无效`Verilog`。

所以你的编译器需要支持这个，你需要告诉编译器这个文件是SystemVerilog。大多数编译器（包括modelsim）将假定基于扩展名的文件类型，例如`.v == Verilog`and `.sv == SystemVerilog`，而其他编译器则需要一个开关。

另外，正如toolic的回答中所指出的，您需要将赋值放在一个`initial`块中，或者您可以将声明与赋值结合起来，如下所示：

```
reg [7:0] sbox[15:0] = '{
        8'h63, 8'h7c, 8'h77, 8'h7b,
        8'hf2, 8'h6b, 8'h6f, 8'hc5,
        8'h30, 8'h01, 8'h67, 8'h2b,
        8'hfe, 8'hd7, 8'hab, 8'h76
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:27:32.180

分配应该在`initial`or`always`块内：

```
module tb;

reg [7:0] sbox[15:0];

initial begin
    sbox = '{
        8'h63, 8'h7c, 8'h77, 8'h7b,
        8'hf2, 8'h6b, 8'h6f, 8'hc5,
        8'h30, 8'h01, 8'h67, 8'h2b,
        8'hfe, 8'hd7, 8'hab, 8'h76
    };
end

endmodule 
```

# bash - 从bash中的字符串打印列

> ID：13087868
> 
> 赞同：1
> 
> 时间：2012-10-26T13:26:08.157
> 
> 标签：bash, awk

**更新的问题** 好的，所以我有一个文件，其中包含如下行：

```
44:)   2.884E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  9.990E+02
45:)   2.884E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  9.990E+02
1:)   3.593E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  1.000E+05
2:)   3.593E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  1.000E+05 
```

第一列中的数字从 1 到 x（在本例中为 45），然后以 1 次重新开始。我想将一些列移动到单独的文件中。我要移动的列的索引存储在变量/数组`$selected_columns`中（在本例中为 2、5 和 8），而我要移动的列数存储在其中`$number_of_columns`（在本例中为 3）。

然后我想创建 45 个文件，一个用于 all 的选定列`1:)`，一个用于 all 的选定列`2:)`，依此类推。我想让它尽可能通用，因为列数和从 1 到 x 的数字都会改变。数字 x 始终是已知的，并且要提取的列由用户选择。

**原始问题：**

我有一个由 egrep 获取的字符串。然后我想打印该字符串中的一些列（单词）。该位置（列索引）在我的 bash 脚本的列表中是已知的。目前它看起来像这样：

```
line=$(egrep " ${i}:\)" $1)

for ((j=1; j<=$number_of_columns; j++))
do
    awk $line -v current_column=${selected_columns[$j]} '{printf $(current_column)}' > "history_files/history${i}"
done 
```

其中`number_of_columns`是要打印并`selected_columns`包含这些列的相应索引的列数。例如`number_of_columns = 3`and `selected_columns = [2 5 8]`，所以我想将字符串中的字号 2、5 和 8 打印`line`到文件`history${i}`中。

我不确定出了什么问题，但这已经通过一些试验和错误来完成。当前的错误是`awk: cannot open 0.000E+00 (No such file or directory)`。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:37:49.973

我想，您必须将`awk`行更改为：

```
echo $line | awk -v current_column=${selected_columns[$j]} ... 
```

对于您更新的问题，如果列在 array 中`$selected_columns`。在您的示例文件中，列由多个相邻空格分隔。如果您的原始文件不是这样，您可以省略`sed`之前的`grep`.

```
columns=`echo ${selected_columns[*]} | sed 's/ /,/g'`
for i in `seq 45`; do
    sed -e 's/  */ /g' file | grep "^$i:)" | cut -d' ' -f $columns >file-$i
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:16:21.543

在：

```
awk $line -v ... 
```

$line 保存 grep 的输出，这可能不是 awk 期望在它的命令行上看到的。另外，这是：

```
for ((j=1; j<=$number_of_columns; j++))
do
    anything > "history_files/history${i}"
done 
```

每次循环都会导致您覆盖历史文件。我不知道你在那里真正想要什么。

不过，您的脚本还有许多其他问题。您说“例如 number_of_columns = 3 和 selected_columns = [2 5 8]，所以我想将字符串行中的单词编号 2、5 和 8 打印到文件 history${i}。”。

这在 awk 中完全是微不足道的，你也不需要在 awk 之外做一个“grep”，所以你可以把整个事情做为：

```
awk -v pat=" ${i}:\)" -v selected_columns="$selected_columns" '

BEGIN { number_of_columns = split(selected_columns,selected_columnsA) }

$0 ~ pat {
    sep=""
    for (j=1;j<=number_of_columns;j++) {
        current_column = selected_columnsA[j]
        printf "%s,%s",sep,lineA[current_column]
        sep = "\t"
    }
    print ""
}
' "$1" > "history_files/history${i}" 
```

如果这对您不起作用，让我们修复它而不是尝试修复原始脚本。听起来您在上述之外有封闭循环，很可能它也可能只是 awk 脚本的一部分。

根据更新的 OP 进行编辑：

我添加了很多评论，但如果您有任何问题，请告诉我：

```
$ cat file
44:)   2.884E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  9.990E+02
45:)   2.884E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  9.990E+02
1:)   3.593E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  1.000E+05
2:)   3.593E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  1.000E+05
$
$ cat tst.sh
selected_columns=(2 5 8)

selCols="${selected_columns[@]}"

awk -v selCols="$selCols" '

BEGIN { # Executed before the first line of the input file is read

    # Split the string of selected column numbers, selCols, into
    # an array selColsA where selColsA[1] has the value of the
    # first space-separated sub-string of selCols (i.e. the number
    # of the first column to print). Note that we dont need the
    # number of columns passed into the script as a result of
    # splitting the string is the count of elements put into the
    # array as a return code from the split() builtin function.
    numCols = split(selCols,selColsA)
}

{ # Executed once for every line of the input file

    # Create a numerix suffix like "45" from the first column
    # in the current line of the input file, e.g. "45:)" by
    # just getting rid of all non-digit characters.
    sfx = $1
    gsub(/[^[:digit:]]/,"",sfx)

    # Create the name of the output file by attaching that
    # numeric suffix to the base value for all output files.
    #histfile = "history_files/history" sfx
    histfile = "tmp" sfx

    # Loop through every column we want printed. selColsA[<index>]
    # gives us a column number which we can then use to access the
    # columns of the current line. Awk uses the builtin variable $0
    # to hold the current line, and it autolatically splits it so
    # that $1 holds the first column, $2 is the second, etc. So
    # if selColsA[1] has the value 3, then $(selColsA[1]) would be
    # the value of the 3rd column of the current input line.
    sep=""
    for (i=1;i<=numCols;i++) {
        curCol = selColsA[i]

        # Print the current column, prefixed by a tab for all but
        # the first column, and without a terminating newline so the
        # next column gets appended to the end of the current output line.
        # Note that in awk "> file" has different semantics from shell
        # and opens the file for writing the first time the line is hit
        # like "> file" in shell, but then appends to it every time its
        # hit afterwards, like ">> file" in shell.
        printf "%s%s",sep,$curCol > histfile
        sep = "\t"
    }
    # Add a newline to the end of the current output line
    print "" > histfile
}

' "$1"
$
$ ./tst.sh file
$
$ cat tmp1
3.593E-02       2.780E+02       1.000E+05
$ cat tmp2
3.593E-02       2.780E+02       1.000E+05
$ cat tmp44
2.884E-02       2.780E+02       9.990E+02
$ cat tmp45
2.884E-02       2.780E+02       9.990E+02 
```

顺便说一句，我使用上面的“列”和“行”这两个词是为了您的利益，因为您只是在学习，但仅供参考，awk 术语实际上是“字段”和“记录”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:59:25.020

我认为你可以使用 cut 来做你想做的事情，即

```
echo "$line" | cut -d" " -f2 -f5 -f8 > "history_files/history${i}" 
```

-d 是你的分隔符，我用空格来测试，因此“”

希望这可以帮助

# azure - 在本地测试 Azure 服务总线，无需任何订阅或登录

> ID：13087872
> 
> 赞同：41
> 
> 时间：2012-10-26T13:26:18.643
> 
> 标签：azure, namespaces, azureservicebus, azure-acs

有没有办法在本地模拟器上使用和发现**Azure 服务总线**，而无需注册到真正的 Azure 服务？

我正在关注有关使用**Azure 服务总线**的教程，但在某些时候 a`Namespace`和 an`Issuer Name`是`Key`必需的。我没有这些数据，因为我没有注册到 Azure 服务，我现在不想这样做（*当我准备好开发/测试一些真实的东西时，我会得到我的试用版*）。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-27T06:20:42.417

如果您想使用 Brokered Messaging 功能（队列、主题和订阅），那么您可以安装**Service Bus for Windows Server**，这将允许您在本地进行测试。

[http://msdn.microsoft.com/en-us/library/windowsazure/jj193022(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj193022(v=azure.10).aspx)

对于中继消息，您必须使用 Azure 帐户。使用中继服务进行开发和测试的成本是最低的，因此为此创建按需付费订阅可能是值得的。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-26T14:52:36.950

不幸的是，没有可以在本地运行的模拟**Azure 服务总线。**Azure 服务总线需要一个[活动的 Azure 订阅](https://www.windowsazure.com/en-us/pricing/purchase-options/)。您将需要试用版、MSDN 订阅或付费订阅即用即付。继电器本身非常便宜 - [`$0.01 per 10,000 messages`](https://www.windowsazure.com/en-us/pricing/details/#header-6)。深入了解并[开始试用您的 Azure 90 天试用版](https://www.windowsazure.com/en-us/pricing/free-trial/)。如果您的试用期已用完，我相信如果您能证明延期的合理性，MS 会与您合作。

我希望它在没有订阅的情况下无法工作的原因之一是服务总线需要[**Azure ACS**](http://msdn.microsoft.com/en-us/library/windowsazure/gg429786.aspx)进行身份验证（*这是您正在寻找的来源） `Issuer Name`，`Key`*据我所知，这[也缺乏仿真。](https://stackoverflow.com/questions/11602428/implementing-acs-on-emulator-web-application/11602802#11602802)

# java - 重定向到 HTTPS 时丢失请求属性

> ID：13087878
> 
> 赞同：0
> 
> 时间：2012-10-26T13:26:37.187
> 
> 标签：java, http, tomcat, servlets, ssl

我正在尝试在 Tomcat 上通过 SSL 实现登录。登录 servlet 称为 IniciarSesion，因此我将以下内容添加到 web.xml：

```
<security-constraint>
            <web-resource-collection>
                <web-resource-name>Seguridad en Acceso</web-resource-name>
                 <url-pattern>/IniciarSesion</url-pattern>
            </web-resource-collection>
            <user-data-constraint>
             <transport-guarantee>CONFIDENTIAL</transport-guarantee>
            </user-data-constraint>
</security-constraint> 
```

现在的问题是，当我尝试通过以下方式获取输入密码时：

```
String nick=(String)req.getParameter("login"); 
```

这将返回 null，从 http 重定向到 https 时请求参数丢失。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:04:24.030

SSL 的全部意义在于保护传输。如果您首先通过 http 发送登录凭据，那么重定向到 https 是没有意义的，因为您已经“以明文方式”发送了信息。您所做的是将您的登录表单发布到 https URL，或者通过明确设置表单 url，或者通过 https 加载您的登录页面。这将涉及将登录页面添加为受保护的资源，就像您的登录 servlet 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:43:15.100

听起来好像您的登录页面（定义“登录”的地方）没有受到保护。当它通过 HTTP 访问您的 /iniciarSesion servlet 时，tomcat 对 SSL 站点执行 HTTP REDIRECT。真正的重定向不会保留最初发送到服务器的数据，因此您会丢失数据。我的建议是将您的登录页面包含在 CONFIDENTIAL 范围内。

# unit-testing - TFS2012中测试用例和单元测试之间的联系是什么

> ID：13087884
> 
> 赞同：1
> 
> 时间：2012-10-26T13:27:20.343
> 
> 标签：unit-testing, tfs

请帮我找出测试用例和.net单元测试之间的关系是什么？我们如何结合测试用例来实现 VS 2012 中的单元测试？我是 .NET 的新手，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:31:57.887

TFS 中的测试用例工作项是一种定义“测试”的方式，可以运行该测试以确保您的软件按预期运行。它将由描述该过程的许多“测试步骤”组成。

例如，一个简单的测试用例可能包含以下步骤：

1.  步骤：运行应用程序 - 预期结果：应用程序运行
2.  步骤：输入用户名，单击登录 - 预期结果：错误，“请输入密码”。

单元测试是您代码库的一部分，不会以任何方式与 TFS“测试用例”相关联。

互联网和书籍中有很多关于单元测试入门的文章。简而言之，创建一个“单元测试项目”，它将为您希望测试的代码中的每个类都有一个“测试类”。测试类将由许多测试方法组成，这些方法将提供您的代码行为符合预期的断言。

**TLDR；**

单元测试测试“代码单元”。TFS Test Case Work Items，存储应用程序行为的测试定义。

# windows - CMD - 等待并行命令行完成？

> ID：13087885
> 
> 赞同：3
> 
> 时间：2012-10-26T13:27:29.577
> 
> 标签：windows, cmd, windows-7

我通过命令行（ win7 cmd）**并行**执行 4 个任务：

```
start defrag /A c:
start defrag /A d:
start defrag /A e:
start  defrag /A f:
dir 
```

但是该`dir`命令在第一行之后立即执行。

我希望`dir`在所有 4 个完成后执行命令。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T13:43:59.873

试试这个：

```
start defrag /A c:
start defrag /A d:
start defrag /A e:
start defrag /A f:

:StartLoop
:: Check whether any of the defrags are running...
tasklist|Findstr /i /c:"defrag"
:: Exiting the loop if tasklist didn't find any defrags.
If %errorlevel% NEQ 0 (
   GoTo :ExitLoop
)
choice /T 10 /D Y /M "Waiting for 10 seconds..."
GoTo :StartLoop
:ExitLoop
dir 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T06:51:04.343

这将导致`defrag /A [drive]`为 c、d、e 和 f 运行，等待每个完成，然后再开始下一个。最后，它将退出并运行`dir`。

```
for %%i in (c d e f) do start "" /B /WAIT defrag /A %%i:

dir 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-07T21:10:47.153

您可以使用该`defrag /M`选项在多个驱动器上启动碎片整理，然后使用该`defrag /T`选项等待每个驱动器完成。 `defrag /T`只等待一个卷完成，但由于您想等待所有卷，这对您有用：

```
REM This will start defrag running concurrently on all four drives:
defrag c: d: e: f: /M

REM Wait for each drive to complete.  But since you want to wait of them, that is okay.
REM The order is unimportant
defrag c: /T
defrag d: /T
defrag e: /T
defrag f: /T

REM They are all done.  You are set to whatever you want to do next.
dir 
```

# node.js - 从抓取的网页中获取页面标题

> ID：13087888
> 
> 赞同：10
> 
> 时间：2012-10-26T13:28:05.647
> 
> 标签：node.js

```
var http = require('http');
var urlOpts = {host: 'www.nodejs.org', path: '/', port: '80'};
http.get(urlOpts, function (response) {
response.on('data', function (chunk) {
var str=chunk.toString();
var re = new RegExp("(<\s*title[^>]*>(.+?)<\s*/\s*title)\>", "g")
console.log(str.match(re));
});

}); 
```

输出

> user@dev ~ $ node app.js ['node.js'] null null

我只需要得到标题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T13:41:03.567

我建议使用[`RegEx.exec`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)而不是[`String.match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match). 您还可以使用文字语法定义正则表达式，并且只定义一次：

```
var http = require('http');
var urlOpts = {host: 'www.nodejs.org', path: '/', port: '80'};
var re = /(<\s*title[^>]*>(.+?)<\s*\/\s*title)>/gi;
http.get(urlOpts, function (response) {
    response.on('data', function (chunk) {
        var str=chunk.toString();
        var match = re.exec(str);
        if (match && match[2]) {
          console.log(match[2]);
        }
    });    
}); 
```

该代码还假设`title`将完全在一个块中，而不是在两个块之间拆分。最好保留块的聚合，以防`title`在块之间拆分。`title`一旦找到它，您可能还想停止寻找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T13:40:43.490

试试这个：

```
var re = new RegExp("<title>(.*?)</title>", "i");
console.log(str.match(re)[1]); 
```

# perl - 在 Perl 中实现一个节点列表

> ID：13087892
> 
> 赞同：4
> 
> 时间：2012-10-26T13:28:44.447
> 
> 标签：perl, list, implementation

我编写了以下模块，但不确定如何引用“last”和“head”节点。以及将下一个节点的地址存储在前一个节点的“{nextNode}”中。

我试图在存储类时保存它的引用，但后来它抱怨：“不是 List.pm 的 HASH 引用”；我明白为什么，但不确定语法会如何。

如果我取消引用 $head 和 $last ($$last->{nextNode} = \$class) 那么我认为它使用的是我的班级的实际名称；列出而不是像我想要的以前的对象。

```
package List;

my $head = undef;
my $last = undef;

sub new {
    my $class = shift;

    # init the head of the list
    if ($head == undef) {
    $head = \$class;
    print "updated head to:$head", "\n";
    }

    $last = \$class;
    $last->{nextNode} = \$class; # update previous node to point on this new one    

    print "updated last to:$last", "\n";
    my $self = {};
    $self->{value} = shift;    
    $self->{nextNode} = ""; # reset next to nothing since this node is last

    return bless $self, $class;
} 
```

多谢你们

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T13:43:35.797

您应该在`$self`任何地方存储而不是`\$class`. 存储 $class 只是存储类的名称，而不是对象本身。

另外，因为`$self->{nextNode}`我会存储一个`undef`而不是一个空白字符串。或者更好的是，根本不创建它并[`exists`](http://perldoc.perl.org/functions/exists.html)在检查它是否存在时使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T18:23:47.523

你想多了。如果您为列表使用数组而不是哈希，则无需担心*head*和*last*。数组的头是`$array[0]`，最后一个成员是`$array[-1]`。简单易做。

这是定义列表的快速标准类定义。我只定义了一个构造函数（新的子例程）和一个方法（列表）。

```
package Local::List;

sub new {
   my $class = shift;

   my $self = {};
   bless $self, $class;
   $self->list([]);
}

sub list {
   my $self = shift;
   my $list_ref = shift;

   if (ref $list_ref ne "ARRAY) {
       return;
   }
   if (defined $list_ref) {
       $self->{LIST} = $list_ref;
   }
   if wantarray {
      return $self->{LIST};
   }
} 
```

第一件事：使用其他人使用的相同标准名称。用于*构造*函数`new`。当我尝试查看有关如何使用您的类的文档时，我可以搜索*new*一词并知道这就是我创建类对象的方式。此外，使用变量名和. 这就是其他人所做的，所以很容易知道发生了什么。**`$class``$self`**

 **请注意，在我的`new`子例程中，传递的第一项是类的名称，而传递给我的其他子例程的第一项是对我的类对象的引用（即`$self`）。这可能是关于类的最难理解的事情。

请注意`new`，我立即创建我的`$self`并祝福它。这样，我可以调用我的其他子例程（我的方法）来为我进行设置。这样，我的构造函数不知道我的类的结构。这有很多优点：

*   当（不是如果）我修改我的类时，我不必修改构造函数。
*   我的构造函数总是与我的所有方法同步。
*   当我开始定义类时，我不必知道我的类对象的结构。我可以开始编写我的课程，而不必担心所有关于它如何工作的肮脏细节。

请注意，`list`子例程（或方法）可以设置列表或返回列表。如果您使用相同的子例程来设置或获取值，会容易得多。同样在您的方法子例程中，当您的方法函数返回错误时，请使用空白返回。否则，总是返回一些东西。这使得测试方法是否失败变得容易。

让我们看看您可能想要的其他一些*方法。*让我们拥有所有四个标准列表函数：

*   推
*   流行音乐
*   转移
*   不移位

这是一个例子：

```
sub push {
    my $self = shift;
    my $member = shift;

    if (not defined $member) {
        return;
    }

    my $list_ref = $self->list;
    my $return = push @{ $list_ref }, $member;
    $self->list($list_ref);

    return $return;
} 
```

哇，这很简单。请注意，`pop`不知道我的班级是什么样的。它使用该`list`方法来检索列表引用。然后它使用内置`push`方法将成员推送到列表中。我保存该返回值，这就是我将返回的值。我什至不确定`push`返回的是什么。我所知道的是，如果 push 成功，它会返回**一些东西。**（是的，我知道它返回列表中的项目数）。

其他三个功能大致相同。这里还有一些：

*   当前的
*   拼接
*   下一个
*   以前的
*   头
*   最后的

您需要为*current*做的就是存储当前值。使用相同的函数来设置和获取值。请注意，我的`list`方法或我的`push`方法，或我的`new`构造函数知道或关心您如何存储它。`next`我们的和`previous`方法也不行。他们需要做的就是增加或减少 的值并使用方法子例程`current`将其存储回来：`current`

```
sub next {
   my $self = shift

   my @list = $self->list;  #Returns a list;
   my $current = $self->current;
   my $list_size = $#list;

   if ($current eq $list_size) {
      return;   #Can't return a value after the end of the list!
   }

   $current++;  #Increment the value;
   my $value = $list[$current];  #I'll return this
   $self->current($current) #Store the new current
   return $value;
} 
```

而且，现在是您问题的基础：获取列表的最后一个值和头值。这是最后一个

```
sub last {
   my $self = shift;

   my $list_ref = $self->list;
   return ${ $list_ref }[-1];
} 
```

快速复制和粘贴会让我头疼：

```
sub head {
   my $self = shift;

   my $list_ref = $self->list;
   return ${ $list_ref }[0];
} 
```

就是这样！你所做的一切担心都是徒劳的。

对不起，很长的帖子。我只是想强调 Perl 中的面向对象编程并不是那么棘手，只要您遵循一些简单的指导原则。

（简单？`use Moose;`不，我说*简单*！）。;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T00:27:00.063

我只想发布我的最终工作版本以供记录和您的反馈/评论。再次感谢！！

```
package List;

my $head = undef;
my $last = undef;

sub new {
    my ($class, $val) = @_;
    my $self = {};

    # init the head of the list
    if (!defined $head) {
    $head = $self;
    print "updated the head of the list ($head)" . "\n";
    }
    else {
    $last->{nextNode} = $self; # update previous node to point on this new one
    }

    $last = $self; # this object is now the last one

    $self->{value} = $val; # store the value
    $self->{nextNode} = undef; # reset next to nothing since this node is last

    return bless $self, $class;
}

sub setVal {
    my ($class, $val) = @_;
    $class->{value} = $val;
}

sub getVal {
    my $class = shift;
    print $class->{value};
}

sub getNext {
    my $class = shift;
    return $class->{nextNode};
}

# return true if this is the last node, otherwise false.
sub isLast {
    my $class = shift;
    return 1 if !defined $class->{nextNode};
    return 0;
}

sub getLast {
    return $last;
}

sub getHead {
    return $head;
}

# looping through all the list and printing the values
sub showList {
    my $node = $head; # set temp node to the head

    while ( !$node->isLast() ) {
    print $node->{value} . "\n";
    $node = $node->{nextNode};
    }

    # printing last value. (should be defined but I check it just in case)
    print $node->{value} . " (last)\n" if defined $node->{value};
}

1; 
```

脚本：

```
my $n0 = new List(4);
my $n1 = new List(8);
my $n2 = new List(9);
my $n3 = new List(3);
my $n4 = new List(1);
my $n5 = new List(0);
my $n6 = new List(5);
print "\nShow list: \n";
$n2->showList(); # any object will print the list 
```**

# grails - grails formRemote 可以在 onComplete 中调用控制器操作吗？

> ID：13087897
> 
> 赞同：0
> 
> 时间：2012-10-26T13:29:02.493
> 
> 标签：grails

请求完全完成后，我可以让 formRemote 调用控制器操作吗？最好在 onComplete 中，但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:19:35.393

```
<g:formRemote onComplete="doTheMonkey();" onSuccess="withMe()"> </g:formRemote> 
```

所有可能的事件都列在文档页面上，请查看[它们](http://grails.org/doc/latest/ref/Tags/formRemote.html)。

# javascript - 将 div 元素分布在盒子的椭圆上，防止重叠和溢出

> ID：13087901
> 
> 赞同：-1
> 
> 时间：2012-10-26T13:29:45.423
> 
> 标签：javascript, jquery, html, ellipse, mindmap

我正在尝试在 div 框中的椭圆中排列一堆不同大小的 div。

这是我到目前为止所拥有的：

[http://jsfiddle.net/gz2bH/5/](http://jsfiddle.net/gz2bH/5/)

```
var stage = $('#stage');
$('#middle').css('top', stage.outerHeight() / 2 - $('#middle').outerHeight() / 2 + 'px');
$('#middle').css('left', stage.outerWidth() / 2 - $('#middle').outerWidth() / 2 + 'px');

drawEllipse(".block", stage.outerHeight() / 2, stage.outerWidth() / 2, stage.outerHeight() / 2, stage.outerWidth() / 2, 360);

function drawEllipse(selector, x, y, a, b, angle) {
var steps = $(selector).length;

var i = 0;
var beta = -angle * (Math.PI / 180);
var sinbeta = Math.sin(beta);
var cosbeta = Math.cos(beta);

$(selector).each(function(index) {
    i += (360 / steps);
    var alpha = i * (Math.PI / 180);
    var sinalpha = Math.sin(alpha);
    var cosalpha = Math.cos(alpha);
    var X = x + (a * cosalpha * cosbeta - b * sinalpha * sinbeta);
    var Y = y + (a * cosalpha * sinbeta + b * sinalpha * cosbeta);

    X = Math.floor(X);
    Y = Math.floor(Y);
    if (X > stage.outerHeight() / 2)
        $(this).css('top', X - $(this).outerHeight() + 'px');
    else 
        $(this).css('top', X + 'px');

    $(this).css('left', Y - $(this).outerWidth() / 2 + 'px');

}); 
```

起点是[https://github.com/addyosmani/js-shapelib/blob/master/jquery.shapelib.js](https://github.com/addyosmani/js-shapelib/blob/master/jquery.shapelib.js)

如何防止 div 的重叠和溢出框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:36:44.660

短轴和长轴（a 和 b）对于您想要完成的任务来说太小了。尝试使用#stage 的这个 css。

```
#stage{
width:800px;
height:600px;
margin:2em;
float:left;
position:relative;
background:#444; 
```

}

# command-line - 用于将 TTF/OTF 字体转换为 SVG 的命令行工具

> ID：13087903
> 
> 赞同：21
> 
> 时间：2012-10-26T13:29:50.057
> 
> 标签：command-line, fonts, svg, file-conversion

有谁知道可以将 TTF 和 OTF 字体转换为 SVG 字体的命令行工具？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-26T14:37:02.470

您可以使用 fontforge 或 batik 从命令行执行此操作。

使用 fontforge（参见[脚本文档](http://fontforge.github.io/en-US/documentation/scripting/)）：

```
#!/usr/bin/fontforge
Open($1)
Generate($1:r + ".svg") 
```

将上述内容保存到`convert2svgfont.pe`文件中，然后调用为：

```
convert2svgfont.pe myfont.ttf 
```

对于蜡染，请参阅[此文档](http://xmlgraphics.apache.org/batik/tools/font-converter.html)，安装然后调用为：

```
java -jar batik-ttf2svg.jar myfont.ttf -o myfont.svg 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-04-19T15:26:46.123

@Erik 之前给出的 fontforge 配方不再有效 - fontforge 已切换到 Python 脚本。

这是我在命令行上将字体从 PFA 转换为 SVG 的方法 - 这也适用于 TTF 等：

```
fontforge -c 'import fontforge;fontforge.open("/usr/share/fonts/X11/Type1/NachlieliCLM-Bold.pfa").generate("NachlieliCLM-Bold.svg")' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-25T12:20:45.173

该答案的蜡染部分也已过时，因为蜡染使用已弃用的字形元素为您提供了 svg 输出。

例如，如果您在 nasa.ttf 上运行最新版本的 batik

```
java -jar batik-ttf2svg-1.10.jar nasa.ttf -o myfont.svg 
```

你得到一个看起来像这样的输出

```
<font horiz-adv-x="1045" ><font-face
font-family="Nasa"
units-per-em="2048"
panose-1="2 11 5 0 0 0 0 0 0 0"
ascent="1507"
descent="-393"
alphabetic="0" /> 
```

....后面是更多的代码，代表字体中的每个字形

处理这个问题的方法在[在 HTML 中使用 SVG 字形标记](https://stackoverflow.com/questions/51519429/use-svg-glyph-tag-in-html)的答案中表示- 将字形转换为符号并翻转它们。

至于为什么字体在其 X 轴上翻转，请参阅规范 [https://www.w3.org/TR/SVG11/fonts.html#SVGFontsOverview的被取代部分](https://www.w3.org/TR/SVG11/fonts.html#SVGFontsOverview)

> 与 SVG 中的标准图形不同，其中初始坐标系的 y 轴指向下方（请参阅初始坐标系），SVG 字体的设计网格以及字形的初始坐标系的 y 轴指向上方为了与许多流行字体格式的公认行业惯例保持一致。

# drupal - Drupal - 在动态创建的页面元素上使用简化工具栏加载 CKeditor

> ID：13087906
> 
> 赞同：0
> 
> 时间：2012-10-26T13:30:03.730
> 
> 标签：drupal, ckeditor

Drupal 6 ckeditor 3.6.4

我有动态加载文本区域的页面，所以我正在使用

```
 CKEDITOR.replace('textarea-id'); 
```

哪个有效，但它带来了完整的工具栏。我更喜欢使用简化的工具栏，但如果无法加载简化的工具栏，也可以使用我定义的工具栏。最不可取的是对工具栏进行硬编码，但我认为这是最后的手段。我该如何做到这一点？

我试过了

```
 CKEDITOR.replace('textarea-id',
    {
        toolbar : 'myprofile'
    }); 
```

引发 js 错误：Type x is undefined ，我认为与它无法加载配置文件的事实有关。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:27:29.933

无论好坏，我都是这样做的：

[http://joe-riggs.com/blog/2012/11/drupal-ckeditor-load-configuration-settings-on-dynamic-page/](http://joe-riggs.com/blog/2012/11/drupal-ckeditor-load-configuration-settings-on-dynamic-page/)

# php - CURL、wget 和 file_get_contents

> ID：13087908
> 
> 赞同：0
> 
> 时间：2012-10-26T13:30:10.307
> 
> 标签：php, curl, wget, file-get-contents

`file_get_contents()`我在 MacOS 上使用 PHP 命令和终端时`wget`遇到了问题。`curl`

问题是，对于某些网站，我只能得到一个`HTML`文件或奇怪符号的文本。我猜它必须与编码有关，但我没有找到任何东西。

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:33:41.217

检测它是哪种编码。试试下面的行。

```
echo mb_detect_encoding($str); //$str is what you get after using file_get_contents 
```

它不依赖于操作系统，而是特定于内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:36:37.287

最好将此字段包含在请求标头中：

```
Accept  */*
Accept-Encoding gzip, deflate 
```

# wireless - 如果没有客户端传输，是否可能导致 2.4Ghz 同频干扰

> ID：13087909
> 
> 赞同：0
> 
> 时间：2012-10-26T13:30:10.827
> 
> 标签：wireless

我在设施中安装了一些 AP。该设施现在抱怨他们的 2.4 电话系统存在问题。

我安装的 AP（不同的 SSID）正在运行，但没有客户端关联或传输数据。

是否有可能在不传输数据的情况下造成同频干扰？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:59:40.690

是的，802.11 接入点很健谈，用户或否。您可以期望每个接入点每秒传输5-15 次[信标帧。](http://www.wi-fiplanet.com/tutorials/article.php/1492071/80211-Beacons-Revealed.htm)

这些帧的传输速度非常快，而且 2.4 GHz 通常非常嘈杂，所以我很难相信 2.4 GHz 电话系统在这种情况下会失败——至少，假设你没有在电话系统顶部安装 AP . 任何在距离监听 -90 dBm 信号的设备几英寸处传输 +20 dBm 的设备都可能很容易导致问题。同样，2.4 GHz 设备实际上并不是在整个信号路径上都在 2.4 GHz 上运行。它通常以 100 MHz 之类的频率向下移动到基带，有时（特别是对于高功率 AP）这部分的屏蔽很差，即使在目标频带之外，这种泄漏也会导致问题。

也就是说，对于故障排除而言，这些都不重要。我要追问的问题是：如果关闭所有设备，问题会消失吗？如果是这样，如果您特别关闭其中一个，它会消失吗？如果是这样，是什么让那个特别？

# javascript - 无法调试编码的 javascript？

> ID：13087914
> 
> 赞同：0
> 
> 时间：2012-10-26T13:30:33.363
> 
> 标签：javascript, encoding

我在调试编码的 javacscript 时遇到了一些问题。我指的这个脚本在这个链接中给出。

这里的编码很简单，它通过将 unicodes 值转换为编码期间使用的任何 Codekey 来工作。进行解码的代码在下面以简单的英文给出：-

```
<script language="javascript">
function dF(s){
var s1=unescape(s.substr(0,s.length-1)); var t='';
for(i=0;i<s1.length;i++)t+=String.fromCharCode(s1.charCodeAt(i)-s.substr(s.length- 1,1));
document.write(unescape(t));
}
</script> 
```

我有兴趣了解或理解这些值（例如 s1,t）。例如，当 i=0 的值时，以下属性/方法将持有什么值

```
s1.charCodeAt(i) and s.substr(s.length-1,1) 
```

我这样做的原因是为了了解 CodeKey 函数的真正工作原理。我在上面的代码中没有看到任何告诉它根据 codekey 值进行解码的内容。我可以在编码文本中指出的唯一内容是最后一个字符，该字符设置为 1 、 2 、3 或 4 ，具体取决于编码过程中选择的代码键。可以使用我上面给出的链接进行验证。

但是，为了调试，我使用 firebug 插件，脚本在我的 wamp 服务器上作为 localhost 运行。我可以使用 firebug 在 js 上设置断点，但我无法检索上面提到的任何用户定义的参数或函数。

我想知道在这种情况下调试这个编码的 js 的最佳方法是什么。

# .net - WCF 服务参考副本

> ID：13087915
> 
> 赞同：0
> 
> 时间：2012-10-26T13:30:37.263
> 
> 标签：.net, wcf, service, reference

一个人离开办公室后，我继承了一个旧的网站维护，该网站目前运行正常，我只需要做一些小改动。

但是当我们计划进行重大更新时，我想将项目从 Visual 2005 升级到至少与 2008 相比。转换工作正常，除了 WCF 服务，我什至无法获得更新的服务参考，但服务可以仍然被称为。

我对 WCF 没有太多经验，我只知道它是我们无法访问的外部服务。

你觉得我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:08:25.240

我的错

看起来它在类库中配置了旧 url（也许我应该提到：-|），但在 web 应用程序项目中，它在 web.config 中有新的 url。

我的坏，我的失败

# wcf - WCF 服务的客户端意外命名

> ID：13087917
> 
> 赞同：0
> 
> 时间：2012-10-26T13:30:47.280
> 
> 标签：wcf

我有一个简单的 WCF 服务，它有一个接口和一个类。当我向控制台应用程序添加服务引用时，我的 WCF 服务类没有获得预期的名称。我的 WCF 服务类名称是`service1`，但它以`Service1Client`.

为什么在我的实际班级名称之前添加“**客户”一词？**我是否需要在我的 web.config 中为服务添加任何内容，或者在 app.config 中为控制台端添加任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:33:18.783

“客户端”是您的服务代理生成的类，它充当暴露服务元素并为您管理底层通道/通信的包装器。这是您在使用服务的客户端应用程序中使用的，以便使用该服务。

# c++ - 优雅的面向对象的成员访问，无需大量的 getter/mutator

> ID：13087918
> 
> 赞同：4
> 
> 时间：2012-10-26T13:30:47.250
> 
> 标签：c++, serialization, embedded, deserialization, object-oriented-analysis

在我正在处理的嵌入式应用程序中，我经常需要将来自多个不同对象的数据打包，以便通过串行端口发送出去。同样，数据进入需要写入多个不同对象的串行端口。

出于兼容性原因，数据包中数据的排序不允许与一个对象相关联的所有数据连续放置在数据包中。所以我不能轻易地对每个对象的数据等进行矢量化，然后将所有这些数据放入一个数据包中。

我可以使用数据包类用来创建/解码传输/接收数据包的大量getter/mutators来实现适当的功能。但这似乎不是很优雅。

我可以使数据包类成为它从/向其中提取/写入数据的类的朋友，但我总是被告知要避免使用朋友，因为这种做法违反了面向对象的原则。

理想情况下，处理实际应用程序的类对数据包类一无所知（并且不必专门为它提供 getter/mutators），如果数据包在更新之间进入，它们只会有新数据。

我想也许我可以在启动时将相关成员变量的引用或指针传递给数据包类，但这也很棘手，因为所有成员的大小都不相同。也许我也可以传递尺寸信息？是否有一种方法可以对指向成员的 void 指针列表和成员对的大小进行矢量化，以便数据包类不需要为其构造函数提供大量参数？

我不确定我对这个问题的描述有多好，但如果有帮助的话，我当然可以提供澄清和更多信息。非常感谢您的任何想法。

当前 tx 数据包类的缩写示例：

```
class PacketTx {
private:
  uint8_t buffer[MAX_PACKET_SIZE];   // MAX_PACKET_SIZE is 200
public:
  PacketTx(object1 *firstObject,
           object2 *secondObject,
           object3 *thirdObject
           // ...etc...
           )

  void sendPacket(void);
};

void PacketTx::sendPacket(void) {
  uint32_t i = 0;

  int16_t tempVar1 = firstObject->getVar1();
  uint32_t tempVar2 = secondObject->getVar2();
  uint8_t tempVar3 = firstObject->getVar3();
  int32_t tempVar4 = thirdObject->getVar4();
  // ...etc...

  memcpy(buffer + i, &tempVar1, sizeof(tempVar1));
  i += sizeof(tempVar1);

  memcpy(buffer + i, &tempVar2, sizeof(tempVar2));
  i += sizeof(tempVar2);

  memcpy(buffer + i, &tempVar3, sizeof(tempVar3));
  i += sizeof(tempVar3);

  memcpy(buffer + i), &tempVar4, sizeof(tempVar4));
  i += sizeof(tempVar4);

  // ...etc...

  for(uint32_t j = 0; j < i; ++j)
    putc(static_cast<char>(buffer[i]));
} 
```

这个例子不包括标题、校验和等，但它应该让我大致了解导致我头痛的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:12:50.300

因此，如果我了解您有一些 C 类，它具有任意数量的成员，需要以任意顺序写入缓冲区。然后同样的机制反过来发生。

串行 -> Packet.buffer() -> 对象（和反向）

我最初的想法是使用`boost::tuple`并使类型与数据包中数据的顺序相对应。（但元组中可能有 50 多个成员/条目，这可能是一个很大的编译时间命中）

例如

```
tuple<float, int, std::string> a(1.0f,  2, std::string("Some Words");
ostr << a; 
```

这还需要您的类将元组作为参数并填写数据中的条目。因此，与其写入缓冲区，不如枚举元组中保存的字段，以便编写“漂亮”的代码：

```
enum Fields {Price,Amount,Reason};
typedef boost::tuple<...> MyTuple;

void MyClass::getData( MyTuple& t )
{
    t<Price>() = mPrice;
    t<Amount>() = mAmount;
    t<Reason>() = mSomeReason;
} 
```

注意也可以反向工作。

不确定这是否完全符合您的尝试，但它可能会引发一些新的想法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:38:43.497

组合是您在这里需要的：

```
class packet {
    enum PacketType {
        type1,
        ...
    };
    std::vector<unsigned char> buffer;
    PacketType id;
public:
    void setData(std::vector<unsigned char> buffer);
    void setType(PacketType type);
    std::vector<usigned char> getData();
    PacketType getType();
    //serialize Packet;
};

class composition_packet {
    //other packet related detail.
    std::vector<packet> data;
public:
    void addPacket(packet p);
    void send();
    //serialize composition_packet
}; 
```

这里的想法是根据需要制作多个数据包，但将它们作为一个大数据包发送（`composition_packet`）。这里的另一个概念是数据包只负责序列化自己，而不是它应该知道的数据类型。数据包的数据必须已经被知道如何序列化它的对象序列化。

* * *

```
struct foo {
   std::string str;
   uint_8 u8;
   uint_32 u32;

   packet getPacket() {
       //simple dumb serialization
       std::stringstream ss(str);
       ss << "|";  //delimit character
       ss << u8 << "|";
       ss << u32;
       std::string s(ss.str());
       std::vector<unsigned char> data(s.begin(), s.end());
       packet p;
       p.setType(packet::fooType);
       p.setData(data);
       return p;
   }

}; 
```

# php - Yii cookie 不会在注销时被删除

> ID：13087921
> 
> 赞同：3
> 
> 时间：2012-10-26T13:30:53.500
> 
> 标签：php, session, cookies, yii

我正在使用 Yii 框架，我目前在注销时遇到问题，关联的 cookie 似乎没有被删除。这似乎仅在用户选择“记住我”时才会发生。这会导致用户在注销后自动再次登录。

我在一个约会网站上工作，所以这是一个很大的问题，因为人们可能会在网吧等场所访问。

我没有更改默认的注销方法，但在 config.xml 中更改了会话。我进行了如下配置，以允许跨我们的多个服务器和服务进行会话。

```
'session' => array(
    'class' => 'system.web.CDbHttpSession',
    'connectionID' => 'db',
    'autoCreateSessionTable' => false,
    'sessionName' => 'name', // renamed for privacy
    'cookieMode' => 'allow',
    'cookieParams' => array(
        'path' => '/',
        'domain' => '.domain.com', // renamed for privacy
        'httpOnly' => false,
    ),
), 
```

我似乎找不到解决方案，也找不到任何有类似问题的人。

想知道是否有人知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:49:04.730

如果您想完全禁用此功能，您需要将 CWebUser 的 AllowAutoLogin 设置为 false。

请参阅此处的 API 参考

[http://www.yiiframework.com/doc/api/1.1/CWebUser#allowAutoLogin-detail](http://www.yiiframework.com/doc/api/1.1/CWebUser#allowAutoLogin-detail)

默认值为 false，因此我假设在您的配置文件中已将其设置为 true。

# spring - Spring Hibernate 事务管理

> ID：13087928
> 
> 赞同：4
> 
> 时间：2012-10-26T13:31:20.757
> 
> 标签：spring, hibernate, transactions

我刚刚开始使用spring和hibernate制作一个项目。我的 DAO 层类扩展了 HibernateDaoSupport。我们没有使用注释。之前，我们使用的是 struts，因此我们使用了 Session 类提供的 getTransaction、commit、rollback .. 方法。我的要求很简单，对于所有的DAO类，如果有异常就回滚，否则提交。请提出一种引入spring事务管理的最简单方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T15:47:57.943

从你的问题中，有些事情并不清楚。我的解释基于以下假设 -

*   您正在使用 spring 创建数据源和会话工厂
*   您正在使用 Java 5 或更高版本，并且可以使用注释。

这是您的弹簧配置的样子。

```
 <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
    <property name="url" value="jdbc:hsqldb:hsql://localhost:9001" />
    <property name="username" value="sa" />
    <property name="password" value="" />
</bean>

<bean id="mySessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="myDataSource" />
    <property name="mappingResources">
        <list>
            <value>product.hbm.xml</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <value>
            hibernate.dialect=org.hibernate.dialect.HSQLDialect
        </value>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="mySessionFactory" />
</bean> 

<tx:annotation-driven transaction-manager="transactionManager"  /> 
```

设置完成后，您可以在 DAO 方法上使用 spring 事务注释，如下所示。Spring 将负责启动事务、提交事务或在抛出异常时回滚事务。如果您有业务服务，最好在您的服务上使用事务注释而不是 DAO。

```
@Transactional(propagation=Propagation.REQUIRED)
public class MyTestDao extends HibernateDaoSupport {    
public void saveEntity(Entity entity){
    getHibernateTemplate().save(entity);
}
@Transactional(readOnly=true)
public Entity getEntity(Integer id){
    return getHibernateTemplate().get(Entity.class, id);
}
 } 
```

下面的代码展示了如何使用 spring 对 AOP 的支持而不是注解来实现事务管理。

```
 <!-- Define your 'myDatasource' bean and 'mySessionFactory' bean as shown in previous code snippet -->
<!--  Then follow the steps shown below -->

<bean id="transactionManager"
class="org.springframework.orm.hibernate3.HibernateTransactionManager">
<property name="sessionFactory" ref="mySessionFactory" />   

<!-- this is the dao object that we want to make transactional -->
<bean id="testDao" class="com.xyz.daos.MyTestDao" />

<!-- the transactional advice  -->
<tx:advice id="txAdvice" transaction-manager="transactionManager">
    <tx:attributes>
        <!-- all methods starting with 'get' are read-only -->
        <tx:method name="get*" read-only="true" />
        <!-- other methods use the default transaction settings (see below) -->
        <tx:method name="*" propagation="REQUIRED" />
    </tx:attributes>
</tx:advice>

<!-- ensure that the above transactional advice runs for any execution of 
    a method in 'daos' package-->
<aop:config>
    <aop:pointcut id="allDaoMethods"
        expression="execution(* com.xyz.daos.*(..))" />
    <aop:advisor advice-ref="txAdvice" pointcut-ref="allDaoMethods" />
</aop:config> 
```

有关更多详细信息，请参阅 - [Spring 声明式事务](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-declarative)

# sql-server-2005 - SSIS 2005 - 如何以编程方式从输入平面文件中跳过行

> ID：13087929
> 
> 赞同：0
> 
> 时间：2012-10-26T13:31:28.420
> 
> 标签：sql-server-2005, ssis

我需要将 .csv 文件导入 SQL 表。

输入文件如下所示：

```
gru,212,BNP10H,bnp10h,1,01,Gestore 01
limGru,2012-09-12,17:21:05,kair103,,,,
limGru,2012-10-19,09:45:03,kair028,,,,
limGru,2012-10-19,09:45:06,kair028,,,,
limGru,2012-10-19,09:45:14,kair028,,,,
gru,207,BNP50E,bnp 50 equity,1,01,Gestore 01
limGru,2012-09-13,11:49:58,kair022,,,,
limGru,2012-10-05,15:20:11,kair048,,,,
limGru,2012-10-17,09:23:14,kair048,,,, 
```

我只会导入以“limGru”开头的行。

关于如何实施我的任务的任何想法？

已编辑：请注意，行的列数不同，具体取决于第一个字段（“gru”或“limGru”）

编辑2：也请看这里：

[SSIS =- 如何根据记录类型（标题、详细信息、尾随）处理具有可变列数的 CSV 输入文件](https://stackoverflow.com/questions/6294563/ssis-how-to-process-an-csv-input-file-with-a-variable-number-of-columns-based)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:37:18.577

从平面文件中导入所有数据，然后使用条件拆分转换。如果您不熟悉转换，请点击以下链接： [http ://technet.microsoft.com/en-us/library/ms137886(v=sql.90).aspx](http://technet.microsoft.com/en-us/library/ms137886(v=sql.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:39:58.237

如果`limGru`是固定值？如果是这样，那么您可以使用条件进行条件[拆分](http://technet.microsoft.com/en-us/library/ms137886%28v=sql.110%29.aspx)`[NameOfYourFirstColumn] == "limGru"`

# javascript - 在 Android 中调试时出现“未捕获的 ReferenceError：应用程序未定义”，但在 Chrome 调试器下没有

> ID：13087931
> 
> 赞同：0
> 
> 时间：2012-10-26T13:31:31.677
> 
> 标签：javascript, android, debugging, cordova, sencha-touch

我的任务是将Phonegap + Sencha 项目从Phonegap 1.2.0 升级到2.1.0 和Sencha 2，我一直在Chrome+jetty 下直接进行调试，修改之间的迭代速度更快。

在迁移部分苦苦挣扎之后，我到达了项目在 Chrome 上启动的地步（即：我可以在调试器上执行我的启动方法，并加载应用程序），但是当我在 Android 上尝试同样的事情时，我得到了Uncaught **ReferenceError: app is not defined**。

在 android 中调用的 HTML 文件如下所示：

```
<html>
<head>
    <title>Testing ExtJS 4</title>
        <link rel="stylesheet" href="libs/sencha/resources/css/android_v01.css" type="text/css">
        <link rel="stylesheet" href="libs/hx/resources/css/prosegur.css" type="text/css">

        <!-- libs -->
        <script type="text/javascript" charset="utf-8" src="libs/phonegap/cordova-2.1.0.js"></script>
        <script type="text/javascript" src="libs/sencha/sencha-touch-all-compat.js"></script> 
        <script type="text/javascript" src="libs/jquery/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="libs/jquery/xml2json.js"></script>
        <script type="text/javascript" src="libs/aes/aes.js"></script>
        <script type="text/javascript">
            currentPlatform="Android";
        </script>
        <script type="text/javascript" src="app/App.js"></script>

        <script type="text/javascript">

db_name="PMobileDB";
db_version="1.0";
DEBUG_MODE=false;
LOG_FILE="sdcard/xlogx.txt";

function fireCreateLocalStore() {   
 var prosegurConfig = window.localStorage.getItem('ProsegurConfig');
 if (prosegurConfig == null) {
    prosegurConfig = new Object();
    prosegurConfig.configuration = {
        esClienteProsegur: false,
        estaActivadoClienteProsegur: false,
        nroContrato: '',
        paisDeContrato: 'ARG',
        paisDeResidencia: 'ARG',
        nombre: '',
        cel: '',
        fechaNacimiento: '',
        email: '',
        estado: 'NO_CONFIGURADO',
        wsMobileConfig: 'https://psm.am:1962/wsProseguardConfig.asmx/wsMobileConfig',
        wsHashActivation: 'https://psm.am:1962/wsProseguardConfig.asmx/wsHashActivation',
        wsAlertFire: 'https://psm.am:1962/wsProseguardAlerts.asmx/wsAlertFire',
        guardianPin: '',
        startGuardianAlertTime: '',
        version: db_version
    };
    prosegurConfig.alerts = [
        { 
            alertType: 'GENERAL',
            description: '', 
            tryContactCRA: false
        },
        {
            alertType: 'MEDICAL',
            description: '',
            tryContactCRA: false
        },
        {
            alertType: 'CARASSISTANCE',
            description: '',
            tryContactCRA: false
        }
    ];
    prosegurConfig.contacts = new Array();
    window.localStorage.setItem('ProsegurConfig', Ext.JSON.encode(prosegurConfig));
    console.log('se carga los datos iniciales de Prosegur');
 }
 console.log(prosegurConfig);
 console.log('arranco app.mainLaunch()');
 app.app.launch();
 console.log('salgo de app.mainLaunch');
}
</script>
<script type="text/javascript">document.addEventListener("deviceready", fireCreateLocalStore,false);
</script>
</head>
<body></body>
</html> 
```

首先，我知道**app**对于全局对象来说是一个糟糕的选择，我认为特定的东西在 1.4.0 和 1.5.0 之间发生了变化，所以，虽然对 launch() 方法的原始调用是这样的：

app.launch();

我发现这在 2.1.0 中不起作用，我可以这样称呼它：

app.app.launch();

这在 Chrome 中可以正常工作，从我上面粘贴的代码中调用 fireCreateLocalStore() 结束调用它。

现在，当我在 Eclipse 中编译它并使用调试选项部署它时，我看到 logcat 正在创建数据库对象（就在之前），当它到达 launch() 行时，我从标题中得到错误：未捕获ReferenceError：应用程序未定义

我尝试将有问题的全局更改为不那么冲突的东西，例如 html 中的 MyApp 和 App.js（加上默认视图）无济于事，因此现在，我有点坚持这一点。

顺便说一句，我的 App.js 看起来像这样：

```
// Main application entry point
Ext.application({
name: 'app',
phoneStartupScreen: '../resources/images/LOADING_01.png',
tabletStartupScreen: '../resources/images/LOADING_01.png',
glossOnIcon: true,
    fullscreen: true,
autoCreateViewport : true,

// the controller will take care of creating the view        
//controllers: ['Configuration', 'ImmediateAlert', 'Guardian', 'Log'],
controllers: ['Configuration', 'ImmediateAlert', 'Guardian'],

// You could delete this, here only to illustrate
   // the sequence of events        
initialize: function () {
    console.log('app initialize');
    this.callParent();
},

launch: function() {
    console.log(app);
    this.launched = true;
    Ext.create("app.view.Viewport");
    this.mainLaunch();
},
mainLaunch: function() {
    //if (!device || !this.launched) {return;}
    if (!this.launched) {return;}
    console.log('MainLaunch : loading in ' + currentPlatform );

    Ext.getCmp('navigationView').getNavigationBar().add({id: 'save',
        text: 'Guardar',
        ui: 'light',
        align: 'right',
   })

   if (app.store == undefined)
        app.store = new Object();

   app.store.contacts = Ext.create('Ext.data.Store', {
       model: "app.model.Contact"
   });

   app.store.alerts = Ext.create('Ext.data.Store', {
        model: 'app.model.Alert',
   });

   app.service.ProsegurLocalStorageStore.populateStores(app.store.alerts);

   app.service.ProsegurLocalStorageStore.populateContactStores(app.store.contacts);

   var config = app.service.ProsegurLocalStorageStore.getConfiguration();
            console.log('ATENCION' + app.configuration.GeneralConfiguration.fireAlertService());
   if (config.data.wsBaseURL != null && config.data.wsBaseURL != '') {
        app.configuration.GeneralConfiguration.prosegurServiceBaseURL = config.data.wsBaseURL;
    }
    if (config.data.wsBaseCriticalURL != null && config.data.wsBaseCriticalURL != '') {
        app.configuration.GeneralConfiguration.prosegurServiceCriticalBaseURL = config.data.wsBaseCriticalURL;
    }

   if (currentPlatform == "MacOS"){ 
       navigator.geolocation.getCurrentPosition();
    }

   Ext.MessageBox.YESNO=[{itemId:'no',text:'NO'},{itemId:'yes',text:'Si'}];
   Ext.MessageBox.OK = {itemId:'ok',text:'Aceptar'};
   Ext.MessageBox.OKCANCEL=[{itemId:'cancel',text:'Cancelar'},{itemId:'ok',text:'Aceptar'}];

   Ext.Date.dayNames = [
                        'Domingo',
                        'Lunes',
                        'Martes',
                        'Miercoles',
                        'Jueves',
                        'Viernes',
                        'Sabado'
                    ];

                    Ext.Date.monthNames = [
                        'Enero',
                        'Febrero',
                        'Marzo',
                        'Abril',
                        'Mayo',
                        'Junio',
                        'Julio',
                        'Agosto',
                        'Septiembre',
                        'Octubre',
                        'Noviembre',
                        'Diciembre'
                    ];

                    Ext.Date.monthNumbers = {
                        'Ene': 0,
                        'Feb': 1,
                        'Mar': 2,
                        'Abr': 3,
                        'May': 4,
                        'Jun': 5,
                        'Jul': 6,
                        'Ago': 7,
                        'Sep': 8,
                        'Oct': 9,
                        'Nov': 10,
                        'Dic': 11
                    };

                    if (Ext.is.Android) {
                          Ext.EventManager.onWindowResize(function() {
                            Ext.Viewport.scrollToTop();
                            Ext.Viewport.updateBodySize();
                            Ext.Viewport.fireEvent('resize', Ext.Viewport, Ext.getBody().getSize());
                            app.views.viewport.getActiveItem().fireEvent('resize');
                          });
                    };

                    app.service.ProsegurServiceCallbackDaemon.run();
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:39:36.113

“app”很可能与“navigator.app”冲突，后者是一个PhoneGap API。如果您可以更改 Sencha 应用程序的名称，那可能是您最好的选择。

# mysql - 如何将两行（或更多）行放入单独的数组中，提供对每行列的单独访问

> ID：13087939
> 
> 赞同：0
> 
> 时间：2012-10-26T13:32:10.983
> 
> 标签：mysql, perl, multidimensional-array, rows

我已经为此苦苦挣扎了 16 个小时，而且我束手无策。我已阅读所有手册页，尝试制作自己的手册，尝试了几个示例并修改了许多但无济于事。

我想做的就是从我的数据库中获取一些行，并能够单独访问每行变量（列数据）。

```
 #!/usr/bin/perl -w
    use strict;
    use CGI;
    use CGI ':standard';
    use CGI::Carp qw(fatalsToBrowser warningsToBrowser);
    print CGI::header(-expires => '-1d');
    use DBI;
    $|=1;

use vars qw($getstate $hookup $query $results $city $state $pages $category $lastupdate $progress $actual $city1 $state1 $pages1 $category1 $lastupdate1 $progress1 $actual1);

    $getstate = 'Arizona'; ## actually comes in from a query

    ##$hookup is returned from a sub with database credentials
   $query = $hookup->prepare(qq{SELECT `city`,`state`,`pages`,`category`,`lastupdate`,`progress`,`actual` FROM `statesettings` WHERE `pages` > `progress` AND `state` LIKE ? ORDER BY `lastupdate` ASC LIMIT 2}); 
    $query->bind_param(1, "%$getstate%");
    $query->execute() or die "Query did not execute";

    ## I HAVE TRIED all kinds of ways to fetch data! fetchall_arrayref() fetchrow_array() and dozens upon dozens of attempts.

    while ($results = $query->fetchrow_hashref) {
    $city = $results->{city};
    $pages = $results->{pages};
    $category = $results->{category};
    $lastupdate = $results->{lastupdate};
    $progress = $results->{progress};
    $actual = $results->{actual};
    #####################
    }## end WHILE
    $query->finish;
    $hookup->disconnect; 
```

例如，在上面，我只能弄清楚如何访问一行。

但我想要类似的东西：（显然设置了我要求的行数）

```
$city = $arr[0]['city']; #city from row 0
$city1 = $arr[1]['city']; #city from row 1 
```

或者任何允许我单独获取每行列数据以供进一步使用！

实际上，我编写了一段巨大的代码，将所有数据推送到一个数组中，并用 ':' 划分我稍后拆分的行，然后循环每个行，这实际上是成功的。可能是一个很好的例子，说明如何使用尽可能多的代码获得我的结果。我知道我想做的是“内置”，但是，我只是没有脑力。我觉得完全脑死了，这么多小时后我无法弄清楚这一点。太近了可能看不见？

我想要一点解释以及任何示例代码，以便我可以学习/理解机制。非常感谢您的指导...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:52:26.987

你可以写：

```
my @arr;
while ($results = $query->fetchrow_hashref)
{
  push @arr, $results;
}
$query->finish;
$hookup->disconnect; 
```

然后执行您想要的任何其他任务：

```
my $city = $arr[0]->{'city'}; # city from first row
my $city1 = $arr[1]->{'city'}; # city from second row 
```

或者：

```
my @all_cities = map { $_->{'city'} } @arr;

my $city = $all_cities[0]; # city from first row
my $city1 = $all_cities[1]; # city from second row 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:52:30.497

你快到了。

```
my $res_arrayref;
while ($results = $query->fetchrow_hashref) {
... your code...
push @{$res_arrayref}, $result;
}    

...later...
$res_arrayref->[0]->{city}; 
```

# c# - 没有string.Format的格式字符串？

> ID：13087942
> 
> 赞同：2
> 
> 时间：2012-10-26T13:32:22.270
> 
> 标签：c#, string.format

我添加了一个类型的变量，`int`我用它来调用类似的东西：

```
x.ToString("0000"); 
```

我改成`x`类型`string`，现在上面的内容无效。是现在格式化的唯一方法`x`：

```
string.Format("{0:0000}",x); 
```

还是有捷径？

我`StringBuilder`用来构建字符串，那么同样适用`AppendFormat`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:35:39.037

您不能像处理数值一样格式化字符串，因此如果要将数字格式应用于字符串，则必须先将其解析为数字：

```
Int32.Parse(x).ToString("0000") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:36:09.603

没有真正的捷径。

`Int32`没有关于 int 应该有多少个前导零的概念。

您通过格式化为字符串来做正确的事情。如果你用它来显示东西，那应该不是问题（`x`如果你想执行数字运算，你仍然有问题）。

`AppendFormat`像 一样工作`string.Format`，但附加到调用它的 StringBuilder 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:36:54.420

不幸的是，这是最好的方法。请记住，每种类型都有自己的 ToString 方法，可以被覆盖。int 类型的 ToString 允许您在转换为字符串时传递格式以格式化整数。DateTime 也类似。但是，字符串类型的 ToString 只返回字符串，因为源已经是字符串类型。要格式化字符串，您必须调用 string.Format。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T13:35:37.473

不。

您必须将整数的字符串表示形式转换为实际整数，以便可以使用所需数量的前导零正确格式化它。

如果字符串已经是那种格式，为什么需要重新格式化呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T13:37:32.080

MSDN 展示了一些使用说明符的方法：http: [//msdn.microsoft.com/en-us/library/fzeeb5cd.aspx#Y759](http://msdn.microsoft.com/en-us/library/fzeeb5cd.aspx#Y759)

例子

```
x.ToString("G"); 
```

此链接列出了所有格式选项：http: [//msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T13:40:47.263

```
x.PadLeft(4, '0'); 
```

将提供与

```
x.ToString("0000"); 
```

前提`x`是它仍然是一个数字（它是一个`string`，所以如果不至少 -`TryCast()`将它返回，就无法确定这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-17T15:55:12.190

使用字符串插值（从 C# 6 开始）。

[https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated)

`{<interpolationExpression>[,<alignment>][:<formatString>]}`

以你的例子：

`$"{x:0000}"`

# android - 以编程方式在 Android 中为事件创建重复规则 (RRULE)

> ID：13087948
> 
> 赞同：2
> 
> 时间：2012-10-26T13:32:43.323
> 
> 标签：android, icalendar, rrule

有没有办法以编程方式为 Android 中的事件生成规则字符串？

我在 Android 源代码中找到了[RecurrenceEvent](https://android.googlesource.com/platform/frameworks/opt/calendar/+/refs/tags/android-cts-verifier-4.0.3_r1/src/com/android/calendarcommon/EventRecurrence.java)类，该类从其字段生成字符串。但是，它似乎无法访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-10T09:02:25.207

您应该参考 RFC5545，具体到：

*   [日期](https://www.rfc-editor.org/rfc/rfc5545#section-3.8.5.2);
*   [规则](https://www.rfc-editor.org/rfc/rfc5545#section-3.8.5.3)；

我目前正在寻找一种在 Android 的日历内容提供程序上创建循环事件的简单方法。如果我有更多信息要分享，我会编辑我的答案。

希望能帮助到你！;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:12:30.533

在 Android 4.0+ 中，循环规则存储在[`CalendarContracts.Events`](http://developer.android.com/reference/android/provider/CalendarContract.Events.html).

请参阅此处了解如何[查询](http://developer.android.com/guide/topics/providers/calendar-provider.html)CalendarContracts 并获取事件的该列。

# php - 有没有办法将多个字段映射到一个属性中？

> ID：13087950
> 
> 赞同：1
> 
> 时间：2012-10-26T13:33:06.910
> 
> 标签：php, orm, doctrine-orm

我正在尝试将 Doctrine 与设计不佳的 PostgreSQL 数据库一起使用。一些表的 DATE 和 TIME 字段应该是 TIMESTAMP 字段。

是否可以将一对 DATE 和 TIME 字段映射到我的课程的 DateTime 属性中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:34:22.753

您可以创建一个`getTimestamp()`返回`new \DateTime($this->getDate()-­>format('Y-m-d') . ' ' . $this->getTime()->format('H:i:s'))`对象的`setTimestamp(\DateTime $date)`方法，并创建一个通过分别获取日期和时间来设置这两个值的方法。

```
public function setDate(\DateTime $date)
{
    $this->date = $date;
}

public function getTime()
{
    return $date;
}

public function setTime(\DateTime $date)
{
    $this->date = $date;
}

public function getTime()
{
    return $date;
}

public function getTimeStamp() {
    return new \DateTime($this-­­>getDate()-­>format('Y-m-d') . ' ' . $this->getTime()->format('H:i:s'));
}

public function setTimeStamp(\DateTime $timestamp) {
    $this->setDate(new \DateTime($timestamp->format('Y-m-d'));
    $this->setTime(new \DateTime($timestamp->format('H:i:s'));
} 
```

或类似的东西。`get/setTimestamp()`然后，您可以在您的代码中专门使用。

**DQL**

您将时间戳作为单个参数传递，然后像这样绑定 2 个参数：

```
public function getSomething(\DateTime $timestamp, $someparam) {

    $dql = "SELECT ... FROM ... WHERE date = :date AND time = :time"

    // Create query and params binding
    // param('date', $timestamp-­>format('Y-m-d'));
    // param('time', $timestamp-­>format('H:i:s'));

    return $result;

} 
```

您可能必须将参数值包装在 a 中，`new \DateTime()`因为原则需要 DateTime 实例作为日期、时间和时间戳。

这为您提供了一个简单的接口来支持您的代码，但允许对数据库模式进行抽象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:11:35.440

您还可以创建一个视图，其中将这些字段组合为一个。然后从您的模型类中使用视图而不是真实表。

# ios - 什么会导致 MKMapView 改变它的 userTrackingMode？

> ID：13087954
> 
> 赞同：3
> 
> 时间：2012-10-26T13:33:17.900
> 
> 标签：ios, mkmapview

在`viewDidLoad`方法中，我将 userTrackingMode 设置为`MKUserTrackingModeFollowWithHeading`. 在向 mapview 添加一些注释和覆盖后，mapview 委托方法`mapView:didChangeUserTrackingMode:animated:`被触发。然后 mapview userTrackingMode 回到`MKUserTrackingModeFollow`. 为什么？

这是代码：

```
.......
    [self.pMapView addOverlay: self.pPolyline];
.......
    [self.pMapView setRegion:region animated:YES]; 
```

我确实删除了一些注释，但我没有删除 userLocation。

```
- (void) removeAllAnnotationsExceptUserLocationAndDestinAnnotation
{
    for (id<MKAnnotation> annotation in [[self.pMapView.annotations copy] autorelease])
    {
        if ([annotation isMemberOfClass: [MKUserLocation class]]) continue;

        CLLocationDegrees anLat = [self latitudeOfDestination];
        CLLocationDegrees anLon = [self longitudeOfDestination];

        if (anLat == annotation.coordinate.latitude && anLon == annotation.coordinate.longitude)
        {
            continue;
        }

        [self.pMapView removeAnnotation: annotation];
    }
} 
```

# objective-c - iPhone 5 上的应用程序崩溃

> ID：13087960
> 
> 赞同：0
> 
> 时间：2012-10-26T13:33:43.353
> 
> 标签：objective-c, ios, amazon-web-services

我制作了一个显示来自 AWS 服务器的图像的应用程序。它适用于 iPhone 4 及更早版本，但是当我在 iPhone 5 上运行我的应用程序时，应用程序在使用 wifi 或 3G 连接运行时崩溃。当我使用 S3GetObject 时，我做了很多测试...

```
3GetObjectResponse *getObjectResponse = [[AmazonClientManager s3] getObject:getObjectRequest];

UIImage *tampon = [[UIImage alloc] initWithData:getObjectResponse.body]; 
```

应用程序崩溃，我不知道AWS-SDK是否与iOS 6兼容，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:13:31.583

看起来您正在使用带有 Grand Central Dispatch 的 AWS 开发工具包，并`getObject:`在同一个线程上调用同步和更新 UI。您需要确保调用`getObject:`后台线程，并在主线程上更新 UI。您的代码应如下所示：

```
dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    for(int i=0;i<ads.count;i++){

        NSString *phot =[ads objectAtIndex:i];
        NSLog(@"hna%@",phot);
        S3GetObjectRequest  *getObjectRequest  = [[S3GetObjectRequest alloc] initWithKey:phot   withBucket:@"olfactifPhoto"];
        S3GetObjectResponse *getObjectResponse = [[AmazonClientManager s3] getObject:getObjectRequest];

        dispatch_async( dispatch_get_main_queue(), ^{

            UIImage *tampon = [[UIImage alloc] initWithData:getObjectResponse.body];
            UIImageView *tempImageView = [[UIImageView alloc] initWithImage:tampon];
            tempImageView.frame = CGRectMake(10,currentXLocation, 300, 310);

            NSLog(@" il est dans la position %f",tempImageView.frame.origin.y);
            self.monImage = tempImageView;

            [scroll addSubview:monImage];
        });
    }

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T01:43:10.790

根据您的[其他问题](https://stackoverflow.com/questions/13209022/understanding-crash-report)之一，您似乎仍然包含旧版本的适用于 iOS 的 AWS 开发工具包，由于包含 GTMLogger 库，该版本在为发布而构建时存在崩溃问题。

请确保删除对适用于 iOS 的 AWS 开发工具包以前版本的任何引用，并更新您的项目框架包含路径。

您可以通过记录从返回的值来确认您使用的是最新版本的 SDK

```
[AmazonSDKUtil userAgentString] 
```

# delphi - 在旋转视图中更改深度轴的大小

> ID：13087961
> 
> 赞同：-1
> 
> 时间：2012-10-26T13:33:45.127
> 
> 标签：delphi, delphi-xe, teechart

在 Windows 7 上使用 Delphi XE 和 TeeChart Pro 2011。

我有一张图表，显示了圆盘的高度差（以纳米为单位）。总共有 100 个矩形场，每个场大约有 1000 个数据点，几乎均匀分布在磁盘上。由于光盘外没有数据，因此边缘的字段仅被部分填充。`IrregularGrid := True;`需要正确查看数据。理想情况下，我会使用 a `TColorGridseries`，因为这将提供我想要实现的 (2d) 视图。不幸的是，数据的分布是这样的，以至于`TColorGridseries`根本无法正常运行（已知的 TChart 错误）。

我转向`TSurfaceSeries`，它可以正确处理数据。主要缺点是 3d 方面将 Z 值放在左轴上，将 Y 值放在深度轴上。这导致了盘的侧视图。作为补偿，我可以旋转 3d 图表，以便再次获得顶视图，但是绘制深度轴以使我得到一个比例为 1:10 的图表矩形。

最后我的问题很简单：有没有办法将深度轴的（像素）长度设置为与水平轴相同的（像素）长度，这样我就可以得到一个 1:1 的俯视图比例3D图表？

问候，德科拉曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:47:20.693

是的，一个选项正在执行类似于功能演示中的*All features\Welcome !\Axes\Isometric Axis*示例，但将其扩展到 3D 图表，类似于[此处](http://www.teechart.net/support/viewtopic.php?f=1&t=7885&hilit=isometric%20depth)讨论的内容。这是一个 TeeChart ActiveX 和 VB6 示例，但同样的原则也适用于 VCL 版本。您也可以[在此处](http://teechart.net/files/public/IsoAxis3D.zip)下载更完整的 Delphi 示例。它可能与您正在寻找的内容非常接近。

# php - PHP 获取方法 ajax url 读取

> ID：13087962
> 
> 赞同：-5
> 
> 时间：2012-10-26T13:33:46.270
> 
> 标签：php

我喜欢这个网址

> site.com/#request/values-1
> 
> site.com/#request/values-2

我怎样才能得到这个网址？用 php 你在想什么？

```
$request = ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:40:26.443

已编辑：您需要使用 javascript 来实现这一点。

```
<script language = "javascript">

var query = location.href.split('#');

var anchorValueSplit = query[1].split("/");

var anchorValue = anchorValueSplit[1];

alert(anchorValue);

</script> 
```

编辑：另一种解决方案

```
<script language = "javascript">

if(location.href.indexOf("#") > 0) {

    location.href = location.href.replace("#","?");

}

</script>
<?php

$param = array_keys($_GET);
$param = $param[0];

$breakParam = explode("/",$param);

echo $request = $breakParam[1];

?> 
```

# visual-studio-2012 - 在 Visual Studio 2012 中连接到 SQL Server 2012 时无法访问 Visual Query Designer

> ID：13087965
> 
> 赞同：11
> 
> 时间：2012-10-26T13:34:08.070
> 
> 标签：visual-studio-2012, sql-server-2012

当我在服务器资源管理器中右键单击表节点并选择“新查询”时，我现在看到的不是视觉设计器，而是一个文本设计器，没有明显的方法可以进入视觉设计器（见屏幕截图）。

![Visual Studio 屏幕截图](../Images/c8759c3b775d1d8d64cff31f8bdce8f4.png)

请注意查询设计器工具是如何全部变灰的。有没有办法回到视觉设计师那里？

如果有区别，我连接的数据库是 SQL Server 2012 Express。

**编辑**

我做了更多的研究，看来我应该能够通过创建一个新查询（[http://msdn.microsoft.com/en-us/library/ms172011.aspx](http://msdn.microsoft.com/en-us/library/ms172011.aspx)）来看到设计器。我找不到任何可能影响此行为的选项。这也意味着我不能只在我的测试数据库中编辑一行，这让我发疯了！！！

**编辑 2**

好的，我得到的行为基于我连接到的数据库。当我添加到 SQL Server 2008 数据库的连接时，右键单击并选择“新建查询”，我得到了可视化设计器。当我连接到 SQL Server 2012 数据库并执行**完全相同的**操作时，我得到了文本 SQL 编辑器，而无法访问可视化设计器！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-06T09:55:41.690

在创建与 SQL Server 的数据库连接时，选择 .NET Data Provider 作为 - **.NET Framework Data Provider for OLEDB**以获得 VS 2012 中的 Visual Query Designer！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:04:37.277

Microsoft 将一些 Data 工具移至 SQL Server Data Tools (SSDT)。这是一个单独的安装，它带有一个 Visual Studio 扩展。

这是 Stack Overflow 上另一个线程的链接。

[Visual Studio 2012 数据库设计器 - 功能是否已更改？](https://stackoverflow.com/questions/12229731/visual-studio-2012-database-designer-am-i-missing-something)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:17:30.753

我试图通过首先创建一个数据库项目来复制它，结果如下：

![在此处输入图像描述](../Images/e336b73c331750437f99a6a54eab7008.png)

一切都按预期工作。没有任何活动项目的结果是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-14T14:31:11.173

我已经弄清楚了这一点。您必须卸载对以前版本的 Visual Studio 和 microsoft sql server 的所有引用。在服务器升级后的过去两天里处理了这个问题。我按照这个确切的顺序下载并安装了以下软件，它解决了我的问题。

[Visual Studio 2012 的商业智能](http://www.microsoft.com/en-us/download/details.aspx?id=36843)

[SQL Server 速成版 2012](http://www.microsoft.com/en-us/download/details.aspx?id=29062)

希望这有助于一劳永逸地解决这个讨厌的小问题。

# c++ - QVariant.toXXX 函数的函数指针

> ID：13087966
> 
> 赞同：1
> 
> 时间：2012-10-26T13:34:27.280
> 
> 标签：c++, qt, templates

我不知道如何在处理 QVariant 的 Qt 库中创建指向方法的函数指针。我的代码中有很多地方将 QVariantList 转换为 QList，其中 SomeType 可以是 QString、int、QMap 或其他可以保存在 QVariant 对象中的变量。在我要使用该方法时，类型是已知的。

我可以使用模板编写方法吗？下面是我想写的方法的伪代码

```
template <class T>
QList<T> QVariantListToQList(QVariantList qvList, (* QVariant::toXXX()) convert)
{
    QList<T> qlistOfMembers;
    foreach(T listMember, qvList)
    {
        qlist.OfMember.append(listMmeber.convert());
    }
    return qlistOfMembers;
} 
```

将不胜感激提供讨论此问题的文档的链接或使用正确语法的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:40:09.223

你不需要这样做。使用[`qvariant_cast`](http://qt-project.org/doc/qt-4.8/qvariant.html#qvariant_cast)or[`QVariant::value`](http://qt-project.org/doc/qt-4.8/qvariant.html#value)函数，并完全删除该参数。

就像是：

```
template <class T>
QList<T> QVariantListToQList(QVariantList const& qvList)
{
    QList<T> qlistOfMembers;
    foreach(QVariant const& listMember, qvList)
    {
        qlistOfMembers.append(listMember.value<T>());
    }
    return qlistOfMembers;
} 
```

如果您想按照自己的方式进行操作，语法会有些棘手：

```
#include <QtCore>

template <class T>
QList<T> QVariantListToQList(QVariantList const& qvList, 
                             T (QVariant::*convert)() const)
{
    QList<T> qlistOfMembers;
    foreach(QVariant const& listMember, qvList)
    {
        qlistOfMembers.append((listMember.*convert)());
    }
    return qlistOfMembers;
}

int main(void)
{
    QVariantList vl;
    vl.append(QVariant(QString("hello")));
    qDebug() << vl;
    QList<QString> sl = QVariantListToQList<QString>(vl, &QVariant::toString);
    qDebug() << sl;
} 
```

# java - NetBeans - SOAP - SSL

> ID：13087968
> 
> 赞同：1
> 
> 时间：2012-10-26T13:34:32.580
> 
> 标签：java, web-services, soap, netbeans

我遇到了一个我自己无法解决的问题，即使我几乎尝试了所有方法。我使用 Glassfish (3.1.2.2) 和 Windows 7 作为操作系统开发了一个带有 NetBeans (7.2.1) 和 Java (jdk1.7.0_09,jre7) 的 SOAP Web 服务，并且需要通过 SSL 保护连接。

如果我尝试达到：

```
https://localhost:8181/secauth/Secauth?WSDL 
```

我只看到一个空白页。GlassFish 状态窗口中的错误是：

> “警告：端点 Secauth 的请求方案无效。预期 http 。收到https”</p>

我为保护连接所做的工作：

*   在 NetBeans 的“服务质量”选项卡中使用“传输安全”选项选中“安全服务”</p>

*   使用安全选项卡编辑“web.xml”并添加“安全约束”

    ```
    <security-constraint>
    <display-name>SSL</display-name>
    <web-resource-collection>
        <web-resource-name>secauth</web-resource-name>
        <description/>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <description/>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
    </security-constraint> 
    ```

    *   我可以打电话：

        ```
        https://localhost:8181/secauth/ 
        ```

并接受：

> 你好世界！

* * *

所以我的问题是： - 我必须更改什么才能通过 SSL 访问 WSDL？/ 上面那个问题是怎么回事？

* * *

用例：使用 ksoap2 从 android 应用程序调用 Web 服务，可以正常使用 HTTP，但不能使用 HTTPS。似乎无法解析“空白”页面并出现一些解析错误。

非常感谢您的先进！问候，

马塞尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:55:46.403

[http://docs.oracle.com/cd/E17802_01/webservices/webservices/reference/tutorials/wsit/doc/WSIT_Security9.html#wp151774](http://docs.oracle.com/cd/E17802_01/webservices/webservices/reference/tutorials/wsit/doc/WSIT_Security9.html#wp151774)

解决了我的问题！

似乎问题在于该项目是在应用安全设置之前运行的。

因此，只需按照分步说明，在运行项目之前插入旧的 src 代码，一切都会好起来的！

问候， 玛斯

# asp.net - ASP.NET Web 服务技术比较

> ID：13087969
> 
> 赞同：4
> 
> 时间：2012-10-26T13:34:34.687
> 
> 标签：asp.net, web-services, asp.net-web-api, asmx

使用 Visual Studio 2012，当我想将 Web 服务添加到**现有网站项目**时，我在“添加新项目”对话框中至少有以下选择：

*   Web API 控制器类
*   启用 AJAX 的 WCF 服务
*   启用 Silverlight 的 WCF 服务
*   WCF 数据服务
*   WCF 服务
*   Web Service / ASMX（直到今天我一直在使用）

（也许还有更多的选择，例如作为附加组件、扩展、NuGet 包等可用）。

据我所知，“Web API”是网络服务的最新技术。这应该用于所有新的开发吗？

或者仍然存在应该考虑其他技术之一的情况？有没有这些技术的比较或一些指导，什么时候使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:40:21.823

我真的没有比较，但假设您没有遗留代码或其他特定要求，我会选择新的 Web API。它们基本上取代了 ASMX 和 WCF 服务。它们使用简单，工作方式类似于 MVC 应用程序。

我们刚刚切换到它，到目前为止一切都很好。

# asp.net - 从子目录配置获取/设置 AppSetting

> ID：13087978
> 
> 赞同：0
> 
> 时间：2012-10-26T13:35:17.957
> 
> 标签：asp.net, web-config, subdirectory

在 .NET 2.0 下使用 ASP.NET，是否可以从根目录中的页面获取/设置子目录中的 web.config 中的 AppSettings？当我说“设置”时，我不需要永久设置值，只需简单地更新内存中的值就足够了。

我有一个具有标准根`web.config`文件的 Web 应用程序，该文件具有系统范围的配置设置。

该应用程序还有许多子目录，每个子目录都是系统的一个单独部分，每个子目录都有自己的`web.config`文件，其中包含仅对该特定部分必需的配置。（这些部分中的所有代码也是在他们自己的个人下构建的`NameSpace`。）

根目录中的代码是否可以从子目录中获取或设置单独的`<add key="" value=""/>`配置设置？

因此，例如，如果我在 Web 应用程序的根目录中调用一个页面（例如`~/Default.aspx`），它是否可以以某种方式手动从文件中查找单个配置值`~/Section1/web.config`？

我猜这不能做，但我想先在这里问

* * *

我的一个想法——我已经尝试过但**没有**用——是在每个部分中都有一个带有公共属性的 UserControl 来获取值。然后从根页面代码动态加载控件并调用属性来获取值。但是，即使 UserControl 托管在子目录中，并且是子目录命名空间的一部分，它仍然不会获取`web.config`该子目录中的设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:58:23.240

它不能完成，这是主要限制之一。

有关更多信息（以及对我的声明的澄清），请查看[此处：使用多个 web.config ...](http://weblogs.asp.net/jalpeshpvadgama/archive/2011/03/23/working-with-more-then-one-web-config-files-in-asp-net-application.aspx) - 作者在评论前的最后一段中提到了此限制。

这是另一个[很棒的资源 - 关于 web.config 继承你应该知道的 10 件事](http://weblogs.asp.net/jgalloway/archive/2012/01/17/10-things-asp-net-developers-should-know-about-web-config-inheritance-and-overrides.aspx)

# html - 在 HTML 中从右侧显示内联列表 (li)

> ID：13087980
> 
> 赞同：0
> 
> 时间：2012-10-26T13:35:23.123
> 
> 标签：html, css, inline, floating

这是场景：

```
<div class="menu">
<ul>
<li><a href="#">1</a></li>
<li><a href="#">2</a></li>
<li><a href="#">3</a></li>
</ul>
</div> 
```

和 CSS：

```
.menu li {display:inline} 
```

结果将是：

```
1  2  3 
```

但我想从右到左显示它们：

```
3  2  1 
```

请问我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:38:14.273

尝试在 CSS 中添加 float: right

```
.menu li {display:inline; float: right;} 
```

您可能需要添加额外的限制以防止列表飞到页面的右侧

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T13:40:01.600

首先，您需要`<li>`用标签包装您的 s `<ul>`，而不是`<div>`.

```
li {
  list-style: none;
  float: right;
}
ul{
  float: left;
} 
```

​<a href="http://jsfiddle.net/scrimothy/hKWJx/" rel="nofollow">小提琴

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-11T05:18:35.827

试试这个

CSS 代码：

```
.menu li {display:inline}
.menu ul{direction:rtl;} 
```

HTML 代码：

```
<div class="menu">
<ul>
<li><a href="#">1</a></li>
<li><a href="#">2</a></li>
<li><a href="#">3</a></li>
</ul>
</div> 
```

[演示](http://jsfiddle.net/AJs29/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T13:39:43.420

你为什么不重新安排他们？更改列表元素的顺序不是表示的问题，因此不应由 CSS 处理，而应由 HTML 处理。

顺便说一句，您忘记将 li 包装在 ul 标记中。

```
<ul>
  <li></li>
</ul> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T13:40:02.540

```
ul {
    width: 50px;
}
li {
    display: inline-block;
    float: right;
}​ 
```

此外，您不能`li`成为 a 的直接后代`div`。使用`ul`或`ol`

[演示](http://jsfiddle.net/DLqce/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-26T13:42:14.727

使用 HTML5 的新`reversed`属性，您可以告诉浏览器列表项的编号应该按降序显示，而不是默认的升序。

```
<ol reversed>  
    <li>List item one</li>  
    <li>List item two</li>  
    <li>List item three</li>  
    <li>List item four</li>  
    <li>List item five</li>  
</ol> 
```

# jquery - Jquery自定义函数不在ajax加载的内容上定位div

> ID：13087984
> 
> 赞同：0
> 
> 时间：2012-10-26T13:35:36.900
> 
> 标签：jquery, css, ajax, callback, positioning

我编写了一个自定义函数，将绝对 div 定位在容器内，计算顶部位置和高度：

```
$.fn.gridB = function() {
    var o = $(this); //EDITED from var o = $(this[0]);
    o.each(function() {
        var a1top = o.find('.article1').position().top;
        var a1height = o.find('.article1').height();
        var a0top = o.find('.article0').position().top;
        var a0height = o.find('.article0').height();
        var a2top = o.find('.article2').position().top;
        var a2height = o.find('.article2').height();
        var a3height = o.find('.article3').height();
        var a4height = o.find('.article4').height();
        var a5height = o.find('.article5').height();
        if (a0height > a1height + a1top) {
            $('.article3', o).css('top', a0top + a0height + 20);
        } else if (a0height < a1height + a1top) {
            $('.article3', o).css('top', a1top + a1height + 20);
        }
        $('.article4', o).css('top', a2top + a2height + 20);
        $('.article5', o).css('top', a2top + a2height + 20);
        $('.article6', o).css('top', a2top + a2height + a5height + 40);
        $('.article7', o).css('top', a2top + a2height + a5height + 40);
        var lastChildPos = o.find('div:last-child').position().top;
        var lastChildHeight = o.find('div:last-child').height();
        o.height(lastChildPos + lastChildHeight + 20);
    });
};​ 
```

该容器有一个类“.fours”，并且脚本在窗口加载时完美运行。但是当在 ajax 无限滚动加载后调用它时，它无法将绝对 div 正确定位在下一个“.fours”容器内：

```
function loadArticle(pageNumber) {
    $('a#inifiniteLoader').fadeIn('fast');
    $.ajax({
        url: "wp-admin/admin-ajax.php",
        type: 'POST',
        data: "action=infinite_scroll&page_no=" + pageNumber + '&loop_file=loop',
        success: function(html) {
            $('a#inifiniteLoader').fadeOut('1000');
            $("#content").append(html); // This will be the div where our content will be loaded
            $('.fours:last').preloader_index();
            $('.fours').gridB(); // EDITED from $('.fours:last').gridB();
            $('.article a').on({
                mouseenter: function() {
                    if (!$('.preloader', $(this).parent('.article')).length > 0) {
                        $(this).stop().css('opacity', '1');
                    }
                },
                mouseleave: function() {
                    if (!$('.preloader', $(this).parent('.article')).length > 0) {
                        $(this).stop().css('opacity', '0');
                        $('.article-info', $(this).parent('.article')).stop().fadeTo(200, 0);
                    }
                }
            });
        }
    });
    return false;
}​ 
```

出了点问题，但我已经很接近了。如果我在 ajax 成功后调用函数 gridB() 时放置 .fours:last ，则脚本仅计算 div 的顶部位置而忽略高度。如果我删除 :last 脚本不会计算顶部位置和高度。

有什么帮助吗？

**编辑：**这是相关 HTML 的示例。另一个带类的 div

```
 <div id="content">
<div class="fours">
  <div class="article article0">
     <div><img src="url" /></div>
  </div>
  <div class="article article1">
     <div><img src="url" /></div>
  </div>
  <div class="article article2">
     <div><img src="url" /></div>
  </div>
  <div class="article article3">
     <div><img src="url" /></div>
  </div>
  </div>
<!-- Next ".fours" div is loaded here with ajax function -->
</div> 
```

**编辑 2**：在 gridB 函数中，我更改了行 var o = $(this[0]); 到 var o = $(this); 并从 $('.fours:last').gridB(); 更改了函数调用 到 $('.fours').gridB();. 它有效，但现在脚本将所有绝对 div 定位在 ajax 加载的下一组中，并使用第一组文章的值。我认为它更接近解决方案。必须有一种方法来定位由 ajax 加载的容器。:last 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:22:16.637

关于您上次编辑中的评论，您可以执行以下操作来引用上次`<div class="fours" />`添加的内容：

```
success: function(html) {
    var $html = $(html);                       // Wrap HTML in jQuery object.
    $('a#inifiniteLoader').fadeOut('1000');
    $("#content").append($html);               // Add created object.

    $html.preloader_index();                   // Use the same object.
    $html.gridB();                             // Call gridB using the same object. 
```

# asp.net - Azure Appfabric 只是没有削减它

> ID：13087986
> 
> 赞同：-3
> 
> 时间：2012-10-26T13:35:38.257
> 
> 标签：asp.net, azure, azure-web-roles

我有一个 ASP.NET 网站项目，它在部署到 Azure 时运行良好，但不会在 Compute Emulator 中本地运行。似乎如果它在 Azure 中工作，它应该在计算模拟器中工作，但我想这不是 SDK 开发人员或其他东西的高优先级。

无论如何，如果您尝试在调试器中本地运行 Azure Web 角色，您会得到以下信息：

![附加到调试器时出错](../Images/716f49daccfa78e1c66f96a87cb31595.png)

如果您使用 Ctrl-F5（不带调试运行），您会得到一个通用的 500 - 内部服务器错误。

谷歌搜索表明它可能是 Web.config 中计算模拟器（或本地 IIS）不喜欢的东西。

有人遇到过这样的问题吗？

PS 如果我将网站设置为启动项目，我可以在本地正常运行网站项目（即不使用 Azure 模拟器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T03:09:24.067

就像所有人所说的那样 - 在模拟器之外运行以验证 web.config 是否正确。另一个需要注意的问题是模拟器在端口：82 上运行 - 通常意味着您已经在本地 IIS 中运行了一个或两个站点 - 禁用/停止此站点并尝试再次运行。

最后，当模拟器启动时，打开 IIS 管理器，您应该会看到新站点，尝试从 IIS 浏览到该站点。确保 customErrors=Off 和 debug=true。

# jquery - 如何使用 jQuery 将 ID 传递给 MVC ActionResult？

> ID：13087997
> 
> 赞同：0
> 
> 时间：2012-10-26T13:36:25.480
> 
> 标签：jquery, asp.net-mvc, post

如何将从 radiobuttonfor 检索到的 id 传递给 MainPage 控制器 - 视图中的 Edit1 actionresult。任何帮助将不胜感激！谢谢！

//在for循环中查看显示内容和单选按钮

```
@foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.SurveyTitle)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.DateCreated)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.DateClosing)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.User)
                    </td>
                    <td>
                        @Html.RadioButtonFor(modelItem => item.SurveyId, new {id = item.SurveyId})
                    </td>
                </tr>
            }

          <button type="submit" class="btn btn-primary" id="edit">Edit</button> 
```

//按钮的脚本来检测选择了哪个单选按钮id并提交

```
<script>            
        $('#edit').click(function () {

            var id = $('input[type=radio]:checked').val();
            alert(id);

        });

         </script> 
```

//控制器获取id并取出surveyid

```
[HttpPost]
             public ActionResult Edit1(int id=0)
            {
                survey survey = db.surveys.Single(s => s.SurveyId == id);
                if (survey == null)
                {
                    return HttpNotFound();
                }
                return View(survey);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:39:49.997

尝试这个：

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

或者将您的 id 放在某个隐藏的文本字段中并触发点击提交按钮（如果您的页面上有网络表单）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:31:38.480

你说的这个提交按钮在哪里？是`#edit`吗？如果您想执行 POST 操作，您需要让它 POST 表单。此外，`int id`除非您将收音机更改为类似`@Html.RadioButton("id", item.SurveyId)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:55:39.543

当用户根据单选按钮列表设置的特定 ID 单击编辑时，您似乎正在尝试更改窗口的位置。

我认为您可以执行以下操作：

```
$('#edit').click(function () {

    var id = $('input[type=radio]:checked').val();
    window.location.href='/MainPage/Edit1/'+id;
    //window.location.href='/MainPage/Edit1/?id='+id; //if {controller}/{action}/{id} isn't setup in the routing class.

}); 
```

# android - 上下文操作栏？

> ID：13087998
> 
> 赞同：0
> 
> 时间：2012-10-26T13:36:30.487
> 
> 标签：android, android-actionbar

在检查电子邮件后（左侧的复选框）在 GMail 中，ActionBar 更改为类似

```
 ------------------------------------ 
    [ v | N selected]

    (ListFragment)

    [ new actions for selected items ]
    ------------------------------------ 
```

我如何在我的应用程序中做到这一点？我缺少 ActionBar API 中的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:41:25.973

您可能正在寻找上下文操作栏：http: [//developer.android.com/guide/topics/ui/menus.html#CAB](http://developer.android.com/guide/topics/ui/menus.html#CAB)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T13:44:20.150

您正在寻找的是[Contextual Action Bar](http://developer.android.com/guide/topics/ui/menus.html#CAB)。