# StackOverflow 问答 15707000-15707999

# eclipse - 使用 Eclipse Juno 调试 Symfony 2.x

> ID：15707005
> 
> 赞同：1
> 
> 时间：2013-03-29T16:11:45.540
> 
> 标签：eclipse, debugging, symfony

我正在寻找一种调试 Symfony 2.x 包的好方法。我有调试 php 的经验，但似乎无法使用 Symfony 启动。

我使用插入了 Symfony 支持的 Eclipse Juno。（Windows 7 - 64 位）

# javascript - 仅在鼠标悬停时更改图片一次

> ID：15707012
> 
> 赞同：2
> 
> 时间：2013-03-29T16:12:00.713
> 
> 标签：javascript, jquery, mouseover

我只需要在鼠标上更改一次图片。因此，当鼠标悬停时 - 更改图片并停止，永远不要回到默认图像，保留新图像。我需要这个，因为默认图像是 gif 动画，鼠标悬停是静态 png pictire，当人们按住鼠标等待第二张动画图片回来时。至少延迟 5 秒 onmouseout 动作。

现在我使用这个javascript。

```
function onHover()
{
$("#menuImg").attr('src', 'images/mouseover_picture.png');
}

function offHover()
{
$("#menuImg").attr('src', 'images/default_picture.png');
} 
```

html：

```
<img src="map.gif" id="menuImg" alt="info" width="415" height="380" usemap="#Europe" border="0" onmouseover="onHover();" onmouseout="offHover();" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:13:12.373

是的，您可以使用**[one()](http://api.jquery.com/one/)**处理程序只触发一次。

```
$('#menuImg').one('mouseenter', function() {   
  $(this).attr('src', 'images/mouseover_picture.png');   
}); 
```

这是一个非常基本的[jsFiddle](http://jsfiddle.net/xsmQU/)示例，显示它与警报一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T16:17:37.417

对于 jQuery，您可以使用该[`.one()`](http://api.jquery.com/one/)函数仅触发一次事件。

[jsFiddle](http://jsfiddle.net/uWbpm/)

```
$('#menuImg').one('mouseover', function () {
    $(this).attr('src', 'https://www.google.com.au/images/srpr/logo4w.png');
}); 
```

作为纯 JS 解决方案，通过分配事件处理程序来分离`null`它。

[jsFiddle](http://jsfiddle.net/3Nnvp/)

```
var img = document.getElementById('menuImg');
img.onmouseover = function () {
    this.setAttribute('src', 'https://www.google.com.au/images/srpr/logo4w.png');
    img.onmouseover = null;
}; 
```

# mahout - 为 Mahout 推荐器使用多个加权数据模型

> ID：15707013
> 
> 赞同：3
> 
> 时间：2013-03-29T16:12:02.047
> 
> 标签：mahout, recommendation-engine

我有一个基于用户相似性的布尔偏好推荐器。我的数据集本质上包含 ItemId 是用户决定阅读的文章的关系。我想添加第二个数据模型，其中包含 ItemId 是对特定主题的订阅。

我能想到的唯一方法是将两者合并在一起，抵消订阅 ID，这样它们就不会与文章 ID 冲突。对于加权，我考虑放弃布尔偏好设置并引入偏好分数，其中文章子集的偏好分数为 1（例如），订阅子集的偏好分数为 2。

但是，我不确定这是否可行，因为偏好分数与我所追求的权重并不完全相似；它们可能包含一些代表不满意的较低分数的概念。

我必须想象有更好的方法来做到这一点，或者至少对我的计划进行一些调整，使其更符合我的愿望。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:28:49.020

我认为你以正确的方式思考它。是的，您想要比订阅和文章的简单存在/不存在更具表现力，因为它们的含义有些不同。我建议选择反映其相对频率的权重。例如，如果用户一直阅读 10 万篇文章并进行了 10000 次订阅，那么您可以选择订阅权重为“10”，阅读权重为“1”。

如果您将这些值视为偏好分数，这并不完全有效，原因有很多。如果您使用一种像对待它们一样对待它们的方法，即线性权重，它会更好地工作。

我会向您指出 ALS-WR 算法，它是专门为这种类型的输入设计的。例如：[隐式反馈数据集的协同过滤](http://www2.research.att.com/~yifanhu/PUB/cf.pdf)

这在 Mahout 中与`ParallelALSFactorizationJob`在 Hadoop 上一样实现。虽然需要 Hadoop，但它工作得很好。（虽然我确实在 Mahout 中编写了大部分推荐程序代码，但我不能对此表示赞赏。）

Advertisement: I'm working on commercializing a "next generation" system, evolved from my work in Mahout, as [Myrrix](http://myrrix.com/). It is an implementation of ALS-WR and is ideal for your kind of input. It's quite easy to [download and run](http://myrrix.com/quick-start/), and doesn't need Hadoop.

Given that it may be directly suitable for your problem I don't mind plugging it here.

# qt4 - 飞思卡尔 i.MX6 SABRE LITE 板上的 QT4 移植

> ID：15707014
> 
> 赞同：2
> 
> 时间：2013-03-29T16:12:03.627
> 
> 标签：qt4, arm, cross-compiling, embedded-linux

*   我想在[iMX6 SABRE LITE](http://boundarydevices.com/products/sabre-lite-imx6-sbc/)板上运行 QT Gui 应用程序。

*   为此，我需要使用编译器交叉编译*qt-everywhere-opensource-src-4.6.2*`arm-linux-gnueabi`。

*   我使用[treyweaver.blogspot.in](http://treyweaver.blogspot.in/2010/10/setting-up-qt-development-environment.html)作为参考，它描述了在 beagle 板上移植 QT。

*   谁能告诉我是否可以使用此链接作为参考来移植 QT？如果是这样，我需要更改什么配置？

# angularjs - 如何使用 AngularJS 在我的 http 请求中发送参数？

> ID：15707018
> 
> 赞同：12
> 
> 时间：2013-03-29T16:12:09.150
> 
> 标签：angularjs

我正在使用以下代码：

```
$http({
    method: 'GET',
    url: '/Admin/GetTestAccounts',
    data: { applicationId: 3 }
}).success(function (result) {
    $scope.testAccounts = result;
}); 
```

该代码将以下内容发送到我的服务器：

```
http://127.0.0.1:81/Admin/GetTestAccounts 
```

当我的 MVC 控制器收到此消息时：

```
[HttpGet]
public virtual ActionResult GetTestAccounts(int applicationId)
{
    var testAccounts =
        (
            from testAccount in this._testAccountService.GetTestAccounts(applicationId)
            select new
            {
                Id = testAccount.TestAccountId,
                Name = testAccount.Name
            }
        ).ToList();

    return Json(testAccounts, JsonRequestBehavior.AllowGet);
} 
```

它抱怨没有applicationId。

> 参数字典包含方法的不可空类型“System.Int32”的参数“applicationId”的空条目

有人可以解释为什么 applicationId 没有作为参数发送吗？以前我使用以下非 Angular 代码执行此操作，并且效果很好：

```
$.ajax({
    url: '/Admin/GetTestAccounts',
    data: { applicationId: 3 },
    type: 'GET',
    success: function (data) {
        eViewModel.testAccounts(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-06-27T23:41:54.280

如果你不想使用 jQuery 的 $.param，你可以使用 $http 的 param 字段来序列化一个对象。

```
var params = {
    applicationId: 3
}

$http({
    url: '/Admin/GetTestAccounts',
    method: 'GET',
    params: params
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:04:26.450

好的，我会尝试回答这个问题。

我认为问题在于 angularjs 假定传递给 http 的数据将被 urlencoded。如果有对象，我不确定为什么 Angular 不会隐式序列化它。所以你必须自己编码：

```
 $http({
       method: 'GET',
       url: '/Admin/GetTestAccounts',
       data: 'applicationId=3'
       }) 
```

或使用 jQuery 参数为您编码：

```
$http({
     method: 'GET',
     url: '/Admin/GetTestAccounts',
     data: $.param({ applicationId: 3 })
     }) 
```

# r - rpy2 模块在 Python3.2 中不起作用

> ID：15707020
> 
> 赞同：0
> 
> 时间：2013-03-29T16:12:23.997
> 
> 标签：r, module, python-3.x, importerror, rpy2

我正在尝试将 rpy2 (version2.3.4) 库导入到 Ubuntu 12.10 机器上的 Python (version3.2.3) 中。rpy2 文档说 rpy2 可以在所有 Python 3 版本下工作，我还发现了与 rpy2 和 Python3.2 相关的其他主题，这些主题表明这些版本应该一起工作。无论如何，当我尝试导入模块时：

```
from rpy2 import robjects 
```

结果是这样的：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/usr/local/lib/python3.2/dist-packages/rpy2/robjects/__init__.py", line 14, in <module>
    import rpy2.rinterface as rinterface
  File "/usr/local/lib/python3.2/dist-packages/rpy2/rinterface/__init__.py", line 8, in <module>
    raise RuntimeError("Python (>=2.7 and < 3.0) or >=3.3 are required to run rpy2")
RuntimeError: Python (>=2.7 and < 3.0) or >=3.3 are required to run rpy2 
```

那么，rpy2 真的不能与 Python3.2 一起工作吗？什么适合项目给我的信息，或者可能是问题所在。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:51:28.313

> rpy2 文档说 rpy2 适用于所有 Python 3 版本

不完全是，我希望；检查有关[安装 rpy2](http://rpy.sourceforge.net/rpy2/doc-2.3/html/overview.html#installation)的部分。

rpy2 可能永远不会支持 Python 3.2（Python 3.2 已经 EOL）。如果您在使用 Python 3 之后，请更新到 Python 3.3。

# highcharts - Highstock 错误：当 startOnTick/endOnTick 在日期时间 xAxis 上设置为 true 时，导航器不起作用

> ID：15707021
> 
> 赞同：0
> 
> 时间：2013-03-29T16:12:26.043
> 
> 标签：highcharts, highstock

当 startOnTick 和/或 endOnTick 为日期时间 xAxis 设置为 true 时，左右拖动导航器会展开它，直到它填满整个数据范围。

见：http: [//jsfiddle.net/L3t4s/2/](http://jsfiddle.net/L3t4s/2/)

以下重复代码：

```
<div id="container" style="height: 400px; min-width: 600px"></div>

<script src="http://code.highcharts.com/stock/highstock.js"></script>
<script src="http://code.highcharts.com/stock/modules/exporting.js"></script>
<script type="text/javascript" src="http://www.highcharts.com/samples/data/usdeur.js"></script>
$(function() {
    $('#container').highcharts('StockChart', {

        chart: {
            plotBorderWidth: 1
        },

        rangeSelector: {
            selected: 4
        },

        xAxis: {
            startOnTick: true,
            endOnTick: true
        },

        series: [{
            name: 'USD to EUR',
            data: usdeur
        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:07:34.863

它是由拖动导航器时实时重绘引起的。要防止这种设置`liveRedraw: false`，请参阅：http: [//jsfiddle.net/L3t4s/4/](http://jsfiddle.net/L3t4s/4/)

# image - 具有运动和透明度的图层中的图像 - wxpython

> ID：15707023
> 
> 赞同：0
> 
> 时间：2013-03-29T16:12:39.527
> 
> 标签：image, python-2.7, bitmap, wxpython, boxsizer

听起来像 Photoshop 中的“图层中的图像”可能不合适，但实际上这就是我所拥有的并且想要实现的。

在启动我的程序后，我使用一组 wx.boxsizer 来获得一个漂亮且有条理的屏幕。

在水平 wx.BoxSizer 的一行中，我有 3 列使用不同的 wx.Panels 完成，每一列都包含由 Timer 函数完成的移动 wx.StaticBitmaps。

中间的第二个 wx.Panel 与保持原始面板大小的比例为 0，实际上包含 2 个图像，一个具有透明度的 PNG 和移动的 wx.StaticBitmap，它应该是这个 PNG 的背景。

这不适合我。我只是希望PNG位于由计时器移动的另一个图像之上。2层，如果你喜欢。

它正在创建一个非常简单和基本的动作效果（就像 PNG 中的对象正在运行）

现在我想到了一些方法来解决这个问题，但没有一个奏效：

1.  弄清楚 python 如何决定将哪个图像放在前面，哪些留在后面。操纵那个
2.  将运动图像保留在大小调整器中，取出 PNG 并将其放在运动图像上（比我需要动态确定运动图像在哪里）
3.  将运动图像设为 wx.panel 背景，然后我可以简单地调用透明 PNG。

我将在此处粘贴我的脚本的一部分以供勇敢的眼睛使用：

```
class AnimationPanel(wx.Panel):
  def __init__(self, parent):
    wx.Panel.__init__(self, parent)
    self.loc = wx.Image("intro/runner.png",wx.BITMAP_TYPE_PNG).ConvertToBitmap()
    self.locpic = wx.StaticBitmap(self, -1, self.loc, (0, 0), (self.loc.GetWidth(), self.loc.GetHeight()))
    self.xer = 3080
    self.xer2 = 2310
    self.xer3 = 1540
    self.env = wx.Image("intro/environ1.png",wx.BITMAP_TYPE_PNG).ConvertToBitmap()
    self.env2 = wx.Image("intro/environ2.png",wx.BITMAP_TYPE_PNG).ConvertToBitmap()
    self.env3 = wx.Image("intro/environ3.png",wx.BITMAP_TYPE_PNG).ConvertToBitmap()
    self.picture = wx.StaticBitmap(self, -1, self.env, (0, 0), (self.env.GetWidth(), self.env.GetHeight()))
    self.picture2 = wx.StaticBitmap(self, -1, self.env2, (770, 0), (self.env2.GetWidth(), self.env2.GetHeight()))
    self.picture3 = wx.StaticBitmap(self, -1, self.env3, (1540, 0), (self.env3.GetWidth(), self.env3.GetHeight()))
    self.timer = wx.Timer(self)            
    self.Bind(wx.EVT_TIMER, self.OnTimer, self.timer)
    self.timer.Start(5)

  def OnTimer(self, event):
    if self.xer <= 3080:
        self.xer += 1
        self.picture.Move((self.xer,0))
    else:
        self.xer = -770
    if self.xer2 <= 3080:
        self.xer2 += 1
        self.picture2.Move((self.xer2,0))
    else:
        self.xer2 = -770
    if self.xer3 <= 3080:
        self.xer3 += 1
        self.picture3.Move((self.xer3,0))
    else:
        self.xer3 = -770 
```

这是在主框架中：

```
 ap = AnimationPanel(self)
    v2box = wx.BoxSizer(wx.HORIZONTAL)
    v2box.Add(someother, 1, wx.EXPAND)
    v2box.Add(ap, 0, wx.EXPAND)
    v2box.Add(someother, 1, wx.EXPAND) 
```

我确实对此进行了研究，但我是一个初学者，所以如果可能的话，请帮助我提供一些简单的提示或建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:08:41.743

在 wxpython 演示安装中有一个包含 pySketch 演示的示例文件夹。

In this code it creates dc drawn objects that can be moved in front and behind other objects.

A quick look over this code it looks like the drawn items are stored in a list and then drawn in the list order.

I guess that's how you would implement your layering, you would have a list of layers and in each layer you would store your items for that layer.

# android - Android，Eclipse，将 .jar 放入“lib”&“添加到构建路径”与将 .jar 放入“libs”

> ID：15707024
> 
> 赞同：2
> 
> 时间：2013-03-29T16:12:40.160
> 
> 标签：android, eclipse, jar, libs

我试图在 Eclipse v3.7.2 中将 loopj .jar 库添加到我的项目中

首先，我将 .jar 添加到“lib”目录中，右键单击它并选择“添加到构建路径”。它编译得很好，但是在执行时出现错误“找不到类'com.loopj.android.http.AsyncHttpClient'。

所以我从构建路径中删除了 .jar，并将其移动到“libs”目录中。

当它在“libs”目录中时，无需添加构建路径，这次它编译良好，执行也很好。

那么“lib”目录和“添加到构建路径”与“libs”目录之间的细微差别是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T16:24:30.597

> 那么“lib”目录和“添加到构建路径”与“libs”目录之间的细微差别是什么？

Android 当前的构建工具（Eclipse 和命令行）期望 JAR 位于一个`libs/`目录中。它会自动将这些 JAR 添加到您的编译时构建路径中。更重要的是，它将 JAR 的内容放入您的 APK 文件中，因此它们将成为您运行时构建路径的一部分。

手动使用`lib/`和修改您的构建路径将解决编译时问题，但是您的 JAR 内容不在您的 APK 中，因此您在运行时将无法使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T07:26:18.070

引用：[http ://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

如果您仍然手动引用 jar 库而不是将它们放在 libs/ 下，请注意以下几点：

*   如果项目是**库项目**，这些 jar 库**将不会自动**对应用程序项目可见。你真的应该把这些移到**libs/**
*   如果项目是**应用程序**，这可以工作，但**您必须确保将 jar 文件标记为已导出**。

# php - 非静态调用静态方法

> ID：15707029
> 
> 赞同：7
> 
> 时间：2013-03-29T16:12:57.660
> 
> 标签：php, oop, static-methods

我有一个子类，它扩展了一个只有静态方法的类。我想让这个子类成为单例而不是静态的，因为最初的开发人员真的想要一个单例，但使用了静态（很明显，因为静态类中的每个方法都调用 Init() 函数（基本上是构造函数））。

父级中的大多数方法不需要在子级中覆盖，但我想避免编写这样的方法：

```
public function Load($id)
{
     return parent::Load($id);
} 
```

当我不想完全覆盖该方法而只使用：

```
$child->Load($id); 
```

是否可以非静态地调用静态方法？是否可以使用实例对象扩展静态对象？我知道我可以尝试它并且它可能会起作用（PHP 非常宽容），但我不知道是否有什么我应该担心的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T16:20:13.833

*   你能继承静态方法吗？

是的

*   你能覆盖静态方法吗？

是的，但只有从 PHP 5.3 开始，它们才能按您的预期工作： [http](http://www.php.net/manual/en/language.oop5.static.php) ://www.php.net/manual/en/language.oop5.static.php （即`self`绑定到实际类而不是它所在的类中定义）。

*   是否可以非静态地调用静态方法？

是的，但会输`$this`。您（还）没有收到警告，但也没有真正的理由将其称为错误的方式。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-23T18:29:37.347

分两部分回答。

首先，关于名义上的问题：非静态调用静态方法非常好；@SamDark 的评论是正确的。它不会产生警告，也不会导致任何小猫谋杀。尝试一下：

```
<?php

class test {
    public static function staticwarnings(){
        echo "YOU ARE (statically) WARNED!\n";
    }
}

error_reporting(E_ALL);

$test = new test();
echo "\n\ncalling static non-statically\n";
$test->staticwarnings(); 
```

如果您`$this`在该静态方法中有一个实例引用 , ，那么您将收到一个致命错误。但不管你怎么称呼它都是真的。

**再一次，没有警告，也没有任何小猫被杀。**

* * *

答案的第二部分：

Calling an overridden parent function from an overriding child class requires something called ["**scope resolution**"](http://php.net/manual/en/keyword.paamayim-nekudotayim.php). What the OP is doing in their method is NOT calling a static method. (Or at least, it doesn't have to be; we can't see the parent implementation). The point is, using the parent keyword is not a static call. Using the `::` operator on an explicit parent class name is also not a static call, if it is used from an extending class.

Why is that documentation link so strangely named? It's literally Hebrew. If you've ever run into an error related to it, you might have observed the delightfully-named parser error code [`T_PAAMAYIM_NEKUDOTAYIM`](https://en.wikipedia.org/wiki/Scope_resolution_operator#PHP).

# c# - 如何防止 System.Version 删除前导零？

> ID：15707033
> 
> 赞同：7
> 
> 时间：2013-03-29T16:13:22.703
> 
> 标签：c#

```
var versionNo = new System.Version("2.01"); 
```

我得到值`versionNo`= `2.1`，但我希望它为`2.01`.

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T16:19:44.147

这就是工作原理 - 它将版本的组件存储为单独的整数，因此和[`system.Version`](http://msdn.microsoft.com/en-us/library/system.version.aspx)之间没有区别。如果您*需要*以这种方式显示它，您可以将其格式化为：`2.01``2.1`

 *```
Version versionNo = new Version("2.01");
string s = string.Format("{0}.{1:00}",versionNo.Major, versionNo.Minor); 
```

为方便起见，您还可以创建一个扩展方法：

```
public static string MyFormat(this Version ver)
{
    return string.Format("{0}.{1:00}",ver.Major, ver.Minor);
} 
```

这样，您仍然可以自定义*显示*，同时保持`Version`类的可比性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-29T16:18:50.633

System.Version 的每个组件都是一个 int，因此它不会填充 0。您可以有一个主要、次要和构建：

```
Version versionNo = new Version("2.0.1"); 
```

这导致

```
Version = 2.0.1 
```

但通常，01 和 1 是等价的。如果您想专门填充版本 0 的任何组件，我建议您~~覆盖版本的 ToString 方法或~~创建扩展方法（如 D Stanley 所述），或使用不同的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T16:19:55.207

如果您的版本是`2.01`，那意味着您`MinorVersion`是`01`。

要输出它，您必须通过执行以下操作来[**填充**](http://msdn.microsoft.com/en-us/library/dd260048.aspx), `MinorVersion`：

```
string version = version.Major.ToString() + version.Minor.ToString("D2"); 
```*

# c++ - 获取 netstat -s 统计信息的 Windows API

> ID：15707035
> 
> 赞同：4
> 
> 时间：2013-03-29T16:13:28.123
> 
> 标签：c++, windows, api, netstat

我正在搜索返回与 netstat -s 相同统计信息的 Windows API

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T16:20:44.227

您可以使用该`GetIpStatistics()`功能。

有关更多信息和示例，请参见此处：

[http://msdn.microsoft.com/en-us/library/aa365959(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa365959(VS.85).aspx)

# c# - 如何从 C# 中的 HTMLDocument 对象触发 ajax 调用

> ID：15707036
> 
> 赞同：0
> 
> 时间：2013-03-29T16:13:31.270
> 
> 标签：c#, javascript, asp.net, html, ajax

我试图通过将 HTML 拉入字符串并解析它来从网页中检索一些数据。问题是我想要的信息仅在用户浏览到页面底部并触发 Ajax 调用以更新 DOM 时显示在页面上。有没有办法在代码中做到这一点，而无需将 HTML 加载到浏览器控件中并告诉它滚动？

# r - 循环的正确措辞将所有 .dta 文件转换为目录中的 .csv

> ID：15707039
> 
> 赞同：2
> 
> 时间：2013-03-29T16:13:41.987
> 
> 标签：r, dta

所以我有一个 dta 到 csv 转换的实例，我需要对目录中的所有文件重复它。对 SO 有很大帮助，但我仍然不完全在那里。这是单个实例

```
#Load Foreign Library
library(foreign)

## Set working directory in which dtw files can be found)
setwd("~/Desktop")

## Single File Convert
write.csv(read.dta("example.dta"), file = "example.csv") 
```

从这里，我想我使用类似的东西：

```
## Get list of all the files
file_list<-dir(pattern = ".dta$", recursive=F, ignore.case = T)

## Get the number of files
n <- length(file_list)

## Loop through each file
for(i in 1:n) file_list[[i]] 
```

但我不确定正确的语法、表达式等。在查看了下面的优秀解决方案之后，我只是感到困惑（不一定会出错）并且即将手动进行 - 快速提示以优雅的方式完成目录中的每个文件并转换它？

审查的答案包括：

[无需 Stata 软件即可将 Stata .dta 文件转换为 CSV](https://stackoverflow.com/questions/2536047/convert-dta-file-to-csv)

[将为单个文件准备的 R 脚本应用于目录中的多个文件](https://stackoverflow.com/questions/9982269/applying-r-script-prepared-for-single-file-to-multiple-files-in-the-directory)

[从目录中读取多个文件，R](https://stackoverflow.com/questions/10117042/reading-multiple-files-from-a-directory-r)

谢谢！！

Got the answer: Here's the final code:

```
## CONVERT ALL FILES IN A DIRECTORY

## Load Foreign Library
library(foreign)

## Set working directory in which dtw files can be found)
setwd("~/Desktop")

## Convert all files in wd from DTA to CSV
### Note: alter the write/read functions for different file types.  dta->csv used in this specific example

for (f in Sys.glob('*.dta')) 
  write.csv(read.dta(f), file = gsub('dta$', 'csv', f)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:21:11.753

If the files are in your current working directory, one way would be to use `Sys.glob` to get the names, then loop over this vector.

```
for (f in Sys.glob('*.dta')) 
    write.csv(read.dta(f), file = gsub('dta$', 'csv', f)) 
```

# java - 尝试在 SQLite 数据库中保存数据 - 已清理（无重大问题）仍强制关闭

> ID：15707040
> 
> 赞同：0
> 
> 时间：2013-03-29T16:13:47.047
> 
> 标签：java, android, sqlite, forceclose

我对 StackOverflow 有点陌生，我想知道是否可以就以下问题提供一些意见：我正在尝试在 a 中保存一些数据，`sqlite database`但每次我尝试这样做时，应用程序强制关闭并且我不确定为什么。我已经清理了文件，没有任何问题。（我不知道我做错了什么——但有些东西被错误地编程了。）

爪哇：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.FragmentActivity;
import android.text.format.DateFormat;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.app.Activity;
import android.app.Dialog;
import android.app.TimePickerDialog;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.text.format.DateFormat;
import android.widget.TimePicker;

import com.nfc.linkingmanager.TimePickerFragment.TimePickedListener;

import java.util.Calendar;

public class AddEditCountry extends Activity implements TimePickedListener 
{
    private TextView mPickedTimeText;
    private Button mPickTimeButton;
    private long rowID; 
     private EditText nameEt;
     private EditText capEt;
     private EditText codeEt;
     private TimePicker timeEt;
     public static final String KEY_BUNDLE_TIME = "time";
     public static final String KEY_BUNDLE_MIN = "min";

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
          setContentView(R.layout.add_country);  // where your_layout is the name of the xml file with the layout you want to use minus the .xml extention
         //this layout must contain all of these views below that you are trying to initialize

          nameEt = (EditText) findViewById(R.id.nameEdit);
          capEt = (EditText) findViewById(R.id.capEdit);
          codeEt = (EditText) findViewById(R.id.codeEdit);
          timeEt = (TimePicker) findViewById(R.id.timeEdit);

          Bundle extras = getIntent().getExtras(); 

          if (extras != null)
          {
              rowID = extras.getLong("row_id");
             nameEt.setText(extras.getString("name"));  
             capEt.setText(extras.getString("cap"));  
             codeEt.setText(extras.getString("code"));    
             String time = extras.getString("time");
             String[] parts = time.split(":");
             timeEt.setCurrentHour(Integer.valueOf(parts[0]));
             timeEt.setCurrentMinute(Integer.valueOf(parts[1]));
             timeEt.setIs24HourView(false);
          }

          Button saveButton =(Button) findViewById(R.id.saveBtn);
          saveButton.setOnClickListener(new OnClickListener() {

              public void onClick(View v) 
              {
                 if (nameEt.getText().length() != 0)
                 {
                    AsyncTask<Object, Object, Object> saveContactTask = 
                       new AsyncTask<Object, Object, Object>() 
                       {
                          @Override
                          protected Object doInBackground(Object... params) 
                          {
                             saveContact();
                             return null;
                          }

                          @Override
                          protected void onPostExecute(Object result) 
                          {
                             finish();
                          }
                       }; 

                    saveContactTask.execute((Object[]) null); 
                 }

                 else
                 {
                    AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                    alert.setTitle(R.string.errorTitle); 
                    alert.setMessage(R.string.errorMessage);
                    alert.setPositiveButton(R.string.errorButton, null); 
                    alert.show();
                 }
              } 
         });
       }

           private void saveContact() 
           {
              DatabaseConnector dbConnector = new DatabaseConnector(this);

              if (getIntent().getExtras() == null)
              {
                  dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString() + ":"
                              + timeEt.getCurrentMinute().toString(),
                          codeEt.getText().toString());

              }
              else
              {
                  dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString() + ":"
                              + timeEt.getCurrentMinute().toString(),
                          codeEt.getText().toString());
              }
           }

        @Override
        public void onTimePicked(Calendar time)
        {
            // display the selected time in the TextView
            mPickedTimeText.setText(DateFormat.format("h:mm a", time));
        }
} 
```

XML:

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent" 
   android:layout_height="wrap_content" android:layout_weight="1">

   <LinearLayout android:id="@+id/linearLayout"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical" 
      android:padding="5dp">

      <EditText android:id="@+id/nameEdit"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content" 
         android:imeOptions="actionNext" 
         android:hint="@string/name_hint"
         android:inputType="textPersonName|textCapWords"/>

      <EditText android:id="@+id/capEdit"
         android:layout_width="fill_parent" 
         android:layout_height="wrap_content" 
         android:imeOptions="actionNext" 
         android:hint="@string/cap_hint"
         android:inputType="textPersonName|textCapWords"/>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Data Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="left"
            android:textColor="#ffffff"
            android:text="10MB" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="right"
            android:textColor="#ffffff"
            android:text="Unlimited Data" />
    </LinearLayout>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Bandwidth Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="left"
            android:textColor="#ffffff"
            android:text="10kbs" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:textColor="#ffffff"
            android:gravity="right"
            android:text="Unlimited Bandwidth" />
    </LinearLayout>

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:textAppearanceSmall" />

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="WiFi Time Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <TimePicker
        android:id="@+id/timeEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:layout_weight="1.0" />

    <EditText
        android:id="@+id/codeEdit"
        android:inputType="textUri"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:lines="1"
        android:hint="@string/code_hint"
        android:imeOptions="actionNext" />

      <Button android:id="@+id/saveBtn" 
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_marginTop="15dp"
         android:layout_gravity="center_horizontal"
         android:text="@string/save_btn"/>
   </LinearLayout>
</ScrollView> 
```

问题：

清洁 - 没有问题

```
LOGCAT:

03-29 13:23:28.950: D/OpenGLRenderer(20744): Enabling debug mode 0
    03-29 13:23:33.780: D/AndroidRuntime(20744): Shutting down VM
    03-29 13:23:33.780: W/dalvikvm(20744): threadid=1: thread exiting with uncaught exception (group=0x41f7b930)
    03-29 13:23:33.790: E/AndroidRuntime(20744): FATAL EXCEPTION: main
    03-29 13:23:33.790: E/AndroidRuntime(20744): android.app.SuperNotCalledException: Activity {com.app.gamedemo/com.app.gamedemo.AddEditCountry} did not call through to super.onCreate()
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2146)
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at android.os.Handler.dispatchMessage(Handler.java:99)
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at android.os.Looper.loop(Looper.java:137)
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at android.app.ActivityThread.main(ActivityThread.java:5041)
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at java.lang.reflect.Method.invokeNative(Native Method)
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at java.lang.reflect.Method.invoke(Method.java:511)
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    03-29 13:23:33.790: E/AndroidRuntime(20744):    at dalvik.system.NativeStart.main(Native Method)
    03-29 13:23:35.390: I/Process(20744): Sending signal. PID: 20744 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:16:54.290

问题出在你的`onCreate()`

```
 @Override
    public void onCreate(Bundle savedInstanceState)
    {

          nameEt = (EditText) findViewById(R.id.nameEdit);
          capEt = (EditText) findViewById(R.id.capEdit);
          codeEt = (EditText) findViewById(R.id.codeEdit);
          timeEt = (TimePicker) findViewById(R.id.timeEdit); 
```

您需要先致电`setContentView()`，然后再尝试访问您的`EditTexts`等等。您`Views`在布局（xml 文件）中的“实时”，因此它们一直存在，`null`直到您将`layout`. 将其更改为类似

```
 @Override
    public void onCreate(Bundle savedInstanceState)
    {
          setContentView(R.layout.your_layout);  // where your_layout is the name of the xml file with the layout you want to use minus the .xml extention
         //this layout must contain all of these views below that you are trying to initialize

          nameEt = (EditText) findViewById(R.id.nameEdit);
          capEt = (EditText) findViewById(R.id.capEdit);
          codeEt = (EditText) findViewById(R.id.codeEdit);
          timeEt = (TimePicker) findViewById(R.id.timeEdit); 
```

**编辑**

就像错误所说的那样，您正在尝试将 a`TextView`转换为 a `TimePicker`。这里

`timeEt = (TimePicker) findViewById(R.id.timeEdit);`

`(R.id.timeEdit)`指向一个`TextView`但在这里

`private TimePicker timeEt;`

您将其声明为`TimePicker`. 如果您希望它是 a`TimePicker`然后在您的 xml 中更改它

```
`<TimePicker 
    android:id="@+id/timeEdit"      
    style="@style/StyleText"/> ` 
```

此外，您的 xml 中有多个 id

`android:id="@+id/codeText"`

可能想改变这一点

**第二次编辑**

`03-29 13:23:33.790: E/AndroidRuntime(20744): android.app.SuperNotCalledException: Activity {com.app.gamedemo/com.app.gamedemo.AddEditCountry} did not call through to super.onCreate()`

logcat 中的这一行说明了一切。你没有打电话`super.onCreate()`。`onCreate()`将以下行添加为方法中的第一行

```
super.onCreate(savedInstanceState); 
```

在阅读你的 logcat 时，寻找它所说的`Fatal Exception`. 下一行应该说明它是什么（Null Pointer Exception、Class Cast Exception 等），然后查找引用您的包名称的第一行，它会告诉您从哪里开始查找错误。前任。Main.java 57 在第 57 行告诉您 Main.java 文件中发生的任何致命异常。问题可能最初来自其他地方，但这始终是一个很好的起点，因此您可以缩小范围并发布相关代码如果你需要帮助。

# linux - unix & gnu/linux 发行版：“which”命令的可能位置？

> ID：15707041
> 
> 赞同：1
> 
> 时间：2013-03-29T16:13:48.930
> 
> 标签：linux, bash, unix, sh, csh

希望引用**which**命令的完整路径作为对某些 shell 脚本的*改进。*除了 /usr/bin/which之外，有人知道一些 unix gnu/linux 发行版的标准位置**吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:41:54.013

这不是 linux 系统的标准部分。它不存在于 Linux Standard Base 4.1 中，也不存在于 Single Unix Specification Version 4/POSIX 2008 中：

*   [http://refspecs.linuxfoundation.org/LSB_4.1.0/LSB-Core-generic/LSB-Core-generic/toccommand.html](http://refspecs.linuxfoundation.org/LSB_4.1.0/LSB-Core-generic/LSB-Core-generic/toccommand.html)
*   [http://pubs.opengroup.org/onlinepubs/9699919799/idx/utilities.html](http://pubs.opengroup.org/onlinepubs/9699919799/idx/utilities.html)

所以这个问题的唯一正式答案是在文件系统中没有可靠的位置。

对于实际的解决方案：它应该始终在默认搜索路径目录中可用。所以最好的实用答案：从你的脚本中运行 which 没有硬编码的路径。[编辑：任何具有一组硬编码路径的解决方案都比使用默认搜索路径更糟糕]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:16:47.143

试试这个：

```
which -a which 
```

该`-a`标志列出了提供的参数的所有位置（与返回将在当前环境中执行的文件或链接的路径名相反，如果其参数在严格符合 POSIX 的 shell 中作为命令给出。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T16:19:51.427

你可以试试 ：

```
whereis which 
```

`whereis`定位二进制，命令的源

# javascript - highchart的默认X轴位置

> ID：15707049
> 
> 赞同：0
> 
> 时间：2013-03-29T16:14:45.453
> 
> 标签：javascript, highcharts

我在 Highchart.lib 上有一个线性图表。我在上面显示的值超过零。我如何将 X 轴移动到底部，因为我不需要小于零的值。见附件。![在此处输入图像描述](../Images/3f56724045f12ff1eb0c195731f91d74.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:19:45.013

我从您的图像中假设您的意思是 y 轴。

最简单的方法是简单地设置您的 y 轴最小值和最大值。您还可以使用 startOnTick 和 minPadding 设置来实现各种控制选项。

[http://api.highcharts.com/highcharts#yAxis](http://api.highcharts.com/highcharts#yAxis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T23:24:27.040

设置 min Value 和 minRange Value - 就是这样。

# .net - 使用 IDisposable 的接口

> ID：15707054
> 
> 赞同：1
> 
> 时间：2013-03-29T16:15:00.407
> 
> 标签：.net, design-patterns, idisposable

关于`IDisposable`

我正在创建我希望在大多数情况下使用系统资源的界面，但并非总是如此。`IDisposable`预计我的界面上的使用包括在内是谨慎的做法吗？

例如，我有一个提供同步方法的接口。

```
interface IDateTimeProvider : IDisposable
{
    int LeapSeconds {get;set;}
    DateTime LocalNow {get;}
    DateTime UtcNow {get;}
    DateTime GpsNow {get;}
}

class NtpTimeProvider : IDateTimeProvider
{
    // Assume client is setup and ready to use.
    // Obtains time via network resources
    NtpClient client;  

   NtpTimeProvider (int leapSeconds)
   { LeapSeconds = leapSeconds;}

    int LeapSeconds {get;set;}
    DateTime LocalNow {get{return client.Utc};}
    DateTime UtcNow {get{return client.Utc};}
    DateTime GpsNow {get{return client.Utc - TimeSpan.FronSeconds(LeapSeconds);}}
    void Dispose()
    {
        if(client != null) Client.Dispose();
    }
}

class SystemTimeProvider : IDateTimeProvider
{

   SystemTimeProvider (int leapSeconds)
   { LeapSeconds = leapSeconds;}

    int LeapSeconds {get;set;}
    DateTime LocalNow {get{return DateTime.Now};}
    DateTime UtcNow {get{return DateTime.UtcNow };}
    DateTime GpsNow {get{return DateTime.UtcNow - TimeSpan.FronSeconds(LeapSeconds);}}
    void Dispose()
    { //obviously this isn't needed}
} 
```

所以问题是，`IDisposable`当我预计大多数实现将使用需要释放的系统资源时，我应该强加这个要求吗？目前我这样做是因为当 IDateTimeProvider 的用户正在释放资源和

```
if(myDateTimeProvider is IDisposable) ((IDisposable)myDateTimeProvider).Dispose(); 
```

不需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:16:31.047

一般来说，提供接口的原因是允许程序员将一个概念的各种实现视为具有相同的行为集。如果您`IDisposable`只在恰好管理系统资源的类上实现，您将迫使程序员处理该实现细节，从而为您的设计增加复杂性和脆弱性。

如果在对象的有用性到期时，您的应用程序可能会引用非托管资源，那么您绝对应该实现该`IDisposable`接口，以便您的类的使用者可以使用 Dispose 模式以可预测的方式释放这些资源。

作为对 Dispose Pattern 原因的提醒：

> 在计算机编程中，dispose 模式是一种设计模式，用于在使用自动垃圾收集的运行时环境中处理资源清理。dispose 模式旨在解决的基本问题是，由于垃圾收集环境中的对象具有终结器而不是析构器，因此无法保证对象会在任何确定的时间点被销毁。dispose 模式通过为对象提供一个方法（通常称为 Dispose 或类似方法）来解决此问题，该方法释放对象持有的任何资源。

[http://en.wikipedia.org/wiki/Dispose_pattern](http://en.wikipedia.org/wiki/Dispose_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:16:40.510

> 所以问题是，当我预计大多数实现将使用需要释放的系统资源时，我是否应该强加 IDisposable 要求？

这是值得商榷的，但框架中有一些示例遵循此指南。一个很好的例子是[Stream](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx) -`IDisposable`即使有子类不需要这样做，它也会实现。

但是，我会谨慎地要求您的用户这样做，除非您确实相当确定几乎所有实现都需要`IDisposable`，而不仅仅是其中的几个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:12:09.143

50,000 美元的问题是代码是否会在不知道具体类型以及是否需要清理的情况下获得实现接口的对象的*所有权。*在可能发生这种情况的情况下 [通过快速最常见的示例是`IEnumerable.GetEnumerator()`和`IEnumerable<T>.GetEnumerator()`，尽管存在许多其他示例]，客户端代码必须使用以下两种模式之一：

*   如果接口类型没有实现`IDisposable`[就像 non-generic`IEnumerator`返回的非泛型的情况一样`IEnumerable`]，那么正确编写的已经获得对象所有权的客户端代码必须——在放弃它之前——检查特定对象是否实现接口也恰好实现`IDisposable`，如果是，调用它的`IDisposable.Dispose`实现。

*   如果接口确实实现`IDisposable`了，那么获得所有权的正确编写的客户端必须——在放弃对象之前——调用`IDisposable.Dispose`该对象，除非它以某种方式知道该对象实际上并不需要清理。请注意，即使一个对象在其`IDisposable.Dispose`方法中没有做任何事情，在许多情况下，无条件调用它也比花费大量时间确定调用是否必要要快。即使只有 0.001% 的对象实例需要清理，`IDisposable`也不会给客户端代码带来任何新的义务。相反，它将增加客户端代码履行其义务的可能性，并降低所有对象这样做的成本——包括 99.999% 的实例不需要清理。

如果一个接口不太可能被工厂方法返回，也不太可能在对象所有者不知道是否需要清理的任何其他场景中使用，则不需要实现该接口`IDisposable`。但是对于接口类型可能由工厂方法返回的情况，它应该实现`IDisposable`.

# python - 在 Python 2.7 中获取代码块的执行时间

> ID：15707056
> 
> 赞同：86
> 
> 时间：2013-03-29T16:15:08.280
> 
> 标签：python, python-2.7, profiler

我想测量在 Python 程序中评估一段代码所用的时间，可能在用户 cpu 时间、系统 cpu 时间和已用时间之间分开。

我知道`timeit`模块，但是我有很多自己编写的函数，在设置过程中传递它们并不是很容易。

我宁愿有一些可以使用的东西，例如：

```
#up to here I have done something....
start_counting() #or whatever command used to mark that I want to measure
                   #the time elapsed in the next rows
# code I want to evaluate
user,system,elapsed = stop_counting() #or whatever command says:
                                      #stop the timer and return the times 
```

用户和系统 CPU 时间不是必需的（尽管我想测量它们），但是对于经过的时间，我希望能够做这样的事情，而不是使用复杂的命令或模块。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-03-29T16:19:00.707

要以秒为单位获取经过的时间，您可以使用[`timeit.default_timer()`](http://docs.python.org/2/library/timeit.html#timeit.default_timer)：

```
import timeit
start_time = timeit.default_timer()
# code you want to evaluate
elapsed = timeit.default_timer() - start_time 
```

`timeit.default_timer()`用于代替`time.time()`或`time.clock()`因为它将为任何平台选择具有更高分辨率的计时功能。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-29T16:36:15.363

我总是使用装饰器为现有函数做一些额外的工作，包括获取执行时间。它是pythonic和简单的。

```
import time

def time_usage(func):
    def wrapper(*args, **kwargs):
        beg_ts = time.time()
        retval = func(*args, **kwargs)
        end_ts = time.time()
        print("elapsed time: %f" % (end_ts - beg_ts))
        return retval
    return wrapper

@time_usage
def test():
    for i in xrange(0, 10000):
        pass

if __name__ == "__main__":
    test() 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-05-25T06:57:22.893

您可以通过上下文管理器实现此目的，例如：

```
from contextlib import contextmanager
import time
import logging
@contextmanager
def _log_time_usage(prefix=""):
    '''log the time usage in a code block
    prefix: the prefix text to show
    '''
    start = time.time()
    try:
        yield
    finally:
        end = time.time()
        elapsed_seconds = float("%.2f" % (end - start))
        logging.debug('%s: elapsed seconds: %s', prefix, elapsed_seconds) 
```

使用示例：

```
with _log_time_usage("sleep 1: "):
    time.sleep(1) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-04-21T13:21:13.123

我发现自己一次又一次地解决了这个问题，所以我最终为它创建了一个[库](https://github.com/mherrmann/timer-cm "图书馆")。安装`pip install timer_cm`。然后：

```
from time import sleep
from timer_cm import Timer

with Timer('Long task') as timer:
    with timer.child('First step'):
        sleep(1)
    for _ in range(5):
        with timer.child('Baby steps'):
            sleep(.5) 
```

输出：

```
Long task: 3.520s
  Baby steps: 2.518s (71%)
  First step: 1.001s (28%) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-29T12:27:00.073

为了简单起见，我现在非常喜欢另一种选择 - `ipython`。在 ipython 你有很多有用的东西加上：

`%time <expression>`- 在表达上获得直接的 cpu 和壁时间

`%timeit <expression>`- 在表达式循环中获取 cpu 和 wall time

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-03T17:17:23.120

# Python 3 - 使用标准库的简单解决方案

## 选项 1：三引号代码

```
import inspect
import timeit

code_block = inspect.cleandoc("""
    base = 123456789
    exponent = 100
    return base ** exponent
    """)
print(f'\Code block: {timeit.timeit(code_block, number=1, globals=globals())} elapsed seconds') 
```

`inspect.cleandoc`处理多余的制表符和空格的删除，以便可以复制和粘贴代码块而不会出现缩进错误。

## 选项 2：将代码块放在函数中

```
import timeit

def my_function():
    base = 123456789
    exponent = 100
    return base ** exponent

if __name__ == '__main__':
    print(f'With lambda wrapper: {timeit.timeit(lambda: my_function(), number=1)} elapsed seconds') 
```

请注意，与直接为函数体计时相比，函数调用会增加额外的执行时间。

# c - 使用散列函数的高效直方图实现

> ID：15707064
> 
> 赞同：1
> 
> 时间：2013-03-29T16:15:38.083
> 
> 标签：c, algorithm, search, lookup

有没有比对非线性 bin 分布进行二分搜索更有效的方法来计算直方图？

我实际上只对将键（值）与 bin（传递函数？）匹配的算法位感兴趣，即对于一堆浮点值，我只想知道每个值的适当 bin 索引。

我知道，对于线性 bin 分布，您可以通过将值除以 bin 宽度来获得 O(1)，而对于非线性 bin，二进制搜索可以获得 O(logN)。我当前的实现对不等的 bin 宽度使用二进制搜索。

本着提高效率的精神，我很好奇是否可以使用散列函数将值映射到其适当的 bin 并在宽度不等的 bin 时实现 O(1) 时间复杂度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:47:48.477

在一些简单的情况下，您可以获得 O(1)。

假设您的值是 8 位，从 0 到 255。

如果将它们分成 8 个大小为 2、2、4、8、16、32、64、128 的 bin，则 bin 值范围将为：0-1、2-3、4-7、8-15、16 -31、32-63、64-127、128-255。

在二进制中，这些范围如下所示：

```
0000000x (bin 0)
0000001x
000001xx
00001xxx
0001xxxx
001xxxxx
01xxxxxx
1xxxxxxx (bin 7) 
```

因此，如果您可以快速（在 O(1) 中）计算值中有多少个最高有效零位，则可以从中获取 bin 编号。

在这种特殊情况下，您可以预先计算一个包含 256 个元素的查找表，其中包含 bin 编号，并且为某个值找到合适的 bin 只是一次查找表。

实际上，对于 8 位值，您可以使用任意大小的 bin，因为查找表很小。

如果您要使用大小为 2 次方的 bin，您也可以将此查找表重用于 16 位值。你需要两次查找。您可以将其扩展到更长的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T21:29:05.140

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T21:35:57.733

[Interpolation search](http://en.wikipedia.org/wiki/Interpolation_search) is your friend. It's kind of an optimistic, predictive binary search where it guesses where the bin should be based on a linear assumption about the distribution of inputs, rather than just splitting the search space in half at each step. It will be O(1) if the linear assumption is true, but still works (though more slowly) when the assumption is not. To the degree that its predictions are accurate, the search is fast.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T16:29:56.363

取决于散列的实现和您正在使用的数据类型。对于较小的数据集，如果散列的查找开销平均较大，则更简单的算法（如二进制搜索）可能会优于常量查找。散列的通常实现由链表数组和将字符串映射到链表数组中的索引的散列函数组成。有一个东西叫做负载因子，它是哈希映射中元素的数量/链表数组的长度。因此，对于负载因子 < 1，您将在最佳情况下实现持续查找，因为没有链表将包含一个以上的元素（最佳情况）。

只有一种方法可以找出哪个更好 - 实现哈希映射并亲自查看。你应该能够得到接近不断查找的东西:)

# asp.net - 对 FTP 服务器使用 Dotnetnuke 身份验证

> ID：15707072
> 
> 赞同：1
> 
> 时间：2013-03-29T16:15:59.550
> 
> 标签：asp.net, ftp, authorization, dotnetnuke

我们必须建立一个新的 FTP 服务器（SSL 上的 FTP），但希望用户使用他们在 Dotnetnuke 上的 asp.net 网站上的用户名和密码登录它。我们的网站在 windows 2003 R2 上运行。关于我们如何实现这一目标的任何想法？我研究了 CompleteFTP，这可能是一个有成本的解决方案。是否有任何免费的 FTP 服务器可以开箱即用或通过少量编码提供此功能？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:42:43.490

您可以使用免费的 FTP 服务器[FileZila Server 。](http://filezilla-project.org/)

-- 根据评论编辑答案 --

IIS7+ 中的 FTP 支持 sql server 身份验证。参考：[http ://forums.iis.net/t/1146472.aspx/1](http://forums.iis.net/t/1146472.aspx/1)

这是演练：[http ://www.iis.net/learn/publish/using-the-ftp-service/configuring-ftp-with-net-membership-authentication-in-iis-7](http://www.iis.net/learn/publish/using-the-ftp-service/configuring-ftp-with-net-membership-authentication-in-iis-7)

但是我看到您运行的是 windows server 2003 R2，因此您需要[升级到 IIS7](http://technet.microsoft.com/en-us/library/ff633422%28v=ws.10%29.aspx)才能使用此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T02:37:30.333

[CompleteFTP](https://enterprisedt.com/products/completeftp/)现在有一个[免费版](https://enterprisedt.com/products/completeftp/free/)，它的功能集类似于 FileZilla 服务器（FTP/FTPS、无限用户、虚拟文件系统）。它的配置在 SQL Server Compact 数据库中，因此您应该能够通过查询该数据库的用户表中的用户名和密码哈希来相当容易地与它集成。

# javascript - Javascript 样式链接

> ID：15707073
> 
> 赞同：0
> 
> 时间：2013-03-29T16:16:02.753
> 
> 标签：javascript

第一次披露：我在这个特定页面上运行了很多脚本。

我在页面加载时有一个文本 div，现在有一个特定链接切换到此文本，基于单击链接。加载页面时，我只希望链接是某种颜色。

到目前为止，这是我所拥有的文本...在页面加载中显示：

```
<script>
     window.onload=function showDiv() {
     document.getElementById('d1').style.display = "block";
      }
     </script> 
```

**现在我需要在页面加载时让我的链接具有特定的颜色，但是当单击另一个链接时，该颜色必须能够更改回其 CSS 默认值：**

```
<a href="javascript:unhide('d1');" onClick="changeLinkColor(this)">Innovative Design Methodology</a> 
```

就像我说的，我在此页面上运行了其他脚本，因此您可以在链接中看到。

只是为了好玩，这是我的其他代码（切换文本和突出显示代码）：

```
<script type="text/javascript">
var currentItem;
function unhide(divID) {
    if (currentItem) {
        currentItem.className = 'hidden';
        currentItem = null;
    }
    var item = document.getElementById(divID);
    if (item) {
        item.className = 'unhidden';
        currentItem = item;
    }
}
</script>

<script type="text/javascript">
        var currentLink = null;
        function changeLinkColor(link){
            if(currentLink!=null){
                currentLink.style.color = link.style.color; 
            }
            link.style.color = '#f5b331';
            currentLink = link;
        }
   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:30:10.400

您最初可以在锚标记上添加一个 css 类（具有您的自定义样式），然后在单击任何链接时将其删除。

你的 HTML

```
<a id="link1" class='CustomColor'></a> 
```

还有你的 CSS

```
.CustomColor
{
    color:red;
} 
```

点击任何链接，

```
document.getElementById("link1").className =
document.getElementById("link1").className.replace('CustomColor',''); 
```

# actionscript-3 - as3中的二维对象数组

> ID：15707074
> 
> 赞同：0
> 
> 时间：2013-03-29T16:16:04.333
> 
> 标签：actionscript-3

是否可以像这样在 as3 中创建数组：

```
countdowns[bodyID][powerupName] = { time: powerup.getTime(), onRemove: onRemove }; 
```

我已经尝试了几个小时但没有运气..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:26:12.840

当然可以，但是您必须分别声明每个对象，并且必须调用索引号而不是变量名

假设我有一个颜色数组，其中包含该颜色类型的子数组，其中填充了描述 RGB 的对象

```
var colors:Array = [];
var red:Array = [];
var darkRed:Object = { r : 256, g : 100, b : 100 }
red.push( darkRed ); //darkRed is now part of red
colors.push( red ); //red is now part of colors 
```

要访问`darkRed`，您可以这样做：

```
colors[0][0]; //that is darkRed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:36:17.587

虽然这当然可以做到，但您可能会使事情过于复杂。也许一维 Array ob 量身定制的 Objects 会更适合。

```
var ob:Object=new Object();
ob.bodyId=bodyId;
ob.powerup=powerup; // direct link to powerup might serve you better!
ob.onRemove=onRemove;
countdowns.push(ob); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:33:21.703

我相信这就是你想要完成的：

```
var countdowns:Array = new Array;
countdowns[bodyID] = new Array;
countdowns[bodyID][powerupName] = { time: powerup.getTime(), onRemove: onRemove }; 
```

倒计时数组的第二维是通过在第一维的每个元素中插入一个数组来实现的。

# c# - LINQ - 显示用户朋友的书单

> ID：15707076
> 
> 赞同：1
> 
> 时间：2013-03-29T16:16:12.350
> 
> 标签：c#, linq

我正在开发一个具有以下模型的项目：

![在此处输入图像描述](../Images/86139971deb008634f2df1612f8494a0.png)

我能够成功地创建一个有朋友的用户，创建一个有书籍的用户，以及创建一个有书籍的朋友。

我现在要做的是显示用户朋友的书单。

在我的数据库中，我有两个用户：

1 吉尔

2 杰克

吉尔和杰克都是朋友。

如果以 Jill 身份登录，我可以使用以下查询成功显示 Jack's Books：

```
List<int> friendsIds = db
          .Friends
          .Where(c => c.User.Id == u.Id || c.User1.Id == u.Id)
          .Select(c => c.User1.Id)
          .ToList<int>();

List<Book> friendsBooks = db
                         .Books
                         .Where(c => friendsIds.Contains((int)c.UserId))
                         .ToList<Book>();
labelMyBooks.Text = sBooks;

string sMyFriendsBooks = "";
foreach (Book b in friendsBooks)
{
    sMyFriendsBooks += b.BookTitle + ",";
}
labelMyFriendsBooks.Text = sMyFriendsBooks; 
```

我假设，如果以 Jack 身份登录，相同的查询将提供 Jill's Books。但它提供了杰克的书单。

我想以 Jack 的身份登录并显示 Jill 的书单。我在这里想念什么？它与用户在数据库中的顺序有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:27:13.950

您的初始`.Select(...)`方法是原因 - 它总是选择`c.User1.Id`何时应该`c.User.Id`在比赛开始时选择`c.User1.Id`

尝试以下操作：

```
var f1 = db.Friends.Where(c => c.User.Id == u.Id).Select(c => c.User1.Id);
var f2 = db.Friends.Where(c => c.User1.Id == u.Id).Select(c => c.User.Id);

List<int> friendIds = f1.Union(f2).ToList(); 
```

现在，您的实体以令人困惑的方式定义。 `Friend`不是真正的朋友实体，它是两个`User`实体之间的关系。 `Friendship`会更准确地描述它。中的导航属性`User`可以更好地描述为`FriendOf`并`FriendsWith`定义友谊的*所有权*（即友谊表中的 Id 与 User1.Id）。这应该使事情更清楚：

```
var friends = u.FriendsWith.Union( u.FriendOf ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:32:35.737

您的问题是在选择朋友列表时。正确的查询应该是这样的：

```
 List<int> friendsIds = db.Friends.Where(c => c.User.Id == u.Id || c.User1.Id == u.Id)
.Select(c => c.User1.Id==u.Id?c.User.Id: c.User1.Id).ToList<int>(); 
```

因为如果 c.User1.Id 是 u.Id，则应选择 c.User.Id，否则应选择 c.User.Id。

# java - 当未定义 equals() 和 hashCode() 时，我应该如何实现 Comparable？

> ID：15707077
> 
> 赞同：0
> 
> 时间：2013-03-29T16:16:16.160
> 
> 标签：java, comparable

我的团队正在处理的代码有几个类，其中`equals`并`hashCode`没有在类层次结构中定义。我们希望实现`Comparable`与`compareTo`using 一致的`equals`方法`hashCode`，如下所示：

```
class MyClass implements Comparable<MyClass>
{
    private String myProperty;
    // Other properties, etc.
    ....

    public int compareTo(MyClass obj) {
        // Natural ordering comparisons
        ...
        // Reach here if natural ordering properties are equivalent
        return new Integer(this.hashCode()).compareTo(new Integer(obj.hashCode());
    }
} 
```

这被认为是一种有效的实施方式`Comparable`吗？`hashCode`使用我应该注意的默认实现是否有任何陷阱？

**更新：**我们正在努力的行为如下：

1.  首先比较类属性，按照我们定义的自然顺序。
2.  如果两个对象的给定属性是等价的，我们将继续进行排序中的下一个。
3.  如果所有属性都等价，则仅当 时才返回 0 `this.equals(obj)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:25:35.823

不，这不是实现 Comparable 的有效方法。因为，假设您对 inside 方法的两个不同对象的所有自然排序比较`MyClass`都`equals`实现了，那么当比较两个对象的哈希码时，它将返回`false`。之所以如此，是因为在这种情况下，默认情况下会调用类的`hashcode`方法`Object`（因为您没有提供自己的哈希码方法），这对于不同的对象会有所不同。因此，无论所有自然排序比较结果如何，MyClass 的两个对象都永远不会相等`true`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:26:47.597

是的，这是一种有效的方式。显然，您想要对其他值相等的对象进行固定排序（我是对的吗？您没有在这里使用哈希码解释您的目标）。我唯一要做的就是在您的 compareTo 方法中复制 Integer.compareTo() 的 java 代码，因此您不必为每次比较创建 2 个整数。

# jquery - 使用 jQuery UI 可排序到可放置

> ID：15707079
> 
> 赞同：0
> 
> 时间：2013-03-29T16:16:19.067
> 
> 标签：jquery, jquery-ui, jquery-ui-droppable

我有一个页面，我需要将项目从可排序的内容拖到可放置的容器中。它似乎不起作用，我希望有人能告诉我原因。从我所看到的，我有所有的连接，但 droppable 不会从 sortable 接收到 drop。

请注意，我能够执行以下操作并且需要维护此功能：

1.  将可拖动项（不在可排序项中）拖到可放置项中
2.  将可拖动项（不在可排序项中）拖到可排序项中

但我不能：

3.  从 sortable 拖动到 droppable

这是我的代码：

```
$(function() {
  $('.drag').draggable({
    helper: 'clone',
    connectToSortable: '#sortable'
  });
  $("#sortable").sortable({
    connectWith: '#drop'
  });
  $("#drop").droppable({
    tolerance: 'pointer',
    connectWith: '#sortable',
    drop: function (evt, ui) {
        var $destination = $(this); 
        ui.draggable.appendTo( $destination ); 
    }
  }).draggable();
}); 
```

...还有小提琴：http: [//jsfiddle.net/eEJHb/4/](http://jsfiddle.net/eEJHb/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T18:35:36.950

Jquery UI can't connect sortable with droppable. Droppable has no parameter connectWith. You have to develop such a feature of use draggable & droppable combination [http://jsfiddle.net/shuklendu/uacc7/17/](http://jsfiddle.net/shuklendu/uacc7/17/)

```
$("#draggable li").draggable({
    revert: true});

$('#droppable').droppable({
    accept: 'li',
    drop: function () {
    alert('success') }
}); 
```

Used a lot of jQuery-UI while building [http://www.impresspages.org](http://www.impresspages.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:49:26.597

我会推荐使用[http://johnny.github.io/jquery-sortable/](http://johnny.github.io/jquery-sortable/)。在你的情况下应该足够了。

示例[http://johnny.github.io/jquery-sortable/#handle](http://johnny.github.io/jquery-sortable/#handle)应该正是您正在寻找的。

如果您需要使用 JqueryUI，也许[http://api.jqueryui.com/droppable/#option-accept](http://api.jqueryui.com/droppable/#option-accept)可能会有所帮助。`connectWith`droppable 不支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-24T03:37:09.447

当物品被放置在可放置物品上时，您必须

1.  克隆它
2.  手动附加到 droppable，
3.  从可排序中删除它。
4.  如果您想将您的项目拖回来，请在将其添加到 dropppable 后使其可拖动

```
$( function() {
var draggableOptions = {
  connectToSortable: ".list",
  helper: "clone",
  revert: "invalid",
  revertDuration: 0,
  start:function(ev,ui){
    $(ev.target).hide();
    ui.helper.data('dropped', false);
  },
  stop:function(ev,ui){
    if(ui.helper.data('dropped')){
      ev.target.remove();
    }else{
      $(ev.target).show();
    }
  }
};
var sortableOptions = {
    helper: 'clone',
    connectWith: ".list",
    placeholder : "sortable-item-placeholder",
    receive: function (event, ui) {
        ui.item.remove();
    },
    beforeStop:function(ev,ui){
      if(ui.helper.data('dropped')){
        ui.item.remove();
      }
    }
};
$( "#sortable" ).sortable(sortableOptions);

var droppableOptions = {
  drop:function(ev,ui){
    if(!ui.helper.is("tr")){
      var $obj = ui.helper.clone();
      $obj.css({
        position: 'relative',
        top: "0px",
        left: "0px"
      });
      $($obj).draggable(draggableOptions);
      $obj.appendTo($(this).find("td ul"));

      ui.helper.data('dropped', true);
      $(this).removeClass("drop-highlight");
    }
  },
  over: function(){$(this).addClass("drop-highlight");},
  out: function(){$(this).removeClass("drop-highlight");},
};
$( "tr" ).droppable(droppableOptions);
});
```

```
ul { list-style-type: none; margin: 0; padding: 0; margin-bottom: 10px; }
li { margin: 5px; padding: 5px; height:2em;}
.droppable{
  width:100%;
}
table{
  width:100%;
}
td{
  height : 2.5em;
  border: 1px solid black;
}
.drop-highlight{
  background: gray;
}
.sortable-item-placeholder{
  background: yellow;
}
```

```
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet"/>

<ul id="sortable" class="list">
  <li class="ui-state-default green">Sample Task 1</li>
  <li class="ui-state-default green">Item 2</li>
  <li class="ui-state-default green">Item 3</li>
  <li class="ui-state-default green">Item 4</li>
  <li class="ui-state-default green">Item 5</li>
</ul>

<table id="droppable-table">
  <tbody>
    <tr><td><ul class="droppable">1</ul></td></tr>
    <tr><td><ul class="droppable">2</ul></td></tr>
    <tr><td><ul class="droppable">3</ul></td></tr>
    <tr><td><ul class="droppable">4</ul></td></tr>
    <tr><td><ul class="droppable">5</ul></td></tr>
    <tr><td><ul class="droppable">6</ul></td></tr>
  </tbody>
</table>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-06T17:16:44.840

Sortables 可以接收元素 <--- 你想要的功能。

Sortables 可以使用`connectWith` 您想要的 <--- 功能。

可以拖动可排序的<---您不想要的功能。

因此，不要使用 droppable，而是通过设置一个不存在的句柄来创建一个禁用其拖动功能的 sortable。

```
$("#drop").sortable({
    handle: '.fake_class_that_does_not_exist',
    tolerance: 'pointer',
    connectWith: '#sortable',
    receive: function (evt, ui) {
        var $destination = $(this); 
        ui.draggable.appendTo( $destination ); 
    }
}); 
```

不要忘记将您的`drop`活动更新为`receive`活动。

`connectWith`您还应该能够通过将可拖动对象添加到列出的类中来保持将其拖动到此“禁用”排序对象的能力。

```
$('.drag').draggable({
    helper: 'clone',
    connectToSortable: '#sortable, #drop'
}); 
```

请记住，Sortable 实际上被设计为在元素容器上调用并赋予每个元素可排序性。如果您对水滴或其内容物感到奇怪，您可能需要将其包装在容器中以获得所需的确切效果。

# nhibernate - 将简单类型的数组序列化为单个数据库字段

> ID：15707081
> 
> 赞同：2
> 
> 时间：2013-03-29T16:16:22.757
> 
> 标签：nhibernate, fluent-nhibernate

是否可以配置 NHibernate（特别是 Fluent NHibernate）将简单类型的数组序列化为单个数据库列？我似乎记得这是可能的，但自从我使用 NHibernate 以来已经有一段时间了。

本质上，我需要存储一个人工作的星期几（`int[]`），并且不想为此目的而有一个单独的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:07:17.277

有可能的。

您需要实现一个`IUserType`处理数组和数据列之间映射的a（首先谷歌；可能有人已经实现了它）

或者，您可以在实体类中进行转换，并映射单字段表示而不是属性。例如：

```
string numbers;

public int[] Numbers
{
    get { return numbers.Split(','); }
    set { numbers = string.Join(",", value.Select(x => x.ToString())); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:52:53.493

是的。有`UserType`这样的场景。你也可以使用 enum 和`bit flag`.

# java - 自动检查 Java 文件是否符合编码标准

> ID：15707084
> 
> 赞同：5
> 
> 时间：2013-03-29T16:16:33.193
> 
> 标签：java, eclipse, mercurial, coding-style, jenkins

我正在从事Java开发。我最近遇到了一种情况，我必须遵守编码标准：成员和方法排序、命名约定、修饰符序列。我正在考虑自动检查合规性或生成某种重新排序机制的方法。

我们正在使用 Eclipse 进行开发，但该技术将是开放的。它可能起作用的一种方法是生成一个外部构建器工具并将其添加到项目中。缺点是它会自动应用于所有文件，这可能会遇到遗留代码的问题，将错误计数扩大到不再是合规性的合理指标的程度。此外，它使代码审查变得更加困难，这是不希望的。

另一种方法是某种只具有信息能力的解析器。我们可以在 Jenkins 中运行一个进程，这当然可以，但这也意味着代码已经通过了审查，这对于代码合规性检查来说通常有点晚。

是否有建议甚至简单的方法将此类功能集成到 IDE、源代码控制系统（Mercurial）甚至 Jenkins 中？这在其他地方是如何执行的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:35:40.910

我不建议自动进行此类更改。尽管大多数 checkstyle/pmd 符合是有效的，但我碰巧需要忽略一些警告/错误。此外 - 只有很少的此类简单问题。大多数通知需要更复杂的操作，并且可能无法在没有人工交互的情况下完成。

我正在使用[声纳](http://www.sonarsource.org/)集成。它包含许多外部检查器，例如[PMD](http://pmd.sourceforge.net/)、CPD、[Checkstyle](http://checkstyle.sourceforge.net/)、[Findbugs](http://findbugs.sourceforge.net/)，并且可以与其他一些有用的工具集成，例如[Cobertura](http://cobertura.sourceforge.net/)（测试覆盖率统计）。将 Sonar 构建绑定到 Jenkins 构建并试图避免重大/关键问题几乎是微不足道的，这可能被认为是一种好方法。

在开发人员环境中，我使用 Eclipse 与 findbugs 的集成。还有一些与声纳的集成点，但它需要将代码提交到服务器或在本地运行服务器，这是我个人不喜欢的。然而，在 Sonar 中的代码审查之后对代码进行几个周期的完善后，您会注意到您（和其他团队成员）坚持大多数规则并且每天检查报告就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:21:26.483

一种解决方案是使用[JCSC](http://jcsc.sourceforge.net/) / [checkstyle](http://checkstyle.sourceforge.net/)或其他命令行友好的工具。将此与您的构建过程集成。个人开发人员在他的分支上运行它。

大多数工具与 Jenkins 很好地集成（通过插件），可以用作仪表板

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T16:39:27.870

除了@Jayan 的回答，Jenkins 有一个[CheckStyle 插件](https://wiki.jenkins-ci.org/display/JENKINS/Checkstyle+Plugin)，它将显示每次 CheckStyle 运行的结果，并让您根据发现的违规数量设置构建状态。所以你的设置步骤是：

1.  设置您的[CheckStyle 规则](http://checkstyle.sourceforge.net/config.html)以符合您的编码标准
2.  向运行 CheckStyle 的 Jenkins 构建添加一个步骤
3.  添加后期构建步骤以发布 CheckStyle 结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:41:40.957

Jayan 提到了 checkstyle，它非常适合检查编码标准。

我记得几年前使用[Jalopy](http://jalopy.sourceforge.net)进行自动代码格式化，它也可能满足您的需求。

不过老实说，我不会自动重新格式化代码。使用 checkstyle 等工具发出警告是一回事。控制开发人员的源代码是另一回事，大多数人觉得这非常令人讨厌和不愉快。此外，代码检查器中的错误最多会产生不正确的警告。代码美化器中的错误可能会破坏并破坏数小时的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T15:41:30.693

您可以使用[JArchitect](http://www.jarchitect.com)使用 CQLinq 查询检查您的最佳实践，这对于轻松创建自定义规则很有用

JArchitect 对开源贡献者是免费的：[http ://www.jarchitect.com/JArchitectForOSS.aspx](http://www.jarchitect.com/JArchitectForOSS.aspx)

# ruby-on-rails - 清理活动记录中属性组的 api？

> ID：15707087
> 
> 赞同：0
> 
> 时间：2013-03-29T16:16:40.227
> 
> 标签：ruby-on-rails, activerecord, struct

鉴于我有以下模型：

```
class Rule < ActiveRecord::Base
  belongs_to :verb
  belongs_to :noun
  ...
end

class Verb < ActiveRecord::Base; end
  has_many :rules
end

class Noun< ActiveRecord::Base; end
  has_many :rules
end 
```

而且，因为我使用动词+名词作为一对，我有以下助手（不可持久）：

```
class Phrase < Struct.new(:verb, :noun); ...; end 
```

我怎样才能把这个：

```
phrase = Phrase.new(my_verb, my_noun)

# sadface
Rule.create(verb: phrase.verb, noun: phrase.noun)
Rule.where(verb_id: phrase.verb.id).where(noun_id: phrase.noun.id)

# into this?
Rule.create(phrase: phrase)
Rule.where(phrase: phrase) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:57:43.503

T避免 Rule.where(...).where(...) 你可以创建一个范围：

```
class Rule < ActiveRecord::Base
  scope :with_phrase, lambda { |p| where(verb: p.verb, noun: p.noun) }
end 
```

进而：

```
Rule.with_phrase( Phrase.new(my_verb, my_noun) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:08:07.437

我不知道为什么我没有马上想到这个。我想也许是通过我的联想。不过这很容易。

要清理，`create`我只需要在上创建一个虚拟属性`Rule`

```
def phrase=(phrase)
  self.verb = phrase.verb
  self.noun = phrase.noun
end

# which allows me to
Rule.create(phrase: my_phrase) 
```

要清理 arel`where`查询，我只需要在规则上创建一个范围。

```
def self.with_phrase(phrase)
  where(verb: p.verb, noun: p.noun)
end

# which allows me to
Rule.with_phrase(phrase) 
```

# windows-phone-8 - Windows Phone 8 - display text on tile

> ID：15707102
> 
> 赞同：0
> 
> 时间：2013-03-29T16:17:45.770
> 
> 标签：windows-phone-8, windows-phone, live-tile

I want to display text on a secondary tile, like Evernote. Currently, I use the FlipTileData because it supports text on the BackContent property. The problem with FlipTileData is, that I only need the back tile, not the front.

Is there a way to set content on the front or to create a tile which does not flip?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:21:11.943

Yes, it's possible. You start by creating a standard tile, then render a set of UI elements (eg. `TextBlock`) to an image to get the desired look, then set it as the 'BackgroundImage' of the tile.

The following tutorial and previous answer should help...

[http://wp.qmatteoq.com/how-to-create-cool-custom-tiles-in-a-windows-phone-application/](http://wp.qmatteoq.com/how-to-create-cool-custom-tiles-in-a-windows-phone-application/)

[https://stackoverflow.com/a/9659172/247257](https://stackoverflow.com/a/9659172/247257)

由于以上链接假定 Windows Phone 7，您将需要[调整 Windows Phone 8 的](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202948%28v=vs.105%29.aspx#BKMK_Tilesizesandresolutions)磁贴大小并满足新的*宽磁贴*大小。

# git - git告诉我我合并冲突，但也告诉我没有文件需要合并

> ID：15707104
> 
> 赞同：12
> 
> 时间：2013-03-29T16:17:57.530
> 
> 标签：git, branching-and-merging, git-merge, kdiff3, mergetool

我在分支中提交了一些更改`new`。

我结帐到`master`.

当我尝试合并时：

```
$ git merge new
Auto-merging js/site.js
CONFLICT (content): Merge conflict in js/site.js
Automatic merge failed; fix conflicts and then commit the result. 
```

所以我安装了 kdiff3 并配置了我的配置文件，当我尝试使用 mergetools 时，我得到了：

```
$ git mergetool kdiff3
No files need merging 
```

我跑了一个差异，它输出了这个：

```
diff --cc js/site.js
index 8c17d62,7955b13..0000000
--- a/js/site.js
+++ b/js/site.js
@@@ -72,4 -81,18 +81,22 @@@ function doSmallScreen()

  $(document).ready(function () {
      calculateScreen();
- });
++<<<<<<< HEAD
++});
++=======
+     $(window).resize(function () {
+         delay(function () {
+             calculateScreen();
+         }, 500);
+     });
+ });
+
+
+ var delay = (function () {
+     var timer = 0;
+     return function (callback, ms) {
+         clearTimeout(timer);
+         timer = setTimeout(callback, ms);
+     };
 -})();
++})();
++>>>>>>> new 
```

我对如何解决这个问题感到困惑，我想以最简单的方式解决这个问题，我真的不在乎我是否会从新分支中丢失信息，但我想了解出了什么问题以及为什么我不能t 使用合并工具。

对我来说，我有合并冲突但没有文件需要合并，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-02-15T22:19:55.030

我试过

```
git mergetool . 
```

似乎工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-25T15:29:01.117

即使只是运行正确的命令，我也遇到了这个问题：

```
$ git mergetool 
```

它可能与打开 rerere 有关（请参阅此链接 [Ed.: 链接不再工作]）

我通过在 中创建两个别名解决了这个问题`.gitconfig`，这为每个冲突的文件启动了 mergetool：

**将此添加到您的 .gitconfig**

```
# List conflicted files
list-conflicts = !git ls-files -u | cut -f 2 | sort -u

# Force mergetool to recognize conflicts
force-mergetool = !git list-conflicts | xargs git mergetool 
```

**tl;dr**根据要求，这里简要解释了它的作用：

*   `git ls-files -u`：在尝试合并冲突后，这会列出所有未合并的文件，以及一些无关的信息和重复；如果在合并后立即运行，这基本上是所有有冲突的文件
*   `| cut -f 2`删除此输出的第二个字段，它本质上是文件路径
*   `| sort -u`消除重复
*   `| xargs git mergetool`将此文件列表通过管道传输到`mergetool`命令中，该命令会启动您的 GUI 合并工具（假设您已经设置了一个）

因此，如果您只想查看列出的文件，则可以运行第一个命令。第二个命令会将所有这些都通过管道传输到您的合并工具中（如果这是您的偏好，您可以使用`merge`而不是）。`mergetool`

如果您想在添加别名之前自己尝试一下，您可以通过命令行运行以下两个命令之一：

`git ls-files -u | cut -f 2 | sort -u`

`git ls-files -u | cut -f 2 | sort -u | xargs git mergetool`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-29T16:45:29.023

我认为您的 mergetool 命令是错误的。应该

```
$ git mergetool 
```

或者

```
$ git mergetool --tool=kdiff3 
```

如果您被 git 命令卡住，您可以随时查看手册 ( `git mergetool --help`)。

更多信息：[https ://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html](https://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html)

# bash - bash 日期环境变量

> ID：15707105
> 
> 赞同：0
> 
> 时间：2013-03-29T16:18:02.200
> 
> 标签：bash, date, environment-variables

我需要使用从 bash 脚本中的命令行变量派生的日期字符串来计算日期。

假设我有一组命令行参数 (CLA)，例如 $1=2013 $2=03 $3=22，并且我想获取某个日期之前或之后某个天数的格式化日期字符串。

我总能做到，没有 CLA，

```
 date -d "20130322 -1 day" -u +%Y%m%d 
```

但是当我尝试类似的东西时，

```
 yyyy=2013
    month=03
    day=22
    yest='"'$yyyy$month$day'" -1 day"'
    yesterday=$(date -d $yest -u +%Y%m%d) 
```

我得到“日期：无效选项 - '1'”

我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:24:18.510

显然你过度使用引号

```
pwadas@host:~$ echo $(date -d "20130322 -1 day" -u +%Y%m%d)
20130321
pwadas@host:~$ xx=20130322
pwadas@host:~$ echo $(date -d "$xx -1 day" -u +%Y%m%d)
20130321
pwadas@host:~$ 
pwadas@host:~$ yesterday=$(date -d "$xx -1 day" -u +%Y%m%d)
pwadas@host:~$ echo $yesterday
20130321
pwadas@host:~$ 
```

PS。以上不适用于 MacOSX 上的 bash，但在 Linux 上可以..

# php - 使用准备好的语句获取“错误的参数计数...”错误

> ID：15707106
> 
> 赞同：1
> 
> 时间：2013-03-29T16:18:02.107
> 
> 标签：php, mysql, prepared-statement

我一直在尝试学习准备好的语句，以便我们可以开始在我们的 PHP 站点中实现它们。此函数使用 $_POST 传输方法从搜索表单上的文本框中获取值（或无），然后使用这些文本框的名称和值将条件添加到 WHERE 子句。该功能以前有效，但我似乎无法使准备好的语句起作用。

研究了几个脚本，我开始使用下面的一个并解决了一些错误。现在当我运行它时，我得到错误**错误参数计数 mysqli_stmt::bind_param()**

运行此查询后，我想将值导出到表中，并且在尝试准备好的语句之前正在工作。

这是我到目前为止的代码：

```
 <?php

   $db = mysqli_connec("ip_address", "loginname", "password", "database");

    $refs = array('sssss');

    foreach ($_POST as $key => $value)
     {
       $refs[] =& $_POST[$key];
      }    

$query = "SELECT col1, col2, col3, col4, col5 FROM tbl_name WHERE 1=1";
    foreach ($_POST as $k => $v) 
    { 
      if(!empty($v)) {
        $query .= " AND $k = ?"; 
        $params[$k] = $v;
        }   
    }       

    $results = $db->prepare($query);        

     call_user_func_array(array($results, 'bind_param'), $refs);

    $results->execute(); 
```

?>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:45:59.073

传递给的参数[`mysqli_stmt::bind_param`](http://php.net/manual/en/mysqli-stmt.bind-param.php)必须通过引用传递，并且只有变量可以通过引用传递，所以`call_user_func_array`在这种情况下不能将函数的结果直接传递给。此外，传递给的第一个参数`bind_param`是变量类型的字符串列表。相反，试试这个：

```
// Change to whatever types are relevant
$refs = array('sss');

foreach ($arr as $key => $value)
{
  $refs[] =& $arr[$key];
}

call_user_func_array(array($results, 'bind_param'), $refs); 
```

**编辑**

这一行是错误的：

```
$results = $mysqli->prepare($query); 
```

应该

```
$results = $db->prepare($query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:25:33.437

好的，我解决这个问题的方法是废弃所有内容并重新开始，这总是很有趣......但是适用于我需要的新脚本就在这里

```
<?php

$dbhost     = "ip_address";
$dbname     = "db_name";
$dbuser     = "db_login";
$dbpass     = "db_pass"; 

$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

    $query = "SELECT * FROM tbl_name WHERE 1=1";

    foreach ($_POST as $k => $v) 
    { 
      if(!empty($v)) {
        $query .= " AND $k LIKE ?";
        $params[] = $v;     
      }  
    }   

    $results = $conn->prepare($query);  
    $results->execute($params);

    $results->bindColumn(1, $no);
    $results->bindColumn(2, $date);
    $results->bindColumn(3, $name);
    $results->bindColumn(4, $id);
    $results->bindColumn(5, $path);

?> 
```

# android - 禁用背景片段上的触摸

> ID：15707109
> 
> 赞同：2
> 
> 时间：2013-03-29T16:18:09.723
> 
> 标签：android, android-fragments

我有一个 Main`FragmentActivity`显示主应用程序`fragments`。我有一个特定的片段，我在“后面”主要片段的顶部打开。它仅通过动画滑动约 90%。我的问题是这样的：

在仍然显示出来的那一小块 10% 的“后面”片段中，您可以对其进行操作。例如，它是一个 ListView，所以我可以滚动。

有没有办法“关闭”或使背景片段不活动在这里没有触摸响应发生？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-05T15:16:34.077

只是添加到 Shashidhar Manchu answser：添加：

## android:clickable="true" android:background="#000"

例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000"
    android:orientation="vertical" 
    android:clickable="true">

<View
            android:id="@+id/sampleChild"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

</LinearLayout> 
```

背景是可选的，但没有它，背景中的片段将是可见的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-26T17:34:50.330

在 ontouchlistener 中为该视图返回 true。或者您可以在添加片段时制作透明布局（在 xml 中填充父高度和宽度），使您的透明布局可点击为真，而当片段移除时使其为假。

# android - 从一个活动从另一个活动传递对象

> ID：15707113
> 
> 赞同：0
> 
> 时间：2013-03-29T16:18:30.170
> 
> 标签：android

我喜欢从一个活动中传递另一个活动的对象。我实现了可序列化。但不知何故，该对象没有通过，在接收方我得到 NULL。请检查哪里错了？

```
public class TrackerInfo implements Serializable{
  /**
 * 
 */
private static final long serialVersionUID = 1L;
   String Idnumber;
  String Simcardnumber;
  String Description;
  String Model;
  String time;

  public String getSimcardnumber() {
      return Simcardnumber;
  }

  public String getDescription() {
      return Description;
  }

  public String getModel() {
      return Model;
  }
  public void setModel(String model) {
      this.Model = model;
  }

  public String getTime() {
      return time;
  }

  public void setInforFromCursor(Cursor cursor){
      this.Idnumber = cursor.getString(1);
      this.Simcardnumber = cursor.getString(2);
      this.Description = cursor.getString(3);
      this.Model = cursor.getString(4);
      this.time = cursor.getString(5);
  }} 
```

在发送方，

```
@Override
    public void itemSelected(String id) {
        //get Tracker info
        dbHelper = new TrackerDBAdapter(this);
        dbHelper.open();
        Cursor cursor = dbHelper.fetchListByIDNum(id);
        TrackerInfo tracker = new TrackerInfo();
        tracker.setInforFromCursor(cursor);
        dbHelper.close();
        LinkedHashMap<String, Object> obj = new LinkedHashMap<String, Object>();
        obj.put("TRAKCER", tracker);
        Bundle b = new Bundle();
        b.putSerializable("bundleobj", obj);
        Intent intent = new Intent(this, DetailMapView.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        intent.putExtra("bundleobj", b);
        startActivity(intent);

    } 
```

在接收端，

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    //setContentView(R.layout.activity_detail_map_view);
    try {  setContentView(R.layout.activity_detail_map_view);
         Bundle bn = new Bundle();
         bn = getIntent().getExtras();
         HashMap<String, Object> getobj = new HashMap<String, Object>();
         getobj = (HashMap<String, Object>) bn.getSerializable("bundleobj");
         trackerinfo = (TrackerInfo) getobj.get("TRACKER");
    } catch (Exception e) {
         Log.e("Err", e.getMessage());
    }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:29:05.820

我认为你的问题在这里：

```
obj.put("TRAKCER", tracker); 
```

您正在`HashMap`使用密钥添加跟踪器**`TRAKCER`**

但在这儿：

```
getobj.get("TRACKER"); 
```

您正在尝试使用键获取对象，**`TRACKER`**但键不相等，这是**`NPE`**. 你需要修复

```
obj.put("TRACKER", tracker); 
```

现在键是相等的，所以它应该可以工作。

## 更新：

正如@Sam 指出的那样，您将您的包装`HashMap`成Bundle 并将Bundle 包装成Intent。因此，如果您的方法有效，您需要执行以下操作：

```
LinkedHashMap<String, Object> obj = new LinkedHashMap<String, Object>();
obj.put("TRACKER", tracker);

Bundle b = new Bundle();
b.putSerializable("trackerObj", obj);

Intent intent = new Intent(this, DetailMapView.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.putExtra("bundleObj", b); 
```

并用于检索`HashMap`：

```
Bundle wrapper = getIntent().getBundleExtra("bundleObj"); // this Bundle contains HashMap
HashMap<String, Object> obj = (HashMap<String, Object>) wrapper.getSerializable("trackerObj"); 
```

## 推荐：

@Sam 如何再次指出，更好和更简洁的方法是将您的`HashMap`as Serializable 直接包装到 Intent with`putExtra("trackerObj", obj)`方法中，然后轻松将其检索为

```
HashMap<String, Object> o = (HashMap<String, Object>) getIntent().getSerializableExtra("trackerObj"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:35:15.503

您有一些错误，请阅读 Sajmon 的[答案](https://stackoverflow.com/a/15707297/1267661)，但您也将 Bundle 放入 Bundle 中，但只能从外部 Bundle 中读取。删除这样的代码：

 ~~~~```
Bundle b = new Bundle();
b.putSerializable("bundleobj", obj); 
```~~  ~~并将数据直接放入Intent中：

```
Intent intent = new Intent(this, DetailMapView.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.putExtra("bundleobj", obj);

// You may need to help the compiler by casting it to a Serializable
//intent.putExtra("bundleobj", (Serializable) obj); 
```

* * *

为了使用您的双 Bundle 方法，您需要获取两个“bundleobj”标签：

```
 bn = getIntent().getExtras().getBundle("bundleobj");
 HashMap<String, Object> getobj = (HashMap<String, Object>) bn.getSerializable("bundleobj"); 
```~~~~

# r - 使用 R 中的 par mfrow 在绘图网格中开始新行

> ID：15707114
> 
> 赞同：2
> 
> 时间：2013-03-29T16:18:31.663
> 
> 标签：r, plot

我有一个非常简单的问题。

我`par(mfrow=c(x,y))`经常使用来创建绘图网格。假设我执行 `par(mfrow=c(6,6))`创建一个网格。然后，我只需按顺序绘制内容即可制作 10 个图。我怎样才能使下一个情节从下一行开始（而不是在下一列继续）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:24:16.727

使用`layout`？它允许指定绘图的顺序。

```
layout(matrix(c(4,1,3,2),nrow=2))
for (i in 1:4) {
  plot(seq_len(i))
} 
```

# bash - awk - 使用包含多个文件的数组

> ID：15707116
> 
> 赞同：1
> 
> 时间：2013-03-29T16:18:37.437
> 
> 标签：bash, unix, awk

我是shell脚本的新手，我需要计算一个平均file1，然后计算结果的平均值和file2中的一个数字，到目前为止我想出了这个，但它没有打印任何东西。

```
awk '{if ($FILENAME == "spring") array[$1]=($2+$3+$4+$5+$6+$7+$8)/7; if($FILENAME == "fall") array[$1]=(array[$1]+$2)/2 }  END { for (var in array) print var,array[var]}' ./spring ./fall 
```

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:22:27.013

awk 中没有符号。尝试删除`$`：

```
awk 'FILENAME ~ /spring/ { array[$1]=($2+$3+$4+$5+$6+$7+$8)/7 }
   FILENAME ~ /fall/ { array[$1]=(array[$1]+$2)/2 }  
   END { for (var in array) print var,array[var]}' ./spring ./fall 
```

简而言之，`FILENAME`就是当前正在处理的文件名，但`$FILENAME`相当于`$0`FILENAME以字母开头时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:26:13.403

怎么样`awk '{s+=$1}ENDFILE{print FILENAME,s/FNR;s=0}' RS=" " file1 file2`：

```
$ cat file1
1 2 3 4 5 6 7 8

$ cat file2
1 2

$ awk '{s+=$1}ENDFILE{print FILENAME,s/FNR;s=0}' RS=" " file1 file2
file1 4.5
file2 1.5 
```

# c++ - 是否可以根据眼睛和嘴巴的位置确定脸部的偏航、俯仰和滚动？（包括图片）

> ID：15707122
> 
> 赞同：6
> 
> 时间：2013-03-29T16:18:50.907
> 
> 标签：c++, ios, objective-c, math, opencv

![在此处输入图像描述](../Images/55761515b1f04f5de25b920ae3f74885.png)

红点 = 左眼中心 (L)、右眼中心 (R)、嘴中心 (M)

紫线 = 线 LR

红线 = 与 L 和 R 中点相交的水平线

黄线 = 在 Mx 处与 LR 相交的垂直线

蓝线 = LM 和 RM

绿线 = L 和 R 的 X 坐标之间的距离

给定这些数据，是否可以确定脸部的偏航、俯仰和滚动？

到目前为止，我只有卷：

Roll = 左右眼的角度差

知道 L、R 和 M 都相对移动，应该可以计算 2D 空间中的 yaw 和 pitch 吧？

我的第一个想法是偏航可以计算为 M 的 X 坐标相对于 LR 的 x 坐标的距离的比率（绿线）

有什么想法吗？

注意：我正在使用 opencv

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T10:19:15.207

有一个名为[solvePnP](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#solvepnp)的函数，它可以从相机坐标系计算物体的平移和旋转。您需要所述对象的3D模型，即对象上点的3D位置，并在图片上找到这些点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T05:05:43.027

没有面部轮廓，不知道眼睛或嘴巴的大小，就会有许多重复的方向。它似乎应该起作用，因为我们的大脑很容易使用这些额外的指标来识别和解释面部运动和手势。

无聊可以试试看！将干擦记号笔带入浴室。以一些奇怪的组合定位你的脸，并在镜子上标记你的眼睛和嘴巴中心。现在将您的脸移动到其他曲折中，使您的眼睛和嘴巴保持在同一位置。

一种快速的方法是将头部向左旋转 45 度。标记你的眼睛/嘴巴的位置，然后将你的头旋转到向右 45 度的位置，但将你的整个头向左移动半个头。你应该可以在那里划线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-27T21:56:15.603

[Face++ API](http://www.faceplusplus.com/demo-detect/)返回图像中每个人脸的滚动、偏航和俯仰。

还可以尝试在网络上搜索“头部姿势估计”

# macos - 在 MacOSX 上，当指定无效的身份验证凭据时，QNetworkAccessManager 进入无限循环

> ID：15707124
> 
> 赞同：2
> 
> 时间：2013-03-29T16:18:52.517
> 
> 标签：macos, qt, qt5, qnetworkaccessmanager

在我的跨平台应用程序中，我使用 QNetworkAccessManager 将 HTTP 请求发送到需要身份验证的 HTTP 服务。我最近升级到 QT5，在 MacOSX 上让我完全惊讶的是，在某些情况下，我的应用程序会尽可能快地向我的服务发送大量请求。

在进行了一些调试之后，事实证明只有在我的请求中指定了错误的身份验证凭据时才会发生这种情况。如果在我的 HTTP 请求中指定了无效的用户名/密码，QNetworkAccessManager 将无限期地向我的服务重新发送请求。

我的代码在以前的 QT 版本中已经工作了很长时间，所以我决定它必须是 QT5 的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T16:33:14.707

我偶然发现了 QT5 中添加的以下增强功能：[https ://bugreports.qt.io/browse/QTBUG-22033](https://bugreports.qt.io/browse/QTBUG-22033)

基本上，如果中间代理需要身份验证凭据，则此增强操作系统背后的想法是检查用户名/密码的钥匙串。事实证明这是很糟糕的实现，并且此代码已添加到 QNetworkAccessManager::authenticationRequired() 信号中，而不是添加到 proxyAuthenticationRequired() 信号中。

关于这个问题的有趣部分是我没有为我的应用程序或我使用的 QNetworkAccessManager 设置代理。这使得这个问题很难调试！

由于放置不当，这种“钥匙串查询”发生在任何 authenticationRequired 信号中。底层的 getProxyAuth() 方法使用空白主机名调用“SecKeychainFindInternetPassword”，该主机名与我的钥匙串中的第一个“Internet 密码”匹配，并使用它向我的服务发送带有这个新凭据的请求。想象一下，当我看到我的其他/个人密码之一被发送到我的 HTTP 服务时，我会感到惊讶！

这不仅是一个安全问题，而且会导致您的应用程序出现无限循环。我用 QT 打开了一个关于这个的错误：[https ://bugreports.qt.io/browse/QTBUG-30434](https://bugreports.qt.io/browse/QTBUG-30434)

有临时解决办法吗？有！我一直在寻找解决此问题的方法。这是一个讨厌的黑客。但它一直有效，直到 QT 家伙连续获得他们的鸭子。这个 hack 之所以有效，是因为它确保“SecKeychainFindInternetPassword”与钥匙串中的任何条目都不匹配，因此跳过了“钥匙串查询”。

基本上我将代理主机名设置为“”而不是“”，这将防止任何导致我的应用程序中出现无限循环的匹配。

解决方法：

```
 QNetworkProxy proxy = manager_->proxy();
 proxy.setHostName(" ");
 manager_->setProxy(proxy); 
```

我希望这在 QT 的下一个版本中得到解决，这样我就可以删除这个可怕的 hack。

# ruby - 使用 ruby 修剪歌曲

> ID：15707129
> 
> 赞同：2
> 
> 时间：2013-03-29T16:19:11.503
> 
> 标签：ruby, ruby-on-rails-3

在我基于 Ruby on Rails 构建的网站中，我需要提供修剪歌曲的功能（比如前 20 秒）。有谁知道任何相关的 API 来操纵歌曲（比如图像的“rmagick”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:12:36.590

你可以试试[https://github.com/fugalh/ruby-audio](https://github.com/fugalh/ruby-audio)。它看起来有点过时，但可能有一个带有更新的分支。

另一种解决方案可能是限制通过 javascript 播放歌曲的数量。还有一个选择可能就是自己制作片段。

# sockets - “setsockopt SO_SNDBUF 在 tcp_connect() 中失败”

> ID：15707130
> 
> 赞同：1
> 
> 时间：2013-03-29T16:19:12.557
> 
> 标签：sockets, gsoap, setsockopt

我的 C 客户端出现问题，我在其中实现了客户端 gsoap 程序来调用 Web 服务。

在 Windows PC 上一切正常，但是当我在基于 linux 的 POS 设备上发布我的代码时，我收到以下错误：

```
"setsockopt SO_SNDBUF failed in tcp_connect()" 
```

我应该从哪里开始调试此错误，可能是什么原因？

返回的errornum是2

生成错误的代码部分：（在 stdsoap2.c 中）

```
 if (setsockopt(sk, SOL_SOCKET, SO_SNDBUF, (char*)&len, sizeof(int))){
    soap->errnum = soap_socket_errno(sk);
    soap_set_sender_error(soap, 
                          tcp_error(soap), 
                         "setsockopt SO_SNDBUF failed in tcp_connect()",
                          SOAP_TCP_ERROR);
    soap->fclosesocket(soap, sk);

#ifdef WITH_IPV6
    freeaddrinfo(ressave);
#endif
    return SOAP_INVALID_SOCKET;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:27:40.940

`len`争论有多大？该值可能适用于 Windows，但由于某种原因被 linux 拒绝。查看提交的实际值，看看它们是否合理。

您还可以尝试将其简化为一个非常小的程序，该程序仅设置一个套接字并尝试复制对 setsockopt() 的调用，并查看它是否仍然因主程序尝试使用的 SO_SNDBUF 大小而失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:38:16.333

好吧，结果很简单！

我只需要使用专用于 linux 的二进制文件来构建 c/c++ 文件....

gsoap(wsdl2h,soapcpp2)

windows build 使用 winsock 和 linux build 使用标准套接字，两个系统上的套接字是不同的！

这就是我收到套接字错误的原因。

希望这对其他人有所帮助，收到此套接字错误消息。

# android-intent - 在没有 Play 商店的情况下更新我的应用程序的按钮

> ID：15707134
> 
> 赞同：0
> 
> 时间：2013-03-29T16:19:31.707
> 
> 标签：android-intent, android-fragments, refresh, auto-update

我已经用tableLayout制作了一个包含10个片段的应用程序。我想要一个更新所有布局的按钮，而不必每次播放商店时都更新应用程序。这可能吗？多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:38:40.733

**不要那样做。**如果您的应用程序在其清单中声明了必要的权限（安装应用程序），这是可能的。但是希望没有理智的用户会在之后安装您的软件，因为这将允许您的应用程序也安装恶意软件和其他东西。

除此之外，您肯定不想复制所有必要的基础设施来向用户发送通知，让他们同时下载您的应用程序......

而是考虑如何在代码中动态创建布局。

# visual-studio-2012 - 快捷键 Ctrl+E,D 在 vs 2012 中不起作用

> ID：15707139
> 
> 赞同：0
> 
> 时间：2013-03-29T16:19:46.303
> 
> 标签：visual-studio-2012

我的项目中有一个css文件。Ctrl+E,D 将我的代码格式化为 vs. 但仅在此文件中不起作用。当我按下此快捷方式时，显示错误：

> 指定的参数超出了值的范围。参数名称：charToReplace

同样在这个 css 文件中，撤消将不起作用！！！为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:57:41.653

正如我在评论中所说，这似乎是一个视觉工作室错误。如果您正在寻找解决方法，您可以尝试这样的格式化程序：http: [//www.cleancss.com/](http://www.cleancss.com/)

此外，请检查您是否安装了任何可能会改变格式化方式的扩展。

# eclipse - “线程中的异常”main“java.util.NoSuchElementException：空列表头”错误以及Scala中的更多内容

> ID：15707142
> 
> 赞同：3
> 
> 时间：2013-03-29T16:19:53.123
> 
> 标签：eclipse, list, scala, compiler-errors

我写了一个递归括号平衡函数，代码中似乎没有任何错误，但是当我运行它时，我得到了很多错误。

我用这样的调用编写了函数：

```
if(balance("blarg(arg)".toList)) println("true!") else println("false") 
```

和这样的定义：

```
def balance(chars: List[Char]): Boolean ={

      implicit class MutableInt(var value: Int) 
      {
          def inc() = { value+=1 } 
          def dec() = { value-=1 }                  
      }

        var stack: Int = 0

        def recursbalance(chars: List[Char], stack: Int): Boolean=
        {

            if ((chars.head: Char) == "(".toList) stack.inc()
            else if ((chars.head: Char) == ")".toList) stack.dec()

            if (stack<0) false

            if (chars.isEmpty: Boolean) if (stack == 0) true else false  

            recursbalance(chars.tail: List[Char], stack: Int)

        }
    recursbalance(chars: List[Char], stack: Int)
} 
```

我收到这些错误：

```
Exception in thread "main" java.util.NoSuchElementException: head of empty list
at scala.collection.immutable.Nil$.head(List.scala:337)
at scala.collection.immutable.Nil$.head(List.scala:334)
at recfun.Main$.recursbalance$1(Main.scala:45)
at recfun.Main$.balance(Main.scala:55)
at recfun.Main$.main(Main.scala:16)
at recfun.Main.main(Main.scala) 
```

我该如何解决？抱歉，我是 Scala 新手。

我尝试用这个替换我的递归调用：

```
 if (chars.isEmpty: Boolean) {
       if (stack == 0) true else false  
   }
   else
       recursbalance(chars.tail: List[Char], stack: Int) 
```

但我仍然得到了所有的错误..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:43:05.100

您需要`List`在调用之前检查您是否为空`head`，`match`这可能是最好的方法：

```
 def balance(chars: List[Char]) = {

    def recursbalance(chars: List[Char], stack: Int): Int = chars match {
      case Nil => stack
      case ')' :: tail => recursbalance(tail, stack - 1)
      case '(' :: tail => recursbalance(tail, stack + 1)
      case x :: tail => recursbalance(tail, stack)
    }
    recursbalance(chars, 0) == 0;
  } 
```

我已经稍微更改了您的方法以删除`MutableInt`并`Int`直接在内部使用。

我进行了快速检查：

```
 println(balance("())".toList));
  println(balance("(())".toList)); 
```

输出

```
false
true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:51:45.660

代码中的特定错误是运行时错误。Scala 编译器无法发现它会在编译时失败。这就是代码在 IDE 中看起来不错的原因。但是，当您运行它时，会出现错误。它源于以下几行：

```
def recursbalance(chars: List[Char], stack: Int): Boolean=
{
  if ((chars.head: Char) == "(".toList) stack.inc()

  // ... 

  recursbalance(chars.tail: List[Char], stack: Int)
} 
```

您使用比前一个元素短一个元素的列表重复调用 recursbalance。所以在某些时候列表是空的，你尝试从空列表中获取头元素。那是你得到 java.util.NoSuchElementException 的时候。

在您的代码中还有一些其他的事情需要指出。例如，您在 if 条件中将 Char 与 List[Char] （字符列表）进行比较。这将始终评估为假。

# c# - 在 VS 2012、Windows 8 中使用 WebService 目标时，NLog 不生成 SOAP

> ID：15707146
> 
> 赞同：0
> 
> 时间：2013-03-29T16:20:05.640
> 
> 标签：c#, web-services, console-application, nlog

我似乎无法让 NLog 在我的**控制台应用程序**上正常工作。我在 Windows 8 机器上运行 VS 2012。我已将项目定位为使用 4.0 框架。

使用提琴手，我可以看到它正在尝试向目标发送消息，但它只有请求中的标头信息。没有 SOAP 信封。它应该根据我的参数生成 SOAP 消息，但不会。

我也以编程方式尝试过，但这也不起作用。

这是我的配置：

```
 <configSections>
    <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog"/>
  </configSections>
  <nlog internalLogLevel="Trace" throwExceptions="true" autoReload="true" internalLogFile="C:\TestDocs\Fail.txt" xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <targets>
      <target name="ws" xsi:type="WebService" protocol="Soap11" namespace="http://tempuri.org/" url="http://xxxxxx.com/Services/LogService.asmx" methodName="WriteLog">
                  <parameter name="appDate" layout="${date}" type="System.String"/>
          <parameter name="msg" layout="${message}" type="System.String"/>        
      </target>
    </targets>
    <rules>
      <logger name="*" writeTo="ws" />
    </rules>
  </nlog> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:02:45.273

通过一直回到 NLog 1.0 Refresh 版本，我能够让它工作。我仍然在 4.0 框架中，但它可以工作。仍然没有解释如何让它在最新版本中运行。

# javascript - 即使出现验证错误，表单也会提交

> ID：15707149
> 
> 赞同：0
> 
> 时间：2013-03-29T16:20:15.013
> 
> 标签：javascript, html, forms, submit

即使存在验证错误，表单也会提交。出现验证错误时如何禁用提交按钮？这是 .js 文件

```
,submitFu:function(){
_.validateFu(_.labels)                          
if(!_.form.has('.'+_.invalidCl).length)
    $.ajax({
        type: "POST",
        url:_.mailHandlerURL,
        data:{
            name:_.getValFromLabel($('.name',_.form)),
            email:_.getValFromLabel($('.email',_.form)),
            phone:_.getValFromLabel($('.phone',_.form)),
            //fax:_.getValFromLabel($('.fax',_.form)),
            //state:_.getValFromLabel($('.state',_.form)),
            message:_.getValFromLabel($('.message',_.form)),
            owner_email:_.ownerEmail,
            stripHTML:_.stripHTML
        },
        success: function(){
            _.showFu()
        }
    })          
},
showFu:function(){
_.success.slideDown(function(){
    setTimeout(function(){
        _.success.slideUp()
        _.form.trigger('reset')
    },_.successShow)
})
}, 
```

这是表格：

```
 <form id="contact-form" action="contactTq.php" method="post">
                    <div class="success"> Contact form submitted! <strong>We will be in touch soon.</strong></div>
                    <fieldset>
                        <label class="name">
                            <input type="text" name="name" value="Enter Your Name:" >
                            <span class="error">*This is not a valid name.</span>
                            <span class="empty">*This field is required.</span>
                            <span class="clear"></span>
                        </label>
                        <label class="email">
                            <input type="text" name="email" value="Enter Your E-mail:">
                            <span class="error">*This is not a valid email address.</span>
                            <span class="empty">*This field is required.</span>
                            <span class="clear"></span>
                        </label>
                        <label class="phone">
                            <input type="text" name="phone" value="Enter Your Phone (optional):">
                            <span class="error">*This is not a valid phone number.</span>
                            <span class="clear"></span>
                        </label>
                        <label class="message">
                            <textarea name="msg">Enter Your Message:</textarea>
                            <span class="error">*The message is too short.</span>
                            <span class="empty">*This field is required.</span>
                            <span class="clear"></span>
                        </label>
                        <div class="buttons"><strong><a class="button" data-type="reset">Reset<span></span></a></strong><strong><a class="button" data-type="submit" href="javascript:{}" onclick="document.getElementById('contact-form').submit();">Submit<span></span></a></strong></div>
                    </fieldset>
                </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:29:52.013

Knockout.js 完美地完成了您正在寻找的工作。您可以将现有的 javascript 放入 ViewModel，然后在您的按钮上放置一个数据绑定以启用所有字段是否都有效。您可以在此处查看如何操作：http: [//knockoutjs.com/documentation/enable-binding.html](http://knockoutjs.com/documentation/enable-binding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:40:25.523

您似乎在单击按钮后立即提交表单，因为 onclick 处理程序编写如下：

```
onclick="document.getElementById('contact-form').submit();" 
```

只需更改 onclick 处理程序以执行该`submitFu`功能，这应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T02:36:27.827

将提交按钮的 onclick 事件更改为 onclick="return submitFu()"

如果验证失败，则返回 false 并且表单将不会提交。我认为您可以对表单的 onsubmit 事件执行相同的操作。

# python - 使用 Python 和 OOP 从数据库中获取所有记录的正确方法是什么？

> ID：15707155
> 
> 赞同：0
> 
> 时间：2013-03-29T16:20:48.473
> 
> 标签：python, database, oop, class-design

从数据库中的表中获取所有记录的正确方法是什么？

我的想法是：

```
import MySQLdb

Class User:

    def __init__(self, id):    
        self.db = MySQLdb.connect(host="localhost", user="root",passwd="password",db="database")
        self.cur = self.db.cursor()

        self.id = id

        self.cur.execute("SELECT * FROM `user` WHERE `id` = %s;", (id))
        res = self.cur.fetchone()

        self.firstName = res[1]
        self.lastName = res[2]
        self.email = res[2]

Class UserManager:
    def __init__(self):
        self.db = MySQLdb.connect(host="localhost", user="root",passwd="password",db="database")
        self.cur = self.db.cursor()

    def get_all_users(self):
        self.cur.execute("SELECT `id` FROM `user`;")
        rows = self.cur.fetchall()

        users = []
        for row in rows:
            users.append(User(row[0]))
        return users 
```

我确定有更好的方法吗？如何创建用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:23:08.420

不要试图自己写这个。使用现有的 ORM，如 SqlAlchemy 或 SqlObject，或 Django。

# c# - C# 从单独的类更新后台工作者进度

> ID：15707156
> 
> 赞同：1
> 
> 时间：2013-03-29T16:20:50.400
> 
> 标签：c#, wpf, backgroundworker

我正在尝试通过后台工作程序在与调度程序不同的类中运行一个函数，并让它更新每次迭代的进度。我没有收到任何错误，后台工作人员运行正常，但我的文本框永远不会更新......

```
public partial class MainWindow : Window
{
    public BackgroundWorker worker = new BackgroundWorker();

    public MainWindow()
    {
        InitializeComponent();
        worker.WorkerReportsProgress = true;
        worker.DoWork += new DoWorkEventHandler(workerDoWork);
        worker.ProgressChanged += new ProgressChangedEventHandler(workerProgressChanged);
    }

    private void myButtonClick(object sender, RoutedEventArgs e)
    {
        worker.RunWorkerAsync();
    }

    void workerDoWork(object sender, DoWorkEventArgs e)
    {
        yv_usfm.convert(worker);
    }

    void workerProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        myTextBox.Text = "some text";
    }

}

public class yv_usfm
{
    public static void convert(BackgroundWorker worker)
    {
        int i = 1;
        while (i < 100)
        {
            worker.ReportProgress(i);
            i++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:30:21.027

是什么让你说它`BackgroundWorker`运作正常？我看不到对 的调用`worker.RunWorkerAsync()`，没有它就永远不会开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:30:37.250

你没有启动工人！

```
worker.RunWorkerAsync(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T16:47:54.603

试试这个：

```
void DoWork(...)
{
    YourMethod();
}

void YourMethod()
{
    if(yourControl.InvokeRequired)
        yourControl.Invoke((Action)(() => YourMethod()));
    else
    {
        //Access controls
    }
} 
```

希望这有帮助。

# c# - 使用实体框架部署 WCF 服务的问题

> ID：15707157
> 
> 赞同：0
> 
> 时间：2013-03-29T16:20:56.050
> 
> 标签：c#, entity-framework, windows-services

目前我正在使用访问 sqlite 数据库的实体框架部署 WCF 服务。该服务托管在窗口服务下。部署后，服务就创建好了。我可以从其他机器访问 WSDL 页面。但是，我无法通过 EF 从数据库中获取数据。在开发环境下所有工作。部署到其他 macgine 后，当我使用相同的查询时，它会抛出错误：无法找到或加载注册的 .Net Framework 数据提供程序。

我认为这个问题与 sqlite 的东西有关。我已经在“远程”机器中安装了 .NET framework 4.5 和 System.data.SQLite，但我仍然无法工作。有谁知道这个问题的原因？感谢您提前提供任何帮助。

另外，我是否需要在我的代码中初始化 DbProviderFactory 才能在 app.config 文件中使用它？如果是这样，应该在哪里插入它们？

这是我的窗口服务的 app.config 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SQLite"/>
      <add name="SQLite Data Provider" invariant="System.Data.SQLite" description=".Net Framework Data Provider for SQLite"
 type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite, Version=1.0.84.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139" />
    </DbProviderFactories>
  </system.data>
  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="ServBehave" name="iPhysio_Wcf_Service.Service">
        <host>
          <baseAddresses>
            <add baseAddress="http://86.163.77.253:8733/iPhysio_Wcf_Service/Service/" />
          </baseAddresses>
        </host>
        <endpoint address="soapService" binding="basicHttpBinding" contract="iPhysio_Wcf_Service.IService" />
        <endpoint address="XMLService" behaviorConfiguration="restPoxBehavior" binding="webHttpBinding" contract="iPhysio_Wcf_Service.IService" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServBehave">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <!--Behavior for the REST endpoint for Help enability-->
        <behavior name="restPoxBehavior">
          <webHttp helpEnabled="true" />
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>
  <connectionStrings>
    <add name="iPhysioAndroidDBEntities1" connectionString="metadata=res://*/DataModel.csdl|res://*/DataModel.ssdl|res://*/DataModel.msl;provider=System.Data.SQLite;provider connection string='data source=&quot;C:\Users\SiuWai\Desktop\iPhysioAndroidDB&quot;'" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:32:28.543

我不确定这是否是它，但您在配置中的连接字符串：

```
connectionString="metadata=res://*/DataModel.csdl|res://*/DataModel.ssdl|res://*/DataModel.msl;provider=System.Data.SQLite;provider connection string='data source=&quot;C:\Users\SiuWai\Desktop\iPhysioAndroidDB&quot;'" 
```

似乎是在引用*C:\Users*位置。SQLite 数据库是部署在远程服务器上的吗？

除此之外，`<system.data>`这些东西的部分`DbProviderFactories`对我来说看起来不错，我认为那里没有任何问题（或任何与网上有关如何执行此操作的文献不同的东西）......对不起，没有专家使用.NET 中的 SQLite - 作为示例/学习，我只天真地做了几次。

# wordpress - 是否可以在没有 wordpress 的情况下预览 wordpress 主题？

> ID：15707159
> 
> 赞同：-1
> 
> 时间：2013-03-29T16:20:57.820
> 
> 标签：wordpress, drupal, joomla, themes

想知道是否可以在没有安装 wordpress 的情况下预览 wordpress 主题。Ex 显示主题 21 [http://wordpress.org/extend/themes/twentyeleven](http://wordpress.org/extend/themes/twentyeleven)的预览。我不需要wordpress的后端和其他功能，只需要一个主题的预览。测试用 xampp 在本地运行 21，但得到错误

```
Fatal error: Call to undefined function get_header() in C:\xampp\htdocs\twentyeleven\index.php on line 15 
```

我也很感兴趣是否可以预览 Drupal 和 Joomla 的主题（尚未在 XAMPP 中测试过）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:53:08.060

不，有太多 WordPress 提供的功能让您无法做到这一点。包含在这些 WordPress 提供的函数中的是用数据填充页面的实际查询。这几乎就像问您是否可以在不使用 FireFox 的情况下使用 FireFox 插件，或者在不使用 Windows 的情况下运行 Windows 应用程序。

您唯一能做的就是在 WordPress 网站上运行主题并使用[Httrack](http://www.httrack.com/)之类的内容提取生成的 HTML 。不过，至少有些主题有演示站点。

我 99% 确信 Drupal 或 Joomla 也是如此。

# vim - vim 命令行编辑

> ID：15707164
> 
> 赞同：4
> 
> 时间：2013-03-29T16:21:13.120
> 
> 标签：vim, vi

有没有办法在 vim 命令行中使用 vim/vi？有时我会在 vim 中写一个很长的命令，例如：

```
:!./script /home/user/pet --flag=1 
```

我想将例如“用户”更改为“其他”。我通常做的是用右箭头导航命令行，这很耗时，当我想转到行首时甚至更多。我想要像“0”这样的东西去那里，或者 w/b 用文字来移动。或使用 j/k 转到下一个/上一个命令。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T16:29:46.773

```
:h cedit 
```

*   在命令行中，输入`ctrl-F`（默认）进入命令窗口。
*   或在正常模式类型`q:`

（搜索，输入`q/`）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T16:26:45.403

Vim 有一个称为“命令行窗口”的功能。当您已经在命令行上时，您可以默认使用 Control-F 输入它，或者`q:`在正常模式下，使用 vim 命令编辑命令行，然后按 enter 执行。它还包含您的命令历史记录，以便您可以根据需要抽出以前的命令。有关`:help cmdline-window`更多信息，请参阅。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T16:28:20.833

我不知道如何使用 Vim 命令直接在命令行上编辑命令，但如果你进入命令窗口`q:`，你可以使用常规的 Vim 编辑来编辑命令。

从那里您可以通过点击`<CR>`或使用`Ctrl-C`将命令复制到常规命令行来执行命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T09:47:52.123

如果您运行 set -o vi，您将在命令行中使用 vim 功能。只需将 'set -o vi' 放在您的 .bashrc 文件中或默认情况下拥有它。

# jquery - 使用 jquery 将数组附加到查询字符串

> ID：15707174
> 
> 赞同：0
> 
> 时间：2013-03-29T16:22:00.860
> 
> 标签：jquery

当我单击带有选择复选框的下一页链接时，我有一个包含作业详细信息列表和每个作业复选框的表格，以便我应该获取带有复选框值的查询字符串和链接 url 查询字符串

```
<input type="checkbox" class="checkJobToSend" name="checkJOb" value="<TMPL_VAR NAME=job_id>"
    <input type="checkbox" class="checkJobToSend" name="checkJOb" value="<TMPL_VAR NAME=job_id>"
    <input type="checkbox" class="checkJobToSend" name="checkJOb" value="<TMPL_VAR NAME=job_id>"
    <input type="checkbox" class="checkJobToSend" name="checkJOb" value="<TMPL_VAR NAME=job_id>"
    <input type="checkbox" class="checkJobToSend" name="checkJOb" value="<TMPL_VAR NAME=job_id>"

    <a href ='index.cgi?reqpage=$prev_page&job_category_id=$jobCategory' class='paginateAdmin' id='govtPaginate'>prevPage</a>

    function getJobsChecked(){ 
            var arr = [];
            var i= 0;
            $('.checkJobToSend:checked').each(function(){
                 arr[i++] = $(this).val();
            });   

            return arr;

      }

          $(document).ready(function() {

        $(document).on('click','.paginateAdmin',
            function(e){
              e.preventDefault();      
             var arr = getJobsChecked();

              var post = $(this).attr("href");
              var array = post.split('?');
          var id=$(this).attr('id');

    $.post(
        'job.cgi',
        array[1],
        function(data,status){

           switch(id)
            {
                case "nonItPaginate":

                     $('#nonit').html(data);

                    break;
                case "ItPaginate":

                         $('#it').html(data);
                        break;
                case "govtPaginate":

                     $('#govt').html(data);
                    break;
            default:

    }    

        }
    );

    });
     }); 
```

我如何用数组 [1] 和带有复选框值的 arr 形成一个查询字符串，例如

```
reqpage=2&job_category_id=2&checkJob=1&checkJob=2&checkJob=3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:42:16.507

不能有多个同名参数，只能有一个参数`checkJob`。所以你可以这样做：

```
reqpage=2&job_category_id=2&checkJob=1,2,3 
```

可以这样实现：

```
// get checked values
var checked = $('input[type="checkbox"].checkJobToSend:checked');    
var checkedValues = [];
checked.each(function(i) {

    // add checked values to our temporary list
     checkedValues.push(checked[i].value);        
});

// create query param
var queryParam = 'reqpage=2&job_category_id=2&checkJob=' + checkedValues.join(','); 
```

请参阅工作示例：http: [//jsfiddle.net/amyamy86/GsSqc/](http://jsfiddle.net/amyamy86/GsSqc/)

在您的服务器端代码上，它必须解释`checkJob=1,2,3`.

```
// in PHP
$jobs = explode(",", $_GET["checkJob"]);
echo $jobs[0];    // outputs value: 1
echo $jobs[1];    // outputs value: 2
echo $jobs[2];    // outputs value: 3 
```

您可以阅读有关使用的以下功能的更多信息：

*   `:checked`jQuery 选择器：[http ://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)
*   `.join()`：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:45:38.213

这将创建您的查询字符串并将其添加到哈希中（哈希部分在 jsFiddle 上不起作用，或者至少您不会在 URL 中看到它发生变化）：

**Javascript**：

```
function getJobsChecked(){ 
            var arr = [];
            var i= 0;
            $('.checkJobToSend:checked').each(function(){
                 arr[i++] = $(this).val();
            });   
      return arr;
      }

$("#btn").on("click",function(){
    var arr = getJobsChecked();
    var qString = "reqpage=2&job_category_id=2";
    for(var i = 0; i<arr.length;i++)
    {
        qString+="&checkJob=" + arr[i];
    }
    location.hash=qString;
}); 
```

**HTML**：

```
<input type="checkbox" class="checkJobToSend" name="checkJOb" value="1" />1
<input type="checkbox" class="checkJobToSend" name="checkJOb" value="4" />2
<input type="checkbox" class="checkJobToSend" name="checkJOb" value="7" />3
<input type="checkbox" class="checkJobToSend" name="checkJOb" value="12" />4
<input type="checkbox" class="checkJobToSend" name="checkJOb" value="5" />5
<input type="button" id="btn" value="Do It" /> 
```

**jsFiddle**：http: [//jsfiddle.net/Zxhzq/](http://jsfiddle.net/Zxhzq/)

# php - 关闭所有活动会话

> ID：15707177
> 
> 赞同：1
> 
> 时间：2013-03-29T16:22:18.640
> 
> 标签：php, session

我同时（在同一页面上）运行两个不同的 php 应用程序/会话，我需要在用户注销时关闭/终止，然后将用户重定向到登录页面。这是正确的做法吗？谢谢。

```
<?php

session_name('loginsystem');
session_name('chatsystem');
session_start();
$_SESSION = array(); 
session_unset();
session_destroy();

header("Location:http://localhost:8888/vtracker2/index.php");

exit(); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:40:48.907

你快完成了，就这样做

```
<?php

session_start();
session_destroy();

header("Location:http://localhost:8888/vtracker2/index.php");
exit(); 

?> 
```

`session_destroy()`功能取消设置所有活动的会话。

# groovy - Groovy 闭包如何为重复而咖喱自己？

> ID：15707183
> 
> 赞同：2
> 
> 时间：2013-03-29T16:22:53.270
> 
> 标签：groovy, closures

我正在为 Cucumber-JVM 实现 Groovy 步骤定义，我希望一个步骤能够自行存储，以便下一步可以重复 n 次。

```
Given(~'the (\\S+) is in the blender') { String thing ->
    // do stuff...
    context.repeatable = self.curry(thing)
} 
```

上面代码中的“self”应该是什么？

我不能使用“this”，因为它指的是封闭对象（在这种情况下是什么，可能是脚本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:37:49.237

由于`curry`是[Closure](http://groovy.codehaus.org/api/groovy/lang/Closure.html)类的一个方法，直接调用 curry 适用于闭包，如果它被命名：

```
def context

test = { String thing ->
    context = curry(thing)
    thing.toUpperCase() 
}

test('hello')
println context.call()
test('world')
println context.call() 
```

=>

```
HELLO
WORLD 
```

或匿名：

```
def context

['test'].each { String thing ->
    context = curry(thing)
    thing.toUpperCase() 
}

println context.call() 
```

=>

```
TEST 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:50:14.587

您可以尝试使用未引用`curry`的方法传递接收到的参数：

```
clos = { String text ->
    if (text) {
        println "text=$text"
        a = curry null
        a()
    } else {
        println "done"
    }
}

clos "closure text" 
```

将打印：

```
text=closure text
done 
```

* * *

**更新**

您还可以使用`clone()`：

```
closure = {
    def clone = clone()
} 
```

# c - 不熟悉的 C 语法？

> ID：15707192
> 
> 赞同：3
> 
> 时间：2013-03-29T16:23:49.420
> 
> 标签：c, libuv

我正在尝试理解其他人编写的 C 代码，并且遇到了一段我不理解所有语法和我不理解的部分的代码，我不知道如何搜索。我将不胜感激有关如何搜索此内容和我可能遇到的其他类似事物的解释或信息，或两者兼而有之。有问题的代码是以下行：

```
int r = uv_listen((uv_stream_t*) &server, 128, on_new_connection); 
```

我知道 r 是一个变量，它被声明并初始化为函数“uv_listen()”返回的值，128 是一个文字 int 参数，on_new_connection 必须是一个函数指针，因为这是回调函数的名称被称为。server 是一个自定义类型（uv_tcp_t）的变量，带有 & 是指服务器的地址。我不明白的是“（uv_stream_t *）&server”。看起来这是函数的参数之一。我可以理解返回值作为参数的函数调用，但这看起来不像函数调用。“uv_stream_t”是在他们的代码中定义的另一种自定义类型。

我不知道它是否有助于理解它的含义，但代码行来自编写的示例代码，以帮助理解如何使用 libuv。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T16:25:37.887

这只是一个类型转换。`&server`给出`server`变量的地址并`(uv_stream_t*)`转换该地址的类型。

根据您帖子中的其他信息，它似乎`server`是 type `uv_tcp_t`，但`uv_listen`需要一个指向`uv_stream_t`. 这就是为什么您获取地址`server`并将其转换为`uv_stream_t*`.

注意：这只是因为 libuv 定义的方式才有意义，`uv_tcp_t`而且`uv_server_t`——通常你不能只将指针类型转换为其他指针类型并期望任何合理的事情发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T16:26:11.307

(uv_stream_t*) &server 获取服务器地址并将其转换为 uv_stream 指针。

&server - 获取服务器地址

(uv_stream*) - 转换为 uv_stream 指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:28:39.703

它是一个类型转换运算符，用于告诉编译器接受 &server 作为指向 uv_stream_t 的指针。

推测“服务器”的类型不是 uv_stream_t 或子类，但编码器知道将其视为一个是安全的。

# javascript - 使用 javascript/bootstrap 时在 onclick 上更改按钮图标

> ID：15707194
> 
> 赞同：4
> 
> 时间：2013-03-29T16:23:50.757
> 
> 标签：javascript, jquery, twitter-bootstrap

我有完整的 jsfiddle 示例[http://jsfiddle.net/snijsure/usg8z/3/](http://jsfiddle.net/snijsure/usg8z/3/)

基本上我有如下所示的javascript函数

```
function playButtonPress() {

    if (play == false) {
        $("#playbutton").removeClass("icon-play").addClass("icon-stop").button('refresh');

        console.log("playButton pressed play was false show pause button");
        play = true;
    } else {
        $("#playbutton").removeClass("icon-pause").addClass("icon-play").button('refresh');
        console.log("playButton pressed play was true show play button");
        play = false;
    }
} 
```

我想在“播放”和“暂停”之间切换按钮图标。即如果用户正在播放某些内容按钮应该是暂停，如果用户没有播放内容它应该是“播放”。

看来我已经正确连接了所有的 javascript 函数，但似乎无法弄清楚如何从图标播放和图标暂停更改按钮的图标类。

如何以编程方式更改与按钮关联的图标？我也看到了不同的行为——在 chrome 中，图标确实发生了变化，但大小真的很小，而在 Firefox 中，图标没有变化。

或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:39:45.470

您需要修改`i`元素上的类。此外，您可以一次性完成这两种情况：

```
function playButtonPress() {
    $("#playbutton i").toggleClass("icon-stop icon-play");

    console.log("playButton pressed play was "+play);

    play = !play;
} 
```

[http://jsfiddle.net/Zxfn8/](http://jsfiddle.net/Zxfn8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:36:24.993

由于引导程序在文档准备好时初始化了一些元素，因此您应该在播放按钮之后有暂停按钮但隐藏：

在播放按钮后添加：

```
<button type="button" id="pauseButton" class="btn" onclick='playButtonPress()'><i class="icon-pause"></i></button> 
```

在你的 CSS 中添加这个

```
#pauseButton{display:none;} 
```

你的 JS 应该是这样的

```
 function playButtonPress() {
    if (!play) {
      $("#playbutton").hide();
      $("#pauseButton").show();
      play = true;
    } else {
      $("#pauseButton").hide()
      $("#playbutton").show();
      play = false;
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:29:21.737

您必须选择`<i>`元素才能更改类。例如像这样：

```
$("#playbutton i").removeClass("icon-play").addClass("icon-stop"); 
```

你也有`icon-stop`并且`icon-pause`你确实决定了其中之一。

[工作小提琴](http://jsfiddle.net/usg8z/4/)。

而且我认为您不需要`$("#playbutton").button('refresh');`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-29T16:36:47.013

在您更改按钮上的图标类的原始代码中，您想要更改`<i>`标签。

试试这个：

> ```
> function playButtonPress() {
> if (play == false) {
>     $("#playbutton i").removeClass("icon-play").addClass("icon-pause");
> 
>     console.log("playButton pressed play was false show pause button");
>     play = true;
> } else {
>     $("#playbutton i").removeClass("icon-pause").addClass("icon-play");
>     console.log("playButton pressed play was true show play button");
>     play = false;
> } } 
> ```

[更新小提琴](http://jsfiddle.net/fzpyC/)

# r - 修复 R 程序的代码..另一个 if 循环

> ID：15707195
> 
> 赞同：0
> 
> 时间：2013-03-29T16:23:51.583
> 
> 标签：r, if-statement

问题是有时我的数据没有大于或等于 5 且小于 80 的数字，或者有时我只有一个观察结果，所以我无法执行 t.test。如何在循环中使用 if 语句，以便如果它没有得到 5 到 80 之间的任何值或只有一个观察值，它只使用`NA`而不执行 t.test？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:38:14.387

DWin 是正确的。类型在 R 中很重要，长度并不总是按照您对数据帧的期望方式工作。您应该能够使用`nrow`或`NROW`获得“长度”。如果一切都失败了，你可以使用`try`，但这总是让我觉得很脏。

但是，要确定，请提供 Matthew 要求的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:35:35.483

您可以在 lapply 中放置一个像这样的“try”块。将结果初始化为 NA，如果它没有遇到任何错误，它只会分配 t.test 结果。

```
data2 <- lapply(1:length(m), function(i) {
         res = NA
         try({ 
             #you can put your other constraints here
             if(length(m[[i]][[5]]) > 1) {
                 res = t.test(data1$Value,m[[i]][[5]])
             }
         }, silent=T)
         res
 }) 
```

# macos - 大写锁定打开时将Mac菜单栏颜色更改为黑色？

> ID：15707196
> 
> 赞同：-1
> 
> 时间：2013-03-29T16:23:51.940
> 
> 标签：macos, applescript

有可能吗，如果可以，有人可以帮我实现吗？当我有大写锁定时，我想让mac菜单栏改变颜色，背景为黑色和白色文本？这么少的回报有点多，但我认为这将是一个很酷的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:45:49.133

如果您搜索，您会发现已经有各种应用程序可以执行此操作（好吧，不是通过按下*caps lock*，但您可以使用它们的源代码 - 如果提供 - 并查看由*whiskeyspider*发布的链接做您自己的版本）。

请注意，这些应用程序只是使用内置 OS X 功能**反转颜色。**以其他方式执行此操作意味着您必须在其中编辑*ArtFile*和*SArtFile*`/System/Library/PrivateFrameworks/CoreUI.framework/Resources`

我使用第一种类型的应用程序；启动时花了一些时间来反转颜色，但看起来很棒。

# asp.net - 过滤日期之间的gridview不会获取Date To的记录

> ID：15707197
> 
> 赞同：1
> 
> 时间：2013-03-29T16:23:54.657
> 
> 标签：asp.net

我正在尝试过滤网格视图以显示特定日期之间的订单。我设法让它工作，但它没有显示日期的记录。它只显示这些日期之间的时间。Date from 中存在的记录显示...

```
 <asp:EntityDataSource ID="EDS_Orders" runat="server" EnableUpdate="true" EnableFlattening="False"  OrderBy="it.Order_date ASC"
                      ConnectionString="name=Bohemian1Entities" DefaultContainerName="Bohemian1Entities" EntitySetName="t_customer_orders"
                      Where="it.UserName is not null and (it.Order_date Between @DateFrom AND @DateTo) AND (it.UserName Like '%' + @UserName +  '%') " >
    <WhereParameters>                                                     

         <asp:ControlParameter ControlID="ddlDateFrom" Name="DateFrom" 
         Type="DateTime" DefaultValue="%"/>
         <asp:ControlParameter ControlID="ddlDateTo" Name="DateTo" 
         Type="DateTime" DefaultValue="%"/>
         <asp:ControlParameter ControlID="ddlCustomers" Name="UserName" PropertyName="Text" 
         Type="String" DefaultValue="%"/>

    </WhereParameters>

</asp:EntityDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:51:30.667

尝试重写`Where`子句如下：

```
Where="it.UserName is not null and (CAST(it.Order_date AS DATE) Between @DateFrom AND @DateTo) 
    AND (it.UserName Like '%' + @UserName + '%')" 
```

# format - Practical Common LISP 中的 %10t 格式错误

> ID：15707198
> 
> 赞同：1
> 
> 时间：2013-03-29T16:23:56.333
> 
> 标签：format, lisp, common-lisp, sbcl, practical-common-lisp

这是该页面的链接：[第 3 章，实用：一个简单的数据库](http://www.gigamonkeys.com/book/practical-a-simple-database.html)。本质上，我有一个包含四个要显示的值的列表数据库。这是用

```
(defun dump-db ()
  (dolist (cd *db*)
    (format t "~{~a:~10t~a~%~}~%" cd))) 
```

唯一的问题是输出不太正确：

```
TITLE:  Home
ARTIST:   Dixie Chicks
RATING:   9
RIPPED:   T
... (Shortened for brevity) 
```

由于某种原因，“首页”没有从第 10 列开始，有人能告诉我为什么吗？我正在使用 SBCL 运行代码，最新版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:24:18.540

两件事情：

**备注**：

`0]` 表示您处于调试循环中。离它远一点。`help`显示命令。

**问题**：

也许这是 SBCL 的一个错误。您可能想在其邮件列表中讨论它。那会很有用。

我猜：

```
* (dump-db)
^^ <- 2 characters
TITLE:  Home
^^^^^^^^ <- 8 characters, 2 less than specified 
```

如果您回到顶层，您会看到 SBCL 提示符是`*` - 两个字符长。现在您看到 的第一个缩进`Home`短了两个字符。所以 Lisp 打印机认为提示符的两个字符在同一行，然后位置 10 在接下来的八个字符上——比需要的少两个。也许 Lisp 打印机被 REPL 的某种编程方式弄糊涂了。接下来的几行就很好了。

顺便说一句，这不会发生在 LispWorks 或 Clozure CL 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:26:52.327

```
0] (dump-db)    
TITLE:  Home
ARTIST:   Dixie Chicks
RATING:   9
RIPPED:   T

TITLE:    Fly
ARTIST:   Dixie Chicks
RATING:   8
RIPPED:   T

TITLE:    Roses
ARTIST:   Kethy Mattea
RATING:   7
RIPPED:   T

NIL
0] (dump-db)
TITLE:    Home
ARTIST:   Dixie Chicks
RATING:   9
RIPPED:   T

TITLE:    Fly
ARTIST:   Dixie Chicks
RATING:   8
RIPPED:   T

TITLE:    Roses
ARTIST:   Kethy Mattea
RATING:   7
RIPPED:   T

NIL
0] 
```

它似乎已经修复了......我不确定如何或为什么（我仍然希望回答的问题）。

# ibm-mobilefirst - 由于缺少我的 html 的“临时”文件，worklight 构建失败

> ID：15707200
> 
> 赞同：0
> 
> 时间：2013-03-29T16:24:05.540
> 
> 标签：ibm-mobilefirst

几周以来，我一直在成功运行构建，但今天早上构建开始失败。我尝试删除 WorklightServerHome 文件夹以便重新创建架构，但这并没有解决问题。有任何想法吗？

```
[2013-03-29 09:11:47]             Worklight Server started successfully on localhost:8080
[2013-03-29 09:11:47]             Activating Worklight project: MyFishingReportProject2...
[2013-03-29 09:11:50] FWLSE3005I: Application raw reports are disabled.
[2013-03-29 09:11:50] FWLST0010I: ====== Started server for project MyFishingReportProject2-project-customization; Worklight version=5.0.6.20130311-0918-developer-edition
[2013-03-29 09:11:50]             Activation done.
[2013-03-29 09:11:50]             Starting adapter deployment on Worklight Server
[2013-03-29 09:11:50]             Deploying adapter: FishingReportDB
[2013-03-29 09:11:50]             Server host: localhost
[2013-03-29 09:11:50]             Server port: 8080
[2013-03-29 09:11:51] FWLSE0084I: Deployed adapter 'FishingReportDB' successfully.
[2013-03-29 09:11:51]             Adapter deployed successfully
[2013-03-29 09:11:54]             Activation done.
[2013-03-29 09:11:56]             Starting build process: application 'MyFishingReport', all environments
[2013-03-29 09:11:57] FWLST1040E: common build failed: File 'C:\Users\IBM_AD~1\AppData\Local\Temp\worklightBuildcommon5213198707751472627\preview\default\MyFishingReport.html' does not exist
[2013-03-29 09:11:59] FWLST1040E: mobilewebapp build failed: File 'C:\Users\IBM_AD~1\AppData\Local\Temp\worklightBuildmobilewebapp2958050589803221945\www\default\MyFishingReport.html' does not exist
[2013-03-29 09:12:00] FWLST1040E: android build failed: File 'C:\Users\IBM_AD~1\AppData\Local\Temp\worklightBuildandroid8850935126627789257\www\default\MyFishingReport.html' does not exist
[2013-03-29 09:12:00]             Application 'MyFishingReport' with all environments build finished.
[2013-03-29 09:12:00] FWLST1035I: No environments to build. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:58:43.520

正如用户在评论中所写，该问题是由于 HTML 文件从其正确位置（apps\theApp 文件夹的根目录）意外移动操作而发生的。

# cordova - PhoneGap 使用什么数据库，大小限制是多少？

> ID：15707201
> 
> 赞同：67
> 
> 时间：2013-03-29T16:24:09.013
> 
> 标签：cordova, mobile, offline

我编写了一个 HTML5 数据库，它抽象了 localStorage、indexedDB 和 WebSQL。使用直接 HTML5 我的数据库选项如下所示：

*   **IE10** - 索引数据库 - 最大 1GB
*   **FireFox** - indexedDB - 无限制
*   **Safari** - WebSQL - 最大 50MB
*   **Chrome** - IndexedDB（或 Web SQL） - 无限制（使用 HTML5 Quota API [ref1](https://developers.google.com/chrome/whitepapers/storage)，[ref2](http://updates.html5rocks.com/2011/11/Quota-Management-API-Fast-Facts)）
*   **Opera** - WebSQL（直到他们切换到 webkit？） - 无限制

我想使用 PhoneGap 或 Quota API 扩展最大数据库大小。从 PhoneGap 的文档看来，当前的[PhoneGap 数据库生态圈](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html)是：

*   **WebSQL** - Android、黑莓、iPhone 和 webOS
*   **本地存储**- Windows Phone 7
*   **indexedDB** - [Windows Phone 8](https://stackoverflow.com/questions/14624482/phonegap-sqlite-or-indexed-db)，我猜，到处都有 indexedDB 可用，但 WebSQL 不可用。

还有PhoneGap SqlLite 插件。[iOS](https://github.com/brodyspark/PhoneGap-sqlitePlugin-iOS) , [Android](https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android) , [Windows Phone 8+](https://github.com/marcucio/Cordova-WP-SqlitePlugin)

* * *

**问题 1** - 我对 PhoneGap 将使用什么数据库的理解准确吗？

**问题 2** - 是否有任何关于给定类型的 PhoneGap 数据库将存储多少数据的可靠文档？*如果它是 PhoneGap 数据库而不是浏览器数据库实现。

**问题 3** - PhoneGap 是否有计划遵守[Web 存储标准](http://www.w3.org/TR/webstorage/)，从而放弃 WebSQL 以支持 indexedDB？如果是这样，一旦切换到 indexedDB，我是否仍然能够使用现有的 WebSQL 代码（通过内置的 PhoneGap-polyfill）？

**问题 4** - 在数据库大小有限且无法通过 PhoneGap 或 Quota API 扩展但可以访问文件系统的情况下，假设“额外”数据可以存储在设备的文件系统上是否合理？在 SD 卡上？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-04-04T13:15:33.633

> 我对 PhoneGap 将使用什么数据库的理解准确吗？

是的。PhoneGap 可以使用 LocalStorage、SessionStorage 或 SQLite 数据库。您也可以选择使用 PhoneGap 通过插件连接到设备原生类，并传递原生类数据，然后它将存储在设备上。

> 有没有关于给定类型的 PhoneGap 数据库将存储多少数据的可靠文档？如果它是 PhoneGap 数据库而不是浏览器数据库实现。

1.  本地存储 :: 10MB
2.  会话存储 :: 10MB
3.  SQLite 数据库 :: 50MB-80MB（取决于设备）
4.  使用插件调用的本地数据库 :: 无限数据量
5.  索引数据库 :: 5MB。依然存在。但是非常[有问题，这里有一个运行它的设备/操作系统列表](http://caniuse.com/indexeddb)

> PhoneGap 是否有计划遵守 Web 存储标准，从而放弃 WebSQL 以支持 indexedDB？如果是这样，一旦切换到 indexedDB，我是否仍然能够使用现有的 WebSQL 代码（通过内置的 PhoneGap-polyfill）？

WebSQL 正在慢慢被弃用。它的替代品是 IndexedDB 或 SQLite。然而，对您来说最好的选择是 SQLite 或本机数据库（例如 iOS 上的 Core Data）

> 在数据库大小有限且无法通过 PhoneGap 或 Quota API 扩展但可以访问文件系统的情况下，假设“额外”数据可以存储在设备的文件系统或 SD 上是否合理？卡片？

这绝对是可能的。

*   在 Android 上，您可以指定数据库的位置，从而将数据推送到外部数据库。
*   在 iOS 上，您可以使用本机数据库调用将数据存储在 CoreData 上，没有外部存储器。
*   在所有操作系统的所有情况下，您都可以创建一个平面数据库文件，如文本文件，将您的数据存储在键值列表中，然后在第一次运行时将它们拉入您的应用程序。在这种情况下，请注意内存管理。

我在答案中添加了关于如何为 SQLite 和 LocalStorage 数据库进行编码的[说明](https://stackoverflow.com/questions/12005042/phonegap-offline-database/15811728#15811728)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T13:20:40.917

我能够在 Android 4.0.4 平板电脑上运行测试。它使用 WebSQL（甚至不支持 db.changeVersion 的旧版本的 WebSQL），它允许我填满整个硬盘驱动器（我的数据库为 12GB）。我不知道其他设备或 SD 卡如何工作。

![在此处输入图像描述](../Images/b563cfc3bf057543f07f6102a85e18dd.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-13T21:14:30.180

索引数据库 -

*   它与许多类型的移动操作系统和版本不兼容
*   它仅与非常特定版本的移动操作系统兼容
*   开发人员不能将 SQL 与 IndexedDB 一起使用。SQL 语句可用于 SQLite 和 WebSQL
*   大多数开发人员都尽可能地避免使用 IndexedDB

WebSQL -

*   它已被 W3C 弃用，这意味着它不再被维护或开发
*   它需要另一个名为 Polyfill 的插件，以使移动应用程序能够与流行的移动操作系统（如 Google Android 和 Apple iOS）一起使用

SQLite -

*   它获得了谷歌的奖项
*   SQLite 有它的官方网站。IndexedDB 和 WebSQL 没有
*   在 Google 上，SQLite 返回 180 万条结果。WebSQL 返回的结果略少于 700K，IndexedDB 返回的结果为 282K。
*   开发者可以在 SQLite 中使用常用的 SQL 语句。

如果你想要一个关于 SQLite 的快速教程

[使用 Android 和 Phonegap 存储 SQLite 数据库](https://stackoverflow.com/questions/19570868/storage-of-sqlite-database-using-android-and-phonegap/25518453#25518453)

# jsf - How to implement the image redirect with parameters?

> ID：15707210
> 
> 赞同：0
> 
> 时间：2013-03-29T16:24:28.787
> 
> 标签：jsf, jsf-2, graphicimage

This is the way how a `commandButton` realizes the redirect with parameters.

```
<h:commandButton value="Check" action="#{GetInfoBean.getInfo}">
<f:param name="ID" value="4"></f:param>
</h:commandButton> 
```

When this `commandButton` get clicked, it will pass the parameter named `ID` with value `4`. The managed bean `GetInfoBean`'s method `getInfo()` will return the new url.

But now, my question is how can I implement this redirect process using `image` or `graphicImage` since it doesn't have the `action` attribute?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:51:10.473

Wrap the image using a `<h:commandLink>`:

```
<h:commandLink value="Check" action="#{GetInfoBean.getInfo}">
    <f:param name="ID" value="4"></f:param>
    <h:graphicImage value="/your/image.png" />
</h:commandLink> 
```

# php - 设置 HTTP 身份验证

> ID：15707213
> 
> 赞同：1
> 
> 时间：2013-03-29T16:24:32.290
> 
> 标签：php

我需要设置 HTTP 身份验证。我迷路了，我研究并找到了验证 $_SERVER['PHP_AUTH_USER'] 和 $_SERVER['PHP_AUTH_PW'] 的技术和代码，我想我明白这一点。但是我不明白如何设置 PHP_AUTH_USER 和 PHP_AUTH_PW ？我在 $_SERVER 上使用了 print-r 也没有看到？我是以某种方式将这些设置在服务器某处的文件中，还是使用代码进行设置？

我在 Webfaction 托管的共享服务器上。

我意识到这可能不是一个好问题，但如果有人能指出我正确的方向，那就太好了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:35:12.503

```
<?php
if (!isset($_SERVER['PHP_AUTH_USER'])) {
    header('WWW-Authenticate: Basic realm="My Realm"');
    header('HTTP/1.0 401 Unauthorized');
    echo 'Text to send if user hits Cancel button';
    exit;
} else {
    echo "<p>Hello {$_SERVER['PHP_AUTH_USER']}.</p>";
    echo "<p>You entered {$_SERVER['PHP_AUTH_PW']} as your password.</p>";
} 
```

当页面被调用时，`$_SERVER['PHP_AUTH_USER']`不设置。所以页面返回`HTTP/1.0 401 Unauthorized`在浏览器上显示模式的标题。

当浏览器发送带有 ID 和密码的第二个请求时。它发送这个请求：

```
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

`PHP_AUTH_USER`并且超级全局变量`PHP_AUTH_PW`是由 PHP 自动设置的。

资料来源：

*   [http://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)
*   [http://php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:27:16.737

这是您需要的所有代码：

```
$successful = FALSE;

if (isset($_SERVER['PHP_AUTH_USER']) && isset($_SERVER['PHP_AUTH_PW']))
{
    $username = $_SERVER['PHP_AUTH_USER'];
    $password = $_SERVER['PHP_AUTH_PW'];

    if ($username == '-- username --' && $password == '-- password --')
    {
        $successful = TRUE;
    }
}

if ( ! $successful)
{
    header('WWW-Authenticate: Basic realm="Secret page"');
    header('HTTP/1.0 401 Unauthorized');
} 
```

它会询问用户名和密码，查看它们是否匹配，如果不匹配 - 再次询问它们。

请注意，根据服务器配置，[HTTP 基本身份验证](http://php.net/manual/en/features.http-auth.php)可能不起作用。

* * *

*ps 你应该用你自己的用户名和密码替换`-- username --`和。`-- password --`*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:36:08.357

要设置环境变量（又名超全局变量），格式为：
$_SERVER['variable'] = value (or variable);

[http://php.net/manual/en/language.variables.superglobals.php](http://php.net/manual/en/language.variables.superglobals.php) - good info on PHP superglobal variables.

# android-ndk - NDK 构建不工作

> ID：15707214
> 
> 赞同：0
> 
> 时间：2013-03-29T16:24:33.820
> 
> 标签：android-ndk

我正在构建一个需要 android ndk 的 android 应用程序。当我尝试执行命令 ndk-build.cmd 时，出现以下错误：“找不到指定的路径”

我已经将路径变量设置为ndk所在的路径，但它仍然不起作用......谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:41:25.230

您需要添加到路径的二进制文件位于 NDK 本身中。我想我遇到了和你一样的问题，我通过将 {NDK install dir}/prebuilt/darwin-x86/bin 添加到我的路径来解决。

我已经写了[一篇](http://workingmatt.blogspot.co.uk/2013/03/set-up-android-sdk-and-ndk.html)关于我安装 ADT/NDK 的经验的博客文章，这个解决方案出现了大约一半。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T16:30:46.267

尝试使用linux终端或使用cygwin

或查看[此链接](http://permadi.com/blog/2011/09/setting-up-android-jni-projects-in-windows-eclipse-and-sequoyah/)

# python - 如何从 numpy.dot(A, A_inv) 得出单位矩阵

> ID：15707215
> 
> 赞同：2
> 
> 时间：2013-03-29T16:24:36.283
> 
> 标签：python, numpy, floating-point, linear-algebra

我准备了一个随机数矩阵，计算它的逆矩阵并将其与原始矩阵相乘。这在理论上给出了单位矩阵。我怎么能让我`numpy`这样做？

```
import numpy

A = numpy.zeros((100,100))
E = numpy.zeros((100,100))

size = 100

for i in range(size):
    for j in range(size):
        A[i][j]+=numpy.random.randint(10)
        if i == j:
            E[i][j]+=1

A_inv = numpy.linalg.linalg.inv(A)
print numpy.dot(A, A_inv) 
```

运行代码产生

```
[me]machine @ numeric $ python rand_diag.py 
[[  1.00000000e+00  -7.99360578e-15  -1.14491749e-16 ...,   3.81639165e-17
   -4.42701431e-15   1.17961196e-15]
[ -5.55111512e-16   1.00000000e+00  -2.22044605e-16 ...,  -3.88578059e-16
    1.33226763e-15  -8.32667268e-16] 
```

很明显，结果是一个单位矩阵，但不精确，所以`print numpy.dot(A, A_inv) == E`显然给出了`False`. 我这样做是为了练习线性代数并试图找到我的机器达到其极限的矩阵大小。获得一个`True`将具有教学吸引力。

编辑：

设置`size=10000`，我内存不足

```
[me]machine @ numeric $ Python(794) malloc:
***mmap(size=800002048) failed (error code=12)
*** error: can\'t allocate region
*** set a breakpoint in malloc_error_break to debug
Traceback (most recent call last):
File "rand_diag.py", line 14, in <module>     A_inv = numpy.linalg.linalg.inv(A)
File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py", line 445, in inv
return wrap(solve(a, identity(a.shape[0], dtype=a.dtype)))
File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py", line 323, in solve
a, b = _fastCopyAndTranspose(t, a, b)
File "/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py", line 143, in _fastCopyAndTranspose
cast_arrays = cast_arrays + (_fastCT(a),)
MemoryError

[1]+  Exit 1                  python rand_diag.py 
```

如何分配更多内存以及如何并行运行（我有 4 个内核）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T16:28:02.480

虽然 get`True`在教学上很有吸引力，但它也会脱离浮点计算的现实。

在处理浮点数时，不仅要为不精确的结果做好准备，还要为出现的各种其他数值问题做好准备。

我强烈推荐阅读[每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

在您的特定情况下，为确保它`A * inv(A)`足够接近单位矩阵，您可以计算[矩阵范数](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.norm.html)并`numpy.dot(A, A_inv) - E`确保它足够小。

作为旁注，您不必使用循环来填充`A`和`E`. 相反，您可以使用

```
A = numpy.random.randint(0, 10, (size,size))
E = numpy.eye(size) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T16:55:47.827

同意已经提出的大部分观点。但是，我建议不要查看单个非对角线元素，而是取它们的 rms 总和；这在某种意义上反映了由于计算不完善而泄漏到非对角项中的“能量”。然后，如果您将此 RMS 数除以对角项的总和，您将获得逆运算效果的指标。例如，下面的代码：

```
import numpy
import matplotlib.pyplot as plt
from numpy import mean, sqrt
N = 1000
R = numpy.zeros(N)

for size in range(50,N,50):

  A = numpy.zeros((size, size))
  E = numpy.zeros((size, size))

  for i in range(size):
      for j in range(size):
          A[i][j]+=numpy.random.randint(10)
          if i == j:
              E[i][j]=1

  A_inv = numpy.linalg.linalg.inv(A)
  D = numpy.dot(A, A_inv) - E
  S = sqrt(mean(D**2))
  R[size] = S/size
  print "size: ", size, "; rms is ",  S/size

plt.plot(range(50,N,50), R[range(50, N, 50)])
plt.ylabel('RMS fraction')
plt.show() 
```

表明 rms 误差非常稳定，数组的大小一直到 950x950 的大小（它确实减慢了一点......）。然而，它从来都不是“精确的”，并且存在一些异常值（大概当矩阵更接近奇异时 - 这可能发生在随机矩阵中。）

示例图（每次运行时，它看起来都会有所不同）：

![在此处输入图像描述](../Images/c35a7146b0caaad8a8b39651fc60ad35.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T16:27:12.470

最后，您可以使用

```
m = np.round(m, decimals=10) 
```

或检查它们是否有很大不同：

```
np.abs(A*A.I - i).mean() < 1e-10 
```

如果你想杀死微小的数字。

* * *

我会在`numpy.matrix`课堂上实现这一点。

```
import numpy

size = 100
A = numpy.matrix(numpy.random.randint(0,10,(size,)*2))
E = numpy.eye(size)

print A * A.I
print np.abs(A * A.I - E).mean() < 1e-10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:29:02.600

您的问题可以简化为常见的浮点比较问题。比较此类数组的正确方法是：

```
EPS = 1e-8  # for example
(np.abs(numpy.dot(A, A_inv) - E) < EPS).all() 
```

# bash - 我可以使用环境变量 %PROGRAMDATA% 吗？

> ID：15707219
> 
> 赞同：4
> 
> 时间：2013-03-29T16:25:02.810
> 
> 标签：bash, shell, windows-8, cygwin

我输入：

`echo $USERPROFILE`并得到`C:\Users\rob`

`echo $PROGRAMFILES`并得到`C:\Program Files (x86)`

`echo $PROGRAMDATA`一无所获。

在 windows 下`%PROGRAMDATA%`评估为`C:\ProgramData`

为什么支持某些 Windows 环境变量而不支持其他环境变量，或者我只是在这里做错了什么？如果没有，是否有一个列表，其中某个地方被转换为在 cygwin 下使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T06:20:03.137

是混合情况

```
$ set | grep -i programdata
ALLUSERSPROFILE='C:\ProgramData'
ProgramData='C:\ProgramData'

$ echo $ProgramData
C:\ProgramData 
```

# javascript - 使用咖啡源图调试 brunch.io？

> ID：15707222
> 
> 赞同：1
> 
> 时间：2013-03-29T16:25:09.957
> 
> 标签：javascript, brunch

我想知道如何使用 sourcemaps 调试我的 brunch.io (ember) 应用程序？

我的源图是由 IntelliJ Webstorm 生成的——但是我如何将它们与 brunch.io 构建过程一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T07:09:03.217

还不可能。源地图对于下一个版本有很大的优先级：[https](https://github.com/brunch/brunch/issues/288) ://github.com/brunch/brunch/issues/288 。

**编辑：**好的，源地图现在在早午餐！调试愉快。

# google-chrome - ExtJS 水平滚动条阻止 TabPanel 中的选项卡标题

> ID：15707231
> 
> 赞同：0
> 
> 时间：2013-03-29T16:25:47.073
> 
> 标签：google-chrome, extjs, extjs4

这是一个我很难研究和追踪的问题。在视图中加载以下面板时，每个选项卡标题上都会出现滚动条（不是所有选项卡的一个长滚动条，而是单个选项卡标题）。这对我来说不是一个大问题，因为我在 Mountain Lion 上带有小滚动条，但在旧 OS X 版本上的其他用户有巨大的蓝色滚动条，挡住了整个标签标题。

当我得到一个截图时，我会发布一个截图，但这里是代码：

```
Ext.define('App.view.case.CasePanel', {
    extend: 'Ext.panel.Panel',
    alias : 'widget.case-panel',
    title : 'Edit Case',
    layout: 'fit',
    border: false,
    autoScroll: true,
    constrainHeader: true,

    initComponent: function() {
        this.items = [{
            xtype: 'panel',
            autoScroll: true,
            layout: 'border',
            items: [{
                region: 'west',
                xtype: 'case-edit-case-info',
                split: true,
                border: true,
                width: 300
            },{
                region: 'center',
                xtype: 'tabpanel',
                activeTab: 0,
                autoScroll: true,
                border: false,
                defaults: {border:false, bodyStyle:'padding:5px'},
                items: [{
                    title: 'One',
                    xtype: 'case-edit-tab-one'   // these aren't the actual tab names, but you get the idea.
                },{
                    title: 'Two',
                    xtype: 'case-edit-tab-two'
                },{
                    title: 'Three',
                    xtype: 'case-edit-tab-three'
                },{
                    title: 'Four',
                    xtype: 'case-edit-tab-four'
                },{
                    title: 'Five',
                    xtype: 'case-edit-tab-five'
                },{
                    title: 'Six',
                    xtype: 'case-edit-tab-six'
                },{
                    title: 'Seven',
                    xtype: 'case-edit-tab-seven'
                }]
            }]
        }];

        this.bbar = [{
            text: 'Save',
            action: 'save'
        }, {
            text: 'Cancel',
            action: 'cancel'
        }];

        this.callParent(arguments);
    }
}); 
```

关于它为什么这样做的任何想法？

（Mac OS X，最新的 Chrome 版本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:54:18.833

尝试从第一个面板中删除 autoScroll：

```
initComponent: function() {
    this.items = [{
        xtype: 'panel',
        autoScroll: true,
        layout: 'border',
        ...
    }]
} 
```

# sql-server - T-SQL 函数在调用时表现为布尔表达式？

> ID：15707232
> 
> 赞同：1
> 
> 时间：2013-03-29T16:25:50.287
> 
> 标签：sql-server, tsql, function, boolean, bit

我正在尝试编写一个计算为布尔值的 T-SQL 函数。

我已经阅读了几篇文章，指出 BIT 是 T-SQL 等效于 BOOLEAN 类型（例如[Microsoft SQL Server 中是否有像 MySQL 中那样的布尔数据类型？](https://stackoverflow.com/questions/3138029/is-there-boolean-data-in-sql-server-like-mysql)，[http://social.msdn.microsoft.com/论坛/en-US/transactsql/thread/c3143a77-c921-40a7-920e-3d5c5f7a269a](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/c3143a77-c921-40a7-920e-3d5c5f7a269a)）。

然而，当我创建返回 BIT 的函数时：

```
create function dbo.fn_checkLength( @name nvarchar(50), @maxLength int) returns bit
as begin

    if len(@name) > @maxLength return cast(0 as bit);

    return cast(1 as bit);
end;
GO 
```

它不像一个计算结果为布尔值的函数，因为以下语句：

```
create table dbo.test_table (
    id int,
    name nvarchar(50),

    constraint
        ck_test_table_maxLength
    check (
        dbo.fn_checkLength(name, 10)
    )
);
GO 
```

给我：

> 消息 4145，级别 15，状态 1，第 10 行
> 在预期条件的上下文中指定的非布尔类型表达式，靠近“）”。

为了使它起作用，在调用我的函数时，我在组合中添加了一个布尔运算符，以真正使表达式为布尔值：

```
create table dbo.test_table (
    id int,
    name nvarchar(50),

    constraint
        ck_test_table_maxLength
    check (
        dbo.fn_checkLength(name, 10) > 0
    )
);
GO 
```

为什么会这样？有没有办法将可在 T-SQL 语句中使用的函数声明为常规布尔表达式？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T16:40:04.787

在[SQL：1999](http://en.wikipedia.org/wiki/SQL:1999)之前，SQL没有真正的布尔数据类型，目前很少有实现支持此功能。

位类型不是真正的布尔类型 - 它是一种数值类型，可以具有值 1 或 0（或 NULL）。

因此，除非您使用支持此功能的 SQL:1999 实现，否则您将不得不在检查子句中使用布尔表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:40:59.383

Interesting.. I guess the only explanation is, CHECK by definition accepts only 'conditional expression that evaluates to TRUE or FALSE'. As per the second line in the [documentation](http://msdn.microsoft.com/en-us/library/ms188258%28v=sql.105%29.aspx) `You can create a CHECK constraint with any logical (Boolean) expression that returns TRUE or FALSE based on the logical operators.` 'Logical operators' is the key.

# python - 使用 print 在 Python 中输出对象

> ID：15707234
> 
> 赞同：2
> 
> 时间：2013-03-29T16:25:54.790
> 
> 标签：python, class

我正在实例化一个类，只是想使用 print 转储对象。当我这样做时，我似乎得到了某种对象 ID。我不能只发出一个“打印 ObjectName”，结果就是对象的属性吗？这是我正在做的一个例子：

```
class Car:
    def __init__(self, color, make, model):
        self.color = color
        self.make = make
        self.model = model

    def getAll():
        return (self.color, self.make, self.model)

mycar = Car("white","Honda","Civic")
print mycar 
```

当我运行它时，我得到以下结果：

```
<__main__.Car instance at 0x2b650357be60> 
```

我也希望看到颜色、品牌、型号的值。我知道我是否通过以下方式单独打印它们：

```
print mycar.color,mycar.make,mycar.model 
```

它输出：

```
white Honda Civic 
```

正如我所期望的那样。为什么“print mycar”输出的是实例 id 而不是属性值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:27:47.873

在你的类上定义一个[`.__str__()`方法。](http://docs.python.org/2/reference/datamodel.html#object.__str__)打印自定义类实例时会调用它：

```
class Car:
    def __init__(self, color, make, model):
        self.color = color
        self.make = make
        self.model = model

    def __str__(self):
        return ' '.join((self.color, self.make, self.model)) 
```

演示：

```
>>> mycar = Car("white","Honda","Civic")
>>> print mycar
white Honda Civic 
```

In addition, you could implement a [`.__repr__()` method](http://docs.python.org/2/reference/datamodel.html#object.__repr__) too, to provide a debugger-friendly representation of your instances.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T16:28:56.250

You need to implement `__str__` and `__repr__` to get "friendly" values for your class objects.

Look [here](http://docs.python.org/2/reference/datamodel.html#object.__repr__) for more details on this.

`__repr__` is the official string represntation of an object and is called by `repr()` and `__str__` is the informal string representation and is called by `str()`

# extjs - 面板 afterRender 使用加载器配置

> ID：15707235
> 
> 赞同：1
> 
> 时间：2013-03-29T16:26:06.620
> 
> 标签：extjs, extjs4.1

我有一个我创建的面板，其中包含加载器配置以将 jsp 页面加载到其中。jsp 中有标记，我需要在我的 ext 控制器中附加一个侦听器。我遇到的问题是我在面板上收听 afterrender，但是来自 jsp 页面的 dom 并不总是被渲染/加载，但它是一个时间问题（有时 afterrender 可以找到 dom，而其他时候它不能在此刻）。我尝试在加载器上放置一个监听器来监听负载。但是我又遇到了同样的问题，有时dom已经在那个时候被渲染了，有时它没有（再次是时间问题）。

```
Ext.create('panel', {
  listeners : {
       afterrender: {
           fn : function(){
               Ext.dom.Query.select('#mydiv');//sometimes this finds it some times it doesn't
           }
       }
    }
  loader : {
   url : '/my/jsp',
   autoLoad : true,
   listeners : {
       load : {
           fn : function(){
               Ext.dom.Query.select('#mydiv');//sometimes this finds it some times it doesn't
           }
       }
    }
}
}); 
```

加载jsp并在面板中渲染dom后是否有事件要监听？我认为在加载程序完成将 jsp 的 dom 加载到面板之前调用 afterrender 并且与加载程序加载事件相同。在尝试查询 dom 并附加侦听器之前，我需要确保 jsp 中的 dom 在面板中呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:23:08.970

加载器触发加载事件，因此您可以使用以下命令收听它：

```
component.getLoader().on('load', function() {
    // do something
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:25:53.643

您可以尝试在监听器中使用延迟选项[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.EventManager-method-addListener](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.EventManager-method-addListener) 这不是一个完整的证明方法，但可以工作你。

# b-tree - 将一系列连续的数字或随机数插入 SQLite btree-index 是否更快

> ID：15707238
> 
> 赞同：0
> 
> 时间：2013-03-29T16:26:13.640
> 
> 标签：b-tree

假设我们有一个必须进入 SQLite 数据库的大型数据集，包含 2.5 亿个项目。假设这张桌子是

```
 create table foo (myInt integer, name text) 
```

并且 myInt 被索引*但不是唯一的*。没有主键。

值在 1 到 250000000 之间，重复非常罕见，但并非不可能。这是有意的/设计的。

鉴于 b-tree 算法的工作方式（并忽略其他因素），哪个是更快的插入，为什么？

```
 (a) dataset is first sorted on myInt column (ascending or descending) and the data
        rows are then inserted in their pre-sorted order into SQLite
        (b) dataset is inserted in a totally random order 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T12:04:58.750

绝对（一）。btree 中的随机插入要慢得多。

# android - OpenGL ES Android 位图纹理未显示

> ID：15707241
> 
> 赞同：0
> 
> 时间：2013-03-29T16:26:19.200
> 
> 标签：android

我正在尝试绘制一个正方形并为其添加纹理。我刚开始使用 OpenGL，我正在关注本教程[http://blog.uncle.se/2012/02/opengl-es-tutorial-for-android-part-vi-textures/](http://blog.uncle.se/2012/02/opengl-es-tutorial-for-android-part-vi-textures/)。

这是我的正方形绘制程序的代码：

```
public void draw(float[] mvpMatrix) {
    // Add program to OpenGL environment
    GLES20.glUseProgram(mProgram);

    // get handle to vertex shader's vPosition member
    mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");

    // Enable a handle to the triangle vertices
    GLES20.glEnableVertexAttribArray(mPositionHandle);

    // Prepare the triangle coordinate data
    GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX,
                                 GLES20.GL_FLOAT, false,
                                 vertexStride, vertexBuffer);

    // get handle to fragment shader's vColor member
    mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");

    // Set color for drawing the square
    GLES20.glUniform4fv(mColorHandle, 1, color, 0);

    /** now trying to add the texture */

    Bitmap bitmap = BitmapFactory.decodeResource(chamRenderer.context.getResources(), 
            R.drawable.ic_launcher);

    // Create an int array with the number of textures we want, 
    // in this case 1.
    int[] textures = new int[1]; 
    // Tell OpenGL to generate textures.
    GLES20.glGenTextures(1, textures, 0);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textures[0]);
    // Scale up if the texture if smaller.
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, 
            GLES20.GL_TEXTURE_MAG_FILTER, 
            GLES20.GL_LINEAR); 
    // scale linearly when image smalled than texture
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, 
            GLES20.GL_TEXTURE_MIN_FILTER, 
            GLES20.GL_LINEAR);

    // get handle to shape's transformation matrix
    mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
    Renderer.checkGlError("glGetUniformLocation");

    // Apply the projection and view transformation
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);
    Renderer.checkGlError("glUniformMatrix4fv");

    // Draw the square
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, drawOrder.length,
                          GLES20.GL_UNSIGNED_SHORT, drawListBuffer);

    // Disable vertex array
    GLES20.glDisableVertexAttribArray(mPositionHandle);
} 
```

蓝色显示很好，但他们对纹理没有希望，没有错误，只是没有。就像我说的，我现在非常喜欢 OpenGL。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:39:20.217

如果我没看错，它显示的是蓝色和白色方块（看起来像瓷砖），但不是纹理？纹理是存储在位图变量中的图像。创建位图后，您无需执行任何操作。看来您还没有完成教程；代码是他们用来渲染它的代码不在您的代码中。查看 UV 映射部分下方并查看该代码并确保包含该代码。

# jquery - 报名表未提交

> ID：15707243
> 
> 赞同：1
> 
> 时间：2013-03-29T16:26:22.070
> 
> 标签：jquery, ajax, forms

这种形式曾经有效。直到我对电子邮件验证功能进行了一些调整。有什么我没有看到需要做的事情吗？另外，我该如何改进这个表格？

我改变的是哪个验证首先触发。一旦完成基本验证并且电子邮件不为空。我想在继续提交之前验证电子邮件。

```
$(document).ready(function() {

    //add default text on certain fields
    $("#phone").on({
        focus: function() {
            if($(this).val().length === 0) {
                $(this).val('+'); }
            },
        blur: function() {
            if($(this).val() === '+') {
                $(this).val(''); }
            }
    });

    $("#twitter").on({
        focus: function() {
            if($(this).val().length === 0) {
                $(this).val('@'); }
            },
        blur: function() {
            if($(this).val() === '@') {
                $(this).val(''); }
            }
    });

    $("#facebook").on({
        focus: function() {
            if($(this).val().length === 0) {
                $(this).val('facebook.com/'); }
            },
        blur: function() {
            if($(this).val() === 'facebook.com/') {
                $(this).val(''); }
            }
    });

    $("#portfolio").on({
        focus: function() {
            if($(this).val().length === 0) {
                $(this).val('www.'); }
            },
        blur: function() {
            if($(this).val() === 'www.') {
                $(this).val(''); }
            }
    });

    //when submit is clicked
    $('#contactform').on('submit', function() {
        var form = $(this);
        var inputs = $('input[type="text"]');
        var workshop = $('#selectworkshop');
        var firstname = $('#firstname');
        var lastname = $('#lastname');
        var email = $('#email');
        var phone = $('#phone');
        var companyorschool = $('#companyorschool');
        var portfolio = $('#portfolio');
        var twitter = $('#twitter');
        var facebook = $('#facebook');
        var honeypot = $('#honeypot');
        var invalid = false;

        //basic validation on required fields
        $('.required').each(function() {
            if ($(this).val().length === 0) {
                $(this).addClass('highlight');
                    if($('#form-alert').is(':visible')) {
                        $('body').scrollTo('#form-alert',{duration:'fast', offsetTop : '30'});
                    } else {
                        $('#form-alert').html('Please fill in the required information.').slideDown('slow');
                    }
                invalid = true;
            } else {
                $(this).removeClass('highlight');
                invalid = false;
            }
        });

        if (invalid === true) {
            return false;
        }

        //basic email validation
        if(validateEmail(email) === false) {
            $(email).addClass('highlight');
               if($('#form-alert').is(':visible')) {
                    $('#form-alert').html('Please enter a valid email address.');
                    $('body').scrollTo('#form-alert',{duration:'fast', offsetTop : '30'});
                } else {
                    $('#form-alert').html('Please enter a valid email address.').slideDown('slow');
                    $('body').scrollTo('#form-alert',{duration:'fast', offsetTop : '30'});
                }
            invalid = true;
        } else {
            invalid = false;
        }

        if (invalid === true) {
            return false;
        }

        //email validation function using regex
        function validateEmail(email) {
          var emailReg = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,253}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,253}[a-zA-Z0-9])?)*$/;
          if(!emailReg.test(email)) {
            return false;
          } else {
            return true;
          }
        }

        //show the loading animation on button
        $('#submit').val(' ').addClass('loading').attr('disabled', 'true');

        //start the ajax
        $.ajax({
            url: '/registration.php',
            type: 'POST',
            data: form.serialize(),
            cache: false,
            beforeSubmit: function() {
               if($('#form-alert').is(':visible')) {
                    $('form-alert').slideUp('fast');
                }
            },
            success: function(responseText, statusText, xhr) {
                console.log("Worked!");
                $('#form-success').html(responseText).slideDown('slow');
            },
            complete: function() {
                inputs.attr('disabled', 'true');
                $('#submit').removeClass('loading').val('REGISTRATION COMPLETE');
            }
        });
        //cancel the submit button default behaviours
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:00:05.663

我做了一些改变来完成这项工作。在有条件的情况下提交表单似乎有很大的不同。有改进的余地。我会在某个时候谈到这一点。

```
$(document).ready(function() {

    //add default text on certain fields (removed to simplify answer)

    //when submit is clicked
    $('#submit').on('click', function() {
        var form = $('#contactform');
        var inputs = $('input[type="text"]');
        var workshop = $('#selectworkshop');
        var firstname = $('#firstname').val();
        var lastname = $('#lastname').val();
        var email = $('#email').val();
        var phone = $('#phone').val();
        var companyorschool = $('#companyorschool').val();
        var portfolio = $('#portfolio').val();
        var twitter = $('#twitter').val();
        var facebook = $('#facebook').val();
        var honeypot = $('#honeypot').val();
        var required_invalid = false;
        var email_invalid = false;
        var email_validation = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,253}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,253}[a-zA-Z0-9])?)*$/;

        $('.required').removeClass('highlight');

        //basic validation on required fields
        $('.required').each(function() {
            if ($(this).val().length === 0) {
                $(this).addClass('highlight');
                    if($('#form-alert').is(':visible')) {
                        $('body').scrollTo('#form-alert',{duration:'fast', offsetTop : '30'});
                    } else {
                        $('#form-alert').html('Please fill in the required information.').slideDown('slow');
                    }
                required_invalid = true;
            }
        });

        if (required_invalid === true) {
            return false;
        }

        //basic email validation
        if(!email_validation.test(email)) {
            $(email).addClass('highlight');
               if($('#form-alert').is(':visible')) {
                    $('#form-alert').html('Please enter a valid email address.');
                    $('body').scrollTo('#form-alert',{duration:'fast', offsetTop : '30'});
                } else {
                    $('#form-alert').html('Please enter a valid email address.').slideDown('slow');
                    $('body').scrollTo('#form-alert',{duration:'fast', offsetTop : '30'});
                }
            email_invalid = true;
        }

        if (email_invalid === true) {
            return false;
        }

        if (required_invalid === false && email_invalid === false) {

            //show the loading animation on button
            $('#submit').val(' ').addClass('loading').attr('disabled', 'true');

            //start the ajax
            $.ajax({
                url: '/registration.php',
                type: 'POST',
                data: form.serialize(),
                cache: false,
                success: function(responseText, statusText, xhr) {
                    console.log("Worked!");
                    $('form-alert').slideUp();
                    $('#form-success').html(responseText).slideDown('slow');
                },
                complete: function() {
                    inputs.attr('disabled', 'true');
                    $('#submit').removeClass('loading').val('REGISTRATION COMPLETE');
                }
            });
        } else {
            //cancel the submit button default behaviours
            return false;
        }
    });
}); 
```

# c++ - 未定义 int64_t 的按位或？

> ID：15707248
> 
> 赞同：0
> 
> 时间：2013-03-29T16:26:43.950
> 
> 标签：c++, 64-bit, bit-manipulation

这是我正在尝试做的事情：

```
int64_t* h_out[ARRAY_SIZE];
int64_t result;
// some manipulations on h_out...
result = h_out[0] | h_out[1]; 
```

最后一行给出了这个错误：

```
error: expression must have integral or enum type 
```

我不确定我是否理解错误想说什么，但我猜它没有`|`为`int64_t`. `%`在谷歌搜索这个错误时，会出现几个类似的问题，其中许多问题都涉及操作符未定义的事实`int64_t`。

那么...我如何对两个 64 位长整数进行 bitor 处理？如果它需要特定于 GCC，我不关心可移植性，到目前为止它很简单。无论如何，这是一个玩具任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:29:32.650

h_out[0] 是指向`int64_t`非`int64_t`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T16:29:52.260

它是为 定义的`int64_t`，但不是为`int64_t*`（指针）定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T16:30:13.360

`h_out` is an array of pointers to `int64_t`, so `h_out[0]` and `h_out[1]` have the type `int64_t *`: not an integral type, but a pointer. Perhaps you meant declaring it as

```
int64_t h_out[ARRAY_SIZE]; 
```

instead?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:28:03.973

你包括了吗

```
#include <stdint.h> 
```

?

# android - Android创建一个圆形位图而不在画布上绘制它

> ID：15707251
> 
> 赞同：1
> 
> 时间：2013-03-29T16:26:48.840
> 
> 标签：android, canvas, bitmap, geometry

我的问题是：有什么方法可以创建一个圆圈，然后将其制作为位图，而不是在画布上显示它？例如制作一个黑色圆圈，然后将其转换为位图，但不使用 canvas.setBitmap（位图位图）。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:34:42.877

[您可以使用Bitmap](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap)静态方法 (Bitmap.create) 轻松获取位图对象，[然后](http://developer.android.com/reference/android/graphics/Canvas.html)通过使用`bitmapObject`.

您的代码应如下所示：

```
Bitmap bitmap = Bitmap.create(width, height, Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap);
//draw on your canvas. 
```

# android - Android 工具不适用于 IntelliJ

> ID：15707253
> 
> 赞同：7
> 
> 时间：2013-03-29T16:26:53.457
> 
> 标签：android, intellij-idea

我最近从 eclipse 搬到了 Intellij，但我在使用 Android 工具时遇到了问题。当我单击 Tools->Android->Monitor（包括 DDMS）时，我收到错误消息：

无法加载 JNI 共享库“C:\Program Files\Java\jdk1.7.0_17\bin..\jre\bin\server\jvm.dll”。

我正在使用 Intellij 的最新社区版。如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-27T13:49:54.100

很简单！只需使用`[IntelliJ Idea Directory]\bin\idea64.exe`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-25T12:20:35.787

我有同样的问题。我的环境和我的解决方案：

*   我有一个 64 位的 Java。您可以通过以下代码片段了解您的版本：

    ```
    public class Test {
       public static void main(String args[]) {
           System.out.println(System.getProperty("sun.arch.data.model") );
       }  
    } 
    ```

*   我正在运行 Intellij 的 32 位版本（“C:\Program Files (x86)\JetBrains\IntelliJ IDEA Community Edition 12.1.3\bin\idea.exe”）

*   我只是改成idea64.exe（“C:\Program Files (x86)\JetBrains\IntelliJ IDEA Community Edition 12.1.3\bin\idea64.exe”）。直接访问您的桌面。

*   它工作......就像一个老板。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T08:54:34.263

您需要一个 64 位软件包：

```
64-bit Windows OS
64-bit Java (JDK it must be 1.7 ) 
```

请试试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T21:49:53.220

我有同样的问题。在我的环境中，原因是 Intellij Community 以 32 位可执行文件启动，而 Android Monitor 工具是 64 位 exe。因此，一个干净的解决方案是使用 64 位 JVM 启动 Intellij：

1.  定义环境变量IDEA_JDK指向64位JDK的路径（例如C:\Program Files\Java\jdk1.6.0_43）
2.  修改用于运行 Intellij 的快捷方式以启动`idea.bat`（而不是`idea.exe`）

当 idea.bat 找到环境变量`%IDEA_JDK%`时，它使用 64 位 JVM 运行 Intellij。

这解决了问题（在我的环境中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-31T21:59:58.503

I had to change my JAVA_HOME environment variable to point at the 64-bit Java.

# c++ - 移动窗口 Linux C

> ID：15707260
> 
> 赞同：-2
> 
> 时间：2013-03-29T16:27:21.877
> 
> 标签：c++, linux, window

我想做一个函数，可以通过它的 PID 在 C++ 中移动 Linux 中的窗口。所以我在Windows下试过了。但是我很难为 Linux 编译它。有没有办法用 Qt 做到这一点？由于我还没有找到，所以我尝试为 Linux 编译。

我正在使用 MoveWindow 函数，它是 Windows API 的一部分。是否有任何 Linux 等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:16:01.717

如果您不想这样做，则不必手动执行此操作，因为那里已经有很多工具可以执行诸如移动、调整大小、最大化和任何窗口之类的任务。

您可能想要仔细研究的一个工具的名称是`wmctrl`即使您不打算使用，也可以通过查看源代码找到一些有趣的技巧。

移动只有创建窗口的客户端的 pid 知道的窗口的任务可能不是最简单的任务，原因有几个。

*   首先，您真的不应该尝试这样做，因为在 X Windows 哲学中，窗口管理器的工作是在屏幕上排列窗口。

    以及 ICCCM（参见：[http](http://de.wikipedia.org/wiki/Inter-Client_Communication_Conventions_Manual) ://de.wikipedia.org/wiki/Inter-Client_Communication_Conventions_Manual ）作为 EWM 规范（参见：[http](http://standards.freedesktop.org/wm-spec/wm-spec-latest.html) ://standards.freedesktop.org/wm-spec/wm-spec-latest.html ) 强烈劝阻任何客户尝试自行移动调整大小或其他任何内容。最有可能移动由另一个客户“拥有”的窗口可能被认为是更大的邪恶。

*   您可能面临的第二个问题是，X 11 协议没有任何 pid 概念。

    由于它被设计为通过网络使用，因此您永远无法真正确定该程序与您当前坐在同一台机器上运行。因此，像 pid 这样的东西没有多大意义，因为如果它们在不同的机器上运行，可能会有任意数量的具有相同 pid 的客户端在同一个 X 服务器上显示窗口。

幸运的是，它并没有那么糟糕，因为 EWMH 规范鼓励任何客户端在其顶级窗口上设置**_NET_WM_PID属性，即创建窗口的客户端的 pid。**

再次遵守 EWMH 规范并不是由 X 服务器以任何方式强制执行的，因此尽管几乎所有客户端都会设置它，但仍然不能保证您会找到属于特定 pid 的窗口。

## 可能性

虽然直到这里提到的所有要点似乎都相当有限，但实际上很可能恰恰相反。即使实际上完全弄乱在 X 会话中运行的任何其他客户端相对容易，所以引入了关于如何在 X 词中成为好公民的整套规则。

由于 X11 协议本身是一种网络协议（并不是 100% 正确，因为本地运行的客户端很可能会通过 UNIX 域套接字与 X 服务器进行通信），因此不需要任何特定的库来与 X 服务器通信。

谈到您的问题中提到的 C，**Xlib**长期以来一直是广泛使用的唯一一种实现，但还有另一种称为**xcb**的绑定。与 Xlib 相比，API 略有变化。

## 库

说起Xlib 直到现在我还没有使用过任何xcb，所以我不能告诉你太多关于它可能是以下可能有用的方法。

*   **XOpenDisplay** - 打开到 X 服务器的连接
*   **XQueryTree** - 获取服务器上当前活动的窗口树
*   **XInternAtom** - 不用担心它不危险。只需在手册中阅读它，因为您需要将“原子”映射到上面提到的 _NET_WM_PID
*   **XListProperties** - 使用您要查找的值搜索 _NET_WM_PID 属性

*   **XConfigureWindow** , **XMoveWindow** , **XResizeWindow** , ... - 最终执行您想做的任何事情。

上述所有功能都应记录在手册页中。只是使用`man XOpenDisplay`例如。

哦，一定要了解您可以使用的所有其他工具，以进一步研究 X Window 世界。运行`xlsatoms`，检查仅在单个（！）窗口`xwininfo`的输出中报告的获取列表的内容。`xprop`试着给自己设置一些，看看会发生`xprop`什么，如果你有礼貌地问的话，甚至会为你做这件事。

# css - 引导菜单在几个 html 静态网页上重复

> ID：15707263
> 
> 赞同：0
> 
> 时间：2013-03-29T16:27:30.830
> 
> 标签：css, menu, static, zurb-foundation

我正在用 Foundation 构建一个简单的静态网站。

我想知道如何在不重复每个 html 页面上的菜单代码的情况下对站点的菜单导航进行编码（因此将来更容易维护）？我可以在菜单中包含 Javascript，但我无法更改每个菜单项的导航类外观（例如：突出显示“关于我们”）。

或者是否有一种工具可以帮助在纯静态网站上维护大型菜单项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:12:38.530

实际上，我最近只是想弄清楚这一点，尽管我最终使用了 PHP。如果你想使用 PHP，这是我使用的以下代码段：

创建一个函数

```
 <?php

        function echoActiveClassIfRequestMatches($requestUri) {
            $current_file_name = basename($_SERVER['REQUEST_URI'], ".php");

            if ($current_file_name == $requestUri)
                echo 'class="active"';
        }

        ?> 
```

然后，将这些添加到您的`<li>`标签中：

```
<li <?php echoActiveClassIfRequestMatches("about-us")?>>
                    <a href="about-us.php">About Us</a></li> 
```

希望这可以帮助。如果我能找到找到此解决方案的链接，我会尽力给予信任。

# java - BatteryStatus isCharging 会返回什么？

> ID：15707264
> 
> 赞同：-4
> 
> 时间：2013-03-29T16:27:31.550
> 
> 标签：java, android

如果您运行此代码，`isCharging`在充电和充满时会返回什么？

```
public void onReceive(Context context, Intent intent) { 
    IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    Intent batteryStatus = context.registerReceiver(null, ifilter);

    int status = intent.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
    boolean isCharging = status == BatteryManager.BATTERY_STATUS_CHARGING ||
                         status == BatteryManager.BATTERY_STATUS_FULL;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:30:19.933

`isCharging``true`如果满足其中任何一个条件，就会出现。

# ruby-on-rails - 在本地切换环境时禁用 New Relic 报告

> ID：15707266
> 
> 赞同：7
> 
> 时间：2013-03-29T16:27:43.737
> 
> 标签：ruby-on-rails, ruby, rubygems, newrelic

我们使用 New Relic 来监控我们的 Rails 应用程序。有时，当我们在本地开发时，我们需要切换到不同的环境进行测试。我们像这样启动我们的服务器

```
$ RAILS_ENV=production rails s 
```

不幸的是，现在我们的应用程序开始向新的 relic 发送数据，就好像我们在生产集群中添加了另一台机器一样。

**当我们需要在不同环境下本地测试设置时，如何禁用 New Relic gem 将数据发送到 New Relic？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T17:31:24.870

这应该有效： `NEWRELIC_ENABLE=false RAILS_ENV=production rails s`

# visual-c++ - 用于 c++ 的 MSBuild 消息

> ID：15707274
> 
> 赞同：1
> 
> 时间：2013-03-29T16:28:03.270
> 
> 标签：visual-c++, visual-studio-2012, msbuild

**问题：**使用 msbuild 编辑 .props 文件失败。我想看看操作的中间结果对一些输出消息做了什么。“不支持”是 IDE 告诉我的。

**示例：** 我想获取配置名称的最后四个字符以使用字符串的一部分。

```
 <ImportGroup Label="PropertySheets">
        <Import project=".\prop_$(Configuration.Substring($([MSBuild]::Subtract($(Configuration.Length),4)) )).props" />    
  </ImportGroup> 
```

*如何查看部分、长度、减法、子串的结果？*我希望能够在处理过程中打印出这些值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:42:59.390

您可以使用[消息任务](http://msdn.microsoft.com/en-us/library/6yy0yx8d.aspx)

示例：在项目的顶部，将 InitialTargets 设置为目标的名称

```
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" InitialTargets="DisplayText">

<Target Name="DisplayText">
   <Message Importance="high" Text="Configuration = $(Configuration)" />
   <Message Importance="high" Text="Configuration Length = $(Configuration.Length)" />
   <Message Importance="high" Text="Configuration Substring = $(Configuration.Substring($([MSBuild]::Subtract($(Configuration.Length),4))))" />
</Target> 
```

这应该打印出您在构建过程中询问的所有内容。

```
1>------ Build started: Project: TemplateTest, Configuration: Debug Win32 ------
1>  Configuration = Debug
1>  Configuration Length = 5
1>  Configuration Substring = ebug 
```

# arrays - ansi C - 将值传递给数组

> ID：15707276
> 
> 赞同：0
> 
> 时间：2013-03-29T16:28:16.450
> 
> 标签：arrays, function

如果您调用如下函数：

```
coworkers = engineers(1,0,3);
...

int engineers(unsigned char nerd, unsigned char dweeb[], unsigned char derp) {
     printf("Is this the address of dweeb[0]? 0x%x \n", dweeb);
     printf("Is this the value of dweeb[0]? %x \n", dweeb[0]);
} 

Output:
Is this the address of dweeb[0]? 0xfeedbeef
Is this the value of dweeb[0]? 
```

当我将 0 值传递给 dweeb[] 时，它会变成 dweeb[0] 的值吗？

——我是笨蛋，周五快乐。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:33:09.797

`dweeb[0]`等价于`*(dweeb+0)`所以是的，它确实变成了 at 的值`dweeb[0]`。

请注意，因为 dweeb+0 = 0+dweeb，您也可以将其写为`0[dweeb]`.

* * *

**仔细观察，**当您将函数作为第二个参数传递`0`给函数时`engineers`，发生的情况是该地址`0x0`将用作数组的位置`dweeb`。取消引用该地址，如`dweeb[0]`，是未定义的行为。最可能的结果是程序崩溃。您*实际*看到的更有可能是：

```
Is this the address of dweeb[0]? 0x0
Segmentation fault 
```

我不确定你在问什么，如果它是“如果我把`0`括号放在`dweep[ ]`”中会发生什么或“如果我`0`作为值传递会发生什么`dweep`”

# xamarin.android - Mono for Android 和 MuPdf PInvoke

> ID：15707278
> 
> 赞同：0
> 
> 时间：2013-03-29T16:28:20.410
> 
> 标签：xamarin.android, pinvoke, mupdf

我正在尝试在 Mono for Android 应用程序中在 Android 上呈现 PDF 文档。我正在使用用 C 编写的 MuPdf 库，并且在调用一个 C 函数时遇到问题。我得到什么：

```
System.EntryPointNotFoundException: fz_pixmap_samples 
```

C函数：

```
unsigned char *fz_pixmap_samples(fz_context *ctx, fz_pixmap *pix)
{
    if (!pix)
        return NULL;
    return pix->samples;
} 
```

我的 C# 包装器：

```
public class APV
{
    [DllImport("libmupdf.so", EntryPoint = "fz_pixmap_samples", CallingConvention = CallingConvention.Cdecl)]
    private static extern IntPtr fz_pixmap_samples(IntPtr ctx, IntPtr pix);

    public static IntPtr GetSamples(IntPtr ctx, IntPtr pix)
    {
        return fz_pixmap_samples(ctx, pix);
    }
} 
```

我调用 GetSamples 的方式：

```
APV.GetSamples(context, pix); 
```

函数 fz_pixmap_samples(fz_context *ctx, fz_pixmap *pix) 应该返回指向位图数据的指针。我假设将 unsigned char * 映射到 IntPtr 不正确？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:05:23.223

> System.EntryPointNotFoundException：fz_pixmap_samples

表示该库不导出名为`fz_pixmap_samples`. 很可能存在一些名称修饰，这意味着该函数以不同的名称导出。

The first thing to do is to remove the `EntryPoint` argument which will allow the managed code to look for decorated names.

If that doesn't get it done then you need to study the .so library file to find out exactly what name is used to export the function. And use that in your p/invoke declaration.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T20:05:41.860

I know it's old, but for those looking we solved it by:

`fz_pixmap_samples` wasn't actually exposed (exported) in the 1.8 version of the .so files we were using. If you run nm on it, you'll see it isn't exported. That's why there is the runtime error when trying to use it.

So we had to go to the muPDF website, get the project and source, and make a change and recompile it. I know, it's a pain. Seemed to be the only answer.

Had to go to muPDF.c inside the source/platform/android/jni folder, and in there call `fz_pixmap_samples(NULL, NULL)` inside one of the methods that has the jni export call. Just calling `fz_pixmap_samples(NULL, NULL)` in there will now expose it in the .so file when you recompile it.

To recompile muPDF, follow the instructions that are provided in the mupdf project for recompiling for android. They are good instructions.

# wpf - WPF Datagrid - 需要自动生成的列

> ID：15707281
> 
> 赞同：0
> 
> 时间：2013-03-29T16:28:23.400
> 
> 标签：wpf, vb.net, validation, datagrid, autogeneratecolumn

我在 AutoGenerateColumns="TRUE" 的 wpf 应用程序中有一个数据网格。我想将它们中的一些或全部设置为必需的，如果缺少某些东西则无效。

我希望会有类似的东西：`dgrid.Columns(_DataTable.Columns("fname").Ordinal)`**.required** `= TRUE`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:06:27.687

required 用于指定编辑行时需要的值？验证不是以这种方式完成的......

如果这是您需要的，您可以在这里查看[http://blogs.u2u.be/diederik/post/2009/09/30/Validation-in-a-WPF-DataGrid.aspx 。](http://blogs.u2u.be/diederik/post/2009/09/30/Validation-in-a-WPF-DataGrid.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T16:39:49.200

处理事件

[DataGrid.AutoGeneratingColumn 事件](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratingcolumn.aspx)

# php - PHP Thumbnail 不断创建黑色背景没有 alpha 我找不到解决方案

> ID：15707283
> 
> 赞同：0
> 
> 时间：2013-03-29T16:28:27.407
> 
> 标签：php

我已经尝试了所有方法，但我找不到正确的解决方案，为什么我无法使用 alpha 获取我的 png，它们都是黑色或没有透明度。我到处搜索，无法让它正常工作。

```
<?php
ini_set('memory_limit', '-1');
function create_thumb($directory, $image, $destination) {
  $image_file = $image;
  $image = $directory.$image;
  if (file_exists($image)) {
    $source_size = getimagesize($image);
    if ($source_size !== false) {
      $thumb_width = 189;
      $thumb_height = 120;
      switch($source_size["mime"]) {
        case 'image/jpeg':
             $source = imagecreatefromjpeg($image);
        break;
        case 'image/jpg':
             $source = imagecreatefromjpeg($image);
        break;
        case 'image/png':
             $source = imagecreatefrompng($image);
             imagealphablending($png, false);
             imagesavealpha($png, true);
        break;
        case 'image/gif':
             $source = imagecreatefromgif($image);
        break;
      }
      $source_aspect = round(($source_size[0] / $source_size[1]), 1);
      $thumb_aspect = round(($thumb_width / $thumb_height), 1);
      if ($source_aspect < $thumb_aspect) {
        $new_size = array($thumb_width, ($thumb_width / $source_size[0]) * $source_size[1]);
        $source_pos = array(0, ($new_size[1] - $thumb_height) / 2);
      } else if ($source_aspect > $thumb_aspect) {
        $new_size = array(($thumb_width / $source_size[1]) * $source_size[0], $thumb_height);
        $source_pos = array(($new_size[0] - $thumb_width) / 2, 0);
      } else {
        $new_size = array($thumb_width, $thumb_height);
        $source_pos = array(0, 0);
      }
      if ($new_size[0] < 1) $new_size[0] = 1;
      if ($new_size[1] < 1) $new_size[1] = 1;
      $thumb = imagecreatetruecolor($thumb_width, $thumb_height);
      imagealphablending($source, false);
      imagesavealpha($source, true);
      $transparent = imagecolorallocatealpha($source, 255, 255, 255, 127);
      imagecopyresampled($thumb, $source, 0, 0, 0, 0, $source_pos[0],
       $source_pos[1], $new_size[0], $new_size[1], $source_size[0], $source_size[1]);
      switch($source_size["mime"]) {
        case 'image/jpeg':
             imagejpeg($thumb, $destination.$image_file);
        break;
        case 'image/jpg':
             imagejpeg($thumb, $destination.$image_file);
        break;
        case 'image/png':
              imagepng($thumb, $destination.$image_file);
        break;
        case 'image/gif':
             imagegif($thumb, $destination.$image_file);
        break;
      }
    }
  }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:32:16.980

我也遇到过这个问题。一种解决方法是首先使用图像中不太可能出现的背景颜色填充图像。然后将该颜色设置为透明颜色。

# javascript - 将文本字段的值作为搜索查询发送到谷歌

> ID：15707286
> 
> 赞同：0
> 
> 时间：2013-03-29T16:28:38.397
> 
> 标签：javascript, jquery

有没有办法可以获取输入字段的值并将其作为搜索查询发送给 Google？

我将如何去做这将是使用 jQuery 的 .attr() 并将其存储在一个变量中。然后用加号 (+) 替换该字符串中的所有空格。然后将其附加到[http://google.com/](http://google.com/)？然后使用 window.location 导航新构建的 URL。

有一个更好的方法吗？

或者，如果你想不出更好的方法，你能帮我实现上面的方法吗？我遇到问题的部分是使用 .attr() 并给 window.location 一个变量作为其参数/参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:30:13.883

好吧，`+`不需要替换空格，因为它不会使您的查询有任何不同。

对于其余部分，您可以使用：

```
window.location.href = 'http://google.com?q='+encodeUriComponent($('#textbox').val()); 
```

# javascript - JavaScript - 新对象，模块中的代码

> ID：15707296
> 
> 赞同：1
> 
> 时间：2013-03-29T16:29:03.137
> 
> 标签：javascript, module, iife

我从 JavaScript 开始并研究了以下代码。新运营商是做什么的？是不是 canvas.js 调用自己并创建了一个画布？

main.js

```
(function(){
     new display.Canvas();

})(); 
```

画布.js

```
(function(){

var Canvas = display.Canvas = function() {

    this.createCanvas();

};
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:46:24.577

Douglas Crockford 有一篇关于[“新”如何运作](http://yuiblog.com/blog/2006/11/13/javascript-we-hardly-new-ya/)的好文章。

在您给出的示例中， canvas.js 中的代码（假设`display.canvas`实际应该是`display.Canvas`）定义了一个用于创建新画布的函数。main.js 代码使用该函数来创建画布。

# python - 数据库设计 NBA

> ID：15707298
> 
> 赞同：1
> 
> 时间：2013-03-29T16:29:05.870
> 
> 标签：python, database, relational

如果这是一个明显的初学者问题，我是数据库设计的新手，很抱歉。我使用 python 和 sqlalchemy 虽然我认为这不相关（下面的示例代码是伪代码），但可能是错误的。我已经查看了一些以前的问题，但没有看到这个问题得到解决。无论如何，关于这个问题。这里的目标是开发一个 NBA 信息数据库，该数据库将包含所有比赛的信息，以及每名球员每场比赛的得分。有几种方法可以设计这个 DB。

```
Game(game_id, date, home_name, away_name, score)
Box_Score(game_id, player_name, date, points, rebounds) 
```

在这种情况下，如果我想获得洛杉矶湖人队打过的所有比赛，我可以做到

```
query(Game).filter(home_name=="lakers" or away_name=="lakers").all()
query(Box_Score).filter(player_name="kobe bryant") 
```

这是如何设计此数据库的第二个选项：

```
Game(game_id, date, home_name=(foreignkey=Team.team_name), away_name, score)
Box_Score(game_id, player_name=foreignkey=Player.player_name), date, points, rebounds)
Team(team_name, home_games=relationship("Game"))
Player(player_name, box_scores=relationship("Box_Score")) 
```

那我可以做

```
query(Team).filter(name=="lakers").first().games
query(Player).filter(name=="kobe bryant").first().box_scores 
```

一方面，使用关系数据库的重点似乎是像在情况 #2 中那样设置它。另一方面，我不确定它给了我什么额外的功能。所以我想我的问题是，你推荐哪种设计？这两种设计是否有一些优点或缺点会在我看不到的情况下变得明显？如果您推荐不使用表关系的更简单设计#1，为什么我要存储大量相关信息但不需要使用关系数据库？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:46:34.707

任何数据库的理想数据模型都是高度主观的。如果您是数据库设计的新手，您可能要等到创建应用程序并对其进行长时间测试*后才能找到理想的模式。*我建议阅读一些设计基础知识，尤其是[Database Normalization](http://en.wikipedia.org/wiki/Database_normalization)，因为您可能会受益于高度规范化的模式，其中数据可以以多种不同的方式引用。如果高度规范化的数据库非常大（这看起来不像），性能部门可能会受到影响，但您始终可以通过使用[物化视图](http://en.wikipedia.org/wiki/Materialized_view)或其他缓存方法对数据进行反规范化。

# c# - 用户认证

> ID：15707305
> 
> 赞同：2
> 
> 时间：2013-03-29T16:29:26.253
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, authentication, identity

已经搜遍了，找不到任何相关的东西。

到目前为止，我必须使用 C# 在 MVC 中构建一个很酷的 Web 应用程序。我创建了一个用户模型

```
public class User
{

    // Must be named EntityNameId, must have primary key!
    public int UserId { get; set; }

    [DisplayName("First Name")]
    public string firstName { get; set; }
    [DisplayName("Last Name")]
    public string lastName { get; set; }
    [DisplayName("Cell Number")]
    public string cellNumber { get; set; }

} 
```

因此，为每个用户设计了一个配置文件/仪表板

```
/User/Profile/1 
```

通过他们的 id 访问。我还有其他部分，例如用于编辑项目 /Item/Index/1 的菜单，它显示该用户的所有项目等。我的代码可以为用户过滤和填充这些页面。然而，到目前为止，我还没有实现任何身份验证。我想通过 ApplicationServices 使用内置的身份验证工具，并且以前使用过角色：

```
<Authorize(Roles:="Manager,Administrator")> 
```

但是，我想将页面限制为登录的特定用户？即 /User/Profile/1 应该只能由该用户等访问，而不是他们所服务的角色。

有谁知道如何做到这一点？我知道这可能意味着将帐户控制器和用户控制器捆绑在一起，不太确定如何做到这一点，以便一切工作都一样？由于应用程序基本完成，非常简单，但只需要身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:40:20.150

只需在操作方法的顶部做一个简单的检查，如果不是当前用户，则执行重定向。

```
public ActionResult Profile(int id)
{
    if (CurrentUser.Id != id)
    {
        return RedirectToAction("Index");
    }

    return View();
} 
```

如果你经常使用它，你可以将它重构为一个方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:43:22.260

第二个选项是甚至不将用户 ID 传递给控制器​​/操作方法，只需获取登录用户的 ID 并从那里获取信息。

```
[Authorize]
public ActionResult Profile()
{
    return View(profileService.GetUserProfile(CurrentUser.Id));
} 
```

# c++ - 如何让 std::istringstream 将给定字符视为空格？

> ID：15707309
> 
> 赞同：1
> 
> 时间：2013-03-29T16:29:39.773
> 
> 标签：c++, parsing, stringstream

使用`std::istringstream`它很容易阅读由空格分隔的单词。但要解析以下行，我需要将字符`/`视为空格。

```
f 104/387/104 495/574/495 497/573/497 
```

如何读取由斜杠或空格分隔的值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T16:41:39.173

一种方法是定义一个分类`/`为空白的 ctype facet：

```
class my_ctype : public std::ctype<char> {
public:
    mask const *get_table() { 
        static std::vector<std::ctype<char>::mask> 
            table(classic_table(), classic_table()+table_size);
        table['/'] = (mask)space;
        return &table[0];
    }
    my_ctype(size_t refs=0) : std::ctype<char>(get_table(), false, refs) { }
}; 
```

从那里，使用该 ctype facet 为流注入语言环境，然后读取单词：

```
int main() { 
    std::string input("f 104/387/104 495/574/495 497/573/497");
    std::istringstream s(input);
    s.imbue(std::locale(std::locale(), new my_ctype));

    std::copy(std::istream_iterator<std::string>(s),
              std::istream_iterator<std::string>(),
              std::ostream_iterator<std::string>(std::cout, "\n"));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T16:36:04.107

如果 boost 可用，那么[`boost::split()`](http://www.boost.org/doc/libs/1_53_0/doc/html/string_algo/usage.html#idp163440592)将是一个可能的解决方案。填充`std::string`using[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)然后拆分行：

```
#include <iostream>
#include <vector>
#include <string>

#include <boost/algorithm/string.hpp>
#include <boost/algorithm/string/split.hpp>

int main()
{
    std::vector<std::string> tokens;
    std::string line("f 104/387/104 495/574/495 497/573/497");
    boost::split(tokens, line, boost::is_any_of("/ "));

    for (auto& token: tokens) std::cout << token << "\n";

    return 0;
} 
```

输出：

```
F
104
387
104
495
574
495
497
573
497

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T16:34:02.553

如果您知道何时用斜杠或空格分割，您可以使用[`std::getline`](http://www.cplusplus.com/reference/string/string/getline/)

```
std::istringstream is("f 104/387/104 495/574/495 497/573/497");
std::string f, i, j, k;
std::getline(is, f, ' ');
std::getline(is, i, '/');
std::getline(is, j, '/');
std::getline(is, k, ' '); 
```

或者，您可以使用格式化输入并手动丢弃斜杠

```
std::string f;
int i, j, k;
char slash;
is >> f >> i >> slash >> j >> slash >> k; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-18T00:12:45.767

我确信这根本不是最好的方法，但我正在编写《*Programming Principles and Practice Using C++ 2nd Ed》一书中的练习。Bjarne Stroustrup*和我想出了一个可能对你有用的解决方案。我四处搜寻，看看其他人是怎么做的（这就是我找到这个帖子的方式），但我真的什么也没找到。

首先，这是书中的练习：

> 编写一个函数 vector<string> split(const string& s, const string& w) 从参数 s 返回一个由空格分隔的子字符串的向量，其中空格定义为“普通空格”加上 w 中的字符。

这是我想出的解决方案，似乎效果很好。我试着评论它以使其更清楚。只想提一下我对 C++ 还很陌生（这就是我阅读这本书的原因），所以不要对我太苛刻。:)

```
// split a string into its whitespace-separated substrings and store
// each string in a vector<string>. Whitespace can be defined in argument
// w as a string (e.g. ".;,?-'")
vector<string> split(const string& s, const string& w)
{
    string temp{ s };
    // go through each char in temp (or s)
    for (char& ch : temp) {     
        // check if any characters in temp (s) are whitespace defined in w
        for (char white : w) {  
            if (ch == white)
                ch = ' ';       // if so, replace them with a space char ('')
        }
    }

    vector<string> substrings;
    stringstream ss{ temp };

    for (string buffer; ss >> buffer;) {
        substrings.push_back(buffer);
    }
    return substrings;
} 
```

然后你可以做这样的事情来使用它：

```
cout << "Enter a string and substrings will be printed on new lines:\n";
string str;
getline(cin, str);
vector<string> substrings = split(str, ".;,?-'");

cout << "\nSubstrings:\n";
for (string s : substrings)
    cout << s << '\n'; 
```

我知道您不想拆分字符串，但这只是您如何将其他字符视为空格的示例。基本上，我只是用 ' ' 替换这些字符，所以它们确实变成了空格。将其与流一起使用时，效果很好。for 循环可能是您案例的相关代码。

# jsf - 数据库条目的咆哮通知

> ID：15707314
> 
> 赞同：0
> 
> 时间：2013-03-29T16:29:49.437
> 
> 标签：jsf, jsf-2, primefaces, growl

是否可以`<p:growl>`使用 JSF 在数据库表中显示新条目的通知？我希望每当用户向状态表或评论表提交条目时都会触发咆哮通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:41:15.287

DataTable 单元格编辑展示有一些示例，显示用户[在此处编辑表格的咆哮声](http://www.primefaces.org/showcase/ui/datatableCellEditing.jsf)

如果您希望在一个用户添加一些数据时为所有用户显示咆哮声，请查看 primefaces push：

[Primefaces-推送消息展示](http://www.primefaces.org/showcase/push/facesmessage.jsf)

如果您决定进行推送，我建议您只设置一些基本示例，而无需立即将其合并到您当前的应用程序中。

# elasticsearch - 隐藏文档表单搜索直到导入过程结束的弹性搜索方式

> ID：15707321
> 
> 赞同：3
> 
> 时间：2013-03-29T16:30:08.303
> 
> 标签：elasticsearch

我想知道在以下情况下是否有任何方法可以从搜索例程中“隐藏”文档：

1.  导入过程每天运行。
2.  导入过程通过多次调用将文档索引到 Elastic Search`_bulk`
3.  在导入过程正在运行时，我不只是导入了能够通过`_search`.

弹性搜索是否有某种事务支持——在事务提交之前没有索引文档可用？

我预计在一个导入过程中被索引的文档数量会非常多。所以我不能打一个`_bulk`电话。

我在导入过程结束时尝试了`index.refresh_interval`索引设置和调用。`_refresh`但这并没有太大帮助 - 文件在导入过程中变得可搜索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:27:23.803

Elasticsearch 不支持事务。您将需要在客户端处理此功能。如果您只是添加文档（没有更新），您可以将批次 id 与每条记录相关联，并过滤掉批次 id >= 当前运行批次的所有记录。在批次结束时，当您想要提供新记录时，您可以更新过滤器以包含刚刚完成的批次 ID。您可以将此过滤器与别名相关联，这将使开关对搜索者透明。但是，这种方法在更新的情况下不起作用。

# python - 如何为应用程序制作自定义托盘图标？

> ID：15707334
> 
> 赞同：2
> 
> 时间：2013-03-29T16:30:42.293
> 
> 标签：python, icons, system-tray

我需要一个用 python 编写的应用程序的自定义托盘图标。我正在使用来自 ubuntu wiki 的代码。 [https://wiki.ubuntu.com/DesktopExperienceTeam/ApplicationIndicators#Python_version](https://wiki.ubuntu.com/DesktopExperienceTeam/ApplicationIndicators#Python_version)

问题是，我无法从文件创建图像。所以我假设我需要我的图标的名称。诸如 Gtk.STOCK_HOME 或“指标消息”之类的东西。我找不到任何文档如何在系统中为我的图标定义名称。

有什么文档吗？对于 GTK3，我的应用程序中使用了 Python 2.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:27:34.620

终于找到了一个hack：

将图标放在您的主目录中并运行此命令。

```
$ sudo xdg-icon-resource install --novendor --size 16 my-icon.png my-icon-name 
```

不仅仅是从 ubuntu wiki 运行代码。

# visual-studio - VS 2010 或 2012 中当前选择的“解决方案配置”选项存储在哪里？

> ID：15707340
> 
> 赞同：3
> 
> 时间：2013-03-29T16:31:04.960
> 
> 标签：visual-studio, command-line, configuration, build, automation

在 VS 2010 或 VS 2012 中，您可以选择已自定义的“解决方案配置”，它可以定义与`#if` `#elif` `#endif`语法一起使用的局部变量，以通过该下拉列表动态更改代码。同样在该配置中，您可以选择是构建还是部署、目标平台以及每个项目要使用的本地配置。

当您选择一个配置，然后关闭 Visual Studio，然后重新打开 Visual Studio，它会记住您选择的配置，我似乎无法弄清楚，它保存/存储该配置信息的位置，我需要自动化它。

有谁知道：

*   一种使用命令行编译器使用解决方案配置自动化解决方案级别构建的方法
*   Visual Studio 存储当前选择的配置信息的位置
*   或者，理想情况下，两者兼而有之？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-16T01:36:10.547

Visual Studio 实际上将解决方案的构建配置选择存储在解决方案文件本身中。即使“*.suo”文件未检入版本控制，解决方案的构建配置选择也会传播到同步到同一版本控制系统的其他机器。

如果您打开一个“*.sln”文件，您将看到一个名为“GlobalSection(ProjectConfigurationPlatforms)”的部分。如果未检查项目的构建或部署，您将看到如下内容：

> {XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}.Debug|Mixed Platforms.Build.0 = 调试|任何 CPU
> {XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}.Debug|Mixed Platforms.Deploy.0 = 调试|任何 CPU

“.0”字符串表示构建和部署未选中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:41:17.887

> 一种使用命令行编译器使用解决方案配置自动化解决方案级别构建的方法

```
msbuild.exe /p:Configuration="Solution Config" /p:Platform="Solution Platform" 
```

例如，您可以这样做：

```
msbuild.exe /p:Configuration="Release" YourSolution.sln 
```

构建“发布”配置。

> Visual Studio 存储当前选择的配置信息的位置

这存储在（解决方案）文件`.suo`旁边的用户文件中。`.sln`

# r - 如何根据存储在列中的颜色为 ggplot 着色

> ID：15707342
> 
> 赞同：0
> 
> 时间：2013-03-29T16:31:16.613
> 
> 标签：r, ggplot2

我想要一个包含颜色名称的列，并根据此为每个数据点着色。

```
traffic <- structure(list(Sequence = 1:7, Day = c("2013.03.29", "2013.03.28", "2013.03.27", "2013.03.26", "2013.03.25", "2013.03.24", "2013.03.21"), Performance = c("red", "red", "red", "red", "red", "yellow", "red")), .Names = c("Sequence", "Day", "Performance"), class = "data.frame", row.names = c(NA, -7L))

ggplot(traffic, aes(x=Day)) + 
geom_bar(aes(fill=Performance)) + 
scale_fill_manual(values=c("red","yellow", "green")) 
```

但是，在这种情况下，颜色会根据文件中可用的值进行切换（有时三个都可用，有时只有一个或两个）。我试过了

```
scale_fill_manual(values=c("red"="red","yellow"="yellow", "green"="green")) 
```

但这并没有画出任何东西。

# python - 控制 Python for 循环的索引

> ID：15707344
> 
> 赞同：4
> 
> 时间：2013-03-29T16:31:19.437
> 
> 标签：python, for-loop

你如何控制python for循环的索引？（或者你可以吗？或者你应该吗？）

**例如：**

```
for i in range(10):
    print i
    i = i + 1 
```

**产量：**

```
0
1
2
3
4
5
6
7
8
9 
```

**我希望它产生：**

```
0
2
3
4
5
6
7
8
9
10 
```

如果我完全偏离了这个问题，我真的很抱歉，我的大脑现在完全让我失望，解决方案很明显。

* * *

**我为什么要问？**

这与问题无关，但与我为什么需要答案有关。

在我正在编写的 Python 脚本中，我正在做这样的事情：

```
for i in persons:
    for j in persons[-1(len(persons) - i - 1:]:
        if j.name in i.name:
            #remove j.name
        else: 
            #remove i.name

    #For every person (i), iterate trough every other person (j) after person (i)
    #The reason I ask this question is because sometimes I will remove person i.
    #When that happens, the index still increases and jumps over the person after i
    #So I want to decrement the index so I don't skip over that person. 
```

也许我的做法完全错误，也许*我应该使用 while 循环并控制我的索引。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T16:36:21.220

> How do you control the index of a python for loop? (or can you? or should you?)

You *can't / shouldn't* - the loop control variable will be reassigned at the end of each iteration to the next element of whatever it is you are iterating over (so that `i = i + 1` has no effect, since `i` will be reassigned to something different for the next iteration anyway). If you want to control the index like that, you should use a `while`-loop:

```
i = 0
while i < 10:
    print i
    i = i + 1 
```

Although, Python's [`range`](http://docs.python.org/2/library/functions.html#range) function is more flexible than you might realize. For instance, to iterate in steps of 2 you can simply use something like

```
for i in range(0, 10, 2):
    print i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:35:26.547

查看`range` [此处](http://docs.python.org/2/library/functions.html#range)的文档，或从 docstr：

```
range([start,] stop[, step]) -> list of integers

Return a list containing an arithmetic progression of integers.
range(i, j) returns [i, i+1, i+2, ..., j-1]; start (!) defaults to 0.
When step is given, it specifies the increment (or decrement).
For example, range(4) returns [0, 1, 2, 3].  The end point is omitted!
These are exactly the valid indices for a list of 4 elements. 
```

要获得 0-10 的范围，只需执行以下操作：

```
> for i in range(0, 11):
>     print i

> 0
> 1
> 2
> 3
> 4
> 5
> 6
> 7
> 8
> 9
> 10 
```

By the way, it's pointless to do the `i = i + 1`, cause every iteration in the for loop will change i again. Whatever you set it to in the loop, will get overwritten every time the loop starts over.

# javascript - 如何将大括号保持在单行上

> ID：15707346
> 
> 赞同：2
> 
> 时间：2013-03-29T16:31:37.703
> 
> 标签：javascript, netbeans, formatting

当我在 NetBeans 中编写 JavaScript 时，我不希望我的大括号换行。我希望我的代码看起来像这样：

```
var myJSON = JSON.stringify({prop1: v1, prop2: v2}); 
```

不是这个：

```
var myJSON = JSON.stringify({
    prop1: v1
    prop2: v2
}); 
```

但是当我使用 NetBeans 的“重新格式化”功能 (ctrl+shift+F) 时，它会将我的大括号放在新行上。这已经让我死了好几个星期了。

我在 Google ( `Tools->Options->Editor->Language->Braces`) 上找到了一种解决方案，但我在 OS X 上的 NetBeans (7.2.1) 版本没有`Tools->Options`菜单项。相反，我一直在寻找`NetBeans->Preferences`，但无济于事。

# android - 如何在我的应用程序中创建内部文件夹？

> ID：15707347
> 
> 赞同：0
> 
> 时间：2013-03-29T16:31:47.927
> 
> 标签：android, sqlite, android-layout, android-intent, android-camera-intent

如何在我的应用程序中创建内部文件夹以将捕获的图像放入其中，然后获取图像文件夹路径？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:26:43.290

```
path = Environment.getExternalStoragePublicDirectory( Environment.DIRECTORY_MOVIES);

File file = new File(path, "/" + fname); 
```

您可以在“DIRECTORY_MOVIES”或“DIRECTORY_PICTURES”或其他任何内容之后添加您想要的任何文件夹名称 - 它位于设备内部，而不是像 SD 卡上的外部。它只是意味着其他应用程序可以看到这些数据，并且它不是应用程序内部的，并且对其他应用程序或用户不可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:54:33.900

路径 = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MOVIES);

```
 File file = new File(path, "/" + fname); 
```

您可以在“DIRECTORY_MOVIES”或“DIRECTORY_PICTURES”或其他任何内容之后添加您想要的任何文件夹名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T19:26:32.823

只需在相机捕捉按钮上添加此代码

```
File imagesFolder = new File(Environment.getExternalStorageDirectory(), "Your Folder Name");
                imagesFolder.mkdirs(); 
                Calendar cal = Calendar.getInstance();
                File photo = new File(Environment.getExternalStorageDirectory()
                        + "/Your Folder Name", (cal.getTimeInMillis() + ".jpg"));
                mCapturedImagePath = photo.getAbsolutePath();
                Uri uriSavedImage = Uri.fromFile(photo);
                Intent intent = new Intent(
                        android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);
                startActivityForResult(intent, PICK_FROM_CAMERA); 
```

上面的代码创建一个文件夹并将图像保存到您的 SD 卡中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:54:49.147

在 Android 中，您可以在 SD 卡（外部存储）或内部存储器上创建文件夹。

以下命令创建一个文件夹

```
file.mkdir() 
```

因此，当您提供如下文件路径时

```
File file=new File(PATH/FOLDER_NAME); 
```

它将在特定位置创建，但如果您不提供路径，它只会在内部存储器上创建文件夹。这基本上是

```
data/data/YOUR_APPLICATION_PACKAGE/ 
```

# r - 删除一行并重新计算 R^2

> ID：15707351
> 
> 赞同：0
> 
> 时间：2013-03-29T16:32:02.307
> 
> 标签：r, row

我在 R 中编写了以下代码：用户选择一个包含 2 列（V1 和 V2）的文件，其中包含许多行（行数会因输入文件而异）脚本计算 2 个变量之间关系的 rsq。根据输入文件，可以有 10 到 1000 行数据。

我想编写以下代码：代码应该遍历所有行，一次删除/省略/忽略一行，并在缺少该行的情况下计算新的 rsq。因此，例如：

有 10 行数据，总 rsq = 0.97 Step1：从方程中删除第一行数据 再次计算 rsq，但这次是 9 行，得到 rsq = 0.98。
Step 2: 重新添加第 1 行并删除第 2 行 rsq 再次计算 Step 3: 重新添加第 2 行并删除第 3 行 rsq 再次计算

在每个循环之后，“新 rsq”将被放置在已删除行旁边的新列中。

谁能建议如何做到这一点？我在 excel 中对此进行了编码，它运行良好，但很麻烦，因此并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:36:45.430

你想做这样的事情吗？

```
# Make some sample data
set.seed(1095)
data <- data.frame( V1 = 1:10 , V2 = sample.int(5 ,10 ,repl = TRUE ) )

# Use sapply to get r2 removing each row at a time
r2 <- sapply( 1:nrow(data) , function(x) ( cor( data[-x,1] , data[-x,2] ) )^2 )
# Combine into a data frame
newdata <- cbind( data , r2 )
newdata
#      V1 V2        r2
#   1   1  5 0.2526316
#   2   2  3 0.4657601
#   3   3  5 0.3204721
#   4   4  5 0.3691612
#   5   5  1 0.5405405
#   6   6  3 0.3769480
#   7   7  3 0.3840426
#   8   8  2 0.3409425
#   9   9  1 0.2725806
#   10 10  3 0.4986702 
```

# ios - 我的 UITableView 中的自定义标题视图在底部绘制了额外的线

> ID：15707354
> 
> 赞同：2
> 
> 时间：2013-03-29T16:32:06.540
> 
> 标签：ios, uitableview

![自定义标头在 InterfaceBuilder 中看起来不错。](../Images/3506f44fc9ebb874677f50bde789e884.png)![在此处输入图像描述](../Images/94582df87ba1cd5076c50e73f54810b5.png)

我的 UITableView 中的自定义标题有问题。

在 InterfaceBuilder 中，我正在创建一个带有视图的 XIB 文件，然后将其子类化为 UITableViewHeaderFooterView。我正在添加一些子视图。没什么特别的。

在我的 viewDidLoad 例程中，我正在调用“registerNib:forHeaderFooterViewReuseIdentifier”。

然后，在我的委托方法 tableView:viewForHeaderInSection 中，我调用：

```
 UITableViewHeaderFooterView* theView = [self.tableView dequeueReusableHeaderFooterViewWithIdentifier:@"header"]; 
```

奇怪的是，我在标题的底部边缘得到了一些额外的图形行。它实际上看起来像偷看的“正常”标题视图。我不知道如何解决这个问题。我检查了标题视图的大小，与节标题的高度。我还添加了代码来强制节标题的大小与视图的高度相同。然而，我仍然无法解释这一点。

需要注意的是，在“模拟器 - 坏”图像中，我的自定义标题和红色区域之间的灰色。红色区域是我的第一个单元格。因此，这些灰线不在我的自定义标题中，也不在我的第一个单元格中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:50:15.530

您是否在`- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section`代表呼叫中返回了正确的高度？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:52:46.523

您是否指定了节标题的高度？像这样：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    return 40.0;  // or whatever your header's height is
} 
```

# javascript - 使用 AJAX 发送 JavaScript 变量

> ID：15707355
> 
> 赞同：0
> 
> 时间：2013-03-29T16:32:11.833
> 
> 标签：javascript, ajax

有人可以指出我如何使用 AJAX 发送 JavaScript 变量。

JavaScript：

```
var d=new Date();
document.write(d); 
```

阿贾克斯：

```
$.ajax
        ({
          type: 'POST',
          url: 'save.php',
          cache: false,
          data: { document.write(d); // Just for example
}, 
```

其他一切都很好。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:37:05.617

您不能发送“变量”。您只能发送字符串（或可以变成字符串的东西）。（您可以将这些字符串存储在变量中）。

日期对象（您存储在 中`d`）可以转换为字符串，因此您可以发送它。

The return value of `document.write()` will always be `undefined`, so it doesn't make much sense to send that.

You appear to be using jQuery. The `data` property expects a standard JavaScript object. An object consists of a bunch of key/value pairs. You need to provide a key for your value.

```
data: { date: d } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:36:33.503

您可以将值传递给您想要的任何参数名称，例如此示例中的日期参数：

```
$.ajax({
    type: 'POST',
    url: 'save.php',
    cache: false,
    data: { date: new Date()}
}); 
```

或者你可以像这样使用变量：

```
 var d = new Date();
    $.ajax({
        type: 'POST',
        url: 'save.php',
        cache: false,
        data: { date: d}
    }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T16:36:45.913

使用 JSON.stringify() 将您的对象转换为 JSON 格式：

```
$.ajax
    ({
      type: 'POST',
      url: 'save.php',
      cache: false,
      data: JSON.stringify(d)
}, 
```

当然，在服务器端，您必须使用 JSON 解析器来解释数据。

# php - PHP fsocketopen 端口 25 与 mail()

> ID：15707360
> 
> 赞同：0
> 
> 时间：2013-03-29T16:32:28.877
> 
> 标签：php, email

我正在研究用于从 PHP 脚本发送电子邮件的两个类。一种使用`fsocketopen`25 端口，另一种使用 PHP`mail()`发送。我了解`fsocketopen`我可以根据服务器响应进行更好的错误处理，除此之外，每种方法的优缺点是什么？或者，如果有人能指出我的文档——我一直无法找到有关利弊的信息——那同样有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:52:13.320

`mail`为您做所有事情，`fsocketopen`要求您编写电子邮件的所有标题。如果您对手动操作感到满意，这`fsocketopen`是一种不错的方法。他们都有自己的权衡..`mail`很容易，但限制性更强，`fsocketopen`更难使用，但允许你做任何你想做的事。

# javascript - JavaScript jQuery 触发器每秒点击一次

> ID：15707363
> 
> 赞同：1
> 
> 时间：2013-03-29T16:32:49.777
> 
> 标签：javascript, jquery, events

我有一个内联 onclick 事件的按钮列表

```
 <button id='someId' class='clicker' onclick='doSomething(someId)'>Clicky<button>
 <button id='someId' class='clicker' onclick='doSomething(someId)'>Clicky<button>
 <button id='someId' class='clicker' onclick='doSomething(someId)'>Clicky<button>
 <button id='someId' class='clicker' onclick='doSomething(someId)'>Clicky<button> 
```

按钮的 id 与传递给 doSomething 函数的变量相同。

有没有办法，使用 jQuery 为每个按钮触发 onclick 事件，点击之间的延迟为 200 毫秒？

就像是

```
$('.clicker').each(function(){
    // wait 200 ms
    // then fire event
}); 
```

上面的函数只是等待 200 毫秒然后触发所有事件，而不是将它们间隔开。有什么办法可以增加事件之间的延迟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:35:41.053

```
$('.clicker').each(function (ind, elem) {
    window.setTimeout(function () {
        $(elem).click()
    }, 200 * ind);
}); 
```

# java - Java - 在第一个值实例处拆分数组

> ID：15707365
> 
> 赞同：1
> 
> 时间：2013-03-29T16:33:12.203
> 
> 标签：java, arrays

下面的方法接收`byte[] b`不确定长度。它包含要打印到控制台样式窗口的字符串。我想`b`在第一个换行符处拆分，以便该字符包含在第一个数组中。然而，目前这会抛出一个`ArrayOutOfBoundsError`, 因为`stringBytes`和`extraBytes`被声明为零大小。我怎样才能解决这个问题？

```
byte[] stringBytes = {};
byte[] extraBytes = {};
int i = 0;

while(i < b.length) {
    stringBytes[i] = b[i];
    if(b[i] == '\n' && i + 1 != b.length) {
        while(i < b.length) {
            extraBytes[i - stringBytes.length] = b[i++];
        }

        break;
    }

    i++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:41:50.270

试试这个：

```
byte[] stringBytes;
byte[] extraBytes;
int i = 0;

while(i < b.length) {
    if(b[i] == '\n' && i + 1 != b.length) {
        break;
    }

    i++;
}
stringBytes = java.util.Arrays.copyOf(b, i+1);
extraBytes = java.util.Arrays.copyOfRange(b, i+1, b.length - 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:36:05.620

我宁愿`String`从字节中构建一个并使用字符串 API。

但是，如果您确实需要执行您可以声明的字节操作，并且`stringBytes`您可以根据需要添加任意数量的值，而无需知道它们的大小。`extraBytes``List<Byte>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:38:12.943

您可以使用 a[`ByteArrayOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html)作为轻量级可扩展字节数组：

*   要添加一个字节，请使用该`write`方法。
*   要获取到目前为止已写入的字节，请使用该`toByteArray`方法。

例如：

```
ByteArrayOutputStream stringBytes = new ByteArrayOutputStream();
ByteArrayOutputStream extraBytes = new ByteArrayOutputStream();
int i = 0;

while(i < b.length) {
    stringBytes.write(b[i]);
    if(b[i] == '\n' && i + 1 != b.length) {
        i++;
        extraBytes.write(b, i, stringBytes.length - i);
        break;
    }
    i++;
} 
```

# jquery - 使用 JSON 请求返回的数据填充选项列表

> ID：15707367
> 
> 赞同：0
> 
> 时间：2013-03-29T16:33:23.103
> 
> 标签：jquery, json

我有一个来自服务器的 JSON 响应，响应是一个包含三列的列表对象。但是，要填写选择选项列表，我只需要使用两个。我能够在客户端上接收数据，但是我无法填写选择选项列表。

**jQuery**

```
$("select#offenceCatId").change(function(){

    $.ajax({
        type:'GET',
        url:'getCrimeTypeList.htm',
        data:{crimeCatId: $(this).val()},

        headers: {
            Accept: 'application/json'
        },
        dataType: 'json',
        success:function(data){
            var crimeType = JSON.stringify(data);
            var options = '';

            for (var i = 0; i < crimeType.length; i++) {
                options += '<option value="' + crimeType.crimeTypeId[i] + '">' + crimeType.crimeTypeDesc[i] + '</option>';
            }
            $("select#offenceTypeId").html(options);
        }
    });
}); 
```

**JSON数据**

[{"crimeTypeDesc":"煽动谋杀","crimeCatId":4,"crimeTypeId":39},{"crimeTypeDesc":"性和非性侵犯","crimeCatId":4,"crimeTypeId":40} ,{"crimeTypeDesc":"Pornography","crimeCatId":4,"crimeTypeId":41},{"crimeTypeDesc":"Censorship","crimeCatId":4,"crimeTypeId":42},{"crimeTypeDesc": "法定强奸","crimeCatId":4,"crimeTypeId":43},{"crimeTypeDesc":"艾滋病毒的犯罪传播","crimeCatId":4,"crimeTypeId":44},{"crimeTypeDesc":"通奸","crimeCatId":4,"crimeTypeId":45}]

我只需要用crimeTypeDesc 和crimeTypeId 填写选择选项列表

**错误**类型错误 ：crimeType.crimeTypeId 未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:38:09.233

如果您要取回 JSON 数据，则不需要该`stringify`调用。您应该能够用以下内容替换您的`success`方法：

```
success:function(crimes){       
    var options = '';

    for (var i = 0; i < crimes.length; i++) {
        var crime = crimes[i];
        options += '<option value="' + crime.crimeTypeId + '">' + crime.crimeTypeDesc + '</option>';
    }
    $("select#offenceTypeId").html(options);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:45:08.473

You do not need to stringify the json object as that will flatten the object and you will no longer be able to use dot notation to access it's properties. Also, your other problem is the way you are trying to access these values. You say, crimeType.crimeTypeId[i] but you need to use crimeType[i].crimeTypeId as the index refers to which object within crimeType you are referring not which id within the crypeTypeIds you want (there is only one anyway) Here is a fiddle with the working script minus the ajax call. all you need to do is replace what you have in your success callback with what I have in the fiddle minus the json object. You can adjust it after that to your needs. I left a console log because I didn't have your html.

fiddle [http://jsfiddle.net/XJsH2/](http://jsfiddle.net/XJsH2/)

```
$(document).ready(function(){
    var crimeType = [{"crimeTypeDesc":"Incitement To Murder","crimeCatId":4,"crimeTypeId":39},{"crimeTypeDesc":"Sexual and Non Sexual Assults","crimeCatId":4,"crimeTypeId":40},{"crimeTypeDesc":"Pornography","crimeCatId":4,"crimeTypeId":41},{"crimeTypeDesc":"Censorship","crimeCatId":4,"crimeTypeId":42},{"crimeTypeDesc":"Statutory Rape","crimeCatId":4,"crimeTypeId":43},{"crimeTypeDesc":"Criminal Transmission Of HIV","crimeCatId":4,"crimeTypeId":44},{"crimeTypeDesc":"Adultery","crimeCatId":4,"crimeTypeId":45}];
    var options = '';
    for (var i = 0; i < crimeType.length; i++) {
    options += '<option value="' + crimeType[i].crimeTypeId + '">' + crimeType[i].crimeTypeDesc + '</option>';
    }
    console.log(options);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T16:47:04.407

You dont need to stringify the data, because the function returns a JSON object. jQuery has a for each funktion, which you can use to go through arrays.

```
success: function(data)
{
  var options = "";
  $.each(data, function(crime)
  {
    options += '<option value="' + crime.crimeTypeId + '">' + crime.crimeTypeDesc + '</option>';
  });
  $("select#offenceTypeId").html(options);
} 
```

# ruby-on-rails - Vim 糟糕的 erb 缩进

> ID：15707369
> 
> 赞同：0
> 
> 时间：2013-03-29T16:33:26.160
> 
> 标签：ruby-on-rails, vim, eruby

当我尝试通过 .erb 缩进我的文件时`gg=G`，我得到了这个：

```
<li>
<%= gravatar_for user, size: 52 %>
<%= link_to user.name, user %>
<% if current_user.admin? && !current_user?(user) %>
   | <%= link_to "delete", user, method: :delete, data: { confirm: "You sure?" } %>
   <% end %>
   </li> 
```

我试过使用 vim-ruby，不同的 eruby.vim 文件，但无济于事。有没有人有一个真正有效的 eruby.vim 缩进文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:51:51.157

我尝试过这个。如果删除`|`，或`|`作为单行放置，一切正常。

我建议你遵循这种做法，在与 eruby 代码混合时使其成为单行，或者根本不使用`|`。这样的东西最好是CSS边框。

# html - 添加 Facebook 赞按钮

> ID：15707374
> 
> 赞同：1
> 
> 时间：2013-03-29T16:33:37.483
> 
> 标签：html, facebook-like, blogs

我正在尝试在我的帖子标题下添加 facebook like 按钮。我试图把它放在

```
<header class='entry-header'>
<b:if cond='data:post.title'>
<h1 class='entry-title' itemprop='name'>
<b:if cond='data:post.link'>
<a expr:href='data:post.link' expr:title='&quot;Permalink to &quot; + data:post.title' rel='bookmark'><data:post.title/></a> 
```

在这行代码之上

```
.post_content { overflow:hidden; } 
```

上面和下面

```
 <data:post.body/> 
```

但 facebook like 按钮没有出现。如果我把它放在

```
<header class='entry-header'> 
```

在这之前

```
 <b:if cond='data:post.title'> 
```

它出现在我不想要的帖子标题的位置。我应该把 facebook 之类的按钮代码放在哪里，以便它出现在通知的位置

![在此处输入图像描述](../Images/412412672c6a398e27cea2f9fe0eabe4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:37:36.823

看看这个：[https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

也许你可以在那里找到一些东西。

使用 HTML5：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/sl_SI/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:53:35.013

我自己找到了。我在此代码上方发布了代码。

```
 <data:post.body/> 
```

# java - Angular.js 将对象从 jsp 传递到应用程序范围

> ID：15707381
> 
> 赞同：0
> 
> 时间：2013-03-29T16:33:53.960
> 
> 标签：java, jsp, angularjs

我想知道是否可以使用 Gson（可能）从我的应用程序所在的 JSP 页面将对象传递到我的应用程序范围？（以一种很好的方式）

我想避免使用 AJAX 请求来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:52:19.347

这听起来像是在 JavaScript 中内联数据以避免发出初始 AJAX 请求的常见模式。

在您的 JSP 中，您可以将 JSON 作为数组或对象哈希数据写入 Angular 服务模块的主体。服务模块只会返回这个内联数据，然后您可以通过服务注入将其提供给 Angular 应用程序的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-12T05:34:11.420

正如 Will 所建议的，让 JSP 变量成为标记的一部分，服务器将替换相关部分。伪代码如下：

```
<%String contextPath=request.getContextPath();%>

<script src="<%=contextPath%>/static/js/lib/angular.v1.2.16.min.js"></script>    

<script>
app.service('contextService', [function() {

    this.getResourcePath = function() {
        return '<%=contextPath%>/resources/' ;
    };
}]);
</script> 
```

# windows-7 - Obtaining wchar.h and other header files

> ID：15707383
> 
> 赞同：0
> 
> 时间：2013-03-28T20:29:40.003
> 
> 标签：windows-7, header, visual-studio-2012

I've downloaded Visual Studio 2012 Pro from dreamspark and was all happy about it, but it looks like I'm missing the `wchar.h` file (isn't it kind of essential to Windows applications? Why didn't I get one?).

I feel stupid because I couldn't simply Google the solution (no magic "to get `wchar.h` download this SDK and do this", but some obscure problems with SP1 version)

Windows 7.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:24:31.843

You may wish to visit this link: [missing header file on a new installation of visual studio 2012](https://stackoverflow.com/questions/12770400/missing-header-file-on-a-new-installation-of-visual-studio-2012)

According to that link, there is a bug and there is a workaround found at: [http://connect.microsoft.com/VisualStudio/feedback/details/762015/include-and-libraries-directories-not-setup-correctly-for-c-if-vs2010-already-installed](http://connect.microsoft.com/VisualStudio/feedback/details/762015/include-and-libraries-directories-not-setup-correctly-for-c-if-vs2010-already-installed)

# ajax - 来自 HTML 页面的跨域 Ajax 调用（不能使用任何代理）

> ID：15707391
> 
> 赞同：1
> 
> 时间：2013-03-29T16:34:13.813
> 
> 标签：ajax, cross-domain

我试图使用 ajax post call as 从另一台服务器获取一些信息。

```
$.ajax({
                    type: 'POST',
                    url: testURL,
                    data: data,
                    //dataType: 'jsonp',
                    dataType: "script",                        
                    success: function (data) {
                        alert("Successfully posted (Test) : " + data);
                    },
                    error: function (ts) {
                        alert("Inside Error : " + ts.responseText);
                    }
                }); 
```

这里 testURL 是我发布数据的 URL（跨域请求只有在数据类型是 jsonp 或脚本时才可能），并且它假设返回 text/html 数据（提琴手所说的将是数据的返回类型） . 我不确定我是否可以使用任何代理，因为页面是普通的 HTML 页面。没有任何方法可以将 [data] 作为文本获取（至于现在成功预期 JASONP 数据和警报（“成功发布（测试）：” + 数据）；仅将数据显示为未定义）。我无法对 API 或远程服务器上的任何内容进行任何更改。我在这里先向您的帮助表示感谢。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:39:33.017

如果没有代理，您将无法做到这一点。如果它在 Windows 框中，您可以创建一个 COM 对象来调用该服务器，并从您的 JavaScript 调用该 COM。

更新：

好吧，看来您可以使用 JSONP

[带有 jquery 的 jsonp](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)

# php - 如何在php中获取动态生成的表单的POST值

> ID：15707392
> 
> 赞同：0
> 
> 时间：2013-03-29T16:34:14.440
> 
> 标签：php

这是我动态生成的表单，允许用户输入学生的分数。我的挑战是如何捕获特定的 subjectCode 及其分数，因为我使用 subjectcode 存储在数据库中。

```
<?php
$attributes=array('class'=>'','id'=>'');
echo form_open('scoreInsertion/insertScores',$attributes);
echo "<table>";
echo "<tr>";
echo "<td>";?>
<label for="admNo>">Admission Number<span class="required">*</span></label>
<?php echo form_error('admNo');
echo "</td>";
echo "<td>";?>
<input type="text" name="admNo" id="admNo"  value="<?php echo set_value('admNo')?>"   />
<?php echo "</tr>";
echo "<tr>";
echo "<td>";    
?>
<label for="studentName>">Student Name<span class="required">*</span></label>
<?php echo form_error('studentName');
echo "</td>";
echo "<td>";?>
<input type="text" name="studentName" id="studentName"  value="<?php echo $studentName?>"   />
<?php echo "</tr>";
echo "<tr></tr>";
echo "<tr>";
echo "<td>";
?>
<label for="examCategory">Exam Category<span class="required">*</span></label>
<!--<tr><td><?php echo form_error('examCategory')?></td></tr>-->
<td>
<select name="examCategory">
<option value="">--Select Category--</option>
<?php
print_r($exams);
if(isset($exams) && is_array($exams)){
    foreach($exams as $exam){
        $examId=$exam->id;
        $examName=$exam->category;
        echo "<option value='$examId'>$examName</option>";
    }
}
?>
</select></td><?php
echo "<tr></tr>";
echo "<tr>";
echo "<td>";
?>
<label for="term">Academic Term<span class="required">*</span></label>
<!--<tr><td><?php echo form_error('examCategory')?></td></tr>-->
<td>
<select name="term">
<option value="">--Academic Term--</option>
<?php
if(isset($terms) && is_array($terms)){
    foreach($terms as $term){
        $termId=$term->termId;
        $termName=$term->name;
        echo "<option value='$termId'>$termName</option>";
    }
}
?>
</select></td>

<?php
echo "<tr>";
//loop through the subjects array and display them on the view 
if(isset($subjects) && is_array($subjects)){
    foreach($subjects as $subject){
        $subjectName=$subject->subName;
        $subjectCode=$subject->subCode;
        echo "<tr>";
        echo "<tr></tr>";
        echo "<td>";?>
        <label for="<?php echo $subjectName?>"><?php echo $subjectName;?><span class="required">*</span></label>
        <?php echo form_error($subjectName);
        echo "</td>";
        echo "<td>";?>
        <input type="text" name="<?php echo $subjectCode?>" id="<?php echo $subjectName?>"  value="<?php echo set_value($subjectCode)?>"   />
        <?php echo "</tr>";
        }   
}
?>
<?php echo "<tr>";echo "<td>";
echo form_submit('submit','Submit'); 
echo "</td>";
echo "</tr>";
?>
</p>
<?php
echo "</table>";
echo form_close();
?> 
```

用于处理上述 POST 详细信息的 PHP 脚本如下：

```
function insertScores(){
        $admNo=$this->input->post('admNo');
        $term=$this->input->post('term');
        //get the post variables from the Form
        $posted = $this->input->post();
        $x = array_keys($posted);
        foreach($x as $y) {
            echo $y ." = ". $_POST[$y]."<br/>";
            echo "<br>";
            //write the sql 
            $form_data=array(
            'admNo' =>$admNo,
            'subCode'=>$y,
            'termId'=>$term,
            'score'=>$_POST[$y]                     
            );
            print_r($form_data);
            $this->SaveForm($form_data);
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:45:15.777

如果确实如此，您可以为`name`属性设置一个特定的前缀，然后在您的键中查找以该前缀开头的`$_POST`键。像这样的东西：

```
<input type="text"
       name="subject_<?php echo $subjectCode?>"
       id="<?php echo $subjectName?>"
       value="<?php echo set_value($subjectCode)?>"   /> 
```

`$_POST`然后在数组 中搜索它。

```
$subjectCode = null;
foreach (array_keys($_POST) as $index) {
    if (strpos($index, 'subject_') === 0) { // you found the needed element            
        // get its value and save it in a variable
        $subjectCode = $_POST[$index];
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:09:43.617

这段代码解决了我的问题，我在数据库中获取`subCode`使用`admNo`然后与`POST`名称进行比较。

```
$subjects=$this->subjectModel->get_subjects();
foreach($subjects as $subject){
    $subCode= $subject->subCode;
    foreach($_POST as $key => $value){
        //print_r($key);
        //print_r($value);
        $form_data=array();
        if($key == $subCode){
            //echo $subCode. "=". $value;
            //write the sql for insertion into the database
            $form_data = array(
            'admNo'=>$admNo,
            'subCode'=>$subCode,
            'termId'=>$term,
            'formId'=>$formstudy,
            'score'=>$value,
            'year'=>$year    

            );
            $this->SaveForm($form_data);    

        }
    }
} 
```

# asp.net - 如何设置asp.net用户控件的选中状态'复选框从一个到另一个

> ID：15707397
> 
> 赞同：0
> 
> 时间：2013-03-29T16:34:42.907
> 
> 标签：asp.net

我有一个 asp.net 网页，我在该网页上加载了一个用户控件 (UC) 十次。第一个用户控件将用于收集有关主要员工的数据以及有关其家属的其余数据。将有“下一个”和“上一个”导航按钮从一个 UC 移动到另一个。我在 UC 上有几个 DevExpress 复选框。如果用户在第一页上选中其中任何一个，然后单击“下一步”按钮导航到下一个 UC，我希望相关 UC 中的复选框也被选中。我试图在后面代码中依赖控件的页面加载事件中做到这一点。代码如下。但它不起作用。看起来我必须使用javascript来做到这一点。请让我知道该怎么做。

代码隐藏：

```
dependentCheckbox.checked = mainEmployeeCheckbox.checked; 
```

谢谢​</p>

# android - 将 Azpen 平板电脑连接到 Linux PC 时出现问题

> ID：15707400
> 
> 赞同：1
> 
> 时间：2013-03-29T16:35:10.070
> 
> 标签：android

我购买了由一家名为 Azpen 的公司生产的新平板电脑。该设备的产品页面是[http://www.azpenpc.com/product_t64.html](http://www.azpenpc.com/product_t64.html) 我正在尝试为其开发应用程序，并且我是初学者。我将设备连接到我的 Linux 机器（运行 CentOS 5.3），但有些东西不能正常工作。我无法通过“ant debug install”安装简单的 HelloWorld 程序。这是一些 adb 命令的输出，我以普通用户身份运行，然后以 root 身份运行：

```
# adb usb
error: insufficient permissions for device
# adb devices
List of devices attached 
????????????    no permissions 
```

我做了'adb kill-server; adb start-server' 以 root 身份，但这没有帮助。

有谁知道问题是什么？我自己的下一次调试尝试是在 /etc/udev/rules.d 中创建一个新的规则文件，但我不知道 Azpen 设备使用什么“idVendor”。有人能帮忙吗？

附言。我也在[http://forums.androidcentral.com上发布了这个](http://forums.androidcentral.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:31:25.333

我运行“dmesg”并在输出中搜索“idVendor”并发现：

```
usb 2-1.2: New USB device found, idVendor=18d1, idProduct=0003 
```

所以我将此行添加到 /etc/udev/rules.d/51-android.rules

```
SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", MODE="0666", GROUP="plugdev" 
```

然后以root身份重新启动adb：'adb kill-server; adb start-server' 并且它起作用了。

# android - 重叠视图的触摸监听器

> ID：15707402
> 
> 赞同：0
> 
> 时间：2013-03-29T16:35:13.773
> 
> 标签：android, view, touch, motion

我想知道是否有可能让视图彼此叠放并为它们分开监听器。具体来说，我有两个完全重叠的视图，并且尺寸完全相同，我正在尝试为 view_one 实现一个运动事件 OnTouchListener，为 view_two 实现一个 OnLongPressListener。但是，view_one 上的 OnTouchListener 似乎阻止了 view_one 的 OnLongClickListener。

代码的基本目标是让多个触摸交互做不同的事情：

1.  短按做一件事
2.  长按做另一个
3.  垂直方向的触摸拖动和释放是另一回事
4.  在水平方向上触摸拖动另一个

等等，尽可能多的不同的东西。

也许我应该只拥有一个用于触摸而不是两个的 View，并且有一种方法可以将触摸和运动事件分开。我知道如何区分短按和长按事件，但运动事件会搞砸。

我确信有更好的方法来做到这一点。非常感谢任何提示或建议。有没有办法限制滑动动作的长度和触摸持续时间，以帮助确定要采取的行动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:52:51.447

要回答您问题的第一部分 - 如果触摸侦听器在到达 view_two （下方视图）之前正在使用该事件，这可能是因为您正在使用[onTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)中的触摸事件。

```
//Returns true if the listener has consumed the event, false otherwise.
public abstract boolean onTouch (View v, MotionEvent event) 
```

你总是在这个方法中返回 false 吗？如果不是，则有些事件可能不会传播到层次结构中的下一个视图。

至于您的第二个问题 - 是的，您当然可以创建一个[onTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)来处理所有这些事件。这是一个短按和长按的示例（与有多少运动无关）：

```
private MotionEvent downEvent;

public abstract boolean onTouch (View v, MotionEvent event){
    if (downEvent == null && event.getAction == MotionEvent.ACTION_DOWN){
        downEvent = event;
        return false;
    }

    if (event.getAction == MotionEvent.ACTION_UP){
        if (event.getDownTime() > LONG_PRESS_THRESHOLD){
            ... do something ...
        } else if (event.getDownTime() > SHORT_PRESS_THRESHOLD){
            ... do something else ...
        } 
    }
} 
```

正如您可以想象的那样，确定您的向下事件和当前事件之间的 delta X / delta Y 是否满足您为事件 3 和 4 确定的阈值只需要更多的努力线。

# xcode4 - 配置 CMake 以使用 Xcode 构建

> ID：15707406
> 
> 赞同：0
> 
> 时间：2013-03-29T16:35:29.157
> 
> 标签：xcode4, cmake

我参与了为 Windows、Linux 和 Mac OS X 构建的大型跨平台项目的开发。该软件的构建是使用 CMake 配置的。

CMake 脚本旨在为 Windows 上的 Visual Studio 成功配置，Makefile 目前用于在 Linux 和 Mac OS X 上构建。

到目前为止，该项目的几乎所有开发工作都是由在 Windows 上工作的人完成的，还有一些在 Linux 上的工作。我有兴趣在运行 Mac OS X 10.7 的 Macintosh 上使用 Xcode 4.6 为项目进行开发，但我遇到了问题，因为 CMake 文件似乎没有为该开发环境正确配置。

对于非 Windows 平台，已经编写了许多自定义命令来尝试配置诸如复制所需文件或设置某些操作所需的环境，例如在构建过程中运行单元测试。

似乎因为 Xcode 是一个类似于 Visual Studio 的集成开发环境，所以具有构建配置的概念，并且当软件在包含该配置概念的目录路径中获取构建输出文件时（即许多构建文件最终以以 Debug、Release 等文件夹结尾的路径）

CMake 应该支持处理此构建配置概念，并且使用的机制适用于 Visual Studio。这似乎不适用于 Xcode。例如，我们的构建工程师设计了 CMake 脚本，因此对于 Windows，许多路径和诸如此类的东西都是使用 CMAKE_CFG_INTDIR 值配置的，这有助于限定构建配置。

CMAKE_CFG_INTDIR 的使用不适用于 Xcode，因为 Macintosh 的脚本是用 Makefiles 编写的，而 Makefiles 并没有真正的构建配置概念。在用于配置事物的自定义命令中使用 CMAKE_CFG_INTDIR 在 Macintosh 上失败，因为该值解析为 $(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME)。运行自定义命令时未定义此值，因此未正确设置值并且构建操作失败。

目前还不清楚需要什么才能使系统成功配置 Xcode。到目前为止，在 Internet 上搜索并没有深入了解应该使用什么来确保构建配置能够成功。有哪些可用资源有助于弄清楚如何配置该项目以使用 Xcode 构建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:04:38.820

如果您正在谈论使用 设置的自定义命令[`add_custom_command`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_custom_command "CMake v2.8.10 文档")，那么您应该更喜欢“生成器表达式”以避免有关每个配置的构建目录的问题。从文档中`add_custom_command`：

> 参数 to`COMMAND`可以使用语法为“”的“生成器表达式” `$<...>`。在构建系统生成期间评估生成器表达式以生成特定于每个构建配置的信息。

例如，名为“MyExe”的目标的构建目录可以称为`$<TARGET_FILE_DIR:MyExe>`

生成器表达式在一些 CMake 命令中可用，而不仅仅是`add_custom_command`.

如果您有更具体的问题，可能值得进一步询问相关详细信息。

# html - CSS下拉导航更改悬停颜色

> ID：15707408
> 
> 赞同：0
> 
> 时间：2013-03-29T16:35:38.410
> 
> 标签：html, css

我有以下导航菜单的 CSS

```
ul#css3menu_top,ul#css3menu_top ul {
    margin:0;
    list-style:none;
    padding:0;
}
ul#css3menu_top,ul#css3menu_top .submenu {
    background-color:#EEEEEE;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    border-radius:5px;
}
ul#css3menu_top .submenu {
    visibility:hidden;
    position:absolute;
    left:0;
    top:100%;
    opacity:0;
    -moz-transition:all 0.5s;
    -webkit-transition:opacity 0.5s;
    -o-transition:opacity 0.5s;
    -moz-box-shadow:3.5px 3.5px 5px #000000;
    -webkit-box-shadow:3.5px 3.5px 5px #000000;
    box-shadow:3.5px 3.5px 5px #000000;
    float:left;
    background-color:#EEEEEE;
    border-width:2px;
    border-radius:6px;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-color:#FFF;
    padding:0 10px 10px;
}
ul#css3menu_top li:hover>.submenu {
    visibility:visible;
    opacity:1;
}
ul#css3menu_top li {
    position:relative;
    display:block;
    white-space:nowrap;
    font-size:0;
    float:left;
}
ul#css3menu_top li:hover {
    z-index:1;
}
ul#css3menu_top ul .submenu {
    z-index:2;
    position:absolute;
    left:100%;
    top:0;
}
ul#css3menu_top {
    font-size:0;
    width:100%;
    z-index:999;
    position:relative;
    display:inline-block;
    zoom:1;
    padding:0 0%;
    margin:0 0%;
    *display:inline;
}
ul#css3menu_top .column {
    float:left;
}
* html ul#css3menu_top li a{
    display:inline-block;
}
ul#css3menu_top>li {
    margin:0;
    width:17%;
}
ul#css3menu_top li.toplast{
    width:15%;
}
ul#css3menu_top a:active, ul#css3menu_top a:focus {
    outline-style:none;
}
ul#css3menu_top a{
    display:block;
    vertical-align:middle;
    text-align:left;
    text-decoration:none;
    font:bold 14px Calibri;
    color:#EEEEEE;
    text-shadow:#FFF 0 0 1px;
    cursor:pointer;
    padding:6px 15px 6px 3px;
    background-color:#666666;
    background-image:url("mainbk.png");
    background-repeat:repeat;
    background-position:0 0;
    border-width:0 0 0 1px;
    border-style:solid;
    border-color:#c0c0c0;
}
ul#css3menu_top ul li {
    float:none;
    margin:10px 0 0;
}
ul#css3menu_top ul a {
    text-align:left;
    padding:4px;
    background-color:#EEEEEE;
    background-image:none;
    border-width:0;
    border-radius:0px;
    -moz-border-radius:0px;
    -webkit-border-radius:0px;
    font:14px Calibri;
    color:#666666;
    text-decoration:none;
}
ul#css3menu_top li:hover>a,ul#css3menu_top li a.pressed {
    background-color:#EEEEEE;
    color:#666666;
    background-position:0 100px;
    text-decoration:none;
}
ul#css3menu_top img {
    border:none;
    vertical-align:middle;
    margin-right:6px;
}
ul#css3menu_top span {
    display:block;
    overflow:visible;
    background-position:right center;
    background-repeat:no-repeat;
    padding-right:0px;
}
ul#css3menu_top ul span {
    padding-right:8px;
}
ul#css3menu_top ul li:hover>a,ul#css3menu_top ul li a.pressed {
    background-color:#EEEEEE;
    background-image:none;
    color:#666666;
    text-decoration:none;
}
ul#css3menu_top li.topfirst>a {
    padding-left: 7px;
    border-width:0;
    border-radius:4px 0 0 4px;
    -moz-border-radius:4px 0 0 4px;
    -webkit-border-radius:4px;
    -webkit-border-top-right-radius:0;
    -webkit-border-bottom-right-radius:0;
}
ul#css3menu_top li.toplast>a {
    padding-right: 7px;
    border-radius:0 4px 4px 0;
    -moz-border-radius:0 4px 4px 0;
    -webkit-border-radius:0;
    -webkit-border-top-right-radius:4px;
    -webkit-border-bottom-right-radius:4px;
}

@media only screen and (max-width:900px),only screen and (max-device-width:900px){
ul#css3menu_top>li{width:33%;}ul#css3menu_top>li:nth-child(3){width:34%}ul#css3menu_top>li:nth-child(n+4){width:33%;}ul#css3menu_top>li:nth-child(6){width:34%}}
@media only screen and (max-width:600px),only screen and (max-device-width:600px){
ul#css3menu_top>li{width:50%;}ul#css3menu_top>li:nth-child(n+3){width:50%;}ul#css3menu_top>li:nth-child(n+5){width:50%;}}
@media only screen and (max-width:450px),only screen and (max-device-width:450px){
ul#css3menu_top>li{width:100%;}ul#css3menu_top>li:nth-child(n+2){width:100%;}ul#css3menu_top>li:nth-child(n+3){width:100%;}ul#css3menu_top>li:nth-child(n+4){width:100%;}ul#css3menu_top>li:nth-child(n+6){width:100%;}}

/*opera hack*/
@media only screen and (min-width:900px){
        html>/**/body noindex:-o-prefocus, html>/**/body  ul#css3menu_top{
            display:table;
        }
        html>/**/body noindex:-o-prefocus, html>/**/body  ul#css3menu_top>li{
            width:auto;
            float:none;
            display:table-cell;
        }
        html>/**/body noindex:-o-prefocus, html>/**/body  ul#css3menu_top li.toplast{
            width:auto;
            display:table-cell;
        }

} 
```

当我将鼠标悬停在子菜单上时，我无法弄清楚如何更改文本颜色

这是它的工作原理

[http://jsfiddle.net/n3FAq/](http://jsfiddle.net/n3FAq/)

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:38:33.790

尝试这个

```
ul#css3menu_top ul li a:hover {
    color: #c00;
} 
```

[**演示**](http://jsfiddle.net/n3FAq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:40:12.880

子菜单中的链接没有悬停规则。

```
ul#css3menu_top .submenu a:hover {
    color: red;
} 
```

[***JSFiddle***](http://jsfiddle.net/n3FAq/2/)

# ssl - 开发工具未显示通过 javascript 加载的不安全内容

> ID：15707412
> 
> 赞同：1
> 
> 时间：2013-03-29T16:35:44.377
> 
> 标签：ssl, https, firebug, google-chrome-devtools

我使用许多必须 100% 安全的 SSL/https 页面，所以锁是绿色的而不是黄色的。

很容易查明任何“dom 级别”脚本或图像，因为控制台会显示错误“此页面正在从*_*加载不安全的内容”

问题是当一个安全的 https 脚本加载非 https 图像/脚本时......它似乎没有作为加载不安全内容的错误记录在 chrome 开发工具控制台中。查看它的唯一方法是，如果我手动将鼠标移动到 80 个不同的资产链接、跟踪像素等，并确保它以 https 开头

有谁知道更好的处理方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:52:12.673

In Firebug you can enable the display of a *Protocol* column. To do so you have to right-click onto the column headers inside the [*Net* panel](https://getfirebug.com/wiki/index.php/Net_Panel) and click on *Protocol*. Then you can sort by that column by clicking on it's column header.

Doing so it should be pretty easy to spot the insecure request.

Sebastian

# jquery - 如何使用 excel 数据填充 jquery 表单

> ID：15707415
> 
> 赞同：0
> 
> 时间：2013-03-29T16:35:54.777
> 
> 标签：jquery

我需要使用多表 Excel 工作簿中的数据填充表单。我曾尝试编写一个 VBA 脚本来序列化为 Json，但它似乎非常耗费人力，并且研究了一个名为 jquery.populate 的插件，但无法弄清楚这一点。

这是示例：

```
 <fieldset>
<div class="_50"><strong>Phytoplankton CNP Sample ID:</strong><input type="text"  name="phyCNP"></div>
<div class="_25">D1 Filtered (mL):<input type="text" name="2D1"></div>
<div class="_25">D2 Filtered (mL):<input type="text" name="2D2"></div>
</fieldset>
 <fieldset>
 <div class="_50"><strong>Algae Sample ID:</strong><input type="text" name="algae"></div>
 <div class="_25"> <label></label>
      <input type="radio" id="radPeri1mod" name="algae"  data-mini="true"/>
      <label for="radPeri1mod">PERI-1-MOD</label>
    <label> </label>
      <input type="radio" id="radPeri1" name="algae"  data-mini="true"/>
      <label for="radPeri1">PERI-1</label></div>
   <div class="_25"> Other: <input type="text" id="textOther" name="algae"  /></div>
   </fieldset> 
```

1.从excel多表工作簿填充字段的最佳方法是什么？

2.有没有办法根据excel字段集的数量动态添加字段集？上面的fieldset可能有一组数据或5组数据。我只想要一个基本表单中的空集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:46:00.823

由于缺乏良好的语法，没有进入[模板构建器](https://stackoverflow.com/questions/170168/jquery-templating-engines)，这有点混乱，但您可以在循环中手动构建/插入每个字段集。

我无法回答 ajax 问题，因为我不精通这方面，但以下示例应该可以帮助您入门

```
var ajaxForNumberOfFields,
    ajaxForNumberOfDataSets,
    ajaxForDataTitle,
    ajaxForDataName,
    $field,
    $header,
    $data1,
    $data2;

// if the form already has old data then clear it
if(clearData) {
    $('form:not(first-child)').remove();
}

// ajax the number of fields
// something like $.ajax('yourURL', options).done(function(data){ajaxForNumberOfFields = data);

for(var i=0;i<ajaxForNumberOfFields;++i) {
    // create a new fieldset
    $field = $('<fieldset />');

    // ajax the number of data sets
    // ajaxForNumberOfDataSets = $.ajax('yourURL', options).done(function(data){ajaxForNumberOfFields = data);

    for(var j=0;j<ajaxForNumberOfDataSets;++j;)
        // new data header and rows
        $header = $('<div class=_50 />');
        $data1 = ('<div class=_25 />');
        $data2 = ('<div class=_25> Other: </div>');

        // ajax the data for the current set
        // ajaxForDataTitle = $.ajax('yourURL', options).done(function(data){ajaxForNumberOfFields = data);
        // ajaxForDataName = $.ajax('yourURL', options).done(function(data){ajaxForNumberOfFields = data);

        // load header
        $header
            .append($('<strong />').text(ajaxForDataTitle))
            .append($('<input type="text" />').attr('name', ajaxForDataName));

        // build data 1
        $data1
            .append('<label />')
            .append($('<input type="radio" id="radPeri1mod" data-mini="true"/>').attr('name', ajaxForDataName))
            .append('<label for="radPeri1mod">PERI-1-MOD</label>')
            .append('<label />')
            .append($('<input type="radio" id="radPeri1" data-mini="true"/>').attr('name', ajaxForDataname))
            .append('<label for="radPeri1">PERI-1</label>');

        // build data2
        // iterating over fieldsets will restrict the use of the id attribute
        // will need to use class attribute to locate the input, then figure out which one it is
        $data2
            .append($('<input type="text" class="textOther" />').attr('name', ajaxforDataName));

        // build the fieldset
        $field.append($header).append($data1).append(data2);

        // stuff the fieldset into the form
        $('form').append($field);
    }
} 
```

# php - 使用 Angular.js 的 HTTP POST

> ID：15707431
> 
> 赞同：20
> 
> 时间：2013-03-29T16:36:33.980
> 
> 标签：php, javascript, json, angularjs, http-post

我是新手，我想使用 Angular.js 发出 HTTP POST 请求。我正在访问具有只是 POST 变量的参数的 PHP 脚本。每个脚本返回的是一个 JSON 字符串。通常在 HTML 表单中，您可以发出如下请求：

```
<form method="post" action="url.php">
<input name="this">
<input name="that">
<input value="Submit">
</form> 
```

根据您的输入，在您单击提交后，JSON data1 将返回如下内容：`{ "code" : 1 }`

我无权访问脚本或托管它们的服务器。

我想知道 Angular.js 是否可以读取 JSON 数据 1，将该数据 1 与它们在我的 JSON 数据 2 中定义的内容相匹配，然后将它们输出到我的视图 ( `<pre>data2</pre>`)。

例如，如果`{ "code" : 1 }`检索到，我希望我的 JSON 输出代码 #1 的值：

```
{ "code" : [
  { 1: "User already logged in." }, 
  { 2: "Wrong parameters, try again."}, 
  { 3: "etc., etc." }
 ] 
}; 
```

这是我的尝试：

```
<form ng-controller="PhpCtrl" name="f1">
<input type="text" name="name">
<input type="text" name="password">
<pre ng-model="codeStatus">{{codeStatus}}</pre>
<input type="submit" ng-click="add()" value="Submit">
</form>

function PhpCtrl($scope, $http, $templateCache) {
    $scope.method = 'POST';
    $scope.url = 'url.php';
    $scope.codeStatus = "";

    $scope.add = function() {

        $http({
            method: $scope.method, 
            url: $scope.url,
            headers: {'Content-Type': 'application/x-www-form-urlencoded'},  
            cache: $templateCache
        }).
        success(function(response) {
            $scope.codeStatus = response.data;
        }).
        error(function(response) {
            $scope.codeStatus = response || "Request failed";
        });
        return false;   
    };
} 
```

到目前为止，它发布到视图的所有内容都是“请求失败”大声笑，尽管它正在处理 HTTP/1.1 200。我知道我还有很长的路要走，但我会很感激任何帮助。一旦我弄清楚如何将正确的 JSON 数据 1 发布到视图中，下一步就是匹配并输出相应的数据 2。先感谢您！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-29T20:45:31.920

实际上，问题出在PHP的后端，您没有像往常一样检索发布的数据，这对我有用：

```
function PhpCtrl($scope, $http, $templateCache) {
  var method = 'POST';
  var url = 'url.php';
  $scope.codeStatus = "";
  $scope.add = function() {
    var FormData = {
      'name' : document.f1.name.value,
      'password' : document.f1.password.value
    };
    $http({
      method: method,
      url: url,
      data: FormData,
      headers: {'Content-Type': 'application/x-www-form-urlencoded'},
      cache: $templateCache
    }).
    success(function(response) {
        $scope.codeStatus = response.data;
    }).
    error(function(response) {
        $scope.codeStatus = response || "Request failed";
    });
    return false;
  };
} 
```

在 PHP 文件中：

```
$data = json_decode(file_get_contents("php://input"));
echo $data->name; 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-06-16T12:14:45.553

相当老的帖子......但我认为我的解决方案也可能对其他人有用。

我不喜欢

```
json_decode(file_get_contents("php://input")); 
```

解决方案......基本上是因为它似乎违反了良好的做法（我可能错了）

这就是我解决它的方法（适用于上面的示例）

```
function PhpCtrl($scope, $http, $templateCache) {
  var method = 'POST';
  var url = 'url.php';
  $scope.codeStatus = "";
  $scope.add = function() {
    var FormData = {
      'name' : document.f1.name.value,
      'password' : document.f1.password.value
    };
    $http({
      method: method,
      url: url,
      data: $.param({'data' : FormData}),
      headers: {'Content-Type': 'application/x-www-form-urlencoded'},
      cache: $templateCache
    }).
    success(function(response) {
        $scope.codeStatus = response.data;
    }).
    error(function(response) {
        $scope.codeStatus = response || "Request failed";
    });
    return false;
  };
} 
```

一旦完成

```
data: $.param({'data' : FormData}),
headers: {'Content-Type': 'application/x-www-form-urlencoded'}, 
```

您可以访问通常在 PHP 中使用的数据

```
$data = $_POST['data']; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-20T18:07:51.707

一种可能的替代方法是使用 XHR 请求处理程序来序列化 POST 请求的有效负载。

```
$httpProvider.interceptors.push(['$q', function($q) {
    return {
        request: function(config) {
            if (config.data && typeof config.data === 'object') {
                // Check https://gist.github.com/brunoscopelliti/7492579 for a possible way to implement the serialize function.
                config.data = serialize(config.data);
            }
            return config || $q.when(config);
        }
    };
}]); 
```

此外，如果您之前没有这样做，您还必须更改 post 请求的默认 content-type 标头：

```
$http.defaults.headers.post["Content-Type"] = 
    "application/x-www-form-urlencoded; charset=UTF-8;"; 
```

最近我在我的博客上写了一篇文章，您可以在其中找到有关此方法和[XHR 请求拦截器](http://blog.brunoscopelliti.com/xhr-interceptor-in-an-angularjs-web-app)的更多信息。

# python - 将文件作为垂直列表和水平列表读取（python 3.2）

> ID：15707433
> 
> 赞同：0
> 
> 时间：2013-03-29T16:36:43.750
> 
> 标签：python

我有一个文本文件，我希望我的程序（在 python 3.2 中）读取为（1）每一行作为一个列表，然后（2）我想创建一个新列表，其中包含在（1）中具有相同索引的元素。像这样：

```
shagy 2 3 4 5 6  
dely 3 4 5 6 7 

horizental lists = [shagy,2,3,4,5,6] and [dely,3,4,5,6,7]  
vertical lists = [shagy,dely] and [2,3] and [3,4] and [4,5] and [5,6] and [6,7] 
```

我需要这样做，因为我应该找到每列的最大值（具有相同索引的元素）。所以我想如果我把它们放在一个列表中，找到它们的最大值会更容易，但我不知道该怎么写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:38:58.000

用于`.split()`将行拆分为列表，用于`zip(*lines)`将行转换为列。

```
with open('filename') as inputfile:
    rows = [line.split() for line in inputfile]

columns = zip(*rows) 
```

行中的值仍然是字符串值，但您现在可以将它们映射到`int`：

```
int_columns = [map(int, col) for col in columns[1:]] 
```

这会跳过带有名称的*第一*列。

# c# - 考虑使用 DataContractResolver 序列化错误

> ID：15707437
> 
> 赞同：3
> 
> 时间：2013-03-29T16:36:52.017
> 
> 标签：c#, serialization, asp.net-web-api

我的桌面 wpf 应用程序与 mvc 4 web api 通信。我正在尝试读取所有数据库条目。这是一个简单的界面：

```
public interface IEventRepository
{
    IEnumerable<Event> GetAll();
} 
```

这是存储库：

```
public class EventRepository : IEventRepository
{
    private List<Event> events = new List<Event>();
    public EventRepository()
    {
        HeronEntities context = new HeronEntities();
        events = context.Events.ToList();
    }

    public IEnumerable<Event> GetAll()
    {
        return events;
    }
 } 
```

这是控制器：

```
 public class EventController : ApiController
{
    static readonly IEventRepository repository = new EventRepository();

    public IEnumerable<Event> GetAllEvents()
    {
        return repository.GetAll();
    }
} 
```

事件类如下所示：

```
public partial class Event
{
    public Event()
    {
        this.Comments = new HashSet<Comment>();
        this.Rates = new HashSet<Rate>();
        this.RawDates = new HashSet<RawDate>();
    }

    public int ID { get; set; }
    public string Title { get; set; }
    public string Summary { get; set; }
    public string SiteURL { get; set; }
    public string ContactEmail { get; set; }
    public string LogoURL { get; set; }
    public int EventType_ID { get; set; }
    public Nullable<int> Location_ID { get; set; }
    public Nullable<System.DateTime> BegginingDate { get; set; }
    public string nTrain { get; set; }
    public string Content { get; set; }

    public virtual ICollection<Comment> Comments { get; set; }
    public virtual Conference Conference { get; set; }
    public virtual ICollection<Rate> Rates { get; set; }
    public virtual ICollection<RawDate> RawDates { get; set; }
    public virtual EventType EventType { get; set; }
    public virtual Location Location { get; set; }
} 
```

当我尝试访问控制器时，我得到了上面提到`failed to serialize the response body for content type`的错误。`Event`类序列化存在一些问题。我对包含原始类型的类使用了完全相同的代码，并且效果很好。克服这种序列化问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:21:10.100

我禁用了延迟加载和代理类生成。这解决了问题。

```
public EventRepository()
    {
        HeronEntities context = new HeronEntities();
        context.Configuration.LazyLoadingEnabled = false;
        context.Configuration.ProxyCreationEnabled = false;
        events = context.Events.ToList();
    } 
```

# javascript - 您是从模型中还是从其他地方初始化 Backbone 视图？

> ID：15707444
> 
> 赞同：6
> 
> 时间：2013-03-29T16:37:23.697
> 
> 标签：javascript, backbone.js, coffeescript, views, models

您是从模型中还是从其他地方初始化 Backbone 视图？

我试图找出组织模型/视图的最佳方式。让您的模型初始化视图是否有意义？

感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T17:00:54.873

## 模型

不，您的模型不会初始化任何其他 MVVM 对象。
确保他们只负责定义他们将携带的数据，以及他们将如何持久化这些数据。

```
var CoolModel = Backbone.Model.extend({
  defaults: function() {
    return {
      coolness: 'extreme',
      color: 'red'
    };
  }
};

var myModel = new CoolModel; 
```

## 看法

您的**视图**应包含一个初始化函数，该函数将由 Backbone.View “父级”自动调用：

```
var CoolView = Backbone.View.extend({

  doSomething: function() { ... },
  doSomethingElse: function() { ... },

  initialize: function() {
    this.listenTo(this.model, 'eventA', this.doSomething);
    this.listenTo(this.model, 'eventB', this.doSomethingElse);
  }

}); 
```

## 应用视图

当你实际创建一个视图对象时，你传入了它将绑定到的模型。从技术上讲，这可以在您的代码中的任何地方发生（但通常在应用程序级别视图中）：

```
renderSomething: function(todo) {
  var view = new CoolView({model: myModel});
  // view.render() ....
} 
```

也就是说，您的应用程序将模型和视图结合在一起。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T17:14:30.087

虽然这绝对不是一个完整和完整的答案，但我建议您通读[Backbone Todos Annotated Docs](http://backbonejs.org/docs/todos.html)。

您将看到他们所做的是监听集合上的“添加”事件，并在将新模型添加到集合时从主视图创建新模型的视图。您可以在带注释的文档中的 AppView 初始化函数中看到这一点。

This is also the way I do it for all my apps, and is what I would recommend. This approach also lets you include more logic around the new model if you need to (such as re-rendering a stats view which keeps track of the number of models in the collection).

# c++ - _stprintf() 只读 C++ 和 MFC 中的第一个字符

> ID：15707445
> 
> 赞同：0
> 
> 时间：2013-03-29T16:37:26.887
> 
> 标签：c++, mfc

我在 C++ 中的 MFC 应用程序中有一个文本编辑控件，我正在尝试读取控件中写入的文本以在我的硬盘上写入文件。

问题是它只读取第一个字符而不是整个字符串。

```
 tchar fname[100];   
 _stprintf(fname, _T("%Sfile-%d.bmp"), pDoc->swap_text, swap);
save_image_uncompressed( (const unsigned char*) pDoc->image[idx], fname, pDoc->m_buf[idx].lpbmi[frm_idx]->bmiHeader.biHeight,
                        pDoc->m_buf[idx].lpbmi[frm_idx]->bmiHeader.biWidth,
                        pDoc->m_buf[idx].lpbmi[frm_idx]->bmiHeader.biWidth*3,
                        0); 
```

例如，如果在编辑控件中写入：**name_of_directory/**，则显示为：“* *n* *file-1.bmp”，它是 name_of_directory/ 字符串的第一个字符。

我试着用

```
_stprintf(fname, _T("%Sfile-%d.bmp"), pDoc->swap_text.GetString(), swap); 
```

但我有同样的问题。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:51:47.903

您似乎使用了错误的格式代码：

```
_stprintf(fname, _T("%sfile-%d.bmp"), ...)
//                   ^^ 
```

您应该使用`%s`（小写）而不是`%S`（大写）。

# linux - 如果两个内核同时尝试写入主存中的同一位置会发生什么？

> ID：15707446
> 
> 赞同：0
> 
> 时间：2013-03-29T16:37:36.480
> 
> 标签：linux, multithreading, concurrency, cpu-architecture

如果两个不同的内核试图同时写入主存中的同一个位置，会发生什么？主内存是否自动只允许一次写入一个内存点，还是必须发生某种昂贵的锁定？

（基本上我想知道写入原子 volatile int 的成本是多少，以及它是否会影响其他无法访问它的进程和线程，例如，如果总线被锁定，它会影响一切，对吧？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T07:24:33.560

每个多核 CPU 都有一种方法来确保每个核的写入按照先到先得的原则进行排序。如果不是这样，您就会遇到两个内核都试图同时驱动内存总线的情况，这将导致冒烟。

所以是的，锁定确实发生在电子级别，但它并不昂贵。虽然它相对复杂，因为内存反映在缓存中，因此称为总线侦听的机制允许缓存在另一个内核或外围设备更改其当前正在缓存的内存位置的内容时发现。

因此，如果没有其他进程或核心使用相同的内存位置，那么它们的缓存将不会缓存它，因此您的读写将不受阻碍地进行。最初，写入将仅用于缓存，并且仅当正在运行的进程在其他地方访问足够的内存以迫使缓存刷新时，才会将其写入主内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:43:37.753

硬件与内存只有一个物理连接。它不能同时被两个不同的来源写入。不过，它似乎会发生。

如果您尝试从两个进程/线程进行读取然后写入，那么如果它们重叠可能会导致这种情况。使用原子操作的“[互斥锁](http://en.wikipedia.org/wiki/Mutex)”实现了一种绕过它的方法。

# python - 在python中使用过滤器获取新字典

> ID：15707450
> 
> 赞同：0
> 
> 时间：2013-03-29T16:37:47.077
> 
> 标签：python, dictionary, filter

A 有这样的字典：

```
dict = {
 'a':
    {'a1':(1,0,0,1,0), 'a2':(1,1,1,0,0)},
 'b':
    {'b1':(1,1,0,1,1), 'b2':(1,0,1,0,0)}
} 
```

我想要的是制作一个与**dict**完全一样的新字典，但元组中没有零

```
dict_new = {
 'a':
    {'a1':(1,1), 'a2':(1,1,1)},
 'b':
    {'b1':(1,1,1,1), 'b2':(1,1)}
} 
```

以下是正确的：

```
 >>> a = (1,0,0,1)
 >>> filter(lambda x: x!= 0,a)
 >>> (1,1) 
```

所以，我想做的是

```
 dict_new = filter(
     lambda x: filter(
       lambda y: dict[x][y]!=0), dict[x]), dict) 
```

但答案是

```
['a', 'b'] 
```

我究竟做错了什么？有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:41:18.787

您需要遍历嵌套结构以将过滤器仅应用于内部值。字典推导可以很好地解决这个问题：

```
dict_new = {kouter: {kinner: tuple(filter(bool, vinner)) for kinner, vinner in vouter.iteritems()} 
            for kouter, vouter in dict_old.iteritems()} 
```

演示：

```
>>> {kouter: {kinner: tuple(filter(bool, vinner)) for kinner, vinner in vouter.iteritems()} 
...             for kouter, vouter in dict_old.iteritems()}
{'a': {'a1': (1, 1), 'a2': (1, 1, 1)}, 'b': {'b1': (1, 1, 1, 1), 'b2': (1, 1)}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:58:07.167

如果你只需要保留`1`s 那么你实际上不需要过滤任何东西，你可以对序列求和以获得`1`s 的数量并创建一个包含那么多`1`s 的新序列。

```
dict_input = {
 'a':
    {'a1':(1,0,0,1,0), 'a2':(1,1,1,0,0)},
 'b':
    {'b1':(1,1,0,1,1), 'b2':(1,0,1,0,0)}
}

dict_output = {}

for key, subdict in dict_input.iteritems():
   dict_output[key] = {}
   for subkey, items in subdict.iteritems():
       dict_output[key][subkey] = (1,) * sum(items) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:43:51.750

如果您宁愿使用循环而不是 dict 理解：

```
>>> print adict
{'a': {'a1': (1, 0, 0, 1, 0), 'a2': (1, 1, 1, 0, 0)}, 'b': {'b1': (1, 1, 0, 1, 1), 'b2': (1, 0, 1, 0, 0)}}
>>> newdict = {}
>>> for k in dict:
...   newdict[k] = {}
...   for k2 in adict[k]:
...     newdict[k][k2] = filter(lambda x: x!=0, adict[k][k2])
... 
```

# r - 从数据框列设置时，ggplot2 中的 alpha/size 差异不成比例？

> ID：15707451
> 
> 赞同：3
> 
> 时间：2013-03-29T16:37:56.660
> 
> 标签：r, ggplot2

我有这个散点图：

```
iris$size <- 2
ggplot(iris) + geom_point(aes(x=Sepal.Width, y=Sepal.Length, color=Species, size=size)) 
```

它工作正常。现在我只想让其中一个点比其他点**稍大，所以我这样做：**

```
iris$size[3] <- 2.5
ggplot(iris) + geom_point(aes(x=Sepal.Width, y=Sepal.Length, color=Species, size=size)) 
```

这造成了不成比例的大小差异！该点`iris$size[3]`并不比其余点大 20%，而是*更大*（可能是 10 倍）。如果我只是在 2.0`size=`之外简单地设置为某个常数，例如 2.5，`aes()`那么与 2.0 相比，2.5 的大小看起来比预期的要大，但当它设置`aes()`为数据框中的列时则不然。

对于`alpha=`. 如果我将其设置`alpha=`为常数，则不能`aes()`正常工作，但如果我将一些点的 alpha 设置为 ，而将一些点的 alpha 设置`0.6`为`0.65`，则差异会被放大到非常大。

我怎样才能解决这个问题？如何`aes()`在调用时从列中获取要解释的 alpha/size 值，就像它们在列之外所做的那样`geom_point()`？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:42:54.437

当您设置大小时，您的值将分布在预设范围之间 - 因为`scale_size_continuous()`默认范围是从 1 到 6。因此数据中的最小值得到`size=1`，最大值得到`size=6`。使用`scale_size_continuous()`和参数`range=`，您可以获得自己的范围，例如，与原始数据中的相同。

```
ggplot(iris) + geom_point(aes(x=Sepal.Width, y=Sepal.Length, 
                color=Species, size=size))+
  scale_size_continuous(range=c(2,2.5),breaks=c(2,2.5)) 
```

If the data used for `size=` are actual size values you want to see on plot you can use use `scale_size_identity()` which will interpret values specified for `size=` in `aes()` directly.

```
ggplot(iris) + geom_point(aes(x=Sepal.Width, y=Sepal.Length, color=Species, size=size))+
  scale_size_identity() 
```

# javascript - 使用淘汰赛 js 在页面上显示数据时遇到问题 - 数据未显示

> ID：15707452
> 
> 赞同：0
> 
> 时间：2013-03-29T16:37:57.177
> 
> 标签：javascript, asp.net-mvc, json, knockout.js, knockout-mvc

这是我第一次工作并尝试淘汰 js，但我无法让它工作。我正在做的是显示从数据库返回的列表/集合 - 基本上是所有用户及其信息的获取。

**问题：** 到目前为止，我没有让数据显示在页面上，也不确定我做错了什么或遗漏了什么。如果我缺少任何其他有助于解决我的问题的代码，请告诉我。谢谢！

**查看页面**

```
@using ProjectB.Shared.Models
@using System.Collections
@using ProjectB.Shared.Services
<html>
<head>
<script type ="text/javascript" src="~/Scripts/jquery-1.9.1.min.js"></script>
<script src="~/Scripts/knockout-2.2.1.js"></script>
<script src="~/Scripts/knockout.mapping-latest.js"></script>
</head>
<body>
<table data-bind="visible: RosterUsers().length>0">
<thead>
    <tr>
        <td>Name</td>
        <td>Content Role</td>
        <td>Email</td>
        <td></td>
    </tr>
</thead>
<tbody data-bind="foreach: RosterUsers">
    <tr>
        <td><span data-bind="text: Name"></span></td>
        <td><span data-bind="text: ContentRole"></span></td>
        <td><span data-bind="text: Email"></span></td>
    </tr>
</tbody>
</table>

<script type ="text/javascript">
    var rUserViewModel = function () {
            var self = this;
            self.Name = ko.observable("");
            self.ContentRole = ko.observable("");
            self.Email = ko.observable("");

            var rUserData = {
                Name: self.Name,
                ContentRole: self.ContentRole,
                Email: self.Email
            };

            self.RosterUsers = ko.observableArray([]);

            GetRosterUser();

            function GetRosterUser() {
                $.ajax({
                    type: "GET",
                    url: "/api/RosterApiController",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        self.RosterUsers(data);
                    },
                    error: function (error) {
                        alert(error.status + " <--and--> " + error.statusText);
                    }
                });
            }
        };
        ko.applyBindings(new rUserViewModel());
</script>
    </body>
    </html> 
```

**模型**

```
 public partial class RosterVw
    {
        public RosterVw()
        {
            this.Users = new HashSet<RosterUser>();
        }
        public ICollection<RosterUser> Users { get; set; }
    }

    public partial class RosterUser
    {
        public string Name { get; set; }
        public ContentRoles ContentRole { get; set; }
        public string Email { get; set; } //Photo is unique to email address
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:47:35.763

查看您的代码，我想您正在使用 ASP.NET WebAPI。我认为您应该将您的 ajax 调用地址从 更改`/api/RosterApiController`为`/api/RosterApi`.

Both ASP.NET MVC and ASP.NET WebAPI have routing convention that except controller name **without** `Controller` suffix.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:24:54.063

I think Slawomir solution is definitely something you should be aware of but you can try to populate your RosterUsers using a foreach.

```
_.each(data, function(user){
    self.RosterUsers.push(new RosterUserObject(user));
}); 
```

# jquery - json对象在div中打印

> ID：15707453
> 
> 赞同：0
> 
> 时间：2013-03-29T16:38:03.607
> 
> 标签：jquery, json

我有一个像这样的对象：

```
{"result":
[
  {"id_":"18","name":"papas","species":"Other","sex":"F"},

{"id_":"26","name":"as","species":"bird","sex":"M"}

]} 
```

如何访问每个项目，并将其打印在 div 中？

我在尝试：

```
$.each( myObj , function(index,item){
   $("#wrapper_busqueda").append('<div><b>' + myObj.id_ + '</b>  '+ myObj.mame  + ' </div><hr />');
} 
```

但得到未定义...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:41:03.407

您可以使用如下

```
$.each( myObj , function(index,item){
   $("#wrapper_busqueda").append('<div><b>' + item.id_ + '</b>  '+ item.mame  + ' </div><hr />');
} 
```

看来你有多重维度

```
for(var list in response)
{
   for(var item in list)
   {
     alert(item);
   }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:43:02.550

您可以使用 for 循环..

```
var OBJ = {"result":[{"id_":"18","name":"papas","species":"Other","sex":"F"},
{"id_":"26","name":"as","species":"bird","sex":"M"}]};

var total = OBJ['result'], myString = '';
for(i=0;i<total.length;i++)
{
    myString += '<div><b>' + total[i].id_ + '</b>  '+ total[i].mame  + ' </div><hr />';
}
$("#wrapper_busqueda").append(myString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:49:19.870

除了错字之外，您应该`myObj`像这样访问您的：

```
myObj['result'] 
```

并使用`item`来`.each`访问当前项目值而不是直接 myObj 即做`item.name`和不`myOBj.name`

因此

```
$.each( myObj['result'] , function(index,item){
   $("#wrapper_busqueda")
   .append('<div><b>' + item.id_ + '</b>  '+ item.name  + ' </div><hr />');
 }); 
```

看到这个[小提琴](http://jsfiddle.net/62x7D/)

# mysql - 从一个 MySQL 表中选择，即使 count 为 0，也返回 count(id)

> ID：15707454
> 
> 赞同：2
> 
> 时间：2013-03-29T16:38:06.910
> 
> 标签：mysql, join, count, group-by

我一直在谷歌搜索这个问题的答案，我相信这比我做的要容易，我想学习正确的方法来做到这一点。

我有一个表`emails_sent`，我从中选择计数并按列分组。每行有 3 个之一`type`- “确认”、“1 天”和“同一天”。我也在某个日期之前这样做。假设，这是我今天选择的示例查询：

```
SELECT Count(id) AS count, 
       type 
FROM   emails_sent 
WHERE  Date_format(date, '%Y-%m-%d') = '2013-03-29' 
GROUP  BY type 
ORDER  BY type; 
```

这是它返回的内容：

```
+-------+----------+
| 计数 | 类型 |
+-------+----------+
| 32 | 确认 |
| 4 | 1天 |
+-------+----------+
```

这很好，但是今天还有第三种“类型”恰好有 0 条记录，但我需要它来提取该计数，即使它是 0。

我还尝试创建一个只有这 3 个“类型”的第二个表，并使用右连接，但它仍然不会拉 0 计数。这就是我对这两个表所做的：

```
SELECT t.type, 
       Count(s.id) AS count 
FROM   emails_sent s 
       RIGHT JOIN email_types t 
               ON s.type = t.type 
WHERE  Date_format(s.date, '%Y-%m-%d') = '2013-03-29' 
GROUP  BY t.type; 
```

我确定这只是我缺少的一些简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:41:20.400

试试这个

```
SELECT t.type, 
       COALESCE( Count(s.id), 0 ) AS count 
FROM   email_types t 
       LEFT JOIN email_sent s 
               ON s.type = t.type 
WHERE  Date_format(s.date, '%Y-%m-%d') = '2013-03-29' 
GROUP  BY t.type; 
```

注意：我使用了 a`LEFT JOIN`代替，如`1 type has many emails`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:42:59.987

如果我正确理解了这个问题，你难道不能假设如果你没有得到某种类型的记录，那是因为有 0 个条目吗？

# c# - C# 中的错误数据异常

> ID：15707458
> 
> 赞同：-1
> 
> 时间：2013-03-29T16:38:22.177
> 
> 标签：c#, encryption

尝试在 C# 中使用 DES 解密文件时出现“错误数据异常”。任何帮助都会很棒。这是我的代码：

```
namespace encrypte
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        static void EncryptFile(string sInputFilename, string sOutputFilename, string sKey)
        {
            FileStream fsInput = new FileStream(sInputFilename,FileMode.Open, FileAccess.Read);
            FileStream fsEncrypted = new FileStream(sOutputFilename,FileMode.Create,FileAccess.Write);
            DESCryptoServiceProvider DES = new DESCryptoServiceProvider();
            DES.Mode = CipherMode.CFB;
            DES.Key = ASCIIEncoding.ASCII.GetBytes(sKey);
            DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey);
            DES.Padding = PaddingMode.ISO10126;
            ICryptoTransform desencrypt = DES.CreateEncryptor();
            CryptoStream cryptostream = new CryptoStream(fsEncrypted,desencrypt,CryptoStreamMode.Write);
            byte[] bytearrayinput = new byte[fsInput.Length - 1];
            fsInput.Read(bytearrayinput, 0, bytearrayinput.Length);
            cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length);
            cryptostream.FlushFinalBlock();
            fsInput.Close();
            fsEncrypted.Close();
        }
        static void DecryptFile(string sInputFilename,string sOutputFilename,string sKey)
        {
            DESCryptoServiceProvider DES = new DESCryptoServiceProvider();
            DES.Key = ASCIIEncoding.ASCII.GetBytes(sKey);
            DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey);
            DES.Mode = CipherMode.CFB;
            DES.Padding = PaddingMode.ISO10126;
            FileStream fsread = new FileStream(sInputFilename,FileMode.Open,FileAccess.Read);
            ICryptoTransform desdecrypt = DES.CreateDecryptor();
            CryptoStream cryptostreamDecr = new CryptoStream(fsread, desdecrypt,CryptoStreamMode.Read);
            StreamWriter fsDecrypted = new StreamWriter(sOutputFilename);
            fsDecrypted.Write(new StreamReader(cryptostreamDecr).ReadToEnd());
            fsDecrypted.Flush();
            fsDecrypted.Close();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            EncryptFile(@"E:\a.wmv", @"E:\b.wmv", "abcdefgh");
        }

        private void button2_Click(object sender, EventArgs e)
        {
            DecryptFile(@"E:\b.wmv", @"E:\c.wmv", "abcdefgh");
        }
    }
} 
```

我在这一行得到一个“坏数据”异常： fsDecrypted.Write(new StreamReader(cryptostreamDecr).ReadToEnd());

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:02:21.160

```
static void DecryptFile(string sInputFilename, string sOutputFilename, string sKey)
{
    DESCryptoServiceProvider DES = new DESCryptoServiceProvider();
    DES.Key = ASCIIEncoding.ASCII.GetBytes(sKey);
    DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey);
    DES.Mode = CipherMode.CFB;
    DES.Padding = PaddingMode.ISO10126;
    FileStream fsread = new FileStream(sInputFilename, FileMode.Open, FileAccess.Read);
    ICryptoTransform desdecrypt = DES.CreateDecryptor();
    CryptoStream cryptostreamDecr = new CryptoStream(fsread, desdecrypt, CryptoStreamMode.Read);
    FileStream fsDecrypted = new FileStream(sOutputFilename,FileMode.Create,FileAccess.Write);
    cryptostreamDecr.CopyTo(fsDecrypted);
    fsDecrypted.Flush();
    fsDecrypted.Close();
} 
```

# javascript - ASP.Net 文本框上的 Javascript/jQuery 增量器

> ID：15707461
> 
> 赞同：0
> 
> 时间：2013-03-29T16:38:40.640
> 
> 标签：javascript, jquery, asp.net, textbox

我们正在尝试在 ASP.Net 文本框上使用 Javascript 增量器和减量器来增加数值。默认文本框设置为 0。

我们附加了 2 个 div 来触发 Javascript 来增加和减少 ASP.Net 文本框中的值。值变了但是...

我们还遇到了 Javascript 应该防止值低于 0 的问题。但是，当我们减少到 0 以下时，文本框变为空白，然后当我们尝试增加时，我们得到一个 NaN 值。我的计划是在值变为“0”时让递减按钮消失。任何帮助表示赞赏。是否可以在 ASP.Net 文本框上使用 Javascript/jQuery 增量器/减量器？

有关如何使减量器按钮在值达到“0”时消失并在值高于“0”时重新出现的任何指针。加上是否可以在 ASP.Net 文本框上使用 Javascript 递增/递减。

提前致谢。

下面是我的 Javascript：

```
 if (Modernizr.mq("screen and (max-width:767px)")) {
        if ($('.product-variant-list td span.quantity input.numerictextboxtext:not([disabled])')) {
            $('input.numerictextboxtext:not([disabled])').parent().append('<div class="incButton button">+</div><div class="decButton button">-</div>');
        }

        if ($('input.numerictextboxtext').val() == 0) {
            $(".decButton").hide();
        }
        if ($('input.numerictextboxtext').val() >= 1) {
            $(".decButton").show();
        }

        $(".button").click(function () {
            var $button = $(this);
            var oldValue = $button.parent().find("input.numerictextboxtext").val();

            //TODO: See if you can show and hide button on based on value of textbox
            if(oldValue == 0){
                $(".decButton").hide();
            }
            if (oldValue >= 1) {
                $(".decButton").show();
            }

            if ($button.text() == "+") {
                var newVal = parseFloat(oldValue) + 1;

            } else {
                // Don't allow decrementing below zero - supposedly. But this does not work in our case
                if (oldValue >= 1) {
                    var newVal = parseFloat(oldValue) - 1;
                }
            }
            $button.parent().find("input.numerictextboxtext").val(newVal);
        });//End button click
    }//End Modernizr check 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:30:35.917

我认为您的问题之一可能在这里。我稍微更改了格式，以更清楚地说明我认为问题出在哪里。

```
if ($button.text() == "+") {
   var newVal = parseFloat(oldValue) + 1;
} else {
   // Don't allow decrementing below zero - supposedly. But this does not work in our case
   if (oldValue >= 1) {
     var newVal = parseFloat(oldValue) - 1;
   }
}
$button.parent().find("input.numerictextboxtext").val(newVal); 
```

`newVal`在`if`子句和`else`子句中声明。但是随后您将它用于任何一个子句之外的表达式中。所以`newVal`在你使用它的时候，`val()`功能是没有定义的。

尝试在您定义的地方声明它`oldVal`。

```
 $(".button").click(function () {
        var $button = $(this);
        var oldValue = $button.parent().find("input.numerictextboxtext").val();
        var newValue = oldValue; // Declaring the variable here gives it 
                                 // the same scope as oldValue.  Giving it 
                                 // oldValue as a default value means that it
                                 // will have a value even if not assigned to again.

        //TODO: See if you can show and hide button on based on value of textbox
        if(oldValue == 0){
            $(".decButton").hide();
        }
        if (oldValue >= 1) {
            $(".decButton").show();
        }

        if ($button.text() == "+") {
            newVal = parseFloat(oldValue) + 1;
        } else {
            // Don't allow decrementing below zero
            if (oldValue >= 1) {
                newVal = parseFloat(oldValue) - 1;
            }
        }
        $button.parent().find("input.numerictextboxtext").val(newVal);
    });//End button click 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:01:24.043

我们的问题的答案在这里。我希望这对其他人有帮助。

```
 if (Modernizr.mq("screen and (max-width:767px)")) {
        if ($('.product-variant-list td span.quantity input.numerictextboxtext:not([disabled])')) {
            $('input.numerictextboxtext:not([disabled])').parent().append('<div class="incButton button">+</div><div class="decButton button">-</div>');
        }
        if ($('input.numerictextboxtext').val() == 0) {
            $(".decButton").hide();
        }
        $(".button").click(function () {
            var $button = $(this);
            var oldValue = $button.parent().find("input.numerictextboxtext").val();
            var newVal = oldValue;
            //Hide .decButton for oldValue
            if (newVal == 0 || oldValue == 0) {$button.parent().find(".decButton").hide(); oldValue = 0}
            else {$button.parent().find(".decButton").show();}
            if ($button.text() == "+") { var newVal = parseFloat(oldValue) + 1;} else {
                // Don't allow decrementing below zero
                if (oldValue >= 1) {var newVal = parseFloat(oldValue) - 1;}
            }
            //Hide .decButton for newVal
            if (newVal == 0) {$button.parent().find(".decButton").hide();}
            else {$button.parent().find(".decButton").show();}
            $button.parent().find("input.numerictextboxtext").val(newVal);
        });//End button click
    }//End Modernizr check 
```

# java - helloword solj programe 给我一个例外“错误请求”

> ID：15707462
> 
> 赞同：0
> 
> 时间：2013-03-29T16:38:41.353
> 
> 标签：java, solr, solrj

我尝试从我的 java 应用程序中索引 solr 中的这些数据。

问题是它给了我这个例外

```
Exception in thread "main" org.apache.solr.common.SolrException: Bad Request

Bad Request

request: http://localhost:8983/solr/update?wt=javabin&version=2
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:436)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:246)
    at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:104)
    at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:70)
    at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:55)
    at com.gismo.ReadFromSolr.main(ReadFromSolr.java:47) 
```

这是我的代码

```
public static void main(String[] args) throws SolrServerException, SQLException, IOException 
        { String url = "http://localhost:8983/solr/db";

     CommonsHttpSolrServer solrServer = new
                 CommonsHttpSolrServer("http://localhost:8983/solr");

                         SolrInputDocument doc1 = new SolrInputDocument();
                         doc1.addField( "pk_id", "id1");
                         doc1.addField("doc_type", "content");
                         doc1.addField( "id", "1");
                         doc1.addField( "content_text", "hello world" );

                         Collection<SolrInputDocument> docs = new
                         ArrayList<SolrInputDocument>();
                         docs.add(doc1);
                         solrServer.add(docs);
                         solrServer.commit(); 
    } 
```

所以我还有一个问题

**1\. 我是否需要在索引之前在某处声明此字段：例如在 solr C:\solr-4.1.0\example\solr\collection1\conf\schema.xml**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:09:48.473

是的，您需要确保在您的 schema.xml 部分`SolrInputDocument`中声明了您引用的这四个字段。`<fields>`请根据需要参考[SchemaXml](http://wiki.apache.org/solr/SchemaXml)。

另外，请注意[HttpSolrServer](http://wiki.apache.org/solr/Solrj#HttpSolrServer)`CommonsHttpSolrServer`已被弃用，因此我建议使用该类。

# javascript - 从 ruby 中的数据库值填充 javascript 数组

> ID：15707466
> 
> 赞同：0
> 
> 时间：2013-03-29T16:38:59.127
> 
> 标签：javascript, jquery, ruby-on-rails, ruby

考虑以下是我的数据库表：

```
+------------------------+
| 标题 | 日期 |
+------------------------+
| 会议 | 2013 年 3 月 28 日|
| 午餐 | 2013 年 3 月 9 日|
+------------------------+

```

以下是我的 javascript 数组，我试图根据我的数据库值填充其值。我用 PHP 很容易做到，但我不能用 ruby​​ 做到这一点，请让我知道如何在 ruby​​ on rails 中做到这一点？

谢谢，

```
var events = [ 
// Ruby FOR LOOP
    { Title: "% VALUE SHOULD COME HERE FROM DATABASE %", Date: new Date("% VALUE SHOULD COME HERE FROM DATABASE %") }
// END FOR LOOP
             ]; 
```

];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:43:33.723

如果您的数据库表被命名为事件 - 简短的回答是

```
Event.all.to_json 
```

但是您可能需要优化结果

```
events = Event.all.map do |event|
  { Title: event.title, Date: event.event_date }
end

events.to_json 
```

注意：更改`all`为使用适合`where`您的用例的过滤器

Use `I18n.localize` to format your date (if needed, default should be YYYY-MM-DD, which you probably want for json data) - see [http://rails-bestpractices.com/posts/42-use-i18n-localize-for-date-time-formating](http://rails-bestpractices.com/posts/42-use-i18n-localize-for-date-time-formating)

# ruby-on-rails - Rails 3应用程序没有从heroku中提取数据库

> ID：15707469
> 
> 赞同：1
> 
> 时间：2013-03-29T16:39:02.183
> 
> 标签：ruby-on-rails, heroku

你能帮忙的话，我会很高兴。heroku 日志没有说明这一点。我可以将应用程序推送到 heroku 上。通常我可以通过执行 heroku db:pull --confirm appname 从 heroku 中提取数据库。现在，当我拉甚至推时，我就会收到这个错误。！未经授权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:19:28.093

目前 API 存在问题，应尽快修复：[https ://status.heroku.com/incidents/509](https://status.heroku.com/incidents/509)

**更新：**现在应该修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:42:01.857

您是否使用 Heroku Toolbelt 登录？先试试`heroku login`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:23:53.310

我是 Heroku 问题。在此处查看状态[https://status.heroku.com/incidents/509](https://status.heroku.com/incidents/509)

# javascript - 为什么 (file.lastModifiedDate == file.lastModifiedDate ) 在 JavaScript 中评估为 false？

> ID：15707479
> 
> 赞同：1
> 
> 时间：2013-03-29T16:39:34.683
> 
> 标签：javascript, file, object, attributes, w3c

似乎下面的代码应该返回一个 true，但它返回 false。

这有什么意义？这样对吗？

我也在 Chrome 和 Firefox 上进行了测试。两者都返回false。

### 测试代码

```
console.log(file.lastModifiedDate == file.lastModifiedDate); //returns false 
```

### W3C 文件 API 规范

```
interface File : Blob {
  readonly attribute DOMString name;
  readonly attribute Date lastModifiedDate;
}; 
```

### 完整的测试代码

[http://playground.html5rocks.com/#read_file_content_as_text](http://playground.html5rocks.com/#read_file_content_as_text)

```
// Content section used alot

var content = document.getElementById('content');

if (!window.FileReader) {
  content.innerHTML = "<p>This browser doesnt support the File API</p>";
} else {
  // Page Layout
  content.innerHTML =
    '<p>Pick a text file or drag one into this area <br> <input type="file" id="file" /></p>' +
    '<b>Content:</b> <br><br> <pre id="file-content"></pre>' +
    '</p>';

  // Input handler
  document.getElementById('file').onchange = function() {
    readFileAsText(this.files[0]);
  };

  // Drag and drop methods
  content.ondragover = function(e) {
    e.preventDefault();
    return false;
  };
  content.ondrop = function(event) {
    e.stopPropagation();
    readFileAsText(event.dataTransfer.files[0]);
    return false;
  };

  function readFileAsText(file) {
    var reader = new FileReader();
    reader.readAsText(file);
    reader.onload = function(event) {
      document.getElementById('file-content').textContent = 
        event.target.result;
    };

    console.log(file.lastModifiedDate == file.lastModifiedDate); //returns false

    reader.onerror = function() {
      document.getElementById('file-content').innerHTML = 'Unable to read ' + file.fileName;
    };
  }
}​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:43:10.153

如果`file.lastModifiedDate`是 NaN，就会发生这种情况。

`NaN != NaN`在javascript中是真的

### 因新信息而编辑

使用更新的信息，如果它每次都检查并返回一个新的日期对象，它就不会是同一个日期。只有在引用完全相同的对象时，对象才在 javascript 中相等。即使它们具有所有相同的属性，它们也不会被视为相等。如果每次都检查日期，它将返回不同的对象，而不是相同的对象，您将得到该结果。

Javascript 没有内置的 "deep-equals" ，但您可以查看[这个问题](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript?lq=1)以获得一些指导。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T17:40:15.977

来自：[https ://www.w3.org/TR/2013/WD-FileAPI-20130912/#dfn-lastModifiedDate](https://www.w3.org/TR/2013/WD-FileAPI-20130912/#dfn-lastModifiedDate)

> 获取时，如果用户代理可以使此信息可用，则必须返回一个新的 Date 对象，该对象初始化为文件的最后修改日期。

我认为这意味着每次你得到`lastModifiedDate`它都会得到一个新`Date`对象。

比较是在对象引用而不是值上进行的。

要比较值，您可以执行以下操作：

```
 console.log(file.lastModifiedDate.getTime() == file.lastModifiedDate.getTime()); 
```

**编辑**：请注意，在[当前的工作规范](https://www.w3.org/TR/FileAPI/#file-attrs)中，该属性`File.lastModifiedDate`被替换`File.lastModified`为可比较的。截至 2016 年 3 月 18 日，仅 Chrome 和 Firefox 支持。

# python - 继承父菜单 OpenErp

> ID：15707483
> 
> 赞同：2
> 
> 时间：2013-03-29T16:39:49.403
> 
> 标签：python, xml, xpath, openerp, inheritance

我想让我的模块菜单“嵌套”在 OpenErp 的采购应用程序的采购订单中。

现在我的模块有以下语句（父级本身）

```
<menuitem id="certificados_parent" name="Certificados" icon="terp-partner"/>
<menuitem id="menu_certificados_parent" name="Manejo de los certificados" parent="certificados_parent"></menuitem>
<menuitem action="action_certificados_certificados" id="menu_certificados_certificados" parent="menu_certificados_parent" string="Result"/> 
```

这是我的表单树中的代码

```
<record id="student_certificados_form" model="ir.ui.view">
    <field name="name">certificados.result.form</field>
    <field name="model">certificados.certificados</field>
    <field name="type">form</field>
    <field name="arch" type="xml">
        <form string="Introducir los datos" >

            <field name="Codigo Arancelario" />
            <field name="Descripcion Arancelaria" />
            <field name="Especificaciones Tecnicas" />
            <field name="Cantidad" />
            <field name="Precio Unitario Declarado" />
            <field name="Valor En Divisas" />
            </form>
    </field>
</record> 
```

另一方面，我在另一个模块“采购申请”（purchase_requisition_view.xml）的视图中看到了这个父表单代码

```
<record model="ir.ui.view" id="purchase_order_form_inherit">
    <field name="name">purchase.order.form.inherit</field>
    <field name="model">purchase.order</field>
    <field name="inherit_id" ref="purchase.purchase_order_form"/>
    <field name="arch" type="xml">
        <field name="validator" position="before">
            <field name="requisition_id"/>
        </field>
    </field>
</record> 
```

我应该怎么做才能完成这项任务，产品申请代码是一个线索吗？

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:01:24.970

转到购买视图 xml 文件并搜索菜单项购买使用该菜单 id 作为菜单的父级 parent="model.xml_id" 示例 =purchase.menu_12" 类似这样的东西将 menu_12 替换为购买菜单的 id 在您的菜单项中使用它作为家长。

采购申请视图 不，它是不同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:06:44.927

```
<menuitem action="mrp_production_action" id="menu_mrp_production_action"
    parent="menu_mrp_manufacturing" sequence="1"/> 
```

从该菜单中获取 ID 并在您的模块中创建菜单并将该菜单 ID 作为父级

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T12:05:43.510

```
<menuitem id="menu_certificados_parent" name="Manejo de los certificados" parent="base.menu_purchase_root"></menuitem>
<menuitem action="action_certificados_certificados" id="menu_certificados_certificados" parent="menu_certificados_parent" string="Result"/> 
```

在您的模块中使用此代码。我希望它可以工作

# symfony - 如何在 Symfony 的 Twig 扩展中获取请求对象？

> ID：15707484
> 
> 赞同：22
> 
> 时间：2013-03-29T16:39:54.140
> 
> 标签：symfony, twig

如何访问**Twig Extension**`Request`中的对象？

 **```
namespace Acme\Bundle\Twig;

use Twig_SimpleFunction;

class MyClass extends \Twig_Extension
{
    public function getFunctions()
    {
        return array(
            new Twig_SimpleFunction('xyz', function($param) {

                 ///  here
                 $request = $this->getRequestObject();

            })
        );
    }

    public function getName() {

        return "xyz";

    }

} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-06-05T07:23:57.977

根据评论中的要求，这是将请求注入任何服务的首选方式。它适用于 Symfony >= 2.4。

不再建议注入请求并将我们的服务置于请求范围内。我们应该改用[请求堆栈](http://symfony.com/blog/new-in-symfony-2-4-the-request-stack)。

```
namespace AppBundle\Twig;

use Symfony\Component\HttpFoundation\RequestStack;

class MyClass extends \Twig_Extension
{
    private $requestStack;

    public function __construct(RequestStack $requestStack)
    {
        $this->requestStack = $requestStack;
    }

    public function getFunctions()
    {
        $requestStack = $this->requestStack;

        return array(
            new \Twig_SimpleFunction('xyz', function($param) use ($requestStack) {
             $request = $requestStack->getCurrentRequest();
           })
        );
    }

    public function getName()
    {
        return "xyz";
    }
} 
```

**应用程序/配置/服务.yml**

```
app.twig_extension:
    class: AppBundle\Twig\MyExtension
    arguments:
        - '@request_stack'
    tags:
        - { name: twig.extension } 
```

文件：

*   [请求堆栈 API](http://api.symfony.com/2.7/Symfony/Component/HttpFoundation/RequestStack.html)
*   [请求堆栈公告](http://symfony.com/blog/new-in-symfony-2-4-the-request-stack)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-29T17:01:20.060

将您的扩展注册为服务并为其提供容器服务：

```
# services.yml

services:

    sybio.twig_extension:
        class: %sybio.twig_extension.class%
        arguments: 
            - @service_container
        tags:
            - { name: twig.extension, priority: 255 } 
```

然后通过您的（树枝扩展）类构造函数检索容器，然后通过请求：

```
<?php 
    // Your class file:

    // ...

    class MyClass extends \Twig_Extension
    {
        /**
         * @var ContainerInterface
         */
        protected $container;

        /**
         * @var Request
         */
        protected $request;

        /**
         * Constructor
         * 
         * @param ContainerInterface $container
         */
        public function __construct($container)
        {
            $this->container = $container;

            if ($this->container->isScopeActive('request')) {
                $this->request = $this->container->get('request');
            }
        }

        // ... 
```

请注意，测试范围很有用，因为运行控制台命令时没有请求，它避免了警告。

就是这样，您可以使用请求！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-01T07:11:54.377

我建议`'needs_environment' => true`为您设置`Twig_SimpleFunction`，然后将其添加`\Twig_Environment`为您的函数的第一个参数。然后在你的函数中你可以找到这样的请求：

`$request = $twig->getGlobals()['app']->getRequest();`

所以整个函数看起来像这样：

```
...
public function getFunctions() {
    return [
        new \Twig_SimpleFunction('xyz', function(\Twig_Environment $env) {
            $request = $twig->getGlobals()['app']->getRequest();
        }, [
            'needs_environment' => true,
        ]),
    ];
}
... 
```**

# c# - 为什么解析这个 DDL 会出错，为什么引擎不能更具体地定位它？

> ID：15707487
> 
> 赞同：0
> 
> 时间：2013-03-29T16:40:05.170
> 
> 标签：c#, sql, compact-framework, sql-server-ce, windows-ce

使用此 DDL（“BLA”是“CCR130329093342”形式的表名）

```
ALTER TABLE BLA ADD salvation float NOT NULL WITH DEFAULT 
```

...我得到，“*解析查询时出错。[令牌行号，令牌行偏移量，，令牌错误，，]* ”

好的，那么，哪个行号？抵消？它知道/认为有问题，但不能或不会说什么或在哪里。

这个 DDL 有什么明显的问题吗？应该是这样的：

```
ALTER TABLE BLA ADD salvation float NOT NULL WITH DEFAULT 0.0 
```

?

## 更新

*如果我将 DDL 恢复为原始的简单类型（不添加“NOT NULL”，只需“alter bla add blah nvarchar(12)”，除了*声明的那个之外，我不会收到“无法解析查询”的消息一个浮点数（如上所示）...... SQL-Server-CE 讨厌浮点数，还是......？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:41:26.193

默认需要一个值：

```
alter table bla add salvation float not null with default(0.0) 
```

# jquery - jQuery 触发器 - 如何将有关如何触发事件的信息传递给处理程序

> ID：15707494
> 
> 赞同：1
> 
> 时间：2013-03-29T16:40:25.007
> 
> 标签：jquery, javascript-events, event-handling

我想做这样的事情

```
$(document).on('click','.someclass',function(){
   $('.otherclass').trigger('keyup',{aField:'my data'});
});

$(document).on('keyup','.otherclass',function(e){
   console.log(e.aField); // and to have printed 'my data'
}); 
```

我想知道是否有办法做类似的事情，但要工作。因为这样是行不通的。

* * *

也许这个例子不是很清楚：当我点击一个链接时，我想`keyup`在 a 上触发事件`input`，但我也想`{aField:'my data'}`在触发它时传递一个对象。

* * *

反正我自己已经搞定了。`object`解决方案是在处理程序中再添加一个参数

```
$(document).on('keyup','.otherclass',function(e,object){
    console.log(object.aField); // this printed 'my data'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:44:41.717

*更新：*为什么不为这两个实例使用一个通用的处理程序，而不是尝试触发某些东西。

```
function handleInputAction(data) {
  console.log(data.aField)
}

$(document).on('click','.someclass',function(){
   handleInputAction({aField:'my data'});
});

$(document).on('keyup','.otherclass',function(e){
   handleInputAction(e.aField);
}); 
```

使用其中一个`$(this)`或事件目标。

```
$(document).on('keyup','.otherclass',function(e){
  console.log($(this).attr('aField'));
  // or
  console.log(e.currentTarget.aField);
  // or
  console.log($(e.currentTarget).attr('aField'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:09:10.387

这是答案

```
$(document).on('click','.someclass',function(){
   $('.otherclass').trigger('keyup',{aField:'my data'});
});

$(document).on('keyup','.otherclass',function(e, obj){
   console.log(obj.afield); // and to have printed 'my data'
}); 
```

This is the correct way of passing arguments to an event via trigger, full documentation available here [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

# java - 使用 JPanel 将 ChartPanel 添加到 JTabbedPane

> ID：15707496
> 
> 赞同：3
> 
> 时间：2013-03-29T16:40:30.977
> 
> 标签：java, charts, jfreechart, jtabbedpane, chartpanel

我想添加`JFreeChart`到`JPanel`然后添加`JPanel`到`JTabbedPane`. 我设法在 上显示`JFreeChart`，`JFrame`但我想添加`JFreeChart`为`JTabbedPane`.

显示图表的代码：

```
public class Chart extends javax.swing.JPanel {

  private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

        JPanel jPanel1 = new JPanel();
        DefaultCategoryDataset dataset = new DefaultCategoryDataset();
        dataset.setValue(60, "Marks", "Student 1");
        dataset.setValue(40, "Marks", "Student 2");
        dataset.setValue(90, "Marks", "Student 3");
        dataset.setValue(50, "Marks", "Student 4");
        dataset.setValue(70, "Marks", "Student 5");
        dataset.setValue(30, "Marks", "Student 6");

        JFreeChart chart = ChartFactory.createBarChart(
            "Student Marks", "Student Name", "Marks", dataset,
            PlotOrientation.VERTICAL, false, true, false);
        CategoryPlot p = chart.getCategoryPlot();
        p.setRangeGridlinePaint(Color.BLACK);
        ChartPanel panel = new ChartPanel(chart);
        panel.setDomainZoomable(true);
        jPanel1.add(panel, BorderLayout.CENTER);
        panel.setPreferredSize(new java.awt.Dimension(500, 270));

  } 
```

添加到 TabbedPane 的代码：

```
tabStoreTrans.add("chart", new Chart()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T04:51:30.333

如[*如何使用选项卡式窗格*](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)中所示，您可以将组件添加到选项卡式窗格。`ChartPanel`, 的子类`JPanel`, 就是这样一个组件。除了[这些示例](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html#eg)之外，您还可以使用下面的示例来试验其他功能。

由于您是新手，请[限制](https://stackoverflow.com/a/2561540/230513)使用问题中暗示的 NetBeans GUI 编辑器，但继续使用 NetBeans IDE。

![选项卡式图表](../Images/3b365a8e55834fa056b02edaac89b201.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.Timer;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

/**
 * @see https://stackoverflow.com/a/15715096/230513
 * @see https://stackoverflow.com/a/11949899/230513
 */
public class TabChart {

    private static final int N = 128;
    private static final Random random = new Random();
    private int n = 1;

    private void display() {
        JFrame f = new JFrame("TabChart");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JTabbedPane jtp = new JTabbedPane();
        jtp.add(String.valueOf(n), createPane());
        f.add(jtp, BorderLayout.CENTER);
        JPanel p = new JPanel(new FlowLayout(FlowLayout.RIGHT));
        p.add(new JButton(new AbstractAction("Add") {
            @Override
            public void actionPerformed(ActionEvent e) {
                jtp.add(String.valueOf(++n), createPane());
                jtp.setSelectedIndex(n - 1);
            }
        }));
        f.add(p, BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private ChartPanel createPane() {
        final XYSeries series = new XYSeries("Data");
        for (int i = 0; i < random.nextInt(N) + N / 2; i++) {
            series.add(i, random.nextGaussian());
        }
        XYSeriesCollection dataset = new XYSeriesCollection(series);
        new Timer(1000, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                series.add(series.getItemCount(), random.nextGaussian());
            }
        }).start();
        JFreeChart chart = ChartFactory.createXYLineChart("Test", "Domain",
            "Range", dataset, PlotOrientation.VERTICAL, false, false, false);
        return new ChartPanel(chart) {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(480, 240);
            }
        };
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TabChart().display();
            }
        });
    }
} 
```

# security - 可以在具有 servlet api-2.5 和 web.xml 2.5 版本的应用程序中进行 HttpOnly 设置吗？

> ID：15707497
> 
> 赞同：1
> 
> 时间：2013-03-29T16:40:33.117
> 
> 标签：security, cookie-httponly

想要为我们的应用程序启用会话 cookie 的 httpOnly 属性。我们使用 servlet-api 2.5 版本和 web.xml 作为 2.5 .. 现在我尝试在 web.xml 中添加以下代码

```
<cookie-config>
 <http-only>true</http-only>
</cookie-config> 
```

我在`web.xml`at遇到错误解析错误`<cookie-config>`

任何人都可以帮助解决这个问题..我是否需要将 servlet 版本更新为 3 并将 web.xml 更新为 3...

或任何其他用java代码本身编写的方法..我们使用的是jboss 5版本..

# entity-framework - 值“”无效

> ID：15707500
> 
> 赞同：1
> 
> 时间：2013-03-29T16:40:40.023
> 
> 标签：entity-framework, asp.net-mvc-4, poco

为什么编辑屏幕显示我正在编辑的值，但是当我尝试保存时，编辑 HTTPPOST 有一个空对象？

得到一个我已经追踪但没有看到原因的错误。我有一个用于下拉列表的类，所以它只有 AdvisoryTypeID 和 AdvisoryType。但现在我正在创建屏幕供用户查看网格中的所有内容（索引）、添加新的（创建）和更改现有的（编辑）。从数据库读取索引屏幕没有问题。编辑也是如此。创建不需要。

但是 Edit 和 Create 在 HTTPPOST 上都给出了相同的错误。错误是“值'无论我输入什么'都是无效的”。调试代码出现了原因：“advisoryTypes”变量为空，原因我不明白：

控制器（用于编辑帖子）

```
[Authorize]
[HttpPost]
public ActionResult Edit(AdvisoryTypes advisoryType)
{
    try
    {
       if (ModelState.IsValid)  //never get past this because it's null above
etc....
} 
```

我将此与另一个可以很好地编辑和创建的屏幕进行了比较，它们是相同的（例如，字段名称除外）。我难住了。

模型

```
public class AdvisoryTypes
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int AdvisoryTypeID { get; set; }

    [Display(Name = "Type")]
    [Required]
    public string AdvisoryType { get; set; }
} 
```

控制器（用于编辑获取）

```
[Authorize]
    public ActionResult Edit(int id = 0)
    {
        AdvisoryTypes advisoryType = db.AdvisoryType.Find(id);
        if (advisoryType == null)
        {
            return HttpNotFound();
        }

        return View(advisoryType);
    } 
```

看法

```
model TheNewSolution.Models.AdvisoryTypes

@{
 ViewBag.Title = "Edit Advisory Type";
}

<h2>Edit Advisory Type</h2>
@*<br />*@
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Advisory</legend>
    <table>
        <tr>
            <td>
                @Html.HiddenFor(model => model.AdvisoryTypeID)
                <div class="editor-label">
                    @Html.LabelFor(model => model.AdvisoryType)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.AdvisoryType)
                    @Html.ValidationMessageFor(model => model.AdvisoryType)
                </div>
            </td>
        </tr>
    </table>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
}

<div>
@Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
@Scripts.Render("~/bundles/jqueryval")
} 
```

第二部分 现在一些奇怪的背景：这是自将 EF 从 5 更新到 6 alpha3 以来我创建的第一个模型/控制器/视图（必须这样做，因为我在同一个项目中有 POCO 和 edmx，这解决了那个错误）。我手动创建了模型。当我尝试通过向导创建控制器时，向导给出了错误“无法检索 ProjectName.Models.AdvisoryProviders 的元数据”。无法将类型为“System.Data.Entity.Core.Objects.ObjectContext”的对象转换为类型'System.Data.Objects.ObjectContext'。”。

结果是必须通过复制/粘贴另一个控制器并进行更改来手动创建控制器，然后以相同的方式创建我的视图。我怀疑这都是相关的，但也许不是。如果这证明不相关，我将删除它并作为另一个问题发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:31:37.863

来自 EF 的错误“无法检索我以前见过的 ProjectName.Models.AdvisoryProviders 的元数据，但这只是因为我使用的是 MySQL，我发现解决此类错误并确保一切正常的唯一方法是使用[http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d) 从数据库创建模型，然后使用[http://blog.stevensanderson.com/2011/01/13/scaffold- your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/) 使用视图创建控制器，而不是为 EF 创建视图的错误版本。

不久前，我用 EF5 发布了这些问题，它真的很痛苦，MVSCaffolding 似乎比使用 MVC 4 的内置 TT 模板更好地处理这种痛苦

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:00:24.780

我不确定为什么会解决这个问题，但这就是我所做的。我需要在我的应用程序中为三种不同的事物（类型、提供者、类别）创建上面提到的屏幕（网格索引、创建、编辑）。我做了第一个，类型，导致上述问题。

我决定通过从“类型”屏幕复制和粘贴控制器和视图来为“提供者”创建相同的内容，然后根据需要更改模型和字段名称，期望屏幕具有相同的错误。但屏幕都正常工作。我又为“类别”做了一次，这也有效。然后我删除了“类型”的失败创建和编辑屏幕，并从“提供者”屏幕重新创建了它们。他们工作了。

我没有解释。

# jquery - RegEx 和/或 jQuery 允许特定格式的字符串输入

> ID：15707503
> 
> 赞同：1
> 
> 时间：2013-03-29T16:40:53.393
> 
> 标签：jquery, regex, mask

我试图在 HTML 文本框中允许某种格式。此格式必须是 4 组数字 0-99，以连字符分隔。例如，4-4-4-4 或 4-55-4-55 或 44-55-4-55。我找到了这个[qMask jQuery 插件](http://digitalbush.com/projects/masked-input-plugin/)，它让我 99% 都能到达我想要的地方。但是，在每个数字字段中，它将接受 1 个数字或 2 个数字，而不是 1 个数字或 2 个数字。

这是我的代码：`$("#lce").mask("9-9-9-9");`导致每个块接受 1 个数字

我也试过：`$("#lce").mask("99-99-99-99");`Results in required 2 numbers per block

并且：`$("#lce").mask("9?-9?-9?-9?");`以及交替使用 9 和 ? 的任一方式都会导致每个块接受 1 个数字

还尝试指定我自己的标准来搜索每个该站点：

`$.mask.definitions['i'] = "[0-9]|[0-9][0-9]";`

`$("#lce").mask("i-i-i-i");`导致每个块接受 1 个数字。

我所做的一切都不起作用，我要么对 RegEx 了解不足，无法指定我正在寻找的内容，要么插件不接受 RegEx 的预期方式。

目标是有一个类似于在 Windows 计算机中输入静态 IP 的输入。您可以键入 1-3 个字符并使用 [句点] 键移动到下一个块。

有人有任何提示吗？我已经搜索过，但我发现没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:18:26.970

您可以使用[ruoso](https://github.com/ruoso/jquery-regex-mask-plugin)正则表达式插件（小于您链接的插件）。

然后使用以下正则表达式掩码：

```
$("#yourInputFieldId").regexMask(/^(\d{1,2}-\d{1,2}-\d{1,2}|\d{1,2}-\d{1,2}-|\d{1,2}-\d{1,2}|\d{1,2}-|\d{1,2}){1}$/); 
```

# php - 合并相似的数组键

> ID：15707507
> 
> 赞同：0
> 
> 时间：2013-03-29T16:41:10.287
> 
> 标签：php, arrays

所以我正在搜索大量文本并提取常用短语，然后我最终得到一个这样的数组：

```
Array(
    [past due] => 21
    [past due notice] => 7
    [past due 60 day] => 17
    [60 day notice] => 32
) 
```

键是短语，值是短语在给定文本中出现的次数。在上面的示例中，我想组合这些键并对值求和，因为它们对我来说都意味着同样的事情。所以我最终会得到一个这样的数组：

```
Array(
    [past due] => 77
) 
```

这只是一个例子，键、值等会不断变化。我刚刚开始这个项目，所以还没有代码可以发布。我只是在寻找想法、方向等，所以如果有人做了类似的事情或作为想法，我不必重新发明轮子。一如既往，提前致谢！

> **更新：**
> 
> 有了这里的所有贡献以及阅读其他问题，我想我将在构建数组之前尝试使用正则表达式对它们进行分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:44:34.553

我认为有非常相似的问题，您可以在其中找到答案。

检查这个：

[合并具有相同键的数组](https://stackoverflow.com/questions/5881443/merging-arrays-with-the-same-keys)

[PHP - 合并多维数组中的重复数组键](https://stackoverflow.com/questions/2165406/php-merge-duplicate-array-keys-in-a-multidimensional-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:17:36.060

您可以使用[`array_sum`](http://php.net/manual/en/function.array-sum.php)：

```
$result = array('past_date' => array_sum($array)); 
```

当然，这需要您先构建数组，按共同含义进行分组。很明显，PHP 不理解语言的语义。

# objective-c - AVFoundation 重现视频循环

> ID：15707509
> 
> 赞同：2
> 
> 时间：2013-03-29T16:41:10.510
> 
> 标签：objective-c, video, avfoundation, avassetreader

我需要在我的 OpenGL 应用程序中无限期地再现视频（在视频结束时重新启动视频）。为此，我正在尝试利用 AV 基础。我创建了一个 AVAssetReader 和一个 AVAssetReaderTrackOutput，并利用 copyNextSampleBuffer 方法获取 CMSampleBufferRef 并为每个帧创建一个 OpenGL 纹理。

```
 NSString *path = [[NSBundle mainBundle] pathForResource:videoFileName ofType:type];
    _url = [NSURL fileURLWithPath:path];

    //Create the AVAsset 
    _asset = [AVURLAsset assetWithURL:_url];

    //Get the asset AVAssetTrack
    NSArray *arrayAssetTrack = [_asset tracksWithMediaType:AVMediaTypeVideo];
    _assetTrackVideo = [arrayAssetTrack objectAtIndex:0];

    //create the AVAssetReaderTrackOutput
    NSDictionary *dictCompressionProperty = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:kCVPixelFormatType_32BGRA] forKey:(id) kCVPixelBufferPixelFormatTypeKey];
    _trackOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:_assetTrackVideo outputSettings:dictCompressionProperty];

    //Create the AVAssetReader
    NSError *error;
    _assetReader = [[AVAssetReader alloc] initWithAsset:_asset error:&error];
    if(error){
        NSLog(@"error in AssetReader %@", error);
    }
    [_assetReader addOutput:_trackOutput];
    //_assetReader.timeRange = CMTimeRangeMake(kCMTimeZero, _asset.duration);

    //Asset reading start reading
    [_assetReader startReading]; 
```

在我的 GLKViewController 的 -update 方法中，我调用以下内容：

```
if (_assetReader.status == AVAssetReaderStatusReading){
    if (_trackOutput) {
        CMSampleBufferRef sampleBuffer = [_trackOutput copyNextSampleBuffer];
        [self createNewTextureVideoFromOutputSampleBuffer:sampleBuffer]; //create the new texture
    }
}else if (_assetReader.status == AVAssetReaderStatusCompleted) {
    NSLog(@"restart");
    [_assetReader startReading];
} 
```

在 AVAssetReader 处于读取状态之前一切正常，但是当它完成读取并且我尝试使用新调用 [_assetReader startReading] 重新启动 AVAssetReading 时，应用程序崩溃而没有输出。我做错了什么？完成阅读后重新启动 AVAssetReading 是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-11T11:12:08.827

`AVAssetReader` doesn't support seeking or restarting, it is essentially a sequential decoder. You have to create a new `AVAssetReader` object to read the same samples again.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T16:19:49.687

Thanks Costique! Your suggestion brings me back on the problem. I finally restarted the reading by creating a new AVAssetReader. However in order to do that I noted that a new AVAssetReaderTrackOutput must be created and added to the new AVAssetReader e.g.

```
[newAssetReader addOutput:newTrackOutput]; 
```

# android - EditText 的串联

> ID：15707513
> 
> 赞同：1
> 
> 时间：2013-03-29T16:41:20.010
> 
> 标签：android, android-edittext

在我的 Android 应用程序中，我有 4 个 EditText，用户在其中放置他的信息

而且我想创建另一个 EditText，其中 4 EditText 中的所有信息都被连接起来......但我真的不想这样做......

这是我的代码：

```
private Editable mtext1 = null;
private Editable mtext2 = null;
private Editable mtext3 = null;
private Editable mtext4 = null;

EditText mtext5;

PendingIntent mNfcPendingIntent;
IntentFilter[] mWriteTagFilters;
IntentFilter[] mNdefExchangeFilters;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mNfcAdapter = NfcAdapter.getDefaultAdapter(this);

    setContentView(R.layout.main);

    findViewById(R.id.write_tag).setOnClickListener(mTagWriter);

    //final Button quitBut = (Button) findViewById(R.id.button1);

    mNoteBarCode = ((EditText) findViewById(R.id.noteBareCode));
    mNoteAirport = ((EditText) findViewById(R.id.noteAirport));
    mNoteFlightNumber = ((EditText) findViewById(R.id.noteFlightNumber));
    mNoteName = ((EditText) findViewById(R.id.noteName));
    mNote = ((EditText) findViewById(R.id.noteFull));

    mtext1 = mNoteBarCode.getText();
    mtext2 = mNoteAirport.getText();
    mtext3 = mNoteFlightNumber.getText();
    mtext4 = mNoteName.getText();
    mtext5 = (EditText) mtext1 + (EditText) mtext2 + .......; // doesn't work
    mtext5 = (EditText) mNote.getText(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:46:01.170

```
String firstString = firstET.getText().toString();   // get string from first EditText
String  secondString = secondET.getText().toString();  // get string from second EditText
EditText concatenatedET = (EditText) findViewById(R.id.your_edittext);  //declare EditText you want them put in together
concatentatedET.setText(firstString + secondString);  // put the string values in 
```

让我知道这是否适合您，或者您是否需要更好的解释

# jquery - 如何在不使用 php 的情况下将数组值传递给 jquery 中的任何 url？

> ID：15707516
> 
> 赞同：0
> 
> 时间：2013-03-29T16:41:28.073
> 
> 标签：jquery, html

嗨朋友我是 jquery 的初学者....我有一个限制，我不应该使用 php...所以

```
var fields = new Array(

        $('#username').val(),
        $('#password').val(),
        $('#email').val(),
        $('#firstname').val() + ' ' + $('#lastname').val(),
        $('#age').val(),
        $('#gender').val(),
        $('#country').val()
    ); 
```

在上面的编码中，我从表单中获取了所有这些字段的值，但是表单的动作属性是#，但是所有这些值都被获取并因此现在放入上面的数组中以连接到 DB，我如何传递这些任何 url 的值....我只是有一个困难，我无法在表单操作中指定，因为我在其中使用了 #....请帮助我提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:04:29.410

一种方法是您可以直接在表单上调用[.serialize()](http://api.jquery.com/serialize/)函数，如下所示：

```
var str = $("form").serialize();
//check as per your need 
```

它将序列化所有元素，并以字符串形式为您提供，您可以轻松地在 url 中传递。

另一种方法是，您可以在数组上调用**.toString()函数将其转换为字符串。**

```
var field = new Array(1,2,3,5,6);
console.log(field.toString()); 
```

# jquery - 如何使用 jQuery 将整个 HTML 输入文件元素替换为另一个元素？

> ID：15707518
> 
> 赞同：1
> 
> 时间：2013-03-29T16:41:34.827
> 
> 标签：jquery, html

如果您右键单击网页并在 Web 浏览器中单击“查看源代码”，您会看到如下内容：

```
<input type="file" id="filename" name="filename" size="40/> 
```

并且您想将其替换为稍作修改的版本，例如：

```
<input type="file" id="file_0" name="file_0" size="40/><input type=hidden name="randominput" value="somevalue"> 
```

你会如何在 jQuery 中做到这一点？

我尝试了以下不起作用：

```
$(' <input type="file" id="filename" name="filename" size="40/>').replaceWith('<input type="file" id="file_0" name="file_0" size="40/><input type=hidden name="randominput" value="somevalue">'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:45:15.277

你只需要这样的东西：

```
$("#filename").parent().html("your new html here"); 
```

您需要获取父标签，否则您会将新标签插入旧标签中。

但是让父母摆脱旧标签，用新标签代替它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:52:19.013

尝试：

```
var newInput = $('<input>');
newInput
   .attr('type','file')
   .attr('id','file_0')
   .attr('name','file_0')
   .attr('size','40');

var hiddenInput = $('<input>');
hiddenInputer.attr('type','hidden')
   .attr('name','randomInput')
   .attr('value','someValue');

newInput.append(hiddenInput);
$('#filename').replaceWith(newInput); 
```

# postgresql - COPY 命令：仅从 csv 复制特定列

> ID：15707519
> 
> 赞同：9
> 
> 时间：2013-03-29T16:41:34.870
> 
> 标签：postgresql, header, postgresql-copy

`COPY`我对PostgreSQL 中的命令有疑问。我有一个 CSV 文件，我只想将一些列值复制到我的 PostgreSQL 表中。

是否有可能做到这一点？我熟悉使用`COPY`命令将所有数据从 CSV 复制到表中，使用标题映射到列名，但是当我只想要一些列时，这怎么可能呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T17:20:42.610

要么预处理 CSV 文件，要么（我可能会做的）导入到目标表的临时副本中，并且`INSERT`在第二步中只选择列：

```
CREATE TEMP TABLE tmp AS SELECT * FROM target_table LIMIT 0;
ALTER TABLE tmp ADD COLUMN etra_column1 text
             ,  ADD COLUMN etra_column2 text;  -- add excess columns
COPY tmp FROM '/path/tp/file.csv';

INSERT INTO target_table (col1, col2, col3)
SELECT col1, col2, col3 FROM tmp  -- only reelvant columns
WHERE  ...  -- optional, to also filter rows 
```

会话结束时会自动删除一个临时表。如果处理时间较长，请使用常规表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-13T16:49:49.933

从程序复制目标表'cut -f1,2,3 -d，/path/tp/file.csv'；

# kineticjs - Kineticjs 中的指针事件

> ID：15707529
> 
> 赞同：1
> 
> 时间：2013-03-29T16:42:05.130
> 
> 标签：kineticjs

在 Kinetik 中，如果我有这个：

1.  具有事件对象的层

2.  上面，我有另一层重叠的对象

如何保留第 1 层事件？

（类似于 CSS 中的指针事件属性？）

谢谢 ： ） ！

例如：

在第 1 层：`

```
 var bolinche = new Kinetic.Circle({
   x: this.coordBolincheX,
   y: this.coordBolincheY,
   ......
   bolinche.on('mouseup', function() {                                                                          
   var getId = this.getId();
                                  obDibujaFiguras.creaTrazados(getId);
   }); 
```

`

在第 2 层，同一位置的另一个形状。

然后，事件bolinche.on 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T04:59:36.017

**是的，您可以单击顶层到底层，类似于 pointer-events:none**

你只是告诉你的顶层不要听事件......像这样：

```
myTopLayer.setListening(false); 
```

现在所有鼠标事件都会冒泡到底层。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/WyW44/](http://jsfiddle.net/m1erickson/WyW44/)

```
<!DOCTYPE HTML>
<html>
  <head>
  </head>
  <body>
    <p>Green is on top layer</p>
    <p>Blue is on bottom layer</p>
    <p>You can click through the green rect to the blue rect</p>
    <p>Works because green layer has "listening=false"</p>
    <div id="container"></div>

    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.4.0-beta.js"></script>

    <script>

      var stage = new Kinetic.Stage({
        container: 'container',
        width: 400,
        height: 200
      });
      var layerUnder = new Kinetic.Layer();
      stage.add(layerUnder);
      var layerOver = new Kinetic.Layer();
      stage.add(layerOver);

      var box1 = new Kinetic.Rect({
        x: 75,
        y: 30,
        width: 100,
        height:100,
        fill: "blue",
        stroke: 'black',
        strokeWidth: 6,
        draggable: true
      });      
      layerUnder.add(box1);
      layerUnder.draw();

      var box2 = new Kinetic.Rect({
        x: 100,
        y: 50,
        width: 100,
        height:100,
        fill: "green",
        stroke: 'black',
        strokeWidth: 6
      });      
      layerOver.add(box2);
      layerOver.draw();

      // turn off mouse event listening for the top layer
      // now you can click/drag the bottom layer even if the top rect obstructs
      layerOver.setListening(false);

      // listen for clicks on the bottom layer box
      box1.on('click', function(evt){ alert("You clicked the bottom blue rectangle!"); });

    </script>
  </body>
</html> 
```

# python - “导入日期时间”与“从日期时间导入日期时间”

> ID：15707532
> 
> 赞同：58
> 
> 时间：2013-03-29T16:42:23.407
> 
> 标签：python, datetime, attributeerror

我有一个脚本需要在脚本的不同行执行以下操作：

```
today_date = datetime.date.today()
date_time = datetime.strp(date_time_string, '%Y-%m-%d %H:%M') 
```

在我的`import`陈述中，我有以下内容：

```
from datetime import datetime
import datetime 
```

我收到以下错误：

```
AttributeError: 'module' object has no attribute 'strp' 
```

如果我将`import`语句的顺序更改为：

```
import datetime
from datetime import datetime 
```

我收到以下错误：

```
AttributeError: 'method_descriptor' object has no attribute 'today' 
```

如果我再次将`import`语句更改为：

```
import datetime 
```

我收到以下错误：

```
AttributeError: 'module' object has no attribute 'strp' 
```

这里发生了什么，我如何让两者都工作？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-29T16:48:57.717

您的问题是您有一些代码期望`datetime`成为对`datetime` *模块*的引用，而其他代码期望`datetime`成为对`datetime` *类的引用。*显然，不可能两者兼而有之。

当你这样做时：

```
from datetime import datetime
import datetime 
```

您首先设置`datetime`为对类的引用，然后立即将其设置为对模块的引用。当你反过来做时，它是同样的事情，但它最终成为对类的引用。

您需要重命名这些引用之一。例如：

```
import datetime as dt
from datetime import datetime 
```

然后，您可以将引用`datetime.xxxx`模块的表单中的引用更改为`dt.xxxx`.

或者只是`import datetime`更改所有引用以使用模块名称。换句话说，如果只是说`datetime(...)`你需要将引用更改为`datetime.datetime`.

不幸的是，Python 在它的库中有很多这样的东西。[如果他们在PEP 8](http://www.python.org/dev/peps/pep-0008/)中遵循自己的命名准则，则`datetime`该类将被命名`Datetime`，并且使用既`datetime`表示模块又`Datetime`表示类没有问题。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-03-29T16:44:10.177

你不能同时使用这两个语句；该`datetime` **模块**包含一个`datetime` **类型**。您自己的模块中的本地名称`datetime`只能引用一个或另一个。

*仅* 使用`import datetime`，然后确保始终使用`datetime.datetime`来引用包含的类型：

```
import datetime

today_date = datetime.date.today()
date_time = datetime.datetime.strptime(date_time_string, '%Y-%m-%d %H:%M') 
```

现在`datetime`是模块，您可以通过它引用包含的类型。

或者，从模块中导入您需要的*所有*类型：

```
from datetime import date, datetime

today_date = date.today()
date_time = datetime.strptime(date_time_string, '%Y-%m-%d %H:%M') 
```

这`datetime`是模块中的类型。`date`是另一种类型，来自同一模块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T16:49:13.367

`datetime`是一个模块，其中包含一个也称为`datetime`. 您似乎想同时使用两者，但您尝试使用相同的名称来指代两者。类型和模块是两个不同的东西，你不能`datetime`在你的程序中用名字来引用它们。

如果您需要使用模块中除了`datetime`类型之外的任何内容（就像您显然所做的那样），那么您需要使用`import datetime`. 然后，您可以将“日期”类型称为`datetime.date`，将日期时间类型称为`datetime.datetime`。

你也可以这样做：

```
from datetime import datetime, date
today_date = date.today()
date_time = datetime.strp(date_time_string, '%Y-%m-%d %H:%M') 
```

在这里，您只导入您需要的名称（日期时间和日期类型）并直接导入它们，因此您根本不需要引用模块本身。

最终，您必须决定需要使用模块中的哪些名称，以及如何最好地使用它们。如果您只使用模块中的一两个东西（例如，只有`date`and`datetime`类型），直接导入这些名称可能没问题。如果您使用很多东西，最好导入模块并使用点语法访问其中的内容，以避免使用特定于日期的名称混淆全局命名空间。

另请注意，如果您确实导入了模块名称本身，则可以缩短名称以简化输入：

```
import datetime as dt
today_date = dt.date.today()
date_time = dt.datetime.strp(date_time_string, '%Y-%m-%d %H:%M') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-20T05:20:02.617

from datetime import datetime 和普通 import datetime 之间的区别在于，您一次处理一个模块，另一次处理一个类。

strptime 函数仅存在于 datetime 类中，因此您必须使用模块导入该类，否则在调用此函数时必须指定两次 datetime。

这里的问题是，类名和模块名已被赋予相同的名称，因此会产生一些混乱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T16:48:00.103

试试这个：

```
import datetime
from datetime import datetime as dt

today_date = datetime.date.today()
date_time = dt.strptime(date_time_string, '%Y-%m-%d %H:%M') 
```

strp() 不存在。我想你的意思是strptime。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-28T16:25:58.553

```
from datetime import datetime,timedelta
today=datetime.today()
print("Todays Date:",today)
yesterday=today-datetime,timedelta(days=1)
print("Yesterday date:",yesterday)
tommorrow=today+datetime.timedelta(days=1)
print("Tommorrow Date:",tommorrow) 
```

# apache - seo 友好网址的 htaccess 问题 - GoDaddy

> ID：15707535
> 
> 赞同：0
> 
> 时间：2013-03-29T16:42:27.850
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, seo

好的，我正在寻找使用 mod rewrite 为我的网站编写 seo 友好的 url。它在我的 xampp 本地测试服务器上运行良好。但是，我在尝试将其上线时遇到了问题，它似乎根本不起作用。

这是我在 htaccess 文件中写的内容：

```
RewriteEngine On
RewriteRule ^category/([a-zA-Z0-9]+)$ category.php?location=$1 
```

所以想法是改成`mysite.com/category.php?location=london`.`mysite.com/category/london`

最初我认为在 GoDaddy 端打开 mod rewrite 的能力可能是一个问题，所以我联系了 GoDaddy 看看是否是这种情况，他们的回应是：“Mod_rewrite 是安装在所有服务器上的 Apache Web 服务器模块默认情况下我们的 Linux 服务器；它不必安装或启用。我们的 Linux 主机帐户支持大多数 mod_rewrite 功能。因为启用 mod_rewrite 是在全局级别处理的，所以您不需要在 httpd.conf 文件中启用它。您只需将所需的代码添加到 .htaccess 文件的正文中。”

他们基本上暗示错误不在于他们和我的代码。我对 mod 重写不是很有经验，当我在其他服务器上这样写它时，它似乎工作正常。你有什么特别的东西要和godaddy一起写吗？我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:44:23.050

这就是你的 htaccess 文件中的全部内容吗？访问所需的 URL 时遇到什么错误，是 500 内部服务器错误吗？

我通常默认添加的是一个 If 语句：

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteBase /

  RewriteRule ^category/([a-zA-Z0-9_-]+)$ category.php?location=$1 [L]
</IfModule> 
```

顺便说一句，请注意`_-`规则中字符集末尾的 ，例如纽约有一个 SEF 版本，即`new-york`，`category/new-york`将在您的 RewriteRule 中失败。

# c++ - 如何保存矢量 >> 在文件中检索数据？

> ID：15707537
> 
> 赞同：1
> 
> 时间：2013-03-29T16:42:28.690
> 
> 标签：c++, boost

我需要将 a 的内容保存`vector<vector<vector<float> > >`到文件中，然后在正确的位置检索所有值。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:47:46.007

看看 boost 序列化库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T17:11:21.570

如果你想自己做，你可以这样做：

```
std::ofstream file("floats.bin", std::ios::binary);
std::vector<float> f;
std::size_t n = f.size();

// save the size of the vector so you know how much to read
// when you load from file

file.write( reinterpret_cast<char*>( &n ), sizeof(n) );

// write the data

file.write( reinterpret_cast<char*>( f.data() ), sizeof(float) * n ); 
```

您需要对每个内部向量执行此操作。由您决定文件格式的确切细节。不过，请务必考虑不同大小的数据类型。

要读回数据，您首先要读取大小信息，相应地调整向量的大小，然后执行[ifstream::read](http://en.cppreference.com/w/cpp/io/basic_istream/read)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T16:45:54.300

您可以将其以字节为单位写入二进制文件。然后，当您将其读回时，您可以将其读回 char 数组并将其转换为您的类型。

查看[http://courses.cs.vt.edu/cs2604/fall02/binio.html](http://courses.cs.vt.edu/cs2604/fall02/binio.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T18:32:58.430

解决了，谢谢

```
#include <boost/archive/binary_iarchive.hpp>
#include <boost/archive/binary_oarchive.hpp>
#include <boost/serialization/string.hpp> 
#include <boost/serialization/export.hpp> 
#include <boost/serialization/vector.hpp>
#include <boost/serialization/list.hpp>

void saveFeaturesFile(vector<vector<vector<float> > > &features, string filename){ 
    ofstream out(filename.c_str());
    stringstream ss;
    boost::archive::binary_oarchive oa(ss); 
    oa << features;
    out << ss.str();
    out.close();    
}

void loadFeaturesFile(vector<vector<vector<float> > > &features, string filename){
    ifstream in(filename.c_str());
    boost::archive::binary_iarchive ia(in); 
    ia >> features;    
    in.close();
} 
```

并链接 -lboost_iostreams -lboost_serialization

# java - 从 WSDL 自动生成 Web 服务 JAX-WS

> ID：15707538
> 
> 赞同：2
> 
> 时间：2013-03-29T16:42:35.870
> 
> 标签：java, maven, soap, wsdl, jax-ws

我必须创建一个与现有 Web 服务相同的 Web 服务。WSDL 必须相同，因为他们不想更改客户端。我怎样才能做到这一点？

另外，我如何使用 Maven 处理 JAX-WS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:35:29.743

## 从 WSDL 重新创建 Web 服务

根据*Martin Kalin 所著的 Java Web Services: Up and Running*一书，从 WSDL 重新创建服务的一种方法是从客户端存根开始。

```
wsimport -keep -p <your wsdl> 
```

感兴趣的项目将是**生成的 SEI 代码**。

您可以删除特定于客户端的注释，将它们替换为服务器端注释，并在重建 Web 服务时将其用作基本接口。

使用 SEI，您可以轻松创建自己的 SIB 并发布它。

**重要提示：**当然，您**不会**看到他们的 SIB 背后的逻辑，您在任何时候都无法使用。但是上述方法有望对您有用，因为无论如何您都想创建自己的实现。

## 带有 Maven 的 JAX-WS

这值得单独提出一个问题。Maven 有一个 jax-ws 插件（工件 ID：jaxws-maven-plugin）供您开始使用。此链接的更多信息：[将 JAX-WS 与 Maven 结合使用](https://blogs.oracle.com/enterprisetechtips/entry/using_jax_ws_with_maven)。

# javascript - 更简洁地编写 if 语句

> ID：15707540
> 
> 赞同：0
> 
> 时间：2013-03-29T16:42:41.703
> 
> 标签：javascript

在 JavaScript（和大多数其他编程语言）中，我注意到在检查同一变量的多个条件并为每个条件执行相同操作时，很难简洁地编写 if 语句。在这种情况下是否可以更简洁地编写 if 语句？

```
if(x==1|x==2|x==3){ //Is there any way to make this less verbose?
    console.log("X equals either 1 or 2 or 3!");
}

//this isn't syntactically correct, but it's more concise,
//and I wish it were possible to write it more like this
if(x==(1|2|3)){
    console.log("X equals either 1 or 2 or 3!");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:45:21.333

您可以使用正则表达式：

```
if (/^(1|2|3)$/.test(x)) { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T16:47:51.420

你可以使用这个：

```
if ([1, 2, 3].indexOf(x) >= 0) { ... } 
```

如果您需要更复杂的相等性测试，您可以定义自己的函数并将其与内置`some()`迭代器一起使用：

```
function match(value1, value2) { var result = . . .; return result; }

if ([1, 2, 3].some(match.bind(null, x))) { . . . } 
```

(`bind`出现在 JS 1.8.5 中；如果需要向后兼容，可以使用：

```
if ([1, 2, 3].some(function(elt) {return match(x, elt);})) { . . . } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T16:49:58.093

或者

```
if([1, 2, 3].indexOf(x) !== -1){} //since JS 1.6 
```

[Array.indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T16:58:28.937

根据我的经验，大多数时候你可以通过定义一个返回布尔值的方法来使 if 语句更加简洁。您使代码更具可读性，更易于测试，甚至可能以这种方式重用更多代码。

当然，其他答案也很方便。

根据要求提供一个示例：

```
if (password.length < 6 || ! /[0-9]/.test(password) || password == userName) {
    alert('password doesn\'t meet security standards!');
} 
```

对比

```
function isSecurePassword(pw, userName) {
    if (password.length < 6) return false;
    if (/[0-9]/.test(password)) return false;
    if (password == userName) return false;

    return true;
}

if ( ! isSecurePassword(pw, userName)) {
    alert(..);
} 
```

（通常你可能会有对象和方法，并且不必传递变量）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T17:42:58.050

是的，我经常想知道使用相同值的多个 if 语句的简写。

如果您有空闲时间，我建议您探索一些 JS 的函数式编程结构。您也许可以实现更优雅的解决方案。

我无法从头顶想出一个好的或声明，但“和”似乎没有更明智的选择。

```
var Cond = {
    'and': function(val, predicates) {
        return predicates.every( function(predicate) { return predicate(val) } );
    }
}

var predicates = [
    function(val) { return val > 40; }
    function(val) { return val < 45; }
    function(val) { return val === 42; }
];

console.log( Cond.and( 42, predicates ) ); 
```

My example is super lame but you should be easy enough to play around with.

# php - 向 json_decode Twitter API 添加缓存

> ID：15707541
> 
> 赞同：1
> 
> 时间：2013-03-29T16:42:48.267
> 
> 标签：php, caching, twitter, json

我正在尝试向 json_decode 获取 Twitter API 添加缓存机制。重要的部分是关于 $cache 及其下方的 if 的部分。

```
<?php
function buildBaseString($baseURI, $method, $params)
{
    $r = array();
    ksort($params);
    foreach($params as $key=>$value){
        $r[] = "$key=" . rawurlencode($value);
    }

    return $method."&" . rawurlencode($baseURI) . '&' . rawurlencode(implode('&', $r)); //return complete base string
}

function buildAuthorizationHeader($oauth)
{
    $r = 'Authorization: OAuth ';
    $values = array();
    foreach($oauth as $key=>$value)
        $values[] = "$key=\"" . rawurlencode($value) . "\"";

    $r .= implode(', ', $values);
    return $r;
}

$url = "https://api.twitter.com/1.1/statuses/user_timeline.json";

$oauth_access_token = "XXXXXXXXX";
$oauth_access_token_secret = "XXXXXXX";
$consumer_key = "XXXXXXX";
$consumer_secret = "XXXXXXX";

$oauth = array( 'oauth_consumer_key' => $consumer_key,
    'oauth_nonce' => time(),
    'oauth_signature_method' => 'HMAC-SHA1',
    'oauth_token' => $oauth_access_token,
    'oauth_timestamp' => time(),
    'count' => 6,   
    'oauth_version' => '1.0');

$base_info = buildBaseString($url, 'GET', $oauth);
$composite_key = rawurlencode($consumer_secret) . '&' . rawurlencode($oauth_access_token_secret);
$oauth_signature = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
$oauth['oauth_signature'] = $oauth_signature;

$header = array(buildAuthorizationHeader($oauth), 'Expect:');
$options = array( CURLOPT_HTTPHEADER => $header,
    CURLOPT_HEADER => false,
    CURLOPT_URL => $url . '?count=6',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_SSL_VERIFYPEER => false);

$feed = curl_init();
curl_setopt_array($feed, $options);
$json = curl_exec($feed);
curl_close($feed);

$cache = './wp-content/themes/multiformeingegno/twitter_json/'.sha1($url).'.json';
        if(file_exists($cache) && filemtime($cache) > time() - 1000){
            // if a cache file newer than 1000 seconds exist, use it
            $twitter_data = json_decode(file_get_contents($cache));
        } else {
            $twitter_data = json_decode((file_get_contents($url)));
            file_put_contents($cache,json_encode($twitter_data));
        }

    echo "<ul style='color:#6E6E6E'>";
    foreach ($twitter_data as $tweet)
    {
        if (!empty($tweet)) {
            $text = $tweet->text;
            $text_in_tooltip = str_replace('"', '', $text); // replace " to avoid conflicts with title="" opening tags
            $id = $tweet->id;
            $time = strftime('%d %B', strtotime($tweet->created_at));
            $username = $tweet->user->name;
        }
        echo '<li><span title="'; echo $text_in_tooltip; echo '">'; echo $text . "</span><br>
            <a href=\"http://twitter.com/"; echo $username ; echo '/status/'; echo $id ; echo '"><small>'; echo $time; echo '</small></a> - 
            <a href="http://twitter.com/intent/tweet?in_reply_to='; echo $id; echo '"><small>rispondi</small></a> - 
            <a href="http://twitter.com/intent/retweet?tweet_id='; echo $id; echo '"><small>retweet</small></a> - 
            <a href="http://twitter.com/intent/favorite?tweet_id='; echo $id; echo '"><small>preferito</small></a></li>';
    }

    echo '</ul>';
    ?> 
```

不幸的是，我收到了这些错误：

```
FastCGI sent in stderr: "PHP message: PHP Warning:  file_get_contents(https://api.twitter.com/1.1/statuses/user_timeline.json): failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request
 in /wp-content/themes/multiformeingegno/homepage_copy.php on line 62
PHP message: PHP Warning:  file_put_contents(./wp-content/themes/multiformeingegno/twitter_json/38f925d2889d7b60d4f18c448a90ab03419721c4.json): failed to open stream: No such file or directory in /wp-content/themes/multiformeingegno/homepage_copy.php on line 63
PHP message: PHP Warning:  Invalid argument supplied for foreach() in /wp-content/themes/multiformeingegno/homepage_copy.php on line 68" while reading response header from upstream, client: 94.37.252.247, server: multiformeingegno.it, request: "GET /wp-content/themes/multiformeingegno/homepage_copy.php HTTP/1.1", upstream: "fastcgi://unix:/var/run/php5-fpm.sock:", host: "multiformeingegno.it" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:48:26.047

当您遇到缓存未命中时，您正在尝试使用 file_get_contents 打开 twitter url，这是完全没有必要的，因为您已经通过 curl 获取了 json 数据

请参阅下面代码中的 ** 注释 ** 行

```
$feed = curl_init();
curl_setopt_array($feed, $options);
$json = curl_exec($feed);
curl_close($feed);

$cache = './wp-content/themes/multiformeingegno/twitter_json/'.sha1($url).'.json';
    if(file_exists($cache) && filemtime($cache) > time() - 1000){
        // if a cache file newer than 1000 seconds exist, use it
        $twitter_data = json_decode(file_get_contents($cache));
    } else {
        // ** decode the json you got from the curl request here **
        $twitter_data = json_decode($json);
        file_put_contents($cache,json_encode($twitter_data));
    } 
```

# c - C While循环不起作用

> ID：15707546
> 
> 赞同：-6
> 
> 时间：2013-03-29T16:43:01.033
> 
> 标签：c, linux, while-loop

我是 C 编程语言的初学者，我在 linux 平台上有一段用 C 语言编写的代码，我的代码是：

```
 #include <stdio.h>

int main(int argc, char* argv[]){

printf("Count Of Args %d \n",argc);

int i = 0;

while(i < argc){
printf("%s \n",argv[i]);
printf("loop N: %d \n",i);
i++;
}

return 0;

} 
```

虽然循环不起作用，我不知道为什么......请告诉我问题出在哪里？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:46:23.773

完美运行：

```
$ ./program abc def
Count Of Args 3 
./program 
loop N: 0 
abc 
loop N: 1 
def 
loop N: 2 
```

# php - 使用 PHP 和 jQuery AJAX 将模板添加到页面的最佳实践是什么

> ID：15707548
> 
> 赞同：0
> 
> 时间：2013-03-29T16:43:01.860
> 
> 标签：php, jquery, optimization, memoization, front-controller

我正在尝试在 PHP/jQuery 环境中模仿 ASP Master/Content 页面概念，在其中我可以在母版页中运行 AJAX 调用以动态包含内容页面。我在母版页中添加了一个 div 占位符，并使用以下代码动态添加内容页：

```
 $.ajax({
         url: "ajax.php"
         , type: "POST"
         , data: {'cmd' : 'dashboardView'}
         , success: function(response, sts){
              if(response.flag)
              {
                   $("#divMainContentPHolder").html('');
                   $("#divMainContentPHolder").html(response.mainContent);
              }
              else
                   alert(" unsuccessful!");
         }
         , dataType: "json"
     }); 
```

代码运行正常，但问题是，由于内容页面中有一些javascript函数，如果上述函数第二次运行，函数就会重复，从而多次运行。我想知道是否有人可以帮助我了解这种开发的最佳实践是什么。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T23:21:39.637

如果您希望一个函数只运行一次，只需命名它以重新定义它：

```
success: function onetimer(response, sts){
          if(response.flag)
          {
               $("#divMainContentPHolder").html('');
               $("#divMainContentPHolder").html(response.mainContent);
          }
          else
               {
               alert(" unsuccessful!");
               }

          onetimer = function(){}; /* redefine me as an empty function */
     } 
```

随后的调用将无济于事。

# c# - 如何在 C# XML 摘要中显示泛型类型

> ID：15707551
> 
> 赞同：5
> 
> 时间：2013-03-29T16:43:06.417
> 
> 标签：c#, generics, summary

```
/// <summary>
/// Something about this generic method which works with ??? type.
/// </summary>
/// <typeparam name="T">∙∙∙&lt;/typeparam>
/// <returns></returns>
public T Foo<T>()
{
    ∙∙∙
} 
```

是否可以在摘要标记中写注释以显示当前给定的泛型类型。（就像视觉工作室一样）？

（**例如**我们可以`Something about this generic method which works with string type.`在工具提示中看到`Foo<string>()`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:55:16.103

这个标签应该这样做`<typeparamref name="T"/>`

[文档注释的推荐标签（C# 编程指南）](http://msdn.microsoft.com/en-us/library/5ast78ax.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T14:17:22.527

我认为您应该使用**GhostDoc**。[GhostDoc 链接](http://submain.com/products/ghostdoc.aspx)。使用快捷键 Ctrl + Shift + d on 方法。它生成文档。

# c# - jQuery Datatables columnfilter 宽度问题

> ID：15707553
> 
> 赞同：1
> 
> 时间：2013-03-29T16:43:08.497
> 
> 标签：c#, jquery, .net, datatables

我遇到了一个问题，当我将 columnFilter() 应用于 jQuery Datatables 时，列宽变得非常大。我尝试对每个 aoColumn 使用 sWidth ，但没有成功。另外，我也关闭了 bAutoWidth，但没有成功。

这是我的数据表：

```
oAgentDataTable = $("#agentDataTable").dataTable({
    "bServerSide": true,
    "sAjaxSource": "Agents/GetAgents",
    "bProcessing": true,
    "aoColumns": [
        {
            "mDataProp": "FirstName"
        },
        { "mDataProp": "LastName" },
        {
            "mDataProp": "AnniversaryDate",
            "bSearchable": false,
            "bSortable": false
        },
        { "mDataProp": "Location" },
        {
            "mDataProp": "Active",
            "bSearchable": false
        },
        {
            "mDataProp": "Links",
            "bSearchable": false,
            "bSortable": false,
            "fnRender": function (oObj) {
                return "<input type='hidden' value='" + oObj.aData['ID'] + "'/>";
            }
        }
    ],
    "fnDrawCallback": function (oSettings) {
        $('#agentDataTable tbody tr').each(function () {
            $(this).click(function () {
                // Calls Agent Edit Partial
                $.get("/Agents/Edit/" + $(this).find("td:last input").val(), function (data) {
                    $("#partialContentHolder").html(data);
                    $(".datepicker").datepicker();
                    applyUnPaidFeeDataTable();
                    applayPaidFeeDataTable();
                });
            });
        });
    }
}).columnFilter({
    sPlaceHolder: "head:before",
    "aoColumns": [
        { type: "text" },
        { type: "text" },
        { type: "date-range" },
        { type: "text" },
        {
            type: "select",
            values: ["True", "False"]
        },
        null
    ]
}); 
```

标记：

```
<table id="agentDataTable">
<thead>
    <tr>
        <th>
            First Name
        </th>
        <th>
            Last Name
        </th>
        <th>
            Anniversary Date
        </th>
        <th>
            Location
        </th>
        <th>
            Both
        </th>
        <th></th>
    </tr>
</thead>
<tbody>
</tbody>
<tfoot>
    <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Anniversary Date</th>
        <th>Location</th>
        <th>Active</th>
        <th></th>
    </tr>
</tfoot>
</table> 
```

这是渲染时的结果：

![结果](../Images/c81e81555324a25c0ef9b473c4de5133.png "结果") 更新：

我弄清楚那是什么。asp.net mvc 生成的 site.css 具有以下输入样式：

```
input, textarea {
border: 1px solid #e2e2e2;
background: #fff;
color: #333;
font-size: 1.2em;
margin: 5px 0 6px 0;
padding: 5px;
width: 300px; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:45:56.413

我在使用 Datatables 时也遇到了这个问题。最简单和最干净的解决方法是将标题中列的宽度设置为 css 类。

```
 <thead>
    <tr>
      <th class="firstNameColumn">
        First Name
      </th>
      <th class="lastNameColumn">
        Last Name
      </th>
      <th class="AnniversaryDataColumn">
        Anniversary Date
      </th>
      <th class="LocationColumn">
        Location
      </th>
      <th class="BothColumn">
        Both
      </th>
      <th></th>
  </tr>
</thead> 
```

然后根据您是否使用响应式 UI，您可以设置确切的列宽或响应式 UI 最小/最大宽度。还要确保使用样式绑定表格。我最终为表格设置了最小宽度，以便我的数据始终正确显示。它不是响应式 UI 的理想选择，但表格何时是理想的？哈哈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-11T16:43:36.867

这个CSS为我解决了

```
.display .text_filter {
width: 100%;
height: auto;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
margin: 0 auto;
padding: 3px; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:41:19.437

我认为 css 样式会导致宽列。输入的宽度似乎是用固定数字定义的（可能是！important），因此数据表无法动态计算列宽。因此，请查看您的 css 样式表并更正输入的宽度规范。希望这可以帮助。

# grails - 使用 Groovy 从 OpenLDAP 服务器读取和保存二进制图像

> ID：15707555
> 
> 赞同：2
> 
> 时间：2013-03-29T16:43:16.013
> 
> 标签：grails, groovy, ldap, apacheds

我正在尝试从 OpenLDAP 服务器保存图像。它是二进制格式，我的所有代码似乎都可以工作，但是图像已损坏。

然后我尝试在 PHP 中执行此操作并成功，但我想在 Grails 项目中执行此操作。

**PHP 示例（工作）**

```
<?php
    $conn = ldap_connect('ldap.example.com') or die("Could not connect.\n");
    ldap_set_option($conn, LDAP_OPT_PROTOCOL_VERSION, 3);
    $dn = 'ou=People,o=Acme';
    $ldap_rs = ldap_bind($conn) or die("Can't bind to LDAP");
    $res = ldap_search($conn,$dn,"someID=123456789");
    $info = ldap_get_entries($conn, $res);
    $entry = ldap_first_entry($conn, $res);
    $jpeg_data = ldap_get_values_len( $conn, $entry, "someimage-jpeg");
    $jpeg_filename = '/tmp/' . basename( tempnam ('.', 'djp') );
    $outjpeg = fopen($jpeg_filename, "wb");
    fwrite($outjpeg, $jpeg_data[0]);
    fclose ($outjpeg);
    copy ($jpeg_filename, '/some/dir/test.jpg');
    unlink($jpeg_filename);
?> 
```

**Groovy 示例（不起作用）**

```
def ldap = org.apache.directory.groovyldap.LDAP.newInstance('ldap://ldap.example.com/ou=People,o=Acme')

ldap.eachEntry (filter: 'someID=123456789') { entry ->

    new File('/Some/dir/123456789.jpg').withOutputStream {
        it.write entry.get('someimage-jpeg').getBytes()  // File is created, but image is corrupted (size also doesn't match the PHP version)
    }

} 
```

我如何告诉 Apache LDAP 库“image-jpeg”实际上是二进制而不是字符串？是否有更好的简单库可用于从 LDAP 服务器读取二进制数据？通过查看 Apache 邮件列表，[其他人也遇到了类似的问题](http://mail-archives.apache.org/mod_mbox/directory-api/201105.mbox/%3CBANLkTinHeEihSqcpP92A57D7+OcN_HaNtA@mail.gmail.com%3E)，但我在线程中找不到解决方案。

**技术栈**

*   圣杯 2.2.1
*   [Apache LDAP API 1.0.0 M16](http://directory.apache.org/api/groovy-ldap.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:38:44.453

您是否检查过图像属性值是否是 base-64 编码的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:19:42.290

我找到了答案。Apache Groovy LDAP 库在后台使用 JNDI。使用 JNDI 时，某些条目会自动读取为二进制文件，但如果您的 LDAP 服务器使用自定义名称，库将不知道它是二进制文件。

对于那些使用 Grails 遇到此问题的人，这里是设置特定条目为二进制格式的步骤。

*   创建一个名为“jndi.properties”的新属性文件并将其添加到您的 grails-app/conf 目录（此文件夹中的所有属性文件都自动包含在类路径中）

*   在属性文件中添加一行图像变量的名称：

    `java.naming.ldap.attributes.binary=some_custom_image`

*   保存文件并运行 Grails 应用程序

这是一些将二进制条目保存到文件的示例代码。

```
def ldap = LDAP.newInstance('ldap://some.server.com/ou=People,o=Acme')      
ldap.eachEntry (filter: 'id=1234567') { entry ->             
    new File('/var/dir/something.jpg').withOutputStream {          
        it.write entry.image          
    }         
} 
```

# forms - Symfony2 表单 config.yml 设置“必需”假

> ID：15707564
> 
> 赞同：1
> 
> 时间：2013-03-29T16:43:45.283
> 
> 标签：forms, symfony, config

首先是一个例子，我们可以这样做

```
framework:
    form:            true
    csrf_protection: false 
```

（看看**csrf_protection**）

或者在 formType 中设置它（但如果我们不想在我们拥有的所有表单中这样做，那么在配置中更好）

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Eve\CommonBundle\Form\Entity\formLogin',
        'required' => false,
        //'csrf_protection' => false
    ));
} 
```

我的选择是在 config.yml 中声明它。现在，这是一个例子，问题是......

在 FormType 我们有诸如

```
 'required' => false // disabling html5 check to test POST types 
```

我如何在 config.yml 中设置它？

ps：如果我将它设置为与'csrf_protection'相同的方式它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:18:24.890

似乎没有从配置文件中禁用 html5 验证的选项，请查看参考手册（没有引用它）：[http ://symfony.com/doc/current/reference/configuration/framework.html](http://symfony.com/doc/current/reference/configuration/framework.html)

由于它更多地取决于视图，因此您应该将有效的 html 属性“novalidate”添加到所有表单模板中，并且不要在表单类中管理它（即使可能^^）：

```
<form novalidate="novalidate"></form> 
```

导航器不会验证必填字段（与所有导航器兼容！）。轻松解决你的问题！

# macos - 在 Boxen 之前安装 Git，还是在 Git 之前安装 Boxen？

> ID：15707571
> 
> 赞同：1
> 
> 时间：2013-03-29T16:44:02.050
> 
> 标签：macos, git, boxen

所以，我刚买了一台 Mac，我正在寻找使用 Boxen 来设置工作环境。问题是，设置说明有点混乱。本页介绍：

[https://github.com/boxen/our-boxen#getting-started](https://github.com/boxen/our-boxen#getting-started)

使用 git

```
sudo mkdir -p /opt/boxen
sudo chown ${USER}:admin /opt/boxen
git clone <location of my new git repository> /opt/boxen/repo
cd /opt/boxen/repo
script/boxen 
```

但它接着说：

```
This template project provides the following by default:

Homebrew
Git
Hub 
```

我的印象是你最好有一个干净的系统以避免在使用 Boxen 时发生冲突，所以在我从自制软件/应用商店获取 git 之前，我想看看其他人是如何设置 Boxen 的，这样我就可以省去一些头痛

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T00:18:44.400

我认为您不需要先安装`git`。我已经安装了 Boxen，虽然我还没有在新机器上尝试过干净的引导程序。以下是我的理解：

1) X-Code 命令行工具是安装 Boxen 的先决条件 - [X-Code 安装一个`git`as`/usr/bin/git`](https://stackoverflow.com/a/10455668/11296)版本，因此无需显式安装另一个`git`来引导 Boxen。在我的机器上 - Mountain Lion/10.8.3：

```
$ /usr/bin/git --version
git version 1.7.12.4 (Apple Git-37) 
```

2) 安装 Boxen 后，Boxen 将安装 Homebrew 版本的 git `/opt/boxen/homebrew/bin/git`，这可能是 X-Code 命令行的较新版本`git`：

```
$ /opt/boxen/homebrew/bin/git --version
git version 1.8.0 
```

3) 最后，默认情况下，Boxen 将安装`hub`，它将别名`git`为`hub`([`hub`是一个 GitHub 增强包装器`git`](https://github.com/defunkt/hub#readme))：

```
$ type -a git
git is aliased to `hub'
git is /opt/boxen/homebrew/bin/git
git is /usr/bin/git

$ git --version
git version 1.8.0
hub version 1.10.5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T22:44:32.563

在我设置一个新的 Boxen 之前，我让 Xcode 命令行工具为我做这件事：

```
$ xcode-select --install 
```

设置 Boxen 后，您将获得适当的 Git 版本。

# ios - 从 UIViewController 更改为 ViewController

> ID：15707575
> 
> 赞同：-1
> 
> 时间：2013-03-29T16:44:10.583
> 
> 标签：ios, xcode, uiviewcontroller, subclass

选择新类而不是将其设置为ViewController的子类时，我将子类设置为UiviewController的子类。无论如何我可以在不重新创建类的情况下将其改回来

```
@interface AddLevel1ViewController : UIViewController 
```

我想要的是

```
 @interface AddLevel1ViewController : ViewController 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:48:05.477

File->New->File... 工作流程在幕后没有做任何特别的事情。头文件 (.h) 文件中以开头的单行`@interface`定义了您的类子类。只需将类名更改为您想要的。你需要确保你已经`#import`编辑过该课程。

所以，正如你所说，改变：

`@interface AddLevel1ViewController : UIViewController`

至：

`@interface AddLevel1ViewController : ViewController`

并`#import "ViewController.h"`在文件顶部。

# php - MySql 和 PHP 之间的日期/时间差异？

> ID：15707581
> 
> 赞同：0
> 
> 时间：2013-03-29T16:44:29.127
> 
> 标签：php, sql, date, datetime

我有这张桌子

```
Name                       Birth_Date            Register_Date
---------------------------------------------------------------
Ali                       1990-03-22             2010-03-1 15:1:42
Ali1                      1991-07-18             2010-03-2 12:44:2 
```

当我插入这些值时，我将**Birth_Date**作为字符串插入，例如“1990-03-22”，并使用“NOW()”作为**Register_Date**。

**NOW()**`datetime`将根据 MySql Server生成电流。

现在，当我尝试获取当前日期和**Register_Date**（自他注册以来经过的时间）之间的时间时，我使用以下内容：

`SELECT YEAR(CURDATE())-YEAR(register_date) ...`

在 PHP 中，如果我想这样做，我想我必须得到当前日期：`date('Y-m-d H:i:s')`;

我的问题是，通过 MySql 或通过 PHP 计算日期差异（日期和今天之间）有区别吗？

目前，在我的本地主机（XAMPP）上，`CURDATE()`并`date(..)`生成相同的日期，但是当我的网站上线时，它会为其他用户生成相同的日期吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:48:41.997

如果您的 mysql 和 PHP 服务器都在同一时区运行并且它们的时钟正确同步，那么您不会有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:57:14.780

如果您想在同一台服务器上上传您的 php 网站和数据库，我认为您不会有问题，但如果您使用不同的服务器，您可能会遇到时间问题。

为避免此问题，我建议您使用时区节省时间，以便能够从任何服务器获取正确的时间。

# c++ - 如何在 C++ 中重定向到另一个应用程序？

> ID：15707584
> 
> 赞同：0
> 
> 时间：2013-03-29T16:44:43.273
> 
> 标签：c++, visual-c++, visual-studio-2012

我已经在 StackOverflow 和 Google 上进行了全面的研究，但只得到了关于 C# 和不相关主题的结果，所以现在我不得不问了。我希望在应用程序打开 20 秒后自行关闭并打开同一文件夹中的另一个应用程序。调试后，我将应用程序复制到桌面上的文件夹中，我最终将压缩该文件夹。但我希望该应用程序在文件夹中打开另一个应用程序。比如说 `ApplicationA.exe`打开，20 秒后它会关闭并`ApplicationB.exe`打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:54:18.307

您可以使用`CreateProcess()`作用类似于`fork()`+的 winapi 函数，`exec()`然后`exit()`使用`ApplicationA`. 您也可以使用`Sleep(miliseconds)`延迟。

以下是有关的信息`CreateProcess()`：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:16:04.273

我相信 C++ 并不是真正进行系统调用的最佳方式，就像你需要在这里做的那样。也许 shell 脚本会是一个更好的选择。

无论如何，最简单的方法可能是编写第三个程序，打开 ApplicationA.exe，关闭它并启动 ApplicaionB.exe。

我相信你必须使用 C++ `system`，你可以在`<cstdlib>`. 是的，它是 C 特性，而不是 C++ 特性，委婉地说，不鼓励使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:51:54.633

您可以使用 system("ApplicationB.exe"); 打开它 然后退出。这将启动 ApplicationB.exe 并退出 ApplicationA.exe。

查看：[http ://www.dreamincode.net/forums/topic/18057-run-external-executable/](http://www.dreamincode.net/forums/topic/18057-run-external-executable/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T20:15:43.823

我建议使用 ShellExecute 函数。[http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)

# jquery - 是否可以使用 jQuery 检测对 :after 或 :before 伪元素的点击？

> ID：15707588
> 
> 赞同：15
> 
> 时间：2013-03-29T16:44:47.833
> 
> 标签：jquery, css

可以说我有：

```
<div></div> 
```

和：

```
div {
    width: 500px;
    height: 500px;
    position: relative;
}
div:after {
    content: '';
    display: block;
    width: 20px;
    height: 20px;
    position: absolute;
    top: 0;
    right: 0;
} 
```

我可以做类似的事情`$('div:after').click(function(){...});`吗？如果我点击`div`但不点击，它不会触发`div:after`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T16:51:59.163

也许。根据您构建伪内容的方式，您将不得不依靠计算鼠标位置来点击实际 div。事件处理程序将全部放在 div 上，而不是伪元素上，因为它在 DOM 中不存在。

有关更多信息，请参阅[使用 jQuery 操作 CSS :before 和 :after 伪元素](https://stackoverflow.com/questions/5041494/manipulating-css-before-and-after-pseudo-elements-using-jquery) 。特别是 BoltClock 的回答。

另请参阅 Felix 的评论，了解另一种没有鼠标位置的可能解决方案：[仅检测伪元素上的单击事件](https://stackoverflow.com/questions/7478336/only-detect-click-event-on-pseudo-element)

# javascript - 如何将函数添加到 JavaScript 数组中的所有对象？

> ID：15707592
> 
> 赞同：1
> 
> 时间：2013-03-29T16:45:13.150
> 
> 标签：javascript, jquery, angularjs

我正在使用 Angular，但基本上我的控制器有一个对象数组，这些对象是通过 HTTP 从 AJAX 查询返回的，我想用一个函数来装饰数组中的每个对象，以美化对象上的布尔属性，使其呈现为是/否而不是真/假。我不介意使用 jQuery 或 Angular，如果有办法用它们中的任何一个来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:47:05.283

您可以使用[`each`](http://api.jquery.com/jQuery.each/)：

```
$.each(myArray, function(index, item) {
    //do stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:49:55.573

你可以这样做：

```
function prettify(prop){
     if(prop) return "Yes" 
     else return "No"
}

$.each(arr, function(index, item) {
    item.myFunction = prettify;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T16:50:00.180

如果你真的想为每个对象实例添加一个方法，你可以简单地扩展它们：

```
$.each(theArray, function(i, obj) {
    obj.prettyBool = function() {
        return obj.theProperty ? 'Yes' : 'No';
    };
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:50:21.730

遍历您的数组，并为数组中的每个项目分配一个事件侦听器，并使用处理函数。

```
$.each(myArray, function(index, item) {
    item.on('event', eventHandlerFunction);
}); 
```

# c# - 禁用绑定到 xaml 中定义的 ItemsSource 的 TreeView 项

> ID：15707593
> 
> 赞同：0
> 
> 时间：2013-03-29T16:45:13.620
> 
> 标签：c#, xaml, treeview, itemssource

我有一个 TreeView，我绑定到一个为每个项目`ItemsSource`创建一个的 TreeView。`CheckBox`这是xaml：

```
<TreeView x:Name="ReasonTreeView" Height="Auto" Background="Transparent"
        BorderThickness="0" IsTabStop="False"
        ItemsSource="{Binding Path=AnswerOptions}">
<TreeView.ItemTemplate>
    <HierarchicalDataTemplate DataType="{x:Type QSB:Answer}" ItemsSource="{Binding Path=AnswerOptions}">
        <StackPanel Orientation="Horizontal">
            <CheckBox Margin="0,5"
                        IsChecked="{Binding Path=IsSelected}"
                        IsEnabled="{Binding Path=Value,
                                            Converter={StaticResource ReasonValueToEnabledConverter}}"
                        Visibility="{Binding Path=AnswerOptions,
                                            Converter={StaticResource ParentNodeVisConverter}}" />
        </StackPanel>
    </HierarchicalDataTemplate>
</TreeView.ItemTemplate> 
```

然后在我的应用程序中创建这些的多个实例。根据 的实例`TreeView`，某些`CheckBoxes`需要被禁用，以便用户无法选择它们，但是我不确定如何访问`HierarchicalDataTemplate`代码中的各个项目。

环顾了一会后，我唯一能想到的就是`TreeView`在代码后面而不是 xaml 中构建整体，但我宁愿不必诉诸于此。还有什么我可以做的吗？

为了帮助澄清我的观点并出于说明目的，这本质上是我想要做的（在伪代码中）：`ReasonTreeView.ItemsSource[5].IsEnabled = false;`

这将禁用's 的索引 5 处的`CheckBox`（以及其中的任何其他控件）`HierarchicalDataTemplateItem``TreeView``ItemsSource`

让我知道是否需要更多信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:56:38.060

I meant that binding on the checkbox's isenabled property Path=Value. That Value member has to be bool and implement INotifyPropertyChanged then you can control IsEnabled from your model. Dont forget to add Mode=Twoway to your binding

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:50:48.273

而不是通过 Control.ItemsSource 属性访问 CheckBox，您应该在基础集合（即控件的 itemssource）中进行更改。进行更改后，通知视图（您的控件）数据已更改，因此更新控件。

在您的基础类中实现`INotifyPropertyChanged`，并在更改属性（负责启用/禁用）值后通知视图。

If you are not familiar with concepts of Data Binding and INotifyPropertyChanged, I would suggest you to read some basic tutorials about it. It is one of the major feature of WPF which makes life very easy for doing things like yours

# android - Eclipse 调试器不适用于 Android appWidget 应用程序？

> ID：15707597
> 
> 赞同：1
> 
> 时间：2013-03-29T16:45:23.357
> 
> 标签：android, eclipse, debugging

我有一个我一直在处理的 appWidget 项目，并注意到 Eclipse 调试器似乎无法正常工作。我认为它可能很无聊，所以我打开了另一个 Android 项目并设置了一个断点，它运行良好。然而，在我的 appWidget 应用程序中，无论我在哪里设置断点，调试器都无法工作。我可以在 Log 语句上设置断点，查看消息打印，但没有中断执行。

我读过一些关于必须安装“Android 源”的文章，但在我看来，如果调试器缺少某些东西，它根本就无法工作。我唯一的线索是 Logcat 正在打印“调试器已分离”，这几乎没有帮助。其他帖子建议运行两个 Eclipse 进程（`ps -ef`仅显示一个），重新启动 adb（我已经完成`adb kill-server; adb start-server`）或进程崩溃，Logcat 没有显示：

```
 5486         AndroidRuntime  D  
  5486         AndroidRuntime  D  >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
  5486         AndroidRuntime  I  Heap size: -Xmx48m
  5486         AndroidRuntime  D  CheckJNI is OFF
  5486               dalvikvm  D  creating instr width table
  5486         AndroidRuntime  D  Calling main entry com.android.commands.pm.Pm
  5486         AndroidRuntime  D  Shutting down VM
  5486               dalvikvm  D  GC_CONCURRENT freed 103K, 70% free 307K/1024K, external 0K/0K, paused 0ms+0ms
  5486               dalvikvm  D  Debugger has detached; object registry had 1 entries
  5486         AndroidRuntime  I  NOTE: attach of thread 'Binder Thread #1' failed 
```

这就是我在调试模式下启动应用程序时 Logcat 所说的全部内容。有什么想法吗？

# vb.net - VB.Net 如何将对象引用设置为对象的实例？

> ID：15707602
> 
> 赞同：1
> 
> 时间：2013-03-29T16:45:47.027
> 
> 标签：vb.net, object, reference, instance

使用 VB.NET，尝试将页面标题写入文本文件。我被难住了：

```
Private Sub
    Dim pagetitle As String
    pagetitle = WebBrowser1.Document.Title
    My.Computer.FileSystem.WriteAllText("page title.txt", pagetitle, False) 
```

但我收到一条错误消息，提示“对象引用未设置为对象的实例”。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:52:57.333

`Document`当它仍然等于 时，您很可能正在尝试访问该属性`Nothing`。将您的代码移动到控件的`DocumentCompleted`事件中`WebBrowser`，如下所示：

```
Private Sub WebBrowser1_DocumentCompleted(sender As System.Object, e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted
        If WebBrowser1.Document IsNot Nothing Then
            Dim pagetitle As String
            pagetitle = WebBrowser1.Document.Title
            My.Computer.FileSystem.WriteAllText("page title.txt", pagetitle, False)
        End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:53:29.027

我的猜测是 'WebBrowser1.Documen' 不是空的。我不确定必须存在什么条件才能使 Document 不为空，但在尝试获取其标题之前，您绝对应该先检查一下。

我从以下位置偷了这个：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.document.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.document.aspx)

```
Private Sub webBrowser1_Navigating( _
    ByVal sender As Object, ByVal e As WebBrowserNavigatingEventArgs) _
    Handles webBrowser1.Navigating

    Dim document As System.Windows.Forms.HtmlDocument = _
    webBrowser1.Document
    If document IsNot Nothing And _
        document.All("userName") IsNot Nothing And _
        String.IsNullOrEmpty( _
        document.All("userName").GetAttribute("value")) Then

        e.Cancel = True
        MsgBox("You must enter your name before you can navigate to " & _
            e.Url.ToString())
    End If 

End Sub 
```

# asp.net-mvc-4 - MVC 4 IEnumerable > 查看

> ID：15707607
> 
> 赞同：0
> 
> 时间：2013-03-29T16:46:18.840
> 
> 标签：asp.net-mvc-4, view, controller, ienumerable, igrouping

如何让分组数据显示在我的视图中？它想接收模型的 IEnumerable，但我正在传递分组数据。

我将此返回到我的控制器中的视图：

```
var slb = (from s in db.Tbl_Slb
          group s by s.Tbl_Docent.Docent_Code into d
          select d) 
```

这是模型

```
public partial class Tbl_Slb
    {
        public Tbl_Slb()
        {
            this.Tbl_Opmerking = new HashSet<Tbl_Opmerking>();
        }

        public System.DateTime Slb_Van { get; set; }
        public Nullable<System.DateTime> Slb_Tot { get; set; }
        public string Student_Nummer { get; set; }
        public int Docent_Code { get; set; }
        public int Slb_Code { get; set; }

        public virtual Tbl_Docent Tbl_Docent { get; set; }
        public virtual ICollection<Tbl_Opmerking> Tbl_Opmerking { get; set; }
        public virtual Tbl_Student Tbl_Student { get; set; }
    } 
```

# ruby-on-rails - 响应 JSON 是通过 HTML 响应

> ID：15707614
> 
> 赞同：0
> 
> 时间：2013-03-29T16:47:03.593
> 
> 标签：ruby-on-rails, json, ruby-on-rails-3, rspec, controller

在我的 Rails 应用程序中，我有应用程序控制器

```
respond_to :json 
```

继承 Application 控制器的控制器在操作中以 json 响应...

```
 # Some code

  if mission_updated.eql? true
    render :json => {}
  else
    render :json => {}
  end 
```

但是，每当我参考上述操作运行 rspec 测试时

```
 it "should return appropriate response" do
    post :update_unlocked_missions

    parsed_body = JSON.parse(response.body)

    parsed_body.should == {}
  end 
```

我返回以下 rspec 错误

```
ActionView::MissingTemplate:
       Missing template api/v1/missions/update_unlocked_missions, api/v1/base/update_unlocked_missions with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :rabl, :haml]}. Searched in:
         * "#<RSpec::Rails::ViewRendering::EmptyTemplatePathSetDecorator:0x007f9ea2903b00>" 
```

我的问题是为什么当它应该用 json 响应时它会进入视图，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:51:38.683

尝试使用只是`render json: {}`. 如果可行，则问题可能出在`mission_updated`.

# vim - Vim 查找最后一次出现的

> ID：15707618
> 
> 赞同：44
> 
> 时间：2013-03-29T16:47:15.160
> 
> 标签：vim

在一个大缓冲区中，我想向下滚动到模式*pattern*的最后一次出现。

如果我是第一次出现，则很容易搜索*模式* `/`，将*移动到下一次出现* `n`并`N`到达最后一次..

如果我处于一系列事件的中间......有没有更好的跳跃方式？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-29T16:49:14.043

找到最后一次出现的一种简单方法是跳到末尾并向后搜索：

```
G?foo<CR> 
```

事实上，如果您已经在搜索某些内容，还有一种更简单的方法。只需跳到最后并向*后搜索您刚刚搜索的内容*：

```
GN 
```

就那么简单。

**编辑**：如果您的搜索发生在最后一行，那么`GN`将跳过它到倒数第二次出现。使用`ggN`将解决这个问题。（`gg?foo<CR>`出于类似的原因。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T19:26:02.757

一个可能更长的解决方案：

```
:vim foo % | clast 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-04-01T13:48:42.870

您可以尝试通过向后搜索？

```
:1?SEARCH_PHRASE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-08T18:22:28.550

另一种解决方案是：

```
G/\(.\{-}\zs\(foo\)\)\{1,}<CR> 
```

# php - 为什么我的电子邮件打印 HTML

> ID：15707619
> 
> 赞同：1
> 
> 时间：2013-03-29T16:47:18.497
> 
> 标签：php, email

我正在使用 PHP 发送带有电子邮件的附件。一切顺利。但我想发送一些用户的详细信息。详细信息以 HTML 而非消息形式打印。

```
$my_file = 'attach.txt';
$my_path = "path/".$file_name;
$my_name = "noreply@mail.com ";
$my_mail = "noreply@mail.com";
$my_replyto = "noreply@mail.net";
$my_subject = "test E-Mail";
$my_message = htmlspecialchars_decode("<html><body><center><table width='400px' height='400px'><th>career</th><tr><td>Name</td><td>My name</td></tr><tr><td>Email</td><td>My Email</td></tr><tr><td>Post</td><td>My Post</td></tr><tr><td>Address</td><td>My Address</td></tr></table> </center><br><br></body></html>");

$mailto = "myemail@gmail.com";
$content = chunk_split(base64_encode(file_get_contents($my_path)));
$uid = md5(uniqid(time()));
$name = basename($my_path);
$header = "From: ".$my_mail."\r\n";
$header .= "Reply-To: ".$my_replyto."\r\n";
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
$header .= "This is a multi-part message in MIME format.\r\n";
$header .= "--".$uid."\r\n";
$header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
$header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$header .= $my_message."\r\n\r\n";
$header .= "--".$uid."\r\n";
$header .= "Content-Type: application/octet-stream; name=\"".$my_file."\"\r\n"; 
// use different content types here
$header .= "Content-Transfer-Encoding: base64\r\n";
$header .= "Content-Disposition: attachment; filename=\"".$my_file."\"\r\n\r\n";
$header .= $content."\r\n\r\n";
$header .= "--".$uid."--";

if (mail($mailto, $my_subject, '', $header)) {
echo "email send";
exit;
} else {
echo "Error during mail send.!";
exit;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:48:01.260

改变

```
$header .= "Content-type:text/plain; charset=iso-8859-1\r\n"; 
```

和

```
$header .= "Content-type:text/html; charset=iso-8859-1\r\n"; 
```

# node.js - 向 ASP.NET ajax 服务发送 Node.js http post 请求时出现问题

> ID：15707622
> 
> 赞同：0
> 
> 时间：2013-03-29T16:47:31.907
> 
> 标签：node.js, http, post

我正在编写一些节点代码，用于模拟 ASP.NET ajax 客户端调用。它是作为对服务器的 http post 请求发出的，我已经设法使用 OS X 工具[CocoaRestClient](https://code.google.com/p/cocoa-rest-client/)完美地设置了请求标头和正文。使用此工具，服务器可以按预期完美响应。当我尝试使用“请求”模块对 Node.js 做同样的事情时，它失败了：

我的脚本：

```
var request = require('request');

request.post({
    'uri': 'http://[The Url]/[The Service].asmx/[The Operation]',
    'json': '{"callbackcontextkey":"[the context key]",[The set of json formatted key/value pairs] }',
    'headers': { }
}, function(e, r, body) {
    console.log("Response error: %j", e);
    console.log("Response r: %j", r);
    console.log("Response body: %j", body);
}); 
```

当我使用 CocoaRestClient 工具时，我指定的只是 Content-Type (application/json) 参数，然后是代码中指定的请求正文（'json' 属性值）。我的代码使服务器端返回：

> “有一个错误处理请求。”

我也可以在回复中看到这一点：

> “json错误”：“真”

我究竟做错了什么？我考虑使用网络嗅探工具来查看差异...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:13:40.030

参数需要一个 JavaScript 对象，`json`并且请求将它转换为您的 JSON 字符串。

尝试从它周围删除引号，如下所示：

```
var request = require('request');

request.post({
    'uri': 'http://[The Url]/[The Service].asmx/[The Operation]',
    'json': {"callbackcontextkey":"[the context key]",[The set of json formatted key/value pairs] },
    'headers': { }
}, function(e, r, body) {
    console.log("Response error: %j", e);
    console.log("Response r: %j", r);
    console.log("Response body: %j", body);
}); 
```

或者，您可以将其保留为字符串并设置`body`参数，而不是`json`它可能也会以这种方式工作。更多细节在这里：[https ://npmjs.org/package/request](https://npmjs.org/package/request)

# c# - 向模式弹出窗口添加样式

> ID：15707628
> 
> 赞同：0
> 
> 时间：2013-03-29T16:47:52.883
> 
> 标签：c#, asp.net, css, ajax

我在我的网站上添加了一个模态弹出 AJAX 控件。

单击按钮时，它会正确显示，但我在样式上遇到了麻烦。

目前我已经向我的站点主站点Site.css 样式表添加了一个新样式，但它没有在弹出窗口中生效。

我有一个名为“modalBackGround.css”的单独样式表

这是css类：

```
body 
{
background-color:#000000; 
} 
```

这是我的modelpop AJAX控件，注意ccs属性：

```
 <cc1:ModalPopupExtender ID="Button2_ModalPopupExtender" runat="server" 
        TargetControlID="Button2"
        BackgroundCssClass="modalBackGround" 
        DropShadow="true" 
        OkControlID="btnOk" 
        CancelControlID="btnClose" 
        PopupControlID="Panel1"  >
    </cc1:ModalPopupExtender> 
```

如何正确将此样式表应用到弹出窗口的背景以解决透明度问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:04:35.223

**整理了这个。请注意。对于将页面基于站点管理员的任何人。您可以通过使用“head”中的“link”属性声明多个css样式表。这将允许您在每个页面上使用这些样式，因为它在主页面上声明。**

# validation - PrimeFaces 验证输入组

> ID：15707640
> 
> 赞同：0
> 
> 时间：2013-03-29T16:48:15.243
> 
> 标签：validation, jsf, primefaces

我正在使用 primefaces 和 JSF。我有一个可选的地址字段。如果用户填写任何一个字段（例如 zip 或名称），那么所有其他字段都是必需的。进行此验证的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:33:01.180

您可以添加一个 postValidate 事件来验证多个字段，例如

```
<f:event listener="#{bean.validationMethod}" type="postValidate" />
<h:panelGroup id="xyz" rendered="#{facesContext.validationFailed}">
  <h:message for="myform"/>
</h:panelGroup>

<h:panelGroup id="myform">
 .......
<h:panelGroup> 
```

这应该在模型更新之前触发，您可以获得不同组件的新值

```
FacesContext fc = FacesContext.getCurrentInstance(); 
UIComponent components = event.getComponent();
UIInput param1 = (UIInput) components.findComponent("param1");
UIInput param2 = (UIInput) components.findComponent("param2"); 
```

如果验证失败，调用 F`acesContext.getCurrentInstance().validationFailed()`并为 myform 添加消息。

如果您没有使用自定义验证，只是想确保在填充特定输入时添加其他输入，那么我建议使用*Omnifaces validateAllOrNone*，

[http://showcase.omnifaces.org/validators/validateAllOrNone](http://showcase.omnifaces.org/validators/validateAllOrNone)

# c# - 代码如何通过 response.redirect？

> ID：15707641
> 
> 赞同：5
> 
> 时间：2013-03-29T16:48:18.727
> 
> 标签：c#, asp.net, asp.net-mvc

我有以下代码块。我很困惑代码如何通过

```
Response.Redirect("~..") 
```

确实如此。我认为过去的任何行都不会自动执行。我在这里缺少一些基本的东西吗？我发现调试器实际上在执行下一行。

```
 public ActionResult Index()
    {
        Response.Redirect("~/Default.aspx", true);

        string year =
           Utils.ConvertCodeCampYearToActualYear(
               Utils.GetCurrentCodeCampYear().ToString(CultureInfo.InvariantCulture));
        var viewModel = GetViewModel(year);
        return View(viewModel);
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T16:48:59.353

你需要`return`它。这是一个功能。在您的情况下，您可以使用`Redirect`：

```
return Redirect("~/Default.aspx"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T17:00:02.393

所做的一切`Response.Redirect()`（实际上）是将`location=`响应标头设置为指定的 URI，并将 http 状态设置为`302 Found`. 它还在响应中写入了一个小存根 HTML，并带有指向新 URI 的链接，但这只是一种装饰。

除非您使用允许您指定是否应通过`bool`标志继续处理的重载，否则处理将继续。如果该`bool`标志为真，则通过中止处理请求的线程终止响应处理，并抛出 a`ThreadAbortException`作为副作用。

# javascript - 像这个示例一样混淆 javascript 代码

> ID：15707645
> 
> 赞同：0
> 
> 时间：2013-03-29T16:48:37.330
> 
> 标签：javascript, encryption, obfuscation

我想混淆这里已经完成的代码。我以前似乎只对谷歌和其他大公司有过这种混淆。谁能建议这段代码是如何被混淆的。它也比使用可以在计算机上触发防病毒的 eval 更好。

```
function app() {
var vb = '',
    wb = '" for "gwt:onLoadErrorFn"',
    xb = '" for "gwt:onPropertyErrorFn"',
    yb = '"><\/script>',
    zb = '#',
    Ab = '/',
    Bb = '10DBFC879A4A784134EE84443D45E2C5', 
```

查看 jsfiddle 上的完整代码，因为它达到了 stackoverflow 的字符限制：http: [//jsfiddle.net/NJb2Y/](http://jsfiddle.net/NJb2Y/)

另外，这段代码可以去混淆吗？如果，有多容易？

如果这不是一个正确的问题，请不要吝啬，因为我真的很想回答这个问题。

**更新：我已经在网上搜索了混淆器，但是我很难找到一个这样做的。我发现的几乎所有东西都使用了 eval 函数。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:10:06.273

您提供的示例看起来像是由[Google Web Toolkit](https://developers.google.com/web-toolkit/gettingstarted)生成的（这就是 gwt 的含义）。GWT 应用程序是用 Java 编写的，并“编译”为 javascript。[GWT 似乎有一个内置的混淆器](https://developers.google.com/web-toolkit/doc/1.6/FAQ_DebuggingAndCompiling#Why_is_my_GWT-generated_JavaScript_gibberish?)。你或许可以翻看[GWT 的源代码，](https://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk)找到他们使用的混淆代码。

任何混淆的 javascript 代码都可以去混淆。代码越多，花费的时间就越长，但永远不能依靠混淆来保护重要的代码。

# php - 来自带有套接字 fgets 的 feof() 的错误 eof

> ID：15707659
> 
> 赞同：0
> 
> 时间：2013-03-29T16:49:38.233
> 
> 标签：php, fgets, fsockopen, feof

我继承了一段代码，它使用`fetchURL()`下面的函数从 url 中获取数据。我刚刚注意到，`feof()`在检索到整页数据之前，它通常会返回 true。我已经尝试了一些测试，并且每次都使用这两种方法`CURL`来检索整个页面。`file_get_contents()`

错误是间歇性的。*在 9 次调用中，有时 7 次会成功完成，有时只会成功完成 4 次。9 次调用中的特定 4 次（它们是带有更改查询字符串的获取请求）总是成功完成。*我尝试颠倒请求的顺序，相同的 4 个查询字符串仍然总是成功，而其余的有时工作，有时不工作。
因此，“似乎”返回的数据可能与问题有关，但让我感到困惑的是间歇性。在每种情况下返回的数据总是相同的（例如，每次我使用`?SearchString=8502806`返回的页面的查询字符串进行调用时都包含相同的数据），但有时整个页面是由传递的`fgets/feof`，有时不是。

有没有人对可能导致这种情况的原因提出建议？O 在这个主题上看到的大多数其他帖子都是关于相反的问题，`feof()`即没有返回 true。

```
function fetchURL( $url, $ret = 'body' ) {
    $url_parsed = parse_url($url);
    $host = $url_parsed["host"];
    $port = (isset($url_parsed["port"]))?$url_parsed["port"]:'';
    if ($port==0)
        $port = 80;
    $path = $url_parsed["path"];
    if ($url_parsed["query"] != "")
        $path .= "?".$url_parsed["query"];

    $out = "GET $path HTTP/1.0\r\nHost: $host\r\n\r\n";

    $fp = fsockopen($host, $port, $errno, $errstr, 30);

    fwrite($fp, $out);
    $body = false;
    $h = '';
    $b = '';
    while (!feof($fp)) {
        $s = fgets($fp, 1024);
        if ( $body )
            $b .= $s;
        else
            $h .= $s;
        if ( $s == "\r\n" )
            $body = true;
    }

    fclose($fp);

    return ($ret == 'body')?$b:(($ret == 'head')?$h:array($h, $b));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:57:13.897

我看到该代码有很多问题。

*   永远不要`feof`在套接字上使用。它会一直挂起，直到服务器关闭套接字，这不一定会在收到页面后立即发生。
*   `feof`可能会返回`true`（套接字已关闭），而 PHP 在其缓冲区中仍有一些数据。
*   您区分标头和正文的代码似乎依赖于 PHP 正确地完成它的工作，这通常是一个坏主意。`fgets`不一定读取一行，它也可以只返回一个字节 ( `\r`，然后下一个调用你可能会得到`\n`)
*   您没有正确编码路径值

为什么不直接将代码转换为使用 cURL 或 file_get_contents？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T19:53:18.733

对我来说，这听起来像是一个超时问题。请参阅PHP 手册中的[stream_set_timeout()](http://www.php.net/manual/en/function.stream-set-timeout.php)。

# sqlite - 复杂的替换 SQLITE 查询

> ID：15707662
> 
> 赞同：-1
> 
> 时间：2013-03-29T16:49:44.743
> 
> 标签：sqlite

该查询应该适用于 Firefox 的 SQLITE MANAGER：

问题是，在数据库的一个表中的一行中，通常会出现 H（任何不超过 9000 的数字）的次数，并且它应该只出现一次。例如 H6523H6523，它应该只支持 H6523。这个字段有很多文本，在这个文本中出现了双 H 数字。

H6523 也在单独列中的另一个表中。因此，可以在必须查看的内容之后获取列表。

*   表一是内容，错的那一列是数据（长文）
*   表二是题目，H6523所在的栏目是题目。（只有 H+数字）。

使用替换命令它应该可以工作，但我必须分别为每个 H+数字创建一个替换命令。

因此，使用触发器它应该可以工作。但它不起作用:(我设置的触发步骤：

更新内容 sET data=replace( (Select topics.sub2 From Topics), (select topics.subject from topics));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:55:28.007

SQLite 被设计为嵌入式数据库，因此它没有太多支持程序逻辑。

您必须用任何其他对文本处理有更好支持的语言编写替换代码。

# javascript - 来自 html 表的下拉菜单

> ID：15707667
> 
> 赞同：-2
> 
> 时间：2013-03-29T16:49:56.427
> 
> 标签：javascript, html-table

我对 HTML 表格有疑问。是否可以在 HTML 表格中创建下拉菜单？我想显示这样的东西：

```
1 video1 cam1  signal-present
2 video2 cam2  signal-present
3 video3 cam3  signal-present 
```

当我单击任何一行时，它应该展开以提供另一组行，例如：

```
1 video1 cam1  signal-present
  -1 Audio1 source1 present
  -2 Audio1 source1 present
2 video2 cam2  signal-present
3 video3 cam3  signal-present 
```

该表是使用 Javascript 填充的。有没有比表格更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:11:03.660

您所描述的是[jQuery Accordion](http://jqueryui.com/accordion/)功能。那里有大量的手风琴插件，但它们都做同样的事情：

**工作示例：http:** [//jsfiddle.net/7vX3S/5/](http://jsfiddle.net/7vX3S/5/)

*   点击类（这是默认显示的）
*   内容类（这`click class`是单击时显示的内容

所以，你会做`<tr>`你的`click class`，当`<tr>`点击给定的时候，你会有另一个`<tr>`向下滑动（展开）。

jQuery：

```
 $(".clicker").on("click", function(){
    if($(this).next().hasClass("down")){
        $(this).next().slideUp("normal").removeClass("down");
    }
    else{
       $(this).next().slideDown("normal").addClass("down");
    }
}); 
```

**HTML：**

```
<table>
    <tr class="clicker">
        <td>some data</td>
    </tr>
    <tr class="hidden">
        <td>Some new data here</td>
    </tr>
</table> 
```

**CSS：**

```
tr.hidden{

    display: none;
} 
```

# matlab - 如何使用 textscan 在 Matlab 中读取几行？

> ID：15707672
> 
> 赞同：0
> 
> 时间：2013-03-29T16:50:01.813
> 
> 标签：matlab, textscan

我用这个：

```
weights=fopen('indices.txt');
weights=textscan(weights, '%d %d %d %d %d %d %d') 
```

但这只会读取我文件的第一行。我的文件如下所示：

```
0 90 100 5 0 0 0 (class)
19 5 0 0 0 0 0 (class2)
5 5 0 0 0 0 0 (class3)
-10 -5 0 0 0 0 0 (class4) 
```

而且我不需要括号中的内容

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:05:10.867

对于这种情况，您可以执行以下操作：

```
fid = fopen('indices.txt');
num_ints = 7;
num_rows = 4;

format = [repmat('%d ', 1, num_ints), '%s'];
weights = textscan(fid, format, num_rows);
weights = [weights{1:num_ints}];
fclose(fid); 
```

当然，缺点是你必须事先知道你正在阅读的行数。您可以尝试在循环中调用 textscan ，但这似乎不是它的用途（如果我试图逐行读取文件，我宁愿使用 fgetl 代替）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T00:40:45.313

使用以下内容：

```
fh = fopen('indices.txt');
resC = textscan(fh, '%d %d %d %d %d %d %d %s', 1000);
res = cell2mat(resC(1:7))
fclose(fh); 
```

`textscan`只会读取（并返回）最多可用的行数。但是请注意，这会`textscan`为您提供的行数（此处为 1000）分配内存，因此您想在那里选择“明智”的东西。

# php - 如何将 'page.php' 重定向到 'index.php?page='

> ID：15707674
> 
> 赞同：0
> 
> 时间：2013-03-29T16:50:14.217
> 
> 标签：php, .htaccess, redirect

如何重定向，使用`.htaccess`，调用`page.php?id=`to`index.php?page=`但将 url 保留在用户的浏览器中`page.php?id=`？我认为 wordpress 使用这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:00:57.480

那么为什么不使用 wordpress`.htaccess`呢？

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ – [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

**编辑：**

并在`index.php`：

```
<?php 

$id = 1;
if ($_GET['id'] and @intval($_GET['id']))
    $id = $_GET['id'];

echo 'Current id: ' . $id; 
```

当您访问时`page.php?id=4`，输出是`Current id: 4`. Wordpress 不使用重定向。它只是将所有 url 重写为`index.php`，并且该脚本包含所有必要的文件。

# arrays - 加载具有固定数据模式的数组

> ID：15707676
> 
> 赞同：3
> 
> 时间：2013-03-29T16:50:16.480
> 
> 标签：arrays, f#

我有一个分隔的数据字符串，例如

```
a~b~c~d~e~f~g~h~i~j~k~l~... 
dog~cat~fish~parrot~mother~father~child~grandparent~...
hello~hi~greetings~yo 
```

我想将数据加载到类型记录的数组/序列中

```
type myType {
    first: string;
    second: string;
    third: string;
    fourth:string;
} 
```

所以我最终会在数组/序列中得到 3 个对象。我一直在搞乱 for 循环来做到这一点，但感觉非常必要。我将如何使用功能性习语来实现这一目标？

编辑：我应该澄清分隔数据的长度可能是可变的，尽管分隔项的数量应该始终是 4 的倍数。因此，每次迭代时，我希望剥离 4 条输入数据，将它们加载到输入所有数据后，返回一个数组/序列。

编辑2：所以我最终得到了这样的东西

```
let createValues(data: string) =               
    let splitValues(valueString) = 
        let rec splitData acc = function
            | a :: b :: c :: d :: xs -> splitData ({ first=a; second=b; third=c; fourth=d } :: acc) xs
            | [] -> acc
            | _ -> failwith "uneven data"
        splitData [] valueString
    splitValues (data.Split [|'~'|] |> Array.toList) 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:56:03.403

您的类型仅包含单个字符 - 假设数据始终由单个字符组成，则不需要分隔符。这是将数据映射到类型列表的一种方法，这仅适用于数据中的字符数量可被 4 整除的情况，但适用于可变大小的输入。

```
let data = "a~b~c~d~e~f~g~h~i~j~k~l~m~n~o~p"

let splitData data =
    let rec aux acc = function
        | a::b::c::d::xs -> aux ({ first=a; second=b; third=c; fourth=d } :: acc) xs
        | [] -> acc
        | _ -> failwith "uneven data"
    aux [] data

let output = splitData (data.Replace("~","").ToCharArray() |> Array.toList) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T02:21:42.380

尽管已经给出了很好的答案，但如果您需要确保输入数据格式完全符合您的规范，您可以像这样解析它：

```
let readObjects inputString =
    let rec readObjectsAux input =
        seq {
            match input with
            | a :: '~' :: b :: '~' :: c :: '~' :: d :: rest ->
                yield { first = a; second = b; third = c; fourth = d }
                match rest with
                | '~' :: rest -> yield! (readObjectsAux rest)
                | [] -> ()
                | _ -> failwith "bad input"
            | [] -> ()
            | _ -> failwith "bad input"
        }
    readObjectsAux <| (List.ofSeq inputString) 
```

通过这种方式，您可以确保您的角色始终以四重奏形式出现，并且它们始终被精确地隔开`'~'`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T18:44:33.027

如果每个字段都是一个`char`（在这种情况下，我看不到分隔符中的点，所以我省略了它），你可以这样做：

```
File.ReadAllLines(@"C:\data.txt")
  |> Array.mapi (fun n line ->
    match line.ToCharArray() with
    | [|a;b;c;d;e;f;g;h;i;j;k;l|] ->
      let t1 = {first=a; second=b; third=c; fourth=d}
      let t2 = {fifth=e; sixth=f; seventh=g; eighth=h}
      let t3 = {ninth=i; tenth=j; eleventh=k; twelfth=l}
      (t1, t2, t3)
    | _ -> failwithf "Can't parse line %d" (n+1)) 
```

如果需要分隔符，您可以将其更改为：

```
 match line.Split('~') with
    | [|a;b;c;d;e;f;g;h;i;j;k;l|] ->
      let t1 = {first=a.[0]; second=b.[0]; third=c.[0]; fourth=d.[0]}
      ... 
```

# c# - C#.net 或 ASP.net 错误？

> ID：15707677
> 
> 赞同：0
> 
> 时间：2013-03-29T16:50:18.537
> 
> 标签：c#, asp.net

大家早上好/下午，我一直在测试 vin 扫描仪`BarcodeLib`，最后使用 Visual Studio 2012 让它工作。

在我将图像硬编码到阅读器之前

```
string[] results = BarcodeReader.read(@"C:/scan/image.jpg", BarcodeReader.CODE39); 
```

但现在因为我想`input type`在我的 asp 中使用 a，它停止显示结果。

我的问题是，为什么此时它根本不输出任何东西？

我的想法是，也许它是 if 语句。

这里的编码

```
namespace testWebBarcode
{
      protected void bnvinoneclick_Click(object sender, EventArgs e)
        {
           HttpPostedFile fileImage = Request.Files["FileUpload"];

            if (fileImage != null && fileImage.ContentLength > 0)
             {
               string imageFileName = Path.GetFileName(fileImage.FileName);

                //reads barcode (@"filename", BarcodeReader.TypeBarcode)
                string[] results = BarcodeReader.read(imageFileName, BarcodeReader.CODE39);
                string answer = string.Empty;
                for (int i = 0; i < results.Length; i++)
                     {
                       answer = results[i];
                     }
               string finalVin = "The vin is: " + answer;
               lblvin.Text = finalVin;
             }

        }

} 
```

和

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="testWebBarcode._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
   <script type="text/javascript">
       function readURL() 
          {

           document.getElementById('<%=bnvinoneclick.ClientID%>').click();
          }

   </script>

</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

    <p>
        <asp:Label ID="lblvin" runat="server" Text=""></asp:Label>
    </p>
    <p>
        <asp:Label ID="Label1" runat="server" Text=""></asp:Label>
    </p>
    <p>

       <input type="file" accept="image/*" runat="server" id="FileUpload" onchange="readURL();" />

        <asp:Button ID="bnvinoneclick" runat="server" Text="Check vin" 
            onclick="bnvinoneclick_Click" />
            </p>

</asp:Content> 
```

感谢您花时间查看我的问题，如果您回复了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:56:14.800

在您的第一个“工作”示例中，您正在使用文件系统路径读取图像（即从文件系统中读取文件）

在第二个示例中，您从`HttpPostedFile`对象传递文件名。您需要在此处读取输入流的内容-我的猜测是条形码读取方法正在尝试在文件系统中查找文件并且不能..？

读取`HttpPostedFile`输入流的内容，然后将其保存到磁盘并从那里读取，如果您不能简单地将字节数组传递给条形码库的读取方法

[http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.aspx](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:59:21.593

您可能会发现它为您提供了[客户端](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.filename.aspx)`fileImage.FileName`上文件的名称，因此您无法在服务器中使用它（注意您的 .NET 代码在服务器端而不是客户端执行）。而您可能想要的是：

1.  User uploads file from say C:\MyFiles\uploadme.jpg (this it the path you will likely get when you use the `FileName` property in your code)
2.  You save file to your server (e.g. to a `D:\<MyServerDirectory>\UploadedImages` folder or something like that)
3.  You work with the file once it's saved to the server

I would suggest saving it (see [this](http://www.codeproject.com/Articles/1757/File-Upload-with-ASP-NET) for an example) and then passing the path of where you saved it to (considering that it now the "server" path vs. the client path) to your `Barcode` method

# django - 在生产中提供 django 媒体（用户上传）文件

> ID：15707680
> 
> 赞同：4
> 
> 时间：2013-03-29T16:50:36.217
> 
> 标签：django, webfaction

我已经将我的 django 网站部署到 webfaction 托管服务上，我正在努力寻找如何在生产中为用户上传的媒体文件提供服务。关于如何在开发中提供媒体文件存在很多问题，但在生产中提供媒体（用户上传）文件似乎没有任何问题。

目前，我的 django 应用程序在生产中如下所示。

```
django_project
|
 ---> media
 ---> static (these are served through collectstatic and no problem with this)
 ---> appname1
 ---> appname2
 --->project_name
 |
     ---> settings.py 
```

和我的

MEDIA_ROOT = /django_project/media/

MEDIA_URL = www.website.com/media/

有很多用户上传的图像存储在这个媒体文件夹中。现在，当我打开网站时，没有图像加载。有人可以帮助我如何在生产中提供媒体文件。

谢谢

斯里坎特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:12:12.200

您需要使用 django.views.static.serve，如下所示：

```
(r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': 'media'}), 
```

[https://docs.djangoproject.com/en/dev/howto/static-files/#serving-other-directories](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-other-directories)

# ajax - Backbone：限制视图上的集合过滤器事件

> ID：15707681
> 
> 赞同：4
> 
> 时间：2013-03-29T16:50:38.953
> 
> 标签：ajax, backbone.js, underscore.js

在我的应用程序中，我有一个显示为表格的视图，其中包含从服务器获取的集合。我希望用户能够在文本框中写入搜索字符串来过滤此集合。

问题是每次击键都会触发 keyup 事件，我想避免这种情况，以免服务器因无用的请求而过载。所以我想使用下划线的油门功能，但我无法以有效的方式实现它。

```
events: {
    'keyup #filter' : 'filter_collection'
}

filter_collection: function(e) {
    var el, throttled, value;

    el = e.currentTarget;
    value = $(el).val();
    this.collection.server_api.filter = value;
    throttled = _.throttle(_.bind(this.update_collection, this), 5000);
    throttled();
}

update_collection: function() {
    var promise, self;

    self = this;
    promise = this.collection.fetch();
    $.when(promise).then(function() {
      self.collection.pager();
    });
} 
```

这样，每次击键都会调用 update_collection 函数，就像之前没有`throttle`. 我也尝试过，`debounce`但所有请求都会在等待时间后触发。我错过了什么？

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T17:16:59.067

The function called each time a *keyup* event occurs is `filter_collection` which is not itself throttled, the one you create inside is immediately called and discarded.

You should bind your event to a throttled function:

```
var V = Backbone.View.extend({
    events: {
        'keyup #filter' : 'filter_collection'
    },

    filter_collection: _.throttle(function(e) {
        var el, throttled, value;

        el = e.currentTarget;
        value = $(el).val();

        this.update_collection(value);
    }, 5000),

    update_collection: function(val) {
        var promise, self;
        self = this;
        promise = this.collection.fetch();
        $.when(promise).then(function() {
          console.log('fetched '+val);
        });
    }
}); 
```

You could of course use [`_.debounce`](http://underscorejs.org/#debounce) if you prefer. And see [http://jsfiddle.net/nikoshr/zWrgW/](http://jsfiddle.net/nikoshr/zWrgW/) for a demo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:19:30.043

You could also bind to the change event rather than keyup.

# php - 使用主题标签、PHP 切换设置

> ID：15707684
> 
> 赞同：0
> 
> 时间：2013-03-29T16:50:47.547
> 
> 标签：php

我正在开发一个 PHP 应用程序，该应用程序通过 Twilio 接收传入的 SMS 消息并根据主题标签和设置更改用户首选项。例如，如果用户想要禁用来自站点的 SMS 警报，他们会发短信`#sms off`.

下面是我为处理此任务而编写的代码，但我觉得它很臃肿，可以稍微清理一下。任何有关如何从另一个（希望更整洁）角度处理此任务的建议将不胜感激。

这很棘手，因为传入的主题标签可以是任何 cAsE - `#SMS off`、`#Sms Off`等。我通过使命令和设置大写来处理这个问题。

这是我到目前为止所拥有的 -

```
<?php
$body = trim($_POST['Body']);
$pos = strripos($body, '#'); //Find position of hashtag in body
if ($pos != 0) {
    //Hashtag was not first, therefor this is a normal incoming SMS
    //without commands
    echo "Normal SMS message";
} else if ($pos == 0) {
    //This is a command SMS, we need to react to it
    preg_match_all('/#(\w+)/',$body,$matches); // Isolate the hashtag
    // Change hashtag, complete with #, to uppercase
    //This is to prevent case issues in the incoming SMS
    $command = strtoupper($matches[0][0]);
    //Remove the hashtag from the SMS, convert the remaining string to upper,
    //and trim it to isolate
    $setting = str_ireplace($command, '', $body);
    $setting = strtoupper(trim($setting));
    //Switch for available commands
    switch ($command) {
        case '#DISPATCH':
            if ($setting == 'ON') {
                echo 'Dispatch alert has been turned on';
            } else if ($setting == 'OFF') {
                echo 'Dispatch alert has been turned off';
            } else {
                'Missing setting. Please reply with #dispatch on or #dispatch off to set.';
            }
            break;
        case '#SMS':
            if ($setting == 'ON') {
                echo 'SMS alerts have been turned on';
            } else if ($setting == 'OFF') {
                echo 'SMS alerts have been turned off';
            } else {
                'Missing setting. Please reply with #sms on or #sms off to set.';
            }
            break;
        default:
            echo 'I do not recognize this command. Please enter either #dispatch or #sms followed by on or off to set.';
            break;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:58:59.860

您可能会发现它`explode()`更易于使用。像这样的东西（未经测试）：

```
$pos = strripos($body, '#'); //Find position of hashtag in body
if ($pos != 0) {
    echo "Normal SMS message";
} else {
    // The input needs to be all uppercase, and split apart by the space
    $pieces = explode(" ",strtoupper($body));

    // Our command will be the first item
    $command = array_shift($pieces);
    // The rest will be the setting
    $setting = trim(implode(" ",$pieces));

    switch($command) {

    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:17:22.187

我会做一个更面向对象的方法。

例如，代码可能如下所示：

```
$sms = new SMS($_POST['Body']); 
```

SMS 将负责解析所有内容并抽象出任何相关内容。

```
if ($sms->hasCommand()) {
    $commandDispatcher = new SMSCommandDispatcher($sms->getCommand(), $sms->getCommandArguments());
    $commandDispatcher->dispatch();
} 
```

SMSCommandDispatcher 会知道存在哪些命令并执行它们：

它可能看起来像这样：

```
class SMSCommandDispatcher {
    protected $knownCommands = array(
        'dispatch' => 'DispatchCommand',
        'sms' => 'SMSCommand',
    );

    public function __construct($cmd, $args) {
        if (!isset($this->knownCommands[$cmd])) throw new InvalidArgumentException('Unknown command');
        $this->commandInstance = new $this->knownCommands[$cmd]($args);
    }

    public function dispatch() {
        $this->commandInstance->invoke();
    }
} 
```

然后你当然有 SMSCommand 和 DispatchCommand 类......

抽象对于摆脱臃肿非常有帮助。希望这对您有所帮助。

# c++ - 为什么调用 vector.reserve(required + 1) 比 vector.reserve(required) 快？

> ID：15707688
> 
> 赞同：47
> 
> 时间：2013-03-29T16:50:54.330
> 
> 标签：c++, performance, memory, stdvector

我正在做一些测试来测量标准容器在各种条件下的性能，我遇到了一些奇怪的事情。当我在 a 的中间插入许多项目时`std::vector`，如果我首先使用要添加的元素的确切数量调用 reserve，我发现在大多数情况下与不调用 reserve 相比基本上没有性能差异，这令人惊讶。然而，更令人惊讶的是，如果我用我需要的确切数量的元素调用 reserve `+ 1`，那么我会获得显着的性能提升。这是我刚刚得到的结果示例表（所有时间都以秒为单位）：

```
+---------------+--------+-------------------+-----------------------+
| # of elements | vector | vector (reserved) | vector (reserved + 1) |
+---------------+--------+-------------------+-----------------------+
|         10000 | 0.04   | 0.04              | 0.03                  |
|         20000 | 0.14   | 0.14              | 0.11                  |
|         30000 | 0.32   | 0.32              | 0.25                  |
|         40000 | 0.55   | 0.55              | 0.44                  |
|         50000 | 0.87   | 0.85              | 0.66                  |
|         60000 | 1.24   | 1.24              | 0.96                  |
|         70000 | 1.69   | 1.68              | 1.31                  |
|         80000 | 2.17   | 2.21              | 1.71                  |
|         90000 | 2.78   | 2.75              | 2.16                  |
|        100000 | 3.43   | 3.44              | 2.68                  |
|        110000 | 4.13   | 4.15              | 3.23                  |
|        120000 | 4.88   | 4.89              | 3.86                  |
|        130000 | 5.79   | 5.8               | 4.51                  |
|        140000 | 6.71   | 6.71              | 5.24                  |
|        150000 | 7.7    | 7.7               | 6.02                  |
|        160000 | 8.76   | 8.67              | 6.86                  |
|        170000 | 9.9    | 9.91              | 7.74                  |
|        180000 | 11.07  | 10.98             | 8.64                  |
|        190000 | 12.34  | 12.35             | 9.64                  |
|        200000 | 13.64  | 13.56             | 10.72                 |
|        210000 | 15.1   | 15.04             | 11.67                 |
|        220000 | 16.59  | 16.41             | 12.89                 |
|        230000 | 18.05  | 18.06             | 14.13                 |
|        240000 | 19.64  | 19.74             | 15.36                 |
|        250000 | 21.34  | 21.17             | 16.66                 |
|        260000 | 23.08  | 23.06             | 18.02                 |
|        270000 | 24.87  | 24.89             | 19.42                 |
|        280000 | 26.5   | 26.58             | 20.9                  |
|        290000 | 28.51  | 28.69             | 22.4                  |
|        300000 | 30.69  | 30.74             | 23.97                 |
|        310000 | 32.73  | 32.81             | 25.57                 |
|        320000 | 34.63  | 34.99             | 27.28                 |
|        330000 | 37.12  | 37.17             | 28.99                 |
|        340000 | 39.36  | 39.43             | 30.83                 |
|        350000 | 41.7   | 41.48             | 32.45                 |
|        360000 | 44.11  | 44.22             | 34.55                 |
|        370000 | 46.62  | 46.71             | 36.22                 |
|        380000 | 49.09  | 48.91             | 38.46                 |
|        390000 | 51.71  | 51.98             | 40.22                 |
|        400000 | 54.45  | 54.56             | 43.03                 |
|        410000 | 57.23  | 57.29             | 44.84                 |
|        420000 | 60     | 59.73             | 46.67                 |
|        430000 | 62.9   | 63.03             | 49.3                  |
+---------------+--------+-------------------+-----------------------+ 
```

我检查了实现，它似乎没有一个错误。然后我在调用reserve后立即打印大小和容量进一步测试，然后在填充向量后再次打印它们，一切看起来都很好。

```
before:
    size: 0
    capacity: 10000
after:
    size: 10000
    capacity: 10000

before:
    size: 0
    capacity: 20000
after:
    size: 20000
    capacity: 20000

... 
```

编译器是 Fedora Linux x86_64 上的 gcc 4.7.2。编译器选项是`-std=c++11 -Ofast -march=native -funsafe-loop-optimizations -flto=4 - fwhole-program`

代码如下。

```
#include <algorithm>
#include <array>
#include <cstdint>
#include <vector>
#include <random>
#include <string>
#include <iostream>
#include <fstream>

#include <boost/timer.hpp>

namespace {
constexpr size_t array_size = 1;

unsigned number() {
        static std::random_device rd;
        static std::mt19937 random_engine(rd());
        static std::uniform_int_distribution<uint32_t> distribution(0, std::numeric_limits<uint32_t>::max());
        return distribution(random_engine);
}

class Class {
        public:
                Class() {
                        x[0] = number();
                }
                std::string to_string() const {
                        return std::to_string(x[0]);
                }
                inline friend bool operator<=(Class const & lhs, Class const & rhs) {
                        return lhs.x[0] <= rhs.x[0];
                }
        private:
                std::array<uint32_t, array_size> x;
};

template<typename Container>
void add(Container & container, Class const & value) {
        auto const it = std::find_if(std::begin(container), std::end(container), [&](Class const & c) {
                return value <= c;
        });
        container.emplace(it, value);
}

// Do something with the result
template<typename Container>
void insert_to_file(Container const & container) {
        std::fstream file("file.txt");
        for (auto const & value : container) {
                file << value.to_string() << '\n';
        }
}

template<typename Container>
void f(std::vector<Class> const & values) {
        Container container;
        container.reserve(values.size());
        for (auto const & value : values) {
                add(container, value);
        }
        insert_to_file(container);
}

}

int main(int argc, char ** argv) {
        std::size_t const size = (argc == 1) ? 1 : std::stoul(argv[1]);
        // Default constructor of Class fills in values here
        std::vector<Class> const values_to_be_copied(size);
        typedef std::vector<Class> Container;
        boost::timer timer;
        f<Container>(values_to_be_copied);
        std::cerr << "Finished in " << timer.elapsed() << " seconds.\n";
} 
```

我创建了一个 C++03 版本来尝试帮助其他人重现它，但我无法在此版本中重现它，尽管我试图通过使其尽可能直接的翻译来显示问题：

```
#include <algorithm>
#include <cstdlib>
#include <fstream>
#include <vector>
#include <string>
#include <iostream>

#include <boost/array.hpp>
#include <boost/cstdint.hpp>
#include <boost/lexical_cast.hpp>
#include <boost/random/mersenne_twister.hpp>
#include <boost/random/uniform_int_distribution.hpp>
#include <boost/timer.hpp>

namespace {
unsigned number() {
        static boost::random::mt19937 random_engine;
        static boost::random::uniform_int_distribution<boost::uint32_t> distribution(0, std::numeric_limits<boost::uint32_t>::max());
        return distribution(random_engine);
}

class Class {
        public:
                Class() {
                        x[0] = number();
                }
                inline friend bool operator<=(Class const & lhs, Class const & rhs) {
                        return lhs.x[0] <= rhs.x[0];
                }
                std::string to_string() const {
                        return boost::lexical_cast<std::string>(x[0]);
                }
        private:
                boost::array<boost::uint32_t, 1> x;
};

class Less {
public:
        Less(Class const & c):
                value(c) {
        }
        bool operator()(Class const & c) const {
                return value <= c;
        }
private:
        Class value;
};

void add(std::vector<Class> & container, Class const & value) {
        std::vector<Class>::iterator it = std::find_if(container.begin(), container.end(), Less(value));
        container.insert(it, value);
}

// Do something with the result
void insert_to_file(std::vector<Class> const & container) {
        std::fstream file("file.txt");
        for (std::vector<Class>::const_iterator it = container.begin(); it != container.end(); ++it) {
                file << it->to_string() << '\n';
        }
}

void f(std::vector<Class> const & values) {
        std::vector<Class> container;
        container.reserve(values.size() + 1);
        for (std::vector<Class>::const_iterator it = values.begin(); it != values.end(); ++it) {
                add(container, *it);
        }
        insert_to_file(container);
}

}

int main(int argc, char ** argv) {
        std::size_t const size = (argc == 1) ? 1 : boost::lexical_cast<std::size_t>(argv[1]);
        // Default constructor of Class fills in values here
        std::vector<Class> const values_to_be_copied(size);
        boost::timer timer;
        f(values_to_be_copied);
        std::cerr << "Finished in " << timer.elapsed() << " seconds.\n";
} 
```

当前调用 reserve 的行已更改为包含 a`+ 1`或已完全删除，具体取决于我正在运行的测试。整个事情是从一个 shell 脚本运行的，该脚本从 10000 个元素开始，增加到 430000 个元素，一次一个版本。

我的处理器是 Intel i5 4 核处理器，我有 4 GiB 的内存。我会尽量简化C++11版本的代码，看看能不能隔离问题。

有谁知道为什么保留比我需要的多一个元素会导致速度增加？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-31T19:29:27.883

我对程序做了以下修改：

```
size_t a = getenv("A") ? 1 : 0;

void f(std::vector<Class> const & values) {
    ...
    container.reserve(values.size() + a);
    ...
} 
```

现在，无论 a 是 0 还是 1，性能都是相同的（快速）。结论必须是额外项目的保留对性能没有影响（在问题中假设）。此外，对源代码或编译器标志的其他小的更改会在快慢之间切换性能，因此看起来代码优化器在某些情况下比在其他情况下更幸运。

f() 的以下实现使用相同的编译器标志触发相反的行为，因此在保留精确大小时它会很快，而在保留额外项目时会很慢：

```
template<typename Container>
void f(std::vector<Class> const & values) {
    Container container;
    container.reserve(values.size());
    for (auto it = values.begin(); it != values.end(); ++it) {
        add(container, *it);
    }
    insert_to_file(container);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:04:31.550

我相信在您的特定情况下，确切尺寸与额外物品之间的差异`reserve`绝对可以忽略不计。此外，某些实现可能会将请求的大小截断为某个数字（例如 2 的幂），因此根本没有区别。

OTOH 你的程序的性能瓶颈似乎是别的东西。您执行两个昂贵的数组操作：

*   搜索元素插入的适当位置
*   在“中间”插入单个元素

As you probably noticed, your program depends on `random`. It's easy to see that in your specific case if random numbers are growing - your program will run faster, OTOH if they shrink - you'll have to perform more "expensive" insertions.

I guess that subtle code changes may trigger different random number generation.

# map - 为什么图像映射不好？

> ID：15707689
> 
> 赞同：-3
> 
> 时间：2013-03-29T16:50:58.317
> 
> 标签：map, imagemap

我试图说服我目前的工作地点，图像映射已经过时，我们应该使用所有 HTML/CSS。我需要一些令人信服的反对图像映射的论据。你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:02:22.647

图像映射不一定“过时”（事实上，最新的 HTML5 规范中仍然存在该功能）。它们现在在一个非常具体的领域提供功能：在不支持的浏览器中检测鼠标在不规则形状区域上的移动`svg`（可缩放矢量图形）。如果您需要支持 IE6-8，并且您需要这种功能，那么没有其他选择。

您可以使用 JavaSript 创建鼠标悬停和其他效果，例如[ImageMapster](http://www.outsharked.com/imagemapster/) jQuery 插件，以处理“神秘肉”导航问题。

在现代浏览器中，SVG 可以通过 CSS 原生支持这种效果。如果较旧的浏览器支持不是问题，那么我可能会使用 SVG 而不是图像映射。一个健壮的实现可能是使用 SVG，并依赖于旧浏览器的图像映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:58:15.220

我发现，考虑到正在使用的图像，图像地图很难向用户传达他们可以点击的东西。在 CSS 中做翻转效果并以这种方式向用户提供反馈更容易。

除此之外，它们应该适合实际使用。

查看[神秘肉类导航](http://en.wikipedia.org/wiki/Mystery_meat_navigation)以获得一个很好的例子。

# version-control - 如何在 Mercurial 存储库中找到所有有冲突的合并？

> ID：15707690
> 
> 赞同：0
> 
> 时间：2013-03-29T16:50:58.870
> 
> 标签：version-control, mercurial, awk, grep

我正在研究开源项目中的合并。

我最近问[如何在 Mercurial 存储库中找到所有具有多个父项的提交？](https://stackoverflow.com/questions/15637103/how-can-i-find-all-the-commits-that-have-multiple-parents-in-a-mercurial-reposit)，并得到了很好的答案。

现在我需要缩小查询范围，只找到有冲突的提交。

对于冲突，我的意思是在两个贡献提交中修改了同一个文件。

此外，如果我能找到一个 mercurial 或 bash（grep、awk？）命令，它只给我那些由两个贡献者修改了同一行的提交，那将非常有用。

这个想法是找到无法自动解决的提交。

那么，如何在 Mercurial 存储库中找到所有发生冲突的合并？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:45:14.417

没有简单的方法可以找到这些，因为合并中没有任何记录来指示合并是否存在冲突。

注意，一个在两个分支中修改过的文件并不一定会构成冲突，只有当文件是：

1.  不可合并（即二进制或类似）
2.  或者，文件中的至少一个区域在两个分支中都发生了更改

如果您在一个分支中更改文件的顶部，而在另一个分支中更改底部，并且它们之间的距离足够远（通常更改之间的几行就足够了），那么这将合并而不会发生冲突。

您唯一的选择是重播包含在两个分支中更改的文件的每个合并，记下 mercurial 无法在没有冲突的情况下合并哪些合并。

此外，我不知道有什么方法可以使用内置查询语法来查找在两个分支中更改了同一个文件的合并。我认为您必须自己去挖掘日志（即使用一些代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:21:28.790

对于每个合并修订，您可以检索相对于第一个和第二个父修订的更改文件列表。出现在两个列表中的文件可能是冲突的。

这是一个示例：

```
for rev in $(hg log -r "merge()" --template '{rev}\n'); do
    hg status --rev "p1($rev)" --rev $rev --no-status | sort > /tmp/p1
    hg status --rev "p2($rev)" --rev $rev --no-status | sort > /tmp/p2
    echo Conflicts in $rev:
    comm -1 -2 /tmp/p1 /tmp/p2
done 
```

注意：这可能无法处理重命名的文件。您可以尝试将“--copies”添加到“hg status”调用中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:52:08.623

您可以使用过滤器来隔离所有合并的文件以及它们的父文件。但是您随后需要区分父母以查看是否存在任何合并冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T19:45:36.323

1.  是的，您必须重播合并父级之间的每次合并
2.  合并后检查合并的返回码

> 成功返回 0，如果有未解析的文件则返回 1。

# ruby-on-rails - FriendlyID 不构建 HTML 转义 slug

> ID：15707692
> 
> 赞同：0
> 
> 时间：2013-03-29T16:51:06.930
> 
> 标签：ruby-on-rails, friendly-url, friendly-id

我已经`friendly_id`正确设置并且一切正常，使用蛞蝓。

我遇到的问题是我的`Tag`模型（即 FriendlyId 附加到的模型）上的某些名称需要进行 HTML 转义。

`c++`或之类的名称`.net`。

当我运行`Tag.find_each(:&save)`时，它为我生成了所有的 slug....但是在那些带有这些名称的标签上，发生了这样的事情：

```
> c = Tag.where(:name => "c++")
  Tag Load (0.9ms)  SELECT "tags".* FROM "tags" WHERE "tags"."name" = 'c++'
 => [#<Tag id: 2, name: "c++", num_questions: 187598, created_at: "2013-03-23 07:02:09", updated_at: "2013-03-29 15:34:09", questions_count: 87, slug: "c">] 
> Tag.where(:name => ".net")
  Tag Load (0.9ms)  SELECT "tags".* FROM "tags" WHERE "tags"."name" = '.net'
 => [#<Tag id: 142, name: ".net", num_questions: 149074, created_at: "2013-03-23 07:09:47", updated_at: "2013-03-29 15:34:10", questions_count: 85, slug: "net">] 
1.9.3p392 :012 > Tag.where(:name => "c#")
  Tag Load (1.0ms)  SELECT "tags".* FROM "tags" WHERE "tags"."name" = 'c#'
 => [#<Tag id: 38, name: "c#", num_questions: 435620, created_at: "2013-03-23 07:03:27", updated_at: "2013-03-29 15:34:10", questions_count: 130, slug: "c--3">] 
```

请注意每一个上的 slug - 以及它们如何与`name`每条记录的不正确对应。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:13:26.860

friendly_id （至少当您使用 调用它时`:use => :slugged`）尝试“清理”字段值，以便它在 URL 中看起来不错。如果你想改变这种行为，你可以覆盖[normalize_friendly_id](http://rubydoc.info/github/norman/friendly_id/master/FriendlyId/Slugged#normalize_friendly_id-instance_method)。如果你这样做，你需要确保对你的 slug 进行 URL 编码，因为诸如此类的东西`#`在 URL 中已经具有特殊含义。

对于以后遇到此问题的任何人，可行的解决方案是避免使用 friendly_id's `:use_slugged`，而是仅使用标签的原始名称并让 Rails 的链接助手自动转义它们。对于“.net”标签，它还需要更改路由以`resources :tags, :constraints => { :id => /.*/ }`防止 Rails 将点解释为路径分隔符。

# php - PHP从中提取文本 ?

> ID：15707695
> 
> 赞同：0
> 
> 时间：2013-03-29T16:51:15.247
> 
> 标签：php, html

我有一个看起来像这样的 .html 文件：

```
<html>
<body>
<pre style="word-wrap: break-word; white-space: pre-wrap;">{blah blah blah text that I want extracted} </pre>
</body>
</html> 
```

我想制作一个 PHP 脚本，从`<pre>`标签中提取内部文本。我已经尝试过简单的 HTML DOM，但它没有做任何事情，它只是没有回应。我不确定我在这里做错了什么，或者我是否应该使用简单的 HTML Dom。这是我的 PHP 脚本代码，用于从 html 文件中提取文本：

```
<?php
include 'simple_html_dom.php';
// Create DOM from URL or file
$html = file_get_html('http://data.mtgox.com/api/2/BTCUSD/money/ticker');

// Find all images
foreach($html->find('img') as $element)
       echo $element->src . '<br>';

// Find all links
foreach($html->find('pre') as $element)
       echo $element . '<br>';
?> 
```

关于为什么它不起作用的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:54:27.613

工作 DOMDOcument 示例

```
$doc = new DOMDocument();
$doc->loadXML('<html><body><pre style="word-wrap: break-word; white-space: pre-wrap;">{blah blah     blah text that I want extracted} </pre></body></html>');
$pres = $doc->getElementsByTagName('pre');
foreach($pres as $v){
   echo $v->firstChild->wholeText.'<br />';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:57:49.760

您正在获取的 URL 返回 JSON，而不是 HTML。

使用[json 解析器](http://php.net/json_decode)来处理它。

# php - 新的 mysqli 与 mysqli_connect

> ID：15707696
> 
> 赞同：41
> 
> 时间：2013-03-29T16:51:21.513
> 
> 标签：php, mysqli

new`mysqli`和 和有什么不一样`mysqli_connect`？我知道执行查询是不同的；
比如：`mysqli->query()`和`mysqli_query()`
为什么会有两种不同的类型，有什么区别？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-29T16:52:27.303

一种用于过程式编程，另一种用于 OOP 式编程。两者都有相同的目的；`Open a new connection to the MySQL server`

**OOP 样式用法**

```
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db'); 
```

**程序样式的使用**

```
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db'); 
```

参考：[PHP手册](http://www.php.net/manual/en/mysqli.construct.php)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-29T16:57:06.183

就在@Hanky Panky 上。我还要添加 PHP 文档：

[http://www.php.net/manual/en/mysqli.construct.php](http://www.php.net/manual/en/mysqli.construct.php)

> 笔记：
> 
> 仅面向 OO 语法：如果连接失败，仍会返回一个对象。要检查连接是否失败，请使用 mysqli_connect_error() 函数或 mysqli->connect_error 属性，如前面的示例中所示。

So error handling is just one difference.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-20T01:54:28.953

I just found a subtle but interesting difference between the two.

If you encounter a connection error with `mysqli_connect` (like `$connection = mysqli_connect()`), no mysql info will be returned to the $connection variable. As such, you will not be able to identify the error with `myqli_errno($connection)`.

However if you encounter a connection error using new mysqli (like `$connection = new mysqli()`), the mysql info WILL be returned and you can check the error with `$connection->connect_errno`.

Knowing this, I'd opt for new mysqli.

Oops... Just saw answer from Rick Buczynski and realized after posting that I'm restating what he said, but his reply is more informative.

# asp.net - 分配多个角色的 ASP.NET 成员资格

> ID：15707699
> 
> 赞同：1
> 
> 时间：2013-03-29T16:51:35.257
> 
> 标签：asp.net, sqlmembershipprovider

我正在尝试将新创建的用户分配给角色“玩家”。我总共有 2 个角色，“玩家”和“管理员”。

当我执行以下代码时，新创建的用户被分配了两个角色，而不仅仅是“玩家”角色。

```
 string username = UserNameTextBox.ToString();
        Roles.AddUserToRole(username, "Player"); 
```

我不明白它为什么要这样做，通过删除它不会为用户分配任何角色的代码，所以我不确定它为什么还要添加“管理员”角色。

谁能告诉我为什么这样做？以及如何使其仅分配玩家角色？

# zsh - zsh - 从 shell 脚本中获取命令历史条目

> ID：15707711
> 
> 赞同：1
> 
> 时间：2013-03-29T16:52:03.037
> 
> 标签：zsh

这是一个 zsh 特定的脚本，我稍后会担心 bash（即永远不会）。

这是我到目前为止所得到的。

```
#!/home/slu/.zsh/bin/zsh

# This is a shellscript generator that converts a history entry to a script
set -e

if [[ $2 =~ [0-9]+ ]]
then
    cmd= !$2
    echo "first arg is $1 and command is $cmd"
else 
    echo "Invalid 2nd arg"
    exit 1
fi 
```

这显然不起作用，因为`!33`当我将它`33`作为第二个参数传递时它会查找命令。

**换句话说，** bash 的 zsh 等价物是`history -p`什么？

如何让脚本扩展它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:07:20.227

我相信答案是`fc -l $2 $2`

完整的脚本在[这里不断更新](https://gist.github.com/unphased/5272286)

# ios - SystemButton FLEXIBLE_SPACE Titanium 无法正常工作

> ID：15707719
> 
> 赞同：0
> 
> 时间：2013-03-29T16:52:30.680
> 
> 标签：ios, titanium-mobile, addeventlistener

我有一个教程来开发我的第一个应用程序。我正在使用多平台软件。现在，下面的代码只在第一次工作，然后完成按钮消失。任何建议。当然，这发生在 iphone 模拟器中。

```
//flexible space for button bars
var flexSpace = Titanium.UI.createButton({
    systemButton:Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE
});

//done system button
var buttonDone = Titanium.UI.createButton({
    systemButton:Titanium.UI.iPhone.SystemButton.DONE,
    bottom: 0
});
//add the event listener 'click' event to our done button
buttonDone.addEventListener('click', function(e){
    tfAmount.blur();
    tfInterestRate.blur();
    interestRate = tfInterestRate.value;
    tfAmount.visible = true;
    labelAmount.visible = true;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:04:12.983

寻找解决方案

```
var toolview = Ti.UI.iOS.createToolbar({
    height : 40,
    width : '100%',
    left : 0,
    top : 0,
    items : [flexSpace, buttonDone],
    barColor : '#000000'
});
win.add(toolview); 
```

# javascript - 如何开发基于 Web 的沙箱

> ID：15707725
> 
> 赞同：0
> 
> 时间：2013-03-29T16:52:47.927
> 
> 标签：javascript, html, css, sandbox, projects-and-solutions

我想开发一个涉及使用沙箱的交互式网站。我在下面给出了项目可能看起来的示例；

[http://tryhaskell.org/](http://tryhaskell.org/) 或 [http://www.codecademy.com/#!/exercises/0](http://www.codecademy.com/#!/exercises/0)

我不确定哪种语言最适合用于开发沙箱。我相信 JavaScript 会比较合适。

关于如何学习开发基本沙箱或指南/书籍的建议将不胜感激。

# python - 字符串到数字列表功能不起作用

> ID：15707729
> 
> 赞同：1
> 
> 时间：2013-03-29T16:52:56.413
> 
> 标签：python, string, numbers

我对 Python 编程非常陌生，并且一直在关注一些视频和网站教程。我正在处理一些编程练习问题并且在调试时遇到了麻烦。这是我第一次练习编程。该函数接受一个字符串并将其转换为数字列表。所以'a'变成0，'b'变成1，等等。它看起来很简单，但我收到错误'IndexError：list index out of range'。我已经尝试了一些东西，但我不确定问题是什么。有人可以看看我的代码，看看我是否犯了任何明显的错误。非常感谢所有帮助！

```
 import sys
    import string
    import math

    def string2nlist(m):
    characters =    ['a''b''c''d''e''f''g''h''i''j''k''l''m''n''o''p''q''r''s''t''u''v''w''x''y''z']
    numbers = ['0''1''2''3''4''5''6''7''8''9''10''11''12''13''14''15''16''17''18''19''20''21''22''23''24''25']
    newList = []
    msgLen = len(m)         # var msgLen will be an integer of the length

    print 'Message before conversion: ' + m

    index = 0               # iterate through message length in while loop
    while index < msgLen:
        letter = m[index]   # iterate through message m
        i = 0
        while i < 26:
            if letter == characters[i]:
                newList[index] = numbers[i]
            i = i + 1
        index = index + 1
    print newList
    return newList

    message = 'hello'
    newMessage = string2nlist(message)

    print 'Message after conversion: ', newMessage 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:56:25.817

您的列表格式似乎不正确。尝试：

```
characters =    ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
numbers = ['0','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:59:13.080

这：

```
characters = ['a''b''c''d''e''f''g''h''i''j''k''l''m''n''o''p''q''r''s''t''u''v''w''x''y''z']
numbers = ['0''1''2''3''4''5''6''7''8''9''10''11''12''13''14''15''16''17''18''19''20''21''22''23''24''25'] 
```

Python compiles adjacent string literals into a single string. This is useful in many cases, but unfortunately it means that it turned your lists into:

```
characters = ['abcdefghijklmnopqrstuvwxyz']
numbers = ['012345678910111213141516171819202122232425'] 
```

As was mentioned, add commas in between the characters.

# c - *array[] 是什么意思？

> ID：15707732
> 
> 赞同：3
> 
> 时间：2013-03-29T16:53:11.483
> 
> 标签：c, arrays

在c中，如果我声明如下：

```
char *somarray[] = {"Hello"}; 
```

这是什么意思 ？

如果我打印它：

`somarray`-> 给我一个堆栈中的内存地址

`&somarray`- >同样的事情，堆栈内存地址，但是..

`*somarray`-> 在常量中给我一个内存地址

我实际上可以`*somarray`用来打印字符串。

**到底是怎么回事？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T16:55:26.840

`*array[]`表示指针数组，在您的示例中：

```
char *somarray[] = {"Hello"}; 
```

`somarray[]`是 的数组`char*`。此数组大小为 1，并且包含字符串上的地址，`"Hello"`例如：

```
somarray[0] -----> "Hello" 
```

`somarray`表示数组中第一个元素的地址。

`&somarray`表示数组地址

`*somarray`表示第一个元素的值

假设`"Hello"`字符串的地址是例如 201，并且地址是数组`somaaray`，`423`那么它看起来像：

```
+----+----+----+---+---+----+----+----+---+----+ 
| `H`| 'e'|'l'|'l'|'o'| '\0'|   
+----+----+----+---+---+----+----+----+---+---+----+  
 201   202  203 204 205 206  207   208 209 210  2
 ^
 | 
+----+----+
| 201     |
+----+----+
 423
somarray 
```

和：

`somarray` 给`423`

`&somarray`给`423`

`*somarray` 给`201`

需要注意 `somarray`并`&somarray`给出相同的值，但在语义上两者是不同的。一个是第一个元素的地址，另一个是数组的地址。[阅读这个答案。](https://stackoverflow.com/questions/15177420/what-does-sizeofarr-returns/15177499#15177499)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T16:55:17.153

您正在声明一个在堆栈上分配的常量字符串数组。

例如，您可以这样做：

```
char* strs[] = { "Hello", "world" }; 
```

然后`strs[0]`将指向常量字符串“Hello”和`strs[1]`“world”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T16:55:46.153

我更喜欢把它读成

```
char* somearray[] 
```

因为您正在创建一个指针数组。

somearray 中的每个元素都指向一个 char*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T16:59:24.397

它是一个字符串数组。它与此相同：

```
typedef char * string;
string somarray[] = {"Hello"}; 
```

也就是说，somarray 的每个元素都是一个字符串。一个字符串，就地是一个指向许多字符的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T16:56:04.723

您可能想要做的是：

```
char somearray[] = {"Hello"}; 
```

您所做的是通过执行以下操作创建指向指针的指针：

```
char *somearray[] = {"Hello"}; 
```

# css - 在元素悬停时显示标题

> ID：15707734
> 
> 赞同：-2
> 
> 时间：2013-03-29T16:53:19.613
> 
> 标签：css, hover

我现在正在[这个网站](http://mtthwbsh.com/sta499)上工作，我的目标是添加以下功能：

*   将鼠标悬停在单个图像上时，我想显示标题中包含的标题。
*   交互应该从颜色栏过渡并具有相同的背景

我认为这可能仅通过 CSS 就可以实现，但是在可视化标记的工作方式时遇到了麻烦。任何方向的建议或观点将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:22:29.137

这可以通过 CSS3 完成。[http://jsfiddle.net/zh3EC/](http://jsfiddle.net/zh3EC/)

```
a > h3 {
    width: 100%;
    display: block;
    position: absolute;
    bottom: -1.5em;
    color: white;
    background-color: #993434;
    padding: 0.4em;
    box-sizing: border-box;

    -webkit-transition: all 300ms ease-in;
        -moz-transition: all 300ms ease-in;
        -ms-transition: all 300ms ease-in;
        -o-transition: all 300ms ease-in;
        transition: all 300ms ease-in;
}

a:hover > h3 {
    bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:58:48.083

试试这个 jQuery：

```
$(function() {
    $('img').hover(function() {
        var title = $(this).attr('title');
    }, function() {
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:04:06.567

你可以`div`用一个`background-image`和一个`h1`（标题）里面的标题；然后使用`:hover`伪类将标题的不透明度从 更改为`0`。`1`

HTML：

```
<div>
    <h1>Title Here</h1>
</div> 
```

CSS：

```
div {
    background-image: url('image_here.jpg');
}

h1 {
    display: block;
    width: 100%;
    height: 100%;
    opacity: 0;
}

p:hover {
    opacity: 1;
} 
```

[JS 小提琴示例](http://jsfiddle.net/GJdMq/2/)

# macos - 基于视图的 NSTableView 是否可以在行边界之外绘制？

> ID：15707739
> 
> 赞同：1
> 
> 时间：2013-03-29T16:53:47.153
> 
> 标签：macos, cocoa, nstableview, nstablecellview

我有`NSTableView`2 列。每列包含一个不同的`NSTableCellView`子类，在某些情况下，我想实现重叠效果，例如，第 1 列第 1 行中的视图顶部可以位于前一列第 0 行第 0 行视图的底部上方。

我知道设置 NSTableCellView 子类实例的框架是没有意义的，`tableView:viewForTableColumn:row`因为它总是会被覆盖，但感觉剪辑可能发生在行级别和单元级别。

是否可以在单元格/行边界之外绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:28:01.433

如果您弄乱了图形上下文，*任何*视图都有可能在其边界之外绘制；这样做是完全错误的事情，就像在不在应用程序权限范围内的内存中“乱涂乱画”一样是错误的。

一种更安全（更尊重系统的绘图状态）的方法是通过自己绘制每个 NSTableRowView 的背景来伪造它，但在其自己的边界内垂直“偏移”，以便第*n**行为*除第一排。也就是说，除了第一行之外，行视图的“顶边”绘制了看起来像前一个行视图的底边的东西；底部边缘在绘图中被“切断”。这样，您牺牲了翻转开关以获得视图阴影的相对较小的便利性，以便更好地控制行的绘制方式。

# css - 以下文本继承了 p 的字体大小，即使 p 不是祖先

> ID：15707740
> 
> 赞同：0
> 
> 时间：2013-03-29T16:53:47.467
> 
> 标签：css

在以下示例中收集自：

[http://6.470.scripts.mit.edu/css_exercises/exercise5.html](http://6.470.scripts.mit.edu/css_exercises/exercise5.html)

```
.wrapper1 {
  width: 60%;
  margin: 0px auto 0px auto;
  border: 1px solid;
  text-align: center;
  background: #eeeeee;
}
.wrapper2 {
  clear: left;
}
.p1 {
  font-size: 70px;
}
.p2 {
  font-size: 50px;
} 
```

HTML

```
<div class="wrapper1">
  <div class="wrapper2">
  <p class="p1">MIT 6.470</p>
  <p class="p2">Learn Web Programming this IAP</p2>
  <a href="">Comprehensive Curriculum</a>
  <a href="">Insightful Guest Lectures</a>
  <a href="">Interaction with Sponsors</a>
  <a href="">$30,000+ in Total Prizes</a>
</div>
Copyright © 2012 MIT 6.470
</div> 
```

使用这种样式会发生什么情况是，之后的链接`p.p2`被放置在相邻的位置，`p.p2`但我的理解是这`p`是块元素，因此它不应该允许任何其他元素与其相邻。其次，链接的大小与 的大小相同`p.p2`，即使`p.p2`不是链接的祖先。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:57:29.713

这条线

```
 <p class="p2">Learn Web Programming this IAP</p2> 
```

你需要`</p2>`改为`</p>`

# windows - Windows 批量检查变量是否以特定字符串开头、结尾和包含特定字符串

> ID：15707742
> 
> 赞同：9
> 
> 时间：2013-03-29T16:53:55.767
> 
> 标签：windows, if-statement, batch-file, cmd, equals

我正在尝试检查批处理文件中的变量是否以`"`contains开头`BETA`并以`")`.

是否可以？如果是的话，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T15:04:04.340

假设您的变量不包含任何换行符或回车符，那么只需要一个 FINDSTR 命令。它具有有限的正则表达式支持，足以解决这个问题。

```
@echo off
setlocal
set test1=abc
set test2="abc"
set test3="")
set test4=")"
set test5=abc")"
set test6=xyzBETAzyx
set test7="xyz BETA zyx"
set test8=xyzBETAzyx")"
set test9=xyzBETAzyx")"
set test10="xyzbetazyx")
set test11="xyzBETAzyx")

for /l %%N in (1 1 11) do call :test test%%N
exit /b

:test  variableName
setlocal enableDelayedExpansion
echo !%1!|>nul findstr /rx \".*BETA.*\") && set "result=PASS" || set "result=FAIL"
echo %1 = !result!: !%1!
exit /b 
```

只有 TEST11 通过。

该`/R`选项强制将搜索字符串视为正则表达式。

该`/X`选项意味着它必须完全匹配 - 整个字符串必须与搜索字符串匹配。

`.*`是匹配任何字符串的正则通配符表达式。

我将 FINDSTR 输出重定向到 NUL，因为我们不需要查看该行。我们只想要返回码

FINDSTR 要求将双引号文字转义为`\"`

使用延迟扩展，以便您可以安全地回显变量中的任何值。

我`&&`习惯在 FINDSTR 成功时有条件地采取行动，并`||`在 FINDSTR 失败时有条件地采取行动。

我的`:TEST`例程将变量的名称作为唯一的参数。

请注意，在某些情况下，批处理解析器要求您也将双引号转义为`^"`，这意味着完全转义的引号看起来像`\^"`。但是在您的情况下不需要这种复杂性。FINDSTR 转义规则实际上有点不稳定。请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053)了解更多信息。

我的测试代码执行区分大小写的搜索。所以`beta`不会匹配`BETA`。如果您想要不区分大小写的搜索，则只需添加该`/I`选项。

***编辑：2015-07-22***

如果且仅当您想忽略大小写时，另一种选择是使用变量扩展搜索/替换和扩展子字符串操作的组合。test10 和 test11 都在下面通过。

```
@echo off
setlocal
set test1=abc
set test2="abc"
set test3="")
set test4=")"
set test5=abc")"
set test6=xyzBETAzyx
set test7="xyz BETA zyx"
set test8=xyzBETAzyx")"
set test9=xyzBETAzyx")"
set test10="xyzbetazyx")
set test11="xyzBETAzyx")

for /l %%N in (1 1 11) do call :test test%%N
exit /b

:test  variableName
setlocal enableDelayedExpansion
set "result=FAIL"
if "!%1:beta=!" neq "!%1!" if "!%1:~0,1!" equ ^""" if "!%1:~-2!" equ ^"")" set "result=PASS"
echo %1 = !result!: !%1!
exit /b 
```

The first IF checks for `beta` anywhere (case insensitive). The second IF checks for `"` at the beginning, and the last IF checks for `")` at the end. The only tricky thing is figuring out how to escape the comparison string when it has an odd number of quotes.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T18:00:12.363

```
@ECHO OFF
SETLOCAL
SET var=abc&CALL :check
SET var="abc"&CALL :llcheck
SET var="")&CALL :check
SET var=")"&CALL :llcheck
SET var=abc")"&CALL :llcheck
SET var=xyzbetazyx&CALL :check
SET var="xyzbetazyx"&CALL :llcheck
SET var=xyzbetazyx")"&CALL :llcheck
SET var=xyzbetazyx")"&CALL :check
SET var="xyzbetazyx")&CALL :check
GOTO :eof
:: Lop last, then check
:llcheck
SET var=%var:~0,-1%
:check
SET result=N
SET var2=%var%
SET varvar=%var%

>test1.txt ECHO %var:~0,1%%var:~-2%
>test2.txt ECHO "")
FC test1.txt test2.txt >nul
IF ERRORLEVEL 1 GOTO done
SET var|FINDSTR /b "var="|FINDSTR /i "beta" >nul
IF ERRORLEVEL 1 GOTO done
SET result=Y
:done
ECHO %var% starts " has BETA and ends ") : %result% 
GOTO :eof 
```

哪里有意愿...

设置不平衡的变量`"`可能很棘手。我只是将其设置为平衡并删除了最后一个字符（`:llcheck`entry : lop last 并检查。

本质上，我已经将变量复制到`var2`并`varvar`演示了如果设置这些变量名会发生什么。

然后生成两个文件。`TEST1.TXT`包含 和 的第一个和最后`var`两个`TEST2.TXT`字符`"")`

比较两者 - 如果它们不相同，那么变量不会开始`"`和结束`")`否则很好 - 可能只是写出`var`一个文件并用于`findstr`find `beta`，但我决定发送的输出`SET var`应该是的`ALL`内容表格中的`var*`变量

```
var=abc
var2=abc
varvar=abc 
```

进入 findstr，查找以 ( `/b`)开头的那个，`var=`并查找*THAT*是否包含字符串选择不区分大小写。如果您特别想要大写，只需更改并删除.`beta``/i``BETA``beta``BETA``/i`

`result`设置为`Y`或`N`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T18:49:07.627

```
@echo off
setlocal EnableDelayedExpansion
set quote="
set variable="This must be true: BETA")
echo Variable=!variable!
if "!variable:~0,1!" equ "!quote!" (
   rem Start with "
   if "!variable:BETA=!" neq "!variable!" (
      rem Contains BETA
      if "!variable:~-2!" equ "!quote!^)" (
         echo TRUE: it start with " contains BETA and ends with "^)
      ) else (
         echo FALSE, it does not ends with "^)
      )
   ) else (
      echo FALSE, it does not contain BETA
   )
) else (
   echo FALSE, it does not start with "
) 
```

输出：

```
Variable="This must be true: BETA")
TRUE: it start with " contains BETA and ends with ") 
```

*   处理不平衡引号（以及其他特殊批处理字符，实际上）的方法是使用延迟扩展：这样引号和特殊字符不会出现在正在解析的命令行中。

*   请记住用 ^ 转义任何不是命令块右括号的右括号。

*   检查变量是否包含给定字符串的一种简单方法是尝试从变量值中消除字符串：如果结果与原始值不同，则变量包含字符串。

安东尼奥

# linux - 少数繁忙的线程与许多大部分空闲的线程

> ID：15707744
> 
> 赞同：0
> 
> 时间：2013-03-29T16:54:05.377
> 
> 标签：linux, multithreading, concurrency

我有一些代码，对于每个用户对象，1-2 秒的工作完成，然后等待 60 秒，然后做更多的工作。我的问题是，如果我有几千个用户，除了为每个线程的堆栈提供更多内存之外，每个用户有一个线程（在 60 秒等待期间睡觉）还有其他缺点，而不是有一个小得多的数量线程服务所有用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:02:56.253

除了内存限制之外，您可能会遇到一些限制，例如`/proc/sys/kernel/threads-max`，`/proc/sys/vm/max_map_count`但否则应该没问题。可能还有其他小的相关开销，但如果它对您有用并且您不希望负载增加以耗尽机器资源，那为什么不呢。我的意思是，如果您没有问题，为什么要修复？

这是一个好主意，无论您采用哪种方法来查看机器在预期的并发用户上限下的行为方式，并确保它有一些应对意外情况的空间。

# javascript - Javascript 中的音频触发器

> ID：15707745
> 
> 赞同：0
> 
> 时间：2013-03-29T16:54:07.690
> 
> 标签：javascript, jquery

我已经使用 javascript 编写了一个测验，我想在用户正确或错误地回答问题时添加声音效果。正确和错误答案的声音会有所不同。我刚开始 javascript 并且需要这个用于一个类项目，所以任何帮助将不胜感激。如果有人可以提供帮助，我可以上传 html 和 js 代码。我想我必须使用带有 if 或 else 语句的 onclick 事件，但我不太确定如何执行此操作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:02:12.760

```
 <audio id="right">
        <source src="right.mp3">
    </audio>
   <audio id="wrong">
        <source src="wrong.mp3">
    </audio> 
```

然后玩：

```
document.getElementById("right").play(); 
```

或者

```
document.getElementById("wrong").play(); 
```

# python - Python：如何获取具有它们所属组的最大值的行？

> ID：15707746
> 
> 赞同：9
> 
> 时间：2013-03-29T16:54:10.243
> 
> 标签：python, pandas

我改写我的问题。我正在寻找以下问题的解决方案：

我有一个像这样的数据框：

```
 Sp   Mt   Value  count
4  MM2  S4   bg     10
5  MM2  S4   dgd    1
6  MM4  S2   rd     2
7  MM4  S2   cb     8
8  MM4  S2   uyi    8 
```

我的目标是获取每组中计数等于最大值的所有行，例如：

```
MM4  S4   bg     10
MM4  S2   cb     8
MM4  S2   uyi    8 
```

我按 ['Sp','Mt'] 分组

有人知道我怎么能在 pandas 或 python 中做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-29T17:21:06.997

```
>>> print d
     Sp  Mt Value  Count
ID                      
4   MM2  S4    bg     10
5   MM2  S4   dgd      1
6   MM4  S2    rd      2
7   MM4  S2    cb      8
8   MM4  S2   uyi      8

>>> d.groupby('Sp').apply(lambda t: t[t.Count==t.Count.max()])
         Sp  Mt Value  Count
Sp  ID                      
MM2 4   MM2  S4    bg     10
MM4 7   MM4  S2    cb      8
    8   MM4  S2   uyi      8 
```

# python - 如何将文字分配给变量，然后稍后在模块中使用相同的变量？

> ID：15707747
> 
> 赞同：-2
> 
> 时间：2013-03-29T16:54:15.827
> 
> 标签：python, python-3.x

我正在编写一个代码来模拟 python 中的公告板系统（BBS）。

使用此代码，我想让用户选择查看已输入的消息或输入稍后查看的消息。

我的代码如下：

```
def BBS():
 print("Welcome to UCT BBS")
 print("MENU")
 print("(E)nter a message")
 print("(V)iew message")
 print("(L)ist files")
 print("(D)isplay file")
 print("e(X)it")

selection=input("Enter your selection:\n")

 if selection=="E" or selection=="e":
    message=input("Enter the message:\n")
 elif selection=="V" or selection=="v":
    if message==0:
        print("no message yet")
    else:
        print(message)
 elif selection=="L" or selection=="l":
    print("List of files: 42.txt, 1015.txt")
 elif selection=="D" or selection=="d":
    filename=input("Enter the filename:\n")
    if filename=="42.txt":
        print("The meaning of life is blah blah blah ...")
    elif filename=="1015.txt":
        print("Computer Science class notes ... simplified")
        print("Do all work")
        print("Pass course")
        print("Be happy")
    else:
        print("File not found")
 else:
    print("Goodbye!")

BBS() 
```

输入消息时，代码应该在选择 v 后显示消息，或者如果没有输入消息，如果选择 v，则应该显示“还没有消息”。

我得到错误：

```
Traceback (most recent call last):
  File "C:\Program Files\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 1, in <module>
    # Used internally for debug sandbox under external interpreter
  File "C:\Program Files\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 15, in BBS
builtins.UnboundLocalError: local variable 'message' referenced before assignment 
```

在使用 WingIDE 时选择 v 时。

请帮助我更正此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:56:37.340

该变量`message`仅*在**一个* `if`分支中分配。如果选择了*另一个*分支，则永远不会定义该变量。

首先给它一个空值：

```
 message = None

 if selection=="E" or selection=="e":
      message=input("Enter the message:\n")
 elif selection=="V" or selection=="v":
      if not message:
          print("no message yet")
      else:
          print(message) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:20:51.993

你遇到的问题是`message`你的函数中的一个局部变量。当函数结束时，它给出的值会丢失，即使你再次运行该函数。为了解决这个问题，您需要更改代码中的某些内容，但更改的内容可能取决于您希望如何组织程序。

一种选择是将其设为全局变量，如果函数运行多次，则可以重复访问该变量。为此，首先在全局级别（函数外部）为其分配一个值，然后使用`global`函数内部的语句使 Python 清楚它是您要访问的全局名称。

```
message = None

def BBS():
    global message
    # other stuff

    if foo():
        message = input("Enter a message: ")
    else:
        if message:
            print("The current message is:", message)
        else:
            print("There is no message.") 
```

Another option would be to stick with a local variable, but keep the logic of your program all within the same function. That is, if you want a user to be able to make several entries, you need to have a loop inside the function to contain them. Here's how that might look:

```
def BBS():
   message = None # local variable

   while True: # loop until break
       if foo():
           message = input("Enter a message: ")
        elif bar():
            if message:
                print("The current message is:", message)
            else:
                print("There is no message.")
        else:
            print("Goodbye!")
            break 
```

A final, and more complicated (but also more permanent and scalable) option would be to use something outside of your program to store the message. This lets it persist between runs of the program, and perhaps be seen by different users at different times. For a serious system I'd suggest a database, but for a "toy" system you can probably get away with simple text files. Here's an example of that:

```
def BBS():
    if foo():
        with open("message.txt", "w") as f:
            message = input("Enter a message: ")
            f.write(message)
    else:
        try:
            with open("message.txt", "r") as f:
                message = f.read()
                print("The current message is:", message)
        except (FileNotFoundError, OSError):
            print("There is no message.") 
```

# jquery - jQuery this.VarName 有可能吗？

> ID：15707749
> 
> 赞同：0
> 
> 时间：2013-03-29T16:54:23.923
> 
> 标签：jquery, variables, this

所以简而言之，我想做的是在特定元素的点击事件上，即（.beanHolder ul li）我想从分数（.score）中减去然后声明一个变量（clicked =“yes”）那么当用户再次单击该项目，代码的第二部分被处理。我知道冗长的方法是为每个 .bean 声明一个 var（这将是至少 40 个 var），因此代码可能会变得相当冗长。我的想法是，我可以使用“this”将变量添加到 bean，但实际上它不起作用。任何想法都会很棒！！！

我的 jQuery 代码 ->

```
<script>
$(document).ready(function(){
var clicked = "";
$(".beanHolder ul li").click(function(){

    if (this.clicked == "")
    {
        $(".bean", this).attr("src", "img/bean.png");
        var number = parseInt($('#score').text());
        number-=1;
        $('#score').text(number);
        this.clicked = "yes";
        return;
    }
    else if (this.clicked == "yes")
    {
        $(".bean", this).attr("src", "img/beanG.png");
        var number = parseInt($('#score').text());
        number+=1;
        $('#score').text(number);
        this.clicked = "";
        return; 
    }
}); 
});
</script> 
```

编辑：我让它工作了；如果有人正在寻找类似的东西，这将起作用->

```
<script>
$(document).ready(function(){

$(".beanHolder ul li").click(function(){
    //$(this).data("clicked","no");
    var clicked = $(this).data("clicked");

    if (clicked)
    {
        $(".bean", this).attr("src", "img/beanG.png");
        var number = parseInt($('#score').text());
        number+=1;
        $('#score').text(number);
        $(this).data("clicked",false);
        //var clicked = $(this).data("clicked");
        //return;
    }
    else
    {       
//This is to keep the score from going below 0; as it is it can not go over a score of 20.
        if (parseInt($('#score').text()) > -1) 
        {
            $(".bean", this).attr("src", "img/bean.png");
            var number = parseInt($('#score').text());
            number-=1;
            $('#score').text(number);
            $(this).data("clicked",true);
            //return;
        }
    }
}); 
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:57:31.947

您可以使用[.data()](http://api.jquery.com/data/)将任意数据附加到 DOM 元素：

```
$(this).data("clicked","yes"); 
```

您可以稍后通过以下方式检索它：

```
var clicked = $(this).data("clicked"); 
```

所以，把它们放在一起，你可以做这样的事情：

```
$(".beanHolder ul li").click(function(){
    var clicked = $(this).data("clicked");
    if (clicked) {
        // this element has been clicked
        $(this).data("clicked",false);    // I'd much rather use bools than "yes"/"no"
    }
    else {
        // clicked hasn't been clicked
        $(this).data("clicked",true);    
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:58:54.503

您可以像这样设置属性：

```
<script>
$(document).ready(function(){

$(".beanHolder ul li").click(function(){
    var clicked = $( this ).attr( 'clicked' );
    if (clicked == "")
    {
       ...
    }
    else if (this.clicked == "yes")
    {
      ...
    }
}); 
});
</script> 
```

# c# - C# 和 Awesomium - 多线程

> ID：15707750
> 
> 赞同：0
> 
> 时间：2013-03-29T16:54:27.497
> 
> 标签：c#, multithreading, awesomium

我想使用多个 Awesomium 实例（实际上没有显示/打印它们）同时访问某些网站，但不知道从哪里开始。我用 WebBrowser 控件做了这个，但结果证明这是一个非常糟糕的主意，我决定改用 Awesomium。

先感谢您！

我将添加一些示例代码，希望它能显示我真正需要的内容：

```
for (int i = 0; i < 3; i++)
{
    var th = new Thread(() =>
    {
        //Create new view/control/instance here
    });
    th.Start();
 } 
```

我试图在那里创建 WebView，但出现内存损坏错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-27T22:27:39.307

@user1410644 Awesomium 不支持文档中所述的多线程 .. 初始化后，您可以创建多个 webviews，它们将完成这项工作并且可以工作

然后开始 for 循环

```
 WebSession session = WebCore.CreateWebSession(folder + "\\b" + i, prefs);
                            WebView view = WebCore.CreateWebView(1920, 1080, session, WebViewType.Offscreen);
                            view.LoadingFrameComplete += (se, ev) =>
                            {
                                if (ev.IsMainFrame)
                                {
                                    var bitmapSurface = (BitmapSurface)((WebView)se).Surface;
                                    var writeableBitmap = new WriteableBitmap(((WebView)se).Width, ((WebView)se).Height, 96, 96, PixelFormats.Bgra32, null);
                                    writeableBitmap.Lock();
                                    bitmapSurface.CopyTo(writeableBitmap.BackBuffer, bitmapSurface.RowSpan, 4, false, false);
                                    writeableBitmap.AddDirtyRect(new Int32Rect(0, 0, ((WebView)se).Width, ((WebView)se).Height));
                                    writeableBitmap.Unlock();
                                    var image = new Image();
                                    image.Source = writeableBitmap;
                                    screenShot.Source = writeableBitmap;
                                }
                            };
                        view.Source = "http://www.google.com".ToUri(); 
```

我认为这样的事情可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:26:40.417

尝试这样的事情：

```
 private void newbrowser()
    {
        Awesomium.Windows.Forms.WebControl browser =
                                    new Awesomium.Windows.Forms.WebControl();
            browser = new Awesomium.Windows.Forms.WebControl();
            browser.Paint += browser_Paint;
            browser.Location = new System.Drawing.Point(1, 1);
            browser.Name = "webControl";
            browser.Size = new System.Drawing.Size(1024, 768);
            browser.Source = new System.Uri("http://checkip.dyndns.com/", System.UriKind.Absolute);
            browser.TabIndex = 0;

    } 
```

接着

```
 private void button1_Click(object sender, EventArgs e)
    {
        System.Threading.Thread newThread;
        newThread = new System.Threading.Thread(newbrowser);
        newThread.Start();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T13:41:57.423

据我所知，Awesomium 不支持多线程，所以报错是正常的。您可以在同一线程上创建多个 Awesomiums 组件 WebControl（最简单的是 UI 线程 - 否则您需要自己提供“屏幕”刷新代码）。

# php - How to send a license expiration notice using PHP?

> ID：15707753
> 
> 赞同：0
> 
> 时间：2013-03-29T16:54:31.950
> 
> 标签：php, mysql, database, triggers, alert

In my current project, I have a table full of drivers' information with a column containing the expiration dates of their drivers' licenses.

I want to send an alert email when their license expires in the next 20 days. I want this check to happen on a daily basis.

If I bind this to an action such as a user's login, I'm afraid it may be missed in certain cases (like a weekend when no one logs in) etc.

Is there a way to do this check routinely without any user intervention? I'm using CodeIgniter as my PHP framework. My project's running on a shared hosting account with PHP 5.3 and MySql 5.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:59:18.830

You can create a controller which triggers the checks/emails etc in some way shape or form, then simply [run CI via the command line](http://ellislab.com/codeigniter/user-guide/general/cli.html) in a Cronjob which runs per minute/hour/day etc

```
$ cd /path/to/project && php index.php tools message 
```

As you're on shared hosting, you probably don't have access to Crontab, there are various services such as [http://www.mywebcron.com/](http://www.mywebcron.com/) which you can set up Cronjobs on. Obviously in this case the above is only part valid- rather than use php in the command line, you'd need to use wget (or similar) to access the controller via HTTP.

# android - 在为人脸检测运行 OpenCV 示例时使用带有 Android 模拟器的网络摄像头

> ID：15707756
> 
> 赞同：2
> 
> 时间：2013-03-29T16:54:37.000
> 
> 标签：android, opencv, android-emulator, android-camera, face-detection

我试图在 Android 上配置 Open CV。按照本教程完成后 -> [http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html) -> [http://docs.opencv.org/doc /tutorials/introduction/android_binary_package/android_dev_intro.html#android-dev-intro](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_dev_intro.html#android-dev-intro) 我已经很好地设置了库并且没有错误。当我启动 Open CV 示例“FaceDetection”时，它一直在模拟器上显示错误，例如“您的设备似乎不支持相机（或其锁定）。应用程序将被关闭”。当我创建模拟器时，我已将其设置为支持摄像头（不是两侧，只有前置摄像头设置为工作并使用网络摄像头捕获帧）。Open CV 管理器已在模拟器上成功配置。我的设备是否有可能不支持相机？！！如何解锁相机？！！谢谢。
PS 我正在使用配置了最新 ADT（Android 4.2.2 - API 级别 17）、CDT 和 NDK 的 Eclipse IDE（Juno）。我也在使用 Opencv 2.4.4 android sdk。Android 模拟器设备是 10.1" WXGA 平板电脑。没有具体理由使用此设备（我只是从列表中选择它，因为它可以工作）。我使用带有网络摄像头的后置摄像头，而没有使用前置摄像头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T19:50:42.477

我指的是 open cv 网站上关于 Android 的 docs for open cv 我发现使用模拟器相机的机会很小，因为一些示例使用 Android Java Camera API，它可以通过 AVD 访问。但是大多数示例使用 OpenCV Native Camera，这可能无法与模拟器一起使用。 [http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html#running-opencv-samples](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html#running-opencv-samples)

问候

# c# - 两个字符串之间的差异

> ID：15707757
> 
> 赞同：0
> 
> 时间：2013-03-29T16:54:38.557
> 
> 标签：c#, string, array-difference

我使用二进制数，并尝试在数组中找到两个仅在一个差异之间的字符串。例如

```
string[]binary = {"{0000}","{0001}","{0111}"}; 
```

只有第四个字符对于第一个和第二个元素是不同的，我应该证明这一点，那么我怎样才能找到它们呢？C#中有什么有效的方法吗？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:49:45.523

这可能会有所帮助：

```
public static int StringDistance(string first, string second)
{
    int result = 0;

    for (int i = 0; i < first.Length; i++)
    {
        if (!first[i].Equals(second[i]))
        {
            result++;
        }
    }

    return result;
} 
```

你可以这样使用它：

```
string[] binary = { "{0000}", "{0001}", "{0111}" };
var result = binary.Where(input => binary.Any(i => StringDistance(i, input) == 1)).ToArray();
//output: {"0000", "0001"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:46:45.697

怎么样，它会找到所有具有一个不同位的二进制数：

```
class Program {
    static void Main( string[ ] args ) {
        string[] binary = { "{0000}", "{0001}", "{0111}" };
        var differentNumbers = DifferentNumbers( binary );

        foreach ( Tuple<string, string, int> tuple in differentNumbers )
            Console.WriteLine( string.Format( "{0} ; {1} - index {2}", tuple.Item1, tuple.Item2, tuple.Item3 ) );
    }

    public static List<Tuple<string, string, int>> DifferentNumbers( string[ ] array ) {
        var differentNumbers = new List<Tuple<string, string, int>>( );

        for ( int i = 0; i < array.Length; i++ ) {
            for ( int j = i + 1; j < array.Length; j++ ) {

                int count = 0, index = 0;
                for ( int c = 1; c < array[ i ].Length - 1; c++ ) {
                    if ( array[ i ][ c ] != array[ j ][ c ] ) {
                        index = c;
                        if ( count++ > 1 )
                            break;
                    }
                }

                if ( count == 1 )
                    differentNumbers.Add( new Tuple<string, string, int>( array[ i ], array[ j ], index ) );
            }
        }

        return differentNumbers;
    }
} 
```

结果：

> {0000} ; {0001} - 索引 4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:24:38.320

遍历每个字符串一次以转换为 UInt64，然后可以非常有效地多次使用以相互测试：

```
 static private void TestCheckFor1BitDiff()
    {
        string[] values = new string[]
        {
            "0000",
            "0001",
            "0111",
            "1000",
            "1111"
        };

        UInt64[] intValues = values.Select(v => ConvertBinaryToUInt64(v)).ToArray();

        bool comp01 = CheckFor1BitDiff(intValues[0], intValues[1]); // true
        bool comp02 = CheckFor1BitDiff(intValues[0], intValues[2]); // false
        bool comp12 = CheckFor1BitDiff(intValues[1], intValues[2]); // false
        bool comp03 = CheckFor1BitDiff(intValues[0], intValues[3]); // true
        bool comp24 = CheckFor1BitDiff(intValues[2], intValues[4]); // true
    }

    private static UInt64 ConvertBinaryToUInt64(string value)
    {
        if (64 < value.Length)
        {
            throw new ArgumentException("exceeds 64 bits", "value");
        }

        UInt64 power = 1;
        UInt64 retVal = 0;

        foreach (char bit in value.ToArray().Reverse())
        {
            switch (bit)
            {
                case '1':
                    retVal += power;
                    break;
                case '0':
                    break;
                default:
                    throw new ArgumentException("contains characters other than 0 and 1", "value");
            }

            power *= 2;
        }

        return retVal;
    }

    static private bool CheckFor1BitDiff(string a, string b )
    {
        UInt64 a1 = ConvertBinaryToUInt64(a);
        UInt64 b1 = ConvertBinaryToUInt64(b);

        return CheckFor1BitDiff(a1, b1 );
    }

    static private bool CheckFor1BitDiff(UInt64 a, UInt64 b )
    {
        return IsPowerOfTwo( a ^ b );
    }

    static private bool IsPowerOfTwo(UInt64 value)
    {
        return (value & (value - 1)) == 0;
    } 
```

# c# - 如何创建一段时间内评分最高的文章列表？(asp.net c#)

> ID：15707759
> 
> 赞同：-1
> 
> 时间：2013-03-29T16:54:41.970
> 
> 标签：c#, asp.net, vote

我有一个包含文章的网页。用户可以“喜欢”这些文章。我想要创建的是每个周/月的最高评价文章列表，例如“本周热门文章”、“上周热门文章”等。我想知道如何正确实现这一点并计算投票数以后不会减慢数据库/网页的速度。谢谢，橡树

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:04:36.527

您可以创建一个接受 3 个参数的函数

```
public List<Aritcle> GetTopArticles(int top, DateTime startDate, DateTime endDate)
{
   //Implement this method 
   //e.g.
   //Select Top(10) * From Article 
   //Where likeDate Between startDate AND endDate
   //ORDER BY Likes DESC
} 
```

您现在可以根据您想要的日期多次调用此方法，例如本周、上周、上个月

```
var topArticlesThisWeek = GetTopArticles(10, DateTime.Parse('2013-03-24'), DateTime.Today);
var topArticlesLastMonth = GetTopArticles(10, DateTime.Parse('2013-02-01'), DateTime.Parse('2013-02-29')); 
```

但那些日子必须是动态的——不像我那样硬编码

# vb.net - 如何在 Class (Of T) 中指定可接受的类型？

> ID：15707760
> 
> 赞同：1
> 
> 时间：2013-03-29T16:54:46.703
> 
> 标签：vb.net, types

我已经声明了一个名为`WorkerPool(Of T)`. 现在它接受所有类型（字符串、布尔值、整数等），除了我希望它只接受子类型`Worker`，比如`FileWorker`或`MeshWorker`。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:14:54.220

你可以试试这个：

```
Public Class WorkerPool(Of T As Worker)

End Class 
```

# c++ - 未定义的参考错误

> ID：15707766
> 
> 赞同：0
> 
> 时间：2013-03-29T16:55:13.080
> 
> 标签：c++

我遇到了未定义的参考错误的问题。我收到以下错误：

```
[Linker error] undefined reference to `operator>>(std::istream&, Voter&)'
[Linker error] undefined reference to `Voter::~Voter()' 
[Linker error] undefined reference to `Voter::~Voter()'
ld returned 1 exit status 
```

我正在使用 Bloodshed 开发 C++ 4.9

我的代码：

**选民.h**

```
#include <iostream>
#ifndef VOTER_H
#define VOTER_H

using namespace std;
class Voter
{
      private:
              string ID;
              int nr_times_voted;
              bool voted;

      public:
             Voter()
             {
               ID = " ";
               nr_times_voted = 0;
               voted = false;
             }

             Voter(string newVoter)
             {
               ID = "0000";
               nr_times_voted = 0;
               voted = false;
             }

              ~Voter();     
              string getID();
              int getnr_times_voted();
              bool getvoted();
              void set_voted()
              {
                voted = true;
              }

               friend Voter operator++(Voter& V);
               friend istream & operator>>(istream & ins, Voter & V);
               friend ostream & operator<<(ostream & outs, Voter & V);
};
#endif 
```

**ClassVoter.cpp**

```
 #include "Voter.h"
    #include <iostream>
    #include <string>

    using namespace std;

    //Accessors to retrieve data from each of the member variables
    string Voter:: getID()
    {
      return ID;
    }

    int Voter:: getnr_times_voted()
    {
      return nr_times_voted;
    }

    bool Voter:: getvoted()
    {
      return voted;
    }

    //destructor
    Voter::~Voter()
    {}

    void operator++(voted & V)
    { 
      voted++;
      return voted;    
    }

    istream & operator >>(istream & ins, Voter & V)
    {
      ins >> V.ID >> V.nr_times_voted >> V.voted;
    }

    ostream & operator <<(ostream & outs, Voter & V)
    {
      outs << " Voters that want to vote: " << endl;
      outs << V.ID << endl;
      return outs;
    } 
```

**TestVoter.cpp**

```
#include "Voter.h"
#include <iostream>
#include <fstream> 
#include <cstdlib> 
#include <string>

using namespace std;

int main()
{
   ifstream infile;
   ofstream outfile;
   Voter ID;

   cout << "Enter your Voter ID: ";
   cin >> ID;

   infile.open("VotersRoll.dat");
   outfile.open("UpdatedVoters.dat");

   infile.close();
   outfile.close();   

   system("pause");
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:00:33.663

您几乎肯定会忘记将其包含`ClassVoter.cpp`在构建过​​程中。

我从未使用过 Bloodshed 开发 C++，因此无法提供分步说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:06:01.390

`undefined reference`意味着链接器无法在您链接在一起以创建可执行文件的任何文件中找到程序使用的某些函数的定义。

使用 g++ 编译器，这意味着您正在给出这样的命令：

```
g++ main.cpp; 
```

代替：

```
g++ main.cpp ClassVoter.cpp; 
```

# git - 如何在 Git 存储库中找到所有发生冲突的合并？

> ID：15707769
> 
> 赞同：6
> 
> 时间：2013-03-29T16:55:19.390
> 
> 标签：git, version-control, awk, grep

我正在研究开源项目中的合并。

我最近问[如何在 Git 存储库中找到所有具有多个父级的提交？](https://stackoverflow.com/questions/15637494/how-can-i-find-all-the-commits-that-have-more-than-one-parent-in-a-git-repositor)，并得到了很好的答案。

现在我需要缩小查询范围，只找到有冲突的提交。

对于冲突，我的意思是同一个文件在两个贡献提交中被修改。

此外，如果我能找到一个 git 或 bash（grep、awk？）命令，它只给我那些由两个贡献者修改了同一行的提交，那将非常有用。

这个想法是找到无法自动解决的提交。

那么，如何在 git 存储库中找到所有有冲突的合并？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T22:03:17.527

一旦创建了合并提交，不幸的是，如何执行合并的信息就会丢失。这很重要，因为`git merge`接受许多影响冲突出现的选项，例如策略和每个策略选项。但是，如果您的目标是涵盖寻找可能与默认合并选项发生冲突的合并的合理案例*，*则可以暴力破解它：检查合并提交，重新创建它们的合并，并标记 git 报告的合并.

注意：此脚本检查许多不同的提交，并运行`git reset --hard`甚至`git clean -fdx`在每次迭代中。确保只在不包含 git 未知的重要文件的结帐中运行它！

```
#!/bin/bash

old_branch=$(git symbolic-ref --short HEAD)
for commit in `git rev-list --merges HEAD`
do
  # find the parents of the merge commit
  parents=$(git log -1 --format=%P $commit)
  fst=${parents%% *}
  rest=${parents#* }
  # check out the first parent
  git checkout -q $fst
  # merge with the rest of them
  git merge --no-commit $rest >/dev/null 2>&1
  # if there are any conflicts, print the commit and abort the merge
  if git ls-files --unmerged | grep -q '^'; then
    echo $commit
    git merge --abort
  fi
  # get rid of changes so the next checkout doesnt complain
  git reset -q --hard
  git clean -fdxq
done
git checkout -q $old_branch 
```

# java - 将对话框保持在顶部

> ID：15707770
> 
> 赞同：0
> 
> 时间：2013-03-29T16:55:20.440
> 
> 标签：java, android, android-alertdialog

任何人都可以请指导我。我很难将对话框保持在 webview 顶部（在 MainActivity 中）。

基本上，如果没有互联网连接，我会提示打开 WiFi。问题是当这个对话框出现时，如果用户不小心触摸了背景（被覆盖整个屏幕的 webview 占据），对话框就会消失。

如何始终将其保持在顶部，直到并且除非用户单击对话框中的按钮之一（设置或取消）。

在页面加载时，我还在使用另一个带有进度条的对话框。它也有同样的问题（触摸屏幕上的周围区域时消失）。实际发生的事情是，webview 出现在对话框之上。

任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:01:42.933

这是自（我相信）ICS 以来对话框的默认行为。

指定`myDialog.setCanceledOnTouchOutside(false)`禁用它。

[参考](http://developer.android.com/reference/android/app/Dialog.html#setCanceledOnTouchOutside%28boolean%29)

# vba - 如何在宏中确定 MS Word 样式的 styleId？

> ID：15707772
> 
> 赞同：1
> 
> 时间：2013-03-29T16:55:24.607
> 
> 标签：vba, ms-word

已保存的 Word 文档将其样式定义保存在单个位置 (styles.xml)，并通过 styleId 引用文档 (document.xml) 中的这些样式。styleId 可以与样式名称不同。样式名称是通过用户界面显示的内容。

在我的宏中，我有一行`Set myStyle = ActiveDocument.Styles("myStyle")`，我可以通过监视窗口浏览属性`myStyle`，但我找不到 styleId。这可以使用宏吗？

# python - matplotlib 热图反转数据？

> ID：15707773
> 
> 赞同：4
> 
> 时间：2013-03-29T16:55:25.060
> 
> 标签：python, numpy, matplotlib, heatmap, astronomy

这是一个奇怪的问题，希望有人能帮助我。我正在尝试使用 matplotlib 热图绘制我的数据的密度图，但不知何故，我的数据以一种奇怪的方式被反转/旋转。我有一个散点图，然后我将这些点合并为密度，但图像根本不是应该出现的。例如，这是原始散点图，它具有正确的方向：

![原始散点图](../Images/9b4a659742c8d48a91de1c3af88380da.png)

然后这是我的热图（请注意，结构从上方逆时针旋转了 90 度，但轴数据是正确的......轴上的数字是从数据自动生成的，所以如果你简单地反转轴，图片就会出来正确，但数字全部关闭）：

![方向错误但轴正确的热图](../Images/3586488fbafa04c7a944c97dce947a2d.png)

我只是看不出这是怎么回事，因为数据解析例程与我刚刚生成散点图时的相同。我认为，它必须是热图的编码方式，但我看不出故障可能在哪里。我已经尝试过考虑热图的内置原点放置（左上角），但这并没有解决它。代码如下（先解析所有数据）：

```
import numpy as np
from numpy import ndarray
import matplotlib.pyplot as plt
import matplotlib
import atpy
from pylab import *

twomass = atpy.Table()

twomass.read('/Raw_Data/IRSA_downloads/2MASS_GCbox2.tbl')

hmag = list([twomass['h_m']])
jmag = list([twomass['j_m']])
hmag = np.array(hmag)
jmag = np.array(jmag)
colorjh = np.array(jmag - hmag)

idx_c = (colorjh > -1) & (colorjh < 6)  #manipulate desired color quantities here
idx_h = (hmag > 8) & (hmag < 18)
idx = idx_c & idx_h 
```

现在这里是热图代码：

```
heatmap, xedges, yedges = np.histogram2d(colorjh[idx], hmag[idx], bins=500)
extent = [xedges[0], xedges[-1], yedges[0], yedges[-1]]

plt.clf()
plt.imshow(heatmap, extent=extent)

plt.xlabel('Color(J-H)', fontsize=15)           #adjust axis labels here
plt.ylabel('Magnitude (H)', fontsize=15)

plt.gca().invert_yaxis()

plt.legend(loc=2)
plt.title('CMD for Galactic Center (2MASS)', fontsize=20)
plt.grid(True)
plt.show() 
```

我对 Python 很陌生，所以解释越少，我就越有可能好好利用它。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T19:01:53.737

您的问题似乎与`np.histogram2d`工作方式有关。从[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram2d.html)中：

> 请注意，直方图不遵循笛卡尔约定，其中*x*值在横坐标上，*y*值在纵坐标轴上。相反，*x*是沿数组的第一个维度（垂直）进行直方图， *y*是沿数组的第二个维度（水平）进行直方图。这确保了与`histogramdd`.

使用

```
extent = [yedges[0], yedges[-1], xedges[-1], xedges[0]] 
```

相反应该给你你所期望的。如果您想保持与散点图相同的方向，请反转`colorjh[idx]`并`hmag[idx]`在您的呼叫中。`histogram2d`

# c# - 泛型类型层次结构的 DebuggerTypeProxy

> ID：15707775
> 
> 赞同：5
> 
> 时间：2013-03-29T16:55:42.263
> 
> 标签：c#, debugging, math.net, mathnet-numerics

我正在尝试为 Math.NET Numerics 中的矩阵和向量编写调试器类型代理/代理，因此调试器会显示更多有用的信息（也在 F# FSI 中）。类型层次结构如下：

*   `Generic.Matrix<T>`
*   `Double.Matrix : Generic.Matrix<double>`
*   `Double.DenseMatrix : Double.Matrix`

## 什么有效

具有封闭的泛型类型的非泛型代理。`Matrix<double>`如果不是构造函数接受 a`Double.Matrix`或 a ，它也以相同的方式工作`Double.DenseMatrix`。

```
public class MatrixSummary
{
    public MatrixSummary(Matrix<double> matrix) { }
    // ...
} 
```

然后，用以下内容装饰 Double.DenseMatrix：

```
[DebuggerTypeProxy(typeof(MatrixSummary))] 
```

## 我想做什么

我宁愿不必为每种类型实现单独的代理，所以让我们让它通用：

```
public class MatrixSummary<T> where T : ...
{
    public MatrixSummary(Matrix<T> matrix) { }
    // ...
} 
```

然后，用以下内容装饰 Double.DenseMatrix：

```
[DebuggerTypeProxy(typeof(MatrixSummary<>))] 
```

或者也许关闭：

```
[DebuggerTypeProxy(typeof(MatrixSummary<double>))] 
```

和/或如果需要也可以将该属性添加到基类中。

这些都不起作用，例如在调试单元测试时，即使文档说它应该在使用开放的泛型类型（即`MatrixSummary<>`）声明属性时起作用。毕竟它也适用于`List<T>`等。

有任何想法吗？

有关的：

*   [诊断为什么 DebuggerTypeProxy 属性不起作用](https://stackoverflow.com/questions/3385388/diagnosing-why-debuggertypeproxy-attributes-are-not-working)
*   [如何让我的 DebuggerTypeProxy 目标类从基代理继承？](https://stackoverflow.com/questions/12443513/how-can-i-have-my-debuggertypeproxy-target-class-inherit-from-base-proxies)
*   [http://msdn.microsoft.com/en-us/library/d8eyd8zc.aspx](http://msdn.microsoft.com/en-us/library/d8eyd8zc.aspx)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T17:59:17.393

创建`MatrixSummary`一个嵌套类：

```
[DebuggerTypeProxy(typeof(Matrix<>.MatrixSummary))] 
```

# python - 用于网络爬虫的可自定义管理页面（网络界面）

> ID：15707787
> 
> 赞同：0
> 
> 时间：2013-03-29T16:56:23.393
> 
> 标签：python, mongodb, user-interface, database-administration, nosql

我用 python 编写了 web scraper，它使用 MongoDB 作为数据存储，以 JSON 格式保存复杂的设置。现在我需要一些用户界面，他们会将这些设置输入数据库。

它必须是一些网页，如 Django Admin Page 或其他东西，但它必须能与复杂的 MongoDB 文档结构一起工作。

不幸的是，我不能使用这些[应用程序](http://docs.mongodb.org/ecosystem/tools/administration-interfaces/)之一，因为它们不能被定制为只显示一些文档并根据必要的要求编辑用户界面（或者我错了？）

那么，有什么简单的方法可以制作这样的页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:38:40.373

这是一个特定的必要条件，但有一些选项涵盖 json 结构，但不包括权限，您可以实现：

*   [http://jsonwidget.org/wiki/Jsonwidget](http://jsonwidget.org/wiki/Jsonwidget)
    *   [http://jsonwidget.org/wiki/Jsonwidget-javascript](http://jsonwidget.org/wiki/Jsonwidget-javascript)
    *   [http://jsonwidget.org/wiki/Jsonwidget-python](http://jsonwidget.org/wiki/Jsonwidget-python)
*   [http://jsonmate.com/](http://jsonmate.com/)是一个 jquery 插件

问候， 莫西

# jquery - jquery：2个更改事件

> ID：15707793
> 
> 赞同：0
> 
> 时间：2013-03-29T16:56:44.137
> 
> 标签：jquery

我有这个使用**更改**事件的插件。

```
(function( $ ){
  $.fn.liteUploader = function (userOptions) {
    var defaults = { script: null, allowedFileTypes: null, maxSizeInBytes: null, typeMessage: null, sizeMessage: null, before: function(){}, ... },
        options = $.extend(defaults, userOptions); 
```

> this.change（函数（）{

```
 var i, formData = new FormData(), file, obj = $(this), errors = false, errorsArray = [], filename = $(this).attr('name');
        if (this.files.length === 0) { return; }
... 
```

并像这样**准备**工作：

```
$(function(){
   $('.fileUpload').liteUploader({
        script: 'upload.php',
        allowedFileTypes: 'image/jpeg,image/png,image/gif',
        maxSizeInBytes: 1048576, 
   ... 
}); 
```

我想把它放在一个函数（即：my_upload()）中，这样使用：

```
<input type="file" name="fileUpload1" id="fileUpload1" class="fileUpload" onchange="javascript: my_upload();" /> 
```

但我有 2 个**更改**事件并上传 2,3.. 次相同的文件。如果我从插件中删除*this.change(function () {*，我会得到一个错误：

```
TypeError: this.files is undefined
if (this.files.length === 0) { return; } 
```

解决办法是什么？提前致谢。

# android - OnLongClick 和展开 - 折叠不能与 Expandable ListView 同时工作

> ID：15707794
> 
> 赞同：0
> 
> 时间：2013-03-29T16:56:51.020
> 
> 标签：android, android-listview, expandablelistview

我必须在可扩展列表视图中长按组行时弹出警报对话框。当我在`onGroupView`我的类的方法中实现它时它可以工作。但是`BaseExpandableListAdapter`在这个扩展折叠功能不起作用之后。我认为长点击事件首先获取用户交互，因此它阻碍了组视图的扩展。

我已经设置`onLongClickListener`了 group 的膨胀视图。

但是，当我对孩子做同样的事情时。它工作得非常好，因为可扩展列表中的孩子没有像组这样的基本功能（扩展和折叠）。

谁能建议我如何拦截这两个事件（长按+展开-折叠）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T20:22:34.360

您可以在可展开列表视图上设置 OnItemLongClickListener。 `ExpandableListView.PACKED_POSITION_TYPE_GROUP`是组的 if，将其更改为 `ExpandableListView.PACKED_POSITION_TYPE_CHILD`，您可以通过长按组子项进行操作。

```
 pager_income = (ExpandableListView) findViewById(R.id.income_scroll);

    pager_income.setOnItemLongClickListener(new OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
            if (ExpandableListView.getPackedPositionType(id) == ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
                Toast toast = Toast.makeText(c, "Loong", Toast.LENGTH_LONG);
                toast.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL, 0, 0);
                toast.show();

                return true;
            }

            return false;
        }
    }); 
```

# java - SQLiteDatabase：仅当值不存在时才插入（不是通过原始 SQL 命令）

> ID：15707796
> 
> 赞同：15
> 
> 时间：2013-03-29T16:57:05.510
> 
> 标签：java, android, android-sqlite, sql-insert

我知道有一个 SQL 命令是这样的：`IF NOT EXISTS`，但是由于 Android 的`SQLiteDatabase`类有一些很好的方法，我想知道是否可以通过方法插入一个不存在的值。

目前我正在使用它来插入`String`：

```
public long insertString(String key, String value) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(key, value);
    return db.insert(DATABASE_TABLE, null, initialValues);
} 
```

（`db`是 的一个实例`SQLiteDatabase`。）

我尝试了该方法`insertOrThrow()`而不是`insert()`，但它似乎与`insert()`. 也就是说，如果该值已经在该行中，它会再次插入，因此该行现在有两个相同值的值。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-29T17:06:52.807

> SQLiteDatabase：仅当值不存在时才插入（不是通过原始 SQL 命令）

由于您不想使用原始查询，您可以在插入之前实现它，只需创建一些函数来测试值是否已经在数据库中。它可以返回 boolean（或 int），如果返回 false，您将执行插入查询。

**一个小例子：**

```
public int getCount() {
    Cursor c = null;
    try {
        db = Dbhelper.getReadableDatabase();
        String query = "select count(*) from TableName where name = ?";
        c = db.rawQuery(query, new String[] {name});
        if (c.moveToFirst()) {
            return c.getInt(0);
        }
        return 0;
    }
    finally {
        if (c != null) {
            c.close();
        }
        if (db != null) {
            db.close();
        }
    }
}

if (getCount() == 0) {
   //perform inserting
} 
```

> 如果该值已经在该行中，则再次插入该行，因此该行现在具有两个相同值的值。

这可以通过使用不允许插入重复项的适当约束来解决。检查这个：

*   [SQLite 中的约束](http://zetcode.com/db/sqlite/constraints/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-29T17:03:46.930

您可以为插入行的冲突设置[CONFLICT_IGNORE](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#CONFLICT_IGNORE)行为：

```
public long insertString(String key, String value) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(key, value);
    return db.insertWithOnConflict(DATABASE_TABLE, null, initialValues, SQLiteDatabase.CONFLICT_IGNORE);
} 
```

但这取决于约束。如果您将来需要，还有更多行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T17:00:32.263

有两种基本方法可以做到这一点：

1.  查询数据库。手动检查数据是否已经存在，如果不存在则添加。
2.  使用[`CONSTRAINT`s](https://www.sqlite.org/lang_createtable.html#constraints)。将您的 SQL 模式定义为仅允许此列的唯一数据。

如果您想在不同的情况下执行不同的操作（或者如果您还不精通 SQL），第一种方法更容易。第二种方法可以用更少的输入来完成，并且可以普遍应用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-29T17:09:22.110

解决方案不在 Android Api 中，而是在数据库中。如果您想确保您插入的字符串不存在于数据库中，有两种可能的解决方案。

1.  创建数据库时，将列（您要插入的字符串）设为`UNIQUE`，这将防止它在该列中输入重复项。当您尝试插入并且是重复项时，它将引发错误；您可以通过异常处理来处理它。

2.  您可以创建第二种方法（在每次插入后调用；这很昂贵）检查表中的重复项并删除它们。

I would go with approach 1\.

here is a sample `UNIQUE` syntax

`create table tablename( col1 datatype, col2 datatype, col3 datatype, UNIQUE(col1));`

good luck

# java - Netezza Java UDTF 自定义函数

> ID：15707799
> 
> 赞同：0
> 
> 时间：2013-03-29T16:57:11.860
> 
> 标签：java, netezza

嗨，我是 Netezza 的新手，我被要求开发自定义 Java 函数并提交 API。

我的问题是我是否可以根据给定的要求生成解决方案。这是要求。

我得到一个表，我们将其命名为 Table1。我必须逐行读取表格并计算不同的值，当我的值有意义时，我必须将其插入到不同的表格中。

只是我需要读取多行，计算多个值，当数据有意义时，我可以输出它。

所以我的问题是，这是否可以在 Netezza 自定义 Java UDTF 函数中读取多行并输出很少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:56:01.630

是的，可以读取n行并输出

没有人帮助我，我继续构建了这个功能，它工作正常。

3年后，我被要求分享解决方案。现在不记得要求了，我也是很久以前离开公司的。所以我正在粘贴我编写的600行代码，当时我很天真，可能有更好的方法来做到这一点。如果你能理解它，你会很幸运。

```
import java.sql.Timestamp;
import java.util.concurrent.Executor;
import java.util.concurrent.Executors;
import org.netezza.ae.Nzae;
import org.netezza.ae.NzaeApi;
import org.netezza.ae.NzaeApiGenerator;
import org.netezza.ae.NzaeDataTypes;
import org.netezza.ae.NzaeException;
import org.netezza.ae.NzaeMetadata;
import org.netezza.ae.NzaeRecord;
import org.netezza.ae.NzaeUtil;

public class viewResolver {
private static final Executor exec = Executors.newCachedThreadPool();

public static final void main(String[] args) {
    try {
        mainImpl(args);
    } catch (Throwable t) {
        System.err.println(t.toString());
        NzaeUtil.logException(t, "main");
    }

}

public static final void mainImpl(String[] args) {
    NzaeApiGenerator helper = new NzaeApiGenerator();
    while (true) {
        final NzaeApi api = helper.getApi(NzaeApi.FUNCTION);
        if (api.apiType == NzaeApi.FUNCTION) {
            if (!helper.isRemote()) {
                run(api.aeFunction);
                break;
            } else {
                Runnable task = new Runnable() {
                    public void run() {
                        try {
                            viewResolver.run(api.aeFunction);
                        } finally {
                            api.aeFunction.close();
                        }
                    }
                };
                exec.execute(task);
            }
        }
    }
    helper.close();
}

public static int run(Nzae ae) {
    try {
        int ret = runReal(ae);
        ae.done();
        return ret;
    } catch (NzaeException ex) {
        ex.printStackTrace();
        ae.userError(ex.getMessage());
        ae.done();
        throw ex;
    } catch (Throwable ex) {
        ex.printStackTrace();
        ae.userError(ex.toString());
        ae.done();
        throw new NzaeException(ex.toString());
    }
}

static String acc_id = null;
static String rec_id = null;
static String tuner = null;
static String channel = null;
static String show_name = null;
static String tmsId = null;
static String viewing_type = null;
static String event_type = null;
static String channelFamily = null;
static String ruid = null;
static int suid = 0;
static double timeStarted = 0;
static double timeEnded = 0;
static Timestamp datecreated = null;
static double content_start = 0;
static double content_end = 0;

static String prev_acc_id = null;
static String prev_rec_id = null;
static String prev_tuner = null;
static String prev_channel = null;
static String prev_show_name = null;
static String prev_tmsId = null;
static String prev_viewing_type = null;
static String prev_event_type = null;
static String prev_channelFamily = null;
static String prev_ruid = null;
static int prev_suid = 0;
static double prev_timeStarted = 0;
static double prev_timeEnded = 0;
static Timestamp prev_datecreated = null;
static double prev_content_start = 0;
static double prev_content_end = 0;

public static int runReal(Nzae ae) {

    double dvr_time_watched = 0;
    double vod_time_watched = 0;
    double manual_ffx = 0;
    double manual_ffr = 0;
    boolean end = false;
    double tune_duration = 0;
    boolean live_DVR_Flag = false;
    final NzaeMetadata meta = ae.getMetadata();
    NzaeRecord input = null;
    boolean firstRecord = true;

    validateInput(meta);
    while (!end) {
        NzaeRecord output = ae.createOutputRecord();
        if (true) {
            input = ae.next();

            if (input == null) {// checks if no more records
                end = true;
                // returns the final view
                if (prev_timeEnded - prev_timeStarted != 0) {// if final view is tune
                    tune_duration = prev_timeEnded - prev_timeStarted;
                    output = setOutput(output, prev_acc_id, prev_rec_id, prev_tuner, prev_channel, prev_show_name,
                            prev_tmsId, prev_viewing_type, prev_event_type, prev_channelFamily, prev_ruid,
                            prev_suid, prev_timeStarted, prev_timeEnded, prev_datecreated, 0, 0, tune_duration,
                            manual_ffx, manual_ffr);
                    ae.outputResult(output);

                }
                if (vod_time_watched != 0 || dvr_time_watched != 0 || manual_ffr != 0 || manual_ffx != 0) {

                    if (!prev_event_type.equalsIgnoreCase("DVR_EOE") && dvr_time_watched != 0) {// if DVR
                        output = setOutput(output, prev_acc_id, prev_rec_id, prev_tuner, prev_channel,
                                prev_show_name, prev_tmsId, prev_viewing_type, prev_event_type, prev_channelFamily,
                                prev_ruid, prev_suid, prev_timeStarted, prev_timeEnded, prev_datecreated,
                                prev_content_start, prev_content_end, dvr_time_watched, manual_ffx, manual_ffr);
                        ae.outputResult(output);
                    } else if (!prev_event_type.equalsIgnoreCase("DVR_EOE") && vod_time_watched != 0) {// if VOD
                        output = setOutput(output, prev_acc_id, prev_rec_id, prev_tuner, prev_channel,
                                prev_show_name, prev_tmsId, prev_viewing_type, prev_event_type, prev_channelFamily,
                                prev_ruid, prev_suid, prev_timeStarted, prev_timeEnded, prev_datecreated,
                                prev_content_start, prev_content_end, vod_time_watched, manual_ffx, manual_ffr);
                        ae.outputResult(output);
                    }

                }
                continue;
            } else {// set variables
                if (input.getField(0) != null)
                    acc_id = input.getField(0).toString();
                else
                    acc_id = null;
                if (input.getField(1) != null)
                    rec_id = input.getField(1).toString();
                else
                    rec_id = null;
                if (input.getField(2) != null)
                    tuner = input.getField(2).toString();
                else
                    tuner = null;
                if (input.getField(3) != null)
                    channel = input.getField(3).toString();
                else
                    channel = null;
                if (input.getField(4) != null)
                    show_name = input.getField(4).toString();
                else
                    show_name = null;
                if (input.getField(5) != null)
                    tmsId = input.getField(5).toString();
                else
                    tmsId = null;
                if (input.getField(6) != null)
                    viewing_type = input.getField(6).toString();
                else
                    viewing_type = null;
                if (input.getField(7) != null)
                    event_type = input.getField(7).toString();
                else
                    event_type = null;
                if (input.getField(8) != null)
                    channelFamily = input.getField(8).toString();
                else
                    channelFamily = null;
                if (input.getField(9) != null)
                    ruid = input.getField(9).toString();
                else
                    ruid = null;
                if (input.getField(10) != null)
                    suid = input.getFieldAsNumber(10).intValue();
                else
                    suid = 0;
                if (input.getField(11) != null)
                    timeStarted = input.getFieldAsNumber(11).doubleValue();
                else
                    timeStarted = 0;
                if (input.getField(12) != null)
                    timeEnded = input.getFieldAsNumber(12).doubleValue();
                else
                    timeEnded = 0;
                if (input.getField(13) != null)
                    datecreated = input.getFieldAsTimestamp(13);
                else
                    datecreated = null;
                if (input.getField(14) != null)
                    content_start = input.getFieldAsNumber(14).doubleValue();
                else
                    content_start = 0;
                if (input.getField(15) != null)
                    content_end = input.getFieldAsNumber(15).doubleValue();
                else
                    content_end = 0;

            }
        }

        if (firstRecord) {

            prev_acc_id = acc_id;
            prev_rec_id = rec_id;
            prev_tuner = tuner;
            prev_channel = channel;
            prev_show_name = show_name;
            prev_tmsId = tmsId;
            prev_viewing_type = viewing_type;
            prev_event_type = event_type;
            prev_channelFamily = channelFamily;
            prev_ruid = ruid;
            prev_suid = suid;
            prev_timeStarted = timeStarted;
            prev_timeEnded = timeEnded;
            prev_datecreated = datecreated;
            prev_content_start = content_start;
            prev_content_end = content_end;

            firstRecord = false;
        }

        // ********* if acc id or rec id changes
        if (prev_acc_id != null && prev_rec_id != null && prev_acc_id != null && prev_rec_id != null) {
            if (!prev_acc_id.equalsIgnoreCase(acc_id) || !prev_rec_id.equalsIgnoreCase(rec_id)) {
                if (prev_timeEnded - prev_timeStarted != 0) {// if tune
                    tune_duration = prev_timeEnded - prev_timeStarted;
                    output = setOutput(output, prev_acc_id, prev_rec_id, prev_tuner, prev_channel, prev_show_name,
                            prev_tmsId, prev_viewing_type, prev_event_type, prev_channelFamily, prev_ruid,
                            prev_suid, prev_timeStarted, prev_timeEnded, prev_datecreated, 0, 0, tune_duration,
                            manual_ffx, manual_ffr);
                    ae.outputResult(output);
                    prev_timeEnded = prev_timeStarted = 0;

                    setPreviousValues();
                    tune_duration = 0;
                    manual_ffr = 0;
                    manual_ffx = 0;

                }
                if (dvr_time_watched != 0 || manual_ffr != 0 || manual_ffx != 0) {

                    if (!prev_event_type.equalsIgnoreCase("DVR_EOE")) {// if DVR
                        output = setOutput(output, prev_acc_id, prev_rec_id, prev_tuner, prev_channel,
                                prev_show_name, prev_tmsId, prev_viewing_type, prev_event_type, prev_channelFamily,
                                prev_ruid, prev_suid, prev_timeStarted, prev_timeEnded, prev_datecreated,
                                prev_content_start, prev_content_end, dvr_time_watched, manual_ffx, manual_ffr);
                        ae.outputResult(output);
                    }
                    dvr_time_watched = 0;
                    manual_ffr = 0;
                    manual_ffx = 0;
                    setPreviousValues();
                    live_DVR_Flag = false;

                }
                if (vod_time_watched != 0 || manual_ffr != 0 || manual_ffx != 0) {

                    if (!prev_event_type.equalsIgnoreCase("DVR_EOE")) {// if VOD
                        output = setOutput(output, prev_acc_id, prev_rec_id, prev_tuner, prev_channel,
                                prev_show_name, prev_tmsId, prev_viewing_type, prev_event_type, prev_channelFamily,
                                prev_ruid, prev_suid, prev_timeStarted, prev_timeEnded, prev_datecreated,
                                prev_content_start, prev_content_end, vod_time_watched, manual_ffx, manual_ffr);
                        ae.outputResult(output);
                    }
                    vod_time_watched = 0;
                    manual_ffr = 0;
                    manual_ffx = 0;
                    setPreviousValues();
                    live_DVR_Flag = false;

                }

            }
        }

        // ******** special case tune to DVR
        if (viewing_type != null && prev_viewing_type != null)
            if ((live_DVR_Flag || prev_viewing_type.equalsIgnoreCase("Tune"))
                    && viewing_type.equalsIgnoreCase("DvrEvent")) {

                if (tmsId != null)
                    if (!prev_tmsId.equalsIgnoreCase(tmsId)) {
                        if (live_DVR_Flag) {
                            // should change the event name to "Live DVR"
                            if (!prev_event_type.equalsIgnoreCase("DVR_EOE")) {
                                output = setOutput(output, prev_acc_id, prev_rec_id, prev_tuner, prev_channel,
                                        prev_show_name, prev_tmsId, "LiveDVR", prev_event_type, prev_channelFamily,
                                        prev_ruid, prev_suid, prev_timeStarted, prev_timeEnded, prev_datecreated,
                                        prev_content_start, prev_content_end, dvr_time_watched, manual_ffx,
                                        manual_ffr);
                                ae.outputResult(output);
                            }

                            dvr_time_watched = 0;
                            manual_ffr = 0;
                            manual_ffx = 0;
                            setPreviousValues();
                            live_DVR_Flag = false;

                        }
                    }
                if (tmsId != null)
                    if (prev_tmsId.equalsIgnoreCase(tmsId))
                        if (event_type != null && content_start != 0 && content_end != 0) {
                            live_DVR_Flag = true;
                            // ******* total play time
                            if (event_type.equalsIgnoreCase("DVR_PLAY") || event_type.equalsIgnoreCase("DVR_PAUSE")) {
                                dvr_time_watched += (content_end - content_start);
                            }
                            // ********* total ffx time
                            if (event_type.contains("FWD_START") && !event_type.contains("SKIP")) {
                                manual_ffx += (content_end - content_start);
                            }
                            // ********** total ffr time
                            if (event_type.contains("FWD_END") && !event_type.contains("SKIP")) {
                                manual_ffr += (content_end - content_start);
                            }
                        }

            }

        // ******** special case DVR to tune
        if (viewing_type != null && prev_viewing_type != null)
            if ((live_DVR_Flag || prev_viewing_type.equalsIgnoreCase("DvrEvent"))
                    && viewing_type.equalsIgnoreCase("Tune")) {

                if (tmsId != null)
                    if (!prev_tmsId.equalsIgnoreCase(tmsId)) {
                        if (live_DVR_Flag) {
                            tune_duration = prev_timeEnded - prev_timeStarted;
                            output = setOutput(output, prev_acc_id, prev_rec_id, prev_tuner, prev_channel,
                                    prev_show_name, prev_tmsId, "LiveDVR", prev_event_type, prev_channelFamily,
                                    prev_ruid, prev_suid, prev_timeStarted, prev_timeEnded, prev_datecreated, 0, 0,
                                    tune_duration, manual_ffx, manual_ffr);
                            ae.outputResult(output);
                            prev_timeEnded = prev_timeStarted = 0;

                            setPreviousValues();
                            tune_duration = 0;
                            manual_ffr = 0;
                            manual_ffx = 0;
                            live_DVR_Flag = false;

                        }
                    }
                if (tmsId != null)
                    if (prev_tmsId.equalsIgnoreCase(tmsId))
                        if (timeEnded != 0)
                            prev_timeEnded = timeEnded;
            }

        // ***** For Tune events
        if (prev_viewing_type.equalsIgnoreCase("Tune")) {

            if (tmsId != null)
                if (!prev_tmsId.equalsIgnoreCase(tmsId)) {
                    if (prev_timeEnded != 0) {
                        tune_duration = prev_timeEnded - prev_timeStarted;
                        output = setOutput(output, prev_acc_id, prev_rec_id, prev_tuner, prev_channel,
                                prev_show_name, prev_tmsId, prev_viewing_type, prev_event_type, prev_channelFamily,
                                prev_ruid, prev_suid, prev_timeStarted, prev_timeEnded, prev_datecreated, 0, 0,
                                tune_duration, manual_ffx, manual_ffr);
                        ae.outputResult(output);
                        prev_timeEnded = prev_timeStarted = 0;
                        setPreviousValues();
                        tune_duration = 0;
                        manual_ffr = 0;
                        manual_ffx = 0;

                    }
                }
            if (timeEnded != 0)
                prev_timeEnded = timeEnded;
        }
        // ************ for DVR events
        else if (prev_viewing_type.contains("DvrEvent")) {

            if (tmsId != null)
                if (!prev_tmsId.equalsIgnoreCase(tmsId)) {
                    if (!prev_event_type.equalsIgnoreCase("DVR_EOE")) {
                        output = setOutput(output, prev_acc_id, prev_rec_id, prev_tuner, prev_channel,
                                prev_show_name, prev_tmsId, prev_viewing_type, prev_event_type, prev_channelFamily,
                                prev_ruid, prev_suid, prev_timeStarted, prev_timeEnded, prev_datecreated,
                                prev_content_start, prev_content_end, dvr_time_watched, manual_ffx, manual_ffr);
                        ae.outputResult(output);
                    }
                    dvr_time_watched = 0;
                    manual_ffr = 0;
                    manual_ffx = 0;
                    setPreviousValues();

                }
            if (event_type != null && content_start != 0 && content_end != 0) {
                // ******* total play time
                if (event_type.equalsIgnoreCase("DVR_PLAY") || event_type.equalsIgnoreCase("DVR_PAUSE")) {
                    dvr_time_watched += (content_end - content_start);
                    // play_end = row.getCONTENT_END_EPOCH();
                }
                // ********* total ffx time
                if (event_type.contains("FWD_START") && !event_type.contains("SKIP")) {
                    manual_ffx += (content_end - content_start);
                }
                // ********** total ffr time
                if (event_type.contains("FWD_END") && !event_type.contains("SKIP")) {
                    manual_ffr += (content_end - content_start);
                }
            }

        }
        // ************ for Vod events
        else if (prev_viewing_type.equalsIgnoreCase("VODEvent")) {

            if (ruid != null)
                if (!prev_ruid.equalsIgnoreCase(ruid)) {
                    if (!prev_event_type.equalsIgnoreCase("DVR_EOE")) {
                        output = setOutput(output, prev_acc_id, prev_rec_id, prev_tuner, prev_channel,
                                prev_show_name, prev_tmsId, prev_viewing_type, prev_event_type, prev_channelFamily,
                                prev_ruid, prev_suid, prev_timeStarted, prev_timeEnded, prev_datecreated,
                                prev_content_start, prev_content_end, vod_time_watched, manual_ffx, manual_ffr);
                        ae.outputResult(output);
                    }
                    vod_time_watched = 0;
                    manual_ffr = 0;
                    manual_ffx = 0;
                    setPreviousValues();

                }
            if (event_type != null && content_start != 0 && content_end != 0) {
                // ******* total play time
                if (event_type.equalsIgnoreCase("DVR_PLAY") || event_type.equalsIgnoreCase("DVR_PAUSE")) {
                    vod_time_watched += (content_end - content_start);
                    // play_end = row.getCONTENT_END_EPOCH();
                }
                // ********* total ffx time
                if (event_type.contains("FWD_START") && !event_type.contains("SKIP")) {
                    manual_ffx += (content_end - content_start);
                }
                // ********** total ffr time
                if (event_type.contains("FWD_END") && !event_type.contains("SKIP")) {
                    manual_ffr += (content_end - content_start);
                }
            }

        }

    }
    return 0;
}

/**
 * 
 */
private static void setPreviousValues() {

    prev_acc_id = acc_id;
    prev_rec_id = rec_id;
    prev_tuner = tuner;
    prev_channel = channel;
    prev_show_name = show_name;
    prev_tmsId = tmsId;
    prev_viewing_type = viewing_type;
    prev_event_type = event_type;
    prev_channelFamily = channelFamily;
    prev_ruid = ruid;
    prev_suid = suid;
    prev_timeStarted = timeStarted;
    prev_timeEnded = timeEnded;
    prev_datecreated = datecreated;
    prev_content_start = content_start;
    prev_content_end = content_end;
}

/**
 * @param output
 * @param accId
 * @param recId
 * @param string
 * @param channel
 * @param showName
 * @param tmsId
 * @param eventName
 * @param eventType
 * @param channelFamily
 * @param ruid
 * @param suid
 * @param timeStarted
 * @param timeEnded
 * @param fieldAsTimestamp2
 * @param contentStart
 * @param contentEnd
 * @param duration
 * @param manualFfx
 * @param manualFfr
 */
private static NzaeRecord setOutput(NzaeRecord output, String accId, String recId, String string, String channel,
        String showName, String tmsId, String eventName, String eventType, String channelFamily, String ruid,
        int suid, double timeStarted, double timeEnded, Timestamp fieldAsTimestamp2, double contentStart,
        double contentEnd, double duration, double manualFfx, double manualFfr) {
    output.setField(0, accId);
    output.setField(1, recId);
    output.setField(2, string);
    output.setField(3, channel);
    output.setField(4, showName);
    output.setField(5, tmsId);
    output.setField(6, eventName);
    output.setField(7, eventType);
    output.setField(8, channelFamily);
    output.setField(9, ruid);
    output.setField(10, suid == 0 ? null : suid);
    output.setField(11, timeStarted == 0 ? null : timeStarted);
    output.setField(12, timeEnded == 0 ? null : timeEnded);
    output.setField(13, fieldAsTimestamp2);
    output.setField(14, contentStart == 0 ? null : contentStart);
    output.setField(15, contentEnd == 0 ? null : contentEnd);
    output.setField(16, duration);
    output.setField(17, manualFfx);
    output.setField(18, manualFfr);
    return output;

}

/**
 * @param meta
 */
private static void validateInput(NzaeMetadata meta) {
    if (meta.getOutputColumnCount() != 19) {
        throw new NzaeException("expecting  19 output columns ");
    }
    if (meta.getInputColumnCount() != 16) {
        throw new NzaeException("expecting 16 input columns");
    }
    if (meta.getInputNzType(0) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(0) != NzaeDataTypes.NZUDSUDX_VARIABLE) {
        throw new NzaeException("first input column (Account id hashed) expected to be a string type");
    }
    if (meta.getInputNzType(1) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(1) != NzaeDataTypes.NZUDSUDX_VARIABLE) {
        throw new NzaeException("second input column (Receiver id hashed) expected to be a string type");
    }
    if (meta.getInputNzType(2) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(2) != NzaeDataTypes.NZUDSUDX_VARIABLE) {
        throw new NzaeException("third input column (Tuner) expected to be a string type");
    }
    if (meta.getInputNzType(3) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(3) != NzaeDataTypes.NZUDSUDX_VARIABLE) {
        throw new NzaeException("fourth input column (Channel) expected to be a string type");
    }
    if (meta.getInputNzType(4) != NzaeDataTypes.NZUDSUDX_NATIONAL_FIXED
            && meta.getInputNzType(4) != NzaeDataTypes.NZUDSUDX_NATIONAL_VARIABLE) {
        throw new NzaeException("fifth input column (Show name) expected to be a string type");
    }

    if (meta.getInputNzType(5) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(5) != NzaeDataTypes.NZUDSUDX_VARIABLE) {
        throw new NzaeException("sixth input column (TMS_ID) expected to be a string type");
    }
    if (meta.getInputNzType(6) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(6) != NzaeDataTypes.NZUDSUDX_VARIABLE) {
        throw new NzaeException("seventh input column (Event Name) expected to be a string type");
    }
    if (meta.getInputNzType(7) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(7) != NzaeDataTypes.NZUDSUDX_VARIABLE) {
        throw new NzaeException("eighth input column (Event type) expected to be a string type");
    }
    if (meta.getInputNzType(8) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(8) != NzaeDataTypes.NZUDSUDX_VARIABLE) {
        throw new NzaeException("nineth input column (CHANNEL_FAMILY) expected to be a string type");
    }
    if (meta.getInputNzType(9) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(9) != NzaeDataTypes.NZUDSUDX_VARIABLE) {
        throw new NzaeException("thenth input column (RUID) expected to be a string type");
    }
    if (meta.getInputNzType(10) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(10) != NzaeDataTypes.NZUDSUDX_INT32) {
        throw new NzaeException("eleventh input column (SUID) expected to be a integer type");
    }
    if (meta.getInputNzType(11) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(11) != NzaeDataTypes.NZUDSUDX_INT64) {
        throw new NzaeException("twelfth input column (Start Epoch) expected to be a Big Integer type");
    }
    if (meta.getInputNzType(12) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(12) != NzaeDataTypes.NZUDSUDX_INT64) {
        throw new NzaeException("thirteenth  input column (End Epoch) expected to be a Big Integer type");
    }
    if (meta.getInputNzType(13) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(13) != NzaeDataTypes.NZUDSUDX_TIMESTAMP) {
        throw new NzaeException("fourteenth input column (Date created) expected to be a timestamp type");
    }
    if (meta.getInputNzType(14) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(14) != NzaeDataTypes.NZUDSUDX_INT64) {
        throw new NzaeException("fifteenth input column (Content start date) expected to be a Big Integer type");
    }
    if (meta.getInputNzType(15) != NzaeDataTypes.NZUDSUDX_FIXED
            && meta.getInputNzType(15) != NzaeDataTypes.NZUDSUDX_INT64) {
        throw new NzaeException("sixteenth input column (Content end date) expected to be a big Integer type");
    }
} 
```

}

# c++ - 使继承的成员静态

> ID：15707800
> 
> 赞同：1
> 
> 时间：2013-03-29T16:57:13.330
> 
> 标签：c++, inheritance, static-members

我必须公开课、`A`和`B`、和`B`继承成员。`A`

```
class A {
public:
    int a;
};

class B : A {
}; 
```

有没有办法让所有继承的成员都来自`A`static under `B`，或者创建它们`static`是`A`唯一的方法？

* * *

**上下文**：

我正在构建一个内存管理器，这个管理器将控制特定类的实例使用的内存。

我会有类似的东西：

```
template <class T>
class Memory {
public:
    operator new;
    operator delete;
private:
    memory_pool_for<T>;
};

class Data : Memory<Data> {
}; 
```

因此，当我必须做类似的事情时：

```
new Data;
delete Data; 
```

该操作将从中定义的函数调用，该函数`Memory`将分配/释放一些内存空间。

实例之间的分配/解除分配应该是静态的`Data`，我想确保`Data`由于继承自`Memory`. 这就是为什么我想到`static`'lize the继承。

我不确定这是否是做我正在做的事情的最佳方法，但这是迄今为止我能想到的最优雅的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:58:49.123

我会使用组合而不是继承：

```
class B { 
    static A a;
}; 
```

由于无论如何您都不会满足[LSP](http://en.wikipedia.org/wiki/Liskov_substitution_principle)与 B ，如果您想创建继承的成员`static`。

* * *

关于上下文，我只会在以下位置创建一个静态受保护的分配器`Memory`：

```
class Memory {
protected:
    static void* allocate();
    static void destroy (void*); 
```

`new`并在和运算符中使用它们`delete`：

```
public:
    void* operator new (size_t) { return allocate(); }
    void operator delete (void* mem) { return destroy(mem); }
} 
```

这样，当您从 继承时`Memory`，您可以使用它的静态分配器。

无论如何，我不确定这是否是一个好方法。它显然将您限制在一个内存池中（但这就是您想要的，不是吗？）。如果您希望*每种类型*`Memory`都有一个内存分配器实例，只需向CRTP添加一个模板标记并继承：

```
template<typename Tag> class Memory { ...

class Data : Memory<Data> {
}; 
```

不过，您可能想了解如何使用标准库容器分配器。与 stdlib 兼容总是一件好事。

# jquery - 在引导框架中同时href到模态和函数？

> ID：15707810
> 
> 赞同：0
> 
> 时间：2013-03-29T16:57:42.917
> 
> 标签：jquery, html, css, ajax, twitter-bootstrap

我在html中有这样的表格：

```
<form class="well span9 offset1" action="/summary/" method="post">
    {% csrf_token %}
        <fieldset>
        <label class="control-label" for ="inputIcon">Type or paste your text into box:</label>
        </fieldset>
        <div class="controls">
            <div class="input-prepend">
                <textarea rows="15" class="span9"></textarea> 

            </div>
            </div>

        <fieldset>
        <input type="checkbox" name="input_text" />
        Send me the copy of summary by e-mail.

        </fieldset><br />
        <a href="#summaryModal" data-toggle="modal"><button type="submit" class="btn btn-primary offset3">Summarize</button></a>
    <button type="reset" class="btn btn-danger">Reset</button>
</form> 
```

当用户提交表单时，我希望此表单在摘要函数中处理，并将结果以引导模式的模式返回给函数。但不是去功能它只是打开弹出（模式）。我从函数返回到这个相同的模板，结果。我怎样才能做到这一点？我需要阿贾克斯吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:07:38.753

由于您还没有提供 JavaScript 函数，因此我假设您已经准备好它们。是的，您必须使用 AJAX 才能工作。以下是您必须遵循的步骤：

1.  您的按钮的语法必须如下所示：`<button type="button" class="btn btn-primary offset3" onClick="summaryFunction()">Summarize</button>`

2.  单击按钮时，触发一个 JavaScript 函数（在这种情况下，我们称之为 summaryFunction()）。

3.  该函数必须将表单中的详细信息发布到以 JSON 格式返回数据的 PHP 页面。（[这可能会有所帮助](http://api.jquery.com/jQuery.post/ "jQuery 帖子")）

4.  使用 $('#divId').innerHTML 使用 PHP 页面返回的内容填充模式窗口的内容。

5.  使用 $('#divId').modal(); 触发模态窗口

希望能帮助到你。

下面是一个示例：让按钮使用上述语法触发一个名为 summaryFunction() 的 JavaScript 函数。JavaScript 函数如下所示：

```
<script>
function summaryFunction(){
$text = $('#textAreaId').val();
$.post("test.php", { "postedText": text },
function(data){
$('#modalInnerDiv').innerHTML = data.response;
$('#summaryModal').modal();
}, "json");
}
</script> 
```

确保为 textarea 元素提供 ID。将 test.php 替换为您的 PHP 文件。它必须查找名称为postedText 的发布值。将您的回复放入关键“回复”数组中。示例`$reply = array("response" => $response)`，然后使用 json_encode() 将其序列化为 JSON。您的 PHP 文件必须回显此 JSON 值。

在 ID 为 #modalInnerDiv 的模态框内有一个空 div。它的内容将填充来自 PHP 页面的回复，并将显示在模式窗口中。

# prolog - write_canonical() 和自然语言解释

> ID：15707815
> 
> 赞同：0
> 
> 时间：2013-03-29T16:57:50.713
> 
> 标签：prolog, declarative

> 实现以下两个运算符 has 和 of 以这样的方式使用短语：peter has car of john 回答以下问题：Who has What of X

我有这个简单的程序，它定义了两个运算符：**has**（指定**谁拥有什么**）和**of**（指定谁拥有什么）

这是在 Prolog 源文件中写入的解决方案：

```
:- op(100, xfy, of).
:- op(200, xfx, has).

peter has car of john.
peter has car of mary.

car of john of mary. 
```

正如我在与**write_canonical()**函数相关的官方 SWI Prolog 文档中所读到的那样：[http ://www.swi-prolog.org/pldoc/man?predicate=write_canonical%2F1](http://www.swi-prolog.org/pldoc/man?predicate=write_canonical%2F1)

> 使用标准括号前缀表示法（即忽略运算符声明）在当前输出流上写入 Term。引用需要引号的原子。

因此，如果我在 write_canonical() 函数中启动 Prolog 查询：

```
15 ?- write_canonical(peter has car of john).
has(peter,of(car,john))
true. 
```

我得到Prolog如何解释自然语言形式，对吗？

**在前面的例子中，首先评估句子： (car of john)**，然后评估句子：**peter has（先前评估的结果）**非常简单且清晰

 **有以下解释：**peter has (car of john)**

好的，这很清楚......现在我们来回答我的问题。

如果我做：

```
16 ?- write_canonical(peter has car of john of mary).
has(peter,of(car,of(john,mary)))
true. 
```

如何用自然语言解释它？（如果这在自然语言中有意义的话）

一开始，II 最初解释为汽车属于 john 和 mary 的展位......所以我尝试介绍上一个示例的事实 3 个事实，但如果在 Prolog shell 中我尝试执行：

```
10 ?- peter has car of john of mary.
false. 
```

这似乎是错误的。

自然语言的正确解释是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:01:15.433

在阅读您之前关于此问题的问题和 CapelliC 的回答时，我做了双重考虑。确实应该读一读，

“彼得有一辆属于约翰的汽车，*约翰*属于玛丽。”

您的解释应该是（使用`write_canonical`）类似：

```
has(peter, of(car, [john,marry])) 
```

或者可能

```
has(peter, of(car, john)), has(peter, of(car, marry)) 
```

取决于你想如何实现它，而且，如果它实际上是同一辆车（这在你的例子中并不完全清楚）。

“Peter has car of John of Mary”当然不是传统的英语。**

# string - sqlite 字符串定位

> ID：15707819
> 
> 赞同：0
> 
> 时间：2013-03-29T16:58:02.713
> 
> 标签：string, sqlite, locate

SQLite 中获取包含给定字符串的所有值的语法是什么？

我试过： SELECT columnName FROM tableName WHERE LOCATE(string,columnName)!=0; 但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:59:51.730

```
SELECT columnName FROM tableName WHERE columnname LIKE '%string%' 
```

# css - @font-face IE9 字体粗细不起作用

> ID：15707827
> 
> 赞同：0
> 
> 时间：2013-03-29T16:58:47.197
> 
> 标签：css, internet-explorer-9, font-face

我曾尝试使用 css @font-face 嵌入字体。我想用它作为粗体字体。但 IE 9 不显示粗体字体。

**CSS**

```
@font-face {
    font-family: Dauphin;
    src: url('dauphin.woff'),
         url('dauphin.ttf'),
         url('dauphin.eot'),
         url('dauphin.svg')
     ; /* IE9 */
     font-weight: normal;
}
.p {
     font-family: Dauphin;
     font-weight: 900;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T17:27:22.777

IE 不支持使用与规则`font-weight`中指定的不同的值`@font-face`。

**每个字体变体的一组字体文件**

通常，嵌入的字体文件包含只有一种粗细和一种样式的字体版本。当需要多个字体变体时，为每个字体变体使用一组不同的嵌入字体文件。在下面的示例中，仅使用`.woff`格式，以简化事情。在实践中，`.eot`通常也会使用 、 和`.ttf`。`.svg`

```
@font-face {
    font-family: 'myFont';
    src: url('myFont.woff');
    font-weight: normal;
}
@font-face {
    font-family: 'myFont';
    src: url('myFontBold.woff');
    font-weight: bold;
}
...
p {
    font-family: myFont;
    font-weight: normal;
}
h2 {
    font-family: myFont;
    font-weight: bold;
} 
```

**支持IE8**

但是，当超过 1 个粗细或超过 4 个粗细或样式与字体系列相关联时，IE8 会出现显示问题。要支持 IE8，请为每个字体变体使用不同的字体系列。

```
@font-face {
    font-family: 'myFont';
    src: url('myFont.woff');
}
@font-face {
    font-family: 'myFont-bold';
    src: url('myFontBold.woff');
}
...
p {
    font-family: myFont;
}
h2 {
    font-family: myFont-bold;
} 
```

**最大跨浏览器支持**

为了获得最佳的跨浏览器支持，请使用以下语法：

```
@font-face {
    font-family: 'myFont';
    src: url('myFont.eot');
    src: url('myFont.eot?#iefix')
             format('embedded-opentype'),
         url('myFont.woff') format('woff'),
         url('myFont.ttf') format('truetype'),
         url('myFont.svg#svgFontName') format('svg');
}
@font-face {
    font-family: 'myFont-bold';
    src: url('myFontBold.eot');
    src: url('myFontBold.eot?#iefix')
             format('embedded-opentype'),
         url('myFontBold.woff') format('woff'),
         url('myFontBold.ttf') format('truetype'),
         url('myFontBold.svg#svgFontName') format('svg');
}
...
p {
    font-family: myFont;
}
h2 {
    font-family: myFont-bold;
} 
```

# cocos2d-iphone - 检索 [[CCDirector sharedDirector] winSize] 的宏；

> ID：15707831
> 
> 赞同：0
> 
> 时间：2013-03-29T16:58:54.563
> 
> 标签：cocos2d-iphone

我发现自己经常调用`[[CCDirector sharedDirector] winSize]`，以至于我真的很想按照 winSize() 的方式制作一个宏。哪里可能是把它塞进 Cocos2D 库的好地方？最初我认为 Support>CGPointExtension.h 可能工作，但在那个位置 ccdirector 没有定义。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:45:24.250

这个怎么样？

```
#define WINSIZE [[CCDirector sharedDirector] winSize]; 
```

Personally I wouldn't use a macro for this, a better alternative is to add an ivar or static var to the class where you need winSize frequently.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:07:42.873

我通常将这些定义放在每个项目的 .m/.h 中。例如，在 .h

```
extern float  kScreenWidth;                  // design width of the app (in points)
extern float  kScreenHeight;                 // design height of the app (in points)
extern CGSize kBattleMidPoint;
extern float  kLongTouch;
extern float  kTileWidth;
extern float  kTileHeight; 
```

在他们中

```
float  kScreenWidth  = 480.0;
float  kScreenHeight = 320.0;
CGSize kBattleMidPoint;
float  kLongTouch    = .65f;
float  kTileWidth    = 40.;
float  kTileHeight   = 40.; 
```

并且还在 .m 设置器中的某个位置覆盖上述默认值。在 CCDirector 初始化之后，我调用它们一次。

```
+ (void)setScreenWidth:(float)screenWidth {

    kScreenWidth = screenWidth;
    if (screenWidth >= 568.0) {
        kDeviceType = deviceTypeIpodTall;
    }
}

+ (void)setScreenHeight:(float)screenHeight {

    kScreenHeight = screenHeight;
}   

+ (void)setBattleMidPoint:(CGSize)midPoint {

    kBattleMidPoint = midPoint;
}

+ (void)setTileWidth:(float)tileWidth {

    kTileWidth = tileWidth;
}

+ (void)setTileHeight:(float)tileHeight {

    kTileHeight = tileHeight;
} 
```

最后，我将 .h 包含在我的预编译头文件中。我倾向于避免（不惜一切代价）修改/扩展 cocos2d 代码库，保留以最少的工作量进行更新的权利:)。

# php - PHP 获取文件描述符

> ID：15707832
> 
> 赞同：1
> 
> 时间：2013-03-29T16:58:59.883
> 
> 标签：php, networking

我正在寻找获取 fopen、stream_socket_server、socket_listen 等中使用的文件描述符。我花了几个小时很累才找到这个，但似乎找不到。这样做的原因是我可以将其传递给其他进程来处理工作。

编辑：我正在用 php 制作一个简单的 http 服务器，但预先分叉了 php 进程。这个想法是，如果主进程接受连接并且通过 unix 套接字向不同的进程提供文件描述符，那么它可以完成读取数据甚至进程并响应从主进程中移除瓶颈。目前，主进程必须通过子进程的unix套接字读取发送中的数据，然后写回unix套接字，然后主进程将其发回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-23T14:37:50.163

文件描述符特定于一个进程，因此您不能只是将它们传递给另一个进程并从那里访问它们。如果你 fork 一个进程，你可以访问两个进程在 fork 之前打开的每个文件，但是你以后打开的任何文件只对分配了描述符的进程有效。因此，即使您设法获得它，它也不会解决您的问题。

# winforms - XtraGrid 绑定到实体框架 - 如何将数据发送回数据库？

> ID：15707833
> 
> 赞同：0
> 
> 时间：2013-03-29T16:58:59.717
> 
> 标签：winforms, linq-to-entities, devexpress, xtragrid, inplace-editing

1) 我有 2 个表 IncludedProducts {ID} 和 Products {ID, Name, Code}

2）在 xtraGrid 控件中，我想显示在 IncludedProducts 表中具有其 ID 的产品列表，可以在用户按下后使用就地 GridLookUpEdit 编辑器添加新产品并将数据推送回数据库（将更改存储到 IncludedProducts 表）按钮“保存”

## 例如

### 产品表

```
|ID|Name  |Code|
|1 |Lemon |L01 |
|2 |Apple |A01 |
|3 |Cheese|C01 |
|4 |Bread |B01 | 
```

### 包含产品表

```
|ID|
|3 | 
```

### 在我需要的应用程序中

1) XtraGrid 控件显示

```
|Name  |Code|
|Cheese|C01 | 
```

2) 当我开始在 XtraGrid 的每个列中输入时，它应该显示下拉网格。当我从下拉网格中选择项目时，它应该填充 BOTH(!) 列（为了实现这一点，我必须为 Name 和 Code 列设置 ValueMember=ID）

3) when I press "Save" button it should update data to IncludedProducts table (contains only ID column)

### The part I do not understand

In order to show Code and Name values in XtraGrid control, I have to set DataSource that contains ID, Name and Code (for in-place editor's repositoryItem's DisplayMember) columns (that would be a join of Products and IncludedProducts table), right? But when I want to save data to database I want it to be written to IncludedProducts table - that is storing only ID column.

How can I do this?

P.S. I want to achieve this using Entity Framework model, not DataSets, can you please provide me with some quidance?

This is what I've got working this far (only loading data from db, setting in-place editors, but no luck sending data back to database) [problems setting XtraGrid with in-place editor-s (using GridLookUpEdit)](https://stackoverflow.com/questions/15440436/problems-setting-xtragrid-with-in-place-editor-s-using-gridlookupedit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:14:35.377

The problem was, that i acctually had additional column in IncludedProducts table, when I added it to the xtraGrid, and provided it with a valid value, the update to IncludedProducts table was successful

# jquery - 从 style 属性获取 font-size 属性

> ID：15707836
> 
> 赞同：1
> 
> 时间：2013-03-29T16:59:01.327
> 
> 标签：jquery, font-size

我有一组段落元素

```
<p style="font-family:Tahoma; font-size:10.666666666666666; margin:0 0 0 0;">
<p style="font-family:Tahoma; font-size:10.666666666666666; margin:0 0 0 0;">
<p style="font-family:Tahoma; font-size:10.666666666666666; margin:0 0 0 0;">
<p style="font-family:Tahoma; font-size:10.666666666666666; margin:0 0 0 0;"> 
```

我必须`px`在字体大小程度之后写。我无法使用我当前的代码

```
loop
$(this).css("font-size") 
```

我不能使用它，因为它显示了父级的字体大小`div`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:56:54.150

有两种明显的方法，第一种是查看`style`属性，搜索字符串后面的数字，`font-size:`然后用它自己替换那个字符串，尽管添加`px`了它：

```
$('p').attr('style',function(i,s){
    return s.replace(/font-size:\s*(\d+.{0,1}\d*)/, function(a){
        return a + 'px';
    });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Wu8dj/2/)。

第二种选择几乎相同，尽管它直接使用内联`css()`方法`font-size`通过查找字符串`font-size:`和以下数字来`font-size:`设置`font-size`：

```
$('p').css('font-size',function(){
    var s = $(this).attr('style').match(/(?:font-size:)s*(\d+.{0,1}\d*)/)[0].replace(/font-size:/,'');
    return s + 'px';
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Wu8dj/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:04:52.910

这将读取当前值，将“px”附加到它，然后重新分配它。

```
$(parent).children('p').each(function(){
    $(this).css("font-size", $(this).css("font-size") + "px");
}); 
```

# c# - 随机化列表 C# 中的字符串时出错

> ID：15707838
> 
> 赞同：0
> 
> 时间：2013-03-29T16:59:06.503
> 
> 标签：c#, list, random

我想创建一个程序，当我单击按钮时，它会在消息框中显示一个随机类别（来自我创建的类别列表）和正确的单词。

当我运行它时，类别是随机的，但是应该与类别一起使用的正确单词没有正确放置。 [错误图像](http://i717.photobucket.com/albums/ww176/T3ZTAM3NT/2ndSSonError_zps1a838970.jpg)

另外，我知道一旦程序达到某个类别的负索引或显示所有类别时，程序将 [崩溃](http://i717.photobucket.com/albums/ww176/T3ZTAM3NT/3rdSSonError_zps5212cfe5.jpg)

但我无法弄清楚要使用什么逻辑，以便一旦达到负值它就会自动停止删除索引。

代码：

```
namespace randomCategory
{
public partial class Form1 : Form
{

    Random rand = new Random();
    List<string> categories = new List<string> { "Book Titles", "Movie Titles", "Car Parts", "Human Body Parts", "Transportations" };

    public Form1()
    {
        InitializeComponent();
        listBox1.DataSource = categories;
    }

    public void selection()
    {
        // logic for setting a random category
        int index = rand.Next(categories.Count);
        var category = categories[index];

        // logic for assigning the word for a category
        switch (index)
        {
            case 0:
                MessageBox.Show(category, "Harry Potter");
                break;
            case 1:
                MessageBox.Show(category, "Summer Wars");
                break;
            case 2:
                MessageBox.Show(category, "Bumper");
                break;
            case 3:
                MessageBox.Show(category, "Eyes");
                break;
            case 4:
                MessageBox.Show(category, "Boat");
                break;
            default:
                MessageBox.Show("Empty!", "!!!");
                break;
        }

        categories.RemoveAt(index);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        selection();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:04:33.610

您必须设置列表框选择以反映您选择的随机索引。

此外，如果列表中没有项目，则不应执行此操作。因此，将此代码添加到您的方法中：

```
if (categories.Count == 0)
    return; 
```

问题可能是，当您从`categories`列表中删除一个项目时，索引号不再与您的`switch`语句匹配。例如，您的`categories`开始是：

```
{ "Book Titles", "Movie Titles", "Car Parts", "Human Body Parts", "Transportations" }; 
```

如果您从列表中选择任何项目，它将在您的开关中匹配。例如，如果您随机选择 1，那么您的程序将显示“Summer Wars”：电影名称。

但是随后您从列表中删除了该项目。您的列表现在如下所示：

```
{ "Book Titles", "Car Parts", "Human Body Parts", "Transportations" }; 
```

因此，您随机选择 2，即“人体部位”，因为您从列表中删除了一个项目。

解决此问题的一种方法是创建另一个列表，称为`unusedCategories`. 像这样初始化它：

```
List<int> unusedCategories = new List<int> { 0, 1, 2, 3, 4 }; 
```

现在，您从该列表中选择一个项目：

```
int selectedIndex = rand.Next(unusedCategories.Count);
int index = unusedCategories[selectedIndex];
// at this point, index is the index to one of the items in your `categories` list

switch (index)
{
    ....
}

unusedCategories.RemoveAt(selectedIndex); 
```

And, of course, you'll change the `if` statement to:

```
if (unusedCategories.Count == 0)
    return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:41:08.807

If you want to convert your existing List of `string` to a `Dictionary<T,T>` one line of code can do it for you

```
var categories = new List<string> 
{ 
  "Book Titles",
  "Movie Titles",
  "Car Parts",
  "Human Body Parts",
  "Transportations" 
 };
var catDict = categories.ToDictionary(c => c); 
```

# .net - 使用 Unity 解析各种类型的特定构造函数参数

> ID：15707841
> 
> 赞同：2
> 
> 时间：2013-03-29T16:59:20.443
> 
> 标签：.net, unity-container

假设我有以下课程。

```
public class Service1
{
   public Service1(Dependency1 dependency1, Dependency2 dependency2, string myAppSetting)
   {
   }
}

public class Service2
{
   public Service2(DependencyA dependency1, ..., DependencyD dependency4, string myAppSetting)
   {
   }
} 
```

Unity容器用于通过依赖注入填充构造函数参数；container.Resolve(..) 方法永远不会被直接调用。

上述类具有各种参数，但最后一个参数`string myAppSetting`始终相同。有没有办法将 Unity 容器配置为始终将具有特定原始类型和名称的参数解析为不同类中的特定值？

我知道你可以为每一种对我来说似乎很脆弱的类型注册注入构造函数。另一种方法可能是将字符串参数包装在自定义类中。但我想知道是否有办法处理特定的原始类型构造函数参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:21:39.350

我制作了一个界面来包装我的`AppSettings`. 这允许我将应用程序设置注入我的类型。

**应用程序设置**

```
public interface IAppSettings {
    string MySetting { get; set; }
    ...
} 
```

**统一配置**

```
container.RegisterInstance<IAppSettings>(AppSettings.Current);
container.RegisterType<IService1, Service1>();
container.RegisterType<IService2, Service2>(); 
```

**服务1**

```
public class Service1
{
    public Service1(Dependency1 dependency1, Dependency2 dependency2, IAppSettings appSettings)
    {
        var mySetting = appSettings.MySetting;
    }
} 
```

以下是原始参数的一些选项：[使用原始参数构造函数注册类型？](https://stackoverflow.com/questions/6010088/register-a-type-with-primitive-arguments-constructor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:14:26.313

我认为您无法让 Unity 为任何类解析*所有* `string`名为“myAppSettings”的参数。但是，您可以让它按名称解析特定类的参数。就像是：

```
Container.RegisterType<Service2, Service2>(
            new InjectionConstructor(
                    new ResolvedParameter<string>(), 
                        "myAppSetting")); 
```

# c++ - C ++ OOP哪种方式更好地为构造函数赋值

> ID：15707850
> 
> 赞同：-1
> 
> 时间：2013-03-29T16:59:54.467
> 
> 标签：c++, oop, class

我目前正在学习 C++，并且在理解如何为构造函数赋值时遇到了一些问题。让我的锻炼发挥作用，但不确定哪种方式最聪明/最好。方式nr。1

```
class Vector2d{

public:
Vector2d(double x, double y):x(x),
y(y)
{

} 
```

和方式 nr.2

```
class Vector2d{

public:
void set_values (double,double);
Vector2d()
{

}

void Vector2d::set_values (double a, double b) {
  x = a;
  y = b;
} 
```

通过阅读一些教程找到了两种方式，两种方式都有效。我想第一个效率更高，因为我不必写一个新的 void，但我不确定是什么

```
:x(x),
y(y) 
```

正在做/意义。

提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:02:59.420

在 C++ 中通过说

```
:x(x),
y(y) 
```

您将在编译时实际保存指令。当为类腾出空间时，编译器实际上会直接内联初始化这些变量。

所以我会说这种方式更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T17:02:31.207

> 我不完全确定 [code...] 正在做什么/意味着什么。

他们正在初始化您的成员变量。

这可能会令人困惑，因为您的构造函数参数被赋予了相同的名称。考虑这个等价物：

```
Vector2d(double x_param, double y_param)
  : x(x_param)  // initialize member variable "x"
  , y(y_param)  // initialize member variable "y"
{

} 
```

你的类同时拥有**这个**构造`set_values`函数和在构造后更改值的函数是合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:04:34.543

使用#1，您正在指示程序通过调用其构造函数来初始化 x,y

使用＃2，您正在调用 operator= 以通过以下方式覆盖 x,y 的值：通过调用两个构造函数获得的值： x.operator=(double(right_value))

没有太大区别，因为所涉及的类型是“双”，我猜对于一些复杂的类会有很大的不同

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T17:09:44.983

第一种方法是调用构造函数来初始化成员；第二种方法是调用成员函数通过赋值来改变成员变量的值，因为你只定义了默认构造函数，最初成员用默认值初始化，然后如果你调用`set_values`函数，它们会在函数体内重新赋值。在当前示例中，它们将具有相同的效果。但通常最好在构造函数的初始化列表中初始化成员变量。你的第二种方式看起来像一个`setter`函数。您不能使用第二种方法来初始化类成员变量，因为它不是静态的。

如果您正在构造一个对象，最好使用第一种方式。使用初始化列表，成员只被创建和初始化一次，具有给定的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T17:12:13.257

创建带有参数的构造函数来初始化类的成员属性（您的第一个解决方案），它不同于默认构造函数（没有参数 - 您的第二个解决方案中的构造函数）。

在您的第二个解决方案中，您正在使用一个 setter（一个成员函数来设置成员属性的值），我们可以在需要设置值的任何时候调用它，但是使用带有参数的构造函数（第一个解决方案），我们只能设置值当我们第一次为该类创建一个对象时。

例如;

当我们创建对象时；

```
Vector2d vec2d(2.3, 4.5); 
```

它会将 x 和 y 的值分别设置为 2.3 和 4.5，但是如果我们需要在程序中再次设置这些值，我们该怎么办？然后我们将使用 setter 函数，例如；

```
vec2d.set_values(5.0, 7.8); 
```

所以简而言之，我们只根据我们的场景使用我们需要的东西。如果我们不想再次设置值，那么带参数的构造函数（您的第一个解决方案）是最好的。

我们执行以下操作

```
:x(x),
y(y) 
```

将通过构造函数中的参数传入的 x 和 y 的值分配给类成员 x 和 y。它是一样的；

```
class Vector2d{

public:
  Vector2d(double x, double y)
  {
    //"this" pointer is used to differentiate the variables
    this->x = x;
    this->y = y;
  }
} 
```

或者为了简单起见，如果您还不了解`this`指针，我建议您使用不同的名称；

```
class Vector2d{

public:
  Vector2d(double a, double b)
  {
    x = a;
    y = b;
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T17:03:54.157

如果您将使用单独的函数来初始化您的对象，而不是在构造函数调用和初始化之间，您的对象将处于未初始化状态。

你需要它的唯一情况——当你真正知道你在做什么的时候。

而且在构造函数中初始化也更快。当你写

```
my_class()
: field_(value)
{
} 
```

您的字段通过复制`value`到其中进行初始化。在其他情况下，它在复制时初始化，这是开销。

# php - 如何获取mysql数据库表中提交的表单数据

> ID：15707851
> 
> 赞同：-1
> 
> 时间：2013-03-29T16:59:58.140
> 
> 标签：php, mysql, phpmyadmin

我编写了以下这段代码，如果 pswd = 重新键入 pswd 并稍后将以下值插入表中（不是），它必须回显“注册成功”。它只是简单地回显注册成功，但这些值并未插入到 TABLE 中。我很确定我在我的 PHP 代码中连接到数据库失败，请更正我的代码！我的代码如下：

```
<?php

session_start();
include('header.php');

$mysql_host = 'localhost';
$mysql_user = 'root';
$mysql_pass = '1234';

$mysql_db = "my_db";

if (!mysql_connect($mysql_host, $mysql_user, $mysql_pass) || !mysql_select_db($mysql_db))
 {
die(mysql_error());
}

if( isset( $_REQUEST['namevar'] ) ){

$nmvar = $_REQUEST['namevar'];
$email = $_REQUEST['name1'];
$psvar = $_REQUEST['p1'];
$cpsvar = $_REQUEST['p2'];
$gender = $_REQUEST['r1'];
$clvar = $_REQUEST['t2'];
$plvar = $_REQUEST['t1'];

if($psvar == $cpsvar)
{
$sql = "INSERT INTO `users` (name,email,password,confirm password,gender,college,place) 
VALUES ('$nmvar','$email','$psvar','$cpsvar','$gender','$clvar','$plvar')";
mysql_query($sql);
echo "Signup successful";
}
else
{
echo "Password Mismatch";
}   
}
?>
<form action="" method="post">
Name:
<input type="text" name="namevar" /><br/>
E-mail:
<input type="text" name="name1" /><br/>
Password:
<input type="password" name="p1" /><br/>
Confirm Password:
<input type="password" name="p2" /><br/>
Gender:
<input type="radio" name="r1" />
Male
<input type="radio" name="r1" />
Female
<br/>
Location:
<input type="text" name="t1" /><br/>
College:
<input type="text" name="t2" /><br/>
<input type="submit" value="submit" /><br/>
<input type="reset" value="reset" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:11:20.003

在将数据提交到数据库之前，您应该对数据使用 mysql_real_escape_string() 函数。否则，您的代码将面临 SQL 注入的风险。

# asp.net - 无法弄清楚如何使用 SQL 数据源 ASP.Net 将输出的参数存储到变量中

> ID：15707858
> 
> 赞同：0
> 
> 时间：2013-03-29T17:00:39.900
> 
> 标签：asp.net, sql-server, session-state

我正在开发一个应用程序，它需要我找到登录用户的用户名，查询用户名 = 活动用户的员工表，然后返回 EmployeeID、TeamID 和 PositionID 以设置会话状态变量以创建不同的视图基于每个用户。

我创建了这个存储过程来输出所需的参数。

```
CREATE PROCEDURE ASP_UserSession @Username nvarchar(256), @UserID int OUTPUT, @TeamID int OUTPUT, @PositionID int OUTPUT

AS

SELECT @UserID = ID, @TeamID = TeamID, @PositionID = PositionID
FROM Employee
WHERE UserName = @Username 
```

现在我遇到的问题是将输出的参数存储到文件后面的代码中，以便在会话状态中设置参数。

我准备把我所有的头发都拔掉了！请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:07:38.373

该类`DbParameter`有一个`Direction`属性，您可以为其设置一个值`ParameterDirection.Output`

执行存储过程后，从命令对象的参数集合中获取参数对象，并获取其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:56:41.847

我能够用这段代码解决我的问题：

```
MembershipUser user = Membership.GetUser();
    string activeuser = user.UserName;

    using (System.Data.SqlClient.SqlConnection sc1 =
             new System.Data.SqlClient.SqlConnection(@"Data Source=DRIFT\GANDALF;Initial Catalog=Wizard_Swears;" +
                 "Integrated Security=True"))
    {
        sc1.Open();
        using (System.Data.SqlClient.SqlCommand command1 = new System.Data.SqlClient.SqlCommand())
        {
            command1.CommandType = CommandType.Text;
            command1.Connection = sc1;

            // DIRECTION :: Input
            command1.CommandText = "select @UserID = [ID], @TeamID = [TeamID], @PositionID = [PositionID] FROM [Employee] WHERE ([UserName] = @UserName)";
            System.Data.SqlClient.SqlParameter paramter1 = command1.Parameters.Add("@UserName", activeuser);
            System.Data.SqlClient.SqlParameter paramter2 = command1.Parameters.Add("@UserID", SqlDbType.SmallInt);
            System.Data.SqlClient.SqlParameter paramter3 = command1.Parameters.Add("@TeamID", SqlDbType.SmallInt);
            System.Data.SqlClient.SqlParameter paramter4 = command1.Parameters.Add("@PositionID", SqlDbType.SmallInt);
            paramter1.Direction = ParameterDirection.Input;
            paramter2.Direction = ParameterDirection.Output;
            paramter3.Direction = ParameterDirection.Output;
            paramter4.Direction = ParameterDirection.Output;
            command1.ExecuteNonQuery();

            //Store values to variables to be set to session
            string userID = paramter2.Value.ToString();
            string teamID = paramter3.Value.ToString();
            string positionID = paramter4.Value.ToString();

            UserIDLBL.Text = userID;
            TeamIDLBL.Text = teamID;
            PositionIDLBL.Text = positionID;

            Session["Username"] = activeuser;
            Session["UserID"] = UserIDLBL.Text;
            Session["AMID"] = TeamIDLBL.Text;
            Session["PositionID"] = PositionIDLBL.Text; 
```

# c# - 在 C# 中加载 C++ DLL

> ID：15707859
> 
> 赞同：6
> 
> 时间：2013-03-29T17:00:42.607
> 
> 标签：c#, c++

我正在尝试使用用 C++ 编写的 DLL，但我的应用程序是用 C# 编写的

DLL 来自另一家公司，但他们为他们的软件提供了 SDK。

他们给出了一个如何在 C++ 中加载他们的 DLL 的示例，但我需要将其调整为 C#。

以下是他们如何在 C++ 中执行此操作的说明

MarkEzd.dll 文件是动态链接库。

MarkEzdDll.h 是 MarkEzd.dll 中导出函数的头文件

MarkEzd.dll 的调用方式是显式链接。开发者需要通过调用 Windows API 函数来加载和释放 MarkEzd.dll。

步骤如下。

1.  调用Windows的API函数LoadLibrary()动态加载DLL；

2.  调用Windows的API函数GetProcAddrress()获取DLL中函数的指针，并利用函数指针完成工作；

3.  不使用 DLL 或程序结束时，调用 Windows 的 API 函数 FreeLibrary() 释放库。

以下是他们提供的示例。

步骤 2\. 调用 markezd.dll 的程序软件。a) 第一步：动态加载 MarkEzd.dll

```
HINSTANCE hEzdDLL = LoadLibrary(_T("MarkEzd.dll")); 
```

b) 第二步：获取要调用的函数的指针

```
lmc1_Initial=(LMC1_INITIAL)GetProcAddress(hEzdDLL, _T("lmc1_Initial"));
lmc1_Close=(LMC1_CLOSE)GetProcAddress(hEzdDLL, _T("lmc1_Close"));
lmc1_LoadEzdFile=(LMC1_LOADEZDFILE)GetProcAddress(hEzdDLL,_T("lmc1_LoadEzdFile"));  
lmc1_Mark=(LMC1_MARK)GetProcAddress(hEzdDLL,_T("lmc1_Mark")); 
```

c) 第三步：调用函数

1） 初始化lmc1板： `lmc1_Initial()`.
2） 打开test.ezd: `lmc1_LoadEzdFile(_T(“test.ezd”))`.
3） 调用lmc1_Mark()进行加工：`lmc1_Mark()`.
4） 关闭lmc1板：`lmc1_Close()`.

d) 第四步，释放markezd.dll：`FreeLibrary(hEzdDLL)`

下面是命令的描述。

lmc1_Initial
INTENTION：初始化lmc1控制板
定义：`int lmc1_Initial(TCHAR* strEzCadPath, BOOL bTestMode, HWND hOwenWnd)`
strEzCadPath：ezcad2.exe所在的完整路径
bTestMode 是否处于测试模式
hOwenWnd：有焦点的窗口。它用于检查用户的停止消息。说明：您必须先调用 lmc1¬_Initial，然后再调用程序中的其他函数。
返回值：常见错误码

lmc1_Close 意图
：关闭 lmc1 板
定义：`int lmc1_Close();`
描述：退出程序时必须调用 lmc1_Close 来关闭 lmc1 板。
返回值：常见错误码

lmc1_LoadEzdFile 意图
：打开指定的ezd文件，清除数据库中的所有对象。
定义：`int lmc1_LoadEzdFile(TCHAR* strFileName);`
描述：此函数可以打开一个由用户构建的ezd文件作为模板。用户无需设置工艺参数，因为它们将从模板文件中加载。
返回值：常见错误码

lmc1_Mark
INTENTION: 标记数据库中的所有数据
定义: `int lmc1_Mark(BOOL bFlyMark);`
bFlyMark= TRUE // mark on fly
说明: 使用 lmc1_LoadEzdFile 加载 ezd 文件后调用此函数开始标记。该函数在标记完成之前不会返回。
返回值：常见错误码

他们还解释了如何设置 VS6.0

1.  安装visual studio时选择“Microsoft Visual C++ 6.0”，点击“Change Option”。
2.  选择“VC++ MFC 和模板库”并单击“更改选项”。
3.  选择“MS Foundation Class Libraries”并单击“更改选项”。
4.  选择如下图选项，点击“确定”。
5.  打开项目，选择菜单项目->设置。选择“C/C++”，在“预处理器定义”中添加“UNICODE”并删除“MCBS”</li>
6.  选择“Link”，在Category中选择“Output”，在“Entry-point symbol”中添加“wWinMainCRTStartup”</li>
7.  将源代码中的所有“char”更改为“TCHAR”。
8.  将双引号“…”包含的所有字符串更改为_T(“…”)
9.  再次编译并链接项目。

大多数函数返回一个整数代码 0 表示成功。

这是正确的吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace Start_Mark
{
    public partial class Form1 : Form
    {
        [DllImport("kernel32.dll")]
        public static extern IntPtr LoadLibrary(string dllToLoad);

        [DllImport("kernel32.dll")]
        public static extern IntPtr GetProcAddress(IntPtr hModule, string procedureName);

        [DllImport("kernel32.dll")]
        public static extern bool FreeLibrary(IntPtr hModule);

        [DllImport("MarkEzd.dll")]
        [return: MarshalAs(UnmanagedType.I2)]
        public static extern int lmc1_Initial(string strEzCadPath, bool bTestMode, IntPtr hOwenWnd);

        [DllImport("MarkEzd.dll")]
        [return: MarshalAs(UnmanagedType.I2)]
        public static extern int lmc1_Close();

        [DllImport("MarkEzd.dll")]
        [return: MarshalAs(UnmanagedType.I2)]
        public static extern int lmc1_LoadEzdFile(string strFileName);

        [DllImport("MarkEzd.dll")]
        [return: MarshalAs(UnmanagedType.I2)]
        public static extern int lmc1_Mark(bool bFlyMark);

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            IntPtr hEzdDLL = LoadLibrary("MarkEzd.dll");
            IntPtr iplmc1_Initial = GetProcAddress(hEzdDLL, "lmc1_Initial");
            IntPtr iplmc1_Close = GetProcAddress(hEzdDLL, "lmc1_Close");
            IntPtr iplmc1_LoadEzdFile = GetProcAddress(hEzdDLL, "lmc1_LoadEzdFile");
            IntPtr iplmc1_Mark = GetProcAddress(hEzdDLL, "lmc1_Mark");
            int intlmc1_Initial=lmc1_Initial("c:\temp", false, hEzdDLL);
            if (intlmc1_Initial > 0)
            {
                return;
            }
            int intlmc1_LoadEzdFile = lmc1_LoadEzdFile("c:\temp\test.ezd");
            if (intlmc1_LoadEzdFile > 0)
            {
                return;
            }
            int intlmc1_Mark = lmc1_Mark(true);
            if (intlmc1_Mark > 0)
            {
                return;
            }
            int intlmc1_Close = lmc1_Close();
            if (intlmc1_Close > 0)
            {
                return;
            }
            FreeLibrary(hEzdDLL);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-07T15:09:29.500

正确的语法如下。

```
using System;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace Company.Group
{
    public class FuncList
    {
        [DllImport("MarkEzd.dll", EntryPoint = "lmc1_Initial2", CharSet = CharSet.Unicode, CallingConvention = CallingConvention.StdCall)]
        public static extern int Initialize(string PathName, bool TestMode);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T17:07:46.087

使用 P-Invoke 调用本机 DLL。您可能必须编组一些数据类型才能使其工作。

[http://msdn.microsoft.com/en-us/library/aa288468.aspx](http://msdn.microsoft.com/en-us/library/aa288468.aspx)

# c++ - 将 directX 项目编译为 .exe 的问题

> ID：15707863
> 
> 赞同：0
> 
> 时间：2013-03-29T17:00:57.243
> 
> 标签：c++, directx

将我的 directX 着色器项目编译为可执行文件时遇到一些实际问题。我已经完成了我通常做的所有事情，链接了所有需要的库，将所需的资产放在发布文件夹中，但 .exe 仍然在运行时崩溃。

![在此处输入图像描述](../Images/67b419212dc8e6ac4b716b30a3f600e4.png)

我已经厌倦了我能想到的一切，这让我发疯了，因为我之前编写了一个 directX 项目，这并不难！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:18:13.713

看来您的问题不是编译问题，而是运行时问题。

如果没有看到您的代码，就无法确定问题所在。但我会使用 DirectX Sample 作为基础，然后从那里继续前进。

# objective-c - 在 EOWL（单词列表）中搜索单词的存在

> ID：15707865
> 
> 赞同：0
> 
> 时间：2013-03-29T17:01:07.263
> 
> 标签：objective-c, text-files

我正在努力通过在[EOWL](http://dreamsteep.com/projects/the-english-open-word-list.html)中搜索它的存在来验证一个单词是否存在。我在 GitHub 上找到了[CDWordList](https://github.com/cncool/CDWordList)，但是因为我使用的是 ARC，所以这不起作用。（除非它可以以某种方式转换？）我正在寻找一种简单的方法来搜索换行符分隔的 .txt 文件中是否存在单词。

注意：EOWL 按字母分隔成文件，因此最大的文件（S 字）包含约 16,000 个字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:22:08.003

让你的字符串

```
NSString *string=[self readFromFile]; 
```

然后使用

```
NSArray *brokenWithLines=[string componentsSeparatedByString:@"\n"]; 
```

# matlab - MATLAB：以下拼接上的 2-Band Blending

> ID：15707867
> 
> 赞同：2
> 
> 时间：2013-03-29T17:01:16.193
> 
> 标签：matlab, computer-vision, blending, image-stitching, color-blending

假设我有两张图像并将它们拼接在一起。现在，我们如何使用 2-Band Blending 呢？或者其他简单的混合方法，我的时间有限。任何帮助，将不胜感激。

![在此处输入图像描述](../Images/6265c6ef633e4df155ee05e9bd884f6f.png)

我现在使用的是直截了当的，不考虑混合方法：

```
merge_output = output1 .* 0.5 + output2 .* 0.5;
figure, imshow( merge_output, 'XData', xdata , 'YData', ydata ), axis on, impixelinfo; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:08:09.240

我发现的简化解决方案：

![图片](../Images/72190982f6bdbd25e1a359b7acafa2cb.png)

1.  合并
2.  分离高低频通道
3.  分别平滑它们

致谢：Adobe® 数据集。

# c# - 错误 - 未标记为可序列化

> ID：15707872
> 
> 赞同：68
> 
> 时间：2013-03-29T17:01:35.357
> 
> 标签：c#, asp.net, .net, serialization

我得到的错误是：

```
Type 'OrgPermission' in Assembly 'App_Code.ptjvczom, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' is not marked as serializable. 
```

这是我的代码：

我有一个gridview，它使用以下数据源：

```
 <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" SelectMethod="GetOrgList" 
            TypeName="Org">
    <SelectParameters>
      <asp:SessionParameter Name="orgCodes" SessionField="UserOrgs" Type="Object" />
       <asp:Parameter DefaultValue="Y" Name="active" Type="String" />
    </SelectParameters>
 </asp:ObjectDataSource> 
```

我在页面加载中设置会话变量，如下所示：

```
User cUser = new User(userid);
//make sure the user is an Admin
List<OrgPermission> orgs = new List<OrgPermission>();
foreach(OrgPermission org in cUser.orgs)
   {
     if (org.type=='admin')
     {
        orgs.Add(org);                       
     }
   }
Session["UserOrgs"] = orgs; 
```

我的用户类如下所示：

```
public class OrgPermission
{
    public string Org { get; set; }   
    public List<string> type { get; set; }

    public OrgPermission()
    { }    
}
public class cUser
{    
    public string userid { get; set; }
    public List<OrgPermission> orgs { get; set; }

    public clsUser(string username)
    {
      //i set everything here
    }
} 
```

我不明白它为什么会坏，我可以在不使其可序列化的情况下使用它吗？

我尝试调试，并且会话变量设置得很好，然后它进入 GetOrgList 并返回了正确的结果，但是页面没有加载，我得到了上面的错误。

这是我的 GetOrgList 函数的片段：

```
public DataTable GetOrgList(List<OrgPermission> orgCodes, string active)
    {

        string orgList = null;

        //code to set OrgList using the parameter is here.

        DataSet ds = new DataSet();
        SqlConnection conn = new SqlConnection(cCon.getConn());
        SqlCommand cmd = new SqlCommand("sp_GetOrgList", conn);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(new SqlParameter("@orgList", orgList));
        cmd.Parameters.Add(new SqlParameter("@active", active));

            conn.Open();
            SqlDataAdapter sqlDA = new SqlDataAdapter();

            sqlDA.SelectCommand = cmd;
            sqlDA.Fill(ds);

            conn.Close();
        return ds.Tables[0];
    } 
```

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-03-29T17:03:34.883

您需要向`Serializable`要序列化的类添加一个属性。

```
[Serializable]
public class OrgPermission 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-29T17:19:40.857

如果将对象存储在会话状态中，则该对象必须是可序列化的。

[http://www.hpenterprisesecurity.com/vulncat/en/vulncat/dotnet/asp_dotnet_bad_practices_non_serializable_object_stored_in_session.html](http://www.hpenterprisesecurity.com/vulncat/en/vulncat/dotnet/asp_dotnet_bad_practices_non_serializable_object_stored_in_session.html)

* * *

编辑：

为了正确序列化会话，应用程序存储为会话属性的所有对象都必须声明 [Serializable] 属性。此外，如果对象需要自定义序列化方法，它还必须实现 ISerializable 接口。

[https://vulncat.hpefod.com/en/detail?id=desc.structural.dotnet.asp_dotnet_bad_practices_non_serializable_object_stored_in_session#C%23%2fVB.NET%2fASP.NET](https://vulncat.hpefod.com/en/detail?id=desc.structural.dotnet.asp_dotnet_bad_practices_non_serializable_object_stored_in_session#C%23%2fVB.NET%2fASP.NET)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-26T10:19:40.357

为了繁荣，留下我的具体解决方案，因为它是这个问题的一个棘手版本：

`Type 'System.Linq.Enumerable+WhereSelectArrayIterator[T...] was not marked as serializable`

由于具有类型字段的类，`IEnumerable<int>`例如：

```
[Serializable]
class MySessionData{
    public int ID;
    public IEnumerable<int> RelatedIDs; //This can be an issue
} 
```

最初的问题实例`MySessionData`是从一个不可序列化的列表中设置的：

```
MySessionData instance = new MySessionData(){ 
    ID = 123,
    RelatedIDs = nonSerizableList.Select<int>(item => item.ID)
}; 
```

The cause here is the concrete class that the `Select<int>(...)` returns, **has type data that's not serializable**, and you need to copy the id's to a fresh `List<int>` to resolve it.

```
RelatedIDs = nonSerizableList.Select<int>(item => item.ID).ToList(); 
```

# ios - 在 iOS 应用中管理 Documents/Inbox 文件夹的好方法

> ID：15707874
> 
> 赞同：15
> 
> 时间：2013-03-29T17:01:39.803
> 
> 标签：ios

当文档交互系统将文件传递到 iOS 应用程序时，该文件的副本将存储在应用程序包的`Documents/Inbox`文件夹中。应用程序处理完文件后，显然需要从 中删除文件`Documents/Inbox`，否则文件夹将继续增长并浪费设备上的存储空间。

但是，我对这个简单的解决方案 (A) 感到不舒服，因为我的应用程序需要与用户交互才能完成处理和删除文件。如果用户在此交互期间挂起应用程序，然后应用程序在后台被杀死，则应用程序下次启动时不会删除陈旧文件。当然，我可以改进我的应用程序以涵盖这种情况，但我怀疑总会有另一个边界案例让我留下一个“不干净”的`Documents/Inbox`文件夹。

因此，优选的解决方案 (B) 是`Documents/Inbox`在适当的时间删除文件夹（例如，当应用程序正常启动时，即不通过文档交互）。我仍然对此感到不舒服，因为我将访问一个文件系统路径，其位置在任何地方都没有正式记录。例如，如果在未来的 iOS 版本中文档交互系统不再将文件放入`Document/Inbox`.

所以我的问题是：

1.  您会推荐解决方案 A 还是 B？
2.  您是否使用不同的方法，您能否概述一下您的应用程序是如何管理的`Document/Inbox`？
3.  最后但并非最不重要的一点是：您是否知道涵盖该主题但我忽略的 Apple 官方文档？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-29T17:37:53.610

既然我问了这个问题，我已经实施了以下解决方案：

*   我重新设计了我的应用程序，现在它可以立即处理通过文档交互传递给它的文件，而完全不涉及用户。除非应用程序在处理文件的过程中崩溃或被挂起并杀死，否则这应该总是给我留下一个干净的`Documents/Inbox`.
*   为了涵盖崩溃或挂起/终止的（罕见）情况，我的应用程序`Documents/Inbox`在正常启动时删除了该文件夹（即没有文档交互的目的）。为此，必须对`Documents/Inbox`文件夹路径进行硬编码。

以下是解决方案中的想法：

*   重新设计应用程序
    *   最初，让用户选择她希望如何处理文件似乎是个好主意——毕竟，提供选择将使应用程序更加灵活并为用户提供更多自由，对吧？
    *   然后我意识到我试图将决定如何处理文档交互的责任转移给用户。所以我咬紧牙关，预先做出艰难的决定，然后愉快地在我的应用程序中实现了一个简单直接的文档交互系统。
    *   事实证明，没有用户交互也意味着该应用程序更易于使用，因此对于作为开发人员的我和我的应用程序的用户来说，这是一个双赢的局面。
*   `Documents/Inbox`在应用程序启动期间 删除文件夹
    *   在应用程序启动期间删除`Documents/Inbox`文件夹只是事后的想法，而不是我的应用程序如何处理文档交互的*重要*部分
    *   因此，我非常愿意承担 Apple 可能会在未来某个时候更改收件箱文件夹的文件系统路径的风险。可能发生的最糟糕的事情是我的应用程序将开始积累一些从崩溃或挂起/终止场景中遗留下来的文件。

最后，提出一些进一步发展的想法：

*   如果事实证明应用程序处理文档交互的方式*确实*不止一种，我会添加一个用户偏好，以便用户必须预先做出决定，并且应用程序不需要停止它处理要求用户做出选择。
*   如果事实证明在文档交互处理过程中用户交互是绝对不可避免的，我会考虑这种方法：1）在允许用户交互之前，将文件从`Documents/Inbox`某种“暂存”文件夹中移动; 2）让用户交互发生；3) 以用户选择的任何方式处理“暂存”文件夹中的文件。这里重要的是“暂存”文件夹*位于已知位置，并且完全由应用程序管理*。如果用户在用户交互步骤的中间暂停然后终止应用程序，则可以在下次启动应用程序时简单地采取适当的操作。

* * *

**编辑**

`Documents/Inbox`在 iOS 7 中，一旦创建就无法再删除。该`NSFileManager`方法`removeItemAtPath:error:`返回 Cocoa 错误 513，解析为`NSFileWriteNoPermissionError`（参见[此 Foundation 常量列表](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)）。该错误似乎与 POSIX 权限无关，但是，它看起来好像系统本身干扰了删除尝试（可能是保护应用程序包结构？）。

另外值得注意的是，如今苹果在该方法`Documents/Inbox`的文档中明确命名。他们还说`UIApplicationDelegate``application:openURL:sourceApplication:annotation:`

> [...]您的应用程序有权读取和删除此目录中的文件，但无权写入它们。如果要修改文件，必须先将其移动到不同的目录。

There is more stuff about possible encryption of the files in [the docs](https://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/), but you should read up on that yourself.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-23T19:44:02.763

This problem has become much more complicated with the introduction of the Files app, and the "Open in place" feature.

If you do **not** have "Supports opening documents in place" switched on, in your `info.plist`, then things are pretty much the same, and files opened from any other app still appear in the `Documents/Inbox` directory. But files opened from the Files app appear in another inbox, currently at `tmp/<bundle ID of app>-inbox`. It is still recommended to delete the file once you are done with it, but there is less need to occasionally clean the directory, because the `tmp` directory gets cleaned by iOS once in a while anyways.

If you **do** have "Supports opening documents in place" switched on, then things change drastically. Files opened from the Files app and some other apps are no longer copied into an inbox, but they are passed to you at their original location. That is typically some location inside the Files app itself, inside another app referenced from the Files app, or even some general iCloud location. If you expose the files in your Documents folder, then it could even be one of your own app's files.

Needless to say, if you get such a file, you **must not** delete it. But if the file comes in an inbox, which will still happen a lot as well, then you **must** delete it. In order to determine this, the options of the `application:openURL:options:` call contains an [`UIApplicationOpenURLOptionsOpenInPlaceKey`](https://developer.apple.com/documentation/uikit/uiapplicationopenurloptionsopeninplacekey) key. If that has value (`NSNumber`) NO, then the file is in an inbox, and it should be deleted. It it has value YES, then it is opened in-place, and must not be deleted.

Note that for files that are opened in place, you also need to gain permission to use them first. You do that but surrounding the access to the file by `startAccessingSecurityScopedResource` and `stopAccessingSecurityScopedResource` calls. See [Apple documentation](https://developer.apple.com/documentation/foundation/nsurl/1417051-startaccessingsecurityscopedreso) for details.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:39:20.387

我现在正面临同样的问题。像您一样，我没有一个好的解决方案，但在回答您的问题时，我倾向于选项 A 而不是选项 B，因为我不喜欢未来版本的操作系统可能存在问题的想法。因为在我的情况下，一旦我显示文档的预览就没有用户交互，我可以在收到`–documentInteractionControllerDidEndPreview:`委托回调时继续删除它。这是理论上的，因为我还没有对此进行编码，并且暂时不会使用它，因为它是一个低优先级项目。如果它不起作用或有其他问题，我会在这里报告。我输入的 Google 搜索以查找来自 Apple 的文档指向了这篇 StackOverflow 帖子。我还没有从 Apple 或其他任何人那里看到有关该主题的任何其他有用信息。

# c++ - 检测继承类并将其转换为基类

> ID：15707890
> 
> 赞同：1
> 
> 时间：2013-03-29T17:02:35.913
> 
> 标签：c++

我有3个类，一个是基类，另一个是从基类继承的类，这里是类的代码：

```
// Event Class
#ifndef EVENT_H
#define EVENT_H

#include <iostream>

namespace Engine
{
    namespace Data
    {
        // base class
        class Event
        {
            public:
                // Class Variable
                int Measure;
                int Beat;
                int Position;

                // This Class that was I mean
                class SampleEvent;
                class TimeEvent;

                // Constructor
                Event(int measure, int beat, int pos);
        };

        // Sample Event Class (inherit to Event Class)
        class Event::SampleEvent : public Event
        {
            public:
            // variable in SampleEvent Class
            int ID;
            float Pan;
            float Vol;

            // Constructor
            SampleEvent(int id, float pan, float vol, int measure, int beat, int pos);
        };

        // Time Event Class (inherit to Event class)
        class Event::TimeEvent : public Event
        {
            public:
            // variable in TimeEvent Class
            double Value;

            // Constructor
            TimeEvent(double value, int measure, int beat, int pos);
        };

        // Constructor of Event
        Event::Event(int measure, int beat, int pos)
        {
            Measure         = measure;
            Beat            = beat;
            Position        = pos;
        }

        // Constructor of Sample Event
        Event::SampleEvent::SampleEvent(int id, float pan, float vol, int measure, int beat, int pos) : Event(measure, beat, pos)
        {
            ID                      = id;
            Pan                     = pan;
            Vol                     = vol;
            Measure         = measure;
            Beat            = beat;
            Position        = pos;
        }

        // Constructor of Time Event
        Event::TimeEvent::TimeEvent(double value, int measure, int beat, int pos) : Event(measure, beat, pos)
        {
            Value                   = value;
            Measure         = measure;
            Beat            = beat;
            Position        = pos;
        }
    }      
}
#endif 
```

假设，我有 2 个变量，`SE`对于SampleEvent 和 TE 的 TimeEvent `TE`，`SE`我只想将它们插入向量，并从向量中获取它们，这是我当前的代码：

```
Event::SampleEvent SE = Event::SampleEvent(1000, 0, 0, 10, 10, 10);
Event::TimeEvent TE = Event::TimeEvent(200, 20, 20, 20);
vector<Event> DataEvent;

// insert Event
DataEvent.push_back(SE);
DataEvent.push_back(TE);

// Now I just want to get it back
Event::SampleEvent RSE = DataEvent[0]; // -> Error no suitable user-defined conversion from "Engine::Data::Event" to "Engine::Data::Event::SampleEvent" exists
Event::TimeEvent RTE = DataEvent[0];   // -> Error no suitable user-defined conversion from "Engine::Data::Event" to "Engine::Data::Event::TimeEvent" exists

// And I don't know how to detecting the inheritance Class
// something like if (RSE == Event::SampleEvent) or if (RTE == Event::TimeEvent) @_@ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:14:14.030

我相信您需要将其投射以将其取回。因为虽然您可以将 SampleEvent 和 TimeEvent 隐式转换为 Event，但您不能以相反的方式隐式执行此操作。

您将需要使用~~Event 的引用或~~指向 Event 的指针来使其与强制转换一起正常工作。

## 使用参考

```
*removed* you cannot make a vector reference. 
```

## 使用指针

```
Event::SampleEvent SE = Event::SampleEvent(1000, 0, 0, 10, 10, 10);
Event::TimeEvent TE = Event::TimeEvent(200, 20, 20, 20);

std::vector<Event*> DataEvent;
// insert Event
DataEvent.push_back(&SE);
DataEvent.push_back(&TE);
// get the events back, note this can throw an exception if you cast incorrectly.
Event::SampleEvent* RSE = (Event::SampleEvent*)DataEvent[0]; 
Event::TimeEvent* RTE = (Event::TimeEvent*)DataEvent[1]; 
/// This also Works using static_cast
//Event::SampleEvent* RSE = static_cast<Event::SampleEvent*>(DataEvent[0]); 
//Event::TimeEvent* RTE = static_cast<Event::TimeEvent*>(DataEvent[1]);  
std::cout << RSE->ID << std::endl;
std::cout << RTE->Value << std::endl; 
```

输出是：`1000` `200`

有关投射的更多信息，请参阅这个[stackoverflow](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used)答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:16:58.203

你有一个向量

```
vector<Event> DataEvent; 
```

所以你应该这样使用它：

```
Event E = DataEvent[0]; 
```

如果您键入`Event::SampleEvent RSE = DataEvent[0];`，那么您没有使用指向具有基类指针的子类的能力，而只是简单地转换对象。如果您希望此强制转换成功，您必须提供转换运算符，或者考虑使用指针向量：`vector<Event* > DataEvent;`然后如果您想要获取特定事件，您可以使用`dynamic_cast<>`它允许您动态获取子类的对象，前提是它实际上是这个子类对象：记住你可以在公共基类下的向量中有许多不同的子类，你还需要一些虚拟方法，否则类型不被视为多态，你不能使用`dynamic_cast<>`. 添加就足够了

```
virtual void f(){} 
```

到事件类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:20:16.837

不可能将*子类对象 itsef*转换为基类对象，而是可以轻松地将子类对象的引用（如指针）转换为基类的引用。

# asp.net - ASP.NET 测试服务器

> ID：15707891
> 
> 赞同：1
> 
> 时间：2013-03-29T17:02:38.533
> 
> 标签：asp.net

我是 ASP.NET 的新手，我想通过构建和运行不同的简单代码片段来开始编码和学习语言......

开始和测试 ASP.NET 代码的最简单方法是什么？我尝试修改 XAMPP 中的 httpd 文件以添加 asp 支持，但没有成功。我猜想使用 XAMPP 来运行 ASP.NET 并不是一个简单的方法。

```
<html>
<body>
     <h1>Hello Web Pages</h1>
     <p>The time is @DateTime.Now</p>
</body>
</html> 
```

我很感激任何建议，

提前谢谢了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:10:03.647

我会查看 ASP.Net 的官方[入门](http://www.asp.net/get-started)页面。您可以使用 Cassini 或 IIS Express 来实际测试您的 Web 应用程序。您需要升级到完整的 IIS 以将您的 Web 应用程序投入生产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:07:54.880

你肯定想使用 IIS——我不知道你是否甚至可以将 Apache 用于 ASP.NET，但 IIS 几乎就是为它设计的。

一个基本的 hello-world 页面需要对您的示例进行一些调整 - 一旦您在 IIS 中设置了应用程序，该页面应该运行：

默认.aspx：

```
<%@ Page Language="C#" %>
<html>
    <body>
        <h1>Hello Web Pages</h1>
        <p>The time is <%= System.DateTime.Now %></p>
    </body>
 </html> 
```

但这不是学习真正的 ASP.NET 内容的好方法。你肯定会想要使用 Visual Studio 来学习，并在线运行一些教程来帮助你入门。我个人建议从 ASP.NET MVC 开始，特别是如果您已经接触过 MVC 模式。经典的 ASP.NET WebForms 有很多时髦的 Web 巫术，如果您是使用其他技术的 Web 开发人员，学习起来可能有点棘手。

您可以获得 Visual Studio 的免费副本 - 搜索 Visual Studio Express，您会找到各种免费版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:37:44.010

如果您是学生，那么您可以从 Dreamspark.com 免费下载，只需输入一些学生 ID/大学信息。

Window 默认有一个 IIS 服务器，您只需要从“关闭窗口功能”中激活它，但是对于托管，您需要一个 IIS 服务器。

作者安迪奥尔森有很好的在线教程/书籍，专门用于asp.net，这是最好的可用的之一。

我可以检查并给你一些最好的书的标题（如果你想继续这样做的话）。

祝你好运。

# python - 在自定义 django 小部件中访问当前用户

> ID：15707896
> 
> 赞同：1
> 
> 时间：2013-03-29T17:03:01.187
> 
> 标签：python, django

我有一个自定义小部件，用于将`ForeignKey`字段的下拉列表替换为带有单选按钮的图像列表。在我的`render`方法中，我需要访问当前用户（当前登录的用户），就像我在普通视图中使用`request.user`.

我已经阅读了很多解决方案来做到这一点`Forms`，你应该从`**kwargs`你的`__init__`方法中弹出用户对象。

`**kwargs`但是小部件在他们的`__init__`方法中没有：

```
def __init__(self, attrs=None):
    if attrs is not None:
        self.attrs = attrs.copy()
    else:
        self.attrs = {} 
```

**如何访问`Widget`子类中的当前用户？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:37:30.297

我通过阅读 Django 源找到了一个解决方案：`formfield_overrides`在自定义管理员中设置时传递用户对象。

我有 2 个模型：`News`和`Image`. `Image`包含一个名称字段和一个`ImageField`. 该`News`模型包含一个`ForeignKey`指向图像的内容：

```
class News(models.Model):
    ... bunch of news related fields
    image = models.ForeignKey(Image) 
```

然后在我的`admin.py`我有一个自定义的新闻管理类：

```
class NewsAdmin(admin.ModelAdmin):
    model = News

    def get_form(self, request, obj=None, **kwargs):
        self.formfield_overrides = {
            models.ForeignKey : {'widget' : SelectForeign(user = request.user)}
        }

        return super(NewsAdmin, self).get_form(request, obj, **kwargs) 
```

然后在我的`widget.py`我有一个自定义小部件类：

类 SelectForeign(widgets.Widget): current_user = None

```
def __init__(self, attrs=None, choices=(), user = None):
    self.current_user = None
    super(SelectForegin, self).__init__(attrs, choices) 
```

就是这样，现在我的小部件包含当前登录的用户。这不是很漂亮，但它有效。

**注意：** 这将替换模型`ForeignKey`内的所有字段`News`。为了解决这个问题，应该使用一个自定义`ForeignKey`子类，这样我们就可以只覆盖那个子类。

**如果有人有更好的更清洁的解决方案，请分享，我会接受。**

# actionscript-3 - ViewNavigator 显示应用程序顶部

> ID：15707897
> 
> 赞同：0
> 
> 时间：2013-03-29T17:03:10.360
> 
> 标签：actionscript-3, apache-flex, flex4.5, skinning, flex-mobile

我在 s:TabbedViewNavigatorApplication 中有 as:ViewNavigator 组件。目前它显示在底部。如何让它显示在操作栏下方的应用程序顶部？虽然我在 flex sdk 中查看了所有相关的皮肤，但我没有发现任何与位置有关的东西。

PS 这是 Flash Builder 4.6 中的移动应用程序

在 s:TabbedViewNavigatorApplication 组件中：

```
var nav:ViewNavigator = new ViewNavigator();
nav.label = "Newest";
nav.firstView = HomeView;
nav.firstViewData = "recent";
nav.percentWidth = 100;
nav.percentHeight = 100;

this.addElement(nav);
nav.titleContent = []; 
```

s:TabbedViewNavigatorApplication 皮肤的变化：（交换了 if 语句）（将 tabBar 的 y 位置更改了 60）

```
if (contentGroup.includeInLayout)
        {
            var contentGroupHeight:Number = (_isOverlay) ? unscaledHeight : Math.max(unscaledHeight - tabBarHeight, 0);
            contentGroup.setLayoutBoundsSize(unscaledWidth, contentGroupHeight);
            contentGroup.setLayoutBoundsPosition(0, 0);
        }
        if (tabBar.includeInLayout)
        {
            tabBarHeight = Math.min(tabBar.getPreferredBoundsHeight(), unscaledHeight);
            tabBar.setLayoutBoundsSize(unscaledWidth, tabBarHeight);
            tabBar.setLayoutBoundsPosition(0, 60); //unscaledHeight - tabBarHeight
            tabBarHeight = tabBar.getLayoutBoundsHeight(); 

            // backgroundAlpha is not a declared style on ButtonBar
            // TabbedViewNavigatorButtonBarSkin implements for overlay support
            var backgroundAlpha:Number = (_isOverlay) ? 0.75 : 1;
            tabBar.setStyle("backgroundAlpha", backgroundAlpha);
        } 
```

ViewNavigator 皮肤的变化：

（从 contentGroupHeight 中删除 (-) contentGroupPosition）

（将 contentGroupPosition 乘以 2，以便应用程序中的其他元素不会低于 buttonBar。操作栏和 buttonBar 必须具有相同的大小才能正常工作，并且无法从 vieNavigator 访问按钮栏本身的高度据我所知，皮肤）

```
if (contentGroup.includeInLayout)
        {
            // If the hostComponent is in overlay mode, the contentGroup extends
            // the entire bounds of the navigator and the alpha for the action 
            // bar changes
            // If this changes, also update validateEstimatedSizesOfChild
            var contentGroupHeight:Number = (_isOverlay) ? unscaledHeight : Math.max(unscaledHeight - actionBarHeight, 0);
            var contentGroupPosition:Number = (_isOverlay) ? 0 : actionBarHeight;

            contentGroup.setLayoutBoundsSize(unscaledWidth, contentGroupHeight-contentGroupPosition);
            contentGroup.setLayoutBoundsPosition(0, contentGroupPosition*2);
        } 
```

# c# - 在 SQL Server 中存储一个非常大的数字

> ID：15707902
> 
> 赞同：7
> 
> 时间：2013-03-29T17:03:32.283
> 
> 标签：c#, sql, sql-server-2008, biginteger

`92233720368547758079223372036854775807922337203699`我将如何像在 SQL Server 2008 中那样存储大量数据？最大`bigint`允许是`9223372036854775807`

我想我可以采取的一种方法是执行以下操作，将数字存储为`varchar(50)`我可以做的 C# 代码

```
BigInteger x = BigInteger.Parse("922337203685477580792233720368547758079223372036"); 
```

任何反馈将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-29T17:17:37.457

在这种情况下要问自己的一个相关问题，也是我在评论中问你的一个问题，如下：

> 您真正的大数字是要用作算术数字，还是只是一些标识符？

你回应了

> 据我了解，该数字是由某个政府机构的 Oracle 系统作为唯一标识符发出的，它的长度可以是 0 - 50 个数字，我们需要将其存储在我们的应用程序中

与尝试将数据存储为数字相比，这应该会导致您得到不同的答案。

如果它只是一个标识符，那么您真的不需要将其存储或视为数字。从数据的角度来看，由数字组成的字符串（例如美国的社会安全号码或信用卡和贷款上的帐号）并不是真正的*数字。*它们是*标识符字符串*。以这种方式存储它们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-29T17:06:58.657

从您的评论来看，如果您没有对其进行任何算术运算（即它只是一个标识符），它不必是 - 并且可能根本不应该是 - 首先是一个数字。只需将其视为数据库和消费应用程序中的字符串*，*然后继续。

* * *

但是，对于实际拥有*number*的问题的未来访问者，我可以想到两种选择：

*   使用`varchar`和`BigInteger.Parse(string)`/`BigInteger.ToString()`
*   使用`varbinary`和`BigInteger..ctor(byte[])`/`BigInteger.ToByteArray()`

采用二进制路线可能会带来性能或空间优势，但它也可能会限制需要使用该值的其他应用程序。恕我直言，除非您要每秒解析其中的许多内容，否则我怀疑这是否真的值得麻烦——而且这些天存储很便宜。

此外，如今字符串似乎是*事实上*的序列化方法（例如 XML 或 JSON），并且存储在 a`varchar`中还可以让您直接使用 SQL Server 的 XML 功能。

*但是，*使用这些选项，您将需要在数据库之外进行算术和排序。如果这是需要排序/过滤/处理的数据，您可能需要重新考虑策略。（见@MikeB 的评论）

为了解决自然排序顺序问题（您仍然无法进行算术运算），您可以将字符串补零到固定长度。我的建议是使用持久计算列来填充零。如果您持久化列数据，您还可以在其上放置索引；只需确保在进行排序时对填充列进行排序。[SQL Fiddle 演示](http://sqlfiddle.com/#!18/ac19f/2)

或者，最后一种选择是专门创建一个 CLR 类型来 wrap `BigInteger`，因此您可以直接在 SQL Server 中使用它（即用于比较和算术）。同样，不确定是否值得麻烦，但如果您需要批量进行算术运算，这可能是最快的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:07:30.793

您将数字存储为字符串的方法是最安全的方法。SQL 不是为处理无限精度数字而设计的。例如，DECIMAL 的大小仅限于几十个有效数字。

另一种选择是将数字存储为`varbinar()`（或者`binary()`如果您知道最大大小）。这可行，但您将以应用程序使用的格式存储数字，而不是数据库。这可能会限制您的应用程序的可移植性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-29T17:05:07.920

考虑使用[`decimal`](http://msdn.microsoft.com/en-us/library/ms187746.aspx)数据类型。它最多可以存储 38 位数字。

# java - 此类型的方法未定义 ERROR

> ID：15707903
> 
> 赞同：-1
> 
> 时间：2013-03-29T17:03:33.177
> 
> 标签：java, methods, undefined, blending

您好，我一直收到此错误：错误：BlendablePic 类型的方法 BlendRectWithWhite(int, int, int, int, int) 未定义

这是我对两者的编码，当我查看其他论坛帖子时，我对该怎么做感到困惑，他们只是让我对该怎么做更加困惑！谢谢！

```
import java.awt.Color;
public class IHateCompScience 
{
 public static void main(String[] args)

{
FileChooser.pickMediaPath();
BlendablePic pRef = new BlendablePic(FileChooser.pickAFile());
pRef.BlendRectWithWhite(0, 0, 300, 300, 2);
pRef.explore();

}}

public class BlendablePic extends Picture{
 public BlendablePic(String filename){
super(filename);
 }
 public void blendRectWithWhite(int xMin, int yMin, int xMax, int yMax, double a)
 {
 int x;
 x = xMin;
 while (x<= xMax)
 {
  int y;
  y = yMin;
  while(y <= yMax)
  {
    Pixel refPix = this.getPixel(x,y);
    refPix.setRed((int)Math.round(refPix.getRed() * (1.0 +a)+255*a));
    refPix.setGreen((int)Math.round(refPix.getGreen() * (1.0 +a)+255*a));
    refPix.setBlue((int)Math.round(refPix.getBlue() * (1.0 +a)+255*a));
  y= y+1;
  }
  x = x+1;
  }} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:05:21.057

Java 是区分大小写的语言。

因此，无论您定义什么，都可以调用该方法。

在你的情况下。

```
 pRef.blendRectWithWhite(0, 0, 300, 300, 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:05:52.670

```
pRef.BlendRectWithWhite(0, 0, 300, 300, 2); 
```

应该

```
pRef.blendRectWithWhite(0, 0, 300, 300, 2); 
```

# mysql - 如何在使用 MySQL 2 的 Rails 3 项目中使用 WHERE IN？

> ID：15707910
> 
> 赞同：5
> 
> 时间：2013-03-29T17:04:00.120
> 
> 标签：mysql, ruby-on-rails, activerecord, where-in

我对 Rails 很陌生，并且对 SQL 类型的语言有一些经验。

我正在使用 MySQL2 开发 Rails 3 项目

我在这里有一个通用的 SQL 语句，我想在我们的两个数据库上工作。有没有办法仅通过 ActiveRecord 功能来做到这一点？

```
SELECT * FROM MyRecords 
WHERE  (f1, f2, f3, f4) IN (
    SELECT f1, f2, f3, f4
    FROM   MyRecords
    GROUP  BY f1, f2, f3, f4
    HAVING count(*) = 1 
); 
```

换句话说，我正在尝试执行“WHERE IN”语句（坦率地说，我什至不知道 WHERE IN 语句的作用，只是这个答案满足了我的需要：我该怎么做（或者我可以) SELECT DISTINCT on multiple columns (postgresql)? ) 更具体地说，我必须扩充以下 ActiveRecord 函数，以便它执行上述查询：

```
 def MyRecordFunction
    MyRecords.where('org_id=?', self.org_id).order('f4')
  end 
```

谢谢你。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-29T17:14:58.913

我有点困惑，但我认为这就是你要找的：

```
MyRecord.where(org_id: [1, 2, 3]).order('f4') 
```

where 内部的**in**语句查找特定字段的特定值，在上面的示例中，查询将在 mY_records 表中查找 org_id 包含 1,2 或 3 的寄存器。

看看这个： http: [//guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

更新：我明白，Harish Shetty 有道理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:14:33.780

尝试这个：

```
MyRecord.joins("JOIN
  (
    SELECT f1, f2, f3, f4
    FROM   my_records
    GROUP  BY f1, f2, f3, f4
    HAVING count(*) = 1 
  ) a ON a.f1 = my_records.f1 AND
         a.f2 = my_records.f2 AND
         a.f3 = my_records.f3 AND
         a.f4 = my_records.f4") 
```

# iphone - 有什么办法可以改变 MKMapView 的外观吗？

> ID：15707911
> 
> 赞同：3
> 
> 时间：2013-03-29T17:04:01.323
> 
> 标签：iphone, uiview, mapkit, apple-maps

有没有办法像 Core Image 和照片一样操纵 MKMapView（颜色等）的外观？我想把地图制作成黑白或类似的东西。我认识的人这样做是为了在 Metawatch 的显示屏上显示一张小地图，基本上是拍摄 MKMapView 的快照，将它们转换为二进制图像并将它们发送到手表。

我需要实时（在 iPhone 的显示屏上）做类似的事情。希望你们明白我在这里想问什么：）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:37:32.273

不是 MapKit 直接的，但[MapBox iOS SDK](http://mapbox.com/mobile)可以做到这一点，而且还可以像 MapKit 一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T10:56:17.980

我发现以下问题（主要是答案）是很好的解决方案 [当mapoverlay可见时隐藏mapview ios7](https://stackoverflow.com/questions/19613833/hiding-mapview-when-mapoverlay-is-visible-ios7)

使用 MKTileOverlay 和[http://maps.stamen.com](http://maps.stamen.com)网站

顺便说一句....他们有[http://maps.stamen.com/#toner/12/37.7706/-122.3782](http://maps.stamen.com/#toner/12/37.7706/-122.3782)这是一张黑白地图

# javascript - 开发复杂的 Javascript 应用程序时可以使用多个 .JS 文件吗？

> ID：15707914
> 
> 赞同：39
> 
> 时间：2013-03-29T17:04:21.913
> 
> 标签：javascript, html, standards

来自 C# 背景，每个类（最佳实践）都存储在自己的单独文件中，它使开发非常干净。过去我从未用 Javascript 编写过任何复杂的东西，但我开始学习 HTML 5，我想使用 HTML 5 画布编写一个复杂的游戏。

将我所有的函数和代码放到一个 .js 文件中似乎很混乱。有没有办法将其拆分，或者有一种工具/IDE 可以让您使用单独的文件进行开发并将它们编译成一个单独的文件以进行部署？

我想我正在寻找一些最佳实践建议。像这样的问题通常似乎已经结束，所以这里是我的具体问题，以遵守 SO FAQ，需要实用、可回答的问题：

*   复杂的 JS 开发通常会涉及到单个 JS 文件中的所有代码吗？例如。你在写太空侵略者，你只有 spaceinvaders.js 还是有 ship.js、logic.js 等。

*   是否可以拆分您的 JS（无论是使用多个脚本标签还是预编译到单个 JS 文件）还是将它们全部放在一个文件中？

*   行业标准是什么？HTML 5 规范有什么建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T17:10:03.970

有两种可能的方式。就个人而言，我会使用构建工具来简化对多个文件的处理。

## 使用构建工具

**咕噜声**

我最喜欢跟上复杂 js 应用程序的工具是[`grunt`](http://gruntjs.com/). 使用 grunt，您可以根据需要开发任意数量的文件，并使用它的插件[`watch`](https://github.com/gruntjs/grunt-contrib-watch)并[`concat`](https://github.com/gruntjs/grunt-contrib-concat)在保存时自动连接它们。您可以做更多事情，但这是可能对您有所帮助的基本用例。

Grunt 需要[`nodejs`](http://nodejs.org/)并且需要一些时间来设置。但是，一旦您准备好`Gruntfile`设置，它就会真正加快您的开发过程。

为了使您的项目准备好用于生产，您还可以使用一些配置和单个命令来缩小脚本。

许多主要的 javascript 库都在使用 grunt，它们很容易识别`Gruntfile`：[jQuery](https://github.com/jquery/jquery/blob/master/Gruntfile.js)、[AngularJS](https://github.com/angular/angular.js/blob/master/Gruntfile.js)、[Twitter Bootstrap](https://github.com/twbs/bootstrap/blob/master/Gruntfile.js)等。

Grunt 也是开发工具集的一部分[`yeoman`](http://yeoman.io/)。

**早午餐**

[`Brunch`](http://brunch.io/)是另一个构建工具，它允许您像 grunt 那样做类似的事情。

## 仅加载需要的文件

如果您正在开发一个巨大的单页应用程序并且关心应用程序的启动时间，那么单个文件可能不是最佳解决方案。在这种情况下，您可以使用 javascript 模块加载器。

**需要.js**

因此[`require.js`](http://requirejs.org/)非常合适。它允许您仅在当前页面上加载实际需要的文件。虽然设置 require.js 比设置 grunt 需要更多的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T17:08:28.203

当然，您可以使用多个 javascript 文件。像 jQuery 或 Knockout 这样的库还有什么功能？

但是，要记住的一件事是，要使页面保持流畅，您想要做的一件事是减少每次页面加载的 http 请求总数。添加一堆单独加载的 javascript 文件会导致对每个额外文件的附加请求。因此，您可能希望为您的构建试验一个系统，该系统将您的 javascript 文件拼接成一个您可以在部署时使用的项目。有许多解决方案可以自动为您执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T17:08:55.530

您可以考虑使用 requirejs - 一个非常好的库，可以将您的 javascript 拆分为模块。它还提供了一个工具，您可以将所有模块“组合”到一个文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T19:52:46.950

您可以使用任意数量的`javascript`文件。只需在您的`html`代码中添加指向它们的链接：

```
<body style="background-color: black" onload="main();" >
    <!-- Your HTML body contents -->

    <!-- Your scripts (here, I used HTML5 BoilerPlate to setup, and the links to jquery are provided) -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
    <script src="js/main.js"></script>
</body> 
```

然后你可以连接你`main.js`来监听`main()`函数调用：

```
function main() {
    //here you can do your basic setup or delegate the control of the app to a different .js file.
} 
```

或 jQuery 文档就绪回调：

```
$(document).ready(function() {
    //here is a good spot to hookup other jQuery listeners
}); 
```

# regex - 另一个匹配所需结果的正则表达式

> ID：15707921
> 
> 赞同：-3
> 
> 时间：2013-03-29T17:04:37.430
> 
> 标签：regex

我遇到了另一个问题，我想从字符串中提取值。请看一下。

```
string anotherTest = "Hello World [A12345 **(05,00,45)**] - [518.6Z] [51.5]" 
```

我希望结果返回“A12345”“518.6Z”“51.5”。

我以粗体突出显示的是我遇到的问题。

我正在使用 c# 并且我已经尝试过 [(\D?\d+.?\d+\D?)] ... 如果我没有括号中的内容，那很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:10:09.697

您需要从`[ ... ]`子字符串中提取第一个单词。使用组：

```
.*?(\[([^\[\] ]+).*?\])* 
```

然后从所有捕获中提取第二组（取决于您的语言）

# php - 使用 PHP 从 json 获取 twitter 实体值

> ID：15707923
> 
> 赞同：0
> 
> 时间：2013-03-29T17:04:53.963
> 
> 标签：php, json, twitter

我正在循环浏览来自推特的 json 提要中的每条推文。代码的第一部分完美运行......

```
$screen_name = "BandQ";
$count = 10;

$urlone = json_decode(file_get_contents("http://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=false&screen_name=BandQ&count=".$count."&page=1"),true);
$urltwo = json_decode(file_get_contents("http://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=false&screen_name=BandQ&count=".$count."&page=2"),true);

$data = array_merge_recursive( $urlone, $urltwo);

// Output tweets
//$json = file_get_contents("http://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=false&screen_name=".$screen_name."&count=".$count."", true);
//$decode = json_decode($json, true);

$count = count($data); //counting the number of status

$arr = array();
for($i=0;$i<$count;$i++){
    $text = $data[$i]["text"]." ";
     $retweets = $data[$i]["text"]."<br>Retweet Count: ".$data[$i]["retweet_count"]. "<br>Favourited Count: ".$data[$i]["favorite_count"]."<br>".$data[$i]["entities"]["user_mentions"][0]["screen_name"]."<br>";
    // $arr[] = $text;
    $arr[] = $retweets;
}

// Convert array to string
$arr = implode(" ",$arr);
print_r($arr); 
```

但是当我尝试获取实体-> user_mentions->screen_name 时，PHP 会抛出错误...

```
Notice: Array to string conversion in C:\xampp\htdocs\tweets.php on line 29

Notice: Use of undefined constant user_mentions - assumed 'user_mentions' in C:\xampp\htdocs\tweets.php on line 29

Notice: Use of undefined constant screen_name - assumed 'screen_name' in C:\xampp\htdocs\tweets.php on line 29 
```

如何获得该 screen_name 值？

非常感谢

# linux - 显示 3D 网格的简单程序？

> ID：15707926
> 
> 赞同：0
> 
> 时间：2013-03-29T17:05:00.923
> 
> 标签：linux, visualization, mesh

对于一个大学项目，我必须计算一个 3D 网格，然后显示它。网格是指三角形列表，其中每个点都有特定的高度。Windows 和 linux 上最简单的工具是什么，可以让我显示这样的网格？我只想能够可视化网格并旋转它，我可以编写任何需要用作输入的特定网格格式。我最想要的是一个易于为我的程序的最终用户安装的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:04:00.713

几乎每个工具都读取*.obj 格式，例如 MeshMan、MeshLab 和 ArtOfIllusion。它们都在 Windows 和 Linux 下工作。Geomview ( .off* -Files) 也很棒，但在 Windows 下很难安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-10T08:31:05.793

我正在为此目的`osgviewer`使用[OpenSceneGraph](http://www.openscenegraph.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:22:56.217

我不知道*最简单*的工具，但你试过[Blender](http://www.blender.org/)吗？它是跨平台的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T17:32:30.943

三角形网格有一些标准文件格式。尝试输出到 .ply 文件并为此使用现有查看器之一。

由于我从事科学可视化工作，因此我倾向于使用 VTK 文件格式；这对你来说太过分了。

事实上，我编写了一个基于 VTK/QT 的应用程序，用于查看可以处理 .ply 文件的网格[https://github.com/HalCana](https://github.com/HalCanary/vtkviewer) ​​ry/vtkviewer 。

# c# - 使用更改列表编号获取文件规范

> ID：15707927
> 
> 赞同：1
> 
> 时间：2013-03-29T17:05:04.757
> 
> 标签：c#, .net, perforce

我必须使用 changeid 提取 Filespecs 这些 FileSpecs 与我尝试使用此代码的此更改列表中更改的文件相关

```
string change = value;
Options optionfilespec = new Options();
optionfilespec.Add(id.ToString(),"");
P4Command commadfilespec = new P4Command(ps, "where", true, change);
P4CommandResult res= commadfilespec.Run(optionfilespec); 
```

或者我可以用这个吗

```
int id = int.Parse(change);
Changelist changelist= rep.GetChange(id);
IList <Perforce.P4.FileMetaData> files= changelist.Files;
foreach (FileMetaData fmd in files)
{ 
            //get the depot path and create instances from filespec            

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:23:54.963

后一种方法是您想要的。我不确定您的代码片段是否 100% 正确，但方法是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:28:56.407

第二种方法是正确的

```
int id = int.Parse(change);
Changelist changelist= rep.GetChangelist(id);
IList <Perforce.P4.FileMetaData> files= changelist.Files;
foreach (FileMetaData fmd in files)
    { 
                //get the depot path and create instances from filespec            

    } 
```

# c - 如何在c中序列化一个结构？

> ID：15707933
> 
> 赞同：9
> 
> 时间：2013-03-29T17:05:22.293
> 
> 标签：c, networking

我有一个结构对象，它包含几个原始数据类型、指针和结构指针。我想通过套接字发送它，以便它可以在另一端使用。由于我想预先支付序列化成本，如何初始化该结构的对象，以便可以立即发送而无需编组？例如

```
struct A {
    int i;  
    struct B *p;
};

struct B {
    long l;
    char *s[0];
};

struct A *obj; 

// can do I initialize obj?
int len = sizeof(struct A) + sizeof(struct B) + sizeof(?);
obj = (struct A *) malloc(len);
...

write(socket, obj, len);

// on the receiver end, I want to do this
char buf[len];

read(socket, buf, len);
struct A *obj = (struct A *)buf;
int i = obj->i;
char *s = obj->p->s[0];
int i obj.i=1; obj.p. 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:29:46.173

最简单的方法可能是分配一块内存来保存所有内容。例如，考虑如下结构：

```
typedef struct A {
  int v;
  char* str;
} our_struct_t; 
```

现在，*最简单*的方法是创建一个定义的格式并将其打包到一个字节数组中。我将尝试展示一个示例：

```
int sLen = 0;
int tLen = 0;
char* serialized = 0;
char* metadata = 0;
char* xval = 0;
char* xstr = 0;
our_struct_t x;
x.v   = 10;
x.str = "Our String";
sLen  = strlen(x.str); // Assuming null-terminated (which ours is)
tLen  = sizeof(int) + sLen; // Our struct has an int and a string - we want the whole string not a mem addr
serialized = malloc(sizeof(char) * (tLen + sizeof(int)); // We have an additional sizeof(int) for metadata - this will hold our string length
metadata = serialized;
xval = serialized + sizeof(int);
xstr = xval + sizeof(int);
*((int*)metadata) = sLen; // Pack our metadata
*((int*)xval) = x.v; // Our "v" value (1 int)
strncpy(xstr, x.str, sLen); // A full copy of our string 
```

所以这个例子将数据复制到一个大小数组中，`2 * sizeof(int) + sLen`它允许我们使用单个整数元数据（即字符串长度）和从结构中提取的值。要反序列化，您可以想象如下：

```
char* serialized = // Assume we have this
char* metadata = serialized;
char* yval = metadata + sizeof(int);
char* ystr = yval + sizeof(int);
our_struct_t y;
int sLen = *((int*)metadata);
y.v = *((int*)yval);
y.str = malloc((sLen + 1) * sizeof(char)); // +1 to null-terminate
strncpy(y.str, ystr, sLen);
y.str[sLen] = '\0'; 
```

如您所见，我们的字节数组是明确定义的。下面我详细介绍了结构：

*   字节 0-3：元数据（字符串长度）
*   字节 4-7：Xv（值）
*   字节 8 - sLen：X.str（值）

如果您遵循定义的约定，这种定义明确的结构允许您在任何环境中重新创建结构。现在，要通过套接字发送此结构取决于您如何开发协议。您可以首先发送一个包含您刚刚构建的数据包总长度的整数数据包，或者您可以期望首先/单独发送元数据（逻辑上分开，这在技术上仍然可以同时发送）然后你知道在客户端接收多少数据。例如，如果我收到元数据值`10`then 我可以期望`sizeof(int) + 10`字节跟随完成结构。一般来说，这可能是`14`字节。

**编辑**

我将根据评论中的要求列出一些澄清。

我做了一个完整的字符串副本，所以它在（逻辑上）连续的内存中。也就是说，我的序列化数据包中的所有数据实际上都是完整数据——没有指针。这样，我们可以`serialized`通过套接字发送单个缓冲区（我们称之为 is ）。如果只是发送指针，接收指针的用户会期望该指针是有效的内存地址。但是，您的内存地址不太可能完全相同。但是，即使是这样，他在该地址的数据也不会与您相同（除非在非常有限和特殊的情况下）。

希望通过查看反序列化过程（这是在接收方方面）可以更清楚地说明这一点。请注意我如何分配一个结构来保存发件人发送的信息。如果发送者没有向我发送完整的字符串，而只是发送了内存地址，我实际上无法重建发送的数据（即使在同一台机器上，我们有两个不同的虚拟内存空间也不相同）。所以本质上，指针只是对发起者的一个很好的映射。

最后，就“结构中的结构”而言，每个结构都需要多个函数。也就是说，您可以重用这些功能。例如，如果我有两个结构`A`和`B`where `A`contains `B`，我可以有两个序列化方法：

```
char* serializeB()
{
  // ... Do serialization
}

char* serializeA()
{
  char* B = serializeB();
  // ... Either add on to serialized version of B or do some other modifications to combine the structures
} 
```

所以你应该能够为每个结构使用一个序列化方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T17:17:25.767

这个答案除了你的问题之外`malloc`。

不幸的是，您找不到仍然与标准兼容的好*技巧。*正确序列化结构的*唯一*方法是将每个元素分别分解为字节，将它们写入 unsigned char 数组，通过网络发送它们并在另一端将它们重新组合在一起。简而言之，您将需要大量的移位和按位操作。

在某些情况下，您需要定义一种协议。例如，在您的情况下，您需要确保始终将对象`p`指向正确`struct A`，因此一旦恢复，您就可以正确设置指针。大家是不是已经说得够多了，不能通过网络发送指针？

您可能想要做的另一件协议的事情是将分配给灵活数组成员的大小`s`写入`struct B`. 无论您为序列化数据选择何种布局，显然双方都应该尊重。

重要的是要注意，您不能依赖任何特定于机器的东西，例如字节顺序、结构填充或基本类型的大小。这意味着您应该分别序列化元素的每个字段并为其分配固定数量的字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-26T03:45:17.123

您应该以独立于平台的方式序列化数据。

这是一个使用[Binn](https://github.com/liteserver/binn)库的示例（我的创作）：

```
 binn *obj;

  // create a new object
  obj = binn_object();

  // add values to it
  binn_object_set_int32(obj, "id", 123);
  binn_object_set_str(obj, "name", "Samsung Galaxy Charger");
  binn_object_set_double(obj, "price", 12.50);
  binn_object_set_blob(obj, "picture", picptr, piclen);

  // send over the network
  send(sock, binn_ptr(obj), binn_size(obj));

  // release the buffer
  binn_free(obj); 
```

如果您不想将字符串用作键，则可以使用 binn_map 使用整数作为键。还支持列表。您可以在另一个结构中插入一个结构（嵌套结构）。例如：

```
 binn *list;

  // create a new list
  list = binn_list();

  // add values to it
  binn_list_add_int32(list, 123);
  binn_list_add_double(list, 2.50);

  // add the list to the object
  binn_object_set_list(obj, "items", list);

  // or add the object to the list
  binn_list_add_object(list, obj); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T17:40:49.697

解释您的数据并了解您想要序列化的内容。您想要序列化一个整数和 B 类型的结构（递归地，您想要序列化一个 int、一个 long 和一个字符串数组）。然后将它们序列化。你需要的长度 sizeof(int) + sizeof(long) + ∑strlen(s[i])+1。

另一方面，序列化是一个已解决的问题（实际上是多次）。你确定你需要手写一个序列化例程吗？为什么不使用 D-Bus 或简单的 RPC 调用？请考虑使用它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-25T22:24:32.457

我尝试了@RageD 提供的方法，但没有奏效。

`int`我从反序列化中得到的值不是原来的值。

对我来说，`memcpy()`适用于非字符串变量。（您仍然可以使用`strcpy()`for `char *`）

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct A {
    int a;
    char *str;
} test_struct_t;

char *serialize(test_struct_t t) {
    int str_len = strlen(t.str);

    int size = 2 * sizeof(int) + str_len;
    char *buf = malloc(sizeof(char) * (size+1));

    memcpy(buf, &t.a, sizeof(int));
    memcpy(buf + sizeof(int), &str_len, sizeof(int));
    memcpy(buf + sizeof(int) * 2, t.str, str_len);
    buf[size] = '\0';

    return buf;
}

test_struct_t deserialize(char *buf) {
    test_struct_t t;

    memcpy(&t.a, buf, sizeof(int));

    int str_len;
    memcpy(&str_len, buf+sizeof(int), sizeof(int));

    t.str = malloc(sizeof(char) * (str_len+1));
    memcpy(t.str, buf+2*sizeof(int), str_len);
    t.str[str_len] = '\0';

    return t;
}

int main() {
    char str[15] = "Hello, world!";

    test_struct_t t;
    t.a = 123;
    t.str = malloc(strlen(str) + 1);
    strcpy(t.str, str);
    printf("original values: %d %s\n", t.a, t.str);

    char *buf = serialize(t);
    test_struct_t new_t = deserialize(buf);
    printf("new values: %d %s\n", new_t.a, new_t.str);

    return 0;
} 
```

上面代码的输出是：

```
original values: 123 Hello, world!
new values: 123 Hello, world! 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-29T17:10:06.693

@Shahbaz 是对的，我认为您实际上想要这个

```
int len = sizeof(struct A);
obj = (struct A *) malloc(len); 
```

但是在向另一台机器发送指针时也会遇到问题，因为指针指向的地址在另一台机器上没有任何意义。

# vba - 隐藏标题之间的文本 MS word 2007

> ID：15707937
> 
> 赞同：1
> 
> 时间：2013-03-29T17:05:34.360
> 
> 标签：vba, ms-word

我有一个大约 200 页的文档，本质上是特定软件的测试程序列表。现在，该文档有某些部分与软件的不同版本有关，并且这些部分混合在一起，因此它们没有按特定顺序很好地格式化。我想做的是能够隐藏测试不同版本时不需要的文档部分。我知道 MS word 有一个隐藏文本的字体选项，但我希望能够设置一个按钮/超文本链接/宏，以便轻松隐藏不需要的部分。这可能吗？我该怎么做？我已经开始尝试使用 VBA 脚本来设计我自己的宏，但只找到了一种方法来隐藏每个快捷方式命中的一个部分。有没有办法做到这一点，使所有部分同时生效？

编辑：

文档是这样组织的

```
Version 1
   Test Option button
/
Version 2
   Test Option button
       Check that Sample button is disabled
/
Version 1
   Test Save button
/
Version 3 
   Test Save to USB button

/ 
```

所以你可以看到它完全没有组织，我目前为一个宏拥有的代码真的不起作用，因为我没有在指定的两点之间进行选择，而是选择了整个文档。

```
Sub TextSelectTest()
'
' TextSelectTest Macro
' Base Test
'
With Selection.Find
    .Text = "Version1"
    .Forward = False
    .MatchWildcards = False
    .Wrap = wdFindStop
    .Execute
End With
Selection.Extend
With Selection.Find
    .Text = "/"
    .Forward = True
    .Execute
    .Text = ""
End With
Selection.Extend
With Selection.Font
    .Hidden = True
End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:06:10.920

我不认为`hiding`字体是最专业的解决方案，因为结果仅对打印可见。但这在这种情况下可能是最简单的，尤其是您建议的。

**第一步：**在文档中设置部分。这很容易，应该在 Word 应用程序中完成。您将需要插入与需要管理的文档的多个部分一样多的节分隔标记。我们需要知道哪个部分应该/不应该是每本手册的一部分，但我稍后会回到这一点。

**第二步：**您将需要以下子程序，它将“隐藏”所有部分并显示适当的部分：

```
Sub HideUnhide_Document_Section(secIndex As Variant)

Dim Doc As Document
Set Doc = ActiveDocument

Dim secDoc As Variant

'to hide all section first, by iteration 
For Each secDoc In Doc.Sections
    secDoc.Range.Font.Hidden = True
Next secDoc
    'alternatively we could hide whole content without iteration:
    'secDoc.Content.Font.Hidden = True

'to un-hide chosen sections
For Each secDoc In secIndex
    Doc.Sections(secDoc).Range.Font.Hidden = False
Next secDoc

End Sub 
```

为了管理您的隐藏过程，我建议使用以下代码：

子调用_Hide()

```
Dim arrVersion1 As Variant
    'put all sections for appropriate version
    arrVersion1 = Array(1, 3)

    'to unhide
    HideUnhide_Document_Section arrVersion1
End Sub 
```

您可以为每个版本准备类似的单独子例程，也可以对其进行参数化。在第二种情况下，您的手册的每个版本都必须有单独的数组 (arrVarsionX)。

# ruby - 任务挂钩前耙

> ID：15707940
> 
> 赞同：18
> 
> 时间：2013-03-29T17:05:38.857
> 
> 标签：ruby, rake

有没有直接的方法来修改 Rake 任务以在运行现有任务之前运行一些代码？我正在寻找相当于增强的东西，它在任务的开始而不是结束时运行。

```
Rake::Task['lame'].enhance(['i_run_afterwards_ha_ha']) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-29T17:25:18.640

您可以使用 Rake 任务的依赖项来执行此操作，并且 Rake 允许您重新定义现有任务。

`Rakefile`

```
task :your_task do
  puts 'your_task'
end
task :before do
  puts "before"
end
task :your_task => :before 
```

结果

```
$ rake your_task
before
your_task 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-28T10:48:06.070

或者你可以使用 rake-hooks gem 来做之前和之后的钩子：

[https://github.com/guillermo/rake-hooks](https://github.com/guillermo/rake-hooks)

```
namespace :greetings do 
    task :hola    do puts "Hola!" end ;
    task :bonjour do puts "Bonjour!" end ;
    task :gday    do puts "G'day!" end ;  
end 

before "greetings:hola", "greetings:bonjour", "greetings:gday" do
  puts "Hello!"
end

rake greetings:hola # => "Hello! Hola!" 
```

# python - 随后的 While 循环无法刷新数据库查询

> ID：15707945
> 
> 赞同：0
> 
> 时间：2013-03-29T17:05:59.677
> 
> 标签：python, multithreading, sqlalchemy

我正在运行一个脚本，该脚本每 2 秒从数据库中获取一次数据，然后将结果传递给一个函数，该函数创建多个线程并处理返回的数据。

`is_deleted = False`我的查询返回在数据库中都标记的项目。在下面的代码中，如果说我在数据库中有一个成员并且我将它们标记为已删除，甚至我实际上删除了它们，我希望`member.get_member()`返回“无”，我使用`if statement`. 但问题是，即使我在脚本已经运行时从数据库中删除了该成员，它也会带回“数据”，而它应该带回“无”。如果我停止脚本并再次运行它，它会在返回“无”时获取正确的数据

我正在使用 sqlAlchemy 0.8 运行 Python3.2

```
def main():
    while True:
        time.sleep(2)
        member = Member()
        myData, instance_counter = member.get_member()
        if myData == None:
            print("No member registered yet:", get_time_now())
        else:
            myqueuing(instance_counter, myData)   
            dbase.session.commit()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:17:20.007

我通过反复试验找到了答案。`session.close_all()`在再次执行数据库查询之前运行，如下所示。

不确定的是是否`session.close_all()`会关闭甚至由被调用以处理获取的数据的线程正在运行的会话。如果它会关闭这些会话，那么它会回到绘图板上，我需要你的帮助。

```
def main():
    while True:
        time.sleep(2)

        #This solved it but am not sure if it will close other sessions 
        #that have been spawned by the threads
        dbase.session.close_all()  

        member = Member()
        myData, instance_counter = member.get_member()
        if myData == None:
            print("No member registered yet:", get_time_now())
        else:
            myqueuing(instance_counter, myData)   
            dbase.session.commit()

if __name__ == '__main__':
    main() 
```

# r - cbind 在特定列中返回 NA 的函数

> ID：15707948
> 
> 赞同：2
> 
> 时间：2013-03-29T17:06:03.513
> 
> 标签：r, time-series, sequences

我正在使用一个函数来识别一个序列，然后以分钟为单位计算序列的持续时间。当我在最后阶段将结果与数据 cbind 时，将返回持续时间，但返回的相邻列带有“NA”，而不是这些列中最初的值

```
d<-read.table(text='Date.Time Aerial
794  "2012-10-01 08:18:00"      1
795  "2012-10-01 08:34:00"      1
796  "2012-10-01 08:39:00"      1
797  "2012-10-01 08:42:00"      1
798  "2012-10-01 08:48:00"      1
799  "2012-10-01 08:54:00"      1
800  "2012-10-01 08:58:00"      1
801  "2012-10-01 09:04:00"      1
802  "2012-10-01 09:05:00"      1
803  "2012-10-01 09:11:00"      1
1576 "2012-10-01 09:17:00"      2
1577 "2012-10-01 09:18:00"      2
804  "2012-10-01 09:19:00"      1
805  "2012-10-01 09:20:00"      1
1580 "2012-10-01 09:21:00"      2
1581 "2012-10-01 09:23:00"      2
806  "2012-10-01 09:25:00"      1
807  "2012-10-01 09:32:00"      1
808  "2012-10-01 09:37:00"      1
809  "2012-10-01 09:43:00"      1', header=TRUE, stringsAsFactors=FALSE, row.names=1)
#Give correct data type
d$Aerial<- as.numeric(d$Aerial)
d$Date.Time<- as.POSIXct(d$Date.Time) 
```

功能（识别天线 2 重复的序列和序列的持续时间）：

```
fun1 <- function(data,aerial){
  data_above <- 1L*(data$Aerial == aerial)
  id_start <- paste(data$Date.Time[which(diff(c(0L,data_above))==1)])
  id_end <- paste(data$Date.Time[which(diff(c(data_above,0L))== -1)])
  res <- cbind(data[id_start,1:1],Duration=difftime(id_end,id_start, units='mins'))
  return(res)
}
fun1(d,2) 
```

回报：

```
 Duration
[1,] NA        1
[2,] NA        2 
```

持续时间是正确的，但是我希望它返回应该在相关列中的数据：

```
 Date.Time                     Duration
[1,] 2012-10-01 09:11:00            1
[2,] 2012-10-01 09:21:00            2 
```

我的实际 data.frame 有很多列而不仅仅是 Date.Time 并且它仍然为所有这些返回 NA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:14:01.327

我会这样做：

```
fun1 <- function(data,aerial) {
    data_above <- 1L * (data$Aerial == aerial)
    id_start <- data$Date.Time[which(diff(c(0L,data_above)) == 1)]
    id_end <- data$Date.Time[which(diff(c(data_above, 0L)) == -1)]
    res <- cbind(data[data$Date.Time %in% id_start, 1, drop=FALSE], 
                  Duration = difftime(id_end,id_start, units='mins'))
   return(res)
}
fun1(d,2)

#                Date.Time Duration
# 1576 2012-10-01 09:17:00   1 mins
# 1580 2012-10-01 09:21:00   2 mins 
```

这里要注意的点：

*   当您对 a 进行子集化`data.frame`并且它只返回 1 个元素时，这样做`df[, 1]`会产生一个向量。使用是安全的`df[, 1, drop = FALSE`。

*   传递非`data.frame`参数（意思是，所有参数`cbind`都不是 data.frames）将导致输出为`matrix`. 它期望至少有一个参数是`data.frame`。所以，如果你不使用`drop = FALSE`并且输出结果在 1 行，那么它将是一个向量，结果将是一个矩阵（见第一点）

*   我认为您不需要在`paste`这里使用`id_start`and `id_end`。

*   `cbind`您访问的第一个参数`data.frame` `data`是不正确的。您必须`id_start`在 的所有值中查询`Date.Time`。可以使用`%in%`如图所示完成。

希望这可以帮助。

# php - 将表单数据输入到 MySql 表中，然后在 PHP 中直接搜索该表

> ID：15707949
> 
> 赞同：0
> 
> 时间：2013-03-29T17:06:06.717
> 
> 标签：php, mysql

提交表单并将数据插入表后，我想搜索此表并设置会话变量以在另一个数据库插入中使用。下面是插入然后搜索新更新的表的 PHP。

```
require_once("db_connect.php");

if($db_server) {

     mysql_select_db($db_database) or die ("<p>Couldn't find database.</p>");
     $query = "INSERT INTO routes (user_id, title, description, startlat, startlng, endlat, endlng) VALUES ('$user_id', '$title', '$desc', '$startlat.', '$startlng', '$endlat', '$endlng')";
     if (mysql_query($query)) {
          $get_id = mysql_query("SELECT * FROM routes WHERE user_id, title = '$user_id', '$title'");
          $route_id = mysql_result($get_id, 0,'id');
          $_SESSION['route_id'] = $route_id;
          echo $route_id; 
     } else {
          $message = ("Insert failed. " . mysql_error() . "<br/>" . $query);
     }  
} else {
     $message = "Error: could not connect to the database.";
}
mysql_close($db_server); 
```

我收到这个警告：

```
 Warning: mysql_result() expects parameter 1 to be resource, boolean given in... 
```

指的是上述代码的这一行：

```
 $route_id = mysql_result($get_id, 0,'id'); 
```

基本上我想要做的是获取新插入行的“id”（id 是主键并且自动递增）并将其设置为 $route_id 以便在我的下一页上我可以将此值插入另一个table 作为 route_id，用于将两个表链接在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:07:19.543

```
SELECT * FROM routes WHERE user_id, title = '$user_id', '$title' 
```

以上是无效查询。这就是您的函数失败并且不返回预期资源的原因。它的正确语法是

```
SELECT * FROM routes WHERE user_id= '$user_id' and title= '$title' 
```

# javascript - 追加 300.000 行或将它们打印到文件中？

> ID：15707953
> 
> 赞同：0
> 
> 时间：2013-03-29T17:06:23.167
> 
> 标签：javascript, jquery, json, getjson

我需要从数千个在线 JSON 中获取大约 300.000 行的最终行，等于 30MB。

作为编码的初学者，我更喜欢坚持使用 JS 来获取 $getJSON 数据，剪切它，将有趣的部分附加到我`<body>`的 . 但我想知道：

1.  **我的网络浏览器可以处理 300.000 $getJSON 查询和生成的 30~50MB 网页而不会崩溃吗？**
2.  **是否可以使用 JS 将结果写入文件，从而不断保存脚本的作品？**

我希望我的脚本运行大约 24 小时。数字是估计。

**编辑：**我没有服务器端知识，只有 JS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:18:52.143

您的方法有一些不正确的地方：

1.  如果您正在做的是从另一个来源获取（和处理）数据，然后将其显示给访问者，那么这种规模的处理应该在后台进程中预先单独完成。Web 浏览器不应该用作您所说的规模的数据处理器。
2.  如果您尝试显示 30-50MB 的网页，您的用户将会遇到*很多*令人沮丧的问题 - 浏览器崩溃、缺乏响应、超时、加载时间过长等等。如果您希望任何用户使用较旧的 IE 浏览器，他们可能会放弃甚至不尝试。

我的建议是把这个任务拉出来，用你的后端基础设施来完成，把结果保存在一个数据库中，然后你的用户可以搜索、过滤和访问它。一些值得研究的选项：

### 克朗

Cron 将允许您重复和定期运行任务，例如每天或每小时。如果您想不断更新数据集，请使用此选项。

### 工人（Heroku）

如果运行 Heroku，请将其从 dyno 中取出并使用单独的 worker，以免阻塞应用程序上的任何现有流量。

# php - 查找 value="something" PHP 之间的任何内容

> ID：15707954
> 
> 赞同：-4
> 
> 时间：2013-03-29T17:06:23.423
> 
> 标签：php, regex

我需要在 value="" 的引号之间找到字符/字母，然后更改它。

我知道它可以学习如何使用正则表达式等查找“未知数据”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:07:44.800

```
function get_string_between($string, $start, $end){
    $string = " ".$string;
    $ini = strpos($string,$start);
    if ($ini == 0) return "";
    $ini += strlen($start);   
    $len = strpos($string,$end,$ini) - $ini;
    return substr($string,$ini,$len);
}

$fullstring = "this is my [tag]dog[/tag]";
$parsed = get_string_between($fullstring, "[tag]", "[/tag]");

echo $parsed; // (result = dog)

$newstring = str_replace($parsed,"new phrase or whatever",$fullstring);

echo $newstring; // (result = this is my [tag]new phrase or whatever[/tag]) 
```

# javascript - 让表单的动作成为一个 javascript 文件

> ID：15707959
> 
> 赞同：-2
> 
> 时间：2013-03-29T17:06:40.567
> 
> 标签：javascript, jquery

是否可以让表单的操作成为一个 javascript 文件，该文件在表单中获取单个输入字段的值，并提醒该值。

所以在提交时，获取与表单一起提交的输入字段的值，提醒这个值。javascript / jQuery有可能吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:11:27.023

既然您说“警报”，我将假设您的意思是客户端 JavaScript，在这种情况下，答案是：不。您可以将操作设置为 JavaScript 伪 URI，但这不明智。请改用事件处理程序。

从`action`指向表单的服务器端处理程序开始。（遵循[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)原则）。

然后：

1.  将事件处理程序绑定到表单的提交事件
2.  用数据做你想做的事
3.  取消表单的正常行为

这样的：

```
<form action="...">
  <label> foo <input name="foo"> </label>
  <input type="submit">
</form>

<script>
  document.querySelector('form').addEventListener('submit', function (event) {
    alert(event.target.elements.foo.value);
    event.preventDefault();
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:09:39.333

这是你要找的吗？

```
$('form').submit(function() {
  alert($('#inputtxtID').val());
  return false;
}); 
```

# php - FOSUserBundle - 一页上的登录和注册表单

> ID：15707963
> 
> 赞同：1
> 
> 时间：2013-03-29T17:06:51.180
> 
> 标签：php, symfony, fosuserbundle

我想做一个简单的网站，在主页上，我会看到登录和注册表单。我已经考虑了好几个小时，但我仍然迷路了。这是我为此提出的设计：

```
{# Login form #}
<div>
  {% render url('login_form') %}
</div>
<b>or</b>
{# Register form #}
<div>
  {% render url('register_form') %}
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:03:23.033

FOS 用户包不支持开箱即用的这种结构（在单个模板中登录和注册），所以如果你想保持简单，那么你应该分开两个页面。

如果强烈需要这种结构，那么您可能应该从 FOS 用户包中扩展相应的控制器，并使它们使用相同的模板进行输出渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-27T12:49:19.390

我尝试使用 symfony 2.8 在同一页面（在 root /login）进行登录和注册，这对我来说是这样的：

在friendsofsymfony/user-bundle/Controller/SecurityController.php 中的第一个简单编辑

在函数 loginAction 的底部和返回之前添加：

```
$formFactory = $this->get('fos_user.registration.form.factory');
$form = $formFactory->createForm(); 
```

然后将注册表单视图添加到返回中，如下所示：

```
return $this->renderLogin(array(
            'last_username' => $lastUsername,
            'error' => $error,
            'csrf_token' => $csrfToken,
            'register_form' => $form->createView()
        )); 
```

然后在您的 login.html.twig 中放置您想要的任何位置：

```
{{ form_rest(register_form) }} 
```

*   重要提示：这可以正常登录，但如果出现注册验证错误，它将重定向到 /register ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T20:09:21.843

我实现该功能的唯一方法是停用 csrf 保护，这仅用于开发目的，我强烈建议您不要在生产环境中这样做，此任务背后的问题是一个常见的错误，称为`CSRF Token Mismatch`，这意味着您正在发送与该形式不对应的标记。您可以随时更改登录/注册表单并使用 AJAX 构建它，但再次忘记 CSRF，您应该使用 HTTPS 或类似的东西进行保护，但您仍然失去了保护层。干杯！。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-07T11:05:33.433

给你，不需要自定义控制器和动作

覆盖默认的 FOSUserbundle 视图`register.html.twig`和`login.html.twig`

**覆盖 login.html.twig**

```
{% include "@FOSUser/Registration/register_content.html.twig" %} 
```

**覆盖 register.html.twig**

```
{% include "@FOSUser/Registration/register_content.html.twig" %} 
```

**将以上两个文件放在以下位置**

**Symfony 4**

`templates/bundles/FOSUserBundle/Security/login.html.twig`

`templates/bundles/FOSUserBundle/Security/login.html.twig`

**Symfony 3**

`app/Resources/FOSUserBundle/Security/login.html.twig`

`app/Resources/FOSUserBundle/Security/login.html.twig`

Finally, you are ready to render login and registration view on the same page, multiple pages, all pages wherever you want :P

**my_login_and_registration_page.html.twig**

```
<div class="row">
  <div class="col-md-6">
    {{ render(controller('fos_user.security.controller:loginAction')) }}
  </div>
  <div class="col-md-6">
    {{ render(controller('fos_user.registration.controller:registerAction')) }}
  </div>
</div> 
```

**Note:** Since overridden views are no more extending FOSUserbundle base layout. You need to manage displaying of errors/messages in your layout.

**Check this file for reference:** `vendor/friendsofsymfony/user-bundle/Resources/views/layout.html.twig`

# jquery - 使用 jQuery datepicker 从 ASP MVC @Html.TextBoxFor 控件中删除时间

> ID：15707982
> 
> 赞同：7
> 
> 时间：2013-03-29T17:07:55.180
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, datepicker

使用 jQuery 时如何防止显示时间`.datepicker()`？下面是两个属性的模型部分（拍摄日期和到期日期）

```
 [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:d}")]
    [DisplayName("Expiration Date")]
    public string ExpirationDate { get; set; }

    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:d}")]
    [DisplayName("Date Taken")]
    public string DateTaken { get; set; } 
```

使用`@Html.EditorFor`我正在处理的视图上的控件可以正常工作。但是，当我从此更改该控件时：

```
 @Html.EditorFor(model => model.DateTaken) 
```

对此：

```
@Html.TextBoxFor(m => m.DateTaken, new { id = "dtkn" }) 
```

为了让它工作（标签`datepicker`应用了哪个控件）：

```
<script>
    $(function () {
        $("#dtkn").datepicker('setDate');
        $("#exp").datepicker('setDate');
    });

    $.datepicker.setDefaults({
        buttonImageOnly: true,
        buttonImage: '<%=Url.Content("~/Content/images/magnify.gif") %>',
        defaultDate: -1,
        gotoCurrent: true,
        prevText: "<< Prev",
        nextText: "Next >>"
    });
</script> 
```

突然时间开始出现。有什么建议么？

编辑

我尝试了以下格式，但没有一个可以工作：

```
$("#dtkn").datepicker({ dateFormat: 'dd-mm-yy' }).val();
$("#dtkn").datepicker({ dateFormat: 'yy-mm-dd' });
$("#dtkn").datepicker('getDate').format('yyyyMMdd'); 
```

还有这个：

```
$("#dtkn").datepicker('getDate').datepicker('dd/mm/yy');
$('#dtkn').datepicker('option', { dateFormat: 'd MM y' }); 
```

这是我在 Chrome 调试控制台看到的错误：

```
Uncaught TypeError: Cannot call method 'datepicker' of null 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-29T19:50:30.520

编辑：MVC4 用户可以使用这个

你想要这个重载

```
@Html.TextBoxFor(m => m.DateTaken, "{0:MM/dd/yyyy}", new { id="dtkn" }) 
```

如果您愿意手动放弃助手

```
<input type="text" value="@Model.DateTaken.ToString("MM/dd/yyyy")" id="dtkn" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T22:36:52.563

By using `@Html.TextBox` as opposed to `@Html.TextBoxFor` I was able to find an overload that works.

```
@Html.TextBox("DateTaken", Model.DateTaken.ToString("MM/dd/yyyy"), new { id = "dtkn" }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T04:18:53.793

@Html.TextBoxFor(m => m.DateTaken,"{0:d/M/yyyy}", new { id = "dtkn" })

[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:d/M/yyy}")] [DisplayName("Date Taken")] public string DateTaken { get; set; `}`

# email - 验证电子邮件传递和读者群

> ID：15707984
> 
> 赞同：0
> 
> 时间：2013-03-29T17:08:11.117
> 
> 标签：email, smtp

发送电子邮件时，有没有办法找出：

1.  用户已收到电子邮件（显示在用户的收件箱中）。
2.  用户已阅读（以及何时）该电子邮件。

如果不可能，是什么阻止它发现？电子邮件从发件人到收件人的路线是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:36:40.123

当您发送电子邮件时，电子邮件会通过一系列使用[SMTP](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)（简单邮件传输协议）的服务器进行传输。一旦电子邮件到达目的地，它就会存储到收件人目录中。[为了检索和阅读电子邮件，收件人使用 Outlook 等电子邮件客户端，该客户端通过IMAP](http://en.wikipedia.org/wiki/Internet_Message_Access_Protocol) / [POP3](http://en.wikipedia.org/wiki/Post_Office_Protocol)连接到服务器，告诉他们他们有多少新电子邮件并将每封邮件传递给客户端。为了获取此信息，用户必须提供他们的凭据。

因此，为了获取此信息，您需要知道收件人域的 imap/pop3 服务器，以及收件人的登录凭据（这将使您可以完全访问收件人的电子邮件帐户）。基本上，这是不可能的。

[本文](http://whatismyipaddress.com/mail-server)对如何通过 Internet 发送电子邮件提供了一个很好的简单概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T10:11:39.480

您可以，并且不需要所选答案中提到的凭据。

假设您正在使用 apache 和 php + mysql。

您向某人发送一封电子邮件，在电子邮件中，您有一个嵌入图像（您的徽标），它驻留在您的服务器上。电子邮件中徽标的 url 指向您服务器上的一个文件：example.com/logo.png?userRelatedId，它是一个 php 文件。使用 htaccess (apache)，您可以声明 logo.png 使用 php 执行，实际上转发真实图像和正确的 mimetype，但在此之前标识 userRelatedId，并在访问文件时保存在数据库中，

这意味着电子邮件被人 x 阅读以及访问徽标的时间（查看电子邮件）。

# entity-framework - 有没有替代触发器？

> ID：15707986
> 
> 赞同：0
> 
> 时间：2013-03-29T17:08:22.490
> 
> 标签：entity-framework, asp.net-mvc-4, code-first, triggers

我正在考虑将 Code First 方法与实体框架一起使用。

我喜欢在 DateAdded 和 DateModified 等字段上向我的 SQL 数据库添加触发器，以便它们`getdate()`根据需要自动更新。

据我所知，EF 很难做到这一点：Code First，那么还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:01:20.877

它不一定很困难（例如`getdate() default`），你只需要知道在哪里注射......

> 您可以通过使用`Seed`-ing 或 custom将自定义 SQL 包含到“链”中`Initializer`，以执行任何类型的自定义工作。

如果您想进行“后期创建”，您可能会遇到迁移问题 - 但如果您在 Db 仍然为空的情况下限制所有此类类似的初始化工作，您应该没问题。

另一件需要担心的是各种 Db 提供程序——因为任何自定义 SQL 可能会有所不同或支持——但如果你知道你的目标是什么，你应该没问题。

> **检查此链接**-[可以使用实体框架迁移将默认日期时间字段设置为 GETDATE()？](https://stackoverflow.com/questions/8594431/possible-to-default-datetime-field-to-getdate-with-entity-framework-migrations/8595794#8595794)
> 或者这个一般是关于触发器的[https://stackoverflow.com/a/5913581/417747](https://stackoverflow.com/a/5913581/417747)

...它可能接近您的需要 - 并让您了解如何做其他事情。

# php - 如何动态更改 Plupload url

> ID：15707987
> 
> 赞同：4
> 
> 时间：2013-03-29T17:08:23.550
> 
> 标签：php, jquery, plupload

我已经设置 Plupload 发送到 PHP 脚本检查参数“gal”，如：

```
$("#uploader").plupload({
  url : 'upload.php?gal='+$('#gallery').val()
}); 
```

这会从下拉列表中检索值，但它会在初始化时获取下拉列表的值。每次更改下拉菜单时，我都需要更改它。我试过：

```
$("#gallery").change(function() {
  $('#uploader').data("uiPlupload").options.url = 'upload.php?gal='+$(this).val();
}); 
```

这是更改此值的 url，但是我猜这不是正确的参数，因为即使我可以在 Firebug 中看到它发生了更改，它仍然使用初始化值。

我也试过：

```
$("#uploader").bind('BeforeUpload', function(up, file) {
  up.settings.url = 'upload.php?gal='+$("#gallery").val();
}); 
```

这根本不会被触发。

有人可以阐明我将如何改变这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T17:22:52.953

弄清楚了。您必须获取上传程序实例，然后在设置中进行设置，例如：

```
$("#gallery").change(function() {
    var up = $('#uploader').plupload('getUploader');
    up.settings.url = 'upload.php?gal='+$(this).val()
}); 
```

# c++ - 如何将管理器的引用传递给处理程序对象？

> ID：15707991
> 
> 赞同：2
> 
> 时间：2013-03-29T17:08:40.127
> 
> 标签：c++, c++11, memory-management

我想要做的是编写一个小的 Manager/Handler 类。管理器分发和管理句柄。例如，这样的句柄可以是简单的文件句柄。

如果消费者想要获取已经存在的句柄，管理器只需返回一个 shared_ptr。如果句柄不存在，则管理器创建一个新句柄，然后返回 shared_ptr。

在 Manager 内部，那些 shared_ptr 存储在一个简单的 STL-Map 中。如果分配的最后一个 shared_ptr 被删除，我希望我的经理删除相关的地图元素，以便处理程序对象自动被破坏。

这听起来有点像垃圾收集（例如工作线程，它检查指针的使用计数），但我相信它可以做得更优雅。

如何将管理器实例的引用传递给处理程序对象？（例如，就像将 unique_ptr(this) 传递给新处理程序的构造函数）

```
#include <memory>
#include <iostream>
#include <map>

using namespace std;

/*
 * Simple handler class, that actually does nothing.
 * This could be e.g. a Filehandler class or sth. like that
 */
class Handler {
private:
    int i;
public:
    Handler(int i) :i(i) {}
    ~Handler() {}
    // Say who you are.
    void print(void) { cout << "I am handler # " << i << endl; }
};

/*
 * This is the "manager" class, that manages all handles. A handle is identified
 * by an integer value. If a handle already exists, the Manager returns a shared_ptr,
 * if it does not exist, the manager creates a new handle.
 */
class Manager {
private:
    map<int, shared_ptr<Handler> > handles;
public:
    Manager() {}
    ~Manager() {}

    shared_ptr<Handler> get_handler(int identifier) {
        shared_ptr<Handler> retval;
        auto it = handles.find(identifier);

        if(it != handles.end() ) {
            retval = it->second;
        } else {
            retval = shared_ptr<Handler>(new Handler(identifier));
            handles.insert( pair<int, shared_ptr<Handler>>(identifier, retval) );
        }

        return retval;
    }
};

int main(int argc, char** argv) {
    Manager m;

    // Handler 13 doesn't exist, so it gets allocated
    auto h = m.get_handler(13);
    // Manager knows about handler 13, so it returns the already existing shared_ptr
    auto i = m.get_handler(13);

    h.reset(); // Well... Let's assume we don't need h any more...
    // do some stuff...
    i->print();
    // ...
    i.reset(); // We also loose i. This is exactly the point where i want the manager to forget about the handle 13

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:28:32.167

`shared_ptr`您可能希望在管理器中保存非拥有指针以跟踪现有句柄，并使用自定义删除器放弃拥有。当对象最终被销毁时，自定义删除器将确保删除管理器中相应的观察指针。

我将这种模式称为跟踪工厂，它是这样工作的。给定一个`object`类（`Handler`在你的情况下）：

```
class object
{

public:

    size_t get_id() const
    {
        return _id;
    }

private:

    friend class tracking_factory;

    object(size_t id) : _id(id) { }

    size_t _id = static_cast<size_t>(-1);

}; 
```

我定义了一个类，它创建实例`object`并存储它们的非拥有引用（`weak_ptr`s）。这个类是唯一`object`可以通过它创建实例的类——这就是为什么构造函数`object`是私有的，并且`tracking_factory`被声明为`friend`是为了能够访问它：

```
class tracking_factory
{

public:

    std::shared_ptr<object> get_object(size_t id, 
                                       bool createIfNotFound = true)
    {
        auto i = std::find_if(
            begin(_objects),
            end(_objects),
            [id] (std::pair<size_t const, std::weak_ptr<object>> const& p) 
            -> bool
        {
            return (p.first == id);
        });

        if (i != end(_objects))
        {
            return i->second.lock();
        }
        else if (createIfNotFound)
        {
            return make_object(id);
        }
        else
        {
            return std::shared_ptr<object>();
        }
    }

    size_t count_instances() const
    {
        return _objects.size();
    }

private:

    std::shared_ptr<object> make_object(size_t id)
    {
        std::shared_ptr<object> sp(
            new object(id),
            [this, id] (object* p)
        {
            _objects.erase(id);
            delete p;
        });

        _objects[id] = sp;

        return sp;
    }

    std::map<size_t, std::weak_ptr<object>> _objects;

}; 
```

然后，程序的其余部分将`shared_ptr`通过`object`:如果已经创建了具有`object_factory`所需特征的对象（此处为成员），则将返回它而不实例化新对象。下面是一些测试功能的代码：`id``shared_ptr`

```
#include <iostream>

int main()
{
    tracking_factory f;

    auto print_object_count = [&f] ()
    {
        std::cout << "Number of objects: " << f.count_instances() << std::endl;
    };

    print_object_count();

    auto p1 = f.get_object(42);

    print_object_count();

    {
        auto p2 = f.get_object(42);

        print_object_count();

        p1 = f.get_object(0);

        print_object_count();
    }

    print_object_count();

    p1.reset();

    print_object_count();
} 
```

最后，这是一个[活生生的例子](http://liveworkspace.org/code/48Ihhx$85)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T17:15:41.930

`std::weak_ptr`在地图中存储对象；它们不保留所有权，因此当最后一个`std::shared_ptr`对象消失时，资源将被销毁。但是它们确实会跟踪是否有任何剩余的`std::shared_ptr`对象指向原始对象，因此将它们放在地图中可以让您稍后检查那里是否还有资源。

# php - PHP列出所有可能的具有特定数字的6位数字

> ID：15707995
> 
> 赞同：0
> 
> 时间：2013-03-29T17:08:49.603
> 
> 标签：php, loops, recursion, permutation, combinations

我如何生成给定数量的数字并使用特定数字的所有可能数量？

所以基本上，我想要一个 6 位数字，例如只使用数字 ['1','2','3']。我尝试了一些递归方法，但是，由于我的其他并发症，我无法让它正常工作，即添加“|”分隔符 在每 2 位数字之间。所以列表会是这样的：

```
11|11|11
11|11|12
11|11|13
11|11|21
11|11|22
11|11|23 
```

等等。如果有人能指出我正确的方向，将不胜感激。将每种组合转储到我的 MySQL 数据库中的方法也很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:21:14.157

这是您的问题的一个更新很多的答案（最初从这个答案更新] [1](http://php.net/manual/en/function.vsprintf.php)）：

```
function findPermutations($arr, $arrLen, $size, $perArr = array(), $pos = 0, &$found = array()) {
   if ($size==$pos) { //if $pos reach $size then we have found one permutation
      $found[] = vsprintf("%s%s|%s%s|%s%s", $perArr);
      return;
   }
   for ($i=0; $i<$arrLen; $i++) {

      $perArr[$pos] = $arr[$i]; //put i'th char in current position
      //The recursive call that move to next position with $pos+1
      findPermutations($arr, $arrLen, $size, $perArr, $pos+1, $found); 
   }
   return $found;
}

$permutations = array();
$letters = array('1','2','3');
$max_length = 6;

$permutations = findPermutations($letters, count($letters), $max_length);

for($i = 0; $i < count($permutations); $i++) {
    print ($permutations[$i].'<br/>');
} 
```

这就是我正在做的事情。我传入了一个`$permutations`通过引用调用的空数组，当我发现新的排列时，我将它们附加到它上面。当函数`findPermutations()`完成时，我最终得到一个包含所有排列的数组，我可以迭代或插入。为了获得我正在使用的格式[vsprintf](http://php.net/manual/en/function.vsprintf.php)，这让我可以传递一个数据数组并应用一种格式（在这种情况下`%s%s|%s%s|%s%s`）。最后，我使用默认参数值来使调用这个函数更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:15:15.100

你的意思是这样的？

```
$letters='123'; // add other numbers

for($i=0;$i<3;$i++) { //generate 3 pairs
  $pairs[]=$letters[rand(0,2)] . $letters[rand(0,2)];
}
//then join them together
$finalstring=implode('-',$pairs); 
```

# angularjs - 如何使用单个指令和每个选项卡的自定义标签字段在 AngularJS 中创建对象驱动选项卡？

> ID：15707999
> 
> 赞同：1
> 
> 时间：2013-03-29T17:09:00.317
> 
> 标签：angularjs, angularjs-directive, angularjs-ng-repeat

AngularJS 主页上的示例使用两个指令创建选项卡：一个用于选项卡，一个用于窗格。是否可以像这样创建一个模板和一个指令：

HTML：

```
<div ng-app="components">
<tabs objects="someObjects" labelprop="name" shouldbe="the value of object.name"></tabs>
<tabs objects="someObjects" labelprop="id" shouldbe="the value of object.id"></tabs>
</div> 
```

JS：

```
angular.module('components', []).
directive('tabs', function() {
    return {
        restrict: 'E',
        replace: true,
        scope: {objects: '=', labelprop: '@', shouldbe: '@'},
        controller: function($scope, $element) {
            $scope.someObjects = [
                {name: "One", id: 1, data: 'foo'},
                {name: "Two", id: 2, data: 'bar'},
                {name: "There", id: 3, data: 'foobar'}
                ]
        },
        template:
            '<div class="tabbable">' +
                '<ul class="nav nav-tabs">' +
                    '<li ng-repeat="object in someObjects">' +
                        '<p>How do I use "labelprop" to get {{shouldbe}}</p>' +
                    '</li>' +
                '</ul>' +
            '</div>'
    }
}) 
```

（见这个小提琴说明我的问题：http: [//jsfiddle.net/2GXs5/3/](http://jsfiddle.net/2GXs5/3/)）

据我目前了解，因为`ng-repeat`是它自己的指令，它会自动执行它自己的事情，我无法访问`object`范围内的属性，比如我是否想在指令的链接函数中执行此操作：`scope.label = scope.object['scope.labelprop']`

此外，我仍在尝试围绕插值、嵌入等进行思考，因此解决方案可能会以某种方式涉及到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:32:43.893

To solve issue in demo you have access to both the repeating item and the directive scope within the template

```
 <p>{{labelprop}} is  {{object[labelprop]}}</p> 
```

Anything not filter related within the expression that isn't quoted will be treated as a variable so long as that vriable is within current scope

demo: [http://jsfiddle.net/2GXs5/4/](http://jsfiddle.net/2GXs5/4/)