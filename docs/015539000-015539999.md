# StackOverflow 问答 15539000-15539999

# java - JSP - 如何获得时间以 ms 不断更新

> ID：15539003
> 
> 赞同：1
> 
> 时间：2013-03-21T03:33:45.103
> 
> 标签：java, jsp, datetime

我正在尝试为自己编写一个示例 JSP 页面（对 jsp 来说非常新），并且已经阅读了一个示例来编写一个示例，但是我如何有时间持续更新？

这是我的代码片段：

```
<body>
    <%
        java.text.DateFormat df = new java.text.SimpleDateFormat(
                "HH:mm:ss:SS z MM/dd/yyyy");
        Calendar cal = Calendar.getInstance();
    %>

    <h1>
        Current Date and Time:
        <%=df.format(cal.getTime())%>
    </h1>
</body> 
```

顺便说一句，我正在使用 tomcat 服务器来部署它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:50:38.730

```
 function updateYourTime() {
        var now = new Date(), 
            months = ['January', 'February', '...']; 
            time = now.getHours() + ':' + now.getMinutes(), 

            date = [now.getDate(), 
                    months[now.getMonth()],
                    now.getFullYear()].join(' ');

        document.getElementById('currentTime').innerHTML = [date, time].join(' / ');

        setTimeout(updateYourTime, 1000);//This method will call for every second
    }
    updateYourTime(); // initial call 
```

详情见[这里](https://stackoverflow.com/questions/5091888/how-to-update-time-regularly)

```
<div id="currentTime"></time> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:48:08.810

你的意思是在你的页面上显示时钟？

你可以使用java脚本。 [这是一个例子](http://www.developphp.com/view_lesson.php?v=297)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T12:32:00.103

要在客户端 jsp 中显示服务器时钟，请将此 javascripcode 与 java

在要显示服务器时间的地方添加标签

```
<strong>Server Time&nbsp;:&nbsp;&nbsp;</strong><label id="timelable"></label> 
```

然后在body标签里面的jsp末尾添加如下java脚本代码

```
<script type="text/javascript">
        var myVar = setInterval(function(){ myTimer() }, 1000);
        var jsVar=  <%=java.util.Calendar.getInstance().getTimeInMillis()%>;
        var timeZoneOffset=<%=java.util.TimeZone.getDefault().getOffset(System.currentTimeMillis())%>;

        jsVar=jsVar+timeZoneOffset;
        function myTimer() {
        jsVar=jsVar+1000;
        var d = new Date(jsVar);
        var t=d.toUTCString();
    document.getElementById("timelable").innerHTML = t;
}

        </script> 
```

现在就是这样，您将看到在您的 jsp 中运行的服务器时间。

# ios - 如何在 iOS 中显示 Microsoft Outlook 邮件文件

> ID：15539013
> 
> 赞同：4
> 
> 时间：2013-03-21T03:34:18.213
> 
> 标签：ios, objective-c

有谁知道如何通过 iOS 以编程方式显示从 Microsoft Outlook 保存为文件的电子邮件？原始文件保存为 .eml 或 .msg 格式并存储在文件存储中。然后我下载此文件并需要在 iOS 设备中显示内容（带有附件链接）。

我看过使用 UIWebView 和 QLPreviewController 但看不到用于保存的电子邮件文件的合适文件格式。

如果无法直接查看 .msg 或 .eml 文件，是否可以转换为标准格式，以便在 iOS 中显示保存的电子邮件（作为文件）？

# visual-studio-2010 - 是否可以在仅安装 Visual Studio 的情况下将 opengl 或 directx 与 Visual Basic 一起使用

> ID：15539018
> 
> 赞同：0
> 
> 时间：2013-03-21T03:34:50.660
> 
> 标签：visual-studio-2010, visual-studio, opengl, directx

我想知道是否可以在系统上仅安装 Visual Studio 的情况下使用 opengl 或 directx。我无法安装其他任何东西，因为它是我正在使用的学校计算机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:26:01.340

使用 OpenGL 是可能的。您只需要下载 OpenGL .dll 并将它们链接到您的项目。网上有一些教程。

你可以找到一些关于 NeHe 的教程。[http://nehe.gamedev.net/tutorial/lessons_01__05/22004/](http://nehe.gamedev.net/tutorial/lessons_01__05/22004/)

编辑：我刚刚读到你想使用 VB。那是另一个故事了。虽然此编辑不是您问题的答案，但我建议使用 C++。我只知道 C# 的一个包装器，称为 CsGL。[http://csgl.sourceforge.net/faq.html#vsnet](http://csgl.sourceforge.net/faq.html#vsnet) 还有Tao框架：[http ://www.cse.ohio-state.edu/~crawfis/cse581/Homework/TaoSetup.html](http://www.cse.ohio-state.edu/~crawfis/cse581/Homework/TaoSetup.html)

或者看看：[http](http://www.opengl.org/wiki/Language_bindings) ://www.opengl.org/wiki/Language_bindings ，在 VB 部分。

# java - 通用数据类型参数

> ID：15539021
> 
> 赞同：0
> 
> 时间：2013-03-21T03:35:00.147
> 
> 标签：java, arrays, generics, parameters

我有这个类，它通过`selectionSort`. . .我在我的主函数（附在底部）中对我的数组进行排序时遇到问题......正确的调用方式是`selctionSort()`什么？

我的问题：“`selectionSort(T[], int)`类型`SortArray`中的方法不适用于参数`(int[], int)`”......我试图将我的 int 数组传递给函数，这一直给我这个错误。

```
/**
   Class for sorting an array of Comparable objects from smallest to 
   largest.
*/
public class SortArray
{
   /** Sorts the first n objects in an array into ascending order.
       @param a  an array of Comparable objects
       @param n  an integer > 0 */
   public static <T extends Comparable<? super T>> void selectionSort(T[] a, int n)
   {
      for (int index = 0; index < n - 1; index++)
      {
         int indexOfNextSmallest = getIndexOfSmallest(a, index, n - 1);
         swap(a, index, indexOfNextSmallest);
         // Assertion: a[0] <= a[1] <= . . . <= a[index] <= all other a[i]
      } // end for
   } // end selectionSort

   /** Finds the index of the smallest value in a portion of an array.
       @param a      an array of Comparable objects
       @param first  an integer >= 0 and < a.length that is the index of 
                     the first array entry to consider
       @param last   an integer >= first and < a.length that is the index 
                     of the last array entry to consider
       @return the index of the smallest value among
               a[first], a[first + 1], . . . , a[last] */
   private static <T extends Comparable<? super T>>
           int getIndexOfSmallest(T[] a, int first, int last)
   {
      T min = a[first];
      int indexOfMin = first;
      for (int index = first + 1; index <= last; index++)
      {
         if (a[index].compareTo(min) < 0)
         {
            min = a[index];
            indexOfMin = index;
         } // end if
         // Assertion: min is the smallest of a[first] through a[index].
      } // end for

      return indexOfMin;
   } // end getIndexOfSmallest

   /** Swaps the array entries a[i] and a[j].
       @param a  an array of objects
       @param i  an integer >= 0 and < a.length
       @param j  an integer >= 0 and < a.length */
   private static void swap(Object[] a, int i, int j)
   {
      Object temp = a[i];
      a[i] = a[j];
      a[j] = temp; 
   } // end swap
} // end SortArray

public static void main(String[] args) {
    int[] anArray = {15, 8, 10, 2, 5};          // given array

    System.out.println("Printing unsorted array...");
    for(int i = 0; i < anArray.length; i++)
        System.out.print(anArray[i] + " ");

    SortArray.selectionSort(anArray, anArray.length);

    System.out.println("\nPrinting sorted array...");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:44:48.990

您的方法需要一个对象数组而不是基元数组。所以 int[] 不起作用，但 Integer[] 会起作用。

```
public static void main(String[] args) {
  // int[] anArray = {15, 8, 10, 2, 5}; // given array
  Integer[] anArray = { 15, 8, 10, 2, 5 }; // given array

  System.out.println("Printing unsorted array...");
  for (int i = 0; i < anArray.length; i++)
     System.out.print(anArray[i] + " ");

  SortArray.selectionSort(anArray, anArray.length);

  System.out.println("\nPrinting sorted array...");
  for (int i = 0; i < anArray.length; i++)
     System.out.print(anArray[i] + " ");

} 
```

编辑：实际上，它需要的不仅仅是一个对象数组。他们还必须实现 Comparable 接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:39:49.873

仔细查看您的声明：

```
public static <T extends Comparable<? super T>> void selectionSort(T[] a, int n) 
```

`T`需要是扩展的类型`Comparable`。

当您使用它时：

```
SortArray.selectionSort(anArray, anArray.length); 
```

第一个参数是类型`int[]`，并且`int`不满足`T`.

`int[]`您可以考虑传入一个 ，而不是传入`Integer[]`。 `Integer`本身实现`Comparable`，并且您无需更改大量代码即可使用它进行切换。只需更改`anArray`from `int[]`to的声明`Integer[]`可能已经起作用。

# jquery - 在选择时显示已经隐藏的内容

> ID：15539025
> 
> 赞同：0
> 
> 时间：2013-03-21T03:35:41.097
> 
> 标签：jquery

好的，我已经通过 jquery 隐藏了基本的 div，当单击锚链接时，隐藏的 div 处于活动状态并滑入查看其他 div 被隐藏。问题是：

我使用 Chris Coyiers（CSS Tricks）方法根据窗口大小/屏幕大小[将菜单更改为下拉菜单。](http://css-tricks.com/convert-menu-to-dropdown/)问题是它在锚链接上不起作用，我尝试过 .change，尝试操作 window.location 甚至 document.location（只是检查），但我什至不明白为什么它不能完全工作，所以我只是一只被砍头的鸡。

我想也许我应该尝试将 document.html#Id 作为 href ，然后它可能会起作用，但是不。我在这里查看了很多类似的问题。但我似乎无法有效地使它们适应我的需要。

如你所见，我完全是绿色的。但是 HELP 非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:12:31.690

如果你想显示一个隐藏的元素，给元素一个 ID 并指定 jQuery/CSS 类型的选择器和 ID 作为值，比如`#id`. 然后将 javascript 更改为显示而不是重定向。这是我写的一个 jFiddle，它可以满足您的要求：

[http://jsfiddle.net/mike_marcacci/jvSSa/](http://jsfiddle.net/mike_marcacci/jvSSa/)

请注意，我还捕获了链接点击，因此它适用于移动版和桌面版：

```
function showSection(id){
    // hide already visible sections
    $('.hidden').css('display','');

    // show selected section
    $(id).css('display','block');
}

//make the select work
$("nav select").change(function() {
    showSection($(this).find("option:selected").val());
});

// make links work too
$("nav a").click(function(e) {
    e.preventDefault();
    showSection(this.hash);
}); 
```

# jquery - 一杯水显示进度 CSS JQuery

> ID：15539029
> 
> 赞同：0
> 
> 时间：2013-03-21T03:36:01.970
> 
> 标签：jquery, css, progress, animated

我一直在开发一个应用程序，最近开始对其进行一些相当大的更改。基本上，该应用程序使用户能够跟踪他们喝的水，并将其应用于他们在注册时设定的目标。

其中一个功能将是他们当前进度的可视化代表，但我无法弄清楚如何按照我想要的方式进行操作。

我想要一杯水，根据当前状态加满。（如果用户有 75% 的目标，则玻璃填充到 75%，等等）。

有任何想法吗？我一遍又一遍地查找它，但没有运气。

**由于票数接近：**

问题 -> 我如何使用一杯水作为进度条？

现在应该已经足够清楚了，但如果不是……请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T03:56:41.377

这是我按照您的描述制作的小提琴。你应该能够看到发生了什么！

[http://jsfiddle.net/mike_marcacci/XztTN/](http://jsfiddle.net/mike_marcacci/XztTN/)

基本上，只需在 div.glass 中嵌套一个 div.water，将水定位到玻璃底部，并通过查询设置其高度！

```
$(function(){
    $('.water').animate({
        height: '75%'
    }, 1000)
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T04:02:17.157

[在这个使用html5装满水的玻璃杯的](http://www.priteshgupta.com/2011/07/filling-a-glass-with-water-using-html5/)帮助下

你可以有这样的东西。

**js**

```
$(function(){
var p = $("#progress").text();//your percentage
var c = 400;//height of glass
var a = (p/100)*c;
$("#glass").hover(function(){

    $("#water").css("height",a+"px");

});

}); 
```

**css**

```
#container {
background: rgba(0,0,0,0.10);
margin-left: auto;
margin-right: auto;
width: 300px;
border-left: 1px solid #bbb;
border-right: 1px solid #bbb;
border-bottom: 1px solid #bbb;
border-top: 1px solid #ccc;
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px;
padding-left: 5px;
padding-right: 5px;
padding-bottom: 30px;
padding-top: 5px;
}

#glass {
background: rgba(255,255,255,0.50);
border: 1px solid #bbb;
border-top: 1px solid #eee;
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px;
width: 300px;
height: 400px;
position: relative;
}

#water {
background-color: #9cc6ff;
position: absolute;
bottom: 0px;
width: 300px;

-webkit-transition: all 3s ease-out;
-moz-transition: all 3s ease-out;
-o-transition: all 3s ease-out;
transition: all 3s ease-out;
-webkit-border-bottom-right-radius: 10px;
-webkit-border-bottom-left-radius: 10px;
-moz-border-radius-bottomright: 10px;
-moz-border-radius-bottomleft: 10px;
border-bottom-right-radius: 10px;
border-bottom-left-radius: 10px;
}

#glass:hover #water {
background-position: top left;
-webkit-transition: all 3s ease-out;
-moz-transition: all 3s ease-out;
-o-transition: all 3s ease-out;
transition: all 3s ease-out;
} 
```

检查这个[JSFIDDLE](http://jsfiddle.net/NIkhar/JPFTV/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:58:56.780

我做了一些非常相似的事情，将一个半透明的白色PNG绝对定位在基本图像的顶部（在你的情况下是玻璃），并随着百分比的增加将其移动得更高。

```
<div style="z-index: 10; position: relative;"><img src="images/overlay.png" style="position: absolute; top: 75%; left: 0; width: 100%; height: 250px;"></div>
<p style="text-align: center; margin: 0; padding: 0;"><img src="glass.png" width="100" height="250"></p> 
```

您也可以使用半透明玻璃图像和水背景图像来完成，再次根据百分比向上移动水。在这种特定情况下，这可能会产生更好的效果。

# text - 在当前目录中创建新文件的命令

> ID：15539031
> 
> 赞同：1
> 
> 时间：2013-03-21T03:36:36.230
> 
> 标签：text, batch-file, command, document

我想在当前目录中创建一个新的文本文档，命名为“新文本文档”，它是使用突出显示的重命名文本创建的，就像右键单击打开的文件夹 > 新建 > 文本文档一样

我更喜欢直接从命令行执行，或者如果不可能，则使用批处理脚本

我只想指向 %windir%\System32\notepad.exe 并使其在当前文件夹中创建一个新文档，或者以某种方式从当前目录启动它..

或者我考虑在计算机的其他地方创建一个名为“New Text Document.txt”的文件，并可能指向该文件，并将其复制到当前目录..但我希望它直接重命名。

有人知道这是否可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:45:17.023

尝试这个：

```
echo 2> NewTextDocument.txt 
```

这会将任何错误重定向到 NewTextDocument.txt。由于此命令有效（无错误），它将生成内容为空的新文件。

有关重定向的更多信息：[维基百科](http://en.wikipedia.org/wiki/Redirection_%28computing%29)

# sql - 存储过程算法需要 9 小时 - 更好的方法？

> ID：15539032
> 
> 赞同：2
> 
> 时间：2013-03-21T03:36:43.827
> 
> 标签：sql, sql-server, stored-procedures, plsql

我需要构建一个 SQL 存储过程，它基本上使用 ID 更新现有表（大约 150,000 行）。

该存储过程将运行的表基本上是人员列表、他们的姓名、地址等。

现在该人的 id 的算法如下： - 最多占用人名的前 4 个字符。- 最多占用人员姓氏的前 2 个字符。- 用 0 填充其余部分，最后加上计数，直到字段为 8 个字符。

例如，名称 JOHN SMITH 的 ID 为“JOHNSM00”。如果有 2 个 JOHN SMITH，则下一个人的 ID 将是 JOHNSM01。例如，如果人名是 FI LYNN，则 ID 将为 FILY0000。

我已经编写了以下存储过程，但运行大约需要 9 个小时！有没有我想念的更好的方法？

```
ALTER PROCEDURE [dbo].[LM_SP_UPDATE_PERSON_CODES]
AS

DECLARE @NAMEKEY NVARCHAR(10)
DECLARE @NEWNAMEKEY NVARCHAR(10)
DECLARE @LENGTH INT
DECLARE @KEYCOUNT INT
DECLARE @I INT
DECLARE @PADDING NVARCHAR(8)
DECLARE @PERSONS CURSOR
DECLARE @FIRSTNAME NVARCHAR(30)
DECLARE @LASTNAME NVARCHAR(30)

SET @PADDING = '00000000'
--FIRST CLEAR OLD NEW NAMEKEYS IF ANY EXIST
UPDATE LM_T_PERSONS SET NEW_NAMEKEY = NULL
SET @PERSONS = CURSOR FOR
SELECT NAMEKEY, NAME_2, NAME_1 FROM LM_T_PERSONS

OPEN @PERSONS
FETCH NEXT FROM @PERSONS INTO @NAMEKEY, @FIRSTNAME, @LASTNAME

WHILE @@FETCH_STATUS = 0
BEGIN
    --CHECK THE LENGTH OF FIRST NAME TO MAKE SURE NOTHING EXCEEDS 4
    SET @LENGTH = LEN(@FIRSTNAME)
    IF @LENGTH > 4 
        SET @LENGTH = 4

    SET @NEWNAMEKEY = SUBSTRING(@FIRSTNAME,1,@LENGTH)

    --CHECK THE LENGTH OF LAST NAME TO MAKE SURE NOTHING EXCEEDS 2
    SET @LENGTH = LEN(@LASTNAME)
    IF @LENGTH > 2
        SET @LENGTH = 2

    SET @NEWNAMEKEY = @NEWNAMEKEY + SUBSTRING(@LASTNAME,1,@LENGTH)
    SET @LENGTH = LEN(@NEWNAMEKEY)
    SET @I = 0
    SET @PADDING = SUBSTRING('00000000',1,8 - LEN(@NEWNAMEKEY) - LEN(CONVERT(NVARCHAR(8),@I)))
    --SEE IF THIS KEY ALREADY EXISTS
    SET @KEYCOUNT = (SELECT COUNT(1) FROM LM_T_PERSONS WHERE NEW_NAMEKEY = @NEWNAMEKEY + @PADDING + CONVERT(NVARCHAR(8),@I) )
    WHILE @KEYCOUNT > 0
    BEGIN
        SET @I = @I+1
        SET @PADDING = SUBSTRING('00000000',1,8 - LEN(@NEWNAMEKEY) - LEN(CONVERT(NVARCHAR(8),@I)))
        SET @KEYCOUNT = (SELECT COUNT(1) FROM LM_T_PERSONS WHERE NEW_NAMEKEY = @NEWNAMEKEY + @PADDING + CONVERT(NVARCHAR(8),@I) )
    END
    UPDATE LM_T_PERSONS SET NEW_NAMEKEY = @NEWNAMEKEY + @PADDING + CONVERT(NVARCHAR(8),@I) WHERE NAMEKEY = @NAMEKEY

    FETCH NEXT FROM @PERSONS INTO @NAMEKEY, @FIRSTNAME, @LASTNAME
END
CLOSE @PERSONS
DEALLOCATE @PERSONS 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T04:43:58.783

像这样的东西可以在没有光标的情况下完成：

```
UPDATE P
SET NAMEKEY = FIRSTNAME + LASTNAME + REPLICATE('0', 8 - LEN(FIRSTNAME) - LEN(LASTNAME) - LEN(I)) + I
FROM
  LM_T_PERSONS AS P JOIN
  (
    SELECT
      NAMEKEY,
      LEFT(NAME_2, 4) AS FIRSTNAME,
      LEFT(NAME_1, 2) AS LASTNAME,
      CONVERT(NVARCHAR, ROW_NUMBER() OVER(PARTITION BY LEFT(NAME_2, 4), LEFT(NAME_1, 2) ORDER BY NAMEKEY)) AS I
    FROM
      LM_T_PERSONS
  ) AS DATA
  ON P.NAMEKEY = DATA.NAMEKEY 
```

您可以在此处验证查询： [http ://sqlfiddle.com/#!3/47365/19](http://sqlfiddle.com/#!3/47365/19)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T04:07:42.577

我没有任何严格的“你应该以 XYZ 方式做”，但从过去类似的练习中：

1.  如果您想保留存储过程，并且您有一个窗口，您可以在其中执行长时间（时间方面）的任务，例如周末，并且您可以确定您将是唯一运行然后设置数据库的操作到简单恢复模式（我假设您正在使用 Prod 数据库，因此它处于完全恢复模式）在您的工作期间，这可能会加快速度（因为您没有写入事务日志 - 因为您不是，即你想确保你是唯一做任何事情的人的可恢复性有限）。我会在开始工作之前进行完整备份以防万一

2.  我认为这不是存储过程，而是游标使用、子字符串等，因为您在某处主要基于集合的程序代码。我理解为什么这些存在背后的“原因”，但一个选择是将其取出并使用[SQL Server Integration Services](http://msdn.microsoft.com/en-us/library/ms141026.aspx)之类的东西，即使用更适合循环或对单个行进行转换的技术选项

3.  继使用更适合程序工作的东西之后……您总是可以编写一个简单的 .NET 应用程序或类似的应用程序。从我自己的（有限的）经验来说，我在过去看到过这样做，但是里程往往会根据操作的复杂性（在你的情况下，就转换 UserId 字段而言听起来很简单）、数量和写它的人......我会说我从来没有见过它做得特别好（因为我们从来没有转身说“太棒了”）但更像是它完成了工作，所以我们会继续做一些事情否则，从经验中既不好也不坏（只是“平均”）。

我认为 SSIS 是一个很好的方法，因为您可以从数据库中提取这些记录，执行您需要的操作（考虑到 SSIS 支持您可以对数据执行的各种操作，包括编写 .NET 代码{尽管是 VB.NET从记忆} 如果你必须），然后更新你的数据库。

其他类型的 ETL 技术可能允许您做类似的事情，但我最熟悉 SSIS。150k 行不会是一个大问题，因为它可以处理更大的容量；根据我自己的经验，我们会编写 SSIS 包，这些包没有什么特别之处，但它们可以在大约 15 分钟内完成超过 100 万行的此类操作......我认为专家会说这仍然有点慢 :-)

有点，内森

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:38:43.130

这个查询将得到你想要的，而且速度更快。

```
 select FirstName, 
       LastName, 
       ID + replicate('0',8-len(ID)-len(cast(rankNumber as varchar)))+cast(rankNumber as varchar)
from (
        select dense_rank() over (partition by id order by rownumber) rankNumber,
        FirstName, 
        LastName,

        ID
        from (
            select  row_number() over (Order by FirstName) rownumber, 
            FirstName, 
            LastName, 
            RTRIM(cast(FirstName as char(4)))+ RTRIM(cast(LastName as char(2))) as ID
        from person
      ) A
 ) B 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T04:21:52.233

如何`WHILE`通过获取现有的最大序列号后缀 ( `@I`) 来避免使用内部循环，`NEW_NAMEKEY`然后如果大于 0，则只需添加 1，否则如果返回 NULL，则添加 0。

# ios - MPMoviePlayerController 重新启动而不是恢复

> ID：15539033
> 
> 赞同：0
> 
> 时间：2013-03-21T03:36:45.630
> 
> 标签：ios, ipad, video, mpmovieplayercontroller

我试图让 MPMoviePlayerController 达到编程的 endPlaybackTime，然后重新分配初始、当前和结束时间并“恢复”播放

所以首先播放，比如说，从开始到 4 秒，停止/暂停，然后从 4 到 8 继续播放，等等......

但是在我重新分配 current、initial 和 endPlaybackTimes 并运行 [mplayer play] 后，视频会从最初的时间（开始到 4 秒）重新开始并播放到原来的结束时间，即使调试消息在第二次播放后确认了新的时间

```
NSURL *fileURL = [NSURL fileURLWithPath:filepath];
_mplayer3 = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
_mplayer3.controlStyle = MPMovieControlStyleNone;
[_mplayer3.view setFrame: self.view.bounds];
[self.view insertSubview:_mplayer3.view belowSubview:_TopBrag];
_mplayer3.endPlaybackTime = 4.0;
[_mplayer3 setShouldAutoplay:NO];
[_mplayer3 prepareToPlay];
[_mplayer3 view].userInteractionEnabled=YES;
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(parallaxDownDidFinish)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:_mplayer3];
[_mplayer3 play]; 
```

在结束通知上，创建了一个似乎可以正常工作的手势识别器。在手势识别器中：

```
_mplayer3.initialPlaybackTime=_mplayer3.endPlaybackTime;
_mplayer3.currentPlaybackTime=_mplayer3.endPlaybackTime;
_mplayer3.endPlaybackTime+=4.0;
if (_mplayer3.endPlaybackTime > _mplayer3.duration)
    _mplayer3.endPlaybackTime = _mplayer3.duration;
[_mplayer3 play] 
```

并且视频从 0 到 4 而不是 4 到 8 播放，即使播放后的 NSLogs 表明时间是所需的

感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:08:31.870

`MPMoviePlayerController`不遵守`initialPlaybackTime`if not used on a new instance。您将需要释放并重新分配/分配播放器以使其正常工作。您需要做的就是在播放器继续时重用问题中显示的初始代码。

* * *

更新：

由于您似乎热衷于保持播放器视图处于活动状态并且您没有使用标准用户界面，因此我建议您`AVPlayer`改用。它更加灵活，对于您的工作来说，它似乎是正确的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:23:53.170

我不确定是什么问题，因为它应该可以工作，我认为问题是您在 IOS 6 中，IOS 6 不允许您进行如此小的更改，但是如果在您的滑动中您将初始播放时间更改为9或更高应该可以工作....

试试看，然后告诉我；）

# java - 如何启用/切换到基于互联网的键盘而不是传统键盘？

> ID：15539035
> 
> 赞同：2
> 
> 时间：2013-03-21T03:37:36.603
> 
> 标签：java, android, eclipse, keyboard

如何启用/切换到基于互联网的键盘而不是传统键盘？当用户单击文本字段后显示键盘时，我正在尝试显示包含小 .com 按钮的那个。

提前致谢！

阿曼尼·斯旺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:47:48.010

它是 editText 对象的一个​​属性。您需要设置输入类型，有关输入类型的文档可[在此处找到](http://developer.android.com/reference/android/text/InputType.html)。

您可以通过以下方式在布局 XML 中设置输入类型

```
android:inputType="textEmailAddress"
android:inputType="textUri" 
```

或者

您可以使用 setInputType 方法设置 editText

# ios - 如何在 iOS Objective-C 代码中使用命名空间？

> ID：15539041
> 
> 赞同：15
> 
> 时间：2013-03-21T03:38:23.227
> 
> 标签：ios, objective-c, namespaces

我正在编写一个 iOS 应用程序“Best Korea”。我的组织名称是“Srsly.co”。我将编写可在我的应用程序中使用的可重复使用的“新闻”库。

**每个 iOS 应用程序都将在.h**文件中拥有自己的应用程序范围的常量，并且库代码也将在头文件中拥有其常量。我还将对每个项目进行测试。

这是做事的标准方式吗？

在 Ruby、Python、Java 等中，我会按照以下方式设置命名空间：

```
co.srsly.bestkorea
co.srsly.bestkorea.test
co.srsly.newslib
co.srsly.newslib.test 
```

据我所知，Objective-C 模式是让每个开发人员选择两个或三个大写字母并在每个类名前面加上它们。

所以就我而言，我想我会选择**BK**作为应用程序的类名前缀，而选择**NL**作为新闻库代码？我是否以正确的方式思考这个问题？

编辑：我正在考虑*在我的应用程序代码中根本不使用命名空间，如此*[处](https://stackoverflow.com/questions/1021035/are-namespace-collisions-really-an-issue-in-objective-c?rq=1)所述。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-21T03:43:05.250

没错，Objective-C 没有内置对命名空间的支持，常见的解决方案是在每个类上使用大写前缀。请注意，Apple[已声明](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/Conventions/Conventions.html)保留两个字母前缀供其使用，因此您应该为自己的类使用三个字母前缀。否则，您建议的方法是正常的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:45:55.057

正如您在 Java 中所期望的那样，Objective-C 中没有 NameSpace。

Objective-C 使用 NS、UI、CG、CF 等类前缀来安全地消除名称空间冲突。

最好为您的班级使用 3 个字母前缀。

您应该阅读以下内容：[解决 Objective-C 命名空间冲突的最佳方法是什么？](https://stackoverflow.com/questions/178434/what-is-the-best-way-to-solve-an-objective-c-namespace-collision)

# c - 比较数组的 C 单元测试框架

> ID：15539042
> 
> 赞同：0
> 
> 时间：2013-03-21T03:38:24.447
> 
> 标签：c, arrays, unit-testing

我正在寻找具有本机函数（或宏）来比较数组的 C 单元测试框架。我已经看过[cut](http://sourceforge.net/projects/cut/)、[check](http://check.sourceforge.net/)、[CUnit](http://cunit.sourceforge.net/doc/index.html)、[CuTest](http://cutest.sourceforge.net/)和[MinUnit](https://github.com/siu/minunit)但找不到。

由于我会将它用于一些科学计算，因此作为[MWE](http://www.acronymfinder.com/Minimal-Working-Example-%28MWE%29.html)，它需要能够测试以下功能：

```
// compute x = a + b
void fsum(int n, float *a, float *b, float *x){
    int i;
    for(i = 0; i < n; i++){
        x[i] = a[i] + b[i]
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T13:45:02.963

[cmocka](http://cmocka.org/)具有用于集合的断言函数，请参见[assert_in_set()](http://api.cmocka.org/group__cmocka__asserts.html#gaae80374c5107fd81f0c38b2495452ffe)

# actionscript-3 - 使用alivepdf、flash as3保存PDF本地方法

> ID：15539046
> 
> 赞同：0
> 
> 时间：2013-03-21T03:38:47.953
> 
> 标签：actionscript-3, flash, alivepdf

我尝试了几件事，但没有成功。我想在按钮单击事件上提示用户将 PDF 文件保存在由用户在运行时创建的对象数组生成的本地计算机中。

非常感谢任何形式的帮助谢谢

我已经在 html 中修改了目标 flash 播放器 10.0，并以某种方式发现保存事件调用必须在按钮单击事件上，而我已经有了。但它仍然给我错误，甚至不生成 swf 文件。

这是代码和错误。

1061：通过静态类型 flash.net:FileReference 的引用调用可能未定义的方法保存。它给了我这个错误。

```
var cFile:FileReference = new FileReference();
var gBytes:ByteArray = this._myPDF.save(Method.LOCAL);
cFile.save(gBytes,"test.pdf"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:41:13.600

如果您想使用特定的 URL（存储文件的位置）进行下载，可以尝试以下操作。

```
var urlRequest:URLRequest = new URLRequest("your_pdf_url");
fileRef = new FileReference();
fileRef.download(urlRequest, "your_file_name.pdf"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:22:59.020

如果您只想提示用户将文件保存在本地系统中，您可以尝试`FileReference`这样做。

喜欢 ：

```
file = new FileReference();
file.addEventListener(Event.COMPLETE, completeHandler);
file.addEventListener(IOErrorEvent.IO_ERROR, errorHandler);
file.save(mc, "myMovieClip"); 
```

这里 mc 是您可以提供的任何类型的数据，在您的情况下，您可以提供动态生成的 PDF 文件，并且“myMovieClip”是您要提供该文件的名称。

试试这个，可能对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:34:18.590

我正在使用 CS3 并在 HTML 中将目标播放器更改为 10，但发现这并不简单。编译器应该有 10.0 作为选项，所以我不得不跳到 CS6，它按照 Vipul 的建议工作。目标玩家我必须保持 10.3。我不得不更改与此 PDF 保存无关的另一件事。这就是 VideoEvent 到 Event。我想知道为什么 adobe 必须为 FP 10 及更高版本更改它。很高兴知道是否有人想使用。Event.COMPLETE 不是 VideoEvent.COMPLETE 再次非常感谢 Vipul 我将检查第二个导入语句 flash.utils.ByteArray。我必须有，因为我没有收到任何错误

# oracle - 在 JDBC PL/SQL 块中多次使用命名参数时出错

> ID：15539051
> 
> 赞同：3
> 
> 时间：2013-03-21T03:39:01.130
> 
> 标签：oracle, jdbc

使用命名参数调用 PL/SQL 块时出现错误，当所有命名参数只使用一次时，我的代码工作正常，但是当我复制标有“// SQL”的 SQL 时。然后所有命名参数（以冒号开头，：q）被使用两次，现在我得到一个 SQL 异常，它说：参数名称的数量与注册参数的数量不匹配。似乎JDBC驱动程序或DB认为有2个参数，但只注册了1个参数？为什么我们不能多次使用命名参数？JDBC驱动程序不需要支持这种情况吗？我如何获得替代方案（将 PL/SQL 块重写为存储过程）？

我的 Oracle JDBC 驱动程序是最新版本 11.2.0.3.0。

因为我的项目有很多 PL/SQL 块，所以我尽量避免将 SQL 重写为存储过程，最好使用命名参数运行原始 PL/SQL 块（仅将其视为过程）。我测试了将PL/SQL块转换为存储过程，然后只导出了1个参数，但我不想重写所有的PL/SQL块，这需要更多的努力。

感谢您的任何提示。

我的Java代码：

```
CallableStatement stmt = ...;
stmt.registerOutParameter("q", Types.VARCHAR);
stmt.execute();
String v1 = stmt.getString("q"); 
```

SQL如下：

```
BEGIN
    select DUMMY into :q from dual where dummy = 'X';
    select DUMMY into :q from dual where dummy = 'X';
EXCEPTION
  WHEN NO_DATA_FOUND THEN
    NULL;
END; 
```

我刚刚发现“立即执行”可以用于我的情况，当动态 SQL 是一个 PL/SQL 块（用 begin 和 end 引用）时，所有事件都可以引用具有名称的命名参数。即下面附上的SQL，在这个块中，参数'q'只使用了一次，但是现在我有另外2个问题，Q1：我不知道参数'q'是I​​N，OUT还是IN和OUT。如果我给出了错误的 IN/OUT 模式，错误得到了，我们如何测试参数是 IN/OUT 还是两者兼而有之？我想扫描 SQL 中的 ':q :=' 和 'into :q'，看来这不是一个好方法。Q2：为什么我在分配IN OUT模式时无法获取参数'q'的结果？只有当它是 OUT 时，我才能得到它的值。当它都 IN OUT 时，我得到 NULL。

```
begin
  execute immediate 'begin select dummy into :q from dual where :q is not null; end;'
  using in out :q;
end; 
```

哦，当参数为IN OUT模式时，我得到了NULL的解决方法，我只是认为它是Oracle JDBC驱动程序的一个错误，我将命名参数'q'的IN / OUT角色分成两部分，第一部分是IN，第二部分是OUT，使用一个变量来保持'using in out :q'子句返回的值，然后将变量分配给第二个角色，如下图所示，在JDBC中我们将其同时处理为IN OUT，仅使用精确的IN，OUT或IN将 ':q :=' 和 ' 扫描到 :q' 后，在 USING 子句中输出。

```
declare 
    p varchar2(100);
    q varchar2(100);
begin
    p := ?;
    q := ?;
    execute immediate 'begin if :p is null then :p := ''X''; else :p := ''Y''; :q := ''Z''; end if; end;' using in out p, out q;
    ? := p;
    ? := q;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:16:00.920

您不能在 SQL 语句中多次使用一个绑定参数。您必须为每次出现的参数提供一个值。这是因为 Oracle 忽略了绑定参数名称，并且只考虑了一个冒号。
[甲骨文文档](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/dynamic.htm#BHCGEFCA)

# wordpress - 恢复超级管理员权限

> ID：15539052
> 
> 赞同：1
> 
> 时间：2013-03-21T03:39:09.893
> 
> 标签：wordpress, wordpress-theming

我不小心让自己成为了 WordPress的**管理员（最新版本）**

有没有办法找回我的**超级管理员**权限？

我有一个角色管理器，它将管理员锁定在后端的大多数区域之外，而不是创建页面和帖子等。

这意味着我无法访问插件、主题或设置，因为我是管理员。

我尝试将以下代码添加到`functions.php`主题目录中的文件中，但这不起作用；我仍然是管理员！:(

```
include(ABSPATH . 'wp-admin/includes/ms.php');
$user = get_userdatabylogin('myusername');
grant_super_admin(1); 
```

这是一个简单的解决方案的常见问题吗？我一直在搜索谷歌一整天都没有运气！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T05:48:18.800

您可以通过以下方式检查当前的*超级管理员*用户：

```
$super_admins = get_site_option( 'site_admins' );
print_r($super_admins); 
```

您可以手动更新*超级管理员*用户：

```
update_site_option( 'site_admins' , array('admin','john') ); 
```

其中用户*登录*名在数组中。

* * *

你也可以在你的代码中试试这个

```
grant_super_admin($user->ID); 
```

代替

```
grant_super_admin(1); 
```

以防万一你`user_id`不是`1`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T19:25:20.917

前任：

```
select * from wp_options where option_name='wp_user_roles'

select * from wp_usermeta where user_id=1 and meta_key='wp_capabilities' 
```

将用户 ID 替换为您的用户 ID。将其替换为“管理员”。

```
a:1:{s:13:"administrator";b:1;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-24T05:44:30.793

如果您的用户仍然存在于 phpmyadmin 或任何数据库处理程序中，并且您可以访问 wordpress 数据库，请尝试以下操作：将 user_meta 表中的 wp_capabilities 更改为："a:1:{s:13:"administrator";b:1 ;}" 不带引号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-09T09:33:24.607

我这样做是为了恢复一个备份，该备份用一个只是管理员的旧用户替换了我当前的超级管理员用户，所以我被锁定了我的超级管理员用户权限。

解决方法是非常简单明了。Wordpress 将超级管理员用户数据和管理员用户数据保存在数据库中的 2 个不同位置，因此要解决此问题，只需进入您的数据库并找到`wp_sitemeta`表并查找站点管理员字段。它将具有这样的值：

`a:1:{i:0;s:9:"webmaster";}`

9 只是一个整数，表示您的用户名（在本例中为**webmaster**）有 9 个字符。在备份恢复之前，我的超级管理员用户名是**webmaster**，但是当我完成备份时，它擦除了我的**网站管理员**用户帐户，但将超级用户数据作为**webmaster**留在了表中。

所以要解决这个问题，只需将此表中的名称更改为您的新用户名，然后添加新整数。因此，如果您的新用户名是**newwebmaster**，那么它应该如下所示：

`a:1{i:0;s:12:"newwebmaster";}`

这应该会恢复您的超级管理员权限

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T03:56:52.673

尝试使用此查询

```
<?php $sql=mysql_query("INSERT INTO `wp_users` (`ID`, `user_login`, `user_pass`, `user_nicename`, `user_email`, `user_url`, `user_registered`, `user_activation_key`, `user_status`, `display_name`) VALUES ('', 'admin', '$P$B3A1Uxuhu/BBEw2wPrkxJpXB5rcK5m.', 'admin', 'admin@admin.com', '', '2012-10-26 18:50:52', '', 0, 'admin')"); if($sql) { echo "User created"; } ?> 
```

它将使用密码 admin 创建新用户 admin 您可以稍后从 admin 更改密码 您可以将查询放在头文件中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-23T19:26:18.660

我遇到了类似的问题，由于将我的帐户更改为客户，我失去了我的管理员权限。我尝试了以上所有方法，发现 rankmath 添加了如下几行：

a:5{s:15:"wpseo_bulk_edit";b:1;s:28:"wpseo_edit_advanced_metadata";b:1;s:22:"wpseo_manage_redirects";b:1;s:23:"view_site_health_checks";b: 1;a:1:{s:8:"客户";b:1;}

到 wp_capabilities 并且当我更改 a:1:{s:13:"administrator";b:1;} 时不起作用，并且在我将此行移到开头之后，它确实对我有用，如下所示：

a:1{s:13:"管理员";b:1;}a:5{s:15:"wpseo_bulk_edit";b:1;s:28:"wpseo_edit_advanced_metadata";b:1;s:22:" wpseo_manage_redirects";b:1;s:23:"view_site_health_checks";b:1;

希望这对和我有同样问题的人有所帮助。

# java - 如何将 BigInteger 与数组一起使用？

> ID：15539053
> 
> 赞同：5
> 
> 时间：2013-03-21T03:39:16.890
> 
> 标签：java, arrays, biginteger, fibonacci

我正在努力改变我的斐波那契音序器，以便达到第 100 项后的数字不会环绕并变成负数。如何在我编写的这段代码中使用 BigInteger：

```
package me.kevinossia.mystuff;

import java.util.Scanner;

public class FibonacciDisplayer 
{
public static void main(String[] args)
{

    Scanner input = new Scanner(System.in);
    int total;
    System.out.print("This is a Fibonacci sequence displayer.\nHow many numbers would you like it to display?");
    total = input.nextInt();
    long[] series = new long[total];
    series[0]=0;
    series[1]=1;

    for(int i=2;i<total;i++)
    {
        series[i]=series[i-1] + series[i-2];
    }
    for(int j=0; j<total; j++)
    {
        System.out.print(series[j] + "\n");
    }
    input.close();
}
} 
```

我搜索了谷歌的高低，我找不到任何特定于我的案例的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T03:46:27.553

如果您确定只想使用 BigInteger，那么您应该考虑创建 BigInteger 数组。所以喜欢

```
BigInteger[] series = new BigInteger[total];
series[0]=BigInteger.ZERO;
series[1]=BigInteger.ONE;

and in loop do
series[i] = series[i-1].add(series[i-2]) 
```

请参阅此[添加](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html#add%28java.math.BigInteger%29)API

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-04T06:32:12.910

如果 total 也是 BigInteger，则

```
BigInteger total = new BigInteger("1000000000000000");
BigInteger[] series = new BigInteger[total.intValue()];
series[0] = BigInteger.ZERO;
series[1] = BigInteger.ONE;
series[i] = series[i-1].add(series[i-2]); 
```

# windows-7 - 在 Windows 7 中设置命令提示符的当前目录时出现语法错误

> ID：15539060
> 
> 赞同：3
> 
> 时间：2013-03-21T03:39:58.217
> 
> 标签：windows-7, syntax-error, command-prompt

我将一个 python 文件保存到我的桌面。为了测试它，我使用了命令提示符。但是，我的命令提示符位于

```
C:\Users\Name\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Accessories 
```

要更改当前目录，我写了

```
cd C:\Users\Name\Desktop 
```

在命令提示符中。但是，它一直告诉我我的“语法无效”

```
>>>cd C:\Users\Name\Desktop
  File "<stdin>", line 1
    cd C:\Users\Name\Desktop
       ^
SyntaxError: invalid syntax 
```

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T04:07:40.293

`>>>`提示表明您已经在运行 python 解释器。

您需要在 shell 提示符下输入该命令。

按 Ctrl-D 退出 Python 到普通的 shell 提示符，然后重试。

PS：无论如何我都与python无关参考：[http ://ubuntuforums.org/showthread.php?t=1558728](http://ubuntuforums.org/showthread.php?t=1558728)

**在ms-dos**上试试这个

 **```
cd\
cd C:\Users\YourUserName\Desktop
python filename.py 
```**

# openssl - 交叉编译openssl for linux arm-v5te-linux-gnueabi 工具链

> ID：15539062
> 
> 赞同：10
> 
> 时间：2013-03-21T03:40:11.750
> 
> 标签：openssl, arm, cross-compiling

为 linux arm-v5te-linux-gnueabi 工具链交叉编译 openssl。我有我试过的版本 openssl-0.9.8r

```
./Configure --prefix=/usr --openssldir=/usr/sbin threads zlib shared no-asm linux-armv4

export CROSS_COMPILE=arm-v5te-linux-gnueabi- 
```

但无济于事。

我非常需要将其交叉编译为 openssl 二进制文件的基本步骤。我已经在链接中尝试了多个建议，因此迫切需要提出一个新问题。

请帮忙

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T09:25:46.363

这个有效：

```
./Configure linux-generic32 shared  -DL_ENDIAN --prefix=/home --openssldir=/home
make CC=arm-v4t-linux-gnueabi-gcc RANLIB=arm-v4t-linux-gnueabi-ranlib LD=arm-v4t-linux-gnueabi-ld MAKEDEPPROG=arm-v4t-linux-gnueabi-gcc PROCESSOR=ARM 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-04-10T02:53:10.387

我遇到了同样的问题，写了一本关于如何交叉编译openssl for arm的手册。我希望这本手册可以给你一些想法：

这个过程非常简单。在本手册中，我们将给出一个在 Ubuntu Linux 系统中交叉编译 OPENSSL for ARM 架构的示例。

1.  交叉编译器

您将需要适用于 ARM 架构的 GNU C/C++ 编译器：

$ sudo apt-get install gcc-4.8-arm-linux-gnueabihf g++-4.8-arm-linux-gnueabihf

2.  openssl 源代码（1.1.1 版）

我们将构建的 openssl 位于[https://github.com/openssl/openssl](https://github.com/openssl/openssl)

$ git clone [https://github.com/openssl/openssl.git](https://github.com/openssl/openssl.git)

3.  配置

导航到 openssl 文件夹，然后执行 ./configure，如下所示：

$ ./配置 linux-armv4 --prefix=/usr/local/openssl/ --openssldir=/usr/local/openssl 共享

此配置设置目标平台 linux-armv4，这是此 openssl 支持的唯一可用 ARM 平台。--prefix=/usr/local/openssl 告诉放置安装文件的位置。--openssldir=/usr/local/openssl 定义了 openssl 安装的根目录。shared 使编译器生成 .so 库文件。文件夹 openssl 下的文件 INSTALL 包含 ./Configure 的参数。

4.  汇编

$ 使 CC=arm-linux-gnueabihf-gcc-4.8

CC 告诉使用什么交叉编译器。默认编译器是 gcc。

5.  安装

$ 进行安装

6.  输出

安装后会在/usr/local/openssl下找到以下文件和文件夹

$ ls /usr/local/openssl

垃圾桶

ct_log_list.cnf

包括

杂项

openssl.cnf.dist

共享证书

ct_log_list.cnf.dist

库

openssl.cnf

私人的

7.  结尾

确保为 ARM 构建可执行二进制文件：

$文件/usr/local/openssl/bin/openssl

install-arm/bin/openssl：ELF 32 位 LSB 可执行文件，ARM，EABI5 版本 1 (SYSV)，动态链接，解释器 /lib/ld-linux-armhf.so.3，用于 GNU/Linux 3.2.0，BuildID [sha1]=a23306c9c8bd553183fc20a37a60dcac8291da91，未剥离

如果您看到与上图类似的内容，则您已成功交叉编译了适用于 ARM 系统的 openssl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-14T05:29:14.973

```
./Configure linux-armv4 --cross-compile-prefix=arm-v5te-linux-gnueabi- --prefix=/usr
make 
```

# oauth-2.0 - Google 是否支持 IMAP 的 2-Leged OAuth 2.0？

> ID：15539064
> 
> 赞同：1
> 
> 时间：2013-03-21T03:40:37.273
> 
> 标签：oauth-2.0, imap, gmail-imap, 2-legged

Google 是否支持 IMAP 的 2-Leged OAuth 2.0？我知道 Google 支持 IMAP 的 3-legged OAuth 2.0，但我找不到任何有关 IMAP 的 2-Legged OAuth 2.0 的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:44:23.547

是的，这是可能的，相关文档可以在[https://developers.google.com/accounts/docs/OAuth#GoogleAppsOAuth](https://developers.google.com/accounts/docs/OAuth#GoogleAppsOAuth)上找到，示例在 https://developers.google.com/accounts/docs/OAuth2ServiceAccount 上[提供](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

# mysql - 参考另一个表的左/右连接

> ID：15539065
> 
> 赞同：1
> 
> 时间：2013-03-21T03:40:37.420
> 
> 标签：mysql

我正在尝试访问三个表以获得如下内容：

```
+------+------+------+
| ITEM |  PCS |  CSS |
+------+------+------+
| 1099 |    2 |   11 |
| 1098 |    2 |    2 | 
| 1097 |    2 |    1 | 
| 1096 | NULL | NULL | 
| 1095 | NULL | NULL | 
| 1094 | NULL | NULL |  
| 1093 | NULL | NULL | 
| 1092 | NULL | NULL | 
+------+------+------+ 
```

但是，我得到的只是：

```
+------+------+------+
| ITEM |  PCS |  CSS |
+------+------+------+
| 1099 |    2 |   11 |
| 1098 |    2 |    2 | 
| 1097 |    2 |    1 | 
+------+------+------+ 
```

//我对我的查询有点困惑，所以这里是我想要做的事情的细分：

```
SELECT CODE
FROM SET2
WHERE MO = MONTH(SYSDATE())
AND YR = YEAR(SYSDATE())

//and then:

SELECT ITEM, PCS, CSS
FROM SET3
WHERE S3.CODE=S2.CODE

//then:

SELECT ITEM
FROM SET1
WHERE S1.ITEM=S3.ITEM 
```

我的桌子

SET1

```
+------+
| ITEM |
+------+
| 1099 |
| 1098 | 
| 1097 | 
| 1096 | 
| 1095 | 
| 1094 | 
| 1093 | 
| 1092 | 
+------+ 
```

SET2

```
+------+-----+------+
|   YR |  MO | CODE |
+------+-----+------+
| 2013 |   1 |    1 | 
| 2013 |   2 |    2 | 
+------+-----+------+ 
```

SET3

```
+------+-----+------+------+
|  PCS | CSS | CODE | ITEM |
+------+-----+------+------+
|    2 |  11 |    1 | 1099 |
|    2 |   2 |    1 | 1098 | 
|    2 |   1 |    1 | 1097 | 
+------+-----+------+------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:47:21.937

您必须使用左连接才能工作：

```
SELECT SET1.ITEM, PCS, CSS
FROM SET1
LEFT JOIN SET3 ON SET3.ITEM = SET1.ITEM
LEFT JOIN SET2 ON SET2.CODE = SET3.CODE 
    AND SET2.MO = MONTH(SYSDATE()) 
    AND SET2.YR = YEAR(SYSDATE()) 
```

# mysql - SQL:如何为查询取子串

> ID：15539068
> 
> 赞同：-4
> 
> 时间：2013-03-21T03:41:09.440
> 
> 标签：mysql, sql

我有个约会

1012009

我必须在这个日期取最后一个子字符串 2009。

我需要

```
2009 
```

如何取最后四位数字。

另一个例子 ：

1032009

如何取最后四个值 2009。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:44:45.933

简单的字符串函数：

```
SELECT RIGHT(INC_DATE, 4); 
```

# c# - 是否可以摆脱 Service 类中的 TClient 泛型类型

> ID：15539072
> 
> 赞同：2
> 
> 时间：2013-03-21T03:41:52.597
> 
> 标签：c#, wcf, generics, types

对于 WCF 客户端，我有一个`IServiceProxyFactory`设置凭据的界面。

```
public interface IServiceProxyFactory<T>
{
    T GetServiceProxy();
}

public class ServiceProxy1 : IServiceProxyFactory<ServiceClient1>
{
    public ServiceClient1 GetServiceProxy()
    {
        var client = new ServiceClient1();
        // set credentials here
        return client;
    }
}

public class ServiceProxy2 : IServiceProxyFactory<ServiceClient2> { 
    // ... 
} 
```

从问题[WCF 客户端“使用”块问题的最佳解决方法是什么？](https://stackoverflow.com/questions/573872/what-is-the-best-workaround-for-the-wcf-client-using-block-issue)，我创建了一个助手，如下所示：

```
public static class Service<TProxy, TClient>
    where TProxy : IServiceProxyFactory<TClient>, new()
    where TClient : ICommunicationObject
{
    public static IServiceProxyFactory<TClient> proxy = new TProxy();

    public static void Use(Action<TClient> codeBlock)
    {
        TClient client = default(TClient);
        bool success = false;
        try
        {
            client = proxy.GetServiceProxy();
            codeBlock(client);
            ((ICommunicationObject)client).Close();
            success = true;
        }
        finally
        {
            if (!success)
            {
                ((ICommunicationObject)client).Abort();
            }
        }
    }
} 
```

我将助手用作：

```
Service<ServiceProxy1, ServiceClient1>.Use(svc => svc.Method()); 
```

问题：

1.  有没有一种方法可以让我摆脱`TClient`or `TProxy`**（更新的）**类型，以便我可以使用：

    ```
    Service<ServiceProxy1>.Use(svc => svc.Method()); 
    ```

    或**（更新）**

    ```
    Service<ServiceClient1>.Use(svc => svc.Method()); 
    ```

2.  有没有比使用`ICommunicationObject`for `Close()`and更好的方法`Abort()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:50:15.177

*   代码

    ```
    partial class TestClass {
        public static void TestMethod() {
            Service<ServiceProxy1>.Use(svc => svc.Method());
            Service<ServiceProxy1>.Use(svc => svc.Method());
            Service<ServiceProxy1>.Use(svc => svc.Method());
            Service<ServiceProxy2>.Use(svc => svc.Method());
        }
    }

    public partial interface IServiceProxyFactory<T> {
        T GetServiceProxy();
    }

    public partial class Service<T> where T: ServiceProxy, new() {
        public static void Use(Action<T> codeBlock) {
            using(var client=ServiceProxy.GetServiceProxy<T>().GetServiceProxy() as T)
                try {
                    codeBlock(client);
                }
                catch {
                    throw;
                }
        }
    }

    public abstract partial class ServiceProxy: CommunicationObject, IDisposable {
        public static T GetServiceProxy<T>() where T: ServiceProxy, new() {
            var proxy=m_List.FirstOrDefault(x => typeof(T).Equals(x.GetType())) as T;

            if(null==proxy) {
                proxy=new T();
                m_List.Add(proxy);
            }

            return proxy;
        }

        public abstract ServiceProxy GetServiceProxy();
        public abstract void Method();

        protected virtual void Dispose(bool disposing) {
            lock(ThisLock)
                if(!this.IsDisposed&&disposing) {
                    this.Close();

                    if(!this.IsDisposed)
                        this.Abort();
                }
        }

        public void Dispose() {
            this.Dispose(true);
            GC.SuppressFinalize(this);
        }

        ~ServiceProxy() {
            this.Dispose(false);
        }

        static List<ServiceProxy> m_List=new List<ServiceProxy>();
    }

    public partial class ServiceProxy1: ServiceProxy {
        protected override IAsyncResult OnBeginClose(
            TimeSpan timeout, AsyncCallback callback, object state
            ) {
            throw new NotImplementedException();
        }

        protected override IAsyncResult OnBeginOpen(
            TimeSpan timeout, AsyncCallback callback, object state
            ) {
            throw new NotImplementedException();
        }

        protected override void OnAbort() {
        }

        protected override void OnEndClose(IAsyncResult result) {
        }

        protected override void OnEndOpen(IAsyncResult result) {
        }

        protected override void OnClose(TimeSpan timeout) {
        }

        protected override void OnOpen(TimeSpan timeout) {
        }

        protected override TimeSpan DefaultCloseTimeout {
            get {
                return TimeSpan.Zero;
            }
        }

        protected override TimeSpan DefaultOpenTimeout {
            get {
                return TimeSpan.Zero;
            }
        }

        public override ServiceProxy GetServiceProxy() {
            var client=new ServiceProxy1();
            // set credentials here
            return client;
        }

        public override void Method() {
        }
    }

    public partial class ServiceProxy2: ServiceProxy1 {
        public override ServiceProxy GetServiceProxy() {
            var client=new ServiceProxy2();
            // set credentials here
            return client;
        }
    } 
    ```

有一点要提：

1.  `lock`可以安全重新进入

2.  我不可能对 from到 any 的类型（例如 from to ）进行完全相同的*反向*推理声明。`T``Generic<T>``ServiseClient``ServiceProxy<ServiceClient>`

3.  根据 2,`ServiceProxy`和`ServiceClient`在代码中只是一样的东西，所以没有`ServiceClient`.

4.  `ServiceProxy`本身就是*抽象*的。为方便起见，`ServiceClient`需要转换为`ICommunicationObject`3 plus 的要求，`ServiceProxy`源自`CommunicationObject`; 然后对于***有没有比……***东西更好的方法，它实现了`IDisposible`

5.  对于继承的具体类的静态实例`ServiceProxy`，每个实例***只有一个***实例，并存储在 中`m_List`，并调用`GetServiceProxy<T>()`just get 它们的静态泛型版本。这看起来更像是享元模式。

6.  根据5，界面`IServiceProxyFactory<T>`完全没用，只是为了好看和开心就放在那里。

7.  的实例版本`GetServiceProxy()`保持原始用法，但具体类需要覆盖它。

8.  在该`Use`方法中，创建的客户端与*using*语句一起使用。我已经阅读了[Using Statement 的避免问题](http://msdn.microsoft.com/en-us/library/aa355056.aspx)，但似乎我不知道您想要处理异常的策略，因此我只是*尝试*并*重新抛出*。

9.  根据1，我认为是一种*线程安全*的方式，通过锁来原子地处理，继承`IsDisposed`和`ThisLock`使用。并相应`Close`地`Abort`在那里做。

10.  哦十！类`ServiceProxy2`和`ServiceProxy1`仅用于示例，并`ServiceProxy2`派生自`ServiceProxy1`.

代码看起来很冗长，但实际上设计非常简单。只需报告我的问题，我会尽力纠正它。希望帮助和一个好**锁**！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T20:54:11.163

我通过使用技巧将`ServiceProxy1`类合并到其中来实现它。`ServiceClient1``ServiceClient1 : IServiceProxyFactory<ServiceClient1>`

```
public interface IServiceProxyFactory<T>
{
    // can have a better name like SetCredentials()
    T GetServiceProxy();
}

// Got rid of ServiceProxy1 class
public partial class ServiceClient1 : IServiceProxyFactory<ServiceClient1>
{
    public ServiceClient1 GetServiceProxy()
    {
        var client = this;
        // set credentials here
        //client.ClientCredentials = "";
        return client;
    }
}

public partial class ServiceClient2 : IServiceProxyFactory<ServiceClient2> { ... } 

public static class ServiceMod<TClient>
    where TClient : class, ICommunicationObject, IServiceProxyFactory<TClient>, new()
{
    public static TReturn Use<TReturn>(Func<TClient, TReturn> codeBlock)
    {
        TClient client = default(TClient);
        bool success = false;
        try
        {
            client = new TClient().GetServiceProxy();
            TReturn result = codeBlock(client);
            client.Close();
            success = true;
            return result;
        }
        finally
        {
            if (!success)
            {
                client.Abort();
            }
        }
    }
} 
```

现在我可以这样做：

```
Service<ServiceClient1>.Use(svc => svc.Method()); 
```

# powershell - Powershell 将手册页转换为 html

> ID：15539074
> 
> 赞同：0
> 
> 时间：2013-03-21T03:42:21.300
> 
> 标签：powershell, cmdlet

我是 Powershell 的菜鸟，我需要帮助将特定的手册页转换为 html 文档

about_script

我的代码是：get-help about_scripts | 转换为 html > scr.html

它创建了一个 html 页面，但仅在前几行中并没有大部分数据和一个显示它有多长的数字。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:00:28.833

为什么要重新发明轮子？PowerShell 已经在线提供了所有文档。

[about_Scripts](http://technet.microsoft.com/en-us/library/hh847841.aspx)

您可以找到所有 cmdlet 的帮助文件。对于第 3 方模块，通常包含文档或在线提供文档。

[所有 PowerShell 核心模块](http://technet.microsoft.com/en-us/library/hh847741.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:01:44.527

```
ConvertTo-HTML -Body "<p>$(Get-Help about_scripts)</p>" | Out-File aboutscripts.html 
```

[从这里](http://powershell.com/cs/)开始

# python - 在 QTextEdit 中的字符串后插入 QImage

> ID：15539075
> 
> 赞同：1
> 
> 时间：2013-03-21T03:42:26.533
> 
> 标签：python, qt, pyqt, pyqt4, pyside

我正在尝试将文本打印到 QTextEdit 字段中，但由于某种原因，图像首先出现。

这是我的代码：

```
import sys
from PyQt4 import QtCore, QtGui
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):

        textEdit = QtGui.QTextEdit('',self)
        textEdit.setGeometry(QtCore.QRect(300, 300, 640, 480))
        textEdit.move(0, 0)
        self.setGeometry(300, 300, 640, 480)

        img = QImage('image.png','PNG')

        cursor = QTextCursor(textEdit.document())
        cursor.insertText("Hello World")
        cursor.insertImage(img)

        self.show()

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

在我的 QTextEdit 字段中看起来像这样：

```
some image
Hello World 
```

但我希望它看起来像：

```
Hello World
some image 
```

图像位于字符串的顶部。此外，还有一个和我的图像一样高的丑陋光标（500 像素高）。我应该使用什么代码a）在图像之前打印字符串，b）在我完成插入后光标被隐藏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:04:26.067

您需要将光标定位在要插入图像的位置。签出此代码：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.pushButtonImage = QtGui.QPushButton(self)
        self.pushButtonImage.setText("Insert Image!")
        self.pushButtonImage.clicked.connect(self.on_pushButtonImage_clicked)

        self.textEditImage = QtGui.QTextEdit(self)
        self.textEditImage.setPlainText("Insert an image here:")

        self.layoutVertical = QtGui.QVBoxLayout(self)
        self.layoutVertical.addWidget(self.pushButtonImage)
        self.layoutVertical.addWidget(self.textEditImage)

    def on_pushButtonImage_clicked(self):
        filePath = QtGui.QFileDialog.getOpenFileName(
            self,
            "Select an image",
            ".",
            "Image Files(*.png *.gif *.jpg *jpeg *.bmp)"
        )

        if not filePath.isEmpty():
            self.insertImage(filePath)

    def insertImage(self, filePath):
        imageUri = QtCore.QUrl(QtCore.QString("file://{0}".format(filePath)))
        image    = QtGui.QImage(QtGui.QImageReader(filePath).read())

        self.textEditImage.document().addResource(
            QtGui.QTextDocument.ImageResource,
            imageUri,
            QtCore.QVariant(image)
        )

        imageFormat = QtGui.QTextImageFormat()
        imageFormat.setWidth(image.width())
        imageFormat.setHeight(image.height())
        imageFormat.setName(imageUri.toString())

        textCursor = self.textEditImage.textCursor()
        textCursor.movePosition(
            QtGui.QTextCursor.End,
            QtGui.QTextCursor.MoveAnchor
        )
        textCursor.insertImage(imageFormat)

        # This will hide the cursor
        blankCursor = QtGui.QCursor(QtCore.Qt.BlankCursor)
        self.textEditImage.setCursor(blankCursor)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# java - 继承问题

> ID：15539078
> 
> 赞同：-1
> 
> 时间：2013-03-21T03:42:44.750
> 
> 标签：java, inheritance

我正在学习 Java 入门课程，并且正在学习继承。我必须在已经编写的超类代码中创建一个新方法（getUserName）以使私有用户名变量公开，并且它可以编译并且运行良好：

```
import java.util.ArrayList;

public class Post 

    private String username;  // username of the post's author
    private long timestamp;
    private int likes;
    private ArrayList<String> comments;

    /**
     * Constructor for objects of class Post.
     * 
     * @param author    The username of the author of this post.
     */
    public Post(String author)
    {
        username = author;
        timestamp = System.currentTimeMillis();
        likes = 0;
        comments = new ArrayList<String>();
    }

    /**
     * Record one more 'Like' indication from a user.
     */
    public void like()
    {
        likes++;
    }

    /**
     * Record that a user has withdrawn his/her 'Like' vote.
     */
    public void unlike()
    {
        if (likes > 0) {
            likes--;
        }
    }

    /**
     * Add a comment to this post.
     * 
     * @param text  The new comment to add.
     */
    public void addComment(String text)
    {
        comments.add(text);
    }

    /**
     * Return the time of creation of this post.
     * 
     * @return The post's creation time, as a system time value.
     */
    public long getTimeStamp()
    {
        return timestamp;
    }

    /**
     * Display the details of this post.
     * 
     * (Currently: Print to the text terminal. This is simulating display 
     * in a web browser for now.)
     */
    public void display()
    {
        System.out.println(username);
        System.out.print(timeString(timestamp));

        if(likes > 0) {
            System.out.println("  -  " + likes + " people like this.");
        }
        else {
            System.out.println();
        }

        if(comments.isEmpty()) {
            System.out.println("   No comments.");
        }
        else {
            System.out.println("   " + comments.size() + " comment(s). Click here to view.");
        }
    }
    public String getUserName()
    {
        return username;
    }

    /**
     * Create a string describing a time point in the past in terms 
     * relative to current time, such as "30 seconds ago" or "7 minutes ago".
     * Currently, only seconds and minutes are used for the string.
     * 
     * @param time  The time value to convert (in system milliseconds)
     * @return      A relative time string for the given time
     */

    private String timeString(long time)
    {
        long current = System.currentTimeMillis();
        long pastMillis = current - time;      // time passed in milliseconds
        long seconds = pastMillis/1000;
        long minutes = seconds/60;
        if(minutes > 0) {
            return minutes + " minutes ago";
        }
        else {
            return seconds + " seconds ago";
        }
    }
} 
```

但是当我尝试在子类中调用这个方法（在 printShortSummary 方法中）时，它不会编译：

```
`enter code here`import java.util.ArrayList;
`enter code here`public class MessagePost extends Post
{
    private String message;  // an arbitrarily long, multi-line message

    /**
     * Constructor for objects of class MessagePost.
     * 
     * @param author    The username of the author of this post.
     * @param text      The text of this post.
     */
    public MessagePost(String author, String text)
    {
        super(author);
        message = text;
    }
    public String printShortSummary;
    {
        System.out.println("Message post from " + getUserName);

    }
    /**
     * Return the text of this post.
     * 
     * @return The post's message text.
     */
    public String getText()
    {
        return message;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:52:49.100

改变

```
public String printShortSummary;
{
    System.out.println("Message post from " + getUserName);

} 
```

至

```
public String printShortSummary()
{
    String username;
    System.out.println("Message post from " + getUserName());
    username = getUsername();
    return username;
} 
```

**规则**

您的方法 printShortSummary() 必须返回一个字符串值。当你调用一个方法时，不要忘记括号 ()。最终，您的错误大多是拼写错误，我建议您使用像 Netbeans 或 Eclipse 这样的 IDE，以便可以轻松纠正错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:47:48.307

`System.out.println("Message post from " + getUserName);`

应该

`System.out.println("Message post from " + getUserName());`.

`getUserName()`是一种方法，即使它没有参数，也需要在其末尾加上括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T03:46:40.637

调用方法如下（带括号）：

```
System.out.println("Message post from " + getUserName()); 
```

此外，您必须使`printShortSummary`方法无效或返回一些字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T03:47:32.763

你应该把它称为方法人，这样称呼它

```
System.out.println("Message post from " + getUserName()); 
```

# wso2 - 增加 WSO2 WSAS 的活动时间更长

> ID：15539085
> 
> 赞同：0
> 
> 时间：2013-03-21T03:43:44.053
> 
> 标签：wso2, wso2esb

一旦我登录到我的 wso2 WASA 服务器。如果我不经常在里面工作

服务器，下次当我单击任何服务或按钮时，它将再次显示主登录页面。

如何解决此问题以使服务器在 Web 浏览器中保持更长的时间

每次不用重新登录的时间..

任何人都可以在这方面提供帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T07:39:43.627

您可以在 AS_HOME/lib/core/WEB-INF/web.xml 中增加管理控制台会话超时

<会话配置>

<会话超时>15</会话超时>

</会话配置>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:06:31.610

您必须增加服务器实例的会话超时

# android - 如何稳定指南针？

> ID：15539089
> 
> 赞同：2
> 
> 时间：2013-03-21T03:44:09.373
> 
> 标签：android, android-sensors

我正在为 android 制作一个指南针，我可以让它工作，但它有一个缺陷。即使设备没有移动，罗盘上的读数也会持续变化几度。我知道这是由于磁失真弄乱了传感器，但我怎样才能让我的应用程序在用户移动时仍然响应但在用户静止时没有显示这么多变化。那么如何才能让指南针看起来更稳定呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:47:21.413

你必须平滑信号。如何显示最后 N 个值的平均值而不是显示原始最后一个值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:06:54.960

如果要编写指南针，则需要对加速度和磁场进行低通**滤波**。

这是一个低通滤波器的例子。不是很优雅，只是为了展示原理：

```
float filteredValue;

void lowPassFilter(float rawValue) {

    final float alpha = 0.8f;
    float filteredValue = alpha * filteredValue + (1.0f - alpha) * rawValue;

    return filteredValue;
} 
```

请注意，*filteredValue*在每次调用后都会被记住（就像一个成员变量）。

另一方面，*rawValue*是来自传感器事件的值，例如*event.values[0]*。

请注意，每个“新鲜”的新*rawValue*仅影响 20% 的过滤值（由*alpha*给出）。这以延迟为代价为读数带来了“稳定性”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:18:03.033

您是否尝试过实现低通滤波器？[http://blog.thomnichols.org/2011/08/smoothing-sensor-data-with-a-low-pass-filter](http://blog.thomnichols.org/2011/08/smoothing-sensor-data-with-a-low-pass-filter)

# python - 网格图像基本 fft 的 Python 代码

> ID：15539092
> 
> 赞同：1
> 
> 时间：2013-03-21T03:44:21.963
> 
> 标签：python, fft

我正在尝试在 python 中获取图像的 fft，更改转换后的图像并进行反向 fft。具体来说，我有一张我想转换的网格图片，然后将除了中间的、狭窄的垂直狭缝之外的所有东西都涂黑，然后进行反向 fft。

我现在正在使用的代码，不改变变换平面：

```
import os
os.chdir('/Users/terra/Desktop')
import Image, numpy
i = Image.open('grid.png')
i = i.convert('L')    #convert to grayscale
a = numpy.asarray(i)  # a is readonly

b = abs(numpy.fft.rfft2(a))

j = Image.fromarray(b)
j.save('grid2.png') 
```

截至目前，我收到一条错误消息：

Traceback（最近一次调用最后）：文件“/Users/terra/Documents/pic2.py”，第 11 行，在 j.save('grid2.png') 文件“/Library/Frameworks/Python.framework/Versions/2.7 /lib/python2.7/site-packages/PIL/Image.py”，第 1439 行，保存 save_handler(self, fp, filename) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2\. 7/site-packages/PIL/PngImagePlugin.py”，第 506 行，在 _save 中引发 IOError，“无法将模式 %s 写入 PNG”% 模式 IOError：无法将模式 F 写入 PNG

我对编程和傅里叶变换很陌生，所以我在网上找到的大多数相关线程都在我头上。非常感谢您提供非常具体的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:31:28.810

主要问题是该数组在 FFT 之后包含浮点数，但要使其对 PNG 输出有用，您需要有`uint8`s.

最简单的就是`uint8`直接转换成：

```
b = abs(numpy.fft.rfft2(a)).astype(numpy.uint8) 
```

这可能不会产生您想要的图像，因此您必须在将数组中的值转换为整数之前以某种方式对其进行标准化。

# python - 如何使用 Python 提取 ODT(OpenDocumentText) 格式的表格、文本和图片？

> ID：15539096
> 
> 赞同：1
> 
> 时间：2013-03-21T03:44:56.183
> 
> 标签：python, ubuntu, odt

如何在 Ubuntu 上使用 Python 提取 ODT(OpenDocumentText) 文件中的表格、文本和图片以将它们输出到另一个 ODT 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:33:18.580

[OOoPy](http://ooopy.sourceforge.net/)似乎很合适。我没用过，但是它自带文档和代码示例，而且可以读写ODT文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T05:04:31.910

一种简单的方法是将其重命名`foo.odt`为`foo.zip`然后提取它。提取的目录包含许多文件，包括图片。

但是我认为最好将其类型更改为`docx`然后执行该过程`docx`（提取它）。因为它提取名称更好的图像（image1，image2，...）。

# sql - PL/SQL 组函数的替代方案

> ID：15539097
> 
> 赞同：0
> 
> 时间：2013-03-21T03:45:10.137
> 
> 标签：sql, oracle, plsql, oracleforms

我导入了一个需要的旧 PL/SQL 包，它使用了 Group 函数，例如：

*   Get_Group_Char（或数字）_Cell
*   查找组
*   创建组
*   添加_组
*   Set_Group_Char（或数字）_Cell
*   Delete_Group_Row
*   删除_组

和 ff 数据类型：

*   记录组
*   组列

但是，当我尝试编译它时会发生错误，因为这些函数/数据类型似乎是未定义/未声明的。有人告诉我这些函数的作用，现在了解它们的用途。我只是想问是否有实现这些功能的现有包，这样我就不必自己编写代码了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:59:02.357

上面的 Oracle Forms 内置程序不能在 PL/SQL 中使用。这些只能在表格中使用。

# sql - Django用相关表上的条件注释总和

> ID：15539101
> 
> 赞同：1
> 
> 时间：2013-03-21T03:45:37.093
> 
> 标签：sql, django, orm, annotate

```
class Inventory(models.Model):
    ...
    product = models.ForeignKey('Product')
    quantity = models.IntegerField(default=0)

class Order(models.Model):
    ...
    quantity = models.IntegerField()
    inventory = models.ForeignKey('Inventory')
    active = models.BooleanField(default=True)

# Not considering the orders that are not active
queryset = Inventory.objects.annotate(
    used=Sum('order__quantity')
).filter(product=product) 
```

我需要获取带有注释“已使用”值的库存查询集。'used' 值由所有相关订单的数量决定，但仍处于活动状态。

**编辑**：更准确地说，我只需要对活动订单的数量求和。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:06:55.017

```
queryset = Inventory.objects.filter(product=product, 
    order__active=True).aggregate(
    Sum('order__quantity'))

sum = queryset['order__quantity__sum'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:18:38.020

我用原始 SQL 找到了答案：

```
SELECT "products_inventory"."id", "products_inventory"."product_id", "products_inventory"."quantity",
SUM(CASE WHEN "orders_order"."active" = True THEN "orders_order"."quantity" ELSE 0 END)
AS "used" FROM "products_inventory"
LEFT OUTER JOIN "orders_order" ON ("products_inventory"."id" = "orders_order"."inventory_id")
WHERE "products_inventory"."product_id" = id_of_product
GROUP BY "products_inventory"."id", "products_inventory"."product_id", "products_inventory"."quantity",
ORDER BY "products_inventory"."id" ASC 
```

# jquery - 只有jquery自动完成下载

> ID：15539107
> 
> 赞同：6
> 
> 时间：2013-03-21T03:46:10.520
> 
> 标签：jquery, jquery-autocomplete

我想下载 jquery 自动完成插件，但它不允许我只下载该文件，而是下载 jquery 核心、jquery 位置、小部件等脚本。但我不想要所有这些文件，因为我已经将它们添加到我的项目中并且工作正常，所以我不想破坏任何当前的工作逻辑。

当我尝试将所有脚本都带有自动完成功能（包括 core.js）时，它可以工作，但是我的日期选择器停止工作。

我还尝试从完整脚本中仅选择和添加自动完成脚本部分，但它不起作用，可能是因为我使用的是 jquery 1.7.2，而我发现了自动完成 1.10.2。

有没有办法只获得自动完成插件或任何类似的插件，它们可以像我们从外部作者那里获得其他插件一样工作？

基本上我的要求不完全是自动完成，我想要的是有一个文本框，焦点显示要选择的选项列表，比如下拉列表选项，但也让我们输入自己的值而不显示下拉列表箭头. 我在自动完成插件的帮助下完成了这一切，当我尝试将它添加到我的项目中时出现了问题。

基本上这个要求

![在此处输入图像描述](../Images/38765182dcabc03821fc3289a911bccd.png)

知道我能做什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T08:51:51.590

您可以转到[All jQuery UI Downloads 页面](http://jqueryui.com/download/all/)并获取包含源代码的文件。

然后，在`ui`文件夹中，您将看到每个模块的单独文件，包括`jquery.ui.autocomplete.js`.

我不知道您的文件在您的项目中是如何组织的，但请注意模块`autocomplete`需要`core`,`widget`和才能工作。前两个必须先加载。`position``menu``autocomplete`

您的代码应如下所示：

```
<script type="text/javascript" src="vendor/jquery-ui/js/jquery.ui.core.js"></script>
<script type="text/javascript" src="vendor/jquery-ui/js/jquery.ui.widget.js"></script>
<script type="text/javascript" src="vendor/jquery-ui/js/jquery.ui.position.js"></script>
<script type="text/javascript" src="vendor/jquery-ui/js/jquery.ui.menu.js"></script>
<script type="text/javascript" src="vendor/jquery-ui/js/jquery.ui.autocomplete.js"></script> 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-01T19:24:32.683

使用此链接选择正确的组件下载 [https://jqueryui.com/download/](https://jqueryui.com/download/)

# ruby-on-rails - 如何在 Lion 上安装 Ruby 2.0.0

> ID：15539109
> 
> 赞同：0
> 
> 时间：2013-03-21T03:46:23.460
> 
> 标签：ruby-on-rails, ruby, osx-lion

我正在尝试使用 Xcode 4.6.1 在 Lion 10.8.3 上进行 Ruby 2.0.0 的全新安装。我安装了命令行工具。

gcc reprots version 4.2.1 git、sqlite3等都安装好了。

我正在尝试进行全新安装。我做了以下步骤

1.  rvm 全部卸载
2.  rvm 内爆

然后新安装

1.  curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s stable # 安装 rvm
2.  rvm 要求

我从 rvm 要求中得到以下响应。

> # 对于红宝石：
> 
> 安装： osx-gcc-installer libksba openssl libreadline git zlib1g libyaml libsqlite3 sqlite3 libxml2 libxslt autoconf libc6 libgdbm ncurses automake libtool bison pkg-config

这是在告诉我该怎么做？如何安装所有这些软件包？

gcc 报告版本 4.2.1 git、sqlite3 等都已安装。

如果我尝试安装，它最终会失败。

我也做 iOS 开发，不能破坏我的 Xcode 环境。

出于安全原因，作为一般策略，我在非管理员用户 ID 下运行。我使用 rvm 的目的是将更改保留在我的用户 ID 的本地，但如果不是 sudo，其他工具（如 homebrew）似乎至少需要管理员访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:03:04.497

使用 Homebrew 像在 Linux 上使用 apt-get（或类似的 PM）一样安装东西。

[http://mxcl.github.com/homebrew/](http://mxcl.github.com/homebrew/)

对于普通的 Ruby 部分：有一个*官方*的GUI 工具可以为您处理 RVM：

[http://jewelrybox.unfiniti.com/](http://jewelrybox.unfiniti.com/)

我刚刚安装了 Ruby 2.0，点击了 2 次。不过，根据您的 XCode，Ruby 版本 < 1.9p125 可能会更成问题。

# php - PHP Lua 扩展

> ID：15539111
> 
> 赞同：4
> 
> 时间：2013-03-21T03:46:28.553
> 
> 标签：php, lua, wamp, pecl

我正在研究将 Lua 与 PHP 一起使用，但我不知道如何将其设置为 PHP 扩展 (DLL)。我找不到任何关于此的文档，那么有人对此/PECL 有任何经验吗？这是链接： http: [//pecl.php.net/package/lua](http://pecl.php.net/package/lua)

我看到 MediaWiki 已经实现了这一点，我试图在我的网站上解决这个问题，但我已经被难住了大约一个星期。

谢谢你的帮助。

# javascript - 线程如何帮助使用网络工作者？

> ID：15539114
> 
> 赞同：0
> 
> 时间：2013-03-21T03:46:52.600
> 
> 标签：javascript, html, performance, html5-canvas

我有一个关于网络工作者的一般性问题。我知道他们在另一个线程中进行后台计算，因此他们从用户所在的窗口中卸下负载。

但是，我对“其他线程”是否意味着在计算机上运行不同的程序，打开单独的浏览器，或者是否就像同一浏览器中的新标签感到困惑。我觉得这更多是后一种情况，但我对此不是 100% 确定，也找不到好的解释。

这对我们可以使用 Web Worker 做什么的限制有什么影响？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:23:13.253

webworker 就像一个独立的执行线程一样工作。多个线程可以在一个计算机进程中同时运行。如果有多个处理器，这些多个线程实际上可以同时运行。如果只有一个处理器，那么计算机上的操作系统会处理不同线程之间的时间片，这样每个线程都会运行一小段时间，然后下一个会运行，对于不经意的观察者来说，它们似乎正在运行同时。

在浏览器中，webworker 确实是一个独立于浏览器窗口线程（在浏览器中打开的每个浏览器页面都有一个）运行的执行线程。浏览器窗口线程有许多限制。主要限制是它仅在没有 javascript 代码也在主浏览器线程中运行时处理用户事件（鼠标移动、鼠标单击、键盘事件等）。因此，如果您要在主浏览器线程中运行一些长时间运行的 javascript 代码，浏览器将“看起来”被锁定，并且在该 javascript 运行时不会处理任何用户事件。这通常被认为是糟糕的用户体验。

但是，如果你在 webworker 中运行这个 javascript，它可以在不阻塞主浏览器窗口线程中的事件处理的情况下完成长时间运行的事情。当它完成其长时间运行的计算时，它可以向主浏览器窗口线程发送一条消息，并且可以处理结果（例如显示在页面中或任何特定操作）。

有一些方法可以解决主浏览器线程的限制，方法是将您的工作分成小块并在循环计时器上执行小块工作。但是，使用 Web Worker 线程可以显着简化编程。

Web 工作者本身无法以任何方式访问浏览器页面。他们不能从中读取值或修改它 - 他们不能运行动画等......这将它们的有用性限制在更独立于页面的任务上。经典用途是一些长时间运行的计算（例如分析图像中的数据、执行 ajax 调用、进行一些复杂的计算等）。Web Worker 可以通过消息系统与主线程进行通信。这有点像留下语音邮件。webworker 调用主线程并给它留言。下次当主线程无事可做时，它会检查是否有来自 web worker 的消息，如果有，它会处理它们。这样，主线程和 web worker 线程可以通信，但一个不能中断另一个'

# c++ - MS Visual C++ 中缺少 atanh 反双曲正切函数

> ID：15539116
> 
> 赞同：3
> 
> 时间：2013-03-21T03:47:19.333
> 
> 标签：c++, math

我正在使用一些以前在 Linux 上使用 gcc 编译器编译的代码，当使用 MS Visual C++ 2008 编译它时，math.h 似乎没有包含所有相同的功能，特别是（反）反双曲正切*atanh*功能。

我尝试使用 std::atanh 包括 math.h、cmath，但在 google/MSDN 搜索中没有找到太多其他内容。是否有一个简单的头文件可用，我可以包含它？

> 错误 C3861：“atanh”：未找到标识符

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T03:56:23.167

以下是各种版本的数学库中包含和未包含的内容。

```
Function  POSIX  old ISO  ISO C99  Microsoft(2008)  
acos      Y      Y        Y        Y     
acosh     Y      N        Y        N    
asin      Y      Y        Y        Y     
asinh     Y      N        Y        N    
atan      Y      Y        Y        Y     
atan2     Y      Y        Y        Y     
atanh     Y      N        Y        N 
```

您可以不使用公式实现自己的功能：

```
 asinh(x) = log(x + sqrt(x2 + 1))
    acosh(x) = log(x + sqrt(x2 - 1))
    atanh(x) = (log(1+x) - log(1-x))/2 
```

例如

```
float atanh (float x)
{
   //implements: return (log(1+x) - log(1-x))/2
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:58:23.560

据此[，](http://en.cppreference.com/w/cpp/numeric/math/atanh) atanh 是在 C++11 中引入的。由于 C++11 是在 2011 年推出的，你可能无法在 VS 2008 中使用它。

# windows - 将降价斜体和粗体转换为乳胶

> ID：15539121
> 
> 赞同：4
> 
> 时间：2013-03-21T03:47:46.760
> 
> 标签：windows, r, latex, markdown

我希望能够即时将markdown斜体和粗体转换为乳胶版本（即，给文本字符串返回一个文本字符串）。我以为很容易。错误的！（它仍然可能是）。请参阅我在底部尝试的窗台业务和错误。

**我所拥有的（注意在降价中已经转义的起始星号）：**

```
x <- "\\*note: I *like* chocolate **milk** too ***much***!" 
```

**我想要什么：**

```
"*note: I \\emph{like} chocolate \\textbf{milk} too \\textbf{\\emph{much}}!" 
```

我不喜欢正则表达式，但更喜欢基本解决方案（尽管不是必需的）。

**傻事：**

```
helper <- function(ins, outs, x) {
    gsub(paste0(ins[1], ".+?", ins[2]), paste0(outs[1], ".+?", outs[2]), x)
}

helper(rep("***", 2), c("\\textbf{\\emph{", "}}"), x)

Error in gsub(paste0(ins[1], ".+?", ins[2]), paste0(outs[1], ".+?", outs[2]),  : 
  invalid regular expression '***.+?***', reason 'Invalid use of repetition operators' 
```

如果有用的话，我有Ananda Mahto 帮我制作的[这个玩具。](https://github.com/trinker/reports/blob/master/R/wheresPandoc.R)您可以通过以下方式从报告中访问它`wheresPandoc <- reports:::wheresPandoc`

**编辑**每本我试过的评论：

```
action <- paste0(" echo ", x, " | ", wheresPandoc(), " -t latex ") 
system(action)

*note: I *like* chocolate **milk** too ***much***! | C:\PROGRA~2\Pandoc\bin\pandoc.exe -t latex 
```

**EDIT2** Per Dason 我试过的评论：

```
out <- paste("echo", shQuote(x), "|", wheresPandoc(), " -t latex"); system(out)
system(out, intern = T)

> system(out, intern = T)
\*note: I *like* chocolate **milk** too ***much***! | C:\PROGRA~2\Pandoc\bin\pandoc.exe -t latex 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T04:30:56.597

`input`Windows 上缺少管道使这变得很棘手，但您可以使用以下方式绕过它`stdin`：

```
> x = system("pandoc -t latex", intern=TRUE, input="\\*note: I *like* chocolate **milk** too ***much***!")
> x
[1] "*note: I \\emph{like} chocolate \\textbf{milk} too \\textbf{\\emph{much}}!" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T04:35:10.630

注意到我正在窗户上工作`?system`

> 这意味着重定向、管道、DOS 内部命令……不能使用

和来自的注释`?system2`

> ## 笔记
> 
> system2 是比 system 更便携和灵活的接口，在 R 2.12.0 中引入。它允许重定向输出而不需要在 Windows 上调用 shell，这是一种设置环境变量以执行命令的可移植方式，并且可以更好地控制 stdout 和 stderr 的重定向。相反，system（和 Windows 上的 shell）允许调用任意命令行。使用`system2`

```
system2('pandoc', '-t latex', input = '**em**', stdout = TRUE) 
```

# mysql - 选择一天内访问过多个地方的访客以及详细信息

> ID：15539124
> 
> 赞同：1
> 
> 时间：2013-03-21T03:47:52.917
> 
> 标签：mysql

我的mysql表是这样的：

```
+---------+---------+------------+-----------------------+---------------------+
| visitId | userId  | locationId | comments              | time                |
+---------+---------+------------+-----------------------+---------------------+
|       1 |    3    |     12     | It's a good day here! | 2012-12-12 11:50:12 |
+---------+---------+------------+-----------------------+---------------------+
|       2 |    3    |     23     | very beautiful        | 2012-12-12 12:50:12 |
+---------+---------+------------+-----------------------+---------------------+
|       3 |    3    |     52     | nice                  | 2012-12-12 13:50:12 |
+---------+---------+------------+-----------------------+---------------------+ 
```

女巫记录来访者的轨迹和对去过的地方的一些评论

**我想查找一天内访问过多个地方的访客，以及具体的日期和地点，而不仅仅是计数。**

我尝试了子查询：

```
mysql> SELECT userId, locationId, time FROM visits 
WHERE (userId,DATE(time)) in (
  SELECT  userNum, Date(weiboTime) from visits GROUP BY userNum, Date(wei
  boTime) Having COUNT(*)>1); 
```

和联合查询：

```
mysql> select v2.userId, v1.loacationId, v1.time from visits as v1, visits as
v2 where v1.userId=v2.userId GROUP BY v2.userId, Date(v2.time) HAVING 
COUNT(DISTINCT v2.locationId); 
```

我不确定第二个是否正确。但是两者都需要很长时间。关于我应该怎么做的任何建议？

**更新**

```
mysql> SELECT t.userId, locationId, t.time FROM (
              SELECT userId, time 
              FROM visits GROUP BY userId,Date(time)
              HAVING COUNT(*) > 1) AS t, visits 
       WHERE t.userId=visits.userId AND t.time=visits.time; 
```

希望这会让我自己更清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:59:55.617

您的查询包括 locationId，但您的既定目标是获取一天内访问次数超过 1 次的用户/日期组合。这是得到它的sql：

```
select userId, date(time), count(*)
from visits
group by userId, date(time)
having count(*) > 1; 
```

**更新：** 要获得大于 1 的用户/天组合访问的所有访问：

```
select *
from visits
where (userId, date(time)) in (
    select userId, date(time)
    from visits
    group by userId, date(time)
    having count(*) > 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:12:20.863

我认为你会更适合`GROUP BY`在[子查询](http://dev.mysql.com/doc/refman/5.0/en/from-clause-subqueries.html)中使用你的计数。从[MySQL 的计数文档](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)中，您可以执行以下操作：

```
mysql> SELECT userId, locationId, time, visitCount
       FROM
           (SELECT COUNT(*) as visitCount 
            FROM visits 
            GROUP BY userId)
       WHERE visitCount > 1; 
```

我假设您遇到的缓慢来自您的子句中的`HAVING`and 。`DISTINCT``WHERE`

# iphone - 是否可以在将一个视图保持在顶部的同时调暗整个 iPhone 屏幕？

> ID：15539129
> 
> 赞同：1
> 
> 时间：2013-03-21T03:48:16.957
> 
> 标签：iphone, uikit

我有一个基于 UITabbar 的 iphone 应用程序，顶部有一个 NavigationController 栏。我还有一个注销视图，我在顶部显示，同时使背景变暗。你可以在这里看到：http: [//d.pr/i/XH6x](http://d.pr/i/XH6x)

但是，变暗的背景不会覆盖顶部的 UINavigationBar 或底部的 UITabbar。如何使整个屏幕变暗，同时将 LogoutView 保持在顶部？

现在，我正在使用以下代码进行暗视图：

```
UIView *dimView = [[UIView alloc] initWithFrame:self.collectionView.frame];
dimView.tag = kDimView;
dimView.backgroundColor = [UIColor blackColor];
dimView.alpha = 0.7;
[self.view addSubview:dimView]; 
```

谢谢！

编辑：我应该提到这是一个基于 UITabBarController 的应用程序，其中 3 个选项卡中的每一个都有 UInavigationControllers。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:10:27.667

您必须使选项卡栏和导航栏所在的视图变暗。

例如，有一个 UIViewController 名为`RootViewController`，其中包含您的`UITabbarController`和`UINavigationController`。

因此，尝试为该视图设置 alpha 值，然后正常添加子视图，就像你正在做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:56:15.383

尝试这个。

```
 UIWindow* mainWindow = [[UIApplication sharedApplication] keyWindow];

 dimView.frame = CGRectMake(00, 00,mainWindow.frame.size.width , mainWindow.frame.size.height); 
```

希望这会帮助你。

# hibernate - hibernate.exception.GenericJDBCException：无法打开连接

> ID：15539133
> 
> 赞同：-1
> 
> 时间：2013-03-21T03:48:52.437
> 
> 标签：hibernate, exception, generics, jdbc, transactions

当我尝试打开我的应用程序时，我多次收到此错误。请帮助我理解这个堆栈跟踪。

请在此处找到堆栈跟踪：

```
[3/14/13 23:29:57:016 SGT] 00000029 WebAppE[Servlet Error]-[/acegi/authentication_target_dummy.jsp]: 

org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.GenericJDBCException: Cannot open connection
                at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:596)
                at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
                at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:317)
                at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
                at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
                at $Proxy32.auditAccess(Unknown Source)
                at com.actimize.infrastructure.access.AccessManager.auditAccess(AccessManager.java:58)
                at com.actimize.infrastructure.authentication.ACMAuthenticationProcessingFilter.auditLogin(ACMAuthenticationProcessingFilter.java:351)
                at com.actimize.infrastructure.authentication.ACMAuthenticationProcessingFilter.authenticateAndAudit(ACMAuthenticationProcessingFilter.java:316)
                at com.actimize.infrastructure.authentication.external.HeaderAuthenticationProcessingFilter.attemptAuthentication(HeaderAuthenticationProcessingFilter.java:97)
                at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:252)
                at com.actimize.infrastructure.authentication.ACMAuthenticationProcessingFilter.doFilter(ACMAuthenticationProcessingFilter.java:72)
                at com.actimize.infrastructure.authentication.external.HeaderAuthenticationProcessingFilter.doFilter(HeaderAuthenticationProcessingFilter.java:164)
                at org.acegisecurity.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:98)
                at com.actimize.infrastructure.authentication.external.ConfiguredHeaderProcessingFilter.doFilter(ConfiguredHeaderProcessingFilter.java:33)
                at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
                at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)  
                at com.actimize.infrastructure.authentication.external.ConfiguredNtlmHttpFilter.doFilter(ConfiguredNtlmHttpFilter.java:156)
                at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
                at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)  
                at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
                at org.acegisecurity.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:98)
                at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
                at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)  
                at com.actimize.infrastructure.http.SessionTimeoutFilter.doFilter(SessionTimeoutFilter.java:66)
                at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
                at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
                at com.actimize.infrastructure.http.RequestResponseFilter.doFilter(RequestResponseFilter.java:29)
                at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190) 
                at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)  
                at com.actimize.infrastructure.cache.NoCacheFilter.doFilter(NoCacheFilter.java:44)
                at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
                at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)  
                at com.actimize.infrastructure.perfmon.PerformanceMonitorHttpFilter.doFilter(PerformanceMonitorHttpFilter.java:26)
                at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
                at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)  
                at com.actimize.infrastructure.encoding.MultilingualSupportFilter.doFilter(MultilingualSupportFilter.java:78)
                at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
                at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)  
                at com.actimize.infrastructure.config.StartupErrorFilter.doFilter(StartupErrorFilter.java:32)
                at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
                at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)  
                at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)
                at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:848)
                at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:691)
                at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:654)
                at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:526)
                at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:122)
                at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:248)
                at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:90)
                at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:764) 
                at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1478)
                at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:133)
                at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:457)
                at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:515)
                at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:300)
                at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:102)  
                at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1830)
                at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
                at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
                at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
                at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
                at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
                at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:751)
                at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
                at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1560)

Caused by: org.hibernate.exception.GenericJDBCException: Cannot open connection
                at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:126)
                at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:114)
                at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
                at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)
                at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)
                at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
                at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:142)
                at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:85)
                at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1354)
                at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:555)
                ... 66 more

Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, pool error Timeout waiting for idle object
                at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:114)
                at com.actimize.infrastructure.database.ActimizeDataSource.getConnection(ActimizeDataSource.java:60)
                at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:81)
                at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
                ... 71 more

Caused by: java.util.NoSuchElementException: Timeout waiting for idle object
                at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1134)
                at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)
                ... 74 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:57:32.037

您正在使用[Apache Commons DBCP](http://commons.apache.org/proper/commons-dbcp//)进行连接池。您的`auditAccess()`方法需要事务，因此导致尝试获取数据库连接。池中的所有连接都处于忙碌状态，因此不可用的时间超过了池中的[maxWait 设置](http://commons.apache.org/proper/commons-dbcp//apidocs/index.html)，因此获取连接的尝试失败并显示给定的堆栈跟踪。

# ubuntu - ubuntu 中是否有任何用于 cuda 的命令行分析工具？（类似并行 Nsight 的东西）

> ID：15539139
> 
> 赞同：2
> 
> 时间：2013-03-21T03:50:01.453
> 
> 标签：ubuntu, cuda, nsight

谁能告诉我任何可用于 ubuntu 命令行的 cuda 分析工具？我正在使用 SSH 安全 Shell 客户端在远程 linux 机器上运行我的程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:06:59.673

如果您有正常的 cuda 5 安装，则应该可以使用[名为 nvprof 的命令行分析器。](http://docs.nvidia.com/cuda/profiler-users-guide/index.html#nvprof-overview)尝试`nvprof`在命令提示符下键入以查看它是否可用并进行设置。但它不是并行 nsight 之类的图形工具。（还有原来的[命令行分析器](http://docs.nvidia.com/cuda/profiler-users-guide/index.html#compute-command-line-profiler-overview)）

但是，如果您从 linux 机器连接到运行 cuda 的远程机器，并且您在远程机器上安装了正常的 cuda 5，并且您使用 X-forwarding（ssh -X 或 ssh -Y）连接，您应该能够远程运行[可视（图形）分析器。](http://docs.nvidia.com/cuda/profiler-users-guide/index.html)您不需要 X 在远程机器上运行，但它必须在本地机器上运行。使用 x-forwarding 连接后，只需输入`nvvp`终端即可。请注意，由于 X 转发，以这种方式运行视觉分析器可能会很慢，所以请耐心等待。如果您可以选择通过 NoMachine NX（或 Mac 上的 OpenNX）等方式进行连接，则在像这样远程运行 nvvp 时通常会获得更快的性能。

# github - 当我警告 github 落后于 1 次提交时该怎么办

> ID：15539141
> 
> 赞同：-1
> 
> 时间：2013-03-21T03:50:18.580
> 
> 标签：github

我在不同的PC上使用guthub。克隆同一个存储库，我在一台 PC 上修改了代码并提交了更改。但是当我打开另一台电脑时，它会提醒我我落后于 1 次提交。如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:52:13.590

您需要更新另一台 PC 上的本地 git 存储库。

想必你已经完成了：

```
git fetch 
```

提取最新的更改。现在您需要将本地分支与远程分支合并：

```
git merge origin/master 
```

（或您落后的任何分支名称）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:52:41.467

1.  git pull 和（如果需要合并）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:53:40.747

也可能你开始使用旧的克隆并在那里做了一个小的提交，只需做一个 Git 拉动就可以解决它。

# c# - 使用 for 循环清除列表

> ID：15539145
> 
> 赞同：0
> 
> 时间：2013-03-21T03:50:49.287
> 
> 标签：c#

我正在做一个黑杰克游戏，在每一轮新的开始时，我需要清除代表玩家和庄家手牌的卡片列表。我用这个来做到这一点：

```
public void ClearPlayerHand()
        {
            for (int i = 0; i < PlayerHand.Count; ++i) 
            {
                PlayerHand.Remove(PlayerHand[i]);
            }
        } 
```

问题是我似乎总是在列表中留下一张牌，或者我收到越界错误，无论我如何更改 i 的值，从 PlayerHand 中删除所有元素的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T03:52:14.527

如果您的集合`PlayerHand`实现[`ICollection<T>`](http://msdn.microsoft.com/en-us/library/92t2ye13.aspx)了您可以调用该`.Clear()`方法。

此接口的常见实现是[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx).

如果您确实想`List<T>`通过`for`循环清除 a，则应使用反向`for`循环。这样做的原因是，当您从列表中删除一个项目时，它会将所有索引向下移动一个，并且您很容易遇到索引越界异常。

这方面的一个例子是：

```
 for (int i = PlayerHand.Count - 1; i >= 0; i--)
        {
            PlayerHand.RemoveAt(i);
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:59:42.120

其他答案是正确的：使用`Clear`.

但是，如果您*想*通过循环和`Remove`调用来执行此操作，您可以这样做：

```
for(int i = PlayerHand.Count - 1; i >= 0; i--)
{
  PlayerHand.RemoveAt(i);
} 
```

反转迭代的方向是真正的技巧。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T03:59:52.513

这是最好/最简单的方法。

```
PlayerHand.Clear(); 
```

**越界原因**

至于为什么您会收到越界异常，这是因为您正在从列表中删除元素但不断增加。您希望删除最后一个操作，`i = 0`但它一直在计数。

假设 PlayerHand 中有 3 个项目，会发生以下情况：

```
i = 0
remove PlayerHand[0] (it now contains 2 elements)
i = 1
remove PlayerHand[1] (it now contains 1 element)
i = 2
remove PlayerHand[2] (this throws an exception as only PlayerHand[0] exists) 
```

在这种情况下，通常你会倒数：

```
for (int i = PlayerHand.Count - 1; i >= 0; i--) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T03:57:11.033

方法之外的另一种建议`Clear`方法，您也可以使用`RemoveAll`删除全部或部分列表

```
// Remove all items
PlayerHand.RemoveAll(x => true);

// Remove part of list
PlayerHand.RemoveAll(x => ConditionMethod(x)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T03:58:02.593

或者，您可以考虑使用数据绑定，然后您应该更新 ItemSource，而不是直接操作列表框或列表视图项。

```
List<T> SomeSource=...
PlayHand.ItemSource=SomeSource;
SomeSource.Clear(); 
```

# iphone - 苹果商店允许的最大 Iphone 应用程序大小

> ID：15539146
> 
> 赞同：0
> 
> 时间：2013-03-21T03:50:56.187
> 
> 标签：iphone, ios

**苹果商店允许 iphone 应用程序或游戏的最大应用程序大小是多少。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:52:50.990

2GB 是您的 iOS 应用程序的最大大小。检查[iOS 应用程序的最大大小](https://stackoverflow.com/questions/4753100/max-size-of-an-ios-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:54:35.087

您的 iOS 应用程序可以达到 2 Gb。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:08:48.067

2 GB 是您的 iOS 应用程序的最大大小。

> 截至 2013 年 1 月 10 日
> 
> （仅限 iOS）应用程序大小提示
> 
> iOS 应用程序可以大至 2 GB，但在确定应用程序大小时要考虑下载时间。
> 
> 尽可能减小文件的大小，请记住无线下载有 50 MB 的限制。

# c - 使用 #define #ifdef 作为条件

> ID：15539147
> 
> 赞同：0
> 
> 时间：2013-03-21T03:51:04.740
> 
> 标签：c

```
gcc 4.7.2
c89 
```

你好，

我正在测试以下不会修改 rtp 流的代码。

```
#define DO_MODIFY_RTP
#ifdef DO_NOT_MODIFY_RTP
    if(modify_rtp_media_stream(channel->ipm) == FALSE) {
        status = FALSE;
    }
#endif 
```

当我想测试修改 rtp 流时，我会将其设置`#define`为：

```
#define DO_MODIFY_RTP
#ifdef DO_MODIFY_RTP
    if(modify_rtp_media_stream(channel->ipm) == FALSE) {
        status = FALSE;
    }
#endif 
```

最终，这将由配置文件中的属性控制。但在我这样做之前，我只是在测试这两种情况。

像这样使用是不是很奇怪`#define`？

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:10:35.870

通常，您不想修改源代码，因此您可能会执行以下操作：

```
#undef MODIFY_RTP
#if defined(DO_NOT_MODIFY_RTP)
#define MODIFY_RTP 0
#else
#define MODIFY_RTP 1
#endif

if (MODIFY_RTP)
{
    if (modify_rtp_media_stream(channel->ipm) == FALSE)
        status = FALSE;
} 
```

在编译器命令行上你可以有`-DDO_NOT_MODIFY_RTP`，或者在配置头中你可以写`#define DO_NOT_MODIFY_RTP`，RTP 流不会改变。通过省略`DO_NOT_MODIFY_RTP`宏的定义，将调用该函数并可以修改 RTP 流。

或者您可以反转条件，以便默认不修改流：

```
#if defined(DO_MODIFY_RTP)
#define MODIFY_RTP 1
#else
#define MODIFY_RTP 0
#endif 
```

所示代码的最大优点是它始终被编译——但优化器将消除对`modify_rtp_media_stream()`if MODIFY_RTP 为 0 的调用。这意味着编译器会检查语句的语法，因此它不会因为它周围的代码发生了变化。如果调试代码没有被编译，它会随着周围代码的变化而衰减，但编译器不会通知您问题，因为预处理器删除了代码，因此编译器本身看不到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:58:01.127

如果宏要在除该单个文件之外的其他文件中使用，我建议不要这样做。如果其他人要阅读代码 - 他们必须导航到另一个文件才能找到宏的定义。

`#define`通常用于替换您将在任何地方使用的文本文字或常量，例如“true”或“false”。在这种情况下，如果有人使用它并且“状态”没有被定义或实例化，它将引发错误。

就个人而言，我只是将它称为一个函数并根据它的作用适当地命名它。只要有一个函数，如果为 false 则返回 0，如果为 true 则返回 1 将使其用法更清晰，并且如果其他人修改代码不太容易被滥用。

如果项目足够大，您可能会在六个月内忘记#define 是什么，所以请提前考虑并避免一些痛苦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:03:18.240

测试阳性

```
#define DO_MODIFY_RTP
#ifdef DO_MODIFY_RTP // 
if(modify_rtp_media_stream(channel->ipm) == FALSE) {
        status = FALSE;
    }
#endif 
```

测试阴性

```
#define DO_MODIFY_RTP
#ifndef DO_MODIFY_RTP // 
if(modify_rtp_media_stream(channel->ipm) == FALSE) {
        status = FALSE;
    }
#endif 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T04:10:24.593

您提出的方法根本不标准。我必须仔细观察才能注意到宏是不同的，因为在那种配置中它们通常是相同的。

这更常见：

```
#define DO_MODIFY_RTP
#ifdef DO_MODIFY_RTP
    if(modify_rtp_media_stream(channel->ipm) == FALSE) {
        status = FALSE;
    }
#endif 
```

或者

```
#undef DO_MODIFY_RTP
#ifdef DO_MODIFY_RTP
    if(modify_rtp_media_stream(channel->ipm) == FALSE) {
        status = FALSE;
    }
#endif 
```

# javascript - Javascript：将动态字符串与数组匹配

> ID：15539153
> 
> 赞同：1
> 
> 时间：2013-03-21T03:51:35.530
> 
> 标签：javascript

我正在尝试自学javascript。我选择了一些我认为很简单的东西，但很快就遇到了问题。

我正在尝试在一个字符串中搜索用户给出的另一个字符串。

到目前为止，我的代码是：

```
var source = "XREs2qqAQfjr6NZs6H5wkZdOES5mikexRkOPsj6grQiYNZfFoqXI4Nnc1iONKVrA";
var searchString = []; //the users input
searchString = prompt("Enter search string");
var hits = [];
var one = 0;
var two = 0;
var k = 0;

var sourceSearch = function(text) {
    for(i = 0; i < source.length; i++) { //for each character in the source
        if(source[i] === searchString[0]) {  //if a character in source matches the first element in the users input
            one  = source.indexOf(i); //confused from here on
            for(p = searchString.length; p > 0; p--) {

            }                    
        }
    }
};

sourceSearch(searchString); 
```

我的想法是：

*   检查第一个循环是否找到与用户输入中的第一个字符匹配的字符
*   如果匹配，则检查第一个字符之后的下一个 X 字符是否与源字符串中的下一个 X 字符匹配
*   如果它们都匹配，则将它们推送到 hits 数组

我的问题：我不知道如何在不嵌套很多 if 语句的情况下遍历数组，即使这样，考虑到我希望程序可以处理任何输入，这也是不够的。

任何想法都会有所帮助。首先十分感谢。

注意：我正在测试的想法中有一些未使用的变量，但我无法使它们起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:54:55.557

你可以试试：

```
if (source.indexOf(searchString) !== -1) {
// Match!
}
else
{
//No Match!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:03:04.677

要遵循您的方法，您可以使用 2 个索引：

```
var sourceSearch = function(text) {
    j = 0;
    for(i = 0; i < source.length; i++) {
        if(source[i] === text[j]) {
            j++;                   
        } else {
            j = 0;
        }
        if (j == text.length) {
            console.log(i - j); //this prints the starting index of the matching substring
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:03:21.463

正如到目前为止的其他答案所指出的那样，JavaScript 字符串有一个`indexOf`功能可以满足您的需求。如果你想看看它是如何“手工”完成的，你可以像这样修改你的函数：

```
var sourceSearch = function(text) {
    var i, j, ok; // always declare your local variables. globals are evil!
    // for each start position
    for(i = 0; i < source.length; i++) {
        ok = true;
        // check for a match
        for (j = searchString.length - 1; ok && j >= 0; --j) {
            ok = source[i + j] === searchString[j];
        }
        if (ok) {
            // searchString found starting at index i in source
        }
    }
}; 
```

此函数将查找找到的所有位置`source`。`searchString`（当然，你可以在第一次成功时跳出循环。）逻辑是使用外循环前进到每个候选开始位置，`source`并使用内循环测试该位置是否真的是匹配的位置到`searchString`.

这不是搜索字符串的最佳算法。内置算法要快得多（既是因为它是一种更好的算法，也是因为它是本机代码）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:21:53.733

这些答案都很好，但我可能会选择这样的东西：

```
var source = "XREs2qqAQfjr6NZs6H5wkZdOES5mikexRkOPsj6grQiYNZfFoqXI4Nnc1iONKVrA";
var searchString = []; //the users input
searchString = prompt("Enter search string");
var hits = source.split(searchString);
var hitsCount = hits.length - 1; 
```

这样，您就拥有了所有需要的数据，如果这对您很重要，那么您就可以确定每次点击在他的来源中发生的位置。

# jquery - 动态创建的复选框元素未分配调用函数

> ID：15539160
> 
> 赞同：1
> 
> 时间：2013-03-21T03:52:15.570
> 
> 标签：jquery, html, dynamic

我在区域包装器（div）中有一组复选框。当您选中其中一个时，将显示链接区域包装器，然后将自身附加到链接区域包装器。当我取消选中链接区域包装器中的复选框时，我想删除它们，也取消选中区域包装器中的复选框。

我尝试`on();`了方法，但它不起作用。它甚至不调用 on 方法。

我在[JSFiddle](http://jsfiddle.net/Hb5Gf/)有一个演示。谢谢你。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:00:16.050

使用`document.on`.

```
$(document).on("change",'#linked_areas_wrapper input[type="checkbox"]' ,function () { 
```

### **[`Demo`](http://jsfiddle.net/Hb5Gf/5/)**

# javascript - 如何仅选择某些 JSON 键

> ID：15539164
> 
> 赞同：0
> 
> 时间：2013-03-21T03:52:50.007
> 
> 标签：javascript, json

从 Web Socket 调用中，我将收到不同的 JSON 格式作为响应，如下所示

一个以“AS”开头 另一个以“SD”开头

**第一个 JSON**

```
[
    [
        "AS",
        "POWER",
        "SMLL"
    ],
    [
        "AS",
        "SART",
        "SDF"
    ]

] 
```

* * *

**第二个 JSON**

```
[
    [
        "SD",
        "R",
        "DSL"
    ],
    [
        "SD",
        "R",
        "DSL"
    ]

] 
```

* * *

我正在尝试调试并想看看我得到了什么 Response ，所以我只想打印具有“AS”的键（上面显示的第一个 JSON）

这是我的 WebSocket HTML 程序

```
function testWebSocket() 
{
websocket = new WebSocket(wsUri); 
websocket.onopen = function(evt) { onOpen(evt) };
websocket.onclose = function(evt) { onClose(evt) };
websocket.onmessage = function(evt) { onMessage(evt) };
websocket.onerror = function(evt) { onError(evt) };
}

function onMessage(evt)
{

evt.data[1]

    writeToScreen('<span style="color: blue;">' + evt.data+'</span>');

} 
```

请让我知道如何设置一个条件，以便它只打印“AS”键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:15:40.947

在从套接字返回的数据上运行：

```
//somehow assign the result of the socket to theData
goodData=new Array();
parsed=JSON.parse(theData);
for(i=0;i<parsed.length;i++){
    if(parsed[i][0]=='AS')
        goodata.push(parsed[i])
}
stringifiedData=JSON.stringify(goodData);
//now, stringifiedData is a string containing only the values starting with "AS" 
```

这未经测试，因此请在评论中告诉我它是否不起作用。

# html - 具有自定义用户字体大小样式和颜色的 HTML 文本区域

> ID：15539166
> 
> 赞同：2
> 
> 时间：2013-03-21T03:52:51.247
> 
> 标签：html, text, area

如何在 html 中创建一个文本区域，用户可以在其中更改字体样式、大小和颜色。我花了大约一个小时搜索无济于事。我可以找到简单的文本框，用户可以在其中输入数据，但不能在其中更改字体大小样式和颜色

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:17:04.890

尝试使用带有自定义配置工具栏的 TinyMCE 文本编辑器（您应该关闭不需要的工具栏按钮）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T04:22:11.080

我认为您正在寻找 textarea (WYSIWYG) 编辑器。您可以通过谷歌搜索找到更多信息。试试这些，

**[CK编辑器](http://ckeditor.com/)**

演示：[http ://ckeditor.com/demo](http://ckeditor.com/demo)

**[TinyMCE](http://www.tinymce.com/)**

演示：[http ://www.tinymce.com/tryit/full.php](http://www.tinymce.com/tryit/full.php)

**有关更多**信息，请查看这些链接以获取更多编辑器，

[http://web.enavu.com/tutorials/14-jquery-and-non-jquery-rich-text-editors/](http://web.enavu.com/tutorials/14-jquery-and-non-jquery-rich-text-editors/)

[http://www.webdesignerdepot.com/2008/12/20-excellent-free-rich-text-editors/](http://www.webdesignerdepot.com/2008/12/20-excellent-free-rich-text-editors/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:11:50.910

在最基本的情况下，您可能需要编写一些 javascript。

例如，您可能有一个显示从 4px 到 30px 的字体大小的下拉菜单。例子：

```
<textarea id="textarea1">test 123</textarea>
<select onchange="textarea1.style.fontSize = this.value;">
     <option value="12px" selected="selected">12px</option>
     <option value="4px">4px</option>
     <option value="30px">30px</option>
</select> 
```

对于更改背景颜色，onchange 代码可能带有红色、绿色`textarea1.style.backgroundColor = this.value;`等值。`#ff0000``#00ff00`

要更改样式，您可能需要一些 if 语句，例如：

```
if(this.value == 'u')
    textarea.style.textDecoration = 'underline';
else
    textarea.style.textDecoration = '';
if(this.value == 'i')
    textarea.style.fontStyle = 'italic';
else
    textarea.style.fontStyle = 'normal';
if(this.value == 'b')
    textarea.style.fontWeight = 'bold';
else
    textarea.style.fontWeight = ''; 
```

尽管您可能需要稍微自定义上面的代码以适应组合样式，例如粗斜体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T04:02:33.607

尝试这个

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
  #container {width:100%; text-align:center;}

</style>
</head>

<body>
<div id="container">
<textarea name="mytextarea" cols="10" rows="10" style="font-family:comic sans ms"></textarea>
</div>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T04:17:42.497

尝试这个 ：-

```
$('btn1').click(function(){
$('textarea').css("font-style","italic");
} 
```

我认为您必须为每种样式创建一个按钮列表，然后根据需要更改 css 方法的第二个参数。

# c++ - 使用 gmock 的具有 11 个参数的模拟方法

> ID：15539169
> 
> 赞同：7
> 
> 时间：2013-03-21T03:53:04.903
> 
> 标签：c++, unit-testing, googletest, gmock

我正在使用 gmock 在遗留代码中模拟我的依赖项。其中一个类有一个带有 11 个参数的方法。当我尝试使用 MOCK_METHOD11_WITH_CALLTYPE 来模拟它时，我发现这个宏不存在。gmock 最多只支持 10 个参数。你对此有何建议？我用假人实现这个方法吗？还是复制和扩展宏？谢谢！

PS，我现在不需要在我的测试中模拟这个方法，但将来可能需要这样做。

此致，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T04:22:06.693

参数超过 10 个的方法可能是麻烦的迹象。我可以建议一种解决方法，这将有助于您的具体情况，但除了模拟之外，这也可能是一个好主意。将几个有意义的参数作为一个组，并将它们聚合到一个结构中。然后将该结构的实例作为参数传递给该方法。因此，您可能有 3 或 4 个参数，而不是 11 个参数。这不仅有助于解决您遇到的模拟库问题，还可以提高您的类的可用性，因为具有这么多参数的方法通常很难在呼叫站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-12T16:54:25.133

如果有人需要更多 gmock 参数，这里是一个仅标题扩展：[gmock-more-args](https://github.com/apriorit/gmock-more-args)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-18T15:33:03.640

您尝试模拟的方法是纯虚拟的。这是我在不更改现有代码的情况下所做的：

```
struct ParamsMoreThanTen
{
  Param_Type param_1;
  Param_Type param_N;
};

MOCK_METHOD1(methodWithMoreThanTenParms, methodReturnType(ParamsMoreThanTen params));

methodReturnType methodWithMoreThanTenParms(
    Param_Type param_1,
    Param_Type param_N) override
{

  return    methodWithMoreThanTenParms(ParamsMoreThanTen
  {
    Param_Type param_1,
    Param_Type param_N
  });

}; 
```

# c++ - 时间：2019-05-10 标签：c++rand()%100

> ID：15539170
> 
> 赞同：0
> 
> 时间：2013-03-21T03:53:15.980
> 
> 标签：c++, arrays, random, populate

我试图用 0-100 的随机 200 个数字填充一个数组。我得到它填充除了最后几个数字非常奇怪。

这是我的代码。

```
 for (int i = 0; i < NUM_LIST_ELEMENTS; i++)
 {
    int  j = rand() % 100;

     list[i] = j;

 } 
```

我的输出如下

原始数组：

```
41  67  34   0  69  24  78  58  62  64   5  45  81  27  61  91  95  42  27  36  91   4   2  53  92  82  21  16  18
95  47  26  71  38  69  12  67  99  35  94   3  11  22  33  73  64  41  11  53  68  47  44  62  57  37  59  23  41
29  78  16  35  90  42  88   6  40  42  64  48  46   5  90  29  70  50   6   1  93  48  29  23  84  54  56  40  66
76  31   8  44  39  26  23  37  38  18  82  29  41  33  15  39  58   4  30  77   6  73  86  21  45  24  72  70  29
77  73  97  12  86  90  61  36  55  67  55  74  31  52  50  50  41  24  66  30   7  91   7  37  57  87  53  83  45
 9   9  58  21  88  22  46   6  30  13  68   0  91  62  55  10  59  24  37  48  83  95  41   2  50  91  36  74  20
96  21  48  99  68  84  81  34  53  99  18  38   0  88  27  67  28  93  48  83   7  21  10  17  13  14-858993460

 9  16  35  51   0  49  19  56  98   3  24   8  44   9  89   2  95  85  93  43  23  87  14   3  48   0  58  18  80
96  98  81  89  98   9  57  72  22  38  92  38  79  90  57  58  91  15  88  56  11   2  34  72  55  28  46  62  86
75  33  69  42  44  16  81  98  22  51  21  99  57  76  92  89  75  12   0  10   3  69  61  88   1  89  55  23   2
85  82  85  88  26  17  57  32  32  69  54  21  89  76  29  68  92  25  55  34  49  41  12  45  60  18  53  39  23
79  96  87  29  49  37  66  49  93  95  97  16  86   5  88  82  55  34  14   1  16  71  86  63  13  55  85  53  12
 8  32  45  13  56  21  58  46  82  81  44  96  22  29  61  35  50  73  66  44  59  92  39  53  24  54  10  45  49
86  13  74  22  68  18  87   5  58  91   2  25  77  14  14  24  34  74  72  59  33  70  87  97  18  77-33686019 
```

请注意，每个数组中的最后一个数字真的很奇怪。我能做些什么来避免这种情况吗？顺便说一句，这是两个不同的数组。

**感谢所有发帖的人！我让它工作了！**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T03:54:24.450

您正在阅读超出数组末尾的内容。

例如，如果你用 200 个元素填充一个数组，你应该从 0 到 199 写入和读取，而不是 0 到 200 或 1 到 200。

顺便说一句 - rand() % 100 不会生成 0 到 100 的数字。它只会生成 0 到 99 的数字。

[此外，正如 Randy Howard 所说（谢谢），您可以按照http://www.azillionmonkeys.com/qed/random.html](http://www.azillionmonkeys.com/qed/random.html)上的建议获得更均匀的随机生成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:59:38.537

这可能是因为打印结果的代码有问题。您可能从索引 0 循环到 200，它有 201 个项目。

我数了数你的输出，发现有 201 个项目，如果最后一个 77-33686019 实际上是 2 个单独的数字。

如果不是这样，您的代码中可能有一些 printf/cout，实际上会打印一些其他值。要确认这一点，您可以`printf ("\n");`在输出数组的循环之后立即尝试。如果您的负数最终出现在不同的行上，您就会知道它是您的代码后面的其他一些 printf。

您可能想`int j = rand() % 101;`改用，以便获得 0 到 100。您的原始代码为您提供了从 0 到 99 的随机范围。

# java - Eclipse插件开发——在多个插件中的组件之间拖放

> ID：15539171
> 
> 赞同：1
> 
> 时间：2013-03-21T03:53:17.847
> 
> 标签：java, eclipse, eclipse-plugin

我开发了两个插件，`plugin1`和`plugin2`. 其中`plugin1`有一个视图称为`pluginOneView`，而`plugin2`另一个视图称为`pluginTwoView`。所以我的要求是上面的可拖动组件很少`pluginTwoView`，我应该能够将它拖动到`pluginOneView`. 目前我正在开发相同的拖放功能，我的代码是 (in `pluginView2`) for `DragSource`：

```
DragSource ds = new DragSource(btn, DND.DROP_MOVE); //btn is a draggable component
    ds.setTransfer(new Transfer[] { TextTransfer.getInstance() });

    ds.addDragListener(new DragSourceAdapter() {
             // There are dragStart and other methods here
        }
} 
```

但我的问题在于`DropTarget`方法：

```
DropTarget target = new DropTarget(component, dtl); 
```

在这里，`component`我需要将目标添加为`pluginOneView`（在另一个视图中）。我的问题是如何在工作区中获取该视图的组件对象，以便可以将其作为参数传递给`DropTarget`方法？

我试图得到

```
PlatformUI.getWorkbench().getViewRegistry().find("targetId"); 
```

但它返回我的`IViewDescriptor`类型，我需要`component`类型。任何人都可以帮助我吗？因为我是 Eclipse 插件开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:59:43.430

好吧，我认为您误解了如何使用 DropTarget。您不需要知道要拖动到的插件。您还使用了 TextTransfer，但我假设您想要拖动 Java 对象而不是字符串。因此我做了这个小例子，展示了如何在多个视图之间拖动对象（可能在不同的插件中）。在我的示例中，传输了一个 ISomeClass 类型的对象。为了传输它，ISomeClass 必须是可序列化的。我已经为我自己的 TransferType 提供了处理传输的 SomeClassTransfer 类。请注意，两个视图插件都需要访问 ISomeClass 和 SomeClassTransfer 定义。实现这一点的最简单方法是制作包含这些类的第三个插件。然后，两个视图插件都可以保存对第三个插件的引用。

**SomeClassTransfer：**

```
public class SomeClassTransfer extends ByteArrayTransfer {
    private final static String[] typeNames;
    private final static int[] typeIds;
    private final static SomeClassTransfer instance;

    static {
        String typeName = "SomeClassTransfer";
        int id = registerType(typeName);
        typeNames = new String[] { typeName };
        typeIds = new int[] { id };
        instance = new SomeClassTransfer();
    }

    public static SomeClassTransfer getInstance() {
        return instance;
    }

    private SomeClassTransfer() {
    }

    @Override
    protected int[] getTypeIds() {
        return typeIds;
    }

    @Override
    protected String[] getTypeNames() {
        return typeNames;
    }

    @Override
    protected void javaToNative(Object object, TransferData transferData) {
        if (object instanceof ISomeClass) {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            ObjectOutput out = null;
            try {
                out = new ObjectOutputStream(bos);
                out.writeObject(object);
                byte[] objectBytes = bos.toByteArray();
                object = objectBytes;
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                try {
                    out.close();
                    bos.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        super.javaToNative(object, transferData);
    }

    @Override
    protected ISomeClass nativeToJava(TransferData transferData) {
        ISomeClass someClass = null;

        byte[] objectBytes = (byte[]) super.nativeToJava(transferData);
        ByteArrayInputStream bis = new ByteArrayInputStream(objectBytes);
        ObjectInput in = null;
        try {
            in = new ObjectInputStream(bis);
            Object o = in.readObject();
            if (o instanceof ISomeClass) {
                someClass = (ISomeClass) o;
            }
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        } finally {
            try {
                bis.close();
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        return someClass;
    }
} 
```

**源码视图：**

```
 int operations = DND.DROP_MOVE | DND.DROP_COPY | DND.DROP_LINK;
    Transfer[] types = new Transfer[] { SomeClassTransfer.getInstance() };
    DragSource source = new DragSource(tableViewer.getControl(), operations);
    source.setTransfer(types);

    source.addDragListener(new DragSourceListener() {
        @Override
        public void dragStart(DragSourceEvent event) {
            if (tableViewer.getSelection().isEmpty()) {
                // do not start drag
                event.doit = false;
            }
        }

        @Override
        public void dragSetData(DragSourceEvent event) {
            if (SomeClassTransfer.getInstance().isSupportedType(
                    event.dataType)) {
                event.data = ((IStructuredSelection) tableViewer
                        .getSelection()).getFirstElement();
            }
        }

        @Override
        public void dragFinished(DragSourceEvent event) {
            // A Move operation has been performed so remove the data
            // from the source
            if (event.detail == DND.DROP_MOVE) {
                tableViewer.remove(((IStructuredSelection) tableViewer
                        .getSelection()).getFirstElement());
            }
        }
    }); 
```

**目标视图：**

```
 int operations = DND.DROP_MOVE | DND.DROP_COPY | DND.DROP_LINK;
    Transfer[] types = new Transfer[] { SomeClassTransfer.getInstance() };
    DropTarget target = new DropTarget(tableViewer.getControl(), operations);
    target.setTransfer(types);

    target.addDropListener(new DropTargetListener() {
        @Override
        public void dragEnter(DropTargetEvent event) {
        }

        @Override
        public void dragOver(DropTargetEvent event) {
        }

        @Override
        public void dragLeave(DropTargetEvent event) {
        }

        @Override
        public void dragOperationChanged(DropTargetEvent event) {
        }

        @Override
        public void dropAccept(DropTargetEvent event) {
        }

        @Override
        public void drop(DropTargetEvent event) {
            if (event.data == null) {
                // no data to copy, indicate failure in event.detail
                event.detail = DND.DROP_NONE;
                return;
            }
            // data copied to viewer
            tableViewer.add((ISomeClass) event.data);
        }
    }); 
```

此代码使您能够在两个完全独立的视图之间拖动数据。

# python - 在python构造库（用于解析二进制数据）中，如何将其余数据分组为一个字段？

> ID：15539172
> 
> 赞同：0
> 
> 时间：2013-03-21T03:53:20.507
> 
> 标签：python, parsing, protocols, construct

我正在使用 Python 构造库来解析蓝牙协议。图书馆的链接在[这里](http://construct.readthedocs.org/en/latest/index.html)

由于协议非常复杂，我将解析细分为多个阶段，而不是构建一个巨大的结构。现在我已经将大原始数据解析成这个结构：

```
Container({'CRC': 'd\xcbT',
 'CRC_OK': 1,
 'Channel': 38,
 'RSSI': 43,
 'access_addr': 2391391958L,
 'header': Container({'TxAdd': False, 'PDU_length': 34, 'PDU_Type': 'ADV_IND', 'RxAdd': False}),
 'payload': '2\x15\x00a\x02\x00\x02\x01\x06\x07\x03\x03\x18\x02\x18\x04\x18\x03\x19\x00\x02\x02\n\xfe\t\tAS-D1532'}) 
```

如您所见，有效负载的长度表示为 PDU_length，即 34。有效负载具有以下结构：

[前6个八位组：AdvertAddress][0-31个八位组的其余数据：AdvertData]

但是，当我开始将有效负载解析为独立结构时，我在有效负载构造的上下文中丢失了 34 的长度。如何创建一个将前 6 个八位字节解析为 AdvertAddress 并将其余数据分组为 AdvertData 的构造？

我目前的解决方案如下所示：

```
length = len(payload) #I didn't use PDU_length but len(payload) gives me back 34 also.
ADVERT_PAYLOAD = Struct("ADVERT_PAYLOAD",
    Field("AdvertAddress",6),
    Field("AdvertData",length-6),
)
print ADVERT_PAYLOAD.parse(payload) 
```

这给出了正确的输出。但显然并非所有有效载荷的大小都是 34。这种方法需要我在`ADVERT_PAYLOAD`需要解析新的有效载荷时构造这个。

我多次阅读文档，但找不到任何相关内容。我无法将有效负载长度的知识传递到 的上下文中`ADVERT_PAYLOAD`，也无法获取传递给`parse`方法的参数的长度。

Maybe there is no solutions to this problem. But then, how do most people parse such protocol data? As you go further into the payload, it subdivides into more types and you need more more smaller constructs to parse them. Should I build a parent construct, embedding smaller constructs which embed even smaller constructs? I can't imagine how to go about building such a big thing.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:06:55.017

`GreedyRange` will get a list of char, and `JoinAdapter` will join all the char together:

```
class JoinAdapter(Adapter):
    def _decode(self, obj, context):
        return "".join(obj)

ADVERT_PAYLOAD = Struct("ADVERT_PAYLOAD",
    Field("AdvertAddress",6),
    JoinAdapter(GreedyRange(Field("AdvertData", 1)))
)

payload = '2\x15\x00a\x02\x00\x02\x01\x06\x07\x03\x03\x18\x02\x18\x04\x18\x03\x19\x00\x02\x02\n\xfe\t\tAS-D1532'
print ADVERT_PAYLOAD.parse(payload) 
```

output:

```
Container:
    AdvertAddress = '2\x15\x00a\x02\x00'
    AdvertData = '\x02\x01\x06\x07\x03\x03\x18\x02\x18\x04\x18\x03\x19\x00\x02\x02\n\xfe\t\tAS-D1532' 
```

# mongodb - 用两个条件检查记录的最简单方法是什么，如果不存在则插入，如果存在一个或多个，则全部更新

> ID：15539174
> 
> 赞同：2
> 
> 时间：2013-03-21T03:53:47.927
> 
> 标签：mongodb, flask, mongoengine

我有一个该死的时间做一个查询。

有一个building_id，用户名和正确的字段。

我们需要查看用户和特定建筑物是否存在任何记录（因为他们只能拥有一票）。

如果它不存在，我们需要插入一条新记录，其中包含 building_id、用户名和正确的。

如果确实存在，我们需要找到具有 building_id 和 username 的记录，并更新正确以成为新的投票。

我一直在玩保存、更新、get_or_create，它们都不断弹出错误。这将如何在 MongoEngine 中完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T01:30:10.563

您可以使用简单的更新，将 upsert 和 multiple 设置为 true：

[http://docs.mongodb.org/manual/reference/method/db.collection.update/](http://docs.mongodb.org/manual/reference/method/db.collection.update/)

语法如下：

```
db.collection.update(
   <query>,
   <update>,
   { upsert: <boolean>, multi: <boolean> }
) 
```

关于两个条件的检查，您的查询可以包含任意数量的内容。

我不知道你的收藏，但也许：

```
db.yourCollection.update({"user": "someUser", "buildindId": "someBuildingId"}, {"correct": "your correction"}, {upsert: true, multi: true}) 
```

# javascript - 当 DIV 低于某个特定值时自动设置 DIV 的高度

> ID：15539175
> 
> 赞同：1
> 
> 时间：2013-03-21T03:54:05.273
> 
> 标签：javascript, jquery, css

我正在使用 DIV 包装表格以提供滚动功能，如下所示：http: [//jsfiddle.net/WVjK5/1/](http://jsfiddle.net/WVjK5/1/)

当列表很大时它工作正常，但是当列表很小时，如下所示：http: [//jsfiddle.net/HJUuA/](http://jsfiddle.net/HJUuA/)你可以看到“全选”和“全部清除”离第一个表很远我不想要。

我知道原因是DIV的固定高度为300px。我想要的是 DIV 的高度不应大于 300px，如果小于 300px，则 DIV 的高度字段应自动更改。这样全选和清除所有按钮就在表格的下方。

```
.tableScroll {
    height: 300px; 
    overflow: auto;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T03:56:46.853

我想你可能只想使用 `max-height: 300px;` 而不是 `height: 300px;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:57:26.000

尝试使用最大高度

来自您的第二个 JSFiddle 的示例：

```
.tableScroll {
    max-height: 300px; 
    overflow: auto;
} 
```

这是此属性的一个很好的资源[http://reference.sitepoint.com/css/max-height](http://reference.sitepoint.com/css/max-height)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:00:24.457

只需将高度更改为最大高度。

[http://jsfiddle.net/HJUuA/3/](http://jsfiddle.net/HJUuA/3/)

```
.tableScroll {
    max-height: 300px; 
    overflow: auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T04:02:54.100

使用最大高度而不是高度。

```
.tableScroll {
    max-height: 300px; 
    overflow: auto;
} 
```

# iphone - MPMoviePlayerViewController 支持横向 iOS 4.3 到 6.1

> ID：15539177
> 
> 赞同：0
> 
> 时间：2013-03-21T03:54:06.290
> 
> 标签：iphone, landscape

我有一个关于方向和播放视频的疑问，

我的应用程序支持纵向模式，但是当我启动任何视频时，它只会运行横向模式，然后在视频完成后自动进入纵向模式。

在我正在使用的代码下方

```
**MyMovieViewController.h** 

#import <MediaPlayer/MediaPlayer.h>

@interface MyMovieViewController : MPMoviePlayerViewController

@end

**MyMovieViewController.m**

@implementation MyMovieViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskLandscapeLeft;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight || interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
}

@end 
```

但以上代码仅适用于 iPhone 4.3 模拟器和我的应用程序支持 4.3 到 6.1。

所以请你帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:01:13.750

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskLandscapeLeft;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight || interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

这几个方法仅在您的设备处于横向时返回 YES。然后它将不支持纵向模式。

# c# - 如何使用 CodeDom 实现非对称访问器可访问性？

> ID：15539183
> 
> 赞同：3
> 
> 时间：2013-03-21T03:54:31.693
> 
> 标签：c#, codedom

如何使用;实现[非对称访问器可访问性](http://msdn.microsoft.com/en-us/library/75e8y5dd%28v=vs.80%29.aspx)`CodeDOM`

```
public string Name
{
    get
    {
        return name;
    }
    protected set
    {
        name = value;
    }
} 
```

[我在这里](https://stackoverflow.com/questions/2414510/c-how-do-i-change-accessibility-on-an-accessor-using-codedom)发现了一个重复的问题，但是现在 C# 5.0 和 .NET framework 4.5 正在运行。现在也不可能了吗？

通过此代码；

```
//Declare a property in target class and set attributes of the property
                CodeMemberProperty newPropertyGetter = new CodeMemberProperty();
                newPropertyGetter.Attributes = (MemberAttributes)Enum.Parse(typeof(MemberAttributes), visibilityGetter) | MemberAttributes.Final;
                newPropertyGetter.Name = propName;
                newPropertyGetter.Type = new CodeTypeReference(propType);
                newPropertyGetter.HasGet = needGet;

                CodeMemberProperty newPropertySetter = new CodeMemberProperty();
                newPropertySetter.Attributes = (MemberAttributes)Enum.Parse(typeof(MemberAttributes), visibilitySetter) | MemberAttributes.Final;
                newPropertySetter.Name = propName;
                newPropertySetter.Type = new CodeTypeReference(propType);
                newPropertySetter.HasSet = needSet; 
```

我可以这样；

```
public string Name
    {
        get
        {
            return name;
        }        
    }

public string Name
    {        
        protected set
        {
            name = value;
        }
    } 
```

它有效吗？或者这不是一个好习惯？

# android - 列表视图中的 OutOfBoundsException

> ID：15539188
> 
> 赞同：1
> 
> 时间：2013-03-21T03:55:13.947
> 
> 标签：android, listview, indexoutofboundsexception

我正在使用列表视图来呈现类似网格视图的活动。有一个 OutOfBoundsException。这是日志。

```
03-21 11:47:13.106: E/AndroidRuntime(597): FATAL EXCEPTION: main
03-21 11:47:13.106: E/AndroidRuntime(597): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
03-21 11:47:13.106: E/AndroidRuntime(597):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
03-21 11:47:13.106: E/AndroidRuntime(597):  at java.util.ArrayList.get(ArrayList.java:304)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.HeaderViewListAdapter.getView(HeaderViewListAdapter.java:225)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.AbsListView.obtainView(AbsListView.java:2022)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.ListView.onMeasure(ListView.java:1155)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.View.measure(View.java:12752)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.View.measure(View.java:12752)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.View.measure(View.java:12752)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.RelativeLayout.measureChild(RelativeLayout.java:579)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:392)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.View.measure(View.java:12752)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.View.measure(View.java:12752)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.View.measure(View.java:12752)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-21 11:47:13.106: E/AndroidRuntime(597):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2265)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.View.measure(View.java:12752)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1074)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2462)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.os.Looper.loop(Looper.java:137)
03-21 11:47:13.106: E/AndroidRuntime(597):  at android.app.ActivityThread.main(ActivityThread.java:4486)
03-21 11:47:13.106: E/AndroidRuntime(597):  at java.lang.reflect.Method.invokeNative(Native Method)
03-21 11:47:13.106: E/AndroidRuntime(597):  at java.lang.reflect.Method.invoke(Method.java:511)
03-21 11:47:13.106: E/AndroidRuntime(597):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-21 11:47:13.106: E/AndroidRuntime(597):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-21 11:47:13.106: E/AndroidRuntime(597):  at dalvik.system.NativeStart.main(Native Method) 
```

我的 ListToGridAdapter 如下：

```
public class ListToGridAdapter extends BaseAdapter implements OnClickListener, OnLongClickListener {

    /**
     * The wrapper content --> adapter
     */
    private SimpleAdapter mAdapter = null;
    /**
     * The number columns
     */
    private int mColumns = 1;
    /**
     * The real onItemClickListener
     */
    private OnGridItemClickListener mGridListener;
    /**
    * The real onItemLongClickListener
    */
    private OnGridItemLongClickListener mGridLongClickListener;

    /**
     * The Context Object
     */
    private Context mContext;

    private int sidebarPixals = 0;
    private int sideBlankPixals = 0;

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if (mColumns == 1) {
            View child = mAdapter.getView(position, convertView, parent);
            setOnItemClickListenerIfNeed(child, position, position);
            setOnItemLongClickListenerIfNeed(child, position, position);
            // no need
            return child;
        }

        return bindGridView(position, convertView, parent);
    }

    protected View bindGridView(int position, View convertView, ViewGroup parent) {
        ViewGroup root = null;
        if (convertView == null || !(convertView instanceof ViewGroup)) {
            root = createRoot();
            root.setClickable(false);
            root.setFocusable(false);
        } else {
            root = (ViewGroup) convertView;
        }
        // columns = 3
        // pos --> real pos
        // 0 --> 0 1 2
        // 1 --> 3 4 5
        // 2 --> 6 7 8
        // so do this
        return bindView(root, position);
    }

    protected ViewGroup bindView(ViewGroup root, int pos) {

        final int count = mAdapter.getCount();
        final int childCount = root.getChildCount();

        for (int i = 0; i < mColumns; i++) {
            // real position
            int index = mColumns * pos + i;

            // 不足一行时，直接返回现有状态
            if (index == count) {
                // fix bug : root是有可能是系统缓存的root，这里直接返回root将导致如果此行数量
                // 不够columns，就会使用缓存的root里的child，为了避免这个问题，必须
                // 将缓存的child移除。
                removeCacheChild(root, index);
                break;
            } else if (index > count) {
                throw new UnknownError("unknowError");
            }

            View child = mAdapter.getView(index, root.getChildAt(i), root);

            setOnItemLongClickListenerIfNeed(child, pos, index);
            setOnItemClickListenerIfNeed(child, pos, index);

            if (childCount == mColumns) {
                // root已经包含了Item，就没有必要继续添加了。
                continue;
            } else {
                if (i == 0 && childCount != 0) {
                    // 如果root已经包含item，但是并不全，这里就移除重新添加
                    // FIXME 也许还有更好的方案
                    root.removeAllViews();
                }
                LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                        // LinearLayout.LayoutParams.WRAP_CONTENT,
                        (mContext.getResources().getDisplayMetrics().widthPixels - sidebarPixals - sideBlankPixals)
                                / mColumns,
                        LinearLayout.LayoutParams.WRAP_CONTENT);
                child.setFocusable(true);
                child.setClickable(true);
                if (child instanceof ViewGroup) {
                    ((ViewGroup) child)
                            .setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
                }
                root.addView(child, lp);
            }
        }
        return root;
    }

    /**
     * remove child view in cache of root
     */
    private void removeCacheChild(ViewGroup root, int index) {
        int realColumns = (index - 1) % mColumns;
        int moveCount = (mColumns - 1) - realColumns;

        for (int i = 0; i < moveCount; i++) {
            final View child = root.getChildAt((mColumns - 1 - i));
            if (child != null) {
                root.removeView(child);
            }
        }
    }

    /**
     * create root for item of ListView
     */
    protected ViewGroup createRoot() {
        LinearLayout root = new LinearLayout(mContext);
        root.setOrientation(LinearLayout.HORIZONTAL);
        LayoutParams lp = new LayoutParams(LayoutParams.MATCH_PARENT,
                LayoutParams.WRAP_CONTENT);
        root.setLayoutParams(lp);
        return root;
    }

    private boolean setOnItemClickListenerIfNeed(View child, int pos,
            int realPos) {
        if (mGridListener == null) {
            return false;
        }
        child.setOnClickListener(this);
        child.setTag(R.id.pos, pos);
        child.setTag(R.id.realPos, realPos);
        return true;
    }

    private boolean setOnItemLongClickListenerIfNeed(View child, int pos,
            int realPos) {
        if (mGridLongClickListener == null) {
            return false;
        }
        child.setOnLongClickListener(this);
        child.setTag(R.id.pos, pos);
        child.setTag(R.id.realPos, realPos);
        return true;
    }

    public void setOnItemClickListener(OnGridItemClickListener listener) {
        this.mGridListener = listener;
    }

    public void setOnItemLongClickListener(OnGridItemLongClickListener listener){
        this.mGridLongClickListener = listener;
    }

    public void setNumColumns(int columns) {
        this.mColumns = columns;
    }

    public int getNumColumns() {
        return mColumns;
    }

    public ListToGridAdapter(Context context, SimpleAdapter adapter) {
        this.mContext = context;
        this.mAdapter = adapter;
        int model = YoutubeAPI.getKindleFireModel();

        if (model == 1){
            sideBlankPixals = 10 * 2;
            sidebarPixals = 0;
        } else if (model == 2){
            sideBlankPixals = 10 * 2;
            sidebarPixals = 60;
        } else if (model == 3){
            sideBlankPixals = (int)(10 * 2 * 1.5);
            sidebarPixals = 78;
        } else if (model == 4){
            sideBlankPixals = (int)(10 * 2 * 1.5);
            sidebarPixals = 90;
        } 

    }

    @Override
    public int getCount() {
        int count = (int) Math.ceil(mAdapter.getCount() / (double) mColumns);
        return count;
    }

    @Override
    public Object getItem(int position) {
        return mAdapter.getItem(position);
    }

    @Override
    public long getItemId(int position) {
        return mAdapter.getItemId(position);
    }

    @Override
    public boolean hasStableIds() {
        return mAdapter.hasStableIds();
    }

    @Override
    public void registerDataSetObserver(DataSetObserver observer) {
        mAdapter.registerDataSetObserver(observer);
    }

    @Override
    public void unregisterDataSetObserver(DataSetObserver observer) {
        mAdapter.unregisterDataSetObserver(observer);
    }

    @Override
    public boolean areAllItemsEnabled() {
        return mAdapter.areAllItemsEnabled();
    }

    @Override
    public boolean isEnabled(int position) {
        return mAdapter.isEnabled(position);
    }

    @Override
    public int getItemViewType(int position) {
        return mAdapter.getItemViewType(position);
    }

    @Override
    public int getViewTypeCount() {
        return mAdapter.getViewTypeCount();
    }

    @Override
    public boolean isEmpty() {
        return mAdapter.isEmpty();
    }

    public ListAdapter getWrappedAdapter() {
        return mAdapter;
    }

    public static interface OnGridItemClickListener {
        public void onItemClick(int pos, int realPos);
    }

    public static interface OnGridItemLongClickListener{
        public void onItemLongClick(int pos, int realPos);
    }

    @Override
    public void onClick(View v) {
        if (mGridListener == null) {
            // no need to feedback
        }
        int pos = (Integer) v.getTag(R.id.pos);
        int realPos = (Integer) v.getTag(R.id.realPos);

        mGridListener.onItemClick(pos, realPos);
    }

    @Override
    public boolean onLongClick(View v) {
        if (mGridLongClickListener == null) {
            // no need to feedback
        }
        int pos = (Integer) v.getTag(R.id.pos);
        int realPos = (Integer) v.getTag(R.id.realPos);

        mGridLongClickListener.onItemLongClick(pos, realPos);
        return true;
    }

} 
```

在活动中，

```
ListToGridAdapter mAdapter = new ListToGridAdapter(this, mVideoGridviewAdapter);
mAdapter.setNumColumns(3);

pullToRefreshListview.setAdapter(mAdapter); 
```

mVideoGridviewAdapter 是一个 simpleAdapter。

哪里有问题？似乎是列表视图的页脚，但我不知道如何修复它。

==== 编辑 =====

在活动中，我添加了一些 AsyncTask 来刷新列表视图。在`onPostExecute`我将一些项目添加到列表视图中，使列表视图更长，并将列表视图的页脚视图从 更改`View.VISIBLE`为`View.INVISIBLE`，这有关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-24T08:03:13.247

我自己想通了。

当更改片段（包含列表视图）时，列表视图会先清空自己，然后列表视图会在滚动时记住索引，然后重新加载列表视图时`IndexOutOfBoundsException`会发生。

所以解决方案是：**在destroy时重置listview的适配器**，代码片段如下

```
public void onDestroyView() {
    if (listview != null && mVideoGridviewAdapter != null) {
        ListToGridWrapper<GridviewAdapter> mAdapter = new ListToGridWrapper<GridviewAdapter>(getActivity(), mVideoGridviewAdapter);
        mAdapter.setNumColumns(2);
        listview.setAdapter(mAdapter);
    }
    super.onDestroyView();
} 
```

# backbone.js - 骨干模型 toJSON 奇怪地缓存自己

> ID：15539189
> 
> 赞同：1
> 
> 时间：2013-03-21T03:55:14.070
> 
> 标签：backbone.js

我对骨干还是陌生的：

这是我很难解释的问题：

在初始化时有一个类似这样的模型：

```
Model:
 {
  Id:xxx,
  Questions:
           [ 
             {
              Id: "yy", 
              Selections: 
                        [ 
                         {OptionId:"aaa"},
                         ...,
                         {OptionId:"zzz"} 
                        ]
             }, 
           ....
           ]
 } 
```

有一个事件方法更新选择集合。事件触发后，我通过以下两个代码得到了两个不同的结果：

```
window.pkg.Questions.get(this.Id).Selections.reset(selectedoptions);

console.log(window.pkg.Questions.get(this.Id).Selections.toJSON());        
console.log(window.pkg.Questions.get(this.Id).toJSON().Selections); 
```

第一个日志显示更新的模型，但后者显示初始默认值。

为什么它会这样工作？

![在此处输入图像描述](../Images/b15aced5a376686e8530d9a62937f3cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:41:27.810

它们是两个不同的副本。您的 QuestionModel 有一个名为 Selections 的 SelectionsCollection 属性和一个也称为 Selections 的 Backbone 属性。我假设您想使用 SelectionsCollection，并且该属性不会与之保持同步。该属性是我认为无意中添加到模型中的原始 json。

很难确切地说如何修复它，因为您没有显示创建和获取这些模型和集合的代码。无论您将 Selections JSON 放在何处并最初`reset`将其放入集合中，您都可以将其从 JSON 中删除和/或将其从`unset`QuestionModel 中删除（如果它已经存在）......

这也会打印错误的原始数据：

```
console.log(window.pkg.Questions.get(this.Id).get('Selections')); // print original JSON 
```

您可以在 QuestionModel 中删除它`parse`：

```
parse: function(data) {
    // removing Selections from data here will prevent
    // it from being added as an attribute.
    delete data.Selections; 
    return data;
} 
```

如果您这样做，并且希望将 Selections 包含在`toJSON`QuestionModel 的输出中，则还需要覆盖`toJSON`.

```
toJSON: function() {
    // get json for Question
    var json = Backbone.Model.prototype.toJSON.call(this);
    // add updated json for selections
    json.Selections = this.Selections.toJSON();

    return json;
} 
```

# spreadsheetgear - SpreadsheetGear - 通过代码创建工作簿视图

> ID：15539192
> 
> 赞同：1
> 
> 时间：2013-03-21T03:55:56.053
> 
> 标签：spreadsheetgear

如何使用带有代码的 Spreadsheetgear 创建工作簿视图。我不想在表单上使用 workbookview 控件，我想动态创建它，然后通过代码将它放在选项卡控件上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:41:42.230

您创建一个工作簿视图对象，然后将其添加到选项卡页控件。

```
 SpreadsheetGear.Windows.Forms.WorkbookView workbookView1 = new SpreadsheetGear.Windows.Forms.WorkbookView();
  tabControl1.TabPages[0].Controls.Add(workbookView1); 
```

# asp.net - asp.net 网站到手机/平板电脑

> ID：15539193
> 
> 赞同：1
> 
> 时间：2013-03-21T03:55:59.743
> 
> 标签：asp.net, css, mobile, tablet

我有一个 asp.net 网站，它包含数据库调用等

使用现有的 asp.net 网站并使其在移动和平板设备中看起来不错的最佳方式是什么？

我做了一些研究，但似乎有很多选择，例如 lessframework.com、jquerymobile 等

我以前没用过mvc，但是有人说要用mvc + jquerymobile

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:07:21.293

没有灵丹妙药可以立即将您的网站转换为移动设备。事实上，在不了解您网站的具体情况的情况下，很难推荐适合您情况的工具，因为您提到的 MVC、JQMobile 等工具将在一种或另一种情况下使用。对于您提出的问题，您将获得个人意见，我们有数以百万计的意见......这是我的：

我建议不要构建像 mobile.website.com 这样的移动特定网站，而是研究响应式设计，其中您的网站和底层数据结构保持不变，但您的视图会根据屏幕空间而变化。Bootstrap 或 HTML5 Boilerplate 或任意数量的设计框架将帮助您入门。您只需要找出适合您网站功能的设计。

我在大多数新项目中都使用[MVC + HTML5 样板](http://nuget.org/packages/Html5Boilerplate.Mvc3.Razor)（我喜欢 Razor），但有时即使它也有太多开销，所以我只是从头开始（多个 PSD，在 Dreamweaver 中转换为 HTML，使用 MVC 和客户端脚本应用逻辑）但这是您必须逐个项目决定的事情。

# java - 如何在java中使用参数化？

> ID：15539194
> 
> 赞同：0
> 
> 时间：2013-03-21T03:56:18.220
> 
> 标签：java

我有这个使用的java代码`<T>`：

```
public static class mySet<T> extends Set {

    // Define a list object using parametric polymorphism
    public final List<T> set;

    // Define the constructor for a Set data type
    public <T> mySet(List<T> given_set) {
        this.set = (List<T>) given_set;
    }
} 
```

但是我在这里得到一个错误`(List<T>) given_set;`。它应该可以工作，因为我将其设置为与最终变量集相同的类型，但事实并非如此。

有谁知道为什么？

Eclipse 说：`Type mismatch: cannot convert from java.util.List<T> to java.util.List<T>`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T03:59:16.767

你没有让它成为同一种类型。通过`<T>`在构造函数声明之前使用，您将引入一个*new* `T`，与类的`T`. 去掉它。然后你也可以删除演员表，它什么都不做。

# java - 客户端-服务器程序，可以从 Java 客户端连接，但不能从 Android 连接

> ID：15539197
> 
> 赞同：0
> 
> 时间：2013-03-21T03:56:27.457
> 
> 标签：java, android, sockets, networking, socket-timeout-exception

我有一个非常简单和基本的工作 Java 客户端/服务器程序。这工作正常。但是，我现在正在尝试编写一个 Android 客户端，但我无法从我的 android 客户端连接到服务器。我对 android 网络代码使用几乎与普通客户端相同的代码。我的 android 代码很简单，它所做的只是从 onCreate 启动这个线程：

```
private int serverPort = 8889;
private String serverIP = "192.168.5.230";
private Socket socket = null;

private Thread clientThread = new Thread("ClientThread") {
    @Override
    public void run() {
        try {
            socket = new Socket();
            socket.connect(new InetSocketAddress(serverIP, serverPort), 1000);
            DataInputStream din = new DataInputStream( socket.getInputStream());
            DataOutputStream dout = new DataOutputStream(socket.getOutputStream());

            while (true) {
                String message = din.readUTF();
                setPicture("picture1");
            }
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       
    }
}; 
```

该端口是我的服务器运行的正确端口，IP 地址也是如此（我从 ifconfig 获得，因为我知道你不能使用 localhost）。当我使用相同的端口和 IP 地址运行我的普通 pc 客户端时，连接就会通过。但是当我在我的 android 设备上运行此代码时，当我尝试连接时套接字超时。

有人对我哪里出错有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:25:10.220

仔细检查您是否在清单文件中添加了权限要求：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

但是，可能更重要的是，192.168.xx 是一个本地或不可路由的网络，因此您需要位于同一网络上，或者知道如何到达 192.168.5.230 地址的网络。您说在设备上尝试时它不起作用-您是在运行时在本地wifi上运行还是在移动网络上运行？如果您使用的是移动设备，请通过 wifi 尝试。

# c# - ReportViewer - 固定页眉和页脚

> ID：15539200
> 
> 赞同：1
> 
> 时间：2013-03-21T03:56:51.300
> 
> 标签：c#, database, visual-studio-2010, ado.net

是否有任何可能的方法来修复页面页眉和页脚，以便在向下滚动并移动到另一个页面时可以看到它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:25:52.540

*嗨* **，您必须单击报表设计器标题上方的列。它将选择整个列，包括表头、表详细信息、表尾，然后单击属性 (F4)。将 FixedHeader 属性更改为 True**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T06:32:46.240

干得好！

1.  选择报告的空白部分
2.  在工具栏（文件、编辑、视图）中，您将找到一个选项**报告**
3.  选择“添加页眉”或“添加页脚”
4.  放置页眉/页脚内容
5.  您可以拖动以相应地更改页眉或页脚的高度

# c - C中的值返回null，不知道为什么

> ID：15539206
> 
> 赞同：0
> 
> 时间：2013-03-21T03:57:18.177
> 
> 标签：c

为什么打印语句返回 null？

```
#include <stdio.h>>
#include <stdlib.h>

struct Node
{
    char abbreviation;
    double number;
    struct Node *next;
};

void insert(char abbreviation, double number, struct Node *head) {
    struct Node *current = head;
    while(current->next != NULL)
    {
        current = current->next;
    }

    struct Node *ptr = (struct Node*)malloc(sizeof(struct Node));
    ptr->abbreviation = abbreviation;
    ptr->number = number;
    current->next = ptr;

    return;
}

int main(int argc, char* argv[]) {
    struct Node *head = (struct Node*)malloc(sizeof(struct Node));
    insert('n',456,head);
    printf("%s\n", head->abbreviation);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:03:17.377

您正在创建一个 head->next 指向的节点，然后在那里插入值。您永远不会在头节点本身中设置任何值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:58:36.147

`abbreviation`是一个字符，而不是一个字符串。你想要`printf("%c\n", head->abbreviation);`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:46:40.207

要添加到[UncleO 的 answer](https://stackoverflow.com/a/15539273/1383051)中，在调用`insert()`您的 之前`main()`，将`head->abbreviation`和设置`head->number`为所需的值并初始化`head->next`为 NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:30:57.447

在此处查看更改：

```
#include <stdio.h>
#include <stdlib.h>

struct Node
{
char abbreviation;
double number;
struct Node *next;
};

void insert(char abbreviation, double number, struct Node *head) {
struct Node *current = head;
while(current->next != NULL)
{
current = current->next;
}

struct Node *ptr = (struct Node*)malloc(sizeof(struct Node));
ptr->abbreviation = abbreviation;
ptr->number = number;
current->next = ptr;

return;
}

int main(int argc, char* argv[]) {
struct Node *head = (struct Node*)malloc(sizeof(struct Node));
insert('n',456,head);
insert('m',453,head);
printf("%c\n", head->next->abbreviation);
printf("%c\n", head->next->next->abbreviation);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T04:49:14.670

请尝试此代码。

```
#include <stdio.h>>
#include <stdlib.h>
struct Node
{
    char abbreviation;
    double number;
    struct Node *next;
};
void insert(char abbreviation, double number, struct Node *head) {
struct Node *current = head;
while(current->next != NULL)
{
    current = current->next;
}

struct Node *ptr = (struct Node*)malloc(sizeof(struct Node));
ptr->abbreviation = abbreviation;
ptr->number = number;
if(head->next==NULL)
{
    head=current=ptr;
}
else
{
    current->next = ptr;
}
return;
}

int main(int argc, char* argv[]) 
{
struct Node *head = (struct Node*)malloc(sizeof(struct Node));
insert('n',456,head);
printf("%s\n", head->abbreviation);
} 
```

# c# - 按拍摄日期将照片分类到文件夹中

> ID：15539211
> 
> 赞同：-1
> 
> 时间：2013-03-21T03:57:35.590
> 
> 标签：c#, sorting, image

我想制作按实际拍摄日期将图片分组到文件夹中的软件。图片将分类到文件夹中，其名称如下：

文件夹：2000

文件夹内：2000年拍摄的一些照片。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:02:50.423

```
List<string> imageFiles= ... // Here you get the image path
Dictionary<int, List<string>> groupedPaths= ... //output dict
foreach(string str in imageFiles)
{
    FileInfo fi=new FileInfo(str);
    int year = fi.CreationTime.Year;
    if(!groupedPath.ContainsKey(year))
    {
       var list=new List<string>();
       list.Add(year, string);
       groupedPaths.Add(year, list);
    }
   else
   {   
       groupedPaths[year].Add(year, str);
   }
//Now you can process with foreach or use LINQ to group your images
foreach(KeyValuePair<int, string> pair in groupedPaths)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T04:07:03.463

要获取照片的实际拍摄日期，您需要查看 Exif 数据。

当您使用时，此数据会自动读入`PropertyItems`数组`Image.FromFile()`。然后，您可以使用另一个参考（[例如这个）](http://www.exiv2.org/tags.html)来获取日期信息的正确代码。你也可以使用[这个库](http://www.codeproject.com/Articles/43665/ExifLibrary-for-NET)来简化代码的阅读。

并非所有图像都有 Exif 数据，因此您可能希望将 David 的答案作为后备。

获得相关日期信息后，您可以使用`Directory.Create(year)`和`File.Move(oldPath, newPath)`组织文件。

# newline - Slim 中的代码格式化 + 续行

> ID：15539213
> 
> 赞同：6
> 
> 时间：2013-03-21T03:57:49.190
> 
> 标签：newline, code-formatting, slim-lang

我最近一直在学习 Slim，我想知道是否有办法格式化或美化我的代码。我一直对使用换行符（按 Enter）持谨慎态度，因为它会导致错误。

我想格式化它的原因是因为我的大部分代码都不能适合我的文本编辑器的单行，通常发生的情况是它继续到下一行，这通常对我来说是不可读的。

这通常只有一行：
`li #{author.first_name} #{author.last_name} <a href="/">View</a><a href="/">Edit</a><a href="/">Delete</a>`

有没有办法或字符来表示续行？我希望链接使用下一行，以便对我来说更具可读性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-22T04:30:46.333

您还可以使用[属性包装器](http://rdoc.info/gems/slim/frames)来跨越多行

```
div[id="#my-id"
  class="my-class" 
  data-author="George Washington"
  data-date="2013-08-21"] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T15:49:32.987

您的示例可以分成更小的部分：

```
li
  =#{author.first_name} #{author.last_name}
    a href="/" View
    a href="/" Edit
    a href="/" Delete 
```

# iphone - iOS：如何防止临时文件可见性

> ID：15539219
> 
> 赞同：1
> 
> 时间：2013-03-21T03:58:05.947
> 
> 标签：iphone, ios, ipad, ios5, ios6

我正在开发一个从静止图像生成临时视频的应用程序。但我不希望用户查看我生成的临时文件。但是当应用程序生成视频文件的那一刻，视频被相机胶卷列出。

我的问题是如何生成无法访问“**相机胶卷、iTunes 和 iCloud** ”的临时媒体文件？

请帮我。提前致谢。

代码：

```
[assetWriter finishWritingWithCompletionHandler:^
     { 
         NSURL *url = _outMovieURL; ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
         [library writeVideoAtPathToSavedPhotosAlbum:url 
                                     completionBlock:^(NSURL *assetURL, NSError *error) 
                                     { 
                                         NSLog(@"Done!"); 
                                     }]; 
     }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:31:03.990

这个块：

```
 [assetWriter finishWritingWithCompletionHandler:^
 { 
     NSURL *url = _outMovieURL; ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
     [library writeVideoAtPathToSavedPhotosAlbum:url 
                                 completionBlock:^(NSURL *assetURL, NSError *error) 
                                 { 
                                     NSLog(@"Done!"); 
                                 }]; 
 }]; 
```

是在相机胶卷中写入文件。因此，当您只创建临时视频时，不要使用它。改为写入该临时视频文件`documentDirectory`，（或者它可能已经存在`documentDirectory`，在您创建它时，您需要做的就是不要使用此代码将该文件写入相机胶卷）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:37:40.720

您应该`NSTemporaryDirectory()`在任何临时文件的末尾使用并附加您自己的词缀。该目录中的文件将由操作系统清理，或者您可以在完成后立即删除。

# java - Java在while循环中读取系统输入

> ID：15539220
> 
> 赞同：0
> 
> 时间：2013-03-21T03:58:18.000
> 
> 标签：java, input

这是一个非常简单的代码，我试图在循环中从键盘输入。对于每个输入，无论我输入什么，循环都会自动额外运行两次并取值 13 和 10。你能指出我做错了什么吗？

代码：

```
public static void main(String args[])
{
    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));

    boolean loop_cond=true;
    int n=1;

    while(loop_cond==true)
    {
        try
        {
            System.out.print("input : ");

            n=br.read();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }

        System.out.print(n+"\n");

    }
}  // end Main 
```

输出 ：

```
input : 6
54
input : 13
input : 10
input : 9
57
input : 13
input : 10
input : 1
49
input : 13
input : 10
input : 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:59:38.950

这些可能是 \r\n 值。尝试使用 Scanner 获取值。

```
 Scanner input = new Scanner(System.in);
 int i = input.nextInt(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T04:08:42.660

改变

```
n=br.read(); 
```

到

```
n = Integer.parseInt(br.readLine()); 
```

但我建议您使用[Scanner](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)类来避免整数转换。

# jpa - 使用外键的 jpa 命名查询不起作用

> ID：15539222
> 
> 赞同：-1
> 
> 时间：2013-03-21T03:58:34.100
> 
> 标签：jpa, named-query

我的实体类

```
@Entity
@Table(catalog = "", schema = "MYIS")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Answers.findAll", query = "SELECT a FROM Answers a"),
    @NamedQuery(name = "Answers.findByAid", query = "SELECT a FROM Answers a WHERE a.aid = :aid"),
    @NamedQuery(name ="Anaswers.findByqid", query ="SELECT a FROM Answers a WHERE a.answerQid.qid = :x"),
    @NamedQuery(name = "Answers.findByAnsValue", query = "SELECT a FROM Answers a WHERE a.ansValue = :ansValue"),
    @NamedQuery(name = "Answers.findByAnsDate", query = "SELECT a FROM Answers a WHERE a.ansDate = :ansDate")})
public class Answers implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(nullable = false)
    private Integer aid;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 4000)
    @Column(name = "ANS_VALUE", nullable = false, length = 4000)
    private String ansValue;
    @Basic(optional = false)
    @NotNull
    @Column(name = "ANS_DATE", nullable = false)
    @Temporal(TemporalType.TIMESTAMP)
    private Date ansDate;
    @JoinColumn(name = "A_USERID", referencedColumnName = "USERID", nullable = false)
    @ManyToOne(optional = false)
    private Users aUserid;
    @JoinColumn(name = "ANSWER_QID", referencedColumnName = "QID", nullable = false)
    @ManyToOne(optional = false)
    private Questions answerQid;
    @JoinColumn(name = "A_GROUPID", referencedColumnName = "GID", nullable = false)
    @ManyToOne(optional = false)
    private Groups aGroupid;

    public Answers() {
    }

    public Answers(Integer aid) {
        this.aid = aid;
    }

    public Answers(Integer aid, String ansValue, Date ansDate) {
        this.aid = aid;
        this.ansValue = ansValue;
        this.ansDate = ansDate;
    }

    public Integer getAid() {
        return aid;
    }

    public void setAid(Integer aid) {
        this.aid = aid;
    }

    public String getAnsValue() {
        return ansValue;
    }

    public void setAnsValue(String ansValue) {
        this.ansValue = ansValue;
    }

    public Date getAnsDate() {
        return ansDate;
    }

    public void setAnsDate(Date ansDate) {
        this.ansDate = ansDate;
    }

    public Users getAUserid() {
        return aUserid;
    }

    public void setAUserid(Users aUserid) {
        this.aUserid = aUserid;
    }

    public Questions getAnswerQid() {
        return answerQid;
    }

    public void setAnswerQid(Questions answerQid) {
        this.answerQid = answerQid;
    }

    public Groups getAGroupid() {
        return aGroupid;
    }

    public void setAGroupid(Groups aGroupid) {
        this.aGroupid = aGroupid;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (aid != null ? aid.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Answers)) {
            return false;
        }
        Answers other = (Answers) object;
        if ((this.aid == null && other.aid != null) || (this.aid != null && !this.aid.equals(other.aid))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.entity.Answers[ aid=" + aid + " ]";
    }

} 
```

我的会议门面

```
import com.entity.Answers;
import com.entity.Groups;
import java.util.List;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

/**
 *
 * @author krishna teja
 */
@Stateless
public class AnswersFacade extends AbstractFacade<Answers> implements AnswersFacadeLocal {
    @PersistenceContext(unitName = "My_communityPU")
    private EntityManager em;

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

    public AnswersFacade() {
        super(Answers.class);
    }

 public List<Answers> getdataByQid(Long qid){

     Query query=em.createNamedQuery("Answers.findByqid");
     query.setParameter(1, qid);
     List<Answers> a =query.getResultList();
        return a;

 }

} 
```

我的托管 bean

```
 @PostConstruct
      public void init(){

            questions = questionsFacade.findAll();
            ansList = answersFacade.getdataByQid(g);

            } 
```

我收到以下异常

```
at com.ejb.AnswersFacade.getdataByQid(AnswersFacade.java:36)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601) 
```

我为外键属性 answerQid 创建了命名查询，并在 sessionfacade 中创建了方法，并尝试在托管 bean 中访问它，默认方法可以正常工作，但我的查询方法不起作用请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:42:08.250

看起来像一个简单的错字。命名查询定义为`Anaswers.findByqid`，但用作`Answers.findByqid`。

# php - ImageMagick 是否足以验证图像确实是图像

> ID：15539224
> 
> 赞同：1
> 
> 时间：2013-03-21T03:58:45.467
> 
> 标签：php, image-processing, imagemagick, security, image-uploading

我使用下面的代码来测试上传的文件是否确实是图像。（下面的代码与使用 ImageMagick 时在 php 网站中找到的 OOP 样式不同，因为我在共享服务器上，这是我的主机在使用 ImageMagick 时提供的说明，实际脚本将涉及重新路由用户、取消链接或删除上传的文件以及更多所以请不要批评下面的代码，我只是想详述使用**IMAGICK IDENTIFY**作为图像验证工具的概念。）

```
<?php
if(!exec('/usr/bin/identify /home/user/public_html/joteco_test_folder/thisisanimage.jpg'))
{
echo "NOT AN IMAGE";
}
else
{
echo exec('/path/here/identify /path/here/thisisanimage.jpg');
}
?> 
```

我在上面的代码上尝试了以下内容：

1.  用photoshop cs6制作的.jpg。（它通过并回显了以下细节“810x203 810x203+0+0 8-bit DirectClass 32.4KB 0.000u 0:00.000”）

2.  .txt 文件。（它失败并回显“不是图像”）

3.  使用记事本制作的 .jpg 文件，其中包含写有“我是图像”的文本字符。（它失败并回显“不是图像”）

（在我看来，我认为这是成功的，但我知道黑客所做的比我在测试#3 中所做的更多。）

所以！您认为这足以作为安全检查来验证上传的文件是否确实是图像吗？或者 ImageMagick 中是否有其他工具可以用于此目的？你的意见？

（请不要建议或提及（ MIME | EXTENSION | GETIMAGESIZE ），因为它在 stackoverflow 中被反复提及为验证上传文件的无用方法。谢谢）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T04:02:47.733

这应该可以帮助你。

```
$im = @imagecreatefromjpeg($imgname);
if(!$im)
    {
    return false;
    }
else
    {
            imagedestroy($im);
            return true;
    } 
```

除了检查它是否是图像之外，它还会为不完整（部分上传）的图像返回 false

# marker - 如何在 Eclipse RCP 中为编辑器实现标记和标记解析

> ID：15539231
> 
> 赞同：0
> 
> 时间：2013-03-21T03:59:36.053
> 
> 标签：marker

我需要一个关于 Eclipse RCP 中的标记和标记解析实现的教程。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:00:52.310

您的问题需要表明您已经对该主题进行了一些研究。当您在研究中遇到困难时，Stackoverflow 会为您提供帮助。

也就是说，我发现这些网站很有帮助。

*   [日食帮助](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/wrkAdv_markerresolution.htm)
*   [Zoltán Ujhelyi 的标记和注释教程](http://cubussapiens.hu/2011/05/custom-markers-and-annotations-the-bright-side-of-eclipse/)

# asp.net-mvc - 自定义区域主题

> ID：15539238
> 
> 赞同：0
> 
> 时间：2013-03-21T03:59:42.887
> 
> 标签：asp.net-mvc, content-management-system, orchardcms, orchardcms-1.6

我正在构建一个 Orchard 网站，其主题是由一位对 Orchard 一无所知的图形艺术家构建的。插入它相当简单，但是他构建它的方式为我试图复制的最终用户提供了一些不同的选项，最好不构建自定义模块。他构建模板的方式是包括四种不同的布局类型：50/50、33/67、67/33 和 100%（由于 Model.Content 的原因，这种布局有效）。

示例图形视图：

```
50/50
=================================================================================
|                                         |                                     |
|  <Left bar with HTML content>           |  <Right bar with HTML content>      |
|                                         |                                     |
=================================================================================

33/67
=================================================================================
|                       |                                                       |
| <Small Left w/HTML>   |  <Large Right w/HTML>                                 |
|                       |                                                       |
================================================================================= 
```

（等等..）

据我所知，有多种方法可以在 Orchard 中创建具有“正文”选项的各种内容类型（因此我可以拥有一个 HTML 编辑器），但我不知道如何使用两个 HTML 创建其中一个编辑器，这样我就可以拥有一个可路由的页面，该页面有两个可以影响的区域。在 Layout.cshtml 中，我绑定两列布局的示例如下所示：

```
@if (Model.SplitLeft != null && Model.SplitRight != null) {
    @* 50/50 split view *@
    <div class="col_12">
        <div class="col_6 clearleft padding_top_15">
            @Zone(Model.SplitLeft)
        </div>
        <div class="col_6 omega">
            @Zone(Model.SplitRight)
        </div>
    </div>
} 
```

我知道小部件具有指定区域的能力，但我试图避免这些，因为在尝试构建需要添加两个小部件的两列布局时，它们不会让最终用户直观，应用它们到特定图层上的特定区域，修改图层规则等。该站点将有 40-50 个页面，可以是上面指定的四种类型中的任何一种，因此通过图层/小部件进行管理将非常复杂。此外，它也不允许我保证我的客户想要的发布/取消发布模型。

如果需要，我当然可以构建一个模块来执行此操作，但有些事情告诉我 Orchard 已经支持这个，我只是在如何设置它方面缺少一些东西。

建议？

**编辑：**我考虑过使用 Alternates，但我不知道如何创建一个内容类型，它下面有两种其他类型（即 HTML 编辑器的左/右视图）。可能最大的障碍是我需要两个 HTML 编辑器才能显示在主编辑屏幕上，因此用户很明显哪个是（即 SmallLeft/LargeRight、LargeLeft/SmallRight、50/50 拆分），因此构建页面很直观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:51:01.067

要添加额外的 HTML 编辑器，您需要添加`TextField`到您的内容项。添加后，您需要设置`html`为该`flavour`字段的。

# string - excel在所有字母数字字符串上加1

> ID：15539239
> 
> 赞同：0
> 
> 时间：2013-03-21T03:59:45.803
> 
> 标签：string, excel, sum, formula, alphanumeric

我需要为 6000 多条记录创建一个新的产品代码。为了快速做到这一点并在未来破译它，我需​​要将一个公式从旧代码放到新代码中。

示例代码：

```
yas111
bd224
sax112
sd00015
sp00114 
```

如果我的公式是 +1，最终结果应该是：

```
zbt222   
ce335
tby223
te11126
tq11225 
```

数字将 +1，字母将递增到字母表的下一个字母。我尝试了替代功能，它的工作。但如果已经使用了一个数字，它就不能同时读取两者。例子：

```
Substitute(substitute(a1,"0","5"),"5","0") 
```

它只会读取 1\. 结果将是

```
0 = 0
5 = 0 
```

但我试图得到这个结果：

```
0 = 5
5 = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:48:37.060

在我看来，在纯 excel 公式中执行此操作将非常复杂。最好的方法是使用 vba`UDF`

```
Function IncrCode(rng As Range) As Variant
    Dim strOld As String, strNew As String
    Dim i As Long

    strOld = rng.Cells(1, 1).Value
    strNew = ""
    For i = 1 To Len(strOld)
        strNew = strNew & Chr$(Asc(Mid$(strOld, i, 1)) + 1)
    Next
    IncrCode = strNew
End Function 
```

像这样称呼它

```
=IncrCode(A1) 
```

如果`A1`=`yas111`结果将是`zbt222`

请注意，根据您的问题，所有字符都会递增到下一个 ascii 字符，例如
`9`--> `:`
`z`--> `{`
`Z`-->`[`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:10:28.107

您需要的是永远不会使用的单个字符。假设它是`&`.

有了这个从未使用过的字符，你可以这样做：

将所有 Z 更改为 &。
将所有 Y 更改为 Z。
将所有 X 更改为 Y。
将所有 W 更改为 X
。。
. 等等等等
。
将所有 & 更改为 0。

# javascript - Javascript：按类名获取元素不起作用

> ID：15539245
> 
> 赞同：4
> 
> 时间：2013-03-21T04:00:18.360
> 
> 标签：javascript, jquery, asp.net-mvc-4, razor, rich-text-editor

我正在研究富文本编辑器，到目前为止做得很好。我制作了一个单独的`.js`文件以将其用作插件。

现在我想通过文件给它一个类名来使用这个插件。但`.cshtml`它似乎不起作用，我已经搜索了相关答案，他们说使用`document.getElementsByClassName`将解决我的问题。

请仔细阅读这段代码并告诉我出了什么问题？

**文本编辑器 .js** -

```
var richTextEditor = document.getElementsByClassName("text-editor");
    richTextEditor.contentDocument.designMode = 'ON';
    $('#strong').live('click', function () {
        richTextEditor.contentDocument.designMode = 'ON';
        richTextEditor.contentDocument.body.contentEditable = true;

        richTextEditor.contentDocument.execCommand('bold', false, null);
        richTextEditor.focus();
    }); 
```

**cshtml 文件——**

```
<script src="/js/Texteditor.js" type="text/javascript"></script>
<script src="/js/jquery.js" type="text/javascript"></script>
 <div  id="strong" class="command btn"><i class="icon-bold icon-black"></i></div>

    <iframe id="edtNoteCreate" class="text-editor"  name="DisplayNote" style="width:430px;height:150px;">@((Model.Note != null ? Model.Note : ""))</iframe> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T04:12:43.750

只取匹配节点的第一项；它是一个 NodeList，但可以像数组一样被取消引用。

```
var richTextEditor = document.getElementsByClassName("text-editor")[0]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T04:05:21.093

getElementsByClassName 返回一个数组，所以像这样使用

```
 var richTextEditor = document.getElementsByClassName("text-editor");
    richTextEditor[0].contentDocument.designMode = 'ON';
    $('#strong').live('click', function () {
        richTextEditor[0].contentDocument.designMode = 'ON';
        richTextEditor[0].contentDocument.body.contentEditable = true;

        richTextEditor[0].contentDocument.execCommand('bold', false, null);
        richTextEditor[0].focus();
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:13:10.130

为什么不使用 jquery 方法？

```
var richTextEditor = document.getElementsByClassName("text-editor");

instead try this:

var richTextEditor = $(".text-editor"); //again this is going to return more than  one object.

//so you can also try below code to manipulate in that.

var richTextEditor = $(".text-editor").first(); //for first element. similarly can use .last() or n-th child. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:47:06.107

$(".text-editor") 返回 HTMl 对象。“document.getElementsByClassName("text-editor")” 返回数组对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T04:30:11.847

当您使用 jQuery 时，为什么不坚持使用 jQuery。

```
 var richTextEditor = $('.text-editor').eq(0); 
```

并且`live`不推荐使用 jQuery 的方法，请`.on()`改用。

# javascript - 更改文本区域中的值后防止光标位置/滚动移动

> ID：15539247
> 
> 赞同：0
> 
> 时间：2013-03-21T04:00:28.093
> 
> 标签：javascript, jquery, html, textarea

我正在尝试在用户在文本区域中按下回车键后插入一些文本，并将光标立即定位在插入的文本之后。有类似的问题解决了将光标设置到所需位置的问题（[jQuery Set Cursor Position in Text Area](https://stackoverflow.com/questions/499126/jquery-set-cursor-position-in-text-area)），但我已经可以适当地设置光标位置。

我的问题：在我之后更改光标位置之前，有没有办法在更改 textarea 值时防止光标位置移动到文本框的开头？

为什么我问：如果在向下滚动 textarea 时按下 enter，那么 textarea 在重置光标位置之前会滚动回顶部，这会分散注意力（用户将看到文本框的第一个内容在文本框之前的屏幕上闪烁向下滚动）。

示例代码（[http://jsfiddle.net/ywNbu/3/](http://jsfiddle.net/ywNbu/3/)）

```
$('#input').on("keypress", function(e) {
   if (e.keyCode == 13) {
      e.preventDefault();

   var value = $("#input").val(); 
   pos = $("#input").prop('selectionStart');
   $("#input").focus();
       // following line changes the cursor position to the beginning
   $("#input").val(value.substring(0, pos) + "\nHello\n" + value.substring(pos));
   this.setSelectionRange(pos + 7, pos+7);

   return false;
   }
}); 
```

# javascript - Express 3.0 上的 HBS 模块将文本添加到生成的 HTML

> ID：15539248
> 
> 赞同：0
> 
> 时间：2013-03-21T04:00:39.203
> 
> 标签：javascript, node.js, templates, express, handlebars.js

我遇到了这个我相当困惑的错误。我正在运行一个使用[hbs 包](https://github.com/donpark/hbs)进行车把模板的 express 3.0.6 应用程序。我正在尝试根据[此示例](https://github.com/donpark/hbs/tree/master/examples/extend)为每个视图的脚本和样式表创建块。

出于某种原因，每当我尝试使用帮助程序时，它都会在 html 文件的顶部添加一些数字（作为纯文本）。更奇怪的是，刷新后数字会发生变化，我不知道出了什么问题，甚至不知道发生了什么。

```
blocks = {}
hbs.registerHelper 'extend', (name, context) ->
    block = blocks[name]
    if not block
        block = blocks[name] = []
    block.push(context.fn this)

hbs.registerHelper 'block', (name) ->
    val = (blocks[name] || []).join('\n')
    blocks[name] = []
    return val 
```

在 layout.html 中：

```
 <head>
  {{{block "stylesheets"}}}
  {{{block "javascripts"}}}
 </head> 
```

在其他视图中：

```
{{#extend "stylesheets"}}
  <link ... />
{{/extend}}

{{#extend "javascripts"}}
  <script ... 
{{/extend}} 
```

在输出 html 中，我得到“1 1”。1 的值有时会随机变化，但总是有 x 个，其中 x 是扩展标签的数量。

感谢任何人可能提供的任何见解/帮助！

编辑:: 另外，我注意到的另一件事是，如果我将块助手更改为：

```
 {{{stylesheets}}}
  {{{javascripts}}} 
```

数字从 1 开始，然后在每次刷新页面时递增 1。我不确定发生了什么，但希望这会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:46:38.543

结果在“扩展”寄存器助手中，coffeescript 自动返回了该方法最后一条语句的输出，这导致了一个问题。如果我只是在其中添加一个额外的 return 语句，它就起作用了。

# ruby-on-rails - 如何确定 2 个不同模型的结果？

> ID：15539259
> 
> 赞同：0
> 
> 时间：2013-03-21T04:02:18.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个用户模型该`has_one`配置文件。我的用户模型中有以下代码：

```
class User < ActiveRecord::Base
 scope :city, lambda { |user| joins(:profile).where(:profiles => {:city => user.profile.city})}
end 
```

然后在用户控制器的索引操作中：

```
 def index
   @users = User.city(current_user).paginate :page => params[:page], :per_page => 20
  end 
```

这使我可以从与`current_user`. 我还想做的是只获取那些上传了个人资料图片的用户。我正在使用回形针，图像列在用户表中。我想添加类似`show users where image_file_name != nil`. 但是，上述范围包括配置文件表。如何合并查询以包含用户表中的一列和配置文件表中的一列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:45:14.587

您可以在 Rails 中将范围连接在一起以形成最终查询。

```
class User < ActiveRecord::Base
  scope :city, lambda { |user| joins(:profile).where(:profiles => {:city => user.profile.city})}
  scope :with_pictures, where('users.image_file_name IS NOT NULL')
end 
```

假设这是您的数据库用来查找非空列的方法。

然后在你的控制器中：

```
def index
  @users = User.city(current_user).with_pictures.paginate :page => params[:page], :per_page => 20
end 
```

# python - 如何使用队列进行基数排序？

> ID：15539260
> 
> 赞同：0
> 
> 时间：2013-03-21T04:02:21.770
> 
> 标签：python, algorithm, sorting, loops, radix

您如何使用队列正确地对列表进行基数排序？

我正在使用 Python 3x。

这是我使用队列作为箱的尝试，因为队列是先进先出的数据结构。

```
from my_queue import Queue
def rsort(n):
    '''(list of int) -> list of int
    '''
    list_length = len(n)
    val = 0
    mod = 10
    k = 1
    bin_list = []
    alist = n
    for bins in range(0,10):
        bin_list.append(Queue())

    while val == 0:
        for num in alist:
            sig_dig = num % mod
            sig_dig = int(sig_dig / k)
            bin_list[sig_dig].enqueue(num)

        if bin_list[0].size() == list_length:
            alist.append(bin_list[0].dequeue())

        else:
            mod = mod * 10
            k = k * 10            

        new_list = []
        for bins in bin_list:
            if not bins.is_empty():
                new_list.append(bins.dequeue())
            alist = new_list

        return alist 
```

我的代码可以很好地处理小数字，例如：`[3,2,6,5,8,7]`

但是当列表中的值变大时，例如：`[240, 28, 5, 18, 140, 2]`

我的程序不再对列表进行排序，数字最终丢失且无序。

我一直在玩我的程序，但我无法修复它:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:04:20.757

您的代码中有几处似乎是错误的。我不确定究竟是哪一个导致了您所看到的问题，但可能所有这些问题都需要修复，然后您才能获得正确的结果。

首先，快速说明：您可以通过仅使用单个整数在每个数字中找到正确的数字来简化逻辑。我建议一个从零开始并上升到某个值（您要排序的位数）的值。您可以使用 找到给定列表项的该数字的值`sig_dig = num // 10**k % 10`。运算符强制 Python 使用“`//`地板除法”，截断正常除法的非整数部分。

无论如何，第一个问题是你在循环`val == 0`，但你从不修改`val`，并且你在循环结束之前返回一个值（所以你永远不会做超过一次）。您可以通过计算列表最长值中的位数来解决此问题，例如`max_digits = int(math.ceil(math.log(max(lst), 10)))`. 然后你可以让你的循环更简单：`for k in range(max_digits):`

我看到的下一个问题是您可能没有正确地将垃圾箱中的值重新放入列表中。您只调用`dequeue`一次，但您可能应该重复调用它，直到队列为空。或者，如果我误解了`Queue`您正在使用的 API 并`dequeue`返回所有队列的值，您需要使用`extend`一次将它们全部添加到列表中。

最后，这就是我认为你想要的：

```
import math

from my_queue import Queue

def rsort(n):
    '''(list of int) -> list of int
    '''
    bin_list = [Queue for _ in range(10)]
    max_digits = int(math.ceil(math.log(max(lst), 10))) # calculate # of digits

    for k in range(max_digits):
        for num in alist:
            sig_dig = num / 10**k % 10 # find digit's value
            bin_list[sig_dig].enqueue(num)

        n = [] # we can reuse the name `n`, rather than using a different name
        for bins in bin_list:
            while not bins.is_empty(): # loop to dequeue all values
                n.append(bins.dequeue())

    return n # the return statement is outside the loop! 
```

# jquery - jQuery - .not() 不适用于 .text()

> ID：15539263
> 
> 赞同：2
> 
> 时间：2013-03-21T04:02:44.177
> 
> 标签：jquery, jquery-selectors

我有一个如下所示的下拉列表：

```
<select name="cc_dropdown[0]" id="cc-dropdown-0">
     <option value="">Select a card</option>
     <option value="0">***********1111</option>
     <option value="1" selected="selected">***********0005</option>
     <option value="-1">Use a new card</option>
</select> 
```

我有一个看起来像这样的 div：

```
<div id="select-cc-dropdown-0">
   <div class="selectBox" tabindex="0">
      <div class="sbContent">***********0005</div>
   </div>
</div> 
```

`sbContent`我需要获取下拉列表中所有选项的集合，其文本与div中的文本不匹配。

这是我尝试过的：

```
var tmp = $('#select-cc-dropdown-0 .selectBox .sbContent').text();
$('#cc-dropdown-0 option').text().not(tmp); 
```

`var tmp`确实返回预期的文本（在本例中为***** ***** *0005）。但是当我尝试在`.not()`之后进行字符串处理时`.text()`，出现错误（TypeError: $(...).text(...).not is not a function）。

我怎样才能将这两个位串在一起以获得我需要的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:06:53.240

当然，这是行不通的。[`.text()`](http://api.jquery.com/text/)返回一个字符串，而不是一个 jQuery 对象。与 一起使用[`:not()`](http://api.jquery.com/not-selector/)（或[`.not()`](http://api.jquery.com/not)）[`:contains()`](http://api.jquery.com/contains-selector/)。

```
$('#cc-dropdown-0 option:not(:contains("' + tmp + '"))').text();
// or
$('#cc-dropdown-0 option').not(':contains("' + tmp + '")').text(); 
```

# ios - 替换 UITextView 中的文本运行缓慢

> ID：15539269
> 
> 赞同：2
> 
> 时间：2013-03-21T04:03:03.290
> 
> 标签：ios, objective-c, uitextview

我有一个 UITextView，我在 UITextView.text 的末尾替换了一个单词，如下面的代码：

```
-(void)replaceTextViewWithWord:(NSString *)word {
    NSString *currentTextViewText = self.textView.text;

    currentTextViewText = [currentTextViewText stringByReplacingCharactersInRange:NSMakeRange([self.textView.text length] - [word length], [word length]) withString:word];

    self.textView.text = currentTextViewText;    
} 
```

替换工作正常，但是当 textView 变长时它运行得非常缓慢而且非常缓慢。

## 还有其他更好的方法吗？

我尝试使用**replaceRange:withText**一周但仍然卡住。不知道如何用它来代替我的情况。

请指导！提前致谢！这是一项紧迫的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T13:02:14.240

不，如果您使用 UITextView 没有更好的方法（不适用于 ios6 及更低版本）

在 ios7 上有 textkit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:22:54.317

当您使用不可变字符串并且您正在创建一个非常长的字符串并将其分配给已经创建的 NSString 时。

而不是`NSString`使用`NSMutableString`一些开销将减少。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    FooBarCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellIdentifier];
    if (cell == nil) {
        cell = [[EditCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:kCellIdentifier];
        cell.mutableString = [NSMutableString string];
        cell.textView.text = cell.mutableString;
    }
    [cell.mutableString setString:@"text to show"];
    return cell;
} 
```

# image - 从 yii 外部的文件夹中获取图像

> ID：15539270
> 
> 赞同：1
> 
> 时间：2013-03-21T04:03:04.350
> 
> 标签：image, yii

**编辑**

我的`htdocs/myprojectyii`文件夹在`C`驱动器中，那么我可以从驱动器中的文件夹中获取图像`E`吗？我将我的编码编辑为此

```
<?php $path = 'file:///E:/image/myimage.jpg'?>
<img src="<?php echo $path ?>" width="100" height="100"/> 
```

如果我单击`src`图像上的路径（萤火虫），路径是正确的（因为它显示图像）但在我的页面中，图像不显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:06:59.590

首先你必须尝试`file:///E:/images/myimage.jpg`而不是 only `E:/image/myimage.jpg`。其次，这不起作用：D，因为[这是一项安全功能..在任何平台上的任何浏览器中都不可能](https://stackoverflow.com/a/982585/655316)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:09:56.337

为了更好的安全性 yii 不允许直接但你可以使用 php 函数来获取图像

在 yii 控制器名称中查看 UploadController.php 添加功能

```
function actiongetBusinessProfilePic($dir='',$fileName='')
{
    $name = FILE_UPLOAD.'businessprofilepic/'.$dir.'/'.$fileName;
    $ext=$this->actiongetExt($fileName);
    if(file_exists($name))
    {
    $fp = fopen($name, 'rb');   
    header("Content-Type: image/".$ext);
    header("Content-Length: " . filesize($name));
    fpassthru($fp);
    }
} 
```

现在在视图页面中做一些这样的事情

```
<img id="main_image_preview" src="<?php echo $base_path;?>upload/getBusinessProfilePic/dir/<?php echo $imageDir;?>/fileName/<?php echo $avatar;?>" alt="Upload Avatar" border="0" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T07:29:24.890

@Mostafa Shahverdy 和 @Kalpesh Patel 非常感谢您的支持.. 但最后我得到了使用 base64_encode 的解决方案，就像这样

```
$path = 'E:/images/myimage.jpg'

    if($fp = fopen($path,"rb", 0)) //open file
    { 
        $path = fread($fp,filesize($path)); //read file
        fclose($fp); 
        $path = chunk_split(base64_encode($path)); //encode image to base64
        $encode = '<img src="data:image/jpeg;base64,' . $path .'"  width="200" height="200">'; 
        echo $encode; //show image
    } 
```

所以我可以访问本地驱动器中的图像:)

# c++ - 找不到图片

> ID：15539272
> 
> 赞同：0
> 
> 时间：2013-03-21T04:03:09.873
> 
> 标签：c++, sfml

当我尝试在 SFML 2.0 中显示图像时，它永远找不到图像。我正在使用 Visual Studio Express C++ 2010。这是我的代码。

```
#include "stdafx.h"

using namespace std;

int main()
 {
     // Create the main window
     sf::RenderWindow window(sf::VideoMode(800, 600), "SFML window");

     // Load a sprite to display
     sf::Texture texture;
     if (!texture.loadFromFile("image.png"))
     {
         cout << "Could not find file image.png" << endl;
         system("PAUSE");
     }
     sf::Sprite sprite(texture);

     // Create a graphical text to display

     // Load a music to play

     // Start the game loop
     while (window.isOpen())
     {
         // Process events
         sf::Event event;
         while (window.pollEvent(event))
         {
             // Close window : exit
             if (event.type == sf::Event::Closed)
                 window.close();
         }

         // Clear screen
         window.clear();

         // Draw the sprite
         window.draw(sprite);

         // Draw the string

         // Update the window
         window.display();
     }

     return EXIT_SUCCESS;
 } 
```

但是当我将图像目录更改为特定的“C:\Users\Chase\Documents\Visual Studio 2010\Projects\Boonce\image.png”时，它就可以工作了。我需要将 image.png 放在哪里才能在没有特定内容的情况下显示。我听到人们说我不知道​​它是什么的工作目录。如果它是项目文件夹（ Projects\Boonce\ ），那么我已经尝试过了，但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:04:54.137

它应该放置在与`.exe`文件相同的目录中，或者取决于您的项目设置在其他目录中，可能是项目目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:26:42.300

在 Visual Studio 中，您需要设置***工作目录***

去：

*   项目
*   ( *projectName* ) 属性
*   调试
*   工作目录

并将路径设置为您的资产目录所在的位置。

默认值为**$(ProjectDir)**，即*.vcproj*文件所在的目录。

# node.js - 使用 node 和 restler 进行多部分表单数据 POST

> ID：15539276
> 
> 赞同：0
> 
> 时间：2013-03-21T04:03:31.117
> 
> 标签：node.js, http, post, multipartform-data, restler

我可以在数据部分使用 restler.file 上传文件，没有问题。我现在正在尝试编写一个非常短的 CSV 数据字符串，但我无法找到数据函数的文档，但阅读了我认为我认为正确的代码：

```
restler.post("http://posttestserver.com/post.php", {
    multipart: true,
    data: {
            "upload": restler.data("people.csv", "text/csv", '384;213;Status Update'),
            "returnURL": ""
    }
}).on("complete", function(data) {
     console.log(data);
}); 
```

不幸的是，这只是挂起并且会超时。我尝试将 EOF 和其他东西添加到第三个参数，但我知道我错过了一些东西。我上面的数据字符串与我使用 restler.file 时工作的文件的内容完全相同。如果我不需要在发布之前写出 CSV 文件，我宁愿不必写出来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T21:56:19.540

**编辑 - -**

根据@Joni 对上述问题的评论，在通过[pull request](http://github.com/danwrong/restler/pull/172)提交修复后，此问题似乎已得到纠正。

**原始答案（来自OP）----**

从对restler（并与维护者相对应）的研究来看，restler 似乎不能做我想做的事。注意：有人提交了一些代码，允许文件部分以流的形式出现，但它还没有被分支接受，而且我对流没有足够的经验。

我解决了回到基础的问题。我阅读了多部分的 RFC ( [http://www.ietf.org/rfc/rfc2388.txt](http://www.ietf.org/rfc/rfc2388.txt) )，发现在构建正文时只需要注意一些规则，主要是一些额外的 \r\n 和 '- -'在正确的地方。

我决定简单地格式化原始 POST 正文并通过基本节点 http 客户端发送。

这有效：

```
var http = require('http');

postBody = new Buffer(
    '------WebKitFormBoundaryebFz3Q3NHxk7g4qY' + "\r\n" +
    'Content-Disposition: form-data; name="upload"; filename="filename.csv"' + "\r\n" +
    'Content-Type: text/csv' + "\r\n" +
    '\r\n' +
    'comma,separated,values' + "\r\n" +
    '------WebKitFormBoundaryebFz3Q3NHxk7g4qY' + "\r\n" +
    'Content-Disposition: form-data; name="returnUrl"' + "\r\n" + 
    '\r\n' +
    'http://return.url/' + "\r\n" +
    '------WebKitFormBoundaryebFz3Q3NHxk7g4qY--'
    );

var headers = {
  "Content-Type": "multipart/form-data; boundary=----WebKitFormBoundaryebFz3Q3NHxk7g4qY",
  "Content-Length": postBody.length
};

//These are the post options
var options = {
  hostname: 'myhost.com',
  port: 80,
  path: '/myPost',
  method: 'POST',
  headers: headers
};

// so we can see that things look right
console.log("postBody:\n" + postBody);
console.log("postBody.length:\n" + postBody.length);

var responseBody = '';

// set up the request and the callbacks to handle the response data
var request = http.request(options, function(response) {
    // when we receive data, store it in a string
    response.on('data', function (chunk) {
        responseBody += chunk;
    });
    // at end the response, run a function to do something with the response data
    response.on('end',function() {
        console.log(responseBody);
    });
});

// basic error function
request.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

// write our post body to the request
request.write(postBody);
// end the request
request.end(); 
```

我希望这可以帮助人们做多部分/表单数据。

# java - java.lang.ClassCastException：[Ljava.lang.Object；不能转换为 com.entity.survey.SurveyReport

> ID：15539277
> 
> 赞同：0
> 
> 时间：2013-03-21T04:03:33.793
> 
> 标签：java, generics, classcastexception

```
try{
 System.out.println(surveyReportList.get(0).getEmploymentStatus());
}
catch(Exception e){
 System.out.println(e.getCause());
 e.printStackTrace();
} 
```

我正在尝试获取列表中的字段值之一，但我收到了 ClassCastException。我正在使用`surveyReportList.size();`.

这是堆栈跟踪，我的第 103 行`surveyReportList`类型在该块内。`List<SurveyReport>``try`

```
at com.action.survey.SurveyReportAction.generateReports(SurveyReportAction.java:103)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:441)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:280)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:243)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:165)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:252)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T04:06:02.643

最有可能不当使用泛型。`surveyReportList`可能是 type `List<SurveyReport>`，但在某些时候，您会收到一些关于未经检查的操作的编译器警告，并且以某种方式将一些不是 a`SurveyReport`的东西添加到该列表中。查看列表的来源以及最初是如何创建的。

作为一个具体示例，以下代码将创建您看到的相同异常：

```
List untyped = new ArrayList();
untyped.add(new Object[0]);
List<String> strings = untyped;
System.out.println(strings.get(0).length()); 
```

结果：

```
Exception in thread "main" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to java.lang.String 
```

这是一个 ClassCastException 因为编译器基本上转

```
strings.get(0).length() 
```

进入

```
((String) strings.get(0)).length() 
```

# python - 如何从 python Web 服务访问客户端证书链？

> ID：15539283
> 
> 赞同：1
> 
> 时间：2013-03-21T04:04:16.220
> 
> 标签：python, web-services, certificate, x509

我想从 Web 服务中访问客户端 X.509 证书链，该服务在一些简单的 RESTful python Web 服务框架中实现。这可以很容易地完成，以及如何？

我说的是客户端连接到 https 上的 Web 服务器并提供客户端证书。Web 服务器可以为我验证这一点——这是首选。但稍后，当 Web 服务代码运行时，我想查看接受的证书，包括到受信任根的链。

如果我在某些非 Web 服务器应用程序中自己管理 TLS 连接，我知道如何在 C 中使用 OpenSSL。我想要的是在 web 服务器调用的基于 python 的 web 服务中做同样的事情。

例如，我可能正在查看证书链以查找列入白名单的证书。我对 DN 不感兴趣——我想要包括公钥在内的整个证书。

# php - 通过 cronjob 缓存

> ID：15539284
> 
> 赞同：0
> 
> 时间：2013-03-21T04:04:28.553
> 
> 标签：php, caching, cron

所以这是交易，

通过使用 JustinTV 的 api 和一些 PHP，我制作了一个非常简单的脚本，用于检查某些播放器目前是否正在播放。在我的网站上实施后，我发现加载需要很长时间（实际上是预期的）。所以我读了一些关于这个 cronjob 的东西，并认为这可能是解决它的方法。

因此，恢复时，我想创建一个运行该脚本的 cronjob，检查这些播放器是否正在流式传输，然后将其保存在缓存中。话虽如此，我想为 Wordpress 创建一个小部件，该小部件使用该缓存并将保存的数据放在那里。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:09:55.290

您需要将来自 cron 作业的信息保存在 Wordpress 数据库中。这将允许您稍后从另一个页面访问它。有关更多详细信息，请参阅此页面（选项 4 可能最合适）：[https ://codex.wordpress.org/Writing_a_Plugin#Saving_Plugin_Data_to_the_Database](https://codex.wordpress.org/Writing_a_Plugin#Saving_Plugin_Data_to_the_Database)

# java - thymeleaf 提交按钮代码

> ID：15539287
> 
> 赞同：2
> 
> 时间：2013-03-21T04:04:30.150
> 
> 标签：java, maven, thymeleaf

谁能解释一下**thymeleaf**的提交按钮在以下代码中是如何工作的？

```
 <!DOCTYPE html>   
 <html lang="en" xmlns:th="http://www.thymeleaf.org"           

  layout:decorator="master">
<head>
    <title>LoginPage</title>
</head>

<body>
 <h1>Login Page</h1>
<!-- Any content you put in the div fragment below will appear on the page-->
<div class="container">
<div class="row">
    <div class="span8">

    <P th:if="${loginError}" >Wrong User or Password</P>

        <form th:action="@{/new}" th:Object="${messageForm}"        
                    method="post">
        <label for ="User">User Name</label>
        <input type="text" th:field="*{user}"/><br/>
        <label for ="password">Password</label>
        <input type="password"  th:field="*{password}"/><br/>
        <input type="submit" value="Login" />
        </form>

        </div>
</div>
</div>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:54:43.670

以下所有内容都可以在此[入门](http://www.thymeleaf.org/standarddialect5minutes.html)页面中找到。

乍一看，我会说`<form>`模板被呈现为标准表单，`POST`并在您提交时进行调用。

它只不过是普通的 http/html。框架添加的是表单字段动态绑定到由`th:Object="${messageForm}"`属性引用的底层对象。

每个字段都是使用语法调用`messageForm`对象上的方法来计算的。`th:field="*{password}"`

最后，对通过评估属性创建的 URL 进行 POST 调用`th:action="@{/new}"`，可能相对于当前页面。

* * *

让我们举个例子来澄清一下。
假设我们有

*   具有属性`messageForm`的类型对象`MessageForm`
*   `user`类型`String`
*   `password`类型`String`
*   模板正在呈现为带有 url 的网页`"http://my.app.com/login"`

通过提交按钮，您可能得到的是该`messageForm`对象将具有其属性`user`并`password`设置为您在表单的相应字段中输入的值，然后表单将调用`"http://my.app.com/new"`页面或类似的页面，传递`messageForm`从中检查的对象登录操作凭据...

* * *

如果您还没有，我强烈建议您在继续之前阅读 thymeleaf 网站上的[文档。](http://www.thymeleaf.org/documentation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T09:01:04.917

`<form>`模板被呈现为标准表单，`POST`并在您提交时进行调用。
框架添加的是表单字段动态绑定到由`th:Object="${messageForm}"`属性引用的底层对象。

每个字段都是使用语法调用`messageForm`对象上的方法来计算的。`th:field="*{password}"`

最后，`POST`调用通过评估`th:action="@{/new}"`属性创建的 URL，可能相对于当前页面。

# codeigniter - 使用此功能的正确方法

> ID：15539288
> 
> 赞同：0
> 
> 时间：2013-03-21T04:04:48.967
> 
> 标签：codeigniter, ion-auth

我在这个网站上看到了这个功能'is_post'：

[http://www.kylenoland.com/a-comprehensive-guide-to-securing-codeigniter-2-x-with-ben-edmunds-ion-auth/](http://www.kylenoland.com/a-comprehensive-guide-to-securing-codeigniter-2-x-with-ben-edmunds-ion-auth/)

```
class MY_Controller extends CI_Controller
{
    public function is_post()
    {
        return $_SERVER['REQUEST_METHOD'] == 'POST' ? TRUE : FALSE;
    }
} 
```

我可以知道使用此功能的正确方法以及如何使用吗？谢谢。问候，zs

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:13:45.890

使用自己的父控制器的优点之一是可以在中心位置检查常见检查。因此，当您创建/定义控制器时，您可以从自己的控制器继承，如下所示使用父类方法：

```
class User_Controller extends MY_Controller
{
    public function login()
    {
        if($this->is_post()){
            //login check and redirect if successfull.
        }
        $this->load->view("login");
    }
} 
```

# ruby - 如何使用条件来测试一个块是否通过？

> ID：15539296
> 
> 赞同：1
> 
> 时间：2013-03-21T04:05:28.090
> 
> 标签：ruby

例如，如果我想实现一个函数，如果通过了块，则执行 A，如果没有块，则执行 B，我该如何编写条件？

```
obj.func {#some code} #func does work A
obj.func              #func does work B 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T04:08:41.607

[`block_given?`](http://www.ruby-doc.org/core-2.0/Kernel.html#method-i-block_given-3F)如果我正确理解了您的问题，您可以使用该功能。

# java - 从 Web 抓取数据，当页面在页面末尾动态加载数据时

> ID：15539297
> 
> 赞同：1
> 
> 时间：2013-03-21T04:05:31.633
> 
> 标签：java, web-crawler

我想使用java从网络上抓取一些数据，但是我发现页面在到达页面末尾时会加载数据。我不是 Web 开发人员，不知道当滚动到页面末尾时他们使用哪种技术来加载数据。

你能给我一些提示吗？他们使用了哪些技术？当我不想使用浏览器时如何读取数据？（我使用 urlConnection 用 java 编写了一个代码来从站点读取数据。

该网站类似于“ [https://www.healthtap.com/#topics/Women%27s%20health](https://www.healthtap.com/#topics/Women%27s%20health) ”。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:14:00.063

它是网络爬虫机器人的一个常见“问题”......某些页面包含从包含的源添加的动态内容。此内容可以在页面加载时加载或触发（如您的示例 - 通过向下滚动）。当下载并抓取目标页面时，DOM 结构在大多数情况下不包含外部包含数据的 html 元素。

我建议你做的是确定这些数据的源路径，这可以通过仔细检查 DOM 上的脚本来完成。并称他为第二来源，其中包括您需要的所有缺失数据。

编辑：

在您链接的示例中-很简单：

```
 - install firebug.
      - scroll down the page to check the script that fires the request.
      - now you can see the link and the vars that are used for dynamicly adding the content. 
```

www.healthtap.com/#topics/Women%27s%20health：

dinamyclly 回复链接：

[https://www.healthtap.com/topics/Women%27s%20health.json](https://www.healthtap.com/topics/Women%27s%20health.json)？extended_categories=1&auth_token=false&per_page=8&page=7&per_page=8&auth_token=false&generate_token=true

如您所见，您可以使用一些参数：

```
 1/ topics/ + the page firs value name + .json?
 2/ per page= num -> how much results to return
 3/ generate_token=true -> its a security value but just change it to false and it work fine.... 
```

现在您可以使用此链接并加载您需要的所有数据并将其与您抓取的主页合并。

经测试！

# html - 如何使用正则表达式在 Vim 中将“-”替换为“_”？

> ID：15539307
> 
> 赞同：1
> 
> 时间：2013-03-21T04:06:49.953
> 
> 标签：html, regex, vim, vi

您能否建议我在我的 HTML 文件中替换`-`为的正则表达式，`_`但只关注`href`和`src`属性（我不需要对我的网页内容进行任何更改）。

例如：

前：

```
<a href="my-profile.html">PLF Series</a>
<img src="images/my-sample.jpg"> 
```

后：

```
<a href="my_profile.html">PLF Series</a>
<img src="images/my_sample.jpg"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:17:25.247

这个需要重复，直到没有匹配：

```
%s/\(\(href\|src\) *= *"[^"-]*\)-/\1_/g 
```

# fonts - 更改 bbpress tinymce 论坛提交文本区域的默认字体颜色

> ID：15539314
> 
> 赞同：1
> 
> 时间：2013-03-21T04:07:04.600
> 
> 标签：fonts, filter, tinymce, bbpress

因此，在我发现从 tinymce 插件文件夹更改 content.css 不起作用后，我通过向 functions.php 添加过滤器尝试了 content_css 例程：

```
function tinymce_other_css_for_content( $init ) {
$init['content_css'] = get_bloginfo('stylesheet_url') . "customtinymce.css";
return $init;
}

add_filter('tiny_mce_before_init', 'tinymce_other_css_for_content'); 
```

并添加

```
body#tinymce.mceContentBody.bbp_reply_content.post-type-topic.wp-editor{
   color: red !important; /* FF requires a important here */
} 
```

到 customtinymce.css 并将其放在我的主题根目录中。

没用，是不是我做错了什么？

提前致谢。

PS 我也在寻找一种解决方案，它只为论坛的文本区域着色，而不是 WP 管理仪表板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:32:58.250

可能是由于某种缓存（客户端或服务器端），如果不了解所涉及的系统及其配置，则无法从这里判断

# ios - iOS开发中从数据库取数据会影响应用程序的速度吗

> ID：15539320
> 
> 赞同：1
> 
> 时间：2013-03-21T04:07:37.653
> 
> 标签：ios, iphone, database

我想知道它是否会影响，如果我每次从核心数据库中获取数据以显示很多地方，或者我只获取一次数据并将其存储在本地并使用，它会影响应用程序的速度吗？请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:21:16.390

是的，它会影响每次提取的速度..所以最好提取一次，存储在本地并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T04:13:15.783

当您说每次从核心数据库中获取数据时，请澄清一点，您是指从核心数据中获取数据吗？假设您的意思是核心数据库：

当您考虑到移动网络条件时，通过网络获取数据会更慢甚至更慢。如果您在本地缓存此信息并使用核心数据或云数据来确保它适当地失效，您的应用程序将执行得更快。

# linux - CSS3 3D 转换在 Chrome (Linux) 中不起作用

> ID：15539322
> 
> 赞同：1
> 
> 时间：2013-03-21T04:07:40.567
> 
> 标签：linux, html, css

您将需要 Linux Chrome 才能看到这一点。在我的开发网站[spokemebox.com](http://www.spoilmebox.com)（见底部的三个框）上，我的背面露出来了。我该如何解决？

CSS...

```
.Qcontainer {
position: relative;
-webkit-perspective: 800;
-moz-perspective: 800;
perspective: 800;
background: none;
}
.pumpkinhead {
width:100%;
height:15em;
-webkit-transform-style: preserve-3d;
-webkit-transition: 1s;
-moz-transform-style: preserve-3d;
-moz-transition: 1s;
transform-style: preserve-3d;
transition: 1s;
}
.Qcontainer:hover .pumpkinhead {
-webkit-transform: rotateY(180deg);
-moz-transform: rotateY(180deg);
transform: rotateY(180deg);
}
.face {
position: absolute;
-webkit-backface-visibility: hidden;
-moz-backface-visibility: hidden;
backface-visibility: hidden;
z-index: 5;
}
.back {
width: 66%;
height:127%;
-webkit-transform: rotateY(180deg);
-moz-transform: rotateY(180deg);
transform: rotateY(180deg);
background: #000000;
background: -webkit-linear-gradient(top,
rgba(0,0,0,0.65)0%,
rgba(0,0,0,0)100%);
z-index: 4;
padding: 15%;
} 
```

html...

```
<div class="row-fluid">
            <div class="span4 Qcontainer">
                <div class="pumpkinhead">
                    <div class="face front">
                        <h2 class="g2-unit-header">...</h2>
                        <p style="min-height: 240px;">...</p>
                        <p><a href="#" class="btn btn-info">...</a></p>
                    </div>
                    <div class="face back">
                        <p>this is my back fool!</p>
                    </div>
                </div>
            </div>
</div> 
```

请注意，我正在使用引导程序（span4），但我不认为这会搞砸，因为它在 Chrome（Windows）和 Firefox 中工作。

此代码的来源是***Ben Frain 的使用 HTML5 和 CSS3 的响应式网页设计***

我已经在这个站点上使用 jQuery 和 JavaScript，所以没有寻找替代方案。如果我可以让它与大多数浏览器一起使用，我想支持这种新的 CSS3 技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T15:46:57.647

据我所知，这是最近在 Linux 上构建的 Chrome 中的一个错误（我还没有在其他平台上测试过）；您会注意到使用相同 CSS 转换的所有其他站点现在都存在背面显示问题。我还在我自己的网站上注意到不再呈现透视图。

虽然很烦人，但我们必须记住，前缀 CSS 功能仍然是实验性的，我们不应该依赖它们来保持稳定甚至保持存在。

# xml - 在 xsl 1.0 中移动行数据

> ID：15539332
> 
> 赞同：2
> 
> 时间：2013-03-21T04:08:52.103
> 
> 标签：xml, xslt, xslt-1.0

我的 XML 中有多个 Rows 数据，如下所示 -

```
<ROW TYPE="SPECIFICATION" ID="1">
    <R1>English1</R1>
</ROW>
<ROW TYPE="SPECIFICATION" ID="1">
    <R1>Maths1</R1>
</ROW>
<ROW TYPE="TOTAL" ID="1">
    <R1>Code1</R1>
</ROW>
<ROW TYPE="SPECIFICATION" ID="2">
    <R1>English2</R1>
</ROW>
<ROW TYPE="SPECIFICATION" ID="2">
    <R1>Maths2</R1>
</ROW>
<ROW TYPE="TOTAL" ID="2">
    <R1>Code2</R1>
</ROW> 
```

我希望我的输出显示在 Image 中，就像这个 ROW 数据在 for-each 循环中一样工作。要求是首先显示 ROW TYPE="TOTAL" ID="1"，然后显示其 ROW TYPE="SPECIFICATION" 数据。在循环中进一步移动，应该首先显示 ROW TYPE="TOTAL" ID="2"，然后显示其 ROW TYPE="SPECIFICATION" 数据。

基本上应该是这样的——

```
Code1
  English1
  Maths1
Code2
  English2
  Maths2 
```

XSLT 代码适用于序列，就像 for-2each 循环一样。但我需要先为该 ID 移动 TOTAL 行。请为此提出逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:25:21.383

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kRowById"
      match="ROW[not(@TYPE='TOTAL')]" use="@ID"/>

 <xsl:template match="ROW[@TYPE='TOTAL']">
  <xsl:copy-of select="."/>
  <xsl:copy-of select="key('kRowById', @ID)"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当应用于提供的 XML 时**（包装到单个顶部元素中以制作格式良好的 XML 文档）：

```
<t>
    <ROW TYPE="SPECIFICATION" ID="1">
        <R1>English1</R1>
    </ROW>
    <ROW TYPE="SPECIFICATION" ID="1">
        <R1>Maths1</R1>
    </ROW>
    <ROW TYPE="TOTAL" ID="1">
        <R1>Code1</R1>
    </ROW>
    <ROW TYPE="SPECIFICATION" ID="2">
        <R1>English2</R1>
    </ROW>
    <ROW TYPE="SPECIFICATION" ID="2">
        <R1>Maths2</R1>
    </ROW>
    <ROW TYPE="TOTAL" ID="2">
        <R1>Code2</R1>
    </ROW>
</t> 
```

**产生想要的结果**（其中想要的元素被重新排序：

```
<ROW TYPE="TOTAL" ID="1">
   <R1>Code1</R1>
</ROW>
<ROW TYPE="SPECIFICATION" ID="1">
   <R1>English1</R1>
</ROW>
<ROW TYPE="SPECIFICATION" ID="1">
   <R1>Maths1</R1>
</ROW>
<ROW TYPE="TOTAL" ID="2">
   <R1>Code2</R1>
</ROW>
<ROW TYPE="SPECIFICATION" ID="2">
   <R1>English2</R1>
</ROW>
<ROW TYPE="SPECIFICATION" ID="2">
   <R1>Maths2</R1>
</ROW> 
```

# java - 在 JUnit 中断言正确的控制台输出

> ID：15539336
> 
> 赞同：0
> 
> 时间：2013-03-21T04:09:31.083
> 
> 标签：java, testing, junit4, assert, console-output

我正在尝试编写一个基本的 JUnit 教程，并通过一个使用基本服务层的简单 Hello World 示例来演示这一点。我的问题是，即使测试输出与我的控制数据匹配，assertEquals 仍然返回 false。你能解释一下为什么 assertEquals 不起作用，并说明我该如何解决这个问题吗？

JUnit 错误

```
org.junit.ComparisonFailure: expected:<Hello World[]> but was:<Hello World[
]> 
```

还有我的代码测试样本

```
package com.springtutorial.mavenhelloworld.service;

import static org.junit.Assert.*;

import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Rule;
import org.junit.Test;
import org.junit.contrib.java.lang.system.StandardOutputStreamLog;

import com.springtutorial.junitandmavenhelloworld.service.HelloWorldMessage;
import com.springtutorial.junitandmavenhelloworld.service.HelloWorldMessageImplementation;
import com.springtutorial.junitandmavenhelloworld.service.HelloWorldMessageService;
import com.springtutorial.junitandmavenhelloworld.service.HelloWorldMessageServiceImplementation;

public class HelloWorldMessageServiceImplementationTest
{
    static String controlMessageContent;
    static HelloWorldMessage controlMessage;

    HelloWorldMessage testMessage;
    HelloWorldMessageService testMessageService;

    @Rule
    public final StandardOutputStreamLog testLog = new StandardOutputStreamLog();

    @BeforeClass
    public static void setUpBeforeClass() throws Exception
    {
    controlMessageContent = new String("Hello World");
    controlMessage = new HelloWorldMessageImplementation(controlMessageContent);
    }

    @Before
    public void setUp() throws Exception
    {
    testMessage = new HelloWorldMessageImplementation("Hello World");
    testMessageService = new HelloWorldMessageServiceImplementation(testMessage);
    }

    @Test
    public void testGetMessage()
    {
    assertEquals(testMessage, testMessageService.getMessage());
    }

    @Test
    public void testSetMessage()
    {
    testMessageService.setMessage(new HelloWorldMessageImplementation("Test Message"));
    assertEquals("Test Message", testMessageService.getMessage().getMessageAsString());
    }

    @Test
    public void testPrintMessageToConsole()
    {
    testMessageService.printMessageToConsole();
    assertEquals(controlMessageContent, testLog.getLog());
    }
} 
```

我的 HelloWorldMessageService 实现代码

```
package com.springtutorial.junitandmavenhelloworld.service;

public class HelloWorldMessageServiceImplementation implements
    HelloWorldMessageService
{
    HelloWorldMessage message;

    public HelloWorldMessageServiceImplementation(HelloWorldMessage newMessage)
    {
    super();
    this.setMessage(newMessage);
    }

    public HelloWorldMessage getMessage()
    {
    return this.message;
    }

    public void setMessage(HelloWorldMessage newMessage)
    {
    this.message = newMessage;
    }

    public void printMessageToConsole()
    {
    System.out.println(this.message.getMessageAsString());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:09:51.243

问题是`println()`在`HelloWorldMessageServiceImplemenation`课堂上的使用。此函数在字符串末尾添加一个回车`\n`符，导致输出与控制数据不匹配。要么将此更改为`print()`方法，要么在测试字符串的末尾添加一个回车符。

在测试控制数据中添加回车的正确方法如下

```
controlMessageContent = new String("Hello World\n"); 
```

# mysql - 安装多个 Moodle 包

> ID：15539338
> 
> 赞同：2
> 
> 时间：2013-03-21T04:10:18.273
> 
> 标签：mysql, ubuntu, phpmyadmin, moodle

我可以`Moodle`在本地机器上安装多个版本以用于开发目的吗？目前，我已经安装了最新的 Moodle`dev`版本并且运行良好。我可以随意`MySQL`使用`phpMyAdmin`。

多个 Moodle 包将如何影响`MySQL`或`phpMyAdmin`？

任何博客/帖子将不胜感激。

我正在使用 Ubuntu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:07:59.743

是的。

你的第七个 Moodle 实例的安装应该是这样的：

*   将所有文件解压到 Moodle7 中；
*   创建moodledata7文件夹；
*   在 phpmyadmin 中创建 moodle7 数据库；
*   不要创建单独的用户，只需将所有权限授予与前 6 次安装相同的用户；
*   打开 localhost/moodle7 并照常进行安装，将安装向导指向上述文件夹和数据库。

如果要克隆现有的moodle安装，请将moodle复制到moodle2，将moodledata复制到moodledata2，将数据库moodle复制到moodle2。然后`config.php`在moodle2文件夹的根目录中编辑指向正确的`dirroot`，`wwwroot`和数据库。

然后在数据库中进行搜索和替换（stackoverflow 上有一个很好的方法），以将你的 moodle 课程、论坛帖子等中的任何超链接从 moodle 更改为 moodle2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T09:44:44.753

Moodle + 多实例 + cron：

我有更多“moodle”虚拟域，我的目录结构是：

```
/var/www/html/main.moodle (directory with moodle installation)
/var/www/html/sub1.moodle.site -> symlink to main.moodle
/var/www/html/sub2.moodle.site -> symlink to main.moodle
/var/www/html/sub3.moodle.site -> symlink to main.moodle 
```

这是我的 config.php，具有多个站点的 cron 功能。

```
define('MOODLE_NO_DOMAIN', 'none');
$domain = MOODLE_NO_DOMAIN;

if ( defined('CLI_SCRIPT') && CLI_SCRIPT == true) {
        // CALLED FROM COMMANDLINE - cron.php etc ..
        preg_match('/^(.*\/)*(.*\.moodle\.site)\/.*$/',$_SERVER['PHP_SELF'],$matches);
        if ( count($matches) > 0 ) {
                $domain = $matches[count($matches) - 1];
        }
} else {
        // CALLED FROM BROWSER
        $domain = $_SERVER['HTTP_HOST'];
} 
```

// 以上来自 THOMAS VAN DEN HEUVEL

```
switch ($domain) {
    // configuration for subdomain 1
    case 'sub1.domain.com':
        $CFG->dbname = 'sub1_moodle'; // if your database is called sub1_moodle for this subdomain
        $CFG->wwwroot = 'http://sub1.moodle.site'; // no trailing slash
        $CFG->dataroot = '/path/to/sub1data/'; // depends on where you put your datadir
        break;
    // configuration for subdomain 2
    case 'sub2.domain.com':
        $CFG->dbname = 'sub2_moodle'; // if your database is called sub2_moodle for this subdomain
        $CFG->wwwroot = 'http://sub2.moodle.site'; // no trailing slash
        $CFG->dataroot = '/path/to/sub2data/'; // depends on where you put your datadir
        break;
    // et cetera
    default:
        // ... redirect to info page with moodle links
} 
```

$CFG->dirroot = '/var/www/html/main.moodle';

必须使用绝对或相对子域路径调用 Cron 任务：

```
php /var/www/html/sub1.moodle.site/admin/cli/cron.php 
```

或者

```
php sub1.moodle.site/admin/cli/cron.php 
```

我用一个非常简单的脚本调用所有子域 crons：

```
#! /bin/bash
WWW_ROOT="/var/www/html"
DIRS="sub1.moodle.site sub2.moodle.site sub3.moodle site"
for dir in $DIRS
do
        echo "$WWW_ROOT/$dir"
        php "$WWW_ROOT/$dir/admin/cli/cron.php"
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T17:14:42.973

我不了解 ubuntu，但是是的，您可以在同一台服务器上的系统中安装多个 Moodle 版本。

只需将文件夹命名为不同的名称，在 PHPMyAdmin 中创建一个不同名称的数据库，并相应地命名“moodledata”文件夹。那时一切都应该没问题。

# android - 如何重新启动在android中按下主页按钮退出的应用程序？

> ID：15539342
> 
> 赞同：0
> 
> 时间：2013-03-21T04:10:33.160
> 
> 标签：android, event-handling, android-homebutton

我有一个 android 应用程序，我只想在设备后退键按下时退出应用程序。我的意思是，如果用户单击 HOME 按钮，我想退出应用程序，但在特定时间后重新启动应用程序。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:21:53.610

如果您希望重新启动应用程序，您可以启动一项服务，在该服务中您可以使用以下代码启动您的活动：

```
Intent dialogIntent = new Intent(getBaseContext(), myActivity.class);
dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplication().startActivity(dialogIntent); 
```

您可以在按下 home 键时设置一个标志，并且可以检查服务以确保应用程序处于后台，这样就不会不必要地重新启动活动。

此链接可能对您有所帮助：[链接](https://stackoverflow.com/questions/5547818/can-i-override-the-home-button-in-my-application)

# gsm - 如果我有一个通用 GPRS 设备和一个 GPRS 服务器设置，我需要为任何 gsm/gprs 数据提供商付费吗？

> ID：15539344
> 
> 赞同：-2
> 
> 时间：2013-03-21T04:10:36.193
> 
> 标签：gsm, gprs

请原谅我的无知。

我的一个客户正在寻找具有 GPRS 功能的 gps 设备每隔一段时间向他拥有的 gprs 服务器发送更新。既然我的理解是 GPRS 使用 GSM，那么不需要订阅数据服务吗？

再次，请原谅我的无知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:04:15.827

是的，他需要订阅网络运营商，并为每个调制解调器提供一张 SIM 卡。没错，GPRS 是对 GSM 网络的数据增强。

# terminal - 在现有终端窗口中运行命令

> ID：15539350
> 
> 赞同：1
> 
> 时间：2013-03-21T04:11:16.413
> 
> 标签：terminal, applescript, automator

我想使用 applescript 在现有打开的终端窗口中运行命令。它不是普通的 bash 终端窗口，它是游戏服务器控制台（我的世界）的 java 终端

我以前从未写过applescript，所以我正在努力学习。似乎我找到的所有片段和教程都打开了一个新的 bash 窗口，但在这种情况下不起作用。例如

```
tell application "Terminal"
    try
        do script "save-all"
    end try
end tell 
```

如何使用 applescript 在这个现有窗口中运行命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:09:41.997

尝试：

```
tell application "Terminal"
    do script "save-all" in front window    
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:20:31.453

您需要 A）通过 ScriptEditor 编译您的 Applescript，然后以某种方式从您的 Java 终端调用该编译脚本（[“ `osascript`”命令是否在该终端中工作？](https://stackoverflow.com/questions/8424930/how-can-i-launch-an-applescript-scpt-file-from-the-terminal-and-pass-terms-var)）或 B）您需要[编写一个本地 Objective-C 工具](http://developer.apple.com/library/mac/#technotes/tn2084/_index.html)，您可以从 Java 应用程序中的某种粘合层调用。

[这也是我刚刚发现的一个相关问题](https://stackoverflow.com/questions/6159719/applescript-from-java-on-mac-os-x-10-6)，可能对您有一些有用的答案/提示。

# html - 如何将所有 div 图像调整为特定大小？

> ID：15539357
> 
> 赞同：1
> 
> 时间：2013-03-21T04:12:28.910
> 
> 标签：html, css

我`divs`在一个页面中有很多图像。如何将所有这些图像调整为特定大小（缩略图大小）？目前所有图像都显示其原始的大尺寸。有没有办法调整这些`divs`图像的大小而不更改其中的图像标签`divs`，最好使用 CSS？

```
<div class="ItemLeft">

  <div class="Clipping">        
    <a class="ImageLink" href="/videos/id8" title="galaxy">
      <img class="ItemImage" src="/Images/video8.jpg" alt="video 8" />
      <img class="OverlayIcon" src="/Images/1.png" alt="" />
    </a>
    <a class="DurationInfo" onmouseover="showDuration2(this);" onmouseout="hideDuration2(this);" href="/videos/id1234"><span class="Text">51:57</span></a>
  </div>

  <div class="Title"><a href="/videos/id8" title="galaxy">galaxy</a></div>

  <div class="VideoAge">1 daybefore</div>

  <div class="PlaysInfo"> broadcast 265</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:20:50.747

也许你正在寻找这样的东西：

```
<style type="text/css">
    .ImageLink img {
        width: 50px;
        height: 50px;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T04:21:34.530

您可以简单地更改 CSS 文件中 ImageLink 或 ItemImage 类的 css。

像这样的东西

```
.ImageLink{height: 100px; width: 50px}
.ItemImage{height: 100px; width: 50px} 
```

这应该将它们全部设置为相同的高度和宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:33:48.250

最好的方法是让`img`标签覆盖 100% 的`div`.

**CSS**

```
.Clipping {
  width: 300px; //your width
  height: 200px; //your height
  overflow: hidden;
}
.ImageItem {
  width: auto; //or 100%. Auto is to keep aspect ratio
  height: 100%;
} 
```

这种方法是我在我的网站上使用的，因为它对于响应式设计很灵活。与其使用 px 值`div`，不如使用百分比来获得灵活性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T04:51:59.960

最好的方法是，保持 img 标签的通用样式（这将适用于所有图像），您可以设置 div 或 span 的大小。图像将根据您的 div 或 span 大小进行调整。

```
img {max-width: 100%;height: auto;} 
```

# android - 如何通过onClick将视图添加到Fragment的LinearLayout中？

> ID：15539359
> 
> 赞同：0
> 
> 时间：2013-03-21T04:12:36.290
> 
> 标签：android, android-layout

我有一个片段，这个布局是一个按钮。

单击按钮时，将 textview 添加到 textview_container 中。

如何？

我的片段.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#00000000"
    android:orientation="vertical" >
<LinearLayout 
    android:id="@+id/textview_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#00000000"
    android:orientation="horizontal" >
</LinearLayout>
<Button
                android:id="@+id/postbutton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:background="@null"
                android:text="@string/edit"
                android:textColor="@color/black"
                android:textSize="14sp" />
</LinearLayout> 
```

Myfragment.java

```
public class AlbumListDetailFragment extends Fragment implements OnClickListener {
    Button postButton
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.myfragment  , container, false);
    }
    public void onStart() {
        super.onStart();
        initViews();
    }
     private void initViews() {
          button = (Button) getView().findViewById(R.id.postbutton);
          button.setOnClickListner{new View.onClickListener(){
           public void onClick(View v) {
               //make and Textview  into textview_container
           }
          }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:24:30.597

```
LinearLayout linearLayout = (LinearLayout)findViewById(R.id.textview_container);
TextView valueTV = new TextView(this);
linearLayout.addView(valueTV); 
```

# android - 哪种布局最适合android中的代码库UI

> ID：15539361
> 
> 赞同：-5
> 
> 时间：2013-03-21T04:13:04.913
> 
> 标签：android, android-layout

你能告诉我哪种布局最适合在 android 中创建代码库 UI（无布局 xml），以及我如何管理组件的宽度和高度及其在不同屏幕分辨率上的位置。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:16:06.367

没有，这真的取决于你想做什么。

> 如何管理组件的宽度和高度及其在不同屏幕分辨率上的位置。

那很容易。您将按照与管理 XML 布局完全相同的方式进行操作。无论如何，您确实需要在 Android 上做一些基本的阅读。这个问题太笼统了。

[如果您在developer.android.com](http://developer.android.com)上查看 Android 上有一些不错的 youtube 视频

另外，我的建议是，在您了解更多有关它们的信息之前，不要跳过 xml 布局。

# wordpress - 如何禁用一个 Wordpress 页面的评论

> ID：15539364
> 
> 赞同：2
> 
> 时间：2013-03-21T04:13:17.847
> 
> 标签：wordpress, comments, webpage

我知道我可以永久禁用 wordpress 博客的评论的技术，但是我想澄清一下我如何仅对 wordpress 博客的某个页面/帖子禁用评论

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T04:17:09.483

请查看此链接以禁用一页或帖子： [禁用 wordpress 中的评论](http://en.support.wordpress.com/enable-disable-comments/)

看我的截图： ![在此处输入图像描述](../Images/2d3c4d2f1c80433903200b9b8f8dc495.png)

![在此处输入图像描述](../Images/03b117c6eae7fa02b21640d2e7aa7b9d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T17:57:07.947

已经有禁用特定帖子评论的内置功能。您可以通过特定页面底部的讨论面板禁用。有关所有步骤，请参见此处

[http://blog.i13websolution.com/wordpress-how-to-disable-comments-on-particular-post/](http://blog.i13websolution.com/wordpress-how-to-disable-comments-on-particular-post/)

# jquery - 如何在使用jquery更改的复选框上填充文本框？

> ID：15539370
> 
> 赞同：0
> 
> 时间：2013-03-21T04:14:48.453
> 
> 标签：jquery, asp.net

我正在做一个 Web 应用程序，我在其中输入基于组织化的程序详细信息。对于用户首先选择组织`(from dropdown which is taken from database on pageload)`，然后有一个输入程序地址详细信息的规定。地址可以与组织地址相同。所以我放了一个这样的复选框

```
Enter the program address: [checkbox] Same as organization adress 
```

如果用户勾选复选框，我想填写与组织地址相同的程序地址详细信息。

我知道我可以这样做`checkbox checkchanged event`。但我不想在这种方法上这样做，因为会有回发而且我没有使用任何更新面板。

有什么方法可以使用 jquery 实现上述目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:18:16.310

[像这个演示](http://jsfiddle.net/KuTe9/1)一样使用变化

```
<input type="text" id="txt1" />
<input type="checkbox" id="chk1" />
<input type="text" id="txt2" /> 
```

jQuery

```
$('#chk1').on('change',function(){
if(this.checked)
    $('#txt2').val($('#txt1').val());
else
    $('#txt2').val('');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:28:52.837

这对 JQuery 来说是一件轻而易举的事。我喜欢在用户知道修改源之后禁用复制的字段。我为您准备了一个示例[JSFiddle](http://jsfiddle.net/baUTZ/)，并在下面提供了一些示例 JQuery。

```
$(document).ready(function () {
    $('#idofcheckbox').click(function () {
        $('#idofothertext').val($('#idoftextbox').val());
        $('#idofothertext').attr('disabled', 'disabled');
    });
}); 
```

根据您上面的评论，您将需要构建一个 web 服务来公开此数据库字段并通过 jquery 中的 ajax 调用它。[这](http://chandradev819.wordpress.com/2011/04/08/how-to-populate-dropdown-on-client-side-using-web-service-and-jquery/)是关于构建 Web 服务然后使用 AJAX 使用它的好读物。然后，您可以扩展上面的代码来处理单击时的 Ajax 调用，它不会回发。

```
 $(document).ready(function () {
        $('#idofcheckbox').click(function () {
            $.ajax({
                url: "test.html",
                context: document.body
            }).done(function (data) {
                $('#idofothertext').val(data.address);
            });
        });
    }); 
```

# css - Chrome没有居中文本

> ID：15539371
> 
> 赞同：1
> 
> 时间：2013-03-21T04:14:55.050
> 
> 标签：css, google-chrome, media-queries

我在我的 GS3 和 Nexus 7 上的 chrome 中遇到了一个奇怪的问题。当我以纵向模式查看我的网站并切换到横向时，我的介绍文本不在屏幕中央。很奇怪。但是如果来回工作正常，我会在横向模式下刷新并转到纵向。

这里是测试站点：[http ://www.brianmworks.com](http://www.brianmworks.com)

这是 CodePen：[http ://codepen.io/Budha210/pen/JkxbE](http://codepen.io/Budha210/pen/JkxbE)

我在我的手机上测试过默认的三星浏览器，dolphin 和 opera。它看起来很完美。这仅发生在 Chrome 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:36:33.643

h1 是块级元素.. 尝试将 text-align:center 放在其类中

# android - 如何确定与活动相关的任何字段是否设置了错误？

> ID：15539376
> 
> 赞同：2
> 
> 时间：2013-03-21T04:15:06.590
> 
> 标签：android, input, android-activity, validation

我正在执行一些输入验证`onClickListener()`。虽然我对我的验证方法没意见，但我担心我确定任何经过验证的输入是否有错误的方式。目前，我`isValid`在 Activity 开始时将一个字段设置为 true，`onClickListener()`然后在我的验证方法中将其设置为 false，如果验证失败。

验证完成后，在对数据做任何事情之前，我可以检查`isValid`以确保所有输入都是好的。虽然该方法有效，但感觉很脆弱。这里有一些代码来说明：

```
private OnClickListener dcClickListener = new OnClickListener() {
    public void onClick(View v) {
        AuthenticationActivity.this.isValid = true; // set to true for this pass
        emailValidation();
        // more validation methods here...

        if (AuthenticationActivity.this.isValid) {
            Log.i(TAG, "everything valid!");
        }
    }
};

private void emailValidation() {
    if (!isValidEmail(emailInput.getText()
            .toString())) {
        emailInput.setError(getString(R.string.bad_email));

        AuthenticationActivity.this.isValid = false; // same in other methods
    }
} 
```

创建一个输入集合然后遍历它以确定是否有任何错误的想法也出现在我的脑海中。框架中是否内置了一些东西来处理活动级别验证？有比我在这里概述的更好的解决方案吗？这种范式是否有一个常用的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:25:49.933

您可以构建一个返回布尔值的自定义验证函数，并在 For each 循环中遍历调用该函数的所有视图，同时在参数中传递视图。

如果函数返回 True，则表示验证正常，否则将视图添加到数组中。遍历所有视图后，检查数组中是否有一些视图，如果有，则将焦点放在第一个视图上，并向所有未通过验证的视图显示错误消息。

# c# - 在运行时更改方法行为的最简单方法是什么？

> ID：15539377
> 
> 赞同：2
> 
> 时间：2013-03-21T04:15:11.733
> 
> 标签：c#

我有一个班级`Enemy`，我想有多种类型的敌人。每个`Enemy`都会有不同的移动行为，例如一个可能会直接向玩家移动，一个可能会保持一定的距离等。我想知道的是，拥有多种不同行为的最简单方法是什么，最好是在一个类中？

我目前的想法是使用 a `switch`，并将所有行为包含在一个方法中

```
public class Enemy
{
     public int health;
     public int damage;
     // etc etc

     public void Move(string type)
     {
        switch(type)
        {
             case "charge":
                  chargeMove();
                  break;
             case "maintain":
                  maintainMove();
                  break;
        }
     }

     private void chargeMove()
     {
          //stuff
     }

     private void maintainMove()
     {
          //stuff
     }

     //all the behaviors
} 
```

我想知道的是，将所有内容保留在这样的一个函数中，还是为每个继承自的敌人类型创建一个新类更好`Enemy`？我更愿意将它保留在一个类中，以便所有敌人都可以很好地存储到 a`IList`中，而无需我进行任何强制转换来使用任何特定功能。

任何意见，将不胜感激。

编辑：感谢所有回复，我想我会使用 Alastair 提出的接口方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:21:12.687

听起来[策略模式](http://www.oodesign.com/strategy-pattern.html)会很有用。

我认为您为每种 Enemy 类型设置一个新班级的建议是一个不错的建议。您仍然可以将不同敌人类型的所有不同对象存储在一个单独的对象中，`List<Enemy>`因为它们都继承自该类。

您也可以考虑将`Enemy`类作为抽象类，但这不是必需的。

如果你真的需要知道列表中特定对象的具体类型，你可以使用[typeof](http://msdn.microsoft.com/en-us/library/58918ffs.aspx)或者[is](http://msdn.microsoft.com/en-us/library/scekt9xw.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T04:29:21.887

虽然这可能更适合[Gamedev.stackexchange.com](https://gamedev.stackexchange.com/)网站，但您可能需要考虑使用某种组合。

定义一个描述运动描述的接口。例如

```
public interface IMovementBehavior
{
    void Move(Enemy enemy);
} 
```

那么你就会有许多不同的行为来描述不同的动作。例如。

```
public class ChargingMovementBehavior : IMovementBehavior { ... }
public class MaintainingMovementBehavior : IMovementBehavior { ... } 
```

因此，您的敌人构造函数可能具有如下定义：

```
public Enemy(IMovementBehavior movementBehavior) { ... } 
```

这意味着您可以轻松地插入和退出不同的移动行为，而不必用所有不同的移动行为填充您的敌人类。

这被称为[基于组件的实体](http://entropyinteractive.com/2011/02/game-engine-design-component-based-entities/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:19:34.743

使用委托：

```
public delegate void DoSth(); 
```

在运行时，您将此委托与不同的实例相关联。

请参阅此处的[msdn 参考](http://msdn.microsoft.com/en-us/library/ms173172%28v=vs.80%29.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T04:25:39.400

我会创建多个派生自同一个接口的类。您仍然可以拥有接口类型的列表。这是[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)派上用场的一个典型例子。如下所示：

```
interface iEnemy
{
    public void Move();
}

class Troll : iEmeny
{
    public void Move()
    {
       Console.WriteLine("troll moves!");
    }
}

class Ogre : iEmeny
{
    public void Move()
    {
       Console.WriteLine("ogre moves!");
    }
} 
```

然后在你的代码中你可以这样做：

```
List<iEnemy> enemies = new List<iEnemy>();
enemies.Add(new Troll());
enemies.Add(new Ogre());

foreach(iEnemy e in enemies)
{
    e.Move();
}
//Output would be:
//troll move!
//ogre move! 
```

这也将允许您遵循[打开/关闭原则](http://en.wikipedia.org/wiki/Open/closed_principle)，该原则指出实体应该对扩展开放但对修改关闭。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T04:28:43.770

我会使用派生类。这几乎就是它们的用途——在调用相同的方法时提供不同的行为。

如果您不想强制转换，请在基类上定义所有方法。如果派生类没有覆盖特定方法，它将获得基类中定义的任何行为，如果您从不调用它，这并不重要。如果你不想使用 typeof 等，你仍然可以有一个整数“类型”字段。

```
public enum EnemyType
{
    Zombie,
    Vampire
}

public class Enemy
{
    private EnemyType mType;

    protected Enemy(EnemyType type) { mType = type; }

    public EnemyType getEnemyType() { return mType; }

    public void walk() { }

    public void attack() { }

    public void eatBrains() { }
}

public class Vampire : Enemy
{
    public Vampire : base(EnemyType.Vampire) { }

    public void walk()
    {
        // walk like a vampire
    }

    public void attack()
    {
        // attack like a vampire
    }

    // don't bother implementing eatBrains() because vampires don't do this
    // calling code will use getEnemyType() and won't bother call our eatBrains() method anyway
} 
```

# sql - 过滤我的 SQL 查询以搜索某个“顶级”父级的最佳方法是什么？

> ID：15539382
> 
> 赞同：1
> 
> 时间：2013-03-21T04:15:40.600
> 
> 标签：sql, nhibernate, recursion

我有一个使用 nhibernate 查询 SQL 服务器数据库的网站。其中一张表具有以下列：

ID
名称
ParentId

因此，此表中的某些条目可能是：

Id 名称 ParentId
1, "Joe", 3
3, "Tim", 5
5, "Jack", 7
7, "Tom", null

我正在尝试运行这样的查询（伪 SQL）。.

```
 "Select * from ThisTable where IsDescendant of 7" 
```

这将返回任何 7 岁的孩子或孩子的孩子等。. （在上面的示例中，将返回所有行）

什么是解决这个问题的最佳方法，而不必将所有内容都保持在循环中。此外，由于我使用的是 nhibernate，因此我可以将其作为函数添加到我的代码中，但看起来它可以转换为数百条 SQL 语句。我也很好奇如何在原始 SQL 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:37:44.933

我建议您创建一个表格，将计算出的后代保存在您所引用的表格中的所有条目的多个级别。使用 CTE 应该非常有效，但是如果您经常查询后代，如果您将所有后代数据写入一个具有如下结构的单独表中，则可以大大减少数据库开销：

表 XDescendance：ID、ItemID、ParentID、Level

然后，当该表上的触发器注意到任何更改时，您将重写此数据。

然后你可以几乎完全按照你写的那样查询它（几乎）

```
SELECT DISTINCT
        ThisTable.*
    FROM ThisTable
    INNER JOIN XDescendance
        ON ThisTable.ID = XDescendance.ItemID
        AND XDescendance.ParentID = 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:30:48.033

在 SQLServer2005+ 中，您可以使用递归 CTE

```
DECLARE @Id int = 7     
;WITH cte AS
  (
   SELECT Id, Name, ParentId
   FROM dbo.test45
   WHERE Id = @Id
   UNION ALL
   SELECT t.Id, t.Name, t.ParentId
   FROM dbo.test45 t JOIN cte c On t.ParentId = c.Id
   )
   SELECT *
   FROM cte 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/b8323/3)上的演示[](http://sqlfiddle.com/#!3/b8323/3)

# php - 使用 php 和 Mysql 的 if 语句

> ID：15539386
> 
> 赞同：-1
> 
> 时间：2013-03-21T04:16:31.357
> 
> 标签：php, sql

我需要一些关于 PHP 中 if 语句的帮助，因为我是新手

首先我有这个查询：

```
$sqlCmd = "SELECT user.name,user.level 
    FROM user.user 
    WHERE user.id = '".$_GET['char']."' 
    LIMIT 1"; 
```

现在我有第二个查询

```
visible $sqlUpdate = "UPDATE user.user 
    SET level='1' 
    WHERE id='".$_GET['char']."' 
    LIMIT 1"; 
```

我想做的是这样的：`if level>1`运行`$sqlUpdate`，否则打印错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:18:18.667

像这样试试

```
visible $sqlUpdate = "UPDATE user.user 
                      SET level='1' 
                      WHERE id='".mysql_real_escape_string($_GET['char'])."' 
                      AND level >1 
                      LIMIT 1"; 
```

参考这个链接，他们可以帮助你学习 [http://sqlzoo.net/](http://sqlzoo.net/) ，[http://beginner-sql-tutorial.com/sql.htm](http://beginner-sql-tutorial.com/sql.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T04:18:53.990

```
visible $sqlUpdate = "UPDATE user.user SET level='1' WHERE id='".mysql_real_escape_string($_GET['char'])."' AND level >1 LIMIT 1"; 
```

您的代码容易受到 sql 注入的影响 您需要正确转义所有请求

* * *

## **警告**

您的代码容易受到[sql 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响，您需要全部转义`get`，更好的方法是使用[Prepared 语句](http://en.wikipedia.org/wiki/Prepared_statement)`post``request`

**好读**

1.  [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)
2.  [**PDO 准备好的语句是否足以防止 SQL 注入？**](https://stackoverflow.com/a/12202218/1723893)

* * *

## **笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958.)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
3.  [Pdo 初学者教程](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:21:13.840

```
$sqlCmd = "SELECT user.name,user.level FROM user.user WHERE user.id = '".$_GET['char']."' AND level>1 LIMIT 1";
if(mysql_num_rows($mysql_con)===1){
//run second query
}else{echo'error:'} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T04:21:55.807

我认为这应该这样做......

```
$result = mysql_query($sqlCmd);
if($row = mysql_fetch_object($result)) {
    if ($row->level > 1)
    {
      mysql_query($sqlUpdate);
      //Might want to add a check here if it was successful... 
      echo "Done";
    }
    else
      echo 'error!!!';

}
mysql_free_result($result); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T04:34:33.247

尝试这个

```
$sqlCmd = "SELECT user.name,user.level 
FROM user.user 
WHERE user.id = '".$_GET['char']."' 
LIMIT 1";

$resource = mysql_query($sqlCmd);
$temp_arr = mysql_fetch_assoc($resource);
$level    = $temp_arr['level'];
if($level > 1)
{
    $sqlUpdate = "UPDATE user.user 
    SET level='1' 
    WHERE id='".mysql_real_escape_string($_GET['char'])."' 
    LIMIT 1";

    mysql_query($sqlUpdate);
 } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-21T04:20:03.810

```
 mysql_query("UPDATE user.user SET level='1' WHERE id='".$_GET['char']."' and level>1 LIMIT 1"); 
```

# javascript - JSON 值中的 jQuery 对象

> ID：15539388
> 
> 赞同：0
> 
> 时间：2013-03-21T04:16:59.903
> 
> 标签：javascript, jquery, json

这是我的第一个问题！

我通过 AJAX 调用 JSON 以在客户端验证库中使用。该库要求我指定对于当前规则，我希望在何处插入错误消息。对于我的静态验证规则，我可以编写一个对象，例如：

```
{ 'errorlocation' : jQuery('[name="foo"]').closest('.bar') } 
```

我的验证库允许我在第一次初始化后注入更多规则，因此当我通过 REST 提交模型时，我可以收到带有错误的服务器响应。我目前正在开发该服务器响应。我希望错误响应只是一个验证规则数组，以便我以后可以将这些规则注入到已经在我的页面上创建的同一个验证对象中。因此，在响应 JSON 中，我需要上面代码片段中的定​​义。

`jQuery()`尽管 jQuery 在全局命名空间中绝对可用，但 Backbone 和 jQuery 的解析 json 算法似乎无法评估对象的值。所以这不起作用：

```
jQuery.parseJSON("{ 'errorlocation' : jQuery('[name=\"foo\"]').closest('.bar') }"); 
```

我曾考虑在解析后仅存储“[name='foo']”和 jQuerying，但这不适用于我想要链接的情况，例如上面的情况`.closest('.bar')`

有谁知道将解析/允许位于全局命名空间中的变量的 JSON 解析器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:27:36.020

JSON 是一种数据格式，而不是一种代码格式。通常，您希望以将数据从服务器传递到客户端的方式来构建系统，然后您的客户端使用数据来确定操作。因此，也许您会将`foo`and`.bar`作为数据传递回去，以及另一个参数来确定要运行的函数。

如果您真的必须以这种方式设计它，我建议您不要这样做，您可以使用 eval 将任意字符串评估为 javascript，如下所示：

```
var errorInfo = jQuery.parseJSON(
    "{ 'errorlocation' : \"jQuery('[name=\"foo\"]').closest('.bar')\" }");

eval(errorInfo.errorocation); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:21:29.060

您是否考虑过将整个 jQuery 调用存储为字符串，然后在客户端运行 eval？像这样：

```
json = jQuery.parseJSON("{ 'errorlocation' : 'jQuery(\'[name=\"foo\"]\').closest('.bar')' }");
location = eval(json.errorlocation) //runs the jQuery string 
```

# ftp - 通过 FTP 空文件从 AS/400 获取保存文件

> ID：15539404
> 
> 赞同：0
> 
> 时间：2013-03-21T04:18:16.240
> 
> 标签：ftp, ibm-midrange

我试图从 AS/400 服务器下载库的 SAVEFILE。我总是得到一个 0 字节的空文件，

这些是我遵循的步骤

```
 Go to a MS-DOS Shell.
Go to the location on the PC where you want to store the save file.
Type:

FTP (AS/400_IP_ADDRESS)

Or

FTP (AS/400 _NAME)
Enter your AS/400 username and password for that system when prompted.
To ensure the transfer mode is binary (there will be no conversion), type:

BIN
To go to the library on the AS/400 where the save file is stored, type:

CD LIBRARY
To transfer the save file from the AS/400 to your PC, type:

GET NAME
When the transfer is complete, exit the ftp session by typing:

QUIT
To close the MS-DOS shell, type:

EXIT 
```

在 as400 端我可以看到文件大小是 24576 字节

FTP 提示返回“226 文件传输成功”。

但文件是空的。

任何原因 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:05:27.063

最简单的方法是：

ftp ip地址

垃圾桶

获取 LIBARY/SAVF SAVF（这只是告诉它在 tmp 中删除同名文件）

退出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:24:55.397

与其使用 FTP GET 上的库列表，不如指定保存文件所在的库。例如，如果您`SAVLIB ... SAVF(TESTLIB/MYSAVF)`在 FTP GET 命令上执行了 then，请指定`GET TESTLIB/MYSAVF`. 如果这没有帮助，请更新您的问题以显示您用于创建保存文件并将其通过 FTP 关闭的确切步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:55:48.267

我们总是首先创建空 savf。

在 FTP 中，进入 BINARY 模式。CD 和 LCD，根据需要更改远程和本地当前目录。如果需要，更改 NAMFMT。

如果您没有更改本地目录，则该文件可能会转到其他地方，您没有在其中查找。

# utf-8 - 我无法将 á€±á€”á€±á€” 这些字符转换为类似缅甸字体的字符串

> ID：15539407
> 
> 赞同：-3
> 
> 时间：2013-03-21T04:18:30.250
> 
> 标签：utf-8

当我使用
String ss =new String(rs.getString(i).getBytes("ISO-8859-15") “utf8”）；转换成 ？？？？我想用我指定的字体转换它我用它和数据库一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:35:26.767

那里有太多的字符串转换。执行`rs.getString(i)`此操作时，数据库驱动程序会将列中的字节解释为数据库定义的字符集中，然后再转换为 Java 的内部表示 (UTF-16)。然后调用`getBytes`将字符串转换为 ISO-8859-15 中的一系列字节，然后您将在 UTF-8 中解释这些字节。呸！

那么数据库是以 ISO-8859-15 还是 UTF-8 存储数据的呢？表上的编码规范是什么？如果您确切知道它们的存储方式并希望避免数据库驱动程序执行任何字符串工作，则可以使用以下解决方法：

```
String ss = new String( rs.getBytes( i ), "UTF-8" );  // Change UTF-8 to the encoding you know is in use 
```

我希望其中一些有所帮助。

# javascript - jquery - .submit() 函数在 ajax() 函数中不起作用

> ID：15539408
> 
> 赞同：0
> 
> 时间：2013-03-21T04:18:32.800
> 
> 标签：javascript, jquery, ajax

我是ajax的新手。要求相当简单。当按下提交按钮时，javascript 将执行异步请求，服务器端将验证用户输入。如果输入正确，表单将执行标准提交，否则会出现错误消息。

所以，这是我的表格：

```
<form id="form" action="dosomething.jsp" method="post">
  <input type="text" name="name">
  <input type="text" name="email">
<input id="submit" type="submit" value="Go">
</form> 
```

这是我的javascript：

```
$(document).ready(function() {
    $("#form").submit(function(event) { 
        event.preventDefault();
        var form = $(this);
        var button =  $("#submit");
        button.attr("disabled", "disabled");
        $.ajax({
            url: "ValidateServlet",
            type: "post",
            data: form.serialize(),
            success: function(msg) {
                if(msg== ""){
                    form.unbind("submit");
                    form.submit();
                } else{
                alert(msg);
                button.removeAttr("disabled");
                }
            }
        });
    });
}); 
```

代码工作正常，除了一个功能`form.submit();`不起作用。我在 ajax() 函数之外尝试这个，它会提交，所以我认为范围有问题，但我无法解决这个问题。

让我澄清一下`form.unbind();`。假设我删除了带有 的行`form.submit();`，换句话说，只有`form.unbind();`成功案例`(if(msg = ""))`。当我第一次按下提交按钮时，表单会做一个异步请求来正常验证。如果输入正确（即`msg = ""`），当我再次按下提交按钮时，它会执行标准提交，因为我已经解除了提交事件的绑定。因此，问题不在于`form.unbind();`，至少在我看来。

小服务程序代码：

```
public void doPost(HttpServletRequest request,HttpServletResponse response) 
            throws ServletException, IOException{
    PrintWriter out = response.getWriter();
    String msg = "";
    String name = request.getParameter("name");
    String email = request.getParameter("email");
    if("".equals(name)){
        msg += "<li>Please enter name</li>" ;
    }
    if("".equals(email)){
        msg += "<li>Please enter email</li>" ;
    }
    if(title.length() > 20 ){
        msg += "<li>Name should be lesser than 20 character.</li>" ;
    }
    if(email.length() > 30){
        msg += "<li>Title should be lesser than 30 character.</li>" ;
    }
    if(! "".equals(msg)){
        msg = "<p>Error :</p><ul>" + msg;
        msg += "</ul>";
        out.print(msg);
    } 
    out.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:26:02.243

您是否尝试过使用 $.on() 和 $.off() 来绑定您的事件？

就像是

```
$(document).ready(function() {
    $("#form").on('submit',function(event) { 
        event.preventDefault();
        var frm = $(this);
        var btn =  $("#submit");
        button.attr("disabled", "disabled");
        $.ajax({
            url: "ValidateServlet",
            type: "post",
            data: frm.serialize(),
            success: function(msg) {
                if(msg== ""){
                    frm.off("submit");
                    frm[0].submit();
                } else{
                alert(msg);
                btn.removeAttr("disabled");
                }
            }
        });
    });
}); 
```

我也尽量避免使用'form'作为变量名

# r - 如何使R中的表达式简单？

> ID：15539419
> 
> 赞同：-3
> 
> 时间：2013-03-21T04:19:35.663
> 
> 标签：r

如何使 R 中的表达式更简单？

```
0.64-0.0205*(c(qnorm(0.005),-qnorm(0.005))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:44:49.320

```
0.64-0.0205*c(1,-1)*qnorm(0.005) 
```

# javascript - 禁用发送按钮

> ID：15539425
> 
> 赞同：0
> 
> 时间：2013-03-21T04:20:37.590
> 
> 标签：javascript, jquery

我正在使用此代码检查是否在下拉列表中选择了一个值。

```
$(document).ready(function () {
$("send").click(function () {

if (document.getElementById('dropdown1').selectedIndex == 0)
$("#msg_dropdown1").html("Required");

});
$('#dropdown1').change(function(){$('#msg_dropdown1').hide()})
}); 
```

在选择一个值之前是否存在禁用提交按钮的方法？

```
<input type="submit" id="send" value="SEND" class="greyishBtn" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:22:28.170

更改 `$("send").click(function () {` 为 `$(#"send").click(function () {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:24:44.853

首先使用`ID`选择器`send`

**替换** `$("send").click(function () {`

**和** `$("#send").click(function () {`

```
 $('#dropdown1').change(function(){
        if($('#dropdown1').val() != 0){
            $("#send").attr("enabled","enabled");
        } else{
            $("#send").attr("disabled","disabled");
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:26:57.363

```
$(document).ready(function () {
    $("#send").click(function () {
        if (document.getElementById('dropdown1').selectedIndex == 0)
            $("#msg_dropdown1").html("Required");
    });
    $('#dropdown1').change(function(){
        if($(this).val() != 0){
            $("#send").removeAttr("disabled");
        }
        else{
            $("#send").attr("disabled","disabled");
        }
    });
});

<input type="submit" id="send" value="SEND" class="greyishBtn" disabled="disabled" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T04:27:05.147

尝试这个

```
 <select id="dropdown1" name="dropdown1" onchange="unblock(this)">

    function unblock(arg){
      if(arg.options[arg.selectedIndex].value !=0){
      $('#send').css('display','block');
      }
    } 
```

# c# - 选择 XML 元素而不使用扩展方法

> ID：15539428
> 
> 赞同：3
> 
> 时间：2013-03-21T04:21:02.733
> 
> 标签：c#, xml, linq

[MSDN - System.Xml.XPath Extensions Class](http://msdn.microsoft.com/en-us/library/system.xml.xpath.extensions%28v=vs.100%29.aspx)说：

> 使用这些方法会有一些性能损失。使用 LINQ to XML 查询会产生更好的性能。

而[XPathSelectElement](http://msdn.microsoft.com/en-us/library/bb156083.aspx)是一个扩展方法

我有以下 XML。我需要找出消息并将其连接起来。挑战是 - 我只需要选择下面的消息`Status/StatusMsg/StatusDetail`。有了`Descendants`，我得到了所有的消息——即使是在所需元素之外。

这可以使用`XPathSelectElement`. 但由于 XPathSelectElement 是一种扩展方法，因此它对性能有一定影响，如[LINQ to XML with XPath performance review](http://blog.dreamlabsolutions.com/post/2008/12/04/LINQ-to-XML-and-LINQ-to-XML-with-XPath-performance-review.aspx)中所示：

> 在大多数情况下，运行 XPath 查询将导致执行周期比使用标准 LINQ to XML 查询长 5 倍。

不使用 C# 在 LINQ to XML 中使用扩展方法的最佳方法是什么？

注意：有没有办法`Descendants`为此目的进行调整？

**XML**

```
XDocument xDoc = XDocument.Parse(@"  
          <Status>
                <StatusMsg>
                    <StatusType>INVOICE</StatusType>

                    <StatusDetail>
                        <Sequence test=""K"">  2  </Sequence>
                        <Message>A</Message>
                    </StatusDetail>

                    <StatusDetail>
                        <Message>B</Message>
                    </StatusDetail>

                    <StatusDetail>
                        <Message>C</Message>
                    </StatusDetail>
                </StatusMsg>

                    <StatusDetail>
                        <Message>OUTSIDE</Message>
                    </StatusDetail>
            </Status>
           "); 
```

**代码**

```
// Descendants
var messageArrayWithOutside = xDoc.Descendants(@"StatusDetail")
                             .Select(
                                       x => x.Element("Message") == null ? String.Empty : x.Element("Message").Value.Trim()
                                    ).ToArray();

var textAll = string.Join(", ", messageArrayWithOutside);

//XPathSelectElements
var messageArray = xDoc.XPathSelectElements(@"Status/StatusMsg/StatusDetail")
                           .Select(
                                     x => x.Element("Message") == null ? String.Empty : x.Element("Message").Value.Trim()
                                  ).ToArray();

var text = string.Join(", ", messageArray); 
```

**更新**

XPath 似乎比使用 Descendants 快两次。知道为什么吗？

```
 // Descendants
        Stopwatch stopWatchDescendants = new Stopwatch();
        stopWatchDescendants.Start();
        var messageArrayDecendants = xDoc.Descendants("StatusMsg")
            .Descendants("StatusDetail")
            .Select(
                x => x.Element("Message") == null ?string.Empty : x.Element("Message").Value.Trim()
            ).ToArray();

        var textDecendants = string.Join(", ", messageArrayDecendants);
        stopWatchDescendants.Stop();
        TimeSpan tsDescendants = stopWatchDescendants.Elapsed;

        //XPathSelectElements
        Stopwatch stopWatchXPath = new Stopwatch();
        stopWatchXPath.Start();
        var messageArrayXPath = xDoc.XPathSelectElements(@"Status/StatusMsg/StatusDetail")
                           .Select(
                                     x => x.Element("Message") == null ? String.Empty : x.Element("Message").Value.Trim()
                                  ).ToArray();

        var textXPath = string.Join(", ", messageArrayXPath);
        stopWatchXPath.Stop();
        TimeSpan tsXPath = stopWatchXPath.Elapsed;

        if (tsXPath > tsDescendants)
        {
            Console.WriteLine("LINQ is fast");
        }
        if (tsDescendants > tsXPath)
        {
            Console.WriteLine("XPath is fast");
        }

        Console.WriteLine("XPath :" + tsXPath.ToString());
        Console.WriteLine("LINQ :" + tsDescendants.ToString()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:33:59.693

您需要使用.Elements [(XName)](http://msdn.microsoft.com/en-us/library/bb348975.aspx)而不是[.Descendants(XName)](http://msdn.microsoft.com/en-us/library/bb353813.aspx)，如下所示：

```
var messageArrayWithOutside = xDoc.Elements("StatusMsg")
    .Elements("StatusDetail")
    .Select(
        x => 
            x.Element("Message") == null ? 
            string.Empty : 
            x.Element("Message").Value.Trim()
    ).ToArray();

var textAll = string.Join(", ", messageArrayWithOutside); 
```

然后 textAll 字符串将包含所需的输出并省略`OUTSIDE`：

```
A, B, C 
```

关键似乎是使用[.Elements(XName)](http://msdn.microsoft.com/en-us/library/bb348975.aspx)，它限制了 xDocument 必须执行元素的直接子项的搜索。

# java - android:inputType="textUri" 不会启用互联网键盘（带 .com 按钮）

> ID：15539429
> 
> 赞同：0
> 
> 时间：2013-03-21T04:21:04.257
> 
> 标签：java, android, eclipse, keyboard

我有一个问题，我用 .com 按钮调用互联网键盘，但是当键盘被触发时它不会显示。

非常感谢任何帮助！

```
 <EditText
    android:id="@+id/codeEdit"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:lines="1"
    android:hint="@string/code_hint"
    android:imeOptions="actionNext"
android:inputType="textUri" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:24:07.070

您可以尝试让`android:inputType="textEmailAddress"`键盘带有 .com 按钮。

# java - 幻数问题的解决方案......？

> ID：15539435
> 
> 赞同：2
> 
> 时间：2013-03-21T04:21:30.323
> 
> 标签：java, switch-statement, sonarqube, magic-numbers

考虑以下代码段...

```
 public static UserStatus getEnum(int code) {
    switch (code) {
        case 0:
            return PENDING;
        case 1:
            return ACTIVE;
        case 2:
            return SUSPENDED;
        case 3:
            return DELETED;
        case 4:
            return LOGIN_DISABLED;
        default:
            return null;
        }

} 
```

现在，SONAR 将案例（案例 3 和案例 4）中的数字 3 和案例 4 检测为幻数。

为了避免这个问题，我改变了我的代码段如下......

```
 public static UserStatus getEnum(int code) {        
    final int Pending=0;
    final int Active=1;
    final int Suspended=2;
    final int Deleted= 3;
    final int Login_details=4;

    switch (code) {
        case Pending:
            return PENDING;
        case Active:
            return ACTIVE;
        case Suspended:
            return SUSPENDED;
        case Deleted:
            return DELETED;
        case Login_details:
            return LOGIN_DISABLED;
        default:
            return null;
    }
} 
```

这是在这种情况下解决幻数问题的好方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T04:27:47.847

我收集到您希望避免在代码中使用整数文字。您的解决方案不是特别有效，因为它只是将文字移动到方法的顶部。它获得了一点好处，因为它为常量提供了有意义的名称，但这些名称对于方法来说是私有的。

更好的方法是将数字定义为接口中的字段。然后，您可以静态导入字段并将它们用作常量的符号名称。

如果枚举以与常量相同的顺序声明：

```
enum UserStatus {PENDING, ACTIVE, SUSPENDED, DELETED, LOGIN_DISABLED} 
```

你可以做另一个技巧：

```
public static UserStatus getEnum(int code) {
    UserStatus[] values = UserStatus.values();
    return (code >= 0 && code < values.length) ? values[code] : null;
} 
```

但是，这会在常量值和枚举声明之间建立联系。这可能没问题，具体取决于实际参数值在调用中生成的位置`getEnum`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:25:27.690

问题是直截了当且显而易见的：当人们阅读您的代码时，为什么 1 会给出 PENDING 并不明显。1是什么意思？

你应该赋予它语义意义。使用常量是通常应该做的：

（假设`getEnum()`是 UserService 的一部分，代码应该类似于）

```
public interface UserService {
   public static final int USER_STATUS_VAL_PENDING = 1;
   public static final int USER_STATUS_VAL_ACTIVE = 2;

   UserStatus getUserStatus(int userStatusVal);
}

public class SimpleUserService implements UserService {
   public UserStatus getUserStatus(int userStatusVal) {
      switch userStatusVal {
      case USER_STATUS_VAL_PENDING:
         return UserStatus.PENDING;
      case USER_STATUS_VAL_ACTIVE:
         return UserStatus.ACTIVE;
      //.....
   }
} 
```

正如另一个答案所建议的那样，您可以依靠 enum 的序数值来进行 int-enum 映射。但是您必须注意，如果您重新排列枚举的值，或者在远离末尾的位置添加新值，这种方式可能会导致问题。序数值将被更改，您无法覆盖它。

另一件需要注意的事情是，您的代码中有些事情没有做对：

1.  由于目的是通过使整数文字成为常量来赋予其语义意义，因此它应该对调用者可见，因此局部最终变量不是正确的方法。
2.  你应该使用 ALL_CAP_UNDERSCORE_DELIMITED 作为常量名

# parsing - 为什么 Nutch 认为它已经解析了所有段，而它还没有？

> ID：15539437
> 
> 赞同：1
> 
> 时间：2013-03-21T04:21:37.767
> 
> 标签：parsing, nutch

我正在使用 Nutch 1.6 抓取一些论坛并使用 Solr 1.6.2 对其进行索引。我在 Solr 上运行了一个测试查询，很惊讶只有几个结果。我担心 Nutch 对页面的解析或 Solr 的索引存在问题。在四处窥探之后，我发现 Nutch 并没有解析它检索到的很多页面：

```
bin/nutch readseg -list -dir crawl-mothering2/segments/

NAME        GENERATED   FETCHED   PARSED
20130228001531  23      27        9
20130228003940  1430    1434      661
20130228001829  202     206       105
20130228061337  1068    1090      475
20130228091009  1       2         0
20130228085956  34      34        25
20130228090348  44      45        34
20130228090851  7       7         6
20130228080438  364     374       192
20130228030933  1774    1795      903
20130228084205  168     169       63 
```

但是当我尝试解析这些段时，我得到了这个：

```
bin/nutch parse crawl-mothering2/segments/*
ParseSegment: starting at 2013-03-21 00:20:43
ParseSegment: segment: crawl-mothering2/segments/20130228001531
Exception in thread "main" java.io.IOException: Segment already parsed!
    at org.apache.nutch.parse.ParseOutputFormat.checkOutputSpecs(ParseOutputFormat.java:89)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:889)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:416)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824)
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1261)
    at org.apache.nutch.parse.ParseSegment.parse(ParseSegment.java:209)
    at org.apache.nutch.parse.ParseSegment.run(ParseSegment.java:243)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.nutch.parse.ParseSegment.main(ParseSegment.java:216) 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T23:32:48.973

如果要重新解析，请进入 crawl/segments/ 和

```
rm -rf parse_text parse_data crawl_parse 
```

然后你可以运行

```
bin/nutch parse crawldir/segments/<segmentnumber> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:08:31.093

Nutch 无法重新解析句段。要克服这个问题，您需要删除几个文件夹。请查看邮件列表讨论[http://www.mail-archive.com/user@nutch.apache.org/msg09017.html](http://www.mail-archive.com/user@nutch.apache.org/msg09017.html)。

您将在[http://nutch.apache.org/mailing_lists.html获得更快的响应](http://nutch.apache.org/mailing_lists.html)

# javascript - jquery获取类名

> ID：15539441
> 
> 赞同：0
> 
> 时间：2013-03-21T04:21:57.913
> 
> 标签：javascript, jquery, menu

好的，这是我的问题。我有一个正在运行的 php 文件，它可以单独拉出我的菜单以及所有内容。因此，例如加载我的 Index.php 会加载 index.php menu.php 和一个 dropdown.js 文件。菜单正在工作并进行下拉。我的问题是我想调用一类导航并列出“li > a > id”名称，这些名称将是 Home、关于我们等……我尝试了很多不同的方法，但似乎无法弄清楚为什么我不能在 jquery 中找出一个简单的脚本来执行此操作。有人有什么建议吗？下面是我的菜单页面代码。

```
<div id="nav" class="nav">
  <ul id="sddm">
  <li><a class="navigation" id="Home" href="index.php" onMouseOver="mopen('m1')" onMouseOut="mclosetime()">Home</a>
  <div id="m1" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li><a class="navigation" href="station_history.php" onMouseOver="mopen('m2')" onMouseOut="mclosetime()">Station History</a>
  <div id="m2" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" href="Apparatus.php" onMouseOver="mopen('m3')" onMouseOut="mclosetime()">Apparatus</a>
  <div id="m3" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  <a class="navigation" href="truck_history.php">Truck History</a> 
  </div>
  </li>
  <li>
  <a class="navigation" href="photos.php" onMouseOver="mopen('m4')" onMouseOut="mclosetime()">Photos</a>
  <div id="m4" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" href="news_events.php" onMouseOver="mopen('m5')" onMouseOut="mclosetime()">News & Events</a>
  <div id="m5" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" href="Station_members.php" onMouseOver="mopen('m6')" onMouseOut="mclosetime()">Station Members</a>
  <div id="m6" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" href="education.php" onMouseOver="mopen('m7')" onMouseOut="mclosetime()">Education</a>
  <div id="m7" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  <a class="navigation" href="SiteID">Station Tours</a>
  <a class="navigation" href="SiteID">Fire Extinguisher</a>
  <a class="navigation" href="SiteID">First Aid & CPR</a>
  <a class="navigation" href="SiteID">Smoke Alarms</a> 
  </div>
  </li>
  <li>
  <a class="navigation" href="SiteID" onMouseOver="mopen('m8')" onMouseOut="mclosetime()">Contact Us</a>
  <div id="m8" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> </div>
  </li>
  </ul>
  </div>
  </div> 
```

这是我试图为不起作用的警报而做的代码。

//导航

```
$("a.navigation").click(function () {
    alert("hello"); 
}); 
```

* * *

终于弄清楚什么代码起作用了。这是我使用的，以防其他人遇到此问题。感谢所有帮助过的人！！！

```
//navigation 
$(document).ready(function() {
    $("a.navigation").click(function () {
        alert("hello"); 
    })

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:30:19.610

使用 jQuery，您可以调用

```
$("a.navigation").click(function (e) {

    alert($(this).prop("id"));

}) 
```

小提琴出错了，但是当您单击“主页”时，它确实会向您显示警报。我想这就是你想要的。 [http://jsfiddle.net/djwave28/M3vdf/1/](http://jsfiddle.net/djwave28/M3vdf/1/)

在第二种情况下，你可以做

```
var lid = Array();

 $("a.navigation").each(function (e) {

        lid.push($(this).prop("id"));

    })
console.log(lid); 
```

这会将导航类元素的所有 id 放入 lid 数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:25:53.957

您将不得不首先阻止默认操作。尝试这个：

```
$("a.navigation").click(function (event) {
    event.preventDefault();
    alert("hello"); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:28:59.123

请查看此代码，它可以工作：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
<div id="nav" class="nav">
  <ul id="sddm">
  <li><a class="navigation" id="Home" href="index.php" onMouseOver="mopen('m1')" onMouseOut="mclosetime()">Home</a>
  <div id="m1" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li><a class="navigation" href="station_history.php" onMouseOver="mopen('m2')" onMouseOut="mclosetime()">Station History</a>
  <div id="m2" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" href="Apparatus.php" onMouseOver="mopen('m3')" onMouseOut="mclosetime()">Apparatus</a>
  <div id="m3" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  <a class="navigation" href="truck_history.php">Truck History</a> 
  </div>
  </li>
  <li>
  <a class="navigation" href="photos.php" onMouseOver="mopen('m4')" onMouseOut="mclosetime()">Photos</a>
  <div id="m4" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" href="news_events.php" onMouseOver="mopen('m5')" onMouseOut="mclosetime()">News & Events</a>
  <div id="m5" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" href="Station_members.php" onMouseOver="mopen('m6')" onMouseOut="mclosetime()">Station Members</a>
  <div id="m6" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  </div>
  </li>
  <li>
  <a class="navigation" href="education.php" onMouseOver="mopen('m7')" onMouseOut="mclosetime()">Education</a>
  <div id="m7" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> 
  <a class="navigation" href="SiteID">Station Tours</a>
  <a class="navigation" href="SiteID">Fire Extinguisher</a>
  <a class="navigation" href="SiteID">First Aid & CPR</a>
  <a class="navigation" href="SiteID">Smoke Alarms</a> 
  </div>
  </li>
  <li>
  <a class="navigation" href="SiteID" onMouseOver="mopen('m8')" onMouseOut="mclosetime()">Contact Us</a>
  <div id="m8" onMouseOver="mcancelclosetime()" onMouseOut="mclosetime()"> </div>
  </li>
  </ul>
  </div>
  </div>

  <script type="text/javascript">

    $(function(){
        $("a.navigation").click(function () {
                    event.preventDefault();
            alert("hello"); 
        }); 
    });

  </script> 
```

# haskell - 使自定义数据类型可排序

> ID：15539446
> 
> 赞同：12
> 
> 时间：2013-03-21T04:22:23.257
> 
> 标签：haskell, types, functional-programming

有人可以向我解释如何使自定义数据类型可排序吗？

** 我不允许对 Suit 本身进行修改，例如。推导 (Eq, Ord)

```
data Suit = Clubs | Diamonds | Hearts | Spades deriving (Eq) 
```

我的尝试：

```
instance Ord Suit where
    compare suit1 suit2 = compare suit1 suit2 
```

但这似乎是一个连续的循环并且不会停止。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T04:39:52.403

Ord 的定义看起来像（但不完全是）

```
class Ord a where
    compare :: a -> a -> Ordering 
```

并`Ordering`具有三个可能的值：`LT, EQ, GT`.

因此，您需要定义每次比较的结果应该是什么。就像是：

```
instance Ord Suit where
    compare Clubs Diamonds    = LT
    compare Diamonds Clubs    = GT
    compare Diamonds Diamonds = EQ
    compare Diamonds _        = LT -- Diamonds are lower than everything besides Clubs and Diamonds 
```

您的实际订购可能会有所不同，但这应该会给您基本的想法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T17:34:22.957

编写自定义`Ord`实例的一种方法，您不必拼出每次比较的结果：

```
instance Ord Suit where
    compare a b = compare (relativeRank a) (relativeRank b) where
         relativeRank Diamonds = 1
         relativeRank Clubs = 2
         relativeRank Hearts = 3
         relativeRank Spades = 4 
```

在这里，您只需要提及每个构造函数一次，您就可以轻松地决定不同的顺序。

您也可以使用`compare Data.Function.on relativeRank`，但这可能更容易理解。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T19:04:08.607

您可以使用具有相同效果的[独立派生。](http://www.haskell.org/haskellwiki/GHC/StandAloneDeriving)

```
deriving instance Enum Suit
deriving instance Ord Suit 
```

# haskell - 非咖喱函数

> ID：15539450
> 
> 赞同：3
> 
> 时间：2013-03-21T04:22:58.113
> 
> 标签：haskell, currying

我无法理解 curried 和 uncurried 函数。我谷歌试图为我提供定义的所有网站对我来说都不清楚。

在一个例子中，我发现他们说

`max 4 5`是相同的`(max 4) 5`

但我不明白他们在做什么。`(max 4)`当 max 需要 2 个参数时，你怎么能有一个函数？我完全迷路了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T04:28:30.757

Haskell 的诀窍是函数只接受一个参数。这看起来很疯狂，但它确实有效。

一个haskell函数：

```
foo :: Int -> Int -> Int
foo a b = a + b 
```

真正的意思是：一个接受 1 个参数的函数，然后**返回另一个接受一个参数的函数**。这称为柯里化。

所以使用它，我们真的可以这样写这个函数定义：

```
foo :: Int -> (Int -> Int) --In math speak: right associative 
```

和意思完全一样。

这实际上非常有用，因为我们现在可以编写简洁的代码，例如：

```
foo1 :: Int -> Int
foo1 = foo 1 
```

由于 haskell 中的函数应用程序只是空白，大多数时候你可以假装 curried 函数是 uncurried （接受多个参数并只返回一个结果）。

如果你真的真的真的需要 uncurried 函数：使用元组。

```
uncFoo :: (Int, Int) -> Int
uncFoo (a, b) = a + b 
```

**编辑**

好的，所以要了解部分应用程序发生了什么，请考虑`bar`

```
bar a b c = [a, b, c] 
```

问题是，编译器会像这样对你刚刚输入 lambda 的内容进行脱糖

```
bar = \a ->
      \b ->
      \c ->
           [a, b, c] 
```

这利用了闭包（每个内部函数都可以“记住”前一个函数的参数。

因此，当我们说 时`bar 1`，编译器会查看`bar`并看到最外层的 lambda，并将其应用给

```
bar 1 = \b ->
        \c ->
             [1, b, c] 
```

如果我们说`bar 1 2`

```
bar 1 2 = \c ->
                [1, 2, c] 
```

如果我说“应用”时的意思是模糊的，那么知道我的真正意思是从 lambda 演算中[减少 beta可能会有所帮助。](http://en.wikipedia.org/wiki/Lambda_calculus#.CE.B2-reduction)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T05:17:38.497

根据您的背景，您可能会发现这篇论文很有启发性：**[如何制作快速咖喱：Push/Enter vs Eval Apply](http://research.microsoft.com/en-us/um/people/simonpj/Papers/eval-apply/index.htm)**。虽然确实可以将多参数函数理解为绑定单个参数并返回另一个函数的函数：`max = (\a -> (\b -> if a > b then a else b))`，但实际实现要高效得多。

如果编译器静态知道`max`需要两个参数，编译器将始终`max 4 5`通过将两个参数压入堆栈（或寄存器）然后调用`max`. 这与 C 编译器的翻译方式基本相同`max(4, 5)`。

另一方面，如果 instance`max`是高阶函数的参数，编译器可能不知道静态需要多少参数`max`。也许在一种情况下它需要三个，`max 4 5`部分应用程序也是如此，或者在另一种情况下它只需要一个并`max 4`生成一个`5`应用到的新函数。这篇论文讨论了两种常见的方法来处理数量不是静态已知的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T08:11:16.937

您可能已经得到答案，但重申一下：

如果我们有

```
add x y = x + y 
```

那么我们可以这样说：

```
add = \ x y -> x + y
add 3 = \ y -> 3 + y
add 3 5 = 3 + 5 = 8 
```

你问“如何`max 3`计算任何东西？”，答案是“它不能”。它只是给你另一个*功能*。*当你调用这个函数时，它可以做一些事情，但在提供所有*参数之前，你不会“得到答案” 。在那之前，你只会得到函数。

大多数时候，这只是一个有用的语法快捷方式。例如，你可以写

```
uppercase :: String -> String
uppercase = map toUpper 
```

而不必说

```
uppercase xs = map toUpper xs 
```

请注意，如果`map`它的参数反过来，我们将无法做到这一点（您只能取消*最后一个*参数，而不是 _first），因此考虑定义函数的顺序可能很重要论据。

* * *

我说“大部分时间”是因为这不仅仅是语法糖。由于柯里化，语言中有几个地方可以*多态地处理具有不同数量参数的函数。*每个函数要么返回一个答案，要么返回另一个函数。如果您将其视为一个链接列表（其中包含下一项数据或列表结束标记），您可以看到它如何让您递归处理函数。

那我到底是什么意思？好吧，例如，QuickCheck 可以使用*任意*数量的参数测试函数（前提是有一种方法可以为每个参数自动生成测试数据）。这是可能的，因为函数类型是柯里化的。每个函数要么返回另一个函数，要么返回一个结果。如果你把它想象成一个链表，你可以想象 QuickCheck 递归地迭代函数直到没有更多的参数。

以下代码片段可能会或可能不会解释这个想法：

```
class Arbitrary a where
  autogenerate :: RandomGenerator -> a

instance Arbitrary Int
instance Arbitrary Char
...

class Testable t where
  test t :: RandomGenerator -> Bool

instance Testable Bool where
  test rnd b = b

instance (Arbitrary a, Testable t) => Testable (a -> t) where
  test rnd f = test $ f (autogenerate rnd) 
```

如果我们有一个函数`foo :: Int -> Int -> Bool`，那么这就是`Testable`。为什么？嗯，`Bool`是可测试的，所以也是`Int -> Bool`，所以也是`Int -> (Int -> Bool)`。

相比之下，元组的每个大小都是不同的大小，因此您必须为每个元组大小编写单独的函数（或实例）。您不能递归处理元组，因为它们没有递归结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:50:43.753

与您自己的示例有关...

假设您想要一个最大为 4 的函数和 functions 参数。你可以像这样实现它：

```
max4 :: Integer -> Integer
max4 x = max 4 x 
```

`max 4`所做的只是返回动态`max4`创建的函数。

# sharepoint - OOTB 工作流不会从 MOSS 2007 迁移到 SP2010

> ID：15539451
> 
> 赞同：1
> 
> 时间：2013-03-21T04:23:08.473
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, sharepoint-workflow

我正在使用数据库附加方法在我们的开发环境中从 MOSS 2007 (12.0.0.6670) 迁移到 SharePoint 2010（现在只是 SP1）。（从 Server 2003 32 位迁移到 Server 2008 R2 64 位 - 从 SQL2005 SP3 到 SQL2008R2）

附加内容数据库后，我发现只有 CUSTOM 工作流迁移到 SP2010 - 而不是已经配置的开箱即用工作流。（自定义工作流是在 SP Designer 中创建的）。

我已经访问了站点功能，并确认 2007 工作流功能已激活，并且根据我的谷歌搜索结果，我尝试禁用、重新启用并以各种顺序再次执行此操作，尝试使用启用工作流功能powershell，以及从微软通过某人转发到论坛帖子的一个建议，启用该功能，通过设计器访问工作流，它们神奇地出现。

我可以重新创建工作流程，但是在如此大量的列表上重新创建 2-3 个工作流程将是一项巨大的工作——而且我不确定 2007 年的工作流程历史记录是否仍会被链接（即单击“已批准”链接，在“批准”列中显示谁批准了它，如果我最终使用相同的名称重新创建，此链接是否仍然存在，或者链接会消失？）

有什么方法可以让这些 2007 年设置的 OOTB 工作流与内容数据库一起迁移到新的 SP2010 环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:32:18.710

OOTB 工作流*也应该*自动[迁移](http://social.technet.microsoft.com/Forums/en-US/sharepointadminprevious/thread/5304b7b9-00e4-4ed5-b012-934fdb1aa457)。确保在迁移之前禁用新系统上的工作流自动清理计时器作业。

如果一切都失败了，您可能需要考虑使用第三方产品 - [Metavis Migrator](http://metavistech.com/category/migration-suite)提供的[Migrate OOTB 工作流程](http://www.metavistech.com/usermanual/index.htm#migrator/5_1_7_workflows_window_m.htm)。他们确实有该产品的测试版本，因此对于一次性迁移来说应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T16:33:39.910

在没有修复的情况下，我们减轻了...

从 MOSS 2007 迁移到 SharePoint 2010 SP1 后，仍待处理的审批任务将不接受审批者对“审批”按钮的响应，或任何修改该任务的响应。

我们必须使用 SharePoint 2010 审批模板构建替换工作流。

在一个库中，我们只是转储了旧的工作流结果列并删除了旧的工作流。由于只有大约 50 个项目需要批准，我们通过运行新的工作流程重现了结果。

但是在另一个包含大约 300 个项目的库中，我们决定必须保留旧工作流和旧工作流结果列，因此我们创建了一个具有不同名称的新工作流“...(2010)”。

# java - Facebook DIV 未在页面上呈现

> ID：15539454
> 
> 赞同：2
> 
> 时间：2013-03-21T04:23:20.067
> 
> 标签：java, javascript, facebook, gwt, errai

我有这个脚本，我把它放在 GWT nocache.js 之上

```
<head>
    <script type="text/javascript" language="javascript">
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
        <script type="text/javascript" language="javascript" src="app/app.nocache.js"></script>
</head>
<body>
    <div id="fb-root"></div>
    <div id="rootPanel"></div>
</body> 
```

在我网站的一个页面上（我使用 Errai-UI）

这是添加的：

```
 HTMLPanel likebox = new HTMLPanel("<div class='fb-like-box' " +
                    "data-href='http://www.facebook.com/platform' data-width='595' " +
                    "data-show-faces='true' data-stream='true' data-header='true'></div>");

    likepanel.add(likebox); 
```

我面临的问题是，在我的 GWT 应用程序中，当站点登陆到注入此面板的页面时，Facebook 喜欢框不会被渲染，即使我查看 DOM，`<div class='like-box' ...>`DOM 树中也有.

有效的是我需要在当前页面上进行整页刷新（在 DevMode 中）：示例：`/mysite#PageWithFBDiv`

此外，页面刷新技巧仅适用于 DevMode，但在编译时无法执行此技巧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:00:14.707

根据 Facebook Javascript SDK 文档，有必要将 div 放在页面顶部，即脚本上方。

JavaScript SDK 要求页面中存在 fb-root 元素。

不得使用 display: none 或 visibility: hidden 隐藏 fb-root 元素，否则 SDK 的某些部分将无法在 Internet Explorer 中正常工作。

SDK 将元素插入到 fb-root 中，这些元素期望相对于 body 或相对于靠近页面顶部的元素定位。最好 fb-root 元素不在具有 position: absolute 或 position: relative 的元素内。如果您必须将 fb-root 元素放置在定位元素内，那么您还应该将其放置在靠近主体顶部的位置，否则 SDK 的某些部分可能无法正常工作。

此代码应直接放在开始标记之后。

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID from the App Dashboard
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here

  };

  // Load the SDK's source Asynchronously
  // Note that the debug version is being actively developed and might 
  // contain some type checks that are overly strict. 
  // Please report such bugs using the bugs tool.
  (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false));
</script> 
```

# android - APK 扩展文件 expPath 不存在

> ID：15539455
> 
> 赞同：0
> 
> 时间：2013-03-21T04:23:32.687
> 
> 标签：android, apk

我一直在尝试将我的应用程序转换为使用 APK 扩展文件，由于某种原因，下面的代码找不到我的 APK 扩展文件的路径...

```
static String[] getAPKExpansionFiles(Context ctx, int mainVersion, int patchVersion) {
    Log.v(TAG, "Utils.getAPKExpansionFiles [27] mainVersion is " + mainVersion + " patchVersion = " + patchVersion );
    String packageName = ctx.getPackageName();
    Log.v(TAG, "Utils.getAPKExpansionFiles [27] packageName is [" + packageName + "]" );
    Vector<String> ret = new Vector<String>();
    if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {
        Log.v(TAG, "Utils.getAPKExpansionFiles [32] MEDIA_MOUNTED" );
        // Build the full path to the app's expansion files
        File root = Environment.getExternalStorageDirectory();
        Log.v(TAG, "Utils.getAPKExpansionFiles [35] root = " + root);
        File expPath = new File(root.toString() + EXP_PATH + packageName);
        Log.v(TAG, "Utils.getAPKExpansionFiles [37] expPath " + expPath );

        // Check that expansion file path exists
        if (expPath.exists()) {
                ...
        } else {
            Log.v(TAG, "Utils.getAPKExpansionFiles [60] expPath DOES NOT EXISTS" );
        }
    } else {
        Log.v(TAG, "Utils.getAPKExpansionFiles [57] NOT MEDIA_MOUNTED" );
    }
    String[] retArray = new String[ret.size()];
    ret.toArray(retArray);
    return retArray;
} 
```

... logcat 显示了这个 ...

```
03-20 21:04:24.206: V/GospelofMatthewAudiobook(10965): Utils.getAPKExpansionFiles [37] expPath /mnt/sdcard/Android/obb/com.redcricket.GospelofMatthewAudiobook
03-20 21:04:24.214: V/GospelofMatthewAudiobook(10965): Utils.getAPKExpansionFiles [60] expPath DOES NOT EXISTS 
```

...即使路径确实存在并且文件在那里，如此屏幕截图所示：

![在此处输入图像描述](../Images/5788c8c639e90c9be1f9749c700b78ee.png) 我很确定我没有错字并且路径存在。那么为什么会`expPath.exists()`返回false。

感谢 Ted 的回答......但我仍然在 logcat 中得到这个......

```
03-20 21:59:48.198: V/GospelofMatthewAudiobook(11988): Utils.getAPKExpansionFiles [37] expPath /mnt/sdcard/Android/obb/com.redcricket.GospelofMatthewAudiobook/main.1.com.redcricket.GospelofMatthewAudiobook.obb
03-20 21:59:48.198: V/GospelofMatthewAudiobook(11988): Utils.getAPKExpansionFiles [60] expPath DOES NOT EXISTS 
```

...可能是我用 Windows 而不是`avd`. `adb`创建目录并将APK扩展zip文件推送到我的手机上的命令是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:53:12.463

您需要命名文件本身。而不是这个：

```
File expPath = new File(root.toString() + EXP_PATH + packageName); 
```

用这个：

```
File expPathDir = new File(root.toString() + EXP_PATH + packageName);
File expPath = new File(expPathDir,
    String.format("main.%d.%s.obb", mainVersion, packageName)); 
```

这将适用于主扩展包。您应该有类似的方法来访问使用该格式的补丁`String.format("patch.%d.%s.obb", patchVersion, packageName)`

文件的完整路径应该类似于

```
/mnt/sdcard/Android/obb/com.redcricket.GospelofMatthewAudiobook/main.123./mnt/sdcard/Android/obb/com.redcricket.GospelofMatthewAudiobook.obb 
```

# android - 如果键盘在android中打开，则在按下后退按钮时防止完成活动

> ID：15539457
> 
> 赞同：0
> 
> 时间：2013-03-21T04:23:41.367
> 
> 标签：android, keyboard, back-button

我的活动中有一个编辑文本。当用户触摸该编辑文本时，键盘打开。但在所有 HTC 设备中，打开键盘后，当用户按下后退按钮时，我当前的活动已完成并显示以前的活动，而不是只隐藏键盘。如何解决这个问题？在所有其他三星手机中，这工作正常。但不是在 HTC 设备中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:52:57.913

坦率地说，我想说别管它，让平台按照用户期望在他们的设备上处理它的方式来处理它。但是，我最近遇到了一个类似的问题，虽然它并不理想，但它确实允许您在返回按钮到达键盘之前拦截它，并随心所欲地处理它。

首先，无论您的布局使用什么根 ViewGroup，以类似于以下的方式覆盖它：

```
IMEInterceptLayout extends LinearLayout {
    private OnBackPressedPreIMEListener listener;

    public IMEInterceptLayout(Context c) { super(c); }
    public IMEInterceptLayout(Context c, AttributeSet attrs) { super(c, attrs); }
    public IMEInterceptLayout(Context c, AttributeSet attrs, int style) { super(c, attrs, style); }

    @Override
    public boolean dispatchKeyEventPreIme(KeyEvent event) {
        switch(event.getKeyCode()) {
            case KeyEvent.KEYCODE_BACK:
                fireOnBackPressedPreIME();
                return true;
            default:
                return super.dispatchKeyEventPreIme(event);
        }
    }

    public void setOnBackPressedPreIMEListener(OnBackPressedPreIMEListener listener) {
        this.listener = listener;
    }

    private void fireOnBackPressedPreIME() {
        if(listener != null) listener.onBackPressedPreIME();
    }

    public interface OnBackPressedPreIMEListener {
        public void onBackPressedPreIME();
    }
} 
```

例如，如果您使用的是RelativeLayout，请扩展它而不是LinearLayout。在你的布局中使用这个自定义视图而不是普通的 Android 版本：

```
<LinearLayout
    android:id="@+id/my_root_layout" 
```

变成

```
<com.my.packagename.IMEInterceptLayout
    android:id="@+id/my_root_layout" 
```

然后，在您`onCreate()`将内容视图设置为此布局之后，获取对此 ViewGroup 的引用：

```
IMEInterceptLayout layout = (IMEInterceptLayout)findViewById(R.id.my_root_layout);
layout.setOnBackPressedPreIMEListener(new OnBackPressedPreIMEListener() {
    @Override
    public void onBackPressedPreIME() {
        InputMethodManager imm = (InputMethodManager)MyActivity.this.getSystemService(Context.INPUT_METHOD_SERVICE);
        View focusedView = MyActivity.this.getCurrentFocus();
        if(focusedView != null) 
            imm.hideSoftInputFromWindow(focusedView.getWindowToken(), 0);
    }
} 
```

显然替换`MyActivity`为您的实际活动的名称。这将允许您自己关闭键盘，而不是依靠系统为您完成。对于结果来说，这是一个相对大量的工作，但它是可靠的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:32:27.970

您可能按了两次后退按钮，因为我做过同样的事情，但没有遇到类似的问题。我已经在三星和 HTC 设备上测试了我的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:33:44.620

好吧，这可能对你有用。您可以检查键盘是否在 onBackPressed 事件上打开，例如：

```
public void onBackPressed() {
        final View activityRootView = findViewById(R.id.activityRoot);
        activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                int heightDiff = activityRootView.getRootView().getHeight() - activityRootView.getHeight();
                if (heightDiff > 100) { // if more than 100 pixels, its probably a keyboard...
                   InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0);
                }
             } else {
                 super.onBackPressed();
             }
        });
} 
```

然后你可以像上面的代码一样首先关闭键盘，最后当再次按下后退时，你可以使用 super.onBackPressed(); 返回

# javascript - 为什么我的 javascript 代码没有运行？画布和 JavaScript 事件

> ID：15539458
> 
> 赞同：0
> 
> 时间：2013-03-21T04:23:58.373
> 
> 标签：javascript, html

我的 javascript 代码没有运行，但绘制画布的 html 是.....我试图在画布 html 元素上添加一个事件侦听器。每次我点击它应该给我一个警报的元素。我在 Firefox 和 google chrome 上试过这个。

```
<script language = "javascript" type = "text/javascript">

alert("yo");
canvas.addEventListener('click', function() {}, false);

var elem = document.getElementById("checkersq"),
elemLeft = elem.offsetLeft,
elemTop = elem.offsetTop,
context = elem.getContext('2d'),
elements = [];

elem.addEventListener('click', function(event){

    var x = event.pageX - elemLeft, 
        y = event.pageY - elemTop;

    elements.forEach(function(element){

        if (y > element.top && y < element.top + element.height
            && x > element.left && x < element.left + element.width){

                    alert('clicked an element');

            }

        }   
    });
}, false);

elements.push({
    colour: '#05EFFF',
    width: 150,
    height: 200,
    top: 20,
    left: 15
});

elements.forEach(function(element) {

    context.fillStyle = element.colour;
    context.fillRect(element.left, element.top, element.width, element.height);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:31:08.507

兑换

```
}   
    });
}, false); 
```

至

```
 });
}, false); 
```

# ipad - 在 iPad 文件夹中创建子文件夹

> ID：15539461
> 
> 赞同：0
> 
> 时间：2013-03-21T04:24:24.663
> 
> 标签：ipad

我想知道是否可以在我的 ipad 文件夹中添加子文件夹而不会越狱我的设备

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:25:42.230

是的，[NSFileManager](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)具有类似[“ `createDirectoryAtURL:withIntermediateDirectories:attributes:error:`”](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/createDirectoryAtURL%3awithIntermediateDirectories%3aattributes%3aerror%3a)的 API ，您可以在您有权将新文件和文件夹写入其中的文件夹（例如“文档”或“缓存”目录）中使用它。

确保查看`BOOL`API 的“”返回值，如果它们返回“ `FALSE`”，请检查该`NSError`API 末尾的“”参数，这将为您提供有关调用方式可能出现问题的重要提示.

# jquery - 试图为 4 个图像的大小设置动画，每个图像都在自己的 div 中？

> ID：15539467
> 
> 赞同：0
> 
> 时间：2013-03-21T04:24:44.977
> 
> 标签：jquery

我想为四个不同的小图像的大小设置动画，每个图像都在自己的 div 中。现在，我可以为 div 设置动画，但 div 内的图像不会改变。有没有办法做到这一点？

这是当前工作的示例：http: [//jsfiddle.net/r69Zv/1/](http://jsfiddle.net/r69Zv/1/)

我当前的javascript：

```
$(document).ready(function () {
    $("#green_box_container a").click(function() {
          $(this).children().animate({height:105,width:105})
          $(this).siblings().children().animate({height:80,width:80})
    })
}); 
```

编辑：简单地尝试输入 $(this).children('img').animate ... 似乎不起作用

任何帮助都是极好的！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:29:32.393

这样做的方法很多，但一种方法是添加此 CSS 样式

```
div img { width:100%; height:100%; } 
```

[小提琴](http://jsfiddle.net/r69Zv/3/)

更新

对于它的价值，我简化了你的 HTML。

检查[这个小提琴](http://jsfiddle.net/r69Zv/5/)......更简单，更清洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:31:04.670

啊，有两种选择：

1.  为您的图像设置样式以继承其容器的大小：

    一个{位置：相对；}

    img {位置：绝对；宽度：100%；高度：100%；}

2.  调整图像及其容器的大小：

    $(document).ready(function () { $("#green_box_container a").click(function() { $(this).children().animate({height:105,width:105}) $(this ).find('img').animate({height:105,width:105}) $(this).siblings().children().animate({height:80,width:80}) }) }) ;

# php - 是否可以生成 HTML 部分的屏幕截图？

> ID：15539472
> 
> 赞同：-1
> 
> 时间：2013-03-21T04:25:19.517
> 
> 标签：php, html, image, screenshot

我正在寻找一种从 HTML 动态生成屏幕截图的方法`<section>`。这可能吗？如果是这样，那怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:37:44.333

我相信最简单的方法是使用 PhantomJS。

查看 2 个链接并进行混搭！

// rasterize.js [http://www.codediesel.com/javascript/taking-website-screenshots-using-phantomjs/](http://www.codediesel.com/javascript/taking-website-screenshots-using-phantomjs/)

// 破解它的东西 [如何使用 PhantomJS 渲染页面的一部分？](https://stackoverflow.com/questions/11917042/how-to-render-part-of-a-page-with-phantomjs)

祝你好运！

# bash - for 循环在我的脚本中不起作用

> ID：15539481
> 
> 赞同：0
> 
> 时间：2013-03-21T04:26:25.017
> 
> 标签：bash, for-loop, bioinformatics, blast

我在 bash 中编写了一个运行 blastx 的脚本。

```
#!/bin/sh -l 
# $Id: Barrine.sh federicogaiti $

echo "Right now it is:"
date
echo ""
function usage() {
echo "Barrine.sh script by Federico Gaiti, March 2013."
echo ""
echo "Run Blastx"
echo ""
echo "Usage: "
echo "Barrine.sh <All contigs (fasta extension)> <Number of fasta split sequences> <Head file with PBS command where you set up account, walltime, etc..> "
echo ""
echo "Example: "
echo "Barrine.sh InputFasta n Head "
echo ""
exit 1
}

# Testing if the number of arguments is correct
if [ $# != 3 ]
then
    usage
        exit
    fi

### Declaring variables
InputFasta=$1    MY ORIGINAL FASTA FILE WITH ALL THE SEQUENCES
n=$2                 NUMBER OF FILES I WANT MY FASTA FILE SPLIT
Head=$3           PBS OPTIONS
n4=$((n/4))
n41=$((n/4 + 1))
n2=$((n/2))
n21=$((n/2 + 1))
n43=$((n/4 * 3))
n431=$((n/4*3 + 1))

echo Loading Modules
module load ucsc_utilities/20130122
wait

echo Split input FASTA in n FASTA file
faSplit sequence ${InputFasta} ${n} ${InputFasta}_Split_S 
wait

echo blastx command splitting it in 4 jobs to make it faster
    for i in {000..0$n4} ; do echo "blastx -query ${InputFasta}_Split_S$i.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out ${InputFasta}_blastx$i.csv" ; done > ${InputFasta}_Job1.sh

    for i in {0$n41..$n2} ; do echo "blastx -query ${InputFasta}_Split_S$i.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out ${InputFasta}_blastx$i.csv" ; done > ${InputFasta}_Job2.sh

    for i in {$n21..$n43} ; do echo "blastx -query ${InputFasta}_Split_S$i.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out ${InputFasta}_blastx$i.csv" ; done > ${InputFasta}_Job3.sh

    for i in {$n431..$n} ; do echo "blastx -query ${InputFasta}_Split_S$i.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out ${InputFasta}_blastx$i.csv" ; done > ${InputFasta}_Job4.sh

wait

echo Head the PBS commands to the Job files 
    for i in {1..4} 
        do 
        cat ${Head} ${InputFasta}_Job$i.sh | sed "s/BlastJob/BlastJob_$i/g" > ${InputFasta}_BlastJob$i.sh 
        done 
```

然后我会将 4 个作业提交到 barrine 服务器。我应该获得的是包含以下内容的 4 个工作：

```
 blastx -query TEST_Split_S000.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out TEST_blastx000.csv
blastx -query TEST_Split_S001.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out TEST_blastx001.csv
blastx -query TEST_Split_S002.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out TEST_blastx002.csv
blastx -query TEST_Split_S003.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out TEST_blastx003.csv
blastx -query TEST_Split_S004.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out TEST_blastx004.csv
blastx -query TEST_Split_S005.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out TEST_blastx005.csv
blastx -query TEST_Split_S006.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out TEST_blastx006.csv
blastx -query TEST_Split_S007.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out TEST_blastx007.csv
............
blastx -query TEST_Split_S050.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out TEST_blastx050.csv 
```

但我在脚本中得到的只是：

```
blastx -query TEST_Split_S{000..050}.fa -evalue 0.0001 -max_target_seqs 100 -db nr -num_threads 8 -outfmt '7 qseqid qlen sseqid pident length mismatch gapopen qstart qend sstart send ppos evalue bitscore score' -out TEST_blastx{000..050}.csv 
```

有人可以帮我解决问题吗？如果我在我的脚本之外使用 for 循环可以正常工作。

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:31:34.403

*大括号扩展*发生得很早。

*参数扩展*发生在稍后，因此您不能以控制大括号扩展的方式使用变量或其他参数。

从[bash(1) 手册页：](http://linux.die.net/man/1/bash)

> 扩展的顺序是：大括号扩展、波浪号扩展、参数、变量和算术扩展以及命令替换（以从左到右的方式完成）、分词和路径名扩展。

这将阻止诸如此类`for i in {000..0$n4} ; do`的语句按预期工作。

另外，一定要记住`-v`和`-x`参数来显示实际执行的命令。

# javascript - 将数据格式更改为 JSON

> ID：15539482
> 
> 赞同：0
> 
> 时间：2013-03-21T04:26:27.593
> 
> 标签：javascript, python, json, format

如何将数据格式从 python 更改为 JSON？

Python脚本：

```
progress = {'user': '170', 'user2': '220'}
level = {'user': '10', 'user2': '14'}
if progress.has_key('user'):
    a = progress['user']
    b = level['user']
    c = json('event': 'data', 'name': 'user', 'progress': a, 'level': b)
    self.send(net, c) 
```

Javascript脚本：

```
var a = JSON.parse(c);
var user = a.user;
var progress = a.progress;
var level = a.level; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:28:42.677

```
import json
c = json.dumps({'event': 'data', 'progress': a, 'level': b}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:28:32.317

来自蟒蛇

```
>>> import json
>>> json.dumps(c) 
```

# c++ - 无法创建简单存档

> ID：15539483
> 
> 赞同：0
> 
> 时间：2013-03-21T04:26:30.143
> 
> 标签：c++, makefile, static-libraries

我正在尝试使用以下生成文件制作一个简单的存档：

```
INC    :=-Ilibs/rapidxml-1.13

all: 
  $(CXX) -c $(INC) -o dove.o dove.hpp
  ar rvs libdove.a dove.o  
  ranlib libdove.a         

clean:
  rm -f dove.o libdove.a 
```

dove.hpp 文件有`#include "rapidxml.hpp"`，你可以看到我在编译时指向一个特定的 rapidxml。目标运行完成，但 1）当 rapidxml+dove.hpp 只有大约 150K 时，`make all`输出 dove.o 很大（19MB！），2）最终的 libdove.a 或 dove.o 似乎都不是可用的对象：

```
[hamiltont@4 dove]$ nm dove.o 
nm: dove.o: File format not recognized
[hamiltont@4 dove]$ nm libdove.a 
nm: dove.o: File format not recognized

[... in other project...]
[hamiltont@4 dove]$ g++ -o bin/AntHybrid build/*.o -L/home/hamiltont/foobar/dove -ldove
/home/hamiltont/foobar/dove/libdove.a: could not read symbols: Archive has no index; run ranlib to add one
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:46:14.297

啊，明显的错误。我正在尝试编译一个头文件，然后将其打包为一个库。虽然预编译头文件[是可能的](http://gcc.gnu.org/onlinedocs/gcc-4.0.4/gcc/Precompiled-Headers.html)，但实际上根本不需要此目录中的生成文件。

# spring - 在编程 Spring @Configuration 中指定 Shiro 的 LifecycleBeanPostProcessor 会导致错误

> ID：15539485
> 
> 赞同：0
> 
> 时间：2013-03-21T04:26:38.877
> 
> 标签：spring, shiro

我有一个以编程方式配置的 Spring Web 应用程序。我正在尝试将 Apache Shiro 作为我的身份验证框架，并且遇到了将 Shiro 与 Spring 集成的问题，特别是使用编程配置（因为我决定不想编写大量 XML）。这是相关的代码片段：

```
@Configuration //Replaces Spring XML configuration
@EnableTransactionManagement //Enables declarative Transaction annotations
public class SpringAppConfig {
    @Bean
    public LifecycleBeanPostProcessor lifecycleBeanPostProcessor() {
        return new LifecycleBeanPostProcessor();
    }
} 
```

当我启动我的 web 应用程序时，我得到了 Spring 无法使用注释处理我的任何 bean 的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:26:38.877

根据本期评论：[https ://issues.apache.org/jira/browse/SHIRO-222](https://issues.apache.org/jira/browse/SHIRO-222)

我应该声明该方法`static`以避免早期创建配置 bean（我实际上还不太确定 Spring 配置机制是如何工作的，这可能是我遇到此错误的原因）。

```
@Bean
public static LifecycleBeanPostProcessor lifecycleBeanPostProcessor() {
    return new LifecycleBeanPostProcessor();
} 
```

这可以防止所有错误的发生。

# sqlalchemy - Sqlalchemy 查询和过滤

> ID：15539491
> 
> 赞同：1
> 
> 时间：2013-03-21T04:27:10.240
> 
> 标签：sqlalchemy

所以可以说我有一些这样定义的简单类

```
class Person
    birthday

class Address
    state 
```

我想要每个州最年长的人，我想我可以用类似的东西得到它

```
db.session.query(Address).order_by(Person.birthday.desc()).first() 
```

但现在我添加了另一个类

```
class pet
    species 
```

我想为每种类型的物种找到每个州最年长的人，所以从以下...

```
john - MI - dog - 50
alex - MI - dog - 51
joe  - MI - cat - 10
tina - FL - cat - 20 
```

我只想

```
alex, joe, tina 
```

但不是约翰，因为他不是最年长的。

我怎么能建立一个查询去做那件事。我应该学习哪些主题？

这是我迄今为止最好的尝试。此代码特定于我的数据库：

```
def most_recent_completed_uss(user):
    lids = []
    for o in user.organizations:
        for sh in o.survey_headers:
            for ss in sh.survey_sections:
                l = datetime.datetime(1,1,1)
                lid = None
                for uss in ss.user_survey_sections:
                    if o.id == uss.organization.id:
                        if l == datetime.datetime(1,1,1):
                            lid = uss.id
                        if (uss.completed_date and uss.completed_date >= l):
                            l = uss.completed_date
                            lid = uss.id
                lids.append(lid)
    return lids 
```

当然，4 个嵌套的 for 循环和缺乏查询让我认为这是一个不太理想的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-28T08:18:25.983

如果您使用的是 PostgreSQL，您可以使用 DISTINCT ON (...)，它占用每个组中的第一行。在蟒蛇中：

```
session.query(Person)
.join(Address, Pet)
.distinct(Address.state, Pet.species)
.order_by(Address.state, Pet.species, Person.birthday) 
```

这将产生类似于：

```
SELECT DISTINCT ON(address.state, pet.species) person.*
FROM person
JOIN address ON person.address_id = address.id
JOIN pet ON pet.owner_id = person.id
ORDER BY address.state, pet.species, person.birthday 
```

# php - SQL 查询不适用于 mssql - Dynaset（快照）

> ID：15539492
> 
> 赞同：0
> 
> 时间：2013-03-21T04:27:14.017
> 
> 标签：php, sql-server, database

我正在从我的 php 网站查询 MSSQL 服务器以返回一些信息。当我在访问中运行查询时，我会返回“#deleted”，但是如果我将 RecordSetType 属性更改为快照，则会产生结果。

我如何能够更改我的 php 中的记录集类型属性？我做了一些研究，但到目前为止我还没有找到任何答案。

这是我正在运行的查询：

```
$query = "SELECT dbo.VehicleJobHistory.BookingID,
dbo.VehicleJobHistory.TimeJobRequired  
FROM dbo.VehicleJobHistory 
WHERE dbo.VehicleJobHistory.BookingID = '30928512'  
ORDER BY dbo.VehicleJobHistory.BookingID"; 
```

# regex - 按句子中的最后一个单词拆分列

> ID：15539494
> 
> 赞同：5
> 
> 时间：2013-03-21T04:27:35.177
> 
> 标签：regex, r, text-segmentation

YARQ（又一个正则表达式问题）。

我将如何将以下内容分成两列，确保最后一列包含句子中的最后一个单词，而第一列包含其他所有内容。

```
x <- c("This is a test",
       "Testing 1,2,3 Hello",
       "Foo Bar",
       "Random 214274(%*(^(* Sample",
       "Some Hyphenated-Thing"
       ) 
```

这样我最终得到：

```
col1                         col2
this is a                    test
Testing 1,2,3                Hello
Foo                          Bar
Random 214274(%*(^(*         Sample
Some                         Hyphenated-Thing 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T04:54:32.890

这看起来像是一项展望未来的工作。我们会发现空格后面跟着不是空格的东西。

```
split <- strsplit(x, " (?=[^ ]+$)", perl=TRUE)
matrix(unlist(split), ncol=2, byrow=TRUE)

     [,1]                   [,2]              
[1,] "This is a"            "test"            
[2,] "Testing 1,2,3"        "Hello"           
[3,] "Foo"                  "Bar"             
[4,] "Random 214274(%*(^(*" "Sample"          
[5,] "Some"                 "Hyphenated-Thing" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T04:54:41.467

这是一个使用`strsplit`：

```
do.call(rbind,
  lapply(
    strsplit(x," "),
    function(y)
      cbind(paste(head(y,length(y)-1),collapse=" "),tail(y,1))
    )
) 
```

或使用的替代实现`sapply`

```
t(
  sapply(
    strsplit(x," "),
    function(y) cbind(paste(head(y,length(y)-1),collapse=" "),tail(y,1))
  )
) 
```

导致：

```
 [,1]                   [,2]              
[1,] "This is a"            "test"            
[2,] "Testing 1,2,3"        "Hello"           
[3,] "Foo"                  "Bar"             
[4,] "Random 214274(%*(^(*" "Sample"          
[5,] "Some"                 "Hyphenated-Thing" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:38:01.780

假设“单词”是字母数字（在这种情况下，最后一个单词是 one 或 letters`\\w`或 digital `\\d`，如果需要，您可以添加更多类）：

```
col_one = gsub("(.*)(\\b[[\\w\\d]+)$", "\\1", x, perl=TRUE)
col_two = gsub("(.*)(\\b[[\\w\\d]+)$", "\\2", x, perl=TRUE) 
```

输出：

```
> col_one
[1] "This is a "            "Testing 1,2,3 "        "Foo "                 
[4] "Random 214274(%*(^(* "
> col_two
[1] "test"   "Hello"  "Bar"    "Sample" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:41:03.207

这可能不完全适合您，但如果有人想知道**如何在 python 中执行此操作**：

```
#col1:
print line.split(" ")[:-1]

#col2:
print line.split(" ")[-1] 
```

Note that col1 will get printed as a list, which you can make into a string like this:

```
#col1:
print " ".join(line.split(" ")[:-1]) 
```

# mysql - 使用同一表选择可选父行

> ID：15539498
> 
> 赞同：0
> 
> 时间：2013-03-21T04:28:10.083
> 
> 标签：mysql, sql, pdo

我正在尝试从表中选择所有行，并且**如果它们有父**级，则还包括有关其父级的一些信息，否则父级数据应为空白。

```
SELECT
p.id,
p.name,
'0' AS page_exists      
FROM 
pages p
    LEFT JOIN pages pp ON (pp.page_id=p.parent) 
WHERE 
p.page_type=3 
ORDER BY 
name ASC 
```

我希望父母成功匹配后，将以下两列添加到每一行：“parent_id”和“parent_name”

**具有父级的页面的最终结果如下所示：**

```
id=2
name="test"
page_exists=0   
parent_id=1
parent_name="abc" 
```

**如果页面没有父页面，则应如下所示：**

```
id=3
name="other page"
page_exists=0   
parent_id=0
parent_name="" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:16:53.113

当您`LEFT JOIN`对自己执行表时，使用别名 pp 作为父信息，父行中的字段可用作`pp.page_id`和，如果父不存在 ，则`pp.name`两者都是。`NULL`

因此，以下查询将包括来自父项的字段：

```
SELECT p.id, p.name, '0' AS page_exists,
       pp.page_id AS parent_id, pp,name AS parent_name      
FROM pages p
LEFT JOIN pages pp 
ON (pp.page_id=p.parent) 
WHERE p.page_type=3 
ORDER BY name ASC 
```

为了在`NULL`父项不存在时获取 0 和 '' 而不是 s，您可以`CASE`在`SELECT`子句中使用语句：

```
SELECT pp.id, pp.name, '0' AS page_exists,
      CASE WHEN pp.page_id THEN pp.page_ID ELSE 0 END AS parent_id,
      CASE WHEN pp.name THEN pp.name ELSE '' AS parent_name 
```

# java - 在 Android 中更新 SQLITE 数据库时出错

> ID：15539500
> 
> 赞同：-1
> 
> 时间：2013-03-21T04:28:27.550
> 
> 标签：java, android, sqlite

我必须使用以下代码更新名为 CLERK 的表中的详细信息：

```
try
{
    //update query

    myDataBase.execSQL("UPDATE CLERK SET" +
        " CLK_NAME='" + sql_clk_name + "'," +
        " CLK_EXPIRY_DATE='" + sql_expirydt + "'," +
        " CLK_PASSWORD='" + sql_password + "'" +
        " WHERE CLK_ID = '" + sql_clk_id + "'" , null);

    Toast.makeText(getApplicationContext(), "MODIFIED !!!", Toast.LENGTH_SHORT).show();
}
catch (Exception ex)
{
    Toast.makeText(getApplicationContext(), 
        "error modifying clerk",Toast.LENGTH_SHORT).show();
} 
```

当我运行它时，我得到一个异常，`ex=null`. 该记录肯定存在于数据库中。

当我使用`"cursor = myDataBase.rawQuery"`而不是`"myDataBase.execSQL"`查询执行但未反映在数据库中时..请有人帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:59:44.390

感谢您的努力和时间。我是如何找到更新的方法的。

这就是...

```
ContentValues values=new ContentValues();
values.put("CLK_NAME", sql_clk_name);
values.put("CLK_EXPIRY_DATE", sql_expirydt);
values.put("CLK_PASSWORD", sql_password);myDataBase.update("CLERK",values,"CLK_ID='" +    sql_clk_id + "'",null); 
```

它就像奇迹一样工作:)

# jquery - 当输入无效时防止按钮禁用jQuery验证

> ID：15539511
> 
> 赞同：0
> 
> 时间：2013-03-21T04:29:04.710
> 
> 标签：jquery, jquery-validate, webforms

我使用[此代码（来自 SO）](https://stackoverflow.com/questions/2905668/jquery-asp-net-button-disable)禁用 asp.net Web 表单按钮以在单击时禁用按钮

```
$(document).ready(function () {
    $('[id$=btnSave]').click(function () {
        var button = this;

        setTimeout(function () {
            $(button).attr('disabled', 'disabled');
        }, 100);
    });
}); 
```

但是当我将WebForms 插件的[jQuery 验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)和[JQuery 验证组](https://github.com/bbraithwaite/JQueryValidationForWebForms#readme)添加到页面时，

```
$(document).ready(function () {
    $("#form1").validateWebForm({
        rules: {
            myDate: {
                customDate: true
            },
            nic: {
                nicNo: true
            }
        }
    });
...
<asp:TextBox ID="txtName" runat="server" CssClass="required" ></asp:TextBox> 
```

**即使输入无效，它也会禁用按钮。**如果输入无效，如何避免禁用按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:43:47.903

在禁用按钮并提交之前尝试使用[插件的内置`.valid()`方法来测试表单。](http://docs.jquery.com/Plugins/Validation/valid)根据评论，我意识到您正在使用另一个插件初始化 jQuery Validate 插件，但下面的核心概念应该是相同的。

**演示：http: [//jsfiddle.net/7HzZF/](http://jsfiddle.net/7HzZF/)**

**jQuery** :

```
$(document).ready(function() {

    $('#myform').validate({
        // rules & options
    });

    $('#button').on('click', function (e) {
        e.preventDefault();
        if ($('#myform').valid()) {
            $('#myform').submit();
            $(this).attr('disabled', 'disabled');
        }
    });

}); 
```

**HTML**：

```
<form id="myform">
    ....
    <input id="button" type="submit" />
</form> 
```

* * *

或者，如果您的其他插件允许您使用`submitHandler`回调函数，我强烈建议您改用它。

[http://jsfiddle.net/h34bJ/](http://jsfiddle.net/h34bJ/)

它只在有效表单上触发，它真正清除了许多这种多余和多余的事件处理。

```
$(document).ready(function () {

    $('#myform').validateWebForm({
        // your rules,
        submitHandler: function (form) {
            $('#button').attr('disabled', 'disabled');
        }
    });

}); 
```

# macos - 安装 Julia 语言

> ID：15539522
> 
> 赞同：3
> 
> 时间：2013-03-21T04:30:32.683
> 
> 标签：macos, julia

我使用 Mac 运行山狮。

[当我从https://github.com/JuliaLang/julia](https://github.com/JuliaLang/julia)完成安装 Julia 时，我无法理解：

> 构建完成后，您可以使用上面创建的目录中的完整路径运行 julia 可执行文件，或者将该目录添加到可执行文件路径中，以便您可以从任何地方（在当前 shell 会话中）运行 Julia 程序：
> 
> 在 bash 中：
> `export PATH="$(pwd):$PATH"`

所以现在，每次在终端，我只能使用 cd Julia，然后使用 ./Julia 打开 Julia。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T04:38:23.587

`export PATH="$(pwd):$PATH"`仅当您在 julia 源目录中时才正确。当你打开一个新的 shell 时，你又回到了你的`$HOME`.

为了设置默认设置，您需要编辑您的`~/.bash_profile`.

如果所有这些看起来都非常晦涩难懂，那么您将不得不遵循对 shell (bash) 的介绍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T04:32:56.877

所有这条指令的意思是，如果您将可执行路径添加到您的“ ”文件（它是您的主目录中的一个不可见的点文件），而不是必须输入：“ `cd Julia`”和“ ”，那么您只需要输入在终端的命令行提示符处是“ ”（即没有“ ”路径说明符），Julia 应用程序或环境将启动。`./Julia``.bashrc``Julia``./`

如果您可以打开您的“ `.bashrc`”文件，请查找该“ `export PATH`”行并在实际路径的开头或结尾（引号之间），将目录添加到您的 Julia 可执行文件中。

例如，在我的机器上可能是：

```
export PATH="$(pwd):/Users/dautermann/Julia/:$PATH" 
```

[以下是有关 .bashrc](https://superuser.com/questions/121870/how-do-i-reset-the-path-variable-on-mac-os-x)文件的超级用户的一些附加信息。我希望这可以帮助你！

# asp.net-mvc-3 - 通过 AJAX 调用控制器方法不起作用

> ID：15539526
> 
> 赞同：0
> 
> 时间：2013-03-21T04:30:52.547
> 
> 标签：asp.net-mvc-3, jquery

我之前只在这个论坛上问过这个问题。参考：[链接](https://stackoverflow.com/questions/14138633/calling-controller-method-asp-mvc3-method-from-ajax-doesnt-work)

我得到了许多人的帮助，问题得到了解决。但是今天我面临着ie8的问题。我在 IIS 中托管了该应用程序，并通过 LAN 在其他机器上访问它。用chrome和firefox测试，效果很好。使用 ie8 也可以正常工作，但现在它没有进行控制器调用。问题是控制器方法没有通过 ajax 被调用。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:39:33.193

是的，当您在 IIS 上托管应用程序时，它不会进入 Controller 操作，因为您正在硬编码`$.ajax`url 选项。

这是你的代码：

```
url: 'ControllerName/MethodName' 
```

当您在本地计算机上运行时，上面的 url 可以正常工作，但不能在 IIS 上工作。

您应该始终使用`@Url.Action("MethodName","ControllerName")`

在底层，Url.Action 使用路由 API 来生成 URL

希望这可以帮助

# javascript - 在关键短语之后提取字符串的特定部分

> ID：15539528
> 
> 赞同：3
> 
> 时间：2013-03-21T04:30:57.517
> 
> 标签：javascript, jquery, string

我想知道在字符串中查找特定短语然后将其后的所有内容存储在新变量中的最佳方法。例如，如果...

```
var str = 'hello how are you doing the what is a dinosaur search Jim carrey'; 
```

'search' 或 'search for' 之后的所有内容，在本例中为 'Jim carrey' 都应该存储在一个新的 var 中——我们称之为 val。

此外，如果短语“search”或“search for”有两个或多个实例，则仅将最新的内容存储在 val 中。

例如：如果 str = 'welcome I am search pie recipie search quick chili recipie' 那么 val 将是 'quick chili recipie' 或者如果 str = '今天是 78 度，搜索好天气和晴天，换句话说，这是搜索的完美日子夏天什么时候结束' 那么 val 将是 '夏天什么时候结束'。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T04:52:24.927

试试这个正则表达式：

```
var str = 'Today is 78 degrees search good weather and sunny in other words a perfect day for search for when does summer end';
var arr = str.split(/ search (for){0,1}/);

alert(arr[arr.length-1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T04:52:11.310

尝试

```
var str = "welcome I am search pie recipie search quick chili recipie";
var m = str.split('search');
alert(m.slice(-1)); 
```

或者

```
 str.split('search').pop() // will do same thing 
```

[`working DEMO`](http://jsfiddle.net/mdfZB/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:53:04.480

Legendinmaking的答案返回以空格开头的短语并在搜索或搜索后返回所有内容

```
var str = 'welcome I am search pie recipie search quick chili recipie';
 var param='search';
 var param1='search for';
 var n=str.lastIndexOf(param);
 var n1=str.lastIndexOf(param1);
 n=Math.max(n,n1);
 alert(str.substring(n+param.length + 1,str.length)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T04:40:23.090

我不确定这是不是最好的方法，但它有效，您可以尝试在 jsbin 更改 srt 值：http: [//jsbin.com/uguzup/1/edit](http://jsbin.com/uguzup/1/edit)

```
var str = 'Today is 78 degrees search good weather and sunny in other words a perfect day for search for when does summer end';
var val = str.split('search for').slice(-1)[0].split('search').slice(-1)[0] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T04:42:31.390

试试这个

```
var str = 'welcome I am search pie recipie search quick chili recipie';
    var param='search';
    var n=str.lastIndexOf(param);
    alert(str.substring(n+param.length,str.length)); 
```

# sql - 开始和结束时间 - 每小时/每天/每周有多少并发事件等

> ID：15539531
> 
> 赞同：1
> 
> 时间：2013-03-21T04:31:03.580
> 
> 标签：sql, algorithm, excel

我有一个这样的事件数据库：

事件名称、开始日期、开始时间、结束日期、结束时间

我需要找出每小时/每天/每周的并发事件（任何重叠事件）的数量等。

我该怎么办？

数据目前在 Excel 中，我尝试了一些公式，但发现 Excel 只是崩溃了成千上万条记录，因此我可以将其移植到 SQL 数据库或任何其他合适的建议（如果需要）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:24:50.043

我认为最简单的方法是使用数据库或独立的排序程序或子程序按时间升序挑选开始和停止事件，然后使用简单的程序或例程处理它们。

当您在事件中阅读时，保持打开事件的运行计数器 - 当您看到开始时添加一个，当您看到排序时减去一个。

然后，每次您选择一个新活动时，您都可以计算出距离上一个活动有多长时间，并且您知道在此期间有多少活动开放。因此，如果这是例如 5 分钟有两个事件打开，那么您已经看到了 10 个事件分钟的并发事件。

如果您将这些事件分钟加起来并除以从第一个事件到最后一个事件的时间长度，您将获得并发事件的平均数量的度量 - 如果您在第一个事件和最后一个事件之间选择一个随机瞬间，那么在该随机瞬间发生的平均并发事件数将是并发事件平均数的度量。

# javascript - 提交表单时如何将第二个选项卡设置为选中状态

> ID：15539538
> 
> 赞同：-1
> 
> 时间：2013-03-21T04:31:34.123
> 
> 标签：javascript, jquery, html, jquery-ui

我有一个任务来做 jquery 选项卡。每个选项卡都有一些特殊功能。加载页面时会转到第一个选项卡。我想将第二个选项卡设置为选中> 我该怎么做？我的代码是

```
 <script type='text/javascript'>//<![CDATA[ 
    $(window).load(function(){
     $(function() {
      $("#tabs").tabs();
      $("#tabs").tabs("option", {
        "selected": 2,
        "disabled": [1,2,3]
      });

    $( "input[type=checkbox]" ).click(function(){
        if ($(this).is(':checked')) {
         $('#tabs').tabs("enable", $(this).val());
         $('#tabs').tabs("select", $(this).val() );
        }
        else{
             $('#tabs').tabs("disable", $(this).val());
        }
    });
    });
    });//]]>  

    </script>

    </head>
    <body>
         <div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nithin</a> </li>
    <li><a href="#tabs-2">Vipin</a></li>
    <li><a href="#tabs-3">Sachin</a></li>
    <li><a href="#tabs-4">Ganguly</a></li>
  </ul>
  <div id="tabs-1">
    <p>Nithin</p>
  </div>
  <div id="tabs-2">
  <form name="nithin">
  <b>Name</b>
  <input type="text" id="name">
    <input type="submit" value="submit" id="submit"/>
    </form>
  </div>
   <div id="tabs-3">
    <p>Sachin</p>
  </div>
   <div id="tabs-4">
    <p>Ganguly</p>
  </div>
</div>
<input type="checkbox" name="tabs-1" value="1">tabs-1 
<input type="checkbox" name="tabs-2" value="2">tabs-2 
<input type="checkbox" name="tabs-3" value="3">tabs-3 
<input type="checkbox" name="tabs-4" value="4">tabs-4 
<br>

    </body>

    </html> 
```

你可以从[http://jsfiddle.net/2aQ2g/35/看到](http://jsfiddle.net/2aQ2g/35/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:37:53.973

那是因为你禁用了它。改成：

```
 $("#tabs").tabs("option", {
    "selected": 2,
    "disabled": [1,3]
  }); 
```

工作示例：http: [//jsfiddle.net/basarat/2aQ2g/34/](http://jsfiddle.net/basarat/2aQ2g/34/)

**更新**要根据提交的数据更改页面，您应该修改您在服务器页面上输出的内容。如果选择了 2，则不要将其放入禁用列表中。

**更新 2**如果您希望防止页面在提交时重新加载，您需要进行自定义表单处理：

```
 // Do custom submit handling : 
 $('form').unbind('submit').submit(function(e)
                     {
                         e.preventDefault();
                         // place logic here: 
                     }
 ); 
```

示例：http: [//jsfiddle.net/basarat/2aQ2g/37/](http://jsfiddle.net/basarat/2aQ2g/37/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:38:05.677

```
$(document).ready(function() {    
 $( "#tabs" ).tabs( "option", {"selected":1, "disabled": [0, 2, 3 ] });
)}; 
```

# c++ - 将 c++ int 转换为 VARBINARY 并再次返回

> ID：15539540
> 
> 赞同：0
> 
> 时间：2013-03-21T04:31:46.613
> 
> 标签：c++, mysql, int, type-conversion, varbinary

我刚刚发现除了`VAR`数据类型之外的所有类型都不会改变它们`LENGTH`的 s。这让我觉得效率极低，因为可能有`INT`像 an`autoincrement` `PRIMARY`这样的字段永远不会改变列中的`1`a`BIGINT`将占用完整的 8 个字节。

我有很多列一旦插入就不会改变，但有可能变大。我不想使用所有`BIGINT`列，而是想使用`VARBINARY`。

我想将数据作为`int`c++ 中的数据进行操作，但将其存储为`VARBINARY`mysql 中。

如何在 C++ 中进行这些转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:38:40.200

我*强烈*建议不要这样做。

如果您查看 MySQL 文档[`VARCHAR`](http://dev.mysql.com/doc/refman/5.0/en/char.html)，您会看到

> `VARCHAR`值存储为 1 字节或 2 字节长度前缀加上数据。长度前缀表示值中的字节数。

让我们取一个 64 位的值，例如 0xDEADBEEF2B84F00D。如果将其存储在`BIGINT`字段中，则需要 8 个字节（它存储为二进制值。）

如果您将其存储为`VARCHAR`，即使您假设数字始终是十六进制，我们说的是长度字段的 1 或 2 个字节，然后是十六进制字符的另外 16 个字节！18 个字节，并且由于必须与 ASCII 进行转换而损失了性能，这是一个**可怕**的权衡！

让我们看看相反的情况，0x01。存储在一个`BIGINT`字段中，它仍然是 8 个字节。使用与以前相同的约定，它在您的数据库中可能是 3 个字节。在我看来，甚至不值得。尤其是当您考虑到数据库在处理一堆 ASCII 数据时的性能有多差时。

只是不要这样做。按照设计的方式使用数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T04:35:35.877

我认为这是一个失败的提议。除非您可以证明您的数据根本不适合您的系统而不诉诸杂凑，否则我认为您最好坚持使用整数类型作为整数值。否则，如何防止有人在您的数字 ID 列中插入“你好”，以及查询看起来不像数字的数字有多高兴？总体上它可能也会更慢。

# php - 上传文件的功能不起作用

> ID：15539544
> 
> 赞同：-1
> 
> 时间：2013-03-21T04:32:55.070
> 
> 标签：php, function, file-upload, image-uploading

我在尝试放入用于上传文件的功能元素时遇到了一些麻烦。

我有一个包含输入类型文件的表单，但是当我尝试保存它时它不起作用。

我制作了一个应该全部记录和保存的函数，然后返回一条消息，但除了上传文件之外一切正常。

下面是我的功能

```
/**
 * Enregistrement d'un nouvel athlète
 * @param type $nom
 * @param type $prenom
 * @param type $date_naissance
 * @param type $localisation
 * @param type $taille
 * @param type $poids
 * @param type $actif
 * @param type $biographie
 * @param type $url_photo
 * @return string|null
 */
function recordNewAthlete($nom, $prenom, $date_naissance, $localisation, $taille, $poids, $actif, $biographie, $fileuplouad) {
    $input_nom = mysql_real_escape_string($nom);
    $input_prenom = mysql_real_escape_string($prenom);
    $input_date = date('Y-m-d', strtotime(mysql_real_escape_string($date_naissance)));
    $input_localisation = mysql_real_escape_string($localisation);
    $input_taille = mysql_real_escape_string($taille);
    $input_poids = mysql_real_escape_string($poids);
    $input_actif = mysql_real_escape_string($actif);
    $input_biographie = ($biographie);
    if (isset($input_nom) && !empty($input_nom)) {
        if ($_FILES['$fileuplouad']['error']) {
            switch ($_FILES['$fileuplouad']['error']) {
                case 1: // UPLOAD_ERR_INI_SIZE     
                    echo"Le fichier dépasse la limite autorisée par le serveur (fichier php.ini) !";
                    break;
                case 2: // UPLOAD_ERR_FORM_SIZE     
                    echo "Le fichier dépasse la limite autorisée dans le formulaire HTML !";
                    break;
                case 3: // UPLOAD_ERR_PARTIAL     
                    echo "L'envoi du fichier a été interrompu pendant le transfert !";
                    break;
                case 4: // UPLOAD_ERR_NO_FILE     
                    echo "Le fichier que vous avez envoyé a une taille nulle !";
                    break;
            }
        } else {
            // $_FILES['url_photo1']['error'] vaut 0 soit UPLOAD_ERR_OK     
            // ce qui signifie qu'il n'y a eu aucune erreur    
            $_FILES['$fileuplouad']['name'] = mktime() . $_FILES['$fileuplouad']['name'];
            $url1 = $_FILES['$fileuplouad']['name'];
            $chemin_destination = 'web/teamfrancestron/www/admin/uploads/';
            move_uploaded_file($_FILES['$fileuplouad']['tmp_name'], $chemin_destination . $_FILES['$fileuplouad']['name']);
            $tartget_path = $chemin_destination . $_FILES['$fileuplouad']['name'];
            $query = "INSERT INTO `stg_man_athletes` SET
                    `nom` = '{$input_nom}', 
                    `prenom` = '{$input_prenom}', 
                    `date_naissance` = '{$input_date}', 
                    `localisation` = '{$input_localisation}', 
                    `taille` = '{$input_taille}', 
                    `poids` = '{$input_poids}', 
                    `etat_activite` = '{$input_actif}', 
                    `description` = '{$input_biographie}', 
                    `url_photo` = '{$target_path}'";
            mysql_query($query);
            if (mysql_affected_rows() >= 0) {
                return "<div class='success'>Enregistrement de l'Athlète terminé, vous pouvez continuer vos actions.</div>"
                ;
            } else {
                return "<div class='error'>Erreur fatale lors de l'enregistrement, veuillez réessayer ulterieurement.</div>";
            }
        }
    } else {
        return null;
    }
} 
```

问题是它不会在定义的路径中移动任何文件。

我这样称呼我的功能

```
$message_enregistr_athlete = recordNewAthlete($_POST['nom'], $_POST['prenom'], $_POST['date_naissance'], $_POST['localisation'], $_POST['taille'], $_POST['poids'], $_POST['etat_activite'], $_POST['description'], 'userfile'); 
```

我只是在我想查看上传是否正常的地方回显结果。sql查询没问题，所有字段都正常。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:36:44.907

1.  将您的 error_repoting 设为所有 ie,`error_repoting(1);`并查看是否有任何错误。
2.  如果您的文件太大，请尝试以下操作：

两个 PHP 配置选项控制最大上传大小：`upload_max_filesize`和`post_max_size`. 对于 10 兆字节的文件大小，两者都可以设置为“10M”。

但是，您还需要考虑完成上传所需的时间。PHP 脚本通常在 30 秒后超时，但在正常的宽带连接上上传 10MB 文件至少需要 3 分钟（请记住，上传速度通常比下载速度慢五倍）。此外，操作或保存上传的图像也可能导致脚本超时。因此，我们需要将 PHP 的 max_input_time 和 max_execution_time 设置为 300（以秒为单位指定 5 分钟）

在 .htaccess 添加此代码，

```
php_value upload_max_filesize 10M
php_value post_max_size 10M
php_value max_input_time 300
php_value max_execution_time 300 
```

或者您可以使用 php 页面本身进行设置`ini_set`

```
ini_set('upload_max_filesize', '10M');
ini_set('post_max_size', '10M');
ini_set('max_input_time', 300);
ini_set('max_execution_time', 300); 
```

参考：[http ://www.sitepoint.com/upload-large-files-in-php/](http://www.sitepoint.com/upload-large-files-in-php/)

# qt - 如何在 Qt Creator 中设置终端？

> ID：15539547
> 
> 赞同：2
> 
> 时间：2013-03-21T04:33:15.120
> 
> 标签：qt, ubuntu, ide, qt-creator

我有一个由 Qt Creator 向导自动创建的普通 C++ 项目（只是“Hello World！”之一）。当我按 F5 进行调试时，终端出现错误：

> 无法连接创建者通信套接字/tmp/qt_temp.HP2094/stub-socket：没有这样的文件或目录

我在网上找了解决办法，试过这个：

> 将终端值从 x-terminal-emulator -e 更改为 /usr/bin/xterm -e

不幸的是，它对我不起作用。弹出一个消息框说“ptrace：不允许操作”。

如何让我的 Qt Creator 控制台应用程序正常运行？
PS：我的 Qt creator 版本是 Ubuntu 12.04 中的默认版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:50:44.440

Ubuntu 不久前做了一些内核加固技术，作为一种恶意软件预防更改，它产生了奇妙的效果`gdb`，`ptrace`并在没有 sudo 权限的情况下停止工作。`strace`如果您遵循[此评论](http://blog.mellenthin.de/archives/2010/10/18/gdb-attach-fails-with-ptrace-operation-not-permitted/#comment-141535)，它将允许它正常工作。

# jpa - JPA Query - JPQL 选择具有一组值中属性的所有子级的父级

> ID：15539550
> 
> 赞同：9
> 
> 时间：2013-03-21T04:33:34.373
> 
> 标签：jpa, one-to-many, jpql

我正在尝试编写一个 JPQL 查询来返回实体，其中所有实体的子项都具有一组值中的属性。它类似于以下问题，但有多个可能的值：

[休眠查询 - 如何选择那些所有孩子都匹配一个值的父母？](https://stackoverflow.com/questions/12922320/hibernate-query-how-to-select-those-parents-that-have-all-the-children-matchin)

这是一个改编自上述问题的实际示例...

我想选择那些所有孩子都是金发或红发的父亲。如果只有一个是黑发的，则不会选择父亲。

我已经尝试了对上述问题的答案的各种改编，比如......

```
select p from parent where all(parent.children.haircolor) IN ('blonde','redhead') 
```

或者

```
select p from parent where parent.children.haircolor ALL IN ('blonde','redhead') 
```

没想到这些会起作用，但值得一试。到目前为止，只有一件事奏效了……

```
select p from parent 
where 0 = (select count(c) from p.children c 
              where c.haircolor NOT IN ('blonde','redhead')
          ) 
```

我真的不希望对每一行都运行这样的计数查询，但我没有看到更好的机制。这并不完全让我感到惊讶，因为我想不出用普通 SQL 编写它的任何其他方式，但我也不是那里的专家。有没有更有效的方法来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T04:55:02.353

您尝试对看起来像集合属性的内容使用 JPQL 路径表达式 - 您不能这样做。而是像这样进行连接：

```
SELECT p FROM Parent p JOIN p.children c WHERE c.haircolor IN :hairColorCollection 
```

上面，`Parent`假设是一个具有集合值属性`children`的实体，其中每个目标实体都有一个值`haircolor`属性。`:hairColorCollection`是一个参数，在执行查询之前应该设置为一个集合对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-03T14:51:22.597

尝试使用子查询。

select p from parent where parent.children.haircolor IN ('blonde','redhead') and p not in (select p from parent where parent.children.haircolor not IN ('blonde','redhead'))

# java - 范围搜索 3 列的字符串

> ID：15539554
> 
> 赞同：3
> 
> 时间：2013-03-21T04:34:00.910
> 
> 标签：java, algorithm, data-structures

我有一组如下 abc 的字符串

```
a1.b1.c1
a1.b1.c2
a1.b2.c3
a2.b1.c1
a2.b2.c2
a3.b3.c3 
```

如果要求`a1.*`它应该返回我所有从`a1`. 如果要求`a1.b1`，则应返回从 开始的所有字符串`a1.b1`

所有输出都应以排序方式（词典）

关于数据结构的任何建议，我都在想`Suffix Tree`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:04:06.560

NavigabeeSet 可以快速完成类似的操作：

```
 NavigableSet<String> s = new TreeSet<>();
    s.addAll(Arrays.asList("a1.b1.c1", "a1.b1.c2", "a1.b2.c3", "a2.b1.c1"));
    System.out.println(s.subSet("a1.", true, "a2", false)); // a1.*
    System.out.println(s.tailSet("a1.b1"));                 // a1.b1 
```

输出

```
[a1.b1.c1, a1.b1.c2, a1.b2.c3]
[a1.b1.c1, a1.b1.c2, a1.b2.c3, a2.b1.c1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:02:54.480

您可以创建一个 3d 树（kd-tree 的一种特殊情况）。然后对类似的东西进行搜索`a1.b1.*`，你对`a1.b1.c1_min`and进行范围搜索`a1.b1.c1_max`。并对输出进行排序。

这将为您`O (n ^ (2/3) + r)`提供搜索和`O (r log (r))`排序，其中`n`是所有节点`r`的数量并且是找到的节点的数量。

搜索复杂度来自一般 kd-tree 的搜索复杂度：`O(n ^ (1-1/k) + r)`在 3d 树的情况下，`k`是 3.`^`的幂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:46:11.817

如果您的字符串集基本上是固定的（不经常更新），那么简单的排序列表就可以了。要查找所有带前缀的字符串，请对该列表执行二进制搜索，找到第一个字符串。然后在字符串与前缀匹配时从该点迭代。

在内置 Java 数据结构方面，我建议使用 TreeSet。

```
SortedSet<String> data = new TreeSet<String>();

Set<String> findMatching(SortedSet<String> data, String prefix) {
    String prefix = prefix.replace("*", ""); // remove unnecessary *
    String nextPrefix = prefix + '\uffff'; // a string guaranteed to be after anything matching the prefix
    // get the subset after the prefix, and then get the subset of that before the prefix
    return data.tailSet(prefix).headSet(nextPrefix, false);
}

findMatching(data, "a1.b1.*"); 
```

使用`nextPrefix`有点难看，因为我假设前缀始终是 -`.`分隔部分的序列，并且附加 FFFF 字符是获得大于任何匹配前缀的字符串的最佳方法。这部分可能有更好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T04:42:53.637

此代码可能会对您有所帮助。

```
String stringarray[] = {"a1.b1.c1",
"a1.b1.c2",
"a1.b2.c3",
"a2.b1.c1",
"a2.b2.c2",
"a3.b3.c3"};
String startingfrom = "a1.b1";
for(int i = 0; i < stringarray.length;i++) {
     if(stringarray[i].startsWith(startingfrom))
              System.out.println("string is : " + stringarray[i]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T06:27:53.957

我的功能：

```
class Match
{
    public static ArrayList<String> match (String[] data, String regex)
    {
        ArrayList<String> m = new ArrayList<String>();

        for (String d : data)
        {
            if (d.matches(regex))
            {
                m.add(d);
            }
        }

        Collections.sort(m);

        return m;
    }
} 
```

测试：

```
String data [] =
{"a1.b1.c1",
 "a1.b1.c2",
 "a1.b2.c3",
 "a2.b1.c1",
 "a2.b2.c2",
 "a3.b3.c3"};

// match using a regular expression
ArrayList<String> matched = match (data, "^a1\.b1.*"); 
```

# jquery - 更改滚动背景

> ID：15539555
> 
> 赞同：1
> 
> 时间：2013-03-21T04:34:01.987
> 
> 标签：jquery, background-color

如何在滚动时更改背景颜色，而不是基于与顶部的距离，而是基于 div 背景？我不知道你是否理解，但这里有一个我想要的例子，比如这个网站：[http](http://readymag.com/) ://readymag.com/ 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:36:25.987

```
$(document).scroll(function()
{
    $('body').css('background-color','#9966'+($(this).scrollTop()/10))
}); 
```

**或者**

```
$(window).scroll(function () { 
    $('body').css('background-color','#9966'+($(this).scrollTop()/10));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T04:38:40.217

您可以使用像[Waypoint](http://imakewebthings.com/jquery-waypoints/)这样的插件，它允许您根据滚动的位置触发功能。

在您的情况下，您可以触发一个更改背景颜色的函数。

# enthought - 在另一个窗口中嵌入 kind="subpanel" 的 Traits UI gui

> ID：15539556
> 
> 赞同：0
> 
> 时间：2013-03-21T04:34:03.107
> 
> 标签：enthought, traitsui

在 traitsui 文档中它指出

> Blockquote 面板与窗口非常相似，不同之处在于它嵌入在更大的窗口中，而不必是 Traits UI 窗口。

有谁知道如何制作一个更大的窗口并用`edit_traits(kind='subpanel')`几个特征对象的 UI 对象填充它？[我在幻灯片 23 的http://gael-varoquaux.info/computers/traits_tutorial/slides_Traits_en.pdf](http://gael-varoquaux.info/computers/traits_tutorial/slides_Traits_en.pdf)的 wx 窗口中找到了一个这样做的例子，有没有办法做到这一点，不会让我与 wxPython 联系在一起？

此处的答案也可能会回答类似的问题（[TraitsUI,sharing an object](https://stackoverflow.com/questions/15143705/traitsui-sharing-an-object)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:10:08.603

这样做总是将您与 GUI 工具包联系*在一起*。这就是重点：将 Traits UI 面板嵌入到更大的非 Traits GUI 应用程序中，该应用程序直接使用所需的 GUI 工具包。Traits 之外的细节自然依赖于 GUI 工具包。如果您不构建直接使用 GUI 工具包的大型应用程序，则可以忽略此功能。

`traits_view`您是在问如何构建一个恰好嵌入另一个实例的 Traits UI ？在这种情况下，您想使用[`InstanceEditor`](http://docs.enthought.com/traitsui/traitsui_user_manual/factories_basic.html#instanceeditor)with `style="custom"`。[这是链接文档中示例的代码。](https://github.com/enthought/traitsui/blob/95e0bed62b83f311dba5c03c6b175ca96e4e70b4/examples/demo/Standard_Editors/InstanceEditor_demo.py)

# matlab - Matlab DWT H级

> ID：15539570
> 
> 赞同：0
> 
> 时间：2013-03-21T04:35:55.550
> 
> 标签：matlab, wavelet, dwt

我正在尝试实现在论文¹中找到的一些水印算法。这是论文的一行：

> 对所有重新编号的段执行 H 级 DWT。

然后在模拟部分作者解释了用于实验的小波。

> DWT变换采用普通小波“Daubechies-1”，H=3。

我只是不明白 H 是什么意思，如何在 matlab DWT 函数中输入 H=3？

我的实际代码是：

```
[cA,cD] = dwt(audio,'db3'); 
```

有人能帮我吗？

* * *

^(¹ Ji, Y. & Kim, J.*基于 DWT-DCT 的量化音频水印算法*。多媒体、计算机图形学和广播 339–344 (2011))

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T03:23:21.193

**1、问：“H（水平）是什么意思？”**

答：[维基百科](http://en.wikipedia.org/wiki/Discrete_wavelet_transform#One_level_of_the_transform)很好地描述了这个概念，但我会尝试总结一下。对于每个级别，数据（级别 1 的原始数据，否则为前一级别的近似数据）被分解为近似数据和详细数据。结果是描述不同[频率区间](http://en.wikipedia.org/wiki/File%3aWavelets_-_DWT_Freq.png)中的数据的系数。

**2\. Q：matlab DWT函数中如何输入H=3？**

答：正如您所指出的，他们使用的是 db1。为了提取 H=3 的正确系数，我们需要实现这个级联算法。这是代码的粗略草图。

```
nLevels = 3;

% Get the coefficients for level 1
[cA,cD{1}] = dwt(audio,'db1');

% Continue to cascade to get additional coefficients at each level
for n = 2:nLevels
   [cA,cD{n}] = dwt(cA,'db1');
end

% Final coefficients are cA from highest level and cD from each level 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T13:09:07.060

kl3755 已经很好地回答了您的问题，尽管提供的解决方案可以进一步改进。对于多级小波变换，不要使用`dwt`命令，而是使用[`wavedec`](http://www.mathworks.com/help/wavelet/ref/wavedec.html)：

```
H = 3;
[cA, cD] = wavedec(audio, H, 'db1'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:43:44.963

Daubechies-1 是 Haar 小波。它是低通滤波器`h`和高通滤波器的组合`g`

```
>> s = sqrt(2);
>> h = [1  1] / s;
>> g = [1 -1] / s; 
```

要查看 dwt 的运行情况，您可以发出信号

```
>> x = (1:64) / 64;
>> y = humps(x) - humps(0); 
```

正如@kl3755 所说，您需要应用它 3 次：
- 每次迭代，dwt 返回
 一个低通滤波信号（近似值）
 一个高通滤波信号（细节）
- 每次下一次迭代都应用于前一个近似值虽然
这个术语`dwt`是模棱两可的- 它通常用于快速小波变换`fwt`，它在每次迭代时将近似值和细节下采样因子 2。因为它是最常用的版本，让我们在这里做 FWT：

```
>> c1 = filter (h, s, y);                % level 1 approximation
>> d1 = filter (g, s, y);                % level 1 detail
>> c1 = c1 (2:2:end); d1 = d1 (2:2:end); % downsample
>> c2 = filter (h, s, c1);               % level 2 approximation
>> d2 = filter (g, s, c1);               % level 2 detail
>> c2 = c2 (2:2:end); d2 = d2 (2:2:end); % downsample
>> c3 = filter (h, s, c2);               % level 3 approximation
>> d3 = filter (g, s, c2);               % level 3 detail
>> c3 = c3 (2:2:end); d3 = d3 (2:2:end); % downsample 
```

很容易看出你将如何编程这个递归。输出通常仅使用`fwt`最终近似值 (c3) 和细节信号：

```
>> fwt_y_3 = [c3 d3 d2 d1]; 
```

表示的“魔力”在于`fwt`，在反转过滤器之后，您可以通过以与上述相同的方式过滤和上采样来重建原始图像：

```
>> g=reverse(g); % h is symmetric
>> d3 (2,:) = 0; d3 = d3 (:)';                     % upsample d3
>> c3 (2,:) = 0; c3 = c3 (:)';                     % upsample c3
>> r2 = filter (h, 1/s, c3) + filter (g, 1/s, d3); % level 2 reconstruction
>> d2 (2,:) = 0; d2 = d2 (:)';                     % upsample d2
>> r2 (2,:) = 0; r2 = r2 (:)';                     % upsample r2
>> r1 = filter (h, 1/s, r2) + filter (g, 1/s, d2); % level 1 reconstruction
>> d1 (2,:) = 0; d1 = d1 (:)';                     % upsample d1
>> r1 (2,:) = 0; r1 = r1 (:)';                     % upsample r1
>> ry = filter (h, 1/s, r1) + filter (g, 1/s, d1); % reconstruction of y 
```

检查是否一切正常：

```
>> subplot(2,2,1);plot([y' 80+ry']);          
>> subplot(2,2,2);plot([c1' 80+r1(1:2:end)']);
>> subplot(2,2,3);plot([c2' 80+r2(1:2:end)']);
>> subplot(2,2,4);plot(fwt_y_3);hold on;plot(80+c3(1:2:end));hold off 
```

该名称`dwt`可能指的是未抽取小波变换的不同版本。`fwt`速度更快且不冗余，但它的主要缺点是它不是移位不变的：您不能通过重构 y 的移位来移位`fwt`y。未抽取的小波变换是移位不变的：
1\. 连续小波变换`cwt`如上所述，但没有下采样和上采样，
  请参见 dl.acm.org/citation.cfm?id=603242.603246
2.“循环旋转”或“à trous” transform 进行二次采样，但在每个级别执行所有可能的移位。
  见 dl.acm.org/citation.cfm?id=1746851

# c# - 有没有更好的方法来获取 gridview 值？

> ID：15539572
> 
> 赞同：1
> 
> 时间：2013-03-21T04:36:19.370
> 
> 标签：c#, asp.net, gridview, findcontrol

对于gridviews，我如何在单击按钮时从中获取单元格值和列名，并且此按钮有时可以嵌入到gridview行中，也可以在页面上其他位置的gridview之外。我愚蠢而简单的方法是通过在客户端将每列创建为标签类型来找到对gridview列的控制。所以它是在服务器端获取文本值的东西，例如，

`Label lblName = (Label) gvName.Rows[gvName.RowIndex].FindControl("lblSomeContent")`

只有几列时还好，但如果有十多个不同的列，我应该一次又一次地这样做十次吗？有没有更好的方法？我试图遍历每个 gridview.rows 但它总是包含空值，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:52:21.827

你可以做什么你可以创建一个网格行的实例
然后你可以使用查找控件。

```
GridViewRow gRow=gvName.Rows[gvName.RowIndex]; 
```

然后使用查找控件

```
Label lblName = (Label)gRow.FindControl("lblSomeContent"); 
```

其他控件类似

```
TextBox textBox=(TextBox)gRow.FindControl("txtSomeContent"); 
```

# php - 自定义谷歌地图注释

> ID：15539576
> 
> 赞同：-1
> 
> 时间：2013-03-21T04:36:45.427
> 
> 标签：php, google-maps, google-maps-api-3, annotations

我怎样才能像这样自定义谷歌地图？我必须添加自定义图标作为注释。单击注释应该会显示一个像这样的小弹出框。请帮助我。![在此处输入图像描述](../Images/e921af81b5b33c8c0fd6592a6dc5a060.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:16:38.463

从文档（[Custom Markers](https://developers.google.com/maps/documentation/javascript/overlays#SimpleIcons) - [Custom InfoWindows](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html) ( [example](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/infobox-basic.html) )）开始，查看示例，复制并更改它们。使用标准 InfoWindows 制作您的自定义标记。一旦你有工作自定义 InfoWindows。

# c# - 匹配序列的正则表达式

> ID：15539577
> 
> 赞同：-2
> 
> 时间：2013-03-21T04:36:45.677
> 
> 标签：c#, regex

字符串集可以是这样的。

1) anyNoOfcharacters< anycharacter> anyNoOfcharacters 。anyNoOfcharacters

2) anyNoOfcharacters < anychar > anyNoOfcharacters 和一个'#'（作为最后一个字符串）

3) anyNoOfcharacters " _ " anyNoOfcharacters 和一个 " # "

4) anyNoOfcharacters 和 anyNoOfdigits 后跟一个“#”

可以有一个单一的正则表达式可以验证所有上述字符串集吗？

这是我到目前为止所做的......

```
 Regex pattern = new Regex(@"^[a-zA-Z0-9\_]+[a-zA-Z0-9#.-] | [\b\w\d] |  "); 
```

任何人都可以根据我的要求为上述模式添加条件。

提前致谢..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:02:54.693

根据您的要求，这是一个应该匹配您列出的五个确切字符串中的任何一个的正则表达式。如果这不是你的意思，那么请澄清。

```
 Regex pattern = new Regex(@"(ads<r>_aimDate50ms\.Good)|(ads<t>Valid#)|(tactics_priorityT)|(tactics_SelectedADS#)|(ads3bValid#)"); 
```

**编辑**

您的要求仍然很随意。让我们尝试定义一些特定的规则。我想也许我们想要：

*   一个或多个字母，后跟
*   零个或多个字母或数字或下划线，后跟
*   零个或一个`#`字符

- 或者 -

*   一个或多个字母，后跟
*   零个或多个字母或数字或下划线，后跟
*   正好一个`<`字符，后跟
*   正好一个字母，后面跟着
*   正好一个`>`字符，后跟
*   一个或多个字母或数字或下划线或`.`字符，后跟
*   零个或一个`#`字符

这是在球场上吗？这些规则将与您的示例相匹配，但它们仍然可能不“正确”。当我说你需要具体时，这就是我的意思。如果你能清楚地描述模式是什么，那么你可以为它写一个正则表达式。如果您无法辨别一组描述模式的规则，那么就没有办法将其转换为正则表达式。

您现在可以更新您的问题以列出该模式的特定规则吗？对于模式的每个部分，我们需要知道：您期望什么样的字符或字符，以及其中可以连续出现多少个字符。例如，零个或多个、一个或多个、恰好一个等。

**编辑 2**

根据您更新的问题，我想我可以试一试。当您说“anyNoOfCharacters”时，您并没有说明是什么类型的字符。但是，如果您的意思是任何类型的字符，包括空格、标点符号等，那么正则表达式将不是很有用，因为它几乎可以匹配所有内容。所以我假设你在这种情况下只指字母。

这是您的规则（以及我对“anyNoOfCharacters”的假设）翻译成正则表达式：

1.  `[A-Za-z]*<.>[A-Za-z]*\.[A-Za-z]*`
2.  `[A-Za-z]*<.>[A-Za-z]*#`
3.  `[A-Za-z]*_[A-Za-z]*#`
4.  `[A-Za-z0-9]*#`

要将其放入单个正则表达式中，您可以通过`(` `)`在每个规则周围加上括号并`|`在它们之间添加一个来组合这些术语。因此我们有：

```
 Regex pattern = new Regex(@"([A-Za-z]*<.>[A-Za-z]*\.[A-Za-z]*)|([A-Za-z]*<.>[A-Za-z]*#)|([A-Za-z]*_[A-Za-z]*#)|([A-Za-z0-9]*#)"); 
```

我猜这已经很接近了，但可能还不完全在那里。你有足够的地方可以把它拿来并根据你的需要进行改进吗？如果不是，请进一步澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:09:04.437

这就是你想要的

```
Regex pattern = new Regex(@"[^\s]+"); 
```

根据你的评论试试这个

```
Regex pattern = new Regex(@"(?:[^\s]*[_#\.][^\s]*)[^\s]+"); 
```

# php - 如何全部替换，然后添加一个编号顺序标记替换？

> ID：15539578
> 
> 赞同：-1
> 
> 时间：2013-03-21T04:36:57.817
> 
> 标签：php, replace, seo, numbers, sequence

您好，我有文件名的实例：losangeles.php 2252 次，我想将其更改为 losangeles-0001.php、losangeles-0002.php、losangeles-0003.php 等等，直到 losangeles-2252。 php，这是怎么做到的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:34:49.403

像下面的代码一样使用[preg_replace_callback 函数](http://php.net/manual/en/function.preg-replace-callback.php)：

```
$str = <<< EOF
losangeles.php
losangeles.php
losangeles.php
EOF;
$str = preg_replace_callback('#\b(losangeles)(?=\.)#i',
          create_function('$m',
                          'static $i=1; return $m[1] . sprintf("-%04d", $i++);'),
          $str);
echo $str . "\n"; 
```

### 输出：

```
losangeles-0001.php
losangeles-0002.php
losangeles-0003.php 
```

### 现场演示：[http ://codepad.org/aMB9CMTZ](http://codepad.org/aMB9CMTZ)

# php - ajax成功不成功

> ID：15539579
> 
> 赞同：0
> 
> 时间：2013-03-21T04:37:04.567
> 
> 标签：php, javascript, jquery, ajax

我不确定这里发生了什么，但我无法获得成功的回应。这是我的代码：

```
function sendCallAjaxUsingJson(theUrl, theData, successCallbackFunction, timeoutCallbackFunction, otherErrorCallback, timeoutValueMilli)
{
    var successFn = successCallbackFunction; 
    var timeoutFn = timeoutCallbackFunction; 
    var otherFn = otherErrorCallback;
    if(!(typeof successFn === 'function') || !(typeof timeoutFn === 'function') || !(typeof otherFn === 'function')) 
        return false;

$.ajax({
        type: "POST",
        url: theUrl,
        timeout:timeoutValueMilli,
        dataType: 'json',
        data: { json: JSON.stringify(theData) },
        success:successFn,
        error: function(x, t, m) {
                   if(t==="timeout") {
                        timeoutFn();
                    } else {
                        otherFn();
                    }
                }
    });
} 
```

在服务器端，我使用的是 PHP。

我可以通过使 PHP 脚本`sleep`持续 2 秒并使用 1000 毫秒超时来触发超时功能。超时功能正确执行。但是，当我只是从脚本中回显一个字符串时，我没有触发成功函数。取而代之的是`otherFn`从上方燃烧的火焰。使用 Firebug，我可以看到我从脚本中回显的字符串已成功接收。

那么为什么要调用错误脚本呢？似乎一切都成功了，但它触发了错误功能。

# java - 如何 TestNG 测试由 spring MVC 控制器指定的 @PreAuthorize 注释及其 spring EL？

> ID：15539581
> 
> 赞同：1
> 
> 时间：2013-03-21T04:37:09.167
> 
> 标签：java, spring, unit-testing, spring-mvc, testng

我已经在我的 Spring MVC 控制器中定义了这个方法

```
@PreAuthorize("isAuthenticated() and hasPermission(#request, 'CREATE_REQUISITION')")
    @RequestMapping(method = RequestMethod.POST, value = "/trade/createrequisition")
    public @ResponseBody
    void createRequisition(@RequestBody CreateRequisitionRO[] request,
            @RequestHeader("validateOnly") boolean validateOnly) {
.....
} 
```

然后在我的 TestNG 测试中，我想调用这个方法并确保 PreAuthorize 条件得到验证。当我以正常方式（非测试）调用此方法时，会验证 PreAuthorize。

如果可能的话，如何在 TestNG 测试中测试这个注释以及如果它抛出一个异常，如何捕获异常？

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:45:37.533

在我看来，你不应该担心在单元测试中进行测试。你应该只测试你的方法。

相反，您应该为此场景编写集成或功能测试。因为为此整个应用程序将被初始化，您可以测试所有场景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T06:00:19.833

您“只”需要在测试中启用弹簧安全性。- 与您在正常应用程序中所做的相同。

顺便说一句：根据我自己的经验，我强烈建议将启用弹簧安全的测试与没有弹簧安全的测试分开。

# php - 使用触发器停止插入到不工作 MySQL 的表中

> ID：15539584
> 
> 赞同：0
> 
> 时间：2013-03-21T04:37:41.897
> 
> 标签：php, mysql, sql, triggers

嗨，我正在使用`MySQL` `TRIGGERS`，我正在使用**MySQL 5.5.8**，我有一张桌子。由于`MySQL`不允许`CHECK`约束，我使用 a`TRIGGER`检查输入值是否错误，如果输入值错误，我尝试给出消息并停止将记录插入表中。但`TRIGGER`如果它包含无效数据，它会忽略我的记录插入到表中。

**桌子**

```
CREATE TABLE pupil_data
(
PupilID int(10) NOT NULL  AUTO_INCREMENT,
PupilForeName varchar(255) NOT NULL,
PupilLastName varchar(255) NOT NULL,
Gender CHAR(1),
DateOfBirth  DATE ,
PhoneNumber int(10) ,
FamilyID int(10) NOT NULL,
PRIMARY KEY (PupilID),
FOREIGN KEY (FamilyID) REFERENCES family_data(FamilyID)  
ON DELETE CASCADE
ON UPDATE CASCADE
,
UNIQUE (PhoneNumber)
) ENGINE=innodb; 
```

**扳机**

```
DELIMITER $$
CREATE TRIGGER `check_pupil_before_insert` BEFORE INSERT ON `pupil_data`
FOR EACH ROW  BEGIN
  IF  CHAR_LENGTH( NEW.DateOfBirth ) < 4 THEN
       SIGNAL SQLSTATE '12345'
        SET MESSAGE_TEXT := 'check constraint on pupil_data.DateOfBirth  failed'
    END IF;
END$$  
DELIMITER ; 
```

我想检查为 DateOfBirth 输入的值是否小于 4 个字符，然后不要插入记录，但会给出错误消息。

![在此处输入图像描述](../Images/689027f4e985635a30f7fa6e0a3e2ec0.png)

的值`DateOfBirth`是`0`，所以我想它应该给出一个错误，但你可以看到它正在执行忽略它。

是什么原因，我做错了，请帮助，提前谢谢。

**更新**

![在此处输入图像描述](../Images/a2e3e0658bb2659041a888c36473b4ff.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:01:52.080

您的触发器定义是错误的。您正在使用 date 数据类型，为此您正在检查 char length 。这可能是错误的，因为mysql默认输入日期为'0000-00-00'加上你的语法是错误的......

所以你的触发器定义应该是

```
 CREATE TRIGGER `check_pupil_before_insert` BEFORE INSERT ON `pupil_data`
FOR EACH ROW  BEGIN
 IF   NEW.DateOfBirth = '0000-00-00' THEN
   SIGNAL SQLSTATE '12345'
    SET MESSAGE_TEXT = 'check constraint on pupil_data.DateOfBirth  failed';
 END IF;
END$$ 
```

试试这个 ..

# php - 有哪些方法可以对帖子进行排序和加载到动态 php 模板中

> ID：15539589
> 
> 赞同：0
> 
> 时间：2013-03-21T04:37:56.803
> 
> 标签：php, javascript, jquery

我目前正在处理两个项目，一个用于练习和掌握一些概念的小型 Flash 游戏网站，以及一个博客/游戏开发广告混合体。我对你们的问题是什么是加载帖子的最有效方式，所以我可以做一些事情，比如生成具有指定数量条目的页面，并根据我稍后定义的类别对它们进行排序。这可能只是我的无知，但是将每个文件存储在一个文件中似乎效率很低，因为要存储的文件很多。来自小型 Flash 游戏网站的基本游戏“帖子”示例，它实际上只是一个 div 容器，而且我可以添加一些类似标签系统的东西，以便稍后对其进行整理

```
 <div class="game">
                <a href="games/game.php?game=somegame"><img src="images/somegame.png"></a>
                <div id="content">
                    <a href="games/game.php?game=somegame"><header>Game name</header></a>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. 

                    </p>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:44:42.060

看来您是发展中国家的新手（不是问题）。您可能想寻找开箱即用的解决方案。

想到的东西：Tumblr、Wordpress 等……

如果您真的想自己破解它，我建议您使用“框架”，您可以将其视为编程语言之上的一个额外层，以填补空白/使东西更易于使用。

我真的可以推荐使用 laravel ( [http://laravel.com/docs](http://laravel.com/docs) )，它使用起来非常简单，文档会让你快速上手。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:03:57.350

您可以像这样制作 XML 文件。有多种读取 XML 文件的方法。我的猜测是你想把它读入 Flash。所以你会看actionscript。为此，您可以轻松找到信息并开始学习。（即[http://gotoandlearn.com/play.php?id=64](http://gotoandlearn.com/play.php?id=64)）

这取决于你想要什么。您可以使用 XML 文件中的信息即时生成 div 块。

```
<games>
    <game>
        <name>Some name</name>
        <link>"games/game.php?game=somegame</link>
        <image>"images/somegame.png"</image>
        <content>Lorem Ipsum</content>
    </game>
    <game>
        <name>Second name</name>
        <link>"games/game.php?game=secondgame</link>
        <image>"images/secondgame.png"</image>
        <content>Lorem Ipsum</content>
    </game>
</games> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:07:39.913

将 3 个文件放在（本地）主机上的文件夹中并运行 index.php - 这就是您要查找的内容吗？

`/wwwroot/post.tpl`

```
<article id="{$postId}" class="{$postType}">
    <div class="content" style="width:450px;float:left;margin-right:20px;">     
        <h3><a href="single-post.php?id={$postId}">{$postTitle}</a></h3>
        <p>{$postContent}</p>
    </div>
    <a href="single-post.php?id={$postId}"><img style="height:150px;" src="{$postPreviewImage}"></a>
</article><br clear="all"/> 
```

`/wwwroot/main.tpl`

```
<!doctype html>
<html>
<head>
  <meta charset="UTF-8"/>
  <title>{$pageTitle}</title>
  <script type="text/javascript" src="//code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
  <h1>{$pageH1}</h1>
  <hr>
  Filter posts: 
  <select id="filter">
    <option id="all">Show all posts</option>
    {$filterOptions}
  </select>
  <hr>
  {$posts}
  <script>
    $().ready(function() {
      $("#filter").change(function() {
        for(var b = $(this).find(":selected").attr("id"), d = document.getElementsByTagName("article"), c = 0;c < d.length;c++) {
          var a = d[c];
          "all" === b || b === a.className ? $(a).fadeIn() : b !== a.className && $(a).fadeOut()
        }
      });
    });
  </script>
</body>
</html> 
```

`/wwwroot/index.php`

```
<?php
// get categories from DB
$postCategoriesFromDb = array(
    array(
        'slug' => 'games',
        'name' => 'Games'
    ),
    array(
        'slug' => 'dev',
        'name' => 'Development'
    )
);

// get posts from DB
$postsFromDb = array(
    array(
      'id'      => 1,
      'type'    => 'games',
      'image'   => 'http://openmatt.org/wp-content/uploads/2012/12/Game-On-banner.png',
      'title'   => 'A post about games',
      'content' => 'This is the content of my game post.. lorem ipsum..'
    ),
    array(
      'id'      => 2,
      'type'    => 'dev',
      'image'   => 'http://gregrickaby.com/wp-content/uploads/2012/03/github-logo.png',
      'title'   => 'A post about development',
      'content' => 'This is the content of my dev post.. lorem ipsum..'
    )
);

// function to populate single post template with post data
function getPostHtml($postData) {
    $html = file_get_contents(__DIR__ . '/post.tpl');

    $vars = array(
        '{$postId}'           => $postData['id'],
        '{$postType}'         => $postData['type'],
        '{$postPreviewImage}' => $postData['image'],
        '{$postTitle}'        => $postData['title'],
        '{$postContent}'      => $postData['content']
    );

    return strtr($html, $vars);
}

// create HTML for each post
$posts = '';    
foreach ($postsFromDb as $post) {
    $posts .= getPostHtml($post);
}

// create HTML for category filter
$options = '';  
foreach ($postCategoriesFromDb as $cat) {
    $options .= sprintf('<option id="%s">%s</option>', $cat['slug'], $cat['name']);
}

// get main page template
$html = file_get_contents(__DIR__ . '/main.tpl');

// template vars
$vars = array(
    '{$pageTitle}'     => 'Page title',
    '{$pageH1}'        => 'Hello World!',
    '{$filterOptions}' => $options,
    '{$posts}'         => $posts
);

// output to client
echo strtr($html, $vars); 
```

# sql - 将 2 个查询合并为 1 个查询 sql

> ID：15539590
> 
> 赞同：-1
> 
> 时间：2013-03-21T04:38:01.483
> 
> 标签：sql

我有 2 个 SQL 语句

```
SELECT TOP 100 PERCENT COUNT(CodeAll) AS Total, CodeAll, Description,
LEFT(CodeAll, 1) AS Code
FROM Data WHERE DATE BETWEEN '2013/03/01 00:00:00' AND '2013/03/01 23:59:00'
AND (CodeAll Is Not Null)
GROUP BY CodeAll, Description ORDER BY Code
ASC 
```

结果：

```
 Total | CodeAll | Description | Code
 -------------------------------------
  3       1c         Test          1
  3       1b         Test2         1
 10      1a         Test3         1
  2       2a          Test4        2
  5       2b         Test5         2
  5       3a         Test6         3
  3       3b         Test7         3 
```

查询 #2：

```
SELECT COUNT(CodeAll) AS SumCall, LEFT(CodeAll, 1) AS Code FROM Data 
WHERE DATE BETWEEN '2013/03/01 00:00:00' AND '2013/03/01 23:59:00' 
AND (CodeAll Is Not   Null) GROUP BY LEFT(CodeAll, 1)` 
```

结果：

```
SumCall| Code 
16       1
7        2
8        3 
```

我想将 2 个查询组合成 1 个查询以生成：

```
 Total | CodeAll | Description | Code | SUM  | Percentage
 ---------------------------------------------------------
    3       1c         Test          1       16    18.75 %
    3       1b         Test2         1       16    18.75 %
   10      1a         Test3         1       16    62.5 % 
    2       2a          Test4        2        7    28.57 %
    5       2b         Test5         2        7    71.43 %
    5       3a         Test6         3        8    62.5 %
    3       3b         Test7         3        8    37.5 % 
```

询问？？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:53:19.517

尝试这个..

```
SELECT      TOP 100 PERCENT COUNT(d1.CodeAll) AS Total,
            d1.CodeAll,d1.Description,LEFT(d1.CodeAll, 1) AS Code ,
            COUNT(d2.CodeAll) AS SumCall, (UrPercentageColumn + '%') as Percentage
FROM        data d1
INNER JOIN  data d2
ON          LEFT(d1.CodeAll, 1) = LEFT(d2.CodeAll, 1)
WHERE       DATE BETWEEN '2013/03/01 00:00:00' 
AND         '2013/03/01 23:59:00' 
AND         (CodeAll Is Not Null) 
GROUP BY    LEFT(CodeAll, 1),CodeAll, Description ORDER BY Code ASC 
```

# for-loop - Java 方法复杂性 - 难以弄清楚

> ID：15539594
> 
> 赞同：0
> 
> 时间：2013-03-21T04:38:04.363
> 
> 标签：for-loop, big-o, time-complexity

当我遇到这段代码时，我正在为 UIL 进行计算机科学实践测试（`Structure<E>`课程中有更多方法，但它们似乎与问题无关）：

```
public class Structure<E> 
{
    private E data;
    private Structure<E> s;

    Structure(E d) 
    {
        data = d; 
    }

    public void add(E d)
    {
        if (s == null)
            s = new Structure<E>(d);
        else
            s.add(d);
    }
}

// Client method
public Structure<Integer> demo(int[] vals)
{
    Structure<Integer> s;
    s = new Structure<Integer>(vals[0]);
    for (int i = 0; i < vals.length; i++)
        s.add(vals[i]);
    return s;
} 
```

`demo()`所以这个问题要求我确定客户端方法的最严格的复杂性。我阅读了大 O 表示法（当然是在参加测试之前！），它说单循环操作，例如将元素一个一个添加到列表中，应该具有线性复杂度，或**O(N)**。

然而，正确的答案实际上是**O(N^2)**。我很困惑为什么会这样，有人能给我解释一下吗？因为我认为**O(N^2)**复杂性在*嵌套* `for`循环中很常见......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:43:37.433

它是 O(n^2) 因为递归函数`add`有一个隐式遍历，即其中有第二个循环，如下所示：

```
s = new Structure<Integer>(vals[0]);
for (int i = 0; i < vals.length; i++) {
        Structure<Integer> p = s;
        while (p.s != null) p = p.s;
        p.s = new Structure<E>(d);
 } 
```

# clojure - clojure：如果我正在创建一个操作员楼梯，我一般如何定义操作员的身份？

> ID：15539598
> 
> 赞同：2
> 
> 时间：2013-03-21T04:38:23.477
> 
> 标签：clojure, operators

我在考虑如何构建`*`出`+`, 并最终构建`+`出`inc`，然后在另一个方向上应用相同的模式，使用较低的函数`(f a b)`b 次，你会得到一个不断增加的超乘函数的阶梯。所以我决定尝试编写一个不断增加的超算子的无限列表。我想出了这个，这非常接近！：

```
(defn operator-staircase
  []
  (iterate
   (fn [f]
     (fn [a b]
       (loop [bottom b
              result a]
         (if (>= 0 bottom)
           result
           (recur
            (dec bottom)
            (f a result))))))
   (fn [a b]
     (inc b))))

(def ops (operator-staircase))
((nth ops 0) 3 5) ;; -->  6  (inc is arity one so it must ignore one of the args?)
((nth ops 1) 3 5) ;; -->  8  (correct addition)
((nth ops 2) 3 5) ;; -->  18  (oops, one off!  otherwise correctly multiplies.)  
                                Basically implements (fn [a b] (* a (inc b)))
((nth ops 3) 3 5) ;; ---->  1092 (Wow) 
```

我唯一不知道怎么做的就是`result`以一般的方式定义首字母！我之所以这样做是`a`因为它有点用，但是对于加法，例如它必须是 0，而乘法应该是 1。

如何`result`在上面的循环中定义初始值，以便它在所有情况下都能以一般方式工作？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:05:09.647

我认为如果你想从 开始`inc`，你只能有意义地定义一元运算符。所以第0步是“加一”；第一步是“N次：加一”，基本上就是`#(+ % %)`；第二步是“N次：加N”，即`#(* % %)`；第三步是“N次：乘以N”，即`#(pow % %)`……以此类推。

如果你想定义二元运算符，我认为你只是从而`+`不是从开始`inc`，然后像你一样推导出其余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:26:42.853

我认为阿莫洛伊说的是正确的。这是我的序列版本，从`+`amalloy 的建议开始。与您的另一个区别是我的计数器变量从 at`(dec b)`而不是开始`b`。原因是如果你把eg想象`a*3`成“`a`对自身相加3次”，这仍然只是加法函数的2次应用（即`a+a+a`）。通过这些更改，我得到了我认为您期望的结果。

```
(def operator-staircase
  (iterate
    (fn [f]
      (fn [a b]
        (loop [acc a
               counter (dec b)]
        (if (>= 0 counter)
          acc
          (recur (f a acc) (dec counter))))))
    +))

;; in comments, * is multiplication, ** is exponentiation (chained multiplication), *** is chained exponentiation, etc
(println ((nth operator-staircase 0) 3 2)) ; 5 = 3+2 = (inc (inc 3)))
(println ((nth operator-staircase 1) 3 2)) ; 6 = 3*2 = 3+3
(println ((nth operator-staircase 2) 3 2)) ; 9 = 3**2 = 3*3 = 3+3+3
(println ((nth operator-staircase 3) 3 2)) ; 27 = 3***2 = 3**3 = 3*3*3
;(println ((nth operator-staircase 4) 3 2)) ; takes too long to compute, but presumably 7625597484987 = 3****2 = 3***3 = 3**(3**3)
(println ((nth operator-staircase 0) 2 3)) ; 5 = 2+3 = (inc (inc (inc 2)))
(println ((nth operator-staircase 1) 2 3)) ; 6 = 2*3 = 2+2+2
(println ((nth operator-staircase 2) 2 3)) ; 8 = 2**3 = 2*2*2 = 2+2+2+2
(println ((nth operator-staircase 3) 2 3)) ; 16 = 2***3 = 2**(2**2) = 2*2*2*2 
```

让我们稍微分解一下前几次迭代：

```
(defn apply-n-times [f n arg]
  (if (= n 0) arg
    (recur f (dec n) (f arg))))

(defn plus [m n]
  (apply-n-times inc n m))

(defn times [m n]
  (apply-n-times (partial plus m) (dec n) m))

(defn exp [m n]
  (apply-n-times (partial times m) (dec n) m))

(defn expexp [m n]
  (apply-n-times (partial exp m) (dec n) m)) 
```

同样，有必要应用`(dec n)`时间而不是`n`. 如果我应用`n`时间，那么第三个参数必须是 0`times`和 1 `exp`，而不是`m`所有时间，所以不会有一致性。

该`apply-n-times`功能允许我们更简洁地定义您的操作员楼梯：

```
(def os2
  (iterate
    (fn [f]
      (fn [m n]
        (apply-n-times (partial f m) (dec n) m)))
    +)) 
```

这个给出与前面定义相同的结果。但是我仍然不能再往下走一步`+`，按照`inc`相同的顺序来定义。`plus`如果你看一下和上面的其他函数( `times`, `exp`, )之间的区别`expexp`，我想你可以看到结构不一样。

# mysql - 有没有办法查询 mysql 中所有不在集合中的记录，即使它是空的？

> ID：15539599
> 
> 赞同：0
> 
> 时间：2013-03-21T04:38:29.217
> 
> 标签：mysql, sql

所以我知道mysql说：

> 通常，包含 NULL 值的表和空表是“极端情况”。编写子查询时，请始终考虑是否考虑了这两种可能性。 [http://dev.mysql.com/doc/refman/5.0/en/all-subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/all-subqueries.html)

但这没有意义。如果我说：

`select * from users where users.id NOT IN (NULL)`;

它不应该返回所有用户吗？即使按照他们自己的逻辑：

> NOT IN 是 <> ALL 的别名。因此，这两个语句是相同的：

对我来说，返回所有 id 不等于 NULL 的记录，即所有记录。

所以问题是，**我怎样才能实现选择不在特定集合中的所有记录，即使该集合是空的**。

显然，在我的应用程序代码（Rails 应用程序）中，我可以检查集合是否为空并修改我的查询，但这似乎很荒谬。有没有办法在 sql 中完成这一切？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:08:34.753

您犯了假设 that `NULL`is 或 has a value 的常见错误 - 在这种情况下，您假设`NULL = empty set`.

`NULL`表示未定义 - 所以在所有 RDMS`NULL = NULL`中 is`NULL`和`NULL <> NULL`is also `NULL`。事`Anything = NULL`已`NULL`至此`Anything <> NULL`。`NULL`在 RDMS 中与数学中的除零相同。

这就是为什么您必须使用特殊的比较运算符`IS NULL`而不是`=`.

因此，您构建的查询将转换为`select * from users where users.id NOT IN (`*undefined*`)`。而`users.id NOT IN (`*undefined*`)`本身就是*undefined*。

我假设`NULL`你的查询来自 Rails 中的一个变量——我称之为 pnl（可能是空列表）。所以这个查询会给你你想要的。

```
select * from users where users.id NOT IN (pnl) OR pnl IS NULL; 
```

# c# - 是否可以更改 asp.net 会员提供者的用户名类型？

> ID：15539603
> 
> 赞同：0
> 
> 时间：2013-03-21T04:38:41.920
> 
> 标签：c#, asp.net, asp.net-mvc, wcf

是否可以更改用户为 SQL 成员资格提供商创建帐户的方式，以便用户必须使用他们的电子邮件作为用户名进行注册？我知道默认情况下用户可以将他们的用户名设为电子邮件格式，但它仍然会在用户名的顶部两次询问电子邮件地址，这使得它有点多余。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:29:44.310

只是不要`UserName`在注册时询问用户。询问电子邮件地址并通过电子邮件地址代替`UserName`in`CreateUser()`方法。

```
Membership.CreateUser(PASSEMAILIDHERE, model.Password, model.Email, null, null, true, null, out createStatus); 
```

# php - 防止在 CloudFlare 中缓存

> ID：15539606
> 
> 赞同：11
> 
> 时间：2013-03-21T04:38:44.680
> 
> 标签：php, caching, cloudflare, no-cache

我开始使用 CloudFlare，我正在使用它来构建一个新项目。

我在进行更改时遇到了一个问题：我在浏览器中看不到我的更改，所以我认为这里的问题是 CloudFlare 的缓存设置。

我已经阅读了这个关于 CloudFlare 缓存的[链接](https://support.cloudflare.com/entries/22319441-What-do-the-various-CloudFlare-cache-responses-HIT-Expired-etc-mean-)，所以我在我的 html 中加入了以下元标记：

```
<meta http-equiv="Cache-control" content="private"> 
```

但问题仍然存在。

我应该放置其他元标记，还是阻止以某种方式从服务器端缓存？（我正在使用 PHP）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-09T17:01:54.057

cloudflare 有一个`Development mode`选项：

*   对可缓存内容（如图像、CSS 或 JavaScript）的更改将立即可见。
*   CloudFlare 的加速缓存将被禁用。
*   开发模式将在 3 小时后自动关闭。
*   如果您的站点没有立即更改，请按 shift-reload。

`Development mode`您还可以在 3 小时内随时关闭。

希望这有助于人们寻找与此问题相同的答案，或者如果您仍然遇到此问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-04T18:18:53.207

这是一个很老的问题。要禁用此功能，我们不必打开开发模式，因为 cloudfare 会缓存 CSS 和 JS。如果您只想禁用特定的 JS 或 CSS，只需将以下属性添加到链接或脚本标记。

```
<script data-cfasync="false" src="/javascript.js"></script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-15T18:38:39.490

我只需要这样做，似乎 CloudFlare 已经更新了他们的页面规则。您现在可以为特定 URL 创建页面规则（甚至使用通配符），然后为设置选择缓存级别 > 绕过。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-14T15:50:06.007

当我读到您的问题时，您似乎（实际上）想要在代码中而不是直接在 CloudFlare 上指定缓存规则，我一直这样做。

这可以全局启用或通过（目标）页面规则启用。

1.  全局设置位于 Caching > Configuration > Browser Cache TTL > “Respect Existing Headers”（见截图）
2.  页面规则设置将位于规则属性“Origin Cache Control = On”中

[![在此处输入图像描述](../Images/535858ca9f312cf41ac2dd9a1e5390e8.png)](https://i.stack.imgur.com/0Ugdx.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T11:20:22.270

我有几个建议。

你可以试试

```
<meta http-equiv="Cache-control" content="max-age=0"> 
```

如果您对此没有任何成功，您是否考虑过使用页面规则？查看[https://support.cloudflare.com/entries/22576178-Is-there-a-tutorial-for-PageRules-上的](https://support.cloudflare.com/entries/22576178-Is-there-a-tutorial-for-PageRules-)**页面规则**部分

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-06T03:39:15.333

我知道这是一篇旧文章，但 Cloudflare 有一个开发模式，如果您正在编辑您的网站，请打开开发模式（在 cloudflare 设置中）......

否则发送一个“Expires：-1”标头......带有“must-revalidate”

（您是否尝试过 Ctrl + R）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-12T23:58:06.020

即使开发模式生效，我也不得不为我的域关闭 CF 的 DNS 中的橙色云。只有这样我才得到非缓存文件。

# javascript - Microsoft Dynamics：字段的值显示在表单上， 但不显示在网格视图上

> ID：15539608
> 
> 赞同：0
> 
> 时间：2013-03-21T04:38:57.170
> 
> 标签：javascript, dynamics-crm-2011, field, microsoft-dynamics

我对字段值的可见性有疑问。我正在使用 MS Dynamics CRM。在我对该字段进行编码后，在表单中，该字段的值完美显示。但是，它并没有出现在视图中。

我已经尝试过，，，`onSave`等等`onLoad`，`read-only`但它不起作用。我也调试过，没有报错。我不知道问题是什么。

代码：

```
function change_currentstatus() {
    var chk0 = document.getElementById('new_pc1');
    var chk1 = document.getElementById('new_m1');
    var chk2 = document.getElementById('new_m2');
    var chk3 = document.getElementById('new_m3');
    var chk4 = document.getElementById('new_m4');
    var txt = document.getElementById('new_currentstatus');
    if(!chk4.checked == false) {
        txt.value = 'm4';
    } else if(!chk3.checked == false) {
        txt.value = 'm3';
    } else if(!chk2.checked == false) {
        txt.value = 'm2';
    } else if(!chk1.checked == false) {
        txt.value = 'm1';
    } else if(!chk0.checked == false) {
        txt.value = 'pc1';
    } else {
        txt.value = ' ';
    }
} 
```

设置或 JavaScript 可能有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:10:11.167

我的第一个观察是：使用 CRM 2011 javascript 对象模型，在[此处](http://www.powerobjects.com/blog/2011/01/14/crm-2011-useful-javascript-tidbits/)获取简历。因此，对于读取字段，请使用：

```
var varMyValue = Xrm.Page.getAttribute("CRMFieldSchemaName").getValue(); 
```

要设置一个值：

```
Xrm.Page.getAttribute("po_CRMFieldSchemaName").setValue('My New Value'); 
```

因此，您必须更改此代码：

```
if(!chk4.checked == false)
    txt.value = 'm4'; 
```

替换为：

```
if(!Xrm.Page.getAttribute("new_m4").getValue() == false)
   Xrm.Page.getAttribute("new_currentstatus").setValue('m4'); 
```

# c# - Farseer Physics 恢复原状时的刚体 =0

> ID：15539615
> 
> 赞同：1
> 
> 时间：2013-03-21T04:39:30.700
> 
> 标签：c#, xna, farseer

如何在物理世界中创建刚性（实心/无反弹）体，我正在尝试使用以下代码

```
Body bodyBall = BodyFactory.CreateBody(world);
CircleShape circleShape = new CircleShape(ConvertUnits.ToSimUnits(textureWidth / 2f), .1f);
Fixture fixtureBall = bodyBall.CreateFixture(circleShape);
bodyBall.BodyType = BodyType.Dynamic;
bodyBall.Restitution = 0f; 
```

尽管我将恢复原状设置为 0，但当它与其他（相同）物体碰撞时它会反弹回来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:06:16.483

***碰撞中的恢复是两个***夹具`Restitution`属性值的函数。

 *该功能可以通过修改 Farseer 中的代码来定制，特别是通过修改**Settings.cs**`FarseerPhysics.Settings.MixRestitution`中的方法。这是默认实现，它返回两个恢复值中的*最大值：*

 ***```
public static float MixRestitution(float restitution1, float restitution2)
{
    return restitution1 > restitution2 ? restitution1 : restitution2;
} 
```

所以你可以修改这个方法（也许改为返回最小值）。或者您可以简单地将`Restitution`所有相关设备的值设置为零。****

# android - 在android中附加格式的字符串

> ID：15539617
> 
> 赞同：11
> 
> 时间：2013-03-21T04:39:36.437
> 
> 标签：android, string

请任何人帮助我。我不知道如何在 android 中附加类似于以下格式的字符串：

```
String key = "";
append("%d-%d-%d", 0, 1, 2)); 
```

请给我一个例子。先感谢您。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-21T04:46:21.987

使用 StringBuilder 或 StringBuffer 但具有足够的初始容量以避免重新分配。默认容量是 16，所以一旦超过了，数据就必须复制到一个新的更大的地方。使用追加而不是 +。

```
int integer = 5;

StringBuilder s = new StringBuilder(100);
 s.append("something");
 s.append(integer);
 s.append("more text"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-21T04:44:48.120

您可以使用 StringBuffer 或 StringBuilder

```
public class Test {

public static void main(String args[]) {
  StringBuffer sb = new StringBuffer("Test");
  sb.append(" String Buffer");
  System.out.println(sb); 
}  
} 
```

这会产生以下结果：

```
Test String Buffer 
```

字符串生成器：

```
StringBuilder strBuilder = new StringBuilder("foo");
strBuilder.append("bar");
strBuilder.append("baz");
String str = strBuilder.toString(); 
```

对于格式，请尝试

```
String.format("Hello %1$s, your name is %1$s and the time is %2$t", name, time) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T04:47:05.383

您可以使用该[`String.format`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)方法来做到这一点。

```
String test = "%d-%d-%d";
String.format(test, 0, 1, 2); 
```

或与`Locale`.

```
String.format(Locale.US, test, 0, 1, 2); 
```

# c# - 从 LINQ 语句中获取单个结果

> ID：15539620
> 
> 赞同：1
> 
> 时间：2013-03-21T04:39:51.477
> 
> 标签：c#, .net, linq

我有以下代码：

```
private void SelectRowData(int wire, int bond, string svid)
{
    var results = from myRow in PPLoadedData.AsEnumerable()
                  where 
                      myRow.Field<Int32>("Wires.OperationOrder") == wire &&
                      myRow.Field<Int32>("Bonds.OperationOrder") == bond
                  select myRow[svid];
} 
```

我可以看到当我调试结果确实有我预期的单个字符串项。但是，我无法以我知道的任何方式索引或迭代数据。

我正在寻找的是可以访问数据的东西。

这是调试器所说的：

> 名称：（新 System.Linq.SystemCore_EnumerableDebugView(results)).Items[0]
> 
> 价值：700.0
> 
> 类型：对象 {double}

`PPLoadedData`是一个`DataTable`。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T06:22:03.983

为了澄清杰森的回答：

*   如果集合可以包含任意数量的项目，请使用`FirstOrDefault()`.
*   如果集合总是有一个或多个项目，请使用`First()`.
*   如果集合总是有零个或一个项目，请使用`SingleOrDefault()`.
*   如果集合始终只有一项，请使用`Single()`.

如果您使用适当的方法，那么当您的不变量被违反时，您会得到一个异常，这将有助于您调试程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T04:42:46.850

如果您希望查询产生单个项目，则应使用如下`SingleOrDefault`方法：

```
var result = (from myRow in PPLoadedData.AsEnumerable()
               where myRow.Field<Int32>("Wires.OperationOrder") == wire && 
                     myRow.Field<Int32>("Bonds.OperationOrder") == bond
               select myRow[svid]).SingleOrDefault();
if(result != null)
    // Do stuff with result 
```

通常，Linq 查询返回 IEnumerables，您必须对其进行迭代，而不是按索引访问。但是，在您只想要一个值的情况下，有几种方法可以获取您想要的值。查看MSDN 上的[System.Linq.Enumerable了解更多信息。](http://msdn.microsoft.com/en-us/library/bb341635.aspx)

编辑：请务必阅读 Eric 的答案，其中解释了何时使用哪种方法来获得单个结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T04:42:13.300

结果是集合类型。您需要对其进行迭代[Datatable.AsEnumerable](http://msdn.microsoft.com/en-IN/library/system.data.datatableextensions.asenumerable.aspx)。当结果是`IEneumerable<T>`LINQ 在 collection 中返回的类型和其他类型时，您需要像这样迭代

```
foreach (var item in results)
{
  //do some thing with item 
} 
```

# monodevelop - 从命令行构建 Xamarin.iOS 项目时解决方案文件配置映射无法正常工作

> ID：15539623
> 
> 赞同：2
> 
> 时间：2013-03-21T04:39:54.350
> 
> 标签：monodevelop, xamarin.ios, xamarin-studio, mdtool

我试图让 Jenkins 构建一个 Xamarin.iOS / MonoTouch 项目，并且我在我的解决方案和项目文件中创建了一些不同的配置，以控制从一个环境到下一个环境的构建方式。

当我从 Xamarin Studio 中构建时，事情似乎按预期工作。但是，当我从命令行构建时，没有使用正确的配置构建 StartUp 项目。

我尝试了几个不同的命令，但我认为我需要的命令是：

`/Applications/Xamarin\ Studio.app/Contents/MacOS/mdtool build -t:Build -c:MySoftwareStaging Solution.sln`

该解决方案有 3 个项目。我将从解决方案文件开始。

```
Microsoft Visual Studio Solution File, Format Version 11.00
# Visual Studio 2010
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "MySoftwareMT", "MySoftware\MySoftwareMT.csproj", "{FC83D683-0444-49B4-8CB5-AA4BD4E548A0}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "MySoftware.Core.MT", "MySoftware.Core\MySoftware.Core.MT.csproj", "{52709902-8F51-40F1-9CC8-F5EA0EC5465C}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "MySoftware.Presentation", "MySoftware.Presentation\MySoftware.Presentation.csproj", "{463229B1-C94D-44EB-9775-EF7164E739E1}"
EndProject
Project("{2150E333-8FDC-42A3-9474-1A3956D46DE8}") = "ShellScripts", "ShellScripts", "{7838E2BF-9BF3-4554-AD65-55764DE3926C}"
    ProjectSection(SolutionItems) = preProject
        ShellScripts\DevDeploymentPlistGenerator.sh = ShellScripts\DevDeploymentPlistGenerator.sh
        ShellScripts\Version_Environment_Settings.sh = ShellScripts\Version_Environment_Settings.sh
    EndProjectSection
EndProject
Global
    GlobalSection(SolutionConfigurationPlatforms) = preSolution
        Debug|iPhoneSimulator = Debug|iPhoneSimulator
        Release|iPhoneSimulator = Release|iPhoneSimulator
        Debug|iPhone = Debug|iPhone
        Release|iPhone = Release|iPhone
        Ad-Hoc|iPhone = Ad-Hoc|iPhone
        AppStore|iPhone = AppStore|iPhone
        MySoftwareDev|iPhone = MySoftwareDev|iPhone
        MySoftwareStaging|iPhone = MySoftwareStaging|iPhone
    EndGlobalSection
    GlobalSection(ProjectConfigurationPlatforms) = postSolution
        {463229B1-C94D-44EB-9775-EF7164E739E1}.Ad-Hoc|iPhone.ActiveCfg = Debug|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.Ad-Hoc|iPhone.Build.0 = Debug|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.AppStore|iPhone.ActiveCfg = Debug|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.AppStore|iPhone.Build.0 = Debug|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.MySoftwareDev|iPhone.ActiveCfg = Release|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.MySoftwareDev|iPhone.Build.0 = Release|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.MySoftwareStaging|iPhone.ActiveCfg = Release|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.MySoftwareStaging|iPhone.Build.0 = Release|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.Debug|iPhone.ActiveCfg = Debug|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.Debug|iPhone.Build.0 = Debug|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.Debug|iPhoneSimulator.ActiveCfg = Debug|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.Debug|iPhoneSimulator.Build.0 = Debug|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.Release|iPhone.ActiveCfg = Release|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.Release|iPhone.Build.0 = Release|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.Release|iPhoneSimulator.ActiveCfg = Release|Any CPU
        {463229B1-C94D-44EB-9775-EF7164E739E1}.Release|iPhoneSimulator.Build.0 = Release|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.Ad-Hoc|iPhone.ActiveCfg = Debug|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.Ad-Hoc|iPhone.Build.0 = Debug|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.AppStore|iPhone.ActiveCfg = Debug|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.AppStore|iPhone.Build.0 = Debug|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.MySoftwareDev|iPhone.ActiveCfg = Release|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.MySoftwareDev|iPhone.Build.0 = Release|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.MySoftwareStaging|iPhone.ActiveCfg = Release|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.MySoftwareStaging|iPhone.Build.0 = Release|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.Debug|iPhone.ActiveCfg = Debug|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.Debug|iPhone.Build.0 = Debug|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.Debug|iPhoneSimulator.ActiveCfg = Debug|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.Debug|iPhoneSimulator.Build.0 = Debug|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.Release|iPhone.ActiveCfg = Release|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.Release|iPhone.Build.0 = Release|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.Release|iPhoneSimulator.ActiveCfg = Release|Any CPU
        {52709902-8F51-40F1-9CC8-F5EA0EC5465C}.Release|iPhoneSimulator.Build.0 = Release|Any CPU
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.Ad-Hoc|iPhone.ActiveCfg = Ad-Hoc|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.Ad-Hoc|iPhone.Build.0 = Ad-Hoc|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.AppStore|iPhone.ActiveCfg = AppStore|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.AppStore|iPhone.Build.0 = AppStore|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.MySoftwareDev|iPhone.ActiveCfg = MySoftwareDev|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.MySoftwareDev|iPhone.Build.0 = MySoftwareDev|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.MySoftwareStaging|iPhone.ActiveCfg = Staging|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.MySoftwareStaging|iPhone.Build.0 = Staging|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.Debug|iPhone.ActiveCfg = Debug|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.Debug|iPhone.Build.0 = Debug|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.Debug|iPhoneSimulator.ActiveCfg = Debug|iPhoneSimulator
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.Debug|iPhoneSimulator.Build.0 = Debug|iPhoneSimulator
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.Release|iPhone.ActiveCfg = Release|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.Release|iPhone.Build.0 = Release|iPhone
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.Release|iPhoneSimulator.ActiveCfg = Release|iPhoneSimulator
        {FC83D683-0444-49B4-8CB5-AA4BD4E548A0}.Release|iPhoneSimulator.Build.0 = Release|iPhoneSimulator
    EndGlobalSection
    GlobalSection(NestedProjects) = preSolution
    EndGlobalSection
    GlobalSection(MonoDevelopProperties) = preSolution
        StartupItem = MySoftware\MySoftwareMT.csproj
        version = 1.0
    EndGlobalSection
EndGlobal 
```

以下是 MySoftware\MySoftwareMT.csproj 中的相关部分：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">iPhoneSimulator</Platform>
    <ProductVersion>10.0.0</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{FC83D683-0444-49B4-8CB5-AA4BD4E548A0}</ProjectGuid>
    <ProjectTypeGuids>{6BC8ED88-2882-458C-8E55-DFD12B67127B};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>
    <OutputType>Exe</OutputType>
    <RootNamespace>MySoftware</RootNamespace>
    <IPhoneResourcePrefix>Resources</IPhoneResourcePrefix>
    <AssemblyName>MySoftware</AssemblyName>
    <ReleaseVersion>1.0 Do Not Change</ReleaseVersion>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|iPhone' ">
    <DebugSymbols>True</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>False</Optimize>
    <OutputPath>bin\iPhone\Debug</OutputPath>
    <DefineConstants>DEBUG;</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <ConsolePause>False</ConsolePause>
    <CodesignKey>iPhone Developer</CodesignKey>
    <MtouchDebug>True</MtouchDebug>
    <MtouchArch>ARMv7</MtouchArch>
    <MtouchI18n />
    <MtouchSdkVersion>6.0</MtouchSdkVersion>
    <IpaPackageName>MySoftware-Dev</IpaPackageName>
    <BuildIpa>True</BuildIpa>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|iPhone' ">
    <DebugType>none</DebugType>
    <Optimize>True</Optimize>
    <OutputPath>bin\iPhone\Release</OutputPath>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <ConsolePause>False</ConsolePause>
    <CodesignKey>iPhone Developer</CodesignKey>
    <IpaPackageName />
    <MtouchI18n />
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'MySoftwareDev|iPhone' ">
    <DebugType>none</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\iPhone\Release</OutputPath>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <MtouchI18n />
    <ConsolePause>false</ConsolePause>
    <CodesignKey>iPhone Distribution</CodesignKey>
    <IpaPackageName>MySoftware-Dev</IpaPackageName>
    <CodesignProvision>MyCodesignProvisioningKey</CodesignProvision>
    <BuildIpa>true</BuildIpa>
    <CrashReportingApiKey />
    <MtouchArch>ARMv7</MtouchArch>
    <CustomCommands>
      <CustomCommands>
        <Command type="BeforeBuild" command="bash -c &quot;security unlock-keychain -p 'KeychainPass' ${HOME}/Library/Keychains/iPhoneStuff.keychain&quot;" />
        <Command type="AfterBuild" command="/bin/bash DevDeploymentPlistGenerator.sh -v ${BundleVersion} -b ${BundleIdentifier} -p MySoftware-Dev.plist -i MySoftware-Dev.ipa" workingdir="${SolutionDir}/ShellScripts" />
      </CustomCommands>
    </CustomCommands>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Staging|iPhone' ">
    <DebugType>none</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\iPhone\Release</OutputPath>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <CrashReportingApiKey />
    <IpaPackageName>MySoftware-Staging</IpaPackageName>
    <MtouchArch>ARMv7</MtouchArch>
    <MtouchI18n />
    <ConsolePause>false</ConsolePause>
    <CustomCommands>
      <CustomCommands>
        <Command type="BeforeBuild" command="bash -c &quot;security unlock-keychain -p 'KeychainPass' ${HOME}/Library/Keychains/iPhoneStuff.keychain&quot;" />
        <Command type="AfterBuild" command="/bin/bash DevDeploymentPlistGenerator.sh -v ${BundleVersion} -b ${BundleIdentifier} -p MySoftware-Staging.plist -i MySoftware-Staging.ipa" workingdir="${SolutionDir}/ShellScripts" />
      </CustomCommands>
    </CustomCommands>
    <BuildIpa>true</BuildIpa>
    <CodesignKey>iPhone Distribution</CodesignKey>
    <CodesignProvision>MyCodesignProvisioningKey</CodesignProvision>
  </PropertyGroup>
</Project> 
```

这是`mdtool`上述命令的一部分输出：

```
 MonoDevelop Build Tool
Loading solution: /Users/kirk/Projects/MySoftware_Trunk/src/MySoftware/MySoftware.sln
   Loading solution: /Users/kirk/Projects/MySoftware_Trunk/src/MySoftware/MySoftware.sln
      Loading projects ..
Building Solution: MySoftware (MySoftwareStaging)
   Building: MySoftware.Core.MT (Debug)
      Performing main compilation...

......output removed.....

      Build complete -- 0 errors, 0 warnings
   Building: MySoftware.Presentation (Debug)
      Performing main compilation...

......output removed.....

      Build complete -- 0 errors, 0 warnings
   Building: MySoftwareMT (Debug|iPhoneSimulator)
      Performing main compilation...

......output removed.....

     Build complete -- 0 errors, 3 warnings 
```

关于为什么会发生这种情况的任何想法？当我在 Xamarin Studio 中运行它时，一切正常。我只是从命令行看到奇怪的行为。

**更新：**根据@jonathanpeppers 的回答，我做了一些额外的测试。我清理了解决方案（使用`--target:Clean`），然后我尝试使用`--project:Myproject`标志独立构建每个项目`mdtool`。对于前 2 个项目（“MySoftware.Core.MT”和“MySoftware.Presentation”），我使用了`--configuration:Release`. 他们构建了，但 dll 被放置在 /bin/Debug 而不是 Release。当我尝试最终使用 构建“MySoftwareMT”`--configuration:Staging`时，构建失败，因为它找不到其他项目的 DLL。我对这里发生的事情感到非常困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:04:12.220

看起来您并没有告诉`mdtool`要构建哪个配置。我不认为`mdtool`使用启动项目，它可能只是选择第一个配置。

您可以尝试使用“--configuration:Release|iPhone”吗？[这里](https://stackoverflow.com/questions/5624060/automated-builds-in-monotouch)的例子。

# mysql - sql 查询 - 如何连接/联合 3 个表（2 个索引表和 1 个数据表）

> ID：15539626
> 
> 赞同：0
> 
> 时间：2013-03-21T04:40:10.747
> 
> 标签：mysql, join, union, multiple-tables

我有 3 个表、2 个索引表和 1 个数据表

表的结构是这样的：

`users`：

```
id      | name
--------+----------- 
1       | John
2       | Mike
3       | James 
```

`idx`和`idx2`：

```
user_id  | user_id2 | action   | date
---------+----------+----------+----------
1        | 2        | message  | 2013-03-20
1        | 3        | message  | 2013-03-21
3        | 2        | chat     | 2013-03-21 
```

早些时候我只有 2 个表，1 个索引表（名为 'idx'）和 1 个数据表（名为 'users'），所以查询是这样的：

```
SELECT * FROM idx inner join users WHERE idx.user_id='2' and idx.user_id2=users.id ORDER BY idx.date DESC 
```

但是现在添加了一个新的索引表（名为'idx2'），结构类似于'idx'（我不能将'idx'和'idx2'组合成一个表，所以我们需要使用3个表一次）

所以现在我不能用 3 个表进行查询

我试图做这样的事情：

```
SELECT * FROM idx,idx2 inner join users WHERE (idx.user_id='2' and idx.user_id2=users.id) or (idx2.user_id='2' and idx2.user_id2=users.id) ORDER BY idx.date DESC 
```

但这不起作用，我想查询应该包含`union`和`join`...

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:45:40.083

你的权利 UNION 似乎要走的路，但表结构应该匹配，你能提供更多信息吗？也许使用[sqlfiddle](http://sqlfiddle.com/)？

如果我能很好地理解你的问题，这应该可以做到：

```
(SELECT * FROM idx inner join users WHERE idx.user_id='2' and idx.user_id2=users.id)
UNION
(SELECT * FROM idx2 inner join users WHERE idx2.user_id='2' and idx2.user_id2=users.id) ORDER BY date DESC; 
```

查询从两个表中返回数据，并正确排序：看看我做的这个[例子](http://sqlfiddle.com/#!2/9e501/2)

# xml - 使用 JXON 阅读

> ID：15539628
> 
> 赞同：0
> 
> 时间：2013-03-21T04:40:15.880
> 
> 标签：xml, json

我正在关注[https://developer.mozilla.org/en-US/docs/JXON](https://developer.mozilla.org/en-US/docs/JXON) 编写一个将 xml 文件转换为 JSON 的算法。但是，没有运气。我觉得我做错了什么！

我应该在以下行中通过什么来代替“doc”：

```
 var myObject = new JXONTree(doc); 
```

我试过这个：

```
<!DOCTYPE html>  
<html lang="en">  
<head>  
<title>Welcome</title>  

<script type="text/javascript" src="sample1.js"></script>  

<script type="text/javascript">  

 /*  
 * Loading xml on the browser page  
 */  
function loadXML()  
{  
     try
    { 
         if (window.XMLHttpRequest)  
        {
             // code for IE7+, Firefox, Chrome, Opera, Safari  
             xmlhttp = new XMLHttpRequest();  
        }
        else  
        {  
            // code for IE6, IE5  
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");  
        }  
        xmlhttp.open("GET", "sample.xml", false);  
        xmlhttp.send();  
     }  
    catch(e)  
    {  
        alert("Please enable file access to read config file");  
    }  
    var response = xmlhttp.responseXML;  
    if (response == null)  
    {  
        alert("Error in xml file ..Please check config.xml file is valid or not !");  
    }  
    return response;  
 }  

function myFun()  
{  
    //Loading config xml  
    var xmlDoc = loadXML();  
    var myObject = new JXONTree(xmlDoc);  
     alert(myObject);  
} 
 </script>  

</head>  

 <body onload="myFun()">  
 Hello
</body>  
</html> 
```

我的 sample.xml ：

```
<?xml version="1.0"?>  
<!DOCTYPE catalog SYSTEM "catalog.dtd">  
<catalog>  
   <product description="Cardigan Sweater">  
   <catalog_item gender="Men's">  
     <item_number>QWZ5671</item_number>  
     <price>39.95</price>  
     <size description="Medium">  
       <color_swatch image="red_cardigan.jpg">Red</color_swatch>  
       <color_swatch image="burgundy_cardigan.jpg">Burgundy</color_swatch>  
     </size>  
      <size description="Large">  
       <color_swatch image="red_cardigan.jpg">Red</color_swatch>  
        <color_swatch image="burgundy_cardigan.jpg">Burgundy</color_swatch>  
     </size>  
   </catalog_item>  
    <catalog_item gender="Women's">  
    <item_number>RRX9856</item_number>  
     <discount_until>Dec 25, 1995</discount_until>  
     <price>42.50</price>  
     <size description="Medium">  
        <color_swatch image="black_cardigan.jpg">Black</color_swatch>  
     </size>  
    </catalog_item>  
  </product>  
   <script type="text/javascript"><![CDATA[function matchwo(a,b) {  
    if (a < b && a < 0) { return 1; }  
     else { return 0; }  
  }]]></script>  
  </catalog> 
```

因此，在运行此程序时，我在 Opera 中收到如下错误：

请启用文件访问以读取配置文件。我在 Opera12 中启用了 Allow File XMLHttpRequest。还是没有运气！它适用于谷歌浏览器。那么我错过了什么？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:52:19.077

传递一个 DOM`Document`对象。如果您使用 检索 XML 文档`XMLHttpRequest`，那么它将作为`responseXML`属性使用。否则，请使用以下内容：

```
var parser = new DOMParser();  // only available in some newer browsers
var doc = parser.parseFromString(yourXMLString, 'application/xml'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T20:59:49.997

对我有用，@sneha，从答案开始`icktoofay`。

我直接在 chrome canary 控制台中执行此操作：

输入：

```
navigator.userAgent 
```

输出：

```
"Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/29.0.1506.0 Safari/537.36" 
```

输入：

```
prsr = new DOMParser() 
```

输出：

```
DOMParser {parseFromString: function} 
```

输入：

```
doc = '<?xml version="1.0"?>  <!DOCTYPE catalog SYSTEM "catalog.dtd">  <catalog>     <product description="Cardigan Sweater">     <catalog_item gender="Men\'s">       <item_number>QWZ5671</item_number>       <price>39.95</price>       <size description="Medium">         <color_swatch image="red_cardigan.jpg">Red</color_swatch>         <color_swatch image="burgundy_cardigan.jpg">Burgundy</color_swatch>       </size>        <size description="Large">         <color_swatch image="red_cardigan.jpg">Red</color_swatch>          <color_swatch image="burgundy_cardigan.jpg">Burgundy</color_swatch>       </size>     </catalog_item>      <catalog_item gender="Women\'s">      <item_number>RRX9856</item_number>       <discount_until>Dec 25, 1995</discount_until>       <price>42.50</price>       <size description="Medium">          <color_swatch image="black_cardigan.jpg">Black</color_swatch>       </size>      </catalog_item>    </product>     <script type="text/javascript"><![CDATA[function matchwo(a,b) {      if (a < b && a < 0) { return 1; }       else { return 0; }    }]]></script>    </catalog>' 
```

输入：

```
doc2 = prsr.parseFromString(doc, 'application/xml') 
```

输出：

```
#document
<!DOCTYPE catalog SYSTEM "catalog.dtd">
<catalog>...</catalog> 
```

输入：

```
/*\
|*|
|*|  JXON Snippet #3 - Mozilla Developer Network
|*|
|*|  https://developer.mozilla.org/en-US/docs/JXON
|*|
\*/

function parseText (sValue) {
  if (/^\s*$/.test(sValue)) { return null; }
  if (/^(?:true|false)$/i.test(sValue)) { return sValue.toLowerCase() === "true"; }
  if (isFinite(sValue)) { return parseFloat(sValue); }
  if (isFinite(Date.parse(sValue))) { return new Date(sValue); }
  return sValue;
} 
```

输入：

```
function getJXONTree (oXMLParent) {
  var vResult = /* put here the default value for empty nodes! */ true, nLength = 0, sCollectedTxt = "";
  if (oXMLParent.hasAttributes()) {
    vResult = {};
    for (nLength; nLength < oXMLParent.attributes.length; nLength++) {
      oAttrib = oXMLParent.attributes.item(nLength);
      vResult["@" + oAttrib.name.toLowerCase()] = parseText(oAttrib.value.trim());
    }
  }
  if (oXMLParent.hasChildNodes()) {
    for (var oNode, sProp, vContent, nItem = 0; nItem < oXMLParent.childNodes.length; nItem++) {
      oNode = oXMLParent.childNodes.item(nItem);
      if (oNode.nodeType === 4) { sCollectedTxt += oNode.nodeValue; } /* nodeType is "CDATASection" (4) */
      else if (oNode.nodeType === 3) { sCollectedTxt += oNode.nodeValue.trim(); } /* nodeType is "Text" (3) */
      else if (oNode.nodeType === 1 && !oNode.prefix) { /* nodeType is "Element" (1) */
        if (nLength === 0) { vResult = {}; }
        sProp = oNode.nodeName.toLowerCase();
        vContent = getJXONTree(oNode);
        if (vResult.hasOwnProperty(sProp)) {
          if (vResult[sProp].constructor !== Array) { vResult[sProp] = [vResult[sProp]]; }
          vResult[sProp].push(vContent);
        } else { vResult[sProp] = vContent; nLength++; }
      }
    }
  }
  if (sCollectedTxt) { nLength > 0 ? vResult.keyValue = parseText(sCollectedTxt) : vResult = parseText(sCollectedTxt); }
  /* if (nLength > 0) { Object.freeze(vResult); } */
  return vResult;
} 
```

输入：

```
doc2.documentElement 
```

输出：

```
<catalog>​…​&lt;/catalog>​ 
```

输入：

```
myObject = getJXONTree(doc2.documentElement); 
```

输出：

```
myObject
Object {product: Object, script: Object}
product: Object
@description: "Cardigan Sweater"
catalog_item: Array[2]
__proto__: Object
script: Object
@type: "text/javascript"
keyValue: "function matchwo(a,b) {      if (a < b && a < 0) { return 1; }       else { return 0; }    }"
__proto__: Object
__proto__: Object 
```

# java - Android下载系列文件不工作

> ID：15539633
> 
> 赞同：0
> 
> 时间：2013-03-21T04:40:27.253
> 
> 标签：java, android, android-layout, download, android-asynctask

我需要通过传递名称和 url 下载文件的功能，以便我可以在 android 应用程序中下载一系列文件。

所以继续创建这样的东西：

```
public void doDownload (String fileName, String url){
    File root = android.os.Environment.getExternalStorageDirectory();               
    File dir = new File (root.getAbsolutePath() + "/Content/"); 
    if(dir.exists()==false) {
        dir.mkdirs();
    }

    try{
        URL url = new URL(url);
        URLConnection connection = url.openConnection();
        connection.connect();
        // this will be useful so that you can show a typical 0-100% progress bar
        int fileLength = connection.getContentLength();
        Log.i("ANDRO_ASYNC", "Lenght of file: " + fileLength);

        // download the file
        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream(dir + fileName);   
        byte data[] = new byte[1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;

            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
    }catch(Exception e){
    }
} 
```

XML：添加权限

现在当我调用这个函数时：

```
doDownload(String img.png, String http://server.com); 
```

它不返回任何文件。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:53:26.423

另一种选择是使用下载管理器下载文件。您可以尝试使用下载管理器。请参阅 android 开发者网站。检查此链接：http: [//developer.android.com/reference/android/app/DownloadManager.html](http://developer.android.com/reference/android/app/DownloadManager.html)

# asp.net - 上传文件内容预览

> ID：15539634
> 
> 赞同：1
> 
> 时间：2013-03-21T04:40:32.900
> 
> 标签：asp.net

在我的 asp.net 网络应用程序中，我想要一个第三方文件内容预览工具，通过使用该工具，我将显示上传的文件（如 jpg 或 tiff 或 xls 或 pdf 或 txt 或 doc）

```
protected void btn_upload_Click(object sender, EventArgs e)
{
    try
    {
        if (flup_upload.HasFile)
        {
            _fname = flup_upload.FileName.Replace(" ", "");
            string ext = Path.GetExtension(_fname).ToLower();

            if (ext == ".jpg" || ext == ".jpeg" || ext == ".bmp")
            {
               ------
            }
            else if (ext == ".xls" || ext == ".xlsx")
            {
               -----
            }
            else if (ext == ".pdf")
            {
               -----
            }
            else if (ext == ".tif" || ext == ".tiff")
            {
                ---
            }
            else if (ext == ".txt")
            {
               ----
            }
            else if (ext == ".docx" || ext == ".doc")
            {
               -----
            }
        }
    }
    catch (Exception ex)
    {
    }
} 
```

即上传文件（如jpg/tiff/xls/pdf/txt/doc）后，我想在预览中显示文件数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:45:28.910

您也可以使用 ajaxcontroltoolkit 文件上传器来执行此操作；

```
<td>
     <asp:Label runat="server" ID="myThrobber" Style="display: none; color: black;">
       UpLoading....
    </asp:Label>
    <br />
    <Ajax:AsyncFileUpload ID="FileUploadGaurdianPic" runat="server" ThrobberID="myThrobber"
      MaximumNumberOfFiles="1"
        OnClientUploadComplete="uploadComplete" OnUploadedComplete="FileUploadGaurdianPic_UploadedComplete" Style="margin-left: 0px" />
     <asp:Image runat="server" ID="imageGaurdainTemp" /> // temp image to show
                </td> 
```

我们有`OnUploadedComplete`事件，它是 javascript 文件的函数名。还有用于服务器端处理的 Uploaded_Complete 事件；

```
protected void FileUploadGaurdianPic_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    // storing the file path in session, in-order to get this in futrue and isnert it into the database. note that i am only getting the path here;
    Session["GuardianPic"] = "/Resources/Images/guardian/" + e.FileName;
    SaveImage(e.FileName, FileUploadGaurdianPic, 2);
}
// here i am generating the thumbnail,and i am uploading the orignal image to the temp path, if you don't need this, remove it. I am only saving the thumbnail to the orignal path;
private void SaveImage(string FileName, AjaxControlToolkit.AsyncFileUpload uploader, int status)
{
    string path = String.Empty;
    switch (status)
    {
        case 1:
            path = Server.MapPath("~/Resources/Images/Student/");
            break;
        case 2:
            path = Server.MapPath("~/Resources/Images/guardian/");
            break;
    }

    string name = String.Empty;
    string storedPath = String.Empty;

    int intThumbWidth = 100;
    int intThumbHeight = 100;
    // Check whether the file is really a JPEG by opening it
    System.Drawing.Image.GetThumbnailImageAbort myCallBack =
                   new System.Drawing.Image.GetThumbnailImageAbort(ThumbnailCallback);

    //Create Thumbnail
    Bitmap myBitmap = myBitmap = new Bitmap(uploader.PostedFile.InputStream); ;

    Bitmap map = new Bitmap(uploader.FileContent);
    // Save Thumbnail and Assign it to ThumbUrl out parameter
    System.Drawing.Image myThumbnail = myBitmap.GetThumbnailImage(intThumbWidth,
                                         intThumbHeight, myCallBack, IntPtr.Zero);
    try
    {
        string tempPath = Server.MapPath("/Resources/Images/temp/");
        if (!Directory.Exists(tempPath))
        {
            Directory.CreateDirectory(tempPath);
        }
        if (Directory.Exists(path))
        {
            name = Path.GetFileName(FileName);
            storedPath = path + name;
            myThumbnail.Save(storedPath);
            uploader.SaveAs(tempPath + name);
        }
        else
        {
            Directory.CreateDirectory(path);
            name = Path.GetFileName(FileName);
            storedPath = path + name;
            myThumbnail.Save(storedPath);
            uploader.SaveAs(tempPath + name);
        }
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

最后，将显示图像的 javascript 函数；

```
function uploadComplete(sender, args) {
    var imgDisplay = $get("imageGaurdainTemp");
    var img = new Image();
    img.onload = function () {
        imgDisplay.style.cssText = "height:100px;width:100px";
        imgDisplay.src = img.src;
    };
    img.src = "/Resources/Images/guardian/" + args.get_fileName();

} 
```

我希望这会有所帮助：D

# ruby - 将长 ruby 字符串拆分为多行（字符串中没有 LF 或 CR）

> ID：15539636
> 
> 赞同：0
> 
> 时间：2013-03-21T04:40:36.643
> 
> 标签：ruby, syntax

如何在 Ruby 中将长字符串拆分为多行？

我有一些长字符串：

```
`This is a long and awesome command!` 
```

我怎么能写成两行？请注意，字符串中没有 CR 或 LF。

谢谢！

# shell - 使用 Makefile 编译多个程序

> ID：15539637
> 
> 赞同：0
> 
> 时间：2013-03-21T04:40:50.743
> 
> 标签：shell, unix, cuda, makefile, mpi

我必须使用 4 个不同的 cpp 文件并包括一个 cuda 文件来编译三个单独的程序。

文件是：

```
final_serial.cpp
final_mpi.cpp
final_mpicuda.cpp and final_cuda.cu 
```

final_mpicuda.cpp 和 final_cuda.cu 必须链接在一起。

我当前的 Makefile，只是为了编译前两个文件，serial 和 mpi，如下所示：

```
MPIDIR=/usr/lib64/mpich2/
CC=$(MPIDIR)/bin/mpic++
LIBS=-L$(MPIDIR)/lib -lmpl -lopa

all: serial mpi

mpi: final_mpi.cpp
    $(CC) $(LIBS) -o $@ $^

serial: final_serial.cpp
    g++ -o serial final_serial.cpp 
```

想法是，为了链接`final_mpicuda.cpp`在一起`final_cuda.cu`，我必须执行以下命令：

```
/usr/local/cuda-5.0/bin/nvcc --compiler-bindir /usr/local/gcc/bin -c final_cuda.cu -o cudacode.o
/usr/lib64/mpich2/bin/mpic++ -lmpl -lopa -c final_mpicuda.cpp -o mpicode.o
/usr/lib64/mpich2/bin/mpic++ -lmpl -lopa mpicode.o cudacode.o -L/usr/local/cuda-5.0/lib64 -lcudart -o cuda 
```

这会产生一个名为`cuda`. 所以，我的问题是，如何`cuda`使用上面提到的 Makefile 生成一个文件。我不知道如何将用于将这些文件链接在一起的三个命令合并到 Makefile 中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:59:35.940

试试这个：

```
mpicode.o: final_mpicuda.cpp
    $(CC) -lmpl -lopa -c $< -o $@

cudacode.o: final_cuda.cu
    /usr/local/cuda-5.0/bin/nvcc --compiler-bindir /usr/local/gcc/bin -c $< -o $@

cuda: mpicode.o cudacode.o
    $(CC) -lmpl -lopa $^ -L/usr/local/cuda-5.0/lib64 -lcudart -o $@ 
```

# javascript - 在 Bootstrap 中处理 javascript

> ID：15539644
> 
> 赞同：1
> 
> 时间：2013-03-21T04:41:32.583
> 
> 标签：javascript, html, css

我正在尝试使“弹出框”为 Bootstrap 工作。我相信我的代码是正确的，但我不确定 javascript 部分。以下是我脑海中包含的内容 - 导入 javascripts - 以及我的标签的外观。感谢您的帮助！

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
 <script src="js/bootstrap.js" type="text/javascript"></script> 
<script src="js/JSForFinal.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

在我的 JFForFinal.js 里面

```
 $("a[rel=popover]").popover('show'); 
```

我的身体标签内的标签如下所示：

```
 <a href="#" rel="popover" data-placement="right" data-original-title="popover on     
      right">Stuff</a> 
```

我觉得一切都是正确的，但是当我单击按钮时，什么都没有弹出。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:45:15.030

将您的 js 包装在 jquery 文档就绪的咒语中：

```
$(function() {
     $("a[rel=popover]").popover('show');
}); 
```

这是以下的简写：

```
$(document).ready(function() {
     $("a[rel=popover]").popover('show');
}); 
```

它告诉 jquery 推迟执行，直到文档准备好。

如果您想推迟执行直到单击按钮或其他内容，则：

```
$(function() {
     $('#buttonid').click(function() {
         $("a[rel=popover]").popover('show');
     });
}); 
```

# android - 空指针异常json解析url android

> ID：15539651
> 
> 赞同：0
> 
> 时间：2013-03-21T04:42:19.593
> 
> 标签：android, json, url

我正在尝试从 url 解析一个 json 条目。下面是代码段。

```
TextView txtViewParsedValue;
private JSONObject jsonObject;
private static String url = "https://www.dropbox.com/s/rhk01nqlyj5gixl/jsonparsing.txt?dl=1"; 
String strParsedValue = null;  
TextView txtViewParsedValue;
private JSONObject jsonObject;
private static String url = "https://www.dropbox.com/s/rhk01nqlyj5gixl/jsonparsing.txt?dl=1"; 
String strParsedValue = null;           

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    txtViewParsedValue = (TextView) findViewById(R.id.textview1);

    try {
        parseJSON();

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void parseJSON() throws JSONException
{       
    JSONParser jParser = new JSONParser();
    jsonObject = jParser.getJSONFromUrl(url);

    JSONObject object = jsonObject.getJSONObject("student");

    JSONArray subArray = object.getJS ONArray("student");

    for(int i=0; i<subArray.length(); i++)
    {
        strParsedValue+="\n"+subArray.getJSONObject(i).getString("id").toString();
    }

    txtViewParsedValue.setText(strParsedValue);
} 
```

我想提取学生的所有 id 并在 textview 中打印它们。它给出空指针异常。搜索了几个与此相关的帖子并尝试了它们，但没有奏效，任何指导都会有很大帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:45:38.773

`student`是`JsonArray`而不是，`JsonObject`但您正试图将其作为`JsonObject`. 将您的解析代码更改为：

```
JSONArray subArray =jsonObject.getJSONArray("student");//<<< get student JSONArray
for(int i=0; i<subArray.length(); i++)
  {
   strParsedValue+=
        "\n"+subArray.getJSONObject(i).getString("id").toString();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:46:20.350

不要使用 `JSONObject object = jsonObject.getJSONObject("student");`，因为根据您的 JSON**学生**是一个数组。

将其更改为

```
JSONArray subArray = jsonObject.getJSONArray("student"); 
```

# mongodb - 如何将 mongodb 导出的 powershell 命令行更改为 Powershell 脚本（用于计划任务）

> ID：15539652
> 
> 赞同：0
> 
> 时间：2013-03-21T04:42:31.143
> 
> 标签：mongodb, powershell

我不是编码员，但试图通过自己承担简单的任务来帮助我的开发团队，其中之一是设置 Windows 计划任务以通过 Powershell 导出 mongodb 的组件。在[http://docs.mongodb.org/manual/administration/import-export/](http://docs.mongodb.org/manual/administration/import-export/)的帮助和一些试验和错误（以及开发朋友的一些故障排除帮助）的帮助下，我已经能够编写一些 Powershell 命令在 Powershell 中手动执行时成功导出相关 Mongodb 集合的行：

```
cd c:\mongobinlocation

.\mongoexport --db db --collection collection1 --jsonArray --out "\\server\archivelocation\collection1.json"

.\mongoexport --db db --collection collection2 --jsonArray --out "\\server\archivelocation\collection2.json"

.\mongoexport --db db --collection collection3 --jsonArray --out "\\server\archivelocation\collection3.json" 
```

但是，然后我开始尝试设置计划任务以在 Powershell 中运行脚本（在此处使用说明：http: [//www.ilovepowershell.com/how-to-run-powershell-script-as-scheduled-task/](http://www.ilovepowershell.com/how-to-run-powershell-script-as-scheduled-task/) ) 并意识到我设置的 Powershell 命令行并不等同于可以在计划任务中运行的 Powershell 脚本。我正在寻找一个基本模板示例，我可以修改它以在上面插入我的命令行，但我没有运气——我看到的一切看起来都与我的小 ol' 命令行完全不同。有什么方法可以将上述命令包装成基本的东西，还是我必须从头开始学习如何编写 Powershell 脚本？

感谢您的所有帮助，感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:42:20.620

我根本没有使用过计划任务。我需要学习它们。因为我对调度任务一无所知，所以我将我的调度放在了我的 PowerShell 脚本中。

```
While($true){ #Easily replaced by a for-loop
    ... #your script
    Start-Sleep (60*60*24)
    #I prefer to use "timeout /t <seconds>"
} 
```

如果你把它扔在没有重新启动的服务器上，你就有一个简单的计划任务。如果您真的想学习，请查看使用 PowerShell 的工作流。

# android - 带有 SMTP 传输连接的 Android Oauth 异常，使用 android 版本 2.3

> ID：15539654
> 
> 赞同：8
> 
> 时间：2013-03-21T04:42:45.817
> 
> 标签：android, oauth, gmail, oauth-2.0

添加新的 AUTH XOAUTH2 命令后尝试运行我的 android 项目时出现以下错误。我正在使用 os 版本为 2.3 的 android 设备，但相同的代码在 android 4.0 上运行良好

```
 public SMTPTransport connectToSmtp(String host, int port, String userEmail,String oauthToken, boolean debug) throws Exception 
{

    Properties props = new Properties();
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.starttls.required", "true");
    props.put("mail.smtp.sasl.enable", "false");
    session = Session.getInstance(props);
    session.setDebug(debug);

    final URLName unusedUrlName = null;
    SMTPTransport transport = new SMTPTransport(session, unusedUrlName);
    // If the password is non-null, SMTP tries to do AUTH LOGIN.
    final String emptyPassword = null;
    transport.connect(host, port, userEmail, emptyPassword);

    byte[] response = String.format("user=%s\1auth=Bearer %s\1\1", userEmail,oauthToken).getBytes();
    response = BASE64EncoderStream.encode(response);

    transport.issueCommand("AUTH XOAUTH2 " + new String(response),235);

    return transport;
} 
```

请检查日志

```
03-21 10:05:08.679: W/System.err(987): javax.mail.MessagingException: 334 eyJzdGF0dXMiOiI0MDAiLCJzY2hlbWVzIjoiQmVhcmVyIiwic2NvcGUiOiJodHRwczovL21haWwuZ29vZ2xlLmNvbS8ifQ==
03-21 10:05:08.679: W/System.err(987):  at com.sun.mail.smtp.SMTPTransport.issueCommand(SMTPTransport.java:1481)
03-21 10:05:08.679: W/System.err(987):  at com.swapmeen.test.GMailOauthSender.connectToSmtp(GMailOauthSender.java:48)
03-21 10:05:08.679: W/System.err(987):  at com.swapmeen.test.GMailOauthSender.sendMail(GMailOauthSender.java:57)
03-21 10:05:08.679: W/System.err(987):  at com.swapmeen.test.MainActivity$1.run(MainActivity.java:64) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-19T19:02:07.793

您收到的错误

```
eyJzdGF0dXMiOiI0MDAiLCJzY2hlbWVzIjoiQmVhcmVyIiwic2NvcGUiOiJodHRwczovL21haWwuZ29vZ2xlLmNvbS8ifQ== 
```

使用 Base64 解码器解码为以下内容

```
{"status":"400","schemes":"Bearer","scope":"https://mail.google.com/"} 
```

这最终的含义（与消息一样神秘）是您使用的身份验证令牌已过期。您需要使其无效，然后获得一个新的（只需再次请求令牌）。

您像这样使令牌无效：

```
mAccountManager.invalidateAuthToken("com.google", mAuthenticationToken); 
```

我希望这会有所帮助:)

# html - 如何使 XML 中的 div 读取为 html？

> ID：15539659
> 
> 赞同：0
> 
> 时间：2013-03-21T04:43:11.020
> 
> 标签：html, css

我正在尝试将外部 API 生成的内容嵌入到网页中。我已经根据需要设置了输出样式，但我希望将其中一个 XML`div`读取为 HTML 以创建实时链接。现在，输出只显示带有`a`等的原始代码，而不是仅仅将锚点变成锚点。有没有我可以用来告诉浏览器`div`作为 HTML 的 CSS 元素？如果不是 CSS，我还能做些什么吗？

```
<style type="text/css">
.csl-entry {
    margin-bottom: 2em;
 }
.csl-block {
    margin-top: 1em;
    padding-left: 4em;
 }
  </style>

<p>
<font style="line-height:200%">
<?xml version="1.0"?>
<div class="csl-bib-body" style="line-height: 1.35; padding-left: 2em; text-indent:-2em;">
  <div class="csl-entry">Attridge, Derek, ed. <i>James Joyce&#x2019;s Ulysses: A Casebook</i>. Oxford University Press, USA, 2004.</div>
  <div class="csl-entry">Gifford, Don, and Robert J. Seidman. <i>Ulysses Annotated: Notes for James Joyce&#x2019;s Ulysses</i>. 2 Rev Enl. University of California Press, 2008.</div>
  <div class="csl-entry">Gilbert, Stuart. <i>James Joyce&#x2019;s Ulysses: A Study</i>. 2nd ed. Vintage, 1987\. &lt;a href=&#x201C;test&#x201D;&gt;TEST URL with HTML&lt;/a&gt;

    <div class="csl-block">&lt;a href=&#x201C;test&#x201D;&gt;TEST EXTRA WITH LINK&lt;/a&gt;.</div>
</div>
  <div class="csl-entry">Joyce, James. <i>Ulysses (Gabler Edition) 1st (first) Edition Text Only</i>, 1986.</div>
  <div class="csl-entry">Kenner, Hugh. <i>Ulysses</i>. Revised. The Johns Hopkins University Press, 1987.</div>
</div>
</font>
</p> 
```

# javascript - 如何使 Google Map API v3 中的 center_changed 监听器只触发一次？

> ID：15539662
> 
> 赞同：2
> 
> 时间：2013-03-21T04:43:28.493
> 
> 标签：javascript, google-maps-api-3

我目前正在使用 'center_changed',function() 作为侦听器来获取地图中心的纬度和经度，然后调用反向地理编码方法将纬度和经度转换为地址。但是，由于在拖动地图时 center_changed 不止一次触发，因此我从反向地理编码方法中收到提示消息“OVER_QUERY_LIMIT”。有没有办法让 center_changed 监听器只触发一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:59:56.727

使用 addLlistenerOnce 方法。

[文档中的事件描述](https://developers.google.com/maps/documentation/javascript/reference#MapsEventListener)

# sql - 如果所有行在按另一列分组后在列中具有某些值，则 Oracle SQL 查询返回行值

> ID：15539667
> 
> 赞同：0
> 
> 时间：2013-03-21T04:44:00.937
> 
> 标签：sql, oracle10g, group-by

我有一些看起来像这样的数据 -

```
ColA     ColB    ColC
ID1      1       '1-1'
ID2      1       '2-1'
ID2      0       '2-2'
ID3      1       '3-1'
ID3      1       '3-2 
```

我需要一个查询（对于 Oracle 10g），它按 ColA 的值对行进行分组，然后仅当组中的所有行的 ColB=1 时才返回连接的 ColC 的值。所以我想要给定数据的输出将是 -

```
"1-1"
"3-1,3-2" 
```

关于如何编写这样的查询有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:50:47.723

```
 SELECT colA, wm_concat(ColC)
    FROM table_name
   WHERE colB = 1
GROUP BY colA; 
```

**编辑**- 您也可以像这样使用 LISTAGG 聚合函数：

```
 SELECT colA, LISTAGG(colC, ',') WITHIN GROUP (ORDER BY ColC)
    FROM table_name
   WHERE colB = 1
GROUP BY colA; 
```

我建议使用 LISTAGG，因为它由 Oracle 记录，而 wm_concat 没有。

**编辑：**如果您不想显示像 ID2 这样的行，因为它有一行 ColB = 0，或者 colB ！= 1，您可以：

```
 SELECT colA, wm_concat(ColC)
    FROM table_name t1
   WHERE NOT EXISTS (SELECT 1
                       FROM table_name t2
                      WHERE colB != 1 -- Or, you can give colB = 0
                        AND t2.ColA = t1.ColA)
GROUP BY colA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:27:28.553

如果你正在使用`Oracle10g`那么

```
select o1 from (select wm_concat(c3) o1,wm_concat(c2) o2 from table group by c1)
where length(o2)-length(replace(o2,'0',''))=0 
```

为了`11g`

```
select o1 from (select listagg(c2,',') within group (order by c1) o2,
listagg(c3,',') within group (order by c1) o1 from table group by c1)
where length(o2)-length(replace(o2,'0',''))=0 
```

# c# - 在一个事件中想要创建一个图像并且在相同的功能中想要开始在该图像上拖动

> ID：15539668
> 
> 赞同：0
> 
> 时间：2013-03-21T04:44:04.710
> 
> 标签：c#, windows-phone-7

我在 XAML 中有一个 imagecanvas。

```
 <Canvas Name="imgCanvas" >
                <Canvas.RenderTransform>
                    <CompositeTransform TranslateX="0" TranslateY="0" CenterX="0" CenterY="0"></CompositeTransform>
                </Canvas.RenderTransform>

            </Canvas> 
```

在类构造函数中，我将拖动事件添加到此画布

```
 g = GestureService.GetGestureListener(imgCanvas);
            g.DragStarted += new EventHandler<DragStartedGestureEventArgs>(g_DragStarted);
            g.DragDelta += new EventHandler<DragDeltaGestureEventArgs>(g_DragDelta);
            g.DragCompleted += new EventHandler<DragCompletedGestureEventArgs>(g_DragCompleted); 
```

现在在 1 次点击功能中，我正在动态创建图像，并添加为画布的子项

当点击事件完成时，我可以拖动该图像。

有什么办法可以让我使用保持类型功能..而不是使用点击，我可以使用保持和保持功能，而无需抬起鼠标，我可以拖动它。

我也尝试了 mouseleftbuttondown 和 mousemove 事件....但是在鼠标移动功能中我无法拖动它。

```
Ct.translateX+=e.GetPosition(layoutGrid).X;//not working

Ct.translateY+=e.GetPosition(layoutGrid).Y; 
```

请以任何方式向我建议，以便我可以将图像添加到画布并能够一键拖动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:13:19.367

You won't be able to do this in a single event as there are two very distinct actions you want to detect and respond to.

Firstly, don't use the Gestures from the Toolkit. They are deprecated and have performance/memory issues.

You should be able to do this with the mouse events. What you'll need to do:
- After mousedown, as long as there is very little movement and no mouse up in a short period, create the image.
- After the image is created, respond to mousemove events by updating the position of the image until there is a mouse up.

There are likely to be lots of fun edge cases to handle but I'm sure you'll find them. ;)

# ios - 在 iOS 中禁用按钮

> ID：15539671
> 
> 赞同：11
> 
> 时间：2013-03-21T04:44:22.800
> 
> 标签：ios, uibutton

如果字典中不存在该键，我需要禁用一个按钮。我使用了 UIButton 的 setEnabled 功能，但仍显示已设置为默认值的图像。

代码如下所示：

```
if([self.InfoDictionary objectForKey:ButtonExist])
{
    [button1 setEnabled:YES];
}
else
{
    [button1 setEnabled:NO];
} 
```

当我在模拟器中运行时，图像仍然出现。在这方面需要一些指导。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T04:52:22.537

`enable = YES`button 的属性在单击时执行操作。

`enable = NO`属性防止在单击时执行操作。

如果要隐藏按钮，则可以将`hidden`属性设置为`YES`，反之亦然。隐藏的其他方法是将`alpha`属性设置为`0`（不可见）或`1`（可见）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T04:46:26.607

你也可以设置`userInteractionEnabled`属性`UIButton`

```
 if([self.InfoDictionary objectForKey:ButtonExist])
    {
        [button1 setEnabled:YES];
        button1.userInteractionEnabled = YES;
    }
    else
    {
        [button1 setEnabled:NO];
        button1.userInteractionEnabled = NO;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T04:46:18.780

采用 ：

```
if([self.InfoDictionary objectForKey:ButtonExist])
{
    [button1 setHidden:YES];
}
else
{
    [button1 setHidden:NO];
} 
```

如果要隐藏 UIButton 的 UIImage 则：

```
if([self.InfoDictionary objectForKey:ButtonExist])
    {
        [button1 setBackgroundImage:[UIImage imageNamed:@"YOUR IMAGE"] forState:UIControlStateNormal];
    }
    else
    {
        [button1 setBackgroundImage:[UIImage imageNamed:@""] forState:UIControlStateNormal];
    } 
```

希望这会帮助你。祝一切顺利 ！！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-24T12:45:27.680

在 swift3 中：

```
self.button.isEnabled = false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-10T14:49:24.770

我自己也遇到了这个。问题是我无意中启用了手势处理程序中的按钮以进行点击！

寻找这样的副作用。

# sql - 尝试在查询中搜索带有或不带有破折号的字段？

> ID：15539672
> 
> 赞同：2
> 
> 时间：2013-03-21T04:44:27.510
> 
> 标签：sql, sql-server, sql-server-2008, ms-access

我有一个表（table.foo），我试图在其中搜索特定字段。我有一个使用 SQL 查询输出结果的 MS Access 表单。我有一个用户希望能够搜索此字段

如果我使用简单的选择查询

```
SELECT foo FROM table
WHERE foo LIKE '%xyz%' 
```

我会得到任何带有 xyz 的字符串，但是如果用户搜索 x-yz，他们显然不会得到任何记录`where table.foo='xyz'` 。无论搜索字符串中是否存在破折号，我将如何构建查询以返回结果？

我知道我可以复制 table.foo 列并创建一个 table.foo-search 列并从新字段中删除破折号，但这似乎会浪费空间可能不必要，而且需要在数据库中维护第二列.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:57:16.437

干得好：

```
select foo from table
where REPLACE ( REPLACE ( foo, '-', '' ) , ' ', '' ) like '%xyz%' 
```

输出：`x-yz`

## [现场演示](http://www.sqlfiddle.com/#!3/f679e0/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T03:02:24.240

以下对我有用。

```
SELECT Replace([fieldname],"-","") AS Expr1
FROM tablename
WHERE (((Replace([fieldname],"-","")) Like "%xyz%")); 
```

# java - Android - 锁定所有其他应用程序

> ID：15539673
> 
> 赞同：1
> 
> 时间：2013-03-21T04:44:28.947
> 
> 标签：java, android, kiosk, kiosk-mode, lockdown

我目前正在创建一个应用程序，要求您指定锁定该应用程序的时间量。基本上，它会在用户指定的时间内禁用所有其他功能（通知、主页、返回、长按等）。我相信这被称为 Kiosk 模式。

是否可以使用 Android SDK 做这样的事情？如果是这样，如何实现？

在此先感谢，~ Pkmmte Xeleon

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:58:47.980

是的，你可以这么做。不幸的是 SDK 不会提供太多帮助，所以你必须手动调整。后台服务将杀死除您的应用程序之外的所有正在运行的进程。您可以禁用主页键。我不记得确切的方法名称，所以搜索它。用于禁用覆盖 keyDown()/onBackPress()。

# ruby - 如何撤消使我的 Rails 应用程序混乱的 gem 安装？

> ID：15539674
> 
> 赞同：1
> 
> 时间：2013-03-21T04:44:30.453
> 
> 标签：ruby, ruby-on-rails-3, rubygems

我安装了一个 gem 以使我的 URL 不区分大小写，但我看到很多断开的链接。我宁愿撤消我所做的安装，而不是尝试修复它们。

如果我跑了`gem uninstall gemname`，那会让我的 Rails 应用程序恢复到以前的状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:46:57.090

您还需要从`Gemfile`. 还要检查你`Gemfile.lock`的 gem 有哪些依赖项。

当然，如果您在应用程序的任何地方引用了 gem，您也需要删除这些引用。

# html - CSS定位根据大小不同

> ID：15539676
> 
> 赞同：1
> 
> 时间：2013-03-21T04:44:42.417
> 
> 标签：html, css, position

`relative`我在&定位上犯了错误，`absolute`但我不知道如何清除它，我尝试更改`widht:auto`& `100%`，但没有任何效果。在给定宽度时`%`，`div`最小化时崩溃。

现在页面没有放在笔记本电脑的中间（其他屏幕分辨率）。我的代码有什么问题。

html

```
[complete source][1] http://jsfiddle.net/X5RDL/ 
```

css

```
h1 {
    color: #fff;
        font-weight: normal;    
}
body {
    margin: 0px 10px 10px 10px;
    background: #C5DA99 url(images/img01.jpg) repeat;
    color: #787878;
        position:absolute;  
        font:15px Georgia, "Times New Roman", Times, serif; 
}
#header {
    width: auto;
    height: 100px;
        margin:15px 05px ;
    padding: 0px 50px;
    background: url(images/img02.jpg) repeat;
        position:relative;
}
#logo {
    float: right;
    width: 300px;
    margin: 0;
    padding: 13px;
    color: #FFFFFF;          
}
#menu {
    padding:30px 10px 0 30px;
         position:absolute;    
}
#menu li {
    display: inline;
      -moz-border-radius-topleft: 12px; 
      -webkit-border-top-left-radius:12px;

}
#menu li a {
    text-decoration: none;
        float:left;
        width:;
        height:20px;
    padding: 10px;
    color: black;
        font:14px Georgia, "Times New Roman", Times, serif;    
}

#menu li a:hover {
    margin-top:;
       color:#FFF;
    padding-bottom:12px; 
  text-shadow:5px 5px 5px white;
background:url(images/vline.jpg) no-repeat bottom
}

#contentbg
    {
        width:1004px;
        float:left;
            background: #FFFFFF;
    }   
#content 
      {
              padding:;
      }     
/*  contentleft  */
#contentleft
      {
        width:190px;
        float: left;
        margin:0px;
        padding:34px 0 33px 23px;
      }
/*   content middle */
#contentmid
    {
        width:500px;
        float:left;
        margin:0px;
        padding:34px 5px 33px 15px;
        background-image:url(images/vline.jpg);
        background-repeat:repeat-y; 
    }
/* content Right */
#contentright
    {
        width:240px;
        float: right;
        padding:34px 0 40px 12px;
        background-image:url(images/vline.jpg);
        background-repeat:repeat-y;
    }
/* login box */
#loginPan form
         {
               padding:5px;
               width:200px; 
               height:188px; 
              background:#FCF6E6; 
              color:#705D20; 
              position:relative; 
              border:1px dashed #BFB492; 
         }
#loginPan form label
         {
              width:91px; 
              height:22px; 
             display:block; 
             float:left;  
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:47:46.947

具有相对定位的页面元素使您可以控制在其中绝对定位子元素。

![在此处输入图像描述](../Images/91c50ac616459922038c1de72bcaf0e9.png)

**[更多关于这个](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)**

**[有关此链接的更多信息 2](http://css.flepstudio.org/en/css-properties/position-static-absolute-relative-static.html)**

# iphone - 动态插入更多 UITextFields

> ID：15539690
> 
> 赞同：0
> 
> 时间：2013-03-21T04:45:45.047
> 
> 标签：iphone, ios, cocoa-touch, uiscrollview

我有一个附加屏幕截图中描述的要求。单击蓝色添加按钮时，`UItextfield`必须在最后一个文本字段和 textview 之间再插入一个，并且必须在动态插入的新 uitextfield 旁边出现蓝色添加按钮。任何人都可以建议如何实现这一目标。我已将所有字段放在`UIScrollview`.

![在此处输入图像描述](../Images/252229c8bf508bee914a8b4db1a65a19.png)

滚动视图未启用：

![在此处输入图像描述](../Images/db1ea0bd19159fcb29deef137061330d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T04:52:19.037

你可以这样做：

在 .h 中，我有一个名为的插座`previousTextField`，它连接到第一个插座。顾名思义，它将存储最新添加的文本字段。

在这里找到正在运行的[项目](http://www.keepandshare.com/doc/6029739/dynamicallyadduitextfield-34k?da=y)。

```
-(IBAction)addTextField:(id)sender{
    float x=previousTextField.frame.origin.x;
    float y=previousTextField.frame.origin.y+50;//get y from previous textField and add 10 or so in it.
    float w=previousTextField.frame.size.width;
    float h=previousTextField.frame.size.height;
    CGRect frame=CGRectMake(x,y,w,h);
    UITextField *textField=[[UITextField alloc] initWithFrame:frame];
    textField.placeholder = @"Enter User Name or Email";

    textField.borderStyle = UITextBorderStyleRoundedRect;
    textField.font = [UIFont systemFontOfSize:15];
    textField.autocorrectionType = UITextAutocorrectionTypeNo;
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDone;
    textField.clearButtonMode = UITextFieldViewModeWhileEditing;

    [self.view addSubview:textField];
    previousTextField=textField;
} 
```

~~*只是一个想法/算法如何使用，而不是编译器检查*~~

~~我错过了事情，改变了`+`按钮的位置。我认为你可以做到:)~~

**编辑：在上述方法中添加以下内容**

```
//move addbutton which is an outlet to the button
CGRect frameButton=CGRectMake(addButton.frame.origin.x, addButton.frame.origin.y+50, addButton.frame.size.width, addButton.frame.size.height);
[addButton removeFromSuperview];
[addButton setFrame:frameButton];
[self.view addSubview:addButton]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:53:07.273

在添加按钮上，在子视图中添加一个 textfeild 并给 textfeild 一个唯一的标签，这样它可以帮助您区分所有 textfeilds。对于设置框架，请参考您最后一个 textfeild 框架并相应地设置 y 坐标。

```
UITextField *textField = [[UITextField alloc] initWithFrame:yourFrame];
textField.delegate = self;
textField.tag=yourtag;
[scrollview addSubview:textField];
[textField release];//if arc is disable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:53:30.137

首先获取 UItextField 的框架。现在增加前一个 textFeild 的 yPos 和 UITetField 的新位置。并重新安排低于该 textField 的 UITextField 只需增加每个 TextField 的 yPos 。

希望这会帮助你。

祝一切顺利！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:54:32.640

查看我的代码的输出.. ![在此处输入图像描述](../Images/f1343677fbf8486efcb09a569e361046.png)

您可以使用以下代码...我已经完成了它并且它正在按照您的屏幕截图运行..在您的 .h 文件中只需声明此变量

```
 int newY,newY1;
      UIButton *btn; 
```

然后在 viewDidLoad 方法中的 .m 文件添加以下代码

```
 UITextField *txt=[[UITextField alloc]init];
   txt.frame=CGRectMake(50,30,140,30);
   txt.placeholder = @"Enter User Name or Email";
   txt.borderStyle = UITextBorderStyleRoundedRect;

   [self.view addSubview:txt];
   newY=txt.frame.origin.y;
   btn=[UIButton buttonWithType:UIButtonTypeContactAdd];
   btn.frame=CGRectMake(250,30, 30, 30);
   [btn addTarget:self action:@selector(addtxtField) forControlEvents:UIControlEventTouchUpInside];
   [self.view addSubview:btn]; 
```

& 然后创建一个 addtxtField 方法..见下文

```
 -(void)addtxtField
{
newY=newY+50;

UITextField *nwtxt=[[UITextField alloc]init];
nwtxt.frame=CGRectMake(50,newY,140,30);
nwtxt.placeholder = @"Enter User Name or Email";
nwtxt.borderStyle = UITextBorderStyleRoundedRect;
[self.view addSubview:nwtxt];

btn.frame=CGRectMake(250,newY, 30, 30);
[self.view addSubview:btn]; 
```

}

它根据您的要求 100% 运行...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T06:01:10.720

![输出](../Images/82e36acce3546b043249ad051a1063a9.png)

试试这个 ：：

在 .h 文件中

```
@property(nonatomic, retain) IBOutlet UIScrollView *scr;
@property(nonatomic, retain) IBOutlet UITextField *txt;
@property(nonatomic, retain) IBOutlet UITextView *txtVw;
@property(nonatomic, retain) IBOutlet UIButton *btn;

-(IBAction)click:(id)sender; 
```

在 .m 文件中

```
int cnt;

float x = 0.0, y = 0.0, w = 0.0, h = 0.0;

- (void)viewDidLoad
{
    [super viewDidLoad];

    scr.delegate = self;
    scr.contentSize = CGSizeMake(0, 400);

    cnt = 0;
}

-(IBAction)click:(id)sender
{
    if (cnt == 0) {
       x=txt.frame.origin.x;
       y=txt.frame.origin.y + 50;//get y from previous textField and add 10 or so in it.
       w=txt.frame.size.width;
       h=txt.frame.size.height;
    }
    else
    {
       y+=50;
    }

    UITextField *textField=[[UITextField alloc] initWithFrame:CGRectMake(x, y, w, h)];
    textField.borderStyle = UITextBorderStyleRoundedRect;
    textField.placeholder = @"Enter User Name or Email";

    [scr addSubview:textField];

    [btn setFrame:CGRectMake(248, y, 30, 30)];

    float y1 = y + 100;
    [txtVw setFrame:CGRectMake(orign_x, y1, origin_w, origin_h)];

    cnt++;
} 
```

希望，它肯定会帮助你。

谢谢。

# c++ - 在多级继承中从中间类调用派生类函数而不将其标记为虚拟

> ID：15539691
> 
> 赞同：2
> 
> 时间：2013-03-21T04:46:05.017
> 
> 标签：c++, inheritance, virtual

我认为这可能是一个重复的问题，但我尝试阅读几乎所有相关的帖子，但没有一个是针对我正在寻找的内容。

好的，所以我知道你不能从基类指针调用派生类中的函数，除非它被标记为虚拟。与参考程序 1 一样，如果未将 WhichClass() 标记为虚拟，则它无法调用 B 类的 WhichClass()。

```
#include<iostream>
using namespace std;
class A
{
  public:
  const char* WhichClass(){return "A";}
};
class B:public A
{
  public:
  const char* WhichClass(){return "B";}
};

int main()
{
  B b;
  A &a = b;
  cout<<"In class "<<a.WhichClass();
  return 0;
} 
```

如果我将它标记为虚拟，那么它会从基类调用最派生类的函数。现在假设如果我添加另一个继承自 B 的 C 类（如程序 2 所示），并且如果在 B 类中未将WhichClass() 标记为虚拟，那么基引用（&a）如何调用 C 类中的 WhichClass() 函数? 同样对于 B 类引用 (&b)，如果根据我们在程序 1 中观察到的在 B 类中甚至没有将其标记为虚拟，它如何在 C 中调用 WhichClass()？

```
#include<iostream>
using namespace std;
class A
{
  public:
  virtual const char* WhichClass(){return "A";}
};
class B:public A 
{
  public:
  const char* WhichClass(){return "B";}
};
class C:public B
{
  public:
  const char* WhichClass() { return "C";}
};
int main()
{
  C c;
  A &a = c;
  B &b = c;

  cout<<"In class " << a.WhichClass() << endl;
  cout<<"In class " << b.WhichClass() << endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:57:38.137

因为当您在基类中将方法设为虚拟并创建指向任何派生类的基类指针时，在这种情况下，它会调用最派生类的函数。在你的情况下，你有，

```
A &a = c; 
```

这里基类 A 的指针指向类 C，因此当您调用 WhichClass() 方法时，将调用类 C 的方法。

```
B &b = c; 
```

即使在这里，当您使用基类指针调用函数时，大多数派生类的函数都会根据您指向的类来调用。在这种情况下，B 类的指针指向 C 类的对象，因此将调用 C 类的 WhichClass() 方法。有关更多详细信息，请检查此，[多态性](http://www.tutorialspoint.com/cplusplus/cpp_polymorphism.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T05:25:02.177

1.  在类链中，如果您在基类中声明某个函数，则`virtual`所有具有相同定义的波纹管级派生类函数将自动为`virtual`.
2.  这个功能选择背后的场景根据覆盖，由概念调用完成`virtual table`。因此，如果您对此感到好奇，请阅读[此处](http://www.learncpp.com/cpp-tutorial/125-the-virtual-table/)
3.  In C++ 11 you can use `final` keyword to stop overriding at some level. (eg: if you want to avoid class 'C' to override class 'B's `WhichClass` function). check [here](http://en.cppreference.com/w/cpp/language/final)

# java - 检查文件是否为有效的 jpg

> ID：15539696
> 
> 赞同：12
> 
> 时间：2013-03-21T04:46:14.860
> 
> 标签：java

我想检查我从目录中读取的文件是否是 jpg，但我不想简单地检查扩展名。我在想另一种方法是阅读标题。我做了一些研究，我想使用

```
ImageIO.read 
```

我看过这个例子

```
String directory="/directory";     

BufferedImage img = null;
try {
   img = ImageIO.read(new File(directory));
} catch (IOException e) {
   //it is not a jpg file
} 
```

我不确定从这里去哪里，它包含整个目录......但我需要目录中的每个 jpg 文件。有人可以告诉我我的代码有什么问题或需要添加哪些内容吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T04:57:35.827

您可以读取存储在缓冲图像中的第一个字节。这将为您提供确切的文件类型

```
Example for GIF it will be
GIF87a or GIF89a 

For JPEG 
image files begin with FF D8 and end with FF D9 
```

[http://en.wikipedia.org/wiki/Magic_number_（编程）](http://en.wikipedia.org/wiki/Magic_number_(programming))

试试这个

```
 Boolean status = isJPEG(new File("C:\\Users\\Public\\Pictures\\Sample Pictures\\Chrysanthemum.jpg"));
System.out.println("Status: " + status);

private static Boolean isJPEG(File filename) throws Exception {
    DataInputStream ins = new DataInputStream(new BufferedInputStream(new FileInputStream(filename)));
    try {
        if (ins.readInt() == 0xffd8ffe0) {
            return true;
        } else {
            return false;

        }
    } finally {
        ins.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T04:51:19.927

您需要让阅读器习惯于阅读格式并检查给定文件是否没有可用的阅读器...

```
String fileName = "Your image file to be read";
ImageInputStream iis = ImageIO.createImageInputStream(new File(fileName ));
Iterator<ImageReader> readers = ImageIO.getImageReadersByFormatName("jpg");
boolean canRead = false;
while (readers.hasNext()) {
    try {        
        ImageReader reader = readers.next();
        reader.setInput(iis);
        reader.read(0);
        canRead = true;
        break;
    } catch (IOException exp) {
    }        
} 
```

现在基本上，如果没有一个读者可以阅读该文件，那么它就不是 Jpeg

**警告**

这仅在有可用于给定文件格式的阅读器时才有效。它可能仍然是 Jpeg，但没有适用于给定格式的阅读器...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-11T08:04:06.967

改进@karthick 给出的答案，您可以执行以下操作：

```
private static Boolean isJPEG(File filename) throws IOException {
    try (DataInputStream ins = new DataInputStream(new BufferedInputStream(new FileInputStream(filename)))) {
        return ins.readInt() == 0xffd8ffe0;
    }
} 
```

# javascript - 画布：在“setInterval”中添加 canvas.width 不起作用

> ID：15539697
> 
> 赞同：0
> 
> 时间：2013-03-21T04:46:17.393
> 
> 标签：javascript, jquery, canvas, setinterval

这是我的代码：

```
var text = "3141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587006606315588174881520920962829254091715364367892590360011330530548820466521384146951941511609433057270365759591953092186117381932611793105118548074462379962749567351885752724891227938183011949129833673362440656643086021394946395224737190702179860943702770539217176293176752384674818467669405132000568127145263560827785771342757789609173637178721468440901224953430146549585371050792279689258923542019956112129021960864034418159813629774771309960518707211349999998372978049951059731732816096318595024459455346908302642522308253344685035261931188171010003137838752886587533208381420617177669147303598253490428755468731159562863882353787593751957781857780532171226806613001927876611195909216420198938095257201065485863278865936153381827968230301952035301852968995773622599413891249721775283479131515574857242454150695950829533116861727855889075098381754637464939319255060400927701671139009848824012858361603563707660104710181942955596198946767837449448255379774726847104047534646208046684259069491293313677028989152104752162056966024058038150193511253382430035587640247496473263914199272604269922796782354781636009341721641219924586315030286182974555706749838505494588586926995690927210797509302955321165344987202755960236480665499119881834797753566369807426542527862551818417574672890977772793800081647060016145249192173217214772350141441973568548161361157352552133475741849468438523323907394143334547762416862518983569485562099219222184272550254256887671790494601653466804988627232791786085784383827967976681454100953883786360950680064225125205117392984896084128488626945604241965285022210661186306744278622039194945047123713786960956364371917287467764657573962413890865832645995813390478027590099465764078951269468398352595709825822620522489407726719478268482601476990902640136394437455305068203496252451749399651431429809190659250937221696461515709858387410597885959772975498930161753928468138268683868942774155991855925245953959431049972524680845987273644695848653836736222626099124608051243884390451244136549762780797715691435997700129616089441694868555848406353422072225828488648158456028506016842739452267467678895252138522549954666727823986456596116354886230577456498035593634568174324112515076069479451096596094025228879710893145669136867228748940560101503308617928680920874760917824938589009714909675985261365549781893129784821682998948722658804857564014270477555132379641451523746234364542858444795265867821051141354735739523113427166102135969536231442952484937187110145765403590279934403742007310578539062198387447808478489683321445713868751943506430218453191048481005370614680674919278191197939952061419663428754440643745123718192179998391015919561814675142691239748940907186494231961567945208095146550225231603881930142093762137855956638937787083039069792077346722182562599661501421503068038447734549202605414665925201497442";
var pi = [];
pi = text.split('');
$('document').ready(function () {
    canvas = document.createElement("canvas");
    canvas.width = 15;
    canvas.height = 100;
    canvas.style.position = 'absolute';
    canvas.style.border = '1px solid';
    canvas.border = 'solid 1px';
    canvas.style.top = '0px';
    canvas.style.left = '0px';
    document.body.appendChild(canvas);
    ctx = canvas.getContext("2d");
    draw();
});

function draw() {
    var i = 0;
    setInterval(function () {
        if(i < 50) {
            ctx.beginPath();
            ctx.moveTo(15 * i, 100 - pi[i] * 10);
            ctx.lineTo(15 * (i + 1), 100 - pi[i + 1] * 10);
            ctx.stroke();
            i++;
            canvas.width += 15;
            //console.log(i);
        };
    }, 100)
} 
```

如果我注释掉它完全有效

```
canvas.width += 15; 
```

如果我把它放在那里，`canvas.width`确实会增加，但线条不会出现。

任何人都可以帮忙吗？非常感谢。

通过将宽度放在行前解决了问题。

# 但这是我的进一步问题：如何连续画线？现在旧的在新的之后消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:54:17.797

问题是更改画布宽度会重置画布状态，包括当前在其上绘制的内容。如果在创建线条之前增加宽度，这两个事件都会按预期发生。

为了在画布状态重置后保留之前的路径，您可以创建一个临时画布来保存内容，然后在调整宽度后移回。

```
function draw() {
    var i=0;
    setInterval(function() {
        if (i<50) {
            // Create a temporary canvas
            var temp_canvas = document.createElement("canvas");
            var temp_ctx = temp_canvas.getContext("2d");

            // Update the temporary canvas width (will reset temporary canvas state) and draw original canvas back in
            temp_canvas.width = canvas.width + 15; 
            temp_canvas.height = canvas.height;
            temp_ctx.drawImage(canvas, 0, 0);

            // Draw temporary canvas back into original canvas
            canvas.width = temp_canvas.width; 
            canvas.height = temp_canvas.height;
            ctx.drawImage(temp_canvas, 0, 0);

            // Draw in new path
            ctx.beginPath();
            ctx.moveTo(15*i, 100-pi[i]*10);
            ctx.lineTo(15*(i+1), 100-pi[i+1]*10);
            ctx.closePath();
            ctx.stroke();

            i++;

            //console.log(i);
        }
    }, 100);
} 
```

**[演示](http://jsfiddle.net/nmPdU/3/)**

# asp.net-mvc-3 - 如何在 mvc 3 中使用 ajax 上传图像和视频

> ID：15539699
> 
> 赞同：0
> 
> 时间：2013-03-21T04:46:19.647
> 
> 标签：asp.net-mvc-3, image, video, upload

如何使用ajax同时保存图像和视频以及数据的其他细节？谢谢你。

# ruby - 自己做什么。在类方法中是什么意思？

> ID：15539703
> 
> 赞同：1
> 
> 时间：2013-03-21T04:46:29.867
> 
> 标签：ruby

在 Programming Ruby 中，我看到一个类方法被定义为

```
class File
  def self.my_open(*args)
  #...
  end
end 
```

前缀“自我”是什么意思？是这里的意思吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:03:15.570

使用语法，您可以在*特定对象*`def receiver.method`上定义方法。

 *```
class Dog
  def bark
    puts 'woof'
  end
end

normal_dog = Dog.new
angry_dog = Dog.new

def angry_dog.bite
  puts "yum"
end

normal_dog.class # => Dog
angry_dog.class # => Dog

angry_dog.bite # >> yum
normal_dog.bite # ~> -:15:in `<main>': undefined method `bite' for #<Dog:0x007f9a93064cf0> (NoMethodError) 
```

请注意，即使狗属于同一类`Dog`，其中一只狗也有另一只狗没有的独特方法。

与类相同。在类定义内部，`self`指向该类。这对理解至关重要。

```
class Foo
  self # => Foo
end 
```

现在让我们看看这两个类：

```
class Foo
  def self.hello
    "hello from Foo"
  end
end

class Bar
end

Foo.class # => Class
Bar.class # => Class

Foo.hello # => "hello from Foo"
Bar.hello # ~> -:15:in `<main>': undefined method `hello' for Bar:Class (NoMethodError) 
```

尽管两者`Foo`和`Bar`都是class 的**实例**（对象）`Class`，但其中一个具有另一个没有的方法。一样的东西。

如果你省略了`self`in 方法定义，那么它就变成了*实例方法*，它将在类的*实例*上可用，而不是在类本身上可用。请参阅`Dog#bark`第一个片段中的定​​义。

为了结束，这里有几个方法可以定义类实例方法：

```
class Foo
  def self.hello1
    "hello1"
  end

  def Foo.hello2
    "hello2"
  end
end

def Foo.hello3
  "hello3"
end

Foo.hello1 # => "hello1"
Foo.hello2 # => "hello2"
Foo.hello3 # => "hello3" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T09:43:30.633

塞尔吉奥很好地解释了它。我想我会通过让新手更简单（非常尊重）来添加它 - 他们可能难以理解上述答案。

**(1) 什么是方法？**

想想一个人。人可以做某些动作。例如，我们可以走路、说话、开车、喝大量的酒等。这些类型的动作被称为：“方法”。

**(2) 有些方法只能由某些人执行**

例如，只有老虎伍兹可以将球击出 330 码，并带有漂亮的微弱渐变。不是所有的人都能做到这一点……再比如：只有迈克尔杰克逊可以像国王一样唱歌和月球行走。

假设我们创造了一个人。（即我们正在创建一个人对象）。

```
Freddie_Mercury = Person.new

Freddie_Mercury.DriveGolfBall # ~> -:15:in `<main>': undefined method `DriveGolfBall' for Person:Class (NoMethodError) 
```

弗雷迪不会打高尔夫球。该方法不是“类方法”

**(3) “Self”前缀创建了所有人都可以做的方法。它创建类方法**

如果我想创造一种世界上每个人都可以做到的方法：那就是：呼吸法。所有人都能呼吸。如果他们做不到，他们就会死。

**(4) 我该如何调用该方法？**

如果我想做一些呼吸，我会说“Person.breath”。我不会说“FreddieMercury.breath”。不需要对特定的人调用该方法，但我会在整个物种上调用该方法：我会在 Person 类上调用它。*

# css - 在扩展 MultiModelForm 中更改位置按钮添加链接

> ID：15539706
> 
> 赞同：1
> 
> 时间：2013-03-21T04:47:03.930
> 
> 标签：css, tags, position

我正在使用扩展`MultiModelForm`（[http://www.yiiframework.com/extension/multimodelform/](http://www.yiiframework.com/extension/multimodelform/)）

如何更改按钮的位置`Add Row`？我想出现在我的桌子底下。该按钮出现在我的表格上方，但是当用户输入时必须返回许多行才能按下按钮以添加更多行，这不是很实用......我尝试修改文件`MultiModelForm.php`但无法更改按钮的位置:( ....感谢一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:11:33.600

[http://api.jquery.com/clone/](http://api.jquery.com/clone/)

$('#the_button').clone().appendTo('#another_place'); 或 $('#the_button').clone().prependTo('#another_place');

# c - 从用户的输入将数组传递给 execvp()

> ID：15539708
> 
> 赞同：8
> 
> 时间：2013-03-21T04:47:16.863
> 
> 标签：c, execvp

我正在尝试将用户输入的参数传递给`execvp()`.

到目前为止，我已经拆分了字符串。如果用户键入`ls -a`,`temp`则保存为 "ls" 和 "-a" 后跟一个 NULL 字符。我不太确定如何在`execvp`. 在示例中，我已经看到它使用`execvp(temp[position], temp)`. 我知道我现在尝试做的方式是错误的，但我不确定如何正确地做！目前我遇到了分段错误。

```
int main(int argc, char *argv[]) 
{
    char line[124];
    int size = 124;
    char *temp = NULL;

    while(fgets(line, size, stdin) != NULL ) {
        if (strcmp(line, "exit\n") == 0) {
            exit(EXIT_SUCCESS);
        }
        temp = strtok(line, " ");
        while (temp != NULL) {
            printf("%s\n", temp);
            temp = strtok(NULL, " ");
        }
        execvp(temp, &temp);    
    }
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T05:04:20.893

您的问题是这`temp`是一个单指针，您需要将一组指针传递给`execvp()`.

就像是：

```
 enum { MAX_ARGS = 64 };
    char *args[MAX_ARGS];
    char **next = args;

    temp = strtok(line, " ");
    while (temp != NULL)
    {
        *next++ = temp;
        printf("%s\n", temp);
        temp = strtok(NULL, " ");
    }
    *next = NULL;
    execvp(args[0], args); 
```

请注意，参数列表已被赋予一个空指针作为终止符，就像`argv[argc] == NULL`in一样`main()`。显然，我忽略了错误检查（如果传递的参数超过 63 个，就会溢出`args`数组）。但这包含了核心思想。

* * *

> 在这个例子中，我似乎无法获得简单的命令`ls`来工作，我已经尝试过`mkdir`并且`echo`它们似乎工作正常。传递`ls`返回 -1 从`execvp()`.

我不确定问题可能是什么——所有这些都对我有用：

*   `ls`
*   `ls -l`
*   `ls -l madump.c`（`madump.c`恰好是我正在测试的目录中的文件）

我使用的代码是：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

int main(void) 
{
    char line[1024];

    while (fgets(line, sizeof(line), stdin) != NULL)
    {
        if (strcmp(line, "exit\n") == 0)
            exit(EXIT_SUCCESS);

        char *args[64];
        char **next = args;
        char *temp = strtok(line, " \n");
        while (temp != NULL)
        {
            *next++ = temp;
            printf("%s\n", temp);
            temp = strtok(NULL, " \n");
        }
        *next = NULL;

        puts("Checking:");
        for (next = args; *next != 0; next++)
            puts(*next);

        execvp(args[0], args);
    }

    return EXIT_SUCCESS;
} 
```

请注意，在创建一个名称末尾带有换行符的目录之后，我将其添加`\n`到了令牌列表中。`strtok()`适合烦人的朋友和困惑的半受过教育的敌人，但从大多数其他角度来看却是一种滋扰。`execvp()`请注意我是如何在实际这样做之前打印出将要传递给的数据的。通常，我会使用`printf("<<%s>>\n", *next);`而不是仅仅`puts()`为了获得参数开始和结束的明确指示。

运行命令 ( `doit`) 的输出是：

```
$ ./doit
ls -l madump.c
ls
-l
madump.c
Checking:
ls
-l
madump.c
-rw-r--r--  1 jleffler  staff  2352 Jul 28  2011 madump.c
$ 
```

你从你的版本中得到了什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T04:57:08.023

正如您的代码目前看起来一样，在您`while(temp != NULL)`完成后，`temp`将为 NULL！

`execvp`期望第**一个**参数是作为新进程映像的文件的路径。第二**个**参数应该是一个以 NULL 结尾的字符串数组，其中该数组的最后一个成员是 NULL 指针，第一个成员是第一个参数中指定的文件的文件名。

要在您的代码中实现这一点，请考虑以下`while`循环：

```
char **argList = NULL;
unsigned int numArgs = 0;
while (temp != NULL) {
    numArgs++;

    /* Reallocate space for your argument list */
    argList = realloc(argList, numArgs * sizeof(*argList));

    /* Copy the current argument */
    argList[numArgs - 1] = malloc(strlen(temp) + 1, 1); /* The +1 for length is for the terminating '\0' character */
    snprintf(argList[numArgs - 1], strlen(temp) + 1, "%s", temp);

    printf("%s\n", temp);
    temp = strtok(NULL, " ");
}

/* Store the last NULL pointer */
numArgs++;
argList = realloc(argList, numArgs * sizeof(*argList));
argList[numArgs - 1] = NULL;

/* Finally, pass this to execvp */
execvp(argList[0], argList);
/* If you reach here, execvp() failed */ 
```

我上面提供的代码并没有做一些错误检查（比如何时`realloc`或`malloc`失败），但基本上记住了这几点：

1.  参数 1：要放入内存的文件的**路径名。**
2.  参数 2：参数**列表**，其中该列表的第一个成员 = 文件名，最后一个成员 = NULL 指针。

请查看[文档](http://pubs.opengroup.org/onlinepubs/009604499/functions/exec.html)以获得更好的清晰度和一个非常简单的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:56:44.490

我猜测段错误是因为您将 NULL 指针传递给 execvp。调用上方的循环确保了这一点。

要执行您想要执行的操作，您需要为当前调用的内容创建一个字符串指针数组`temp`。这将成为`argv`您调用的程序的数组。这就是为什么该命令通常用作`execvp (temp[0], temp)`-`argv[0]`通常是程序的名称。

所以尝试创建一个字符串指针数组，并让每个指针指向一个来自`line`. 您可能需要使用 malloc，但如果您想聪明一点，您可以直接指向`line`. 如果这样做，则需要在每个“单词”之后立即将字符设置为`\0`.

# java - 如何在依赖参数所在的线程之外执行方法

> ID：15539710
> 
> 赞同：0
> 
> 时间：2013-03-21T04:47:20.503
> 
> 标签：java, android, multithreading

假设一个泛型方法，即`sayHello(a)`，将参数`str`作为形式参数。

```
new Thread(new Runnable() {

    @Override
    public void run() {
        String str = "Hello World";
        sayHello(str);
    }           
}).start(); 
```

我需要`sayHello(str)`在这个线程之外执行（或更重要的是，在主线程内部），但是`String str = "Hello World";`必须在这个新线程中执行。那么，我将如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:49:15.497

在主线程中声明`str`并在新线程中分配值，然后您可以调用`sayHello`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:53:36.107

```
new Thread(new Runnable() {

  @Override
  public void run() {
      final String str = "Hello World";

      runOnUiThread(new Runnable()
      {
          public void run()
          {
              sayHello(str);
          }
      });
  }

}).start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:54:54.333

使用`java.util.concurrent.FutureTask`.

来自 JDK 6 api 文档。

```
 interface ArchiveSearcher { String search(String target); }
 class App {
   ExecutorService executor = ...
   ArchiveSearcher searcher = ...
   void showSearch(final String target) throws InterruptedException {
     Future<String> future = executor.submit(new Callable<String>() {
         public String call() { return searcher.search(target); }
     });
     displayOtherThings(); // do other things while searching
     try {
       displayText(future.get()); // use future
     } catch (ExecutionException ex) { cleanup(); return; }
   }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:30:01.323

检查这个类似问题的答案“[如何等待 Android runOnUiThread 完成？](https://stackoverflow.com/questions/5996885/how-to-wait-for-android-runonuithread-to-be-finished/9893835#9893835) ”。它包含一个 BlockingOnUIRunnable 类的实现，应该可以解决您的问题。它还将同步运行您的 sayHello() 函数。

# ios - 在 UITableView 中显示可用的蓝牙列表

> ID：15539712
> 
> 赞同：1
> 
> 时间：2013-03-21T04:47:40.067
> 
> 标签：ios, ios5, bluetooth, gamekit, core-bluetooth

我是游戏开发的新手。我正在创建一个通过蓝牙连接的多人游戏。现在，在我的项目中，我正在使用 Game Kit 框架来检测可用的蓝牙设备。此可用蓝牙列表显示在`GKPeerPicker`控制器中。但现在我想在`UITableView`.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T04:56:39.110

这是显示可供我们使用的蓝牙设备列表的最佳示例代码，他清楚地解释了
[显示蓝牙设备列表](http://www.devx.com/wireless/Article/43502)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T04:57:59.030

```
-(void)centralManager:(CBCentralManager *)central didRetrievePeripherals:(NSArray *)peripherals{
    NSLog(@"This is it!");
// store the list of devices in the NSArray and then go to table view delegates.

}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [peripherals count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        cell.selectionStyle = UITableViewCellSelectionStyleGray;
    }

    cell.textLabel.text = [peripherals objectAtIndex:indexPath.row];

    return cell;
} 
```

# search - elasticsearch BindTransportException 在启动时

> ID：15539714
> 
> 赞同：2
> 
> 时间：2013-03-21T04:47:42.723
> 
> 标签：search, elasticsearch, pyes

这是我正在启动弹性搜索的例外：

```
STATUS | wrapper  | 2013/03/21 00:43:42 | Launching a JVM...
INFO   | jvm 1    | 2013/03/21 00:43:42 | WrapperManager: Initializing...
INFO   | jvm 1    | 2013/03/21 00:43:45 | {0.19.4}: Startup Failed ...
INFO   | jvm 1    | 2013/03/21 00:43:45 | - BindTransportException[Failed to bind to [9300]]
INFO   | jvm 1    | 2013/03/21 00:43:45 |       ChannelException[Failed to bind to: /192.168.0.1:9300]
INFO   | jvm 1    | 2013/03/21 00:43:45 |               BindException[Cannot assign requested address]
STATUS | wrapper  | 2013/03/21 00:43:47 | <-- Wrapper Stopped 
```

有没有人知道什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-20T16:56:50.320

您需要找出正在使用该端口的进程，例如在 OS X 上，使用端口 9300 的网络实用程序端口扫描选项卡。这将为您提供如下内容：

```
Open TCP Port:  9300        vrace 
```

您可以使用此行来获取正在侦听的进程L

```
lsof -i | grep LISTEN 
```

这将返回如下内容：

```
java      12345 niranjan  123u  IPv6 0x1ab123c45d67890f      0t0  TCP localhost:vrace (LISTEN) 
```

您可以使用

```
ps aux | grep 12345 
```

看看那个过程是什么。然后，您可以决定使用终止该进程

```
sudo kill -9 12345 
```

瞧，您的原始应用程序将再次运行。

Linux 可能略有不同，但逻辑是相同的：在 localhost 上进行端口扫描，查看哪个应用程序正在使用端口 9300，然后对其进行攻击。

# sql - 输出一年中以周为间隔的某些列的总和，周日期与日一致

> ID：15539719
> 
> 赞同：1
> 
> 时间：2013-03-21T04:48:03.863
> 
> 标签：sql, coldfusion, sum, dayofweek

我需要一些帮助，因为我被困住了。这是使用 SQL 和 Coldfusion。基本上，我有一张表格，其中列出了某些票的完成情况以及它们被标记为完成的日期。这张表有区和区例如，在GROUP BY中使用。所以我想计算一年中每周完成的每张票，例如用户选择运行报告。我将列出我目前拥有的一些 SQL。

```
 SELECT                                           
    SUM(CASE WHEN DATEPART(ww, completionDate) = 1 THEN 1 ELSE 0 END) AS [Jan1-7],
    SUM(CASE WHEN DATEPART(ww, completionDate) = 2 THEN 1 ELSE 0 END) AS [Jan8-14],
    SUM(CASE WHEN DATEPART(ww, completionDate) = 3 THEN 1 ELSE 0 END) AS [Jan15-21],
    SUM(CASE WHEN DATEPART(ww, completionDate) = 4 THEN 1 ELSE 0 END) AS [Jan22-31]    
    SUM(CASE WHEN DATEPART(ww, completionDate) = 5 THEN 1 ELSE 0 END) AS [Feb1-7],
    SUM(CASE WHEN DATEPART(ww, completionDate) = 6 THEN 1 ELSE 0 END) AS [Feb8-14],
    SUM(CASE WHEN DATEPART(ww, completionDate) = 7 THEN 1 ELSE 0 END) AS [Feb15-21],
    SUM(CASE WHEN DATEPART(ww, completionDate) = 8 THEN 1 ELSE 0 END) AS [Feb22-28], 
```

如您所见，我基本上是在尝试获取完成日期是一年中的哪一周，并将其汇总在自己的列中。除非有人有更好的建议，否则它应该采用这种格式。例如，问题是 2013 年 2 月 18 日，SQL 告诉我这将是 2013 年的第 8 周，而我的代码将在 FEB15-21 中求和，根据我的代码，这是第 7 周。我需要的报告是在顶部标题中显示月份，然后在该月的下一个标题中显示每周，然后基本上计算该周完成的每张票。所以周/月需要是列。

我已经阅读了一些 CF 功能和所有内容，但只是不确定如何利用它们来获得我需要的东西。有没有办法动态求和这些日期，确保它们根据星期在正确的列中求和，或者使用 Coldfusion 来处理这部分？但我对 ColdFusion 部分也不太确定，所以如果可能的话，任何关于使用 SQL 或 CF 的建议以及可能在代码部分帮助我的任何建议都将非常感激。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:03:29.987

I recommend creating a database table where the primary key is the date. Other fields in this table would include the week string (Jan 7 - 13) plus anything else, holidays, fiscal information, etc that you need.

You'll need a maintenance script for some things and you might have to do the holidays part manually. It's what we do with our data warehouse.

It makes the report you are currently attempting very simple.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:25:38.367

我不是 100% 确定我是否正确遵循，但为什么不试一试这个查询。这将计算每周/每月组合的频率，允许您根据输出的需要按周或月将其拆分。然后，您可以使用 CF 逻辑来确定用于输出目的的限制日期。

```
SELECT

    -- Get the week and month of each row
    MONTH(completionDate) AS monthOfYear,
    WEEK(completionDate) AS weekOfYear,

    -- Count how many rows are in this group
    COUNT(*) AS frequency

FROM yourTable AS yt

-- If you are only interested in a specific date range, chuck in something like this
WHERE yt.completionDate BETWEEN DATE('2013-01-01') AND ('2013-12-30')

-- Order by month and then week, so that week 4 in Jan comes before week 4 in Feb
GROUP BY
    monthOfYear ASC,
    weekOfYear ASC 
```

希望这对您有所帮助，如果这不是您想到的那种事情，请澄清问题。

如果这是针对一个非常大的表并且您只对日终统计数据感兴趣，那么请考虑在每天之后将以下内容运行到一个具有简单结构的表中，其中包含列`statsDate DATE NOT NULL PK`和`statsFrequency INTEGER UNSIGNED NOT NULL`

```
INSERT INTO yourStatsTable(
    statsDate,
    statsFrequency
)
SELECT
    DATE(completionDate),
    COUNT(*)
FROM yourTable AS yt
WHERE yt.completionDate >= SUBDATE(CURRENT_DATE,1) 
AND yt.completionDate < CURRENT_DATE
ON DUPLICATE KEY UPDATE statsFrequency = VALUES(statsFrequency) 
```

然后，这将为您提供一个包含前几天计数的表，可以在不访问主表的情况下进行查询（但同样只有在它是一个大/繁忙的表并且动态生成它们不可行时才这样做）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:53:07.450

我认为让您感到困惑的部分是 MSSQL 如何处理周数。它们都是周一至周日的周格式。在这种情况下，第 1 周从 2012 年 12 月 31 日星期一到 2013 年 1 月 6 日星期日（*而不是您假设的 2013*年 1 月 1 日到 2013 年 1 月 7 日）开始，第 2 周：2013 年 1 月 7 日到2013 年 1 月 13 日，依此类推... 2013 年 2 月 18 日是一年中的第 8 周，因为它从第 8 周（星期一）开始。

你会想要使用类似的东西：

```
DATEADD(ww, DATEDIFF(ww,0,completionDate), 0) AS [Start Of Week],
DATEADD(s,-1,DATEADD(ww, DATEDIFF(ww,0,GETDATE())+1,0)) as [End Of Week] 
```

获取开始和结束日期，并在您的 group by 子句和总和中使用它。

但是，为了匹配您的代码，您可以将偏移天数添加到 [Start Of Week] 和 [End Of Week] 以获得您的范围。在 2013 年，该偏移量将是**1 天**，即 2013 年 1 月 1 日（人类年初） - 2012 年 12 月 31 日（sql 年初）。这样，日期将全部与您的 [Jan1-7] 周格式相匹配。

希望这可以帮助。-明

# android - 通过 Rails Server 与 Android 应用程序通信 - 将数据从应用程序发送到服务器？

> ID：15539720
> 
> 赞同：0
> 
> 时间：2013-03-21T04:48:05.947
> 
> 标签：android, ruby-on-rails, tcp, push-notification

我有一个 Ruby on Rails 应用程序正在运行，它有一个电话号码数据库。我需要在 5 部不同的手机上运行应用程序，以便它们从 Rails 服务器收到带有电话号码的通知（这是一个接一个地完成的，并非所有手机都将号码放在一起）。收到电话号码后，应用程序会检查是否有现有电话。如果没有呼叫，它会拨打该号码，否则会向 Rails 服务器发送“电话忙”状态。

我在想办法做到这一点。我弄清楚了它的应用程序部分：我使用呼叫意图启动了一个新活动，并在我的清单文件中设置了适当的权限，我还可以使用电话管理器检查状态。

但我无法弄清楚通信部分。我首先想到了使用 GCM 的推送通知，然后我什至读到了从我的服务器到我的应用程序的独立 TCP 连接。

我的问题是：我不清楚使用 GCM 是否是强制性的，或者我可以通过实时通信解决它？如果是，如何？

PS：只要将电话号码添加到服务器上的数据库中，我就希望发送通知。实时。

**编辑 22/03/13：**

所以我尝试了 GCM 并构建了我的 Android 应用程序和 Rails 服务器。我可以使用“gcm”gem 几乎实时发送推送通知。

我需要弄清楚应用程序部分的响应。我需要通过呼叫成功/失败通知来确认号码。如果可以，我如何通过 GCM 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:35:25.537

我无法理解你的问题。为什么不能简单地创建一个添加号码的事件并调用 ROR 的 API 并发送成功/失败通知状态。

如果您想将它添加到数据库中，那很好，如果您想在基于 Web 的界面上添加通知，那就完全不同了。使用 Web Sockets 或 Socket IO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:18:49.010

我最终使用了 Google Cloud Messaging。它并不完全可靠，并且不适用于某些 Android 手机，但是，我找到了一款适用于我的手机，并且适合我的用例。

我通过 GCM 将一个号码推送到应用程序，然后应用程序使用拨号意图拨打电话。此外，在拨号时，它还会通过异步帖子更新服务器上的电话和呼叫状态。我为此实现了一个 PhoneStateListener。

同样在使用来自 github 的“gcm”gem 时，我意识到 gcm 消息的响应不正确。很多时候，即使消息没有传递，它也会说响应是“成功的”。这是 GCM 不可靠的另一个原因。

# c++ - DLL 中的 C++ 新 gdiplus::bitmap 返回 null

> ID：15539721
> 
> 赞同：1
> 
> 时间：2013-03-21T04:48:14.293
> 
> 标签：c++, object, bitmap, gdi+

我在 DLL 中使用 GDI 对象，但`new gdiplus::bitmap`在 DLL 中返回了`NULL`. 其他新对象成功。我曾经`GdiplusStartup(&gdiplusToken, gdiplusStartupInput, NULL)`初始化。

编码：

```
GdiplusStartup(&gdiplusToken, gdiplusStartupInput, NULL);
...
Gdiplus::Bitmap *bmp = new Gdiplus::Bitmap(bmp_info.bmWidth, bmp_info.bmHeight, PixelFormat32bppARGB); 
```

是否有任何 GDI 初始化工作或其他初始化丢失或其他原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:22:44.170

解决了。我一开始在 DLLMain 条目中进行了初始化。现在我将初始化更改为使用 GDI 对象的函数。

# c# - Image.Source 使用字符串格式绑定时不显示图像

> ID：15539723
> 
> 赞同：1
> 
> 时间：2013-03-21T04:48:38.973
> 
> 标签：c#, .net, wpf, wpf-4.0

我目前正在使用以下代码来构建一个`ComboBox`带有标志图像和加拿大省份名称的控件。但是图像没有显示在控件中。我已经测试了绑定并且它正确地生成了位置，但是图像只是没有出现在控件中。

不知道这里出了什么问题，任何帮助将不胜感激

**代码：**

```
<ComboBox x:Name="cb_Provinces" Text="Province"SelectionChanged="ComboBox_SelectionChanged"  SelectedValuePath="ProvinceCode" ItemsSource="{Binding Provinces, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}">
    <ComboBox.ItemTemplate>
        <DataTemplate >
            <StackPanel>
                <StackPanel x:Name="stk_ComboTemplate" Orientation="Horizontal" HorizontalAlignment="Left">
                    <Image Width="25" Margin="10" Source="{Binding ProvinceCode, StringFormat=/CanadaTreeSvc.Interface;component/Resources/img/flags/\{0\}.gif}" />

                    <TextBlock Text="{Binding ProvinceName}"/>

                </StackPanel>
                <TextBlock FontSize="10" Foreground="Gray" Text="{Binding ProvinceCode, StringFormat=/CanadaTreeSvc.Interface;component/Resources/img/flags/\{0\}.gif}"/>

            </StackPanel>
        </DataTemplate>
    </ComboBox.ItemTemplate> 
```

**结果输出：**

![在此处输入图像描述](../Images/bc276936c6a738e036eebb90d9afc5aa.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T05:18:13.363

`StringFormat`仅当目标是 type 时才有效`String`。因为`Image` `Source`是类型`Uri`，所以`StringFormat`永远不会在`Binding`

最好的选择是进行`IValueConverter`格式化`string`并将其返回给`Image` `Source`属性。

例子：

```
public class ProvinceNameToImageSourceConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return string.Format("/CanadaTreeSvc.Interface;component/Resources/img/flags/\{0\}.gif", value);
    }

    public object ConvertBack(object value, Type targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        return null;
    }
} 
```

用法：

```
<Window.Resources>
    <local:ProvinceNameToImageSourceConverter x:Key="ImageConverter" />
</Window.Resources>

..................

   <Image Source="{Binding ProvinceCode, Converter={StaticResource ImageConverter}}" /> 
```

# javascript - XRM setDisable() 不适用于 IE 以外的浏览器

> ID：15539724
> 
> 赞同：3
> 
> 时间：2013-03-21T04:48:59.650
> 
> 标签：javascript, google-chrome, firefox, dynamics-crm-2011, xrm

从 IE 以外的浏览器打开我们的 XRM 表单时出现错误。您可以在图片链接上看到无用的消息。

![在此处输入图像描述](../Images/294b2e809a27062a8d73e3ad899f4551.png)

该错误尚不清楚，因此我对其进行了调试，这导致我在页面加载时出现 javascript 函数错误。它无法正确使用 XRM setDisabled() 函数：

```
Xrm.Page.getControl("simpeg_tipelokasi").setDisabled(true); 
```

在 IE 上它可以工作并且该字段被禁用，但奇怪的是它在 Chrome 和 Firefox 上不起作用。你能帮我弄清楚为什么它在这些浏览器上不起作用吗？非常感谢！

**编辑：**

我的错，这实际上是两个浏览器的 ActiveX 配置中的问题，而**不是**setDisabled 函数中的问题。前段时间调试的时候一定是错过了。请参阅我在此网址上的新帖子： [使用 ActiveX 替代 XRM Javascript 调用 Web服务](https://stackoverflow.com/questions/15632821/alternative-to-xrm-javascript-calling-webservice-using-activex)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:28:35.870

尝试使用应支持跨浏览器兼容性的 XrmServiceToolKit 新版本：

[http://xrmservicetoolkit.codeplex.com/](http://xrmservicetoolkit.codeplex.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:01:43.283

如果您当前不在 Rollup 12 上，则 Chrome 不受官方支持。

如果可以的话，我会尝试升级以获得通过[Rollup 12](http://www.microsoft.com/en-gb/download/details.aspx?id=36229)提供的新的跨浏览器支持。确保您检查了[代码验证工具](http://www.microsoft.com/en-us/download/details.aspx?id=30151)，以确保您的代码和自定义没有任何问题。

如果这不是一个选项，那么您可以尝试[xrmservicetoolkit](http://xrmservicetoolkit.codeplex.com/)，它是一个 CRM JavaScript 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T00:21:22.747

您需要将组织的汇总更新到至少 12 个（目前最新的）。不过，令我惊讶的是，您实际上得到了错误。使用不受支持的浏览器时，您应该无法登录并显示“主要”表单。

编辑：

这**绝对**不是 RU12 和浏览器品牌的问题。我刚刚创建了一个新组织，并通过 Web 资源添加了以下功能。

```
function disableFullNameOnLoad(){
  Xrm.Page.getControl("fullname").setDisabled(true);
  alert("Full name disabled on load.");
}

function enableFullNameOnSave(){
  Xrm.Page.getControl("fullname").setDisabled(false);
  alert("Full name enabled on save.");
} 
```

正如命名法所暗示的，禁用是在表单的*onload*中执行的，并在其*onsave*中启用。我使用 FF、IE 和 Cr 进入了 CRM（RU12、OP）。行为是一致的 -打开表单时*全名显示为灰色，保存时**可编辑*。

因此，无论您的平台上存在什么问题，它都与跨浏览器不兼容没有直接关系。当您添加我的示例中的确切代码时，您能否再次检查您是否得到了 IE 和 FF 之间的行为差​​异，请按照我描述的方式完全连接到事件。

# html - 如何在视频缩略图上叠加播放按钮？

> ID：15539729
> 
> 赞同：8
> 
> 时间：2013-03-21T04:49:29.613
> 
> 标签：html, css

我得到了一些 div 缩略图。有没有办法我可以使用css（我的播放图标有一个类名overlayicon）将播放图标放在**拇指中心的缩略图上（我的缩略图有ItemImage的类名）？**

```
<div class="ItemLeft">

  <div class="Clipping">        
    <a class="ImageLink" href="/videos/id8" title="galaxy">
      <img class="ItemImage" src="/Images/video8.jpg" alt="video 8" />
      <img class="OverlayIcon" src="/Images/1.png" alt="" />
    </a>
    <a class="DurationInfo" onmouseover="showDuration2(this);" onmouseout="hideDuration2(this);" href="/videos/id1234"><span class="Text">51:57</span></a>
  </div>

  <div class="Title"><a href="/videos/id8" title="galaxy">galaxy</a></div>

  <div class="VideoAge">1 daybefore</div>

  <div class="PlaysInfo"> broadcast 265</div>

</div> 
```

我的CSS：

```
.Item.ItemLeft, .Item.ItemMiddle, .Item.ItemRight
{
    float:left;
    margin-right:15px;
}
.clear
{
    clear:both;
}

img.ItemImage {
    width: 18em;
    height: 10em;
 }

.OverlayIcon {
    position: absolute;
    top: 40px;
    left: 65px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T05:14:04.720

您可以`position: absolute`在您的`.OverlayIcon`. 例如：

```
.ImageLink {
    height: 300px;
    width: 350px;
    position: relative;
    display: block;
}
.ItemImage {
    height: 300px;
    width: 350px;
}
.OverlayIcon {
    position: absolute;
    top: 40px;
    left: 65px;
} 
```

工作示例：http: [//jsfiddle.net/shodaburp/9nEua/](http://jsfiddle.net/shodaburp/9nEua/)

**根据user1788736的第一条评论更新**

上述解决方案仅适用于所有高度相同且固定的情况。然后，您需要根据 playButton.png 尺寸的高度调整`top`和值。`left`

如果您可以提供您当前拥有的内容（html、css、jQuery）的 jsFiddle，那么更容易更准确地调整定位。

**根据user1788736的第二条评论更新**

我在我的服务器上上传了一个相同大小（56px x 37px）的虚拟图像。这是您的小提琴的更新版本：http: [//jsfiddle.net/shodaburp/k6yAQ/1/](http://jsfiddle.net/shodaburp/k6yAQ/1/)

**基于 user1788736 的第三条评论的额外信息**

当你说“如何找到overlayicon w和h的值？” 我假设您实际上是在寻找`top`并`left`重视`.OverlayIcon`. 如果我错了，请纠正我。

首先，如果您不打算在您的网站上启用缩放/放大功能，只需坚持`px`作为图像的单位测量。

根据您的 jsFiddle 拇指尺寸，`12em x 10em`相当于`192px x 160px`.

获取`top`和`left`值的公式`.OverlayIcon`如下：

```
OverlayIconTop = (ItemImageHeight - OverlayIconHeight )/2
OverlayIconTop = ( 160 - 37 ) / 2 = 61.5 
```

（四舍五入到 61 或 62，因为我们不能为 px 设置小数）

```
OverlayIconLeft = (ItemImageHeight - OverlayIconHeight )/2
OverlayIconLeft = ( 192 - 56 ) / 2 = 68 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-20T18:37:56.597

```
.container{
   position: relative;
   width: 200px;
}

.container img{
   width: 200px;
}

.container .play-icon{
  cursor: pointer;
  position: absolute;
  top : 50%;
  left : 50%;
  transform: translate(-50%, -50%);
}

svg:hover #play-svg{
  fill: #CC181E;
} 
```

[使用 svg 的工作示例] [http://jsfiddle.net/4L2xea4u/](http://jsfiddle.net/4L2xea4u/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T05:10:02.657

您可以将缩略图图像作为背景，然后在其上放置播放按钮图像，您还可以将 a 属性定义为块并使整个区域可点击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-13T17:12:41.020

我刚刚为响应式布局解决了这个问题，并遇到了[这个演示](http://douglasgreen.com/demo/responsive-video-play-button/)，它工作得非常好。

# c++ - 指针和指针数组的区别

> ID：15539733
> 
> 赞同：2
> 
> 时间：2013-03-21T04:50:03.187
> 
> 标签：c++

我做了一个代码

```
#include <iostream>
#include<conio.h>
using namespace std;

void main()
{
    int *x,*y;
    x=new int[1];
    y=new int;
    cin>>y;   //Gives error probably because y is a pointer and not a variable
    cin>>*y                 //works fine
    cin>>x[0]>>x[1];
    cout<<x[0]<<x[1];
    cout<<*x[0];         //gives error
    cout<<y;
    cout<<*y;

    getch();

} 
```

给出错误。为什么？我记得我将 x 声明为指针数组，现在我做了与 *y 相同的操作。这是否意味着指针数组成为变量？请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:54:59.923

x 是一个指向 int 的指针。您已经分配了一个整数数组，它是一个长整数。因此 x[0] 是一个 int 并且 *x 是一个 int。但是， *x[0] 意味着您说 x[0] 是您要取消引用的指针。但是，它不是指针，而是 int。这就是为什么会出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T04:55:34.350

您实际使用该行代码所做的操作类似于：

```
cout<<**x; 
```

因为 using`x[0]`将取消`0th`引用`x`.

正如您的定义所看到的，`x`,`x`只是一个指针，而不是指向指针的指针，因此由于您试图取消引用变量，因此两次取消引用它是行不通的。

什么线：

```
x=new int[1]; 
```

实际上所做的只是说“为这个指针分配一个大小为 1 的整数数组”，这只会`x`指向一个足够大以存储 1 个整数的内存块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:58:42.567

数组的含义：

```
x[0] 
```

等价于 *(x+0)；

如您所知，数组就是数组，只不过是根中的指针。

因此，任何具有 x[a] 或 x[a][b] 的数组都可以扩展为

```
*(x+a) or *(*(x+a)+b) 
```

基于此，我希望你找到你的答案。

# jsf - *.xhtml url-pattern 在 com.sun.faces.context.flash.ELFlash.loggingGetPhaseMapForReading 处导致 java.lang.NullPointerException

> ID：15539735
> 
> 赞同：5
> 
> 时间：2013-03-21T04:50:12.767
> 
> 标签：jsf, jsf-2, glassfish, web.xml

我试图强制 JSF 处理我的欢迎文件。我已将 web.xml 中的 servlet-mapping 设置为以下内容：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

但是，当我在这样做之后尝试运行我的项目时，我得到了这个异常：

```
java.lang.NullPointerException
    at com.sun.faces.context.flash.ELFlash.loggingGetPhaseMapForReading(ELFlash.java:793)
    at com.sun.faces.context.flash.ELFlash.getPhaseMapForReading(ELFlash.java:826)
    at com.sun.faces.context.flash.ELFlash.isEmpty(ELFlash.java:484)
    at com.sun.faces.facelets.util.DevTools.writeVariables(DevTools.java:325)
    at com.sun.faces.facelets.util.DevTools.writeVariables(DevTools.java:215)
    at com.sun.faces.facelets.util.DevTools.debugHtml(DevTools.java:130)
    at com.sun.faces.renderkit.RenderKitUtils.renderHtmlErrorPage(RenderKitUtils.java:1162)
    at com.sun.faces.context.ExceptionHandlerImpl.throwIt(ExceptionHandlerImpl.java:276)
    at com.sun.faces.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:142)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:807)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:671)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:505)
    at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:476)
    at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:355)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:305)
    at com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546)
    at com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:364)
    at com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

奇怪的是，当我将映射更改回

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

一切正常。有谁知道这里发生了什么？我在 Glassfish 3.1 上使用 JSF 2.1，如果有帮助，这是我完整的 web.xml。

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="3.0" 
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>com.sun.faces.verifyObjects</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.validateXml</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.CONFIG_FILES</param-name>
        <param-value>/WEB-INF/faces-config.xml</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T06:29:50.290

事实证明，这个问题实际上是由我的 faces-config.xml 文件引起的。我从一个使用 JSF 1.2 的旧项目复制而来，而我使用的是 2.1。一旦我改变了它，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:21:14.423

对我来说`<url-pattern>*.xhtml</url-pattern>`工作得很好。只是想知道，你把 index.xhtml 放在哪里了？

# delphi - Delphi XE2中的查询访问冲突

> ID：15539738
> 
> 赞同：1
> 
> 时间：2013-03-21T04:50:38.943
> 
> 标签：delphi, delphi-xe2

我`qryDoABC`在函数中有一个查询`DoABC`。当我第一次调用此函数时，一切正常，但第二次调用它时，与 qryDoABC 一致，它会引发访问冲突异常。

```
procedure TMyForm.DoABC;
begin
  with qryDoABC do
  --
  -- 
end; 
```

我用谷歌搜索，发现我应该检查是否分配了查询。所以现在我也在检查是否像这样分配了查询：

```
procedure TMyForm.DoABC;
begin
  if assigned qryDoABC then
  with qryDoABC do
  --
  -- 
end; 
```

现在也不例外，因为没有分配第二次查询。但我也必须第二次解雇这个 qry。我应该如何第二次分配这个查询。

完整代码：

```
function TMyForm.DoABC:boolean;
begin
  try
    if assigned(qryDoABC)then 
    with qryDoABCdo
    begin
      Close  ;
      SQL.Clear;
      SQL.Text :=
        'Some query';

      Parameters.ParamByName('ABC').Value := ABC;
      Parameters.ParamByName('XYZ').Value := XYZ;
      Open;
      if (Recordcount = 0) then
        result := false
      else
      begin
        result := true;
      end;
      Close;
    end;
  except
    on E : Exception do
    begin
      result := false;
      exit;
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:42:51.203

使用查询变量作为本地变量。在你的函数中声明它。并使用“TRY...FINALLY”来免费查询。

```
function TMyForm.DoABC:boolean;
var
  qryDoABC: TADOQuery;
begin
  try
    qryDoABC := TADOQuery.Create(nil);
    //Set Appropriate Connection String (below for MS-Access)
    qryDoABC.ConnectionString := 'Provider=Microsoft.Jet.OLEDB.4.0; Data Source=MDB_file';
    try
      with qryDoABC do
      begin
        SQL.Clear;
        SQL.Text := 'Some query';
        Parameters.ParamByName('ABC').Value := 'ABC';
        Parameters.ParamByName('XYZ').Value := 'XYZ';
        Open;
        if (Recordcount = 0) then
          result := false
        else
        begin
          result := true;
        end;
        Close;
      end;
    except
      on E : Exception do
      begin
        result := false;
      end;
    end;
  finally
    FreeAndNil(qryDoABC);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:49:13.583

qryDoABC 是表单上的组件吗？如果是这样，如果表单被删除，它可能会被第二次调用。在这种情况下，表单要么发布得太早，要么查询调用太晚。

如果您手动释放表单，并且第二个查询调用是事件处理程序的结果，则可以使用 Release 释放表单，这仅在处理消息队列时才释放表单，因此表单没有待处理的消息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T08:12:27.697

我正在使用这样的 TADOQuery 语法

```
 with qryDoABC do
      begin
        SQL.Clear;
        SQL.Text := 'Some query';
        Parameters.ParamByName('ABC').Value := 'ABC';
        Parameters.ParamByName('XYZ').Value := 'XYZ';
        Open;
        if (Recordcount = 0) then
          result := false
        else
        begin
          result := true;
        end;
        Close;
      end; 
```

但是我放弃了 using`With`语句并像这样编写了我的代码

```
qryDoABC.SQL.Clear;
    qryDoABC.SQL.Text := 'Some query';
    qryDoABC.Parameters.ParamByName('ABC').Value := 'ABC';
    qryDoABC.Parameters.ParamByName('XYZ').Value := 'XYZ';
    qryDoABC.Open;
    if (qryDoABC.Recordcount = 0) then
      result := false
    else
    begin
      result := true;
    end;
qryDoABC.Close; 
```

# javascript - 修复 Three.js 中画布左下角的 AxisHelper

> ID：15539756
> 
> 赞同：0
> 
> 时间：2013-03-21T04:52:13.043
> 
> 标签：javascript, three.js, webgl

我正在使用 Three.js 中提供的 AxisHelper。当我将它放在画布的中心（0,0,0）时，它工作正常。但是如果我把它移到页面的左下角，它就不能正常工作。即，当我旋转模型时，AxisHelper 也会旋转大约 (0,0,0)。请发送您的宝贵建议。

提前致谢。

# html - 查看 CSS 边距以进行调试

> ID：15539757
> 
> 赞同：4
> 
> 时间：2013-03-21T04:52:15.210
> 
> 标签：html, css

我使用以下 CSS 样式来调试我的 div 和 span 轮廓的位置（通常保持注释）：

`div { outline: 1px dashed blue } span { outline: 1px dashed green }`

虽然这显示了 div 和 span 的外部边界，并给出了相对于内部对象/文本的填充的想法，但它无助于可视化分配给相同样式的边距在哪里。我了解填充和边距之间的区别，但我确实需要能够在构建页面时看到视觉效果（太多细节，太少注意力跨度）。

有没有办法添加一个外部矩形来显示样式的边距在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:56:57.880

我不知道任何允许在边距外部设置边框的属性，因为这违背了边距的目的。[W3的盒子模型说明](http://www.w3.org/TR/CSS2/box.html)

虽然这在早期 Web 开发中是一项很棒的技术，但我强烈建议您花几分钟时间来安装 Firebug 或熟悉 Chrome 的开发人员工具或 Safari 的“检查”功能等。您只需将鼠标悬停在代码上即可走得更远比花几个小时手工制作调试样式的数据还要多。

你会爱上他们的！

Firebug 尤其允许将鼠标悬停在代码上，它会突出显示您的主框、颜色编码的填充和边距等。一个非常宝贵的工具 - 它甚至比 Dreamweaver 的内置视觉轮廓工具更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-24T06:03:25.477

您可以为此使用我的新工具。您将鼠标悬停在页面中的任何元素上，它将显示其布局的所有部分（边距、边框、填充等）。

[HTML 框可视化工具 - GitHub](https://github.com/ghmcadams/boxvis)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:05:55.223

据我所知，没有。如前所述，我建议使用 Chrome 的开发工具或 Firebug。使用这些工具获得的一个不错的好处是能够动态操作 DOM。这使得测试放置非常快速和轻松。有时如果我试图将一个 div 放在右侧，我会右键单击该 div，选择检查此元素，然后查看右侧的属性。您实际上可以实时调整这些并查看页面中反映的更改。一个不错的技巧是，许多属性允许您使用向上和向下箭头键来循环浏览它们的值。这使得调整 margin-left 或 margin-right 值变得轻而易举。

# iphone - 单例类中的内存泄漏

> ID：15539769
> 
> 赞同：1
> 
> 时间：2013-03-21T04:53:00.200
> 
> 标签：iphone, ios, memory-management, memory-leaks, singleton

我是 iPhone 开发的新手。我正在开发一个使用单音类的应用程序。当我创建一个单音类的对象时，它在分析我的代码时给了我内存泄漏。它给出的消息是“对象的潜在泄漏”和“分配的对象以后不被引用”。但是我在我的代码中使用了那个对象。以下是我创建单音类对象的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"Inside View");
    self.navigationController.navigationBar.topItem.title = @"Menu List";

    UIImage *image = [UIImage imageNamed:@"Navigation_bar.png"];
    [_bgImage setFrame:CGRectMake(0,-45,320,510)];
    [self.navigationController.navigationBar setBackgroundImage:image
                                              forBarMetrics:UIBarMetricsDefault];
    [self.tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"Tab_bar.png"]];
    [self.navigationItem setHidesBackButton:YES];

    menuTableView.backgroundColor=[UIColor clearColor];
    menuTableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero];

    _hotelMenu=[SharedHotelMenu sharedInstanceMethod];
    _queryFormatter=[[DatabaseQueryFormatter alloc]init];

    _isSearchOn=NO;
    _searchResult=[[NSMutableArray alloc]init];

    _categorySearch.layer.cornerRadius = 19;
    _categorySearch.clipsToBounds = YES;
    _categorySearch.delegate=self;

    UIView *_paddingView=[[UIView alloc] initWithFrame:CGRectMake(0,0,5,10)];
    _categorySearch.leftView=_paddingView;
    _categorySearch.leftViewMode=UITextFieldViewModeAlways;
    [_paddingView release];

    UIView *_paddingRightView=[[UIView alloc] initWithFrame:CGRectMake(0,0,30,10)];
    _categorySearch.rightView=_paddingRightView;
    _categorySearch.rightViewMode=UITextFieldViewModeAlways;
    [_paddingRightView release];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(searchBar)
                                             name:UITextFieldTextDidChangeNotification object:_categorySearch];
}
 } 
```

我已将单音类对象创建为 _hotelMenu=[SharedHotelMenu sharedInstanceMethod];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:06:42.793

据我在您的代码中看到的是，这一行可能会导致内存泄漏

```
menuTableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

这样`@property(nonatomic, retain) UIView *tableFooterView`，它将保留您的对象，因此保留计数变为 2。

用这个

```
UIView *footerView = [[UIView alloc] initWithFrame:CGRectZero];
menuTableView.tableFooterView = footerView;
[footerView release]; 
```

# python - 如何与进程分叉共享对象树？

> ID：15539777
> 
> 赞同：1
> 
> 时间：2013-03-21T04:53:26.980
> 
> 标签：python, multithreading, multiprocessing

我在多线程方面没有太多经验，我正在尝试使以下工作：

```
from multiprocessing import Process

class Node:

    def __init__(self):
        self.children = {}

class Test(Process):

    def __init__(self, tree):
        super().__init__()
        self.tree = tree

    def run(self):
        # infinite loop which does stuff to the tree
        self.tree.children[1] = Node()
        self.tree.children[2] = Node()

x = Node()
t = Test(x)
t.start()
print(x.children)  # random access to tree 
```

我意识到出于各种非常明智的原因，这不应该（也不会）起作用，但是我不确定如何使它*起作用*。参考文档，似乎我需要对 Managers 和 Proxies 做一些事情，但老实说，我不知道从哪里开始，或者这是否真的是我想要的。有人可以提供上述有效的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:41:24.643

在我看来，您想要的是实际的多线程，而不是多处理。使用线程而不是进程，您可以精确地做到这一点，因为线程在同一个进程中运行，共享所有内存，因此彼此共享数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T14:50:43.887

`multiprocessing`对[隐式共享对象](http://docs.python.org/2/library/multiprocessing.html#sharing-state-between-processes)的支持有限，甚至可以共享列表和字典。

一般来说，`multiprocessing`它是[无共享的](http://docs.python.org/2/library/multiprocessing.html#all-platforms)（在初始分叉之后）并且依赖于进程之间的显式通信。这增加了开销（多少实际上取决于进程之间的交互类型），但巧妙地避免了多线程编程的许多陷阱。支持主/从模型的高级构建块`multiprocessing`（尤其是[Pool 类](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool)），主节点分发工作项，从节点对它们进行操作，返回结果。

在多个进程之间保持状态同步可能会产生令人望而却步的开销，具体取决于它们更改的频率。

**TL;DR**：可以做到，但可能不应该。

```
import time, multiprocessing

class Test(multiprocessing.Process):
    def __init__(self, manager):
        super().__init__()
        self.quit = manager.Event()
        self.dict = manager.dict()

    def stop(self):
        self.quit.set()
        self.join()

    def run(self):
        self.dict['item'] = 0
        while not self.quit.is_set():
            time.sleep(1)
            self.dict['item'] += 1

m = multiprocessing.Manager()
t = Test(m)
t.start()
for x in range(10):
    time.sleep(1.2)
    print(t.dict)
t.stop() 
```

这些`multiprocessing`示例展示了如何为更[复杂的对象](http://docs.python.org/2/library/multiprocessing.html#examples)创建代理，这应该允许您在问题中实现树结构。

# sql - 在 SQL Server 2008 中将 Varchar HH:MM 转换为整数分钟的查询

> ID：15539782
> 
> 赞同：6
> 
> 时间：2013-03-21T04:53:54.140
> 
> 标签：sql, sql-server, sql-server-2008

我在 SQL Server 中有一个表，其中有一个列名 `TimeSpent Datatype Varchar(25)`。它基本上将时间存储为`HH:MM`格式。根据现在的要求，我希望它给我以分钟为单位的实际时间，即 01:00 给我 60、01:30 -> 90。请帮助我在 SQL Server 2008 中编写查询，以便转换 Varchar (HH: MM) 转换为分钟（整数）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T04:58:33.090

尝试

```
SELECT LTRIM(DATEDIFF(MINUTE, 0, TimeSpent)) 
  FROM yourtable 
```

给定

```
| TIMESPENT |
-------------
|     00:12 |
|     01:05 |
|     10:00 | 
```

输出：

```
| MINUTES |
-----------
|      12 |
|      65 |
|     600 | 
```

这是**[SQLFiddle](http://sqlfiddle.com/#!3/69f2e/3)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T06:00:43.417

这将解决您的问题。请参考[SQLFiddle](http://sqlfiddle.com/#!3/74159/1)

```
 select cast(left(TimeSpent, charindex(':',TimeSpent,0)-1) as int)*60+
       cast(right(TimeSpent, len(TimeSpent)-charindex(':',TimeSpent, 0)) as int)
from test 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-08T08:30:26.943

SELECT top 1 (substring(CONVERT(VARCHAR(5), TimeSpent, 108), 1, 2) * 60 + substring(CONVERT(VARCHAR(5), TimeSpent, 108), 4, 2)) 作为测试的分钟数

# ruby-on-rails - rails 用 id_seq 重命名表

> ID：15539783
> 
> 赞同：0
> 
> 时间：2013-03-21T04:54:09.483
> 
> 标签：ruby-on-rails, ruby

我重命名表

```
rename_table :posts, :messages 
```

但是 rails 会生成 posts_id_seq 和 posts.id 修饰符：

```
db=# \d+ posts
                                                Table "public.posts"
       Column         |            Type             |                           Modifiers                           | Storage  | Description 
id                    | integer                     | not null default nextval('posts_id_seq'::regclass) | plain    | 

Indexes:
    "posts_pkey" PRIMARY KEY, btree (id) 
```

如何更正重命名表？

红宝石 1.8.7

导轨 2.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:04:20.177

看起来修复该行为的更改已在几个月前合并到 Rails 中（请参阅问题[#6864](https://github.com/rails/rails/pull/6874)），但该修复可能不存在于 Rails 2.3 系列中。您需要使用 Rails 4（仍处于开发/测试阶段）来进行修复。

# ios - 看不到 UITableView

> ID：15539786
> 
> 赞同：0
> 
> 时间：2013-03-21T04:54:29.780
> 
> 标签：ios, objective-c, iphone, cocoa-touch

我的应用程序从根控制器开始，称为我创建 `TaskController : UINavigationController`的类的根视图控制器（它已添加为视图 UITableView）；当我启动应用程序时，我只看到TaskRootController 的标题和它的背景颜色。但我没有看到表格视图。如果我的应用程序以 TaskRootController 作为 rootViewController 开始，我会看到表格视图。`UINavigationController``TaskRootController : UIViewController<UITableViewDelegate>`

在可能的情况下如何查看表格视图？PS。即使我将 TaskRootController 切换到 TaskRootController : UITableViewController 行为也是一样的。我的代码如下：

AppDelegate.m

```
@implementation AppDelegate

@synthesize window = _window;
@synthesize taskController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];

    self.taskController = [TaskController alloc];
    self.window.rootViewController = self.taskController;

    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{

}

- (void)applicationDidEnterBackground:(UIApplication *)application
{

}

- (void)applicationWillEnterForeground:(UIApplication *)application
{

}

- (void)applicationDidBecomeActive:(UIApplication *)application
{

}

- (void)applicationWillTerminate:(UIApplication *)application
{

}

@end 
```

任务控制器.m

```
@implementation TaskController

@synthesize taskRootController;

- (void) pushInboxController
{
    TaskBoxController *taskBoxController = [[TaskBoxController alloc] initWithNibName:nil bundle:NULL];
    [self pushViewController:taskBoxController animated:YES];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        [self.navigationBar setBarStyle: UIBarStyleBlack];
        [self.navigationBar setTranslucent: NO];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.taskRootController = [[TaskRootController alloc] initWithNibName:nil bundle:NULL];
    UIViewController *root = self.taskRootController;
    [self initWithRootViewController: root];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear: animated];
    [self performSelector:@selector(pushInboxController)];
}

@end 
```

任务根控制器.m

```
@implementation TaskRootController

@synthesize taskRootView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    NSLog(@"DUPA");

    NSLog(@"SIZE x:%f,y:%f ; %f:%f", self.view.bounds.origin.x, self.view.bounds.origin.y, self.view.bounds.size.width, self.view.bounds.size.height);
    self.view.backgroundColor = [UIColor grayColor];
    self.title = @"Root";
    self.taskRootView = [[UITableView alloc] initWithFrame: CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height) style:UITableViewStyleGrouped];
    self.taskRootView.delegate = self;
    self.taskRootView.dataSource = self;
    [self.view addSubview:self.taskRootView];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1; // put number for section.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return 6; // put number as you want row in section.
}

- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CGFloat result = 20.0f;
    if([tableView isEqual:self.taskRootView])
    {
        result = 40.0f;
    }
    return result;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:57:10.247

添加此委托方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = @"this is row";

    return cell;
} 
```

**编辑 ：**

`init`当您创建 in 对象`TaskController`时放入**`AppDelegate.m`**

```
self.taskController = [[TaskController alloc]init]; 
```

并将委托和数据源都放到`TaskController.h`

```
<UITableViewDataSource, UITableViewDelegate> 
```

并添加其相关方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:11:10.960

在你的 AppDelegate

```
 self.taskController = [[TaskController alloc]initWithNibName:@"TaskController" bundle:[NSBundle mainBundle]];
     UINavigationController *task = [[UINavigationController alloc] initWithRootViewController:self.taskController];

    self.window.rootViewController = task; 
```

在您的任务控制器中

```
 - (void)viewDidLoad
       {
         [super viewDidLoad];
         TaskRootController *tc = [[TaskRootController alloc] initWithNibName:@"TaskRootController" bundle:[NSBundle mainbundle]];
        [self addChildViewController:tc];
        [tc didMoveToParentViewController:self];
        [self.view addSubview:tc.view];
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:15:03.180

尝试这个 ：：

设置 tableview 的委托和数据源

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 50;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [yourArray count];

}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *MyIdentifier = @"MyIdentifier";

    UITableViewCell *cell =[tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil){
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier] autorelease];
    }
    cell.textLabel.text = @"row";
    return cell;
} 
```

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:52:03.507

```
in Appdelegate File :-

self.TaskViewController = [[TaskViewController alloc] initWithNibName:@"TaskViewController" bundle:nil];
self.navigationController=[[UINavigationController alloc]initWithRootViewController:self.TaskViewController];

[self.window setRootViewController:navigationController];//ios-6
                           or
[self.window addSubview:navigationController.view];//<ios-6

Add a Delegate Method in UITableViewDelagates:-

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = @"Name";

    return cell;
} 
```

# ios - 用于处理声音文件的 iOS 框架

> ID：15539789
> 
> 赞同：0
> 
> 时间：2013-03-21T04:54:38.983
> 
> 标签：ios, cocoa-touch, audio, core-audio, audio-recording

我想将录制的声音文件转换为另一种数据格式或可以与另一个相同数据格式的文件进行比较/操作的图形。可能是某种类型的傅里叶变换。iOS 是否提供了一些相同的框架？我知道核心音频框架，AudioToolbox 框架，我不认为这两个框架会帮助我的需要。有没有人知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:01:26.553

你的出发点可能是[这个](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/AudioFormatServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007286)。

[也就是说，通过这个样本](http://developer.apple.com/library/ios/#samplecode/aurioTouch/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007770-Intro-DontLinkElementID_2)也不会错，它有 FFT 的东西。

# struts2 - 如何将查询字符串中的值传递给struts2中的动作类？

> ID：15539792
> 
> 赞同：0
> 
> 时间：2013-03-21T04:54:42.307
> 
> 标签：struts2

我想将查询字符串中的 ID 传递给我的操作类，并希望在我的操作类中使用该 ID。我试过：

```
<li>
  <a href="NextPageData.action?recordID=sessionMap.get(recordID[0])">Next</a>
</li> 
```

但我得到了例外。我已将列表添加到 sessionMap 并希望从 sessionMap 中检索该值作为 queryString 参数。任何人都可以为我提供这个问题的解决方案谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:30:31.827

一般来说，在 Struts2 中，请求参数在动作中自动可用，如果：

1.  您的操作中有一个 getter 和 setter 用于具有相同名称的变量（例如 int getRecordID() setRecordID(int id) 在您的情况下）
2.  您在操作的拦截器堆栈中有 ParametersInterceptor。[1]

[1] 见[http://struts.apache.org/release/2.2.x/docs/interceptors.html](http://struts.apache.org/release/2.2.x/docs/interceptors.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:14:46.773

试试下面的代码

```
<li>
  <a href="NextPageData.action?recordID="+<s:property value="%{sessionMap.get(recordID[0])}/> >Next</a>
</li> 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:09:58.203

如果您保持在会话中，则无需再次作为请求参数发送。您可以直接在 Action 类中访问该会话变量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-01T11:20:26.090

好吧，我不是 Struts 专家，但我尝试了以下我的 Struts 2 Live 项目并且它工作正常。

```
String paramValue = ServletActionContext.getRequest().getParameter("paramName"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-01T11:31:42.160

只需将此代码放在操作类上。

```
String paramValue = ServletActionContext.getRequest().getParameter("recordID"); 
```

# php - PHP 的 include/require 在 Windows 和 CentOS 上的不同行为

> ID：15539793
> 
> 赞同：0
> 
> 时间：2013-03-21T04:54:42.890
> 
> 标签：php, windows, centos

这些是我的 PHP 应用程序`myApp.php`和`mypartsA/main.php`.

我的应用程序.php

```
<?php
echo ("##### myApp is starting now !!! </br>");
require_once('/parts/mypartsA/main.php');
?> 
```

mypartsA/main.php

```
<?php
echo ("#### mypartsA is required </br>");
?> 
```

并且`myApp.php`和`mypartsA/main.php`处于以下结构中。

```
Document_root 
  |
  +--- test
  |     |
  |     +--- myApp.php
  |
  +--- parts
        |
        +--- mypartsA
               |
               +---main.php 
```

我已经在 Windows+Apache 上使用这个应用程序一年了，没有问题，但最近我将它迁移到 CentOS+Apache，然后我得到了与相关的致命错误`include_path`

```
PHP Warning:  require_once(/parts/mypartsA/main.php) 
[<a href='function.require-once'>function.require-once</a>]
: failed to open stream
: No such file or directory 
in /var/www/html/test/myApp.php on line 12 
PHP Fatal error:  require_once() [<a href='function.require'>function.require</a>]
: Failed opening required (/parts/mypartsA/main.php’
(include_path='.:/php/includes:/usr/share/pear:/usr/share/pear/PEAR:/var/www/html') 
in /var/www/html/test/myAPP.php on line 12 
```

根据 PHP.net，如果定义了路径，则 include_path 将被忽略。 [http://www.php.net/manual/en/function.include.php](http://www.php.net/manual/en/function.include.php)

我认为在我的情况下 PHP 尝试`parts`从`C:\`或`/`不从`include_path`.

```
require_once(/parts/mypartsA/main.php); 
```

因此，`myAPP.php`无论是在 Windows 上还是在 CentOS 上，结果都必须是致命错误。

但是我的应用程序已经在 Windows 上运行了一年，没有出现任何错误。PHP 可以`parts`正确找到目录。

可以在 Windows 上尝试上面的代码并查看..

```
##### myApp is starting now !!! 
#### mypartsA is required 
```

或得到错误？

现在，我想知道为什么在 Windows 上运行和在 CentOS 上运行相同代码的结果不同。

我必须检查 PHP.ini 中的哪些指令？

我知道我是否更改此代码以添加绝对路径`$ _SERVER['DOCUMENT_ROOT']`。

```
require_once($_SERVER['DOCUMENT_ROOT']./parts/mypartsA/main.php); 
```

它会运作良好。但是有许多应用程序具有相同的编码风格，我不想全部更改。

这些是附加信息。

include_path 值 phpinfo() 在 Windows 上显示

```
.;C:\PHP;C:\PHP\pear;C:\Apache2.2.22\htdocs 
```

include_path 值 phpinfo() 在 CentOS 上显示

```
.:/php/includes:/usr/share/pear:/usr/share/pear/PEAR:/var/www/html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:00:02.277

```
$path = realpath(dirname(__FILE__)) . "/../../parts/mypartsA/main.php";
require_once($path); 
```

试试这条路

```
$path = "../parts/mypartsA/main.php"; 
```

第二个路径应该与文档根目录一起使用。

# algorithm - 有没有需要 O(1) 时间的算法？

> ID：15539798
> 
> 赞同：-6
> 
> 时间：2013-03-21T04:55:16.690
> 
> 标签：algorithm, big-o

我正在寻找`O(1)`两者都需要时间的算法`search and insertion`。

有没有可用的算法？是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:58:09.720

假设哈希是完美的，并且计算哈希的时间是 O(1)，理论上您可以进行 O(1) 的插入和搜索哈希映射。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-21T04:58:41.947

这不可能。读取您将插入的键将是最好的 O(log n)，因为键必须以二进制表示。因此，每次将大小加倍时，都需要向密钥添加一个额外的二进制数字，因此它不会是 O(1)。更不用说实际插入值了。

除非我们在谈论量子计算？

# spss - 缺失数据和单一插补

> ID：15539803
> 
> 赞同：0
> 
> 时间：2013-03-21T04:55:32.913
> 
> 标签：spss, missing-data

我有一个完整的臭氧数据集，其中包含一些缺失值。我想使用 SPSS 进行单一插补来插补我的数据。

在开始估算我的数据之前，我想随机模拟缺失数据的 5%、10%、15%、25% 和 40% 的数据模式，以评估估算方法的准确性。

有人可以教我如何使用 SPSS 做随机丢失的数据模式吗？

除此之外，有人可以告诉我如何获得性能指标，例如：平均绝对误差、确定系数和均方根误差，以便检查估计缺失值的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:39:33.357

你第一个问题的答案。假设您的研究变量是`y`并且您想模拟变量的缺失`y`。`y_miss`这是根据您的缺失数据模式计算额外变量的示例代码。

```
do if uniform(1) < .05.
comp y_miss = $SYSMIS.
else.
comp y_miss = y.
end if. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:27:36.433

不幸的是，我目前的 SPSS 支持不丢失数据分析，所以我只能给出一些一般性的建议。

首先：对于您丢失的数据模式：只需转到数据 -> 选择案例 -> 随机样本并删除所需数量的案例，然后运行插补。

如果您使用他们的插补模块，您提到的值应该由 spss 提供。有一本手册：ftp: [//public.dhe.ibm.com/software/analytics/spss/documentation/statistics/20.0/de/client/Manuals/IBM_SPSS_Missing_Values.pdf](ftp://public.dhe.ibm.com/software/analytics/spss/documentation/statistics/20.0/de/client/Manuals/IBM_SPSS_Missing_Values.pdf)

# c# - 从列表 C# 中查找不同的元素

> ID：15539809
> 
> 赞同：1
> 
> 时间：2013-03-21T04:55:50.253
> 
> 标签：c#, list, distinct-values

我有一个班级说名为`Product`

```
public class Product
{
    public string Name{ get; set; }

    public int ProductId{ get; set; }

} 
```

我有一个产品列表，具有相同`Name`但不同的`ProductId`。

我想从列表中获得不同的产品`product.Name`

即如果列表是

```
var fullproductList = {
        Name: product,
        ProductId: 1
    }, {
        Name: product,
        ProductId: 2
    }, {
        Name: product,
        ProductId: 3
    }; 
```

我想要上述任何一种产品。

我想在没有这样循环的情况下实现这一点：

```
List<Product> distinctProducts= new List<Product>();

var distictproductName=fullSubjectList.Select(x => x.Name).Distinct().ToList();

foreach (var item in distictproductName)
{
    distinctProducts.Add(fullproductList.Where(x=>x.Name==item).FirstOrDefault());
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T04:59:23.490

通过使用[`MoreLinq`](https://code.google.com/p/morelinq/)，您可以`Distinct`与 lambda 一起使用：

```
fullSubjectList.DistinctBy(x => x.Name).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T05:01:20.513

按名称使用 linq 和组。那会给你与众不同的。看看这个答案以获得一些想法：[LINQ：不同的值](https://stackoverflow.com/questions/998066/linq-distinct-values)

# android - 使用共享操作提供程序时检测共享应用程序

> ID：15539812
> 
> 赞同：0
> 
> 时间：2013-03-21T04:56:25.570
> 
> 标签：android, shareactionprovider

有什么方法可以检测使用共享操作提供程序时选择了哪个共享应用程序，以便我可以为不同的应用程序发送不同的消息？我正在为共享操作提供程序使用以下方法，

```
mShareActionProvider = (ShareActionProvider) menu.findItem(R.id.menu_item_share).getActionProvider();

        mShareActionProvider.setShareIntent(getDefaultShareIntent()); 
```

和意图，

```
 public Intent getDefaultShareIntent(){
              String message = Fname + Mobileno + Homeno + Workmail + Homemail
                + Gtalk + Skype + Address + Company + Title + Website;
      Intent shareIntent = new Intent(Intent.ACTION_SEND);
              shareIntent.putExtra(Intent.EXTRA_TEXT, message); 

         return shareIntent; 

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-01T14:16:16.147

**更新：**

最简单的解决方案是：

```
@Override
public boolean onShareTargetSelected(ShareActionProvider source, Intent intent) {
  String shareTarget = intent.getComponent().getPackageName();
  ...
} 
```

无需复制文件或任何东西。

* * *

如果您碰巧使用后者，请从 Android 源或 ActionBarSherlock 复制一些文件：

*   ActivityChooserModel.java
*   ActivityChooserView.java
*   ShareActionProvider.java

确保您引用了这些文件，而不是您应用程序中的原始文件。

在*ActivityChooserModel.java*中，修改：

```
if (mActivityChoserModelPolicy != null) {
  ResolveInfo info = getActivity(index);
  choiceIntent.putExtra("user_selected_activity", (info.activityInfo != null) ? info.activityInfo.packageName : info.serviceInfo.packageName);
  final boolean handled = mActivityChoserModelPolicy.onChooseActivity(this, choiceIntent);
  if (handled)
    return null;
} 
```

并将所选活动的包名称存储到意图中。然后你可以在你的处理程序中阅读它：

```
@Override
public boolean onShareTargetSelected(ShareActionProvider source, Intent intent) {
  String shareTarget = intent.getStringExtra("user_selected_activity");
  ...
} 
```

并根据所选活动决定以不同方式处理的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-09T17:58:59.140

试试这个。

```
myShareActionProvider.setOnShareTargetSelectedListener(new ShareActionProvider.OnShareTargetSelectedListener() {
            @Override
            public boolean onShareTargetSelected(ShareActionProvider source, Intent intent) {
                String shareTarget = intent.getComponent().getPackageName();
                return false;
            }
        }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T05:05:22.073

看起来不像。但是没有什么能阻止您将其复制并粘贴到您的项目中并根据需要进行修改。

# xml - FedEx Soap v10 - 方案/XML 问题

> ID：15539834
> 
> 赞同：0
> 
> 时间：2013-03-21T04:57:48.480
> 
> 标签：xml, perl, fedex

目前在尝试将我的 XML 提交到 FedEx 的服务器时收到此消息：

```
 'errorCode' => '5',
'reason' => 'Schema validation failed for request.',
'details' => {
    'ValidationFailureDetail' => {
    'xmlLocation' => {
        'NumberOfPieces' => ''
    },{
        'Units' => ''
    },{
        'Value' => ''
    },
    'message' => {
        'Invalid decimal value: expected at least one digit',
        'string value \'\' is not a valid enumeration value for WeightUnits in namespace http://fedex.com/ws/ship/v10',
        'Invalid decimal value: expected at least one digit'
    } 
```

大家有什么建议吗？似乎 Fedex 没有收到“商品”数组，但一切都在设置中（包括 NumberOfPieces'、'Units' 和 'Value'）。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:15:18.480

如果没有看到您的 XML 或您的架构，我应该如何告诉您为什么 XML 对架构无效？消息很清楚：它说有一个名为 WeightUnits 的东西，它应该是一个十进制值，但实际上是一个空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:51:18.517

似乎整个方案不同，奇怪的是，WeightUnits 不在被接受的新模式中，根据 FedEx，WeightUnits 取自 Weight { units:0 }

# java - 如何计算出 95% 的时间呼叫在特定毫秒内返回

> ID：15539835
> 
> 赞同：-1
> 
> 时间：2013-03-21T04:57:55.097
> 
> 标签：java, rest, profiling, percentile

我正在做一个项目，我应该对我们的`REST Service`. 然后弄清楚我们的服务是`90 percentile`多少`95 percentile`。表示通话占用了多少时间`90% of time`或`95% percent of time`

下面是我通过分析我的服务创建的直方图 -

```
0 came back between 1 and 2 ms
0 came back between 3 and 4 ms
0 came back between 5 and 8 ms
0 came back between 9 and 16 ms
0 came back between 17 and 32 ms
2205 came back between 33 and 64 ms
141 came back between 65 and 128 ms
50 came back greater than 128 ms 
```

从上面的直方图中，这意味着`2205`电话在 之间返回`33 and 64 ms`，`141 calls`在 之间返回`65 and 128 ms`。

所以现在我想弄清楚如何计算这个`90 percentile`或`95 percentile`这个是什么？意味着`90 percentage of time`电话在多少毫秒内返回？

对于上面的直方图，我也有一个地图，如果我们不能从上面的直方图中找出这个百分位数，那么我们也可以使用这个地图。

仅从这张地图，我正在创建上面的直方图-

> {213=1, 114=2, 185=1, 131=1, 40=145, 67=8, 49=35, 537=2, 164=1, 565=1, 55=13, 96=1, 546 =1, 117=1, 68=10, 62=6, 83=1, 34=333, 41=108, 179=1, 48=48, 111=1, 129=1, 69=11, 33=1 , 173=1, 61=8, 541=1, 74=7, 180=2, 42=78, 47=46, 56=11, 84=2, 70=12, 228=1, 273=1, 46 =52, 102=1, 225=1, 81=2, 181=1, 563=1, 549=1, 137=1, 73=3, 235=1, 53=17, 90=1, 36=190 , 118=1, 45=78, 35=267, 72=9, 63=16, 54=11, 271=1, 189=1, 209=1, 175=4, 51=23, 203=2, 37 =186, 58=5, 196=2, 237=1, 86=3, 44=81, 64=15, 92=3, 224=1, 71=8, 251=1, 52=12, 78=3 , 43=75, 147=1, 133=1, 580=1, 57=11, 263=1, 566=1, 85=1, 243=1, 38=161, 559=1, 80=3, 132 =1, 194=1, 107=6, 65=5, 183=1, 222=1, 93=1, 60=12, 231=1, 94=1, 66=12, 122=1, 39=135 , 50=35, 76=1, 59=6, 104=1, 158=1, 113=1, 204=1, 87=1, 115=2}

在上面的地图中，`key`是毫秒数，值是`total number of calls` 所以例如 -

`213=1`

这意味着，`1`电话回来了`213 milliseconds`。

`114=2`

`2`电话回来了`114 milliseconds`。

谁能帮我这个？我也可以从`histogram`上面或上面创建百分位数的东西`Map`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:10:03.337

如果您正在进行性能调整，那么我推荐您使用[Metrics](https://github.com/codahale/metrics)，它会告诉您真正发生了什么。

# asp.net - Web 部署任务失败

> ID：15539839
> 
> 赞同：3
> 
> 时间：2013-03-21T04:58:10.383
> 
> 标签：asp.net, asp.net-mvc-3, razor

![在此处输入图像描述](../Images/cfbd1d9f16807b21f43b1b58be44a459.png) 当我单击构建部署包时出现此错误。我已经阅读了一堆关于这个问题的相关帖子，但似乎并没有回答我心中的问题 T_T。

这是我的 Web.Config 上的连接字符串

```
<connectionStrings>
    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
    <add name="ProjectPALEntities" connectionString="metadata=res://*/Models.ProjectPal.csdl|res://*/Models.ProjectPal.ssdl|res://*/Models.ProjectPal.msl;provider=System.Data.SqlClient;provider connection string=';data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\ProjectPAL.mdf;integrated security=True;user instance=True;multipleactiveresultsets=True;App=EntityFramework';" providerName="System.Data.EntityClient" />
  </connectionStrings> 
```

这是项目属性下的打包/发布 SQL 设置。这是我遇到问题的地方。 ![在此处输入图像描述](../Images/71901c7ae967150a0876897c8cf34723.png)
这是上面源数据库的连接字符串。

```
data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\ProjectPAL.mdf;integrated security=True;user instance=True;multipleactiveresultsets=True;App=EntityFramework'; 
```

**问题：**

*   在源数据库的连接字符串中哪个是正确的？

    数据源=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\ProjectPAL.mdf;集成安全=True;用户实例=True;multipleactiveresultsets=True;App=EntityFramework'; （***这是我目前正在使用的****）*

    metadata=res:// */Models.ProjectPal.csdl|res://* /Models.ProjectPal.ssdl|res://*/Models.ProjectPal.msl;provider=System.Data.SqlClient;provider 连接字符串=';数据
    源=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\ProjectPAL.mdf;集成安全=True;用户
    实例=True;multipleactiveresultsets=True;App=EntityFramework'; （**有元数据或没有上述T_T**）

*   我在哪里可以获得目标数据库的连接字符串？抱歉，这是我第一次部署网站。我研究过，但我找不到答案T_T。

*   我怎么可能修复这个错误？

**其他信息：**

*   [在阅读此参考EF 的显式连接字符串](http://blogs.msdn.com/b/rickandy/archive/2008/12/09/explicit-connection-string-for-ef.aspx)后，我更改了 " with '（单引号）

*   我正在使用 Membership Provider 和 Role Provider，我的所有数据都保存在 ProjectPALEntities

如果您需要更多信息，请告诉我。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:12:11.657

好的，这就是我所做的。

我从我的存储库中签出新应用程序并重复我所做的每一个步骤。当我单击 Import from web.config 时，它会在**Connection string for source database**下自动为我创建此连接字符串。

```
Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\ProjectPAL.mdf;Integrated Security=True;Application Name=EntityFramework;User Instance=True 
```

对于目标数据库的**连接字符串，**我只是将其留空，因为我不知道该放什么。

当我单击构建部署包时，错误消息不再显示。
**我希望我知道在目标数据库的连接字符串上放什么 T_T**

# c# - 设置下拉列表选择索引

> ID：15539841
> 
> 赞同：2
> 
> 时间：2013-03-21T04:58:16.883
> 
> 标签：c#, asp.net, drop-down-menu

我有一个按字母顺序显示国家名称的下拉列表。我希望下拉菜单始终将（显示）印度作为默认值。我不想将所选索引设置为常数，因为稍后可能会将其他国家添加到列表中。如何将索引设置为“印度”？

```
 ddlCountryCode.DataSource = ds1.Tables["AUser"];
 ddlCountryCode.DataTextField = "CountryCode";
 ddlCountryCode.SelectedIndex = 
             ddlCountryCode.Items.IndexOf(ddlCountryCode.Items.FindByText("India(+91)"));
 ddlCountryCode.DataBind(); 
```

不工作...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T05:03:19.377

你可以这样使用

```
 DropdownList1.SelectedIndex =    
                  DropdownList1.Items.IndexOf(DropdownList1.Items.FindByValue(strText)); 
```

或者

```
DropdownList1.SelectedIndex =    
                  DropdownList1.Items.IndexOf(DropdownList1.Items.FindByText(strText)); 
```

以编程方式
[设置下拉列表选定项](https://stackoverflow.com/questions/3496456/setting-dropdownlist-selecteditem-programmatically)

## 编辑 1

更改代码的顺序

```
ddlCountryCode.DataSource = ds1.Tables["AUser"];
ddlCountryCode.DataTextField = "CountryCode";
ddlCountryCode.DataBind();

ddlCountryCode.SelectedIndex = 
         ddlCountryCode.Items.IndexOf(ddlCountryCode.Items.FindByText("India(+91)")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T05:09:28.307

```
DropDownList1.SelectedValue = "India"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:02:49.943

在 DataBind() 之后选择索引。数据绑定将项目绑定在“ddlCountryCode.Items”中，因此您可以选择“印度”的索引，其中一项与 ddlCountryCode 存在。

```
DropdownList1.Items is a list so u can use IndexOf()

 ddlCountryCode.DataSource = ds1.Tables["AUser"];
 ddlCountryCode.DataTextField = "CountryCode";
 ddlCountryCode.DataBind();
 ddlCountryCode.SelectedIndex = 
 ddlCountryCode.Items.IndexOf(ddlCountryCode.Items.FindByText("India(+91)")); 
```

# macos - 带有视网膜显示屏的 Macbook Pro 上的 Rstudio

> ID：15539842
> 
> 赞同：4
> 
> 时间：2013-03-21T04:58:20.370
> 
> 标签：macos, r, rstudio

我在配备 Retina 显示屏的 15 英寸 macbook pro 上使用 Rstudio。

Rstudio 中的绘图窗口似乎不支持视网膜显示器的高 DPI，即使在我缩放绘图之后也是如此。

这在[最近](http://www.rstudio.com/ide/docs/release_notes_v0.96)关于改进文本渲染的更新中得到了修复（如此处所示[）](http://support.rstudio.org/help/discussions/suggestions/1280-rstudio-support-for-hidpi-mode-macbook-pro-retina-display)，尽管情节图像仍然以类似的方式模糊。

有没有办法改变它，让它支持视网膜显示？如果不支持我的 Mac 上的视网膜显示，情节真的很难看。

谢谢！

# asp.net - Base64 字符串和图像

> ID：15539844
> 
> 赞同：1
> 
> 时间：2013-03-21T04:58:38.043
> 
> 标签：asp.net, sql-server

当我将图像数据库用于我的 asp.net Web 应用程序时，我发现了两种方法！第一种方法是使用“图像”数据类型，第二种是将图像转换为 base64 字符串并存储在“字节”数据类型中。

我想知道哪种方法在过程中更好，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:01:54.920

[`Image`](http://msdn.microsoft.com/en-us/library/ms187993.aspx) type is deprecated so is not an option. There is no `byte` type in SQL Server, there is a type called [`tinyint`](http://msdn.microsoft.com/en-us/library/ms187745.aspx) which is equivalent to a `byte` type but I'm pretty sure that's not what you're asking.

So here is your *actual* question, corrected of wrong terminology:

> When I use images database for my asp.net web application , i found two methods ! First method is using [`VARBINARY(max)`](http://msdn.microsoft.com/en-us//library/ms188362.aspx) data type , second is convert image to base64 string and store in [`VARCHAR(max)`](http://msdn.microsoft.com/en-us/library/ms176089.aspx) data type.

[Base64](http://en.wikipedia.org/wiki/Base64) encoding adds significant size to binary data, it converts 3 octets into 4 octets, so it adds 33% overhead. That is real estate consumed in your storage (be it database or file).

*However* a web application will serve media files *overwhelmingly* as base64 encoded responses. Having the file already encoded in storage saves CPU on the web server as it can stream the storage content directly, w/o going through base64 encoding. Not that base64 encoding is expensive (is very cheap and very much cache friendly) *when done properly, using streaming semantics*.

So choose your poison: save binary content for smaller disk space used, or take the 33% size penalty for faster response write and less CPU on your web tier.

For an example of properly storing and serving media files from the database see [Download and Upload images from aSP.Net](http://rusanu.com/2010/12/28/download-and-upload-images-from-sql-server-with-asp-net-mvc/)

As for the neverending discussion about the storage be database or file system, I point you toward [To BLOB or Not To BLOB: Large Object Storage in a Database or a Filesystem?](http://research.microsoft.com/pubs/64525/tr-2006-45.pdf) and its conclusion:

> The study indicates that if objects are larger than one megabyte on average, NTFS has a clear advantage over SQL Server. If the objects are under 256 kilobytes, the database has a clear advantage. Inside this range, it depends on how write intensive the workload is.

This study doe snot consider the administrative problems of an out-of database storage (consistent backup-restore, failover) but those kind of problems are only discussed in v2 of products.

# php - Joomla 管理端 URL 在 URL 字符串中从 `&` 更改为 `&`

> ID：15539850
> 
> 赞同：2
> 
> 时间：2013-03-21T04:58:58.633
> 
> 标签：php, joomla, joomla2.5

我已经更改了我的 joomla 网站的服务器，但我现在在管理员面板中遇到了一些问题，页面的 URL 已从更改`&`为`&amp;`

当我尝试编辑任何文章时，它在名称 mins checkin 附近提供锁定选项，我不明白那是什么，并且 url 会像这样

```
http://60pluslife.org/administrator/index.php?option=com_content&amp;view=article&amp;layout=edit&amp;id=2 
```

实际上 url 就是这样

```
http://60pluslife.org/administrator/index.php?option=com_content&view=article&layout=edit&id=2 
```

请给我建议

# r - 将markdown转换为Rd，还是定义自定义markdown转换规则？

> ID：15539851
> 
> 赞同：6
> 
> 时间：2013-03-21T04:59:00.983
> 
> 标签：r, markdown

我正在尝试在 Markdown 中为 R 包编写文档，并将其转换为 Rd 文件。

我想另一种看待这个问题的方式是，我想要一个能够识别各种降价结构并允许我指定如何呈现这些结构的框架，例如：

*   ``text in backticks``转换为`\code{text in backticks}`
*   `**text**`被转换为`\bold{text}`
*   降价列表转换为`\itemize{...}`

等等。

有什么可以让我这样做吗？R 中的`pander`包（环绕 pandoc）看起来很有希望，但我不确定我是否可以指定转换规则（例如，它使用`\texttt`and I want转换反引号`\code`），它还生成一个完整的独立文档，而不仅仅是我的输入片段转换。

R的`markdown`包似乎只是做 markdown -> HTML。看起来它*可能*支持自定义渲染器，但我不确定如何编写（看起来我必须编写 C 代码？）

我追求的是这样的：

```
convertMarkdown(myTextSnippet,
                backticks = function (txt) {
                    return(paste0('\\code{', txt, '}'))
                },
                bold = function(txt) {
                    return(paste0('\\bold{', txt, '}'))
                },
                unordered.list = function (items) {
                    itms <- paste('\\item', items, collapse='\n')
                    return(paste('\\itemize{', itms, '}', sep='\n'))
                },
                # ... and so on
) 
```

这样的事情存在吗？

（奖励：我只是希望能够在我的`roxygen`评论中嵌入 markdown，因此正在考虑将部分评论从 markdown 转换为 rd，然后在输出上运行 roxygen）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-14T08:21:39.913

你看过@gabor-csardi 的maxygen 包吗？

[https://github.com/gaborcsardi/maxygen](https://github.com/gaborcsardi/maxygen)

它基本上可以让您在 Markdown 中编写 roxygen 标头。

[更新] 这些更改已包含在 roxygen2 包中，并将在版本 6 版本中发布。来自 GitHub：

> 大多数字段现在可以使用 Markdown 标记而不是传统的 Rd 语言编写。您可以通过将 Roxygen: list(markdown = TRUE) 添加到 DESCRIPTION 来全局打开 Markdown。@md / @noMd 标签打开/关闭给定块的 Markdown 解析。有关更多详细信息（#364、#431、#499、#506、#507），请参见@gaborcsardi 的“降价”小插图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-23T06:56:46.550

您可以使用`md2rd`Fabian Scheipl 建议的功能：有关详细信息，请参阅[roclet-md2rd.R](https://github.com/fabian-s/roxygen/blob/20dcae9e96f9cc3afd1941a574d2bf709d586874/R/roclet-md2rd.R)。

# javascript - 如何在数字正则表达式中允许空格？

> ID：15539854
> 
> 赞同：1
> 
> 时间：2013-03-21T04:59:16.203
> 
> 标签：javascript, regex

我想用 javascript 正则表达式验证“int”字段。

我正在使用这个 RE 字符串

```
var numbers =/^[0-9]+$/; 
```

此表达式不允许文本框中有空格。

如何创建允许文本框中有空格的正则表达式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T05:01:14.357

添加可选空格：

```
var numbers =/^\s*[0-9]+\s*$/; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T05:01:09.433

在字符集中添加一个空格：

```
/^[0-9 ]+$/ 
```

如果您想保证至少存在一位数字，您可以使用前瞻：

```
/^(?=\s*\d)[\d\s]+$/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T05:19:27.243

此正则表达式允许数字和空格。

```
 /[^\d\s]/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:03:30.467

这取决于您希望在哪里允许空格以及是否只允许输入空格（无数字）。如果您想要求至少一位数字和任何空格分布，您可以这样做：

```
/^(\s*\d+)+\s*$/ 
```

这将允许输入诸如“ 202 555 1212 ”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T05:04:35.300

这将允许使用空格、制表符和数字，但需要至少使用一位数字：

```
^\s*\d[\d\s]*$ 
```

[在线 fiddle.re 演示](http://fiddle.re/3tme6)。

# java - SFTP 连接超时

> ID：15539856
> 
> 赞同：0
> 
> 时间：2013-03-21T04:59:27.520
> 
> 标签：java, sftp

我正在尝试使用 sftp 从服务器下载文件。但是我遇到的任何 api 都没有设置 timeout 的方法。我已经尝试为此使用 zehon-file-transfer 库，并且还看到了一些代码（每个相同的地方都没有设置超时的意图）。为什么我们不为 sftp 定义超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:10:09.227

您是指连接到服务器所需的时间还是从服务器接收响应所需的时间？两者都可以在 JSCAPE 的 API 中定义。请参阅[安全 FTP 工厂](http://www.jscape.com/products/components/java/secure-ftp-factory/)。文档可以在[这里找到](http://files.jscape.com/sftp/docs/html/index.html?overview16.html)

# .net - RDL 2008 Schema 和 RDL 2010 Schema 有什么区别？功能明智

> ID：15539859
> 
> 赞同：3
> 
> 时间：2013-03-21T04:59:45.380
> 
> 标签：.net, sql-server, visual-studio, reporting-services, reportingservices-2005

RDL 2008 Schema 和 RDL 2010 Schema 在功能方面的区别是什么？哪一个支持visual studio 2012 Report Viewer？我将使用 Visual Studio 2012 C# 生成动态报告，以生成 xml 架构。但是想知道新版本中支持哪些新功能，例如折叠椭圆分组等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-03T19:25:57.113

您可以比较 xsd 文件找到确切的差异，但这是 2008 年和 2010 年（2008 R2）之间的主要变化：

2010

*   **ReportSection 类型的 ReportSections 列表已添加到顶级 Report 类型**
    *   Body、Width 和 Page 标签移到 ReportSection 标签中
*   **DataSetType 的新 SharedDataSet 类型**
*   **支持新地图图表**
*   删除了一些与 Code 相关的 ChartType 字段
*   删除了一些 Chart DerivedSeriesFormula 枚举
*   更改了 StateIndicatorType 的一些字段
*   更改了 IndicatorStateType 的一些字段

2010：http: [//schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition/ReportDefinition.xsd](http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition/ReportDefinition.xsd)

2008：http: [//schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition/ReportDefinition.xsd](http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition/ReportDefinition.xsd)

2005：http: [//schemas.microsoft.com/sqlserver/reporting/2005/01/reportdefinition/ReportDefinition.xsd](http://schemas.microsoft.com/sqlserver/reporting/2005/01/reportdefinition/ReportDefinition.xsd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:38:37.023

这些是不同的东西。让我试着解释一下：

2008 年：

*   将其元数据存储在 SQL2005 或 SQL 2008 数据库中

*   可以运行 RDL 2003/10、RDL 2005/01、RDL 2007/01 和 RDL 2008/01。RDL 是报表设计器生成的报表定义语言。

标准 2005：

*   将其元数据存储在 SQL2000 或 SQL 2005 数据库中

*   可以运行 RDL 2003/10 和 RDL 2005/01

投标 2005（报表设计器 2005）：

*   生成 RDL 2005/01

*   可以直接发布到 RS 2005 和 RS 2008

2008 年投标：

*   当前生成 RDL 2007/01，将由 RTM 生成 RDL 2008/01

*   可以直接发布到 RS 2008，但不能“降级”RDL。

我希望这能让它更清楚。

# c# - wcf 奇怪的行为

> ID：15539877
> 
> 赞同：0
> 
> 时间：2013-03-21T05:01:15.993
> 
> 标签：c#, wcf, formatting

```
<system.serviceModel>
  <services>
    <service name="Coevery.Services.Document.DocumentService" 
             behaviorConfiguration="aaa">
      <endpoint address="" 
                binding="basicHttpBinding" 
                bindingConfiguration="documentbinding" 
                contract="Coevery.Services.Document.IDocumentService">
      </endpoint>
    </service>
  </services>
  <bindings>
    <basicHttpBinding>
      <binding maxBufferPoolSize="2147483647" 
               maxReceivedMessageSize="2147483647" 
               allowCookies="true">
        <security mode="None">
        </security>
        <readerQuotas maxArrayLength="2147483647" 
                      maxNameTableCharCount="2147483647"
                      maxStringContentLength="2147483647" 
                      maxDepth="2147483647" 
                      maxBytesPerRead="2147483647" />
      </binding>
      <binding name="documentbinding" 
               closeTimeout="04:01:00" 
               openTimeout="04:01:00" 
               receiveTimeout="04:10:00" 
               sendTimeout="04:01:00" 
               allowCookies="false" 
               bypassProxyOnLocal="false" 
               hostNameComparisonMode="StrongWildcard" 
               maxBufferSize="2147483647" 
               maxBufferPoolSize="2147483647" 
               maxReceivedMessageSize="2147483647" 
               messageEncoding="Mtom" 
               textEncoding="utf-8" 
               useDefaultWebProxy="true">
        <readerQuotas maxDepth="2147483647" 
                      maxStringContentLength="2147483647" 
                      maxArrayLength="2147483647" 
                      maxBytesPerRead="2147483647" 
                      maxNameTableCharCount="2147483647" />
      </binding>
    </basicHttpBinding>
  </bindings>
  <behaviors>
    <serviceBehaviors>
      <behavior name="aaa">
        <serviceSecurityAudit auditLogLocation="Application" 
                              serviceAuthorizationAuditLevel="Failure"
                              messageAuthenticationAuditLevel="Failure" 
                              suppressAuditFailure="true" />
        <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
        <serviceMetadata httpGetEnabled="true" />
        <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
        <serviceDebug includeExceptionDetailInFaults="true" />
        <serviceCredentials>
          <serviceCertificate findValue="WCfServer" 
                              storeLocation="LocalMachine" 
                              storeName="TrustedPeople"
                              x509FindType="FindBySubjectName"/>
        </serviceCredentials>
        <dataContractSerializer maxItemsInObjectGraph="2147483647" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="True" />
</system.serviceModel> 
```

如果行为名称 =“aaa” => 此服务的元数据发布当前被禁用。但是没有名字就可以了。

有谁知道那有什么问题？每次使用 wcf 时我都会迷路：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:28:14.007

这是 WCF 4 的特性。当您省略名称时，WCF 服务将其视为默认行为。请参阅[http://msdn.microsoft.com/en-us/library/ee354381.aspx](http://msdn.microsoft.com/en-us/library/ee354381.aspx)：

> 在 WCF 3.x 中，您必须定义通过“behaviorConfiguration”属性显式应用于服务和终结点的命名行为配置。使用 WCF 4，您可以通过在配置定义中省略名称来定义默认行为配置。如果您将这些默认行为添加到 machine.config，它们将应用于机器上托管的所有服务或端点。

# entity-framework - 使用 Include() 时如何避免在 EF 中生成大量 SQL 查询

> ID：15539886
> 
> 赞同：12
> 
> 时间：2013-03-21T05:02:10.347
> 
> 标签：entity-framework, entity-framework-4

我正在使用 EF（dll 版本为 4.4）来查询数据库。该数据库包含几个包含课程信息的表格。当查看实际发送到数据库的内容时，我看到了一个庞大的、近 1300 行的 SQL 查询（由于它的大小，我不会在这里粘贴）。我在上下文中运行的查询如下所示：

```
entities.Plans
  .Include("program")
  .Include("program.offers")
  .Include("program.fees")
  .Include("program.intakes")
  .Include("program.requirements")
  .Include("program.codes")
  .Include("focuses")
  .Include("codes")
  .Include("exceptions")
  .Include("requirements")
where plans.Code == planCode
select plans).SingleOrDefault(); 
```

我想避免在从每个相关表中收集信息时返回服务器，但是对于如此大的查询，我想知道是否有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T10:11:22.893

有点晚了，但由于您的数据每天只更改一次，请考虑将您需要的所有内容放入索引视图中，并将此视图放入您的 EF 模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T04:36:20.087

当您执行预先加载时，如果您选择所需的实体，那么它就可以了。否则，您可以使用延迟加载，但正如您指定的那样，您不希望数据库往返，所以您可以避免它。

我建议，如果多次使用此查询，那么您可以使用编译查询。这样它就会提高性能。

如果需要，请通过此链接.. [http://msdn.microsoft.com/en-us/library/bb896297.aspx](http://msdn.microsoft.com/en-us/library/bb896297.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-02T22:14:26.797

如果您正在使用`DbContext`，则可以使用`.Local`上下文上的属性来查看您的实体是否已被检索并因此附加到上下文。

如果查询之前已经运行并且您的根实体`Plan`已经基于`Plan.Code == planId`该上下文的生命周期。

本文[可能](http://blogs.msdn.com/b/adonet/archive/2011/02/01/using-dbcontext-in-ef-feature-ctp5-part-7-local-data.aspx)有助于使用`.Local`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T03:28:16.397

您通常可以`.Include()`在 where 子句之后添加。这意味着您只提取与您想要的信息相匹配的信息，看看这是否会减少您的查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-25T16:16:03.487

您*可以*通过使用投影而不是拉回引用的实体来获得*更简洁的 SQL 查询：*`Include`

```
var planAggregate = 
 (from plan in entities.Plans
  let program = plan.Program
  let offers = program.Offers
  let fees = program.Fees
  //...
  where plan.Code == planCode
  select new {
    plan
    program,
    offers,
    fees,
    //...
  })
  .SingleOrDefault(); 
```

如果您在上下文中禁用延迟加载，这种查询将导致您的实体的导航属性被包含在您的查询中的实体填充。

（我只在 EF.dll v5.0 上对此进行了测试，但它在 EF.dll v4.4 上的行为应该相同，这只是 .NET 4.0 上的 EF5。当我使用这种模式而不是`Include`类似形状的模式进行测试时查询它从 500 行 SQL 中减少了大约 70 行。您的里程可能会有所不同。）

# javascript - 检查是否使用 javascript/php 启用了 Safari 阻止“来自第三方和广告商”的 cookie

> ID：15539892
> 
> 赞同：2
> 
> 时间：2013-03-21T05:02:39.993
> 
> 标签：javascript, cookies, safari

我面临一个问题，在我的网站支付网关（migs）中使用 iframe，在 Safari 浏览器中，默认 cookie 块是“来自第三方和广告商”，因此从网关（migs）响应中收到错误“cookie not enabled error” . 我需要使用 php/javascript 检测此类 cookie 块以显示此 cookie 块问题。

--

编辑：

我面临同样的问题，iOS7 阻止我的 LinkedIn 社交登录按钮工作，因为“阻止来自第三方的 cookie”被禁用。在缺乏解决方案的情况下，我想知道如何检查它们是否启用了 Javascript 或 Javascript+PHP。@lisovaccaro

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-29T01:34:48.757

我想这样做的一种方法是在另一个域（不是子域，[根据定义](http://en.wikipedia.org/wiki/HTTP_cookie#Third-party_cookie)，但我没有测试过）上有一个脚本，它只是设置一个 cookie，然后脚本可以返回 JSONP，这样你就可以使用它了另一个域上的 javascript。所以像：

PHP ( cookie.php )

```
<?php
header("Content-type: application/javascript");
header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

if(isset($_GET["set"])){ //first run here
    setcookie("cookie_test","cookies",time()+3600);
    //redirect to self after setting cookie so we don't have to call script twice
    header('Location: cookies.php?&callback='.@$_GET["callback"]);
    die(); //death
}
//once redirected should go here
$cookie_set=array("cookies"=>isset($_COOKIE["cookie_test"]));
echo @$_GET["callback"]. "(" . json_encode($cookie_set) . ")"; 
```

Javascript/Jquery

```
//callback=? for jquery to know it's jsonp. &set so the script sets first
$.getJSON("http://another.domain.com/cookies.php?callback=?&set")
    .done(function(data){
       if(data.cookies){
          //third party cookies are enabled
       } else {
          //third party cookies probably disabled
       }
    }) 
```

[演示](http://jsfiddle.net/mfirdaus/Ruj8F/)。在 Mac 上的 Safari 上进行了测试。

# html - 如何在 Firefox 和 chrome 中实现相同的行高？

> ID：15539896
> 
> 赞同：1
> 
> 时间：2013-03-21T05:02:53.327
> 
> 标签：html, css

当使用相同的字体时，chrome和firefox给它们不同的行高，有时你需要它们在浏览器中是相同的......现在遇到这个问题时，我必须同时给出字体大小和行高（以像素为单位），但它似乎不是最好的解决方案。应该使用不同的单位吗？我如何使 chrome 和 firefox 渲染字体类似？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:54:26.537

您可以将行高设置为纯数字，根据定义，它将被视为相对于元素的字体大小，例如`line-height: 1.2`.

您也可以使用`em`单位，例如`line-height: 1.2em`，但内部元素将继承（除非它们有自己的行高设置）计算值，而不是相对数字。如果嵌套元素有不同的字体大小，这很重要，通常应该使用相对行高。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T05:06:48.753

请使用 Yahoo 的 CSS 重置，这应该可以解决跨浏览器问题。

# sql - 按条款分组以获取最高薪员工的姓名

> ID：15539900
> 
> 赞同：2
> 
> 时间：2013-03-21T05:03:10.390
> 
> 标签：sql, sql-server, tsql

我有一张员工表，其中包含部门、员工和薪水。我想要一个查询来列出部门明智的最高薪水和具有该薪水的员工的姓名。

我知道这很简单。我用谷歌搜索但找到了这样的答案，其中只列出了部门和薪水

```
SELECT dept, SUM (salary)
FROM employee
GROUP BY dept; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T05:09:49.027

```
SELECT e1.*
FROM employee e1
JOIN (SELECT dept, MAX(salary) FROM employee GROUP BY dept) e2 ON
    e1.dept = e2.dept AND e1.salary = e2.salary 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T05:06:13.600

SQL Server 2008 支持`Window Functions`帮助您获得所需的内容。

```
WITH recordList
AS
(
    SELECT  dept, employeeName, salary,
            DENSE_RANK() OVER (PARTITION BY dept ORDER BY salary DESC) rn
    FROM    employee
)
SELECT dept, employeeName, salary
FROM   recordList
WHERE  rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/409d1/1)
*   [TSQL 排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T05:07:53.380

```
 SELECT e.*, d.deptname
    FROM employee e
    JOIN department d ON e.deptid = d.deptid
   WHERE EXISTS (SELECT 1
                   FROM employee e_in
                   JOIN department d_in ON e_in.deptid = d_in.deptid
                  WHERE d_in.deptid = d.deptid
               GROUP BY d_in.deptid
                 HAVING MAX(e_in.salary) = e.salary) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-21T05:17:49.197

这会做到的。

```
SELECT E1.DEPT, E2.ENAME, E1.HIGHEST_SALARY
FROM
(SELECT DEPT, MAX(SALARY) HIGHEST_SALARY
FROM EMPLOYEE
GROUP BY DEPT) E1
INNER JOIN EMPLOYEE E2 ON E1.HIGHEST_SALARY = E2.SALARY
AND E1.DEPT = E2.DEPT 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-26T04:26:45.270

```
select * from (select salary,last_name,dense_rank()
over (order by salary desc)
sal_rank from employees) where sal_rank <=3; 
```

就是这样......这是下面的输出：

```
SALARY LAST_NAME                   SAL_RANK
---------- ------------------------- ----------
 24000 King                               1
 17000 Kochhar                            2
 17000 De Haan                            2
 14000 Russell                            3 
```

# php - PHP IMAP 解码消息

> ID：15539902
> 
> 赞同：15
> 
> 时间：2013-03-21T05:03:26.630
> 
> 标签：php, imap

我有通过 base64 编码和 8 位编码发送的电子邮件。我想知道如何使用 imap_fetchstructure 检查消息的编码（已经这样做了大约两个小时，所以丢失了），然后正确解码。

Gmail 和邮箱（iOS 上的应用程序）以 8 位发送，而 Windows 8 的邮件应用程序以 base64 发送。无论哪种方式，我都需要通过检测它使用的编码类型来解码它是 8bit 还是 base64。

使用 PHP 5.1.6（是的，我应该更新，一直很忙）。

我真的没有代码可以显示。这就是我所拥有的：

```
<?php
$hostname = '{********:993/imap/ssl}INBOX';
$username = '*********';
$password = '******';

$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to server: ' . imap_last_error());

$emails = imap_search($inbox,'ALL');

if($emails) {

    $output = '';

    rsort($emails);

    foreach($emails as $email_number) {

        $overview = imap_fetch_overview($inbox,$email_number,0);
        $message = imap_fetchbody($inbox,$email_number,2);
        $struct = imap_fetchstructure($inbox, $email_number);

        $output.= '<div class="toggle'.($overview[0]->seen ? 'read' : 'unread').'">';
        $output.= '<span class="subject">'.$overview[0]->subject.'</span> ';
        $output.= '<span class="from">'.$overview[0]->from.'</span>';
        $output.= '<span class="date">on '.$overview[0]->date.'</span>';
        $output.= '</div>';

        /* output the email body */
        $output.= '<div class="body">'.$message.'</div>';
    }

    echo $output;
} 

imap_close($inbox);
?> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-28T17:08:48.093

imap_bodystruct() 或 imap_fetchstructure() 应该将此信息返回给您。以下代码应该完全符合您的要求：

```
<?php
$hostname = '{********:993/imap/ssl}INBOX';
$username = '*********';
$password = '******';

$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to server: ' . imap_last_error());

$emails = imap_search($inbox,'ALL');

if($emails) {
    $output = '';
    rsort($emails);

    foreach($emails as $email_number) {
        $overview = imap_fetch_overview($inbox,$email_number,0);
        $structure = imap_fetchstructure($inbox, $email_number);

        if(isset($structure->parts) && is_array($structure->parts) && isset($structure->parts[1])) {
            $part = $structure->parts[1];
            $message = imap_fetchbody($inbox,$email_number,2);

            if($part->encoding == 3) {
                $message = imap_base64($message);
            } else if($part->encoding == 1) {
                $message = imap_8bit($message);
            } else {
                $message = imap_qprint($message);
            }
        }

        $output.= '<div class="toggle'.($overview[0]->seen ? 'read' : 'unread').'">';
        $output.= '<span class="from">From: '.utf8_decode(imap_utf8($overview[0]->from)).'</span>';
        $output.= '<span class="date">on '.utf8_decode(imap_utf8($overview[0]->date)).'</span>';
        $output.= '<br /><span class="subject">Subject('.$part->encoding.'): '.utf8_decode(imap_utf8($overview[0]->subject)).'</span> ';
        $output.= '</div>';

        $output.= '<div class="body">'.$message.'</div><hr />';
    }

    echo $output;
}

imap_close($inbox);
?> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-03T13:30:11.197

你可以看看这个例子。

[地图/地图](https://github.com/geerlingguy/Imap/blob/1.x/JJG/Imap.php#L183-L195)

这是代码片段

```
switch ($encoding) {
    # 7BIT
    case 0:
        return $text;
    # 8BIT
    case 1:
        return quoted_printable_decode(imap_8bit($text));
    # BINARY
    case 2:
        return imap_binary($text);
    # BASE64
    case 3:
        return imap_base64($text);
    # QUOTED-PRINTABLE
    case 4:
        return quoted_printable_decode($text);
    # OTHER
    case 5:
        return $text;
    # UNKNOWN
    default:
        return $text;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T11:21:24.360

imap_fetchstructure() 的返回对象

1.  编码（体传输编码）

传输编码（可能因​​使用的库而异）

0 7 位 1 8 位 2 二进制 3 BASE64 4 引用可打印 5 其他

```
$s = imap_fetchstructure($mbox,$mid);
if ($s->encoding==3)
    $data = base64_decode($data); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-05-31T16:17:43.280

```
 // Best for reading attached file from e-mail as well as body of the mail
            $hostname = '{imap.gmail.com:993/imap/ssl}Inbox';
            $username = 'xzy.xyz@xyz.com';
            $password = '****************';

            $inbox = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' . imap_last_error());  
            $emails   = imap_search($inbox, 'SUBJECT "'.$subject.'"');
            rsort($emails);
            foreach ($emails as $key => $value) {

                $overview = imap_fetch_overview($inbox,$value,0);
                $message_date = new DateTime($overview[0]->date);
                $date = $message_date->format('Ymd');
                $message = imap_fetchbody($inbox,$value,2);
                $structure = imap_fetchstructure($inbox, $value);
                $attachments = [];
                if(isset($structure->parts) && count($structure->parts)) 
                {
                    for($i = 0; $i < count($structure->parts); $i++) 
                    {
                        $attachments[$i] = array(
                                'is_attachment' => false,
                                'filename' => '',
                                'name' => '',
                                'attachment' => ''
                            );
                        if($structure->parts[$i]->ifdparameters) 
                        {
                            foreach($structure->parts[$i]->dparameters as $object) 
                            {
                                if(strtolower($object->attribute) == 'filename') 
                                {
                                    $attachments[$i]['is_attachment'] = true;
                                    $attachments[$i]['filename'] = $object->value;
                                }
                            }
                        }

                        if($structure->parts[$i]->ifparameters) 
                        {
                            foreach($structure->parts[$i]->parameters as $object) 
                            {
                                if(strtolower($object->attribute) == 'name') 
                                {
                                    $attachments[$i]['is_attachment'] = true;
                                    $attachments[$i]['name'] = $object->value;
                                }
                            }
                        }

                        if($attachments[$i]['is_attachment']) 
                        {
                            $attachments[$i]['attachment'] = imap_fetchbody($inbox, $value, $i+1);                           
                            if($structure->parts[$i]->encoding == 3) //3 = BASE64 encoding
                            { 
                                $attachments[$i]['attachment'] = base64_decode($attachments[$i]['attachment']);
                            }
                            elseif($structure->parts[$i]->encoding == 4) //4 = QUOTED-PRINTABLE encoding
                            { 
                                $attachments[$i]['attachment'] = quoted_printable_decode($attachments[$i]['attachment']);
                            }
                        }
                    }
                }
            }
            imap_close($inbox);//Never forget to close the connection 
```

# c++ - 如何在 C++ 中使用 getline 设置读取输入的时间？

> ID：15539910
> 
> 赞同：-1
> 
> 时间：2013-03-21T05:04:14.053
> 
> 标签：c++

我正在尝试开发一个程序，它等待特定时间段的输入，并在 c++ 中一段时间​​后出来，就像我们在 atm 机器中所做的那样。任何人都可以尝试帮助我。

```
#include <iostream>
#include <ctime>
#include<string>
using namespace std;

int main(){
 string name;
 cout << "Enter your name: ";
 int endTime= 5;
 int i=0;
// cout<<endTime<<endl; 
 while(i < endTime)
 {
   getline(cin, name);
    i++;
    endTime--;
   if( i > endTime && (name.empty()))

     break;
 }

 cout << "NO NAME ENTERED!!" << endl; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:07:59.557

您的部分问题是 getline() 是一个阻塞调用，并且在有人输入内容之前不会返回。

你可以做的是研究线程——有两个不同的线程，其中一个单独负责观察时间，如果时间已经过去，那么你发送一个信号来杀死另一个线程。

您在此处显示的输入法受到很大限制。

# r - 如何使用 read.csv 或 read.table 读取逗号分隔的文件，其中字段有逗号和双引号

> ID：15539912
> 
> 赞同：2
> 
> 时间：2013-03-21T05:04:17.933
> 
> 标签：r

想知道是否有人知道如何使用`read.table`或`read.csv`读取逗号分隔的文件，其中的字段也有命令和/或双引号？

例子：

```
time, pid, commandline
----------------------
1:00, 123, ksh "test.ksh";echo "hello, world" 
```

如您所见，列命令行同时具有双引号和逗号。我已经使用了 read.table 和 read.csv 并在命令行字段周围添加了额外的双引号，hello 和 world 是拆分的。任何想法如何导入此类字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T05:27:52.037

我已经发生过几次这种情况。我使用这个`stringr`包来完全解决它。

```
library(stringr)    
x <- '1:00, 123, ksh "test.ksh";echo "hello, world"' 
# You'll probably just use readLines(file("mydata.txt"))
str_split_fixed(x,", ",3)

     [,1]   [,2]  [,3]                                    
[1,] "1:00" "123" "ksh \"test.ksh\";echo \"hello, world\"" 
```

# authentication - 允许用户使用 Azure 移动服务选择多种身份验证方法

> ID：15539913
> 
> 赞同：1
> 
> 时间：2013-03-21T05:04:19.397
> 
> 标签：authentication, mobile, service, azure

我想让我的用户在登录时从 Azure 移动服务提供的所有可用身份验证选项中进行选择，但如果说他们第一次选择使用 Facebook 进行身份验证，然后下一次选择使用 Facebook 进行身份验证，我不确定如何将他们的帐户链接在一起当他们运行应用程序时，他们会选择不同的服务。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-27T11:22:28.853

您必须使用一个用户名，在插入您的表时，您会查看是否存在此用户名，然后链接它。当然，如果另一个人想使用相同的用户名登录，这可能是个问题。

最聪明的做法是从用户帐户中检索一些信息，这样您就可以看到一些相同的值。然后你可以在里面链接它们。

您可以查看此 Windows Azure 多重身份验证： http: [//www.windowsazure.com/en-us/documentation/services/multi-factor-authentication/](http://www.windowsazure.com/en-us/documentation/services/multi-factor-authentication/)

# android - ViewGroup_instance.addView(View_instance)，子类如何接受超类实例？

> ID：15539921
> 
> 赞同：1
> 
> 时间：2013-03-21T05:04:47.837
> 
> 标签：android, android-view, viewgroup

我对这种方法的看法：

`ViewGroup`, 即`subclass`of ,因为继承层次关系,`View`不能接受, 所以工作为for . `View_instance``ViewGroup_instance``container``View_instance`

它是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:39:51.733

这些`ViewGroup.addView()`方法与继承无关，这些方法只是`ViewGroup`实现的一部分（除了从 继承的行为`View`）以允许添加子视图。这些`addView()`方法使用`View`超类来允许添加任何`View`（简单视图或布局分组视图）。

# java - Hibernate - 更新表中的主键“id”列

> ID：15539922
> 
> 赞同：6
> 
> 时间：2013-03-21T05:04:57.143
> 
> 标签：java, hibernate, hbm

在我的 Java 应用程序中，我使用休眠 .hbm 文件来访问数据库；这是否可以更新表中的主键“id”列？我的 .hbm 文件中的“id”列如下：

```
<hibernate-mapping package="org.jems.user.model">
<class name="Student_Details" table="t_student">
<id name="id" type="int" column="id">
<generator class="increment"/>
</id>
<property name="name" column="name" type="string" unique="true" not-null="true" />
<property name="description" column="description" type="string"  />
<property name="comments" column="comments" type="string"  />
<property name="active"     column="isActive"   type="boolean"  not-null="true" />
</class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T05:14:31.110

试试这个：

```
String hql="update table set id=? where id=? ";
Query query=HibernateSessionFactory.getSession().createQuery(hql);
query.setInteger(0,1);
query.setInteger(1,2);
query.executeUpdate();
HibernateSessionFactory.getSession().beginTransaction().commit(); 
```

* * *

或者只使用 sql：

```
String sql = "update table set id = ? where id= ?"
Session session = HibernateSessionFactory.getSession();  
SQLQuery query = session.createSQLQuery(sql);
query.setParameter(0, 1);
query.setParameter(1, 2); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T05:14:56.070

不，Hibernate 不允许更改主键。通常，如果需要更改主键值，则主键值永远不应更改，而不是主键列不是主键的好候选者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-19T03:59:13.160

如果您更喜欢通过实体而不是查询进行更新，则有一种解决方法：

```
1) clone the entity to a new entity.
2) delete the old entity. (be careful of your cascade children entities)
3) change the primary key of new entity (or set it null depend your generation strategy).
4) save the new entity. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:10:57.697

在休眠时，列值会根据您使用的生成策略`id`自动递增。`session.save()`检查[这篇](http://www.mkyong.com/hibernate/hibernate-component-mapping-example/)文章以获得一个简单的例子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T05:15:55.753

尝试编写查询

`update table_name set id=value where`.............（指定剩余条件）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-27T11:13:21.707

基本上，Hibernate 不允许更新或更改数据库实体的主键。原因是您通过某些查询或 .get 或 .load 方法从数据库中获取的实体数据进入持久上下文层。因此，从休眠的角度来看，更新此类持久实体对象意味着从数据库中删除旧实体对象并创建新实体对象。
最好进行正常的更新查询，例如

```
Query query=HibernateSessionFactory.getSession().createQuery(update table set id=? where id=?);
query.executeUpdate();
HibernateSessionFactory.getSession().beginTransaction().commit(); 
```

# c# - 如何获取网页浏览器的 html 源代码（仅包含 javascript 代码）

> ID：15539926
> 
> 赞同：0
> 
> 时间：2013-03-21T05:05:14.157
> 
> 标签：c#, browser

如何获取网络浏览器的 html 源代码 (DocumentText)（仅包含 javascript 代码）？
我们可以在 webbrowser 中看到整个页面，但它的 DocumentText 只包含 javascript 代码！
当我在 ff 或其他浏览器中打开该页面时，源代码不显示 html，我们只有 javascript 代码。
发生了什么，如何在 webbrowser 中调用该页面内的按钮的单击事件？

**编辑：**

```
 IHTMLDocument2 document = webBrowser1.Document.DomDocument as IHTMLDocument2;
    if (document != null)
    {
        string content = document.body.innerText;
        if (content != null)
        {
           bla bla bla
        }
    } 
```

通过这些代码`content`始终为空

或者

```
 if (webBrowser1.DocumentText.Contains("a button's id"))
        {
               bla bla bla
        } 
```

通过这些代码，我们在 DocumentText 中只有 javascript，在 DocumentText 中没有那个按钮的 id 可以调用！
在网页浏览器组件中加载该页面后，如何找到该按钮或如何填写输入？

# jquery - jquery mobile 可以链接到 Messenger（whatapps、微信或其他）吗？

> ID：15539929
> 
> 赞同：0
> 
> 时间：2013-03-21T05:05:32.150
> 
> 标签：jquery, html, jquery-mobile

我可以创建一个可以在我的设备上打开其他信使（whatsapp、微信或其他）的链接吗？

我还创建了一个使用普通短信到短信的链接

```
document.location.href = "sms:" + $("#ContactNumber").val() + "?body=" + $("#SMSContent").val(); 
```

在短信中运行良好，但无法检测到我设备上的其他信使应用程序。

这可以在jquery mobile上做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:59:03.373

我假设你在 android 的 WebView 上。

如果您执行以下操作，它将调用您手机中的默认拨号程序

`<a href="tel:555-123-4567">`

您也可以按如下方式覆盖您的方法来调用自定义意图

```
public boolean shouldOverrideUrlLoading(WebView wv, String url)
{
    if(isNumber)
    {
        //Get the number from the URL
        Intent intent = new Intent(Intent.ACTION_DIAL);
        intent.setData(Uri.parse("tel:12345"));
        startActivity(intent);
        return true;
    }
    return false;
} 
```

阅读[文档以进行更多调整](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)

阅读有关 URI 标准的更多信息[Wikipedia](http://en.wikipedia.org/wiki/URI_scheme)

# css - 使用 @media 查询更改 nth-child() 属性

> ID：15539933
> 
> 赞同：-2
> 
> 时间：2013-03-21T05:05:55.633
> 
> 标签：css, media-queries, css-selectors

我目前正在尝试使用 @media 查询更改 nth-child() 属性，但由于某种原因，媒体查询不会影响它。我正在尝试做这样的事情。

```
@media all (min-width:641px) {
   .photo:nth-child(4n) {
       margin: 0 25px 25px 0;
   }

@media all (min-width: 1000px) {
   .photo:nth-child(3n) {
       margin: 0 25px 25px 0;
   } 
```

它与（4n）没有变化。

有谁知道发生了什么？我在看东西吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:36:04.423

也许您的初始定义`.photo:nth-child`是在级联中的媒体查询定义之后并被覆盖。如果是，请在定义之后删除媒体查询或尝试`!important`在定义之后放置。

还要考虑您是否想要`min-width`或`max-width`.

这些只是第一印象的假设。问题不是很清楚...

# android - onBackPressed() 显示错误

> ID：15539934
> 
> 赞同：0
> 
> 时间：2013-03-21T05:05:55.727
> 
> 标签：android, android-activity, popup

当单击 mainactivity 中的后退按钮时，我想添加退出警告。为此，我正在使用此代码

```
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub

    final Dialog dialoge=new Dialog(MainActivity.this,android.R.style.Theme_Translucent_NoTitleBar);
    dialoge.setContentView(R.layout.popup_layout);

    Button yes=(Button)dialoge.findViewById(R.id.yes);
    yes.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            MainActivity.this.finish();

        }
    });
    Button no=(Button)dialoge.findViewById(R.id.no);
    no.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            dialoge.cancel();
        }
    });

    dialoge.show();
} 
```

这是有效的，但退出时显示一些错误。

Logcat 是

```
 03-21 10:25:57.192: E/WindowManager(14488): Activity com.example.design.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@447fec28 that was originally added here
03-21 10:25:57.192: E/WindowManager(14488): android.view.WindowLeaked: Activity com.example.design.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@447fec28 that was originally added here
03-21 10:25:57.192: E/WindowManager(14488):     at android.view.ViewRoot.<init>(ViewRoot.java:251)
03-21 10:25:57.192: E/WindowManager(14488):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
03-21 10:25:57.192: E/WindowManager(14488):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
03-21 10:25:57.192: E/WindowManager(14488):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
03-21 10:25:57.192: E/WindowManager(14488):     at android.app.Dialog.show(Dialog.java:241)
03-21 10:25:57.192: E/WindowManager(14488):     at com.example.design.MainActivity.onBackPressed(MainActivity.java:97)
03-21 10:25:57.192: E/WindowManager(14488):     at android.app.Activity.onKeyUp(Activity.java:1895)
03-21 10:25:57.192: E/WindowManager(14488):     at android.view.KeyEvent.dispatch(KeyEvent.java:1283)
03-21 10:25:57.192: E/WindowManager(14488):     at android.app.Activity.dispatchKeyEvent(Activity.java:2075)
03-21 10:25:57.192: E/WindowManager(14488):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1673)
03-21 10:25:57.192: E/WindowManager(14488):     at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2493)
03-21 10:25:57.192: E/WindowManager(14488):     at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2463)
03-21 10:25:57.192: E/WindowManager(14488):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1752)
03-21 10:25:57.192: E/WindowManager(14488):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-21 10:25:57.192: E/WindowManager(14488):     at android.os.Looper.loop(Looper.java:143)
03-21 10:25:57.192: E/WindowManager(14488):     at android.app.ActivityThread.main(ActivityThread.java:4914)
03-21 10:25:57.192: E/WindowManager(14488):     at java.lang.reflect.Method.invokeNative(Native Method)
03-21 10:25:57.192: E/WindowManager(14488):     at java.lang.reflect.Method.invoke(Method.java:521)
03-21 10:25:57.192: E/WindowManager(14488):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
03-21 10:25:57.192: E/WindowManager(14488):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
03-21 10:25:57.192: E/WindowManager(14488):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T05:17:14.463

您不会关闭对话框，这就是警告所说的泄漏。

```
@Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        // here you need to dismiss your dialog before finishing activity
        if (dialoge != null) {
            dialoge.cancel();
            dialoge = null;
        }

        MainActivity.this.finish();

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T05:16:41.243

您可以试一试，只需调用 yes 按钮，如下所示：

```
Button yes=(Button)dialoge.findViewById(R.id.yes);
    yes.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            dialoge.cancel();
            MainActivity.this.finish();

        }
    }); 
```

退出应用程序之前需要取消对话框。这就是为什么它`leaked window error` 在对话框打开时显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T05:21:24.947

也关闭对话框，调用`dailog.dismiss()`或`dialog.cancel()`完成活动后，我测试了你的代码，它应该如下所示：

```
@Override
public void onBackPressed() {
    final Dialog dialoge=new Dialog(SecondActivity.this,android.R.style.Theme_Translucent_NoTitleBar);
    dialoge.setContentView(R.layout.popup_layout);

    Button yes=(Button)dialoge.findViewById(R.id.yes);
    yes.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            finish();
            dialoge.cancel();

        }
    });
    Button no=(Button)dialoge.findViewById(R.id.no);
    no.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            finish();
            dialoge.dismiss();
        }
    });

    dialoge.show();

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T05:28:31.903

```
dialoge.dismiss(); 
```

在您的 onClick 方法中实现 yes 按钮

# c++ - strlen 的奇怪行为

> ID：15539935
> 
> 赞同：2
> 
> 时间：2013-03-21T05:06:02.123
> 
> 标签：c++

我用 C++ 编写了一个程序，其中我使用了两个 char 数组，我在声明时初始化它们，当我使用`strlen()`函数计算它们的长度时，我得到了奇怪的输出。代码如下所示

```
#include<stdio.h>
#include<string.h>
#include<string>

using namespace std;

char consonant[] = {'b', 'c', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'm', 'n', 'p', 'q', 'r', 's', 't', 'v', 'w', 'x', 'y', 'z'};
char vowel[] = {'a', 'e', 'i', 'o', 'u'};

int main()
{
    int lenv, lenc;
    lenc = strlen(consonant);
    lenv = strlen(vowel);
    printf("lenv = %d and lenc = %d\n", lenv, lenc);
    return 0;
} 
```

在 ideone 上运行时上述程序的输出是

```
lenv = 26 and lenc = 21 
```

当使用代码块在 Windows 上运行时

```
lenv = 5 and lenc = 26 
```

请告诉我这种奇怪行为的原因......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T05:07:50.307

这里没有奇怪的行为。您的字符串不是以 nul 结尾的，因此该`strlen()`函数无法识别它们的结束位置。

当您像这样初始化字符串时：

```
char consonant[] = {'b', 'c', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'm', 'n', 'p', 'q', 'r', 's', 't', 'v', 'w', 'x', 'y', 'z'}; 
```

没有添加任何 nul 字符。您可以将其设为字符串（双引号导致编译器自动附加 nul 终止符）：

```
char consonant[] = "bcd...z"; 
```

或者您可以自己在数组末尾显式包含它：

```
char consonant[] = {'b', 'c', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'm', 'n', 'p', 'q', 'r', 's', 't', 'v', 'w', 'x', 'y', 'z', '\0'}; 
```

否则，`strlen()`将愉快地读取数组的末尾，直到它碰巧在内存中的某个位置找到一个值为 0 的字节。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-21T05:08:16.283

`strlen`只能用于字符串，不能用于任意字符数组。

> strlen() 函数应计算s 指向的**字符串中的字节数，不包括终止的空字节。**-- IEEE1003

C++ 标准说`strlen`C++ 与 C 中的相同`strlen`。C 标准说：

> 该函数计算*s*指向的**字符串**`strlen`的长度。-- C99 7.21.6.3

 ***和：

> 字符串是由第一个空字符终止并包括第一个空字符的连续*字符*序列。-- C99 7.1.1

因此，您必须确保传递给`strlen`的内容实际上是一个*字符串*，而不仅仅是一个字符数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-29T15:04:38.690

其他答案已经指出，你应该用 '\0' 关闭你的 c 风格的字符串，你`lenc=21`很可能是因为一些溢出现象（它可以是 n*SIZE_MAX+21 和任何 n...）。

要专注于*如何*在 c 中正确解决问题：

```
#include<string.h>
#include<stdio.h>

char consonant[] = "abcdefghijklmnopqrstuvxyz"; /* this is automatically '\0' terminated */
char vowel[] = "aeiou";

int main()
{
    int lenv, lenc;
    lenc = strlen(consonant);
    lenv = strlen(vowel);
    printf("lenv = %d and lenc = %d\n", lenv, lenc);
    return 0;
} 
```

请注意，这`using namespace std`只是 c++。

另一方面*，正确的 c++ 解决方案*如下所示：

```
#include<string>
#include<iostream>

std::string consonant("abcdefghijklmnopqrstuvxyz"); 
std::string vowel("aeiou");

int main()
{
    using namespace std; // if you wish using it, put it into a function

    int lenc = consonant.size();
    int lenv = vowel.size();
    cout << "lenv = " << lenc << " and " << "lenc = " << lenc << endl;
    return 0;
} 
```***

# python - Python 中的 logging.warn 和 logging.warning 有什么区别？

> ID：15539937
> 
> 赞同：84
> 
> 时间：2013-03-21T05:06:07.027
> 
> 标签：python, logging, warnings

[http://docs.python.org/2/howto/logging.html](http://docs.python.org/2/howto/logging.html)上的示例同时使用`warn`和`warning`。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-03-27T09:40:53.560

`logging.warn`自 Python 3.3 起已弃用，您应该使用`logging.warning`.

在 Python 3.3 之前，`logging.warn`是`logging.warning`相同的功能，但`logging.warn`没有记录，如 Python 错误跟踪器[http://bugs.python.org/issue13235](http://bugs.python.org/issue13235)中的已关闭问题所述：

> 这是故意的。原始代码（在并入 Python 之前）有 warn()，保留它是为了向后兼容。文档引用了warning()，因为这是每个人都应该使用的。方法名称映射到相应日志记录级别名称的小写字母。

`logging.warn()`为向后兼容而保留，但[添加了弃用警告](https://github.com/python/cpython/blob/3.3/Lib/logging/__init__.py#L1252-L1253)。`logging.warning()`是每个人都应该使用的。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-03-21T05:20:21.367

在 Python 3.3 之前，它们是相同的，但`warn`已弃用：

```
>>> import logging
>>> logging.warn is logging.warning
True 
```

# .net - 答案超过小数点后 2 位后如何显示答案

> ID：15539946
> 
> 赞同：1
> 
> 时间：2013-03-21T05:07:07.950
> 
> 标签：.net, vb.net, number-formatting

我有一个计算圆锥体积的 Visual Basic 计算器。

我有两个答案，一个以毫米立方为单位，另一个以米立方为单位（四舍五入到最接近的百分之一（2 个小数位））。但我只想在达到 0.01 或更高时显示米的立方。

这是我的计算代码

```
Private Sub txtSidea_Leave(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtHeight.Leave, txtRadius.Leave
    'calculate volume cubic mm using V= 1/3 pi R*2*H  
    Const PI As Double = System.Math.PI
    lbAnswerlVolumeMM.Text = (1 / 3 * PI * ((Val(txtRadius.Text) ^ 2) * Val(txtHeight.Text))).ToString("#") + " :Cuibic mm"
    'calculate volume cubic meter using V= 1/3 pi R*2*H / 10^9
    lblAnswerVolumeMetres.Text = ((1 / 3 * PI * ((Val(txtRadius.Text) ^ 2) * Val(txtHeight.Text))) / 10 ^ 9).ToString("#.##") + " :Cubic Metre"
End Sub 
```

一个例子是；高度 50 毫米，半径 30 毫米。这将输出 47124 毫米立方体，这很好。但它没有显示米立方体，所以如果米立方体的答案低于 0.01，我希望它隐藏标签，直到它超过 0.01，然后显示结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:58:21.753

尝试这个：

```
Private Sub txtSidea_Leave(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtHeight.Leave, txtRadius.Leave
    'calculate volume cubic mm using V= 1/3 pi R*2*H  
    Const PI As Double = System.Math.PI
    lbAnswerlVolumeMM.Text = (1 / 3 * PI * ((Val(txtRadius.Text) ^ 2) * Val(txtHeight.Text))).ToString("#")
    'calculate volume cubic meter using V= 1/3 pi R*2*H / 10^9
    lblAnswerVolumeMetres.Text = ((1 / 3 * PI * ((Val(txtRadius.Text) ^ 2) * Val(txtHeight.Text))) / 10 ^ 9).ToString("#.##")

    '--Decide which to hide
    If lblAnswerVolumeMetres.Text >= 0.01 then
        lblAnswerVolumeMetres.Visible = True
        lbAnswerlVolumeMM.Visible = False
    Else
        lblAnswerVolumeMetres.Visible = False
        lbAnswerlVolumeMM.Visible = True
    End If
    '--Shift the description to after the decision is made based on the number.
    lblAnswerVolumeMetres.Text &= " :Cubic mm"
    lbAnswerlVolumeMM &= " :Cubic Metre"
End Sub 
```

# jsf-2 - 在 xhtml 页面中添加脚本以在关闭浏览器窗口时显示警告消息不起作用

> ID：15539947
> 
> 赞同：0
> 
> 时间：2013-03-21T05:07:16.563
> 
> 标签：jsf-2, primefaces

我正在研究 jsf2 和 primefaces。当用户单击浏览器的关闭按钮时，我想显示一条消息。根据stackoverflow中给出的答案之一，我在标签中添加了以下脚本

```
<script>
    window.onbeforeunload = function (e) {
                    e = e || window.event;

                    // For IE and Firefox prior to version 4
                    if (e) {
                        e.returnValue = 'Sure?';
                    }

                    // For Safari
                    return 'Sure?';
 </script> 
```

但它不起作用。我也尝试添加 CDATA 但仍然无法正常工作。

# asp.net-mvc - 如何将登录表单@屏幕中心

> ID：15539948
> 
> 赞同：1
> 
> 时间：2013-03-21T05:07:18.497
> 
> 标签：asp.net-mvc, asp.net-mvc-3, twitter-bootstrap

我正在开发 MVC 3 应用程序，我正在使用引导程序进行设计。我已经创建了登录表单。我正在尝试将其设置在屏幕的中心位置，但有些无法正常工作。

这是我的代码。

```
@using (Html.BeginForm("LoginUser","Login",FormMethod.Post))
{
 <div class="container-fluid" style="padding-left:0px; margin-top:165px; margin-left:140px;">
   <div class="row-fluid">
       <div class="span12 roundedDiv offset4" style="width:400px; height:250px;">

...
...
...
Controls...
....
....

    </div>
   </div>
 </div>

} 
```

该怎么办 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:15:00.867

Margin auto 为您执行此操作，而无需使用`<center>`.

```
<!DOCTYPE html>
<html>
    <head>
        <title>Login</title>
        <style type="text/css">
            #loginBox {
                margin: 20% auto;
                width: 200px;
            }
        </style>
    </head>
    <body>
        <form action="index.php" method="POST" id="loginBox">
            <input type="text" name="user" placeholder="Username" autocapitalize="off" /><br />
            <input type="password" name="pass" placeholder="Password" /><br />
            <input type="checkbox" name="remember"> Remember Me<br />
            <input type="submit" value="Log In" name="login" />
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:17:50.500

我建议不要使用边距进行水平对齐。尝试这样的事情：

```
<div class="container-fluid">
<div style="margin-top:20px;" class="row-fluid">
    <div class="offset4 span4 well">
        <h1>Login page</h1>
        <form method="POST">
            <label>Login:
                <input type="text" placeholder="Enter your login" name="username" autofocus class="span12">
            </label>
            <label>Password:
                <input type="password" placeholder="Enter your password" name="password" class="span12">
            </label>
            <hr>
            <div class="btn-toolbar">
                <button type="submit" class="btn btn-info">Log in</button><a href="/auth/google" class="btn">Sign in with Google</a>
            </div>
        </form>
    </div>
</div> 
```

这是我用来构建简单登录表单的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:18:03.297

由于您使用的是流体容器，因此响应式设计我建议避免使用硬编码值，例如 400 像素。相反，您可以通过应用 span 类来设置它的宽度，例如：

```
<div class="row-fluid">
    <div class="offset3 span6"> 
```

它为您提供 6 行和 3 行左右偏移的登录表单宽度（12 行是默认引导网格）。

# jquery - 垂直轮播 jQuery

> ID：15539949
> 
> 赞同：0
> 
> 时间：2013-03-21T05:07:26.283
> 
> 标签：jquery, carousel

我正在尝试创建一个旋转木马，这是我第一次尝试。[http://jsfiddle.net/PmNM5/](http://jsfiddle.net/PmNM5/)

HTML 包含 UL LI，每个 LI 有 2 个图像，宽度为 242px，高度为 81px

在几个 LI 中，只有 3 个应该是可见的（即 6 个图像将是可见的，因为一个 LI 包含 2 个图像，每个图像浮动：左。）

UL ：设置为显示 BLOCK，宽度为 242px。HTML 显示完美。但轮播不起作用，因为我知道我需要巧妙地计算出我所缺乏的 TOP。

```
<div id="home_carousel">
        <ul>
            <li>
                <a href="#img1" class="inline cboxElement"><img src="images/home-truck1.jpg"></a>
                <a href="#"><img src="images/home-truck1.jpg"></a>
            </li>

            <li>
                <a href="#"><img src="images/home-truck1.jpg"></a>
                <a href="#"><img src="images/home-truck1.jpg"></a>
            </li>
            <li>
                <a href="#"><img src="images/home-truck1.jpg"></a>
                <a href="#"><img src="images/home-truck1.jpg"></a>
            </li>
            <li>
                <a href="#"><img src="images/home-truck1.jpg"></a>
                <a href="#"><img src="images/home-truck1.jpg"></a>
            </li> 
```

JAVASCRIPT：

```
var myCarousel = {

    setHeight: function() {

        var $img = $('li', '#home_carousel');
        var total = 81 * $img.length;

        $('#home_carousel ul').height(total);

    },

    slide: function() {
        var outPart = $('#home_carousel ul').outerHeight();
        $('#home_carousel_up').on('click', function() {

            var $a = $(this);

            $('#home_carousel ul').animate({
                top: -81 + outPart + 'px'
            }, 500, 'easeOutBounce');

        });

        $('#home_carousel_down').on('click', function() {

            var $a = $(this);

            $('#home_carousel ul').animate({
                top: 81 + 'px'
            }, 500, 'easeOutBounce');

        });

    },

    init: function() {
        this.setHeight();
        this.slide();
    }

};

myCarousel.init(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:48:34.970

试试[这个](http://jsfiddle.net/PmNM5/7/)

我已经编写了顶部偏移和在端点停止动画的所有逻辑。

滚动顶部时，条件为：

```
($('#home_carousel ul').position().top - 81) >  (242 - outPart) 
```

向下滚动时，条件为：

```
$('#home_carousel ul').position().top + 81 <= 0 
```

我已经对所有值进行了编码。请在变量中存储诸如 81 和 242（包装器高度）之类的数字。如果您通过 jquery .outerHeight 方法计算高度，那就太好了。在这种情况下，如果由于您的标记或 CSS 的更改而改变了高度，那么您的代码将不会中断。

# java - 有没有一种将文档侦听器添加到动态创建的 JTextField 的好方法

> ID：15539959
> 
> 赞同：0
> 
> 时间：2013-03-21T05:08:34.140
> 
> 标签：java, swing

我正在从一个 xml 文件中读取信息，在我读入之前我不知道有多少信息。我动态创建 Jtextfields 并可以让信息出现在它们上面。我正在尝试向这些文本字段添加一个文档侦听器，以便用户可以更改数据，并且每次更改数字时它都会自动更新 xml 文件。问题是没有引用 JTextField 来获取文本，这导致编译器错误。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:12:37.527

使用工厂样式设置。

基本上，创建一个方法或类来创建一个`JTextField`. 将对它将负责的节点的引用传递给它。

创建文本字段并将其注册`DocumentListener`到它......虽然，我会谨慎使用`DocumentListener`个人，也许 a`ActionListener`和/或`FocusListener`可能更合适，但是干草。

# node.js - 临时文件下载

> ID：15539964
> 
> 赞同：0
> 
> 时间：2013-03-21T05:08:54.050
> 
> 标签：node.js, meteor, filepicker.io

是否有一项服务可以创建基本上**一次性**下载文件，最好是我可以从 NodeJS 使用的东西？

我对 FilePicker 进行了一些研究，但没有发现任何有关重新生成它为您提供的文件链接的信息。可能有一种方法可以用 NodeJS 做到这一点，但*我*同时使用 Meteor，所以很多 Node 的事情可能会发生冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:29:07.963

你可以用流星构建它。将[流星路由器](https://github.com/tmeasday/meteor-router)与[流星](https://github.com/oortcloud/meteorite)一起使用并使用服务器端路由来传递文件。

您需要一个集合来跟踪下载的文件：

**服务器 JS**

```
var downloads = new Meteor.Collection("downloads");

//create a link
downloads.insert({url:"/mydownload.zip",downloaded:false})

Meteor.Router.add('/file/:id', 'GET', function(id) {
    download = downloads.findOne(id);
    if( download) {
       if(dowload.downloaded) {
           this.response.send("You've already downloaded me")
       }
       else
       {
           //I guess you could just redirect or stream the file for an extra layer of surety
           this.response.redirect(download.url);
       }
   }
}); 
```

在客户端上，您可以将`/files/{{_id}}`下载的文件的 _id 用作链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:19:19.320

我的建议也是添加自定义服务器端逻辑以计算上传次数（或仅将文件标记为已下载/未下载）并做出相应响应。您可以使用 Filepicker.io 做的最接近的事情是使用安全策略将文件下载限制在特定的时间间隔内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T03:18:37.247

**使用 Heroku Cloud 和 NodeJS Meteor Hooks 的解决方案**

Heroku 尤其适用于临时文件下载链接：它们提供了一个“临时暂存器”文件系统，每次程序重新启动时都会重置，并且每个运行的节点服务器都看不到其他实例创建的文件。

> 每个 dyno 都有自己的临时文件系统，以及最近部署的代码的新副本。在 dyno 的生命周期中，它的运行进程可以将文件系统用作临时暂存器，但是任何其他 dyno 中的进程都看不到写入的文件，并且在停止或重新启动 dyno 时，任何写入的文件都将被丢弃。

[取自 Heroku 文档：[https ://devcenter.heroku.com/articles/dynos#ephemeral-filesystem](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)]

***因此，写入“文件系统”的任何文件都是临时的。***

这为这个问题提供了一个非常简单的解决方案：您可以简单地使用 NodeJS 文件系统操作在服务器上创建临时文件，提供一次（或在有限的时间内），然后删除它们，这样它们就不能再次下载了。

这与类似的东西相结合[`$.download()`](http://filamentgroup.com/lab/jquery_plugin_for_requesting_ajax_like_file_downloads/)将提供无缝体验，从而防止未经授权的下载。

**示例代码很快**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T19:52:50.497

除了使用`router`包

在 Meteor.startup 你可以添加

```
var require = __meteor_bootstrap__.require;
fs = require( 'fs' ); 
```

该`fs`变量应仅在服务器上声明。fs 包是 Meteor 使用的，不需要单独添加。

完成此操作后，您可以创建`Meteor.uuid()`名称为文件的文件，这使它们独一无二且难以猜测。也可以通过使用在一定时间后删除文件`Meteor.setTimeout`

问题是：要下载的文件从哪里来？

# php - 如何使用 Codeigniter db->insert() 方法在 MySQL 中添加日期

> ID：15539968
> 
> 赞同：3
> 
> 时间：2013-03-21T05:09:27.350
> 
> 标签：php, mysql, date

我正在使用我的表格在 MySQL 中保存出生日期

```
db->insert() 
```

方法，但它没有正确插入到数据库中。如何在 MySQL 中以正确的日期格式保存输入字段值？（在 MySQL 中，dob 的类型也设置为“DATE”。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:14:35.833

*MYSQL DATE* - 日期**`YYYY-MM-DD format`**

所以你需要通过sql或php转换

***PHP***

~~$date= date('YYYY-MM-DD',strtotime($old_date));~~

```
$date= date('Y-m-d',strtotime($old_date)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:14:20.187

如果您采用了 dateofbirth 字段的数据类型，`date`那么您必须以`yyyy-mm-dd`格式插入日期。

# java - Android 对 if 语句的报警

> ID：15539971
> 
> 赞同：0
> 
> 时间：2013-03-21T05:09:30.427
> 
> 标签：java, android, google-maps, alarmmanager, alarm

当遇到 if 语句时，我想发出警报并使用对话框按钮将其关闭。

```
googleMap.setOnInfoWindowClickListener(
    new OnInfoWindowClickListener() {
        public void onInfoWindowClick(Marker marker) {
            LatLng clickedMarkerLatLng = marker.getPosition();
            lat =  clickedMarkerLatLng.latitude;
            long1 =  clickedMarkerLatLng.longitude;
            String name = marker.getTitle();
            select=true;

            final Location markerLoc = new Location("");
            markerLoc.setLatitude(lat);
            markerLoc.setLongitude(long1);

            final Location location = locationManager.getLastKnownLocation(provider);   

            float distanceBetweenPoints = location.distanceTo(markerLoc);

            TextView t = (TextView) findViewById(R.id.tv_location);
            t.setText("Distance to "+ name +" is "+ distanceBetweenPoints/1000 + " km");

            if (distanceBetweenPoints<1000){
            TextView t2 = (TextView) findViewById(R.id.tv_location);
            t2.setText("ALARMALARMALARM");
            //alarm here

        }
    }); 
```

我发现的有关警报管理器的所有内容似乎都不允许我在 if 语句中使用它。我该怎么做呢？

# iphone - EXC_BAD_ACCESS 两次释放的对象是什么？

> ID：15539972
> 
> 赞同：0
> 
> 时间：2013-03-21T05:09:45.160
> 
> 标签：iphone, ios, exc-bad-access, nsautoreleasepool

这些是来自 Zombie Profiling 的屏幕截图： ![释放到参考计数 0](../Images/58b9c232440334463085cc5c2fda3959.png) ![realesed 到 ref count -1](../Images/28602b07a02b87b0703d3b83a78bcd20.png) 我怎么知道哪个对象更早被释放，哪个对象又被释放到池排水管中？

我正在使用 ARC，`@autoreleasepool {}`在某些方法中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:16:35.217

请检查您的名为 BackgroundSync 的类，其中包含发布数和分配数。记住没有释放的对象应该等于没有分配的对象。

1）您可能在 dealloc 中释放了一些对象。2）您可能在上述工具列表中列出的特定功能中释放了一些对象，因此请先检查它们。

# excel - 如何从日期时间格式 12/10/2012 12:18:58 PM 中提取小时数？

> ID：15539977
> 
> 赞同：3
> 
> 时间：2013-03-21T05:10:18.517
> 
> 标签：excel, vba, date, format

如何从日期时间格式中提取小时数`12/10/2012 12:18:58 PM`？

我`Hour(Format(d1, "mm/dd/yyyy HH:mm:ss HH24"))`在另一个 Stack Overflow 问题上找到了这个，但对我不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-26T12:52:26.687

这应该工作

=文本（D1，“hh”）

并格式化为时间

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T05:25:45.517

如果`D1`包含日期/时间作为`Date Time Serial Number`或作为可识别为的字符串，`date time`则使用`=Hour(D1)`

例如`D1`= 字符串`21/03/2013 18:45:00` `=Hour(D1)`=`18`

例如`D1`= `41354.781250` then `=Hour(D1)`=`18`
注意：`D1`可能包含一个值，但被格式化为显示为日期/时间。检查单元格编号格式。

要在 VBA 中执行此操作，请尝试此操作

```
Sub demo()
    Dim rng As Range
    Dim Hr As Long

    Set rng = Range("D1")

    Hr = Hour(rng.Value)

    Debug.Print Hr
End Sub 
```

在中查看结果`Immediate Window`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T05:15:49.737

尝试：

```
Hour(format(now(), "yyyy-MM-dd hh:mm:ss")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-12T20:15:17.647

如果“12/10/2012 12:18:58 PM”在单元格 A1 中：

```
=TIME(HOUR(a1),MINUTE(a1),SECOND(a1)) 
```

输入公式后，您可以右键单击“格式单元格”并选择您要查看的时间格式。我已经在 Excel 2013 中验证了这个公式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T05:14:30.867

试试这个[http://www.vb6.us/tutorials/date-time-functions-visual-basic](http://www.vb6.us/tutorials/date-time-functions-visual-basic) 它真的在 vba 中工作

或者`Now`如果你现在想要日期和时间就使用

# ios - 获取当天和所有年份的结果？

> ID：15539981
> 
> 赞同：-3
> 
> 时间：2013-03-21T05:10:53.827
> 
> 标签：ios, xcode, date, core-data, nspredicate

我已经阅读了许多帖子并尝试了许多不同的东西，但我似乎找不到适合看起来应该很简单的东西。也许我只是想念它！

我将大量的姓名和生日列表从 .json 转换为 sqlite。我正在尝试获取当天的所有结果（即在我的数据库中发生在 3 月 20 日的所有生日）。我相信我正在寻找在我的 fetchedresultscontroller 中使用的谓词。

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:47:00.840

如果生日存储`NSDate`在数据库中，那么我不知道一个简单的解决方案。

但是对于生日，将其存储为三个属性“年”、“月”、“日”可能更有意义。（NSDate 是一个绝对时间点，在世界某个地方可能是 3 月 20 日，在世界其他地方可能是 3 月 19 日。）

如果你这样做，你可以简单地使用

```
int theMonth = 3;
int theDay = 20;
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"month = %d AND day = %d", theMonth, theDay] 
```

# java - 将用户名传递给 Spring Security

> ID：15539983
> 
> 赞同：3
> 
> 时间：2013-03-21T05:10:58.603
> 
> 标签：java, spring, spring-security, ntlm

我们有一个返回登录用户名（Windows NTLM）的应用程序，我们通常会传递给所有其他应用程序以检查身份验证部分。

我想知道是否可以从返回用户名的应用程序传递用户名并传递给我们使用 Spring 3 开发的新 Web 应用程序？这样我们就可以利用 Spring Security 特性

如果可能的话，我该如何使用它？

由于我们已经有一个返回 Windows 用户的应用程序，因此管理层不鼓励使用 Kerberos 和其他 SSO 方法。

任何帮助或见解都是非常有帮助和有益的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:42:24.883

解决问题的最简单方法如下：

1) 安装 Apache Web Server 并使用 modntlm 配置使用 NTLM 身份验证

[http://modntlm.sourceforge.net/ （类似地，您可以使用](http://modntlm.sourceforge.net/)[http://modauthkerb.sourceforge.net/](http://modauthkerb.sourceforge.net/) 使用 mod_auth_kerb 使用 Kerberos 身份验证）

2) 将 mod_jk 配置到您的 Selvlet 容器（JBoss 或 Tomcat） [http://tomcat.apache.org/connectors-doc/generic_howto/proxy.html](http://tomcat.apache.org/connectors-doc/generic_howto/proxy.html) 成功验证后，Apache 将 REMOTE_USER 标头发送到 servlet 容器。标头（根据名称）包含经过身份验证的用户的用户名确保您配置 tomcatAuthentication="false" 以允许 Apache 允许 apache 发送 REMOTE_USER 标头

3）在Spring Security中实现和配置你自己的PreAuthenticatedProcessingFilter： [http](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6167) ://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6167 应该很类似Request-Header Authentication filter： [http](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6295) ://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e6295 另外，用户名中应该省略域名. 用户名在 NTLM 或 Kerberos 身份验证后在 REMOTE_USER 标头中发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:05:49.747

您可以将您的用户名与应用程序 URL 绑定，例如“localhost:port/somename/j_spring_check?j_username=your username”。

# python - python：对象的实例化

> ID：15539984
> 
> 赞同：-1
> 
> 时间：2013-03-21T05:11:05.190
> 
> 标签：python, initialization

```
class Team :
    def __init__(self):
        print "object instantiated" 
```

要创建 Team 类的对象，

```
>>> obj = Team()
object instantiated 
```

从`obj`我可以访问 Team 类的成员。但是为什么以下是允许的？

```
>>> y = obj.__init__()
object instantiated 
```

这里提出了一些问题。

1.  为什么`obj`能够调用`__init__()`，`__init__()`就像另一种方法一样？

2.  每当`__init__()`被调用时，它都会创建一个对象（如果我在这里错了，则正确），所以应该`y`保存另一个实例`Team`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:14:56.553

除了特殊用途外，所有“魔术”（双下划线）方法都可以作为常规方法使用。该`__init__`方法实际上并不创建对象实例，它只是在该`__new__`方法创建对象之后对其进行初始化。（请注意，`__init__`它不会返回任何东西，所以`y`会在`None`之后`y = obj.__init__()`。）

# html - 链接和 Z 索引

> ID：15539992
> 
> 赞同：0
> 
> 时间：2013-03-21T05:11:46.163
> 
> 标签：html, css

我遇到了滚动效果问题，我无法让链接在标题中工作，因为`z-index`效果必须是负面的才能起作用。链接在标题中。

**编辑**对不起，我不够清楚，标题区域（绿色）中的链接不活动，因为 z-index 属性给标题区域一个负索引它使链接不活动所以我想知道它的修复

[http://jsfiddle.net/ThAv5/4/](http://jsfiddle.net/ThAv5/4/)

HTML：

```
<body>
<div id="container">
    <div id="navBar"></div> 
    <div id="headerBar"></div>
    <div id="mainContent"><h1>This is the main content</h1></div>
</div>
</body> 
```

和CSS：

```
#navBar{
    position:fixed;
    top: 0;
    left:0;
    width: 100%;
    z-index:1000;
    -moz-box-shadow: 0 0 5px #000000;
    -webkit-box-shadow: 0 0 5px #000000;
    box-shadow: 0 0 5px #000000;
    background:red;
    height:50px;
}

#headerBar{
    top: 0;
    height: 250px;
    left: 0;
    right: 0;
    margin:0px auto;
    width:100%;
    position: fixed;
    z-index:-1000;
    background:green;
}

#mainContent{
    overflow: auto;
    z-index: 0;
    margin-top: 250px;
    width:100%;
    height:900px;
}

body, #container{
    background:yellow;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:17:09.027

由于您提供的代码中没有链接，我假设链接位于“headerBar”div 中。如果是这种情况，您将无法单击它们，因为由于您提供的样式，它们将出现在“navBar”div 下。

如果这是您想要的效果，则为“headerBar”div 指定边距或填充，这将允许您将链接推送到“navBar”下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:16:14.427

实际上#navBar 与#headerBar 重叠，因此#headerBar 内容不可见。它应该低于高度为 50px 的 #navBar。所以将 #headerBar 的顶部偏移设置为 50px

```
#headerBar {
top:50px;
} 
```

[小提琴](http://jsfiddle.net/ThAv5/7/)

# php - while循环内的计数器每X次增加一次

> ID：15539993
> 
> 赞同：0
> 
> 时间：2013-03-21T05:11:57.023
> 
> 标签：php, loops

我不太确定如何解决这个问题，但我目前有一个 while 循环输出`<li></li>`。

假设有 35 行，我希望计数器每增加 5 次。

所以输出会是这样的。

```
 - 1 Name
 - 1 Name
 - 1 Name
 - 1 Name
 - 1 Name
 - 2 Name
 - 2 Name
 - 2 Name
 - 2 Name
 - 2 Name
 - 3 Name
 - 3 Name
 - 3 Name
 - 3 Name
 - 3 Name
 - 4 Name and so on... 
```

我尝试在整个循环中计数并比较数字以查看它是否小于五，如果不是则增加它，但我知道这是不正确的。只是似乎无法找出最佳解决方案。

```
 while ($stmt->fetch()) {

          $HTML .= "<li data-id='$id' data-name='$name'>$count Name</li>";              
    } 
```

为了让这一点更清楚......基本上我想运行一个计数器变量。从 1 开始，但每隔五次通过 while 循环，我想将此计数变量增加一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T05:16:47.467

```
$count = $rows = 0;
while ($stmt->fetch()) {
    if ($rows % 5 == 0)
        $count++;
    $rows++;
    $HTML .= "<li data-id='$id' data-name='$name'>$count Name</li>";              
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:17:52.033

您可以使用`array_fill()`（伪代码）：

```
<?php

$li = "<li>Item</li>";

$row = array_fill(0, 5, $li);

$list = array_fill(0, 35, $row);

print_r($list);

?> 
```

[http://codepad.org/ETCv3GBK](http://codepad.org/ETCv3GBK)

如：

```
$count = 0;

while ($stmt->fetch() && $count++) {
    $HTML .= implode('', array_fill(0, 5, "<li data-id='$id' data-name='$name'>$count Name</li>"));
} 
```

另一个演示（ignite.io 可能无法保存）：

[https://ignite.io/code/514a9bf5ec221ee821000005](https://ignite.io/code/514a9bf5ec221ee821000005)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:34:45.973

```
for($i=1; $i <= 20; $i++){
    $array[] = "Name " . $i;
}

$count = 1;
$output = 1;
for($i=0; $i < 20; $i++){
    if($count++ < 5)
        echo $output . ". " . $array[$i] . "<BR>";
    else{
        $count = 1;
        echo $output++ . ". " . $array[$i] . "<BR>";
    }
} 
```

返回

> 1.  名称 1
> 2.  名称 2
> 3.  名称 3
> 4.  名称 4
> 5.  名称 5
> 6.  名称 6
> 7.  名称 7
> 8.  名称 8
> 9.  名称 9
> 10.  名称 10
> 11.  姓名 11
> 12.  姓名 12
> 13.  姓名 13
> 14.  名称 14
> 15.  姓名 15
> 16.  姓名 16
> 17.  姓名 17
> 18.  姓名 18
> 19.  姓名 19
> 20.  姓名 20

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T05:16:29.273

```
$i=1
while ($stmt->fetch()) {

       if($i%5==0){
          $HTML .= "<li data-id='$id' data-name='$name'>$count Name</li>";              
       }
$i++;
    } 
```