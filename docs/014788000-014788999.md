# StackOverflow 问答 14788000-14788999

# java - 使用 Java 通过 TCP 发送 JSON 对象

> ID：14788002
> 
> 赞同：3
> 
> 时间：2013-02-09T12:09:18.920
> 
> 标签：java, json, sockets, tcp

我正在尝试替换我在终端中运行的 Netcat 命令，该命令将重置服务器上的一些数据。netcat 命令如下所示：

```
echo '{"id":1, "method":"object.deleteAll", "params":["subscriber"]} ' | nc x.x.x.x 3994 
```

我一直在尝试用 Java 实现它，因为我希望能够从我正在开发的应用程序中调用这个命令。但是我遇到了问题，该命令永远不会在服务器上执行。

这是我的java代码：

```
try {
    Socket socket = new Socket("x.x.x.x", 3994);
    String string = "{\"id\":1,\"method\":\"object.deleteAll\",\"params\":[\"subscriber\"]}";
    DataInputStream is = new DataInputStream(socket.getInputStream());
    DataOutputStream os = new DataOutputStream(socket.getOutputStream());
    os.write(string.getBytes());
    os.flush();

    BufferedReader in = new BufferedReader(new InputStreamReader(is));
    String inputLine;
    while ((inputLine = in.readLine()) != null)
        System.out.println(inputLine);

    is.close();
    os.close();

} catch (IOException e) {
    e.printStackTrace();
} 
```

该代码还挂在应该读取的while循环上`InputStream`，我不知道为什么。我一直在使用 Wireshark 来捕获数据包，并且输出的数据看起来相同：

```
{"id":1,"method":"object.deleteAll","params":["subscriber"]} 
```

也许其余的数据包的形状不同，但我真的不明白为什么会这样。也许我正在以错误的方式将字符串写入`OutputStream`? 我不知道 ：（

请注意，当我没有正确理解问题时，我昨天发布了一个类似的问题： [Can't post JSON to server with HTTP Client in Java](https://stackoverflow.com/questions/14774729/cant-post-json-to-server-with-http-client-in-java#comment20685628_14774729)

编辑：这些是我从运行`nc`命令得到的可能结果，如果 OutputStream 以正确的方式发送正确的数据，我希望得到相同的消息到 InputStream：

错误的论点：

```
{"id":1,"error":{"code":-32602,"message":"Invalid entity type: subscribe"}} 
```

好的，成功：

```
{"id":1,"result":100} 
```

没有什么可删除的：

```
{"id":1,"result":0} 
```

* * *

哇，我真的不知道。我尝试了一些不同的作家，如“缓冲作家”和“印刷作家”，这似乎`PrintWriter`是解决方案。虽然我不能使用`PrintWriter.write()`nor`PrintWriter.print()`方法。我不得不使用`PrintWriter.println()`.

如果有人知道为什么其他作者不能工作并解释他们将如何影响发送到服务器的数据，我会很乐意接受它作为解决方案。

```
 try {
        Socket socket = new Socket(InetAddress.getByName("x.x.x.x"), 3994);
        String string = "{\"id\":1,\"method\":\"object.deleteAll\",\"params\":[\"subscriber\"]}";
        DataInputStream is = new DataInputStream(socket.getInputStream());
        DataOutputStream os = new DataOutputStream(socket.getOutputStream());
        PrintWriter pw = new PrintWriter(os);
        pw.println(string);
        pw.flush();

        BufferedReader in = new BufferedReader(new InputStreamReader(is));
        String inputLine;
        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);

        is.close();
        os.close();

    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:31:56.997

我认为服务器在消息末尾期待换行符。尝试使用您的原始代码并在末尾`write()`添加以确认这一点。`\n`

# c# - 绑定刷新动画上所有绑定的控件

> ID：14788005
> 
> 赞同：1
> 
> 时间：2013-02-09T12:10:25.460
> 
> 标签：c#, wpf, xaml, binding

当使用颜色绑定时

```
Background="{Binding Design.LeftBarColor}" 
```

并执行类似的动画

```
<DoubleAnimation From="1" To="0.5" Storyboard.TargetName="appName"
    Storyboard.TargetProperty="(Label.Background).(SolidColorBrush.Opacity)"
    Duration="0:0:0.25"/> 
```

所有绑定到“Design.LeftBarColor”的控件都被刷新。但我只想刷新标签的 (appName) 背景颜色。我只是尝试更改绑定模式，但这不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:29:24.050

`Design.LeftBarColor`您可以为每个标签创建一个新的背景画笔，并将新画笔的颜色绑定到`Design.LeftBarColor.Color`.

```
<Label Name="appName" ...>
    <Label.Background>
        <SolidColorBrush Color="{Binding Design.LeftBarColor.Color}"/>
    </Label.Background>
   ...
</Label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:27:05.893

不确定我对您要做什么是否正确。我会说，如果您想淡出动画控件，请不要针对画笔的不透明度。在标签顶部放置一个边框控件，并修改边框的不透明度。

示例代码在这里：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <SolidColorBrush x:Key="MyBrush" Color="Red"/>
    </Window.Resources>
    <Grid>
        <Border Name="Container">
            <Label Background="{StaticResource MyBrush}">
                <Label.Triggers>
                    <EventTrigger RoutedEvent="Rectangle.Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation
            Storyboard.TargetName="Container" 
            Storyboard.TargetProperty="Opacity"
            From="1.0" To="0.0" Duration="0:0:5" 
            AutoReverse="True" RepeatBehavior="Forever" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Label.Triggers>
                Lorem ipsum
            </Label>
        </Border>
    </Grid>
</Window> 
```

# php - 在 www-data (apache2, php) 下启动 shell 进程

> ID：14788010
> 
> 赞同：1
> 
> 时间：2013-02-09T12:10:46.283
> 
> 标签：php, linux, shell, apache2

我需要使用一些参数从删除服务器上的 shell 启动 php 进程，所以我认为制作 REST API 应该是一个好主意，它在用户执行 GET 请求时执行一些函数。

我编写了一个简单的 bash 脚本进行测试，并发现在从网站调用此脚本时未指定命令行参数：

```
shell_exec('/var/www/test.sh 123') 
```

Bash 脚本来源：

```
#!/bin/sh
echo $1; 
```

从 root（或其他现有用户）调用此 bash 脚本时，它会正确显示已收到的参数。当我从网站（在 apache2 下的用户 www-data 下运行）调用此脚本时，它什么也不返回：

此外，如果我在控制台中以 www-data 用户执行此 bash 脚本，它也不会返回任何内容：

```
su -c '/var/www/test.sh 123' www-data 
```

此外，我尝试从 php 的不同用户启动进程（出于安全原因，这将不起作用，但以防万一）：

```
$result = system("su -c '/var/www/test.sh 123' sexyuser", $data);
// var_dump($result): string(0) ""
// var_dump($data): int(1) 
```

那么，我应该赋予 www-data 用户什么权限才能在 php 下运行进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:39:52.590

您应该让 php 运行脚本并处理结果

在 exec 上检查 php.net，例如[http://www.php.net/manual/en/function.exec.php](http://www.php.net/manual/en/function.exec.php)

```
//called by example.com/myshell.php?day=today&k=y&whatever=youwant
$arguments = implode(" ", $_GET);
$lastline_of_exec_result = exec ( "/your/command.sh ".$arguments); //sh called with today y youwant
echo $lastline_of_exec; 
```

其中 $arguments 是您的脚本从 GET 参数中获得的所有信息的字符串化列表

如果你想要一个精确的矿石输入和输出，试试这个：

```
//called by example.com/myshell.php?day=today&k=y&whatever=youwant
$argument = $_GET['whatever'];
$output = array();
$last_line = exec("your/command.sh ".$argument, &$output); //sh called with youwant
foreach($output as $line)
    echo $line."<br/>".PHP_EOL; 
```

或者当然（使用 shell_exec）

```
$argument = $_GET['whatever'];
$output = shell_exec("your/command.sh ".$argument);
echo "<pre>".$output."</pre>"; 
```

确保`(shell_)exec`未`disable_functions`在您的 php.ini 中列出

# jquery - 奇怪 - 选择点击时调用 jQuery .hover()？

> ID：14788013
> 
> 赞同：1
> 
> 时间：2013-02-09T12:11:15.523
> 
> 标签：jquery, jquery-ui

我似乎无法解决的奇怪问题..

我有一个在鼠标进入/离开时出现/消失的菜单 - 使用 jQuery 的悬停功能绑定：

```
$("#sclogo").hover(
    function() {
        $(this).find("ul.subnav").slideDown('fast');
    },
    function(){  
        $(this).find("ul.subnav").fadeOut('slow');
    }
); 
```

和菜单结构：

```
<ul class='topnav' id='sclogo'>  
    <li><img border='0' src='images/menu.png'/>  
        <ul class="subnav">     
            <li>...</li>
            <li>... </li>
        </ul>  
    </li>
</ul> 
```

现在的问题 - 单击任何表单选择元素（没有 id 或类）触发悬停功能并出现菜单......

有什么想法吗？

使用 jQuery-1.9

更新：我刚刚意识到这不会发生在 Firefox 中.. 但它会发生在 Chromium 版本 24.0.1312.69 (180721) 尚未检查其他浏览器。如果有人想检查问题 - 请参阅[http://www.ucrewconnect.com.au/test.html](http://www.ucrewconnect.com.au/test.html)

另一个更新：确认这只是一个 Chromium 错误 - 已经测试了其他浏览器并且它没有发生..所以我将忽略这一点。很抱歉浪费大家的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:57:19.757

确认这只是一个 Chromium 错误 - 已经测试了其他浏览器并且没有发生......所以我将忽略这一点。很抱歉浪费大家的时间！

# jodatime - ivy 还带来了 com.springsource.org.joda.time

> ID：14788015
> 
> 赞同：0
> 
> 时间：2013-02-09T12:11:33.853
> 
> 标签：jodatime, ivy, spring-batch

我正在将常春藤用于春季批处理项目。

*常春藤.xml*

```
<ivy-module version="2.0">
    <info organisation="apache" module="hello-ivy"/>
    <dependencies>
        <dependency org="commons-lang" name="commons-lang" rev="2.0"/>
        <dependency org="commons-cli" name="commons-cli" rev="1.0"/>
        <dependency org="commons-net" name="commons-net" rev="3.1" />

        <dependency org="com.jcraft" name="jsch" rev="0.1.48"/><!-- used for SFTP-->
        <dependency org="log4j" name="log4j" rev="1.2.17"/>
        <dependency org="com.google.guava" name="guava" rev="14.0-rc2"/>
        <dependency org="joda-time" name="joda-time" rev="2.1"/>

        <dependency org="org.springframework" name="spring-aspects" rev="3.1.2.RELEASE"/>
        <dependency org="org.springframework" name="spring-aop" rev="3.1.2.RELEASE"/>
        <dependency org="org.springframework" name="spring-context" rev="3.1.2.RELEASE"/>
        <dependency org="org.springframework" name="spring-core" rev="3.1.2.RELEASE"/>
        <dependency org="org.springframework" name="spring-test" rev="3.1.2.RELEASE" />
        <dependency org="org.springframework" name="spring-beans" rev="3.1.2.RELEASE" />
        <dependency org="org.springframework" name="spring-jdbc" rev="3.1.2.RELEASE" />

        <dependency org="org.springframework" name="spring-tx" rev="3.1.2.RELEASE" />
        <dependency org="org.springframework" name="spring-asm" rev="3.1.2.RELEASE" />
        <dependency org="org.springframework" name="spring-expression" rev="3.1.2.RELEASE" />
        <dependency org="org.springframework" name="spring-context-support" rev="3.1.2.RELEASE" />

        <dependency org="org.springframework.batch" name="spring-batch-core" rev="2.1.9.RELEASE"/>
        <dependency org="org.springframework.batch" name="spring-batch-infrastructure" rev="2.1.9.RELEASE"/>
    </dependencies>
</ivy-module> 
```

*常春藤设置.xml*

```
<ivysettings>
<settings defaultResolver="spring.chain"/>
<resolvers>
    <chain name="spring.chain">
        <url name="com.springsource.repository.bundles.release">
            <ivy pattern="http://repository.springsource.com/ivy/bundles/release/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
            <artifact pattern="http://repository.springsource.com/ivy/bundles/release/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
        </url>
        <url name="com.springsource.repository.bundles.external">
            <ivy pattern="http://repository.springsource.com/ivy/bundles/external/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
            <artifact pattern="http://repository.springsource.com/ivy/bundles/external/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
        </url>
        <ibiblio name="ibiblio" m2compatible="true"/>
    </chain>
</resolvers>
</ivysettings> 
```

在我需要 joda2 之前，一切都很棒。这里的问题是 ivy 带来了 com.springsource.org.joda.time-1.6.0.jar 和 joda-time-2.1.jar 之类的东西。有没有一种方法可以让常春藤不从 spring 中带来所有这些克隆 jar（com.springsource.org.joda.time-1.6.0.jar、com.springsource.org.apache.regexp-1.5.0.jar 等)?

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:49:55.277

可以使用ivy 文件中的[exclude指令排除依赖关系。](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/exclude.html)

```
<exclude module="com.springsource.org.joda.time"/> 
```

此示例的第二个功能是使用[ibiblio](http://ant.apache.org/ivy/history/latest-milestone/resolver/ibiblio.html)解析器从 Maven 存储库中检索内容。

最后，该示例包括对 ivy [cleancache](http://ant.apache.org/ivy/history/latest-milestone/use/cleancache.html)任务的调用。如果您大幅更改解析器设置，则需要这样做。它将确保常春藤不会重复使用缓存中的陈旧数据。

# 例子

## 构建.xml

```
<project name="demo" default="resolve" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="resolve">
        <ivy:resolve/>
        <ivy:report todir="build/ivy" graph="false"/>
    </target>

    <target name="clean">
        <delete dir="build"/>
    </target>

    <target name="clean-all" depends="clean">
        <ivy:cleancache/>
    </target>

</project> 
```

笔记：

*   具有“清除所有”目标，将清除常春藤缓存
*   常春藤报告任务对于生成依赖管理报告很有用。

## 常春藤设置.xml

```
<ivysettings>
    <settings defaultResolver="central"/>
    <resolvers>
        <ibiblio name="central" m2compatible="true"/>
        <ibiblio name="springsource-external" m2compatible="true" root="http://repository.springsource.com/maven/bundles/external"/>
    </resolvers>
    <modules>
        <module name="com.springsource.*" resolver="springsource-external"/>
    </modules>
</ivysettings> 
```

笔记：

*   默认为 Maven 中心。
*   从其“外部”Maven 存储库中检索重新打包的 springsource 包
*   与使用“链式”解析器相比，这种方法提供了更多的控制。

## 常春藤.xml

```
<ivy-module version="2.0">
    <info organisation="apache" module="hello-ivy"/>
    <dependencies>
        <dependency org="commons-lang" name="commons-lang" rev="2.0"/>
        <dependency org="commons-cli" name="commons-cli" rev="1.0"/>
        <dependency org="commons-net" name="commons-net" rev="3.1" />

        <dependency org="com.jcraft" name="jsch" rev="0.1.48"/><!-- used for SFTP-->
        <dependency org="log4j" name="log4j" rev="1.2.17"/>
        <dependency org="com.google.guava" name="guava" rev="14.0-rc2"/>
        <dependency org="joda-time" name="joda-time" rev="2.1"/>

        <dependency org="org.springframework" name="spring-aspects" rev="3.1.2.RELEASE"/>
        <dependency org="org.springframework" name="spring-aop" rev="3.1.2.RELEASE"/>
        <dependency org="org.springframework" name="spring-context" rev="3.1.2.RELEASE"/>
        <dependency org="org.springframework" name="spring-core" rev="3.1.2.RELEASE"/>
        <dependency org="org.springframework" name="spring-test" rev="3.1.2.RELEASE" />
        <dependency org="org.springframework" name="spring-beans" rev="3.1.2.RELEASE" />
        <dependency org="org.springframework" name="spring-jdbc" rev="3.1.2.RELEASE" />

        <dependency org="org.springframework" name="spring-tx" rev="3.1.2.RELEASE" />
        <dependency org="org.springframework" name="spring-asm" rev="3.1.2.RELEASE" />
        <dependency org="org.springframework" name="spring-expression" rev="3.1.2.RELEASE" />
        <dependency org="org.springframework" name="spring-context-support" rev="3.1.2.RELEASE" />

        <dependency org="org.springframework.batch" name="spring-batch-core" rev="2.1.9.RELEASE"/>
        <dependency org="org.springframework.batch" name="spring-batch-infrastructure" rev="2.1.9.RELEASE"/>

        <exclude module="com.springsource.org.joda.time"/>
    </dependencies>
</ivy-module> 
```

笔记：

*   有一个“排除”标签来阻止springsource重新打包的joda time模块的解析。

# android - android xml滚动视图不起作用并且layout_alignParentBottom不起作用

> ID：14788017
> 
> 赞同：0
> 
> 时间：2013-02-09T12:11:42.693
> 
> 标签：android, android-layout, android-scrollview

抱歉英语不好

我想要带有项目的 xml，并且在 xml 的底部我想要水平有 2 个按钮，我希望能够滚动的所有项目，我会给我我尝试过的东西，但我在 xml 的按钮上仍然有空间并且元素不滚动

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#FFFFFF"
        android:orientation="vertical"
        android:paddingLeft="5dip"
        android:paddingRight="5dip" >

        <TextView
            android:id="@+id/tv_address_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="10dip"
            android:text="@string/tv_address_title"
            android:textColor="#000000"
            android:textSize="20dip"
            android:typeface="serif" />

        <!-- Label Label -->

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dip"
            android:layout_weight="1" >

            <TextView
                android:id="@+id/tv_address_username"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:text="@string/tv_address_labelName"
                android:textColor="#000000" />

            <TextView
                android:id="@+id/tv_address_errorUsername"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:text="@string/require"
                android:textColor="#FF0000" />

            <EditText
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/tv_address_username"
                android:layout_marginTop="5dip"
                android:hint="@string/et_hint_enterLabel"
                android:inputType="text" />
        </RelativeLayout>

        <!-- Province Label -->

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dip"
            android:layout_weight="1" >

            <TextView
                android:id="@+id/tv_address_province"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:text="@string/tv_province"
                android:textColor="#000000" />

            <TextView
                android:id="@+id/tv_address_errorProvince"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:text="@string/require"
                android:textColor="#FF0000" />

            <Spinner
                android:id="@+id/s_address_province"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/tv_address_province"
                android:layout_marginTop="5dip"
                android:entries="@array/provinces"
                android:prompt="@string/s_province" />
        </RelativeLayout>

        <!-- City Label -->

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dip"
            android:layout_weight="1" >

            <TextView
                android:id="@+id/tv_address_city"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:text="@string/tv_city"
                android:textColor="#000000" />

            <TextView
                android:id="@+id/tv_address_errorCity"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:text="@string/require"
                android:textColor="#FF0000" />

            <Spinner
                android:id="@+id/s_address_city"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/tv_address_city"
                android:layout_marginTop="5dip"
                android:prompt="@string/s_city" />
        </RelativeLayout>

        <!-- Street Label -->

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dip"
            android:layout_weight="1" >

            <TextView
                android:id="@+id/tv_address_street"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:text="@string/tv_street"
                android:textColor="#000000" />

            <TextView
                android:id="@+id/tv_address_errorStreet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:text="@string/require"
                android:textColor="#FF0000" />

            <Spinner
                android:id="@+id/s_address_street"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/tv_address_street"
                android:layout_marginTop="5dip"
                android:prompt="@string/s_street" />
        </RelativeLayout>
    </LinearLayout>

    <!-- Save Cancel Label -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginTop="25dip"
        android:background="#000000"
        android:orientation="horizontal"
        android:weightSum="2" >

        <Button
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/b_save" />

        <Button
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/b_cancel" />
    </LinearLayout>

</RelativeLayout>
</ScrollView> 
```

![在此处输入图像描述](../Images/ca9905c8932de98d14aa063108574851.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:17:42.437

更改代码。我认为你有以下用途。

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        .....
        ....
    </RelativeLayout>
</ScrollView> 
```

# php - 如何实现 PHP/jQuery 在线文档查看器？

> ID：14788018
> 
> 赞同：3
> 
> 时间：2013-02-09T12:12:01.860
> 
> 标签：php, jquery, api, yii, documentviewer

我的应用程序是在 PHP Yii 框架中开发的。我的应用程序有一个专用网络模块，网络成员可以在其中上传文件以在他们之间共享。现在我正在使用 Amazon S3 来保存文件。有什么方法可以提供为这些文件生成预览的选项，以便用户在下载文件之前可以在线查看它们。

这是我在研究中遇到的：

```
Group Docs:
http://groupdocs.com/pricing/api-pricing. This is paid version and I'm not sure about the privacy of my documents. 

Zoho Docs
https://www.zoho.com/docs/
I'm not sure if they have an API to support the document viewing feature.

Google Drive(Formerly Google Docs)
https://developers.google.com/drive/
I'm not sure if I can only open the documents using Google Drive and not save to them on google drive. 
```

这些文件非常私密，在我的应用程序中安全性非常重要。

如果有人对此方案有任何建议/想法，请与我分享。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:09:21.593

请试试这个[链接](http://codecanyon.net/item/jquery-document-viewer/1732515)它会帮助你

`Document Viewer`是一种`jQuery plugin`允许您直接在网页中查看多种文件格式的工具。支持的文件格式`Document Viewer`有：

*   **PDF**文件
*   **文本**文件
*   **代码**– bsh, c, cc, cpp, cs, csh, css, cyc, cv, htm, html, java, js, m, mxml, perl, php, pl, pm, py, rb, sh, xhtml, xml, xsl、sql、vb
*   图像 – png、jpg、jpeg、gif
*   **音频**– mp3、m4a、oga、webma、fla
*   **视频**– m4v、ogv、ogg、webmv、flv、mpg、mpeg、mov、divx、avi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T14:46:34.570

是的，我正在使用它。

多种文件类型的 2 种选择：

1.  使用谷歌文档查看器 5 简单快速一些限制和免费）

2.  使用非常擅长动态显示 pdf 的 Pdf.js，而无需像 Google 查看器那样将每个页面都变成图像！，你可以搜索和选择文本和其他令人惊奇的东西，这是在 Firefox 上使用的。

或者尝试付费服务，他们甚至可以查看文档的 3D 视图；）

# javascript - 在 Html 文件中的值显示上设置 Click 事件，并希望在单击它时显示子元素

> ID：14788020
> 
> 赞同：2
> 
> 时间：2013-02-09T12:12:06.280
> 
> 标签：javascript, jquery, xslt, xpath

这是我的 xml 文件：-

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="final.xsl"?>  
  <root>
    <child1 entity_id = "1" value= "Asia">
        <child2 entity_id = "2" value = "india">
            <child3 entity_id = "3" value = "Gujarat">
                <child5 entity_id = "5" value ="Rajkot"></child5>
            </child3>
            <child4 entity_id = "4" value = "Rajshthan">
                <child6 entity_id = "6" value = "Ajmer"></child6>
            </child4>
        </child2>
    </child1>
    </root> 
```

这是我的 XSLT 文件：-

```
<xsl:template match="*">
    <xsl:for-each select="//child2">
    <xsl:value-of select="*"/>
    <xsl:value-of select="@value" />    
</xsl:for-each> 
```

这是我的 html 代码：-

```
<script>
function loadXMLDoc(dname)
{
    if (window.XMLHttpRequest)
    {
        xhttp=new XMLHttpRequest();
    }
    else
    {
        xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET",dname,false);
    xhttp.send("");
    return xhttp.responseXML;
}

function displayResult()
{
    xml=loadXMLDoc("final.xml");
    xsl=loadXMLDoc("books05.xsl");
    // code for IE
    if (window.ActiveXObject)
    {
        xml.addParameter("rss", test); 
        ex=xml.transformNode(xsl);
        document.getElementById("load").innerHTML=ex;
    }
    // code for Mozilla, Firefox, Opera, etc.
    else if (document.implementation && document.implementation.createDocument)
    {
        xsltProcessor=new XSLTProcessor();
        xsltProcessor.importStylesheet(xsl);
        resultDocument = xsltProcessor.transformToFragment(xml,document);
        document.getElementById("load").appendChild(resultDocument);
    }
}
</script>
<body onload="displayResult()">
<div id="load" />
</body> 
```

输出是： -

```
India 
```

现在我想在印度设置点击事件...点击印度然后显示那里的子元素，如古吉拉特邦和拉杰什坦......当显示古吉拉特邦和拉杰什坦时隐藏印度......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:19:32.640

这应该有效。首先，您可以像这样定义您的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>
  <xsl:param name="selected" />

  <xsl:template match="/*" priority="2">
    <xsl:apply-templates select="*[not($selected)] | //*[@entity_id = $selected]/*" />
  </xsl:template>

  <xsl:template match="*[*]">
    <span onclick="displayResult('{@entity_id}');">
      <xsl:call-template name="ItemText" />
    </span>
  </xsl:template>

  <xsl:template match="*" name="ItemText">
    <xsl:value-of select="concat(@value, '&#xA0;')"/>
  </xsl:template>
</xsl:stylesheet> 
```

当它在没有任何参数的情况下运行时，它会生成一个顶级项目的列表，并带有 onclick 处理程序来调用具有自己的 JavaScript 函数`entity_id`：

```
<span onclick="displayResult('1');">Asia </span> 
```

当它以 an`entity_id`作为`selected`参数的值运行时，它返回具有该实体 id 的项的子项列表：

```
<span onclick="displayResult('3');">Gujarat </span>
<span onclick="displayResult('4');">Rajshthan </span> 
```

然后，您可以像这样编写 HTML 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Untitled Page</title>
    <script>
        var xml = loadXMLDoc("final.xml");
        var xsl = loadXMLDoc("books05.xsl");

        function loadXMLDocActiveX(location) {
            var doc = new ActiveXObject("MSXML2.FreeThreadedDOMDocument");
            doc.async = false;
            doc.load(location);
            return doc;
        }

        function loadXMLDocOther(location) {
            xhttp = new XMLHttpRequest();
            xhttp.open("GET", location, false);
            xhttp.send("");
            return xhttp.responseXML;
        }

        function loadXMLDoc(dname) {
            if (window.ActiveXObject) {
                return loadXMLDocActiveX(dname);
            }
            else if (window.XMLHttpRequest) {
                return loadXMLDocOther(dname);
            }
        }

        function transformActiveX(xml, xsl, target, selected) {
            var transform = new ActiveXObject("MSXML2.XSLTemplate");
            transform.stylesheet = xsl;
            var processor = transform.createProcessor();
            processor.input = xml;

            if (selected) {
                processor.addParameter("selected", selected);
            }

            processor.transform();
            target.innerHTML = processor.output;
        }

        function transformOther(xml, xsl, target, selected) {
            var xsltProcessor = new XSLTProcessor();
            xsltProcessor.importStylesheet(xsl);

            if (selected) {
                xsltProcessor.setParameter(null, "selected", selected);
            }

            var resultDocument = xsltProcessor.transformToFragment(xml, document);
            target.innerHTML = "";
            target.appendChild(resultDocument);
        }

        function displayResult(selected) {
            var targetElement = document.getElementById("load");

            // code for IE
            if (window.ActiveXObject) {
                transformActiveX(xml, xsl, targetElement, selected);
            }
            // code for Mozilla, Firefox, Opera, etc.
            else if (document.implementation && 
                     document.implementation.createDocument) {
                transformOther(xml, xsl, targetElement, selected);
            }
        }
    </script>
</head>
<body onload="displayResult()">
    <div id="load">
    </div>
</body>
</html> 
```

注意`displayResult()`函数现在有一个参数，当这个参数有一个值时，它把这个值作为一个 XSLT 参数传递给 XSLT。

应该这样做！

# scala - 检查我在 REPL 中导入的内容？

> ID：14788025
> 
> 赞同：2
> 
> 时间：2013-02-09T12:12:39.873
> 
> 标签：scala

在我的 Scala REPL 中，有什么命令可以用来：

*   检查我导入了什么？
*   检查是否导入了特定的类/对象？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T12:18:33.357

关于1）：是的，你可以

```
scala> :imports
 1) import java.lang._             (145 types, 150 terms)
 2) import scala._                 (798 types, 806 terms)
 3) import scala.Predef._          (16 types, 167 terms, 96 are implicit) 
```

关于2）：有几种方法，但你为什么不尝试使用有问题的类呢？除此之外，你还可以做

```
scala> :type Foo
<console>:8: error: not found: value Foo
       Foo
       ^

scala> :type List
scala.collection.immutable.List.type 
```

# smarty - 如何在 smarty 中执行 mod(%) 操作？

> ID：14788026
> 
> 赞同：4
> 
> 时间：2013-02-09T12:12:41.130
> 
> 标签：smarty

我是Smarty的新手。我想对 smarty 中的数组元素进行 mod 操作。以下是我尝试实现的代码片段：

```
{if {$que_seq_no}.{$sub_ques_no+1} % 10 == 1} 
```

你能帮我纠正一下吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T03:36:28.747

您正在使用可接受的语法进行 mod 操作。我很确定您对变量使用了不正确的语法`{$que_seq_no}.{$sub_ques_no+1}`。你试过`$que_seq_no[$sub_ques_no+1]`吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-31T18:44:48.130

## 回答问题标题

模运算符 is`%`并且也有alternation `mod`。
有关 smarty 中公认的限定符的更多信息，请参阅文档：[http ://www.smarty.net/docsv2/en/language.function.if](http://www.smarty.net/docsv2/en/language.function.if)

## 回答你的问题

如您所知，您的模运算符是正确的。
从我可以从您的语法中猜到，您可能正在尝试通过数组索引访问数组的值。

要访问数组项，您有 2 种可能性：

1.  通过数组键访问 - 语法：`$arrayVariable.key`
2.  通过数组索引访问 - 语法：（`$arrayVariable[index]`索引是一个整数）
    所以在你的情况下：`$que_seq_no[$sub_ques_no+1]`

如果您尝试访问对象属性：
它类似于通过数组键访问，但运算符是`->`这样的语法是：`$objectVariable->propertyName`

有关这方面的更多信息，请参阅 smarty 文档：[http ://www.smarty.net/docsv2/en/language.variables.tpl](http://www.smarty.net/docsv2/en/language.variables.tpl)

### 什么可能让你感到困惑

`{}`我认为您对(花括号) 的使用感到有些困惑
-它们用于包装**整个**smarty 表达式-因此这意味着它们不能包含任何其他`{`or `}`。
取自 smarty docs 的一个漂亮例子是：

```
{if $name == 'Fred' || $name == 'Wilma'}
   ...
{/if} 
```

# vb.net - vb if条件来自数据库的项目和价格

> ID：14788027
> 
> 赞同：0
> 
> 时间：2013-02-09T12:12:41.597
> 
> 标签：vb.net

我实际上有一个 Access 数据库，其中有一个名为“tblfreight”的表，并且有两列（项目和价格）

我想在选择商品时自动显示价格。

有两个文本框：“txtitems”和“txtprice”

我想变成这样......

```
If txtitems.text = select from tblfreight and column items Then

txtprice.text = select from tblfreight and column Price

Else txtprice.text=0 (Zero) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:34:25.510

您需要先查询您的数据库..

从 tblfreight 中选择 * - 将为您提供所需的数据。

然后你需要把这些数据放在某个地方。您可以为此使用组合框。一旦您的组合框填满了您的数据，您就可以轻松地将价格设置到标签或文本框中。

您可以使用组合框选择索引更改事件...

在更改的事件中，这样的事情会起作用......

```
textprice.text = Combobox.selecteditem.value 
```

这会给你一个很好的开始，这就是为什么这个答案只给你步骤而不是完整的代码。

# c# - 迭代地获取特定集合的所有子集

> ID：14788028
> 
> 赞同：1
> 
> 时间：2013-02-09T12:13:04.030
> 
> 标签：c#, algorithm, binary

我知道迭代解决方案：

给定一组`n`元素

保存`int v = 2^n` 并生成所有二进制数`v`。

但是如果 n > 32 怎么办？

我知道它已经是 2^32 个子集，但是 - 绕过 32 个元素限制的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:55:10.047

1.  如果您对 64 项限制感到满意，您可以简单地使用`long`.

2.  数组 /`ArrayList`的`int`s / `long`s。有一个`next`类似的功能：

    ```
    bool next(uint[] arr)
      for (int i = 0; i < arr.length; i++)
        if (arr[i] == 2^n-1) // 11111 -> 00000
          arr[i] = 0
        else
          arr[i]++
          return true
      return false // reached the end -> there is no next 
    ```

3.  [位数组](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)。与上述相比，可能不是一个非常有效的选择。

    您可以使用一个`next`函数将最低有效位 0 设置为 1，并将所有剩余位设置为 0。例如：

    ```
    10010 -> 10011
    10011 -> 10100 
    ```

注意 - 这可能会永远持续下去，仅仅是因为有这么多的子集，但这不是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:43:40.630

您可以使用@biziclop 方法，通过以下方式传播进位位：将您的数字存储为长度为 K 的 32 位“数字”向量。因此，您可以生成 2^(K*32) 个子集，并且每个增量操作最多需要 O(K) 次操作。我能想到的另一件事是递归回溯，它将在一个数组中生成所有子集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:31:43.373

您可以编写这个简洁的 Haskell 实现的模拟：

```
powerSet = filterM (const [True, False]) 
```

`filterM`除了C#中没有内置的。没问题，你可以自己实现。这是我的尝试：

```
public static IEnumerable<IEnumerable<T>> PowerSet<T>(IEnumerable<T> els)
{
    return FilterM(_ => new[] {true, false}, els);
}

public static IEnumerable<IEnumerable<T>> FilterM<T>(
    Func<T, IEnumerable<bool>> p,
    IEnumerable<T> els)
{
    var en = els.GetEnumerator();
    if (!en.MoveNext())
    {
        yield return Enumerable.Empty<T>();
        yield break;
    }

    T el = en.Current;
    IEnumerable<T> tail = els.Skip(1);
    foreach (var x in
        from flg in p(el)
        from ys in FilterM(p, tail)
        select flg ? new[] { el }.Concat(ys) : ys)
    {
        yield return x;
    }
} 
```

然后你可以像这样使用它：

```
foreach (IEnumerable<int> subset in PowerSet(new [] { 1, 2, 3, 4 }))
{
    Console.WriteLine("'{0}'", string.Join(",", subset));
} 
```

如您所见，在实现中的任何地方都没有`int`也没有`long`明确使用，所以这里的真正限制是当前堆栈大小限制可达到的最大递归深度。

**UPD：** [Rosetta Code](http://rosettacode.org/wiki/Power_set#C.23)提供了非递归实现：

```
public static IEnumerable<IEnumerable<T>> GetPowerSet<T>(IEnumerable<T> input)
{
    var seed = new List<IEnumerable<T>>() { Enumerable.Empty<T>() }
        as IEnumerable<IEnumerable<T>>;

    return input.Aggregate(seed, (a, b) =>
        a.Concat(a.Select(x => x.Concat(new List<T> { b }))));
} 
```

# python - Python win32api 发送消息

> ID：14788036
> 
> 赞同：8
> 
> 时间：2013-02-09T12:13:32.690
> 
> 标签：python, winapi, pywin32, sendmessage

我试图澄清win32api。我只是做了一个简单的例子。获取记事本窗口，将鼠标移动到一个位置，单击并写入一个字符串。但它不起作用。有什么问题？
有人可以为我澄清 lParam 参数是什么吗？
它有什么作用，它是什么类型，它应该看起来如何？

```
import win32api, win32con, win32gui, win32ui, win32service, os, time

def f_click(pycwnd):
        x=300
        y=300
        lParam = y <<15 | x
        pycwnd.SendMessage(win32con.WM_LBUTTONDOWN, win32con.MK_LBUTTON, lParam);
        pycwnd.SendMessage(win32con.WM_LBUTTONUP, 0, lParam);

def get_whndl():
        whndl = win32gui.FindWindowEx(0, 0, None, 'NB.txt - Notepad')
        return whndl

def make_pycwnd(hwnd):       
        PyCWnd = win32ui.CreateWindowFromHandle(hwnd)
        return PyCWnd

def send_input_hax(pycwnd, msg):
    f_click(pycwnd)
    for c in msg:
        if c == "\n":
            pycwnd.SendMessage(win32con.WM_KEYDOWN, win32con.VK_RETURN, 0)
            pycwnd.SendMessage(win32con.WM_KEYUP, win32con.VK_RETURN, 0)
        else:
            pycwnd.SendMessage(win32con.WM_CHAR, ord(c), 0)
    pycwnd.UpdateWindow()

whndl = get_whndl()
pycwnd = make_pycwnd(whndl)
msg = "It works !\n"
send_input_hax(pycwnd,msg) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-09T20:47:05.417

记事本的主窗口内还有另一个窗口，您需要将消息发送给它。您可以使用 Microsoft Spy++ 工具查看此“隐藏”窗口，或者您可以像这样获取所有子窗口：

```
def callback(hwnd, hwnds):
    if win32gui.IsWindowVisible(hwnd) and win32gui.IsWindowEnabled(hwnd):
        hwnds[win32gui.GetClassName(hwnd)] = hwnd
    return True

hwnds = {}
win32gui.EnumChildWindows(whndl, callback, hwnds) 
```

我们正在寻找的窗口具有“编辑”类名称，它是记事本唯一启用且可见的子窗口。所以你的代码将以这种方式工作：

```
import win32api, win32con, win32gui, win32ui, win32service, os, time

def f_click(pycwnd):
    x=300
    y=300
    lParam = y <<15 | x
    pycwnd.SendMessage(win32con.WM_LBUTTONDOWN, win32con.MK_LBUTTON, lParam);
    pycwnd.SendMessage(win32con.WM_LBUTTONUP, 0, lParam);

def get_whndl():
    whndl = win32gui.FindWindowEx(0, 0, None, 'NB.txt - Notepad')
    return whndl

def make_pycwnd(hwnd):       
    PyCWnd = win32ui.CreateWindowFromHandle(hwnd)
    return PyCWnd

def send_input_hax(pycwnd, msg):
    f_click(pycwnd)
    for c in msg:
        if c == "\n":
            pycwnd.SendMessage(win32con.WM_KEYDOWN, win32con.VK_RETURN, 0)
            pycwnd.SendMessage(win32con.WM_KEYUP, win32con.VK_RETURN, 0)
        else:
            pycwnd.SendMessage(win32con.WM_CHAR, ord(c), 0)
    pycwnd.UpdateWindow()

whndl = get_whndl()

def callback(hwnd, hwnds):
    if win32gui.IsWindowVisible(hwnd) and win32gui.IsWindowEnabled(hwnd):
        hwnds[win32gui.GetClassName(hwnd)] = hwnd
    return True
hwnds = {}
win32gui.EnumChildWindows(whndl, callback, hwnds)
whndl = hwnds['Edit']

pycwnd = make_pycwnd(whndl)
msg = "It works !\n"
send_input_hax(pycwnd,msg) 
```

lParam 是 int 并且您在此处看到的是技巧，它允许您通过单个参数传递多个值。假设我们需要将两位数传递给一个只接受一个参数的函数。我们可以将它们作为两位数发送并在函数内部拆分。同样，按位移位 (<<) 和按位或 (|) 操作在您的情况下也是可逆的：

```
>>> x = 300
>>> y = 300
>>> lParam = y << 15 | x
>>> lParam & 0x7FFF # x
0: 300
>>> lParam >> 15 # y
1: 300 
```

[您可以在Wikipedia](http://en.wikipedia.org/wiki/Bitwise_operation)和[Python Wiki](http://wiki.python.org/moin/BitwiseOperators)中阅读有关按位运算的更多信息。

# actionscript-3 - Flex MenuBar：在 itemclick 上保持打开状态

> ID：14788046
> 
> 赞同：1
> 
> 时间：2013-02-09T12:14:13.157
> 
> 标签：actionscript-3, apache-flex, menubar

我有一个*MenuBar*，其中的对象具有 type=" *check* " 的子项。例如：

菜单

*   菜单项 A

    / 清单项目检查 1A

    / 列出项目检查 2A

    / 清单项目检查 3A

*   菜单项 B

    / 列出项目检查 1B

    / 列出项目检查 2B

我的问题如下：当用户单击一个项目（itemClick 事件）时，如何避免 MenuBar 隐藏？我希望用户能够一次“检查”多个项目，而无需隐藏/关闭菜单。

额外问题：重置所有选中项目的最简单方法是什么？:-)

最好的祝福，

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:09:30.790

我可以建议您的唯一方法是对 Menu 类进行猴子修补。我试图由我来做，它就像你在任务中描述的那样工作。

这样做的主要原因是，我们需要重新定义的函数使用这个类的私有成员。所以我们不能只是覆盖它们。

我们任务的目的是修补功能

```
function mouseUpHandler(event:MouseEvent):void{...} 
```

在它的最后你可以看到调用

```
hideAllMenus(); 
```

我们应该添加一个新变量来控制我们的项目是否属于“检查”类型。所以你需要在开始时添加这一行

```
var isCheck:Boolean = _dataDescriptor.getType(item) == "check"; 
```

最后这个条件

```
if (!isCheck) hideAllMenus(); 
```

不要忘记做一个技巧，让你的补丁类在 SDK 之前加载。你可以在[这里](http://www.jamesward.com/2009/03/10/flex-monkey-patching-and-framework-rsls/)阅读。

这是我的工作[示例](http://it-skills.su/sosamples/webspark46/menubar/SO_MenuBar.html)。Menu1 只有检查项目，Menu2 只有正常项目。

整个项目可以在[这里找到](http://it-skills.su/sosamples/webspark46/CustomMenu.zip)

# css - 在我创建的模板上通过 CSS 编辑组件中的 joomla 内容

> ID：14788053
> 
> 赞同：0
> 
> 时间：2013-02-09T12:14:45.117
> 
> 标签：css, xml, html, joomla1.5, joomla-template

如何在 joomla 中编辑组件的正文（内容）。要编辑的 css`#content`响应其他属性，例如填充/边距、边框、宽度/高度和背景，但不响应字体属性...

在 index.php 中

```
<body>
<div id="content"><jdoc:include type="component" /></div>
</body> 
```

css

```
#content
{
    padding:20px 10px 0 20px;
    width:670px;
    border-right:1px groove;
    line-height:30px;
    font-family:Monotype Corsiva;
    font-size:16px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:22:46.123

嗯..如果您认为字体属性很重要，您可以使用 !important 属性来否决样式:)

```
#content
{
    padding:20px 10px 0 20px;
    width:670px;
    border-right:1px groove;
    line-height:30px;
    font-family:Monotype Corsiva !important;
    font-size:16px !important;
} 
```

# python - 以正确的方式使用线程

> ID：14788056
> 
> 赞同：0
> 
> 时间：2013-02-09T12:15:00.517
> 
> 标签：python, multithreading

我正在研究用python编写的服务器。当客户端发送 cmd 时，服务器将调用一个运行时间未知的函数。所以为了避免阻塞，我使用了线程。但是当查看子进程时，它们似乎没有终止，导致大量内存使用。编辑：这是目录树：http: [//pastebin.com/WZDxLquC](http://pastebin.com/WZDxLquC)

按照我在stackoverflow上找到的答案，我实现了一个自定义线程类：

# sThreads.py：

```
import threading

 class Thread(threading.Thread):
   def __init__(self, aFun, args = ()):
     super(Thread, self).__init__(None, aFun, None, args)
     self.stopped = threading.Event()

   def stop(self):
     self.stopped.set()

   def isStopped(self):
    return self.stopped.isSet() 
```

然后是服务器的循环：

mainServer.py 中的一些地方：

```
def serve_forever(self,  aCustomClass, aSize = 1024):
    while True:
      self.conn, self.addr = self.sock.accept()
      msg = self.recvMSG(4096)
      if(msg):
        self.handShake(msg)
        print 'Accepted !'
        while True:
          msg = self.recvMSG(aSize)
          if(msg):
            t = sThreads.Thread(self.handle, (aCustomClass,))
            t.start()
            self.currentThreads.append(t)

            if(self.workers > 0):
              tt = sThreads.Thread(self.respond)
              tt.start()

            if(self.workers == 0 and len(self.currentThreads) > 0):
              for th in self.currentThreads:
                th.stop() 
```

使用自定义 Thread 类不会解决问题，它仍然不会停止终止的线程！

编辑：添加了 handle() 和 respond() 方法：

```
 def handle(self, aClass):
    self.workers += 1
    self.queue.put(aClass._onRecieve(self.decodeStream()))

  def respond(self):
    while self.workers > 0:
      msgToSend, wantToSend = self.queue.get()
      self.workers -= 1
      if(wantToSend):
        print 'I want to send :', msgToSend
        continue #Send is not yet implemented ! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:31:15.017

似乎 self.queue.get() 导致了所有问题......

# jquery - 不通过按钮激活的jquery滑块？

> ID：14788064
> 
> 赞同：0
> 
> 时间：2013-02-09T12:16:01.010
> 
> 标签：jquery, slider

我正在尝试查找 jquery 向下滑动效果，我希望我的网站名称在页面打开时从左侧或右侧滑入。我不希望有一个按钮可以点击来激活它，只是让它在页面打开时自动滑动:) 感谢所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:19:48.467

这是一个为您的徽标宽度设置动画的[示例。](http://jsfiddle.net/fQmnu/3/)

试试这样的代码：

```
$(function() {
  $('#logo').animate({
    width: 500,
  }, 1000);
}); 
```

现在在您的 html 中为您提供网站名称（图片？）`logo`.

在您的 css 中将其样式设置为：

```
#logo {
  width:0;
  overflow:hidden;
  white-space: nowrap;
} 
```

如果您要尝试我的代码，请记住包含 jQuery。您可以在我的示例的第 1 行看到这一点：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

# jquery - $('#fileupload').fileupload 函数没有调用

> ID：14788066
> 
> 赞同：3
> 
> 时间：2013-02-09T12:16:17.173
> 
> 标签：jquery, blueimp

我正在配置 blueimp 以在点击发布按钮时上传图片。我的问题是它没有调用该`$('#fileupload').fileupload`函数。我已包含以下 javascript 文件。以下是我的代码，请看看是什么问题。

```
<head>
    <script  type="text/javascript" src="../../js/jquery.min.js"></script>
    <script  type="text/javascript" src="../../js/jquery-ui.js"></script>
    <script  type="text/javascript" src="../../js/jQuery-File-Upload-master/js/jquery.fileupload.js"></script>
    <script type="text/javascript" src="../../js/jQuery-File-Upload-master/js/vendor/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="../../js/jQuery-File-Upload-master/js/jquery.iframe-transport.js"></script>
    <script  type="text/javascript">
        $('#fileupload').fileupload({
            dataType : 'json',
            url : "ownmessages",
            add: function (e, data) {
                $('#post') .click(function () {
                    $('#post').text('Uploading...');
                    data.submit();
                });
            },
            done: function (e, data) {
                $('#post').text('Upload finished.');
            }
        });
    </script>
</head>
<body>
    <s:form action="ownmessages" enctype="multipart/form-data" method="post">
        <s:textarea rows="2" cols="40" name="message" id="message1"></s:textarea><br>
        <s:select name="msg_visibility" id="msg_visibility" list="#{'public':'Public', 'friends':'Friends','me':'Me only'}" value="public"/>
        <input id="fileupload" type="file" name="user_post_image[]"  data-url="ownmessages"/>
        <input type="button" value="Post" id="post" />
    </s:form>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T12:24:48.907

在尝试选择任何元素之前，您需要等待文档完成加载。jQuery`.ready()`方法等待文档对象模型 (DOM) 完成加载，然后运行您的脚本。

```
$(document).ready(function() {
  $('#fileupload').fileupload({
        dataType : 'json',
        url : "ownmessages",
        add: function (e, data) {
            $('#post') .click(function () {
                $('#post').text('Uploading...');
                data.submit();
            });
        },
        done: function (e, data) {
            $('#post').text('Upload finished.');
        }
    });
}); 
```

除了使用`.ready()`你也可以将一个函数传递给 jQuery。

```
$(function() {
    // will run after DOM is loaded
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:21:58.000

第一个问题：

* * *

```
<script  type="text/javascript">
   $(document).ready(function() {
    $('#fileupload').fileupload({
        dataType : 'json',
        url : "ownmessages",
        add: function (e, data) {
            $('#post') .click(function () {
                $('#post').text('Uploading...');
                data.submit();
            });
        },
        done: function (e, data) {
            $('#post').text('Upload finished.');
        }
    });
   });
</script> 
```

这是一个开始，但可能还不够……

接下来至少为了优化起见，将脚本标签移到底部

# android - 来自相机的android位图只是缩略图大小？

> ID：14788070
> 
> 赞同：1
> 
> 时间：2013-02-09T12:17:12.360
> 
> 标签：android, android-intent, bitmap, camera

我正在制作一个可以初始化相机的应用程序，然后在拍照后，可以导入照片并让用户进一步使用它。

## 编码：

## **A类：**

```
 public OnClickListener cameraButtonListener = new OnClickListener()   
   {
      @Override
      public void onClick(View v) 
          {  
               vibrate();
               Toast.makeText(Doodlz.this, R.string.message_initalize_camera, Toast.LENGTH_SHORT).show();
               Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
               startActivityForResult(cameraIntent, CAMERA_REQUEST);               
           }      
   }; 

protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);      

    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) 
    {  
        Bitmap photo = (Bitmap) data.getExtras().get("data"); 
        Bitmap photocopy = photo.copy(Bitmap.Config.ARGB_8888, true);
        doodleView.get_camera_pic(photocopy);
    }
} 
```

## 涂鸦视图：

```
 public void get_camera_pic (Bitmap photocopy)
   {
    // get screen dimension first
      WindowManager wm = (WindowManager) context_new.getSystemService(Context.WINDOW_SERVICE);
      Display display = wm.getDefaultDisplay();
      final int screenWidth = display.getWidth();
      final int screenHeight = display.getHeight(); 
      bitmap = photocopy;
      bitmap = Bitmap.createScaledBitmap(bitmap, screenWidth, screenHeight, true);
      bitmapCanvas = new Canvas(bitmap);
      invalidate(); // refresh the screen      
   } 
```

## 问题：

使用相机可以成功拍摄照片并返回给`doodleView`用户。然而，由于导入的图像尺寸非常小，只有**缩略图大小**！（不知道为什么），所以我厌倦了放大它，然后分辨率很差。

我的问题是，如何修改上面的代码，以便将拍摄的照片尺寸设置为适合屏幕的尺寸，并且返回的照片是屏幕的 1:1，而不是像缩略图一样？（最好适合 1:1 的屏幕，因为如果是作为原始照片尺寸导入，则照片尺寸会大于屏幕，然后需要按比例缩小并按不同的宽度和高度比扭曲以适合完整屏幕）

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:40:13.133

这是默认相机应用程序的正常现象。获取完整尺寸图像的方法是告诉相机活动将结果放入文件中。首先创建一个文件，然后启动相机应用程序如下：

```
outputFileName = createImageFile(".tmp");
Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(outputFileName));
startActivityForResult(takePictureIntent, takePhotoActionCode); 
```

然后在您的 onActivityResult 中，您可以取回此图像文件并对其进行操作。

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode == takePhotoActionCode)
    {
        if (resultCode == RESULT_OK)
        {
            // NOTE: The intent returned might be NULL if the default camera app was used.
            // This is because the image returned is in the file that was passed to the intent.
                processPhoto(data);
        }
    }
} 
```

processPhoto 看起来有点像这样：

```
 protected void processPhoto(Intent i)
    {
        int imageExifOrientation = 0;

// Samsung Galaxy Note 2 and S III doesn't return the image in the correct orientation, therefore rotate it based on the data held in the exif.

        try
        {

    ExifInterface exif;
        exif = new ExifInterface(outputFileName.getAbsolutePath());
        imageExifOrientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION,
                                    ExifInterface.ORIENTATION_NORMAL);
    }
    catch (IOException e1)
    {
        e1.printStackTrace();
    }

    int rotationAmount = 0;

    if (imageExifOrientation == ExifInterface.ORIENTATION_ROTATE_270)
    {
        // Need to do some rotating here...
        rotationAmount = 270;
    }
    if (imageExifOrientation == ExifInterface.ORIENTATION_ROTATE_90)
    {
        // Need to do some rotating here...
        rotationAmount = 90;
    }
    if (imageExifOrientation == ExifInterface.ORIENTATION_ROTATE_180)
    {
        // Need to do some rotating here...
        rotationAmount = 180;
    }       

    int targetW = 240;
    int targetH = 320; 

    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(outputFileName.getAbsolutePath(), bmOptions);
    int photoWidth = bmOptions.outWidth;
    int photoHeight = bmOptions.outHeight;

    int scaleFactor = Math.min(photoWidth/targetW, photoHeight/targetH);

    bmOptions.inJustDecodeBounds = false;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = true;

    Bitmap scaledDownBitmap = BitmapFactory.decodeFile(outputFileName.getAbsolutePath(), bmOptions);

    if (rotationAmount != 0)
    {
        Matrix mat = new Matrix();
        mat.postRotate(rotationAmount);
        scaledDownBitmap = Bitmap.createBitmap(scaledDownBitmap, 0, 0, scaledDownBitmap.getWidth(), scaledDownBitmap.getHeight(), mat, true);
    }       

    ImageView iv2 = (ImageView) findViewById(R.id.photoImageView);
    iv2.setImageBitmap(scaledDownBitmap);

    FileOutputStream outFileStream = null;
    try
    {
        mLastTakenImageAsJPEGFile = createImageFile(".jpg");
        outFileStream = new FileOutputStream(mLastTakenImageAsJPEGFile);
        scaledDownBitmap.compress(Bitmap.CompressFormat.JPEG, 75, outFileStream);
    }
    catch (Exception e)
    {
        e.printStackTrace();
            }
    } 
```

需要注意的一件事是，在 Nexus 设备上，调用活动通常不会被破坏。然而，在三星 Galaxy S III 和 Note 2 设备上，呼叫活动被破坏。因此，仅将 outputFileName 作为成员变量存储在 Activity 中将导致相机应用返回时它为空，除非您记得在 Activity 终止时保存它。无论如何，这样做是一个好习惯，但这是我以前犯过的一个错误，所以我想我会提到它。

**编辑：**

关于您的评论，createImageFile 不在标准 API 中，它是我写的（或者我可能借用了 :-)，我不记得了），这里是 createImageFile() 的方法：

```
 private File createImageFile(String fileExtensionToUse) throws IOException 
{

    File storageDir = new File(
            Environment.getExternalStoragePublicDirectory(
                Environment.DIRECTORY_PICTURES
            ), 
            "MyImages"
        );      

    if(!storageDir.exists())
    {
        if (!storageDir.mkdir())
        {
            Log.d(TAG,"was not able to create it");
        }
    }
    if (!storageDir.isDirectory())
    {
        Log.d(TAG,"Don't think there is a dir there.");
    }

    // Create an image file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    String imageFileName = "FOO_" + timeStamp + "_image";

    File image = File.createTempFile(
        imageFileName, 
        fileExtensionToUse, 
        storageDir
    );

    return image;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:28:27.270

要访问完整图像，您需要通过`data.getData()`在 doodleView 中使用来访问意图 URI，或者（更好）通过额外提供 URI 将图像传递给意图来提供您自己的 URI 来存储图像[`EXTRA_OUTPUT`](http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_OUTPUT)。

# c# - 在 C# 中的两个实例化 WinForm 之间传递数据

> ID：14788077
> 
> 赞同：0
> 
> 时间：2013-02-09T12:17:51.907
> 
> 标签：c#, .net, winforms

我有一个主窗体，用于计算并打开和关闭用户创建的项目。

当用户单击 File 下的 Open Project 按钮时，将打开一个名为 Open Project 的表单，如下所示，允许用户加载项目：

![在此处输入图像描述](../Images/06915b74d5e07b286a4f32630fe950ff.png)

现在，我想在单击“确定”后将此表单中的数据传递到主表单中。

我遇到的问题是主窗体已经打开。

对此问题的任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:25:41.713

尝试创建`Properties`一个`Open Project Form`

**主表格**

```
private void openButton_Click(object sender, EventArgs e)
{
    using(var f = new Open_Project_Form())
    {
      f.ProjectReference = projectRefrencetTextBox.Text;
      f.ProjectNo = projectNoTextBox.Text;
      f.ShowDialog();
    }
} 
```

**打开项目表格**

```
public string ProjectReference { get; set; }
public string ProjectNo { get; set; }

private void Open_Project_Form_Load(object sender, EventArgs e)
{
    projectRefrenceComboBox.Text = ProjectReference;
    projectNoTextBox.Text = ProjectReference;
} 
```

* * *

# 更新

我误解了这个问题。我之前的回答是从`MainForm`到`OpenProjectForm`这次是从`OpenProjectForm`到`MainForm`

**主表格**

```
//Properties for MainForm
public string ProjectReference { get; set; }
public string ProjectNo { get; set; }

private void openButton_Click(object sender, EventArgs e)
{
    using(var f = new Open_Project_Form() { Owner = this })
    {
        f.ShowDialog();
        if (f.DialogResult == DialogResult.OK)
        {
          projectRefrencetTextBox.Text = ProjectReference;
          projectNoTextBox.Text = ProjectNo;
        }
    }
} 
```

**打开项目表格：**请注意，您有一个`okButton`和`cancelButton`

```
private void Open_Project_Form_Load(object sender, EventArgs e)
{
    okButton.DialogResult = DialogResult.OK;
    this.AcceptButton = okButton;
    this.CancelButton = cancelButton;
} 
```

现在，在`okButton_Click event`

```
private void okButton_Click(object sender, EventArgs e)
{
   var f = Owner as MainForm;
   if (f == null) return;
   f.ProjectReference = projectRefrenceComboBox.Text;
   f.ProjectNo = projectNoTextBox.Text;
   Close();
} 
```

参考：

*   [接受按钮](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton.aspx)
*   [取消按钮](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.cancelbutton.aspx)
*   [Button.DialogResult](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.dialogresult.aspx)

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:26:35.813

可以使用事件吗？创建一个 EventClass 并将值作为事件的结果返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:43:04.140

在打开的表单类中创建一个事件：

```
public event EventHandler<ProjectDetailsArgs> ProjectDetailsSubmitted;
    public class ProjectDetails: EventArgs
    {
        public string projectReference{ get; set; }
        public string projectNo{get;set;}
        //you can add more prop.s here
    }

On your Ok button click event add 

if (ProjectDetailsSubmitted != null)
                {
                    ProjectDetailsArgs argss = new ProjectDetailsArgs();
                    argss.projectReference = projectRefrencetTextBox.Text;
                    argss.projectNo = projectNoTextBox.Text;
                    ProjectDetailsSubmitted(null, argss);
                } 
```

在您的主窗体中为其创建一个处理程序：

```
 childform.ProjectDetailsSubmitted+=new EventHandler<ProjectDetailsArgs>project_detailsSubmitted);

                public void project_detailsSubmitted(object sender, ProjectDetailsArgs e)
                {
         //Do Your work
                } 
```

# ios - 如何为 iOS 应用程序进行内存管理？

> ID：14788080
> 
> 赞同：-1
> 
> 时间：2013-02-09T12:18:19.713
> 
> 标签：ios, xcode, cocoa-touch, memory

我使用故事板和 ARC 模式。这包括三个视图控制器。
每个视图控制器都有自己的类。

VC1 有 Class1.h 和 Class1.m
VC2 有 Class2.h 和 Class2.m。

在每个 m 文件中，我创建图像视图并将图像添加到图像视图中。
然后我将此图像视图添加到滚动视图中。

在这种情况下，我在 class1 中使用了大约 200 张图像后，class2 的图像无法在图像视图中显示。

起初，我认为这是内存问题。
我认为它达到了内存限制，所以它不能再次添加其他图像。

所以，我减小图像大小并重试（从 300Mb 减小到 30Mb）。
但是，它没有用。我不知道。我怎么解决这个问题？请告诉我方法。

那是我的代码。

```
- (void)viewDidLoad
{

[super loadView];
self.view.backgroundColor = [UIColor grayColor];

UIScrollView *ScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 44, self.view.frame.size.width, self.view.frame.size.height)];
ScrollView.pagingEnabled = YES;

NSInteger numberOfViews = 200;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * self.view.frame.size.width;

    // Create a UIImage to hold Info.png
    UIImage *image1 = [UIImage imageNamed:@"Image-001.jpg"];
    UIImage *image2 = [UIImage imageNamed:@"Image-002.jpg"];

    UIImage *image13 = [UIImage imageNamed:@"Image-200.jpg"];

    NSArray *images = [[NSArray alloc] initWithObjects:image1,image2,...,image200,nil];

    UIImageView *ImageView = [[UIImageView alloc] initWithFrame:CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height-44)];
    [ImageView setImage:[images objectAtIndex:i]];

    [ScrollView addSubview:ImageView];
}
ScrollView.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height);

[self.view addSubview:ScrollView]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:37:16.203

1.  Have a check whether you are adding the imageview to scrollview or to self.view

2.  Check the scroll view frame or scrollview Content size. to make n number of images to UIScrollView u can do this

3.  Declare and add the array object outside for loop so it will consume compiler time.

> UIScrollView * scroll=[[UIScrollView alloc]initWithFrame:CGRectMake(0,0,self.view.size.width,self.view.size.height)]; [self.view addsubView:scroll];
> 
> float xaxis = 10;
> 
> for(int i=0;i <20;i++) { UIImageView *imageview=[[UIimageView alloc]initWithFrame:CGRectMake(xaxis,0,150,150)]]; [imageview setImage:[UIImage imagenamed:@""]];//if u want multiple images u can call from array [scroll addSubview:imageview]; xaxis=xaxis*i+50;//apprx }
> 
> scroll.contentsize=CGSizemake(xaxis+30,self.view.size.height);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:26:58.783

为每个图像创建单独`UIImageView`的（具有适当大小）并将所有图像添加`UIImageView`到`UIScrollView`并给出适当`contentSize`的`UIScrollView`.

获取变量并在**.h 文件**`int x;`中声明它并在方法中 分配**`x=0;``viewDidLoad`**

 **然后给出适当的 UIImageView 框架

```
- (void)viewDidLoad
{

[super viewDidLoad];
self.view.backgroundColor = [UIColor grayColor];

x=0;

UIScrollView *ScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 44, self.view.frame.size.width, self.view.frame.size.height)];
ScrollView.pagingEnabled = YES;

NSInteger numberOfViews = 200;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * self.view.frame.size.width;

    // Create a UIImage to hold Info.png
    UIImage *image1 = [UIImage imageNamed:@"Image-001.jpg"];
    UIImage *image2 = [UIImage imageNamed:@"Image-002.jpg"];

    UIImage *image13 = [UIImage imageNamed:@"Image-200.jpg"];

    NSArray *images = [[NSArray alloc] initWithObjects:image1,image2,...,image200,nil];

    UIImageView *ImageView = [[UIImageView alloc] initWithFrame:CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height-44)];
    [ImageView setImage:[images objectAtIndex:i]];

    [ScrollView addSubview:ImageView];

    x= x + imageView.frame.size.width;

}
ScrollView.contentSize = CGSizeMake(imageView.frame.size.width * numberOfViews, self.view.frame.size.height);

[self.view addSubview:ScrollView];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:49:25.267

为什么要初始化 imageArray 200 次？

为什么for循环中的以下部分::

```
// Create a UIImage to hold Info.png
UIImage *image1 = [UIImage imageNamed:@"Image-001.jpg"];
UIImage *image2 = [UIImage imageNamed:@"Image-002.jpg"];

UIImage *image13 = [UIImage imageNamed:@"Image-200.jpg"];

NSArray *images = [[NSArray alloc] initWithObjects:image1,image2,...,image200,nil]; 
```

您只需要在 for 循环开始之前初始化**图像**数组一次，然后遍历这些图像以添加到滚动视图**

# scala - Circumflex orm 不适用于 Play 2.1

> ID：14788086
> 
> 赞同：0
> 
> 时间：2013-02-09T12:19:11.150
> 
> 标签：scala, playframework-2.1, circumflex-orm

我已在我的应用程序中将播放框架更新为 2.1 版，但它不再工作了。

这是一个简单的控制器：

```
package controllers

import play.api._
import play.api.mvc._
import models.Country
import ru.circumflex.orm._

object Application extends Controller {

  def index = Action {

      val co = Country AS "co"
      val q = SELECT (co.*) FROM (co)

      val countries: Seq[Country] = q.list()

      Ok(views.html.index(countries))
  }

} 
```

这是一个国家的模型：

```
package models

import ru.circumflex.orm.{TextField, Table, Record}
import java.util.regex.Pattern

class Country extends Record[String, Country] {
  def PRIMARY_KEY = code
  def relation = Country

  def this(code: String, name: String) = {
    this()
    this.code := code
    this.name := name
  }

  val code: TextField[Country] = "code".VARCHAR(2).NOT_NULL
  val name = "name".TEXT.NOT_NULL

  def cities = inverseMany(City.country)

  override def toString = name.getOrElse("unknow")
}

object Country extends Country with Table[String, Country] {
  val codeKey = UNIQUE(code)
  val codeChk = CONSTRAINT("code_chk").CHECK("code IN ('ch', 'us', 'uk', 'fr', 'es', 'it', 'pt', 'by')")
  val idx = "country_code_idx".INDEX("LOWER(code)").USING("btree").UNIQUE

  validation.notNull(_.code)
            .notEmpty(_.code)
            .pattern(_.code, Pattern.compile("(?i:[a-z]{2})"))
} 
```

打开页面时出现以下错误：

```
[error] application -                                                                            

! @6d9l5j0i0 - Internal server error, for (GET) [/] ->                                           

play.api.Application$$anon$1: Execution exception[[RuntimeException: java.lang.ExceptionInInitial
izerError]]                                                                                      
        at play.api.Application$class.handleError(Application.scala:289) ~[play_2.10.jar:2.1.0]  
        at play.api.DefaultApplication.handleError(Application.scala:383) [play_2.10.jar:2.1.0]  
        at play.core.server.netty.PlayDefaultUpstreamHandler$$anonfun$12$$anonfun$apply$24.apply(
PlayDefaultUpstreamHandler.scala:314) [play_2.10.jar:2.1.0]                                      
        at play.core.server.netty.PlayDefaultUpstreamHandler$$anonfun$12$$anonfun$apply$24.apply(
PlayDefaultUpstreamHandler.scala:312) [play_2.10.jar:2.1.0]                                      
        at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play
_2.10.jar:2.1.0]                                                                                 
        at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play
_2.10.jar:2.1.0]                                                                                 
java.lang.RuntimeException: java.lang.ExceptionInInitializerError                                
        at play.api.mvc.ActionBuilder$$anon$1.apply(Action.scala:222) ~[play_2.10.jar:2.1.0]     
        at play.api.mvc.Action$$anonfun$apply$1$$anonfun$apply$2$$anonfun$apply$5$$anonfun$apply$
6.apply(Action.scala:109) ~[play_2.10.jar:2.1.0]                                                 
        at play.api.mvc.Action$$anonfun$apply$1$$anonfun$apply$2$$anonfun$apply$5$$anonfun$apply$
6.apply(Action.scala:109) ~[play_2.10.jar:2.1.0]                                                 
        at play.utils.Threads$.withContextClassLoader(Threads.scala:18) ~[play_2.10.jar:2.1.0]   
        at play.api.mvc.Action$$anonfun$apply$1$$anonfun$apply$2$$anonfun$apply$5.apply(Action.sc
ala:108) ~[play_2.10.jar:2.1.0]                                                                  
        at play.api.mvc.Action$$anonfun$apply$1$$anonfun$apply$2$$anonfun$apply$5.apply(Action.sc
ala:106) ~[play_2.10.jar:2.1.0]                                                                  
Caused by: java.lang.ExceptionInInitializerError: null                                           
        at controllers.Application$$anonfun$index$1.apply(Application.scala:18) ~[na:na]         
        at controllers.Application$$anonfun$index$1.apply(Application.scala:11) ~[na:na]         
        at play.api.mvc.ActionBuilder$$anonfun$apply$11.apply(Action.scala:254) ~[play_2.10.jar:2
.1.0]                                                                                            
        at play.api.mvc.ActionBuilder$$anonfun$apply$11.apply(Action.scala:254) ~[play_2.10.jar:2
.1.0]                                                                                            
        at play.api.mvc.ActionBuilder$$anon$1.apply(Action.scala:217) ~[play_2.10.jar:2.1.0]     
        at play.api.mvc.Action$$anonfun$apply$1$$anonfun$apply$2$$anonfun$apply$5$$anonfun$apply$
6.apply(Action.scala:109) ~[play_2.10.jar:2.1.0]                                                 
Caused by: java.lang.ClassNotFoundException: models.Country                                      
        at java.net.URLClassLoader$1.run(Unknown Source) ~[na:1.7.0_09]                          
        at java.net.URLClassLoader$1.run(Unknown Source) ~[na:1.7.0_09]                          
        at java.security.AccessController.doPrivileged(Native Method) ~[na:1.7.0_09]             
        at java.net.URLClassLoader.findClass(Unknown Source) ~[na:1.7.0_09]                      
        at java.lang.ClassLoader.loadClass(Unknown Source) ~[na:1.7.0_09]                        
        at java.lang.ClassLoader.loadClass(Unknown Source) ~[na:1.7.0_09] 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:31:25.120

Circumflex 2.x 似乎不是针对 scala 2.10 构建的（play 2.1 需要它）。

circumflex 3.0 是在 2.10 中构建的，但目前仅在快照中。您可以在此处获取快照：

[https://oss.sonatype.org/content/repositories/snapshots/](https://oss.sonatype.org/content/repositories/snapshots/)

请注意，包名称已从**ru.circumflex**更改为**pro.savant.circumflex** ，因此您可能需要重构导入语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T00:19:01.783

我使用以下信息修复了它：[参考](https://groups.google.com/forum/?fromgroups#!topic/circumflex-scala/ne-fkznMLew)

首先从 Github 获取上一个版本的circumflex：

```
git clone git://github.com/inca/circumflex.git 
```

按照建议，更改文件 orm/src/main/scala/relation.scala 中的行

第 55 行：

```
val _recordClass: Class[R] = Class.forName( 
```

**到**

```
val _recordClass: Class[R] = this.getClass().getClassLoader().loadClass( 
```

现在我们可以在 Play 2.1 App 中编译、安装和使用它了

```
cd circumflex
mvn clean install 
```

如果您只需要一个模块：

```
cd circumflex
mvn clean install -pl <circumflex-orm> -am 
```

现在编辑您的`project/Build.scala`文件以添加依赖项和本地代表

```
 val appDependencies = Seq(    
   "pro.savant.circumflex" % "circumflex-orm" % "3.1-SNAPSHOT"
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(defaultScalaSettings:_*).settings(
    resolvers += "Local Maven Repository" at "file:"+Path.userHome.absolutePath+"/.m2/repository"
  ) 
```

# java - 将主要参数传递给方法

> ID：14788091
> 
> 赞同：0
> 
> 时间：2013-02-09T12:19:37.757
> 
> 标签：java, arrays, string, main

我正在尝试将字符串参数数组从 main 传递到我的`integerCheck`方法中。main 的输入永远不会超过 3 个字符串。代码编译得很好，但是当我尝试输入 3 个字符串时，我得到了这个错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 3 
```

这是从哪里来的？

```
private static void integerCheck(String[] b)
{
    int i;
    for(i=0;i<4;i++)
    { 
        try {Integer.parseInt(b[i]);}
        catch (NumberFormatException e)
        { 
        System.err.println("one of inputs not an int");
        System.exit(1);
        }
    }
}

public static void main(String[] args)
{

    integerCheck(args);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:23:49.657

应该是：（`for(i=0;i<3;i++)`如果您将`4`元素传递给您的程序，它应该与 一起使用`4`，但如果您只想要`3`输入，它应该是`3`）。

**为什么？**

因为`for(i=0;i<4;i++)`正在运行`0 1 2 3`。所以预期输入的长度实际上是`4`. 所以你试图达到`b[3]`，这是`java.lang.ArrayIndexOutOfBoundsException`。

*注意*：调试器会对您有很大帮助..使用它，您会更好地理解问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:23:41.700

很简单的错误。如果数组中有 3 个元素，它们的索引为 0、1 和 2。您的循环从 0 变为小于 4，这意味着它试图访问元素 0、1、2 和 3。元素 3 不存在，因为您只给出了 3 个论点。另一种思考方式是元素编号 3 是数组中的第四个元素（因为元素从 0 开始编号）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:23:53.303

你`for(i=0;i<4;i++)`的元素多于`string[b]`

试试这个并更换

```
 for(i=0;i<4;i++) 
```

和

```
 for(i=0;i<b.length;i++) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T12:40:34.933

试试这个

```
 private static void integerCheck(String[] b)
    {
        int i;
        for(i=0;i<3;i++)
        { 
            try {Integer.parseInt(b[i]);}
            catch (NumberFormatException e)
            { 
            System.err.println("one of inputs not an int");
            System.exit(1);
            }
        }
    }

public static void main(String[] args)
{
     if(args.length==3)
    {
    integerCheck(args);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T12:46:12.827

代码编译良好，因为您编写的代码中没有语法错误。java.lang.ArrayIndexOutOfBoundsException 是一个运行时异常，当您尝试访问超出数组大小的索引时会遇到该异常。

在当前情况下，只要在调用 main 方法时传递的参数少于 4 个，您就会面临这种情况。请记住，Java 中的索引是基于 0 的，因此您有 0 1 2 和 3 。

根据你所说的，你正在传递 3 个参数，它们分别位于 0 1 和 2，所以要么传递第 4 个值，要么将条件更改为 for(i=0;i<2;i++)。

# joomla - 在 Joomla 中创建链接

> ID：14788098
> 
> 赞同：0
> 
> 时间：2013-02-09T12:21:22.413
> 
> 标签：joomla, joomla2.5

大家好，我在 joomla 2.5 中有一个显示元素列表的组件。现在我想查看一个特定的项目，如何创建一个链接到这个元素的 id 并查看整个描述我有这个

```
<a href="<?php echo JRoute::_('index.php?option=com_productos&view=especialidad8780&Itemid=1'); ?>" >este</> 
```

但不要给我看`Itemid=1`

浏览器取这个路由器

index.php?option=com_productos&view=especialidad8780&lang=es

这是在joomla中做链接的正确形式吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:03:00.080

大卫是对的。“itemId”是菜单项的保留变量（用于在单击的菜单元素上设置“活动”类）。尝试切换到id，productid，...

而且您的链接中也有一个小错误（缺少闭包）：

```
<a href="<?php echo JRoute::_('index.php?option=com_productos&view=especialidad8780&Itemid=1'); ?>" >este</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T22:48:00.383

如果您尝试链接到特定项目，您通常使用`&id=1`. Itemid 保留用于链接到菜单项，并会根据需要由 JRoute 调用自动添加。

# android - 在针对服务器的 android 应用程序上使用 OAuth 的方法是什么？

> ID：14788099
> 
> 赞同：0
> 
> 时间：2013-02-09T12:21:29.980
> 
> 标签：android, ios, oauth

我最近在 Android 应用程序（或 iOS）上进行了一些 OAuth 身份验证，但我现在遇到了问题。

当此 OAuth 身份验证需要存储在远程服务器中以执行登录请求时。最好的方法是什么？

我应该从这个 oauth 提供者发送访问令牌，然后只为我的应用程序获取其他 access_token 吗？

还是应该以不同的方式完成？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:28:53.083

好吧，没有一般的答案，但我会尽力解释。

我能想到的2个基本流程：

1) 如果您不希望您的应用直接要求输入用户名/密码，您可以使用 Facebook/Twitter 登录。

2）直接向用户询问用户名/密码，并在您的服务器上实现您自己的 OAuth 服务，然后使用 iOS OAuth 库与其通信。您的服务将需要在某个阶段执行用户/通过身份验证。您可以在客户端上生成随机 UID（用户标识）并使用它与服务器通信。或者您可以只传递用户名/密码，让服务器生成一个 UID，然后在请求标头中使用该 UID 进行通信。

希望这有帮助

# navigation - JSF 1.2 中的查询重分级导航规则

> ID：14788100
> 
> 赞同：0
> 
> 时间：2013-02-09T12:21:30.353
> 
> 标签：navigation, jsf-1.2

如果我有以下导航规则：

```
<navigation-rule>
    <from-view-id>Mainview</from-view-id>
    <navigation-case>
        <from-outcome>outcome1</from-outcome>
        <to-view-id>view1</to-view-id>  
    </navigation-case>
    <navigation-case>
        <from-outcome>outcome2</from-outcome>
        <to-view-id>view2</to-view-id>  
        <redirect/>         
    </navigation-case>
    <navigation-case>
        <from-outcome>outcome3</from-outcome>
        <to-view-id>view3</to-view-id>  
        <redirect/>         
    </navigation-case>
</navigation-rule> 
```

如果整个流程没有任何验证错误，一切都会正常工作。那是 ：

步骤 1) MainForm 中的方法返回结果 1 渲染视图 1 步骤 2) 视图 1 中的方法返回结果 2 渲染视图 2 步骤 3) 视图 2 中的方法返回结果 3 渲染视图 3

请注意，上述规则中没有重定向，这意味着浏览器将在浏览器窗口中显示 Mainview。

如果在上面的第 2 步，验证失败，那么浏览器将在地址栏中显示 view1 而不是显示 view2 。

现在，对于下一个流程（一旦验证成功），起点将不是 Mainview，而是 view1，这意味着导航案例必须用 view1 编写

如何处理？我们是否需要编写另一套导航规则？或者像上面这样设计导航规则是完全错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:41:16.497

查看[规范](http://sqltech.cl/doc/oas10gR31/web.1013/b25947/web_pagenavigation002.htm)，我们必须得出结论，每个标签只能有一个`<from-view-id>`标签`<navigation-rule>`。

> **from-view-id：**可选元素，包含完整的页面标识符（页面的上下文相关相对路径）或以星号 (*) 通配符结尾的页面标识符前缀。如果您使用通配符，则该规则适用于与通配符模式匹配的所有页面。要制定适用于所有页面的全局规则，请将此元素留空。

Being this tag optional, you can specify it or not -note that you can also specify a wildcard view id, so the navigation case covers every view id's that are related with the pattern- but you only can have one for each rule. So for your case you have the following options:

*   Create a new navigation rule to manage navigation cases starting from `view1`.
*   Cover your view id's with a pattern and use a wildcard to group them (naming your first page *view0*):

    ```
    <navigation-rule>
         <from-view-id>view*</from-view-id>
         <navigation-case>
         <from-outcome>outcome1</from-outcome>
         <to-view-id>view1</to-view-id>  
    </navigation-case>
    <navigation-case>
        <from-outcome>outcome2</from-outcome>
        <to-view-id>view2</to-view-id>  
        <redirect/>         
    </navigation-case>
    <navigation-case>
        <from-outcome>outcome3</from-outcome>
        <to-view-id>view3</to-view-id>  
        <redirect/>         
    </navigation-case> 
    ```

*   Just don't assign `from-view-id` and let it work for every `view-id` you're actually in. You won't have problems while you use different outcomes for each case.

# c++ - 未定义的符号 OutputArray opencv fedora

> ID：14788107
> 
> 赞同：-2
> 
> 时间：2013-02-09T12:22:31.837
> 
> 标签：c++, opencv, fedora, undefined-symbol

我最近在 ubuntu 下安装了几年后的 Fedora 18。

在适当的更新之后，我下载并重新编译了我最喜欢的库，例如 Opencv 和 PCL。

为了检查一切是否正常，我尝试编译以下代码：

```
cv::Mat im = cv::imread("023.JPG");

cv::resize(im.clone(),im,cv::Size(600,800));

cv::imshow("default",im);

cv::waitkey(0); 
```

编译步骤看起来已经成功，但是当我尝试执行此代码时，我得到以下信息：

> /home/jonny/Desktop/prog/MMSE_SD2/test_opencv-build-desktop-Qt_4_8_4_in_PATH_ *System* _Release/test_opencv：符号查找错误：/home/jonny/Desktop/prog/MMSE_SD2/test_opencv-build-desktop-Qt_4_8_4_in_PATH_System_Release */* test_opencv：未定义符号：_ZN2cv12_OutputArrayD1Ev

我使用 qtcreator 作为 IDE。

我的 .pro 文件如下所示：

```
INCLUDEPATH +=/usr/local/include/opencv-2.4.9

LIBS += -lopencv_core \
 -lopencv_highgui \
 -lopencv_imgproc \
 -lopencv_calib3d \
 -lopencv_contrib \
 -lopencv_features2d \
 -lopencv_flann \
 -lopencv_legacy \
 -lopencv_ml \
 -lopencv_objdetect \
 -lopencv_video 

SOURCES += \
    main.cpp 
```

我重新编译了三次opencv库但没有成功。

如果有人可以帮助我真的很感激。

提前致谢

强尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:40:49.343

我的假设是您在系统中安装了旧版本的 OpenCV，并且您的程序运行时链接到了错误的库。

您可以通过调用轻松检查这一点`ldd <binary>`，这将列出您的二进制文件将链接到的库。如果它们不是您安装在 /usr/local/lib/ 中的那些，您可以通过设置 LD_LIBRARY_PATH 来解决问题。

# titanium - 我想在 Titanium 中开发一个与 Android、iPhone 和 Blackberry 兼容的基于套接字的聊天应用程序

> ID：14788108
> 
> 赞同：-1
> 
> 时间：2013-02-09T12:22:37.813
> 
> 标签：titanium

我想在 Titanium 中开发一个基于套接字的聊天应用程序，与 Android、iPhone 和 Blackberry 兼容。

请给我建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:04:11.860

您可以使用 Titanium 和 Node ACS 来创建应用程序。这是一个示例聊天应用程序教程。我希望它对你有帮助。

[http://nodeacs.cloud.appcelerator.com/guides/quickstart](http://nodeacs.cloud.appcelerator.com/guides/quickstart)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:58:14.153

如果你想要一个“基于套接字的聊天应用程序”，那么你已经对实现做出了决定，所以你真的只需要知道实现它的接口。尝试阅读精彩的手册，它非常详细地介绍了如何使用套接字。

[http://docs.appcelerator.com/titanium/3.0/#!/api/Titanium.Network.Socket.TCP](http://docs.appcelerator.com/titanium/3.0/#!/api/Titanium.Network.Socket.TCP)

您需要滚动自己的服务器端来接受套接字连接，以及您自己的通信协议。或遵守现有协议。

或者您可以使用我创建的现有的、工作的 Ti.Cloud 示例。它是 Hini 在 nodeacs.cloud.appcelerator.com 上链接的 Titanium 特定版本——

[https://github.com/appcelerator-modules/ti.cloud/tree/master/commonjs/example/windows/chats](https://github.com/appcelerator-modules/ti.cloud/tree/master/commonjs/example/windows/chats)

# sql-server - 如何使用流利的 nhibernate 指定复合键，其中一个键是标识符，另一个不是

> ID：14788109
> 
> 赞同：0
> 
> 时间：2013-02-09T12:22:58.573
> 
> 标签：sql-server, nhibernate-mapping, fluent, automapping

我正在尝试使用流利的 nhibernate 指定一个复合键，其中一个键是标识符，另一个不是标识符。流利的可以吗？如果是，我在下面的映射中做错了什么？

```
public void Override(AutoMapping<AppUser> mapping)
{
    mapping.Table("AppUser");
    mapping.Id(x => x.Id, "RowID");
    mapping.CompositeId().KeyProperty(x => x.Id, "RowId")
        .KeyProperty(x => x.ServerID);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:15:19.183

有一个免费工具可以帮助生成映射[http://nmg.codeplex.com](http://nmg.codeplex.com)

这个博客也是一个很好的参考指南[http://referencenotherdev.blogspot.co.uk/2012/02/nhibernates-mapping-by-code-summary.html?m=1](http://referencenotherdev.blogspot.co.uk/2012/02/nhibernates-mapping-by-code-summary.html?m=1)

你基本上在那里，你需要删除 id 映射线。

# google-app-engine - 谷歌应用引擎。JPA。@ManyToOne 导致 org.datanucleus.store.appengine.DatastoreRelationFieldManager$ChildWithoutParentException

> ID：14788110
> 
> 赞同：0
> 
> 时间：2013-02-09T12:23:05.877
> 
> 标签：google-app-engine, jpa, datanucleus

```
@Entity
public class Group
{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key id;
}

@Entity
public class User
{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key id;

    @ManyToOne(fetch = FetchType.LAZY)
    private Group group;
} 
```

在以下代码之后：

```
EntityManager entityManager = EntityManagerFactoryHolder.getEntityManagerFactory().createEntityManager();
Group group = new Group();
entityManager.persist(group);
User user = new User();
user.setGroup(group);
entityManager.persist(user);
entityManager.close(); 
```

我收到以下错误

> 检测到尝试将 User(28) 建立为 Group(27) 的父级，但 Group(27) 标识的实体已在没有父级的情况下保留。一旦对象被持久化，就不能建立或更改父对象。org.datanucleus.store.appengine.DatastoreRelationFieldManager$ChildWithoutParentException：检测到尝试将 User(28) 建立为 Group(27) 的父级，但 Group(27) 标识的实体已在没有父级的情况下持久化。一旦对象被持久化，就不能建立或更改父对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:19:12.797

似乎这只适用于反向关联。添加了 @OneToMany 设置为 Group 对象，它现在可以工作了。

# node.js - Nodejs Restify 集合/数组参数

> ID：14788112
> 
> 赞同：0
> 
> 时间：2013-02-09T12:23:17.607
> 
> 标签：node.js, rest, restify

我需要通过 Nodejs + Restify 开发的 REST Web 服务发送多个项目。我可以发送单个对象，例如用户。

假设，我的应用程序一次有 10 - 100 个用户，并且想通过在 nodejs/restify 中开发的 Restful Web 服务上传到服务器上。什么是好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-14T21:02:22.370

您可以将数组放入 Json 中，然后使用 JSON.stringify(your json) 在一个 url 参数中将其发送到您的 Web 服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T22:41:03.150

我设法通过一个 jQuery Ajax 请求来做到这一点。您可以查看我的帖子以获取解决方案。 [将 jQuery JSON 对象发布到 NodeJs Restify](https://stackoverflow.com/questions/16922379/post-jquery-json-object-to-nodejs-restify)

# c# - 如何使用友好名称的 Core Audio API 主音量控制？

> ID：14788113
> 
> 赞同：2
> 
> 时间：2013-02-09T12:23:30.670
> 
> 标签：c#, volume

我正在使用此处提供的代码。

[http://www.codeproject.com/Articles/18520/Vista-Core-Audio-API-Master-Volume-Control](http://www.codeproject.com/Articles/18520/Vista-Core-Audio-API-Master-Volume-Control)

我正在尝试控制我的应用程序的数量和我的应用程序启动的 1 个附加进程。有没有办法根据应用程序而不是master来使用上面的代码？

这是表格中的代码

```
 MMDeviceEnumerator DevEnum = new MMDeviceEnumerator();
            device = DevEnum.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia);
            beiVolumControl.EditValue = (int)(device.AudioEndpointVolume.MasterVolumeLevelScalar * 100); 
```

通过列出的评论，有一种方法可以使用友好名称选择设备，但我在任何地方都没有看到任何示例。

这是我的音量滑块更改时使用的代码

```
 //change the Volume
    void ritbVolumeControl_EditValueChanged(object sender, EventArgs e)
    {
        TrackBarControl trackBar = sender as TrackBarControl;
        //only use in vista or above.
        if (useAlternateSound == false)
        {
            device.AudioEndpointVolume.MasterVolumeLevelScalar = ((float)trackBar.Value / 100.0f);
        }
        else
        {
            //probably using xp or lower.
        }
        // MessageBox.Show(trackBar.Value.ToString());

    } 
```

最终目标是在不控制所有应用程序的主音量的情况下控制我的应用程序和另一个进程的音量。所以我可以将它们静音，但仍然使用 Skype 语音聊天作为示例。我会以错误的方式解决这个问题吗？

谢谢。

# javascript - Selenium IDE - 如何处理 java 脚本警报和确认

> ID：14788118
> 
> 赞同：3
> 
> 时间：2013-02-09T12:23:58.830
> 
> 标签：javascript, selenium, selenium-ide

我是自动化测试的新手，已经开始使用 Selenium IDE 作为自动化的选择。

我只想知道是否有任何方法可以使用 IDE 处理 java 脚本警报。

举个例子：我单击“删除”按钮，出现一个带有确定和取消选项的 java 脚本警告框，但 Xpath 无法识别这些元素。另一方面，当我为单击事件创建脚本时删除按钮并使用 Selenium IDE 运行它，元素会自动删除。

所以，请各位大侠帮忙。如果我的问题需要详细说明，请回复。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:36:29.087

看看[文档](http://seleniumhq.org/docs/02_selenium_ide.jsp#alerts-popups-and-multiple-windows)。主要部分是这样的：

> 在 Selenium 下运行时，不会出现 JavaScript 弹窗。这是因为函数调用实际上在运行时被 Selenium 自己的 JavaScript 覆盖。但是，仅仅因为您看不到弹出窗口并不意味着您不必处理它。要处理弹出窗口，您必须调用它的`assertFoo(pattern)`函数。如果您未能断言弹出窗口的存在，您的下一个命令将被阻止，您将收到类似于以下内容的错误
> 
> ```
> [error] Error: There was an unexpected Confirmation! [Chose an option.] 
> ```

[有关警报的部分中提供了分步手册。](http://seleniumhq.org/docs/02_selenium_ide.jsp#alerts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:25:29.800

IDE 中的 java-script 警报可以使用 selenium 命令 storeAlert 和

storeConfirmation 它将做什么是检索在上一个操作期间生成的 JavaScript 确认或警报对话框的消息。这个命令可以放在警报发生的位置

命令：storeAlert

目标：变量名

命令：storeConfirmation

目标：变量名

变量名是将发生的警报存储在其中的变量

谢谢..

# sql - SQL 案例不等式

> ID：14788120
> 
> 赞同：3
> 
> 时间：2013-02-09T12:24:09.417
> 
> 标签：sql, case, inequality

目前我正在使用

```
If @City > 0 then
    SELECT * FROM table1 Where Column1 < @City
ELSE
    SELECT * FROM table1 
```

如何在单个查询中达到相同的效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T12:28:02.003

您只需将条件放入查询中：

```
select *
  from table1
 where ( @city > 0
         and column1 < @city )
    or @city <= 0 
```

但请注意；这*可能*会稍微混淆优化器，这可能会降低您的第一个查询的性能。与实施前的所有测试一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:32:39.293

尝试这个：

```
select *
  from table1
 where column1 < @city
    or @city <= 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T00:35:54.820

另一种选择

```
SELECT * 
FROM table1 
WHERE Column1 < CASE WHEN @City > 0 
                     THEN @City 
                     ELSE Column1 + 1 END 
```

# javascript - node.js如何向手机号码发送验证码？（类似于 nodemailer，但用于 SMS）

> ID：14788125
> 
> 赞同：17
> 
> 时间：2013-02-09T12:24:41.507
> 
> 标签：javascript, node.js, sms-gateway

[我已经使用nodemailer](https://github.com/andris9/Nodemailer)为我的项目向用户发送了确认电子邮件。它工作正常。

现在我正在寻找从 node.js 向手机号码发送验证码，但我不知道该怎么做。

是否有任何模块可以将验证码发送到手机号码，例如 nodemailer 使用电子邮件地址？或者如果没有，我自己怎么能做到这一点？

我使用 node.js 和 mongodb、JavaScript 和 jQuery 开发我的项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T14:48:28.107

大多数运营商都提供了一个 SMS 网关，您可以向该网关发送电子邮件并使其以 SMS 的形式到达。如果您想要一种适用于当前 nodemailer 实现的免费 SMS 发送方式，这可能是您的最佳选择。否则，您可能想要搜索可以集成的付费 SMS 服务。

以下是 SMS 网关列表：[http ://en.wikipedia.org/wiki/List_of_SMS_gateways](http://en.wikipedia.org/wiki/List_of_SMS_gateways)

从链接的 Wikipedia 页面：例如，要发送到通常在美国表示为 987-555-0100 的号码，可以发送电子邮件至 9875550100@SMS-gateway。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-13T07:29:01.243

NodeJS 包[https://www.npmjs.com/package/springedge](https://www.npmjs.com/package/springedge)将很容易发送短信。您可以安装为

```
npm install springedge 
```

发送短信的代码示例：

```
// send sms 

var springedge = require('springedge');

var params = {
  'apikey': '', // API Key 
  'sender': 'SEDEMO', // Sender Name 
  'to': [
    '919019xxxxxxxx'  //Moblie Number 
  ],
  'message': 'test+message'
};

springedge.messages.send(params, 5000, function (err, response) {
  if (err) {
    return console.log(err);
  }
  console.log(response);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-18T11:16:11.713

为确保无论用户的位置和网络如何，您都可以通过移动设备访问用户，您可能需要查看付费服务，例如[Nexmo](https://www.nexmo.com)（我为之工作）或[Twilio](https://www.twilio.com)。

使用这些服务，您可以构建自己的验证（2FA - 双因素身份验证）工作流程：

1.  用户在表单中输入他们的电话号码并提交到您的应用程序
2.  您的应用收到电话号码
3.  您向用户发送带有验证码的短信
4.  用户收到授权码
5.  用户在表单中输入验证码并提交到您的应用程序
6.  您的应用会收到验证码并根据电话号码检查验证码（可能使用当前会话电话号码）
7.  如果身份验证代码是您所期望的，则验证用户

或者，您可以使用他们的 2FA 身份验证产品（Nexmo - [Verify](https://www.nexmo.com/products/verify)或 Twilio - [Authy](https://www.twilio.com/authy)，这将有助于简化此工作流程。

使用 Nexmo 验证代码将是：

### 发送验证请求

```
var Nexmo = require('nexmo');
var nexmo = new Nexmo({apiKey: API_KEY, apiSecret: API_SECRET});

var verifyRequestId = null; // use in the check process

nexmo.verify.request({number: TO_NUMBER, brand: APP_NAME}, function(err, result) {
  if(err) { console.error(err); }
  else {
    verifyRequestId = result. request_id;
  }
}); 
```

## 检查验证码

```
nexmo.verify.control({request_id: verifyRequestId, cmd: 'cancel'}, function(err, result) {
  if(err) { console.error(err); }
  else {
    console.log(result);
  }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-19T13:57:45.603

您可以使用[味精 91](https://www.npmjs.com/package/msg91)服务。它还提供OTP验证服务。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-04-04T04:51:42.970

对于测试，您应该使用此 API [https://www.fast2sms.com](https://www.fast2sms.com)但是您也可以将其用作业务。在运行以下代码之前，请确保您已生成有效的 API 授权密钥，并且您应该免费注册。

现在将接收者的手机号码用于批量消息，您也可以将其用作验证和 OTP 目的。

在您想要实现 SMS 系统的项目中安装 npm 模块。

```
npm install unirest 
```

GET方法的代码：

```
var unirest = require("unirest");

var req = unirest("GET", "https://www.fast2sms.com/dev/bulk");

req.query({
  "authorization": "YOUR_API_KEY",
  "sender_id": "FSTSMS",
  "message": "This is a test message",
  "language": "english",
  "route": "p",
  "numbers": "9999999999,8888888888,7777777777",
});

req.headers({
  "cache-control": "no-cache"
});

req.end(function (res) {
  if (res.error) throw new Error(res.error);

  console.log(res.body);
});
```

POST 方法的代码：

```
var unirest = require("unirest");

var req = unirest("POST", "https://www.fast2sms.com/dev/bulk");

req.headers({
  "authorization": "YOUR_API_KEY"
});

req.form({
  "sender_id": "FSTSMS",
  "message": "This is a test message",
  "language": "english",
  "route": "p",
  "numbers": "9999999999,8888888888,7777777777",
});

req.end(function (res) {
  if (res.error) throw new Error(res.error);

  console.log(res.body);
});
```

# ember.js - becomeValid 不会被触发

> ID：14788127
> 
> 赞同：0
> 
> 时间：2013-02-09T12:24:43.800
> 
> 标签：ember.js, ember-data

我想知道何时成功保存了 ember-data 中的记录，就像我可以成功知道它已变得无效一样，如下所示：

```
exercise.one 'becameInvalid', (result) ->
  WZ.Utils.generateErrorSummary.call(exercise) 
```

我原以为 becomeValid 的行为方式相同：

```
exercise.one 'becameValid', (result) ->
  WZ.Utils.notify 'Exercise created!' 
```

显然它不会，它不会以同样的方式被触发。

应该是吗？

# android - Base64 图像上传 VS 二进制图像上传？

> ID：14788130
> 
> 赞同：33
> 
> 时间：2013-02-09T12:25:33.693
> 
> 标签：android, ruby-on-rails, image, http, base64

我希望我的移动应用程序能够将图像上传到我的服务器，在我的情况下，它是带有**nginx的****Rails 3.2.11**。

 **我在客户端阅读了很多关于**Base64**编码然后在服务器端解码的信息。

为什么不在http 请求上使用带有**多部分标头的****二进制**上传？

 **每种技术都有哪些优点**/缺点？**

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-09T15:01:59.870

Base64 将您的数据转换为二进制数据的 ASCII 表示。它允许您将数据嵌入到文本流中，例如 JSON。Base64 将传输的数据大小增加了 33%。

`multipart/form-data`是在 HTTP 请求中传输二进制数据的标准方式。它允许您为要传输的每个部分使用特定的编码/内容类型。在我看来，除非您有特定要求或设备/SDK 功能，否则您应该坚持分段上传。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-14T00:36:11.893

“为什么不在 http 请求上使用带有多部分标头的二进制上传？” 确实为什么不；）

Base64 图像表示可以直接放在 html 中以呈现图像。

二进制占用更少的空间。并受益于更大的网络效应和标准化。例如，如果您想使用亚马逊简单安全存储 S3，您必须存储一个二进制文件。您不能存储需要键/值存储的字符串，例如 redis。****

# cocoa - 如何检测 NSString 的语言

> ID：14788131
> 
> 赞同：-1
> 
> 时间：2013-02-09T12:25:38.247
> 
> 标签：cocoa, nsstring, nlp

是否可以检测 NSString 中的语言文本。我需要知道文本是哪种语言，以便我以不同的方式显示它。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-09T12:28:10.150

你当然不能。

阅读[应用程序国际化指南](https://developer.apple.com/internationalization/)。

# c - 在控制台上尝试子类化

> ID：14788134
> 
> 赞同：0
> 
> 时间：2013-02-09T12:25:58.543
> 
> 标签：c, winapi

我想在控制台应用程序中捕获键盘消息，所以我尝试了这个：

```
HWND GetConsoleHwnd(void)
{
    #define SIZEBUF 1024
    char szBuffer[SIZEBUF];

    GetConsoleTitle(szBuffer, SIZEBUF);

    #undef SIZEBUF
    return FindWindow(NULL, szBuffer);
}

LRESULT CALLBACK ConsoleProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch (msg)
    {
        case WM_KEYDOWN:
            switch (wParam)
            {
               //VK Cases
            }
            break;
    }

    return CallWindowProc(OldConsoleProc, hwnd, msg, wParam, lParam);
} 
```

这主要是：

```
HWND hwndConsole = GetConsoleHwnd();
OldConsoleProc = (WNDPROC) SetWindowLong(hwndConsole, GWL_WNDPROC,
                               ConsoleProc); 
```

这个全局变量：`WNDPROC OldConsoleProc;`

但它不起作用，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:37:06.120

You can't subclass a window of another process this way. [You can do it with hooks](http://www.codeproject.com/Articles/5264/Cross-Process-Subclassing) but I wouldn't recommend trying this on console window. [`ReadConsoleInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684961%28v=vs.85%29.aspx) is low-level enough, and it's as far as you can get without ugly nonportable hacks (I'm not even sure there *are* some events reaching `WndProc` when the console window is full screen).

# ruby - 如何将由 javascript 生成的 html 下载为 pdf

> ID：14788135
> 
> 赞同：0
> 
> 时间：2013-02-09T12:26:04.630
> 
> 标签：ruby, google-chrome, printing, nokogiri, pdfkit

我想将 javascript 生成的 html 保存在网站上。

当我运行 javascript 时，它会返回准备好的 html，并带有一个链接到 chrome 打印机的按钮，以另存为 pdf。我想将这个生成的 html 保存为 PDF，但我做不到。

我花了几天时间尝试所有的东西，使用 Nokogiri Parsing 的 PDFKit，搜索 chrome 打印机 API 等，但没有成功。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:37:24.437

使用[phantomjs](http://phantomjs.org/)和[rasterize.js](https://github.com/ariya/phantomjs/blob/master/examples/rasterize.js)可以转换它。

然后只需运行命令

`phantomjs rasterize.js $URL_OR_PATH $PDF_OUT_FILENAME Letter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:49:42.260

根据您正在运行的 JavaScript，找出它调用的 URL，以及它添加到 GET/POST 请求中的任何变量，然后使用 OpenURI 或某种 HTTP 客户端来请求该文件。将其传递给 Nokogiri，并解析出文件的 URL。

另一种方法是使用 WATIR gem 之一来驱动浏览器，并以这种方式访问​​文件。然后您可以检索 HTML，或者让浏览器检索文件，并在完成后将其从磁盘中取出。

* * *

> 我不明白你提出的第二种解决方案，你能解释一下吗？

有时开发人员使用 Ajax 检索 HTML 并将其插入到页面中，或者使用 JavaScript 直接操作页面的 HTML。

您可以让 Watir 驱动的浏览器为您提供当前的 HTML，然后使用 Nokogiri 或其他 XML 解析器对其进行解析，以检索当时属于 HTML DOM 的内容。从那里您可以将其保存到磁盘并让 Watir 驱动的浏览器读取并渲染它。然后就是弄清楚如何让浏览器打印为 PDF，或者抓取屏幕快照将其转换为 PDF。

# php - 使用来自 Curl 响应的 json 数据

> ID：14788138
> 
> 赞同：0
> 
> 时间：2013-02-09T12:26:28.897
> 
> 标签：php, json, curl

嗨，我对 CURL 有点陌生，但我正在尝试请求一些 json 数据，然后解析结果。我在检索数据方面取得了成功，但我无法处理响应。这是代码

```
function bitBucketCurl($url)
{
global $bitPassword;
global $bitUsername;

$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_USERPWD, "$bitUsername:$bitPassword");
curl_setopt($ch, CURLOPT_HEADER, 0);

// grab URL and pass it to the browser
$commitinfo = curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch);

return $commitinfo;
 }

$json = bitBucketCurl($url); 
echo $json; // This seems to work in that, when I load the page, I can see the json data

//turn json data into an array - this is what does not seem to be working
$obj_a = json_decode($json, true);

print_r ($obj_a); //the result is simply a 1 rather than the array I would expect 
```

基本问题是 json 数据在我出现时出现，`echo $json`但是当我尝试将该数据转换为数组时它不起作用。当我打印数组时，我只得到一个'1'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:06:43.623

我通过添加以下行得到了所需的结果：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
```

# php - 括号内的单独字符串，括号数不同

> ID：14788144
> 
> 赞同：-2
> 
> 时间：2013-02-09T12:27:25.187
> 
> 标签：php, string, pattern-matching

这是我在这里的第一个问题，我搞砸了字符串。我有一些以下格式的字符串：

```
 I will be here (I may or may not be here) (30-Apr-2013) 
     I am still here (15-Feb-2013)
     I am still here(I may not be here) (I may not be here) (9-Apr-2013) 
```

我需要将日期与名称分开。如您所见，括号的数量可能会有所不同，但我只需要最后一个（字符串的其余部分将被视为名称）。

预期输出：

```
1\. array( 0=> 'I will be here (I may or may not be here)' , 1=> '30-Apr-2013' )
2\. array( 0=> 'I am still here' , 1=> '15-Feb-2013' )
3\. array( 0=> ' I am still here(I may not be here) (I may not be here)' , 1=> '9-Apr-2013' ) 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:32:15.710

您可以使用[`strrpos`](http://php.net/manual/en/function.strrpos.php)查找最后一次出现的`(`，然后您可以使用[`substr`](http://www.php.net/manual/en/function.substr.php)and[`trim`](http://php.net/manual/en/function.trim.php)获取子字符串并将它们修剪为您想要的结果。

* * *

例如

```
/**
 * Return an array with the "name" as the first element and
 * date as the second.
 */
function fun($string)
{
    $datePos = strrpos($string, '(');
    return array (
        trim(substr($string, 0, $datePos - 1)), trim(substr($string, $datePos), ' ()')
    );
} 
```

# php - 将变量传递给 Haversine 公式

> ID：14788164
> 
> 赞同：0
> 
> 时间：2013-02-09T12:29:28.257
> 
> 标签：php, mysql, api, maps

使用谷歌的这个查询：[链接](https://developers.google.com/maps/articles/phpsqlsearch_v3?hl=it#findnearsql)

我正在尝试创建位置搜索，返回设定距离内的所有城镇。我希望人们能够在表格中输入城镇，我的代码找到城镇名称的 lat + long，然后查询我的数据库以返回设定距离内的所有城镇。

首先，我找到输入位置的 lat + long：

```
 $location = 'farnborough';

    function getlatlang($location) {
    $geocode = file_get_contents('http://maps.google.com/maps/api/geocode/json?address='. urlencode($location) .'&sensor=false');  
    $output= json_decode($geocode);  
    return $output->results[0]->geometry->location; 
    }

    $objlocation = getlatlang($location);  
    $latitude = $objlocation->lat;  
    $longitude = $objlocation->lng; 
```

这很好用，我可以回显结果并且值是正确的。

然后使用上面链接中的查询，我尝试：

```
 $query = "SELECT town, ( 3959 * acos( cos( radians($latitude) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians($longitude) ) + sin( radians($latitude) ) * sin( radians( lat ) ) ) ) AS distance FROM uk_postcode_05 HAVING distance < 25 ORDER BY distance ASC LIMIT 0 , 5";
    $result = mysqli_query($mysqli, $query);
    if(!$result){echo('no result returned - query wrong');
    } 
```

但查询不起作用并且总是触发错误。我在这里做错了什么？

（我的表有列城镇，邮政编码，纬度，经度）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:44:40.380

问题可能是您使用的是 HAVING 而不是 WHERE，并且您在 HAVING 子句中使用了“距离”，即使它没有定义。试试这个：

```
SELECT town, ( 3959 * acos( cos( radians($latitude) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians($longitude) ) + sin( radians($latitude) ) * sin( radians( lat ) ) ) ) AS distance FROM uk_postcode_05 WHERE ( 3959 * acos( cos( radians($latitude) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians($longitude) ) + sin( radians($latitude) ) * sin( radians( lat ) ) ) ) < 25 ORDER BY distance ASC LIMIT 0 , 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:12:48.647

我在这里假设您已将表定义中的列名从 lat, lng 更改为 latitude, longitude。

在没有实际错误信息的情况下，这是最好的猜测：

```
SELECT
  town,
  (
    3959 * acos(
      cos(
        radians($latitude)
      ) * cos(
        radians(latitude)
      ) * cos(
        radians(longitude) - radians($longitude)
      ) + sin(
        radians($latitude)
      ) * sin(
        radians(latitude)
      )
    )
  ) AS distance
FROM
  uk_postcode_05
HAVING
  distance < 25
ORDER BY
  distance ASC
LIMIT
  0, 5 
```

这应该可以解决问题，因为在您的查询中`lat`并且`lng`未定义。

# highcharts - 更新基本柱高图

> ID：14788172
> 
> 赞同：2
> 
> 时间：2013-02-09T12:30:42.953
> 
> 标签：highcharts

我在更新基本柱高图表时遇到问题。

**从服务器返回的我的 json 数组是：**

**[{"name":"positive","data":[18,35,32,38]},{"name":"negative","data":[0,14,65,121]}]**

我只使用`"data"`数组 ^ 即`jsonArr[0].data`和`jsonArr[1].data`

我的数据设置正确，但是图表没有描述这些值。有任何想法吗？

这是我的javascript：

```
 $(document).ready(function() {

            var twitterChart;

            posArr = [];
            negArr = [];

            function renderGraph()
            { 
                $.getJSON("FrontController", function(jsonArr, statusTxt, xhr){

                    console.log("Data returned : " + data);*/

                    posArr = jsonArr[0].data;
                    negArr = jsonArr[1].data;

                    console.log("posArr: " + posArr);
                    console.log("negArr: " + negArr);

                    twitterChart.series[0].data = posArr;
                    twitterChart.series[1].data = negArr;

                });

                setTimeout(renderGraph, 3000)
            }

            twitterChart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container1',
                    type: 'column'
                },
                title: {
                    text: ''
                },
                subtitle: {
                    text: ':'
                },
                xAxis: {
                    categories: [
                        'Column 1',
                        'Column 2',
                        'Column 3',
                        'Column 4'
                    ]
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Testing"'
                    }
                },
                legend: {
                    layout: 'vertical',
                    backgroundColor: '#FFFFFF',
                    align: 'left',
                    verticalAlign: 'top',
                    x: 100,
                    y: 70,
                    floating: true,
                    shadow: true
                },
                tooltip: {
                    formatter: function() {
                        return ''+
                            this.x +': '+ this.y +' tweets';
                    }
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                        name: 'Positive',
                        data: posArr
                    }, {
                        name: 'Negative',
                        data: negArr
                    }]
            });

            renderGraph();

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:56:59.867

要更新系列数据，请使用 twitterChart.series[0].setData(array); 见：[http://api.highcharts.com/highcharts#Series.setData()](http://api.highcharts.com/highcharts#Series.setData())

# django - 基于类的视图 VS 基于函数的视图

> ID：14788181
> 
> 赞同：90
> 
> 时间：2013-02-09T12:33:04.677
> 
> 标签：django, django-views

在创建 django 应用程序时，我总是使用 FBV（基于函数的视图），因为它很容易处理。但大多数开发人员表示，如果使用 CBV 实现复杂的视图会很痛苦，最好使用 CBV（基于类的视图）并仅使用 FBV。

为什么？使用 CBV 的优势是什么？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-02-09T14:31:47.537

唯一最显着的优势是继承。在一个大型项目中，您可能会有很多类似的视图。无需一次又一次地编写相同的代码，您可以简单地让您的视图从基本视图继承。

django 还附带了一组通用视图类，可用于执行一些最常见的任务。例如，DetailView 类用于从您的一个模型传递单个对象，使用模板渲染它并返回 http 响应。您可以将其直接插入您的 url conf ..

```
url(r'^author/(?P<pk>\d+)/$', DetailView.as_view(model=Author)), 
```

或者您可以使用自定义功能对其进行扩展

```
class SpecialDetailView(DetailView):
    model = Author
    def get_context_data(self, *args, **kwargs):
        context = super(SpecialDetailView, self).get_context_data(*args, **kwargs)
        context['books'] = Book.objects.filter(popular=True)
        return context 
```

现在您的模板将被传递一组用于渲染的书籍对象。

一个很好的起点是阅读[文档](https://docs.djangoproject.com/en/4.0/topics/class-based-views/)（Django 4.0+）。

**更新**

[ccbv.co.uk](http://ccbv.co.uk)拥有全面且易于使用的关于您已经可用的基于类的视图的信息。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-07-08T16:22:44.483

当我开始使用 DJango 时，我从未使用过 CBV，因为它们的学习曲线和结构有点复杂。快进两年多，我只在少数地方使用 FBV。我确信代码将非常简单并且将保持简单。

CBV 和随之而来的多重继承的主要好处是我可以完全避免编写信号、辅助方法和复制粘贴代码。尤其是在应用程序所做的远远超过基本 CRUD 操作的情况下。具有多重继承的视图比带有信号和辅助方法的代码更容易调试，尤其是在它是未知代码库的情况下。

除了多继承 CBV 之外，还提供了不同的方法来执行分派、检索模板、处理不同的请求类型、传递模板上下文变量、验证表单等等。这些使代码模块化，因此可维护。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-06-02T19:43:03.633

**两勺的一些话**

**提示替代方法 - 使用 FBV**

一些开发人员宁愿错误地将 FBV 用于大多数视图，而将 CBV 仅用于需要子类化的视图。这个策略也不错。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2019-06-20T05:07:51.333

一些视图最好作为 CBV 来实现，而另一些视图最好作为 FBV 来实现。

如果您不确定选择哪种方法，请参阅下表：

[![enter image description here](../Images/1dadf1d802b7690a605724a1481deb4a.png)](https://i.stack.imgur.com/Rzjxx.png)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-04-19T09:20:17.927

如果您想在 Django 应用程序中实现功能齐全的**CRUD 操作**，则基于类的视图非常好，并且使用基于函数的视图实现同样需要很少的时间和精力。

当您不打算在您的站点/应用程序上实现任何**CRUD**时，我会建议您使用基于函数的视图，这意味着您的意图是简单地呈现模板。

我使用基于类的实时视图创建了一个简单的基于**CRUD的应用程序。**访问[http://filtron.pythonanywhere.com/view/](http://filtron.pythonanywhere.com/view/)（现在将/不会工作）并享受。然后你就会知道它的重要性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-02T19:00:44.403

在我看不到扩展视图的真正机会的大多数情况下，我一直在使用 FBV。如文档中所述[，](https://docs.djangoproject.com/en/3.2/topics/class-based-views/intro/)如果以下两个特征适合我的用例，我会考虑选择 CBV。

> *   与特定 HTTP 方法（GET、POST 等）相关的代码组织可以通过单独的方法而不是条件分支来解决。
> *   Object oriented techniques such as mixins (multiple inheritance) can be used to factor code into reusable components.

# android - 不幸的是，应用程序已停止 android

> ID：14788182
> 
> 赞同：3
> 
> 时间：2013-02-09T12:33:11.910
> 
> 标签：android

我的应用程序在 android 版本 2.3.7 上运行良好，但是当我在 android 4.2 上运行它时，它说不幸的是应用程序已停止

这是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"

    package="com.radaee.reader"

    android:versionCode="1"

    android:versionName="1.1" >

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <supports-screens android:largeScreens="true" android:anyDensity="true" android:normalScreens="true" android:smallScreens="true" android:resizeable="true" />
    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <activity
            android:name=".SplashScreen"
            android:configChanges="orientation"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".StartApp">
             <intent-filter>
                <action android:name="com.radaee.reader.StartApp" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
      </activity>
    </application>

<uses-sdk android:targetSdkVersion="17" android:minSdkVersion="4" android:maxSdkVersion="17"/>
</manifest> 
```

日志猫：

```
?:??: W/?(?):   at java.lang.Thread.run(Thread.java:856)
?:??: W/?(?): [ 02-09 13:42:08.241   609:  609 E/StrictMode ]
?:??: W/?(?): null
?:??: W/?(?): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cd52a8 that was originally bound here
?:??: W/?(?):   at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
?:??: W/?(?):   at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
?:??: W/?(?):   at android.app.ContextImpl.bindService(ContextImpl.java:1418)
?:??: W/?(?):   at android.app.ContextImpl.bindService(ContextImpl.java:1407)
?:??: W/?(?):   at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
?:??: W/?(?):   at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
?:??: W/?(?):   at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
?:??: W/?(?):   at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
?:??: W/?(?):   at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
?:??: W/?(?):   at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
?:??: W/?(?):   at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
?:??: W/?(?):   at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
?:??: W/?(?):   at android.os.AsyncTask$2.call(AsyncTask.java:287)
?:??: W/?(?):   at java.util.concurrent.FutureTask.run(FutureTask.java:234)
?:??: W/?(?):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
?:??: W/?(?):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
?:??: W/?(?):   at java.lang.Thread.run(Thread.java:856)
?:??: W/?(?): [ 02-09 13:42:08.241   290:  501 W/ActivityManager ]
?:??: W/?(?): Unbind failed: could not find connection for android.os.BinderProxy@415d29b8
?:??: W/?(?): [ 02-09 13:42:21.891   392:  392 W/Trace    ]
?:??: W/?(?): Unexpected value from nativeGetEnabledTags: 0
?:??: W/?(?): [ 02-09 13:42:21.911   392:  392 W/Trace    ]
?:??: W/?(?): Unexpected value from nativeGetEnabledTags: 0 
```

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-09T12:36:51.633

在 manifest.xml 中像这样更改您的活动名称并尝试

```
android:name=".SplashScreen" 
```

改成

```
 android:name="com.radaee.reader.SplashScreen" 
```

# ember.js - 如何为车把模板中的元素提供自定义 ID？

> ID：14788183
> 
> 赞同：0
> 
> 时间：2013-02-09T12:33:16.747
> 
> 标签：ember.js, handlebars.js

我正在使用 ember 和 handlebars 作为模板，我有一个案例需要为使用循环创建的元素提供自定义 ID。就像是：

```
{{#each item in list}}
    <li {{bindAttr id="item.id"+item.name}}>item.text</li>
{{/each}} 
```

我希望我的 id 是字符串 id 和 name 的总和。例如，如果

```
id = 3 and name = summary 
```

那么它应该呈现为

```
<li id="3summary">Summary</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:54:37.897

您不能像这样在 Handlebars 中连接，相反，您需要创建一个 Handlebars 助手来执行此操作，或者在以下位置[创建一个计算属性](http://emberjs.com/guides/object-model/computed-properties/)`Ember.Object`：

```
App.MyModel = Ember.Object.extend({
    idName: function() {
        return '%@%@'.fmt(this.get('id'), this.get('name').toLowerCase());
    }.property('id', 'name')
}); 
```

请参阅 JSFiddle 以获取工作示例：http: [//jsfiddle.net/u4th3/](http://jsfiddle.net/u4th3/)

# java - 无法在java中重绘

> ID：14788184
> 
> 赞同：0
> 
> 时间：2013-02-09T12:33:24.383
> 
> 标签：java, swing, jframe, repaint

我无法在 Jframe 中动态地重新绘制（）。

```
public static BufferedImage createBufferedImage(BufferedImage image) 
{
    ColorModel cm = image.getColorModel();
    boolean premultiplied = cm.isAlphaPremultiplied();
    WritableRaster raster = image.copyData(image.getRaster());
    return new BufferedImage(cm, raster, premultiplied, null);
}

public static void main(String[] args) {

BufferedImage img = new BufferedImage(old_width_i, old_height_i, BufferedImage.TYPE_INT_RGB);

img=createBufferedImage(img_white_screen);

JFrame frame=new JFrame();
JLabel label = new JLabel(new ImageIcon(img));
frame.getContentPane().add(label, BorderLayout.WEST);
frame.pack();
frame.setVisible(true); 
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

try {
    Thread.sleep(1000);
} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

img.flush();
img=createBufferedImage(img_black_screen);
//  frame.removeAll();
//  frame.revalidate();
//  label.removeAll();
//  label = new JLabel(new ImageIcon(img));
//  frame.getContentPane().add(label, BorderLayout.WEST);

frame.repaint();
} 
```

基本上，它创建一个屏幕，第一个分配给“img”（即 img_white_screen）变量，并且不会更改为第二个分配，即 img_black_screen

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T13:30:28.633

*   [不要使用 Thread.sleep(1000);](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) ，此[代码行锁定事件调度线程](https://stackoverflow.com/a/7944388/714968)，

*   不知道为什么需要暂停代码执行一秒钟，请[改用 Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

*   用于在 Java 中显示要使用的图像

    1.  [XxxImage 作为图标 /IconImage](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)到[JLabel](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)

    2.  [`paintComponent() for JComponent or JPanel`](http://docs.oracle.com/javase/tutorial/2d/images/index.html)

*   不要油漆`XxxImage`或`Icon / ImageIcon`直接对`JFrame`, 使用`JPanel / JComponent`或`JLabel`

# r - 使用长格式数据计算基线的变化

> ID：14788187
> 
> 赞同：2
> 
> 时间：2013-02-09T12:33:43.773
> 
> 标签：r

这是我的数据的一个可重复的小示例：

```
> mydata <- structure(list(subject = c(1, 1, 1, 2, 2, 2), time = c(0, 1, 2, 0, 1, 2), measure = c(10, 12, 8, 7, 0, 0)), .Names = c("subject", "time", "measure"), row.names = c(NA, -6L), class = "data.frame")

> mydata

subject  time  measure
1          0      10
1          1      12
1          2       8
2          0       7
2          1       0
2          2       0 
```

我想生成一个新变量，即“从基线变化”。也就是说，我想

```
subject  time  measure  change
1          0      10      0
1          1      12      2
1          2       8     -2
2          0       7      0
2          1       0     -7
2          2       0     -7 
```

有没有一种简单的方法可以做到这一点，除了以编程方式循环遍历所有记录或首先重塑为宽格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T12:52:11.207

有很多可能性。我最喜爱的：

```
library(plyr)
ddply(mydata,.(subject),transform,change=measure-measure[1])

  subject time measure change
1       1    0      10      0
2       1    1      12      2
3       1    2       8     -2
4       2    0       7      0
5       2    1       0     -7
6       2    2       0     -7

library(data.table)
myDT <- as.data.table(mydata)
myDT[,change:=measure-measure[1],by=subject]
print(myDT)

   subject time measure change
1:       1    0      10      0
2:       1    1      12      2
3:       1    2       8     -2
4:       2    0       7      0
5:       2    1       0     -7
6:       2    2       0     -7 
```

如果您的数据集很大，data.table 更可取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T12:42:51.380

关于什么：

```
mydata$change <- do.call("c", with(mydata, lapply(split(measure, subject), function(x) x - x[1]))) 
```

或者，您也可以使用以下`ave`功能：

```
with(mydata, ave(measure, subject, FUN=function(x) x - x[1]))
# [1]  0  2 -2  0 -7 -7 
```

或者

```
within(mydata, change <- ave(measure, subject, FUN=function(x) x - x[1]))
#   subject time measure change
# 1       1    0      10      0
# 2       1    1      12      2
# 3       1    2       8     -2
# 4       2    0       7      0
# 5       2    1       0     -7
# 6       2    2       0     -7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T13:38:50.697

你可以使用tapply：

```
mydata$change<-as.vector(unlist(tapply(mydata$measure,mydata$subject,FUN=function(x){return (x-rep(x[1],length(x)))}))); 
```

# php - 一个特定的删除子句不起作用

> ID：14788188
> 
> 赞同：-3
> 
> 时间：2013-02-09T12:33:49.920
> 
> 标签：php, sql

此删除子句不适用于我的 PHP 脚本，但我的其他删除子句有效。当我什至使用 phpMyAdmin 运行查询时，它就可以工作。我看不到任何语法错误；怎么了？

```
$sql = mysql_query("delete from tbl_albums where album_id = '6'");
if($sql)
{
    system('/bin/rm -rf ' . escapeshellarg("../assets/images/gallery/".$id));
}
else
{
    echo '<script>alert("Failed to delete album");</script>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:53:33.527

您用于执行查询的函数已弃用，建议您在继续之前阅读并了解在现代 PHP 中使用 SQL 的最佳实践。但是，如果您要使用`mysql_`函数系列，您应该知道在发生错误后，[`mysql_query`](http://php.net/manual/en/function.mysql-query.php)returns`false`和 call[`mysql_error`](http://www.php.net/manual/en/function.mysql-error.php)会将数据库返回的错误作为文本提供给您，然后您可以记录或打印该错误。这样做很可能会让您轻松解决问题。

最可能的解释：表不存在，列不存在，您通过删除行违反了约束，或者在删除后触发了触发器，导致其他错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:54:40.717

你需要使用这个：

```
$sql = mysql_query("delete from tbl_albums where album_id = '6'");
if($sql)
{
    system('/bin/rm -rf ' . escapeshellarg("../assets/images/gallery/".$id));
}
else
{
    echo mysql_error();
} 
```

并且根据错误，您需要修改您的 SQL 脚本。最有可能的问题是由于列名错误或其他原因。您需要在这里说出错误是什么，以便我们可以尝试解决问题。

# c - 管道调用和同步

> ID：14788194
> 
> 赞同：5
> 
> 时间：2013-02-09T12:34:34.597
> 
> 标签：c, unix, pipe, sync

我正在用这段代码试验一些问题：

```
#include <stdio.h>
#include <stdlib.h>

#define SIZE 30
#define Error_(x) { perror(x); exit(1); }
int main(int argc, char *argv[]) {

    char message[SIZE];
    int pid, status, ret, fd[2];

    ret = pipe(fd);
    if(ret == -1) Error_("Pipe creation");

    if((pid = fork()) == -1) Error_("Fork error");

    if(pid == 0){ //child process: reader (child wants to receive data from the parent)
        close(fd[1]); //reader closes unused ch.
        while( read(fd[0], message, SIZE) > 0 )
                printf("Message: %s", message);
        close(fd[0]);
    }
    else{//parent: writer (reads from STDIN, sends data to the child)
        close(fd[0]);
        puts("Tipe some text ('quit to exit')");
        do{
            fgets(message, SIZE, stdin);
            write(fd[1], message, SIZE);
        }while(strcmp(message, "quit\n") != 0);
        close(fd[1]);
        wait(&status);
    }
} 
```

代码工作正常，但我无法解释为什么！父进程和子进程之间没有明确的同步。如果子进程在父进程之前执行，read 必须返回 0 并且进程结束，但由于某种原因它等待父进程执行。你怎么解释这个？也许我错过了一些东西。

（已编辑）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T12:42:24.673

由于您没有使用`O_NONBLOCK`in `pipe2`，`read`默认情况下是阻塞的。因此它一直等到数据写入管道。

# templates - 在 Wordpress 中添加模板选择和图像上传到自定义帖子

> ID：14788201
> 
> 赞同：2
> 
> 时间：2013-02-09T12:35:33.000
> 
> 标签：templates, wordpress-theming, image-uploading, custom-post-type, wordpress

我对推进我想在 Wordpress 中实现的目标的最佳方式感到有些困惑。我的问题部分是我认为的工作流程，并且知道做我想做的事情的正确方法，但在如何实际实现我需要做的一些事情上可能存在一些空白。我检查了各种在线资源，但它们都特定于他们正在做的事情，我无法轻易理解它们以将它们应用到我自己的项目的上下文中，这就是我想在这里问的原因。我确信我最初的问题将不可避免地扩展到子问题，但我们开始吧：

对于我的网站，我创建了一个名为“项目”的自定义帖子类型。我已经成功设置了这个。

然后对于每个项目，我需要允许输入以下数据：

项目名称 项目描述

还要发布将在每个项目页面上显示为列表的元数据（我需要在页面上同时显示键和值，但仅限于那些包含数据的字段'即我不希望列表显示为位置： 空白的'）：

客户名称： 地点： 项目价值： 建筑师： 工程师： 场地面积：

我的主要问题是，我需要显示每个项目的图像并允许用户为每个项目帖子选择一个“模板”，这是因为图像布局大约有 5 个网格设计（1 个主图像，1 个正方形图像右侧有两个小图像，3 个纵向图像列等）。

我认为正确的方法是创建一个名为项目的自定义帖子类型，添加写入面板以允许轻松输入数据（我尚未添加图像上传，因为这需要根据所选模板和所需图像数量而有所不同)，在数据输入阶段，用户选择首选的图像布局/模板，然后为允许图像的容器上传图像（我需要为每个图像上传标识以使用 CSS 将其定位在模板中，这是计划）。

首先，我是否正确地接近这个？其次，我如何向我创建的写入面板添加功能以允许用户a）选择一个“模板”（有点像你可以使用页面但我的自定义帖子类型）和b）添加更改的图像上传字段取决于选择的模板？

最后，我想远离使用插件，并尝试通过functions.php等自己实现。这是为了避免以后插件更新或失去支持等问题。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T06:37:10.683

关于 Wordpress，这类问题似乎出现了很多（前几天我基本上回答了同样的问题）。我知道您想避免使用插件，但这听起来像是[Advanced Custom Fields](http://www.advancedcustomfields.com/)的工作。

您可以准确创建自定义帖子类型所需的字段（包括图像上传字段），然后将它们添加到与您的自定义帖子类型对应的模板中。

ACF 确实有一个“[精简模式](http://www.advancedcustomfields.com/resources/getting-started/including-lite-mode-in-a-plugin-theme/)”，可以直接包含在主题中。这样您就不必担心更新 nuking 网站功能。相信我，您会通过这种方式为自己节省大量时间和精力。

尝试用纯 WP 来做是令人钦佩的，但它是一个成熟的平台，它只是不适合这种定制。

# php - mysql查询在不应该返回true时返回

> ID：14788203
> 
> 赞同：-1
> 
> 时间：2013-02-09T12:35:48.360
> 
> 标签：php, mysql

`$key`如果不是`key_code`数据库列中的值，这不会像我预期的那样死。相反，它只是继续。我可能错过了一些非常简单的东西。

```
$key = $_GET['k'];

$keycheck = mysql_query("SELECT * FROM ib_dist WHERE key_code = '$key'");

if (!$keycheck) {

   die("A database error has occured.");

} else { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:38:45.150

`mysql_query`返回资源或`false`根据**查询是否成功执行**。它不以任何方式表示返回了多少行或查询是否做了任何事情，只表示它是否成功执行。

检查返回的结果数量或单独评估返回的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:40:31.983

尝试检查找到的行数。

```
$key = $_GET['k'];

$result = mysql_query("SELECT * FROM ib_dist WHERE key_code = '$key'");

if (!$result) {

   die("A database error has occured.");

} else if (0 == mysql_num_rows($result)) {
    // unknown key action
} else {
    // known key action
} 
```

# android - 我有兴趣开发一个 android 应用程序，以帮助确保其他应用程序尊重在安装过程中授予它们的权限

> ID：14788205
> 
> 赞同：-2
> 
> 时间：2013-02-09T12:35:53.423
> 
> 标签：android

我的问题：android 操作系统是否具有内置功能来检查应用程序的权限并将其限制为在安装时显示给用户的列表，还是由应用程序的开发人员来尊重这些权限？如果后者是真的，是否有可能开发一个应用程序来监控其他应用程序的活动，以确保它们遵守赋予它们的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:47:17.123

> android 操作系统是否具有内置功能来检查应用程序的权限并将其限制为安装时显示给用户的列表

是的。

# javascript - 隐藏然后通过jquery显示一些东西

> ID：14788207
> 
> 赞同：-2
> 
> 时间：2013-02-09T12:36:03.507
> 
> 标签：javascript, jquery, html

一般来说，我对 Jquery 和 Javascript 还很陌生，我想知道，隐藏某些内容后如何更改按钮上的文本。

据我所知，你通过这段代码隐藏了一些东西：

```
$("element").click(function() {
    $("element2").hide("slow");
}); 
```

并展示一些东西：

```
$("element").click(function() {
    $("element2").fadeIn("slow");
}); 
```

所以我想做的是有一个文章类型的东西，当按下“隐藏”按钮时，它会隐藏所有段落文本，但留下另一个按钮说“显示”

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:44:19.677

您只需要一个按钮并更改其文本。让我们假设所有内容从一开始都是可见的。在您的 HTML 中添加一个按钮并为其指定一个 ID，以便您轻松识别它：

```
<button id="toggleButton" type="button">Hide</button> 
```

然后将事件处理程序绑定到按钮

*   切换要显示/隐藏的元素的可见性和
*   更改按钮的文本内容

这里是：

```
$('#toggleButton').click(function() {
    // toggle visibility if all p elements
    $('p').toggle();

    // Change text based on current text
    // If the current text is 'Hide' then we just hid the elements and
    // we have to change the text to 'Show' (and vice versa).
    $(this).text(function(i, current_text) {
        return current_text === 'Hide' ? 'Show' : 'Hide';
    });
}); 
```

[**演示**](http://jsfiddle.net/HpH7A/)

**参考：** [`.click`](http://api.jquery.com/click/) , [`.toggle`](http://api.jquery.com/toggle/), [`.text`](http://api.jquery.com/text/),[条件运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)。

* * *

您必须调整选择器以仅匹配您真正想要隐藏的元素，但 jQuery 有[关于所有可能选择器的优秀文档](http://api.jquery.com/category/selectors/)。

jQuery 的文档非常广泛，花一些时间阅读是值得的。

由于您刚刚开始，我建议您阅读[http://eloquentjavascript.net/](http://eloquentjavascript.net/)和/或[MDN JavaScript 指南](https://developer.mozilla.org/en-US/docs/JavaScript/Guide)，以及[jQuery 教程](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)（按此顺序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:41:13.267

隐藏：

```
$("element").click(function() {
    $("element2").hide("slow");
    $("element").text('Show');
}); 
```

显示：

```
$("element").click(function() {
        $("element2").fadeIn("slow");
        $("element").text('Hide');
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T12:43:43.813

更改按钮值，例如

```
 $("element").click(function() {
    $("element2").hide("slow");
    $("#btnID").prop('value', 'Show');
    }); 

    $("element").click(function() {
        $("element2").fadeIn("slow");
    $("#btnID").prop('value', 'Hide');
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T12:44:49.050

我通常有两个按钮，一个带有文本显示，另一个带有隐藏文本，然后当您单击其中一个按钮时，会显示一个并制作所有必要的东西并将其隐藏起来。

HTML：

```
<a href="#" id="bshow" style="display:block"> Show </a>
<a href="#" id="bhide" style="display:none"> Hide </a>
<p id="textshow"  style="display:none"> lorem ipsum</p> 
```

Javascript：

```
$('#bshow').click(function() {
    $('#bhide').fadeIn();
    $('#textshow').fadeIn();
    $(this).hide();
}); 
```

我认为这个[jsFiddle](http://jsfiddle.net/2CK8r/)可以帮助你：

# android - 如何在合并的自定义 android 视图上维护布局属性？

> ID：14788211
> 
> 赞同：7
> 
> 时间：2013-02-09T12:36:39.460
> 
> 标签：android, android-layout, android-view, android-xml

我正在尝试用应该完全相同的自定义复合视图替换一组视图。具体来说，我经常重复以下布局：

```
<LinearLayout style="@style/customLayoutStyle">
  <Button style="@style/customButtonStyle" />
  <TextView style="@style/customTextViewStyle" />
</LinearLayout> 
```

我的目标是用一个`<Highlighter />`.

为此，我在 res/layout/highlighter.xml 中定义了类似

```
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/customLayoutStyle">
    <Button android:id="@+id/btnHighlighter" style="@style/customButtonStyle" />
    <TextView android:id="@+id/lblHighlighter" style="@style/customTextViewStyle" />    
</merge> 
```

在我的自定义视图中，我有类似的东西

```
public class Highlighter extends LinearLayout {
    public Highlighter(Context context, AttributeSet attrs) {
        super(context, attrs);
        inflate(context, R.layout.highlighter, this);
    }
} 
```

这主要是有效的，但似乎`<merge>`标签的一些布局参数被忽略了。此[屏幕截图](https://www.dropbox.com/s/snc5nrixxmn4igs/2013-02-09%2012.20.24.png "截屏")说明了似乎有问题的地方。底行的 3 个图像正确对齐，使用 3 倍我尝试替换的 LinearLayout 块。只有左上角的图像使用自定义视图。我的猜测是 padding 和 layout_weight 的布局参数丢失了。我做错了什么，还是需要解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T17:32:47.683

您对丢失的参数是正确的。要解决此问题，您可以将 Highlighter 的样式定义放在定义 Highlighter 的布局中。

例如

```
<yournamespace.Highlighter 
    style="@style/customLayoutStyle"
/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-08T14:33:42.933

多年后，这在 Android 上仍然很复杂，但可以做到。

您可以在自定义视图中使用样式属性，然后在主题中设置样式。

不要将样式设置为`res/layout/highlighter.xml`：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android">
    <Button android:id="@+id/btnHighlighter" style="@style/customButtonStyle" />
    <TextView android:id="@+id/lblHighlighter" style="@style/customTextViewStyle" />    
</merge> 
```

然后在您的自定义视图中：

```
public class Highlighter extends LinearLayout {
    public Highlighter(Context context, AttributeSet attrs) {
        // The third constructor parameter is you friend
        super(context, attrs, R.attr.highlighterStyle);
        inflate(context, R.layout.highlighter, this);
    }
} 
```

在 中定义属性`values/attrs_highlighter_view.xml`：

```
<resources>
    <attr name="highlighterStyle" format="reference" />
</resources> 
```

现在您可以在主题中设置样式

```
<style name="YourAppTheme" parent="Theme.AppCompat">
    <item name="preferenceViewStyle">@style/customLayoutStyle</item>
</style> 
```

这样，每当您使用`Highlighter`.

然后，您的自定义视图的使用就像您想要的那样：

```
<com.your.app.Highlighter
    android:id="@+id/highlighter"
    ... /> 
```

我还没有验证这是否适用于`layout_weight`，但它确实适用于`padding`等`background`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-20T14:34:54.107

详细说明[muscardinus 的答案](https://stackoverflow.com/a/61103253)，从 API 21 (Lollipop) 开始，`View`接受 a`defStyleRes`作为第四个构造函数参数，因此您可以跳过该`attr`部分并执行以下操作：

在styles.xml

```
<style name="CustomView">
    // Define your style here
</style> 
```

自定义视图.kt

```
class CustomView @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null,
    defStyleAttr: Int = 0,
) : LinearLayout(context, attrs, defStyleAttr, R.style.CustomView) {

    ...

} 
```

请注意，您至少需要这样做`minSdkVersion 21`。

# c# - 查找 C# 语法的名称

> ID：14788214
> 
> 赞同：1
> 
> 时间：2013-02-09T12:36:54.397
> 
> 标签：c#, syntax

我已经离开 C# 一段时间了，现在我正在尝试阅读一些代码，我很难找到它的含义：

```
var server = new WebSocketServer("ws://localhost:8181");
server.Start(socket =>
{
    socket.OnOpen = () =>
    {
        Console.WriteLine("Open!");
        allSockets.Add(socket);
    };
    socket.OnClose = () =>
    {
        Console.WriteLine("Close!");
        allSockets.Remove(socket);
    };
    socket.OnMessage = message =>
    {
        Console.WriteLine(message);
        allSockets.ToList().ForEach(s => s.Send("Echo: " + message));
    };
}); 
```

语法的名称是什么`socket => { .. }`，我在哪里可以找到一些文字？它是在哪个版本的 C# 中引入的？是`= () => { .. }`一样的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T12:39:56.173

It is a lambda expression, basically it is a shortcut for defining delegates, which are anonimous methods. It was introduced in C# 3 along with LINQ to make its use much simpler. Syntax is as follow:

```
parameters => body 
```

Usually the compiler can infer in some way the type of the parameter, that's why you see only the names of the parameters.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:39:14.410

in c# this syntax is called Lambda Expressions. They are available since C# 3.0

more about:

Microsoft's Programming Guide [explaining lambda expression](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

[C# Lambda expressions: Why should I use them?](https://stackoverflow.com/questions/167343/c-sharp-lambda-expression-why-should-i-use-this)

and an [example](http://www.programmersheaven.com/2/CSharp3-2) of programmersheaven.com

# c# - Saving a file in a specified folder inside my project

> ID：14788217
> 
> 赞同：6
> 
> 时间：2013-02-09T12:37:04.377
> 
> 标签：c#, file-io

I am creating an Xml file and I want to save it in a specified folder inside my project within the solution where I can access it in the Solution Explorer.

How can I specify the path so that a folder is created and the xml file saved inside it?

As it is at the moment it creates the file in the root directory of my project and I cannot view it in Solution Explorer.

```
 XmlSerializer serializer = new XmlSerializer(typeof(BoxSet));
 TextWriter textWriter = new StreamWriter("../../Box.xml"); 
```

Sorry, still a newbie...am I missing something.?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-09T12:56:10.903

您可以在声明新的 StreamWriter 时指定路径。

```
TextWriter textWriter = new StreamWriter("../../Box.xml"); 
```

这归结为：

*   ../ - 上一个目录
*   ../ - 上一个目录
*   Box.xml 文件在这里

因此，当您希望在根文件夹内的文件夹中创建文件时，您可以使用：

*   “../文件夹**名称/Box.xml** ”

但是，如果您不想依赖当前文件位置，也可以使用：

```
AppDomain.CurrentDomain.BaseDirectory 
```

这将使：

```
var path = String.Format("{0}foldername\Box.xml", AppDomain.CurrentDomain.BaseDirectory);
TextWriter textWriter = new StreamWriter(path); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-31T15:11:32.157

而不是使用`AppDomain.CurrentDomain.BaseDirectory`你可以这样做：

```
 TextWriter textWriter = new StreamWriter("foldername\\Box.xml"); 
```

当您不添加任何内容时，将自动假定基本目录。

# c# - 在单声道（mac）中编译 C# Visual Studio 控制台应用程序

> ID：14788223
> 
> 赞同：1
> 
> 时间：2013-02-09T12:37:51.683
> 
> 标签：c#, macos, mono

我对单声道和 C# 很陌生，所以这可能是一个简单的问题，但我找不到答案。我需要在我的 Mac 上编译一个 C# Visual Studio 控制台应用程序。我认为单声道适合这个目的。我不知道要编译哪个文件并使用 program.cs（我的主要功能在哪里）或者我应该编译 Project.csproj。当我跑步时

```
gmcs Program.cs 
```

我明白了

```
Program.cs(17,16): error CS0246: The type or namespace name `Oplossing' could not be found. Are you missing an assembly reference?
Program.cs(129,54): error CS0246: The type or namespace name `Order' could not be found. Are    you missing an assembly reference? 
```

我应该如何编译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T13:34:18.567

通过xbuild，应该可以直接编译csproj，

[http://www.mono-project.com/Microsoft.Build](http://www.mono-project.com/Microsoft.Build)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:40:31.250

除非你在一个没有 ui 的系统上工作，（因为你的目标是 macos，你有一个 ui）下载并安装 Monodevelop 并用它打开 Visual Studio 项目。

否则请查看 (g) mcs 文档 使用它的方式已经在此处的评论中

注意：您不必在 MacOs 上重新编译您的应用程序即可在 MacOS 上运行它，只需将 exe（程序集）复制到您的 mac 并使用 mono 执行它

# java - Using the Eclipse code formatter from own program

> ID：14788225
> 
> 赞同：10
> 
> 时间：2013-02-09T12:38:44.003
> 
> 标签：java, eclipse, freemarker, code-formatting

Recently I wrote some tools that help me generate Java code for what would otherwise be long and tedious tasks. I use freemarker to write up templates. However, all whitespace in the templates is preserved in the output, resulting in quite messy code. I could remove indentation from my templates to fix this, but that makes my templates rather unmaintainable.

Consider this simple example template:

```
public class MyTestClass
{
    <#list properties as p>
        private String ${p.name};
    </#list>
} 
```

My template is nicely formatted, but my code comes out as this:

```
public class MyTestClass
{
        private String prop1;
        private String prop2;
        private String prop3;
} 
```

Indentation is a bit too much, it should be:

```
public class MyTestClass
{
    private String prop1;
    private String prop2;
    private String prop3;
} 
```

To accomplish this, I have to remove indentation from my template like this:

```
public class MyTestClass
{
    <#list properties as p>
    private String ${p.name};
    </#list>
} 
```

For this simple case it is not really a problem to remove indentation from my template, but you could imagine complex templates to become quite unreadable.

On the one side I really want my code to be nicely formatted, but on the other side I'd like my templates to be nicely formatted as well. I use Eclipse as IDE, with is built-in formatter fully customized to my (and my team's) wishes. It would be great if I could somehow generate code from freemarker templates and as a post processing step format its output with Eclipse's formatter.

I can of course run the formatter manually after generating my code, but I really want to automate this process.

So, long story short, does anyone know how I can use Eclipse's code formatter within my own Java code?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T13:22:49.647

如果你想从你自己的 java 代码中使用 Eclipse 格式化程序，我建议你看看[maven java formatter plugin](http://maven-java-formatter-plugin.googlecode.com/svn/site/0.3.1/usage.html)。

它是一个 maven 插件，可用于根据 Eclipse 代码格式化设置文件对源代码进行格式化。

如果您不想使用 maven 但想将格式化代码嵌入到您自己的代码中，请查看[FormatterMojo](http://maven-java-formatter-plugin.googlecode.com/svn/tags/0.3.1/src/main/java/com/relativitas/maven/plugins/formatter/FormatterMojo.java)。它包含启动 Eclipse Code Formatter 的代码（使用 Eclipse 库）

这一切都是免费和开源的。

# ios - Ensuring the codes in different sections run in the background queue in iOS

> ID：14788229
> 
> 赞同：0
> 
> 时间：2013-02-09T12:39:41.380
> 
> 标签：ios, objective-c, multithreading, grand-central-dispatch

I am new to multithreading in iOS. I need to do three things: get information from the api, parse the information and save to my database. I have these three things in a different files(getAPI,parseAPI and savetoDB). getAPI will call parseAPI and it will in return call savetoDB. I want all three of them to work in background thread.

My question is when I call getAPI, will parseAPI and savetoDB run in the background thread as well? How do I ensure that all three of them run in the background? How do I return the call back to main thread after savetoDB?

Example:

```
dispatch_queue_t backgroundQueue;
backgroundQueue = dispatch_queue_create("lakesh", NULL);  
- (void)startprocess {    
    dispatch_async(backgroundQueue, ^(void) {
        [self getAPI];
    });    
} 
```

Need some guidance.. Thanks...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:26:53.450

如果您在后台线程上发出一个函数，则所有执行都将在该线程上继续，直到它完成，或者您在主线程上回调另一个函数。一开始我也和你一样担心，所以我给自己做了以下宏：

```
/// Stick this in code you want to assert if run on the main UI thread.
#define DONT_BLOCK_UI() \
    NSAssert(![NSThread isMainThread], @"Don't block the UI thread please!")

/// Stick this in code you want to assert if run on a background thread.
#define BLOCK_UI() \
    NSAssert([NSThread isMainThread], @"You aren't running in the UI thread!") 
```

正如您在评论中看到的那样，我倾向于在方法的开头使用这些宏，以确保我不会在错误的线程中错误地使用这些宏。我已将这些宏和更多随机内容放在[https://github.com/gradha/ELHASO-iOS-snippets](https://github.com/gradha/ELHASO-iOS-snippets)，您可能会发现它们很有用。

关于您返回主线程的问题，因为您使用的是 GCD，所以最好`dispatch_get_main_queue()`在最后调用`savetoDB`您想要在那里运行的代码。如果`savetoDB`是一个库函数，它的入口点应该允许在一切完成后传入您想要在主线程上运行的成功块。这是[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)等库使用的模式。请注意他们的示例如何提供一个 API，其中的东西在后台运行，然后您的代码被回调（通常在主线程中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:15:25.577

是的，当然如果`getAPI`调用`parseAPI`，代码`parseAPI`将在与执行的线程相同的线程上`getAPI`执行，因此在您的示例中，在后台队列中。

要在最后将回调返回到主线程，请使用与 Apple 使用的相同技术，`completionBlock`您可以在多个 Apple API 上看到它们：只需将一个块（例如`dispatch_block_t`，或`void(^)(NSError*)`任何适合您需要的）作为参数传递给您的`getAPI:`方法，这将将它传递给`parseAPI:`它将依次传递给它，`savetoDB:`最后`savetoDB:`可以简单地用于`dipatch_async(dispatch_get_main_queue, completionBlock);`在主线程上调用此代码块（从方法传递到方法）。

注意：对于您的 getAPI，您可以使用 Apple 的`sendAsynchronousRequest:queue:completionHandler:`方法，该方法将在后台自动执行请求，然后调用指示的完成块`NSOperationQueue`（`NSOperationQueue`内部使用 GCD 的 dispatch_queue）。有关更多信息，请参阅有关`NSOperationQueue`GCD 和[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)的文档以及 Apple 文档中所有非常详细的指南。

* * *

```
-(void)getAPI:( void(^)(NSError*) )completionBlock
{
  NSURLRequest* req = ...
  NSOperationQueue* queue = [[NSOperationQueue alloc] init]; // the completionHandler will execute on this background queue once the network request is done
  [NSURLConnection sendAsynchronousRequest:req queue:queue completionHandler:^(NSURLResponse* resp, NSData* data, NSError* error)
   {
     if (error) {
       // Error occurred, call completionBlock with error on main thread
       dispatch_async(dispatch_get_main_queue(), ^{ completionBlock(error); });
     } else {
       [... parseAPI:data completion:completionBlock];
     }
   }];
}

-(void)parseAPI:(NSData*)dataToParse completion:( void(^)(NSError*) )completionBlock
{
   ... parse datatToParse ...

   if (parsingError) {
     dispatch_async(dispatch_get_main_queue(), ^{ completionBlock(error); });
   } else {
     [... savetoDB:dataToSave completion:completionBlock];
   }
}

-(void)savetoDB:(id)dataToSave completion:( void(^)(NSError*) )completionBlock
{
   ... save to your DB ...

   // Then call the completionBlock on main queue / main thread
   dispatch_async(dispatch_get_main_queue(), ^{ completionBlock(dbError); }); // dbError may be nil if no error occurred of course, that will tell you everything worked fine
}

-(void)test
{
  [... getAPI:^(NSError* err)
   {
      // this code will be called on the main queue (main thread)
      // err will be nil if everythg went OK and vontain the error otherwise
   }];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T13:16:32.543

是的，`parseAPI`将`savetoDB`在您创建的新队列中运行。如果您需要在操作完成后修改 UI，则该代码**必须**在主线程中运行。为此，请获取对主队列的引用并向其发送一些代码。例如：

```
- (void)startprocess {    
    dispatch_async(backgroundQueue, ^(void) {
        [self getAPI];
        dispatch_async(dispatch_get_main_queue(), ^{
             // Refresh the UI with the new information
        });
    });    
} 
```

完成后不要忘记加入`dispatch_release`新队列。

Cocoa 本身在框架的许多部分中使用的另一种模式是在后台操作结束时调用的 API 函数的签名中添加回调块。[这个 Stack Overflow 线程](https://stackoverflow.com/questions/7180552/implementing-a-method-taking-a-block-to-use-as-callback)解释了如何做到这一点。

# jquery - active tab in css

> ID：14788234
> 
> 赞同：1
> 
> 时间：2013-02-09T12:39:54.613
> 
> 标签：jquery, html, css, click

I am having lengthy structure of bootstrap theme classes.

**This is menu i am designing.**

![Dashboard select with current '.active' class-](../Images/bef647d347ee71fdb2f6d125ec2910af.png)

Have this code for this menu bar design in bootstrap-

```
 <div class="navbar navbar-fixed-top navbar-inverse">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span
                        class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                    </a><a class="brand" href="#">My Menu</a>
                    <div class="nav-collapse">
                        <ul class="nav">
                            <li class="active"><a  href="/Home/Dashboard"><i class="icon-home icon-white"></i>Dashboard</a></li>
                            <li ><a href="#" id="taskMainLink">Task</a></li>

                            <li><a href="#" id="contactMainLink">Contact</a></li>

                            <li><a href="#" id="appointmentMainLink">Appointment</a></li>

                            <li><a href="#" id="projectMainLink">Project</a></li>

                            <li><a href="#" id="salesMainLink">Sales</a></li>

                        </ul> 
```

**Now Issue**

I want each tab to be active on mouseclick and other tabs should be in original state. Current active class is dashboard by default i did.

**Structure i am following for each time i click on any tab-**

```
$('.navbar.navbar-fixed-top.navbar-inverse>.container-fluid>.nav-collapse>.nav').click(function(){
$(this).find('li').removeClass('active');
$(this).addClass('active');
}); 
```

Am i going right class into class? Please suggest me right solution if i am wrong here.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T12:43:38.867

尝试这个：

```
$('ul.nav li a').click(function(){
    $(this).parent().parent().children('.active').removeClass('active');
    $(this.parentNode).addClass('active');
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:42:21.070

这应该可以解决问题：

```
$('ul.nav li a').click(function(e){
    e.preventDefault();
    $(this).parent().find('li.active').removeClass('active');
    $(this).addClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:43:17.030

我认为您可能更容易使用为您执行此操作的 bootstrap [buttonDropdown](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)组件。

尝试将这些按钮下拉菜单与[buttonGroups](http://twitter.github.com/bootstrap/components.html#buttonGroups)组件一起使用，以使您的按钮组合在一起并应用您的 css 使其看起来像您的菜单。

您不需要任何额外的 JavaScript 来使您的菜单正常工作！

# c++ - Multiplying with parenthesis result using overloaded * operator in C++

> ID：14788238
> 
> 赞同：1
> 
> 时间：2013-02-09T12:40:25.357
> 
> 标签：c++, vector, overloading, parentheses

So I've been writing a small math library in C++ and when dealing with a scalar multiplied by a vector I get some issues when I try to perform this operation

```
Vect V2;
Vect V3;
float S;

Vect V1 = V2 + S * (V2 - V3); 
```

The Vect Value I receive in the overloaded operator * is a new Vect object and not the outcome of the (V2 - V3) part of the operation. Here's the other relevant part of the code. If I follow the operation with the debugging the two overloaded operators work correctly by themselves but not one after the other.

Vect.h

```
Vect &operator - (const Vect &inVect);
friend const Vect operator*(const float scale, const Vect &inVect); 
```

Vect.cpp

```
Vect &Vect::operator - (const Vect &inVect)
{
    return Vect (this->x - inVect.x,this->y - inVect.y,this->z - inVect.z, 1);
}

const Vect operator*(const float scale, const Vect &inVect)
{
    Vect result;

    result.x = InVect.x * scale;
    result.z = InVect.y * scale;
    result.y = InVect.z * scale;
    result.w = 1;

    return result;
} 
```

I also overloaded the + and = operator and they work as expected the only problem I encounter is the problem above.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T12:42:31.257

在您的`operator-`中，您创建一个临时`Vect`文件并返回对该临时文件的引用。临时对象在语句结束时被销毁，`return`返回的引用悬空。对这个引用做任何事情都会导致未定义的行为。

相反，您`operator-`应该`Vect`按值返回：

```
Vect Vect::operator - (const Vect &inVect)
{
  return Vect (this->x - inVect.x,this->y - inVect.y,this->z - inVect.z, 1);
} 
```

# ruby - How to get the reference alive to the older one, when there is a second exception in Ruby?

> ID：14788241
> 
> 赞同：-9
> 
> 时间：2013-02-09T12:40:44.950
> 
> 标签：ruby, exception

```
begin
  raise "explosion"
rescue
  p $!
  raise "Are you mad"
  p $!
end

# #<RuntimeError: explosion>
# RuntimeError: Are you mad
#    from (irb):5:in `rescue in irb_binding'
#    from (irb):1
#    from /usr/bin/irb:12:in `<main>' 
```

`$!` always holds only the *current* exception object reference.

***But is there any way to get a reference to the original exception object (here it is "explosion"), after another exception has been raised?*** <~~~ Here is my question.

Myself tried and reached to the answer,hope now it is more clearer to all who was in Smokey situation with my queries.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:31:27.590

您是说在挽救第二个异常时要参考原始异常吗？如果是这样，那么您需要在救援期间在变量中捕获原始异常。这是通过执行以下操作来完成的：

```
rescue StandardError => e 
```

其中 StandardError 可以是任何类型的异常或被省略（在这种情况下 StandardError 是默认值）。

例如，代码：

```
begin
    raise "original exception"
rescue StandardError => e
    puts "Original Exception:"
    puts $!
    puts e
    begin
        raise "second exception"
    rescue
        puts "Second Exception:"
        puts $!
        puts e      
    end
end 
```

给出输出：

```
Original Exception:
original exception
original exception
Second Exception:
second exception
original exception 
```

如您所见`e`，已存储原始异常以供在第二个异常之后使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T15:18:46.280

```
class MyError < StandardError
attr_reader :original
def initialize(msg, original=$!)
super(msg)
@original = original;
end
end
begin
    begin
    raise "explosion"
    rescue => error
    raise MyError, "Are you mad"
    end
rescue => error
puts "Current failure: #{error.inspect}"
puts "Original failure: #{error.original.inspect}"
end 
```

***输出***

```
Current failure: #<MyError: Are you mad>
Original failure: #<RuntimeError: explosion>
=> nil 
```

# android - Android: Chronometer SetBase in minutes

> ID：14788242
> 
> 赞同：0
> 
> 时间：2013-02-09T12:40:49.483
> 
> 标签：android, time, chronometer

Is there a way by which using the android chronometer class to set base of the chronometer in 15 minutes and from that period the times goes down until 0 seconds?

I have tried with `setBase(60000)` but this isn't work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T06:58:20.437

一般来说，计时器的工作原理是这样的（如果您想将 Base 设置为特定的 nr）：

> mChronometer.setBase(SystemClock.elapsedRealtime() - (nr_of_min * 60000 + nr_of_sec * 1000)))

你问什么可以通过倒计时来完成（[http://developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)）

或者像这样使用计时器创建自己的倒计时（应该做更多的工作，因为我刚刚写了这个，还没有测试它）

```
private OnChronometerTickListener countUp = new OnChronometerTickListener(){
@Override
public void onChronometerTick(Chronometer chronometer){
            long elapsedTime = (SystemClock.elapsedRealtime() - mChronometerCountUp.getBase()) / 60000; 
            Log.v("counting up", elapsedTime); 
            // you will see the time counting up
            count_down--; 
                if(count_down == 0){
                mChronometerCountUp.stop();
            }
            // an int which will count down, 
            // this is not (very) accurate due to the fact that u r using the update part of the chronometer 
            // u just might implement the countdown i guess 
            // or 2 chronometers (one counting up and an other counting down using the elapsed time :p)
            // just remember programming is creating ur solution to problems u face its like expression urself
        };
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:45:14.653

看看这个线程[Android: chronometer as a persistent stopwatch。如何设置开始时间？什么是天文台“底座”？](https://stackoverflow.com/questions/2324701/android-chronometer-as-a-persistent-stopwatch-how-to-set-starting-time-what-i)以及这个线程[Android-Get time of chronometer 小部件](https://stackoverflow.com/questions/526524/android-get-time-of-chronometer-widget)。两者都没有直接回答你的问题，但那里的掘金应该引导你找到答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:49:45.433

[http://developer.android.com/reference/android/widget/Chronometer.html](http://developer.android.com/reference/android/widget/Chronometer.html)

要设置基本时间，您可以使用 elapsedRealtime()，您可以使用 setFormat() 输出格式

# clearcase - 如何确定新添加的元素到我的私有分支中

> ID：14788250
> 
> 赞同：1
> 
> 时间：2013-02-09T12:41:30.120
> 
> 标签：clearcase

在一项重大开发中，我已将多个文件添加到我的私有分支的源代码管理中。还有一些现有文件被修改并签入我的私人分支。现在，当我们将更改合并到我们的项目分支时，我想验证我新添加到我的私有分支的所有元素，以确定位置是否正确（例如，它们应该被放置在另一个位置并且应该添加一个符号链接）

我列出了我私人分支中的所有元素，但无法弄清楚这些元素中的哪些是新添加的。

有可靠的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:56:17.733

您可以查询某个用户自某个日期以来给定分支中的所有元素：

```
cleartool find . -type f -branch "brtype(abranch)" -element "{created_since(10-Jan)}" -user aloginname -print 
```

（这将只搜索文件，如“[如何在给定分支中查找文件](https://stackoverflow.com/questions/2785791/how-to-find-files-in-a-given-branch/2786120#2786120)”以及“[如何在分支中列出某个用户的活动](https://stackoverflow.com/a/1372697/6309)”中所述）

另一种方法是创建一个专用（简单的基本 ClearCase）视图来显示这些元素，如“[获取特定时间的所有版本](https://stackoverflow.com/questions/10703227/get-all-versions-from-a-specific-time-clearcase-ucm/10703661#10703661)”或“[如何找出上个月分支中发生的所有活动？](https://stackoverflow.com/q/1577980/6309) ” .

但一般来说，第一次查询就足够了。

# javascript - Casperjs command line cookies aren't accepted

> ID：14788251
> 
> 赞同：0
> 
> 时间：2013-02-09T12:41:31.773
> 
> 标签：javascript, phantomjs, casperjs

Nothing happens when I execute this code using the command prompt

```
$casperjs login.js --cookies-file=D:\temp\cookies.txt 
```

The cookies file is never created ?!

Anyone can help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:00:57.043

只需检查两件事：

*   该路径是否有任何安全限制？
*   使用谷歌等基本网站进行测试。也许你的 Login.js 什么都不做。

# c++ - “typedef void (*task) ()”有什么作用？

> ID：14788255
> 
> 赞同：0
> 
> 时间：2013-02-09T12:42:12.160
> 
> 标签：c++, typedef

此处部分回答了此问题[“typedef void (*Something)()”是什么意思](https://stackoverflow.com/questions/3982470/what-does-typedef-void-something-mean)

但答案对我来说并不完全清楚。

如果我写

```
typedef void (*task) (); 
```

它是如何扩展的？

```
thread_pool(unsigned int num_threads, task tbd) {
      for(int i = 0; i < num_threads; ++i) {
        the_pool.push_back(thread(tbd));
      }
    } 
```

会是这个样子吗？

```
thread_pool(unsigned int num_threads, (*task) () tbd) {
      for(int i = 0; i < num_threads; ++i) {
        the_pool.push_back(thread(tbd));
      }
    } 
```

可能不是，因为它是语法错误。我希望你能帮我把事情弄清楚。

代码示例来自[http://www.thesaguaros.com/openmp-style-constructs-in-c11.html](http://www.thesaguaros.com/openmp-style-constructs-in-c11.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:44:44.200

就像这样：

```
thread_pool(unsigned int num_threads, void (*tbd) ()) 
```

也就是说，类型是函数签名，唯一的“单词”是“void”。typedef 名称“task”在此示例中消失了，因为我们不再使用 typedef。

# c++ - C++ std::vector emplace vs insert

> ID：14788261
> 
> 赞同：66
> 
> 时间：2013-02-09T12:42:36.573
> 
> 标签：c++, vector, stl

我想知道两者之间有什么区别。我注意到 emplace 是 c++11 添加的。那么为什么要添加呢？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-02-09T12:44:57.650

Emplace 采用就地构造对象所需的参数，而 insert 采用（引用）一个对象。

```
struct Foo
{
  Foo(int n, double x);
};

std::vector<Foo> v;
v.emplace(someIterator, 42, 3.1416);
v.insert(someIterator, Foo(42, 3.1416)); 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-02-09T12:45:29.067

`insert`将对象复制到向量中。

`emplace` *在向量内部*构造它们。**

# php - 获取产品的Magento oauth错误

> ID：14788265
> 
> 赞同：0
> 
> 时间：2013-02-09T12:42:57.090
> 
> 标签：php, api, magento, oauth, product

当我们获取产品时，magento 中存在类似“无效的 auth/bad request (got a 403, expected HTTP/1.1 20X or a redirect)”的错误。我的代码如下。

```
$resourceUrl = "http://localhost/magento/api/rest/products"; 
$oauthClient->fetch($resourceUrl, array(), 'GET', array('Content-Type' => 'application/json'));
$productsList = json_decode($oauthClient->getLastResponse()); 
```

我通过这个 url 完成了用户认证

[http://www.magentocommerce.com/api/rest/authentication/oauth_authentication.html](http://www.magentocommerce.com/api/rest/authentication/oauth_authentication.html)。

请解决我的问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:57:38.593

您想授予客户/访客访问权限。

按照这个步骤..

转到magento管理面板系统-> Web服务-> REST角色->客户->资源访问->设置所有

并且还转到系统->Webservice->REST Roles->Guest->Resources Access ->SET ALL

类似地转到系统->Webservice->REST 属性->客户->资源访问->设置所有

并且还转到系统-> Webservice-> REST 属性-> 访客-> 资源访问-> 设置所有

现在检查您的 magento 中是否有产品，并将网站（例如主网站）分配给产品。

现在打印有问题的 $productsList，您将看到所有产品数组。

# ios6-maps - iOS 6 地图偶尔会在 iPad3 上崩溃，主要是当我旋转时

> ID：14788268
> 
> 赞同：3
> 
> 时间：2013-02-09T12:43:13.483
> 
> 标签：ios6-maps

当我在详细场景下方旋转 iPad 时，我的应用程序崩溃了主要是当我旋转地图屏幕时。

我试图检查不同的日志：在运行时和崩溃后，应用程序在以下行停止：

```
IMGSGX543GLDriver`sgxTextureGetImageRowBytes(GLDTextureRec*, unsigned int, unsigned int): 
```

从设备控制台：

```
Feb  9 13:13:23 iPad3 awdd[4970] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
Feb  9 13:13:23 iPad3 awdd[4970] <Error>: CoreLocation: CLClient is deprecated. Will be obsolete soon.
Feb  9 13:13:24 iPad3 awdd[4970] <Error>: libMobileGestalt copyCTInfoWithBlock: _CTServerConnectionCopyFirmwareVersion: CommCenter error: 1:45 (Operation not supported)
Feb  9 13:13:24 iPad3 awdd[4970] <Error>: libMobileGestalt copyCTInfoWithBlock: _CTServerConnectionCopyFirmwareVersion: CommCenter error: 1:45 (Operation not supported)
Feb  9 13:13:24 iPad3 awdd[4970] <Error>: libMobileGestalt copyCTInfoWithBlock: _CTServerConnectionCopyFirmwareVersion: CommCenter error: 1:45 (Operation not supported)
Feb  9 13:13:24 iPad3 awdd[4970] <Error>: libMobileGestalt copyCTInfoWithBlock: _CTServerConnectionCopyFirmwareVersion: CommCenter error: 1:45 (Operation not supported) 
```

BR,

# jquery - 如果 div 内的所有 img src 为空，则删除 div

> ID：14788270
> 
> 赞同：3
> 
> 时间：2013-02-09T12:43:26.917
> 
> 标签：jquery

**html代码**

```
 <div class="add_pdt_img_nc">
    <h5>Additional Images</h5>
    <img border="0" src="" alt="">
    <img border="0" src="" alt="">
    <img border="0" src="" alt="">
    <img border="0" src="" alt="">
    </div> 
```

如果所有图像 src 为空，我想删除具有类 add_pdt_img_nc 的 div

到目前为止我已经尝试过

```
$(".add_pdt_img_nc img").each(function() {
    if($(this).attr("src") == "") {
      $(".add_pdt_img_nc").remove();
    }
 }); 
```

但是如果第一个 img src 为空，它会删除 div 并且不检查其他 img src 是否有值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T12:45:41.430

```
var all_null = true;
$(".add_pdt_img_nc img").each(function() {
    if($(this).attr("src")!= "") {
       all_null = false;
       return false; // break
    }
});
if(all_null) {
   $(".add_pdt_img_nc").remove();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T12:45:59.290

尝试这个：

```
$(".add_pdt_img_nc").each(function() {
    var $parent = $(this);
    if ($('img[src!=""]', this).length == 0) {
        $parent.remove();
    }
}); 
```

[**示例小提琴**](http://jsfiddle.net/NNKMU/)

这将检查是否存在具有属性集的`img`元素。如果没有，它将删除.`.add_pdt_img_nc``src``div`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T12:46:16.897

用这个：

```
$("div").each(function(){
    if ($('img[src!=""]', this).length == 0 || !$('img').attr("src")) {
        $(this).remove();
    }
}); 
```

# android - 拉回起始位置RelativeLayout Android

> ID：14788271
> 
> 赞同：0
> 
> 时间：2013-02-09T12:43:28.980
> 
> 标签：android, android-layout, android-relativelayout, android-animation

如何实现以下机制（参见图片[http://goo.gl/acy5D](http://goo.gl/acy5D)）：

1.  下拉RelativeLayout

2.  RelativeLayout 动画回到起始位置

类似的机制：（见图片[http://goo.gl/AIKdn](http://goo.gl/AIKdn)）

路径应用

谷歌+应用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:49:01.753

您是否尝试过使用滑动抽屉小部件？我认为定制一个就可以满足您的要求。

# php - 未定义的偏移量：5

> ID：14788279
> 
> 赞同：-6
> 
> 时间：2013-02-09T12:44:12.770
> 
> 标签：php, html, undefined, offset

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
</head>
<body>
    <?php
    $table = array ("1", "2", "3", "4", "5");
    $count = count($table); 
    echo "<table border='1'>";
    $rows = 5;
    for($i=0; $i <= $count; $i = $i + $rows)
    {
        echo "<tr>";
        for($z = 0; $z < $rows; $z++)
        {
            if ($table[$i + $z] !=0)
                echo "<td>This is row {$table[$i + $z]}</td></tr>";
            else
                echo "<td>&nbsp;</td></tr>";
        }
    }
    echo "</table>"
    ?>
</body>
</html> 
```

这是我一段时间以来一直试图让它工作的代码，虽然其他一切都很好，但当我运行它时就会出现问题。它显示了我想要的表格，但它在表格下发布：

```
Notice: Undefined offset: 5 in [file location] on line 22
Notice: Undefined offset: 6 in [file location] on line 22
Notice: Undefined offset: 7 in [file location] on line 22
Notice: Undefined offset: 8 in [file location] on line 22
Notice: Undefined offset: 9 in [file location] on line 22 
```

我知道问题出在“！= 0”值附近，但是无论我将其更改为什么，它要么刷新整个工作，要么重复相同的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:52:31.080

1.  您错过`;`了以下陈述。

    ```
    echo "</table>" 
    ```

2.  您正在以 5 步进行迭代。`$i + $rows`您`$table`最多可以进行`$table[4]`.
3.  错误/通知是因为相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-15T08:49:30.873

我得到了相同的错误代码，但我设法找到了问题。您收到的错误消息与数组有关。看来您是在引用未定义的数组 [key]: `for($i=0; $i <= $count; $i = $i + $rows)`。`$i = $i + $rows`是罪魁祸首。示例：`$i = 0`所以array[5] 并且`$rows=5;`这`0 + 5 = 5` 在数组中不存在。它仅与`$table`数组一起达到 4。希望这可以帮助您和/或其他人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-10T15:58:58.890

```
<?php
if(isset($_POST['submit'])){
    $the_file = file($_FILES['the_file']['tmp_name']);
    for( $i = 0; $i < count($myfile); ++$i){
        echo $myfile[$i] . "<br/>";
        echo "Line " . ( $i + 1 ) . " is  " .strlen($myfile[$i]) . " characters long<br/>";
    }
}
?>

<form method="post" action="myphp.php" enctype='multipart/form-data' >
    <input type="file" name="the_file" value="Yes"/>
    <input type="submit" name="submit" value="No"/>
</form> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-09-15T21:00:37.757

我认为发布此问题的人已经解决了。只需在这条线上稍作改动`for($i=0; $i <= $count; $i = $i + $rows)`即可解决问题。

`for($i=0; $i <= $count; $i = $i + $rows) // for($i=0; $i < $count; $i = $i + $rows)`用这个。

# javascript - 包装不返回 POST 数据的角度 $resource 请求

> ID：14788292
> 
> 赞同：2
> 
> 时间：2013-02-09T12:45:42.647
> 
> 标签：javascript, rest, angularjs

我正在将我的 $resource 请求包装在一个简单的包装器中。主要思想是能够在发出请求之前添加一些逻辑。我关注了[Nils](http://nils-blum-oeste.net/angularjs-send-auth-token-with-every--request/#.URYyLVpU5r0)写的好文章。

在这里，您可以看到访问 REST API 模块的服务定义。

```
resources.factory('Device', ['RequestWrapper', '$resource', 'lelylan.config', function(RequestWrapper, $http, config) {
  var resource = $resource(config.endpoint + '/devices/:id', { id: '@id' });
  return RequestWrapper.wrap(resource, ['get', 'query', 'save', 'delete']);
}]); 
```

在这里您可以看到请求包装器定义。

```
resources.factory('RequestWrapper', ['AccessToken', function(AccessToken) {
  var requestWrapper = {};
  var token;

  requestWrapper.wrap = function(resource, actions) {
    token = AccessToken.initialize();

    var wrappedResource = resource;
    for (var i=0; i < actions.length; i++) { request(wrappedResource, actions[i]); };
    return wrappedResource;
  };

  var request = function(resource, action) {
    resource['_' + action]  = resource[action];

    resource[action] = function(param, data, success, error) {
      (AccessToken.get().access_token) ? setAuthorizationHeader() : deleteAuthorizationHeader()
      return resource['_' + action](param, data, success, error);
    };
  };

  var setAuthorizationHeader = function() {
    $http.defaults.headers.common['Authorization'] = 'Bearer ' + token.access_token;
  };

  var deleteAuthorizationHeader = function() {
    delete $http.defaults.headers.common['Authorization']
  };

  return requestWrapper;
}]); 
```

GET 和 DELETE 方法一切正常（似乎不返回正文的方法），但我无法 $save 工作。发生的情况是，当创建的资源的 JSON 返回时，它没有被添加。我只有在创建阶段设置的数据。让我举个例子。

在这种情况下，我们使用包装的资源。如果我尝试获取 #updated_at 属性，我将看不到它。在 Chrome 检查器中，我可以看到资源是如何成功创建的。

```
$scope.device = new Device({ name: 'Angular light', type: 'http://localhost:9000/types/50bf5af4d033a95486000002' });
$scope.device.$save(function(){ console.log('Device Wrapped', $scope.device.created_at) });
# => undefined 
```

如果我使用 $resource 一切正常。

```
// Suppose authorization is already set
var Resource = $resource('http://localhost\\:9000/devices/:id');
$scope.resource = new Resource({ name: 'Angular light', type: 'http://localhost:9000/types/50bf5af4d033a95486000002' });
$scope.resource.$save(function(){ console.log('Device Base', $scope.resource.created_at); });
# => 2013-02-09T12:26:01Z 
```

我开始检查 angular-resource.js 代码，但几个小时后我无法真正弄清楚。我不明白为什么要返回正文，但是在包装器资源中它是不可访问的。

任何想法或帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:50:13.017

在深入研究 AngularJS 源代码时，我找到了解决方案。

问题是包装器返回的是一个函数而不是一个对象，这带来了一些问题。解决方案是更改 Wrapper 中的以下行：

```
return resource['_' + action](param, data, success, error); 
```

有了这个：

```
return resource['_' + action].call(this, params, data, success, error); 
```

为什么？快速的答案是因为他们在 angular-resource 的源代码中使用它。实际上 #call 运行函数将它发送到调用对象。它通常用于初始化对象。[在这里了解更多](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)。

# outlook - 如何修改 AppointmentItem.Parent 对象

> ID：14788295
> 
> 赞同：0
> 
> 时间：2013-02-09T12:45:46.610
> 
> 标签：outlook, vsto, office-interop

我需要从约会实例中为定期约会的主人设置 UserProperty。

情景是：a。用户打开定期会议/约会的实例。
湾。我的程序在约会系列的主人上设置了一个 UserProperty

使用 Parent 属性很容易获得主约会，但它是只读的。

如何获得对主约会的可修改参考？

我要执行的代码是这样的

```
Outlook.AppointmentItem masterAppointment = (Outlook.AppointmentItem)(currentAppointment.Parent);
masterAppointment.ItemProperties.Add("xxx", Outlook.OlUserPropertyType.olText);
masterAppointment.ItemProperties["xxx"].Value = aStringValue;
masterAppointment.Save(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T20:44:06.790

是什么让您认为 AppointmentItem.Parent 返回一个只读 AppointmentItem？
调用 Save 时是否出现错误？
如果您需要添加自定义属性，请使用 AppointmentItem.UserProperties.Add。

# jquery - 如何使用数据启用 jquery 自动完成组合框

> ID：14788296
> 
> 赞同：0
> 
> 时间：2013-02-09T12:45:49.257
> 
> 标签：jquery, autocomplete

我使用以下命令禁用和启用 jQuery[自动完成组合框](http://jqueryui.com/autocomplete/#combobox)：

```
$("#classno").parent().find("input.ui-autocomplete-input")
            .autocomplete("option", "disabled", true).prop("disabled",true); 

$("#classno").parent().find("input.ui-autocomplete-input")
             .autocomplete("option", "disabled", true).prop("disabled",false); 
```

它工作正常，但是当我启用它时，我看不到之前添加的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:52:45.217

似乎您没有在第二次通话中启用自动完成功能，而仅启用`input`. 所以而不是：

```
$("#classno").parent().find("input.ui-autocomplete-input")
         .autocomplete("option", "disabled", true).prop("disabled",false); 
```

你应该试试：

```
$("#classno").parent().find("input.ui-autocomplete-input")
         .autocomplete("option", "disabled", false).prop("disabled",false); 
```

您可以使用`$("#classno").parent().find("input.ui-autocomplete-input").val('')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:56:54.983

这有什么问题？

```
$("#classno").parent().find("input.ui-autocomplete-input").autocomplete( "disable" );

$("#classno").parent().find("input.ui-autocomplete-input").autocomplete( "enable" ); 
```

[http://api.jqueryui.com/autocomplete/#method-disable](http://api.jqueryui.com/autocomplete/#method-disable)

# c# - LEFT LINQ TO SQL C# JOIN 在多对多表上

> ID：14788299
> 
> 赞同：2
> 
> 时间：2013-02-09T12:45:58.793
> 
> 标签：c#, linq, linq-to-sql, many-to-many

嗨，我对 linq to sql 有点陌生，我了解基础知识。问题是我想在查询中进行左连接。查询中有 3 个表。

> 1.  索赔人（应从该表返回所有行）
> 2.  宣称
> 3.  用户

查询应返回所有拥有索赔人的用户。这是通过多对多表声明完成的。但无论用户如何，都应退回所有索赔人。因此，左连接索赔人。

我有以下查询

```
 var d = (from Claimants in DB.Claimants
                 join Claims in DB.Claims on Claimants.Claiment_ID equals Claims.Claiment_ID
                 join Users in DB.Users on Claims.User_ID equals Users.User_ID
                 where (Claimants.TrialDate.Value >= dtDayStart & Claimants.TrialDate <= dtDayEnd)
                 select new
                 {
                     ClaimantFirstName = Claimants.FirstName,
                     ClaimantLasname = Claimants.LastName,
                     ClaimantsID = Claimants.IDNumber,
                     Claimants.OurReference,
                     Claimants.TrialDate,
                     InterviewStart = Claims.DateTimeStart,
                     InterviewEnd = Claims.DateTimeEnd,
                     Claims.Priority,
                     UserFirstname = Users.FirstName,
                     UserLastName = Users.LastName,
                     UserID = Users.IDNumber
                 }); 
```

我尝试使用如下的 into 语句，但没有运气

```
 var d = (from Claimants in DB.Claimants
                 join Claims in DB.Claims on Claimants.Claiment_ID equals Claims.Claiment_ID
                 into TheClaimants
                 from Claims in TheClaimants.DefaultIfEmpty()

                 join Users in DB.Users on Claims.User_ID equals Users.User_ID
                 where (Claimants.TrialDate.Value >= dtDayStart & Claimants.TrialDate <= dtDayEnd)
                 select new
                 {
                     ClaimantFirstName = Claimants.FirstName,
                     ClaimantLasname = Claimants.LastName,
                     ClaimantsID = Claimants.IDNumber,
                     Claimants.OurReference,
                     Claimants.TrialDate,
                     InterviewStart = Claims.DateTimeStart,
                     InterviewEnd = Claims.DateTimeEnd,
                     Claims.Priority,
                     UserFirstname = Users.FirstName,
                     UserLastName = Users.LastName,
                     UserID = Users.IDNumber
                 }); 
```

如果有人能指出我如何正确使用这些左右连接并解释其工作原理，我将不胜感激。非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:55:53.933

```
var d = (from Claimants in DB.Claimants
  join Claims in DB.Claims on Claimants.Claiment_ID equals Claims.Claiment_ID)
  .DefaultIfEmpty()
  join Users in DB.Users on Claims.User_ID equals Users.User_ID
  where (Claimants.TrialDate.Value >= dtDayStart & Claimants.TrialDate <= dtDayEnd)
  .DefaultIfEmpty()
  select new
  {
    ClaimantFirstName = Claimants.FirstName,
    ClaimantLasname = Claimants.LastName,
    ClaimantsID = Claimants.IDNumber,
    Claimants.OurReference,
    Claimants.TrialDate,
    InterviewStart = Claims.DateTimeStart,
    InterviewEnd = Claims.DateTimeEnd,
    Claims.Priority,
    UserFirstname = Users.FirstName,
    UserLastName = Users.LastName,
    UserID = Users.IDNumber
 }); 
```

[左外连接](https://stackoverflow.com/questions/700523/linq-to-sql-left-outer-join)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:40:21.453

在 LINQ 中，“.Join()”扩展方法相当于 SQL**内连接**。

对于**外部连接**，您必须使用“.GroupJoin()”扩展方法。

假设您非常了解 .Join，则 GroupJoin 使用起来很简单。我不得不承认，当我第一次需要在 LINQ 中进行外部连接时，很难找到。我无法想象他们为什么这样称呼它。

尽管在 VB.Net 中，这里有一篇文章介绍了各种 SQL 构造翻译成 LINQ 语法，即使在 VB 中，仍然很容易转换为扩展方法：http: [//blogs.msdn.com/b/vbteam/archive/2007/ 12/31/converting-sql-to-linq-part-6-joins-bill-horst.aspx?Redirected=true](http://blogs.msdn.com/b/vbteam/archive/2007/12/31/converting-sql-to-linq-part-6-joins-bill-horst.aspx?Redirected=true)

编辑：@DavidB 在他的评论中发布了一个更好的解决方案，但前提是您可以使用一些 ORM 导航属性。如果你没有它们，那么 GroupJoin 可能是最合理的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:25:07.073

你一定认识一个栾。如果您希望所有 Claiments 返回，首先从 Claiments 中选择，然后左连接到其他表。

尝试以下操作：

[LINQ to SQL 左外连接](https://stackoverflow.com/questions/700523/linq-to-sql-left-outer-join)

# python - 排除匹配的字符串 python re.findall

> ID：14788302
> 
> 赞同：2
> 
> 时间：2013-02-09T12:46:18.760
> 
> 标签：python, regex, string, text-processing

我正在使用 python 的 re.findall 方法来查找输入字符串中某个字符串值的出现。例如，从“ABCdef”字符串中搜索，我有两个搜索要求。

1.  查找从单个大写字母开始的字符串。
2.  在 1 之后找到包含所有大写字母的字符串。

例如输入字符串和预期输出将是：

*   `'USA' -- output: ['USA']`
*   `'BObama' -- output: ['B', 'Obama']`
*   `'Institute20CSE' -- output: ['Institute', '20', 'CSE']`

所以我的期望来自

```
>>> matched_value_list = re.findall ( '[A-Z][a-z]+|[A-Z]+' , 'ABCdef' ) 
```

是返回`['AB', 'Cdef']`。

但似乎没有发生。我得到的是`['ABC']`作为返回值，它将正则表达式的后半部分与完整字符串匹配。

那么有什么方法可以忽略找到的匹配项。因此，曾经`'Cdef'`与`'[A-Z][a-z]+'`. 正则表达式的第二部分（即`'[A-Z]+'`）仅与剩余字符串匹配`'AB'`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T12:51:23.910

首先，您需要匹配`AB`，然后是大写字母，然后是小写字母。或在字符串的末尾。为此，您可以使用`look-ahead`.

然后你需要匹配一个大写字母`C`，后跟多个小写字母`def`。

所以，你可以使用这个模式：

```
>>> s = "ABCdef"
>>> re.findall("([A-Z]+(?=[A-Z][a-z]|$)|[A-Z][a-z]+)", s)
['AB', 'Cdef']

>>> re.findall("([A-Z]+(?=[A-Z][a-z]|$)|[A-Z][a-z]+)", 'MumABXYZCdefXYZAbc')
['Mum', 'ABXYZ', 'Cdef', 'XYZ', 'Abc'] 
```

* * *

正如@sotapme 在评论中指出的那样，您还可以将上述正则表达式修改为： -

```
"([A-Z]+(?=[A-Z]|$)|[A-Z][a-z]+|\d+)" 
```

添加`\d+`是因为您还想像您的示例之一那样匹配数字。此外，他`[a-z]`从前瞻的第一部分中删除了一部分。之所以有效，是因为默认情况下外部的`+`量词`[A-Z]`是贪婪的，因此，它会自动匹配最大字符串，并且只会在最后一个`upper case`字母之前停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:51:12.343

你可以使用这个正则表达式

```
[A-Z][a-zA-Z]*?(?=[A-Z][a-z]|[^a-zA-Z]|$) 
```

# c++ - C++：在堆分配之前使用 typeid

> ID：14788304
> 
> 赞同：0
> 
> 时间：2013-02-09T12:46:36.073
> 
> 标签：c++, polymorphism, abstract-class, rtti, typeid

```
class A
{
protected:
    int a;
public:
    A();
    A(int);
    virtual void print()=0;
    virtual ~A();
};

class B: public A
{
    int b;
public:
    B();
    B(int,int); //initialize attributes a and b 
    void print(); //print a and b
};

class C: public A
{
    float c;
public:
    C();
    C(float,int); //initialize attributes a and c
    void print(); //print a and c
};

class D
{
    int size; //number of objects in v
    A **v; /* an array(a vector) of A pointers that allows me to have both B and C type objects */
public:
    D();
    D(int);
    D(D&);
    ~D();
    D operator=(const D&);
    void PrintAll();
}; 
```

* * *

D的所有方法：

```
D::D()
{
    v=NULL;
}
D::D(int x)
{
    size=x;
    v=new A*[x];
    for(int i=0;i<x;i++)
    {
        if(i%2==0)
            v[i]=new B(4,7);
        else
            v[i]=new C(3,5);
    }
}

D::D(D& other)
{
    size=other.size;
    v=new A*[size];
    for(int i=0;i<size;i++)
    {
        if(i%2==0)
        {
            v[i]=new B();
            *v[i]=other.v[i][0];
        }
        else
        {
            v[i]=new C();
            *v[i]=other.v[i][0];
        }
    }
}

D::~D()
{
    if(v!=NULL)
    {
        for(int i=0;i<size;i++)
        {
            delete v[i];
        }
        delete[] v;
    }
}
D D::operator=(const D& other)
{
    if(v!=NULL)
    {
        for(int i=0;i<size;i++)
        {
            delete v[i];
        }
        delete[] v;
    }
    size=other.size;
    v=new A*[size];
    for(int i=0;i<size;i++)
    {
        if(i%2==0)
        {
            v[i]=new B();
            *v[i]=other.v[i][0];
        }
        else
        {
            v[i]=new C();
            *v[i]=other.v[i][0];
        }
    }
    return *this;
}
void D::PrintAll()
{
    cout<<"Printall():"<<endl;
    for(int i=0;i<size;i++)
        v[i]->print();
} 
```

如您所见，D 类构造函数使 B 或 C 类型的对象**i**为奇数或偶数。如果我知道这一点，那么我就知道如何为 D 编写**operator=**和**复制构造函数**。但是如果类 D 构造函数会随机生成 B 或 C 类型的对象，那么我该如何编写复制构造函数（和 operator= ) 对于 D 类？我的猜测是我必须使用**typeid**运算符来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:14:24.277

将纯虚拟方法定义`clone`为接口`A`定义的一部分 -`clone`应返回对象的副本。`B`在您的每个和`C`类中覆盖并实现它。在`D`类中复制构造函数和赋值运算符实现使用`A`'s 接口来创建所需的类实例，而不是显式调用`new`: `v[i] = other.v[i]->clone();`。不需要`RTTI`，正常的多态性就可以了。

# java - JSON RPC Java dzhuvinov - 如何设置用户名和密码？

> ID：14788305
> 
> 赞同：1
> 
> 时间：2013-02-09T12:46:39.553
> 
> 标签：java, json, http, rpc, basic-authentication

我正在使用来自[dzhuvinov](http://software.dzhuvinov.com/json-rpc-2.0.html)的 JSON-RPC 2.0 的 Java 库。我在为呼叫的[基本访问身份验证设置用户名和密码时遇到问题。](http://en.wikipedia.org/wiki/Basic_access_authentication)我的代码如下所示：

```
public static void main(String[] args)
{
    URL serverURL = null;
    try {
        serverURL = new URL("http://user:pass@127.0.0.1:18332/");

    } catch (MalformedURLException e) {
        System.err.println(e.getMessage());
        return;
    }
     JSONRPC2Session mySession = new JSONRPC2Session(serverURL);
     String method = "getinfo";
     int requestID = 0;
     JSONRPC2Request request = new JSONRPC2Request(method, requestID);
     JSONRPC2Response response = null;
     try {
             response = mySession.send(request);

     } catch (JSONRPC2SessionException e) {
             System.err.println(e.getMessage());
             return;
     }
     if (response.indicatesSuccess())
        System.out.println(response.getResult());
    else
        System.out.println(response.getError().getMessage());
} 
```

我得到的回应是：

```
Network exception: Server returned HTTP response code: 401 for URL: http://user:pass@127.0.0.1:18332/ 
```

在 Python 中尝试类似的代码，我得到了正确的结果：

```
access = jsonrpc.ServiceProxy("http://user:pass@127.0.0.1:18332/")
print access.getinfo() 
```

如何为我的 JSON RPC 调用配置基本访问身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T06:03:36.157

```
final String rpcuser ="...";
final String rpcpassword ="...";

Authenticator.setDefault(new Authenticator() {
  protected PasswordAuthentication getPasswordAuthentication() {
      return new PasswordAuthentication (rpcuser, rpcpassword.toCharArray());
  }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T06:46:54.790

不确定“dzhuvinov”中的库如何处理流。但是您可以应用此代码在类打开的 HTTP 传输级别上执行基本身份验证`URL`。

```
URL url = new URL("http://user:pass@127.0.0.1:18332/");
URLConnection conn = url.openConnection();
String userpass = rpcuser + ":" + rpcpassword;
String basicAuth = "Basic " + new String(new Base64().encode(userpass.getBytes()));
conn.setRequestProperty ("Authorization", basicAuth);
conn.setRequestProperty ("Content-Type", "application/json");
conn.setDoOutput(true); 
```

完整的代码可以在这里找到[http://engnick.blogspot.ru/2013/03/java-trac-rpc-and-json.html](http://engnick.blogspot.ru/2013/03/java-trac-rpc-and-json.html)。我用它来执行 JSON-RPC 的东西来与`Trac`.

# javascript - 将 should.js 与 Coffeescript 一起使用

> ID：14788308
> 
> 赞同：2
> 
> 时间：2013-02-09T12:47:14.273
> 
> 标签：javascript, node.js, coffeescript, should.js

我想在我用 Coffeescript 编写的 Node.js 项目中将 should.js 和 mocha 一起使用。

在纯 Javascript 中， should.js 中的表达式就像

```
(function(){
  throw new Error('fail');
}).should.throw(); 
```

现在我想在 Coffeescript 中写同样的表达式。就像是

```
object.function().should.throw 
```

但这编译为

```
object["function"]().should["throw"]; 
```

我的咖啡脚本代码中的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:40:35.760

我不知道你为什么在你的咖啡脚本中写 object.function()。我认为编译到你的 JS 的咖啡脚本应该是：

```
(->
  throw new Error('fail')
).should.throw() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:57:36.620

> 我使用的代码是`testModel = new DBModel() testModel.get().should.throw()`

据我从纯 JS 示例中可以看出，您不应该调用要测试的函数 - 它的结果可能没有该`should`方法。改用这个：

```
testModel = new DBModel();
testModel.get.should.throw(); 
```

# sql - 使用休眠在本机 sql 查询中转换异常

> ID：14788313
> 
> 赞同：-1
> 
> 时间：2013-02-09T12:47:42.730
> 
> 标签：sql, hibernate, jakarta-ee

我有一个使用表的 sql 查询。结果集返回到未映射到数据库中的表的 bean 类。代码在这里：

```
 SQLQuery q2=ss.createSQLQuery("select tbl_policy.policyNum as POLICYNUM FROM     tbl_policy join tbl_product on tbl_policy.FK_productId = tbl_product.pk_product_id join tbl_code  on tbl_policy.FK_codeId = tbl_code.PK_codeId join tbl_agriyear on tbl_policy.FK_agriYearId = tbl_agriyear.pk_agriyear_id where tbl_policy.FK_naturalInsurantId = :p1 and tbl_agriyear.AGRIYEAR =:p2");
q2.addScalar("POLICYNUM", Hibernate.STRING);
List<SearchPolicyBean> lsql = (List<SearchPolicyBean>)q2.list(); 
```

bean 类名是： SearchPolicyBean 当我运行它时，在这一行

```
System.out.println("Finalllll "+lsql.get(0).getPOLICYNUM()); 
```

出现此错误：

```
java.lang.String cannot be cast to BO.SearchPolicyBean 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:13:39.053

获取第一个元素：

setPolicyNum((String) ((Object[])polList.get(i))[0]);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:15:25.883

```
addScalar(String columnAlias) 
          Is to Declare a scalar query result. 
```

您在此处将其声明为字符串`q2.addScalar("POLICYNUM", Hibernate.STRING);`

所以很明显，查询结果是一个字符串列表，而不是你的 SearchPolicyBean pojos 。

如果你期待你的 pojo 类列表，你必须使用

```
q2.addEntity(SearchPolicyBean.Class); 
```

并据此更改您的查询。

# mongodb - 删除 MongoDB 中特定属性类型的最小元素

> ID：14788317
> 
> 赞同：2
> 
> 时间：2013-02-09T12:48:15.240
> 
> 标签：mongodb, pymongo

我在 MongoDB 中有以下方案：

```
{
        "_id" : 100,
        "name" : "John Doe",
        "scores" : [
                {
                        "type" : "exam",
                        "score" : 334.45023
                },
                {
                        "type" : "quiz",
                        "score" : 11.78273309957772
                },
                {
                        "type" : "homework",
                        "score" : 6.676176060654615
                },
                {
                        "type" : "homework",
                        "score" : 35.8740349954354
                }
        ]
} 
```

我正在寻找一种以最低分数移除作业的方法。我在[这里](https://stackoverflow.com/questions/13335009/mongodb-find-the-minimum-element-in-array-and-delete-it)找到了一个相关的答案，但是它并没有多大帮助，因为我只需要找出分数最低的“家庭作业”并将其删除。

我正在使用 MongoDB 和 PyMongo 驱动程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T06:15:17.383

您需要添加`match`如下：

```
 myresults = scores.aggregate( [ { "$unwind": "$scores" }, { '$match': {'scores.type': "homework" } }, { "$group": { '_id':'$_id' , 'minitem': { '$min': "$scores.score" } } } ] )

    for result in myresults['result']:
        scores.update( { '_id': result['_id'] }, { '$pull': { 'scores': { 'score': result['minitem'] } } } ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T10:53:08.913

这是使用 Python 的解决方案：

```
students = db.students
cursor = students.find({})
for doc in cursor:
        hw_scores = []
        for item in doc["scores"]:
            if item["type"] == "homework":
                hw_scores.append(item["score"])
        hw_scores.sort()
        hw_min = hw_scores[0]
        students.update({"_id": doc["_id"]},
                        {"$pull":{"scores":{"score":hw_min}}}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-23T09:07:32.870

我尝试使用本机 mongodb 命令并且它有效。使用以下 2 个命令使其工作。

1) cursor = db.students.aggregate([{ "$unwind": "$scores" }, { "$match": { "scores.type": "homework"}},{ "$group": {' _id': '$_id', 'miniitem': {'$min':"$scores.score"}}}]), null

2) cursor.forEach(function(coll) {db.students.update({'_id': coll._id}, {'$pull': {'scores': {'score': coll.miniitem}}}) })

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T12:58:06.170

我认为不可能使用本机 mongodb 命令。我认为最好的方法是编写一个javascript函数来降低最低分数并在服务器上运行它；这将具有自动的优势，因此在您从中删除列表时无法更新列表，从而保持一致。

这是一些文档：[http ://docs.mongodb.org/manual/applications/server-side-javascript/](http://docs.mongodb.org/manual/applications/server-side-javascript/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-13T03:39:15.780

我在这里遵循了第三个答案。[删除 MongoDB 中特定属性类型的最小元素](https://stackoverflow.com/questions/14788317/removing-the-minimum-element-of-a-particular-attribute-type-in-mongodb?lq=1)

```
 var MongoClient = require('mongodb').MongoClient;

    MongoClient.connect('mongodb://localhost:27017/school', function(err, db) {
      if(err) throw err;

      var students = db.collection('students');
      cursor = students.aggregate(
    [{ "$unwind": "$scores" }, 
     { "$match": { "scores.type": "homework"}},
     { "$group": {'_id': '$_id', 'minitem': {
                    '$min': "$scores.score"
                }
            }
        }

    ]);

    cursor.forEach(
    function(coll) {
        students.update({
            '_id': coll._id
        }, {
            '$pull': {
                'scores': {
                    'score': coll.minitem
                }
            }
        })
    });
    }); 
```

# objective-c - Xcode - 如何将文本文件 (.txt) 上传到 FTP 服务器

> ID：14788318
> 
> 赞同：0
> 
> 时间：2013-02-09T12:48:16.707
> 
> 标签：objective-c, xcode, file-upload, ftp, text-files

如何在我的 iPhone 应用程序中创建一个 TextFile(.txt.)，然后将其上传到我的 FTP 服务器。（来自 iPhone）？

我想我必须把我的密码/用户名放到我的 FTP 服务器的代码中，这样安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:50:06.847

您可以使用很多库，例如：

*   [https://github.com/karelia/ConnectionKit](https://github.com/karelia/ConnectionKit)

你也可以使用苹果的这个例子。

> [http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)

请注意，github 目前已关闭以进行维护。

来源：[iPhone FTP 集成](https://stackoverflow.com/questions/4281109/iphone-ftp-integration)

# c++ - 将已经存在的对象从 C++ 返回到 Lua

> ID：14788319
> 
> 赞同：4
> 
> 时间：2013-02-09T12:48:17.347
> 
> 标签：c++, lua

在 C++ 中，假设我有一个类可以创建类似二叉树的结构，我使用它是这样的：

```
CTreeRoot* root = new CTreeRoot(/* whatever */);
CNode* leftNode = root->getLeftNode();
CNode* rightNode = root->getRightNOde();

leftNode->doSomething();
rightNode->doSomething();

// etc 
```

并假设左右节点有自己的左右节点（因此，二叉树）。现在我想把它暴露给 Lua（**不**使用 luabind），所以我可以做同样的事情：

```
local root = treeroot.new(/* whatever */)
local left = root:getLeftNode()
local right = root:getRightNode()

left:doSomething();
right:doSomething(); 
```

我已经完成了大部分工作。但是，对于 getLeftNode() 和 getRightNode() 方法，我很确定我做错了。以下是我在 C++ 中实现 getLeftNode() 的方式，例如：

```
int MyLua::TreeRootGetLeftNode(luaState* L)
{
    CTreeRoot* root = (CTreeRoot*)luaL_checkudata(L, 1, "MyLua.treeroot");
    CNode* leftNode = root->getLeftNode();

    if (leftNode != NULL)
    {
        int size = sizeof(CNode);

        // create a new copy of the CNode object inplace of the memory Lua
        // allocated for us
        new ((CNode*)lua_newuserdata(L,size)) CNode((const CNode&)*leftNode);
        lua_setmetatable(L, "MyLua.treenode");
    }
    else
    {
        lua_pushnil(L);
    }

    return 1;
} 
```

我将 userdata 转换回 CTreeRoot 对象，调用 getLeftNode()，确保它存在，然后（这里是“错误的部分”）创建另一个 userdata 数据对象，并使用复制构造函数复制我想要返回的对象。

这是这种情况的“标准做法”吗？似乎您希望避免创建对象的另一个副本，因为您真正想要的只是对已经存在的对象的引用。

听起来这将是 lightuserdata 的理想场所，因为我不想创建新对象，我很乐意返回已经存在的对象。但是，问题是 lightuserdata 没有元表，所以一旦我把它们拿回来，这些对象对我来说就毫无用处了。基本上，我想做类似的事情：

```
int MyLua::TreeRootGetLeftNode(luaState* L)
{
    CTreeRoot* root = (CTreeRoot*)luaL_checkudata(L, 1, "MyLua.treeroot");
    CNode* leftNode = root->getLeftNode();

    if (leftNode != NULL)
    {
        // "WRONG" CODE BUT SHOWS WHAT I WISH I COULD DO
        lua_pushlightuserdata(L, (void*)leftNode);
        lua_setmetatable(L, "MyLua.treenode");
    }
    else
    {
        lua_pushnil(L);
    }

    return 1;
} 
```

有人可以告诉我如何让我的`MyLua::TreeRootGetLeftNode`方法将已经存在的对象的副本返回给 Lua，以便我可以将该对象用作 Lua 中的“对象”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T19:06:04.087

这里可以执行两个级别的内存优化。在您的第一个功能但效率低下的解决方案中，当用户调用 时`getLeftNode()`，它必须创建一个副本`CNode`以便将其存储在 Lua 用户数据中。此外，每次用户`getLeftNode()`在同一棵树上重复调用时，它都会不断创建新的用户数据来表示，`CNode`即使它之前已经创建过。

在第一级优化中，你可以**记住这个调用**，这样每次用户请求相同的子树时，你可以简单地返回最初创建的用户数据，而不是复制和构造另一个用户数据来表示相同的东西。不过，有 3 种方法可以解决此问题，具体取决于您是要修改 Lua 接口、更改 C++ 实现还是硬着头皮。

*   `MyLua.treenode`userdata 当前包含对象的实际数据`CNode`。然而，这是不幸的，因为这意味着每当你创建一个`CNode`对象时，你必须在创建时立即使用placement new 将它存储到Lua 分配的内存中。可能更好的是在用户数据中简单地存储一个指针（`CNode*`）`MyLua.treenode`。这确实需要您修改 Lua 接口，`MyLua.treenode`以便它现在将其数据视为指向`CNode`对象的指针。

*   如果您希望将`CNode`数据`MyLua.treenode`直接存储在 userdata 中，那么您必须确保在创建 时`CTreeRoot`，它会使用placement new`CNode`从 Lua 每次分配的内存中构造 s（或者您可以使用[分配器模式](http://en.wikipedia.org/wiki/Allocator_%28C++%29)在 C++ 标准库中使用？）。然而，这不太优雅，因为您的`CNode`实现现在取决于 Lua 运行时，我不推荐这样做。

*   如果上述解决方案都不合适，那么您只需在返回子节点时进行复制，尽管您仍然可以通过跟踪是否创建相同的用户数据来提高*在同一节点上重复调用*的效率之前（例如，使用 Lua 表）。

在第二级优化中，您可以通过使复制的子树成为对原始树片段的**弱引用来进一步节省内存。**这样，每当您复制子树时，您只是在创建指向原始树的一部分的指针。或者，如果您希望子树即使在原始树被破坏后仍然存在，您可以使用强引用，但是您将不得不进入引用计数的血腥细节。无论哪种情况，这种优化纯粹是在 C++ 级别上，与 Lua 接口无关，从您的代码来看，我假设您已经在使用弱引用 ( `CNode*`)。

*注意：*除了在内部实现中使用外，最好避免使用轻量级用户数据。原因是轻量级用户数据本质上等同于 C 指针，因此几乎可以指向任何东西。如果您将轻量级用户数据暴露给 Lua 代码，您将不知道轻量级用户数据可能来自哪里或它包含什么类型的数据，使用它会带来安全风险（以及导致程序段错误的可能性）。使用轻量级用户数据的*适当*方法是将其用作存储在 Lua 注册表中的 Lua 查找表的索引，可用于实现前面提到的记忆。

# php - php if elseif 然后呢？

> ID：14788320
> 
> 赞同：-2
> 
> 时间：2013-02-09T12:48:24.247
> 
> 标签：php

这是我的 PHP 代码

我在代码部分的注释中提到的问题点

```
if(isset($_POST['submit']))
{
    if(isset($_POST['rdoption1']))
    {
        $var1 = $_POST["rdoption1"];
    }
    if(isset($_POST['rdoption2']))
    {
        $var2 = $_POST["rdoption2"];
    }
    if(!isset($_POST['rdoption1']))
    {
        $message = "Please select Option1";
    }
    elseif(!isset($_POST['rdoption2']))
    {
        $message = "Please select Option2";
    }
    elseif($_POST['rdoption2'] == "checkSetXY")
    {
        if($_POST["valXLocation"] == "")
        {
            $message = "You forget to enter X value.";
        }
        elseif($_POST["valYLocation"] == "")
        {
            $message = "You forget to enter Y value.";
        }
    } // till here all is good. I get all error messages if anything is left vacant or not clicked on radio button
    elseif(empty($_POST['txtoption3'])) //this is not working //the issue is if i select rdoption1  any option and rdoption2 checkDefault next code logic work.. but next code logic does not work when i click on the radio of checkSetXY and enter x and y values.. It simply does not execute code further..
    {
        $message = "Please enter your name.";
    }
                else
    {               
        //insert into db
                 }
       } 
```

这是带有 PHP 回显的 html 表单在这里我收到消息应该在的地方，但在我选择`checkSetXY`值时没有

```
 <?php if(!empty($message)){ echo $message; } ?>

        <form id="form1" name="form1" method="post" action="form1.php">

          Space portion:
              <input type="radio" name="rdoption1" value="RJ"/>space 1
              <input type="radio" name="rdoption1" value="SM" />space 2

            Pixel Location
                <div class="formText">
                <input type="radio" name="rdoption2" value="checkSetXY"/> Specify Location
                    X: <input type="text" id="locField" name="valXLocation">  
                    Y: <input type="text" id="locField" name="valYLocation"> 
                <input type="radio" name="rdoption2" value="checkDefault"/>Default

                <input type="text" class="input" name="txtoption3">
                <input type="submit" name="submit" value="Submit"> 
           </form> 
```

现在我很困惑为什么不`elseif`考虑`txtoption3`

有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T12:51:23.860

那是行不通的，因为它将始终被设置。所以，使用`empty();`

```
elseif(empty($_POST['txtoption3'])) //this is not working 
```

**解释**

您正在张贴表格`input`。当您发送它而不填写任何内容时，它只会发送此值。`""`

空字符串**不****等于**`null`或未设置。

 **此外，正如[Peter Szymkowski](https://stackoverflow.com/users/994054/peter-szymkowski)所说，请查看[fiddle](http://codepad.viper-7.com/k4jEjT)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:52:48.337

如果它们为空，则设置文本字段。您必须与`empty($_POST['txtoption3'])`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-09T12:52:00.927

这是 if($_POST['rdoption2'] == "checkSetXY") 的 else

我猜这是真的，所以它不会进入其他**

# r - 在 R 中使用拆分、剪切和 for 循环绘制 2 列与天间隔 PNG

> ID：14788322
> 
> 赞同：1
> 
> 时间：2013-02-09T12:48:43.280
> 
> 标签：r, plot

我有以下数据框：

```
myDates <- seq(as.Date("2013/1/1"), as.Date("2013/1/10"), "days");        
x1 <- 1:10
y1 <- 11:20
myTable <- data.frame(myDates, x1, y1) 
```

现在我的目标是将日期划分为 2 天的时间间隔，然后将它们绘制`x1`到`y1`文件`png`中，也许*有一个循环*，这样我最终得到`5 png files`.

我的想法是*将*分成 2 天的`data.frame`间隔，使用`split`和`cut`函数，然后使用 a`for-loop`逐个绘制不同的级别，如下所示：

```
twoDayInt <- seq(as.Date("2013/01/01"), as.Date("2013/01/10"), by = "2 days")
myTableSplit <- split(myTable, cut(myTable$myDates, twoDayInt))
for (j in 1:length(twoDayInt)) {
    fileName <- sprintf("/home/kigode/Desktop/%s_2dayInteval_%02i.png ", "myGraph",j) 
    png(fileName,width=700,height=650)
    # this is where i cant figure out what to put
    plot(myTableSplit$x1[j], myTableSplit$y1[j])
}
dev.off() 
```

现在我被困在 for 循环部分，并要求提供有关如何继续的线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:12:57.560

这里有很多小错误：

*   首先，正如 juba 指出的那样，`dev.off()`应该进入循环内部。
*   其次，`myTableSplit`是一个列表`data.frames`。因此，应该使用`j`as访问元素`myTableSplit[[j]]`。
*   第三，`x1`and`y1`列应该在没有`j`.
*   第四，您的计数器变量`twoDayInt`少了一个条目（5 而不是 6）。这导致不会`myTableSplit`产生`cut`所有 5 个部分，而只有 4 个。因此，作为修复，我已将范围扩展`twoDayInt`到直到`2013/01/12`，然后仅索引中的前 5 个值`for-loop`（尽管这可以以完全不同的方式完成方式，我想你宁愿想要修复你的代码）。

纠正所有这些错误：

```
myDates <- seq(as.Date("2013/1/1"), as.Date("2013/1/10"), "days")
x1 <- 1:10
y1 <- 11:20

myTable <- data.frame(myDates, x1, y1)
# note the end date change here
twoDayInt <- seq(as.Date("2013/01/01"), as.Date("2013/01/12"), by = "2 days")
myTableSplit <- split(myTable, cut(myTable$myDates, twoDayInt))
# index 1:5, not the 6th value of twoDayInt
# you could change this to seq_along(myTableSplit)
for (j in head(seq_along(twoDayInt), -1)) {
    fileName <- sprintf("/home/kigode/Desktop/%s_2dayInteval_%02i.png", "myGraph",j) 
    png(fileName,width=700,height=650);
    # [[.]] indexing for accessing list and $x1 etc.. for the column of data.frame
    plot(myTableSplit[[j]]$x1, myTableSplit[[j]]$y1)
    dev.off() # inside the loop
} 
```

**编辑：**作为替代方案，您打算做的事情可以通过一次使用`lapply`和拾取`data.frame`两个行来直接实现：

```
# here, the number 1,3,5,7,9 are given to idx 1-by-1
lapply(seq(1, nrow(myTable), by=2), function(idx) {
    fileName <- sprintf("/home/kigode/Desktop/%s_2dayInteval_%02i.png", "myGraph",idx) 
    png(fileName,width=700,height=650);
    plot(myTable$x1[idx:(idx+1)], myTable$y1[idx:(idx+1)])
    dev.off()
}) 
```

# silverlight - 服务端的 Silverlight 应用程序 ria 服务列表文件

> ID：14788323
> 
> 赞同：-2
> 
> 时间：2013-02-09T12:48:55.780
> 
> 标签：silverlight, wcf-ria-services, server-side, file-listing

拥有一个 Silverlight 应用程序，旨在为最终用户实施备份恢复机制。

**我必须通过ria services获取驻留在****网站**项目中的特定目录中的文件列表。

 **通过使用哪个对象，我将能够列出**网站**项目特定目录中的文件。

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:44:53.393

您可以使用 Directory 类来枚举服务器上的文件。之后，向您的域服务添加一个方法以将文件名列表返回给 Silverlight 客户端应该是相当简单的。

[http://msdn.microsoft.com/en-us/library/system.io.directory(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.io.directory%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:15:52.427

答案是某种hack。我的灵感来自于我用来将客户端 IP 地址发送到服务的方法。

在 default.aspx 中将此参数添加到您的 silverlight 对象：

```
<param name="initParams" value="clientIP=<%=Request.UserHostAddress%>,serverPath=<%=Server.MapPath(".")%>" /> 
```

在silverlight应用程序中：

```
 public string ClientIP=string.Empty;
    public string ServerPath = string.Empty;

    private void Application_Startup(object sender, StartupEventArgs e)
    {
        this.RootVisual = new MainPage();

        try
        {
            ClientIP = e.InitParams["clientIP"].ToString();
            ServerPath = e.InitParams["serverPath"].ToString();
        }
        catch 
        {
        }
    } 
```

考虑到我将客户端 ip 发送到 xap 文件以记录问题。如果你在乎，你可以省略它。

并在 Silverlight 应用程序中以这种方式调用服务方法：

```
 ser.GetFileList(((App)(App.Current)).ServerPath, FilesListReceived, null); 
```

和服务方面：

```
 public List<string> GetFileList(string baseDirectory)
 {
        var result = new List<BRFile>();

        var files =Directory.EnumerateFiles(  baseDirectory + "\\DBBackup" );

        ....
 } 
```

祝你好运。**

# jquery - jQuery和不同浏览器的问题

> ID：14788330
> 
> 赞同：0
> 
> 时间：2013-02-09T12:49:33.677
> 
> 标签：jquery, html, css

我使用基本的 CSS、HTML 和 jQuery 制作了简单的图库，但它几乎没有错误，而且我不知道哪里出了问题。它在 Firefox 中运行良好，但在其他浏览器中则不行。这是代码

```
$(document).ready(function(){

 var x=0; var lava=0;
  //right arrow
$("#p_sipka").click(function(){
  if(x<9){
          x++; //used as a "position counter"
          lava = parseInt($("#slider").css("left"), 10); //parse a value of slider css.left property into var lava
          lava=lava-800; //substract 800 (pixels) - WORKS FINE IN FIREFOX, THROWS NaN in other browsers
          $("#slider").css("left",lava);  //set new value to slider
         }
  else if(x==9){
                $("#slider").css("left","0px");
                x=0;
               }    
}); 
```

**第一个问题：** 它应该移动`slider`8000px 宽的 div，一个页面是 800px 宽，所以要向左或向右移动画廊，我`slider`通过单击箭头更改 div 的左属性。我试图以某种方式调试它。
**Firefox**首先，值为`x`0 然后，当我单击右箭头（顺便说一下，左箭头在任何浏览器中都可以正常工作）时，值为`x`1，左属性更改为`-800`（不，不是 800px，因为我必须使用parseInt，但它有效）。
**其他浏览器：**它改变左属性的值`x`但不改变左属性。`alert(x)`throws `1`as it should but `left`property throws NaN，并且在 10clicks 后，它应该开始工作，但它仍然会抛出`NaN`.
**第二个问题：**
CSS 过渡。
我想让我的画廊漂亮而生动，所以我使用了 CSS`transition`属性并将其设置为`1second;`. 它工作正常，更改页面需要 1 秒。所以它很好地改变了 left 属性，例如从 800px 到 1600px。但是，当我第二次单击箭头时，第一个动画还没有完成，它会增加或减去另一个 800 像素到那一秒设置的值。例如，我单击，它从 800 变为 1600，但是当我单击左值约为 500 像素时，它增加了 800 像素，左值现在为 1300 像素，我的画廊看起来不像它应该的那样。有什么方法可以阻止我的 jQuery 代码再次运行，直到第一个动画完成？

这是整个代码 [http://jsfiddle.net/QuyjZ/](http://jsfiddle.net/QuyjZ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:56:17.637

第一个问题

* * *

```
 lava = parseInt($("#slider").css("left").replace(/px$/i,""), 10) 
```

* * *

第二个问题...

* * *

```
lava = math.Ceil(parseInt($("#slider").css("left").replace(/px$/i,""), 10)/800)*800 
```

但实际上您应该计算页数并乘以索引 * 800 以获得您的位置

# java - 为什么发出通知很慢？

> ID：14788334
> 
> 赞同：0
> 
> 时间：2013-02-09T12:50:03.190
> 
> 标签：java, android, notifications

我正在为 Android 创建一个应用程序，它没有在市场上列出，所以我制作了自己的更新程序。

Asynctask 在后台运行，检查新版本。当有新版本时，它会创建一个通知。

当通知在状态栏中时，打开状态栏很慢（有时点击通知不起作用）。

这是我的代码：

```
public static void makeNotification(Class<?> newclass,
                                    CharSequence msg,
                                    CharSequence from,
                                    CharSequence message,
                                    int icon, Context c) {
    PendingIntent newintent = PendingIntent.getActivity(c, 0, new Intent(c, newclass), 0);
    NotificationManager nm = (NotificationManager) c.getSystemService(NOTIFICATION_SERVICE);
    Notification notif = new Notification(icon, msg, System.currentTimeMillis());
    notif.setLatestEventInfo(c, from, message, newintent);

    nm.notify(0, notif);
} 
```

这是在主要活动中，并从异步任务中调用。

```
if (Integer.parseInt(xmlroosters.getVersionCode()) > currentversion) {
    new Main().makensNotification(Update.class,
                                  "The app needs an update.",
                                  "Update",
                                  "Click here to update the app.",
                                  R.drawable.app);
} 
```

为什么这么慢？（有时我什至无法打开状态栏）为什么有时甚至无法点击它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:04:24.067

我怀疑你在循环中一遍又一遍地调用它。您正在消耗手机的所有可用 CPU 周期来检查更新；）

考虑检查时间表...

```
new CountDownTimer(1000, 1000) {

     public void onTick(long millisUntilFinished) {
         mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
     }

     public void onFinish() {
         mTextField.setText("done!");
     }
  }.start(); 
```

# mysql - sqljocky - MySql - 与 MySql 的通信

> ID：14788335
> 
> 赞同：1
> 
> 时间：2013-02-09T12:50:08.403
> 
> 标签：mysql, dart

我正在查看用于 MySql 的 sqljocky，并检查它是如何“工作”的。似乎没有任何“C”代码，并且似乎使用套接字。

这是正确的，有知道的人可以为我详细说明一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:30:51.030

我写了 SQLjocky，你是对的 - SQLjocky 中没有 C 代码，它完全用 Dart 编写，并使用套接字与 MySQL 服务器通信。[该协议在http://dev.mysql.com/doc/internals/en/client-server-protocol.html](http://dev.mysql.com/doc/internals/en/client-server-protocol.html)上记录了不同程度的有用性

# html - 在 HTML 表单中 - 如何使用非文本颜色为文本添加下划线？

> ID：14788337
> 
> 赞同：0
> 
> 时间：2013-02-09T12:50:50.023
> 
> 标签：html, css, xhtml

我想在我的表格中有黑色文本，并用红色下划线。使用的问题 `border-bottom: 1px solid red;`是，它不仅强调了文本，还强调了我的输入按钮的整个长度。如果未激活，该按钮既没有边框也没有背景。因此它看起来很奇怪，如果这条线在每边重叠 5px 左右......

```
<form method="POST">
    <input type="hidden" name="cmd" value="doSthFancy" />
    <input type="hidden" name="item_id" value="${item.id}" />
    <input type="submit" value="${item.name} (${item.producer})" class="link" />
</form> 
```

使用 div ( ) 嵌套`<div class="redUnderline"><p class="blackText"> hello world! </p></div>`通常有效，但似乎只是在表单之外。

我不能改用href。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:56:08.670

一个按钮和跨度怎么样？我试过这个：

```
<button style="padding: 20px;"><span style="border-bottom: dotted 1px red;">some text</span></button> 
```

它似乎奏效了。红色虚线边框仅在文本下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:03:09.340

一个`fake button`呢？

[**演示**](http://jsfiddle.net/AliBassam/9cpx5/)

**HTML**

```
<form name="myform">
    <div id="fakeButton" onclick="myform.submit()">
        <span>Click Me</span>
    </div>
</form> 
```

**CSS**

```
#fakeButton
{
    border-style:solid;
    border-width:1px;
    background-color:#808080;
    width:70px;
    text-align:center;
    padding:5px;

}
#fakeButton span
{
    color:black;
    border-bottom-style:solid;
    border-bottom-color:red;
    border-width:1px;
} 
```

# c - 指针和字符串

> ID：14788339
> 
> 赞同：0
> 
> 时间：2013-02-09T12:51:04.393
> 
> 标签：c, string

```
 int main()
    {
        char *ch="girl";
        int x=strlen(ch);
        *ch=ch[x];
        printf("%c",*ch);
        getch();
        return 0;
    } 
```

为什么在将 NULL 值分配给字符指针的过程中会出现运行时错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:10:11.013

代替

```
char *ch = "girl" 
```

和

```
char ch[] = "girl" 
```

前者创建一个指向不可变内存的指针，后者创建一个`char[]`大小合适的数组并用“girl”的字母（包括终止的零字节）初始化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:53:03.297

*更新*：感谢@dreamlax

`"girl"`被隐式声明为 a `char *`。但很可能您的编译器将字符串文字放入一个部分（rostrings）中，该部分稍后将放置在受保护的内存区域中。当您尝试为其分配某些内容时`*ch`，它将访问此受保护（或不取决于您的平台）的内存。

编译器应该警告您有关 char 的信息`*ch = "girl";`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-09T12:55:45.623

和这个

```
int x=strlen(ch); //x=4
*ch=ch[x]; //you are out of bounds of array, because first element is 0, so last is 3 
```

# java - 如何在 Ubuntu Linux 上安装 JDK

> ID：14788345
> 
> 赞同：578
> 
> 时间：2013-02-09T12:51:42.830
> 
> 标签：java, ubuntu

注意：这是一个古老的问题，答案反映了当时的世界。现代 Ubuntu 发行版具有可用的 OpenJDK，可以安装

```
sudo apt install default-jdk 
```

* * *

我正在尝试在[Ubuntu Linux 发行版上安装](https://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29)[Java 开发工具包](https://en.wikipedia.org/wiki/Java_Development_Kit)(JDK) ，但我无法安装它。

在 Ubuntu 上安装它的步骤是什么？

* * *

## 回答 #1

> 赞同：828
> 
> 时间：2013-02-09T13:06:02.360

参考*[问 Ubuntu](https://askubuntu.com/tour)*问题*[如何为 OpenJDK 设置 JAVA_HOME？](https://askubuntu.com/questions/175514/how-to-set-java-home-for-openjdk)*,

如何`Open JDK`在 Ubuntu (Linux) 中安装（Java 开发工具包）？

1.  从 Application Dash打开*终端*`Ctrl`或按+ `Alt`+`T`

2.  更新存储库：

    ```
    sudo add-apt-repository ppa:openjdk-r/ppa  # only Ubuntu 17.4 and earlier
    sudo apt update 
    ```

3.  可选：要搜索 的可用分布`openjdk`，请使用以下命令：

    ```
    apt search openjdk 
    ```

4.  使用以下命令安装适当的版本：

    ```
    sudo apt install openjdk-8-jdk
    sudo apt install openjdk-8-source #this is optional, the jdk source code 
    ```

5.  对于`JAVA_HOME`（环境变量）类型命令，如下所示，在“终端”中使用您的安装路径...

    ```
    export JAVA_HOME=/usr/lib/jvm/java-8-openjdk 
    ```

    （注意：`/usr/lib/jvm/java-8-openjdk`这里只是为了演示而象征性地使用。您应该根据您的安装使用您的路径。）

6.  对于`PATH`（环境变量）类型命令如下所示，在`Terminal`：

    `export PATH=$PATH:$JAVA_HOME/bin`

7.  要检查您的安装：

    `java -version`

* * *

## 回答 #2

> 赞同：208
> 
> 时间：2014-01-02T13:22:21.553

在 2019 年初 Oracle Java 许可证更改之前，以下内容曾经有效。

```
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer 
```

[PPA](https://launchpad.net/~webupd8team/+archive/ubuntu/java)已终止，直到作者找到许可证问题的解决方法。

* * *

## 回答 #3

> 赞同：145
> 
> 时间：2013-02-09T13:55:43.857

您也可以相当容易地安装 Oracle 的 JDK 1.7；例如，这是如何安装 JDK 1.7.0_13；

*   [从 Oracle 的站点](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)下载 JDK 。始终从[http://java.oracle.com](http://java.oracle.com)链接到最新版本的下载。

以 root 身份执行；

```
cd /usr/local
tar xzf <the file you just downloaded> 
```

作为您的普通用户，在 ~/.profile 中添加或更改这两行以指向安装；

```
export JAVA_HOME=/usr/local/jdk1.7.0_13
export PATH=$PATH:$JAVA_HOME/bin 
```

如果是更新，您可能还需要删除`/usr/local`.

注销并再次登录（或执行`. ~/.profile`），一切都应该正常工作。

Oracle JDK 的缺点是它不会像 OpenJDK 那样随系统的其余部分更新，所以如果您正在运行需要它的程序，我主要会考虑它。

* * *

## 回答 #4

> 赞同：79
> 
> 时间：2013-09-24T03:43:46.240

如果您已经下载了 ZIP 文件，请按照以下步骤操作。

运行以下命令来解压缩您的文件。

```
tar -xvf ~/Downloads/jdk-7u3-linux-i586.tar.gz
sudo mkdir -p /usr/lib/jvm/jdk1.7.0
sudo mv jdk1.7.0_03/* /usr/lib/jvm/jdk1.7.0/
sudo update-alternatives --install "/usr/bin/java" "java" "/usr/lib/jvm/jdk1.7.0/bin/java" 1
sudo update-alternatives --install "/usr/bin/javac" "javac" "/usr/lib/jvm/jdk1.7.0/bin/javac" 1
sudo update-alternatives --install "/usr/bin/javaws" "javaws" "/usr/lib/jvm/jdk1.7.0/bin/javaws" 1 
```

安装完成后，设置环境变量如下。

编辑文件中的系统路径`/etc/profile`：

```
sudo gedit /etc/profile 
```

在末尾添加以下行。

```
JAVA_HOME=/usr/lib/jvm/jdk1.7.0
PATH=$PATH:$HOME/bin:$JAVA_HOME/bin
export JAVA_HOME
export PATH 
```

来源：http: [//javaandme.com/](http://javaandme.com/)

* * *

## 回答 #5

> 赞同：62
> 
> 时间：2015-03-17T17:38:16.257

> **注意：** WebUpd8 团队的 PPA 自 2019 年 4 月 16 日起已停止使用。因此，此 PPA 没有任何 Java 文件。更多信息可以在[PPA 的 Launchpad 页面上](https://launchpad.net/%7Ewebupd8team/+archive/ubuntu/java)找到。因此，由于历史原因，以下方法不再有效并存在。

如果要安装最新的 JDK 1.8，请使用 webupd8team PPA。

在系统中添加存储库：

```
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update 
```

您现在可以使用以下命令安装 Oracle Java 8：

```
sudo apt-get install oracle-java8-installer 
```

这个 ppa 存储库还提供了一个包来自动设置环境变量。只需输入：

```
sudo apt-get install oracle-java8-set-default 
```

* * *

## 回答 #6

> 赞同：34
> 
> 时间：2015-03-04T20:04:43.393

OpenJDK 在大多数情况下都可以，但某些银行客户端应用程序（我的情况）可能需要 Oracle JDK - 我不能使用 OpenJDK。

我很惊讶在**Ubuntu 12.10+**中对于 Oracle 的 JDK 的默认方法（没有外部 PPA 的存储库）没有任何答案 - 我将尝试描述它。

*   安装[JavaPackage](https://wiki.debian.org/JavaPackage)： `sudo apt-get install java-package`
*   [从Oracle 下载页面](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载 Oracle JDK
*   从下载的`.tar.gz`档案制作一个 Debian 包： `make-jpkg jdk-YOUR_VERSION-linux-PLATFORM.tar.gz` 这个命令将产生一个`.deb`包。
*   以您喜欢的方式安装软件包（例如，`sudo dpkg -i oracle-java8-jdk_8u40_amd64.deb`）

这是 Debian 开发人员官方支持的安装 Oracle JDK 的方式，我想它非常简单。

* * *

## 回答 #7

> 赞同：29
> 
> 时间：2016-04-23T00:22:07.407

> **注意：** WebUpd8 团队的 PPA 自 2019 年 4 月 16 日起已停止使用。因此，此 PPA 没有任何 Java 文件。更多信息可以在[PPA 的 Launchpad 页面上](https://launchpad.net/%7Ewebupd8team/+archive/ubuntu/java)找到。因此，由于历史原因，以下方法不再有效并存在。

**在 Ubuntu 上安装 Java 8**

首先，您需要在系统中添加 webupd8team Java PPA 存储库，并使用以下命令集安装 Oracle Java 8。

```
$ sudo add-apt-repository ppa:webupd8team/java
$ sudo apt-get update
$ sudo apt-get install oracle-java8-installer 
```

**验证已安装的 Java 版本**

使用上述步骤成功安装 Oracle Java 后，使用以下命令验证安装的版本。

```
$ java -version

java version "1.8.0_77"
Java(TM) SE Runtime Environment (build 1.8.0_77-b03)
Java HotSpot(TM) 64-Bit Server VM (build 25.77-b03, mixed mode) 
```

###配置Java环境

在 Webupd8 ppa 存储库中还提供了一个包来设置环境变量，使用以下命令安装这个包。

```
$ sudo apt-get install oracle-java8-set-default 
```

[参考](http://tecadmin.net/install-oracle-java-8-jdk-8-ubuntu-via-ppa/)

* * *

## 回答 #8

> 赞同：25
> 
> 时间：2014-12-22T16:10:08.863

只需运行：

```
sudo apt-get install default-jdk 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2013-02-09T12:54:38.503

[来自 Ubuntu 网站的 Wiki：](https://wiki.ubuntu.com/LucidLynx/ReleaseNotes#Sun%20Java%20moved%20to%20the%20Partner%20repository)

对于**Ubuntu 10.04 LTS**，sun-java6 软件包已从 Ubuntu 存档的 Multiverse 部分中删除。建议您改用 openjdk-6。

*如果您无法从专有的 Sun JDK/JRE 切换到 OpenJDK，您可以从 Canonical Partner Repository 安装 sun-java6 包。您可以通过命令行将系统配置为使用此存储库：*

```
 sudo add-apt-repository "deb http://archive.canonical.com/ lucid partner"
 sudo apt-get update   
 sudo apt-get install sun-java6-jre sun-java6-plugin
 sudo update-alternatives --config java 
```

对于**Ubuntu 10.10**，sun-java6 软件包已从 Ubuntu 存档的 Multiverse 部分中删除。建议您改用 openjdk-6。

*如果您无法从专有的 Sun JDK/JRE 切换到 OpenJDK，您可以从 Canonical Partner Repository 安装 sun-java6 包。您可以通过命令行将系统配置为使用此存储库：*

```
 sudo add-apt-repository "deb http://archive.canonical.com/ maverick partner"
 sudo apt-get update   
 sudo apt-get install sun-java6-jre sun-java6-plugin
 sudo update-alternatives --config java 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2015-12-03T17:21:36.373

### 使用 PPA（已过时）

> **注意：** WebUpd8 团队的 PPA 自 2019 年 4 月 16 日起已停止使用。因此，此 PPA 没有任何 Java 文件。更多信息可以在[PPA 的 Launchpad 页面上](https://launchpad.net/%7Ewebupd8team/+archive/ubuntu/java)找到。因此，由于历史原因，以下方法不再有效并存在。

您可以使用[WebUpd8 PPA](https://launchpad.net/%7Ewebupd8team/+archive/ubuntu/java)（这将从 Oracle 下载所需的文件并安装 JDK 8）：

```
sudo apt-add-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java8-installer 
```

[将 PPA 添加到我的系统中是否安全？需要注意哪些“危险信号”？](https://askubuntu.com/questions/35629/are-ppas-safe-to-add-to-my-system-and-what-are-some-red-flags-to-watch-out-fo)

还要确保您的 JAVA_HOME 变量已设置为：

```
/usr/lib/jvm/java-8-oracle 
```

### 手动安装

Oracle 提供的 tar.gz 没有实际的安装过程。您只需将这些文件提取到您想要的位置并将它们添加到您的路径中。所以过程如下：

`.tar.gz`从[Oracle](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)下载一个（这里我将使用 jdk-8u20-linux-x64.tar.gz）；将其提取到某个地方；

将提取的文件夹移动到`/usr/lib/jvm`. 这不是必需的，但它是安装 Java 运行时软件的地方

```
sudo mv /path/to/jdk1.8.0_20 /usr/lib/jvm/oracle_jdk8 
```

创建一个`/etc/profile.d/oraclejdk.sh`包含以下内容的文件（调整路径以反映您存储 JDK 的路径）：

```
export J2SDKDIR=/usr/lib/jvm/oracle_jdk8
export J2REDIR=/usr/lib/jvm/oracle_jdk8/jre
export PATH=$PATH:/usr/lib/jvm/oracle_jdk8/bin:/usr/lib/jvm/oracle_jdk8/db/bin:/usr/lib/jvm/oracle_jdk8/jre/bin
export JAVA_HOME=/usr/lib/jvm/oracle_jdk8
export DERBY_HOME=/usr/lib/jvm/oracle_jdk8/db 
```

完毕！这些路径只有在您注销或重新启动后才会被识别，因此如果您想立即使用它们，请运行`source /etc/profile.d/oraclejdk.sh`。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2018-07-05T22:36:05.283

在**Ubuntu 18.04**中，我们可以像安装普通软件包一样安装 java，而无需使用外部存储库

只需运行此命令

```
sudo apt install openjdk-8-jdk 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2019-10-14T16:30:33.757

**安装在 ubuntu 18.04**

我的解决方法是，

```
$ sudo apt update 
```

安装 OpenJDK 8：

```
$ sudo apt install openjdk-8-jdk 
```

通过运行以下将打印 Java 版本的命令来验证 Java 安装：

```
$ java -version 
```

输出应如下所示：

输出：

```
openjdk version "1.8.0_191"
OpenJDK Runtime Environment (build 1.8.0_191-8u191-b12-2ubuntu0.18.04.1-b12)
OpenJDK 64-Bit Server VM (build 25.191-b12, mixed mode) 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2017-01-20T07:15:18.313

您可以使用`sudo apt-get install default-jdk`终端命令安装*默认的 JDK*版本。

在安装 Java 之前，键入`sudo apt-get update`终端命令，然后键入该`install terminal`命令。[您可以从这里](https://progtpoint.blogspot.com/2017/01/tutorial-12-install-java-in-ubuntu.html)获得更多信息。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2013-02-09T12:54:38.003

看看[OpenJDK](https://en.wikipedia.org/wiki/OpenJDK)。它是 Linux 上的标准[JVM](http://en.wikipedia.org/wiki/Java_virtual_machine)实现。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2013-10-02T15:34:30.253

我推荐[JavaPackage](https://wiki.debian.org/JavaPackage)。

这很简单。您只需按照说明从 Oracle tar.gz 文件创建 .deb 包。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2015-11-19T08:25:07.510

您可以通过以下方式安装`apt-get`：

```
sudo add-apt-repository ppa:linuxuprising/java
sudo apt-get update
sudo apt-get install oracle-java11-installer 
```

之后，不要忘记检查版本：

```
java -version 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2017-01-11T11:08:28.803

最好的办法是安装默认 Java，直到不需要特定的 Java 版本。在此之前，执行*java -version*检查是否尚未安装 Java。

```
sudo apt-get update  
sudo apt-get install default-jre  
sudo apt-get install default-jdk 
```

这就是安装**Java**所需的一切。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2013-09-13T10:22:32.827

sun-java6-jdk 是 oracle-java8-installer 或 oracle-java7-installer 或 oracle-java7-installer 提供的一个虚拟包。

```
sudo apt-get install oracle-java8-installer 
```

会给你 sun-java6-jdk。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2018-06-14T11:19:28.007

[按照这个视频](https://youtu.be/4RJ60fqeTN4)，我已经在 Ubuntu 18.04 LTS 上成功安装了 JDK 10 。

我正在复制视频描述的摘录。

只需打开终端并给出以下命令：

用于 Java 安装 (PPA)

```
sudo add-apt-repository ppa:linuxuprising/java
sudo apt-get update
sudo apt-get install oracle-java10-installer 
```

用于设置环境变量（使 java10 默认）

```
sudo apt-get install oracle-java10-set-default 
```

在 Ubuntu 16.04、Linux Mint、Debian 和其他相关 Linux 系统上可以按照相同的程序安装 JDK 10。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2019-04-09T18:29:10.263

您可以使用[SDKMan](https://sdkman.io)，

```
curl -s "https://get.sdkman.io" | bash
source "~/.sdkman/bin/sdkman-init.sh"
sdk install java 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2016-02-05T17:53:35.383

如果您想安装 Oracle JDK，您可以[使用这个为您完成所有工作的自动化脚本](https://github.com/AdamScheller/UbuntuJavaInstaller)。

[作者的博客上](http://adamscheller.com/linux/how-to-install-java-on-ubuntu/)有详细的使用说明。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2016-06-13T22:42:12.223

安装 Oracle 的 Java JDK 要求您在安装开始前接受 Oracle 许可证。这只需要一次。如果由于某种原因您需要自动安装，您可以运行以下命令进行安装，无需用户交互，例如对于自动脚本很有用。

```
sudo add-apt-repository -y ppa:webupd8team/java
sudo apt-get update
echo debconf shared/accepted-oracle-license-v1-1 select true | sudo debconf-set-selections
echo debconf shared/accepted-oracle-license-v1-1 seen true | sudo debconf-set-selections
sudo apt-get -y install oracle-java8-installer
java -version 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2019-01-28T07:32:49.453

尝试使用 SDKMAN！包管理器 - [https://sdkman.io/install](https://sdkman.io/install) 现在它是在任何 Linux 发行版上安装许多基于 JVM 的 SDK、工具和框架的最简单方法。

安装后，运行以下命令查看所有可用的 Java 发行版：

```
sdk list java 
```

选择您需要的发行版并安装它：

```
sdk install java <version> 
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2019-04-28T08:26:19.000

1.  安装合适版本的 OpenJDK

    `JAVA_VERSION=8 sudo add-apt-repository -y ppa:openjdk-r/ppa sudo apt-get update sudo apt-get -qq install -y openjdk-$JAVA_VERSION-jdk`

2.  在 /etc/profile.d/jdk.sh 中设置环境变量

    `JAVA_HOME=/usr/lib/jvm/java-$JAVA_VERSION-openjdk-amd64 echo "export JAVA_HOME=$JAVA_HOME" | sudo tee -a /etc/profile.d/jdk.sh echo "export J2SDKDIR=$JAVA_HOME" | sudo tee -a /etc/profile.d/jdk.sh echo "export J2REDIR=$JAVA_HOME/jre" | sudo tee -a /etc/profile.d/jdk.sh echo "export PATH=$PATH:$JAVA_HOME/bin:$J2REDIR/bin" | sudo tee -a /etc/profile.d/jdk.sh`

3.  检查您的安装

    `/bin/bash /etc/profile.d/jdk.sh java -version echo $JAVA_HOME echo $J2REDIR echo $PATH`

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2016-05-02T09:06:00.370

你可以使用[oraj](https://github.com/neurobin/oraji)。它可以从 oracle java (.tar.gz) 安装/卸载 JDK 或 JRE。

1.  安装运行`sudo oraji '/path/to/the/jdk_or_jre_archive'`
2.  要卸载运行`oraji -u`并确认版本号。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-05-21T10:20:12.237

我有同样的问题，没有任何评论对我有用。最后，我注意到我禁用了我的更新。当我重新激活它时， sudo apt-get update 工作正常，问题得到解决。（系统设置中的更新>软件和更新>更新选项卡在这里我勾选了重要更新和推荐更新的两个第一个选项）。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2017-09-21T05:44:24.137

如果您不想安装 OpenJDK，请尝试此操作：*[适用于 Ubuntu 的 JDK Source Installer](https://github.com/shahriyar1369/JDK_Source_installer_for_ubuntu)*

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2021-08-21T13:04:57.783

**步骤 01：** **下载 JDK**

从oracle官网下载所需版本的JDK：【Oracle官网下载JDK】：[https ://www.oracle.com/in/java/technologies/javase-downloads.html](https://www.oracle.com/in/java/technologies/javase-downloads.html)

```
 e.i - jdk-11.0.12_linux-x64_bin.tar.gz 
```

**步骤02：** **安装：**

a) 使用以下命令提取下载的文件

```
sudo -tar -vzxf jdk-11.0.12_linux-x64_bin.tar.gz 
```

b)在**usr/lib**目录中创建一个名为**java**的目录

 **```
mkdir java 
```

c) 将提取的**jdk-11.0.12**目录移动到新创建的目录**java中**

```
sudo mv jdk-11.0.12 /usr/lib/java 
```

**步骤 03：**

a）一一执行以下命令

```
sudo update-alternative -install /usr/lib/java java /usr/lib/java/jdk-11.0.12/bin/java 1

sudo update-alternative -install /usr/lib/javac javac /usr/lib/java/jdk-11.0.12/bin/javac 1 
```

**步骤04：安装验证：**

使用以下命令验证安装

```
 java --version
 javac --version 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-09-18T00:00:28.193

在**Ubuntu1604 中**，我遇到了“没有安装候选错误”。按照以下步骤帮助我安装。

-sudo apt-get update -sudo apt-get upgrade -apt-get install software-properties-common -sudo add-apt-repository ppa:webupd8team/java -apt-get update -sudo apt install oracle-java8-installer

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2018-12-17T03:23:53.003

在 Debian 上你可以试试

```
apt-get install default-jdk 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-03-24T15:13:37.200

我只是在 Ubuntu 虚拟机上执行此操作。这就是我的做法。

Ubuntu 安装了 Java JRE，但没有安装 JDK。Java -version 提供 JRE，而不是 JDK。运行 javac -版本。如果未安装 JDK，则会出现错误。在终端中运行以下命令以获取 JDK `sudo apt install default-jdk`：. 现在，运行`which javac`。输出应该是`/usr/bin/javac`. 现在已经安装好了。IntelliJ 不会让我们使用这个路径，因为它是 javac 的二进制文件。转到项目结构 > 项目设置 > 项目。在上面写着“Project SDK”的地方，添加一个 JDK。然后转到 /usr/lib/jvm。现在您应该可以在 IntellIJ 中编译 java 项目了。

您可能必须编辑配置，以便 IntelliJ 知道在哪里查找您的主类。转到运行 > 编辑配置。为 Main 类添加主类，并将项目的根添加为工作目录。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2020-01-29T06:48:03.727

请按照此步骤安装 oracle JDK

1.  [从Oracle](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)下载 oracle JDK（例如 Java 8 用于 64 位机器**jdk-8u241-linux-x64.tar.gz**）
2.  在主目录或首选位置提取 *.tar.gz
3.  设置环境变量 例如打开终端类型**sudo gedit ~/.bashrc** 在 .bashrc 文件末尾添加以下行

    **export JAVA_HOME=/opt/jdk1.8.0_241** #添加自己的jdk位置

    **导出 PATH=$PATH:$JAVA_HOME/bin**

4.  保存并退出
5.  最后 source .bashrc 例如**source ~/.bashrc**
6.  现在打开一个新的终端类型**jdk -version**

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2020-03-03T11:07:50.813

如果您想使用 Java 10 以外的 AdoptOpenJDK 发行版，可以使用[AdoptOpenJDK 网站](https://adoptopenjdk.net/installation.html#linux-pkg)上描述的官方存储库（也适用于 Debian）：

> 1.  通过运行以下命令导入官方 AdoptOpenJDK GPG 密钥：
>     
>     
>     
>     ```
>     wget -qO - https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public | sudo apt-key add - 
>     ```
>     
>     
> 2.  通过运行以下命令导入 AdoptOpenJDK DEB 存储库：
>     
>     
>     
>     ```
>     sudo add-apt-repository --yes https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/ 
>     ```
>     
>     
>     
>     如果您收到命令未找到错误，请尝试运行：
>     
>     
>     
>     ```
>     apt-get install -y software-properties-common 
>     ```
>     
>     
>     
>     然后重复第一个命令。
>     
>     
> 3.  使用 apt-get update 刷新你的包列表，然后安装你选择的 AdoptOpenJDK 包。例如，要使用 HotSpot VM 安装 OpenJDK 8，请运行：
>     
>     
>     
>     ```
>     apt-get install <adoptopenjdk-8-hotspot> 
>     ```

[您可以在https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/pool/main/a/](https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/pool/main/a/)下找到可用的包名称/Java 版本

* * *

## 回答 #34

> 赞同：-4
> 
> 时间：2016-08-22T06:50:33.490

执行这一系列命令（插入、更新和安装），一切就绪。

1.  首先添加存储库：

    ```
    sudo add-apt-repository ppa:webupd8team/java 
    ```

2.  更新：

    ```
    sudo apt-get update 
    ```

3.  安装：

    ```
    sudo apt-get install oracle-java7-installer 
    ```**

# c++ - 创建的对象没有被保存。通过引用传递

> ID：14788354
> 
> 赞同：0
> 
> 时间：2013-02-09T12:52:43.130
> 
> 标签：c++, oop, instance

在此示例中，我正在尝试将 Player 添加到工厂。我对指针相当陌生，不明白我做错了什么。

在我的工厂课上，我有：

```
void Factory::addPlayer(const Player& player)
{
    m_player.push_back(player);
} 
```

并在程序中我试图这样添加它：

```
Factory* fact = new Factory();

Player* c = new Player(1, 2, 100, "Name");

fact->addPlayer(*c); 
```

但是，当我调试时，'c' 实例没有改变。

我没有正确引用吗？如果有人可以提供帮助或指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:54:35.353

发生的情况是 an`std::vector`保存值，而不是引用或指针。所以当你这样做时：

```
 m_player.push_back(player); 
```

`Player`向量存储它自己的传递给它的副本。完成此操作后，对向量元素采取的任何操作都不会影响`c`指向的任何内容。

# php - MySQL选择JOIN多个表

> ID：14788355
> 
> 赞同：0
> 
> 时间：2013-02-09T12:52:44.127
> 
> 标签：php, mysql, select, join, union-all

我基本上有两组表。“道具_”和“可用_”。每个约。我使用 UNION ALL 加入的 4 个表。

我需要选择具有必要位置和睡眠的属性，这些属性未出现在特定日期范围的可用性表中。

```
property tables... 'props_01', 'props_02', 'props_03', 'props_04'
   id    code         location    sleeps
   1     7A06E91875   devon       2
   2     440ac2664c   cornwall    4
   5     0474d4882b   devon       2

availability tables... 'avail_01', 'avail_02', 'avail_03', 'avail_04'
   id    prop_code     date
   1     440ac2664c    20130208
   2     440ac2664c    20130209
   3     440ac2664c    20130210
   4     440ac2664c    20130211
   5     440ac2664c    20130212 
```

这些**可用性表包含所有预订日期**。所以我希望只从他们没有指定日期范围的可用性记录的属性表中进行选择。这就是我想要查询它的方式......

```
(avail.date != '20130209' AND avail.date != '20130210' AND avail.date != '20130211' AND avail.date != '20130212' AND avail.date != '20130213') OR (avail.date != '20130210' AND avail.date != '20130211' AND avail.date != '20130212' AND avail.date != '20130213' AND avail.date != '20130214') 
```

我还需要对位置和睡眠的属性表应用过滤器。

除了包括可用性之外，我所做的所有事情的查询如下，这很好用，但我不知道**如何最好地修改它以查询可用性表**......

```
SELECT prop.* FROM (SELECT * FROM `props_01` UNION ALL SELECT * FROM `props_02` UNION ALL SELECT * FROM `props_03` UNION ALL SELECT * FROM `props_04`) prop WHERE prop.location='Devon' AND prop.sleeps>='4' ORDER BY prop.sleeps ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T06:10:45.460

**加入 3 个表：Table1、Table2、Table3**

SELECT * FROM table1 LEFT JOIN table2 ON table1.id=table2.id LEFT JOIN table3 ON table2.id=table3.id;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:58:05.153

如果您要查找另一个表中不存在的行，则需要左连接。有关更多信息，请参见：

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

[http://dev.mysql.com/doc/refman/5.0/en/left-join-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/left-join-optimization.html)

# wpf - 文本框随着 WPF 中的数据增长

> ID：14788358
> 
> 赞同：1
> 
> 时间：2013-02-09T12:52:49.707
> 
> 标签：wpf, textbox, wpf-controls

从过去的 3-4 天开始，我正在尝试学习 WPF。作为示例 xaml，我尝试创建一个网格并以文本块和文本框的形式在其中放置一些控件。

我面临的问题是，当我继续在文本框中输入文本时，我的文本框宽度不断增加，这反过来又会破坏我的整个表单。

谁能帮我解决这个问题。

这是我的示例 XAML 代码，其中包含文本框：

```
 <Grid>
<Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="2*"/>

        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
  <TextBox  Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2"  FontSize="25"  Margin="5 30 130 0"/>
        <TextBox  Grid.Row="2" FontSize="25" Grid.Column="1" Grid.ColumnSpan="2" Margin="5 30 130 0"/>
        <TextBox  Grid.Row="3" FontSize="25" Grid.Column="1" Margin="5 30 160 0"/>
        <TextBox  Grid.Row="5" FontSize="25" Grid.Column="1" Grid.ColumnSpan="2" Margin="5 30 130 0"/>
</Grid> 
```

请任何人在这方面帮助我。将不胜感激各种帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:56:56.700

您可以使用`AcceptsReturn`和`TextWrapping`属性来允许换行符并在文本大小超过相应`TextBox`宽度时允许文本换行`TextBox`

例如

```
<TextBox TextWrapping="Wrap" AcceptsReturn="true" /> 
```

`AcceptsReturn`确保用户可以按 return 而不是 CTRL + Return 在文本框中放置换行符。否则，文本框将失去焦点，并按照标准行为按下默认按钮。（我认为如果没有默认按钮，无论如何都会插入换行符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:25:51.250

你确定 TextBox 变大了还是只是填满了文本？
为了测试，在其上放置一个边框画笔和 Horizo​​ntalContentAlignment="Stretch"。
如果要限制宽度，请设置宽度，否则它将使用所有可用空间。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="40"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <TextBox Text="text" BorderBrush="Red" BorderThickness="2" HorizontalContentAlignment="Stretch" />
</Grid> 
```

# java - 如何以及如何设置待处理的 Intent ID

> ID：14788360
> 
> 赞同：2
> 
> 时间：2013-02-09T12:52:55.467
> 
> 标签：java, android, android-pendingintent

我的应用程序能够允许用户设置约会。这还包括一个警报，该警报通过在设置的指定约会日期的未决意图触发。当设置的日期到达时，一条祝酒消息显示今天有约会。

用户还可以编辑他们的约会，这包括能够打开和关闭警报（通过使用切换按钮）我希望能够在他们关闭警报时取消挂起的意图。这显然意味着我需要依赖一个唯一的 ID。

这是我的主要问题：

**设置ID的最佳方法是什么？我没有可以设置的真正的“唯一”值，我看到人们将“当前时间”设置为 ID，然后将其添加为 EXTRA，但如果我有两个完全相同的时间待定意图警报怎么办？**

当我创建一个新约会时，这会自动增加 ID，并将真正设置一个未“绑定”到该用户的待定意图警报。

这是我当前的待处理意图代码：

```
AlarmManager dateSet = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(this, DateAlarm.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);
    dateSet.set(AlarmManager.RTC_WAKEUP, setDate.getTime(), pendingIntent); 
```

报警类：

```
package com.example.flybase2;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.Gravity;
import android.widget.Toast;

public class DateAlarm extends Activity {

Context context;
@SuppressWarnings("static-access")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    context = this;
    Toast newToast = new Toast(getApplicationContext());
    newToast.setGravity(Gravity.FILL, 0, 0);
     newToast.makeText(context, "Appointment is today", Toast.LENGTH_LONG).show();
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T12:58:12.240

生成一个随机数并将其用作您的唯一 ID。将该号码存储在 SharePreferences 或 sqlite 数据库中。这也为在设备重启之间保留警报的能力提供了种子。

或者 System.currentTimeMillis() 真的应该给你你需要的东西。您很难获得完全相同的 2 个毫秒的 ID。

# c++ - 具有结构的嵌套类的范围

> ID：14788362
> 
> 赞同：0
> 
> 时间：2013-02-09T12:53:04.527
> 
> 标签：c++, class, scope

有人可以解释一下`int A`and`int B`在`void func()`and in的范围`void func1()`吗？

```
class C {
  struct S {
    int A;
  };

  int B

public :
  void func(){
  }
  void func1(){
  }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:58:16.047

不确定我是否完全理解您的要求，但如果我这样做，我会尽力回答。

函数`func()`和`func1()`是 的成员函数`C`，因此它们在此处对完全相同的名称具有相同的访问权限。变量`B`作为 的成员变量`C`，可以直接引用`func()`而`func1()`无需使用任何命名空间限定它。

`A`另一方面，变量作为 的公共、非静态成员变量，需要在访问之前`S`先实例化一个类型的对象，如下所示：`S`

```
void func()
{
    S s;
    B = 0; // Directly accessible, member variable of `C`
    s.A = B; // A is a non-static member variable of `S`, requires an object
    A == 3; // ERROR! A is not a member variable of C
} 
```

# asp.net - ASP.NET Membership and Roles

> ID：14788364
> 
> 赞同：0
> 
> 时间：2013-02-09T12:53:19.727
> 
> 标签：asp.net, asp.net-membership, asp.net-roles

I am trying to use ASP.NET membership and roles for my project and have been going through different articles, posts and SO to check if using it is a better option for me rather than hand coding the whole functionality from scratch. Yet after days of search I haven't yet figured out if its even possible for the following scenario.

1.  The users of my application have roles and they belong to a company as well. So, I would need to retrieve the company id for the user as soon as he/she logs in as I would need the company id on different pages to show the user his/her company specific data.
2.  Roles should be categorized. (i-e Application Admin, Company Admin, Company Users (Managers, front-desk etc). So when company admin assign roles to users, he/she could only assign Manager, front-desk etc and Not Application Admin. (I thought about adding another field to Roles table in order to categorize the roles but I don't know whether that would be a good or bad thing to do and how it will modify the behavior of membership controls)

Not exactly a question but I am rather seeking advice whether I should go for the ASP.NET Membership in this scenario

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:05:55.353

writing from scratch is not recommended for what you want . you can handle your requirements using [asp.net membership](http://www.4guysfromrolla.com/articles/120705-1.aspx) .

1- you can save user information in their profiles (company , name , ... ) or create another table to map users to companies.

2- for your second question ,you can create a separate class or method to handle the access.

something like below :

```
public IList<string> GetRolesUserCanAssign(string userRole)
{
    var roles  = new List<string>();

    if(userRole == "Manager" || userRole == "FrontDesk")
    {
        return roles;
    }

    roles.AddRange(new[]{"Manager" , "FrontDesk"});

    if(userRole == "CompanyAdmin")
    {
        return roles;
    }

    if(userRole == "ApplicationAdmin")
    {
        roles.Add("CompanyAdmin");
    }

    return roles;
} 
```

# apache - 将 htaccess 从 xyz.com/?type=test&s=test2 重写为 xyz.com/test/test2

> ID：14788365
> 
> 赞同：0
> 
> 时间：2013-02-09T12:53:28.973
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我需要的是搜索的东西，所以 test2 是可变的，也需要改变链接。我怎么能做到这一点`.htaccess`？

这就是我想做的。

`RewriteRule ^xyz.com/test/(.*)$ ^xyz.com/?type=test&s=$1 [NC,L]`

任何想法？谢谢！

我的WordPress `.htacess`：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

RewriteRule ^([^/]+)/(.*)$ index.php?type=test&s=$1 [NC,L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:22:10.770

你会看到这样的东西：

```
RewriteRule ^([^/]+)/(.*)$ ?type=$1&s=$2 [NC,L] 
```

不过，不确定它是否可以在没有文件名的情况下工作。如果是这种情况，请重写处理请求的文件，例如：

```
RewriteRule ^([^/]+)/(.*)$ index.php?type=$1&s=$2 [NC,L] 
```

您没有在 RewriteRule 匹配模式中包含域名。

# java - 如何在lwjgl中做全屏？

> ID：14788366
> 
> 赞同：0
> 
> 时间：2013-02-09T12:53:31.690
> 
> 标签：java, fullscreen, lwjgl

当我执行以下代码时，我确实实现了全屏但没有装饰，这意味着它的顶部没有带有退出和最小化按钮的横幅。另外，在让任务管理器关闭它后，程序将我的屏幕分辨率更改为 800、600，所以我必须自己改回来。你能告诉我对下面的代码有什么改变吗？

```
public static void main(String args[]) {
    AppGameContainer appgc;
    try{
        appgc = new AppGameContainer(new Game(gamename));
        appgc.setDisplayMode(800, 600, true);
        appgc.setFullscreen(true);
        appgc.start();

    }catch(SlickException e){
        e.printStackTrace();
    }

} 
```

# c# - Kinect 截图叠加图片

> ID：14788368
> 
> 赞同：0
> 
> 时间：2013-02-09T12:54:01.250
> 
> 标签：c#, kinect

我目前正在将 Kinect SDK 1.6 用于需要应用程序将图片覆盖在骨架的特定点上的项目。我想添加对结果进行截图的功能，但我发现的所有方法都只是对 Kinect 输出进行截图，而不是对添加的额外图像进行截图。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T21:14:53.193

您可以将[RenderTargetBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)视为一种可能的解决方案。您可以将我们所有的叠加层渲染到同一个位图目标，同时从 Kinect 的摄像头捕获帧。

上面的链接中给出了保存视觉对象的示例。

# jquery - 有没有办法在用户导航到另一个页面时保持“正在加载...”动画运行？

> ID：14788371
> 
> 赞同：3
> 
> 时间：2013-02-09T12:54:36.320
> 
> 标签：jquery, html, cross-browser

这个问题有点棘手，因为我不完全知道它属于哪个类别/语言/技术/领域。

有时我们会将我们的用户转发给另一个提交和处理表单。表单提交是通过[jQuery Form 插件](http://malsup.com/jquery/form/)的`.ajaxSubmit()`调用完成的，为用户提供反馈，如果发生任何错误，可以顺利纠正错误。

```
$('#form').submit(function(e) {
    e.preventDefault();
    var loading = $('<img src="loading.gif" />');
    $('#form').append(loading);
    $('#form').ajaxSubmit({
        dataType: 'json',
        success: function(d) {
            if (d.errors) {
                loading.remove();
                // Handle the errors
            } else {
                // Forward the user to the next address, given by the server
                document.location = d.forward_to;
            }
        }
    });
}); 
```

当用户转到下一页时，loading.gif 动画会停止。这使用户感到困惑。

我可以确认这至少适用于 Firefox 和 Chrome。**有没有办法在用户导航到下一页时**（在呈现下一页之前）保持加载指示器运行？

停止动画可能是（有意或无意的）浏览器应用程序本身的行为，因此 Web 开发人员完全无法控制。但是，我找不到任何可以证实它的材料，因此仍在寻找一些解决方案 - 或替代方法来做指标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T16:47:55.943

[Beetroot-Beetroot](https://stackoverflow.com/users/1142252/beetroot-beetroot)在问题评论中回答了我的问题：您*无法*在此级别控制浏览器行为。

# sql-server - SQL Server 中流畅的 nhibernate TriggerIdentity 问题？

> ID：14788376
> 
> 赞同：0
> 
> 时间：2013-02-09T12:54:44.463
> 
> 标签：sql-server, triggers, fluent-nhibernate, identity-column

当我尝试将数据插入到 SQL Server 中的表中时，该表的`ID`列规范如下，我收到错误，

> *无法在 RowID 列中插入 NULL*

即使我已经编写了插入触发器来指定`RowID`列的值。

```
mapping.Id(x => x.Id, "RowID").GeneratedBy.TriggerIdentity(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:34:43.083

您正在使用 FOR 触发器；这是指定 AFTER 触发器的另一种方式。您需要将其切换为“INSTEAD OF”触发器。请参阅此[网页](http://msdn.microsoft.com/en-us/library/ms175943%28v=sql.105%29.aspx)。

它现在失败的原因是因为 SQL Server 验证是在您的触发器执行和执行它的主键创建之前发生的。

# asp.net-mvc-4 - 双击 mvc 4 web 网格

> ID：14788382
> 
> 赞同：0
> 
> 时间：2013-02-09T12:55:29.500
> 
> 标签：asp.net-mvc-4

我正在准备一个 mvc 4 应用程序，我对它很陌生。我想通过双击一行 mvc 4 webgrid 来实现一个功能，我应该在 ajax 中调用一个操作方法。但不幸的是，我找不到如何在 mvc 4 web 网格上实现双击。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:57:00.677

您可以[`.dblclick()`](http://api.jquery.com/dblclick/)在 jQuery 中使用该事件。例如：

```
<script type="text/javascript">
    $(function() {
        $('table td').dblclick(function() {
            $.ajax({
                url: '@Url.Action("SomeAction", "SomeController")',
                type: 'POST',
                success: function(result) {
                    // do something with the result from your AJAX call
                }
            });
        });
    });
</script> 
```

显然，可以对这段代码进行很多改进。例如，您可以`data-*`在网格上使用 HTML5 属性来指定需要调用的控制器操作的 url，然后将该脚本外部化到单独的 javascript 文件中。您可能还需要调整 jQuery 选择器以匹配您的 WebGrid 元素。

# asp.net-mvc - 将空值作为可为空的十进制属性传递给控制器 操作

> ID：14788388
> 
> 赞同：1
> 
> 时间：2013-02-09T12:56:13.610
> 
> 标签：asp.net-mvc, json, asp.net-mvc-4

我试图在 JSON 对象中传递一个空值，比如说：`{ 'property': null }`到 ASP.Net MVC 中的控制器操作，但在操作方法中，我看到该属性得到一个零值而不是空值。

我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:00:16.707

只是不要在客户端发送该属性或删除该属性：`delete x.yourProperty`

例如，如果您有一些具有可空属性的 .net mvc 控制器，如下所示：

`public JsonResult SomeAction(decimal? yourProperty){ //your code goes here }`

如果在客户端使用`yourProperty: null`模型绑定器调用一些 ajax 请求，会将其设置为 0，例如将设置为的 int 或字符串`EmptyString`

因此，如果您想将其作为 null 发送，您只需避免发送它，或者如果它是您设置的属性，那么您只需要删除该属性：`delete x.yourProperty`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:02:26.447

如果你想让它工作，你的模型上的属性应该是一个可以为空的小数：

```
public decimal? MyProperty { get; set; } 
```

# c++ - 如何使用双目标 MinGw 编译器在 32 位计算机的代码块中编译 C++ 程序

> ID：14788392
> 
> 赞同：0
> 
> 时间：2013-02-09T12:56:35.060
> 
> 标签：c++, c++11, mingw, codeblocks

我已经下载了用于 C++11（32 位和 64 位 Windows 计算机）的双目标 mingw 编译器，但是当我使用代码块编译我的程序时，mingw 为 64 位计算机编译它。如何为 32 位计算机编译我的程序？

这是我下载的 MinGw 版本的链接：http: [//sourceforge.net/projects/mingwbuilds/](http://sourceforge.net/projects/mingwbuilds/)

谢谢 ！

# ssh - 为什么使用fabric时ssh-copy-id仍然需要密码

> ID：14788394
> 
> 赞同：3
> 
> 时间：2013-02-09T12:56:43.237
> 
> 标签：ssh, fabric

我已经设置了 env.user 和 env.password，但是当我使用时：

```
run('ssh-copy-id -i $HOME/.ssh/id_rsa.pub server1') 
```

它仍然要求我输入密码，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T22:40:59.437

`env.user`并`env.password`用于 ssh 到远程服务器，然后在`run ()`远程服务器上运行命令。

它们不用于远程命令本身（在远程服务器中运行）。

所以`ssh-copy-id`对用户或密码一无所知。

如果这不是您的意思，我建议您编辑问题并使事情更清楚，例如提供更多关于您要完成的任务的上下文：例如粘贴包含此“运行”的函数。

# python - GAE中如何处理不同类别的用户？

> ID：14788397
> 
> 赞同：1
> 
> 时间：2013-02-09T12:56:53.117
> 
> 标签：python, google-app-engine, authentication, google-cloud-datastore

我计划使用 Google 帐户对我的 GAE 应用程序的用户进行身份验证。
据我了解，gmail 地址的所有所有者都被认为是平等的，并且可以进行身份​​验证。我的应用程序提供无需登录的免费试用模式，我只对验证我的付费客户感兴趣。

也许我错过了一些东西，但文档中提到的用户之间的唯一区别是[admins/non admins](https://developers.google.com/appengine/docs/python/users/adminusers)。

在 GAE 中对特定类别的用户（在我的例子中：付费用户）进行身份验证的常见做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:28:11.140

看看 gae-biolerplate，它展示了如何使用不同的登录名创建用户类

如果您想获得有关用户的额外信息，请使用新模型，即 UserExtra 来添加信息，例如付费等

[链接到样板](https://github.com/coto/gae-boilerplate)

# java - 如何使用 android 将我录制的音频上传到 Dropbox？

> ID：14788402
> 
> 赞同：2
> 
> 时间：2013-02-09T12:57:08.260
> 
> 标签：java, android, dropbox

现在我正在创建基于 android 和 Dropbox 的应用程序。

我想根据我的 api 密钥将我录制的音频上传到 Dropbox，但我已经尝试了很多。我找不到解决方案，所以任何人都可以帮助我克服这种情况。

这是我的代码。我在这段代码的帮助下完成了图像捕获和视频捕获。该代码工作正常，但是当我转换为我的录音机时它不起作用。谢谢回复。

录音机功能：mAudio=(Button)findViewById(R.id.audio_button); mAudio.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v) {
             Intent intent = new Intent();
             // Picture from camera

            intent.setAction(Audio.Media.RECORD_SOUND_ACTION);
            Uri fileUri = getOutputMediaFileUri(MEDIA_TYPE_AUDIO);
            intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, fileUri);

            Log.i(TAG, "Importing New Picture: " + mCameraFileName);
            try {
                startActivityForResult(intent, NEW_AUDIO);
            } catch (ActivityNotFoundException e) {
                showToast("There doesn't seem to be a camera.");
            }
        }
    }); 
```

上传功能：

否则如果（请求代码 == NEW_AUDIO）{

```
 if (resultCode == Activity.RESULT_OK) {
            Uri uri = null;
            if (data != null) {
                uri = data.getData();
            }
            if (uri == null && mAudioFileName != null) {
                uri = Uri.fromFile(new File(mAudioFileName));
                Log.v("Audio Uri", uri.toString()+" "+uri.getPath());
            }
            File file = new File(mAudioFileName);
            Log.v("Audio file", ""+file.getPath());

            if (uri != null) {
                UploadFile upload = new UploadFile(Home.this, mApi, PHOTO_DIR, file);
                upload.execute();
            }
        //showToast("till capture");
   }
    else if(resultCode == RESULT_CANCELED)
    {
        uriAudio = null;
        Toast.makeText(Home.this,"Cancelled!",Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:30:08.120

根据[现场](https://www.dropbox.com/developers/start/files#android)给出的官方示例。我希望这能帮到您。

```
FileInputStream inputStream = null;
try {
    File file = new File("/path/to/file.txt");
    inputStream = new FileInputStream(file);
    Entry newEntry = mDBApi.putFile("/testing.txt", inputStream,
            file.length(), null, null);
    Log.i("DbExampleLog", "The uploaded file's rev is: " + newEntry.rev);
} catch (DropboxUnlinkedException e) {
    // User has unlinked, ask them to link again here.
    Log.e("DbExampleLog", "User has unlinked.");
} catch (DropboxException e) {
    Log.e("DbExampleLog", "Something went wrong while uploading.");
} catch (FileNotFoundException e) {
    Log.e("DbExampleLog", "File not found.");
} finally {
    if (inputStream != null) {
        try {
            inputStream.close();
        } catch (IOException e) {}
    }
} 
```

# java - Class.getResource() 的奇怪行为

> ID：14788403
> 
> 赞同：1
> 
> 时间：2013-02-09T12:57:15.013
> 
> 标签：java, netbeans, resources, classloader

我有一个 NetBeans 项目。在项目目录中，我创建了一些额外的目录来保存资源（图像）。所以我的一张图片的路径是“/res/imgs/on.png”（“res”，其中的所有内容都是由我创建的）。然后我将“res”目录添加到我的项目源中（在 NetBeans 中右键单击我的项目 -> 属性 -> 源 -> 添加文件夹（对于源包文件夹部分））。我已经使用以下代码访问了我的项目中图像的 URL：

```
URL url = Class.class.getResource("/imgs/on.png"); 
```

这很成功——就在几天前。今天，在这段代码执行之后，url 变量被设置为 null。但是当代码被修改成这样时：

```
URL url = Class.class.getResource("/imgs"); 
```

(url != null) 是真的。

接下来，我创建了另一个项目，在那里我完成了完全相同的操作（即，在项目文件夹中创建子目录，将一些文件加载​​到其中并尝试执行代码，类似于我写的这些以上）。这些操作是成功的。之后，我回到了我的第一个项目（当尝试访问“/imgs/on.png”时，将 url 初始化为 null）。事实证明，那里一切正常，并且图像的 URL 已成功加载...

所以，问题是，问题出在哪里？这是一个 NetBeans 错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:26:07.073

可能由于某些 Netbeans 编译/清理故障，“on.png”不在类目录中，因此在类路径中找不到。在重新启动或任何会导致 Netbeans 重新扫描源文件夹的操作之后，它又回到了那里。

顺便说一句，`Class.class.getResource()`您应该使用调用者的类，例如`this.getClass().getResource()`使用相同的类加载器。

# php - 缓存包含或必需的文件，以便可以反复使用？

> ID：14788405
> 
> 赞同：3
> 
> 时间：2013-02-09T12:57:34.207
> 
> 标签：php, include, require

使用 PHP，我正在渲染一个看起来像这样的 HTML 表：

```
--------------------------------------------------
| title    | description         | actions       |
-------------------------------------------------|
| title1   | desc1               | edit / delete |
| title2   | desc2               | edit / delete |
| title3   | desc3               | edit / delete |
| title4   | desc4               | edit / delete |
-------------------------------------------------- 
```

代码是这样工作的（精简版！在这个例子中没有`thead`等`tbody`）：

```
<table>
  <?php foreach ( $tableData as $row ): ?>
  <tr>

    <!-- Render columns (title, description)
    <?php foreach ( $columnData as $column ): ?>
    <td>
      <?= $row[$column['name']]; ?>
    </td>
    <?php endforeach; ?>

    <!-- Render actions -->
    <?php foreach ( $actions as $action ): ?>
    <td>
      <?= include($action); // include the proper action button! ?>
    </td>
    <? endforeach; ?>

  </tr>
  <?php endforeach; ?>
</table> 
```

这给了我想要的结果。但我只有一个问题。当我有 1000 多条记录时，它会变得有点慢。我已经注意到这是因为我正在`include`为每个表格行做一个。当我删除`include`然后一切运行非常快。

该`included`文件包含一些 PHP 逻辑。所以我不能只做一个`file_get_contents`. 好吧，我可以，但是我必须用它`eval()`来解析内容。但我宁愿根本不使用该功能。

所以现在我想知道是否可以以某种方式缓存包含的文件？这样 PHP 就不必一遍又一遍地主动包含实际文件，而是从其缓存中获取它？这样的事情可能吗？

或者有没有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:06:09.837

您可以将所有操作（功能）放在一个文件中并包含该文件一次。只是在循环中，您将根据名称调用不同的函数。[变量函数示例](http://php.net/manual/en/functions.variable-functions.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:54:02.220

一种选择是走“模板化”路线。从文件中删除所有 PHP 并用“标签”替换数据部分。然后加载一次文件（file_get_contents）并用数据替换标签。

```
//template.html
Replace this template {variable} with {search} and {replace}.
{conditional_html}

//template.php
$tpl = file_get_contents('template.html');
$output = '';
foreach($record as $r) {
    $data = array('{variable}'=>$r['field1'], 
      '{search}'=>$r['field2'], 
      '{replace}'=>$r['field3'],
      '{contional_html}'=>($r['field4']='1A' ? 'Display Conditional' : '') };
    $output .= str_replace(array_keys($data), $data, $tpl);
} 
```

这将消除文件访问，但您正在创建自己的模板标记语言。理想情况下，您的业务逻辑与您的显示/渲染是分开的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:09:31.873

由于您在转到该页面时正在编辑或删除，因此每次再次打开该表时，表似乎都可能发生变化（几乎...），因此缓存可能不是最佳选择。

另一种方法是使用分页并添加“全部显示”按钮，以便仅在您真正需要时生成完整的表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T13:21:54.623

您的动作渲染器似乎有问题。
它们只是不能那么大，无法放入单独的文件中。要呈现一个简单的超链接，只需要模板中的一行 HTML 代码。
如果这些渲染器中有太多逻辑，则必须将其移至业务逻辑部分。

分页**肯定**也有帮助。我的意思是真正的分页，每次调用只处理 100 条记录，而不是全部 1000 条，其中 900 条要隐藏。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-09T13:25:11.610

include_once() 可能是您正在寻找的。这是一个链接： http: [//php.net/manual/en/function.include-once.php](http://php.net/manual/en/function.include-once.php)

# java - 使用 Apache POI 从 Java 导出 mysql 数据到 excel

> ID：14788407
> 
> 赞同：3
> 
> 时间：2013-02-09T12:57:44.017
> 
> 标签：java, mysql, excel, apache-poi

我`MysqlToXls`从这里复制了课程：http: [//mikescode.wordpress.com/2008/02/16/exporting-a-mysql-table-to-excel-xls-in-java/](http://mikescode.wordpress.com/2008/02/16/exporting-a-mysql-table-to-excel-xls-in-java/)

我以这种方式编辑了创建不需要任何参数的构造函数的类：

```
public MysqlToXls()
throws ClassNotFoundException, SQLException {

    // Create MySQL database connection
    Class.forName("com.mysql.jdbc.Driver");

    String url = "jdbc:mysql://localhost/Spinning?user=root&useUnicode=true&characterEncoding=utf8";
    connection = DriverManager.getConnection(url);
} 
```

虽然没有任何指南，但我尝试自己做，但我做不到。

```
 MysqlToXls m=new MysqlToXls();
  m.generateXls("utente", "utenti.xls"); 
```

但是没有错误，文件 utenti.xls 保持空白。有人知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:37:41.190

唯一的问题是文件的路径。我试图将文件保存在项目的一个文件夹中（使用相对路径），而如果我给出绝对路径（桌面上的 fe），它可以完美地工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:12:00.340

您可能必须显式关闭 outputStream，因此建议这样做：

```
xlsWorkbook.write(new FileOutputStream(filename)); 
```

你应该尝试做这样的事情：

```
FileOutputStream fos = new FileOutputStream(filename);
xlsWorkbook.write(fos);
fos.close(); 
```

# wpf - WPF DataGridColumnHeader 元素不关注第一次点击

> ID：14788411
> 
> 赞同：1
> 
> 时间：2013-02-09T12:58:09.027
> 
> 标签：wpf, wpfdatagrid, datatemplate

我对 WPF DataGrid 有一个可怕的问题！我在`TextBox`里面放了一个`DataGridColumnHeader`，并改变了`KeyBoardLanguage`on `TextBox_GotFocus`。这是我的风格`DataGridColumnHeader`：

```
<Style x:Key="DataGridSelectorColumnHeaderStyle" TargetType="{x:Type DataGridColumnHeader}" >
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <TextBox  xamlservices:GotFocusBehavior.GotFocus="{Binding TextBoxGotFocusCommand}"
                          xamlservices:GotFocusBehavior.GotFocusParameter="{Binding RelativeSource={RelativeSource Mode=Self}}"/>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

和：

```
 public ICommand TextBoxGotFocusCommand
    {
        get { return new RelayCommand<TextBox>(OnTextBoxGotFocus); }
    }
  TextBox txtSearch;
  private void OnTextBoxGotFocus(TextBox sender)
  {
     txtSearch = sender;
     if (...)
     {
       CultureInfo lanq = new CultureInfo("en-us", false);
       InputLanguageManager.SetInputLanguage(txtSearch, lanq);
     }
  } 
```

问题是当我点击时语言会改变`Textbox`，点击其他地方并返回`TextBox`！它不会在第一次点击时改变语言。任何想法将不胜感激。

# javascript - 如何在 Javascript 中使用 file_get_contents 和 json_decode

> ID：14788412
> 
> 赞同：4
> 
> 时间：2013-02-09T12:58:11.490
> 
> 标签：javascript, social-networking, social

我正在尝试在 Javascript 中使用这个 PHP API。如何在 Javascript 中使用 file_get_contents 和 json_decode？

**PHP API 代码**

```
$content=@file_get_contents("http://doma.in/api/?url=http://www.google.com&api=APIKEY");
$url=json_decode($content,TRUE);//Decodes json into an array 

if(!$url["error"]){  // If there is no error
 echo $url["short"]; //Outputs the short url 
}else{  
 echo $url["msg"]; //Outputs the error message 
} 
```

**Javascript**

```
(function( $ ) {
  $(document).ready(function() { 
    var url = window.location.href;
    var host =  window.location.hostname;
    var title = $('title').text();
    title = escape(title);

    var twitter = 'http://twitter.com/home?status='+title+'%20'+url;
    var facebook = 'http://www.facebook.com/sharer.php?u='+url;

    var tbar = '<div id="sicons">';
    tbar += '<a href="'+twitter+'" id="twitter" title="Share on twitter">Twitter</a>';
    tbar += '<a href="'+facebook+'" id="facebook" title="Share on Facebook">Facebook</a>';
    tbar += '</div>';

  });
})(jQuery); 
```

**编辑：感谢回复**

**数据.php**

```
$content = @file_get_contents('http://doma.in/api.php?api=asd4sdf5634d&url=' . urlencode('http://' . $_SERVER['HTTP_HOST']  . $_SERVER['REQUEST_URI']));
echo $content; 
```

我已将此添加到 Javascript 的顶部

```
$.getJSON('data.php', function(data) {
    if(!data.error){ // If there is no error
    alert(data.short) //Outputs the short url
    }else{
    alert(data.msg)
    }
}); 
```

Javascript 现在看起来像这样

```
(function( $ ) {
  $(document).ready(function() { 
    var shorturl = data.short;
    var title = $('title').text();
    title = escape(title);

    var twitter = 'http://twitter.com/home?status='+title+'%20'+url;
    var facebook = 'http://www.facebook.com/sharer.php?u='+url;

    var tbar = '<div id="sicons">';
    tbar += '<a href="'+twitter+'" id="twitter" title="Share on twitter">Twitter</a>';
    tbar += '<a href="'+facebook+'" id="facebook" title="Share on Facebook">Facebook</a>';
    tbar += '</div>';

  });
})(jQuery); 
```

我确定我做错了什么。抱歉，我是编码初学者（C、C++）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T19:48:05.010

通过 AJAX 加载数据是**异步**的。您的第一个调用 ( `$.getJSON`) 在页面加载后立即执行，但您作为参数传递的回调函数仅在基础 HTTP 请求完成后才执行。这意味着你的程序**不会阻塞**等待 HTTP 请求；在调用`$.getJSON(...)`你的程序之后运行，并且在 HTTP 请求完成的某个时间调用回调方法。

加载页面后，您立即评估您的数据（在您的第二个函数中）。但是，由于您的数据是异步加载的，因此在呈现文档并执行您的函数时尚未加载。

您的问题的解决方案是将评估数据的代码移动到以下回调函数中`$.getJSON(...)`：

```
$.getJSON('data.php', function(data) {
    if (!data.error) {
        // Process your data here!
    } else {
        alert(data.msg)
    }
}); 
```

# javascript - 从 url 加载模板并在 div 中编译

> ID：14788417
> 
> 赞同：18
> 
> 时间：2013-02-09T12:58:38.307
> 
> 标签：javascript, angularjs

由于我是 Angular JS 的新手，我想知道如何加载外部模板并将其与一些数据一起编译到目标`div`.

例如我有这个模板：

```
<script type="text/ng-template">

    <img src="{{Thumb}}" />

<script> 
```

`div`应该包含模板的那个：

```
<div data-ng-controller=" ... "></div> 
```

该模板位于文件夹中的某处`/templates/test.php`。是否有一种构建方式来像指令一样进行模板加载，并针对一些将替换密钥的数据进行编译`{{Thumb}}`（当然还有许多其他数据）？

**编辑：**如果我`$routes`在网站的根目录中使用并加载模板怎么办？怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-04-19T22:51:19.240

使用[`$templateRequest`](https://docs.angularjs.org/api/ng/service/$templateRequest)，您可以通过其 URL 加载模板，而无需将其嵌入到 HTML 页面中。如果模板已经加载，它将从缓存中获取。

```
app.controller('testCtrl', function($scope, $templateRequest, $sce, $compile){
    // Make sure that no bad URLs are fetched. If you have a static string like in this
    // example, you might as well omit the $sce call.
    var templateUrl = $sce.getTrustedResourceUrl('nameOfTemplate.html');

    $templateRequest(templateUrl).then(function(template) {
        // template is the HTML template as a string

        // Let's put it into an HTML element and parse any directives and expressions
        // in the code. (Note: This is just an example, modifying the DOM from within
        // a controller is considered bad style.)
        $compile($("#my-element").html(template).contents())($scope);
    }, function() {
        // An error has occurred here
    });
}); 
```

请注意，这是手动执行此操作的方式，而在大多数情况下，更可取的方式是[定义](https://docs.angularjs.org/api/ng/service/$compile#comprehensive-directive-api)使用该属性获取模板的[指令。](https://docs.angularjs.org/guide/directive)`templateUrl`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-09T13:17:09.227

在 Angular 中有 2 种使用模板的方式（我知道至少有 2 种方式）：

*   第一个使用具有以下语法的内联模板（在同一文件中）：

    ```
    <script type="text/ng-template">
        <img ng-src="{{thumb}}">
    </script> 
    ```

*   第二个（你想要的）是外部模板：

    ```
    <img ng-src="{{thumb}}"> 
    ```

所以你需要做的是从你的模板中删除脚本部分，然后在想要的 div 中使用 ng-include，如下所示：

`<div ng-include="'templates/test.php'"></div>`

需要有双引号和单引号才能工作。希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T03:03:43.820

假设我有这个 index.html：

```
 <!doctype html> <html lang="en" ng-app="myApp">
        <body>
            <script src="tpl/ng.menu.tpl" type="text/ng-template"></script>   
            <mainmenu></mainmenu>       
            <script src="lib/angular/angular.js"></script>
            <script src="js/directives.js"></script>
        </body> 
</html> 
```

* * *

我有一个模板文件“tpl/ng.menu.tpl”，只有这 4 行：

```
<ul class="menu"> 
    <li><a href="#/view1">view1</a></li>
    <li><a href="#/view2">view2</a></li>
</ul> 
```

* * *

我的指令映射“js/directives.js”：

```
angular.module('myApp',['myApp.directives']);
var myModule = angular.module('myApp.directives', []);

myModule.directive('mainmenu', function() {
    return { 
        restrict:'E',
        replace:true,
        templateUrl:'tpl/ng.menu.tpl'
    }
}); 
```

# java - 标头的 Java XML 打印节点

> ID：14788418
> 
> 赞同：3
> 
> 时间：2013-02-09T12:58:39.833
> 
> 标签：java, xml, xml-parsing

我首先要说我不太擅长 Java 或 XML。

我下面的代码就像我需要的那样打印出子节点。我没有编写代码，我在此处的帮助站点上找到了它：[Java XML Example](http://www.java-tips.org/java-se-tips/javax.xml.parsers/how-to-read-xml-file-in-java.html)。现在，我需要它做的是删除所有特异性痕迹。这意味着我不希望它搜索“TITLE”或“CD”，我希望它找出第一个节点是什么并打印出来。这意味着如果第一个是 CD，那么它应该为所有节点打印 CD，依此类推。我计划将它用于多个 XML 文件，但它们都不相同。这就是为什么不特定于一个 XML 并使用引号很重要的原因。

最后，为了让您了解我想要的输出，基本上是一个 CSV 文件。顶部的标题，用逗号分隔，下面的内容，用逗号分隔。为此，我还需要一个打印方法，在顶部列出标题的所有节点。我不确定如何做到这一点。

编辑：我的问题是，如何在不硬编码的情况下打印标签名称（例如标题）。我希望它也可以处理一个与 CD 或音乐无关的 XML 文件。

```
//This should be the final result:
Title, Artist, Album,
On Fire, Eminem, Recovery,
Not Afraid, Eminem, Recovery,

//I want this code without hardcoding headers like Title inside it. 
Element fstElmnt = (Element) fstNode;
NodeList fstNmElmntLst = fstElmnt.getElementsByTagName("TITLE");
Element fstNmElmnt = (Element) fstNmElmntLst.item(0);
NodeList fstNm = fstNmElmnt.getChildNodes();
System.out.print(((Node) fstNm.item(0)).getNodeValue()+", "); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:57:42.667

答案就在问题中。使用`getChildNodes()`, 并遍历返回列表中的节点。对于每个节点，您可以使用

```
if (node.getNodeType() == Node.ELEMENT_NODE) 
```

并且，如果为真，您可以使用获取元素的标签名称

```
Element element = (Element) node; 
String elementName = element.getTagName(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:09:53.590

完全独立于元素名称的代码：

```
boolean titlePrinted = false;
Element root = doc.getDocumentElement();
NodeList cdNodes = root.getChildNodes();
for (int i = 0; i < cdNodes.getLength(); i++) {
    Node cdNode = cdNodes.item(i);
    if (cdNode.getNodeType() == Node.ELEMENT_NODE) {
        NodeList cdAttrNodes = cdNode.getChildNodes();
        if (!titlePrinted) {
            for (int j = 0; j < cdAttrNodes.getLength(); j++) {
                Node cdAttrNode = cdAttrNodes.item(j);
                // add this if statement
                if (cdAttrNode.getNodeType() == Node.ELEMENT_NODE) {
                    System.out.print(cdAttrNode.getNodeName() + ",");
                }
            }
            System.out.println("");
            titlePrinted = true;
        }
        for (int j = 0; j < cdAttrNodes.getLength(); j++) {
            Node cdAttrNode = cdAttrNodes.item(j);
            if (cdAttrNode.getNodeType() == Node.ELEMENT_NODE) {
                NodeList attrNodes = cdAttrNode.getChildNodes();
                for (int k = 0; k < attrNodes.getLength(); k++) {
                    Node attrNode = attrNodes.item(k);
                    if (attrNode.getNodeType() == Node.TEXT_NODE) {
                        System.out.print(attrNode.getNodeValue() + ",");
                    }
                }
            }
        }
        System.out.println("");
    }
} 
```

根据您的建议进行了测试`.xml`。我的解决方案适用于节点而不是独立的元素。

# struts2-jquery - 如何将超链接的值获取到动作类中

> ID：14788423
> 
> 赞同：1
> 
> 时间：2013-02-09T12:59:16.387
> 
> 标签：struts2-jquery

我想在struts的动作类中获取超链接属性值。有没有办法在动作类中获取超链接属性值的值。我有 4 个链接，如果我点击任何链接，就会调用单个动作类。

```
<s:url  id="ajax1"  action="totcal" />
<sj:a value="b1" name="b1" href="%{ajax1}" targets="progressbarchange1" >
BreakFast  
</sj:a> 
```

在上面的代码 `value="b1"`中检索动作类。请帮忙

# java - 如何从后台运行的 Flash 应用程序中捕获图像？

> ID：14788425
> 
> 赞同：1
> 
> 时间：2013-02-09T12:59:29.087
> 
> 标签：java, flash

我正在尝试从在浏览器中运行的 Flash 应用程序捕获图像并在 Java 应用程序中处理它们。

到目前为止，我正在使用（简化）：

```
Robot r;
BufferedImage i = r.createScreenCapture(); 
```

然而，为了使这项工作，浏览器总是必须在前台，因为这只是一个简单的屏幕截图。

我的问题：是否可以从不在前台运行的应用程序中捕获图像数据，甚至直接访问闪存应用程序？

注意：我也可以使用一些脚本（例如在 python 中）执行此操作，然后将数据传递给 Java 应用程序。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:31:49.313

It is not possible to take screenshots if the application is not in foreground. You can use Adrian's answer to take a screenshot if it is in foreground.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:02:18.313

我认为你可以使用[Selenium](http://seleniumhq.org/)：

检查这篇文章中的第一个答案：

[使用 Selenium WebDriver 截屏](https://stackoverflow.com/questions/3422262/take-a-screenshot-with-selenium-webdriver)

使用方法的文档：[TakesScreenshot.getScreenshotAs()](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)

# c# - 绑定问题构造函数视图模型

> ID：14788426
> 
> 赞同：1
> 
> 时间：2013-02-09T12:59:50.723
> 
> 标签：c#, silverlight, mvvm

我对 mvvm 比较陌生，但是我有一个关于从视图模型绑定的问题。我有一个视图模型，我想在它的构造函数中填充一个 observablecollection。我的构造函数如下所示：

```
public StudySelectionViewModel() : base() {
        _studyRepository = StudyRepository.Instance;

        InitializeViewModelData();
    } 
```

InitializeViewModelData() 如下所示：

```
 private void InitializeViewModelData() {
        _studyRepository.RetrieveModalityTypes();
        RaisePropertyChanged("ModalityTypes");
    } 
```

我的属性 ModalityTypes 如下所示：

```
public ObservableCollection<ModalityType> ModalityTypes {
        get {
            return _studyRepository.ModalityTypes;
        }
    } 
```

可能不用说我的存储库调用数据库并检索数据。调试时，看起来 RaisePropertyChanged 比我的 _studyRepository.RetrieveModalityTypes 方法更早执行，因此它绑定到一个空属性。

我在这里错过了什么吗？我的设计不好吗？有任何想法吗？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:02:11.533

当表单初始化时，绑定将检查属性。它还会在`PropertyChanged`发出通知时检查属性 - 因此您可能会收到两次对属性 getter 的调用

我假设您获取数据的调用是网络服务调用或其他什么？Silverlight 是异步的，因此您需要考虑 Web 服务调用可能会在您的表单初始化后很好地返回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:53:11.237

这里有两件事需要考虑。

1.  你有一个 ObservableCollection - 它是可观察的，所以如果你在初始化视图模型时初始化集合，当你的数据服务返回视图时，添加到集合而不是用新集合替换它将会很好地更新。
2.  如果您确实必须在数据服务数据就绪回调中将集合替换为新集合，请确保您这样编写集合设置器：

    ```
    public ObservableCollection<ModalityType> ModalityTypes {
    get {
        return _studyRepository.ModalityTypes;
    }
    set
       {
          this.__studyRepository.ModalityTypes = value;
          RaisePropertyChanged("ModalityTypes");
       { 
    ```

    }

# google-search-api - 如何从谷歌获得每个给定时间可用的搜索结果？

> ID：14788427
> 
> 赞同：2
> 
> 时间：2013-02-09T13:00:03.080
> 
> 标签：google-search-api

我很想从谷歌获得每个给定时间（比如昨天或上周）有多少搜索结果可用，对于我正在构建的项目，我想要比谷歌趋势更“准确”的东西，例如：

```
Potato - Last 24 hours - 100 results.
Potato - Last week - 5000 results 
```

等等……这可能吗？

Ps：我知道这甚至可能不实用，但我被要求添加这个功能......

# jsf-2 - 关闭 EJB 组件中的 jms 连接

> ID：14788430
> 
> 赞同：1
> 
> 时间：2013-02-09T13:00:36.417
> 
> 标签：jsf-2, connection, ejb, jms

我使用 EJB 3 和 JMS 编写了一个简单的聊天应用程序。该应用程序即将完成，但我在关闭连接时遇到问题。当我关闭一个用户的连接时，我无法关闭另一个用户的连接。这是我的应用程序的代码。

客户端

```
@Stateful
@LocalBean
public class ChatClientBean implements ChatClientLocal{

    private String owner;
    private MessageContainer container = null;

    /* Zmienne połączeniowe */
    private String destination = null;
    private final static String C_FACTORY = "/ConnectionFactory";
    private Context ic;
    private TopicConnectionFactory tcf = null;
    private TopicConnection connection;  
    private Topic topic;
    private TopicSession subSession; 
    private TopicSubscriber subscriber;
    private TopicSession pubSession;
    private TopicPublisher publisher;
    /* -------------------- */

    public ChatClientBean(){}

    @Override
    public void init(String topicName, String owner, MessageContainer container){
        try{
            this.destination = topicName;
            this.owner = owner;
            this.container = container;

            ic = new InitialContext();
            tcf = (TopicConnectionFactory) ic.lookup(C_FACTORY);
            connection = tcf.createTopicConnection();
            pubSession = connection.createTopicSession(false, Session.AUTO_ACKNOWLEDGE);
            subSession = connection.createTopicSession(false, Session.AUTO_ACKNOWLEDGE);
            topic = (Topic) ic.lookup(destination);
            subscriber = subSession.createSubscriber(topic);
            publisher = pubSession.createPublisher(topic);

            subscriber.setMessageListener(this);

            System.out.println("Zaincjalizowano ChatClientBean dla "+owner);
        }catch(JMSException ex){
            System.out.println("Blad przy incjalizacji MessageProccesora");
            ex.printStackTrace();
        }catch(NamingException ex){
            System.out.println("Blad JNDI");
        }
    }

    @Override
    public void onMessage(Message message) {
        try{
                TextMessage tm = (TextMessage) message;
                if(container!= null){
                    container.service(tm.getText());
                }
                System.out.println("Odebrano przez : "+owner+ " : " + tm.getText());

            }catch(JMSException ex){
                System.out.println("Blad JMS przy odbieraniu");
                ex.printStackTrace();
            }
    }

    @Override
    public void sendMessage(String message){
        try{
            TextMessage tm = pubSession.createTextMessage(message);
            publisher.publish(tm);
            System.out.println("Wiadomosc wyslana przez "+owner+" : "+ tm.getText());
        }catch(JMSException ex){
            ex.printStackTrace();
        }
    }

    @Override
    public void start(){
        try{
            connection.start();
        }catch(JMSException ex){
            System.out.println("Blad przy startowaniu polaczenia");
        }
    }

    @Override
    public void close(){
        try{
            if(pubSession != null){
                pubSession.close();
            }
            if(subSession != null){
                subSession.close();
            }
            if(connection != null){
                connection.close();
            }
            if(ic != null){
                ic.close();
            }
        }catch(JMSException ex){
            System.out.println("Blad przy zamykaniu polaczenia : "+ owner);
            ex.printStackTrace();
        }catch(NamingException ex){
            System.out.println("Blad JNDI przy zamykaniu polaczenia "+owner);
        }
    }

    /* GETTERY i SETTERY */
    public String getOwner() {
        return owner;
    }

    public void setOwner(String owner) {
        this.owner = owner;
    }

    public MessageContainer getContainer() {
        return container;
    }

    public void setContainer(MessageContainer container) {
        this.container = container;
    }

    public String getDestination() {
        return destination;
    }

    public void setDestination(String destination) {
        this.destination = destination;
    }
    /* ----------------- */ 
```

操作员端

```
@Stateful
@LocalBean
public class ChatOperatorBean implements ChatOperatorLocal{

    private String owner;
    private ClientsContainer container;

     /* Zmienne połączeniowe */
    private String destination = null;
    private final static String C_FACTORY = "/ConnectionFactory";
    private Context ic;
    private TopicConnectionFactory tcf = null;
    private TopicConnection connection;  
    private Topic topic;
    private TopicSession subSession;
    private TopicSubscriber subscriber;
    private TopicSession pubSession; 
    private TopicPublisher publisher;
    /* -------------------- */

    @Override
    public void init(String topicName, String owner, ClientsContainer container){
        try{
            this.destination = topicName;
            this.owner = owner;
            this.container = container;

            ic = new InitialContext();
            tcf = (TopicConnectionFactory) ic.lookup(C_FACTORY);
            connection = tcf.createTopicConnection();
            pubSession = connection.createTopicSession(false, Session.AUTO_ACKNOWLEDGE);
            subSession = connection.createTopicSession(false, Session.AUTO_ACKNOWLEDGE);
            topic = (Topic) ic.lookup(destination);
            subscriber = subSession.createSubscriber(topic);
            publisher = pubSession.createPublisher(topic);

            subscriber.setMessageListener(this);

            System.out.println("Zaincjalizowano ChatOperatorBean dla "+owner);
        }catch(JMSException ex){
            System.out.println("Blad przy incjalizacji MessageProccesora : "+owner);
            ex.printStackTrace();
        }catch(NamingException ex){
            System.out.println("Blad JNDI : "+owner);
            ex.printStackTrace();
        }
    }

    @Override
    public void onMessage(Message message) {
        try{
            TextMessage tm = (TextMessage) message;
            if(container!= null){
                container.service(tm.getText());
            }
            System.out.println("Odebrano przez : "+owner+" : "+ tm.getText());
        }catch(JMSException ex){
            System.out.println("Blad JMS przy odbieraniu u : "+owner);
            ex.printStackTrace();
        }
    }

    @Override
    public void sendMessage(String message){
        try{
            TextMessage tm = pubSession.createTextMessage(message);
            publisher.publish(tm);
            System.out.println("Wiadomosc wyslana przez "+owner+" : "+ tm.getText());
        }catch(JMSException ex){
            ex.printStackTrace();
        }
    }

    public void start(){
        try{
            connection.start();
        }catch(JMSException ex){
            System.out.println("Blad przy startowaniu polaczenia : "+owner);
        }
    }

    @Override
    public void close(){
        try{
            if(pubSession != null){
                pubSession.close();
            }
            if(subSession != null){
                subSession.close();
            }
            if(connection != null){
                connection.close();
            }
            if(ic != null){
                ic.close();
            }
        }catch(JMSException ex){
            System.out.println("Blad przy zamykaniu polaczenia : "+ owner);
            ex.printStackTrace();
        }catch(NamingException ex){
            System.out.println("Blad JNDI przy zamykaniu polaczenia "+owner);
        }
    }

    /* GETTERY i SETTERY */
    public String getOwner() {
        return owner;
    }

    public void setOwner(String owner) {
        this.owner = owner;
    }

    public ClientsContainer getContainer() {
        return container;
    }

    public void setContainer(ClientsContainer container) {
        this.container = container;
    }

    public String getDestination() {
        return destination;
    }

    public void setDestination(String destination) {
        this.destination = destination;
    }
    /* ----------------- */ 
```

客户端.xhtml

```
<h:body style="background-color: #99ff66">
        <h:outputStylesheet name="css/default.css" /> 
        <h:form id="form" >
            <p:outputPanel id="panel" >
                <h:panelGrid columns="2" cellpadding="5" id="startPanel" rendered="#{client.startPanelVisible}"  >
                                <h:outputLabel value="Nazwa" for="nick" style="font-weight: bold;" />
                                <p:inputText value="#{client.nick}" id="nick" />
                                <p:commandButton value="Rozpocznij" actionListener="#{client.startChat()}" process="@this,nick" update="panel" id="start"/> 

                </h:panelGrid>
                <p:panel header="Wiadomości" id="chatboxPanel" rendered="#{client.chatPanelVisible}">
                    <h:panelGroup id="chatbox">
                        <ui:repeat value="#{client.container.messages}" var="item">
                            #{item}
                            <br/>
                            <p:separator/>
                        </ui:repeat>
                        <p:poll interval="1" update="chatbox" />
                    </h:panelGroup>
                </p:panel>
                <p:outputPanel id="chatPanel" rendered="#{client.chatPanelVisible}">
                    <p:inputText value="#{client.message}" 
                                 styleClass="messageInput" 
                                 style="margin-top: 5px;width: 310px;"
                                 />
                    <p:commandButton value="Send" 
                                     actionListener="#{client.send()}" 
                                     oncomplete="$('.messageInput').val('').focus()" 
                                     />
                    <p:commandButton actionListener="#{client.closeChat()}" process="@this" update="panel"
                                     value="Close" 
                                     />
                </p:outputPanel>
            </p:outputPanel>
        </h:form>
    </h:body> 
```

运算符.xhtml

```
<h:body>
        <h:outputStylesheet name="css/defaultOperator.css" />
        Zalogowany jako : #{logOn.operator.firstName} #{logOn.operator.lastName}
        <p:separator />
        <h:form id="form" prependId="false">
                <p:selectOneButton value="#{operator.viewController.selectedPanel}"  style="margin-bottom: 10px;" >
                    <f:selectItem itemValue="0" itemLabel="Pierwszy" />
                    <f:selectItem itemValue="1" itemLabel="Kod na stronę" />
                    <f:selectItem itemValue="2" itemLabel="Czaty" />
                    <p:ajax event="change" update="form" />
                </p:selectOneButton>

                <p:outputPanel id="panel0" rendered="#{operator.viewController.getVisible(0)}">
                </p:outputPanel>
                <p:outputPanel id="panel1" rendered="#{operator.viewController.getVisible(1)}">
                    <p:fieldset styleClass="fieldset">
                        <h:panelGrid columns="1" >
                            <h:outputText value="Wklej ten kod w sekcji head strony" />
                            <h:inputTextarea id="trackingCode" readonly="true" rows="10" cols="40" value="#{operator.tr}"/>
                        </h:panelGrid>
                    </p:fieldset>
                </p:outputPanel>
                <p:outputPanel id="panel2" rendered="#{operator.viewController.getVisible(2)}" autoUpdate="true">
                    <p:outputPanel styleClass="left">
                        <p:panel header="Status" styleClass="statusBox">
                            <p:commandButton actionListener="#{operator.startChat()}" value="Połącz" />
                            <p:commandButton actionListener="#{operator.closeChat()}" value="Rozłącz" />
                        </p:panel>
                        <p:panel header="Oczekujący klienci" styleClass="clientBox">
                            <p:outputPanel id="clientPanel" >
                                <ui:repeat value="#{operator.container.notServiced}"  var="item" >
                                    <h:outputText value="#{item.clientName}" />
                                    <p:commandButton styleClass="startbtn" value=">>" actionListener="#{operator.startWithClient(item.clientName)}" />
                                    <p:separator />
                                </ui:repeat>
                            </p:outputPanel>
                        </p:panel>
                    </p:outputPanel>
                    <p:panel header="Aktywne chaty" id="activeChats" styleClass="chatTabs">
                        <p:tabView id="tabView" value="#{operator.container.serviced}" var="item">
                            <p:tab id="clientTab" title="#{item.clientName}" >
                               <p:outputPanel >
                                    <p:panel header="Wiadomości" id="chatboxPanel" styleClass="messageBox">
                                        <p:outputPanel id="chatbox" >
                                             <ui:repeat value="#{item.messages}" var="msg">
                                                 <b>#{msg.from} : </b>#{msg.text}
                                                 <p:separator />
                                             </ui:repeat>
                                        </p:outputPanel>

                                     </p:panel>
                                   <p:poll interval="1" update="chatbox" />
                                </p:outputPanel>
                                <p:outputPanel id="chatPanel" >
                                    <p:inputText value="#{item.currentMessage}" 
                                             styleClass="messageInput" 
                                             style="margin-top: 5px;width: 310px;"
                                             />
                                    <p:commandButton value="Send" 
                                                 actionListener="#{operator.send(item.clientName,item.currentMessage)}" 
                                                 oncomplete="$('.messageInput').val('').focus()" 
                                                 styleClass="button"
                                                 />
                                </p:outputPanel>
                            </p:tab>
                        </p:tabView>
                    </p:panel>
                </p:outputPanel>
            </h:form>
    </h:body> 
```

请帮忙！！！

# javascript - JavaScript 中作为对象的函数

> ID：14788432
> 
> 赞同：2
> 
> 时间：2013-02-09T13:01:32.713
> 
> 标签：javascript

有一个对象`c`。
它有一个功能`c.log(message)`

是否可以添加一些变量来使用它们`c.log.debug = true`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T13:11:17.167

Javascript 是一种完全面向对象的语言。这意味着~~几乎~~ *一切*都是对象——甚至函数：

```
var f = function(){};
alert(f instanceof Function);
// but this statement is also true
alert(f instanceof Object);

// so you could add/remove propreties on a function as on any other object : 
f.foo = 'bar';

// and you still can call f, because f is still a function
f(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T13:09:41.187

只需稍加修改，就可以像这样：

```
var o = {f: function() { console.log('f', this.f.prop1) }};

o.f.prop1 = 2;

o.f(); // f 2
o.f.prop1; // 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:05:07.633

它不会像这样工作。您可以改为将“调试”标志作为参数添加到您的函数中，例如

```
c.log = function(message, debug) {
  if debug {
    // do debug stuff
  }
  else {
   // do other stuff
  }

} 
```

# java - 检查 HashMap 键是否存在

> ID：14788434
> 
> 赞同：9
> 
> 时间：2013-02-09T13:01:46.523
> 
> 标签：java, hashmap, micro-optimization, containskey

在 Java 中，让 HashMap 完全填充这种形式的数据：

```
HashMap<Integer, int[]> map = new HashMap<Integer, int[]>(1000000, 1); 
```

检查随机密钥是否存在时更快，比如 100：

```
if (map.get(100) == null)) 
```

或者

```
if (!map.containsKey(100)) 
```

?

从微优化的角度来看，这个问题很有趣。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-09T13:04:49.227

`containsKey`应该会**稍微**慢一些，因为它会导致额外的函数调用（它只是调用`getEntry`）（它可能会被优化掉，我不确定 Java 是否会这样做）。`containsKey`好像：

```
public boolean containsKey(Object key) {
  return getEntry(key) != null;
} 
```

但请注意，`containsKey`另一方面，在其他实现上可能会稍微**快**`Map`一些（但可能不是标准 Java API 中的那些）。

通常我的实现看起来像：（避免需要`containsKey`）

```
int[] arr = map.get(100);
if (arr == null) // doesn't exist
  // do stuff
else // exists
  // do stuff with arr 
```

下面**肯定会比**上面慢：（如果您要查找的项目存在合理的时间）

```
if (!map.containsKey(100)) // doesn't exist
  // do stuff
else // exists
{
  int[] arr = map.get(100);
  // do stuff with arr
} 
```

**编辑：**感谢 zvzdhk 提供`containsKey`. 我实际上应该检查一下。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-09T13:04:52.797

其实这两种方法都是一样的。如果您查看`java.util.HashMap`源代码，您可以找到下一个 containsKey 实现：

```
public boolean containsKey(Object key) {
    return getEntry(key) != null;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T13:10:03.433

两者仅在`return`类型上有所不同，但如果它是键，则可能会返回您，但是`map.get(key)`会返回您，这可用于区分两种可能的返回情况。`null``map.containsKey(key)``boolean``map.get(key)``null`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T13:30:01.567

这两种方法没有区别。主要区别只是你接下来要做什么。如果您需要价值，那么当然通过获取您将拥有价值。

# android - 如何在 Google Play 上的 Android 应用说明中的第一段和第二段之间留出一个空格？

> ID：14788437
> 
> 赞同：1
> 
> 时间：2013-02-09T13:02:13.823
> 
> 标签：android, google-play

我已经使用 Chrome 尝试了新旧开发者控制台。如果您在“描述”的第一段和第二段之间输入一个空行，则发布的应用程序描述会显示没有这个空格。随后的段落看起来很好。如果输入两个空格，则发布的应用说明中有两个空格。真的是谷歌吗？

我认为这是可能的，因为其他应用程序只有一个空间。还有一些显然遇到了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T11:20:56.260

在空白行上放置一个空格字符将确保空白行显示在商店中。

# c++ - 从 GtkWidget 获取 X11 窗口句柄

> ID：14788439
> 
> 赞同：8
> 
> 时间：2013-02-09T13:02:18.147
> 
> 标签：c++, linux, gtk, wxwidgets, window-handles

[wxWindow::GetHandle()](http://docs.wxwidgets.org/trunk/classwx_window.html#a185e6cd7065367b552748cb722651b27)函数在 Windows 上返回 HWND ， 在 Linux 上返回 GtkWidget。我需要获取 X11 窗口句柄，它不是小部件本身。如何从该小部件中获取句柄？我需要 C++ 代码，因为它是 wxWidgets 的主要语言。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-09T13:08:32.920

就像是：

```
GtkWidget *widget = ...;
Window w = gdk_x11_drawable_get_xid(gtk_widget_get_window(widget)); 
```

是C，因为Gtk+是C API，但也是C++，所以应该没有问题。

别忘了`#include <gdk/gdkx.h>`！

# jquery - 如何将边距添加到文本框的背景图像？

> ID：14788440
> 
> 赞同：0
> 
> 时间：2013-02-09T13:02:21.513
> 
> 标签：jquery, html, css, jquery-ui-datepicker

这是我将背景图像添加到文本框的风格，我正在使用 jquery UI datepicker

```
background: url("../Images/DatePicker.png") no-repeat scroll right center white; 
```

但我想将 rightmargin 设置为文本框边框，如何在后台设置边距？

![在此处输入图像描述](../Images/4649a9bb43345a78545fb5fe6dbe6484.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:03:28.290

您可以使用它`background-position`来设置它。使用边距会影响整个包含元素。`background`在您设置的速记属性中，它是倒数第二个值。另外，严格来说`background-color`应该先设置属性。尝试这个：

```
background: white url("../Images/DatePicker.png") no-repeat scroll 35px center; 
```

这会将背景图像定位在距包含元素的左边缘 35 像素处。您可能需要修改值 - 我只是猜到了。

# android - 从 zxing 的 handleDecode 调用 Intent

> ID：14788443
> 
> 赞同：0
> 
> 时间：2013-02-09T13:02:31.213
> 
> 标签：android, android-intent, zxing

我正在开发一个应用程序，我正在使用 zxing 库读取 QR 码。我正在调用 zxing 库来读取二维码：

```
public class QRScanner extends CaptureActivity {
    TextView tv;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.qrscanner_layout);  
}

@Override 
public void handleDecode(Result rawResult, Bitmap barcode) {
    tv =(TextView) findViewById(R.id.textview_output);
    tv.setText(rawResult.getText());
} 
```

现在我想从

```
public void handleDecode(Result rawResult, Bitmap barcode) {
    //Want to call new activity using intent and pass result in new activity.
} 
```

我尝试了一个代码：

```
public void handleDecode(Result rawResult, Bitmap barcode) {
    String result = rawResult.getText();
    Intent intent = new Intent(QRScanner.this,Activity2.class);
    intent.putExtra("Result", result);
    startActivity(intent);
} 
```

但它不起作用。至于如何在模拟器上测试这段代码我不知道。

当我尝试在设备上运行此应用程序时，它会终止。我该怎么做。我的应用程序需要在下一个活动中需要二维码扫描的结果。

请建议我该怎么做。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:09:58.653

您是否在清单中声明了 Activity2？将 getText() 包装在 try-catch ...

```
String result = "";
try {
    result = rawResult.getText();
catch (NullPointerException npe) {
    Log.e("handleDecode()", "Result was null.", npe);
} 
```

至少如果结果为空，您将传递“”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:53:25.260

我得到了应用程序终止的原因。当我阅读链接然后明白我没有在清单中声明库文件时。因为我不知道它应该必须声明。

谢谢你。

# arrays - 根据几个条件从数据数组返回值

> ID：14788444
> 
> 赞同：1
> 
> 时间：2013-02-09T13:02:34.513
> 
> 标签：arrays, excel, lookup, data-processing

我有一个包含 3 列的数据表（为了清晰起见，外观被简化，但保留了排列和数据格式，第一列`A`是`Date`用我的区域设置格式化的，但它不是文本）：

```
Date        Module  Value
27.01.2013  xxxxx   90
27.01.2013  ttttt   100
29.01.2013  aaaaa   110
31.01.2013  aaaaa   50
31.01.2013  mmmmm   200
31.01.2013  ttttt   80
03.02.2013  ttttt   140
04.02.2013  aaaaa   120
07.02.2013  mmmmm   150
07.02.2013  ttttt   90
07.02.2013  aaaaa   190
08.02.2013  aaaaa   210
08.02.2013  aaaaa   90
08.02.2013  aaaaa   170
08.02.2013  ttttt   90
08.02.2013  ttttt   110
08.02.2013  mmmmm   130
09.02.2013  mmmmm   90
09.02.2013  aaaaa   200 
```

该列表可能很长并且会定期更新。我需要实现的是：在同一张纸上，我将以下计算单元格放置在 E 列的起始位置（即数据和计算区域之间有一个空白列 D）：

```
MAX last week   Date        Value
aaaaa           09.02.2013  200
mmmmm           07.02.2013  150
ttttt           03.02.2013  140
xxxxx           <empty>     No change 
```

基本上我需要从以下数据数组中找出`A:C`：

1.  对于中的值列表`E`（对应于中的模块名称`B`）日期和对应的值，该**值在同一模块的值中最大**，但应返回**从今天开始的最后一周。**
2.  如果在上周没有此模块的记录 - **Date 应该是空**的，并且Value 应该是**“No change”**字符串（与`xxxxx`上面的示例一样，与初始数组相关并假设今天是 2 月 9 日）。

至于#2，我最终得到以下结果：

*   对于`Date`：`=IF(SUMPRODUCT(--(A:A>TODAY()-7),--(A:A="xxxxx"))=0,"")`
*   对于`Value`：（`=IF(F5="","No change")`我在这里检查左侧的相应日期）

至于＃1 - 我被困住了，这就是我需要指导或建议的地方。我尝试了不同的东西`MATCH`，`VLOOKUP`和类似的东西，但甚至没有接近成功：我要么有错误，要么没有相关的结果。

如果这很重要 - 日期总是被排序，最近的日期在列表的末尾，即新记录被添加到底部。对于同一模块，同一天可能有多个记录。如果示例或解释不清楚 - 请在评论中回复，我会添加更多详细信息。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T13:26:58.423

在 G2 中尝试这样的数组公式求值

`=IF(COUNTIFS(A$2:A$100,">"&TODAY()-7,B$2:B$100,E2),MAX(IF(A$2:A$100>TODAY()-7,IF(B$2:B$100=E2,C$2:C$100))),"No change")`

确认`CTRL+SHIFT+ENTER`并复制下来

然后是 F2 中的日期

`=IF(G2="No change","",MIN(IF(A$2:A$100>TODAY()-7,IF(B$2:B$100=E2,IF(C$2:C$100=G2,A$2:A$100)))))`

如果该模块在过去 7 天内有多个日期出现最大值，这将为您提供最早的日期（将 MIN 更改为 MAX 以获得最新的）

有关工作示例，请参见[**此处**](https://www.dropbox.com/s/0i4ewwxzd9od2bq/max%20valuess.xlsx)

# android - android中的地理编码器后端服务实现

> ID：14788447
> 
> 赞同：0
> 
> 时间：2013-02-09T13:03:05.660
> 
> 标签：android, android-intent

我正在使用地理编码来转换地址中的纬度和经度值。这不是返回 true 到 is present()。如何使地理编码器可行？我需要为地理编码器实施支持服务吗？如果是，如何？

```
public String convert_address(){    
String address=" :: predefine address ::";

    try{
      Geocoder geocoder1;

    latitude = location.getLatitude();

    longitude = location.getLongitude();

    List<Address> addresses;

    geocoder1 = new Geocoder(mContext, Locale.getDefault());
    address=" geo enter";

     addresses = geocoder1.getFromLocation(latitude, longitude, 2);
     if(geocoder1.isPresent()==true)
         //Toast.makeText(getApplicationContext(), "it is present....", 500).show();
     address="...... present......";
         else
         //Toast.makeText(getApplicationContext(),"it is not....",500).show();
    address="....not present....";
     if(addresses != null) {
         Address returnedAddress = addresses.get(0);
         StringBuilder strReturnedAddress = new StringBuilder("Address:\n");
         for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
         strReturnedAddress.append(returnedAddress.getAddressLine(i)).append("\n");
         }
         address=strReturnedAddress.toString();
         }
         else{
         address="No Address returned!";
         }

    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    return address;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T09:51:58.923

> 公共静态布尔isPresent（）
> 
> 如果实现了地理编码器方法 getFromLocation 和 getFromLocationName，则返回 true。**缺乏网络连接仍可能导致这些方法返回 null 或空列表。**

# jquery - 如何获取选中其属性的复选框的html

> ID：14788451
> 
> 赞同：1
> 
> 时间：2013-02-09T13:03:33.460
> 
> 标签：jquery, html, checkbox

我有一个复选框列表。当有人点击其中一个时。我需要将复选框列表的 html 发送到其他一些功能，我可以在其中检查哪些复选框已被选中。

我的每个复选框都有“指标”类。

```
 $('.indicators').each(function(){
                    alert($(this).prop('name');
                }); 
```

上面的代码正确地提醒选中的复选框的名称。但后来当我尝试提醒整个 html 时，复选框似乎未选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:51:16.793

我不明白你为什么要发送所有复选框的 html。通常，您将需要一些属性或验证该复选框是否选中。如果您需要检查输入的某些属性并将其发送到函数...那将是这样的

```
$('.indicators').click(function(){
  if ($(this).is(':checked')){
    alert('the checkbox ' + $(this).attr('name')+  ' is checked');
  }
}); 
```

但是如果你真的需要这个 html，你只需为这个 $(this).html() 更改 $(this).attr('name')。如果您需要发送所有复选框的 html，您将使用相同但在一个周期内

```
$('.indicators').each(function(){
  //some code
}); 
```

# qt - 尝试构建 Qt 的静态版本时出错

> ID：14788454
> 
> 赞同：3
> 
> 时间：2013-02-09T13:03:55.597
> 
> 标签：qt, qt-creator, qt5

我已经尝试解决这个问题很长时间了，现在我真的必须解决它（不知何故）:)

我正在尝试构建 Qt 5 的静态版本，这显然不像我在许多教程中阅读的那么容易（显然不是为 Qt 5 编写的，而是为以前的版本编写的）。

我下载并安装了带有 MinGW 4.7 的 Windows 32 位 Qt 5.0.1。尝试构建静态版本时

```
configure -static -release 
```

接着

mingw32-make

我得到错误：

```
kernel\qplatformopenglcontext.cpp: In constructor 'QPlatformOpenGLContextPrivate
::QPlatformOpenGLContextPrivate()':
kernel\qplatformopenglcontext.cpp:85:39: error: class 'QPlatformOpenGLContextPri
vate' does not have any field named 'context'
kernel\qplatformopenglcontext.cpp: At global scope:
kernel\qplatformopenglcontext.cpp:90:1: error: 'QPlatformOpenGLContext' does not
 name a type
kernel\qplatformopenglcontext.cpp:95:1: error: 'QPlatformOpenGLContext' does not
 name a type
kernel\qplatformopenglcontext.cpp:104:1: error: 'GLuint' does not name a type
kernel\qplatformopenglcontext.cpp:109:1: error: 'QOpenGLContext' does not name a
 type
kernel\qplatformopenglcontext.cpp:115:6: error: 'QPlatformOpenGLContext' has not
 been declared
kernel\qplatformopenglcontext.cpp:115:41: error: variable or field 'setContext'
declared void
kernel\qplatformopenglcontext.cpp:115:41: error: 'QOpenGLContext' was not declar
ed in this scope
kernel\qplatformopenglcontext.cpp:115:57: error: 'context' was not declared in t
his scope
kernel\qplatformopenglcontext.cpp:121:6: error: 'QPlatformOpenGLContext' has not
 been declared
Makefile.Release:22330: recipe for target '.obj/release_static/qplatformopenglco
ntext.o' failed
mingw32-make[3]: *** [.obj/release_static/qplatformopenglcontext.o] Error 1
mingw32-make[3]: Leaving directory 'C:/Qt/Qt5.0.1/5.0.1/Src/qtbase/src/gui'
Makefile:34: recipe for target 'release' failed
mingw32-make[2]: *** [release] Error 2
mingw32-make[2]: Leaving directory 'C:/Qt/Qt5.0.1/5.0.1/Src/qtbase/src/gui'
Makefile:251: recipe for target 'sub-gui-make_first' failed
mingw32-make[1]: *** [sub-gui-make_first] Error 2
mingw32-make[1]: Leaving directory 'C:/Qt/Qt5.0.1/5.0.1/Src/qtbase/src'
makefile:40: recipe for target 'sub-src-make_first' failed
mingw32-make: *** [sub-src-make_first] Error 2 
```

这里有人用 Qt 5 做过这个吗？

非常感谢你提前！

# wpf - 音频播放代理 - WP8

> ID：14788455
> 
> 赞同：1
> 
> 时间：2013-02-09T13:03:58.413
> 
> 标签：wpf, windows-phone-7, mediaelement, audio-playback-agent

在 windows phone 8 应用程序中，我使用 AudioPlaybackagent 播放背景音频。

我做了以下场景：

我玩

```
 BackgroundAudioPlayer.Instance.Play(), 
```

当这首歌正在播放时，我打电话给

```
 BackgroundAudioPlayer.Instance.Stop() 
```

然后使用 mediaElement 播放另一首歌曲

问题是，如果我想重播第一首歌曲 usingBackgroundAudioPlayer.Instance.Play()

它返回一个异常

```
 The background audio resources are no longer available. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:37:28.013

如果要使用后台代理播放音频，请停止，然后使用媒体元素播放音频。我相信你必须这样做：

```
BackgroundAudioPlayer.Instance.Stop()
BackgroundAudioPlayer.Instance.Close() 
```

然后尝试使用媒体元素播放音频。

# css - 列出几个具有一种风格的类

> ID：14788456
> 
> 赞同：0
> 
> 时间：2013-02-09T13:03:59.307
> 
> 标签：css

非常简单的问题，但我并没有真正让它发挥作用。如果我有几个类，每个类都与一个 div 相关。

```
.div1 .div2 .div3 .div4 .div5 ... 
```

但它们都具有相同的 CSS 样式，例如

```
{ position: absolute; top: 50px; left: 50px; ... } 
```

我应该能够在css中这样写吗？

```
.div1 .div2 .div3 .div4 .div5 { position: absolute; top: 50px; left: 50px; } 
```

但它不起作用，我必须输入：

```
.div1 { position: absolute; top: 50px; left: 50px; }
.div2 { position: absolute; top: 50px; left: 50px; }
.... 
```

附言。我可以制作一门课并将其提供给所有 div，但我需要不同的！谢谢泰德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:06:10.800

如果您希望它们具有相同的样式，则必须用逗号分隔您的类：

```
.div1, .div2, .div3, .div4, .div5 {
    position: absolute;
    top: 50px;
    left: 50px;
} 
```

# python - 如果 x 条目满足条件 python，则绘制 xy 数据

> ID：14788459
> 
> 赞同：11
> 
> 时间：2013-02-09T13:04:39.447
> 
> 标签：python, matplotlib

我想对 xy 数据执行绘图/拟合，前提是数据集的 x 值满足条件（即大于 10）。

我的尝试：

```
x_values, y_values = loadtxt(fname, unpack=True, usecols=[1, 0])

for x in x_values:
    if x > 10:
        (m,b)=polyfit(x_values,y_values,1)
        yp = polyval([m,b],x_values)
        plot(x_values,yp)
        scatter(x_values,y_values)
    else:
        pass 
```

也许最好删除不满足 x 值条件的行的 xy 条目，然后绘图/拟合？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-09T13:16:31.540

当然，只需使用布尔索引。你可以做类似的事情`y = y[x > 10]`。

例如

```
import numpy as np
import matplotlib.pyplot as plt

#-- Generate some data...-------
x = np.linspace(-10, 50, 100)
y = x**2 + 3*x + 8

# Add a lot of noise to part of the data...
y[x < 10] += np.random.random(sum(x < 10)) * 300

# Now let's extract only the part of the data we're interested in...
x_filt = x[x > 10]
y_filt = y[x > 10]

# And fit a line to only that portion of the data.
model = np.polyfit(x_filt, y_filt, 2)

# And plot things up
fig, axes = plt.subplots(nrows=2, sharex=True)
axes[0].plot(x, y, 'bo')
axes[1].plot(x_filt, y_filt, 'bo')
axes[1].plot(x, np.polyval(model, x), 'r-')

plt.show() 
```

![在此处输入图像描述](../Images/65b13f947aafed1dbc778b5a2f57ff77.png)

# django - django-mongodb 引擎将数据保存在哪个集合中？

> ID：14788465
> 
> 赞同：1
> 
> 时间：2013-02-09T13:05:36.623
> 
> 标签：django, mongodb, django-nonrel, django-mongodb-engine

我正在使用 django-mongodb 引擎将 django 与 mongodb 连接起来。我的应用程序中有一个名为带宽的模型。当我通过 python manage.py shell 保存数据时，它将数据保存在名为 app_bandwidth 的集合中。这个引擎如何保存这些数据？我也可以将集合名称修改为 per_app_bandwidth。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:30:56.547

`db_table`您可以通过在`MongoOptions`元类中设置来更改集合。

见： http: [//www.django-mongodb.org/reference/model-options.html](http://www.django-mongodb.org/reference/model-options.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T19:23:38.217

您可以通过将类 Meta 添加到模型类来做到这一点：

```
from django.db import models

class AnyDoc(models.Model):
    # some attributes
    name =   models.CharField(max_length=64)
    class Meta:
        db_table='your_collection_name'

    # 
```

这适用于：
[Django](https://github.com/django/django/tree/stable/1.7.x) <=1.7
django-mongodb-engine 0.6.0
djangotoolbox 1.8.0

有一些早期版本使用该符号的示例：

```
class MongoMeta:
    db_table='your_collection_name' 
```

# python - 根据用户自定义 feincms 页面管理员

> ID：14788476
> 
> 赞同：6
> 
> 时间：2013-02-09T13:06:53.683
> 
> 标签：python, django, django-admin, feincms

我试图找到一种方法来根据提供的用户过滤页面对象的管理查询集，我考虑过什么（伪代码）：

```
from feincms... Page

class MyPageAdmin(PageAdmin):
    def __init__(self, *args, **kwargs):
        'monkey business'
        super(MyPageAdmin, self).__init__(*args, **kwargs)

admin.site.unregister(Page)
admin.site.register(Page, MyPageAdmin) 
```

这是行不通的，因为 feincms 会检查一个完全加载的 django 实例。一个详细的解决方案可能是根本不加载页面模块，并且覆盖页面模型对象或管理员，例如：

```
from feincms... PageAdmin

class MyPage(Page):
    objects = CustomManager()

admin.site.register(MyPage, PageAdmin) 
```

文档说明可以以类似的方式[设置您自己的页面模块](http://pythonhosted.org/FeinCMS/admin.html)，但对于一个简单的要求，似乎需要进行很多配置。

有没有更简单的方法来覆盖 feincms 模块的管理查询集或模型管理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T08:27:09.070

FeinCMS v1.7 还允许您`FEINCMS_USE_PAGE_ADMIN=False`在 Django 设置中进行设置。

然后，`PageAdmin`像往常一样进行子类化，并自己注册模型管理员。

如果您使用的是 v1.7，您还应该开始导入`PageAdmin`。`feincms.module.page.modeladmins`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T14:09:45.103

这里的诀窍是你不能因为执行了一些魔法而取消注册 feincms 模块。您可以像这样修补方法，而不是注册您自己的 feincms Page 对象：

```
from django.conf import settings
from feincms.module.page.models import PageAdmin

def queryset(self, request):
    qs = super(PageAdmin, self).queryset(request)
    if request.user.is_superuser:
        return qs
    return qs.filter(site__id__exact=settings.SITE_ID)
PageAdmin.queryset = queryset 
```

# django - Django - 发生服务器错误。请联系管理员

> ID：14788478
> 
> 赞同：4
> 
> 时间：2013-02-09T13:07:00.960
> 
> 标签：django, django-models, django-templates, django-admin, webserver

我刚刚开始学习 Django 并按照他们的教程进行操作。我尝试设置网站三次，每次都遇到相同的错误（在标题中）。

再次，按照他们的官方教程来信。我在教程 2，我应该访问管理页面。当我有 时`DEBUG = False`，我会在标题中收到错误消息，这就是控制台输出的内容：

```
deusdies@galaksija:~/Documents/djangosites/testing$ python manage.py runserver
Validating models...

0 errors found
Django version 1.4.3, using settings 'testing.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
Traceback (most recent call last):
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 85, in run
    self.result = application(self.environ, self.start_response)
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 153, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 228, in handle_uncaught_exception
    return callback(request, **param_dict)
  File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/django/views/defaults.py", line 32, in server_error
    t = loader.get_template(template_name) # You need to create a 500.html template.
  File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py", line 145, in get_template
    template, origin = find_template(template_name)
  File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py", line 138, in find_template
    raise TemplateDoesNotExist(name)
TemplateDoesNotExist: 500.html
[09/Feb/2013 06:47:23] "GET /admin/ HTTP/1.1" 500 59 
```

这是与`DEBUG = False`. 有了`DEBUG = True`，我得到标准的“它有效！” 页面，即使我访问 /admin/ URL 或页面上的任何其他 URL。

这是我的`settings.py`：

```
# Django settings for testing project.

DEBUG = False #I've been playing with this
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    ('deusdies', 'b@bo.vc'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'baza',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = 'fx$2x-fr0xynw$74j69)tj^(11_xcb7$y2018l+99i3^20wb=!'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'testing.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'testing.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
    'polls',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

SO 其他地方的一些人建议我创建一个 500.html 模板并查看错误是什么——只是我不知道该怎么做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-11-29T13:50:07.007

在 settings.py 文件中将时区更改为 utc，它对我有用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T13:38:03.813

在关注了一个较旧版本的 Django 的 YouTube 视频教程后，我找到了解决问题的方法。我不得不取消注释`urls.py`文件中的某些行（特别是与管理员相关的行），现在它可以工作了。我很困惑为什么在官方教程中忽略了这个......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-20T19:29:25.547

在控制台中写入：“manage.py syncdb”，它应该可以工作。它对我有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-30T12:41:34.823

尝试 ：

```
python manage.py migrate 
```

它将为“admin”创建所有表

附言。它对我有用

# java - 在 while 循环的终止条件中出现 StringIndexOutOfBoundsException

> ID：14788479
> 
> 赞同：-3
> 
> 时间：2013-02-09T13:07:01.727
> 
> 标签：java

*我在while 循环*的终止条件中得到一个*StringIndexOutOfBoundsException*。有人可以解释这个原因吗？

 *```
import java.util.Scanner;
class Solution {

    public static int fun(String s) {
        int count=0;
        int k,j;                 

        for(int i=0;i<s.length();i++) {

            k=i;
            j=0;
            if (s.charAt(j) == s.charAt(k)) {
                while((s.charAt(j)==s.charAt(k))&&(k<s.length())&&(j<s.length())) {
                    j++;
                    k++;
                }
                count+=j;
            }
        }
        return count;
    }

    public static void main(String[] args) { 
        Scanner se=new Scanner(System.in);
        int t=se.nextInt();
        String s;
        int a[]=new int[t];
        for(int i=0;i<t;i++) {
            s=se.nextLine();
            a[i]=fun(s);
        }   
        for(int i=0;i<t;i++)
           System.out.println(a[i]); 
        se.close(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:13:09.470

来自[JavaDoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StringIndexOutOfBoundsException.html)

> java.lang 类**StringIndexOutOfBoundsException**
> 
> 由 String 方法抛出以指示索引为负数或大于字符串的大小。对于某些方法，例如 charAt 方法，当索引等于字符串的大小时也会引发此异常。

您超出了字符串的长度。

另外我认为你的逻辑有一些错误（见下文）。

你真正想做的是：

```
while ((k < s.length()) && (j < s.length())) { // While no String goes out of Bounds
    if (s.charAt(j) != s.charAt(k)) { // If we get a different character
        break; // Get out of the loop
    } else {
        j++;  // Advance one position
        k++;
    }
} 
```

你在做什么是这样的：

```
if (s.charAt(j) == s.charAt(k)) { // If the characters are equal
    while ((s.charAt(j) == s.charAt(k)) // While the characters are equal
              && (k < s.length()) && (j < s.length())) {  // And the position is smaller than the length
       j++;
       k++;
    }
    count += j;
} 
```

If 是多余的，因为无论如何您都会在 while 中检查它，并且 count 将增加零。

但更重要的是，在 while 的终止条件下，您的 check if`s.charAt(j)`发生在 check 之前`j < s.length()`。因此，在您查看 j 是否过大之前，您会在第一种情况下遇到异常

* * *

此外，由于表达式是 Java 是从左到右计算的，因此您可以像这样更改循环：

```
while ((k < s.length()) && (j < s.length()) && (s.charAt(j) == s.charAt(k))) {
    j++;
    k++;
} 
```

现在你没有得到一个异常，因为如果前两个术语是假的（从左边开始），那么右边的另外两个术语根本不会被评估（至少在我的 JVM 中）

输出：

```
run:
2
ababaa
aa
11
3 
```

希望有帮助。

ps：我也换了行

```
int t = se.nextInt(); 
```

到

```
int t = se.nextInt();se.nextLine(); 
```

这样您就可以在给出数字后解析换行符。

* * *

***澄清***

*1) 为什么`se.nextLine()`*

你有过

```
int t = se.nextInt(); 
```

假设用户输入`23`并按下 `enter`，这意味着*InputSream*将从键盘读取`23\n`。`23`是用户输入的数字，`\n`是*换行符*。使用*换行符*是为了让计算机知道一行何时结束，下一行何时开始，并在用户按下回车时自动插入。此处提供更多信息：[如何获得依赖于平台的换行符？](https://stackoverflow.com/questions/207947/java-how-do-i-get-a-platform-independent-new-line-character)

当您呼叫 时`nextInt()`，您只会读取输入的号码，但不会读取`\n`字符。因此，下次您调用 时`readLine()`，您将读取`\n`输入号码（并按下回车键）时剩下的内容。这就是您将上述命令更改为的原因

```
int t = se.nextInt();se.nextLine(); 
```

现在您读取了那个额外的`\n`字符，当您读取用户输入的字符串时，下一次调用`nextLine()`将正确返回该字符串。

*2）为什么将循环更改为`((k < s.length()) && (j < s.length()) && (s.charAt(j) == s.charAt(k))`*

你有这个

```
( (s.charAt(j)==s.charAt(k)) && (k<s.length()) && (j<s.length()) ) 
```

这导致了*StringIndexOutOfBoundsException*。这就是为什么：

在 Java 中，表达式是从左到右计算的。这意味着，在每次迭代中，JVM 将首先检查`(s.charAt(j)==s.charAt(k))`. 如果这个词是*真的*，那么它会评估这个词`(k<s.length())`，如果这也是*真的*，它会评估`(j<s.length())`。如果所有这些条件都为*真*，程序将进入循环。

另一方面，如果第一项（即`(s.charAt(j)==s.charAt(k))`）为*假*，则整个表达式为*假*（因为我们有*AND*运算符），并且不需要计算其余项。

现在，为什么会导致*Exception*？看看最后一次迭代发生了什么。此时，变量`j`（或`k`等效）将具有等于 string 长度的值`s`。当 JVM 试图评估终止条件时，它会首先评估 term `(s.charAt(j)==s.charAt(k))`。由于`j`等于 的长度`s`，因此调用`charAt()`将抛出*StringIndexOutOfBoundsException*，因为调用将尝试获取字符串**之外**的字符。请记住，字符串中的索引是 from `0`to `length() - 1`。这是您获得异常的地方。

但是，如果您将终止条件更改为

```
((k < s.length()) && (j < s.length()) && (s.charAt(j) == s.charAt(k))) 
```

您将避免*StringIndexOutOfBoundsException*。这就是为什么。这一次，术语`(k < s.length())`和 在调用*之前*`(j < s.length())`被评估。因此，当我们到达字符串的末尾时，前两个项中至少有一个是，并且不需要计算表达式的其余部分。因此，在最后一次迭代中，该方法根本没有被调用，所以我们没有得到异常。*`charAt()``false``charAt`*

 *我希望这能稍微澄清一下情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:12:16.723

试试这个

```
for(int i=0;i<t;i++)
    {
        s=se.nextLine();
        se.next(); //add this to discard the newline char of nextLine(). because of newline your next string input is empty string. which leads to IOB exception.
        a[i]=fun(s);
    } 
```

输出：

```
2
asdf
asdf
0
0 
```**

# java - maven中没有main.java的包名

> ID：14788480
> 
> 赞同：22
> 
> 时间：2013-02-09T13:07:31.163
> 
> 标签：java, eclipse, maven

我在 Eclipse 中使用标准的 Maven 目录布局开发我的项目。源代码位于 src/main/java/com/mycompany 目录中。并且需要将我的源类放在包 main.java.com.mycompany 中。当我构建可执行 jar 文件时，我必须在 Manifest.MF 中定义主类，例如：

```
 Main-Class: main.java.com.mycompany.MyMainClass 
```

但是我在很多示例中看​​到（例如在 maven-assembly-plugin 或 maven-jar-plugin 中配置 mainClass 属性），类名是在没有 main.java 部分的情况下指定的。我只想拥有

```
 Main-Class: com.mycompany.MyMainClass 
```

我不知道如何实现这一点，因为我在 Maven 中完全是新手。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-09T13:22:21.543

Maven 的默认目录布局与创建新 Java 项目时 Eclipse 使用的布局不同。

其实很简单。当您创建一个新的 Java 项目时，Eclipse 会在您的文件系统上创建一个名为“src”的文件夹，您应该在其中放置源代码。此外，Eclipse 将此文件夹配置为“源文件夹”。您在此文件夹中创建的每个文件夹都将代表一个 Java 包。

Maven 想要的有点不同。Maven 喜欢你有一个 'src/main/java' 文件夹，其中 'java' 子文件夹配置为源文件夹。因此，在此 java 文件夹下创建的所有文件夹都将代表 Java 包。

您可以从项目属性中管理 Eclipse 中的源文件夹。右键单击您的项目，选择“构建路径-> 配置构建路径”。在弹出窗口中打开“源”选项卡。现在，将“src”作为源文件夹删除，并将其替换为“src/main/java”。

现在 Eclipse 会将您的包识别为 com.mycompany 而不是 main.java.com.mycompany。

我总是使用 maven-eclipse 插件从命令行生成我的 eclipse 项目和类路径文件。我不是 m2e 的忠实粉丝。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-30T05:55:24.350

您也可以尝试更新 maven 项目。右键单击项目 > Maven > 更新 Maven 项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T13:13:36.373

如果您使用 Eclipse，请使用 m2e。Maven项目的eclipse工作区配置不正确

# c# - C# 中 C++ const size_t 的等价物是什么？

> ID：14788481
> 
> 赞同：4
> 
> 时间：2013-02-09T13:07:36.710
> 
> 标签：c#, c++

我正在尝试将一些 Ogre 代码转换为 C# 版本，但遇到了一个问题：

```
 const size_t nVertices = 8;
    const size_t vbufCount = 3*2*nVertices;

    float vertices[vbufCount] = {
            -100.0,100.0,-100.0,        //0 position
            -sqrt13,sqrt13,-sqrt13,     //0 normal
            //... 
           -sqrt13,-sqrt13,sqrt13,     //7 normal
    }; 
```

基本上，C#中不存在 const size_t ，也不能使用 const int 来声明数组的大小。

我想知道如何声明具有常量值的数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T13:23:06.167

size_t 是一个 typedef（有点像 #define 宏），它基本上是另一种类型的别名。它的定义取决于 SDK，但通常是**unsigned int**。

无论如何，在这种情况下它并不重要，因为它们是常量，所以你知道 nVertices 是 8 而 vbufCount 是 48。你可以在 C# 中这样写：

```
const int nVertices = 8;
const int vbufCount = 3 * 2 * nVertices;

float[] vertices = new float[vbufCount] {
    -100.0,100.0,-100.0,        //0 position
    -sqrt13,sqrt13,-sqrt13,     //0 normal
    //... 
    -sqrt13,-sqrt13,sqrt13,     //7 normal
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T13:27:52.720

> 基本上，C#中不存在 const size_t ，也不能使用 const int 来声明数组的大小。

这不是因为`const int`，而是因为数组大小不是 C# 中数组类型的一部分。您可以将代码更改为：

```
float[] vertices = {
        -100.0f,100.0f,-100.0f,     //0 position
        -sqrt13,sqrt13,-sqrt13,     //0 normal
        //... 
       -sqrt13,-sqrt13,sqrt13,      //7 normal
}; 
```

还有其他几种方法可以做同样的事情，包括：

```
const int nVertices = 8;
const int vbufCount = 3*2*nVertices;

float[] vertices = new float[vbufCount] {
        -100.0f,100.0f,-100.0f,     //0 position
        -sqrt13,sqrt13,-sqrt13,     //0 normal
        //... 
       -sqrt13,-sqrt13,sqrt13,      //7 normal
}; 
```

唯一的区别是，如果初始化程序中的项目数与您指定的数量不匹配，您将收到编译时错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T13:13:47.853

```
float[] array = new float[] { 1.2F, 2.3F, 3.4F, 4.5F }; 
```

这就是你可以`arrays`在 C#中声明的方式

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T14:21:55.380

在 C++ 中，size_t 是至少 16 位的无符号整数类型，它遵循 CPU 的本机整数类型。换句话说， sizeof(size_t) 不是固定的，即使大多数人将其用作“无符号整数”。在 C# 中没有这样的东西。

C# 中的大小（例如，使用数组和列表时）通常是“int”类型，它是一个 32 位整数。

在您的情况下，我可能会将数组设为只读并使用“vertices.Length”，例如：

```
 private readonly float[] vertices = new float[]
    {
        1f,2f,3f,4f,5.2f // etc
    }; 
```

或者在这种情况下，我可能会将其定义为 2D 数组并使用 vertices.GetLength：

```
 private readonly float[,] vertices = new float[5,5];

    // fill in code:
    vertices[0, 0] = 0; 
    // etc 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-02T12:13:34.087

所有这些答案实际上并没有回答什么类型相当于 size_t 的问题。.NET 中 size_t 的正确等效类型是 UIntPtr。它在 32 位平台上是 32 位的，在 64 位平台上是 64 位的，并且是无符号的。它是唯一真正等效的类型。

# jquery - jQuery 相邻兄弟选择器

> ID：14788485
> 
> 赞同：2
> 
> 时间：2013-02-09T13:07:58.523
> 
> 标签：jquery, jquery-selectors

我有一个纸牌游戏，有 13 个兄弟图像，id="img1" 到 id="img13"。（只是图片来源不同。

图像是位置：绝对的，它们是平铺的并且水平略微重叠。

![13张牌：](../Images/96548fcf8e317e1dda1c2eb0093f2471.png)

当用户点击一张卡片时，我让它成长并像上面一样翻译。

现在我的问题是：选择左侧 1 张卡片和右侧 1 张卡片以使它们增长到中等大小，从而产生波浪效果的最佳方法是什么？

警告：选择最左边的 cad 时，左边没有卡片，最右边的卡片也一样：右边没有卡片。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T13:09:15.920

假设所有`img`元素都是兄弟元素，您可以使用`next()`and`prev()`来获取上一个/下一个兄弟元素。像这样的东西：

```
$('.img').click(function() {
    $('.img').removeClass('current sibling');
    $(this).addClass('current').prev().addClass('sibling');
    $(this).next().addClass('sibling');
}); 
```

[**示例小提琴**](http://jsfiddle.net/pzjAG/)

# javascript - 在 iFrame DOM 中获取子页面中的每个 div id，然后从 Parent 中的这些 id 生成 UL 列表

> ID：14788486
> 
> 赞同：0
> 
> 时间：2013-02-09T13:08:04.483
> 
> 标签：javascript, jquery, html, css

我有父文档和 iframe 子文档，如下所示：

**父.html**

```
<div id="parent">
    <iframe src="child.html"></iframe>
</div>
<div><!-- the UL List getting from child.html will be displayed here--></div> 
```

**child.html**

```
<div id="child_element_1"></div>
<div id="child_element_2">
    <div id="child_element_2_1"></div>
    <div id="child_element_2_2"></div>
</div>
<div id="child_element_3">
    <div id="child_element_3_1"></div>
</div> 
```

我想要的是一个 UL 列表，它具有 child.html 中每个 div id 的层次结构。（见下图）

![](../Images/8b3703c82fbc09ecfdec183b04babf8d.png)

之后，我想将 UL 放在 parent.html 中的某个位置，非常感谢您提前的支持。欢迎使用 Jquery 或 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:03:05.193

以下假设 iFrame 在同一个域上，否则您没有脚本访问权限。

```
/* page load code*/
$(function(){
    $('#iframeID').on('load',function(){   
        iframeToList( $(this).contents().find('body'))
    });
});

function divToList( $root){
     var html=['<ul>'];
    $root.children('div[id]').each( function(){
        html.push('<li>'+this.id);
        var $children=$(this).children('div[id]')
        if( $children.length){
            html.push( divToList( $(this)))
        }
         html.push('</li>')
    })
    html.push('</ul>')
    return html.join('');

}

function iframeToList( $root){
    $('body').append( divToList($root));    
} 
```

**演示：**`load`由于 Chrome 中的错误，如果没有`src`动态创建的 iframe， 我将无法触发，因此有与浏览器相关的演示：

[http://jsfiddle.net/efzCu/2](http://jsfiddle.net/efzCu/2) - 在 Firefox 中工作

[http://jsfiddle.net/efzCu/3](http://jsfiddle.net/efzCu/3) - 在 Chrome 中工作

具有真实页面的实时页面`src`不需要依赖于浏览器的代码

# fortran - Fortran 输出错误：lib-2

> ID：14788487
> 
> 赞同：0
> 
> 时间：2013-02-09T13:08:13.847
> 
> 标签：fortran, output

在使用商业程序 (Abaqus) 执行我的 Fortran 子例程期间出现错误。我使用了一些写语句将结果打印到外部文本文件。例如将一些整数值打印到已经存在的文件中：

```
OPEN(UNIT=304,FILE="full_path_to_file/outputs.txt",position="append")
WRITE(304,*) KINC,NOEL,NPT 
```

我收到此错误：

```
UNRECOVERABLE error on system request
lib-2: No such file or directory
Encountered during an OPEN of unit 101
Fortran unit 101 is not connected 
```

我调查了文档，并在互联网上进行了很多谷歌搜索，关于这`lib-2`件事，以及 Fortran 输出文件单元，但没有成功。此外，我更改了单元号，但此错误与特定单元号无关。如果有这方面知识的人能给我一些关于这个错误的起源以及如何解决它的提示，我将非常感激。

谢谢！
穆本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:47:59.393

lib-2 不是标准的，它只是编译器特定的东西（你没有提到你的编译器）。文件是否存在？你有正确的工作目录吗？如果你试试

```
OPEN(UNIT=304,FILE="full_path_to_file/outputs.txt",status="replace") 
```

，您应该会看到出现新文件的位置，这就是您应该放置文件以追加到其中的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T16:53:21.383

您的代码片段显示了对 Fortran 单元 304 的写入，但错误消息与 Fortran 单元 101 有关。编译器对最大可能的单元号有特定的限制。也许 304 对于您的编译器来说太大了。或者其他地方的代码是否使用单元 101？查找使用单元号 101 的 open 语句，并查看该 open 语句试图打开的文件。编译器是否通知您导致问题的语句的行号？

PS回应评论：如果将写入更改为“写入（*，*）”会发生什么？那么这个程序有用吗？如果是这样，则表明 open 语句存在问题。您确定文件的路径正确吗？该程序有权写入该目录吗？尝试删除路径并在当前目录中打开一个文件。如果您可以访问其他 Fortran 编译器，请尝试一下，看看它是否为您提供了更有用的错误消息。

# ember.js - 这是将 Reveal 与 Ember.js 一起使用的正确方法吗？

> ID：14788493
> 
> 赞同：4
> 
> 时间：2013-02-09T13:08:57.167
> 
> 标签：ember.js, zurb-foundation

我试图在 Ember 应用程序中很好地实现[Foundation Zurb 的 Reveal](http://foundation.zurb.com/docs/reveal.php)，但我没有成功。现在有了 pre.4 版本，我再次尝试，结果证明非常简单，但我仍然想知道我是否遵循了正确的模式。如果是这样，我希望这个例子对你的项目有所帮助。

使用：

*   ember-1.0.0-pre.4.js

可以在这个[jsfiddle](http://jsfiddle.net/bazzel/ypzPx/)中找到一个工作示例。

我有一个**Post**对象列表。单击列表项将打开一个模式对话框并显示有关帖子的详细信息。

为了显示列表，我创建了一个 Ember 应用程序并为我的**Post**模型提供了一个资源：

```
window.App = Em.Application.create();

App.Post = DS.Model.extend({
    title: DS.attr('string'),
    description: DS.attr('string')
});

App.Post.FIXTURES = [{
    id: 1,
    title: 'Lorem',
    description: 'Lorem ipsum dolor sit amet'
}, {
    id: 2,
    title: 'Ipsum',
    description: 'Fusce ante nulla'
}];

App.Store = DS.Store.extend({
    revision: 11,
    adapter: DS.FixtureAdapter.create()
});

App.Router.map(function () {
    this.resource('posts', {
        path: '/'
    });
});

App.PostsRoute = Em.Route.extend({
    model: function () {
        return App.Post.find();
    }
}); 
```

对于模态对话框，我`render 'reveal'`在**应用程序**模板中包含一个。

```
<script type="text/x-handlebars">
    {{outlet}}
    {{render "reveal"}}
</script> 
```

我覆盖了（由 Ember 即时生成的）**RevealController**，因为我需要一个**ObjectController**并且我创建了一个**显示**模板。

```
App.RevealController = Em.ObjectController.extend(); 
```

由于我的**RevealController的内容是****Post**模型的一个实例，我可以将它的属性放在模板中：

```
<script type="text/x-handlebars" data-template-name="reveal">
    <div id="myModal" class="reveal-modal large">
    <h2>{{title}}</h2>
    <p>{{description}}</p>
    <a class="close-reveal-modal">&#215;</a>
    </div>
</script> 
```

当我单击帖子的标题时，我想将 RevealController 的内容设置为帖子的实例。为此，我从**帖子**`openModal`模板调用事件并将当前**帖子**作为其上下文传递：

 ****```
<script type="text/x-handlebars" data-template-name="posts">
  <ul>
    {{#each controller}}
        <li>
            <a {{action openModal this}} href='#'>{{title}}</a>
        </li>
    {{/each}}
    </ul>
    {{outlet}}
</script> 
```

由于[目标冒泡，我可以在](http://emberjs.com/guides/templates/actions/#toc_target-bubbling)**ApplicationRoute**中定义**openModal**事件，我可以将**RevealController**的内容设置为传递的**Post**并最终显示对话框：

 ******```
App.ApplicationRoute = Em.Route.extend({
    events: {
        openModal: function (content) {
            this.controllerFor('reveal').set('content', content);
            $('#myModal').reveal();
        }
    }
}); 
```

以我目前对 ember 的了解，这感觉是正确的做法，但我很高兴听到是否有任何改进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:32:42.273

我认为您的方法绝对没有问题。更多的`needs`是关于依赖于另一个控制器的控制器，而您似乎在做的只是简单地设置`content`. `Ember.ArrayController`您需要稍微更改您的实现以适应在 Ember pre 5 中`this.controllerFor`被**@deprecated**，但您可以通过以下方式实现：

*   指定`PostsController`（我假设其他人）需要`RevealController`using `needs`;
*   将实例传递`RevealController`给您的`openModal`事件 ( `{{action openModal this controllers.reveal}}`)。

当然还有其他方法可以实现大致相同的目标。但是，我看到的优点如下：

*   [您](http://en.wikipedia.org/wiki/Dependency_injection)在事件中使用依赖注入，这对于测试等非常有用……；
*   您`App.ApplicationRoute`没有责任必须找到控制器；

有一个缺点是您将`RevealController`在少数能够调用 Reveal 的控制器中传递。不过，我并不特别认为这是一个缺点，因为如果您发现自己指定了`needs: ['reveal']`a **lot**，那么您始终可以创建一个您`ArrayController`的 s 扩展的抽象控制器，因为`needs`它是一个连接属性（参见`concatenatedProperties`Ember's `Ember.ControllerMixin`）：

```
App.AbstractController = Ember.ArrayController.extend({
    needs: ['reveal']
});

App.PostsController = App.AbstractController.extend({
    // Since needs is a concatenated property, PostsController will have
    // access to 4 controllers: reveal, another, andAnother, andYetAnother.
    needs: ['another', 'andAnother', 'andYetAnother']
}); 
```

您对此有何看法？

此外，我能看到的唯一真正使用的非 Ember 代码是：`$('#myModal').reveal();`. 有没有一种方法可以将 Reveal 代码放入`didInsertElement`中`App.RevealView`？然后在那里你可以做类似的事情：`this.get('element').reveal();`或类似*的（也许是子视图？）*。**********

# python - Python 中的装饰器、lambda 和成员函数调用？

> ID：14788495
> 
> 赞同：0
> 
> 时间：2013-02-09T13:09:04.690
> 
> 标签：python, methods, decorator, self, python-decorators

什么是正确的语法？

### 编程尝试

```
class Foo:
    def hello(self):
        print "Hello cruel world!"

    def greet_first(self, f):
        self.hello()
        return lambda *args, **kwargs: f(*args, **kwargs)

    @greet_first
    def goodbye(self, concat):
        print "Goodbye {0}".format(concat)

if __name__=='__main__':
    bar = Foo()
    bar.goodbye(' and thanks for all the fish') 
```

### 调试

```
Traceback (most recent call last):
  File "prog.py", line 1, in <module>
    class Foo:
  File "prog.py", line 9, in Foo
    @greet_first
TypeError: greet_first() takes exactly 2 arguments (1 given) 
```

### 参考

[点击运行代码（IDEone）](http://ideone.com/ma41Ny)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:11:54.290

装饰器被立即调用，它不被视为方法，`Foo`而是被视为本地函数。`@greet_first`语法有效地意味着：

```
 goodbye = greet_first(goodbye) 
```

并*立即*执行。它*不是*绑定方法，因此`self`不包含参数。制定方法是没有意义`greet_first`的。将其移出并`self`完全删除论点。

您需要调整装饰器以返回可调用的 replace `goodbye`：

```
def greet_first(f):
    def wrapper(self, *args, **kwargs):
        self.hello()
        return f(self, *args, **kwargs)
    return wrapper 
```

所以`self.hello()`每次`goodbye`都调用它。

如果你*必须*成为`greet_first`的一部分`Foo`，你*可以*使用`@staticmethod`装饰器，但你必须跳过一个额外的圈才能将它用于其他方法声明；您必须将其视为已成为的描述符并调用`.__get__()`它：

```
class Foo(object):
    def hello(self):
        print "Hello cruel world!"

    @staticmethod
    def greet_first(f):
        def wrapper(self, *args, **kwargs):
            self.hello()
            return f(self, *args, **kwargs)
        return wrapper

    @greet_first.__get__(object)
    def goodbye(self, concat):
        print "Goodbye {0}".format(concat) 
```

我`.__get__()`使用任意类型（`object`在这种情况下）调用，因为无论如何都会`staticmethod` *忽略*该参数；我们不能`Foo`在这里使用，因为该类在作为其定义的一部分的代码中尚未最终确定。

请注意，`@staticmethod`为了工作，您需要从`object`Python 2 继承。

# c# - 工作完成后线程不会自行终止

> ID：14788496
> 
> 赞同：0
> 
> 时间：2013-02-09T13:09:05.520
> 
> 标签：c#, multithreading, load

我有以下方法启动我的服务器：

```
 public void EngageServer()
    {
        this.tcpListener = new TcpListener(IPAddress.Any, _InternalPort);
        this.listenThread = new Thread(RunServer);
        this.listenThread.Start();

        Thread t = new Thread(new ParameterizedThreadStart(CheckPortStatus));
        t.Start(_ExternalPort);
    } 
```

问题是线程`t`一直在运行，即使工作完成后，这里是方法：

```
private void CheckPortStatus(object portObject)
{
    /*
     * For information about this method functionality 
     * please refer to the information file attached to this project on the folder "Information"
     */
    int port = (int)portObject;
    ComputerInfo computerInfo = ComputerInfo.Instance;
    if (computerInfo.isNetworkAvailable())
    {
        using (WebClient browser = new WebClient())
        {
            string content = browser.DownloadString(Properties.Settings.Default.CheckPortURL.Replace("{0}", port.ToString()));
            if (content.Contains("is responding"))
            {
                InsertLog(1, "TCP port " + port + " is open");
            }
            else
            {
                InsertLog(3, "TCP port " + port + " is closed");
            }
        }
    }
} 
```

我知道线程一直在运行，因为我的 CPU 不断获得 35%，但评论`t.Start(_ExternalPort);`使应用程序正常运行。

此外，我可以确定工作已经完成，因为我可以在我的数据库中检查结果。

`t`网页的结果处理完毕（使用方法添加到数据库中）后，线程不应该停止并处理`InsertLog`吗？

# javascript - 在保留滚动的同时禁用滚动条

> ID：14788497
> 
> 赞同：0
> 
> 时间：2013-02-09T13:09:05.993
> 
> 标签：javascript, jquery, html, css

我试图禁用html滚动条，同时保留滚动并保持文本区域的滚动条。[这里](http://jsfiddle.net/eb28r/1/)

我试图设置这个：

```
html {overflow:hidden;} 
```

它部分工作，但我对此不满意，所以你有什么完美的解决方案吗？

谢谢。

基本上我不想要两个滚动条......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T19:44:26.597

如果你不怕插件，iScroll 可能是完美的解决方案。这是为了模拟移动设备中已知的滚动，并且可以将任何元素转换为可滚动区域，并且还提供了在您不滚动时隐藏滚动条的选项。在这里，检查这个例子（但你真的可以隐藏滚动指示器，即使没有显示在那里）：

**[简单的 iScroll 演示](http://cubiq.org/dropbox/iscroll4/examples/simple/)**

# asp.net-mvc - 在 asp.net mvc 中没有 textboxfor 助手的情况下正确使用文本框？

> ID：14788499
> 
> 赞同：0
> 
> 时间：2013-02-09T13:09:16.727
> 
> 标签：asp.net-mvc, validation, html-helper

我不喜欢自动生成的代码，所以我决定从不使用 Asp.net MVC 的 Html Helpers，但是在验证失败后保存输入值时我遇到了问题，所以当我保存该值时利用

```
@Html.TextBoxFor(m=>m.Name) 
```

但是当我写的时候它并没有保存值

```
<input type="text" name="Name"/> 
```

所以我怎么能在不使用 TextBoxFor Helper 的情况下拥有同样的东西，这个助手做了什么，我没有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:11:19.030

> 我不喜欢自动生成的代码，所以我决定不使用 Asp.net MVC 的 Html Helpers

如果您不使用帮助程序，您将很难进行 ASP.NET MVC 开发，而且恐怕您不会走得太远。您不仅会遇到诸如设置输入字段值之类的事情，而且还会在您的输入字段上发出 HTML5 data-* 属性，以进行诸如不显眼的客户端验证之类的事情，所有事情都由 HTML 助手自动处理。

如果您发现以下色情内容更具可读性，您总是可以在您的视图中执行以下色情内容：

```
<input type="text" name="Name" value="@Html.Raw(HttpUtility.HtmlAttributeEncode(Model != null ? Model.Name : ""))" /> 
```

但我不知道为什么我有点喜欢写作`@Html.TextBoxFor(m => m.Name)`。我不知道，也许这只是个人喜好问题。

但是要回答您的问题，您可以在没有帮助的情况下执行 ASP.NET MVC。只是你可能会觉得这是一种非常不愉快的经历。

# python - 如果 PySide 应用程序从 IPython 交互式控制台运行，则上下文菜单会消失

> ID：14788501
> 
> 赞同：0
> 
> 时间：2013-02-09T13:09:33.463
> 
> 标签：python, contextmenu, pyqt4, ipython, pyside

在下面给出的最小示例中，上下文菜单（右键单击 gui 的白色部分）仅短暂显示，然后消失。如果应用程序从 IPython (0.13.1) 控制台启动，就会出现这种情况。当从 shell 正常启动时，它可以正常工作。

```
import sys
from PySide import QtGui, QtCore
from IPython.lib.guisupport import get_app_qt4, start_event_loop_qt4

class ContextTestGui(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.ui = Ui_ContextTestWindow()
        self.ui.setupUi(self)
        self.ui.treeView.addAction(self.ui.actionCopy)
        self.ui.treeView.addAction(self.ui.actionShow)

class Ui_ContextTestWindow(object):
    def setupUi(self, ContextTestWindow):
        ContextTestWindow.resize(200, 100)
        self.treeView = QtGui.QTreeView(ContextTestWindow)
        self.treeView.setContextMenuPolicy(QtCore.Qt.ActionsContextMenu)
        self.treeView.setMinimumSize(QtCore.QSize(100, 100))

        self.actionCopy = QtGui.QAction("Copy",ContextTestWindow)
        self.actionShow = QtGui.QAction("Show",ContextTestWindow)

def create_window(window_class,**kwargs):
    app = get_app_qt4(sys.argv)
    window = window_class()
    window.show()
    start_event_loop_qt4(app)
    return window

if __name__ == '__main__':
    simgui = create_window(ContextTestGui) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:47:35.003

我相信这是 IPython Issue [#2380](https://github.com/ipython/ipython/issues/2380)，应该在当前的 git master 中修复。

如果您希望您的应用程序在 0.13 中解决此错误，您将必须使用您自己的代码从 master 发布一个版本的 IPython/lib/inputhookqt4.py，并使用以下代码对 IPython 进行monkeypatch：

```
from IPython.lib import inputhook
inputhook.enable_qt4 = my_enable_qt4 
```

或者，或者，只需覆盖 create_inputhook_qt4

```
from IPython.lib import inputhookqt4
inputhookqt4.create_inputhook_qt4 = my_create_inputhook_qt4 
```

我希望这两种方法都可以工作，只要你在`%gui qt`被调用之前就这样做了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T19:54:55.650

你如何运行应用程序？`In[1]: %run file.py`?

我无法使用 OS X 在 ~last master (feb 4 f46bfec 08389b4) 上重现它

# c# - 了解 DirectX

> ID：14788504
> 
> 赞同：0
> 
> 时间：2013-02-09T13:09:48.587
> 
> 标签：c#, directx

```
//          Draw primitives
        device.VertexFormat = CustomVertex.PositionColored.Format;
        device.DrawUserPrimitives(PrimitiveType.TriangleFan, 4, verts);

        device.Transform.World = Matrix.RotationY(angle += 0.05f);

        //          Draw primitives
        device.VertexFormat = CustomVertex.PositionColored.Format;
        device.DrawUserPrimitives(PrimitiveType.TriangleFan, 4, verts);

        device.Transform.World = Matrix.RotationZ(angle += 0.05f); 
```

我无法理解Transform.World。我如何理解（这将是合乎逻辑的）您绘制第一个三角形并旋转 Y...然后绘制第二个三角形并将两个三角形都旋转到 Z 轴。此代码有效 => 一个三角形仅旋转 Y，第二个只有Z。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:27:16.900

如果要组合多个转换，则应该执行矩阵乘法。也就是说，您的最后一个命令应该是`device.Transform.World *= Matrix.RotationZ(angle += 0.05f);`. 您的代码只是将沿 Y 的旋转替换为沿 Z 轴的旋转。而且，顺便说一句，您应该首先应用转换，然后才渲染图元（而不是相反）。

您应该能够在线找到许多详细的转换教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:02:30.707

第一个三角形沿 Z 轴旋转的原因是因为您在之前的函数中设置了旋转，并且在您更改它之前它会一直保留。画完之后，将其更改为沿 Y 轴旋转，然后绘制第二个三角形。然后将矩阵再次设置为沿 Z 轴旋转，整个过程重新开始。

您没有添加到之前的轮换中`device.Transform.World`，您只是在重置它。如果要将它们加在一起，则必须将它们相乘。

# oracle - Oracle Forms 6i EXEC_SQL 包

> ID：14788509
> 
> 赞同：1
> 
> 时间：2013-02-09T13:10:15.897
> 
> 标签：oracle, plsql

我正在使用 EXEC_SQL 包我已经使用类似这样的东西执行了一个 sql 字符串

```
Count := EXEC_SQL.EXECUTE(cursor_number); 
```

我想知道如何获取查询 SQL%ROWCOUNT 对我不起作用返回的记录总数的计数。

# java - 无法使用 context.xml 文件和 Microsoft JDBC 驱动程序为 SQL Server 2012 创建连接池

> ID：14788510
> 
> 赞同：1
> 
> 时间：2013-02-09T13:10:17.703
> 
> 标签：java, tomcat, jdbc, connection-pooling, sql-server-2012

这是我第一次使用 SQL Server，之前我在使用 MySQL，并且我在 tomcat 中成功创建了 db 连接池。我正在尝试使用相同的代码为 sql server 创建连接池。请指导我哪里出错了。

我正在尝试以 Windows 身份验证身份登录，我已将 sqljdbc_auth.dll 复制到 tomcat bin 目录中。

以下是我在 META-INF 下的 context.xml 文件中编写的代码：

```
Context antiJARLocking="true" path="">
    <Resource 
    auth="Container" 
    driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver" 
    logAbandoned="true"
    maxActive="100"
    maxIdle="30" 
    maxWait="1000" 
    name="jdbc/mydb" 
    removeAbandoned="true"
    removeAbandonedTimeout="60"
    type="javax.sql.DataSource" 
    url="jdbc:sqlserver://localhost;integratedSecurity=true;" />
</Context> 
```

下面是提供连接的java类：

```
public class ConnectionPool {
private static ConnectionPool pool=null;
private static DataSource dataSource = null;

public synchronized static ConnectionPool getInstance(){
    if (pool == null){
        pool = new ConnectionPool();
    }
    return pool;
}

private ConnectionPool(){
    try{
        InitialContext ic = new InitialContext();
        dataSource = (DataSource) ic.lookup("java:/comp/env/jdbc/mydb");
    }
    catch(Exception e){
        System.out.println(e);
    }
}

public Connection getConnection(){
    try{
        return dataSource.getConnection();
    }
    catch (SQLException sqle){
        System.err.println(sqle);
        return null;
    }
}

public void freeConnection(Connection c){
    try{
        c.close();
    }
    catch (SQLException sqle){
        System.err.println(sqle);
    }
}
} 
```

当我尝试打电话时`getConnection()`，我得到了以下异常： `javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file: java.naming.factory.initial Exception in thread "main" java.lang.NullPointerException at ConnectionPool.getConnection(ConnectionPool.java:39)`

# android - 如何强制焦点编辑文本

> ID：14788512
> 
> 赞同：6
> 
> 时间：2013-02-09T13:10:19.710
> 
> 标签：android, focus, android-edittext

我阅读了有关如何设置要聚焦的对象的问题，但是我似乎找不到任何我想要做的事情的答案。

使用 On Focus Listener 我做了以下事情：

```
 Ehour.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View arg0, boolean arg1) {
            // TODO Auto-generated method stub
            if (!arg1) {
                if (Ehour.getText().length()<=0) {
                    Toast.makeText(getApplicationContext(), "No Hour Entered", Toast.LENGTH_LONG).show();
                    Calendar nohour = Calendar.getInstance();
                    Ehour.setText(numberformatter(nohour.get(Calendar.HOUR_OF_DAY)));
Ehour.setFocusable(true);
Ehour.requestFocus();

                }
            }
        }}); 
```

我已经尝试了以下帖子中的建议：

我阅读了这篇文章，但使用这些建议似乎也不起作用： [如何在创建和显示布局时将焦点设置在视图上？](https://stackoverflow.com/questions/2150656/how-to-set-focus-on-a-view-when-a-layout-is-created-and-displayed)

我的目标是，当编辑文本焦点丢失时，如果给定的条目无效，我需要移回它。

此外，根据 Bill Mote 的建议，我也尝试过：

```
 Ehour.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View arg0, boolean arg1) {
            // TODO Auto-generated method stub
            if (!arg1) {
                if (Ehour.getText().length()<=0) {
                    Toast.makeText(getApplicationContext(), "No Hour Entered", Toast.LENGTH_LONG).show();
                    Calendar nohour = Calendar.getInstance();
                    Ehour.setText(numberformatter(nohour.get(Calendar.HOUR_OF_DAY)));

                    ((EditText)arg0).requestFocus();

                }
            }
        }}); 
```

** 编辑 ** 我什至在 requestFocus() 之前添加了以下行：

```
((EditText)arg0).setFocusable(true); 
```

*** 编辑 ****

从这篇文章中尝试过：[停止 EditText 在 Activity 启动时获得焦点](https://stackoverflow.com/questions/1555109/stop-edittext-from-gaining-focus-at-activity-startup)

以下更改： 在我添加的第一个布局标题的布局中：

```
android:id="@+id/enterdata"
android:descendantFocusability="beforeDescendants"
android:focusableInTouchMode="true" 
```

然后在 OnChangeFocusListener 我这样做了：

```
Ehour.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View arg0, boolean arg1) {
            // TODO Auto-generated method stub
            if (!arg1) {
                if (((EditText)arg0).getText().length()<=0) {
                    Toast.makeText(getApplicationContext(), "No Hour Entered", Toast.LENGTH_LONG).show();
                    Calendar nohour = Calendar.getInstance();
                    ((EditText)arg0).setText(numberformatter(nohour.get(Calendar.HOUR_OF_DAY)));
                    findViewById(R.id.enterdata).requestFocus();
                    ((EditText)arg0).setFocusable(true);
                    ((EditText)arg0).setFocusableInTouchMode(true);
                    ((EditText)arg0).requestFocus();

                }
            }
        }}); 
```

但是我仍然得到与以前相同的行为，焦点所在的编辑文本保持这种状态，但我希望焦点转到的编辑文本看起来很集中，但它似乎无法使用，就好像它仍在等待专注。

*** 编辑 ****

下面的代码根据最近在 stackoverflow 上找到的帖子，其中提出问题的用户遇到了与我相同的问题：

```
 Ehour.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View arg0, boolean arg1) {
            // TODO Auto-generated method stub
            if (!arg1) {
                if (((EditText)arg0).getText().length()<=0) {

                    Calendar nohour = Calendar.getInstance();
                    ((EditText)arg0).setText(numberformatter(nohour.get(Calendar.HOUR_OF_DAY)));
                    if (((EditText)arg0).requestFocus()) {
                         getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
                         Emin.clearFocus();   
                         Toast.makeText(getApplicationContext(), "No Hour Entered", Toast.LENGTH_LONG).show();  
                    }

                }
            }
        }}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T13:16:20.590

试试`arg0.requestFocus()`。

不知道我头顶上是否有`View`工具，所以你可能不得不把它扔掉......`requestFocus()``((EditText) arg0).requestFocus()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-21T13:40:04.873

我有同样的问题，这里是我用来解决的代码：

```
EditText editText = (EditText) findViewById(R.id.myTextViewId);
editText.requestFocus();
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT); 
```

此致，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T05:09:57.490

```
new OnEditorActionListener(){
   @Override
   public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
      editText.requestFocus();
      //used ******* return true ******
      return **true**;
   }
} 
```

# class - corona sdk，旋转同一显示对象类的两个实例

> ID：14788514
> 
> 赞同：0
> 
> 时间：2013-02-09T13:10:20.993
> 
> 标签：class, rotation, lua, coronasdk, displayobject

我创建了一个名为 moonclass.lua 的 lua 文件，它创建了一个月亮的显示对象我创建了这个类的两个实例，也就是两个卫星，它们是在 level1.lua 中创建的

但是，当我尝试旋转两个卫星时，只有最后一个创建的月亮会旋转，而不管我将旋转指的是哪一个。

以下是moonclasss.lua：

```
local moon = {}

local moon_mt = { __index = moon }  -- metatable
local sprite

function moon.new(name)   -- constructor

local newMoon = {
name = name or "unnamed",

}
return setmetatable( newMoon, moon_mt)
end

function moon:draw(x,y,group)

sprite = display.newImage("image/moon.png")
sprite.x = x
sprite.y = y
physics.addBody( sprite, "dynamic", { density=1, friction=0.8, bounce=0.05, radius=145 } )
group:insert (sprite)
end

function moon:talk()    print( self.name .. " is called." )end

function moon:y(y)
sprite.y = sprite.y + y
return y
end

function moon:x(x)
sprite.x = sprite.x + x
return x
end

function moon:rotate(r)
sprite.rotation = sprite.rotation + r
return sprite
end

return moon 
```

和level1.lua：

```
local storyboard = require ("storyboard")
local scene = storyboard.newScene()
storyboard.purgeScene ("menu")
display.setStatusBar( display.HiddenStatusBar )

local physics = require("physics")
physics.start()
physics.setGravity(0, 0)

function scene:createScene(event)

local group = self.view
local background = display.newGroup()
local foreground = display.newGroup()
group:insert(background)
group:insert(foreground)

--BACKGROUND
backgroundimage = display.newImage("image/galaxy background.png")
foreground:insert(backgroundimage)
backgroundimage.x = display.contentWidth/2
backgroundimage.y = display.contentWidth/-1
require "starclass"
require "controls"

local moon = require ("moonclass")
local moon1 = moon.new("moon1")
moon1:draw(0,400,foreground)

local moon2 = moon.new("moon2")
moon2:draw(300,400,foreground)

moon1:talk()
moon2:talk()

local platform = require "platformclass"
platform.draw(512,200,foreground)
local platform2 = require "platformclass"
platform2.draw(50,0,foreground)

local rocket = require "rocketclass"
rocket.draw(200,600,foreground)

function gameloop(event)

--if (rockety > -1920 and rockety < 320) then
    --foreground.y = rockety + 320
--end
moon2:rotate(1)
moon1:rotate(-2)

end

Runtime:addEventListener("enterFrame", gameloop)

end

-- ENTER SCENE -- 
function scene:enterScene (event)

--local chapter1level1 = require("scene objects").loadlevelenterscene()

end
-- EXIT SCENE --
function scene.exitScene(event)
controlthrust:removeEventListener( "touch", thrust)
controlleft:removeEventListener( "touch", rotateleft)
controlright:removeEventListener( "touch", rotateright)
Runtime:removeEventListener("enterFrame", gameloop)
end

scene:addEventListener("createScene", scene)
scene:addEventListener("enterScene", scene)
scene:addEventListener("exitScene", scene)

return scene 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T13:56:41.393

```
local moon = require("moonclass")
local moon2 = require ("moonclass") 
```

这些行返回相同的对象。
`require`不会两次加载模块。
Second`require`简单地返回由 first 返回的值`require`。
您必须定义一个构造函数并调用它来创建新对象。

* * *

**编辑 ：**

```
local moon = {}

local moon_mt = { __index = moon }  -- metatable

function moon.new(name)   -- constructor
  local newMoon = {
    name = name or "unnamed"
  }
  return setmetatable( newMoon, moon_mt)
end

function moon:draw(x,y,group)
  self.sprite = display.newImage("image/moon.png")
  self.sprite.x = x
  self.sprite.y = y
  physics.addBody( self.sprite, "dynamic", { density=1, friction=0.8, bounce=0.05, radius=145 } )
  group:insert (self.sprite)
end

function moon:talk()    print( self.name .. " is called." )end

function moon:y(y)
  self.sprite.y = self.sprite.y + y
  return y
end

function moon:x(x)
  self.sprite.x = self.sprite.x + x
  return x
end

function moon:rotate(r)
  self.sprite.rotation = self.sprite.rotation + r
  return self.sprite
end

return moon 
```

# java - 仅自动打开应用程序一次

> ID：14788515
> 
> 赞同：-1
> 
> 时间：2013-02-09T13:10:20.757
> 
> 标签：java, android, android-source

我想制作一个类似于 SetupWizard 的应用程序。我的应用程序应该只在手机第一次打开时初始化一次，之后它就永远不会显示。我有办法在每次作为服务启动时自动运行它，但是如何让它只运行一次呢？

我研究过

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:24:26.793

[您可以在SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中存储一些值。并检查该值，如果它存在，则意味着应用程序已经初始化。

SharedPreferences 可以由用户清除（就像网络会话一样）。如果您想确保您的解决方案即使用户清除他的手机也能正常工作，那么您可以获取设备 IMEI（[此处](https://stackoverflow.com/questions/1972381/how-to-programmatically-get-the-devices-imei-esn-in-android)示例）并将其发送到某个服务器，该服务器检查该设备是否已经初始化？

# android - 无法将项目导入 Eclipse 工作区

> ID：14788516
> 
> 赞同：21
> 
> 时间：2013-02-09T13:10:31.787
> 
> 标签：android, eclipse, import

所以，我多年来一直在 Windows 中使用 eclipse。我有一些我最近一直在做的 android 项目。但我被困在了如此奇怪的事情上。

问题是我现在在 Windows 和 Linux 上都使用 eclipse。（是的，我觉得 linux 更好更快）。我想将我在 Windows 上使用的所有项目都放入 Linux Eclipse 工作区（是的，我创建了另一个工作区，因为我不知道是否可以在两个版本（即 linux 和 windows eclipse）中在同一个工作区上工作）。现在，奇怪的部分是**我无法将这些项目导入我的其他工作区！**这真让我抓狂。

我转到我的 Linux Eclipse 工作区 -> 导入 -> 添加现有的 android proj -> 浏览 -> 我的 android 项目的根目录 -> （Ecipse 确实在下面的框架上显示了项目 -> 我点击完成 ->**没有**。我只是坐在那里，等待，什么都没有发生。我在stackoverflow中搜索过这里，但没有一个问题与此类似。

是的，我可以访问工作区文件夹，是的，我可以创建文件夹等。

请有人告诉我如何导入正在检测但未导入的项目？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T13:41:02.580

我通过以下方式导入项目解决了这个问题：

`File > Import > Android > Existing Android Code Into Workspace`

点击`Next`，然后`Browse...`

选择您的项目根目录，然后选中`Copy projects into workspace`. 单击`Finish`。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-02T17:47:50.930

我也长期面临同样的问题，今天才找到解决方案！

这一切都在项目根目录中的 .project 和 .classpath 文件中。在尝试将任何项目导入工作区时，如果您的项目未列出，则意味着 .project 和/或 .classpath 文件丢失或损坏。通常这些文件是隐藏的，所以你永远不知道问题出在哪里。

对于 Ubuntu，请按照以下步骤操作：

**步骤 1.**转到工作区中的任何项目根目录，然后按 Ctrl+H 以查看隐藏文件。

**步骤 2.**从那里复制 .project 和 .classpath 文件并粘贴到您要导入的另一个项目目录。

**步骤 3.**打开 .project 文件并将名称标签更新为项目名称。

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
 <name>Name of the project</name>
 <comment></comment>
 .... 
```

**step 4.**关闭文件夹并导入项目，现在肯定会在导入向导中列出！！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-19T18:01:09.213

我也遇到了同样的问题。

您需要**更新 ADT**（Eclipse 插件）以使用新的 Android SDK。

单击**帮助 > 检查更新**

更新 ADT 后，您可以从**File > Import导入您的项目**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-11T23:27:57.440

确保检查**AndroidManifest.xml**文件是否存在于文件夹或子文件夹中。您必须拥有该文件才能导入。

这是我遇到的问题。幸运的是，我在 DropBox 中拥有无限历史功能，因此我能够使用它来获取文件的最后一个现有版本。一旦我添加它，导入就很好了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-18T07:50:51.773

可能是该项目已存在于工作区中。解决方案是更改您的工作区位置或仅重命名您正在导入的项目。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-13T05:51:00.827

我面临着同样的问题，这就是我所做的。- 在 Eclipse 中，转到 windows -> Preferences - 选择 Android，设置您的 Android SDK Location 确保您在表中至少有一个 Android 平台。- 申请并确定。

完成，我尝试导入，没关系。希望它有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-01T20:29:26.273

导入文件后，您可以从属性部分取消选择库中。它对我有用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-17T21:59:22.840

如果上面的所有问题都没有帮助你，打开一个与导入项目同名的新项目，完成后，转到原始项目，打开它并使用**ctrl+A**选择所有文件，然后将其复制粘贴到里面新项目，然后在警报**中单击“是** ”，它应该可以工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-21T22:55:20.423

如果以上答案都没有帮助，请检查包含项目的文件夹的权限。在命令行中的 Ubuntu 中试试这个：

```
sudo chmod 777 Folder_Containing_Projects -R 
```

上面的命令将递归地授予权限。

# android - 如何对使用 ProGuard 混淆的 Android APK 进行逆向工程/反编译？

> ID：14788517
> 
> 赞同：15
> 
> 时间：2013-02-09T13:10:34.617
> 
> 标签：android, apk, reverse-engineering, proguard, decompiling

不幸的是，我丢失了我使用 ProGuard 混淆的一个应用程序的源代码。
我仍然有`.apk`ProGuard 生成的文件和一些配置文件：

1.  `dump.txt`
2.  `mapping.txt`
3.  `seeds.txt`
4.  `usage.txt`

**到目前为止我做了什么？**

1.  [使用apktool](http://code.google.com/p/android-apktool/)解码的资源文件。
    耶，我把那些拿回来了！

2.  提取`.apk`文件并使用[dex2jar](http://code.google.com/p/dex2jar/)`classes.dex`将文件转换为文件。`.jar`

[如果我现在使用JD-Gui](http://java.decompiler.free.fr/?q=jdgui)查看源代码（.jar 文件），我会看到我的混淆代码。像这样的东西：

```
class c {
  TextView a;
  TextView b;
  TextView c;
  TextView d;
  CheckBox e;
}

protected List a(Uri[] paramArrayOfUri) { ... }

protected void a(List paramList) { ... } 
```

还有一些循环看起来有点奇怪。我不写无限循环：

```
while (true) {
     if (!localIterator.hasNext())
        return localArrayList;
     ProviderInfo[] arrayOfProviderInfo = ((PackageInfo)localIterator.next()).providers;
     if (arrayOfProviderInfo == null)
        continue;
     int i = arrayOfProviderInfo.length;
} 
```

是否可以使用 ProGuard 的任何 .txt 文件将混淆代码重新映射到我的原始源代码？我想看看我自己的变量名/方法签名。
或者这些文件是否只能用于跟踪崩溃报告堆栈跟踪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T23:11:36.853

您要查找的所有内容都在 mapping.txt 文件中，但我从未见过可以逆转这一切的工具。Proguard 执行的一些混淆不仅仅是简单地重命名方法和变量，因此您很可能无法做您想做的事情。Proguard 下载附带的 retrace.jar 可能会让您走得更远，但我很确定您必须将它与堆栈跟踪文件一起使用。

# html - div 容器内 div 的自动宽度

> ID：14788518
> 
> 赞同：0
> 
> 时间：2013-02-09T13:10:35.507
> 
> 标签：html, css

我有一个设计问题。我需要为视频播放器创建一个进度条。我有一个 div 容器 (id *videoManager* )，其中包含有关 PLAY、STOP、进度条、VOLUME、其他按钮的所有 div，所有这些都在另一个旁边（向左浮动）。

我希望进度条的 div（id *playerSlider*）根据剩余空间调整大小。我写下了这段代码，但如果使用“宽度：100%；” 对于这个 div，它没有得到剩余的空间，而是 100% 的容器。建议？

HTML：

```
<div id="videoManager">
  <div id="playpauseCommand">Play</div>
  <div id="stopCommand">Stop</div>
  <div id="playerSlider">
    <div id="objSlider"></div>
  </div>
  <div id="timeElement">10:12:12</div>
  <div id="volumeSlider"></div>
  <div id="displayCommand">Command</div>
</div> 
```

CSS：

```
div#videoManager{
   margin-top: 30px;
   width: 980px;
   height: 44px;
   background: transparent url('bg.jpg') center center repeat-x;
   position: relative;
   color: #fff;
}
   div#playpauseCommand, div#stopCommand{
      width: 44px;
      height: 44px;
      float: left;
      border-right: 2px solid #555;
   }
   div#playerSlider{
      float:left;
      height: 44px;
      width: 100%;
      padding: 15px 10px 0px 10px;
   }
      div#objectSlider{
         float: left;
         clear: left;
         width: 100%;
      }
   div#timeElement{
      float: left;
      height: 44px;
      width: 80px;
      border-right: 2px solid #555;
   }
   div#volumeSlider{
      float: left;
      height: 44px;
      width: 180px;
      border-right: 2px solid #555;
   }
   div#displayCommand{
      float: left;
      height: 44px;
      width: 70px;
      border-right: 2px solid #555;
   } 
```

这是[我网站](http://www.alessandrorabitti.eu/video/indexf.html)的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:22:49.320

试试这个css代码，但不确定这是否正是你想要的：

```
div#videoManager{
margin-top: 30px;
width: 980px;
height: 44px;
background: transparent url('bg.jpg') center center repeat-x;
position: relative;
color: #fff;
}
div#playpauseCommand, div#stopCommand{
  width: 44px;
  height: 44px;
  float: left;
  border-right: 2px solid #555;
}
div#playerSlider{
  float:left;
  height: 44px;
  width: 53%;
  padding: 15px 10px 0px 10px;
 position:absolute;
 left:178px;
}
 div#objectSlider{
     float: left;
     clear: left;
     width: 100%;
  }
div#timeElement{
  float: left;
  height: 44px;
  width: 80px;
  border-right: 2px solid #555;
}
div#volumeSlider{
  float: right;
  height: 44px;
  width: 180px;
  border-right: 2px solid #555;
}
div#displayCommand{
  float: right;
  height: 34px;
   width: 70px;
 top:10px;
  border-right: 2px solid #555;
position:relative;
} 
```

# android - 别名 <-----> 不存在

> ID：14788523
> 
> 赞同：0
> 
> 时间：2013-02-09T13:11:26.333
> 
> 标签：android, google-maps-api-3, maps, keystore, keytool

这是我第一次尝试签署地图，我从我的 mac 终端收到此错误，说 alias <-----> 不存在我试图使用密钥工具从我的 mac 获取我的 MD5。我已经google了一段时间了，谢谢你，我会在这里等你的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:25:51.840

听起来您的 Eclipse 别名错误，或者实际上如果我不得不猜测，文件位置错误。我会尝试制作一个新的密钥库并再做一次。根据您所说的错误，如果问题不在您的别名/密钥库设置与您使用的命令一致，我会感到震惊。IE 的别名错误，或不正确地指向您创建的密钥库等。不幸的是，如果没有更多关于您如何设置密钥库以及从何处运行命令等的详细信息，则无法从此处进一步调试。如果您无法自行修复它，我建议您截取一些设置密钥库的屏幕截图，然后写下您用于密钥工具的确切命令并发布它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T05:21:32.393

由于您使用的是 Eclipse，因此我建议以下内容：

1.  在 Eclipse 中，转到 Window -> Preferences。
2.  点击 Android -> 构建。
3.  您将看到一个条目`Default debug keystore`及其当前所在的目录/文件。

那是您需要触发这些`keytool`命令的文件。-keystore 参数将指向您在上面的步骤 3 中看到的文件。

希望这可以帮助。

# jquery - Jquery UI Autocomplete 从两个 json 变量中带入数据

> ID：14788527
> 
> 赞同：0
> 
> 时间：2013-02-09T13:12:01.380
> 
> 标签：jquery, json, autocomplete

我想在两个 json 变量中搜索数据但没有运气。这是我的自动完成代码

```
 $('#tag_name').autocomplete({
    source: location_json_array
    minLength: 2
  }); 
```

我的第一个 json 变量

```
 var location_json_array = {"4":{"01817":"\najman corniche road","01818":"\najman downtown","01819":"\najman industrial area","01820":"\najman marina","01821":"\najman meadows","01822":"\najman uptown","01823":"\nal ameera village","01824":"\nal humaid city","01825":"\nal ittihad village","01826":"\nal naemiyah","01827":"\nal rashidiya","01828":"\nal rumaila","01829":"\nal zahraa","01830":"\nawali city","01831":"\ncorniche ajman","01832":"\nemirates city","01833":"\ngreen city","01834":"\nmanama","01835":"\nmarmooka city","01836":"\nmuehat","01837":"\nmusheiref","01838":"\nnew industrial area","01839":"\npark view city","01816":"ain ajman","01343":"Ajman boulevard","03611":"Al Zahraa","03612":"Manama","03613":"Muehat","03614":"Musheiref"},"3":{"01774":"\nAl Brashi","01775":"\nAl Butina","01776":"\nAl Ettihad Street","01777":"\nAl Ghafeyah area","01778":"\nAl Jubail","01779":"\nAl Khaldeia Area","01780":"\nAl Khan","01781":"\nAl Khezamia","01782":"\nAl Majaz","01783":"\nAl Mamzar - Sharjah","01784":"\nAl Mareija","01785":"\nAl Nahda-sharjah","01786":"\nAl Naimiya Area","01787":"\nAl Nekhailat","01788":"\nAl Nouf","01789":"\nAl Nujoom Islands","01790":"\nAl Qasbaa","01791":"\nAl Qasemiya","01792":"\nAl Ramla","01793":"\nAl Riffa Area","01794":"\nAl Shahba","01795":"\nAl Taawon","01796":"\nAl Wahda","01797":"\nCornich Al Buhaira","01798":"\nHalwan","01799":"\nHamriyah Free Zone","01800":"\nMaysaloon","01801":"\nMuelih","01802":"\nRolla Area","01803":"\nSharjah Airport freezone (SAIF)","01804":"\nSharjah Industrial Area","01805":"\nUmm Khanoor","01806":"\nWasit","01773":"Abu shagara","03626":"Al Brashi","03627":"Al Butina","03628":"Al Jubail","03629":"Al Khan","03630":"Al Majaz","03631":"Al Nouf","03632":"Al Qasbaa","03633":"Al Ramla","03634":"Al Shahba","03635":"Al Taawon","03637":"Halwan","03638":"Maysaloon","03639":"Muelih","03640":"Wasit"},"7":{"01807":"\ndowntown fujairah","01808":"\nsheikh hamad bin abdullah st","01809":"corniche al fujairah"},"5":{"01813":"\nemirates modern industrial","01810":"\nkhor al beidah","01811":"\numm al quwain marina","01814":"\nwhite bay","01812":"al salam city","03641":"White Bay"},"2":{"03531":"Abu Dhabi Gate City","01457":"Airport road","03599":"Al Ain Industrial Area","01458":"Al aryam","03532":"Al Badaa","03533":"Al Bahia","03534":"Al Baraha","01459":"Al barza","03535":"Al Bateen","03600":"Al Buraymi","03536":"Al Dhafrah","03537":"Al Falah City","03601":"Al Faqa\u00e2\u20ac\u2122a","03538":"Al Ghadeer","03602":"Al Hili","01460":"Al hosn","03539":"Al Hudayriat Island","03540":"Al Ittihad Road","03603":"Al Jimi","03541":"Al Karama","03604":"Al Khabisi","03542":"Al Khaleej Al Arabi Street","03543":"Al Khalidiya","03544":"Al Maffraq","01461":"Al maha","03545":"Al Manaseer","03546":"Al Manhal","03605":"Al Maqam","03547":"Al Maqtaa","01462":"Al markaz","03548":"Al Markaziyah","03606":"Al Markhaniya","01463":"Al mina","01464":"Al muneera","03549":"Al Mushrif","03550":"Al Nahda Abu Dhabi","01465":"Al nahyan","03551":"Al Nahyan Camp","03552":"Al Najda Street","03553":"Al Qurm","01466":"Al raha","03554":"Al Raha Beach","03555":"Al Raha Gardens","03556":"Al Raha Golf Gardens","03557":"Al Rahba","03558":"Al Rawdah","03559":"Al Reef","01467":"Al reef villas","01468":"Al reem","03560":"Al Reem Island","01469":"Al rehhan","03561":"Al Ruwais","03562":"Al Samha","03563":"Al Shahama","03564":"Al Shamkha","03607":"Al Sinaiya","03565":"Al Sowwah","03608":"Al Tawiya","03566":"Al Wahda","03567":"Al Wathba","03568":"Al Zaab","01470":"Arabian village","03569":"Baniyas","03570":"Between Two Bridges","03571":"Building Materials City","01471":"Capital plaza","03572":"City Downtown","01472":"Corniche","03573":"Corniche Area","03574":"Corniche Road","03575":"Danet Abu Dhabi","03576":"Defence Street","01473":"Delma street","03577":"Desert Village","03578":"Eastern Road","03579":"Electra Street","03580":"Ghantoot","03581":"Grand Mosque District","01474":"Hamdan street","03582":"Hydra Village","03583":"Jawazat Street","01475":"Khalidia","01476":"Khalifa city (all)","01477":"Khalifa city a","01478":"Khalifa city b","01479":"Khalifa city c","03584":"Khalifa Street","03585":"Lulu Island","03586":"Madinat Zayed","03587":"Marina Village","03588":"Masdar City","01480":"Mbz","03589":"Mohamed Bin Zayed City","03590":"Muroor Area","01481":"Musaffah industrial area","01482":"Mushrif","03591":"Mussafah","01483":"New khalifa city","03592":"Nurai Island","01484":"Officers city","05678":"Officers Club Area","03593":"Saadiyat Island","03594":"Salam Street","03595":"Sas Al Nakheel","01485":"Silver wave","01486":"Sky","03609":"Tawam","03596":"Tourist Club Area","03597":"Yas Island","03610":"Zakher","03598":"Zayed Military City"},"1":{"017":"Al Barsha","082":"Al Furjan","04924":"Al Garhoud","05780":"Al Khawaneej","05684":"Al Mamzar","075":"Al Nahda","076":"Al Quoz","072":"Al Rigga","05773":"Al Sufouh","05715":"Al Warqaa","05695":"Al Warsan","05709":"Al Wasl","012":"Arabian Ranches","018":"Bur Dubai","013":"Business Bay","04940":"Culture Village","044":"Deira","036":"DIFC","014":"Discovery Gardens","024":"Downtown Burj Dubai","074":"Dubai Healthcare City","079":"Dubai Internet City","070":"Dubai Investment Park","015":"Dubai Marina","078":"Dubai Media City","05745":"Dubai Waterfront","033":"Dubailand","026":"Emirates Hills","05680":"Festival City","031":"Green Community","020":"Greens","054":"IMPZ","027":"International City","019":"JBR","073":"Jebel Ali","030":"Jumeirah","042":"Jumeirah Golf Estates","04916":"Jumeirah Heights","039":"Jumeirah Islands","022":"Jumeirah Lake Towers","040":"Jumeirah Park","053":"Jumeirah Village","05712":"Jumeirah Village Triangle","034":"Lakes","025":"Meadows","037":"Mirdiff","047":"Motor City","05777":"Muhaisnah","023":"Old Town","035":"Other","05758":"Palm Jebel Ali","016":"Palm Jumeirah","038":"Satwa","028":"Sheikh Zayed Road","055":"Silicon Oasis","043":"Sports City","021":"Springs","048":"TECOM","041":"The Gardens","04934":"The World Islands","029":"Umm Suqueim","032":"Victory Heights","068":"World Trade Centre"},"6":{"01442":"Al hamra (all)","03615":"Al Hamra Village","01443":"Al marjan island","01444":"Bab al bahr","03616":"Cornich Ras Al Khaima","01445":"Cove","03617":"Dana Island","01446":"Golf apartments","01447":"Granada","01448":"Julfar","01449":"Julfar office","01450":"Julfar residential","01451":"Luxury b villa","01452":"Luxury c villa","01453":"Malibu","01454":"Marina apartments","03618":"Mina Al Arab","01455":"Oceana apartments","03619":"RAK Financial City","03620":"RAK Industrial and Technology Park","03621":"Ras Al Khaimah Creek","03622":"Ras al Khaimah Gateway","03623":"Ras Al Khaimah Waterfront","01456":"Royal breeze villas","03624":"Saraya Islands","03625":"Yasmin Village"}}; 
```

同样，我有另一个变量，因此如果未找到，则将在第一个中搜索搜索词，然后在第二个中搜索

# php - 如果登录但没有结果，回显其他内容？

> ID：14788528
> 
> 赞同：-1
> 
> 时间：2013-02-09T13:12:05.550
> 
> 标签：php, mysql, if-statement

目前我有一个脚本可以得到用户的评论。如果该用户没有任何评论并且用户未登录，那么它将回显：

```
 <?
    }

       }else{
          if (!logged_in()) {   
              echo "<div class=\"infobox-noreviews\"><i>{$profile['display_name']
          }   
        doesn't currently have any reviews.<br/>To post a review to his wall,
        <a href=\"loginframe.php\" rel=\"shadowbox;height=300;width=500\">Login</a>
        &nbsp;now.
        </i></div>
        <div class=\"example_review\"><div class=\"example_review_pic\">
          <img width=50px height= 50px src=\"data/photos/0/review.jpg\"/>
        </div>
        <div class=\"example_review_text\">e.g. I had an amazing time. Defo going to be               meeting again.
        <br/><br/>Thanks Larry x</div><div class=\"example_review_pic2\">
        </div></div>
        <div class=\"example_box_container\"><div class=\"review_example_arrow\"></div>
        <div class=\"review_example_box\"></div><div class=\"review_example_text\">   <strong>Here's an Example</strong>
        </div></div>";
    }
    $account_type = account_type();
    if ($acctype['account_type'] == 'member') {
         echo "<div class=\"infobox-noreviews\"><i>{$profile['display_name']
     }
     doesn't currently have any reviews.<br/>Why not post a review to his wall now.</i>   </div>";
   }
     $account_type = account_type();

     if ($acctype['account_type'] == 'user') {
       echo "<div class=\"infobox-noreviews\"><i>{$profile['displays_name']
      } 
     doesn't currently have any reviews.<br/>Sorry but users cannot post Reviews.</i>  </div>";

   }

  }

 ?> 
```

否则，用户评论会同时显示给已登录和已注销的用户。但是我也想这样做，如果用户登录并且没有评论，那么它也会回显上述脚本。我试过这样做，但不知道该怎么做。

请有人可以帮助我并向我展示我能做什么。谢谢继承人我的脚本：

```
<div class="reviewcontent">
    <?php if ($user['account_type'] == "user"){
    ?>
    <?php
     $days = $reviews['date_added'];

    function days_from_date($days) {

           $age = date_diff(date_create($days), date_create('now'))->d;  
           return $age;
    }

    ?>

    <div class="reviewcontent1">
    <?php
        $reviews_set = get_reviews();
        ?>
        <br/>
        <h3>Latest Reviews</h3>
        <br/> 

        <?php
        if(mysql_num_rows($reviews_set) > 0) {
            while ($reviews = mysql_fetch_array($reviews_set)) {
                $age = days_from_date($reviews['date_added']);
                ?>
                <div class="reviewcase" id="reviewcase">
                 <div class="review-content">
                 <?php echo "{$reviews['content']}"; ?>
                 </div>
                 <div class="message_pic">
                 <?php echo "<a href=\"profile.php?id={$reviews['from_user_id']}\"><img width=\"50px\" height=\"50px\"  src=\"{$prof_photo}\"></a>";?>

                 </div>

                 <div class="reviews_footer">
                 <?php echo "Posted by {$reviews['display_name']}"; ?>&nbsp;<?
            $datetime1 = new DateTime();
            $datetime2 = new DateTime ($reviews['date_added']);
            $interval = $datetime1->diff($datetime2);
            $mdhms = explode('-',$interval->format('%m-%d-%H-%i-%s'));

    $labels = Array(' months', ' days', ' hours', ' minutes', ' seconds');
    $i = 0;
    foreach($mdhms as $t){
      if($t > 0) break;
      $i+=1;
    }
            echo "about ".$t.$labels[$i]." ago"; ?>

              </div>

                 </div>

                 <?
            }

            }else{

        if (!logged_in()) {

    echo "<div class=\"infobox-noreviews\"><i>{$profile['display_name']} doesn't currently have any reviews.<br/>To post a review to his wall, <a href=\"loginframe.php\" rel=\"shadowbox;height=300;width=500\">Login</a>&nbsp;now.</i></div>
    <div class=\"example_review\"><div class=\"example_review_pic\"><img width=50px height= 50px src=\"data/photos/0/review.jpg\"/>
    </div><div class=\"example_review_text\">e.g. I had an amazing time. Defo going to be meeting again.<br/><br/>Thanks Larry x</div><div class=\"example_review_pic2\"></div></div><div class=\"example_box_container\"><div class=\"review_example_arrow\"></div><div class=\"review_example_box\"></div><div class=\"review_example_text\"><strong>Here's an Example</strong></div></div>";
        }

        $account_type = account_type();

         if ($acctype['account_type'] == 'member') {
    echo "<div class=\"infobox-noreviews\"><i>{$profile['display_name']} doesn't currently have any reviews.<br/>Why not post a review to his wall now.</i></div>";

     }
     $account_type = account_type();

     if ($acctype['account_type'] == 'user') {
    echo "<div class=\"infobox-noreviews\"><i>{$profile['displays_name']} doesn't currently have any reviews.<br/>Sorry but users cannot post Reviews.</i></div>";

            }

            }

    ?>

    <?

    }  
    ?>
    <?php

    {?>      

    <?php
    if (logged_in() != '') {
    $account_type = account_type();
    while ($acctype = mysql_fetch_array($account_type)) 

     if ($acctype['account_type'] == 'member')  { 

     ?>

     <?php 
    // check if the review form has been sent
    if(isset($_POST['review_content']))
    {
        $content = $_POST['review_content'];
            //We remove slashes depending on the configuration
            if(get_magic_quotes_gpc())
            {
                    $content = stripslashes($content);
            }
            //We check if all the fields are filled
            if($_POST['review_content']!='')
            {

                {
                $sql = "INSERT INTO ptb_reviews (id, from_user_id, to_user_id, content) VALUES (NULL, '".$_SESSION['user_id']."', '".$profile_id."', '".$content."');";
                mysql_query($sql, $connection);

                echo "<div class=\"infobox-profile4\"><strong>Thank You</strong> - Your review has been sent for approval.</div>";
            } }
    }

    ?> 

     <?php if(isset ($_SESSION['user_id'])) { ?>
    <div class="review-input-case">
    <div class="reviewcase" id="reviewcase">
    <form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">Review user:<br /><textarea name="review_content" rows="4" maxlength="120" class="review_input_box" style="resize: none;"></textarea><input name="add_review" type="submit" class="review_submit"value="Add Review" /></form>
    </div>
    </div>

    <?php } } }  ?>

    <?php
    if (logged_in() != '') {
    $account_type = account_type();
    while ($acctype = mysql_fetch_array($account_type)) 

     if ($acctype['account_type'] == 'user')  { ?>

     <?php 
    // check if the review form has been sent
    if(isset($_POST['review_content']))
    {
        $content = $_POST['review_content'];
            //We remove slashes depending on the configuration
            if(get_magic_quotes_gpc())
            {
                    $content = stripslashes($content);
            }
            //We check if all the fields are filled
            if($_POST['review_content']!='')
            {

                {
                $sql = "INSERT INTO ptb_reviews (id, from_user_id, to_user_id, content) VALUES (NULL, '".$_SESSION['user_id']."', '".$profile_id."', '".$content."');";
                mysql_query($sql, $connection);

                echo "<div class=\"infobox-profile4\"><strong>Thank You</strong> - Your review has been sent for approval.</div>";
            } }
    }

    ?> 

     <?php if(isset ($_SESSION['user_id'])) { ?>
    <div class="review-input-case">
    <div class="reviewcase" id="reviewcase">
    <form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">Review user:<br /><textarea name="review_content" rows="4" class="review_input_box" style="resize: none;" disabled="yes" placeholder="user Profiles Cannot Leave Reviews."></textarea><input name="add_review" type="submit" class="review_submit" value="Add Review" disabled="yes"/></form>
    </div>
    </div>

    <?php } } }  ?>

    <?php
    if (!logged_in()) { ?>
    <div class="review-input-case">
         <div class="reviewcase" id="reviewcase">
    <form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">Review user:<br /><textarea name="review_content" rows="4" class="review_input_box" style="resize: none;" disabled="yes" placeholder="You must be logged in to leave this user a Review."></textarea><input name="add_review" class="review_submit" type="submit" value="Add Review" disabled="yes"/></form>
    </div></div>

    <? } }?>

    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:55:54.627

```
$query = mysql_query("SELECT reviews FROM users WHERE userid=$id");  
  if(mysql_num_rows($query)<1)
    {
       include('the file with  first code');
       // or
       // echo 'the first code';
    }
else
{

} 
```

# php - PHP 模块化系统依赖解析器

> ID：14788529
> 
> 赞同：2
> 
> 时间：2013-02-09T13:12:09.997
> 
> 标签：php, algorithm

我想构建一个基于模块化的 PHP 项目。每个模块都可以通过管理工具启用/禁用，并且每个模块都可以依赖于其他模块。每个模块都可以在一个简单的清单文件中声明其依赖关系，例如`dependsOn: A, B, C`A、B 和 C 是需要启用的其他模块。

我的问题是，对于这种模块化系统，是否有一个好的实践或现成的解决方案来解决依赖关系图？

关键是我想在启用模块时检查依赖关系并向用户发送消息以启用依赖模块。通过启用依赖模块，它们也可以依赖于其他模块，依此类推。

如果解决方案可以在图中找到循环，那就太好了，比如 A 依赖于 B，B 依赖于 C，但 C 依赖于 A。

最好的问候，费里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:18:30.380

您可能想查看 Composer - [http://getcomposer.org/](http://getcomposer.org/) - 我认为它满足您的一些要求，但是当在运行时启用模块时，您必须找到一种连接其功能的好方法。

# ios - 带有数组 ios 的 for 循环

> ID：14788533
> 
> 赞同：0
> 
> 时间：2013-02-09T13:12:33.537
> 
> 标签：ios, objective-c, cocoa-touch, for-loop

我必须找到一种方法来检查（按一下按钮）文本字段中的文本是否存在于 xml 文件中。

我认为如果我将 xml 文件作为数组加载，那么我可以使用 for 循环来查看它是否与数组中的结果相同。

对于循环根本不实用，你能解释一下我如何为这类问题编写代码吗？

我希望如果整个数组中不存在该对象，则显示警报

谢谢

```
- (void)viewDidLoad
  {
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

cose = [[NSArray alloc] initWithObjects:@"giovanni",@"giulio",@"ciccio",@"panzo", nil];

 }

- (void)didReceiveMemoryWarning
  {
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

  -(IBAction)prova {

for (NSString *myElement in cose) {
    if ([myElement isEqualToString:textfield1.text]) {
        label1.text = textfield1.text;

    }
    else {

        UIAlertView *alertCellulare = [[UIAlertView alloc] initWithTitle:@"Attenzione!"       message:@"connessione assente" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];

        [alertCellulare show];
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:05:16.100

使用快速枚举：

```
-(IBAction)prova 
{
    BOOL present = NO;
    for (NSString *myElement in cose) {
        if ([myElement isEqualToString:textfield1.text]) {
            label1.text = textfield1.text;
            present = YES;
            break;
        }
    }

    if (!present){
        UIAlertView *alertCellulare = [[UIAlertView alloc] initWithTitle:@"Attenzione!"       message:@"connessione assente" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
        [alertCellulare show];
    }
} 
```

* * *

基于块的枚举

```
-(IBAction)prova 
{
    __block BOOL present = NO;
    [cose enumerateObjectsUsingBlock:^(NSString *name, NSUInteger idx, BOOL *stop){

        if ([name isEqualToString:textfield1.text]) {
            label1.text = textfield1.text;
            present = YES;
            *stop = YES;
        }

     }];

    if (!present){
        UIAlertView *alertCellulare = [[UIAlertView alloc] initWithTitle:@"Attenzione!"       message:@"connessione assente" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
        [alertCellulare show];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T13:21:11.337

为什么不使用 For-In 循环（快速枚举）？

像这样的东西：

```
for (NSString *myElement in myArray) {
    if ([myElement isEqualToString:myTextField.text]) {
        // Do something
    }
} 
```

# c++ - C++中相同符号的多个定义（Visual Studio）

> ID：14788536
> 
> 赞同：0
> 
> 时间：2013-02-09T13:12:54.923
> 
> 标签：c++, visual-studio-2010, multiple-definition-error

我有一个非常简单的代码问题我正在关注 chrono::engine [http://www.chronoengine.info/mediawiki/index.php/Demo_fourbar](http://www.chronoengine.info/mediawiki/index.php/Demo_fourbar)的教程 我在 C++ 编程方面没有太多经验（我有一些 Java 经验），因此我尝试在不同的文件（MyEventReceiver.h 和 MyEventReceiver.cpp）中定义 MyEventReceiver（教程中的一个类），以了解 C++ 代码的经典结构

这是代码的版本

MyEventReceiver.h

```
#ifndef RECEIVER_H
#define RECEIVER_H

#include "physics/CHapidll.h"
#include "physics/CHsystem.h"
#include "irrlicht_interface/CHbodySceneNode.h"
#include "irrlicht_interface/CHbodySceneNodeTools.h"
#include "irrlicht_interface/CHdisplayTools.h"
#include "irrlicht_interface/CHirrWizard.h"
#include "core/CHrealtimeStep.h"

#include <irrlicht.h>

// Use the namespace of Chrono
using namespace chrono;

// Use the main namespaces of Irrlicht
using namespace irr;
using namespace core;
using namespace scene;
using namespace video;
using namespace io;
using namespace gui;

class MyEventReceiver : public IEventReceiver
{
public:
    MyEventReceiver(ChSystem* asystem, IrrlichtDevice* adevice,     ChSharedPtr<ChLinkEngine> aengine);
    bool OnEvent(const SEvent& event);
    void setText_enginespeed(IGUIStaticText* _text_enginespeed);
    IGUIStaticText* getText_enginespeed();
private:
    IGUIStaticText* text_enginespeed;
    ChSystem*       msystem;
    IrrlichtDevice* mdevice;
    ChSharedPtr<ChLinkEngine> mengine;
};

#endif 
```

在 MyEventReceiver.cpp 中实现如下

```
#include "MyEventReceiver.h"

// Constructor
MyEventReceiver::MyEventReceiver(ChSystem *asystem, IrrlichtDevice *adevice, ChSharedPtr<ChLinkEngine> aengine)
{
    // store pointer to physical system & other stuff
    // so we can tweak them by user keyboard
    msystem = asystem;
    mdevice = adevice;
    mengine = aengine;
}

bool MyEventReceiver::OnEvent(const SEvent& event)
{
    // check if user moved the sliders with mouse..
        if (event.EventType == EET_GUI_EVENT)
        {
            s32 id = event.GUIEvent.Caller->getID();
            IGUIEnvironment* env = mdevice->getGUIEnvironment();

            switch(event.GUIEvent.EventType)
            {
            case EGET_SCROLL_BAR_CHANGED:
                    if (id == 101) // id of 'engine speed' gui
                    {
                        s32 pos = ((IGUIScrollBar*)event.GUIEvent.Caller)->getPos();
                        double newspeed = 10*(double)pos/100.0;

                        // set the speed into engine object
                        ChFunction_Const *spe_funct = dynamic_cast <ChFunction_Const*> (mengine->Get_spe_funct());
                        spe_funct->Set_yconst(newspeed);

                        // show speed as formatted text in interface screen
                        char message[50]; sprintf(message,"Engine speed: %g [rad/s]",newspeed);
                        text_enginespeed->setText(core::stringw(message).c_str());

                    }
            break;
            }

        }

        return false;
}

void MyEventReceiver::setText_enginespeed(IGUIStaticText* _text_enginespeed)
{
    text_enginespeed = _text_enginespeed;
}

IGUIStaticText* MyEventReceiver::getText_enginespeed()
{
    return text_enginespeed;
} 
```

和 Main_2.cpp 中的主文件（我清空了它，无论有没有代码，它都会给我同样的错误 - 这基本上只是设置 3D 引擎 Irrlicht 和 chrono::engine 的碰撞模型中的一些力学特性）

```
#include "MyEventReceiver.h"

int main()
{
    return 0;
} 
```

基本上，代码定义了一个事件接收器，以便用户在运行程序后可以通过 GUI 操作与由 chrono::engine 和 Irrlicht 引擎构建的 3D 环境交互我在 MyEventReceiver.h 文件中定义了所有必需的库和所需的库命名空间

问题是它无法编译（请注意，我已经测试了引擎 - 使用相同的#include 并在一个文件中使用命名空间并且它在不同的项目中工作 - ），我认为问题来自结构的头文件

我得到了那些错误行

```
1>MyEventReceiver.obj : error LNK2005: "public: virtual bool __thiscall irr::scene::RTSCamera::OnEvent(struct irr::SEvent const &)" (?OnEvent@RTSCamera@scene@irr@@UAE_NABUSEvent@3@@Z) already defined in Main_2.obj
1>MyEventReceiver.obj : error LNK2005: "public: virtual void __thiscall irr::scene::RTSCamera::OnRegisterSceneNode(void)" (?OnRegisterSceneNode@RTSCamera@scene@irr@@UAEXXZ) already defined in Main_2.obj 
```

等等......（它继续这样）和最后的错误

```
1>C:\Users\****\Documents\Visual Studio 2010\Projects\TutorialChronoEngine\Debug\TutorialChronoEngine_2.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

我正在使用 Visual Studio 2010 C++。我定义了一个全局解决方案，并在这个解决方案中定义了几个项目（我上面编写的程序是其中一个项目）我确信它一定很容易解决，但无法真正找到解决方案。如果您需要更多详细信息，请告诉我

非常感谢最好的问候文森特

编辑：如果我将所有代码放在一个文件中，如下所示

```
#include "physics/CHapidll.h"
#include "physics/CHsystem.h"
#include "irrlicht_interface/CHbodySceneNode.h"
#include "irrlicht_interface/CHbodySceneNodeTools.h"
#include "irrlicht_interface/CHdisplayTools.h"
#include "irrlicht_interface/CHirrWizard.h"

#include <irrlicht.h>

// Use the namespace of Chrono

using namespace chrono;

// Use the main namespaces of Irrlicht
using namespace irr;
using namespace core;
using namespace scene;
using namespace video;
using namespace io;
using namespace gui;

// Get rid of the command windows that pops up when compiling and running
#ifdef _IRR_WINDOWS_
#pragma comment(linker, "/subsystem:windows /ENTRY:mainCRTStartup")
#endif

IGUIStaticText* text_enginespeed = 0;

class MyEventReceiver : public IEventReceiver
{
public:

    MyEventReceiver(ChSystem* asystem,
                    IrrlichtDevice *adevice,
                    ChSharedPtr<ChLinkEngine> aengine)
    {
        // store pointer to physical system & other stuff
        // so we can tweak them by user keyboard
        msystem = asystem;
        mdevice = adevice;
        mengine = aengine;
    }

    bool OnEvent(const SEvent& event)
    {

        // check if user moved the sliders with mouse..
        if (event.EventType == EET_GUI_EVENT)
        {
            s32 id = event.GUIEvent.Caller->getID();
            IGUIEnvironment* env = mdevice->getGUIEnvironment();

            switch(event.GUIEvent.EventType)
            {
            case EGET_SCROLL_BAR_CHANGED:
                    if (id == 101) // id of 'engine speed' gui
                    {
                        s32 pos = ((IGUIScrollBar*)event.GUIEvent.Caller)->getPos();
                        double newspeed = 10*(double)pos/100.0;

                        // set the speed into engine object
                        ChFunction_Const *spe_funct = dynamic_cast <ChFunction_Const*> (mengine->Get_spe_funct());
                        spe_funct->Set_yconst(newspeed);

                        // show speed as formatted text in interface screen
                        char message[50]; sprintf(message,"Engine speed: %g [rad/s]",newspeed);
                        text_enginespeed->setText(core::stringw(message).c_str());
                    }
            break;
            }

        }

        return false;
    }

private:
    ChSystem*       msystem;
    IrrlichtDevice* mdevice;
    ChSharedPtr<ChLinkEngine> mengine;
};

int main(int argc, char* argv[])
{

    return 0;
} 
```

这样，我避免了从 Irrlicht 3D 引擎定义多次未定义为内联的函数。不幸的是，如果项目变得很大（必须在一个唯一的 .cpp 文件中定义所有依赖于 3D 引擎的类），这种编码方式会变得非常麻烦，是否有一种设计模式可以遵循，以便可以避免多个定义的对象，每个类都定义在一个单独的文件中？

非常感谢

最好的

文森特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:31:51.940

链接器抱怨您的两个函数被多次定义。正如您可能从错误中找出的那样，这些功能是：

```
irr::scene::RTSCamera::OnEvent(struct irr::SEvent const &)
irr::scene::RTSCamera::OnRegisterSceneNode(void) 
```

这里最有可能发生的是这两个函数是在头文件中定义的，但是：

*   它们的定义没有直接出现在类定义中（因此它们没有被隐式声明为内联）；
*   它们在头文件中的类外定义未明确标记为内联。

因此，如果在不同的翻译单元（即不同的`.cpp`文件）中多次包含标头，则相同函数的多个定义最终将出现在这些翻译单元的目标代码中。

合并它们时，链接器会抱怨您违反了 ODR（一个定义规则）。

# ios - 如何为我的移动基板调整制作首选项包？

> ID：14788543
> 
> 赞同：2
> 
> 时间：2013-02-09T13:13:26.623
> 
> 标签：ios, settings, tweak, theos, cydia-substrate

我有`theos`，`sdk3`安装在我的 iPhone

我也创建了一个有效的调整，但不知道如何创建首选项包来添加一些设置。

我想将一个是/否或一个布尔按钮添加到首选项按钮中，以查看是否要启用调整

如果启用或未启用，我如何进行调整以读取？示例：

```
-(void)Something {
    if (Enable = YES) {
        /*Method here*/ }
    else {
        //Do nothing
         }
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T20:48:24.340

尝试检查此链接[http://blog.aehmlo.com/2012/08/03/new-tweak-readme/](http://blog.aehmlo.com/2012/08/03/new-tweak-readme/) Aehmlo Lxaitn 详细解释了如何进行简单的调整并添加设置以启用/禁用它。

这个对我有用。希望这是你需要的。

您可能还想从 Cydia 安装“Theos 教程”。它的作者是ReverseEffect。

[来自http://shahiddev.blogspot.com/2011/11/mobilesubstrate-tweak-tutorial-with.html](http://shahiddev.blogspot.com/2011/11/mobilesubstrate-tweak-tutorial-with.html)的另一个教程

前往设置”

```
如果用户想禁用我们的调整怎么办？我们可以给他
从首选项包启用或禁用它的能力。
（对于像这样简单的事情，我们可以只使用 plist，但我们将使用
首选项捆绑项目，以便试用）。我将跳过一些
跟着这个步骤，因为你可以自己弄清楚，看着
您可以在下面下载源代码。

 - 启动新的实例创建者，并启动“PreferenceBundle”项目。
 - 将该项目添加为您的主要调整项目中的“子项目”，通过
   在 Makefile 中添加 SUBPROJECTS = tutorialsettings 键。
 - 首选项包的结构由包含的 plist 给出
   一个集合 os PSSpecifiers，由标准 Preferences 应用程序使用。
 - 创建一个控制“启用”键的开关。
 - 对于它的“默认”键，将其设置为您之前使用的包 ID
   （com.filippobiga.tutorial）。这意味着它将写入一个 plist
   用户的 Preferences 文件夹中的该名称。
 - 现在需要修改 Tweak.xm 中的代码来读取用户的
   设置并确定它是否应该闪烁屏幕。

而已！
```

# java - 跨应用程序重用 JEditorPane

> ID：14788551
> 
> 赞同：2
> 
> 时间：2013-02-09T13:13:54.790
> 
> 标签：java, swing, code-reuse, jeditorpane, jtextcomponent

```
public class EditorPane extends javax.swing.JPanel {

/**
 * Creates new form EditorPane
 */
public EditorPane() {
    initComponents();
}

private void launchHyperLink(HyperlinkEvent e) {
    try {
        if (System.getProperty("os.name").toLowerCase().contains("windows")) {

            String cmdFileLocation = System.getenv("windir") + File.separator + "system32" + File.separator + "cmd.exe";
            Runtime.getRuntime().exec(new String[]{cmdFileLocation, "/c", "start", e.getDescription()});
        }
    } catch (IOException ex) {
        Logger.getLogger(MainMenu.class.getName()).log(Level.SEVERE, null, ex);
    }
}

private void initEditorPane(JEditorPane editorPane) {
    editorPane.setBorder(null);
    editorPane.setContentType("text/html");
    editorPane.setEditable(false);
    editorPane.setOpaque(false);
    editorPane.addHyperlinkListener(new HyperlinkListener() {

        @Override
        public void hyperlinkUpdate(HyperlinkEvent e) {
            if (e.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
                launchHyperLink(e);
            }
        }
    });
} 
```

我正在尝试在多个不同的 GUI 中重复使用上述 EditorPane，因为它们具有不同的超链接，它们的行为方式相同。

但我不确定如何`initEditorPane`在 GUI 中调用该方法。

这就是我的意思：

```
public class MainMenu extends javax.swing.JFrame {

    private AcademicDTO ac;

    public MainMenu(AcademicDTO academicDTO) {
        this.ac = academicDTO;
        initComponents();
        searchTable.init(GUIStaticDataHelper.ACADEMIC_SUMMARY_COLUMNS);
        myContactTable.init(GUIStaticDataHelper.CONTACT_SUMMARY_COLUMNS);
        initEditorPane(emailTxtComp);
        initEditorPane(pageTxtComp);
        initComponentsWithData();
        initListeners(); 
    }

    public void initComponentsWithData() {
        nameLabel.setText("" + ac.getTitle() + " " + ac.getForename() + " " + ac.getSurname());
        roleLabel.setText(ac.getRole());
        roomLabel.setText("Room:    " + ac.getRoom());
        pageLabel.setText("Page:");
        pageTxtComp.setText("<html>&nbsp;<a href='" + ac.getPage() + "'>" + ac.getPage() + "</a>&nbsp;</html>");
        hoursLabel.setText("Hours:   " + ac.getHours());
        phoneLabel.setText("Phone:   " + ac.getPhone());
        mobileLabel.setText("Mobile:  " + ac.getMobile());
        emailLabel.setText("Email:");
        myContactTable.setData(ac.getContacts());
        if (ac.getImage() != null) {
            imageLabel.setIcon(new ImageIcon(ac.getImage()));
        }
        emailTxtComp.setText("<html>&nbsp;<a href='mailto://" + ac.getEmail() + "'>" + ac.getEmail() + "</a>&nbsp;</html> ");
    } 
```

`emailTxtComp`并且`pageTxtComp`现在都是 type`EditorPane`而不是`JEditorPane`. 所以这个方法`initEditorPane(JEditorPane editorPane)`不能用。

还有线条

```
initEditorPane(emailTxtComp);
            initEditorPane(pageTxtComp); 
```

我要把它们改成什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:33:45.457

困难的问题，因为我不知道您的系统是如何设计的。这里有2个建议：

1.  从对象的构造函数中自动调用方法`initEditorPane`（如果所有这些窗格都应该支持）
2.  在 EditorPane 中进行静态初始化。

    公共静态无效 buildPane(EditorPane aPane) { initEditorPane(aPane.editorPane); }

而且，正如垃圾神在评论中所说，从 Java 6 开始，您可以使用类 Desktop 来调用浏览器。

```
protected void launchHyperLink(HyperlinkEvent e) {
  if (Desktop.isDesktopSupported()) {
    try {
      Desktop.getDesktop().browse(e.getURL().toURI());
    } catch (Exception ex) {
      Logger.getLogger(MainMenu.class.getName()).log(Level.SEVERE, null, ex);
    }
  }
} 
```

# internet-explorer - 有没有办法用 AutoIt 检测 Internet Explorer 窗口中的数据流量？

> ID：14788552
> 
> 赞同：0
> 
> 时间：2013-02-09T13:13:57.123
> 
> 标签：internet-explorer, network-programming, fiddler, autoit

有没有办法通过带有 AutoIt 的 Internet Explorer 窗口（如 Event Listener 或 Fiddler）检测和保存传入和传出数据？

或者有没有其他方法可以用另一个浏览器做到这一点？

# javascript - JS不在同一个脚本应答器中

> ID：14788553
> 
> 赞同：0
> 
> 时间：2013-02-09T13:13:57.210
> 
> 标签：javascript, function

大家好！

```
 <script>
     error();
   </script>

<script>
function error(){
alert('erreur');
}
</script> 
```

未调用函数“错误”。我知道这没用，但我想知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:21:11.530

执行第一个时`<script>`，该`error`函数尚未定义。您应该在错误控制台中得到一个异常说明。

虽然通常在 JavaScript 中[提升适用于函数声明](https://stackoverflow.com/questions/14299659/questions-on-javascript-hoisting)，但这不适用于跨脚本（在语法术语中：跨*程序*文本）。将您的脚本更改为以下内容将使其工作：

```
<script>
   error();

   function error() {
       alert('erreur');
   }
</script> 
```

# jquery - jQuery ajax、beforeSend 和滑动加载目标

> ID：14788554
> 
> 赞同：0
> 
> 时间：2013-02-09T13:14:04.010
> 
> 标签：jquery, ajax, slide

我正在使用此代码通过 ajax 加载数据。在发送请求之前，我使用`beforeSend`向上滑动内容。然后在 ajax 成功时，我想向下滑动响应：

```
function  ajax_upd(actionTypeUrl,target){
  $.ajax({
    type: "GET",
    url:'rtr.php?data='+actionTypeUrl,
    cache: false,
    dataType:"json",
        beforeSend: function(){
            if(typeof target !== 'undefined'){
                $('#'+target).slideUp('fast');
            }
        },
        success: function(res) {
            if(typeof target !== 'undefined'){
                updateTarget(res,target);
            }
    }
  });
}

function updateTarget(res,target){
    var content = res.content||res;
        $('#'+target).slideDown().html(content);
        var redBar = res.redBar||false;
        if(redBar){
            $('#main-bar-content').html(redBar);
        }
} 
```

我的问题是我想在slideUp完成时添加一个slideDown动作，然后只有在向下滑动动画完成后才触发ajax成功功能。

我可以这样做吗？

# performance - C#委托参数大小

> ID：14788555
> 
> 赞同：5
> 
> 时间：2013-02-09T13:14:05.047
> 
> 标签：performance, parameters, delegates, size

我想知道 C# 委托在传递给方法时是否占用与 C 指针（4 个字节）相似的空间量。

编辑

代表只指向方法对吗？他们不能指向我正确的结构或类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-15T18:06:36.093

是的，委托只指向一个或多个方法。参数必须与方法相似。

```
public class Program
{
public delegate void Del(string message);
public delegate void Multiple();

public static void Main()
{
    Del handler = DelegateMethod;
    handler("Hello World");

    MethodWithCallback(5, 11, handler);

    Multiple multiplesMethods = MethodWithException;
    multiplesMethods += MethodOk;

    Console.WriteLine("Methods: " + multiplesMethods.GetInvocationList().GetLength(0));

    multiplesMethods();
}

public static void DelegateMethod(string message)
{
    Console.WriteLine(message);
}

public static void MethodWithCallback(int param1, int param2, Del callback)
{
    Console.WriteLine("The number is: " + (param1 + param2).ToString());
}

public static void MethodWithException()
{
    throw new Exception("Error");
}

public static void MethodOk()
{
    Console.WriteLine("Method OK!");

} 
```

}

# javascript - 我将我的登录 js 文件（log.js）链接到这个 html 代码中，但它没有做任何改变

> ID：14788556
> 
> 赞同：0
> 
> 时间：2013-02-09T13:14:06.310
> 
> 标签：javascript, html, jsp

这是我的 .html 正文内容：

```
<form name="login"> 
    <table border="0" cellpadding="2.0" cellspacing="2.0" align="left"> 
        <tr>
            <td>Username&nbsp;</td>
            <td>
                <input name="username" type="text" id="username" maxlength="15"></input>
            </td> 
        </tr> 
        <tr>
            <td>Password&nbsp;</td>
            <td>
                <input name="password" type="password" id="password" maxlength="10"></input>       
            </td> 
        </tr> 
        <tr>
            <td>&nbsp;</td> 
            <td>&nbsp;</td> 
        </tr> 
        <tr>
            <td>&nbsp;</td>
            <td>
                <strong>
                    <input name="Login" type="button" value="Submit" onclick="Vlogin()"></input>
                </strong>
            </td> 
        </tr> 
    </table> 
</form> 
```

...和javascript代码：

```
function Vlogin()
{
    var user=document.login.username;
    var pass=document.login.password;
    if (user.value=="account1" && pass.value=="backup1") 
    { 
        window.location= "index.jsp";
    }
    else
        alert("Invalid username or password");
        user.focus();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:41:20.937

您无法通过您正在使用的方法访问 DOM 中的元素.. 例如 document.login

如果要使用原始 JS，可以使用 getElementsByTagName() [https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)

但我建议您使用 JQuery，因为它几乎是标准

```
 function Vlogin() {
    var login = $('form[name=login]')
    var user= $('[name=username]', login).val()
    var pass= $('[name=password]', login).val()
    if (user === "account1" && pass ==="backup1") { 
        window.location= "index.jsp";
    } else {
        alert("Invalid username or password");
        user.focus();
    }
} 
```

我还想指出，您的验证代码很容易被黑客入侵，因为这在您的源代码中都是纯英文的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:29:58.903

```
function Vlogin()
{
    var user=document.login.username;
    var pass=document.login.password;
    if (user.value == "account1" && pass.value == "backup1") 
    { 
        window.location= "index.jsp";
    }
    else{
        alert("Invalid username or password");
        user.focus();
    }
} 
```

“else”后面的大括号

# c# - 如何从大字符串中返回一个单词

> ID：14788561
> 
> 赞同：1
> 
> 时间：2013-02-09T13:14:51.723
> 
> 标签：c#, windows-phone-7, parsing, bing-maps

这可能很简单，但我似乎找不到这样做的方法。

我正在使用 Bing 地图服务从纬度/经度获取城市名称。

它给了我大量的 XML，我已经下载为这样的字符串：

```
<Name>
High Street, Lincoln, LN5 7
</Name>
<Point>
<Latitude>
53.226592540740967
</Latitude>
<Longitude>
-0.54169893264770508
</Longitude>
</Point>
<BoundingBox>
<SouthLatitude>
53.22272982317029
</SouthLatitude>
<WestLongitude>
-0.55030130347707928
</WestLongitude>
<NorthLatitude>
53.230455258311643
</NorthLatitude>
<EastLongitude>
-0.53309656181833087
</EastLongitude>
</BoundingBox>
<EntityType>
Address
</EntityType>
<Address>
<AddressLine>
High Street
</AddressLine>
<AdminDistrict>
England
</AdminDistrict>
<AdminDistrict2>
Lincs
</AdminDistrict2>
<CountryRegion>
United Kingdom
</CountryRegion>
<FormattedAddress>
High Street, Lincoln, LN5 7
</FormattedAddress>
<Locality>
Lincoln
</Locality>
<PostalCode>
LN5 7
</PostalCode>
</Address> 
```

有没有一种简单的方法来获取两个位置标签之间的城市名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:07:29.067

我真的很惊讶人们在这里使用正则表达式和 indexOf 之类的东西。如果您像 f.ex 那样处理 XML，您可能会遇到一两个令人讨厌的惊喜。如果 Bing 决定开始使用 CData。

幸运的是，.NET 对 XML 也有很好的支持，它同样易于使用，所以我总是使用它：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(xml);
var nav = doc.CreateNavigator();
var iterator = nav.Select(@"//Locality");
while (iterator.MoveNext()) 
{
    Console.WriteLine("{0}", iterator.Current.InnerXml.Trim());
} 
```

请注意，您可能需要为 Bing 使用的 xmlns 声明名称空间解析器。因为我没有 XML 的那部分，所以我不能在这个例子中添加它，但是这些东西很容易添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:19:03.460

您可以通过将常量字符串变量用作正则表达式的字符串来做到这一点。试试这个

```
const string HTML_TAG_PATTERN = "<.*?>";

static string StripHTML(string inputString)
        {
            return Regex.Replace
              (inputString, HTML_TAG_PATTERN, string.Empty);
        } 
```

在你想获得城市名称的地方调用它

```
string cityname = StripHTML(the code); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:39:35.823

解析这种字符串的一种简单方法是使用[string.IndexOf](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)方法

```
// I have saved your xml in this file to test
string xmlResult = File.ReadAllText(@"D:\temp\locality.txt");

int startPos = xmlResult.IndexOf("<Locality>");
int endPos = xmlResult.IndexOf("</Locality>");

if(endPos != -1 && startPos != -1)
{
    string result = xmlResult.Substring(startPos + 10, endPos-startPos-10).Trim();
    Console.WriteLine(result);
} 
```

搜索词条`<Locality>`，然后搜索词条`</Locality>`。如果在您的字符串中找到这些术语，则使用[Substring](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)方法提取所需的部分。（10 是`<Locality>`任期的长度）

一个旁注。尽管您的示例非常简单，但使用正则表达式解析 XML 或 HTML 文件是一种不好的做法。虽然与您的问题没有严格相关，[但这个著名的答案](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/)（SO 上最受好评的答案之一）解释了为什么使用 Regex 解析非正则语言不是一个好主意。

如果你有一个问题，在 Regex 之后你会遇到两个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T14:13:42.320

我还建议您为此使用正确的 XML 解析。但是，请注意，您提供的 XML 格式不适合用作 XML 文档，因为它有多个根节点。不过，这很容易解决。

如果您使用 XML 解析，您也可以轻松获得所有其他数据，而无需任何繁琐的解析。

这很容易做到，而且比滚动你自己的 XML 解析代码更健壮，如果可以的话，真的应该使用它：

这是一个单行示例，假设您的 XML 位于名为 xml 的字符串变量中：

```
string locality = XElement.Load(new StringReader("<Root>"+xml+"<Root>")).XPathSelectElement("Address/Locality").Value.Trim(); 
```

这是一个适当的例子：

```
using System;
using System.IO;
using System.Xml.Linq;
using System.Xml.XPath;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            // Fix original XML, which has multiple root nodes!
            // We fix it just by enclosing it in a root level element called "Root":

            string xml = "<Root>" + originalXml() + "</Root>";  

            // Read the XML as an XML element.

            var xElement = XElement.Load(new StringReader(xml));

            // Easily access 'Locality' or any other node by name:

            string locality = xElement.XPathSelectElement("Address/Locality").Value.Trim();
            Console.WriteLine("Locality = " + locality);
        }

        // Note: This XML isn't well-formed, because it has multiple root nodes.

        private static string originalXml()
        {
            return
@"<Name>
High Street, Lincoln, LN5 7
</Name>
<Point>
<Latitude>
53.226592540740967
</Latitude>
<Longitude>
-0.54169893264770508
</Longitude>
</Point>
<BoundingBox>
<SouthLatitude>
53.22272982317029
</SouthLatitude>
<WestLongitude>
-0.55030130347707928
</WestLongitude>
<NorthLatitude>
53.230455258311643
</NorthLatitude>
<EastLongitude>
-0.53309656181833087
</EastLongitude>
</BoundingBox>
<EntityType>
Address
</EntityType>
<Address>
<AddressLine>
High Street
</AddressLine>
<AdminDistrict>
England
</AdminDistrict>
<AdminDistrict2>
Lincs
</AdminDistrict2>
<CountryRegion>
United Kingdom
</CountryRegion>
<FormattedAddress>
High Street, Lincoln, LN5 7
</FormattedAddress>
<Locality>
Lincoln
</Locality>
<PostalCode>
LN5 7
</PostalCode>
</Address>";
        }
    }
} 
```

# spring - 春季MVC中的DTO

> ID：14788565
> 
> 赞同：-2
> 
> 时间：2013-02-09T13:15:29.330
> 
> 标签：spring, model-view-controller, dto

我正在使用spring mvc。我已经创建了控制器、视图、pojo、dao。现在我需要创建一个由多个对象 pojo 堆肥的对象，是创建 DTO 的情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T22:38:42.837

如果您正在寻找仅出于查看目的而构建复合类型的对象，那么 DTO 是一个很好的论据。如果复合只是 POJO 的聚合，您可以使用 org.springframework.ui.Model 并在控制器中添加属性。如果需要应用逻辑和业务规则，最好在位于控制器和 DAO 之间的服务层中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T19:24:51.727

如果您的意思是您需要在客户端访问几个 POJO 的属性，并且您想减少从客户端到服务器的调用量，那么可以。最好创建一个 DTO 对象，其中仅放置您将在客户端使用的 POJO 的必要属性。并作为从客户端到服务器的单个调用的结果返回此 DTO。

# css - 将 css 文件移动到新的 css 文件夹后，无法从 css 访问我的图片

> ID：14788568
> 
> 赞同：0
> 
> 时间：2013-02-09T13:16:00.063
> 
> 标签：css, asp.net-mvc

在更新我的 css 之前，我在 Login.css 中有以下内容：

```
body
{    
  background-image: url('./pictures/fond.png');    
  background-repeat: repeat-x;
} 
```

这是我的结构：

![在此处输入图像描述](../Images/cd39c62bcdf1b0e80b4ca200d396e138.png)

现在我有以下CSS：

```
body
{    
  background-image: url('../pictures/fond.png');    
  background-repeat: repeat-x;
} 
```

请注意网址中的双点。

这是我的新结构：

![在此处输入图像描述](../Images/8477b0af1ce1ea2db1846d1ce3319184.png)

**我的问题**：在我的 IIS 测试服务器上发布时，我看不到我的图片！？在本地开发机器（VS2012）上，我可以看到我的图片。

但是，如果我更新位于 IIS 测试服务器中的 Login.css 并将我的双点替换为单点，它会再次起作用。这不合逻辑，因为（在我更新之后） Login.css 现在位于 css 文件夹下。

任何的想法？

谢谢。

更新 - - - - - - - -

这是我引用我的CSS的方式：

```
bundles.Add(new StyleBundle("~/Content/bundleLogin").Include(
            "~/Content/css/bootstrap.css",
            "~/Content/css/Login.css")); 
```

我创建了一个包，然后：

```
@Styles.Render("~/Content/bundleLogin") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:21:37.683

我敢打赌，您已经在视图中硬编码了 CSS 文件的路径，如下所示：

```
<link href="Content/css/Login.css" rel="stylesheet" type="text/css" /> 
```

而不是正确的方式当然是使用 url helper：

```
<link href="@Url.Content("~/Content/css/Login.css")" rel="stylesheet" type="text/css" /> 
```

就您的 CSS 文件而言，您在其中引用的所有 url（例如图像）总是相对于 CSS 文件的当前位置。因此，如果您正确引用您的 CSS 文件，您将不会遇到任何问题。使用`url('../pictures/fond.png');`的是正确的相对位置。

* * *

更新：

哦，我看到了问题。您正在使用捆绑包。好吧，bundle 的问题在于您声明 bundle 名称的方式，您没有与物理结构相同级别的文件夹嵌套。所以像这样修改你的包：

```
bundles.Add(new StyleBundle("~/Content/css/bundleLogin").Include(
        "~/Content/css/bootstrap.css",
        "~/Content/css/Login.css")); 
```

进而：

```
@Styles.Render("~/Content/css/bundleLogin") 
```

# java - 返回休眠本机 sql 查询

> ID：14788570
> 
> 赞同：1
> 
> 时间：2013-02-09T13:16:07.883
> 
> 标签：java, hibernate

我想做一个本机 SQL 查询，它连接 2 个表。

返回值应该是 District Table 的所有元素，这将是`(id, name, district_code, coordinates)`，以及在 a`count(*)`中的所有 Objects 的 a `District`（因此与其他一些表连接）。

所以我有第一区的所有列，`(district.*)`即`Count(*)`. 我可以使用哪种查询，以便在我的 java 代码中使用它？我无法添加实体，或者因为`count(*)`不适合它！？

我有一个 District 类，如下所示：

```
@XmlRootElement
public class District extends AbstractEntity{

    private int id;
    private String name;
    private int district_code;
    @Transient
    private int carsQuantity;

    public District(){}

    @Override
    public int getId() {
        return id;
    }

    @Override
    public void setId(int id) {
        this.id = id;       
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getDistrict_code() {
        return district_code;
    }

    public void setDistrict_code(int district_code) {
        this.district_code = district_code;
    }

    public int getCarsQuantity() {
        return carsQuantity;
    }

    public void setCarsQuantity(int carsQuantity) {
        this.carsQuantity = carsQuantity;
    }
} 
```

我的 District.hbm.xml：

```
<hibernate-mapping package="at.opendata.entitys">      
    <class name="District" table="districts">       
        <id name="id" column="id">
            <generator class="increment"/>
        </id>
        <property name="name"/>
        <property name="district_code"/>                
    </class>    
</hibernate-mapping> 
```

**编辑：**

我不能用 HQL 或 JPQL 来做，因为我的 FROM CLAUSE 中需要一个 SUBSELECT。

```
SELECT d.id, count(*) FROM (SELECT cd.coordinates AS coordinates FROM cars AS c LEFT JOIN cardetail AS cd ON (c.car_id = cd.car_id)) AS c CROSS JOIN districts AS d WHERE ST_CONTAINS(d.coordinates, c.coordinates) GROUP BY id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:28:02.320

首先，您不需要本机查询。JPQL 会做得很好。这种查询的结果将只是 a `List<Object[]>`，其中每个对象数组将包含每个返回列的元素。只需遍历此列表并对元素做任何你想做的事情：

```
for (Object[] row : list) {
    Integer id = (Integer) row[0];
    String name = (String) row[1];
    ...
    Long count = (Long) row[4];
    ...
} 
```

# android - Android：Activity.onDestroy() 重启服务

> ID：14788575
> 
> 赞同：0
> 
> 时间：2013-02-09T13:16:36.287
> 
> 标签：android, android-service, ondestroy

我有一个使用服务在后台运行的应用程序。但是当在主活动中调用 onDestroy 时，服务会被重置，再次调用 onCreate 和 onStart。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:22:57.497

您必须查看服务从其 onStartCommand 方法返回的值。默认值为 START_STICKY ，它将在服务被销毁后重新启动。查看[onStartCommand 文档](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)了解更多详细信息：

# jquery - 我可以使用 contenteditable div 代替 textarea 吗？

> ID：14788576
> 
> 赞同：2
> 
> 时间：2013-02-09T13:16:49.397
> 
> 标签：jquery, css, html

我想知道我是否可以使用可编辑的内容`div`而不是`textarea`？功能会一样吗？我可以像处理数据一样处理`textarea`数据吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T13:29:30.640

您可以使用类似于 textarea的[contenteditable div ，请参阅](https://developer.mozilla.org/en/docs/HTML/Content_Editable)[JSFiddle](http://jsfiddle.net/jGHMk/)

```
<form action="form.php" method="post">
    <div name="text" contenteditable="true">This text can be edited by the user.</div>
    <input type="submit" value="Send" name="send" />
</form> 
```

但正如您所看到的，它不会自动与表单一起作为输入元素或文本区域发送。如果你想要这样的功能，你必须使用一些 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:23:28.803

是的，如果你愿意，你可以使用它。此外，这将为您提供显示图像和其他 html 元素的优势，因为 textareas 仅限于文本。如此多的所见即所得编辑器（如 FCK 或 CK 编辑器）使用内容可编辑 div，您在其中提供输入而不是文本区域。

关于处理数据，**您必须借助 javascript**。它不会像文本区域那样在您与表单一起使用时直接发布数据。

# javascript - 用户如何上传音频以在浏览器中使用？

> ID：14788581
> 
> 赞同：0
> 
> 时间：2013-02-09T13:17:26.217
> 
> 标签：javascript, html, node.js, express, web-audio-api

我正在使用 node 和 express 构建一个单页 web 应用程序。我希望用户能够上传自己的音频文件，以便可以在浏览器中播放。

我已经尝试使用`<form>`and`<input>`标记，`type="file"`但是如何从中获取音频文件并在浏览器中使用它以与 Web 音频 API 一起使用？

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:46:51.797

在我的 Vocoder 演示中查看 main.js 中的 initDragDropOfAudioFiles() 方法（webaudiovocoder.appspot.com，在 github 上[http://github.com/cwilso/Vocoder](http://github.com/cwilso/Vocoder)）。它将一个元素设置为音频文件的拖放接收器，以供 Web 音频使用。它需要一些概括才能为您工作，但它应该很简单。

# actionscript-3 - AS3 返回当前在另一个没有 HitTestObject 的对象下的对象

> ID：14788584
> 
> 赞同：0
> 
> 时间：2013-02-09T13:17:38.097
> 
> 标签：actionscript-3, hittest

是否可以在不使用 hitTestObject 的情况下返回位于另一个对象下方/与之接触的对象？我想知道是否可以消除循环遍历“活动”对象数组的需要，并在任何给定时间简单地获取下面的实例。可能使用 as3 事件？非常感谢 SC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:27:43.137

您可以使用`getObjectsUnderPoint()`DisplayObjectContainer 类的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T10:41:13.533

小心，使用`getObjectsUnderPoint()`.

`getObjectsUnderPoint()`返回类型数组。这意味着将 Point 指定在所有 DisplayObjects 返回之上。有时您不想获得价值。所以必须验证数组中的对象。面临这个问题，尤其是 DisplayObjects 当它们重叠或加载其他 swf 时

# java - 为什么 javac（编译器）和 java（JVM）都需要在类路径中提及外部依赖项？

> ID：14788586
> 
> 赞同：1
> 
> 时间：2013-02-09T13:17:44.167
> 
> 标签：java, jvm

如果一个java源文件依赖于一个外部JAR文件，我们需要将外部依赖的路径提供给java编译器：

```
javac -cp [path-to-external-JAR] foo.java

jar cvf foo.jar foo.class 
```

同样，当我们需要执行这个 jar 文件时，我们需要将外部依赖的路径提供给 JVM：

```
java -cp [path-to-external-JAR]:foo.jar foo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:22:11.287

编译器需要引用，因为它必须检查您正在调用或覆盖的类和方法是否存在，并且可以被调用/覆盖。

JVM 需要它们，因为它必须执行这些类和方法中的指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:27:45.660

显然 java (vm) 需要类定义才能运行。Javac 需要类型信息的类声明...

> 为了处理它们操作的源代码，javac 和 javadoc 必须获取源代码中使用的对象类型的信息。

[参考 - Oracle 文档](http://docs.oracle.com/javase/6/docs/technotes/tools/findingclasses.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T14:39:12.640

否则它必须最终在整个文件系统中搜索您在应用程序中使用的外部类。

# c# - c#中的语音识别

> ID：14788587
> 
> 赞同：-2
> 
> 时间：2013-02-09T13:18:13.073
> 
> 标签：c#, compiler-errors, speech-recognition

一直试图在 C# 中做一个简单的语音识别表单，但遇到了问题。对此很新，所以请帮忙！

面临2个错误：第一个错误是：“[预期”第二个错误是：无效令牌';' 在类、结构或接口成员声明中

下面是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Speech.Recognition;
using System.Text.RegularExpressions;
using System.Diagnostics;

namespace Speech
{
    public class Grammar;
    public partial class Form1 : Form

    {
        private SpeechRecognitionEngine recognitionEngine;

        public Form1()
        {
            InitializeComponent();
            recognitionEngine = new SpeechRecognitionEngine();
            recognitionEngine.SetInputToDefaultAudioDevice();
            recognitionEngine.SpeechRecognized += (s, args) =>
                {
                    string line = "";
                    foreach (RecognizedWordUnit word in args.Result.Words)
                    {
                        if (word.Confidence > 0.8f)
                            line += word.Text + " ";
                    }

                    string command = Regex.Replace(line, "Start", "").Trim();

                    switch (command)
                    {
                        case "Notepad":
                            Process.Start("notepad.exe");
                            break;
                        case "Calculator":
                            Process.Start("calc.exe");
                            break;
                        case "Paint":
                            Process.Start("mspaint.exe");
                            break;
                    }

                    txtOutput.Text += line;
                    txtOutput.Text += Environment.NewLine;
                };
            recognitionEngine.LoadGrammar(CreateGrammarObject());
        }

        private void button_start_Click(object sender, EventArgs e)
        {
            recognitionEngine.RecognizeAsync(RecognizeMode.Multiple);
        }

        private void button_stop_Click(object sender, EventArgs e)
        {
            recognitionEngine.RecognizeAsyncStop();
        }

        }

        private Grammar CreateGrammarObject()
        {
            Choices commandChoices = new Choices("Calculator", "Notepad", "Internet Explorer", "Paint");
            GrammarBuilder grammarBuilder = new GrammarBuilder("Start");
            grammarBuilder.Append(commandChoices);
            Grammar g = new Grammar(grammarBuilder);
            return g;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:20:50.960

这是什么？：

```
public class Grammar;
public partial class Form1 : Form 
```

从类的结构来看，您正在构建一个`Form`. 那么是`Grammar`从哪里来的呢？完全删除第一类声明应该至少修复该语法错误：

```
public partial class Form1 : Form 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-29T07:46:42.060

您必须有：dataAI 文本框、startBtn 按钮、BtnClear 按钮、stopBtn 按钮和 textBox1 文本框 + 在 VisualStudio 中添加了语音。如果您有任何问题，请与我联系！

我的工作代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Speech;
using System.Speech.Synthesis;
using System.Speech.Recognition;
using System.Threading;
using System.Diagnostics;

namespace FreezeAI
{

    public partial class Form1 : Form
    {
        SpeechSynthesizer ss = new SpeechSynthesizer();
        PromptBuilder pb = new PromptBuilder();
        SpeechRecognitionEngine sre = new SpeechRecognitionEngine();
        Choices clist = new Choices();

        public Form1()
        {
            InitializeComponent();
        }

        private void dataAI_TextChanged(object sender, EventArgs e)
        {
            pb.ClearContent();
            pb.AppendText(dataAI.Text);
            ss.Speak(pb);
        }

        private void button1_Click(object sender, EventArgs e)
        {

        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

            if (textBox1.Text.Contains("hello"))
            {
                dataAI.Text = "Hi!";
            }
            else if (textBox1.Text.Contains("Hello"))
            {
                dataAI.Text = "Hi!";
            }
            else if (textBox1.Text.Contains("How are you?"))
            {
                dataAI.Text = "Good, and you?";
            }
            else if (textBox1.Text.Contains("how are you?"))
            {
                dataAI.Text = "Good, and you?";
            }
            else if (textBox1.Text.Contains("how are you"))
            {
                dataAI.Text = "Iam robot.. I dont have emotions.. :(";
            }
            else if (textBox1.Text.Contains("stop record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("Stop record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("Stop Record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("stop Record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("stop the record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("Stop the record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("Stop The record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("Stop The Record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("stop The Record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("stop the Record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("stop The record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("stop The record"))
            {
                dataAI.Text = "Ok stopping..";
                sre.RecognizeAsyncStop();
                BtnStart.Enabled = true;
                BtnStop.Enabled = false;
            }
            else if (textBox1.Text.Contains("clear"))
            {
                dataAI.Text = "Ok cleared..";
                textBox1.Text = String.Empty;
            }

        }

        private void BtnStart_Click(object sender, EventArgs e)
        {
            BtnStart.Enabled = false;
            BtnStop.Enabled = true;
            Grammar gr = new DictationGrammar();
            dataAI.Text = "Ok starting..";
            try
            {
                sre.RequestRecognizerUpdate();
                sre.LoadGrammar(gr);
                sre.SpeechRecognized += sre_SpeechRecognized;
                sre.SetInputToDefaultAudioDevice();
                sre.RecognizeAsync(RecognizeMode.Multiple);

            }
            catch (Exception ex) { MessageBox.Show(ex.Message, "Error"); }
        }

        private void sre_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
        {
            textBox1.Text = textBox1.Text + e.Result.Text.ToString() + Environment.NewLine;
        }

        private void BtnStop_Click(object sender, EventArgs e)
        {
            sre.RecognizeAsyncStop();
            BtnStart.Enabled = true;
            BtnStop.Enabled = false;
            dataAI.Text = "Ok stopping..";
        }

        private void BtnClear_Click(object sender, EventArgs e)
        {
            textBox1.Text = String.Empty;
            MessageBox.Show("Cleared!");
            dataAI.Text = "Ok cleared..";
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

    }
} 
```

# vba - 使用 vba 更改 powerpoint 2010 光标

> ID：14788591
> 
> 赞同：0
> 
> 时间：2013-02-09T13:18:28.533
> 
> 标签：vba, powerpoint

在 Powerpoint 2010 中有没有办法使用 vba 将光标更改为激光指示器，例如通过单击对象？感谢阅读艺术

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T23:41:05.250

@Remou：这解释了如何手动完成这项工作，但不是通过 VBA @Rachel：这显然是 Excel 代码。PPT 应用程序对象没有 Cursor 属性，因此这在 PPT 中不起作用。

您可以更改指针类型，但据我所知，不能更改为激光指针。

如果将此添加到演示文稿中，然后添加运行宏的操作设置：将指针更改为幻灯片上的形状，这会将指针更改为笔，红色

```
Sub ChangePointer()
    With SlideShowWindows(1).View
        .PointerType = ppSlideShowPointerPen
        .PointerColor.RGB = RGB(255, 0, 0)
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T13:31:27.040

阅读[http://www.ehow.com/how_7523999_change-cursor-vba.html](http://www.ehow.com/how_7523999_change-cursor-vba.html)

我认为您正在寻找的是 Application.Cursor = xlBeam;

# jquery - Jquery Ajax 的响应不出现屏幕，一些在 Firebug 控制台中

> ID：14788594
> 
> 赞同：0
> 
> 时间：2013-02-09T13:18:41.263
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3, ruby-on-rails-3.1

我在 ajax whit rails 中进行了申请，响应的结果是正确的，Firebug 的控制台出现了这个：

```
$("#cost_select").after("<select id="from_money" name="from_money"><option value="2">Luz</option></select>
"); 
```

问题是这不出现，我尝试更改标签 html 并且工作正常，我不知道屏幕中的选择没有出现什么，有人可以帮忙吗？我需要出现这种正常情况，所有变量都是正确的，并且我在 Rails 中制作了动态内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:35:01.053

您需要转义 javascript，因此引号将被转义。

```
$("#cost_select").after("<%= escape_javascript select_tag('from_money', options_for_select(@places.map { |c| [c.place, c.id] })) %> "); 
```

# php - Symfony2 - 在错误的地方寻找实体类？

> ID：14788595
> 
> 赞同：2
> 
> 时间：2013-02-09T13:18:50.460
> 
> 标签：php, symfony, doctrine-orm, entity

我有两个实体，用户和课程。

用户是奏鸣曲用户的扩展，并且在

```
Application\Sonata\UserBundle\Entity\User 
```

课程在我自己的捆绑包“LessonBundle”中

每节课都归用户所有，在现场导师下：

```
class Lesson
{
    /**
     * @ORM\ManyToOne(targetEntity="Application\Sonata\UserBundle\Entity\User", inversedBy="lessons")
     * @ORM\JoinColumn(name="tutor_id", referencedColumnName="id")
     */
    protected $tutor;

/**
     * Set tutor
     *
     * @param \Application\Sonata\UserBundle\Entity\User $tutor
     * @return Lesson
     */
    public function setTutor(\Application\Sonata\UserBundle\Entity\User $tutor = null)
    {
        $this->tutor = $tutor;

        return $this;
    }

    /**
     * Get tutor
     *
     * @return \Application\Sonata\UserBundle\Entity\User 
     */
    public function getTutor()
    {
        return $this->tutor;
    }
} 
```

我设置了一个表单，可以成功为用户添加课程，但是当我尝试访问课程列表时：

```
$repository = $this->getDoctrine()
                        ->getRepository('LessonBundle:Lesson');

//Problem is triggered here
$lessons = $repository->findAll(); 
```

我收到以下错误：

```
Class LessonBundle\Entity\User does not exist 
```

> 堆栈跟踪
> 
> ```
> in /home/dan/sites/mysite/vendor/doctrine/orm/lib/Doctrine/ORM/Proxy/ProxyFactory.php 
> ```
> 
> at line 233 -+ } // 我们也需要选择类型提示类 if (($paramClass = $param->getClass()) !== null) { $parameterString .= '\' . $paramClass->getName() 。' '; } else if ($param->isArray()) { $parameterString .= 'array '; 在 /home/dan/sites/mysite/vendor/doctrine/orm/lib/Doctrine/ORM/Proxy/ProxyFactory.php 中的 ReflectionParameter ->getClass () 第 233 行 -+ 在 ProxyFactory ->_generateMethods (object(ClassMetadata))在 /home/dan/sites/mysite/vendor/doctrine/orm/lib/Doctrine/ORM/Proxy/ProxyFactory.php 在第 155 行 -+ 在 ProxyFactory ->*generateProxyClass (object(ClassMetadata), '/home/dan/sites/mysite/app/cache/dev/doctrine/orm/Proxies/ **CG*** **_LessonBundleEntitySubject.php', '; /** * 这个类是由 DOCTRINE ORM 生成的。不要编辑这个文件。*/ 类扩展\实现\Doctrine\ORM\Proxy\Proxy { private $_entityPersister; private $ *identifier; public $* _isInitialized** = false; public functionconstruct **($entityPersister, $identifier) { $this-> _entityPersister = $entityPersister; $this->_identifier = $identifier; } /** @private */ public function _ *load() { if (!$this->* _isInitialized** && $this->_entityPersister) { $this-> **isInitialized** = true; if (method_exists($this, "**wakeup")) { // 在 _isInitialized 之后调用它 _*以*避免无限递归 // 但在加载之前模拟 ClassMetadata::newInstance() // 提供的内容。$this->__wakeup(); } if ($this->_entityPersister ->load($this->_identifier, $this) === null) { throw new \Doctrine\ORM\EntityNotFoundException(); } unset($this->_entityPersister, $this->_identifier); } } /* * @private */ public function _isInitialized *() { return $this->* _isInitialized** ; } public function **sleep() { } public function _ *clone() { if (!$this->* _isInitialized** && $this->_entityPersister) { $this-> **isInitialized**=真；$class = $this->_entityPersister->getClassMetadata(); $original = $this->_entityPersister->load($this->_identifier); if ($original === null) { throw new \Doctrine\ORM\EntityNotFoundException(); } foreach ($class->reflFields as $field => $reflProperty) { $reflProperty->setValue($this, $reflProperty->getValue($original)); } unset($this->_entityPersister, $this->_identifier); } } }') 在 /home/dan/sites/mysite/vendor/doctrine/orm/lib/Doctrine/ORM/Proxy/ProxyFactory.php 第 90 行 -+ 在 ProxyFactory ->getProxy ('LessonBundle\Entity\Subject' , array('id' => '1')) 在 /home/dan/sites/mysite/vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php 在第 2576 行 -+ 在 UnitOfWork ->createEntity (' LessonBundle\Entity\Lesson'，数组（'*深嵌套阵列*），'location_id11' => 阵列（*深嵌套阵列*)), array()) 在 /home/dan/sites/mysite/vendor/doctrine/orm/lib/Doctrine/ORM/Internal/Hydration/SimpleObjectHydrator.php 在第 50 行 -+ 在 SimpleObjectHydrator -> hydrateAllData () 在 / home/dan/sites/mysite/vendor/doctrine/orm/lib/Doctrine/ORM/Internal/Hydration/AbstractHydrator.php 在第 111 行 -+ 在 AbstractHydrator -> hydraAll (object(PDOStatement), object(ResultSetMapping), array( 'deferEagerLoads' => true)) 在 /home/dan/sites/mysite/vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php 第 848 行 -+ 在 BasicEntityPersister ->loadAll (array(), null, null, null) 在 /home/dan/sites/mysite/vendor/doctrine/orm/lib/Doctrine/ORM/EntityRepository.php 第 157 行 -+ 在 EntityRepository ->findBy (array()) in /home/dan/sites/mysite/vendor/doctrine/orm/lib/Doctrine/ORM/EntityRepository.php 在第 141 行 -+ 在 EntityRepository ->findAll () in /home/dan/sites /mysite/src/LessonBundle/Controller/LessonController.php 在第 21 行 -+ 在 LessonController ->listAction () at call_user_func_array (array(object(LessonController), 'listAction'), array()) in kernel.root_dir/bootstrap。 php.cache 在第 1426 行 -+ 在 HttpKernel ->handleRaw (object(Request), '1') 在 kernel.root_dir/bootstrap.php.cache 在第 1390 行 -+ 在 HttpKernel ->handle (object(Request), ' 1', true) 在 kernel.root_dir/bootstrap.php.cache 第 1566 行 -+ 在 HttpKernel ->handle (object(Request), '1', true) in kernel.root_dir/bootstrap.php。缓存在第 617 行 -+ 在内核 ->handle (object(Request)) in /home/dan/sites/mysite/web/app_dev.php 在第 29 行 -+

我不确定它为什么要在 LessonBundle 中而不是 Application\Sonata\UserBundle 中寻找 User 类。

任何建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:09:54.397

找到了。在一个完全不同的类中，有一个对错误位置的类的引用！

# c++ - 如何将结构传递给c ++中的类？

> ID：14788599
> 
> 赞同：-3
> 
> 时间：2013-02-09T13:19:20.870
> 
> 标签：c++, class, reference, struct, parameter-passing

我是 C++ 新手，这个让我很难过。我想将一个结构传递给一个类（我知道它们在技术上是相同的），以便该类可以访问结构中的数据。我不介意它是作为引用还是副本传递，因为类中的结构不会发生任何变化。话虽如此，参考可能会更好地提高性能。如果我单独传递结构的成员，我可以让它正常工作，但真实版本将有大约 30 个成员，所以单独传递它们不是最好的选择。

我的主要cpp：

```
#include "stdafx.h"
#include "myClass.h"
#include <iostream>
using namespace std;

struct foo
{
    int num;
    double dbl;
};

int _tmain(int argc, _TCHAR* argv[])
{
    foo bar;
    bar.dbl=3.14;
    bar.num=42;
    baz qux();  //bar needs to be passed here
    cout<<qux.getSum()<<endl;
    return 0;
} 
```

类头：

```
using namespace std;

class baz
{
public:
    baz();  //This is where type of bar (foo) is declared
    void setSum(int, double);
    double getSum();
private:
    double sum;
}; 
```

cpp类：

```
#include "stdafx.h"
#include "myClass.h"
#include <iostream>
using namespace std;

baz::baz()  //this is where bar is called
{
    setSum(bar.num, bar.dbl);
}

void baz::setSum(int num, double dbl)
{
    sum=num*dbl;
}

double baz::getSum()
{
    return sum;
} 
```

所以问题的关键是，我如何让 bar 进入 baz？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T21:29:06.363

已解决，将结构定义放入单独的标题中，并将其包含在需要的地方。然后只需对类头中的声明进行简单的更改，一切就完美了。我已经包含了新代码（为了 Abyx 的利益而减去 VS 代码，因为 Abyx 似乎觉得它很冒犯）以防其他人有同样的问题。

主要cpp：

```
#include "myClass.h"
#include "foo.h"
#include <iostream>
using namespace std;

int main(int argc, _TCHAR* argv[])
{
    foo bar;
    bar.dbl=3.14;
    bar.num=42;
    baz qux(bar);
    cout<<qux.getSum()<<endl;
    return 0;
} 
```

富.h：

```
struct foo
{
    int num;
    double dbl;
}; 
```

myClass.h：

```
class baz
{
public:
    baz(const struct foo&);
    void setSum(int, double);
    double getSum();
private:
    double sum;
}; 
```

myClass.cpp：

```
#include "myClass.h"
#include "foo.h"
#include <iostream>
using namespace std;

baz::baz(const foo& blah)
{
    setSum(blah.num, blah.dbl);
}

void baz::setSum(int num, double dbl)
{
    sum=num*dbl;
}

double baz::getSum()
{
    return sum;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:23:59.007

制作额外的构造函数。像这样的东西：

```
 baz::baz(const foo& st){
      setSum(st);
    }

    void baz::setSum(const foo& st) 
    {
      setSum(st.num, st.dbl);
    } 
```

那么你就可以：

```
 int _tmain(int argc, _TCHAR* argv[])
    {
        foo bar;
        bar.dbl=3.14;
        bar.num=42;
        baz qux(bar);  //bar needs to be passed here
        cout<<qux.getSum()<<endl;
        return 0;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:30:00.727

你的主程序：

```
#include "stdafx.h"
#include "myClass.h"
#include <iostream>
using namespace std;

struct foo
{
    int num;
    double dbl;
};

int _tmain(int argc, _TCHAR* argv[])
{
    foo bar;
    bar.dbl=3.14;
    bar.num=42;
    baz qux();  //bar needs to be passed here
    cout<<qux.getSum()<<endl;
    return 0;
} 
```

好吧，`stdafx.h`只有当您打开（或忽略关闭）使用 Microsoft 预编译的标头时才有意义的*标头*，这使得 Visual C++ 预处理器以绝对非标准的方式运行。所以最好把它去掉。此外，`_tmain`它是一个 Windows 9x 支持宏，可扩展为标准`main`或 Microsoft 特定的`wmain`. 所以也放弃它。*最后，标准*`return 0`的末尾不需要 . ，因为这是 . 的默认返回值。还有，那是什么？你写例如或？最好叫它。然后， *`main``main``getSum``getsin``getcos``sum`*

 *```
#include "myClass.h"
#include <iostream>
using namespace std;

struct foo
{
    int num;
    double dbl;
};

int main()
{
    foo bar;
    bar.dbl=3.14;
    bar.num=42;
    baz qux( bar );  // See how easy it is to pass `bar`
    cout<<qux.sum()<<endl;
} 
```

对于`baz`类头文件，**永远不要**在头文件中拥有`using namespace std`全局命名空间。即也删除它。然后，

```
#pragma once
#include -- relevant header --

class baz
{
private:
    double sum_;
public:
    baz( foo const& blah ): sum_( blah.whatever + something ) {}
    void setSum( int const n, double const v ) { sum_ = n*v; }
    double sum() const { return sum_; }
}; 
```

注意：`#pragma once`是*事实上*的标准，但不是 ISO 标准。*

# ios - 如何知道 cocos2d 中的触摸持续时间？

> ID：14788602
> 
> 赞同：0
> 
> 时间：2013-02-09T13:19:39.907
> 
> 标签：ios, objective-c, cocos2d-iphone, touch

是否有任何原生 cocos2d 方法来计算触摸持续时间或检测未使用的长触摸或小拖动`UILongPressGestureRecognizer`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:35:51.417

这是注册 ccTouchBegan 和 ccTouchEnded 事件之间的时间的问题。

UITouch 对象具有以下属性：

```
@property(nonatomic, readonly) NSTimeInterval timestamp; 
```

因此，当您收到 ccTouchBegan 事件时，只需将第一个时间间隔的值存储在某个 ivar 中，并与您在 ccTouchEnded 中获得的时间有所不同。

# html - 将 type="text" 用于密码字段是否安全？

> ID：14788606
> 
> 赞同：3
> 
> 时间：2013-02-09T13:20:44.980
> 
> 标签：html, browser, input, passwords, autofill

我已经对其进行了研究，但找不到一种标准、可靠的方法来使浏览器阻止自动填充并且不记住标准登录表单中的密码。

这对我来说很重要，因为我正在开发一个移动网络应用程序，所以如果用户点击注销并且其他人拿到了他们的手机，浏览器不应该通过只给他们密码来帮助他们！

我能想出的唯一解决方案是使密码字段类型=“文本”。

当然，这意味着人们可以“浏览”并查看用户输入的内容，但同一个人几乎可以轻松地观察用户的手指以查看他们输入的密码......

我认为间谍软件在这里也不是一个真正的问题，因为我认为 type="password" 字符掩码不会阻止恶意键盘记录器等执行其操作。

所以，我想知道在密码字段中使用 type="text" 是否还有其他安全问题我可能遗漏了？

也许如果我将这个想法与输入的动态/随机“名称”属性结合起来，我能成为赢家吗？

注意 - 该解决方案需要与 XHTML Mobile Profile 兼容。

另外，请不要就此处语义正确的内容向我提供建议。我的首要任务是安全性，而不是语义。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T13:27:19.437

坏主意 - 浏览器会记住文本字段，只是不会像使用密码那样自动输入它们。相反，它会建议密码作为自动完成供所有人查看。我还认为从别人的肩膀上读取密码比读取他们的击键要容易得多。

一些浏览器不尊重密码自动完成选项的原因可能是因为密码是由一种单独的（理论上更安全的）方法处理/存储密码数据的——显然，通过使用文本字段，你会绕过这个系统，带来任何风险.

我认为没有不涉及 js 的明确解决方案，因为归根结底，您无法真正控制他们的浏览器所记住的内容。您只能提供提示和建议。这将由不同的浏览器以不同的方式处理。您最好的选择是首先添加：

> 自动完成=“关闭”

到您的表格和输入。适用于大多数浏览器 - 但不是全部。

以上将进入您的表单标签和密码输入标签，例如：

```
<form id="form1_randomstring" name="form1" method="post" action="process.php" autocomplete="off">
<input name="password_randomstring" type="password" value=""> 
```

正如您在问题中所说，随机化表单和输入名称也会诱使一些浏览器认为它正在处理不同的表单

此外，如果您使用 ssl，浏览器会对它们记住的内容更加保守。所以这可能会有所帮助。

最后，作为另一层保护，您可以使用一点 onload jquery 在 docready 上手动清除表单字段：

```
$("input[type='password']").val(''); 
```

如果不运行js，显然没有帮助。

**最终解决方案（也许？）** 您可以更进一步，使用 ajax 调用注入表单字段（加上生成随机表单名称 + 自动完成并通过 ssl 提供页面）。这意味着 js 将是登录的要求，但您可以确保该字段清晰并在页面加载后生成表单。我会挑战任何浏览器来完成它。

如果您选择该选项，则外部页面和 ajax 加载页面都必须通过 ssl 运行-如果您不希望这样做，则替代方法可能是通过 iframe 加载 ssl 表单（再次权衡-用户群需要考虑。）

根据您的要求和用户群，这可能是最有保证的选择。

**笔记**

Autocomplete="off" 可能无法通过严格的 XHTML 验证。然后一个选项可能是在使用 jquery 加载页面后添加 autocomplete 属性（同样，显然这在没有启用 js 的情况下不起作用）：

```
$('#form1').attr('autocomplete', 'off'); 
```

另外一点，防止键盘记录器的最简单方法是提供一个选择选项下拉框，并要求他们输入密码中的字母/数字。实际上，您必须将密码限制为字母数字，并要求用户在一系列下拉菜单中从他们的密码中输入至少三个字母/数字。

**概括**

没有完美的解决方案，但有很多选择，你必须考虑什么是适合你的。我可能会将 ajax 调用作为主要方法。您最初可以加载表单的链接并用 ajax 内容动态替换它，以便非 js 用户仍然可以选择（更少的用户受到自动完成的影响）

# css - 通过 CSS 的图像大小

> ID：14788608
> 
> 赞同：0
> 
> 时间：2013-02-09T13:20:52.973
> 
> 标签：css, image, responsive-design

我在下面有一个响应站点的这些行，
当没有图像时，我需要放置“无图像”类，

```
<div class="row">
    <div class="column">
        <img id="first" width=275 height=385 src="flower-275x385.jpg" />
        <img id="second" width=275 height=385 class="no-image" src="blank-1x1.png" />
    </div>
</div>

<style>
    .row {
        width:400px ;
    }
    .column {
        width:50% ;
    }

    .column img {
        width:100% ;
        height:auto ;
    }

    .column img.no-image {
        background:red url(image-pending.jpg) no-repeat center ;
    }
</style> 
```

问题是空白图像始终显示为正方形；
因为*blank.png 的自然大小是 1x1*。
似乎“高度：自动”重置或忽略 HTML 定义的尺寸（275x385），
这是一个用于检查的[jsfiddle](http://jsfiddle.net/akkara/Gg5tg/1/)
， 如何在**没有 JS**的情况下像第一个图像一样适合它？

**编辑：**我认为这只能通过 JS 操作来解决：[我的解决方案](http://jsfiddle.net/akkara/Gg5tg/5/)，谢谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:22:13.480

如果我没有误解您的问题，我认为您可以尝试使用 css 属性 background-size 。

```
<style>
.column img.no-image {
    background:red url(image-pending.jpg) no-repeat center; 
    background-size:275px 385px;
}
</style>

    <img id="second" class="no-image" src="blank-1x1.png" /> 
```

如果您仍然必须在at html中编写宽度和高度的内联样式css，它不应该在您编写的大小数之后添加'px'吗？

对于一些更有用的文档，您可以浏览 **[http://www.w3schools.com](http://www.w3schools.com)** :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:27:34.397

你可以试试：

```
.column img.no-image {
    background:red url(image-pending.jpg) no-repeat center ";
    height:385px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:24:14.060

您可以考虑在 CSS 中执行此操作。有这样的无图像：

[http://www.mnit.ac.in/new/PortalProfile/images/faculty/noimage.jpg](http://www.mnit.ac.in/new/PortalProfile/images/faculty/noimage.jpg)

现在对于所有图像，给出这个 CSS：

```
img {background: url("no-image.png") no-repeat center center transparent;} 
```

因此，这样，要加载的图像将显示 No Image，然后那些没有图像的图像将显示此。:) [DeviantArt](http://www.deviantart.com/)使用相同的技术。一定要检查一下。

# windows-phone-7 - 使用 get 发送位置

> ID：14788618
> 
> 赞同：0
> 
> 时间：2013-02-09T13:21:56.590
> 
> 标签：windows-phone-7

我正在制作一个简单的应用程序，它使用 http get 请求将位置数据发送到服务器。问题是尽管请求位于 positionchanged 事件处理程序中，但该请求仅在第一次发出。

这是我的代码。我找不到它有什么问题。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using System.Device.Location;

namespace kechap
{
    public partial class MainPage : PhoneApplicationPage
    {
        GeoCoordinateWatcher gw = new GeoCoordinateWatcher();

        Uri url = new Uri("http://127.0.0.1:5000/upload/1e3fae069dd62fa1641183cd77092ed2053a0e75/1/2");

        // Constructor
        public MainPage()
        {
            InitializeComponent();
            gw.MovementThreshold = 10;
            gw.PositionChanged += (s, e) =>
            {
                MyMap.Center = e.Position.Location;
                MyPushpin.Location = e.Position.Location;

                WebClient wc = new WebClient();

                wc.OpenReadAsync(url);
                wc.OpenReadCompleted += (ss, ee) =>
                {
                };          
            };

            gw.Start();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:46:05.920

猜测一下，我会说 URI，在您发布的代码中不会在调用之间更改，在第一次之后从缓存中解析。我建议您使用古老的技巧，即附加一个参数并为其赋予一个随每次调用而变化的值（例如，您似乎想要报告的位置）。

# bash - eval 函数在 $(eval echo $myvar) 中跳过换行的问题

> ID：14788622
> 
> 赞同：0
> 
> 时间：2013-02-09T13:22:17.493
> 
> 标签：bash, pointers, eval, echo

我目前正在编写一个脚本，旨在为任何基本编辑器添加新的项目生成。我使用以下结构来根据用户选择的语言生成正确的基本程序（hello，world）：

```
#!/bin/sh
#this is a short example in the case the user selected C as the language
TXTMAIN="\$TXTMAIN_C"
$TXTMAIN_C="#include <stdlib.h>
#include <stdio.h>
int main(int argc, char const* argv[])
{
    printf(\"hello, world\n\");
    return EXIT_SUCCESS;
}"
MAIN="./main.c"
touch MAIN
echo -n "$(eval echo $TXTMAIN)" >> "$MAIN"
gedit MAIN 
```

当您编辑 main.c 时，这段代码会给出以下输出：

```
#include <stdlib.h> #include <stdio.h> int main(int argc, char const* argv[]) { printf("hello, world\n"); return EXIT_SUCCESS; } 
```

但是，当用 echo -n "$TXTMAIN_C" >> "$MAIN" 替换第 13 行时，它会给出正确的输出：

```
#include <stdlib.h>
#include <stdio.h>
int main(int argc, char const* argv[])
{
    printf("hello, world\n");
    return EXIT_SUCCESS;
} 
```

我仍然不知道这是回声还是评估问题，或者是否有办法解决我的类似指针的问题。非常欢迎任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T13:31:32.173

您的脚本中有一些错误，而且比应有的复杂。

如果您想使用这样的间接变量，请使用`${!FOO}`语法，并在适当的地方加上引号：

```
#!/bin/sh
#this is a short example in the case the user selected C as the language
TXTMAIN=TXTMAIN_C                          # don't force a $ here
TXTMAIN_C="#include <stdlib.h>
#include <stdio.h>
int main(int argc, char const* argv[])
{
    printf(\"hello, world\n\");
    return EXIT_SUCCESS;
}"
MAIN="./main.c"
echo "${!TXTMAIN}" > "$MAIN"                # overwrite here, if you want to 
                                            # append, use >>. `touch` is useless 
```

# c# - AppDomain.CurrentDomain.UnhandledException 不让我完成我的功能

> ID：14788627
> 
> 赞同：0
> 
> 时间：2013-02-09T13:22:49.460
> 
> 标签：c#, appdomain, streamwriter, unhandled-exception

目前，我有一个在出现未处理异常时调用的方法。所有这一切都是将异常记录到转储文件中。但是，streamwriter 不会将我希望它写入文件的完整信息写入文件。我认为这是因为程序在完成写入文件之前已经关闭。

有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:24:15.843

调用`Flush`流编写器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T13:26:38.707

采用

```
using(var stream = new StreamWriter(@"C:\..."))
{
    //logic
} 
```

这将确保该流将在该`finally`部分中关闭和刷新。

# django - 为什么我在 django_rq 管理屏幕上得到 404？

> ID：14788629
> 
> 赞同：2
> 
> 时间：2013-02-09T13:23:03.640
> 
> 标签：django

我已经设置并运行了 django-rq（作业已排队，我可以运行`manage.py rqworker`）但我似乎无法让管理屏幕正常工作 - 我始终为 /admin/django_rq url 获得 404。

我安装了 django-extensions，`show_urls`命令显示 URL 已注册：

```
$ python manage.py show_urls
...
/admin/django_rq/ django_rq.views.stats rq_home
/admin/django_rq/queues/<queue_index>/ django_rq.views.jobs rq_jobs
/admin/django_rq/queues/<queue_index>/<job_id>/ django_rq.views.job_detail rq_job_detail
/admin/django_rq/queues/<queue_index>/<job_id>/delete/ django_rq.views.delete_job rq_delete_job
... 
```

我以工作人员身份登录，因此视图`@staff_member_required`上的装饰器`stats`应该正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T19:34:48.153

```
(r'^admin/django_rq/', include('django_rq.urls')) 
```

必须在之前

```
url(r'^admin/', include(admin.site.urls)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:28:37.457

我已经更新了 django-rq 的 README.rst 中的安装说明，从 django-rq 的 URL 模式中删除了“admin”前缀，这样 Hugo 的问题就不会再发生了。

# android - 如何使android相机输出充当网络摄像头？

> ID：14788633
> 
> 赞同：1
> 
> 时间：2013-02-09T13:23:36.840
> 
> 标签：android, video-streaming, webcam, live-streaming

从我的 android 应用程序中，我将帧连续发送到 PC，我在网页上查看它们，我以与发送它们相同的速率刷新它们。

但是如何将这些帧视为**VLC 和 skype**等软件的输入。任何帮助表示赞赏。

# ios - 无法在 iOS 中与 iPodMusicPlayer 捆绑播放歌曲

> ID：14788643
> 
> 赞同：1
> 
> 时间：2013-02-09T13:24:20.643
> 
> 标签：ios, cocoa-touch, mpmusicplayercontroller, mpmediaitemcollection

我正在尝试使用`iPodMusicPlayer`.

我不想玩`AVPlayer`。

这是我的一些代码：

```
NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
        NSFileManager *fm = [NSFileManager defaultManager];
        NSArray *dirContents = [fm contentsOfDirectoryAtPath:bundleRoot error:nil];
        NSPredicate *fltr = [NSPredicate predicateWithFormat:@"self ENDSWITH '.mp3'"];
        NSArray *onlyMP3 = [dirContents filteredArrayUsingPredicate:fltr];
        self.app.arrayFromAppDelegate = [onlyMP3 mutableCopy];

        NSLog(@"%i",self.app.arrayFromAppDelegate.count);

        self.userMediaItemCollection = [[MPMediaItemCollection alloc] initWithItems:self.app.arrayFromAppDelegate];
        NSLog(@"Collection count is : %i",self.userMediaItemCollection.count);

        [self.player setQueueWithItemCollection:self.userMediaItemCollection];
        [self.player setNowPlayingItem:(MPMediaItem *)[self.app.arrayFromAppDelegate objectAtIndex:0]];

[self.player play]; 
```

首先，我从文档目录中检索所有 mp3，并将它们添加到`NSMutableArray`.

然后我将它们添加到一个`MPMediaItemCollection`和 setQueue 中进行播放。然后我玩。

但是当我玩的时候，它只显示`MediaPlayer: Message nowPlayingItem timed out in iOS`。

当我使用上面的代码播放 iPod 库中的歌曲时，我没问题。

但我无法播放 App Bundle 中的歌曲。

`NSLog`方法还显示了文档目录中歌曲的正确计数。

但我不能玩。

我怎样才能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T16:37:09.797

使用`MPMusicPlayerController`，您不能使用文档目录中的 mp3 文件。`MPMusicPlayerController`仅与设备 iPod 库中的项目兼容。

# android - Android - 按下按钮单击问题后将 EditText 转换为 int

> ID：14788646
> 
> 赞同：2
> 
> 时间：2013-02-09T13:24:49.213
> 
> 标签：android, casting

是正确的铸造吗？按下按钮后，应用程序正在关闭。如果我在第二行 ( ) 上切换评论，`height = Integer`那么它工作正常。

```
public void onClick(View v) 
{
    EditText tHeight = (EditText)findViewById(R.id.tbHeight);
    height =  Integer.parseInt(tHeight.getText().toString());
} 
```

如果您指的是此日志，则为完整日志：

```
02-09 14:41:58.941: I/dalvikvm(15417): Turning on JNI app bug workarounds for target SDK version 5...
02-09 14:42:03.918: D/AndroidRuntime(15417): Shutting down VM
02-09 14:42:03.918: W/dalvikvm(15417): threadid=1: thread exiting with uncaught exception (group=0x40bf11f8)
02-09 14:42:03.918: E/AndroidRuntime(15417): FATAL EXCEPTION: main
02-09 14:42:03.918: E/AndroidRuntime(15417): java.lang.NumberFormatException: Invalid int: ""
02-09 14:42:03.918: E/AndroidRuntime(15417):    at java.lang.Integer.invalidInt(Integer.java:138)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at java.lang.Integer.parseInt(Integer.java:359)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at java.lang.Integer.parseInt(Integer.java:332)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at com.example.as.MainActivity$1.onClick(MainActivity.java:64)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at android.view.View.performClick(View.java:3558)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at android.view.View$PerformClick.run(View.java:14157)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at android.os.Handler.handleCallback(Handler.java:605)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at android.os.Looper.loop(Looper.java:137)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at android.app.ActivityThread.main(ActivityThread.java:4514)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at java.lang.reflect.Method.invokeNative(Native Method)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at java.lang.reflect.Method.invoke(Method.java:511)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
02-09 14:42:03.918: E/AndroidRuntime(15417):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:38:31.057

记住`Integer.parseInt`可以扔`NumberFormatException`。这可能就是正在发生的事情。

你有号码`EditText`吗？如果有空格，它可能也不会解析。试试这个`tHeight.getText().toString().trim().replace(" ", "");`来删除任何空格。

同样在 XML 布局上，确保将输入类型标记为数字。

最后但并非最不重要的一点是，确保放置一个`try{ }catch(NumberFormatException e){ }`以确保它不会崩溃

# xslt - 如何在 Xslt 输出上设置 Click 事件

> ID：14788650
> 
> 赞同：0
> 
> 时间：2013-02-09T13:25:38.283
> 
> 标签：xslt

这是我的 XSLT 文件：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/> 
     <xsl:template match="/">
            <xsl:for-each select="//child_4331">
              <xsl:value-of select="*"/>
              <xsl:value-of select="@value" />   
                  <xsl:attribute name="onclick">
                    <xsl:call-template name="GetOnClickJavaScript" />
                  </xsl:attribute>  
             </xsl:for-each>
      </xsl:template>
  </xsl:stylesheet> 
```

如何在**child_4331**值上设置点击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:43:05.013

您没有说，但我假设您要复制**child_4331**元素并添加**onclick**属性。

我会摆脱匹配' `/`'的模板并创建一个匹配' `child_4331`'。用于`xsl:copy`创建元素的副本并在其中添加属性。如果**child_4331**元素具有属性或子元素，您将要使用`xsl:apply-templates`它们来获取它们。

这是一个示例片段。您的解决方案可能会因您所需的输出而异。如果不知道您的源 XML 是什么样子以及您期望在结果中看到什么，我无法提供更多信息。

```
<xsl:template match="child_4331">
  <xsl:copy>
    <xsl:attribute name="onclick">
      <xsl:call-template name="GetOnClickJavaScript" />
    </xsl:attribute>
  </xsl:copy>  
</xsl:template> 
```

# javascript - 如何在 AngularJs 中使用 ng-repeat 过滤（键、值）？

> ID：14788652
> 
> 赞同：116
> 
> 时间：2013-02-09T13:25:52.677
> 
> 标签：javascript, angularjs, frameworks, ng-repeat, angular-filters

我正在尝试做类似的事情：

```
<div ng-controller="TestCtrl">
    <div ng-repeat="(k,v) in items | filter:hasSecurityId">
        {{k}} {{v.pos}}
    </div>
</div> 
```

AngularJs 部分：

```
function TestCtrl($scope) 
{
    $scope.items = {
                     'A2F0C7':{'secId':'12345', 'pos':'a20'},
                     'C8B3D1':{'pos':'b10'}
                   };

    $scope.hasSecurityId = function(k,v)
    {
       return v.hasOwnProperty('secId');
    }
} 
```

但不知何故，它向我展示了所有项目。如何过滤 (key,value) ？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-02-09T14:46:46.203

角度[过滤器](http://docs.angularjs.org/api/ng.filter:filter)只能应用于数组而不是对象，来自 Angular 的 API -

> “从数组中选择项目的子集并将其作为新数组返回。”

您在这里有两个选择：
1）移动`$scope.items`到数组或 -
2）预过滤`ng-repeat`项目，如下所示：

```
<div ng-repeat="(k,v) in filterSecId(items)">
    {{k}} {{v.pos}}
</div> 
```

在控制器上：

```
$scope.filterSecId = function(items) {
    var result = {};
    angular.forEach(items, function(value, key) {
        if (!value.hasOwnProperty('secId')) {
            result[key] = value;
        }
    });
    return result;
} 
```

**jsfiddle**：http: [//jsfiddle.net/bmleite/WA2BE/](http://jsfiddle.net/bmleite/WA2BE/)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-02-09T16:13:07.643

我的解决方案是创建自定义过滤器并使用它：

```
app.filter('with', function() {
  return function(items, field) {
        var result = {};
        angular.forEach(items, function(value, key) {
            if (!value.hasOwnProperty(field)) {
                result[key] = value;
            }
        });
        return result;
    };
}); 
```

在html中：

```
 <div ng-repeat="(k,v) in items | with:'secId'">
        {{k}} {{v.pos}}
 </div> 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2015-12-09T22:16:24.313

Also you can use `ng-repeat` with `ng-if`:

```
<div ng-repeat="(key, value) in order" ng-if="value > 0"> 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-10-22T14:07:49.323

或者干脆使用

```
ng-show="v.hasOwnProperty('secId')" 
```

在此处查看更新的解决方案：

[http://jsfiddle.net/RFontana/WA2BE/93/](http://jsfiddle.net/RFontana/WA2BE/93/)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-10-06T13:29:03.773

您可以简单地使用[angular.filter](https://github.com/a8m/angular-filter)模块，然后您甚至可以通过嵌套属性进行过滤。
请参阅：[jsbin](http://jsbin.com/royuj/10/edit?html,js,output)
**2 示例：**

**JS：**

```
angular.module('app', ['angular.filter'])
  .controller('MainCtrl', function($scope) {
  //your example data
  $scope.items = { 
    'A2F0C7':{ secId:'12345', pos:'a20' },
    'C8B3D1':{ pos:'b10' }
  };
  //more advantage example
  $scope.nestedItems = { 
    'A2F0C7':{
      details: { secId:'12345', pos:'a20' }
    },
    'C8B3D1':{
      details: { pos:'a20' }
    },
    'F5B3R1': { secId:'12345', pos:'a20' }
  };
}); 
```

**HTML：**

```
 <b>Example1:</b>
  <p ng-repeat="item in items | toArray: true | pick: 'secId'">
    {{ item.$key }}, {{ item }}
  </p>

  <b>Example2:</b>
  <p ng-repeat="item in nestedItems | toArray: true | pick: 'secId || details.secId' ">
    {{ item.$key }}, {{ item }}
  </p> 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-02-05T08:25:52.033

有点晚了，但我找了一个类似的过滤器，最后使用了这样的东西：

```
<div ng-controller="TestCtrl">
 <div ng-repeat="(k,v) in items | filter:{secId: '!!'}">
   {{k}} {{v.pos}}
 </div>
</div> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-09T11:51:50.933

虽然这个问题相当古老，但我想为 angular 1 开发人员分享我的解决方案。关键是重用原始角度过滤器，但透明地将任何对象作为数组传递。

```
app.filter('objectFilter', function ($filter) {
    return function (items, searchToken) {
        // use the original input
        var subject = items;

        if (typeof(items) == 'object' && !Array.isArray(items)) {
            // or use a wrapper array, if we have an object
            subject = [];

            for (var i in items) {
                subject.push(items[i]);
            }
        }

        // finally, apply the original angular filter
        return $filter('filter')(subject, searchToken);
    }
}); 
```

像这样使用它：

```
<div>
    <input ng-model="search" />
</div>
<div ng-repeat="item in test | objectFilter : search">
    {{item | json}}
</div> 
```

这是一个[笨蛋](https://plnkr.co/edit/oQkxzx8sNp93pHCWadHR?p=preview)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-15T22:23:41.913

我做了一些我已经在多个项目中使用过的通用过滤器：

*   object = 需要过滤的对象
*   field = 我们将过滤的对象中的字段
*   filter = 需要匹配字段的过滤器的值

**HTML：**

```
<input ng-model="customerNameFilter" />
<div ng-repeat="(key, value) in filter(customers, 'customerName', customerNameFilter" >
   <p>Number: {{value.customerNo}}</p>
   <p>Name: {{value.customerName}}</p>
</div> 
```

**JS：**

```
 $scope.filter = function(object, field, filter) {
    if (!object) return {};
    if (!filter) return object;

    var filteredObject = {};
    Object.keys(object).forEach(function(key) {
      if (object[key][field] === filter) {
        filteredObject[key] = object[key];
      }
    });

    return filteredObject;
  }; 
```

# authentication - 获取“授权访问”html时如何正确处理通过JSONP从js客户端调用GAS？

> ID：14788653
> 
> 赞同：0
> 
> 时间：2013-02-09T13:26:05.840
> 
> 标签：authentication, google-apps-script, jsonp

大家好，我没有在其他地方找到这个，也没有在旧的 GAS 产品论坛中找到这个，所以这里是：

我正在编写一个简单的客户端 javascript 来查询各种 API。在查询我设置为访问 gmail 的某个 GAS 脚本时，我知道我应该[通过 JSONP 提供其数据](https://developers.google.com/apps-script/content_service#serving_jsonp_in_web_pages)。客户端脚本动态注入一个`SCRIPT`标签，通常应该将此“响应”作为脚本处理。除非响应包含[html，请求用户授予权限](https://developers.google.com/apps-script/scripts_google_accounts#grantingAccess)。在这种情况下，这`HTML`会`SCRIPT`引发 MIME 类型不匹配的语法错误。

研究这个问题我被引导相信解决方案在于总是在每次通话之前将用户重定向到这个页面。所以我的问题是，我在哪里可以找到关于这个问题的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:43:30.167

不幸的是，没有一个完整的解决方案来检测和授予 JSONP 请求中使用的脚本的权限。我见过一些变通方法，其中应用程序首先提示用户访问 Web 应用程序的 URL，以便他们可以授予授权，然后才允许他们使用应用程序的 JSONP 部分。

# javascript - 如何为我的脚本提供文件系统，以便将数据保存到磁盘？

> ID：14788654
> 
> 赞同：0
> 
> 时间：2013-02-09T13:26:06.637
> 
> 标签：javascript, html, google-chrome

我有[这个网页](https://dl.dropbox.com/u/30347791/txt2crd/txt2crd.html)用于将文本转换为 chordpro。今天在文本区修改内容；强迫我打开一个文本编辑器，然后将文本区域内容粘贴到那里，但我宁愿打开一个保存文件对话框，以便将内容直接保存到磁盘。我试图弄清楚如何使用 HTML5 [Filesaver](http://www.w3.org/TR/file-writer-api/#the-filesaver-interface)，我想我快到了，但我不知道如何提供文件系统（fs）？Chrome 一直告诉我 fs 未定义（因为我没有提供它）。

**我是否以正确的方式接近这一点，除了文件系统之外，我还需要提供什么才能使其正常工作？**

这就是我已经走了多远。HTML 输入为：

```
<button type="button" onclick=saveTextArea();>Convert</button> 
```

Javascript是：

```
function saveTextArea(fs) {
    "use strict";
    convertToChordpro(); // Converts text area value to chordpro format

    var textArea = document.getElementById('textArea');
    var artist = document.getElementById('artist').value;
    var title = document.getElementById('title').value;
    var fileName = (artist && title) ? artist + "-" + title + ".txt" : "artist-title.txt";
    fs.root.getFile(fileName, {create: true}, function(fileEntry) {
        fileEntry.createWriter(function(fileWriter) {
                fileWriter.onwrite = function(e) {
                    console.log('Write completed.');
                };

                fileWriter.onerror = function(e) {
                    console.log('Write failed: ' + e.toString());
                };

                var bb = new BlobBuilder();
                bb.append(textArea.value);

                fileWriter.write(bb.getBlob('text/plain'));
            }, onError);
    }, onError);
}
function onError() {}
window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
window.requestFileSystem(TEMPORARY, 1024*1024, saveTextArea, onError); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:08:07.843

做这样的事情

 ~~~~```
    var fs = window.requestFileSystem(TEM...);
    保存文本区域（fs）；

```~~  ~~- 编辑 -

定义错误处理程序：

```
function onError(e) { console.log(e); } 
```

必须调用初始化或错误处理程序。在您的情况下，将调用错误处理程序（因为没有初始化处理程序）。

但是... w3c FileSystem API 不提供文件选择器，如果这是您想要的。存储是本地的，不能从浏览器沙箱外部访问。FileSystem API 是相当实验性的，目前只有 Chrome 支持。

也许您想要的是通过 <input type="file"> 进行简单的文件上传并将数据发布到您的服务器？~~~~

# ios - 创建与音乐比特率匹配的动画

> ID：14788661
> 
> 赞同：0
> 
> 时间：2013-02-09T13:26:53.607
> 
> 标签：ios, cocoa-touch, avaudioplayer, mpmusicplayercontroller

我想创建一个与播放音乐相匹配的动画，比如如果音乐是轻音乐（如古典音乐）动画会很慢，如果音乐很快（金属/摇滚）动画会很快。

有什么办法可以在iOS中以编程方式做到这一点？像使用`AVAudioPlayer`或任何其他类一样，是否可以检测音乐类型（软/快），以便我可以将动画与之匹配？

# php - nl2br() 不适用于我的文本区域

> ID：14788664
> 
> 赞同：0
> 
> 时间：2013-02-09T13:27:08.233
> 
> 标签：php

有人可以帮我解决这个问题。

我只是想显示来自用户的消息。消息从文本区域进入我的数据库。我的问题是，当我键入消息并将其格式化为分段时，它不会以该格式显示并将其显示为一个长段落。

像这样。

> 要更改文档的整体外观，请在“页面布局”选项卡上选择新的主题元素。要更改快速样式库中可用的外观，请使用更改当前快速样式集命令。\r\n\r\n主题库和快速样式库都提供重置命令，以便您始终可以将文档的外观恢复为当前模板中包含的原始外观。

我尝试使用 nl2br() 和 strip_tags() 但仍然没有运气

验证消息中的代码。

```
// Check for message
if ( !empty ( $_POST['message'])) {
    if ( mb_strlen ( $_POST['message'], 'UTF-8') <= 20 ) {
        $reg_errors['message'] = 'Your message must be greater than 20 characters';
    } else {
        $message = mysqli_real_escape_string($dbc, $_POST['message']);
    }   
} else {
    $reg_errors['message'] = 'Message: This field is required.';
} 
```

这是我从数据库中选择消息时使用的代码

```
$message= $row['message'];
$message= nl2br(strip_tags($message)); 
```

当回显 $message 时，它​​会打印一个类似上面的段落。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:34:27.083

将数据添加到数据库时，您进行了过多的转义。
如果您使用准备好的语句，只需从代码中删除 mysqli_real_escape_string() 调用。
否则你会做两次——所以你必须找到它发生的地方并从你的代码中删除额外的 mysqli_real_escape_string() 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T14:18:23.497

据我了解，通过使用，`mysqli_real_escape_string()`您可以使其转义反斜杠，因此在交易时例如`\r\n`变成`\\r\\n``\\\\r\\\\n`

1.  字面反斜杠
2.  r
3.  字面反斜杠
4.  n

因此，您可能希望在添加到数据库之前将它们替换为适当的字符。这样做您可以从各种内置函数中获取图片，例如[`preg_replace()`](http://php.net/manual/en/function.preg-replace.php), [`strtr()`](http://www.php.net/manual/en/function.strtr.php), [`str_replace()`](http://php.net/manual/en/function.str-replace.php)...</p>

# ruby - 在 Sinatra 应用程序中获取机架安装路径

> ID：14788671
> 
> 赞同：2
> 
> 时间：2013-02-09T13:27:29.277
> 
> 标签：ruby, sinatra, rack

假设我有以下`config.ru`文件

```
require './status.rb'

map "/status" do
  run Sinatra::Application
end 
```

这`status.rb`是一个简单的

```
require 'sinatra'

get '/' do
  'Some status here...'
end 
```

我想知道 Sinatra 应用程序安装在哪里`status.rb`（例如提供正确的资源路径）。有没有办法从 Rack 中检索这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:21:32.200

要获取应用程序的安装位置，您可以使用[`request.script_name`](http://www.sinatrarb.com/intro.html#Accessing%20the%20Request%20Object).

```
get '/' do
  p request.script_name # will print "/status"
  'Some status here...'
end 
```

如果您正在为资源生成 url，则可能需要查看该[`url`方法](http://www.sinatrarb.com/intro.html#Generating%20URLs)。这将考虑代理以及应用程序的安装位置等因素：

```
get '/' do
  p url('foo') # will print "http://localhost:9292/status/foo"
  'Some status here...'
end 
```

# ember.js - Ember.js 是否支持 IE6？

> ID：14788678
> 
> 赞同：7
> 
> 时间：2013-02-09T13:27:54.603
> 
> 标签：ember.js, internet-explorer-6

我在一个问题线程中看到 Ember 计划支持任何可使用 BrowserStack 测试的东西。七 JS 框架博客文章中提到，Ember 不打算支持低于 IE8 的版本。
显然，我确实理解 IE6 不支持 pushState 之类的东西，因此没有可用的路由等。但我希望大多数基本功能都可用，例如 indexOf 不用于数组遍历等。

安吉拉

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-09T13:52:03.843

谢天谢地，我使用 Ember 创建的所有应用程序都不需要任何低于 IE8 支持的东西。IE8仍然[存在一些未解决的问题](https://github.com/emberjs/ember.js/issues/search?q=ie6)，这绝对是 IE8 及以下版本的一个问题，但我知道随着我们接近 Ember 1.0，整个社区都在努力解决这个问题。

我认为在 Ember 应用程序中必须支持 IE6 的最大缺点是性能问题。虽然每个版本都会改​​进这些，但在 IE6 和 Chrome 22.0 之类的版本之间仍然存在很大的空白。甚至 IE7[在性能上也有相当大的飞跃](http://betanews.com/2009/03/19/performance-test-ie8-easily-doubles-ie7-speed/)。

此外，在 IE8 中进行测试时，我经常会遇到[可怕的“无响应脚本”对话框](https://github.com/emberjs/ember.js/issues/1560)，因此您需要分解大型 JavaScript 循环以将其发回浏览器。否则会导致 IE8 及以下版本将您与对话框混淆。幸运的是，在 IE9 中，他们让这个对话框变得不那么迂腐了。

如果我们继续下去，我们会发现 jQuery 去年宣布[jQuery 2.0 将成为 jQuery 的第一个版本，不再支持 IE6、IE7 和 IE8](http://www.sitepoint.com/jquery-2-support-ie6-ie7-ie8/)。由于 Ember 需要 jQuery，而且 Ember 可能会随着 jQuery 一起发展，因此对 IE8 的长期支持可能会受到质疑。尽管该文档中提到了一些*技巧*，可以根据 IE 版本加载旧版本的 jQuery，但 Ember 也可能会效仿放弃对 IE8 及更低版本的支持。

总而言之，以我使用 Ember 和 IE8 的经验，使用 IE6 和 Ember 进行开发时，您可能会遇到一大堆莫名其妙的*怪癖*。

Ember 是否支持 IE6？在部分。它可以使用吗？我对此表示怀疑。IE6/IE7 和 Ember 的未来是什么？苍凉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T11:49:06.127

Ember 2.0 仅支持**`>= IE9`**. 这意味着已放弃对 IE6、IE7 和 IE8 的支持。

*在 Ember 博客文章中阅读更多内容[Internet Explorer 8 支持将在 Ember 2.0 中删除](http://emberjs.com/blog/2015/04/20/ie8-support-update.html)。*

# java - 将 ActionListeners 添加到小程序中的按钮数组

> ID：14788693
> 
> 赞同：2
> 
> 时间：2013-02-09T13:30:37.697
> 
> 标签：java, swing, user-interface, applet

我做了一个游戏，用户必须输入一个相当于十进制的二进制数。用户单击在 0 和 1 之间切换的按钮。这在 eclipse 中作为应用程序运行良好，但是当我尝试作为小程序运行时，它运行不正确。只有第一个按钮注册了任何事件（只添加了第一个动作监听器？）我怎样才能让它工作？欢迎任何有用的建议！

```
for(int i = 0; i < buttons.length; i++) {
    buttons[i] = new JButton("0");
    buttons[i].setActionCommand("0");
    buttons[i].setEnabled(true);
    bpanel.add(buttons[i]);
}                                 

    for (int i = 0; i<size;){
    buttons[i].addActionListener(   
    new ActionListener(){
           public void actionPerformed(ActionEvent e) {
           String choice = (String) e.getActionCommand(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:40:08.763

您的所有按钮都具有相同的文本和相同的操作命令。

您可能应该将第一个循环中的第一行更改为：

```
buttons[i] = new JButton(i + "");
buttons[i].setActionCommand(i + ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:49:15.040

您在所有按钮上设置了相同的操作命令：
`buttons[i].setActionCommand("0");`

这里是这个特定的代码：每次点击按钮
`String choice = (String) e.getActionCommand();` 返回**0**

尝试为每个按钮**设置不同的操作命令**

# php - 没有foreach循环的codeigniter单个结果

> ID：14788695
> 
> 赞同：1
> 
> 时间：2013-02-09T13:31:19.333
> 
> 标签：php, mysql, codeigniter, foreach

我正在使用 codeigniter 从数据库中获取单个结果，如下所示：

```
$user = $this->db->query("SELECT * FROM users LIMIT 1"); 
```

然后我得到返回的对象并通过它循环，这样：

```
foreach ($user->result() as $row) { ... } 
```

可以想象，使用循环没有意义，因为只有一个结果。有没有办法在不循环的情况下获取用户参数？这一行中的一些东西：

```
echo $user['name']; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T13:36:37.960

```
$user = $this->db->query("SELECT * FROM users LIMIT 1")->row(); 
```

将其作为对象 ( `echo $user->name;`)

```
$user = $this->db->query("SELECT * FROM users LIMIT 1")->row_array(); 
```

因为有是作为一个数组（`echo $user['name'];`）；

```
$user = $this->db->limit(1)->get('users')->row(); //or ->row_array(); 
```

使用增强现实；

```
$row = $user->first_row(); 
```

从结果集 ($this->db->result()) 中取出第一行，作为对象（默认）；

```
$row = $user->first_row('array'); 
```

从结果集中取出第一行，作为数组；

```
$row = $user->row_array(1); 
```

返回一个特定的行（首先，在这种情况下。只需传递`<N>`行的）。也适用于`$user->row(1);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:33:40.840

这将是：

```
$user = $this->db->query("SELECT * FROM users LIMIT 1")->row_array(); 
```

更多细节在这里：[http ://ellislab.com/codeigniter/user-guide/database/results.html](http://ellislab.com/codeigniter/user-guide/database/results.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T10:22:46.670

做这样的事情

```
 //in the model
    $query = $this->db->query("your query");

$row = $query->row();

    if (isset($row))
return $row;
}else{
return false;
} 
```

然后像这样回显你的结果

```
echo $row->username; 
```

如果你想将它传递给视图

```
//in the controller

$this->load->model('somemodel');
        $hm=$this->somemodel->somemethod();
        $data['query']=$hm;
    $this->load->view('path/to/view',$data); 
```

然后以同样的方式回显

```
echo $row->username; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-09T13:36:18.717

假设例如您的模型功能是这样的......

```
 public function get_users()
 {

  $query = "Select * from users limit 1";

  $res=$this->db->query($query);

    if($res->num_rows()>0){
        return $res->result("array");
    }
    return array();
 } 
```

假设您在控制器函数中调用此模型，如下所示

```
 $users =  $this->model_file->get_users(); 
```

然后你可以像这样回声`echo $users[0]['user_name'];`

# c# - 实体框架作为数据库代码的类型检查/验证系统

> ID：14788701
> 
> 赞同：0
> 
> 时间：2013-02-09T13:31:49.147
> 
> 标签：c#, entity-framework, orm, entity-framework-4

当我阅读使用实体框架（或任何现代 ORM）的优缺点列表时，我很惊讶没有出现以下几点（自我引用）：

> 使用强类型域实体允许在编译时进行类型检查，这实际上是对所有数据库操作进行验证。这是 ADO.NET 无法做到的（无论是使用内联 SQL 还是存储过程）。

对我来说，这是使用 ORM 的最大优势之一。在处理基于 ADO.NET 的应用程序时，我经常遇到的一个问题是来自 SQL 的运行时错误。静态检查完全消除了这一点。

谁能详细说明为什么这与许多开发人员没有太大关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:20:25.743

哦，太好了。

它也不是免费的。EF 本质上是建立在 ADO.net 之上的，它只是使用反射在强类型类和实际列名之间来回转换。如果您的记录集相当小，这很好，但当您开始处理较大的数据集时，它会非常明显。一般来说，这个额外的延迟时间并不重要，因为如果说数据库需要两秒钟来提取数据，那么额外的毫秒（甚至一秒）会有什么不同。但是在某些情况下，速度至关重要，在这些情况下，您几乎必须使用原始 ADO 编写自己的构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T14:09:59.287

[这里](https://softwareengineering.stackexchange.com/questions/186649/entity-framework-as-a-type-checking-verification-system-for-database-code)也问了同样的问题。它包括一些很好的答案。

[Programmers.stackexchange.com](https://softwareengineering.stackexchange.com/)是一个更适合提问的地方。

# oop - 桥接模式中的依赖箭头

> ID：14788703
> 
> 赞同：1
> 
> 时间：2013-02-09T13:32:10.467
> 
> 标签：oop, design-patterns, dependencies, uml, class-diagram

![在此处输入图像描述](../Images/27fbc09088ddc71df0cedd83c0f9926a.png)

箭头是否读作“Arena 取决于 LeagueStore”？这是如何实施的？[这](https://cs.stackexchange.com/questions/6973/what-do-these-arrows-in-design-pattern-diagrams-mean)是一个类似的问题，但它不包括这样的箭头。

图片取自[幻灯片 9](http://www.cs.fsu.edu/~lacher/courses/COP3331/design2.ppt)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T00:26:56.757

UML 关系“取决于”的范围特意扩大。这意味着关系所引用的“分类器”（类、接口、包……）的某些方面被关系另一端的分类器使用。这可以包括调用一个方法、使用一个类型，包括一个包等等。

在这种情况下我认为它可以清楚地解释为“使用”，即调用它的一个或多个方法。今天，这种关系有它自己的 UML 表示形式，称为依赖关系上的“使用”，以使其更加具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:05:53.453

该图不是一个很好的桥梁示例。这个名字来自于在顶部连接两个层次结构的整个想法。该图所描绘的只是外部类（Arena）通过外部类操作 LeagueStore 的事实。这甚至不是一种模式，而是 Coplien 的*Advanced C++*中的 Envelope-Letter Idiom 。

Bridge 将是 LeagueStore 在内部有一个委托（imp​​l，如图所示），但也有 LeagueStore 的专业化。例如，如果你有一个名为 Report 的类，它里面会有 ReportImpl，它可能有 JasperReport 和 BirtReport 之类的子类，但 Report 可能有 CrosstabReport 之类的子类。

# php - 手动安装 Apache/MySQL & PHP 的优点

> ID：14788704
> 
> 赞同：1
> 
> 时间：2013-02-09T13:32:15.990
> 
> 标签：php, mysql, windows, apache

我看到有人说最好手动安装 Apache/MySQL/PHP，而不是使用 XAMPP 或 WAMP 等软件包安装它们。

这是真的吗？手动一个一个地安装它们有什么好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-25T06:08:24.247

逐步设置 Apaache、PHP、Mysql、phpMyAdmin 和 XDebug 的过程。

1)如何安装Apache

2) 为 Apache 设置 PHP

3）安装和配置 MySQL 以与 PHP 一起使用

4)设置XDebug进行调试

5)phpMyAdmin

注意：在本教程中，我的服务器文件夹位于 F:\Server

如何安装阿帕奇

1) 有两种安装 apache 的方法，从 httpd.apache.org/download.cgi 安装旧版本的 apache httpd（与 Windows XP 兼容）或从 www.apachelounge.com/download/ 获取最新的 apache build [zip](http://www.apachelounge.com/download/)。

2）我将展示如何从从 apachelounge.com/download/ 下载的 zip 版本配置 apache。

3)点击页面左侧的Additional + VC9。

4) 使用 OpenSSL 0.9.8 下载 2.4.x zip 构建。

5）在位置创建一个名称为 Server 的文件夹。

6）我的位置是 F:\Server

7) 将 Apache24 从 apache zip 解压到 Server 文件夹。

8) 现在转到 Apache 中的 config 文件夹并在任何文本编辑器中打开 httpd.config。

9）查找（Ctrl + F）并替换“c：/Apache24”的每个实例并将其更改为您的apache位置，在我的情况下为f：/Server/Apaache24。

ServerRoot "c:/Apache24" 和 ServerRoot "f:/Server/Apache24"

DocumentRoot "c:/Apache24/htdocs" 和 DocumentRoot "f:/Server/Apache24/htdocs"

<目录 "c:/Apache24/htdocs"> 与 <目录 "f:/Server/Apache24/htdocs">

ScriptAlias /cgi-bin/ "c:/Apache24/cgi-bin/" 与 ScriptAlias /cgi-bin/ "f:/Server/Apache24/cgi-bin/"

<目录 "c:/Apache24/cgi-bin"> 与 <目录 "f:/Server/Apache24/cgi-bin">

8）现在运行命令提示符（具有管理员权限）。

9）在命令提示符下转到位置 Server/Apache24/bin 。

10) 在 Bin 文件夹中输入“httpd -k install”来安装 Apache 服务，然后回车。

11) 要启动 Apache 服务器，只需输入“httpd -k start”，然后按 Enter。

12）重新启动您的计算机

13) 现在打开 Bin 文件夹并双击 ApacheMonitor.exe 并启动 Apache

14）现在转到本地主机，如果您看到页面“It Works”，那么 Apache 已成功安装在您的计算机上。

如果您看到一个页面显示“它有效！” 则 Apache 服务器已成功安装。

为 Apache 设置 PHP

1) 前往 windows.php.net/download/ 下载 php-5.4.x-Win32-VC9-x86.zip。

2）在Server文件夹中创建一个名为php的文件夹。

3)将php-5.4.x-Win32-VC9-x86.zip中的所有文件解压到服务器的php文件夹中。

4) 现在转到 Apache 中的 config 文件夹并在任何文本编辑器中打开 httpd.config。

5）找到（Ctrl + F）LoadModule向下滚动直到最后一个LoadModule并粘贴以下内容

LoadModule php5_module "f:/Server/php/php5apache2_4.dll"。

6.  Find(Ctrl + F) AddType 向下滚动直到最后一个 AddType 并粘贴以下内容

添加类型 application/x-httpd-php .php 。

7) 将 PHP 位置添加到 httpd.conf 文件的末尾。例如，在文件末尾添加以下内容：PHPIniDir "Your PHP Location"。

本地主机/info.php

8) 在 php 文件夹中将 php.ini-development 重命名为 php.ini 并在文本编辑器中打开它。

9) 查找(Ctrl + F) display_errors，并确保该值设置为 On。

10.  查找(Ctrl + F) extension_dir = "./" 并将其更改为 extension_dir = "F:\Server\php\ext" 。

11) 重新启动 Apache 服务器。

12）在Apache的htdocs文件夹中创建一个文件“phpinfo.php”，内容如下：

13)转到 localhost/phpinfo.php

extension_dir = "./"

14）右键单击我的电脑单击属性

15)点击环境变量

16）在路径末尾添加您的 php 文件夹位置

17）重新启动您的计算机。

安装和配置 MySQL 以与 PHP 一起使用

1）转到 dev.mysql.com/downloads/mysql/ 下载 zip 或安装程序版本。

2）安装MySQL

3)点击下一步

4）选择完成并单击下一步

5)点击完成

6)点击标准配置

7)点击下一步

8)输入mySQL的密码

9）转到MySQL命令行并输入密码。

12) 打开 php.ini 文件，找到以下行： ;extension=php_mysql.dll 去掉分号。

并找到该行： ;extension=php_mysql.dll

phpMyAdmin

1）转到 Apache 中的 config 文件夹并在任何文本编辑器中打开 httpd.config。

2.  查找 (Ctrl + F) 行 DirectoryIndex index.html 添加 index.php。

3) 打开服务器文件夹中的 php.ini 文件并取消注释 mbstring 和 mysqli 扩展名。

3)转到phpmyadmin.net/下载最新的phpMyAdmin-4.0.8-english.zip。

4) 将其解压缩到 htdocs 中的 phpMyAdmin 文件夹。

5)重启Apache服务器。

6）转到本地主机/phpMyAdmin/

设置 XDebug 进行调试

1)从浏览器转到[http://xdebug.org/download.php并下载](http://xdebug.org/download.php)

php_xdebug-2.xx-5.4-vc9 线程安全 32 位版本。

2）复制并粘贴到 php.ini 文件中的扩展文件夹中。

3) 将以下代码行复制并粘贴到 php.ini 文件的末尾。

[X调试]

;; 只有 Zend 或 (!) XDebug

zend_extension="你的 Xdebug 位置"

xdebug.remote_enable=true

xdebug.remote_host=localhost

xdebug.remote_port=10000

xdebug.remote_handler=dbgp

4)重启Apache服务器。

5)转到 localhost/phpinfo.php 向下滚动查看是否安装了 xDebug

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T13:38:24.283

如果您想成为一个不知道它如何工作以及不知道该怎么做的用户，请选择预制包。
如果您想成为一名试图理解事物并能够解决问题的程序员 - 手动安装将是一种很好的做法，并且是对配置文件、设置等的介绍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:38:30.283

您可以更好地控制您安装的软件版本（和模块/扩展）及其配置方式。软件包供应商（XAMPP/WAMP）通常需要一些时间来实现最新版本的 Apache/PHP/etc。在他们的软件中。有些版本永远不会为其软件包发布。

手动安装更适合喜欢完全控制其环境设置的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-21T04:44:52.230

如果您是新手，并且您想轻松获得服务器，而不仅仅是获得 xampp 或 mamp，或者如果您是程序员并且想要完全控制您的服务器，我猜您可以手动安装，但这是您的选择。

# python - TypeError：无法在数学方程式中将“int”对象转换为 str 隐式变量

> ID：14788705
> 
> 赞同：-3
> 
> 时间：2013-02-09T13:32:18.067
> 
> 标签：python, int

我是 python 新手，但我试图将 DogAge 放入数学方程中，但仍然无法正常工作

```
Animal = input("dog or cat? ")

if Animal == "dog":
    DogAge = int(input("how old is you dog? "))
else:
    CatAge = int(input("how old is your cat? "))

if DogAge == 1:
    print("your dog's age is 11")
elif DogAge == 2:
    print("your dog's age is 22")
else:
    print("your dog's age is " + (DogAge - 2 * 4 + 22)) 
```

给出：

```
TypeError：无法将“int”对象隐式转换为str

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T13:44:45.437

错误准确地指出出了什么问题。改变这个：

```
print("your dog's age is " + (DogAge - 2 * 4 + 22)) 
```

对此：

```
print("your dog's age is " + str(DogAge - 2 * 4 + 22)) 
```

您不能将字符串对象与整数连接起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T13:48:10.310

另一种解决方案：

```
print("your dog's age is {0}".format((DogAge - 2) * 4 + 22)) 
```

（假设您要计算`(DogAge-2) * 4 + 22`，而不是`DogAge + 14`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T14:06:28.593

您可能需要考虑以不同的方式重新组织您的代码，以分离出狗年龄的计算和值的实际打印。

因为如果它变得更复杂，那么以后可以将该代码重构为一个函数。

```
Animal = input("dog or cat? ")

if Animal == "dog":
    DogAge = int(input("how old is you dog? "))
else:
    CatAge = int(input("how old is your cat? ")) 

if DogAge == 1:
    calculated_dogs_age = 11
elif DogAge == 2:
    calculated_dogs_age = 22
else:
    calculated_dogs_age = DogAge - 2 * 4 + 22

print("your dog's age is {0:d}".format(calculated_dogs_age)) 
```

# many-to-many - Laravel 多对多关系

> ID：14788707
> 
> 赞同：0
> 
> 时间：2013-02-09T13:32:41.127
> 
> 标签：many-to-many, laravel, laravel-3

我有两个模型`User`，`Role`我已经关闭了它们的时间戳，就像这样

```
public static $timestamps=false 
```

而且我已经从两个表（＆）中删除了`created_at`和列。`updated_at``users``roles`

我还有一个名为`role_user`3 列的第三个数据透视表`id`，`user_id`并且`role_id`

当我尝试查找用户的角色时，我不断收到未找到未知列`role_user.created_at`。`

请帮助我遇到了这个问题。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:40:08.030

在 laravel 3 中，数据透视表需要有时间戳。将此行添加到您的迁移中： $table->timestamps() 或手动创建列。我相信 created_at 和 updated_at 列的列类型都是日期时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:03:42.500

在数据透视表中，时间戳是必不可少的。时间戳的数据类型是日期时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T13:10:44.153

我刚刚遇到了同样的问题。通过添加修复它：

```
Laravel\Database\Eloquent\Pivot::$timestamps = false; 
```

到应用程序/start.php

# c# - 如何获取列表框控件的选定项？

> ID：14788708
> 
> 赞同：1
> 
> 时间：2013-02-09T13:32:49.613
> 
> 标签：c#, javascript, jquery, asp.net, listbox

我正在用 ASP.NET & c# 开发一个应用程序。我的页面中有一个网格视图。我有一个**Listbox**控件，默认情况下**Enabled**属性设置为**false**。我正在尝试从**复选框**控件上的 javascript / jQuery 启用和禁用该控件。

**我的 ASP 代码：**

```
<asp:GridView ID="gvWhom" runat="server" AutoGenerateColumns="False" DataSourceID="odsWhom"
GridLines="None" Width="100%" OnRowDataBound="gvWhom_RowDataBound">
<Columns>
<asp:TemplateField>
    <HeaderTemplate>
    </HeaderTemplate>
    <ItemTemplate>
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr style="height: 25px;">
        <td width="20%">
            <asp:CheckBox ID="chkCriteria" runat="server" Text='<%#Eval("TargetType") %>' />
        </td>
        <td width="80%">
            <asp:ListBox ID="lbCriteria" runat="server" CssClass="ddl" Width="150px" Height="50px"
            Enabled="false" SelectionMode="Multiple"></asp:ListBox>
        </td>
    </table>
    </ItemTemplate>
    <HeaderStyle Height="2px" />
</asp:TemplateField>
</Columns>
</asp:GridView> 
```

**Javascript代码：**

```
function disableDropDown(chkCriteria, lbCriteria) {
    if (document.getElementById(chkCriteria).checked) {         
     document.getElementById(lbCriteria).removeAttribute('disabled');
    }else{
     document.getElementById(lbCriteria).value = -1;
     document.getElementById(lbCriteria).disabled = true;
    }
    return true;
} 
```

**C#代码：**

```
protected void gvWhom_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
    ListBox lbCriteria = (ListBox)e.Row.FindControl("lbCriteria");
    CheckBox chkCriteria = (CheckBox)e.Row.FindControl("chkCriteria");
    chkCriteria.Attributes.Add("onchange", "javascript:return disableDropDown('" + chkCriteria.ClientID + "', '" + lbCriteria.ClientID + "')");
    }
} 
```

使用上面的代码，我可以启用/禁用 Listbox 控件。但是当我启用控件并选择多个项目并提交表单时，我无法找到列表框的**选定项目**。

如何获取列表框的选定项目？或者有没有其他方法可以启用 - 禁用列表框控件并在 c# 代码中获取所选项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:54:03.203

这主要是一个猜测，但值得一试......

您在此处禁用服务器端的控件：

```
<asp:ListBox ID="lbCriteria" runat="server" CssClass="ddl" Width="150px" Height="50px"
        Enabled="false" SelectionMode="Multiple"></asp:ListBox> 
```

这`Enabled="false"`可能向 ASP.NET 表明它不需要跟踪此控件，不会对其进行更改。这*可能*就是当您回发到服务器时它没有取回数据的原因。

让我们尝试从服务器（ASP.NET）的角度保持控件启用，并在客户端（JavaScript）端完全维护 UI 中的启用/禁用。从本质上消除了 ASP.NET 的内置框架，使您无法决定要跟踪哪些数据。

首先在服务器端控件标记中启用控件：

```
<asp:ListBox ID="lbCriteria" runat="server" CssClass="ddl" Width="150px" Height="50px"
        SelectionMode="Multiple"></asp:ListBox> 
```

其余的由 JavaScript 处理。您已经有一些 JavaScript 代码，您说它们为您启用/禁用了客户端上的控件，对吗？因此，您现在需要做的就是在页面首次在浏览器中加载时为控件的每个实例调用相同的 JavaScript，以禁用客户端控件。这是你想要的部分：

```
document.getElementById(lbCriteria).value = -1;
document.getElementById(lbCriteria).disabled = true; 
```

现在，您似乎正在从服务器端代码绑定您的 JavaScript 事件，这是我无法提供太多帮助的地方，因为该方法对我来说不是特别直观。（它混合了 JavaScript 和 C#，感觉有点倒退。）所以我不*完全*确定你会采用哪种方法。

本质上，您希望为控件的每个实例调用这两行 JavaScript，并且您希望它在页面加载到浏览器中时立即发生。

在 jQuery 中，我会做这样的事情：

```
$(function () {
    $('select.ddl').attr('disabled', 'disabled');
}); 
```

这将在加载 DOM 时运行，并将添加`disabled`属性（使用class`"disabled"`为 every的值。`select``ddl`

# asp.net-mvc - Aruba 上的 ASP.NET MVC 4

> ID：14788714
> 
> 赞同：0
> 
> 时间：2013-02-09T13:34:05.837
> 
> 标签：asp.net-mvc, iis, aruba

我试图环顾四周，但没有找到解决方案。我在 aruba 上有一个网络空间，我想发布默认的 mvc 4 互联网网站（你知道...主页、关于、联系人）。我试图发布，但它不起作用。我读到过将 .aspx（无用，因为这里没有 aspx 页面）或 .chstml（我试过）放在路由配置上，但什么也没发生。总是 HTTP 错误 403.14

有人尝试在 aruba 上发布 mcv 4 网站吗？我需要做哪些改变？

我正在使用带有 ASP.NET 4 和 Classic Pipeline 的 Windows 2008 Hosting

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:31:19.737

如果您指的是 Aruba.it 托管解决方案，它们不支持 mvc 项目。

看看那里的[Windows 托管解决方案](http://hosting.aruba.it/hosting_con_spazio.asp?offerta=1)

它支持 asp.net 不支持 asp.net mvc ...

如果他们支持它，他们会写的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T10:48:24.587

Aruba 支持 Mvc4。您只需要记住按照 Mvison 的指示发布所有 dll（例如 mvc dll、sql ce dll 等），并授予该文件夹的写入权限，否则它们将不允许它们运行（认为这是一个安全政策）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:16:04.883

如果 ASP.NET 适合您，您可以将 MVC dll 与您的项目捆绑在一起（以便在项目的 bin 文件夹中有一个 System.web.mvc.dll。

它应该可以正常工作。

# javascript - 在 Ajax 调用之后在 jQuery 中保留“高度”声明（下拉选择加载产品数据，重置其他页面元素的高度）

> ID：14788720
> 
> 赞同：0
> 
> 时间：2013-02-09T13:34:19.950
> 
> 标签：javascript, jquery

我有一些 jQuery 设置产品描述的高度，可以在这里看到：

[https://www.gabbyandlaird.com/product/truition-products/truition-healthy-weight-loss-pack](https://www.gabbyandlaird.com/product/truition-products/truition-healthy-weight-loss-pack)

我用来实现这一点的代码是：

```
$(document).ready(function() {

var $dscr = $('.commerce-product-field-field-long-description'),
    $switch = $('#toggle'),
    $initHeight = 70; // Initial height

$dscr.each(function() {
    $.data(this, "realHeight", $(this).height());    // Create new property realHeight
    }).css({ overflow: "hidden", height: $initHeight + 'px' });

$switch.toggle(function() {
      $dscr.animate({ height: $dscr.data("realHeight") }, 200);
      $switch.html("- Read More").toggleClass('toggled');

    }, function() {
        $dscr.animate({ height: $initHeight}, 200);
        $switch.html("+ Read More").toggleClass();
    });
}); 
```

我绝不是 Javascript 专家（甚至是业余爱好者）。我对 jQuery 的了解相当有限，所以我不确定上面需要更改什么，以便当下拉选择重新加载页面上的数据时，我不会丢失“阅读更多”部分的高度值产品描述。非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T15:48:15.420

根据您上面的代码，当文档准备好时，您似乎正在做所有事情。这是你可以做的。

```
var initialHeight = function(){
    // you height initialization code here
}

$(function () {
    $(document).ready(initialHeight); // initializes the height on document ready         
    $("#yourSelectBox").change(initialHeight); // initializes the height on combobox selection change

}); 
```

希望这可以帮助。

# c# - 如何从二进制文件c#中读取int数组

> ID：14788722
> 
> 赞同：0
> 
> 时间：2013-02-09T13:34:47.720
> 
> 标签：c#, bytearray, binaryfiles

我有以下代码：

```
LZW lzw = new LZW();
int[] a = lzw.Encode(imageBytes);

FileStream fs = new FileStream("image-text-16.txt", FileMode.Append);
BinaryWriter w = new BinaryWriter(fs);

for (int i = 0; i < a.Length; i++)
{
   w.Write(a[i]);

}

w.Close();
fs.Close(); 
```

如何从文件中读取数组元素？我尝试了几种方法。例如，我将数组的长度写入文件，并尝试读取数字。然而，我失败了。

笔记。我需要获取 int 数组。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T13:36:27.607

您是否正在寻找这个：

```
var bytes = File.ReadAllBytes(@"yourpathtofile"); 
```

或者更多类似的东西：

```
 using (var filestream = File.Open(@"C:\apps\test.txt", FileMode.Open))
        using (var binaryStream = new BinaryReader(filestream))
        {
            for (var i = 0; i < arraysize; i++)
            {
                Console.WriteLine(binaryStream.ReadInt32());
            }
        } 
```

或者，一个带有单元测试的小例子：

用整数创建一个二进制文件...

```
 [Test]
    public void WriteToBinaryFile()
    {
        var ints = new[] {1, 2, 3, 4, 5, 6, 7};

        using (var filestream = File.Create(@"c:\apps\test.bin"))
        using (var binarystream = new BinaryWriter(filestream))
        {
            foreach (var i in ints)
            {
                binarystream.Write(i);
            }
        }
    } 
```

还有一个从二进制文件读取的小示例测试

```
 [Test]
    public void ReadFromBinaryFile()
    {
        // Approach one
        using (var filestream = File.Open(@"C:\apps\test.bin", FileMode.Open))
        using (var binaryStream = new BinaryReader(filestream))
        {
            var pos = 0;
            var length = (int)binaryStream.BaseStream.Length;
            while (pos < length)
            {
                var integerFromFile = binaryStream.ReadInt32();
                pos += sizeof(int);
            }
        }
    } 
```

从二进制文件读取的另一种方法

```
 [Test]
    public void ReadFromBinaryFile2()
    {
        // Approach two
        using (var filestream = File.Open(@"C:\apps\test.bin", FileMode.Open))
        using (var binaryStream = new BinaryReader(filestream))
        {
            while (binaryStream.PeekChar() != -1)
            {
                var integerFromFile = binaryStream.ReadInt32();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:53:27.443

我会反过来说。唯一的问题是您在阅读之前不知道尺寸，所以先计算一下。哦，我会使用“使用”来确保正确处理（和关闭）东西：

```
 int[] ll;
        using (FileStream fs = File.OpenRead("image-text-16.txt"))
        {
            int numberEntries = fs.Length / sizeof(int);
            using (BinaryReader br = new BinaryReader(fs))
            {
                ll = new int[numberEntries];
                for (int i = 0; i < numberEntries; ++i)
                {
                    ll[i] = br.ReadInt32();
                }
            }
        }
        // ll is the result 
```

我不太明白的是为什么你要从 LZW 写一个 int[] ，但我想这是有原因的......

# android - 后台xml不起作用

> ID：14788728
> 
> 赞同：1
> 
> 时间：2013-02-09T13:35:37.327
> 
> 标签：android, android-xml, android-button

我有按钮，我想为它们设置背景 xml，当用户按下任何按钮我想更改其背景时，我就像这样工作

```
<Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:textColor="#FFFFFF"
                android:gravity="center"
                android:background="@drawable/button_selector"
                android:text="@string/b_cancel" /> 
```

### button_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/button_bg" android:state_pressed="false" android:state_selected="false"/>
    <item android:drawable="@drawable/button_bg_hover" android:state_pressed="true"/>
    <item android:drawable="@drawable/button_bg_hover" android:state_pressed="false" android:state_selected="true"/>

</selector> 
```

### button_bg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <padding android:top="10dip"
        android:bottom="10dip"/>

    <!-- Gradient Bg for listrow -->
    <gradient
        android:useLevel="false"
        android:angle="270"
        android:centerColor="#000000"
        android:endColor="#FFFFFF"
        android:startColor="#808080" />
</shape> 
```

### button_bg_hover.xml

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <padding
        android:bottom="10dip"
        android:top="10dip" />

    <!-- Gradient Bg for Button -->
    <gradient
        android:angle="270"
        android:centerColor="#000000"
        android:endColor="#FF0000"
        android:startColor="#808080" />

</animation-list> 
```

它作为背景效果很好，但是当我按下按钮时，它变成了全白，激发了我的灵感`button_bg_hover`，为什么 pelase？什么是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:37:53.407

可能是放错了标签，换行

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" >
  ..... 
</animation-list> 
```

到

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
  .....
</shape> 
```

# php - htaccess 重写规则请求 URI 问题

> ID：14788735
> 
> 赞同：3
> 
> 时间：2013-02-09T13:36:27.513
> 
> 标签：php, .htaccess

如果站点名称没有 REQUEST URI，则 index.php 应该出现，否则如果 URL 是 example.com/key，则文件 pages.php?tkey=key 应该出现。

当我设置这种方式时，子文件夹中的图像不会加载

```
RewriteRule ^/?$ index.php [L]
RewriteRule ^(.*)$ pages.php?page_keytkey=$1 [L] 
```

请指教

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T13:51:28.060

尝试防止**Peter Szymkowski 指出**的递归循环。**还考虑不要像Michael Berkowski 所说**的那样重定向现有文件。

```
RewriteRule ^/?$ index.php [L]
RewriteCond %{REQUEST_URI} !^/pages.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ pages.php?page_keytkey=$1 [L] 
```

例如，您可以在[http://wiki.apache.org/httpd/RewriteCond](http://wiki.apache.org/httpd/RewriteCond)阅读更多内容。

# ios - UIView 子类作为子视图添加到另一个视图时如何得到通知？

> ID：14788740
> 
> 赞同：1
> 
> 时间：2013-02-09T13:36:55.330
> 
> 标签：ios

我需要某种钩子或模板方法来覆盖当视图作为子视图添加到另一个视图时调用的方法，但在文档中找不到它。它必须是由 UIKit 自动调用的东西。原因是我的视图必须在有超级视图时立即启动一些动画，但一旦没有超级视图就停止动画。

我不能覆盖 -setSuperview: 因为 Xcode 没有表明存在这样的类——而且我不能调用 super。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-09T13:40:46.523

你想覆盖[`- (void)didMoveToSuperview`](https://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html).

> `didMoveToSuperview`
> 
> **告诉视图其超级视图已更改。**
> 
> 此方法的默认实现什么也不做。每当父视图更改时，子类可以覆盖它以执行其他操作。

# php - index.php magento 上的脚本头过早结束

> ID：14788741
> 
> 赞同：0
> 
> 时间：2013-02-09T13:37:05.313
> 
> 标签：php, apache, magento

我已经搜索了很多，到目前为止没有一个解决方案有效，所以我想我真的需要排除故障才能看到问题所在：

当我浏览我们的网站 www.theprinterdepo.com 时，它在 chrome 或 firefox 上运行良好。但是，当我在 Internet Explorer 上访问 www.theprinterdepo.com/admin 上的管理员时，它会显示 500 内部服务器错误，之后如果我尝试使用 Internet Explorer 访问 www.theprinterdepo.com，它会显示相同的错误. 同时我可以在谷歌浏览器或火狐浏览该网站，它工作没有问题。

工作时在 Internet Explorer 上加载需要很长时间。虽然在 chrome 上仍然加载完美。

我在 index.php 中设置了 chmod 755。

我在 index.php 上添加了这个

```
if ($_SERVER['REMOTE_ADDR'] == '83.134.93.212') { Mage::setIsDeveloperMode(true); ini_set('display_errors', 1); } 
```

我懂了

```
Warning: simplexml_load_string() [function.simplexml-load-string]: Entity: line 60: parser error : Opening and ending tag mismatch: config line 28 and confg  in /home/theprint/public_html/lib/Varien/Simplexml/Config.php on line 510

#0 [internal function]: mageCoreErrorHandler(2, 'simplexml_load_...', '/home/theprint/...', 510, Array)
#1 /home/theprint/public_html/lib/Varien/Simplexml/Config.php(510): simplexml_load_string('loadString('loadFile('/home/theprint/...')
#4 /home/theprint/public_html/app/code/core/Mage/Admin/Model/Config.php(59): Mage_Core_Model_Config->loadModulesConfiguration('adminhtml.xml', Object(Varien_Simplexml_Config)) 
```

第 510 行对应于此：

```
 public function loadString($string)
    {
        if (is_string($string)) {
            $xml = simplexml_load_string($string, $this->_elementClass);

            if ($xml instanceof Varien_Simplexml_Element) {
                $this->_xml = $xml;
                return true;
            }
        } else {
            Mage::logException(new Exception('"$string" parameter for simplexml_load_string is not a string'));
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:44:51.670

由于您的错误是`Opening and ending tag mismatch:`调试的最快方法之一，因此禁用所有自定义 module/layout.xml 修改，然后一一重新启用它们，直到找到导致此错误的 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T19:40:55.137

通过编辑该配置文件，我能够 ech 路径并发现 xml 失败，开始标签是，结束标签是

我修复了它，然后它开始工作

# javascript - 如何将结果返回给调用函数（开发一个firefox扩展）

> ID：14788754
> 
> 赞同：0
> 
> 时间：2013-02-09T13:38:40.057
> 
> 标签：javascript, sqlite, firefox

在我的 Firefox 扩展中，我有一个带有一些表的 sqlite 数据库。使用 executeAsync()，我更新了表格，插入了一些新数据并选择了一些值。选择案例给我带来了一些问题。

在 handleCompletion() 函数中，我可以将检索到的数据从表传递到另一个函数（例如，可以提醒结果）。但我想将结果传递回调用函数。我在网上搜索了我的问题的答案，但我找不到解决方案。

我发现了什么：

```
retrieveData: function() {
    var rows = new Array(); 

    if (this.dbConn.connectionReady){
        statement = this.dbConn.createAsyncStatement("SELECT * " +
                                                "FROM 'domains' " +
                                                ";");

        statement.executeAsync ({
            handleResult: function(aResultSet) {
                var i = 0;

                for (let row = aResultSet.getNextRow(); row; row = aResultSet.getNextRow()) {
                   rows[i] = row;
                   ++i;
                }
            },

            handleError: function(anError) {
                alert("error");
            },

            handleCompletion: function(aReason) { 
                if (aReason != Components.interfaces.mozIStorageStatementCallback.REASON_FINISHED) { 
                    // something went wrong
                    alert("error2");
                } 
            }
        });
    } 

    return rows;
} 
```

此代码不会返回预期结果。该语句在方法返回数组“rows”之后执行。所以，我的调用函数永远无法从表中接收数据......

我怎么解决这个问题？返回表的数据行是否存在超时？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:42:30.577

理想情况下，您应该在上面的示例中处理回调。这就是 SQLite API 开发人员打算使用 API 的方式。:)

```
retrieveData: function(_callback) {
   ...
   statement.executeAsync ({
      ...
      handleCompletion: function(aReason) { 
         ...
         _callback(rows);
      }
   });
} 
```

以及调用函数的位置：

```
retrieveData(function(rows) {
   // do stuff with rows here
}); 
```

# ios - iOS 块。如何从块设置器中引用对象实例？

> ID：14788756
> 
> 赞同：0
> 
> 时间：2013-02-09T13:38:59.990
> 
> 标签：ios, objective-c-blocks, retain-cycle

我有一个具有指向块的属性的对象：

```
typedef void (^ThingSetter)();
@property(nonatomic, strong) ThingSetter setup; 
```

我用一个块初始化属性。在`block`I 中指的是对象实例：

```
Thing *thing = [[Thing alloc] init];

thing.setup = ^() {

    plainOleCFunction(thing.number);
    [thing doSomethingWithString:@"foobar"];
}; 
```

但是，我收到有关保留循环的编译警告：

```
capturing 'thing' strongly in this block is likely to lead to a retain cycle
block will be retained by the captured object 
```

这样做的正确方法是什么？

谢谢，道格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T13:53:05.263

你必须指定`thing`为弱参考：

```
Thing *thing = [[Thing alloc] init];
__weak Thing *weakThing = thing;

thing.setup = ^() {

    plainOleCFunction(weakThing.number);
    [weakThing doSomethingWithString:@"foobar"];
}; 
```

或者您可以`thing`作为参数提供给块：

```
Thing *thing = [[Thing alloc] init];

thing.setup = ^(Thing *localThing) {

    plainOleCFunction(localThing.number);
    [localThing doSomethingWithString:@"foobar"];
};
thing.setup(thing); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:16:35.450

因为您在块内使用“事物”，所以块将保持指向“事物”的强指针，直到块超出范围或块本身离开堆（即不再有人强烈指向块） - 这就是你想要，因为块首先被移动，然后代码在稍后的某个时间点执行，所以你显然不希望块在没有执行的情况下首次移动块后释放指向“事物”的指针。

现在，您让块维护指向“事物”的强指针，并且您让“事物”通过其属性“设置”维护指向块的强指针。“东西”和块现在都无法逃脱堆。那是因为总会有一个指向它们的强指针（彼此的指针）。这称为记忆“循环”。</p>

答案是将“事物”声明为弱：

事物 *thing = [[事物分配] init];
__weak 事物 *weakThing = 事物；

并在块中使用“weakThing”。这解决了问题，因为现在该块只有一个指向 "weakThing" 的弱指针。"thing" 通过其属性设置仍然有一个指向块的强指针，但这没关系。

希望这有帮助

# c++ - 顶部命中对象的结构

> ID：14788759
> 
> 赞同：0
> 
> 时间：2013-02-09T13:39:28.287
> 
> 标签：c++, data-structures, priority-queue, unordered-map

我想要一个接收到`hit`的 s 参数`object`，显示它的频率。并且能够拥有最频繁的 top `hit`s `object`。 `Unordered_map`适合第一部分，`object`作为键和`hit`值。

```
unordered_map<object,int> 
```

它可以快速搜索`object`并增加其`hit`. 但是排序呢？`priority_queue`启用顶部命中对象。但是如何增加对象的命中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:35:22.930

I managed to solved it by keeping track of sorted list of objects by their hit number as I insert the objects. So there is always the list of the most N top hits. There are 3,000,000 objects and I want to have the top 20\.

Here are the structures I used: `key_hit` to keep track of hits (by key, a string, I mean the object):

```
unordered_map<string, int> key_hit; 
```

two arrays : `hits[N]`, `keys[N]` which contains the top hits and their corresponding key (object).

```
idx,    hits,   keys
 0,     212,    x
 1,     200,    y
 ...
 N,     12,     z 
```

and another map `key_idx` to keep the key and its corresponding index:

```
unordered_map<string,int> key_idx; 
```

Algorithm (without details):

*   `key` is input.
*   search the `key` in `key_hit`, find its hit and increment (this is fast enough).
*   if `hit<hits[N]`, ignore it.
*   else, `idx=key_idx[key]`, (if not found, add it to structures and delete the existing one. it too long to write all details)
*   `H=h[idx]++`
*   check whether it is greater than the above entry, `h[idx-1]<H`. if yes, swap idx and idx-1 in `key_idx`,`hits`,`keys`.

I tried to make it fast. but I don't know how far it's fast.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:48:40.070

我建议你看一下[splay 树](http://en.wikipedia.org/wiki/Splay_tree)，它以最近和最常访问的对象更接近顶部的方式保存对象。这依赖于几个 euristicts，因此会给你一个完美解决方案的近似值。

对于一个精确的解决方案，最好实现自己的[二进制堆](http://en.wikipedia.org/wiki/Binary_heap)并实现操作icrement优先级。理论上同样用于backing for `priority_queue`，但没有cahnge优先级操作，但可以在不影响数据结构操作复杂度的情况下完成。

# c# - 如何获取 RIOT.dll

> ID：14788767
> 
> 赞同：-3
> 
> 时间：2013-02-09T13:40:22.200
> 
> 标签：c#, dll

我现在正在尝试 5 小时来获取 riot.dll（以便我可以在我的 c# 应用程序中使用它）。我已经从 [http://luci.criosweb.ro/riot/download/](http://luci.criosweb.ro/riot/download/)下载了 riot 独立应用程序， 并将 RIOT 作为其他应用程序的插件。我找不到dll。安装后不在任何文件夹中。我下载了包含 .exe 的zip 文件（下载 RIOT DLL 版本）[http://download.criosweb.ro/download.php?sid=R-dll 。](http://download.criosweb.ro/download.php?sid=R-dll)再次安装该 .exe 后，我无法找到 .dll。

我知道这可能是一些愚蠢的解决方案，但我现在看不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:50:05.783

我在官方网站上收到了回复。Riot.dll 可以在这里找到

[http://luci.criosweb.ro/download/Riot_dll_noinstall.zip](http://luci.criosweb.ro/download/Riot_dll_noinstall.zip)

# javascript - 浏览器：控制台组

> ID：14788770
> 
> 赞同：3
> 
> 时间：2013-02-09T13:40:31.960
> 
> 标签：javascript, logging, browser, console

我有这个代码：

```
console.log('before');

console.groupCollapsed('main');
console.log('test1')
console.groupEnd();

console.groupCollapsed('main');
console.log('test2')
console.groupEnd();

console.groupCollapsed('main');
console.log('test2')
console.groupEnd();

console.log('after'); 
```

它在浏览器日志中添加了 3 行。
问题是日志被分成 3 个不同的组。
如果之前的日志消息和当前的日志消息具有相同的组名 ( `main`)，是否可以将日志附加到上一个组？

所以现在输出是：

```
before
> main
    test1
> main
    test2
> main
    test3
after 
```

我想要这个输出：

```
before
> main
    test1
    test2
    test3
after 
```

**更新**：代码是异步的。所以我应该在登录后关闭组，以防止从组外登录到组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T14:27:47.657

自定义记录器类怎么样

```
function Logger(){
    var logs = [];
    var gname = "default";
    function group(name){
        gname = name
    }
    function log(){
        !!logs[gname] || (logs[gname] = []);
        logs[gname].push(Array.prototype.slice.call(arguments, 0));
    }
    function flush(){
      console.log(logs) // loop for groups or just output array
      logs=[]; // clear values
    }
    return {group:group,flush:flush,log:log}
} 
```

用法

```
var l = new Logger()
l.group('main1');
l.log('foo','bar','foobar')
l.log('foo-bar')

l.group('main2');
l.log('foo')
l.log('bar')

l.group('main1');
l.log('foo2bar')
l.log('bar2foo')

l.group('main3');
l.log('foo')
l.log('bar')

l.group('main1');
l.log('foo3')
l.log('bar3')

l.flush() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T13:43:26.593

除非您真的想创建一个新组，否则您不必重新打开一个新组。因此，一旦您打开一个组，您*记录*的任何内容都将附加到该组，直到您关闭它。

因此，以您的示例为例

```
console.log('before');

console.groupCollapsed('main');
console.log('test1');
console.log('test2');
console.log('test2');
console.groupEnd();

console.log('after'); 
```

它不应该打扰您，但浏览器需要一些时间才能将这些记录成组。只是一个附加说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T13:45:06.590

您只能通过不关闭组来做到这一点。你可以使用这样的东西：

```
var curGroup;
console.logInGroup = function(group, log) {
    if (curGroup != group) {
        console.groupEnd();
        console.groupCollapsed(curGroup = group);
    }
    console.log.apply(console, [].slice.call(arguments, 1));
};

console.log('before');
console.logInGroup('main', 'test1');
console.logInGroup('main', 'test2');
console.logInGroup('main', 'test2');
console.groupEnd();
console.log('after'); 
```

# mysql - 简单案例的“子查询返回超过 1 行”错误

> ID：14788774
> 
> 赞同：1
> 
> 时间：2013-02-09T13:40:50.813
> 
> 标签：mysql, sql, function

我是 MySQL 函数的新手。对于以下简单情况，我对“子查询返回超过 1 行”错误感到困惑。

这是我的功能。

```
mysql> create function UserLNFromUsername (username VARCHAR(20)) 
       RETURNS VARCHAR(30)
       return (select last_name from users where username = 'steve' );
Query OK, 0 rows affected (0.00 sec) 
```

这是我遇到的错误。

```
mysql> select UserLNFromUsername('steve');
ERROR 1242 (21000): Subquery returns more than 1 row 
```

这是只返回一行的查询结果。

```
mysql> select last_name from users where username = 'steve';
+-----------+
| last_name |
+-----------+
| Goldstein |
+-----------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:29:49.833

您的功能使用`username`了两次；

```
mysql> create function UserLNFromUsername (username VARCHAR(20)) 
       RETURNS VARCHAR(30)
       return (select last_name from users where username = 'steve' ); 
```

您使用`UserLNFromUsername('steve')`，所以 where 查询将变为`where 'steve' = 'steve'`，因此它将返回表中的所有记录。

我建议重命名参数，例如：

```
mysql> create function UserLNFromUsername (requestedusername VARCHAR(20)) 
       RETURNS VARCHAR(30)
       return (select last_name from users where username = 'steve' ); 
```

但你可能想用这个：

```
mysql> create function UserLNFromUsername (requestedusername VARCHAR(20)) 
       RETURNS VARCHAR(30)
       return (select last_name from users where username = requestedusername ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T13:52:50.193

您的函数应该返回一个字符串。这个查询：

```
select last_name from users where username = 'steve' 
```

正在返回多条记录。因此，您的功能不知道该怎么做。它不能将多条记录转换为单个字符串。

您对此做什么取决于您要完成的工作。

# go - 使用管道与程序进程通信

> ID：14788777
> 
> 赞同：0
> 
> 时间：2013-02-09T13:40:59.470
> 
> 标签：go, ipc, pipe

我希望在从 Golang 程序生成某些程序后能够与它们完全通信。我已经拥有的是基于从标准输出读取的最后一行生成过程和通过管道进行对话：

```
package main

import (
    "fmt"
    "io"
    "log"
    "os/exec"
    "strings"
)

var stdinPipe io.WriteCloser
var stdoutPipe io.ReadCloser
var err error

func main() {
    cmd := &exec.Cmd{
        Path: "/Users/seba/Projects/go/src/bootstrap/in",
        Args: []string{"program"},
    }

    stdinPipe, err = cmd.StdinPipe()

    if err != nil {
        log.Fatal(err)
    }

    stdoutPipe, err = cmd.StdoutPipe()

    if err != nil {
        log.Fatal(err)
    }

    err = cmd.Start()

    if err != nil {
        log.Fatal(err)
    }

    var stdoutLines []string
    go stdoutManage(stdoutLines, stdoutController)

    cmd.Wait()
}

// TODO: imporove as in io.Copy
func stdoutManage(lines []string, manager func(string)) {
    buf := make([]byte, 32*1024)

    for {
        nr, err := stdoutPipe.Read(buf)

        if nr > 0 {
            thelines := strings.Split(string(buf), "\n")
            for _, l := range thelines {
                manager(l)
                lines = append(lines, l)
            }
        }

        buf = make([]byte, 32*1024) // clear buf

        if err != nil {
            break
        }
    }
} 
```

但是，这种方法在清除终端输出的程序和以某种方式缓冲标准输入或根本不使用标准输入的程序方面存在问题（不知道是否可能）。

所以问题是：是否有一种与程序交谈的可移植方式（它可以是非 Golang 解决方案）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:13:40.370

像这样的问题通常与C 库有关，它根据 stdin / stdout / stderr 的确切内容[更改其默认缓冲模式。](http://www.pixelbeat.org/programming/stdio_buffering/)

如果 stdout 是终端，则缓冲自动设置为行缓冲，否则设置为缓冲。

这与您有关，因为当您通过管道运行程序时，它们没有连接到终端，因此会有缓冲，这会扰乱这种使用。

要解决此问题，您需要使用一个伪 tty，它假装是一个终端，但行为就像一个管道。这是一个实现[pty 接口](https://github.com/kr/pty)的库，我实际上没有尝试过，但它看起来做对了！

# php - 表格内容超出表格？

> ID：14788782
> 
> 赞同：0
> 
> 时间：2013-02-09T13:41:40.733
> 
> 标签：php, html-table, echo

我正在尝试用信息呼应表格，特别是帖子。

```
<?php
echo "
<div class='forum_banner'>
    <div style='float:left;'>
        <a href='?action=forum'>Forum</a>
        >
        <a href='?action=forum#".fetch_info(fetch_info(fetch_info($_GET['id'], 'board_id', 'topic'), 'category_id', 'board'), 'name', 'category')."'>".fetch_info(fetch_info(fetch_info($_GET['id'], 'board_id', 'topic'), 'category_id', 'board'), 'name', 'category')."</a>
        >
        <a href='?action=board&id=".fetch_info($_GET['id'], 'board_id', 'topic')."'>".fetch_info(fetch_info($_GET['id'], 'board_id', 'topic'), 'name', 'board')."</a>
        >
        <a href='?action=topic&id=".$_GET['id']."'>".fetch_info($_GET['id'], 'name', 'topic')."</a>
    </div>";
    if (isset($_SESSION['id']))
    {
        echo "
        <div style='float:right;'>
            <form method='post' action='?action=create&type=reply&id=".$_GET['id']."'>
                <input type='submit' value='Reply'/>
            </form>
        </div>";
    }
    echo "
</div>";

echo "
<div class='content'>
    <table class='forum_table'>";
        $query = mysql_query("SELECT * FROM post WHERE topic_id='".$_GET['id']."' ORDER BY time ASC") or die(mysql_error());

        echo "
        <tr>
            <td class='table_header' colspan='2'>
                <b>".fetch_info($_GET['id'], 'name', 'topic')."</b>
            </td>
        </tr>";
        while($query_fetch = mysql_fetch_assoc($query))
        {
            echo "
            <tr>
                <td class='forum_table_cell_post' width='25%'>
                    <ul class='post_info'>
                        <li><b><a href='?action=user&id=".$query_fetch['creator']."'>".fetch_info($query_fetch['creator'], 'name', 'user')."</a></b></li>
                        <li>".fetch_info($query_fetch['creator'], 'rank', 'user')."</li>
                        <li style='max-width:128px; max-height:128px; overflow:hidden;'><img src='".fetch_info($query_fetch['creator'], 'avatar', 'user')."' /></li>
                        <li>Posts: ".count_post($query_fetch['creator'])."</li>
                        <li>Reputation: ".(fetch_info($query_fetch['creator'], 'reputation', 'user')>0 ? ('<font color="#007D00">+'.fetch_info($query_fetch['creator'], 'reputation', 'user').'</font>') : (fetch_info($query_fetch['creator'], 'reputation', 'user')<0 ? ('<font color="#7D0000">'.fetch_info($query_fetch['creator'], 'reputation', 'user').'</font>') : ('<font color="#000000">'.fetch_info($query_fetch['creator'], 'reputation', 'user').'</font>')))."</li>
                    </ul>
                </td>
                <td class='forum_table_cell_post' width='75%'>
                    <ul class='post_info'>
                        <li><i>".convert_date($query_fetch['time']) + ($query_fetch['edit']=='0000-00-00 00:00:00' ? '' : (', last edit: '.convert_date($query_fetch['edit'])))."</i></li>
                        <div class='spacer'></div>
                        <li>".$query_fetch['body']."</li>
                        ".(fetch_info($query_fetch['creator'], 'signature', 'user') ? '<div class=\'spacer\'></div>' : '')."
                        <li>".fetch_info($query_fetch['creator'], 'signature', 'user')."</li>
                    </ul>
                </td>
            </tr>
            ";
        }
        echo "
    </table>
</div>";
?> 
```

这就是我最终得到的（HTML 输出）：

```
<div class='forum_banner'>
    <div style='float:left;'>
        <a href='?action=forum'>Forum</a>
        >
        <a href='?action=forum#General'>General</a>
        >
        <a href='?action=board&id=1'>General discussion</a>
        >
        <a href='?action=topic&id=1'>First topic</a>
    </div>
        <div style='float:right;'>
            <form method='post' action='?action=create&type=reply&id=1'>
                <input type='submit' value='Reply'/>
            </form>
        </div>
</div>
<div class='content'>
    <table class='forum_table'>
        <tr>
            <td class='table_header' colspan='2'>
                <b>First topic</b>
            </td>
        </tr>0</i></li>
                        <div class='spacer'></div>
                        <li>Nice first post!</li>
                        <div class='spacer'></div>
                        <li>"Non incautus futuri"</li>
                    </ul>
                </td>
            </tr>
            0</i></li>
                        <div class='spacer'></div>
                        <li>This is the first topic ever made! This is the first topic ever made! This is the first topic ever made!</li>
                        <div class='spacer'></div>
                        <li>"Non incautus futuri"</li>
                    </ul>
                </td>
            </tr>

    </table>
</div> 
```

php 文件在 index.php 中被“包含”，如下所示：“include 'topic.php'”，并且可以从我的数据库中回显出一个数据表。为什么会这样？另外，这是我的样式表：

```
body {margin:0; padding:0; width:100%; background-color:#F0F2F3; font-family: 'Calibri', sans-serif; font-size:16px; background-image:url(img/pattern.png); background-repeat:repeat;}

p {margin:0; padding:0 0 5px 0;}
a:link,a:visited {color:#003399; text-decoration:none;}
a:hover,a:active,a:focus {color:#FF9933;}
input[type='textbox'],input[type='password'] {margin:0; padding:2px; height:16px; border:1px solid #CCCCCC; background-color:#FFFFFF; color:#000000;}
input[type='submit'] {cursor:pointer; margin:0; height: 22px; padding:2px 6px; border:1px solid #CCCCCC; background-color:#FFFFFF; color:#000000;
-webkit-transition: background 0.4s linear, color 0.4s linear;
-moz-transition: background 0.4s linear, color 0.4s linear;}
input[type='submit']:hover,input[type='submit']:focus {background-color:#99CCCC; color:#FFFFFF;
-webkit-transition: background 0.4s linear, color 0.4s linear;
-moz-transition: background 0.4s linear, color 0.4s linear;}
img {margin:0; padding:0; border:none;}

.page_wrapper {margin:0 auto; padding:0; width:900px;}

#header_area {margin:0; padding:0; width:100%;}
#header_box {margin:0; padding:0; width:900px;}
#header {float:left; margin:30px auto; padding:0;}

#user_panel {float:right; margin:26px auto; height:40px;}

#menu {margin:0; padding:0; list-style-type:none; width:100%; border:1px solid #CCCCCC; border-bottom:none; background-color:#FFFFFF; overflow:hidden;}
#menu li {margin:0; padding:0;}
#menu a:link,#menu a:visited {float:left; margin:0; border-right:1px solid #CCCCCC; padding:10px 25px; color:#000000; background-color:#FFFFFF; text-decoration:none; font-weight:bold;
-webkit-transition: background 0.4s linear, color 0.4s linear;
-moz-transition: background 0.4s linear, color 0.4s linear;}
#menu a:hover,#menu a:active,#menu a:focus {background-color:#99CCCC; color:#FFFFFF;
-webkit-transition: background 0.4s linear, color 0.4s linear;
-moz-transition: background 0.4s linear, color 0.4s linear;}

#content_area {margin:0; padding:0; width:100%;}
#content_box {margin:0; padding:0; width:900px; border:1px solid #CCCCCC; background-color:#FFFFFF; overflow:hidden;}
#home_sidebar {margin:0; padding:0; width:30%; float:left;}
#home_content {margin:0; padding:0; width:70%; float:right;}
.content {height:2000px; margin:10px; padding:0; overflow:hidden;}

.small_box {margin:0 150px; padding:0; border:1px solid #CCCCCC;}

.forum_table {margin:0; padding:0; border:none; width:100%;}
.forum_table_cell {margin:0; padding:0px 10px; background-color:#F0F2F3; height:60px;}
.forum_table_cell_post {margin:0; padding:10px; background-color:#F0F2F3; vertical-align:text-top;}
.table_header {padding:0 10px; margin:0; height:30px; font-size:18px; background-color:#FF9933;}

.spacer {margin:5px 0; padding:0; border-top:1px solid #CCCCCC;}

.forum_banner {margin: 10px 10px 0 10px; overflow:hidden; height:22px;}

.post_info {list-style-type:none; padding:0; margin:0;}
.post_info li {margin:2px 0 0 0; padding:0; vertical-align:text-top;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:05:55.747

html 看起来像一团糟。

您应该做的第一件事是确保生成有效的 html：

*   不要将`<div>`元素作为`<ul>`;的直接子元素放入
*   在您输出到 html 的所有变量上使用[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php)，以确保这些值不会破坏 html。
*   使用`&gt;`代替`>`等

此外，您的查询有一个 sql 注入孔。您应该使用准备好的语句和绑定变量切换到 PDO（或 mysqli）以避免这种情况，或者至少将您的`$_GET`变量转换`int`为整数/`mysql_real_escape_string`如果它是字符串则使用。

# linux - 在centos上开发一个新的应用程序

> ID：14788788
> 
> 赞同：-1
> 
> 时间：2013-02-09T13:42:35.723
> 
> 标签：linux, centos

我正在 centos 中开发一个应用程序，它需要使用许多 linux 实用程序，例如*rsync* n *ssh*。请为它推荐一个工具或平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:48:37.143

只需用 C 语言编写并使用 fork 系统调用，这用于创建一个新进程，您可以将其重定向 stdin/out。

# php - PHP fopen并传递变量以获取变量值

> ID：14788791
> 
> 赞同：0
> 
> 时间：2013-02-09T13:42:47.857
> 
> 标签：php, variables, fopen

我正在尝试为我的简单 CMS 脚本创建一个许可证系统，并且我正在使用 fopen 函数来执行此操作，但我遇到了错误。这是我的 html 表单的代码：

```
<form action="check.php" method="post">
<div><label id="Label1" for="domain">Domain : </label><input name="domain" type="text" /></div>
<div><label id="Label2" for="lis">Liscence : </label><input name="liscode" type="text" /></div>
<div><input name="Submit1" type="submit" value="submit" /></div>
</form> 
```

对于表单操作：

```
<?php
$dom = $_POST['domain'];
$lis = $_POST['liscode'];
$URL = "http://localhost/check/checklic.php?dom=".$dom."&lis=".$lis."";
$handle = fopen($URL, "r");
if ($accept = 0){
$letter = "Invalid License Key";
}
else
{
$letter = " Congratulation You Have Been License";
}
echo $letter;
?> 
```

我的文件用我的数据库检查许可证是：

```
<?php
$domain = $_GET['dom'];
$liskey = $_GET['lis'];
$host = "localhost";
$user = "root";
$pass = "admin";
$db = "test";
$dblink = new PDO("mysql:host=$host;dbname=$db",$user,$pass);
$mysql_liscode = "SELECT liscode FROM lis WHERE domain = '".$domain."'";
$query_liscode = $dblink->query($mysql_liscode) or die("failed!");
$liscode = $query_liscode->fetch(PDO::FETCH_ASSOC);
$count = $query_liscode->rowCount();
if ($count = 0){
$accept = 0;
}
elseif ($liscode['liscode'] != $liskey){
$accept = 0;
}
else{
$accept = 1;
}
?> 
```

请注意，许可证检查器位于

```
http://localhost/check 
```

而具有其作用的形式在

```
http://localhost/site 
```

信息永远存在

```
Warning: fopen(http://localhost/check/checklic.php?dom=ammar.com&lis=1234) [function.fopen]:
failed to open stream: No error in C:\AppServ\www\site\check.php on line 5
Congratulation You Have Been Liscienced 
```

即使我在表格中插入了错误的许可证信息

请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:45:26.057

更改`if ($accept = 0){`为`if ($accept == 0){`和相同的`$count`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T14:03:04.153

我要在这里大吃一惊，并建议问题出在网址上，

试试看

```
$URL = "http://localhost/check/checklic.php?dom=".$dom."&lis=".$lis;
$handle = @fopen($URL, "r"); 
```

# java - Guice 提供者方法是否尊重范围？

> ID：14788794
> 
> 赞同：2
> 
> 时间：2013-02-09T13:43:04.337
> 
> 标签：java, dependency-injection, singleton, guice

如果我有这样的模块：

```
public class MyModule extends AbstractModule {
    @Override
    public void configure() {
        bind(WhatsThis.class).to(AnAppleOfGold.class);
        bind(TellMeYourName.class).to(Bosse.class);
    }

    @Provides
    public AnAppleOfGold providesApple() {
        return new AppleOfGold(providesFizz());
    }

    @Provides
    public Bosse providesBosse() {
        return new Bosse("Grab a hold of my beard", providesFizz());
    }

    @Provides @Singleton
    public Fizz providesFizz() {
        return new Fizz(Math.random());
    }
} 
```

每次 Guice 分别使用`providesApple`and`providesBosse`注入`AnAppleOfGold`和`Bosse`对象时，它们是否会得到相同的 Fizz 单例实例？换句话说，Guice 是否尊重提供方法*之间*的范围，还是仅尊重`Scopes.SINGLETON`来自模块“外部”（DI 客户端代码）的范围（在这种情况下，）？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T04:41:01.933

`@Provides`Guice 将尊重方法之间的 Singleton 范围*，前提是 Guice 是调用它们的那个*。

在您的示例中，您`providesFizz()`手动调用，这与任何其他方法调用一样。每次您尝试获取新的`AnAppleOfGold`或`Bosse`. 同时，当您通过 Guice 请求时，它将创建一个单独的新实例，并为每个通过 Guice 注入`Fizz`的实例返回相同的实例。`Fizz`

那么如何从其他`@Provides`方法访问公共实例呢？很简单：Guice 会[在你的 @Provides 方法上注入所有参数](http://code.google.com/p/google-guice/wiki/ProvidesMethods)，包括`Fizz`or `Provider<Fizz>`。

```
@Provides
public AnAppleOfGold providesApple(Fizz fizz) {
  return new AppleOfGold(fizz);
}

@Provides
public Bosse providesBosse(Provider<Fizz> fizzProvider) {
  return new Bosse("Grab a hold of my beard", fizzProvider.get());
}

@Provides @Singleton
public Fizz providesFizz() {
  return new Fizz(Math.random());
} 
```

# web-services - Webservice 添加/更新组合 Prestashop

> ID：14788800
> 
> 赞同：3
> 
> 时间：2013-02-09T13:44:22.433
> 
> 标签：web-services, combinations, prestashop

我读过，我尝试过，我在 presta 1.5.3 中查看有关如何通过 web 服务添加/更新组合的信息，但我仍然不知道该怎么做。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-03T16:36:09.423

通过 Web 服务将组合分配给产品是一个多步骤操作（与 CSV 导入不同）。

*   给定一个带有 id_product 的产品
*   添加 product_options（BO*属性名称*）
*   将 product_option_values（BO*属性值*）添加到 product_options
*   在指定 id_product 时添加组合

首先使用 DEBUG=true 初始化 PrestaShopWebservice：

```
$api = new PrestaShopWebservice($psShopUrl, $psAuthKey, $psDebug); 
```

无需从头开始构建 XML，而是为您需要的资源获取模板，如下所示：

```
$sxml = $api->get(array('url' => $psShopUrl.'api/'.$resource.'?schema=blank')); 
```

响应是一个 SimpleXMLElement，它比 DOM 更容易操作。

**注意：**响应包含所有包装节点，您必须在您的请求中发送相同的内容，即 PSWebServiceLibrary**不会**为您重新创建它们。

```
<?xml version="1.0" encoding="UTF-8"?>
<prestashop xmlns:xlink="http://www.w3.org/1999/xlink">
<combination>
...
</combination>
</prestashop> 
```

SXML 操作示例：

```
$schema = $api->get(array('url' => $psShopUrl.'api/product_options?schema=blank'));
$data = $schema->children()->children();
$data->is_color_group = false;
$data->group_type = $group_type;   // radio, select
$data->name->language[0] = 'attribute private name';
$data->public_name->language[0] = 'attribute public name';
$xml = $schema->asXML();    // all of it!
$ret = $api->add(array('resource' => 'product_options', 'postXml' => $xml));
$id_attribute_group = (int)$ret->children()->children()->id;    // save for next step 
```

然后获取`product_option_values`模式，设置数据和`id_attribute_group`上一步的数据。等等。

更新是相同的，除了您将`get`通过*id*获取资源，然后`edit`：

```
$sxml = $api->get(array('resource' => $resource, 'id' => $id));
...
$ret = $api->edit(array('resource' => $resource, 'id' => $id, 'putXml' => $xml)); 
```

至于向资源中的节点添加多个*id*值，您可以使用 array_push 快捷方式：`product_option_values``combinations``[]`

```
$data->associations->product_option_values->product_option_values[]->id = 123;
$data->associations->product_option_values->product_option_values[]->id = 456; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T08:52:46.697

这对我来说很好：

```
$webService = new PrestaShopWebservice($url, $api_key, FALSE);
$xml = $webService->get(array('url' => $url .'/api/combinations?schema=blank'));

$resources = $xml->children()->children();

$resources->id_product          = $ps_product_id;
$resources->wholesale_price     = $wholesale_price;
$resources->price               = $price;
$resources->unit_price_impact   = $unit_price_impact;
$resources->minimal_quantity    = $minimal_quantity;
$resources->quantity            = $quantity;
$resources->weight              = $weight;

$resources->associations->product_option_values->product_option_value[0]->id = $color_id;
$resources->associations->product_option_values->product_option_value[1]->id = $size_id;

$request = $xml->asXML();

//This is a function that curl request to specific URL using method (POST)
$response = ps_curl($url . '/api/combinations', $request, 'POST', $api_key);

$xml_load  = simplexml_load_string($response);
$id        = $xml_load->combination->id; 
```

我希望这会有所帮助:)

# android - 根据大小更改 TextView 的文本

> ID：14788801
> 
> 赞同：0
> 
> 时间：2013-02-09T13:44:25.937
> 
> 标签：android, resize, textview

是否有任何简单的方法可以更改 a 的文本`TextView`以使其适合视图的大小？请注意，我*不想*截断文本或放置省略号，我想设置不同的文本。

例如，如果视图太小（这两个字符串都是资源） ，`Experience:`我不想使用。`Exp:`

我知道我可以“避免”`.xml`为每个可能的屏幕尺寸编写自定义布局文件，但如果可能的话，我想避免这种情况。我已经在使用一些不同的布局文件，但仅适用于布局需要进行一些根本性更改以适应屏幕大小的情况。同样在某些情况下，我希望能够动态设置 a 的文本，`TextView`而这不能通过 xml 布局文件来完成。

我只对单行`TextView`和宽度感兴趣。

我能想到的唯一方法是使用自定义`TextView`子类，如果原始文本不适合，则使用后备文本，但我想知道是否有更简单的解决方案，最终，我如何*可靠地*计算某些文本是否适合`TextView`大小与否。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:48:46.403

你可以尝试这样的事情：

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int screenWidth = size.x;

if( textView.getWidth() > screenWidth ) {
    textView.setText("Exp:");
} else {
    textView.setText("Experience:");
} 
```

我不确定您是否需要使用 getWidth() 或 getMeasuredWidth() 所以如果它不起作用，请尝试第二个选项。

# c++ - Qt5，MSVC2010 每次都重新构建，在“DLL-link-fail”上删除 *.obj

> ID：14788804
> 
> 赞同：1
> 
> 时间：2013-02-09T13:44:39.973
> 
> 标签：c++, visual-studio, qt, build

我使用`QMake`to gen `*.vcproj`(from `*.pro`) 来创建将 C++ 类公开给 QML (Qt5.0.1/MSVC2010) 的 DLL。DLL 工作。

但是，我有两个问题（它们可能是相关的）：

1.  当我“构建”时，它总是重新编译 DLL 中的所有内容。（它永远不是“最新的”。）
2.  如果我收到“链接失败”（例如，某些输入库没有定义所需的函数），MSVC 将删除所有`*.obj`中间文件和其他中间文件，要求*下一次*构建（不必要地）重建这些中间文件。（“链接成功”将保留中间`*.obj`文件，但下一个构建将强制它们重新生成。）这意味着当我修复“输入静态- *”时，我永远无法执行“仅项目 => 仅链接”*库”。

这两个看起来都很奇怪。而且，他们让我难过。

请注意，由于我`.vcproj`每次都“重新生成”，因此磁盘上不存在不存在的“项目中的文件”（其他人认为这是始终触发重建的原因）。

我已经尝试过“愚蠢的东西”，比如重新安装服务包、干净的构建、手动删除所有中间件/工件、重新启动等。

从网络搜索（为了解决这个问题，为了解决这个问题而进行了数周的大量阅读），这可能与：

*   每个 DLL 都有自己的“中间 OBJ”目录，但它们都写入相同的（共享调试）-“输出”文件夹，用于`.dll/.lib`. （应该没问题吧？）

如果“正确修复”失败（MSVC 意识到事情是最新的），是否有一种解决方法，我可以*抑制*删除中间文件，以便以后可以强制执行“重新链接”，当*我知道*事情应该没问题的时候？目前，我不能*“仅项目 => 仅链接”*，因为中间体被删除。（如何阻止 MSVC 删除`.obj`文件？）

# python - 从一个 webapp2.RequestHandler 分派到另一个

> ID：14788806
> 
> 赞同：1
> 
> 时间：2013-02-09T13:44:43.533
> 
> 标签：python, webapp2

有没有办法在内部将请求的处理从一个`RequestHandler`子类传递给另一个子类？基本上，我想做的是，从`get`一个`RequestHandler`（好吧，一个子类`RequestHandler`）的方法，将处理请求的任务分派给另一个处理程序（的子类`RequestHandler`），其名称由从数据存储区获取的值确定（我正在使用 GAE，但这与这个问题无关）。代码看起来像这样：

```
class Dispatcher(RequestHandler):
    def get_handler(some_id):
        handler_name = get_handler_name(some_id) # fetches from datastore/etc.
        return getattr(my_module, handler_name)

    def get(self, some_id, *args, **kwargs):
        handler = get_handler(some_id) # e.g., handler could be a HandlerA

        # Not a real function, just to describe what to do:
        # invokes get method of HandlerA (if handler == HandlerA)
        dispatch_to_handler(handler, self, *args, **kwargs) 

    def post(self, some_id):
        handler = get_handler(some_id)

        dispatch_to_handler(....) # dispatches to post method of the handler

class HandlerA(RequestHandler):
    def get(self, *args, **kwargs):
        do_stuff()

    def post(...):
        do_post_stuff() 
```

最大的问题是我需要以某种方式将`self`位置和关键字参数传递给另一个处理程序（本例中为 HandlerA），因为`self`它包含请求、响应、会话、身份验证和其他数据，其中`HandlerA`（或处理程序可能的任何内容） be) 需要以处理请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:20:45.877

试试这种方式：

```
def get(self, some_id, *args, **kwargs)
    handler_cls = get_handler(some_id)
    handler = handler_cls(self.request, self.response)
    return handler.dispatch() 
```

# android - AChartEngine 不显示最大图表值 - 条形图

> ID：14788810
> 
> 赞同：3
> 
> 时间：2013-02-09T13:45:04.843
> 
> 标签：android, bar-chart, achartengine

我正在研究 Achart 引擎，我面临 2 个问题

[问题 1) 我面临的问题与此处在 Y 轴上显示最大图表值](https://stackoverflow.com/questions/14048709/achartengine-does-not-display-the-maximum-chart-value)的屏幕截图中发布的完全相同

2）假设在 3 个条中，如果条中的一个为 0，例如中间一个，则条将不会被绘制并在两个条之间显示空白，但我不想显示一些空间。

关于我想要实现的问题：

问题 1）我的 Ymax 值为 50，我可以将 Y 最大值设置为 60，以便显示最大值并且不会剪切。但是现在发生的是它在 Y 轴上显示 10,20,30,40,50 但是如果我将其设为 60，它会显示 20、40、60，但我希望它显示 10、20、30、40、50、60。

问题 2）如果中间条的值为 0 或任何其他绘制的条值为 0，那么我不想在那里显示空间或根本不绘制条。

请帮助我实现这一目标。

编辑：

截屏 ：

我不能在这里发布屏幕截图缺乏声誉所以我在这里发布请注意

[图片](https://i.imgur.com/UN5wDRP.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:08:03.913

只需将 Y 轴最大值设置为高于最大值即可。

必须显示值为零的条形图。如果没有要添加的值，只需使用`MathHelper.NULL_VALUE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-26T14:18:11.127

有两种方法可以解决这个问题。

其中一种方法是在渲染器中将边距颜色设置为透明

```
renderer.setMarginsColor(Color.argb(0x00, 0xff, 0x00, 0x00)); 
```

除非您的系列具有超出图表范围的值，否则此解决方案有效。您可以重新创建系列以使所有值都在范围内，或者选择解决方案 2。

解决方案 2 是将图表的最大 Y 值乘以 1.1，并将其设置为 Y 最大值

```
mRenderer.setYAxisMax(maxvalue*1.1); 
```

# visual-studio-2012 - Visual Studio 复制网站不起作用

> ID：14788823
> 
> 赞同：1
> 
> 时间：2013-02-09T13:47:55.717
> 
> 标签：visual-studio-2012

我一直在使用 VS 2010 的 Copy Web Site 将我的网站发布到 Windows 2008 Server。我现在有一台安装了 VS 2012 的新 PC (Win7)，并将我的站点/项目移动到这台新 PC。但我无法让复制网站在这里工作。我总是收到错误：

`The ~/ directory does not exist`

通过 Windows Explore FTP 连接到同一个目录没有问题。我试图从 WebsiteCash 中删除缓存，但没有帮助。有任何想法吗？

# symfony - 将验证码添加到 Symfony2 登录页面

> ID：14788828
> 
> 赞同：11
> 
> 时间：2013-02-09T13:48:18.343
> 
> 标签：symfony, login, captcha, fosuserbundle

我是 Symfony2 的新手，但读了很多。首先，我使用的是 symfony 2.1.7。和 FOSUserBundle 用于用户设置。我已经使用用户名和密码覆盖了 fos_user-login 模板。但我想为登录添加验证码。我看过 GregwarCaptchaBundle，根据文档，应该在 FormType 中添加新字段。我的问题来了：symfony 或 FOSUserBundle 登录表单类型在哪里，我可以添加这个新字段，或者覆盖它？存在 ChangePasswordFormType、ProfileFormType...等，但没有 LoginFOrmType。可能很明显，但我没有明白这一点，欢迎任何帮助，请用某种
**解决方案编辑问题**
看看下面的评论，帕特帮助了我。我创建了一个新的表单类型`_username`，`_password`并且`captcha`字段。当用户名和密码的命名以下划线开始时，'login_check' 路由和 Symfony 身份验证就足够了。然而 Symfony 使用一个监听器来进行登录过程。哪个是`UsernamePasswordFormAuthenticationListener`类。虽然我在 Form 类型中添加了验证码字段，但在登录过程中它总是被忽略。（它在页面上呈现，但该字段从未验证，它只是被忽略。）

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('_username', 'email', array('label' => 'form.username', 'translation_domain' => 'FOSUserBundle')) // TODO: user can login with email by inhibit the user to enter username
        ->add('_password', 'password', array(
        'label' => 'form.current_password',
        'translation_domain' => 'FOSUserBundle',
        'mapped' => false,
        'constraints' => new UserPassword()))
        ->add('captcha', 'captcha');
} 
```

正如我上面提到的`UsernamePasswordFormAuthenticationListener`类获取表单输入值，然后重定向你：

```
public function __construct(SecurityContextInterface $securityContext, AuthenticationManagerInterface $authenticationManager, SessionAuthenticationStrategyInterface $sessionStrategy, HttpUtils $httpUtils, $providerKey, AuthenticationSuccessHandlerInterface $successHandler, AuthenticationFailureHandlerInterface $failureHandler, array $options = array(), LoggerInterface $logger = null, EventDispatcherInterface $dispatcher = null, CsrfProviderInterface $csrfProvider = null)
{
    parent::__construct($securityContext, $authenticationManager, $sessionStrategy, $httpUtils, $providerKey, $successHandler, $failureHandler, array_merge(array(
        'username_parameter' => '_username',
        'password_parameter' => '_password',
        'csrf_parameter'     => '_csrf_token',
        'captcha'           => 'captcha',
        'intention'          => 'authenticate',
        'post_only'          => true,
    ), $options), $logger, $dispatcher);

    $this->csrfProvider = $csrfProvider;
} 
```

添加了验证码字段。

```
protected function attemptAuthentication(Request $request)
{
    if ($this->options['post_only'] && 'post' !== strtolower($request->getMethod())) {
        if (null !== $this->logger) {
            $this->logger->debug(sprintf('Authentication method not supported: %s.', $request->getMethod()));
        }

        return null;
    }

    if (null !== $this->csrfProvider) {
        $csrfToken = $request->get($this->options['csrf_parameter'], null, true);

        if (false === $this->csrfProvider->isCsrfTokenValid($this->options['intention'], $csrfToken)) {
            throw new InvalidCsrfTokenException('Invalid CSRF token.');
        }
    }

   // check here the captcha value
    $userCaptcha = $request->get($this->options['captcha'], null, true);
    $dummy = $request->getSession()->get('gcb_captcha');
    $sessionCaptcha = $dummy['phrase'];
   // if captcha is not correct, throw exception
    if ($userCaptcha !== $sessionCaptcha) {
        throw new BadCredentialsException('Captcha is invalid');
    }

    $username = trim($request->get($this->options['username_parameter'], null, true));
    $password = $request->get($this->options['password_parameter'], null, true);

    $request->getSession()->set(SecurityContextInterface::LAST_USERNAME, $username);

    return $this->authenticationManager->authenticate(new UsernamePasswordToken($username, $password, $this->providerKey));
} 
```

现在，我在登录屏幕上有验证码。我知道，玩 symfony 代码不是一个好方法。如果我找到某种方法来覆盖并调用我自己的函数，我会发布它。
**另一个有用的答案**

我找到了另一个可能有用的答案 [链接][是否有任何类型的“预登录”事件或类似事件？](https://stackoverflow.com/questions/8406001/is-there-any-sort-of-pre-login-event-or-similar?answertab=active#tab-top)

按照这个解决方案，我只需覆盖`UsernamePasswordFormAuthenticationListener`类并覆盖安全侦听器`security.authentication.listener.form.class`参数。代码如下：

```
namespace TCAT\StaffBundle\Listener;

use Symfony\Component\Security\Http\Firewall\UsernamePasswordFormAuthenticationListener as BaseListener; use Symfony\Component\Form\Extension\Csrf\CsrfProvider\CsrfProviderInterface; use Symfony\Component\HttpFoundation\Request; use Symfony\Component\HttpKernel\Log\LoggerInterface; use Symfony\Component\Security\Http\Authentication\AuthenticationFailureHandlerInterface; use Symfony\Component\Security\Http\Authentication\AuthenticationSuccessHandlerInterface; use Symfony\Component\Security\Http\Session\SessionAuthenticationStrategyInterface; use Symfony\Component\Security\Http\HttpUtils; use Symfony\Component\Security\Core\Authentication\AuthenticationManagerInterface; use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken; use Symfony\Component\Security\Core\Exception\InvalidCsrfTokenException; use Symfony\Component\Security\Core\SecurityContextInterface; use Symfony\Component\EventDispatcher\EventDispatcherInterface; use Symfony\Component\Security\Core\Exception\BadCredentialsException;

    class StaffLoginFormListener extends BaseListener
    {
        private $csrfProvider;

        /**
         * {@inheritdoc}
         */
        public function __construct(SecurityContextInterface $securityContext, AuthenticationManagerInterface $authenticationManager, SessionAuthenticationStrategyInterface $sessionStrategy, HttpUtils $httpUtils, $providerKey, AuthenticationSuccessHandlerInterface $successHandler, AuthenticationFailureHandlerInterface $failureHandler, array $options
= array(), LoggerInterface $logger = null, EventDispatcherInterface $dispatcher = null, CsrfProviderInterface $csrfProvider = null)
        {
            parent::__construct($securityContext, $authenticationManager, $sessionStrategy, $httpUtils, $providerKey, $successHandler, $failureHandler, array_merge(array(
                'username_parameter' => '_username',
                'password_parameter' => '_password',
                'csrf_parameter'     => '_csrf_token',
                'captcha'           => 'captcha',
                'intention'          => 'authenticate',
                'post_only'          => true,
            ), $options), $logger, $dispatcher);

            $this->csrfProvider = $csrfProvider;
        }

        /**
         * {@inheritdoc}
         */
        protected function attemptAuthentication(Request $request)
        {
            if ($this->options['post_only'] && 'post' !== strtolower($request->getMethod())) {
                if (null !== $this->logger) {
                    $this->logger->debug(sprintf('Authentication method not supported: %s.', $request->getMethod()));
                }

                return null;
            }

            if (null !== $this->csrfProvider) {
                $csrfToken = $request->get($this->options['csrf_parameter'], null, true);

                if (false === $this->csrfProvider->isCsrfTokenValid($this->options['intention'], $csrfToken)) {
                    throw new InvalidCsrfTokenException('Invalid CSRF token.');
                }
            }

            // throw new BadCredentialsException('Bad credentials');
            $userCaptcha = $request->get($this->options['captcha'], null, true);
            $dummy = $request->getSession()->get('gcb_captcha');
            $sessionCaptcha = $dummy['phrase'];

            if ($userCaptcha !== $sessionCaptcha) {
                throw new BadCredentialsException('Captcha is invalid');
            }

            $username = trim($request->get($this->options['username_parameter'], null, true));
            $password = $request->get($this->options['password_parameter'], null, true);

            $request->getSession()->set(SecurityContextInterface::LAST_USERNAME, $username);

            return $this->authenticationManager->authenticate(new UsernamePasswordToken($username, $password, $this->providerKey));
        }

    } 
```

并将`security.authentication.listener.form.class: TCAT\StaffBundle\Listener\StaffLoginFormListener`行添加到 app/config/paramaters.yml 顺便说一句我可以检查我的验证码值。我希望这一切都对你有用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-10T11:13:03.057

```
Adding Captcha to Symfony2 Login Page 
```

我不确定这是个好主意。但这是可行的。

```
Where is the symfony or FOSUserBundle login form type? 
```

登录没有表单类型。[如您在login.html.twig](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/views/Security/login.html.twig#L1-L22)中所见，表单直接嵌入到模板中。

```
How could you do it? 
```

您完全可以创建一个，但您必须自定义[SecurityController](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Controller/SecurityController.php)以便将表单发送到模板。

* * *

**该过程将是这样的：**

`**1.**`创建您的自定义`loginFormType`（您可以在构建器中添加您的验证码）。

`**2.**`覆盖`SecurityController`（你可以看看[这里](https://stackoverflow.com/questions/14790113/dynamically-styling-an-fos-userbundle-login-page/14796887#14796887)看到类似的东西）。您需要重写该`loginAction`方法，以便可以将表单传递到[此处](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Controller/SecurityController.php#L44-48)的模板。

`**3.**`覆盖`login.html.twig`以呈现从控制器传递的表单

* * *

## 编辑：回答您的评论

> 如何在扩展 ContainerAware 的控制器中访问表单？

我强烈推荐[阅读这篇文章](http://richardmiller.co.uk/2011/06/14/symfony2-moving-away-from-the-base-controller/)，了解如何远离基本控制器。现在，你怎么能做到这一点？

好吧，你有两个选择：

## 选项 1：简单的方法

```
$form = $this->createForm(new LoginFormType(), null); 
```

变成：

```
$form = $this->get('form.factory')->create(new LoginFormType(), $null); 
```

## 选项 2：注册表格即服务

`**1.**`创建您的 formType（正常过程）：`loginFormType`

`**2.**`将您的表单定义为服务`acme_user.login.form`。[您在这里](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.x/Resources/config/registration.xml#L9-L21)有一个很好的例子（在 FOSUserBundle 的 1.2 版本中，注册和配置文件表单都被注册为服务，所以这为您提供了一个很好的例子来说明它是如何完成的）。

`**3.**`您现在可以在扩展 ContainerAware 的控制器中使用您的表单。见[这里](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.x/Controller/RegistrationController.php#L33)。

```
$form = $this->container->get('acme_user.login.form'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T10:44:43.837

**回应：我知道玩 symfony 代码不是一个好方法。如果我找到某种方法来覆盖并调用我自己的函数，我会发布它。**

要覆盖“UsernamePasswordFormAuthenticationListenerclass”，您必须复制捆绑包中的侦听器文件并更改 config.yml 文件以加载新的：

```
parameters:
        security.authentication.listener.form.class: Acme\YourBundle\Security\UsernamePasswordFormAuthenticationListener 
```

此外，复制文件中的命名空间必须更改为正确的命名空间：

```
namespace Acme\YourBundle\Security; 
```

最后一件事是在要正确加载的使用部分中添加“AbstractAuthenticationListener”：

```
use Symfony\Component\Security\Http\Firewall\AbstractAuthenticationListener; 
```

# ios - Adobe Air 3.6 preventBackup 上的问题

> ID：14788831
> 
> 赞同：0
> 
> 时间：2013-02-09T13:48:37.397
> 
> 标签：ios, air

adobe air 3.6 sdk beta 与 preventBackup 一起发布，用于 ios 应用程序开发。

但是当我使用 File.preventBackup.resolvePath(dbname) 时，它给出了，

1119：通过静态类型 Class 的引用访问可能未定义的属性 preventBackup。

错误，

我怎样才能使目录不备份 preventBackup thx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:10:35.690

您收到错误是因为没有名为“preventBackup”的 File 类的此类方法或属性

文件类在这里描述：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html#propertySummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html#propertySummary)

.resolvePath 通常与目录属性结合使用，例如：

```
File.applicationDirectory.resolvePath(dbName); 
```

编辑：

根据 AIR 3.6 SDK 的发行说明：

要使用此功能，需要应用程序描述符命名空间 3.6 和 SWF 版本 19 或更高版本

所以你需要在应用程序描述符文件的开头：

```
<application xmlns="http://ns.adobe.com/air/application/3.6"> 
```

这在额外的编译器参数中：

```
-swf-version=19 
```

# php - 我用 PHP 创建了一个管理员登录，但它不起作用。有人可以指导我完成它或提供适当的修改吗？

> ID：14788833
> 
> 赞同：-3
> 
> 时间：2013-02-09T13:48:50.810
> 
> 标签：php, login, admin, login-control, login-script

这是我的登录表单（admin_login.php），带有用户名和密码输入，然后当我点击提交时应该运行 login.php 脚本。

```
admin_login.php
//the login form

<?php 

$dbhost = 'xxxxxx';
$dbuser = 'xxxxxx';
$dbpass = 'xxxxxx';

$con = mysql_connect($dbhost, $dbuser, $dbpass);
if(! $con )
{
  die('Could not connect: ' . mysql_error());
}
mysql_select_db('xxxxxx');

?>

<html>

<head>
<link rel="stylesheet" type="text/css" href="css/master.css">
</head>

<body>

<form method="post" action="login.php">

User:<input name="username" type="text">
Pass:<input name="password" type="password">

<input name="submit" type="submit" value="Submit">

</form>

</body>

</html> 
```

下面的代码应该从之前的文件 admin_login.php 中获取用户名和密码值，如果用户名和密码与存储在我的数据库中的用户名和密码相同，则允许用户进入 admin_control_panel.php。否则返回登录。

```
login.php
//the action script

<?php

$dbhost = 'xxxxxx';
$dbuser = 'xxxxxx';
$dbpass = 'xxxxxx';

$con = mysql_connect($dbhost, $dbuser, $dbpass);
if(! $con )
{
  die('Could not connect: ' . mysql_error());
}
mysql_select_db('xxxxxx', $con);

$query = "SELECT username FROM users ".
         "WHERE username=\"$username\" ".
         "AND password = \"$password\"";

$result = mysql_query($query, $con);         

if (mysql_num_rows($result) == 0)
    header("Location: admin_login.php");
else    
    header("Location: admin_control_panel.php");
?> 
```

如果一切顺利，我应该有一个管理控制面板，我应该能够像普通页面一样使用它，但只有我可以访问它。

```
admin_control_panel.php
//where I will be able to access the admin panel, only I should be authorized.

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Control Panel</title>
</head>

<body>
<p>You are in the admin control panel</p>
</body>

</html>
` 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:52:42.287

你没有得到`$_POST`结果。尝试：

```
$query = "SELECT username FROM users ".
         "WHERE username='".$_POST[username]."' ".
         "AND password = '".$_POST[password]."'"; 
```

此外，这只是一个指导方针。您对 sql 注入持开放态度，您应该考虑使用[PDO](http://php.net/manual/en/book.pdo.php)

您可能还`mysql_data_seek($result, 0);`需要`$result = mysql_query($query, $con);`

您需要将内部结果指针移动到以 . 开头的位置`mysql_data_seek`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:52:30.650

$username = $_POST['username'] 和密码相同。

# haskell - 对于更多类型安全的 DSL，可绑定函子是一个有用的抽象吗？

> ID：14788835
> 
> 赞同：6
> 
> 时间：2013-02-09T13:49:02.633
> 
> 标签：haskell, monads, dsl

# 动机

我目前正在从事一个小爱好项目，以尝试在 Haskell 中实现类似[TaskJuggler](http://taskjuggler.org/)的东西，主要是作为编写特定领域语言的实验。

我目前的目标是有一个小的 DSL 来构建 a 的描述`Project`，以及它的关联`Task`s。还没有层次结构，尽管这将是我的下一个扩展。目前，我有以下数据类型：

```
data Project = Project { projectName :: Text
                       , projectStart :: Day
                       , projectEnd :: Day
                       , projectMaxHoursPerDay :: Int
                       , projectTasks :: [Task]
                       }
  deriving (Eq, Show)

data Task = Task { taskName :: Text }
  deriving (Eq, Show) 
```

没什么太疯狂的，我相信你会同意的。

现在我想创建一个 DSL 来构建项目/任务。我可以使用`Writer [Task]`monad 来构建任务，但这不会很好地扩展。我们现在或许可以做到以下几点：

```
project "LambdaBook" startDate endDate $ do
  task "Web site"
  task "Marketing" 
```

其中`project :: Text -> Date -> Date -> Writer [Task] a`，运行`Writer`以获取任务列表，并为 选择默认值，例如 8 `projectMaxHoursPerDay`。

但我以后希望能够做类似的事情：

```
project "LambdaBook" $ do
  maxHoursPerDay 4
  task "Web site"
  task "Marketing" 
```

所以我`maxHoursPerDay`用来指定关于 a 的（未来）属性`Project`。我不能再`Writer`为此使用 a ，因为`[Task]`无法捕获我需要的所有内容。

我看到解决这个问题的两种可能性：

## 将“可选”属性分离到它们自己的幺半群中

我可以分成`Project`：

```
data Project = Project { projectName, projectStart, projectEnd, projectProperties }
data ProjectProperties = ProjectProperties { projectMaxHoursPerDay :: Maybe Int
                                           , projectTasks :: [Task]
                                           } 
```

现在我可以有一个实例`Monoid ProjectProperties`。当我运行时，`Writer ProjectProperties`我可以执行构建`Project`. 我想没有理由`Project`需要嵌入`ProjectProperties`- 它甚至可以具有与上述相同的定义。

## 使用可绑定函子`Semigroup m => Writer m`

虽然`Project`不是 a `Monoid`，但它当然可以变成 a `Semigroup`。名称/开始/结束是`First`,`maxHoursPerDay`是`Last`,`projectTasks`是`[Task]`. 我们不能在 a 上有一个`Writer`monad `Semigroup`，但我们可以有一个`Writer`可绑定的函子。

# 实际问题

使用第一个解决方案 - 专用“属性” `Monoid`- 我们可以使用单子的全部功能，但需要选择成本。我可以复制 and 中的可覆盖属性，`Project`后者`ProjectProperties`将每个属性包装在适当的幺半群中。或者我可以只编写一次幺半群并将其嵌入其中`Project`——尽管我放弃了类型安全（`maxHoursPerDay` *必须*是`Just`在我实际制定项目计划时！）。

可绑定函子消除了代码重复并保留了类型安全性，但代价是立即放弃语法糖，并且可能会带来长期使用痛苦的成本（由于缺少`return`/ `pure`）。

我在[http://hpaste.org/82024](http://hpaste.org/82024)（用于可绑定函子）和[http://hpaste.org/82025](http://hpaste.org/82025)（用于 monad 方法）有这两种方法的示例。这些示例超出了这篇 SO 帖子中的内容（已经足够大了），并且`Resource`与`Task`. 希望这能说明为什么我需要在 DSL中走得那么远`Bind`（或）。`Monad`

我很高兴甚至找到了可绑定函子的适用用途，所以我很高兴听到您可能有的任何想法或经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T23:18:55.267

```
data Project maxHours = Project {tasks :: [Task], maxHourLimit :: maxHours}

defProject = Project [] ()

setMaxHours :: Project () -> Project Double
setMaxHours = ...

addTask :: Project a -> Project a

type CompleteProject = Project Double...

runProject :: CompleteProject -> ...

storeProject :: CompleteProject -> ... 
```

您现在需要函数组合，而不是编写器中的操作，但是这种模式允许您从部分填充的记录开始，并设置那些需要设置一次且仅一次的内容，并且具有足够的类型安全性。它甚至可以让您对最终结果中的各种设置值和未设置值之间的关系施加约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:19:51.667

Google+ 上提出的一个有趣的解决方案是使用普通的`Writer`monad，但使用`Endo Project`monoid。与 一起`lens`，这产生了一个非常好的 DSL：

```
data Project = Project { _projectName :: String
                       , _projectStart :: Day
                       , _projectEnd :: Day
                       , _projectTasks :: [Task]
                       }
  deriving (Eq, Show)

makeLenses ''Project 
```

随着操作

```
task :: String -> ProjectBuilder Task
task name = t <$ mapProject (projectTasks <>~ [t])
  where t = Task name [] 
```

可以与原始 DSL 一起使用。这可能是我想要的最好的解决方案（尽管使用 monad 可能是对语法的过度滥用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:46:26.013

This is sort of a non-answer, but I feel it should be said.

Isn't record syntax good enough? Do you really need a DSL for marginally improved syntax?

```
defaultProject
  { projectName = "Lambdabook"
  , projectStart = startDate
  , projectEnd = endDate
  , tasks =
    [ Task "Web site"
    , Task "marketing"
    ]
  } 
```

Tangentially, a Racketeer once told me that Haskell only has one macro: `do` syntax. So Haskellers shoehorn everything into monads whenever they want to manipulate syntax.

# php - 我在 zencart 中找不到采购订单的链接

> ID：14788837
> 
> 赞同：0
> 
> 时间：2013-02-09T13:49:18.360
> 
> 标签：php, database, zen-cart

我在我的 zencart 中安装了 super order 、 ty package tracker 和 Purchase order 插件。在 zencart 配置下拉列表中有显示所有链接的链接，除了我在 zencart 管理面板的配置下看不到采购订单模块的链接。当我在数据库中看到 configuration_group 表时，我发现超级订单和采购订单的 sort_order 列值相同，但两者的 configuration_group_id 列值不同。我想如果这可能导致问题，我真的找不到解决方案。虽然当我手动为采购订单设置提供链接时，我看到了它的详细信息，但我需要在配置下的下拉菜单中使用该链接谢谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:47:29.573

听起来您的模块尚未将自身注册到管理菜单系统。如果它没有注册到菜单，那么安全工具将不允许它显示，因为它看起来好像你没有被授权使用它。

# html - 将背景图像和自定义项目符号应用于 CSS 标题

> ID：14788840
> 
> 赞同：3
> 
> 时间：2013-02-09T13:50:04.263
> 
> 标签：html, css, background-image

所以我`<h1>`的 's 应该在它们前面有单独的自定义图案背景和单独的图像项目符号。问题是，我不能将两个样式元素都应用为背景图像（我听说你可以使用 CSS3 制作多个 bg 图像？但我现在想尝试一种更跨浏览器兼容的方式。）

html:

```
<div id="content">
<h1>Heading</h1>
<p>Paragraph</p>
</div> 
```

CSS：

```
#content > h1 {
background: url("heading-bg.png") repeat; 
padding: 25px 0 25px 80px;
} 
```

现在我尝试做这样的事情来`<h1>`在 css 中获取项目符号图像：

```
#content > h1:before {background: url("bullet1.png") no-repeat left;} 
```

我可以在我`<h1>`的 's 周围添加另一个 div 并在其上应用模式，并将项目符号直接应用在`<h1>`. 还有另一种更聪明的方法来达到我想要的效果吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T20:59:33.293

是的，除非内容存在，否则之前和之后将不起作用，

你也可以这样做

```
#content h1:before{
  content:"";
  width:50px;
  height:50px;
  background:url('images/bullet.png');
} 
```

# java - 使用 javapanel 的元素

> ID：14788842
> 
> 赞同：0
> 
> 时间：2013-02-09T13:50:21.613
> 
> 标签：java, swing, jframe, jpanel

我有一个主要`JFrame`由 3 个小的组成，`JPanel`它们根据用户的选择进行切换。

问题是我必须保存插入到`JPanel`数据库中的数据，但我无法直接访问其中的元素`JPanel`。那么我该如何接受这些。

当在主框架中单击 ACCEPT 按钮时，DB 中的条目就完成了。请帮忙

```
if(Selected==Credit Card){
    Select Credit Card Panel;
    }
if(Selected==Debit Card){
    Select Debit Card Panel;
    }
if(Selected==Cash on Delivery){
    Select Cash on Delivery Panel;
    }

onAccept(){
    if(Selected==Credit Card){
get data from Credit Card panel and store in Database; (variables like cc number, cvv)
}

if(Selected==Debit Card){
get data from Debit Card panel and store in Database;
}

if(Selected==Cash on Delivery){
get data from Cash on Delivery Card panel and store in Database;
}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:02:44.293

让您的 3 个面板中的每一个都实现相同的接口：

```
public interface DataStorer {
    public void storeDataInDatabase();
} 
```

然后，当点击接受按钮时，调用这个：

```
DataStorer selectedPanel = (DataStorer) theDisplayedPanel;
selectedPanel.storeDataInDatabase(); 
```

# c# - wp7如何从JSON中获取数据

> ID：14788844
> 
> 赞同：0
> 
> 时间：2013-02-09T13:50:23.633
> 
> 标签：c#, .net, json, windows-phone-7

考虑这个 JSON：

```
 resourceSets: [
{
estimatedTotal: 5,
resources: [
{
__type: "Location:http://schemas.microsoft.com/search/local/ws/rest/v1",
bbox: [
51.3014406,
-8.3233626,
51.3037489,
-8.3182203
],
name: "Some Address",
point: {
type: "Point",
coordinates: [
51.3033847,
-2.3204335
]
},
address: {
addressLine: "SomeAddress",
adminDistrict: "MI",
adminDistrict2: "South Country",
countryRegion: "England",
formattedAddress: "Some Formattedaddress",
locality: "Derby",
postalCode: "12345"
}, 
```

ETC..

紧随其后： http: [//blog.clauskonrad.net/2010/11/wp7-how-to-consume-json-data-from.html](http://blog.clauskonrad.net/2010/11/wp7-how-to-consume-json-data-from.html)

我的课是：

```
[DataContract]
public class ReturnedDetails
{
    [DataMember(Name="formattedAddress")]
    public string formattedAddress { get; set; }

} 
```

和事件代码：

```
 void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        using (var ms = new system.IO.MemoryStream(Encoding.Unicode.GetBytes(e.Result)))
        {
            var ser = new DataContractJsonSerializer(typeof(ReturnedDetails[]));
            ReturnedDetails[] obj = (ReturnedDetails[])ser.ReadObject(ms);
        }
    } 
```

当我运行它时，`InvalidCastException`会抛出一个`ReturnedDetails[] obj = (ReturnedDetails[])ser.ReadObject(ms);`

当我调试并将鼠标悬停在`ser`' `KnownDataContracts`Could not evaluate expression' 和 'null' 上时。

我只想从 JSON 中的 formattedAddress 中获取值，有人知道怎么做吗？

谢谢你的帮助。

堆栈跟踪是：

> 在 System.Net.WebClient.DownloadStringOperationCompleted(Object arg) 在 System.Net.WebClient.OnDownloadStringCompleted(DownloadStringCompletedEventArgs e) 在 System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] 参数, CultureInfo System.Reflection.MethodBase.Invoke(Object obj, Object[] 参数) 中的文化、StackCrawlMark 和 stackMark)
> 在 System.Delegate.DynamicInvokeOne(Object[] args) 在 System.MulticastDelegate.DynamicInvokeImpl(Object[] args) 在 System.Delegate.DynamicInvoke(Object[] args) 在 System.Windows.Threading.DispatcherOperation.Invoke() 在 System .Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority) 在 System.Windows.Threading.Dispatcher.OnInvoke(Object context) 在 System.Windows.Hosting.CallbackCookie.Invoke(Object[] args) 在 System.Windows.Hosting.DelegateWrapper System.Windows.RuntimeHost.ManagedHost.InvokeDelegate 处的.InternalInvoke(Object[] args)
> (IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:03:24.260

最简单的方法是为整个 JSON 设置类。我使用[JSON 2 C#](http://json2csharp.com/)为此编写样板。它将为您提供一些`RootObject`将 JSON 视为一个整体的类。

```
WebResponse ws = req.GetResponse();
//Deserialize the JSON
DataContractJsonSerializer ds = new DataContractJsonSerializer(typeof(RootObject));
//Cast to root object
RootObject ro = (RootObject)ds.ReadObject(ws.GetResponseStream()); 
```

从那里您可以通过您的`RootObject`遗嘱持有您的`ReturnedDetails[]`.

# android - 是什么导致 LogCat for eclipse(android) 使用 ksoap2 库出现这两个错误？

> ID：14788845
> 
> 赞同：2
> 
> 时间：2013-02-09T13:50:25.760
> 
> 标签：android, ksoap2

以下是在模拟器上运行我的应用程序时在 logcat 中记录的 2 个错误：

```
02-09 13:44:10.470: W/dalvikvm(1334): VFY: unable to resolve virtual method 4033: Lorg/ksoap2/serialization/SoapObject;.getProperty (Ljava/lang/String;)Ljava/lang/Object;

02-09 13:44:10.492: E/dalvikvm(1334): Could not find class 'org.ksoap2.serialization.SoapObject', referenced from method com.example.androidapp.NextPage.soap 
```

什么可能导致这些错误，我该如何解决？谢谢！

编辑：我解决了。我必须在 project>properties>java build path>Order and Export 下勾选“ksoap2.jar”。它现在没有给出错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T14:00:57.597

我也遇到了类似的ksoap问题，我认为你的应用程序中没有添加ksoap依赖jar文件，确保它是143kb大小并删除旧的并重新添加。清理您的项目并运行。这很可能会消除您的第二个错误。首先，我认为您没有传递正确的参数检查一次

`requestObject.addProperty("UserIdentifier", "")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:56:39.237

更改库以解决您的问题。

# java - 卡无法解析为变量

> ID：14788849
> 
> 赞同：2
> 
> 时间：2013-02-09T13:51:20.330
> 
> 标签：java

我正在做一个个人项目。这将是一个纸牌游戏，例如，您可以将其与口袋妖怪进行比较。不幸的是，我遇到了一个错误，我不知道是什么原因造成的。我会很感激任何帮助！

好的，所以我有了带有构造函数的卡片类（我省略了不必要的属性）

```
public class Card 
{
    String name;
    String cardID;
    int strFire;
    int strEarth;

    public Card(String n, String id, int fire, int earth)
    {
        name = n;
        cardID = id;
        strFire = fire;
        strEarth = earth;
    }
} 
```

然后我有了 Deck 类，它应该创建所有卡片的实例。

```
public class Deck 
{
    static void createDeck()
    {
        Card hoax06 = new Card("Nirwadas the Traveler", "hoax06", 3, 2);
        System.out.println(hoax06.name); // this works
    }
} 
```

最后，我得到了包含 main 的 Game 类。

```
public class Game 
{
    public static void main(String[] args) 
    {
        Deck.createDeck();
        System.out.println(hoax06.name); // hoax06 cannot be resolved to a variable
    }
} 
```

我知道答案可能很简单，但 java 的访问系统仍然让我感到困惑。我还浏览了论坛以查找类似的错误，但无法将它们应用于我的案例。我应该如何从 main 中引用一张卡片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:56:17.523

卡片实例是在 Deck 类中创建的，因此 Game 类对它没有直接的了解。此外，一旦 createDeck() 方法结束，您就会失去对卡片的引用，并且实例消失了。

这是一个简单的例子：

```
public class Deck 
{
    public Card hoax06;

    static Deck createDeck()
    {
        Deck deck = new Deck();
        deck.hoax06 = new Card("Nirwadas the Traveler", "hoax06", 3, 2);
        return deck;
    }
}

public class Game 
{
    public static void main(String[] args) 
    {
        Deck deck = Deck.createDeck();
        System.out.println(deck.hoax06.name); // this is where the error occurs
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:55:16.403

你从来没有做过`hoax06`。这就是发生错误的原因。

```
Deck.createDeck();
System.out.println(hoax06.name); 
```

以下是一些选项：

1.  使`createDeck()`退卡
2.  做一个静态`Card`的`Deck`，所以你可以使用`Deck.hoax06.name`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T13:58:28.553

试试这个：

```
public class Deck 
{
    static Card createDeck()
    {
        Card hoax06 = new Card("Nirwadas the Traveler", "hoax06", 3, 2);
        System.out.println(hoax06.name); // this works
        return hoax06;    //return the object
    }
    }
public class Game 
{
    public static void main(String[] args) 
    {
        Card c=Deck.createDeck();  //get the object
        System.out.println(c.name); // use it here
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T14:07:43.840

您可以创建一个枚举（可能称为 Cards），列出所有卡片，然后使用 Cards.HOAX06.name 从您的 Game 类（或其他任何地方）中访问它们

例如这样的：

```
 enum Cards {
        HOAX06("Nirwadas the Traveler", 3, 2),
        HOAX07("Something else", 5, 2) 
        //list all your cards here in the same way
        ;

        String name;
        int strFire;
        int strEarth;

        Cards(String name, int fire, int earth){
           this.name = name;
           this.strFire = fire;
           this.strEarth = earth;
        }
    } 
```

然后从另一个类调用它：

```
public static void main(String[] args) {     
     System.out.println(Cards.HOAX06.name);
     System.out.println(Cards.HOAX07.strEarth);
     System.out.println(Cards.HOAX06.strFire);
     } 
```

默认情况下，所有枚举都是静态的和最终的，一旦创建它们就无法更改值，但是我猜测对于一副牌，您可能不想这样做。

# php - Mthaml 作曲家包与 Laravel 4 - Howto？

> ID：14788857
> 
> 赞同：6
> 
> 时间：2013-02-09T13:52:32.873
> 
> 标签：php, haml, laravel, laravel-4

**原文：**有没有人想出来，或者有没有人有兴趣帮我弄清楚如何在 Laravel 4 中使用 haml？

**更新：**正在测试使用 HAML( [MtHaml ) 的 Laravel 4 新实现。](https://packagist.org/packages/mthaml/mthaml)您可以在[我的 Github 存储库](https://github.com/villimagg/Laravel-MtHaml)中获取它并进行测试。

**注意：请** 注意，在这个阶段只有 HAML/PHP 引擎在工作，因此模板继承还没有工作。为了使模板继承起作用，MtHaml 需要通过 HAML/Twig 引擎运行，这将为我们提供所有 Twigs 模板引擎的功能，并为我们的循环等提供非常好的类似 OOP 的语法。

如果有人愿意帮助完成包以包含 Twig 以获得功能齐全的模板引擎，请随时 Fork 和 Pull！:D

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:07:03.633

它是否需要比使用 Composer 包更复杂？

[https://github.com/arnaud-lb/MtHaml](https://github.com/arnaud-lb/MtHaml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T19:09:25.123

我刚刚创建了这个，因为我想在一个项目中进入 HAML。让我知道它是否适合您的需求：[https ://github.com/BKWLD/laravel-haml](https://github.com/BKWLD/laravel-haml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T15:00:57.237

我设法让 Laravel 4 与 dzony 的 Jade 实现（[https://github.com/dz0ny/jade.php](https://github.com/dz0ny/jade.php)）一起工作，如果您有兴趣，请告诉我。

它确实可以使用 Blade Engine 进行模板继承。

# javascript - 拖放不起作用：未定义的“dropEffect”

> ID：14788862
> 
> 赞同：8
> 
> 时间：2013-02-09T13:52:53.967
> 
> 标签：javascript, html, coffeescript

**未捕获类型错误：无法设置未定义 main.js 的属性“dropEffect”未捕获类型错误
：无法读取未定义的属性“文件”**

这里有什么问题

。咖啡

```
$ ->
  app = new Viewr

class Viewr

  constructor: () ->
    $('#drop_zone')
    .bind('dragover', @handleDragOver)
    .bind('drop', @handleDrop)

  handleDrop: (evt) ->
    evt.stopPropagation()
    evt.preventDefault()
    files = evt.dataTransfer.files

    @setActiveImage files[0]

  handleDragOver: (evt) ->
    evt.stopPropagation()
    evt.preventDefault()
    evt.dataTransfer.dropEffect = "copy"

  setActiveImage: (image)->
    $("img").attr "src", src 
```

.HTML

```
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="css/main.css">
</head>
<body>
    <div id="drop_zone" style="width: 100px; height: 100px; border: 2px dashed #bbb;
                                 -moz-border-radius: 5px;
                                 -webkit-border-radius: 5px;
                                 border-radius: 5px;
                                 padding: 25px;
                                 text-align: center;
                                 color: #bbb;">Drop files here</div>
</body>
<script type="text/javascript" src="js/lib/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/main.js"></script>
</html> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-09T22:12:49.913

我认为问题可能是您使用的是 jQuery`'dragover'`和`'drop'`事件，而不是原生的 drop 事件。正如您[在此处](http://api.jquery.com/category/events/event-object/)看到的，它提到必须将 DataTransfer 对象添加到 jQuery 事件对象：

> **其他属性**
> 
> 某些事件可能具有特定于它们的属性。这些可以作为 event.originalEvent 对象的属性访问。要使所有事件对象中的特殊属性可用，可以将它们添加到 jQuery.event.props 数组中。不推荐这样做，因为它会增加 jQuery 传递的每个事件的开销。
> 
> **例子：**
> 
> ```
> // add the dataTransfer property for use with the native `drop` event
> // to capture information about files dropped into the browser window
> jQuery.event.props.push("dataTransfer"); 
> ```

您最好的选择可能是访问该`originalEvent`对象，所以看看这是否有效：

```
handleDrop: (evt) ->
    evt.stopPropagation()
    evt.preventDefault()
    files = evt.originalEvent.dataTransfer.files

handleDragOver: (evt) ->
    evt.stopPropagation()
    evt.preventDefault()
    evt.originalEvent.dataTransfer.dropEffect = "copy" 
```

# java - 带有弹簧安全性的程序性记住我

> ID：14788867
> 
> 赞同：2
> 
> 时间：2013-02-09T13:53:22.467
> 
> 标签：java, spring, spring-security, remember-me

我的记住我的 bean 定义看起来像这样，并且工作正常

```
<security:remember-me  data-source-ref="dataSource" user-service-ref="userService"/> 
```

但是，当用户第一次注册时，我想以编程方式登录并执行记住我。我不知道如何访问“记住我”服务。我可以做这个

```
UsernamePasswordAuthenticationToken auth = 
    new UsernamePasswordAuthenticationToken(user, "", authorities);
SecurityContextHolder.getContext().setAuthentication(auth);

HttpServletRequestWrapper wrapper = new HttpServletRequestWrapper(request) {
    @Override public String getParameter(String name) { return "true"; }            
}; 
```

但是如何访问下面的记住我的服务，因为我使用的是默认的 spring 实现而不是我自己的 bean？

```
getRememberMeServices().loginSuccess(wrapper, response, auth); 
```

从[这里](https://stackoverflow.com/a/7811334/106261)

**编辑** 我已将我的 bean 定义更改为如下所示

```
<security:remember-me services-alias="rememberMeService" data-source-ref="dataSource" user-service-ref="userService"/> 
```

但是当我尝试像这样注入时，intellij 仍然会出现错误：

```
@Resource(name = "rememberMeService")
private RememberMeServices rememberMeService; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:15:01.463

您可以使用[命名空间元素](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-remember-me)`services-alias`的属性为. 然后，您可以将该引用注入您自己创建的其他 bean。[`remember-me`](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-remember-me)`RememberMeServices`

# objective-c - 在 NSView 子类中添加 SubView (WebView)

> ID：14788869
> 
> 赞同：2
> 
> 时间：2013-02-09T13:53:30.410
> 
> 标签：objective-c, cocoa, nsview

好的，这个场景非常简单，但是 - 因为`NSView`s 从来都不是我的强项 - 我决定寻求一些帮助。

所以...

*   我们有一个`NSView`子类
*   创建`NSView`后，我们要添加一个子视图 ( `WebView`)，它将占据初始视图的所有空间 + 自动调整宽度/高度。

**这是我的代码** *（如上所述，它仍然不起作用）*：

```
- (id) initWithFrame:(NSRect)frame {

    NSLog(@"In INIT");
    self = [super initWithFrame:frame];
    if (self == nil) return nil;

    [self setWebView:[[WebView alloc] initWithFrame:frame]];
    [[self webView] setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"index" 
                                                     ofType:@"html"];

    NSString *htmlContent = [NSString stringWithContentsOfFile:path     
                                                      encoding:NSUTF8StringEncoding 
                                                         error:nil];

    [[[self webView] mainFrame] loadHTMLString:htmlContent 
                                       baseURL:[NSURL URLWithString:path]];

    [self addSubview:[self webView]];

    return self;
} 
```

有任何想法吗？

# javascript - 如何在这个 javascript 中添加另一个字段？

> ID：14788873
> 
> 赞同：-2
> 
> 时间：2013-02-09T13:53:47.737
> 
> 标签：javascript, html

我有这个脚本，我正在尝试创建第三个值 (m3)，但我不知道如何处理该`obj.nodeValue=(obj.nodeValue==m1)?m2:m1;`行。另外，我将如何将 html 放入 m1、m2 和 m3 中？特别是粗体标签。谢谢

```
<script type="text/javascript">
function adMessage() {

   delay=10000;

   m1='Place your Thanksgiving orders today!';
   m2='All orders must be received by November 20th!';
   m3='testing';
   obj=document.getElementById('orders').firstChild;

   obj.nodeValue=(obj.nodeValue==m1)?m2:m1;

   setTimeout(function(){adMessage()},delay);
 }
if(window.addEventListener){
   window.addEventListener('load',adMessage,false);
 }
else { 
if(window.attachEvent){
   window.attachEvent('onload',adMessage);
  }
 }
</script>

<p id="orders">Place your Thanksgiving orders today!</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:59:21.447

由于您不再有二进制大小写，因此您无法比较当前值并根据要显示的消息来决定（好吧，好吧，您可以，但它会变得丑陋）。

一个干净的方法是创建一个消息列表，跟踪当前消息的索引并推进索引（带有环绕）。

例子：

```
var index = 0;
var messages = [
    'Place your Thanksgiving orders today!',
    'All orders must be received by November 20th!',
    'testing'
];
var delay = 10000;

function adMessage() {
   var node = document.getElementById('orders').firstChild;

   node.nodeValue = messages[index];
    // advance index and wrap around if necessary
   index = (index + 1) % messages.length;

   setTimeout(adMessage, delay);
} 
```

通过正确放置代码，您不需要监听`load`事件，并且可以避免一遍又一遍地搜索函数内部的 DOM 节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:58:15.183

线

```
obj.nodeValue=(obj.nodeValue==m1)?m2:m1; 
```

是这个的简短版本

```
if (obj.nodeValue == m1) 
{
    obj.nodeValue = m2;
} 
else 
{
  obj.nodeValue = m1;
} 
```

根据您的逻辑来显示您需要扩展此决定的 m3 值。

如果您想在每个间隔切换到下一条消息，那么也许这就是您的解决方案：

```
if (obj.nodeValue == m1) 
{
    obj.nodeValue = m2;
} 
else if (obj.nodeValue == m2) 
{
  obj.nodeValue = m3;
}
else 
{
   obj.nodeValue = m1;
} 
```

而菲利克斯的想法当然更好。如果你把你的消息放在一个数组中，你可以很容易地扩展它。

对于您关于嵌入 HTML 标记的部分问题：您需要设置元素的 innerHTML 值而不是 nodeValue。

我提出了一个正在运行的 jsfiddle，包含您问题的各个方面：http: [//jsfiddle.net/eNape/1/](http://jsfiddle.net/eNape/1/)

# css - 伪元素的样式部分

> ID：14788879
> 
> 赞同：1
> 
> 时间：2013-02-09T13:54:14.203
> 
> 标签：css, pseudo-element

有什么方法可以将 CSS 样式定位在 :before 和 :after 伪元素的部分内容上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:56:34.143

如果您的`:before`伪元素内容与生成元素的内容一起内联显示，您仍然可以定位`:first-line`或`:first-letter`单独显示，它应该分别覆盖`:before`生成内容的第一行或字母：

```
div {
    width: 100px;
}

div:before {
    content: 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit.';
}

div:first-line { font-weight: bold; }
div:first-letter { color: red; } 
```

除此之外，您不能使用 CSS 可靠地定位部分`:before`或`:after`伪元素，因为伪元素不能在 CSS2.1 中生成其他伪元素，只有真实元素可以。如果您需要设置附加内容的第一个字母的样式，请先使用 JavaScript 附加该内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:58:21.993

*当您说只是伪元素的一部分*时，我不明白。要定位样式`:after`并将`:before`它们视为块元素，您需要具备的基本条件是：

```
.element:after, .element:before {
    content: " ";
    display: block;
    width: 100px;
    height: 100px;
} 
```

# winforms - 以编程方式设置 C# Winforms 时 DataGridViewComboBoxCell 值未更新

> ID：14788880
> 
> 赞同：0
> 
> 时间：2013-02-09T13:54:17.600
> 
> 标签：winforms, datagridviewcomboboxcell

我已经阅读了所有关于这个该死的控件（DataGridViewComboBoxCell）的类似帖子，并以编程方式设置它的值，但实施所有建议都没有奏效。我可能可以更改 UI 来解决这个问题，但我不喜欢被打败！

```
 private void PopulateAreaForRoleAssociation()
    {

        // If businessRoleList is null then no data has been bound to the dgv so return
        if (businessRoleList == null)
            return;

        // Ensure businessArea repository is instantiated
        if (businessAreaRepository == null)
            businessAreaRepository = new BusinessAreaRespository();

        // Get a reference to the combobox column of the dgv
        DataGridViewComboBoxColumn comboBoxBusinessAreaColumn = (DataGridViewComboBoxColumn)dgvBusinessRole.Columns["BusinessArea"];

        // Set Datasource properties to fill combobox
        comboBoxBusinessAreaColumn.DisplayMember = "Name";
        comboBoxBusinessAreaColumn.ValueMember = "Id";
        comboBoxBusinessAreaColumn.ValueType = typeof(Guid);

        // Fill combobox with businessarea objects from list out of repository
        comboBoxBusinessAreaColumn.DataSource = businessAreaRepository.GetAll();

        // loop through the businessRoles list which the dgv is bound to and get out each dgv row based upon the current id in the loop
        businessRoleList.Cast<BusinessRole>().ToList().ForEach(delegate(BusinessRole currentRole)
        {

            DataGridViewRow currentRowForRole = dgvBusinessRole.Rows.Cast<DataGridViewRow>().ToList().Find(row => ((BusinessRole)row.DataBoundItem).Id == currentRole.Id);

            // Get a reference to the comboBox cell in the current row
            DataGridViewComboBoxCell comboBoxCell = (DataGridViewComboBoxCell)currentRowForRole.Cells[2];

            // Not sure if this is necessary since these properties should be inherited from the combobox column properties
            comboBoxCell.DisplayMember = "Name";
            comboBoxCell.ValueMember = "Id";
            comboBoxCell.ValueType = typeof(Guid);

            // Get the business area for the current business role
            BusinessArea currentAreaForRole = businessAreaRepository.FetchByRoleId(currentRole.Id);

            // if the role has an associated area then set the value of the cell to be the appropriate item in the combobox
            // and update the cell value
            if (currentAreaForRole != null)
            {

                foreach (BusinessArea area in comboBoxCell.Items)
                {
                    if (currentAreaForRole.Id == area.Id)
                    {
                        comboBoxCell.Value = area.Id;
                        dgvBusinessRole.UpdateCellValue(2, comboBoxCell.RowIndex);
                    }

                }

            }

        });
    } 
```

dgv 首先绑定到包含 BusinessRole 对象的绑定列表，然后组合框列绑定到来自存储库类的 BusinessArea 对象的基本列表。然后我遍历 bindinglist 并拉出绑定到 bindinglist 循环中当前项目的 dgv 行。通过该行，我进行数据库调用以查看 BusinessRole 实体是否与 BusinessArea 实体相关联。如果是，那么我想选择包含 BusinessAreas 的组合框列中的项目。

问题是，当加载网格时，所有数据都在那里，组合框填充了可用区域的列表，但是不显示任何设置的值。设置值的代码肯定会受到影响，并且我设置的值肯定存在于列表中。

没有数据错误，什么都没有。它只是拒绝使用我以编程方式设置的值更新 UI。

任何帮助将一如既往地不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:22:07.093

此代码适用于我在行中使用以下代码的第一个组合框，但我尝试使用行中的下一个组合框，但它不起作用。我可以在剩下的 3 件事情上使用帮助。我确实在此表单的第二个表单上设置了组合框，其代码与 try 块的最后一行相同，但使用单元格信息而不是数据集

```
 try
      {

          string strQuery = "select fundCode from vwDefaultItems where IncomeType = '" + stIncome + "'";

          SqlDataAdapter daDefault = new SqlDataAdapter(strQuery, conn);

          DataSet dsDefault = new DataSet();
          daDefault.Fill(dsDefault);
          strDefFund = dsDefault.Tables[0].Rows[0].ItemArray[0].ToString();
          dgvCheckEntry.Rows[curRow].Cells[7].Value = dsDefault.Tables[0].Rows[0].ItemArray[0].ToString();

      }
      catch (Exception eq)
      {

      } 
```

# c# - 如何在 Windows 应用程序中设置歌曲的专辑封面（例如，没有 tag-lib#）？

> ID：14788881
> 
> 赞同：4
> 
> 时间：2013-02-09T13:54:35.603
> 
> 标签：c#, windows-store-apps, taglib

我以为我的 Windows 应用程序已经完成并可以发布了。但是，在认证过程中，ACK 告诉我 Tag-Lib# 使用了 Windows 应用商店不支持的 API。现在我需要找到 Windows 应用商店支持的其他方式，以便能够以编程方式设置歌曲的专辑封面。有任何想法吗？（如果有人知道修改 Tag-Lib# 以符合 Windows 应用商店限制的方法，我也会很高兴。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:37:44.587

使用[Windows 应用认证工具包](http://msdn.microsoft.com/en-US/windows/apps/jj572486)查看调用了哪些 API。然后尝试修改 Tag-Lib# 源以不使用这些 API，或者选择相关代码并构建您自己的库。

虽然我认为，鉴于它用于读取和写入文件，它依赖于`System.IO`需要对`Windows.Storage`.

# c++ - dev c++ 过时的库和包含

> ID：14788887
> 
> 赞同：1
> 
> 时间：2013-02-09T13:55:24.480
> 
> 标签：c++, static-libraries, dev-c++

最新 MinGW 版本的 dev c++ 中的包含和库已过时。例如，没有类似`QueryFullProcessImageName`or的功能`GetProcessImageFileName`。是否可以简单地更新它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:17:15.673

您是否尝试将编译器指向所需的库？在 Dev-C++ 5.3 中包含的 TDM-GCC 4.6.1 上，编译得很好：

```
#include <windows.h>
#include <Psapi.h>

int main() {
    LPSTR dummy;
    GetProcessImageFileName(NULL,dummy,0);
    return 0;
} 
```

让它链接所需的只是图书馆。与所有非标准库一样，您需要自己将编译器指向正确的库。这一次，查找捆绑编译器始终提供的这个文件：

```
Dev-Cpp/MinGW64/x86_64-w64-mingw32/lib/libpsapi.a (for MinGW64)
or
Dev-Cpp/MinGW64/x86_64-w64-mingw32/lib32/libpsapi.a (for MinGW64, 32bit mode)
or
Dev-Cpp/MinGW32/lib/libpsapi.a (for vanilla MinGW) 
```

可以通过项目>>项目选项>>参数>>通过GUI添加库或对象为项目完成此指向。将文件对话框指向上述文件。点击确定。或者，使用工具>>编译器选项>>自定义编译器命令（顶部编辑字段）将 .a 文件的路径直接发送到 gcc。

然后重新编译。完毕。请不要为此盲目地责怪编译器/IDE。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T14:18:47.990

有单独开发的新版Dev-C++，如果真要坚持这个伪IDE，还是下载吧；它应该有更新的工具集。

*请*考虑切换到其他任何东西。

# php - 我们计算的请求签名与 AMAZON AWS PHP 不匹配

> ID：14788888
> 
> 赞同：1
> 
> 时间：2013-02-09T13:55:36.883
> 
> 标签：php, api, amazon-web-services, amazon

我已经查看了大多数基于堆栈溢出问题的代码示例，但我仍然无法让请求工作。我不断收到此错误：

```
<Error><Code>SignatureDoesNotMatch</Code><Message>The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. Consult the service documentation for details. 
```

这是我的代码：

```
$access_key = "ACCESS_KEY";
$associateTag = "AOSSOCIATE_TAG";
$secretkey = "SECRET_KEY";
$keywords = "harry%20potter";
$timestamp = gmdate("Y-m-d\TH:i:s\Z");
$operation = "AWSECommerceService";

function createSignature($operation,$timestamp,$secretkey){
    $the_string=$operation.$timestamp;  
    return base64_encode(hash_hmac("sha256",$the_string,$secretkey,true));
}

$signature = createSignature ($operation,$timestamp,$secretkey);

$APIcall = 
"http://ecs.amazonaws.com/onca/xml?".
"AWSAccessKeyId=$access_key&".
"AssociateTag=$associateTag&".
"BrowseNode=1000&".
"ItemPage=1&".
"Keywords=$keywords&".
"Operation=ItemSearch&".
"ResponseGroup=Medium&".
"SearchIndex=Books&".
"Service=AWSECommerceService&".
"Timestamp=$timestamp&".
"Version=2011-08-01&".
"Signature=$signature";

$response = simplexml_load_file($APIcall); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:02:05.147

我有这个问题很长时间了，它对我有用这个代码：

```
require_once 'Crypt/HMAC.php';
require_once 'HTTP/Request.php';

$keyId = "adasdasd";
$secretKey = "asdasdasdasdasd+";

function hex2b64($str) {
    $raw = '';
    for ($i=0; $i < strlen($str); $i+=2) {
    $raw .= chr(hexdec(substr($str, $i, 2)));
    }
    return base64_encode($raw);
}

function constructSig($str) {
    global $secretKey;
    $str = utf8_encode($str);   
    $secretKey = utf8_encode($secretKey);   
    $hasher =& new Crypt_HMAC($secretKey, "sha1");
    $signature = hex2b64($hasher->hash($str));      
    return ($signature);
} 

 $expire = time()+1000;
 $resource = "/demo/files/clouds.jpg";
 $date = gmdate("D, d M Y G:i:s T");
 $mime = "image/jpeg";

 $stringToSign = "PUT\n";
 $stringToSign .= "\n";
 $stringToSign .= "$mime\n"; 
 $stringToSign .= "$date\n";
 $stringToSign .= $resource;
 $req =& new HTTP_Request("http://nameofmine.s3.amazonaws.com/files/clouds.jpg");
 $req->setMethod("PUT"); 
 $req->addHeader("Date",$date);
 $req->addHeader("Authorization", "AWS " . $keyId . ":" . constructSig($stringToSign));
 $req->addHeader("Content-Type",$mime);  
 $req->setBody(file_get_contents($file_path));
 $req->sendRequest();
 $responseCode = $req->getResponseCode();
 $responseString = $req->getResponseBody();
 echo $responseCode; 
```

如您所见，您必须使用 Crypto、HTTP pear 插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:13:14.840

该功能似乎没问题（它与亚马逊 AWS SDK 中使用的功能相同），因此请确保复制的密钥前后没有空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T20:56:10.497

当我手动输入凭据时，我遇到了几次相同的错误。

然后我尝试了 Windows 控制台，这样我就可以复制/粘贴我的凭据。这删除了错误消息。我要么打字很烂，要么阅读很烂。

长话短说：不要手动输入、复制和过去的凭据以避免拼写错误。

编辑：我的问题是尝试通过 EB CLIx3 添加我的凭据时。

# c# - 以编程方式更改表格壁纸的不同方式

> ID：14788895
> 
> 赞同：0
> 
> 时间：2013-02-09T13:56:34.470
> 
> 标签：c#, winforms, wallpaper

我需要通过用户选择的 jpg 文件以编程方式分配表单的壁纸。我已经用新的位图做到了这一点，但如果我这样做，jpeg 文件将变为只读。

是否可以加载 RAM jpeg 文件并将其用于墙纸？或者将jpeg文件添加到项目资源并使用资源？

对不起我的英语非常糟糕:(

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:10:45.230

使用`MemoryStream`：

```
MemoryStream ms = new MemoryStream(File.ReadAllBytes(pathToImageFile));
this.BackgroundImage = Image.FromStream(ms); ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:03:58.313

避免 GDI+ 对文件施加文件锁定的最简单方法是使用 Bitmap(Image) 构造函数制作位图的深层副本。像这样：

```
 private void SetWallpaperButton_Click(object sender, EventArgs e) {
        if (openFileDialog1.ShowDialog() == DialogResult.OK) {
            using (var img = Image.FromFile(openFileDialog1.FileName)) {
                if (this.BackgroundImage != null) this.BackgroundImage.Dispose();
                this.BackgroundImage = new Bitmap(img);
            }
        }
    } 
```

*using*语句确保文件锁被释放。并且 Dispose() 调用确保旧位图被快速销毁，这很重要，因为您经常在 32 位操作系统上使用大型位图绕过 OOM。

# node.js - 使用 nodejs、expressjs 和 socket.io 保存图像

> ID：14788898
> 
> 赞同：2
> 
> 时间：2013-02-09T13:56:41.333
> 
> 标签：node.js, express, socket.io

我尝试使用 express.js 和 socket.io 将图像保存到 node.js 的指定目录，但它不起作用。

在客户端：

```
var reader = new FileReader();
function drop(e) {
    e.stopPropagation();
    e.preventDefault();

    var dt      = e.dataTransfer;
    var files   = dt.files;
    jQuery.each(files, function(){

        reader.onload = function(e) {
            socket.emit('sendfile', e.target.result);
        };
    });
    return false;
} 
```

图片应通过拖放功能上传。

然后在服务器端：

```
io.sockets.on('connection', function (socket) {
[...]
    socket.on('sendfile', function (data) {
        var fs = require('fs');
        app.use(express.bodyParser({ keepExtensions: true, uploadDir: '/uploaded' }));

        io.sockets.emit('updatechat', socket.username, data); //test
    }); 
```

我也试过

```
socket.on('sendfile', function (data) {
        var fs = require('fs');
        fs.writeFile('/uploaded/test.png', data, "binary" , function (err) {
          if (err) throw err;
          console.log('It\'s saved!');
        });
        io.sockets.emit('updatechat', socket.username, data); //data test
    }); 
```

但它没有保存任何东西。“数据测试”告诉我，数据已经到达服务器，所以我不认为问题来自客户端，但在服务器端我不知道我做错了什么

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T22:15:10.547

我做了一个简单的例子来说明通过socket上传文件的用法！

以下步骤是：

1.  创建**send-file** socket.io 事件以接收 app.js 上的文件。收到的这个文件是一个二进制文件；
2.  在jade/HTML 页面中放置一个输入文件和一个发送它的按钮。注意：您不必使用 multipart 来发送包含多部分内容的帖子，我们发送的是套接字文件而不是 TCP 请求/响应；
3.  初始化 HTML5 File API 支持并让监听器准备好监视您的文件输入组件；
4.  其余的例程读取文件并将其内容转发。

现在第一步（app.js）：

```
var io = require('socket.io').listen(8000, {log: false});

io.sockets.on('connection', function(socket) {
    socket.on('send-file', function(name, buffer) {
        var fs = require('fs');

        //path to store uploaded files (NOTE: presumed you have created the folders)
        var fileName = __dirname + '/tmp/uploads/' + name;

        fs.open(fileName, 'a', 0755, function(err, fd) {
            if (err) throw err;

            fs.write(fd, buffer, null, 'Binary', function(err, written, buff) {
                fs.close(fd, function() {
                    console.log('File saved successful!');
                });
            })
        });

    });
}); 
```

第二步（在我的情况下，我使用了翡翠而不是 html）

```
extends layout

block content
    h1 Tiny Uploader
    p Save an Image to the Server
    input#input-files(type='file', name='files[]', data-url='/upload', multiple)
    button#send-file(onclick='javascript:sendFile();') Send

    script(src='http://127.0.0.1:8000/socket.io/socket.io.js')
    script(src='/javascripts/uploader.js') 
```

第三步和第四步（编码uploader.js将文件发送到服务器）

```
//variable declaration
var filesUpload = null;
var file = null;
var socket = io.connect('http://localhost:8000');
var send = false;

if (window.File && window.FileReader && window.FileList) {
    //HTML5 File API ready
    init();
} else {
    //browser has no support for HTML5 File API
    //send a error message or something like that
    //TODO
}

/**
 * Initialize the listeners and send the file if have.
 */
function init() {
    filesUpload = document.getElementById('input-files');
    filesUpload.addEventListener('change', fileHandler, false);
}

/**
 * Handle the file change event to send it content.
 * @param e
 */
function fileHandler(e) {
    var files = e.target.files || e.dataTransfer.files;

    if (files) {
        //send only the first one
        file = files[0];
    }
}

function sendFile() {
    if (file) {
        //read the file content and prepare to send it
        var reader = new FileReader();

        reader.onload = function(e) {
            console.log('Sending file...');
            //get all content
            var buffer = e.target.result;
            //send the content via socket
            socket.emit('send-file', file.name, buffer);
        };
        reader.readAsBinaryString(file);
    }
} 
```

**一些重要的考虑：**

这是一个套接字文件上传器的小样本。我在这里不考虑一些重要的事情：文件块发送文件而不是连续发送所有内容；更新发送的文件状态（错误消息、成功消息、进度条或百分比阶段等）。因此，这是对您自己的文件上传器进行编码的初始步骤的示例。在这种情况下，我们不需要表单来发送文件，它完全是通过 socket.io 进行的异步事务。

我希望这篇文章有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T16:03:01.973

本[教程](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-resumable-video-uploade-in-node-js/)更进一步，因为您可以暂停/恢复上传，但您会发现如何通过 socketio 上传文件 :)

# css - 网格外的Zurb Foundation背景颜色

> ID：14788899
> 
> 赞同：1
> 
> 时间：2013-02-09T13:56:43.157
> 
> 标签：css, zurb-foundation, grid-layout

我确定这很简单，但我不知道如何创建这样的布局：

![小样](../Images/e4aaa0db687e606d0967ecfd9d87b6d4.png)

我的网格大小等于白色区域的宽度。我对占据整个页面宽度的深蓝色顶部栏没有任何问题，但我不知道如何创建浅蓝色边，因为它们在基础网格之外。如果我将身体背景更改为浅蓝色，则中间的基础网格也会变为蓝色。

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T20:30:27.050

`foundation_and_overrides.scss`文件有一个名为的变量`$body-bg`，它接受您想要的任何颜色。

如果您使用这种方法 - 不要忘记删除任何 body 样式`scaffolds.css.scss`（否则它可能会覆盖您在基础设置中指定的任何内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:19:06.973

```
body { background-color: blue; }

.row { background-color: white; } 
```

`body`背景色会占据整个页面， 的背景色会`row`叠加到 的背景色上`body`。

# dataset - 使用来自 sql server 数据库的数据集对读取的数据执行数学运算

> ID：14788907
> 
> 赞同：1
> 
> 时间：2013-02-09T13:57:46.743
> 
> 标签：dataset

我在 sql server 上有一个数据库。我必须提出问题的表格如下：它有 4 列：（表格名称：投票）

**id** bigint notnull 主键
**optAvotes** bigint notnull
**optBvotes** bigint notnull
**optCvotes** bigint notnull
我想对这些列值执行数学运算，例如加法、百分比计算等。我这样做是这样的：

```
dim da as new sqldataadapter("select * from votes",con)
dim ds as new dataset
da.fill(ds)
dim A,B,C,Total as integer
A=ds.tables(0).rows(0).item("optAvotes").tostring
B=ds.tables(0).rows(0).item("optBvotes").tostring
C=ds.tables(0).rows(0).item("optCvotes").tostring
Total=A+B+C 
```

当我显示 Total 的值时，它会显示**从字符串转换的错误“** 而如果我将这些变量声明为字符串，则 Total=A+B+C 将结果显示为连接字符串。所以请尽快告诉我解决方案.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:35:21.957

Total 是一个整数，不接受字符串。在添加它们并将整数结果分配给 Total 之前，您需要将 A、B、C 从字符串转换为整数。

尝试 ：

```
Total = Convert.ToInt32(A) + Convert.ToInt32(B) + Convert.ToInt32(C) 
```

或者

```
Total = CInt(A) + CInt(B) + CInt(C) 
```

# c++ - C++ 类构造函数中的函数指针

> ID：14788908
> 
> 赞同：0
> 
> 时间：2013-02-09T13:57:49.063
> 
> 标签：c++, function-pointers

我有一个带有构造函数的模板类，它接受一个参数；指向接受第二个模板类型参数的函数的函数指针。并返回第一个模板类型的元素。

这是代码：

缓存控制器.hpp：

```
template<class TYPE, class KEY>
class cache
{
    private:
        TYPE (*create_func)(KEY);
    public:
        cache(TYPE (*func)(KEY));
};

extern sf::Texture * create_texture(std::string path); 
```

缓存控制器.cpp：

```
template<class TYPE, class KEY>
cache<TYPE, KEY>::cache(TYPE (*func)(KEY))
{
    this->create_func = func;
}

sf::Texture * create_texture(std::string path)
{
    sf::Texture * tex_p = new sf::Texture;
    tex_p->loadFromFile(path);
    return tex_p;
} 
```

测试代码：

```
cache<sf::Texture *, std::string> tcache(&create_texture); 
```

但是，当我链接我得到这个错误：

```
[Linker error] main.cpp:11: undefined reference to `cache<sf::Texture*, std::string>::cache(sf::Texture* (*)(std::string))' 
```

当然，如果有任何更简单的方法来实现具有任意键、值和创建函数的对象缓存，我全都听好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:00:36.270

`.cpp`您在文件中为模板类的成员函数提供定义。

这些成员函数的定义必须在实例化点对编译器可见（即，从`.cpp`调用这些函数的文件中），否则只会看到它们的*声明*，并且编译器将仅依赖于在其他地方定义的该函数，在处理不同的翻译单元时。

由于`.cpp`在编译器可见其定义的翻译单元（即文件）中没有该函数的实例化，因此不会生成任何函数，并且链接器最终会抱怨没有提供定义。

您应该将`cache`' 构造函数的定义放在定义类模板的头文件中`cache`（在您的情况下是`cache_controller.hpp`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T14:00:22.443

模板化方法的实现必须与包含其声明的文件一致。模板实例化是编译时操作，而不是链接时。将两者合并在一起以解决链接器错误。也就是说，在类内部或外部但在同一个文件中实现构造函数。

# mysql - 在 MySQL Workbench 中看不到我的数据库（模式）

> ID：14788910
> 
> 赞同：0
> 
> 时间：2013-02-09T13:58:14.797
> 
> 标签：mysql, database-schema, mysql-workbench

我最近在我的 Windows 7 (x64) 机器上安装了 mysql5.5。第一个问题是我无法使用`mysql -u root -pmypass`. cmd 打开，在 0.5 秒内产生错误并关闭。然后我创建了另一个具有所有权限的用户帐户，它可以工作并且我创建了一个数据库。但现在我想从 MySQL Workbench 导出该数据库，但在“选择架构”选项中看不到它。我试过“新连接”和“新服务器实例”都没有奏效。有什么建议么？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:11:43.223

对于命令行也使用 WB。在连接列表中，您可以右键单击上下文菜单，该菜单还可以打开 CLI 窗口。通常，当您使用 CLI 时，首先打开一个普通的 CLI 窗口（开始菜单 -> 程序 -> 附件），然后尝试 mysql -u -p 命令。这样 CLI 窗口不会立即关闭，您可以看到出现的错误消息。

对于 WB：如果您没有看到您知道的架构，那么您用来连接的用户可能没有查看它的权限。因此，对于测试，请尝试以 root 身份连接并查看您的架构是否存在。db 对象（包括整个模式）的导入和导出可在管理部分中使用，而不是在 SQL IDE 中（您可以在其中找到“编辑表数据”等）。

# python - 更改类变量时如何运行方法？

> ID：14788913
> 
> 赞同：-1
> 
> 时间：2013-02-09T13:58:52.087
> 
> 标签：python, python-2.7

如果我的班级有一个我已经映射到其他东西的变量。几乎就像该类将对象包装在软件包中一样，例如 3d 节点或其他东西。

当类中的变量发生更改时，那个简单的属性更改然后我想运行一个在 3d 节点上设置该属性的函数。与 myClass.translateX 一样，更改此属性将运行一个函数来更新 3d 节点的 translateX。

希望这是有道理的，我的 google foo 失败了，所以也许我没有使用正确的术语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:07:22.010

我想你想要一个[`property`](http://docs.python.org/2/library/functions.html#property). 它允许您将类实例的属性访问映射到函数调用，您可以使用它对 3d 对象执行必要的操作：

```
class My3dNodeWrapper(object):
    def __init__(self):
        self.node = Some3dNodeThing()

    @property
    def translateX(self):
        return self.node.getXTranslation() # or whatever

    @translateX.setter
    def translateX(self, value):
        self.node.setXTranslation(value) # or whatever 
```

# javascript - 如何对呈现嵌套对象的 Ext 网格列进行远程排序？

> ID：14788914
> 
> 赞同：5
> 
> 时间：2013-02-09T13:58:53.407
> 
> 标签：javascript, extjs, grid, extjs4

*这里是一个简单的问题，我真的很惊讶我在任何地方都*找不到答案。

我有以下产品型号：

```
Ext.define('Product', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id', type: 'int'},
        {name: 'name', type: 'string'},
        {name: 'manufacturer', type: 'auto'}, // i.e. nested object literal
    ],
}); 
```

可以看出，产品内部有一个嵌套对象，其中包含有关制造商的详细信息（id、名称、描述等）。

我在 Ext.grid.Panel 中显示产品，如下所示：

```
Ext.create('Ext.grid.Panel', {
    title: 'Products',
    ...
    remoteSort: true,
    columns: [
        {text: 'Id', dataIndex: 'id', sortable: true},
        {text: 'Name',  dataIndex: 'name', sortable: true},
        {text: 'Manufacturer', dataIndex: 'manufacturer', sortable: true, renderer: function(manufacturer) {
                return manufacturer.name; // render manufacturer name
            }
        },
    ],
}); 
```

如您所见，所有三列都配置为可排序的，我正在使用远程排序。这适用于前两列，但第三列（制造商）给我带来了麻烦。

例如，当用户按产品名称对网格进行排序时，Ext 将以下 JSON 发送到服务器：

```
{ sort: [{ property: 'name', direction: 'ASC' }] } 
```

这很好，因为服务器知道按每个产品的`name`属性简单地排序。

但是当用户按制造商对网格进行排序时，发送的 JSON 是：

```
{ sort: [{ property: 'manufacturer', direction: 'ASC' }] } 
```

由于制造商是一个对象，这不会让服务器知道它应该根据制造商的哪个属性进行排序！是制造商的id吗？还是制造商的名字？或者是其他东西？

对于我的网格，由于我渲染了制造商的名称，我想按名称对其进行排序。但我看不出有办法告诉服务器这一点。而且我当然不想让我的服务器一直按制造商的名称排序。

如果 JSON 是这样发送的，那将是理想的：

```
{ sort: [{ property: 'manufacturer.name', direction: 'ASC' }] } 
```

可悲的是，Ext 似乎没有这样做（？）。那么，解决方案是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T06:14:14.630

好的，我在煎茶论坛上问过，得到了回复。看来您可以`getSortParam()`在列配置中覆盖。例子：

```
columns: [
    ...
    {
        header: 'Manufacturer',
        dataIndex: 'manufacturer',
        sortable: true,
        renderer: function(manufacturer) {
            return manufacturer.name; // render manufacturer name
        },
        getSortParam: function() {
            return 'manufacturer.name';
        },
    }
    ...
] 
```

这将发送我在我的 OP 中描述的理想 JSON。现在我只需要让我的服务器正确解析它！:)

# c# - 例外：集合已修改；枚举操作可能无法在安装项目中的表单关闭上执行

> ID：14788919
> 
> 赞同：0
> 
> 时间：2013-02-09T13:59:46.960
> 
> 标签：c#, winforms, setup-deployment

我创建了一个用 C# 4.0 构建的窗口窗体应用程序的安装项目。我在安装了 Vs 2010 Ultimate 的测试 PC 中测试了设置，并且在其中运行良好。

后来我测试了应用程序，我将它安装在另一台没有 VS 的机器上。每次我尝试关闭表单时，都会出现此异常。例外情况以某些形式发生，并非全部发生。我检查了代码并且没有区别（this.close（））。

在构建设置时，我使用 .Net Framework 4 Client Profile 作为目标框架。Microsoft.VisualBasic.PowerPacks.Vs 在安装程序中添加。我没有使用标签条，也没有尝试关闭多个表单。

这是您的应用程序中发生了未处理的异常的完整错误。如果单击继续，应用程序将忽略此错误并尝试继续。如果单击退出，应用程序将立即关闭。

有关调用即时 (JIT) 调试而不是此对话框的详细信息，请参阅此消息的末尾。

```
************** Exception Text **************
System.InvalidOperationException: Collection was modified; enumeration operation may not execute.
   at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)
   at System.Collections.Generic.List`1.Enumerator.MoveNextRare()
   at System.Collections.Generic.List`1.Enumerator.MoveNext()
   at Microsoft.VisualBasic.PowerPacks.ShapeCollection.Dispose(Boolean disposing)
   at Microsoft.VisualBasic.PowerPacks.ShapeContainer.Dispose(Boolean disposing)
   at System.ComponentModel.Component.Dispose()
   at System.Windows.Forms.Control.Dispose(Boolean disposing)
   at System.ComponentModel.Component.Dispose()
   at System.Windows.Forms.Control.Dispose(Boolean disposing)
   at System.ComponentModel.Component.Dispose()
   at System.Windows.Forms.Control.Dispose(Boolean disposing)
   at System.Windows.Forms.Form.Dispose(Boolean disposing)
   at ezyBizManager.Masters.frmUsers.Dispose(Boolean disposing)
   at System.ComponentModel.Component.Dispose()
   at System.Windows.Forms.Form.WmClose(Message& m)
   at System.Windows.Forms.Form.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
----------------------------------------
ezyBizManager
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Program%20Files/Microsoft/COE/ezyBizManager.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Data.Linq
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Data.Linq/v4.0_4.0.0.0__b77a5c561934e089/System.Data.Linq.dll
----------------------------------------
System.Core
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll
----------------------------------------
System.Configuration
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
System.Data
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_32/System.Data/v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll
----------------------------------------
System.Transactions
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_32/System.Transactions/v4.0_4.0.0.0__b77a5c561934e089/System.Transactions.dll
----------------------------------------
System.EnterpriseServices
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_32/System.EnterpriseServices/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll
----------------------------------------
System.Xml.Linq
    Assembly Version: 4.0.0.0
    Win32 Version: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml.Linq/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.Linq.dll
----------------------------------------
Anonymously Hosted DynamicMethods Assembly
    Assembly Version: 0.0.0.0
    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_32/mscorlib/v4.0_4.0.0.0__b77a5c561934e089/mscorlib.dll
----------------------------------------
Microsoft.VisualBasic.PowerPacks.Vs
    Assembly Version: 10.0.0.0
    Win32 Version: 10.0.20911.1
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualBasic.PowerPacks.Vs/10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.PowerPacks.Vs.dll
----------------------------------------
Microsoft.VisualBasic
    Assembly Version: 10.0.0.0
    Win32 Version: 10.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/Microsoft.VisualBasic/v4.0_10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.dll
----------------------------------------************** JIT Debugging ************** 
```

要启用即时 (JIT) 调试，此应用程序或计算机的 .config 文件 (machine.config) 必须在 system.windows.forms 部分中设置 jitDebugging 值。还必须在启用调试的情况下编译应用程序。

例如：

```
<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration> 
```

启用 JIT 调试后，任何未处理的异常都将发送到计算机上注册的 JIT 调试器，而不是由该对话框处理。

[编辑：]我正在使用图像来关闭表单。

```
private void imgClose_Click(object sender, EventArgs e)
{
    this.Close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T14:18:22.840

我认为这`Dispose()`是`ShapeCollection`. 如果我使用例如 .NET Reflector、Microsoft.VisualBasic.PowerPacks.Vs、Version=9.0.0.0 来查看此方法，它会说：

```
 foreach (Shape shape in this.m_Shapes)
    {
        shape.Dispose();
    } 
```

如果我使用 Microsoft.VisualBasic.PowerPacks.Vs, Version=10.0.0.0 查看这个方法，它会说：

```
 for (int i = this.m_Shapes.Count - 1; i >= 0; i--)
    {
        this.m_Shapes[i].Dispose();
    } 
```

显然，实现在不同版本之间发生了演变。后者不依赖于 Enumerator 对象，因此不会因您显示的错误而失败。

奇怪的是你的堆栈帧似乎暗示你正在运行版本 10，它不应该使用枚举器？也许您需要 VS 2010 更新？或者，您也可以查看您正在使用的 Microsoft.VisualBasic.PowerPacks.Vs 上的 Dispose 实现。

**编辑**：经过一番挖掘，您的应用程序确实在旧版本的 VB Powerpacks 上运行。升级到 VS2010、SP1 或从良好的安装中复制 DLL。对于这个特定的 Dispose 错误，您至少需要 10.0.30319.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T01:53:44.483

我有同样的问题。我一直很困惑是什么导致了这个问题，并且已经逐行调试了一天左右。在谷歌搜索并输入正确的描述后，问题在于表格上的线条形状——可能还有其他形状。请参阅此处的链接，希望它可以节省其他人一些时间...您必须仔细阅读评论，就像上面的帖子一样，它带有线条形状。

[http://social.msdn.microsoft.com/Forums/en-US/cb89a159-c989-470f-b74f-df3f61b9dedd/systeminvalidoperationexception-when-closing-a-form?forum=vbpowerpacks](http://social.msdn.microsoft.com/Forums/en-US/cb89a159-c989-470f-b74f-df3f61b9dedd/systeminvalidoperationexception-when-closing-a-form?forum=vbpowerpacks)

[http://channel9.msdn.com/forums/TechOff/520076-VB-2010-Error-PowerPacks-Line-Shape-Dispose/](http://channel9.msdn.com/forums/TechOff/520076-VB-2010-Error-PowerPacks-Line-Shape-Dispose/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:11:26.360

我有相同的 pblm ，尤其是**LineShape**，在安装和搜索正确的**PowerPacks**包感到头疼之后，我通过将背景色调整为黑色和大小将其替换为 RichTextBox ，这看起来很奇怪，但这对我来说比花时间更好这个错误！(0_o)

# javascript - Javascript Async.js Parallel 不适用于 socket.io

> ID：14788920
> 
> 赞同：2
> 
> 时间：2013-02-09T14:00:10.477
> 
> 标签：javascript, asynchronous, socket.io, node-async

我有以下代码块：

```
async.parallel([
    function(cb){ module.rpc("user.data",{"username":data.username},cb); },
    function(cb){ module.rpc("group.list",{"username":data.username},cb); },
    function(cb){ module.rpc("set.list",{},cb); }
],function(error,result){
    if(error){ callback(error); return; }
    var user = result[0], groups = result[1], sets = result[2];
    callback(null,template.render({"user":user,"groups":groups,"sets":sets}));
}); 
```

`module.rpc`是一个通过 . 从服务器获取必要数据的函数`socket.io`。现在，最后一个函数（[`async.parallel`](https://github.com/caolan/async#parallel)的第二个参数）应该只在给定的 3 个函数回调后才被调用。但是，在模板（EJS）渲染期间，当我尝试访问时`groups.data`，*有时会*收到错误消息：

```
Uncaught TypeError: Cannot read property 'data' of undefined 
```

该代码对我来说似乎非常好，但只是偶尔有效。我已经多次重新加载页面，没有更改底层代码，成功率约为 20%。我完全不知道为什么这里出了问题。我只能猜测该变量的分配被延迟了。所以我尝试使用延迟渲染`window.setTimeout`，但无济于事。为什么会这样？我如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:31:36.383

[`socket.io`](http://socket.io/)不断向服务器发送事件，直到它得到确认。根据服务器负载，确认可能不会立即生效。因此发送了多个相同的请求，并且由于[`async.parallel`](https://github.com/caolan/async#paralleltasks-callback)使用计数器而不是单独跟踪每个函数，最终函数被过早地调用。

# actionscript-3 - As3 和 Flex Builder：Flickr API 照片应用程序

> ID：14788922
> 
> 赞同：1
> 
> 时间：2013-02-09T14:00:30.623
> 
> 标签：actionscript-3, apache-flex, api, flickr, flash-builder

我的问题是当我运行应用程序时，照片显示正常，但它们只弹出一行。我试图在应用程序上获得至少 20 行。另外，我将如何编码按钮功能（searchNow）以获取在搜索栏中输入的任何标签以显示正确的图像？

```
{
//===================
//ini variables
//===================
import flash.display.Loader;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.events.MouseEvent;
import flash.events.ProgressEvent;
import flash.net.URLLoader;
import flash.net.URLRequest;
import flash.sensors.Accelerometer;
import flash.system.Security;
import flash.text.TextField;

import libs.flickrviewer_mc;

Security.allowDomain("*", "api.flickr.com");
import flash.display.Bitmap;

public class FlickrViewer extends libs.flickrviewer_mc
{
    //===================
    //ini variables
    //===================
    private var tag:String;

    //===================
    //ini variables
    //===================
    private var xpos:Number = 0;
    private var ypos:Number = 0;
    private var dif:Number = 150;
    private var totalCols:int = 10;
    private var count:int = 0;
    private var i:int = 0;
    private var squares_arr:Array = [];

    //===================
    //flickr variables
    //===================
    private var key:String = "Key Goes Here"; //your flickr api key
    private var per_page:int = 5;
    private var page:int = 1;
    private var xml_url:String = "http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key="+key+"&tags="+tag+"&per_page="+per_page+"&page="+page;

    //===================
    //XML
    //===================
    private var pics:XML = new XML();
    private var pics_url:URLRequest = new URLRequest(xml_url);
    private var picsLoader:URLLoader = new URLLoader(pics_url);

    //===================
    //flickr variables
    //===================
    private var photo_id:String;
    private var photo_owner:String;
    private var photo_url:String = "http://www.flickr.com/photos/";

    public function FlickrViewer()
    {
        super();

        trace("yo");
        this.picsLoader.addEventListener(Event.COMPLETE, picsLoaded);
        this.back_btn.addEventListener(MouseEvent.CLICK, goBack);
        this.searchFlickr_btn.addEventListener(MouseEvent.CLICK, searchNow);
        //this.buttonMode = true;
    }

    private function searchNow(e:Event):void
    {
        var url:String = photo_url+"/"+photo_owner+"/"+photo_id;
        var req:URLRequest = new URLRequest(url);
        (req, "_blank");

    }

    private function loadImage(img_src:String):void
    {
        var loader:Loader = new Loader();
        var img_url:String = img_src;
        var request_url:URLRequest = new URLRequest(img_url);
        loader.load(request_url);
        loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, progressListener);
        loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeListener);
    }

    private function progressListener(e:ProgressEvent):void
    {
        var bl:int = e.bytesLoaded;
        var bt:int = e.bytesTotal;
        var percent:int = Math.ceil((bl*100)/bt);
    }

    private function completeListener(e:Event):void
    {
        var img:Bitmap = e.currentTarget.content;
        trace(img.width);
        img.x=34 + (count * 90);
        img.y=110;
        img.width = img.height = 75;
        this.addChild(img);
        count++;
    }

    private function picsLoaded(e:Event):void
    {
        pics = XML(picsLoader.data);

        var stat:String = pics.@stat.toString();
        var totalPages:int = pics.photos.@pages;
        var totalPics:int = pics.photos.@total;

        trace("bob",pics);
        trace("status: "+stat);
        trace("Total pages: "+totalPages);
        trace("Total pics: "+totalPics);
        trace("-=-=-=-=-=-=-=-=-=-=-=");

        var allPics:XMLList = pics.photos.*;
        //loadImage(allPics[0]);
        for each (var photo:XML in allPics)
        {
            var pic_src:String = "http://farm"+photo.@farm+".static.flickr.com/"+photo.@server+"/"+photo.@id+"_"+photo.@secret+"_m.jpg";

            trace("title: "+photo.@title+" owner: "+photo.@owner);
            trace("Source: "+pic_src);
            trace("-=-=-=-=-=-=-=-=-=-=-=");

            trace(pic_src)
            var newName:String = "square_"+i;

            loadImage(pic_src);

        }

    }

    //===================
    //back button event
    //===================
    private function goBack(e:MouseEvent):void
    {

    }
} 
```

}

# c++ - 如何在不生成大量测试客户端应用程序的情况下切换元素和容器类型以进行基准测试？

> ID：14788926
> 
> 赞同：0
> 
> 时间：2013-02-09T14:01:33.290
> 
> 标签：c++, design-patterns, tdd, automated-tests

我有一个 ClientInterface 类，它使用策略模式来组织两个分别符合接口 Abase 和 Bbase 的复杂算法。ClientInterface 聚合（通过组合）算法运行的数据，这些数据需要符合 Data 接口。

我试图做的是拥有一个 ClientInterface 类，它能够在运行时选择不同的策略和数据实现。使用从输入文件中读取字符串并在 ClientInterface 构造函数中选择算法和数据实现的工厂方法来选择算法和数据实现。下面的代码模型中没有提供数据和算法的运行时选择。

Data 实现可以基于 map、list、unordered_map 等来测试两种复杂算法（Abase 和 Bbase 实现的 Strategies）的效率如何随着用于 Data 的不同容器而变化。

此外，Data 聚合了不同的元素（ElementBase 实现）。不同的元素实现也会对客户端接口的效率产生重大影响，但元素实际上是不相交的类型，实现来自不同的库。我知道这是一个事实，因为对现有应用程序的分析表明 Element 操作是瓶颈之一。

我知道，如果我对容器使用多态性，就会有“boost/ptr_container”，但数据将存储数十万甚至数百万个元素。在这种情况下，对 Elements 使用多态性会在 ClientInterface 上产生很大的开销，但如果我选择将数据作为 Element 类型的类 Template，我最终将静态定义 ClientInterface 类，这意味着为每个 Element 生成一个客户端应用程序至少键入。

我是否可以假设对于相同数量的 Elements 和在运行时获得的 ClientInterface 配置，对 Element 类型使用多态性引起的开销将对 Data 和 Algorithm 实现的所有配置产生相同的影响？在这种情况下，我可以运行自动化测试，决定 Data 实现和 Element 实现的配置，并定义一个静态配置的 EfficientClientInterface 以在生产代码中使用？

**目标：**我准备了一个测试工具，我想做的是自动化测试用例系列的测试，因为在运行时更改算法和元素允许我在循环中使用单个应用程序，它是在运行时配置的，它的输出是为了效率而测量的。在实际实现中，我至少要处理 6 个算法接口，3-4 个 Data 实现，我估计至少 3 个 Element 实现。

所以，我的问题是：

1）当重载不适用于返回类型时，元素如何支持不同的操作？如果我将操作设为模板，则需要在编译时定义它，这会与我的自动化测试过程相混淆。

2）如何更好地设计此代码以实现目标？

3）这个问题有更好的整体方法吗？

这是代码模型：

```
#include <iostream>
#include <memory>

class ElementOpResultFirst
{};

class ElementOpResultSecond
{};

class ElementBase
{
    public: 

        // Overloading does not allow different representation of the solution for the element operation.
        virtual ElementOpResultFirst elementOperation() = 0; 
        //virtual ElementOpResultSecond elementOperation() = 0; 

}; 

class InterestingElement
: 
    public ElementBase
{
    public: 
        ElementOpResultFirst elementOperation() 
        {
            // Implementation dependant operation code. 

            return ElementOpResultFirst(); 
        } 
        //ElementOpResultSecond elementOperation() 
        //{
            //// Implementation dependant operation code.

            //return ElementOpResultSecond(); 
        //} 
};

class EfficientElement
: 
    public ElementBase
{
    public: 
        ElementOpResultFirst elementOperation() 
        {
            // Implementation dependant operation code.

            return ElementOpResultFirst(); 
        } 
        //ElementOpResultSecond elementOperation() 
        //{
            //// Implementation dependant operation code.

            //return ElementOpResultSecond(); 
        //} 
};

class Data
{
    public: 
        virtual void insertElement(const ElementBase&) = 0;  
        virtual const ElementBase& getElement(int key) = 0;
};

class DataConcreteMap
:
    public Data
{
    // Map implementation

    public: 
        void insertElement(const ElementBase&)
        {
            // Insert element into the Map implementation.
        } 
        const ElementBase& getElement(int key)
        {
            // Get element from the Map implementation.
        } 
};

class DataConcreteVector
:
    public Data
{
    // Vector implementation

    public: 
        void insertElement(const ElementBase&)
        {
            // Insert element into the vector implementation.
        } 
        const ElementBase& getElement(int key)
        {
            // Get element from the Vector implementation
        } 
};

class Abase
{
    public: 
        virtual void aFunction() = 0; 
};

class Aconcrete
:
    public Abase
{
    public: 
        virtual void aFunction() 
        {
            std::cout << "Aconcrete::function() " << std::endl;
        }
};

class Bbase
{
    public: 
        virtual void bFunction(Data& data) = 0; 
};

class Bconcrete
:
    public Bbase
{
    public: 
        virtual void bFunction(Data& data) 
        {
            data.getElement(0); 
            std::cout << "Bconcrete::function() " << std::endl;
        }
};

// Add a static abstract factory for algorithm and data generation. 

class ClientInterface
{
    std::unique_ptr<Data>  data_; 
    std::unique_ptr<Abase> algorithmA_; 
    std::unique_ptr<Bbase>  algorithmB_; 

    public: 

        ClientInterface()
            :
                // A Factory Method is defined for Data, Abase and Bbase that 
                // produces the concrete type based on an entry in a text-file.
                data_ (std::unique_ptr<Data> (new DataConcreteMap())), 
                algorithmA_(std::unique_ptr<Abase> (new Aconcrete())),
                algorithmB_(std::unique_ptr<Bbase> (new Bconcrete()))
        {}

        void aFunction()
        {
            return algorithmA_->aFunction(); 
        }

        void bFunction()
        {
            return algorithmB_->bFunction(*data_); 
        }
};

// Single client code: both for testing and final version.
int main()
{
    ClientInterface cli; 

    cli.aFunction(); 
    cli.bFunction(); 

    return 0; 
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:20:59.243

> 我试图做的是拥有一个 ClientInterface 类，它能够在运行时选择不同的策略和数据实现。使用从输入文件中读取字符串并在 ClientInterface 构造函数中选择算法和数据实现的工厂方法来选择算法和数据实现。下面的代码模型中没有提供数据和算法的运行时选择。

听起来你在这里有一些基础：要么只生成一组文件进行测试，然后生成正确的不同输入集。或者重构工厂函数，以便文件和字符串的读取是分开的，因此您可以使用代码中的字符串调用工厂函数 [internals]。

> 我是否可以假设对于相同数量的 Elements 和在运行时获得的 ClientInterface 配置，对 Element 类型使用多态性引起的开销将对 Data 和 Algorithm 实现的所有配置产生相同的影响？在这种情况下，我可以运行自动化测试，决定 Data 实现和 Element 实现的配置，并定义一个静态配置的 EfficientClientInterface 以在生产代码中使用？

我认为你不能做出这样的假设。不同的实现可能对算法有不同的影响——例如，复制一个 100 字节的字符串比复制一个 4 字节的整数要困难得多。所以数据是什么，以及它的组织方式会对你所做的工作产生一些影响。当然，由于您没有详细描述您的 Elements 实际包含的内容，因此这都是猜测。

> 1）当重载不适用于返回类型时，元素如何支持不同的操作？如果我将操作设为模板，则需要在编译时定义它，这会与我的自动化测试过程相混淆。

创建一个返回 ElementBase 引用或指针的工厂类？这是我对这个问题的直接反应，但同样，你问题中的细节非常模糊，很难确定。

在实际应用中，这是如何工作的？它是通过模板完成的，那么您最好通过模板实现测试代码，并用您认为真实系统可能会做的事情的实际变化来填写它。

> 2）如何更好地设计此代码以实现目标？

尝试重用生产代码？

> 3）这个问题有更好的整体方法吗？

还不确定。

# windows - ssh windows 7连接拒绝器

> ID：14788927
> 
> 赞同：-1
> 
> 时间：2013-02-09T14:01:44.037
> 
> 标签：windows, ssh, openssh, sshd

尝试从本地主机连接

```
 ssh <MyLogin>@localhost   - connected 
```

尝试从本地网络中的另一台计算机连接

```
 ssh <Mylogin>@<MyServerLocalIp>   - connected 
```

尝试从互联网连接

```
 ssh <Mylogin>@<InternetIp> -conection refused  (it not appears in my log file) 
```

我在这个站点 [http://www.canyouseeme.org/](http://www.canyouseeme.org/)检查 22 端口 - 22 端口是打开的，它出现在我的日志文件中

尝试使用 telnet

```
 telnet InternetIp 22  - not connected 
```

但是当我尝试另一个端口时

```
 telnet InternetIp 21  - connected 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:12:04.713

这听起来像您在[NAT](http://en.wikipedia.org/wiki/Network_address_translation)路由器后面。

如果是这种情况，您需要做的是首先确保您的机器具有静态 IP 地址。这可能类似于 192.168.1.x。您可以通过将您的机器 MAC 地址映射到 DHCP 分配的地址或仅使用静态 IP 配置您的机器并检查该 IP 是否在 DHCP 范围内来在路由器中进行配置。

然后您将需要配置您的路由器以将入站端口连接转发到您机器的本地 IP 地址。这是 Wikipedia 上关于端口转发的文章：[http ://en.wikipedia.org/wiki/Port_forwarding](http://en.wikipedia.org/wiki/Port_forwarding)

最好的办法是下载特定路由器的手册并查看端口转发部分。它通常在有关路由器防火墙的部分中。

# java - 使用HTTPS将数据上传到android中的服务器

> ID：14788929
> 
> 赞同：1
> 
> 时间：2013-02-09T14:02:03.313
> 
> 标签：java, android, https, upload

场景：我正在尝试将文件上传到服务器，但响应是：

> [内部服务器错误]
> [响应代码 500]。

它不是服务器端问题，因为我单独对其进行了测试，并且数据正在通过......可能是我在编写标题时做错了什么......任何人都可以帮助我并给我一些解决这个问题的方法。

我的代码如下---

```
 package com.example.test_upload;

    import java.io.DataOutputStream;
    import java.io.IOException;
    import java.net.CookieHandler;
    import java.net.CookieManager;
    import java.net.MalformedURLException;
    import java.net.URL;
    import java.security.KeyManagementException;
    import java.security.NoSuchAlgorithmException;
    import java.security.cert.X509Certificate;

    import javax.net.ssl.HostnameVerifier;
    import javax.net.ssl.HttpsURLConnection;
    import javax.net.ssl.SSLContext;
    import javax.net.ssl.SSLSession;
    import javax.net.ssl.TrustManager;
    import javax.net.ssl.X509TrustManager;

    import android.annotation.SuppressLint;
    import android.app.Activity;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.Menu;
    import android.widget.TextView;

    public class Test_upload extends Activity {

private static final String DEBUG_TAG = null;

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test_upload);

    String TAG = "TAG";
    String id="5027300";
    String password = "PlSoUrXu";
    String filename="00000221000300015120128140924.dat";
    String file="abcdtesttest";

    //set parameters
    String urlParameters = "_id="+id+"&_password="+password+"&_filename="+filename+"&_base64file="+file;        

        try {
                // Set your server page url
                URL connectURL = new URL("https:url of my server");

                Log.e(TAG,"Starting Http File Sending to URL");

                // Open a HTTP connection to the URL
                HttpsURLConnection conn = (HttpsURLConnection)connectURL.openConnection();

                //cookie set
                //CookieManager cookieManager = new CookieManager();  
                //CookieHandler.setDefault(cookieManager);

                // Alow Inputs
                conn.setDoInput(true);

                // Allow Outputs
                conn.setDoOutput(true);

                // Don't use a cached copy.
                conn.setUseCaches(false);

                // Use a post method.
                conn.setRequestMethod("POST");

                //********** Create a trust manager that does not validate certificate chains
                   /*TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
                        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                            return null;
                        }
                        public void checkClientTrusted(X509Certificate[] certs, String authType) {
                        }
                        public void checkServerTrusted(X509Certificate[] certs, String authType) {
                        }
                    } };
                    // Install the all-trusting trust manager
                    final SSLContext sc = SSLContext.getInstance("SSL");
                    sc.init(null, trustAllCerts, new java.security.SecureRandom());
                    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
                    // Create all-trusting host name verifier
                    HostnameVerifier allHostsValid = new HostnameVerifier(){
                        @Override
                        public boolean verify(String hostname, SSLSession session) {
                            // TODO Auto-generated method stub
                            return true;
                        }
                    };

                    // Install the all-trusting host verifier
                    HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);*/

                conn.setRequestProperty("Connection", "Keep-Alive");
                conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
                conn.setRequestProperty("charset", "utf-8");
                //conn.setRequestProperty("User-Agent", "Mozilla/4.0 (compatible; MSIE 5.0;Windows98;DigExt)");
                conn.setRequestProperty("Content-Length", ""+ Integer.toString(urlParameters.getBytes().length));

                //Open output stream
                DataOutputStream dos = new DataOutputStream(conn.getOutputStream());
                dos.writeBytes(urlParameters);

                Log.e(TAG,"Headers are written");

                // Responses from the server (code and message)
                int serverResponseCode = conn.getResponseCode();
                String serverResponseMessage = conn.getResponseMessage();
                //Log.e(TAG,serverResponseCode);
                Log.d(DEBUG_TAG, "Server responce code: " + serverResponseCode);
                Log.e(TAG,"Server responce msg:"+serverResponseMessage);

                /*Find the view by its id
                TextView tv1 = (TextView)findViewById(R.id.textView3);*/
                TextView tv2 = (TextView)findViewById(R.id.textView4);

                //Set the text
                //tv1.setText(serverResponseCode);
                tv2.setText(serverResponseMessage);

                dos.flush();
                dos.close();
                conn.disconnect();

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_test_upload, menu);
    return true;
}

} 
```

# ruby - 在 IRB 中使用 Ruby 单例方法时堆栈溢出

> ID：14788930
> 
> 赞同：2
> 
> 时间：2013-02-09T14:02:08.307
> 
> 标签：ruby, irb

正如主题所述，在 IRB 中使用单例方法时，我遇到了*堆栈溢出。*以下是我尝试过的代码：

```
c= C.new
class << c
  def class
    "my class is #{self.class}."
  end
end 
```

当我打电话`c.class`时，我得到了一个：

```
SystemStackError: stack level too deep
Maybe IRB bug! 
```

我找到了有关如何调整[堆栈大小](http://ss64.com/bash/ulimit.html)的参考，但首先不了解堆栈大小。

**问题：** 为什么我在 IRB 中收到该错误？另外，我怎样才能继续试验 Ruby 单例/类方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:21:35.470

首先，有一些东西叫做`recursion`函数可以调用自己的地方。这是您在代码中无意中所做的。

第二件事，堆栈是维护函数调用跟踪的东西。这样当达到递归结束或堆栈级别深度时，它可以正确地恢复程序。

它是这样的：假设你有函数 A 和函数 B。

```
function A {
  /* some code */
  B()
  /* some more code */
}

function B {
  return / * something * /
} 
```

您的机器基本上停止执行 A，将 A 中变量的状态保存到堆栈中，调用并执行 B。当最终 B 退出时，它从堆栈中弹出并继续执行 A。

在该特定示例中，因为您希望定义自己的`class`方法。下面的代码应该做：

```
def class
  "my class is #{super}"
end 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:09:50.160

您已经`class`为该对象创建了对象并定义了方法。然后在这个方法中你调用相同的方法`class`——你有无限递归。

这就是为什么在定义自己的方法时应避免使用依赖于系统的关键字的原因，在您的示例中可能是这样的：

```
class << c
  def klass
    "my class is #{self.class}"
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T14:17:19.430

堆栈源自计算机的内存模型。

对于每个程序，都有`heap`和`stack`。堆部分现在并不重要。

当一个程序调用一个函数时，会发生几件事。

*   程序的当前位置放在栈上
*   当前作用域的变量放在栈上

当您离开一个函数时，这些操作会以相反的顺序反转，以便在调用函数之前复制程序的状态。

因此，当您的函数调用自身（它确实如此）时，它将字符串“my class is”和当前程序位置放在堆栈上并再次启动该函数，这也是如此。

这会持续多次迭代，直到超过为程序保留的 auf 堆栈数量。（这取决于您的操作系统，最后取决于可用的 ram 数量，并且始终是有限的。）这就是您遇到此异常的时候。系统通知您，堆栈空间不足。

这通常只发生在没有停止条件的递归中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T15:20:51.790

除了解释堆栈如何工作的所有不错的答案之外，

`class`是 Ruby 中的保留关键字。该方法`Object#class`是一个独特的例外。你无法真正重新定义它。

# linux - ps，显示没有完整命令名的pid和argv参数？

> ID：14788931
> 
> 赞同：0
> 
> 时间：2013-02-09T14:02:20.363
> 
> 标签：linux, ps

我在 debian 压缩下运行，需要以非常特定的格式获取进程列表。进程以下列方式启动：

```
/$script -- $param 
```

下面我将 $script 称为“test.sh”，所以它看起来像这样：

```
/test.sh -- 99 
```

我需要找到所有这些进程 pid list + 它们的第一个 argv 参数（总是只有一个 argv 参数）：

$pid | $argv

我发现 ps 可以使用标志 -o 以用户格式输出进程列表，暂时我的解决方案是：`ps -C script.sh -o pid,command=`，返回以下内容：

```
6660 /bin/sh /var/www/test.sh -- 15
7012 /bin/sh /var/www/test.sh -- 18
7041 /bin/sh /var/www/test.sh -- 19
7541 /bin/sh /var/www/test.sh -- 16
7741 /bin/sh /var/www/test.shq -- 1 
```

是否可以以某种方式显示此输出？

```
6660 15
7012 18
7041 19
7541 16
7741 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:05:50.927

要切割的管道应该可以解决问题：

```
ps -C script.sh -o pid,command= | cut -d' ' -f 1,5 
```

# machine-learning - 从候选字符中使用哪些功能

> ID：14788932
> 
> 赞同：1
> 
> 时间：2013-02-09T14:02:25.377
> 
> 标签：machine-learning, computer-vision, neural-network

我部分实现[了笔画宽度变换算法](http://www.math.tau.ac.il/~turkel/imagepapers/text_detection.pdf)。我的实现很丑陋，但有些工作

我的实现给了我很多候选人（我使用一些规则来过滤它们）。但我仍然有很多非角色候选人。我想使用神经网络（或其他 ML 算法）来过滤它们。

我应该为我的分类器使用什么功能？

我可以提取均值/标准差（组件的 SW 值）和宽度/高度。

例子：

![在此处输入图像描述](../Images/13a0903ad3a3df87152835f36701a353.png)

红色矩形是字符候选（实现不检测明暗字符，“路虎”的错误检测是正常的）组件过滤后的SWT图像

![在此处输入图像描述](../Images/3d79459a34154e1ed5642ea2fa8aeb85.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:29:56.293

在实践中使用的一种方法是将所有候选者缩放到相同的尺寸（宽度 x 高度），然后将这些像素中的每一个输入到神经网络中。

然后你有每个字符的输出（返回 0 和 1 之间，表示匹配的接近程度）（可能是最后一个输出表示不匹配，尽管这可以从没有明确的候选字符得出）。

使用神经网络，您将需要相当多的训练数据，它就是这样。避免手动获取所需训练数据的选项：

*   在线查找训练数据
*   以算法方式生成训练数据（创建一个算法来绘制字符和背景并将它们输入 NN）
*   对已经获得的训练数据执行转换（旋转、调整大小、更改颜色）。这可以使相当小的训练集变得更大。确保不要尝试以这种方式生成太大比例的数据，否则您的网络可能无法正常运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T16:02:58.923

神经网络和其他技术（例如 SVM）不用于过滤输入，而是用于对输入进行分类。不同之处在于过滤将根据输入是否匹配强加的规则来丢弃输入，因此它实际上不需要任何训练（更可能是一些好的阈值）。另一方面，/trained/ 分类器将一个类分配给给定的输入，这意味着您需要用预期的类和负样本充分训练分类器。因此，如果您想做前者或后者，方法会有所不同，但您在前者中使用的功能可能对后者也有用。

无论您采用何种路径，一些基本的预处理都涉及首先获得一个更清晰的组件，我的意思是删除给定示例中存在的组件内部的无关白点。在那之后，有很多选择。基本的宽度和高度测量值可用于过滤您确定与预期不匹配的组件，因此也无需对其进行分类。通过考虑连接组件的骨架，您可以获得端点和分支点，它们形成两个特征。欧拉数是另一个，事实上，有太多可能的特征需要提取，无法在此处列出。这些提到的特征的特点是它们都是尺度、旋转和平移不变的。这也意味着您需要其他特征来区分，例如，`9`从 a`6`中，骨架中的孔的质心就是一个这样的例子（请注意它，因为直接提取此特征对任何事物都不是不变的）。

请注意，即使是简单的特征也可以帮助分离整个字符集。例如，对于欧拉数 = 0，您将只得到 'A'、'D'、'O'、'P'、'Q'、'R'、'0'、'4'、'6'、或 '9'，假设 ascii alphanum，一种行为良好的字体，以及对输入的良好预处理。

最后，还有相当多的论文可以寻找 SWT 之外的更多信息和不同的方法。例如，[T-HOG](http://www-poleia.lip6.fr/~cord/Publications_files/Minetto_PR_T-HOG_draft-1.pdf)是最近的一种，根据公布的结果，它比 SWT 略好。

编辑：恢复和扩展：

如果你想使用机器学习，你将需要大量的标记数据，你可以从中分离出来进行训练和测试。如果您的目标只是区分“这是一个字符”和“这不是一个字符”，并且没有充分描述后面的类（即，您几乎没有什么不是字符的示例，或者您无法表征它您可以接收的任何类型的输入），One-Class SVM 是一种选择。

对于要从​​单个字符中提取的特征，如前所述，它们太多，方法也很多。论文“Feature Extraction Methods for Character Recognition -- A Survey”（1995 年，根本不是最近的）讨论了其中一些（它还提到了训练数据的预期最小大小，请务必阅读），所以我包括它的部分内容在这里。

从字符中提取的可能很好的特征（灰度和二值图像）：

*   Hu、Reiss、Flusser、Suk、Bamieh、de Figueiredo Moments（所有几何矩不变量均基于 Hu 在“通过 Moment Invariants 进行视觉模式识别”的初步工作的改进）；
*   泽尼克时刻

从骨架化字符中提取的良好特征：

*   T 形接头数量；
*   X 关节数量；
*   折弯点数；
*   端点数量；
*   通过将原点放置在形状的质心与轴的交叉次数；
*   半圆数

傅立叶描述符也可以应用于上述论文中所讨论的字符的骨架、二进制表示或图形表示。

# android - Android 模拟器 ImageView 崩溃

> ID：14788934
> 
> 赞同：4
> 
> 时间：2013-02-09T14:02:51.983
> 
> 标签：android

我添加了一个 ImageView 并分配了一个 jpg 文件（a1.jpg），该文件为 770Kb。当我运行项目时，它会崩溃并显示很多错误日志。我尝试了另一个 jpg 文件，大小为 70KB 并运行该项目，这没有问题。为什么？谢谢！

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/Test_string"
    android:src="@drawable/a1" /> 
```

错误日志

```
02-09 12:47:34.692: D/AndroidRuntime(1023): Shutting down VM
02-09 12:47:34.692: W/dalvikvm(1023): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-09 12:47:34.802: E/AndroidRuntime(1023): FATAL EXCEPTION: main
02-09 12:47:34.802: E/AndroidRuntime(1023): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.lighter.androidntest4/com.lighter.androidntest4.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.os.Looper.loop(Looper.java:137)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at java.lang.reflect.Method.invokeNative(Native Method)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at java.lang.reflect.Method.invoke(Method.java:511)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at dalvik.system.NativeStart.main(Native Method)
02-09 12:47:34.802: E/AndroidRuntime(1023): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.app.Activity.setContentView(Activity.java:1881)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at com.lighter.androidntest4.MainActivity.onCreate(MainActivity.java:15)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.app.Activity.performCreate(Activity.java:5104)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-09 12:47:34.802: E/AndroidRuntime(1023):     ... 11 more
02-09 12:47:34.802: E/AndroidRuntime(1023): Caused by: java.lang.reflect.InvocationTargetException
02-09 12:47:34.802: E/AndroidRuntime(1023):     at java.lang.reflect.Constructor.constructNative(Native Method)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.view.LayoutInflater.createView(LayoutInflater.java:587)
02-09 12:47:34.802: E/AndroidRuntime(1023):     ... 24 more
02-09 12:47:34.802: E/AndroidRuntime(1023): Caused by: java.lang.OutOfMemoryError
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.content.res.Resources.loadDrawable(Resources.java:1965)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.widget.ImageView.<init>(ImageView.java:120)
02-09 12:47:34.802: E/AndroidRuntime(1023):     at android.widget.ImageView.<init>(ImageView.java:110)
02-09 12:47:34.802: E/AndroidRuntime(1023):     ... 27 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T14:10:58.300

这可能是因为您试图加载太大的文件。即使你的错误是这样说的：

```
Caused by: java.lang.OutOfMemoryError 
```

770KB 的图像对于 android 应用程序来说是相当大的。你真的应该考虑一些更小的事情。

您还可以在 AVD 中增加模拟器的堆大小，但在您的情况下，如果可以的话，最好使用较小的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T14:09:21.173

嗯...听起来您的可绘制对象可能设置不正确。你确定名字等吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T14:13:40.840

模拟器无法支持那么大的图像，如 所示`java.lang.OutOfMemoryError`。您应该能够通过进入 AVD 管理器来自定义模拟器以允许更大的内存（我相信它是 Max VM 应用程序堆大小）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T18:43:48.730

我有同样的问题，Piotr Chojnacki 是对的；这是一个图像大小问题。我认为这对于旧设备和模拟器来说是一个更大的问题。

# android - java.lang.UnsupportedOperationException：会话：尝试为具有挂起请求的会话请求新权限

> ID：14788938
> 
> 赞同：4
> 
> 时间：2013-02-09T14:03:13.330
> 
> 标签：android, facebook, android-facebook

下面的代码用于在 android 中使用 facebookSDK3.0 发布状态更新。如果我正在使用`UiLifeCycleHelper`类它工作得很好。但我想在不使用`UiLifeCycleHelper`类的情况下在 facebook 中发布状态。我尝试了以下代码，这在我的 logcat 中引发了错误，并且我的应用程序被强制关闭。

```
public class SampleFBPostActivity extends Activity implements OnClickListener {

private EditText mPostEditText;
private Button mDoneButton;
private Session mSession;
private PendingAction pendingAction = PendingAction.NONE;

private static final List<String> PERMISSIONS = Arrays.asList("publish_actions");
private enum PendingAction {
    NONE,
    POST_STATUS_UPDATE
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fb_post);
    mPostEditText = (EditText) findViewById(R.id.post_text);
    mDoneButton = (Button) findViewById(R.id.done_button);
    mDoneButton.setOnClickListener(this);
    mSession = Session.getActiveSession();
    if (mSession == null) {
        mSession = new Session(this);
        Session.setActiveSession(mSession);
    }
    updateUI();
    handlePendingAction();
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.done_button:
        onClickPostStatusUpdate();
        break;
    }
}

 private interface GraphObjectWithId extends GraphObject {
        String getId();
    }

 private void showPublishResult(String message, GraphObject result, FacebookRequestError error) {
        String title = null;
        String alertMessage = null;
        if (error == null) {
            title = getString(R.string.success);
            String id = result.cast(GraphObjectWithId.class).getId();
            alertMessage = getString(R.string.successfully_posted_post, message, id);
        } else {
            title = getString(R.string.error);
            alertMessage = error.getErrorMessage();
        }

        new AlertDialog.Builder(this)
                .setTitle(title)
                .setMessage(alertMessage)
                .setPositiveButton(R.string.ok, null)
                .show();
    }

    private void onClickPostStatusUpdate() {
        performPublish(PendingAction.POST_STATUS_UPDATE);
    }

    private void postStatusUpdate(final String message) {
        if (mSession != null && hasPublishPermission()) {
            Request request = Request
                    .newStatusUpdateRequest(Session.getActiveSession(), message, new Request.Callback() {
                        @Override
                        public void onCompleted(Response response) {
                            showPublishResult(message, response.getGraphObject(), response.getError());
                        }
                    });
            request.executeAsync();
        } else {
            pendingAction = PendingAction.POST_STATUS_UPDATE;
        }
    }

    private boolean hasPublishPermission() {
        Session session = Session.getActiveSession();
        return session != null && session.getPermissions().contains("publish_actions");
    }

    private void performPublish(PendingAction action) {
        Session session = Session.getActiveSession();
        if (session != null) {
            pendingAction = action;
            if (hasPublishPermission()) {
                handlePendingAction();
            } else {
                session.requestNewPublishPermissions(new Session.NewPermissionsRequest(this, PERMISSIONS));
            }
        }
    }

private void updateUI() {
    Session session = Session.getActiveSession();
    boolean enableButtons = (session != null && session.isOpened());
    mDoneButton.setEnabled(enableButtons);
}

 private void handlePendingAction() {
        PendingAction previouslyPendingAction = pendingAction;
        pendingAction = PendingAction.NONE;

        switch (previouslyPendingAction) {

            case POST_STATUS_UPDATE:
                postStatusUpdate(mPostEditText.getText().toString());
                break;
        }
    }
} 
```

以下是 logcat 中的错误：

```
 02-09 14:00:36.126: E/AndroidRuntime(2396): java.lang.UnsupportedOperationException: Session: an attempt was made to request new permissions for a session that has a pending request.
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at com.facebook.Session.requestNewPermissions(Session.java:968)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at com.facebook.Session.requestNewPublishPermissions(Session.java:501)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at com.facebook.samples.sessionlogin.SampleFBPostActivity.performPublish(SampleFBPostActivity.java:113)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at com.facebook.samples.sessionlogin.SampleFBPostActivity.onClickPostStatusUpdate(SampleFBPostActivity.java:83)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at com.facebook.samples.sessionlogin.SampleFBPostActivity.onClick(SampleFBPostActivity.java:54)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at android.view.View.performClick(View.java:3511)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at android.view.View$PerformClick.run(View.java:14105)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at android.os.Handler.handleCallback(Handler.java:605)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at android.os.Handler.dispatchMessage(Handler.java:92)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at android.os.Looper.loop(Looper.java:137)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at android.app.ActivityThread.main(ActivityThread.java:4424)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at java.lang.reflect.Method.invokeNative(Native Method)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at java.lang.reflect.Method.invoke(Method.java:511)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
  02-09 14:00:36.126: E/AndroidRuntime(2396):   at dalvik.system.NativeStart.main(Native Method) 
```

请不要在您的解决方案中使用`UiLifeCycleHelper`类来帮助我。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T17:37:07.187

您是否有不想使用 UiLifecycleHelper 的特殊原因？该课程专门用于使您的生活更轻松，因此您不会遇到这样的问题。

如果必须，最简单的方法是查看 UiLifecycleHelper 中的代码，并将它们复制到 Activity 中的适当方法中。

对于您的特定活动，我发现有两点错误：

1.  任何时候都没有打开Session（直接调用requestNewPublishPermissions，但是需要先打开Session）。调用“新会话”不会打开它。

2.  您没有覆盖 onActivityResult 方法，这是将信息传递回活动会话所必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T16:43:44.827

试试下面的代码。发布更新是最简单的示例：

在seeson登录后输入代码：

```
session.addCallback(new StatusCallback() {

    @Override
    public void call(Session session, SessionState state,
        Exception exception) {
        List<String> PERMISSIONS = Arrays
            .asList("publish_actions");
        session
            .requestNewPublishPermissions(new Session.NewPermissionsRequest(
                getActivity(), PERMISSIONS));

        Request request = Request.newStatusUpdateRequest(
            session, "Temple Hello Word Sample",
            new Request.Callback() {
                @Override
                public void onCompleted(Response response) {
                    L.d("fb:done = "
                        + response.getGraphObject() + ","
                        + response.getError());
                }
            });
        request.executeAsync();

    }

}); 
```

以下是 Facebook SDK3.0 的示例会话登录的完整代码：

```
package com.facebook.samples.sessionlogin;

import java.util.Arrays;
import java.util.List;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TextView;

import com.facebook.LoggingBehavior;
import com.facebook.Request;
import com.facebook.Response;
import com.facebook.Session;
import com.facebook.Session.StatusCallback;
import com.facebook.SessionState;
import com.facebook.Settings;
import com.microtemple.android.lib.common.L;

public class SessionLoginFragment extends Fragment {
    private static final String         URL_PREFIX_FRIENDS  = "https://graph.facebook.com/me/friends?access_token=";

    private TextView                    textInstructionsOrLink;
    private Button                      buttonLoginLogout;
    private final Session.StatusCallback    statusCallback      = new SessionStatusCallback();

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment, container, false);

        buttonLoginLogout = (Button) view
            .findViewById(R.id.buttonLoginLogout);
        textInstructionsOrLink = (TextView) view
            .findViewById(R.id.instructionsOrLink);

        Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

        Session session = Session.getActiveSession();
        if (session == null) {
            if (savedInstanceState != null) {
                session = Session.restoreSession(getActivity(), null,
                    statusCallback, savedInstanceState);
            }
            if (session == null) {
                session = new Session(getActivity());
            }
            Session.setActiveSession(session);
            if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                session.openForRead(new Session.OpenRequest(this)
                    .setCallback(statusCallback));
            }
        }

        updateView();

        return view;
    }

    @Override
    public void onStart() {
        super.onStart();
        Session.getActiveSession().addCallback(statusCallback);
    }

    @Override
    public void onStop() {
        super.onStop();
        Session.getActiveSession().removeCallback(statusCallback);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(getActivity(),
            requestCode, resultCode, data);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        Session session = Session.getActiveSession();
        Session.saveSession(session, outState);
    }

    private void updateView() {
        Session session = Session.getActiveSession();
        if (session.isOpened()) {
            textInstructionsOrLink.setText(URL_PREFIX_FRIENDS
                + session.getAccessToken());
            buttonLoginLogout.setText(R.string.logout);
            buttonLoginLogout.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    onClickLogout();
                }
            });

            session.addCallback(new StatusCallback() {

                @Override
                public void call(Session session, SessionState state,
                    Exception exception) {
                    List<String> PERMISSIONS = Arrays
                        .asList("publish_actions");
                    session
                        .requestNewPublishPermissions(new Session.NewPermissionsRequest(
                            getActivity(), PERMISSIONS));

                    Request request = Request.newStatusUpdateRequest(
                        session, "getActiveSession",
                        new Request.Callback() {
                            @Override
                            public void onCompleted(Response response) {
                                L.d("fb:done = "
                                    + response.getGraphObject() + ","
                                    + response.getError());
                            }
                        });
                    request.executeAsync();

                }

            });

        } else {
            textInstructionsOrLink.setText(R.string.instructions);
            buttonLoginLogout.setText(R.string.login);
            buttonLoginLogout.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    onClickLogin();
                }
            });
        }
    }

    private void onClickLogin() {
        Session session = Session.getActiveSession();
        if (!session.isOpened() && !session.isClosed()) {
            session.openForRead(new Session.OpenRequest(this)
                .setCallback(statusCallback));
        } else {
            Session.openActiveSession(getActivity(), this, true,
                statusCallback);
        }
    }

    private void onClickLogout() {
        Session session = Session.getActiveSession();
        if (!session.isClosed()) {
            session.closeAndClearTokenInformation();
        }
    }

    private class SessionStatusCallback implements Session.StatusCallback {
        @Override
        public void call(Session session, SessionState state,
            Exception exception) {
            updateView();
        }
    }
} 
```

# java - Magento - 通过休息创建订单

> ID：14788941
> 
> 赞同：3
> 
> 时间：2013-02-09T14:03:36.840
> 
> 标签：java, magento, rest, magento-1.7

我正在开发一个应该通过 REST API 生成订单的 Magento 客户端（用 Java 构建）。
我找不到任何与通过 REST 生成订单相关的东西，只能通过 SOAP 找到。
Magento 1.7 已经支持它了吗？如果没有，是否有任何扩展可以做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:47:47.140

Magento 在其社区版 1.7 中引入了 REST API，如此处所述

[http://www.magentocommerce.com/blog/comments/the-magento-rest-api-a-better-way-to-integrate-business-applications/](http://www.magentocommerce.com/blog/comments/the-magento-rest-api-a-better-way-to-integrate-business-applications/)

还要检查这个看看它是如何工作的

[http://www.magentocommerce.com/api/rest/Resources/Orders/sales_orders.html](http://www.magentocommerce.com/api/rest/Resources/Orders/sales_orders.html)

# linq - 实体框架/LINQ：从多个表中选择列？

> ID：14788942
> 
> 赞同：3
> 
> 时间：2013-02-09T14:03:48.837
> 
> 标签：linq, entity-framework, ef-code-first, many-to-many, entity-framework-5

楷模：

```
 public class User
 {
     [Key]
     public int UserId { get; set; }
     public string UserName { get; set; }
 }

public class Resource
{
    [Key]
    public int ResourceId { get; set; }
    public string ResourceName { get; set; }
    public string  ResourceDescription { get; set; }
}

public class UserResource
{
    [Key, Column(Order=0)]
    public int UserId { get; set; }
    [Key, Column(Order=1)]
    public int ResourceId { get; set; }
    public int ResourceQuantity { get; set; }
} 
```

对于给定的“UserId”，我想从资源模型中选择“ResourceName”，从 UserResource 模型中选择“ResourceQuantity”。**另外，一旦选择，我是否需要一个全新的模型来只携带这两个指定的列？**

另请注意，UserResource 模型有一个复合键，所以我对如何进行连接感到困惑......这是对的吗？

```
 var userResources =
          from r in imDB.Resources
          join ur in imDB.UserResources
          on r.ResourceId equals ur.ResourceId
          select new { r.ResourceName, ur.ResourceQuantity }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:03:43.547

因此，您正在使用`Code first`您可以创建您的模型如下使用`EF conventions.`

```
public class User {
    public int Id { get; set; }
    public string UserName { get; set; }

    public virtual ICollection<Resource> Resources { get; set; }
   }

public class Resource {
    public int Id { get; set; }
    public string ResourceName { get; set; }
    public int ResourceQuantity { get; set; }

    public virtual ICollection<User> Users {get;set;}
} 
```

然后 EF 将生成您`junction table`的原样，因为`UsersResources.`您不需要像以前那样创建额外的模型。EF 会照看这些。

> 将 POCO 与 EF 一起使用时，如果将导航属性标记为虚拟，则可以使用其他 EF 支持，例如延迟加载。因此，通常在导航属性中使用虚拟关键字被认为是一种很好的做法。

**更新**

您可以尝试以下方法：

**方法 1：**基于方法的语法

```
imDB.Resources.Where(r => r.Users.Any(u => u.UserId == userId)) 
```

**方法 2：**基于查询的语法

```
from r in imDB.Resources
from u in r.Users
where u.UserId == userId
select r; 
```

我希望这对你有帮助。

# r - 如何在应用中使用框架？

> ID：14788943
> 
> 赞同：1
> 
> 时间：2013-02-09T14:03:54.120
> 
> 标签：r

我真的很喜欢在 R 中使用帧语法。但是，如果我尝试使用 apply 来执行此操作，它会给我一个错误，即输入是一个向量，而不是一个帧（这是正确的）。是否有与 mapply 类似的功能可以让我继续使用框架语法？

```
df = data.frame(x = 1:5, y = 1:5)

# This works, but is hard to read because you have to remember what's
# in column 1 
apply(df, 1, function(row) row[1])

# I'd rather do this, but it gives me an error
apply(df, 1, function(row) row$x) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:01:42.367

Youcab't`$`在原子向量上使用，但我想你想用它来**提高可读性**。但是你可以使用`[`subsetter。

这里举个例子。下次请提供可重现的示例。没有数据，R 中的问题特别没有意义。

```
set.seed(1234)
gidd <- data.frame(region=sample(letters[1:6],100,rep=T),
                   wbregion=sample(letters[1:6],100,rep=T),
                   foodshare=rnorm(100,0,1),
                   consincPPP05 = runif(100,0,5),
                   stringsAsFactors=F)

  apply(gidd, ## I am applying it in all the grid here!
          1, 
        function(row) {
        similarRows = gidd[gidd$wbregion == row['region'] &
                         gidd$consincPPP05 > .8 * as.numeric(row['consincPPP05']),
                       ]
    return(mean(similarRows$foodshare))
  }) 
```

请注意，使用 apply 我需要转换为数字。

您还可以使用`plyr`or`data.table`来获得干净的语法，例如：

```
 apply(df,1,function(row)row[1]*2) 
```

相当于

```
 ddply(df, 1, summarise, z = x*2) 
```

# java - 在 java 小程序中捕捉鼠标光标

> ID：14788953
> 
> 赞同：1
> 
> 时间：2013-02-09T14:05:43.930
> 
> 标签：java, applet, mouse, mousemove

是否可以在小程序区域内捕获鼠标光标？我正在开发一个java游戏，有一个可以通过鼠标旋转的主角。但是当鼠标指针离开小程序区域时，我不能再接收任何 mousemove 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T10:59:33.610

谢谢各位，我已经找到解决办法了。有一个名为[**Robot**](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)的标准类。它允许以编程方式移动鼠标指针 - 这足以解决我的问题。

# objective-c - vm_stat 从哪里获取信息？

> ID：14788957
> 
> 赞同：4
> 
> 时间：2013-02-09T14:06:13.623
> 
> 标签：objective-c, macos, memory

使用哪些库/系统调用/文件`vm_stat`来获取有关活动页面、非活动页面等的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T14:17:54.583

根据[Apple 网站](http://www.opensource.apple.com/source/system_cmds/system_cmds-550.10/vm_stat.tproj/vm_stat.c)上的代码，核心数据似乎来自`host_statistics64`：

```
get_stats(&vm_stat);

sspstat("Pages free:", (uint64_t) (vm_stat.free_count - vm_stat.speculative_count));
sspstat("Pages active:", (uint64_t) (vm_stat.active_count));
sspstat("Pages inactive:", (uint64_t) (vm_stat.inactive_count));
sspstat("Pages speculative:", (uint64_t) (vm_stat.speculative_count));
sspstat("Pages wired down:", (uint64_t) (vm_stat.wire_count));

void
get_stats(vm_statistics64_t stat)
{
    unsigned int count = HOST_VM_INFO64_COUNT;
    kern_return_t ret;
    if ((ret = host_statistics64(myHost, HOST_VM_INFO64, (host_info64_t)stat, &count) != KERN_SUCCESS)) {
        fprintf(stderr, "%s: failed to get statistics. error %d\n", pgmname, ret);
        exit(EXIT_FAILURE);
    }
    if (stat->lookups == 0)
        percent = 0;
    else {
        /*
         * We have limited precision with the 32-bit natural_t fields
         * in the vm_statistics structure.  There's nothing we can do
         * about counter overflows, but we can avoid percentage
         * calculation overflows by doing the computation in floating
         * point arithmetic ...
         */
        percent = (natural_t)(((double)stat->hits*100)/stat->lookups);
    }
} 
```

# php - 对我的类别进行排序的拖放功能

> ID：14788958
> 
> 赞同：-1
> 
> 时间：2013-02-09T14:06:28.113
> 
> 标签：php, zend-framework, kohana

我在我的电子商务应用程序中使用 kohana。

我有一个类别目录。

我想在框中找到具有拖放功能的模块来对我的类别进行排序。有人知道一些基于 Kohana、Zend 等的**php脚本、模块吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:13:29.980

试试这个：[http ://www.webresourcesdepot.com/dynamic-dragn-drop-with-jquery-and-php/](http://www.webresourcesdepot.com/dynamic-dragn-drop-with-jquery-and-php/)

**仅供参考：上面链接中的代码使用 foreach 循环来更新每条记录，这是资源消耗......**

```
foreach ($updateRecordsArray as $recordIDValue) {
    $query = "UPDATE records SET recordListingID = " . $listingCounter . " 
             WHERE recordID = " . $recordIDValue;
    mysql_query($query) or die('Error, insert query failed');
    $listingCounter = $listingCounter + 1;
} 
```

**您可以使用这样的可靠代码：**

```
$casesSql = '';
$idValues = array();
foreach ($order as $orderNum => $idValue) {
    $casesSql .= " WHEN '" . $idValue . "' THEN '" . ($orderNum + 1) . "'";
    $idValues[] = $idValue;
}

$sql = "UPDATE `" . $table . "`"
        . " SET `DisplayOrder` = CASE `" . $idField . "`"
        . $casesSql . " END"
        . " WHERE `" . $idField . "` IN (" . implode(', ', $idValues) . ")"; 
```

*它仅使用一个查询来更新要更新的整个记录​​，其中 $order 类似于：*

```
Array
(
    [0] => 2
    [1] => 1
    [2] => 4
    [3] => 3
) 
```

# android - Android AppWidget onUpdate 开机

> ID：14788965
> 
> 赞同：5
> 
> 时间：2013-02-09T14:07:34.253
> 
> 标签：android, android-appwidget

启动时是否调用了 onUpdate AppWidget？

我在 onUpdate 中设置了一个警报，我想知道 onUpdate 是否会在启动时被调用，或者我应该使用 BOOT_COMPLETED 意图。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T14:59:40.270

我在文档中没有找到任何关于此的内容，所以我只是对其进行了测试。我在我的小部件的方法中设置了一个 Toast`onUpdate()`以查看它何时被触发。重新启动设备后它*被*触发，所以我假设你不需要使用`BOOT_COMPLETED`意图，但有时你不能确定（没有什么反对仍然使用它）。

***编辑：***

onUpdate() 确实在启动时被调用，Android 文档确实涵盖了这一点：

**更新（）**

> 当要求此 AppWidget 提供者为一组 AppWidget 提供 RemoteViews 时，响应 ACTION_APPWIDGET_UPDATE 和 ACTION_APPWIDGET_RESTORED 广播调用。重写此方法以实现您自己的 AppWidget 功能。

[来源](http://developer.android.com/reference/android/appwidget/AppWidgetProvider.html#onUpdate(android.content.Context,%20android.appwidget.AppWidgetManager,%20int[]))

**ACTION_APPWIDGET_UPDATE**

> 这可以响应于已实例化此 AppWidget 提供程序的新实例、请求的更新间隔已过或系统启动而发送。

[来源](http://developer.android.com/reference/android/appwidget/AppWidgetManager.html#ACTION_APPWIDGET_UPDATE)

# javascript - 将总和拆分为数组javascript

> ID：14788974
> 
> 赞同：0
> 
> 时间：2013-02-09T14:08:50.060
> 
> 标签：javascript

我创建了一个骰子函数，该函数可以随机生成骰子并将它们的值相加。

现在从 0-9 的每个数字都连接到一个类，所以如果我得到数字 4 它应该调用类“四”所以我创建了一个从 0-9 的开关。但是当我得到一个超过 9 的总和时，它会给我默认数字，因为函数 dosent 知道 11 实际上是 2 个数字。我想知道我是否可以拆分数字并将它们放入一个数组中，所以当我将它传递给交换机时，它会得到 med "one" "one" 。

有任何想法吗 ？

```
var value = total;
    switch(this.value){
        case 1:
            value ="one";
            break
        case 2:
            value ="two";
            break
        case 3:
            value ="three";
            break
        case 4:
            value ="four";
            break
        case 5:
            value ="five";
            break
        case 6:
            value ="six";
            break
        case 7:
            value ="seven";
            break
        case 8:
            value ="eight";
            break
        case 9:
            value ="nine";
            break
        case 0:
            value ="zero";
            break
        default:
            value ="zero" 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:23:07.433

您可以为此使用[字符串`split`函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)：

```
var result = this.value.toString(10).split("").map(function(digit) {
    return ["zero", "one", "two", "three", "four", "five",
            "six", "seven", "eight", "nine"][digit];
}); 
```

（当然，您可以使用循环代替[`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map); 检查[这个答案及其](https://stackoverflow.com/a/11232189/1048572)对数组如何工作的评论）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T14:13:10.730

您可以[`split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)在将号码转换为字符串后使用。然后遍历生成的数组并分配您的类。

```
var total = 11;

var pieces = ("" + total).split( "" );

for( var i=0; i<pieces.length; i++) {
  // your switch in here
} 
```

# c++ - 从文件中读取二叉树

> ID：14788975
> 
> 赞同：0
> 
> 时间：2013-02-09T14:08:55.420
> 
> 标签：c++, recursion, file-upload, tree, binary-tree

我一直在处理来自文件的输入，并认为我的逻辑是正确的，但我的节点没有正确链接。我能够正确设置根并且程序能够遍历字符串并正确加载节点，只是不链接它们。谁能帮我整理一下我的逻辑并找出问题所在？

输入字符串是 (A (B (DG) E) (C () F))。

```
 struct node
    {
     string data;
     node* left;
     node* right;
    };

    void tree::build_tree(string &input, int i, node *n)
    {
     if(i > input.length())
          return *n = NULL;

     if(input[i] == '(')
     {
      string data; string temp;
      int prev_i = i;

     //get_data retrieves the identifier
     data = get_data(input, temp, i+1);

     //get_data_num retrieves the new position in the string
     i = get_data_num(input, temp, i+1);

     if(input[prev_i] == '('&& input[i] == ')')
     {
      i += 1;
      *n = NULL;
     }
     else
     {
      // Allocate a new node and assign the data and 
      // set the pointer to the branches to null
      *n = new node;
     (*n)->data = data;
     (*n)->left = NULL;
     (*n)->right = NULL;

     if(input[i] == ' ')
     {i += 1; }

     //Pass the address of the nodes
     build_tree(input, i, &(*n)->left);
     build_tree(input, i, &(*n)->right);
     }

   }

   else if(isalnum(input[i]) || input[i] == '_' || input[i] == '-')
   {
     string data; string temp;
     int prev_i = i;

     data = get_data(input, temp, i);
     i = get_data_num(input, temp, i);

     if(input[prev_i] == '('&& input[i] == ')')
     {
      i += 1;
      *n = NULL;
     }
     else
     {
      *n = new node;
      (*n)->data = data;
      (*n)->left = NULL;
      (*n)->right = NULL;

      if(input[i] == ' ')
      { i += 1; }

     build_tree(input, i, &((*n)->left));
     build_tree(input, i, &((*n)->right));
   }
  }

   else if(input[i] == ' ')
   {
    i += 1;
   }

    else if(input[i] == ')')
    {
     i += 1;
     *n = NULL;
    }

    else
    {
     cout << "The input tree is not in the correct format!" << endl;
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T20:03:37.263

我认为问题在于您没有设置左右指针的值。您正在传递指针的值。您需要将指针传递给指针（左和右），以设置结构中的值。另一种选择是使用引用而不是指针。

以下是我为您提供的代码提出的修改：

*   将节点参数的 build_tree 调用更改为指向指针的指针。
*   相应地更改了值的分配。
*   更改了对 build_tree 的调用以传递左右的地址（以获取指向指针的指针）。
*   删除分配/条件以设置 root_node。因此，当您调用 build_tree 时，您需要传入 root 的地址。这会将节点设置为与后面的所有节点一样，因此不需要是特殊情况。
*   在没有分支的情况下为 left 和 right 添加了 NULL 分配（可能不需要这样做，但我觉得确保所有项目都有一些初始值是一个好习惯）。

```
void tree::build_tree(string &input, int i, node **n)
{

  if(input[i] == '(')
  {
    string data; string temp;

    //get_data retrieves the identifier
    data = get_data(input, temp, i+1);

    //get_data_num retrieves the new position in the string
    i = get_data_num(input, temp, i+1);

    // Allocate a new node and assign the data and 
    // set the pointer to the branches to null
    *n = new node;
    (*n)->data = data;
    (*n)->left = NULL;
    (*n)->right = NULL;

    if(input[i] == ' ')
    { i += 1; }

    // Pass the address of the nodes 
    build_tree(input, i, &(*n)->left);
    build_tree(input, i, &(*n)->right);
  }

  else if(isalnum(input[i]) || input[i] == '_' || input[i] == '-')
  {
    string data; string temp;
    data = get_data(input, temp, i);
    i = get_data_num(input, temp, i);

    *n = new node;
    (*n)->data = data;
    (*n)->left = NULL;
    (*n)->right = NULL;

    if(input[i+1] == ' ')
    { i += 1; }

    build_tree(input, i, &((*n)->left));
    build_tree(input, i, &((*n)->right));
  }

  else if(input[i] == ' ')
  {
    i += 1;
  }

  else if(input[i] == ')')
  {
    *n = NULL;
  }

  else
  {
   cout << "The input tree is not in the correct format!" << endl;
  }
} 
```

然后对于最初的通话，

build_tree(testString,0,&root);

由于未提供 get_data 和 get_data_num，我无法测试所做的更改。

# java - 记录程序的 CPU 时间

> ID：14788976
> 
> 赞同：0
> 
> 时间：2013-02-09T14:09:11.347
> 
> 标签：java, profiler

我想记录我的 Java 程序所用的时间。大多数论坛建议如下：

```
int starttime=System.nanoTime();  
//program code  
int endTime=System.nanoTime();  
int timetaken=starttime-endTime; 
```

这种方法的问题在于，如果有多个程序在运行，那么 endTime 和 starttime 之间的差异就不是我的程序所花费的时间。这也是在CPU等中调度不同程序所花费的时间。但是，我只想记录我的程序所花费的时间。我如何获得这个时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:11:14.027

[你可以在这篇文章](http://nadeausoftware.com/articles/2008/03/java_tip_how_get_cpu_and_user_time_benchmarking)中找到答案。引用文章：

> 调用 ManagementFactory 。getThreadMXBean() 获取描述当前 JVM 线程的 ThreadMXBean。bean 的 getCurrentThreadCpuTime() 方法返回当前线程的 CPU 时间。getCurrentThreadUserTime() 方法返回线程的用户时间。这两个报告时间都以纳秒为单位

如果您的应用程序是多线程的，您需要记录每个应用程序线程的 cpu 时间并将它们相加，以获得您的应用程序在其所有线程中占用的总 cpu 时间。

话虽如此 - 如果你真的很想分析你的 CPU 消耗，你可能应该使用分析器。您可以从一个免费的开源软件开始，例如[visualvm](http://visualvm.java.net/)（也与 jdk 捆绑在一起），它将（在许多其他方面）非常容易地回答这个确切的问题。

# widget - Dojo/Dijit 编写自己的小部件，mixin 问题

> ID：14788980
> 
> 赞同：0
> 
> 时间：2013-02-09T14:09:43.793
> 
> 标签：widget, dojo, template-mixins

只是一个小问题，但它让我发疯。我想使用 TabContainers 编写自己的小部件。现在看来，mixin-Classes 无法调用 TabContainer 模块并启动它们。我用不同的小部件尝试了很多东西，似乎 TabContainer 只是一个问题。查看文档我无法弄清楚它是 Dojo 中的错误还是我的代码中的错误。尽管如此，这行得通

```
<script type="text/template" id="editMultilanguageDialog-form-template">
  <form data-dojo-type="dijit.form.Form" data-dojo-attach-point="form">
    <button data-dojo-type="dijit/form/Button" data-dojo-props="iconClass:'dijitEditorIcon dijitEditorIconCut', showLabel: false" type="button">cut</button>
  </form>
</script> 
```

……但这不是！

```
<script type="text/template" id="editMultilanguageDialog-form-template">
  <form data-dojo-type="dijit.form.Form" data-dojo-attach-point="form">
    <div data-dojo-type="dijit/layout/TabContainer" style="width: 100%; height: 100%;">
        <div data-dojo-type="dijit/layout/ContentPane" title="My first tab" data-dojo-props="selected:true">
            Lorem ipsum and all around...
        </div>
        <div data-dojo-type="dijit/layout/ContentPane" title="My second tab">
            Lorem ipsum and all around - second...
        </div>
        <div data-dojo-type="dijit/layout/ContentPane" title="My last tab" data-dojo-props="closable:true">
            Lorem ipsum and all around - last...
        </div>
    </div>
  </form>
</script> 
```

在 dialog.js 中调用的代码如下所示：

```
 define([ "modules/waitingDialog/dialog", "util/debugger", "stores/userStore",
    "util/storeCache", "dojo/Evented", "dijit/Dialog", "dojo/_base/lang",
    "dojo/_base/declare", "dijit/_Widget", "dijit/_TemplatedMixin",
    "dijit/_WidgetsInTemplateMixin", "dojo/dom", "dojo/_base/Deferred",
    "modules/editMultilanguageDialog/controller", "stores/facultyStore",
    "stores/degreeStore", "stores/beginOfStudyStore" ], function(wait,
    debug, userStore, storeCache, Evented, Dialog, lang, declare, widget,
    templatedMixin, widgetsInTemplateMixin, dom, Deferred,
    editMultilanguageController, facultyStore, degreeStore,
    beginOfStudyStore) {
return declare("editMultilanguageDialog", [ Dialog, Evented ], {

    attributeMap : lang.delegate(widget.prototype.attributeMap, {
        message : {
            node : "messageNode",
            type : "innerHTML"
        }
    }),

    constructor : function(/* Object */kwArgs) {
        debug.log("constructor called",
                "editMultilanguageDialog.constructor()", 1);
        lang.mixin(this, kwArgs);

        var controller = new editMultilanguageController(kwArgs);
        this.controller = controller;

        var dialogTemplate = dom.byId("dialog-template").textContent;
        var formTemplate = dom
                .byId("editMultilanguageDialog-form-template").textContent;
        var template = lang.replace(dialogTemplate, {
            form : formTemplate
        });

        var contentWidget = new (declare([ widget, templatedMixin,
                widgetsInTemplateMixin ], {
            templateString : template,
            widgetsInTemplate : true
        }));

        var content = this.content = contentWidget;

        this.form = content.form;

        contentWidget.startup();
    }, [...] 
```

这个问题快把我逼疯了。认为任何人都可能通过编写自定义小部件遇到同样的问题。提前谢谢！

# javascript - 使用 jQuery each() 创建时，Google 映射灰色背景？

> ID：14788987
> 
> 赞同：0
> 
> 时间：2013-02-09T14:10:40.890
> 
> 标签：javascript, jquery, google-maps

我试图简化将 Google 地图添加到页面的方式。

我为每张地图使用这个标记：

```
<div class="map" data-coordinates="-34.397, 150.644">
    <div class="canvas" id="map_canvas"></div>
</div> 
```

这个jQuery代码：

```
jQuery(function($) {

    var maps = $('.map');

    maps.each(function() {
        var $this = $(this),
            mapId = $this.find('.canvas').attr('id'),
            coordinates= $this.data('coordinates');

        // set map options
        var mapOptions = {
            center: new google.maps.LatLng(coordinates),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // create the map
        var map = new google.maps.Map(document.getElementById(mapId), mapOptions);
    });
}); 
```

这是对谷歌地图网站上[教程的重新创建。](https://developers.google.com/maps/documentation/javascript/tutorial)

当我像教程那样做时它工作正常，但是当我使用上面的代码时，我得到了灰色背景的地图控件，我也尝试`jQuery(window).load();`了相同的结果，问题似乎来自 each() 因为当我创建没有它的地图，它工作正常。

这是有效的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:09:23.447

有问题`coordonates`。

`google.maps.LatLng()`接受 Lat 和 Lng 作为单独的参数，而不是复合字符串。

尝试 ：

```
jQuery(function($) {
    $('.map').each(function() {
        var $this = $(this),
            canvas = $this.find('.canvas').get(0),
            coordinates = $this.data('coordinates').split(/,\s?/);

        // set map options
        var mapOptions = {
            center: new google.maps.LatLng(Number(coordinates[0]), Number(coordinates[1])),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // create the map
        var map = new google.maps.Map(canvas, mapOptions);
    });
}); 
```

您可能需要测试该正则表达式。

# javascript - 如何检测文档中的鼠标点击区域 - jquery - javascript

> ID：14788989
> 
> 赞同：1
> 
> 时间：2013-02-09T14:10:56.447
> 
> 标签：javascript, jquery

我有一个包含 div 元素的页面。我想要当我单击该 div 元素的外部区域时，然后将其淡出。

但我不知道如何检测鼠标点击区域。如何检测鼠标点击点是否超出 div 区域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:17:19.227

这不是很复杂 - 您有两个选择：
**1.**将 onclick 事件分配给外部区域。

```
<div id="outer" onclick="$("#inner").fadeOut();">
    <div id="inner" onclick="event.cancelBubble=true;/*disable bubling*/">Inner Div</div>
</div> 
```

**2.**遍历dom并比较`event.target`( `event.srcElement`)

```
 document.addEventListener("click", function(event) {
       var body = document.body;
       var target = event.target!=null?event.target:event.srcElement;
       var inner = document.getElementById("inner");
       while(target!=body) {
         if(target==inner)    //This means our inner element is clicked - or one of its children
           return false;
         target=target.parentNode;   //Go UP in the document tree
       }
       $("#inner").fadeOut();   //If we got here, none of element matched our inner DIV, so fade it out
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T14:15:33.317

一种可能的 jQuery 解决方案：

```
$(document).on("click", function(e) {
    var $div = $("#divId");
    if (!$div.is(e.target) && !$div.has(e.target).length) {
        $div.fadeOut();
    }
}); 
```

**演示：http:** [//jsfiddle.net/5Jb5b/](http://jsfiddle.net/5Jb5b/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T12:36:05.000

功能点击（e）{

```
var target = e.target;
var optn = [];
optn.id = target.id; 
optn.optnClass = target.className.split(' ');
optn.optnType = target.optnName.toLowerCase();
optn.parent = target.parentNode; 
return optn; 
```

}

document.body.onclick = function(e) {

```
elem = clickOn(e);
var option_id = elem.id;
alert( 'option ID: '+option_id); // From id or other properties you can compare and find in which area mouse click occured 
```

};

# mysql - 触发错误 1064

> ID：14788993
> 
> 赞同：0
> 
> 时间：2013-02-09T14:11:29.020
> 
> 标签：mysql, sql, triggers, phpmyadmin

*   问题 1：我在一台服务器上为每个网站获取多个数据库。创建用户时，我想将数据复制到所有数据库。**用 phpadmin 触发 sql**好用吗？

*   问题 2：我是否遗漏了请求中的某些内容？

**我的请求 ：**

```
CREATE TRIGGER `wordpress_database1`.`insert_user_from_database2` AFTER INSERT ON `wordpress_database2`.`wp_users`
FOR EACH
ROW
BEGIN
INSERT INTO `wordpress_database1`.`wp_users` (
ID,
user_login,
user_pass,
user_nicename,
user_email,
user_url,
user_registered,
user_activation_key,
user_status,
display_name
)
VALUES (
New.ID, New.user_login, New.user_pass, New.user_nicename, New.user_email, New.user_url, New.user_registered, New.user_activation_key, New.user_status, New.display_name
);
END;$$ 
```

**我使用 phpadmin sql 收到此错误：**

```
#1435 - Trigger in wrong schema 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:13:05.147

你还没有结束触发器，

```
DELIMITER $$
CREATE TRIGGER `wordpress_database1`.`insert_user_from_database2` 
AFTER INSERT ON `wordpress_database2`.`wp_users`
FOR EACH
ROW
BEGIN
    INSERT INTO `wordpress_database1`.`wp_users` ( ID, user_login, user_pass, user_nicename,  user_email, user_url, user_registered, user_activation_key, user_status, display_name)
    VALUES ( New.ID, New.user_login, New.user_pass, New.user_nicename, New.user_email, New.user_url, New.user_registered, New.user_activation_key, New.user_status, New.display_name );
END $$
DELIMITER ; 
```

# android - 使用 SearchView 将附加数据传递给 SearchActivity

> ID：14788995
> 
> 赞同：1
> 
> 时间：2013-02-09T14:11:42.233
> 
> 标签：android, searchview

向 SearchActivity 提交搜索查询时，我还需要传递额外的字符串

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T14:40:50.817

**解决了**

我使用正常意图发送查询和附加字符串

```
 @Override
 public boolean onQueryTextSubmit(String query) 
     {
     Intent intent = new Intent(Activity.this, SearchResults.class);
     intent.putExtra("query", query);
     intent.putExtra("listName", listName);
     startActivity(intent);
 return true;
 } 
```

# python - 如何使用非基于文件的模板将继承与 mako 一起使用？

> ID：14788998
> 
> 赞同：0
> 
> 时间：2013-02-09T14:11:59.377
> 
> 标签：python, templates, python-2.7, mako

mako 的大多数示例和教程都建议您使用文件作为模板。

如果模板存储在字符串或数据库中，如何使用继承？

作为一个起点，我正在尝试基于来自 mako 网站的基于文件的继承示例创建一个基于变量的继承示例（之后可以轻松地将其转换为基于数据库的示例）：

```
from mako.template import Template

base = """
  <html>
    <body>

      <div class="header">
        <%block name="header"/>
      </div>

      Some body content ...

    </body>
  </html>
"""

index = """
  <%inherit file="base.html"/>

  <%block name="header">
    this is some header content
  </%block>

  this is the body content.
"""

base_template = Template(base)
index_template = Template(index)

print index_template.render() 
```

显然这是行不通的。

第二个模板需要某种方式来知道 base.html 应该是 base_template。

2009 年，mako-discuss 小组也有人问过这个问题：

[https://groups.google.com/d/topic/mako-discuss/QiwkRu7rTFQ/discussion](https://groups.google.com/d/topic/mako-discuss/QiwkRu7rTFQ/discussion)

这是迈克尔·拜尔（Michael Bayer）写的答案：

> 模板相互访问需要用到 TemplateLookup 集合
> 。
> 
> 任何模板都可以使用发送到 Template 的 "lookup=some_lookup" 关键字参数与查找相关联，或者通过使用 lookup.put("some template name", "your template") 直接使用查找创建模板字符串。

我还不知道如何应用它并将其转换为实际的 python 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T19:59:37.763

首先，您需要添加`${self.body()}`到基本模板，这将标记继承者数据所在的位置。然后你可以像这样使用 TemplateLookup：

```
from mako.template import Template
from mako.lookup import TemplateLookup

base = """
  <html>
    <body>

      <div class="header">
        <%block name="header"/>
      </div>

      ${self.body()}

    </body>
  </html>
"""

index = """
  <%inherit file="base.html"/>

  <%block name="header">
    this is some header content
  </%block>

  this is the body content.
"""

lookup = TemplateLookup()
lookup.put_string("base.html", base)
lookup.put_string("index.html", index)

index_template = lookup.get_template("index.html")

print index_template.render() 
```