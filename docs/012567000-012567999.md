# StackOverflow 问答 12567000-12567999

# php - 用于计数 CSS 选择器的正则表达式匹配

> ID：12567000
> 
> 赞同：2
> 
> 时间：2012-09-24T14:24:45.473
> 
> 标签：php, regex

我正在尝试（并且失败）指定一个可以与 PHP 一起使用的单个正则表达式`preg_match_all()`：

```
.foo { bar }
.baz, .bot { bip, bop } 
```

我需要计算所有`{`且仅`,`不在 {} 之间的。鉴于上面的示例，我应该正好有三个匹配项。我的困难（无知）是我不明白如何指定“大括号之间不匹配逗号”部分。我当前的正则表达式匹配所有逗号和左大括号：

```
({)*(,)* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:44:29.080

尝试这个：

```
\{.+?\}|, 
```

意义：

```
\{   # If you can match a brace
.+?  # then also grab the minimum amount of other charactors
\}   # until you reach the closing brace
|,   # or if there was no brace then just match a comma 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-09T23:57:09.487

如果您想要一个接近但不准确的计数，这是一种快速而肮脏的方法

```
$selector_count = substr_count($css, ',') + substr_count($css, '{') - substr_count($css, '@media'); 
```

它会计算`,`css 中的任何内容，因此类似`rgba(0, 0, 0, 0.5)`使用的规则`,`也会被计算在内。如果您了解这些限制，这将很有用。接受的解决方案不适用于`@media`.

# .net - 单声道上的 Webshaper

> ID：12567006
> 
> 赞同：5
> 
> 时间：2012-09-24T14:25:00.983
> 
> 标签：.net, f#, websharper

简单的问题：是否可以在单声道上托管 webshaper 应用程序。如果没有，是否有计划支持这样的功能？

# c# - 布尔 getter/setter 方法和属性的语法

> ID：12567020
> 
> 赞同：3
> 
> 时间：2012-09-24T14:25:41.967
> 
> 标签：c#, java, oop, coding-style, boolean

在编写布尔 getter/setter 方法时，像这样编写它们似乎是标准的

```
void setValue(boolean value) { }

boolean getValue() { return true/false; } 
```

但是，我看到了一些用法，其中指出 getter 方法应根据其用法适当命名。

例如，如果我的 getter 被调用，我正在设置/获取一个名为“启用”的布尔值：

```
getEnabled() 
```

*或者*

```
isEnabled() 
```

再说一次，例如我正在设置/获取一个名为“节点”的布尔值，如果我的 getter 被调用：

```
getNodes() 
```

*或者*

```
hasNodes() 
```

这只是个人喜好，还是选择一个特定的命名约定而不是另一个的好习惯？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:27:15.960

此答案假定问题与 Java 有关：

遵循约定总是更好。像 Spring 这样的一些框架与 Java Beans 约定紧密耦合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:29:41.953

在 C# 中，属性不是方法。好吧，它们是方法，但是是一种特殊类型的方法。

你声明一个这样的属性：

```
public bool Enabled
{
   get
   {
       // return your value
   }
   set
   {
      // assign your value
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:29:55.113

在 Java 中：

所有的 getter 和 setter 必须至少有 4 个字符长并且有一个大写的第四个字母。

唯一的例外是`boolean`or的 getter，`Boolean`它可以是 3 个字母长，并且可以以`is`并且必须有一个大写字母作为第三个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:30:13.983

这就是我喜欢 C# 的（众多）原因之一

```
public bool Enabled
{
    get { return _enabledValue;}
    set { _enabledValue = value;}
} 
```

拜访该物业是如此“自然”

```
myControl.Enabled = true;
...

if(myControl.Enabled == true) 
```

# asp.net - 存储许多产品类型的属性数据

> ID：12567022
> 
> 赞同：0
> 
> 时间：2012-09-24T14:25:49.913
> 
> 标签：asp.net, sql-server, database

我在设计一个必须跟踪数千种不同产品类型（例如汽车、扬声器、婴儿车等）和存储属性（例如转弯半径、最大输出、颜色、等）为每个。

我的理解是，如果人们要搜索所有蓝色婴儿车，我最好为每种类型的产品都有一个表（除了一个“通用”产品表，它存储所有产品共有的东西，如名称和品牌）。如果不是出于对搜索速度的担忧，我会热衷于使用 EAV 类型的模型，但根据我所阅读的内容，我对此感到气馁。

这似乎是一个常见问题，但我还没有看到如何处理我正在尝试做的事情的好答案。我知道有很多网站在跟踪此类数据，但我发现很难想象他们有数千个不同的表格，以便为每种产品类型提供一个“详细信息”表格。是否有可能他们都在使用 EAV，而反对 EAV 的人虽然在技术上是正确的，但却夸大了使用这种模型的性能损失？或者他们只是使用一个包含所有属性的列的大“产品”表，而不担心所有的空值？

任何帮助将不胜感激。我只知道有一种常见的方法可以做到这一点，我真的很希望有人让我参与其中！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:48:02.483

有没有考虑过使用 CQRS 模式？您可以创建一个带有非规范化搜索表的读取数据库，该数据库将针对搜索进行优化。

*   [http://blog.fossmo.net/post/Command-and-Query-Responsibility-Segregation-(CQRS).aspx](http://blog.fossmo.net/post/Command-and-Query-Responsibility-Segregation-(CQRS).aspx)
*   [http://martinfowler.com/bliki/CQRS.html](http://martinfowler.com/bliki/CQRS.html)

您可以使用 RavenDB 之类的数据库，这是一个读取速度应该非常快的文档数据库，以获得更好的性能。

# c# - 如何知道 USB 设备“HID”和“PID”

> ID：12567023
> 
> 赞同：2
> 
> 时间：2012-09-24T14:25:51.907
> 
> 标签：c#

请告诉我，当 USB 连接到系统时，是否有任何内置功能可以检索“PID”和“VID”？如果没有，获取 USB“HID”和“PID”的最佳方法是什么？我需要这两个来检测 USB HID 设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:44:35.340

由于您的标签指定`C#`了我将假设您要使用 Microsoft Windows 执行此操作。

使用 Windows，我使用计算机管理下的设备管理器找到此信息（右键单击`My Computer`并选择`Manage`）。使用`View`->`Devices by connection`打开`PCI bus`节点，然后打开所有 USB 节点，直到找到要查找的设备。下面是一个来自我的 PC 的示例，显示`Intel(R) 82801G (ICH7 Family) USB Universal Host Controller`条目上的三个 USB 设备。

![在此处输入图像描述](../Images/758deda6b403069a180d8047df46c1c2.png)

然后查看设备的属性->然后是详细信息->然后选择属性硬件ID，你应该得到设备的VID和PID。

![在此处输入图像描述](../Images/a0b8c5064adef665ea542bf8800edc3c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:38:37.120

不了解原生 .NET，目前我只使用[LibUsbDotNet](http://sourceforge.net/projects/libusbdotnet/)，查看[示例](http://libusbdotnet.sourceforge.net/V2/Index.html)。

通常您会从[sourcefourge](http://sourceforge.net/projects/libusbdotnet/)页面安装 .NET 程序集，将程序集添加到您的 Visual Studio 项目 (References/.NET) 并按照[示例](http://libusbdotnet.sourceforge.net/V2/Index.html)(LibUsbDotNet 示例代码/Getting Startet 示例)。详细信息取决于您的 C#/.NET/Visual Studio 版本。

# c++ - 用 gcc 打印 c 和用 g++ 打印 c++

> ID：12567025
> 
> 赞同：2
> 
> 时间：2012-09-24T14:25:56.603
> 
> 标签：c++, c, gcc, g++

任何人都可以告诉如何编写一个程序，该程序在编译时使用`gcc`prints`c`和`g++`prints`c++`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T14:28:22.690

```
#ifdef __cplusplus
    printf("c++\n");
#else
    printf("c\n");
#endif 
```

如果您的文件扩展名不正确，您可能会遇到问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T14:28:04.823

像这样的东西：

```
#if __cplusplus
    printf("c++");
#else 
    printf("c");
#endif 
```

除非您使用它进行编译，否则`g++ -x c`即使使用 g++ 编译它仍会打印 C。这是一个问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-24T15:15:29.460

C 和 C++对标签的处理方式`struct`不同

```
#include<stdio.h>

typedef int T;

int main(void) {
  struct T { int a[2]; };
  puts((sizeof(T) > sizeof(int)) ? "C++" : "C");
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-24T14:43:35.263

使用 C 和 C++ 之间的差异之一。（在 sizeof(int) == 1 的实现上会做错事）

```
#include <stdio.h>

int main()
{
   printf("c%s\n", (sizeof('a') == 1 ? "++" : ""));
   return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T14:44:50.670

您的问题有点含糊，我认为您的意思不是字面意思`how do you print 'C' or 'C++'`；但我正在阅读它`how do you execute a print in either C or C++ depending on the compiler`

假设这就是您要问的，您可以尝试一下：

```
#ifdef __cplusplus                //If you compiled with g++
#include <iostream>                 //include c++ headers and namespace
using namespace std;
#define PRINT(str)  cout << str;    //print the message with cout
#else                             //If you compiled with gcc
#include <stdio.h>                  //include c headers 
#define PRINT(str)  printf(str);    //print using printf
#endif 

int main(int argc, char *argv[])
{
    PRINT("Hello\n");            //Whatever you compiled with, this now works
    return 0;
} 
```

# asp.net - 如何使用成员资格提供程序或角色提供程序将用户添加到 aspnet_Users 表？

> ID：12567027
> 
> 赞同：2
> 
> 时间：2012-09-24T14:25:57.643
> 
> 标签：asp.net, asp.net-mvc, configuration

我想使用我自己的表单将用户添加到 aspnet_Users 表并为他们提供角色。我怎样才能做到这一点？请解释一下。如果您可以提供示例代码，那就太好了。请帮助我的人。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:31:52.060

Great question! The most simple answer is to use the Web Site Administration Tool ASP.Net provides: [http://msdn.microsoft.com/en-us/library/yy40ytx0(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/yy40ytx0%28v=vs.100%29.aspx)

After getting intitial testing out of the way, you undoubtedly will want to do this programmically. You can do this by calling `Membership.CreateUser()` as follows:

```
 Membership.CreateUser( 
       model.UserName,  
       model.Password,  
       model.Email,  
       null,  
       null,  
       model.IsApproved, 
       out createStatus); 
```

Also, the application code provided when building the sample MVCx application provides some great snippets.

# xcode - Mac Objective-C 上的自定义 URL 类型

> ID：12567028
> 
> 赞同：1
> 
> 时间：2012-09-24T14:26:15.397
> 
> 标签：xcode, macos, url, hyperlink

如何创建自定义 URL 类型，我可以使用传递到应用程序的数据执行操作。我试过这个没有运气：

```
- (void)handleURLEvent:(NSAppleEventDescriptor*)event withReplyEvent:(NSAppleEventDescriptor*)replyEvent 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:32:43.790

您必须在应用的属性列表文件（或 XCode 目标编辑器）中为 CFBundleURLTypes 字典指定一个或多个键。

然后在您的应用程序委托中`applicationWillFinishLaunching`编写类似

```
NSAppleEventManager *appleEventManager = [NSAppleEventManager sharedAppleEventManager];
[appleEventManager setEventHandler:self andSelector:@selector(handleGetURLEvent:withReplyEvent:) forEventClass:kInternetEventClass andEventID:kAEGetURL]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T14:30:46.303

1.  在左侧窗格中选择您的**项目。**
2.  在列表中选择您的**目标**。
3.  转到**信息**选项卡。
4.  **在URL Types**下添加新 URL 。

![在此处输入图像描述](../Images/40e808f7094dd8fbb54e7a65a8172a8d.png)

# css - IE7 溢出问题

> ID：12567029
> 
> 赞同：1
> 
> 时间：2012-09-24T14:26:18.207
> 
> 标签：css, overflow, internet-explorer-7

我有一个设置为 auto 的 ul，它允许我为所有 li 提供一个不错的滚动条。但是 IE7 忽略了所有这些，并且列表超出了容器。

[http://jsfiddle.net/asWeb/LnnmW/](http://jsfiddle.net/asWeb/LnnmW/)在这里查看我的代码。

我在互联网上查了一下，常见的解决方案是放置一个位置：相对于外部 div (registered_members)，但它没有用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:46:37.067

添加 position:relative 到 ul 标签。这将强制 IE 正确呈现元素树。

# php - 在 PDF 文件中插入图像

> ID：12567031
> 
> 赞同：1
> 
> 时间：2012-09-24T14:26:24.547
> 
> 标签：php, pdf

我需要在特定页面的特定位置的 PDF 文件中插入图像。我怎么能以一种可以在服务器上工作的方式做到这一点。如果可能的话，我正在寻找一个命令行应用程序，windows。有任何想法吗？

谢谢

# php - PHP 可以检测 Apache 是否正在发送默认字符集标头吗？

> ID：12567032
> 
> 赞同：0
> 
> 时间：2012-09-24T14:26:25.313
> 
> 标签：php

在 Apache 配置中，可以设置以下指令以使 httpd 始终为 text/html 和 text/plain MIME 类型发送 UTF-8 字符编码标头：

```
AddDefaultCharset utf-8 
```

我希望能够在我的 PHP 脚本中检测是否正在发送此标头，以便`header()`如果尚未发送，我可以使用该函数发送相同的标头。

我怎样才能检测到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:29:40.550

There's [apache_response_headers()](http://php.net/manual/en/function.apache-response-headers.php), though it'll only report on headers that are already "in play". If your charset header is added after the fact, you'd never see it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:38:20.057

[deceze](https://stackoverflow.com/users/476/deceze%20deceze)在对最初问题的评论中提供的信息否定了答案的必要性。但是，为了完整起见，我想说似乎没有一种明显的方法来检测 Apache 是否从 PHP 中发送了标头...但是，鉴于上述信息，我想不出你需要这样做的一个原因。

# grails - 在已部署的 grails 应用程序中找不到 CSS

> ID：12567036
> 
> 赞同：0
> 
> 时间：2012-09-24T14:26:44.077
> 
> 标签：grails, grails-plugin, grails-2.0

我正在使用 extjs 插件，我的 gsp 文件中有以下行

```
<link rel="stylesheet" href="${resource(dir:'ext/resources/css', file: 'xtheme-gray.css')}" /> 
```

当我使用 grails run-app 运行应用程序时，我可以看到这个 CSS 正在被使用。当我将其打包为战争并将其部署为应用程序时，我看到一个 404 错误，提示“未找到 css”

我的 grails 版本是 2.1.1

这是生成的 HTML

```
<head>
  <title>Sentry Information Report Login</title>
  <link rel="stylesheet" href="/sentry-web-1.0-SNAPSHOT/static/ext/resources/css/ext-all.css" />
  <script type="text/javascript" src="/sentry-web-1.0-SNAPSHOT/static/ext/adapter/ext/ext-base.js"></script>
  <script type="text/javascript" src="/sentry-web-1.0-SNAPSHOT/static/ext/ext-all.js"></script>

    <meta name="layout" content="ext"/>
    <link rel="stylesheet" href="/sentry-web-1.0-SNAPSHOT/static/ext/resources/css/xtheme-gray.css" />

</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:51:04.563

我能够在这里重现您的错误。我做了什么来解决：

**更新了BuildConfig.groovy**中的资源插件

 **```
runtime ":resources:1.2.RC2" 
```

在资源方法中，定义为查看资源的插件：

```
<link rel="stylesheet" href="${resource(dir:'ext/resources/css', file: 'xtheme-gray.css', plugin: 'extjs')}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:48:31.947

这是我如何让它工作的

```
<link rel="stylesheet" href="${resource(dir:'static/ext/resources/css', file: 'xtheme-gray.css') }" /> 
```

我也会在Tomcat上测试它。我必须下载它**

# python - Django Localization，HTML 翻译字符串正在工作，但在切换语言时不能翻译 Python 翻译字符串

> ID：12567037
> 
> 赞同：1
> 
> 时间：2012-09-24T14:26:46.183
> 
> 标签：python, django, google-app-engine, django-localeurl

我浏览了很多帖子，但无法解决问题，可能问题是别的。

应用程序正在使用 django 和 appengine

当我选择一种语言（例如：“西班牙语（es）”）时，即使是 python 翻译字符串，一切都可以正常工作。但是当我切换到其他语言（例如：“日语（ja）”）时，HTML 正在工作，但***一些***python 翻译仍在使用“西班牙语（es）”语言（以前的语言）。

在中间件类中，我设置：

```
1\. request.LANGUAGE_CODE
2\. request.session['django_language']
3\. settings.LANGUAGE_CODE (may be not required, but still updating)
4\. request.COOKIE['django_language']
5\. translation.activate('<lang>') 
```

在处理响应时，我是：

```
 1\. translation.deactivate()
 2\. translation.deactivate_all() 
```

我不确定，究竟是什么问题？但我想，最初在应用程序加载时，它使用 settings.py 中的指令配置自己，并且当时加载的任何 python 脚本，它们在翻译中都是固定的。我使用自定义的 AUTH_USER_MODULE 和 AUTH_ADMIN_MODULE 而不是 django 定义的。

任何想法，我做错了什么？非常感谢您的帮助。

如果您需要更多信息，请告诉我。

谢谢

# java - 在 jFreechart 上很好地显示 Y 轴

> ID：12567039
> 
> 赞同：2
> 
> 时间：2012-09-24T14:26:57.650
> 
> 标签：java, jfreechart

请问如何更改 Y 轴以显示相同位数的数据。

[这就是我的图表](http://www.123.ro/capture.jpg)

这是生成该图部分的代码

```
final CategoryPlot plot = (CategoryPlot)result.getPlot ();
plot.setBackgroundPaint(Color.BLACK);
plot.setDomainGridlinePaint(Color.white);
plot.setRangeGridlinePaint(Color.white);

NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
rangeAxis.setRange (1.2, 1.3);
rangeAxis.setStandardTickUnits(NumberAxis.createStandardTickUnits ());
rangeAxis.setTickUnit (new NumberTickUnit(0.005)); 
```

如您所见，我将起点固定在 1.2，终点固定在 1.3，并将 TickUnit 定义为 0.005。所以正常（我认为）我应该有一些渐进的东西：1.2 1.205 1.210 ... 1.305

[这就是我想要获得的](http://www.123.ro/capture2.jpg)

如何修改代码以获取带有等级值的 Y 轴？谢谢

我想我找到了这个解决方案

```
DecimalFormat df = new DecimalFormat("0.000");
NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
rangeAxis.setRange (1.200, 1.300);
rangeAxis.setStandardTickUnits(NumberAxis.createStandardTickUnits ());
rangeAxis.setTickUnit (new NumberTickUnit(0.005, df, 0)); 
```

它似乎工作正常。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:40:38.720

图表轴将接受一个`java.text.NumberFormat`实例，它将用于格式化标签。为此，请尝试将这些行添加到您的代码中：

```
DecimalFormat newFormat = new DecimalFormat("0.000");
rangeAxis.setNumberFormatOverride(newFormat); 
```

# javascript - Jquery mobile - 图标在 rel="external" 上消失

> ID：12567040
> 
> 赞同：0
> 
> 时间：2012-09-24T14:26:57.787
> 
> 标签：javascript, jquery, html, jquery-mobile, icons

我的项目中的图标外观遇到了一些问题，我有一个多页 html，我只能使用该属性`rel="external"`（只有移动到多页 html 的方法）。

问题是，每当我单击带有 的链接时`rel="external"`，页面加载时都没有图标图片，而是有一些应该包含图标的空圆圈。此问题在该链接之后显示的其他页面中继续出现`rel="external"`。

请注意，在我单击`rel="external"`链接之前，图标工作得很好。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:00:25.237

The usage of rel="external" causes a full page refresh, so the target HTML page should include in its header tag all the JS and CSS required for proper appearance and functioning.

Could you check whether the jQM JS and CSS files are included in the target HTML files?

I hope this helps.

# vba - 调用 Worksheet/Cell 的方法返回引用

> ID：12567045
> 
> 赞同：0
> 
> 时间：2012-09-24T14:27:14.697
> 
> 标签：vba, excel, excel-2010

我有一种方法可以从工作表上的表列执行不同的结果。

该方法的结果将进入单元格中的数据验证列表框。我现在有两个需求，需要我通过将传递给该方法的列数限制为一来“虚拟减轻”该方法的使用。这部分我可以完成，我想做的是拥有它，这样如果 Range 中有多个列，那么它会对用户“呕吐”，说明从“工作表”进行了非法函数调用。单元”并提醒 IT 支持人员解决问题。

获得工作表很棒而且很简单。它更多的是获得对调用单元的引用，而无需明确强制 IT 支持将单元作为值传递给方法。

关于如何提取呼叫单元的任何想法？

最终，此方法将在多个工作表中使用，以执行相同的逻辑，并将不同的范围传递给它。

### 于 2012 年 9 月 24 日上午 10:30 CST 编辑

到目前为止，这是我的实现，还没有使用该`Application.Caller`方法。

```
Function UniqueValues(ws As Worksheet, col As String) As Variant

   Dim rng As Range: Set rng = ws.Range(col)
   Dim dict As New Scripting.Dictionary

   If Not (rng Is Nothing) Then
      Dim cell As Range, val As String

      For Each cell In rng.Cells
         val = CStr(cell.Value)

         If Not dict.Exists(val) Then
            dict.Add val, val
         End If

      Next cell
   End If

   'Return value
   UniqueValues = dict.Items
End Function 
```

此方法已在代码隐藏逻辑中使用。我将复制此逻辑并将其`Application.Volatile`作为我正在处理的 Excel 工作簿的一部分。会相似但不一样。

这是当前的设计，不多，但我正在使用 atm。

```
Function DistinctValues(rng As Range)
Application.Volatile True
    If rng.Columns.Count > 1 Then
        Err.Raise -1542376, rng.Worksheet.name, "An invalid function call was made!"
    End If

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:25:06.027

`Application.Caller`返回调用函数的单元格。请参阅此[MSDN 定义](http://msdn.microsoft.com/en-us/library/office/ff193687.aspx)。

# php - 使用php进行图像翻转

> ID：12567049
> 
> 赞同：0
> 
> 时间：2012-09-24T14:27:24.790
> 
> 标签：php, php-gd

我提供了一个带有 php gd 版本 2 的托管计划，我无法安装任何其他库。我知道可以使用 imagesx() imagesy() 和 imagecreatetruecolor() 来完成图像翻转，但它们在 GD 版本 2 中不可用。我无法升级到更高版本。那么，有没有其他方法可以使用 php gd 版本 2 或仅使用 php 水平和垂直翻转图像？谢谢百万。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:45:11.693

也许这会有所帮助...您需要将其修改为垂直翻转...

```
$size_x = imagesx($img);
$size_y = imagesy($img);

$temp = imagecreatetruecolor($size_x, $size_y);

imagecolortransparent($temp, imagecolorallocate($temp, 0, 0, 0));
imagealphablending($temp, false);
imagesavealpha($temp, true);
$x = imagecopyresampled($temp, $img, 0, 0, ($size_x-1), 0, $size_x, $size_y, 0-$size_x, $size_y);
if ($x) {
    $img = $temp;
}
else {
    die("Unable to flip image");
}

header("Content-type: image/gif");
imagegif($img);
imagedestroy($img); 
```

归功于[马库斯](https://stackoverflow.com/users/2490/markus)：[这是链接](https://stackoverflow.com/questions/66518/flip-an-image-horizontally)

# jquery - jQuery Infinite Slider，类似于 BBC 主页

> ID：12567050
> 
> 赞同：0
> 
> 时间：2012-09-24T14:27:28.753
> 
> 标签：jquery, slider, slideshow

我正在创建一个幻灯片，类似于 BBC 主页的幻灯片。我已经设法创建它，以便您可以左右滑动，它会在循环中无限滚动。slide 函数仅使用无序列表并将最后一个或第一个列表项添加或附加到列表中。

我的问题是我希望能够跳到特定的幻灯片......我只是想不出一个好的方法来做到这一点。任何帮助将不胜感激。

```
var slider = function(transition_time, transition, transition_speed, width){    

    var self = this; var slides = [];

    // Slide left or right
    this.slide = function(direction){

        $('#slideshow-wrapper li').each(function(){
            slides.push($(this).attr('id'));
        });     

        if (direction == 0)                         
            indent =  parseInt($('#slideshow-wrapper').css('left')) + width;        
        else 
            indent =  parseInt($('#slideshow-wrapper').css('left')) - width;

        $('#slideshow-wrapper:not(:animated)').animate({'left' : indent}, transition_speed, transition, function(){    

            if (direction == 0) 
                $('#slideshow-wrapper li:last').detach().fadeIn().prependTo($('#slideshow-wrapper'));

            else
                $('#slideshow-wrapper li:first').detach().fadeIn().appendTo($('#slideshow-wrapper')); 

            $('#slideshow-wrapper').css({'left' : '-' + width + 'px'});
        }); 
    }
} 
```

根据要求，这里是一个 jsfiddle 的链接。[http://jsfiddle.net/TqAdA/21/](http://jsfiddle.net/TqAdA/21/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:46:13.503

首先，BBC 不使用传统的 jquery。它使用[GLOW](http://www.bbc.co.uk/glow/)另一个 javascript 库。

但是您可能希望您[使用 nivo 滑块](http://nivo.dev7studios.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:26:39.433

以下是 BBC 的做法。使用 JQuery 和类。

有一个包含您的幻灯片的包装 div，这些幻灯片也是 div。所以 div 有如下类：

```
<div class="wrapper>
    <div id="dz-gridsport" class="pane pane-5" style="left: 976px;">
    <div id="dz-gridbbcnow" class="pane pane-0 focused" style="left: 1952px;">
    <div id="dz-gridentertainment" class="pane pane-1" style="left: 2928px;">
</div> 
```

因此，您可以使用以下方法获取当前聚焦幻灯片的索引：

```
var slideIndex = $(".wrapper").index($(".focused")) 
```

以这种方式使用索引，然后您可以使用每个窗格的宽度和偏移量来计算如何到达每个窗格。

希望这可以帮助。

# smalltalk - 为交点创建方法

> ID：12567051
> 
> 赞同：0
> 
> 时间：2012-09-24T14:27:35.863
> 
> 标签：smalltalk, pharo, morphic

[http://paulbourke.net/geometry/2circle/](http://paulbourke.net/geometry/2circle/) 在少数人的帮助下解决了这个问题，这段代码将获得两个圆的交点

这是我的工作区代码

```
 |b b1 r r1 r2 d |
    b1:= CircleAnimeMorph  new.   " CircleAnimeMorph is my new   class"
    b1 center: 100@100.
    b1 openInWorld.
    b:= CircleAnimeMorph  new.
    b openInWorld.
    d:=  b1 center dist: b center. "distance between 2 circles"
    r:=b1 bounds  width /2\.  "radius of first circle"
    r1:=b bounds width/2\. "radius of second Circle"
    r2:=r + r1 .

    (d )< (r2)

    ifTrue: [| a h mid c c1 myPen  h1 h2 mx my mc mc1|

    a := (r squared - r1 squared + d squared) / (2 * d).
    h := (r squared - a squared) sqrt.
   h1:= b center y - b1 center y.
   h2:= b center x - b1 center x.  
  mx:=a * (b center x - b1 center x)/d.
  my:=a* (b center y  -   b1 center y)/d.

     mid := ((mx)+(b1 center x)  @ (b1 center y )+(my) )   " calculates mid point between 2 intersecting circles (p2)"
    {  
                  mc:=(h * h1)/d.
                  mc1:=(h * h2)/d.
                  c:=(mid x +  mc )@ (mid y - mc1 )."Actual Intersecting points"
                  c1:=(mid x -mc) @ (mid y + mc1 )."Actual Intersecting points"
                  Transcript show: (c); show: (c1); cr
    }.
                  myPen := Pen new.
                  myPen color: Color  red.
                  myPen  putDotOfDiameter: 5 at: mid.
                  myPen  putDotOfDiameter: 5 at: c1.
                  myPen  putDotOfDiameter: 5 at: c. ]. 
```

谁能帮我把它做成一个方法，我想把它做成一个交集方法，当我说的时候它会做这一切

```
 b1 intersection:b. 
```

应该做所有这些并在交叉点绘制彩色点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:19:51.460

听起来您只想为您的课程添加一个新方法。打开浏览器，导航到`CircleAnimeMorph`，单击方法类别窗格中的某处（即右侧第二个窗格），单击代码窗格（浏览器的下半部分）并添加

```
intersection: aCircleAnimeMorph
    "And here, put your workspace code, but remove the initialisation stuff,
     change 'b' to 'self' and 'b1' to 'aCircleAnimeMorph',
     and make sure you actually return the values. Don't forget to remove
     the Transcript and drawing logic." 
```

# php - 如果条件，如何在 Javascript 中触发 php 代码

> ID：12567054
> 
> 赞同：3
> 
> 时间：2012-09-24T14:27:42.467
> 
> 标签：php, javascript, html, include

好的，所以我要做的是触发 PHP 代码，只有当 if 条件为真（在 javascript 中）时，我才知道 php 是服务器端，而 javascript 是客户端。php 代码的包含工作完美，除了 1 件事，它实际上是在页面加载时触发的，而不是在 if 条件发生时触发。如果您能帮助我如何做到这一点，我们将不胜感激。我希望仅当 if 条件为真时才包含 php 文件

提前致谢

这是正在使用的代码：

```
<html>
    <script src="//cdnjs.cloudflare.com/ajax/libs/visibility.js/0.5/visibility.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script>
var seconds=20;
var flag=false;

$(document).ready(function(){
if (!flag)
Visibility.every(1000, tick);

function tick()
{
      display();

        if (seconds>0)
        {
         seconds--;
        }
        else
        {
          if (!flag){
          document.getElementById('more').innerHTML +="<?php include_once('Code.php'); 
          ?>";
          document.getElementById('more').style.visibility='visible';
          flag=true;
          }
        }
}
function display()
{
   $("#timer").html(seconds);
}
});
</script>
<div id="TrafficHeader" style="height:100px; background-color:grey; padding:20px;">
<div id="timer"></div>
<div id="more" style="visibility: hidden;"><a href="http://www.double-it.com/Traffic/index.php">View Next Ad</a></div></div>
<iframe id="myframe" src="<?php echo ''.$URL;?>" height="100%" width="100%" frameborder="0">
</iframe>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T14:32:44.000

这是不可能的，至少不是你这样做的方式。
原因是`if`在服务器完成评估您的`php`脚本很久之后，在客户端计算机上评估条件。

第一个服务器必须完成对您的 php 脚本的处理，然后想象它必须打包它，然后将整个包发送给客户端，然后将其解包并呈现 html 并评估 html 中的 javascript，或者请求外部文件，如图像， css 或其他脚本文件。

如果您尝试包含一些额外的 javascript，则可以`script`以编程方式在头部添加额外的标签。如果你想在服务器上做一些事情，你可以很容易地在服务器上调用一个脚本。

以下是仅当 if 为真时如何从 javascript 执行该脚本的方法：

```
...
if (!flag){
    xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", "http://link/to/your/code.php?and=special&parameters=sent", false );
    xmlHttp.send( null );

    document.getElementById('more').innerHTML += xmlHttp.responseText;
    document.getElementById('more').style.visibility='visible';
    flag=true;
    }
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T14:34:43.297

php 代码是服务器端的，因此它在 javascript 之前执行，因此 javascript 无法控制 php 的功能。您需要使用 Ajax 脚本使 javascript 可以从服务器请求一个 php 文件，然后它就会工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:32:30.087

你不能那样做......你自己说过，PHP是服务器端的。为了运行 PHP，您必须让浏览器针对您的 Web 服务器查询某些内容。这绝对不会像您预期的那样工作......它总是会被包括在内：

```
innerHTML +="<?php include_once('../../Includez/Traffic/Traffic_Code.php'); ?>"; 
```

但是，您可以使 JavaScript 从服务器获取更多内容，该服务器可以运行一些 PHP 代码并将新内容返回到您的页面......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-15T09:18:52.047

您是否尝试使用“加载”解决方案？

```
<div id="special_block"></div>

<script>

   var a = 1;

   if (a == 1){
     $('#special_block').load('code.php');
   }

</script> 
```

# php - PHP Regex 从文件名中删除除日期之外的所有内容

> ID：12567056
> 
> 赞同：0
> 
> 时间：2012-09-24T14:28:03.213
> 
> 标签：php, regex, date, preg-replace

我有一个带有日期的文件名，日期总是在文件名的末尾。并且没有扩展名（因为我使用了 basename 函数）。

是）我有的：

```
$file = '../file_2012-01-02.txt';
$file = basename('$file', '.txt');
$date = preg_replace('PATTERN', '', $file); 
```

我真的不擅长正则表达式，所以有人可以帮我从文件名中取出日期。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:41:03.783

我建议使用 preg_match 而不是 preg_replace：

```
$file = '../file_2012-01-02';
preg_match("/.*([0-9]{4}-[0-9]{2}-[0-9]{2}).*/", $file, $matches);
echo $matches[1]; // contains '2012-01-02' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:31:47.850

我建议你尝试：

```
$exploded = explode("_", $filename);
echo $exploded[1] . '<br />'; //prints out 2012-01-02.txt
$exploded_again = explode(".", $exploded[1]);
echo $exploded_again[0]; //prints out 2012-01-02 
```

缩短它：

```
$exploded = explode( "_" , str_replace( ".txt", "", $filename ) );
echo $exploded[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:35:27.607

如果日期前总是有下划线：

```
ltrim(strrchr($file, '_'), '_');
      ^^^^^^^ get the last underscore of the string and the rest of the string after it
^^^^^ remove the underscore 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:37:41.973

有了这个，当你真的需要时使用正则表达式：

```
current(explode('.', end(explode('_', $filename)))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T14:37:55.560

这应该有助于我思考：

```
<?php

$file = '../file_2012-01-02.txt';
$file = basename("$file", '.txt');
$date = preg_replace('/(\d{4})-(\d{2})-(\d{2})$/', '', $file);

echo $date; // will output: file_

?> 
```

# java - 集合中的泛型

> ID：12567064
> 
> 赞同：15
> 
> 时间：2012-09-24T14:28:24.797
> 
> 标签：java, generics

这是我的程序。我不确定为什么会出现编译时错误。

```
import java.util.ArrayList;
import java.util.List;

public class Test {
public static void main(String[] args) {
    List< ? extends Number > list = new ArrayList<Integer>();

    list.add(6); // Compile Time Error

    System.out.println(list);

  }
} 
```

但是以下程序可以正常工作

```
import java.util.ArrayList;
import java.util.List;

public class Test {
public static void main(String[] args) {
    List< ? super Number > list = new ArrayList<Number>();

    list.add(6); 

    System.out.println(list);

    }
} 
```

**来自 Eclipse 的错误：**

这是来自 Eclipse 的错误描述：

> List 类型中的方法 add(int, capture#1-of ? extends Number) 不适用于参数 (int)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-24T14:36:30.290

这是因为您在第一种情况下所做的**不是 type safe**。您已声明`list`为`List`“某个子类`Number`”的一个，然后尝试将一个`Integer`插入其中。绝对不能保证`Integer`与底层列表的实际运行时类型兼容。编译器在这里阻止你，因为你所做**的没有任何意义**。

考虑，作为一个极端的例子：

```
List< ? extends Object > list = new ArrayList<Integer>();
list.add("Hello, World!"); 
```

如果这行得通，你就会有一个`List<Integer>`with a `String`！

如果你真的想让它工作，你必须通过强制转换告诉编译器你知道你在做什么：

```
((List<Integer>)list).add(6); 
```

但即便如此，您仍然会收到有关类型安全的警告。

第二种情况有效，因为该列表保证是“数字的某个超类”。`Integer`是 的子类`Number`，因此它可以隐式转换为任何超类（包括`Number`它自己），因此不存在值与列表的实际类型不兼容的风险。

[有关更多信息，您可能需要阅读covariance 和 contravariance](http://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science))之间的区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T14:38:30.647

您不能向`List`a`? extends ...`作为其泛型类型的一部分添加任何内容。

让我们看看这个：

```
List< ? extends Number > list = new ArrayList<Integer>(); 
```

请注意，`List`您实际使用的是`ArrayList<Integer>`. 应该不可能在此列表中放置其他不是`Integer`. 然而，该类型`List<? extends Number>`将允许您将例如 a 添加`Double`到列表中，因为`Double`也可以 extends `Number`。

有关更多详细信息，请参阅 Angelika Langer 的 Java 泛型常见问题解答中的以下内容：[哪些方法和字段可通过通配符参数化类型的引用变量访问/不可访问？](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ304)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:36:46.217

它关于`super`和`extends`。比较[这个问题](https://stackoverflow.com/q/1910892/1515052)。

[您也可以通过Wildcards](http://en.wikipedia.org/wiki/Wildcard_%28Java%29)查找它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:46:32.640

这不起作用：

```
List< ? extends Number > list = new ArrayList<Integer>();
list.add(6); // Compile Time Error 
```

因为如果这样做，您可能会遇到这样的情况。

```
class Apple extends Number  {}

List< ? extends Number > list = new ArrayList<Integer>();
list.add(new Apple()); //if it were to work, you'd have apples in what you'd think was a list of integers 
```

# handsontable - 在 onChange 事件中引用可操作的网格

> ID：12567067
> 
> 赞同：1
> 
> 时间：2012-09-24T14:28:35.243
> 
> 标签：handsontable

onChange 事件不包括对网格的引用。几乎所有示例都在事件处理程序中硬编码了网格 ID。我有一个页面上有多个网格的用例。有没有办法从事件中获取网格的 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:29:34.290

在这里修复：[https ://github.com/warpech/jquery-handsontable/issues/152](https://github.com/warpech/jquery-handsontable/issues/152)

# c# - 如何在两个 jQuery 数据表之间传递参数

> ID：12567073
> 
> 赞同：4
> 
> 时间：2012-09-24T14:29:04.270
> 
> 标签：c#, jquery, asp.net-mvc, datatable

我有两个数据表，一个列出文件夹，另一个列出其父文件夹中的文件。这是我的脚本查找文件夹表的方式：

```
var oTable = $('#folderTable').dataTable({
            "bServerSide": true,
            "sAjaxSource": "AJAXViewFolders",
            "bProcessing": true,
            "bFilter": false,
            "aoColumns": [
                    { "sName": "folder_id",
                        "bSearchable": false,
                        "bSortable": false,
                        "fnRender": function (oObj) {
                            return '<a href=\"ViewFiles?parentid=' + oObj.aData[0] + '\">View</a>';
                        }
                    },
                    { "sName": "folder_name" },
                    { "sName": "create_date" }
                ]
        });
    }); 
```

现在，当用户单击链接时，我需要能够将该 parentid 传递给文件数据表。到目前为止，我没有运气。对于文件数据表，这是 JSON 结果在我的控制器中的外观：

```
public JsonResult AJAXViewFiles(DataTableParamModel dtParams, int parentid)
    {
        var repo = new TrusteeDocumentRepository();
        var allDocuments = repo.FindAllFiles().Where(c=>c.folder_id == parentid);
        IEnumerable<Files> filteredFiles;
        filteredFiles = allDocuments;

        var displayedFiles = filteredFiles.Skip(dtParams.iDisplayStart).Take(dtParams.iDisplayLength);
        var result = from c in displayedFiles select new[] { Convert.ToString(c.folder_id),c.file_name, c.upload_date.ToString()  };

        return Json(new
        {
            sEcho = dtParams.sEcho,
            iTotalRecords = allDocuments.Count(),
            iTotalDisplayRecords = filteredFiles.Count(),
            aaData = result
        },
                    JsonRequestBehavior.AllowGet);
    } 
```

我将如何获取文件夹表中的链接以将 parentid 成功传递给文件数据表的 jsonresult？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:20:35.480

我假设数据表在同一页面上，所以我将它切换到一个按钮......

```
"fnRender": function (oObj) {
    return '<button type="button" class="folder-view" data-id="' + oObj.aData[0] + '">View</button>';
} 
```

添加一个实时点击处理程序，以便您可以设置当前 parentid 并刷新文件 dataTable。处理程序可能看起来像这样......

```
$('.folder-view').on('click', function() {
    var $filesTable = $('#filesTable');
    $filesTable.attr('data-parentid', $(this).attr('data-id'));
    //refresh the files table
    $filesTable.dataTable().fnDraw(false);
}); 
```

最后，文件 dataTable 将需要覆盖`fnServerData`函数以合并额外的 parentid 数据......

```
"fnServerData": function (sSource, aoData, fnCallback) {

    var extraData = [ { parentid: $('#filesTable').attr('data-parentid') } ];

    $.ajax({
        "dataType": "json",
        "type": "POST",
        "url": sSource,
        "data": $.merge(extraData, aoData),
        "success": fnCallback
    });
} 
```

# android - SharedPreferences 访问是否耗时？

> ID：12567077
> 
> 赞同：20
> 
> 时间：2012-09-24T14:29:10.167
> 
> 标签：android, performance, testing, sharedpreferences

我目前正在尝试为我的应用程序测试第三方服务，并且需要识别在每次特定运行时正在进行的每个测试。

由于每次运行 testApp 时都会进行多个测试，因此我需要识别每个测试。

我想到的是存储设备名称和构建（这里的设备不多），以及每个测试的索引。

```
private String getTestId(){
    SharedPreferences settings = getPreferences(0);
    SharedPreferences.Editor editor = settings.edit();
    int testNumber = settings.getInt("id", 0);
    editor.putInt("id", testNumber+1);
    editor.commit();
    String id = Build.DEVICE + Build.VERSION.RELEASE+" - test number: "+testNumber;
    return id;
} 
```

每次运行测试时都运行此功能是否耗时，或者我可以这样做而不用担心海岸？

如果答案是“耗时”，你会建议我每次运行测试时做什么以区分每个测试？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T07:32:03.153

关于`SharedPreferences`.

SharedPreferences 在首次加载后缓存，因此加载数据的磁盘访问将花费时间但一次。您可以尝试在测试套件的早期加载 SharedPreferences 以避免这种损失。

为了持久化您的数据，您应该选择[SharedPreferences.Editor.apply()](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#apply%28%29)而不是[SharedPreferences.Editor.commit()](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit%28%29)因为 appy 是异步的。但请务必阅读有关两者的文档，以查看哪一个适用于您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:57:27.707

这个问题已经有了答案，但如果其他人来并正在寻找代码示例，我将这个实用程序类放在一起用于与 SharedPreferences 进行交互。

调用 commit() 将使用 apply() 方法（如果可用），否则在旧设备上将默认返回 commit() ：

```
public class PreferencesUtil {

    SharedPreferences prefs;
    SharedPreferences.Editor prefsEditor;
    private Context mAppContext;
    private static PreferencesUtil sInstance;

    private boolean mUseApply;

    //Set to private
    private PreferencesUtil(Context context) {
        mAppContext = context.getApplicationContext();
        prefs = PreferenceManager.getDefaultSharedPreferences(mAppContext);
        prefsEditor = prefs.edit();

        //Indicator whether or not the apply() method is available in the current API Version
        mUseApply = Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD;
    }

    public static PreferencesUtil getInstance(Context context) {
        if (sInstance == null) {
            sInstance = new PreferencesUtil(context);
        }
        return sInstance;
    }

    public boolean getBoolean(String key, boolean defValue) {
        return prefs.getBoolean(key, defValue);
    }

    public int getInt(String key, int defValue) {
        return prefs.getInt(key, defValue);
    }

    public String getString(String key, String defValue) {
        return prefs.getString(key, defValue);
    }

    public String getString(String key) {
        return prefs.getString(key, "");
    }

    public void putBoolean(String key, boolean value) {
        prefsEditor.putBoolean(key, value);
    }

    public void putInt(String key, int value) {
        prefsEditor.putInt(key, value);
    }

    public void putString(String key, String value) {
        prefsEditor.putString(key, value);
    }

    /**
     * Sincle API Level 9, apply() has been provided for asynchronous operations.
     * If not available, fallback to the synchronous commit()
     */
    public void commit() {
        if (mUseApply)
            //Since API Level 9, apply() is provided for asynchronous operations
            prefsEditor.apply();
        else
            //Fallback to syncrhonous if not available
            prefsEditor.commit();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:53:19.950

我注意到，当您`putInt()`对特定键使用第一次这样的方法时，可能会花费大量时间。此外，它应该等同于任何其他写入文件的方式。

# google-maps - 始终避免使用 ?

> ID：12567079
> 
> 赞同：0
> 
> 时间：2012-09-24T14:29:19.567
> 
> 标签：google-maps, iframe

Some days ago, some friends of mine told me to avoid using `<iframe>` for virtually *anything*, which of course includes Google Maps. That made me do some research and, among other things, find this thread in Quora (http://www.quora.com/Google-Maps/What-are-best-practices-and-recommendations-to-implement-Google-maps-within-an-iframe-on-a-webpage), which I think isn't conclusive, at least in my case. I've made a simple site which includes displaying a Google Map. I used an `<iframe>` because it is very simple and, as pointed out before, it is the option that Google offers within every map, so I guessed it was the optimal one.

My question is: using an `<iframe>` is always a bad solution, or in a simple case like mine (only displaying a location map), is it recommended?

Thank you all, please let me hear your thoughts on this, João

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:36:59.213

使用 an`iframe`就像在浏览器中加载了另一个页面。这需要资源。我认为这是避免它的建议。但自然地，解决方案是避免那些建议您*始终*避免某事的人。只需在有意义并知道在哪里停止时使用它。

# performance - 暗示做。vs 带有 IO 的显式循环

> ID：12567087
> 
> 赞同：1
> 
> 时间：2012-09-24T14:29:43.157
> 
> 标签：performance, io, fortran

我意识到这个问题之前已经被问[过](https://stackoverflow.com/questions/4563918/are-implied-do-loops-inneficient)，但不是在 IO 的上下文中。有没有理由相信：

```
!compiler can tell that it should write the whole array at once?
!but perhaps compiler allocates/frees temporary array?
write(UNIT) (/( arr(i), i=1,N )/) 
```

会比以下更有效率：

```
!compiler does lots of IO here?
do i=1,N
   write(UNIT) arr(i)
enddo 
```

对于打开为：

```
open(unit=UNIT,access='STREAM',file=fname,status='UNKNOWN') 
```

有可能这将与编译器选项一起使用以关闭缓冲写入......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:58:07.587

正如@HighPerformanceMark 所建议的，这是我设置的一个简单基准：

使用 gfortran：

```
 program main
  implicit none
  include 'mpif.h'
  integer, parameter :: N = 1000000 
  integer :: unit = 22
  integer i
  real*8 arr(N)
  real*8 t1
  integer repeat
  external test1
  external test2
  external test3

  repeat=15

  call MPI_INIT(i)

  arr = 0
  call timeit(test1,repeat,arr,N,t1)
  print*,t1/repeat

  call timeit(test2,repeat,arr,N,t1)
  print*,t1/repeat

  call timeit(test3,repeat,arr,N,t1)
  print*,t1/repeat

  call MPI_Finalize(i)

  end

  subroutine timeit(sub,repeat,arr,size,time)
  include 'mpif.h'
  external sub
  integer repeat
  integer size
  real*8 time,t1
  real*8 arr(size)
  integer i
  time = 0
  do i=1,repeat
     open(unit=10,access='STREAM',file='test1',status='UNKNOWN')
     t1 = mpi_wtime()
     call sub(10,arr,size)
     time = time + (mpi_wtime()-t1)
     close(10)
  enddo

  return
  end

  subroutine test1(ou,a,N)
  integer N
  real*8 a(N)
  integer ou
  integer i
  do i=1,N
     write(ou),a(i)
  enddo
  return
  end

  subroutine test2(ou,a,N)
  integer N
  real*8 a(N)
  integer ou
  integer i
  write(ou),(a(i),i=1,N)
  return
  end

  subroutine test3(ou,a,N)
  integer N
  real*8 a(N)
  integer ou
  write(ou),a(1:N)
  return
  end 
```

我的结果是（缓冲的）：

```
temp $ GFORTRAN_UNBUFFERED_ALL=1 mpirun -np 1 ./test
   6.2392100652058922     
   3.3046503861745200     
   9.76902325948079409E-002 
```

（无缓冲）：

```
temp $ GFORTRAN_UNBUFFERED_ALL=0 mpirun -np 1 ./test
  2.7789104779561362     
  0.15584923426310221     
  9.82964992523193415E-002 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:36:57.707

我使用 gfortran (4.7.2 20120921) 和 ifort (13.0.0.079 Build 20120731) 编译并运行了上述基准代码。我的结果如下：

### gfortran

```
 UNBUFFERED                BUFFERED
test1:    1.2614487171173097        0.20308602650960286     
test2:    1.0525423844655355        3.4633986155192059E-002
test3:    5.9630711873372398E-003   6.0543696085611975E-003 
```

### 伊福特

```
 UNBUFFERED                BUFFERED
test1:    1.33864809672038          0.171342913309733
test2:    6.001885732014974E-003    6.095488866170247E-003
test3:    5.962880452473959E-003    6.007925669352213E-003 
```

在这两种情况下，显式循环似乎`test1`是迄今为止最不利的（没有设置任何优化标志）。`write(ou), (a(i), i=1, N)`此外，使用英特尔编译器，无论您运行（案例 2）还是`write(ou), a(1:N)`（案例 3，与本案例中的简单 情况相同） ，执行时间都没有显着差异`write(ou), a`。

顺便说一句，对于这个单线程进程，您也可以只使用 fortran 90（或 95？）内在子例程`cpu_time`，它对所有线程求和并以秒为单位返回时间。否则还有`system_clock`，它可以将经过的时钟周期数和时钟速率作为整数返回，可能精度更高。

# c# - T4 模板：当模板使用的某些类被修改时，有什么方法可以让模板运行？

> ID：12567090
> 
> 赞同：5
> 
> 时间：2012-09-24T14:29:45.437
> 
> 标签：c#, t4

我制作了一个简单的设计时模板，该模板使用位于同一项目中的枚举。该模板为该枚举类型中的每个变量生成一个类定义。

我注意到无论如何更改和保存 .tt 文件都会使其再次生成 c# 代码。我希望我可以设置解决方案，以便如果我更改枚举然后保存，那么模板也可能会再次启动源。这样当我想添加新类型时，我可以添加一个变量枚举定义，也许只是按保存。

目前我必须这样做：

1.  将变量添加到其 .cs 文件中的枚举定义。
2.  重新编译项目。
3.  在模板 .tt 文件上“运行自定义工具”。
4.  然后需要再次编译以编译 t4 生成的源代码。

那么，也许有一种方法可以让模板“检测”它使用的另一个源中的变化，并表现得像它本身已经被修改过一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:44:33.120

1.  首先安装[T4 Toolbox](http://t4toolbox.codeplex.com/)。它添加了许多功能，使处理 T4 文件变得更加容易。

2.  将 .cs 文件的自定义工具属性更改为`T4ScriptFileGenerator`. 这将在 .cs 文件下创建一个新的 .tt 文件。（有关更多信息，请查看 T4 工具箱的作者[Oleg Sych 的这篇博文）。](http://www.olegsych.com/2009/11/t4-toolbox-automatic-template-transformation/)现在，只要您保存原始 .cs 文件，T4 Toolbox 就会运行匹配的 .tt 文件。

3.  在这个新文件中，您可以添加读取枚举的代码。但是，您似乎正在对生成的程序集使用反射，每次进行更改时都需要重新构建项目。请改用 Visual Studio[`EnvDTE`](http://msdn.microsoft.com/en-us/library/envdte.aspx)来阅读您的`enum`. 您可以在 IDE 中访问已解析 C# 文件的抽象语法树，而无需对其进行编译。

# api - Default page size for Google docs

> ID：12567091
> 
> 赞同：4
> 
> 时间：2012-09-24T14:29:48.670
> 
> 标签：api, documents

We have a system that generates documents using the Google API, we would like the page set-up to default to A4 for all documents we generate. We have set the default as A$ in the Google Doc settings but this doesn't carry through for files created using the API.

Is there something we need to set in the API call to generate the doc?

Thanks in advance, David

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:18:45.550

> 我们需要在 API 调用中设置什么来生成文档吗？

不幸的是，在文件创建或文件更新时，API 似乎不支持此选项。Google Docs/Drive 将页面设置视为应用程序设置，而不是每个文件的设置。

以下是您可以指定的有关文件的元数据的完整列表：[https ://developers.google.com/drive/v2/reference/files](https://developers.google.com/drive/v2/reference/files)

# jquery - Adding limitations to jQuery Autocomplete

> ID：12567098
> 
> 赞同：0
> 
> 时间：2012-09-24T14:30:29.520
> 
> 标签：jquery, autocomplete

I'm working on a new local project where I have lots of street names added to my database. I'm pulling these for making the autocomplete script work. Everything is good so far, however, I need to make 2 modifications to my existing script.

First one: adding the matcher.slice(0,10) to work with my current code // to make sure only 10 suggestions are shown at a time Second one: blocking free typing in the input field. So if the street name is Čačanska, block new entries like Čačanskablah. jsfiddler examples added below

```
<script>
    $(function() {
var names = [ "Čačanska", "Čajetinska", "Čantavirski Put", "Čapajeva", "Čavoljska", "Čede Žice", "Čikerijska", "Đakovska", "Đerđa Dože", "Đerđa Lukača", "Đerda Dože", "Đerdapska", "Đeri Ferenca", "Đevđelijska", "Đorđa Natoševića", "Đorda Natoševica", "Đule Valija", "Đurđinska", "Đurdinska", "Đure Đakovića", "Đure Daničića", "Đure Stantića", "Šabačka", "Šajkaška", "Šamačka", "Šandora Lifke", "Šandora Petefija", "Šantićeva", "Šarplaninska", "Šebešićka", "Šekspirova", "Šenoina", "Šibenska", "Šidska", "Šime Ivića", "Šime Tikvickog", "Šimeta Tikvickog", "Široki Progon" ];

 var accentMap = {
            "š": "s",
            "ć" : "c",
            "č" : "c",
            "ž" : "z",
            "đ" : "d",
            "s" : "š",
            "c" : "č",
            "c" : "ć",
            "z" : "ž",
            "d" : "đ",
            "Š": "S",
            "Ć" : "C",
            "Č" : "C",
            "Ž" : "Z",
            "Đ" : "D",
            "S" : "Š",
            "C" : "Č",
            "C" : "Ć",
            "Z" : "Ž",
            "D" : "Đ"
        };
        var normalize = function( term ) {
            var ret = "";
            for ( var i = 0; i < term.length; i++ ) {
                ret += accentMap[ term.charAt(i) ] || term.charAt(i);
            }
            return ret;
        };

        $( "#addr" ).autocomplete({
            source: function( request, response ) {
                var matcher = new RegExp( $.ui.autocomplete.escapeRegex( request.term ), "i" );
                response( $.grep( names, function( value ) {
                    value = value.label || value.value || value;
                    return matcher.test( value ) || matcher.test( normalize( value ) );
                }));

                }
        });
    });
</script> 
```

First one example: [http://jsfiddle.net/andrewwhitaker/vqwBP/](http://jsfiddle.net/andrewwhitaker/vqwBP/)

Second one example: [http://jsfiddle.net/prCsm/](http://jsfiddle.net/prCsm/)

so basically, I would like to add both examples to my existing code, but no matter what I do, the autocomplete stops working.. thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:20:15.917

在等待有人帮助我时，我仍在尝试自己解决...

“一次显示 10 个结果”的解决方案如下

```
$( "#addr" ).autocomplete({
    source: function( request, response ) {
        var matcher = new RegExp( $.ui.autocomplete.escapeRegex( request.term ), "i" );
        var results = $.grep( names, function( value ) {
            value = value.label || value.value || value;
            return matcher.test( value ) || matcher.test( normalize( value ) );
                       })
            results = results.slice(0,10);
        response( results );
        }
}); 
```

# c# - c# 如何从 XML 文件反序列化并在 windows 窗体中显示属性？

> ID：12567099
> 
> 赞同：-1
> 
> 时间：2012-09-24T14:30:30.097
> 
> 标签：c#, xml-serialization

我有一个 XML 文件和一个表示 XML 结构的类。我已将 XML 文件反序列化到类中。我想在表单中显示所有属性。任何人都可以建议是否可能以及如何将 XML 反序列化为 datagridview？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:46:05.310

在大多数情况下，反序列化涉及具有有效的类结构和/或对象来将事物反序列化为，无论是 Xml 反序列化、二进制还是 SOAP 等等等。你有这个类，所以 de -serialize 步骤很简单，只需创建序列化程序并调用`deserialize(xml)`. 至于第二部分……好吧，您必须创建一个 datagridview 并绑定到该对象。

所以，是的，完全有可能。无法访问对象、类定义或 xml，这就是我能给你的所有信息。

一些基本的代码结构。

```
XmlSerializer ser = new XmlSerializer(typeof(MyClass));
MyClass obj = ser.DeSerialize(xmlDoc);

MyDataGridView.DataSource = obj; 
```

# .net - EF 连接字符串 App vs Application Name

> ID：12567101
> 
> 赞同：1
> 
> 时间：2012-09-24T14:30:41.333
> 
> 标签：.net, entity-framework-4

**应用程序**和**应用程序名称**在 EF4 连接字符串中的含义相同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:41:37.090

是的，EntityConnection 中 ConnectionString 的那些属性是相同的。见[这里](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)。

> **App** - 应用程序名称的同义词。
> 
> **应用程序名称**- 应用程序的名称，如果未提供应用程序名称，则为“.NET SQLClient 数据提供程序”。应用程序名称可以为 128 个字符或更少。

# c# - 在 ClickOnce 应用程序中使用 EventLog

> ID：12567103
> 
> 赞同：6
> 
> 时间：2012-09-24T14:30:51.280
> 
> 标签：c#, clickonce, event-log, eventlog-source

我有一个跨多个 ClickOnce 应用程序使用的库。如果此库中出现错误，我想将错误写入 windows `EventLog`。

我找到了一篇关于如何的[知识库文章](http://support.microsoft.com/kb/307024)，但似乎这需要管理员权限才能搜索源。具体来说，它在尝试搜索`Security`事件日志时会阻塞。

有没有办法解决这个问题并写入 ClickOnce 应用程序中的事件日志？我看到有人[试图写信给已知来源](https://stackoverflow.com/q/7024260/1111886)，但他们似乎无法找到始终可用的来源。

**编辑：**

根据此处的答案，我创建了一个包含在我的应用程序中的程序，我可以在第一次运行时运行它来设置可以获得管理员权限的事件源。但是，一旦创建了源，似乎我仍然无法写入它。

```
 /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        if (!EventLog.SourceExists("ATE"))
        {
            EventLog.CreateEventSource("ATE", "Application");
        }
    } 
```

正确创建源（相当于 Yannick Blondeau 提供的注册表编辑）。当我在我的非提升应用程序中写入源时，我收到一个新错误，但它仍然不起作用。新的错误是：

`Cannot open log for source 'ATE'. You may not have write access.`

**编辑2：**

我现在一直在尝试通过[CustomSD key](http://msdn.microsoft.com/en-us/library/aa363648.aspx)上的注册表编辑使其工作。我尝试添加 (A;;0x7;;;AU) 为经过身份验证的用户提供完全访问权限，但它似乎没有任何效果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T06:03:29.697

不幸的是，事件源需要创建管理权限。但是，您不需要管理员权限即可写入事件日志或从中读取。

有两种方法可以解决这个问题。

在以管理员身份安装应用程序时添加新的事件源。

您创建一个以管理员身份运行的简单应用程序来配置您的应用程序。这甚至可以包含在安装程序中。

如果您没有或不想要安装程序，请以管理员身份将该应用程序加载到计算机上并运行该程序一次。如果事件源不存在，您的应用启动应该配置事件源，对吗？（好吧，这是三种方式。）

此代码片段来自 microsoft： http: [//msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx)，旨在以管理员用户身份运行。

```
using System;
using System.Diagnostics;
using System.Threading;

class MySample
{
    public static void Main()
    {
        // Create the source, if it does not already exist. 
        if (!EventLog.SourceExists("MySource"))
        {
             //An event log source should not be created and immediately used. 
             //There is a latency time to enable the source, it should be created 
             //prior to executing the application that uses the source. 
             //Execute this sample a second time to use the new source.
             EventLog.CreateEventSource("MySource", "MyNewLog");
             Console.WriteLine("CreatedEventSource");
             Console.WriteLine("Exiting, execute the application a second time to use the source.");
            // The source is created.  Exit the application to allow it to be registered. 
            return;
        }
        // Create an EventLog instance and assign its source.
        EventLog myLog = new EventLog();
        myLog.Source = "MySource";

        // Write an informational entry to the event log.    
        myLog.WriteEntry("Writing to event log.");
    }
} 
```

我知道这可能不是你所追求的，但我认为这是做到这一点的唯一方法。

**编辑 1：添加了更多代码**

```
public class EventLogger
{
    private const string logName = "Application";
    private static string appName = "";
    private static bool sourceExists = false;

    public static string AppName
    {
        get { return appName; }
        set { appName = value; }
    }

    public static void Init(string appName)
    {
        AppName = appName;
        sourceExists = EventLog.SourceExists(AppName);

        if (!sourceExists)
        {
            EventLog.CreateEventSource(AppName, logName);
            sourceExists = true;
        }
    }

    private static void Write(string entry, EventLogEntryType logType, int eventID)
    {
        if (sourceExists)
        {
            EventLog.WriteEntry(AppName, entry, logType, eventID);
        }
    }

    public static void Warning(string entry) { Write(entry, EventLogEntryType.Warning, 200); }
    public static void Warning(string entry, int eventID) { Write(entry, EventLogEntryType.Warning, eventID); }
    public static void Error(string entry) { Write(entry, EventLogEntryType.Error, 300); }
    public static void Error(string entry, int eventID) { Write(entry, EventLogEntryType.Error, eventID); }
    public static void Info(string entry) { Write(entry, EventLogEntryType.Information, 100); }
    public static void Info(string entry, int eventID) { Write(entry, EventLogEntryType.Information, eventID); }
} 
```

这是我实现在生产应用程序中使用的 EventLogger 类的方式。

如果您可以发布您的代码，我们可以进行比较。

我想到的一件事是，当我创建源时，我使用应用程序名称，但坚持使用应用程序日志文件。您是否还尝试创建新的日志文件。如果是这样，请检查它是否在事件查看器中创建。

**编辑 2：使用用户令牌值为零模拟用户**

这有点麻烦。

试试这个代码，包裹着事件编写代码。

```
System.Security.Principal.WindowsImpersonationContext wic = System.Security.Principal.WindowsIdentity.Impersonate(IntPtr.Zero);
// your code to write to event log or any to do something which needs elevated permission--
wic.Undo(); 
```

我没有尝试过，只是因为我的代码正在运行，它来自这里：[http ://sharenotes.wordpress.com/2008/03/18/cannot-open-log-for-source-you-may-not -具有写访问权限/](http://sharenotes.wordpress.com/2008/03/18/cannot-open-log-for-source-you-may-not-have-write-access/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-09T10:36:24.390

另一种方法是下载 ClickOnce setup.exe 文件，右键单击并以管理员身份运行。不是很令人满意，但似乎工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:30:54.350

在[ClickOnce 文档](http://msdn.microsoft.com/en-us/library/bb498306%28v=cs.95%29.aspx)中，据说如果运行 ClickOnce 应用程序的用户不是管理员，则应用程序将无法写入事件日志。

完整报价：

> 在 ClickOnce 部署之后，如果应用程序尝试将事件写入事件日志时该事件源尚不存在，应用程序将创建该事件源。如果用户不是管理员，则尝试失败并且应用程序不会记录任何事件。在这种情况下，您可以手动创建事件源。

要手动创建事件源，您必须在部署过程中在注册表中添加一个条目，如下所示：

```
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application\YourApp]
"EventMessageFile"="%SystemRoot%\\Microsoft.NET\\Framework\\v2.0.50727\\EventLogMessages.dll" 
```

这种方法将限制部署阶段的海拔需求。

# iphone - MPMoviePlayerController loadState doesn't switch to MPMovieLoadStatePlayable

> ID：12567106
> 
> 赞同：2
> 
> 时间：2012-09-24T14:31:01.663
> 
> 标签：iphone, video, mpmovieplayercontroller

I have a MPMoviePlayerViewController to play Movies in fullscreen. I checked the movies they play fine via Quicktime. The Problem is, that using the MPMoviePlayerViewController (Simulator and device) the Movie doesn't start playing(it's a video that is stored locally on the iPad btw).

```
NSString *path = [[NSBundle mainBundle]pathForResource:resource ofType:@"mov"];
self.mpviewController = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:path]];
[self.mpviewController.moviePlayer prepareToPlay];
self.mpviewController.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
self.mpviewController.moviePlayer.controlStyle = [self presentModalViewController:self.mpviewController animated:YES];

NSLog(@"%d",self.mpviewController.moviePlayer.loadState);

[self.mpviewController.moviePlayer play]; 
```

Any Ideas what I am missing ?

tia

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:35:10.593

好吧，我不知道那是什么。我最终用这段代码编写了一个新的视图控制器——它有效：

```
NSURL *url = [NSURL fileURLWithPath:self.urlPath];

self.playerController = [[MPMoviePlayerController alloc] initWithContentURL: url];
CGRect bounds = CGRectMake(0, 0, 1024, 748);
self.playerController.scalingMode = MPMovieScalingModeNone;

[self.playerController.view setFrame:bounds];

[self.view addSubview:self.playerController.view];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayerDidExitFullscreenCallback:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:self.playerController];

self.playerController.controlStyle = MPMovieControlStyleFullscreen;
[self.playerController setFullscreen:YES animated:YES];
[self.playerController play]; 
```

# coldfusion - Coldfusion & Amazon S3 - Setting the Content Type?

> ID：12567107
> 
> 赞同：3
> 
> 时间：2012-09-24T14:31:02.530
> 
> 标签：coldfusion, amazon-s3

I've used Amazon S3 for content for a while now, but I've just run across an instance where I need to set the content type for uploaded images (need to do this at the point of upload). I've tried a few things, but can't seem to nail the correct syntax for StoreSetMetaData.

This is how I'm doing it right now...

```
<cfset meta = [{content_type="Image"}]>

<cfset StoreSetMetadata("s3://mybucket/#bgfull#", "#meta#")> 
```

The rest of the code isnt necessary, so I've just pasted in the relevant 2 lines.

Using this syntax, I get the following error;

"500 You have attempted to dereference a scalar variable of type class coldfusion.runtime.Array as a structure with members."

Pointers much appreciated! I haven't been able to track down a single syntax example for this.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T14:41:08.167

根据[StoreSetMetadata](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSd160b5fdf5100e8f-4439fdac128193edfd6-7efc.html)的在线文档，第二个参数是结构类型，而不是数组类型。

尝试

```
<cfset meta = {content_type="Image"}>

<cfset StoreSetMetadata("s3://mybucket/#bgfull#", meta)> 
```

# css - IE9 在显示设置为 125% 时向元素添加内联宽度

> ID：12567115
> 
> 赞同：1
> 
> 时间：2012-09-24T14:31:18.093
> 
> 标签：css, internet-explorer-9, inline-styles

出于某种原因，当用户从控制面板将其显示设置为 125% 时，IE9 会为元素添加额外的宽度，如下所示：

```
<div class="container" id="main" style="width: 1500px">
<!-- Code goes here-->
</div> 
```

上面的内联样式（带宽度）是IE9添加的。IE8没有这个问题，肯定是Windows显示设置为125%触发的。Chrome 和 Firefox 也可以正确显示内容，而无需额外的样式。不要认为有人对此有解决方法或解决方法吗？无法控制用户的设置，但我已经看到其他网站正常呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:43:57.787

好的，所以我用条件注释和一些 jQuery 解决了这个问题：

```
<!--[if IE 9]>
  <script type="text/javascript">
      window.onload = function () {
        if ( $('#main').attr('style') !== 'undefined' ) {
          $('#main').removeAttr('style');
        }
      }
  </script>
<![endif]--> 
```

基本上，它会检查 IE 是否在有问题的元素上放置了“样式”属性，如果是，则删除该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T09:12:32.003

是的，或者如果您想对宽度和高度更具选择性

```
jQuery(document).ready(function () {
    removeInlineWidthHeightElements($('#main'));
});

function removeInlineWidthHeightElements(element) {
    element.attr('style', function (i, style) {
        return style.replace(/width[^;]+;?/g, '').replace(/height[^;]+;?/g, '');
    });
} 
```

[是否可以使用 jQuery 删除内联样式？](https://stackoverflow.com/questions/2465158/is-it-possible-to-remove-inline-styles-with-jquery)

# c# - 无论c#中的字符是什么，如何根据每三个字符分割一个字符串

> ID：12567121
> 
> 赞同：0
> 
> 时间：2012-09-24T14:31:31.137
> 
> 标签：c#

> **可能重复：**
> [.NET String.Format() 为数字添加千位逗号](https://stackoverflow.com/questions/105770/net-string-format-to-add-commas-in-thousands-place-for-a-number)

我正在尝试将逗号添加到表示层的数字中，并且需要强制转换然后将数字拆分为每三个字符，以便加入“，”。

所以如果我有这样的字符串

```
546546555 
```

所需的输出：

```
546,546,555 
```

其他时候，数字可能更长或更短：

```
254654 
```

所需的输出：

```
254,654 
```

是否可以以这种方式拆分然后用逗号连接？

太棒了！

编辑：

嗨，大家好，

非常感谢您的帮助。

要添加到这篇文章，我还找到了一种在 SQL 中执行此操作的方法：

SUBSTRING(CONVERT(varchar, CAST(NumItems AS money), 1), 0, LEN(CONVERT(varchar, CAST(NumDocs AS money), 1)) - 2) as [NumDocs]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:36:57.137

与其手动拆分字符串，不如将其转换为数字（或将其保留为数字），并`ToString`使用适当的格式调用该方法：

**例子**

```
int value = 546546555;
string displayValue = value.ToString("#,#"); 
```

有关不同的格式值，请参阅[此 MSDN 页面：](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.aspx)

C - 货币格式

D - 十进制格式

E - 科学格式

F - 定点格式

G - 一般格式

**N - 数字格式**

P - 百分比格式

R - 往返格式

X - 十六进制格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:36:36.827

您应该通过将字符串转换为整数来做到这一点，使用`Parse`or 理想情况下`TryParse`并使用字符串格式来显示它：

```
var str = "546546555";
var formatted = String.Empty;
int value = 0;
if(int.TryParse(str,out value))
{
   formatted = value.ToString("#,#");
} 
```

现场示例：[http ://rextester.com/FHO11833](http://rextester.com/FHO11833)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:41:20.177

假设您不仅尝试输出数字，这里有一个快速功能，我相信它可以满足您的需求：

```
string splitter(string tosplit, int num, string splitstring)
    {
        string output = "";
        for (int i = 0; i < tosplit.Length; i += num)
            if (i + num < tosplit.Length)
                output += tosplit.Substring(i, num) + ",";
            else
                output += tosplit.Substring(i);
        return output;
    } 
```

在这里，输出`splitter("546546555", 3, ",")`将是`546,546,555`

不过，这对于数字来说并不理想，因为其他答案将完美地涵盖这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:53:07.770

不是很好的代码，但它可以工作。

```
public static string GetString(string val, int number)
        {
            List<string> res = new List<string>();
            res.Add("");

            int counter = 0, i = 0;
            while (i < val.Length)
            {
                while (res[counter].Length < number && i < val.Length)
                {
                    res[counter] += val[i];
                    i++;
                }
                res.Add("");
                counter++;
            }

            return string.Join(",", res.Where(r => !string.IsNullOrEmpty(r)));
        } 
```

val - 您的输入字符串编号 - 您要拆分的字符数，在您的情况下等于 3

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T15:05:03.427

基因 S 和丹似乎有答案恕我直言。使用内置格式的好处是您可以编写可本地化的代码。例如，“，”是美国的数字组分隔符，但“.” 在西班牙使用。

```
 var val = 12345678;
        CultureInfo c = CultureInfo.CurrentCulture;
        Application.CurrentCulture = new CultureInfo("EN-us");
        var s = String.Format("{0:#,#}", val);
        Application.CurrentCulture = new CultureInfo("ES-es");
        var i = String.Format("{0:#,#}", val);
        Application.CurrentCulture = c; 
```

# mysql - Linux Mint 在系统启动时触发对 mysql 的缓慢查询

> ID：12567122
> 
> 赞同：4
> 
> 时间：2012-09-24T14:31:36.277
> 
> 标签：mysql, linux, configuration, debian, linux-mint

在我安装 MySQL 并在其上导入一些数据库后，我的基于 debian 的启动速度非常慢。寻找一些声明，我在启动过程中找到了这个：

```
mysql> show full processlist;
+----+------------------+-----------+------+---------+------+----------------+----------------------------------------------------------------------+
| Id | User             | Host      | db   | Command | Time | State          | Info                                                                 |
+----+------------------+-----------+------+---------+------+----------------+----------------------------------------------------------------------+
|  9 | debian-sys-maint | localhost | NULL | Query   |   12 | Opening tables | select count(*) into @discard from `information_schema`.`PARTITIONS` |
| 10 | root             | localhost | NULL | Query   |    0 | NULL           | show full processlist                                                |
+----+------------------+-----------+------+---------+------+----------------+----------------------------------------------------------------------+
2 rows in set (0.00 sec) 
```

这是造成麻烦的声明：

```
select count(*) into @discard from `information_schema`.`PARTITIONS` 
```

我有 +-10 个数据库，总计超过 8gb 的数据。

是否有任何配置可以在系统启动时禁用此查询？如果是，为什么在引导期间运行它？

**信息**

我有一个没有自定义配置的标准 MySQL 安装。

最好的祝福。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T17:19:10.447

Linux Mint 所基于的 Debian 似乎具有在 mysql 服务器启动或重新启动时执行的脚本，以检查损坏的表并为此发出警报。

在我的 Debian 服务器中，罪魁祸首似乎是`/etc/mysql/debian-start`bash 脚本，该脚本又调用`/usr/share/mysql/debian-start.inc.sh`，因此请检查两个脚本并注释掉迭代所有表的函数，快速查看似乎如下：

```
check_for_crashed_tables; 
```

这是从`debian-start`我上面提到的脚本中调用的。

# xcode - 在命令行上运行 xcodebuild，在哪里查看日志？

> ID：12567128
> 
> 赞同：3
> 
> 时间：2012-09-24T14:31:51.290
> 
> 标签：xcode, xcodebuild

我想在从命令行构建 xcode (4.5) 项目时查看日志，因为命令行窗口本身的输出太长且混乱。日志是否有一个标准的位置，我似乎找不到它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-09-12T14:04:31.870

有登录`~/Library/Developer/Xcode/DerivedData`- 您必须弄清楚哪个子文件夹用于您的构建，但其中有`Logs/Build/UUID.xcactivitylog`

如果您将该文件重命名为 .zip 并解压缩，则会在该构建文件中记录一个文本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:43:39.307

像所有命令行工具一样，输出进入标准输出，错误进入标准错误。默认情况下，这是您的命令行终端。如果您想在其他地方使用管道和/或重定向。检查您的命令行解释器文档以获取更多信息（可能您正在使用 bash，所以请检查`man bash`）。

# java - JBoss Guvnor, can I create arrays and/or maps in a Declarative Model?

> ID：12567136
> 
> 赞同：2
> 
> 时间：2012-09-24T14:32:13.813
> 
> 标签：java, drools, rule-engine

I'm using Drools Guvnor in JBoss. I am creating a Declarative Model object. I can add simple types such as String, Boolean, etc. Is it possible to add an array, List and/or Map in my object?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T11:14:43.693

可以在声明性模型中使用 Lists 和 Maps。

我使用 Drools Guvnor 5.5.0.Final 并这样做：

1.  创建新的声明性模型

2.  添加新的事实类型：
    名称：人

3.  添加字段：
    名称：字符串
    饮料：字符串

4.  添加新的事实类型：
    名称：Party

5.  添加字段：
    人员：java.util.List

如果您单击“查看源代码”，您应该会得到如下信息：

```
declare Person
    name: String
    drink: String
end

declare Party
    people: java.util.List
end 
```

为了使用该模型，我在 Guvnor 中创建了一个“技术规则”，如下所示：

```
when
then
      Person pa = new Person();
      pa.setName("A");
      pa.setDrink("Lager");
      Person pb = new Person();
      pb.setName("B");
      pb.setDrink("IPA");
      Party p = new Party();
      p.setPeople(new java.util.ArrayList());
      p.getPeople().add(pa);
      p.getPeople().add(pb);

      insert(pa);
      insert(pb);
      insert(p); 
```

泛型似乎在流口水中效果不佳。我在构建包时遇到了一些编译错误。

我希望它有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:42:32.180

我认为这是不可能的（通过尝试和阅读文档）。我在 Guvnor 中读到过，您可以从现有的 POJO 模型（jar）中扩展类，并以这种方式使它们具有声明性。

# php - Mediawiki shows own PHP source code

> ID：12567139
> 
> 赞同：2
> 
> 时间：2012-09-24T14:32:20.130
> 
> 标签：php, mediawiki

again, I have a strange fail in the Mediawiki. If a link is formated like this:

www.path-to-my-wiki.net/wiki_path/index.php?title=blah

The Server will prompt out the source code (no joke) of the php file!

(Sample:)

```
<?php

/**
 * This is the main web entry point for MediaWiki.
 *
 ...
 *
 * @file
 */

# Initialise common code
$preIP = dirname( __FILE__ );
require_once( "$preIP/includes/WebStart.php" );

# Initialize MediaWiki base class
require_once( "$preIP/includes/Wiki.php" );
$mediaWiki = new MediaWiki();

wfProfileIn( 'main-misc-setup' );
OutputPage::setEncodings(); # Not really used yet

$maxLag = $wgRequest->getVal( 'maxlag' );
if( !is_null( $maxLag ) && !$mediaWiki->checkMaxLag( $maxLag ) ) {
    exit;
} 
```

If the link will be like this:

www.path-to-my-wiki.net/wiki/blah

The Server will not prompt out the PHP source code, but the desired page.

I have not changed anyting regarding the webserver and Mediawiki configuration, and this wiki is not reachable from the internet. But I doubt that I am not the only one, who is working with this Mediawiki.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:40:50.223

听起来您的 Apache 配置没有为`.php`扩展分配处理程序，但为重写分配了处理程序。您很可能需要提供您的 .htaccess 以获得更多答案。

# ruby-on-rails - 在 Rails 中对 Time 类进行猴子修补会导致时区混乱

> ID：12567142
> 
> 赞同：2
> 
> 时间：2012-09-24T14:32:28.760
> 
> 标签：ruby-on-rails, ruby

我有一个在 Ruby 1.8.7 上运行的 Rails 3.2.6 应用程序。该应用程序配置为使用中欧时间（即 UTC+2）作为其时区，在我的初始化程序中，我使用猴子补丁`Time`和`DateTime`一些自定义功能。

奇怪的是，在我的猴子补丁方法中，Time/DateTime 实例的行为就像它们是 UTC（但使用时区调整值），但在应用程序的其他地方它们尊重时区配置。

所以，作为一个例子，在`config/initializers/monkey_patching.rb`我有以下

```
module MonkeyPatching
  def foo
    inspect
  end
end

class Time
  include MonkeyPatching
end

class DateTime
  include MonkeyPatching
end 
```

现在，在应用程序的其他地方（或在 Rails 控制台中），这就是我得到的

```
model.created_at.inspect #=> "Mon, 24 Sep 2012 15:06:34 CEST +02:00" (correct!)
model.created_at.foo     #=> "Mon Sep 24 15:06:34 UTC 2012"          (all wrong!) 
```

`inspect`因此， “直接”调用`model.created_at`会给我正确的、时区调整的结果。但是调用修补方法`foo`- 它也只是调用`inspect`! - 将时间视为 UTC，即使不是。

更让我困惑的是，这只发生在模型属性上。即在 rails 控制台中，我得到相同且正确的结果 for`DateTime.now.inspect`和 for `DateTime.now.foo`。但是对 DateTime 属性做同样的事情，给我上面看到的奇怪行为。

知道为什么会发生这种情况（以及如何解决它）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:45:14.937

Rails`ActiveSupport::TimeWithZone`用于时间属性，而不是常规的 Ruby `Time`。也试试补丁`ActiveSupport::TimeWithZone`。

```
class ActiveSupport::TimeWithZone
  include MonkeyPatching
end 
```

# c - 读取无限量的行，直到用户在 C 中输入（两次）

> ID：12567149
> 
> 赞同：0
> 
> 时间：2012-09-24T14:32:50.617
> 
> 标签：c, scanf, readline

我无法解决这个问题。我需要用户输入一个字符串，然后按回车键，然后是另一个字符串。当他/她完成后再次按回车键（最后一个字符串只有 \n 字符，所以我知道何时停止）。

```
char * buff = malloc (100);

 printf("Type in strings, to finish hit enter\n");

 do{
       scanf (" %[^\n]",buff);
       //do some other stuff with the string
  } while(*buff);            

  printf("You have finished typing strings\n"); 
```

我想出的这种方法对我没有用，因为 [^\n] 命令告诉函数读取除 \n 之外的所有内容，这意味着 \n 保存在控制台缓冲区中。如果我只是这样做

```
while(*buff)
  {
      scanf ("%s",buff);
  } 
```

如果我按 Enter 它什么也不做。还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:35:54.343

是的，`scanf`实际上是在寻找角色。你想要的是`gets`（得到一条线）。

[编辑] 正如 Daniel Fischer 所指出的：

> `gets`已（最终）从语言中删除。甚至之前，man page 早就说过**Never use`gets()`**

看来我的建议不是最好的。我想这意味着使用`fgets`，因为它可以防止缓冲区溢出。与 不同`gets`，换行符也将存储在字符串中，程序员有责任检查它们。

```
const size_t bufsize = 100;
char buf[bufsize];

while( fgets(buf, bufsize, stdin) != NULL )
{
    if( buf[0] == '\n' ) break;

    /* Do something with your string... */
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T14:42:11.393

除了稻田指出的（使用gets得到一整行）之外，条件

```
while(*buff); 
```

永远不会是假的，除非用户输入是空字符（如 ASCII 值 0）。换行符 (\n) 的 ASCII 值为 10，`true`在条件语句中计算为 。

试试这个：

```
while(strlen(*buff) > 0); 
```

# python - 如何在多对多表中添加列（Django）

> ID：12567151
> 
> 赞同：46
> 
> 时间：2012-09-24T14:33:02.253
> 
> 标签：python, django, many-to-many

从 Django Book 的示例中，我了解是否按以下方式创建模型：

```
from xxx import B

class A(models.Model):
    b = ManyToManyField(B) 
```

Django 将在表 A 之外创建一个新表（A_B），该表具有三列：

*   ID
*   援助
*   投标

但是现在我想在表A_B中添加一个新列，如果我使用普通SQL会很容易，但是现在任何人都可以帮助我怎么做？我在这本书中找不到任何有用的信息。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-09-24T14:36:09.290

使用 django 也很容易！您可以使用`through`定义自己的多对多中间表

[文档](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)提供了一个解决您的问题的示例：

```
Extra fields on many-to-many relationships

class Person(models.Model):
    name = models.CharField(max_length=128)

    def __unicode__(self):
        return self.name

class Group(models.Model):
    name = models.CharField(max_length=128)
    members = models.ManyToManyField(Person, through='Membership')

    def __unicode__(self):
        return self.name

class Membership(models.Model):
    person = models.ForeignKey(Person, on_delete=models.CASCADE)
    group = models.ForeignKey(Group, on_delete=models.CASCADE)
    date_joined = models.DateField()
    invite_reason = models.CharField(max_length=64) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-16T07:39:02.437

在幕后，Django 自动创建了一个直通模型。可以修改此自动模型外键列名称。

我无法测试所有场景的含义，到目前为止它对我来说都很好。

使用 Django 1.8 及更高版本的[_meta api](https://docs.djangoproject.com/en/1.10/ref/models/meta/)：

```
class Person(models.Model):
    pass

class Group(models.Model):
    members = models.ManyToManyField(Person)

Group.members.through._meta.get_field('person').column = 'alt_person_id'
Group.members.through._meta.get_field('group' ).column =  'alt_group_id'

# Prior to Django 1.8 _meta can also be used, but is more hackish than this
Group.members.through.person.field.column = 'alt_person_id'
Group.members.through.group .field.column =  'alt_group_id' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-02-26T20:12:44.907

正如@dm03514 回答的那样，通过模型明确定义M2M 并在那里添加所需的字段，确实很容易将列添加到M2M 表中。

**但是，如果您想向所有 m2m 表添加一些列 - 这种方法是不够**的，因为它需要通过模型来定义 M2M，以便`ManyToManyField`在整个项目中定义所有的。

**在我的例子中，我想在 Django “在后台”生成的所有 M2M 表中添加一个“创建的”时间戳列，**而无需为`ManyToManyField`项目中使用的每个字段定义单独的模型。我想出了一个简洁的解决方案，如下所示。干杯!

### 介绍

当 Django 在启动时扫描你的模型时，它会自动为每个`ManyToManyField`没有明确定义它的模型创建一个隐式的直通模型。

```
class ManyToManyField(RelatedField):
    # (...)

    def contribute_to_class(self, cls, name, **kwargs):
        # (...)
        super().contribute_to_class(cls, name, **kwargs)

        # The intermediate m2m model is not auto created if:
        #  1) There is a manually specified intermediate, or
        #  2) The class owning the m2m field is abstract.
        #  3) The class owning the m2m field has been swapped out.
        if not cls._meta.abstract:
            if self.remote_field.through:
                def resolve_through_model(_, model, field):
                    field.remote_field.through = model
                lazy_related_operation(resolve_through_model, cls, self.remote_field.through, field=self)
            elif not cls._meta.swapped:
                self.remote_field.through = create_many_to_many_intermediary_model(self, cls) 
```

来源：[ManyToManyField.contribute_to_class()](https://github.com/django/django/blob/a6b3938afc0204093b5356ade2be30b461a698c5/django/db/models/fields/related.py#L1626)

为了创建这个隐式模型 `create_many_to_many_intermediary_model()`，Django 使用该函数构造新类，该类继承自`models.Model`并包含 M2M 关系双方的外键。来源：[django.db.models.fields.related.create_many_to_many_intermediary_model()](https://github.com/django/django/blob/a6b3938afc0204093b5356ade2be30b461a698c5/django/db/models/fields/related.py#L1093)

**为了通过表向所有自动生成的 M2M 添加一些列，您需要对该函数进行monkeypatch。**

### 解决方案

首先，您应该创建将用于修补原始 Django 函数的函数的新版本。为此，只需从 Django 源中复制函数的代码，并将所需的字段添加到它返回的类中：

```
# For example in: <project_root>/lib/monkeypatching/custom_create_m2m_model.py
def create_many_to_many_intermediary_model(field, klass):
    # (...)
    return type(name, (models.Model,), {
        'Meta': meta,
        '__module__': klass.__module__,
        from_: models.ForeignKey(
            klass,
            related_name='%s+' % name,
            db_tablespace=field.db_tablespace,
            db_constraint=field.remote_field.db_constraint,
            on_delete=CASCADE,
        ),
        to: models.ForeignKey(
            to_model,
            related_name='%s+' % name,
            db_tablespace=field.db_tablespace,
            db_constraint=field.remote_field.db_constraint,
            on_delete=CASCADE,
        ),
        # Add your custom-need fields here:
        'created': models.DateTimeField(
            auto_now_add=True,
            verbose_name='Created (UTC)',
        ),
    }) 
```

然后你应该将补丁逻辑包含在一个单独的函数中：

```
# For example in: <project_root>/lib/monkeypatching/patches.py
def django_m2m_intermediary_model_monkeypatch():
    """ We monkey patch function responsible for creation of intermediary m2m
        models in order to inject there a "created" timestamp.
    """
    from django.db.models.fields import related
    from lib.monkeypatching.custom_create_m2m_model import create_many_to_many_intermediary_model
    setattr(
        related,
        'create_many_to_many_intermediary_model',
        create_many_to_many_intermediary_model
    ) 
```

最后，您必须在 Django 启动之前执行修补。将此类代码放在 `__init__.py`Django 项目文件旁边的`settings.py`文件中：

```
# <project_root>/<project_name>/__init__.py
from lib.monkeypatching.patches import django_m2m_intermediary_model_monkeypatch
django_m2m_intermediary_model_monkeypatch() 
```

### 其他几件事值得一提

1.  **请记住，这不会影响过去在 db 中创建的 m2m 表**，因此，如果您在已经将`ManyToManyField`字段迁移到 db 的项目中引入此解决方案，则需要准备自定义迁移以添加您的自定义在monkeypatch之前创建的表的列。下面提供了示例迁移:)

    ```
    from django.db import migrations

    def auto_created_m2m_fields(_models):
        """ Retrieves M2M fields from provided models but only those that have auto
            created intermediary models (not user-defined through models).
        """
        for model in _models:
            for field in model._meta.get_fields():
                if (
                        isinstance(field, models.ManyToManyField)
                        and field.remote_field.through._meta.auto_created
                ):
                    yield field

    def add_created_to_m2m_tables(apps, schema_editor):
        # Exclude proxy models that don't have separate tables in db
        selected_models = [
            model for model in apps.get_models()
            if not model._meta.proxy
        ]

        # Select only m2m fields that have auto created intermediary models and then
        # retrieve m2m intermediary db tables
        tables = [
            field.remote_field.through._meta.db_table
            for field in auto_created_m2m_fields(selected_models)
        ]

        for table_name in tables:
            schema_editor.execute(
                f'ALTER TABLE {table_name} ADD COLUMN IF NOT EXISTS created '
                'timestamp with time zone NOT NULL DEFAULT now()',
            )

    class Migration(migrations.Migration):
        dependencies = []
        operations = [migrations.RunPython(add_created_to_m2m_tables)] 
    ```

2.  请记住，**提出的解决方案仅影响 Django 为`ManyToManyField`未定义 `through`模型**的字段自动创建的表。如果您已经有一些明确的 m2m through 模型，您将需要手动添加您的自定义需求列。

3.  修补后的`create_many_to_many_intermediary_model`功能也将适用于您`INSTALLED_APPS`设置中列出的所有 3rd 方应用程序的模型。

4.  最后但同样重要的是，请记住，**如果您升级 Django 版本，修补函数的原始源代码可能会更改 (!)**。设置一个简单的单元测试是个好主意，如果将来发生这种情况，它会警告你。

为此，请修改修补函数以保存原始 Django 函数：

```
# For example in: <project_root>/lib/monkeypatching/patches.py
def django_m2m_intermediary_model_monkeypatch():
    """ We monkey patch function responsible for creation of intermediary m2m
        models in order to inject there a "created" timestamp.
    """
    from django.db.models.fields import related
    from lib.monkeypatching.custom_create_m2m_model import create_many_to_many_intermediary_model
    # Save the original Django function for test
    original_function = related.create_many_to_many_intermediary_model
    setattr(
        create_many_to_many_intermediary_model,
        '_original_django_function',
        original_function
    )
    # Patch django function with our version of this function
    setattr(
        related,
        'create_many_to_many_intermediary_model',
        create_many_to_many_intermediary_model
    ) 
```

计算原始 Django 函数的源代码的哈希值，并准备一个测试，检查它是否仍然与修补它时相同：

```
def _hash_source_code(_obj):
    from inspect import getsourcelines
    from hashlib import md5
    source_code = ''.join(getsourcelines(_obj)[0])
    return md5(source_code.encode()).hexdigest()

def test_original_create_many_to_many_intermediary_model():
    """ This test checks whether the original Django function that has been
        patched did not changed. The hash of function source code is compared
        and if it does not match original hash, that means that Django version
        could have been upgraded and patched function could have changed.
    """
    from django.db.models.fields.related import create_many_to_many_intermediary_model
    original_function_md5_hash = '69d8cea3ce9640f64ce7b1df1c0934b8' # hash obtained before patching (Django 2.0.3)
    original_function = getattr(
        create_many_to_many_intermediary_model,
        '_original_django_function',
        None
    )
    assert original_function
    assert _hash_source_code(original_function) == original_function_md5_hash 
```

### 干杯

我希望有人会发现这个答案很有用:)

# excel - Excel：如何从条件中将注释作为单元格返回

> ID：12567167
> 
> 赞同：2
> 
> 时间：2012-09-24T14:34:02.570
> 
> 标签：excel, comments

如何从条件中将评论作为单元格返回。

例子：

```
=if(a1=0;insert comment on cell) 
```

插入评论并显示评论

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T15:03:40.510

我找不到使用默认工作表函数的任何方法，因此您可能必须为此声明自己的函数 - 如下所示：

```
Public Function GetComment(rng As Range) as String
  GetComment = rng.NoteText
 'also possible
 'GetComment = rng.Comment.Text
End Function 
```

将此函数保存到模块中，以便作为工作表函数访问。

然后用于`=if(a1=0;GetComment(A1))`返回评论。

*编辑：*

因为我可能误解了一点 - 这是一个版本，它向调用者单元格添加评论，将其内容设置为给定评论并使评论可见。

```
Public Function AddCmt(strComment As String) As String
  Dim rngCaller As Range
  If TypeName(Application.Caller) Like "Range" Then
    Set rngCaller = Application.Caller
    With rngCaller
      If .Comment Is Nothing Then
        .AddComment (strComment)
      Else
        .Comment.Text strComment
      End If
      .Comment.Visible = True
    End With
    'set caller-cell content to given comment
    AddCmt= strComment
  End If
End Function 
```

# iphone - relaunch the iphone app by AppDelegate programmatically

> ID：12567170
> 
> 赞同：-1
> 
> 时间：2012-09-24T14:34:03.860
> 
> 标签：iphone, ios, ipad, appdelegate

I'm new in iPhone, I created application that is started with UITabbarController with 4 items using AppDelegate. through the app I opened some views and I want to relaunch the AppDelegate again by using a code like:

```
[appdelegate presentModalViewController:myNavController animated:YES]; 
```

is this possible?

this is in my AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    NSMutableArray *array = [[NSMutableArray alloc] init];

    MaktabatyTableViewController *own = [[MaktabatyTableViewController alloc] initWithStyle:UITableViewStylePlain];
    UINavigationController *ownNavController = [[UINavigationController alloc] initWithRootViewController:own];
    [array addObject:ownNavController];

    NewestTableViewController *newest = [[NewestTableViewController alloc] initWithStyle:UITableViewStylePlain];
    UINavigationController *newestNavController = [[UINavigationController alloc] initWithRootViewController:newest] ;
    [array addObject:newestNavController];

    MostBuyTableViewController *mostbuy = [[MostBuyTableViewController alloc] initWithStyle:UITableViewStylePlain];
    UINavigationController *mostbuyNavController = [[UINavigationController alloc] initWithRootViewController:mostbuy];
    [array addObject:mostbuyNavController];

    FreeBooksTableViewController *free = [[FreeBooksTableViewController alloc] initWithStyle:UITableViewStylePlain];
    UINavigationController *freeNavController = [[UINavigationController alloc] initWithRootViewController:free];
    [array addObject:freeNavController];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = array;

    [self.window setBackgroundColor:[UIColor whiteColor]];
    [self.window addSubview:self.tabBarController.view];

    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];

    return YES; 
} 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:31:49.827

我想你正在寻找这样的东西..

一个登录屏幕，它是一个带有登录字段的简单视图，在登录时，这个屏幕是没有用的。主应用程序基于标签栏。

以及用户退出后显示的注销屏幕或屏幕。

我的一个应用程序中有这个要求，所以我制作了一个示例模板。也许它可以帮助您检查[这个](http://dl.dropbox.com/u/58723521/TabBar.zip)。

# javascript - Time Series not plotting

> ID：12567171
> 
> 赞同：0
> 
> 时间：2012-09-24T14:34:04.873
> 
> 标签：javascript, svg, d3.js, graph

I have some pretty simple code to plot a time series line graph. The x-scale is rendered correctly, however the line is not being rendered.

I am pretty sure that the issue we are facing here is with my function for calculating the x axis value, but I can't see what I might be doing wrong

My code for the graph is similar to this:

```
var data = getData();
var graph;
var line;

function getData() {
    var theDate = new Date(2012, 01, 01, 0, 0, 0, 0);
    var arr = [];
    for (var x = 0; x < 30; x++) {
        arr.push([theDate.getTime(), rand(100)]);
        theDate.setDate(theDate.getDate() + 1);
    }
    return arr;
}

function rand(max) {
    return Math.floor(Math.random() * (max + 1))
}

var m = [80, 80, 80, 80]; // margins
var w = 1000 - m[1] - m[3]; // width
var h = 400 - m[0] - m[2]; // height

// pretty sure the issue is which this line
var x = d3.time.scale().domain([new Date(data[0][0]), new Date(data[data.length - 1][0])]).range([0, w]);
var y = d3.scale.linear().domain([0, 100]).range([h, 0]);

line = d3.svg.line()
             .x(function (d, i) { return x(new Date(d[0])); })    
             .y(function (d) { return y(d[1]); }) 
             .interpolate("linear")

graph = d3.select("#graph").append("svg:svg")
              .attr("width", w + m[1] + m[3])
              .attr("height", h + m[0] + m[2])
              .append("svg:g")
              .attr("transform", "translate(" + m[3] + "," + m[0] + ")");

var xAxis = d3.svg.axis().scale(x).ticks(d3.time.days, 1).tickFormat(d3.time.format("%d"));

graph.append("svg:g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + h + ")")
          .call(xAxis);

var yAxisLeft = d3.svg.axis().scale(y).ticks(10).orient("left");

graph.append("svg:g")
          .attr("class", "y axis")
          .attr("transform", "translate(0,0)") //positon of the y axis
          .call(yAxisLeft);

graph.append("svg:path")
         .data([data])
         .attr("class", "line")
         .attr("transform", "translate(" + x(1) + ")")
         .attr("d", line)
         .transition()
         .duration(1500)
         .ease("linear")
         .attr("transform", "translate(" + x(0) + ")"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:39:02.067

我想通了，改变

```
graph.append("svg:path")
     .data([data])
     .attr("class", "line")
     .attr("transform", "translate(" + x(1) + ")")
     .attr("d", line)
     .transition()
     .duration(1500)
     .ease("linear")
     .attr("transform", "translate(" + x(0) + ")"); 
```

至

```
graph.append("svg:path")
     .data([data])
     .attr("class", "line") 
```

工作。

显然我的 x 轴转换不正确

# php - How to separate MVC folders out of application directory in codeigniter?

> ID：12567172
> 
> 赞同：0
> 
> 时间：2012-09-24T14:34:04.830
> 
> 标签：php, codeigniter

I'm very new at codeigniter. I was just wondering if there is anyway that I can separate the **controllers**, **models**, and **views** folders out of the application folder or put them in a sub-directory.

I understand it's not crucial but it would be easier to find when it's **just these three** folders in a separate folder.

For example the structure could be as a sub-directory:
-> application
   -> **MVC**
      -> controllers
      -> models
      -> views
   -> ...

My question is if there is a way, what configuration would I have to change in order to make the move?

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:58:14.647

分层模型-视图-控制器 (HMVC) 是一种软件架构模式，是模型-视图-控制器 (MVC) 的变体，类似于 Presentation-abstraction-control (PAC)，<a href="http://en.wikipedia. org/wiki/HMVC" rel="nofollow">更多信息在 wiki
我希望你喜欢[这个教程](http://net.tutsplus.com/tutorials/php/hvmc-an-introduction-and-application/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T00:43:57.077

我建议您使用放置在您希望指向应用程序文件夹中文件夹的目录中的链接。我不建议将这些文件夹移出应用程序文件夹。

干杯。

# asp.net - 从母版页中删除 DIV

> ID：12567177
> 
> 赞同：0
> 
> 时间：2012-09-24T14:34:39.557
> 
> 标签：asp.net, html, master-pages

有没有办法删除母版页的 DIV？不隐藏，div中有一些超链接，所以我也想从代码中删除它们。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:37:55.357

您可以执行以下操作：

```
<div id="random_name" runat="server" visible="false">

content

</div> 
```

这将允许您隐藏 div，但也可以从 .net 显示和隐藏它以及使用。

```
random_name.visible = true 
```

Visible 的使用，不只是从视图中隐藏它，而是在代码中显示它，它完全隐藏它，客户端根本无法查看。

要从子页面更改母版页的内容，请查看我的答案：

[从内容页面禁用母版页的超链接](https://stackoverflow.com/questions/12052928/disable-hyperlink-of-master-page-from-content-page/12053296#12053296)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T14:38:04.297

通过使用 HTML DOM，您实际上可以删除任何您想要的元素。您需要使用 JavaScript 或 jQuery 来实现这一点。

var div = document.getElementById("task_row_" + taskId); div.parentNode.removeChild(div);

参考：[使用 Javascript 或 Jquery 删除 DIV 标记](https://stackoverflow.com/questions/4755546/remove-div-tag-javascript)

# html - Fonts not showing up @font-face 000webhost

> ID：12567181
> 
> 赞同：-1
> 
> 时间：2012-09-24T14:34:49.397
> 
> 标签：html, css, truetype

I have set up a website. I was hosting it on webs.com, but they started to place an ad bar on html-only hosting. As it would not look good, I changed it to 000webhost. Since I uploaded everything to 000webhost, I can't make the fonts to load.

webs: [http://bluescreen-ofdeath.webs.com/](http://bluescreen-ofdeath.webs.com/)

000webhost: [http://bsod.comze.com/](http://bsod.comze.com/)

I have tried pointing the ttf fonts from my webs account, but it won't load.

As the 000webhost take a day to answer free accounts, I decided to ask you. Is there anything I am missing?

*Edit:* Here is an example of my @Font-face

```
@font-face {
    font-family: 'fixedsys500c-webfont';
    src: url('../font/fixedsys500c-webfont.eot');
    src: url('../font/fixedsys500c-webfont.eot?#iefix') format('embedded-opentype'),
         url('../font/fixedsys500c-webfont.woff') format('woff'),
         url('../font/fixedsys500c-webfont.ttf') format('truetype'),
         url('../font/fixedsys500c-webfont.svg#fixedsys500c-webfont') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:27:20.893

正如 Google Web Fonts 所规定的，必须在样式表之前导入字体。

> **说明**：要将您的集合嵌入到您的网页中，请将代码复制为`<head>`HTML 文档中的第一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:58:34.130

不要使用单引号。你的字体会很好用。很简单，看下面：

```
@font-face {
    font-family:Arial;
    src:url(Arial.ttf)format(.ttf);
} 
```

提醒一下，Internet Explorer 仅适用于 EOT 字体文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-09T00:53:41.460

据我所知， 000webhost 只接受 .woff 文件。

.ttf 和 .eot 对我不起作用

# email - Virtuemart 2 Order confirmation before payment

> ID：12567183
> 
> 赞同：2
> 
> 时间：2012-09-24T14:34:51.633
> 
> 标签：email, joomla, payment, virtuemart

I'm using VM 2.0.6 and Joomla 2.5 and the Multisafepay payment gateway.

Whenever a user puts a product in his cart, and clicks on checkout, the user is send to another page completely (Multisafepay's website, so not VM anymore) where he can select his desired payment option - same thing as paypal for example. But, at that time, Virtuemart is already sending an e-mail to the user confirming his order. That e-mail is saying: Thank you for your order blabla, the status of your order is ***blank***..

So, VM is already sending an e-mail before the user payed.

Does anybode relate to this or knows an answer?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:00:19.320

VM 2.0.6 的工作方式如下：

下订单时，这意味着选择了任何一种运输和付款方式。并且购物车具有有效数据，它将创建订单并向用户发送一封电子邮件，说明已下订单。如果需要，您可以更改发送邮件部分。在路径中带有 notifyemail 的一个函数名称（我不确定名称，但它以 notify 开头）：administrator/components/com_virtuemart/models/orders.php 在调用此函数之前，您可以检查所有必需的内容，例如运输/付款方式. 该功能应从前端的 cart.php 控制器启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T22:27:21.770

您可以在商店配置中更改将发票副本发送给客户的位置。查找配置 > 结帐 > 默认订单状态以发送发票并确保您选择了已确认状态。

# php - 使用 Cron 和 PHP API 以编程方式发布 Facebook 页面状态

> ID：12567185
> 
> 赞同：6
> 
> 时间：2012-09-24T14:34:56.670
> 
> 标签：php, facebook, api, cron

因此，我一直在努力使这项工作发挥作用。我一直在查看现有问题的堆栈溢出并发现：[Facebook: Post on Page as Page issue (access token / php)](https://stackoverflow.com/questions/9066474/facebook-post-on-page-as-page-issue-access-token-php)但它似乎仍然不能解决我的问题。

我每天都在尝试使用 cron 作业发布到我的 Facebook 页面。我遇到了身份验证问题。这是我的代码：

```
 //Post to Facebook
//Variables
$app_id = "...";
$app_secret = "..."; 
$page_id = "...";
$my_url = "http://.../";
$access_token = "taken from page access token (developers.facebook.com/tools/explorer/)";

//Create the facebook object
$facebook = new Facebook(array(
 'appId' => $app_id,
 'secret' => $app_secret,
 'cookie' => true
));

//Get the access token using Facebook Graph API
//This gives permission to post to the wall
$token_url="https://graph.facebook.com/oauth/access_token?client_id=" . $app_id 
    . "&client_secret=" . $app_secret 
    . "&code=" . $access_token 
    . "&redirect_uri=" . $my_url;

$response = file_get_contents($token_url);
$params = null;
parse_str($response, $params);
$user_access_token = $params['access_token'];

//Get a list of pages and loop through
//If one matches one in the variables above, that's the one
//We're posting to
$attachment_1 = array(
    'access_token' => $user_access_token
);

$result = $facebook->api("/me/accounts", $attachment_1);
    foreach($result["data"] as $page) {
        if($page["id"] == $page_id) {
            $page_access_token = $page["access_token"];
            break;
        }
    }

//Write to the Page wall
try {
    $attachment = array(
                'access_token' => $page_access_token,
                'message'=> "Hello World"
        );

    $result = $facebook->api('/me/feed','POST', $attachment);

} catch(Exception $e) {
    //Send me an email
    ...
    mail($to, $subject, $message, $headers);
} 
```

如果我在浏览器中访问脚本（我假设它正在使用我的 facebook 会话），则此方法有效，但当它由 cron 作业触发时则无效。

我真的很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:01:15.910

```
//Get the access token using Facebook Graph API
//This gives permission to post to the wall 
```

如果您已经有一个页面访问令牌，那么此时此步骤是错误的 - 它用于将 Auth 对话框传递回您的应用程序的代码交换为用户访问令牌。

但由于您已经拥有页面访问令牌，您可以跳过该步骤（从上述评论到 的所有内容`//Write to the Page wall`）。

您所要做的就是在 API 调用中使用您的页面访问令牌，而不是您现在提供的用户访问令牌。

# css - Bootstrap CSS btn-block 类不能与 Rails 一起使用提交按钮

> ID：12567187
> 
> 赞同：2
> 
> 时间：2012-09-24T14:35:06.360
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我正在使用 bootstrap-sass gem 来设置我的 Rails 应用程序的样式，并且在让 btn-block 类与新用户注册表单中的提交按钮一起工作时遇到问题。

下面是相关代码...

```
 <%= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook), class: "btn btn-primary btn-large btn-block" %> 

   <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
<%= devise_error_messages! %>

<%= f.email_field :email, placeholder: "Email" %>

    <% if f.object.password_required? %>

<%= f.password_field :password, placeholder: "Password" %>

<%= f.password_field :password_confirmation, placeholder: "Confirm Password" %>

<% end %>

<%= f.submit "Create Account", class: "btn btn-primary" %>

<% end %> 
```

此代码使用引导程序创建一个有效的提交按钮。但是，当我尝试将 btn-block 类添加到提交按钮时，它会与按钮样式混淆，并且不会为按钮提供宽度：100% 样式，就像上面使用同一类样式的链接一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T15:24:41.150

在 app/assets/stylesheets 中创建一个名为 style.css 的新样式表

确保使用语法在 application.css 中明确需要此样式表 `*= require_self`

所以在新的样式表 app/assets/stylesheets/style.css

```
.btn.btn-primary {
  width: 100%; 
} 
```

如果这不起作用，您需要通过向表单添加 ID 来使您的选择器更加具体。

# textmate - 从 Textmate2 的“命令 T”中排除路径

> ID：12567188
> 
> 赞同：2
> 
> 时间：2012-09-24T14:35:07.840
> 
> 标签：textmate, textmate2

当按 command+T (⌘T) 调出快速文件浏览器时，有没有办法（使用`.tm_properties`）从中排除路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T23:42:15.960

我们在 wiki 上有一个[设置列表。](http://wiki.macromates.com/Reference/Settings)您想要的设置是`excludeInFileChooser`& `includeInFileChooser`。

请注意，在 r9309 中它已更改，因此文件必须与要包含的包含规则匹配。

**附录**：文件选择器和查找窗口在它们的窗口中都有可编辑的 glob，默认包含所有内容，因此关于文件必须由包含规则匹配的注释不像侧边栏或通用规则那样相关。（窗口中的 glob 被视为最后应用的包含规则。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T23:49:05.260

wiki 页面对此有一般的文档，并且在处理路径时，该工作的语法不太理想。这里有一些片段，带有评论，关于他们正在完成什么。

也许这会有所帮助

```
# Exclude image files
exclude = "{$exclude,*.tiff,*.png,*.jpg,*.jpeg}"

# Project should use master as the parent dir
[ "/Volumes/broux/working/{/,**}*"]
projectDirectory        = "/Volumes/broux/working/master" 
```

# c# - 如何最大化 FlowLayoutPanel 的效率？

> ID：12567190
> 
> 赞同：3
> 
> 时间：2012-09-24T14:35:12.613
> 
> 标签：c#, flowlayoutpanel

基本目标是为每个联系人创建名片并将该名片放入 FlowLayoutPanel。卡片本身由大约 10 个标签和 3 个组合框组成。

不需要太多名片即可导致面板的初始填充需要很长时间。也许我可以找到解决这个问题的方法

然而，一个主要的问题是崩溃。只需要大约 200 张左右的卡片就会崩溃（用完手柄）。

我同意有可以实现的分页方法，因为用户一次不需要看到超过 1 或 2 个屏幕的内容，但是编写分页例程可能非常困难。

关于如何最大限度地提高这个计划中的 FlowLayoutPanel 的效率的任何建议？

PS主要问题是手柄用完了（面板中的控件太多）。在担心速度之前必须解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T08:11:32.803

好的，怎么样：

创建一个类以将重新创建名片（10 个标签和 3 个组合框）所需的信息存储为公共的、可获取/可设置的属性，并使用空的默认公共构造函数。然后，将每张名片作为 xml（或二进制）文件序列化`XmlSerializer`到一个文件夹中。然后，您可以使用类似的东西`string[] businessCards = Directory.GetFiles(Path.GetFullPath("mysettings\\businesscards"));`来遍历您长长的“缓存”名片列表。`FlowLayoutPanel`通过调用如下函数来管理添加/删除项目的类： `SerializableBusinessCardClass GetNextCard() {}`. 这将是相当简单的实现。你也可以序列化一个`List<SerializableBusinessCardClass>`将大约 5 个长度（或者您想一次加载的多个）添加到单个 XML 文件中以获得最大效率，或者如果您的名片数量非常荒谬（这样浏览器在浏览文件夹时会滞后）。虽然二进制序列化会更快，但 XML 方法还有一个额外的好处，即您的客户可以通过自己创建 XML 文件来指定他们希望您显示的新名片。

在这里，我会给你一个具体的例子，说明如何构建和序列化这样的数据结构：

```
public class SerializableBusinessCard
{
    public SerializableBusinessCard()       { }
    public string Name                      { get; set; }
    public string Company                   { get; set; }
    public List<string> Labels              { get; set; }
    public List<ComboItem> ComboBoxes       { get; set; }

}

public class ComboItem
{   
    public ComboItem()              { }
    public string Name              { get; set; }
    public string Text              { get; set; }
    public int SelectedIndex        { get; set; }
    public Point Location           { get; set; }
    public Size size                    { get; set; }
    public List<string> Collection{ get; set; }
} 
```

用法：

```
 public void stackoverflow_BusinessCard_FlowLayoutPanel()
    {
        List<string> labels = new List<string>();

        labels.Add("Title");
        labels.Add("Description");
        labels.Add("Phone");
        labels.Add("Email");
        labels.Add("Address");
        labels.Add("label6");
        labels.Add("labelN");

        ComboItem cItem = new ComboItem();

        cItem.Collection = new List<string>();
        cItem.Collection.Add("Option1");
        cItem.Collection.Add("Option2");

        cItem.Name = "comboName";
        cItem.SelectedIndex = 0;
        cItem.Text = cItem.Collection[cItem.SelectedIndex];
        cItem.Location = new Point(50, 265);
        cItem.size = new Size(100,21);

        List<ComboItem> comboItems = new List<ComboItem>();
        comboItems.Add(cItem);

        SerializableBusinessCard bCard1 = new SerializableBusinessCard();

        bCard1.Name         = "CompanyXYZ_BlueTheme";
        bCard1.Company      = "CompanyXYZ";
        bCard1.Labels       = labels;
        bCard1.ComboBoxes   = comboItems;

        SerializeObjectXML("BusinessCard_392.xml",bCard1);

        SerializableBusinessCard loaded = DeserializeBusinessCardXML("BusinessCard_392.xml");
    } 
```

下面是序列化函数：

```
 public void SerializeObjectXML(string filename,object obj)
    {
        using(StreamWriter streamWriter = new StreamWriter(filename))
        {
            XmlSerializer xmlSerializer = new XmlSerializer(obj.GetType());
            xmlSerializer.Serialize(streamWriter,obj);
        }
    } 
```

结果：

```
<?xml version="1.0" encoding="utf-8"?>
<SerializableBusinessCard xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Name>CompanyXYZ_BlueTheme</Name>
  <Company>CompanyXYZ</Company>
  <Labels>
    <string>Title</string>
    <string>Description</string>
    <string>Phone</string>
    <string>Email</string>
    <string>Address</string>
    <string>label6</string>
    <string>labelN</string>
  </Labels>
  <ComboBoxes>
    <ComboItem>
      <Name>comboName</Name>
      <Text>Option1</Text>
      <SelectedIndex>0</SelectedIndex>
      <Location>
        <X>50</X>
        <Y>265</Y>
      </Location>
      <size>
        <Width>100</Width>
        <Height>21</Height>
      </size>
      <Collection>
        <string>Option1</string>
        <string>Option2</string>
      </Collection>
    </ComboItem>
  </ComboBoxes>
</SerializableBusinessCard> 
```

和解串器：

```
 public static SerializableBusinessCard DeserializeBusinessCardXML(string filename)
        {
            SerializableBusinessCard result = new SerializableBusinessCard();
            using(StreamReader streamReader = new StreamReader(filename))
            {
                XmlSerializer xmlReader = new XmlSerializer(typeof(SerializableBusinessCard));
                result = (SerializableBusinessCard) xmlReader.Deserialize(streamReader);
            }
            return result;
        } 
```

希望这可以帮助。

# c - IPP 中基本三次插值的参数 B 和 C

> ID：12567192
> 
> 赞同：0
> 
> 时间：2012-09-24T14:35:16.557
> 
> 标签：c, algorithm, intel, image-resizing

Integrated Performance Primitives 中的基本三次插值（不是 B 样条、Catmull-Rom、特殊滤波器）应该使用哪些参数 B 和 CI？

[这个链接](http://software.intel.com/sites/products/documentation/doclib/ipp_sa/71/ipp_manual/IPPI/ippi_appendices/ippi_appB_Cubic2PInterpolation.htm)告诉我除了基本插值之外的所有三次插值的参数。

# c# - 多目标 .NET Framework 4 和 Visual Studio 2012

> ID：12567193
> 
> 赞同：15
> 
> 时间：2012-09-24T14:35:18.853
> 
> 标签：c#, .net, vb.net, visual-studio, visual-studio-2012

我已经在我的机器上安装了 Visual Studio 2012 Professional。我没有安装 Visual Studio 2010，但我想继续使用 .NET Framework 4 开发我的应用程序，但我的 Visual Studio 2012 上没有此选项。查看图像：

![在此处输入图像描述](../Images/da48aa7525b539a72201f291d5ef7401.png)

我不知道我能做些什么来解决这个问题，因为我点击“更多框架...”链接并尝试安装 .NET 4.0.3 的多目标（安装在我的机器上），但确实如此不行。它说仍然安装了这个版本的框架。我能做些什么来解决这个问题？

Obs：我有很多使用 .NET 4.0 的 C# 和 VB.NET 项目，我需要将这些项目保留在 .NET 4.0 上的新项目中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:19:02.353

我解决了执行这些任务的问题：

*   卸载 Visual Studio 2012
*   卸载 .NET Framework 4.0 或 4.5 的任何参考
*   使用 Glary Utilities 之类的工具清理寄存器并重新启动计算机
*   安装 .NET Framework 4.0 并安装 Microsoft Multi-Targeting for .NET Framework 4。
*   再次安装 Visual Studio 2012

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T02:04:04.917

您解决了问题，但 .NET Framework 4 Targeting Pack（不要与 .NET Framework 本身混淆）可能由于某种原因无法安装。在 Visual Studio 安装结束时是否收到警告？无论哪种方式，在将来，Visual Studio 2012 的修复安装应该已经解决了这个问题（添加或删除程序 -> Microsoft Visual Studio [Edition] 2012 -> 更改 -> 修复）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:50:48.193

我认为您的问题可能是安装 .NET Framework 时出现的一些问题。我安装了 Visual Studio 2012 Beta 并且在框架版本之间的兼容性方面遇到了各种麻烦。唯一的补救措施是重新安装 Visual Studio，包括 .NET Framework。

查看*[如何：以 .NET Framework 版本为目标](http://msdn.microsoft.com/en-us/library/bb398202.aspx)*(MSDN)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T06:21:32.707

创建新项目后，转到其属性（在解决方案资源管理器中选择您的项目，然后右键单击并选择属性）并选择目标框架！

# mysql - 在查询中使用部分字符串

> ID：12567197
> 
> 赞同：0
> 
> 时间：2012-09-24T14:35:27.030
> 
> 标签：mysql, zend-framework, date, zend-db

我有一个带有出生日期的 mysql 表，所以一个示例字段是：

```
dob
----
1989-01-01 
```

我使用以下代码在 zend 框架中提取了今天的日期：

```
public function todaysDate()
    {
        $date = new Zend_Date();
        $date = $date->get(Zend_Date::MONTH_SHORT . '-' . Zend_Date::DAY_SHORT);
        return $date;
    } 
```

这以格式显示当前日期：

```
9-24 
```

现在我想在我的 mysql 表中搜索 dob 字段，不管是在他们的 dob 中的第 9 个月和第 24 天，还是不考虑年份。我该怎么做呢？

请注意 dob 不是日期字段，它是文本字段

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:36:47.120

```
SELECT ...
FROM ...
WHERE (month(dob) = 9) AND (day(dob) = 24) 
```

# asp.net - 以编程方式创建的 ListView 的基本缓存（Listview + DataPager）

> ID：12567199
> 
> 赞同：0
> 
> 时间：2012-09-24T14:35:32.630
> 
> 标签：asp.net, listview, caching

现在，每次用户使用数据分页器时，都会重新填充整个数据源，这需要时间..

那么为什么使用缓存有一个快速简单的方法吗？（我从未使用过它）......或者我应该将 eniter 东西存储在 Session 对象中并以某种方式检测是否已经进行了初始数据加载？

```
 PersonBusiness pb = new PersonBusiness(new PersonRepository());

    if (personFilter == null)
    {
        listPerson = pb.GetAllPersons(strServer, strAppPath);
    }
 lvPersons.DataSource = listPerson;
    lvPersons.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:40:04.437

这比我想象的要容易得多。。我只需要几行，listview和分页就可以了。一个例外是当设置了新的过滤器时，你需要删除缓存

```
 if (Cache.Get("Members") != null)
    {
        listPerson = (List<Person>)Cache.Get("Members");
    }
    else
    {
        if (personFilter == null)
        {
            listPerson = pb.GetAllPersons(strServer, strAppPath);
            Cache.Insert("Members", listPerson, null, DateTime.Now.AddSeconds(60), TimeSpan.Zero);
        }
        else
        {
            listPerson = pb.GetSomePersons(strServer, strAppPath, personFilter.FirstName, personFilter.LastName, personFilter.State, personFilter.Company, personFilter.Committees, personFilter.IndType, personFilter.MemberType);
            Cache.Insert("Members", listPerson, null, DateTime.Now.AddSeconds(60), TimeSpan.Zero);
        }
    } 
```

# r - 同一美学的多个传说

> ID：12567200
> 
> 赞同：8
> 
> 时间：2012-09-24T14:35:34.190
> 
> 标签：r, ggplot2, legend

我正在尝试使用`facet_grid`或`facet_wrap`与`geom_raster`. 然而，在每个面板中，`z`审美的尺度都不同。例如，

```
##Data at end of question
ggplot(dd, aes(x,y)) +
    geom_raster(aes(fill=z)) +
    facet_grid(type ~ var) 
```

给

![在此处输入图像描述](../Images/3f9d8cdf7477172d87578055f61176fb.png).

然而，由于 C 和 D 的平均值分别在 0 和 100 左右，我们损失了很多分辨率。你也可以试试：

```
##Change C to D to get other panel
ggplot(subset(dd, var=="C"), aes(x,y))+
    geom_raster(aes(fill=z)) + 
    facet_grid(type ~ var) + 
    theme(legend.position="bottom") 
```

这使

![在此处输入图像描述](../Images/affec686c478c06e2fc43d44d1bb91c4.png)

和

![在此处输入图像描述](../Images/504d6cb903a3eb31460ae6b88ac9e773.png)

但我现在有两条 y 条。

**问题**

1.  我可以更改第一个情节以提供两个`fill`美学传说吗？
2.  或者，如果我做两个单独的图表，我可以删除其中一个图表上的 y 条以允许我将它们按在一起 - 搞乱主题，表明这是不可能的。

**数据**

重现图表的数据

```
dd = expand.grid(x=1:10, y=1:10)
dd = data.frame(dd, type=rep(LETTERS[1:2], each=100), 
           var =rep(c("C", "D"), each=200) )
dd$z = rnorm(400, rep(c(0, 100), each=200)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T16:32:24.413

那这个呢：

![在此处输入图像描述](../Images/6ff085ea123381bae526b32151848962.png)

```
library(gridExtra)
p1 <- ggplot(subset(dd, var=="C"), aes(x,y))+
  geom_raster(aes(fill=z)) + facet_grid(type ~ var) + 
  theme(legend.position="bottom", plot.margin = unit(c(1,-1,1,0.2), "line"))
p2 <- ggplot(subset(dd, var=="D"), aes(x,y))+
  geom_raster(aes(fill=z)) + facet_grid(type ~ var) + 
  theme(legend.position="bottom", plot.margin = unit(c(1,1,1,-0.8), "line"),
        axis.text.y = element_blank(), axis.ticks.y = element_blank()) + ylab("")
grid.arrange(arrangeGrob(p1, p2, nrow = 1)) 
```

你也可能想玩弄`plot.margin`. 似乎可以在[此处](https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/lDvsd4yJ0AE)找到对您的第一个问题的否定答案。

# php - PHP glob 的 GLOB_BRACE 慢吗？

> ID：12567203
> 
> 赞同：1
> 
> 时间：2012-09-24T14:35:55.093
> 
> 标签：php, glob

我有 2 个相同脚本的副本，唯一的区别是

一个）

```
$images = glob("*.*") 
```

二）

```
$images = glob("*.{jpg,jpeg,png,gif}", GLOBAL_BRACE) 
```

对我来说，B 应该运行得更快，因为它的选择更少（尽管另一方面，更多的过滤）。但加载需要 3.64 秒，而不是需要 122 毫秒的 A。这些取自 JS 控制台中 Chrome 的网络选项卡（这是一个 AJAX 调用）。

我试图想出一些逻辑上的巨大差异，但它是相同的目录、相同的服务器、相同的一切（只是 +GLOB_BRACE）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:44:49.753

> PHP glob 的 GLOB_BRACE 慢吗？

不，访问文件系统是。

您实际上应该只将图像放在目录中，因此您根本不需要“glob”，而是使用普通的旧[`opendir()`](http://php.net/manual/en/function.opendir.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:41:07.960

这实际上取决于 glob 的实现。如果这是基于对每个文件运行的正则表达式，它完全可以变慢（因为正则表达式非常慢）。我对 3.6 感到惊讶，但你有多少文件？

# magento - 使用 Magento 中的产品自定义属性自定义添加到购物车

> ID：12567205
> 
> 赞同：3
> 
> 时间：2012-09-24T14:36:10.820
> 
> 标签：magento

我尝试使用自定义模块将产品添加到购物车。下面是我使用的代码

```
 $product_id = $this->getRequest()->getParam('product');

    $product = Mage::getModel('catalog/product')->load($product_id);

    $param = array( 'product' => $product->getId(), 'qty' => 2,'options["'.$option_id.'"]' => $option_type_id );

  $cart = Mage::getModel('checkout/cart')->init();
  $cart->addProduct($product, new Varien_Object($param));
  Mage::getSingleton('checkout/session')->setCartWasUpdated(true);
  $cart->save(); 
```

我可以使用产品 ID 将产品名称、数量添加到购物车，但我无法在购物车中添加产品自定义选项。

请帮我解决这个问题。

谢谢，普拉卡什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:41:40.600

你这么近！您需要更改的主要内容是您的`$param`，因为它的结构不像 Magento 想要的那样。这应该可以解决问题：

```
$param = array(
    'product' => $product->getId(),
    'qty' => 2,
    'options' => array(
                        $option_id => $option_value,
                        $option_id2 => $option_value2,
                      ),
); 
```

请注意，您的产品上任何必需的自定义选项都需要具有值，以避免在添加到购物车时出现致命错误。此外，无需转换`$param`为`Varien_Object`- Magento 可以很好地理解数组。

# java - 使用 Java 7 删除文件/文件夹

> ID：12567206
> 
> 赞同：0
> 
> 时间：2012-09-24T14:36:11.973
> 
> 标签：java, file-io, java-7

我在 Java 中删除文件/文件夹时性能不佳。

代码很旧，我想知道 Java 7（我升级到的）是否真的提供了性能改进，或者只是另一种语法。（除非有好处，否则我不想重组所有东西）。我经常需要提取大 ZIP，然后删除内容，递归时间很残酷。

我也被困在 Windows 上。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:23:46.893

我建议使用社区已经提供的某种罐子。例如common-io.xx.jar、spring-core.jar

```
 Eg, org.apache.commons.io.FileUtils;
        FileUtils.copyDirectory(from, to);
        FileUtils.deleteDirectory(childDir);
        FileUtils.forceDelete(springConfigDir);
        FileUtils.writeByteArrayToFile(file, data);

        org.springframework.util.FileSystemUtils;
        FileSystemUtils.copyRecursively(from, to);
        FileSystemUtils.deleteRecursively(dir); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:47:10.347

文件 IO 非常依赖于硬件的性能。许多 HDD 每秒可以执行 80 - 120 IOPS。如果要打开文件，每秒最多可以读取 120 个文件。要删除一个文件，它可能需要两次更新或每秒最多删除 60 个文件。有了这些限制，您在软件中几乎无能为力，这将产生任何影响。

但是，如果您有 SSD，这些可以每秒执行 80,000 到 230,000 IOPS（增加一千多倍）此时您所做的软件可能会有所不同，但是当您处理压缩文件时，它最喜欢那个 CPU此时将成为您的瓶颈。

# jquery - Jquery在悬停时更改身体的背景图像

> ID：12567208
> 
> 赞同：2
> 
> 时间：2012-09-24T14:36:21.287
> 
> 标签：jquery

我一直在尝试更改悬停时身体的背景图像。到目前为止，我已经尝试使用：

```
 $('#bob')
    .hover(function(){
        $('body').css("background", "url('" + images[0] + "'");
    }) 
```

这至少对我不起作用。我似乎无法弄清楚如果有必要，这是我的数组“图像”。

```
 var images = ['x/bg/bob.jpg', 'x/bg/sotd.jpg', 'x/bg/wws.jpg', 'x/bg/dk.jpg', 'x/bg/tp.jpg']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:38:36.403

```
$('body').css("background", "url(" + images[0] + ")"); 
```

`)`缺少一个。
（不需要单引号）

# iphone - Iphone 应用程序在 IOS 5.1 上运行良好，在 IOS 6 上运行不正常

> ID：12567209
> 
> 赞同：1
> 
> 时间：2012-09-24T14:36:22.220
> 
> 标签：iphone, ios, xcode, ios6

iphone 应用程序在 IOS 5.1 上运行良好，但在使用 IOS6 升级 XCode 4.5 后，它只显示初始屏幕，而不是模拟器中的空白。应用程序没有崩溃并收到大量弃用警告（主要是由于 presentModalViewController 和 dismissModalViewController）。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:45:39.370

If you're wondering how to fix the warnings you're getting about the `presentModalViewController`, here's what my updated version of the code looks like:

```
[self presentViewController:picker animated:YES completion:nil]; 
```

Note that `presentModalViewController` was renamed to exclude the `Modal` part, and note that `completion:nil` was added.

After you resolve all of the warnings, try again. My guess is that your issue will be resolved.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:31:40.327

好吧，如果有问题`presentModalViewController`并且你在发布时展示了一些东西，那可能就是它没有展示的原因。

处理警告，看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:28:24.257

在将 XCode 4.x 项目转换到 XCode 4.5 时，这种情况经常发生。解决方法可能非常简单！

要让您的应用程序运行，您应该清除所有以前的构建信息。

为此，在 XCode 4.5 中，转到`Product > Clean`. 然后尝试运行您的应用程序。

如果还不够，请按“ `Alt`”键并单击`Product > Clean Build Folder`。

希望有帮助。

编辑：这不会解决弃用问题（`presentModalViewController`现在带有`completion:`iOS6 中的参数），但肯定会解决`error: failed to attach to process ID 0`问题！

# computational-geometry - 将 Oracle 关系字符串转换为 POSTGIS 维度矩阵

> ID：12567211
> 
> 赞同：1
> 
> 时间：2012-09-24T14:36:23.067
> 
> 标签：computational-geometry, postgis, oracle-spatial

我想将查询从 Oracle 空间转换为 postgis。它为它的 sdo_relate 函数使用关系字符串，我想在 st_relate 中获取维度矩阵。我尝试使用 st_intersects，但我在几何中得到重叠区域。我可以在理解转换方面获得一些帮助吗？谢谢。

我想要以下两个 oracle 关系字符串的 postgis 维度矩阵-

```
st_relate(geomA, geomB, 'MASK=ANYINTERACT')

st_relate(geomA, geomB, 'mask=TOUCH+INSIDE') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:44:44.510

分别为 ST_Intersects(A,B) 和 ST_Contains(A,B)。

# c# - 如何在 C# 中使用 switch 语句将 int 类型检查为空白？

> ID：12567212
> 
> 赞同：2
> 
> 时间：2012-09-24T14:36:25.513
> 
> 标签：c#, switch-statement

我正在尝试创建一个临时局部变量来检查使用 switch 语句从 SP 中提取的值。我已将这些成员声明为 int 类型，并且 SP 的值将是 0、1 或空白。当它是 int 时，它将与空白进行比较的语句视为字符串。我怎样才能解决这个问题？

```
private int checkInventoryValue(int returnedval)
{
   int testedValue = (int)returnedval;
   switch (testedValue)
   { 
       case 1:
           testedValue = 0;
           break;
       case 2:
           testedValue = 1;
           break;
       default:
           testedValue = ""; // error CS0029: Cannot implicitly convert type 'string' to 'int' 
           break;
    }
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:37:36.573

```
private int? checkInventoryValue(int returnedval)
{
    int? testedValue = (int?)returnedval;
    switch (returnedval)
    { 
        case 1:
            testedValue = 0;
            break;
        case 2:
            testedValue = 1;
            break;
        default:
            testedValue = null; 
            break;
    }
    return testedValue;
} 
```

稍后（在链上），如果您真的想要，您可以将其转换为空字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:38:51.457

整数不能为空，但是，您可以使用可为空的整数：

```
int? testedValue = (int?)returnedval;
switch (testedValue.Value)
{ 
    case 1:
        testedValue = 0;
        break;
    case 2:
        testedValue = 1;
        break;
    default:
        testedValue = null; // error CS0029: Cannot implicitly convert type 'string' to 'int' 
        break;
} 
```

# bash - 如何在单引号文本中显示单引号

> ID：12567215
> 
> 赞同：2
> 
> 时间：2012-09-24T14:36:33.580
> 
> 标签：bash, echo, double-quotes, quotation-marks

我有一个`bash`脚本，

```
echo 'abcd' 
```

在 shell 中，我想展示`ab'c'd`并且我尝试了以下方法但没有成功

```
echo 'ab\'c\'d' 
```

我问是否可以在单引号文本中显示单引号？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T14:40:05.840

从[单引号的](http://www.gnu.org/software/bash/manual/bashref.html#Single-Quotes)`bash` [手册](http://www.gnu.org/software/bash/manual/bashref.html)部分：

> 单引号之间不能出现单引号，即使前面有反斜杠。

您需要改用双引号。它并不漂亮，但以下给出了您正在寻找的输出：

```
echo 'ab'"'"'c'"'"'d' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:15:21.050

特定于 bash 的功能，不是 POSIX 的一部分，是一个`$'...'`带引号的字符串：

```
echo $'ab\'c\'d' 
```

这样的字符串与单引号字符串的行为相同，但允许选择 \ 转义字符（例如 \n、\t 和是的 \'）。

# objective-c - 在插入符号位置将文本插入 UITextField

> ID：12567218
> 
> 赞同：3
> 
> 时间：2012-09-24T14:36:44.080
> 
> 标签：objective-c, ios, cocoa-touch

有没有简单的方法在 UITextField 的插入符号位置插入文本？我有一个带有一些特殊字符的自定义键盘，但我很难完成这项工作。我*不允许*任意输入，键盘限制为大约 20 个特殊字符，其他所有字符都被拒绝。

[使用全局剪贴板插入的方法](https://stackoverflow.com/questions/1317929/insert-string-at-cursor-position-of-uitextfield)是一种不好的方法，因为打开 VoiceOver 时，它会说“粘贴”而不是每次使用时插入的字符。这还不够好。

找到任何替代解决方案似乎都非常困难，因为所有解决方案都只是参考粘贴解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T08:21:54.843

解决方案比我想象的要简单：

```
[self insertText:string];
UIAccessibilityPostNotification(UIAccessibilityAnnouncementNotification, string); 
```

这将与选择、插入符号位置等一起正常工作。人。

但是，在宣布输入的字符串时，它*不会*使用正确的音调。VoiceOver 在宣布插入的文本时使用更深沉的声音，我提出了一个[单独的问题，关于如何控制 VoiceOver 的语气](https://stackoverflow.com/questions/12578873/voiceover-uiaccessibilityannouncementnotification-tone-of-voice)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:48:10.510

UITextField 实现 UITextInput 协议，因此具有“selectedTextRange”属性，该属性返回选择或光标位置。阅读它，因为您可以从该协议所需的方法中获得许多有趣的信息。

# c# - 将sql数据从过程写入平面文件

> ID：12567221
> 
> 赞同：0
> 
> 时间：2012-09-24T14:36:47.807
> 
> 标签：c#, asp.net, sql, sql-server-2008

我正在使用 sql server 2008 和 (c#, asp.net)。如何将选择语句结果写入 sql server 中的文本文件（具有 5 列和 30 多行的表）？我有一个包含数百个表和存储过程的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:18:20.863

您可以通过 ISQL via 运行 select`xp_cmdshell`并使用 -o 参数将结果输出到文件。此示例使用 -E 参数来避免对用户 ID 进行硬编码。

```
declare @str varchar(255)
select @str = 'isql -Q "select * from <tablename>" -E -o c:\text.txt'
exec master.xp_cmdshell @str 
```

# asp.net - 如何防止asp：Timer在生成响应之前发送tick？

> ID：12567226
> 
> 赞同：5
> 
> 时间：2012-09-24T14:36:55.497
> 
> 标签：asp.net, asynchronous, timer, postback

我有一个 ASP.NET 网站。我希望用户做出决定并在一定时间内单击给定按钮之一并将他重定向到另一个页面。如果他没有做出决定，他仍然会在我的脑海中被重定向到“没有选择”的标记。

我用`asp:Timer`在时间结束后启动回发。我正在通过调用处理程序`Response.Redirect('page.html', false)`进行重定向。`Page_Load`在这种情况下，我可以在实际重定向之前处理`button_click`或事件。`timer_tick`在处理完这些事件之一后，将呈现页面并完成重定向。

但我有两个问题。首先，如果输入的处理时间足够长，就会触发第二个计时器的滴答声，启动新的回发，并且取消我的当前！其次，如果用户在时间到了之前单击了一个按钮，则计时器滴答会在重定向完成之前发生，并且它再次覆盖用户单击的处理！

我该如何解决这些问题？在触发第一个刻度后或用户单击按钮后，如何在客户端禁用计时器？或者解决我的任务的更好方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:11:16.827

作为一种变体，您可以使用客户端`setTimeout`功能而不是 Timer 控件并在按钮单击时清除超时：

```
 <script type="text/javascript">
      var redirectTimeout = setTimeout(function () {
           location.href = '<%= ResolveClientUrl("~/page.html") %>';
      }, 5000);
 </script>

 <asp:Button runat="server" ID="SubmitButton" Text="Submit" 
      OnClientClick="clearTimeout(redirectTimeout);" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:46:08.777

我得到了这两个问题的解决方案。

1.  我放在`asp:Timer`一个`asp:UpdatePanel`控件里面。就我而言，这是正确的做法，因为我不需要在下一个问题之前刷新整个页面。但我发现在这种情况下，计时器的滴答声不会相互干扰。

2.  [如此处](http://forums.asp.net/p/1163588/1929583.aspx)所述，我可以`asp:Timer`像这样禁用 javascript：

    ```
    $find("TimerMaxJudgeTime")._stopTimer(); 
    ```

    然后我将它绑定到我的按钮`onclick`事件，我就完成了。由于 timer 放置在 中`UpdatePanel`，因此它会在回发后自动重新创建和启用。

# ruby - Portable Ruby GUI Toolkit

> ID：12567229
> 
> 赞同：3
> 
> 时间：2012-09-24T14:37:08.153
> 
> 标签：ruby, user-interface, toolkit

I am in need of a GUI toolkit that goes a little further than tk does, but my school's computers do not allow programs to run if they try to create/alter files on the local disk. Because of that, I need a portable GUI toolkit for Windows. Does anybody know of one?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:25:25.533

Qt4 and ruby-qt (the qtbindings gem works beautifully to get the ruby bindings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:37:57.233

Green Shoes, just install the gem, copy it along with your Ruby map to a stick and you are off to go.

```
gem install green_shoes 
```

[http://ashbb.github.com/green_shoes/App.html](http://ashbb.github.com/green_shoes/App.html)

a simple sample

```
require 'green_shoes'
Shoes.app{
  e = edit_line
  button("Click me!"){alert("You entered #{e.text}")}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:42:35.287

For graphical applications in Ruby, I personally prefer JRuby + Swing. Presumably your school's computers have a JRE installed... perhaps you can run JRuby from your flash drive?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T21:26:42.750

I see you haven't yet accepted an answer, so i try another suggestion. Again, you only need a Gem, Watir in this case. Your browser is the GUI. Here a question i asked and the answer i accepted

```
http://stackoverflow.com/questions/11724201/use-browser-as-gui-in-ruby 
```

That example uses IE but the other browsers are possible too, this solution is cross-browser and cross OS

# php - Yii 的资产文件夹没有写权限

> ID：12567230
> 
> 赞同：0
> 
> 时间：2012-09-24T14:37:10.147
> 
> 标签：php, permissions, yii, orchestra

我正在尝试将 PHP Yii 应用程序部署到 Orchestra (https://www.engineyard.com/products/orchestra/)。该平台，就像我认为许多基于云的平台一样，不允许写入权限。

通过将 Yii 所需的“运行时”目录放在系统的 tmp 文件夹中，我设法绕过了它。但是我坚持使用“资产”文件夹。Yii 需要一个可写且可公开访问的文件夹。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:03:52.460

Yii 需要在某个地方放置核心或模块中的文件以供公众访问。

如果这不可能，您可能必须手动获取您想要的每个 js/css 文件，将它们放在所需的文件夹中并使用[scriptMap](http://www.yiiframework.com/doc/guide/1.1/en/topics.performance#minimizing-script-files "脚本映射")将它们映射回来或阻止它们并自己包含它们。

[围绕客户端脚本](http://www.yiiframework.com/doc/api/1.1/CClientScript "客户端脚本")有很多文档可以处理所有这些。

# xamarin.ios - Monotouch 使用 ASP.NET Web Api

> ID：12567232
> 
> 赞同：4
> 
> 时间：2012-09-24T14:37:11.083
> 
> 标签：xamarin.ios, asp.net-web-api

我有一个 Monotouch 项目，它今天使用 WCF Web 服务来获取数据。现在我想迁移它以便开始使用 ASP.NET Web Api Json。

有谁知道如何从 ASP.NET Web Api 发送 viewmodel 数据，然后在 monotouch 中读取它？

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:42:14.877

我认为您应该阅读这篇[Xamarin 文章](http://docs.xamarin.com/ios/tutorials/Introduction_to_Web_Services)。

一般来说，Web API 只是标准的 HTTP 来回传递 XML 或 JSON。不一定有客户端框架访问它——您可以使用 raw`HttpWebRequests`或您使用的任何编程语言的等价物来使用它。

考虑到这一点，您的选择是：

1.  使用开源库来完成它（类似于[RestSharp](http://restsharp.org/)）
2.  创建`HttpWebRequest`调用，并自己为请求和响应设置 XML 或 JSON 格式（您可以使用 .Net BCL 来执行此操作或其他开源项目）

我倾向于做前者，只是因为我喜欢对正在发生的事情进行细粒度的控制。＃1可能对您来说更容易。

# xcode - 模态解雇不考虑状态栏（新的 iOS 6 问题？）

> ID：12567233
> 
> 赞同：4
> 
> 时间：2012-09-24T14:37:14.123
> 
> 标签：xcode, frame, ios6, offset, statusbar

在我开始为 iOS 6 调整我的应用程序之前根本没有这个问题。每当我从模态转场返回时（使用dismissViewControllerAnimated:completion:），我的主视图都会向上移动大约状态栏的高度偏移量（并且随后位于状态栏后面）。

我发现的唯一解决方法是添加：

```
self.navigationController.view.frame = CGRectMake(0, 20, 320, 460);
self.view.frame = CGRectMake(0, 0, 320, 416); 
```

到我的dismissViewControllerAnimated:completion 方法（这些值适用于iPhone < 5，仅用于解释）。但这并不能真正解决问题，因为当我要呈现下一个模态视图控制器时，呈现的视图会向上移动大约状态栏的高度偏移量。

不知道这个问题是如何产生的。我的怀疑是，在 segue 的某个地方，导航控制器之一丢失了状态栏的存在（以某种方式链接到新的状态栏？）。

编辑：主视图的屏幕截图，模态解除后。[注意：底部有 20px 空白]![在此处输入图像描述](../Images/362bdd7023db88541c9b89451266ac51.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T15:01:39.140

解决了这个问题。我的习惯`navigationController`是`supportedInterfaceOrientations`回归`UIInterfaceOrientationPortrait`，而不是`UIInterfaceOrientationMaskPortrait`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:44:51.780

您的回答对我也不起作用，但我找到了 Mike Foster 的解决方案：http: [//fostah.com/ios/2012/09/27/ios6-orientation-handling.html](http://fostah.com/ios/2012/09/27/ios6-orientation-handling.html)

他的步骤是：

1.  添加应用程序supportedInterfaceOrientation并让它返回UIInterfaceOrientationMaskAll（或者在我的情况下我使用AllButUpsideDown）
2.  在你的 rootViewController 中实现 shouldAutorotate 并让它返回 NO
3.  不要在你的 rootViewController 中实现 supportedInterfaceOrientations （这似乎是导致我的状态栏出现问题的步骤）
4.  在应该是景观的 viewController 中，实现 shouldAutorotate 以返回 NO 和 supportedInterfaceOrientations 以返回 UIInterfaceOrientationMaskLandscape

希望这可以帮助其他一些人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:54:44.210

这个答案对我不起作用，即使我具有与 rootViewController 相同的自定义 navigationController 结构。在我的应用程序中，除了我的模态框（UIInterfaceOrientationMaskAll）之外，我希望所有 VC 都采用纵向模式。

起作用的是您的解决方法的变体，除了它将考虑 iPhone 4 和 iPhone 5 的屏幕尺寸和导航栏的高度：

```
[yourParentVC dismissViewControllerAnimated:NO completion:^{

    [yourParentVC.view setFrame:CGRectMake(0, 0, [UIScreen mainScreen].applicationFrame.size.width, [UIScreen mainScreen].applicationFrame.size.height-44)];
    //your other completion code
}]; 
```

+1 提出这个问题......不高兴它为 iOS 6 中的所有弃用做了多少工作，所以每一点都有帮助。

# sql-server-2008 - 在 SQL Server 2008 上重建索引后没有真正的性能提升

> ID：12567235
> 
> 赞同：0
> 
> 时间：2012-09-24T14:37:19.663
> 
> 标签：sql-server-2008, indexing, clustered-index

我有一个表，其复合聚集索引 ( `int, DateTime`) 有 99% 是碎片化的。

在进行碎片整理并确保更新了统计信息后，我在运行此查询时仍然得到相同的响应时间：

```
SELECT *
FROM myTable
WHERE myIntField = 1000 
AND myDateTimeField >= '2012-01-01' 
and myDateTimeField <= '2012-12-31 23:59:59.999' 
```

好吧，我看到响应时间略有改善（比如 5-10%），但我真的希望在索引重建和统计更新后突然查询。

预计执行计划为：

1.  `SELECT Cost: 0%`
2.  `Clustered Index Seek (Clustered)[MyTable].[IX_MyCompoundIndex] Cost: 100%`

这是因为索引是聚集索引吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:48:17.537

您应该避免`SELECT *`- 即使您*确实*需要表中的所有列（这很少见）。

另外，你在这里做一些非常危险的事情。您是否知道您的结束范围会向上取整，因此您可能会在午夜包含 2013 年 1 月 1 日的数据？尝试：

```
AND myDateTimeColumn >= '20120101' 
AND myDateTimeColumn <  '20130101' 
```

（这不会改变性能，但是无论底层数据类型是什么，它都更容易生成*并且保证准确。）*

为了消除查询时间分析中的网络延迟，您可以考虑[SQL Sentry Plan Explorer](http://sqlsentry.net/plan-explorer/sql-server-query-view.asp) - 它允许您通过对服务器运行查询来生成实际计划，但会丢弃结果，因此这不是干扰因素。

*免责声明：我为 SQL Sentry 工作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:07:59.697

查询的执行时间将花费在读取索引 btree 的足够页面以生成结果上。对索引进行碎片整理会将相邻的行放在一起，从而减少需要读取的页数。它还可以从将很大程度上随机的 io 模式转换为顺序模式中受益。

如果您的行很宽并且每页没有很多行，您将不会看到行数减少太多。

如果您的索引填充因子较低，则每页不会有那么多行。

如果您的页面在缓存中，您将看不到任何流式传输和随机 IO 的好处。

如果您的机器上有空闲的 CPU 容量，您可能会从使用页面压缩中受益。这实质上是用更多的 CPU 换取更少的 IO。

# cocos2d-iphone - cocos2D iOS 6 视网膜显示

> ID：12567239
> 
> 赞同：2
> 
> 时间：2012-09-24T14:37:29.633
> 
> 标签：cocos2d-iphone, ios6, retina-display

我正在使用 cocos2D 和 TexturePacker。我的游戏在 iOS < 6 下可以正常运行。自从我升级到 iOS 6 后，我的图像在视网膜中显示为 4 倍。看起来它正在显示视网膜图像而没有将其压缩 4。

# html - 相当于 IE8、IE7 和旧版浏览器的 div display inline-block

> ID：12567240
> 
> 赞同：8
> 
> 时间：2012-09-24T14:37:30.037
> 
> 标签：html, internet-explorer-8, cross-browser, css

这是一个关于跨浏览器兼容性的相当普遍的问题。

在设计的各个方面，我目前正在研究实现我想要的布局和样式（不求助于使用图像）的唯一方法是使用`display:inline-block`css 样式选项。但是，IE8 和其他较旧的浏览器不支持此功能，这导致我的设计被破坏。

所以我的问题 1 有两个部分 - 有没有一种方法可以为 IE8 实现类似或等效的效果？2 - 如果不是，我怎样才能让我的设计顺利降级？

供您参考，这是我的设计中使用它的示例。

`<div style="width:20px; height:20px; display:inline-block; background-color:rgb(200,120,120); margin-right:10px;"></div>Direct`

它是一个 20x20 像素的色块，用于解释图表中的颜色。

更一般地说，每当我想要对正文中的特定文本位等进行更大的格式和布局控制时，就会出现这个问题。

在我目前正在进行的设计中，无论如何我都会放弃对旧浏览器类型的支持，因为它严重依赖于 canvas 元素。但是，我认为这将是一个很好的问题，因为我之前曾多次遇到过这个问题。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T14:46:26.480

这是涵盖此主题的好资源：http: [//foohack.com/2007/11/cross-browser-support-for-inline-block-styling/](http://foohack.com/2007/11/cross-browser-support-for-inline-block-styling/)

基本上 IE 有一个称为“hasLayout”的触发器。触发此操作将允许您`display:inline-block`在块级元素上使用（默认情况下，IE 仅允许在本机内联元素上使用 inline-block）。

此外，旧版本的 Fire Fox 也不支持 inline-block，但有一个“inline-stack”值 ( `moz-inline-stack`)。

据我所知，这是获得跨浏览器的最佳方式`display:inline-block`：

```
display:-moz-inline-stack;
display:inline-block;
zoom:1;
*display:inline; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-09T12:52:53.287

[如此处](http://foohack.com/2007/11/cross-browser-support-for-inline-block-styling/)给出：

> IE 支持内联块，但仅适用于本机内联的元素。所以，如果你真的想使用 inline-block，你只能使用 spans、strongs 和 ems ......

是的，这不合逻辑，因为*通常*使用 div 或 span 都没关系……但请记住 - 这是 IE :)

所以只需更改`<div>`为`<span>`，就是这样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:03:51.310

使用此代码

```
*display: inline;
*vertical-align: middle; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-15T15:58:37.383

```
 display: inline-block; 
  *zoom: 1; 
  *display: inline; 
```

您可以为其他浏览器添加内联块，但对于 IE，您可以使用 *. 它只适用于ie

# c# - 在 Excel VSTO 2007 中格式化为表格 (TableStyles)，错误：一个表格不能与另一个表格重叠

> ID：12567241
> 
> 赞同：1
> 
> 时间：2012-09-24T14:37:32.207
> 
> 标签：c#, excel, vsto, add-in

我正在制作一个加载项，我正在尝试格式化我的加载项生成的输出，使用格式作为 Excel 提供的表格样式。

您在功能区上的“主页选项卡”->“格式为表格”按钮上获得的那个。

我正在使用以下代码：

```
SourceRange.Worksheet.ListObjects.Add(XlListObjectSourceType.xlSrcRange,
 SourceRange, System.Type.Missing, xlYesNo, System.Type.Missing).Name =
 TableName;

SourceRange.Select();

SourceRange.Worksheet.ListObjects[TableName].TableStyle = TableStyleName; 
```

TableStyleName 是任何样式名称，例如 TableStyleMedium17，如果您将鼠标悬停在 Excel 中的特定样式，您就会得到它。

我的问题是，即使我保留`SourceRange`10 列，直到最后的所有列都被选中并被视为一个表。因为我在它旁边填充的表也被认为是生成的第一个表的一部分。因为，两个表都具有相同的列名，所以 Excel 会自动更改以下所有生成的表中的列名。另外，因为我在生成 2 个表后循环生成表，所以我收到错误：

> 一个表不能与另一个表重叠。

PS：我清楚地提到`SourceRange`：

```
var startCell = (Range)worksheet.Cells[startRow, startCol];
var endCell = (Range)worksheet.Cells[endRow, endCol];
var SourceRange = worksheet.get_Range(startCell, endCell); 
```

请提出一条出路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-30T21:20:26.663

我们能够弄清楚为此发生了什么：

在 `xlWorkbook.Worksheets.Add([before],[after], Type.Missing, Type.Missing)` 通话中，我们必须前后翻转，因为我们希望工作表向右移动，而不是向左移动，然后 `xlWorkbook.Worksheets[sheetCount]` 通过增加工作表数来访问，无论生成多少工作表。

另一种方法是创建工作表以从`SourceRange.Worksheet.ListObjects[TableName].TableStyle = TableStyleName`调用中访问先前分配的表格格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T12:09:00.880

所以，我在发布这个一周后解决了这个问题，抱歉没有及时更新。
这实际上是一个内置的 Excel 功能。你不能帮助它，excel应用程序将继续这样做。
因此，最终用 c# 编写了我自己的表格样式并将其应用于称为***SourceRange***的 excel 范围。就像写 CSS 一样。
如果您有兴趣了解该评论的详细信息，请关注此问题本身，或者您可以通过我的个人资料中的电子邮件与我联系。

# c# - 在 where 中连接一个字符串过滤器

> ID：12567247
> 
> 赞同：1
> 
> 时间：2012-09-24T14:37:50.833
> 
> 标签：c#, linq-to-sql

我想在我的 Linq-to-SQL 请求中连接我的过滤器字符串。这是我第一次接触 c# 和 Linq。

```
string f = "where 1==1";
            if (!string.Equals(t, "0"))
            {
                f += " AND p.lId==" + a;           
            }
            if (!string.Equals(tc, "0"))
            {
                f += " AND p.tp.Id==" + b;
            } 
```

我想在这样`where`的 Linq 查询中用我的替换这个字符串

```
var req = from p in db.Pt
                         +f+
                         select new { L= p.bt, Lg = p.Sl }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:43:21.020

您尝试做的事情可以通过 LINQ`Where`方法实现：

```
var req = db.Pt;

if (!string.Equals(t, "0"))
{
    req = req.Where(p => p.lId == a);
}

if (!string.Equals(tc, "0"))
{
    req = req.Where(p => p.tp.Id == b);
}

req = req.Select(p = >  new { L= p.bt, Lg = p.Sl }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:42:28.633

我不鼓励对 linq 使用字符串连接，但如果你真的需要它（我的意思是奇怪的场景），你可以尝试 DynamicLinq

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:44:34.700

您可以使用以下内容：

```
var query = from p in db.Pt
            select p;

if (!string.Equals(t, "0"))
{
  query = query.Where(p => p.lId== a);
}

if (!string.Equals(tc, "0"))
{
   query = query.Where(p => p.tp.Id== ba);
}

var req = from p in query
          select new { L= p.bt, Lg = p.Sl }; 
```

Linq 可以通过这种方式动态组合。如果你现在做一个`req.ToList();`你的查询将被执行。由于这种惰性行为，您可以按不同的步骤编写查询。

# c++ - ODBC SQLDriverConnect 未连接

> ID：12567248
> 
> 赞同：0
> 
> 时间：2012-09-24T14:37:53.143
> 
> 标签：c++, oracle, odbc, database-connection, connection-string

我在 C++ 中使用 ODBC API 连接到数据库。我已经使我的连接功能一切正常，直到我到达 SQLDriverConnect 。

```
 _TUCHAR szConnectOutput[3000];
         SWORD nResult;

         retcode = SQLDriverConnect(hdbc, NULL,
                    (SQLTCHAR *)szDNS, SQL_NTS,szConnectOutput, 3000,
                    &nResult, SQL_DRIVER_NOPROMPT);

         if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) 
```

retcode 返回为 -1 。我不确定是什么问题，可能是我的 DSN 格式错误。我的 DNS 是 DSN="DSN=Messe10_2;Uid=test;Pwd=test"; .我试图连接的数据库是一个 Oracle 数据库。我的 DSN 格式错误吗？还是我有其他问题？

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:06:27.763

它失败的原因可能有很多 - 您是否通过 ODBC 管理器测试了 DSN。失败时调用 SQLGetDiagRec，您会发现原因。有关 C 中的示例，请参阅[ODBC 诊断和错误状态代码](http://www.easysoft.com/developer/interfaces/odbc/diagnostics_error_status_codes.html)。鉴于您提供的信息，例如“DSN=x;UID=y;PWD=z”是一个有效的连接字符串，我看不出有任何明显错误。

# mysql - 基本的mysql代码不起作用

> ID：12567253
> 
> 赞同：-5
> 
> 时间：2012-09-24T14:38:02.190
> 
> 标签：mysql, sql

```
CREATE TABLE users (
    user_id PRIMARY KEY AUTO_INCREMENT(10000,1), 
    first_name varchar(20), 
    last_name varchar(20), 
    email_address varchar(50), 
    facebook_url varchar(50), 
    bio varchar(20)
); 
```

给出的错误是

> 您的 SQL 语法有错误：检查与您的 MySQL 服务器相对应的手册以获取正确的语法以在第 1 行使用**'PRIMARY KEY AUTO_INCREMENT(10000,1), first_name varchar(20), last_name varchar(2'**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T14:41:25.963

您的`user_id`列没有数据类型。

[此外，我在MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)中没有看到任何关于您使用`AUTO_INCREMENT`. 如果您删除您试图传递的参数，它的工作原理：[http ://sqlfiddle.com/#!2/7f9c6](http://sqlfiddle.com/#!2/7f9c6)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T14:47:44.417

有一些问题，您缺少我`user_id`字段上的数据类型。但是，如果您想将 设置`AUTO_INCREMENT`为从特定值开始，则需要使用`ALTER TABLE`：

```
CREATE TABLE users 
(
  user_id int not null AUTO_INCREMENT PRIMARY KEY, 
  first_name varchar(20), 
  last_name varchar(20), 
  email_address varchar(50), 
  facebook_url varchar(50), 
  bio varchar(20)
); 
```

`Auto_Increment`这将创建您的表，但如果您想设置为[MySql Docs](http://dev.mysql.com/doc/refman/5.0/en/alter-table.html)的起始值：

> 要更改用于新行的 AUTO_INCREMENT 计数器的值，请执行以下操作：
> 
> ALTER TABLE t2 AUTO_INCREMENT = 值；

添加以下行：

```
ALTER TABLE users AUTO_INCREMENT = 10000; 
```

测试以确保这些值有效：

```
insert into users (first_name, last_name) values
('test1', 'test'),
('test2', 'test'),
('test3', 'test'); 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/46df6/1)

或者，如果您不想使用`ALTER TABLE`，可以合并到`CREATE TABLE`语句中：

```
CREATE TABLE users 
(
  user_id int not null AUTO_INCREMENT PRIMARY KEY, 
  first_name varchar(20), 
  last_name varchar(20), 
  email_address varchar(50), 
  facebook_url varchar(50), 
  bio varchar(20)
)AUTO_INCREMENT = 10000; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:42:12.677

你应该有`AUTO_INCREMENT`一个`INTEGER`类型列。所以，

```
user_id INTEGER PRIMARY KEY AUTO_INCREMENT(10000,1), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:42:13.813

user_id PRIMARY KEY AUTO_INCREMENT(10000,1) 没有定义数据类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T14:42:37.380

这个怎么样：

```
CREATE TABLE users (
  user_id int not null PRIMARY KEY AUTO_INCREMENT, 
  first_name varchar(20), 
  last_name varchar(20), 
  email_address varchar(50), 
  facebook_url varchar(50), 
  bio varchar(20)
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T14:43:31.700

尝试这个：

```
CREATE TABLE users (
    user_id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, 
    first_name varchar(20), 
    last_name varchar(20), 
    email_address varchar(50), 
    facebook_url varchar(50), 
    bio varchar(20)
); 
```

您缺少 user_id 的列类型（假设为 INT）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T14:47:43.117

试试这个： CREATE TABLE users (user_id INT UNSIGNED NOT NULL AUTO_INCREMENT = 10000, PRIMARY KEY (user_id), first_name varchar(20), last_name varchar(20), email_address varchar(50), facebook_url varchar(50), bio varchar(20 ));

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-09-24T14:42:41.063

尝试这个：

创建表`users`（`user_id`int（10）无符号AUTO_INCREMENT（10000,1），`first_name`varchar（20），`last_name`varchar（20），`email_address`varchar（50），`facebook_url`varchar（50），`bio`varchar（20），主键（`user_id`））；

# php - 使用 PHP 以数组形式返回 CSV 文件的特定行

> ID：12567255
> 
> 赞同：-4
> 
> 时间：2012-09-24T14:38:03.347
> 
> 标签：php, arrays, csv

> **可能重复：**
> [如何从 php 中的 csv 文件中提取数据](https://stackoverflow.com/questions/2805427/how-to-extract-data-from-csv-file-in-php)

我想从 CSV 文件中打印一个数组。它包含 4 行。第一行带有 id 编号，第二、第三和第四行带有相应的值。

根据值，我想打印 ID 号。请帮助我，因为我是 php 新手。

就像如果 value == 1 ， print_r($id)

但我不确定如何指向那​​个特殊的 id。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-24T14:39:27.433

看看[fgetcsv()](http://php.net/manual/en/function.fgetcsv.php)，它将极大地帮助你

我已经修改了 PHP 文档中的示例，以更符合我对您需求的理解。

```
<?php
if (($handle = fopen("test.csv", "r")) !== false) {
    while (($data = fgetcsv($handle) !== false) {
        // assuming 'id' is the first column
        // if id is 1, output the row...
        if ($data[0] == 1) {
            print_r($data);
        }
    }
    fclose($handle);
} 
```

# android - 无法解析目标“Google Inc.:Google APIs:16”

> ID：12567256
> 
> 赞同：7
> 
> 时间：2012-09-24T14:38:15.263
> 
> 标签：android

当我从 Internet 添加另一个项目时，我遇到了这个问题。我认为它要求我使用另一个版本的目标 android。但我希望我的应用程序可以在 android 2.2 中运行。

但它不需要 API-8，它需要 API-16，我不确定我应该做什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T14:42:16.460

修改 AndroidManifest.xml 文件，以便其中的任何版本都是 Android 2.2。还可以通过在 Eclipse 中右键单击项目并转到属性-> android 并将版本更改为 2.2 来更改使用的 SDK 版本。不过，有些事情可能会破裂。通常会声明清单中声明的​​版本，因为项目使用仅适用于该版本或更高版本的 SDK 功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T15:12:02.467

即使您的目标是较新版本，您的应用仍可在较旧版本上运行。目标是您测试过您的应用程序可以使用的版本。如果您以最新版本 (API 16) 为目标，那么在旧手机上运行时，您的应用将不会进入“兼容模式”。例如，如果您在 2.x 中有一个菜单按钮，但您的目标是 API 16，则此菜单按钮不会显示在某些手机上，因为您应该使用`ActionBar`.

这`minSdkVersion`是您正在考虑的，这将确保您的应用程序在旧版本上运行：

```
<uses-sdk android:minSdkVersion="8" /> 
```

因此，您的问题的解决方案就是通过 SDK Manager 下载最新的 API 级别。您很可能只是没有安装 API 16。

# android - 我从数据库中得到一个Cursor，然后修改数据库中的一行，Cursor 中的数据会不会改变？

> ID：12567257
> 
> 赞同：1
> 
> 时间：2012-09-24T14:38:14.687
> 
> 标签：android, android-sqlite

假设我得到一个`Cursor`by `db.query()`。
然后我修改一行中的一个字段`db.update()`，并且该行包含`Cursor`在之前的查询中。此游标中的数据是否会更改？

像这样：

```
Cursor cur = db.query("[some parameter can get row 0]"); 
cur.moveToFirst; 
int a = cur.getInt(0);
db.update("[some parameter can modify row 0 col 0]");
int b = cur.getInt(0); 
```

(a==b) 是真还是假？

====== 2012.10.1 编辑 =========
我不是专业程序员，最近忙得没时间写代码。
如果我让你不开心，我很抱歉。
终于可以放一周假了，哈哈。

我做了一些这样的编码：

```
SQLiteOpenHelper h = null;
SQLiteDatabase db = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    h=new SQLiteOpenHelper(this, "test.db", null,1){

        @Override
        public void onCreate(SQLiteDatabase arg0) {
            // TODO Auto-generated method stub
            arg0.execSQL("CREATE TABLE t1 (_id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT )");
            arg0.execSQL("INSERT INTO t1 (name) VALUES ('name_wrong')");
        }

        @Override
        public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
            // TODO Auto-generated method stub

        }};

    db=h.getWritableDatabase();
    Cursor cur =  db.query("t1", null, null, null, null, null, null);
    cur.moveToFirst();
    String s1=cur.getString(1);

    db.execSQL("UPDATE t1 SET name = 'name_right'");

    String s2=cur.getString(1);
    Log.d("","s1 = "+s1);
    Log.d("","s2 = "+s2);
    Log.d("","s1 == s2 is "+s1.equals(s2));
    Log.d("","requery...");
    cur =  db.query("t1", null, null, null, null, null, null);
    cur.moveToFirst();
    s2=cur.getString(1);
    Log.d("","s1 = "+s1);
    Log.d("","s2 = "+s2);
    Log.d("","s1 == s2 is "+s1.equals(s2));
} 
```

logcat 说：

`10-01 03:11:28.356: D/(1514): s1 = name_wrong`
`10-01 03:11:28.356: D/(1514): s2 = name_wrong`
`10-01 03:11:28.356: D/(1514): s1 == s2 is true`
`10-01 03:11:28.356: D/(1514): requery...`
`10-01 03:11:28.356: D/(1514): s1 = name_wrong`
`10-01 03:11:28.356: D/(1514): s2 = name_right`
`10-01 03:11:28.356: D/(1514): s1 == s2 is false`

所以我想我得到了答案谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:51:11.777

1.  除非您重新查询，否则您看不到任何更改。
2.  游标不是活的。也就是说，一旦您加载了游标，它就与数据库无关了。它只是一个数据结构（如数组）。

*基本上*

> (a==b) 是真还是假？

错误的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:42:20.490

我相信游标会发生变化，因为游标只是指向记录/数据集的指针。我不相信它们本身就是一个实际的基于内容的数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-23T11:19:44.617

[https://sqlite.org/isolation.html](https://sqlite.org/isolation.html)

如果在查询开始运行之后但在查询完成之前在同一数据库连接上发生更改，则未定义查询是否会看到这些更改。

如果在查询开始运行之后但在查询完成之前在同一数据库连接上发生更改，则查询可能会多次返回已更改的行，或者它可能会返回先前删除的行。

# ios - 如何通过用户代理检测 iOS 6 和所有次要版本？

> ID：12567260
> 
> 赞同：7
> 
> 时间：2012-09-24T14:38:28.540
> 
> 标签：ios, regex, user-agent, ios6

如何使用简单的正则表达式或其他东西通过用户代理检测 iOS 6 和所有次要版本？也可以区分 iphone 和 ipad。

* * *

这个问题不同于[iOS 6 用户代理字符串是什么？](https://stackoverflow.com/questions/12305566/what-is-the-ios-6-user-agent-string)因为我需要根据我已经知道的信息（可以在链接的问题中找到）构建正则表达式的帮助

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-25T10:08:53.957

**变更日志**

> **20/01/2017**
> 
> *   UA 字符串更新：141 匹配，0 部分匹配，797 无效行
>     
>     
> *   “Mobile Safari 1.1.3 (iPhone U; CPU like Mac OS X; en)”即使提到 iPhone 也被视为无效。`iPhone`实际上，可疑的术语后面缺少分号。
>     
>     
> *   Safari 8+ 尚未出现在 UserAgentString.com 上

**先决条件**

*   以下正则表达式是通用的。
*   它将匹配在移动设备上运行的 Safari 用户代理字符串 (SUAS)（请参阅下面的支持设备列表）。
*   正则表达式基于[UserAgentString.com](http://useragentstring.com/pages/useragentstring.php?all=TRUE&name=Safari&vers=)截至**20/01/2017**的已知 SUAS 。

**正则表达式**

```
^(?:(?:(?:Mozilla/\d\.\d\s*\()+|Mobile\s*Safari\s*\d+(?:\.\d+)+\s*)(?:iPhone(?:\s+Simulator)?|iPad|iPod);\s*(?:U;\s*)?(?:[a-z]+(?:-[a-z]+)?;\s*)?CPU\s*(?:iPhone\s*)?(?:OS\s*\d+_\d+(?:_\d+)?\s*)?(?:like|comme)\s*Mac\s*O?S?\s*X(?:;\s*[a-z]+(?:-[a-z]+)?)?\)\s*)?(?:AppleWebKit/\d+(?:\.\d+(?:\.\d+)?|\s*\+)?\s*)?(?:\(KHTML,\s*(?:like|comme)\s*Gecko\s*\)\s*)?(?:(?:Version|CriOS)/\d+(?:\.\d+)+\s*)?(?:Mobile/\w+\s*)?(?:Safari/\d+(?:\.\d+)*.*)?$ 
```

**支持的设备列表**

*   苹果手机
*   iPhone 模拟器
*   iPad
*   iPod

**解释/定制**

*可以自定义以**C开头的行。***

```
 1\. ^(?:(?:(?:Mozilla/\d\.\d\s*\()+|Mobile\s*Safari\s*\d+(?:\.\d+)+\s*)
C 2\.     (?:iPhone(?:\s+Simulator)?|iPad|iPod);\s*
  3\.     (?:U;\s*)?
  4\.     (?:[a-z]+(?:-[a-z]+)?;\s*)?
  5\.     CPU\s*
  6\.          (?:iPhone\s*)?
C 7\.          (?:OS\s*\d+_\d+(?:_\d+)?\s*)?
C 8\.          (?:like|comme)\s*Mac\s*O?S?\s*X
  9\.      (?:;\s*[a-z]+(?:-[a-z]+)?)?
  10\. \)\s*)?
  11\. (?:AppleWebKit/\d+(?:\.\d+(?:\.\d+)?|\s*\+)?\s*)?
C 12\. (?:\(KHTML,\s*(?:like|comme)\s*Gecko\s*\)\s*)?
C 13\. (?:(?:Version|CriOS)/\d+(?:\.\d+)+\s*)?
  14\. (?:Mobile/\w+\s*)?
  15\. (?:Safari/\d+(?:\.\d+)*.*)?$ 
```

**第 1 行**。UA 字符串可能不同，因此引入此行是为了尽可能多地接受 UA 字符串。
**第 2 行。**您可以在此处指定接受设备的管道分隔列表。
(...)
**第 7 行。**此处显示版本。如果您需要特殊版本，请更改此行。不要忘记更新**第 13 行**。例如，匹配*iOS 5.xy*使用`(?:OS\s*5_\d+_\d+\s*)?`.
**第 8 行。**翻译了一些用户代理字符串。这个词`like`可以翻译成外语。正则表达式现在支持`English`和`French`。如果您遇到其他语言，请调整此行。不要忘记更新**第 12 行**。
(...)
**第 12 行。**见**第 8**
**行。第 13 行。**见**第 7 行。**例如，匹配*iOS 5.xy*使用`(?:Version/5\.\d+\.\d+)?\s*)?`.

# c# - WPF 绑定：在显示相同值的 DataTemplate 内的 TextBox 中编辑值

> ID：12567270
> 
> 赞同：1
> 
> 时间：2012-09-24T14:38:51.660
> 
> 标签：c#, wpf, binding, datatemplate

我想创建一个调试窗口，允许我们在应用程序运行时编辑应用程序中各种对象的属性。例如，这将允许我们调整应用程序中某些启发式规则的阈值，而无需重新构建和/或重新启动应用程序。

目标是告诉调试窗口启用编辑对象的某些属性。然后窗口获取属性的值，保持对对象的弱引用，并显示适当的数据模板（基于值的类型），使我们能够在需要时编辑值并将新值应用于对象。

**问题：**

数据模板已正确应用，并且在`TextBox`. 但是，绑定到`Value`的 each 的属性*永远不会*更新。我在该属性的设置器上设置了一个断点；断点永远不会被触发。`DebugItem``TextBox`

 ***这是我当前的设置：**

*   我的视图模型中有一`DebugItems`组`DebugItem`对象。
*   每个`DebugItem`都有`Value`type 的属性`object`。
*   出于调试目的，该`Value`属性始终包含一个字符串。
*   我已经为`DebugItem`类型和`System:String`类型创建了一个数据模板。
*   我的窗口包含一个`ListBox`绑定到`DebugItems`集合并`DebugItem`使用上面定义的数据模板在 ContentPresenter 中显示的 s。`TextBox`该数据模板内部的A*也*绑定到 ，`Value`因此它使我们能够使用`System:String`上面定义的另一个数据模板来编辑字符串值***。

***我的印象是，这与编辑不起作用的原因有关。我可能弄错了，通过。

**窗口的相关部分：**

```
<Grid Background="#CECECE">
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <ItemsControl ItemsSource="{Binding DebugItems}" Background="Transparent" BorderBrush="Transparent" />
    </ScrollViewer>
</Grid> 
```

**我的数据模板：**

（特别感兴趣的是内部`ContentPresenter`及其嵌入的`System:String`数据模板。）

```
<DataTemplate DataType="{x:Type Debug:DebugItem}">
    <Grid Height="60" d:DesignWidth="403.06">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="140" />
                <ColumnDefinition Width="181*" />
                <ColumnDefinition Width="110" />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0" Text="{Binding Label}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="14,0,0,0" Foreground="Black" FontWeight="Bold" />
            <ContentPresenter VerticalAlignment="Center" Grid.Column="1" Content="{Binding Value}" Height="Auto">
                <ContentPresenter.Resources>

                    <!-- String -->
                    <DataTemplate DataType="{x:Type System:String}">
                        <TextBox Text="{Binding Path=., Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </DataTemplate>

                </ContentPresenter.Resources>
            </ContentPresenter>
            <UniformGrid Grid.Column="2" Rows="1">
                <Button Margin="8,8,0.5,8" Command="{Binding UpdateCommand}" Style="{DynamicResource ButtonStyle}" Content="Update" />
                <Button Margin="4.5,8,8,8" Command="{Binding ApplyCommand}" Style="{DynamicResource ButtonStyle}" Content="Apply" />
            </UniformGrid>
        </Grid>
    </Grid>
</DataTemplate> 
```

有任何想法吗？*

# asp.net - 在 ASP.NET 中使用 Parallel.ForEach 会阻止其他线程处理请求吗？

> ID：12567271
> 
> 赞同：1
> 
> 时间：2012-09-24T14:38:51.833
> 
> 标签：asp.net, parallel-extensions, parallel.foreach

我正在考虑在 ASP.NET 应用程序中使用一些 PLINQ 来增加我们拥有的一些 I/O 绑定和计算绑定处理的吞吐量（例如，迭代一个集合以用于 Web 服务调用并计算一些地理坐标距离）。

我的问题是：我是否应该担心正在运行的操作`Parallel.ForEach`会占用线程来处理其他请求，或者它是否使用单独的线程池（我听说过称为 I/O 完成端口的东西，但不确定它是如何发挥作用的进入讨论）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:45:46.967

`Parallel.ForEach`最多[将一个线程用于尽可能多的内核](https://stackoverflow.com/questions/1114317/does-parallel-foreach-limits-the-number-of-active-threads)。线程池的默认最大大小是[您拥有的核心数的 250 倍](https://stackoverflow.com/questions/2043909/threadpool-setmaxthreads-and-setminthreads-magic-number)。因此，您必须真正尝试用完可用线程。

# powershell - 如何在 PowerShell 中设置本地管理员组？

> ID：12567273
> 
> 赞同：0
> 
> 时间：2012-09-24T14:38:55.687
> 
> 标签：powershell

下面的代码很好地设置了域管理员组。但是，我还需要在我的文件夹上设置本地管理员 [COMPUTER-NAME\Administrators] 组。

```
function Set-DirACLs
    {
        # Gets the names of the directories in the  directory and adds them to an array. 

        $dircount = Get-ChildItem $UV | foreach-object -process { $_.FullName }
        $cname = $env:computername
        $localadmin =  "$cname\" + "Administrators"
        $userlist = @("MYDOMAIN\Domain Admins", $localadmin)
        #Loops through the directories and sets the ACL on each.
        foreach($folder in $dircount)
        {
            #Print some info to the console so we don't mistake the script being stuck. 
            Write-Host "Editing ACL for $folder "
            Write-Host "Standby "
            Write-Host $localadmin
            $InheritanceFlag = [System.Security.AccessControl.InheritanceFlags]::ContainerInherit -bor [System.Security.AccessControl.InheritanceFlags]::ObjectInherit
            $PropagationFlag = [System.Security.AccessControl.PropagationFlags]::none 
            $colRights = [System.Security.AccessControl.FileSystemRights]"FullControl"
            $objType =[System.Security.AccessControl.AccessControlType]::Allow
            $ACL = Get-Acl $folder 
            $folder = (convert-path $ACL.pspath)
            $acl.SetAccessRuleProtection($True, $False)
            #Now we have to iterate over the users in userlist for each directory.
            foreach($user in $userlist)
            {
                $objUser = New-Object System.Security.Principal.NTAccount($user)
                $rule = New-Object System.Security.AccessControl.FileSystemAccessRule($objUser, $colRights, $InheritanceFlag,$PropagationFlag, $objType) 
                $ACL.AddAccessRule($rule) 

                Set-Acl $folder $ACL 
            }
        }
    } 
```

但是我不断收到此错误，无论我如何更改 $localadmin 变量以连接计算机名 + \Administrators 我都会收到此错误

```
Exception calling "AddAccessRule" with "1" argument(s): "Some or all identity references could not be translated." 
```

这让我发疯了！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:08:49.740

尝试改变这个：

```
$localadmin =  "BUILTIN\Administrators" 
```

那么这一行就不再需要了：

```
$cname = $env:computername 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:02:48.440

我对此大惊小怪，最后这是有效的：

```
$userlist = @("MYDOMAIN\Domain Admins",  $cname + "\Administrators") 
```

遗憾的是，我知道在我在这里问这个问题之前我试过了，但它没有用。我想我第一次离开了我的东西。

# javascript - 匹配和捕获双重标识的字符实体/引用的最佳方法？

> ID：12567274
> 
> 赞同：-2
> 
> 时间：2012-09-24T14:38:56.373
> 
> 标签：javascript, html, regex, character-entities

我说的是`&amp;amp;`那些将渲染到的东西：`&amp;`它实际上应该渲染到`&`. 在[这篇](https://stackoverflow.com/questions/12566098/what-are-the-longest-and-shortest-html-character-entity-names#comment16927915_12566098)文章中，我询问了如何匹配实体，但对于正则表达式来说，这似乎不太可能或不现实。那么匹配双重实体的最佳方法是什么？

**编辑：**这是一个好方法吗？`.replace(/&amp;(?=#?x?[0-9a-z]+);/i, '&');`

（我正在使用 JavaScript）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:53:41.020

我会去

```
 pattern       &([a-zA-Z0-9]+?;)\1
 replacement   &$1 
```

仅替换双放大器，或：

```
 pattern       &amp;([#a-zA-Z0-9]+?;) 
```

编辑：

你的模式

```
 /&amp;(?=#?x?[0-9a-z]+);/i 
```

对我来说看起来也不错。

注意：这些都不是您可以信任的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:44:35.107

可能：

```
&amp;[a-zA-Z]+; 
```

虽然不是万无一失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:48:23.013

首先标准化您的数据。使用您对编码的了解将它们解码回字符/数据片段只有一种可能编码的形式。之后，将此规范化数据与规范化模式匹配。

# c++ - 在运行时指定对象类型

> ID：12567277
> 
> 赞同：0
> 
> 时间：2012-09-24T14:39:05.717
> 
> 标签：c++, rtti

> **可能重复：**
> [有没有办法从保存类名的字符串中实例化对象？](https://stackoverflow.com/questions/582331/is-there-a-way-to-instantiate-objects-from-a-string-holding-their-class-name)

我编写了一个 Vbo 模板类来处理 opengl 中的顶点缓冲区对象。我正在用 C++ 编写多个平台。

我想在运行时从配置文件中设置类型。

例如

```
<vbo type="bump_vt" ... />

Vbo* pVbo = new Vbo<bump_vt>(...); 
```

有没有什么方法可以在没有大的 if else 块的情况下做到这一点，例如

```
 Vbo* pVbo;

if( sType.compareTo("bump_vt") == 0 )
    pVbo = new Vbo<bump_vt>(...);
else if
    ... 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:49:26.673

C++ 不允许这样做，因为类型是在编译期间解析的。

但是您可以使用 std::map 来简化该过程。

# wcf - WCF 新手 - 是 FaultException 对非.NET 客户端安全吗？

> ID：12567278
> 
> 赞同：0
> 
> 时间：2012-09-24T14:39:08.073
> 
> 标签：wcf

WCF 新手警报。我正在阅读“学习 WCF”和“编程 WCF 服务”，这两本书都建议抛出 FaultException<T>。如果 T 是 .NET 类型“DivideByZeroException”并假设存在一个 FaultContract

> [FaultContract(typeof(DivideByZeroException))]

在方法“Divide”上，使用该 WCF 服务和方法的非 .NET 客户端是否能够理解和处理该 .NET 异常？如果是，是否因为类型信息 (DivideByZeroException) 是客户端有权访问和使用的元数据的一部分（由于 FaultContract）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:02:31.593

您可以抛出`FaultContract<DivideByZeroException>`，但通常您不应该这样做，这正是您提到的原因 (*)。通常推荐的是与来自异常的信息（例如异常消息）建立数据协定，然后拥有`FaultContract`该类型的数据协定。

```
[DataContract]
public class MyErrorDetails
{
    [DataMember]
    public string ErrorCode { get; set; }
    [DataMember]
    public string ErrorMessage { get; set; }
} 
```

然后使用

```
[FaultContract(typeof(MyErrorDetails))] 
```

(*) 避免将异常作为故障返回的另一个原因是它们向客户披露的信息比客户需要的多；堆栈跟踪之类的东西被异常序列化，但这是服务内部的一些信息，不应该发送给客户端。

# spring - 一对多休眠，保存空值

> ID：12567279
> 
> 赞同：0
> 
> 时间：2012-09-24T14:39:08.180
> 
> 标签：spring, hibernate, jstl

这是我的 Jsp 遍历列表的代码

```
<c:forEach items="${location.fEvents}" var="item" varStatus="loop">
                <tr><td><form:input path="fEvents[${loop.index}].hostName" size="30" maxlength="200"/></td>
                <td><form:input path="fEvents[${loop.index}].directory" size="30" maxlength="200"/></td>
                <td><form:input path="fEvents[${loop.index}].userName" size="20" maxlength="20"/></td>
                <td><form:input path="fEvents[${loop.index}].password" size="20" maxlength="20"/></td>
                </tr>
            </c:forEach> 
```

我在控制器中的代码：

```
while (location.getfEvents().size() < 3) {
            FtpScanEvents f = new FtpScanEvents();
            f.setLocation(location);
            location.getfEvents().add(f);
        } 
```

每当有新条目时，我的 jsp 会显示三个空行，如果用户在第一行输入数据，它应该只将其保存到数据库中。但是，我的代码将另外两个空行作为 null 保存到数据库中。这是因为我正在使用弹簧绑定并迭代列表以显示值（JSP 代码）。

任何避免这种情况的建议！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:33:59.453

在插入数据库之前检查字段是否为空。

# api - Google API V3 多个信息窗口加上点击关闭

> ID：12567280
> 
> 赞同：3
> 
> 时间：2012-09-24T14:39:10.787
> 
> 标签：api, google-maps, google-maps-api-3, google-maps-markers

我想出了如何在信息窗口中使用多个标记，但是当您单击另一个标记时它们不会关闭，我相信这是因为我正在为每个标记创建一个新的信息窗口，任何帮助将不胜感激。

```
 <script type="text/javascript">

var map ;
  function initialize() {
    var latlng = new google.maps.LatLng(53.063165, -3.205390);
    var myOptions = {
      zoom: 6,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.SATELLITE,
      zoomControl: false,
      mapTypeControl: false,
      mapTypeControlOptions: {
          style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
          position: google.maps.ControlPosition.LEFT_CENTER
      },
panControl: false,
streetViewControl: false,
      streetViewControlOptions: {
          position: google.maps.ControlPosition.LEFT_CENTER
      }
};
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  var marker = add_marker(56.747923,-3.717155,"Ben Vrackie","<b>Ben Vrackie</b><br><br>Perthshire classic! some sweet hidden gems on this loop.<br> surrounded by amazing countryside, Lochs, hills this<br>has it all... Red Grade."); // pass in as Latitude, then Longitude
    marker.setMap(map);

   var marker = add_marker(57.556366,-5.409222,"Torridon Forest","<b>Torridon Forest</b><br><br>Technical and breathtaking.... <br>Black/red grade."); // pass in as Latitude, then Longitude
    marker.setMap(map)
}

  function add_marker(lat,lng,title,box_html) {

    var infowindow = new google.maps.InfoWindow({
        content: box_html
    });

    var marker = new google.maps.Marker({
          position: new google.maps.LatLng(lat,lng),
          map: map,
          title: title
    });

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.open(map,marker);
});
return marker;
  }

 </script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T15:02:57.543

仅创建一个全局 InfoWindow 对象。

```
 //Global 
  var infowindow = new google.maps.InfoWindow(); 
```

进而

```
 function add_marker(lat,lng,title,box_html) {

        var marker = new google.maps.Marker({
              position: new google.maps.LatLng(lat,lng),
              map: map,
              title: title
        });

  google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(box_html);

        infowindow.open(map,marker);
    });
    return marker;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:05:38.923

更改您的 add_marker 函数以使用单个全局信息窗口。单程：

```
var infowindow = null;
function add_marker(lat,lng,title,box_html) {

  infowindow = new google.maps.InfoWindow({
      content: box_html
  });

  var marker = new google.maps.Marker({
      position: new google.maps.LatLng(lat,lng),
      map: map,
      title: title
  });

  google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent(box_html);
      infowindow.open(map,marker);
  });
  return marker;
} 
```

[在“演示库”](http://gmaps-samples-v3.googlecode.com/svn/trunk/single-infowindow/single-infowindow.html)中的此示例中也进行了描述

# c - 在 c 中使用 typedef 声明函数时，我们如何消除未声明的函数错误？

> ID：12567282
> 
> 赞同：1
> 
> 时间：2012-09-24T14:39:19.337
> 
> 标签：c, compiler-errors, typedef

当我运行以下代码时：

```
typedef char *lrfield();

struct lrfields {
char name[26];
lrfield *f;
};

struct lrfields lr_table[] = {
    {"pri_tran_code1", pri_tran_code2},
    {"sec_tran_code", sec_tran_code},
    {"type_code", type_code},
    {"sys_seq_nbr", sys_seq_nbr},
    {"authorizer", authorizer},
    {"void_code", void_code},
    {"",0}
};

char *pri_tran_code2()
{
    return pri_tran_code;
}

*
*

if(second) 
{
     for(bp=lr_table; bp->name[0]; bp++)
     if(strcmp(bp->name, second)==0)
     {
         tmpval=bp->f();
         break;
     }
} 
```

我有这些错误：

```
error: `pri_tran_code2' undeclared here (not in a function)
error: initializer element is not constant
error: (near initialization for `lr_table[0].f')
error: initializer element is not constant
error: (near initialization for `lr_table[0]')
error: initializer element is not constant
error: (near initialization for `lr_table[1]') 
```

正如您在代码中看到的那样，我在其调用上方定义了“pri_tran_code2”。请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:41:09.490

你的声明是错误的。要声明函数（函数指针）类型，请尝试以下操作：

```
typedef char *(*lrfield)(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T14:42:09.973

`char *pri_tran_code2();`在您提及此名称之前添加？或者只是将整个实现移到那里。*你在哪里称呼*它并不重要，重要的是你在哪里引用它。

# c# - 如何开始在 Silverlight 中使用 OAuth

> ID：12567283
> 
> 赞同：0
> 
> 时间：2012-09-24T14:39:21.787
> 
> 标签：c#, .net, silverlight, api, oauth

我对 Oauth 2.0 完全陌生，我想在我的 Silverlight (c#) 浏览器内应用程序中使用它，以便访问此 API 方法：[https ://www.elance.com/p/api2/methods/workroom /bid-id/消息](https://www.elance.com/p/api2/methods/workroom/bid-id/messages)。

我需要知道什么？有什么图书馆可以用来做这个吗？

我也将不胜感激一些代码示例！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:45:20.413

该协议有相当多的库，包括 C#！

[http://oauth.net/code/](http://oauth.net/code/)

编辑：

另外，如果 RFC 不是您最喜欢的床头柜文献，此链接提供了有关该协议的详尽指南：http: [//hueniverse.com/oauth/](http://hueniverse.com/oauth/)

# html - 如何解决错误

> ID：12567286
> 
> 赞同：1
> 
> 时间：2012-09-24T14:39:26.997
> 
> 标签：html, ruby-on-rails, encoding, safari

我正在运行 RubyOnRails 应用程序并在我的 application.html.erb 中设置了字符集：

```
<meta charset="utf-8">
  ...
 <h3>Some text</h3> 
```

我有一个奇怪的错误 - 当我将文本放入 h1、...、h6 标签时，如下所示：

![](../Images/b29a0a88cbc3eba9814a928675748fb2.png)

我尝试了不同的字符集，但没有任何效果。还查看了 Safari 设置并设置了 UTF-8 编码。

有人可以帮我弄这个吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:50:19.813

尝试设置：

```
h1, h2, h3, h4, h5, h6 { 
  font-family: Verdana, "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS", Geneva, Tahoma, sans-serif !important; 

 line-height: 30px;  
} 
```

# symfony1 - 检查保存表单时更改了多少字段

> ID：12567287
> 
> 赞同：0
> 
> 时间：2012-09-24T14:39:34.203
> 
> 标签：symfony1, symfony-1.4, doctrine-1.2

我正在使用 symfony1.4 和 Doctrine 在事务中保存记录。

插入的行来自定期更新的 CSV 文件。我已经有一种方法可以检查 CSV 中的记录是否与数据库中的记录匹配并且不插入。

不过，我最理想的做法是设置一个用户 flash，告诉他们在导入 CSV 文件时更新了多少行。

```
 $conn = ProductTable::getInstance()->getConnection();
            $conn->beginTransaction();

            try {
                $row = 1;
                while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
                    if ($row > 1) {
                        $values = array(
                            'blah'            => null
                        );

                        $obj= ProductTable::getInstance()->findOrCreateNewProduct(
                            $values['blah']
                        );

                        $obj->merge($values);
                        $obj->save($conn);
                    }

                    $row++;
                }

                $conn->commit();

            } catch (Doctrine_Exception $e) {
                $conn->rollback();

                throw $e;
            } 
```

我想知道如何获得这些更新的字段。它在`actions.class.php`还是在实际`form.class.php`文件中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:44:21.777

在你可以调用 a `Doctrine_Record::getModified()`，它会给你一个修改过的字段数组（尽管这对你无关紧要）。然后，您可以在返回的数组上调用 count 并将累积总数保留在循环之外。

```
 $conn = ProductTable::getInstance()->getConnection();
        $conn->beginTransaction();
        $nbModified = 0;

        try {
            $row = 1;
            while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
                if ($row > 1) {
                    $values = array(
                        'blah'            => null
                    );

                    $obj= ProductTable::getInstance()->findOrCreateNewProduct(
                        $values['blah']
                    );

                    $obj->merge($values);
                    $nbModified += count($obj->getModified());
                    $obj->save($conn);
                }

                $row++;
            }

            $conn->commit();

            // return $nbModified or otherwise do something with it here

        } catch (Doctrine_Exception $e) {
            $conn->rollback();
            // youre rolling back so just for consistency set $nbModified to zero
            $nbModified = 0;

            throw $e;
        } 
```

# python - 检查python中的多个变量是否大于零

> ID：12567290
> 
> 赞同：4
> 
> 时间：2012-09-24T14:39:52.347
> 
> 标签：python

```
A = 200
B = -140
C = 400
D = -260

if A < 0:
   v1 = 0
else:
   v1 = A

if B < 0:
   v2 = 0
else:
   v2 = B

 if C < 0:
   v3 = 0
else:
   v3 = C

if D < 0:
   v4 = 0
else:
   v4 = C 
```

上述代码结构的简写实现是什么？有没有更好/优雅/方便的方法来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T14:41:55.747

```
A = 200
B = -140
C = 400
D = -260

v1, v2, v3, v4 = [x if x > 0 else 0 for x in (A, B, C, D)] 
```

如果您更喜欢将`max`函数用于 python 三元运算符，它看起来像：

```
v1, v2, v3, v4 = [max(x, 0) for x in (A, B, C, D)] 
```

但是，如果您计划对所有这些变量进行相同的处理，您可能需要首先考虑将它们放在列表/元组中。

```
values = [200, -140, 400, -260]
values = [max(x, 0) for x in values] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T14:41:21.300

这可以通过使用[内置`max()`函数和解](http://docs.python.org/py3k/library/functions.html#max)包[列表理解](http://www.youtube.com/watch?v=t85uBptTDYY&list=UUAuqj5Bs5mTTl1mIVDmuAlw&index=1&feature=plcp)轻松解决。

```
v1, v2, v3, v4 = [max(x, 0) for x in [a, b, c, d]] 
```

另一种解决方案是使用该`map()`函数 - 但是，它的可读性较差：

```
v1, v2, v3, v4 = map(lambda x: max(x,0), [a, b, c, d]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T14:41:29.553

`min()`使用和进行健全性检查`max()`。

```
v1 = max(0, A) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:00:01.670

作为[mgilson 出色答案](https://stackoverflow.com/a/12567333/455276)的替代方法，您可以将子类`int`化为自定义类来实现这一点

```
>>> class V(int):
...    def __new__(cls,val,**kwargs):
...       return super(V,cls).__new__(cls,max(val,0)) 
```

然后直接使用：

```
>>> A=V(200)
200
>>> B=V(-140)
0
>>> [V(i) for i in [200, -140, 400, -260]]
[200, 0, 400, 0]     
>>> A,B,C,D = [V(i) for i in [200, -140, 400, -260]] 
```

这样做的唯一好处是您可以适当地覆盖`__sub__`，`__add__` `__mul__`然后您的 V ints 将*始终*大于 0，即使您有`a=V(50)-100`

例子：

```
>>> class V(int):
...    def __new__(cls,val,**kwargs):
...       return super(V,cls).__new__(cls,max(val,0)) 
...    def __sub__(self,other):
...       if int.__sub__(self,other)<0:
...         return 0
...       else:
...         return int.__sub__(self,other) 
>>> a=V(50)
>>> b=V(100)
>>> a-b                #ordinarily 50-100 would be -50, no?
0 
```

# file-upload - 无法通过 Amazon S3 使用回形针附加图像

> ID：12567293
> 
> 赞同：1
> 
> 时间：2012-09-24T14:40:00.473
> 
> 标签：file-upload, heroku, amazon-s3, paperclip

我很难通过`fog`gem 将 Paperclip 上传到 Amazon S3。你看，我正在使用 Heroku，所以这就是要走的路。

问题是：我将应用程序配置为将上传内容发送到我的 Amazon S3 存储桶，正在发送图像，除了对象之外的所有内容都保存为`picture`属性设置为`/pictures/original/missing.png`，我不知道为什么。

以下是一些有助于缓解问题的数据：

我有一个`Work`模型，我在其中为名为“图片”的图像定义了一个回形针附件：

```
has_attached_file :picture, path: "app/public/system/images/:class/:id/:attachment/:style/img.:extension", styles: { large: "500x500>", medium: "300x300>", thumb: "100x100>" } 
```

我创建了这个特殊的初始化文件`paperclip_defaults.rb`，用于告诉 Rails 事实上，我希望上传到 Amazon S3（隐藏实际密钥）：

```
Paperclip::Attachment.default_options.update({
  path: "app/public/system/images/:class/:id/:attachment/:style/img.:extension",
  storage: :fog,
  fog_credentials: {
    provider: 'AWS',
    aws_access_key_id: 'lovelovelove',
    aws_secret_access_key: 'dr_strangelove',
    region: 'sa-east-1'
  },
  fog_directory: 'florencioassets',
  fog_public: true,
  fog_host: "http://florencioassets.s3-website-sa-east-1.amazonaws.com/"
}) 
```

我的表单将`multipart`属性设置为 true 和 all。

`Work`有一个示例文件，该文件已上传，但与我猜的对象没有正确关联： [https ://s3-sa-east-1.amazonaws.com/florencioaassets/app/public/system/images/works/8/图片/原创/img.JPG](https://s3-sa-east-1.amazonaws.com/florencioassets/app/public/system/images/works/8/pictures/original/img.JPG)

那么，关于为什么在没有实际图片的情况下保存对象的任何想法？猜猜这不是上传问题，每个人说。

感谢您的时间！

更新：

我真的希望有人能以优雅的方式帮助我解决这个问题，但无论如何，如果有人感兴趣，我为此做了一个快速的解决方法：

```
%w(original large medium thumb).each do |meth|
  define_method("#{meth}_picture_url") do
    "https://s3-sa-east-1.amazonaws.com/florencioassets/app/public/system/images/works/#{self.id}/pictures/#{meth}/img.JPG"  
  end
end 
```

# c++ - 如何将响应式 Qt GUI 与基于 OpenMP 的计算库相结合？

> ID：12567299
> 
> 赞同：2
> 
> 时间：2012-09-24T14:40:22.110
> 
> 标签：c++, qt, user-interface, openmp

我们的软件由 C++/Qt 中的图形用户界面组成。用户界面在一个使用 C++/OpenMP 进行并行化的单独库中控制几个繁重的计算算法。在这个库中，我们不能使用 Qt。

为了保持我们的 GUI 响应，我们使用调用`QApplication::processEvents();`. 这当然会导致意大利面条代码。我们希望将 GUI 与计算库分开，以便函数调用不再阻塞 GUI。什么是干净和首选的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:00:49.213

`QApplication`启动控制循环，它调用 GUI 方法。自然，任何耗时的方法都会阻塞队列。为了防止这种情况，您需要通过`fork`/生成额外的进程/线程`QThread`。我认为这种`QThread`方法将是实现目标的最干净的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:03:25.430

如果您不需要中断 openMP 库调用，那么我会采用一种简单的多线程方法：一个线程处理 GUI，另一个线程处理计算库。自然地，您不能为此使用 openMP（这与计算 openMP 库的效果不佳），但必须使用其他多线程方法。C++11 现在自带对线程的直接支持，所以这就是我要做的。

编辑：阅读 Anthony Williams “C++ concurrency in action”

# iphone - sendAsynchronousRequest 在 iPhone 上出现超时错误

> ID：12567300
> 
> 赞同：0
> 
> 时间：2012-09-24T14:40:23.033
> 
> 标签：iphone, ios, nsurlconnection, ios6

我的应用程序允许用户拍照并将其上传到 PHP 服务器。我使用 sendAsynchronousRequest 调用将数据（带有照片文件的表单）发送到服务器。调试时，所有这些调用在我的**iPad 2上运行良好。**但是当我在**iPhone 4S**上调试它时，其中一些会出现错误代码 -1001，表示超时错误。这两天我试了千百次想找到它的根本原因，但还是找不到。

有没有人遇到过类似的情况？或者知道为什么？

我得到的唯一线索是，如果请求数据中有多个文件（原始照片文件和调整大小的拇指文件），它将收到超时错误。是关于请求（照片文件）的大小吗？还是文件号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:55:53.527

我使用这个简单的方法处理 ASIHTTP 请求失败。

```
- (void)requestFailed:(ASIHTTPRequest *)request {

    NSError *error = [request error];

    if([error code] == ASIRequestTimedOutErrorType ) {

        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error"
                                                       message:@"Connection Timed out" 
                                                      delegate:self 
                                             cancelButtonTitle:@"Ok"
                                             otherButtonTitles:nil];
        [alert show];
        return;
    } else if ( [error code] == ASIConnectionFailureErrorType) {

        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error" 
                                                       message:@"Connection Failiure"
                                                      delegate:self
                                             cancelButtonTitle:@"Ok" 
                                             otherButtonTitles:nil];
        [alert show];
        return;

    }
} 
```

您还可以在请求中设置连接超时，例如

```
[request_ setTimeOutSeconds:50.0]; 
```

这将等待 50 秒并显示连接超时错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:21:42.430

我解决了这个问题。它是由上传大文件引起的。iPhone 4s 的原始照片令牌大约有 5M 大。如果网络不够快，连接就会超时。

# git - VCS 中的流浪者

> ID：12567304
> 
> 赞同：2
> 
> 时间：2012-09-24T14:40:37.213
> 
> 标签：git, version-control, virtualization, vagrant

对于一个给定的项目，我目前在 Git 中有两个存储库——一个代码库存储库和一个配置存储库，其中包含一个 Vagrantfile、配置脚本和任何所需的资源和模板。

这个概念是我可以克隆配置存储库并运行“vagrant up”来为该特定项目创建一个虚拟机。配置的一部分包括设置一个共享文件夹（配置为来宾操作系统中的 web-root），将代码库存储库克隆到该文件夹​​并更改一些设置。结果是一个可以立即访问并准备好进行开发的项目。

虽然这个系统似乎可以工作，但我有点担心主机上生成的文件结构，例如

*   /项目/
*   /项目/.git/
*   /项目/共享/
*   /project/share/.git/
*   /project/share/index.html
*   /project/provision.sh
*   /项目/流浪文件

...等等。通过克隆我的配置存储库，然后将代码库存储库克隆到一个共享文件夹中，我产生了一些问题。我已将“share”文件夹添加到我的配置存储库中的 .gitignore 文件中，但我不确定是否会遇到任何问题（我已经在我的 IDE 中注意到了一些问题）。

我能想到的唯一解决方案是导出配置存储库而不是克隆它（如果我需要更改它，这会造成困难）或将共享文件夹指向远离配置位置的位置。这些都不是理想的，所以我希望我遗漏了一些东西。

以前有没有人尝试过这样的事情，如果有，你能提出一个更安全、更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T20:55:39.837

您可以使用 git 子模块来解决您的问题：

[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

但是，我使用您建议的更简单的解决方案，即在 app 目录中找到配置代码。我发现管理 2 个 git 存储库比我想要的更令人困惑。我的大部分配置代码仅适用于特定应用程序，因此将配置和应用程序代码保留在同一个存储库中是有意义的。

# c# - 变量backgroundWorker参数总是一样的？

> ID：12567305
> 
> 赞同：3
> 
> 时间：2012-09-24T14:40:37.493
> 
> 标签：c#, backgroundworker

我有以下代码：

```
// 1.
        public void RunSQL(QuerySetup querySetup)
        {
            //querySetup.Users is 10
            for (int i = 1; i <= querySetup.Users; i++)
            {
                querySetup.CurrentUser = i;
                var worker = new BackgroundWorker {WorkerReportsProgress = true};
                worker.DoWork += worker_DoWork;
                worker.RunWorkerCompleted += worker_RunWorkerCompleted;
                worker.RunWorkerAsync(querySetup);
            }
        }

    // 2.
    void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        var querySetup = e.Argument as QuerySetup;
        // Doing stuff...
        e.Result = querySetup.CurrentUser;
    }

    // 3.
    void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        Console.WriteLine("User " + e.Result.ToString() + " is done.");
    } 
```

我的目标是，最后我得到：

用户 1 完成

用户 2 完成

...

用户 10 完成

（不是按照那个特定的顺序）

但我只得到 10 倍的“用户 10 完成”。

但为什么？我需要以某种方式标记我的工作进程，以便以后可以识别它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:43:58.167

是的，这里只有 1 个 querySetup 对象，主循环会不断改变 currentUser。
所有线程将共享该单个对象。

```
 for (int i = 1; i <= querySetup.Users; i++)
 {
     querySetup.CurrentUser = i;
     ... 
     worker.RunWorkerAsync(querySetup);
 } 
```

基本解决方案（如果您不需要其他 querySetup 成员）

```
 for (int i = 1; i <= querySetup.Users; i++)
 {
     //querySetup.CurrentUser = i;
     ... 
     worker.RunWorkerAsync(i);
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T14:44:14.560

只有一个 QuerySetup 实例。

您将当前用户存储在这一实例上。因此，当前用户将始终是您循环中的最后一个用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:45:30.347

如果您的所有工作人员在循环完成后完成，那么他们都将看到相同的全局状态`querySetup.CurrentUser`，此时为 10。

多线程的最佳方法不是在线程之间共享状态（因为这会迫使您同步访问该状态），而是为每个线程函数提供自己的数据副本。在这种情况下，这意味着`querySetup`您不提供线程函数的数据，而是提供`querySetup.CurrentUser`

# android - 如何使用现有代码创建 Android 应用程序？

> ID：12567310
> 
> 赞同：0
> 
> 时间：2012-09-24T14:40:52.207
> 
> 标签：android, android-keystore

我开发了一个 Android 应用程序并在 google play 上发布了它。然后我丢失了我的密钥库文件，现在我无法更新我的应用程序。因此，我想用我现有的代码创建新的应用程序。

如何使用我现有的代码来创建新的应用程序，并清楚地移植？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:42:35.073

您所要做的就是更改 Manifest 和每个源文件中的包声明。一旦它在不同的包中，Google Play 商店会认为它是一个不同的应用程序，您可以上传新版本。

# ruby-on-rails - Rails activeadmin 自定义视图和关联

> ID：12567311
> 
> 赞同：3
> 
> 时间：2012-09-24T14:40:54.297
> 
> 标签：ruby-on-rails, ruby, model, activeadmin

我已将 activeadmin gem 绑定到`Order`模型。

我现在想在 activeadmin 中为此模型自定义详细视图，以显示与该订单关联的项目列表。（比如`orders.line_items.each do`……）

我在哪里可以进行这样的定制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:00:21.863

在 [tuts+上对 gem 的功能进行了彻底的演练](http://net.tutsplus.com/tutorials/ruby/create-beautiful-administration-interfaces-with-active-admin/)

# iphone - 将 RestKit 与基于文件的 URL 一起使用

> ID：12567321
> 
> 赞同：2
> 
> 时间：2012-09-24T14:41:23.127
> 
> 标签：iphone, objective-c, ios, json, restkit

我想将 RestKit 与基于文件的 URL 一起使用：

```
file://localhost/Users/me/somefile.json 
```

`RKURL`但是，当我使用 RestKit 启动请求时，尽管原始对象是有效`NSURL`对象（`completeURL`为 nil），但 RestKit 无法创建相应的对象：

```
NSURL *completeURL = [NSURL URLWithString:completePathWithQuery relativeToURL:theBaseURL];
if (!completeURL) {
    RKLogError(@"Failed to build RKURL by appending resourcePath and query parameters '%@' to baseURL '%@'", theResourcePath, theBaseURL);
    [self release];
    return nil;
} 
```

RestKit 通常支持基于文件的 url 吗？

**更新**：我在 RestKit发布[了一个问题](https://github.com/RestKit/RestKit/issues/942)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:41:42.657

那是您正在调用的 NSURL 方法失败。使用 RestKit 提出问题不会得到解决。

从文档中：

> **返回值**
> 
> 一个用 URLString 和 baseURL 初始化的 NSURL 对象。如果 URLString 格式错误，则返回 nil。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:01:46.920

我只是在问题所有者的更新[链接](https://github.com/RestKit/RestKit/issues/942)中引用答案，这样人们可能会发现它更容易。

> 我发现了我遇到的问题。看起来我不能`@"file://localhost/Users/me/Folder"`用作 baseURL，而是`@"file://localhost`.

# sql - 在 HSQLDB 中禁用并重建索引

> ID：12567327
> 
> 赞同：1
> 
> 时间：2012-09-24T14:41:38.817
> 
> 标签：sql, database, hsqldb

我想禁用（并稍后重建）HSQLDB 中给定表的所有索引。我从 SQL Server 知道此功能，您可以在其中编写

```
ALTER INDEX ALL ON MyTable DISABLE; 
```

禁用表的所有索引，然后重建它们

```
ALTER INDEX ALL ON MyTable REBUILD; 
```

我什至不确定 HSQLDB 是否支持禁用和启用单个索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:49:50.283

我不认为这确实得到支持。但是，您可以删除索引，然后再次创建它。像这样的东西：

```
DROP INDEX index [IF EXISTS];
ALTER TABLE MY_TABLE ADD INDEX MY_INDEX 
```

查看此[文档](http://www.hsqldb.org/doc/guide/ch09.html#alter_index-section)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:55:48.303

HSQLDB 没有这个特性。

您可以执行 SHUTDOWN COMPACT 以在所有表​​上重新创建所有索引。

# c# - 多维数组 [][] vs [,]

> ID：12567329
> 
> 赞同：489
> 
> 时间：2012-09-24T14:41:41.990
> 
> 标签：c#, arrays, multidimensional-array

```
double[][] ServicePoint = new double[10][9]; // <-- gives an error (1)
double[,] ServicePoint = new double[10,9]; // <-- ok (2) 
```

他们有什么区别？*(1)*产生错误，是什么原因？

和

```
double d = new double[9]
ServicePoint[0] = d; 
```

使用*（2）*会提示错误。为什么？

* * *

## 回答 #1

> 赞同：541
> 
> 时间：2012-09-24T14:44:16.083

一个是数组数组，一个是二维数组。前者可以是锯齿状的，后者是均匀的。

也就是说，a`double[][]`可以有效地是：

```
double[][] x = new double[5][];

x[0] = new double[10];
x[1] = new double[5];
x[2] = new double[3];
x[3] = new double[100];
x[4] = new double[1]; 
```

因为数组中的每个条目都是对`double`. 使用锯齿状数组，您可以像在第二个示例中那样对数组进行赋值：

```
x[0] = new double[13]; 
```

在第二项上，因为它是一个统一的二维数组，所以不能将一维数组分配给行或列，因为您必须同时索引行和列，这会使您降到一个`double`：

```
double[,] ServicePoint = new double[10,9];

ServicePoint[0]... // <-- meaningless, a 2d array can't use just one index. 
```

**更新**：

为了根据您的问题进行澄清，您的 #1 出现语法错误的原因是因为您有这个：

```
double[][] ServicePoint = new double[10][9]; 
```

并且你不能在构建时指定第二个索引。关键是 ServicePoint*不是*二维数组，而是一维数组（数组），因此由于您正在创建一维数组（数组），因此您只指定一个索引：

```
double[][] ServicePoint = new double[10][]; 
```

然后，当您在数组中创建每个项目时，每个项目也是数组，因此*您*可以指定它们的维度（可以不同，因此术语*锯齿状*数组）：

```
ServicePoint[0] = new double[13];
ServicePoint[1] = new double[20]; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：235
> 
> 时间：2012-09-24T14:53:54.580

在第一个实例中，您尝试创建所谓的锯齿状数组。

```
double[][] ServicePoint = new double[10][9]. 
```

如果上面的语句定义如下。

```
double[][] ServicePoint = new double[10][] 
```

这意味着您正在创建一个大小为 10 的数组，它可以在其中存储 10 个不同大小的数组。简单来说，一个数组数组。见下图，它表示一个锯齿状数组。

![在此处输入图像描述](../Images/8ff6fe776f5b1d5d2a6a558df221a3bc.png)

[http://msdn.microsoft.com/en-us/library/2s05feca(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/2s05feca(v=vs.80).aspx)

第二个基本上是一个二维数组，语法正确且可以接受。

```
 double[,] ServicePoint = new double[10,9];//<-ok (2) 
```

要访问或修改二维数组，您必须传递两个维度，但在您的情况下，您只传递一个维度，这就是错误的原因

正确的用法是

`ServicePoint[0][2]`,指第一行第三列的一个项目。

二维数组的图形表示

![在此处输入图像描述](../Images/914fcfc630d0e7312a13c9d54efc9576.png)

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2012-09-24T14:45:29.687

`double[][]`被称为[**锯齿状数组**](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)，内部尺寸未在声明中指定。与[**矩形数组**](http://msdn.microsoft.com/en-us/library/aa288453(v=vs.71).aspx)不同，每个内部数组可以是任意长度。每个内部数组都被隐式初始化为 null 而不是空数组。**每个内部数组都必须手动创建：**参考 [简而言之 C# 4.0 权威参考]

```
for (int i = 0; i < matrix.Length; i++)
{
    matrix[i] = new int [3]; // Create inner array
    for (int j = 0; j < matrix[i].Length; j++)
        matrix[i][j] = i * 3 + j;
} 
```

`double[,]`被称为`rectangular arrays`，使用逗号分隔每个维度。以下代码声明了一个 3×3 矩形二维数组，用 0 到 8 的数字对其进行初始化：

```
int [,] matrix = new int [3, 3];
for (int i = 0; i < matrix.GetLength(0); i++)
    for (int j = 0; j < matrix.GetLength(1); j++)
        matrix [i, j] = i * 3 + j; 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-09-24T14:45:37.727

`double[,]`是一个二维数组（矩阵），`double[][]`而是一个数组数组（[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)），语法是：

```
double[][] ServicePoint = new double[10][]; 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-09-24T14:49:24.063

`double[][]`是一个数组数组并且`double[,]`是一个矩阵。如果要初始化数组数组，则需要执行以下操作：

```
double[][] ServicePoint = new double[10][]
for(var i=0;i<ServicePoint.Length;i++)
    ServicePoint[i] = new double[9]; 
```

考虑到使用数组的数组将让您拥有不同长度的数组：

```
ServicePoint[0] = new double[10];
ServicePoint[1] = new double[3];
ServicePoint[2] = new double[5];
//and so on... 
```

# php - 使用 AES_ENCRYPT 在 PHP 中更新 MYSQL

> ID：12567330
> 
> 赞同：1
> 
> 时间：2012-09-24T14:41:46.077
> 
> 标签：php, sql, aes

我正在尝试在 PHP 中使用 AES_ENCRYPT 进行基本的 mysql 更新，但我无法让它工作。这是我的完整代码：

```
$key = "bac09c63f34c9845c707228b20cac5e0";
$query = " SELECT id, aes_decrypt(Column1, '$key') AS Column1, aes_decrypt(Column2, '$key') AS Column2 FROM parent WHERE Request = '{$Request}' ORDER BY ID ASC;";
$resultSet = mysql_query($query, $DB);
while ($row = mysql_fetch_array($resultSet)) {
    $id = $row['ID'];
    $rows[] = $row["Request"];
    $Column1 = $row["Column1"];
    $Column2 = $row["Column2"];

$SQL = "UPDATE parent SET Column1 = AES_ENCRYPT('$Column1','$key'), Column2 = AES_ENCRYPT('$Column2','$key') WHERE Parent_ID = '$id';";
        if (!mysql_query($SQL, $DB))
            die("Query Failed $SQL");
    } 
```

PHP错误日志很好，没有错误。只有这个：

```
Query Failed 
UPDATE parent SET Column1 = AES_ENCRYPT('722225374673255299521908919676768...etc','bac09c63f34c9845c707228b20cac5e0') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:47:39.793

使用此查询 -

```
UPDATE parent SET Column1 = AES_ENCRYPT('$Column1','$key'), Column2 = AES_ENCRYPT('$Column2','$key') WHERE Parent_ID = $id; 
```

# android - 用简短的方法引用许多按钮

> ID：12567334
> 
> 赞同：0
> 
> 时间：2012-09-24T14:41:59.690
> 
> 标签：android, button

我正在为 Android 设计一个键盘。通过在我的 MainActivity 中实现 View.OnTouchListener，我刚刚学会了在 onCreate 方法中定义按钮的简洁方法：

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    defineButtons();

    keyC.setOnTouchListener(this);
//etc..

} 
```

接着：

```
 private void defineButtons()
{

    keyC = (Button) findViewById(R.id.c);
//etc..
} 
```

然后我会定义当按钮被这个方法触摸时会发生什么：

```
public boolean onTouch(View view, MotionEvent motion)
{
    int note = 0;

    switch(view.getId())
    {

    case R.id.c:    /** Note C*/
    {
        note = 60 + transposeOctave;
        motionTracker(view, motion, note);
    }
    break;
//etc...
} 
```

最后一种方法必须分别为每个按钮重复，这看起来有点难看。我可以使用 Id 返回一个数值来修改我的注释值吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:01:19.950

Are your keys defined in XML? If so, I would simply add a `tag` to each one with the proper numeric value, like so:

```
android:tag="1" 
```

Then, in your code, you can simply do this:

```
int note = 0;
int tagValue = 0;

//Tags in XML are always strings
String tag = (String)view.getTag();

//Parse it to an integer
tagValue = Integer.parseInt(tag);

note = tagValue + transposeOctave;
motionTracker(view, motion, note); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:00:54.507

You can't force an ID to a specific value. There is no way to do it in Android, the Android Asset Packaging Tool (AAPT) will always automatically generate them for you.

But you can still hide the "ugly" conversion from constant to integer in a function. example: `keyboardIdToFrequency()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:11:23.097

您可以使用将特定值添加为标签

```
btn.setTag("something"); 
```

并在 onTouch 中使用

```
Button btn = (Button)view;

String val = btn.Gettag();
note = Integer.Valueof(val)+ transposeOctave; 
```

# c++ - 确定数字类型 A 是否可以转换为数字类型 B

> ID：12567335
> 
> 赞同：6
> 
> 时间：2012-09-24T14:42:00.157
> 
> 标签：c++, types, casting, c++11

给定两个数字类型`From`和`To`. 下面的代码是否真的确定了任何类型的值是否`From`可以表示为类型的值而`To`不会丢失信息？如果是，是否有更短或更易读的确定方法？

```
template <class From, class To>
struct can_cast
{
    static const bool value = 
        (std::numeric_limits<From>::is_integer || // either From is an integer type OR 
        std::is_floating_point<To>::value) && // ...they're both floating point types AND
        (std::numeric_limits<From>::is_signed == false || // either From is unsigned OR
        std::numeric_limits<To>::is_signed == true) && // ...they're both signed AND
        (std::numeric_limits<From>::digits < std::numeric_limits<To>::digits || // To has more bits for digits than From OR
        std::numeric_limits<From>::digits == std::numeric_limits<To>::digits && // To and From have same number of bits, but
        std::numeric_limits<From>::is_signed == std::numeric_limits<To>::is_signed); // they're either both signed or both unsigned.
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:53:30.727

编译器现在内置了这个功能：使用列表初始化时不允许缩小转换。

您可以编写基于 的传统表达式测试器特征，并可能使用和`To { std::declval<From>() }`添加额外的检查。`std::is_integral``std::is_floating_point`

```
template <typename T>
struct sfinae_true : std::true_type {};

struct can_cast_tester {
   template <typename From, typename To>
   sfinae_true<decltype(To { std::declval<From>() })> static test(int);
   template <typename...>
   std::false_type static test(...);
}; 

template <typename From, typename To>
struct can_cast // terrible name
: decltype(can_cast_tester::test<From, To>(0)) {}; 
```

从理论上讲，这应该可行，但目前看来 GCC 和 clang 都没有做对。

# python - django url-tag 和装饰的 url

> ID：12567341
> 
> 赞同：0
> 
> 时间：2012-09-24T14:42:12.550
> 
> 标签：python, django, django-templates

我正在编写一个小型博客应用程序，并希望可以通过标题名称和 id 的组合访问其条目。

```
Expression:    ^blog/([\d\w\-_]+)\-(\d+)/$
Example URL:   localhost:8000/blog/django-is-awesome-231/ 
```

第一部分是通过将博客条目的标题全部转换为小写并将空格和特殊字符替换为`-`.

我想知道如何从条目中反转这样的 URL。

```
{% for entry in entries %}
  <li><a href="{% url 'blog.views.display', entry.title entry.id %}">{{ entry.title }}</a></li>
{% endfor %} 
```

但它告诉我没有找到反向匹配。

谢谢，

* * *

我只是这样尝试：

```
def get_mangled_name(self):
    """ Returns the mangled name of the entry. """
    title = self.title.lower().replace(' ', '-')
    title = ''.join(filter(lambda x: x in string.letters, title))
    if title.endswith('-'):
        title = title[:1]
    return '%s-%d' % (title, self.id)

<li><a href="{% url 'blog.views.display' entry.get_mangled_name %}">{{ entry.title }}</a></li> 
```

但它也没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:08:12.727

有一个`slugify`模板过滤器可以将标题转换为 slug。因此，您可以编写模板代码，例如：

```
{% url 'blog.views.display', entry.title|slugify entry.id %} 
```

但是，任何时候处理 slug 时，实际上都应该`slug`在模型上有一个字段来永久存储该值。至少，您应该采纳 César 的建议并`get_absolute_url`改为执行此操作。

# perl - 哈希合并/连接

> ID：12567350
> 
> 赞同：5
> 
> 时间：2012-09-24T14:42:22.987
> 
> 标签：perl, hash, merge, concatenation

这是我的哈希值的转储：%hash1

```
$VAR1 = {
    abc => {
        123 => [
          'xx',
          'yy',
          'zy'
        ],
        456 => [
          'ab',
          'cd',
          'ef'
        ]
    }
}; 
```

第二个：%hash2

```
$VAR2 = { 
    def => {
        659 => [
            'wx',
            'yg',
            'kl'
        ],
        456 => [
            'as',
            'sd',
            'df'
        ]
    },
    abc => {
        987 => [
            'lk',
            'dm',
            'sd'
        ]
    }
}; 
```

现在我想将这两个哈希合并到一个新的哈希中，但是如果一个键是重复的（这里是'abc'），值应该被附加，而不是替换，所以键应该保持唯一，所有的值都应该保留为好。如何在 Perl 中做到这一点？输出应如下所示：

```
$VAR1 = {
    def => {
        659 => [
            'wx',
            'yg',
            'kl'
        ],
        456 => [
            'as',
            'sd',
            'df'
        ]
    },
    abc => {
        987 => [
            'lk',
            'dm',
            'sd'
        ],
        123 => [
            'xx',
            'yy',
            'zy'
        ],
        456 => [
            'ab',
            'cd',
            'ef'
        ]
    }
 }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T14:53:51.617

使用 CPAN 模块[`Hash::Merge`](http://p3rl.org/Hash::Merge)或[`Hash::Merge::Simple`](http://p3rl.org/Hash::Merge::Simple). 第一个是高度可配置的，第二个非常易于使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T15:24:21.763

```
for my $x (keys(%h2)) {
    for my $y (keys(%{ $h2{$x} })) {
        push @{ $h1{$x}{$y} }, @{ $h2{$x}{$y} };
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:17:32.000

```
sub merge_hashes {
    my ($h1, $h2) = @_;
    foreach my $key (keys %$h2) {
        if (!exists $h1->{$key} || ref($h1->{$key}) ne 'HASH' || ref($h2->{$key}) ne 'HASH') {

            $h1->{$key} = $h2->{$key};
        }
        else {
            merge_hashes($h1->{$key}, $h2->{$key});
        }
    }
}

merge_hashes(\%hash1, \%hash2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:24:59.237

对于提供的示例数据，以下将执行您描述的合并：

```
my %merged = map {
               $_ => {
                       %{$a{$_} // {}},
                       %{$b{$_} // {}}
                     }
             } ( keys %a, keys %b ); 
```

测试：

```
use strict;
use warnings;
use Data::Dump 'dd';

my %a = (
abc => {
        123 => [
          'xx',
          'yy',
          'zy'
        ],
        456 => [
          'ab',
          'cd',
          'ef'
        ]
    }
);
my %b = (
def => {
        659 => [
            'wx',
            'yg',
            'kl'
        ],
        456 => [
            'as',
            'sd',
            'df'
        ]
    },
    abc => {
        987 => [
            'lk',
            'dm',
            'sd'
        ]
    }
);

my %merged = map {
                   $_ => {
                           %{$a{$_} // {}},
                           %{$b{$_} // {}}
                         }
                 } ( keys %a, keys %b );

dd \%merged;
# {
#   abc => {
#            123 => ["xx", "yy", "zy"],
#            456 => ["ab", "cd", "ef"],
#            987 => ["lk", "dm", "sd"],
#          },
#   def => { 456 => ["as", "sd", "df"], 659 => ["wx", "yg", "kl"] },
# } 
```

# c# - 在 MVVM 中动态添加/删除图形

> ID：12567353
> 
> 赞同：0
> 
> 时间：2012-09-24T14:42:32.877
> 
> 标签：c#, .net, wpf, graphics, mvvm

我正在尝试设计一个 WPF 应用程序，用户可以在其中设计[算法流程图](http://upload.wikimedia.org/wikipedia/commons/thumb/d/d6/FlowchartExample.png/220px-FlowchartExample.png)。这意味着我的网格上有很多很多图形。（我打算使用 Canvas，但决定使用网格，因为 canvas 本身不支持 ScrollViewer）。我在我的应用程序中使用 MVVM 设计模式。

要动态添加/删除图形，我应该将视图模型中的哪些状态导出到我的视图中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:59:03.117

在您将要显示项目集合的所有情况下，通常情况下，您需要：

1.  创建一个代表每个项目的类（即项目的模型）
2.  `ObservableCollection`将此类公开为 ViewModel 的属性

不过，细节可能会有很大差异。我无法想象您打算如何将视图实现为 a `Grid`，因此这里有一些指南，假设它是 a `Canvas`。

### 确定您的持久性模型

当项目被放置在视图上时，用户是否能够移动它们？如果文档被保存、关闭然后重新打开，是否应该忠实地复制他们的位置？如果是这样，那么您的项目模型需要聚合这些显示参数。如果不是，那么视图可能会决定如何在运行时自行定位项目。

### 如果有意义，请使用子 ViewModel

如果您的项目模型非常简单，那么您可以`ItemTemplate`使用`ItemsControl`. 如果没有，那么您可能想要创建一个并从您的主 ViewModel`ItemViewModel`公开一个。`ObservableCollection<ItemViewModel>`

# android - 多个用户配置文件

> ID：12567355
> 
> 赞同：1
> 
> 时间：2012-09-24T14:42:34.563
> 
> 标签：android, profiles

我在我的 Android 平板电脑上遇到了一些奇怪的事情。它已经关闭了几个星期，然后当我打开它时，它重新启动。以前，它只是处于睡眠（待机）模式。但是重新启动后，我注意到整个设备已重置为出厂默认设置。我所有的应用程序都消失了，一切都被抹去了。

几天后，我重新启动了设备，惊讶地发现我所有的应用程序又回来了，一切都恢复了原样。我不使用任何备份/恢复软件，所以我真的很想知道这是怎么发生的？Android 是否支持多个用户配置文件？如果支持多个引导配置文件，应用程序可以通过某些 API 使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:47:06.707

Android 当前不支持多个（同时）用户配置文件。如果您确实想实现这一点，有[一个支持它的应用程序](https://play.google.com/store/apps/details?id=fahrbot.apps.switchme&hl=en)（可能不止一个），但它涉及拥有一个根设备。

我个人在我的家用平板电脑上使用过它，效果很好，但需要重新启动才能访问其他配置文件。

# asp.net - DropDownList 所选项目始终是列表中的第一项

> ID：12567364
> 
> 赞同：2
> 
> 时间：2012-09-24T14:43:21.083
> 
> 标签：asp.net, webforms

我在用户控件中有一个 DropDownList；但是，无论我做什么，我都无法正确填充任何“选定”属性（SelectedItem、SelectedIndex、SelectedValue）。无论实际选择了哪个项目，所有这三个属性的值都是我列表中的第一项。

```
<asp:DropDownList ID="ParticipantsSelectList" runat="server">
    <asp:ListItem Value="">Please select a team...</asp:ListItem>
    <asp:ListItem value="{D37EFA0C-988A-4A2A-8D6E-80E3BAE00DEE}">Blue Team</asp:ListItem>
    <asp:ListItem value="{7543E282-C9B8-435A-86A2-70E8E3BB38E5}">Green Team</asp:ListItem>
    <asp:ListItem value="{F6BEF34A-215E-4179-9F4C-68F7C43D755F}">Orange Team</asp:ListItem>
    <asp:ListItem value="{D50AD44A-686A-4BD3-B62E-D70ABF153AE5}">Red Team</asp:ListItem>
    <asp:ListItem value="{DEFB7DA6-B0FF-4C36-A015-F3E8BC7AECA2}">Yellow Team</asp:ListItem>
    <asp:ListItem value="{D37EFA0C-988A-4A2A-8D6E-80E3BAE00DEE},{7543E282-C9B8-435A-86A2-70E8E3BB38E5},{F6BEF34A-215E-4179-9F4C-68F7C43D755F},{D50AD44A-686A-4BD3-B62E-D70ABF153AE5},{DEFB7DA6-B0FF-4C36-A015-F3E8BC7AECA2}">All Teams</asp:ListItem>
</asp:DropDownList>
<asp:Button runat="server" Text="Submit" /> 
```

* * *

```
private void Page_Load(object sender, EventArgs e)
{
    if (!String.IsNullOrEmpty(ParticipantsSelectList.SelectedValue)) // SelectedValue is always empty string (value of the first item in the list)
    {
        resultsPanel.Visible = true;
        selectTeamLabel.Visible = false;
        GenerateResultsTable();
    }
    else
    {
        resultsPanel.Visible = false;
        selectTeamLabel.Visible = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:45:37.803

尝试`!Page.IsPostBack`使用`Page_Load`

```
private void Page_Load(object sender, EventArgs e)
{

    if (!Page.IsPostBack)
    { 
        //Your Code....
    }
} 
```

# android - 即使在操作系统中禁用了屏幕旋转，我的 Android 应用也会旋转。我怎样才能解决这个问题？

> ID：12567368
> 
> 赞同：4
> 
> 时间：2012-09-24T14:43:35.107
> 
> 标签：android, orientation, screen-orientation, android-orientation, orientation-changes

我正在开发一个完全支持横向模式的 Android 应用程序。我的所有活动都在清单中设置了以下属性：

```
android:configChanges="keyboardHidden|locale|orientation"
android:screenOrientation="sensor" 
```

但是，如果我在手机的屏幕设置中禁用旋转，当手机旋转时，我的应用程序仍然会旋转。这种困扰我；如果系统级设置可以被单个应用程序覆盖，那么它的全部意义似乎是没有意义的。如果手机上启用了屏幕旋转，我该如何解决这个问题，使其遵循系统级设置，同时仍能正常运行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T14:59:22.140

*你可以尝试使用*

> `android:screenOrientation="user"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:44:57.390

你可以试试这样的其他方式

```
android:screenOrientation="landscape" 
android:configChanges="orientation|keyboardHidden" 
```

在 AndroidManifest.xml 文件中的活动名称之后应用这些属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-29T18:08:24.590

您可以添加 android:screenOrientation="user" 并确保 java 代码或清单中没有 SCREEN_ORIENTATION_SENSOR。

# html - 一个网站如何告诉浏览器它是一个可以添加为搜索引擎的搜索引擎？

> ID：12567370
> 
> 赞同：1
> 
> 时间：2012-09-24T14:43:40.280
> 
> 标签：html, firefox, search, browser, meta-tags

我想制作一个带有包含搜索关键字的 get 参数的页面。当我进入一个网站时，firefox 会识别出具有搜索功能的适当网站，并允许您单击几下即可添加它们。（地址栏上的下拉菜单） 我的网站如何告诉firefox 或chrome 它具有每个人都可以从浏览器地址栏或chrome 的omnibar 使用的搜索功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:46:13.110

你需要这个元标记

```
 <link rel="search" type="application/opensearchdescription+xml" href="[your url]/opensearch.xml" title="[Your title]" /> 
```

您可以在此处找到更多信息[http://www.opensearch.org/Home](http://www.opensearch.org/Home)

你的 xml 文件看起来像

```
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/">
    <ShortName>[Name]</ShortName>
    <Description>[Desc]</Description>
    <Image height="16" width="16" type="image/x-icon">[ico]</Image>
    <Image height="64" width="64" type="image/png">[png]</Image>
    <Url type="text/html" method="get" template="[url]/?q={searchTerms}"/>
    <Url type="application/opensearchdescription+xml" rel="self" template="[url]/opensearch.xml"/>
</OpenSearchDescription> 
```

# jquery - jQuery循环元素上的jQuery悬停功能后switchClass失败

> ID：12567375
> 
> 赞同：1
> 
> 时间：2012-09-24T14:44:13.970
> 
> 标签：jquery, background, hover, cycle

我有一个使用 jQuery 循环插件作为滑动横幅的页面，每张幻灯片内部都有一个 div ( `#info`)，其背景颜色在悬停时动画。

我还尝试使用 switchClass 在页面上的三种配色方案之间切换，这也改变了 的背景颜色`#info`，这在悬停在火上之前效果很好`#info`，之后 switchClass 按钮不再起作用。

这是悬停的jQuery：

```
$('#info.default').hover(function(){
        $('#info.default').stop().animate({backgroundColor: '#CDBF21'}, 300);
        $('#info.default .description').stop().animate({color: '#444'}, 300);
    }, function() {
        $('#info.default').stop().animate({backgroundColor: '#203E52'}, 300);
        $('#info.default .description').stop().animate({color: '#fff'}, 300);
    }); 
```

这里是 switchClass 部分：

```
$('.coral-green-button').click(function(){
        $('#info.default').stop().switchClass("default", "coral-green", 1000 );
        $('#info.green-blue').stop().switchClass("green-blue", "coral-green", 1000 ); 
    });

$('.green-blue-button').click(function(){
        $('#info.coral-green').stop().switchClass("coral-green", "green-blue", 1000 );
        $('#info.default').stop().switchClass("default", "green-blue", 1000);
    });

$('.mustard-blue-button').click(function(){
        $('#info.coral-green').stop().switchClass("coral-green", "default", 1000);
        $('#info.green-blue').stop().switchClass("green-blue", "default", 1000);
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:33:41.740

我知道这并不完美，但这是朝着正确方向迈出的一步：

[http://jsfiddle.net/Mutmatt/Q6zsm/19/](http://jsfiddle.net/Mutmatt/Q6zsm/19/)

你的元素（悬停时）正在获得一个新的背景，它是一个元素特定的属性，因此类级别的背景颜色不能覆盖它

更好的：

[http://jsfiddle.net/Mutmatt/Q6zsm/24/](http://jsfiddle.net/Mutmatt/Q6zsm/24/)

最好的：

[http://jsfiddle.net/Mutmatt/Q6zsm/49/](http://jsfiddle.net/Mutmatt/Q6zsm/49/)

内联评论

# c++ - Windows 8 下未解析的套接字引用

> ID：12567382
> 
> 赞同：3
> 
> 时间：2012-09-24T14:44:29.583
> 
> 标签：c++, sockets, windows-8, visual-studio-2012

我已经安装了 Windows 8 64 位和 Visual Sudio 2012。

后来，在课堂上，老师给了我们一个.cpp文件，让我们在我们的电脑上尝试一个udp服务器。它应该只是运行和使用，但就我而言，VS 给了我一些未解决的外部问题

```
#include <stdio.h>
#include <winsock.h>

#define GET_TIME "TIME\r\n"
#define MAX_MSG_SIZE 100

void processClient(LPVOID param);

void main(int argc, char **argv)
{
    SOCKET s, cliSocket;
    WSADATA wsaData;
    int iResult, len;
    struct sockaddr_in serv_addr, cli_addr;
    SECURITY_ATTRIBUTES sa;
    DWORD thread_id;

    if(argc != 2){
        printf("Usage: %s  <time_server_port>\n", argv[0]);
        getchar();
        exit(1);
    }

    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
    if (iResult != 0) {
        printf("WSAStartup failed: %d\n", iResult);
        getchar();
        exit(1);
    }

    if((s = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) == SOCKET_ERROR){
        printf("Unable to create socket (error: %d)!\n", WSAGetLastError());
        getchar();
        exit(1);
    }

    memset(&serv_addr, 0, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);
    serv_addr.sin_port = htons(atoi(argv[1]));

    if(bind(s, (struct sockaddr *)&serv_addr, sizeof(serv_addr))==SOCKET_ERROR){
        printf("Unable to bind socket to port %s (error: %d)\n", argv[1], WSAGetLastError());
        closesocket(s);
        getchar();
        exit(1);
    }

    listen(s, 5);

    while(1){

        printf("Waiting for a time request...\n");

        len = sizeof(cli_addr);

        if((cliSocket = accept(s, (struct sockaddr *)&cli_addr, &len))==SOCKET_ERROR){
            printf("Unable to accept new connection (error: %d)\n", WSAGetLastError());
            closesocket(s);
            getchar();
            exit(1);
        }

        printf("Connection from %s:%d accepted\n", inet_ntoa(cli_addr.sin_addr),
                    ntohs(cli_addr.sin_port));

        sa.nLength=sizeof(sa);
        sa.lpSecurityDescriptor=NULL;

        if(CreateThread(&sa,0 ,(LPTHREAD_START_ROUTINE)processClient, (LPVOID)cliSocket, (DWORD)0, &thread_id)==NULL){
            printf("Cannot start new slave thread (error: %d)\n", GetLastError());          
            closesocket(cliSocket);
        }

        printf("New slave thread started (id: %d)\n", thread_id);           
    }
}

void processClient(LPVOID param)
{
    SOCKET s;
    int nbytes, len;
    struct sockaddr_in cli_addr;
    char request[MAX_MSG_SIZE], response[MAX_MSG_SIZE];
    SYSTEMTIME systemTime;

    s = (SOCKET)param;

    if((nbytes = recv(s, request, MAX_MSG_SIZE, 0)) == SOCKET_ERROR){

        printf("Unable to receive request (error: %d)\n", WSAGetLastError());
        closesocket(s);
        return;
    }

    request[nbytes] = 0;
    if(strcmp(GET_TIME, request)!=0){
        printf("Unexpected request \"%s\" will be ignored\n", request);
        closesocket(s);
        return;
    }

    GetSystemTime(&systemTime);
    sprintf(response, "%d:%d:%d", systemTime.wHour,
                        systemTime.wMinute, systemTime.wSecond);

    if(send(s, response, strlen(response), 0) == SOCKET_ERROR){
        printf("Unable to send reponse (error: %d)\n", WSAGetLastError());
        closesocket(s);
        return;
    }

    len = sizeof(cli_addr);
    getpeername(s, (struct sockaddr *)&cli_addr, &len);
    printf("\"%s\" sent to %s:%d\n", response, inet_ntoa(cli_addr.sin_addr),
                    ntohs(cli_addr.sin_port));

    closesocket(s);
} 
```

这些是错误：

```
1>------ Build started: Project: ConsoleApplication1, Configuration: Debug Win32 ------
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _accept@12 referenced in function _main
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _bind@12 referenced in function _main
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _closesocket@4 referenced in function "void __cdecl processClient(void *)" (?processClient@@YAXPAX@Z)
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _getpeername@12 referenced in function "void __cdecl processClient(void *)" (?processClient@@YAXPAX@Z)
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _htonl@4 referenced in function _main
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _htons@4 referenced in function _main
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _inet_ntoa@4 referenced in function "void __cdecl processClient(void *)" (?processClient@@YAXPAX@Z)
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _listen@8 referenced in function _main
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _ntohs@4 referenced in function "void __cdecl processClient(void *)" (?processClient@@YAXPAX@Z)
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _recv@16 referenced in function "void __cdecl processClient(void *)" (?processClient@@YAXPAX@Z)
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _send@16 referenced in function "void __cdecl processClient(void *)" (?processClient@@YAXPAX@Z)
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _socket@12 referenced in function _main
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _WSAStartup@8 referenced in function _main
1>TCPConcurrentServer.obj : error LNK2019: unresolved external symbol _WSAGetLastError@0 referenced in function "void __cdecl processClient(void *)" (?processClient@@YAXPAX@Z)
1>c:\users\brunoc\documents\visual studio 2012\Projects\ConsoleApplication1\Debug\ConsoleApplication1.exe : fatal error LNK1120: 14 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

有人知道如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T14:51:43.083

打开`Project`属性，转到`Linker -> Input`，然后添加`ws2_32.lib`到`Additional Dependencies`编辑行。

# c - 用于生成 AWK 扫描仪的 FLEX - 识别变量

> ID：12567389
> 
> 赞同：0
> 
> 时间：2012-09-24T14:44:50.977
> 
> 标签：c, regex, awk, flex-lexer

我正在尝试使用 (F)Lex 分析为 AWK 源代码构建扫描仪。我已经能够识别 AWK keyworkds、注释、字符串文字和数字，但是我被困在如何生成正则表达式以匹配变量实例名称，因为它们是非常动态的。

有人可以帮我开发一个匹配 AWK 变量的正则表达式。 [http://pubs.opengroup.org/onlinepubs/009695399/utilities/awk.html](http://pubs.opengroup.org/onlinepubs/009695399/utilities/awk.html)提供了 AWK 语言的定义。

变量必须以字母开头，但可以是字母数字，不考虑大小写。唯一可以使用的特殊字符是下划线（“_”）。抱歉，我对 REGEX 不是很熟悉，更不用说 FLEX 的正则表达式了。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:02:17.443

```
[a-zA-Z_][a-zA-Z_0-9]* 
```

以字母或下划线开头，后跟零个或多个字母数字或下划线。

特殊情况是字段，前缀为`$`：

```
$0
$1 
```

并且

```
$NF
$i 
```

你必须决定如何处理这些问题。

# facebook - Open Graph 发布限制

> ID：12567390
> 
> 赞同：0
> 
> 时间：2012-09-24T14:44:51.263
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在为我的应用程序创建一个 Facebook Open Graph 操作，该操作有可能为每个用户发布多次（例如，每次用户在网站上收听歌曲时）。对于某些用户，我可能在每个会话或每天都有数百个这样的操作。

问题是——Facebook 对应用发布 Open Graph 操作的次数有限制吗？显然，Facebook 不会在提要上显示所有这些操作，并且可能只会显示第一个操作，如果有的话。但是限制发布是应用程序的责任，还是鼓励发布实际数量的操作？

如果应用程序应该节流，那么每个用户每天的合理操作数是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:03:25.180

发布一切。我们将负责聚合。

# android - 新活动 - 应用程序未启动

> ID：12567391
> 
> 赞同：1
> 
> 时间：2012-09-24T14:44:54.997
> 
> 标签：android, android-activity

我在我的应用程序中添加了第二个活动，我在 AndroidManifest.xml 中编写了这个，但我仍然遇到问题。我不知道我该如何解决。我确定我的源代码是正确的，因为我从书中重写了它。我的日志猫：

```
 09-24 15:41:16.359: E/AndroidRuntime(5735): FATAL EXCEPTION: main
09-24 15:41:16.359: E/AndroidRuntime(5735): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.przyklad.sudoku/org.przyklad.sudoku.MainActivity}: java.lang.NullPointerException
09-24 15:41:16.359: E/AndroidRuntime(5735):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at android.os.Looper.loop(Looper.java:137)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at android.app.ActivityThread.main(ActivityThread.java:4441)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at java.lang.reflect.Method.invokeNative(Native Method)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at java.lang.reflect.Method.invoke(Method.java:511)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at dalvik.system.NativeStart.main(Native Method)
09-24 15:41:16.359: E/AndroidRuntime(5735): Caused by: java.lang.NullPointerException
09-24 15:41:16.359: E/AndroidRuntime(5735):     at org.przyklad.sudoku.MainActivity.onCreate(MainActivity.java:19)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at android.app.Activity.performCreate(Activity.java:4465)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-24 15:41:16.359: E/AndroidRuntime(5735):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
09-24 15:41:16.359: E/AndroidRuntime(5735):     ... 11 more 
```

这是 MainActivity.java

```
 package org.przyklad.sudoku;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.content.Intent;
import android.view.View;
import android.view.View.OnClickListener;

public class MainActivity extends Activity implements OnClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

     // Konfigurujemy obiekty nasłuchujące kliknięć dla wszystkich przycisków
        View przyciskKontynuacja = findViewById(R.id.przycisk_kontynuacja);
        przyciskKontynuacja.setOnClickListener(this);
        View przyciskNowa = findViewById(R.id.przycisk_nowa);
        przyciskNowa.setOnClickListener(this);
        View przyciskInformacje = findViewById(R.id.przycisk_informacje);
        przyciskInformacje.setOnClickListener(this);
        View przyciskWyjscie = findViewById(R.id.przycisk_wyjscie);
        przyciskWyjscie.setOnClickListener(this);

    }
        public void onClick(View v){
            switch (v.getId()){
            case R.id.przycisk_informacje:
                Intent i = new Intent(this, Informacje.class);
                startActivity(i);
                break;

        }
    }
} 
```

和 Informacje.java

```
package org.przyklad.sudoku;

import android.app.Activity;
import android.os.Bundle;

public class Informacje extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.informacje);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:55:46.287

不要相信书。他们充满了信件和东西。

此外，正如您的堆栈跟踪所建议的（阅读它，其中有很多好东西。看起来比您的书中更多），您有一个空引用，并且您尝试在其上调用一个方法。该调用位于 MainActivity 第 19 行。即在 onCreate 方法中。

最有可能的是，它是由于某种原因找不到的视图参考。可能，您忘记调用 setContentView

# php - 如何根据点击事件启用或禁用复选框？

> ID：12567394
> 
> 赞同：-4
> 
> 时间：2012-09-24T14:45:08.073
> 
> 标签：php, javascript, jquery, html, onclick

我有一个 Web 应用程序 (PHP)，我必须进行此更改。我更像是一个数据库，脚本专家，请多多包涵！

我在一个表格中有 8 个复选框（认为编号为 1~8）。我必须实现一个条件：

> ```
> If one of the first 4 checkboxes are checked (only one checkbox can be checked in the first 4),
> Then the next 4 checkboxes should be disabled
> Else the next 4 checkboxes should be enabled. 
> ```

我的解决方案：

*   将前 4 个复选框设为单选按钮以确认**唯一一个复选框可以被选中**的条件。
*   根据上述操作禁用/启用接下来的 4 个复选框。所以，如果单选按钮没有被选中，那么接下来的 4 个复选框应该可供选择。

我必须实际禁用复选框而不是使用 jQuery 隐藏，因此禁用时复选框应该是纯灰色（不可选中）。

示例代码（为寻求类似解决方案的其他人去除了一些格式混乱）：

```
 <div>
            <input type="checkbox" name="check1" value="1" id="check1" <?php if (!empty($rows['check1'])) { echo 'checked="checked"'; } ?> />
            <input type="checkbox" name="check2" value="1" id="check2" <?php if (!empty($rows['check2'])) { echo 'checked="checked"'; } ?> />
            <input type="checkbox" name="check3" value="1" id="check3" <?php if (!empty($rows['check3'])) { echo 'checked="checked"'; } ?> />
            <input type="checkbox" name="check4" value="1" id="check4" <?php if (!empty($rows['check4'])) { echo 'checked="checked"'; } ?> />
            <input type="checkbox" name="check5" value="1" id="check5" <?php if (!empty($rows['check5'])) { echo 'checked="checked"'; } ?> />
            <input type="checkbox" name="check6" value="1" id="check6" <?php if (!empty($rows['check6'])) { echo 'checked="checked"'; } ?> />
            <input type="checkbox" name="check7" value="1" id="check7" <?php if (!empty($rows['check7'])) { echo 'checked="checked"'; } ?> />
            <input type="checkbox" name="check8" value="1" id="check8" <?php if (!empty($rows['check8'])) { echo 'checked="checked"'; } ?> />
        </div> 
```

我的要求：

*   这样做最有效的方法是什么？（简单而不会使问题复杂化）
*   非常感谢任何示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:00:33.887

I think this is what you're looking for. You can achieve it using [.index()](http://api.jquery.com/index/) to get current clicked checkbox. [.slice()](http://api.jquery.com/slice/) is used to get all elements at index 4 and after.

```
$('input[type=checkbox]').change(function(){
    var $linputs =  $('input[type=checkbox]').slice(4);
    var $this = $(this);    
    $linputs.prop('disabled',($this.index() < 4 && this.checked));        
    if($this.index() < 4 && this.checked){
        $linputs.prop('checked',false);
    }
});​ 
```

[FIDDDLE](http://jsfiddle.net/un5Tg/2/)

Or is it something like this that you want? Where only one of the first four checkboxes can be checked. If one is checked then all the others will be disabled.

```
$('input[type=checkbox]').change(function(){
    var $this = $(this);    
    $(linputs).prop('disabled',($this.index() < 4 && this.checked));        
    if($this.index() < 4 && this.checked){
        $(linputs).prop('checked',false);
    }
});​ 
```

[http://jsfiddle.net/h5wDr/](http://jsfiddle.net/h5wDr/)

**EDIT:**

if you have other checkboxes in the page and want to be able to separate them from this logic, you can add context in the selector so it keeps this code isolated to only those within this div like so

```
<div id='test'>
                <input type="checkbox" name="check1" value="1" id="check1" >first
            <input type="checkbox" name="check2" value="1" id="check2" >second
            <input type="checkbox" name="check3" value="1" id="check3" >third
            <input type="checkbox" name="check4" value="1" id="check4" >fourth
            <input type="checkbox" name="check5" value="1" id="check5" >fifth
            <input type="checkbox" name="check6" value="1" id="check6" >sixth
            <input type="checkbox" name="check7" value="1" id="check7" >seventh
            <input type="checkbox" name="check8" value="1" id="check8" >eight
</div> 
```

Then just add the context

```
var $inputs = $('input[type=checkbox]', $('#test')); 
// this will only select checkboxes within the element with id=test 
```

[http://jsfiddle.net/h5wDr/2/](http://jsfiddle.net/h5wDr/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:15:40.740

```
 <div>
        <input type="checkbox" name="check1" value="1" id="check1" />
        <input type="checkbox" name="check2" value="1" id="check2"  />
        <input type="checkbox" name="check3" value="1" id="check3"  />
        <input type="checkbox" name="check4" value="1" id="check4"  />
        <input type="checkbox" name="check5" value="1" id="check5"  />
        <input type="checkbox" name="check6" value="1" id="check6"  />
        <input type="checkbox" name="check7" value="1" id="check7"  />
        <input type="checkbox" name="check8" value="1" id="check8"  />
    </div>
<script>
    $(document).ready(function () {

        var $firstFourChecks = $("#check1,#check2,#check3,#check4");
        var $lastFourChecks = $("#check5,#check6,#check7,#check8");

        $firstFourChecks.on('click', function (e) {

            var isCheck = $(this).is(':checked');
            $firstFourChecks.not($(this)).prop('checked', false);
            $(this).prop('checked', isCheck);

            if (isCheck) {
                $lastFourChecks.prop("disabled", true).prop('checked', false);
            } else {
                $lastFourChecks.prop("disabled", false);
            }
        });
    });
</script> 
```

这完全是在 javascript 中完成的，并且与您使用 php 的事实无关。本质上，我们确保在前四个中为您选择，它们被设置为 false。然后我们切换被点击的状态。

如果您在前四个中单击了某些内容，则后四个将关闭并禁用，否则将重新启用。这与发布的伪代码匹配。

您应该可以直接将其粘贴进去。出于速度原因，选择器被缓存。

[http://jsfiddle.net/L4qeN/](http://jsfiddle.net/L4qeN/)在这里看到。

编辑：哇看起来有人在几分钟内就把我打败了。我们确实使用了非常不同的方法。然而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:00:04.863

You would have to try it yourself, but I would do something like (using javascript):

*   Add a class to every checkbox of the first group and another class to every checkbox of the second group;
*   Check for change events for the first class, turn off all of the first group but the clicked one;
*   Check if any of the first group is selected and activate / deactivate the second class group accordingly.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:00:19.233

Give your first four checkboxes one class and then your second four a second class and then add `onclick` handlers to all the first checkboxes:

```
$('.firstfour_class').click(
   if $('input:checkbox:checked.firstfour_class').length > 1){
       //code to turn OFF the second four and make them unchecked
   } else {
      //code to turn ON the second four
   }
}) 
```

[Check out the jQuery :checked selector](http://api.jquery.com/checked-selector/).

# wso2 - 无法在 Windows 上启动 ws02 应用程序服务器 - 错误“系统找不到指定的批处理标签 - commandLifecycle”

> ID：12567401
> 
> 赞同：3
> 
> 时间：2012-09-24T14:45:21.527
> 
> 标签：wso2

我下载了 wso2 应用服务器 5.0.0。我将它放在我的 Windows 服务器上并尝试执行 wso2server.bat --run。当我这样做时，我收到此错误：

系统找不到指定的批次标签 - commandLifecycle

如果我查看 wso2server.bat 文件，我会发现 commandLifecycle 标签不存在。

有没有其他人遇到过同样的问题？

编辑：我刚刚尝试运行 4.1.2，但没有遇到同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T19:11:23.293

我只是运行外壳程序： wso2server.bat 没有参数 [--run] 并且它启动正常。

# facebook - 拥有 Facebook Connect 的公司 Facebook 帐户？

> ID：12567409
> 
> 赞同：1
> 
> 时间：2012-09-24T14:45:37.810
> 
> 标签：facebook

我的公司希望在我们销售的一些网站中加入 Facebook Connect。让集成正常工作并不是真正的问题，问题在于以有用的方式创建所需的应用程序。

我可以使用我的个人 Facebook 帐户创建应用程序，但如果我在几年后退出，那就不好了，而且由于 Facebook 通过 Pages 废弃了公司帐户，所以不可能创建一个可以收集所有 Facebook Connect 的公司帐户我们制作的应用程序。

是否有官方解决方案和/或有效的 hack 可以为我们解决这个问题？

提前感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:51:19.010

不，您将不得不为此使用“真实”的 Facebook 帐户。您还需要以 Facebook 开发者身份验证该帐户。这涉及提交电话号码（短信验证）或信用卡号码。

如果您担心使用自己的个人帐户，作为您的客户使用他的。没有理由强迫您使用**您的**帐户 - 毕竟，它只是一份工作，对吗？:)

我强烈建议不要开设一个新的“假”帐户来管理您的应用程序。Facebook 正在加强他们的安全措施和方法来寻找这些虚假用户。如果 Facebook 关闭这个“假”帐户，您将无法再访问应用程序的设置。

# sql - 我需要 T-SQL 中的最佳实践将数据导出到 CSV（带标题）

> ID：12567410
> 
> 赞同：7
> 
> 时间：2012-09-24T14:45:39.990
> 
> 标签：sql, tsql, csv, sqlcmd, sql-agent-job

**我需要做的是使用 T-SQL 将数据导出到 CSV 文件中。**

而且我很困惑有很多方法可以做到，我不知道选择哪一种，请帮我确认一下：

据我所知，大约有 3 种方法，我希望您帮我确认一下：

## 使用 Microsoft.Jet.OLEDB.4.0，如下所示：

```
INSERT INTO OPENROWSET('Microsoft.Jet.OLEDB.4.0',
                       'Text;Database=C:\Temp\;HDR=Yes;',
                       'SELECT * FROM test.csv')
            (object_id, name)
SELECT object_id, name
  FROM sys.tables; 
```

**但这需要 csv 文件存在，并且带有标题**

## 使用 SQLCMD

命令行。

## 使用 BCP

使用联合，获取数据和它的列标题。

这就是我对 T-SQL 导出为 CSV 的所有理解，请帮我确认。

还有其他方法可以导出到 CSV 吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-08T14:13:26.447

在 SQL Server 中执行以下命令：

```
EXEC xp_cmdshell 'SQLCMD -S . -d MsVehicleReg2 -Q "SELECT * FROM tempViolationInfo" -s "," -o "O:\result.csv"'; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T15:25:43.610

您可以使用 UNION 创建标题行，如下所示：

```
SELECT 'object_id', 'name'

UNION ALL

SELECT object_id, name
FROM sys.tables 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-22T15:15:16.837

这是T-SQL方式：

```
INSERT INTO OPENROWSET('Microsoft.ACE.OLEDB.12.0','Text;Database=D:\;HDR=YES;FMT=Delimited','SELECT * FROM [FileName.csv]')
SELECT Field1, Field2, Field3 FROM DatabaseName 
```

但是，有几点需要注意：

1.  您需要有可用的 Microsoft.ACE.OLEDB.12.0 提供程序。Jet 4.0 提供程序也可以工作，但它很古老，所以我改用了这个。

2.  .CSV 文件必须已经存在。如果您使用标题 (HDR=YES)，请确保 .CSV 文件的第一行是所有字段的分隔列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-28T18:47:40.340

关于“最佳实践”，没有最佳实践。有几个选项可用，不限于：

*   在 T-SQL 中使用 INSERT INTO OPENROWSET(...) SELECT * from [MyTable]...

*   执行 BCP，无论是从作业步骤还是使用 xp_cmdshell 在 T-SQL 中

*   SSIS 包

*   PowerShell（来自作业步骤，在 SQL Server 2008+ 中）或其他外部脚本/可执行文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-28T18:42:40.693

对于 Ace.OLEDB.12.0（新的 Jet 可再发行引擎），您可以安装 32 位或 64 位独立引擎，即使您已经从 Access 安装了“其他风味”，无论是单独安装， ETC：

使用 /passive 命令行选项：

（32 位）：AccessDatabaseEngine.exe /passive（64 位）：AccessDatabaseEngine_64.exe /passive

就我而言，我有 64 位 SQL Express 2008 R2，并安装了 32 位 Office 12 应用程序（因此，安装了 32 位 ACE 驱动程序）。我安装了 64 位 AccessDatabaseEngine_64.exe，它现在对我来说有点用了......

此外，这是假设您已经完成了其他配置工作：

EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'AllowInProcess', 1 GO

EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'DynamicParameters', 1 GO

sp_configure '显示高级选项', 1; 去重新配置；GO sp_configure 'Ad Hoc 分布式查询', 1; 去重新配置；去

# c++ - 为什么我的析构函数似乎比构造函数更频繁地被调用？

> ID：12567416
> 
> 赞同：11
> 
> 时间：2012-09-24T14:45:56.040
> 
> 标签：c++, constructor

```
#include<iostream>
using namespace std;

class A{
public:
    static int cnt;
    A()
    { 
        ++cnt; 
        cout<<"constructor:"<<cnt<<endl;
    }
    ~A()
    {
        --cnt;
        cout<<"destructor:"<<cnt<<endl;
    }
};

int A::cnt = 0;

A f(A x){
    return x;
}
int main(){
    A a0;
    A a1 = f(a0);
    return 0;
} 
```

该程序将输出：

```
构造函数：1
析构函数：0
析构函数：-1
析构函数：-2

```

构造函数和析构函数不是成对出现的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T14:47:42.723

您需要添加一个增加计数器的复制构造函数。

```
A(const A&)
{ 
    ++cnt; 
    cout<<"copy constructor:"<<cnt<<endl;
} 
```

如果您没有显式添加它，编译器会生成一个对 counter 什么都不做的`cnt`。

这个表达

```
A a1 = f(a0); 
```

正在创建 的副本`a0`，它使用了复制构造函数。副本的确切数量可能因[复制省略](http://en.wikipedia.org/wiki/Copy_elision)而异，但您`cnt`应该`0`在程序结束时。

**注意**：在 C++11 中，您还应该考虑编译器生成*移动复制构造函数*的可能性，但是，一旦您声明了自己的复制构造函数，编译器将不再生成移动版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T14:49:26.000

您没有跟踪**所有**构造函数，只跟踪默认构造函数。编译器生成了一个复制构造函数并使用了几次，其中列出了 2 个对象被列为已销毁而不是已创建。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T14:48:09.483

您还需要计算复制构造函数调用。在 C++11 中，还需要考虑移动构造函数。

# xcode - UITextField 键盘不再起作用

> ID：12567417
> 
> 赞同：0
> 
> 时间：2012-09-24T14:45:58.237
> 
> 标签：xcode, keyboard

请需要帮助：我在一个视图中有两个文本字段，保存按钮和完成按钮。现在，当我第一次运行我的应用程序并输入文本字段时，键盘显示效果很好，我可以保存。但是当我按下完成按钮退出该视图时，键盘不再出现在我的应用程序的任何其他部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:54:35.103

在这里只是在黑暗中拍摄，但尝试使用

```
[textField resignFirstResponder]; 
```

在完成的动作中

# java - 在Android中用java读取id xml

> ID：12567425
> 
> 赞同：0
> 
> 时间：2012-09-24T14:46:33.553
> 
> 标签：java, android, xml

我想将一些数据添加到 xml 文件中，例如：

```
<people>
   <person name="Jo">
      <number>0</number>
      ...
   </person>
   <person name="Steve">
      <number>5</number>
      ...
   </person>
</people> 
```

其中 name 是一个 id 值。我使用这个表达式是因为我需要知道是否某个孩子有相同的名字我想添加所以我只需要写：

```
Document doc = docBuilder.parse(file);
Element person = doc.getElementById("myname"); 
```

所以我不需要对所有 nodechild 进行循环。我的问题是，为此我需要定义一个模式，但 Java 在以下代码的第四行返回一个错误：

```
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
docFactory.setNamespaceAware(true);
docFactory.setValidating(true);
docFactory.setAttribute("http://java.sun.com/xml/jaxp/properties/schemaLanguage", "http://www.w3.org/2001/XMLSchema");                      
docFactory.setAttribute("http://java.sun.com/xml/jaxp/properties/schemaSource", "my schema in a string");                       
    DocumentBuilder docBuilder = docFactory.newDocumentBuilder(); 
```

错误是：

java.lang.IllegalArgumentException：http: [//java.sun.com/xml/jaxp/properties/schemaLanguage](http://java.sun.com/xml/jaxp/properties/schemaLanguage)

我已经进口了：

```
 import javax.xml.parsers.DocumentBuilder;
 import javax.xml.parsers.DocumentBuilderFactory;
 import javax.xml.transform.Transformer;
 import javax.xml.transform.TransformerFactory;
 import javax.xml.transform.dom.DOMSource;
 import javax.xml.transform.stream.StreamResult;

 import org.w3c.dom.Document;
 import org.w3c.dom.Element; 
```

为什么我有这个错误？当然，我可以使用 name 作为孩子并在 NodeList 中读取所有内容，然后使用循环来执行此操作，但我认为这种方式具有更好的性能。

PS：我将模式作为字符串插入。我不知道我是否会出错，因为错误在前一行，但如果我需要在文件中包含架构，我应该在哪里保存文件？在原始文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:43:53.567

是的，您总是可以使用`DOM`,`SAX`和`Pull Parser`，但请查看下面提到的解析和操作 XML 数据的内容。

**-** `JAXP`和`JAXB`

**-** `Castor`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:38:52.143

最后，我不得不将名称作为一个值而不是作为一个属性并执行循环。这是我存档的唯一选项。

# iphone - 如何使 UITextView 根据 contentSize 完成带有点的文本？

> ID：12567428
> 
> 赞同：0
> 
> 时间：2012-09-24T14:46:40.183
> 
> 标签：iphone, ios, text, uitextfield

我有一个带有动态数据的 UITextview，我有一个高度的大小，比如说 200，我如何将 UITextField 文本中的文本裁剪到高度并添加“...”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:53:14.853

这个文本视图应该启用输入吗？

如果是，那么您不应该裁剪文本

如果不是，那么您可以使用 UILabel 并将其更改`numberOfLines`为显示，然后将`lineBreakMode`属性设置为`UILineBreakModeTailTruncation`

# cocoa - 可可：使用 ASIHttpRequest 和 ASINetwork 下载

> ID：12567429
> 
> 赞同：0
> 
> 时间：2012-09-24T14:46:43.483
> 
> 标签：cocoa, download, asihttprequest, nsoperationqueue

我正在可可中实现下载管理器。用户可以添加多个下载请求，请求管理器将在面板中显示请求的进度。我遇到了关于队列中请求的暂停/恢复的问题。

为简单起见，假设最大并发操作数为 1，我添加了几个请求，顺序为：1、2、3、4、5。如果没有中断，则从1到5依次下载请求。假设我暂停了请求 1，请求 2 应该继续下载。那段时间，我恢复了请求1。因此，请求2完成后，我希望请求1可以在请求3之前继续。

这里的问题是：对于我暂停时的单个请求，该请求实际上已被取消。当我恢复请求时，一个新的请求被初始化然后开始。在操作队列中，`[self cancel]`如果请求被暂停，我现在发送，以便可以启动下一个请求。但是，如果恢复了，我不知道该怎么办。取消的请求无法再次添加到队列中。如果我创建了一个新的并将其添加到队列中，我如何像以前一样保证优先级？

请提供有关如何操作的提示。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:38:58.160

目前我自己使用以下方法制作解决方案：

1.  发出一个继承自的自定义请求`ASIHttpRequest`；
2.  制作一个`NAMutableArray`以包含所有请求；
3.  如果添加了一个请求，则枚举数组以查看是否正在执行最大请求。如果没有，请在自己的队列中启动请求。如果超过最大值，只需将请求添加到数组中，并将其状态设置为`waiting`;
4.  如果一个请求正在完成或失败，则枚举数组以通过添加 time 和 status 来查看位于第一个位置的请求`waiting`；

# android - 如何在服务器上存储文件？

> ID：12567434
> 
> 赞同：0
> 
> 时间：2012-09-24T14:46:53.603
> 
> 标签：android, web-services, soap, webserver, private-key

我可以访问 SOAP Web 服务，并且我有一个用于我正在制作的 Android 应用程序的文件，该文件需要存储在我的服务器上。我不需要为应用程序的每个用户或任何东西上传一个新的；只有一个文件，只需上传一次，但需要由每个用户的应用程序读取。

如何将其添加到 Web 服务？我是否需要联系编写 Web 服务的人并让他们添加它，还是我可以自己上传？如果适用，我们将不胜感激 Android/Java 代码或教程链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:17:34.670

我认为你的问题很重要。你问三个不同的问题

1）我如何上传东西到服务器？我应该要求开发人员为此进行修改吗？

答案是：服务器应该支持接受和存储你尝试上传的东西。如果它现在能够做到这一点，您不需要服务器开发人员添加任何东西。如果服务器不支持，您需要要求为此提供一些 UI、API

2) 我应该如何在我的服务器上安全地存储 P12

你想保护这个文件免受可以合法访问服务器的人或可以破解服务器的人的侵害吗？

P12 文件已加密。因此，安全存储文件本身不是问题，而是谁知道密码。所以，主要问题是你应该上传密码，应该只有用户知道密码，你应该上传密码的哈希吗？如果不更好地了解您要做什么，就很难回答这个问题。

3) 如何从 Android 向服务器上传内容？

我想您可能有兴趣查看 kSOAP (http://code.google.com/p/ksoap2-android/)。它允许您使用服务器。

但是，既然您需要它一次，可能只是文件的 FTP 上传就可以吗？

我建议编辑您的问题并描述您要解决的总体问题是什么。

# windows-7 - 将windows 7驱动程序移植到winXP

> ID：12567435
> 
> 赞同：0
> 
> 时间：2012-09-24T14:46:54.863
> 
> 标签：windows-7, windows-xp, driver, drivers

是否可以手动编辑驱动程序以使其在 Windows XP 上运行？

我想有很多差异，但是对于简单的驱动程序来说，一定可以移植他们使用的位置/公共汽车吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:57:04.997

你的意思是不用重新编译？如果是这样不推荐。

如果您愿意编译，请使用适当的 WDK 并选择适当的构建环境并尝试构建。您*可能*必须根据更改/可用性的任何 API 更改代码。

另请注意，驱动程序是按操作系统编译的，即 WinXP、Windows 2003、Windows Vista、Windows 7 等有不同的构建环境。

# asp.net - 我如何在产品的数据库中维护“规格-值”关系

> ID：12567437
> 
> 赞同：2
> 
> 时间：2012-09-24T14:47:02.477
> 
> 标签：asp.net, sql-server, database

我有一个产品表作为**NodeID | 父节点 ID | NodeName**，其中“node”可以是“Product”或“Category”。比如说：

**节点ID | 父节点 ID | 节点名称**

0|| ||根

1|| 0 || 电子产品

2 || 1 || 手机

3 || 2 || 三星

4 || 2 || 苹果

5 || 2 ||诺基亚

6 || 5 || 诺基亚 1100

7 || 5 || 诺基亚 Lumia 800

等等..

现在，Root > Electronics > Nokia 是类别，Nokia 1100 是产品。对于每个产品，我想要一组与产品相关的特定属性（规格）。我在带有列的表**ProductAttributes**中维护该关系：**AttributeId || 属性名 || 价值 || NodeID** ，我将保留特定 NodeID（例如诺基亚 1100）的所有属性及其对应值。

因此，当用户发布“诺基亚 1100”时，他将在 UI 中拥有所有带有预填充值的属性。

假设现在用户发布的内容不在数据库中，例如。说他正在发布“三星焦点”。他现在可以选择发布此请求的“类别”，在本例中为“手机”。

所以我想要的是，应该向用户显示仅与手机相关的属性（有/没有默认值），然后用户可以选择适用的，然后发布请求。

为此，我正在考虑将一些默认属性放入“类别”，只要他选择该类别，这些属性就可用。

但是我无法为这种方法和关系提出适当的表结构。我的意思是，一个类别可能有多个属性，每个属性可能有多个值。

我希望我能够描述我在这里尝试做的事情，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:51:02.340

听起来您正在寻找 EAV（实体属性值）模式

[http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)

请注意，尽管这种方法（有人说是反模式）充满了陷阱。

# magento - Magento 1.6.1.0 搜索框中的奇怪下拉列表

> ID：12567439
> 
> 赞同：0
> 
> 时间：2012-09-24T14:47:06.867
> 
> 标签：magento, google-chrome, magento-1.6

我在我的 Magento 网站的搜索框下方显示了这个列表（见附件） - url [http://www.performplay.co.uk](http://www.performplay.co.uk)，我已经检查了数据库中的这些搜索词，但它们不在数据库中。我已经重新索引并清除了缓存，但它们仍然出现 - 我已经从后端完成了 - 没有使用脚本 indexer.php。

不确定是什么导致此列表顶部出现似乎是在 Chrome 而不是 IE 中 ..？

有任何想法吗

谢谢![在此处输入图像描述](../Images/8477859676a6e2fe710798b0852c35fb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:32:39.700

您的 styles.css (skin/frontend/default/perform-play/css/styles.css) 不完整。插入类似的东西：

```
#search_autocomplete ul {
    background: #ffffff; 
    position: absolute;
}

#search_autocomplete ul .amount {
    color: #00FF00;
    float: right;
    font-size: 12px;
    line-height: 30px;
    padding: 9px 0 0 9px;
} 
```

# php - 根据数据库中的数据自动创建表

> ID：12567440
> 
> 赞同：-2
> 
> 时间：2012-09-24T14:47:08.497
> 
> 标签：php, sql

您好，我的数据库中有一组样本数据：

```
+-----------+-------------+---------------+-------+
| IDNumber  | SubjectCode | SubjectName   | Grade |
+-----------+-------------+---------------+-------+
| 2012-1234 | IT-101      | Intro to I.T  | 1.75  |
| 2012-1234 | IT-202      | Advanced I.T  | 1.50  |
| 2012-5678 | CS-300      | Haskell Prog. | 1.00  |
+-----------+-------------+---------------+-------+ 
```

我的问题是如何根据他们的数据在 PHP 中自动创建一个表。假设当我要搜索 IDNumber 2012-1234 时，它将自动创建 4 列和 2 行并在浏览器中打印，与 IDNumber 2012-5678 相同。

只要给我一些提示，我会做剩下的。一些帮助/想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:54:13.100

```
$result = $db->query("SELECT * FROM table");
$names_fetched = false;
$row_names = [];
while ($row = $result->fetchAssoc()) {
  if (!$names_fetched) {
     $row_names = array_keys($result); //row titles are here
     $names_fecthed = true;
  }
  //other staff
} 
```

# xpages - xPage 的日历控件

> ID：12567442
> 
> 赞同：1
> 
> 时间：2012-09-24T14:47:10.477
> 
> 标签：xpages

我正在寻找日历控件（就像经典的 Lotus Notes 视图），基本选项很少，例如：1 周、1 个月、1 天和其他一些等等。

我在 openntf.org 上找到了 2 + 我喜欢在 dojox 1.6 上类似的东西。我们不使用 ExtLib，所以我需要一些易于部署的东西。

有什么建议么？提前致谢！

// Dmytro

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:15:21.433

FullCalendar 是一个 jQuery 插件，它提供了一个全尺寸的拖放日历，如下所示。它使用 AJAX 即时获取每个月的事件，并且可以轻松配置为使用您自己的提要格式（为 Google 日历提供了扩展）。它在视觉上是可定制的，并为用户触发的事件（如单击或拖动事件）公开了挂钩。它是开源的，并根据 MIT 或 GPL 第 2 版许可进行双重许可。

[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

# opencl - OpenCL：将相同的 cl_mem 发送到多个设备

> ID：12567443
> 
> 赞同：1
> 
> 时间：2012-09-24T14:47:12.140
> 
> 标签：opencl

我正在编写一个多 GPU 并行算法。我面临的问题之一是找出如果我将一个 cl_mem 推送到多个设备并让它们同时运行同一个内核会发生什么。内核将对传递给设备的内存进行更改。

编写和调试 OpenCL 代码非常耗时。所以在我开始做之前，我想从 Stackoverflow 其他用户那里得到一些建议——我想知道在以下两种情况下做这样的事情的后果（例如，在执行过程中是否会引发任何异常？数据是否同步？当 CL_MEM_COPY_HOST_PTR使用的是这个 cl_mem 指向的同一内存区域是否正确复制到设备？等）：

1.  使用 CL_MEM_COPY_HOST_PTR 创建内存
2.  使用 CL_MEM_USE_HOST_PTR 创建内存

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:33:13.460

我在 OpenCL 规范中没有看到任何明确的内容可以保证数据将在设备之间同步。我不明白 OpenCL 实现如何知道如何在多个设备之间分配缓冲区以及以后如何再次聚合这些缓冲区。

我采用的方法是为每个设备创建一个单独的上下文、读、写和内核执行队列。然后，我在每个设备上创建单独的缓冲区，并将写入/读取排入队列以将数据移入/移出设备。因此，我自己明确地处理所有这些。

我想要一个更好的解决方案，但至少上述方法有效并且不依赖于任何特定于实现的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:00:24.330

[OpenCL 规范的附录 A](http://www.khronos.org/registry/cl/specs/opencl-1.2.pdf)解释了不同命令队列之间共享对象所需的同步。

基本上它说您应该使用 OpenCL 事件并`clFlush`在命令队列之间同步执行。OpenCL 实现将在 OpenCL 上下文的不同设备之间同步内存对象的内容。USE/COPY _HOST_PTR 没有任何区别，但 USE_HOST_PTR 将避免主机内存中数据的几个额外副本。最后用于`clEnqueueMapBuffer`与主机同步位。

# asp.net - 302 重定向似乎发生在 mvc 路由之前。帮助调试重定向

> ID：12567444
> 
> 赞同：1
> 
> 时间：2012-09-24T14:47:13.257
> 
> 标签：asp.net, asp.net-mvc, extjs, iis-7

*更新！* 所以我认为我已经解决了这个问题 - 它又回来了。我的忽略路线似乎被忽略了。每个请求都被重定向:(

我有一个正在开发的 MVC 站点，其中大部分都在 EXTJS 中，所以它们只使用一个控制器、主页和登录视图。非常标准的设置 - 这是上周工作的，在 Home 控制器上调用 Index 操作，它立即重定向到 login 操作。好的 - 很好，这是预期的行为。

只是现在，每个链接的文件，css 或 javascript，都被重定向回同一个登录页面。例外情况是通过 rest Uri 获取的几个脚本文件。因此，我下载了在此处传递的路由调试器，并将 URL 传递给了其中一个脚本文件。它立即重新格式化并重定向到登录页面，并将 returnurl 参数设置为我正在寻找的文件。这让我认为请求在命中任何 mvc 路由之前被重定向。这可能吗？我可以采取哪些进一步的步骤来调试此问题？

这是我的 global.asax 文件的路由内容：

```
/// <summary>
  /// Registers the routes.
  /// </summary>
  /// <param name="routes">The routes.</param>
  public static void RegisterRoutes(RouteCollection routes)
  {
     routes.IgnoreRoute(@"{resource}.axd/{*pathInfo}");
     routes.IgnoreRoute(@"resources/*"); //Redirecting!! Css and image files
     routes.IgnoreRoute(@"wcfrestbusinesslogic/*"); //This one works fine
     routes.IgnoreRoute(@"ext/*"); //These are also redirecting

     routes.IgnoreRoute(@"{*favicon}",
                        new
                        {
                           favicon = @"(.*/)?favicon.ico(/.*)?"
                        });

     routes.MapRouteLowercase(@"PasswordReset",
                              @"{action}/{guid}",
                              new
                              {
                                 controller = @"home",
                                 action = @"index"
                              },
                              new
                              {
                                 IsHome = new IsHomeActionConstraint(),
                                 guid = @"^(\{{0,1}([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12}\}{0,1})$"
                              });

     routes.MapRouteLowercase(@"Home",
                              @"{action}/{output}",
                              new
                              {
                                 controller = @"home",
                                 action = @"index",
                                 output = UrlParameter.Optional
                              },
                              new
                              {
                                 IsHome = new IsHomeActionConstraint(),
                                 output = @"(json|xml|pdf|jpg|jpeg|tiff|png|csv)?"
                              });

     routes.MapRouteLowercase(@"Home2",
                              @"{action}/{id}/{output}",
                              new
                              {
                                 controller = @"home",
                                 action = @"index",
                                 id = UrlParameter.Optional,
                                 output = UrlParameter.Optional
                              },
                              new
                              {
                                 IsHome = new IsHomeActionConstraint(),
                                 id = @"[0-9]{1,}",
                                 output = @"(json|xml|pdf)?"
                              });

     routes.MapRouteLowercase(@"Home3",
                              @"{action}",
                              new
                              {
                                 controller = @"home",
                                 action = @"index"
                              },
                              new
                              {
                                 IsHome = new IsHomeActionConstraint()
                              });

     routes.MapRoute(@"Action",
                     @"{controller}/{action}/{output}",
                     new
                     {
                        controller = @"Home",
                        action = @"Index",
                        output = UrlParameter.Optional
                     },
                     new
                     {
                        output = @"(json|xml|pdf|png|csv)?"
                     });

     routes.MapRoute(@"Default",
                     @"{controller}/{action}/{id}/{output}",
                     new
                     {
                        controller = @"Home",
                        action = @"Index",
                        id = UrlParameter.Optional,
                        output = UrlParameter.Optional
                     },
                     new
                     {
                        id = @"[0-9]{1,}",
                        output = @"(json|xml|pdf)?"
                     });

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:14:30.400

听起来您的表单身份验证正在保护文件。

你的 Web.Config 中有类似的东西吗？

```
<location path="resources">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location>
<location path="ext">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T16:47:54.177

那么解决方案原来与SVN有关。我不得不恢复到该网站工作的时间，并从那个时候用最新的更新覆盖。有些东西被缓存在某处，我不确定是什么修复了它，但如果您遇到此问题并且没有任何解决方案发布帮助 - 请查看您的源代码管理。

谢谢大家的帮助。

**更新** svn 只是问题的一部分，它不是 svn 本身 - 而是每个开发人员对项目中某些文件的更改权限。

当我们的计算机名称在周末更改时，问题又出现了。

问题的真正根源是 IIS 的匿名身份验证设置为使用 IUSR，但它应该设置为使用 ApplicationPoolIdentity。

由于 IUSR 通过附加计算机名称的方式工作，来自 SVN 的文件的权限都设置为我们的旧名称，因此当 IIS 尝试获取具有这些权限的任何内容时，它会失败并被重定向到登录页面 - 之前甚至打 MVC 的路由管理器。

**更新 2** 再次遇到这个问题，这次通过共享在我的机器上访问了一些 web.config 文件，并且这 302 事情开始发生。发现上面提到的设置在iis中设置不正确。

# algorithm - 算法和编程模型有什么区别？

> ID：12567445
> 
> 赞同：8
> 
> 时间：2012-09-24T14:47:13.233
> 
> 标签：algorithm, computer-science, terminology, difference, paradigms

算法和编程模型（或范式）有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T15:16:52.407

算法是一组预定的规则，用于执行产生计算效果的计算步骤。编程模型是表达算法的框架，但不是算法本身。

例如，快速排序是一种算法，因为它具有一组预先确定的规则，用于执行对数组进行排序的步骤。事件驱动编程是一种编程模型；它本身并没有说明如何执行步骤来解决实际问题，但它提供了一个表达算法的框架（以事件驱动的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:52:29.787

如果您想要它的*定义*，只需在 Wikipedia 上查找[计算模型。](https://en.wikipedia.org/wiki/Computational_model)你在那里找到

> 计算模型是计算科学中的一种数学模型，它需要大量的计算资源来通过计算机模拟来研究复杂系统的行为

换句话说，假设你有一个物理系统，从子弹到飞机，你想通过模拟研究它对环境的影响。您必须建立一个适当的数学模型（即结合牛顿定律和流体力学），然后根据方程将该*模型*转换为另一种适用于计算机的*模型。*

在非线性微分方程的情况下（子弹的轨迹是线性的AFAIK），这具有更大的意义，因为没有`algorithm`从非线性微分问题中提取精确的数学解。

# c# - WPF RibbonWindow + Ribbon = 屏幕外的标题？

> ID：12567455
> 
> 赞同：31
> 
> 时间：2012-09-24T14:47:43.987
> 
> 标签：c#, .net, wpf, windows, ribbon

我正在尝试`Ribbon`与 结合进行控制`RibbonWindow`，但是即使在微不足道的实验中它们也失败了。

1.  创建新的*WPF 应用程序*
2.  将代码更改为[MSDN 中的示例](http://msdn.microsoft.com/en-us/library/system.windows.controls.ribbon.ribbon.aspx)
3.  添加了对前缀的引用`System.Windows.Controls.Ribbon`并删除了`ribbon:`前缀（为什么示例已过时？）。
4.  添加了两个图标（16x16 和 32x32）。
5.  执行应用程序并看到这个（记事本供参考）：

![](../Images/2cc54bb716bf5f3ed086fb1be1acc205.png)

我已经可以看到很多问题：

1.  边框很小。普通窗口的边框很大，WPF 功能区应用程序的边框很小。标题高度也较小。
2.  边界模糊。当一个普通窗口被聚焦时，它的边框是黑色的。WPF 应用程序的边框是灰色的（在角落可以看到黑色；在边框上绘制了一些东西？）。
3.  应用程序图标放错了位置。它粘在左上角。
4.  应用程序标题放错了位置。它粘在顶部。

让我们将工具栏移到底部。现在我们看到了：

![](../Images/da4b5e807e645d70247db78542dec14e.png)

按钮位于工具栏之外。

最后，让我们最大化窗口：

![](../Images/3dc752fa6cbdaaa20e48132aff49f46e.png)

一半的标题消失在屏幕外（从技术上讲，窗口*在*屏幕外每边 8 个像素，但其他应用程序不会被此混淆）。

我使用的是 Windows 7、Aero、单显示器，没什么特别的。我害怕在 Windows 8 上测试应用程序...

有机会解决这个问题吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-24T15:12:04.500

## 真正的问题

在后台，[`WindowChrome`](http://msdn.microsoft.com/en-us/library/system.windows.shell.windowchrome.aspx)该类将其绑定`ResizeBorderThickness`到该类，`SystemParameters.WindowResizeBorderThickness`然后使用 Win32 API[`GetSystemMetrics`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724385.aspx)来确定系统边框大小。

但是，此方法的行为会根据可执行 PE 标头中设置的子系统版本而改变。如果只为 Windows Vista 和更高版本（版本 >= 6.0）编译，它将返回比为旧操作系统编译的更细的边框。[此 SO 答案中有关此的更多信息。](https://stackoverflow.com/a/11707312/183367)

在针对 .NET 4.5 进行编译时，C# 编译器将此版本设置为 6.0，因为 .NET 4.5 不能在 XP 上使用。但是，`WindowChrome`该类似乎依赖于遗留行为，因此无法在 Windows Vista 和 7 上正确计算玻璃尺寸。

## 解决方案

### 使用 .NET 4

您可以针对 .NET 4 进行编译，以强制编译器使用 4.0 作为其子系统版本值。功能区可用于 WPF 4 作为[单独的下载](http://www.microsoft.com/en-us/download/details.aspx?id=11877)。请注意，即使使用此解决方案，您也应取消选中项目属性中的“启用 Visual Studio 托管进程”以进行调试。否则，将使用带有子系统版本 6.0 的 vshost.exe 进程。

### 更改子系统版本

**编辑：** Olly 在评论中提供了一种方法：

> 在项目文件 `<subsystemversion>5.01</subsystemversion>`中添加一个属性，该属性错误地指示代码可以在 Windows XP 上运行。

### 忽略系统

您可以更改`WindowChrome.WindowChrome`窗口上的附加属性并使用所需的值，从而完全忽略系统值。你不应该那样做，但你可以。

### 填一个bug

Connect 上存在一个关于[行为变化的`GetSystemMetrics`](http://connect.microsoft.com/VisualStudio/feedback/details/753224/regression-getsystemmetrics-delivers-different-values)错误，但这一切都归结为子系统版本，因此从 Microsoft 的角度来看，它是一个功能。但是，`WindowChrome`该类确实应该被修复以在 Vista/7 下正常工作，特别是因为它现在是在 .NET 4.5 中构建的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-01T10:57:35.230

这是另一种解决方法，非常容易和简单的方法。只需在工具栏上添加一个负边距。您需要保留原始 Window 类而不是 RibbonWindow ！

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Application Name" Height="350" Width="525" Loaded="Window_Loaded" SizeChanged="Window_SizeChanged"> 
```

只需将此边距添加到功能区标题

```
<Ribbon Title="" Foreground="#333333" Margin="0,-22,0,0"> 
```

现在，当您最大化窗口时，一切都保持正确

![](../Images/2f19d1872d848e3a2376c8c12bb11ac8.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-24T21:31:45.593

对于任何阅读此问题的人，我将自己回答。忘记可怕的捆绑功能区控件并使用其他东西。在这里寻找一些替代方案：[什么是最好的 WPF 功能区控制套件？](https://stackoverflow.com/questions/474104/what-is-the-best-wpf-ribbon-control-suite)（就像所有好的问题一样，它已经关闭了）。

到目前为止，[Fluent Ribbon Control Suite](http://fluent.codeplex.com/)对我来说似乎是最好的免费选择。基本功能正常工作（边框和最大化没有问题，调整窗口并不慢等）。它具有 Office 样式并在玻璃被禁用时保留它们（这意味着您不会在 Metro 中看到 Windows9x-ish 窗口）。它的界面（后台、QAT）更像Office 2010。

也许在遥远的将来，微软会修复它的功能区，但现在，寻找替代品。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-20T11:06:55.640

我对 RibbonWindow 中的标题有同样的问题。我通过在 RibbonTitlePanel 中设置 TextBlock 的全局样式来解决它。

```
 <Style TargetType="{x:Type TextBlock}"> 
    <Style.Triggers>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type primitives:RibbonTitlePanel}},Path=Visibility}" Value="Visible"></Condition>
                <Condition Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type RibbonWindow}},Path=WindowState}" Value="Maximized"></Condition>
            </MultiDataTrigger.Conditions>
            <MultiDataTrigger.Setters>
                <Setter Property="VerticalAlignment" Value="Center"></Setter>
            </MultiDataTrigger.Setters>
        </MultiDataTrigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T14:00:34.657

这不是一个解决方案，甚至可能不是一个解决方法，而是一个糟糕的 hack，我希望只使用很短的时间，直到问题在框架中得到解决。

代码主要是从这个问题复制+粘贴[https://stackoverflow.com/a/8082816/44726](https://stackoverflow.com/a/8082816/44726)

我已经更改了允许的屏幕位置，这似乎有助于解决问题，而不是解决它。

后面的代码中调用是这样的

```
 InitializeComponent();
        RibbonWindowService.FixMaximizedWindowTitle(this); 
```

```
public static class RibbonWindowService
{
    public static void FixMaximizedWindowTitle(Window window)
    {
        window.SourceInitialized += WinSourceInitialized;
    }

    [DllImport("user32")]
    internal static extern bool GetMonitorInfo(IntPtr hMonitor, MONITORINFO lpmi);

    [DllImport("User32")]
    internal static extern IntPtr MonitorFromWindow(IntPtr handle, int flags);

    private static IntPtr WindowProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
    {
        switch (msg)
        {
            case 0x0024:
                WmGetMinMaxInfo(hwnd, lParam);
                handled = true;
                break;
        }

        return (IntPtr)0;
    }

    private static void WmGetMinMaxInfo(IntPtr hwnd, IntPtr lParam)
    {
        MINMAXINFO mmi = (MINMAXINFO)Marshal.PtrToStructure(lParam, typeof(MINMAXINFO));

        // Adjust the maximized size and position to fit the work area of the correct monitor
        int MONITOR_DEFAULTTONEAREST = 0x00000002;
        IntPtr monitor = MonitorFromWindow(hwnd, MONITOR_DEFAULTTONEAREST);

        if (monitor != IntPtr.Zero)
        {
            MONITORINFO monitorInfo = new MONITORINFO();
            GetMonitorInfo(monitor, monitorInfo);
            RECT rcWorkArea = monitorInfo.rcWork;
            RECT rcMonitorArea = monitorInfo.rcMonitor;

            // Offset top and left 1 pixel improves the situation
            rcMonitorArea.top += 1;
            rcMonitorArea.left += 1;

            mmi.ptMaxPosition.x = Math.Abs(rcWorkArea.left - rcMonitorArea.left);
            mmi.ptMaxPosition.y = Math.Abs(rcWorkArea.top - rcMonitorArea.top);
            mmi.ptMaxSize.x = Math.Abs(rcWorkArea.right - rcWorkArea.left);
            mmi.ptMaxSize.y = Math.Abs(rcWorkArea.bottom - rcWorkArea.top);
        }

        Marshal.StructureToPtr(mmi, lParam, true);
    }

    private static void WinSourceInitialized(object sender, EventArgs e)
    {
        IntPtr handle = (new WinInterop.WindowInteropHelper((Window)sender)).Handle;
        WinInterop.HwndSource.FromHwnd(handle).AddHook(WindowProc);
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct MINMAXINFO
    {
        public POINT ptReserved;
        public POINT ptMaxSize;
        public POINT ptMaxPosition;
        public POINT ptMinTrackSize;
        public POINT ptMaxTrackSize;
    };

    [StructLayout(LayoutKind.Sequential)]
    public struct POINT
    {
        /// <summary>
        /// x coordinate of point.
        /// </summary>
        public int x;

        /// <summary>
        /// y coordinate of point.
        /// </summary>
        public int y;

        /// <summary>
        /// Construct a point of coordinates (x,y).
        /// </summary>
        public POINT(int x, int y)
        {
            this.x = x;
            this.y = y;
        }
    }

    [StructLayout(LayoutKind.Sequential, Pack = 0)]
    public struct RECT
    {
        /// <summary> Win32 </summary>
        public int left;

        /// <summary> Win32 </summary>
        public int top;

        /// <summary> Win32 </summary>
        public int right;

        /// <summary> Win32 </summary>
        public int bottom;

        /// <summary> Win32 </summary>
        public static readonly RECT Empty = new RECT();

        /// <summary> Win32 </summary>
        public int Width
        {
            get { return Math.Abs(right - left); } // Abs needed for BIDI OS
        }

        /// <summary> Win32 </summary>
        public int Height
        {
            get { return bottom - top; }
        }

        /// <summary> Win32 </summary>
        public RECT(int left, int top, int right, int bottom)
        {
            this.left = left;
            this.top = top;
            this.right = right;
            this.bottom = bottom;
        }

        /// <summary> Win32 </summary>
        public RECT(RECT rcSrc)
        {
            left = rcSrc.left;
            top = rcSrc.top;
            right = rcSrc.right;
            bottom = rcSrc.bottom;
        }

        /// <summary> Win32 </summary>
        public bool IsEmpty
        {
            get
            {
                // BUGBUG : On Bidi OS (hebrew arabic) left > right
                return left >= right || top >= bottom;
            }
        }

        /// <summary> Return a user friendly representation of this struct </summary>
        public override string ToString()
        {
            if (this == Empty)
            {
                return "RECT {Empty}";
            }
            return "RECT { left : " + left + " / top : " + top + " / right : " + right + " / bottom : " + bottom + " }";
        }

        /// <summary> Determine if 2 RECT are equal (deep compare) </summary>
        public override bool Equals(object obj)
        {
            if (!(obj is Rect))
            {
                return false;
            }
            return (this == (RECT)obj);
        }

        /// <summary>Return the HashCode for this struct (not garanteed to be unique)</summary>
        public override int GetHashCode()
        {
            return left.GetHashCode() + top.GetHashCode() + right.GetHashCode() + bottom.GetHashCode();
        }

        /// <summary> Determine if 2 RECT are equal (deep compare)</summary>
        public static bool operator ==(RECT rect1, RECT rect2)
        {
            return (rect1.left == rect2.left && rect1.top == rect2.top && rect1.right == rect2.right && rect1.bottom == rect2.bottom);
        }

        /// <summary> Determine if 2 RECT are different(deep compare)</summary>
        public static bool operator !=(RECT rect1, RECT rect2)
        {
            return !(rect1 == rect2);
        }
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public class MONITORINFO
    {
        /// <summary>
        /// </summary>            
        public int cbSize = Marshal.SizeOf(typeof(MONITORINFO));

        /// <summary>
        /// </summary>            
        public RECT rcMonitor = new RECT();

        /// <summary>
        /// </summary>            
        public RECT rcWork = new RECT();

        /// <summary>
        /// </summary>            
        public int dwFlags = 0;
    }
} 
```

# ios6 - ios6 UIImageView - 加载-568h图像

> ID：12567456
> 
> 赞同：9
> 
> 时间：2012-09-24T14:47:48.910
> 
> 标签：ios6

我看过几篇关于 UIImage 在新的 iOS6 中自动加载**filename-568.png**图像的帖子，但我似乎无法在 UIImageView 类中重新创建它。

我正在使用情节提要（不是我的应用程序，只需要进行一些检查），并且我有一个简单的布局，只有图像视图缩放以适​​应，视图控制器中没有代码，而且我确定了**文件名。 png**和**filename-568h.png**存在（以及**-568@2x.png**以防万一）但是当我在 iOS6 模拟器中加载它时。这适用于 iOS 4 和 5，为视网膜加载 @2x 图像，但在 iOS6 中似乎不起作用。有任何想法吗？

该图像恰好被称为**Default.png**因为它与启动图像相同，这可能是问题吗？

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-30T10:45:43.263

**iOS6 不会**像处理 @2x 图像那样自动加载 -568h。唯一的例外是默认屏幕，但您必须自己手动设置 568h 图像。

我创建了一些代码来模拟使用该`[UIImage imageNamed:@""]`方法时 -568h 图像的加载行为，但是从 IB 中我不知道方法。如果您对这样的解决方案感兴趣，请访问[http://angelolloqui.com/blog/20-iPhone5-568h-image-loading](http://angelolloqui.com/blog/20-iPhone5-568h-image-loading)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T01:51:43.657

通常，您应该只将 568h 用于启动映像。如果您注意到自己在应用程序中使用不同的图像资源来获得新的显示高度，您应该考虑到您的 UI 可能过于静态。

人们希望将 568h 用于图像的最明显的地方是背景图像。另一种方法是只拥有一个具有最大可能尺寸的资产，并使用 UIView 的 contentMode 属性正确对齐它。

但也许你在图像的顶部和底部浮动了一些东西，所以 contentMode 并不能解决它。你可以认为顶部和底部的浮动可能应该是单独的视图。

请记住，我们一直在制作具有可变高度的应用程序。每次弹出键盘，就好像屏幕尺寸缩小了一样。

# c# - 新手玩可能最好避免的事情；将连接实例添加到单例模式中

> ID：12567461
> 
> 赞同：2
> 
> 时间：2012-09-24T14:48:00.753
> 
> 标签：c#, design-patterns

> **可能重复：**
> [SqlConnection Singleton](https://stackoverflow.com/questions/2382007/sqlconnection-singleton)

这是当前代码：

```
static SqlConnection CreateConnection() {
    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["IMS"].ConnectionString);
    return conn;
} 
```

因为应用程序只需要一个打开的连接，我想将它移到这种设计模式中。如何将上面的内容翻译成下面的内容？

```
public sealed class Singleton
{
    private Singleton()
    {
    }

    public static Singleton Instance { get { return Nested.instance; } }

    private class Nested
    {
        // Explicit static constructor to tell C# compiler
        // not to mark type as beforefieldinit
        static Nested()
        {
        }

        internal static readonly Singleton instance = new Singleton();
    }
} 
```

我刚刚从[**Jon Skeet 的网站上**](http://csharpindepth.com/Articles/General/Singleton.aspx)选择了这个模式——只是选择了*完全懒惰*的版本，因为它听起来是最好的选择——但可能不是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:51:24.737

很少有使用单例模式的情况。您必须确保强制需要一个且只有一个类实例的实例。通常你没有这个设计要求，但人们倾向于弥补它。

完成工作单元后，应立即释放连接。您不应该永远保持连接打开，因此将您的连接转换为单例将无助于改进您的应用程序设计。

连接池机制为您管理复杂性，因此您不必担心与打开和关闭连接相关的性能，因为这是通过设计优化的。

> 连接到数据库服务器通常包括几个耗时的步骤。必须建立诸如套接字或命名管道之类的物理通道，必须发生与服务器的初始握手，必须解析连接字符串信息，必须由服务器验证连接，必须运行检查以登记当前交易等等。
> 
> 实际上，大多数应用程序仅使用一种或几种不同的连接配置。这意味着在应用程序执行期间，许多相同的连接将被重复打开和关闭。为了最大限度地降低打开连接的成本，ADO.NET 使用了一种称为连接池的优化技术。
> 
> 连接池减少了必须打开新连接的次数。pooler 维护物理连接的所有权。它通过为每个给定的连接配置保持一组活动连接来管理连接。每当用户在连接上调用 Open 时，池化程序都会在池中查找可用的连接。如果池连接可用，则将其返回给调用者，而不是打开新连接。当应用程序对连接调用 Close 时，池化程序会将其返回到池中的活动连接集，而不是关闭它。一旦连接返回到池中，它就可以在下一次 Open 调用中被重用。

来源[MSDN](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T14:52:11.047

问题不是`singleton`，在应用程序中保持一个打开的连接会降低性能，并且不会利用连接并发和连接池。

从技术上讲，您不需要关心`Connections`打开的数量，只要它们与`using`:

```
using (var connection = new SqlConnection("yourConnectionString"))
{} 
```

ADO.NET 连接池将自动为您处理连接。

# ios - [CFString retain]：消息发送到deallocated

> ID：12567464
> 
> 赞同：1
> 
> 时间：2012-09-24T14:48:02.817
> 
> 标签：ios, xcode, memory-management

我用我的 Xcode 启用了僵尸，以查看我的进程是否因内存泄漏而崩溃。这是一个代码片段：

```
- (NSString *)facVersion
{
    return facVersion;
}

- (void) setFacVersion:(NSString*)_facVersion
{
    if(facVersion != nil) [facVersion release];
    facVersion = [_facVersion retain];
} 
```

现在当我打电话

```
NSLog(@"%@", facVersion);
[self setFacVersion:facVersion]; 
```

代码与消息一起崩溃

> [CFString retain]：消息发送到deallocated

你知道问题是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T14:54:12.170

这是写得不好的二传手的典型问题。当对象本身是属性的后备 ivar 的最后一个所有者时，将属性分配给它自己会导致释放有效地释放对象，然后在同一个释放的对象上保留。您可以通过两种方式解决此问题。要么检查要分配的对象是否与属性的当前值不同，要么先保留，然后才释放。总而言之，解决方案一：

```
- (void) setFacVersion:(NSString*)_facVersion
{
    if (facVersion == _facVersion) return;
    [facVersion release];
    facVersion = [_facVersion retain];
} 
```

解决方案二：

```
- (void) setFacVersion:(NSString*)_facVersion
{
    [_facVersion retain];
    [facVersion release];
    facVersion = _facVersion;
} 
```

顺便说一句，`nil`在释放对象之前检查对象不存在是多余的。Objective-C 不是 Java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:53:27.337

它应该`if (facVersion != _facVersion)`在二传手。否则，如果您再次设置相同的对象，您的 setter 将释放它（导致对象被释放），之后您将无法使用它（保留）：

```
- (void) setFacVersion:(NSString*)_facVersion
{
    if(facVersion != _facVersion) {
        [facVersion release];
        facVersion = [_facVersion retain];
    }
} 
```

另外，您知道[自动引用计数 (ARC)](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)吗？

> 自动引用计数 (ARC) 是一种编译器功能，可提供 Objective-C 对象的自动内存管理。不必考虑保留和释放操作，ARC 允许您专注于有趣的代码、对象图以及应用程序中对象之间的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:53:04.067

您在调用保留之前释放它。

除非您在释放和保留之前比较指针，否则您应该使用以下内容：

```
- (void) setFacVersion:(NSString*)_facVersion
    [_facVersion retain];
    [facVersion release];
    facVersion = _facVersion;
} 
```

这样，如果指针相同，正如您所演示的，您将不会崩溃。

或者只是让编译器为您合成设置器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:52:47.710

如果您将相同的对象传递给`setFacVersion`已设置的对象，它将首先释放它，然后尝试保留已释放（和释放）的对象。

# c++ - 与 Win32 连接混淆 - 为什么此代码有效？

> ID：12567467
> 
> 赞同：1
> 
> 时间：2012-09-24T14:48:11.150
> 
> 标签：c++, winapi

我遵循了有关一些 win32、创建和交互的教程，但我不确定代码如何将“在此处写入”编辑框连接到消息框。

```
#define IDC_MAIN_BUTTON 101         // Button identifier
#define IDC_MAIN_EDIT   102         // Edit box identifier
HWND hEdit;

LRESULT CALLBACK WinProc(HWND hWnd,UINT message,WPARAM wParam,LPARAM lParam);

int WINAPI WinMain(HINSTANCE hInst,HINSTANCE hPrevInst,LPSTR lpCmdLine,int nShowCmd)
{
    WNDCLASSEX wClass;
    ZeroMemory(&wClass,sizeof(WNDCLASSEX));
    wClass.cbClsExtra=NULL;
    wClass.cbSize=sizeof(WNDCLASSEX);
    wClass.cbWndExtra=NULL;
    wClass.hbrBackground=(HBRUSH)COLOR_WINDOW;
    wClass.hCursor=LoadCursor(NULL,IDC_ARROW);
    wClass.hIcon=NULL;
    wClass.hIconSm=NULL;
    wClass.hInstance=hInst;
    wClass.lpfnWndProc=(WNDPROC)WinProc;
    wClass.lpszClassName="Window Class";
    wClass.lpszMenuName=NULL;
    wClass.style=CS_HREDRAW|CS_VREDRAW;

    if(!RegisterClassEx(&wClass))
    {
        int nResult=GetLastError();
        MessageBox(NULL,
            "Window class creation failed\r\n",
            "Window Class Failed",
            MB_ICONERROR);
    }

    HWND hWnd=CreateWindowEx(NULL,
            "Window Class",
            "Windows application",
            WS_OVERLAPPEDWINDOW,
            200,
            200,
            640,
            480,
            NULL,
            NULL,
            hInst,
            NULL);

    if(!hWnd)
    {
        int nResult=GetLastError();

        MessageBox(NULL,
            "Window creation failed\r\n",
            "Window Creation Failed",
            MB_ICONERROR);
    }

    ShowWindow(hWnd,nShowCmd);

    MSG msg;
    ZeroMemory(&msg,sizeof(MSG));

    while(GetMessage(&msg,NULL,0,0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return 0;
}

LRESULT CALLBACK WinProc(HWND hWnd,UINT msg,WPARAM wParam,LPARAM lParam)
{
    switch(msg)
    {
        case WM_CREATE:
        {

// How does this edit box, connect to the button?

            // Create an edit box
            hEdit=CreateWindowEx(WS_EX_CLIENTEDGE,
                "EDIT",
                "",
                WS_CHILD|WS_VISIBLE|
                ES_MULTILINE|ES_AUTOVSCROLL|ES_AUTOHSCROLL,
                50,
                100,
                200,
                100,8
                hWnd,
                (HMENU)IDC_MAIN_EDIT, GetModuleHandle(NULL), NULL);
            HGDIOBJ hfDefault=GetStockObject(DEFAULT_GUI_FONT);
            SendMessage(hEdit, WM_SETFONT, (WPARAM)hfDefault, MAKELPARAM(FALSE,0));
            SendMessage(hEdit, WM_SETTEXT, NULL, (LPARAM)"Insert text here...");

            // Create a push button
            HWND hWndButton=CreateWindowEx(NULL,
                "BUTTON",
                "OK",
                WS_TABSTOP|WS_VISIBLE|
                WS_CHILD|BS_DEFPUSHBUTTON,
                50,
                220,
                100,
                24,
                hWnd,
                (HMENU)IDC_MAIN_BUTTON, GetModuleHandle(NULL), NULL);
            SendMessage(hWndButton, WM_SETFONT, (WPARAM)hfDefault, MAKELPARAM(FALSE,0));
        }
        break;

        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                case IDC_MAIN_BUTTON:
                {
                    char buffer[256];
                    SendMessage(hEdit, WM_GETTEXT, sizeof(buffer)/sizeof(buffer[0]), reinterpret_cast<LPARAM>(buffer));
                    MessageBox(NULL, buffer, "Information", MB_ICONINFORMATION);
                }
                break;
            }
            break;

        case WM_DESTROY:
        {
            PostQuitMessage(0);
            return 0;
        }
        break;
    }

    return DefWindowProc(hWnd,msg,wParam,lParam);
} 
```

我真的不确定文本框如何将其信息发送到消息框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:51:55.300

关键是这三行：

```
char buffer[256];
SendMessage(hEdit, WM_GETTEXT, sizeof(buffer)/sizeof(buffer[0]), reinterpret_cast<LPARAM>(buffer));
MessageBox(NULL, buffer, "Information", MB_ICONINFORMATION); 
```

该`WM_GETTEXT`消息执行以下操作：

> 将对应于窗口的文本复制到调用者提供的缓冲区中。

因此，第一次调用会将窗口中的`SendMessage`内容复制到您之前创建的行。`hEdit``buffer`

然后下一行将的内容`buffer`写入`MessageBox`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:04:35.137

当你这样做时`CreateWindowEx`，它会创建一个消息队列。然后任何人都可以使用它的句柄向这个窗口发送消息。

当`CreateWindowEx()`你给 id 时`IDC_MAIN_EDIT`。因此，当您按下按钮时，这将作为命令发送到您的**window-message-Queue**。这是在您的`proc()`情况下处理的`IDC_MAIN_EDIT`：。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:51:32.763

文本框不会“发送其信息”。单击按钮时，案例`WM_COMMAND`运行并从文本框中获取内容。这就是`SendMessage(..., WM_GETTEXT, ...)`电话。

# controller - 在 CastleProject Monorail 中捕获 ControllerNotFoundException

> ID：12567470
> 
> 赞同：0
> 
> 时间：2012-09-24T14:48:30.087
> 
> 标签：controller, castle-windsor, configuration-files, castle, castle-monorail

我正在使用标准的 Monorail/Windsor/ActiveRecord 堆栈来构建 Web 应用程序。在 Web 应用程序中，控制器是使用 xml 配置文件注册的（对于 Windsor）。

当控制器尚未在配置文件中定义时，MonoRailHttpHandlerFactory 将（显然）抛出 ControllerNotFoundException。

有没有办法捕捉这个异常并向用户显示自定义消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:23:16.113

您总是可以在您的 GLobalApplication 中的 Application_OnError() 事件处理程序中找出错误所在。我们做这样的事情：

```
public virtual void Application_OnError()
    {
        var error = Server.GetLastError();

        if ( error.GetType() != typeof( ControllerNotFoundException ) )
            return;

        // We don't want these errors in the event log
        Server.ClearError();

        //Handle page not found

        Server.TransferRequest( "/rescue/pagenotfound" );
    } 
```

# android - 在 Scroll View 中滚动 Webview

> ID：12567472
> 
> 赞同：7
> 
> 时间：2012-09-24T14:48:32.727
> 
> 标签：android, webview, scrollview

**我所拥有的：**
现在我有一个滚动视图作为父级。在这个滚动视图中，我使用了一个 WebView，它加载一个 URL，然后在其中显示文本。这是我的xml：

```
<ScrollView
    android:id="@+id/parentScroll"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/Heading" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="5dp" >

        <WebView
            android:id="@+id/webView"
            android:layout_width="match_parent"
            android:layout_height="300dp"
            android:background="@drawable/webview" />
    </RelativeLayout>
</ScrollView> 
```

**我想要什么：**
我想在里面滚动 webView。当我触摸 webView 时，不幸的是父滚动视图被调用。我还必须保留父滚动视图，但除此之外，当我触摸 webView 时，我想滚动其中的 WebView 内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-09T10:49:28.037

创建自定义**触摸拦截 Webview**

**CustomWebview.java**

```
 package com.mypackage.common.custom.android.widgets

public class CustomWebview extends WebView {

    public CustomWebview(Context context) {
        super(context);
    }

    public CustomWebview(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomWebview(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event){
        requestDisallowInterceptTouchEvent(true);
        return super.onTouchEvent(event);
    }          
} 
```

在**布局.xml**

```
<com.package.custom.widgets.CustomWebview
                android:id="@+id/view_extra"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                 /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T14:51:49.403

根据 Android 设计文档，如果滚动容器的滚动方向相同，则永远不要将滚动容器放入滚动容器中。它不是用来处理这种事情的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-15T16:17:59.257

我有同样的问题。您应该将 webView 高度设置为与其内容相等。为此，请将此
行添加到 Activity 中的 onCreate 方法中：

```
webView.setWebViewClient(new WebViewClient() {
            @Override
            public void onPageFinished(WebView view, String url) {
                webView.loadUrl("javascript:MyApp.resize(document.body.getBoundingClientRect().height)");

                super.onPageFinished(view, url);
            }
        });
webView.addJavascriptInterface(this, "MyApp"); 
```

并将此方法添加到您的活动中：

```
@JavascriptInterface
    public void resize(final float height) {
        MainActivity.this.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                webView.setLayoutParams(new LinearLayout.LayoutParams(getResources().getDisplayMetrics().widthPixels, (int) (height * getResources().getDisplayMetrics().density)));
            }
        });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:57:45.833

通常不鼓励嵌套可滚动小部件。这是一种令人困惑的用户体验，因为滚动错误的内容很容易。假设我打算滚动外部滚动区域，但我先触摸了内部区域并且非常努力地一甩。然后内部的会滚动，我会喜欢，是吧？为什么不滚动？

即使一个水平滚动而另一个垂直滚动，手势识别器也可能将一个与另一个混淆，因此您会获得相同的效果。这是一个有效的用例，但它仍然存在问题，我会避免它。（即：人类不能完全正确地垂直和水平滑动，通常是有角度的。）

我会推动改变设计以打破可滚动区域。理想情况下，每页 1 个可滚动项目。甚至自己提出一个，并提供给设计师两种体验，看看他们选择哪一种。

表达这将是多么糟糕。看看这个例子。这不是一个解决方案，只是为了展示经验。

```
<ScrollView
    android:id="@+id/parentScroll"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/Heading" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" android:orientation="vertical"
    android:padding="5dp" >
    <TextView
        android:id="@+id/topText"
        android:layout_width="match_parent"
        android:layout_height="1000dp"
        android:text="@string/lotsoftext" />
    <WebView
        android:id="@+id/webView"
        android:layout_width="match_parent"
        android:layout_height="300dp"
        android:background="@drawable/webview" />
    <TextView
        android:id="@+id/topText"
        android:layout_width="match_parent"
        android:layout_height="1000dp"
        android:text="@string/lotsoftext" />
</RelativeLayout> 
```

# wpf - WPF 控件不释放内存

> ID：12567475
> 
> 赞同：0
> 
> 时间：2012-09-24T14:49:02.053
> 
> 标签：wpf, memory, garbage-collection

我在一个小型 WPF 应用程序中有一个奇怪的行为。我在一个窗口上有一个按钮，它作为一个对话框打开另一个窗口，其中有一些动态添加的控件。在这样做的同时，我会密切关注它的内存使用情况，它会增加（sysinternal procexp）。但是当我关闭那个窗口时，内存使用量不会回来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:10:58.900

我建议使用这个工具[http://memprofiler.com/](http://memprofiler.com/) 我在 WPF 和 win 表单方面有一些类似的经验。它可能不会像以前建议的那样被处理，但 memprofiler 会告诉你它到底是什么，并使找到解决方案变得非常容易。

# ruby - 将动态创建的 Proc 转换为源代码或 Sexp

> ID：12567478
> 
> 赞同：1
> 
> 时间：2012-09-24T14:49:24.497
> 
> 标签：ruby

我需要在 Ruby 1.9 中将对象**转换为** **源代码**或**s 表达式。**棘手的部分是对象是动态**创建的，**并且不存在于任何文件中，所以我不能使用[Sourcify](https://github.com/ngty/sourcify/)。我该如何处理？`Proc`****`Proc`****

 ******如果您需要澄清，请随时提出任何问题。******

# mongoid - mongoid 多态关联错误

> ID：12567481
> 
> 赞同：3
> 
> 时间：2012-09-24T14:49:31.813
> 
> 标签：mongoid, ruby-on-rails-3.2

我在使用带有多态字段的 mongoid-3.0.6 时遇到了一些问题。使用 rails 3.2.8 和 ruby​​ 1.9.3

使用正常的多态关系：

```
class Shirt
  include Mongoid::Document

  field          :name,        localize: true

  belongs_to     :itemizable,  polymorphic: true
end

class Item
  include Mongoid::Document

  field       :price,     type: Float
  field       :quantity,  type: Integer,   :default => 1

  has_one     :product,   as: :itemizable

  accepts_nested_attributes_for :product
end 
```

通过元数据可以获得相同的关联：

```
>> Item.reflect_on_association(:product)
#<Mongoid::Relations::Metadata
   autobuild:    false,
   class_name:   Product,
   cyclic:       nil,
   dependent:    nil,
   inverse_of:   nil,
   key:          _id,
   macro:        has_one,
   name:         product,
   order:        nil,
   polymorphic:  true,
   relation:     Mongoid::Relations::Referenced::One,
   setter:       product=,
   versioned:    false>

>> item = Item.new
#<Item _id: 50606c1668ce87692e000003, _type: nil, created_at: nil, updated_at: nil, deleted_at: nil, price: nil, quantity: 1> 
```

但是当我跑步时

```
>> item.product = Shirt.new or >> item.build_product 
```

我总是遇到同样的错误

```
NameError: uninitialized constant Product 
```

[全栈错误](https://gist.github.com/3776248)

有什么想法吗？

提前致谢。

解决了

*   找到了动机

需要将 class_name 添加到关系中

```
has_one     :product,   as: :itemizable, class_name: "Toy" 
```

# php - 如何在 FPDF 中设置下边距

> ID：12567484
> 
> 赞同：31
> 
> 时间：2012-09-24T14:49:55.203
> 
> 标签：php, pdf, margin, fpdf

我最近深入研究了 FPDF，但我似乎不明白的是 - 为什么没有办法设置底部边距？有从顶部、左侧和右侧设置边距的功能，但不能从底部设置边距。

我现在假设我误解了关于 FPDF 如何工作的一些基本和概念性的东西，但我不知道那可能是什么。

所以要减少它：

是否可以在 FPDF 中定义固定的下边距？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-24T15:57:41.063

我刚刚找到了解决方案 - 底部边距只是被排除在预定义之外，因为它是分页计算过程的一部分。因此，设置底部边距本身是不可能的，但可以使用

```
SetAutoPageBreak(boolean auto, [float margin]) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-05-12T13:29:12.387

对 SquareCat 的回答 +1。为了进一步扩展这一点，如果您在文本超出自动分页符时遇到问题，只需设置 SetAutoPageBreak(false) 可能就足以解决问题。就我个人而言，这在创建邮寄标签时造成了麻烦。

```
$fpdf->SetAutoPageBreak(false); 
```

只需确保您在适合您的 PDF 的地方手动分页。

```
$fpdf->AddPage(); 
```

# unit-testing - Grails 设置系统属性进行测试

> ID：12567485
> 
> 赞同：0
> 
> 时间：2012-09-24T14:49:56.220
> 
> 标签：unit-testing, grails, groovy

是否可以直接为 Grails 单元测试类的特定方法设置 System.property？

如果在 Config.groovy 中设置了系统属性，我有一个 Filters 类会阻止一些操作：

```
class MyFilters {
def filters = 
{
    if ('true'.equals(System.properties.getProperty('myProperty', 'false'))){
        writeFilter(controller: "myController", action: "update")
        {
            before =
            {
                response.sendError(HttpServletResponse.SC_FORBIDDEN);
                return false; 
```

在 MyControllerTests 中，我正在尝试对过滤器进行测试：

```
void testMyFilter(){
    System.properties.setProperty('myProperty', 'true')
    withFilters(action:"update") {
        controller.update()
    }
    assert response.status ==  HttpServletResponse.SC_FORBIDDEN
} 
```

但是过滤器类在这个阶段已经被模拟了（使用来自 Config 的默认 'false' 属性值），所以测试中属性的更改没有效果。

有没有办法解决这个问题，或者在 prop 更改后强制 Grails 重新加载 Filters 类？我无法更改 Config 中的默认属性，因为其他控制器测试将中断，它仅适用于将设置此道具的特定环境，因此我希望检查过滤器的测试所涵盖的场景将启动。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:50:06.170

不可避免地，我在发布这篇文章大约一分钟后发现了如何做到这一点。在 setProperty 之后添加 mockFilters(MyFilters) 会使 Grails 使用更新的属性重建模拟过滤器。

# c# - 源代码控制\使用 XSD 生成类的缺点

> ID：12567488
> 
> 赞同：0
> 
> 时间：2012-09-24T14:50:05.190
> 
> 标签：c#, xml, xsd

假设这一点——我想以预定义的方案读写 XML——直到现在还可以。

问题是开发人员需要执行明确的操作，以防他想要添加另一个属性（例如 xsd.exe），这在源代码控制方面非常令人沮丧（需要签出、生成新文件并签入） ）。

有没有办法仅通过提供其 XSD 来读取 xml（无需为此实际自动生成一个类？） - 在这种情况下，如果新字段将引入 - 开发人员将只更改 XSD 或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:04:52.507

Please check the below link,

This can be the solution for this problem.

But please keep in mind that using xsd.exe is robust way to generate the classes for schema.

You can generate the class code form xsd on the fly and you can compile the code and use in your application

[How to programmaticly generate .NET classes from XSD? (Like xsd.exe do)](https://stackoverflow.com/questions/1068260/how-to-programmaticly-generate-net-classes-from-xsd-like-xsd-exe-do)

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlcodeexporter](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlcodeexporter)

[http://msdn.microsoft.com/en-us/library/650ax5cx.aspx](http://msdn.microsoft.com/en-us/library/650ax5cx.aspx)

# android - 更新 SQLite 错误

> ID：12567489
> 
> 赞同：0
> 
> 时间：2012-09-24T14:50:06.227
> 
> 标签：android

要更新我的 SQLite 数据库（android）中的值，我使用以下方法。该表称为对象，我要更新的字段是 showinfo1，具有特定 id 和级别的特定项目。

```
public void insertString(int id, int level, String field, String value){

        myDataBase.execSQL("UPDATE OBJECTS SET " + field + "=" + value + " WHERE _ID=" + id + " AND LEVEL =" + level);

    } 
```

我有一个我认为很奇怪的错误。它说有'nosuchcolumn'，而实际上有一个..：

```
android.database.sqlite.SQLiteException: no such column: true: UPDATE OBJECTS set showinfo1=true WHERE _ID=6 AND LEVEL =1 
```

任何想法如何解决这个问题？也许我的查询是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:59:00.217

你的查询应该是这样的

```
public void insertString(int id, int level, String field, String value){

    myDataBase.execSQL("UPDATE OBJECTS SET " + field + "='" + value + "' WHERE _ID=" + id + " AND LEVEL =" + level);

} 
```

您的字符串正在转换为`UPDATE OBJECTS SET URFIELD = true ...`，它正在搜索名为 的列`true`，所以它应该是`URFIELD = 'true'`（同样适用`ID`，`LEVEL`如果它们是`text`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:54:37.567

SQLite 没有单独的布尔存储类型。相反，布尔值应存储为整数 0（假）或 1（真）。

# android - Android如何检查gps是否连接到卫星？

> ID：12567492
> 
> 赞同：1
> 
> 时间：2012-09-24T14:50:25.617
> 
> 标签：android, gps

我得到了这个 gps 方法：

```
// GPS
    private void addGPSListener() {

        globalconstant.db.setVersion(1);
        globalconstant.db.setLocale(Locale.getDefault());
        globalconstant.db.setLockingEnabled(true);

        final String gps =

        "CREATE TABLE IF NOT EXISTS GPS_Values ("

                + "id INTEGER PRIMARY KEY AUTOINCREMENT, Latitude float(10, 8), Longitude float(10, 8),Accuracy INTEGER,Speed INTEGER,City TEXT,timestamp TIMESTAMP);";
        globalconstant.db.execSQL(gps);

        Log.d("FESTIVALE :: ", "Frissítési idő: "
                + globalconstant.gps_update_value);
        float f = Float.valueOf(globalconstant.gps_update_value.trim())
                .floatValue();
        float update = f * 1000;

        globalconstant.mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        globalconstant.mlocListener = new MyLocationListener();
        globalconstant.mlocManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, (long) update, 5f,
                globalconstant.mlocListener);

        // if(Global.getInstance().currentGPSLocation != null){
        //
        // }

    }

    public class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location loc) {

            float szel = (float) loc.getLatitude();
            float hossz = (float) loc.getLongitude();
            int horiAcc = (int) (loc.getAccuracy());
            // int speed=(int) ((loc.getSpeed()*3600)/1000); //sebesség km/h-ban
            int speed = 0;

            if (loc.hasSpeed()) {
                speed = (int) ((loc.getSpeed() * 3600) / 1000); // sebesség
                                                                // km/h-ban
            } else {
                speed = 0;
            }

            String test = String.format("%.08f", szel);
            String test2 = String.format("%.08f", hossz);

            Geocoder geocoder = new Geocoder(main.this, Locale.getDefault());
            try {
                List<Address> addresses = geocoder.getFromLocation(szel, hossz,
                        1);
                city = addresses.get(0).getLocality();
            } catch (IOException e) {
                e.printStackTrace();
            }

            ContentValues gps_values = new ContentValues();

            gps_values.put("Latitude", test);
            gps_values.put("Longitude", test2);
            gps_values.put("Accuracy", horiAcc);
            gps_values.put("Speed", speed);
            gps_values.put("City", city);

            SimpleDateFormat dateFormat = new SimpleDateFormat(
                    "yyyy-MM-dd HH:mm:ss");
            Date date = new Date(System.currentTimeMillis());

            gps_values.put("timestamp", dateFormat.format(date));

            try {
                globalconstant.db.beginTransaction();
                globalconstant.db.insert("GPS_Values", null, gps_values);
                globalconstant.db.setTransactionSuccessful();
            } finally {
                globalconstant.db.endTransaction();
            }

            Log.d("FESTIVALE :: ",
                    "Hely " + test + ", " + test2 + " , " + horiAcc + " , "
                            + speed + " , " + city + ","
                            + dateFormat.format(date));
            // String Text = "My current location is: " + "Latitude = "
            // + loc.getLatitude() + "\nLongitude = " + loc.getLongitude();

            // Toast.makeText(getApplicationContext(), "Hely" +test + "\n" +
            // test2 + "\n" + horiAcc + "\n" +speed + "\n" +city,
            // Toast.LENGTH_SHORT)
            // .show();

        }

        public void onProviderDisabled(String provider) {
            Toast.makeText(getApplicationContext(), "Gps Disabled",
                    Toast.LENGTH_SHORT).show();
            DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    switch (which) {
                    case DialogInterface.BUTTON_POSITIVE:
                        // show gps otions
                        Intent gpsOptionsIntent = new Intent(
                                android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                        startActivity(gpsOptionsIntent);
                        break;

                    case DialogInterface.BUTTON_NEGATIVE:
                        dialog.cancel();
                        break;
                    }
                }
            };

            AlertDialog.Builder builder = new AlertDialog.Builder(main.this);
            builder.setMessage("A GPS nincs aktiválva!\nAktiválja most?")
                    .setPositiveButton("Aktivál", dialogClickListener)
                    .setNegativeButton("Nem", dialogClickListener).show();
        }

        public void onProviderEnabled(String provider) {
            Toast.makeText(getApplicationContext(), "Gps Enabled",
                    Toast.LENGTH_SHORT).show();

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            /* This is called when the GPS status alters */
            switch (status) {
            case LocationProvider.OUT_OF_SERVICE:
                Log.v(tag, "Status Changed: Out of Service");
                Toast.makeText(main.this, "Status Changed: Out of Service",
                        Toast.LENGTH_SHORT).show();
                break;
            case LocationProvider.TEMPORARILY_UNAVAILABLE:
                Log.v(tag, "Status Changed: Temporarily Unavailable");
                Toast.makeText(main.this,
                        "Status Changed: Temporarily Unavailable",
                        Toast.LENGTH_SHORT).show();
                break;
            case LocationProvider.AVAILABLE:
                Log.v(tag, "Status Changed: Available");
                Toast.makeText(main.this, "Status Changed: Available",
                        Toast.LENGTH_SHORT).show();
                break;
            }

        }
        public void onGpsStatusChanged(int event) {
            if (event == GpsStatus.GPS_EVENT_FIRST_FIX) {
                // showMessageDialog("GPS fixed");
                Toast.makeText(getApplicationContext(), "GPS fixed",
                        Toast.LENGTH_SHORT).show();
            }
        }
    }// gps vége 
```

我想做一个简单的加载程序对话框，直到它连接到卫星。我该如何管理？在调用此方法之前，我如何检查它是否先连接到卫星？感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:57:42.467

您需要为此实施`GpsStatus.Listener`。

例如，

```
public class MyActivity extends Activity implements GpsStatus.Listener
{
         ...
         ...
         ...
         // add listener into locationManager
        locationManager.addGpsStatusListener(this);

       @Override
       public void onGpsStatusChanged(int) 
       {

          switch (event) 
         {
            case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
            break;
            case GpsStatus.GPS_EVENT_FIRST_FIX:   // this means you  found GPS Co-ordinates                          
            break;
            case GpsStatus.GPS_EVENT_STARTED:
            break;
            case GpsStatus.GPS_EVENT_STOPPED:
            break;
          }
       }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:56:28.570

您可以弹出对话框，请求位置更新，然后在实际获得位置更新时关闭对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:57:14.707

有你的`Activity`工具`GpsStatus.Listener`

然后使用：

```
public void onChanged(int event) {
        switch (event) {
            case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
                break;
            case GpsStatus.GPS_EVENT_FIRST_FIX:                              
                break;
            case GpsStatus.GPS_EVENT_STARTED:
                break;
            case GpsStatus.GPS_EVENT_STOPPED:
                break;
        }
    } 
```

GpsStatus.GPS_EVENT_FIRST_FIX 是 GPS 系统自启动以来收到第一次定位时发送的事件。

# validation - 通过电子邮件提交的 Adob e PDF 表单中的验证？

> ID：12567494
> 
> 赞同：0
> 
> 时间：2012-09-24T14:50:32.557
> 
> 标签：validation, adobe, acrobat

我有一个在 Adob​​e Acrobat Professional 中创建的表单，它接受大约十几个字段。我希望能够使用正则表达式验证电话号码和电子邮件，但我不确定如何做到这一点。我知道在字段属性的 Validaiton 选项卡中输入自定义脚本的位置，但是当我单击提交按钮时，没有任何反应，Adobe 会启动以下窗口。

![在此处输入图像描述](../Images/6e3b31c3b57ca6cd5923cac54c12abf1.png)

我的提交操作是这样设置的。

![在此处输入图像描述](../Images/d64871cf3048a2ed7b80716025fd77b0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:25:10.260

它可能不需要使用验证来完成。我不确定此功能是否适用于旧版本的 Acrobat，但在 Acrobat X Pro 中，如果您选择**表单域>右键单击>属性>格式>特殊** ，您可以选择“电话号码”的预定义格式电话号码字段，然后可能在电子邮件的任意掩码字段中输入任意掩码。

我相信电话号码一可能仅限于美国电话号码，但值得一试，并且可能比编写代码来验证它要简单得多。

# php - 在 HTML 表单中插入 PHP 以填充选择

> ID：12567498
> 
> 赞同：0
> 
> 时间：2012-09-24T14:50:58.067
> 
> 标签：php, mysql

我有一个带有选择下拉列表的 HTML 表单。我想从我的 MySQL 数据库中填充下拉列表。HTML 表单已经有一些 java 脚本来处理日期选择器，以及表单中某个字段的当前日期。

我可以手动对表单进行编码以供选择，但希望它来自 MySQL。我正在使用的 php 我放入了它自己的文件 name.php 以确保它正常工作。我在 php 中添加了一些 echo 语句来构建表单和选择，然后填充选择并关闭它。这作为一个独立的 php 工作得很好。

当我在选择定义下的表单中附加 php 时，它根本不会填充选择，它是空白/空的。如果我以选择选项的格式添加一些回显语句以输出信息，则第一个回显永远不会显示，并且随后的回显会显示，但任何变量都会显示为变量名称。

```
<form id="form1" name="form1" method="post" action="/db_log.php">
Field:<select name="id">

<?php

    require_once dirname(__FILE__) . '/db_connect.php';
$db = new DB_CONNECT();

$query="SELECT id, name FROM file order by name";
$result=mysql_query($query);

while ($row = mysql_fetch_array($result)) {
  $id = $row['id'];
  $name =$row['name'];
  echo "<option value=\"$id\"> $name </option>";
  }
?>

</select><br />
</form> 
```

以上是一个空的选择下拉菜单。但这作为 PHP 文件非常有用。

```
<?php
echo "<form id=\"form1\" name=\"form1\" method=\"post\" action=\"/db_log.php\">";
    echo "Select:<select name=\"id\">";
    require_once dirname(__FILE__) . '/db_connect.php';
$db = new DB_CONNECT();

$result=mysql_query("SELECT id, name FROM file order by name");

while ($row = mysql_fetch_array($result)) {
  $id = $row['id'];
  $name =$row['name'];
  echo "<option value=\"$id\"> $name </option>";
  }

    echo "</select><br />";
    echo "</form>";
?> 
```

如果我在 HTML 表单中添加一个回声，例如在任何其他回声之前添加一个测试回声，它将被忽略。

```
<form id="form1" name="form1" method="post" action="/db_log.php">
Field:<select name="id">

<?php
  echo "<option value=\"1\"> Test-name </option>";

    require_once dirname(__FILE__) . '/db_connect.php';
$db = new DB_CONNECT();

$query="SELECT id, name FROM file order by name";
$result=mysql_query($query);

while ($row = mysql_fetch_array($result)) {
  $id = $row['id'];
  $name =$row['name'];
  echo "<option value=\"$id\"> $name </option>";
  }
?>

</select><br />
</form> 
```

唯一显示的是选择 $name 的选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:13:18.057

A 有一个从我的 mysql 数据库提供的组合框。

我是这样的：

```
 <tr>
                    <td>Emergency service</td>
                    <td><?php 
                            $nombreEmergencia;
                            $idEmergencia;
                            $sql4 = "SELECT  `idEmergencias`, `nombre` FROM  `emergencias` WHERE 1";
                            $iterador = $conn->consulta($sql4);

                            echo '<select name="idEmergencia" id="idEmergencia" style="width:228px">
                            <option value="-1" selected>(please select:)</option>';
                            while($iterador->hayElemento()){
                                    $nombreEmergencia = $iterador->getElemento("nombre");
                                    $idEmergencia = $iterador->getElemento("idEmergencias");
                                    echo '<option value="'.$idEmergencia.'">'.utf8_encode($nombreEmergencia).'</option>';
                            }
                            echo '</select>'; ?></td>
                  </tr> 
```

正如您所看到的，您必须使用带有函数的“迭代器”变量来检查数据库中的更多元素并带来它们。

该辅助功能如下所示：

```
<?php
class Iterador{
    private $ultimoDato;
    private $id;

    public function __construct($id){
        $this->id = $id;
    }

    public function hayElemento(){
        $dato = mysql_fetch_array($this->id);
        $this->ultimoDato = $dato;
        return !empty($dato);
    }

    public function getElemento($columnas){
        return $this->ultimoDato[$columnas];
    }

    public function inicializar(){
        $dato = mysql_fetch_array($this->id);
        $this->ultimoDato = $dato;
    }

    public function hay(){
        return !empty($this->ultimoDato);
    }

    public function siguiente(){
        $dato=mysql_fetch_array($this->id);
        $this->ultimoDato=$dato;
    }

}
?> 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:25:57.827

基于这个问题和之前的问题以及你得到的评论，我猜你正在尝试从`.html`文件中运行 php。您需要将代码（包括 html）保存在`.php`文件中才能正常工作。

# ruby-on-rails - 无法使指南针在 Heroku 上工作

> ID：12567500
> 
> 赞同：0
> 
> 时间：2012-09-24T14:51:03.793
> 
> 标签：ruby-on-rails, heroku, sass, compass-sass

我在我的 Rails 应用程序中使用 compass-rails gem。我正在使用 rails 3.2 并尝试在 Heroku cedar 堆栈上进行部署。

资产预编译似乎没有任何问题通过。

尝试访问该站点时，我不断收到以下错误（在日志中）：

```
ActionView::Template::Error (File to import not found or unreadable: compass. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:01:17.177

我发现了问题。显然，Heroku 必须具有以下配置集：

```
config.assets.initialize_on_precompile = false 
```

我添加了它，现在一切正常。

# ruby - Mysql2 在无效日期抛出错误

> ID：12567501
> 
> 赞同：1
> 
> 时间：2012-09-24T14:51:13.380
> 
> 标签：ruby, mysql2

Mysql2 在尝试获取无效日期（例如 2012-00-25）时遇到问题。
例如：

需要'mysql2'

db = Mysql2::Client.new(....)

结果 = db.query（查询）

results.each 做 |row|

..

..

结尾

如果第一条记录的日期无效，mysql2 将抛出错误并在该点停止。

我怎样才能正确处理它（捕捉错误并恢复错误的数据）？

我无法控制源数据。

提前致谢，

**我的解决方案**：

我解决了添加 :cast => false 并解析日期列的问题

db.query(查询,:cast => false)

results.each 做 |row|

..

开始

```
Date.parse(time) 
```

救援

```
# if date is wrong then set the date field

time = "1900-01-01 00:00:00" 
```

结尾

..

结尾

# delphi - 可排序的 DBGrid

> ID：12567505
> 
> 赞同：3
> 
> 时间：2012-09-24T14:51:26.977
> 
> 标签：delphi

我想实现一个可排序的 DBgrid（单击列标题时对其行进行排序）。我设法使它按升序排序，但我不能按降序排序。这是我的设计设置：

```
Query1.DatabaseName:='Test';
DataSetProvider1.DataSet:=Query1;
ClientDataSet1.ProviderName:=DataSetProvider1;
DataSource1.DataSet:=ClientDataSet1;
DBGrid1.DatSource:=DataSource1; 
```

这是我的代码片段：

```
procedure TForm2.FormShow(Sender: TObject);
begin
  Query1.Open;
  ClientDataSet1.Data:=DataSetProvider1.Data;
  ClientDataSet1.AddIndex('objnameDESC','objname',[ixDescending]);
  ClientDataSet1.AddIndex('SUM(cd.worktime)DESC','SUM(cd.worktime)',[ixDescending]);
end;

procedure TForm2.DBGrid1TitleClick(Column: TColumn);
begin
  case Column.Index of
  0: if ClientDataSet1.IndexFieldNames='objname' then
       ClientDataSet1.IndexFieldNames:='objnameDESC'
     else
       ClientDataSet1.IndexFieldNames:='objname';
  1: if ClientDataSet1.IndexFieldNames='SUM(cd.worktime)' then
       ClientDataSet1.IndexFieldNames:='SUM(cd.worktime)DESC'
     else
       ClientDataSet1.IndexFieldNames:='SUM(cd.worktime)';
  end;
end; 
```

当我第一次单击列标题时，排序是按升序完成的——所以到这里一切都很好。当我第二次单击时，我希望按降序排序，但我收到了以下消息：

```
Project ... raised Exception class EDatabaseError with message
'ClientDataSet1: Field 'objnameDESC' not found'. 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T15:08:03.477

由于您已经在使用 TClientDataSet，您可能会使用我为此目的制作的组件。创建一个实例，设置它的 Grid 属性，它会自动连接到 OnTitleClick 事件。

```
type
  TDBGridSorter = class(TComponent)
  strict private
    FSortColumn: TColumn;
    FGrid: TDBGrid;
    procedure CreateIndex(const FieldName: string; Descending: Boolean);
    function GetDataSet: TClientDataSet;
      function MakeIndexName(const FieldName: string; Descending: Boolean): string;
    procedure SetSortColumn(const Value: TColumn);
    procedure SortByField(const FieldName: string; out Descending: Boolean);
  private
    procedure SetGrid(const Value: TDBGrid);
  strict protected
    procedure GridTitleClick(Column: TColumn);
    property DataSet: TClientDataSet read GetDataSet;
  public
    property Grid: TDBGrid read FGrid write SetGrid;
    property SortColumn: TColumn read FSortColumn write SetSortColumn;
  end;

procedure TDBGridSorter.CreateIndex(const FieldName: string; Descending: Boolean);
var
  cds: TClientDataSet;
  indexDef: TIndexDef;
  indexName: string;
begin
  cds := DataSet;
  if cds <> nil then begin
    indexName := MakeIndexName(FieldName, Descending);
    if cds.IndexDefs.IndexOf(indexName) < 0 then begin
      indexDef := cds.IndexDefs.AddIndexDef;
      indexDef.Name := indexName;
      indexDef.Fields := FieldName;
      indexDef.CaseInsFields := FieldName;
      if Descending then
        indexDef.DescFields := FieldName;
    end;
  end;
end;

function TDBGridSorter.GetDataSet: TClientDataSet;
begin
  if (Grid <> nil) and (Grid.DataSource <> nil) and (Grid.DataSource.DataSet is TClientDataSet) then
    Result := TClientDataSet(Grid.DataSource.DataSet)
  else
    Result := nil;
end;

procedure TDBGridSorter.GridTitleClick(Column: TColumn);
begin
  SortColumn := Column;
end;

function TDBGridSorter.MakeIndexName(const FieldName: string; Descending: Boolean): string;
const
  cAscDesc: array[Boolean] of string = ('_ASC', '_DESC');
begin
  Result := FieldName +  cAscDesc[Descending];
end;

procedure TDBGridSorter.SetGrid(const Value: TDBGrid);
begin
  if FGrid <> Value then begin
    if FGrid <> nil then begin
      FGrid.OnTitleClick := nil;
      FGrid.RemoveFreeNotification(Self);
    end;
    FGrid := Value;
    if FGrid <> nil then begin
      FGrid.FreeNotification(Self);
      FGrid.OnTitleClick := GridTitleClick;
    end;
  end;
end;

procedure TDBGridSorter.SetSortColumn(const Value: TColumn);
const
  cOrder: array[Boolean] of string = ('˄', '˅');
var
  descending: Boolean;
  S: string;
begin
  if FSortColumn <> nil then begin
    S := FSortColumn.Title.Caption;
    if StartsStr(cOrder[false], S) or StartsStr(cOrder[true], S) then begin
      Delete(S, 1, 2);
      FSortColumn.Title.Caption := S;
    end;
  end;
  FSortColumn := Value;
  if FSortColumn <> nil then begin
    SortByField(FSortColumn.FieldName, descending);
    FSortColumn.Title.Caption := Format('%s %s', [cOrder[descending], FSortColumn.Title.Caption]);
  end;
end;

procedure TDBGridSorter.SortByField(const FieldName: string; out Descending:
    Boolean);
var
  cds: TClientDataSet;
  curIndex: TIndexDef;
  N: Integer;
begin
  cds := DataSet;
  if cds <> nil then begin
    descending := false;
    N := cds.IndexDefs.IndexOf(cds.IndexName);
    if N >= 0 then begin
      curIndex := cds.IndexDefs[N];
      if SameText(FieldName, curIndex.Fields) then
        descending := not (ixDescending in curIndex.Options)
    end;
    { make sure the index exists }
    CreateIndex(FieldName, descending);
    cds.IndexName := MakeIndexName(FieldName, descending);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T03:38:44.550

**错误的分配**

除了进行了不正确的分配之外，不可能切换回“升序”。

**对于 2 列，您需要 4 个索引。**

假设 'objname' 和 'SUM(cd.worktime)' 是字段。

```
procedure TForm2.FormShow(Sender: TObject);
....
ClientDataSet1.AddIndex('col0_asc','objname',[]);
ClientDataSet1.AddIndex('col0_desc','objname',[ixDescending]);
ClientDataSet1.AddIndex('col1_asc','SUM(cd.worktime)',[]);
ClientDataSet1.AddIndex('col1_desc','SUM(cd.worktime)',[ixDescending]);
.... 
```

使用**ClientDataSet1.IndexName**

```
procedure TForm2.DBGrid1TitleClick(Column: TColumn);
begin
  case Column.Index of
  0: if ClientDataSet1.IndexName='col0_asc' then
       ClientDataSet1.IndexName:='col0_desc'
     else
       ClientDataSet1.IndexName:='col0_asc';
  1: if ClientDataSet1.IndexName='col1_asc' then
       ClientDataSet1.IndexName:='col1_desc'
     else
       ClientDataSet1.IndexName:='col1_asc';
  end;
.... 
```

**或者更短**

```
procedure TForm2.DBGrid1TitleClick(Column: TColumn);
begin
     if ClientDataSet1.IndexName='col'+IntToStr(Column.Index)+'_asc' then
       ClientDataSet1.IndexName:='col'+IntToStr(Column.Index)+'_desc'
     else
       ClientDataSet1.IndexName:='col'+IntToStr(Column.Index)+'_asc';
.... 
```

**但最好测试活动的列数 (AddIndex = done)**。

```
procedure TForm2.DBGrid1TitleClick(Column: TColumn);
begin
   if Column.Index < 2 then begin 
     if ClientDataSet1.IndexName='col'+IntToStr(Column.Index)+'_asc' then
       ClientDataSet1.IndexName:='col'+IntToStr(Column.Index)+'_desc'
     else
       ClientDataSet1.IndexName:='col'+IntToStr(Column.Index)+'_asc';
   end;
.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:33:32.770

你应该设置`IndexName`而不是`IndexFieldNames`。`IndexFieldNames`接受字段名称并动态创建索引。

```
procedure TForm2.DBGrid1TitleClick(Column: TColumn);
begin
  case Column.Index of
  0: if ClientDataSet1.IndexFieldNames='objname' then
       ClientDataSet1.IndexName:='objnameDESC'
     else
       ClientDataSet1.IndexFieldNames:='objname';
  1: if ClientDataSet1.IndexFieldNames='SUM(cd.worktime)' then
       ClientDataSet1.IndexFieldNames:='SUM(cd.worktime) DESC'
     else
       ClientDataSet1.IndexFieldNames:='SUM(cd.worktime)';
  end;
end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T05:19:54.170

我的许多程序都需要这个，所以我编写了一个通用程序，为数据集中的每个字段构建两个索引

```
Procedure BuildIndices (cds: TClientDataSet);
var
 i, j: integer;
 alist: tstrings;

begin
 with cds do
  begin
   open;
   for i:= 0 to FieldCount - 1 do
   if fields[i].fieldkind <> fkCalculated then
    begin
     j:= i * 2;
     addindex ('idx' + inttostr (j), fieldlist.strings[i], [], '', '', 0);
     addindex ('idx' + inttostr (j+1), fieldlist.strings[i], [ixDescending], '', '',0);
    end;
   alist:= tstringlist.create;
   getindexnames (alist);
   alist.free;
   close;
  end;
end; 
```

在这个阶段，我有第一个字段的索引 idx0 和 idx1，第二个字段的索引 idx2 和 idx3，等等。

然后，在显示 dbgrid 的表单中（这里的活动查询称为 qShowFees）

```
procedure TShowFees.DBGrid1TitleClick(Column: TColumn);
var
 n, ex: word;

begin
 n:= column.Index;
 try
  dbGrid1.columns[prevcol].title.font.color:= clNavy
 except
 end;

 dbGrid1.columns[n].title.font.color:= clRed;
 prevcol:= n;
 directions[n]:= not directions[n];

 ex:= n * 2;
 if directions[n] then inc (ex);
 with qShowFees do
  try
   disablecontrols;
   close;
   indexname:= 'idx' + inttostr (ex);
   open
  finally
   enablecontrols
  end;
end; 
```

'Directions' 是一个布尔值的表单数组，它“记住”每列当前的排序方式（升序或降序），因此第二次单击 dbgrid 的标题栏将导致网格以与其排序相反的方式排序前。'Prevcol' 是一个表单变量，用于存储当前选择的列；这是在调用之间保存的，因此下次用户打开表单时，它的排序方式与她之前离开的方式相同。

# algorithm - 量子计算机和算法性能

> ID：12567514
> 
> 赞同：-5
> 
> 时间：2012-09-24T14:52:13.723
> 
> 标签：algorithm, quantum-computing

我有个问题。有一天，量子计算机会逐渐出现。因此，如今使算法高效很重要；我的意思是，让它尽可能快地运行。但是一旦量子PC出现，算法性能的提升还重要吗？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:59:42.140

我认为现在担心它还为时过早。它也可能是永远不会制造的量子计算机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:02:29.547

量子算法有可能一次性搜索一个完整的数字空间来寻找答案，这是真的。但是，您选择的算法仍将决定需要多少这些步骤，以及您是否可以用有用的输入来打包整个空间。

# windows - 错误 1001。初始化安装时发生异常

> ID：12567515
> 
> 赞同：2
> 
> 时间：2012-09-24T14:52:14.057
> 
> 标签：windows, winforms, windows-installer

我在尝试卸载时看到以下错误。当程序文件中没有文件夹 WRT 软件时，如何卸载软件。

注意：我已经从程序文件中删除了软件文件夹。

***错误信息***：

```
System.IO.FileNotFoundException. could not load file or assembly or its dependencies. the system cannot find the file specified. 
```

当程序文件不存在文件夹时，我需要有关如何卸载软件的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:48:32.987

听起来像是一个非常简单的 InstallUtil 自定义操作，它依赖于正在安装的文件，如果找不到，则不会进行异常处理。惊人的！:)

获取您安装的原始 MSI 并使用 Orca 对其进行编辑，以从 InstallExecute 序列中删除自定义操作。使用以下命令重新缓存 MSI：

```
msiexec /i FOO.MSI REINSTALL=ALL REINSTALLMODE=vomus /qb 
```

最后卸载应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-07T23:23:45.437

***Broken Uninstalls*** : 有几种方法可以解决这个问题，例如**`1)`**尝试运行**`repair sequence`**已安装的 MSI，这可能会从原始安装位置拉下文件或**`2)`**运行**`the original installer itself`**- 如*安装顺序*而不是*修复顺序*（必须是最初用于安装软件的确切 MSI 文件）等......这些方法都容易失败，通常需要一些“黑客”才能成功。

***Microsoft FixIt***：这一切都导致了“某种官方”的最后手段解决方案的推荐，它是[**Microsoft FixIt 工具**](https://support.microsoft.com/en-us/help/17588/fix-problems-that-block-programs-from-being-installed-or-removed)。它可用于通过“取消注册”安装而不是对其运行实际卸载来清除损坏的卸载。它应该工作。如果你不需要，千万不要使用它，有风险。

* * *

***记录和调试***：以上内容应该可以，但这里是有关如何记录 MSI 操作的信息：[**创建和解释 MSI 日志**](https://stackoverflow.com/questions/54453922/enable-installation-logs-for-msi-installer-without-any-command-line-arguments/54458890#54458890)以缩小所见问题的原因的不同方法。

* * *

***链接***：下面是一些通用的 MSI 卸载资源。第一个链接列出了损坏卸载的清理策略 - 其中一些非常hacky。第二个链接列出了调用卸载 MSI 文件的不同方法 - 有很多方法：

*   ***Broken Uninstalls***：[**这里是一个针对损坏卸载的清理方法的通用列表**](https://stackoverflow.com/questions/53876550/wix-custom-action-dialogbox-on-silent-uninstall-of-application/53876981#53876981)- 其中大部分都**非常hacky**，只有在你真的需要时才使用它。
*   ***MSI 卸载方法***：[不使用 msiexec 从命令行卸载 MSI 文件](https://stackoverflow.com/questions/450027/uninstalling-an-msi-file-from-the-command-line-without-using-msiexec/1055933#1055933)。

# svn - SVN 一个项目：多个程序员，Locking 或Brancing 哪个更好？

> ID：12567516
> 
> 赞同：2
> 
> 时间：2012-09-24T14:52:15.887
> 
> 标签：svn

我们多个程序员必须同时在一个项目上工作。有时我们必须在一个文件中工作。

哪一个更好

*   文件锁定
*   分枝

或者，如何以更好的方式使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:03:11.480

非锁定结帐（你称之为“分支”）总是更好。锁定结帐不会导致签入冲突，但代价是签出冲突。如果人们 100% 可靠（而且速度很快），结账冲突可以得到缓解。否则，你会让人们坐在他们的手上结账，而不是并行工作。

例如，我开始处理一个文件，所以我锁定了它。然后我去吃午饭。我不在时，没有其他人可以使用此文件。我吃完午饭回来，我的邮箱里满是“嘿，请解锁XXX”，我的手机有消息等等。这些“压力”最终导致人们在修订控制之外进行工作，然后将他们“合并”到修订控制系统（容易错过项目失败）。

使用非锁定结帐，你和我都结帐，没有协调，我们都（再次不协调）修改了一些相同的文件。我先签入，这将与存储库顺利合并（再次我没有与您协调）。您尝试签入，但您的三个文件是基于文件的“当前”副本“之前”制作的副本。你现在的任务是做出选择。删除您的文件并根据“当前”副本进行更改，或下载应用的更改以从“旧”副本创建“当前”副本并将这些更改合并到您的提交中。你只等你自己。

使用非锁定结帐，一个人不会影响团队中的其他成员，无论他们尝试做什么。如果他们选择不经常合并或提前合并，他们可能会为自己带来更多的工作；但是，他们不会为他人带来更多的工作。

# javascript - Bing Maps API v7 边界限制

> ID：12567517
> 
> 赞同：1
> 
> 时间：2012-09-24T14:52:26.467
> 
> 标签：javascript, maps, bing-maps, bing-api

所以我正在尝试使用 Bing Maps AJAX API (v7) 的搜索模块，我注意到[在交互式 SDK 中，](http://www.bingmapsportal.com/isdk/ajaxv7#SearchModule4)您可以传入一个名为的属性，您可以在`bounds`其中提供一个边界框进行搜索。该示例仅使用地图的当前边界框，因此理论上，如果您放大，新的搜索应该只会显示您放大区域内的结果，对吗？

那么问题来了：在交互式 SDK 中的示例代码末尾添加以下代码：

```
Microsoft.Maps.Events.addHandler(map, 'viewchange', searchRequest); 
```

这*应该*做的是每次您在地图上移动或放大或缩小时，它都应该使用地图的新边界区域进行新搜索......我这么说是因为这条线看起来像这样：`bounds: map.getBounds(),`。实际发生的是，它会反弹回缩放之前的初始位置。

说我疯了，但`bounds`财产只是被完全忽略了吗？有谁知道如何将搜索结果限制在当前可见的地图区域？

最后：只有我一个人，还是 V7 的 API 文档不完整？通过检查 Chrome 控制台中未出现在 API 文档中的内容，我设法找到了一些东西。

*更新：*这就是我对搜索功能的调用：

```
searchManager.search({
    bounds: map.getBounds(),
    callback: searchSuccess,
    count: 20,
    entityType:"Business",
    errorCallback: searchFail,
    startIndex: 0,
    userData: userData,
    what: what,
    where: search
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:22:54.497

我没有亲自使用视图更改，因为我不确定从 6.0 迁移时是否可用。

我将分享我走的另一条路线，以完成这项工作。

我的搜索功能还将 Microsoft.Maps.Pushpin 放在用户搜索的准确位置（“你在这里！”）。

然后我从图钉创建一个边界：

```
var viewBoundaries = Microsoft.Maps.LocationRect.fromLocations(pushpin.getLocation()); 
```

然后为边界设置 Map.setView 属性。（以及放大我的情况）

```
map.setView({ bounds: viewBoundaries });
map.setView({ zoom: 10 }); 
```

如果您不使用图钉，您可以简单地从位置类创建视图边界。

[MSDN 位置类](http://msdn.microsoft.com/en-us/library/gg427612.aspx)

# c# - 如何在 C# 中处理动态加载的托管库

> ID：12567518
> 
> 赞同：4
> 
> 时间：2012-09-24T14:52:30.237
> 
> 标签：c#, .net, plugins, dll-injection

我用 C# 编写了一个应用程序，并为它添加了一种 API。使用此 API，您可以将插件编写为 dll，它是一些接口规则的基础。

我想让通过 OpenFileDialog 打开 dll 文件并使用其内容成为可能。我的 API 是一个托管库，所以我只是添加了一个引用，但我想在不知道 dll 文件名称的情况下使用 dll。此外，命名空间是另一个每个库。

如何加载 dll 并在其中运行代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:22:29.347

您所描述的通常称为插件系统。搜索“使用 C# 创建插件系统”之类的内容可能会为您提供大量信息，如下所示：

[http://www.codeproject.com/Articles/4691/Plugin-Architecture-using-C](http://www.codeproject.com/Articles/4691/Plugin-Architecture-using-C)

基本思想是：

*   定义您的程序实现的接口以允许插件从您的程序中获取信息。
*   定义一个所有插件都将实现的接口，以允许您的程序调用插件的方法来做某事。
*   将这些接口放在您的程序和任何插件 dll 引用的单独 dll 中。
*   提供某种方式来查找具有实现插件接口的类型的 dll，例如 OpenFileDialog。
*   加载 dll 并找到实现插件接口的类型（使用反射）。
*   使用反射来实例化这些类型。
*   酌情通过接口调用这些类型的方法。

* * *

关于托管/非托管。托管 DLL 是使用 .net 托管运行时构建/编码的。这将是用 .net 语言（如[c#](/questions/tagged/c%23 "显示标记为“c#”的问题") ）编码的东西。

非托管 dll 或多或少是用不同语言编码的任何东西。

您所说的非托管 dll 我将其称为动态加载的托管 dll。即它仍然是一个托管 dll（以 .net 语言编码），但在程序已经运行之前不会加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:58:41.980

[您可以使用Assembly.LoadFrom 方法（字符串）](http://msdn.microsoft.com/en-us/library/1009fa28.aspx)从 dll 文件加载托管程序集（另请参见[程序集加载的最佳实践](http://msdn.microsoft.com/en-us/library/dd153782.aspx)）。

# .net - 将 SQL Server 连接的密码缓存为哈希

> ID：12567519
> 
> 赞同：1
> 
> 时间：2012-09-24T14:52:33.020
> 
> 标签：.net, sql-server, hash, basic-authentication, password-protection

我正在编写一个 .NET 4.0 应用程序，它需要访问 Intranet 上的 SQL Server (v10.50.1600) 数据库。该数据库不支持集成安全/SSPI 登录，仅支持用户/密码登录。到目前为止，我管理的最好的是：

```
SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder()
{
   DataSource = Settings.SQLHostName,
   Encrypt = true,
   TrustServerCertificate = true,
   UserID = Settings.SQLUser,
   Password = "xxx",
   InitialCatalog = "xxx"
}; 
```

但是，这需要我在本地存储和操作纯文本密码，这是我想避免的。

有没有办法给 ADO、LINQ 或实体框架等提供密码哈希而不是密码来连接到 SQL Server？

* * *

虽然连接字符串的加密存储总比没有好，但它最终需要在使用前解密。由于在 WPF 密码框上没有可绑定内容属性的理由显然是将明文密码保存在内存中是一个坏主意，因此在使用之前进行任何类型的连接字符串解密听起来都是不明智的。

理想的替代方法是了解 SQL 服务器如何存储和传输其密码摘要；在本地应用相同的摘要算法；然后发送摘要而不是明文密码。不幸的是，这里似乎部分描述了 TDS7 密码编码：

[http://dbaspot.com/ms-sqlserver/210567-tds7-8-login-packets.html](http://dbaspot.com/ms-sqlserver/210567-tds7-8-login-packets.html)

似乎根本不使用任何摘要算法。所以我可能会坚持以下 podiluska 的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T14:56:35.460

您可以在 app.config 中加密连接字符串。

[http://msdn.microsoft.com/en-us/library/89211k9b(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/89211k9b(v=vs.80).aspx)

[http://msdn.microsoft.com/en-us/library/53tyfkaw(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/53tyfkaw(v=vs.100).aspx)

但是，鉴于这是一个 Intranet 应用程序，我建议找出未启用集成安全性的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T14:56:57.893

不，没有。当您需要验证传入密码时，密码哈希很有用。当您需要存储密码以对外部资源进行身份验证时，它是没有用的。

如果您的应用程序在安全服务器（例如 ASP.NET 应用程序）上运行，您可以加密数据库凭据，例如使用[Protected Configuration](http://msdn.microsoft.com/en-us/library/68ze1hb2(v=vs.100).aspx)。

但是在客户端应用程序中，这并没有太大帮助，除了劝阻普通浏览器，因为如果您的应用程序可以解密配置文件，那么坚定的用户也可以。

# c++ - OpenCV：使用霍夫圆变换检测虹膜

> ID：12567520
> 
> 赞同：7
> 
> 时间：2012-09-24T14:52:33.910
> 
> 标签：c++, opencv, image-processing, hough-transform, iris-recognition

我是openCV的新手，但我想创建虹膜识别程序。尽管带有网络摄像头的系统可以检测到眼睛，但它无法检测到圆形虹膜。我正在使用霍夫圆变换。但是如果图像中的虹膜不够圆，系统就无法检测到它。有什么解决办法吗？

使用的算法是霍夫圆变换。

```
IplImage *capturedImg = cvLoadImage("circle.jpg",1);
IplImage *grayscaleImg = cvCreateImage(cvGetSize(capturedImg), 8, 1);

cvCvtColor(capturedImg, grayscaleImg, CV_BGR2GRAY);

// Gaussian filter for less noise
cvSmooth(grayscaleImg, grayscaleImg, CV_GAUSSIAN,9, 9 );

//Detect the circles in the image
CvSeq* circles = cvHoughCircles(grayscaleImg,
                         storage,
                         CV_HOUGH_GRADIENT,
                         2,
                         grayscaleImg->height/4,
                         200,
                     100 );

for (i = 0; i < circles->total; i++) 
{
     float* p = (float*)cvGetSeqElem( circles, i );
     cvCircle( capturedImg, cvPoint(cvRound(p[0]),cvRound(p[1])), 
        3, CV_RGB(0,255,0), -1, 8, 0 );
     cvCircle( capturedImg, cvPoint(cvRound(p[0]),cvRound(p[1])), 
         cvRound(p[2]), CV_RGB(0,0,255), 3, 8, 0 );
}
// cvCircle( img,cvPoint( r->x, r->y ),67, CV_RGB(255,0,0), 3, 8, 0 );      
cvNamedWindow( "circles", 1 );
cvShowImage( "circles", capturedImg ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T13:53:36.147

Add a call to `cvCanny()` between `cvSmooth()` and `cvHoughCircles()`. This will execute an edge detection algorithm which is going to provide a better input image for `cvHoughCircles()` and will probably improve your results.

There's a lot of [similar](https://stackoverflow.com/a/5023835/176769) questions on Stackoverflow, I suggest you [use the search box](https://stackoverflow.com/search?q=%5Bopencv%5D%20iris).

# r - 比较多个数据帧

> ID：12567524
> 
> 赞同：-2
> 
> 时间：2012-09-24T14:52:51.550
> 
> 标签：r, dataset, compare

我需要一些数据分析方面的帮助。
我确实有两个数据集（之前和之后），我想看看它们之间的差异有多大。

前

```
11330    STAT1
2721    STAT2
52438    STAT3
6124    SUZY 
```

后

```
17401    STAT1
3462    STAT2
0    STAT3
72    SUZY 
```

试图将它们与`tapply(before$V1, before$V2, FUN=mean)`.
但是当我试图绘制它时，在 x 轴上不是得到组名而是得到数字。如何绘制这样的挖掘数据（Y 轴上的频率和 X 轴上的组名）？

还想问一下 R 中比较此类数据集的正确命令是什么，因为我愿意找到它们之间的区别？

* * *

**已编辑**

> 输入（$V1 之前）
> c（11330L、2721L、52438L、6124L）
> 
> dput(before$V2)
> 结构(1:4, .Label = c("STAT1", "STAT2", "STAT3","SUZY"),class = "factor")

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T16:01:10.497

这里有几个想法。

这就是我*认为*您的数据的样子？

```
before <- data.frame(val=c(11330,2721,52438,6124),
                     lab=c("STAT1","STAT2","STAT3","SUZY"))
after <- data.frame(val=c(17401,3462,0,72),
                     lab=c("STAT1","STAT2","STAT3","SUZY")) 
```

将它们组合成一个带有`period`变量的数据框：

```
combined <- rbind(data.frame(before,period="before"),
      data.frame(after,period="after")) 
```

重新格式化为矩阵并使用 (base R) 绘制`dotchart`：

```
library(reshape2)
m <- acast(combined,lab~period,value.var="val")
dotchart(m) 
```

绘图`ggplot`：

```
library(ggplot2)
qplot(lab,val,colour=period,data=combined) 
```

# php - PHP：填充多维数组以具有相同数量的元素

> ID：12567525
> 
> 赞同：0
> 
> 时间：2012-09-24T14:52:56.583
> 
> 标签：php, arrays, multidimensional-array

我有以下数组，其中一个月的天数按一周中的天数分组。

```
Array
(
    [3] => Array
        (
            [0] => 1
            [1] => 8
            [2] => 15
            [3] => 22
            [4] => 29
        )

    [4] => Array
        (
            [0] => 2
            [1] => 9
            [2] => 16
            [3] => 23
            [4] => 30
        )

    [5] => Array
        (
            [0] => 3
            [1] => 10
            [2] => 17
            [3] => 24
            [4] => 31
        )

    [1] => Array
        (
            [0] => 6
            [1] => 13
            [2] => 20
            [3] => 27
        )

    [2] => Array
        (
            [0] => 7
            [1] => 14
            [2] => 21
            [3] => 28
        )

) 
```

如您所见，所有数组都有五个元素，但最后两个有四个。

如何填充最后两个数组，以便它们也可以有五个元素？

我想用空值填充它们，所以当我打印一个 html 表时，它不会在第 31 天之后打印任何内容

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:07:13.067

如果您真的坚持要修复数据而不是像评论建议的那样将其用于打印，那么您可以[`array_pad`](http://php.net/manual/en/function.array-pad.php)像这样使用：

```
$days = array(....) // that's your original array
foreach($days as $key => $val){
    if(count($val)<5)
        $days[$key] = array_pad($val, 5, 0);
} 
```

Where`array_pad($val, 5, 0);`用 's 填充数组，`0`直到达到 length `5`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:01:48.987

您可以使用[array_pad()](http://php.net/manual/en/function.array-pad.php)来执行此操作。

**例子**

```
$data = array(
    array(1, 2, 3, 4, 5),
    array(3, 4, 5),
    array(4, 9, 10, 11),
    array(1, 3, 5, 7, 8)
);

var_dump(array_map(function($val) { 
  return array_pad($val, 5, ''); 
}, $data)); 
```

**输出**

```
array
  0 => 
    array
      0 => int 1
      1 => int 2
      2 => int 3
      3 => int 4
      4 => int 5
  1 => 
    array
      0 => int 3
      1 => int 4
      2 => int 5
      3 => string '' (length=0)
      4 => string '' (length=0)
  2 => 
    array
      0 => int 4
      1 => int 9
      2 => int 10
      3 => int 11
      4 => string '' (length=0)
  3 => 
    array
      0 => int 1
      1 => int 3
      2 => int 5
      3 => int 7
      4 => int 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:03:01.683

将值添加到 multid。使用 array_push 的数组是这样的：

```
array_push ($array[1]['something'], "value"); 
```

在你的例子中：

```
array_push ($array[count($array)][4], 99); 
array_push ($array[count($array)-1][4], 99); 
```

# ruby-on-rails - 在 Mongoid 中查询具有日期范围的嵌入文档的文档

> ID：12567530
> 
> 赞同：2
> 
> 时间：2012-09-24T14:53:10.593
> 
> 标签：ruby-on-rails, mongoid, embed

假设我有一个用户文档，其中包含许多活动作为嵌入文档。每次用户在网站上做某事时，都会创建一个活动文档（例如）。

```
class User
  include Mongoid::Document
  has_many :activities
end

class Activity
  include Mongoid::Document
  field :action_executed_at, type: DateTime
  belongs_to :user
end 
```

我现在想查询今天之后有活动的所有用户。这可以用 Mongoid 完成吗？我试过这样的查询：

```
User.where("activities.action_executed_at" => {"$gt" => DateTime.now.to_s}) 
```

乃至：

```
User.where("activities" => {
  "$elemMatch" => { 
     "action_executed_at" => {
       "$gt" => DateTime.now.to_s 
      } 
   } 
}) 
```

但他们总是返回并清空集合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:22:42.210

尝试这个

```
User.where(:'activities.action_executed_at'.gt => DateTime.now) 
```

# c# - GridView 单元格中的舍入值

> ID：12567534
> 
> 赞同：0
> 
> 时间：2012-09-24T14:53:19.940
> 
> 标签：c#, asp.net, gridview

我有一个 GridView，它以编程方式绑定到 a`List<T>`其中 T 是我的自定义对象，例如`OrderItem`. 小数类型值显示许多小数位。我想将它们四舍五入到小数点后 2 位。我怎么做？

这大概是我所拥有的：

```
public class OrderItem
{
    public Product Product { get; set; }
    public int Quantity { get; set; }
    public decimal GrossAmount { get; set; }
}

public class Product
{
    public string ProductName { get; set; }
    public decimal Price { get; set; }
    public decimal DiscountPercent { get; set; }
}

    <asp:GridView ID="dgOrderItems" runat="server" AutoGenerateColumns = "false">

        <Columns>
            <asp:TemplateField HeaderText = "Product">
                <ItemTemplate>
                    <%# Eval("Product.ProductName") %>
                </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText = "Price">
                <ItemTemplate>
                    <%# Eval("Product.Price") %>
                </ItemTemplate>
            </asp:TemplateField>

            <asp:BoundField DataField = "Quantity" HeaderText = "Quantity" />
            <asp:BoundField DataField = "GrossAmount" HeaderText = "Gross Amount" />

            <asp:TemplateField HeaderText = "Discount (%)">
                <ItemTemplate>
                    <%# Eval("Product.DiscountPercent") %>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>            
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T15:04:33.087

在 TemplateFields 上使用 Eval 中可用的格式，即：

```
<%# Eval("Product.Price", "{0:C}") %> 
```

对于绑定字段，请使用[BoundField.DataFormatString 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)，即：

```
<asp:BoundField DataField="GrossAmount" 
                HeaderText="Gross Amount" 
                DataFormatString="{0:f2}" /> 
```

有关可以使用的格式字符串， 请参阅[标准数字格式字符串。](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

# jquery - jQuery ajaxForm 在 codemirror 保存后传递了错误的 textarea 值

> ID：12567535
> 
> 赞同：1
> 
> 时间：2012-09-24T14:53:21.203
> 
> 标签：jquery, codemirror

我使用 jQuery 的 ajaxForm 方法来汇总我的表单，我使用 POST。表单内部有一个 textarea 输入，我使用 Codemirror 突出显示它。

在提交之前，我使用 Codemirror 的 save()，

但它永远不会将更改的值传递给服务器（我检查了服务器和客户端 Post 参数有一个旧值）所以，我猜这是一个客户端问题，不是吗？

如您所知，Codemirror 隐藏了真实的 textarea 并`s place. If I set the real`在提交之前在 textarea 的 textarea 显示样式上生成 div，但在 CodeMirror`s save method, I see that the real textarea`的值发生更改之后，但是，正如我所说，它永远不会进入服务器 =(

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:21:30.807

在触发 jQuery ajax 魔法之前调用`.save()`CodeMirror 实例。出于性能原因，它不会在您键入时不断更新文本区域。它会注意到表单上的提交事件并保存，但是当您执行 ajax 提交时不会触发此类事件。

# ios - 无法验证 iOS App Store 的应用程序，缺少 armv6 架构

> ID：12567539
> 
> 赞同：17
> 
> 时间：2012-09-24T14:53:29.260
> 
> 标签：ios, xcode, app-store, armv6, deployment-target

将我的 iOS 应用程序提交到 App Store 时，验证失败并显示以下消息：

```
iPhone/iPod Touch: application executable is missing a required architecture.
At least one of the following architectures(s) must be present: armv6 
```

我正在使用当前最新的 Xcode 4.5 (4G182)。我的一些构建设置：

*   架构：armv6 armv7
*   基础 SDK：最新 iOS (iOS 6.0)
*   有效架构：armv7 armv7s
*   iOS 部署目标：4.0

这里出了什么问题？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-24T14:53:29.260

将**iOS 部署目标**设置为**iOS 4.3**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:57:22.183

如果您使用的是 Xcode 4.5，则不再有 armv6 那么您需要使用较早的 Xcode 版本以仍然支持 iOS 4.3（此处列出了各种方法[http://blog.chpwn.com/post/31824877081](http://blog.chpwn.com/post/31824877081)）

如果这不是必需的，您可以删除 armv6 并仅支持 iOS 5+

删掉armv6就过去了->`Build Settings->Architectures->Select Standard`

# eclipse - Egit和eclipse的存储库配置文件问题

> ID：12567544
> 
> 赞同：2
> 
> 时间：2012-09-24T14:53:39.583
> 
> 标签：eclipse, egit

我在 Eclipse 中收到“发生多个问题”错误窗口，以下是我得到的更多详细信息：

> 发生了错误。有关详细信息，请参阅错误日志。
> 
> 发生了错误。有关详细信息，请参阅错误日志。存储库配置文件 V:\git\broadband_production.git\config 无效无法读取文件 V:\git\broadband_production.git\config

我可以使用 git bash 访问相同的 git 数据，但我希望能够继续在 eclipse 中使用 EGit 功能。

关于什么是错的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:32:55.637

您的配置文件是否有[UTF-8 字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)？如果是这样，您必须升级到 EGit 的夜间版本，其中包括[处理 UTF-8 BOM 的最新修复程序](https://git.eclipse.org/r/7830)。

使用以下更新站点进行升级：http: [//download.eclipse.org/egit/updates-nightly](http://download.eclipse.org/egit/updates-nightly)

# c# - 按用户 ID 搜索班级，然后在表格中显示班级

> ID：12567551
> 
> 赞同：-1
> 
> 时间：2012-09-24T14:53:57.690
> 
> 标签：c#, asp.net-mvc-3, html

首先如果你给出例子，你能在aspx引擎中做到吗？我对此最为熟悉。如果没有，我想没关系，我会尝试找出剃须刀引擎的例子。

这是我上一个问题与我取得的进展的升级。

我正在尝试创建一个接收用户 ID 的搜索框，然后显示与用户输入关联的类，然后将其显示在表格中。如果没有，则搜索按钮下方的消息应显示未找到类别。这就是我到目前为止所拥有的。我的示例中有很多红色下划线。我不知道我在哪里搞砸了。

**html**

```
 <div align="center">
        <form id="searchUser" method="post" action="what do I put here?">
            <table align="center">
        <tr>
            <td class="label">
                Enter ID:
             </td>
            <td>
                <input type="text" name="UserId" id="UserId" value="<%(string)(ViewBag.userid)%>" />
            </td>
        </tr>
        <tr>
            <td>
                <button class="searchButton" id="searchButton">Search</button>
            </td>
        </tr>
      </table>
     </form>
   </div>
   <hr /> 

   <%if(ViewBag.searchClass !=null)
     { %>
     <h2>Search Resuls</h2>
     <br />
     <%AAlexUsers.Models.SearchClass searchClassList= ViewBag.searchClass;%>
     <table>
        <tr>
            <th>
                UserID:
            </th>
            <th>
                Email:
            </th>
            <th>
            Last Four Digits:
            </th>
        </tr>
           <tr>
            <td class="content">
              <%=searchClassList.userId%>
            </td>
            <td class="content">
             <%=searchClassList.email%>
            </td>
              <td class="content">
              <%=searchClassList.lastFourdigits%>
             </td>
           </tr>
           <%} %>
     </table>
      <% else %>
    <% { %>
        <h2>No Class found.</h2>
    <% } %> 
```

**控制器** 这是我为搜索按钮创建类的实例的地方

```
 public ActionResult Search()
    {
        string userId = Request["UserId"];

        bool view = false;

        if (Request["UserId"] == null)
        {
            view = true;
        }
        if (!view)
        {

            AAlexUsers.Models.SearchClass searchClass = new Models.SearchClass();
            {
                searchClass.lastFourdigits = "2222";
                searchClass.userId = "12345";
                searchClass.email = "diaz@gmail.com";

                string lastFourdigits = searchClass.lastFourdigits;
                string userIdd = searchClass.userId;
                string email = searchClass.email;

                ViewBag.searchClass = searchClass;
                ViewBag.lastFourdigits = lastFourdigits;
                ViewBag.userId = userIdd;
                ViewBag.email = email;
            }
        }
        return View(); 
```

**模型**

```
 namespace AAlexUsers.Models
{
    public class SearchClass
    {
            public string userId { get; set; }
            public string email { get; set; }
            public string lastFourdigits { get; set; }

            public SearchClass()
            {
                userId = "";
                email = "";
                lastFourdigits = "";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:44:04.753

我在 VS2010 (MVC3) 中运行您的代码时遇到了一个错误。

`</table>`应该是之前`<%} %>`

[与 webforms 引擎相比，你可以在这里](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)找到很多关于 razor 的好信息。

# c# - 将绝对路径更改为相对路径

> ID：12567559
> 
> 赞同：0
> 
> 时间：2012-09-24T14:54:21.460
> 
> 标签：c#

我想如何将我的绝对路径更改为相对路径。有人可以帮忙吗？这是我的代码

```
string activeDirectory = @"X:\Temp\";
string[] files = Directory.GetFiles(activeDirectory);
foreach (string fileName in files)
{
   .....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:34:28.217

我宁愿`files.Select(f => f.Substring(activeDirectory.Length))`.
这意味着“跳过 x 个字符并返回其余字符”。

# ios - CATextLayer 上来自 iOS 6 的不需要的垂直填充

> ID：12567562
> 
> 赞同：4
> 
> 时间：2012-09-24T14:54:26.373
> 
> 标签：ios, ipad, ios6, layer, catextlayer

**背景：**我在 iOS 5 中开始了我的项目，并构建了一个带有图层的漂亮按钮。我在按钮上添加了一个 textLayer 并使用以下代码将其居中：

```
 float textLayerVerticlePadding = ((self.bounds.size.height - fontSize) /2);
    textLayer = [[CATextLayer alloc]init];
    [textLayer setFrame:CGRectOffset(self.bounds, 0, textLayerVerticlePadding)]; 
```

它工作得很好，在 iOS 6 之前看起来很死板。

**问题：** iOS 6 在最高边界和 textLayer 中的文本之间添加了一个空格（填充）。这打乱了上面的计算。有没有办法确保 iOS 6 没有？因为我想同时支持 iOS 5 和 6（对于那些喜欢谷歌地图的人）。

**图片：**
这个是iOS 5，红色是textLayer的背景（为了更明显） ![在此处输入图像描述](../Images/34b1ee81bf4198e243018b3ebff3de0d.png)

而这个是iOS 6
![在此处输入图像描述](../Images/0759ee85ffbf9fe4364a07476b7da66a.png)

* * *

**更新：**虽然我确定下面的所有答案都以他们自己的方式正确，但我通过 t0rst 最简单的方式找到了执行此操作的帖子。`HelveticaNeue`iOS5和iOS6都留有一点空间，不像`Helvetica`iOS5顶部没有空间，iOS6空间很小。

**更新 2：**多玩了一下，发现了小空间的大小。无需详细说明，空间是您字体大小的 1/6。所以为了弥补它，我写了

```
float textLayerVerticlePadding = ((self.bounds.size.height - fontSize) /2) - (fontSize/6);
[textLayer setFrame:CGRectOffset(self.bounds, 0, textLayerVerticlePadding)]; 
```

使用该代码，我每次都会遇到死角。请注意，这仅`HelveticaNeue-Bold`在 iOS5 和 iOS6 上进行了测试。我不能说别的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T22:53:37.677

在 iOS 5 及之前的版本中，a 中的第一个基线`CATextLayer`始终位于从边界顶部向下的位置，其位置是从`CTLineGetTypographicBounds`传递 a 时获得的上升`CTLine`，由第一行的字符串制成。

在 iOS 6 中，这不再适用于所有字体。因此，当您定位 a 时，`CATextLayer`您无法再可靠地决定将其放置在何处以获得正确的视觉对齐。或者你可以吗？...

首先，`CATextLayer`顺便说一句：不久前在 iOS 5 中尝试解决 ' 的定位行为时，我尝试使用上限高度、UIFont 中的上升器等的所有组合，然后最终发现 ascent from`CTLineGetTypographicBounds`是我需要的。在这个过程中，我发现 a) 从`UIFont ascender`,`CTFontGetAscent`和的上升`CTLineGetTypographicBounds`对于某些字体是不一致的，并且 b) 上升经常是奇怪的——要么裁剪重音，要么在上方留出很多空间。a) 的解决方案是知道使用哪个值。b) 没有真正的解决方案，除了通过偏移`CATextLayer`边界在上面留出足够的空间，如果它可能会有被剪掉的重音。

回到 iOS 6。如果你避免使用最糟糕的字体（从 6.0 开始，并且可能会发生变化），你仍然可以`CATextLayer`对其余字体进行编程定位。违规者是：**AcademyEngravedLetPlain**、**Courier**、**HoeflerText**和**Palatino** - 从视觉上看，这些家庭在 中正确定位（即没有剪辑）`CATextLayer`，但三个上升源都没有为您提供基线放置位置的可用指示。**Helvetica**和**.HelveticaNeueUI**（又名系统字体）系列在 给出的上升沿基线正确定位`UIFont ascender`，但其他上升源没有用。

我所做的测试中的一些例子。示例文本以不同的颜色绘制了 3 次。坐标原点在灰色框的左上角。黑色文本`CTLineDraw`通过从 的上升向下偏移绘制`CTLineGetTypographicBounds`；绘制透明红色`CATextLayer`，边界等于灰色框；用位于灰色框原点的`UIKit` `NSString`附加部分和.`drawAtPoint:withFont:``UIFont`

1）表现良好的字体，Copperplate-Light。这三个样本是重合的，呈栗色，这意味着所有来源的上升都足够接近。iOS 5 和 6 也是如此。

![铜版光 iOS 6](../Images/41f6f0b5f1f897aaab4d75b701fa34f0.png)

2) iOS 5 下的**Courier**`CATextLayer` 。文本位置太高（红色），但从（黑色）`CTLineDraw`上升与定位匹配 - 所以我们可以从那里放置和更正。（蓝色）放置文本而不进行剪切。（**Helvetica**和**.HelveticaNeueUI**在 iOS 6 中的行为如下）`CTLineGetTypographicBounds``CATextLayer``NSString drawAtPoint:withFont:`

 ****![快递 iOS 5](../Images/2e250cdb18873e8657147ee8729b945b.png)

3) iOS 6 下的**Courier**`CATextLayer` 。 （红色）现在放置文本，使其不被剪裁，但定位不再匹配从`CTLineGetTypographicBounds`（黑色）或从（蓝色）`UIFont`中使用的上升器的上升。`NSString drawAtPoint:withFont:`这对于程序化定位是不可用的。（**AcademyEngravedLetPlain**、**HoeflerText**和**Palatino**在 iOS 6 中的行为也是如此）

![快递 iOS 6](../Images/29bff57477293de81ea3b5cd082d4aa6.png)

希望这有助于避免我浪费的一些时间，如果你想更深入一点，试试这个：

```
- (NSString*)reportInconsistentFontAscents
{
    NSMutableString*            results;
    NSMutableArray*             fontNameArray;
    CGFloat                     fontSize = 28;
    NSString*                   fn;
    NSString*                   sample = @"Éa3Çy";
    CFRange                     range;
    NSMutableAttributedString*  mas;
    UIFont*                     uifont;
    CTFontRef                   ctfont;
    CTLineRef                   ctline;
    CGFloat                     uif_ascent;
    CGFloat                     ctfont_ascent;
    CGFloat                     ctline_ascent;

    results = [NSMutableString stringWithCapacity: 10000];
    mas = [[NSMutableAttributedString alloc] initWithString: sample];
    range.location = 0, range.length = [sample length];

    fontNameArray = [NSMutableArray arrayWithCapacity: 250];
    for (fn in [UIFont familyNames])
        [fontNameArray addObjectsFromArray: [UIFont fontNamesForFamilyName: fn]];
    [fontNameArray sortUsingSelector: @selector(localizedCaseInsensitiveCompare:)];
    [fontNameArray addObject: [UIFont systemFontOfSize: fontSize].fontName];
    [fontNameArray addObject: [UIFont italicSystemFontOfSize: fontSize].fontName];
    [fontNameArray addObject: [UIFont boldSystemFontOfSize: fontSize].fontName];

    [results appendString: @"Font name\tUIFA\tCTFA\tCTLA"];

    for (fn in fontNameArray)
    {
        uifont = [UIFont fontWithName: fn size: fontSize];
        uif_ascent = uifont.ascender;

        ctfont = CTFontCreateWithName((CFStringRef)fn, fontSize, NULL);
        ctfont_ascent = CTFontGetAscent(ctfont);

        CFAttributedStringSetAttribute((CFMutableAttributedStringRef)mas, range, kCTFontAttributeName, ctfont);
        ctline = CTLineCreateWithAttributedString((CFAttributedStringRef)mas);
        ctline_ascent = 0;
        CTLineGetTypographicBounds(ctline, &ctline_ascent, 0, 0);

        [results appendFormat: @"\n%@\t%.3f\t%.3f\t%.3f", fn, uif_ascent, ctfont_ascent, ctline_ascent];

        if (fabsf(uif_ascent - ctfont_ascent) >= .5f // >.5 can round to pixel diffs in display
         || fabsf(uif_ascent - ctline_ascent) >= .5f)
            [results appendString: @"\t*****"];

        CFRelease(ctline);
        CFRelease(ctfont);
    }

    [mas release];

    return results;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T13:00:58.923

t0rst 的回答对我有帮助。我认为 capHeight 和 xHeight 是关键。

```
 CATextLayer *mytextLayer = [CATextLayer layer];
    CGFloat fontSize = 30;
    UIFont *boldFont = [UIFont boldSystemFontOfSize:fontSize];
    mytextLayer.font = (__bridge CFTypeRef)(boldFont.fontName);
    mytextLayer.fontSize = fontSize;

    CGFloat offsetY = 0;

    //if system version is grater than 6
    if(([[[UIDevice currentDevice] systemVersion] compare:@"6" options:NSNumericSearch] == NSOrderedDescending)){
        offsetY = -(boldFont.capHeight - boldFont.xHeight);
    }

    //you have to set textX, textY, textWidth
    mytextLayer.frame = CGRectMake(textX, textY + offsetY, textWidth, fontSize); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T07:03:00.533

在等待最终解决方案的同时，我研究了 RTLabel 和 TTTAttributedLabel，并按照史蒂夫的建议制作了一个简单的类来在 CALayer 上绘制文本。希望它有所帮助，请不要犹豫指出我犯的任何错误。

CustomTextLayer.h

```
#import <QuartzCore/QuartzCore.h>

@interface CustomTextLayer : CALayer {
    NSString                        *_text;
    UIColor                         *_textColor;

    NSString                        *_font;
    float                           _fontSize;

    UIColor                         *_strokeColor;
    float                           _strokeWidth;

    CTTextAlignment                 _textAlignment;
    int                             _lineBreakMode;

    float                           _suggestHeight;
}

-(float) suggestedHeightForWidth:(float) width;

@property (nonatomic, retain) NSString *text;
@property (nonatomic, retain) UIColor *textColor;

@property (nonatomic, retain) NSString *font;
@property (nonatomic, assign) float fontSize;

@property (nonatomic, retain) UIColor *strokeColor;
@property (nonatomic, assign) float strokeWidth;

@property (nonatomic, assign) CTTextAlignment textAlignment;

@end 
```

CustomTextLayer.m

```
#import <CoreText/CoreText.h>
#import "CustomTextLayer.h"

@implementation CustomTextLayer

@synthesize text = _text, textColor = _textColor;
@synthesize font = _font, fontSize = _fontSize;
@synthesize strokeColor = _strokeColor, strokeWidth = _strokeWidth;
@synthesize textAlignment = _textAlignment;

-(id) init {
    if (self = [super init]) {
        _text = @"";
        _textColor = [UIColor blackColor];

        _font = @"Helvetica";
        _fontSize = 12;

        _strokeColor = [UIColor whiteColor];
        _strokeWidth = 0.0;

        _textAlignment = kCTLeftTextAlignment;
        _lineBreakMode = kCTLineBreakByWordWrapping;

    }
    return self;
}

-(void) dealloc {
    [_text release];
    [_textColor release];

    [_font release];

    [_strokeColor release];

    [super dealloc];
}

-(void) setText:(NSString *)text {
    [_text release];
    _text = [text retain];
    [self setNeedsDisplay];
}

-(void) setTextColor:(UIColor *)textColor {
    [_textColor release];
    _textColor = [textColor retain];
    [self setNeedsDisplay];
}

-(void) setFont:(NSString *)font {
    [_font release];
    _font = [font retain];
    [self setNeedsDisplay];
}

-(void) setFontSize:(float)fontSize {
    _fontSize = fontSize;
    [self setNeedsDisplay];
}

-(void) setStrokeColor:(UIColor *)strokeColor {
    [_strokeColor release];
    _strokeColor = strokeColor;
    [self setNeedsDisplay];
}

-(void) setStrokeWidth:(float)strokeWidth {
    _strokeWidth = 0 ? (strokeWidth < 0) : (-1 * strokeWidth);
    [self setNeedsDisplay];
}

-(void) setTextAlignment:(CTTextAlignment)textAlignment {
    _textAlignment = textAlignment;
    [self setNeedsDisplay];
}

-(void) setFrame:(CGRect)frame {
    [super setFrame: frame];
    [self setNeedsDisplay];
}

-(float) suggestedHeightForWidth:(float) width {

    CTFontRef fontRef = CTFontCreateWithName((CFStringRef)_font, _fontSize, NULL);

    CTParagraphStyleSetting paragraphStyles[2] = {
        {.spec = kCTParagraphStyleSpecifierLineBreakMode, .valueSize = sizeof(CTLineBreakMode), .value = (const void *) &_lineBreakMode},
        {.spec = kCTParagraphStyleSpecifierAlignment, .valueSize = sizeof(CTTextAlignment), .value = (const void *) &_textAlignment}
    };
    CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(paragraphStyles, 2);

    NSDictionary *attrDict = [[NSDictionary alloc] initWithObjectsAndKeys:(id)fontRef, (NSString *)kCTFontAttributeName, (id)_textColor.CGColor, (NSString *)(kCTForegroundColorAttributeName), (id)_strokeColor.CGColor, (NSString *)(kCTStrokeColorAttributeName), (id)[NSNumber numberWithFloat: _strokeWidth], (NSString *)(kCTStrokeWidthAttributeName), (id)paragraphStyle, (NSString *)(kCTParagraphStyleAttributeName), nil];

    CFRelease(fontRef);
    CFRelease(paragraphStyle);

    NSAttributedString *attrStr = [[NSAttributedString alloc] initWithString:_text attributes: attrDict];

    // Determine suggested frame height
    CFRange textRange = CFRangeMake(0, [attrStr length]);
    CGSize constraint = CGSizeMake(width, 9999);

    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attrStr);
    CGSize textSize = CTFramesetterSuggestFrameSizeWithConstraints(framesetter, textRange, NULL, constraint, NULL);
    textSize = CGSizeMake(ceilf(textSize.width), ceilf(textSize.height));

    [attrDict release];
    [attrStr release];

    return textSize.height;
}

-(void) renderText:(CGContextRef)ctx {
    CGContextSetTextMatrix(ctx, CGAffineTransformIdentity);
    CGContextTranslateCTM(ctx, 0, self.bounds.size.height);
    CGContextScaleCTM(ctx, 1.0, -1.0);

    CTFontRef fontRef = CTFontCreateWithName((CFStringRef)_font, _fontSize, NULL);

    CTParagraphStyleSetting paragraphStyles[2] = {
        {.spec = kCTParagraphStyleSpecifierLineBreakMode, .valueSize = sizeof(CTLineBreakMode), .value = (const void *) &_lineBreakMode},
        {.spec = kCTParagraphStyleSpecifierAlignment, .valueSize = sizeof(CTTextAlignment), .value = (const void *) &_textAlignment}
    };
    CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(paragraphStyles, 2);

    NSDictionary *attrDict = [[NSDictionary alloc] initWithObjectsAndKeys:(id)fontRef, (NSString *)kCTFontAttributeName, (id)_textColor.CGColor, (NSString *)(kCTForegroundColorAttributeName), (id)_strokeColor.CGColor, (NSString *)(kCTStrokeColorAttributeName), (id)[NSNumber numberWithFloat: _strokeWidth], (NSString *)(kCTStrokeWidthAttributeName), (id)paragraphStyle, (NSString *)(kCTParagraphStyleAttributeName), nil];

    CFRelease(fontRef);
    CFRelease(paragraphStyle);

    NSAttributedString *attrStr = [[NSAttributedString alloc] initWithString:_text attributes: attrDict];

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathAddRect(path, NULL, self.bounds);
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attrStr);

    CFRange textRange = CFRangeMake(0, [attrStr length]);
    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, textRange, path, NULL);
    CFArrayRef lines = CTFrameGetLines(frame);
    NSInteger numberOfLines = CFArrayGetCount(lines);
    CGPoint lineOrigins[numberOfLines];
    CTFrameGetLineOrigins(frame, CFRangeMake(0, numberOfLines), lineOrigins);

    for (CFIndex lineIndex = 0; lineIndex < numberOfLines; lineIndex++) {
        CGPoint lineOrigin = lineOrigins[lineIndex];
        CGContextSetTextPosition(ctx, lineOrigin.x,  lineOrigin.y);
        CTLineRef line = CFArrayGetValueAtIndex(lines, lineIndex);

        if (lineIndex == numberOfLines - 1) {
            CFRange lastLineRange = CTLineGetStringRange(line);

            if (!(lastLineRange.length == 0 && lastLineRange.location == 0) && lastLineRange.location + lastLineRange.length < textRange.location + textRange.length) {
                NSUInteger truncationAttributePosition = lastLineRange.location;
                CTLineTruncationType truncationType;
                if (numberOfLines != 1) {
                    truncationType = kCTLineTruncationEnd;
                    truncationAttributePosition += (lastLineRange.length - 1);
                }

                NSAttributedString *tokenString = [[NSAttributedString alloc] initWithString:@"\u2026" attributes:attrDict];
                CTLineRef truncationToken = CTLineCreateWithAttributedString((CFAttributedStringRef)tokenString);

                NSMutableAttributedString *truncationString = [[attrStr attributedSubstringFromRange: NSMakeRange(lastLineRange.location, lastLineRange.length)] mutableCopy];
                if (lastLineRange.length > 0) {
                    unichar lastCharacter = [[truncationString string] characterAtIndex: lastLineRange.length - 1];
                    if ([[NSCharacterSet newlineCharacterSet] characterIsMember:lastCharacter]) {
                        [truncationString deleteCharactersInRange:NSMakeRange(lastLineRange.length - 1, 1)];
                    }
                }
                [truncationString appendAttributedString: tokenString];
                CTLineRef truncationLine = CTLineCreateWithAttributedString((CFAttributedStringRef) truncationString);

                CTLineRef truncatedLine = CTLineCreateTruncatedLine(truncationLine, self.bounds.size.width, truncationType, truncationToken);
                if (!truncatedLine) {
                    // If the line is not as wide as the truncationToken, truncatedLine is NULL
                    truncatedLine = CFRetain(truncationToken);
                }

                CTLineDraw(truncatedLine, ctx);

                CFRelease(truncatedLine);
                CFRelease(truncationLine);
                CFRelease(truncationToken);
            } else {
                CTLineDraw(line, ctx);
            }
        } else {
            CTLineDraw(line, ctx);
        }
    }

    [attrStr release];
    [attrDict release];

    CFRelease(path);
    CFRelease(frame);
    CFRelease(framesetter);

}

-(void) drawInContext:(CGContextRef)ctx {
    [super drawInContext: ctx];
    [self renderText: ctx];
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:19:37.663

我认为同时支持你可以为文本图层创建一个类别，在类别中你可以有条件地为两个版本编码。与更改图像时对导航栏所做的相同。

您可以像使用不同 ios 版本的不同框架一样将框架居中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T09:34:07.433

在我看来，iOS 6 在绘制 CATextLayer 的文本内容时已经考虑了字体的行高（或其他影响字形实际垂直绘制位置的字体相关功能）。结果是在iOS 6.0 中，CATextLayer 中具有特定字体的文本不会显示在CATextLayer 框架的顶部边缘。我发现有些字体有这样的垂直填充，而另一些则没有。而在 iOS 5.0/5.1 中，文本的字形实际上显示在 CATextLayer 框架的顶部边缘。

因此，我在想的一种可能的解决方案可能是将代码中的 textLayer 对象从 CATextLayer 更改为 CALayer（或子类 CALayer），并使用 Core Text 自定义绘制内容，这样您就可以控制所有一致的内容iOS 5.0/5.1 和 6.0。****

# ruby - 在元编程中访问实例变量

> ID：12567563
> 
> 赞同：0
> 
> 时间：2012-09-24T14:54:30.563
> 
> 标签：ruby, metaprogramming

我正在尝试创建一个 mixin 模块 Parser，它将允许我执行以下操作：

```
class MyParser

 include Parser

 field :my_field, 1, 10
 field :my_other_field, 11, 15

end 

m = MyParser.new("1234567890abcde")

m.my_field # - > "1234567890"
m.my_other_field  # ->  "abcde" 
```

我是 ruby​​ 元编程的新手

这是我的问题？我需要为每个包含 Parser 的类创建一个 @fields 数组，我该怎么做

我想要一个可以将新字段添加到@fields 数组的字段类方法，如何从 class_method 访问实例变量？

如何让 MyParser.new 方法按描述工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:27:01.960

这里是。如果您无法理解代码，请告诉我，我会尽力为您澄清。

```
module Parser
  def self.included(base)
    base.extend ClassMethods
  end

  def initialize(str)
    self.class.fields.each do |name, opts|
      instance_variable_set(:"@#{name}", str[opts[:start]..opts[:stop]])
    end
  end

  module ClassMethods
    def field(name, start, stop)
      @fields ||= {}
      @fields[name.to_sym] = {:start => start-1, :stop => stop-1}
      class_eval { attr_reader name }
    end

    def fields
      @fields
    end
  end
end 
```

# ios - 以编程方式在图像上放置一个按钮

> ID：12567564
> 
> 赞同：0
> 
> 时间：2012-09-24T14:54:32.257
> 
> 标签：ios, image, button

我编码了这个：

```
UIButton *buttonPrint = [UIButton buttonWithType:UIButtonTypeCustom];
[buttonPrint setImage:[UIImage imageNamed:@"stampa.png"] forState:UIControlStateNormal];
buttonPrint.frame = CGRectMake(15, 5, 117, 41);
[buttonPrint addTarget:self action:@selector(print) forControlEvents:UIControlEventTouchUpInside];
[viewBack addSubview:buttonPrint];
//button mail
UIButton *buttonMail = [UIButton buttonWithType:UIButtonTypeCustom];
[buttonMail setImage:[UIImage imageNamed:@"mail.png"] forState:UIControlStateNormal];
buttonMail.frame = CGRectMake(0, 46, 117, 41);
[buttonMail addTarget:self action:@selector(sendEmail) forControlEvents:UIControlEventTouchUpInside];
[viewBack addSubview:buttonMail];
//button facebook
UIButton *buttonPublish = [UIButton buttonWithType:UIButtonTypeCustom];
[buttonPublish setImage:[UIImage imageNamed:@"pubblica.png"] forState:UIControlStateNormal];
buttonPublish.frame = CGRectMake(20, 90, 117, 41);
[buttonPublish addTarget:self action:@selector(publish) forControlEvents:UIControlEventTouchUpInside];
[viewBack addSubview:buttonPublish];
//button twitter
UIButton *buttonTweet = [UIButton buttonWithType:UIButtonTypeCustom];
[buttonTweet setImage:[UIImage imageNamed:@"tweet.png"] forState:UIControlStateNormal];
buttonTweet.frame = CGRectMake(4, 130, 117, 41);
[buttonTweet addTarget:self action:@selector(tweet) forControlEvents:UIControlEventTouchUpInside];
[viewBack addSubview:buttonTweet];

- (void)sendEmail {
    NSLog(@"mail clicked");
}
- (void)tweet {
    NSLog(@"tweetClicked");
}
- (void)print {
    NSLog(@"printClicked");
}
- (void)publish {
    NSLog(@"face clicked");
} 
```

但按钮不起作用......我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:59:41.543

`UIImageView`有财产`userInteractionEnabled`。默认情况下它是禁用的，因此如果您将按钮添加为图像视图的子视图，它们将不会响应。如果这是你的问题。您可以启用该标志或考虑将按钮移动到图像视图的超级视图。

希望能帮助到你。干杯。

# wxwidgets - 升级 gDEBUgger 后出现 wxWidgets 错误

> ID：12567568
> 
> 赞同：0
> 
> 时间：2012-09-24T14:54:38.740
> 
> 标签：wxwidgets

全部。今天我将我的gDEBugger（虽然我认为它不涉及gDEBugger）升级到了最新版本，但是出现了问题。当我尝试打开 gDEBugger 时，弹出一个名为“wxWidgets Debug Alert”的警报窗口，报告“....\src\common\xpmdecod.cpp(822):assert "i==colors_cnt" 在 wxXPMDecoder 中失败： :ReadData()。调用堆栈：[00]wxConsole....balabala...."，如下所示。

![在此处输入图像描述](../Images/4fe9abf89501cdb26b6a641fe849d7b0.png)

所有这些话似乎只是警告，并没有影响接下来的工作，但是我想知道为什么会出现这个问题？根本原因是什么？我对wxWidgets不熟悉，希望上面的高手能帮我解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:36:27.133

You've got a malformed XPM. As XPMs are typically embedded into the program itself, this is not supposed to happen, look at the XPMs used by `gdPerformanceCountersDialog::createAndLoadImageList()` to check this.

P.S. Next time you could just press `Ctrl+C` to copy the message box contents to clipboard as text instead of pasting in an image.

# iphone - iOS 6 - 状态保存和恢复

> ID：12567570
> 
> 赞同：11
> 
> 时间：2012-09-24T14:54:43.413
> 
> 标签：iphone, xcode, cocoa-touch, ios6, uikit-state-preservation

我已经实现了用于状态保存的 iOS 6 API，它可以工作 - 在我退出应用程序并重新启动几毫秒后，恢复的视图控制器飞入，但随后它被我在启动时显示的主视图控制器取代。

每次应用程序启动主窗口的根视图时，我都会进行设置，所以这一定是问题所在。

这是我的代码：

```
- (BOOL)application:(UIApplication *)application willFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self commonInitializationLaunching:launchOptions];
    return YES;
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self commonInitializationLaunching:launchOptions];
    return YES;
}

- (void)commonInitializationLaunching:(NSDictionary *)launchOptions
{
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{

        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.
        static NSString *const kKeychainItemName = @"OAuthGoogleReader";
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
        self.navController = [[UINavigationController alloc] initWithRootViewController:self.viewController];

        GTMOAuth2Authentication *auth;
        auth = [GTMOAuth2ViewControllerTouch authForGoogleFromKeychainForName:kKeychainItemName
                                                                     clientID:kClientID
                                                                 clientSecret:kClientSecret];

        self.window.rootViewController = self.navController;

        [self.window makeKeyAndVisible];

        BOOL isSignedIn = [auth canAuthorize];
        if (isSignedIn) {
            NSLog(@"Signed");
        }else{
            NSString *scope = @"https://www.google.com/reader/api/";

            GTMOAuth2ViewControllerTouch *viewController;
            viewController = [[GTMOAuth2ViewControllerTouch alloc] initWithScope:scope
                                                                        clientID:kClientID
                                                                    clientSecret:kClientSecret
                                                                keychainItemName:kKeychainItemName
                                                                        delegate:self
                                                                finishedSelector:@selector(viewController:finishedWithAuth:error:)];
            [self.navController pushViewController:viewController animated:YES];
            //        self.window.rootViewController = viewController;
        }
    });
} 
```

您可以在 -(void)commonInitializationLaunching:(NSDictionary *)launchOptions 中看到我正在设置窗口的根视图。我不知道在里面放什么。也许检查是否有保存状态然后加载此方法？但是怎么做？

谢谢！

以下是我按照 Rob 的建议尝试过的方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if (!self.isRestored) {
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    }
    [self commonInitializationLaunching:launchOptions];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

什么都没有`willFinishLaunching`......我也从我的`commonInitializationLaunching`方法中删除了窗口代码。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-09T21:20:49.007

故事板将为您完成大部分繁重的工作，例如恢复窗口。但是，使用代码不会恢复窗口。您将需要使用编码器保留您的根视图控制器。您的代码将如下所示：

```
NSString * const AppDelegateRootVCKey = @"AppDelegateRootVCKey";

- (void)application:(UIApplication *)application willEncodeRestorableStateWithCoder:(NSCoder *)coder {
    [coder encodeObject:self.window.rootViewController forKey:AppDelegateRootVCKey];
}

- (void)application:(UIApplication *)application didDecodeRestorableStateWithCoder:(NSCoder *)coder {

    // Grabs the preserved root view controller.
    UIViewController * vc = [coder decodeObjectForKey:AppDelegateRootVCKey];

    if (vc) {
        UIWindow * window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        window.rootViewController = vc;
        window.restorationIdentifier = NSStringFromClass([window class]);

        // The green color is just to make it obvious if our view didn't load properly.
        // It can be removed when you are finished debugging.
        window.backgroundColor = [UIColor greenColor];

        self.window = window;
    }
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    if (!self.window) {

        UIWindow *window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

        // The blue color is just to make it obvious if our view didn't load properly.
        // It can be removed when you are finished debugging.
        window.backgroundColor = [UIColor blueColor];

        UIViewController *root = // However you create your root.

        window.rootViewController = root;
        window.restorationIdentifier = NSStringFromClass([window class]);

        self.window = window;
    }

    [self commonInitializationLaunching:launchOptions];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

另一个需要注意的问题是确保您`UINavigationController`的 s 和`UITabBarController`s 具有恢复标识符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T13:32:48.010

状态恢复通常与故事板集成在一起。如果您使用情节提要，则不应创建自己的窗口、视图控制器等。您应该让情节提要为您执行此操作。正在发生的事情是情节提要正在执行所有状态恢复，然后您正在创建一个新窗口并将其放置在所有这些之上。如果是这种情况，您可能会在每次启动时创建两个 UI 副本。你只是没有注意到它。

* * *

如果您在代码中构建整个界面（不是推荐的方法，但确实有效），那么您需要在创建 UI 之前确定状态恢复是否发生。这很简单：

*   在您的`commonInitializationLaunching:`, 中，仅初始化非 UI 元素（永远不会处于状态保留状态的事物）。这是处理状态恢复期间 UI 元素可能依赖的事物的地方。您当前的代码中没有任何这些。

*   在`application:didDecodeRestorableState:`中，设置应用委托 ivar 以指示状态已恢复。

*   在`application:didFinishLaunchingWithOptions:`，运行后`commonInitializationLaunching:`，检查您的 ivar。如果未恢复状态，请创建 UI。

请记住，该`commonInitializationLaunching:`模式的存在只是为了与 iOS 5 向后兼容。如果您不需要它，那么只需将非 UI`willFinish`和 UI 放入`didFinish`（如果未恢复状态）。

# fortran - fortran 基本帮助 'd' 运算符

> ID：12567575
> 
> 赞同：1
> 
> 时间：2012-09-24T14:54:57.603
> 
> 标签：fortran, fortran90

> **可能重复：**
> [Fortran 实数表达式中的后缀“d+0”](https://stackoverflow.com/questions/913816/postfix-d0-in-fortran-real-literal-expressions)

我在 Fortran 90 中有这个代码行：

```
OVERN2 = 1.d+0/DBLE(FLOAT(NMODE2)) 
```

`NMODE2`是一个整数，`OVERN2`是一个`REAL*8`。

你能解释一下这条线是做什么的吗？部分看不懂`.d+0/`？如果您也可以将其翻译成 C 或任何其他更简单的语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:58:12.790

`1.d+0`只是科学计数法中的双精度文字，即 1.0e0 或只是 1.0。

在 C 中它将是：

```
double overn2 = 1.0 / (double)nmode2; 
```

# android - LayoutInflater attachToRoot 参数是什么意思？

> ID：12567578
> 
> 赞同：251
> 
> 时间：2012-09-24T14:55:05.773
> 
> 标签：android, android-layout, android-view, layout-inflater

该[`LayoutInflater.inflate`](http://developer.android.com/reference/android/view/LayoutInflater.html#inflate%28org.xmlpull.v1.XmlPullParser,%20android.view.ViewGroup,%20boolean%29)文档对我来说并不完全清楚该`attachToRoot`参数的用途。

> *attachToRoot*：膨胀的层次结构是否应该附加到根参数？如果为 false，则 root 仅用于为 XML 中的根视图创建正确的 LayoutParams 子类。

有人可以更详细地解释一下，特别是根视图是什么，并可能展示一个值之间的行为变化的例子`true`吗`false`？

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2017-08-22T05:49:45.267

# 现在或现在

“第三个”参数 attachToRoot 是 true 还是 false 的主要区别是这个。

> 当你把 attachToRoot

**true :**立即将子视图添加到父视图**false:**将子视图添加到父视图**NOT** **NOW**。 稍后添加。`

 ****> **以后**是什么时候？

稍后是当您使用例如`parent.addView(childView)`

**一个常见的误解**是，如果 attachToRoot 参数为 false，则子视图将不会添加到父视图。**错误**
在这两种情况下，子视图都会被添加到父视图中。这只是**时间**问题。

```
inflater.inflate(child,parent,false);
parent.addView(child); 
```

**相当于**

```
inflater.inflate(child,parent,true); 
```

**一个大**
禁忌当您不负责将子视图添加到父视图时，您永远不应该将 attachToRoot 传递为 true。
例如添加片段时

```
public View onCreateView(LayoutInflater inflater,ViewGroup parent,Bundle bundle)
  {
        super.onCreateView(inflater,parent,bundle);
        View view = inflater.inflate(R.layout.image_fragment,parent,false);
        .....
        return view;
  } 
```

如果您将第三个参数作为 true 传递，您将因为这个人而得到 IllegalStateException。

```
getSupportFragmentManager()
      .beginTransaction()
      .add(parent, childFragment)
      .commit(); 
```

由于您已经错误地在 onCreateView() 中添加了子片段。调用 add 会告诉你子视图已经添加到父视图**IllegalStateException**。
这里你不负责添加childView，FragmentManager负责。所以在这种情况下总是传递 false 。

**注意：**我还读到，如果 attachToRoot 为 false，则 parentView 将不会获得 childView touchEvents。但是我还没有测试过。

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2012-09-24T14:58:55.200

如果设置为 true，那么当您的布局膨胀时，它将自动添加到第二个参数中指定的 ViewGroup 的视图层次结构中作为子级。例如，如果根参数是 a`LinearLayout`那么您的膨胀视图将自动添加为该视图的子视图。

如果它设置为 false 那么您的布局将被膨胀但不会附加到任何其他布局（因此它不会被绘制、接收触摸事件等）。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-01-07T19:12:19.263

回复中似乎有很多文字但没有代码，这就是为什么我决定用一个代码示例来重提这个老问题，在人们提到的几个回复中：

> 如果设置为 true，那么当您的布局膨胀时，它将自动添加到第二个参数中指定的 ViewGroup 的视图层次结构中作为子级。

这在代码中的实际含义（大多数程序员都理解）是：

```
public class MyCustomLayout extends LinearLayout {
    public MyCustomLayout(Context context) {
        super(context);
        // Inflate the view from the layout resource and pass it as child of mine (Notice I'm a LinearLayout class).

        LayoutInflater.from(context).inflate(R.layout.child_view, this, true);
    }
} 
```

请注意，之前的代码将布局添加`R.layout.child_view`为子级，`MyCustomLayout`因为`attachToRoot`param is`true`并以与我将以编程方式使用的方式完全相同的方式分配父级的布局参数`addView`，或者就像我在 xml 中执行此操作一样：

> ```
> <LinearLayout>
>    <View.../>
>    ...
> </LinearLayout> 
> ```

以下代码解释了传递`attachRoot`as时的场景`false`：

```
LinearLayout linearLayout = new LinearLayout(context);
linearLayout.setLayoutParams(new LayoutParams(
    LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
linearLayout.setOrientation(LinearLayout.VERTICAL);
    // Create a stand-alone view
View myView = LayoutInflater.from(context)
    .inflate(R.layout.ownRootView, null, false);
linearLayout.addView(myView); 
```

在前面的代码中，您指定您想`myView`成为它自己的根对象并且不将其附加到任何父对象，后来我们将其添加为一部分，`LinearLayout`但有一段时间它是一个独立（无父）视图。

片段也会发生同样的事情，您可以将它们添加到已经存在的组中并成为其中的一部分，或者只是传递参数：

> inflater.inflate(R.layout.fragment, null, false);

指定它将是它自己的根。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2012-09-24T15:47:41.600

文档和前两个答案应该足够了，只是我的一些想法。

该`inflate`方法用于扩充布局文件。对于那些膨胀的布局，您必须能够将它们直接附加到父`ViewGroup`级，或者只是从该布局文件膨胀视图层次结构并在正常视图层次结构之外使用它。

在第一种情况下，`attachToRoot`必须将参数设置为`true`（或者非常简单地使用`inflate`采用布局文件和父根`ViewGroup`（非`null`）的方法）。在这种情况下，`View`返回的只是`ViewGroup`在方法中传递的，`ViewGroup`膨胀的视图层次结构将被添加到其中。

对于第二个选项，返回`View`的是布局文件的根`ViewGroup`。如果您还记得我们在[`include-merge`配对问题](https://stackoverflow.com/q/12518446/403455)`merge`中的最后讨论，这是' 限制的原因之一（当`merge`以 root 身份扩展布局文件时，您必须提供父级并且`attachedToRoot`必须设置为`true`）。如果您有一个带有根 a`merge`标记的布局文件并`attachedToRoot`设置为，`false`那么该`inflate`方法将没有任何返回，因为`merge`没有等效项。此外，正如文档所述，设置为的`inflate`版本很重要，因为您可以使用正确的视图层次结构创建`attachToRoot``false``LayoutParams`从父母。这在某些情况下很重要，最值得注意的是`AdapterView`的子类 的子类`ViewGroup`，其`addView()`方法集不受支持。我敢肯定你记得在方法中使用过这一行`getView()`：

```
convertView = inflater.inflate(R.layout.row_layout, parent, false); 
```

此行确保膨胀`R.layout.row_layout`文件在其 root 上具有正确`LayoutParams`的子类集。如果您不这样做，如果根目录是. 也有一些特殊和重要的，你应该确保其中的观点是正确的。`AdapterView``ViewGroup``RelativeLayout``TableLayout/TableRow``LayoutParams``LayoutParams`

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2014-03-24T16:27:47.877

`attachToRoot`我自己也对in`inflate`方法的真正目的感到困惑。经过一番UI研究，我终于得到了答案：

**家长：**

在这种情况下，是围绕要使用 findViewById() 膨胀的视图对象的小部件/布局。

**附加到根：**

将视图附加到它们的父视图（包括它们在父层次结构中），因此**视图接收到的任何触摸事件也将被转移到父视图。现在取决于父母是想娱乐这些事件还是忽略它们。**如果设置为 false，它们不会作为父级的直接子级添加，并且父级不会从视图中接收任何触摸事件。

希望这能消除混乱

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2017-10-10T17:52:27.393

我写了这个答案，因为即使在浏览了几个 StackOverflow 页面之后，我也无法清楚地理解 attachToRoot 的含义。下面是 LayoutInflater 类中的 inflate() 方法。

```
View inflate (int resource, ViewGroup root, boolean attachToRoot) 
```

看看我创建的*activity_main.xml*文件、*button.xml*布局和*MainActivity.java*文件。

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

</LinearLayout> 
```

按钮.xml

```
<Button xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

MainActivity.java

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LayoutInflater inflater = getLayoutInflater();
    LinearLayout root = (LinearLayout) findViewById(R.id.root);
    View view = inflater.inflate(R.layout.button, root, false);
} 
```

当我们运行代码时，我们不会在布局中看到按钮。这是因为我们的按钮布局没有添加到主活动布局中，因为 attachToRoot 设置为 false。

LinearLayout 有一个*addView(View view)*方法，可用于将视图添加到 LinearLayout。这会将按钮布局添加到主活动布局中，并在您运行代码时使按钮可见。

```
root.addView(view); 
```

让我们删除上一行，看看当我们将 attachToRoot 设置为 true 时会发生什么。

```
View view = inflater.inflate(R.layout.button, root, true); 
```

我们再次看到按钮布局是可见的。这是因为 attachToRoot 直接将膨胀的布局附加到指定的父级。在这种情况下是根 LinearLayout。在这里，我们不必像之前使用 addView(View view) 方法那样手动添加视图。

**为什么在将片段的 attachToRoot 设置为 true 时，人们会收到 IllegalStateException。**

这是因为对于片段，您已经指定了在活动文件中放置片段布局的位置。

```
FragmentManager fragmentManager = getSupportFragmentManager();
fragmentManager.beginTransaction()
    .add(R.id.root, fragment)
    .commit(); 
```

*add(int parent, Fragment fragment)*将具有其布局的片段添加到父布局。如果我们将 attachToRoot 设置为 true，您将得到 IllegalStateException: The specified child has a parent。由于片段布局已经在 add() 方法中添加到父布局中。

**当你膨胀 Fragments 时，你应该总是为 attachToRoot 传递 false。添加、删除和替换 Fragment 是 FragmentManager 的工作。**

回到我的例子。如果我们两者都做怎么办。

```
View view = inflater.inflate(R.layout.button, root, true);
root.addView(view); 
```

在第一行中，LayoutInflater 将按钮布局附加到根布局并返回一个包含相同按钮布局的 View 对象。在第二行中，我们将相同的 View 对象添加到父根布局。这导致了我们在 Fragments 中看到的相同的 IllegalStateException（指定的孩子已经有一个父母）。

请记住，还有另一个重载的 inflate() 方法，默认情况下将 attachToRoot 设置为 true。

```
View inflate (int resource, ViewGroup root) 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2016-02-23T17:01:52.320

由于 inflate() 方法的文档，这个主题有很多混淆。

一般来说，如果attachToRoot设置为true，那么第一个参数中指定的布局文件会在那个时刻被膨胀并附加到第二个参数中指定的ViewGroup。当 attachToRoot 为 false 时，第一个参数中的布局文件会膨胀并作为视图返回，并且任何视图附件都会在其他时间发生。

除非您看到很多示例，否则这可能意义不大。在 Fragment 的 onCreateView 方法中调用 LayoutInflater.inflate() 时，您需要为 attachToRoot 传入 false，因为与该 Fragment 关联的 Activity 实际上负责添加该 Fragment 的视图。如果您在稍后的某个时间点手动膨胀并将视图添加到另一个视图，例如使用 addView() 方法，您将需要为 attachToRoot 传递 false，因为附件会在稍后的时间点出现。

您可以在我写的关于这个主题的博客文章中阅读有关对话框和自定义视图的其他几个独特示例。

[https://www.bignerdranch.com/blog/understanding-androids-layoutinflater-inflate/](https://www.bignerdranch.com/blog/understanding-androids-layoutinflater-inflate/)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-12-21T05:59:05.863

`attachToRoot`设置为 true 意味着`inflatedView`将被添加到父视图的层次结构中。因此，用户可能会“看到”并感知触摸事件（或任何其他 UI 操作）。否则，它只是被创建，没有被添加到任何视图层次结构中，因此无法看到或处理触摸事件。

对于刚接触 Android 的 iOS 开发人员，`attachToRoot`设置为 true 意味着您调用此方法：

```
[parent addSubview:inflatedView]; 
```

如果更进一步，您可能会问：如果我设置`attachToRoot`为 ，为什么要传递父视图`false`？这是因为您的 XML 树中的根元素需要父视图来计算一些 LayoutParams（如匹配父级）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-24T14:58:42.970

当您定义父级时，attachToRoot 确定您是否希望充气器实际将其附加到父级。在某些情况下，这会导致问题，例如在 ListAdapter 中它会导致异常，因为列表尝试将视图添加到列表中，但它说它已经附加。在其他情况下，您只是自己膨胀视图以添加到活动中，它可能很方便并为您节省一行代码。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-26T05:50:57.857

**attachToRoot 设置为真：**

> 如果 attachToRoot 设置为 true，那么第一个参数中指定的布局文件会被膨胀并附加到第二个参数中指定的 ViewGroup。

假设我们在 XML 布局文件中指定了一个按钮，其布局宽度和布局高度设置为 match_parent。

```
<Button xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:id="@+id/custom_button">
</Button> 
```

我们现在想以编程方式将此 Button 添加到 Fragment 或 Activity 内的 LinearLayout。如果我们的LinearLayout已经是一个成员变量，mLinearLayout，我们可以简单地添加如下按钮：

```
inflater.inflate(R.layout.custom_button, mLinearLayout, true); 
```

我们指定要从其布局资源文件中为 Button 充气；然后我们告诉 LayoutInflater 我们想将它附加到 mLLinearLayout。我们的布局参数得到尊重，因为我们知道 Button 被添加到了 LinearLayout。Button 的布局参数类型应该是 LinearLayout.LayoutParams。

**attachToRoot 设置为 false（不需要使用 false）**

> 如果 attachToRoot 设置为 false，则第一个参数中指定的布局文件会被扩展，并且**不会**附加到第二个参数中指定的 ViewGroup，但扩展后的**视图会获取父级的 LayoutParams**，从而使该视图能够正确地适应父级。

让我们看看何时要将 attachToRoot 设置为 false。在这种情况下，inflate()的第一个参数中指定的View此时并没有附加到第二个参数中的ViewGroup。

回想一下我们之前的 Button 示例，我们希望将一个自定义 Button 从布局文件附加到 mLinearLayout。我们仍然可以通过为 attachToRoot 传递 false 来将我们的 Button 附加到 mLinearLayout——我们只是在之后手动添加它。

```
Button button = (Button) inflater.inflate(R.layout.custom_button,    mLinearLayout, false);
mLinearLayout.addView(button); 
```

这两行代码等价于我们之前在一行代码中为 attachToRoot 传入 true 时所写的内容。通过传入 false，我们说我们现在还不想将 View 附加到根 ViewGroup。我们说它会在其他时间点发生。在这个例子中，另一个时间点只是在通货膨胀下面使用的 addView() 方法。

当我们手动将 View 添加到 ViewGroup 时，错误的 attachToRoot 示例需要更多的工作。

**attachToRoot 设置为false（需要false）**

在onCreateView() 中膨胀和返回Fragment 的View 时，一定要为attachToRoot 传入false。如果你传入 true，你会得到一个 IllegalStateException 因为指定的孩子已经有一个父母。您应该已经指定了 Fragment 视图将放回 Activity 中的位置。添加、删除和替换 Fragment 是 FragmentManager 的工作。

```
FragmentManager fragmentManager = getSupportFragmentManager();
Fragment fragment =  fragmentManager.findFragmentById(R.id.root_viewGroup);

if (fragment == null) {
fragment = new MainFragment();
fragmentManager.beginTransaction()
    .add(R.id.root_viewGroup, fragment)
    .commit();
} 
```

将在 Activity 中保存 Fragment 的 root_viewGroup 容器是在 Fragment 的 onCreateView() 中提供给您的 ViewGroup 参数。它也是您传递给 LayoutInflater.inflate() 的 ViewGroup。但是，FragmentManager 将处理将您的 Fragment 的 View 附加到此 ViewGroup。您不想将其附加两次。将 attachToRoot 设置为 false。

```
public View onCreateView(LayoutInflater inflater, ViewGroup  parentViewGroup, Bundle savedInstanceState) {
View view = inflater.inflate(R.layout.fragment_layout,     parentViewGroup, false);
…
return view;
} 
```

如果我们不想在 onCreateView() 中附加 Fragment 的父 ViewGroup，为什么首先要给它呢？为什么 inflate() 方法请求根 ViewGroup？

事实证明，即使我们没有立即将新膨胀的 View 添加到其父 ViewGroup 中，我们仍应使用父 View 的 LayoutParams 以便新 View 在最终附加时确定其大小和位置。

链接：[https ://youtu.be/1Y0LlmTCOkM?t=409](https://youtu.be/1Y0LlmTCOkM?t=409)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-04T09:48:43.727

只是分享我在研究这个主题时遇到的一些观点，

除了接受的答案之外，我还想提出一些可能会有所帮助的观点。

因此，当我将***attachToRoot***用作 true 时，返回的视图是***ViewGroup***类型，即作为***inflate(layoutResource,ViewGroup,attachToRoot)***方法的参数传递的父视图组，不是传递的布局类型，而是在***attachToRoot***上如果为 false，我们将获得该 layoutResource 的根***ViewGroup***的函数返回类型。

让我用一个例子来解释：

如果我们有一个***LinearLayout***作为***根***布局，然后我们想通过***inflate***函数在其中添加***TextView 。***

 *然后使用***attachToRoot***作为***真正***的膨胀函数返回一个线性布局类型***的******视图***

 *在使用***attachToRoot***作为***假***膨胀函数时，返回一个***TextView***类型的***视图***

 *希望这个发现会有所帮助......

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-02-28T08:14:21.830

例如，我们有一个`ImageView`、一个`LinearLayout`和一个`RelativeLayout`。LinearLayout 是RelativeLayout 的子级。视图层次结构将是。

```
RelativeLayout
           ------->LinearLayout 
```

我们有一个单独的 ImageView 布局文件

**image_view_layout.xml**

**附加到根：**

```
//here container is the LinearLayout

    View v = Inflater.Inflate(R.layout.image_view_layout,container,true); 
```

1.  这里 v 包含容器布局的引用，即 LinearLayout。如果要设置`setImageResource(R.drawable.np);`ImageView 之类的参数，则必须通过父级的引用找到它，即`view.findById()`
2.  v 的父级将是 FrameLayout。
3.  LayoutParams 将属于 FrameLayout。

**不附加到根：**

```
//here container is the LinearLayout
    View v = Inflater.Inflate(R.layout.image_view_layout,container,false); 
```

1.  这里 v 包含无引用容器布局，但直接引用膨胀的 ImageView，因此您可以设置其参数 like`view.setImageResource(R.drawable.np);`而无需引用 like `findViewById`。但是指定了容器，以便 ImageView 获取容器的 LayoutParams，因此您可以说容器的引用仅用于 LayoutParams 没有别的。
2.  所以在特殊情况下 Parent 将为空。
3.  LayoutParams 将是 LinearLayout。*******

# jasper-reports - Jasper 报告文本字段限制

> ID：12567579
> 
> 赞同：1
> 
> 时间：2012-09-24T14:55:06.863
> 
> 标签：jasper-reports

我有一个**.jrxml**文件，其中有一个文本字段，其宽度已设置为可能的最大值，并且我设置了“详细信息溢出时打印”和“使用溢出标志拉伸”。

但是，当从集合源生成 pdf 格式的报告时，文本字段会延伸到 3 行，并且对于第一个条目和下一个条目，它会延伸到 5 行。但是我在集合对象中的数据是 7 行。虽然为 .odt 格式生成相同的文本字段，但两个条目的文本字段都延伸到 7 行。

我在这里面临的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:47:47.943

解决了这个问题。我曾使用 Calibri 作为文本字段的字体。将其更改为 Arial 并延伸为全文。

[http://jasperforge.org/node/531750](http://jasperforge.org/node/531750)

参考了这个链接。它有一条评论提到某些字体在导出为 pdf 时会产生问题。

# windows - 如何使用powershell在远程机器上添加windows防火墙端口异常？

> ID：12567580
> 
> 赞同：1
> 
> 时间：2012-09-24T14:55:11.403
> 
> 标签：windows, powershell, windows-firewall

我正在编写一个脚本来使用 powershell 在 Windows 机器上静默安装程序。但是，我遇到了一个问题，即程序没有正确设置机器的 Windows 防火墙设置。他们是远程执行powershell脚本以添加防火墙端口异常的一种方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:30:09.130

您需要在远程计算机上启用远程处理 ( `Enable-PSRemoting`)。输入远程会话 ( `Enter-PSSession -ComputerName remotecomputername`) 然后您可以使用本机命令行[netsh](http://technet.microsoft.com/en-us/library/cc771046%28WS.10%29.aspx)启用/禁用 Windows 防火墙，使用：

```
netsh firewall set opmode
                   [ mode = ] ENABLE|DISABLE
                   [ [ exceptions = ] ENABLE|DISABLE
                   [ profile = ] CURRENT|DOMAIN|STANDARD|ALL
                   [ interface = ] name ] 
```

# facebook - 如何使用 FQL 检索邮件附件？

> ID：12567588
> 
> 赞同：1
> 
> 时间：2012-09-24T14:55:56.220
> 
> 标签：facebook, message, facebook-fql, messaging

我知道根据[http://developers.facebook.com/bugs/311146672312127](http://developers.facebook.com/bugs/311146672312127)使用 Open Graph API 检索附件是不可能的。FQL 呢？

```
SELECT attachment FROM message
WHERE thread_id = xxxxxxxxxxxxxxx AND viewer_id=xxxxxxxxxx LIMIT 925,1 
```

给我：

```
{
  "data": [
    {
      "attachment": {
        "media": [
        ], 
        "name": "", 
        "caption": "", 
        "description": "", 
        "properties": [
        ], 
        "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yD/r/aS8ecmYRys0.gif", 
        "fb_object_type": "", 
        "fb_object_id": "", 
        "tagged_ids": [
        ]
      }
    }
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T12:37:47.767

它似乎还不受支持。你可以使用这个：

[在线程中查看附件](https://stackoverflow.com/questions/9192430/view-attachments-in-threads)

我猜它会在统一消息中得到支持。

# android - 适用于 Android 的 Mono：我的 ListView 变大了，我的按钮从屏幕上消失了

> ID：12567589
> 
> 赞同：1
> 
> 时间：2012-09-24T14:55:59.300
> 
> 标签：android, mono

我在一个 axml 上有一些组件：

*   a) 名为“Titles”的第一个 listView
*   b) 名为“Data”的第二个 listView
*   c) 带有 3 个按钮的 TableLayout

我想拥有

*   a) ListView "Titoli" 始终在屏幕顶部可见（并且会发生这种情况）
*   b）ListView“Lista”总是在“Titoli”下立即可见（这种情况发生了）
*   c) TableLayout tableLayout1 始终在屏幕底部可见

这是我的问题：如果 ListView Lista 随着很多项目的增长，TableLayout 就会离开屏幕。

有人可以帮忙吗？我真的不明白如何将 TableLayout 锁定在屏幕底部并避免它消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:10:59.010

ListView 可以有页脚/页眉视图，并且这些视图将始终在屏幕上可见。可以使用相应的方法 addHeaderView/addFooterView 添加这些视图。

我不知道您的应用程序逻辑，但我认为您不需要 2 个 listViews（考虑到名称）。请参阅 APIDemos：ExpandableList 或 List->ListAdapterCollapseble。

我希望它有帮助:)

# windows-8 - 如何在 Windows 8 中启用开始菜单？

> ID：12567590
> 
> 赞同：2
> 
> 时间：2012-09-24T14:56:01.467
> 
> 标签：windows-8, startmenu

任何人都可以给我一些技巧或提供一些方法，通过它我可以`Start Menu`在 Windows 8 中启用。

我发现没有`Start Menu`.

我没有任何问题，如果我需要在 .Net 中编写自定义代码来启用它。

![开始菜单](../Images/535a218493b73bc44ad4c3435a15a737.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T14:59:21.403

有一个网页提供了一些不错的 Windows 功能和技巧，称为 neowin。

在此页面上，我找到了这篇文章： http: [//www.neowin.net/news/windows-8-how-to-re-enable-the-classic-start-menu](http://www.neowin.net/news/windows-8-how-to-re-enable-the-classic-start-menu)

我希望这是你正在寻找的:)

编辑：我也有 Windows 8，我使用这个技巧没有问题:)

编辑 2： **这不适用于构建 9200 或更高版本！**我刚得到新版本，我试图执行这个技巧，但重启后我的 Windows 告诉我“刷新”或“重置”我的操作系统。刷新我的 win 8 后，我所有的应用程序和程序都被删除了。

问候，

帕多

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T15:00:55.270

You need to use the windows key (bottom left corner of your keyboard) to get the start menu. Hope this helps. Or you can set your theme to an earlier version of windows that has the start menu.

# c++ - Windows 地图文件系统

> ID：12567600
> 
> 赞同：4
> 
> 时间：2012-09-24T14:56:40.000
> 
> 标签：c++, winapi, map, filesystems

Windows 资源管理器可以将驱动器号与文件系统或文件系统中的目录相关联。如何从 Windows 7 和 Vista 下的 C++ 程序执行此操作？我对 Visual Studio 文档和 Web 的搜索并没有出现 API 调用来执行此操作。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:06:42.083

该[`SetVolumeMountPoint`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365561%28v=vs.85%29.aspx)功能似乎可以满足您的需求。

您会在 MSDN（作为 Windows 开发人员最好的朋友，有时称为“Microsoft Developer Network”或“Windows Dev Center”）上找到相当多的[相关功能（磁盘管理、卷管理等）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364407%28v=vs.85%29.aspx)

# ruby - 在 Ruby 中输出 json

> ID：12567607
> 
> 赞同：1
> 
> 时间：2012-09-24T14:57:00.793
> 
> 标签：ruby, json

> **可能重复：**
> [在 ruby​​ 中解析 JSON 字符串](https://stackoverflow.com/questions/5410682/parsing-a-json-string-in-ruby)

我已经设法通过 JSON gem 和以下代码将一堆 json 放入 ruby​​ 中的变量并打印出来：

```
require 'open-uri'
require 'json'

result = JSON.parse(open("https://api.pinboard.in/v1/posts/get?auth_token=username:token&tag=fashion&meta=yes&format=json").read)
puts result 
```

它返回的是这样的：

```
{
  "date"=>"2012-09-24T03:35:38Z",
  "user"=>"username",
  "posts"=>[{
      "href"=>"http://example.com/example.jpg",
      "description"=>"this is the description",
      "extended"=>"A full, longer description.",
      "meta"=>"d6f967c9adfbe1eb3763fddbcd993d1b",
      "hash"=>"a46e0e7202d9d56c516a472d8be70d9e",
      "time"=>"2012-09-24T03:35:38Z",
      "shared"=>"yes",
      "toread"=>"no",
      "tags"=>"fashion"
    }
]} 
```

（为了清楚起见，这里的行距是我的）

我的问题是，我*不知道*如何访问这些键和值！我已经用谷歌搜索过，但我对 ruby​​ 真的很陌生，而且我在弄清楚我应该做什么时遇到了很多麻烦，更不用说代码来做这件事了*。*帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:01:13.553

`result["date"]` - accesses the date key on the json.

In general `result[<key>]` accesses the value stored in key.

If you try to access a key that does not exists you will get nil as a result.

Edit: In order to traverse the key/value pairs you can:

```
result.each do |key, value|
   puts "result[#{key}] = #{value}"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:00:24.723

Do stuff like:

```
p result["date"]
p result["posts"].size 
```

Look up the documentation for the ruby Array and Hash classes.

# android - 无法从 Android 中的 mongodb 服务器获取文档列表

> ID：12567610
> 
> 赞同：1
> 
> 时间：2012-09-24T14:57:09.340
> 
> 标签：android, json, mongodb, gson, httpresponse

我正在使用 mongodb 作为我的 android 应用程序的云服务器。Mongodb java 库在 Android 中不起作用，所以我使用的是 rest api。我编写了以下代码来获取 json 响应并将它们转换为 MyClass 但它给出了 IllegalStateException

```
 java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_Object at line 1 column 35 
```

代码 ：

```
 try {  HttpGet mRequest = new HttpGet("https://api.mongolab.com/api/1/databases/mydb/collections/mycol?apiKey=myKey");    

                     DefaultHttpClient client = new DefaultHttpClient();
   try {
              HttpResponse response = client.execute(mRequest);

              InputStream source = response.getEntity().getContent();

              Reader reader = new InputStreamReader(source);

              Gson gson = new Gson();

          Type typeOfCollectionOfMyObject = new TypeToken<Collection<MYObject>>(){}.getType();

          quizDBObjectList = gson.fromJson(reader, typeOfCollectionOfMyObject);

          } catch (IOException e) {
          mRequest.abort();
          } 
```

这不是全部代码，但我在这个块中遇到了异常。有帮助吗？

MYObject 的定义是

```
 public class MYObject { 

                   private long index ;
                   private String question;
                   private String answer;
                   private String optionA;
                   private String optionB;
                   private String optionC;
                   private String optionD;
                   private String createdAt;
                   private String active;
                //getters and setters of data members
      } 
```

我得到的回应是：

```
 [ { "_id" : { "$oid" : "505ab996aded66f4c1ccc7f2"} , "index" : 0 , "question" : "some text ?" , "optiona" : "optionA" , "optionb" : "optionB" , "optionc" : "OptionC" , "optiond" : "optionD" , "answer" : "answer" , "created_at" : { "$date" : "2012-09-20T06:37:04.306Z"} , "Active" : "1"} , { "_id" : { "$oid" : "505ab997aded66f4c1ccc7f3"} , "index" : 1 , ..../objects like that] 
```

显然我不知道服务器会响应 _id 的事实。你能给我正确的类定义来将此 json 对象转换为我的自定义类吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:52:41.937

> java.lang.IllegalStateException：应为 BEGIN_ARRAY，但在第 1 行第 35 列是 BEGIN_Object

这说明了一切，应该有某个地方`[`而不是`{`. 也许你得到一个对象而不是一个数组？

以上可能有帮助或没有帮助。为了获得更好的答案，需要以下内容：

*   的定义`MYObject`
*   准确解析的字符串

您可以通过使用 Guava读取`reader`到 a或更简单的来获取解析的字符串。`StringBuider``CharStreams.toString(reader)`

# eclipse - 如何强制eclipse使用java 1.5版本

> ID：12567618
> 
> 赞同：1
> 
> 时间：2012-09-24T14:57:32.960
> 
> 标签：eclipse, maven

我应该如何强制 eclipse 为项目使用 java 1.5 版本。我的系统上有 jdk 1.6。

我做了这些：项目属性-> java编译器->启用项目特定设置（选中），使用...的合规性（选中）。我试图取消选中它并检查使用默认合规性设置。我还尝试将其添加到我的 POM 中。

```
 <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
            <source>1.5</source>
            <target>1.5</target>
            <verbose>false</verbose>
            </configuration>
        </plugin> 
```

但是eclipse仍然采用java 1.6版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:11:30.197

确保您的 JAVA_HOME 环境变量设置为 JDK 1.5 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:20:19.143

有两个对应的 Eclipse 设置，在这里很有用：

*   使用的*JRE 系统库*：打开项目属性，选择 Java Build Path 页面，转到 Libraries 选项卡，然后选择 JRE 系统库条目，编辑它，在那里您可以选择 Java 1.5 执行环境（这也将使用已安装的相同 Java 1.6 环境）。
*   您可能还需要配置选定的*Java 编译器*：在项目属性中打开 Java 编译器页面，并明确设置符合 Java 1.5。

如果您需要更全局地进行设置，您可以在 Java 类别下的工作区首选项中查找这些首选项。

# javascript - 参数列表后缺少“)”

> ID：12567620
> 
> 赞同：0
> 
> 时间：2012-09-24T14:57:38.473
> 
> 标签：javascript, arguments

我似乎无法找到解决此问题的方法：

```
 missing ) after argument list
[Break On This Error]   

}}); 
```

这是被引用的文件：

```
jQuery(document).ready(function() {
                    for (i=0;i<40;i++) {
            var w = 14 * (parseInt(Math.random() * 3) + 1) - 1,
                h = 28 * (parseInt(Math.random() * 3) + 1) - 1;
        jQuery('').width(w).height(h).appendTo('article');
        }

            jQuery('#content').freetile();
             selector: 'article';
            }); 
```

我尝试在最后添加一个荣誉，但它没有用。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T15:00:10.370

`selector: 'article';`应该做什么？*看起来*您可能希望在初始化时将其指定为选项`freetile`：

```
jQuery("#content").freetile({selector: 'article'}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T14:59:37.597

您传递了一个格式错误的对象，更改为；

```
$('#content').freetile({ 
  selector: 'article' 
}); 
```

# iphone - 来自 XCode iphone Simulator 中 localhost 的 JSON 响应

> ID：12567626
> 
> 赞同：-1
> 
> 时间：2012-09-24T14:58:02.760
> 
> 标签：iphone, objective-c, json, ios-simulator, asihttprequest

我正在尝试使用 localhost Web 服务在 iPhone 模拟器中接收 JSON 响应。

我打开了网络共享并将名为“readmain.php”的php文件放在/Library/WebServer/Documents

当我在 Chrome 中编写“http://localhost/readmain.php”时，我看到结果完美显示。

但是当我尝试在我的应用程序中接收响应时，会收到一个错误。

我正在使用 ASIHTTPRequest

这是代码：

```
NSURL *url = [NSString stringWithFormat:@"%@%@", HJServerAddress, @"readmain.php"];
DLog(@"request URL = %@", [url description])
self.httpRequest = [ASIHTTPRequest requestWithURL:url];
self.httpRequest.delegate = self;
[self.httpRequest startAsynchronous];
[self.activityIndicator startAnimating]; 
```

其中 HJServerAddress 是：#define HJServerAddress @"http://localhost/"

每当执行上述代码时，我都会从失败中得到响应：

```
 - (void)requestFailed:(ASIHTTPRequest *)request
   {
       DLog(@"error: %@", [request.error description])
       ULog(@"Failed to load data")
   } 
```

在日志中我得到：

```
2012-09-24 17:44:06.153 _APPNAME_[1798:f803] -[HJHomeViewController fetchAddsJson] [Line 122] request URL = "http://localhost/readmain.php"
2012-09-24 17:44:46.457 _APPNAME_[1798:f803] -[HJHomeViewController requestFailed:] [Line 478] error: Error Domain=ASIHTTPRequestErrorDomain Code=10 "NSInvalidArgumentException" UserInfo=0x69656e0 {NSLocalizedFailureReason=-[__NSCFString absoluteURL]: unrecognized selector sent to instance 0xb650510, NSUnderlyingError=0x6960460 "The operation couldn’t be completed. (ASIHTTPRequestErrorDomain error 10.)", NSLocalizedDescription=NSInvalidArgumentException} 
```

我还尝试使用我的 MAC 的 IP 地址而不是使用“localhost”。

我尝试从 iOS 模拟器的 Safari 访问该文件，并成功收到响应。

我无法在我的开发不足的应用程序中收到响应。我在我的代码中做错了吗？还是有更多的事情要做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:00:03.193

You assign NSString object to NSURL.

# magento - Magento中订单更新时如何获取状态？

> ID：12567630
> 
> 赞同：1
> 
> 时间：2012-09-24T14:57:27.223
> 
> 标签：magento

我需要设置一个函数/触发器，它将响应从 Magento 发送到另一个站点（我将定义的 URL，例如[http://mysite.com/orders/:orderid/cancelled](http://mysite.com/orders/:orderid/cancelled)） - 当订单状态更新或创建贷项凭证。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:15:45.823

您检查过 Magento 事件吗？我认为**catalog_product_status_update**和**sales_creditmemo_item_save_after**听起来很有希望？

问候

# .net - 来自 ashx 处理程序的 HTML 输出

> ID：12567632
> 
> 赞同：0
> 
> 时间：2012-09-24T14:58:16.177
> 
> 标签：.net, ashx

尝试在我的处理程序中编写 HTML 输出时，出现错误。我应该如何生成输出？也许您不应该能够从这里写入输出，而是将输出发送到 aspx 页面？

```
 public void ProcessRequest(HttpContext context)
    {
        context.Response.Write("test");     

    } 
```

我收到“语法错误。意外的令牌。”

# php - 使用 gdlib 复制透明 PNG

> ID：12567633
> 
> 赞同：3
> 
> 时间：2012-09-24T14:58:17.050
> 
> 标签：php, tinymce, png, transparency, gdlib

我目前在使用 TinyMCE 的存档插件时遇到问题。上传图像时，它会为它们创建缩略图。但是对于透明PNG的背景，是黑色的。我想，好吧，要添加功能以保持透明度，但毕竟它不起作用。我还阅读了有关 stackoverflow 的所有 PHP 文档和问题/答案，但它们对我没有帮助。

我已将问题简化为几行代码。这并没有真正创建缩略图，但有同样的问题：所有具有透明背景的 PNG 之后都有黑色背景：

```
$thumb = imagecreatefrompng($originalPath);     
imagesavealpha($thumb, true);
imagealphablending($thumb, false);
imagepng($thumb, $thumbPath, 0); 
```

当我创建一个新的空图像并用透明填充它时它会起作用。但是当从任何现有的透明 PNG 创建它时，它会失败。我想念什么吗？

如果这不能快速解决，我将扩展存档插件以可选地使用 ImageMagick ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-18T06:23:00.460

我上周也遇到了这个问题。经过几个小时的搜索和研究，我认为这里有什么可以解释问题的。

首先，PNG 有几种格式类型：基于调色板的 png 和真彩色 png。此外，有 3 种方法可以实现具有透明度的 PNG。

1.  带有透明度标志的基于调色板的 PNG
2.  带有透明度标志的真彩色 (RGB) PNG
3.  带 alpha 通道的真彩色 PNG（RGBA 格式）

这就是为什么有时您的代码可以正常工作而有时您的代码不能正常工作的原因。[PNG中的透明概念一](http://jmsliu.com/2661/transparency-concept-in-png.html)文详细解释了这三种类型的不同之处。

我试过你的代码。当您的源 png 图像是带有 alpha 通道的真彩色 PNG 时，它将完美地工作。否则，输出图像的透明度部分将为黑色。

这是两个png图像。底部有黑色区域的是类型 2 格式。另一种是RGBA格式。

![在此处输入图像描述](../Images/58dbd4b318a8876651e652551c69a333.png) ![在此处输入图像描述](../Images/93ff419cf3cb43a025519270f3adb968.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:40:27.820

别担心 Andreas，你的脚本运行良好，我刚刚测试过。

我想你可以检查你正在使用的 PHP 的 GD 版本。我有 GD 版本 2。

# f# - 如何用索引做 Array.tryFind？

> ID：12567634
> 
> 赞同：2
> 
> 时间：2012-09-24T14:58:18.500
> 
> 标签：f#

我想做的一个简单的例子是

```
 Array.tryFind (fun elem index -> elem + index = 42) array1  //not valid 
```

由于没有`break`or `continue`，我发现即使在 for 循环中也很难手动完成

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:37:05.937

Similar with @gradbot's answer, you could define a module function along the line of `mapi`, `iteri` which works on arrays, lists and sequences.

```
module Seq =
    let tryFindi fn seq =
        seq |> Seq.mapi (fun i x -> i, x)
            |> Seq.tryFind (fun (i, x) -> fn i x)
            |> Option.map snd

// Usage
let res = [|1;1;40;4;2|] |> Seq.tryFindi (fun i el -> i + el = 42) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T16:54:41.260

每当我发现内置函数中缺少一些我需要的东西时，我都会添加它！我总是有一个名为`Helpers.fs`我保存所有这些文件的文件。只要确保给它起一个好名字。

```
module Array =
    let tryFindWithIndex fn (array : _[]) =
        let rec find index =
            if index < array.Length then
                if fn array.[index] index then
                    Some(array.[index])
                else
                    find (index + 1)
            else
                None
        find 0 
```

示例使用。

```
[|1;1;40;4;2|]
|> Array.tryFindWithIndex (fun elem index -> elem + index = 42)
|> printf "%A" 
```

输出

```
Some 40 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T15:02:31.857

像这样的东西（免责声明：在浏览器中输入 - 可能包含错误）

```
array |> Seq.mapi (fun i el -> i + el) |> Seq.tryFind ((=)42) 
```

# uitableview - 自定义单元格中的 DCRoundSwitch 在表重新加载时触发

> ID：12567636
> 
> 赞同：1
> 
> 时间：2012-09-24T14:58:24.293
> 
> 标签：uitableview, uiswitch

我有一个包含四行的 UITableView。每行都有一个带有 DCRoundSwitch 的自定义单元格。value-changed 事件在 IB 中链接到 switchChanged 方法。每次在 cellForRowAtIndexPath 中需要一个带有开关的新单元时，我都会将新单元的开关分配给 ivar，这样我就可以像这样以编程方式控制它：

```
 self.categorySwitch = ((FilterViewCell *)cell).sectionSwitch; 
```

在我第一次触摸开关后它完美地工作，触发了 switchChanged 方法。

问题：每次需要一个新的单元格或重新加载表时，它都会触发switchedChanged 方法而不接触开关。我已经尝试像这样在 switchChanged 方法的末尾删除所有目标，但它仍然不起作用：

```
 [theSwitch removeTarget:nil action:NULL forControlEvents:UIControlEventAllEvents]; 
```

这可以完美地使用 UISwitch。

有什么建议么？DCRoundSwitch 似乎是一个很好的选择，我想使用它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:26:43.167

尝试将事件更改为 UIControlEventTouchUpInside，如下所示...

```
 [theSwitch removeTarget:nil action:NULL forControlEvents:UIControlEventTouchUpInside]; 
```

还要更改 setOn:animated: DCRoundSwitch.m 文件中的方法中的事件

```
 [self sendActionsForControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:59:29.650

在 DCRoundSwitch.m 文件中，定位方法：

```
- (void)setOn:(BOOL)newOn animated:(BOOL)animated ignoreControlEvents:(BOOL)ignoreControlEvents 
```

删除这两行：

```
[[self allTargets] makeObjectsPerformSelector:@selector(retain)];
[[self allTargets] makeObjectsPerformSelector:@selector(release)]; 
```

# ruby - 有没有办法表达“无限时间”？

> ID：12567639
> 
> 赞同：16
> 
> 时间：2012-09-24T14:58:44.047
> 
> 标签：ruby

我正在使用[`Range`](http://www.ruby-doc.org/core/Range.html)该类来表示一系列时间。现在我想要一个代表给定时间后任何点的范围。

我试过`(DateTime.now .. nil)`了，但是`Range`该类不允许不同类的对象成为同一范围的端点。（尝试`Range`使用此属性创建 a 会导致`ArgumentError: bad value for range`。）

时间是否有无穷大的等价物，即`Time.now + (1.0/0.0)`？或者，有没有办法绕过`Range`类的要求，即其`min`和`max`值属于同一类？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-12-22T22:49:33.400

可以使用`DateTime::Infinity`类：

```
future = DateTime.now..DateTime::Infinity.new
future.include?(1_000_000.years.from_now) #=> true 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-24T15:02:09.920

```
range = (Time.now.to_f .. Float::INFINITY)
range.include?(Time.now.to_f) # => true
sleep 1
range.include?(Time.now.to_f) # => true
range.include?(Float::INFINITY) # => true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T15:07:53.690

当您需要表示无限时间时，您可以使用您自己创建的不同类的对象。只需实现匹配运算符和您使用的任何其他方法，然后它就可以与 Range 对象互换使用。

```
class TimeRange
    def initialize(min, max)
    ...
    end
end 
```

# haskell - 无法加载 GHC.TypeLits 模块

> ID：12567642
> 
> 赞同：3
> 
> 时间：2012-09-24T14:59:00.530
> 
> 标签：haskell, ghc, haskell-platform

刚刚安装了当前的 Haskell 平台[`2012.2.0.0`，它说它使用`base-4.5.0.0`](http://www.haskell.org/platform/changelog.html)，并且[`base-4.5.0.0`包含该`GHC.TypeLits`模块](http://www.haskell.org/ghc//dist/current/docs/html/libraries/base-4.5.0.0/GHC-TypeLits.html)。

但是，当我尝试加载时`GHC.TypeLits`，`ghc`找不到它：

```
% ghci --version                        
The Glorious Glasgow Haskell Compilation System, version 7.4.1
% ghci 
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Prelude> :m +GHC.TypeLits

<no location info>:
    Could not find module `GHC.TypeLits'
    Perhaps you meant GHC.Types (from ghc-prim)
Prelude> 
% ghc-pkg list base
/Library/Frameworks/GHC.framework/Versions/7.4.1-i386/usr/lib/ghc-7.4.1/package.conf.d
   base-4.5.0.0
% ghc-pkg describe base
name: base
version: 4.5.0.0
id: base-4.5.0.0-a732a3518af7589b6c46f83e8ceae384
license: BSD3
copyright:
maintainer: libraries@haskell.org
stability:
homepage:
package-url:
synopsis: Basic libraries
description: This package contains the Prelude and its support libraries,
             and a large collection of useful libraries ranging from data
             structures to parsing combinators and debugging utilities.
category:
author:
exposed: True
exposed-modules: Foreign.Concurrent GHC.Arr GHC.Base GHC.Conc
                 GHC.Conc.IO GHC.Conc.Signal GHC.Conc.Sync GHC.ConsoleHandler
                 GHC.Constants GHC.Desugar GHC.Enum GHC.Environment GHC.Err
                 GHC.Exception GHC.Exts GHC.Fingerprint GHC.Fingerprint.Type
                 GHC.Float GHC.Float.ConversionUtils GHC.Float.RealFracMethods
                 GHC.Foreign GHC.ForeignPtr GHC.Handle GHC.IO GHC.IO.Buffer
                 GHC.IO.BufferedIO GHC.IO.Device GHC.IO.Encoding
                 GHC.IO.Encoding.CodePage GHC.IO.Encoding.Failure
                 GHC.IO.Encoding.Iconv GHC.IO.Encoding.Latin1 GHC.IO.Encoding.Types
                 GHC.IO.Encoding.UTF16 GHC.IO.Encoding.UTF32 GHC.IO.Encoding.UTF8
                 GHC.IO.Exception GHC.IO.FD GHC.IO.Handle GHC.IO.Handle.FD
                 GHC.IO.Handle.Internals GHC.IO.Handle.Text GHC.IO.Handle.Types
                 GHC.IO.IOMode GHC.IOArray GHC.IOBase GHC.IORef GHC.Int GHC.List
                 GHC.MVar GHC.Num GHC.PArr GHC.Pack GHC.Ptr GHC.Read GHC.Real GHC.ST
                 GHC.Stack GHC.Stats GHC.Show GHC.Stable GHC.Storable GHC.STRef
                 GHC.TopHandler GHC.Unicode GHC.Weak GHC.Word System.Timeout
                 GHC.Event Control.Applicative Control.Arrow Control.Category
                 Control.Concurrent Control.Concurrent.Chan Control.Concurrent.MVar
                 Control.Concurrent.QSem Control.Concurrent.QSemN
                 Control.Concurrent.SampleVar Control.Exception
                 Control.Exception.Base Control.OldException Control.Monad
                 Control.Monad.Fix Control.Monad.Instances Control.Monad.ST
                 Control.Monad.ST.Safe Control.Monad.ST.Unsafe Control.Monad.ST.Lazy
                 Control.Monad.ST.Lazy.Safe Control.Monad.ST.Lazy.Unsafe
                 Control.Monad.ST.Strict Control.Monad.Zip Data.Bits Data.Bool
                 Data.Char Data.Complex Data.Dynamic Data.Either Data.Eq Data.Data
                 Data.Fixed Data.Foldable Data.Function Data.Functor Data.HashTable
                 Data.IORef Data.Int Data.Ix Data.List Data.Maybe Data.Monoid
                 Data.Ord Data.Ratio Data.STRef Data.STRef.Lazy Data.STRef.Strict
                 Data.String Data.Traversable Data.Tuple Data.Typeable
                 Data.Typeable.Internal Data.Unique Data.Version Data.Word
                 Debug.Trace Foreign Foreign.C Foreign.C.Error Foreign.C.String
                 Foreign.C.Types Foreign.ForeignPtr Foreign.ForeignPtr.Safe
                 Foreign.ForeignPtr.Unsafe Foreign.Marshal Foreign.Marshal.Alloc
                 Foreign.Marshal.Array Foreign.Marshal.Error Foreign.Marshal.Pool
                 Foreign.Marshal.Safe Foreign.Marshal.Utils Foreign.Marshal.Unsafe
                 Foreign.Ptr Foreign.Safe Foreign.StablePtr Foreign.Storable Numeric
                 Prelude System.Console.GetOpt System.CPUTime System.Environment
                 System.Exit System.IO System.IO.Error System.IO.Unsafe System.Info
                 System.Mem System.Mem.StableName System.Mem.Weak
                 System.Posix.Internals System.Posix.Types
                 Text.ParserCombinators.ReadP Text.ParserCombinators.ReadPrec
                 Text.Printf Text.Read Text.Read.Lex Text.Show Text.Show.Functions
                 Unsafe.Coerce
hidden-modules: GHC.Event.Array GHC.Event.Clock GHC.Event.Control
                GHC.Event.EPoll GHC.Event.IntMap GHC.Event.Internal
                GHC.Event.KQueue GHC.Event.Manager GHC.Event.PSQ GHC.Event.Poll
                GHC.Event.Thread GHC.Event.Unique Control.Monad.ST.Imp
                Control.Monad.ST.Lazy.Imp Foreign.ForeignPtr.Imp
trusted: False
import-dirs: /Library/Frameworks/GHC.framework/Versions/7.4.1-i386/usr/lib/ghc-7.4.1/base-4.5.0.0
library-dirs: /Library/Frameworks/GHC.framework/Versions/7.4.1-i386/usr/lib/ghc-7.4.1/base-4.5.0.0
hs-libraries: HSbase-4.5.0.0
extra-libraries: iconv
extra-ghci-libraries:
include-dirs: /Library/Frameworks/GHC.framework/Versions/7.4.1-i386/usr/lib/ghc-7.4.1/base-4.5.0.0/include
includes: HsBase.h
depends: ghc-prim-0.2.0.0-bd29cb1ca1b712d64e00ac9207f87d0a
         integer-gmp-0.4.0.0-ec87c5d9609a1d46da031ef5d51c4f79 builtin_rts
hugs-options:
cc-options:
ld-options:
framework-dirs:
frameworks:
haddock-interfaces: /Library/Frameworks/GHC.framework/Versions/7.4.1-i386/usr/share/doc/ghc/html/libraries/base-4.5.0.0/base.haddock
haddock-html: /Library/Frameworks/GHC.framework/Versions/7.4.1-i386/usr/share/doc/ghc/html/libraries/base-4.5.0.0
pkgroot: "/Library/Frameworks/GHC.framework/Versions/7.4.1-i386/usr/lib/ghc-7.4.1"
% 
```

发生什么了？我认为`GHC.TypeLits`当前的 Haskell 平台应该可以使用它是错误的吗？或者我是否跳过了使其可用的步骤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:14:15.123

您链接到的文档页面似乎有些可疑。您的[GHC](http://www.haskell.org/ghc/docs/7.4.1/html/libraries/base-4.5.0.0/)声称是[7.4.1](http://hackage.haskell.org/package/base-4.5.0.0)`base-4.5.0.0`，它似乎使用. 这是完全合理的，因为 GHC 7.4.1[不支持 type literals](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/kind-polymorphism-and-promotion.html#promotion)，这与[GHC 7.6.1](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/promotion.html)不同。`base-4.5.0.0``GHC.TypeLits`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:13:21.350

是的，当前的 Haskell 平台不支持类型级文字。它们是[在 GHC 7.6 中添加的](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/release-7-6-1.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T15:18:14.823

`GHC.TypeLits`从后面添加`GHC 7.6`。 [http://www.haskell.org/ghc/docs/7.4.2/html/libraries/index.html](http://www.haskell.org/ghc/docs/7.4.2/html/libraries/index.html) http://www.haskell.org/ghc/docs/latest/html/libraries/index.html

# git - 如果我使用“git checkout”如何恢复？

> ID：12567652
> 
> 赞同：0
> 
> 时间：2012-09-24T14:59:31.493
> 
> 标签：git

提交后，我输入`git checkout`错误，终端显示`Your branch is ahead of 'origin/quoted_price' by 1 commit.`，`quoted_price`现在是我的分支名称。而且不知道怎么恢复。。

另一个问题是当我进入时发生了什么`git checkout`

请问谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:05:12.983

获取当前提交：`git rev-parse HEAD`给出当前 SHA 哈希，`git branch`给出当前分支。

转到以前的状态：`git checkout quoted_price`

# ruby-on-rails - 在 Ruby on Rails 中从字符串获取日期名称

> ID：12567653
> 
> 赞同：1
> 
> 时间：2012-09-24T14:59:33.320
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我使用 Ruby 的 Date::DAYNAMES 函数通过复选框将我的日子保存在字符串中。

```
- Date::DAYNAMES.each_with_index do |day,index|
  = check_box_tag "promotion[days_#{index}]", index, false, :name => "promotion[days][]", :checked => (@promotion.days.include? index.to_s)
  = day 
```

它给出了这样的字符串：

```
 "---\n- '0'\n- '1'\n- '4'\n" 
```

在我看来，我尝试使用以下内容来显示日期名称，但无法获取所有日期名称。只有第一天。

```
 = Date::DAYNAMES[@promotion.days.to_i] 
```

有人可以告诉我如何获取每个选定的日期名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:29:23.697

该字符串看起来像 yaml。在 irb 中试试这个：

```
require 'date'
require 'psych'

Psych.load("---\n- '0'\n- '1'\n- '4'\n").map { |i| Date::DAYNAMES[i.to_i] }

=> ["Sunday", "Monday", "Thursday"] 
```

# c# - Scope of class variables in c# lambdas

> ID：12567659
> 
> 赞同：0
> 
> 时间：2012-09-24T14:59:52.343
> 
> 标签：c#, lambda, scope

I have some code which waits for a server response & uses a lambda to do stuff when it gets it. It also checks a class ivar, _timedOut, in this lambda, to see what to do. What I'm not sure of is, if _timedOut is changed somewhere else in the class after the lambda was created but before it's invoked, what value of _timedOut will the lambda see?

I've trawled SO for answers to this, but none of the answers seem to address this specific query. Code -

```
public class MyClass
{
    public MyClass()
    {
        _databaseService = //...database stuff
        _uploadService = //...uploads info
        _serverService = //...gets stuff from the server

        _uploadService.UploadingStatusChanged += UploadStatusChanged; 
    }

    private bool _timedOut = false;

    private void GetFinalInfo()
    {
        FinalInfo finalInfo = _databaseService.GetFinalInfo();

        if (finalInfo == null) // still have no finalInfo
        {

            _serverService.GetLatestFinalInfo((response, theFinalInfo) =>
            {
                if (!_timedOut) // this could be changed elsewhere in the class while we're waiting for the server response
                {
                    if (response == ServerResponse.Successful)
                    {
                        _databaseService.AddFinalInfo(theFinalInfo);
                        // navigate to next screen
                    }
                    else
                    {
                        // do something else
                    }
                }
            });
        }
        else
        {
            // navigate to next screen
        }
    }

}

private void UploadStatusChanged(object s, MyEventArgs e)
{
    // do stuff & call GetFinalInfo if good
} 
```

Thanks for any help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:02:42.990

`_timeout`将成为 lambda 闭包的一部分。

这意味着 lambda 中的值将是调用*时的值。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:08:34.507

> 我不确定的是，如果 _timedOut 在创建 lambda 之后但在它被调用之前在类中的其他地方发生了更改，那么 lambda 会看到什么值 _timedOut？

lambda 表达式将转换为*实例*方法，因为您`this`通过引用实例变量有效地捕获了引用（并且您没有捕获任何局部变量）。由 lambda 表达式创建的委托将有一个目标`this`，因此当执行委托时，它将“看到”对`_timedOut`.

当然，这仍然受到正常线程安全问题的影响——如果一个线程更改了变量的值，而没有任何额外的同步或内存屏障，则另一个线程可能会尝试读取该变量并查看旧值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:30:20.533

因为没有外部变量被认为需要捕获，`_timedOut`而不是被“捕获”。编译器所做的是在相关类上生成一个实例方法，并有效地将 lambda 中的代码“移动”到实例方法中，而不是创建一个闭包。例如，编译器将生成这样的方法`MyClass`：

```
[CompilerGenerated]
private void <GetFinalInfo>b__0(ServerResponse response, object theFinalInfo)
{
    if (!this._timedOut)
    {
        if (response == ServerResponse.Successful)
        {
            this._databaseService.AddFinalInfo(theFinalInfo);
        }
    }
} 
```

因此，lambda 中的代码将始终直接访问该`_timedOut`字段（以及该`_databaseService`字段）。如果您访问任何局部变量，则编译器将被迫通过生成包含它们的类来捕获该变量和任何其他“外部变量”，此时`this`将被捕获。例如，如果我们稍微修改一下代码：FinalInfo finalInfo = _databaseService.GetFinalInfo(); MyStruct myStruct = new MyStruct(); 我的结构.i = 1;

```
if (finalInfo == null) // still have no finalInfo
{

    _serverService.GetLatestFinalInfo((response, theFinalInfo) =>
                                        {
                                            Trace.WriteLine(myStruct.i);
                                        if (!_timedOut) // this could be changed elsewhere in the class while we're waiting for the server response
                                        {
                                            if (response == ServerResponse.Successful)
                                            {
                                                _databaseService.AddFinalInfo(theFinalInfo);
                                                // navigate to next screen
                                            }
                                            else
                                            {
                                                // do something else
                                            }
                                        }
                                        });
}
        } 
```

编译器将生成代码以在 GetFinalInfo 中执行捕获：

```
MyClass.<>c__DisplayClass2 <>c__DisplayClass = new MyClass.<>c__DisplayClass2();
<>c__DisplayClass.<>4__this = this;
FinalInfo finalInfo = this._databaseService.GetFinalInfo();
<>c__DisplayClass.bleah = default(MyStruct);
<>c__DisplayClass.bleah.i = 1;
if (finalInfo == null)
{
    this._serverService.GetLatestFinalInfo(new Action<ServerResponse, object>(<>c__DisplayClass.<GetFinalInfo>b__0));
} 
```

...清楚地制作`this`. 当然，即使在这种情况下，因为`this`只能是一个引用，所以当`<>c__DisplayClass.<>4__this`被引用时，它仍然是直接引用原始的`_timedOut`。

现在，尽管直接访问该字段，编译器仍然可以自由地优化它对这个变量的使用，因为它不是通过 volatile 读取访问的。这与 lambda 的使用无关。如果不止一个线程在这里发挥作用，您可能会遇到代码可能看不到`_timedOut`在非 x86/x64 架构上进行的所有写入的情况。您似乎没有使用多个线程，并且您似乎没有以`_timedOut`一种方式使用会导致编译器生成不会`_timedOut`在 x86/x64 上的不同线程上看到更新的代码——但更改了代码可以介绍一下。

外部变量

> 范围包括 lambda 表达式或匿名方法表达式的任何局部变量、值参数或参数数组都称为匿名函数的外部变量。在类的实例函数成员中，this 值被视为值参数，并且是函数成员中包含的任何匿名函数的外部变量。

捕获

> 当一个外部变量被匿名函数引用时，该外部变量被称为已被匿名函数捕获。

# android - Receive Files in Android using asmack

> ID：12567660
> 
> 赞同：2
> 
> 时间：2012-09-24T14:59:53.023
> 
> 标签：android, xmpp, file-transfer, smack, asmack

I am trying to receive a file using the asmack jar. I am able to receive text on my android device with no problem but when I set up the file transfer I get an error saying that "does not support file transfers". The listener is never being called... I set up my listener like this:

```
if (m_connection != null)
        {

            ServiceDiscoveryManager sdm = ServiceDiscoveryManager.getInstanceFor(connection);
            if (sdm == null)
            {
                sdm = new ServiceDiscoveryManager(connection);
                sdm.addFeature("http://jabber.org/protocol/disco#info");
                sdm.addFeature("jabber:iq:privacy");
            }

            // new ServiceDiscoveryManager(connection);
            FileTransferNegotiator.setServiceEnabled(connection, true);
            FileTransferManager manager = new FileTransferManager(m_connection);
            manager.addFileTransferListener(new FileTransferListener() {
                public void fileTransferRequest(final FileTransferRequest request)
                {

                    Log.i("InstallerActivity", "Got new File!!!"); 
```

EDIT: Added these to make it work:

```
pm.addIQProvider("si", "http://jabber.org/protocol/si", new StreamInitiationProvider());

    pm.addIQProvider("query", "http://jabber.org/protocol/bytestreams", new BytestreamsProvider());
    pm.addIQProvider("open", "http://jabber.org/protocol/ibb", new IBBProviders.Open());
    pm.addIQProvider("close", "http://jabber.org/protocol/ibb", new IBBProviders.Close());
    pm.addExtensionProvider("data", "http://jabber.org/protocol/ibb", new IBBProviders.Data());
    pm.addIQProvider("open", "http://jabber.org/protocol/ibb", new OpenIQProvider());
    pm.addIQProvider("data", "http://jabber.org/protocol/ibb", new DataPacketProvider());
    pm.addIQProvider("close", "http://jabber.org/protocol/ibb", new CloseIQProvider());
    pm.addExtensionProvider("data", "http://jabber.org/protocol/ibb", new DataPacketProvider()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:52:43.873

你添加`IQProvider`功能了`FileTransfer`吗？

```
// //File transfer
    pm.addIQProvider("si", "http://jabber.org/protocol/si",
            new StreamInitiationProvider());
    pm.addIQProvider("query", "http://jabber.org/protocol/bytestreams",
            new BytestreamsProvider());
    pm.addIQProvider("open", "http://jabber.org/protocol/ibb",
            new OpenIQProvider());
    pm.addIQProvider("close", "http://jabber.org/protocol/ibb",
            new CloseIQProvider());
    pm.addExtensionProvider("data", "http://jabber.org/protocol/ibb",
            new DataPacketProvider()); 
```

这是使用 asmack 的非常有用的文件传输教程。[使用 asmack 和 Openfire 在 android 中传输文件](http://harryjoy.com/2012/08/18/file-transfer-in-android-with-asmack-and-openfire/)

# proxy - Jenkins-HTTP proxy configuration-github plugin

> ID：12567661
> 
> 赞同：1
> 
> 时间：2012-09-24T14:59:55.380
> 
> 标签：proxy, github, jenkins

I am running a ubuntu Virtual Machine and through putty i am accessing it.I have installed jenkins CI on that machine.

Now i am in need to integrate the GitHub Plugin with that jenkins. That VM is behind the firewall, i need to install the plugin through HTTP Proxy configuration.

I have installed winproxy in my windows machine as a proxy server and i accessed Jenkins->Manage Jenkins->advanced(plugin installation) in my browser

server name:as my public IP port:3128 username:WinProxy password:my own password

(Do i need to give my windows username & password?)

But when i submit,Jenkins adds some random long password to it.

2)I have also downloaded github.hpi plugin to upload manually to that machine,that is also doesnt work.

So please someone help me how to integrate that plugin to that Vm which is running jenkins.

If i am wrong in any of the above steps,please rectify me.

Also not sure about the username & password of that winproxy,is it mandatory?

Please someone help me to solve this issue.

# java - 将一个 JScrollPane 滚动条的 bar 放在 XXX 处不“闪烁”

> ID：12567668
> 
> 赞同：1
> 
> 时间：2012-09-24T15:00:10.420
> 
> 标签：java, swing, scroll, jscrollpane, jscrollbar

我正在构建一个来设置包含 a和 a 的`JScrollPane`可滚动a 。`JPanel``JTextPane``JTable`

当我加载框架时，我`JTextPane`用很长的文本初始化，然后滚动条向下移动直到我的文档末尾。

我想把这个滚动条放在文档的顶部。因此，在文本加载后，我将滚动条的值设置为 0：

```
SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() {
        myScrollPane.getVerticalScrollBar().setValue(0);
    }
}); 
```

它工作正常（即我得到顶部的滚动条），但呈现的行为非常难看。现在它加载文本，显示结尾（滚动条位于文本窗格的底部），然后立即（几毫秒，但仍然可见）向上移动以使滚动条位于顶部。由此产生的效果对用户来说是一种“闪光”，这是非常不愉快的。每次重新加载整个文档时，我都会遇到同样的问题。

我怎么能避免呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:23:54.040

您可以`JTextPane`在更新其内容之后但在创建之前将您的插入符号位置简单地设置为 0 `JScrollPane`。这将强制`JScrollPane`立即显示文本的开头，而无需向后滚动。

只需执行以下操作：

```
JTextPane textPane = new JTextPane ();
textPane.setText ( "Some long text here..." );
textPane.setCaretPosition ( 0 );

JScrollPane scrollPane = new JScrollPane ( textPane ); 
```

如果您已经有文本 - 只需在 EDT 中同时进行更新和插入符号位置切换：

```
public static void main ( String[] args ) throws InterruptedException
{
    final JFrame frame = new JFrame ();

    final JTextPane textPane = new JTextPane ();
    frame.add ( new JScrollPane ( textPane ) );

    frame.setSize ( 400, 300 );
    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );

    Thread.sleep ( 2000 );
    SwingUtilities.invokeLater ( new Runnable ()
    {
        public void run ()
        {
            textPane.setText ( "line\nline\nline\nline\nline\nline\nline\nline" +
                    "\nline\nline\nline\nline\nline\nline\nline\nline\nline" +
                    "\nline\nline\nline\nline\nline\nline\nline\nline\nline" +
                    "\nline\nline\nline\nline\nline\nline\nline\nline\nline" );
            textPane.setCaretPosition ( 0 );
        }
    } );

    Thread.sleep ( 2000 );
    SwingUtilities.invokeLater ( new Runnable ()
    {
        public void run ()
        {
            textPane.setText ( "line2\nline\nline\nline\nline\nline\nline\nline" +
                    "\nline\nline\nline\nline\nline\nline\nline\nline\nline" +
                    "\nline\nline\nline\nline\nline\nline\nline\nline\nline" +
                    "\nline\nline\nline\nline\nline\nline\nline\nline\nline" );
            textPane.setCaretPosition ( 0 );
        }
    } );
} 
```

但我同意这不是最好的解决方案。我想没有简单的方法可以在其内容更改时强制 textpane 插入符号为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:34:42.003

最后我把默认插入符号放到[`NEVER_UPDATE`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DefaultCaret.html#NEVER_UPDATE).

```
JTextPane textPane = new JTextPane();
DefaultCaret caret = (DefaultCaret) textPane.getCaret();
caret.setUpdatePolicy(DefaultCaret.NEVER_UPDATE); 
```

[这](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DefaultCaret.html#setUpdatePolicy%28int%29)是`setUpdatePolicy()`. 然后我自己更新插入符号。

# html - -webkit- 动画浏览器兼容性

> ID：12567675
> 
> 赞同：0
> 
> 时间：2012-09-24T15:00:36.893
> 
> 标签：html, css, cross-browser, rollover

我一直在练习一些 CSS，通过制作一些翻转按钮并使用，`-webkit`但我听说`-webkit`它只与 chrome 和 safari 兼容。因此，如果我想让动画在其他浏览器上运行，我应该添加什么代码？这是我的代码：

html:

```
 <!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="main.css">
    <title>Rollover buttons</title>
</head>
<body>
    <article>   
        <p id="button">Button!</p>
    </article>
</body>
</html>

body{
    text-align:center;
}
#button{
    display:block;
    border:2px solid green;
    margin:150px 400px;
    background:#604085;
    color:#ffffff;
    width:100px;
    height:50px;
    -webkit-border-radius:30px;
    -webkit-transition:background 0.5s,width 0.5s, height 0.5s;
}
#button:hover{
    background:#67e456;
    width:110px;
    height:60px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:06:00.283

```
transition: opacity 0.5s linear; /* vendorless fallback */
-o-transition: opacity 0.5s linear; /* opera */
-ms-transition: opacity 0.5s linear; /* IE 10 */
-moz-transition: opacity 0.5s linear; /* Firefox */
-webkit-transition: opacity 0.5s linear; /*safari and chrome */ 
```

您想了解供应商前缀。这是一个带有注释的简单不透明过渡的示例。

在这里查看最新的浏览器支持 - [http://caniuse.com/](http://caniuse.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:12:46.927

您还可以使用图像精灵进行翻转，如下所示：

```
.button {
background-image: src(../images/soandso.jpg);
background-image: top left;
width: 45px;
height: 15px;
}

.button:hover {
background-image: src(../images/soandso.jpg);
background-image: bottom left;
width: 45px;
height: 15px;
} 
```

然后你可以使用 jQuery 来实现淡入效果或任何你想要完成的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:02:15.397

如果你想保证跨浏览器的兼容性，此时最好不要使用 CSS3 动画，而是使用 jQuery Effects 之类的东西来为你做这件事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:07:53.097

正如@BoltClock 指出的那样，`-webkit`是供应商前缀。[但是，其他供应商对动画](http://peter.sh/experiments/vendor-prefixed-css-property-overview/)的支持数量有限，我预计随着动画[受到 W3 的关注/正式化，](http://www.w3.org/TR/css3-animations/)这种支持会增加。

请注意，[过渡](http://css3.bradshawenterprises.com/transitions/)（您的 CSS 显示）和动画（由标题引用）包含一组不同的前缀和 W3 文档。

# mysql - MYSQL 将 1 个字段设置为等于另一个字段 - 但添加文本

> ID：12567676
> 
> 赞同：1
> 
> 时间：2012-09-24T15:00:45.503
> 
> 标签：mysql, set

我想知道有没有办法使用 `update your_table set B = A`

但我想在前面添加一些数字

所以更像 `update your_table set B = ('00',A)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:01:29.683

```
update your_table 
set B = concat('00', A) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:03:47.633

这代表了糟糕的关系数据存储实践。与其复制可能导致以后头疼的数据（您现在需要更新两列来更改一组数据），不如在检索时连接结果。

# verilog - Using static values in Verilog

> ID：12567680
> 
> 赞同：2
> 
> 时间：2012-09-24T15:00:58.623
> 
> 标签：verilog

I am trying to make a simple mux in verilog from a decoder with an enable, but for some reason when I try to use the decoder within my mux with the enable locked to 1, I get an error.

```
module DECODER(out1, out2, out3, out4, A, B, enable);

  `define NOT not #50
  `define AND and #50

  input A, B, enable;
  output out1, out2, out3, out4;
  wire notA, notB, val1, val2, val3, val4;

  `NOT first (notA, A);
  `NOT second (notB, B);

  `AND firstEval(val1, notA, notB);
  `AND secondEval(val2, notA, B);
  `AND thirdEval(val3, A, notB);
  `AND fourthEval(val4, A,B);

  `AND firstOutput(out1, val1, enable);
  `AND secondOutput(out2, val2, enable);
  `AND thirdOutput(out3, val3, enable);
  `AND fourthOutput(out4, val4, enable);
endmodule

module MUX (out, A, B, C, D, select1, select2);
  `define AND and #50
  `define OR or #50

  output out;
  input A,B,C,D,select1,select2;
  wire selectA, selectB, selectC, selectD, firstOr, secondOr, andA, andB, andC, andD;

  DECODER decoderModule(selectA, selectB, selectC, selectD, select1, select2,TRUE);

  `AND checkA(andA, selectA, A);
  `AND checkB(andB, selectB, B);
  `AND checkC(andC, selectC, C);
  `AND checkD(andD, selectD, D);

  `OR firstStep(firstOr, andA, andB);
  `OR secondStep(secondOr, firstOr, andC);

  `OR throughPut(out, secondOr, selectD);

endmodule

module TEST;
  reg A,B,C,D, select1, select2;
  wire out;

  initial
  begin
    A = 1; B = 1; C = 1; D = 1; select1 = 0; select2 = 0;
    #300 A = 0;
    #300 A = 1;
    #300 select1 = 1;
    #300 B = 0;
    #300 B = 1;
    #300 select2 = 1;
    #300 D = 0;
    #300 D = 1;
    #300 select1 = 0;
    #300 C = 0;
    #300 C = 1;
  end

  MUX UUT(out, A,B,C,D,select1,select2);

  initial
    $monitor($time, ,out, , A,B,C,D,select1,select2);
endmodule 
```

When I run the simulation I get the following error:

```
# ** Warning: (vsim-3015) C:/Modeltech_pe_edu_10.1c/win32pe_edu/Mux.v(9): [PCDPC] - Port size (1 or 1) does not match connection size (32) for port 'enable'. The port definition is at: C:/Modeltech_pe_edu_10.1c/win32pe_edu/Decoder.v(1). 
```

Any help on how to fix this would be greatly appreciated. I feel like I may be misunderstanding something about how Verilog uses static values.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:11:28.523

您尚未提供`TRUE`信号的定义。我已将您的替换`TRUE`为`1'b1`，现在模拟运行得更好：

```
 DECODER decoderModule(selectA, selectB, selectC, selectD, select1, select2, 1'b1); 
```

`1'bx`在大多数模拟器中默认为未声明的信号。

或者，您可以在您的穆杜勒中声明`TRUE`为：`wire``MUX`

```
wire TRUE = 1'b1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:49:47.807

在您的代码中， TRUE 看起来像一个隐式的电线声明，但我不确定为什么 Modelsim 认为它是 32 位的。您可以使用预处理器指令来防止这些。

```
`default_nettype none 
```

此外，您应该考虑对常量使用参数，因为它们的范围有限。

```
parameter TRUE = 1'b1; 
```

# ios - Is it possible to store hidden fields in Passes? (iOS 6.0 Passbook JSON)

> ID：12567684
> 
> 赞同：2
> 
> 时间：2012-09-24T15:01:13.690
> 
> 标签：ios, json, passbook

I want to store hidden values in the JSON file, which aren't displayed in the passbook, but can be accessed from my app after I loaded my passes like this:

```
[_pass localizedValueForFieldKey:@"hidden_field_1"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:33:31.943

由于传递串行格式是任意的，因此您可以将（短）数据附加到它。

```
normal serial          serial with data

00001                  00001|laskjfrg645sa
00002                  00002|a654sf6s54fas64
00002                  00003|a6sd5f4a46sdf5 
```

当您控制“id”部分时，序列将始终保持唯一。

无论如何，虽然它可能有效，但它不是很*洁净*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T11:20:13.877

使用新的 iOS 7.0 API，可以使用 userInfo 键。有关更多信息，请阅读[文档](https://developer.apple.com/library/ios/documentation/UserExperience/Reference/PassKit_Bundle/Chapters/TopLevel.html#//apple_ref/doc/uid/TP40012026-CH2-SW1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T21:28:44.893

根据我对[Passbook Programming Guide](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Introduction.html)的阅读，所有字段都显示出来。用户应该知道通行证中存储了什么，因此他们不会害怕接受它。您可能会考虑使用 backFields 来存储带有标签的加密字符串，标签上写着“验证跟踪字段”。

# python - Split a HTML document at tag - Python

> ID：12567687
> 
> 赞同：0
> 
> 时间：2012-09-24T15:01:19.140
> 
> 标签：python, html, regex, parsing, beautifulsoup

What would be the best way to split a HTML document/string based on the occurrence of the
tag? I have given the solution I currently have below but it seems quite cumbersome and isn't all that easy to read I think. I also experimented with regex's but I'm told I should not use regex's to parse HTML

```
for i, br in enumerate(soup.findAll('b')):
line_value = ''
line_values = []
next = br.next
while (next):
    if next and isinstance(next, Tag) and next.name == 'br':
        line_values.append(line_value)
        line_value = ''
    else:
        stripped_text = ''.join(BeautifulSoup(str(next).strip()).findAll(text=True))
        if stripped_text:
            line_value += stripped_text
    next = next.nextSibling
print line_values 
```

Here's a sample of the HTML I'm parsing:

```
<p><font size="1" color="#800000"><b>09:00
  <font> - </font>
  11:00
  <br>
  CE4817
  <font> - </font>LAB <font>- </font>
  2A
  <br>
   B2043 B2042
  <br>

  Wks:1-13
  </b></font>
  </p> 
```

And the current results of my code:

```
[u'09:00 - 11:00', u'CE4817 - LAB- 2A', u'B2043 B2042']
[u'11:00 - 12:00', u'CE4607 - TUT- 3A', u'A1054'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:21:27.880

用正则表达式拆分

```
import re
p = re.compile(r'<br>')
filter(None, p.split(yourString)) 
```

然后，您可以从数组中每个返回的字符串中删除其他 html 标记。

您可以使用现有函数，如[从 python 中的字符串中剥离 html，或者检查我对](https://stackoverflow.com/a/925630/876211)[剥离 HTML 标记而不使用 HtmlAgilityPack](https://stackoverflow.com/a/11990111/876211) 问题的回答。

还要检查这个答案：[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/a/1732454/876211)

你*真的*应该使用 html 解析器来完成你的任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:22:04.917

尝试这个 ：

**正则表达式**

```
<p><font size="1" color="#800000"><b>(\d{2}:\d{2}).*?(\d{2}:\d{2}).*?(\w{2}\d{4}).*?<font> - </font>(\w+)\s*<font>- </font>\s*(\d\w)\s*<br>\s*(\w\d{4}\s*\w\d{4})\s*<br>[\s\S]*?</p> 
```

**模式**

> m - 多行

只要 html 代码的结构没有改变，这将起作用。

# msbuild - Build failing on TFS 2012 msbuild

> ID：12567689
> 
> 赞同：0
> 
> 时间：2012-09-24T15:01:21.260
> 
> 标签：msbuild, tfsbuild

We have recently migrated our **TFS Server from 2010 to TFS 2012 Server**, upgraded out build controllers to it.

When we try to TFS Build to create an msi with wix, solution failed with following errors.

One solution with 102 projects with Libraries and Services built correctly and the other solution which has web application had issue like.

CSC : error CS0006: Metadata file '\bin\Release\foo.dll' could not be found \WebApplication.csproj

CSC : error CS0006: Metadata file '\bin\Release\foo2.dll' could not be found \WebApplication.csproj

CSC : error CS0006: Metadata file '\bin\Release\foo3.dll' could not be found \WebApplication.csproj

CSC : error CS0006: Metadata file '\bin\Release\foo4.dll' could not be found \WebApplication.csproj

CSC : error CS0006: Metadata file '\bin\Release\foo5.dll' could not be found \WebApplication.csproj

# iphone - 带有 iOS6 的 iPhone5 上的 presentViewController 呈现 460 像素宽而不是 568 像素的横向视图

> ID：12567691
> 
> 赞同：0
> 
> 时间：2012-09-24T15:01:25.053
> 
> 标签：iphone, ios6

我希望有人能帮帮忙：

我已经为 iPhone 5 移植了我的应用程序。所有视图都是横向的，我在 IB 中将宽度设置为 568 像素。当应用程序启动时，主视图以全宽正确显示。但是当我使用 presentViewController 调用 SettingsView 时，它以 460 像素/3.5" 模式显示。当我关闭 SettingsView 时，主视图的工具栏现在也缩小到 460 像素。但是我绘制的图形仍然是 568 像素宽的。

我在控制器的设置视图的 viewDidLoad 方法中做了一个 NSLog(@"%f", self.view.frame.size.width) ，它输出 568.0 这意味着视图本身“知道”它是 568 宽。它仍然仅以 460 像素显示。

这是代码 - 虽然没什么特别的......

```
- (IBAction) showSettingsView 
{
     FlipsideViewController *controller = [[FlipsideViewController alloc] initWithNibName:@"FlipSideView" bundle:nil];
     controller.delegate = self;

     controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

     [self presentViewController:controller animated:YES completion:nil]  ;

     [controller release];
}

- (void)flipsideViewControllerDidFinish:(id)controller
{
    [self dismissViewControllerAnimated:YES completion:nil] ;
} 
```

我在 Apple 开发论坛上发布了同样的问题，但还没有得到答案： [在此处输入链接描述](https://devforums.apple.com/message/733649)

这发生在 iPhone 5 设备和模拟器中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:35:19.753

将 MainWindow.xib 中的 MainWindow 设置为“启动时全屏”，并将模拟的 Metrics 大小设置为“Retina 4 全屏”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:00:23.787

如果你不使用 xib `UIWindow`，而是使用 xibs 作为 ViewController 的视图

```
_settingsController = [[CNPSettingsViewController alloc] initWithNibName:@"CNPViewController" bundle:nil];
[_settingsController setDelegate:self];
[_settingsController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];

//this line solved the problem for me
[_settingsController.view setBounds:[[UIScreen mainScreen] bounds]]; 
```

# c# - 如何使用 c# 以编程方式将 html 字符串直接传递给 Web 浏览器？

> ID：12567693
> 
> 赞同：3
> 
> 时间：2012-09-24T15:01:25.693
> 
> 标签：c#, browser, notepad

好吧，例如我有一些简单的控制台应用程序。我的目的是生成一些报告并在一些外部应用程序（如记事本或网络浏览器）中向用户表示。

```
class Program
    {
        [DllImport("user32.dll", EntryPoint = "FindWindowEx")]
        public static extern IntPtr FindWindowEx(IntPtr hwndParent, IntPtr hwndChildAfter, string lpszClass, string lpszWindow);

        [DllImport("User32.dll")]
        public static extern int SendMessage(IntPtr hWnd, int uMsg, int wParam, string lParam);

        static void Main()
        {
            OpenNotepadAndInputTextInIt("Message in notepad");
            OpenHtmlFileInBrowser(@"c:\temp\test.html");
        }

        private static string GetDefaultBrowserPath()
        {
            string key = @"HTTP\shell\open\command";
            using(RegistryKey registrykey = Registry.ClassesRoot.OpenSubKey(key, false))
            {
                return ((string)registrykey.GetValue(null, null)).Split('"')[1];
            }
        }

        private static void OpenHtmlFileInBrowser(string localHtmlFilePathOnMyPc)
        {
            Process browser = Process.Start(new ProcessStartInfo(GetDefaultBrowserPath(), string.Format("file:///{0}", localHtmlFilePathOnMyPc)));
            browser.WaitForInputIdle();

        }

        private static void OpenNotepadAndInputTextInIt(string textToInputInNotepad)
        {
            Process notepad = Process.Start(new ProcessStartInfo("notepad.exe"));
            notepad.WaitForInputIdle();
            if(notepad != null)
            {
                IntPtr child = FindWindowEx(notepad.MainWindowHandle, new IntPtr(0), "Edit", null);
                SendMessage(child, 0x000C, 0, textToInputInNotepad);
            }
        }
    } 
```

该解决方案效果很好，但是正如您所见，我有两种方法；`GetDefaultBrowserPath()`和`GetDefaultBrowserPath(string localHtmlFilePathInMyPc)`。第一个将消息字符串直接传递到记事本窗口，但第二个需要创建一个文件、一些`html`页面，然后将此 html 文件作为 Web 浏览器的参数传递。这是一种缓慢的解决方案。**我想生成一个`html`字符串报告并将其直接传递给 Web 浏览器，而无需创建中间 html 文件。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:18:26.167

如果您想在系统的默认浏览器应用程序中打开一个外部浏览器窗口（而不是将其集成到您的应用程序中），我认为唯一的方法是通过[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)：

```
data:text/html,<html><title>Hello</title><p>This%20is%20a%20test 
```

将此作为 URI 传递到浏览器中。但是，我真的不建议这样做。这对用户来说是出乎意料的，生成要显示的临时文件并没有真正的缺点，是吗？此外，您可能很快就会开始限制 URI 长度。

顺便说一句，您当前在浏览器中打开文件的方式比要求的要复杂得多。Shell 执行自己做正确的事情，无需手动从注册表中检索浏览器的路径：

```
Process.Start("file:///the/path/here") 
```

# jquery - 将 xmlHttp=GetXmlHttpObject() 转换为 Jquery 淡化效果

> ID：12567694
> 
> 赞同：-1
> 
> 时间：2012-09-24T15:01:27.423
> 
> 标签：jquery

几年前，我破解了我在网上找到的一个脚本，用于使用 Javascript 和 GetXmlHttpObject 方法更改一些页面内容。总而言之，正如您在此页面上看到的那样，效果很好 -

[市区传输人员](http://www.downtowntransmission.com/staff.asp)

如果您单击某个工作人员，它会将您带到他（她）的个人资料，并在右上角显示“下一个成员”的链接。

代码如下：

```
<span id='next_staff'  onClick="change(8,'staff',1)"  >Next Team Member</span> 
```

所以我传递了三个参数，一个是员工的id，staff这个词是一个switch语句，数字1是告诉脚本员工所属的商店（有些客户有多个商店）。

我的目标是为每个员工保持相同的 url 结构，例如 url 中的“？member=5&shop=1”，但转换我正在使用的 javascript 给我一个很好的 jquery 效果，例如内容上的淡入淡出或滑动。

我会假设，因为我已经在获取内容并且它正在工作，我应该能够修改 jquery 的 javascript - 不是吗？

我试过但无法插入我的代码，但你可以在[Javascript Code中看到它](http://www.downtowntransmission.com/next.js)

我真的很感激任何帮助，多年来我一直在使用另一个在线资源，但是当我寻求帮助时，这个网站不断出现。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:45:13.470

假设不是最好的解决方案，但变化很小：

```
function stateChanged(){ 
   if (xmlHttp.readyState==4){ 
        var xmlDoc=xmlHttp.responseXML.documentElement;
        $("#staff_profile").fadeOut(100, function() {
            switch(typex){
                case 'service':
                //...
                break;   
            case 'staff':
                 document.getElementById("staffnameheader").innerHTML = xmlDoc.getElementsByTagName("stafftitle")[0].childNodes[0].nodeValue;
                 document.getElementById("staffdesc").innerHTML = xmlDoc.getElementsByTagName("staffdescription")[0].childNodes[0].nodeValue;
                 document.getElementById("staffimg").src = xmlDoc.getElementsByTagName("staffimage")[0].childNodes[0].nodeValue;
                 document.getElementById("navbutton").innerHTML = xmlDoc.getElementsByTagName("nextstaff")[0].childNodes[0].nodeValue;  
            break;
            case 'affiliate':
               //...
            break;
            }
            $("#staff_profile").fadeIn(100);
      });
   }
} 
```

# asp.net-mvc-3 - 具有多个数据库连接和 web.config 应用程序设置的 MVC 3

> ID：12567697
> 
> 赞同：0
> 
> 时间：2012-09-24T15:01:33.460
> 
> 标签：asp.net-mvc-3, c#-4.0, entity-framework-4

有谁知道如何使用 Entity Framework 获取 MVC 3 应用程序，该应用程序与多个数据库连接和多个 web.config appSettings 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:46:01.270

无论子文件夹（site1、site2 等）是虚拟目录还是控制器名称，您都可以将它们的名称用于不同的连接字符串。

仅在一个 web.config 文件中使用多个连接字符串，并通过请求的 URL 虚拟目录名称（基于命名约定）检索它们。

在 web.config：

```
<connectionStrings>
    <add name="site1" connectionString="data source=BLAHBLAH1" />
    <add name="site2" connectionString="data source=BLAHBLAH2" />
</connectionStrings> 
```

并在代码中：

```
using System.Configuration;
...
var currentLocationName = HttpRequest.ApplicationPath; // "site1, site2 etc."
string conn = ConfigurationManager.ConnectionStrings[currentLocationName].ConnectionString;
//set the correct connection string for your objectContext (Entity Framework)
return new Entities(conn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:45:43.547

如果你有 7 个网站，你也有 7 个 web.config 文件——每个都指向正确的数据库。

# javascript - 获取文本元素的偏移量

> ID：12567699
> 
> 赞同：0
> 
> 时间：2012-09-24T15:01:34.923
> 
> 标签：javascript, jquery

抱歉，如果这是一个完全愚蠢的问题。我是 JS 新手，不确定是否可以完成以下操作。

DOM 是否提供任何 API 允许我们访问选定文本字符串的偏移量？我需要突出显示一个文本字符串并保存它，以便下次登录时可以访问它。我在谷歌上搜索，我得到的印象是即使你能够做到，也存在跨浏览器兼容性问题. 我希望有什么出路？任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:15:26.667

您可以使用元素的“selectionStart”和“selctionEnd”。就像是

```
document.getElementById("id").selectionStart
document.getElementById("id").selectionEnd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:28:31.613

看看[**Rangy 序列化器模块**](http://rangy.googlecode.com/svn/trunk/demos/serializer.html)。

它将允许您序列化返回字符串的选择，例如`0/9/3/2:13,0/9/3/2:44{df7c63db}`.

在您的情况下，您可以将序列号保存到[**本地存储**](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)并在下次登录时使用序列号恢复选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:16:20.553

我仍然不确定你想要什么，但我认为这个博客会有所帮助

[http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html](http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html)

# ide - Dreamweaver 替代方案

> ID：12567706
> 
> 赞同：0
> 
> 时间：2012-09-24T15:01:52.543
> 
> 标签：ide, dreamweaver, html-editor, css-editor

我知道有很多这样的问题，但我希望转移到另一个开发环境，但不会失去一些更好的 Dreamweaver 功能/行为。

我有 Dreamweaver CS6，但每次发布都会变得更糟。这些天，打开文件的简单行为导致它冻结。

这是我想要的替代功能。我在“代码视图”中编码，但设计视图对于粘贴和格式化正文副本非常有用。

*   标签自动关闭。但只有当我输入“</”
*   相关文件（文件浏览器可能会这样做）
*   节点树，因此我可以单击将在源代码中突出显示的节点。
*   良好的源代码自动完成、突出显示、自动格式化等
*   体面的“设计”区域，我可以粘贴到文本内容中，按 Enter 创建 ap，按选项卡创建列表，在现有列表中单击选项卡创建嵌套列表，选项以保持从另一个来源粘贴的内容的各种级别的格式等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T10:17:28.503

Aptana Studio 3 - 免费、快速、干净

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-05T20:22:56.463

[Brackets ( http://brackets.io/](http://brackets.io/) )是一个不错的免费替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:22:56.240

看来我可以继续使用 DW CS6。如果您碰巧链接到托管的 JS 或 CSS 文件，DW 将花费太多时间下载它们。

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Adobe\Dreamweaver CS6\Remote Download]
"RemoteDownloadAllow"="FALSE" 
```

# azure - 关于Azure平台下虚拟操作系统的设置

> ID：12567707
> 
> 赞同：0
> 
> 时间：2012-09-24T15:02:01.530
> 
> 标签：azure

我有一个在 Azure 平台上运行的项目，我已经设置了所有配置，最重要的是数据库。但棘手的是几天后我登录虚拟机，所有设置都消失了。怎么了？我没有对VM做任何事情..有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:28:56.783

根据您的问题描述和评论**“我没有更改任何内容。它们只是消失了......我必须重新设置它们。”** 您可能通过使用 RD 登录 VM 或稍后在应用程序通过应用程序接口运行应用程序后在本地完成某些操作来错误地设置配置。在这两种情况下，由于任何计划内或计划外的原因，当 VM 被回收时，该设置都不会持续存在。

所以这里的关键是如何正确配置您的应用程序的设置，以便设置保持不变。如果您尝试使用相同的方法，它将不会再次存在并导致相同的问题。取决于您可能需要什么样的应用程序配置，即[应用程序开发期间的 SQL 数据库连接配置](https://www.windowsazure.com/en-us/develop/net/tutorials/cloud-service-with-sql-database/)或使用[启动任务](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)将帮助您创建将在 VM 回收期间持续存在的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:09:24.210

会不会是您在 Web 角色/工作角色 (PaaS) 中更改了这些设置？您必须知道这些“虚拟机”不是持久的。例如，这些虚拟机预配了您通过门户或 Visual Studio 上传的包。您通过远程桌面所做的未包含在软件包中的每项更改（例如安装数据库）都会在发生硬件故障时丢失，当您的实例获得 Windows 更新时，...

如果您想保留这些更改，您有 2 个选项：

1.  [使用启动任务](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)编写更改脚本并将脚本包含在服务包中。启动任务将始终在您的实例创建或被新实例替换时执行（以防硬件故障）。
2.  不要使用 PaaS，而是使用 IaaS。这是[虚拟机](http://msdn.microsoft.com/en-us/library/windowsazure/jj156003.aspx)预览功能。使用虚拟机，您可以通过远程桌面连接到您的虚拟机，以安装和配置您喜欢的任何东西。系统磁盘和其他数据磁盘被持久化到 Blob 存储中，因此您不会丢失任何更改。

# objective-c - 使用 MFMailComposeViewController 时 Monotouch iOS 6 崩溃

> ID：12567708
> 
> 赞同：4
> 
> 时间：2012-09-24T15:02:01.210
> 
> 标签：objective-c, ios6, xamarin.ios, mfmailcomposeviewcontroller

当我在 Monotouch iOS 6 中使用 MFMailComposeViewController 时出现一个奇怪的错误，但它在 iOS 5.1 中运行良好：

```
*** Assertion failure in NSDictionary *_UIRecordArgumentOfInvocationAtIndex(NSInvocation *, NSUInteger, BOOL)(), /SourceCache/UIKit/UIKit-2372/UIAppearance.m:1118 
```

这是代码：

```
MFMailComposeViewController _mail;

    public void SendFeedbackMail (string email_subject, string email_message_body, string[] email_recipients)
    {
        if (MFMailComposeViewController.CanSendMail) {
            _mail = new MFMailComposeViewController ();
            _mail.SetSubject (email_subject);
            _mail.SetToRecipients (email_recipients);
            _mail.SetMessageBody (email_message_body + "\n", false);
            _mail.Finished += HandleMailFinished;

            root_controller.PresentViewController(_mail, true, null);

        } else {
            //handle not being able to send mail
            UIAlertView alert = new UIAlertView ("Mail Alert", "Error: Check your eMail configuration", null, "OK", null);
            alert.Show ();
        }

    } 
```

模拟器上的本机堆栈跟踪：

```
Native stacktrace:

0   MyAppProject                        0x0007ba5c mono_handle_native_sigsegv + 284
1   MyAppProject                        0x00004a62 mono_sigsegv_signal_handler + 178
2   libsystem_c.dylib                   0x93ad486b _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   MyAppProject                        0x0014e8be mono_runtime_invoke + 126
5   MyAppProject                        0x001ec80f monotouch_exception_handler + 63
6   CoreFoundation                      0x020e0318 __handleUncaughtException + 728
7   libobjc.A.dylib                     0x0228d0b9 _ZL15_objc_terminatev + 86
8   libstdc++.6.dylib                   0x0289e652 _ZSt9terminatev + 21
9   libobjc.A.dylib                     0x0228d039 _destroyAltHandlerList + 0
10  libdispatch.dylib                   0x0299d027 _dispatch_client_callout + 33
11  libdispatch.dylib                   0x0298cd5f _dispatch_barrier_sync_f_invoke + 58
12  libdispatch.dylib                   0x0298caa3 dispatch_barrier_sync_f + 108
13  libdispatch.dylib                   0x0298ce5e dispatch_sync + 45
14  UIKit                               0x00f7ffad __76-[_UIRemoteViewControllerConnectionRequest _connectToViewControllerOperator]_block_invoke_0 + 105
15  UIKit                               0x00f8be46 __block_global_0 + 54
16  libdispatch.dylib                   0x0299d014 _dispatch_client_callout + 14
17  libdispatch.dylib                   0x0298f09f dispatch_once_f + 57
18  libdispatch.dylib                   0x0298f061 dispatch_once + 31
19  UIKit                               0x00f8be0a __73-[_UIViewServiceSessionEndpoint connectToDeputyOfType:connectionHandler:]_block_invoke_0 + 105
20  UIKit                               0x00f8c002 __73-[_UIViewServiceSessionEndpoint connectToDeputyOfType:connectionHandler:]_block_invoke_040 + 25
21  UIKit                               0x00fe94e9 __block_global_0 + 32
22  libdispatch.dylib                   0x0298b53f _dispatch_call_block_and_release + 15
23  libdispatch.dylib                   0x0299d014 _dispatch_client_callout + 14
24  libdispatch.dylib                   0x0298d418 _dispatch_queue_drain + 239
25  libdispatch.dylib                   0x0298d2a6 _dispatch_queue_invoke + 59
26  libdispatch.dylib                   0x0298e280 _dispatch_root_queue_drain + 231
27  libdispatch.dylib                   0x0298e450 _dispatch_worker_thread2 + 39
28  libsystem_c.dylib                   0x93aeae12 _pthread_wqthread + 441
29  libsystem_c.dylib                   0x93ad2cca start_wqthread + 30 
```

同样在模拟器上，应用程序挂起一段时间，然后在调试器上抛出异常并崩溃：

```
 Mono.Debugger.Soft.VMDisconnectedException: Exception of type 'Mono.Debugger.Soft.VMDisconnectedException' was thrown. at Mono.Debugger.Soft.Connection.SendReceive (CommandSet command_set, Int32 command, Mono.Debugger.Soft.PacketWriter packet) [0x00117] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/contrib/Mono.Debugger.Soft/Mono.Debugger.Soft/Connection.cs:1420 
  at Mono.Debugger.Soft.Connection.Type_GetCustomAttributes (Int64 id, Int64 attr_type_id, Boolean inherit) [0x00000] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/contrib/Mono.Debugger.Soft/Mono.Debugger.Soft/Connection.cs:1986 
  at Mono.Debugger.Soft.TypeMirror.GetCAttrs (Mono.Debugger.Soft.TypeMirror type, Boolean inherit) [0x0003d] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/contrib/Mono.Debugger.Soft/Mono.Debugger.Soft/TypeMirror.cs:679 
  at Mono.Debugger.Soft.TypeMirror.GetCustomAttributes (Boolean inherit) [0x00000] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/contrib/Mono.Debugger.Soft/Mono.Debugger.Soft/TypeMirror.cs:664 
  at Mono.Debugging.Soft.SoftDebuggerAdaptor.OnGetTypeDisplayData (Mono.Debugging.Evaluation.EvaluationContext gctx, System.Object type) [0x0001e] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/src/addins/MonoDevelop.Debugger.Soft/Mono.Debugging.Soft/SoftDebuggerAdaptor.cs:1066 
Application Terminated
Mono.Debugger.Soft.VMDisconnectedException: Exception of type 'Mono.Debugger.Soft.VMDisconnectedException' was thrown.
  at Mono.Debugger.Soft.Connection.SendReceive (CommandSet command_set, Int32 command, Mono.Debugger.Soft.PacketWriter packet) [0x0013f] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/contrib/Mono.Debugger.Soft/Mono.Debugger.Soft/Connection.cs:1425 
  at Mono.Debugger.Soft.Connection.Type_GetMethodsByNameFlags (Int64 id, System.String name, Int32 flags, Boolean ignoreCase) [0x00016] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/contrib/Mono.Debugger.Soft/Mono.Debugger.Soft/Connection.cs:2002 
  at Mono.Debugger.Soft.TypeMirror.GetMethodsByNameFlags (System.String name, BindingFlags flags, Boolean ignoreCase) [0x0001c] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/contrib/Mono.Debugger.Soft/Mono.Debugger.Soft/TypeMirror.cs:691 
  at Mono.Debugging.Soft.SoftDebuggerAdaptor.OverloadResolve (Mono.Debugging.Soft.SoftEvaluationContext ctx, System.String methodName, Mono.Debugger.Soft.TypeMirror type, Mono.Debugger.Soft.TypeMirror[] argtypes, Boolean allowInstance, Boolean allowStatic, Boolean throwIfNotFound) [0x00073] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/src/addins/MonoDevelop.Debugger.Soft/Mono.Debugging.Soft/SoftDebuggerAdaptor.cs:1231 
  at Mono.Debugging.Soft.SoftDebuggerAdaptor.CallToString (Mono.Debugging.Evaluation.EvaluationContext ctx, System.Object obj) [0x00107] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/src/addins/MonoDevelop.Debugger.Soft/Mono.Debugging.Soft/SoftDebuggerAdaptor.cs:91 
  at Mono.Debugging.Evaluation.ObjectValueAdaptor.TargetObjectToObject (Mono.Debugging.Evaluation.EvaluationContext ctx, System.Object obj) [0x00349] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/src/core/Mono.Debugging/Mono.Debugging.Evaluation/ObjectValueAdaptor.cs:980 
  at Mono.Debugging.Soft.SoftDebuggerAdaptor.TargetObjectToObject (Mono.Debugging.Evaluation.EvaluationContext gctx, System.Object obj) [0x001a5] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/src/addins/MonoDevelop.Debugger.Soft/Mono.Debugging.Soft/SoftDebuggerAdaptor.cs:1400 
  at Mono.Debugging.Evaluation.ExpressionEvaluator.TargetObjectToExpression (Mono.Debugging.Evaluation.EvaluationContext ctx, System.Object obj) [0x00000] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/src/core/Mono.Debugging/Mono.Debugging.Evaluation/ExpressionEvaluator.cs:83 
  at Mono.Debugging.Evaluation.ObjectValueAdaptor.CreateObjectValueImpl (Mono.Debugging.Evaluation.EvaluationContext ctx, IObjectValueSource source, ObjectPath path, System.Object obj, ObjectValueFlags flags) [0x000f5] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/src/core/Mono.Debugging/Mono.Debugging.Evaluation/ObjectValueAdaptor.cs:385 
  at Mono.Debugging.Evaluation.ObjectValueAdaptor.CreateObjectValue (Mono.Debugging.Evaluation.EvaluationContext ctx, IObjectValueSource source, ObjectPath path, System.Object obj, ObjectValueFlags flags) [0x00000] in /Users/builder/data/lanes/monodevelop-lion-monodevelop-3.0.4-branch/ea010826/source/monodevelop/main/src/core/Mono.Debugging/Mono.Debugging.Evaluation/ObjectValueAdaptor.cs:93 
```

设备上的本机堆栈跟踪：

```
0   MyAppProject                        0x01b39e85 mono_handle_native_sigsegv + 244
1   MyAppProject                        0x01afe3cf mono_sigsegv_signal_handler + 130
2   libsystem_c.dylib                   0x3aaa8e93 _sigtramp + 42
3   MyAppProject                        0x01b92a9d mono_domain_get + 20
4   MyAppProject                        0x01b5d53b mono_runtime_invoke + 90
5   MyAppProject                        0x01bbd8c0 monotouch_exception_handler + 72
6   CoreFoundation                      0x36cee57f <redacted> + 614
7   libobjc.A.dylib                     0x34ffea65 <redacted> + 128
8   libc++abi.dylib                     0x33e4807b <redacted> + 78
9   libc++abi.dylib                     0x33e48114 <redacted> + 19
10  libc++abi.dylib                     0x33e49513 __cxa_throw + 122
11  libobjc.A.dylib                     0x34ffe9bf objc_exception_throw + 94
12  CoreFoundation                      0x36cee15d <redacted> + 0
13  Foundation                          0x3477030b <redacted> + 86
14  UIKit                               0x3834a925 <redacted> + 1844
15  UIKit                               0x38349a7b <redacted> + 634
16  CoreFoundation                      0x36ceb62f <redacted> + 714
17  UIKit                               0x383497f5 <redacted> + 136
18  UIKit                               0x384275e5 <redacted> + 60
19  UIKit                               0x383b5cd7 <redacted> + 206
20  UIKit                               0x383b5b6d <redacted> + 264
21  libdispatch.dylib                   0x359e29f7 <redacted> + 30
22  UIKit                               0x383b5a61 <redacted> + 92
23  UIKit                               0x383bf0d5 <redacted> + 32
24  libdispatch.dylib                   0x359e43f7 <redacted> + 42
25  UIKit                               0x383bf0b1 <redacted> + 88
26  libdispatch.dylib                   0x359df11f <redacted> + 10
27  libdispatch.dylib                   0x359e2ecf <redacted> + 142
28  libdispatch.dylib                   0x359e2dc1 <redacted> + 40
29  libdispatch.dylib                   0x359e391d <redacted> + 184
30  libdispatch.dylib                   0x359e3ac1 <redacted> + 84
31  libsystem_c.dylib                   0x3aa76a11 <redacted> + 360
32  libsystem_c.dylib                   0x3aa768a4 start_wqthread + 8 
```

任何帮助表示赞赏。谢谢。

更新：

不幸的是，这里似乎存在不止一个错误。

就我而言，Mail Composer 的崩溃不是由外观或属性字符串引起的。我测试了所有可能的连接，但我的代码崩溃了。

所以我开始逐行注释我所有的代码，我把它钉牢了：

这是应用内购买代码。

我正在使用 xamarin 网站上的应用内购买示例中的代码。

如果我使用 SKProductRequest 类仅评论这一行：

productsRequest.Start();

MFMailComposer 打开并且运行良好！

所以我在原始 Xamarin 示例项目上测试了 MFMailComposer：

[http://docs.xamarin.com/ios/tutorials/In-App_Purchasing](http://docs.xamarin.com/ios/tutorials/In-App_Purchasing) http://docs.xamarin.com/@api/deki/files/3300/=InAppPurchaseSample.zip

我刚刚将此代码添加到 NonConsumableViewController 类：

```
/// <summary>
        /// TEST MAIL COMPOSER BUG - START
        /// </summary>

        MFMailComposeViewController _mail;

        void HandleFinished (object sender, MFComposeResultEventArgs e)
        {

        }

        public void TestMailComposer ()
        {
            var button = UIButton.FromType(UIButtonType.RoundedRect);
            button.Frame = new RectangleF(20f, 0f, 280f, 40f);
            button.TouchUpInside += (object sender, EventArgs e) => {
                if (MFMailComposeViewController.CanSendMail) {
                    _mail = new MFMailComposeViewController ();
                    _mail.SetSubject ("The Subject");
                    _mail.SetToRecipients (new [] {"the@recipient.com"});
                    _mail.SetMessageBody ("Some text to e-mail stuff too" +
"\n", false);
                    _mail.Finished += HandleFinished;

                    this.PresentViewController(_mail, true, null);

                } else {
                    //handle not being able to send mail
                    UIAlertView alert = new UIAlertView ("Mail Alert", "Error:
Check your eMail configuration", null, "OK", null);
                    alert.Show ();
                }
            };
            button.SetTitle("Button", UIControlState.Normal);
            View.AddSubview(button);
        }

        ///
        /// TEST MAIL COMPOSER BUG - END
        /// 
```

当我按下按钮时它挂起。

更新：

我尝试了 6.0.2 修补程序（抱歉等待，但我不得不将我的代码恢复到原始状态）。外观错误现在消失了。

SKProductRequest 类的问题似乎不同，而且不那么紧迫。它没有挂起，它只是将 MF Mail 作曲家的打开延迟了一段时间。但这似乎是一个不相关的错误。

这是错误参考： [https ://bugzilla.xamarin.com/show_bug.cgi?id=7443](https://bugzilla.xamarin.com/show_bug.cgi?id=7443)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:27:33.690

这可能会有所帮助（来自 Xamarin 错误）

```
cancelAttributes = new UITextAttributes();
//cancelAttributes.TextShadowOffset = new UIOffset(0, -1);
cancelAttributes.TextShadowColor = UIColor.White.ColorWithAlpha(0.5f);
cancelAttributes.TextColor = Resources.CancelButtonDisabled;

UIBarButtonItem.AppearanceWhenContainedIn(typeof(UISearchBar)).SetTitleTextAttributes(cancelAttributes, UIControlState.Disabled); 
```

如果我的代码中有注释位，我会遇到问题，但如果它被注释掉则不会。你在使用 UIAppearance 的东西吗？

# java - 如何在 Aspose.Words 文档的每一页上插入浮动形状？

> ID：12567712
> 
> 赞同：0
> 
> 时间：2012-09-24T15:02:08.130
> 
> 标签：java, aspose

我有一个 Aspose.Words 文档。我想在文档的每一页上插入一个文本框形状。

这是我的文件：

```
 // Aspose.Words document
 Document document = new Document();

 // The DocumentBuilder
 DocumentBuilder builder = new DocumentBuilder(document);

 builder.insertHtml("Here, there is a big String with a lot of HTML."); 
```

这是我为第一页做的：

```
 Shape textBox = new Shape(document, ShapeType.TEXT_BOX);
 textBox.setWrapType(WrapType.SQUARE);
 // Shape position
 textBox.setDistanceTop(0);
 textBox.setDistanceLeft(42);
 // Shape dimensions
 textBox.setWidth(200);
 textBox.setHeight(20);

 // ... other options useless here.

 // Paragraph, content of the Shape
 Paragraph paragraph = new Paragraph(document);
 Run run = new Run(document);
 run.setText("Here some text.");
 paragraph.appendChild(run);

 textBox.appendChild(paragraph);

 // Now I insert my Shape on the first page.
 builder.moveToDocumentStart();
 builder.insertNode(textBox); 
```

这对于第一页非常有用。

我也知道我可以得到页数：

```
 document.getPageCount(); 
```

但是我不知道如何浏览所有页面。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:57:09.170

我的名字是 Nayyer，我是 Aspose 的支持开发人员/技术布道者。

如果您需要在所有页面上显示某些内容，则必须将该内容移动到页眉/页脚区域。请尝试按照类似于[How to add Watermark to document](http://www.aspose.com/docs/display/wordsnet/How+to++Add+a+Watermark+to+a+Document)的方法进行操作。请注意，内容/对象可以放置在页面上的任何位置，但为了在所有页面上显示某些内容，内容应该只锚定在页眉/页脚内。

现在关于指定形状的位置，请注意形状具有RelativeHorizo​​ntalPosition 属性，如果将其设置为RelativeHorizo​​ntalPosition.Page，然后设置Left 和Top 位置，您可以将其浮动在页面中心甚至底部的任何位置（即使它锚定在 Header 内）。

*PS，Word女士只是在运行时重复每个页面的页眉/页脚中的任何内容，但当然只有一个内容副本。*

# python - Hyper Strings InterviewStreet：Python

> ID：12567717
> 
> 赞同：1
> 
> 时间：2012-09-24T15:02:17.033
> 
> 标签：python, algorithm

[https://www.interviewstreet.com/challenges/dashboard/#problem/4f802ebfad2a1](https://www.interviewstreet.com/challenges/dashboard/#problem/4f802ebfad2a1)
我的代码通过了 6/10 个测试用例。

```
from collections import Counter
j,k = map(int, raw_input().split())

y = Counter(len(raw_input()) for i in range(j))

saved = {}

def f(x):
    if x in saved:  return saved[x]
    if x<1: return 0
    k = y[x] if x in y else 0
    for i in y:
        k += y[i]*f(x-i)
   saved[x] = k
   return k
x = 0
for i in xrange(1,k+1):
    x+=f(i)

print (x+1)%1000000007 
```

'y'中的键是超级字符串的长度，它的值是集合'H'中具有该长度的超级字符串的数量。

'已保存' 处理记忆。

f(x) 计算长度为 x 的超字符串。我遍历最后一个'for循环'中的所有值。

x 有除空字符串 ('') 之外的结果，因此 x+1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:15:36.657

我认为在任何超级字符串与任何其他超级字符串连接的情况下，此代码都会失败。在这种情况下，这段代码会多次添加一些案例。例如：

```
3 2
a
b
ab 
```

您的输出：8
正确输出：7
“ab”的双重计数
我自己正在尝试这个问题，如果它得分 10/10，将发布答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:44:05.270

好的，这是我的代码。我已将您的代码用作算法，但删除了可以通过连接其他超级字符串形成的超级字符串。感谢您发布您的问题，我在看到这篇文章之前的原始代码非常不理想。欢迎任何进一步优化这一点的建议。

```
from collections import Counter
j,k = map(int, raw_input().split())

supers_list = []

for i in range(j):
    supers_list.append(raw_input())

def check_concat(Str_, Sub_Str_):
    if Sub_Str_ == "":
        return False

    for i in supers_list:
        if i == Sub_Str_ and Str_ != Sub_Str_:
        return True
    x = Sub_Str_.startswith(i)
    if x == True:
        if check_concat(Str_, Sub_Str_[len(i):]) == True:
            return True
return False

def filter_():
    tmp = []
    global supers_list
    for i in supers_list:
        if check_concat(i,i) == False:
            tmp.append(i)
    supers_list = tmp

filter_()

y = Counter(len(i) for i in supers_list)

saved = {}

def f(x):
    if x in saved:  return saved[x]
    if x<1: return 0
    k = y[x] if x in y else 0
    for i in y:
        k += y[i]*f(x-i)
    saved[x] = k
    return k
x = 0
for i in xrange(1,k+1):
    x+=f(i)

print (x+1)%1000000007 
```

# java - 发送什么到 actionPerformed？

> ID：12567719
> 
> 赞同：0
> 
> 时间：2012-09-24T15:02:25.503
> 
> 标签：java, action, awt

`actionPerformed(ActionEvent e)`如果我自己呼吁采取行动，那么我应该发送什么`e`？我的逻辑不使用这个参数，所以我可以发送`null`，但是这里定期发送什么？如果动作是由按钮调用的，那么它在这里发送什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:07:05.637

阅读[ActionEvent](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/ActionEvent.html)的文档。构造函数文档会告诉你你想知道什么。有关更多信息，您还可以简单地添加一个按钮和一个断点。按下按钮并获取所有详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:12:36.917

通常，您传递 3 或 4 个部分（根据 的构造函数[`ActionEvent`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionEvent.html)）：

*   源（通常是 a `Component`，但实际上可以是任何东西；通常是导致事件生成的 UI 的原始部分），
*   ID（几乎总是`ActionEvent.ACTION_PERFORMED`，但也可以是`ActionEvent.ACTION_FIRST`or `ActionEvent.ACTION_LAST`），
*   命令字符串（参见[`AbstractButton.getActionCommand`](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#getActionCommand%28%29)），
*   和任何修饰符（例如，`ActionEvent.ALT_MASK | ActionEvent.SHIFT_MASK`如果用户`Alt``Shift`在执行操作时按住）。

修饰符是可选的，其他都是必需的。您还可以传递`when`事件的时间，但通常不是必需的，因为它默认为构造事件的时间。

# json - elasticsearch 词组搜索

> ID：12567722
> 
> 赞同：3
> 
> 时间：2012-09-24T15:02:29.890
> 
> 标签：json, search, nosql, full-text-search, elasticsearch

我在弹性搜索中有一个文档，看起来像......

```
{
    "items":
    [
        "ONE BLAH BLAH BLAH TWO BLAH BLAH BLAH THREE",
        "FOUR BLAH BLAH BLAH FIVE BLAH BLAH BLAH SIX"
    ]
} 
```

我希望能够使用短语查询来搜索此文档，例如...

```
{
    "match_phrase" : {
        "items" : "ONE TWO THREE"
    }
} 
```

这样无论中间的单词如何，它都会匹配。单词也需要按照这个顺序。我意识到这可以通过该`slop`属性来实现，但是当我尝试它时，如果斜率超过我正在搜索的单词之间的单词，并且因为这是我不知道的单词数量，它似乎会换行。 t认为slop是合适的。另外我只需要搜索数组中的每个项目，所以......

```
{
    "match_phrase" : {
        "items" : "ONE TWO SIX"
    }
} 
```

`SIX`不会像在数组中的不同项目中那样将此文档与 和`ONE`匹配`TWO`。

所以我的问题是，这是否可以通过 elasticsearch 实现，还是我必须创建一个对象数组并使用嵌套查询来搜索它们？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T17:24:45.000

可以使用[Span Near Query](http://www.elasticsearch.org/guide/reference/query-dsl/span-near-query.html)来完成。我不确定您的实验出了什么问题，以及您所说的“包装”是什么意思。我只能猜测，也许您指定了 "in_order":"false" 而您的查询只是忽略了术语的顺序。你能举个例子吗？

为避免查询跨越多个项目，您需要使用“position_offset_gap”属性来增加映射中项目之间的“间隙”。这是一个例子：

```
curl -XDELETE "localhost:9200/slop-test"
echo
curl -XPUT "localhost:9200/slop-test" -d '{
  "settings" : {
    "index" : {
        "number_of_shards" : 1,
        "number_of_replicas" : 0
    }    
  },
  "mappings" : {
    "doc" : {
      "properties" : {
        "items" : {
          "type" : "string",
          "position_offset_gap": 100
        }
      }
    }
  }
}'
echo
curl -XPUT "localhost:9200/slop-test/doc/1" -d '{
  "items":
  [
      "ONE BLAH BLAH BLAH TWO BLAH BLAH BLAH THREE",
      "FOUR BLAH BLAH BLAH FIVE BLAH BLAH BLAH SIX"
  ]
}'
curl -XPOST "localhost:9200/slop-test/_refresh"
echo
curl "localhost:9200/slop-test/_search?pretty=true" -d '{
  "query" : {
    "span_near" : {
      "clauses" : [
        { "span_term" : { "items" : "one" } },
        { "span_term" : { "items" : "two" } },
        { "span_term" : { "items" : "three" } }
      ],
      "slop" : 40,
      "in_order" : true
    }
  }
}'
echo
curl "localhost:9200/slop-test/_search?pretty=true" -d '{
  "query" : {
    "span_near" : {
      "clauses" : [
        { "span_term" : { "items" : "one" } },
        { "span_term" : { "items" : "two" } },
        { "span_term" : { "items" : "six" } }
      ],
      "slop" : 40,
      "in_order" : true
    }
  }
}'
echo 
```

# coffeescript - LESS 预编译器

> ID：12567727
> 
> 赞同：0
> 
> 时间：2012-09-24T15:02:53.347
> 
> 标签：coffeescript, less

我记得看到过一些关于编写 LESS 的更简单的方法，它的语法类似于咖啡脚本。我相信这是写 LESS 的一种速记方式。有人知道那是什么语言吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:07:23.347

您一定在考虑其他 CSS 预处理器之一：

*   Sass（.sass 语法）- [http://sass-lang.com/](http://sass-lang.com/)
*   手写笔 - [http://learnboost.github.com/stylus/](http://learnboost.github.com/stylus/)

# facebook - 分享一个粉丝页面并计算链接的粉丝数量

> ID：12567731
> 
> 赞同：0
> 
> 时间：2012-09-24T15:03:05.950
> 
> 标签：facebook, facebook-page

我们想计算我们的一位粉丝分享我们的 facebook 粉丝页面所产生的粉丝数量，我们该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:48:18.867

你不能，这样的“赞”按钮没有推荐跟踪。如果您正在跟踪外部 URL 之类的点赞，您可以使用引荐来源网址设置某些内容并跟踪登录页面，但这不适用于 Facebook 本身发生的点赞

# cloud-foundry - Cloud Foundry 基础架构级别的安全性？

> ID：12567735
> 
> 赞同：1
> 
> 时间：2012-09-24T15:03:22.197
> 
> 标签：cloud-foundry

我目前正在评估我的公司是否可以将 Cloud Foundry 至少用于我们的测试环境，如果不是生产环境的话。

我想知道是否可以在基础设施而不是应用程序级别保护对这些（grails）应用程序的访问？我在文档中找不到任何表明这是可能的内容？

例如，我可以在防火墙级别通过 IP 锁定对应用程序的访问吗？

我意识到我可以通过以下方式在应用程序级别提供安全性：

*   春季安全
*   Cloud Foundry UAA，托管 SSO 解决方案

...如果我们可以保证环境可以被锁定更多，它将为公司的人们提供更多的舒适感。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:12:05.270

Cloud Foundry 本身并不关心基础设施层的安全性，但是没有什么可以阻止您使用位于 CF 部署前面的防火墙来锁定访问。例如，您可以限制对所有 CF IP 的访问（第 3 层），或通过 HTTP 主机标头检查（第 7 层）限制对特定应用程序的访问。这些功能取决于您使用的特定防火墙软件。

仅供参考，有一个专门的 Google Group 用于讨论与 OSS Cloud Foundry 项目相关的主题：[vcap-dev](https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev "vcap-开发")

# asp.net-mvc-3 - Http Post 方法触发两次

> ID：12567740
> 
> 赞同：0
> 
> 时间：2012-09-24T15:03:47.210
> 
> 标签：asp.net-mvc-3

我有 2 个视图。视图 1 包含一个 html 表格，每一行都包含一个指向视图 2 的链接。

这是我的看法1

```
<tr>
    <td>
        <a href="@Url.Action("AssignStudent", "Session", new { slotId = item.TimeSlotId, roomId = item.RoomId, roomName = item.RoomName, starttime = dt })">Assign Session </a> 
    </td>
<tr/> 
```

单击此它会在会话控制器中触发 assignstudent 方法

```
[HttpPost]
[AllowAnonymous]
public ActionResult AssignStudent(SessionDashboardViewModel dashboardModel)
{
    dashboardModel.SessionId = Convert.ToInt32(Request.Form["SessionId"]);
    dashboardModel.RoomId = Convert.ToInt32(Request.Form["hdnRoomId"]);
    dashboardModel.TimeSlotId= Convert.ToInt32(Request.Form["hdnSlotId"]);    
    SaveMethod(); //save working fine
    dashboardModel.SessionId = result;  
    ModelState.Clear();
    dashboardModel = InitViewData(dashboardModel);
    return View("SessionDashboard",dashboardModel);// call to source page
} 
```

保存数据后问题就来了.

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:11:32.793

而不是你的最后一行代码

```
return RedirectToAction("SessionDashboard", dashboardModel); 
```

# android - 如何使用 SOAP Web 服务在 Android 上检查用户订阅的有效性？

> ID：12567744
> 
> 赞同：0
> 
> 时间：2012-09-24T15:03:54.243
> 
> 标签：android, rest, soap, google-api, in-app-billing

我知道安全检查这一点的最佳方法是使用 Google Play Developer API 并将数据存储在我自己的服务器上。

但是，问题是我有一个 SOAP Web 服务，而 Google Play API 是基于 REST 的。由于这些不能相互交互，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:23:05.540

如果您的应用需要调用基于 REST 的服务，那么您只需调用它并确保发送/接收的任何有效负载都是 JSON 格式。如果您的应用程序需要调用基于 SOAP 的服务，那么只需调用它，确保有效负载是 SOAP 格式的。如果您必须从您的服务调用 REST 服务，那么您只需使用 JSON 格式的有效负载调用它。因此，如果您的服务需要在您的应用程序调用您的服务后调用 REST 服务，那么您需要翻译从您的应用程序发送的有效负载，以便您可以调用 REST 服务，当您的服务得到响应时，您需要将其转换回 SOAP 格式。这一切都取决于哪个组件正在调用什么服务。

# python - 带有非 Python 资源的 Python 包？（不是鸡蛋文件[还]）

> ID：12567745
> 
> 赞同：2
> 
> 时间：2012-09-24T15:03:55.213
> 
> 标签：python

我正在尝试找出我正在编写的 Python 程序的基本结构，该程序必须包含非 Python 资源才能实现其功能。特别是，它包括 HTML、CSS、JS 和必须*从包中复制出来以*生成报告的图像。目前的基本结构如下所示：

```
/project
  /my-package
    /sub-package-a
      __init__.py
      ...
    /sub-package-b
      __init__.py
      ...
    /static-content
      stuff.html
      ...
    __init__.py
    util.py
    command.py 
```

我的基本问题是：如果我从任意目录运行`python my-package/command.py`或`python -m my-package`，我如何访问`static-content`. 如果我以后把它变成一个可安装的鸡蛋，这会改变吗？

# c# - 在c#中用逗号输入十进制

> ID：12567751
> 
> 赞同：0
> 
> 时间：2012-09-24T15:04:13.713
> 
> 标签：c#, string, culture

我有个问题

在印度尼西亚，我们通常使用 8,5 而不是 8.5，但是当我在文本框中输入 8,5 时，它的意思是 85

如何解决？只是我想用逗号改变点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T15:06:29.843

您可能正在`double.TryParse`某处使用。切换[到此重载](http://msdn.microsoft.com/en-us/library/3s27fasw.aspx)并`provider`使用`new CultureInfo("id-ID")`.

示例`double.Parse`：

```
double result = double.Parse("6,5", new CultureInfo("id-ID")); 
```

# xslt - 如果 XML 节点在同一页面上，则它们的总数

> ID：12567757
> 
> 赞同：2
> 
> 时间：2012-09-24T15:04:31.940
> 
> 标签：xslt, xsl-fo

我有一个包含产品及其价格的 XML 文件。XML 文件中的产品数量是可变的，但至少为 10 个。作为 XML 的示例，我在下面做了一个非常简单的示例：

```
<Products>
    <Product>
        <Productname>Product 1</Productname>
        <Price>90.45</Price>
    </Product>
    <Product>
        <Productname>Product 2</Productname>
        <Price>30,25</Price>
    </Product>
</Products> 
```

我有一个 XSLT，它以 PDF 格式为所有 XML 产品开具发票。到目前为止没有问题。这是我的问题：我想在每一页上都有产品的总和。因此，如果产品 1 到 5 在第 1 页上，我想知道这些产品的价格总和。如果产品 6 到 10 在第 2 页，那么我想要产品 1 到 10 的总和。如果产品 7 到 15 在第 3 页，那么我想要产品 1 到 15 的总和，依此类推.

产品和价格在一个表格中，为每个产品添加一行。问题是我找不到一种方法来找出哪些产品在一个页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:25:48.943

我不能确切地告诉你如何编写你的样式表，但这看起来像是一个可以通过使用`fo:marker`and `fo:retrieve-marker`（或者也许`fo:retrieve-table-marker`）来解决的问题。

标记是从源文档中“检索”以显示在输出中的静态内容区域或表页眉/页脚中的一段命名文本或计算值。标记通常用于运行页眉，但它们也可用于显示累积数量的小计。请参阅[http://www.w3.org/TR/xsl11/#fo_marker](http://www.w3.org/TR/xsl11/#fo_marker)。

这是一个完整的例子： http: [//markmail.org/message/t6hl5mo6eo5mppj4](http://markmail.org/message/t6hl5mo6eo5mppj4)。希望您可以根据自己的需要进行调整。

# c# - 在运行时添加属性

> ID：12567761
> 
> 赞同：2
> 
> 时间：2012-09-24T15:04:38.097
> 
> 标签：c#, wpf, listview, gridview, binding

我有一个`List<Data>`地方：

```
class Data
{
   public string Name { get; set; }
} 
```

我将此列表`ItemsSource`用作`ListView`. of my是一个（最初） ，我使用

my绑定属性。`View``ListView``GridView``GridViewColumn``Data.Name``DisplayMemberBinding``GridViewColumn`

在运行时**可能会**发生我`GridViewColumn`向 my添加一个新的`GridView`，所以我需要将一个**新**属性绑定`Data`到这个新列。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:47:27.410

不，您不能在运行时添加“常规”属性 - 坦率地说，您所描述的内容可能想要绑定到 DataTable，并将数据映射到其中。您*可以*在运行时执行此操作，但它非常复杂。DataTable 已经有了完整的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:44:18.823

编辑：看起来我误解了这个问题。如果您尝试向`Data`课程添加属性，那么我认为您不走运。如果您已经拥有该属性并且只是想将该现有属性绑定到`GridView`，那么下面的代码应该会有所帮助。

假设`DataContext`GridView 已经设置，您可以使用类似于[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.gridview.columns.aspx)示例的内容：

```
GridViewColumn gvc = new GridViewColumn();
gvc.DisplayMemberBinding = new Binding("Surname");
gvc.Header = "Surname";
gvc.Width = 100;
myGridView.Columns.Add(gvc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:42:00.857

向数据实例添加实际属性的解决方案相当复杂，

但也许这些解决方案之一就足够了

你可以使用动态（更多细节在这里：[动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)）

```
 dynamic dynamicData = new ExpandoObject();
        dynamicData.Name = "Name";
        dynamicData.Surname = "SomeSurname"; 
```

如果你可以重建数据项的集合，你可以使用匿名类型（更多细节在这里[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)）

```
 var data = new Data();
        string newPropertyName = "Surname";
        var data2 = new { Name = data.Name, newPropertyName = "SomeString" }; 
```

除非您使用 DataTemplates 绑定到具体的数据类型。

# javascript - JavaScript - 模拟轮子/UIPicker

> ID：12567762
> 
> 赞同：2
> 
> 时间：2012-09-24T15:04:41.970
> 
> 标签：javascript, jquery, html, css

我正在讨论一些模拟“价格合适”类型的轮子或样式 UIPicker 功能的方法。也就是说，我不需要 UIPicker 插件中的整个对话框和配色方案。我只需要能够通过几张图像制作动画来复制轮子的旋转。

例如，假设这是我的清单：
1984
1985
1987
1990
1994

假设这些数字在屏幕上：

1985
1987
1990

当用户单击 1990 时，列表会向上滑动，将 1985 移出屏幕，而 1994 出现在屏幕上。留给我们：

1987
1990
1994

然后，当用户单击 1994 时，列表再次向上滑动，1987 离开屏幕，1984 出现在屏幕上。或者，列表也可以向下滑动……那么，实现这一目标的首选方法是什么？我已经讨论了一个[无限滚动](http://www.stevefenton.co.uk/cmsfiles/assets/File/infinitescroller.html)条和一组超大图像（将在一个较小的 div 内以限制它在屏幕上的部分），每个组合可以向上/向下滑动，然后换出新组合并准备好下一个选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:12:51.587

我想有几种方法可以成功地做到这一点。就我个人而言，我只会在 jQuery animate 上使用 insertAfter 来获取第一个项目并将其附加到末尾，同时还修改列表的相对位置。这很有效，并且只有几行代码，但这取决于您希望它有多平滑。

就像是：

```
var $length = $('.list li').length--;
$('#foo').click(function(){
    $('.list').animate({
        top:'-30px'     
    },function(){
        $('.list li').eq(0).insertAfter($('.list li').eq($length));
        $('.list').css('top','0px');
    });
}); 
```

有效，但它不在我的脑海中，可能有一种更顺畅的方式来做到这一点。

# ruby-on-rails - 一周中各天的 Ruby 数据库结构

> ID：12567766
> 
> 赞同：0
> 
> 时间：2012-09-24T15:05:08.700
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3, database-design

好的，所以我们有一个名为 Schedule Model 的表和一个 Day 模型，其中包含一周中的几天。我们还有一个连接表，所以一个日程表可能有很多天。

我们正在考虑删除 Day 模型和 Join 表，并在 Schedule 表中放置一个带有 7 个布尔值的标志。知道是否有更好的方法在 Ruby 中实现这一点，而不会用 7 个布尔值弄乱调度表

# objective-c - 我应该把这个 UITableView 委托给哪里？

> ID：12567768
> 
> 赞同：0
> 
> 时间：2012-09-24T15:05:10.597
> 
> 标签：objective-c, ios, uitableview, delegation

我正在 iOS 中构建一个可滚动的网格布局。

层次结构如下：

```
(MyController) UITableViewController
  - Parent Table View (UITableView)
    - "Horizontal cell" (UITableViewCell)
      - Sub Table View (UITableView)
        - Sub table view cell (UITableViewCell)
        - Sub table view cell (UITableViewCell)
    - "Horizontal cell" (UITableViewCell)
      - Sub Table View (UITableView)
        - Sub table view cell (UITableViewCell)
        - Sub table view cell (UITableViewCell)
    - "Horizontal cell" (UITableViewCell)
      - Sub Table View (UITableView)
        - Sub table view cell (UITableViewCell)
        - Sub table view cell (UITableViewCell) 
```

我要决定的是子表视图是应该委托给它的父水平单元格还是委托给主视图控制器。

我的直觉是委托给视图控制器，但是我看到的这种方法的教程和示例都将子表视图委托给它的父表视图单元格。

**编辑**

澄清一下，水平单元格的表格视图将旋转 -90*，以便它的单元格水平滚动以创建网格效果。

# java - 多线程、java Main() 和视频播放

> ID：12567769
> 
> 赞同：1
> 
> 时间：2012-09-24T15:05:10.737
> 
> 标签：java, multithreading

我使用 Xuggler 显示视频。

我使用两个线程，一个用于音频，一个用于视频。

我遇到的问题是当我达到大约 30% 的 CPU 使用率时，视频开始卡顿，并且不再流畅。

但是如果我从 Main() 函数运行视频，视频是流畅的。问题是我不知道如何在主线程上播放视频。当我从子类启动 PlayVideo 函数时，它会阻塞系统。

欢迎任何帮助。

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:16:35.840

好的，所以我找到了解决方案

它脏得要命，但它确实有效。

实际上，我在 main() 的远端开始在主线程中播放视频（这样它不会阻塞 GUI 组件），然后我进入一个无限循环，当我想阅读时我退出了这个循环该视频。

主线程的优先级远高于任何其他线程，这就是我的视频在主线程上流畅的原因。

在这里，我希望我能像我一样帮助有需要的人。

# javascript - 未应用过滤器的完整 html 的 tinymce getcontent

> ID：12567772
> 
> 赞同：2
> 
> 时间：2012-09-24T15:05:16.363
> 
> 标签：javascript, editor, tinymce, wysiwyg

我想检索 tinymce 区域的 html 内容，但没有应用清理和过滤器。我怎样才能做到这一点？例如，使用此调用从 html 源代码中删除了换行符，但我想保留它们。

[http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.getContent](http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.getContent)

我一直在 chrome 中测试的函数调用：

```
console.log(tinyMCE.activeEditor.getContent({ format: 'raw' }));
console.log(tinyMCE.activeEditor.getContent({ format: 'text' })); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:08:33.860

这是使用 jQuery 的简单方法：

```
var ed = tinymce.get('your_editor_id');
var content = $(ed.getBody).html(); 
```

请注意，内容中可能存在一些 tinymce 内部标记（跨度）。

# jquery - 循环通过json数组Jquery

> ID：12567775
> 
> 赞同：1
> 
> 时间：2012-09-24T15:05:29.630
> 
> 标签：jquery, arrays, json, for-loop

我从 PHP 脚本返回以下数据：

[{"Town":"Mancetter"},{"Town":"Manchester"},{"Town":"Mancot Royal"}]

我基本上只想遍历结果并显示城镇，这是我的 jQuery：

```
function search_town(){

var keyword = $('.town_s').val()

    $.ajax({
        type: "GET",
        url: "class/ajax.php",
        data: { "town_search" : keyword },
        success: function(data){

            var data = $.parseJSON(data);

            for (var i = 0, l = data.length; i < l; i++) {

                    alert(i + ': ' + data[i]);
                }

        }
});

        } 
```

我没有得到想要的结果...警告的是 0:[object Object]

有什么想法我可能会出错吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:06:32.587

您需要指定要获取的属性

```
data[i].Town 
```

通过循环你正在遍历数组中的每个对象..所以第一次迭代会让你

```
{"Town":"Mancetter"} 
```

您可以通过使用访问循环中的属性`data[i].Town`

等等

# java - 如何限制 Java 应用程序中的 Web 服务使用？

> ID：12567777
> 
> 赞同：12
> 
> 时间：2012-09-24T15:05:33.427
> 
> 标签：java, web-services, security, rate-limiting

假设我有一个 Java 服务器应用程序，它实现了一些 Web 服务。还假设我可以对应用程序用户进行身份验证。

现在我想为*每个用户*添加一些服务使用限制：例如速率限制（每秒请求数）、最大请求大小等。

Java中是否有任何“即用型”库可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:42:29.487

您可以通过配置拦截器来使用 Apache CXF 做到这一点。这个[页面](http://cxf.apache.org/docs/jax-ws-configuration.html)有一个高级配置的例子。此[页面](http://cxf.apache.org/docs/interceptors.html)包含有关拦截器的详细信息。通过验证，您可以随心所欲。我不知道如何获得经过身份验证的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T21:53:15.587

如果您的所有呼叫都经过身份验证/授权服务，则可以将每个用户的限制合并到其中。我不知道允许您无需自定义编码的框架。

理想情况下，这种逻辑最好在服务本身之外进行配置。我知道骆驼为请求数量提供了内置限制。您可以定义自己的限制策略来映射每个用户请求的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-16T12:44:51.900

您需要创建一个简单的拦截器类。有一个 onPreExecute() 方法，您可以在其中放置自定义检查。我已经将它与 Spring 一起使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T18:29:18.513

我还没有看到类似的东西可用。但是，如果您使用的是 Java EE 集成安全性，您可以引导它实现您自己的 LoginModule，您可以在其中执行这些检查，而无需接触您的 Web 服务代码。

请参阅[http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASLMDevGuide.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASLMDevGuide.html)

# html - html5本地文件存储

> ID：12567778
> 
> 赞同：0
> 
> 时间：2012-09-24T15:05:36.633
> 
> 标签：html, offline, file-storage

我正在构建一个仅用于 iPad 的 web 应用程序。该应用程序是内部使用的，所以我不关心其他设备。该应用程序搜索我们的在线文档数据库 (PDF) 并提供指向它们的链接列表。

到目前为止，一切都很好。

我现在正在考虑如果用户由于某种原因不在线会发生什么。我能想到的最佳解决方案是用户 - 当他们在线时 - 下载他需要的 PDF 并将它们保存在本地。

这样做的最佳方法是什么？我可以很容易地将链接更改为指向包含动态构建清单的页面，但这是最好的方法吗？有没有更好的方法 - 也许使用 jQuery - 在本地下载和保存文件并从 webapp 中访问它们？

# android - 访问 ListView 每一行中的视图

> ID：12567779
> 
> 赞同：0
> 
> 时间：2012-09-24T15:05:37.763
> 
> 标签：android, android-listview, togglebutton, onclicklistener

我有一个`ListView`, 每一行`ListView`我有一个`ImageView`, 2 个`TextView`视图和 1 个`ToggleButton`。

如何访问一行中的视图（例如`ToggleButton`）？

我试过使用`OnClickListener`，但它没有用，我不知道为什么。以下是我尝试过的：

```
 @Override
 public void onListItemClick(ListView parent, View view, int position, long id){
    ToggleButton tb2 = (ToggleButton)parent.findViewById(R.id.star);
    if(tb2.isChecked()){
    Toast.makeText(MainActivity.this, "TOOGLE BUTTON TEST", Toast.LENGTH_LONG).show();
    }
} 
```

我的行布局：

```
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:drawable/list_selector_background"
    android:clickable="true"
    android:gravity="fill_horizontal"
    android:longClickable="true"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:paddingBottom="8dip"
    android:paddingTop="5dip" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="10dp"
        android:scaleType="fitXY"
        android:src="@drawable/contact_user" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="fill_horizontal"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_weight="1"
        android:gravity="fill"
        android:orientation="vertical" >
        <TextView
            android:id="@+id/nameClient"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#ffffff" />
        <TextView
            android:id="@+id/accountClient"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#483ca0" />
    </LinearLayout>

    <ToggleButton
        android:id="@+id/star"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="20dp"
        android:background="@drawable/list_star_selector"
        android:clickable="true"
        android:enabled="true"
        android:inputType="none"
        android:textOff=""
        android:textOn="" />

</TableRow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:09:55.453

尝试

```
ToggleButton tb2 = (ToggleButton)view.findViewById(R.id.star); 
```

`ListView parent`是父视图，`View view`是您实际单击的视图并包含您需要的子视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:25:42.047

一种方法是您可以在自定义适配器类中定义侦听器

和

第二种方法是

ToggleButton 按钮=(ToggleButton)view.findViewBtId(R.id.star);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:47:02.720

我建议实际上将 onClickListener 设置为适配器的 getView() 中的视图背景。通过这样做，您可以访问在列表视图滚动时回收的 convertView，并可以根据您的状态对其进行修改。

另外，请确保在设置视图标签后设置它，以免它回收您的侦听器并给您带来奇怪的错误。=)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:18:34.467

在您的示例中，`parent`是您的列表视图，`view`而是在 ListView 中单击的视图。您可以使用`view`or（来自 android 的文档）：如果子类需要访问与所选项目关联的数据，则可以调用 getListView().getItemAtPosition(position)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T15:26:14.477

```
public void onListItemClick(ListView parent, View view, int position, long id){
    ToggleButton tb2 = (ToggleButton)view.findViewById(R.id.star);
    if(tb2.isChecked()){
        Toast.makeText(MainActivity.this, "I clicked the ToggleButton on row " + position, Toast.LENGTH_LONG).show();
    }
} 
```

试试看;-)

# git - 我真的需要帮助来了解我的 git 服务器是如何设置的以及我的分支机构在做什么

> ID：12567784
> 
> 赞同：1
> 
> 时间：2012-09-24T15:05:56.223
> 
> 标签：git, branch, version

我真的很抱歉这是一个模糊的要求，但我需要一些 git 帮助。我知道做一些非常愚蠢的事情，但还不足以知道如何避免做一些非常愚蠢的事情。

我有一个远程 git 服务器和该服务器上的工作目录。我只需要一个带有开发分支的 1.0 版的“master”和一个带有自己的开发分支的 1.1 版的“master”。我需要能够独立完成这些工作。我只想要一个存储库，所以也许会有一个拥有自己的 devel 分支的 1.0 分支和一个拥有自己的 devel 分支的 1.1 分支的 master。

我不介意尝试，如果我有一个退出计划，也不介意学习艰苦的方式，但我不是唯一使用这个存储库的人，我被要求为 1.1 版工作区小组，我不知道最好的方法。我也不知道如何摆脱我可能做过的任何愚蠢的事情。

经过数小时的谷歌搜索并试图找到 git 书籍和食谱，我遇到的任何事情都没有帮助我，因为我不知道如何正确引用我的远程分支，除此之外，还有一些基本的东西我'我无法理解。我现在不知道还能去哪里。我看过很多帖子让我接近我需要的东西，但是我无法通过一些障碍而无法参考我的设置，因为 git 还没有点击我，而且我无法推断其他人对我的建议没有提出更具体的问题。

有人愿意和我做一些来回的问题/响应会议来帮助我了解 git 的大脑并验证我的设置吗？

这里有一点让我们开始：

```
SERVER$ git branch -r
  origin/devel
  origin/master
SERVER$ git branch -l
* devel
  master
SERVER$ git branch -a
* devel
  master
  remotes/origin/devel
  remotes/origin/master

SERVER$ git remote show origin
* remote origin
  Fetch URL: /git/sold.git
  Push  URL: /git/sold.git
  HEAD branch: master
  Remote branches:
    devel  tracked
    master tracked
  Local branch configured for 'git pull':
    master merges with remote master
  Local refs configured for 'git push':
    devel  pushes to devel  (up to date)
    master pushes to master (up to date) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:08:07.117

这只是我关于stackoverflow的第二篇文章，希望对您有所帮助。

**主分支**

*内部仓库切换到主分支*

```
git checkout master 
```

*现在创建一个位于标签 1.0 的 master 分支的副本*

```
git checkout 1.0
git checkout -b master_1.0 
```

*切换回master分支*

```
git checkout master 
```

*现在创建位于标签 1.1 的主分支的副本*

```
git checkout 1.1
git checkout -b master_1.1 
```

**开发分支**

*切换回master分支*

```
git checkout master 
```

*现在从位于标签 1.0 的 master 创建一个 dev 分支*

```
git checkout 1.0
git checkout -b dev_1.0 
```

*切换回master分支*

```
git checkout master 
```

*现在从位于标签 1.1 的 master 创建一个 dev 分支*

```
git checkout 1.1
git checkout -b dev_1.1 
```

*如果可以，将更改推送到遥控器*

```
git push 
```

此时，您总共将拥有 6 个分支。你原来的主人和开发者加上新的副本。开发可以在新创建的分支上进行，而不会影响 master。在分支名称中使用标签号可能不是常规的，但它将完成快速传达分支起源或目的的任务。此外，您可以轻松删除、合并或重新创建分支。

**删除分支**

远程 - （不要忘记“：”）

```
git push origin :BranchName 
```

local - 不能在您要删除的分支上，-D 表示未合并的分支

```
git branch -D BranchName 
```

# android - 使用 Facebook 登录和原生 Android 应用程序的网站之间的访问令牌不同吗？

> ID：12567786
> 
> 赞同：1
> 
> 时间：2012-09-24T15:06:02.677
> 
> 标签：android, facebook-login, facebook-access-token

我正在为一个使用 Facebook 登录的网站创建一个应用程序。我们有一个存储所有访问令牌的数据库。我想要做的是将我们数据库中的访问令牌与您使用应用程序的 Facebook 登录按钮时授予的访问令牌进行比较。但是，对于同一用户，两个访问令牌似乎不同。

这是正常的还是我做错了什么？

如果正常，有没有解决办法？我可以只使用 userId 进行验证，但这似乎很不安全。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:13:14.437

> 我想要做的是将我们数据库中的访问令牌与您使用应用程序的 Facebook 登录按钮时授予的访问令牌进行比较。但是，对于同一用户，两个访问令牌似乎不同。

这是完全正常的——因为访问令牌过期，然后在下次登录时可能会发出一个新令牌。

> 我可以只使用 userId 进行验证，但这似乎很不安全。

首先，您*到底*想“验证”什么……？

# jquery - 如何使用 jQuery 突出显示按钮？

> ID：12567787
> 
> 赞同：7
> 
> 时间：2012-09-24T15:06:14.580
> 
> 标签：jquery, html, jquery-effects, glow

在使用我的页面时，我需要将用户的注意力吸引到某个按钮上。

```
<button id="btnSubmit" style="float:left;width:78px;">Submit</button> 
```

理想情况下，我希望按钮“发光”。即在它周围有一个淡入的边框，然后在一秒钟后淡出。

我尝试使用 box-shadow 来实现我想要的发光效果。

```
.boxShadowed{
     font-weight:bold;
    -moz-box-shadow:0px 0px 10px 7px #777777;
    -webkit-box-shadow:0px 0px 10px 7px #777777;
    box-shadow:0px 0px 10px 7px #777777;
} 
```

但我不知道如何让它淡入淡出。此外，它似乎在 IE8 中不起作用。

我知道 jQuery 通常非常适合这些效果，但到目前为止我还没有遇到任何合适的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T15:32:02.330

**[DEMO](http://jsfiddle.net/feYZ8/1/)** - 使用 CSS3 盒子阴影和动画的外发光（使用`-moz`和`-webkit`供应商前缀）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T15:12:33.800

```
$('button').effect( "highlight", {color: 'red'}, 3000 ); 
```

[*演示。*](http://jsfiddle.net/3bMVP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-22T15:44:38.837

在线性转换的 500 毫秒内，将向按钮添加一个类*highlightButton （添加样式）。*以同样的方式，该类将再次被删除。

一定要包括 jQuery 和 jQueryUI

关于 addClass 和 removeClass 的更多信息可以在这里找到：
[https ://api.jquery.com/addclass/](https://api.jquery.com/addclass/)
[https://api.jquery.com/removeclass/](https://api.jquery.com/removeclass/)

Javascript：

```
$("#btnTest").addClass( "highlightButton", 500, "linear" ).removeClass("highlightButton",500,"linear"); 
```

CSS：

```
.highlightButton {
  border-color: red;
  color: red;
  font-weight: bold;
} 
```

HTML：

```
<button type="button" class="btn btn-default" id="btnTest">test</button> 
```

[Fiddle](http://jsfiddle.net/feYZ8/78/)上的现场演示

# jquery - 在 jQuery datepicker 中突出显示一周中的特定日期

> ID：12567794
> 
> 赞同：1
> 
> 时间：2012-09-24T15:06:41.393
> 
> 标签：jquery, jquery-ui-datepicker

我的目标是在 jQuery datepicker 中突出显示一周中的特定日期。

例如，我想突出显示星期二和星期四。我看过很多如何突出显示特定日期的示例（请参阅：http: **[//jquerybyexample.blogspot.com/2012/05/highlight-specific-dates-in-jquery-ui.html](http://jquerybyexample.blogspot.com/2012/05/highlight-specific-dates-in-jquery-ui.html)**）。但没有一个能满足我的需求。

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:18:11.267

您可以调整您链接的示例，以执行您想要的操作，如下所示：

CSS：

```
.Highlighted a{
   background-color : Green !important;
   background-image :none !important;
   color: White !important;
   font-weight:bold !important;
   font-size: 12pt;
} 
```

Javascript：

```
$(document).ready(function() {
    $('#datepicker').datepicker({
        beforeShowDay: function(date) {
            var day = date.getDay();
            if (day == 2 || day == 4) {
                return [true, "Highlighted", date];
            }
            return [true, '', ''];
        }
    });
});​ 
```

应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:20:33.700

`+`如果您可以假设星期从星期日开始，则可以仅使用 CSS 使用相邻选择器来执行此操作。它可能看起来有点荒谬，但它适用于任何支持`+`和`:first-child`（包括 IE7 及更高版本）的浏览器。

```
/* Tuesday:                Su               Mo   Tu            */
.ui-datepicker-calendar tr td:first-child + td + td a,
/* Thursday:               Su               Mo   Tu   We   Th  */
.ui-datepicker-calendar tr td:first-child + td + td + td + td a {
    background:red;
}
​ 
```

演示：http: [//jsfiddle.net/jnGhV/1/](http://jsfiddle.net/jnGhV/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T15:21:36.567

这应该这样做：

```
$(document).ready(function() {
    $('#txtDate').datepicker({
        beforeShowDay: function(date) {
            if(date.getDay() == 2 || date.getDay() == 4) {
                return [true, "Highlighted", ''];
            } else {
                return [true, '', ''];
            }

        }
    });
});​ 
```

JSFiddle：http: [//jsfiddle.net/XuExp/](http://jsfiddle.net/XuExp/)

# c# - 访问 List.RemoveAll 谓词中的相邻元素

> ID：12567798
> 
> 赞同：1
> 
> 时间：2012-09-24T15:07:00.913
> 
> 标签：c#, collections, predicate

我有一个`List`节点，每个节点都有一些坐标。

```
public class Node
{
    float x,y;
    ....
}
List<Node> myNodeList; 
```

我需要从列表中删除与其相邻节点的距离小于给定阈值的每个节点。我读了这篇[文章](https://stackoverflow.com/questions/1582285/how-to-remove-elements-from-a-generic-list-while-iterating-over-it)，解释了如何在迭代集合时从集合中删除元素。

我更喜欢使用`RemoveAll`方式，而不是以相反的顺序迭代列表，因为我认为它更干净、更优雅。我的问题是我需要访问当前项目的相邻元素来计算距离。

有什么干净的方法可以做到这一点吗？

我需要类似的东西：

```
myNodeList.RemoveAll(item => DistanceLessThanThreshold (item.Value, nextNode) && DistanceLessThanThreshold (item.Value, prevNode); 
```

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:31:19.363

您可以使用反向 where 并通过编写扩展方法 removewhere 来创建新列表，而不是在迭代时删除 -

[linq 从属性等于值的对象数组中删除项目](https://stackoverflow.com/questions/3325430/linq-remove-item-from-object-array-where-property-equals-value)

当然，如果可以接受创建新列表 - 取决于列表的大小！

# javascript - jQuery 滑块和可拖动 div 问题 - div 与滑块一起滑动

> ID：12567802
> 
> 赞同：0
> 
> 时间：2012-09-24T15:07:23.723
> 
> 标签：javascript, jquery, jquery-ui

我在可拖动的 div #fullMenu 中使用 jQuery UI 滑块。拖动滑块时，#fullMenu 也会移动，因为它的 mousedown 事件被触发。我阅读了有关[stopPropogation](http://api.jquery.com/event.stopPropagation/)的信息，还发现了另一个完全相同的[问题](https://stackoverflow.com/questions/11063674/jquery-ui-slider-to-stop-event-propagation)，但我不知道在我的代码中在哪里调用 stopPropogation。请给我你的灯！

```
 $(function() {
        $("#slider-range" ).slider({
            range: true,
            min: 0,
            max: 500,
            values: [ 75, 300 ],
            slide: function( event, ui ) {
                $( "#pricefrom" ).val(ui.values[0]);
                $( "#priceto" ).val(ui.values[1]);
                $( "#pricefromlabel" ).html(ui.values[0]);
                $( "#pricetolabel" ).html(ui.values[1]);
            }
        });
        return false;
    }); 
```

这是页面的[工作版本](http://ht-webcreations.com/vildiridis/itemlist.php?gid=10)，这是处理拖动事件的 javascript 代码：

```
var Drag = {

    obj : null,

    init : function(o, oRoot, minX, maxX, minY, maxY, bSwapHorzRef, bSwapVertRef, fXMapper, fYMapper)
    {
        o.onmousedown   = Drag.start;

        o.hmode         = bSwapHorzRef ? false : true ;
        o.vmode         = bSwapVertRef ? false : true ;

        o.root = oRoot && oRoot != null ? oRoot : o ;

        if (o.hmode  && isNaN(parseInt(o.root.style.left  ))) o.root.style.left   = "0px";
        if (o.vmode  && isNaN(parseInt(o.root.style.top   ))) o.root.style.top    = "0px";
        if (!o.hmode && isNaN(parseInt(o.root.style.right ))) o.root.style.right  = "0px";
        if (!o.vmode && isNaN(parseInt(o.root.style.bottom))) o.root.style.bottom = "0px";

        o.minX  = typeof minX != 'undefined' ? minX : null;
        o.minY  = typeof minY != 'undefined' ? minY : null;
        o.maxX  = typeof maxX != 'undefined' ? maxX : null;
        o.maxY  = typeof maxY != 'undefined' ? maxY : null;

        o.xMapper = fXMapper ? fXMapper : null;
        o.yMapper = fYMapper ? fYMapper : null;

        o.root.onDragStart  = new Function();
        o.root.onDragEnd    = new Function();
        o.root.onDrag       = new Function();
    },

    start : function(e)
    {
        var o = Drag.obj = this;
        e = Drag.fixE(e);
        var y = parseInt(o.vmode ? o.root.style.top  : o.root.style.bottom);
        var x = parseInt(o.hmode ? o.root.style.left : o.root.style.right );
        o.root.onDragStart(x, y);

        o.lastMouseX    = e.clientX;
        o.lastMouseY    = e.clientY;

        if (o.hmode) {
            if (o.minX != null) o.minMouseX = e.clientX - x + o.minX;
            if (o.maxX != null) o.maxMouseX = o.minMouseX + o.maxX - o.minX;
        } else {
            if (o.minX != null) o.maxMouseX = -o.minX + e.clientX + x;
            if (o.maxX != null) o.minMouseX = -o.maxX + e.clientX + x;
        }

        if (o.vmode) {
            if (o.minY != null) o.minMouseY = e.clientY - y + o.minY;
            if (o.maxY != null) o.maxMouseY = o.minMouseY + o.maxY - o.minY;
        } else {
            if (o.minY != null) o.maxMouseY = -o.minY + e.clientY + y;
            if (o.maxY != null) o.minMouseY = -o.maxY + e.clientY + y;
        }

        document.onmousemove    = Drag.drag;
        document.onmouseup      = Drag.end;

        //Add custom check in IE, if it press scrool drag and drop event is disabled ( scrollbar has id empty )
        document.onmousedown = function(e){ 
        if (typeof e == 'undefined') e = window.event;
        var targ = e.srcElement ? e.srcElement : e.target;
            //window.status="Id:="+targ.parentNode.id;
            if(targ.parentNode.id=="") Drag.end(e) ;
        }

        return false;
    },

    drag : function(e)
    {
        e = Drag.fixE(e);
        var o = Drag.obj;

        var ey  = e.clientY;
        var ex  = e.clientX;
        var y = parseInt(o.vmode ? o.root.style.top  : o.root.style.bottom);
        var x = parseInt(o.hmode ? o.root.style.left : o.root.style.right );
        var nx, ny;

        if (o.minX != null) ex = o.hmode ? Math.max(ex, o.minMouseX) : Math.min(ex, o.maxMouseX);
        if (o.maxX != null) ex = o.hmode ? Math.min(ex, o.maxMouseX) : Math.max(ex, o.minMouseX);
        if (o.minY != null) ey = o.vmode ? Math.max(ey, o.minMouseY) : Math.min(ey, o.maxMouseY);
        if (o.maxY != null) ey = o.vmode ? Math.min(ey, o.maxMouseY) : Math.max(ey, o.minMouseY);

        nx = x + ((ex - o.lastMouseX) * (o.hmode ? 1 : -1));
        ny = y + ((ey - o.lastMouseY) * (o.vmode ? 1 : -1));

        if (o.xMapper)      nx = o.xMapper(y)
        else if (o.yMapper) ny = o.yMapper(x)

        Drag.obj.root.style[o.hmode ? "left" : "right"] = nx + "px";
        Drag.obj.root.style[o.vmode ? "top" : "bottom"] = ny + "px";
        Drag.obj.lastMouseX = ex;
        Drag.obj.lastMouseY = ey;

        Drag.obj.root.onDrag(nx, ny);
        return false;
    },

    end : function()
    {
        document.onmousemove = null;
        document.onmouseup   = null;
        if(Drag.obj){
        Drag.obj.root.onDragEnd(    parseInt(Drag.obj.root.style[Drag.obj.hmode ? "left" : "right"]), 
                                    parseInt(Drag.obj.root.style[Drag.obj.vmode ? "top" : "bottom"]));
        }
        Drag.obj = null;
    },

    fixE : function(e)
    {
        if (typeof e == 'undefined') e = window.event;
        if (typeof e.layerX == 'undefined') e.layerX = e.offsetX;
        if (typeof e.layerY == 'undefined') e.layerY = e.offsetY;
        return e;
    }
};

    //<![CDATA[
    var theHandle = document.getElementById("handle");
    var theRoot   = document.getElementById("fullMenu");
    Drag.init(theHandle, theRoot);
    //]]> 
```

滑块功能（来自 jQuery UI）：

```
_start: function (a, b) {
    var c = {
        handle: this.handles[b],
        value: this.value()
    };
    return this.options.values && this.options.values.length && (c.value = this.values(b), c.values = this.values()), this._trigger("start", a, c)
},
_slide: function (a, b, c) {
    var d, e, f;
    this.options.values && this.options.values.length ? (d = this.values(b ? 0 : 1), this.options.values.length === 2 && this.options.range === !0 && (b === 0 && c > d || b === 1 && c < d) && (c = d), c !== this.values(b) && (e = this.values(), e[b] = c, f = this._trigger("slide", a, {
        handle: this.handles[b],
        value: c,
        values: e
    }), d = this.values(b ? 0 : 1), f !== !1 && this.values(b, c, !0))) : c !== this.value() && (f = this._trigger("slide", a, {
        handle: this.handles[b],
        value: c
    }), f !== !1 && this.value(c))
},
_stop: function (a, b) {
    var c = {
        handle: this.handles[b],
        value: this.value()
    };
    this.options.values && this.options.values.length && (c.value = this.values(b), c.values = this.values()), this._trigger("stop", a, c)
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:21:26.610

您在*start*事件结束时有`return false;`（同时执行`event.preventDefault()`& ） ，但问题是，您需要 this / 或在您的**slider**事件中。`event.stopPropogation()`*`stopPropogation()`*

 ***由于您的滑块正在返回一个值，因此我们不能在此处使用*return false*。

您还可以为 UI 事件奇怪地命名参数。jQuery UI 事件有两个参数：**`(event, ui)`**

```
$('#whatever').slider({

    start: function(event, ui) { 
        // your code

        event.stopPropogation(); // put it here
    }

}); 
```

但是您似乎传递了不同的变量（a，b）。有什么办法可以让你得到原件`event`，这样你就可以停止传播？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:51:02.520

这是我发布的问题的解决方案，以防将来有人需要它：

```
 $("#slider-range" ).slider({
        range: true,
        min: <?=$startfrom?>,
        max: <?=$endat?>,
        values: [ <?=$minprice?>, <?=$maxprice?> ],

        // where .stopPropogation() needs to be:

        start: function (event, ui) {
            event.stopPropagation();
        },

        slide: function( event, ui ) {
            $( "#pricefrom" ).val(ui.values[0]);
            $( "#priceto" ).val(ui.values[1]);
            $( "#pricefromlabel" ).html(ui.values[0] + ' &euro;');
            $( "#pricetolabel" ).html(ui.values[1] + ' &euro;');
        }
    }); 
```***

# ruby-on-rails-3 - 连接表是否需要模型或控制器？

> ID：12567804
> 
> 赞同：0
> 
> 时间：2012-09-24T15:07:34.447
> 
> 标签：ruby-on-rails-3, forms, controller, jointable

我的第一个多对多关系连接表遇到问题。

```
class Category < ActiveRecord::Base
  has_and_belongs_to_many :users
end

class User < ActiveRecord::Base
  has_and_belongs_to_many :categories
end 
```

我添加了一个连接表：

```
create_table "categories_users", :id => false, :force => true do |t|
  t.integer "category_id", :null => false
  t.integer "user_id",     :null => false
end 
```

有人可以指出我用来将用户添加到类别的表单示例吗？我需要一个单独的“categories_users”控制器吗？我有一种将方法添加到名为“添加用户”的类别控制器的冲动，但我不确定这对于其他 RESTful 控制器是否明智。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:10:01.383

我正在使用 simple_form，我终于在文档中找到了该做什么。因此，使用 simple_form，表单将如下所示：

```
<%= simple_form_for [:admin, @festival, @category] do |c| %>
  <%= c.input :name %>
  <%= c.input :description, input_html: { cols: 100, rows: 3, class: "span6" } %>
  <%= c.input :takes_submissions %>
  <%= c.association :users, label_method: :full_name, label: "Choose curators" %>
  <%= c.button :submit %>
<% end %> 
```

无需添加控制器或单独的表单。耶！

# c# - 如何将数据库大小从兆字节转换为字节，反之亦然？

> ID：12567805
> 
> 赞同：1
> 
> 时间：2012-09-24T15:07:35.237
> 
> 标签：c#, asp.net, byte, megabyte

基本上我正在创建一个复制应用程序，我只需要弄清楚数据库大小以及 D:\ 驱动器上有多少可用空间。

如果数据库大小大于可用空间，那么我需要提醒用户。

这是我到目前为止所拥有的：

首先，我找出 D 盘中有多少可用空间。

```
DriveInfo di = new DriveInfo(@"D:\");

if (di.IsReady)
{
    freeSpace = di.TotalFreeSpace;
} 
```

然后我得到我要复制的数据库的大小：

```
dbSize = Database.GetDatabaseSize(ddlPublisherServer.Text, ddlPublisherDatabase.Text); 
```

这是获取数据库大小的方法。我不知道是否有更好的方法可以做到这一点，但大小带有“MB”字符串，所以我需要删除它。

```
public static long GetDatabaseSize(string server, string database)
{
     string finalConnString = Properties.Settings.Default.rawConnectionString.Replace("<<DATA_SOURCE>>", server).Replace("<<INITIAL_CATALOG>>", database);

      using (SqlConnection conn = new SqlConnection(finalConnString))
      {
          using (SqlCommand cmd = new SqlCommand("sp_spaceused", conn))
          {
              cmd.CommandType = CommandType.StoredProcedure;

              conn.Open();
              cmd.ExecuteNonQuery();

              using (SqlDataAdapter da = new SqlDataAdapter(cmd))
              {
                  using (DataSet ds = new DataSet())
                  {
                      da.Fill(ds);

                      var spaceAvailable = ds.Tables[0].Rows[0][1].ToString();

                      string freeSpace = spaceAvailable.Remove(spaceAvailable.Length - 3, 3);

                      return Convert.ToInt64(freeSpace);
                   }
              }
         }
     }
} 
```

我现在的问题是——

如何将字节转换为兆字节，以便比较数据库大小和磁盘可用空间？

这就是我所拥有的，但它是兆字节和字节，所以我需要在这里进行转换。

```
if (dbSize > freeSpace)
{
     ClientScript.RegisterStartupScript(this.GetType(), "Insufficient Space", "alert('The database size is greater than the available space on the drive. Please make some room for the database in D drive of the subscriber server.');", true);
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T15:10:37.393

字节到兆字节 =`Bytes / (1024 * 1024)`
兆字节到字节 =`Megabytes * (1024 * 1024.0)`

一定要考虑整数除法，因此`1024.0`使用浮点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:12:10.480

一千字节有 1024 字节，一兆字节有 1024 千字节。因此，将您的兆字节乘以 1024 * 1024（以获取字节）。或者将你的字节除以 1024 * 1024 （以获得兆字节）。

# objective-c - ios6 mapkit错误模拟器

> ID：12567806
> 
> 赞同：6
> 
> 时间：2012-09-24T15:07:39.153
> 
> 标签：objective-c, ios, xcode, mapkit

更新到 ios6 并在 ios6 模拟器中运行我的应用程序后，我收到以下错误：

```
 2012-09-24 16:58:47.988 Pigeons[628:c07] <GEOTileSource: 0x99aa380>: 
Error downloading     tiles Server Error: Error Domain=GEOErrorDomain Code=-204 "The operation couldn’t be completed. (GEOErrorDomain error -204.)" UserInfo=0x19989ff0 {UnderlyingErrors=(
    "Error Domain=GEOErrorDomain Code=-204 \"The operation couldn\U2019t be completed. (GEOErrorDomain error -204.)\""
)} 
```

有没有人知道为什么会发生这个错误。在设备或更旧的模拟器上，不会发生错误。

问候， 雅科

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T15:32:54.137

似乎这只是从服务器下载新 Apple 地图的图块的一些内部问题。我也看到了类似的错误，但它们不会影响任何东西并且与您的代码无关。

# python - Python查找树状图的替代方法

> ID：12567813
> 
> 赞同：0
> 
> 时间：2012-09-24T15:08:08.597
> 
> 标签：python, cluster-analysis, data-mining, hierarchical-clustering, dendrogram

我有尺寸为 8000x100 的数据。我需要对这 8000 个项目进行聚类。我对这些物品的订购更感兴趣。对于小数据，我可以从上述代码中获得所需的结果，但对于更高维度，我不断收到运行时错误“RuntimeError：获取对象的 str 时超出了最大递归深度”。是否有另一种方法可以从“Z”获取重新排序的列。

```
from hcluster import pdist, linkage, dendrogram
import numpy
from numpy.random import rand

x = rand(8,100) # rand(8000,100) gives runtime error
Y = pdist(x)
Z = linkage(Y)
reorderedCol = dendrogram(Z)['ivl']

Traceback: 

>>> from hcluster import pdist, linkage, dendrogram
>>> import numpy
>>> from numpy.random import rand
>>> 

>>> x = rand(8000,100)
>>> Y = pdist(x)
>>> Z = linkage(Y)
>>> reorderedCol = dendrogram(Z)['ivl']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/hcluster/hierarchy.py", line 2062, in dendrogram
    link_color_func=link_color_func)
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/hcluster/hierarchy.py", line 2342, in _dendrogram_calculate_info
    link_color_func=link_color_func)
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/hcluster/hierarchy.py", line 2342, in _dendrogram_calculate_info
    link_color_func=link_color_func)
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/hcluster/hierarchy.py", line 2342, in _dendrogram_calculate_info

...
...

  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/hcluster/hierarchy.py", line 2311, in _dendrogram_calculate_info
    link_color_func=link_color_func)
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/hcluster/hierarchy.py", line 2209, in _dendrogram_calculate_info
    _append_singleton_leaf_node(Z, p, n, level, lvs, ivl, leaf_label_func, i, labels)
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/hcluster/hierarchy.py", line 2091, in _append_singleton_leaf_node
    ivl.append(str(int(i)))
RuntimeError: maximum recursion depth exceeded while getting the str of an object
>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:50:02.563

问题是*树状图*是一种**可视化技术**。在 8000 个对象中，它已经变得几乎不可读了。这就是为什么它可能没有为此优化。

对于更大的数据集，我建议远离任何类型的分层集群（当使用矩阵运算实现时，它具有`O(n^3)`运行时，并且在某些情况下您可以在 中执行它`O(n^2)`），而是使用例如[OPTICS（维基百科）](https://en.wikipedia.org/wiki/OPTICS_algorithm)（并且**不要**使用Weka 中的 OPTICS 或浮动的 Python 版本 - 因为它们都不完整！）。

我什至不能跑`dendrogram`，我得到了错误`matplotlib not available. Plot request denied`。所以它实际上可能*确实*试图*可视化*树状图！如果它在优化可视化方面付出了很多努力，这很可能会耗尽内存。正如我在您的另一个问题中向您展示的那样，您自己做[计算树状图叶子的排序，](https://stackoverflow.com/questions/12572436/calculate-ordering-of-dendrogram-leaves)您应该能够避免这种额外的成本。

您使用`hcluster`而不是有原因`scipy.cluster.hierarchy`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T07:15:57.153

> 但对于更高维度，我不断收到运行时错误“RuntimeError：获取对象的 str 时超出最大递归深度”

[通过使用某种形式的降维技术（如PCA](https://www.analyticsvidhya.com/blog/2016/03/practical-guide-principal-component-analysis-python/)或[tSNE](http://scikit-learn.org/stable/modules/generated/sklearn.manifold.TSNE.html)）可以帮助解决内存问题

从 100 个维度减少到 20 个左右

运行 tSNE 需要时间，因此您可以使用 PCA（更快）从 100 暗淡到 50 暗淡（比如说），然后使用 tSNE 达到 10 左右暗淡。

当心：这些会导致数据丢失，但可能只是完成工作。

# c++ - 静态变量访问

> ID：12567823
> 
> 赞同：0
> 
> 时间：2012-09-24T15:08:43.897
> 
> 标签：c++

> **可能重复：**
> [关于静态变量的访问问题](https://stackoverflow.com/questions/10942449/access-issue-regarding-static-variable)

我遇到了似乎是一个非常微不足道的问题，但我似乎无法弄清楚原因是什么。

我有一个类叫做存储。头文件：

```
#include <string>
using namespace std;
#include "Player.h"

class Storage {
public:
    static void Initialise();
    static string GetInformation();     
private:
    static Player player;
}; 
```

CPP 文件：

```
string Storage::GetInformation() {
    string returnString = "";
    // Get the players money
    // Convert it to a string
    string money("money");
    stringstream out;
    out << player.GetMoney();
    money = out.str();
    returnString += "Money: " + money + "\n";

    // Get the players ship information
    returnString += player.GetShipInformation();

    // Get the players current location
    returnString += player.GetCurrentLocation();

    return returnString;
}

void Storage::Initialise() {

} 
```

这给出了一个错误：“未定义对 `Storage::player' 的引用”。我试过用谷歌搜索它并调整一些东西，但我似乎找不到任何有用的东西。如果有人可以为我指出正确的方向来查看一篇文章，那就太好了，因为我不确定要搜索什么词才能获得正确的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T15:10:33.493

您已*声明*该成员，但*未定义*它。

例如，您需要在最外层的 Storage.cpp 中，即与方法定义处于同一级别：

```
Player Storage::player; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:12:28.540

仅仅声明一个静态类变量是不够的，它还需要定义它，例如在 .cpp 文件的顶部（`include`当然是在 s 之后）

```
Player Storage::player; 
```

# android - opencv, Linking C static library ../lib/armeabi-v7a/liblibjpeg.a

> ID：12567826
> 
> 赞同：0
> 
> 时间：2012-09-24T15:08:51.570
> 
> 标签：android, macos, opencv, android-ndk, makefile

I'm compiling openCV on Mac (64-bits). When I compile using "make " I get this error

"Linking C static library ../lib/armeabi-v7a/liblibjpeg.a". Don't know what this error is all about.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:04:09.410

In the makefile, replace

```
-llibjpeg 
```

with

```
-ljpeg 
```

In NDK/*nix linker, the "lib" prefix is attached by default.

# ios6 - iOS 6 GKMatchRequest playerToInvite 在 GKTurnBasedParticipant 中以 nil playerID 失败（适用于 iOS5）

> ID：12567830
> 
> 赞同：3
> 
> 时间：2012-09-24T15:09:14.560
> 
> 标签：ios6, game-center, multiplayer

几周前，我创建了一个在 iOS 5 上运行的基于回合制的 2 人游戏。

游戏允许玩家在自己的界面中从好友中选择一个对手，然后在呈现匹配视图时使用 GKMatchRequest 的 playerToInvite 属性，以使其自动邀请他们。

与在 iOS6 之前说它“什么都不做”的文档相反，这会导致 GKTurnBasedMatchmakerViewController 在 iOS5 上运行时自动选择所选玩家并开始邀请。

在请求返回时，在：

```
- (void)turnBasedMatchmakerViewController:(GKTurnBasedMatchmakerViewController *)viewController didFindMatch:(GKTurnBasedMatch *)match 
```

这个应用程序然后立即执行一个转弯并将其传递给下一个玩家。这会导致其他玩家的实际邀请随着轮到他们而发生，并且游戏从那里顺利进行。

上述委托调用中的 match.participants 都包含有效的 playerID 属性，使“nextParticipant”调用成为可能且有效。

到目前为止，一切都很好，在 iOS 5 上。

然而，在 iOS 6 上运行时，一切都照常进行，直到我们到达

```
- (void)turnBasedMatchmakerViewController:(GKTurnBasedMatchmakerViewController *)viewController didFindMatch:(GKTurnBasedMatch *)match 
```

并且我们发现第二个参与者的 playerID 为零，并且尝试将其设置为下一个参与者失败并出现“未知操作”。

进一步调查，如果我像往常一样启动匹配请求，但随后在 GC UI 中取消邀请，然后通过 GC UI 再次邀请，这一切都按预期工作。只有在自己设置 playerToInvite 时，邀请才会失败。我已经确认 playerID 在所有情况下都是正确的，除了 iOS6 上的虚假 nil。

请注意，在 iOS5 上运行时，这一切都正常运行。

在我看来，Apple 让它在 iOS5 中工作并声称它没有，然后在 iOS6 中打破它并声称它可以工作:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:30:15.677

以防万一这对某人有用：

我通过为 iOS6 添加特定实现来解决这个问题。因此，当邀请玩家时，不要像在 iOS5 中那样启动 MatchMakerVC，而是以编程方式进行。

```
[GKTurnBasedMatch findMatchForRequest: request withCompletionHandler:^(GKTurnBasedMatch *match, NSError *error) 
```

这实际上比它在 iOS5 中的效果更好，因为您可以避免强迫用户点击“下一步”3 次。

我仍然认为最初的问题是一个错误，并且在这里浪费了赏金让我损失了 50 名声望，但是我们去那里，我们生活和学习，忘记并再次学习 :)

# android - ACTION_MOVE 不会使 ImageView 画布无效

> ID：12567833
> 
> 赞同：0
> 
> 时间：2012-09-24T15:09:23.270
> 
> 标签：android, touch-event

在 onTouch 下 else if (event.getAction() == MotionEvent.ACTION_MOVE) 条件无效不起作用。实际上，一旦用户在屏幕上移动手指，我就想显示线条。

```
public class Custom_View extends ImageView implements View.OnTouchListener {

    ArrayList<ArrayList<Point>> mPathPoints = null;
    Path mPath = null;
    Paint mPaint = null;
    GestureDetector mDetector = null;
    private Context mContext = null;

    public Custom_View(Context context) {
        super(context);
        inIt(context);
    }

    public Custom_View(Context context, AttributeSet attrs) {
        super(context, attrs);
        inIt(context);
    }

    public Custom_View(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        inIt(context);
    }

    private void inIt(Context mContext) {
        this.mContext = mContext;
        mPathPoints = new ArrayList<ArrayList<Point>>();
        mPath = new Path();
        mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setAntiAlias(true);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(3);
        mPaint.setColor(Color.RED);
        setOnTouchListener(this);

    }

    Point mPrePoint = null;
    Point mCurPoint = null;

    private ArrayList<Point> mDemage = null;

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawColor(Color.YELLOW);
        Log.i("Size ", mPathPoints.size() + "");

        for (ArrayList<Point> mDemage : mPathPoints) {
            for (Point point : mDemage) {
                if (mPrePoint == null) {
                    canvas.drawPoint(point.x, point.y, mPaint);
                    mPrePoint = point;
                } else {
                    canvas.drawLine(mPrePoint.x, mPrePoint.y, point.x, point.y,
                            mPaint);
                    mPrePoint = point;
                }
            }
            mPrePoint = null;
        }
    }

    private Point lastPoint = null;

    public boolean onTouch(View v, MotionEvent event) {

        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            mDemage = new ArrayList<Point>();
            lastPoint = new Point((int) event.getX(), (int) event.getY());
            mDemage.add(lastPoint);
            Custom_View.this.invalidate();
            Toast.makeText(mContext, "ACTION_DOWN", Toast.LENGTH_SHORT).show();

        } else if (event.getAction() == MotionEvent.ACTION_MOVE) {
                lastPoint = new Point((int) event.getX(), (int) event.getY());
                mDemage.add(lastPoint);
            this.invalidate();
            Toast.makeText(mContext, "ACTION_MOVE", Toast.LENGTH_SHORT).show();
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            mDemage.add(new Point((int) event.getX(), (int) event.getY()));
            mPathPoints.add(mDemage);
            mDemage = null;
            lastPoint = null;
            Custom_View.this.invalidate();
            Toast.makeText(mContext, "ACTION_UP", Toast.LENGTH_SHORT).show();

        }

        return true;
    }

} 
```

# objective-c - 无法将 IBOutlets 连接到 Storyboard

> ID：12567837
> 
> 赞同：4
> 
> 时间：2012-09-24T15:09:57.170
> 
> 标签：objective-c, ios, xcode, storyboard

我最近开始使用故事板为我的 iPad 应用程序创建 iPhone 界面，我已将项目更改为 Universal 而不是 iPad，并在项目摘要屏幕中将所需的故事板分配给其设备。但是，当我尝试使用 control+drag 将任何元素连接到一段代码时，例如：

```
@property (strong, nonatomic) IBOutlet UIImageView *logo; 
```

它只是无法链接它。对象与代码中的类型相同，与视图相同的是相同的类继承。iPad 故事板仍然运行良好并且可以增强，它仍然与项目相关联。新的 iPhone 故事板完全没用，这是为什么呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T17:07:27.293

当您正在处理的场景的情节提要中的视图控制器未设置为正确的类时，就会发生这种情况。

以下是它的大致外观：

![在此处输入图像描述](../Images/f09ecff50dc96c0928ce9149c093e1c1.png)

# vb.net - 在 linq 查询中将字符串格式化为电话

> ID：12567838
> 
> 赞同：0
> 
> 时间：2012-09-24T15:09:58.603
> 
> 标签：vb.net, linq, string-formatting

为什么这不起作用，我正在尝试将手机格式化为标准

```
Dim Patient = From line In System.IO.File.ReadAllLines("K:\PAT02.txt")
Select New With { _
Key .PatientID = line.substring(0,7).trim, _
.FirstName = line.substring(7,11).trim, _
.MiddleName = line.substring(18,1).trim, _
.LastName = line.substring(19,15).trim, _
.Home = (String.Format("{0:(###)###-####}", line.substring(112,10).trim)), _        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:25:56.373

您在`New With`块的末尾有一个额外的逗号，将其删除，您的代码将编译。

关于您的电话号码问题，您使用的是数字格式，因此您必须将数字传递给该`String.Format`方法：

```
.Home = String.Format("{0:(###)###-####}", CLng(line.substring(112,10).trim)) 
```

# magento - Magento：获取为表费率指定的国家/地区？

> ID：12567842
> 
> 赞同：0
> 
> 时间：2012-09-24T15:10:16.280
> 
> 标签：magento, shipping

有没有办法获得导入表格费率时指定的国家？我知道如何做到“免费送货”，它是这样完成的：

```
$freeShippingCountries = explode(',', Mage::getStoreConfig('carriers/freeshipping/specificcountry', Mage::app()->getStore())); 
```

这不适用于表费率，我试过了，它一直返回*null*。还有其他方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:44:01.230

实际上没有，tablerates 数据存储在单独的表中，您可以尝试类似

```
 $read = Mage::getSingleton('core/resource')->getConnection('core_read');

    $tableRateData = $read->fetchAll("select * from shipping_tablerate"); 
```

或者如果您只需要在表格费率中启用的国家/地区，请使用

```
 $tableRateData = $read->fetchAll("select distinct dest_country_id from shipping_tablerate"); 
```

# c# - 在 C# ASP.NET 3.5 中更改 HtmlForm 操作

> ID：12567848
> 
> 赞同：5
> 
> 时间：2012-09-24T15:10:33.830
> 
> 标签：c#, asp.net, code-behind, forms

我有一个表格

```
<form id="form" action="" method="post" runat="server"> 
```

在通过 C# 代码隐藏访问时

```
HtmlForm form = (HtmlForm)this.FindControl("form"); 
```

并试图改变行动

```
form.Attributes.Add("action","./newpage.aspx?data=data"); 
```

或者

```
form.Attributes["action"] = "./newpage.aspx?data=data"); 
```

没有改变。表单仍然路由到同一页面。如何在代码隐藏中动态更改表单的操作？

额外细节：我有一个有 get 变量的页面。该 get 变量需要在表单的操作部分中发送。因此，page1 响应具有 getvar1。page1 上的表单需要发送它的post 数据和getvar1。我打算通过表单操作中的代码隐藏来调整它，但想避免使用 InnerHtml 来编写整个表单。Holly 建议使用 javascript，但我还没有找到使用 javascript 获取 GET vars 的好方法。.....只是为大众提供更多信息。

回答说明：我选择走@HollyStyles 提到的路线。ajax 调用完成后，我使用 javascript 更改表单操作。但是，标记为正确的答案是通过代码隐藏执行此操作的正确方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T15:24:11.937

您可以使用 asp.net 的[控制适配器](http://msdn.microsoft.com/en-us/magazine/cc163543.aspx)。

这是一个工作示例：

```
public class RewriteFormHtmlTextWriter : HtmlTextWriter
{
    public RewriteFormHtmlTextWriter(HtmlTextWriter writer)
        : base(writer)
    {
        this.InnerWriter = writer.InnerWriter;
    }
    public RewriteFormHtmlTextWriter(System.IO.TextWriter writer)
        : base(writer)
    {
        base.InnerWriter = writer;
    }

    public override void WriteAttribute(string name, string value, bool fEncode)
    {
        if (name == "action")
        {
            value = "Change here your value"            
        }

        base.WriteAttribute(name, value, fEncode);
    }
} 
```

使用上面的代码，并在文件上声明`App_Browsers`一个名为`Form.browser`

```
<browsers>
  <browser refID="Default">
    <controlAdapters>
      <adapter controlType="System.Web.UI.HtmlControls.HtmlForm" adapterType="FormRewriterControlAdapter" />
    </controlAdapters>
  </browser>
</browsers> 
```

您可以更改表格。当然，这段代码在每个表单渲染中都会调用。

相对：[http ://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T07:16:17.713

您可以像这样更改表单操作：

```
protected void Page_Init(object sender, EventArgs e)
{
    Form.Attributes.Add("action", "/Registration/Signup.aspx");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:16:50.660

我在知识库文章中找到了一个有助于实现这一目标的类，但是，该文章似乎已被删除（最初在这里： http: [//www.codeproject.com/Articles/23033/Change-your-ASP-NET -Form-s-Action-attribute-with-R](http://www.codeproject.com/Articles/23033/Change-your-ASP-NET-Form-s-Action-attribute-with-R) )。

接下来是那篇文章中提到的类。基本上，如果您使用以下类并`SetFormAction(string url)`在其上调用静态方法，您将能够设置`<form action="url" />`属性。

```
使用 System.IO；
使用 System.Text.RegularExpressions；
使用 System.Web；

///
/// 这个类的目的是方便地修改给定asp.net页面的表单“action”。
/// 要修改操作，请在您的页面（或者，更好的是，您的 MasterPage）的代码隐藏中调用以下代码：
/// 从 http://www.codeproject.com/KB/aspnet/ASP_Net_Form_Action_Attr.aspx 复制（和修改）
///
公共类 FormActionModifier ：流
{
  私有常量字符串 FORM_REGEX = "(]*>)";
  私有流_sink；
  私人多头头寸；
  字符串_url；
  公共 FormActionModifier（流接收器，字符串 url）
  {
    _sink = 水槽；
    _url = string.Format("$1{0}$3", url);
  }

  公共覆盖布尔 CanRead
  {
    得到{返回真；}
  }

  公共覆盖布尔 CanSeek
  {
    得到{返回真；}
  }

  公共覆盖布尔 CanWrite
  {
    得到{返回真；}
  }

  公共覆盖长长度
  {
    得到 { 返回 0; }
  }

  公共覆盖多头头寸
  {
    得到{返回_位置；}
    设置 { _position = 值；}
  }

  public override long Seek(long offset, System.IO.SeekOrigin 方向)
  {
    返回_sink.Seek（偏移量，方向）；
  }

  公共覆盖无效SetLength（长长度）
  {
    _sink.SetLength(长度);
  }

  公共覆盖无效关闭（）
  {
    _sink.Close();
  }

  公共覆盖无效冲洗（）
  {
    _sink.Flush();
  }

  public override int Read(byte[] buffer, int offset, int count)
  {
    返回_sink.Read（缓冲区，偏移量，计数）；
  }

  public override void Write(byte[] buffer, int offset, int count)
  {
    string s = System.Text.UTF8Encoding.UTF8.GetString(buffer, offset, count);
    正则表达式 reg = new Regex(FORM_REGEX, RegexOptions.IgnoreCase);
    匹配 m = reg.Match(s);
    如果（m.成功）
    {
      字符串形式 = reg.Replace(m.Value, _url);
      int iform = m.Index;
      int lform = m.Length;
      s = string.Concat(s.Substring(0, iform), form, s.Substring(iform + lform));
    }
    byte[] yaz = System.Text.UTF8Encoding.UTF8.GetBytes(s);
    _sink.Write(yaz, 0, yaz.Length);
  }

  ///
  /// 将表单操作设置为指定的 url
  ///
  公共静态无效SetFormAction（字符串网址）
  {
    如果（HttpContext.Current！= null）
      HttpContext.Current.Response.Filter = new FormActionModifier(HttpContext.Current.Response.Filter, url);
  } // SetFormAction()
} // 班级

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:18:20.783

这不是 ASP.NET 的工作方式。但是，您可以*有选择地*设置某些控件以发布到不同的页面。这称为跨页面发布。请参阅：http: [//msdn.microsoft.com/en-us/library/ms178139](http://msdn.microsoft.com/en-us/library/ms178139(v=vs.100).aspx) (v=vs.100).aspx 。要使用按钮执行跨页回发，请参见：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx)。基本上，您只需为按钮设置 PostBackUrl。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T15:24:34.637

也许你可以尝试[redirecttoaction](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx)

这是样本

```
public ActionResult LogOff() {
FormsAuth.SignOut();
return RedirectToAction("Index", "Home");
} 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-13T11:48:43.993

我最近也遇到了同样的问题，当发布表单操作属性时会使用重写的路径，但我想显示原始 url。我没有安装任何 url 重写库。

我发现这个页面对于让我的回发工作非常有用：http: [//www.codeproject.com/Articles/94335/TIP-How-to-Handle-Form-Postbacks-when-Url-Rewritin](http://www.codeproject.com/Articles/94335/TIP-How-to-Handle-Form-Postbacks-when-Url-Rewritin)

# ruby-on-rails - 如何确保唯一 id 在 Rails 中确实是唯一的？

> ID：12567849
> 
> 赞同：1
> 
> 时间：2012-09-24T15:10:33.223
> 
> 标签：ruby-on-rails, model, uuid

我想将对象的 url 替换为`/object/123`to ，因此我在创建对象时手动生成一个列`/object/f8a3b2`，而不是使用该列。`id``uid`

我可以使用可用的 uuid 库来生成 uid，但是如何确保生成的值始终是唯一的？

我在 uid 列上设置了唯一索引，所以如果它不是唯一的，它应该会抛出一个错误 - 我可以在模型级别捕获它，创建另一个 uid，然后再试一次吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:23:40.980

可能有更好的方法来做到这一点，但我想到的第一件事就是`validates_uniqueness_of`在您的活动记录模型上使用该方法，正如您所建议的那样。

在您的模型中：

```
class MyUniqueModel < ActiveRecord::Base
    validates_uniqueness_of :uuid_column
end 
```

在您的控制器中

```
@uniqueObject = MyUniqueModel.new(modelParams)
@uniqueObject.uuid_column = generate_uuid() # whatever method you use for generating your uuid
while !uniqueObject.save # if at first it didn't save...
    uniqueObject.uuid_column = generate_uuid() # try, try again
end # should break out of the loop if the save succeeded. 
```

如果您对模型进行了其他验证，那么您将在我的建议中遇到的问题是确定保存失败是由您的明显非唯一 uuid 还是其他一些验证错误引起的。这意味着您必须通过失败的列过滤循环体，以确定是否应该费心重新生成另一个 UUID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:29:12.497

## 关于 uuid gem

如果您使用的是[uuid gem](http://rubygems.org/gems/uuid)，则不必担心唯一性，因为这已经为您处理好了。但是，uuid 将生成长的 128 位唯一 ID。所以，如果你想要更短的东西，你可能不想使用它。

## 一种更简单的方法，如果您的需求很简单

例如，如果你想要随机的 8 位唯一代码，你可以在我的 cortex 项目[中的`new_unique_code`method](https://github.com/normalocity/cortex/blob/master/app/controllers/thought_walls_controller.rb#L77)下看到这样一个系统的实现。

它的作用是生成一个 8 位字母数字代码来表示应用程序中的资源。生成给定代码后，我尝试执行 a `.find_by_code`，如果返回，`nil`我知道它**尚未**使用。

在我的特定情况下，8 位字母数字代码为我提供了一个包含数百万个可能代码的键空间（我忘记了有多少）。根据我的应用程序的用例，代码冲突的可能性（已使用代码与可用代码的百分比）足够小，可能需要为给定资源多次生成新代码。

这样做的结果是，需要为给定资源多次生成新代码的情况极为罕见，因此几乎不会占用额外的时间。

## 应用程序中的多个应用程序服务器/线程怎么样？

我的解决方案的一个限制是，如果您有多个应用程序服务器，但只有一个数据库服务器，则可能有两个独立的应用程序服务器在它们中的任何一个在集中式数据库中创建新资源记录之前生成相同的代码。这会产生一种可能发生代码冲突的情况，并且除了保存到数据库的第一条记录之外的所有记录都将被标记为无效（由于代码列的唯一性约束）。此特定应用程序仅在单个应用程序服务器实例上运行（并且可能只会运行）。我知道这是一个已知的权衡，所以我可以冒险。

但是，如果我想解决这个问题，我会限制每个应用服务器的随机代码范围，这样它们就不会意外重叠。例如，假设我正在生成随机代码，这些代码以 00000000-99999999 之间的 8 位数字代码形式出现。例如，如果我有三个运行此应用程序的应用程序服务器，我会简单地将服务器#1 限制为在 00000000-33333333 之间生成代码，服务器#2 到 33333334-66666666，服务器#3 到 66666667-99999999 之间。这样可以保证它们永远不会重叠代码，并且您仍然可以整天生成唯一的随机密钥。

如何将给定服务器限制在给定范围内有点离题，但一些可用选项是：

1.  在每个应用服务器中手动设置配置设置。这是手动的（因此很脆弱），但如果您有数量稳定且不会更改的应用服务器，这可能没问题。
2.  让应用服务器相互通信并协商它们的随机数范围应该是什么。
3.  放弃吧，意识到这是[一个非常聪明的人已经解决的复杂问题，](http://www.ietf.org/rfc/rfc4122.txt)您不需要重新创建轮子，只需使用 UUID。
4.  考虑使用作为网络服务运行的集中式唯一 ID 生成器，例如[Twitter Snowflake](https://github.com/twitter/snowflake)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:23:53.337

使用[Rails Validations](http://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html#method-i-validates)验证唯一性：

```
class MyModel < ActiveRecord::Base
  validates :id, uniqueness: true
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:23:59.503

你应该使用

```
validates :uid, :uniqueness => true 
```

我必须在此建议中添加一个警告，因为仍然存在一种情况，您会从数据库中收到重复 uid 列值的错误。您可以在[Michael Hartl 的 RoR 教程中找到更多相关信息](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec-the_caveat)

为了在重复的 uid 上捕获并重试保存，您可以执行以下操作：

```
model = Model.create(:uid => generate_uid)
if model.errors[:uid].any?
  model.create(:uid => generate_uid)
end 
```

# java - 如何获取方法的调用者类

> ID：12567853
> 
> 赞同：1
> 
> 时间：2012-09-24T15:10:44.363
> 
> 标签：java

我怎么知道哪个类调用了方法？

```
class A {
   B b = new B();

   public void methodA() {
    Class callerClass = b.getCallerCalss(); // it should be 'A' class
   } 
}

class B {
 public Class getCallerCalss() {
   //... ???
   return clazz;
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:24:36.600

这很容易用`Thread.currentThread().getStackTrace()`.

```
public static void main(String[] args) {
    doSomething();
}

private static void doSomething() {
    System.out.println(getCallerClass());
}

private static Class<?> getCallerClass() {
    final StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();
    String clazzName = stackTrace[3].getClassName();
    try {
        return Class.forName(clazzName);
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
        return null;
    }
} 
```

`[3]`之所以使用，是因为`[0]`是元素 for `Thread.currentThread()`，`[1]`是 for `getCallerClass`，`[2]`是 for `doSomething`，最后`[3]`是 is `main`。如果你放入`doSomething`另一个类，你会看到它返回了正确的类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T15:14:36.137

有一种观察堆栈跟踪的方法

```
StackTraceElement[] elements = Thread.currentThread().getStackTrace() 
```

[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#getStackTrace%28%29)

> 数组的最后一个元素表示堆栈的底部，它是序列中最近的方法调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T15:15:34.057

您可以通过获取堆栈跟踪的第二个元素来获取调用者类的类名：

```
final StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();
System.out.println(stackTrace[1].getClassName()); 
```

该类的[`getClassName`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StackTraceElement.html#getClassName%28%29)方法[`StackTraceElement`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StackTraceElement.html)以 a 返回，因此不幸的`String`是您不会得到对象。`Class`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:13:56.183

试试`Throwable.getStackTrace()`。

创建一个新的`Throwable`..你不必扔它:)。

未经测试：

```
Throwable t = new Throwable();
StackTraceElement[] es = t.getStackTrace();
// Not sure if es[0] would contain the caller, or es[1]. My guess is es[1].
System.out.println( es[0].getClass() + " or " + es[1].getClass() + " called me."); 
```

显然，如果您正在创建某个函数 ( `getCaller()`)，那么您将不得不在堆栈跟踪中再上一层。

# xml - 如果匹配特定模式，则在 XQuery 函数中使用“following-sibling”返回 TIME 元素

> ID：12567855
> 
> 赞同：0
> 
> 时间：2012-09-24T15:10:56.120
> 
> 标签：xml, xquery, saxon

我试图在 XQuery 中编写一个函数，如果检测到特定的值模式，它会从 XML 数据序列中返回一个时间戳。数据实际上是一个系统的api消息的测试日志

示例 XML 数据类似于下面的代码片段。如果找到序列，则假定时间戳（TIME 标记）对于模式条目的每一行都是相同的。

我需要检测并返回`TIME`of - 的特定模式是依次有四个`<FIELD>TRACK_STATUS</FIELD><MODE>VALID</MODE>`条目，后跟四个`<FIELD>MULTI_CHAN_IND</FIELD><MODE>MULTI</MODE>`条目 - 所有条目都具有相同的时间戳。

```
<SEQUENCE><TIME>13.00</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>INVALID</MODE></SEQUENCE>
<SEQUENCE><TIME>13.00</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>INVALID</MODE></SEQUENCE>
<SEQUENCE><TIME>13.00</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>SINGLE</MODE></SEQUENCE>
<SEQUENCE><TIME>13.00</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>SINGLE</MODE></SEQUENCE>
<SEQUENCE><TIME>13.00</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>SINGLE</MODE></SEQUENCE>
<SEQUENCE><TIME>13.00</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>SINGLE</MODE></SEQUENCE>
<SEQUENCE><TIME>14.05</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>VALID</MODE></SEQUENCE>
<SEQUENCE><TIME>14.05</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>VALID</MODE></SEQUENCE>
<SEQUENCE><TIME>14.05</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>VALID</MODE></SEQUENCE>
<SEQUENCE><TIME>14.05</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>VALID</MODE></SEQUENCE>
<SEQUENCE><TIME>14.05</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>MULTI</MODE></SEQUENCE>
<SEQUENCE><TIME>14.05</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>MULTI</MODE></SEQUENCE>
<SEQUENCE><TIME>14.05</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>MULTI</MODE></SEQUENCE>
<SEQUENCE><TIME>14.05</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>MULTI</MODE></SEQUENCE>
<SEQUENCE><TIME>15.94</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>INVALID</MODE></SEQUENCE>
<SEQUENCE><TIME>15.94</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>INVALID</MODE></SEQUENCE> 
```

我试图定义的函数如下，但会给出运行时错误`'empty sequence not allowed'`。不幸的是，我没有可以设置断点并对其进行调试的 IDE——我想一旦我选择了一个带有`FOR`.

```
declare function local:get_multi_track_sequence_time( $msgSeq as element()*) as xs:double {
    for $row in $msgSeq
    where some $entry in $row satisfies($entry/SEQUENCE[TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
                    /following-sibling::SEQUENCE[TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
                    /following-sibling::SEQUENCE[TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
                    /following-sibling::SEQUENCE[TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
                    /following-sibling::SEQUENCE[TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI']
                    /following-sibling::SEQUENCE[TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI']
                    /following-sibling::SEQUENCE[TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI']
                    /following-sibling::SEQUENCE[TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI'] )
    return data($row/SEQUENCE/TIME)
}; 
```

谢谢。我是 XQuery 的新手。

---------------------**编辑 - 使用来自建议的想法添加测试功能**-------------------- -

感谢您已经收到的建议。我根据给出的有用信息编写了以下自包含测试函数 - 该函数无法匹配后续兄弟的。

该函数创建一个`data`包含测试序列的变量。就目前而言，该函数返回一个空序列。要求是它返回`14.050000`以指示标量，在该标量`TIME`处有四个`<FIELD>TRACK_STATUS</FIELD><MODE>VALID</MODE>`按顺序排列的条目，紧随其后的是四个按顺序排列的条目（即在测试数据中的`<FIELD>MULTI_CHAN_IND</FIELD><MODE>MULTI</MODE>`TIME ）。`14.050000`

（有趣的是，如果只使用第一个表达式，即匹配所有出现的 TRACK_STATUS/VALID 没有指定后续兄弟匹配，它会成功返回一个双精度序列。）

```
declare function local:get_multi_track_sequence_time( ) as xs:double* {

    let $data as element()* := (

<SEQUENCE><TIME>13.04080</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>INVALID</MODE></SEQUENCE>,
<SEQUENCE><TIME>13.04080</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>INVALID</MODE></SEQUENCE>,
<SEQUENCE><TIME>13.05000</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>VALID</MODE></SEQUENCE>,
<SEQUENCE><TIME>13.06900</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>SINGLE</MODE></SEQUENCE>,
<SEQUENCE><TIME>13.06900</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>SINGLE</MODE></SEQUENCE>,
<SEQUENCE><TIME>14.05000</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>VALID</MODE></SEQUENCE>,
<SEQUENCE><TIME>14.05000</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>VALID</MODE></SEQUENCE>,
<SEQUENCE><TIME>14.05000</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>VALID</MODE></SEQUENCE>,
<SEQUENCE><TIME>14.05000</TIME><TAG>2900</TAG><FIELD>TRACK_STATUS</FIELD><MODE>VALID</MODE></SEQUENCE>,
<SEQUENCE><TIME>14.05000</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>MULTI</MODE></SEQUENCE>,
<SEQUENCE><TIME>14.05000</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>MULTI</MODE></SEQUENCE>,
<SEQUENCE><TIME>14.05000</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>MULTI</MODE></SEQUENCE>,
<SEQUENCE><TIME>14.05000</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>MULTI</MODE></SEQUENCE>,
<SEQUENCE><TIME>15.06700</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>SINGLE</MODE></SEQUENCE>,
<SEQUENCE><TIME>15.06700</TIME><TAG>2900</TAG><FIELD>MULTI_CHAN_IND</FIELD><MODE>SINGLE</MODE></SEQUENCE>

)

    for $entry in $data
    where $entry/self::SEQUENCE
            [TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
          /following-sibling::*[1]/self::SEQUENCE
            [TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
          /following-sibling::*[1]/self::SEQUENCE
            [TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
          /following-sibling::*[1]/self::SEQUENCE
            [TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
          /following-sibling::*[1]/self::SEQUENCE
            [TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI']
          /following-sibling::*[1]/self::SEQUENCE
            [TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI']
          /following-sibling::*[1]/self::SEQUENCE
            [TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI']
          /following-sibling::*[1]/self::SEQUENCE
            [TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI']

    return data($entry/TIME)
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:39:43.227

你已经接近成功了。

有几件事需要清理。首先， 和 的组合`for $row in $msgSeq`迭代`some $entry in $row`相同的元素序列（作为 传入的序列`$msgSeq`）。从您的问题中不清楚您作为 $msgSeq 的值传递了什么，但我想知道您的意思是`where some $entry in $row/*`还是（利用隐式存在量化）只是`where $row/*/SEQUENCE ...`.

其次，您的问题描述表明您要查找具有某些属性的八个相邻 SEQUENCE 元素的序列（的父级）。但是您的长 XPath 表达式不需要邻接： `$foo/following-sibling::SEQUENCE`匹配名为 SEQUENCE 的 $foo 的*所有*以下兄弟姐妹。要约束路径以使项目相邻，您需要更改表单的步骤

```
.../following-sibling::SEQUENCE[ ... conditions ... ] 
```

到

```
.../following-sibling::*[1]/self::SEQUENCE[ ... ] 
```

如果保证后面的兄弟姐妹是一个 SEQUENCE，当然，这可能会更短，但可能会失去一些清晰度。

第三，您的声明说您要返回一个双倍。但是函数体不能保证准确返回一个 double，因此悲观处理器的严格静态类型分析很可能会拒绝它。我首先看到的是：

*   如果 $row 包含多个 SEQUENCE 元素，那么`data($row/SEQUENCE/TIME)`将返回多个 TIME 值，而不仅仅是一个。如果您确信所有 SEQUENCE/TIME 值都相同，那么添加`[1]`是一种确保此表达式最多返回一个值而不是（例如）八或二十的方法。

*   当没有匹配项时，您的函数实际上返回空序列，而不是一个双精度的单个序列。

*   如果 $msgSeq 中有多个 $row 满足条件，您将返回通过`data($row/SEQUENCE/TIME)`对满足条件的每个 $row 求值形成的结果序列。您的数据的形状可以保证这永远不会发生，但静态分析器不太可能知道这一点。

下面给出的函数的修订形式假设 (a) $msgSeq 是 SEQUENCE 元素的序列，并且 (b) 您想要找到每个 SEQUENCE 元素，它是您描述的事件序列中的第一个事件，并返回它的时间stamp （所以函数作为一个整体返回零个或多个双精度数——我不会问你是什么让你用`double`它来表示小时和分钟而不是 xs:time 或更合理的东西，这是你和你的工程良心之间的事.

```
declare function local:get_multi_track_sequence_time( 
    $msgSeq as element()*
) as xs:double* {
for $entry in $msgSeq

where $entry/self::SEQUENCE
         [TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
      /following-sibling::*[1]/self::SEQUENCE
         [TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
      /following-sibling::*[1]/self::SEQUENCE
         [TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
      /following-sibling::*[1]/self::SEQUENCE
         [TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID']
      /following-sibling::*[1]/self::SEQUENCE
         [TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI']
      /following-sibling::*[1]/self::SEQUENCE
         [TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI']
      /following-sibling::*[1]/self::SEQUENCE
         [TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI']
      /following-sibling::*[1]/self::SEQUENCE
         [TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI'] 
return data($entry/TIME)
}; 
```

当问题中显示的 SEQUENCE 元素序列传递给此函数时，它返回数字 14.05。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:30:28.317

这引发错误的原因是您的函数没有返回任何内容（空序列），但它被声明为返回一个`xs:double`. 如果您在[Saxon](http://sourceforge.net/projects/saxon/)下运行查询，您会收到以下信息更丰富的错误消息：

> 函数 local:get_multi_track_sequence_time() 的结果不允许空序列

那么下一个问题是，你的函数应该总是返回一个双精度数，还是应该更改`as`声明以允许它返回一个空序列的可能性？同样，您的查询的编写方式可能会返回多个结果，满足您的`where`子句的每一行都有一个结果。这也会导致类型错误。你想允许吗？

即使在仅一行满足子句的情况下`where`，您最终也会返回多个时间戳

```
return data($row/SEQUENCE/TIME) 
```

因为这会选择每个`<TIME>`元素的子元素，它是元素`<SEQUENCE>`的子元素`$row`。相反，你想要

```
return data($row/SEQUENCE[1]/TIME) 
```

同样，关于`following-sibling::`，不要忘记使用`[1]`表示您正在尝试访问*下一个*兄弟姐妹，而不仅仅是任何以下兄弟姐妹：

```
.../following-sibling::SEQUENCE[1][TAG='2900' and FIELD='TRACK_STATUS'
  and MODE='VALID']... 
```

这应该会给您带来更好的性能，并确保您的`where`条款不会给出误报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:37:43.957

我有以下工作函数，它在返回序列的第一个值中给出正确的标量时间。

```
declare function local:get_multi_track_sequence_times( $msgSeq as element()* ) as xs:double* {
    let $data := (<ROOT>{$msgSeq}</ROOT>)
    let $s1 := $data/SEQUENCE[TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID'],
        $s2 := $s1/following-sibling::SEQUENCE[TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID'],
        $s3 := $s2/following-sibling::SEQUENCE[TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID'],    
        $s4 := $s3/following-sibling::SEQUENCE[TAG='2900' and FIELD='TRACK_STATUS' and MODE='VALID'],    
        $s5 := $s4/following-sibling::SEQUENCE[TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI'],
        $s6 := $s5/following-sibling::SEQUENCE[TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI'],
        $s7 := $s6/following-sibling::SEQUENCE[TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI'],
        $s8 := $s7/following-sibling::SEQUENCE[TAG='2900' and FIELD='MULTI_CHAN_IND' and MODE='MULTI']

    return $s8/TIME           
}; 
```

# facebook - 只限一个 Facebook 专页申请

> ID：12567863
> 
> 赞同：1
> 
> 时间：2012-09-24T15:11:19.763
> 
> 标签：facebook, limit, add

我目前正在为我的 Facebook 页面构建一个应用程序。

但是如何避免其他人将我的应用程序添加到他们自己的页面？据我所知，他们可以轻松使用此链接： [https](https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL) ://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next= YOUR_URL 并找到我的 app_id 和服务器 URL。

我该如何避免这种情况？

提前致谢！

亲切的问候，托拜厄斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:15:08.383

解析[signed_request——](https://developers.facebook.com/docs/authentication/signed_request/)它告诉你（除其他外）你的应用程序加载到哪个页面id。如果这个id不是你的——只需给出一条错误消息，拒绝访问或类似的东西。

# zend-framework2 - 如何找出 ZF2 中 Translator 使用的语言？

> ID：12567869
> 
> 赞同：0
> 
> 时间：2012-09-24T15:11:36.520
> 
> 标签：zend-framework2, zend-translate

在我的 ZF2 应用程序中，我想检索用于翻译页面的语言。我使用[ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication)作为基础。在*Module.php 中*，我像这样设置*语言环境*：

```
public function onBootstrap($e){
  $translator = $e->getApplication()->getServiceManager()->get('translator');
  $translator->setLocale(
      Locale::acceptFromHttp($_SERVER['HTTP_ACCEPT_LANGUAGE'])
    )
    ->setFallbackLocale('en_US');
} 
```

我可以从*Zend\I18n\Translator\Translator检索**语言环境*和*fallbackLocale*，但是我仍然不知道哪个用于翻译。因为也没有办法（就我没有找到）找出实际加载到翻译器中的语言。*如果locale*存在翻译，我什至无法测试自己。

 **也许我在这里遗漏了一些东西。我希望有人能指出这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:41:01.323

一种选择可能是检索缓存对象并通过重新创建缓存键来检查主要语言环境的存在。查看该`loadMessages()`方法，缓存结果似乎将包含可用消息的列表。

否则，翻译功能似乎只是尝试第一个语言环境然后回退。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:08:01.813

我决定采用最简单的方法。我也翻译该语言的文本。**

# in-app-purchase - Google InApp 恢复订阅的交易响应

> ID：12567870
> 
> 赞同：0
> 
> 时间：2012-09-24T15:11:39.087
> 
> 标签：in-app-purchase

我已经实施了 Google 应用内结算。我添加了一个月的订阅产品。假设我在 2012 年 7 月购买了这个产品，之后在月底我取消了这个订阅。9 月再次购买了这一个月的订阅。我创建了这个用例来清除我的用例。

在这里我想知道，当您在 9 月份进行恢复事务时，整个响应是如何以 json 格式发送给您的。考虑到您是在 2012 年 7 月订阅的，那么您在 2012 年 8 月取消了订阅，之后又在 2012 年 9 月订阅了。

如果我讨论它，响应的一小部分为我提供了json响应中的两个主要内容，一个是purchaseTime，另一个是purchaseToken。

所以现在的重点是当您在 2012 年 9 月进行恢复交易时，作为每月订阅，您如何管理订阅的验证，不仅是 2012 年 9 月，还包括 2012 年 7 月。

有人可以给出解释以及在这种情况下的工作方式。提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:50:15.737

[我在这里](https://stackoverflow.com/questions/12563733/what-is-the-response-for-restore-transactions-in-case-of-subscription-bought-twi)问了同样的问题。仍然没有响应，但恐怕在响应 json 中，您只会得到一件带有您的订阅 ID 和更新的购买时间、订单 ID 以及更新的购买令牌的项目。意味着 2012 年 7 月的订阅数据将被覆盖和丢失。我现在无法确认，因为我需要等待将近三周才能再次购买相同的订阅。

因此，您将需要一种方法将以前的订阅存储在某个地方（在您的服务器上？）并用用户识别它们（获取用户的 google play 电子邮件？）。

# facebook - 我如何获得我的应用程序 ID

> ID：12567874
> 
> 赞同：6
> 
> 时间：2012-09-24T15:11:46.443
> 
> 标签：facebook, app-id

> **可能重复：**
> [从企业帐户创建和管理 Facebook 应用程序](https://stackoverflow.com/questions/10805745/creating-and-managing-a-facebook-app-from-a-business-account)

每当我尝试转发回我的广告时，如何获得应用 ID。

当我点击[http://developers.facebook.com/](http://developers.facebook.com/)和应用程序时，它会带我回到我的广告！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T15:18:42.280

1.  登录脸书
2.  转到 Facebook 开发者应用程序页面：[https ://developers.facebook.com/apps](https://developers.facebook.com/apps)
3.  选择您之前为目标设置的一个应用程序
4.  在描述中，您将找到 APP ID。

# ios - iOS6是否修复了iOS5的bug：ALAssetsLibrary不发送ALAssetsLibraryChangedNotification？

> ID：12567876
> 
> 赞同：0
> 
> 时间：2012-09-24T15:11:51.570
> 
> 标签：ios, alassetslibrary

iOS5 bug 有什么进展吗：[http](http://www.openradar.me/10484334) ://www.openradar.me/10484334 ？

回顾：使用 ALAsset 框架的应用程序在通过相机（或类似的资产依赖应用程序）发生这些更改时不会响应对资产库的更改。

所以，背景你的应用程序，前景相机应用程序，快照照片，背景相机应用程序，前景你的应用程序。您不会在照片缩略图 tableView 中看到更改。

或者，如果有人可以向我指出正确实现雷达错误中提到的解决方法的示例代码，我将不胜感激。我已经搁置了我正在构建的应用程序，因为我无法获得以前建议的修复工作。

谢谢，
道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:36:53.560

是的，它已修复，但还有一个错误：

当您删除相册中的照片时，将保持界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:17:02.387

它没有固定在我的设备上。我尝试了各种方法，例如删除相册、添加照片等，但*始终没有*收到 ALAssetsLibraryChangedNotification。

# c# - 在 GridView 的代码隐藏中更改容器 DataItem

> ID：12567878
> 
> 赞同：0
> 
> 时间：2012-09-24T15:11:53.800
> 
> 标签：c#, asp.net, gridview

我想知道是否可以在网格视图中更改代码隐藏中的 Container.DataItem。我的意思是，如果我想根据条件将 Dataitem 从“SellingPaymentMethod”更改为“DeliveryPaymentmethod”。

我使用相同的存储过程来获取销售和交付信息。因此，如果是销售，则应为 SellingPayment 方法，否则应为 DeliveryPayment 方法。这是在 ASP.Net 中使用 C#。

```
<asp:TemplateField ItemStyle-Width="70" ItemStyle-HorizontalAlign="Center">
    <ItemTemplate>
      <asp:Label ID="lblSellingPaymentMethod" runat="server"
         Text='<%#DataBinder.Eval(Container.DataItem,"SellingPaymentMethod") %>'>
      </asp:Label>
    </ItemTemplate>
 </asp:TemplateField>

if(Condition1 = "Selling")
{
    use sellingpaymentmethod container
}
else
{
    use deliverypaymentmethod
} 
```

编辑：

```
if (e.Row.RowType != DataControlRowType.DataRow)
    {
        return;
    }

    foreach (DataRow dtrCurrentRow in (((System.Data.DataView)grdDetail.DataSource)).Table.Rows) 
    {
        //DataRow row = (DataRow)e.Row.DataItem;
        Label lblPaymentMethod = e.Row.FindControl("lblPaymentMethod") as Label;
        Label lblBalance = e.Row.FindControl("lblTotalSold") as Label;
        Label lblBalanceCollected = e.Row.FindControl("lblTotalCollected") as Label;

        if (lblTypeofDay.Text == "Selling")
        {
            lblPaymentMethod.Text = dtrCurrentRow["SellingPaymentMethod"].ToString();
        }
        else if (lblTypeofDay.Text == "Delivery")
        {
            lblPaymentMethod.Text = dtrCurrentRow["DeliveryPaymentmethod"].ToString();
        }
     } 
```

这就是我使用您的代码的方式。而且我不确定为什么所有行都在 paymentmethod 列中具有最后一行值。

我在 btnSubmit_OnClick 函数中有数据绑定代码

```
DataView myDataView = new DataView();
myDataView = dsnew.Tables[0].DefaultView;
grdDetail.DataSource = myDataView;
grdDetail.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:13:44.643

创建一个`RowDataBound`事件处理程序并在那里进行更改。

ASP:

```
<asp:GridView id="gridView1" runat="server" 
    OnRowDataBound="gridView1_RowDataBound" /> 
```

代码背后：

```
public void gridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType != DataControlRowType.DataRow)
    {
        return;
    }

    DataRow row = (DataRow)e.Row.DataItem;

    Label lblSellingPaymentMethod = 
        e.Row.FindControl("lblSellingPaymentMethod") as Label;

    if(condition == true)
    {
        lblSellingPaymentMethod.Text = row["sellingpaymentmethod"].ToString();
    }
    else
    {
        lblSellingPaymentMethod.Text = row["deliverypaymentmethod"].ToString();
    }
} 
```

# c# - 实时馈送 Asp.net 应用程序？

> ID：12567881
> 
> 赞同：0
> 
> 时间：2012-09-24T15:11:59.680
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc, real-time

我有一个 Web 应用程序，它的后端编写为 asp.net mvc4，并通过 rest [web-api](http://www.asp.net/web-api)向客户端公开。我想要的是能够从 Web 服务实时提供该应用程序的能力。（Web 服务返回不是那么大的对象的 xml/json 格式）。这里有几个选项：（当然 node.js，tornado 会是更好的选择，但后端应该在 asp.net/iis 堆栈上）

1.  通过绑定事件将数据对象直接从服务提供给中间层，并在事件处理时将数据持久化到数据库。（而不是先坚持然后轮询）
2.  当特定表中有更新（可能插入）时，创建[SqlDependency对象并注册事件以通知应用程序。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)

可能的堆栈：Asp.net MVC4 + Web API + IIS + Sql Server 2008 + C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:20:08.237

在您阅读其余内容之前，先声明一下：我在 Realtime.co 工作，但我相信我可以在这里提供帮助，所以我不会试图“推销”。

如果您需要实时更新，可以查看 Realtime (www.realtime.co)。它基本上是一组工具，供开发人员在他们的项目中使用实时技术。它使用 websockets，但会回退到用户浏览器支持的任何内容（例如长轮询）。您也可以在项目中使用 ASP.Net API。

您可以在 www.realtime.co 了解有关 Realtime 的更多信息，并在 www.xrtml.org 了解开发人员/SDK 层。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:23:23.200

如果您正在寻找“Node.js”但在 microsoft 堆栈上查看来自 NuGet 的 SignalR - 它提供了与 Node.js 类似的功能，但它是 .NET 堆栈的本机！[http://nuget.org/packages/SignalR](http://nuget.org/packages/SignalR)

顺便说一句，SignalR 不仅是“ASP.NET 的节点”，而且它似乎非常适合您的要求；o) Google 上也有大量用于 SignalR 的资源！

# asp.net - ASP.NET 更新中的 SQL VARBINARY

> ID：12567897
> 
> 赞同：-1
> 
> 时间：2012-09-24T15:12:44.640
> 
> 标签：asp.net, sql-server, c#-4.0

> **可能重复：**
> [如何处理 Varbinary 和 asp.net 更新](https://stackoverflow.com/questions/12560046/how-handle-varbinary-an-asp-net-update)

嗨，这是我之前的问题的以下内容。

问题是当我试图更新由一个列表视图以 aspx 形式提交的 varbinary 时。每次我检索到相同的错误时：

I dati di tipo string o binary verrebbero troncati。L'istruzione è stata interrotta。所以字符串或二进制将被截断命令被中断。

我认为这是 asp.net 的问题，我尝试在服务器端使用 c# 使用以下代码拦截列表视图的事件 ItemInserting：

RunSqlCommand 是我在代码底部创建的一个类：

```
 protected void ListView1_ItemUpdating(object sender, ListViewUpdateEventArgs e)
    {
        IOrderedDictionary NuoviValori = e.NewValues;
        Label CodiceArticolo = (Label)ListView1.Items[e.ItemIndex].FindControl("CODICE_ARTICOLOLabel1");
        string Descrizione = "";
        string UM = "";
        string Foto = "";
        string TipoArt = "";
        foreach (DictionaryEntry entry in NuoviValori)
        {
            switch (entry.Key.ToString())
            {
                case "DESCRIZIONE":
                    Descrizione = entry.Value.ToString();
                    break;
                case "UM":
                    UM = entry.Value.ToString();
                    break;
                case "FOTO":
                    if (entry.Value == null)
                    {
                        Foto = EncodeTo64("ADBC"); 
                    }
                    else
                    {
                        Foto = entry.Value.ToString();
                    }
                    break;
                case "TIPO_ART":
                    TipoArt = entry.Value.ToString();
                    break;
            }
        }
        e.Cancel = true;
        string strCmd = "UPDATE TBL_ARTICOLI SET DESCRIZIONE = '" + Descrizione +"'," +
                                               "UM = '" + UM +"'," +
                                               "FOTO = @Foto," + 
                                               "TIPO_ART = '" + TipoArt + "' " +
                                               "WHERE CODICE_ARTICOLO = '" + CodiceArticolo.Text + "'";
        RunSqlCommand.Parametro parametro = new RunSqlCommand.Parametro();
        parametro.Name = "Foto";
        parametro.Tipo = SqlDbType.VarBinary;
        parametro.Value = Convert.FromBase64String(Foto);
        RunSqlCommand.Parametro[] Parametri = new RunSqlCommand.Parametro[1];
        Parametri[0] = parametro;
        string retCmd = new RunSqlCommand().RunSqlCmdParamDeltaSSL(strCmd, Parametri);
        ListView1.EditIndex = -1;
    }

        static public string EncodeTo64(string toEncode)
    {
        byte[] toEncodeAsBytes
              = System.Text.ASCIIEncoding.ASCII.GetBytes(toEncode);
        string returnValue
              = System.Convert.ToBase64String(toEncodeAsBytes);
        return returnValue;
    }

    public struct Parametro
    {
        public SqlDbType Tipo;
        public object Value;
        public string Name;
    }

        public string RunSqlCmdParamDeltaSSL(string Command, Parametro[] Parameters)
    {
        int NumeroAffetto;
        Connection ConnString = new Connection();
        SqlConnection Conn = new SqlConnection();
        Conn.ConnectionString = ConnString.ConnectDeltaSSL();
        SqlCommand Comando = new SqlCommand(Command, Conn);
        foreach (Parametro param in Parameters)
        {
            SqlParameter picparameter = new SqlParameter();
            picparameter.SqlDbType = param.Tipo;
            picparameter.ParameterName = param.Name;
            picparameter.Value = param.Value;
            Comando.Parameters.Add(picparameter);
        }
        Comando.CommandType = System.Data.CommandType.Text;
        try
        {
            Comando.Connection.Open();
            NumeroAffetto = Comando.ExecuteNonQuery();
            return NumeroAffetto.ToString();
        }
        catch (Exception ex)
        {
            return ex.Message;
        }
        finally
        {
            Comando.Connection.Close();
        }
    } 
```

但是用这段代码每次都是一样的错误。

我控制了桌子，但一切都是正确的。

真的我不知道还需要做什么。

谢谢

皮尔卡洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:27:46.350

好的，我找到了以下解决方案：我在 sql server 中创建了两个函数，它们在 strinBase64 中转换 varbinary，反之亦然，这样我就可以像 asp.net 中的字符串一样处理数据：

```
 ALTER FUNCTION dbo.FUN_BASE64_TO_VARBINARY
    (
        @str VARCHAR(MAX)
    )
    RETURNS varbinary(max)
    AS
    BEGIN
    RETURN  cast(N'' as xml).value('xs:base64Binary(sql:variable("@str"))', 'varbinary(max)');
    END

    ALTER FUNCTION dbo.FUN_BINARY_TO_BASE64
    (
        @bin varbinary(MAX)
    )
    RETURNS VARCHAR(MAX)
    AS
    BEGIN
        return cast(N'' as  xml).value('xs:base64Binary(xs:hexBinary(sql:variable("@bin")))', 'varchar(max)');
    END 
```

并在选择和更新命令中使用它，如下所示：

```
SelectCommand="SELECT CODICE_ARTICOLO, DESCRIZIONE, UM, dbo.FUN_BINARY_TO_BASE64(FOTO) AS FOTO, TIPO_ART FROM TBL_ARTICOLI
                       WHERE (SUBSTRING(CODICE_ARTICOLO, 1, CHARINDEX('*', CODICE_ARTICOLO) - 1) = @CATEGORIA_ARTICOLO)" 
UpdateCommand="UPDATE [TBL_ARTICOLI] SET [DESCRIZIONE] = @DESCRIZIONE, [UM] = @UM, [FOTO] = dbo.FUN_BASE64_TO_VARBINARY(@FOTO), [TIPO_ART] = @TIPO_ART WHERE [CODICE_ARTICOLO] = @CODICE_ARTICOLO"> 
```

一切正常

皮尔卡洛

# grails - grail应用程序启动时如何避免石英启动

> ID：12567898
> 
> 赞同：4
> 
> 时间：2012-09-24T15:12:44.953
> 
> 标签：grails, groovy, quartz-scheduler

我在 GRAILS 中有一个使用 Quartz2 插件的简单应用程序。在工作文件中，我有：

```
static triggers = {
    simple repeatCount: 0 // execute job once in 5 seconds
    cron cronExpression: '0 15 2 * * ?'
}

def execute() {
    if (Environment.current == Environment.PRODUCTION)
        do something...
} 
```

在这种情况下一切正常，如果它不在生产中，则忽略触发器。现在问题很简单，如果我在生产环境中启动应用程序，那么只要 grails 启动，工作就会开始。我希望避免在应用程序启动后尽快运行作业，但前提是在 cronExpression 中正确设置。

任何想法？

更新：最后我把这一行放在 config.groovy 中：

```
environments {
    development {
       grails.logging.jul.usebridge = true
       grails.plugin.quartz2.autoStartup = false
    }
    production {
      grails.logging.jul.usebridge = false
  }  
} 
```

现在似乎不是从引导程序开始我必须做更多的测试，我让你知道。

谢谢你

UPDATE2：好的，现在计划根本没有开始，我期待它开始但不执行计划的作业，而是等待正确的时间来触发它。有什么帮助吗？

多谢

UPDATE3：对不起，但我觉得很愚蠢，在启动时添加简单的 repeatCount:0 火，所以删除它可以完美运行，再次抱歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T15:39:55.673

通过设置`conf\QuartzConfig.groovy`，您可以控制作业调度自动启动的环境。例如：

```
quartz {
    autoStartup = true
    jdbcStore = false
    waitForJobsToCompleteOnShutdown = true
}

environments {
    development {
        quartz {
            autoStartup = false
        }
    }
} 
```

在您的`jobs`课堂上，您还可以`startDelay`在触发器上设置 a

```
static triggers = {
    cron name: 'myTrigger', startDelay: 5000, cronExpression: '0 15 2 * * ?'
} 
```

# php - ksoap2 响应为空。responseDump 是 wsdl 文件本身，而不是信封

> ID：12567914
> 
> 赞同：1
> 
> 时间：2012-09-24T15:13:37.260
> 
> 标签：php, android, web-services, wsdl, ksoap2

所以我有一个 PHP 网络服务，我想通过 SOAP 从 Android 应用程序访问它。我很肯定网络服务正在正常工作，因为我在本地构建了一个 PHP 客户端并尝试从网络服务（在线）请求，并且 PHP 客户端能够检索正确的数据。当我尝试信封的“getResponse()”时，问题是 NullPointerException。此外，信封的“bodyIn”也为空。我尝试并输出了 HttpTransportSE 的 responseDump，它显示了 WSDL 文件本身。它不应该返回响应信封，而不是 WSDL 文件吗？

安卓客户端：

```
package com.franzsarmiento.shorecloudsurvey;

import java.io.IOException;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;

public class MainMenu extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_menu);

        new DownloadNewSurveys().execute();
    }

    private class DownloadNewSurveys extends AsyncTask<Void,Void,Void> {

        private final static String NAMESPACE = "http://203.177.73.175:8080/";
        private final static String METHOD_NAME = "getSid";
        private final static String SOAP_ACTION = "http://203.177.73.175:8080/getSid";
        private final static String URL = "http://203.177.73.175:8080/sid.wsdl";

        @Override
        protected Void doInBackground(Void... arg0) {

            SoapObject request = new SoapObject(NAMESPACE,METHOD_NAME);

            SoapSerializationEnvelope envelope = new
                    SoapSerializationEnvelope(SoapEnvelope.VER11);          
            envelope.setOutputSoapObject(request);

            HttpTransportSE ht = new HttpTransportSE(URL);
            ht.debug = true;

            try {
                ht.call(SOAP_ACTION, envelope);
            } catch (IOException e) {
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                e.printStackTrace();
            }

            SoapObject response = null;

            System.out.println(ht.responseDump);

            try {
                response = (SoapObject)envelope.getResponse();
            } catch (SoapFault e) {
                response = (SoapObject)envelope.bodyIn;
            }

            System.out.println(response);
            return null;
        }

    }

} 
```

WSDL 文件（这也是我打印 responseDump 时得到的相同内容）：

```
<definitions name='Sid'

  targetNamespace='http://203.177.73.175:8080/'

  xmlns:tns='http://203.177.73.175:8080/'

  xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/'

  xmlns:xsd='http://www.w3.org/2001/XMLSchema'

  xmlns:soapenc='http://schemas.xmlsoap.org/soap/encoding/'

  xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/'

  xmlns='http://schemas.xmlsoap.org/wsdl/'>

<message name='getSidRequest'/>

<message name='getSidResponse'>

  <part name='sidArray' type='tns:ArrayOfinteger[]'/>

</message>

<portType name='SidPortType'>

  <operation name='getSid'>

    <input message='tns:getSidRequest'/>

    <output message='tns:getSidResponse'/>

  </operation>

</portType>

<binding name='SidBinding' type='tns:SidPortType'>

  <soap:binding style='rpc'

    transport='http://schemas.xmlsoap.org/soap/http'/>

  <operation name='getSid'>

    <soap:operation soapAction='getSid'/>

    <input>

      <soap:body use='encoded' namespace='urn:sid'

        encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>

    </input>

    <output>

      <soap:body use='encoded' namespace='urn:sid'

        encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>

    </output>

  </operation>

</binding>

<service name='SidService'>

  <port name='SidPort' binding='SidBinding'>

    <soap:address location='http://203.177.73.175:8080/sid_server.php'/>

  </port>

</service>

</definitions> 
```

PHP 网络服务：

```
<?php 

function getSid() {
    $con = mysql_connect('localhost','fsarmiento','shorecloud') or die (mysql_error());
    $db = mysql_select_db('limesurvey',$con);

    $query = '
        SELECT 
            sid
        FROM
            lime_surveys
    ;';

    $result = mysql_query($query) or die (mysql_error());

    $arrSid = array();

    while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
        $arrSid[] =  intval($row['sid']);
    }

    return $arrSid;

}

ini_set("soap.wsdl_cache_enabled", "0"); // disabling WSDL cache

$server = new SoapServer("sid.wsdl", array('encoding'=>'UTF-8'));

$server->addFunction("getSid");

$server->handle();

?> 
```

此外，我还阅读了一些解决方案，即 URL 应指向 PHP Web 服务而不是 wsdl 文件。我试过了，它仍然是空的。虽然当我检查 responseDump 时，我看到的只是特殊字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:26:31.430

我解决了我自己的问题！所以事实证明其他人是正确的，当访问 PHP Web 服务时，URL 必须指向 Web 服务本身，而不是一些指南提到的 WSDL 文件。现在我已经尝试将它指向 PHP Web 服务，但错误仍然存​​在，事实证明这是由 ClassCastException 引起的，因为响应是一个整数数组，所以不是简单的：

```
SoapObject response = (SoapObject)envelope.getResponse(); 
```

必须做的是：

```
Vector<SoapObject> response = (Vector<SoapObject>)envelope.getResponse(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T00:25:56.803

对于那些因为您的例外而到达这里的人：

> Log.e("responseDump", transport.responseDump.toString());

或您的：

> System.out.println(transport.responseDump.toString());

在打印字符串之前，您必须确保您的调用结构如下：

```
HttpTransportSE transport = new HttpTransportSE(URL);
transport.debug = true;
transport.call(SOAP_ACTION, envelope); 
```

如果你有你的**transport.debug = true;** 在**transport.call（SOAP_ACTION，信封）之后；**，你会崩溃，你的弦会燃烧！确保在调用之前将 debug 设置为 true ...

# api - magento 访问被拒绝

> ID：12567915
> 
> 赞同：8
> 
> 时间：2012-09-24T15:13:38.150
> 
> 标签：api, magento, rest, oauth

我已经在 Ubuntu 12.0.4 服务器上安装了 Magento 1.7.0.2，一切正常。

使用管理员角色测试 REST API (http://1.2.3.4/magento/api/rest/products) 我得到这个结果：

```
<magento_api>
  <messages>
    <error>
      <data_item>
      <code>403</code>
        <message>Access denied</message>
      </data_item>
    </error>
  </messages>
</magento_api> 
```

我创建了一个管理员角色，授予所有访问权限，并且令牌身份验证过程正常。

我尝试过使用 magento go 服务、Bitnami VM 和 Windows 安装程序，但似乎不存在 Web 服务（我只能在 Web 服务下看到用户/角色）。

您知道使用 REST API 工作的 magento 设置吗？

我该如何调试这种错误？我尝试过使用不同的 REST 客户端。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:27:13.127

您是否为角色和属性设置了权限？如果不检查，请先做 magentocommerce.com/api/rest/permission_settings/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T09:29:24.847

我曾经为 magento 测试过 REST API ..

我关注的博客帮助我设置了 REST Api

[1.首先](http://www.magentocommerce.com/api/rest/introduction.html)

[2.秒](http://www.aschroder.com/2012/04/introduction-to-the-magento-rest-apis-with-oauth-in-version-1-7/)

[3.第三](http://www.digitalblend-cl.com/blog/index.php/articles/website-documents/207-magento-rest-and-oauth-to-the-party)

我使用 RESTClient 插件进行火狐测试，并确保在服务器上启用了 Oauth。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:33:12.280

检查以下帖子。这可能对您有所帮助。

[Oauth 休息 api](https://stackoverflow.com/questions/13857981/error-while-using-rest-api-in-magento)

并且

[使用管理员用户获取产品](http://www.magentocommerce.com/api/rest/authentication/oauth_authentication.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-26T02:04:42.157

感谢那里的chanz，我找到了解决我自己问题的方法。

> 它似乎不接受 OAuth 参数作为查询字符串参数。我尝试将它们作为 HTTP 标头发送，但它正在通过。

来源：[http ://www.aschroder.com/2012/04/introduction-to-the-magento-rest-apis-with-oauth-in-version-1-7/comment-page-1/#comment-5090](http://www.aschroder.com/2012/04/introduction-to-the-magento-rest-apis-with-oauth-in-version-1-7/comment-page-1/#comment-5090)

当然，请确保您在`System > Web Services > Web Roles`和具有正确的设置`System > Web Services > Web Attributes`。

[使用Ruby oAuth 库](http://oauth.rubyforge.org/)也很有帮助，因为“它干净、简单且运行良好”。见[那里](http://www.aschroder.com/2012/04/introduction-to-the-magento-rest-apis-with-oauth-in-version-1-7/)的帖子。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-04-30T08:56:44.423

您应该在 api 中针对这个问题尝试这些：-

1）更改文件/app/code/core/Mage/Api2/Model/Auth.php中的值，将DEFAULT_USER_TYPE = 'guest'的值更改为DEFAULT_USER_TYPE = 'admin'。

2) 更改文件/app/code/core/Mage/Api2/Model/Auth/Adapter.php 中的值，将这一行从return (object) array('type' => Mage_Api2_Model_Auth::DEFAULT_USER_TYPE, 'id' => 空）；为此：返回（对象）数组（'type' => Mage_Api2_Model_Auth::DEFAULT_USER_TYPE, 'id' => '1'); （注意：仅将 null 更改为 '1'）。

3）重启你的服务器（对于 apache 运行这个命令：sudo service apache2 restart）。我希望这些步骤能解决您的 403 访问被拒绝问题。

# sql - 查询Oracle以一行加入日期间隔

> ID：12567916
> 
> 赞同：2
> 
> 时间：2012-09-24T15:13:39.253
> 
> 标签：sql, oracle, date, join, range

如果第二行的开始是第一行结束后的第二天，我的问题是加入更多的日期间隔。在所有这些情况下，我应该只有一排。前任：

```
id      start           end
10      20120101        20120125
10      20120201        20120225
10      20120226        20120302
10      20120303        20120304 
```

一定是

```
10      20120101        20120125
10      20120201        20120304 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:02:29.377

这是我的建议：您是否在表中有这些行，我们称之为“temp_table”，您可以创建一个仅保留相关日期的视图：

```
CREATE VIEW temp_view AS
SELECT id, dd, ROWNUM AS nr
  FROM (
    SELECT s.ID, s.start_date AS dd --for izolated intervals, keep the wtart date
      FROM temp_table s, temp_table prv, temp_table nxt
     WHERE prv.end_date(+) = s.start_date-1 AND prv.ID(+) = s.ID
       AND s.end_date+1 = nxt.start_date(+) AND nxt.ID(+) = s.ID
       AND prv.ID IS NULL AND nxt.ID IS NULL
    UNION
    SELECT s.ID, decode(nxt.id, 
                   NULL, s.end_date, --no next interval => keep the end date
                   decode(prv.id,
                      NULL, s.start_date)  --no previous interval => keep the start date
                  ) AS dd 
      FROM temp_table s, temp_table prv, temp_table nxt
     WHERE prv.end_date(+) = s.start_date-1 AND prv.ID(+) = s.ID
       AND s.end_date+1 = nxt.start_date(+) AND nxt.ID(+) = s.ID
       AND (prv.ID IS NULL OR nxt.ID IS NULL)
    ORDER BY dd   --order all the dates ascending  
  ); 
```

此视图将返回如下内容：

```
ID  DD          NR
10  20120101    1
10  20120125    2
10  20120201    3
10  20120304    4 
```

您可以查询如下内容：

```
SELECT start_dates.ID, start_dates.dd AS start_date, end_dates.dd AS end_date
  FROM temp_view start_dates, temp_view end_dates 
 WHERE start_dates.ID = end_dates.ID
   AND start_dates.nr+1 = end_dates.nr 
   AND MOD(start_dates.nr,2) = 1 
```

结果：

```
ID  START_DATE  END_DATE
10  20120101    20120125
10  20120201    20120304 
```

# java-me - 让 J2ME 应用程序在后台运行，而另一个应用程序仍然可以工作

> ID：12567919
> 
> 赞同：1
> 
> 时间：2012-09-24T15:13:49.290
> 
> 标签：java-me, background, midp, lcdui

如何让 J2ME 应用程序在后台运行，以便另一个应用程序仍然可以工作？

在`MIDlet`我尝试设置的课程中`display.setCurrent(null)`，但是当我在诺基亚设备上尝试时，我无法播放其他应用程序，并且屏幕仅显示退出按钮！

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:10:54.813

某些手机​​不支持后台执行 Java ME 应用程序。假设您的手机确实有它也可以调用 MIDlet.notifyPaused。根据文档：

`Notifies the application management software that the MIDlet does not want to be active and has entered the Paused state.`

但请注意

`If the application pauses itself it will need to call resumeRequest to request to reenter the active state.`

# python - 如何将 Postgres 的 Hstore 列与 flask-sqlalchemy 一起使用？

> ID：12567922
> 
> 赞同：4
> 
> 时间：2012-09-24T15:14:01.430
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy, hstore

我正在尝试实现此代码[https://gist.github.com/1859653](https://gist.github.com/1859653)，它允许 sqlalchemy 与 hstore 列进行交互。

它在该要点的评论中提到需要运行 psycopg2.extras.register_hstore。该函数应该在何时以及何时运行？如果我做：

```
@app.before_request
def reg_hstore() :
register_hstore(db.engine.raw_connection(), True) 
```

“连接太多”的heroku错误

还提到使用 pghstore (http://pypi.python.org/pypi/pghstore) 而不是 psycopg2，但它没有说明如何设置它。

另外，我想知道这个附加代码是否支持使用 hstore 索引。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T18:07:17.923

从 SQLAlchemy 0.8 开始，`psycopg2`PostgreSQL 的连接器（默认）[将默认注册 hstore 扩展](http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html#hstore-type)，`apply_driver_hacks`不再需要解决方法。

此外，SQLAlchemy 0.8+ 具有内置`HSTORE`类型支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T03:31:53.197

试试这个：

```
from flaskext.sqlalchemy import SQLAlchemy
import psycopg2
import psycopg2.extras

class _SQLAlchemy(SQLAlchemy):
    def apply_driver_hacks(self, app, info, options):
        """This method adds option to support hstore on psycopg2"""

        if info.drivername == "postgres":
            def _connect():
                conn = psycopg2.connect(user=info.username,
                                        host=info.host,
                                        port=info.port,
                                        dbname=info.database,
                                        password=info.password)
                psycopg2.extras.register_hstore(conn)
                return conn
            options["creator"] = _connect
        SQLAlchemy.apply_driver_hacks(self, app, info, options) 
```

另见：

*   [http://packages.python.org/Flask-SQLAlchemy/api.html?highlight=apply_driver_hack#flask.ext.sqlalchemy.SQLAlchemy.apply_driver_hacks](http://packages.python.org/Flask-SQLAlchemy/api.html?highlight=apply_driver_hack#flask.ext.sqlalchemy.SQLAlchemy.apply_driver_hacks)
*   [http://docs.sqlalchemy.org/en/rel_0_7/core/engines.html#custom-dbapi-connect-arguments](http://docs.sqlalchemy.org/en/rel_0_7/core/engines.html#custom-dbapi-connect-arguments)

# ruby-on-rails - 需要有关 Rails 应用程序站点规划的建议：从其他站点获取 JSON 并将其传递给 JS Ajax

> ID：12567923
> 
> 赞同：0
> 
> 时间：2012-09-24T15:14:02.657
> 
> 标签：ruby-on-rails, ajax, model-view-controller

我是网络应用程序开发的新手。最近我创建了一个应用程序：http: [//konganize.herokuapp.com](http://konganize.herokuapp.com)

徽章（正文中的图标）是通过`jQuery.ajax()`.

对于混搭、搜索/排序和用户登录，我将在服务器端（Rails）收集数据。

我的计划是这样的：[谷歌文档](https://docs.google.com/presentation/d/1roDeiHrMDiw8Z9WWsg1GBdjsE60eEAbYcFOxZmp2jpw/edit)

这是收集 JSON/XML/API 数据的好方法吗？或者说，我应该使用单独的控制器来做吗？（或者使用 rake-task/helper/etc？）

非常感谢您的建议和解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:24:53.593

我建议你做任何对你来说最有意义的事情。

1.  如果实时对您来说具有更高的优先级价值 - 那么我建议直接与 API 交谈。

2.  如果实时对您来说具有中等价值 - 那么您应该考虑执行 rake 任务以获取数据并将其存储在本地，然后进行混搭。您可以安排此 rake 任务以您首选的设定频率运行。

# visual-studio-2010 - Visual Studio 在启动时删除 SafeImports

> ID：12567925
> 
> 赞同：2
> 
> 时间：2012-09-24T15:14:19.820
> 
> 标签：visual-studio-2010, visual-studio, msbuild, msbuildextensionpack

我们在项目文件中使用 MSBuild.ExtensionPack 对 Visual Studio 中的项目文件进行一些增强。打开项目时，我们收到以下警告：

> “{application name} 项目文件已经过定制，在 Microsoft Visual Studio 中打开时可能会通过执行定制构建步骤带来安全风险。如果此项目来自不可靠的来源，它可能会损坏您的计算机或泄露您的私人信息。”

选项是 1) 加载项目以进行浏览或 2) 正常加载项目。

我们可以通过将 MSBuild.ExtensionPack 的值条目添加到以下注册表项来暂时抑制此消息，

```
HKEY_LOCALMACHINE\Software\Microsoft\VisualStudio\ 8.0\MSBuild\SafeImports\ 
```

这是在 MSDN 和其他地方找到的解决方案。**但是**，Visual Studio 2010 似乎删除了我在启动时添加的值。非常令人沮丧。我要添加的价值是

```
Name: MSBuild.ExtensionPack
Value: C:\Program Files (x86)\MSBuild\ExtensionPack\4.0\MSBuild.ExtensionPack.tasks 
```

我想知道如何防止 Visual Studio 2010 删除此值，或以其他方式抑制消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:58:53.410

我想知道“[从另一个位置打开 vs2010 项目](http://msmvps.com/blogs/theproblemsolver/archive/2010/05/06/opening-a-vs2010-project-from-another-location.aspx)”中提出的解决方案是否适合您的情况：

作者说：*“解决这个问题很容易，只需在 Windows 资源管理器中选择项目文件，右键单击并打开文件属性，然后单击取消阻止按钮告诉 Windows 和 Visual Studio，您信任该文件。”* （有关更详细的分步说明，请参阅帖子）

请注意，在此[论坛讨论](http://social.msdn.microsoft.com/Forums/en/vssetup/thread/87f61e60-547b-462b-8dde-144848b4682c)中，您似乎必须以管理员身份运行才能获得解锁项目的选项：

*   使用管理员帐户登录您的 Windows 7
*   启动 Visual Studio 2010 时，请以管理员权限运行（右键单击图标>>“以管理员身份运行”）

# facebook - 错误的点赞数出现在 graph.facebook.com

> ID：12567934
> 
> 赞同：0
> 
> 时间：2012-09-24T15:14:52.847
> 
> 标签：facebook, facebook-graph-api

当我看这个页面时：

[http://www.rockit.it/BusyFamily/album/advice-for-your-next-failure/20334](http://www.rockit.it/BusyFamily/album/advice-for-your-next-failure/20334)

点赞数为 42。

如果我尝试通过 facebook api 检索喜欢的数量：

[http://graph.facebook.com/?id=http://www.rockit.it/BusyFamily/album/advice-for-your-next-failure/20334](http://graph.facebook.com/?id=http://www.rockit.it/BusyFamily/album/advice-for-your-next-failure/20334)

```
{
   "name": "Advice for your next failure - Busy Family",
   "is_published": true,
   "description": "Ascolta l'album su Rockit.",
   "about": "Ascolta l'album su Rockit.",
   "app_id": 162683947163843,
   "category": "Album",
   "id": "491498180869281",
   "link": "http://www.rockit.it/BusyFamily/album/advice-for-your-next-failure/20334",
   "likes": 2
} 
```

我有2个赞，为什么？

打开的图形数据是这样的：

```
<meta property="og:title" content="Advice for your next failure - Busy Family"/>
<meta property="og:type" content="album"/>
<meta property="og:url" content="http://www.rockit.it/BusyFamily/album/advice-for-your-next-failure/20334"/>
<meta property="og:site_name" content="Rockit.it"/>
<meta property="fb:admins" content="1747861721"/>
<meta property="fb:admins" content="763518965"/>
<meta property="fb:app_id" content="162683947163843"/>
<meta property="og:description" content="Ascolta l'album su Rockit. “Advice for your next failure”  è l’opera prima dei Busy Family, fresca band folk-rock di stanza tra Trieste e Belluno, nata dall’idea di..."/>
<meta property="og:image" content="http://www.rockit.it/thumbx200x200/copertine/20334.jpg"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:32:35.647

点赞按钮上的数字不仅仅是点赞数；Like 按钮文档中提到了这一点，有关更详细的统计信息，您可以使用 url_like FQL 表：

`select normalized_url, share_count, like_count, comment_count, total_count, commentsbox_count, comments_fbid, click_count from link_stat WHERE url = 'http://www.rockit.it/BusyFamily/album/advice-for-your-next-failure/20334'`

现在的结果是

```
{
  "data": [
    {
      "normalized_url": "http://www.rockit.it/BusyFamily/album/advice-for-your-next-failure/20334", 
      "share_count": 16, 
      "like_count": 23, 
      "comment_count": 3, 
      "total_count": 42, 
      "commentsbox_count": 0, 
      "comments_fbid": 377087125706867, 
      "click_count": 0
    }
  ]
} 
```

`total_count`是“赞”按钮上显示的数字

# php - Symfony 2 会话在通过 AJAX 调用创建后不会持续存在

> ID：12567935
> 
> 赞同：4
> 
> 时间：2012-09-24T15:14:55.107
> 
> 标签：php, ajax, session, symfony, symfony-2.1

让我给你一个场景。我有一个调用 /auth 的 AJAX 调用 - 该页面依次检查用户是否经过身份验证并设置了几个会话变量（下面的代码）。

```
$session = $this->getRequest()->getSession();

$session->set('fbid', $fbid);
$session->set('name', $name);

// not sure if this is even needed - get the same with or without
//$session->save(); 
```

现在，如果我转到另一个页面并尝试访问该会话，它会返回为空。

如果我在常规页面上设置这些会话（不是通过 XMLHttpRequest/AJAX 访问的页面），它工作正常。

这是我的会话设置`config.yml`：

```
session:         
    cookie_lifetime:         3600
    cookie_httponly:         false 
```

我以为问题可能是`httponly`，但事实并非如此。

有什么建议么？我错过了什么吗？

*** 更新 ***

这是我的安全/防火墙设置：

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    login:
        pattern:  ^/demo/secured/login$
        security: false

    secured_area:
        pattern:    ^/demo/secured/
        form_login:
            check_path: /demo/secured/login_check
            login_path: /demo/secured/login
        logout:
            path:   /demo/secured/logout
            target: /demo/ 
```

我根本没有更改防火墙设置，据我所知，它不应该影响`/auth`通过 XMLHttpRequest 的调用。

*** 更新 2 ***

我最终`$session->shutdown()`在 2 组之后添加（是的，我知道 shutdown 不是 Session 对象方法）。它最终得到了一个错误，但正因为如此它开始工作并且它实际上将它保存到 $_SESSION。因此，如果该错误迫使它保存到 $_SESSION，则必须有一个实际的方法来强制保存。真是奇葩。。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T01:54:00.847

我弄清楚了问题所在。

第一个会话是在生产环境中创建的（通过 AJAX / XMLHttpRequest 调用的操作），而我测试它的下一页实际上是在开发环境中。当时，我从来没有想过 Symfony 2 实际上是在不同的位置保存 prod 和 dev 的会话——PHP 通常有一个默认位置，它会保存所有会话。

Symfony 2 覆盖了默认值`session.save_path`，并为每一个都设置了它自己的值——不幸的是，在我发现这一点之前浪费了一天。

还写了一篇关于它的文章，所以其他人不必经历同样的问题。

[http://jondev.net/articles/Reasons_why_Symfony_2_sessions_might_not_always_persist](http://jondev.net/articles/Reasons_why_Symfony_2_sessions_might_not_always_persist)

# magento - 如果客户购买某些产品，Magento 有条款和条件

> ID：12567937
> 
> 赞同：4
> 
> 时间：2012-09-24T15:15:02.160
> 
> 标签：magento, conditional-statements

我只想在客户购买某些产品时显示条款和条件 (agreements.phtml)。例如，我们的一些产品需要处方。如果客户购买其中之一，我们希望出现这些条款。

我在后端创建了一个属性：prescription_required

伪代码如下：

```
Loop through products in the basket
    if prescription_required == yes
        set flag to yes
    end if
end loop 
```

如果 flag 设置为 yes，则通过协议.phtml 中的代码

我认为我遇到的主要问题是在协议.phmtl 中获取产品信息并遍历篮子。

我试过了

```
<?php 
    $_product = Mage::getModel('catalog/product')->load($this->getData('product_id'));
    echo $_product->getName();
?> 
```

但什么都没有返回。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T23:12:50.927

**编辑：**

我做了一个扩展，正是你想要实现的，并通过 Magento Connect 发布了它。这是链接： http: [//www.magentocommerce.com/magento-connect/catalog/product/view/id/14603](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/14603)。您可以下载它，或按照以下步骤操作。扩展源代码的链接位于答案的底部。

**编辑结束**

这些是您必须执行的步骤：

1.  创建负责显示（或不显示）条款和条件的新产品属性
2.  重写负责在结帐页面上显示这些条款和条件的块
3.  重写负责检查所有必需的条款和条件复选框是否被用户单击的助手

**假设和目标：**

我假设您不想创建比实际需要更复杂的东西。我将向您解释如何进行扩展，如果购物车中至少有一种产品需要条款/条件，或者没有任何产品 - 如果购物车中没有产品需要这个。

我还假设我们想把事情做对，不理会核心文件。当然，只修改核心功能可能会更容易，但这种做法将来确实会造成麻烦。这就是我们制作新模块的原因。

接下来我假设所有商店都需要此功能，如果有多个商店的话。

最后一件事——我在 Magento Community Edition 1.7 上测试了我的方法。不能保证在其他版本上工作，但我认为它应该在 1.6 和 1.5 上工作。如果您使用其中一个版本，您可以尝试。我不确定它是否适用于旧版本。

**创建新属性：**

这超出了问题的范围，但最好是：

*   该属性是一个是/否选项，因为我们不再需要任何东西
*   该属性是系统属性，因此我们不必将其添加到每个属性组

当然，根据您的需要，您可以通过其他方式创建属性。

在我的例子中，产品属性被赋予了一个 code `conditional_agreements`。此代码用于下面的代码片段。

**重写块**

我们必须重写的块是`Mage_Checkout_Block_Agreements`. 它只有一个功能 - `getAgreements()`。

首先要做的是重写。我的包被调用`bartoszgorski`，我的模块是`conditionalagreements`，所以我的代码`config.xml`是：

```
<config>
    <!-- other code -->
    <global>
        <!-- other code -->
        <blocks>
            <checkout>
                <rewrite>
                    <agreements>Bartoszgorski_Conditionalagreements_Block_Agreements</agreements>
                </rewrite>
            </checkout>
        </blocks>
        <!-- other code -->
    </global>
</config> 
```

在文件本身中，我只是使用了一个助手（稍后解释）来检查我们是否要显示任何条款和条件。我的代码如下所示：

```
public function getAgreements() {
    if(Mage::helper('conditionalagreements')->checkIfQuoteRequiresAgreements() == true) {
        return parent::getAgreements();
    } else {
        return array();
    }
} 
```

因此，如果有要显示的内容，我们可以显示它。否则，`function`返回一个空`array`的协议。

**重写助手：**

`helper`我们要重写的是`Mage_Checkout_Helper_Data`. 如果`helper`不重写，Magento 将不显示任何条款/条件，但仍会要求用户检查他们的复选框 - 这当然是不可能的。所以，我在 config.xml 中的代码是：

```
<config>
    <!-- other code -->
    <global>
        <!-- other code -->
        <helpers>
            <conditionalagreements>
                <class>Bartoszgorski_Conditionalagreements_Helper</class>
            </conditionalagreements>
            <checkout>
                <rewrite>
                    <data>Bartoszgorski_Conditionalagreements_Helper_Data</data>
                </rewrite>
            </checkout>
        </helpers>
        <!-- other code -->
    </global>
</config> 
```

在 中`helper`，有一个函数`getRequiredAgreementIds()`负责获取必须同意的每个条款和条件。我们想做同样的事情，但前提是购物车中至少有一种产品需要它。这就是为什么我建议创建另一个帮助函数（`checkIfQuoteRequiresAgreements()`在我的例子中）来检查此类产品并将其用于`getRequiredAgreementIds()`（以及在其中`block`，如前所示）。所以，重写`helper`应该有这些功能：

```
public function getRequiredAgreementIds()
{
    if($this->checkIfQuoteRequiresAgreements() == true) {
        if (is_null($this->_agreements)) {
            if (!Mage::getStoreConfigFlag('checkout/options/enable_agreements')) {
                $this->_agreements = array();
            } else {
                $this->_agreements = Mage::getModel('checkout/agreement')->getCollection()
                    ->addStoreFilter(Mage::app()->getStore()->getId())
                    ->addFieldToFilter('is_active', 1)
                    ->getAllIds();
            }
        }
        return $this->_agreements;
    } else {
        return array();
    }
}

public function checkIfQuoteRequiresAgreements() {
    $showAgreements = false;
    $quote = Mage::getSingleton('checkout/session')->getQuote();
    foreach ($quote->getAllVisibleItems() as $quoteItem) {
        $product = Mage::getModel('catalog/product')->load($quoteItem->getProductId()); 
        if($product->getConditionalAgreements() == 1) {
            $showAgreements = true;
            break;
        }
    }
    return $showAgreements;
} 
```

就是这样。完成此操作后，您应该拥有想要的东西。请记住，如果您在条款和条件中拥有多个项目，则只能显示全部或不显示。当然，你可以根据我的代码片段开发更多的东西——这取决于你。

这是我的完整工作模块：

[https://github.com/bgorski/conditionalagreements](https://github.com/bgorski/conditionalagreements)

你可以预览我在那里所做的，或者只是下载它并在你的网站上使用。

希望有帮助。任何反馈将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:24:20.717

假设该选项是一个文本字段，您可以这样做：

```
// get your cart object
$quote = Mage::getSingleton('checkout/session')->getQuote();

foreach ($quote->getItems() as $item) {
    $productId = $item->getProductId();
    $product = Mage::getModel('catalog/product')->load($productId); 
    $prescriptionRequired = $product->getAttributeText('prescription_required');

    // code for subscription handling goes here

} 
```

让我知道它是否有效...

问候

# python - 无法制作内存视图，因为对象没有缓冲区接口

> ID：12567938
> 
> 赞同：2
> 
> 时间：2012-09-24T15:15:03.080
> 
> 标签：python, django, web

我正在使用 django 1.3.1 和 python 2.7 实现一个应用程序。

此应用程序使用 Facebook 登录，但我收到此消息错误作为回报：

```
TypeError at /promo-racao/
cannot make memory view because object does not have the buffer interface 
```

奇怪的是它在本地有效。这个错误只发生在webserver上，但是环境是一样的。而且它不指向特定的文件或代码行。

在 Google 上搜索此错误不会返回任何有用的信息。这是我从 Django 得到的回溯：

```
Environment:

Request Method: GET
Request URL: http://dev.muccacompany.com/promo-racao/?code=<my code - yes, I modified this part>

Django Version: 1.3.1
Python Version: 2.7.1
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.admin',
 'south',
 'mucca_apps.social',
 'djcelery',
 'mailing',
 'muitter',
 'customer',
 'finance',
 'blogs',
 'web',
 'social',
 'gunicorn',
 'so_desconto',
 'djcelery',
 'partner',
 'tracking']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'tracking.middleware.TrackingMiddleware')

Traceback:
File "/usr/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/mucca/git/deploy/muccadev/app/views.py" in home
  24\.         return participar(request, code)
File "/home/mucca/git/deploy/muccadev/app/views.py" in participar
  33\.         fb_profile = get_or_create_fbprofile(request, redirect_url)
File "/home/mucca/git/deploy/muccadev/app/helpers.py" in get_or_create_fbprofile
  16\.     token = fb_auth.app_auth(request)
File "/home/mucca/git/deploy/muccadev/mucca_apps/social/helpers.py" in app_auth
  52\.             response = urllib2.urlopen(req)
File "/usr/lib/python2.7/urllib2.py" in urlopen
  126\.     return _opener.open(url, data, timeout)
File "/usr/lib/python2.7/urllib2.py" in open
  392\.         response = self._open(req, data)
File "/usr/lib/python2.7/urllib2.py" in _open
  410\.                                   '_open', req)
File "/usr/lib/python2.7/urllib2.py" in _call_chain
  370\.             result = func(*args)
File "/usr/lib/python2.7/site-packages/poster/streaminghttp.py" in https_open
  170\.             return self.do_open(StreamingHTTPSConnection, req)
File "/usr/lib/python2.7/urllib2.py" in do_open
  1155\.             h.request(req.get_method(), req.get_selector(), req.data, headers)
File "/usr/lib/python2.7/httplib.py" in request
  941\.         self._send_request(method, url, body, headers)
File "/usr/lib/python2.7/httplib.py" in _send_request
  975\.         self.endheaders(body)
File "/usr/lib/python2.7/httplib.py" in endheaders
  937\.         self._send_output(message_body)
File "/usr/lib/python2.7/httplib.py" in _send_output
  801\.             self.send(message_body)
File "/usr/lib/python2.7/site-packages/poster/streaminghttp.py" in send
  81\.                 self.sock.sendall(value)
File "/usr/lib/python2.7/site-packages/gevent-0.13.3-py2.7-linux-i686.egg/gevent/socket.py" in sendall
  510\.                 data_sent += self.send(_get_memory(data, data_sent), flags, timeout=timeleft)
File "/usr/lib/python2.7/site-packages/gevent-0.13.3-py2.7-linux-i686.egg/gevent/socket.py" in _get_memory
  261\.         return memoryview(string)[offset:]

Exception Type: TypeError at /promo-racao/
Exception Value: cannot make memory view because object does not have the buffer interface 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:20:23.980

这是 gevent 中的一个错误。它已在 0.13.7 中修复。只需升级 gevent，就可以了。见：[http ://www.gevent.org/changelog.html](http://www.gevent.org/changelog.html)

# c - “register volatile int i”在 C 中的行为如何？

> ID：12567940
> 
> 赞同：11
> 
> 时间：2012-09-24T15:15:11.920
> 
> 标签：c, volatile

我知道每次我们对变量执行一些计算并且基本上不优化代码时，一个 register 关键字将分配一个用于计算值的寄存器，而一个 volatile 关键字将从内存中读取值。那么，如果一个变量同时被分配了这两个关键字，这是否意味着它本身本质上是 volatile 的？我无法通过编写示例代码来理解这种行为。任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T15:39:54.393

在 C 中，`register`存储类的行为与存储类完全相同`auto`，只是如果程序尝试获取或使用对象的地址（6.5.3.2、6.7.1），则需要实现（根据 5.1.1.3）发出诊断）。使用`register`作为对编译器的优化提示通常是没有意义的，因为足够聪明的编译器可以利用对象的非存储质量，当然也足够聪明以跟踪可以声明哪些对象`register`；相反，它应该被理解为一种代码质量检查，即程序员不会通过获取对象的地址而无意中破坏优化机会。

换句话说，`register`从有效程序中删除关键字的所有实例对程序的语义*没有影响；*在这方面与`static_assert`.

类型限定符表示对对象的`volatile`访问（读取和写入）被认为是副作用并且不能被优化掉。对于在定义的位置内存中不存在的对象（即具有`register`存储类的对象），这在性能测试中最有用：

```
start = time();
for (multiple loops)
    register volatile int result = test_function();
stop = time();
elapsed = stop - start; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T16:47:17.953

`volatile`意味着对象可能会以编译器无法预测的方式更改，并且`register`意味着无法获取其地址。

当对象实际上是平台上的硬件寄存器时，两者的结合非常有意义。一些编译器（例如 gcc）甚至具有将此类变量固定到特定硬件寄存器的扩展。

其他一些代码可能会更改这样的硬件寄存器，因此编译器可能不会假设当前值。`const`在这种情况下，添加限定符甚至是有意义的。例如使用 gcc 的扩展名

```
register uint32_t volatile const eax __asm__("eax"); 
```

您将拥有随时检查`eax`寄存器的工具，但您无法意外更改它。

# ios6 - UICollectionViewController 编辑

> ID：12567943
> 
> 赞同：3
> 
> 时间：2012-09-24T15:15:24.263
> 
> 标签：ios6, uicollectionview

我可以通过按导航面板上的编辑按钮`self.navigationItem.leftBarButtonItem = self.editButtonItem;`来进入可编辑状态。`UITableViewController`

如何做出这样的行为`UICollectionViewController`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T18:41:29.067

**解决方案：**

我在单元格中添加了带有删除图像的按钮，然后在`cellForItemAtIndexPath:`

```
...
if (self.editing) {
    cell.deleteButton.hidden = NO;
}else cell.deleteButton.hidden = YES;
... 
```

在编辑按钮触摸时重新加载数据：

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
    [super setEditing:editing animated:animated];
    _fetchedResultsController = nil;
    [self.collectionView reloadData];
} 
```

按钮触发删除方法：

```
- (IBAction)deleteTour:(UIButton *)sender{
    NSIndexPath *indexPath = nil;
    indexPath = [self.collectionView indexPathForItemAtPoint:[self.collectionView convertPoint:sender.center fromView:sender.superview]];
} 
```

# xslt-2.0 - 用xsl中的空格替换结束标记

> ID：12567945
> 
> 赞同：1
> 
> 时间：2012-09-24T15:15:26.147
> 
> 标签：xslt-2.0

我在尝试将大量嵌套的 xml 文件转换为文本时遇到问题。我真正想要的输出只是某些节点及其子节点的文本内容（在本例中为“secondBit”和“thirdBit”类型的节点“div”）。不幸的是，有一些内部标签 (span class="bold") 需要被删除，并且结束标签被一个空格替换。这是输入文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<myxml>
<content>
<p class="heading">Omit this please</p>
  <div type="firstBit">
    <div class="extended"><span class="italic">this as well</span>
    </div>
    <meta name="factor"/>
  </div>
  <div type="secondBit">
    <p>
      <meta name="first" id="9"/>Some text in here.</p>
  </div>
  <div type="thirdBit">
    <div class="internal" >
      <div class="intro">
        <p class="varied">And then a <span class="bold">Button</span>can be pushed <span class="bold">without</span>any trouble</p>
      </div>
    </div>
  </div>
</content>
</myxml> 
```

这是我到目前为止的xsl：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:strip-space elements="*" />

<xsl:output method="text" encoding="UTF-8" indent="no"
    omit-xml-declaration="yes" />

<xsl:template match="node()">
    <xsl:apply-templates />
</xsl:template>

<xsl:template match="div[@type= ('secondBit', 'thirdBit')]">
    <xsl:value-of select="." />
</xsl:template>

</xsl:stylesheet> 
```

然而，这给了我输出：

> 这里有一些文字。然后可以毫无问题地按下按钮

而我想要输出（注意空格）：

> 这里有一些文字。然后可以毫无问题地按下按钮

我知道我可能必须以某种方式介绍以下 xsl 片段，但我不确定如何：

```
<xsl:template match="span[@class='bold']">
    <xsl:value-of select="normalize-space(.)"/><xsl:text> </xsl:text>
</xsl:template> 
```

如果这不是问这些问题的地方，我为浪费人们的时间而道歉。

否则感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:01:21.163

这是我的建议：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:strip-space elements="*" />

<xsl:output method="text" encoding="UTF-8"/>

<xsl:template match="*[not(.//div[@type= ('secondBit', 'thirdBit')])]"/>

<xsl:template match="*[.//div[@type= ('secondBit', 'thirdBit')]] |
                     div[@type= ('secondBit', 'thirdBit')] |
                     div[@type= ('secondBit', 'thirdBit')]//*" priority="5">
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="div[@type= ('secondBit', 'thirdBit')]//span[@class='bold']" priority="10">
    <xsl:apply-templates/>
    <xsl:text> </xsl:text>
</xsl:template>

</xsl:stylesheet> 
```

当我将 Saxon 9.4 HE 应用于您的输入样本时，我得到了结果`Some text in here.And then a Button can be pushed without any trouble`。

# android - Android 上带有边距的 RadioButton 左侧的文本

> ID：12567950
> 
> 赞同：11
> 
> 时间：2012-09-24T15:15:37.807
> 
> 标签：android, layout, textview, radio-button

我想要“标签”，-您在按钮中设置的文本`RadioButton`显示在按钮的左侧，并且在它们之间有一些填充。

在布局中添加一个附加项`TextView`不起作用，因为`RadioGroup`如果我将除 a 之外的任何其他内容添加`RadioButton`到`RadioGroup`.

那么，我怎样才能将 RadioButton 更改`<text><buttondrawable>`为`<buttondrawable><text>`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-24T15:27:17.300

您可以通过设置和添加as`android:button="@null"`的 drawable来实现这一点。您可以使用 更改文本和可绘制对象之间的填充。`RadioButton``android:drawableRight``android:drawablePadding`

```
 <RadioGroup
        android:id="@+id/radios"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:inputType="text"
        android:orientation="vertical" >

        <RadioButton
            android:id="@+id/first"
            android:button="@null"
            android:drawableRight="@android:drawable/btn_radio"
            android:drawablePadding="20dp"
            android:layout_width="200dip"
            android:layout_height="wrap_content"
            android:text="@string/first"
            android:textSize="20dip" />

        <RadioButton
            android:id="@+id/second"
            android:button="@null"
            android:drawableRight="@android:drawable/btn_radio"
            android:drawablePadding="20dp"
            android:layout_width="200dip"
            android:layout_height="wrap_content"
            android:text="@string/second"
            android:textSize="20dip" />
    </RadioGroup>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T07:13:35.160

上面的答案使图像没有选择状态。

愿这对您有所帮助：

*   在 API <= 16 上，您可以在单选按钮上设置向左填充以设置相对于单选按钮的视图边界的填充。此外，补丁九背景也改变了相对于视图的视图边界。

*   在 API 17 上，左侧填充与可绘制的单选按钮相关。同样适用于补丁九。为了更好地说明填充差异，请参阅随附的屏幕截图。

如果您深入研究代码，您会在 api 17 中找到一个名为 getHorizo​​ntalOffsetForDrawables 的新方法。在计算单选按钮的左侧填充时调用此方法（因此图片中显示了额外的空间）。

TL;DR 您应该为您支持的 min sdk 设置单选按钮样式，并为 api 17+ 设置另一种样式

答案来自@James Baca 回答的[同一个问题](https://stackoverflow.com/questions/2134591/add-margin-between-a-radiobutton-its-label-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-04T21:12:53.593

您还可以从右到左更改布局方向并对齐文本以开始

```
android:layoutDirection="rtl"
android:textAlignment="textStart" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-17T11:48:09.523

step1-创建可绘制的radio_button_insert。

```
<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"   android:drawable="@drawable/ic_baseline_check_circle_24"
    android:insetRight="@dimen/dp10">
</inset> 
```

step2-创建可绘制的custom_radio_button。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" android:enterFadeDuration="@android:integer/config_shortAnimTime" android:exitFadeDuration="@android:integer/config_shortAnimTime">
    <item android:drawable="@drawable/radio_button_inset" android:state_checked="true" />
    <item android:drawable="@color/transparent" android:state_checked="false" />
</selector> 
```

step3-为背景创建drawable。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" android:enterFadeDuration="@android:integer/config_shortAnimTime" android:exitFadeDuration="@android:integer/config_shortAnimTime">
    <item android:drawable="@drawable/bg_roundcorner_blue_border" android:state_checked="true"/>
    <item android:drawable="@drawable/bg_roundcorner_gray_border" android:state_checked="false" />
</selector> 
```

第 4 步 - 在单选按钮布局中使用。

```
 <RadioGroup
                android:id="@+id/rg_options"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layoutDirection="rtl"
                app:layout_constraintEnd_toEndOf="parent"
                android:orientation="vertical"
                android:layout_margin="@dimen/dp10"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toBottomOf="@id/title">
                <androidx.appcompat.widget.AppCompatRadioButton
                    android:layout_width="match_parent"
                    android:text="@string/lbl_store"
                    android:padding="@dimen/dp10"
                    android:button="@drawable/custom_radio_button"
                    android:background="@drawable/custom_radio_background"
                    android:layout_height="wrap_content"/>
                <androidx.appcompat.widget.AppCompatRadioButton
                    android:layout_width="match_parent"
                    android:padding="@dimen/dp10"
                    android:layout_marginTop="@dimen/dp25"
                    android:background="@drawable/custom_radio_background"
                    android:button="@drawable/custom_radio_button"
                    android:text="@string/lbl_your_manufacturers"
                    android:layout_height="wrap_content"/>
            </RadioGroup> 
```

输出：[![单选按钮和背景形状](../Images/ff9ce808479901d9206aedcbffa30797.png)](https://i.stack.imgur.com/1WKqt.png)

# javascript - 基于输入字段的 Jquery / Javascript 更改表单操作

> ID：12567953
> 
> 赞同：2
> 
> 时间：2012-09-24T15:16:07.820
> 
> 标签：javascript, jquery, forms

我有这样的表格

```
<html>
    <body>
    <form action='' name='myform' method='POST'>
    <input type='text' name='cars'>
    <button action='submit'>Search Cars</button>
    </body>
</html> 
```

我想要做的是将表单操作更改为`action='http://www.mysite.com/<cars_value>.html'>`基于输入字段中填充的内容（由自动完成填充）。

有没有一种简单的方法可以做到这一点？我可以`<select>`很容易地做到这一点，但客户想要一个输入字段！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T15:24:47.233

您可以这样做，您需要为项目添加 ID。您可能想要做的一件事是验证用户输入。

**HTML**

```
<form action='' name='myform' id="myform" method='POST'>
  <input type='text' name='cars' id="cars">
  <button action='submit'>Search Cars</button>
</form> 
```

**jQuery**

```
$('#myform').submit(function(){
  var car = $('#cars').val();
  $(this).attr('action', "http://www.mysite.com/" + car + ".html");
}); 
```

编辑：最好是页面底部的javascript；

**满的**

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
<body>
  <form action='' name='myform' id="myform" method='POST'>
    <input type='text' name='cars' id="cars">
    <button action='submit'>Search Cars</button>
  </form>
  <script src="path-to-jquery"></script>
  <script>
  // Shorthand for $(document).ready();
  $(function() {
   $('#myform').submit(function(){
     var car = $('#cars').val();
     $(this).attr('action', "http://www.mysite.com/" + car + ".html");
   });
  });
 </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:18:39.973

你可以这样做：

```
$('#myForm').submit(function() {
    this.action = 'http://mysite.com/<xyz>.html';
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T15:23:21.637

您需要从输入字段中获取值并填充 xyz 值.. 试试这个

```
$('#myForm').submit(function() {

    var value = $('input[type="text"]').val(); 

    this.action = 'http://mysite.com/' + value + '.html';
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:27:42.980

首先获取您的输入，然后更新操作。如果您想在更改值后提交表单，则返回 true，如果这些是单独的按钮，则返回 false。

```
<button onclick="changeVal($('input').val()">change value</button>
<script>
    function changeVal(value){
    $("form").attr("action",'http://mysite.com/'+value+'.html');
    return true;
    }
</script> 
```

Be careful doing things like this, as if you use this solution you will be opening yourself up to javascript injection attacks. You'll want to "scrub" your input before injecting it into your form.

# windows-7 - 桌面上下滚动

> ID：12567954
> 
> 赞同：0
> 
> 时间：2012-09-24T15:16:16.323
> 
> 标签：windows-7, scroll, desktop

我有一台使用宽屏显示器运行 Windows 7 的计算机，但是每当鼠标移动到屏幕的顶部或底部时，所有内容（包括图标和任务栏）似乎都会在屏幕上向上或向下滚动。我查看了控制面板设置，但找不到任何可以关闭此桌面滚动功能的内容。我们如何在 Windows 7 中禁用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:29:24.153

你有缩放功能吗？如果是这样，您应该将其关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:52:18.630

解决了。通过将屏幕分辨率更改为与更宽屏幕匹配的分辨率，该问题已得到解决。

# java - 启动 Tomcat 时出错，主要/次要版本不受支持，但环境变量似乎正确

> ID：12567956
> 
> 赞同：11
> 
> 时间：2012-09-24T15:16:19.923
> 
> 标签：java, linux, ant, tomcat7

我在 Linux 上从命令行启动 Tomcat 7 时遇到问题，日志显示如下：

```
Sep 24, 2012 8:54:10 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the jav
a.library.path: /usr/lib64/jvm/java-1.6.0-openjdk-1.6.0/jre/lib/amd64/server:/usr/lib64/jvm/java-1.6.0-openjdk-1.6.0/jre/lib/amd64:/u
sr/lib64/jvm/java-1.6.0-openjdk-1.6.0/jre/../lib/amd64:/usr/lib64/mpi/gcc/openmpi/lib64:/usr/java/packages/lib/amd64:/usr/lib64:/lib6
4:/lib:/usr/lib
Sep 24, 2012 8:54:10 AM org.apache.tomcat.util.digester.Digester startElement
SEVERE: Begin event threw error
java.lang.UnsupportedClassVersionError: pms/security/BCryptRealm : Unsupported major.minor version 51.0
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
        at org.apache.tomcat.util.digester.ObjectCreateRule.begin(ObjectCreateRule.java:144)
        at org.apache.tomcat.util.digester.Digester.startElement(Digester.java:1276)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:504)
        at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:182)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.jav
a:1320)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScann
erImpl.java:2732)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:48
8)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1208)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:525)
        at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:610)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:658)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
```

从谷歌搜索我明白我可以忽略的第一点，但我想知道这是否表明它正在尝试使用的 Java 版本，因为它一直说 Java 6。我理解的“不支持的 major.minor 版本 51.0”意味着我有不知何故Java版本有问题。

我使用 ant 构建了它遇到问题的类（使用 BCrypt 的自定义领域），运行 ant -v 显示它正在使用 Java 7 进行编译，这正是我想要的。我也将 JAVA_HOME 和 JDK_HOME 设置为使用 Java 7（据我所知，它们都指向同一个地方）。

我还缺少什么？如果需要更多信息，请告诉我。我真的很感激任何关于我应该在哪里寻找问题的指示。谢谢。

ETA 评论中每个问题的更多信息：我正在通过命令行启动 tomcat。我只是从 tomcat 基本目录中执行 ./bin/startup.sh 。我从[Apache 网站](http://tomcat.apache.org/download-70.cgi)下载了 tomcat 。我昨晚拿到了核心tar.gz版本并解压（我之前只有版本6，想升级）。这也不是我的个人机器；如果这很重要，我只有用户权限。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T15:23:29.793

打开`tomcat/bin`目录并更改`JAVA_HOME`参数`catalina.sh`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-24T04:13:13.800

我不认为给定的回答是正确的。事实上，major.minor 异常意味着你当前安装的 Java 版本不符合最低要求。特别是，在您的错误中说 51 （这是 Java SE 7 的内部代码）。因此，要解决此问题，您实际上需要安装 Java 7。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-03T04:01:11.830

确保 JRE_HOME 设置为 JRE1.6（或更高版本）。

另外，只是一个问题。如果您有两个 Tomcat 安装（即 Tomcat8 和 Tomcat7），请确保您的 CATALINA_HOME 变量未设置为 Tomcat8 的路径。因为这也会导致这个问题。（我一开始忽略了日志！）

```
C:\devtools\apache-tomcat-7.0.47\bin>set CATALINA_HOME=C:\devtools\apache-tomcat-8.0.0-RC5

C:\devtools\apache-tomcat-7.0.47\bin>configtest.bat
Using CATALINA_BASE:   "C:\devtools\apache-tomcat-8.0.0-RC5"
Using CATALINA_HOME:   "C:\devtools\apache-tomcat-8.0.0-RC5"
Using CATALINA_TMPDIR: "C:\devtools\apache-tomcat-8.0.0-RC5\temp"
Using JRE_HOME:        "C:\Progra~1\Java\jdk1.6.0_45\jre\"
Using CLASSPATH:       "C:\devtools\apache-tomcat-8.0.0-RC5\bin\bootstrap.jar;C:\devtools\apache-tomcat-8.0.0-RC5\bin\tomcat-juli.jar"
Exception in thread "main" java.lang.UnsupportedClassVersionError: org/apache/catalina/startup/Bootstrap : Unsupported major.minor version 51.0
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: org.apache.catalina.startup.Bootstrap.  Program will exit. 
```

仅供参考，您可以使用以下方法取消设置 CATALINA_HOME：

```
set CATALINA_HOME= 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-04T07:21:28.370

我遇到了类似的问题，发现我使用的是 Tomcat 8.5 和不兼容的 jdk 版本 1.6。后来我安装了最新的 JDK 版本 1.8 并解决了问题。希望它有所帮助。

# sas - SAS 存储过程结果集转储

> ID：12567957
> 
> 赞同：0
> 
> 时间：2012-09-24T15:16:38.210
> 
> 标签：sas, resultset, dump, data-dump

我尝试完成的任务是将远程 SAS 机器通过任何工具计算的结果集导出到 CSV/XLSX 文件。

我正在谈论的结果集大小为 500K 行和 100MB XLSX 近似文件大小。

SAS 服务器详细信息：

操作系统：Linux for X64

产品：SAS 9.2 64 位，修订版 920_11w03

我从 MS Excel 收到的错误代码（尝试通过 SAS Add-in for Office 4.2 获取结果集时）如下所示：

`System.OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown. at System.String.InternalCopy(String str) at System.Text.StringBuilder.ToString() at SAS.Report.Models.XML.XMLIQData.XMLCSV.CreateValueElement(Char ch, ArrayList valueList, Values& values, StringBuilder& sb, Boolean& inDataString) at SAS.Report.Models.XML.XMLIQData.XMLCSV.TokenizeString(String csvString, ArrayList valueList, ValuesList& valuesList, Int32& valuesCount, Boolean isOLAP) at SAS.Report.Models.XML.XMLIQData.XMLCSV.LoadElement(ReportElement parent) at SAS.Report.Models.XML.XMLReportElement.LoadSubelement(String name, XmlNode node, XMLReportElement xmlClass, ReportElement parent) at SAS.Report.Models.XML.XMLReportElement.LoadSubelements(String name, XMLReportElement xmlClass, ReportElement parent) at SAS.Report.Models.XML.XMLIQData.XMLEmbeddedData.LoadElement(ReportElement parent) at SAS.Report.Models.XML.XMLReportElement.LoadSubelement(String name, XmlNode node, XMLReportElement xmlClass, ReportElement parent) at SAS.Report.Models.XML.XMLReportElement.LoadSubelement(String name, XMLReportElement xmlClass, ReportElement parent) at SAS.Report.Models.XML.XMLIQData.LoadElement(ReportElement parent) at SAS.Report.Models.XML.XMLReportElement.LoadSubelement(String name, XmlNode node, XMLReportElement xmlClass, ReportElement parent) at SAS.Report.Models.XML.XMLData.LoadElement(ReportElement parent) at SAS.Report.Models.XML.XMLReportElement.LoadSubelement(String name, XmlNode node, XMLReportElement xmlClass, ReportElement parent) at SAS.Report.Models.XML.XMLReportElement.LoadSubelements(String name, XMLReportElement xmlClass, ReportElement parent) at SAS.Report.Models.XML.XMLSASReport.LoadElement(ReportElement parent) at SAS.Report.Models.XML.XMLParse.CreateDOM(Stream file, String fragment, Hashtable customObjectMap) at SAS.Report.Models.XML.XML.ReadReport(Stream inputStream, Hashtable customObjectMap) at SAS.Report.Models.XML.XML.ReadReport(FileInfo file, Hashtable customObjectMap, String prefixUniqueId) at SAS.Report.Models.XML.XML.ReadReport(String filename, Hashtable customObjectMap, String uniqueIdPrefix) at SAS.AMO.Reports.SASReport.FromXML(String filename, Hashtable customObjectMap, Int32 fileId) at SAS.OfficeAddin.ExcelReports.ExcelSASReport.FromXml(String filename, Int32 fileId) at SAS.OfficeAddin.ExcelAddin.OpenSASReport(JobContext context) at SAS.OfficeAddin.ExcelAddin.ProcessResults(JobContext context) at SAS.OfficeAddin.OfficeAddinBase.PostProcessJob(JobContext jobContext, Boolean promptOnErrors)`

请就任何可以帮助使数据可访问的软件提供建议（最终目标是从从 SAS 存储过程中检索到的数据制作数据透视表）。

# html - 基于 PC 和 iPhone 重定向用户

> ID：12567958
> 
> 赞同：0
> 
> 时间：2012-09-24T15:16:48.243
> 
> 标签：html, redirect

我在尝试根据用户使用 PC 还是 iPhone 重定向用户时遇到问题。以下脚本可用于重定向用户：

**个人电脑**

```
<meta http-equiv="REFRESH" content="0;url=http://www.google.com"> 
```

**苹果手机**

```
if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i))) {

        if (document.cookie.indexOf("iphone_redirect=false") == -1) {

            window.location = "http://yahoo.com";       

        }
} 
```

我以谷歌和雅虎为例。

但是，当我同时使用这两个脚本时，当我访问 iPhone 上的页面时，它会不断重新加载（似乎以循环结束）。当我使用计算机访问该页面时，它会按应有的方式重定向我。有没有办法解决这个问题？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:27:48.783

```
if( navigator.userAgent.match(/iPhone|iPad|BlackBerry|Android/i) ) {
        if (document.cookie.indexOf("iphone_redirect=false") == -1) {
            window.location = "http://yahoo.com";       
        }
} 
//PC
else {
    window.location = "http://google.com";
} 
```

# c# - 为什么 caliburn micro 在不应该这样做时调用此方法？

> ID：12567963
> 
> 赞同：1
> 
> 时间：2012-09-24T15:17:19.957
> 
> 标签：c#, wpf, caliburn.micro

我在 caliburn micro 中有一个视图和视图模型，如下所示：

看法：

```
 <Canvas>

         <Rectangle x:Name="CloseApp" Canvas.Top="0" Canvas.Left="0" Fill="green" Opacity="0.2" Height="20" Width="30" />
          <Rectangle x:Name="MoveWindow" Canvas.Top="0" Canvas.Left="60" Fill="red" Opacity="0.2" Height="20" Width="964" cal:Message.Attach="[Event MouseLeftButtonDown] = [Action MoveWindow]" />
</Canvas> 
```

和视图模型

```
 /// </summary>
    public void MoveWindow()
    {
        Window view = this.GetView(null) as Window;

        if (view != null)
        {
            view.DragMove();
        }
    }
    public void CloseApp()
    {

    } 
```

我注意到，当我单击红色矩形并拖动它时，释放左键后，Caliburn 微调用 CloseApp。

为什么它应该这样做时调用这个方法？

**编辑1：**

我发现如果绿色矩形从 left=1 (canvas.Left="1") 开始，这不会发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:38:57.000

如果您没有明确指定要附加的消息，Caliburn.Micro 会退回到基于约定的命令模型，它会在您的 VM 上查找与控件名称匹配的方法并自动将其连接起来。它会自动连接到一些事件来执行此操作。要覆盖它，要么更改矩形“CloseApp”的名称，要么在矩形“CloseApp”上添加您自己的操作消息，或者更改名为 CloseApp() 的方法的名称。

> ViewModelBinder 在找到约定绑定的元素后要做的下一件事是检查它们是否与 ViewModel 上的方法匹配。它通过使用一点反射来获取 ViewModel 的公共方法来做到这一点。然后循环遍历它们，寻找与元素匹配的不区分大小写的名称。如果找到匹配项，并且元素上没有任何预先存在的 Interaction.Triggers，则附加一个动作。检查预先存在的触发器用于防止约定系统创建与开发人员可能在标记中明确声明的重复操作。为了安全起见，如果您在匹配的元素上声明了任何触发器，则会跳过它。

来自[http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Conventions&referringTitle=Documentation](http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Conventions&referringTitle=Documentation)

# informix - 在 informix 4GL SE 中创建临时表

> ID：12567967
> 
> 赞同：1
> 
> 时间：2012-09-24T15:17:47.633
> 
> 标签：informix, 4gl

我应该如何在临时表中创建和填充数据？那么如何打印在临时表上检索到的数据？我看到了这样的例子；但没有进一步的帮助。所以我需要一些帮助。

```
 SELECT DISTINCT * FROM Table INTO TEMP Temp1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:25:42.087

您可以像从任何其他表中一样选择数据：

```
SELECT * INTO r_temp1.* FROM Temp1 
```

或为此类语句定义游标，并使用 FOREACH 循环，或...

诀窍是您需要在编译时知道 Temp1 中的列将是什么。在这种情况下，您可以使用：

```
DEFINE r_temp1 RECORD LIKE Table.* 
```

在更一般的情况下，您可能会从相关的零碎中手动组装记录：

```
DEFINE r_temp1 RECORD
               col1 LIKE Table1.ColumnA,
               col2 LIKE Table2.ColumnB,
               ...
               colN LIKE TableZ.ColumnZ
               END RECORD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-30T21:54:37.450

我创建了以下可以调用的函数，传入临时表名称：

```
 function unload_temp(l_table) 
     define
     l_table char(20),
     l_file  char(20),
     str     char(512)

     let l_file = l_table clipped, ".out"
     let str = "select * from ",l_table clipped

     whenever error continue
     prepare stmt_table_exists from str
     whenever error stop

     #Return if table does not exist
     if sqlca.sqlcode = -206
     then
        return
     end if               

     unload to l_file delimiter "|" str

  end function #unload_temp() 
```

这将创建一个名为`tableName.out`.

这在调试时非常有用，并且您想查看临时表在运行程序的中间的样子。

# android - 来自webview中contentprovider的android html5音频

> ID：12567968
> 
> 赞同：0
> 
> 时间：2012-09-24T15:17:52.017
> 
> 标签：android, html, audio, webview

如果我在 webview 中加载这个 html5 音频标签

```
<audio src="audio/diables.m4a" controls="controls"></audio> 
```

使用带有基本 url “content://my.epub.reader.content_provider”的 loadDataWithBaseURL()，内容提供者返回一个 ParcelFileDescriptor。

当它加载/当我点击播放时，我听不到声音，我的 Android 3.2 (Galaxy Tab 10.1) 系统（或 Android 4.0.3 模拟器），记录这个：

```
E/MediaPlayer(19689): Unable to to create media player
E/HTML5Audio(19689): couldn't load the resource: content://my.epub.reader.content_provider/audio/diables.m4a exc: java.io.IOException: setDataSource failed.: status=0x80000000 
```

html5 视频标签在 web 视图中显示**良好**，使用相同的内容提供程序以相同的方式加载它。

音频可能是什么问题？

# python - Tornado的模板翻译函数'_'，它从何而来？

> ID：12567969
> 
> 赞同：0
> 
> 时间：2012-09-24T15:17:56.370
> 
> 标签：python, templates, internationalization, tornado

我需要装饰默认值`tornado.locale.Locale.translate`以添加一些额外的逻辑。

在模板中， translate 方法是一个下划线（正如 gettext 约定所要求的那样），但我找不到定义或传递的位置（我希望它被指定为模板环境变量，别名为上述 translate 方法）。

我的另一个选择是用我自己的方法替换所有出现的“_”方法，但我更愿意坚持使用标准表示法，这样我就不必在之后调整字符串提取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:41:34.607

没关系，我刚刚找到它：

在龙卷风的 web.py 中：

```
 def render_string(self, template_name, **kwargs):
        """Generate the given template with the given arguments.

        We return the generated string. To generate and write a template
        as a response, use render() above.
        """
        # If no template_path is specified, use the path of the calling file
        template_path = self.get_template_path()
        if not template_path:
            frame = sys._getframe(0)
            web_file = frame.f_code.co_filename
            while frame.f_code.co_filename == web_file:
                frame = frame.f_back
            template_path = os.path.dirname(frame.f_code.co_filename)
        with RequestHandler._template_loader_lock:
            if template_path not in RequestHandler._template_loaders:
                loader = self.create_template_loader(template_path)
                RequestHandler._template_loaders[template_path] = loader
            else:
                loader = RequestHandler._template_loaders[template_path]
        t = loader.load(template_name)
        args = dict(
            handler=self,
            request=self.request,
            current_user=self.current_user,
            locale=self.locale,
            _=self.locale.translate,
            static_url=self.static_url,
            xsrf_form_html=self.xsrf_form_html,
            reverse_url=self.application.reverse_url
        )
        args.update(self.ui)
        args.update(kwargs)
        return t.generate(**args) 
```

args 字典有`_=self.locale.translate`；所以我可以在我的处理程序中装饰那个对象。

# mysql - 将列为 TEXT 的性能损失？

> ID：12567975
> 
> 赞同：0
> 
> 时间：2012-09-24T15:18:17.227
> 
> 标签：mysql, database-design, text, varchar

我有一个内容管理系统，用户可以在其中动态创建一个 html 表单。我已经为此设置了所有表格。但是有一件事让我很困扰，那就是输入值的文本大小。

有些表单有文本区域，有些文本区域包含相当多的数据。但表单上也只有简单的文本字段，其中仅包含几个字符的数据。

我用于保存值的数据库表如下所示：

**表单值**

```
id | form_id | fk_element_id | value 
```

因此，在这种情况下，该`value`列将保存特定字段类型的输入数据。因此，在文本字段的情况下，这只会是几个字符。但在文本区域的情况下，这可能是很多数据。

这意味着该`value`列必须至少是 type `TEXT`。尽管大多数类型不会超过 255 个字符`(MAX VARCHAR)`。

现在我不确定这是否是正确的方法。当我查询表时，这会降低性能吗？我是否必须将 textarea 数据保存在另一个表中..？或类似的东西？

或者我可以简单地将`value`列更改为`TEXT`没有任何问题的类型..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:49:53.670

**在MySQL 5.0.3**之前，VARCHAR 最大长度为**255**，从**MySQL 5.0.3**开始最大长度为**65535**，这是最大行大小，因此最大值在行中的所有字段之间共享。

 ******见[dev.mysql.com/doc/refman/5.0/en/char.html](http://dev.mysql.com/doc/refman/5.0/en/char.html)******

# core-data - 防止删除核心数据 NSManagedObject

> ID：12567977
> 
> 赞同：0
> 
> 时间：2012-09-24T15:18:21.127
> 
> 标签：core-data, nsmanagedobject

我有一个 NSArrayController 子类，它设置一个新插入的对象的实例变量，并在该变量为零时阻止用户将其删除。

我想在实体子类中执行此操作。可以在 awakeFromInsert 方法中设置变量。有没有办法防止删除，一种：

```
if (self.testVariable == 0) return;   ? 
```

我没有找到它，但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:37:54.637

在你的 NSManagedObject 中实现它：

```
- (BOOL)validateForDelete:(NSError **)error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T20:57:29.210

基于一些测试，我相信这`validateForDelete`将无法阻止所需的删除。

`validateForDelete`用于在删除*之前执行添加验证。*本质上，方法名称具有误导性。就像例如，对于

此外，`prepareForDelete`被称为优先，将删除任何`Cascade`关系并将任何关系标记为空`Nullify`。因此，必须“退出”。或更改您的数据模型以仅允许`Deny`将这些关系单独留在 prepareForDelete 中。这是对您的业务模型和逻辑施加严厉的反手。

此外，`Deny`当用户保存数据时，关系会被“拒绝”——这对于用户撤消和纠正这种情况可能为时已晚。

我相信最好的选择是取消激活绑定到`canRemove`控制器中的方法的删除按钮。

[一些可靠的意见](http://www.cocoabuilder.com/archive/cocoa/232242-nsmanagedobject-validatefordelete-problem.html) [SO的一些可能的解决方案](https://stackoverflow.com/questions/16226085/nsmanagedobject-relationship-0/16226884#16226884)

# javascript - 无法在 Sencha Touch 2 应用程序中运行 jQuery Masonry

> ID：12567981
> 
> 赞同：0
> 
> 时间：2012-09-24T15:18:33.467
> 
> 标签：javascript, jquery, sencha-touch-2, jquery-masonry

在我的 ST2 应用程序中，我有**index.html**

```
<script id="jquery" type="text/javascript" src="resources/js/jquery-1.8.2.js"></script>
<script id="masonry" type="text/javascript" src="resources/js/masonry-2.1.5.js"></script> 
```

也

```
<script>

$(document).ready(function(){
    var $container = $('.x-list-container');            
    $container.imagesLoaded(function(){                 
        $container.masonry({
        itemSelector: '.x-list-item',
        });
    });
});

</script> 
```

我在应用程序上的首页是一个**列表**，因此它包含这样的元素

```
<div class="x-list-container">
    <div class="x-list-item"></div> // 'x-list-item' is the block I want to float
    <div class="x-list-item"></div>
    ...
</div> 
```

但是，一旦所有内容都加载完毕并且我检查`.x-list-item`没有`style`定位`div`. 我在常规网络应用程序上使用 Masonry 有经验，但不能在这里工作。

就像 Masonry 根本没有运行一样。

它正在加载（在网络选项卡上检查）并且 jQuery 正在加载（在网络选项卡上并使用`if (jQuery) {alert('hey there');`.

知道我做错了什么吗？}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:36:10.653

Sencha touch 不支持为应用程序混合 Jquery。

[来自论坛煎茶版主的原因](http://www.sencha.com/forum/showthread.php?198792-Problem-wi-h-ST2-and-JQuery-Answered)

# asp.net-mvc - Visual Studio 调试/加载非常慢

> ID：12567984
> 
> 赞同：547
> 
> 时间：2012-09-24T15:18:39.973
> 
> 标签：asp.net-mvc, visual-studio, visual-studio-2012, iis-express, cassini

我无计可施。Visual Studio*通常*调试起来非常缓慢，或者只是简单地加载（“不调试就开始”）我的 ASP.NET MVC 站点。并非总是如此：起初，项目会加载得又快又好，但一旦加载缓慢，之后它们总是会加载缓慢。我可能要等 1-2 分钟或更长时间。

**我的设置：**

我目前正在使用[Visual Studio 2012 Express](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio_Express)，但我在 Visual Studio 2010 Express 中也遇到了同样的问题。我的解决方案存储在网络驱动器上；具体来说，如果重要的话，它会将我的文档重定向到网络驱动器。（不应该。有时我的网站在此设置下加载速度非常快。）

我通常在 Internet Explorer 9 中加载，但在 Firefox 中也会出现同样的问题。

这可能发生在我从事的任何 ASP.NET MVC 项目中，并且它似乎围绕着 DisplayTemplates，这是我所有的 ASP.NET MVC 项目所做的。如果这很重要，那就是 C# 和 Razor。

### 症状：

系统将加载我的符号*数百*次。基本上如下，但至少有 300 行这样的行，每行都有用于相同 CSHTML 的略有不同的 DLL 文件：

```
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\b63f8236\6775085d\App_Web_contact.cshtml.22013bb9.xighmhow.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\b63f8236\6775085d\App_Web_contact.cshtml.22013bb9.cv5hktkf.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\b63f8236\6775085d\App_Web_statuscode.cshtml.22013bb9.1o77hs8i.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\b63f8236\6775085d\App_Web_statuscode.cshtml.22013bb9.jja-77mw.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\b63f8236\6775085d\App_Web_location.cshtml.22013bb9.l_e9ev_s.dll', Symbols loaded.
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\b63f8236\6775085d\App_Web_location.cshtml.22013bb9.b4n59gom.dll', Symbols loaded. 
```

在上面，我有三个 DisplayTemplate：“Contact”、“Location”和“StatusCode”。每次调用显示模板时，IIS 似乎都会加载符号两次。因此，如果我要显示一个包含 100 个条目的表格，这些条目调用所有这三个显示模板，则加载了 600 个单独的符号。

这也不是一个快速的操作。IIS 生成的日志文件大约需要 200 毫秒才能加载每个符号。因此，超长延迟。

**我试过的：**

*   Debug 或 Release 版本，没关系。
*   将我的项目放在 Web 服务器上的完整 IIS 实现上，运行速度非常快，没有任何问题。
*   Cassini、IIS Express 7.5 和 IIS Express 8.0 都有这个问题。
*   **删除所有断点什么都不做。**
*   *Clean Solution*或删除 .suo 也无济于事。
*   如果我修复 IIS Express，或删除`My Docs\IISExpress`文件夹，或修复/重新安装 Visual Studio → 问题可能会消失，但只会持续一段时间，然后才会再次出现。

任何建议都值得赞赏。

要回答更多问题，是的，我的机器肯定有马力。令人愤怒的是，同一个项目，没有任何改变，有时可以很快加载，通常是在我修复 IIS Express 并删除`My Docs\IISExpress`文件夹之后。最终，“某事”发生了，再次加载只需 2 分钟。我正在做的不是一个复杂的项目。没有外部库或依赖项，我的 VS.NET 也没有任何附加组件。

值得注意的是，这台机器有 Symantec Endpoint Protection，它有造成严重破坏的历史。但是完全禁用它（成为管理员很好）并没有解决问题。

在这一点上，我有一个理论。我认为这完全是因为我正在处理网络共享的重定向文件夹。当调试器检查它的数百个“加载符号”行时，我停下来看看它在做什么。它在我的代码中，加载了我拥有的 DisplayTemplate。进入模板输出：

```
Step into: Stepping over non-user code 'System.Threading.WaitHandle.InternalWaitOne'
Step into: Stepping over non-user code 'System.Threading.WaitHandle.WaitOne'
Step into: Stepping over non-user code 'System.CodeDom.Compiler.Executor.ExecWaitWithCaptureUnimpersonated'
Step into: Stepping over non-user code 'System.CodeDom.Compiler.Executor.ExecWaitWithCapture'
Step into: Stepping over non-user code 'Microsoft.CSharp.CSharpCodeGenerator.FromFileBatch'
Step into: Stepping over non-user code 'Microsoft.CSharp.CSharpCodeGenerator.System.CodeDom.Compiler.ICodeCompiler.CompileAssemblyFromFileBatch'
Step into: Stepping over non-user code 'System.Web.Compilation.AssemblyBuilder.Compile'
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\b63f8236\6775085d\App_Web_statuscode.cshtml.22013bb9.bciuyg14.dll', Symbols loaded.
Step into: Stepping over non-user code 'System.Web.Compilation.BuildManager.CompileWebFile'
Step into: Stepping over non-user code 'System.Web.Compilation.BuildManager.GetVPathBuildResultInternal'
Step into: Stepping over non-user code 'System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert'
Step into: Stepping over non-user code 'System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory'
Step into: Stepping over non-user code 'System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists'
Step into: Stepping over non-user code 'System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName'
Step into: Stepping over non-user code 'System.Web.Mvc.VirtualPathProviderViewEngine.FindPartialView'
Step into: Stepping over non-user code 'System.Web.Mvc.ViewEngineCollection.Find'
Step into: Stepping over non-user code 'System.Web.Mvc.ViewEngineCollection.FindPartialView'
Step into: Stepping over non-user code 'System.Web.Mvc.Html.TemplateHelpers.ActionCacheViewItem.Execute'
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\b63f8236\6775085d\App_Web_statuscode.cshtml.22013bb9.kwj3uqan.dll', Symbols loaded.
Step into: Stepping over non-user code 'System.RuntimeType.CreateInstanceSlow'
Step into: Stepping over non-user code 'System.Web.Mvc.DependencyResolver.DefaultDependencyResolver.GetService'
Step into: Stepping over non-user code 'System.Web.Mvc.BuildManagerViewEngine.DefaultViewPageActivator.Create'
Step into: Stepping over non-user code 'System.Web.Mvc.BuildManagerCompiledView.Render' 
```

看起来 Visual Studio**每次**调用它时都会重新编译我的显示模板，这又是数百次。我的理论是 Visual Studio 编译文件，将其保存到网络共享，然后以某种方式在其上标记新时间，然后 Visual Studio 认为文件已更改。因此，Visual Studio 再次重新编译它。虽然只是一个理论；我真的一点头绪都没有。

一方面，显然，我有离线文件（这是办公室里的台式电脑；我不在乎）。我将禁用，重新启动，然后明天重试。

另外，将我的项目按原样移动到本地 C: 可以修复它。它加载非常快。但这在工作环境中并不理想。我丢失了以前的版本，我的代码根本没有备份，除非我手动复制它，而且它不再与任何人共享。

如果涉及到它，我可以将它从 C 来回复制到网络共享。每次页面加载等待两分钟更烦人。

* * *

## 回答 #1

> 赞同：714
> 
> 时间：2013-01-02T00:50:28.657

以下是我在 Visual Studio 2012 中解决“符号加载缓慢”问题的方法：

*   转到工具 -> 选项 -> 调试 -> 常规

*   选中“仅启用我的代码”旁边的复选标记。

*   转到工具 -> 选项 -> 调试 -> 符号

*   单击“...”按钮并在本地计算机上的某处创建/选择一个新文件夹以存储缓存的符号。我将我的命名为“符号缓存”并将其放入 Documents -> Visual Studio 2012。

*   单击“加载所有符号”并等待从 Microsoft 的服务器下载符号，这可能需要一段时间。**请注意，加载所有符号按钮仅在调试时可用。**

*   取消选中“Microsoft 符号服务器”旁边的复选标记，以防止 Visual Studio 远程查询 Microsoft 服务器。

*   单击“确定”。

从现在开始，符号加载应该更快。

请注意，如果您对 Microsoft 程序集进行任何更改/下载，您可能需要返回“符号”对话框并再次“加载所有符号”。

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2013-07-03T23:52:30.633

关闭 IntelliTrace 为我解决了这个问题。

在 Visual Studio 中，工具 -> 选项 -> IntelliTrace

然后，取消选中“启用 IntelliTrace”复选框。

![在 Visual Studio 2012 中禁用 IntelliTrace](../Images/3c49b1b0ac50485308fa5afb691de492.png)

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2013-03-28T19:34:51.053

这些都不适合我，但我在已删除的符号上找到了断点。似乎 2010 年就这样挂了。要查看这是否是您的问题，请执行 debug->windows->breakpoints 如果其中有任何问题，请删除它们。

桑德斯，提到他检查过，但在这个问题的解决方案中没有提到。也许对某些人来说是常识，但不是我们所有人。

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2013-09-04T15:01:08.330

我删除了“临时 ASP.NET 文件”文件夹，我的 localhost 页面加载得到了显着改善。这是路径... %temp%\Temporary ASP.NET Files\

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2014-03-10T01:24:00.760

我遇到了同样的问题，并尝试了上述大多数解决方案。简单地删除缓存和临时文件最终对我有用。

尝试删除这两个文件夹的内容：

```
C:\Users\\{UserName}\AppData\Local\Microsoft\WebsiteCache 
```

和

`C:\Users\\{UserName}\AppData\Local\Temp`（特别是 iisexpress 和 Temporary ASP.NET Files 文件夹）。

这可以设置为在登录到 Windows 时自动发生，方法是将 cmd 文件添加到`C:\Users\\{username}\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup`具有以下内容的文件夹中：

```
rmdir C:\Users\\{username}\AppData\Local\Microsoft\WebsiteCache /s /q

rmdir C:\Users\\{username}\AppData\Local\Temp /s /q 
```

* * *

## 回答 #6

> 赞同：32
> 
> 时间：2014-07-03T14:16:58.930

你启用了FusionLog吗？

开始调试时，我的 VisualStudio 启动、打开解决方案和加载符号非常慢。仅在我的机器上很慢，但在其他机器上却没有。

FusionLog 将大量日志内容写入磁盘。就我而言，只需在 RegEdit 上禁用它就可以解决所有问题。

这是注册表中的 FusionLog 键：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion 
```

检查 ForceLog 值（1 启用，0 禁用）。

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2012-09-25T13:47:14.043

我想我可能最终至少知道了原因，尽管不是原因。当问题再次出现时，我注意到大量“conhost.exe”进程成为孤儿。我会关闭 Visual Studio，它们会保持打开状态。结束每个人的任务最终可靠地解决了问题。[希望]

（请注意，conhost.exe 不是 Visual Studio 进程，尽管 Visual Studio 使用它。因此，那里的其他用户可能有其他运行 conhost.exe 的应用程序。我知道我的机器没有，这就是为什么我可以安全地结束除 YMMV 之外的所有任务。）

至于为什么会这样？当我一次打开多个项目时似乎会发生这种情况，我倾向于经常这样做，即使我在任何时候只构建和调试其中一个。

* * *

编辑＃1 - 不幸的是，这不是“银弹”。它并不总是对我有用。通常，当事情变得缓慢时，我会关闭所有 Visual Studio 会话，然后进入任务管理器并结束它的任何实例，conhost.exe、iisexpress.exe Microsoft.VisualStudio.Web.Host.exe 和 MSBuild.exe我能找到。

通常，在那之后，当我重新启动我的项目时，它会快速加载。但不总是。

真的，我认为最好的做法可能是不要从重定向的文件夹/网络共享中构建和调试代码。

* * *

编辑#2 - 两年后，这对我来说在 Visual Studio Community 2013 中*仍然*是一个问题，但我似乎至少找到了罪魁祸首任务：**Explorer.exe**。是啊，谁知道。我结束该任务的那一刻，bam，页面在一秒钟内加载。

如果我有一个 Windows 资源管理器文件浏览器打开到我重定向的网络驱动器（这通常是因为这是我的代码所在的位置），则似乎会发生此问题。关闭窗口是不够的，我必须杀死整个 Explorer.exe 任务。我只能猜测它在做什么......文件句柄发疯了？

我通常可以使用任务管理器来启动一个新的 explorer.exe 任务（我只能使用这么多的 alt-tabbing），并且 Visual Studio 将继续快速加载。但是，如果我再次打开 Windows 资源管理器，它几乎总是会回到超慢动作。

所以，如果你有一个重定向的网络共享，试一试。它肯定比在本地工作要好。

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2013-09-06T15:30:01.413

以上都是很好的解决方案，我都尝试了，但在[这里](https://stackoverflow.com/questions/3747587/visual-studio-2010-takes-too-long-loading-symbols-symbol-file-location-cannot-b)得到了解决方案，即

```
Debug -> Delete All Breakpoints 
```

* * *

## 回答 #9

> 赞同：19
> 
> 时间：2013-08-06T17:39:13.330

对我来说，它是 IE 9.08.8112.16241。当我使用 Firefox 或 Chrome 时，使用 F10 或 F11 进行调试时不会出现缓慢的调试。我不知道 IE 的问题是什么，但我现在正式鄙视使用它进行测试。

更新：我已关闭所有 IE 程序附加组件，它已恢复全速。一次打开它们显示 LastPass（在我的情况下）是罪魁祸首。我想我毕竟不能责怪 MS。

**几年后...**
如果您使用 Brave，您可以轻松访问您的扩展，并在调试时一次（或多个）关闭它们。

```
brave://extensions 
```

只需单击切换滑块。请注意，除了 DuckDuckGo 隐私必需品之外，我的所有内容都已开启。它们没有被删除，只是暂时禁用。

[![在此处输入图像描述](../Images/84e22d144290a4ae40b905c73cabd4be.png)](https://i.stack.imgur.com/1sbdP.png)

* * *

## 回答 #10

> 赞同：19
> 
> 时间：2015-09-10T21:56:59.633

对我来说，我实现[了这个技巧](https://web.archive.org/web/20171230155418/http://blog.lavablast.com/post/2010/12/01/Slash-your-ASPNET-compileload-time.aspx)，通过将以下两个属性添加到编译标记中，基本上大大提高了性能`web.config`

```
<compilation ... batch="false" optimizeCompilations="true"> ... </compilation> 
```

做什么`batch="false"`？

> 它通过仅编译已更改并需要重新编译的页面来使预编译更具选择性

究竟在`optimizeCompilations`做什么？[来源](http://blogs.msdn.com/b/davidebb/archive/2009/04/15/a-new-flag-to-optimize-asp-net-compilation-behavior.aspx)

> ASP.NET 使用每个应用程序的哈希码，其中包括许多事物的状态，包括`bin`and`App_Code`文件夹和 `global.asax`. 每当 ASP.NET 应用程序域启动时，它都会检查此哈希码是否与之前计算的有所不同。如果有，则整个`codegen`文件夹（已编译和影子复制的程序集所在的位置）将被清除。
> 
> 当启用此优化（通过`optimizeCompilations="true"`）时，哈希不再考虑 `bin`,`App_Code`和`global.asax`。因此，如果这些更改我们不会清除该`codegen`文件夹。

参考：[MSDN 上的编译元素](https://msdn.microsoft.com/en-us/library/s10awwz0%28v=vs.100%29.aspx)

* * *

## 回答 #11

> 赞同：13
> 
> 时间：2013-06-04T08:06:24.520

我在调试时也遇到了执行性能问题，我尝试了很多调试器选项。在我的情况下，当我更改此选项时实现了巨大的性能：

工具 - 选项 - 调试 - 输出窗口 - （常规输出设置 - 所有调试输出） - 关闭

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2012-11-21T12:52:49.460

**启用“本机代码”调试器**时，我遇到了 Visual Studio 调试缓慢的问题。尝试禁用它。

在“Visual Studio 2012”上，转到：

1.  项目属性->
2.  网页 ->
3.  调试器（页面底部）。->
4.  禁用除 ASP.NET 之外的所有内容

希望能帮助到你。

类似[问题](https://stackoverflow.com/questions/3463087/visual-studio-2010-debugging-asp-net-mvc-2-app-is-slow/4123368#4123368)：[1、2](https://stackoverflow.com/questions/2707977/visual-studio-2010-very-slow-web-applications-debugging/4123307#4123307)

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2013-12-16T19:12:15.780

就我而言，它是带有 VS 2012 的 .NET Reflector Visual Studio Extension（版本 8.3.0.93）。每次*Step Over* (F10) 的调试需要 10 秒。

在 Visual Studio 中，转到*Tools/Extensions and Updates...*并禁用**.NET Reflector Visual Studio Extension**。不要忘记重新启动 Visual Studio。

* * *

## 回答 #14

> 赞同：11
> 
> 时间：2017-04-17T13:02:25.753

就我而言，它是

```
Tools/Options/Debugging/General/Enable JavaScript debugging for ASP.NET (Chrome and IE) 
```

一旦我取消选中它，我的调试开始时间从 45-60 秒下降到 0-5 秒。

* * *

## 回答 #15

> 赞同：10
> 
> 时间：2013-12-06T18:21:34.330

有一次，停电后，每次遇到断点或抛出异常时，我都不得不面对同样的缓慢问题。

我模糊地记得“suo”文件（与“sln”解决方案文件位于同一目录中）可能已损坏并使一切变慢。

![在此处输入图像描述](../Images/b78e6fdae70c8e965f3dbc40d08809f3.png)

我删除了我的“suo”文件，一切正常。.suo 文件删除是无害的，仅意味着重新创建我的 Windows 布局以及启动项目和一些其他非关键自定义。

* * *

## 回答 #16

> 赞同：10
> 
> 时间：2016-04-29T05:00:52.517

我也遇到了这个问题，以下是我执行的步骤，它总是对我有用：

*   **删除解决方案的 .suo 文件。**
*   **删除临时 ASP.NET 文件（您可以在***%WINDOW%\Microsoft.NET\Framework\\Temporary ASP.NET Files* 找到它）
*   **删除应用程序中的所有断点。**

* * *

## 回答 #17

> 赞同：9
> 
> 时间：2013-02-19T11:19:03.873

我不知道您是否仍然遇到此问题，但我在 Visual Studio 中通过将调试器附加到进程本身来调试站点，而不是让 VS 为我做这件事，我发现它可以大大缩短时间。[我为 VS 使用了一个名为 AttachTo 的扩展，我在这里](http://www.deviouscreation.com/debugging-in-visual-studio-with-iis-express-and-attachto)有一篇关于如何使用它的小文章。

我希望这有帮助。

* * *

## 回答 #18

> 赞同：9
> 
> 时间：2015-07-01T16:15:25.023

**通过禁用浏览器链接**解决了我的慢速 VS 问题

 **![在此处输入图像描述](../Images/6faa3f29c0d4141e35bc1180b6a755f7.png)

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2013-05-03T17:21:41.797

如果有人注意到此行为来自左侧字段，请检查以确保您没有在 web.config 中设置任何断点。我一定是通过鼠标单击设置了一个，它确实减慢了所有调试操作。

* * *

## 回答 #20

> 赞同：6
> 
> 时间：2015-11-17T17:57:50.150

在花了一整天等待符号加载速度与海龟速度一样慢之后，在所有可能的组合之间混合和切换：[Just My Code、缓存符号](https://stackoverflow.com/questions/12567984/visual-studio-debugging-loading-very-slow/#14115731)、[Intellitrace](https://stackoverflow.com/questions/12567984/visual-studio-debugging-loading-very-slow/#17459921)、Just-In-Time、[杀死进程](https://stackoverflow.com/questions/12567984/visual-studio-debugging-loading-very-slow/#12584321)等。

我的解决方案实际上是**禁用防病毒软件**。是的，Windows Defender 正在减慢我的项目启动速度！它会在 Visual Studio 请求时检查所有 dll，并减慢整个符号加载过程。

我不得不说我们的机器具有很好的规格，可以非常快速地编译解决方案，所以这从来都不是问题。我们在 VS 2013 Ultimate 中编写代码。

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2013-10-29T15:40:35.147

清空符号缓存对我有用。

见：菜单栏/工具/选项/调试/符号/空符号缓存

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2014-10-20T20:33:08.467

在 Visual Studio 中：

工具 -> 选项 -> 调试 -> 符号

选择“仅指定的模块”。单击“指定模块”链接，并添加一个空白模块（单击新文档按钮并单击确定）。

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2017-02-22T06:55:08.183

> # 清除*缓存*等使用选项`1`& `2`; 对于设置/*故障排除*选项`3`& `4`，享受！

选项**1**：**导航到 IIS express，清除缓存和站点**

> ```
> cd "C:\Program Files (x86)\IIS Express\" 
> ```

*   运行这个`appcmd.exe list site /xml | appcmd delete site /in`
*   运行这个`Del /S /F /Q %temp%`- 清除 Userprofile Temp 文件夹。
*   运行这个`Del /S /F /Q %Windir%\Temp`

另外，*清除*您的临时文件`%temp%`并注销，或重新启动

这将清除 Windows 临时文件夹。这将删除所有网站，享受！

* * *

选项 2：**删除/重新创建临时文件夹**

*   命令>`rmdir C:\Users\\{username}\AppData\Local\Microsoft\WebsiteCache /s /q`
*   命令>`rmdir C:\Users\\{username}\AppData\Local\Temp /s /q`

* * *

选项**3**：**[来自 MSDN](https://docs.microsoft.com/en-us/visualstudio/debugger/just-my-code?view=vs-2019)****的 JMC（只是我的代码）选项**

要在 Visual Studio 中启用或禁用仅我的代码，`under Tools > Options (or Debug > Options) > Debugging > General, select or deselect Enable Just My Code`.

[![在此处输入图像描述](../Images/e05888774585b0c6dc662eee37c7c17c.png)](https://i.stack.imgur.com/myJIv.png)

* * *

选项**4**：**配置 Visual Studio/禁用常见插件问题**

更多[Visual Studio 设置](https://docs.microsoft.com/en-us/visualstudio/ide/optimize-visual-studio-startup-time?view=vs-2019#tool-windows) 您还可以配置 Visual Studio 并禁用环境中的资源终止功能，不记得我从哪里得到的，但我很快就会发布更多的三个。

环境 -> 一般

*   取消选中“根据客户表现自动调整视觉体验”</li>
*   取消选中“启用丰富的客户端视觉体验”选中“使用硬件图形加速（如果可用）”环境 -> 自动恢复
*   取消选中“每次保存自动恢复信息”</li>
*   环境 -> 文件
*   选中“无法将数据保存在代码页中时将文档另存为 Unicode”环境 -> 键盘
*   将“ForceGC”设置为 ctrl+num1
*   将“ReSharper_Toggle”设置为 ctrl+num0（如果使用了 ReSharper）
*   将“ReSharper_EnableDaemon”设置为 ctrl+num8（如果使用了 ReSharper）环境 -> 启动
*   将“启动时”设置为“启动时显示空环境”</li>
*   取消选中“每次下载内容”环境 -> 同步设置
*   取消选中“登录 Visual Studio 时跨设备同步设置”</li>

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2016-11-29T23:16:29.687

由于未知的 VS 扩展替换了默认的即时调试器，Asp.net 核心调试非常缓慢。

我在 OPTIONS\DEBUGGING\Just-In-Time 配置选项卡中找到了这样的消息（作为警告文本）。 **另一个调试器已将自己注册为即时调试器。要进行修复，请启用即时调试或运行 Visual Studio 修复。**

说明：[https ://msdn.microsoft.com/en-us/library/ssc8234s.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/ssc8234s.aspx?f=255&MSPPError=-2147217396)

返回默认的 JIT 调试器（刚刚选中的未选中的 Managed 选项）解决了我所有的问题。

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2013-01-01T15:59:31.080

就我而言，我注意到禁用我的互联网连接会使其运行速度与使用 ctrl-f5 一样快，所以我去调试->选项->符号并取消选中所有 .pdb 位置。

似乎 VS 每次启动调试会话时都试图连接到这些服务器。

请注意，禁用 Debug->Options->Debugging->General “启用源支持”或“要求源文件与原始版本完全匹配”**不会**有任何区别。

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2013-07-10T09:09:53.513

类似的问题浪费了我一半的时间！

由于我的问题的解决方案与此处所说的不同，因此我将其发布，以便对其他人有所帮助。

我的是一个断点。我有一个**“Break at function”**断点（即，我们不是在代码行上按 F9，而是使用断点窗口创建它们），它应该在我的项目外部的库函数中停止。

我已经**“使用 Intellisense 验证函数名称**”选中。（[这里](http://blogs.msdn.com/b/saraford/archive/2008/07/22/did-you-know-you-can-use-intellisense-to-verify-your-breakpoint-name-in-the-new-breakpoint-window-264.aspx)的信息。）

这比地狱慢（项目启动从 2 秒到 5 分钟）。

删除断点解决了它。

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2014-01-01T00:51:39.607

完成上述所有操作后对我有用的一件事是：
在线程窗口（调试->Windows->线程）中，将 Group by 设置为 None。这只能在调试时完成。

即使在关闭该窗口之后，这也会产生影响。

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2015-01-12T06:09:03.200

在 Windows 资源管理器中打开解决方案文件夹，关闭 Visual Studio，从 Windows 资源管理器中删除 .suo 文件。

现在在 Visual Studio 中打开项目，希望调试器能够快速附加/分离。

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2015-03-13T09:47:31.393

**请确保您尚未以管理员模式打开 Visual Studio**

我遇到了这个问题，不得不在正常模式下运行。

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2015-05-13T09:43:27.297

对我来说，这是条件断点。这些似乎真的让事情变慢了。

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2015-05-21T11:04:08.057

转到您的环境变量并查找键 _NT_SYMBOL_PATH。

删除它。

瞧，工作就像一个魅力。

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2016-01-24T18:26:02.950

**对我来说，问题是当您为同一个项目打开多个选项卡时，“浏览器链接”功能非常繁重！**

因为每次我们启动项目时，它都会打开一个带有浏览器链接通信的新选项卡。

**只需关闭与项目相关的所有选项卡并只保持一个打开！**

这个免费的即时视觉工作室！这是魔法 ！;-)

> “Browser Link 是自 Visual Studio 2013 以来的一项功能，它在开发环境和一个或多个 Web 浏览器之间创建了一个通信通道。您可以使用 Browser Link 在多个浏览器中一次刷新您的 Web 应用程序，这对于跨浏览器测试很有用。”</p>

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2016-09-04T23:01:09.780

对于那些与默认 VS 设置没有太大偏差的人来说，这是一种快速简便的解决方案。

工具-->导入和导出设置-->是的，保存我当前的设置-->Visual C#

我确信上述解决方案也适用于其他默认设置。就我而言，我的符号加载设置有些问题，但即使我尝试了很多建议的解决方案，我也无法修复它。

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2013-10-16T15:09:00.000

部分视图也存在复杂性，即页面上存在无法立即识别的错误。像 Model.SomeValue 而不是 Model.ThisValue。它可能不会下划线并导致调试问题。这可能是一个真正的痛苦。

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2016-09-19T17:41:21.270

我不小心选择了“在源代码中显示线程”选项。取消选择单步执行代码是正常的。

[![在源代码中显示线程](../Images/fc9a498216af563d44345d598db63e3b.png)](https://i.stack.imgur.com/Te69q.png)

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2018-04-16T19:44:26.950

您的**“我的文档”**文件夹映射到网络共享？

如果是这种情况，即使您的解决方案是本地的而不是网络共享的，IIS Express 的启动也可能需要**几分钟而不是几秒钟。**在 regedit.exe 中，验证它`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User ShellFolders\Personal`是否指向`%USERPROFILE%\My Documents`.

如果不是，请更改它或要求您的网络管理员对您的策略进行例外处理。

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2016-02-12T00:28:26.153

我在使用 VS 2013 时遇到了这个问题。几个月以来，我的测试一直在调试，但突然出现了可怕的*加载符号*消息，我不知道我做了什么导致它。

这里或任何其他互联网页面上的任何建议都没有帮助我。我尝试了至少10次。删除*.suo*文件没有帮助，但在同一位置有两个扩展名为***.testsettings***的文件和一个扩展名为***.vsmdi***的文件。这些文件似乎已经过时，可能是 VS 2010 的遗物。创建它们的团队成员早已不在。

我发现我可以毫无问题地删除所有这三个文件。我发现只需删除一个特定的***.testsettings***文件即可停止*加载符号*消息。我的噩梦结束了。

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2016-05-12T10:40:49.630

我将我的 Visual Studio 设置为使用 C# 作为默认语言的新工作。我还没有意识到我注定要在 VB 中编程。

我忘记了 C# 默认值，因为 VB 似乎工作正常。但是，单步执行代码会花费大量时间。在尝试了一些修复后，我绝望地将默认语言更改为 VB……宾果游戏！

如果你已经走了这么远，那绝对值得一试。

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2016-10-04T11:21:28.467

对我来说，问题是`Avast Antivirus`。我将其卸载并改用 Windows Defender 运行，一切正常。在我的解决方案中，我只在运行 Windows 应用程序时遇到这个问题，无论是 WinForms 还是 WPF。由于某种原因，它在 Web 应用程序上从来没有慢过。

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2017-01-31T23:58:11.207

我的解决方案只是重新加载我的设置（一年前制作的）保存的 GOOD（备份）副本。在将所有内容重置为空白之前值得尝试。我的 VS2010 需要 60 秒才能开始调试，大约需要 60 秒。3 分钟停止调试。我保存了损坏的设置，令我惊讶的是它们超过了 3MB 而不是 260Kb。我加载了好的备份副本，一切都很好:-)

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2017-02-15T15:48:01.157

我最终通过在本地 IIS 配置中进行更改来修复（或至少改进了很多）这个问题：

1.  打开 IIS 配置
2.  点击进入应用程序池
3.  右键单击每个池并打开高级配置
4.  确保**“启用 32 位应用程序”**设置为**TRUE** ，并且**启动模式**设置为**AlwaysRunning**

希望这对某人有所帮助，因为我开始疯狂地尝试解决缓慢的调试问题

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2017-03-31T12:50:50.217

对我来说，我是在托管兼容模式下调试的。在底部的工具 -> 选项 -> 调试 -> 常规中，取消选中“使用托管兼容模式”。调试变得即时进行，过去通常需要一分钟才能完成一行。我怀疑这就是上面 OP 片段中“托管”的含义。

更多信息在这里：[https ://blogs.msdn.microsoft.com/visualstudioalm/2013/10/16/switching-to-managed-compatibility-mode-in-visual-studio-2013/](https://blogs.msdn.microsoft.com/visualstudioalm/2013/10/16/switching-to-managed-compatibility-mode-in-visual-studio-2013/)

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2017-07-21T05:52:10.470

每次我在开发时重新编译到本地主机都需要几分钟。这非常令人沮丧。在尝试了无数次修复后，包括将其全部放在 SSD 上。我找到了真正有效的方法。我创建了一个 ramdisk 并将整个项目放入其中。现在重新编译到本地主机不到十秒。也许不优雅，但它确实有效。

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2017-07-26T10:22:37.380

这可能对某人有帮助，我遇到了同样的问题，发现我的 SD 卡带有驱动器 e:\ 取出 SD 卡后问题得到解决

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2018-08-15T16:02:08.170

我的问题是由于每次我开始调试时都在构建项目。该线程中的所有其他解决方案都略有帮助，但仍然导致我不得不等到项目完成构建。

## 我每次开始调试时避免构建的解决方案：

*   转到 `Solution Explorer` **->**右键单击`Your Solution File` **->**单击`Properties`

*   在`Property Pages` **->**左侧，选择`Configuration` **->**并取消选中`Build`

*   点击`OK`

*   **确保您以管理员**身份打开了 Visual Studio

***   转到`Debug` **->** `Attach to Process`

    *   单击复选框`Show processes from all users` **->**查找并选择调用的过程`w3wp.exe` **->**单击`Attach`->出现警告时，单击`Attach`** 

 **现在您可以在 localhost 中导航到要调试的页面，如果您在文件中设置了断点，则可以立即开始调试，而无需等待项目构建！

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2018-12-28T20:39:00.470

就我而言，

我意识到远程调试运行并消耗大部分资源。我真的不需要将应用程序设置为 64 位，因此在将其强制为 32 位后，远程调试没有运行，执行速度更快。

* * *

## 回答 #47

> 赞同：1
> 
> 时间：2019-01-14T14:18:45.277

在我的情况下，问题是一个外部运行的 exe 文件 - 即：

```
WUDFCompanionHost.exe 
```

以的名义

```
"Windows Driver Foundation - User-mode Driver Companion Framework Host Process". 
```

进程，它已经稳定地占用了 10% 的 CPU。直接杀死它有帮助，并且页面加载了一秒钟。

* * *

## 回答 #48

> 赞同：1
> 
> 时间：2019-03-13T04:16:35.067

另一个可能的原因是对文件系统上存在但已从 Visual Studio 中删除或部分删除的旧项目进行预编译。

我有一个解决方案在构建后需要 3.5 分钟才能加载，我查看了 Temporary ASP.NET Files 中的时间戳，发现 3 分钟的延迟出现在旧项目中的文件上。在 VS 中查看，该项目“不可用”。从 VS 中删除它，从文件系统中删除，现在我们缩短到了 8 秒。

* * *

## 回答 #49

> 赞同：1
> 
> 时间：2019-10-04T18:51:41.773

删除解决方案文件夹中的 .vs 文件夹解决了我在 VS2019 中的缓慢问题。

* * *

## 回答 #50

> 赞同：1
> 
> 时间：2020-02-05T20:03:11.097

正如标题所说，VS 调试很慢。我找不到我的问题，所以在这里发布，可能对某人有帮助。

就我而言，缓慢的调试是在 IIS 中托管的网站上进行的。

*   VS 2019 (16.4.4)
*   VS 2017 (15.9.19)
*   视窗 10 (1909)
*   IIS (10.0.18362.1)
*   边缘 (44.18362.449.0)

网站加载后第一次工作正常，但超过 1 分钟后它变得滞后。请求等待 1-2 分钟（F12 网络选项卡），然后我的断点才能处理它们。它在我所有活动的浏览器中。

解决方案： **调试时不要将 Edge 与 IIS 一起使用。**

为了了解问题我花了大约 4-5 个小时。我在工作流程中使用了 Edge + Chrome。现在我只使用 Chrome（带有单独的用户配置文件）。

帮助我的链接：[https](https://answers.microsoft.com/en-us/windows/forum/all/iis-running-very-slowly-after-windows-10-upgrade/dae433ba-4efe-45ab-aa66-824e6fa92b51) ://answers.microsoft.com/en-us/windows/forum/all/iis-running-very-slowly-after-windows-10-upgrade/dae433ba-4efe-45ab-aa66-824e6fa92b51 “J马科斯”的答案。

* * *

## 回答 #51

> 赞同：1
> 
> 时间：2020-04-24T14:26:20.723

关于时间的另一个最后的解决方案是修复 VS 安装。

*   转到`Tools`=>`Get Tools and Features`
*   找到现有的 VS 安装，然后`repair`在更多按钮下选择。
    *   例如：Visual Studio Enterprise 2019 安装。

* * *

## 回答 #52

> 赞同：-2
> 
> 时间：2016-03-25T22:29:47.467

重启你的电脑

我知道这听起来太简单了，但它是唯一对我有用的东西。****

# html - IE 8 不显示某些图像

> ID：12567987
> 
> 赞同：0
> 
> 时间：2012-09-24T15:18:43.890
> 
> 标签：html, internet-explorer

我有这个[页面](http://ferrajes.karinapp.com/?md=product)，在 IE 9 上，图像加载得很好，但在以前的版本上，FF、Chrome、Opera、Safari 上没有，所有的东西都很好，只是在那些版本的 IE 上和特定的图像上。我检查了 iE8 的开发工具，一切都很好。

谢谢！

# java - JBoss 6.1.0 - JMX-Console 战争未部署

> ID：12567988
> 
> 赞同：0
> 
> 时间：2012-09-24T15:18:45.123
> 
> 标签：java, deployment, jmx, jboss6.x

当我尝试访问 URL： http: [//myhost.com/jmx-console/](http://myhost.com/jmx-console/)

我什么也没看到，网页上没有任何错误。

在 server.log 我看到这条消息出现了，没有别的：

> WARN [org.jboss.web.tomcat.service.ondemand.OnDemandContextProfileManager] (http-0.0.0.0-8080-2) Profile ProfileKey@18c0487[ **domain=default** , server=default, name=jmx-console.war] 已经存在活性

当我看到这个位置时：JBOSS_HOME/server/mydomain/work/jboss.web/localhost 我看到了所有的 web-app 目录，比如 admin_console、invoker、jbossws、myapp 但我没有看到 jmx-console。它应该在那里。

战争本身存在于其原始位置 JBOSS_HOME/common/deploy/jmx-console.war

我看到的一个问题是 WARN 消息指的是**domain=default**，尽管我的 JBoss 服务器域不同（mydomain）。如果那是问题区域，我应该在哪里纠正这个问题。

# ios - Xcode 4.4.1 和 Xcode 4.5 并排

> ID：12567989
> 
> 赞同：6
> 
> 时间：2012-09-24T15:19:02.860
> 
> 标签：ios, xcode

有人在同一台机器上同时拥有这两个版本的 Xcode 吗？

我安装了 Xcode 4.4.1，我想更新到最新版本 (4.5)，这样我就可以使用 iOS 6 SDK，但我需要为某些客户端保留 4.4.1。

我可以制作此版本的简单副本并在升级后继续安装吗？因为我知道有些人试图做到这一点并失败了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T15:29:39.220

1.  完成时间机器备份。
2.  将 Xcode 升级到 4.5。
3.  从 Time Machine 备份中恢复 Xcode 4.4。（您可能需要返回几个小时，具体取决于 Xcode 4.5 下载所需的时间。检查文件大小。）保留两者。
4.  将 Xcode (Original) 重命名为 Xcode 4.4.1。

完成此操作后，只需运行适当版本的 Xcode。Xcode 4.5 将更新一些系统组件，但这些更新不会阻止 Xcode 4.4.1 运行。

如果您使用命令行工具，您应该使用`xcode-select`在版本之间切换或使用环境变量`DEVELOPER_DIR`来固定到特定版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:27:12.740

由于 Xcode 在 App Store 上可用，它只是一个普通的应用程序。如果您安装新版本，它不会安装任何`/Developer`可能被覆盖的东西。所有必需的文件都在应用程序包中（首选项、文档除外——它们将由多个 Xcode 版本共享）

如果你想确定，我推荐以下。备份旧版本（到外部硬盘），安装新版本并用不同的名称恢复旧版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T02:48:50.727

有些人失败的原因是当他们从 Mac App Store 下载 Xcode 4.5 时，它覆盖了他们现有的 Xcode 4.4.1。如果 Mac App Store 在任何地方看到现有版本的 Xcode，它就会执行此操作。有两种可能的解决方案：

*   不要使用 Mac App Store。任何版本的 Xcode 总是可以从 Apple 开发者网站以普通下载的形式获得。

*   使用 Mac App Store，但在此之前，请压缩现有的 Xcode 副本。这样，压缩副本将在下载过程中保留。稍后，您可以将其解压缩。

请注意，两个不同版本的 Xcode 不能存在于同一个文件夹中（例如顶级应用程序），因为它们具有相同的名称。简单的解决方案是将其中一个放在子文件夹中。

# unit-testing - 在所有测试开始之前，我们是否有一个可以运行一次的 @beforeTests 方法

> ID：12567991
> 
> 赞同：1
> 
> 时间：2012-09-24T15:19:07.117
> 
> 标签：unit-testing, maven, junit, junit4, junit3

在 Junit 中，我知道有一个 @beforeclass ， @before 注释，我们是否有一个注释或设计，允许我们编写一个在整个测试过程之前只运行一次的方法？

我们有一个脚本，它为测试设置了一些数据库数据（配置、静态、查找表等......），但是在每个单独的测试之前运行它太昂贵了，我们希望它设置它，之前只设置一次开始运行任何测试。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:11:50.267

既然您用 标记了您的问题`maven`，我将采用这种方式：您可以使用该`pre-integration-test`阶段来运行这个一次性昂贵的脚本（对称地，您在 中进行清理`post-integration-test`）。

您可以为此使用 exec-maven-plugin：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>exec-maven-plugin</artifactId>
  <version>...</version>
  <executions>
    <execution>
      <id>some-execution</id>
      <phase>pre-integration-test</phase>
      <goals>
        <goal>exec</goal>
      </goals>
    </execution>
  </executions>
  <configuration>
    <executable><!-- runnable command or file name here --></executable>
  </configuration>
</plugin> 
```

JUnit 没有这种注解，因为它不对环境做任何假设：它的目标是以隔离的方式一次测试一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:49:17.407

[DBUnit](http://www.dbunit.org/howto.html)提供了您正在寻找的东西。它只是一个 JUnit 扩展。

*   它具有诸如 Clean_Insert 之类的设置操作选项 - 这意味着将清理数据库并自动插入所需的数据。和许多其他的，如刷新、更新、插入等
*   事件更简单 - 为了使用 Dbunit，您不需要扩展 DBTestCase 类。您可以覆盖标准[JUnit setUp()](http://www.dbunit.org/howto.html#noextend)方法并在数据库上执行所需的操作。
*   数据库配置操作
*   数据集上有很多选项 - 平面、xml、数据库、流式传输

# ibatis - IBATIS - 从 Spring 向 Oracle 插入动态 HashMap

> ID：12567992
> 
> 赞同：1
> 
> 时间：2012-09-24T15:19:11.157
> 
> 标签：ibatis

关于这个问题的一些背景。从前端，我有两个带有多个属性的选择框。一个盒子是用于批准的项目，另一个是用于忽略的项目。我将它们放入 Map 中，键是公司的 UID，值是“Y”或“N”，具体取决于 UID 所在的框。[使用 ibatis 将 HashMap 值插入表](https://stackoverflow.com/questions/10847761/inserting-hashmap-values-to-a-table-using-ibatis)提供了一些帮助，但答案涉及手动放置条目，因为我正在动态创建地图，所以不确定键是什么。下面是Java的代码：

```
// Set up the map object for the back end
        Map<Integer, String> posMap = new HashMap<Integer, String>();
        // Get the approved mailers
        String[] mailerList = request.getParameterValues("approved");                   
        if (mailerList != null && mailerList.length > 0)
        {
            for(String mailer : mailerList)
            {
                posMap.put(Integer.parseInt(mailer), "Y");
            }
        }
        // reset the mailerList
        mailerList = null;
        // get the ignored mailers
        mailerList = request.getParameterValues("ignored");
        if (mailerList != null && mailerList.length > 0)
        {
            for(String mailer : mailerList)
            {
                posSampleMap.put(Integer.parseInt(mailer), "N");
            }
        }
        // only update POS if the map is not empty
        if(!posMap.isEmpty())
        {               
            updateMapper.updatePOSSampling(posMap);
        } 
```

通常，我会在 mapper.xml 文件中有这样的内容：

```
<update id="updatePOSSampling" parameterType="hashmap">
   UPDATE <table_name>
   SET sampling_enabled = ${myMapValue}
   WHERE mailer_name = ${myMapKey}
</update> 
```

在我提供的链接中，他们手动输入键和值，因此，示例 IBATIS 可以引用键。由于我不确定我的密钥是什么，因此生成此查询的最佳方法是什么？我有一个发送二维数组的临时解决方法，但我觉得使用 Map DO 会是更好的方法。提前感谢您的任何帮助。

# asp.net-mvc - ASP.NET MVC 中的唯一访问者计数

> ID：12567993
> 
> 赞同：2
> 
> 时间：2012-09-24T15:19:12.607
> 
> 标签：asp.net-mvc, database-design, architecture

我想做类似于stackoverflow的访问者跟踪..

通过阅读大量帖子，我已经弄清楚了一些细节：

*   每 15 分钟仅计算 1 个 IP 命中（如果匿名）
*   仅计算 1 个唯一用户登录（每天？）

现在留下了真正实施的问题..

我是否应该将这两个因素记录到表中（并增加计数）

| 知识产权 | 时间戳 | 网页网址 |

或者在之后进行计数（例如使用 IIS 日志文件 - 不包括用户，对吗？

我知道外面有一些类似的帖子，但在我看来，NONE 确实有一个很好的解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:36:44.730

I don't think you can discuss business logic of yours. Its up to you how you want it to be. I'd say, define what you call "unique user" and build your algorithm around it.

With regards to your question here, you will get a lot of opinions, but there's no right answer to your question.

*My opinion*: I would go with the table, combination of registered users and IP tracking for anonymous ones, so option one from your list.

For what its worth - that's is my take on it. Thanks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:06:04.590

我会建议一张桌子。添加用户列以跟踪其是登录用户还是匿名用户。除非您想保留历史记录，否则我建议您在一天结束时清理表格以保持快速搜索。

# django - Django - 如何在用户创建时创建额外的对象

> ID：12567995
> 
> 赞同：-1
> 
> 时间：2012-09-24T15:19:19.160
> 
> 标签：django, django-models

> **可能重复：**
> [创建扩展用户配置文件](https://stackoverflow.com/questions/1910359/creating-a-extended-user-profile)

这是我的用户模型部分：

```
 27 class Profile(models.Model):
 28     owner = models.OneToOneField(User)
 29     title = models.CharField(max_length=20,blank=True)
 30     slogan = models.TextField(blank=True)
 31     twitter = models.URLField(blank=True)
 32     web_site = models.URLField(blank=True)
 33     email = models.EmailField(blank=True)
 34 
 35     def create_user(sender,instance,created,**kwargs):
 36         if created:
 37             Profile.objects.create(owner=instance)
 38     post_save.connect(create_user, sender=User)
 39     
 40     def __unicode__(self):
 41         return self.owner.username 
```

在这个情况下 ; 当我创建用户时；然后我必须为刚刚创建的用户创建一个配置文件。

我想自动做到这一点。用户 ; 创建时必须创建自己的个人资料页面。

谢谢你。

编辑：所有字段都有空白 = True ；所以只需创建一个属于用户的空白配置文件对象就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:23:18.173

这在[文档](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)中明确介绍。你使用信号。他们甚至给出了一个完整的例子：

```
# in models.py

from django.contrib.auth.models import User
from django.db.models.signals import post_save

# definition of UserProfile from above
# ...

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

# ruby-on-rails - rbenv：在同一台机器上并排安装 32 位和 64 位版本的 ruby

> ID：12567997
> 
> 赞同：3
> 
> 时间：2012-09-24T15:19:26.480
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rbenv

出于某些原因（Oracle，我在看你）我需要能够使用 32 位和 64 位版本的 ruby​​。我可以将 1.9.3 的 32 位和 64 位版本与 rbenv 一起安装吗？当我运行 rbenv 版本时，如何区分它们？

现在我使用的是 1.9.2 的 32 位版本和 1.9.3 的 64 位版本。我更希望拥有 64 位和 32 位版本的 1.9.3。

更新：

现在我只是选择使用不同的补丁。一定有更好的方法...

更新 2：

为了澄清我的情况，我使用的是在 Mac OSX Lion 上运行的机器。

[此链接描述了我的主要问题，Lion 没有 64 位即时客户端](https://forums.oracle.com/forums/thread.jspa?threadID=2318019)

[此链接显示了我发现的唯一解决方案](http://code.duffy.jp/how-to-use-oracle-with-ruby-on-lion-and-ruby-1-8-7/)

更新 3：

这不再是一个问题，因为 oracle 发布[了适用于 Lion 和 Mountian Lion 的 64 位即时客户端](http://www.oracle.com/technetwork/topics/intel-macsoft-096467.html)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:13:24.267

您可以在 rbenv 中安装任意数量的 Ruby 版本。只要您在`${RBENV_ROOT}/versions/`.

默认情况下，构建在 OS X 上的 Ruby 似乎是 64 位的。如果您知道如何配置 Ruby 的 32 位构建，您可以安装一个`PREFIX="$(rbenv root)/versions/1.9.3-p194-32"`，例如。然后，您可以像使用其他任何版本一样使用该版本：

```
RBENV_VERSION=1.9.3-p194-32 ruby -v 
```

在这里，我使用“-32”前缀来区分版本。

# javascript - 用户单击“完成”按钮后 ASP Classic 删除缓存文件

> ID：12567998
> 
> 赞同：1
> 
> 时间：2012-09-24T15:19:26.337
> 
> 标签：javascript, asp-classic

大家，早安，

我正在开发一个需要升级和重构的遗留 ASP Classic 应用程序。需要做出的最大改进之一是通过缓存数据库中的结果来加速应用程序。通过将它们缓存到 .dat 文件，我已经能够成功地做到这一点。这个应用程序遵循一个特定的路径，所以我在完成后一直在删除未使用的缓存文件。但是，在应用程序 (PV.asp) 的最终 .asp 页面上，文件在不应该被删除的时候被删除了。

我的意图是这样

```
 <input type="button" value="Done"  style="width: 56px; height: 40px" onclick="finish()"    /> 
```

^ 这是“完成”按钮的代码，它调用了 finish() 函数。如下：

```
 function finish() {
        var size = "<%response.write(size) %>";
        if (size == "0") {
        var done = confirm("All Items mod, would you like to save?");
        if (done == true)
        {
            if (window.XMLHttpRequest)
            {
                xmlhttp = new XMLHttpRequest();
            }
            else
            {
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            var concode = "<%=Replace(concode, "\", "\\" )%>";
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {
                        document.getElementById('concode').value = concode;
                        document.forms["confirm"].submit();
                    }
            }
            <%if NOT rsTrxTy.EOF then
            if rsTrxTy.fields("TYPE").value = "TO" then%>
            ~Stuff happens here~
            <%end if 

            if rsTrxTy.fields("TYPE").value = "TI" then%>
            ~Stuff happens here~
            <%end if
            end if

            if NOT rsOrdrs.EOF then%>
             ~Stuff happens here~
            <%end if %>
            <%
            dim fso
            Set fso = Server.CreateObject("Scripting.FileSystemObject")
            fso.DeleteFile "C:\M\cache\rstrxis-" & Session.SessionID & ".dat"
            fso.DeleteFile "C:\M\cache\rstrxos-" & Session.SessionID & ".dat"
            fso.DeleteFile "C:\M\cache\rstrxty-" & Session.SessionID & ".dat"
            fso.DeleteFile "C:\M\cache\rsords-" & Session.SessionID & ".dat"  %>
        }
    }
    else {
            alert("All items have not been mod.");
        }
    } 
```

当用户单击“完成”按钮时，对项目所做的更改将提交到数据库。我的意图是在执行此操作时，将删除缓存的文件。 **但是，即使用户没有单击“完成”按钮，DeleteFile 命令也会运行。它在页面完成加载后运行。这会导致问题，因为页面将尝试从加载 PV.asp 时删除的缓存文件加载。** 由于此应用程序几乎可以在不关闭窗口的情况下持续使用，因此会话 ID 将保持不变，这样就不会删除缓存的文件（因为当应用程序重新启动时，它将尝试加载已经存在的文件）缓存）。

我的问题是，为什么文件应该包含在仅在用户单击完成时才执行的 javascript 函数中时被删除？我在 ASP/Javascript 方面没有经验，因为这个项目是强加给我的，所以如果这是一个简单的问题，我很抱歉，但老实说我很难过。

注意—— **迁移到 ASP.Net 是不可能的。请不要建议这个。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T15:33:20.433

这不是 ASP 的工作方式。ASP 代码段（之间的内容`<% ... %>`）仅在页面首次加载时计算一次。

例如，如果您这样做：

```
<script type="text/javascript">
function finish() {
<%              
dim fso
Set fso = Server.CreateObject("Scripting.FileSystemObject")                  
fso.DeleteFile "C:\M\cache\rstrxis-" & Session.SessionID & ".dat"               
fso.DeleteFile "C:\M\cache\rstrxos-" & Session.SessionID & ".dat"              
fso.DeleteFile "C:\M\cache\rstrxty-" & Session.SessionID & ".dat"              
fso.DeleteFile "C:\M\cache\rsords-" & Session.SessionID & ".dat"  
%>
}
</script> 
```

在*页面加载*`fso.DeleteFile`时调用函数调用，而不是在触发 JavaScript 函数时调用。

 *为什么？当服务器收到对 ASP 页面的请求时……它首先通过并处理`<% %>`与真实 HTML 之间的所有动态代码段，然后返回给用户一个他们可以加载的页面。注意：浏览器不知道如何处理`<% %>`标签！服务器是唯一可以做到这一点的人。

这有意义吗？

您有几个选项可以执行您实际尝试在此处执行的操作，但我会向新的 ASP 页面执行 Ajax 请求，它所做的只是调用您需要的 fso.DeleteFile 命令。

这是一个例子： http: [//www.degraeve.com/reference/simple-ajax-example.php](http://www.degraeve.com/reference/simple-ajax-example.php)

其他选项是使用 get/post 到同一页面，并带有将触发 DeleteFile 的参数。你必须重新设计一点才能使用它。我推荐ajax解决方案。*