# StackOverflow 问答 13899000-13899999

# dart - 如何在实例化 dart Web 组件时通过属性传递常量或文字数据？

> ID：13899000
> 
> 赞同：1
> 
> 时间：2012-12-16T05:51:33.243
> 
> 标签：dart, dart-webui

定义：

```
<element name="x-card" constructor="Card" extends="div">
  <template>
    <div>{{titleText}}</div>
  </template>
  <script type="application/dart">
    import 'package:web_ui/web_ui.dart';

    class Card extends WebComponent {
      String titleText = '';
    }
  </script>
</element> 
```

实例化：

```
<x-card data-value="titleText:something"></x-card> 
```

或者

```
<x-card titleText="something"></x-card> 
```

没有任何工作。这里`something`不是变量。它是一个字符串文字。我该如何通过它？另外，如果我想实例化数组`x-cards`怎么办？假设我有一个名为`cardTitleArray`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T06:24:40.403

@financeCoding，不推荐使用数据值。他们说使用`attribute=value`而不是`data-value="attribute:value"`.

没关系，我的问题解决了。以下作品。

```
<x-card title-text="{{'Aint it supercool'}}"></x-card> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T06:11:12.630

查看确实引用“数据值”的代码

[http://www.dartlang.org/articles/dart-web-components/#component-instantiation](http://www.dartlang.org/articles/dart-web-components/#component-instantiation)

[https://github.com/dart-lang/web-ui/blob/master/example/explainer/countcomponent.html](https://github.com/dart-lang/web-ui/blob/master/example/explainer/countcomponent.html)

实际代码似乎没有使用它。您可以使用其他方式还是现在或在线发布代码？也许在 ':' 之后需要一个空格？

# objective-c - 如何将针对控制台格式化的文本发送到 Objective-C 中的文本文件？

> ID：13899003
> 
> 赞同：0
> 
> 时间：2012-12-16T05:51:54.553
> 
> 标签：objective-c

我正在尝试将我写入控制台的内容镜像到文本文件。这是我编写的代码，但它没有创建 txt 文件。任何帮助是极大的赞赏：

```
-(NSString *) display
{
    NSLog (@" \n ");
    NSLog (@"|========== Contents of: %@ =============|", listName);
    NSLog (@"|__________________________________________________|");
    NSLog (@"|    | Song Title |    |         | Artist |        |");
    NSLog (@"|    ==============    |         ==========        |");
    NSLog (@"|~~~~~~~~~~~~~~~~~~~~~~|~~~~~~~~~~~~~~~~~~~~~~~~~~~|");

    for ( SongRecord *theRecord in list )
        NSLog (@"|  %-20s|  %-24s |", [theRecord.songname UTF8String],
           [theRecord.artist UTF8String]);

    NSLog (@"====================================================");

    return listing;
}

-(void) saveToFile
{
     NSString* fileName = @"Mysongs.txt";
     NSString* fullPath = [path stringByAppendingPathComponent:fileName];

     [[self display] writeToFile:fullPath atomically:YES encoding:NSUnicodeStringEncoding    error:nil];

     NSLog (@"The file has been written");

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T06:03:20.537

修改`-display`，以便它构建一个字符串，您可以实际返回以在`-saveToFile`. 同时，您可以根据需要将其发送到控制台：

```
- (NSString *)display
{
    NSMutableString *listing = [NSMutableString string];

    [listing appendString:@"\n"];
    [listing appendFormat:@"|========== Contents of: %@ =============|\n", listName];
    [listing appendString:@"|__________________________________________________|\n"];
    [listing appendString:@"|    | Song Title |    |         | Artist |        |\n"];
    [listing appendString:@"|    ==============    |         ==========        |\n"];
    [listing appendString:@"|~~~~~~~~~~~~~~~~~~~~~~|~~~~~~~~~~~~~~~~~~~~~~~~~~~|\n"];

    for (SongRecord *theRecord in list)
    {
        [listing appendFormat:@"|  %-20s|  %-24s |\n", [theRecord.songname UTF8String], [theRecord.artist UTF8String]];
    }

    [listing appendString:@"====================================================\n"];

    NSLog(@"%@", listing);

    // Do this to return an immutable string, as your method signature says it will.
    return [NSString stringWithString:listing];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:50:30.773

感谢所有的帮助。它最终成为我如何定义我的路径的问题。我改为 NSHomeDirectory ，它就像一个魅力。再次感谢，尤其是@trudyscousin。

# tree - 为更高维度的数据设计层次树

> ID：13899004
> 
> 赞同：0
> 
> 时间：2012-12-16T05:52:19.747
> 
> 标签：tree, hierarchy, dimensions

给定一维随机数集，我们只需遍历该集，然后将数据下推到树中。在一个维度上，这非常简单。我们可以简单地比较数据的值，并决定数据将沿着树传播到哪里。

然而，对于更高的维度，距离开始变得模糊，并且更难以决定哪些数据应该在树的哪个位置。

事实上，如果我们要设计一个包含一组高维向量的层次树（例如，128 维 SIFT 特征），我们如何决定每个 n 维向量中的哪个应该去哪个子树等等？我们做的一些事情是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:01:52.553

# 随机树

随机[树](http://www.stat.berkeley.edu/users/breiman/RandomForests/cc_home.htm)是用于分类或聚类的常用技术。

以下是您决定如何拆分树的每个节点的方法：

*   从 128 个 SIFT 维度中选择一个随机的 k（小的东西，比如 5）。
*   确定这 k 个维度中的哪个维度提供了数据的最佳拆分。

因此，每个节点都需要存储：

1.  使用的维度
2.  应用于该维度的决策阈值

叶子将存储：

*   类别预测，或有关最终到达该叶节点的数据点的一些统计信息。

# linux - 如何在 Linux 服务器上查找和替换 HTML、htm、PHP 和 txt 文件中的文本？

> ID：13899006
> 
> 赞同：0
> 
> 时间：2012-12-16T05:52:36.007
> 
> 标签：linux, sed

我想知道如何在托管服务提供商的 Linux 服务器上查找和替换所有 HTML、htm、PHP 和 txt 扩展文件中的文本。我可以做 SSH。

**要找到的文字**：`http://mydomain.example.com`

**要替换的文本**：`http://otherdomain.example.com/MyDomain`

请给我确切的命令，如果它可以在更换前提示确认，那将很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T06:37:45.530

这是一种使用方法`sed`和一个`for`循环。在覆盖之前使用`-i`标志 with`mv`提示：

```
for i in *.html *.htm *.php *.txt; do sed 's%\(http://www\.\)\(MyDomain\)\(\.com\)%\1OtherDomain\3/\2%g' "$i" > tmp && mv -i tmp "$i"; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T06:36:24.107

```
sed -i 's/http:\/\/www.mydomain.com/http:\/\/www.otherdomain.com\/MyDomain/gi' *.txt *.html *.htm *.php 
```

# excel - 收到 VBScript 错误

> ID：13899009
> 
> 赞同：0
> 
> 时间：2012-12-16T05:53:33.663
> 
> 标签：excel, vbscript, vba

以下 VBScript 代码在该行给我一个错误“

```
 .Range(.Cells(lRow, lCol), .Cells(lRow, lCol + 3)).Delete Shift:=xlToLeft 
```

***正确的***

```
 .Range(.Cells(lRow, lCol), .Cells(lRow, lCol + 3)).Delete(-4159) 
```

错误是：“预期语句结束”。

***代码***

```
 Sub DataShiftFromRightToLeft(Ob6)

   Dim lCol,COL_FIRST,startCol
   Dim NUM_TASKS:NUM_TASKS=36

COL_FIRST = objExcel1.Application.WorksheetFunction.Match("Parent Business Process ID", ob6.Rows(1), 0)
COL_FIRST=COL_FIRST+1

'Set wst = Ob6.ActiveSheet

With ob6.ActiveSheet

    For lRow = 2 To .UsedRange.Rows.Count
        lTask = 1
        Do While lTask <= NUM_TASKS
            lCol = COL_FIRST + (lTask - 1) * 4
            If Len(.Cells(lRow, lCol).Value) = 0 And _
               Len(.Cells(lRow, lCol + 1).Value) = 0 And _
               Len(.Cells(lRow, lCol + 2).Value) = 0 And _
               Len(.Cells(lRow, lCol + 3).Value) = 0 Then
                ' make sure there is something to the right to shift over
                If .Cells(lRow, lCol).End(xlToRight).Column < .Columns.Count Then
                    ' delete the empty cells and shift everything left``
                    .Range(.Cells(lRow, lCol), .Cells(lRow, lCol + 3)).Delete Shift:=xlToLeft
                Else
                    ' force the loop to the next row
                    lTask = NUM_TASKS + 1
                End If
            Else
                lTask = lTask + 1
            End If
        Loop
    Next lRow
End With

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:09:49.330

您`Shift:=xlToLeft`正在尝试使用命名参数。这在 VBScript 中是不可能的。您必须定义 xlToLeft (Const) 并确保您`xlToLeft`在正确的位置传递（使用 VBA 文档检查 .Delete 参数的数量和顺序）。

**附言**

如果您在 Google 上搜索“vbscript delete xltoleft”，[那么第一次点击](http://social.technet.microsoft.com/Forums/nl-NL/ITCG/thread/1ec5de28-4c87-4768-aa2d-52180d3cb091)就会对您有所帮助。

# javascript - 如何为我的应用程序创建用户首次屏幕指南

> ID：13899014
> 
> 赞同：6
> 
> 时间：2012-12-16T05:54:32.803
> 
> 标签：javascript, user-interface

我需要为我正在构建的应用程序创建一个简短的首次用户指南，但我不知道要搜索什么。

我需要的是一个对话指南，就像 Facebook 在创建新页面时所做的那样。对于那些不知道的人，当您创建一个新的 fb 页面时，Facebook 会通过小对话框引导您执行页面上的关键操作，例如分享、发布等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T06:49:44.610

我相信您正在寻找的是一个功能游览库。搜索该术语，您可能会找到您要查找的内容。[Joyride](http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin)很受欢迎。[Crumble](http://tommoor.github.com/crumble/)是另一种选择，但我不认为它是可定制的。这两个都是 jQuery 插件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-04T04:35:23.003

这是我知道的用于网站导览的 jquery 插件列表 1\. [http://usablica.github.io/intro.js/](http://usablica.github.io/intro.js/) 2\. [http://alvaroveliz.github.io/aSimpleTour/](http://alvaroveliz.github.io/aSimpleTour/) 3\. [http://clu3\. github.io/bootstro.js/#](http://clu3.github.io/bootstro.js/#) 4\. [http://tracelytics.github.io/pageguide/](http://tracelytics.github.io/pageguide/) 5\. [http://tympanus.net/Development/WebsiteTour/](http://tympanus.net/Development/WebsiteTour/) 6\. [http://ryanfunduk.com/jquery-tourbus /](http://ryanfunduk.com/jquery-tourbus/) 7\. [http://eragonj.github.io/Trip.js/](http://eragonj.github.io/Trip.js/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T06:04:36.137

基本上，您只想检查是否存在某些 cookie。

如果 cookie 不存在，则显示指南并设置 cookie。如果 cookie 确实存在，则什么也不做（保持指南隐藏）。

# android - android 9patched 图像无法拉伸？

> ID：13899015
> 
> 赞同：0
> 
> 时间：2012-12-16T05:55:09.520
> 
> 标签：android, bitmap

我在自定义组件的绘制上动态添加位图。

现在谈到这一行：

```
 line = Bitmap.createBitmap(line, 0, 0, line.getWidth(), 1); 
```

我想将位图拉伸到组件的宽度。我在这里使用`line.getWidth()`，但我希望有一种说法`this.getWidth`。不幸的是，它在构造函数中，视图仍然不知道它的宽度。

这是自定义组件的代码：

```
package com.adylitica.components;

import com.adylitica.activity.R;

import android.content.Context;
import android.content.SharedPreferences;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.EditText;
import android.widget.TextView;

/**
 * Defines a custom EditText View that draws lines between each line of text that is displayed.
 */
public class EditTextNotes extends EditText {

private Rect mRect;
private Bitmap line;
public static int nbLines = 0;
private SharedPreferences settings;

public EditTextNotes(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

    line = BitmapFactory.decodeResource(context.getResources(), R.drawable.line_thin_new);
    line = Bitmap.createBitmap(line, 0, 0, line.getWidth(), 1);

    mRect = new Rect();
}

public EditTextNotes(Context context, AttributeSet attrs) {
    super(context, attrs);

    line = BitmapFactory.decodeResource(context.getResources(), R.drawable.line_thin_new);
    line = Bitmap.createBitmap(line, 0, 0, line.getWidth(), 1);

    mRect = new Rect();

}

public EditTextNotes(Context context) {
    super(context);

    line = BitmapFactory.decodeResource(context.getResources(), R.drawable.line_thin_new);
    line = Bitmap.createBitmap(line, 0, 0, line.getWidth(), 1);

    mRect = new Rect();
}

@Override
protected void onDraw(Canvas canvas) {

    int count = getLineCount();

    Rect r = mRect;

    int baseline = 0;
    int addSize = 0;
    canvas.drawBitmap(line, 0, baseline, null);

    for (int i = 0; i < count; i++) {
        baseline = getLineBounds(i, r) + addSize;
        canvas.drawBitmap(line, 0, baseline, null);
        nbLines++;
    }

    super.onDraw(canvas);
} 
```

}

PS：位图是9patched。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:04:37.657

您不应该在构造函数中进行测量。在自定义视图中，最好覆盖`onSizeChanged()`. 当您的视图被添加到具有当前宽度和高度的视图层次结构中时，它将被调用，如果您的视图被调整大小，则再次使用当前值和旧值。有关详细信息，请参阅[[处理布局事件]](http://developer.android.com/training/custom-views/custom-drawing.html#layouteevent)。

# actionscript-3 - VideoDisplay 未在 iPad AIR 应用程序的资产中播放视频

> ID：13899017
> 
> 赞同：0
> 
> 时间：2012-12-16T05:55:51.150
> 
> 标签：actionscript-3, flash, apache-flex, air, mxml

我无法`VideoDisplay`在 AIR 中播放 iPad 应用程序标签中的任何视频（.flv 或 .mp4）。

我正在使用`spark:VideoDisplay`. 如果我提供完整路径，我可以播放视频。但我希望将此应用程序部署在 iPad 上。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:51:34.850

如果您的视频嵌入了您的应用程序。请按照此操作，例如您的视频位于 assets/videos/ipad.flv

您需要指出应用程序目录（部署位置），例如

```
var videoURL:String = File.applicationDirectory.resolvePath("assets/videos/ipad.flv").nativePath; 
```

请注意，nativePath 可与 iPad 应用程序一起使用以指出资产（如果不工作，请尝试使用 url 有时它可以工作）。

# asp.net-mvc - 获取另一个控制器动作的 ActionResult？

> ID：13899019
> 
> 赞同：3
> 
> 时间：2012-12-16T05:56:27.407
> 
> 标签：asp.net-mvc, caching, view, controller, httpcontext

我想将项目存储在应用程序缓存中，以便从主布局视图中延迟加载。

我还希望能够使缓存无效，所以如果它无效，下次请求项目集合时，它会重新加载到该缓存位置。

这是我已经实现的：

在控制器中：

```
protected IEnumerable<Slide> CachedSlides
{
  get { return HttpContext.Application[SlidesCacheKey] as IEnumerable<Slide>; }
  set { HttpContext.Application[SlidesCacheKey] = value; }
}

private void ClearSlides()
{
  CachedSlides = null;
}

[AllowAnonymous]
public IEnumerable<Slider> GetSlides()
{
  if (CachedSlides == null)
    CachedSlides = Context.Slides.OrderBy(p => p.SortOrder).ToArray();
  return CachedSlides;
} 
```

我是视图（最好在“a”视图中说，我希望能够从每个视图中加载它）：

```
@{
  var sliderController = new LevEl.Controllers.Admin.SliderController().  
  var sliderModel = sliderController.GetSlides();
} 
```

它引发异常，因为当我在视图中初始化控制器时，该`HttpContext`属性返回 null （这导致 a `NullReferenceException`）。

任何其他实现这一点的方法也将受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T13:16:36.360

首先，您可能需要考虑使用 Cache 而不是 Application 字典，特别是因为您的缓存数据将在某个时候过期。看看[这个问题](https://stackoverflow.com/questions/326675/httpruntime-cache-vs-application)

另外，请考虑控制器方法是否仅由视图使用，因为 MVC 将公开控制器中的所有公共方法。如果您不希望使用 URL 自由访问此方法，请设置`[NonAction]` [属性](https://stackoverflow.com/questions/6385599/asp-net-mvc-nonaction-meaning)。

关于您的错误，修复它的一种快速方法是通过`System.Web.HttpContext.Current`控制器的 CachedSlides 属性的实现来访问 Application 对象。

您还可以在视图中创建 SliderController 的新实例时设置 ControllerContext。这样，控制器中的 HttpContext 在访问 CachedSlides 属性时不会返回 null：

```
@{
    var sliderController = new LevEl.Controllers.Admin.SliderController();
    sliderController.ControllerContext = new ControllerContext(ViewContext.RequestContext, sliderController);
    var sliderModel = sliderController.GetSlides();
} 
```

如果拥有一个可以处理所有这些视图的基本控制器类对您来说是有意义的，那么获取控制器会更干净。您只需要将`ViewContext.Controller`实例转换为该基本控制器类：

```
var sliderController = ViewContext.Controller as BaseSlideController;
var sliderModel = sliderController.GetSlides(); 
```

但是，所有这些方法都需要您将那段代码添加到每个视图中。您可以考虑为所有需要访问 Slide 集合的视图创建一个基类：

```
public abstract class SlidesEnabledView<T> : WebViewPage<T>
{
    private IEnumerable<Slide> _slides;
    protected IEnumerable<Slide> Slides
    {
        get
        {
            if(_slides == null)
            {
                var sliderController = ViewContext.Controller as BaseSlideController;
                _slides = sliderController.GetSlides();
            }
            return _slides;
        }
    }
} 
```

然后您将@inherits 标签添加到您的视图中，因此它们继承自我们刚刚创建的基类（使用@inherits 时，您不能同时使用@model，因此在@inherits 中您将绑定通用基类视图类型是具体的模型类型）。这将允许您使用在基本`SlidesEnabledView`视图类中定义的属性。假设 SlidesEnabledView 的命名空间是 Level.ViewClasses.Admin，这看起来像：

```
@inherits Level.ViewClasses.Admin.SlidesEnabledView<SomeViewModelClass> 

Number of Slides: @Slides.Count() 
```

最后，如果您通过您的站点使用 DI 并且您已经配置了一个 DependencyResolver，那么您可以考虑将获取幻灯片的逻辑移动到它自己的类和接口中，例如`ISlidesProvider`and `CachedSlideProvider`。然后，您可以在抽象视图类中使用属​​性注入来获取将在 Slides 属性中使用的 ISlidesProvider 实例：

```
public interface ISlidesProvider
{ 
    IEnumerable<Slide> GetSlides();
}

public class CachedSlideProvider : ISlidesProvider
{
    //you will need a constructor that takes the "Context" object, which will be injected into this class

    public IEnumerable<Slide> GetSlides()
    {
        if (CachedSlides == null)
            CachedSlides = Context.Slides.OrderBy(p => p.SortOrder).ToArray();
        return CachedSlides;
    }

    private IEnumerable<Slide> CachedSlides
    {
        get { return System.Web.HttpRuntime.Cache[SlidesCacheKey] as IEnumerable<Slide>; }
        set { System.Web.HttpRuntime.Cache[SlidesCacheKey] = value; }
    }
}

public abstract class SlidesEnabledView<T> : WebViewPage<T>
{
    private IEnumerable<Slide> _slides;
    protected IEnumerable<Slide> Slides
    {
        get
        {
            if(_slides == null)
            {
                _slides = this.SlidesProvider.GetSlides();
            }
            return _slides;
        }
    }

    //This property will be set by your DI container
    //You have configured ISlidesProvider to be resolved as CachedSlidesProvider in the DI container
    //You have also implemented and registered an MVC DependencyResolver that uses your DI container
    //For example, using Microsoft Unity you could set this attribute
    [Dependency]
    public ISlidesProvider SlidesProvider { get; set; }        
} 
```

当您使用无参数构造函数创建控制器实例时，您可能没有在您的站点上使用 DI。因此，仅用于解决此特定问题，此 DI 选项可能有点矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:58:55.330

您可以在 a 中定义您的`GetSlides`方法`BaseController`：

```
public class BaseController : Controller
{
    protected IEnumerable<Slide> CachedSlides
    {
        get { return HttpContext.Application[SlidesCacheKey] as IEnumerable<Slide>; }
        set { HttpContext.Application[SlidesCacheKey] = value; }
    }

    private void ClearSlides()
    {
        CachedSlides = null;
    }

    public IEnumerable<Slide> GetSlides()
    {
        if (CachedSlides == null)
            CachedSlides = Context.Slides.OrderBy(p => p.SortOrder).ToArray();
        return CachedSlides;
    }
} 
```

所以你所有的控制器都必须继承自`BaseController`.

在视图中，您可以这样做：

```
@{
    var baseController = (BaseController)ViewContext.Controller;
    var slides = baseController.GetSlides();
} 
```

# openerp - 如何在 openERP 7.0 中显示字符字段？

> ID：13899026
> 
> 赞同：0
> 
> 时间：2012-12-16T05:57:45.470
> 
> 标签：openerp

> 如何在 openERP 7.0 中显示字符字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:55:13.390

```
> For Class:
> 
> '<field_name>': fields.char('Text', size=Char Size, translate=True,
> required=True)
> 
> For View:
> 
> <field name="<field_name>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T09:37:42.313

您可以在 python 文件中定义一个文本字段，如下所示。

```
'field_name': fields.text('Field Label'), 
```

然后将其添加到您的 xml 视图中，如下所示

```
<field name="field_name" /> 
```

它将标签显示为“字段标签”。如果要再次更改此标签，请使用此标签属性。

```
<label for="field_name" string="New Label" /> 
```

它将在视图中显示“新标签”。

# javascript - Javascript 匹配 - 不区分大小写

> ID：13899030
> 
> 赞同：3
> 
> 时间：2012-12-16T06:00:10.010
> 
> 标签：javascript, matching, case-insensitive

> **可能重复：**
> [javascript中不区分大小写的正则表达式](https://stackoverflow.com/questions/3939715/case-insensitive-regex-in-javascript)

值可以是：

```
- Mike liam

- Joe mike

- Mondal mike effron 
```

我想将每个值都包含 'mike' - 不区分大小写

所以，我尝试了：

```
var x = "mike";
if(valeu.match(new RegExp(x, "g"))
alert('success'); 
```

但这没有用。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T06:02:27.963

你想要`i`标志（对于“不敏感”）：

```
if(valeu.match(new RegExp(x, "ig"))
                         -----^----- 
```

# google-app-engine - 如何让我的 GAE 网站使用我自己的域（例如 http://www.mysite.com）运行

> ID：13899032
> 
> 赞同：2
> 
> 时间：2012-12-16T06:00:35.060
> 
> 标签：google-app-engine, web-hosting

我终于完成了为应用引擎创建我的第一个网站。一切运行良好`mysite.appspot.com`。现在我有一个现有的 Godaddy 域，我想将其用作我的 GAE 网站的域。基本上我一直在兜圈子试图完成那部分。

当我转到`Application Settings`>`Add Domain`并键入我的域时，我得到一个 404。我不确定为什么。但我想我需要先证明我已经拥有我的域名？我怎么做？

这些链接不断将我发送到[http://www.google.com/enterprise/apps/business/](http://www.google.com/enterprise/apps/business/)或[https://developers.google.com/appengine/articles/domains](https://developers.google.com/appengine/articles/domains)。但是没有什么可以解决我的问题。

我是否需要一个企业帐户才能使用我自己的`mysite.com`域而不是域在 GAE 上托管我的网站`mysite.appspot.com`？

如果有人最近成功完成了该过程，请分享详细信息。坦率地说，在转了这么多圈之后，我什至可以确定正确的问题是什么：

如何让我的 GAE 网站使用我自己的域运行，例如`http://www.mysite.com`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:35:20.310

谷歌最近停止了其商业应用程序的免费版本。但这就是我用的。如果您在上周之前注册了商业应用程序，免费版本，您可以使用它

[https://developers.google.com/appengine/articles/domains](https://developers.google.com/appengine/articles/domains)

让我们知道进展如何......祝你好运

# image - 图片不显示

> ID：13899033
> 
> 赞同：0
> 
> 时间：2012-12-16T06:00:46.070
> 
> 标签：image, wordpress, timthumb

图像未在 wordpress 中显示

```
<img src="http://test.schools.com/wp-content/themes/ovid/timthumb.php?src=http://test.schools.com/wp-content/uploads/2012/12/amla.png&amp;h=130&amp;w=200&amp;zc=1" alt="" class="img_nofade" width="200" height="130"> 
```

点击图片后，fancy-box 包含图片。

```
<img id="fancybox-img" src="http://test.schools.com/wp-content/uploads/2012/12/amla.png" alt="amla"> 
```

在控制台中，“加载资源失败：服务器响应状态为 400（错误请求）”

由于我是wordpress的新手，任何人都可以给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:32:45.733

你最近换过服务器吗？您的主机可能对其服务器上 PHP 扩展的 /cache 和 /tmp 文件夹的访问受到限制。相信我，我现在正在与免费主机一起经历同样的事情。

这篇文章更详细地解释了它：

[http://www.thebuzzmedia.com/tip-for-timthumb-thumb-php-not-generating-thumbnails/](http://www.thebuzzmedia.com/tip-for-timthumb-thumb-php-not-generating-thumbnails/)

据我了解，TimThumb 插件需要对这些文件夹具有完全的读写权限（我假设它就是存储拇指的地方）。

我今天发现了这一点，因为我尝试从我的本地主机转移到一个实际的免费托管服务，该服务限制了这些文件夹（以及 TimThumb 使用的一些功能）。

无论如何，我几乎可以肯定这是一个托管问题，归结为它。

仅供参考：众所周知，TimThumb 已经过时并且容易受到黑客的 DoS 攻击。此链接将向您展示更新过时的 TimThumb 插件的插件（当您明显地工作时）[http://www.210consulting.com/wordpress-plugins/securing-your-custom-wordpress-site/](http://www.210consulting.com/wordpress-plugins/securing-your-custom-wordpress-site/)

希望这会有所帮助。

# r - ggplot中被bar隐藏的负标签：geom_bar

> ID：13899034
> 
> 赞同：2
> 
> 时间：2012-12-16T06:00:48.760
> 
> 标签：r, ggplot2

这是一个扩展问题：[如何使用 ggplot2 为 R 中的每个条在 geom_bar 上放置标签](https://stackoverflow.com/questions/12018499/how-to-put-labels-over-geom-bar-for-each-bar-in-r-with-ggplot2)

我的数据有一些负面影响，因此标签侵入了条形图。我该如何调整这个？我需要动态读取标签位置。

谢谢！

```
growth<-data.frame(ElapsedTimeMonths=c(3,6,12,24),MedianGrowth=c(-0.011,-0.002,0.014,0.052))
g<-ggplot(growth, aes(x=factor(ElapsedTimeMonths),y=MedianGrowth))
g<-g+geom_bar(position="dodge", stat="identity")
g<-g+scale_y_continuous(labels = percent)
g<-g+geom_text(aes(label=as.character(100*MedianGrowth)), position=position_dodge(width=0.9), vjust=-0.25)
g 
```

![在此处输入图像描述](../Images/87b6972cae79b03476474b340e90b74d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T06:10:31.963

图形参数设置可以是矢量，以便不同的形状（此处为几何文字）可以有不同的外观。

您需要将**vjust**作为向量，与MedianGrowth的**符号相反**

您的数据

```
growth <- data.frame(ElapsedTimeMonths=c(3,6,12,24),
                   MedianGrowth=c(-0.011,-0.002,0.014,0.052),
                  ) 
```

我创建了 vjust 向量

```
 vvjust <- rep(1, length(growth$MedianGrowth))
 vvjust[growth$MedianGrowth > 0 ] <- -0.25
 [1]  1.00  1.00 -0.25 -0.25 
```

然后我绘制

```
g<- ggplot(growth, aes(x=factor(ElapsedTimeMonths),y=MedianGrowth))
g<- g+ geom_bar(stat='identity',position='dodge')
g<- g+ scale_y_continuous(labels = percent)
g<- g+ geom_text(aes(label=as.character(100*MedianGrowth)), 
                 position=position_dodge(width=0.9), vjust=vvjust) 
```

![在此处输入图像描述](../Images/ed01c7442130fb2b661e3de17d11792c.png)

# ios - 如何访问在 iOS 中动态传递给子 viewController 的参数？

> ID：13899044
> 
> 赞同：0
> 
> 时间：2012-12-16T06:03:19.350
> 
> 标签：ios, inheritance, uiviewcontroller

我有`viewController`一个按钮，当单击该按钮时，它会动态创建对另一个`viewController`类的引用，并在此过程中也为其设置参数`viewController`。我在 for 循环中执行此操作，如下所示：

```
-(void) clickOnButton:(id)sender {

    for (PersonObject *checkPerson in [DataModel sharedInstance].personList) {

        if (((UIControl*)sender).tag == checkPerson.personID) {

            ParentViewController *parentView = [[NSClassFromString(checkPerson.childViewController) alloc] init];
            parentView.personName = checkPerson.name;
            NSLog(parentView.personName);
            [self.navigationController pushViewController:parentView animated:YES];

        }

    }

} 
```

在创建并将用户发送到的 viewController 中，我的 viewDidLoad 方法中有以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    NSLog(@"Hello %@", personName);
    UILabel *title = [[UILabel alloc] initWithFrame:CGRectMake(0, 10, 150, 35)];
    [title setCenter:CGPointMake(self.view.frame.size.width/2, 27)];
    [title setBackgroundColor:[UIColor clearColor]];
    [title setTextAlignment:NSTextAlignmentCenter];
    [title setFont:[UIFont boldSystemFontOfSize:15]];
    [title setText:personName];
    [self.view addSubview:title];

} 
```

当我运行我的代码时，第一个 viewController 为我提供了 personName 参数的 NSLog 的正确输出，但是，第二个 viewController 语句中的 viewDidLoad 方法中的 NSLog() 显示我的 personName 值为 nil，并且没有任何显示作为 viewController 的标题。

参数 personName 是 NSString 类型，在父 viewController 类和子 viewController 类中都可以找到（有几个 viewController 类扩展了这个父类）。如何动态创建子 viewController 对象并让它捕获使用父 viewController 发送给它的正确参数值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:28:59.450

一个常见的错误是在要转换到的视图控制器中有一个接口，以具有如下接口：

```
@interface MyViewController : UIViewController
{
    NSString *personName;
}
@property (nonatomic, retain) NSString *personName
@end 
```

然后是一个没有显式合成的实现，`personName`或者一个具有`@synthesize`如下语句的实现：

```
@implementation MyViewController

@synthesize personName = _personName;

// the rest of the implementation

@end 
```

注意，如果你没有显式声明的语句，它会像上面的语句一样`@synthesize`自动合成。`personName`

这段相当无害的代码是有问题的，因为您最终会得到*两个*实例变量，一个是调用`personName`的，另一个是为您合成的，称为`_personName`.

你真正应该做的是消除显式声明的 ivar，因此`@interface`看起来像：

```
@interface MyViewController : UIViewController
@property (nonatomic, retain) NSString *personName
@end 
```

然后要么完全省略该`@synthesize`语句，要么有一个看起来像这样的语句：

```
@synthesize personName = _personName; 
```

然后，您的代码可以通过其访问器引用该属性，例如

```
NSLog(@"Hello %@", self.personName); 
```

或者您可以使用实例变量（ivar）：

```
NSLog(@"Hello %@", _personName); 
```

（顺便说一句，通常建议在[设置属性](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW5)`self.personName`时使用访问器（例如）。您真正必须使用 ivar（例如）的唯一时间是在[初始化方法和 dealloc](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW6)中。）`_personName`

但是，最重要的是，不要显式定义实例变量，让编译器为您合成它，从而消除此类问题。建议将 ivar 与前导下划线合成，以尽量减少在您真正打算使用属性的访问器方法时意外使用 ivar。

有关详细信息，请参阅*Advanced Memory Management Programming Guide*中的[Practical Memory Management](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)。

# sublimetext2 - 在带有 Cinnamon 的 Ubuntu 12.04 上的 Sublime Text 2 中的键盘列选择不起作用

> ID：13899046
> 
> 赞同：27
> 
> 时间：2012-12-16T06:03:23.050
> 
> 标签：sublimetext2, cinnamon

根据 Linux 列的[文档](http://www.sublimetext.com/docs/2/column_selection.html)，选择使用以下命令：

Linux

`Ctrl`+ `Alt`+ `Up`
`Ctrl`+ `Alt`+`Down`

但是在带有 Cinnamon 的 Ubuntu 12.04 上（未在 Unity 上测试）这会触发窗口切换操作（Cinnamon 的一部分）。

任何人都有一个很好的解决方法（除了使用鼠标......）

谢谢，

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-05-21T08:52:55.713

我习惯使用`Ctrl+Alt+Up`和`Ctrl+Alt+Down`作为此操作的快捷方式。要使其在 Linux 中运行，您必须执行两个步骤。首先，需要通过键入以下内容来禁用系统范围的快捷方式：

```
gsettings set org.gnome.desktop.wm.keybindings switch-to-workspace-down  "[]"
gsettings set org.gnome.desktop.wm.keybindings switch-to-workspace-up "[]" 
```

注销并随后登录。来源：[https ://gist.github.com/michfield/5614949](https://gist.github.com/michfield/5614949)

第二步是编辑 Sublime Text 配置文件，并进行相应的更改。我假设每个人都知道该怎么做。以防万一，添加这个`Preferences / Key Bindings - User`

```
// change column select defaults - on Linux it was Shift+Alt+Up/Down
{ "keys": ["ctrl+alt+up"], "command": "select_lines", "args": {"forward": false} },
{ "keys": ["ctrl+alt+down"], "command": "select_lines", "args": {"forward": true} } 
```

在基于 Ubuntu Raring 的 Mint 15 Cinnamon (RC) 上测试。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-16T07:51:24.590

认为文档是错误的。只是快速浏览了一下`Default (Linux).sublime-keymaps`（您可以从`Preferences`->访问它`Key Bindings - Default`，但这不是重点），它看起来是 alt+shift+(up/down)。我将建议重新绑定密钥（这就是我正在寻找的原因），但这也可以解决您的问题。=) 未经测试，仅基于键盘映射文件。如果这不起作用，请告诉我。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-01-21T05:35:05.227

用鼠标：

**Shift + 右键**+（向上或向下拖动）

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-05-13T11:59:45.610

对我来说，问题不同我通常使用**Ctrl + Shift + 上/下**

但后来它停止工作我真的不知道为什么，我的解决方案是**从**Preferences-->Key Bindings - Default **to** Preferences-->Key Bindings - User复制默认设置

```
{ "keys": ["alt+shift+up"], "command": "select_lines", "args": {"forward": false} },
{ "keys": ["alt+shift+down"], "command": "select_lines", "args": {"forward": true} }, 
```

**在 Ubuntu 14.04 中使用 sublime Text 3 Build 3083**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-29T21:04:06.560

如果你想知道为什么，进入 Sublime 3 控制台：

```
cntl+`  # or View --> Show Console 
```

进入：

```
sublime.log_commands(True)
sublime.log_input(True) 
```

输入顽皮的组合键，它会告诉你原因，通常安装的包会发生冲突。您可以在该包键绑定中更改它，或者如果您向**用户键映射**添加新绑定，它将覆盖所有内容。（它们在 **Preferences-->Key Bindings**中。）

编辑：在 Ubuntu 16.04 中使用 sublime Text 3 Build 3126

# node.js - 类似路线的超测和多次执行

> ID：13899047
> 
> 赞同：4
> 
> 时间：2012-12-16T06:03:31.787
> 
> 标签：node.js, express, sinon, supertest

我正在尝试测试两条几乎相同的路线，除了其中一条更具体，因为最新的 url 段是硬编码值（编辑），而另一条有参数（：slug）。

我遇到的问题是，当请求被执行时，它会调用两条路由（编辑，显示）导致我的模拟 never() 期望永远不会通过:(

难道我做错了什么？如果其中一条路线更具体，我不明白为什么两条路线都在执行...

这是测试：

```
var request = require('supertest')
    , express = require('express')

describe('routes', function() {
    it('should call only edit', function(done) {
        var usersController = require('./users-controller');
        var sandbox = require('sinon').sandbox.create();
        var mockController = sandbox.mock(usersController);

        mockController.expects('edit').yields(null).once();
        mockController.expects('show').never();

        var app = express();

        app.get('/users/:id/edit', usersController.edit);
        app.get('/users/:id/:slug', usersController.show);

        request(app)
          .get('/users/123/edit')
          .end(function(err, res){
            if (err) throw err;
            mockController.verify();
            done();
          });
    });
}); 
```

这是我在上面嘲笑的**users-controlle.js ：**

```
exports.edit = function(req, res, next) {
    res.send('edit');
}

exports.show = function(req, res, next) {
    res.send('show');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T05:15:08.267

尝试将您的“显示”放在回调函数中，然后“编辑”完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:57:31.483

这是可以预料的。

`app`Express 将按照在对象中注册的顺序执行与给定 URL 匹配的所有路由。要绕过任何以后的回调，您可以使用`next('route')`. 有关详细信息，请参阅[express API 指南中有关应用程序路由](http://expressjs.com/api.html#app.VERB)的部分。

# jquery-ui - KnockoutJS - 将模板作为函数结果返回

> ID：13899050
> 
> 赞同：2
> 
> 时间：2012-12-16T06:04:09.757
> 
> 标签：jquery-ui, knockout.js

我正在使用 jQuery UI SelectMenu 插件（https://github.com/fnagel/jquery-ui），它允许的一件事是它呈现列表项的方式的“格式”。描述如下；

> **format** : null, 接受一个带有单个参数的函数，该参数可以通过您想要的任何级别的操作来操作和返回

所以我的问题是 - 我如何才能将 Knockout 模板作为函数返回，以便我可以使用该模板作为渲染源？

这是一个你也可以玩弄的小提琴，但我也包括了一些代码

# [jsFiddle](http://jsfiddle.net/ciel/w9bsc/)

这基本上就是我的 viewModel 的样子；

```
$(document).ready(function(){
    function User(id, name, points) {
        this.Id = ko.observable(id);
        this.Name = ko.observable(name);
        this.Points = ko.observable(points);
    }

    var viewModel = {
        Users: ko.observableArray([
            new User("users/1", "Stacey", 27),
            new User("users/2", "Ciel", 30)
            ]),
        Selected: ko.observable()
    };

    ko.applyBindings(viewModel);

    $template = $('#user-template');

    $('select').selectmenu({
        format: $template
    });
});​ 
```

和匹配的 HTML - 请注意我有一个模板，我预计将绑定到`User`. 我试图在我的 JavaScript 中调用模板并将其作为格式参数传递 - 但它显然不起作用。

```
<select id="users" 
    data-bind="options: Users, 
    optionsCaption: 'select a user...', 
    optionsText: 'Name', 
    value: Selected, 
    valueUpdate: blur">
</select>
<span data-bind="with: Selected">
    <div data-bind="text: Name"></div>
    <div data-bind="text: Id"></div>
</span>

<script type="text/html" id="user-template">
    <h1 data-bind="text: Id"></h1>
    <h3 data-bind="text: Name"></h3>
</script> 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:47:50.967

我检查了该插件，它不是很适合使用 Knockout。您需要创建自定义绑定。问题是您用作格式的函数不会接收每个选项的实际视图模型，它将接收选项文本和选项本身

您可以做的一种技巧是让选项文本成为 JSON 中的实际对象，然后在格式函数中反序列化到对象并将其传递给渲染引擎，例如

```
function(text, opt){
   var item = ko.mapping.fromJSON(text);
   ko.renderTemplate(rowTemplate, bindingContext.createChildContext(item), **problem here**, "replaceChildren");
} 
```

在编写示例时，我刚刚意识到另一个问题，ko.renderTemplate 想要一个 html 元素来应用模板，我认为它不适用于仅在内存中创建一个 html 元素，它必须附加到 DOM 才能工作。

**编辑：这是一种方法，只需注意它不是测试人员，因此可能存在错误。**

[http://jsfiddle.net/w9bsc/42/](http://jsfiddle.net/w9bsc/42/)

```
format = function(text, option) {
    var index = option[0].index;
    if(index == 0 && caption !== undefined) return text;
    if(caption !== undefined) index--;

    var dummy = $("<div />");
    ko.renderTemplate(template, bindingContext.createChildContext(items[index]), null, dummy[0], "replaceChildren");

    return dummy.html();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:27:16.670

看看文档和演示怎么样？它说“接受一个功能”。不是您在代码示例中所做的 jQuery 对象。

请参阅此行以获取有效的回调函数：[https ://github.com/fnagel/jquery-ui/blob/selectmenu/demos/selectmenu/default.html#L58](https://github.com/fnagel/jquery-ui/blob/selectmenu/demos/selectmenu/default.html#L58)

# jsp - 生成的 JSP 代码调用 setJspId() 中的 NullPointerException

> ID：13899056
> 
> 赞同：0
> 
> 时间：2012-12-16T06:06:26.747
> 
> 标签：jsp, jboss, nullpointerexception

我正在尝试从 JBoss 7.1.1 上的 Java EE 5 教程中部署 Duke's Bank 示例。我只使用（未更改）源代码和用于部署的标准 XML 配置文件，这里的部分练习是看看我如何构建我自己的基于 JSP 的项目。

我得到的异常如下：

```
 ERROR [[jsp]] Servlet.service() for servlet jsp threw exception: java.lang.NullPointerException
    at javax.faces.webapp.UIComponentClassicTagBase.setJspId(UIComponentClassicTagBase.java:1858) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.jsp.main_jsp._jspx_meth_f_005fview_005f0(main_jsp.java:99)
    at org.apache.jsp.main_jsp._jspService(main_jsp.java:76)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:636) [rt.jar:1.6.0_18] 
```

我没有给出任何 JBoss 配置文件，WAR 的 WEB-INF 部分如下所示：

```
$ jar tvf build/lib/dukebank-web.war 
     0 Sat Dec 15 22:00:12 GMT 2012 META-INF/
   123 Sat Dec 15 22:00:10 GMT 2012 META-INF/MANIFEST.MF
     0 Sat Dec 15 22:00:12 GMT 2012 WEB-INF/
  2514 Fri Dec 14 14:29:20 GMT 2012 WEB-INF/web.xml
  1348 Sat Dec 15 08:19:46 GMT 2012 WEB-INF/dukesBank.tld
  7245 Sat Dec 15 08:19:46 GMT 2012 WEB-INF/faces-config.xml
  2153 Sat Dec 15 08:19:46 GMT 2012 WEB-INF/tutorial-template.tld
     0 Sat Dec 15 22:00:12 GMT 2012 WEB-INF/classes/... 
```

导致此问题的 JSP 文件 (main.jsp) 是：

```
<f:view>
    <h:form>
        <jsp:include page="/template/template.jsp"/>
        <center>
            <h3><h:outputText value="#{bundle.Welcome}"/></h3>
        </center>
    </h:form>
</f:view> 
```

它包括的模板文件：

```
<%@ taglib uri="/WEB-INF/tutorial-template.tld" prefix="tt" %>
<%@ page errorPage="/template/errorpage.jsp" %>
<%@ include file="/template/screendefinitions.jspf" %>
<html>
<head>
<title>
  <tt:insert definition="bank" parameter="title"/>
</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css">
</head>
<body bgcolor="#ffffff">
  <tt:insert definition="bank" parameter="banner"/>
  <tt:insert definition="bank" parameter="links"/>
</body>
</html> 
```

我将不再处理任何文件，因为正如我在开始时所说的那样，我没有更改任何我使用过的文件。

非常感谢您的帮助，史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:54:55.473

The Duke's Bank example is based on [JSF](https://stackoverflow.com/tags/jsf/info), which is a component based MVC framework which previously used to use JSP as "View". JSF pages are supposed to be opened by an URL which matches the `<url-pattern>` of the `FacesServlet` as definied in webapp's `web.xml`. For example, if it's `*.jsf`, then you should open it by `main.jsf` instead of `main.jsp`. Or if it's `/faces/*`, then you should open it by `faces/main.jsp` instead of `main.jsp`. This would invoke the `FacesServlet` which in turn will create the `FacesContext` and do all the JSF works.

You're getting a NPE on that line because the `<f:view>` (which is represented by the line `at org.apache.jsp.main_jsp._jspx_meth_f_005fview_005f0(main_jsp.java:99)` in the stack trace) is trying to find JSF's `FacesContext`, but can't seem to find one. This is true, since the `FacesContext` is supposed to be created by the `FacesServlet`.

### See also:

*   [java.lang.NullPointerException at javax.faces.webapp.UIComponentClassicTagBase.setJspId](https://stackoverflow.com/questions/13032224/java-lang-nullpointerexception-at-javax-faces-webapp-uicomponentclassictagbase-s)
*   [What is the difference between JSF, Servlet and JSP?](https://stackoverflow.com/questions/2095397/what-is-the-difference-between-jsf-servlet-and-jsp)
*   [JSF in Java EE 5 tutorial](http://docs.oracle.com/javaee/5/tutorial/doc/bnaph.html) (better: [JSF in Java EE 6 tutorial](http://docs.oracle.com/javaee/6/tutorial/doc/bnaph.html))

* * *

**Unrelated** to the concrete problem: the legacy Java EE 5 tutorial is not the right tutorial to read for JBoss 7\. JBoss 7 is a modern Java EE 6 compatible container. [Since Java EE 6, JSP is **deprecated** as JSF view technology and succeeded by Facelets.](https://stackoverflow.com/questions/4845032/wheres-the-official-jsp-tutorial) [Also, JSF 1.x (part of Java EE 5) is really not what you would like to use these days, you should be heading to JSF 2.x (part of Java EE 6)](https://stackoverflow.com/a/3646940).

# android - 在弹出窗口中关注 EditText 使活动进入睡眠状态

> ID：13899062
> 
> 赞同：4
> 
> 时间：2012-12-16T06:07:31.720
> 
> 标签：android, android-edittext, popupwindow

我在我的android项目中放置了`EditText`一个。`PopupWindow`设置`PopupWindow.setFocusable`为 false 时，不会显示软键盘。当设置`PopupWindow.setFocusable`为 true 时，`EditText`注意力集中，活动进入睡眠状态！弹出窗口上的其他项目有效，但手机上的后退按钮和在弹出窗口之外单击不会关闭它。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T06:41:22.637

我项目中的一些代码可能会有所帮助

```
 LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        PopupWindow  share_popup = new PopupWindow(inflater.inflate(R.layout.share_dropdown, null, false), 162, LinearLayout.LayoutParams.WRAP_CONTENT, true);
        share_popup.setOutsideTouchable(true);
        share_popup.setTouchable(true);
        share_popup.setFocusable(true);
        Drawable image_saved = getResources().getDrawable(R.drawable.dummy_bg);
        share_popup.setBackgroundDrawable(image_saved); 
```

这`R.drawable.dummy_bg`是一个透明图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T07:07:55.327

我刚设置`setBackgroundDrawable`的`PopupWindow`。一切似乎都很好！我惊呆了！！

# android - 检测 res/xml 和偏好活动时出错

> ID：13899063
> 
> 赞同：0
> 
> 时间：2012-12-16T06:07:45.587
> 
> 标签：android, xml, preference

我正在尝试在我的 andorid 应用程序中添加首选项活动，但我的 eclipse 无法识别 res/xml 文件夹，并且 addPreferenceFromResources() 方法显示为已弃用。所以请帮助我如何进一步进行。顺便说一句，我正在阅读 Ed Burnette 的 Hello Android。这件事在第 3 章第 54 页中提到。请帮帮我。

问候 Simran Preet Singh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:21:58.440

清理并构建项目。使用 PreferenceFragment 替换 PreferenceActivity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:24:02.827

检查您是否在标题语句中导入以下内容：

导入android.R；

如果是，请将其删除并查看是否可以获取 xml/prefs。

# html - jQuery 不处理对 dom 元素的多次更改

> ID：13899073
> 
> 赞同：0
> 
> 时间：2012-12-16T06:10:51.043
> 
> 标签：html, jquery-ui, jquery, jquery-plugins

我有一张表，我正在对使用 jQuery 进行更改。

我想进行 2 处更改，首先替换一个元素，然后使用 tablesorter 重新排序表。

```
$("#sl" + myrec_id).replaceWith(result.html);
$("#scenario_item_list").tablesorter({ sortList: current_scenareoSort }); 
```

问题是，如果我对表格进行排序，那么该项目将作为第二行添加到表格中，而不是替换。

每条线都可以独立工作，但不能一起工作。

更新：这是完整的代码

```
$(".save_item_update" ).live("touchstart click",function(event) {
            event.preventDefault();
            var mysc_id = $("#scenarioid").attr("class");
            var myrec_id = $("#recordid").attr("class");
            var loadtype = $("#edittype").attr("class");

            var fr_description = $("#fr_description").val();
            var fr_type = $("#fr_type").val(); 
            var fr_paymentfrequency = $("#fr_paymentfrequency").val(); 
            var fr_amount = $("#fr_amount").val(); 
            var fr_payhowtype = $("#fr_payhowtype").val(); 
            var fr_balance = $("#fr_balance").val(); 
            var fr_asatdata = $("#fr_asatdata").val(); 
            var fr_interestrate = $("#fr_interestrate").val();
            var sl_differentdata = $("#sl_differentdata").val(); 
            var sl_amount = $("#sl_amount").val(); 
            var sl_paymentfrequency = $("#sl_paymentfrequency").val(); 

            var fr_comment = $("#fr_comment").val(); 
            $.post("/scenario/save_item_update", { loadtype : loadtype, item_id : myrec_id, sl_scenario_id : mysc_id, fr_description:fr_description, fr_paymentfrequency:fr_paymentfrequency, fr_amount:fr_amount, fr_payhowtype:fr_payhowtype, fr_balance:fr_balance, fr_asatdata:fr_asatdata, fr_interestrate:fr_interestrate, fr_type:fr_type, fr_comment:fr_comment },
            function(result){

                if (result.status == "NOT LOGGED IN" ) {
                    NotLoggedIn(true);
                } else if (result.status == 'ERROR') {
                    ReportError(result.errormessage,true)
                } else {

                    if (loadtype == 'sl_remove') {
                        $("#finance_item_list tbody").append(result.html);
                        $("#sl" + myrec_id).remove();
                        $("#mthremain").html(result.monthremaining);
                        $("#finance_item_list").tablesorter({ sortList: current_financeSort });
                    } else if (loadtype == 'fi_dodelete') {
                        $("#fr" + myrec_id).remove();
                    } else if (loadtype == 'fi_use') {
                        $("#scenario_item_list tbody").append(result.html);
                        $("#mthremain").html(result.monthremaining);
                        $('#fr' + myrec_id).remove();
                        $("#scenario_item_list").tablesorter({ sortList: current_scenareoSort });
                        closePopUp();
                        $("#popup_body").html('');
                    } else if (loadtype == 'fi_edit') {
                        $("#fr" + myrec_id).replaceWith(result.html);
                        $("#finance_item_list").tablesorter({ sortList: current_financeSort });
                        closePopUp();
                        $("#popup_body").html('');
                    } else if (loadtype == 'sl_edit') {
                        $("#sl" + myrec_id).replaceWith(result.html);
                        $("#mthremain").html(result.monthremaining);
                        $("#scenario_item_list").tablesorter({ sortList: current_scenareoSort });
                        closePopUp();
                        $("#popup_body").html('');
                    } else if (loadtype == 'fi_insert') {
                        $("#finance_item_list tbody").append(result.html);
                        //$("#finance_item_list").tablesorter({ sortList: current_financeSort });
                        closePopUp();
                        $("#popup_body").html('');
                    }

                }

            },"json");
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T06:30:02.477

那么你需要更新 DOM。

您可以在正在进行的或以前的现场活动中执行此操作。

编辑：

我发现了这个，可能会有所帮助：

> 我相信您可以使用以下方式触发更新：

```
$(table).trigger("update") 
```

# c++ - C++/SFML 显示故障，精灵成员通过鼠标单击更改

> ID：13899077
> 
> 赞同：2
> 
> 时间：2012-12-16T06:11:30.637
> 
> 标签：c++, window, sprite, sfml, mouseclick-event

我正在学习 C++/SFML，作为练习练习，我正在制作一个小程序，在窗口中显示一个 10x10 的 64x64 像素方形棕色精灵网格。该程序允许您使用键盘选择绿色/黄色/蓝色/灰色/棕色方形精灵，并用这个选定的精灵替换所述网格上的任何图块。游戏循环如下：

```
while (window.isOpen())
{
    window.clear(sf::Color(sf::Color::Black));
    sf::Event event;
    while (window.pollEvent(event))
    {
        if (event.type == sf::Event::Closed)
            window.close();
    }

    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Num1)) s_paintBrush = s_sand;
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Num2)) s_paintBrush = s_grass;
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Num3)) s_paintBrush = s_dirt;
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Num4)) s_paintBrush = s_water;
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Num5)) s_paintBrush = s_rock;

    if (sf::Mouse::isButtonPressed(sf::Mouse::Left))
    {
        sf::Vector2i localPosition = sf::Mouse::getPosition(window);
        int i = localPosition.x / x;
        int j = localPosition.y / y;
        if (i < columns && j < rows && i >= 0 && j >=0) grid[j][i].m_terrain = s_paintBrush;;
    }

    for (int i = 0; i < rows; ++i)
    { 
        for (int j = 0; j < columns; ++j)
        {           
                window.draw(grid[i][j].m_terrain);
                grid[i][j].m_terrain.setPosition(x * j, y * i);
        }
    }
    window.display();
} 
```

“grid”是“tile”类的 2D 向量，其中包含 sf::Sprite 成员变量“m_terrain”，该变量存储要在相应网格位置显示的精灵。整数 x & y = 64，用于确定与窗口上的鼠标单击位置相对应的“网格”坐标。任何带有前缀 s_ 的东西都是 sf::Sprite。

该程序运行良好，但有一个例外，当我在要更改的图块上按下鼠标左键时，前一个精灵消失，留下一个空白方形区域，替换精灵显示在窗口的左上角，直到鼠标按钮被释放。然后替换的精灵会正确显示在鼠标点击的位置。

对我来说，这表明新的精灵是在鼠标点击时生成的，但在释放鼠标按钮之前没有接收到 setPosition 坐标。我不确定如何解决这个问题，也无法找到答案（这很简单，至少我可以理解，我只是在学习！）。

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:21:47.620

发生这种情况的原因是您在设置位置*之前绘制了精灵。*然后当下一个事件发生（按钮向上事件）时，精灵再次被绘制，但这次使用正确的坐标。

切换您绘制和设置位置的线条将使其工作：

```
grid[i][j].m_terrain.setPosition(x * j, y * i);
window.draw(grid[i][j].m_terrain); 
```

# c++ - 为我的 C++ 静态库创建接口

> ID：13899081
> 
> 赞同：2
> 
> 时间：2012-12-16T06:12:40.183
> 
> 标签：c++, class, interface, static-libraries, header-files

假设我的项目中有 2 个文件：“code.h”和“readData.cpp”。code.h 文件有我的类接口（和一些成员函数定义），而 readData.cpp 文件有我的类的私有成员函数之一的定义。

假设这是我的 code.h 文件的内容：

```
Class MyClass {
public:
    MyClass() { readData() };
    double sample();

private:
    std::vector<double> data;
    void readData();
    void foo();
};

double MyClass::sample() {
    // ...
}

void MyClass::foo() {
    // ...
} 
```

假设这是我的 readData.cpp 文件的内容：

```
#include "code.h"

void MyClass::readData() {
    data.push_back(1.3083);
    data.push_back(83.24);
    // ...
} 
```

现在，在编译并生成目标文件“readData.o”之后，我使用以下代码创建了一个库：

```
ar rvs myLib.a readData.o 
```

好的，到目前为止一切顺利。但这就是我的问题所在。我想分发这个 myLib.a 库，并且**只**允许其他用户看到类似以下界面的内容：

```
Class MyClass {
    double sample();
}; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:31:25.193

感谢 Vaughn Cato 的有用评论，我使用 PIMPL 策略解决了这个问题。

# ubuntu - 从 url 中检索图像，然后每分钟用日期戳重命名到本地文件夹

> ID：13899085
> 
> 赞同：0
> 
> 时间：2012-12-16T06:12:56.603
> 
> 标签：ubuntu, amazon-s3, cron, wget

我是 ubuntu s3 微型实例上的命令行新手，我需要一个 cron 作业，每分钟抓取一张图像并将其重命名为文件夹中的 datestamp.jpg ......例如：

获取此网址：[http://www.webcam1.com/live.jpg](http://www.webcam1.com/live.jpg) 重命名为 year_month_day_hour_min_second.jpg 保存到 cams/webcam1/

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T06:18:04.133

您可以在一个命令中执行此操作：

```
wget "http://www.webcam1.com/live.jpg" -O `date +"%Y_%m_%d_%H_%M_%S.jpg"` 
```

如果您从 bash 脚本执行此操作：

```
#!/bin/bash
dir="/cams/webcam1/"
now=`date +"%Y_%m_%d_%H_%M_%S.jpg"`
wget "http://www.webcam1.com/live.jpg" -O "$dir$now" 
```

将该 bash 脚本保存在某处，并确保使其可执行：`chmod +x /path/to/my/script.sh`

然后将此行添加到您的 crontab ( `crontab -e`) 中：

```
* * * * * /path/to/my/script.sh 
```

那应该这样做:)

# ruby-on-rails-3 - Heroku返回不能批量分配？

> ID：13899091
> 
> 赞同：0
> 
> 时间：2012-12-16T06:13:39.393
> 
> 标签：ruby-on-rails-3, heroku, console

我仔细计划了一切并在本地进行了测试，但部署后可能会创建许多无用的记录，导致应用程序在 heroku 上崩溃。

我的目标是将许多模型整合到一个主题模型中，因此我在 Heroku 控制台中使用了以下脚本（尽管一开始应该测试一条记录）：

```
> Question.find_each do |q|
* @qt=q.title
> @qd=q.description
> @q="Question"
> @ca=q.created_at
> @ui=q.user.id
> @uvt=q.user_votes_total
> Topic.create!({:title => @qt, :description => [@qd], :kind => @q, :created_at=>@ca, :user_id=>@ui, :user_votes_total=>@uvt })
> end 
```

Heroku 返回：

```
Question Load (1.8ms)  SELECT "questions".* FROM "questions" WHERE ("questions"."id" >= 0) ORDER BY "questions"."id" ASC LIMIT 1000
User Load (6.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 3331 ORDER BY users.created_at DESC LIMIT 1 
```

而且，这个 DOH！：

```
WARNING: Can't mass-assign protected attributes: title, description, kind, created_at, user_id, user_votes_total 
```

我的主题模型如下所示：

```
class Topic < ActiveRecord::Base
  attr_accessible :description, :title, :kind, :user_id, :tag_list,
              :subject, :image_attributes, :tags_attributes, :created_at,
              :user_votes_total
  validates :title, :presence => true,
                :length => { :minimum => 5 }
  validates :description, :presence => true
  validates :kind, :presence => true
  belongs_to :user
  has_many :adds
  default_scope order: 'topics.created_at DESC'

  votable_by :users
  acts_as_taggable

  has_one :image, :as => :parent, :dependent => :destroy
    accepts_nested_attributes_for :image, :allow_destroy => true
    after_create do
     self.create_image unless image
    end
  has_many :comments, :as => :commentable, :dependent => :destroy

  include PgSearch
  pg_search_scope :search, against: [:title, :description, :kind],
     using: {tsearch: {dictionary: "english"}}
end 
```

我已经搜索了相关信息，但无法弄清楚为什么 Heroku 不配合。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:28:49.207

我能够通过运行来克服这个问题：

```
`heroku restart` 
```

[https://devcenter.heroku.com/articles/ps](https://devcenter.heroku.com/articles/ps)

# java - JTable 单元格编辑器仅接受数字

> ID：13899102
> 
> 赞同：0
> 
> 时间：2012-12-16T06:16:39.483
> 
> 标签：java, swing, jtable, bigdecimal, tablecelleditor

我想在只接受数字的 JTable 中添加一个单元格编辑器（准确地说是 BigDecimal 类型）。我已经尝试了所有建议的代码，并且还阅读了所有类似的问题。然而，没有一个提议的解决方案对我有用。互联网上提供的文档（包括 Oracle 的网站）在我正在寻找的主题上并不是那么好。

请注意：单元格编辑器只能接受数字，实际上是数字和小数分隔符（. 或 ,）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T06:45:29.207

除了 StanislavL 的优秀建议，您可以尝试使用[DocumentFilter](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)。

查看[MDP 的博客](http://www.jroller.com/dpmihai/entry/documentfilter)以获取一些出色的示例

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T06:20:01.230

使用 eg `JSpinner`(with `SpinnerNumberModel`) 或`JFormattedTextField`(with required formatter) 作为编辑器。

# prolog - 将序言翻译成正式英语

> ID：13899103
> 
> 赞同：2
> 
> 时间：2012-12-16T06:16:41.753
> 
> 标签：prolog, dcg

我正在尝试编写一个程序，将序言句翻译成正式的英语句子。这是我的代码：

```
sentence --> [if],[the], first_phrase, second_phrase.
first_phrase -->  predicate, det , assertion, det, noun.
second_phrase --> [then],[the], predicate, det , noun.
assertion --> noun, [and], [the], predicate.
det --> [are].
det --> [is].

noun --> [flat].
noun --> [webbed].
noun -->[waterfowl].
predicate --> [feet].
predicate --> [bill].
predicate -->[order].

sentence(S1,S3) :- first_phrase(S1,S2), second_phrase(S2,S3).
first_phrase(S1,S3) :- second_phrase(S1,S2), noun(S2,S3).
second_phrase(S1,S3) :- assertion(S1,S2), first_phrase(S2,S3).
det([is|X], X).
det([are|X], X). 
```

此代码的输出如下所示：X = [if, the, feet, are, flat, and, the, feet, are|...] 所以它缺少一些单词，它应该显示如下内容：如果脚有蹼，账单是平的，那么订单是水禽。

为了得到这个结果，我应该添加或修复什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:01:32.190

将此代码添加到您的源代码文件中：

```
remove_max_depth:-
    current_prolog_flag(toplevel_print_options,Options),
    select(max_depth(_), Options, NOptions)->
    set_prolog_flag(toplevel_print_options, NOptions); true.

:-remove_max_depth. 
```

过程`remove_max_depth`将删除对在顶层显示的最大项目数的约束，并且指令`:-remove_max_depth.`将在您查阅文件时执行该过程。

# authentication - 如何在 JBOSS 7 上停止记录登录失败 javax.security.auth.login.FailedLoginException

> ID：13899105
> 
> 赞同：2
> 
> 时间：2012-12-16T06:17:06.543
> 
> 标签：authentication, jsf-2, jboss7.x, jaas

在我的 jsf2 项目中，我在 jboss 7.1 上使用 jaas，当我登录不正确的密码/id 时，jboss 抛出：`ERROR [org.jboss.security.authentication.JBossCachedAuthenticationManager] javax.security.auth.login.FailedLoginException: Password Incorrect/Password Required`

我编写了一个 ExceptionHandlerFactory 但在异常登录 jboss 控制台后调用了 ExceptionHandlerFactory，有人知道我如何捕捉这个异常吗？我想在它登录控制台之前捕获它，我想打印一个代码错误，如*Exception: A-0014*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:37:04.777

没有有效的编程方式来捕捉这个异常。

这是一个管理挑战，因为每个错误的用户/密码调用实例都会转储一个巨大的堆栈跟踪并在 ERROR 级别填满容器日志。

我对扩展 org.jboss.security.auth.spi.UsernamePasswordLoginModule 的自定义登录模块也有类似的情况。在某些时候，被覆盖的超类方法“validatePassword”返回 false。这被“login()”方法的父实现捕获，该方法（错误地）声明“javax.security.auth.login.FailedLoginException：密码不正确/需要密码”。在我的情况下，从未与身份验证服务建立网络连接。

所以实际发生的是 org.jboss.security.authentication.JBossCachedAuthenticationManager 类（内部）是进行日志记录的罪魁祸首（在 ERROR 级别，因此过滤掉是有问题的）。

截至 2012 年 7 月，JBoss 正在跟踪（并且仍然是 JBoss AS 7.1.2）一个“增强”以允许捕获此问题。对于远程调用类型的操作也是有问题的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-17T12:49:54.753

希望这个[Jboss 社区回答](https://community.jboss.org/message/643858)链接能帮助你处理你的异常

您可以在登录方法中向您发送消息，**例如异常：A-0014**

# actionscript-3 - 如何将 Numpool 数组中的随机数与我的 matchNum 数组进行匹配？

> ID：13899106
> 
> 赞同：1
> 
> 时间：2012-12-16T06:17:36.440
> 
> 标签：actionscript-3

好的，我使用了 indexOf 并且我得到了它来处理这个....但是我在这个下面发布了带有随机数的代码，它不起作用。

```
movieClip_1.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler);

    function fl_MouseClickHandler(event:MouseEvent):void
    {
        var allreadyPicked:Array = [1,2,3,4,5];
        var pickedNum:Array = [3,5];

        function compareArrays(init_arr:Array, comparing_arr:Array):Array
        {
            var differenceArray_arr:Array = new Array();

            for each (var id_obj:Object in init_arr)
            {
                if (comparing_arr.indexOf(id_obj) >= 0)
                {
                    differenceArray_arr.push(id_obj);
                }
            }
            return differenceArray_arr;
        }

        trace("Matched Number " + compareArrays(allreadyPicked, pickedNum));
    } 
```

但是当我添加我的随机数代码时，它似乎没有任何想法？

```
movieClip_1.addEventListener(MouseEvent.CLICK, clicked);

function clicked(event:MouseEvent):void
{
    //
    var allreadyPicked:Array = [1,5];

    //
    var numPool:Array = [1,2,3,4,5,6];
    var numPicked:Array = [];
    var randomCount:Number = 1;
    var r:Number;

    for (var i = 0; i < randomCount; i++)
    {
        r = Math.floor(Math.random() * numPool.length);
        numPicked[numPicked.length] = numPool.splice(r,1);
    }

    trace("Number Picked " + numPicked);
    ranNum.text = String(numPicked);

    function compareArrays(init_arr:Array, comparing_arr:Array):Array
    {
        var differenceArray_arr:Array = new Array();

        for each (var id_obj:Object in init_arr)
        {
            if (comparing_arr.indexOf(id_obj) >= 0)
            {
                differenceArray_arr.push(id_obj);
            }
        }

        return differenceArray_arr;
    }
    trace("Matched " + compareArrays(allreadyPicked, numPicked)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:10:25.880

您想使用 Array 的 indexOf 方法来告诉您它是否存在以及它的索引是什么。

例子 ：

```
var index:int = matchNum.indexOf(numPicked);

if(index >= 0)
{
  // match exists
  // index is the index of matching element in matchNum array

}
    else
    {
        // no match
    } 
```

# c++ - 在 windows nts 模式下构建 php 扩展

> ID：13899110
> 
> 赞同：1
> 
> 时间：2012-12-16T06:18:06.000
> 
> 标签：c++, php-extension

作为编译非线程安全模式（zendGuardLoader 扩展只有 nts 版本）的 Windows 上的新版本 PHP（5.3.x 或更高版本），所以我需要使用 nts 模式编译我的扩展。

当我使用模式 TS 编译它时它成功，但是当我想打开模式 nts 时出现此错误：

```
error LNK2001: unresolved external symbol __imp__executor_globals_id 
```

我完成了 nts 模式的所有设置，比如 ZTS=0。并使用 php5.lib。

我使用php 5.3.19源代码编译和vc++ 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T09:02:32.200

`ZTS`从您的项目预处理器中删除。`ZTS = 0`在 nts 模式下编译不是一个好主意。

# java - DynaActionForm 和 ActionForm 有什么区别？

> ID：13899112
> 
> 赞同：2
> 
> 时间：2012-12-16T06:18:33.207
> 
> 标签：java, struts, struts-config, actionform

`DynaActionForm`和 和有什么不一样`ActionForm`？

有人说`DynaActionForm`这不是真正的动态，因为您在**重新配置**文件中的属性后仍然需要重新启动服务器`struts-config.xml`（否则修改不会被拾取）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T06:31:16.330

的情况下**`ActionForm`**，

**我们必须提供`setters`以及`getters`每当用户添加控件时。**当用户创建视图时，同样的过程会一次又一次地重复。

但是，万一**`DynaActionForm`**

它消除了这种负担并创建了表单 bean 本身。这样用户**就不必编写`setters`and了`getters`。**不需要 bean 类**`DynaActionForm`**，我们将表单 bean 声明为**`DynaActionForm`**in 类型`struts-confing.xml`。我们将在`struts-config.xml`

```
 <?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE struts-config PUBLIC
 "-//Apache Software Foundation//DTD Struts Configuration 1.0//EN"
 "http://jakarta.apache.org/struts/dtds/struts-config_1_0.dtd">

<struts-config>

  <!-- ========== Form Bean Definitions ================= -->
  <form-beans>

    <form-bean      name="submitForm"
                    type="hansen.playground.SubmitForm"/>

  </form-beans>

  <!-- ========== Action Mapping Definitions ============ -->
  <action-mappings>

    <action   path="/submit"
              type="hansen.playground.SubmitAction"
              name="submitForm"
              input="/submit.jsp"
              scope="request">
    <forward name="success" path="/submit.jsp"/>          
    <forward name="failure" path="/submit.jsp"/>          
    </action>

  </action-mappings>

</struts-config> 
```

**更新**

> `struts-config.xml`有两个部分：**form-b​​eans**部分，列出 ActionForm bean 和**action-mappings**。请求 ( **`MyActionForm.do`**) 到特定 Action 和 ActionForm 类的映射在 struts-config.xml 文件中完成。

# sql - SQL 逻辑不显示查询中的某些行

> ID：13899115
> 
> 赞同：0
> 
> 时间：2012-12-16T06:18:54.427
> 
> 标签：sql, logic

我一直在寻找如何在我的 SQL 查询中应用逻辑来实现我的目标。在这一点上，我愿意接受任何建议。

我有两个表之间有一个内部连接。这两张表是所有 MLB 棒球运动员（过去和现在）的完整列表，以及所有名人堂球员的表。我正在寻找每行一名唯一球员的查询结果，如果他们在名人堂中，则有一列用 Y 或 N 填充。

**表 1 - 玩家**

```
ID
HallofFameID
NameFirst
NameLast 
```

**表 2 - 名人堂**

```
HallofFameID
YearID
Votes
Inducted 
```

每个球员在球员表中都有一个条目，但他们的球员 ID 可能会在名人堂表中输入多次。在我生成的带有内部连接的查询中，将提取如下所示的行......

```
Player ID  |   NameFirst  |  NameLast  |  YearID  |  Votes  |  Inducted

001........| Don.........| Sutton......| 1992.....| 100.....| N

001........| Don.........| Sutton......| 1993.....| 89......| N 

001........| Don.........| Sutton......| 1994.....| 100.....| N   

001........| Don.........| Sutton......| 1998.....| 341.....| Y

002........| Mickey......| Mantle......| 1974.....| 341.....| Y So forth... 
```

I would like my resulting query to not display the rows from 1992-1997 where Don Sutton was not elected, but just display the 1998 year, and then move down to the Mickey Mantle row with a Y. Also there are other players who have not been elected, that have a N next to their names for multiple years of Hall eligibility that I need to display on the same query result.

我已经包含了我的工作 SQL 以供参考。我不是在寻找任何人来编写我的 SQL，而是用关键字或我可能遗漏的逻辑为我指明正确的方向。提前致谢

```
Select  DISTINCT
    Master.namefirst, 
    Master.nameLast, 
    Master.HofID,
    HallOfFame.inducted,
    HallOfFame.yearid
FROM 
    HallOfFame 
INNER JOIN 
    Master On HallOfFame.hofID = Master.hofID
Group by 
    Master.nameFirst,
    Master.nameLast,
    Master.PlayerID,
    Master.hofID,
    HallOfFame.inducted,
    HallOfFame.yearid* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T06:25:45.040

试试这个：

```
SELECT
  m.namefirst, 
  m.nameLast, 
  m.HallofFameID,
  h1.inducted,
  h1.yearid
FROM HallOfFame h1
INNER JOIN
(
   SELECT PlayerID, MAX(YearID) LatestYear
   FROM HallOfFame 
   GROUP BY PlayerID
) h2 ON h1.PlayerID = h2.PlayerID AND h1.YearID = h2.LatestYear
INNER JOIN players m On h1.PlayerId = m.Id; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/9acdc/2)

这会给你：

```
| NAMEFIRST | NAMELAST | HALLOFFAMEID | INDUCTED | YEARID |
-----------------------------------------------------------
|       Don |   Sutton |            1 |        Y |   1998 |
|    Mickey |   Mantle |            2 |        Y |   1974 | 
```

# objective-c - 突出显示圆圈的红色填充部分并在objective-c中获取其宽度

> ID：13899117
> 
> 赞同：0
> 
> 时间：2012-12-16T06:19:16.203
> 
> 标签：objective-c, ios, cocoa-touch

我有这张图片：

![在此处输入图像描述](../Images/c833dde4ff009c9462e907bc122009b4.png)

现在我必须从图像中获取红色填充的部分。所以请告诉我如何做到这一点。任何想法将不胜感激。如果我的问题不清楚，请问我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:00:54.150

这是一个典型的计算机视觉任务（它甚至可能是人工智能完成的），所以这并不容易。但是，有一个出色的开源 C++ 库，称为[OpenCV](http://opencv.org)，它适用于 iOS。我什至找到了一个关于检测有色物体的[教程。](http://www.aishack.in/2010/07/tracking-colored-objects-in-opencv/)

顺便说一下，基本算法是这样的：遍历每个像素，看看它是否是红色的（你可以通过将它与红色、绿色和蓝色分量的某种阈值进行比较来做到这一点）。如果这样做了，请抓住好的像素并找出它们所在的连续区域。一种方法是计算像素，然后假设它们形成一个圆圈，然后将它们的数字除以 pi 并得到平方根 - 这将告诉你圆的半径，你可以加倍以获得它的直径（“宽度”）。

# c# - 避免读取提要中不存在的 rss 节点

> ID：13899118
> 
> 赞同：0
> 
> 时间：2012-12-16T06:19:35.877
> 
> 标签：c#, linq, rss

在大多数情况下，我正在阅读一个 rss 提要，该提要在我的项目中具有“信用”节点。虽然在某些情况下它不存在..如何避免让对象未设置异常？我正在使用 C# 中的 linq 以这种方式阅读它

```
Credit = (string)item.Element(media + "credit").Value == null ? string.Empty : (string)item.Element(media + "credit").Value, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:34:41.607

您应该在检索元素值之前检查元素是否不为空：

```
var creditElement = item.Element(media + "credit");
Credit = (creditElement == null) ? string.Empty : (string)creditElement.Value; 
```

但是 Linq 足够聪明——它可以显式地将元素值转换为字符串并将缺失的元素视为 null。因此，您可以将元素转换为字符串，并使用空合并运算符分配默认值：

```
Credit = (string)item.Element(media + "credit") ?? String.Empty; 
```

# android - 简单光标适配器，使用按钮列出活动

> ID：13899130
> 
> 赞同：0
> 
> 时间：2012-12-16T06:22:34.703
> 
> 标签：android, button, listactivity, simplecursoradapter

我想这样设计我的界面：

![在此处输入图像描述](../Images/50fdcddac3d20f0e751499c7073df878.png)

我尝试我的代码，显示界面如下所示：

![在此处输入图像描述](../Images/8a76143c2956bdd460b135ad7ff18227.png)

我想做设计，顶部的任何按钮和按钮底部的列表视图，如何？与列表活动。

我有这样的文件 Datalist.java ：

```
public class DataList extends ListActivity{
 private ListView conListView;
 private CursorAdapter conAdapter;
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        conListView=getListView();
        conListView.setOnItemClickListener(viewConListener);

        // map each name to a TextView
        String[] from = new String[] { "nama" };
        int[] to = new int[] { R.id.dataTextView};
        conAdapter = new SimpleCursorAdapter(DataList.this, R.layout.data_list, null, from, to);
        setListAdapter(conAdapter); // set adapter
    }
} 
```

并有这样的 data_list.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/dataTextView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:minHeight="?android:attr/listPreferredItemHeight"
        android:padding="8dp"
        android:textColor="@android:color/white"
        android:textSize="20sp" />
</LinearLayout> 
```

感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T06:39:38.870

您应该在 Activity 中使用 ListView 而不是 ListActivity。ListActivity 是一个仅包含一个列表的活动。一些例子：

```
<RelativeLayout>
    <Button ... />
    <ListView ... android:layout_belowTo="@id/button" />
</RelativeLayout> 
```

# spring - spring newbie——是否有可能在同一个 java 应用程序中同时拥有 REST API 和基于 RMI 的服务

> ID：13899131
> 
> 赞同：0
> 
> 时间：2012-12-16T06:22:36.910
> 
> 标签：spring, rest, rmi, spring-3

我对 Spring 很陌生-> 它的易用性给我留下了深刻的印象，我想用它来创建一个 REST API，以及一个 RMI 服务。

我想知道的是，是否可以部署一个暴露 RMI 服务以及 REST API 的 Java Web 应用程序？如果可以做到这一点，我必须牢记哪些（如果有的话）注意事项以避免与 REST 和 RMI 服务发生冲突/问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:44:22.707

这是绝对可能的、可行的和安全的。RMI 和 REST 协议是完全独立的，从技术堆栈的角度来看是根本不同的。REST 使用 HTTP 和 XML 或 JSON，而 RMI 基于 Java 序列化和 Java 命名注册表。两者都在不同的端口上工作。

从理论上讲，您甚至可以使用相同的类并使用两个接口公开它——但这在将来可能难以维护，因此请使用两个专用于每个协议的简单外观。

# xcode - xcode 构建设置组

> ID：13899132
> 
> 赞同：0
> 
> 时间：2012-12-16T06:22:39.547
> 
> 标签：xcode, xcode4, llvm, xcodebuild, build-settings

我正在使用 XCode4 创建一些项目。

似乎，不同类型的目标带有不同的配置组。例如：如果目标是`STL C++ Library`or `Cocoa Library`，则有一些与 相关的配置组`Apple LLVM compiler 4.1`，如果目标是`C/C++ Library`，则有一堆`User-Defined`配置（大多数与 g++ 相关）。

但在`Build Options`->`Comipler for C/C++/Objective-C`中，它是`Apple LLVM compiler 4.1`.

我想我必须遗漏一些东西，有人可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:33:34.383

看起来您只需要向目标添加一些源文件，您就会获得这些选项。（构建阶段 -> 编译源）

# ajax - 单击选项卡时通过 Ajax 包含 php 文件

> ID：13899136
> 
> 赞同：2
> 
> 时间：2012-12-16T06:23:30.170
> 
> 标签：ajax, wordpress, jquery, tabs

我想通过 ajax 在我的 WORDPRESS 主题中的“inc”文件夹中包含 1 个 php 文件。顺便说一句，当点击每个选项卡时，我会得到“li a”的 ID。请告诉我我的代码有什么问题。我不擅长javascript。感谢帮助。

这是我的JS代码。

```
<script type="text/javascript">
jQuery(".tab_menu ul li a").click(function() {
    jQuery("#result").html("<span class='loading'>Loading...</span>").fadeIn();
        var $linkId = $(".tab_menu ul li a").attr("id");
        $.ajax({
          url: "<?php echo get_bloginfo('template_url').'/inc/';?>" +$linkId+ ".php",
          type: "POST",
          data: {tab: linkId},
          success: function(msg){
            jQuery(".loading").remove();
            jQuery("<div>").html(msg).appendTo("div#result").hide().fadeIn("slow");
        }
    });
    return false;
});
</script> 
```

这里是我的标签菜单代码：

```
<div class="tab_menu">
            <ul>
            <li><a id="">Tab 1</a></li>
            <li><a id="tab_hinh_anh">Tab 2</a></li>
            <li><a id="tab_binh_luan">Tab 3</a></li>
            <li><a id="tab_ban_do">Tab 4</a></li>
            </ul>
            <div class="clear"></div>
</div><!--end tab-menu--> 
```

我要包含在“inc”文件夹中的 php 文件和文件名 = linkId +.php（例如：inc/tab_ban_do.php）

当我单击每个选项卡时.. 它会淡入正在加载...文本.. 但不加载 php 文件。我查看源代码：+ linkId + 不会更改为选项卡的 ID。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:41:15.497

请试试这个：

它肯定会起作用。

```
<script type="text/javascript">
jQuery(".tab_menu ul li a").click(function() {
    jQuery("#result").html("<span class='loading'>Loading...</span>").fadeIn();
        var $linkId = this.id;
        $.ajax({
          url: "<?php echo get_bloginfo('template_url').'/inc/';?>" +$linkId+ ".php",
          type: "POST",
          data: {tab: linkId},
          success: function(msg){
            jQuery(".loading").remove();
            jQuery("<div>").html(msg).appendTo("div#result").hide().fadeIn("slow");
        }
    });
    return false;
});
</script> 
```

# jquery - 滚动完成后返回第一张幻灯片

> ID：13899137
> 
> 赞同：0
> 
> 时间：2012-12-16T06:23:41.713
> 
> 标签：jquery

嗨，我在使用这个插件滑动内容时遇到了麻烦 [http://www.copterlabs.com/demo/contentslider/](http://www.copterlabs.com/demo/contentslider/)我已经弄清楚了如何将它自动滑动到最后，但是当它到达时它不会回到第一张幻灯片最后一个。请看我的代码。

jquery.ennui.contentslider.js

```
 (function($) {
  $.fn.ContentSlider = function(options)
  {
    var defaults = {
      leftBtn : 'images/cs_leftImg.jpg',
      rightBtn : 'images/cs_rightImg.jpg',
      width : '900px',
      height : '400px',
      speed : 400,
      easing : 'easeOutQuad',
      textResize : false,
      IE_h2 : '26px',
      IE_p : '11px'
    }
    var defaultWidth = defaults.width;
    var o = $.extend(defaults, options);
    var w = parseInt(o.width);
    var n = this.children('.cs_wrapper').children('.cs_slider').children('.cs_article').length;
    var x = -1*w*n+w; // Minimum left value
    var p = parseInt(o.width)/parseInt(defaultWidth);
    var thisInstance = this.attr('id');
    var inuse = false; // Prevents colliding animations

    function moveSlider(d, b)
    {
      var l = parseInt(b.siblings('.cs_wrapper').children('.cs_slider').css('left'));
      if(isNaN(l)) {
        var l = 0;
      }
      var m = (d=='left') ? l-w : l+w;
      if(m<=0&&m>=x) {
        b
          .siblings('.cs_wrapper')
            .children('.cs_slider')
              .animate({ 'left':m+'px' }, o.speed, o.easing, function() {
                inuse=false;
              });

        if(b.attr('class')=='cs_leftBtn') {
          var thisBtn = $('#'+thisInstance+' .cs_leftBtn');
          var otherBtn = $('#'+thisInstance+' .cs_rightBtn');
        } else {
          var thisBtn = $('#'+thisInstance+' .cs_rightBtn');
          var otherBtn = $('#'+thisInstance+' .cs_leftBtn');
        }
        if(m==0||m==x) {
          thisBtn.animate({ 'opacity':'0' }, o.speed, o.easing, function() { thisBtn.hide(); });
        }
        if(otherBtn.css('opacity')=='0') {
          otherBtn.show().animate({ 'opacity':'1' }, { duration:o.speed, easing:o.easing });
        }
      }
    }

    function vCenterBtns(b)
    {
      // Safari and IE don't seem to like the CSS used to vertically center
      // the buttons, so we'll force it with this function
      var mid = parseInt(o.height)/2;
      b
        .find('.cs_leftBtn img').css({ 'top':mid+'px', 'padding':0 }).end()
        .find('.cs_rightBtn img').css({ 'top':mid+'px', 'padding':0 });
    }

    return this.each(function() {
      $(this)
        // Set the width and height of the div to the defined size
        .css({
          width:o.width,
          height:o.height
        })
        // Add the buttons to move left and right
        .prepend('<a href="#" class="cs_leftBtn"><img src="'+o.leftBtn+'" /></a>')
        .append('<a href="#" class="cs_rightBtn"><img src="'+o.rightBtn+'" /></a>')
        // Dig down to the article div elements
        .find('.cs_article')
          // Set the width and height of the div to the defined size
          .css({
            width:o.width,
            height:o.height
          })
          .end()
        // Animate the entrance of the buttons
        .find('.cs_leftBtn')
          .css('opacity','0')
          .hide()
          .end()
        .find('.cs_rightBtn')
          .hide()
          .animate({ 'width':'show' });

      // Resize the font to match the bounding box
      if(o.textResize===true) {
        var h2FontSize = $(this).find('h2').css('font-size');
        var pFontSize = $(this).find('p').css('font-size');
        $.each(jQuery.browser, function(i) {
          if($.browser.msie) {
             h2FontSize = o.IE_h2;
             pFontSize = o.IE_p;
          }
        });
        $(this).find('h2').css({ 'font-size' : parseFloat(h2FontSize)*p+'px', 'margin-left' : '66%' });
        $(this).find('p').css({ 'font-size' : parseFloat(pFontSize)*p+'px', 'margin-left' : '66%' });
        $(this).find('.readmore').css({ 'font-size' : parseFloat(pFontSize)*p+'px', 'margin-left' : '66%' });
      }

      // Store a copy of the button in a variable to pass to moveSlider()
      var leftBtn = $(this).children('.cs_leftBtn');
      leftBtn.bind('click', function() {
        if(inuse===false) {
          inuse = true;
          moveSlider('right', leftBtn);
        }
        return false; // Keep the link from firing
      });

      // Store a copy of the button in a variable to pass to moveSlider()
      var rightBtn = $(this).children('.cs_rightBtn');
      rightBtn.bind('click', function() {
        if(inuse===false) {
          inuse=true;
          moveSlider('left', rightBtn);
        }
        return false; // Keep the link from firing
      });

      vCenterBtns($(this)); // This is a CSS fix function.
    });
  }
})(jQuery) 
```

脚本.js

```
$(document).ready(function(){

    setInterval(function(){
    $('.cs_rightBtn').click()
    },3000)
}); 
```

html

```
<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

```
<title> Content Slider Demonstration | Ennui Design </title> 
```

```
<body>

    <h1> Content Slider Demonstration </h1>
    <h2> Content Slider Version 1 </h2>
    <p>
        This content slider was implemented with the following code:
    </p> 
```

```
$（函数（）{
    $('#one').ContentSlider({
        宽度：'900px'，
        高度：'400px'，
        速度：800，
        缓动：'easeInOutBack'
    });
});
```

```
 <div id="one" class="contentslider">
        <div class="cs_wrapper">
            <div class="cs_slider">

                <div class="cs_article">
                    <h2> <a href="#">Article Number One</a> </h2>
                    <a href="#">
                        <img src="images/article01.jpg"
                            alt="Artist's interpretation of article headline" />
                    </a>
                    <p>
                        Hendrerit tincidunt vero vel eorum claritatem. Soluta
                        legunt quod qui dolore typi. Vel dolore soluta qui odio
                        non. Sollemnes minim eorum feugiat nihil nobis. Gothica
                        dolor in legentis nihil quinta.
                    </p>
                    <p>
                        Iriure parum autem putamus lectores duis. Quam sit quis
                        me me zzril. Facer etiam in lectores hendrerit etiam.
                        Exerci lorem liber tincidunt nostrud decima. Mutationem
                        est zzril ipsum facer nobis.
                    </p>
                    <a href="#" class="readmore">Read More</a>
                </div><!-- End cs_article -->

                <div class="cs_article">
                    <h2> <a href="#">Article Number Two</a> </h2>
                    <a href="#">
                        <img src="images/article02.jpg"
                            alt="Artist's interpretation of article headline" />
                    </a>
                    <p>
                        Nibh nihil et ex accumsan insitam. Qui lius congue
                        hendrerit quam vero. Demonstraverunt molestie ipsum
                        magna nobis sequitur. Ex diam euismod quis ii velit.
                    </p>
                    <p>
                        In quam lectores placerat Investigationes illum. Diam
                        sollemnes nihil lorem claram consectetuer. Eros nam
                        placerat claritas claritatem congue. Adipiscing ut
                        clari suscipit nulla habent.
                    </p>
                    <a href="#" class="readmore">Read More</a>
                </div><!-- End cs_article -->

                <div class="cs_article">
                    <h2> <a href="#">Article Number Three</a> </h2>
                    <a href="#">
                        <img src="images/article03.jpg"
                            alt="Artist's interpretation of article headline" />
                    </a>
                    <p>
                        Clari eum vel blandit notare quarta. Autem processus
                        lectores augue iriure facit. Volutpat aliquip erat
                        imperdiet ipsum tation. Typi luptatum ut
                        demonstraverunt eros quam. Ut clari consectetuer
                        tincidunt liber qui. 
                    </p>
                    <p>
                        Modo vel facilisis qui liber est. Eorum Investigationes
                        processus adipiscing commodo ea. Id iis claritatem vero
                        ea consequat.
                    </p>
                    <a href="#" class="readmore">Read More</a>
                </div><!-- End cs_article -->

                <div class="cs_article">
                    <h2> <a href="#">Article Number Four</a> </h2>
                    <a href="#">
                        <img src="images/article04.jpg"
                            alt="Artist's interpretation of article headline" />
                    </a>
                    <p>
                        Iis nostrud claritas quis sed qui. Ut nunc facilisi
                        claritatem quinta sit. Assum ii liber diam zzril nobis.
                        Qui nibh delenit fiant te illum. Delenit claritas ut
                        exerci eros typi. 
                    </p>
                    <p>
                        Videntur vel euismod ut eleifend quis. Nobis aliquam
                        nunc vero blandit illum. Lius placerat litterarum
                        processus quam legere. Accumsan modo non at congue
                        duis. Odio duis ut blandit feugait in. 
                    </p>
                    <a href="#" class="readmore">Read More</a>
                </div><!-- End cs_article -->

            </div><!-- End cs_slider -->
        </div><!-- End cs_wrapper -->
    </div><!-- End contentslider -->

    <h2> Content Slider Version 2 </h2>
    <p>
        This content slider was implemented with the following code:
    </p> 
```

```
$（函数（）{
    $('#two').ContentSlider({
        宽度：'600px'，
        高度：'266px'，
        速度：400，
        缓动 : 'easeOutQuad',
        文本调整大小：真
    });
});
```

```
 <div id="two" class="contentslider">
        <div class="cs_wrapper">
            <div class="cs_slider">

                <div class="cs_article">
                    <h2> <a href="#">Article Number One</a> </h2>
                    <a href="#">
                        <img src="images/article01.jpg"
                            alt="Artist's interpretation of article headline" />
                    </a>
                    <p>
                        Hendrerit tincidunt vero vel eorum claritatem. Soluta
                        legunt quod qui dolore typi. Vel dolore soluta qui odio
                        non. Sollemnes minim eorum feugiat nihil nobis. Gothica
                        dolor in legentis nihil quinta.
                    </p>
                    <p>
                        Iriure parum autem putamus lectores duis. Quam sit quis
                        me me zzril. Facer etiam in lectores hendrerit etiam.
                        Exerci lorem liber tincidunt nostrud decima. Mutationem
                        est zzril ipsum facer nobis.
                    </p>
                    <a href="#" class="readmore">Read More</a>
                </div><!-- End cs_article -->

                <div class="cs_article">
                    <h2> <a href="#">Article Number Two</a> </h2>
                    <a href="#">
                        <img src="images/article02.jpg"
                            alt="Artist's interpretation of article headline" />
                    </a>
                    <p>
                        Nibh nihil et ex accumsan insitam. Qui lius congue
                        hendrerit quam vero. Demonstraverunt molestie ipsum
                        magna nobis sequitur. Ex diam euismod quis ii velit.
                    </p>
                    <p>
                        In quam lectores placerat Investigationes illum. Diam
                        sollemnes nihil lorem claram consectetuer. Eros nam
                        placerat claritas claritatem congue. Adipiscing ut
                        clari suscipit nulla habent.
                    </p>
                    <a href="#" class="readmore">Read More</a>
                </div><!-- End cs_article -->

                <div class="cs_article">
                    <h2> <a href="#">Article Number Three</a> </h2>
                    <a href="#">
                        <img src="images/article03.jpg"
                            alt="Artist's interpretation of article headline" />
                    </a>
                    <p>
                        Clari eum vel blandit notare quarta. Autem processus
                        lectores augue iriure facit. Volutpat aliquip erat
                        imperdiet ipsum tation. Typi luptatum ut
                        demonstraverunt eros quam. Ut clari consectetuer
                        tincidunt liber qui. 
                    </p>
                    <p>
                        Modo vel facilisis qui liber est. Eorum Investigationes
                        processus adipiscing commodo ea. Id iis claritatem vero
                        ea consequat.
                    </p>
                    <a href="#" class="readmore">Read More</a>
                </div><!-- End cs_article -->

                <div class="cs_article">
                    <h2> <a href="#">Article Number Four</a> </h2>
                    <a href="#">
                        <img src="images/article04.jpg"
                            alt="Artist's interpretation of article headline" />
                    </a>
                    <p>
                        Iis nostrud claritas quis sed qui. Ut nunc facilisi
                        claritatem quinta sit. Assum ii liber diam zzril nobis.
                        Qui nibh delenit fiant te illum. Delenit claritas ut
                        exerci eros typi. 
                    </p>
                    <p>
                        Videntur vel euismod ut eleifend quis. Nobis aliquam
                        nunc vero blandit illum. Lius placerat litterarum
                        processus quam legere. Accumsan modo non at congue
                        duis. Odio duis ut blandit feugait in. 
                    </p>
                    <a href="#" class="readmore">Read More</a>
                </div><!-- End cs_article -->

            </div><!-- End cs_slider -->
        </div><!-- End cs_wrapper -->
    </div><!-- End contentslider -->

    <p class="footer">
        All Content &copy; 2009 Ennui Design | <a href="http://validator.w3.org/check?uri=referer">Valid XHTML 1.0 Strict</a>
    </p>
    <!-- Site JavaScript -->
    <script type="text/javascript"
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script type="text/javascript" src="js/jscript.js"></script>
    <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="js/jquery.ennui.contentslider.js"></script>
    <script type="text/javascript">
        $(function() {
            $('#one').ContentSlider({
                width : '900px',
                height : '400px',
                speed : 800,
                easing : 'easeInOutBack'
            });
        });
        $(function() {
            $('#two').ContentSlider({
                width : '600px',
                height : '266px',
                speed : 400,
                easing : 'easeOutQuad',
                textResize : true
            });
        });
    </script>
    <script src="js/jquery.chili-2.2.js" type="text/javascript"></script>
    <script src="js/chili/recipes.js" type="text/javascript"></script>

</body> 
```

当它到达最后一张幻灯片时，我什至无法单击上一个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:41:31.363

首先，使用`setInterval`是一个坏主意。这是我建议您使用的两个函数和一个基本实现。

```
$(function() {
    //initiate ContentSlider 
    $('#one').ContentSlider({
        width : '900px',
        height : '400px',
        speed : 800,
        easing : 'easeInOutBack'
    });

    //get total number of slides and create a variable to count
    //please note that this is only for one slider, not two on the same page
    var total = $('.cs_article').length,
    i = 1;

    //create an event handler to initiate the automation
    $('#auto_btn').click(function(){ clickRight(); });
    $('#stop').click(function(){  clearTimeout(t); });

    //the functions
    function clickRight() {
        i++;
        $('.cs_rightBtn').trigger('click');
        if (i!=total){
            var t = setTimeout(function(){clickRight()},3000);
        }
        if (i==total){
            clickLeft();
        }
    }
    function clickLeft(){
        i--;
        $('.cs_leftBtn').trigger('click');
        if (i>=1){
            var t = setTimeout(function(){clickLeft()},3000);
        }
        if (i<1){
            clickRight();
        }
    }

}); 
```

我希望这对你来说是一个很好的垫脚石。您可能想要稍微更改功能，目前它只是在所有幻灯片中不断滑动。此外，**不要只是复制和粘贴**，阅读代码并理解它，以便您可以根据需要手动定制它。

# sql-server - 将非“无”数据从 SQL Server 返回到 .NET 应用程序的最佳方式

> ID：13899139
> 
> 赞同：0
> 
> 时间：2012-12-16T06:23:54.617
> 
> 标签：sql-server, vb.net, nullreferenceexception, dbnull, sqldataadapter

我通常使用`SqlDataAdapter`该类从 SQL Server 检索数据以在 .NET 应用程序中使用。几乎同样常见的是，在遍历返回的对象时，`DataSet`我经常遇到空对象异常，因为单元格包含在 VB.NET`DbBull`中转换为的 a。`Nothing`

自然，最好将空单元格存储为空单元格`NULL`或`NVARCHAR`某些此类数据类型。

将这些 DbNull 转换为 VB.NET 中的对象的最佳实践是什么（假设有一个）。它最常见的是一个空字符串，但每种数据类型都有自己的“最合适”的“空”值？

这里的目标是，我不想用垃圾填充我的数据库，也不想让我的应用程序在遇到 a 时中断`DbNull`，也不想做这样愚蠢的事情......

**不受欢迎的解决方案！**

```
For Each row As DataRow In dt.Rows
    Dim cell1 As String = If(IsDBNull(row(0)), "", row(0).ToString)
    Dim cell2 As String = If(IsDBNull(row(1)), "", row(1).ToString)
    Dim cell3 As String = If(IsDBNull(row(2)), "", row(2).ToString)

    Response.Write(String.Format("Cell1: {0}, Cell2: {1}, Cell3: {2}<br />", & _
                   {cell1, cell2, cell3})
Next 
```

想象一下，如果我有 50 列，那么在使用它们之前检查所有这些会很麻烦。如果存在，我想要一个更智能的解决方案。

**旁注**：

在 SQL Server 中，很容易做类似的事情，但并不完全相同。我通常使用类似`isnull(@value,@value)`的方法来确保将空值捕获为我的数据集的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-23T20:00:46.333

尝试这个：

```
Dim sValue as String = ""
sValue = If(cmdComanda.ExecuteScalar(), String.Empty) 
```

# .net - Windows Forms .NET 面板中的接受按钮和取消按钮

> ID：13899140
> 
> 赞同：0
> 
> 时间：2012-12-16T06:24:31.887
> 
> 标签：.net, winforms, panel, cancel-button, acceptbutton

我在 Windows 窗体中工作。我有一个有两个面板的表格。两个面板都有确定和取消按钮。我希望它们在各自的面板（容器）中表现为接受和取消按钮（类似于 Form 的 AcceptButton 和 CancelButton）。

所以基本上我想要面板的 AcceptButton 和 CancelButton 之类的功能。我应该如何实现这个？

# sql-server-2008 - 如何指定特定表是否真的在数据库中使用？

> ID：13899144
> 
> 赞同：0
> 
> 时间：2012-12-16T06:26:16.847
> 
> 标签：sql-server-2008

我正在重构一个遗留系统。它的数据库有大量的表，其中一些没有使用。我需要指定这些表才能知道是否应该删除它们。SQL 中是否有任何方法可以确定特定表是否被任何可编程对象（即存储过程、视图或函数）使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T06:40:30.373

右键单击表 -> 查看依赖项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:29:16.440

为了指定每个对象的依赖关系，我使用了一个返回对象类型的 select 语句：表、函数、触发器、过程和数据库中的视图。

选择这些对象后，我使用光标来指定对这些对象中的每一个的依赖关系。以下是我使用的代码：

```
DECLARE c CURSOR READ_ONLY FAST_FORWARD FOR
SELECT    name
FROM      sys.objects
WHERE     (type = 'U') OR (type = 'FN') OR
          (type = 'TR') OR (type = 'P') OR
          (type = 'V')
DECLARE @dbObjectName varchar(500)

OPEN c

FETCH NEXT FROM c INTO @dbObjectName
WHILE (@@FETCH_STATUS = 0)
BEGIN
print @dbObjectName 
EXEC sp_depends @objname = @dbObjectName
    FETCH NEXT FROM c INTO @dbObjectName
END
CLOSE c
DEALLOCATE c 
```

# ruby-on-rails - Rails 应用程序中的 Recaptcha 在 Chrome 和 IE 中被视为不安全

> ID：13899145
> 
> 赞同：0
> 
> 时间：2012-12-16T06:26:28.063
> 
> 标签：ruby-on-rails, recaptcha

我正在使用来自[这里](https://github.com/ambethia/recaptcha)的recaptcha gem 。在 chrome 中，recaptcha 框根本不会出现，并且通常不会显示任何内容被隐藏。在 Internet Explorer 中，系统会提示用户“仅显示安全内容”。

为什么这被认为是不安全的？我可以在指定的 gem 中设置任何选项来解决此问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:31:41.887

使用[`recaptcha_tags :ssl => true`](https://github.com/ambethia/recaptcha#to-use-%E2%80%98recaptcha%E2%80%99).

# magento - 在管理员和前端控制器之间传递数据

> ID：13899148
> 
> 赞同：1
> 
> 时间：2012-12-16T06:26:54.787
> 
> 标签：magento

因此，我正在从管理员向前端控制器发出 GET 请求，我需要以两种不同的方式在此请求上两次传递相同的数据，并比较前端发送的值。第一种方式是 GET 请求。所以我可以简单地通过 url 传递参数。现在我需要第二种方法。我无法使用会话模型，因为管理和前端会话具有不同的范围。问题是我可以在哪里将数据存储在管理模型/控制器/块/观察者中以在前端获取它。数据库和 cookie（或 tmp 文件）不是我的解决方案。

这是我需要做的简单方案：

![方案](../Images/6395fbf6ba07f8dc66e42ba226d14558.png)

所以，我的最后一项任务是在管理站点上使用动态键创建 URL（URL 转到前端），但始终检查前端的键实际情况。实际上，我需要在实际生成的值的短时间内保存生成的值。

任何建议表示赞赏。谢谢。

# performance - SQL Server CE 4 在 XP SP3 上的性能非常差

> ID：13899151
> 
> 赞同：0
> 
> 时间：2012-12-16T06:27:17.107
> 
> 标签：performance, entity-framework-4, sql-server-ce-4, sqlperformance

我有一个带有实体框架 4.3 和加密的 SQL Server Compact 4.0 数据库，启用了平台默认模式，这是它的连接字符串：

```
Data Source={Database File};Password={MyPassword}; Encryption Mode=Platform Default;Persist Security Info=False;Locale Identifier=1065 
```

当我执行一个简单的查询（例如通过用户名和密码验证用户）时，在 Windows 7 或 8 下，它以合理的性能完美运行。但是，如果我在 Windows XP Service Pack 3 环境中运行它，它执行查询的速度非常慢。对用户进行身份验证大约需要 1 分钟或有时 2 分钟。

*   XP 计算机配置为：Intel Pentium Celeron 2.8 MHz 和 512MB RAM。
*   Windows 7 配置相同，只是它有 1GB 的 RAM。

最后，我想要一个小型数据库，例如 SQL Server CE，它具有良好的加密支持，可与 EF 4.3 一起使用。如果存在具有此功能的任何其他数据库引擎并且可以解决这种糟糕的性能，它可以解决我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:34:13.393

检查几件事，例如..

您的数据库是否加密？

您是打开和关闭连接，还是在应用程序的生命周期内保持连接对象打开？

有关更多详细信息，请关注 stackoverflow 本身的相关线程..您可能会找到解决方案

[SqlCe 在 Windows XP 中受限用户帐户下打开缓慢](https://stackoverflow.com/questions/11697308/sqlce-opens-slow-under-a-limited-user-account-in-windows-xp/11699440#11699440)

# mysql - 无法使用外键创建表 - MySQL 错误 150

> ID：13899152
> 
> 赞同：0
> 
> 时间：2012-12-16T06:27:16.890
> 
> 标签：mysql

我在理解以下代码段出现 MySQL 代码错误 150 的原因时遇到了一些麻烦：

```
-- Exercise Categories
CREATE TABLE Exercise_cat
(
ec_id       INT NOT NULL AUTO_INCREMENT,
name        VARCHAR(25),
PRIMARY KEY (ec_id)
);
-- This inserts fine

-- Exercise Descriptions
CREATE TABLE Exercise_desc
(
e_id        INT NOT NULL AUTO_INCREMENT,
name        VARCHAR(25),
ec_id       INT NOT NULL,
cal_per_hour    INT NOT NULL,
PRIMARY KEY (e_id),
FOREIGN KEY (ec_id) REFERENCES Excercise_cat(ec_id)
);
-- ERROR (foreign key constraint not formed) 
```

我没有留下列名，如[[1]](https://stackoverflow.com/questions/5357936/foreign-key-error-on-mysql-create-table-statement-err-150) [[2]](https://stackoverflow.com/questions/236668/foreign-keys-in-mysql)。
我有分号，正如 MySQL 想要的那样。

我将如何修复我的外键以便我可以创建表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:36:09.973

你的意思`Exercise_cat`不是`Excercise_cat`

```
CREATE TABLE Exercise_desc
(
    e_id        INT NOT NULL AUTO_INCREMENT,
    name        VARCHAR(25),
    ec_id       INT NOT NULL,
    cal_per_hour    INT NOT NULL,
    PRIMARY KEY (e_id),
    FOREIGN KEY (ec_id) REFERENCES Exercise_cat(ec_id)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T06:36:23.640

您引用的表**`Excercise_cat`不存在**。但是**Exercise_cat 存在。**

因此，应更正以下行。

```
FOREIGN KEY (ec_id) REFERENCES Excercise_cat(ec_id)
                                 ^
                                 |
                                 +-- Remove this extra 'c' 
```

# java - 将 weka 与 MySql 一起使用

> ID：13899155
> 
> 赞同：0
> 
> 时间：2012-12-16T06:27:30.767
> 
> 标签：java, mysql, jdbc, weka

我正在尝试使用 weka 从我的本地 MySql 数据库中读取数据。

我放入`DatabaseUtils.prop`我的主目录并启动 weka 作为命令。我收到这条消息

```
Trying to add database driver (JDBC): com.mysql.jdbc.Driver - Error, not in CLASSPATH? 
```

但是文件正在加载，因为当我尝试连接时，url 已经在我的配置文件中设置。

我尝试使用从其文件夹中运行 weka

```
java -cp ./mysql-connector-java-5.12-bin.jar -jar weka.jar 
```

但这也不起作用，因为显然使用`-jar`“覆盖类路径变量”（引用，因为我不知道这是什么意思）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:20:27.273

解决了

我用了这个命令

```
java  -Xmx300M -cp ".:weka.jar:mysql-connector-java-5.1.12-bin.jar:"   weka.gui.GUIChooser 
```

在[这里](https://stackoverflow.com/questions/7083833/how-to-connect-mysql-databases-in-weka)找到，我将其替换为 ';' 使用 ':' 因为显然这就是它在 Linux 上的工作方式

# java - 接口真的没有构造函数吗？

> ID：13899156
> 
> 赞同：2
> 
> 时间：2012-12-16T06:28:11.090
> 
> 标签：java, list, interface

如果`interface`没有构造函数，那么这段代码如何编译？

```
 interface I {
        List<Integer> LIST = Arrays.asList(1, 2, 3);
    } 
```

谁在这里初始化`List`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T06:31:31.577

> 接口真的没有构造函数吗？

是的。它们不能被实例化。

> 谁在这里初始化 LIST？

`LIST`接口的隐式静态初始化器 ... 在任何东西可以使用对象¹之前调用一次。

接口声明的字段是隐式的`public`，`static`并且`final`（[JLS 9.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.3)）和任何初始化都由接口的静态初始化（[JLS 9.3.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.3.1) / [12.4.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)）执行。

* * *

^(1 - 实际上，这并不完全正确。可以编写一个程序，其中在正确初始化之前使用静态字段。（详细信息在 JLS 中。）但这需要做一些事情......而且你不应该......)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T06:33:50.080

接口没有任何构造函数。事情

```
interface I {
    List<Integer> LIST = Arrays.asList(1, 2, 3);
} 
```

编译和工作，因为`LIST`是接口的一个变量，可用于所有实现`I`. 接口可以被认为是具有相同数据字段和方法的类的通用原型，即除变量外，所有实现者都需要实现它们。

变量在`VM`加载实现接口的类时被初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T06:34:08.160

在接口中声明的每个实例成员都是静态的。所以，`LIST`是静态的、最终的和公开的。

因此，当您想从名为 的接口访问成员*I*`LIST`时，可以使用：`LIST.I`

但是由于封装，您不希望公共成员不是最终的。通常，这些静态最终成员为特定类型的实例。引用形状的 Type 将具有 Circle 或 Square 的最终静态实例。

前任：

```
Class shape {  
  public final shape Circle;  
  public shape();  
  void setX() {};  
  void getX() { return x;}  
} 
```

看`java.lang.Long`，它有**MIN_VALUE**和**MAX_VALUE**这样的实例。

面向对象编程需要使用`getX()`和`setX()`函数来维护封装。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-16T06:36:27.133

Java 定义的接口是*静态*的、*公共*的和*最终*的。

**如果不**提供一对*{ 和 }之间的**实现*，则无法实例化接口。

 *```
new InterfaceA() { int getA() { blah...;return x} }; 
```*

# html - 返回空白作为下划线

> ID：13899158
> 
> 赞同：0
> 
> 时间：2012-12-16T06:29:15.050
> 
> 标签：html, mysql, codeigniter

我需要在从 mysql 表返回的该地址的最后部分中的任何空格都有一个下划线。问题是我认为我不能只修改模型中的 SQL，因为我还需要在该`value="<?php echo $row['brand'];?>"`部分中返回带有空格的原始值。我刚开始学习 php/html，所以不确定这是否可能。这是我需要修改的视图中的代码部分。

`<?php foreach($rb_data as $row){ ?>`

`<input type="button" class="btn btn-success" value="<?php echo $row['brand'];?>" onClick="document.location.href = ('http://localhost/CodeIgniter_2.1.2/index.php/controller/community/<?php echo $row['brand'];?> ' );">`

`<?php } ?>`

例如，当我单击显示我们的家庭的按钮时，我需要它来返回 `CodeIgniter_2.1.2/index.php/controller/community/our_family` 所有小写字母是首选但不是必需的。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T06:33:43.837

```
<?php foreach($rb_data as $row){ ?>

<input type="button" class="btn btn-success" value="<?php echo $row['brand'];?>" onClick="document.location.href = ('http://localhost/CodeIgniter_2.1.2/index.php/controller/community/<?php echo str_replace(' ','_',strtolower($row['brand']));?> ' );">

<?php } ?> 
```

如果您只需要替换空格，则可以执行类似的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T07:29:35.037

你也可以使用 CI 方便的帮助函数 url_title() 你需要加载 URL 帮助

```
<input type="button" class="btn btn-success" value="<?php echo $row['brand'];?>" onClick="document.location.href = ('http://localhost/CodeIgniter_2.1.2/index.php/controller/community/<?php echo url_title($row['brand'],'_');?> ' );">

<?php } ?> 
```

如果您没有在 url_tilte 中提供第二个参数，它将有破折号 - 默认情况下，如果您正在设置 _ 或其他东西

[网址助手](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)

# javascript - jQuery 缩放插件？

> ID：13899163
> 
> 赞同：0
> 
> 时间：2012-12-16T06:30:30.737
> 
> 标签：javascript, map, zooming

我似乎很难找到一个插件，它可以放大我的图像，同时让图像的*其余部分*保持相同的大小。

我需要它的原因是因为我正在使用图像地图并试图放大特定大陆上的图像。*一直放大后，我将用该特定*大陆的新图像和图像地图替换我放大的图像。当这种情况发生时，我不希望世界地图的其他地方改变大小。

有谁知道这个的好插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:50:38.050

我找到了一个教程，它似乎展示了一些接近你想要的东西，以及如何到达那里的说明：http: [//thecodeplayer.com/walkthrough/magnifying-glass-for-images-using-jquery-and-css3](http://thecodeplayer.com/walkthrough/magnifying-glass-for-images-using-jquery-and-css3)

这是另一个： http: [//mlens.musings.it/](http://mlens.musings.it/)

编辑：基于贾斯汀的评论：

> 我在这里谈论的是一个实际的缩​​放动画。不仅仅是替换它，因为我可以在动画中进行淡入淡出。

使用 jQuery 的 animate() 方法来实现这一点。

代码：

```
$(函数(){
    $('#zoomimage').click(function(){
        $(this).animate({height:'150%', width:'150%'}, 500);
    });
});​

```

编辑：基于贾斯汀的下一条评论：

> 嘿 Aditya，唯一的问题是尺寸受到影响。有没有办法在它生长时裁剪它以保持相同的大小？

这可以通过操纵图像的容器以在图像增长时隐藏图像的其余部分来完成。像这样的东西：

```
<div style="width:275px; height:95px; overflow:hidden;">
    <img src="https://www.google.com/images/srpr/logo3w.png" id="zoomimage" />
</div>​ 
```

确保图像的`overflow:hidden;`其余部分不显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T06:43:37.057

这是你的解决方案，我在我的项目中也使用完全相同的地图，

[http://www.jacklmoore.com/zoom](http://www.jacklmoore.com/zoom)

祝你好运 ：）

# objective-c - 中间视图控制器在关闭模式视图然后弹出视图控制器后短暂显示

> ID：13899164
> 
> 赞同：2
> 
> 时间：2012-12-16T06:30:41.383
> 
> 标签：objective-c, ios, modal-dialog, popviewcontrolleranimated

我有一个表视图控制器 A，它对视图控制器 B 执行推送 segue。B 然后对视图控制器 C 执行模态 segue。我在 C 上有一个按钮，需要导致 C 被解雇（其中如前所述，是模态的）并且 B 的弹出，以便我们返回 A。在 C 中，我检测到按钮按下并使用委托回调 B，然后使用以下方法关闭模态视图控制器 C：

```
[sender dismissViewControllerAnimated:NO completion:nil]; 
```

然后 B 使用一个委托回调 A 并使用以下方法从堆栈中弹出 B：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

现在这一切都奏效了，除了在这一切期间我短暂地看到 B 的非常烦人的事实，而我希望能够从 C 直接“弹出”回到 A 而根本看不到 B，无论多么短暂。我已经为上面的动画参数尝试了 YES/NO 的组合，还尝试了 popToRootViewControllerAnimated，但没有运气:-(

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:45:20.237

我拼凑了一个快速项目，使用以下代码似乎对我来说工作正常：

```
[self dismissViewControllerAnimated:YES completion:nil];
// Just a coincidence that this is the presenting VC rather than a regular UIViewController I think. 
UINavigationController *navController = (UINavigationController *)self.presentingViewController;
[navController popViewControllerAnimated:NO]; 
```

这是 Github 上的示例项目：[https ://github.com/MaxGabriel/iOSNavigationFlow](https://github.com/MaxGabriel/iOSNavigationFlow)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T07:14:53.047

```
[self.navigationController popViewControllerAnimated:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:48:06.543

你可以用下面的代码做你想做的事。首先，您 popToRootViewController 将控制器 B 从堆栈中取出，但不会更改视图，因为 C 的视图已启动。然后在 C 的视图下添加导航控制器的视图，使其位于视图层次结构中，但不可见。然后你做一个动画来向右滑动 C 的视图，最后你关闭模态视图控制器。我创建了一个属性 nav 来缩短输入时间，但这并不是必需的。此代码位于模态视图控制器的 .m 中

```
-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    self.nav = (UINavigationController *)self.presentingViewController;
}

-(IBAction)goBackToRoot: (UIButton *) sender {
    [self.nav popToRootViewControllerAnimated:NO];
    [self.view.window insertSubview:self.nav.view belowSubview:self.view];
    [UIView animateWithDuration:.6 animations:^{
        self.view.frame = CGRectMake(330, self.view.frame.origin.y, self.view.frame.size.width, self.view.frame.size.height);
    } completion:^(BOOL finished) {
        [self.nav dismissViewControllerAnimated:NO completion:nil];
    }];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T17:53:09.650

在 iOS 6 中，如果你使用 unwind segues，你不会得到那种奇怪的效果。在您想要跳回的视图控制器中，只需定义一个展开操作：

```
- (IBAction)home:(UIStoryboardSegue *)segue
{
    // if you need to do any UI update because we got an unwind segue
    // back to this controller, do that here
} 
```

然后在您呈现的视图控制器中（它可以向下多个级别）可以通过从将启动 segue 的按钮向下拖动到场景 Dock 中的“退出”图标来执行展开 segue。它将自动通过、识别和呈现具有展开操作的视图控制器，并呈现这些选择。

最终效果是您可以通过多个模态框和导航控制器跳回，而您只能获得一种动画效果。

同样，遗憾的是，这只是 iOS 6+。

# java - 共享调用和引用调用是否仅在多线程时有所不同？

> ID：13899171
> 
> 赞同：6
> 
> 时间：2012-12-16T06:33:33.260
> 
> 标签：java, evaluation-strategy

如果使用 调用函数`Call-by-Reference`，则对函数内部变量所做的任何更改都会立即影响调用者。而对于`Call-by-Sharing`，它在函数结束时受到影响。

**问题 1：** Java 使用`Call-by-Sharing`而不是`Call-by-Reference`?

**问题2：**我认为这`Call-by-Sharing`与`Call-by-Reference` **仅**在多线程时不同。创建它只是为了减少在其他线程中使用时对值的并发覆盖；提供一致性。我对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T03:12:26.297

我建议您不要使用“通过共享调用”的术语。正如[这篇维基百科文章](http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_sharing)所述：

> *“但是，‘共享调用’这个术语并不常用；这个术语在不同的来源中是不一致的。例如，在 Java 社区中，他们说 Java 是按值传递的，而在 Ruby 社区中，他们说 Ruby 是按引用传递[需要引用]，尽管这两种语言表现出相同的语义。共享调用意味着该语言中的值基于对象而不是原始类型。”*

和

> *“尽管这个术语在 Python 社区中广泛使用，但在 Java 和 Visual Basic 等其他语言中，相同的语义通常被描述为按值调用，其中的值被暗示为对对象的引用。”*

底线是 Java 使用“共享调用”......但他们不这么称呼它，如果您希望 Java 人理解您，您可能也不应该这样做。

* * *

> 我认为仅在多线程时，共享调用与引用调用不同。创建它只是为了减少在其他线程中使用时对值的并发覆盖；提供一致性。我对吗？

不，你不对。

在值是对象引用的情况下，“通过共享调用”实际上意味着“按值调用”。真正的“引用调用”意味着您（实际上）正在传递变量的地址，并且被调用的方法可以*更新*变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T08:22:26.877

众所周知，Java 是按值传递的（使用更常见的白话），但是由于将对象引用传递给方法允许该方法修改调用者范围内的对象这一事实引起了很多混淆（即，他们“共享”对象）。因此，有些人错误地认为 Java 是对非原始对象的传递引用。据我了解，说某事是“共享调用”只是清楚地表明我们传递的值是对对象的引用，而不是对象本身。

相比之下，像 R 这样的语言是按值传递的，但是将像向量这样的非基元作为深拷贝传递（在我收集的技术上是写时复制），这样在方法范围内对对象所做的更改不会修改调用者范围内的向量。

要具体回答您的两个问题，是的，Java 是“共享调用”，因为我从您链接的维基百科文章中了解到它。但是，我不同意您描述的共享调用和引用调用不同。一个区别是您不能编写一种方法来通过共享调用交换两个变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T14:24:24.413

在对象名称是对内存中对象的引用的语言中，当传递一个对象（对对象的引用）时，通过共享调用，引用被复制，实际参数和形式参数都将引用同一个对象. 这与按值调用或按引用调用有何不同...

所以对于极少数使用这个术语的人（即 Clu 程序员）来说，共享调用不同于按值调用，因为尽管我们确实将实参复制到了形参中，但它们都是引用；如果我们修改了形参所指的对象，程序在子程序返回后就可以通过实参看到这些变化。

Also note that during a call the value of the object can be altered, which makes it similar to call-by-reference, but it differs from call-by-reference since the reference to the object was copied so the *identity* of the object cannot be changed. Hence the original reference variable will still refer to the same object even after a "swap" routine that uses call-by-sharing.

# testing - 如何模拟 AJAX 请求？

> ID：13899176
> 
> 赞同：6
> 
> 时间：2012-12-16T06:34:46.367
> 
> 标签：testing, angularjs, jasmine, end-to-end

在端到端测试期间修改场景.js 以模拟 AJAX 请求的最简单方法是什么？

```
<!doctype html>
<html lang="en" ng-app="myApp">
<head>
  <meta charset="utf-8">
  <title>My Test AngularJS App</title>
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular-resource.min.js"></script>

  <script language="javascript" type="text/javascript">
      angular.module('myApp', ['ngResource']);
      function PlayerController($scope,$resource){
        $scope.player = $resource('player.json').get();
      }
    </script>

</head>
  <body ng-controller="PlayerController">
    <p>Hello {{player.name}}</p>
  </body>
</html> 
```

Player 从服务器上名为 player.json 的文件中正确获取，并且以下测试通过。如何将不同的 json 传递给此测试并防止获取回服务器？

```
/*
How do I pass in
player.json -> {"name":"Chris"}
*/
describe('my app', function() {

  beforeEach(function() {
    browser().navigateTo('../../app/index.html');
  });

  it('should load player from player.json', function() {
    expect(element('p:first').text()).
        toMatch("Hello Chris");
    pause();
  });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:38:02.010

您应该使用[ngMockE2E 模块中的 $httpBackend](http://docs.angularjs.org/api/ngMockE2E.%24httpBackend)来模拟 http 请求。看看文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T11:41:10.483

看来，目前您不能只修改场景.js 以包含 $httpBackend 模拟。您将不得不添加一些其他代码来支持它。

对我来说，最好的方法似乎是以下

在包含“ngMockE2E”的测试文件夹中添加一个 myAppTest.js，这样您就不需要污染现有的 app.js

```
'use strict';

angular.module('myAppTest', ['myApp', 'ngMockE2E'])
.run(function($httpBackend) {
    var user = {name: 'Sandra'};
    $httpBackend.whenGET('/api/user').respond(user); 
}); 
```

然后添加一个使用新的 myAppTest.js 的单独的 test-index.html。请注意，您需要包含 angular-mocks.js。（这会使您的生产 html 文件保持完整并且没有模拟）

```
<!doctype html>
<html lang="en" ng-app="myAppTest">
<head>
  <script src="lib/angular/angular.js"></script>
  <script src="lib/angular/angular-resource.js"></script>
  <script src="../test/lib/angular/angular-mocks.js"></script>
  <script src="js/app.js"></script>
  <script src="js/controllers.js"></script>
  <script src="../test/e2e/myAppTest.js"></script>
</head>
<body>
  <div ng-view></div>
</body>
</html> 
```

然后在你的场景.js 中，只需在运行其他测试之前引用你的新 test-index.html。

```
beforeEach(function() {
   browser().navigateTo('../../app/test-index.html#/');
}); 
```

我改编了这个例子：

[https://github.com/stephennancekivell/angular_e2e_http/tree/ngMockE2E](https://github.com/stephennancekivell/angular_e2e_http/tree/ngMockE2E)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T04:32:06.270

首先，将 angular-mocks.js 和您将在其中创建模块的文件（例如 app.js）添加到包含 ng-app 声明的 index.html 页面。

```
<html lang="en" ng-app="myApp">
  <head>
    <script src="js/app.js"></script>
    <script src="../test/lib/angular/angular-mocks.js"></script>
    ... 
```

然后在 app.js 文件中定义模块并添加模拟响应。

```
var myAppDev = angular.module('myApp', ['ngResource','ngMockE2E']);

myAppDev.run(function($httpBackend) {
    var user = {name: 'Sandra'};
    $httpBackend.whenGET('/api/user').respond(user); 
}); 
```

# java - readLine 设置

> ID：13899178
> 
> 赞同：0
> 
> 时间：2012-12-16T06:35:48.820
> 
> 标签：java, set, readline

编辑：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.util.HashSet;
import java.util.Set;

public class y {

    Set<String> setA = new HashSet<String>();

    Set<String> getSetA(BufferedReader br) throws IOException {
        String line;
        while ((line = br.readLine()) != null) {
            setA.add(line);

        } 
        br.close();
            Iterator<String> iter = setA.iterator();    
            while (iter.hasNext()) {
            System.out.println(iter.next());
            }
        return setA;

    }
} 
```

我尝试将文件的每一行读入 Set 的元素。但似乎只有 n 行被添加到集合中。println 只打印出整个文本中的第 n 行我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:43:21.973

用一段时间替换你的 if 。

```
while ((line = br.readLine()) != null) {
   setA.add(line);
} 
```

然后稍后

```
Iterator<String> iter = setA.iterator();    
while (iter.hasNext()) {
   System.out.println(iter.next());
} 
```

# jquery - jquery 适用于 webmatrix 但不适用于 VS 2008

> ID：13899180
> 
> 赞同：0
> 
> 时间：2012-12-16T06:36:21.957
> 
> 标签：jquery, visual-studio-2008, webmatrix-2

我在我的代码中下载并使用了一个 jQuery 图像滑块模板。我使用 WebMatrix 来设计我的网站。但有时我会迁移到 VS2008 来创建 ContactUs 表单等，我觉得使用 VS2008 更容易。

从 WebMatrix 运行时，滑块运行良好，但从 VS2008 运行时，我只是得到一个低于另一个的图像。我不明白，它运行相同的代码，相同的库，一切都是一样的，但是，为什么会出现这个问题？

下面是js源码路径。如果您还需要什么，请告诉我。谢谢！

```
 <script type="text/javascript" src="demo/scripts/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="../jquery.nivo.slider.js"></script>
<script type="text/javascript">
$(window).load(function() {
    $('#slider').nivoSlider();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-31T20:22:31.690

脚本文件引用也有类似的问题。发现这个来纠正问题：

```
<script type="text/javascript" src="@Href("~/demo/scripts/jquery-1.7.1.min.js")"></script>
<script type="text/javascript" src="@Href("~/jquery.nivo.slider.js")"></script> 
```

请参阅：在代码中使用文件和文件夹路径：[http ://www.asp.net/web-pages/tutorials/basics/2-introduction-to-asp-net-web-programming-using-the-razor-句法](http://www.asp.net/web-pages/tutorials/basics/2-introduction-to-asp-net-web-programming-using-the-razor-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T06:45:41.923

尝试使用这种方式：

```
<script type="text/javascript" src="demo/scripts/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="jquery.nivo.slider.js"></script>
 //                             ---^-------------------just removed the ../
<script type="text/javascript">
  $(window).load(function() {
    $('#slider').nivoSlider();
  });
</script> 
```

如果这有帮助，请尝试一次。

# javascript - 在 Windows 7 上安装 contextify 错误：`gyp` 失败，退出代码：2

> ID：13899187
> 
> 赞同：0
> 
> 时间：2012-12-16T06:37:43.533
> 
> 标签：javascript, python, node.js, npm, contextify

这是我跑步时得到的`npm install contextify`

```
npm http GET https://registry.npmjs.org/contextify
npm http 304 https://registry.npmjs.org/contextify
npm http GET https://registry.npmjs.org/bindings
npm http 304 https://registry.npmjs.org/bindings

> contextify@0.1.3 install C:\node_modules\myfolder\node_modules\contextify
> node-gyp rebuild

C:\node_modules\myfolder\node_modules\contextify>node "C:\Program Files\nodejs\node_
modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js" rebui
ld
python: can't open file 'C:\Users\Username\.node-gyp\0.8.16\tools\gyp\gyp': [Errn
o 2] No such file or directory
gyp ERR! configure error
gyp ERR! stack Error: `gyp` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onCpExit (C:\Program Files\nodejs\node_module
s\npm\node_modules\node-gyp\lib\configure.js:395:16)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:99:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:678:10)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command "node" "C:\\Program Files\\nodejs\\node_modules\\npm\\node_modu
les\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd C:\node_modules\myfolder\node_modules\contextify
gyp ERR! node -v v0.8.16
gyp ERR! node-gyp -v v0.7.3
gyp ERR! not ok
npm ERR! contextify@0.1.3 install: `node-gyp rebuild`
npm ERR! `cmd "/c" "node-gyp rebuild"` failed with 1
npm ERR!
npm ERR! Failed at the contextify@0.1.3 install script.
npm ERR! This is most likely a problem with the contextify package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls contextify
npm ERR! There is likely additional logging output above.

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "contextify"
npm ERR! cwd C:\node_modules\myfolder
npm ERR! node -v v0.8.16
npm ERR! npm -v 1.1.69
npm ERR! code ELIFECYCLE
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\node_modules\myfolder\npm-debug.log
npm ERR! not ok code 0 
```

我有 node x64 v0.8.16 和 node-gyp v0.8.1

我有 Python 2.7.3、.Net Framework 4、Microsoft Visual Studio C++ 2010 Express、Windows 7 64 位 SDK 和 Microsoft Visual C++ 2010 Service Pack 1 编译器。

我已经重新启动了我的电脑。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T03:18:53.947

尝试安装 node-gyp

```
npm install -g node-gyp 
```

还有你安装了什么版本的python我相信你需要2.7

# php - 如何使用 opencart 将一些变量发布到文件中？

> ID：13899193
> 
> 赞同：2
> 
> 时间：2012-12-16T06:38:49.573
> 
> 标签：php, jquery, opencart

我在 opencart 中发布变量时遇到了一些问题。我要做的是从结帐/登录页面上的文本字段中获取两个变量，称为名称和地址。我希望在单击继续按钮时存储输入这两个字段的值，然后将其发送到结帐/访客页面，我想在其中回显这些变量。这是我所做的：

这是我的 checkout.tpl 文件，我试图将名称和地址变量发送到结帐/访客页面，特别是接收方法：

```
$('#button-account').live('click', function() {
  var name = $('#name').val();
  var address = $('#address').val();
  $.post('index.php?route=checkout/guest/receive', { name: name, address: address}); 
```

});

然后在 guest.php 控制器文件中，我收到发布的变量，并将它们存储在名为名称和地址的 2 个变量中：

```
public function receive() {
$name = $this->request->post['name'];
$address = $this->request->post['address'];
} 
```

然后在 guest.tpl 文件中，我将它们回显：

```
<?php
echo $name;
echo $address;
?> 
```

当我加载访客页面时，我收到以下错误消息：注意：未定义变量：第 13 行 C:\xampp\htdocs\catalog\view\theme\default\template\checkout\guest.tpl 中的名称 注意：未定义变量: 第 14 行 C:\xampp\htdocs\catalog\view\theme\default\template\checkout\guest.tpl 中的地址。

如果有人能告诉我如何使这段代码工作，我将不胜感激。据我所知，变量要么没有被发送到正确的位置，要么我没有在 guest.php 页面上正确访问它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T09:45:56.600

首先 - 我不明白你为什么要发布一些`name`和`address`从`checkout/login`页面，因为默认情况下没有这样的字段，除非你添加了它们。

无论如何，在这种情况下，我会以这种方式进行 -`receive()`像您一样通过 AJAX 发布到方法。在这里，我会将变量保存到会话中：

```
public function receive() {
    $this->session->data['guest_name'] = $this->request->post['name'];
    $this->session->data['guest_address'] = $this->request->post['address'];
} 
```

现在在`catalog/controller/checkout/guest.php`方法中`index`检查该会话变量，如果设置，将值存储在`$this->data`数组中以呈现给模板：

```
if(isset($this->session->data['guest_name'])) { // it is enough to check only for one variable and only if it is set
    $this->data['guest_name'] = $this->session->data['guest_name'];
    $this->data['guest_address'] = $this->session->data['guest_address'];
} 
```

之后，您可以简单地在您的模板中回显这些值（仍在检查是否存在）：

```
<?php if(isset($guest_name)) { ?>
<div><?php echo $guest_name . ' - ' . $guest_address; ?></div>
<?php } ?> 
```

现在你应该在避免任何`undefined variable`通知的同时完成......

# php - 数组中的最大索引

> ID：13899195
> 
> 赞同：-3
> 
> 时间：2012-12-16T06:39:28.523
> 
> 标签：php, mysql, arrays, max

我有这个数组：

```
$number= array(

                array([0]=>2,[1]=>2)
                array([0]=>2,[1]=>2,[2]=>2,[3]=>2)
                array([0]=>2,[1]=>2,[2]=>2)
                array([0]=>2,[1]=>2)
) 
```

我想要这个数组中的最大索引。因为这个数组是 4。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T06:46:34.873

你可能是这个意思：

```
echo max(array_map('count', $number)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T06:45:34.687

编写一个遍历数组的循环。对于数组中的每个数组，获取该数组中的元素数，如果它大于迄今为止的最大值（例如`$max`），则设置`$max`为元素数。然后，当您完成对数组的循环时，`$max`就有了答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T06:43:51.143

使用 count() 函数：

```
$max = count($number); // returns 4 
```

**更新**

你的问题不够清楚。提供的评论和答案表明您想要获取数组中存在的元素数量，这些元素的元素多于数组中的其他`$number`数组。在这种情况下，[`@xdazz`](https://stackoverflow.com/users/762073/xdazz)答案是最适合您的。`$number`像这样编写数组会更好、更正确：

```
$number = array(
    array(1, 2),
    array(1, 2, 3, 4, 5),
    array(1, 2, 3),
    array(1, 2)
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T06:53:52.300

**此代码经过测试并适用于您的数组**。当然，带有计数函数的 array_map 是维度 1 最大计数的最佳解决方案

```
<?php
    $number= array(

                    array(0=>2,1=>2),
                    array(0=>2,1=>2,2=>2,3=>2),
                    array(0=>2,1=>2,2=>2),
                    array(0=>2,1=>2),
    );

    $ak = array_values($number);
    for($i;$i<count($number);$i++){
    $c[] = count($ak[$i]);
    }
    echo max($c);
    ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T07:12:04.470

您可以尝试以下代码：

```
$data = array(
    "apples" =>
        array("red", "yellow", "pineapples","enam"),
    "bananas" =>
        array("small", "medium", "big","enam","enam"),
    "vegs" =>
        array("potatoes", "carrots", "onions")
);

foreach($data as $in_arr){
    $count = count($in_arr);
    if($count>$max)$max = $count;
}
echo "The max:".$max; 
```

# php - shell_exec 解压文件大小限制

> ID：13899198
> 
> 赞同：0
> 
> 时间：2012-12-16T06:40:29.340
> 
> 标签：php, linux, curl, shell-exec

我正在使用下面的代码从另一台服务器下载一个包含 1,000 多个图像的 zip 文件。源 zip 文件正在下载并创建/复制到我的服务器，但代码似乎在此时停止。下面 if else 的回声输出甚至不显示。

我最初将 CURLOPT_TIMEOUT 设置为 240，但这还不够长。我会收到 curl 超时错误。由于 zip 文件接近 100MB，我认为大约需要 15 分钟才能完成。所以我将 CURLOPT_TIMEOUT 设置为 1200，因为源 zip 大小每天都会变化。

关于它为什么停止工作的任何想法？是否有需要更改的设置？

```
$source_photos_file = 'source_photos_file.zip';
$curl = curl_init();
$destination_photos_file = fopen($_SERVER['DOCUMENT_ROOT'].'/files/photos.zip', 'w');

curl_setopt($curl, CURLOPT_URL, FTP_URL.$source_photos_file); #input
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($curl, CURLOPT_TIMEOUT, 1200);
curl_setopt($curl, CURLOPT_FILE, $destination_photos_file); #output

if (curl_exec($curl) === false)
{
    echo '<p>Curl error: ' . curl_error($curl). ' - error # '.curl_errno($curl).'</p>';
}
else
{
    echo '<p>Done without any errors</p>';
}

curl_close($curl);
fclose($destination_photos_file);

$photos_unzip_result = shell_exec('unzip -P password '.$_SERVER['DOCUMENT_ROOT'].'/files/photos.zip -d '.$_SERVER['DOCUMENT_ROOT'].'/files/pics_test/'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T06:57:38.500

仔细看看你在这里实际做了什么。除了基本的故障排除（例如最高级别的错误日志记录并遵循错误日志），看看您实际做了什么：

```
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); 
```

你明确告诉 curl 返回下载，这意味着它被复制到内存中。禁用该选项，尤其是当您已经指定了输出文件时。

我不能说这是否能解决您的问题，但我希望这会有所帮助。进行正确的错误记录并提供具体的错误信息，如通知、警告和错误。

# c# - 找不到请求的 .Net Framework 数据提供程序。它可能没有安装。vs 2010 和 sql server 2008 express

> ID：13899200
> 
> 赞同：8
> 
> 时间：2012-12-16T06:40:44.933
> 
> 标签：c#, visual-studio-2010

在 VS 2010 中，我使用以下步骤连接到 SQL Server 数据库：

1.  在服务器资源管理器窗口中，右键单击数据连接
2.  单击添加连接
3.  在选择数据源窗口中，选择 SQL Server
4.  点击继续，按钮
5.  将出现“添加连接”窗口
6.  在服务器名称文本框中键入“.\sqlexpress”
7.  在选择或输入数据库名称类型“人”
8.  单击测试连接——我看到“测试连接成功”
9.  最后点击确定按钮

在第 9 步，我看到此错误：“无法找到请求的 .Net Framework 数据提供程序，它可能未安装”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T07:19:04.260

**machine.config**文件中有一个自终止节点。**删除它**解决了这个问题。

**machine.config 位于**

```
\Windows\Microsoft.net\Framework\vXXXX\machine.config 
```

根据安装的框架版本数，您可能拥有大量配置文件，包括 32 位和 64 位变体。

```
<system.data>
    <DbProviderFactories>
        <add name="Odbc Data Provider" invariant="System.Data.Odbc" ... />
        <add name="OleDb Data Provider" invariant="System.Data.OleDb" ... />
        <add name="OracleClient Data Provider" invariant="System.Data ... />
        <add name="SqlClient Data Provider" invariant="System.Data ... />
        <add name="IBM DB2 for i .NET Provider" invariant="IBM.Data ... />
        <add name="Microsoft SQL Server Compact Data Provider" ... />     
    </DbProviderFactories>

    <DbProviderFactories/>  //remove this one
</system.data> 
```

上面的文件删除 `<DbProviderFactories/>`空标签。

附加阅读[**获取 DbProviderFactory (ADO.NET)**](http://msdn.microsoft.com/en-us/library/dd0w4a2z%28v=vs.90%29.aspx)

我希望这对你有帮助。

# session - 如果会话为空，如何重定向到登录页面

> ID：13899203
> 
> 赞同：0
> 
> 时间：2012-12-16T06:41:03.233
> 
> 标签：session, yii

如果会话在使用 Yii 框架的应用程序级别为空，我想重定向到登录页面。它应该适用于除登录页面之外的所有页面。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:25:40.847

最好的方法是修改**Controller**基类（*protected/components/Controller.php*）。您可以添加一个`init()`函数，该函数将在每次 Controller 调用时执行，例如：

```
public function init(){
    if(!isset($_SESSION['mysession'])){
        this->redirect("site/login");
    }
} 
```

您可以通过以下方式访问当前控制器：

```
Yii::app()->controller->id 
```

但是您不能在 init 函数中访问 Action（通常您可以使用`Yii::app()->controller->action->id`）。最简单的方法可能是检查 URL，例如：

```
if ($_SERVER['REQUEST_URI'] == "/site/login"){
    // it's the login page
} 
```

`$_SERVER['REQUEST_URI']`如果您在子文件夹中的本地主机上工作，您可能需要在比较之前编辑，例如：

```
$url = str_replace("/mysubfloder","",$_SERVER['REQUEST_URI']); 
```

然后与之比较。也可能最好检查字符串中的*index.php*。

我假设您正在使用它来使非登录用户无法访问某些页面？如果是这种情况，你真的应该使用`accessRules`. [阅读更多关于这里](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth)

# c++ - 0xC0000005：调用 CopyMemory() 后访问冲突

> ID：13899209
> 
> 赞同：1
> 
> 时间：2012-12-16T06:41:29.753
> 
> 标签：c++, winapi, visual-c++, memory-management

当我取消注释创建位图的代码行时，我遇到了第一次机会异常错误。我以与我制作的其他 sprite 相同的方式创建了这个 spritesheet BMP。错误信息是这样的：

```
First-chance exception at 0x004788ca in HenwayRevamped.exe: 0xC0000005: Access violation writing location 0x02224000. 
```

我正在运行基于 Michael Morrison 的 GameEngine 类构建的游戏。我已经对这个错误进行了几个小时的研究，包括许多 StackOverflow 线程和[这个方便的站点](http://www.nobugs.org/developer/win32/debug_crt_heap.html)，但我仍然不确定问题是什么。这是**函数调用**：

```
// Create a bitmap from a resource
Bitmap::Bitmap(HDC hDC, UINT uiResID, HINSTANCE hInstance)
  : m_hBitmap(NULL), m_iWidth(0), m_iHeight(0)
{
  Create(hDC, uiResID, hInstance);
} 
```

这是**功能**：

```
BOOL Bitmap::Create(HDC hDC, UINT uiResID, HINSTANCE hInstance)
{
  // Free any previous DIB info
  Free();

  // Find the bitmap resource
  HRSRC hResInfo = FindResource(hInstance, MAKEINTRESOURCE(uiResID), RT_BITMAP);
  if (hResInfo == NULL)
    return FALSE;

  // Load the bitmap resource
  HGLOBAL hMemBitmap = LoadResource(hInstance, hResInfo);
  if (hMemBitmap == NULL)
    return FALSE;

  // Lock the resource and access the entire bitmap image
  PBYTE pBitmapImage = (BYTE*)LockResource(hMemBitmap);
  if (pBitmapImage == NULL)
  {
    FreeResource(hMemBitmap);
    return FALSE;
  }

  // Store the width and height of the bitmap
  BITMAPINFO* pBitmapInfo = (BITMAPINFO*)pBitmapImage;
  m_iWidth = (int)pBitmapInfo->bmiHeader.biWidth;
  m_iHeight = (int)pBitmapInfo->bmiHeader.biHeight;

  // Get a handle to the bitmap and copy the image bits
  PBYTE pBitmapBits;
  m_hBitmap = CreateDIBSection(hDC, pBitmapInfo, DIB_RGB_COLORS,
    (PVOID*)&pBitmapBits, NULL, 0);
  if ((m_hBitmap != NULL) && (pBitmapBits != NULL))
  {
    const PBYTE pTempBits = pBitmapImage + pBitmapInfo->bmiHeader.biSize +
      pBitmapInfo->bmiHeader.biClrUsed * sizeof(RGBQUAD);

    CopyMemory(pBitmapBits, pTempBits, pBitmapInfo->bmiHeader.biSizeImage);

    // Unlock and free the bitmap graphics object
    UnlockResource(hMemBitmap);
    FreeResource(hMemBitmap);
    return TRUE;
  }

  // Something went wrong, so cleanup everything
  UnlockResource(hMemBitmap);
  FreeResource(hMemBitmap);
  Free();
  return FALSE;
} 
```

另外，这是我的带有本地窗口的 IDE 的**屏幕截图**。装订线中的绿色箭头图标指向引发异常的行：

[图片由 ImageShack.us 托管 http://imageshack.us/a/img341/7678/20121216010703am.png](http://imageshack.us/a/img341/7678/20121216010703am.png)

是我的设备上下文有问题吗？hDC 变量下的红色感叹号图标看起来可能指向问题，但它分配了一个句柄，所以我不确定。我已经没有想法了，正在求助于大师。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:19:22.887

访问冲突发生在写入时，这表明您超出了目标缓冲区。有许多不同类型的位图格式，因此很难计算出正确的缓冲区大小。您的代码确实适用于一些位图，所以我怀疑您对位深度、颜色表大小、对齐方式或这些方面的东西有一个错误的假设。

只要有可能，您不妨让 Windows 来完成这项工作：

```
 BOOL Bitmap::Create2(UINT uiResID, HINSTANCE hInstance) {
        BOOL bSuccess = FALSE;
        Free();
        m_hBitmap = reinterpret_cast<HBITMAP>(
            ::LoadImage(hInstance, MAKEINTRESOURCE(uiResID), IMAGE_BITMAP,
                        0, 0, LR_CREATEDIBSECTION));
        if (m_hBitmap != NULL) {
            BITMAP bmp;
            if (::GetObject(m_hBitmap, sizeof(bmp), &bmp) == sizeof(bmp)) {
                m_iWidth = bmp.bmWidth;
                m_iHeight = bmp.bmHeight;
                bSuccess = TRUE;
            }
        }
        return bSuccess;
    } 
```

这应该适用于所有有效的位图。请注意，您不再需要将句柄传递给 DC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T06:52:00.803

第一次机会异常通常不需要担心，除非您更改了某些设置，否则调试器不应停止它们。未处理的异常是一个实际问题，其中存在应用程序未捕获和处理的异常。

如果调试器在发生时中断，您可以更改异常设置以防止将来发生这种情况，或者您可以继续查看它是否会变成未处理的异常。

有关第一次机会与第二次机会的更多信息：http: [//support.microsoft.com/kb/105675](http://support.microsoft.com/kb/105675)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-16T15:46:43.983

多亏了 Roman 的洞察力，我才能想出这个可以正常编译和工作的解决方法。如果我得到其他图像的更多异常，我将创建一个数组并遍历它，但这目前有效：

```
/*  This causes strange black lines at the top of some sprites. Pixel bleeding?
    if(pBitmapInfo->bmiHeader.biSizeImage > neededBytes )
        CopyMemory(pBitmapBits, pTempBits, neededBytes);
    else
        CopyMemory(pBitmapBits, pTempBits, pBitmapInfo->bmiHeader.biSizeImage);
    */

    //workaround for powerup sprite
    if(pBitmapInfo->bmiHeader.biSizeImage == 294914 )
        CopyMemory(pBitmapBits, pTempBits, neededBytes);
    else
        CopyMemory(pBitmapBits, pTempBits, pBitmapInfo->bmiHeader.biSizeImage); 
```

# jquery - 无论我做什么，CSS宽度都不会改变

> ID：13899211
> 
> 赞同：1
> 
> 时间：2012-12-16T06:41:38.567
> 
> 标签：jquery, css, responsive-design

这是有问题的网站：

[http://harrisonfjord.com/folio/](http://harrisonfjord.com/folio/)

**问题**

该站点运行良好（使用 swipe.js 来处理滑块），但是一旦您将窗口大小调整到低于 380 像素左右，整个事情就会中断。（尝试调整窗口大小，然后向右移动 1 或 2 张幻灯片）。

我一生都无法弄清楚这是为什么。我的所有媒体查询都不会影响窗口大小，并且看起来包含的`<li>`元素不能低于 352 像素。如果我将它们设置为`width: 180px !important;`它仍然保持在 352 像素！

我完全被难住了。关于是什么导致这些问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:09:20.953

该站点似乎在 IE 8 中完全被破坏。Internet Explorer 的一些问题是由于它处于“怪癖模式”而引起的（请参阅[http://en.wikipedia.org/wiki/Quirks_mode](http://en.wikipedia.org/wiki/Quirks_mode)）。通过确保设置了文档类型并且在文档类型之前没有发生任何事情，我的网站开始按预期工作。

# android - 我可以在android中更改OptionsMenu的默认视图吗

> ID：13899215
> 
> 赞同：0
> 
> 时间：2012-12-16T06:42:46.060
> 
> 标签：android

安卓 2.3.3

我有一个选项菜单。其中有 5 - 6 个（尚未完全确定）项目。

OptionsMenu 的默认视图

1 2 3

4 5 6

我可以更改它，以便它们一个接一个地出现，每行有 1 个项目吗？

如果是，请告诉我如何。

如果不是，为什么？（它是一个标准，不能改变吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:48:07.830

> 我可以更改它，以便它们一个接一个地出现，每行有 1 个项目吗？

反正我不知道要像这样更改内置的选项菜单。

溢出选项菜单正是您想要的（在菜单中添加第 7 项并单击“更多”以查看它。）但是您不能单独使用溢出菜单，您必须先拥有常规菜单...

您可以设计自己的菜单，但这可能很复杂并且需要大量工作。

# android - 在android中使用gdata api

> ID：13899217
> 
> 赞同：1
> 
> 时间：2012-12-16T06:42:54.900
> 
> 标签：android, api, google-api

我正在开发一个需要访问谷歌电子表格的安卓应用程序。我已尝试按照 [https://developers.google.com/google-apps/spreadsheets/?hl=de-DE#setting_up_your_client_library](https://developers.google.com/google-apps/spreadsheets/?hl=de-DE#setting_up_your_client_library)上的说明进行操作， 但不起作用。我也尝试过在 [https://code.google.com/p/google-spreadsheet-lib-android/](https://code.google.com/p/google-spreadsheet-lib-android/)使用 API， 但它似乎没有一个简单的例子。有人可以帮我用一种简单的方法从android访问谷歌电子表格数据吗？谢谢

# facebook - 从 7 月 12 日起，Feed 对话框中是否已弃用预填充消息以进行共享？

> ID：13899219
> 
> 赞同：1
> 
> 时间：2012-12-16T06:43:04.323
> 
> 标签：facebook, dialog, feed, sharing

我刚刚在我的应用程序中实现了提要对话框，用于在 facebook 上共享活动。我的要求是在共享时在提要对话框中预先填写一些消息。但是，从 7 月 12 日起，Facebook 确实已弃用提要对话框中的预填充消息。请确认消息并提出解决方案，以解决如何获取“预填充消息”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:27:16.467

> 请确认消息并提出解决方案如何获取“预填充消息”。

“消息”？哈哈。

如果您不使用提要对话框，而是使用 API 发布，则只能这样做。

但[平台政策](https://developers.facebook.com/policy/)规定，您不得发布任何未经用户自己事先输入的文本（*IV. 应用程序集成点，2.*）。

给他们一个预填充的文本框，他们可以在其中编辑给定的消息，然后再将其提交到您的应用程序，这将是一个灰色区域。但你也应该记住，如果许多用户提交相同的、未更改的消息，而你代表他们将其发布到他们的时间线，Facebook 的算法很可能会很容易地检测到这一点——因此你的帖子的分发可能会受到限制。

# bash - sed 正则表达式在 solaris 上替换

> ID：13899225
> 
> 赞同：0
> 
> 时间：2012-12-16T06:43:41.233
> 
> 标签：bash, shell, unix, sed, solaris

我有一个包含以下内容的文件 dummy.txt：

```
"my_server"\1\"n9j7gd8kl4"
"widget"\1\"vnhck67hn"
"other_server"\1\"tbone"
"blah"\1\"n9j7gd8kl4"
"server_new"\1\"g54"
"genserver"\1\"vf45s"
"prd+other_server"\1\"f"\"jh34t"
"test_blah"\1\"tbone" 
```

我需要在 Solaris 中使用类似通用的单线将其更改为此（有人可以帮忙吗？）：

```
"my_server"\1\"tbone"
"widget"\1\"vnhck67hn"
"other_server"\1\"tbone"
"blah"\1\"n9j7gd8kl4"
"server_new"\1\"tbone"
"genserver"\1\"tbone"
"prd+other_server"\1\"f"\"jh34t"
"test_blah"\1\"tbone" 
```

IE。对于在第一个双引号中包含字符串 'server' 且行格式为 "string1"\1\"string2" 的每一行，然后将 string2 的值更改为 'tbone'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T07:20:54.573

```
sed 's/^\("[^"]*server[^"]*"\\1\\\)".*"$/\1"tbone"/' 
```

这允许 'server' 出现在第一个字符串中的任何位置，而不仅仅是在所有示例中的末尾。如果你只想要它在最后，省略第二个`[^"]*`。

哦，要处理“没有双引号或反斜杠”的要求：

```
sed 's/^\("[^\\"]*server[^\\"]*"\\1\\\)"[^\\"]*"$/\1"tbone"/' 
```

不同之处在于否定字符类中的反斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:28:11.177

```
cat dummy.txt | perl -pe 's{ ^ (" [^"\\]* server [^"\\]* " \\1 \\") [^"\\]+ " $}{${1}tbone"}xms;' 
```

Perl 版本的可读性稍强一些。

# android - Android：如何更改 ListView 中一项的颜色？

> ID：13899227
> 
> 赞同：2
> 
> 时间：2012-12-16T06:44:04.650
> 
> 标签：android, listview, adapter

我重写 SimpleAdapter：

```
class NoticelistAdapter extends SimpleAdapter
 {
    public NoticelistAdapter(Context context,
            List<? extends Map<String, ?>> data, int resource,
            String[] from, int[] to)
    {
        super(context, data, resource, from, to);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        Map<String,Object> map= list.get(position);
        int readState =  (Integer) map.get("ReadState");
        if (readState == 1)
        {
            // do something to change the color of title
        }
        return convertView;
    }
 } 
```

适配器是：

```
adapter = new NoticelistAdapter(NoticelistActivity.this, list, R.layout.row_noticelist,
                                    new String[] { "Title", "RealName","Date"}, 
                                    new int[] { R.id.noticetitle, R.id.noticerealname,R.id.noticedate}); 
```

每个映射中都有一个名为“readstate”的int参数，如果readstate == 1，那么我想将“Title”（TextView）的颜色更改为另一种颜色。我知道我应该在我的适配器中覆盖 getView(...)，但我不知道该怎么做。请你帮帮我。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T07:04:50.883

覆盖适配器`getItemViewType()`以返回两个不同的布局标志，并覆盖`getViewTypeCount()`以返回视图数。然后根据标志，将行布局设置为`getView()`：

```
 private static final int TYPE_READ = 0;
 private static final int TYPE_NON_READ = 1;
 private static final int TYPE_MAX_COUNT = TYPE_NON_READ + 1;
 //...

    @Override
    public int getItemViewType(int position) {
         int readState =  (Integer) mMap.get("ReadState");
        if(readState==1){
           return TYPE_READ;
        }else{
           return TYPE_NON_READ;
        }

    @Override
    public int getViewTypeCount() {
        return TYPE_MAX_COUNT;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;
        int type = getItemViewType(position);

        if (convertView == null) {
            holder = new ViewHolder();
            switch (type) {
                case TYPE_READ:
                    convertView = mInflater.inflate(R.layout.item_one, null);
                    //set read layout
                    break;
                case TYPE_NON_READ:
                    convertView = mInflater.inflate(R.layout.item_two, null);
                    // set non-read layout
                    break;
            }
    //etc 
```

这是一个[完整的教程](http://android.amberfog.com/?p=296)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T06:59:04.257

在获取视图方法中。检查职位。如果 poistion==row0 然后使用 drawable 设置背景颜色。您可以自定义样式每个列表视图行也与行边框。 [http://docs.xamarin.com/Android/Guides/User_Interface/Working_with_ListViews_and_Adapters/Part_3_-_Customizing_a_ListView](http://docs.xamarin.com/Android/Guides/User_Interface/Working_with_ListViews_and_Adapters/Part_3_-_Customizing_a_ListView) 's_Appearance。该链接将为您提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T06:48:25.450

正如您所说，您在创建时为列表视图使用了自定义适配器，然后您需要做的如下。在适配器的 getView 方法中，您需要设置列表行 xml 的父视图的背景颜色。您还可以根据您的要求更改每一行的颜色。

请参阅此[如何为列表视图中的每一行设置不同的背景颜色？](https://stackoverflow.com/questions/10479108/how-can-i-set-differnt-background-color-for-each-row-in-listview)

# vim - 如何阻止 Vim 自动突出显示我的 Java 注释的第一句？

> ID：13899239
> 
> 赞同：3
> 
> 时间：2012-12-16T06:45:41.297
> 
> 标签：vim, javadoc

当我在我的代码中编写 JavaDoc 风格的注释时，Vim 会特别突出它们的第一句话：

![在此处输入图像描述](../Images/f06a93594976726ebcc85113fa5e481e.png)

为什么会这样？无论我使用什么颜色方案都会出现问题，所以我假设它与我的 java.vim 文件有关，但我从未修改过它或任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:11:04.310

就像*jackrabbit*所说，Javadoc 注释中的第一句话很特别。Vim 会为您突出显示它，以便您清楚地看到生成文档中将用作注释摘要的内容。不过，如果它困扰您，您可以通过`java_ignore_javadoc`在 vimrc 文件中定义来禁用 Javadoc 突出显示。

```
let java_ignore_javadoc=1 
```

# android - 为什么我只在请求 xml 文件时得到？安卓

> ID：13899241
> 
> 赞同：0
> 
> 时间：2012-12-16T06:45:51.877
> 
> 标签：android, xml

我正在使用这种方法从远程服务器获取 xml 文件，我使用另一个解析器类对其进行解析，并且解析成功。但是，当我`Log.d("get xml", xml)`用来检查 xml 文件的内容时，它只显示`<?xml version="1.0" standalone="no"?>`在 logCat 中。为什么？

```
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        if(httpPost != null){
            Log.d("httpPost", "httpPost not null");
        }
        HttpResponse httpResponse = httpClient.execute(httpPost);
        if(httpResponse != null){
            Log.d("httpResponse", "httpResponse not null");
        }
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    Log.d("get xml", xml);
    if(xml!=null){
        Log.d("get http client", "get http client not null");
    }
    return xml;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:02:34.273

我认为问题不在于请求，而在于 LogCat 中的输出。分别记录每一行获得所需的完整响应！。

因此，通过在调试模式下应用断点来检查这一点。可能对你有帮助。

# javascript - 将缩放限制在 d3.js 中的窗口内

> ID：13899251
> 
> 赞同：1
> 
> 时间：2012-12-16T06:48:20.833
> 
> 标签：javascript, jquery, svg, d3.js

我正在使用这个例子： [http ://bl.ocks.org/d/2206590/](http://bl.ocks.org/d/2206590/)

缩放功能在 Chrome 和 Firefox 中的 svg 文件的边界内进行缩放。

但是在 IE 中，它覆盖了整个窗口，当地图缩放时，基本上使页面的其余部分无用。

有没有办法强制和限制缩放在 IE 的窗口内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:31:15.617

好的，就像添加一个 div 并将 SVG 放入其中一样简单。:( 很抱歉在真正尝试完全解决之前提出问题。

# html - 将 Rails 视图重构为 DRY

> ID：13899254
> 
> 赞同：1
> 
> 时间：2012-12-16T06:49:46.957
> 
> 标签：html, ruby, ruby-on-rails-3.1, refactoring, views

我不确定这个标题是否代表了我的实际问题，但由于我对编程比较陌生，所以这是我能想到的最好的。让我知道你是否有更好的东西？

我想重构我当前的视图，使其更易于管理并与 DRY 方法保持一致。

我的观点：

```
 <div class="row">
        <div class="span8">
        <% @photos.each_with_index do |photo, index| %>
          <% if index == 0 %>
          <!-- <h1><%= photo.title %></h1> -->
            <img src="<%= photo.image_url.to_s %>">
          <% end %>
        <% end %>
        </div>

        <div class="span4">
        <% @photos.each_with_index do |photo, index| %>
          <% if index == 2 %>
          <!-- <h1><%= photo.title %></h1> -->
          <img src="<%= photo.image_url.to_s %>">
          <% end %>
        <% end %>
        </div>

        <div class="span4">
        <% @photos.each_with_index do |photo, index| %>
          <% if index == 3 %>
          <!-- <h1><%= photo.title %></h1> -->
          <img src="<%= photo.image_url.to_s %>">
          <% end %>
        <% end %>
        </div>
      </div><!--/.row -->

      <div class="row">
        <div class="span8 pull-right">
        <% @photos.each_with_index do |photo, index| %>
          <% if index == 4 %>
          <!-- <h1><%= photo.title %></h1> -->
            <img src="<%= photo.image_url.to_s %>">
          <% end %>
        <% end %>
        </div>

       <div class="span4">
        <% @photos.each_with_index do |photo, index| %>
          <% if index == 2 %>
          <!-- <h1><%= photo.title %></h1> -->
          <img src="<%= photo.image_url.to_s %>">
          <% end %>
        <% end %>
        </div>

        <div class="span4">
        <% @photos.each_with_index do |photo, index| %>
          <% if index == 3 %>
          <!-- <h1><%= photo.title %></h1> -->
          <img src="<%= photo.image_url.to_s %>">
          <% end %>
        <% end %>
        </div>
      </div><!--/.row --> 
```

我的控制器：

```
 def index
    if params[:tag]
      @photos = Photo.tagged_with(params[:tag])
    else  
      @photos = Photo.order("created_at DESC")
    end

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @photos }
    end
  end 
```

如果我只是想展示几张照片，这不是问题。但是，由于此视图本质上是上传的每张照片的提要，因此很快就会变得难以管理。尤其是当我必须参考 100/1000/10,000 张照片及其索引时。有没有更好的方法来重构这个视图？请记住不断变化的 span8、span4、span4，然后将它们反转为 span4、span4、span8 等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:23:29.893

试试这个：

```
<% @photos.each_with_index do |photo, index| %>
  <div class="row">
    <div class="span<%= cycle(8, 4, 4) %>">
      <!-- <h1><%= photo.title %></h1> -->
      <img src="<%= photo.image_url.to_s %>">
    </div>
  </div>
<% end %> 
```

# ios - 全局队列和用户队列有什么区别？

> ID：13899259
> 
> 赞同：8
> 
> 时间：2012-12-16T06:51:17.420
> 
> 标签：ios, grand-central-dispatch

> **可能重复：**
> [dispatch_get_global_queue 和 dispatch_queue_create 有什么区别？](https://stackoverflow.com/questions/10984885/what-is-the-difference-between-dispatch-get-global-queue-and-dispatch-queue-crea)

我看到一些使用 gcd 的方法，但其中一些可能会这样做：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);
dispatch_async(queue, ^{

    dispatch_sync(dispatch_get_main_queue(), ^{

    });
}); 
```

但其他人可能会这样做：

```
imageQueue_ = dispatch_queue_create("com.company.app.imageQueue", NULL);
dispatch_async(imageQueue_, ^{
        dispatch_async(dispatch_get_main_queue(), ^{

        });
    }); 
```

有什么区别？如果我想从网上下载很多图片，哪个更好？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-16T07:17:49.660

将队列概念化的最好方法是首先意识到在非常低的级别上，只有两种类型的队列：串行和并发。

**串行队列**是一夫一妻制的，但未提交。如果你给每个串行队列分配一堆任务，它将一次运行一个，一次只使用一个线程。未提交的方面是串行队列可能会在任务*之间切换到不同的线程。*串行队列总是在执行下一个任务之前等待一个任务完成。因此，任务按 FIFO 顺序完成。您可以根据需要创建任意数量的串行队列。

主**队列**是一个特殊的串行队列。与其他未提交的串行队列不同，因为它们“约会”许多线程但一次只“约会”一个，主队列与主线程“结婚”并且所有任务都在其上执行。主队列与主线程的运行循环表现得很好，因此小操作不会阻塞 UI 和其他重要位。像所有串行队列一样，任务按 FIFO 顺序完成。

如果串行队列是一夫一妻制的，那么**并发队列**是混杂的。他们会将任务提交到任何可用的线程，甚至根据系统负载创建新线程。他们可以在不同的线程上同时执行多个任务。重要的是提交到全局队列的任务是线程安全的并尽量减少副作用。任务按 FIFO 顺序提交执行，但不保证完成顺序。

带回来，所有全局队列都是**并发**的，所有用户队列默认都是**串行**的，除非将其定义为并发。

如果您的目标是下载图像，您可能需要一个串行（用户）队列。下载图像更多的是带宽问题。您通常一次只想做一个（或几个）。

编辑：扩展上述答案的博客文章：http: [//amattn.com/2013/08/28/grand_central_dispatch_gcd_summary_syntax_best_practices.html](http://amattn.com/2013/08/28/grand_central_dispatch_gcd_summary_syntax_best_practices.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T07:08:59.983

如果您使用`dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);`GCD 将自动创建足够的线程来处理作业，并尽可能使用多个内核。

另一方面，如果你使用`imageQueue_ = dispatch_queue_create("com.company.app.imageQueue", NULL);`你会得到一个串行队列和先进先出行为。

如果您不担心线程安全或作业返回的顺序，请使用第一种方法。

# html - 在 GoogleChrome 浏览器上鼠标悬停时，表格偶数/奇数样式会更改位置

> ID：13899265
> 
> 赞同：1
> 
> 时间：2012-12-16T06:53:15.203
> 
> 标签：html, css

我有一个如下图所示的表格，通过 css 设置了偶数/奇数行。
**问题：**在 Google Chrome 浏览器上刷新页面时偶数/奇数行不同，当鼠标悬停在页面或桌面上时偶数/奇数位置发生变化。
***可见：http:*** [//jsfiddle.net/uSDNg/](http://jsfiddle.net/uSDNg/)

打开/刷新页面时：
![在此处输入图像描述](../Images/23ee5935a148537f5e22f2cdac1a8df5.png)

当在页面上移动鼠标或悬停表头时：（行偶数/奇数样式更改位置）
![在此处输入图像描述](../Images/484852fd67c90bbcebb195433aa8c67b.png)

CSS 代码：

```
#table_box
{
    width:100%;
    font-size: 11px;
    border-collapse: collapse;
    text-align:center;
}
#table_box th
{
    padding:7px;
    color: #292929;
}
#table_box td
{
    padding: 4px 0 4px 0;
    color: #464646;
    border:1px solid #cecece;
}
.maintb th{
    background-color:#174797;
    color:#FFF!important;
}
#table_box tr:nth-child(odd) td { background-color:#ffffff } /*odd*/
#table_box tr:nth-child(even) td { background-color:#f0f0f0} /* even*/
#table_box tr:hover td { background-color:#fffbae; } /* hovering */ 
```

HTML 代码：

```
<table id="table_box" class="maintb">
<tr>
    <th>سال</th>
    <th>ماه</th>
</tr>
    <tr>
        <td>1391</td>
        <td>آذر</td>
    </tr>
        <tr>
        <td>1391</td>
        <td>آبان</td>
    </tr>
        <tr>
        <td>1391</td>
        <td>مهر</td>
    </tr>
</table> 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T07:05:23.247

将您的 CSS 更改为：

```
#table_box tr:nth-child(odd)  { background-color:#ffffff } /*odd*/
#table_box tr:nth-child(even) { background-color:#f0f0f0} /* even*/
#table_box tr:hover { background-color:#fffbae; } /* hovering */ 
```

# jquery - 在选择的jquery中选择All后不允许选择选项

> ID：13899267
> 
> 赞同：0
> 
> 时间：2012-12-16T06:53:42.253
> 
> 标签：jquery, jquery-chosen

我使用了 Jquery Chosen 插件。我在下拉列表中动态填写了数据。

我允许选择多个选项。但我的问题是，如果用户选择所有选项，则不允许选择其他选项。如果用户删除所有选项，则允许。

jQuery 选择：http: [//harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

```
<select id="test" data-placeholder="Select Department..." class="chzn-select" multiple tabindex="6">
    <option value=""></option>  
    <option value="-1">All</option>
    <option value="1">One</option>
    <option value="2">Two</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:13:58.407

好吧，这很容易..您所要做的就是取消选择所有内容，但每次用户选择某些内容时都取消选择“全部”选项...这里是代码：

```
//first we cache the all option selector
var theAllOption = $('#test option[value="-1"]');
$("#test").on({
    change: function() {
        var element = $(this);
        //if the all option is selected we find all the selected options and deselect them
        if (theAllOption.is(":selected")) {
            element.find("option:selected").not(theAllOption).removeAttr("selected");
        }
    }
});​ 
```

可以在这里找到一个工作示例：http: [//jsfiddle.net/senegalo/EKvUE/3/](http://jsfiddle.net/senegalo/EKvUE/3/)

选择插件的工作示例：http: [//jsfiddle.net/senegalo/EKvUE/4/](http://jsfiddle.net/senegalo/EKvUE/4/)

# css - 为什么下拉框不会出现在引导程序的正确位置？

> ID：13899271
> 
> 赞同：0
> 
> 时间：2012-12-16T06:53:59.197
> 
> 标签：css, twitter-bootstrap

为什么下拉框不会出现在搜索框旁边？

我编辑添加了大部分部分。从正文到导航栏的末尾。我正在使用官方 bootstrap.css

有人有想法吗？？

请帮忙！！

![截屏](../Images/20ff1982103bdca4c07ff19c82001097.png)

```
 <body>

  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a href="/" class="brand">Test</a>

            <div class="nav-collapse collapse navbar-responsive-collapse">
                <ul class="nav">
                    <li><a href="#"><i class="icon-home"></i> Top</a></li>
                    <li><a href="#">Link</a></li>
                    <li><a href="#">Link</a></li>
                    <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Action</a></li>
                        <li><a href="#">Another action</a></li>
                        <li><a href="#">Something else here</a></li>
                        <li class="divider"></li>
                        <li class="nav-header">Nav header</li>
                        <li><a href="#">Separated link</a></li>
                        <li><a href="#">One more separated link</a></li>
                    </ul>
                </li>
                </ul>

            <form accept-charset="UTF-8" action="/communities" class="navbar-search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>

            <div class="input-append">
            <input class="span3" id="search" name="search" type="text" />
              <div class="btn-group">
                <button class="btn dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button>
                <ul class="dropdown-menu">
                  <li><a href="#">Action</a></li>
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li><a href="#">Separated link</a></li>
                </ul>
              </div><!-- /btn-group -->
            </div><!-- /input-append -->

</form>         
            </div>        

            <div class="pull-right">

                <div class="btn-group">
                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="icon-user"></i> 
                    Mike                    <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                    <li><a href="/users/edit"><i class="icon-cog"></i> Edit</a></li>
                    <li class="divider"></li>
                    <li>
                    <a href="/logout"><i class="icon-chevron-up"></i> Log out</a>       
                    </li>
                    </ul>
                </div>
            </div>

        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:27:41.290

看起来这是BS中的一个错误。将此规则添加到您的 CSS：

```
.navbar .input-append .btn-group {
  margin-top: 0;
} 
```

你的小提琴[更新](http://jsfiddle.net/q7XXa/9/)了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:14:07.817

试试这个代码，它会解决你的问题

```
.navbar .btn, .navbar .btn-group {
margin-top: 0px !important;
} 
```

# c - 在 C 中修改 rindex

> ID：13899273
> 
> 赞同：0
> 
> 时间：2012-12-16T06:54:13.250
> 
> 标签：c, string

我正在用 C（Linux 操作系统）编程。我需要使用 rindex 来查找指定为函数参数的字符的最后一次出现。

```
char * rindex (const char *string, char c); 
```

尽管我收到警告，但它工作正常：

```
conflicting types for built-in function ‘rindex’ [enabled by default] 
```

但如果我包含一个`string.h`标题。它给出了错误，

```
conflicting types for ‘rindex’ 
```

因为 rindex 被定义为，

```
char * rindex (const char *string, int c); 
```

但我需要将它用作 char 并使用 string.h 进行字符串操作。有没有可能？请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:09:00.717

在第 7 版 UNIX™ 中，有两个函数`index()`和`rindex()`分别等效于标准 C 函数`strchr()`和`strrchr()`, give 或 take `const`（在定义这些函数时不存在，不存在原型；甚至没有 C 与那时的课）。

您违反了 function 的向后兼容声明`rindex()`。名称`index()`和`rindex()`是过时的，但您不能在自己的代码中愉快地使用它们。选择不同的函数名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T07:27:53.320

```
/* include standard string */
#include <string.h>
/* alias standard rindex to rindex_std */
#define rindex rindex_std
/* include your OS defined strings.h */
#include <strings.h> 
```

这将解决冲突。

# algorithm - 需要二次时间的算法任务？

> ID：13899274
> 
> 赞同：9
> 
> 时间：2012-12-16T06:54:44.950
> 
> 标签：algorithm, time-complexity

我知道冒泡排序、插入排序等，但有更有效的排序算法。根据[时间层次定理](http://en.wikipedia.org/wiki/Time_hierarchy_theorem)，对于任何真正的 r < 2，存在可以在 O(n^2) 中解决但在 O(n^r) 中无法解决的问题。用于证明的构造不是很自然。什么是最有效的解决方案需要二次时间的问题的一个很好的例子？

我正在寻找最好具有以下品质的东西：

*   简单易懂
*   经常使用的东西
*   可以证明 O(n^2) 是正确解的最佳运行时间

小警告 - 输出不应该很大。（如果您想要给定列表中每对整数的总和，显然需要二次时间来输出它们）。您可以假设它应该是一个[决策问题](http://en.wikipedia.org/wiki/Decision_problem)，即一个有“是”或“否”答案的问题。还让我们假设时间复杂度 O(n^2) 是输入大小的函数，即 n 是表示输入所需的位数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T07:07:01.217

[矩阵乘法](http://en.wikipedia.org/wiki/Matrix_multiplication)的理论下限为 Ω( *n* ² )，因为需要处理所有*n* ^(2个条目。)迄今为止最著名的算法（根据上面链接的 Wikipedia 文章）的复杂度为 O( *n* ^(2.3727) )。朴素算法的复杂度*为 n* ³。

根据关于[数学运算的计算复杂性](http://en.wikipedia.org/wiki/Computational_complexity_of_mathematical_operations)的维基百科文章，三角矩阵的反向替换以获得*n 个*解是 O( *n* ² )。网络上可能还有许多其他示例。

编辑：[Michele Borassi*等人在 2014 年发表的一篇论文。*](https://arxiv.org/pdf/1407.4972.pdf), 讨论了许多决策问题（输出大小 O(1)），*对于*任何^(*ε*) *> 0，这些问题可以在 O( n2* ) 时间内解决，但在 O( ^(n2) *-* ^ε *) 时间内无法解决。 （当然，与往常一样，这些结果取决于 P ≠ NP，或者更准确地说，[强指数时间假设](https://en.wikipedia.org/wiki/Exponential_time_hypothesis)是正确的。）*

 **他们的论文以修改后的[*k* -SAT 问题](https://en.wikipedia.org/wiki/Boolean_satisfiability_problem)为开端：

*输入：*

*   两组相同大小的变量*X* = { *x* [*i*] }, *Y* = { *y* [*j*] }；
*   在这些变量上的一组*C*子句，使得每个子句的大小最多为*k*；和
*   *X*和*Y*的两个幂集℘( *X* )、℘( *Y* ) （用于更改输入大小）。

 ***输出：* `true`如果所有变量的评估都满足所有子句，`False`否则。

请注意，未修改的*k* -SAT 问题（输入不包括上面的第三个项目符号）是 NP 完全的，因此通常将其视为指数时间问题。然而，这里的输入大小本身是变量数量的指数。他们表明，通过这种修改，问题总是可以在二次时间内解决（只需尝试所有可能的评估）。对于这个答案更重要的是，他们还表明这是解决问题的任何算法的最小时间复杂度。

有人可能会反对说这个修改后的*k* -SAT 问题很自然。然而，他们随后用它来表明许多其他看起来确实很自然的问题也无法在少于 O( *n* ² ) 的时间内解决。最简单的一个是子集图问题：

*输入：*一个集合*X*和一个*X*子集的集合*C。*

 **输出：*图*G* = ( *C* , *E* )，其中，对于每个*C*，*C* ′ ∈ *C*， ( *C* , *C* ′) ∈ *E*当且仅当*C* ⊆ *C* ′。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:22:13.740

您在混合计算模型方面犯了一个根本性错误。

时间层次定理是关于图灵机的，而大多数其他界限要么有自己的模型（如排序的比较模型），要么通常与 RAM 模型有关。

所以真正的问题是，你说的是哪种计算模型？

此外，谈论不比 O(n^2) (BigOh) 差的最佳算法是无稽之谈。BigOH 是一个上限。您可能打算使用 Theta。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T05:36:06.757

这已经是将近一年之后了，但我想我有一个答案：偏序发现。

考虑一下对总排序进行排序。您有一个由 n 个对象组成的序列（我们假设它们是不同的），以及一个比较操作，它测试两个元素以查看一个是否小于或等于另一个。

您正在尝试发现元素所在的排列。有 n! 可能的排列，所以你试图发现一个介于 1 和 n 之间的数字！每次比较都会为您提供一点信息。发现一个介于 1 和 n 之间的数！需要发现 log(n!) 位。因此，所需的比较次数也是 log(n!) 位，或者：

log(n!) = n log n + o(n log n) = Ω(n log n) 位

（当然，所有对数都以 2 为底。）

你不能做得比这更好。如果每个查询都为您提供一位信息，并且您需要发现至少 Ω(n log n) 位，那么您需要 Ω(n log n) 比较。如果您认为自己可以做得更好，请与 Shannon、Chaitin 和 Kolmogorov 一起讨论。

但更好的是，已知算法即使在最坏的情况下也能做到（例如堆排序）。从这个意义上说，堆排序是渐近最优的。

（请注意，如果您有一个返回多于一位信息的查询操作，您可以做得更好。例如，如果您能想出一个返回 Ω(log n) 位的查询操作，那么您应该能够以 Ω 排序(n) 时间。有关详细信息，请参阅基数排序。）

这种分析适用于各种算法。在 n 个事物的序列中找到一个事物需要发现一个介于 1 和 n 之间的数字，这意味着发现 log n + O(1) 位。如果您的查询操作返回一位，则需要 Ω(log n) 个查询来进行搜索。（有关详细信息，请参阅二进制搜索。）

我想你可以看到我要去哪里。

现在假设您有 n 个元素，它们具有偏序关系，但您不知道它是什么并且想要找出。但是，您所拥有的是一个比较两个元素 x 和 y 的查询，如果 x 在偏序中小于或等于 y，则返回“true”。

有一个明显的算法可以发现需要 Ω(n^2) 时间的偏序：只需将每个元素与其他元素进行比较。

但这是最优的吗？好吧，查询操作返回一位信息。n 个元素的偏序数由[Sloane 的 A001035 给出](http://oeis.org/A001035)。如果我没看错的话，这个序列是 Ω(2^(n^2))，这意味着要发现一个偏序，你需要：

Ω(log 2^(n^2)) = Ω(n^2) 位

也就是说，你不能比 Ω(n^2) 时间做得更好，所以这是一个渐近最优算法。

“所以”，我听到你问，“我相信输入的大小是 n。但*输出*的大小不是O(n^2)，所以它实际上是某种深层技术意义上的线性算法？”

也许。我现在真的没有时间详细介绍，但我会用一个问题来回答它。

在普通旧排序的情况下，我们可能会得到 n 个*不同的*元素。要区分它们，需要用 n 个*不同的*标签来标记它们。存储 n 个不同的标签意味着存储 n 个数字，每个数字都在 1 和 n 之间。这些数字中的每一个都需要 log n 位来表示它，因此问题的总大小是 n log n *bits*。那么为什么我们不说堆排序在问题的大小上是线性的呢？*****

# c++ - 在c++11下使用正则表达式

> ID：13899276
> 
> 赞同：1
> 
> 时间：2012-12-16T06:55:07.003
> 
> 标签：c++, regex

> **可能重复：**
> [GCC 中的 C++0x 正则表达式](https://stackoverflow.com/questions/4716680/c0x-regex-in-gcc)

我试图在 c++ 下使用正则表达式转换文件，一些 regex_error 不断发生，这里是代码：

```
std::ifstream inf(in);
std::ofstream outf(out);
try{
std::regex line_regex("[[:alnum:]]");
std::string line;
while(std::getline(inf,line))
{
    if(std::regex_match(line,line_regex))
        outf<<line<<std::endl;
} 
```

错误信息是：

```
terminate called after throwing an instance of 'std::regex_error'
what():  regex_error 
```

顺便说一句，我在 linux x64 上使用 gcc 4.7.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T12:17:46.657

GCC 的实现`<regex>`是不可用的。不要在上面浪费时间。

# java - 如何在 URL 中添加授权和内容类型

> ID：13899278
> 
> 赞同：1
> 
> 时间：2012-12-16T06:55:09.913
> 
> 标签：java

我正在尝试对 Fusion Table API 进行 REST 调用。我正在为 REST 使用 spring 模板

当我将我的 URL 定义为：

```
String URI = "https://www.googleapis.com/upload/fusiontables/v1/tables/tableid/import"; 
```

**例外 ：**

```
 Exception in thread "main" org.springframework.web.client.HttpClientErrorException: 401 Unauthorized 
```

这很好，意味着它击中了谷歌服务器。

但是当我使用：

```
URL  :String URI = "https://www.googleapis.com/upload/fusiontables/v1/tables/tableid/import"+"&Authorization:""&Content-Type: application/octet-stream"; 
```

它的抛出异常：

```
Exception in thread "main" org.springframework.web.client.HttpClientErrorException: 404 Not Found 
```

我无法理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T07:53:08.467

您将请求标头附加到您的 URL 字符串，这是不正确的。这两个标题：

*   授权： ””
*   内容类型：应用程序/八位字节流

不应添加到请求 URL ***。***相反，如果您使用 Apache HttpComponents：

```
final HttpPost post = new HttpPost();
post.addHeader("Authorization", "");
post.addHeader("Content-Type", "application/octet-stream"); 
```

或者，使用 HttpUrlConnection：

```
conn.setRequestProperty("Authorization", "");
conn.setRequestProperty("Content-Type", "application/octet-stream"); 
```

或者，使用 Spring RestTemplate：

```
HttpHeaders headers = new HttpHeaders();
headers.add("Authorization", "");
headers.add("Content-Type", "application/octet-stream");
HttpEntity<String> entity = new HttpEntity<String>(helloWorld, headers); 
```

[在RestTemplate](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html#postForLocation%28java.lang.String,%20java.lang.Object,%20java.lang.Object...%29)和[HttpEntity](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/HttpEntity.html)的文档页面上有大量关于 Spring 特定选项的信息。

# hibernate - DTO 到实体和实体到 DTO

> ID：13899291
> 
> 赞同：5
> 
> 时间：2012-12-16T06:57:52.213
> 
> 标签：hibernate, domain-driven-design, dozer

我们将使用 DTO 向表示层发送数据和从表示层发送数据。我们有如下层：

*   正面
*   应用服务
*   领域

我们已经使用 Dozer 帮助我们将实体转换为 dto。但我现在有 2 个问题：

1.  从实体到 dto 我们可以使用推土机，但是从 dto 到实体我们可以使用推土机吗？如果是，如何？
2.  我应该在哪里创建实体？在门面或 DTOAssembler 中？

例如，我必须注册一本书。这本书实体看起来像：

```
Book{
   public Book(BookNumber number,String name){
      //make sure every book has a business number,
      //and the number can't change once the book is created.
      this.bookNumber = number;
      ..
   }
} 
```

我们有一个 DTOAssembler：

```
BookDTOAssembler{

  BookDTO toDAO(bookEntity){
  ...
  }
  BookEntiy fromDTO(book DTO,BookRepository bookRepository){
    //1.Where should i create book entity? 
    //2.Is there any effective way to convert dto to entity in java world?
  }
} 
```

**选项1**

```
the BookManagedFacade has a registerBook function:
public registerBook(bookDTO){
   Book book = BookDTOAssembler.fromDTO(book DTO);
}

//Create book in BookDTOAssembler.fromDTO 
public static BookEntiy fromDTO(BookDTO bookDTO,BookRepository bookRepository){
    //book is never registered 
    if (0==bookDTO.getBookID()){
       Book book = new Book(bookRepository.generateNextBookNumber(),bookDTO.getName());
    }else{
       //book is been registed so we get it from Repository
       book = bookRepository.findById(bookDTO.getBookID()); 
    }
    book.setAuthor(bookDTO.getAuthor);
    ...
    return book;
} 
```

**选项 2**

```
the BookManagedFacade has a registerBook function:
public registerBook(bookDTO){
   Book book = new Book(bookRepository.generateNextBookNumber(),bookDTO.getName());
   book = BookDTOAssembler.fromDTO(book DTO,book);
}

//add another function in BookDTOAssembler.fromDTO 
public static BookEntiy fromDTO(BookDTO bookDTO,Book book){
    book.setAuthor(bookDTO.getAuthor);
    ...
    return book;
} 
```

带一个更好？或者它可以以更好的方式实施..？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T13:45:05.940

通常，您不会将对象（域实体的 DTO 表示）传输回服务器。因为如果你这样做，你会破坏封装，因为任何人都可以将更改应用到 DTO，然后将信息发回。

相反，您应该创建一个用于修改对象的服务接口，因为它允许***服务器***将更改应用于其模型。

所以服务实际上分为两部分：

1.  用于获取所有实体的 DTO 表示的查询部分
2.  用于将更改应用于实体的命令部分

# c++ - C++头文件中的动态数组

> ID：13899294
> 
> 赞同：0
> 
> 时间：2012-12-16T06:58:33.837
> 
> 标签：c++, dynamic, multidimensional-array

我的 cpp 项目在头文件中有静态二维数组，但它导致 chkstk 错误。我想让它动态化。是否真的可以在标题中进行更改，因为对项目的所有部分（大约 12000 行代码）进行更改是很困难的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:47:05.840

根据[Dietmar 对类似问题的回答](https://stackoverflow.com/a/13893423/1031191)，很可能您需要将静态二维数组放入一个函数中，以便及时对其进行初始化。

像这样：

```
double**& my_array()
{
  static double** local = NULL;
  if(!local)
  {  
     // init your array here
  } 
  return local;
} 
```

并且您需要引用您的数组，`my_array()`而不是`my_array`在代码中。

编辑：

对于icepack的问题：是的，它看起来很奇怪（在我看来，一个多数组应该被包装到一个类中，然后这不会发生）。使用这种奇怪的返回类型的原因如下：

```
// if you returned double** instead of double**&
my_array() = other_array; // would overwrite a temporary pointer
my_array(); // would be still the old array 
```

* * *

如果您使用 C++11，最干净的解决方案是：

```
typedef std::array<std::array<double, second_dim>, first_dim> my_array_t;
my_array_t& my_array()
{
   static my_array_t local = initial_value();
   return local;
} 
```

并且您使用`my_array`与以前相同的`my_array()`.

即使您不使用 C++11，我建议您定义自己的 2d_array 类，无论如何，当您正确编写它时，它不会超过 C 数组的开销。

# android - 传递一个字符串并在游标查询中使用它

> ID：13899295
> 
> 赞同：0
> 
> 时间：2012-12-16T06:58:41.547
> 
> 标签：android, sqlite, cursor

我的主要活动将一个字符串传递给另一个活动（我们称之为子活动）。在这个子活动中，我需要在游标原始查询中使用该字符串来从数据库中选择与该字符串匹配的数据。

```
public class RestaurantsInfo extends ListActivity {

static final String restaurantListTable = "RestaurantList";
static final String colRestaurantID = "RestaurantID";
static final String colRestaurantName = "RestaurantName";
static final String colRestaurantStore = "StoreNo";
static final String colRestaurantAddress = "StoreAddress";
public String strRestaurantName;
RestaurantDB db = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_listview);
    db=new RestaurantDB(RestaurantsInfo.this);

    Intent intent = getIntent();
    Bundle extras = intent.getExtras();

    String strRestaurantName = extras.getString("RestaurantName");
    setTitle(strRestaurantName);
    getData();
  }

private Cursor doQuery(String strRestaurantName) {
    return(db.getReadableDatabase().rawQuery("SELECT "+colRestaurantID+" AS _id, "+colRestaurantName+", "+colRestaurantStore+", "+colRestaurantAddress+
            " FROM "+restaurantListTable+" WHERE "+colRestaurantName+" = strRestaurantName ORDER BY "+colRestaurantStore+"", null));
    }

public void getData() {
    SimpleCursorAdapter adapter;

    if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB) {
        adapter=new SimpleCursorAdapter(this, R.layout.activity_address,
                doQuery(strRestaurantName), new String[] {
            RestaurantDB.colRestaurantName,
            RestaurantDB.colRestaurantStore,
            RestaurantDB.colRestaurantAddress },
            new int[] { R.id.textView1, R.id.textView2, R.id.textView3 },
            0);
        }
    else {
        adapter=new SimpleCursorAdapter(this, R.layout.activity_address,
                doQuery(strRestaurantName), new String[] {
            RestaurantDB.colRestaurantName,
            RestaurantDB.colRestaurantStore,
            RestaurantDB.colRestaurantAddress },
            new int[] { R.id.textView1, R.id.textView2, R.id.textView3 });
        }

    setListAdapter(adapter);

    }
} 
```

从代码中可以看出，我尝试传递字符串`strRestaurantName`并在查询中使用它`WHERE`，但它不起作用！日志文件说“没有这样的列`strRestaurantName`”，但我并不是说它是一个列。我试过`doQuery()`代替`doQuery(strRestaurantName)`，但它也给出了同样的错误。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:59:43.467

您必须将 SQL 字符串用引号括起来：

```
"WHERE "+colRestaurantName+" = '" + strRestaurantName + "'" 
```

（我有一次倒退了，对不起）。

* * *

虽然你真的应该使用参数化来防止 SQL 注入攻击。如：

```
return(db.getReadableDatabase().rawQuery(
    "SELECT "+colRestaurantID+" AS _id, "+colRestaurantName+", "+colRestaurantStore+", "+colRestaurantAddress+
    " FROM "+restaurantListTable+
    " WHERE "+colRestaurantStore+" = ?" + 
    " ORDER BY "+colRestaurantStore, 
    new String[] {strRestaurantName})); 
```

* * *

> 当意图和捆绑包放在 onCreate() 中时，我的私有 doQuery() 似乎无法检索 strRestaurantName 的值。

您不小心创建了*两个*名为`strRestaurantName`... 的变量，其中包含字段变量和局部变量`onCreate()`。更改此行：

```
String strRestaurantName = extras.getString("RestaurantName"); 
```

对此：

```
strRestaurantName = extras.getString("RestaurantName"); 
```

现在您将只有一个`strRestaurantName`，它将在`doQuery()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T07:01:55.707

您没有附加变量，而只是附加字符串 不要在变量名 strRestaurantName 周围加上引号

```
+" WHERE "+colRestaurantName+" = " +strRestaurantName+ "ORDER BY "+colRestaurantStore+"" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T07:09:25.430

这在您的方法中不是有效的 SQL 查询您可以试试这个：

```
private Cursor doQuery(String strRestaurantName) {
    return(db.getReadableDatabase().rawQuery("SELECT "+colRestaurantID+" AS _id, "+colRestaurantName+", "+colRestaurantStore+", "+colRestaurantAddress+
            " FROM "+restaurantListTable+" WHERE "+colRestaurantName+" = "+ strRestaurantName +" ORDER BY "+colRestaurantStore+"", null));
    } 
```

# javascript - 将文本写入剪贴板

> ID：13899299
> 
> 赞同：8
> 
> 时间：2012-12-16T06:59:59.457
> 
> 标签：javascript, google-chrome-extension, clipboard

我想通过 Chrome 扩展将一些文本变量写入剪贴板，当用户按下快捷键时会发生这种情况。除了写入剪贴板之外，我已经完成了所有部分。

我使用这些关键字搜索了整个 StackOverflow：“[google-chrome-extension] Clipboard”

所以我想说，我见过所有相关的：

*   添加`clipboardRead`和`clipboardWrite`许可（已完成）
*   将文本添加到`<textarea>`, call `document.execCommand('Copy');` 或 `document.execCommand("Copy", false, null);`

即使我在 StackOverflow 上尝试了我的扩展`textarea`，我也将我的文本插入到 StackOverflow 的 wmd-input 部分`textarea`，然后选择它，然后调用复制。没什么，没什么，没什么……

一切都试过了。请告知...我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-15T17:27:28.070

基于[https://stackoverflow.com/a/12693636](https://stackoverflow.com/a/12693636)

```
function directCopy(str){
    //based on https://stackoverflow.com/a/12693636
        document.oncopy = function(event) {
    event.clipboardData.setData("Text", str);
    event.preventDefault();
        };
    document.execCommand("Copy");
        document.oncopy = undefined;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T07:15:07.457

您可以尝试以下代码，它将文本写入剪贴板

作为一个例子，我写到`Sample`剪贴板

## 输出

![在此处输入图像描述](../Images/605d5e55034b4e725990668a9fcb9237.png)

### ***清单.json***

清单文件是所有 chrome 扩展的关键，确保它具有所有权限

```
 {
  "name": "Copy to ClipBoard Demo",
  "description" : "This is used for demonstrating Copy to Clip Board Functionality",
  "version": "1",
  "browser_action": {
    "default_popup": "popup.html"
  },
  "permissions":["clipboardWrite"],
    "manifest_version": 2
} 
```

### ***popup.html***

一个简单的浏览器操作 HTML 文件，带有输入框和按钮

```
<html>

    <head>
        <script src="popup.js"></script>
    </head>

    <body>
        <input type="text" id="text" placeHolder="Enter Text To Copy"></input>
        <button id="copy">Copy</button>
    </body>

</html> 
```

### ***popup.js***

它将内容复制`<input>`到剪贴板

```
function copy() {

    //Get Input Element
    var copyDiv = document.getElementById('text');

    //Give the text element focus
    copyDiv.focus();

    //Select all content
    document.execCommand('SelectAll');

    //Copy Content
    document.execCommand("Copy", false, null);
}

//Add Event Listeners to Button Click
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("copy").onclick = copy;
}); 
```

### 或者

```
function copy(){

    //Get Input Element
    document.getElementById("text").select();

    //Copy Content
    document.execCommand("Copy", false, null);
}

//Add Event Listeners to Button Click
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("copy").onclick = copy;
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-14T16:35:50.490

使用示例：

copyStringToClipboard("abc123");

```
 function copyStringToClipboard (str) {
      // Create new element
      var el = document.createElement('textarea');
      // Set value (string to be copied)
      el.value = str;
      // Set non-editable to avoid focus and move outside of view
      el.setAttribute('readonly', '');
      el.style = {position: 'absolute', left: '-9999px'};
      document.body.appendChild(el);
      // Select text inside element
      el.select();
      // Copy text to clipboard
      document.execCommand('copy');
      // Remove temporary element
      document.body.removeChild(el);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-04T21:16:00.293

Suonds 就像您试图从内容脚本中复制一样。从[这个答案](https://stackoverflow.com/questions/3436102/copy-to-clipboard-in-chrome-extension)中建立[joelpt](https://stackoverflow.com/users/313177/joelpt)和[Jeff Gran](https://stackoverflow.com/users/835766/jeff-gran)的答案，这里是如何从内容脚本中复制任何一段文本：

> ```
> "permissions": [
>     "clipboardWrite",... 
> ```

在您的 main.js 或任何后台脚本中：

```
chrome.runtime.onMessage.addListener(function(request, sender, sendResponse){
  var copyFrom = document.createElement("textarea");
  copyFrom.textContent = request.text;
  var body = document.getElementsByTagName('body')[0];
  body.appendChild(copyFrom);
  copyFrom.select();
  document.execCommand('copy');
  body.removeChild(copyFrom);
}) 
```

从您的内容脚本：

```
chrome.runtime.sendMessage({text:textToCopy}); 
```

# jsf - jsf 范围内的支持 bean

> ID：13899300
> 
> 赞同：0
> 
> 时间：2012-12-16T07:00:04.537
> 
> 标签：jsf

我正在显示一个 ProductList，它由 Product 对象组成。Product 具有 int、string、string 和 int 类型的属性。正在从数据库中提取数据，我构建了一个 ProductList。数据在数据库中，我可以看到它，但是当我显示表格时，表格中的 2 个 int 列显示为 0，而 String 列中显示为空白。这是产品列表：

```
@ManagedBean 
```

公共类产品列表 {

```
private ArrayList<Product> allProducts;

public ProductList(){
    allProducts = DatabaseConnector.getAllProducts();
}

public ArrayList<Product> getAllProducts(){
    return allProducts;
}

public void setAllProducts(ArrayList<Product> allProducts){
    this.allProducts = allProducts;
} 
```

}

这是 Product bean：

```
@ManagedBean 
```

公共类产品{

```
private int id;
private String productName;
private String description;
private int quantity;

public Product() {
}

public void setId(int id) {
    this.id = id;
}

public void setProductName(String productName) {
    this.productName = productName;
}

public void setDescription(String description) {
    this.description = description;
}

public void setQuantity(int quantity) {
    this.quantity = quantity;
}

public int getId() {
    return id;
}

public String getProductName() {
    return productName;
}

public String getDescription() {
    return description;
}

public int getQuantity() {
    return quantity;
} 
```

}

我应该更改 bean 的范围吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:07:21.420

将范围注释添加到您的 bean 中，例如`@RequestScoped` 或`@ViewScoped`

否则它将是默认范围`@NoneScoped`

# c++ - 套接字应用程序无法正常工作

> ID：13899301
> 
> 赞同：-1
> 
> 时间：2012-12-16T07:00:19.947
> 
> 标签：c++, c, sockets, winsock, winsock2

我试图编写一个小代码在 Windows 上通过网络发送文件，但它似乎无法正常工作。这是我的代码：

```
char *arrFile = readFile("test.exe");
int fileSize = getFileSize("test.exe");
int sentSize = 0;
int justSent;

while(sentSize < fileSize) {
    justSent = send(sock, arrFile + sentSize, fileSize - sentSize, 0);
    sentSize += justSent;
} 
```

几次循环后发送函数出错，我不知道为什么，有人可以告诉我原因（以及解决方案：D）吗？

**更新**

我正在使用非阻塞套接字并收到“WSAEWOULDBLOCK”错误，但它在错误后仍然不发送任何内容，直到客户端发回一些东西:-(

上面的代码是 C，但也是 C++ :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:41:40.833

看起来该功能`send`无法正常工作。它返回一个 -1，然后将其添加到`justSent`. 经过几次迭代后，`justSent`负数足以导致分段错误。

要解决此问题，您应该添加代码来处理错误情况（`send`返回值 < 0 时）。

这样的事情将是一个好的开始：

```
while(sentSize < fileSize) 
{
    justSent = send(sock, arrFile + sentSize, fileSize - sentSize, 0);
    if(justSent < 0)
    {
        printf("Error!\n");
        break;
    }
    sentSize += justSent;
} 
```

# python - 在 Python 中使用自反传递闭包查找所有子图

> ID：13899303
> 
> 赞同：-1
> 
> 时间：2012-12-16T07:00:44.910
> 
> 标签：python, python-3.x, python-2.7

我有一个找到传递闭包的 Python 代码。

**例子：**

输入：{('A','B'),('B','C'),('C','D'),('E','F')}

输出： {('B', 'C'), **('A', 'D')** , ('A', 'B'), ('C', 'D'), **('B', 'D' ')** , ('E', 'F'), **('A', 'C')** }

该代码*完美无缺*，但我正在寻找的是将输出作为一组子图。我是 Python 的初学者，我不知道该怎么做。

根据给定的输入，这是我正在寻找的输出，它在集合中有两个元素，每个元素代表传递闭包输出的一个子图：**{(A, B, C, D), (E, F) }**

这是代码：

```
from collections import defaultdict

def transitive_closure(elements):
    edges = defaultdict(set)
    # map from first element of input tuples to "reachable" second elements
    for x, y in elements: edges[x].add(y)

    for _ in range(len(elements) - 1):
        edges = defaultdict(set, (
                                  (k, v.union(*(edges[i] for i in v)))
                                  for (k, v) in edges.items()
                                  ))

    return set((k, i) for (k, v) in edges.items() for i in v)

result = set(transitive_closure([('A','B'),('B','C'),('C','D'),('E','F')]))
print result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:54:38.327

在 Python 中使用**networkx解决了问题。****networkx**提供了查找给定子图的所有子图的功能。

我所需要做的就是获得**transitive_closure()**方法的输出，将其转换为networkx 的图，然后将新创建的图作为networkx 提供的**connected_component_subgraphs()**方法的输入。

```
H=nx.connected_component_subgraphs(G) 
```

H 是一个包含所有需要的子图的集合。

主要缺点是处理时间，但这是我能找到的最好的。

# ruby - How do I pass a variable from one action to another in a Rails controller?

> ID：13899305
> 
> 赞同：0
> 
> 时间：2012-12-16T07:01:34.487
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

There is a situation where I need to call my `update` action from my `create` action:

```
def create
  @product = Product.find_or_initialize_by_sku(params[:sku])
  if @product.new_record?
    respond_to do |format|
      if @product.save
        format.html { redirect_to @product, notice: 'Product was successfully created.' }
        format.json { render json: @product, status: :created, location: @product }
      else
        format.html { render action: "new" }
        format.json { render json: @product.errors, status: :unprocessable_entity }
      end
    end
  else
   update ##*** I am calling the update action at this point ***##
  end
end

def update
  @product = Product.find_or_initialize_by_sku(params[:sku])

  respond_to do |format|
    if @product.update_attributes(params[:product])
      format.html { redirect_to @product, notice: 'Product was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @product.errors, status: :unprocessable_entity }
    end
  end
end 
```

But I end up making two identical queries to my database because I am not sure of the most effective way to pass a variable (in this case, the instance variable `@product`) from one action to another.

I am trying to get a grasp on the 'rails' way to do this. What should I do here (as I know I should not be making two identical database queries)?

Would I store it in the session as if I was performing a redirect (*Am I* performing a redirect when I call an action from within another action like this?)?

```
session[:product] = @product # in my create action
# then
@product = session[:product] # in my update action 
```

Does caching make this all a moot point?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T07:19:47.070

Consider using [memoization](http://rails-bestpractices.com/posts/59-use-memoization):

```
@product ||= Product.find_or_initialize_by_sku(params[:sku]) 
```

The `||=` operator will check if `@product` is nil, and if it is, Ruby will execute the finder. Otherwise, Ruby will use the current value. Therefore, when you call `update` from `create`, the `update` method will use the `@product` that you found or initialized in `create`.

Regarding your second question, you're not performing a redirect when you call one controller action from another. Try not to over-think it - a controller is just another Ruby class with its own instance variables (e.g. `@product`) and methods. To perform a redirect, you would have to call [`redirect_to`](http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to), which would result in a second web request to your controller.

# iphone - 充电完成剩余时间，iOS

> ID：13899308
> 
> 赞同：17
> 
> 时间：2012-12-16T07:02:01.353
> 
> 标签：iphone, ios, ipad, cocoa-touch

我在用 ：

```
UIDevice *myDevice = [UIDevice currentDevice];
[myDevice setBatteryMonitoringEnabled:YES];
float batLeft = [myDevice batteryLevel];
int i = [myDevice batteryState];    
int batinfo = batLeft * 100; 
```

查找电池状态。我正在寻找，如何找到充电完成之前的剩余时间。例如：剩余 1 小时 20 分钟。如何以编程方式找到它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T07:22:53.633

我在[官方文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)中没有找到任何方法，在类转储的[私有头](https://github.com/kennytm/iphone-private-frameworks/blob/master/UIKit/UIDevice2.h)`UIDevice`文件中也没有。

所以我们必须想出一些办法。我目前想到的最佳“解决方案”类似于估计下载时间时采用的方法：计算下载/充电的平均速度，并将剩余量（数据或费用）除以该速度：

```
[UIDevice currentDevice].batteryMonitoringEnabled = YES;
float prevBatteryLev = [UIDevice currentDevice].batteryLevel;
NSDate *startDate = [NSDate date];

[[NSNotificationCenter defaultCenter]
    addObserver:self
       selector:@selector(batteryCharged)
           name:UIDeviceBatteryLevelDidChangeNotification
         object:nil
];

- (void)batteryCharged
{
    float currBatteryLev = [UIDevice currentDevice].batteryLevel;
    // calculate speed of chargement
    float avgChgSpeed = (prevBatteryLev - currBatteryLev) / [startDate timeIntervalSinceNow];
    // get how much the battery needs to be charged yet
    float remBatteryLev = 1.0 - currBatteryLev;
    // divide the two to obtain the remaining charge time
    NSTimeInterval remSeconds = remBatteryLev / avgChgSpeed;
    // convert/format `remSeconds' as appropriate
} 
```

# android - SoundPool.OnLoadCompleteListener 被阻塞

> ID：13899309
> 
> 赞同：2
> 
> 时间：2012-12-16T07:02:01.617
> 
> 标签：android, soundpool

我正在尝试加载声音，以便稍后在我的活动中播放它，并且我想确保它在我完成 onCreate 之前完成加载（有时它会通过 Handler 方法立即播放。

如果要立即播放声音，我经常会收到错误“sample 1 not READY”。

所以我去寻找答案，几乎每个人都说要使用 SoundPool.OnLoadCompleteListener，但我试过了，它似乎没有做任何有用的事情。就像它在调用它之前等待我的 onCreate 方法和其他所有操作完成一样，所以如果我尝试让我的 onCreate 等待 onLoadComplete 调用，那么什么也不会发生。

下面是一个简单的测试程序来演示（请注意，在实际程序中，对 play_sound() 的调用不会在 onCreate 中，它将从其他地方调用，但可能非常快）。

程序下方是 LogCat 的日志文件输出。

如果我注释掉与 OnLoadCompleteListener 和 while(sound_loaded) 循环相关的所有内容，而只是放入一个“SystemClock.sleep(100)”，它几乎可以完美运行，但这感觉像是在作弊。

```
public class MainActivity extends Activity {
private static HashMap<Integer, Integer> soundMap;
private SoundPool sounds;
private boolean sound_loaded = false;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Log.d(getClass().getSimpleName(), "onCreate started");

    sounds = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
    soundMap = new HashMap();
    Log.d(getClass().getSimpleName(), "Loading sound");

    sounds.setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {
        public void onLoadComplete(SoundPool sp, int sid, int status) {
            Log.d(getClass().getSimpleName(), "Sound is now loaded");
            sound_loaded = true;
    }});

    soundMap.put(1, sounds.load(this, R.raw.ping_da_ding_ding_ding, 1));
    //SystemClock.sleep(100);
    play_sound();

    Log.d(getClass().getSimpleName(), "onCreate Finished");
}

public void play_sound() {
    int loop_counter = 0;   
    while (sound_loaded == false) { 
        if (loop_counter++ > 3) {
            Log.d(getClass().getSimpleName(), "Looped too many times, breaking out!");
            break;
        }
        Log.d(getClass().getSimpleName(), "sleeping waiting for sound");
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();}
    }   

    int sound_stream = sounds.play(soundMap.get(1), 0.5f, 0.5f, 0, 0, 1);
} 
```

日志输出

```
 12-16 17:55:13.025: D/MainActivity(22322): onCreate started
 12-16 17:55:13.030: D/MainActivity(22322): Loading sound
 12-16 17:55:13.035: D/MainActivity(22322): sleeping waiting for sound
 12-16 17:55:13.045: V/MediaPlayer(22322): decode(55, 753, 5391)
 12-16 17:55:14.035: D/MainActivity(22322): sleeping waiting for sound
 12-16 17:55:15.035: D/MainActivity(22322): sleeping waiting for sound
 12-16 17:55:16.035: D/MainActivity(22322): sleeping waiting for sound
 12-16 17:55:17.035: D/MainActivity(22322): Looped too many times, breaking out!
 12-16 17:55:17.045: I/Reverb(22322):  getpid() 22322,  IPCThreadState::self()->getCallingPid() 22322
 12-16 17:55:17.050: D/MainActivity(22322): onCreate Finished
 12-16 17:55:17.120: D/(22322): Sound is now loaded 
```

我在华硕 Nexus 7 (android 4.2.1) 和三星 Galaxy S3 (android 4.0.4) 上运行它

谢谢凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:10:08.810

`Thread.sleep(1000);`函数中的这一行`play_sound()` 实际上是阻塞了你的主线程**（UI Thread）**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T08:40:07.103

我认为你需要这样做：

```
sounds.setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {
    public void onLoadComplete(SoundPool sp, int sid, int status) {
        Log.d(getClass().getSimpleName(), "Sound is now loaded");
        sound_loaded = true;
        soundMap.put(1, sounds.load(this, R.raw.ping_da_ding_ding_ding, 1));
        play_sound();
        Log.d(getClass().getSimpleName(), "onCreate Finished");
    }
}); 
```

目前，您正在设置 OnLoadCompleteListener ... 并立即调用 play_sound()。在 OnLoadComplete() 触发之前，您不想调用 play_sound()。

# c++ - 如何在组合运行时更改成员对象？

> ID：13899310
> 
> 赞同：3
> 
> 时间：2012-12-16T07:02:33.990
> 
> 标签：c++, oop, composition

来自**C++ 中的思考卷。1**（P-33）：

> 组合具有很大的灵活性。新类的成员对象通常是私有的，使使用该类的客户端程序员无法访问它们。这允许您在不影响现有客户端代码的情况下更改这些成员。
> ***您还可以在运行时更改成员对象，以动态更改程序的行为。接下来要描述的继承没有这种灵活性，因为编译器必须对使用继承创建的类进行编译时限制。***

我们如何在组合运行时更改成员对象？
写类声明的时候不包括对象吗？

`class car`
`{`
`private:`
`engine obj;`
`}`

所以，这里的类`car`包含类的对象`engine`。我们如何在运行时改变它？

还是我错过了一些观点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T07:21:46.010

尝试使用指向您的成员对象的指针：

```
class car {
    engine *obj;
} 
```

现在您可以在运行时选择是否使用`rotary_engine`or`v8_engine`或的实例`flux_capacitor_engine`。

当然，您可能希望使用 a`unique_ptr`或 a之类的东西`shared_ptr`来管理成员对象的所有权和生命周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T07:27:21.620

这确实是一个有点模糊的说法。

组合定义了一种`has-a`关系，即**`car`has`engine`**。您可以更换汽车的发动机，汽车仍然是汽车。

继承定义了一种关系，即如果您将汽车定义为从引擎继承，**则**`is-a`意味着. 改变引擎意味着改变汽车本身的类型——如果你改变基类，它会自动改变派生类。使用合成时不存在此约束。**`car``engine`**

因此，在您的示例组合中是正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T09:21:41.277

对于纯组合，运行时更改也是可能的：

```
class Car {
private:
   CarPart &get_part(int i) const { 
        switch(i) {
            case 0: return e;
            case 1: return w1;
            case 2: return w2;
            case 3: return w3;
            case 4: return w4;
        }
   }
private:
   Engine e;
   Wheel w1, w2, w3, w4;
}; 
```

然后例如设置属性很容易：

```
void set_property(int id, std::string name, int value) {
    CarPart &p = get_part(id);
    p.set(name, value);
} 
```

这是尽可能动态的......

# c# - 跳过从控制框关闭表单的验证

> ID：13899315
> 
> 赞同：1
> 
> 时间：2012-12-16T07:04:31.423
> 
> 标签：c#, winforms, validating-event

我有一个带有文本框的简单表单，我想让用户在关闭或跳过此控件之前在文本框中输入一些数据，但是当我处理验证事件时，我只能通过放置一个取消按钮来关闭表单将 CauseValidation 属性设置为 true。我的问题是，即使文本框中没有写入任何内容，如何启用控制框中的 X 按钮以关闭表单？通过添加 form_closure 处理程序，此按钮在我第二次单击它时起作用,但是我可以通过按一次 X 按钮来关闭表单吗？

这是我的 form.cs 文件：

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace Validation
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();

            }

            private void textBox1_Validating(object sender, CancelEventArgs e)
            {

                if(textBox1.Text.Trim().Equals(string.Empty))
                {
                e.Cancel=true;

                errorProvider1.SetError(textBox1,"Error");

                }
                else
                    errorProvider1.SetError(textBox1,"");
            }
       private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            textBox1.CausesValidation = false;
        }
        }
    } 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:35:43.457

是的，试试这个。

```
 private void Form2_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (textBox1.CausesValidation)
            {
                textBox1.CausesValidation = false;
                Close();
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T07:46:59.240

除了前面的答案，这个方法也适用：

```
private void Input_FormClosing(object sender, FormClosingEventArgs e)
        {

          e.Cancel = false;

        } 
```

# c# - 如何让 Automapper 在目标对象中设置对源对象的引用？

> ID：13899318
> 
> 赞同：2
> 
> 时间：2012-12-16T07:04:58.777
> 
> 标签：c#, .net, automapper

在我忙于编写的应用程序中，我所有的映射目标对象都派生自这样的基类：

```
public class CatalogObject<TObject>
{
    TObject InnerObject { get; set; }
}

public class CatalogTable : CatalogObject<table>
{
    public string Name { get; set; }
    public int ObjectId { get; set; }
} 
```

现在，在将对象映射`table`到`CatalogTable`对象之后，我希望该`InnerObject`目标的属性成为对源`table`对象的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:30:04.397

您可以使用[自定义解析器](https://github.com/AutoMapper/AutoMapper/wiki/Custom-value-resolvers)来做到这一点：

```
Mapper.CreateMap<Table, CatalogTable>()
    .ForMember(dest => dest.InnerObject,
               opt => opt.ResolveUsing<InnerObjectResolver>()); 
```

解析器看起来像这样：

```
public class InnerObjectResolver : ValueResolver<Table, Table>
{
    protected override Table ResolveCore(Table source)
    {
        return source;
    } 
```

}

完整的详细信息可以在[自定义解析器文档](https://github.com/AutoMapper/AutoMapper/wiki/Custom-value-resolvers)中找到。

您也可以直接执行此操作，但我没有尝试过。可能是这样的：

```
Mapper.CreateMap<Source, Destination>()
    .ForMember(dest => dest.InnerObject, opt => opt.MapFrom(src => src)); 
```

# controller - 如何在batmanjs中实现导航菜单

> ID：13899321
> 
> 赞同：1
> 
> 时间：2012-12-16T07:05:29.040
> 
> 标签：controller, navigation, batman.js

我正在尝试构建一个导航菜单，根据当前控制器操作突出显示当前导航项；但我找不到任何东西告诉我该怎么做！如何定义我的导航结构并映射到我的控制器？以及如何识别当前的导航项？在 Shopfiy 我注意到他们使用数据部分视图绑定，它将选定的类分配给当前导航项，他们是如何做到的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:57:51.323

在可能将[data-addclass binding](http://batmanjs.org/docs/batman.html#batman-view-bindings-data-addclass-data-removeclass)与[equals view filter](http://batmanjs.org/docs/batman.html#batman-view-filters-equals)一起使用的解决方案上。

您在 data-foreach-item 循环中的导航项将如下所示：

```
<div
  class="navigation-item"
  data-route="routes.navigation[item]"
  data-addclass-selected="item | equals controllers.navigation.selectedItem">
</div> 
```

在您的控制器中，您应该有成员 selectedItem ，该成员会在选择项目时设置。

# java - javac如何计算public static final int NaN = 0 / 0？

> ID：13899322
> 
> 赞同：0
> 
> 时间：2012-12-16T07:06:44.753
> 
> 标签：java

我想知道 javac 是如何计算这个常量表达式的？

```
class Test {
   public static final int NaN = 0 / 0;
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T07:15:19.173

它在[Java 语言规范 §15.17.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7.2)中定义：

> 有一种特殊情况不满足此规则：如果被除数是其类型的最大可能量级的负整数，并且除数为-1，则发生整数溢出并且结果等于被除数。尽管溢出，在这种情况下不会抛出异常。另一方面，如果整数除法中除数的值为0，则`ArithmeticException`抛出an。

这意味着什么：如果被除数为 0，那么除数是什么并不重要；它会直接抛出`ArithmeticException`。

现在，如果您使用的是*doubles*`NaN` ，那将通过[JLS §15.17.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)给您回报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T07:23:17.010

Java 的整数原始类型中没有“NaN”或“Inf”值的表示。（或者在大多数其他语言中。）

实际发生的是 an`ArithmeticException`将被抛出......在运行时。

由于这个表达式是在类的静态初始化中求值的，初始化类将失败，任何其他依赖于它的类也将初始化失败。很有可能您的应用程序甚至不会进入该`main`方法的第一个语句。

# c# - 访问远程 MSMQ 计数

> ID：13899325
> 
> 赞同：2
> 
> 时间：2012-12-16T07:07:47.707
> 
> 标签：c#, msmq

我的机器位于域 D1 中，并且域 D2 中的远程服务器中有公共 MSMQ。我通过 vpn 连接到 D2，即我可以在 D2 中 RDP 机器并访问 MSMQ。

我想要的是访问（知道消息计数）的 MSMQ 而不 RDPing 系统。所以我为此构建了一个应用程序。我使用 Impersonation 来模拟 D2 的用户（即使用 D2 的凭据）但问题是我无法访问“公共”MSMQ（使用 Messagequeue.GetPublicQueue() ）并且抛出异常消息“工作组安装计算机不支持操作。” 但是当我使用 MessageQueue.GetPrivateQueue() 它返回一个私有队列的集合。

我尝试将 MSMQManager 用于 messageCount `Path = @"Direct:OS:machine\publicqueue"; FormatName=null; new MSMQManager.inIt(machineName, path , FormatName);` 这也会引发异常，即队列不存在或未打开。但我可以检查队列是否工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:13:10.973

你愿意做一点点编程吗？如果没有，您是否愿意使用 PowerShell？

无论哪种方式 - 我都会查看[这篇文章](https://stackoverflow.com/questions/2289464/the-number-of-messages-on-an-msmq-via-powershell)，因为它似乎包含您正在寻找的答案。

祝你好运，希望这会有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T10:57:52.543

*   您的问题可能是您正在**远程**工作。

该方法`GetPublicQueuesByMachine()`确实**不适**用于远程访问。

您可以在 MSDN 文档的功能矩阵中看到这一点：[MessageQueue.GetPublicQueuesByMachine](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.getpublicqueuesbymachine.aspx)：

> 下表显示了此方法是否适用于各种工作组模式。
> 
> ```
>  Workgroup mode                         Available
>  --------------                         ---------
>  Local computer                         No
>  Local computer and direct format name  No
>  Remote computer                        No
>  Remote computer and direct format name No 
> ```

*   还要检查队列的访问权限。

如果我在前面的建议中错了，它可能就像试验网络中特定用户的访问权限一样简单。

MSDN 文章[公共和私有队列](http://technet.microsoft.com/en-us/library/cc776346%28v=ws.10%29.aspx)状态：

> 公共队列的默认安全访问权限授予每个人向公共队列发送消息的权限。**必须授予特定权限才能进行读取访问。**

*   至于实际的消息计数，John Opincar 在这里写了一篇关于计数消息的好文章：[Counting Messages in an MSMQ MessageQueue from C#](http://jopinblog.wordpress.com/2008/03/12/counting-messages-in-an-msmq-messagequeue-from-c/)

# c++ - 错误打印地图的元素值

> ID：13899326
> 
> 赞同：1
> 
> 时间：2012-12-16T07:07:58.813
> 
> 标签：c++, map

```
map<char, int> counter;

//some code...

map<char, int>::iterator iter;

for (i = 0; i<26; i++) 
    {
    for (iter = counter[i].begin(); iter != counter[i].end(); iter++)  //error occurs
         {
         cout << (*iter).first << " - " << (*iter).second << endl;
         }

    } 
```

我不确定此错误消息的含义： *error: request for member âbeginâ in âcounter.std::map<_Key, _Tp , _Compare, _Alloc>::operator[] [with _Key = char, _Tp = int, _Compare = std::less, _Alloc = std::allocator >, std::map<_Key, __Tp, _Compare, _Alloc>::mapped_type = int, std::map<_Key, _Tp, _Compare, _Alloc>::key_type = char]((* &((std::map::key_type)j)))â，属于非类* *type âstd::map::mapped_type {aka int}â*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:11:09.387

counter 是一个映射而不是一个映射数组，一个从 begin() 到 end() 的 for 循环就足够了，将您的 for 循环更改为下面的代码。

```
 map<char, int> counter;

   //some code...

    for (map<char, int>::iterator iter = counter.begin(); iter != counter[i].end(); ++iter)
    {
       cout << (*iter).first << " - " << (*iter).second << endl;
    } 
```

# wcf - 如何在 Silverlight 中隐藏 WCF 服务地址？

> ID：13899327
> 
> 赞同：0
> 
> 时间：2012-12-16T07:08:07.183
> 
> 标签：wcf, silverlight, security

我们有使用 WCF 服务的 silverlight 应用程序。在渗透测试期间，我们发现了一些问题。建议之一是在 silverlight 端对 WCF 服务地址进行加扰/加密。

这是一种标准做法还是有任何价值？如果服务是安全的，用户是否能够通过知道 WCF 服务位置来获得任何信息。因为用户总是可以反编译silverlight xap，了解我们是如何加密WCF地址的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:34:13.513

在您提供的数据中隐藏秘密（例如在客户端代码中）是一个众所周知的难题。基本上，这就是 DRM 系统试图做的事情，而且它们都不是防黑客的。如果您将秘密和检索该秘密的代码都提供给某人，那么有人会找出秘密。正如 JeffN825 指出的那样，您始终可以使用线路监控工具来找出地址（HTTPS 地址有点困难，但仍然可能）。因此，我不会在隐藏地址方面付出太多努力，这只是隐蔽的安全性，只会延迟潜在的攻击者。如果该服务需要用户身份验证，我将只专注于使该部分安全。如果您尝试验证应用程序，而不是用户，这是一个更困难的问题，需要一个完整的单独讨论，但它'

# asp.net - 更新 ASP.NET 网站而不丢掉网站用户

> ID：13899328
> 
> 赞同：0
> 
> 时间：2012-12-16T07:08:07.970
> 
> 标签：asp.net, iis, web, web-config, application-restart

我正在运行经常修改的 ASP.NET 4.0 网站（不是 Web 项目）。页面更新顺利，但是一些关键文件，如 web.config 或资源文件更新会导致网站重新启动并将用户从网站中抛出，使他们再次登录并失去他们的会话。解决问题的可能方法是什么。理想的情况是允许现有用户使用旧版本并新登录以使用新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:05:38.350

您可以使用不同的会话存储模式，例如 StateServer 或 SQLServer。阅读有关状态模式的更多信息[http://msdn.microsoft.com/en-us/library/ms178586(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178586(v=vs.100).aspx)。默认情况下，ASP.NET 使用 InProc 会话存储，只要应用程序池刷新（例如更改 web.config 文件时），这些会话存储就会丢失。

这是 MSDN 上的另一篇文章，它指导您完成如何设置 SQLServer 会话：http: [//support.microsoft.com/kb/317604](http://support.microsoft.com/kb/317604)

# c++ - 使用 boost::asio 提升线程池

> ID：13899329
> 
> 赞同：1
> 
> 时间：2012-12-16T07:08:13.767
> 
> 标签：c++, multithreading, boost, boost-thread

我正在尝试使用带有工作队列的 boost asio 创建 boost 线程池。但是我被困在一个点上，我需要一个监控功能，它应该保持运行并跟踪队列。我不知道怎么写，目前我把它放在我的线程池类中。我也在尝试用全局函数编写单独的线程。有人可以提出任何建议吗？

```
#include <boost/thread/thread.hpp>
#include <boost/asio.hpp>
#include<memory>
#include<vector>
#include<list>

using namespace std;

class threadWork
{
public:
virtual void run()=0;
};

class thread_pool 
{ 
private: 
  boost::asio::io_service io_service_; 
  boost::asio::io_service::work work_; 
  boost::thread_group threads_; 
  std::size_t available_; 
  boost::mutex mutex_;

  list<shared_ptr<threadWork>> workQueue;

public: 

  thread_pool( std::size_t pool_size ) : work_( io_service_ ), available_( pool_size ) 
  { 
    for ( std::size_t i = 0; i < pool_size; ++i ) 
    { 
      threads_.create_thread( boost::bind( &boost::asio::io_service::run, &io_service_ ) ); 
    } 
  } 

  ~thread_pool() 
  { 

    io_service_.stop(); 

try 
    { 
      threads_.join_all(); 
    } 
    catch ( ... ) {} 
  } 

  void enqueue(shared_ptr<threadWork> work)
  {
  workQueue.push_back(work);
  }

  void keepRunning() // how to call this ?
  {
  while(true)
  {
      boost::unique_lock< boost::mutex > lock( mutex_ ); 

      if ( 0 == available_ ) // If no threads are available, then sleep. 
      {
          boost::this_thread::sleep(boost::posix_time::milliseconds(1000));
      }
      else
      {

          if(workQueue.empty() != true)
          {
               --available_;  
               io_service_.post( boost::bin(&thread_pool::wrap_task,this , workQueue));
               workQueue.pop_front();
          }
      }
  }
  }

 private: 

  void wrap_task(list<shared_ptr<threadWork>>& workQueue ) 
  { 
    try 
    { 
    workQueue.front()->run(); // Run the user supplied task. 
    } 

catch ( ... )  // Suppress all exceptions. 
{

} 

boost::unique_lock< boost::mutex > lock( mutex_ );  
    ++available_; 
  } 
}; 

class someWork:public threadWork
{
public:
virtual void run()
{
    cout<<"some long task \n";
     boost::this_thread::sleep(boost::posix_time::milliseconds(5000));
}
};

int main()
{

thread_pool pool(10);

pool.keepRunning(); // this stuck code so where to start this ?

shared_ptr<threadWork> w(new someWork);

pool.enqueue(w);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-30T18:28:43.967

您可以使用`boost::asio::deadline_timer`定期`io_service`更新表示队列长度的原子变量。类成员函数可以按需返回队列长度（按值）。

# jquery - 如何为图像的映射部分分配唯一 ID 并将其与数据库链接

> ID：13899332
> 
> 赞同：1
> 
> 时间：2012-12-16T07:08:33.023
> 
> 标签：jquery, html, database, google-maps, image-processing

我已经创建了建筑物平面图的图像地图。现在我想存储图像的映射部分，每个映射都有其唯一的 id。然后将ID存储到mysql数据库表中。这样我就可以通过从数据库表中指定其位置 ID 来突出显示（或放置标记）图像的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:09:24.040

This requirement can certainly be met.

In summary, the component parts of the application will be something like this :

*   Storage of user data: database
*   Storage of map area coordinates: database
*   Retrieval of user data and map coordinates from database: PHP*/SQL
*   Composition of document (including image maps): PHP*
*   Client-server communication: (jQuery) AJAX
*   Area highlighting: (jQuery) [MapHighlight plugin](http://davidlynch.org/projects/maphilight/docs/)

 * *typically*

You really need to have a go at writing some code, then ask again when you run into difficulty.

# android - 如何检测我以外的应用程序的状态？

> ID：13899335
> 
> 赞同：0
> 
> 时间：2012-12-16T07:09:17.737
> 
> 标签：android, application-state

我环顾四周，但所有建议都是为了检查我自己的应用程序/活动的状态。使用生命周期。我需要检查另一个应用程序是否在前台/在后台运行/暂停。是否可以。根据应用程序的状态，我需要更改我的进一步操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:16:32.033

```
ActivityManager acm=(ActivityManager) getSystemService(ACTIVITY_SERVICE);
List< ActivityManager.RunningTaskInfo > taskInfo = acm.getRunningTasks(1); 
taskInfo.get(0).topActivity.getClassName();
ComponentName componentInfo = taskInfo.get(0).topActivity;
String packageName=componentInfo.getPackageName(); 
```

我使用活动管理器查找顶部包/活动，如果这与我向应用程序发送广播的要求相匹配，该应用程序将更新数据库中的信息。这可以通过使用 onResume 中的代码注册广播接收器并在 OnPause 中取消注册来简单地完成。所以检查 Top 包就变成了双重检查。

# javascript - 使用多次使用的类名隐藏下一个 Div？

> ID：13899336
> 
> 赞同：0
> 
> 时间：2012-12-16T07:09:18.407
> 
> 标签：javascript, jquery, html, css

我让自己很困惑，试图在页面上隐藏带有 .video 类的下一个 Div。我正在尝试使用它，以便页面上具有相同类的稍后 div 不受输入按钮元素的影响，并且只有在按钮之后具有“.video”类的下一个 div （如果有意义的话）。

我目前拥有它，所以所有 div 都受到影响，我尝试使用 .next 和 .find，但对于我的生活，我无法让它工作，我尝试在谷歌上搜索解决方案，但一切似乎都不是我所需要的，也许我用谷歌搜索了错误的东西，我不确定，但希望有人可以在这里为我提供某种形式的答案，这样我的心终于可以放心了！

[所以这是当前的页面](http://kieranmonaghan.com/test/)

正如您所看到的，该按钮隐藏/显示了应有的元素......但它也会影响后面的元素。

我不太确定如何编写一个使用 jQuery 的脚本，所以后面的脚本不会受到影响......我的大脑一直在颤抖，但也许是在深夜（或者更确切地说是早上！），我只是在我昏昏欲睡的状态下无法理解...

希望你们中的一个能够告诉我该怎么做。

[我目前使用的脚本也可以在这里找到](http://kieranmonaghan.com/test/scripts/jquery/init.js)

我感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:17:16.647

试试这个：

```
$(document).ready(function(){
  $('.showhide').click(function(){
    $(this).parent().next('.video').toggle();
    //------^^^^^^^^^^^^^------------------------added to find the video of the parent's next
       if($('.video').is(':visible')){
          $('.showhide').attr('value','Hide Video');;
       } else {
          $('.showhide').attr('value','Show Video');;
       }
   });
}); 
```

我在小提琴中使用了您的 html，请参阅小提琴：http: **[//jsfiddle.net/8h7hP/](http://jsfiddle.net/8h7hP/)**

# database - 我们可以使用 JSON 作为数据库吗？

> ID：13899342
> 
> 赞同：33
> 
> 时间：2012-12-16T07:10:28.903
> 
> 标签：database, json

我正在寻找快速高效的数据存储来构建我的基于 PHP 的网站。我知道MySql。我可以在我的服务器根目录中使用 JSON 文件而不是 MySQL 数据库吗？如果是，最好的方法是什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-16T07:36:45.393

您可以使用任何单个文件，包括 JSON 文件，如下所示：

*   以某种方式锁定它（谷歌 PHP 文件锁定，它可能就像向文件打开函数添加参数或将函数名称更改为锁定版本一样简单）。

*   从文件中读取数据并将其解析为内部数据结构。

*   可选择修改内部数据结构中的数据。

*   如果您修改了数据，请将文件截断为 0 长度并将新数据写入其中。

*   尽快解锁文件，其他请求可能正在等待...

*   您可以继续使用内部结构中的数据来呈现页面，只要记住它可能会在您释放文件锁定并且其他 HTTP 请求可以修改它时立即过时。

此外，如果您修改用户 Web 表单中的数据，请记住它可能已在两者之间进行了修改。就像，加载带有用户详细信息的页面以进行编辑，然后其他用户删除该用户，然后编辑器尝试保存更改的详细信息，并且应该可能会出错而不是重新创建已删除的用户。

**注意**：这是非常低效的。如果您正在构建一个您希望同时拥有 10 个以上用户的网站，您必须使用更复杂的方案，或者只使用现有数据库...此外，您不能拥有太多数据，因为解析 JSON 并生成修改过的JSON 需要时间。

只要您一次只有一个用户，它就会随着数据量的增长而变得越来越慢，但是随着用户数量的增加，并且更多的用户意味着更多的请求*和*更多的数据，事情开始以*指数*方式变慢并且在文件可用于处理请求之前，您很快就会达到 HTTP 请求开始过期的限制......

此时，不要试图破解它以使其更快，而是选择一些现有的数据库框架（SQL 或 nosql 或基于文件的）。如果你开始自己破解，你最终只会重新发明轮子，通常很糟糕:-)。好吧，除非它只是编程练习，但即便如此，学习使用一些现有框架可能会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-28T10:19:58.037

我写了一个对象文档映射器来与名为[JSON ODM](https://github.com/konsultaner/jsonOdm)的 json 文件一起使用可能有点晚，但如果仍然需要它，它是 MIT 许可证下的开源。

它提供了查询语言和一些[GeoJSON](http://geojson.org/)工具

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-17T18:21:22.127

IBM Informix 12.10 xC2 的新版本现在支持 JSON。
检查链接： http: [//pic.dhe.ibm.com/infocenter/informix/v121/topic/com.ibm.json.doc/ids_json_007.htm](http://pic.dhe.ibm.com/infocenter/informix/v121/topic/com.ibm.json.doc/ids_json_007.htm)

手册说它与 MongoDB 驱动程序兼容。

> 关于 Informix JSON 兼容性
> 
> 使用由 MongoDB 创建的面向 JSON 的查询语言的应用程序可以与存储在 Informix® 数据库中的数据进行交互。Informix 数据库服务器还提供内置的 JSON 和 BSON（二进制 JSON）数据类型。
> 
> 您可以使用 MongoDB 社区驱动程序在 Informix 中插入、更新和查询 JSON 文档。

不确定，但我相信您可以使用 Innovator-C 版本（免费用于生产）进行测试，并且在生产环境中免费使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-31T07:12:48.430

当您更喜欢 JSON（或其他文件格式）而不是数据库时，一个明显的情况是您的所有（相对较小的）数据都存储在应用程序缓存中。

当应用程序服务器（重新）启动时，应用程序从文件中读取数据并将其存储在数据结构中。

当数据更改时，应用程序会更新文件。

优点：没有数据库。

缺点：由于多种原因，只能用于数据相对较少的系统。例如，具有数百种产品的非常具体的产品站点。

# php - glob() 函数只返回 php 中的空数组

> ID：13899348
> 
> 赞同：0
> 
> 时间：2012-12-16T07:11:18.577
> 
> 标签：php, glob

我一直在尝试制作一个简单的网站，让您可以指定一个目录，并在用户指定的任何目录中为每个 mp3 嵌入一个播放器。问题是无论我如何输入目录名， glob() 都不会返回任何文件。我已经尝试过使用本地文件夹、服务器目录以及与 php 文件相同的文件夹。

'directoryPath' 是用户输入的文本框的名称，你猜对了，就是目录路径。'echo $files' 语句在屏幕上不显示任何内容。'echo "test"' 语句确实运行，但循环中的 'echo "hello"' 语句不执行。

任何帮助表示赞赏！

```
if (!empty($_POST['directoryPath']))
{
    $path = ($_POST['directoryPath']);
    $files = glob("$path/{*.mp3}", GLOB_BRACE);
    echo $files[0];
    echo "test";
    foreach($files as $i)
        {
            echo "hello";
            echo $files[$i];
            ?>
                <embed src=<?php $files[$i]; ?> width=256 height=32 autostart=false repeat=false loop=false></embed><?php echo $files[$i] ?></p>
            <?php;
        }
    unset($i);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:23:12.183

首先验证输入：

```
$path = realpath($_POST['directoryPath']);
if (!is_dir($path)) {
    throw new Exception('Invalid path.');
}
... 
```

另外检查返回值是否[`glob`](http://php.net/glob)返回`false`错误。检查该情况（并确保您没有使用那些甚至`false`在没有找到文件时返回的系统之一）。

我希望这是有帮助的。是的，检查您的错误日志并启用错误日志记录。这样你就可以看到出了什么问题。

另请参阅以下相关函数的用法示例和语法`GLOB_BRACE`：

*   [从包含的脚本运行 glob() 返回空数组](https://stackoverflow.com/questions/6883554/running-glob-from-an-included-script-returns-empty-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T08:06:10.420

我发现在帮助调试 PHP 中的变量方面非常有用的一种工具是[var_dump()](http://php.net/var-dump)。它是一个函数，可为您提供有关变量类型、内容以及可以从该变量获得的任何有用元数据的信息。这对您来说将是一个非常有用的工具，因为您会很快意识到变量`$i`中的内容与您所期望的完全不同。

```
$files = glob("$path/{*.mp3}", GLOB_BRACE);
foreach ($files as $i) {
    var_dump($i);
}
/* Here's a hint, $i is not an index to the $files array.
   So $files[$i] makes no sense. $i is actually the value not the key.*/
foreach ($files as $key => $value) { // very different from
    // $key is the key to the current element of $files we're iterating over
    // $value is the value of the current element we're iterating over
} 
```

所以在你的代码`$i`中是值而不是键。有关该构造如何工作的更多信息，请参见[http://php.net/foreach](http://php.net/foreach)。

另外，这里应该注意的是您使用的是相对路径，而 glob 将返回绝对路径。相对这意味着您的搜索相对于 PHP 脚本的 CWD（*当前工作目录*）。要查看那是什么，您可以使用以下代码。

```
var_dump(real_path('.'));
// similarly ...
var_dump(getcwd()); 
```

# html - 如何通过注释通过 youtube 视频链接到外部站点

> ID：13899352
> 
> 赞同：4
> 
> 时间：2012-12-16T07:12:23.203
> 
> 标签：html, youtube, youtube-api, youtube-javascript-api

有没有办法通过创建注释链接通过 YouTube 视频链接到外部网站？

也就是说，链接嵌入在视频中。[**这个视频**](http://www.youtube.com/watch?v=T8XmdQjJ7BM)中给出了我想要的一个例子。查看时，左下角有一个链接。

可以使用“ **LinkedTube** ”来完成，但它不是“**注释**”样式。

我也搜索了**Youtube API**，但没有找到与注释控制相关的任何内容。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:39:13.227

Youtube默认禁止外链，但还是可以插入外链的。为此，您有两种选择：

1.  有一个付费账户
2.  购买一定数量的广告

我认为您必须与 youtube 销售人员联系以讨论详细信息。

PS：我们[在这里](http://www.youtube.com/watch?annotation_id=annotation_144671&feature=iv&index=62&list=PL629EC036F159E5DE&src_vid=3Gs7y5tCTeY&v=aGIPB19mIv0)使用了外部链接，请查看视频的右上角。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:32:28.277

如果您将视频上传到您的 YouTube 帐户，则可以这样做。

在设置中，您将输入视频播放时要显示的链接和文本。

YouTube 上有一些教程可以准确显示要执行的步骤，例如[**这个**](http://www.youtube.com/watch?v=fbIhWvlQ388)。

# javascript - $(".elem[数据名='+var+']")

> ID：13899360
> 
> 赞同：0
> 
> 时间：2012-12-16T07:15:06.727
> 
> 标签：javascript, jquery, jquery-selectors

```
$(".singleMember[data-id='+id+']"); 
```

`id`是一个变量，它不能这样工作，没有错误。
这个怎么选的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:23:55.887

开始。我认为您在使用“和”时遇到了字符串常量问题。因此，我将 id 添加到您的字符串中“。

```
$(".singleMember[data-id='"+id+"']"); 
```

# c# - 简单列表 vs IEnumarble 性能问题

> ID：13899362
> 
> 赞同：1
> 
> 时间：2012-12-16T07:15:11.690
> 
> 标签：c#, performance, collections

我已经用and循环测试了`List<string>`vs`IEnumerable<string>` 迭代，列表是否可能更快？`for``foreach`

这些是我能找到的几个链接中的 2 个，它们公开声明性能更好地`IEnumerable`迭代`List`。

[链接](http://he.scribd.com/doc/93775737/What-is-The-Difference-Between-IEnumerable-and-List) [1 链接2](http://venkyshandbook.blogspot.co.il/2012/01/ienumerable-vs-list.html)

我的测试是从一个包含 URL 列表的文本文件中加载 10K 行。

我首先将其加载到 List ，然后将 List 复制到 IEnumerable

```
List<string> StrByLst = ...method to load records from the file .
IEnumerable StrsByIE =  StrByLst; 
```

所以每个都有 10k 个项目类型`<string>`

在每个集合上循环 100 次，意味着 100K 次迭代，结果是

`List<string>`比 **_** _`IEnumerable<string>`

这是可以预测的吗？

*   更新

这是进行测试的代码

```
string WorkDirtPath = HostingEnvironment.ApplicationPhysicalPath;
    string fileName = "tst.txt";
    string fileToLoad = Path.Combine(WorkDirtPath, fileName);
    List<string> ListfromStream = new List<string>();
    ListfromStream =  PopulateListStrwithAnyFile(fileToLoad) ;
    IEnumerable<string> IEnumFromStream = ListfromStream ;

    string trslt = "";
    Stopwatch SwFr = new Stopwatch();
    Stopwatch SwFe = new Stopwatch();

    string resultFrLst = "",resultFrIEnumrable, resultFe = "", Container = "";

    SwFr.Start();

    for (int itr = 0; itr < 100; itr++)
    {
        for (int i = 0; i < ListfromStream.Count(); i++)
        {
            Container = ListfromStream.ElementAt(i);
        }
    //the stop() was here , i was doing changes , so my mistake.
    }

   SwFr.Stop();
   resultFrLst = SwFr.Elapsed.ToString();
   //forgot to do this reset though still it is faster (x56??)
   SwFr.Reset();
   SwFr.Start();
        for(int itr = 0; itr<100; itr++)
        {
            for (int i = 0; i < IEnumFromStream.Count(); i++)
            {
                Container = IEnumFromStream.ElementAt(i);
            }
        }
    SwFr.Stop();
    resultFrIEnumrable = SwFr.Elapsed.ToString(); 
```

**更新...最终**

将计数器移到 for 循环之外，

`int counter = ..count`对于 IEnumerable 和 List

然后按照@ScottChamberlain 的建议将 counter(int) 作为项目总数传递。重新检查所有东西都已到位，现在结果比 IEnumerable 快 5 %。因此得出结论，按场景使用 - 用例......根本没有性能差异......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T07:22:06.460

你做错了什么。

你得到的时间应该非常接近，因为你运行的是基本相同的代码。

IEnumerable 只是 List 实现的一个接口，因此当您在 IEnumerable 引用上调用某个方法时，它最终会调用 List 的相应方法。

IEnumerable 中没有实现代码——这就是接口——它们只指定一个类应该具有的功能，但没有说明它是如何实现的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T07:55:13.703

您的测试有一些问题，一个是循环`IEnumFromStream.Count()`内部`for`，每次它想要获取该值时，它必须枚举整个列表以获取计数，并且该值不会在循环之间缓存。将该调用移出`for`循环并将结果保存在 a 中`int`并将该值用于`for`循环，您将看到 IEnumerable 的时间更短。

与它类似的`IEnumFromStream.ElementAt(i)`行为也`Count()`必须遍历整个列表直到`i`（例如：第一次`0`，第二次`0,1`，第三次`0,1,2`，等等......）每次`List`可以直接跳转到它需要的索引。您应该使用[`IEnumerator`](http://msdn.microsoft.com/en-us/library/78dfe2yb.aspx)返回的 from[`GetEnumerator()`](http://msdn.microsoft.com/en-us/library/s793z9y2.aspx)而不是。

`IEnumerable`'s 和`for`loop's 不能很好地混合。使用正确的工具来完成工作，要么调用[`GetEnumerator()`](http://msdn.microsoft.com/en-us/library/s793z9y2.aspx)并使用它，要么`foreach`循环使用它。

* * *

现在，我知道你们中的很多人可能会说“但它是一个接口，它只是映射调用，应该没有区别”，但有一个关键，`IEnumerable<T>` ***没有`Count()`or`ElementAt()`方法！***. 这些方法是 LINQ 添加的扩展方法，并且 LINQ 类不知道底层集合是一个 List，所以它会做它知道底层对象可以做的事情，那就是每次调用该方法时迭代列表。

* * *

## `IEnumerable`使用`IEnumerator`

```
using(var enu = IEnumFromStream.GetEnumerator())
{
    //You have to call "MoveNext()" once before getting "Current" the first time,
    //   this is done so you can have a nice clean while loop like this.
    while(enu.MoveNext())
    {
        Container = enu.Current;
    }
} 
```

上面的代码基本上是一样的

```
foreach(var enu in IEnumFromStream)
{
    Container = enu;
} 
```

要记住的重要一点是`IEnumerable`'s 没有长度，实际上它们可以无限长。计算机科学的[整个领域](http://en.wikipedia.org/wiki/Cycle_detection)都在检测无限长的`IEnumerable`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T07:36:48.590

根据您发布的代码，我认为问题出在您对`Stopwatch`课程的使用上。

您声明其中两个，`SwFr`and `SwFe`，但只使用前者。因此，最后一次调用将获得*两组*循环的`SwFr.Elapsed`总时间。*`for`*

 *如果您想以这种方式重用该对象，请立即调用`SwFr.Reset()`after `resultFrLst = SwFr.Elapsed.ToString();`。

或者，您可以`SwFe`在运行第二个测试时使用。*

# ruby-on-rails - 在 Ruby on Rails 上通过 form_tag 表单上传文件

> ID：13899364
> 
> 赞同：2
> 
> 时间：2012-12-16T07:16:06.710
> 
> 标签：ruby-on-rails, forms, tags, ruby-on-rails-3.2

我想在 Rails 3.2.8 上使用 tag_form 制作一个简单的文件上传器。
但是当我尝试提交图像文件时，我收到一条

**错误消息（当我尝试提交图像文件时）**

> CoursesController#attachment 中的 NoMethodError
> 未定义方法“original_filename”，用于“2012-03-02 21.53.55.jpg”：字符串

----- BEGIN PS(20121216 19:32) -----
或 **错误消息（当我在 show.html.erb 上添加“：multipart => true”时）**

> 从 ASCII-8BIT 到 UTF-8 CoursesController#attachment
> "\xFF"中的编码::UndefinedConversionError

----- END PS -----

似乎程序将文件视为字符串？
视图文件中可能存在一些问题。

如果您能帮我解决这个问题，我将不胜感激。这是我的代码。

**应用程序/视图/show.html.erb**

```
<%= form_tag(attachment_course_path, :action=>'attachment') do %>
<div class="field">
  <%= label_tag :file %>
  <%= file_field_tag :file %>
</div>
<div class="actions">
  <%= submit_tag 'Submit' %>
</div>
<% end %> 
```

**应用程序/控制器/courses_controller.rb**

```
def attachment
  t = Time.now.strftime("%Y%m%d%H%M%S")
  uploaded_io = params[:file]
  File.open(Rails.root.join('public', 'upload', uploaded_io.original_filename), 'w') do |file|
    file.write(uploaded_io.read)
  end
end 
```

**配置/路由.rb**

```
resources :courses, :only => [ :show ] do
  member do
    post :attachment
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T08:18:46.570

似乎表单没有发送带有请求的文件。您需要在 form_tag 中设置 :multipart => true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:23:27.897

问题似乎类似于[RoR upload Undefined encoding conversion](https://stackoverflow.com/questions/13909812/error-ruby-on-rails-encodingundefinedconversionerror-in-coursescontrollerat)

设置后`:multipart => true`，`form_tag`您需要以二进制模式（`'wb'`而不是`'w`'）打开文件：

**应用程序/控制器/courses_controller.rb**

```
...
File.open(Rails.root.join('public', 'upload', uploaded_io.original_filename), 'wb') do |file|
  file.write(uploaded_io.read)
end
... 
```

# iphone - 在 iPhone 中将瑞典语字母转换为英文字符串

> ID：13899366
> 
> 赞同：0
> 
> 时间：2012-12-16T07:16:30.640
> 
> 标签：iphone, objective-c

我需要转换

```
@"V&#228;sterg&#246;k&#32;&#38;&#32;&#214;sterg&#246;k" 
```

在 iPhone 中将字符串转换为英文字符串。但直到现在还没有运气。

我努力了

```
 const char *cc = [d cStringUsingEncoding:NSISOLatin1StringEncoding];
    NSString *newString = [[NSString alloc]initWithCString:cc encoding:NSUTF8StringEncoding];
    NSLog(@"%@",newString); 
```

请在这里帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:07:15.247

下载[这个项目](https://github.com/mwaterfall/MWFeedParser)。
将这些文件复制到您的项目中
`NSString+HTML.h`
`NSString+HTML.m`
`GTMNSString+HTML.h`
`GTMNSString+HTML.m`

`#import "NSString+HTML.h"`在您要解码 html 字符串的文件中。

使用代码作为

```
NSString *htmlStr = @"V&#228;sterg&#246;k&#32;&#38;&#32;&#214;sterg&#246;k" ;
NSString *notmarStr = [htmlStr stringByDecodingHTMLEntities];
NSLog(@"%@",notmarStr); 
```

`Output:Västergök & Östergök`

# jquery - 如何找到单击了哪个元素

> ID：13899369
> 
> 赞同：0
> 
> 时间：2012-12-16T07:17:28.410
> 
> 标签：jquery

> **可能重复：**
> [Javascript：找出单击了哪个元素而不附加任何事件监听器？](https://stackoverflow.com/questions/7130232/javascript-find-out-which-element-was-clicked-without-attaching-any-eventlisten)

如果我有以下 html，是否可以使用 JQuery 判断用户单击了哪个元素？

```
 <div id="left">
      <div id="item1">1</div>
      <div id="item2">2</div>
    </div> 
```

* * *

```
 $('#left').click(function(){

  }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T07:20:52.543

你的意思是：

```
$('#left').click(function(evt){
    console.log( $(evt.target).attr("id") ); //shows either item1 or item 2
}); 
```

演示：[jsFiddle](http://jsfiddle.net/arfCV/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T07:25:34.510

尝试使用 $(this) 来了解单击了哪个元素

```
$('#left div').click(function(e){
 alert($(this).attr("id"));
  }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T07:22:13.743

```
 $('#left div').click(function(e){
  var s = e.target.id;
  alert(s);
  }); 
```

[http://jsfiddle.net/CyV3j/](http://jsfiddle.net/CyV3j/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T07:44:40.463

我不是复印机！让我们以纯js的方式进入！

```
document.getElementById('left').onclick = function(e) {
    var s = e.target.id;
    alert(s);
} 
```

​​​​​​​​​​​​</p>

# java - Java 电子邮件验证中的编译器错误

> ID：13899370
> 
> 赞同：0
> 
> 时间：2012-12-16T07:17:33.603
> 
> 标签：java, compiler-errors

我在 JAVA 中的电子邮件验证遇到问题（对此新手）不断收到这些错误，并且对原因感到困惑。我应该收到这些人的电子邮件，检查它的设定标准（由我的教授），然后获取有关测试的信息。当我检查电子邮件时，如果有错误，我应该显示错误。

错误

```
N:\Programming\Java\Homework\EmailAndGrade.java:29: illegal start of expression
    private static boolean validEmail(sEmail);
    ^
N:\Programming\Java\Homework\EmailAndGrade.java:29: illegal start of expression
    private static boolean validEmail(sEmail);
            ^
N:\Programming\Java\Homework\EmailAndGrade.java:29: ';' expected
    private static boolean validEmail(sEmail);
                  ^
3 errors 
```

代码

```
public class EmailAndGrade
{

    public static void main(String[] args)
    {
        //Variables
        String sEmail, sError, sTest;
        int iTest;
        char cGrade;

        sEmail = JOptionPane.showInputDialog("Enter your email: ");

        private static boolean validEmail(sEmail);
                {
                // editing to make requirements listed
                // return email.matches("[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}");
                return email.matches("[A-Z0-9]{7}+@[springfieldcollege]+\\.[edu]");
                };

        sError = "One or More Errors with the Input Email.\n" +
                 "Email is Empty.\n" +
                 "Email must be less than 30 characters.\n" +
                 "Must end in: @springfieldcollege.edu.\n" +
                 "Can only have one @.\n" +
                 "Must start with A through Z or a through z.\n" +
                 "Can not have: # $ % & ,\n ";

        sTest = JOptionPane.showInptDialog("Enter Test Grade: ");

        iTest = Integer.parseInt(sTest);

        System.exit(0);

    }

    /*
        void checkEmails()
        {
            for(String email : emailAddresses) {
            if(validEmail(email)) {
                 // it's a good email - do something good with it

            }
            else {
                 // it's a bad email - do something... bad to it? sounds dirty...
                JOptionPane.showMessageDialog(null,
                                              sError,
                                              "Email Error - Killian O'Brien",
                                              JOptionPane.INFORMATION_MESSAGE);
                }
    }*/

} 
```

*编辑

好的，现在我有这个代码

```
package com.mkyong.regex;

import javax.swing.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class EmailAndGrade
{

public static void main(String[] args)
{
    //Variables
    String sEmail, sError, sTest;
    int iTest;
    char cGrade;

    sEmail = JOptionPane.showInputDialog("Enter your email: ");

    sError = "One or More Errors with the Input Email.\n" +
             "Email is Empty.\n" +
             "Email must be less than 30 characters.\n" +
             "Must end in: @springfieldcollege.edu.\n" +
             "Can only have one @.\n" +
             "Must start with A through Z or a through z.\n" +
             "Can not have: # $ % & ,\n ";

    sTest = JOptionPane.showInptDialog("Enter Test Grade: ");

    iTest = Integer.parseInt(sTest);

    System.exit(0);

}

public static boolean validEmail(String sEmail){
        return email.matches("[A-Z0-9]{7}+@[springfieldcollege]+\\.[edu]");
    }

public static void checkEmails(){
    for(String sEemail : emailAddresses) {
        if(validEmail(email)) {
            // it's a good email - do something good with it
        }
        else {
            // it's a bad email - do something... bad to it? sounds dirty...
            JOptionPane.showMessageDialog(null,
                                          sError,
                                          "Email Error - Killian O'Brien",
                                          JOptionPane.INFORMATION_MESSAGE);
                 }
             }
             }
} 
```

我现在得到这些

```
N:\Programming\Java\Homework\EmailAndGrade.java:37: cannot find symbol
symbol  : method showInptDialog(java.lang.String)
location: class javax.swing.JOptionPane
        sTest = JOptionPane.showInptDialog("Enter Test Grade: ");
                           ^
N:\Programming\Java\Homework\EmailAndGrade.java:47: cannot find symbol
symbol  : variable emailAddresses
location: class com.mkyong.regex.EmailAndGrade
        for(String email : emailAddresses) {
                           ^
N:\Programming\Java\Homework\EmailAndGrade.java:54: cannot find symbol
symbol  : variable sError
location: class com.mkyong.regex.EmailAndGrade
                                              sError,
                                              ^
N:\Programming\Java\Homework\EmailAndGrade.java:63: cannot find symbol
symbol  : variable email
location: class com.mkyong.regex.EmailAndGrade
        return email.matches("[A-Z0-9]{7}+@[springfieldcollege]+\\.[edu]");
               ^
4 errors 
```

当我输入这个时，我意识到我只有一堆未声明的变量。那会是正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:19:55.197

您正在**另一个**不允许的方法中实现**方法。`validEmail`** `main`将您的方法移出主函数（就在最后一行之前（在类右大括号之前`}`））。**此外，您**在方法实现的两个地方（第一行结束和最后一行结束）使用了额外的分号。删除分号`;`。最后在方法签名中添加**参数类型类（String） 。**更新的方法应如下所示：

```
 private static boolean validEmail(String sEmail){
      // editing to make requirements listed
      // return email.matches("[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}");
      return email.matches("[A-Z0-9]{7}+@[springfieldcollege]+\\.[edu]");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T07:20:47.897

您不能内联声明函数。将您的声明`validEmail()`移到`main()`. 分号也应该从方法声明的末尾删除。

# mod-rewrite - .htaccess 使用 get 参数将所有 .html 页面重定向到 process.php

> ID：13899375
> 
> 赞同：1
> 
> 时间：2012-12-16T07:19:01.780
> 
> 标签：mod-rewrite

我想将所有具有 .html 扩展名的链接重定向到一个 process.php 文件，其中目录+页面名称作为 get 参数。我已经尝试过这些[link1](https://stackoverflow.com/questions/11670997/htaccess-redirect-all-html-pages-to-php-get-variables) [link2](https://stackoverflow.com/questions/4619726/htaccess-redirect-any-urls-ending-in-php-to-index?rq=1)解决方案，但它不起作用。

例如

```
http://localhost/Site/directory1/test1.html
http://localhost/Site/directory2/test2.html 
```

重定向到 process.php 作为

```
http://localhost/Site/process.php?directory1/test1.html
http://localhost/Site/process.php?directory2/test2.html 
```

我试过这样。

```
RewriteEngine on
RewriteRule ^/(.*).html /process.php?page=$1 
```

还有这个

```
RewriteCond %{REQUEST_URI} \.html$
RewriteRule ^(.*/)?([^/]*)\.php$ /process.php?page=$2 [R=301,L] 
```

但它不起作用。

请查看并建议任何可能的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:30:07.720

试试这个：

```
RewriteEngine on
RewriteRule ^([^/]*)/(.*\.html) /$1/process.php?page=$2 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T07:39:09.710

您的第二个示例与我相信您正在寻找的非常接近。当您应该查找 .html 时，您只需通过一个目录并查找 .php。试试这个。

```
RewriteEngine on
RewriteBase /
RewriteRule ^/(.*)/(.*)/(.*)\.html$ /Site/process.php?$2/$3 [R=301, L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T07:32:24.160

这应该这样做（假设 .htaccess 文件位于`Site`目录中）：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} \.html$
RewriteRule ^(.*?/)?(.*)$ /$1/process.php?page=$2 [R=301,L] 
```

# ios - NSLocale 语言问题

> ID：13899379
> 
> 赞同：7
> 
> 时间：2012-12-16T07:19:37.133
> 
> 标签：ios, locale, nslocale

所以在我的应用程序中，我试图获取设备当前设置的语言及其首字母缩写词。所以我这样做：

```
NSString *fullLanguage = [[NSLocale currentLocale] displayNameForKey:NSLocaleIdentifier value:[[NSLocale preferredLanguages] objectAtIndex:0]];
NSString *abrlanguage = [[NSLocale preferredLanguages] objectAtIndex:0]; 
```

然而，一些用户报告说该语言正在返回类似：en_UK 或类似的东西，这反过来又搞乱了我的应用程序的功能。

不管设备的区域设置如何，有没有办法获得设备当前设置的语言？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T04:49:10.767

要获取语言代码，请使用：

```
NSString *languageCode = [[NSLocale currentLocale] objectForKey:NSLocaleLanguageCode];
NSLog(@"%@", languageCode);  // Prints "en" 
```

要获取语言的全名：

```
NSString *languageName = [[NSLocale currentLocale] displayNameForKey:NSLocaleIdentifier value:languageCode];
NSLog(@"%@", languageName);  // Prints "English" 
```

请注意，您使用的是区域代码（它提供了语言的区域变体），并且可以像这样变得更容易：

```
NSString *regionCode = [[NSLocale currentLocale] objectForKey:NSLocaleIdentifier];
NSLog(@"%@", regionCode);  // Prints "en_US" 
```

地区代码以语言代码开头，然后是下划线，然后是地区变体。（这是根据 Apple 的文档进行标准化的。）

此外，如果您使用`currentLocale`，请知道它不会随着用户偏好的更改而更新。`autoupdatingCurrentLocale`如果您想在它们发生变化时保持同步，请改用。

# gnuplot - GNUPLOT：绘制文本文件中参数给出的分布总和

> ID：13899389
> 
> 赞同：1
> 
> 时间：2012-12-16T07:21:25.870
> 
> 标签：gnuplot

假设我有一个包含任意行数的文本文件，其中每一行都给出了一组参数，这些参数定义了一个函数（比如二维高斯的 (x,y) 位置和 sigmas（可能不相等））。例如，在这种情况下，文本文件可能包含：

```
100 112  3 4
97   38  8 9
88   79  3 9
    ...
    ...
102  152 9 5 
```

我想绘制（使用 pm3d）文本文件定义的所有分布的*总和。*怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:26:22.830

**我想绘制（使用 pm3d）文本文件定义的所有分布的总和。怎么可能呢？**

我认为这不能在原生 gnuplot 中完成，至少不是以我所知道的任何理智的方式。这种数字运算并不是 gnuplot 的设计初衷。

然而，Python 让它变得非常可行......

```
#!/usr/bin/env python2

import math
import numpy
import os

class Gaussian(object):
    '''A 2D gaussian function (normalized), defined by
    mx: x mean position
    my: y mean position
    sx: sigma in x
    sy: sigma in y'''

    def __init__(self, mx, my, sx, sy):
        self.mx = float(mx)
        self.my = float(my)
        self.sx = float(sx)
        self.sy = float(sy)

    def value(self,x,y):
        '''Evaluates the value of a Gaussian at a certain point (x,y)'''
    prefactor = (1.0/(self.sx*self.sy*2*math.pi))
    ypart = math.exp(-(x - self.mx)**2/(2*self.sx**2))
    xpart = math.exp(-(y - self.my)**2/(2*self.sy**2))
    return prefactor*ypart*xpart

    def getLimits(self, devs):
        '''Finds the upper and lower x and y limits for the distribution,
        defined as points a certain number of deviations from the mean.'''
        xmin = self.mx - devs*self.sx
        xmax = self.mx + devs*self.sx
        ymin = self.my - devs*self.sy
        ymax = self.my + devs*self.sy

        return (xmin, xmax, ymin, ymax)

def readGaussians(filename):
    '''reads in gaussian parameters from an input file in the format
    mx my sx sy

    This makes some assumptions about how perfect the input file will be'''
    gaussians = []
    with open(filename, 'r') as f:
        for line in f.readlines():
            (mx, my, sx, sy) = line.split()
            gaussians.append(Gaussian(mx, my, sx, sy))

    return gaussians

def getPlotLimits(gaussians, devs):
    '''finds the x and y limits of the field of gaussian distributions.
    Sets the boundary a set number of deviations from the mean'''
    # get the limits from the first gaussian and work from there
    (xminlim, xmaxlim, yminlim, ymaxlim) = gaussians[0].getLimits(devs)
    for i in range(1, len(gaussians)):
        (xmin, xmax, ymin, ymax) = gaussians[i].getLimits(devs)
        if (xmin < xminlim):
            xminlim = xmin
        if (xmax > xmaxlim):
            xmaxlim = xmax
        if (ymin < yminlim):
            yminlim = ymin
        if (ymax > ymaxlim):
            ymaxlim = ymax

    return (xminlim, xmaxlim, yminlim, ymaxlim)

def makeDataFile(gaussians, limits, res, outputFile):
    '''makes a data file of x,y coordinates to be plotted'''
    xres = res[0]
    yres = res[1]

    # make arrays of x and y values
    x = numpy.linspace(limits[0], limits[1], xres)
    y = numpy.linspace(limits[2], limits[3], yres)
    # initialize grid of z values
    z = numpy.zeros((xres, yres))

    # compute z value at each x, y point
    for i in range(len(x)):
        for j in range(len(y)):
            for gaussian in gaussians:
                z[i][j] += gaussian.value(x[i], y[j])

    # write out the matrix
    with open(outputFile, 'w') as f:
        for i in range(len(x)):
            for j in range(len(y)):
                f.write('%f %f %f\n' % (x[i], y[j], z[i][j]))
            f.write('\n')

def makePlotFile(limits, outputFile):
    '''makes a plot file for gnuplot'''
    with open('plot.plt', 'w') as f:
        f.write("#!/usr/bin/env gnuplot\n")
        f.write("set terminal png font 'Courier'\n")
        f.write("set output 'gaussians.png'\n")
        f.write("set xr [%f:%f]\n" % (limits[0], limits[1]))
        f.write("set yr [%f:%f]\n" % (limits[2], limits[3]))
        f.write("set pm3d map\n")
        f.write("plot '%s' with image\n" % outputFile)

    # make plot file executable
    os.system('chmod 755 plot.plt')

    # plot
    os.system('./plot.plt')

# name of input file
inputFile = 'data.dat'
# name of output (processed data)
outputFile = 'gaussians.dat'
# number of x and y points in plot
res = (100, 100)
# deviations from the mean by which to define Gaussian limits
devs = 3

# read in the gaussians from the data file
print 'reading in data...'
gaussians = readGaussians(inputFile)

# find the plot limits
limits = getPlotLimits(gaussians, devs)

# make the gaussian data file
print 'computing data for plotting...'
makeDataFile(gaussians, limits, res, outputFile)

# make the plot file
print 'plotting...'
makePlotFile(limits, outputFile) 
```

此脚本在您的示例数据上运行时会产生以下输出。

![在此处输入图像描述](../Images/cc6a4cc0fc1fdd17f791e66ab593f2c2.png)

# android - R.java 的值无法识别

> ID：13899395
> 
> 赞同：1
> 
> 时间：2012-12-16T07:22:20.737
> 
> 标签：android, r.java-file

我从朋友那里下载了一个 android 项目文件夹（该应用程序有效）。在 Eclipse 中，我从现有代码创建了一个新的 Android 项目。但是，从 R.java 调用布局/ID 的行有错误。示例：R.layout.my_layout

我尝试清理项目，删除项目并再次创建它。代码应该可以工作。我检查了 R.java 以确保名称匹配。请注意，我是 Android 的高级初学者，所以我了解基础知识。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:25:56.170

1.  如果你是从朋友那里下载的项目，你不应该创建一个全新的项目，而是选择“从现有源中新建项目”。

2.  尝试在 Android 下查看项目属性，很多时候，导入会破坏属性并将目标 SDK 移动到尽可能低的位置，您需要更改它”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T07:34:37.493

这听起来很愚蠢-但尝试清除您的项目，对代码进行简单的更改，保存并重建。我希望这能解决你的问题，

另一件事-确保您没有导入任何 android.R.### 类-如果您确实删除了这些行。

哎呀。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T07:28:36.003

你在 Eclipse 的控制台中遇到什么错误？错误消息通常需要帮助。我唯一没有看到构建错误的建议是检查您的导入语句。有时 Eclipse 会向 R 类插入虚假导入。

# sql-server - 如何在没有 db_owner 权限的情况下创建 SQL Server 数据库的可视化？

> ID：13899401
> 
> 赞同：0
> 
> 时间：2012-12-16T07:23:48.397
> 
> 标签：sql-server, uml, data-modeling, database-schema

`Database diagrams`在 SQL Server Management Studio 中看起来很有希望，但我需要`db_owner`特权！我只想暂时看一张5-10张表的复杂图。

有什么替代的想法吗？

谢谢！

# ios - iOS - 显示视图几秒钟并更改视图

> ID：13899403
> 
> 赞同：0
> 
> 时间：2012-12-16T07:24:04.467
> 
> 标签：ios, cocoa-touch, uiviewcontroller

我正在设计一个应用程序，它首先显示一个条款和条件视图，然后在接受它时，它会移动到下一个视图，我使用 UIImage 添加背景图像，以便我可以为我的显示欢迎图像应用程序，然后在 5 秒后我将视图更改为用户登录。我使用了没有情节提要的基于视图的应用程序模板，并且还启用了 ARC。

我使用了以下代码：

接受条款和条件 [accept.h、accept.m、accept.xib]：

```
- (IBAction)AcceptPractTandC:(id)sender
{
    PractionerImage *PracImage = [[PractionerImage alloc] init];
    [self presentViewController:PracImage animated:YES completion:nil];
} 
```

显示图像 5 秒并显示下一个视图 [PractionerImage.h, PractionerImage.m, PractionerImage.xib]：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    count = 0;
    PracImage = [NSTimer scheduledTimerWithTimeInterval:(1.0/1.0) target:self selector:@selector(PracImageSkip) userInfo:nil repeats:YES];
}

- (void)PracImageSkip
{
    count += 1;
    if (count > 5) {
        ViewController *Intro = [[ViewController alloc]init];
        [self presentViewController:Intro animated:YES completion:nil];
    }
} 
```

我在文件 ViewController.m、ViewController.h、ViewController.xib 中有用户详细信息。

# javascript - 试图让多个计时器在单个页面上工作

> ID：13899404
> 
> 赞同：0
> 
> 时间：2012-12-16T07:24:09.723
> 
> 标签：javascript, jquery

我有一个页面，当用户继续向下阅读页面时，我需要一个计时器来一次又一次地显示。

这是同一个计时器，它只是在设定的时间段内倒计时。

我已经让计时器仅在第一个内容范围内完美运行，但它不会显示在我指定的所有其他元素中。

以下是 .js 文件中的代码：

```
 document.getElementById('minutes').innerHTML = padNums(minutes, 2);
 document.getElementById('seconds').innerHTML = padNums(seconds, 2);
 document.getElementById('milliseconds').innerHTML = padNums(milliseconds, 3); 
```

HTML 文件中的脚本：

```
 $('.counter').html('<span id="minutes">0</span>' + ':' + '<span id="seconds">0</span>' + ':' + '<span id="milliseconds">0</span>' ); 
```

和 HTML：

```
 <div class="wrapper">
    <p> There is this much time left: <span class="counter"> </span> </p>
    <p> There is this much time left: <span class="counter"> </span> </p> 
    <p> There is this much time left: <span class="counter"> </span> </p> 
  </div> 
```

…………

我尝试将 .js 方法更改为 getElementsByClass 并将跨度更改为类而不是 id。这甚至停止了第一次倒计时工作。

我还能尝试什么？

谢谢

* * *

这是我尝试过的另一组代码，如下所示：

html页面内部：

```
 <div class="wrapper">
    <p> There is this much time left: <span class="counter"> </span> </p>
    <p> There is this much time left: <span class="counter"> </span> </p> 
    <p> There is this much time left: <span class="counter"> </span> </p> 
  </div>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
  <script type="text/javascript">

  $('.counter').html('<span class="minutes">0</span>' + ':' + '<span     
  class="seconds">0</span>' + ':' + '<span class="milliseconds">0</span>' );

  </script> 
```

在 .js 中：

```
 $('.minutes').innerHTML = padNums(minutes, 2);
 $('.seconds').innerHTML = padNums(seconds, 2);
 $('.milliseconds').innerHTML = padNums(milliseconds, 3); 
```

虽然......这也不起作用。

* * *

对我来说，最简单的方法是为每个计时器创建更多的唯一 ID 集，但我想要一种更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:30:42.597

尝试使用跨度#minutes、#seconds 和#milliseconds 的类而不是ID。

然后，您将不得不更换三个

```
document.getElementById('minutes') ... 
```

和

```
$('.minutes') ... 
```

* * *

刚看到你的编辑。

您将需要使用

```
$('.minutes').html('...') 
```

以与您相同的方式

```
$('.counter').html('...') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T07:32:00.157

对于 php，我创建了这个类来处理这样的情况：

```
class IDDateTime {

    static function SecToTime($sec) {
        $days = floor($sec / 86400);
            $sec = $sec - ($days * 86400);
        $hours = floor($sec / 3600);
            $sec = $sec - ($hours * 3600);
        $minutes = floor($sec / 60);
            $sec = $sec - ($minutes * 60);
        $seconds = $sec;

        if($days > 0) $days= $days.' days'; else $days='';
        if ($minutes < 10) $minutes= '0'.$minutes;
        if ($seconds < 10) $seconds= '0'.$seconds;

        return $days.$hours.':'.$minutes.':'.$seconds;
    }

    static function ShowTimer($id,$sec,$href='',$extrasec=false) {
        return '<span id="'.$id.'">'.IDDateTime::SecToTime($sec).'</span><script type="text/javascript">updateTime("'.$id.'",'.($sec + ($extrasec?1:0)).',"'.$href.'");</script>';
    }

    static function AddTimerEngine($text='Done') {
        return '
        <script type="text/javascript">
        function updateTime(elementId,time,rdr) {
            var bt_obj = document.getElementById(elementId); 
            time--;
            var timeToEnd = time; 
            temp = timeToEnd;
            if(temp >= 0) { 
                days = Math.floor(temp / 86400);
                temp = temp % 86400;
                hours = Math.floor(temp / 3600);
                temp = temp % 3600; minutes = Math.floor(temp / 60);
                temp = temp % 60; output = "";
                seconds = temp;                
                if(days > 0) output = days + "days. "; 
                if(seconds < 10) seconds = "0" + seconds; 
                if(minutes < 10) minutes = "0" + minutes; 
                bt_obj.innerHTML = "<b>"+output+hours+":"+minutes+":"+seconds+"</b>"; 
                var jsExp = "updateTime(\'" + elementId + "\'," + time +",\'"+ rdr + "\')";
                setTimeout(jsExp , 1000); 
            } else {
                bt_obj.innerHTML = "'.$text.'";
                if(rdr != \'\') {
                    window.location.href = rdr;
                }
            }
        };
        </script>';
    }

} 
```

要使用它，只需将其添加到您的页面中：

```
Echo IDDateTime::ShowTimer('yout_timer_id',$seconds);
Echo IDDateTime::ShowTimer('another_timer',$seconds); 
```

您可以获取代码的某些部分并适应您的情况，或者按原样使用它。

# sql - 带 max 函数的 SQL 内连接

> ID：13899407
> 
> 赞同：4
> 
> 时间：2012-12-16T07:25:18.023
> 
> 标签：sql

我在这个查询中有一些问题我想看看谁向哪个医生支付了 Max 费用？我已经创建了 3 个表，名称分别是 tblPatient、tblClinic 和 tblDoctor 现在我已经在 PID 和 DID 列中的 tblClinic 表上设置了外键现在我可以在这个查询中做什么，所以我会得到我想要的结果。

```
create database Hospital
use Hospital

create table tblPatient
(
PID int identity(100,1) primary key not null,
PName varchar(20),
PPhone varchar(20)
)

create table tblClinic
(
CID int identity(300,1) primary key not null,
PID int,
DID int,
Fees int,
foreign key(PID) references tblPatient(PID),
foreign key(DID) references tblDoctor(DID)
)

create table tblDoctor
(
DID int identity(200,1) primary key not null,
DName varchar(20),
DPhone varchar(20),
)

insert into tblPatient values('Zeeshan',033314785)
insert into tblPatient values('Mufaddil',034521548)
insert into tblPatient values('Shayan',033236981)
insert into tblPatient values('Zahid',0334425632)
insert into tblPatient values('Afzaal',030178945)
insert into tblClinic values (100,201,1500)
insert into tblClinic values (102,202,1600)
insert into tblClinic values (103,204,700)
insert into tblClinic values (101,201,800)
insert into tblClinic values (101,200,600)
insert into tblClinic values (103,202,650)
insert into tblClinic values (104,202,550)
insert into tblClinic values (102,203,840)
insert into tblClinic values (101,203,2000)
insert into tblClinic values (100,204,250)
insert into tblClinic values (100,201,1700)
insert into tblClinic values (101,202,1650)
insert into tblClinic values (104,204,300)
insert into tblDoctor values ('Dr.Amir',033412345)
insert into tblDoctor values ('Dr.Bilal',034554125)
insert into tblDoctor values ('Dr.Saim',033358741)
insert into tblDoctor values ('Dr.Rizwan',033325871)
insert into tblDoctor values ('Dr.Kamran',030025874)

select * from tblPatient
select * from tblClinic
select * from tblDoctor

select p.PName,d.DName
from tblPatient p
inner join
tblClinic c
ON p.PID=c.PID
inner join
tblDoctor d
ON d.DID=c.DID
where PName in ('Zeeshan','Shayan','Afzaal')

select d.DName,p.PName
from tblDoctor d
inner join
tblClinic c
ON d.DID=c.DID
inner join
tblPatient p
ON p.PID=c.PID
where d.DName in ('Dr.Bilal','Dr.Kamran','Dr.Amir')
order by d.DName,p.PName asc

select d.DName,p.PName,c.Fees
from tblDoctor d
inner join
tblClinic c
ON d.DID=c.DID
inner join
tblPatient p
ON p.PID=c.PID
where d.DName in ('Dr.Bilal','Dr.Kamran','Dr.Amir')
order by d.DName,p.PName asc 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T10:33:06.370

如果您想查找哪个患者为每位医生支付了最高费用，则此查询应该执行以下操作：

```
SELECT P.PName, D.DName, C.Fees
FROM tblClinic C
INNER JOIN tblPatient P ON P.PID = C.PID
INNER JOIN tblDoctor D ON D.DID = C.DID
WHERE C.Fees =
(SELECT max(Fees) FROM tblClinic C2
WHERE C2.DID = C.DID) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T10:58:25.917

试试这个。这是[您数据中的工作示例](http://sqlfiddle.com/#!3/20817/70)

```
select pname,dname, fee 
from (
   select pname, dname, max(fees) fee, 
          rank() over (order by p.pname) rk, 
          row_number() over (order by p.pname,max(fees) desc) rn
   from tblClinic c join tblPatient p on c.pid = p.pid
                 join tblDoctor d on c.did = d.did
   group by pname,dname
  ) T
where rk = rn 
```

**结果**

```
Afzaal      Dr.Saim         550
Mufaddil    Dr.Rizwan       2000
Shayan      Dr.Saim         1600
Zahid       Dr.Kamran       700
Zeeshan     Dr.Bilal        1700 
```

# python - 创建 Blobstore 照片 URL

> ID：13899410
> 
> 赞同：0
> 
> 时间：2012-12-16T07:25:47.380
> 
> 标签：python, google-app-engine, blobstore

我是 GAE Blostore 的新手……我正在尝试显示通过 GAE 上传的图像的网址，但我遇到了困难……感谢任何帮助。

1）下面的代码以十六进制格式显示密钥，我不知道为什么会这样。

2) 此外，如何使用十六进制值键获取/创建图像的 URL？

```
from google.appengine.api import users
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.ext import blobstore
from google.appengine.ext.webapp import blobstore_handlers
from google.appengine.ext import db
from google.appengine.ext import blobstore

#import os
import urllib
 class UserPhoto(db.Model):
    user = db.StringProperty()
    user1 = db.EmailProperty()
    blob_key = blobstore.BlobReferenceProperty()# blobstore.BlobKey #

class MainPage(webapp.RequestHandler):
    def get(self):
       user = users.get_current_user()
       upload_url = blobstore.create_upload_url('/upload')
       existing_data = "<br>"

    if user:
        #user_photo = UserPhoto(user=users.get_current_user().email( )
        data = UserPhoto.all()

        results = data.filter('user1 =',user.email())
        rmvStr = len("<__main__.UserPhoto object at ")

        for blob in results:

            existing_data += "Blob item key # : "+ str(blob)[rmvStr:len(str(blob))-1]   +" <br>"
            #existing_data += "Blob item key # : "+ str(blob) +" <br>"

            #self.response.out.write( "value of blob is: " + str(blob))

        self.response.out.write(
            'Hello %s <a href="%s">Sign out</a><br>Is administrator: %s' % 
            (user.nickname(), users.create_logout_url("/"), users.is_current_user_admin())           
            +'<form action="%s" method="POST" enctype="multipart/form-data">' % upload_url+
            """Upload File: <input type="file" name="file"><br> <input type="submit"
            name="submit" value="Submit"> </form>
            <br>"""+existing_data
        )
    else:
        self.redirect(users.create_login_url(self.request.uri))

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
   def post(self):
       upload_files = self.get_uploads('file')  # 'file' is file upload field in the form

       blob_info = upload_files[0] 
       user = users.get_current_user()

       if user:
           data = UserPhoto()
           data.user1 = user.email()
           data.blob_key = blob_info.key()

           data.put()

         #self.redirect('/serve/%s' % blob_info.key())
         self.redirect('/')

class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
    def get(self, resource):
        resource = str(urllib.unquote(resource))
        blob_info = blobstore.BlobInfo.get(resource)
        self.send_blob(blob_info)

application = webapp.WSGIApplication([('/', MainPage),
                           ('/upload', UploadHandler),
                           ('/serve/([^/]+)?', ServeHandler)],
                          debug=True)
def main():
    run_wsgi_app(application)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:54:09.740

我不想在这里对你的整个问题提出质疑，但你真的应该考虑 Files API。它由 Google Cloud Storage 提供支持，访问界面非常快速且易于使用。我会推荐它而不是 blobstore，特别是如果您刚刚开始使用您的应用程序。

如果你在做用户照片，你可以在一个任务队列上处理两个或三个尺寸，然后把它们扔到云存储中，可能比你运行 Blobstore 便宜。

# iphone - 无法使用 Phonegap iPhone 模拟器从数据库中获取数据

> ID：13899413
> 
> 赞同：1
> 
> 时间：2012-12-16T07:26:06.043
> 
> 标签：iphone, database, cordova, mobile

我正在使用 Phonegap 为 iPhone 开发一个移动应用程序。我正在使用 Ajax 从数据库中获取数据。如果我使用 Safari 运行它，它工作正常。但是如果我使用 Phonegap iPhone 模拟器，那么它不会显示数据库中的记录。

我正在使用 Phonegap 2.2 版。另外，我也将 * 放入 ExternalHost Array 中。

请帮忙。

# objective-c - CCLabelTTF SetString 未更新

> ID：13899417
> 
> 赞同：2
> 
> 时间：2012-12-16T07:26:37.707
> 
> 标签：objective-c, ios, cocoa-touch, cocos2d-iphone, cclabelttf

我正在使用 a`CCLabelTTF`在屏幕上显示玩家的得分。但是，当我调用`setString`更新分数标签时，它不会更新（因此它始终保持在 0）。

这是我的代码：

在**Player.m**中，我启动了一个新的 PlayerHUD 对象：

```
- (id) init{
    if (self = [super init]){
        playerHUD = [[PlayerHUD alloc] loadPlayerInterface];
        [self addChild:playerHUD z:UPLAYER_Z];
    }
    return self;
} 
```

在**PlayerHUD.m**中，我启动了 Score Label ：

```
- (id) loadPlayerInterface{
    if (self = [super init]){
        score = 0;
        //Score Label
        lblScore = [CCLabelTTF labelWithString:[NSString stringWithFormat:@"%d", score] fontName:@"pixel" fontSize:24];
        [self addChild:lblScore z:1000];
    }
    return self;
} 
```

仍在**PlayerHUD.m**中，这是我的更新功能：

```
- (void) updateScore:(NSInteger)_newscore{
    score = _newscore;
    [lblScore setString:[NSString stringWithFormat:@"%d", score]];
} 
```

而且，在**Player.m**中，我在这里调用更新函数：

```
- (void) addScore{
    int scoreToAdd = 50

    score += scoreToAdd;

    NSLog(@"Score:%d", score);
    [playerHUD updateScore:score];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-25T14:11:10.640

我设法使用下面的代码解决了这个问题（将字符串设置为空字符串，然后将其重新设置为您的字符串）

```
[label setString:@""];
[label setString:yourString]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T20:35:24.607

好的，我找到了问题所在，我想我会把它贴在这里，如果有人遇到这个：

问题是，由于我仍然忽略的一个原因，我需要为我的对象设置一个`@property`和，因为在一些操作之后，它变成了 nil，就像@InderKumarRathore 说的那样。所以设置一个属性并为它综合解决了这个问题，再也不会迷路了！`@synthesize``playerHUD`

经过一番研究，我认为这是因为 cocos2D **v.0.98**（我之前使用的那个）和 cocos2D **v1.0**（我现在使用的那个）之间关于内存管理的一些修改！

总之，谢谢大家的支持，非常感谢！

# java - Apache POI 写入 .doc 文件时出错

> ID：13899418
> 
> 赞同：4
> 
> 时间：2012-12-16T07:26:56.957
> 
> 标签：java, apache-poi, doc

我正在编写一个应用程序来显示和编辑文件 .doc 我正在将 POI 与 HWPF 一起使用。现在我可以从文件中读取文本并写入文件 .doc 了。但是我的阅读器只能读取由 msoffice 创建的默认文件 .doc，它无法读取我的作者创建的文件，msoffice 也可以读取这个文件并且所有内容都正确显示。它总是显示错误：

```
Exception in thread "main" java.lang.RuntimeException:java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
at org.apache.poi.hwpf.extractor.WordExtractor.getText(WordExtractor.java:322)
at ReadPOI.main(ReadPOI.java:18)
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
at java.util.ArrayList.RangeCheck(ArrayList.java:547)
at java.util.ArrayList.get(ArrayList.java:322)
at org.apache.poi.hwpf.usermodel.Range.binarySearchStart(Range.java:1016)
at org.apache.poi.hwpf.usermodel.Range.findRange(Range.java:1095)
at org.apache.poi.hwpf.usermodel.Range.initParagraphs(Range.java:982)
at org.apache.poi.hwpf.usermodel.Range.numParagraphs(Range.java:311)
at org.apache.poi.hwpf.converter.AbstractWordConverter.processParagraphes(AbstractWordConverter.java:1058)
at org.apache.poi.hwpf.converter.WordToTextConverter.processSection(WordToTextConverter.java:435)
at org.apache.poi.hwpf.converter.AbstractWordConverter.processSingleSection(AbstractWordConverter.java:1126)
at org.apache.poi.hwpf.converter.AbstractWordConverter.processDocument(AbstractWordConverter.java:722)
at org.apache.poi.hwpf.extractor.WordExtractor.getText(WordExtractor.java:304)
... 1 more 
```

msoffice创建的文件和我的作家创建的文件有什么不同，以及如何修复它。请帮我。Java中有我的演示代码。谢谢

我的读者：

```
import java.io.File;
import java.io.FileInputStream;

import org.apache.poi.hwpf.HWPFDocument;
import org.apache.poi.hwpf.extractor.WordExtractor;
import org.apache.poi.hwpf.usermodel.Range;

public class ReadPOI 
{
public static void main(String args[]) throws Exception
{
    File file = new File("Test.doc");
    FileInputStream fin = new FileInputStream(file);
    HWPFDocument doc = new HWPFDocument(fin);
    Range range = doc.getRange();
    WordExtractor extractor = new WordExtractor(doc);
    System.out.println("starting\n" + extractor.getText() + "end\n");

    fin.close();
}
} 
```

我的作家：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;

import org.apache.poi.hwpf.HWPFDocument;

public class WritePOI
{
public static void main(String args[]) throws Exception
{
    File file = new File("Template.doc");
    FileInputStream fin = new FileInputStream(file);
    HWPFDocument doc = new HWPFDocument(fin);
    doc.getRange().replaceText("Haha\n", false);
    FileOutputStream fout = new FileOutputStream("Test.doc");
    doc.write(fout);
    fout.close();
    fin.close();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T08:57:46.920

这是 WordExtractor getText() 中的一个错误，它甚至在 3.10-FINAL 版本中仍然存在。它不应该给你：

```
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.rangeCheck(ArrayList.java:571)
    at java.util.ArrayList.get(ArrayList.java:349)
    at org.apache.poi.hwpf.usermodel.Range.binarySearchStart(Range.java:1016) 
```

它没有在[api](https://poi.apache.org/apidocs/org/apache/poi/hwpf/extractor/WordExtractor.html)中标记为已弃用，但它说 getTextFromPieces() 更快。我用你的例子仔细检查了它，它工作正常。

所以在 ReadPOI 中使用：

```
 System.out.println(extractor.getTextFromPieces()); 
```

或者

```
 String [] dataArray = extractor.getParagraphText();
    for(int i=0;i<dataArray.length;i++)
    {
        System.out.println("\n–" + dataArray[i]);
    } 
```

# python - 跨不同应用程序设计具有多对多关系和相同模型的 Django 应用程序

> ID：13899420
> 
> 赞同：0
> 
> 时间：2012-12-16T07:27:25.717
> 
> 标签：python, django, design-patterns, many-to-many

这是我第一次与 DJango 合作。我对我的模型应该如何看起来有点困惑。

用例是：

*   有产品。
*   有标签。
*   有用户。

产品和标签之间存在多对多的关系。用户和标签之间存在多对多关系。

我现在已经创建了两个应用程序。

*   目前产品和标签属于一个应用程序：产品
*   另一个应用程序是 usrprofile。我需要在用户个人资料中添加标签。

Tag应该驻留在哪里？并且标签会参考产品和用户吗？

代码：

**应用：产品**

```
class Product(models.Model):
    created_at = models.DateTimeField(auto_now_add = True)
    updated_at = models.DateTimeField(auto_now = True)
    name = models.CharField(max_length=300)

class Tag(models.Model):
    created_at = models.DateTimeField(auto_now_add = True)
    updated_at = models.DateTimeField(auto_now = True)
    name = models.CharField(max_length=300)
    display_name = models.CharField(max_length=300)
    product = models.ManyToManyField(Product, through='ProductTag')    

class ProductTag(models.Model):
    product = models.ForeignKey(Product,null=False)
    tag = models.ForeignKey(Tag,null=False) 
```

**APP：用户档案**

```
class UserProfile(models.Model):
    created_at = models.DateTimeField(auto_now_add = True)
    updated_at = models.DateTimeField(auto_now = True)
    email = models.CharField(max_length=300) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:29:17.260

没有人能告诉你你的`Tag`模型应该放在哪里最好。构建你的应用程序和模型是你的选择。`Tag`如果要在和之间建立多对多关系`UserProfile`，可以在`UserProfile`模型中指定，例如：

```
class UserProfile(models.Model):
    # ... your other fields ...
    tags = models.ManyToManyField('product.Tag') 
```

请注意，您必须将`Tag`模型与对应用程序的引用一起放在一个字符串中，`product`如上所示。否则，Django 会错误地假设您的模型与您的`Tag`模型位于同一个应用程序中`UserProfile`。此外，您的应用程序的名称都应该是小写的。此外，给你的多对多字段提供复数名称是一种很好的风格，即，而不是`product`在你的`Tag`模型中使用`products`。

顺便说一句，如果您不需要向多对多关系添加额外信息，则无需定义中间模型，例如`ProductTag`.

# php - PHP数组不会填充mysql数据

> ID：13899422
> 
> 赞同：-2
> 
> 时间：2012-12-16T07:27:39.883
> 
> 标签：php, mysql, ios, sql, arrays

> **可能重复：**
> [如何通过 mysql 结果两次？](https://stackoverflow.com/questions/6439230/how-to-go-through-mysql-result-twice)

我有一个循环内循环的 PHP 脚本。外部循环遍历 $unitsarray 中每个 $unit 的数组，并查询 MySQL 数据库以查看是否存在具有相同匹配字符串的条目。如果 $result1 确实返回了一个条目，我为“devicetoken”行创建另一个名为 $devicetokens 数组的数组，然后进入我的第二个循环。对于每个设备令牌，我创建一个 Apple 推送通知以发送到 iOS 设备。我有两个问题，首先 mysql_query 什么都不返回。如果我将 $unit 替换为我知道会返回 na 条目的值，那么它可以工作。其次，如果我替换了 $unit 并返回了结果，即使我从 mysql 查询中返回了结果，$devicetokens 数组也不会填充任何数据。这是我的代码：

```
foreach ($unitsarray as $unit) {

    echo "Unit = $unit </br>";

    // Create array of devices that match the unit
    $result1 = mysql_query("SELECT * FROM `department devices` WHERE unit LIKE '%$unit%'") or die(mysql_error());

    //Print results
    while ($row = mysql_fetch_assoc($result1)) {
        echo "&nbsp;&nbsp;&nbsp;&nbsp;";
        echo $row["device_id"];
        echo " , ";
        echo $row["devicetoken"];
        echo " , ";
        echo $row["unit"];
    }
    echo "</br>";

    $devicetokenarray = array();
    while ($row = mysql_fetch_assoc($result1)) {
        array_push($devicetokenarray, $row["devicetoken"]);
    }

    // Print array
    print_r($devicetokenarray);
    echo "</br>";

    // Loop APNS for each device token in $devicetoken array
    foreach ($devicetokenarray as $devicetoken)
    {

    // Build the binary notification
    $msg = chr(0).pack('n', 32).pack('H*', $devicetoken).pack('n', strlen($payload)).$payload;

    // Send it to the server
    $result = fwrite($fp, $msg, strlen($msg));

    // Create APNS operation output
        if (!$result)
            echo 'Failed message'.PHP_EOL;
        else
            echo "<b>Successful message sent:</b>&nbsp;&nbsp; $call - $location - $station - $units to device(s):&nbsp;&nbsp;'$devicetoken </br>".PHP_EOL;
    }
} 
```

这是我的数据库的样子：

```
device_id   devicetoken                                         unit

T05 ipad   773f5436825a7115417d3d1e036da20e806efeef547b7c3fe4   121
E05 ipad   773f5436825a7115417d3d1e036da20e806efeef547b7c3fe4   121 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:48:09.897

您正在执行查询并将结果资源存储在 $result1 中，然后在循环中获取所有行并回显，然后立即尝试再次获取它。获取所有结果后，您将无法再次获取它们。好吧，您可以使用 mysql_data_seek，但在大多数情况下这样做确实效率低下且浪费。第一次将结果存储在数组中。

```
$rows = array();

while ($row = mysql_fetch_assoc($result1)) {
     $rows[] = $row;
} 
```

然后你可以通过这个数组进行遍历。

```
foreach ($rows as $row) {
    // Build the binary notification
    $msg = chr(0).pack('n', 32).pack('H*', $row['devicetoken']) . pack('n', strlen($payload)) . $payload;
    //... etc

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T07:59:23.087

如果您正在使用已弃用的`mysql_*`API，并且希望将所有结果行放在一个数组中，则应首先为自己创建一个新的辅助函数，因为旧库没有预定义此函数。

以下函数以数组的形式获取所有结果行。

```
function mysql_fetch_all($result, $result_type = MYSQL_BOTH) {
    $rows = array();
    while ($row = mysql_fetch_assoc($result1)) {
        $rows[] = $row;
    }
    return $rows;
} 
```

用法：

```
$rows = mysql_fetch_all($result1, MYSQL_ASSOC); 
```

然后你就遇到了一个问题，你瞎了眼，你不知道输入是什么，生成了哪个 sql 查询。那么你需要更详细：

```
$sql     = "SELECT * FROM `department devices` WHERE unit LIKE '%$unit%'";
printf("DEBUG: <pre>%s</pre>\n", htmlspecialchars($sql));
$result1 = mysql_query($sql) or die(mysql_error()); 
```

然后，您可以查看您执行的查询。首选的是像 xdebug 这样的步进调试器。

# ios - iOS 应用程序中所有对象的枚举

> ID：13899426
> 
> 赞同：-1
> 
> 时间：2012-12-16T07:27:57.183
> 
> 标签：ios

对于 UIApplication，如何枚举所有被实例化的类？

```
for (NSObject *object in UIApplication.NSArray) {

} 
```

我不确定这是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:02:34.997

你的目的还不清楚。但我假设您这样做是出于好奇、调试或分析，因为这些是这样做的唯一合理理由。在任何这些情况下，请使用[Instruments 中的分配工具](http://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/MemoryManagementforYouriOSApp/MemoryManagementforYouriOSApp.html#//apple_ref/doc/uid/TP40004652-CH11-SW2)。你可以模仿它的功能——CoreFoundation 中有必要的 SPI，它 [大部分] 是开源的，而且它们并不那么棘手。但你真的不想 - 它们不受支持，不仅容易改变，而且*可能*在每个主要操作系统版本中发生变化。Instruments 用户界面非常强大，可用于分析您将使用的大量数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T08:09:33.043

您可以为所有自定义类提供一个统计实例的静态变量和一个从其他对象访问该变量的 getter 方法。

# java - 如何在 textview 中设置所有行的字符长度相同？

> ID：13899430
> 
> 赞同：1
> 
> 时间：2012-12-16T07:29:30.887
> 
> 标签：java, android

如何在 textview 中设置所有行的字符长度相同？

这是 sqlite 数据库中的文本

![在此处输入图像描述](../Images/dea468b09784997eb88494e5937578e8.png)

这是android中的textview

![在此处输入图像描述](../Images/9c971eab62122f79eaf982872ffe2bd7.png)

我在 main.class 中的查询代码

db.open(); 光标 c = db.getdescIntro(department,degree);

```
 if (c.moveToFirst())
    {

        do {
            a  = (String)c.getString(0);                
            txt.setText(a);

            PDF = c.getString(2);
        } while (c.moveToNext());
    }
    db.close(); 
```

我的数据库.class

公共光标getdescIntro（字符串dep，字符串度数）{

return db.query("academic", new String[] {"desc","department","acapdf"},"department" + "=?" +" AND " + "degree" +"=?", new字符串[] {dep,degree}, null, null, null);

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:03:05.737

如果我根据您的屏幕截图正确理解了您的问题，那么您是在询问如何删除换行符：

> String myNewString = myString.replaceAll("\n", "");

如果您正在寻找使文本完全符合`TextView's`边界的解决方案，请参阅此 SO 答案：[auto-scale-textview-text-to-fit-within-bounds](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)

# android - 如何检查ArrayList中的特定索引是否具有A到Z范围内的字符

> ID：13899437
> 
> 赞同：0
> 
> 时间：2012-12-16T07:30:51.807
> 
> 标签：android

安卓 2.3.3

我有一个 ArrayList，它既有数字（字符串格式）也有像（和，加，按，...）这样的词

我希望只从这个 ArrayList 中检索数字。

我可以使用 get(index) 获取值并转换为数字，如果它是可以转换的数字。如果我使用循环进行迭代，单词的转换会给我一个异常。那么，我如何检查，而不会出现异常。

这会工作吗:::

我使用 try catch 块，当出现异常时，我只写“继续；” 在 catch 块中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:45:58.367

您可以尝试在一个`try`块中转换，并忽略该块中的异常`catch`。（`continue`就像你建议的那样，只是循环）。它会起作用的。

另一种方法，不使用异常处理；

[确定字符串是否是Java中的整数](https://stackoverflow.com/questions/5439529/determine-if-a-string-is-an-integer-in-java)

[如何在Java中检查字符串是否为数字](https://stackoverflow.com/questions/1102891/how-to-check-a-string-is-a-numeric-type-in-java)

还有更多。

# apache-flex - 在 Flex2 的工具提示中换行

> ID：13899438
> 
> 赞同：0
> 
> 时间：2012-12-16T07:30:58.590
> 
> 标签：apache-flex, flex2

如何将文本包装在 flex 中可用的任何容器（画布、vbox）的工具提示属性中？另外请让我知道如何访问工具提示类的文本字段属性，以便可以访问“自动换行”功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:22:39.640

对于任何`UIComponent`基于项目，您可以设置`toolTip`属性以获取鼠标悬停工具提示。

[http://livedocs.adobe.com/flex/3/html/help.html?content=tooltips_3.html](http://livedocs.adobe.com/flex/3/html/help.html?content=tooltips_3.html)

工具提示支持样式、宽度值等，因此您可以强制自动换行、颜色等。

# c++ - 默认参数问题（c++）

> ID：13899440
> 
> 赞同：1
> 
> 时间：2012-12-16T07:31:15.377
> 
> 标签：c++, class, pointers

> **可能重复：**
> [非静态成员作为非静态成员函数的默认参数](https://stackoverflow.com/questions/4539406/nonstatic-member-as-a-default-argument-of-a-nonstatic-member-function)
> [为什么不能将成员变量用作参数的默认值？](https://stackoverflow.com/questions/13678627/why-can-member-variables-not-be-used-as-defaults-for-parameters)

好的，如果我在这里没有看到非常简单的东西或忘记了 C++ 的一些基本规则，我提前道歉，但我不确定为什么这不能按预期工作。

这是我无法工作的代码示例

```
class Foo
{
private:
    Bar *ptrBar;
public:
    void doSomething(int x, Bar *p = ptrBar);
} 
```

编译器对此函数的默认参数有问题。有什么原因导致这行不通。

基本上 doSomething 会对 Bar 对象进行一些操作，我希望它是默认情况下 ptrBar 指向的那个。除非我忘记了什么，否则一切似乎都很正常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T07:32:44.473

不允许使用类成员作为默认参数，也不允许`this`.

### 8.3.6 默认参数 [dcl.fct.default]

> [...] 类似地，一个非静态成员不得在默认参数中使用，即使它没有被评估，除非它作为类成员访问表达式 (5.2.5) 的 id 表达式出现，或者除非它用于形成指向成员（5.3.1）的指针。[...]

最好的解决方法是使用重载：

```
class Foo
{
private:
    Bar *prtBar;
public:
    void doSomething(int x, Bar *p);
    void doSomething(int x)
    {
        soSomething(x, ptrBar);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T07:33:20.463

在编译器对此进行评估时，`ptrBar`未设置。因此，您的默认参数没有默认值。

为什么不使用默认值 null 并且如果`p`in`doSomething()`为 null 则使用该`ptrBar`成员。

# reporting-services - 页脚中的 SSRS 页码

> ID：13899447
> 
> 赞同：0
> 
> 时间：2012-12-16T07:32:55.967
> 
> 标签：reporting-services

我希望不包括报告前 10 页（即第 1-10 页）的页码（在页脚中）。第 1 页应为 i，第 2 页应为 ii，第 3 页应为 iii，依此类推（用罗马数字表示）......当它到达第 11 页时，这应该重置页码

有谁知道我可以用来实现这一目标的表达方式。因此，如果 GlobalPage number = 1,2,3,4,5,6,7,8,9,10 不显示或补偿全局页码其他内容.....这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:39:54.650

您必须手动更改该值，即在页脚中放置类似于以下内容的内容：

```
IIf(Globals!PageNumber=1, "i", ... 
```

或者，您可以使用用户函数尝试[VBA 将数字转换为罗马数字](http://support.microsoft.com/kb/184657)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:44:13.787

我们将使用一些自定义代码来保持灵活性。[Microsoft 有一些代码可以进行罗马数字转换](http://support.microsoft.com/kb/184657)，因此我们将对其进行调整。

让我们添加我们需要的自定义代码：一个将整数转换为罗马数字的函数和一个计算要提供哪种数字的函数。

```
Function PageNumber(page As Integer, startArabic As Integer) As String
  If page <= startArabic Then
    PageNumber = IntegerToRoman(page)
  Else
    PageNumber = (page - startArabic).ToString()
  End If
End Function

Function IntegerToRoman (ByVal N As Integer) As String
  Const Digits = "ivxlcdm" 
  Dim I As Integer
  Dim Digit As Integer
  Dim Temp As String 

  I = 1 
  Temp = "" 

  Do While N > 0 
    Digit = N Mod 10 
    N = N \ 10 
    Select Case Digit 
      Case 1 
        Temp = Mid(Digits, I, 1) & Temp 
      Case 2 
        Temp = Mid(Digits, I, 1) & Mid(Digits, I, 1) & Temp 
      Case 3 
        Temp = Mid(Digits, I, 1) & Mid(Digits, I, 1) & Mid(Digits, I, 1) & Temp 
      Case 4 
        Temp = Mid(Digits, I, 2) & Temp 
      Case 5 
        Temp = Mid(Digits, I + 1, 1) & Temp 
      Case 6 
        Temp = Mid(Digits, I + 1, 1) & Mid(Digits, I, 1) & Temp 
      Case 7 
        Temp = Mid(Digits, I + 1, 1) & Mid(Digits, I, 1) & Mid(Digits, I, 1) & Temp 
      Case 8 
        Temp = Mid(Digits, I + 1, 1) & Mid(Digits, I, 1) & Mid(Digits, I, 1) & Mid(Digits, I, 1) & Temp 
      Case 9 
        Temp = Mid(Digits, I, 1) & Mid(Digits, I + 2, 1) & Temp 
    End Select 

    I = I + 2 
  Loop 

  IntegerToRoman = Temp 

End Function 
```

为了使报表更灵活，我们将添加一个参数，用于何时恢复为阿拉伯数字（以防报表变长时在某个阶段需要十多个罗马数字）。让我们称之为它`@StartArabic`，它将是一个具有默认值的整数`10`。所以现在我们的页码表达式很简单：

```
="Page " & Code.PageNumber(Globals!PageNumber, Parameters!StartArabic.Value) 
```

# windows-phone-7 - 从市场反编译 WP7 xap 文件

> ID：13899448
> 
> 赞同：2
> 
> 时间：2012-12-16T07:33:05.063
> 
> 标签：windows-phone-7, marketplace, xap

如何反编译从 WP7 市场下载的 *.xap 文件？

例如这个： http: [//www.windowsphone.com/en-us/store/app/camper/b0e9a2f4-243d-47db-b61e-0ea16847c25a](http://www.windowsphone.com/en-us/store/app/camper/b0e9a2f4-243d-47db-b61e-0ea16847c25a)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:34:26.367

xap 是一个 zip 文件。使用 7zip 之类的程序提取其内容，然后对包含的 dll 使用标准的 .NET 反编译器（如 ILSpy 或 Reflector）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T07:58:42.227

xap 也绝对是一个 zip 文件。重命名文件的扩展名并使用任何 zip 实用程序打开。Windows 直接打开 zip 文件，只需重命名扩展名即可。然后使用任何反编译器，我个人喜欢 Telerik 的 just-decompile(free)。

但请澄清一下，您（或任何人）如何从市场获取 xap 文件。

# javascript - 外部 JavaScript 文件运行两次

> ID：13899449
> 
> 赞同：3
> 
> 时间：2012-12-16T07:33:13.730
> 
> 标签：javascript, file, external, userscripts

我有一个动态加载外部 javascript 文件的用户脚本，并且由于某种原因它运行了两次。

这是加载文件的代码：

```
var jqScript = document.createElement('script');
jqScript.setAttribute('type', "text/javascript");
jqScript.setAttribute('src', "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.js");
(document.body || document.head || document.documentElement).appendChild(jqScript);

var extraScript = document.createElement('script');
extraScript.setAttribute('src', "http://youtube.thegoblin.net/layoutFix/script.js");
document.body.appendChild(extraScript); 
```

以及来自外部文件的代码：

```
alert(1);

$.get(
"http://www.youtube.com/my_subscriptions",
function(data) {
   var dataSplit = data.split("<ol class=\"vm-vertical-nav\">")[1].split("</ol>")[0].split("<li>");
   var dataString = [];
   for (var i=2;i<dataSplit.length;i++)
   {
       dataString[i - 2] = dataSplit[i].split(">")[1].split("</a")[0];
   }
  alert(dataString);
}
, "text"); 
```

当我运行我的代码时，我从外部 .js 文件中获得了两个警报，但我得到了两次。

我做了什么？我怎样才能让它们只被调用一次？

**更新：**

* * *

我已经缩小了范围。它正在发生，因为它被附加到页面中 iframe 的正文中。

我怎样才能只将它附加到当前页面而不是 iframe？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:55:48.440

我认为正在发生的事情是您执行附加的用户脚本被应用于所有窗口（主窗口和 iframe），而不是您执行附加的代码无意中附加到 iframe 和主窗口。例如，您的附加代码正在为主窗口*和*每个 iframe 运行。

有几种方法可以知道您是否在 iframe 中。一是检查`window.frameElement`存在`!null`。所以：

```
if (!window.frameElement) {
    // ...your append code here...
} 
```

[根据 MDN](https://developer.mozilla.org/en-US/docs/DOM/window.frameElement)的说法，这将适用于几乎任何版本的 IE、任何版本的 Firefox 以及 Chrome 18 或更高版本。

另一种检查方法是查看是否`window.top`!= `window.self`，因此：

```
if (window.top != window.self) {
    // ...your append code here...
} 
```

# excel - Excel工作表中不同单元格中的多张图片

> ID：13899451
> 
> 赞同：-1
> 
> 时间：2012-12-16T07:34:20.423
> 
> 标签：excel, excel-2007, vba

由于业务性质，我有：

*   文件夹中的多张图片

我正在寻找一个实际上可以：

*   从指定文件夹拍摄所有照片
*   将它们一一插入到每个新行中具有固定大小的不同单元格中

请建议最好的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:30:05.373

您可以查看[这篇文章，了解如何将文件夹中的图片插入到您的工作表](https://stackoverflow.com/questions/13773351/vba-excel-how-to-retrieve-photos-on-matching-file-name-and-place-them-in-cel/13773843#13773843)中。

由于您只有一个路径名称而没有特定的图像名称，因此我建议您将图片重命名为顺序名称列表。

例如文件夹有 10 个图像 `img01` `img02` `img03... img10`

然后你可以修改上面的代码，根据图片名称的最后两位进行循环。您可以根据文件夹中的图像数量设置 for 循环的最大计数。

```
For i = 1 to 10
  '-- insert picture
Next i 
```

一旦你试过了，如果你还有其他问题，你可以发表评论。如果是这样，很乐意提供帮助。

# c++ - 用于在编译程序中进行数据操作的嵌入式 C++ 解释器

> ID：13899459
> 
> 赞同：4
> 
> 时间：2012-12-16T07:35:16.567
> 
> 标签：c++, embedded, interpreter

我有一个 C++ 程序，它创建了大量存储在标准 C++ 容器中的数据。我希望能够从我的二进制程序中启动一个 C++ 解释器并打开一个 REPL 会话来操作该数据。最好，我想使用现代 C++11 语法。可行吗？在 Visual Studio 环境下开发是否可行？

我听说过 Ch，但它似乎只实现了 C++ 98 语法的一小部分。

我听说过 Cling，但如果我没记错的话，Cling 的一位顶级开发人员在 2012 年的 Google TechTalks 中对这个问题做出了否定的回答。准确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:02:26.023

虽然不是解释器，但[RuntimeCompiledC++](https://github.com/RuntimeCompiledCPlusPlus/RuntimeCompiledCPlusPlus/wiki)的[控制台](https://github.com/RuntimeCompiledCPlusPlus/RuntimeCompiledCPlusPlus/tree/master/Aurora/Examples/ConsoleExample)可能会满足您的需求（可能需要一些努力才能成为更好的 REPL 编辑器），特别是因为它使用系统内置编译器，您将能够获得 C++ 11（尽管在 Windows 上我建议将其强制为 GCC/Clang 而不是 MSVC 以获得更好的 C++11 支持）。

作为一个额外的好处，它会比解释代码运行得快很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:42:37.560

在您的 shell 提示符下还有另一个 REPL。它是 bash 脚本，它使用通常的 C++ 样板和调用编译器来装饰代码片段。它有一些额外的库使其像 AWK 一样工作并处理范围/FP 表达式。不确定是否易于嵌入。[链接](http://volnitsky.com/project/scc/)。我知道它很快就会内置处理大内存表（类似db）。来自文档的示例：

```
//  Classic pipe. Alogorithms are from std:: 
scc 'vector<int>{3,1,2,3} | sort | unique | reverse'
{3, 2, 1}

//  Assign 42 to 2..5
scc 'vint V=range(0,9);   range(V/2, V/5) = 42;  V'
{0, 1, 42, 42, 42, 5, 6, 7, 8, 9}

//  Find (brute force algorithm) maximum of  `cos(x)` in interval: `8 < x < 9`:
scc 'range(8, 9, 0.01) * cos  || max'
-0.1455

//  Integrate sin(x) from 0 to pi
scc 'auto d=0.001;  (range(0,pi,d) * sin || add) * d'
2 
```

# sql-server - Sql Server 到 Ms 访问

> ID：13899462
> 
> 赞同：1
> 
> 时间：2012-12-16T07:36:06.977
> 
> 标签：sql-server, ms-access

我正在将我的数据库从 SQL Server 移动到 MS Access 以实现可移植性功能，但我被困在 SQL Server 的*Varbinary*字段类型中。我应该在 MS Access 数据库中选择什么？

```
Sql Server                 MsAccess
-----------------------------------
Images                     OLEObjects
Varbinary                  what should i choose? 
```

我正在使用 SQL Server 2005 和 Visual Studio 2010，Access 数据库也适用于 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:52:29.840

在 Access 数据库中存储图像和 blob 对象不是一个好主意。虽然使用 OLE 对象这样做在技术上是可行的，但在看到 Access 开始像乌龟一样爬行之前不需要存储很多图像/blob。大多数人会选择将这些二进制对象保存在数据库之外，而只将文件名存储在 Access 数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:26:03.207

的替代方案`VarBinary`是`OLE Object`。

有关更多详细信息，请[参阅此](http://blogs.msdn.com/b/ssma/archive/2011/03/06/access-to-sql-server-migration-understanding-data-type-conversions.aspx)。

# java - SDK 14 及更高版本上的 SNTP requestTime

> ID：13899467
> 
> 赞同：1
> 
> 时间：2012-12-16T07:37:12.997
> 
> 标签：java, android

我正在使用网络时间开发软件：

```
 if (client.requestTime("0.pool.ntp.org" , 850)) {
   long now = client.getNtpTime() + SystemClock.elapsedRealtime() –
              client.getNtpTimeReference();
   …………………
   ……………….
} 
```

这适用于低于 14 的 SDK，但在尝试使用 14 及更高版本的 SDK 时，它甚至没有通过 if 语句。需要帮助。

# php - Symfony 1.4 和 Propel 1.6：populateRelation() 在相 关表上一对一

> ID：13899469
> 
> 赞同：0
> 
> 时间：2012-12-16T07:38:48.407
> 
> 标签：php, join, symfony-1.4, propel

我喜欢 populateRelation 的工作方式，但在这种特殊情况下，我真的很困惑！

架构非常简单：

```
event
  id
  title
  user_id
user
  id
  name
user_tag
  id
  tag
user_tag_rel
  user_id
  tag_id 
```

现在，我需要做的是使用相关的用户和标签获取 10 个事件。

第一个选择是：

```
EventQuery::create()
  ->joinWithUser()
  ->useUserQuery()
    ->joinWithUserTag()
  ->endUse()
  ->limit(10)
  ->find(); 
```

Buu 不可能`with()`在多对多上与`limit()`.

所以我尝试`joinWith`用简单的方法改变`join`并调用`populateRelation('UserTag')`结果，但 Propel 说：

```
"Calling getRelation() on an unknown relation, UserTag" 
```

谁能告诉我是否有任何方法可以在 User 对象上调用 populateRelation() ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:42:54.927

就不能使用限制而言，使用 joinWith 与 with() 的作用完全相同。

您不需要使用用户查询来加入这些列。你可以这样做：

```
EventQuery::create()
    ->joinWithUser(Event.User)
    ->joinWithUserTag(User.UserTag)
    ->find(); 
```

如果你想使用限制，那么将这些作为加入，使用限制，然后运行 ​​populateRelation（如果你正在做 joinWith，你不应该需要 populateRelation，因为这两个应该是多余的）

# jquery - 在 jquery 中以编程方式在单词匹配上滚动 div

> ID：13899471
> 
> 赞同：0
> 
> 时间：2012-12-16T07:39:23.957
> 
> 标签：jquery

我编写了一个程序，当用户在文本框中键入一个单词时，div 中的所有匹配单词都会被突出显示。我有用于导航的上一个和下一个按钮。div 也有滚动条以防文本溢出。现在我想要做的是当我单击下一步按钮时，如果该单词在页面的最底部突出显示，我希望我的滚动条使用 jquery 自动滚动到该特定单词或元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:43:51.803

没有代码示例有点难以回答。但大概你已经有一些选择突出显示的单词的方法，如果是这种情况，那么你可以像这样滚动到它：

```
$("#nextButtonId").click(function() {
     $('html, body').animate({
         scrollTop: $("#highlightedWordId").offset().top
     }, 1500);
 }); 
```

# selenium - 使用 opera 驱动程序时使用多个窗口

> ID：13899472
> 
> 赞同：0
> 
> 时间：2012-12-16T07:39:46.093
> 
> 标签：selenium, webdriver, operadriver

我正在使用**opera 版本 12.11 的 opera 驱动程序**。我用于启动 opera 的代码是：

```
if(UrlGenerator.BROWSER_NAME.equalsIgnoreCase("opera")){
                DesiredCapabilities capabilities = new DesiredCapabilities();
                capabilities.setCapability("opera.log.level", "CONFIG");
                capabilities.setCapability("opera.port", -1);
                capabilities.setCapability("opera.profile", ""); 
                driver = new OperaDriver(capabilities);
            } 
```

它打开了 Opera 浏览器，我的测试运行良好。**但是当我**通过单击某个链接或使用其他方式打开一个新窗口时，**它会在同一页面中打开窗口，因此切换到窗口失败**。有人可以为此建议我一些解决方法吗？

# erlang - erlang 的结构和错误语法

> ID：13899474
> 
> 赞同：0
> 
> 时间：2012-12-16T07:40:08.297
> 
> 标签：erlang

我想知道erlang中struct和error的使用

例如，我很难理解这种语法

```
{error, bad_amount} -> {struct, [{"status", "error"}, {"reason", "badamount"}]}; 
```

最好的尊重巴蒂斯塔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T11:06:07.227

The `struct` and `error` atoms does not really mean anything in Erlang. It is just atoms, [tags](http://www.erlang.se/doc/programming_rules.shtml#REF32551) that identifies what type of tuple you have. The first tuple is just two atoms. The second is a tuple with the first element being an atom (the tag) and the second being a list of tuples.

Tagging is an Erlang *convention*. It is a common thing to do (so common that [records](http://www.erlang.org/doc/programming_examples/records.html) are implemented as tagged tuples). Tagging is the nearest a type system you get in Erlang since you make the values carry type information, and the tags are commonly used for pattern-matching.

# guice - 简单 XML 框架中的接口处理与 guice

> ID：13899475
> 
> 赞同：2
> 
> 时间：2012-12-16T07:40:18.083
> 
> 标签：guice, simple-framework

[简单](http://simple.sourceforge.net "简单的 XML 框架")无法处理开箱即用的接口：

```
org.simpleframework.xml.core.InstantiationException: Cannot
instantiate interface com.bitplan.restmodelmanager.Package for
interface com.bitplan.restmodelmanager.Package  at
org.simpleframework.xml.core.ObjectFactory.getInstance(ObjectFactory.java:68) 
```

ObjectFactory 的源代码（见下文）似乎表明策略可以解析接口的类。恕我直言，这里可以使用 guice 注射器。对于这样的战略，什么是好的（可能存在的）解决方案？

```
 /**
    * This method will instantiate an object of the field type, or if
    * the <code>Strategy</code> object can resolve a class from the
    * XML element then this is used instead. If the resulting type is
    * abstract or an interface then this method throws an exception.
    * 
    * @param node this is the node to check for the override
    * 
    * @return this returns an instance of the resulting type
    */       
   @Override
   public Instance getInstance(InputNode node) throws Exception {
      Value value = getOverride(node);
      Class expect = getType();

      if(value == null) { 
         if(!isInstantiable(expect)) {
            throw new InstantiationException("Cannot instantiate %s for %s", expect, type);              
         }
         return context.getInstance(expect);         
      }
      return new ObjectInstance(context, value);      
   } 
```

# iphone - 工具栏动画不流畅

> ID：13899476
> 
> 赞同：0
> 
> 时间：2012-12-16T07:40:45.140
> 
> 标签：iphone, ios, uitoolbar, cgaffinetransform

我正在使用 CGAffineTransform 为一些界面元素设置动画。它工作正常，但由于某种原因，使用此方法制作动画的工具栏动画不流畅。在动画到所需位置之前，它有点弹出或闪烁（似乎在向下移动之前向上移动）。解决方案可能是使用不同类型的视图，但我仍然对导致这种情况的原因感到好奇。

```
CGAffineTransform toolbarViewTransform = CGAffineTransformMake(1, 0, 0, 1, 0, 0);
[UIView animateWithDuration:0.2
             animations:^{toolBar.transform = toolbarViewTransform;}
             completion:^(BOOL finished){  }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:50:14.240

我有这个完全相同的问题。

最后我发现 AutoLayout 导致了这个。虽然我实际上并没有弄清楚如何或为什么。

最后我通过禁用自动布局来修复它。

如果这是您的选择，那么我建议您这样做。

# c++ - 什么时候使用静态库需要头文件？

> ID：13899481
> 
> 赞同：5
> 
> 时间：2012-12-16T07:41:16.463
> 
> 标签：c++, static-libraries, header-files

如果我在 Linux 中用 C++ 创建一个静态库以生成“.a”文件，我（或其他任何人）如何使用该库？例如，我的库定义了一个类。我认为仅仅提供“.a”文件是不够的，还要提供一个头文件。我如何知道“.a”文件必须提供哪些头文件？

例如，我是否需要提供所有包含在我的库代码中的所有头文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T07:50:49.963

头文件为类和函数提供“声明”。这些是编译器所需要的，因此它可以 a) 验证您是否传递了正确的参数，和/或设置了类/结构的正确数据成员，并且 b) 它可以知道如何调用这些函数。

```
void do_something(int a, std::string& s); 
```

告诉编译器这个函数需要两个参数： an`int`和 a `string&`。这将验证您传递的参数类型是否正确（语言级构造），并解释了编译库中的目标代码所期望的内容（两个参数——如何由调用约定确定。）

如果该编译库使用来自另一个库的代码，则您*不必*提供这些标头，因为它们与您编写的代码无关。这些库工作在“应用程序二进制接口”（ABI）级别，而不是“应用程序编程接口”（API）。这意味着它们只是传递指针等。而不是 C 类型的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T07:43:23.923

> 我如何知道“.a”文件必须提供哪些头文件？

通常，所有描述您希望用户访问的功能的头文件。这意味着答案

> 我是否需要提供代码中任何位置包含的所有头文件

通常是“不，你没有” - 可能有你不公开的内部/私有标题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T07:58:16.083

头文件的技术原因是让编译器在编译*用户*代码时知道**名称**和**大小**，以便它可以安排用户对象的布局。

 *这就是为什么*公共*`private`类的成员（注意重点：*public*，这里不是关键字）必须在标题中公开的原因。

 **您可以避免仅将在暴露部分中布局的类暴露为指针或引用，因为它们的实际实例不会留在生成的用户对象本身中。在这种情况下，您可以只声明名称。

您有 -in material-top 向用户提供所有声明

*   用户代码需要访问
*   以某种方式影响用户对象的大小和组成（即使没有用户的直接知识）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T07:43:12.830

如果您想使用一个类，我假设您已经知道该类的名称。在这种情况下，您可以简单地搜索定义类的标头，并将其包含在内。***

# javascript - 无法在 getJSON 结果中访问 JSON

> ID：13899486
> 
> 赞同：-1
> 
> 时间：2012-12-16T07:41:51.473
> 
> 标签：javascript, jquery, ajax, json

我的 JSON 如下所示：

```
 {
  "statistics": [
    {
      "total_questions": 4152031,

      "views_per_day": 2198092.55,
      "api_version": {
        "version": "1.0",
        "revision": "2012.10.30.200"
      },
      "site": {
        "name": "Stack Overflow",
        "logo_url": "http://cdn.sstatic.net/stackoverflow/img/logo.png",
        "api_endpoint": "http://api.stackoverflow.com",
        "site_url": "http://stackoverflow.com",
        "description": "Q&A for professional and enthusiast programmers",
        "icon_url": "http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png",
        "aliases": [
          "http://www.stackoverflow.com"
        ],
        "state": "normal",
        "styling": {
          "link_color": "#0077CC",
          "tag_foreground_color": "#3E6D8E",
          "tag_background_color": "#E0EAF1"
        }
      }
    }
  ]
} 
```

Javascript是：

```
$.getJSON('json1', function(data) {
    var items = [];

    $.each(data, function(key, val) {
        items.push('<li id="'+ statistics.data.key +'"> ' + statistics.data.val +'</li>')
    });

    $('<ul />', {
        'class':'ulLI',
        'html':items.join('')
    }).appendTo('body');
}); 
```

问题是我没有正确地访问统计数组中的数据，然后访问站点对象？你能告诉我如何访问这些对象/数组中的数据并将其附加到 html 中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T07:52:03.583

在你的`$.getJSON('json1', function(data)`

`data`是整个对象

你需要循环`data.statistics`哪个是一个数组

```
$.each(data.statistics, function( index, item){
     /* here you access properties like "total_questions"*/
     var totalQ= item.total_questions;
}) 
```

编辑：在 JSON 中显示`data.statistics`的数组只有一个元素。如果总是这样，您可以跳过`each`循环并使用 javascript 表示法来获取数组的第一个元素：

```
 var nestedData= data.statistics[0];
 var totalQ= nestedData.total_questions; 
```

如果你想在不知道它们的键的情况下遍历所有属性，你将需要更多的代码来检查属性是对象、数组还是字符串，如果它是对象或数组，则递归循环遍历执行相同检查的子对象和相应地处理。

您还需要提供有关如何在 html 中输出嵌套对象的更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T08:06:29.490

如果您想打印站点对象内的所有内容，这将起作用

```
$.getJSON('your json file path', function(data) {
var items = [];
$.each(data.statistics[0].site, function(key, val) {
items.push('<li id="'+ key +'"> ' + JSON.stringify(val) +'</li>') 
```

您作为文件路径提供的内容似乎不正确。

# api - 带有消息“错误”的未捕获异常“Google_ServiceException”？

> ID：13899488
> 
> 赞同：0
> 
> 时间：2012-12-16T07:42:12.253
> 
> 标签：api

**带有消息**的未捕获异常“Google_ServiceException”****

 **'调用 POST 时出错[https://www.googleapis.com/calendar/v3/calendars/primary/events](https://www.googleapis.com/calendar/v3/calendars/primary/events)

**任何人都可以帮助解决google api中的这个错误吗？**

google-api-php-client/src/io/Google_REST.php 中的 400 无效值：66 堆栈跟踪：#0

它有时工作正常....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:01:51.397

此错误表示您为“cx”参数传递了不正确的值。它应该是格式：`128254313567041584913:fdas7c-asdf`**

# ios - iOS 中的图像幻灯片自定义控件

> ID：13899489
> 
> 赞同：0
> 
> 时间：2012-12-16T07:42:26.467
> 
> 标签：ios, cocoa-touch, custom-controls

我正在为 iOS 搜索图像幻灯片自定义控件。

像下面的图片

![在此处输入图像描述](../Images/0c9e74f4fe5a9c82853c1150abd14ecd.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T10:10:12.433

尝试[iCarousel](https://github.com/nicklockwood/iCarousel)。它看起来不错，而且易于使用。

# mpi - MPI 并行化一个函数

> ID：13899502
> 
> 赞同：1
> 
> 时间：2012-12-16T07:46:12.530
> 
> 标签：mpi

我想并行化一个数值积分函数。我想在计算过程中使用这个函数。之前的工作应该在根进程中完成。这可以在 MPI 中完成吗？

```
 double integral_count_MPI(double (*function)(double) , double beginX, double endX, int      count)
 {
    double step, result;
    int i;
    if (endX - beginX <= 0) return 0;
    step = (endX - beginX) / count;
    result = 0;

    double *input = (double*)malloc((count+1) *sizeof(double));
    for (i = 0; i <= count; i ++)
    {
       input[i] = beginX + i*step;
    }
    // Calculate and gather
 } 
```

**编辑**

算法：

```
 1 process calculation;
while:
  1 process calculation;
  integration very complex function with many processes;
  1 process calculation;
end while;
1 process calculation; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:16:29.997

MPI 提供了各种方法来构建在“幕后”使用它的库。对于初学者，您可以按需初始化 MPI。MPI-2 修改了调用的要求，`MPI_Init`因此每个兼容的实现都应该能够正确地使用`NULL`参数初始化`MPI_Init`（因为实际的程序参数可能对库不可用）。由于 MPI 应该只被初始化一次，所以库必须通过调用来检查它是否已经被初始化`MPI_Initialized`。代码基本上是这样的：

```
void library_init(void)
{
   int flag;

   MPI_Initialized(&flag);
   if (!inited)
   {
      MPI_Init(NULL, NULL);
      atexit(library_onexit);
   }
} 
```

`atexit()`初始化代码还通过从 C 标准库调用来注册退出处理程序。在此退出处理程序中，如果 MPI 库尚未最终确定，它会最终确定它。如果不这样做，可能会导致`mpiexec`整个 MPI 作业终止，并显示至少一个进程已退出但未完成 MPI 的消息：

```
void library_onexit(void)
{
   int flag;

   MPI_Finalized(&flag);
   if (!flag)
      MPI_Finalize();
} 
```

这种安排使您可以`integral_count_MPI`像这样编写函数：

```
double integral_count_MPI(...)
{
    library_init();

    ... MPI computations ...
} 
```

`integral_count_MPI`将在第一次调用时要求初始化 MPI 库。`library_init`由于写入的方式，以后的调用不会导致重新初始化。也不需要明确的最终确定 - 退出处理程序会小心。

请注意，您仍然需要通过 MPI 进程启动器（ 、 等）启动代码`mpirun`，`mpiexec`并且必须小心执行 I/O，因为代码的串行部分将在每个实例中执行。许多支持 MPI 的库为此目的提供了自己的 I/O 例程，这些例程过滤进程等级并只允许等级 0 执行实际的 I/O。您还可以使用 MPI 的动态流程管理工具来按需生成其他流程，但这需要您将大部分流程管理抽象到执行集成的库中，这将使其变得非常复杂（以及代码你的主程序看起来很尴尬）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T11:21:21.703

[你可以在这里](https://computing.llnl.gov/tutorials/mpi/)找到 MPI 文档

基本上，逻辑如下：

```
int main()
{
    MPI_INIT(...);
    MPI_Comm_size(...);    //get the number of processes
    MPI_Comm_rank(...);    //get my rank

    if (rank == 0)     //master process
    {
        for (i = 1; i < n; i++)
            MPI_Send(...) //Send interval data specific to i process

        double result = 0;
        for (i = 1; i < n; i++)
        {
            double part_result;

            MPI_Recv(&part_result, ...) //Receive partial results from slaves

            result += part_result;
        }

        // Print result
    }
    else               //slave process
    {
        MPI_Recv(...)  //Receive interval data from master (rank 0 process)

        double result = integral_count_MPI(...);

        MPI_Send(...)  // Send results to master
    }

    MPI_FINALIZE(...);
} 
```

# .net - 管理 WCF 服务中的重复数据

> ID：13899505
> 
> 赞同：0
> 
> 时间：2012-12-16T07:46:52.473
> 
> 标签：.net, wcf, datacontractserializer

我正在编写一个从不同客户端接收大消息的 WCF 服务。这些消息中的每一个都由一个对象图组成，其中许多内部对象可能是相同的。我的服务将这些消息中的数据存储到内存中。

我试图最小化服务的内存消耗。所以我想存储一个对象而不是从网络接收到的几个相同的对象（嵌套在对象图中）。

我正在使用 DataContractSerializer 所以首先想到的是使用[Object Graph Preservation](http://msdn.microsoft.com/en-us/library/ms731073.aspx)选项`preserveObjectReferences`，但是这种方法有一些缺点：

*   与其他技术没有互操作性（如果这是唯一的问题，我可以忍受）。
*   序列化和反序列化过程运行较慢。
*   当不同消息（可能来自不同客户端）之间的对象相同时，没有多大帮助。仅适用于同一消息中同一对象图上的对象。

因此，接下来想到的是使用某种缓存。当我收到一条消息时，我可以遍历对象图，使用缓存为所有相同的对象找到一个实例，并用这个实例更新我的存储。当存储处理了对该对象的所有引用时，可以将其从缓存中删除并释放该对象的内存。

我可以使用[MemoryCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache%28v=vs.100%29.aspx)但不幸的是我的键不是字符串，我不想将它们转换为字符串只是为了将它们存储在缓存中。（当 Microsoft 将 ObjectCache 限制为字符串键时，他们自己是怎么想的？）

所以，在用弱引用和可以与 IEqualityComparer 进行比较的键重新编写缓存类之前，我想确保这里没有遗漏任何东西......

* * *

## 我的问题是：

*   是否有更好的方法来处理（并存储在内存中）WCF 服务中的重复对象？
*   是否有一个好的（高效的、通用的、开放的）缓存实现我可以使用而不是重写一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:53:50.893

您可以使用 Microsoft App Fabric Server (Velocity) 缓存，它非常适合 WCF 服务的部署。

[应用结构缓存功能](http://msdn.microsoft.com/en-us/library/hh334364.aspx)

# java - 列表 投射到列表

> ID：13899511
> 
> 赞同：0
> 
> 时间：2012-12-16T07:47:10.023
> 
> 标签：java

我有一个超类`DBAdapter`，它有`fetchAll()`从数据库表中选择所有记录的方法`List<DBObject>`。我已经继承了这个类`CategoryDBAdapter`，这个类知道`Category`从 扩展的类`DBObject`。

当我打电话时：

```
CategoryDBAdapter categoryDbAdapter = new CategoryDBAdapter(dbHelper);

List<Category> categories = categoryDbAdapter.fetchAll(); 
```

我的代码无法`List<DBObject>`转换为`List<Category>`. 解决这种冲突的常用方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:11:38.567

您可以更改 DBAdapter 和 DBCategoryAdapter 类以使用泛型：

```
class DBAdapter<T extends DBObject> {
    List<T> fetchAll() {
        ...
    }
}

class DBCategoryAdapter extends DBAdapter<Category> {

} 
```

您还需要调整 fetchAll() 方法的内容，这有多容易取决于您的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T07:59:09.607

**我不认为有任何直接的方法。**您需要为`Category`元素创建一个新列表 ( `List<Category> categoryList`)，迭代返回的`DBObject`元素列表 ( `List<DBObject> dbOjectsList`)，转换元素 ( `Category category = (Category) dbObject;`) 并将类别元素列表 ( ) 添加到新列表中`categoryList.add(category);`。

# jquery - jQuery：问题 cookie Internet Explorer

> ID：13899513
> 
> 赞同：1
> 
> 时间：2012-12-16T07:47:42.480
> 
> 标签：jquery, internet-explorer, cookies

我做了一个登录页面。当用户登录时，向 API 发送请求。此 API 是 PHP 并检查用户名和密码。当两者都正确时，将发送回唯一密钥（将其放置在数据库中以供进一步使用：用户 ID 和网站所需的其他内容）。在该密钥被发回后，它被放置在一个 cookie 中：

```
$.cookie("session", JSON.stringify(result)); 
```

设置 cookie 后，我将用户发送到新页面：

```
location.href = 'dashboard.htm'; 
```

在此页面中，jQuery 检查 cookie “会话”是否存在。如果不是，则将用户发送回登录页面。

```
sessionId = ($.cookie("session") ? JSON.parse($.cookie("session")).SessionId : 0);
return sessionId; 
```

这在 Chrome 中运行良好，但 IE (8/9) 对此有一些问题。我发现当您访问dashboard.htm 时，会话就存在了。我一按 F5，会话就消失了。有时cookie根本没有设置！

我似乎无法弄清楚为什么会在 IE 中发生这种情况。有人知道吗？也欢迎保存该唯一密钥的其他选项/想法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:13:07.117

可能的想法/您可能会尝试的事情清单。多年来收集的一些信息！

您还应该 100% 确保您的 cookie 代码不会重置 cookie。我已经做到了，我知道其他人也做到了。我们发誓它不是我们的代码，但最终有时它是;)

远离 cookie 名称中的特殊字符，例如下划线 (_) 和连字符 (-)。IE 不喜欢它们，有时东西可以工作，有时则不行。

确保为 cookie 设置一个非常遥远的过期日期。浏览器使用计算机本地时间来查看 cookie 是否仍然可用。如果计算机的日期和时间不正确，可能会导致类似这样的问题。

确保为正确的域名设置 cookie，我见过有人为 path.example.com 设置 cookie，然后尝试从 bob.example.com 访问它们。由于跨域策略，这将不起作用。

如果您尝试通过 Javascript 访问 cookie，您应该确保您没有将 httponly 标志设置为 true。此标志将 100% 防止任何 cookie 被 Javascript 访问。

如果您在 iframe 或框架集中设置 cookie，您很可能需要在服务器上设置 P3P 策略。如果您计划支持 IE，您很可能应该有一个人。欲了解更多信息，请访问[http://en.wikipedia.org/wiki/P3P](http://en.wikipedia.org/wiki/P3P)

示例 HTACCESS 设置 P3P 策略：

```
<IfModule mod_headers.c>
    Header set P3P "policyref=\"/w3c/p3p.xml\", CP=\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\""
</IfModule> 
```

对于监控 cookie 的方法，我建议使用 Chrome 的检查器。在网络选项卡下，您可以单击一个请求，它会为您提供更多选项卡，例如 Cookie 选项卡，可让您查看所有 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:01:15.893

也许是史蒂文给出的答案的一部分，但我已经找到并重写了一些用于 cookie 的函数：

```
function setCookie(name, value, days) {
if (days) {
    var date = new Date();
    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
    var expires = "; expires=" + date.toGMTString();
}
else var expires = "";
document.cookie = name + "=" + value + expires + "; path=/";
} 
```

并获得一个 cookie：

```
function getCookie(name) {
var nameEQ = name + "=";
var ca = document.cookie.split(';');
for (var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') c = c.substring(1, c.length);
    if (c.indexOf(nameEQ) == 0) 
        return c.substring(nameEQ.length, c.length);
}
return null;
} 
```

这对我来说效果更好。

作为 iFrame 的一部分：已修复。可以再次找到 Cookie，我将 ajax 调用从 json 更改为 jsonp。

再加上 Steven 的一些提示，现在在 IE 中一切正常。甚至 Chrome 也得到了需要做的事情:)

# java - 活动娱乐后连接到服务

> ID：13899515
> 
> 赞同：4
> 
> 时间：2012-12-16T07:47:48.537
> 
> 标签：java, android, service, android-activity

我有播放音乐的活动和服务。onCreate 的活动我 startService 并尝试创建一个 ServiceConnection，在 ServiceConnection 的 onServiceConnected 中我初始化服务，所以在此之后它不为空。然后我将服务绑定到这个服务连接。

所以，我的 musicService 不为空，应用程序工作，服务可以发送前台通知。假设我旋转了我的设备并旋转了屏幕，我的活动调用了 onDestroy 并调用了 onCreate。我的musicService 继续播放，但在onCreate 中有startService，再次创建ServiceConnection 和bindService，由于musicService 为null，应用程序崩溃。

我透露这是因为 ServiceConnection 的 onServiceConnected 现在从未被调用过。我应该怎么做才能连接到我在第一个活动启动音乐服务时创建的？

我在每个 onCreate 上运行的代码：

```
 Intent intent = new Intent(this, MusicPlaybackService.class);
    startService(intent);
    serviceConnection = new ServiceConnection() {

        public void onServiceConnected(ComponentName className,
                                       IBinder service) {
            LocalBinder binder = (LocalBinder) service;
            musicPlaybackService = binder.getService(); 
        }

        public void onServiceDisconnected(ComponentName arg0) {
        }
    };
    bindService(intent, serviceConnection, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:04:49.127

我不知道我做了什么，但它有效。现在我有这个代码。

```
 Intent intent = new Intent(this, MusicPlaybackService.class);
    MyApplication.getAppContext().startService(intent);
    serviceConnection = new ServiceConnection() {

        public void onServiceConnected(ComponentName className,
                                       IBinder service) {
            LocalBinder binder = (LocalBinder) service;
            musicPlaybackService = binder.getService();
            // now onServiceConnected calls on screen rotation.
        }

        public void onServiceDisconnected(ComponentName arg0) {
        }
    };
    MyApplication.getAppContext().bindService(intent, serviceConnection, BIND_AUTO_CREATE); 
```

# jquery-ui - 在屏幕上保留 JQuery UI 1.9 工具提示

> ID：13899516
> 
> 赞同：1
> 
> 时间：2012-12-16T07:48:07.560
> 
> 标签：jquery-ui, tooltip

我想知道如何在 JQuery UI 工具提示中插入控件（按钮、表单等）。

如何使用延迟/鼠标移出控件使它们保持可见并使其淡出，并加载自定义内容ajax？

网址：/ajax/tooltip_content.html

```
<a href="a" id="mylink">mouse hover here</a>

$("#mylink").tooltip(); 
```

# c# - ArrayList 过滤逻辑

> ID：13899519
> 
> 赞同：2
> 
> 时间：2012-12-16T07:48:27.913
> 
> 标签：c#, asp.net

我有一个数组`arrTotalItems`列表`class Operation.Operation`。

该类有两个属性，一个是`ID`和`name`。现在我有其他`arraylist arrSelectedItems`包含 ID 的`operations`

现在我必须将两个绑定`DataList`到`operation`.

首先`DataList`将绑定到 selected `arraylist`。

其他`DataList`将被绑定到`arrTotalItems - arrSelectedItems`的是那些不在 arrSelectedItems 中的操作。

无法找到如何绑定两个列表的逻辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:22:17.130

如果您使用的是 .NET Framework 3.5 或更高版本，[LINQ](http://msdn.microsoft.com/en-us/library/vstudio/bb397926.aspx)允许您从存储在 Select() 中的 id 中投影操作`arrSelectedItems`，[然后](http://msdn.microsoft.com/en-us/library/bb548891.aspx)使用[except()](http://msdn.microsoft.com/en-us/library/bb336390.aspx)来计算`arrTotalItems`与此投影之间的交集：

```
IEnumerable<Operation> totalOps = arrTotalItems.Cast<Operation>();
yourDataList.DataSource = totalOps.Except(arrSelectedItems.Cast<string>().Select(
    id => totalOps.Where(op => op.ID == id).FirstOrDefault())); 
```

请注意，您首先必须向[`Cast<T>()`](http://msdn.microsoft.com/en-us/library/bb341406.aspx)您申请，`ArrayLists`以获得`IEnumerable<T>`可与 LINQ 方法一起使用的实例。

# knockout.js - 如何访问网格行

> ID：13899520
> 
> 赞同：1
> 
> 时间：2012-12-16T07:48:31.813
> 
> 标签：knockout.js, kendo-ui

我正在尝试使用 kendoui 构建 javascript 可编辑网格，我想要编辑仅编辑 javascript 数据的弹出窗口（无服务器） 弹出窗口必须在用户单击每一行上的“编辑”按钮后出现，在弹出窗口上我想显示输入选定的用户姓氏和名字。我的问题是：如何访问行的数据绑定数据（因为据我所知没有 $data 变量）？

这是我的 HMTL

```
<!DOCTYPE html>
<html>
<head>
<link href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.default.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.dataviz.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="http://cdn.kendostatic.com/2012.2.710/js/kendo.all.min.js"></script>
<script src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.js"></script>

  <script src="https://raw.github.com/rniemeyer/knockout-kendo/master/build/knockout-kendo.min.js"></script>  
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div data-bind="kendoGrid: {data:users, sortable:true, columns:[
{ field: 'firstname', width: '100px' },
{ field: 'lastname', width: '100px' },
{ field: 'lastname', width: '100px' },
{ template: '<button>edit</button>', title: ''}
]}"> </div>
</body>
</html> 
```

这里是JS：

```
var userVM=function(nm,lnm){
var self=this;  

  this.firstname= ko.observable(nm);
  this.lastname= ko.observable(lnm);
  this.EditUser=function(u){

    selectedUser(u);
    $("#dialog").dialog();
  };

};
var users=ko.observableArray([new userVM('Shimon','Rapaport'),new userVM('Ahmed','ElChalil')]) ;

var selectedUser=ko.observable();

ko.applyBindings(); 
```

这是工作演示（没有编辑弹出窗口） [http://jsbin.com/iwevek/1/edit](http://jsbin.com/iwevek/1/edit)

这是工作演示，我在没有 kendoui 的情况下做同样的事情非常简单 [http://jsbin.com/epocov/9/edit](http://jsbin.com/epocov/9/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:03:32.753

我目前正在努力添加在网格（和列表视图）小部件中呈现 Knockout 模板的功能。这将允许您针对您的视图模型项编写普通的 KO 绑定。

如果没有这种支持，您需要一种从按钮到视图模型数据的方法。这是一个示例，其中用户有 id，id 是按钮 (data-id) 的一部分，我使用 $.on 附加委托处理程序。

从那里您可以使用 id 找到合适的用户并相应地更新您的`selectedUser`observable。

```
$(".k-grid").on("click", ".editBtn",function() {
  var id = this.getAttribute("data-id"),
      match = ko.utils.arrayFirst(users(), function(user) {
          return user.id === id;
      });

  selectedUser(match);
}); 
```

[http://jsbin.com/ixewud/2/edit](http://jsbin.com/ixewud/2/edit)

一旦你`selectedUser`更新了，你就可以使用你的模态弹出窗口或任何你想要的东西进行编辑。

# jquery - 在网站中为未知数量的项目创建“栏”

> ID：13899521
> 
> 赞同：0
> 
> 时间：2012-12-16T07:48:53.930
> 
> 标签：jquery, charts, progress-bar

我不知道如何形容这个...

我想知道能够产生类似于 SO 的“声誉图表”的最佳方式

![代表图](../Images/7c9a59b35750c40cf6f2b42c03f23467.png)

我正在考虑将它用于一个非常简单的“队列监控”mvc3 网站。

例如
，使用 ajax，每隔 x 秒查询一次我的队列，以获取它们中项目数的简单计数。

然后管理员可以打开页面并“实时”查看队列计数。

当然，如果添加/删除队列，我希望它能够工作。我实际上将它水平放置并带有标签，甚至可能是计数，但这就是所有光泽和化妆！

有没有一种明智的方法来实现图形部分？队列部分已经在工作。

最初的想法是使用 jquery 和附加组件......但不确定要寻找什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:06:39.223

我会使用 Google Chart Image API - [https://developers.google.com/chart/image/docs/data_formats](https://developers.google.com/chart/image/docs/data_formats)

在在线“向导”上 - [http://imagecharteditor.appspot.com/](http://imagecharteditor.appspot.com/)

基本上，您只需将“img”元素添加到 DOM 并在图像 URL 中传递适当的参数。它将返回您准备使用的图像。

以下是您可能为使用而生成的图像示例： [http ://chart.googleapis.com/chart?chxt=y&chbh=a&chs=300x225&cht=bvg&chco=A2C180&chd=t:10,50,60,80,40 ,60,30&chtt=垂直+条形图+图表](http://chart.googleapis.com/chart?chxt=y&chbh=a&chs=300x225&cht=bvg&chco=A2C180&chd=t:10,50,60,80,40,60,30&chtt=Vertical+bar+chart)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:33:36.613

尝试使用 jQuery 插件[flot](http://www.flotcharts.org/)。

如果将浮点图与 AJAX 和 setTimeout 结合使用，则可以根据需要随时轮询服务器以获取新数据[link](http://people.iola.dk/olau/flot/examples/ajax.html)。

# java - 分享文字和图片时出现各种Android版本错误

> ID：13899522
> 
> 赞同：1
> 
> 时间：2012-12-16T07:49:12.337
> 
> 标签：java, android, android-intent, share

代码编写如下：

```
 final Intent intent = new Intent(Intent.ACTION_SEND);
        intent.setType("*/*");
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.putExtra(Intent.EXTRA_SUBJECT, subject.toString());
        intent.putExtra(Intent.EXTRA_TEXT, text.toString());
        intent.putExtra(Intent.EXTRA_STREAM, "file://" + path);

         startActivityForResult(
                Intent.createChooser(intent, title.toString()), REQUEST_CODE); 
```

结果如下

1.  API 10：工作
2.  API 14：错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:14:47.040

使用此方法与文字分享照片。调用此方法并传递参数 nameofapp 和 imagepath。应用程序名称表示您想要分享的内容，如 gmail、facebook、twitter。

```
private void share(String nameApp, String imagePath) {
    try
    {
        List<Intent> targetedShareIntents = new ArrayList<Intent>();
        Intent share = new Intent(android.content.Intent.ACTION_SEND);
        share.setType("image/jpeg");
        List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(share, 0);
        if (!resInfo.isEmpty()){
            for (ResolveInfo info : resInfo) {
                    Intent targetedShare = new Intent(android.content.Intent.ACTION_SEND);
                    targetedShare.setType("image/jpeg"); // put here your mime type
                    if (info.activityInfo.packageName.toLowerCase().contains(nameApp) || info.activityInfo.name.toLowerCase().contains(nameApp)) {
                        targetedShare.putExtra(Intent.EXTRA_SUBJECT, "Text");
                        targetedShare.putExtra(Intent.EXTRA_TEXT,"This photo is created by APP");
                        targetedShare.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(imagePath)) );
                        targetedShare.setPackage(info.activityInfo.packageName);
                        targetedShareIntents.add(targetedShare);
                    }
                }
                Intent chooserIntent = Intent.createChooser(targetedShareIntents.remove(0), "Select app to share");
                chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedShareIntents.toArray(new Parcelable[]{}));
                startActivity(chooserIntent);
        }
    }
    catch(Exception e){
    }
 } 
```

像这样使用：-

```
try {
    File filePath = "/mnt/sdcard/vmphoto.jpg"; //This is imagefile path in your change it acc. to your requirement.
    share("facebook",filePath.toString());

}
catch(Exception e) {
           //exception occur might your app like gmail , facebook etc not installed or not working correctly.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:27:11.610

```
final Intent intent = new Intent(Intent.ACTION_SEND);
    intent.setType("*/*");
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.putExtra(Intent.EXTRA_SUBJECT, subject.toString());
    intent.putExtra(Intent.EXTRA_TEXT, text.toString());
    intent.putExtra(Intent.EXTRA_STREAM,
            Uri.fromFile(new File("/" + path))); 
```

# actionscript-3 - 如何为精灵设置正确的移动速度（闪光）

> ID：13899523
> 
> 赞同：1
> 
> 时间：2012-12-16T07:49:34.903
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5

```
 if(sprite.status == 'moveBack')
            {
                var pointX:Number = mouseX + Math.cos(sprite.angle) * 100;
                var pointY:Number = mouseY + Math.sin(sprite.angle) * 100;
                dx = pointX - sprite.x
                dy = pointY - sprite.y;
                var angle:Number = Math.atan2(dy, dx);
                var dist:Number = Math.sqrt(dx * dx + dy * dy);
                if(dist < 1)
                {
                    sprite.status = 'free';
                }
                else
                {
                    sprite.x += Math.cos(angle) * 15;
                    sprite.y += Math.sin(angle) * 15;
                }
                trace(dist);
            }
sprite.angle += 0.05; 
```

这是一小段代码，所以这里的一个精灵对象正在回到它们之前的位置，指向他来的地方，每次都在移动，问题是：假设我的速度是 15 像素/每帧，我的电影剪辑接近他即将到来的终点，剩余距离为 20，那么如果我的速度为 15，则 20 -15 = 5，然后 5 - 15 = -5，但我使用的是毕达哥公式并且距离总是正的，所以精灵不能达到0距离然后自由，在这种情况下我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:58:24.947

如果您对移动物体减速并停在目标位置的更复杂的行为感兴趣，我建议使用转向行为：[http ://www.red3d.com/cwr/steer/gdc99/](http://www.red3d.com/cwr/steer/gdc99/)

在这种情况下，您正在查看**到达**行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:49:07.713

在这种情况下，我倾向于为自己做的只是检查剩余距离是否等于或小于每一步的速度。然后如果是，只需将速度设置为剩余距离。

# java - 使用多个分隔符拆分字符串

> ID：13899524
> 
> 赞同：-1
> 
> 时间：2012-12-16T07:50:07.350
> 
> 标签：java, string, word

我想将此字符串拆分为单词

> “公共静态 9 扫描仪输入 = 新扫描仪（System.in）；”

问题是当我运行程序时，输入后的单词是“”或空格，下一个单词是新单词。看起来像这样：

> ```
> Kata 1 = public
> Kata 2 = static
> Kata 3 = 9
> Kata 4 = Scanner
> Kata 5 = input
> Kata 6 = 
> Kata 7 = new
> Kata 8 = Scanner
> Kata 9 = System 
> ```

我想要的是在“输入”之后直接到“新”。这是我的代码：

```
int index=0;
String kata [] = kalimat.split("\\s+|\\W+");
System.out.println("\nKata dalam kalimat : ");
for (String s:kata){
    System.out.println("Kata "+(index+1)+" = "+s);
    index++;
}
System.out.println("Jumlah kata : " + kata.length); 
```

我知道问题是我用于 .split() 的分隔符

我希望输出是：

> ```
> Kata 1 = public
> Kata 2 = static
> Kata 3 = 9
> Kata 4 = Scanner
> Kata 5 = input
> Kata 6 = new
> Kata 7 = Scanner
> Kata 8 = System 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:55:50.487

`=`不是“单词字符”（`[a-zA-Z_0-9]`），因此`\\W+`将其视为“不是单词”并忽略它。

请参阅：[http ://docs.oracle.com/javase/tutorial/essential/regex/pre_char_classes.html](http://docs.oracle.com/javase/tutorial/essential/regex/pre_char_classes.html)

**编辑添加：**所以答案是......使用一组并添加它。`[=\\s\\W]+`

# jquery - 使用滚动变量来增加元素的高度？

> ID：13899525
> 
> 赞同：0
> 
> 时间：2012-12-16T07:50:23.613
> 
> 标签：jquery, css

下面的函数通过获取窗口高度并将其除以窗口高度来计算用户滚动了多远。随着该百分比的增加，我想增加 div 'arrow' 的 css 'height' 数量。我究竟做错了什么？

```
$(document).scroll(function(){

         //  grab the scroll amount and the window height
          var scrollAmount = $(window).scrollTop();
          var documentHeight = $(document).height();

       //    calculate the percentage the user has scrolled down the page
          var scrollPercent = (scrollAmount / documentHeight) * 100;

          function increaseHeight() { 
                $(".arrow").css({
                    height: scrollPercent + 'px'
                });

               //do something when a user gets 50% of the way down my page
      }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:57:08.647

这应该工作 - [http://jsfiddle.net/LsuY4/1/](http://jsfiddle.net/LsuY4/1/)

```
$(document).scroll(function(){
         // grab the scroll amount and the window height
          var scrollAmount = $(window).scrollTop();
          var documentHeight = $(document).height();

          // calculate the percentage the user has scrolled down the page
          var scrollPercent = (scrollAmount / documentHeight) * 100;

          $(".arrow").css({
             height: scrollPercent + 'px'
          });

          // do something when a user gets 50% of the way down my page
      }); 
```

或者（我不确定您要在这里做什么）：

```
 $(document).scroll(function(){
     // grab the scroll amount and the window height
      var scrollAmount = $(window).scrollTop();
      var documentHeight = $(document).height();

      // calculate the percentage the user has scrolled down the page
      var scrollPercent = (scrollAmount / documentHeight) * 100;

      var fnDoScroll = function() {
        $(".arrow").css({
          height: scrollPercent + 'px'
        });
      };

      // do something when a user gets 50% of the way down my page
      if (scrollPercent >= 50)
        fnDoScroll();
  }); 
```

# excel - 在excel中提取特定数据

> ID：13899526
> 
> 赞同：1
> 
> 时间：2012-12-16T07:50:26.927
> 
> 标签：excel, extract

我的数据如下：

```
-  -  -  - -输入输出 - -    
数据1 数据1 abcd 数据1 abcd
数据2 数据5 efgf 数据2 nopf
数据3 数据3 hijf 数据3 hijf
数据4 数据7 klmf 数据4   
data5 data2 nopf data5 efgf
数据6 .... .... 数据6   
数据7 .... .... 数据7 klmf
数据8 .... .... 数据8   

```

解释：

*   Column1 包含所有元素。
*   Col2 是 col1 的子集。
*   Col3 是 Col2 的相应值。（键值对）
*   Col4 和 col5 是我想要的输出。

`Col3`在这里，如果 Col1 中存在 Col2 键，我需要复制这些值。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:37:33.447

如果我正确理解您的问题，您可以使用 vlookup 函数在第 3 列中查找“键”并在第 5 列中返回您想要的值。

假设第一列从 A2 开始，第二列在 B2 中，第三列在 C2 中，第四列在 D2 中（刚刚从第 1 列粘贴）和第五列在 E2 中，您将在其中放置公式以查找值. 数据在第 2 到 9 行。

我假设您在 B 和 C 列中显示的“....”字符实际上在您的数据中。

单元格 E2 中的公式应为：

```
=IF(IFERROR(VLOOKUP(D2,$B$2:$C$9,2,0),"")="….","",IFERROR(VLOOKUP(D2,$B$2:$C$9,2,0),"")) 
```

您将通过单元格 E9 向下复制公式。

# php - 将生日计算为年月日时分秒

> ID：13899528
> 
> 赞同：-4
> 
> 时间：2012-12-16T07:51:03.723
> 
> 标签：php, timestamp

> **可能重复：**
> [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

有人可以告诉我将生日计算为年月日小时分钟和秒的代码吗

例子 ：`Aug 8, 1993`

预期的结果是这样的：

你`Dec 16, 2012 11:04` 的年龄是`19 years 4 months 12 days 11 hours 4 minutes and 23 seconds`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:02:10.183

尝试这个

```
 <?php 
       $birthday = new DateTime("2007-03-24");
       $today = new DateTime();
       $interval = $birthday->diff($today);
       echo "difference " . $interval->y . " years, " . $interval->m." months, ".$interval->d." days ";     
    ?> 
```

[如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

# python - GAE SDK 1.7.4 和 InvalidCertificateException

> ID：13899530
> 
> 赞同：22
> 
> 时间：2012-12-16T07:51:24.777
> 
> 标签：python, django, google-app-engine

最近，我将我的 GAE SDK 升级到了版本。1.7.4，当我尝试运行开发服务器时，它开始抛出“InvalidCertificateException”。我搜索了这个错误，有些人说它会随着时间的推移而消失，但我的没有。我应该研究什么来解决这个问题？我正在为我的应用程序使用 python 框架 Django，如果这很重要的话。

```
$ dev_appserver.py ./
INFO     2012-12-16 07:44:31,412 appcfg.py:586] Checking for updates to the SDK.
Traceback (most recent call last):
  File "/usr/local/bin/dev_appserver.py", line 171, in <module>
    run_file(__file__, globals())
  File "/usr/local/bin/dev_appserver.py", line 167, in run_file
    execfile(script_path, globals_)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_main.py", line 747, in <module>
    sys.exit(main(sys.argv))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_main.py", line 680, in main
    update_check.CheckForUpdates()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 597, in CheckForUpdates
    runtime=self.config.runtime)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appengine_rpc.py", line 391, in Send
    f = self.opener.open(req)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 394, in open
    response = self._open(req, data)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 412, in _open
    '_open', req)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 1207, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/fancy_urllib/fancy_urllib/__init__.py", line 379, in do_open
    url_error.reason.args[1])
fancy_urllib.InvalidCertificateException: Host appengine.google.com returned an invalid certificate (_ssl.c:503: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed): 
To learn more, see http://code.google.com/appengine/kb/general.html#rpcssl 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-28T15:50:11.617

我发现的快速解决方法：`google_appengine/lib/cacerts/cacerts.txt`从已安装的 SDK 中删除该文件。

从 GoogleAppEngineLauncher 开始：

> GoogleAppEngineLauncher/Contents/Resources/GoogleAppEngineDefault.bundle/Content‌​s/Resources/google_appengine/lib/cacerts/cacerts.txt

编辑 ＃

> 从 google app engine SDK 1.8.1 开始，此文件已重命名为 urlfetch_cacerts.txt。仍然在同一目录中并删除它仍然可以解决问题。

– @哈里森

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-16T09:13:24.973

紧凑的答案，截至 2014 年 1 月（刚刚在 SDK 更新中幸存下来）：

```
rm file /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/cacerts/urlfetch_cacerts.txt 
```

或者 ...

```
cd /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/cacerts/
rm urlfetch_cacerts.txt 
```

一切都再次顺利进行。

你最好也删除“cacerts.txt”（在同一目录中）。否则 sdk 命令行工具也会抛出异常:(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-16T10:28:54.737

仅供参考：如果您在运行 Mavericks 的 Mac 上，此错误可能是由于使用了 python 2.7.6 或更低版本，它有一个导致此错误的已知错误。

例如，您会通过简单地尝试获取任何 SSL 页面得到类似的错误：

```
pip install requests
python

>>> import requests
>>> requests.get("https://github.com") 
```

以上将产生相同的 SSL 证书错误。在这种情况下，gcloud（谷歌云 SDK）命令都不起作用。

升级到 python 2.7.8（或更新的 2.7.X）来解决问题（为我工作）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T06:26:21.343

将 Python 从 2.7.3 升级到 2.7.9 为我修复了它。我在 Mac OS X 10.6.8 (Snow Leopard) 上。

# c# - 如何在基本父级之前获取所有 categoryIds？

> ID：13899532
> 
> 赞同：0
> 
> 时间：2012-12-16T07:52:03.567
> 
> 标签：c#, sql, sql-server-2008, c#-4.0

表名称是类别。

```
CategoryId      ParentId        Name
1               NULL            StackOverFlow-1
2               1               StackOverFlow-2
3               1               StackOverFlow-3
4               2               StackOverFlow-4  
5               4               StackOverFlow-5 
```

StackOverFlow-5 的父级是 StackOverFlow-4。

StackOverFlow-4 的父级是 StackOverFlow-2。

StackOverFlow-2 的父级是 StackOverFlow-1。

我想做一个如下的函数：

```
GetAllCategoryIdsUntilBaseParentByCategoryId(int Id)
{
    //..
} 
```

我认为它应该是一个递归函数。不是吗？

伪代码：

```
int x -> Select ParentId From Category Where Id = 5
int y -> Select ParentId From Category Where Id = x
int z -> Select ParentId From Category Where Id = y 
```

这个模型应该继续`where ParentId is null`..

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:30:23.043

使用 SQL Server 2008，您可以在一个优雅的单个 CTE 查询中执行此操作：

将您的架构简化为：

```
create table t (id int, parent_id int, c char(1));

insert into t values 
( 1, Null, 'A'),
  ( 2, 1, 'B'),
  ( 3, 1, 'C'),
     (4, 3, 'D' ),
  ( 5, 1, 'E' ); 
```

查询将是：

```
;with cte as (
  select *, id as node 
  from t 
  union all
  select t.*, cte.node
  from t inner join cte 
     on t.id = cte.parent_id
)
select * 
from cte
where node = 4; 
```

[结果](http://sqlfiddle.com/#!3/21725/7/0)：

```
| ID | PARENT_ID | C | NODE |
-----------------------------
|  1 |    (null) | A |    4 |
|  3 |         1 | C |    4 |
|  4 |         3 | D |    4 | 
```

如您所见，递归在查询中。这避免了生成多个查询和对数据库的调用。

# java - 如何在java中初始化有序的（int，string）对

> ID：13899534
> 
> 赞同：0
> 
> 时间：2012-12-16T07:53:02.607
> 
> 标签：java, arrays

只想问如何在java中初始化具有（int，string）值的有序对。

这些对的示例是：

（1，迈克尔）（2，约瑟夫）（3，阿尔伯特）（4，玛丽亚）

** 添加了问题，如果名称或字符串来自数组怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T07:58:44.570

您可以有一个具有整数和字符串字段的自定义类：

```
class Pair
{
  int num;
  String name;

  Pair(int num, String name)
  {
     this.num = num;
     this.name = name;
  }
} 
```

`Pair`然后，您可以拥有这些对象的数组：

```
Pair[] pairs = new Pair[10]; 
```

初始化可能是这样的：

```
String[] strings; // your string array.

for(int i=0; i<10; i++)
   Pair[i] = new Pair(i, strings[i]); 
```

# java - 随机生成器每次都给我相同的数字

> ID：13899537
> 
> 赞同：4
> 
> 时间：2012-12-16T07:53:40.687
> 
> 标签：java, random

```
import java.util.Random;

public class Fighter {
int str;
int dex;
int hth;
Random gen = new Random(1535636);   

public Fighter() {
     str = gen.nextInt(9);
     dex = gen.nextInt(9);
     hth = gen.nextInt(14);
}

public int getHth(){

   return hth;

   }

public int getStr(){
   return str;
   }

public int getDex(){
   return dex;
       }
 }

import java.util.Random;
public class Arena {

public static void main(String[] args) {
    Random gen = new Random();
      Fighter Guy1 = new Fighter();
      int x =1;
              while (x < 200000000){
                x++;  
              }
      Fighter Guy2 = new Fighter();

    int hth1 = Guy1.getHth();
    int hth2 = Guy2.getHth();

    System.out.println("Fight Start");
    System.out.println("---------------");
    //System.out.println(gen.nextInt(10));
    //System.out.println(gen.nextInt(17));
    System.out.println(Guy1.getStr());

    //Fighting

}

} 
```

每当我运行它时，无论如何我都会得到相同的结果。我希望它每次都能制作 2 个随机战士。现在有几行只是为了确认它不会产生随机数。

有谁知道如何在构造函数中正确使用随机数？还是我这样做完全错了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-16T07:57:15.477

您正在为随机数生成器提供一个恒定的种子值：

```
Random gen = new Random(1535636); 
```

不要那样做。它将始终提供相同的值。只需调用默认构造函数：

```
Random gen = new Random(); 
```

那

> 创建一个新的随机数生成器。它的种子根据当前时间初始化为一个值：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#Random()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#Random())

* * *

**为什么？**

与大多数“标准库”随机数生成器一样，`Random`是[“伪随机数生成器”](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)。这意味着它*实际上*并没有生成随机数！相反，它以一种非常明确的方式计算它们——它们*看起来*就像随机数，而且它们往往有一个不错的分布。

PRNG 使用设置其内部状态的*种子值进行初始化。*如果您每次都提供相同的种子值，那么每次运行 PRNG 都会处于相同的状态，因此提供相同的数字序列！

使它们一直看起来随机的事情是，通常¹默认情况下它们是“播种”的，具有基于时间的值。在大多数库中，这是一个非常精确的时间导出值。所以大多数时候，如果你看到有人播种他们的 PRNG，那可能是不正确的，或者至少是非常不必要的。

^(1 - 注意：来自 libc的情况*并非如此：* *“如果未提供种子值，则 rand() 函数将自动以值 1 为种子。”*`rand()`)

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T07:57:36.750

现在，您正在使用相同的种子初始化随机数生成器。这将使它每次都产生相同的数字序列。您想使用[无参数构造函数](http://docs.oracle.com/javase/7/docs/api/)：

```
Random gen = new Random(); 
```

根据[文档](http://docs.oracle.com/javase/7/docs/api/)

> 此构造函数将随机数生成器的种子设置为一个很可能与此构造函数的任何其他调用不同的值。*

# android - 在 Android 应用中从 Google 电子表格中检索数据

> ID：13899539
> 
> 赞同：2
> 
> 时间：2012-12-16T07:53:55.300
> 
> 标签：android, google-api, google-drive-api

我正在开发一个必须从 Google 电子表格中检索数据的 Android 应用程序。我在网上找到了建议我使用 Google drive API 的帖子，但我没有找到任何关于如何做到这一点的示例。有人可以帮我举一个使用 Google Drive API 从 Google 电子表格中检索数据的示例吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:46:10.323

Drive API 只允许您下载电子表格文件。如果要从电子表格中检索单元格数据，则必须使用旧的电子表格 API。[https://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T05:50:26.230

这就是我想出的如何从谷歌电子表格中检索数据的方法，还要感谢 pinoyyid 的帖子。[首先从http://code.google.com/p/gdata-java-client/downloads/list](http://code.google.com/p/gdata-java-client/downloads/list)下载 gdata 库。

为了将库与您的项目集成，假设您在 Windows 中使用 Eclipse，请执行以下步骤：

**1.**解压文件夹，复制路径下包含的以下jar文件：

```
gdata-src.java-1.47.1\gdata\java\lib and gdata-src.java-1.47.1\gdata\java\deps into the "libs" folder in your project directory:
gdata-client-1.0
gdata-client-meta-1.0
gdata-core-1.0
gdata-spreadsheet-3.0
gdata-spreadsheet-meta-3.0
guava-13.0.1 
```

**2.**复制后，通过转到 File --> Refresh 在 Eclipse 中刷新项目。这些文件现在应该出现在`libs`项目树中。

**3.**展开`libs`项目树中的目录并右键单击要包含的 jar 并选择“添加到构建路径”。

**4.**现在按照[https://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)上的说明进行操作。

享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T06:03:45.377

虽然 gdata 库可以工作，但我不确定是否建议将它们用于新项目。来自[http://code.google.com/p/gdata-java-client/](http://code.google.com/p/gdata-java-client/) ...

> 警告：我们已停止积极开发此客户端库，但关键错误修复和对某些 Google API 的支持除外。但是，此客户端库未被弃用，并且被视为“稳定”选择，除非您有仅受以下新客户端库支持的特定要求。
> 
> 安卓支持
> 
> 由于 GData Java 客户端库不支持 Android，Android 开发人员应该使用新的库 Google API Client Library for Java。这个新库提供了其他重要功能，例如 OAuth 2.0 和 Maven。遗憾的是，没有为 Google 数据 API 提供特定于服务的库，您需要编写自己的 XML 数据模型类。

# javascript - 需要显示两个隐藏的 css div 的 Javascript

> ID：13899549
> 
> 赞同：0
> 
> 时间：2012-12-16T07:56:29.727
> 
> 标签：javascript, html, show, using

#step2 和 #step2h 的 css 是可见性的：hidden 这是我当前的脚本，但我不仅想显示#step，而且还想用 JavaScript 一键显示#step2h。

```
<body>
<center>
<div id="header"></div>
<div id="wrapper">
<div id="content">
<div id="contenth">
<h1 id=>content header</h1>
</div>
content
<a href="#" onclick="changeDiv(1)">Menu 1</a> ///change to other div
<a href="#" onclick="changeDiv(2)">Menu 2</a>
<script>
function changeDiv(i){
if(i==1)
document.getElementById("content").innerHTML = document.getElementById("step2").innerHTML;
else
document.getElementById("step2").innerHTML = document.getElementById("content").innerHTML;
}
</script>
</div>
</div>
<div id="step2"> // Showed on click
<div id="step2h">//want to show this as well
<h1>STEP 2 Header</h1>
</div>
<h2>Step 2 Content</h2>

</div>
</center>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:56:32.037

通常你会做这样的事情：

```
document.getElementById("step2h").style.visibility='visible'; 
```

您可能面临的问题是替换 step2 的 HTML 正在消除 step2h，因为它位于 step2 内部，因此是 step2 的 innerHTML 的一部分。

我将为 step2 内容创建一个 step2c div，并将其放在 step2h 之下。然后将其内容替换为内容的内容，您不会在此过程中丢失step2h。像这样的东西：

```
<div id="step2">
    <div id="step2h">
        <h1>STEP 2 Header</h1>
    </div>
    <div id="step2c">
        <h2>Step 2 Content</h2>
    </div>
</div> 
```

然后这样做：

```
document.getElementById("step2c").innerHTML = document.getElementById("content").innerHTML; 
```

# content-negotiation - 接受语言列表

> ID：13899550
> 
> 赞同：15
> 
> 时间：2012-12-16T07:56:33.443
> 
> 标签：content-negotiation, http-accept-language

我想对浏览器发送到网站的 Accept_Language 做出反应。

有人知道我在哪里可以获得浏览器可能发送到网站的所有可用 Accept_Languages 的可靠列表吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-16T08:10:01.263

> [**IANA 语言子标签注册页面**](http://www.iana.org/assignments/language-subtag-registry)
> 
> 这是官方位置，您可以在其中找到所有可用于语言标签的子标签。

W3 说是*权威榜单*。另外，在下面的链接中，还有更多信息可供使用，包括描述和其他方式来理解人们给自己贴标签的方式。

[**http://www.w3.org/International/techniques/server-setup#multiviews**](http://www.w3.org/International/techniques/server-setup#multiviews)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-30T14:57:56.250

IANA 语言子标签注册页面肯定是正确的答案，但该列表有点难以解析。

我发现这个 github 存储库有一些脚本可以解析它，以及一组可以在项目中使用的即用型 JSON 对象：

[https://github.com/mattcg/language-subtag-registry](https://github.com/mattcg/language-subtag-registry)

每次更改 IANA 列表时，作者似乎都在更新 repo。

# javascript - 如何判断 Ember 资源是否仍在加载？

> ID：13899558
> 
> 赞同：0
> 
> 时间：2012-12-16T07:57:52.040
> 
> 标签：javascript, ember.js

我有一个 Ember 方法，当新数据到达时触发：

```
insertDays: function() {
  ...
}.observes('startDate', 'doctor.appointments.length') 
```

我想在执行任何繁重的代码之前检查以确保数据确实存在。为此，我目前使用：

```
var length = doctor.get('appointments.length')
if (length !== 0) {
    ...
} 
```

但是，有时有时没有合法地从服务器传递数据，在这种情况下，我的 !== 0 测试失败，并且代码不会在我想要的时候执行。

我尝试过使用该方法，但无论如何`.isLoaded`它总是返回。`true`

如何有效地判断 Ember 资源是否仍在加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:17:22.113

我通过`.isLoaded`用作`.observes`财产来得到这个工作。

代码现在的结构如下，并按预期工作：

```
insertDays: function() {
  ...
}.observes('startDate', 'doctor.appointments.isLoaded') 
```

在程序的其他地方，我可以使用以下代码来确定数据是否已加载：

```
var isLoaded = appointments.get('isLoaded'); 
```

感谢@Unspecified 引导我朝着正确的方向前进。干杯!

# java - 需要在 GC 之前关闭存储为 SoftReference 的 PreparedStatements

> ID：13899559
> 
> 赞同：1
> 
> 时间：2012-12-16T07:57:54.023
> 
> 标签：java, database, jdbc, database-connection

我正在使用缓存 PreparedStatements 的内部数据库连接池。当连接返回到池中时，缓存的 Statements 不会关闭。这些在 mySQL 驱动程序中创建 OutOfMemoryExceptions。所以我打算将 PreparedStatement 缓存存储在 HashMap <String, SoftReference<PreparedStatement>>

但这不允许我在语句被 GC 之前关闭它们。

我猜使用 ReferenceQueue 没有用，而且我已经读过不建议使用 finalize 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:08:34.760

可能覆盖 finalize() 可以帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:45:19.927

您应该检查[Guava 缓存](http://code.google.com/p/guava-libraries/wiki/CachesExplained)。您可以使用`softValues()`方法 a`RemovalListener`来关闭`PreparedStatement`on eviction。

如果你真的想用 open 填充你的内存`PreparedStatement`，或者如果你有一个固定的缓存大小会更好，并驱逐最近最少使用的条目。

# silverlight - 带有渐变的 Silverlight 网格背景图像

> ID：13899560
> 
> 赞同：0
> 
> 时间：2012-12-16T07:58:06.220
> 
> 标签：silverlight, windows-phone-7, windows-phone-8

我的项目要求是，网格背景中的图像，并希望在顶部和底部应用黑色渐变。请帮助我如何实现这一目标。

我的 XAML 如下：

```
<Grid Grid.Row="0" HorizontalAlignment="Stretch" Height="190" VerticalAlignment="Stretch" ShowGridLines="False" Margin="0,2,0,0">
     <Grid.Background>
             <ImageBrush Stretch="UniformToFill" Opacity="0.6">
                   <ImageBrush.ImageSource>
                         <BitmapImage CreateOptions="BackgroundCreation" UriSource="{Binding Banner}"></BitmapImage>
                    </ImageBrush.ImageSource>
              </ImageBrush>
     </Grid.Background>
     .....
</Grid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:55:12.743

```
<Grid.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="Black" Offset="0"/>
            <GradientStop Color="Gray" Offset="1"/>
        </LinearGradientBrush>
    </Grid.Background> 
```

将颜色值更改为您想要的值。这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:02:09.060

在这个里面创建另一个网格。在这个新网格中，创建三行。第一行和最后一行应该有一个带渐变的矩形。像这样的东西：

```
<Grid Grid.Row="0" HorizontalAlignment="Stretch" Height="190" VerticalAlignment="Stretch" ShowGridLines="False" Margin="0,2,0,0">
     <Grid.Background>
         <ImageBrush Stretch="UniformToFill" Opacity="0.6">
               <ImageBrush.ImageSource>
                     <BitmapImage CreateOptions="BackgroundCreation" UriSource="{Binding Banner}"></BitmapImage>
                </ImageBrush.ImageSource>
          </ImageBrush>
      </Grid.Background>
      <Grid Grid.ColumnSpan="..." Grid.RowSpan="...">
           <Grid.RowDefinitions>
                <RowDefinition Height="25"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="25"/>
           </Grid.RowDefinitions>
           <Rectangle Grid.Row="0">
                <Rectangle.Fill>
                     ...
                </Rectangle.Fill>
           </Rectangle>
           <Rectangle Grid.Row="2">
                <Rectangle.Fill>
                     ...
                </Rectangle.Fill>
           </Rectangle>
      </Grid>
</Grid 
```

# iphone - 警告：尝试呈现 在 进行演示时

> ID：13899563
> 
> 赞同：2
> 
> 时间：2012-12-16T07:58:25.150
> 
> 标签：iphone, objective-c, uiviewcontroller, uistoryboardsegue, overlay-view

我正在使用 xcode 4.5.2 并为相机按钮创建了自己的 OverlayViewController。

现在，当我的委托控制器 - TakePhotoViewController 从 OverlayViewController 检索 didFinishWithCamera 操作时，我想将用户转移到 AdjustPhotoViewController。

但是，我收到以下警告并且它没有被转移：

> 警告：在演示过程中尝试演示！

```
- (void)didFinishWithCamera
{
    [[self.overlayViewController.imagePickerController presentingViewController] dismissViewControllerAnimated:YES completion:nil];
    [self performSegueWithIdentifier:@"fromTakeToAdjust" sender:self];    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T22:29:24.453

实际上，根据我的经验，这与从同一个按钮调用 segue 和 IBAction（调用 segue）有关 - 检查 Interface Builder 中的连接检查器以查看您的按钮是否连接到两者。

在您的故事板中，它可能如下所示：

![在此处输入图像描述](../Images/82dab3cb760199c96772e5d8e3974b4d.png)

在您的代码中，它可能如下所示：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if([segue.identifier isEqualToString:@"pushToNewVC"]) {
        UIViewController *controller = (UIViewController *)segue.destinationViewController;
    }
}

=

- (IBAction)launchNew VC:(id)sender {
    [self performSegueWithIdentifier:@"pushToNewVC" sender:sender];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:19:50.690

您可以尝试这样做，以便为完成旧的过渡和即将到来的新过渡留出时间

通常`0.3`有效，但根据您的需要进行调整

```
- (void)didFinishWithCamera
{
    [[self.overlayViewController.imagePickerController presentingViewController] dismissViewControllerAnimated:YES completion:nil];
    [self performSelector:@selector(showModel) withObject:nil afterDelay:0.3];
}

- (void)showModel {
    [self performSegueWithIdentifier:@"fromTakeToAdjust" sender:self];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T08:21:02.417

请为叠加视图控制器使用以下代码。

请用你的代码验证。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {  
    [self.window addSubview:self.view];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

在代码使用后的 viewdidload 事件中

```
- (void) viewDidLoad {
    self.picker = [[UIImagePickerController alloc] init];
    self.picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    self.picker.cameraDevice = UIImagePickerControllerCameraDeviceFront;

    self.picker.showsCameraControls = NO;
    self.picker.wantsFullScreenLayout = YES;

    // Insert the overlay
    self.overlay = [[Customview alloc] initWithNibName:@"Customview" bundle:nil];
    self.overlay.pickerRef = self.picker;
    self.picker.cameraOverlayView = self.overlay.view;

    [self presentModalViewController:self.picker animated:NO];
} 
```

在查看 .h 方法下面的代码使用

```
 @interface CameraController : UIViewController {
        UIImagePickerController* __picker;
        Customview* __overlay;
    }

@property (nonatomic, retain) UIImagePickerController* picker;
@property (nonatomic, retain) Customview* overlay; 
```

希望以上代码对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T09:51:34.367

Odelya，您应该使用 UI 执行所有在完成块中的某些动画（在此 cae 控制器解除中）之后执行的操作！它实际上是为这些目的而创建的。像这样编辑您的代码：

```
- (void)didFinishWithCamera
{
    if(![[self.overlayViewController.imagePickerController presentingViewController] isBeingDismissed]) {
        [[self.overlayViewController.imagePickerController presentingViewController] dismissViewControllerAnimated:YES completion:^ {
            [self performSegueWithIdentifier:@"fromTakeToAdjust" sender:self];
        }];
    }   
} 
```

编辑：我添加了 if 语句，现在试试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-16T13:17:05.923

问题是在 TakePhotoViewController 中，我有：

```
- (void)viewDidAppear:(BOOL)animated{
   [self openImagePicker];
} 
```

这导致打开图像选择器，同时尝试关闭它。

我添加了一个标志来检查它。

# javascript - 延迟后更改 JavaScript 对象变量

> ID：13899564
> 
> 赞同：2
> 
> 时间：2012-12-16T07:58:27.143
> 
> 标签：javascript

```
this.anim= true; 
```

如何将此对象的变量更改为几秒钟`false`后？`x`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T08:00:07.483

```
this.anim = true;
var that = this; // you store the reference to a `this` in `that` variable,
                 // so you could use it in a callback function. You have
                 // to do that because it has its own `this` defined
setTimeout(function() {
    that.anim = false;
}, x * 1000); 
```

或者

```
this.anim = true;

(function(that){ // you create an IIFE (see http://tinyurl.com/js-iife)
    setTimeout(function() {
        that.anim = false;
    }, x * 1000);
}(this)); // and invoke it with `this` as a parameter, which will be available
          // as `that` in the function body 
```

# java - 当没有未保存的更改时避免关闭编辑器 Eclipse RCP

> ID：13899568
> 
> 赞同：0
> 
> 时间：2012-12-16T07:59:07.550
> 
> 标签：java, eclipse, eclipse-rcp, rcp

即使没有未保存的更改，是否仍然可以阻止编辑器关闭？

每当有一些未保存的更改时，使用`ISaveablePart`界面可以在编辑器关闭之前捕获事件 - 但我正在寻找一种在编辑器关闭**之前**捕获事件的方法，即使没有未保存的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:05:03.627

一种可能的方法是在您的`ISaveablePart`实现中维护两个“脏”标志 - 一个以便 Eclipse 保存框架会认为您的编辑器是脏的并调用您的钩子来阻止编辑器关闭。

为避免 Eclipse 错误地显示有关您的编辑器未保存更改的消息，您可能希望实际实现`ISaveablePart2`（[此处的文档](http://help.eclipse.org/help32/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/ISaveablePart2.html)）并实现`promptToSaveOnClose()`- 这可以检查编辑器是否*真的*很脏，并且只提示保存（或其他任何您想要的）在这种情况下。

您可能想要重新检查您希望保持编辑器打开的根本原因 - 框架通常不会像这样工作（因此问题可能会蔓延），对于真正的用户来说，这似乎是一种令人困惑的体验真的**想**关闭编辑器（并确定您的应用程序有问题）。

# html - 使用 HTML5 拖放的 Backbone.js 视图更新

> ID：13899572
> 
> 赞同：0
> 
> 时间：2012-12-16T07:59:38.280
> 
> 标签：html, backbone.js

让我的视图更新放置事件时遇到了一些麻烦。我很确定问题出在函数 handleDrop() 中。视图的重新渲染在浏览器中的普通 model.set({}) 测试中起作用。所以，我知道这不是问题所在......

**骨干路由器**

```
App.Routers.Dashboard = Backbone.Router.extend({

routes: {
    "": "index"     
},

initialize: function(options) {

    },

index: function() {

var preflist = new App.Models.PrefList({});

preflist.fetch({
    success: function() {
      var paneloneview = new App.Views.PanelOne({ model: preflist });
      $('#panelone').html(paneloneview.render().$el);
    }  
});

var sourceID;
var payloads = {
poolpricedraggable: "poolprice",
nonedraggable: "smp"
};

var element = function(id) { return document.getElementById(id); }

function handleDragOver(event) {
if(event.preventDefault) event.preventDefault();
return false;
}
function handleDrop(event) {
    dropzone = this.id;
    if(event.preventDefault) event.preventDefault();
    console.log("recevied the data: " + payloads[sourceID] + " in #" + dropzone);
    var attribute = preflist.get('panel_one');
    preflist.set({panel_one: attribute});
    preflist.save();
}  

element('panelone').addEventListener('dragover', handleDragOver, false);            
element('panelone').addEventListener('drop', handleDrop, false); 
```

**PanelOne 视图**

```
App.Views.PanelOne = Backbone.View.extend({

initialize: function() {                
    _.bindAll(this, 'render');
    this.model.bind('change', this.render);
},

render: function(){
    var panelonesetting = this.model.get('panel_one');
    this.$el.html(JST['dashboard/' + panelonesetting]({}));
return this;
}

}); 
```

最诚挚的问候，交流

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:06:10.643

我上面问题中的代码是在深夜写的。现在，我醒了，看到汤姆和穆指出我犯的尴尬错误（这感觉类似于醉酒拨号事件）。尽管如此，这里有一段更正的代码，所有这些对于任何拥有主干应用程序的人来说都应该很方便，他们想要包含一些拖放功能来设置模型属性：

```
 function handleDrop(event) {
       //  This dropzone var isn't used for anything here but may be useful for others. So, I've left it in...
       dropzone = this.id;
       // This preventDefault is necessary to prevent actions some older browsers like to do on drop events
       if(event.preventDefault) event.preventDefault();
       //  This model attribute should be set to the payload listed above
   preflist.set({ panel_one: payloads[sourceID] });
   preflist.save();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:29:00.383

我在这里可以看到的一个问题是，您正在尝试使用与自身相同的值来设置模型的值 - 当您用自身替换值并且模型中的更改没有被检测到时，它基本上会被忽略 - 因此渲染方法没有被调用。

您可能希望使用模型`trigger`上的方法自己手动调用模型上的渲染或触发更改事件。（如果在您提供的代码之外还有其他事情发生 - 因为我在这里可以看到什么都不会改变？）

您是否忘记使用来自拖动对象的信息来更改模型的设置？

# html - 为什么 Chrome 和 FireFox 中选择的位置不同？

> ID：13899573
> 
> 赞同：0
> 
> 时间：2012-12-16T07:59:39.953
> 
> 标签：html, css, select

```
 #allday{
            width: 175px;
            border: 1px solid #e7e7e7;
            font-size: 12px;
            color: #666666;
            height: 22px;
        }

        <select id ="allday" style="">
            <option value = "false">FALSE</option>
            <option value = "true">TRUE</option>
        </select> 
```

有谁知道为什么选择的位置在 Google Chrome 中看起来比在 FireFox 中高一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:30:13.043

浏览器为 HTML 元素预定义了 CSS 值。如果您没有指定特定的 CSS 规则，浏览器将自行设置它“认为”它应该如何看待（如果需要）。例如，如果您创建一个`<div>`元素但未指定`display:`规则，Google Chrome 会自动将其设置为`display: block;`.

在任何情况下，使用检查元素并尝试找出浏览器在计算样式中的不同之处。请留意*用户代理样式表*，因为这些是从浏览器插入的值。

正如评论还所说，CSS RESET 也会有所帮助。

# android - 适用于 iOS 和 Android 的移动应用程序

> ID：13899575
> 
> 赞同：1
> 
> 时间：2012-12-16T07:59:48.303
> 
> 标签：android, ios, web-applications

我与其他 2 名开发人员在一家小型初创公司工作。我们即将推出一个适用于 iPhone 和 Android 平台的移动应用程序项目。特征 ：

1.  将有一个用于处理数据模型的后端 Web 服务器。
2.  移动应用程序应连接到 Web 服务器并为用户提供一些简单任务的前端（使用用户名和密码注册、登录、搜索符合某些条件的记录等）。
3.  我们将在 Web 服务器中存储位置信息，并希望将此信息公开给移动应用程序。移动应用程序需要能够与移动设备中的任何现有导航系统集成并为其提供位置/位置。
4.  应用程序中将有大约 10 个不同的接口。

我们都没有太多开发移动应用程序的经验（我们只用 Android 做过玩具项目）并且零移动 UI 开发经验。我想知道几件事：

1.  我们是否应该为这两个移动平台开发两个不同的应用程序？如果我们这样做，这两个应用程序是否可以连接到同一个后端，还是我们也必须有两个后端？
2.  是否有任何移动应用程序框架可以让我们编写一个应用程序并将其定位到这两个平台？
3.  这两个平台中哪个更容易开发应用程序？（如果我们必须开发两个单独的应用程序。）
4.  还是我们应该只制作一个可以从移动设备访问的 Web 应用程序？如果是这样，我们可以与移动设备中的任何其他应用程序（导航应用程序等）集成吗？

如果您需要更多信息/说明，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T08:15:14.080

是的，您需要两个平台的 2 个应用程序，但单个后端足以满足任何客户端平台（包括您以后可能考虑支持的其他平台）。

如果其中任何一个允许您开发所需的所有功能，您可能应该查看[PhoneGap](http://phonegap.com/)框架或[Appcelerator 。](http://www.appcelerator.com/)如果它满足您的需求，您将能够开发一个应用程序并将其构建到两个平台。

这两个平台在移动开发方面是相似的——我认为只要开发人员熟悉相应的平台，没有一个比另一个更容易。对我来说，Android 开发更容易，因为它使用众所周知的 Java 语言，可能支持不同的 IDE，包括 Eclipse 等公共 IDE，而且我有 Android 的背景；-)

如果 Web 应用程序可以提供所有必需的功能，我建议从开发 Web 应用程序开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T08:15:01.807

是的..这很简单。web 中可用的最佳框架很少。但我建议你选择 PHONE GAP 和 Up Coming Web Framework VMOSS。

PHONE GAP 易于部署和开发，因为您需要做的就是用 HTML 5 和 JavaScript 编写代码。VMOSS 是另一个很有前途的市场框架。您可以查看 VMOSS 的功能，下面列出了其他类似平台。一次开发并部署任何平台。

[http://phonegap.com/](http://phonegap.com/)

[http://vmoss.valentiatech.com](http://vmoss.valentiatech.com)

[http://kony.com/](http://kony.com/)

[http://www.appcelerator.com](http://www.appcelerator.com)

也搜索 RHO 移动平台。从上面选择任何一个并开始工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T18:42:25.813

嗨，根据我的研究，我发现[了这个](http://ionicframework.com/)

**Ionic** (AngularJS) 是目前使用最多的**混合移动框架**。它是最好的吗？离得很远。它不是很快（尽管它比目前最可用的竞争更快）。页面过渡/动画非常糟糕，您实际上需要使用某些**Cordova 插件**才能使它们看起来不错。这还不是全部，但我不会再打扰你了。 [参考这个](https://stackoverflow.com/questions/34523087/sencha-vs-ionic-vs-jquery-mobile-vs-appcelerator-titanium)

[参考评级 ionic vs xamarin](https://www.g2crowd.com/compare/ionic-vs-xamarin)

# python - Python：使用 MAMP 安装 Flask

> ID：13899576
> 
> 赞同：0
> 
> 时间：2012-12-16T07:59:48.033
> 
> 标签：python, flask

我将第一次尝试 Flask。我找到[了这个安装链接](http://flask.pocoo.org/docs/installation/)，它要求我安装一些 virtualenv。我在我的机器上使用 MAMP。我想知道我是否可以将 Flask 与 Apache 集成。我想稍后在仅支持 Apache 的共享主机上使用基于 Flask 的应用程序。所以我想知道我是否可以将它与 Apache 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:21:11.680

是的，您可以将 Flask 与 Apache 一起使用（使用 mod_wsgi），请查看[部署文档](http://flask.pocoo.org/docs/deploying/mod_wsgi/)。无需在开发机器上使用 Apache，Flask 已集成 web 服务器，开发时更方便。除非您想在与您要部署的环境类似的环境中测试您的 web 应用程序，但使用虚拟机是更好的选择（例如[Vagrant](http://vagrantup.com/)）。

既然您说这将是您第一次使用 Flask，我建议您暂时忘记部署问题，只需按照教程进行操作即可。当您准备好第一个应用程序时，您可以了解有关部署的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:26:53.517

If you are using the Apache webserver, consider using [mod_wsgi.](http://flask.pocoo.org/docs/deploying/mod_wsgi/)

So it seems likely that they integrate fairly well.

# vb.net - 使用 VB.NET 通过 FTP 下载文件部分

> ID：13899579
> 
> 赞同：2
> 
> 时间：2012-12-16T08:00:18.947
> 
> 标签：vb.net, ftp, download

我需要我的程序通过指定 FTP 用户名和密码通过 FTP 下载大文件。
它还必须具有“暂停”功能，这就是为什么我需要我的程序来获取文件部分。我使用 VB.NET 和 .NET 3.5 框架。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-18T02:57:32.277

从 NuGet 包下载 WinSCP

```
Import WinSCP <br>
Public Class fmbFtp <br>

    Private Sub btnDownload_Click(sender As Object, e As EventArgs) Handles btnDownload.Click

        Try

            ' Setup session options

            Dim sessionOptions As New SessionOptions

            With sessionOptions
                .Protocol = Protocol.Sftp
                .HostName = "example.com"
                .UserName = "UserName"
                .Password = "Password"
                'telnet command to get key
                'ssh-keygen - l - f / etc / ssh / ssh_host_rsa_key
                .SshHostKeyFingerprint = "ssh-rsa 2048 xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx"

            End With

            Using session As New Session

                ' Connect

                session.Open(sessionOptions)

                ' Upload files

                Dim transferOptions As New TransferOptions
                transferOptions.TransferMode = TransferMode.Binary

                Dim transferResult As TransferOperationResult
                transferResult = session.GetFiles("/path/filename.txt", My.Computer.FileSystem.CurrentDirectory)
                ' Throw on any error
                transferResult.Check()
                ' Print results
                For Each transfer In transferResult.Transfers
                    Console.WriteLine("Upload of {0} succeeded", transfer.FileName)
                Next
            End Using
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:58:34.863

您可以像这样使用 FtpWebRequest：

```
Dim request As System.Net.FtpWebRequest =   DirectCast(System.Net.WebRequest.Create("FTP Path along with destination file name"), System.Net.FtpWebRequest)
request.Method = System.Net.WebRequestMethods.Ftp.UploadFile

request.Credentials = New System.Net.NetworkCredential("username", "password")

Dim file() As Byte = System.IO.File.ReadAllBytes("path of file to be copied")

Dim strz As System.IO.Stream = request.GetRequestStream()
strz.Write(file, 0, file.Length)
strz.Close()
strz.Dispose() 
```

这对我有用。

# python - 当我已经有结果时如何停止对数据库的搜索

> ID：13899582
> 
> 赞同：-1
> 
> 时间：2012-12-16T08:01:17.127
> 
> 标签：python, sql

我将发布我的代码并在之后进行解释：

```
db = sqlite3.connect("Gene.sqlite")
cur = db.cursor()
cur.execute("SELECT * FROM Table")
for i in cur.fetchall():
    if i[0] == name:
    print '<br>' '<c><b>TYPE'':</b>' ' '+ i[1]+ '<br>'\
    '<b>DESCRIPTION:</b></c>' ' '+ i[2]
    break
else:
    print 'This name does no exist in the Database' 
```

这是在 python 中，我正在创建一个 CGI 脚本，用户在其中输入一个名称，我的脚本进入该数据库，搜索名称并打印出该名称的行。我有一个数据库，其中包含一个名为 Table 的表，其中包含数千个名称，我只想让用户输入一个名称，并让它在表中搜索，并找到一个与输入匹配的名称，如果该名称存在，则打印必要的信息（如图所示）。但是，对于每个不匹配的名称，它会打印此名称不存在，直到找到匹配项，如果未找到匹配项，我只会收到数千条消息说“此名称不存在”。基本上，我希望它在不打印任何内容的情况下搜索表格，直到找到名称，如果找到名称，则打印出信息，如果不存在，则只打印一次“

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T08:10:59.097

您需要使用[`WHERE clause`](http://en.wikipedia.org/wiki/Where_%28SQL%29)：

```
db = sqlite3.connect("Gene.sqlite")
cur = db.cursor()
looking_for = 'hello'
cur.execute("SELECT type,description FROM Table WHERE name = '%s'", (looking_for,))
for i in cur.fetchall():
    result = '<br><c><b>TYPE:</b> {}<br><b>DESCRIPTION:</b></c> {}'
    print result.format(*i)
else:
    print '{} does not exist in the Database'.format(looking_for) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:12:12.863

As Burhan Khalid answered, you could do that inside SQL, which is preferable and faster. But just for completeness sake, if you like to move logic from SQL zone to Python zone, as you did, that should work too. I believe the problem in your code is that the `name` field is not the index-0 one. Try printing `i[0], i[1], i[2]` and check whether this is the case.

Now, referring to columns can be done also by field name, so you could change your code to:

```
if i["name"] == name: 
```

without counting on an index, and thus have a more robust logic.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-16T08:05:41.583

我认为这个问题是一个空白问题。

尝试这个

```
for i in cur.fetchall():
  if i[0] == name:
    print '<br>' '<c><b>TYPE'':</b>' ' '+ i[1]+ '<br>'\
      '<b>DESCRIPTION:</b></c>' ' '+ i[2]
    break
else:
  print 'This name does no exist in the Database' 
```

另外，您是否在虚线处缺少“+”？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-16T08:08:01.150

每个数据库都支持 SQL 'LIMIT' 关键字来限制结果集的大小。这是要走的路，而不是循环可能的大型结果集。所以你的方法被打破了。修复您的查询，而不是修补解决方法。当然除此之外：在您的查询中包含“名称”。

# python - 让用户定义的包在 Windows Python 2.7 中工作

> ID：13899584
> 
> 赞同：0
> 
> 时间：2012-12-16T08:01:29.060
> 
> 标签：python, windows, packages

我已经阅读了关于包的参考页面，但我似乎无法从我的库文件夹中导入模块。这是我的图书馆：

```
K:\web\cgi\lib>dir
 Volume in drive K is Krusty
 Volume Serial Number is E889-7AE2

 Directory of K:\web\cgi\lib

16/12/2012  07:52    <DIR>          .
16/12/2012  07:52    <DIR>          ..
16/12/2012  07:52    <DIR>          database
16/12/2012  07:21    <DIR>          kmz_builder
16/12/2012  05:45                21 site_consts.py
16/12/2012  07:42                 0 __init__.py
           2 File(s)             21 bytes
           4 Dir(s)  267,263,594,496 bytes free 
```

这是数据库文件夹：

```
 K:\web\cgi\lib>dir database
 Volume in drive K is Krusty
 Volume Serial Number is E889-7AE2

 Directory of K:\web\cgi\lib\database

16/12/2012  07:52    <DIR>          .
16/12/2012  07:52    <DIR>          ..
13/12/2012  01:52             3,643 dbops.py
12/12/2012  12:49            11,414 dbspec.py
08/12/2012  11:30             4,104 MyDB.py
               3 File(s)         19,161 bytes
               2 Dir(s)  267,263,594,496 bytes free 
```

设置环境变量：

```
K:\web\cgi\lib>echo %PYTHONPATH%
k:\web\cgi\lib 
```

我似乎可以从库的顶层（site_consts.py）导入，但不能从子文件夹导入：

```
K:\web\cgi\lib>python
ActivePython 2.7.1.4 (ActiveState Software Inc.) based on
Python 2.7.1 (r271:86832, Feb  7 2011, 11:33:02) [MSC v.1500 64 bit (AMD64)] on
Type "help", "copyright", "credits" or "license" for more information.
>>> import site_consts
>>> import database.dbspec
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named database.dbspec
>>> 
```

请问我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:16:44.887

`__init__.py`尝试在目录中创建一个名为的空白文件`database`。该`__init__.py`文件告诉 Python 该目录应该被视为一个[包](http://docs.python.org/2/tutorial/modules.html#packages)。

# haskell - Haskell 的类型系统和逻辑编程——如何将 Prolog 程序移植到类型级别

> ID：13899586
> 
> 赞同：28
> 
> 时间：2012-12-16T08:01:37.487
> 
> 标签：haskell, prolog, type-systems, logic-programming

我试图理解逻辑编程语言（在我的例子中是 Prolog）和 Haskell 的类型系统之间的关系。

我知道根据关系使用统一和变量来查找值（或类型，在 Haskell 的类型系统中）。为了更好地理解它们之间的异同，我尝试在 Haskell 的类型级别重写一些简单的 prolog 程序，但是我在某些部分遇到了麻烦。

首先，我重写了这个简单的 prolog 程序：

```
numeral(0).
numeral(succ(X)) :- numeral(X).

add(0,Y,Y).
add(succ(X),Y,succ(Z)) :- add(X,Y,Z). 
```

作为：

```
class Numeral a where
    numeral :: a
    numeral = u

data Zero
data Succ a

instance Numeral Zero
instance (Numeral a) => Numeral (Succ a)

class (Numeral a, Numeral b, Numeral c) => Add a b c | b c -> a where
    add :: b -> c -> a
    add = u

instance (Numeral a) => Add a Zero a
instance (Add x y z) => Add (Succ x) (Succ y) z 
```

它工作正常，但我无法用这个 Prolog 扩展它：

```
greater_than(succ(_),0).
greater_than(succ(X),succ(Y)) :- greater_than(X,Y). 
```

我尝试的是这样的：

```
class Boolean a
data BTrue
data BFalse
instance Boolean BTrue
instance Boolean BFalse

class (Numeral a, Numeral b, Boolean r) => Greaterthan a b r | a b -> r where
    greaterthan :: a -> b -> r
    greaterthan = u

instance Greaterthan Zero Zero BFalse
instance (Numeral a) => Greaterthan (Succ a) Zero BTrue
instance (Numeral a) => Greaterthan Zero (Succ a) BFalse
instance (Greaterthan a b BTrue)  => Greaterthan (Succ a) (Succ b) BTrue
instance (Greaterthan a b BFalse) => Greaterthan (Succ a) (Succ b) BFalse 
```

此代码的问题是最后两个实例导致fundep 冲突。我可以理解为什么，但在我看来这不应该是一个问题，因为它们的保护部分（或者不管它叫什么，我的意思是`(Greaterthan a b c) =>`部分）是不同的，所以最后两个实例声明中`a`的 s 和`b`s 实际上是不同的价值观，没有冲突。

* * *

我试图重写的另一个程序是：

```
child(anne,bridget).
child(bridget,caroline).
child(caroline,donna).
child(donna,emily).

descend(X,Y) :- child(X,Y).
descend(X,Y) :- child(X,Z),
                descend(Z,Y). 
```

（顺便说一句，示例来自[Learn Prolog Now](http://www.learnprolognow.org)书）

```
data Anne
data Bridget
data Caroline
data Donna
data Emily

class Child a b | a -> b where
    child :: a -> b
    child = u

instance Child Anne Bridget
instance Child Bridget Caroline
instance Child Caroline Donna
instance Child Donna Emily

class Descend a b | b -> a where
    descend :: b -> a
    descend = u

instance (Child a b) => Descend a b
instance (Child a c, Descend c b) => Descend a b 
```

我在最后一行收到“重复实例”错误。我认为这是一个类似的问题，即使我有不同的防护部件，我也会出错，因为身体部位（我的意思是`Descend a b`部件）是相同的。

因此，如果可能的话，我正在寻找将 Prolog 程序移植到 Haskell 类型级别的方法。任何帮助将不胜感激。

编辑：

Ed'ka 的解决方案有效，但方式完全不同。我仍在尝试了解我们何时可以在类型系统中运行 Prolog 程序，何时/为什么我们需要编写不同的算法以使其工作（如在 Ed'ka 的解决方案中），以及何时/为什么没有办法在 Haskell 的类型系统中实现一个程序。

也许我可以在阅读“Fun With Functional Dependencies”之后找到一些关于此的提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T04:01:23.860

正如@`stephen tetley`已经指出的那样，当 GHC 尝试匹配实例声明时，它只考虑实例头部（=> 之后的东西）完全忽略实例上下文（=> 之前的东西），一旦找到明确的实例，它就会尝试匹配实例上下文。您的第一个有问题的示例显然在实例头中有重复，但可以通过用一个更通用的实例替换两个冲突的实例来轻松修复它：

```
instance (Greaterthan a b r)  => Greaterthan (Succ a) (Succ b) r 
```

第二个例子虽然困难得多。我怀疑要让它在 Haskell 中工作，我们需要一个类型级函数，它可以根据是否为特定类型参数**定义**特定实例（即是否存在实例`Child Name1 Name2`- 递归地做一些`Name2`其他事情）产生两种不同的结果返回`BFalse`）。我不确定是否可以使用 GHC 类型对此进行编码（我怀疑不是）。

但是，我可以提出一个适用于稍微不同类型的输入的“解决方案”：`parent->child`我们可以使用类型级别列表显式编码所有现有关系，而不是暗示不存在关系（当没有为此类对定义实例时）。然后我们可以定义`Descend`类型级函数，尽管它必须依赖于非常可怕的[OverlappingInstances](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/type-class-extensions.html#instance-overlap)扩展：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies,
  FlexibleInstances, FlexibleContexts, TypeOperators,
  UndecidableInstances, OverlappingInstances #-}

data Anne
data Bridget
data Caroline
data Donna
data Emily
data Fred
data George

-- Type-level list
data Nil
infixr 5 :::
data x ::: xs

-- `bs` are children of `a`
class Children a bs | a -> bs

instance Children Anne (Bridget ::: Nil)
instance Children Bridget (Caroline ::: Donna ::: Nil)
instance Children Caroline (Emily ::: Nil)
-- Note that we have to specify children list for everyone
-- (`Nil` instead of missing instance declaration)
instance Children Donna Nil
instance Children Emily Nil
instance Children Fred (George ::: Nil)
instance Children George Nil

-- `or` operation for type-level booleans 
class OR a b bool | a b -> bool
instance OR BTrue b BTrue
instance OR BFalse BTrue BTrue
instance OR BFalse BFalse BFalse

-- Is `a` a descendant of `b`?
class Descend  a b bool | a b -> bool
instance (Children b cs, PathExists cs a r) => Descend a b r

-- auxiliary function which checks if there is a transitive relation
-- to `to` using all possible paths passing `children`
class PathExists children to bool | children to -> bool

instance PathExists Nil a BFalse
instance PathExists (c ::: cs) c BTrue
instance (PathExists cs a r1, Children c cs1, PathExists cs1 a r2, OR r1 r2 r)
    => PathExists (c ::: cs) a r

-- Some tests
instance Show BTrue where
    show _ = "BTrue"

instance Show BFalse where
    show _ = "BFalse"

t1 :: Descend Donna Anne r => r
t1 = undefined -- outputs `BTrue`

t2 :: Descend Fred Anne r => r
t2 = undefined -- outputs `BFalse` 
```

`OverlappingInstances`这里是必要的，因为 2nd 和 3rd 实例都`PathExists`可以匹配`children`不是空列表的情况，但 GHC 可以在我们的情况下确定更具体的情况，具体取决于列表的头部是否等于`to`参数（如果是，则意味着我们已经找到路径即后代）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T04:02:10.620

至于`GreaterThan`示例，我看不出引入这些`Boolean`s 是如何忠实于原始 Prolog 代码的步骤。您似乎正试图在您的 Haskell 版本中编码一种 Prolog 版本中不存在的可判定性。

所以总而言之，你可以做

```
{-# LANGUAGE EmptyDataDecls #-}
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies #-}
class Numeral a where

data Zero
data Succ a

instance Numeral Zero
instance (Numeral a) => Numeral (Succ a)

class (Numeral a, Numeral b) => Greaterthan a b where

instance (Numeral a) => Greaterthan Zero (Succ a)
instance (Greaterthan a b)  => Greaterthan (Succ a) (Succ b) 
```

实际上使用[data types](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/kind-polymorphism-and-promotion.html)，你可以写得更好（但我现在不能尝试，因为我这里只安装了 ghc 7.2）：

```
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies #-}

data Numeral = Zero | Succ Numeral

class Greaterthan (a :: Numeral) (b :: Numeral) where

instance Greaterthan Zero (Succ a)
instance (Greaterthan a b)  => Greaterthan (Succ a) (Succ b) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T04:25:19.453

对于 Ed'ka 解决方案，您可以使用：

```
import Data.HList.TypeCastGeneric2
instance TypeCast nil Nil => Children a nil 
```

而不是每个没有孩子的人一个实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-09T16:18:32.547

我已经解决了第二个问题，这就是我发现的。可以制定问题“a-la”Prolog，但需要注意一些警告。其中一个警告是，`Descend`参数之间实际上没有任何函数依赖关系，它是一个二元谓词，而不是一元函数。

首先，让我展示一下代码：

```
{-# LANGUAGE FunctionalDependencies
           , FlexibleInstances
           , UndecidableInstances
           , NoImplicitPrelude
           , AllowAmbiguousTypes
           #-}

data Anne
data Bridget
data Caroline
data Donna
data Emily

class Child a b | a -> b

instance Child Anne Bridget
instance Child Bridget Caroline
instance Child Caroline Donna
instance Child Donna Emily

----------------------------------------------------

data True -- just for nice output

class Descend a b where descend :: True

instance {-# OVERLAPPING #-} Descend a a
instance (Child a b, Descend b c) => Descend a c 
```

`:set -XTypeApplications`（您可以通过启用和运行类似的东西在 GHCi 中进行测试`:t descend @Anne @Caroline`and `:t descend @Caroline @Anne`）

因此，这主要遵循 Prolog 示例，但有一个重要区别： `descend(X,Y) :- child(X,Y)`我们有

```
instance {-# OVERLAPS #-} Descend a a 
```

我将暂时解释为什么会这样，但首先我将解释它的变化：基本上，这种`Descend`关系变成了反射性的，即`Descend a a`对所有人都是正确的`a`。这不是 Prolog 示例的情况，其中递归提前一步终止。

现在为什么会这样。考虑 GHC 在类型实例解析期间如何实现类型变量替换：它匹配实例头部，统一类型变量，然后检查实例约束。因此，例如，`Descend Anne Caroline`将使用以下序列解决：

1.  首先`Descend Anne Caroline`是匹配`Descend a c`，方便`a=Anne`，`c=Caroline`
2.  因此，我们查找实例`Child Anne b`和`Descend b Caroline`。
3.  一般来说，GHC会在这里放弃，因为它不知道是什么`b`意思。但是由于 in 在`Child` `b`功能上依赖于`a`，因此`Child Anne b`被解析为`Child Anne Bridget`，因此`b=Bridget`，我们尝试解析`Descend Bridget Caroline`。
4.  `Descend Bridget Caroline`再次匹配`Descend a c`, `a=Bridget`,`c`又是`Caroline`.
5.  查找`Child Bridget b`，解析为`Child Bridget Caroline`. 然后尝试解决`Descend Caroline Caroline`。
6.  `Descend Caroline Caroline`与重叠实例匹配`Descend a a`并且进程终止。

因此，由于实例的匹配方式，GHC 实际上不能提前停止迭代。

也就是说，如果我们`Child`用一个封闭的类型族替换它，它就变得可行了：

```
{-# LANGUAGE TypeFamilies
           , FunctionalDependencies
           , FlexibleInstances
           , UndecidableInstances
           , TypeOperators
           , NoImplicitPrelude
           , AllowAmbiguousTypes
           , ScopedTypeVariables
           #-}

data Anne
data Bridget
data Caroline
data Donna
data Emily

data True
data False

type family Child' a where
 Child' Anne     = Bridget
 Child' Bridget  = Caroline
 Child' Caroline = Donna
 Child' Donna    = Emily
 Child' a        = False

class Child a b | a -> b

instance (Child' a ~ b) => Child a b

----------------------------------------------------

class Descend' a b flag
class Descend a b where descend :: True

data Direct
data Indirect

type family F a b where
  F False a = Direct
  F a a = Direct
  F a b = Indirect

instance (Child' a ~ c) => Descend' a c Direct
instance (Child a b, Descend' b c (F (Child' b) c))
  => Descend' a c Indirect
instance (Descend' a b (F (Child' a) b))
  => Descend a b 
```

[如https://wiki.haskell.org/GHC/AdvancedOverlap](https://wiki.haskell.org/GHC/AdvancedOverlap)中所述，跳舞`Descend'`只是为了能够根据上下文重载实例选择。主要区别在于我们可以多次申请以“向前看”。`Child'`

# linux - 为什么（做）GCC（和其他工具）不遵循 GNU 命令选项约定准则？

> ID：13899587
> 
> 赞同：2
> 
> 时间：2012-12-16T08:01:57.707
> 
> 标签：linux, gcc, styles, command-line-arguments, gnu

我正在对接受命令行选项的程序进行一些维护。有单字母选项和长选项。目前，长选项有一个前面的连字符。

许多工具的长选项都有双连字符。为了与现有内容保持一致，我查看了一些 GNU 工具，发现对于长格式，单连字符和双连字符混合在一起。例如，GCC 编译器有`--help`,`--version`与`-std`, `-funroll-loops`。

所以我搜索了一些关于此事的文档，并找到[了这个 GNU 文档](http://www.gnu.org/software/libc/manual/html_node/Argument-Syntax.html#Argument-Syntax)。在那里，GNU 对长选项的风格建议是以两个连字符开头。

现在，我想知道为什么 GNU 工具不遵循这些 GNU 建议？我认为这是向后兼容的问题，**但还有更多吗？**

在我编写的程序中，在更改选项语法时，我通常会保留旧形式的功能但未记录，或者至少给出弃用警告。GCC（和其他）程序不能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:22:48.310

There are plenty of reasons not to change:

*   There are quite literally millions (probably many more?) of configuration scripts and build files that use the existing command line options. Both recent and very old.
*   People are used to the current format so most programmers for many years will just use what they already know out of habit.
*   Argument parsing code is often complicated and changing it is just another opportunity for introducing bugs.
*   The old backward compatibility single hyphen long options would conflict with the new multiple short options combined so backwards compatibility is difficult.
*   Insert many more here.

Reasons to change:

*   To follow convention that is already not followed by many applications.

In short convention is nice and should ideally be followed for new stuff but often it is not worth changing stuff just for the sake of conformity.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T22:36:22.863

Makefile 和其他构建脚本通常（至少部分地）编写与编译器无关，因此 GNU C 编译器（以及扩展的 GNU 编译器集合`gcc`）必须在调用方式上与其他编译器保持兼容。一些 C 编译器肯定早于 GNU 程序参数语法约定。其他与开发相关的命令也是如此`ld`，`ar`例如 等，尤其是 UNIX 标准的那些部分。

某些命令中的“传统”语法甚至可能需要遵守某些标准。（C 和 C++ 标准似乎只指定了编程语言，但我可以想象 UNIX 标准也涵盖了某些开发工具的命令行参数。）

# php - 从 tinymce 表单提交到数据库时，它正在添加 \r\n

> ID：13899588
> 
> 赞同：2
> 
> 时间：2012-12-16T08:02:01.213
> 
> 标签：php, mysql, tinymce, nl2br

所以通常我不是文本编辑器的忠实粉丝，但我正在为客户创建一些论坛，但我遇到了一个很大的问题。

我在 Xampp 中没有这个问题，但现在它已经上线了，它会有很多问题。

`<p></p>`它没有像在 Xampp 中那样将插入的文本包装起来，而是简单地插入纯文本`\r\n`代替，`<br />`起初我认为这是它的设置方式，但我将其更改为不是 force`<p>`而是 force `<br />`。不是问题。

我现在有以下代码行来尝试解决问题并将其转换为正常的换行符，但它不起作用。

```
$string = nl2br(html_entity_decode(htmlentities($topic_info['topic_message'], ENT_QUOTES, 'UTF-8'))); 
```

我尝试了几种不同的变体，并且只尝试`nl2br`了自己，没有其他所有混乱，但它仍然没有显示任何东西`\r\n`，他是一个示例线。 `why arent you flippin working\r\njebus &nbsp;`如何修复它以显示没有 的行，`\r\n`或者如何修复它以从文本编辑器中实际插入文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:41:14.910

尝试剥离斜线。也许你的字符串被双重转义了。

```
$string = nl2br(stripcslashes(html_entity_decode(htmlentities($topic_info['topic_message'], ENT_QUOTES, 'UTF-8')))); 
```

# php - CakePHP 插件中的路由

> ID：13899597
> 
> 赞同：2
> 
> 时间：2012-12-16T08:04:01.410
> 
> 标签：php, cakephp, cakephp-2.0

我有一个插件需要覆盖 / 的默认路由

我尝试过的文件位于 APP/Plugin/Install/Config/routes.php

```
<?php
Router::connect('/', array('plugin' => 'install', 'controller' => 'installer', 'action' => 'index')); 
```

哪个不起作用。我还在我的引导程序中加载所有插件。`CakePlugin::loadAll();`

我错过了什么吗？

[更新。该文件需要覆盖 APP/Config/routes.php 中的主要 routes.php 文件。显然更新主路由文件有效并显示正确的页面，但我试图覆盖这个文件而不是直接修改它。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:38:07.360

我没有尝试覆盖插件的默认路由 - 我有普通控制器 - 但我认为你需要`'plugin'=>'install'`或在你的数组中。

**编辑：** [手册中关于插件的这一点](http://book.cakephp.org/2.0/en/plugins.html#plugin-configuration)可能适用，我认为您的 loadAll 应该如下所示：

```
CakePlugin::loadAll(array(
    'Install' => array('routes' => true)
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:11:13.400

如果你想路由到一个插件，你应该指定它，Cake 不会猜测你想要什么插件。

```
Router::connect('/', array('plugin' => 'install', 'controller' => 'installer', 'action' => 'index')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-29T14:56:23.703

稍后添加的路由将被第一次定义的路由覆盖。

例如，路由'/'通常在 app/config/routes.php 中定义，如果你想从'app/plugin/YOURPLUGIN/config/routes.php'覆盖它，你需要使用'Router::promote' .

请参阅[有关 Router::promote 的文档](http://book.cakephp.org/2.0/en/development/routing.html#Router::promote)

例如 app/plugin/YOURPLUGIN/config/routes.php

```
Router::connect(
'/',
array(
    'plugin' => 'YOURPLUGIN',
    'controller' => 'YOURPLUGIN_CONTROLLER',
    'action' => 'index'
));
Router::promote(); 
```

这会将插件的路由放在'/'的原始路由之前，因此首先匹配它。

# python - 通过python插入语句MySQL

> ID：13899600
> 
> 赞同：-1
> 
> 时间：2012-12-16T08:04:34.767
> 
> 标签：python

我正在尝试制作一个 python 脚本，将视频 url 和时间添加到我在 DB 中的 videopost 表中。这是我在 python 的第三个脚本。我仍在学习。另外请告诉我如何降低此脚本的执行时间。

代码：

```
 #!/usr/bin/python
  import MySQLdb
  import sys

  db = MySQLdb.connect (host = "host.com", user="myusername",passwd="pass", db = "dbname")

  cursor = db.cursor ()
  db.query("SELECT now()")
  result = db.use_result()
  time= str("%s" % \
      result.fetch_row()[0])
  print time
  db.close()
  cursor =db.cursor()
  vidurl = raw_input("Enter the URL to the video:")
  print vidurl

  cursor.execute ("""INSERT INTO videopost(vidurl, time) VALUES (%s, %s)""", (vidurl,time))
  db.commit()
  db.close() 
```

我遇到的错误是

```
 File "vidup.py", line 28, in <module>
  cursor.execute ("""INSERT INTO videopost(vidurl, time) VALUES (%s, %s)""", (vidurl,time))
  File "/usr/local/lib/python2.6/site-packages/MySQL_python-1.2.3-py2.6-freebsd-8.2-RELEASE-amd64.egg/MySQLdb/cursors.py", line 155, in execute _mysql_exceptions.InterfaceError: (0, '') 
```

好吧，谢谢你的帮助。对于寻找解决方案的人，我在下面发布更正：

```
 cursor.execute("SELECT now()")
  result = cursor.fetchall()
  time= str("%s" % \
        result[0])
  print time
  vidurl = raw_input("Enter the URL to the video:")
  print vidurl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:07:41.390

您正在关闭连接，然后尝试抓取光标：

```
db.close()
cursor =db.cursor() 
```

删除第一行，一切都应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:29:53.773

为什么你不使用：

```
cursor.execute ("""INSERT INTO videopost(vidurl, time) VALUES (%s, NOW())""", (vidurl,)) 
```

# ruby-on-rails - 为什么 Ajax 不会反映在表演上，而是反映在索引上？

> ID：13899602
> 
> 赞同：0
> 
> 时间：2012-12-16T08:05:15.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

现在，如果我在索引页面上按关注，按钮会立即将“关注”更改为“取消关注”。但是，在展示页面，什么都不会发生。我怎样才能解决这个问题？？

意见/用户/show.html.erb

```
<h1>Users#show</h1>

<p id="notice"><%= notice %></p>

<p>
  <b>User:</b>
  <%= @user.user_profile.user_id %>
</p>

<p>
  <b>Language:</b>
  <%= @user.user_profile.language_id %>
</p>

<p>
  <b>Country:</b>
  <%= @user.user_profile.country_id %>
</p>

<p>
  <b>Prefecture:</b>
  <%= @user.user_profile.prefecture_id %>
</p>

<p>
  <b>Gender:</b>
  <%= @user.user_profile.gender_id %>
</p>

<p>
  <b>Nickname:</b>
  <%= @user.user_profile.nickname %>
</p>

<p>
  <b>Introduction:</b>
  <%= @user.user_profile.introduction %>
</p>

<p>
  <b>Picture url:</b>
  <%= @user.user_profile.picture_url %>
</p>

<p>
  <b>Tag List:</b>
  <% @user.tags.each do |tag| %>
  <span><%= link_to tag.name, {:action=>'index', :tag=>tag.name} %></span>
<% end %>
</p>

<% if user_signed_in? %>
  <div id="follow_user" data-user-id="<%= @user.id %>">
    <%= render :partial => "follow_user", :locals => {:user => @user} %>
  </div>
<% end %> 
```

follow_controller.rb

```
class FollowsController < ApplicationController

  def create
    @user = User.find(params[:user_id])
    current_user.follow(@user)
    respond_to do |format|
      format.js {render :action=>"create.js"}
      end
  end

  def destroy
    @user = User.find(params[:user_id])
    current_user.stop_following(@user)
    respond_to do |format|
      format.js {render :action=>"destroy.js"}
  end
end

end 
```

意见/用户/_follow_user.html.erb

```
<% unless user == current_user %>
    <% if current_user.following?(user) %>
        <%= button_to("Un-Follow", user_follow_path(user.to_param, current_user.get_follow(user).id), 
        :method => :delete, 
        :remote => true, 
        :class => 'btn') %>
    <% else %>
        <%= button_to("Follow", user_follows_path(user.to_param), 
        :remote => true, 
        :class => 'btn btn-primary') %>
    <% end %>
<% end %> 
```

意见/关注/create.js.erb

```
$('.follow_user[data-user-id="<%=@user.id%>"]').html('<%= escape_javascript(render :partial => "follow_user", :locals => {:user => @user}) %>');
#jQuery 
```

意见/关注/destroy.js.erb

```
$('.follow_user[data-user-id="<%=@user.id%>"]').html('<%= escape_javascript(render :partial => "follow_user", :locals => {:user => @user}) %>');
#jQuery 
```

意见/用户/index.html.erb

```
<%- model_class = User.new.class -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize %></h1>
</div>
  <% @from %>
  <h3>tag cloud</h3>
  <% tag_cloud(@tags, %w(css1 css2 css3 css4)) do |tag, css_class| %>
    <%= link_to tag.name, {:action=>'index', :tag=>tag.name}, :class => css_class%>
  <% end %> 

<%= paginate @users %>

<table class="table table-condensed">
  <thead></thead>
    <tbody>
    <% @users.each do |user| %>  
      <div class="memberListBox">
        <div class="memberList">
            <p class="name"><span><%= user.user_profile.nickname %></span>(<%= user.user_profile.age %>)</p>
            <p class="size"><%= user.username %></p>
            <p class="img">
            <% if user.user_profile.user_avatar? %>
            <%= image_tag(user.user_profile.user_avatar.url(:thumb),:height => 100, :width => 100, :class => 'img-polaroid' ) %>
            <% else %>
            <%= image_tag('nophoto.gif',:height => 100, :width => 100, :class => 'img-polaroid' ) %>
            <% end %>
            </p>
            <div class="introduction">
                <%= user.user_profile.introduction %>
            </div>

<% if user_signed_in? && current_user!=user %>          
<div class="follow_user" data-user-id="<%= user.id %>">
  <%= render :partial => "follow_user", :locals => {:user => user} %>
</div>
<% end %>

  <%= link_to sanitize('<i class="icon-pencil icon-white"></i> ') + 'Message', new_messages_path(user.username), :class => 'btn btn-primary'  %>

                <%= link_to sanitize('<i class="icon-user icon-white"></i> ') + 'Profile', show_user_path(:username => user.username, :breadcrumb => @from), :class => 'btn btn-info' %>              

        </div>
    </div>
   <% end %>
  </tbody>  
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:07:44.527

View 包含一个带有`follow_user` **ID**的 DIV 。

JS 部分正在尝试选择`follow_user` **class**。

```
# views/users/show.html.erb
<div id="follow_user"...

# views/follows/create.js.erb
$('.follow_user[data-user-id=... 
```

我记得你的[最后一个问题](https://stackoverflow.com/q/13898891/1153362)是`follow`视图部分在站点范围内使用，所以你不能真正改变它们。因此，更改`show`视图以使用`follow_user`类：

```
# views/users/show.html.erb
<div class="follow_user"... 
```

# jquery - Jquery使用post发送数据

> ID：13899608
> 
> 赞同：0
> 
> 时间：2012-12-16T08:06:27.783
> 
> 标签：jquery, html

我正在尝试向服务器发送一些数据。

在服务器上它应该去 www.sample.com/data2

我有一个数组作为数组；var = 数组；这个数组有值。

我在做

```
$.post('/data2', {arrays}); 
```

这不起作用......这是在.submit（）中。我可以在萤火虫中看到它为变量提供错误为“无效的对象初始化程序”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:10:54.973

我假设你的 var`arrays`是

`[1,2,3,etc..]`

你不能只用`{}`括号括起来......你需要给你的价值一个关键，比如......

`{"arr" : arrays}`

如果您使用 PHP，您的数组将保存在索引“arr”中的 $_POST 数组中，例如...

`$arr = $_POST['arr'];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:12:53.247

javascript 中的对象本质上是键值映射，这意味着尝试使用未标记的值（在`{}`块内）定义对象字面量将引发语法错误。

您应该改为提供数据的密钥，例如`{"data" : arrays}`.

像往常一样，如果您想进一步阅读，有关 javascript 方面的[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide%2FValues%2C_Variables%2C_and_Literals#Object_literals) [页面是全面且信息丰富的。](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)

# c++ - 函数中定义的 std::string 保留其先前的值？

> ID：13899616
> 
> 赞同：0
> 
> 时间：2012-12-16T08:07:51.807
> 
> 标签：c++

如果在函数中定义了字符串，它是否在调用之间保留其值？

像这样的东西：

```
std::string myFunction( std::string input)
{
    std::string output;

    for ( int i=0; i < input.length(); i++ )
    {
        output[i] = input[i];
    }

    return output;

} 
```

如果第一次调用函数时输入字符串的长度比第二次调用时输入的长度长，那么第二次调用返回的字符串仍然有前一次调用的最后几个（与长度差异相同）字符完好无损的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:12:16.783

> 如果在函数中定义了字符串，它是否在调用之间保留其值？

在定义明确的代码中它不会，除非它被声明为`static`.

当前实现的主要问题是循环体：

```
for ( int i=0; i < input.length(); i++ )
{
    output[i] = input[i];
} 
```

在这里，您分配的结束`output`是[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。一旦你处于未定义行为的领域，任何事情都可能发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:59:33.197

它没有。我相信您会问这个关于字符串而不是其他所有局部变量的问题，因为字符串使用堆。没错，但是 string 也有一个析构函数，在退出作用域时调用它，释放它使用的堆。

当然，您可能会发现它确实保留了它的值，但这只是再次分配相同内存区域的巧合（这可能会一次又一次地发生，具体取决于您的程序、内存环境、编译器等）。

# html - 如何以原始尺寸保持居中的身体背景图像

> ID：13899619
> 
> 赞同：1
> 
> 时间：2012-12-16T08:08:08.620
> 
> 标签：html, css

我想保持以原始尺寸居中的身体背景图像。因此，当我调整窗口屏幕背景的大小时，它会保持其大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T08:17:41.910

```
.center_bg
{
    background-image: url('{url_of_image}');
    background-position: center center;
} 
```

这就是我从你的问题中理解的所有内容。你需要详细解释你的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T08:22:23.140

The [background-size property](http://www.w3schools.com/cssref/css3_pr_background-size.asp) may be of some interest, although some more information (including some actual code) would be helpful.

# ffmpeg - 实现 live555 DeviceSource 从 ffmpeg 编码器接收帧

> ID：13899620
> 
> 赞同：1
> 
> 时间：2012-12-16T08:08:16.467
> 
> 标签：ffmpeg, live555

我正在为流媒体网络摄像头制作应用程序。我想使用 OpenCV 来捕获相机，ffmpeg 作为编码器，live555 作为服务器。我知道我必须在 live555 中实现 DeviceSource.cpp 来封装编码器以从 ffmpeg 接收帧。但是，似乎没有如何做到这一点的例子。那么任何人都可以为我提供一些关于实现 DeviceSource 的教程或示例。先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T01:30:22.780

这是您在这里追求的一个很好的例子：

[https://www.imc-store.com.au/Articles.asp?ID=278](https://www.imc-store.com.au/Articles.asp?ID=278)

这是一个 c++ VS2010 项目，展示了如何使用 FFMPEG 对原始 RGB 帧进行编码，然后将该离散帧发送到 Live555 以进行流式传输。

VS2010项目包含所有的库和包含文件所以应该只是解压的情况，在VS2010中运行.sln文件，编译运行！

VLC 源代码同时实现了 FFMPEG 和 Live555，您可以查看他们的代码以获得一些额外的指针！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T21:19:55.950

[DeviceSource.cpp](http://www.live555.com/liveMedia/doxygen/html/DeviceSource_8cpp-source.html) **是**实现使用实时数据的 Live555 FramedSource 的示例。查看 DeviceSource.cpp 文件并阅读注释。特别要注意以下几行`deliverFrame()`：

```
u_int8_t* newFrameDataStart = (u_int8_t*)0xDEADBEEF; //%%% TO BE WRITTEN %%%
unsigned newFrameSize = 0; //%%% TO BE WRITTEN %%% 
```

这是您设置数据的地方。

# vim - 显示来自 vim 的输出 ".py 脚本在 ipython 控制台中执行

> ID：13899622
> 
> 赞同：2
> 
> 时间：2012-12-16T08:08:33.863
> 
> 标签：vim, ipython

我在 linux 机器上使用 gvim 与 IPython 0.12 交互。

我想在 Ipython 控制台中看到我的 *.py 脚本的输出，但我没有设法相应地调整参数。

通常，如果我写类似

```
print sum([1,2 3]) 
```

我希望结果会显示在控制台中。实际上，我只在下部 vim 区域显示一条消息，给出执行的输入编号（例如在 [2] 中）。但是 Ipython konsole 中的显示 In[1] 不会改变。

感谢您的洞察力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:33:29.897

你所说的听起来像是预期的结果，但我想我知道你要做什么。

[您可以使用tmux 之类](http://tmux.sourceforge.net)的东西将命令发送到终端会话（使用`send-keys`）。因此，您将拥有一个显示程序输出的终端，而另一个带有 vim 的终端。Vim 会向`tmux send-keys "python your.program^M"`另一个终端发送一个命令（类似于 的东西）来运行你的脚本。

另一个选择是让 vim 执行你的脚本，但将输出重定向到一个文件。Vim 将执行类似的`python yourscript.py > /tmp/out &`操作，并且您的其他终端将运行`tail -F /tmp/out`，因此它将不断更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:36:04.497

我是 IPython 开发人员之一，并且编写了[vim-ipython](https://github.com/ivanov/vim-ipython/)（您正在使用它`ipy.vim`）。

您看到的行为只是一个尚未在 IPython 中实现的所需功能：ipython 控制台、ipython qtconsole 和网络笔记本当前不打印它们未启动的活动。有关此计划中的功能增强，请参阅关于[issue #1873的讨论。](https://github.com/ipython/ipython/issues/1873)

`In[]`一旦您实际尝试在 ipython 的 qtconsole 中发送新命令，提示将得到更新。

# javascript - node.js 是 Perl 和 Python 等传统脚本语言的可行替代方案吗？

> ID：13899623
> 
> 赞同：31
> 
> 时间：2012-12-16T08:08:39.230
> 
> 标签：javascript, node.js, scripting, cross-platform, v8

最近我已经不再喜欢 Perl 作为一种跨平台的通用脚本语言，Python 和 Ruby 都没有真正吸引过我。

但我对浏览器中的 JavaScript 越来越熟悉了，它在 V8 等当代引擎中的性能非常好，而且 node.js 已经真正起飞了几年。

但 node.js 主要用于服务器端网络编程。正如它在其主页上声明的那样：

> 基于 V8 的事件驱动 I/O 服务器端 JavaScript 环境。

我想知道 node.js 目前是否也适合作为 *nix 和 Windows 上的通用脚本语言作为 Perl、Python 和 Ruby 的替代品。

我没有发现太多关于它以这种方式使用的讨论，但它似乎确实有一个广泛的社区，我没有注意到任何说它不适合这种用途的东西。这种方式被广泛使用吗？或者它是否缺少此类事物的关键功能或模块？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-16T11:54:52.040

就 Node.js 而言，我认为它不会成为使用 javascript 作为通用脚本语言的主流方式。主要原因是 Node.js 中 99% 的库和函数都具有异步特性。由于异步的性质，你必须彻底改变你的想法。没有可用的同步方法是绊脚石。它使事情变得不像脚本一样，因为您的代码不再是线性的。

所以采用没有发生，原因很简单，你大部分时间都在想：我可以用 Ruby/Python/... 更快/更简单地写这个（只需尝试下载 5 个不同的文件，压缩它们并复制它们使用 Node.js 到另一个文件夹）

随着人们越来越习惯于以异步方式思考和编程，采用 node.js 作为通用脚本工具可能会发生变化。

如果 node 中的每个异步函数都有一个同步版本，那么采用会有所不同，人们最终会使用不可扩展的 node.js 服务器，因为他们选择在一些地方使用同步方法。可以说，节点不会变得流行，因为性能数据不会让它脱颖而出。

简而言之：

之所以采用 node.js，是因为它具有异步性。采用 node.js 作为客户端通用脚本工具并没有发生，因为它缺乏同步功能。

请记住，这是基于我自己的经验和观点，而不是我在互联网上找到的文章或数字，所以请自己尝试并做出自己的看法。

# php - 使用清单和收音机将信息输入数据库

> ID：13899626
> 
> 赞同：1
> 
> 时间：2012-12-16T08:09:27.597
> 
> 标签：php

所以基本上我想要做的是获取选定的清单元素并将它们的“名称”发送到数据库。我也想对收音机做同样的事情。这是代码：

```
<?php       
        $user_files_directory = 'uploads/unused_images/'.$_SESSION['user_id'].'/';

        if (file_exists($user_files_directory)) {

        $dir_handle = @opendir($user_files_directory); 

        while ($file = readdir($dir_handle)) { 

        if($file == "." || $file == ".." || $file == "index.php" ) 

        continue; 

            echo "
            <div id=\"image_container\">
                <div id=\"unused_images_selector\">
                    <img src=\"uploads/thumbs/unused_images/".$_SESSION['user_id']."/$file\" alt=\"Test\">
                </div>
                <div id=\"checkbox\">
                        <input type=\"checkbox\" name=\"$file\">
                </div>
            </div>
            "; 
        }
        // Close 
        closedir($dir_handle); 

        } else {
            echo    "<p>
                        You have not uploaded any images.
                    </p>";
        }
    ?> 
```

存在一个帖子：

```
$file = $_POST['file']; 
```

这是其余的：

```
function create_new_page($page_name, $album_name, $file, $file1, $file2) {
        $page_name = mysql_real_escape_string(htmlentities($page_name));
        mysql_query("INSERT INTO `pages` VALUES ('', '$album_name', '".$_SESSION['user_id']."', UNIX_TIMESTAMP(), '$page_name', '$file2', '$file3', '$file')");
        return mysql_insert_id();
    } 
```

除了收音机/清单之外的所有东西都可以工作，非常感谢任何帮助，我知道代码可能不是最好的，但那是因为我没有做过太多的 PHP，只是想要一些工作代码，所以现在不太担心这里的问题在那里。

额外： $file 是放置在页面中的图像的名称（它是用户想要使用的图像的选择区域），所以我希望使用 $file 它会在MYSQL 数据库，但它改为写入“数组”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:23:51.423

您误解了 HTML 表单的工作原理以及在 PHP 中提取它的方式。您正在将`name`属性设置为实际文件名（*不是*“文件”），并尝试使用 name 提取 POST 参数`file`。这样做的方法是命名复选框`file[]`（如在文件数组中）并将`value`属性设置为文件名。您的 PHP 代码可能保持不变。

修改您的复选框代码如下：

```
<div id=\"checkbox\">
        <input type=\"checkbox\" name=\"file[]\" value=\"$file\" />
</div> 
```

由于您已经拥有以下内容：

```
$file = $_POST['file']; 
```

`$file`会给你一个文件名数组。然后，您可以根据需要处理该数据。

**编辑：**由于 OP 修改了问题。

您想将多个图像名称存储到数据库中，因此您需要触发多个`INSERT`语句。您可能会在`$file`变量上循环并构建您的查询。

在以下几行中使用一些东西：

```
$mysqli = new mysqli("localhost", "dbuser", "dbpassword", "dbname");

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

foreach ($file as $filename) {
    $query = $mysqli->prepare("INSERT INTO tblImages vcImageName VALUES (?)");
    $query->bind_param("s", $filename);
    $query->execute();
    $query->bind_result($result);
    $query->fetch();
    $query->close();
}

$mysqli->close(); 
```

# objective-c - 向我的框架添加动态库会给我警告

> ID：13899634
> 
> 赞同：1
> 
> 时间：2012-12-16T08:11:17.597
> 
> 标签：objective-c, ios, xcode

我想为一些我想包含在其他 iPhone 应用程序中的可重用代码创建一个静态框架。我通过创建一个包来创建这个框架。我已经将 twitter 库添加到这个框架中。问题是`<libxml/xmlreader.h>`需要 libxml2.dylib 的 twitter 库导入，所以我将 libxml2.dylib 添加到我的包的“Link Binary With Libraries”但是编译器给了我警告，代码无法编译。我收到了这些警告信息。

```
Unexpected dylib (/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks//Foundation.framework/Foundation) on link line
Unexpected dylib (/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks//CoreFoundation.framework/CoreFoundation) on link line
Unexpected dylib (/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks//CoreGraphics.framework/CoreGraphics) on link line
Unexpected dylib (/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks//MessageUI.framework/MessageUI) on link line
Unexpected dylib (/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks//UIKit.framework/UIKit) on link line
Unexpected dylib (/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libxml2.dylib) on link line 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T13:37:26.393

我只是克服了这个问题并想通了。将 CoreFoundation.Framework 等标准框架添加到自定义框架会让您无处可去。一旦您将它们从自定义框架中删除，这些警告就会消失。然后，最终用户必须在实现您的自定义框架时将所需的标准框架添加到他们的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T02:46:46.677

我通过这一步解决了这个问题

```
Project target -> Build Settings -> Build Active Architecture Only (Debug) -> NO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T08:20:18.010

如果你只是想消除这些警告，也许你可以试试这个：

> 项目目标 -> 构建设置 -> 与标准库的链接 -> 否

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T09:01:55.057

我认为您需要将这些框架添加到您的项目中：

> 项目目标 -> 构建阶段 -> 将二进制文件与库链接 -> 将这些框架一一添加。

# python - 有没有办法获取通过 werkzeug(flask) 的请求发送的 Immutabledict 中嵌套 dict 的值？

> ID：13899635
> 
> 赞同：6
> 
> 时间：2012-12-16T08:11:21.810
> 
> 标签：python, request, flask, python-requests, werkzeug

我过去问过问题，但仍然面临问题。address_dict = {'address': {'US': '旧金山', 'US': '纽约', 'UK': '伦敦'}}

当通过请求发送上述参数时，如何在 Flask 上使用 request.form 获取地址键中的值？

```
import requests
url =  'http://example.com'
params = {"address": {"US": "San Francisco", "UK": "London", "CH": "Shanghai"}}
requests.post(url, data=params) 
```

然后我在flask.request的上下文中得到了这个。

```
ImmutableMultiDict([('address', u'US'), ('address', 'US'), ('address', 'UK')]) 
```

如何获取每个地址键中的值？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-16T10:49:20.603

您将复杂的嵌套数据结构作为 HTML 表单发送，它不会像您期望的那样工作。将其编码为 JSON：

```
import json
import requests

url = 'http://example.com/'
payload = {"address": {"US": "San Francisco", "UK": "London", "CH": "Shanghai"}}
data = json.dumps(payload)
headers = {'Content-Type': 'application/json'}
requests.post(url, data=data, headers=headers) 
```

在你的 Flask 应用程序中，它可以通过`request.json`（已经解码）访问。

# iphone - iOS 持有永久对象

> ID：13899637
> 
> 赞同：-6
> 
> 时间：2012-12-16T08:11:52.103
> 
> 标签：iphone, objective-c, ios

我想知道保存永久物体的最佳方法是什么。例如：我有一个游戏，用户创建自己的角色，在创建过程中他必须为他的角色选择眼睛、嘴巴、衣服等。

这些角色属性是永久性的，它们是应用程序的一部分。保存数据并在需要时将其检索到的最佳方式是什么`NSObject`？

太谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:24:56.680

SQLite, Core Data, or plists. If it is a small amount of data, NSUserDefaults.

# c# - 如何创建接收和返回泛型类型的方法？

> ID：13899638
> 
> 赞同：0
> 
> 时间：2012-12-16T08:12:09.763
> 
> 标签：c#, .net

如何创建接收和返回泛型类型的方法？

我必须将两种不同的类型传递给同一个方法。

```
 public List<Type1> param1 = new List<Type1>(); 
  public List<Type2> param2 = new List<Type2>();      

   List<Type3> var1 = MergeFoundSigns(param1);

   List<Type4> var2 = MergeFoundSigns(param2); 

  public Type MergeFoundSigns(List<T> param)
  {
     "some logic"
  } 
```

知道如何实现上述方法吗？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:15:59.820

如果您知道类型是什么：

```
public List<Type1> param1 = new List<Type1>(); 
public List<Type2> param2 = new List<Type2>();      

List<Type3> var1 = MergeFoundSigns<Type1, Type3>(param1);

List<Type4> var2 = MergeFoundSigns<Type2, Type4>(param2); 

public List<TOut> MergeFoundSigns<TIn, TOut>(List<TIn> param)
{
    // some logic
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:15:36.810

尝试：

```
public List<T> MergeFoundSigns<T>(List<T> param)
{
     // ...
} 
```

# jwplayer - 在 video-js video.js 中使用 ie8 的回调

> ID：13899639
> 
> 赞同：1
> 
> 时间：2012-12-16T08:12:12.390
> 
> 标签：jwplayer, video.js

我正在使用这个片段来播放带有 videojs 的视频。在 Firefox 和 Chrome 中很好。ie8 的 flash 回调应该是 JWPlayer，正如 video-js 的 web 中所推荐的那样。

```
<video controls="controls" poster="./media/pic112.jpg" width="640" height="360">
    <source src="./media/Anyos.mp4" type="video/mp4" />
    <source src="./media/Anyos.ogg" type="video/webm" />
    <source src="./media/Anyos.ogg" type="video/ogg" /> 
    <object type="application/x-shockwave-flash" data="./jwplayer/player.swf" width="640" height="360">
        <param name="movie" value="./jwplayer/player.swf" />
        <param name="flashvars" value="autostart=true&amp;controlbar=over&amp;image=./media/pic112.jpg&amp;file=./media/Anyos.mp4" />
        <!-- fallback image -->
        <img src="./media/pic112.jpg" width="640" height="360" alt="Big Buck Bunny"
            title="No video playback capabilities, please download the video below" />
    </object>
</video> 
```

但我做错了什么。我看到了 JWPlayer，并发出警告：`video not found or access denied`.

我使用了 JWPlayer 5（只是 swf 文件），因为使用 6 会出现另一个错误“不支持离线播放”

我的计算机 (XP) 中的行为是相同的，或者通过我的主机提供商发布网络。

# php - 从同一页面上的外部网站获取表单结果

> ID：13899643
> 
> 赞同：2
> 
> 时间：2012-12-16T08:12:36.820
> 
> 标签：php, curl

我有这个完美运行的代码。但是，在我提交之后，我被重定向到外部网站，在那里可以看到结果。相反，我希望结果显示在同一个网站上。我愿意接受各种建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:19:45.040

第一行应该是：

```
echo '<form action="' . $_SERVER[PHP_SELF] . '" method="post"> 
```

然后在您回显的最后一行上方，输入：

```
$response = curl_exec($ch); 
```

另外，将您的位置线更改为：

```
$location = 'http://results.vtu.ac.in/vitavi.php'; 
```

- - -编辑 - - -

我添加了一些代码来为您解析响应，最终代码将是：

```
<?php

echo '<form action="' . $_SERVER[PHP_SELF] . '" method="post">
<input type="text" name="rid">
<input type="submit" name="submit" value="submit">
</form>';

if(isset($_POST['submit'])&&(!empty($_POST['rid'])))
{
    $location = 'http://results.vtu.ac.in/vitavi.php';

    $userAgent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322)';

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_VERBOSE, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_URL, $location );

    $post_array = array(
        "rid" => $_POST['rid'],
        "submit" => "submit"
    );
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_array); 
    $response = curl_exec($ch);

    $start = '<TD width="513">';
    $end = '<br>';

    $response = strstr($response, $start);
    $end = stripos($response, $end);
    $response = substr($response, strlen($start), $end - strlen($start));

    echo $response."<br/>";
}  

?> 
```

# iphone - 将文件从新项目导入到旧项目

> ID：13899645
> 
> 赞同：1
> 
> 时间：2012-12-16T08:12:58.147
> 
> 标签：iphone, xcode

我有一个正在处理的项目，客户要求我回到旧版本。但是我在新文件上仍然取得了很大进展，我想将它导入到旧项目中。

我正在导入的文件（h、m 和 xibs）与旧文件非常相似，但有一些变化。

所以我从我的旧项目中删除了它们，然后从我的新项目中拖放它。

所以看起来我已经拥有了一切，但是当我点击播放时，它给了我以下错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_LoadingPage", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有谁知道它为什么会发生以及如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:23:31.843

Please include your file into the target as

![enter image description here](../Images/a75f6c57fda4968108d672ac71f99231.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T08:38:59.403

链接时，链接器需要为每个符号及其当前构建的体系结构编译可用的目标代码。

我首先通过完全删除派生数据来清理您的构建文件夹。

接下来确保该文件是为链接器所说的缺少的体系结构构建的。检查构建日志。

您可能会发现该文件在检查器中有一个复选框，但编译构建阶段缺少它。所以它没有被编译。打开构建阶段选项卡并检查文件是否也在 dompiled 文件中。它可能会混淆并实际上将源文件添加到要添加的资源而不是要编译的代码中。

# android - 如何使用 aChart Engine 创建具有双条形图和折线图的组合图表？

> ID：13899649
> 
> 赞同：1
> 
> 时间：2012-12-16T08:13:49.737
> 
> 标签：android, achartengine

我正在使用 android 中的 achart 引擎做图表应用程序。我可以创建条形图、折线图、双折线图和带有折线图的单条形图的组合图。现在我想用这样的双条形图和折线图创建组合图表....

并试了一下。我无法创建组合图表。我想我因为这条线而出错了。

```
 String[] types = new String[] {BarChart.TYPE,LineChart.TYPE}; 
```

我怎样才能改变这个？任何机构都可以帮助我解决这个问题。提前致谢。

# jquery - 是否可以使用 jQuery 从 SQL Server 检索数据？

> ID：13899650
> 
> 赞同：6
> 
> 时间：2012-12-16T08:14:03.590
> 
> 标签：jquery, sql

是否可以使用 jQuery 从 SQL Server 检索数据并使用 HTML 控件显示数据？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-16T08:16:38.570

jQuery 被设计为在浏览器环境中运行——所以这是一个带有 DOM、JavaScript 支持（显然）等等的环境。

要从 MS SQL Server 检索数据，您需要访问数据库驱动程序和服务器。浏览器很少有这两个东西，即使有，你通常也不希望两者直接对话。

相反，构建它的通常方式是让基于浏览器的代码与中间层服务器（Web 服务器，因为浏览器擅长与它们通信）通信，然后它可以访问数据库。有几个原因：

1.  它为您提供了一个位置（浏览器和数据库之间的服务器）来应用安全性、守门、节流、监控等。

2.  它可以防止将您的数据库代码和结构暴露给最终用户（因为任何想要阅读它的人都可以阅读基于浏览器的 JavaScript 代码）。

3.  从浏览器环境访问数据库驱动程序很棘手，需要非标准的东西，例如 IE `ActiveXObject`，并非所有浏览器都存在，并且即使在它们存在的浏览器上也会触发安全警告。

*您如何*让浏览器与服务器通信取决于您想要做什么，但现代做法是使用 ajax，它代表（有点杜撰）异步 JavaScript 和 XML。（如今人们使用它的用途远不止 XML；[JSON](http://json.org)是一种更常见的数据表示法。）

例如，也许您想在单击按钮时填写一些 HTML。在您的基于浏览器的代码中，您将钩住按钮单击：

```
$("#theButton").click(handleButtonClick); 
```

您将让该按钮向服务器发送请求。如果请求是幂等的（你总是返回相同的数据），你发送一个 GET；否则，您发送一个 POST：

```
function handleButtonClick() {
    $.ajax({
        url:     "/path/to/server/resource",
        type:    "GET",
        data:    {articleId: 27},
        success: function(data) {
            /* ...use the data to fill in some HTML elements... */
        },
        error:   function() {
            /* ...show an error... */
        }
    });
} 
```

在服务器上，页面`/path/to/server/resource`会做必要的工作来验证请求是否应该被满足，连接到数据库，查询（或更新）信息，并格式化响应以发送回客户端。

显然，以上是对您如何执行此操作的非常、非常、*非常*简洁的描述，但希望它为您奠定了基础，并让您了解下一步该研究什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T08:16:20.210

[Ajax 请求](http://api.jquery.com/jQuery.ajax/)通常用于使用 javascript 或 jQuery 执行此类操作。

我认为不可能*直接*这样做，因为 javascript 运行客户端，而不是服务器端。

jQuery 无法运行数据库查询（没有双关语）。

# xslt - xslt - 当某些日期不在源 xml 中时如何输出一系列日期的数据

> ID：13899651
> 
> 赞同：2
> 
> 时间：2012-12-16T08:14:09.717
> 
> 标签：xslt, xslt-2.0

我是 xslt 的新手，经过多次尝试后无法解决以下问题。

我有一个 xml 数据文件，其中包含我无法更改的数据。例如下面的简单 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<sales>
    <sale>
        <year>2012</year>
        <amount>200</amount>
    </sale>
    <sale>
        <year>2012</year>
        <amount>180</amount>
    </sale>
    <sale>
        <year>2010</year>
        <amount>120</amount>
    </sale>
</sales> 
```

我想按年份对销售数据进行分组并对金额求和，这样我就可以得到每年的总金额，我可以做到这一点。

xml 文件中有 2012 年和 2010 年的数据，但没有 2011 年的数据。

我希望我的输出在 2011 年的数字为 0，所以我在 2010、2011 和 2012 年都有输出。

我实际上将使用 xls 来生成图表，但在这个简单的示例中，我使用 html 作为输出。我正在使用 Altova XMLSpy 测试 xls 并查看生成的 html 文档。

这是我编写的简单 xls 代码，用于对 HTML 中的数据进行分组和显示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <html>
  <body>
  <table border="1">
    <tr>
      <th>Year</th>
      <th>Amount</th>
    </tr>
    <xsl:for-each-group select="sales/sale" group-by="year">
      <xsl:sort select="year"/>
      <tr>
        <td><xsl:value-of select="year"/></td>
        <td><xsl:value-of select="sum(current-group()/amount)"/></td>
      </tr>
    </xsl:for-each-group>
  </table>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

当我使用 Altova XMLSpy 对 xml 文件运行它时，我在浏览器窗口中得到以下信息。一个有 3 行的小表格，一个带有标题的标题，然后是 2 行数据，一个是 2012 年，另一个是 2010 年。我还不能使用图像作为stackoverflow 的新用户，所以这里是可以查看的源 html 代码在浏览器中。

```
<html>
    <body>
        <table border="1">
            <tr>
                <th>Year</th>
                <th>Amount</th>
            </tr>
            <tr>
                <td>2010</td>
                <td>120</td>
            </tr>
            <tr>
                <td>2012</td>
                <td>380</td>
            </tr>
        </table>
    </body>
</html> 
```

我可以使用 xls 为 2011 年创建一个数量为 0 的行，以便我的输出显示 2010、2011 和 2012 年的数据吗？

请注意，我无法在 xls 中对年份进行硬编码，我必须导出丢失的年份。

通常我会确保源 xml 文件具有所需的所有数据，但在这种情况下这是不可能的。

感谢任何帮助。

亲切的问候

赛尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:13:19.373

这是一个解决方案：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs">

<xsl:output method="html" indent="yes"/>

<xsl:key name="sale-by-year" match="sale" use="xs:integer(year)"/>

<xsl:template match="/">
  <html>
  <body>
  <table border="1">
    <tr>
      <th>Year</th>
      <th>Amount</th>
    </tr>
    <xsl:variable name="doc" select="/"/>
    <xsl:for-each select="min(sales/sale/year/xs:integer(.)) to max(sales/sale/year/xs:integer(.))">
      <xsl:variable name="sales-of-year" select="key('sale-by-year', ., $doc)"/>
      <tr>
        <td>
          <xsl:value-of select="."/>
        </td>
        <td>
          <!--  <xsl:value-of select="if ($sales-of-year) then sum($sales-of-year/amount) else 0"/> -->
          <xsl:value-of select="sum($sales-of-year/amount)"/>
        </td>
       </tr>
     </xsl:for-each>

  </table>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:51:04.140

**I. 稍短的 XSLT 2.0**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:key name="kSalesByYear" match="sale" use="year"/>
 <xsl:variable name="vDoc" select="/"/>

 <xsl:template match="/">
  <html>
    <body>
          <table border="1">
            <tr>
              <th>Year</th>
              <th>Amount</th>
            </tr>
        <xsl:for-each select=
         "min(/*/*/year/xs:integer(.)) to max(/*/*/year/xs:integer(.))">
         <tr>
           <td><xsl:sequence select="."/></td>
           <td><xsl:sequence select=
            "sum(key('kSalesByYear',string(.),$vDoc)/amount)"/></td>
         </tr>
        </xsl:for-each>
      </table>
    </body>
   </html>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

**二、XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:key name="kSalesByYear" match="sale" use="year"/>
 <xsl:variable name="vDoc" select="/"/>

 <xsl:variable name="vMinMax">
  <xsl:for-each select="/*/*/year">
   <xsl:sort/>
   <xsl:if test="position()=1">
    <xsl:value-of select="."/>
   </xsl:if>
   <xsl:if test="position()=last()">
    <xsl:value-of select="concat('|',.)"/>
   </xsl:if>
  </xsl:for-each>
 </xsl:variable>

 <xsl:variable name="vMin" select="substring-before($vMinMax, '|')"/>
 <xsl:variable name="vMax" select="substring-after($vMinMax, '|')"/>

 <xsl:template match="/">
  <html>
    <body>
          <table border="1">
            <tr>
              <th>Year</th>
              <th>Amount</th>
            </tr>
        <xsl:for-each select=
         "(document('')//node()|document('')//@*|document('')//namespace::*)
           [not(position() > $vMax - $vMin +1)]
         ">
         <xsl:variable name="vYear" select="$vMin + position() -1"/>

         <xsl:for-each select="$vDoc">
             <tr>
               <td><xsl:value-of select="$vYear"/></td>
               <td><xsl:value-of select=
                "sum(key('kSalesByYear',$vYear)/amount)"/></td>
             </tr>
         </xsl:for-each>
        </xsl:for-each>
      </table>
    </body>
   </html>
 </xsl:template>
</xsl:stylesheet> 
```

**当上述两种转换中的任何一种应用于提供的 XML 文档时：**

```
<sales>
    <sale>
        <year>2012</year>
        <amount>200</amount>
    </sale>
    <sale>
        <year>2012</year>
        <amount>180</amount>
    </sale>
    <sale>
        <year>2010</year>
        <amount>120</amount>
    </sale>
</sales> 
```

**产生了想要的正确结果**：

```
<html>
   <body>
      <table border="1">
         <tr>
            <th>Year</th>
            <th>Amount</th>
         </tr>
         <tr>
            <td>2010</td>
            <td>120</td>
         </tr>
         <tr>
            <td>2011</td>
            <td>0</td>
         </tr>
         <tr>
            <td>2012</td>
            <td>380</td>
         </tr>
      </table>
   </body>
</html> 
```

# mysql - MySql 我的朋友的朋友和我的朋友的朋友 我的朋友的朋友

> ID：13899654
> 
> 赞同：0
> 
> 时间：2012-12-16T08:14:48.650
> 
> 标签：mysql

我的 mysql 查询有问题，无法以任何方式完成。我已经检查了其他主题，但在我的情况下无法获得任何解决方案。

我有两张桌子，一张是用户

```
id, name, email.... 
```

第二个朋友被命名为朋友:)

```
user1_id, user2_id 
```

现在我需要从数据库中获取我朋友的朋友的所有用户信息，以及下一级朋友，我的朋友的朋友的朋友，这些应该是 2 个单独的查询。当然，搜索应该排除我，并且是不同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:02:42.567

应该这样`StoredProcedure`做

```
CREATE PROCEDURE `friend_list`(user_id INT, MaxLevel INT)
LANGUAGE SQL
NOT DETERMINISTIC
CONTAINS SQL
SQL SECURITY DEFINER
COMMENT ''
BEGIN

DECLARE LLevel, LCount INT DEFAULT 0;

DROP TABLE IF EXISTS tmp_friends;

CREATE TEMPORARY TABLE tmp_friends
    SELECT user1_id AS friend_id, LLevel AS friend_level
        FROM friends
        WHERE user2_id = user_id
    UNION
    SELECT user2_id, LLevel
        FROM friends
        WHERE user1_id = user_id;

SELECT COUNT(*) INTO LCount FROM tmp_friends;

DROP TABLE IF EXISTS tmp_fr;

WHILE ( LCount > 0 ) AND ( LLevel < MaxLevel ) DO

    SET LLevel = LLevel + 1;

    CREATE TEMPORARY TABLE tmp_fr
        SELECT user1_id as friend_id, LLevel as friend_level
        FROM friends
        WHERE user2_id IN ( SELECT friend_id FROM tmp_friends WHERE friend_level = LLevel - 1 );

    INSERT INTO tmp_fr
        SELECT user2_id as friend_id, LLevel as friend_level
        FROM friends
        WHERE user1_id IN ( SELECT friend_id FROM tmp_friends WHERE friend_level = LLevel - 1 );

    DELETE FROM tmp_fr 
    WHERE friend_id IN ( SELECT friend_id FROM tmp_friends ) 
       OR friend_id = user_id;

    SELECT COUNT(*) INTO LCount FROM tmp_fr;

    INSERT INTO tmp_friends
        SELECT * FROM tmp_fr;

    DROP TABLE tmp_fr;

END WHILE;

SELECT * 
FROM tmp_friends 
ORDER BY friend_level;

DROP TABLE tmp_friends;

END 
```

您将获得一个包含`id`用户和朋友级别的结果集（0 是直接的，1 是朋友的朋友，...）。

你只需要传递 user_id 和最大的friendlevel

```
CALL friend_list( 1, 10 ); 
```

我使用了这个表结构

```
CREATE TABLE `users` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE `friends` (
  `user1_id` int(11) unsigned NOT NULL,
  `user2_id` int(11) unsigned NOT NULL,
  PRIMARY KEY (`user1_id`,`user2_id`),
  KEY `fk_friends_users2` (`user2_id`),
  CONSTRAINT `fk_friends_users2` FOREIGN KEY (`user2_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_friends_users1` FOREIGN KEY (`user1_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

# c++ - 通过条目维护/更新/访问文件的“良好”编程形式

> ID：13899668
> 
> 赞同：1
> 
> 时间：2012-12-16T08:17:19.663
> 
> 标签：c++, c, database, record

基本问题：

如果我正在记录/修改数据，我是否应该通过索引硬编码索引访问文件的元素，即`targetFile.getElement(5)`；通过硬编码的标识符（内部翻译成索引），即`target.getElementWithID("Desired Element")`，或使用一些中间值`DESIRED_ELEMENT = 5; ... target.getElement(DESIRED_ELEMENT)`等。

编辑：或者使用`enum`??

* * *

背景：

我的程序 (c++) 将数据存储在许多不同**的 'dataFile' 中**。我还在*另一个*文件中保留了所有数据文件的列表——一个**“listFile”** ——它还存储了每个文件的一些属性（见下文，但即它的名称是什么，它有多少行信息有等）。有一个管理数据文件和列表文件的对象，称之为**'fileKeeper'**。

listFile 的条目类似于：

```
filename , contents name , number of lines , some more numbers ... 
```

我绝对有可能从此列表中添加/删除字段 --- 但总的来说，它们将保持静态。

现在，我有一个常量字符串数组，它保存每个条目中每个元素的标识，例如：

```
const string fileKeeper::idKeys[] = { "FileName" , "Contents" , "NumLines" ... };
const int fileKeeper::idKeysNum = 6;   // 6 - for example 
```

我正在尝试以“良好”的程序形式管理这些东西。因此，当我想检索文件中的行数时（例如），而不是使用仅检索“3”元素的方法......相反，我执行以下操作：

```
string desiredID = "NumLines";
int desiredIndex = indexForID(desiredID);
string desiredElement = elementForIndex(desiredIndex); 
```

函数`indexForID()`遍历的条目，`idKeys`直到找到，`desiredID`然后返回它对应的索引。并且`elementForIndex(index)`实际上进入**listFile**以检索以逗号分隔的字符串的第 index 个元素。

* * *

问题：

这看起来仍然很丑陋/*形式不佳*。有没有***办法***我应该这样做？如果不是，通常有哪些一般方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:54:28.250

我喜欢使用字符串作为键的方式。您可以使用 将字符串映射到数字`std::map<string, int>`。然后你可以做

```
std::map<string, int> columns;
columns["FileName"] = 0;    
columns["Contents"] = 1;
columns["NumLines"] = 2; 
```

然后，您可以参考`columns["Contents"]`，例如，获取列 ID。最好是通过一个函数来完成，如果你拼错了一个键，它会通知你。像这样的一些代码：

```
std::map<string, int>::iterator it = columns.find(key);
if (it == columns.end()) { // key not in columns
    // report error here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:01:12.843

既不使用数据库，也至少使用 csv。Sqlite 是一个轻量级、无服务器的数据库，并且几乎可以使用任何语言进行绑定。它专为这种需要存储大量数据但又不想安装和配置数据库服务器的场景而设计。您可能还想创建一个结构/类来保存数据，也许在某种 ORM 的帮助下。

如果您使用 csv 并且希望能够重新排列列顺序，将列名保存为文件的第一个条目，大多数 csv 库应该能够使用第一列作为列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T08:31:07.723

首先创建一个`FileProperty`类，`listFile`将是该类的对象列表，而您的“键”将是该类的成员变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T22:26:16.727

我的解决方案是使用 std::map 和枚举的组合：

```
class FileKeeper {
    public:
        enum ID_KEY = { FileName , Contents , "Num_Lines };
        string getIDKey(ID_KEY idk);

    private:
        static map<int,string> ID_Key = { { FileName, "Filename" }, { Contents, "Contents" }, { Num_Lines, "Num Lines" } };

}

string FileKeeper::getIDKey(ID_KEY idk) {
    if( idk > 0 && idk < ID_Key.size() ) { return ID_Key[idk]; }
    else { return ""; }
} 
```

这样，我可以使用枚举轻松访问索引并轻松地遍历键（以正确的顺序 --- 这是`map<string,int>`不会做的），并且仍然使用映射检索从索引到字符串的映射。使用一种`get()`方法可以防止向地图添加元素，并保持实际的`map`私有属性使我无法使用整数懒惰地访问它（即使它在技术上是 int-index 类型）。

我不需要在代码中的任何位置使用已识别的实际字符串访问元素，即 get___("Num Lines"); --- 这有点丑陋，似乎是*失礼*。

# asp.net - 在 EF 的自联接表中选择 Last Childs

> ID：13899671
> 
> 赞同：4
> 
> 时间：2012-12-16T08:17:33.573
> 
> 标签：asp.net, entity-framework, self-join

我有一张这样的桌子：

```
Id              int      Not Null  PK Unique
RequestNO       int      Not Null   
RefrenceId      int      Null                  //Self Join to Id 
```

如果我在此表中有这些记录：

```
Id   RequestNO    RefrenceId      
1       H100         NULL
2       H101         NULL
3       H101          2
4       H101          3
5       H100          1
6       H105         NULL 
```

根据这些记录，我想返回 Id 在 { 4 ,5 , 6 } 中的列表。我想选择最后一个孩子（如果任何父母没有孩子，它本身就是孩子）。有没有人可以帮助我解决这个问题？！

我正在使用 EF 4 (Database First) ，表名是**Requests**

**UPDATE1**：我试试这个，但它失败了。

```
var list = DataContext.Requests.GroupBy(rec => new { rec.ConfirmNo }).Select(rec => rec.FirstOrDefault()); 
```

如果您需要更多详细信息，请评论我。谢谢阿里·福鲁吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:07:22.483

你可以试试这个：

```
var list = DataContext.Requests.Where(op => !DataContext.Requests.Any(ip => ip.RefrenceId == ip.Id)); 
```

# c# - 选择为的休眠条件

> ID：13899674
> 
> 赞同：0
> 
> 时间：2012-12-16T08:17:54.653
> 
> 标签：c#, sql, database, nhibernate

我想在我的标准中添加一个带有“as”添加的特定列。这意味着：从 XYZ 中选择 0 AS ID ...

我该怎么做，使用标准？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:37:08.880

NHibernate *Projections*是您正在寻找的功能：

```
var projections = Projections.ProjectionList();
projections
  .Add(Projections.Property("EntityId"))
  .Add(Projections.Property("Code"))
  .Add(Projections.Constant(0), "ID"); // const projection

var list = session
  .CreateCriteria<MyEntity>()
  .SetProjection(projections) // projections
  .SetResultTransformer(new AliasToBeanResultTransformer(typeof(MyEntity)))
  .List<MyEntity>(); 
```

前两个 (EntityId, Code) 表示**映射的** *属性*。最后一个投影“ID”是 const，可以设置为类的**映射**或未**映射**属性“ID”...`MyEntity`

# vim - 在帮助文本中自动禁用拼写检查

> ID：13899677
> 
> 赞同：20
> 
> 时间：2012-12-16T08:18:48.273
> 
> 标签：vim

我已在 vim 中为 .txt 文件启用拼写，但希望在查看帮助文件时设置 nospell，因为我的标准语言设置是德语，所以大多数帮助文本被标记为拼写错误。每当我咨询帮助时，我都必须发出 .set nospell 。有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-16T08:37:37.347

`autocmd`您可以使用文档目录作为文件模式的一部分创建 vim 。例如：

```
autocmd BufEnter /usr/share/vim/vim73/doc/*.txt  set nospell
autocmd BufLeave /usr/share/vim/vim73/doc/*.txt  set spell 
```

进入帮助文件的缓冲区时，第一个条目应关闭拼写检查。当您离开缓冲区时，第二个应该将其重新打开。

有关自动命令 checkout 的更多帮助`:h autocmd`。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-02-20T13:21:32.050

您可以`.vimrc`输入自动命令以在本地禁用帮助文件的拼写。（这实际上是一个文件类型）：

```
autocmd FileType help setlocal nospell 
```

我更喜欢这种方法，因为

1.  它不使用任何硬编码路径
2.  该`nospell`选项仅与当前缓冲区（或窗口）相关联，因此您不必检查是否进入或离开缓冲区。

# css - Google Web 字体在 IE9 上无法正确显示

> ID：13899679
> 
> 赞同：5
> 
> 时间：2012-12-16T08:19:18.633
> 
> 标签：css, internet-explorer-9, google-webfonts

我正在使用谷歌网络字体。除 IE9 外，所有浏览器都正确呈现字体。（我没有在早期版本的 IE 上测试过）。

区别如下：[**IE 9**](http://mojoimage.com/free-image-hosting-view-11.php?id=3317Capture.PNG)与[**Google Chrome**](http://mojoimage.com/free-image-hosting-view-11.php?id=3336Capture2.PNG)

**HTML：**

```
<head>
        <link href='http://fonts.googleapis.com/css?family=Yeseva+One' rel='stylesheet' type='text/css'>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.6.2.min.js"></script>
</head> 
```

**谷歌字体文件内容：**

```
@font-face {
  font-family: 'Yeseva One';
  font-style: normal;
  font-weight: 400;
  src: local('Yeseva One'), 
       local('YesevaOne'), 
       url(http://themes.googleusercontent.com/static/fonts/yesevaone/v6/wVgDKaRrT3DN9VGcOY4orxsxEYwM7FgeyaSgU71cLG0.woff) format('woff');
} 
```

**CSS：**

```
.sf-menu li {
    float:left;
    position:relative;
    text-align:center;
    font-family:'Yeseva One',cursive;
    font-size:17px;
    line-height: 64px;
    border-bottom:1px solid #4A4A4A;
} 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T08:50:21.920

关于这种情况的信息仍然不足，但您似乎是在 IE 9 上本地测试页面。这种情况下，如果您查看开发人员工具 (F12)，部分控制台，您将看到 CSS3317 错误消息。它说@font-face 由于跨站点访问限制而失败。

这仅在 IE 9 的“标准模式”中发生，但这就是`meta`在代码中使用标记时所得到的。

问题只是开发人员的麻烦（除非您正在创建一个应该在本地用户系统上运行的 HTML 应用程序，作为下载的应用程序——在这种情况下，将字体文件包含在应用程序包中）。当您在 HTTP 服务器上上传文件并从那里进行测试时，问题不会出现。

**补充：即使在标准模式下，在 IE 9 上也可以正常工作的** [演示](http://www.cs.tut.fi/~jkorpela/test/yeseva.html)，但是如果你下载它并在 IE 9 上本地打开它，它会失败（你会看到后备字体 Courier）；然后，在开发人员工具中，如果您将 Document Mode 设置为 Quirks，它会再次起作用。– Google 建议您使用由 Google 托管的字体，但它也提供下载并且有非常宽松[的使用规则](http://www.google.com/webfonts/#AboutPlace%3aabout)。然而，下载链接通常只给你一个 TTF 文件（压缩），所以你需要使用像[FontSquirrel](http://www.fontsquirrel.com/)这样的服务来生成其他格式。

# c - Posix 线程属性和分离状态

> ID：13899684
> 
> 赞同：2
> 
> 时间：2012-12-16T08:19:56.660
> 
> 标签：c, attributes, pthreads, posix

今天我遇到了 POSIX 线程属性，当您第一次使用它们时，它们有点奇怪。我有点困惑`pthread_attr_setdetachstate`，它指出：

> POSIX 线程默认处于 Join 状态（与创建它的线程），但为了加入它们，我们必须显式调用`pthread_join()`加入线程。

`pthread_detach`即使线程属性设置为，我们是否需要显式调用`detach`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T08:40:37.933

不，你甚至不应该这样做：

> 尝试分离已经分离的线程会导致未指定的行为。

所以真的做其中任何一个，但不是两者兼而有之。如果您从一开始就知道您不会连接线程，请使用带有属性的变体。根据您的系统，这可能会在线程启动时节省一些时间和内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T08:25:23.990

No, you don't. Either one or the other will suffice.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T08:26:47.120

> Do we need to call `pthread_detach()` explicitly even when the thread attribute is set to detach?

No, it's not necessary, [here's an illustration](http://www.domaigne.com/blog/computing/joinable-and-detached-threads/). Both methods (either creating the thread as detached or `pthread_detach()`ing it) works fine.

# ruby-on-rails - 使用acts_as_shopping_cart 如何实现基本数量编辑？

> ID：13899686
> 
> 赞同：0
> 
> 时间：2012-12-16T08:20:18.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, shopping-cart, acts-as-shopping-cart

act_as_shopping_cart gem 需要两个模型 -`Shopping Cart`和`Shopping Cart Item`.

它允许您像这样访问该项目的属性：

```
<td><%= shopping_cart_item.item.name %></td>
<td><%= shopping_cart_item.item.price %></td>
<td><%= shopping_cart_item.quantity %></td> 
```

但我想允许用户更改数量 - 从下拉菜单中（所以从集合中选择标签）。

但我不太确定如何解决这个问题。

我还想为我的商品添加其他属性——比如商品的尺寸、颜色等。

我希望我的店主能够指定这些东西（即尺寸、颜色等）。

我如何在 的范围内做到这一点`acts_as_shopping_cart`？

谢谢。

**编辑1：**

或者，如果有人对另一个购物车解决方案有更好的建议，可以让我进行基本的结账，我也会很感激。

**编辑 2**

`views/shopping_cart/show.html.erb`

```
<h1>Shopping Cart</h1>

<table class="table table-striped">
  <thead>
        <tr>
            <td>Item</td>
            <td>Price</td>
            <td>Quantity</td>
        </tr>
    </thead>
    <tbody>
        <tr>  
      <%= render :partial => 'shopping_cart_item', :collection => @shopping_cart.shopping_cart_items %>
    </tr>
  </tbody>  
</table>

<div>
    <p>SubTotal: <%= number_to_currency @shopping_cart.subtotal %></p>      
</div>
<div>
    <p>Taxes: <%= number_to_currency @shopping_cart.taxes %></p>
</div>
<div>
    <p>Total: <%= number_to_currency @shopping_cart.total %></p>
</div> 
```

`_shopping_cart_item.html.erb`部分看起来像这样：

```
<td><%= shopping_cart_item.item.name %></td>
<td><%= shopping_cart_item.item.price %></td>
<td><%= shopping_cart_item.quantity %></td> 
```

非常非常基本的购物车 - 但不知道如何从这个移动到具有数量、大小等的实际购物车。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:35:54.013

**数量：**

实际上，我不知道`acts_as_shopping cart`它到底是做什么的。[但无论如何，请查看Agile Web Development with Rails (4ed)](http://koti.kapsi.fi/~jamo/tmp/Pragmatic.Agile.Web.Development.with.Rails.4th.Edition.Mar.2011.pdf)中的“标准”实现，第 117 页。您可以将这些购物车偷到您的应用程序，或整个应用程序。我想这本书是关于你的。:)

**产品特性：**

由于业主的要求，从一开始就澄清问题及其潜在的并发症非常重要。所以你没有麻烦[链接那里](https://stackoverflow.com/questions/13996736/querying-based-on-two-associated-records/13996891)。

任何“属性”都必须知道并仔细分类。可以说，颜色在任何地方都很简单（在美国、非洲或欧洲，红色是红色），但大小 - 不是。什么大小？布料尺寸取决于区域尺寸、文化、布料类型等，可以只是一个值（“M”、“S”或“46”），取决于产品来源...... 3D 尺寸是 3 个数字（可以是英寸, cm, m) 并且取决于销售区域。

因此，由于 OOP 思维，您必须在独立的 ActiveRecord 模型（其中有_many product_items）中编写每个产品的“属性”，但您必须确切地知道如何才能尽可能快地搜索它们。

最后，我认为你完成了类似的事情。

```
size = Size.new(:origin => :us, :value => "m")
size.origin
#=> "us"
size.value
#=> "m"
size.with_analogs # model knows how to translate sizes between each other
#=> [<self>, <#Size @origin: "europe", @value: 46>, <#Size. @origin: "europe", @value: 45.5>, <#Size @origin: "australia", @value: ...>] 
```

因此，尽管产品项目（实际上属于）只有一个特定尺寸，但您可以找到类似尺寸的类似商品，如下所示：

```
product = Product.find(1)
Product.where(:name => "%#{product.name}", :size => {:id => [product.size.with_analogs.map(&:id)]}) 
```

或者你可以在数据库中存储常见的测量学习 STI 如何翻译它们，但它有点复杂。

```
class Size
class EuropeSize < Size     # STI
class UsSize < Size         # STI
class AustraliaSize < Size  # STI

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T04:49:44.910

这是我添加/编辑数量的方法

1.  在商店页面上，我创建了一个新的购物车并将其 id 存储在会话中
2.  将商品添加到购物车是使用 Ajax 调用处理的，该调用将返回新的购物车商品 html 以更新标题中的 div
3.  在结帐页面上，每个项目都有数量编辑文本框。
4.  在更改数量时，我使用新数量和 product_id 进行 ajax 调用（您可以使用 cart_item_id 来完成）

# c# - Outlook 2007 联系人项目上下文菜单

> ID：13899692
> 
> 赞同：1
> 
> 时间：2012-12-16T08:21:17.023
> 
> 标签：c#, outlook, outlook-addin, outlook-2007

我想自定义联系人上下文菜单，我知道我必须使用`CommandBars`方法。[这种方法不是很有用](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.applicationevents_11_event.itemcontextmenudisplay%28v=office.12%29.aspx)。当我单击联系人项目并处理单击事件时，如何以编程方式添加两个按钮。

我想为每个事件添加我的个性化呼叫 (TAPI) 和日志 (TAPI)。单击一个按钮后如何检索联系人数据？

我今天需要这个，明天最多。我的工作项目需要这个……而且我只有一周的时间。我很乐意提供很多示例，但它们应该是我可以根据需要复制和修改它们的示例。我在 MSDN 论坛上问过，真的很失望，没有人回答，我把我的无用论坛黑名单插入了。所以我希望有人给我一个答案。

如果有任何回报，我将解释您如何使用**Atapi Julmar**创建的库从 Outlook 或 c# 中的任何其他应用程序进行调用。对于那些感兴趣的人，我在桌面上创建了一个隐藏的栏，您可以从中使用电话**innovaphone + tapi**向员工拨打内部电话。因此，如果您有任何信息，我会给您作为回报，否则您将离开我的主题。

# php - 如何计算通用数组中有多少条相同的韧带$key = $val？

> ID：13899693
> 
> 赞同：-1
> 
> 时间：2012-12-16T08:21:24.780
> 
> 标签：php

我有数组：

```
$arr = array();
$arr[0] = array(2628927 => "8250843");
$arr[1] = array(2628927 => "8250843");
$arr[2] = array(2783907 => "8250843");
$arr[3] = array(2783907 => "8250843");
$arr[4] = array(2648250 => "8250843");
$arr[5] = array(2628927 => "8250843");

$arr1 = array(); 
```

独特的韧带**键=>**我用脚本得到的值

```
foreach($arr as $a)
{
    if(!in_array($a, $arr1)){
        $arr1[] = $a;
    }
} 
```

比 i 输出值唯一韧带**键=> 值**：

```
foreach ($arr1 as $keys => $elms ) {
foreach ( $elms as $key => $val ) {
echo "$key = $val<br>"; 
```

**如何计算通用数组$arr中有多少条相同的韧带$key = $val？**

```
}
} 
```

*例如计数 2628927 => "8250843" 将是 3*

**怎么得到这个？**

***如果您想投票，请给出答案。***

***非常感谢）***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:41:47.970

如果您的预期结果是**3**，请尝试以下操作：

```
$count = count(array_unique(array_map('serialize', $arr))); 
```

***编辑：***

```
function foo($arr, $target) {
  $data = array_count_values(array_map('serialize', $arr));
  $key = serialize($target);
  return isset($data[$key]) ? $data[$key] : 0;
}

$arr = array();
$arr[0] = array(2628927 => "8250843");
$arr[1] = array(2628927 => "8250843");
$arr[2] = array(2783907 => "8250843");
$arr[3] = array(2783907 => "8250843");
$arr[4] = array(2648250 => "8250843");
$arr[5] = array(2628927 => "8250843");

echo foo($arr, array(2628927 => "8250843")); // the result is 3 
```

# java - 按下 setOnTouchListener 时获取传感器数据时出错

> ID：13899695
> 
> 赞同：2
> 
> 时间：2012-12-16T08:21:41.063
> 
> 标签：java, android, vector, save, accelerometer

我有 Android 代码，我试图在按下按钮时从手机获取加速度计数据。这是我的代码：

```
public class MainActivity extends Activity implements SensorEventListener{

private SensorManager aSensorManager;
private TextView ax;
private TextView ay;
private TextView az;
private float xa ;
private float ya ;
private float za ;
public Vector<Float> vecA_x;

private Vibrator v;
long[] pattern = { 0, 200, 500 };
long cap = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
   // dataBase = DataBaseManager;
    Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
     ax = (TextView) findViewById(R.id.textView4);
     ay = (TextView) findViewById(R.id.textView5);
     az = (TextView) findViewById(R.id.textView6);
     aSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
     findViewById(R.id.button1).setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
            if(event.getAction() == MotionEvent.ACTION_DOWN){
                start();
                return true;
            }
            if(event.getAction() == MotionEvent.ACTION_UP){
                //vibe(pattern);
                onPause();
                return true;
            }
            return false;
        }
    });
}

public void onSensorChanged(SensorEvent event){
    if(event.sensor.getType() == Sensor.TYPE_ACCELEROMETER){
        float x=event.values[0]; 
        vecA_x.addElement(x); // here the error
        runAcce(event);
    }
}
}
private void vibe(long[] p){
    v.vibrate(p, -1);
}
private void runAcce(SensorEvent event){
    float[] values = event.values;
    xa = values[0];  gx.setText((xa) + "");
    ya = values[1];  gy.setText((ya) + "");
    za = values[2];  gz.setText((za) + "");

}

public void onAccuracyChanged(Sensor sensor, int accuracy){

}
private void start(){
    aSensorManager.registerListener(this, aSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),SensorManager.SENSOR_DELAY_NORMAL);
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
@Override
protected void onResume(){
    super.onResume();
}
@Override
protected void onPause(){
    super.onPause();
    aSensorManager.unregisterListener(this);
} 
```

}

当它在我的设备上运行时，当我按下按钮时它会强制关闭。我在这里是错误代码：

```
float x=event.values[0]; 
        vecA_x.addElement(x); // here the error 
```

我不知道该怎么办，我的意思是vector是动态数组并且能够捕获值。我的问题是：如何在我的代码中获取传感器数据以进行矢量化？我应该写什么？请帮我。

# javascript - PhoneGap application that communicate with a remote DB

> ID：13899702
> 
> 赞同：2
> 
> 时间：2012-12-16T08:23:09.853
> 
> 标签：javascript, android, ios, sql, cordova

I build phoneGap app, its a facebook-style app, the idea of the is that users can post messages and their friends can comment on the message. The app based on html, js and phoneGap. I have a server with a mysql database. My question is how can i pull and push a data from the remote DB. I'm a begginer so I not really sure how to do this. I need the page to be updated in real time, even after he finished loading

I Googled it and I realized I needed for that use Ajax, is that true? Can anyone give me guidance?

Thanks :)

Sorry about my English..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:34:11.170

我可以看到两种方法：

*   实现您自己的提供推送、拉取和通知服务的后端服务器。此后端服务器与您的数据库对话并提供可从 JavaScript 访问的服务（是的，可能使用 Ajax。请注意，Ajax 是一个概念，您需要选择一个实现，例如由 jQuery/jqMobile 框架提供的实现） . 为了速度和易用性，请考虑使用 dotCloud.com 等平台提供商，在那里您可以利用预配置的服务器并保持在相同的编程语言/环境中（例如使用 Node.js 和 dotCloud 的 MySQL 服务）。

*   使用开箱即用的后端数据服务器，例如 parse.com 或 deployd.com。这不仅为您提供了一个现成的框架和远程数据存储和实时客户端更新所需的所有接口，而且还确保您的应用程序能够扩展。

如果您想学习如何对后端服务器进行编程，第一种方法更适合，但它会让您有责任使其安全和可扩展。

如果您不想关心如何构建和管理后端服务器的细节，而真正专注于启动和运行您的应用程序，则第二种方法似乎更合适。

顺便说一句：我与提到的任何平台或产品都没有从属关系，只是将它们的名称作为示例。可能存在其他类似的产品，它们可能更合适或缺乏商业支持。

编辑：错别字，正确的域名

# wpf - WPF window stretching incorrectly/weird behavior

> ID：13899704
> 
> 赞同：0
> 
> 时间：2012-12-16T08:23:47.623
> 
> 标签：wpf, layout, tabcontrol, stackpanel, dockpanel

I've had a weird behavior in WPF for awhile now, and I haven't been able to trace down where the problem is. In a nutshell, when I resize the window from the bottom or right, everything works as expected. But if I happen to grab it from the top or left, it stretches the window bu not the window contents. I've tried playing around wirh `HorizontalContentAlignment`, `HorizontalAlignment`, `VerticalContentAlignment`, & `VerticalAlignment` to no avail. Anybody have any ideas where the issue lies?

**Resize from Left:** ![](../Images/f9b9f14d864b195255daa4eb298fc4fd.png)

**Resize from Top:** ![](../Images/a16daef9942e6f1b37c1d564b6fb80f1.png)

**Resize from Right/Bottom:** ![](../Images/d28413c5fc548a0437d048dd05af12f5.png)

Here's the XAML I'm using, with the inner controls removed for brevity:

**Window XAML settings:**

```
<Window x:Class="Agent_Template.MainWindow"
    Width="{Binding Source={x:Static main:Properties.Settings.Default}, Path=Width, Mode=TwoWay}" 
    FontFamily="{Binding Source={x:Static main:Properties.Settings.Default}, Path=currentFont, Mode=TwoWay}"
    FontSize="{Binding Source={x:Static main:Properties.Settings.Default}, Path=currentFontSize, Mode=TwoWay}"
    Foreground="{Binding Source={x:Static main:Properties.Settings.Default}, Path=foregroundColor, Mode=TwoWay}"
    LocationChanged="Window_LocationChanged" Tag="parentWindow"
    Top="{Binding Source={x:Static main:Properties.Settings.Default}, Path=Top, Mode=TwoWay}"
    Topmost="False"> 
```

**Container XAML Settings:**

```
<DockPanel Name="rvraDockPanel" Background="{Binding ElementName=BackColorPicker, Path=CurrentColor}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Menu Height="Auto" DockPanel.Dock="Top">
<Menu.ItemsPanel>
            <ItemsPanelTemplate>
                <DockPanel HorizontalAlignment="Stretch" />
            </ItemsPanelTemplate>
        </Menu.ItemsPanel>
<WrapPanel Name="buttonDock" Grid.Column="0" HorizontalAlignment="Center" DockPanel.Dock="Bottom" Orientation="Horizontal">
<StatusBar Name="bottomStatusBar" Height="28" MinWidth="{Binding ElementName=buttonPanel, Path=ActualWidth}" Background="{Binding ElementName=clearButton, Path=Background}" BorderBrush="White" DockPanel.Dock="Bottom" Focusable="False" FontFamily="{Binding ElementName=fontSelector, Path=SelectedValue}" FontWeight="Bold" Foreground="Blue">
        <Grid Width="{Binding ElementName=bottomStatusBar, Path=ActualWidth}" HorizontalAlignment="Center">
<TabControl Name="tabSelection" HorizontalContentAlignment="Center" Background="{Binding ElementName=BackColorPicker, Path=CurrentColor}"> 
```

**Update:** LocationChanged code as requested

```
 private void Window_LocationChanged(object sender, EventArgs e)
    {
        if (Properties.Settings.Default.windowSnap == true)
        {
            RealignChild();
        }
    }

    /// <summary>
    /// Checks position of any SlideOut windows in relation to main
    /// program window and aligns child window next to main window.
    /// </summary>
    private void RealignChild()
    {
        foreach (Window win in App.Current.Windows)
        {
            if (!win.IsFocused && win.Tag.ToString() == "childWindow" && win.Left < this.Left)
            {
                win.Left = this.Left - win.Width;                    
            }

            if (!win.IsFocused && win.Tag.ToString() == "childWindow" && win.Left > this.Left)
            {
                win.Left = this.Left + this.Width;                   
            }

            win.Top = this.Top;
        }
    } 
```

Turns out this was the problem, as when I removed the XAML part of it the problem was corrected. I *do* want to keep this method though, as there's a method that depends upon it to keep `ChildWindows` of the `MainWindow` locked to the edge. I would like to continue using this if possible.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:23:33.967

您是否使用自定义窗口调整大小方法？根据我自己的经验，我知道，除非您使用默认的 Windows ResizeMethod（如 中`WindowStyle = AnythingButNone`）从任何地方调整大小，否则底部/右侧会遇到问题（微软的错，我确信谷歌搜索会验证这一点）。

如果您没有使用默认的 Windows ResizeMethod，您可以发布您的代码吗？否则，我必须假设问题出在您的 Windows 属性或包含整个窗口的基本元素之一中。

# javascript - Javascript doesn't without using onload event

> ID：13899707
> 
> 赞同：0
> 
> 时间：2012-12-16T08:24:28.583
> 
> 标签：javascript

The code that i am working on is this-

```
var winW;
if (document.body && document.body.offsetWidth) {
 winW = document.body.offsetWidth;
}
if (document.compatMode=='CSS1Compat' &&
    document.documentElement &&
    document.documentElement.offsetWidth ) {
 winW = document.documentElement.offsetWidth;
}
if (window.innerWidth && window.innerHeight) {
 winW = window.innerWidth;
}
if (winW = 1265) {
function setPosition()
{
document.getElementById("wblogo").style.left="1050px";
}
} 
```

The code works perfectly when i use it with the `onload` event in the `body` tag.

But i want to use this when the page is being loaded. So i used the following code-

```
var winW;
if (document.body && document.body.offsetWidth) {
 winW = document.body.offsetWidth;
}
if (document.compatMode=='CSS1Compat' &&
    document.documentElement &&
    document.documentElement.offsetWidth ) {
 winW = document.documentElement.offsetWidth;
}
if (window.innerWidth && window.innerHeight) {
 winW = window.innerWidth;
}
if (winW = 1265) {
document.getElementById("wblogo").style.left="1050px";
} 
```

But this code doesn't work. Please help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T08:33:12.917

我的猜测是，当您删除 时`onload`，您将脚本留在`head`了文档的部分中。您尝试使用的元素 ( `document.body`, 您的`wblogo`元素)*尚不存在*，因此代码无法与它们交互。当您使用`onload`时，您的代码并没有立即运行，而是在加载所有图像等之后的页面加载周期很晚，因此元素确实存在**。**

相反，将您的代码放在文档**末尾**`script`的标签中，就在结束标签之前。这样，您尝试使用的元素就会存在。**`</body>`**

 **更多的：

*   [YUI 网站加速最佳实践](http://developer.yahoo.com/performance/rules.html)
*   [Google on DOM 元素何时可用](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)**

# c# - How to improve code for get calling method in C#

> ID：13899708
> 
> 赞同：3
> 
> 时间：2012-12-16T08:24:52.423
> 
> 标签：c#, mef, stack-trace, silverlight-5.0

We have a "logger" class which have log method that get the log message, and wrote to the log the message and the calling method, first we did the following also to send to the log method new parameter `Method.Base.GetCurrentMethod()`. I found another way, to use Relection.MethodBase:

```
public void Log(string message)
{
   stackTrace = new StackTrace();
   string methodName = stackTrace.GetFrame(1).GetMethod().Name;
   ....
} 
```

But I've a problem, that every calling for the log method, I forced to create new instance from `StackTrace`, and when I trying to create the instance in the constructor, I get that the method name is `InvokeMethod`.

We're using MEF in our project. Any ideas how to improve the code?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T09:51:13.323

如果您使用的是最新最好的 C# (5) 版本，它会通过调用站点属性内置到语言中。你会像这样使用它：

```
public void Log(string message, [CallerMemberName] string methodName = null)
{
} 
```

您在不提供第二个参数的情况下调用该方法，C# 编译器将自动为您填充它。您可以使用以下 Call-Site 属性：[CallerMemberName](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callermembernameattribute.aspx)、[CallerLineNumber](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callerlinenumberattribute.aspx)和[CallerFilePath](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callerlinenumberattribute.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T08:46:19.840

我建议对“信息日志”（没有异常详细信息的日志）使用完整的堆栈跟踪，使用

```
StackTrace stackTrace = new StackTrace(true); 
string stackTraceString = stackTrace.ToString(); 
```

将为您提供带有源信息的完整堆栈跟踪。

但是当你有日志有异常实例时，例如catch语句中的日志，你可以使用堆栈跟踪和异常本身的内部异常信息，而不仅仅是调用方法。

```
StackTrace stackTrace = new StackTrace(ex, true); 
string stackTraceString = stackTrace.ToString(); 
```

虽然 (ex) 是您需要它的堆栈跟踪的例外。

*** 编辑 ***

或者您可以使用：

Environment.StackTrace，它是一个字符串属性！但是包含get_StackTrace的调用，你可以写一个简单的代码来删除这部分，但我认为你可以根据需要制作堆栈跟踪对象，这没什么大不了的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T08:50:15.530

在实施您的解决方案之前，您应该了解方法内联。

看看Scott Hanselman 的[这篇文章](http://www.hanselman.com/blog/ReleaseISNOTDebug64bitOptimizationsAndCMethodInliningInReleaseBuildCallStacks.aspx)，他尝试实现几乎相同的功能。更多信息[在这里](http://www.ademiller.com/blogs/tech/2008/08/c-inline-methods-and-optimization/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T09:51:48.863

您可以为此目的使用 PostSharp。在[此](http://doc.sharpcrafters.com/postsharp-2.1/##PostSharp-2.1.chm/html/b3b73c15-a14c-470e-a740-c0d916676d03.htm)页面上查看有关如何改进代码的示例。

# git - Getting rid of some sensitive data in a git repo

> ID：13899713
> 
> 赞同：1
> 
> 时间：2012-12-16T08:25:50.243
> 
> 标签：git

If you realize that you saved some sensitive data (user:pass, an access token etc) in some version of the git repositiory, what can you do to get rid of it, without sacrificing the whole repository?. Is it possible to scrap that current revision only. Will git figure out the gaps automatically?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T08:58:39.027

GitHub 上有一篇关于它的好文章：

[https://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)

本质上，您用于`git filter-branch`重写项目的历史记录，删除包含敏感内容的文件。

# javascript - Javascript: windows,document,body mouseup listen issue while dragging

> ID：13899714
> 
> 赞同：0
> 
> 时间：2012-12-16T08:25:57.437
> 
> 标签：javascript

[http://jsfiddle.net/TMmgt/4/](http://jsfiddle.net/TMmgt/4/)

html:

```
<a href="javascript:void(0);">some text</a>​ 
```

js:

```
var down=false;    

$('a').mousedown(function(){
    down=true;
});

$('a').mouseup(function(){
    down=false;
});

$('a').mousemove(function(){
    if(down){
       console.log('Mouse is still down!');
       // do something        
    }
});

$(window,document,'body').mouseup(function(){
    down=false;
});​ 
```

Drag link anywhere in the body and release, then move cursor over the link again. Mouse move will still be showing that `down` is `true`, because `mouseup` was not triggered and haven't changed it to `false`. Then just click anywhere in body and move over link again. Now `down` is `true`

Any workaround for this issue?

As i understand, it's because of default browser `<a>` drag behavior.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:39:13.930

[http://jsfiddle.net/TMmgt/5/](http://jsfiddle.net/TMmgt/5/)

```
var down=false;

$('a').mousedown(function(e){
    e.preventDefault();
    down=true;
});

$('body').mouseup(function(e){
    e.preventDefault();
    down=false;
    check();
});

$('a').mousemove(function(e){
    e.preventDefault();
    if(down){
       console.log('Mouse is still down!');
       // do something        
    }
});

function check(){
    if(down==false) {
    console.log('Mouse is up!');
}
} 
```

​</p>

# php - Secured Communication between wcf client and php soap server

> ID：13899715
> 
> 赞同：0
> 
> 时间：2012-12-16T08:26:28.693
> 
> 标签：php, wcf, security, ssl

Currently I have a non secured communication between a php soap server and a wcf client. I would like to secure this communication in a way that will include authentication and encryption.

I am trying to find any tutorial or guide that will explain how to configure the php soap server to use ssl. The php server is running on debian. I created the .pem key using openSSL.

How can I use the .pem key with the wcf client (which only uses .cer).

# excel - Date - time format issue in excel using VBScript

> ID：13899723
> 
> 赞同：0
> 
> 时间：2012-12-16T08:27:52.733
> 
> 标签：excel, vbscript, vba

The following code is used to calculate the duration between two dates, for example "*11/13/2012 11:21:41 AM*" and "*11/14/2012 2:32:59 PM*". The function is producing the correct output, in this case: **1:03:11** (in dd:hh:mm format, so 1 day, 3 hours, and 11 minutes). After calculation the script stores this value into a Cell, which up until now is perfect, and exactly the format I want. After that, another script runs and moves that cells value depending on the needs and some logic in the script, and stores it to the required cell dynamically. The problem I'm having is, the duration is getting "AM" or "PM" added to the value, which is incorrect, since this is a very specific (and FORMATTED) DURATION, and NOT an actual time of day, which Excel seems to be treating as a TIME value instead.

***Here is the code used to measure the durations:***

```
Function TimeSpan(dt1,dt2)
Dim dtTemp

objExcel1.Application.ScreenUpdating = False
    If (IsDate(dt1) And IsDate(dt2)) = False Then
        TimeSpan = "00:00:00"
        Exit Function
    End If

    If dt2 < dt1 Then
        dtTemp = dt2
        dt2 = dt1
        dt1 = dt2
    End If
            TimeSpan = objExcel1.Application.WorksheetFunction.Text((dt2 - dt1), "dd:hh:mm")'"dd:hh:mm:ss"

objExcel1.Application.ScreenUpdating = False
End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T23:30:25.410

查看`FormatDateTime()`Excel 中的函数。这可能会帮助您仅在单元​​格中存储您想要的内容。其次，当我使用 Excel 进行大量日期格式化时，我确保单元格包含我希望放入单元格中的数据类型的 FORMAT 信息。这可能会对您产生影响。在我看来，Excel 将您的值视为 TIME 值，可能是在“常规”单元格格式规则下。设置您将这些数据放入的单元格，以使用特定的“STRING”格式。这样，Excel 就不会对您的数据做出任何假设，然后您可以以任何您认为合适的方式解析它。

# solr - Solr 刻面：不一致的 JSON 格式

> ID：13899724
> 
> 赞同：14
> 
> 时间：2012-12-16T08:28:06.113
> 
> 标签：solr, lucene, facet

我的 solr 架构中有以下两个字段：

```
<field name="brand_id"     type="string" indexed="true" stored="true" />
<field name="category_id"  type="string" indexed="true" stored="true" /> 
```

当我提出启用构面的请求时（brand_id 上的构面） [http://example.com/solr/select?wt=json&facet=true&facet.mincount=1&facet.field=brand_id&q=](http://example.com/solr/select?wt=json&facet=true&facet.mincount=1&facet.field=brand_id&q=) * :*

分面输出以对象表示法返回：

```
"facet_counts": {
    "facet_queries": { }
    "facet_fields": {
         "brand_id": [
            {"1350492":14},
            {"1350578":12},
            {"1350600":11},
            {"1350617":8}
        ]
    }
} 
```

但是，使用 'category_id' 作为构面字段重复相同的请求会返回一个数组表示法 [http://example.com/solr/select?wt=json&facet=true&facet.mincount=1&facet.field=category_id&q=](http://example.com/solr/select?wt=json&facet=true&facet.mincount=1&facet.field=category_id&q=) * :*

```
"facet_counts":{
    "facet_queries":{},
    "facet_fields":{
        "category_id":[
            "230",20,
            "259",13,
            "154",12,
            "249",11
        ]
    }
} 
```

有没有办法强制对象符号格式？我正在使用 Solr 3.6

**- 更新 -**

使用 XML 格式返回正确的结果：

```
<lst name="facet_counts">
<lst name="facet_queries"/>
<lst name="facet_fields">
    <lst name="brand_id">
        <int name="269115">136</int>
        <int name="269394">110</int>
    </lst>

    <lst name="category_id">
        <int name="1348814">228</int>
        <int name="1350591">218</int>
    </lst> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-11T10:07:51.043

正如 Bill Dueber 所提到的，您可以使用 json.nl 参数格式化 JSON 输出。检查此页面，[https://wiki.apache.org/solr/SolJSON#JSON_specific_parameters](https://wiki.apache.org/solr/SolJSON#JSON_specific_parameters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-01T17:23:58.593

如果您使用 JSON 响应编写器，则可以将`json.nl`参数添加到查询字符串以格式化构面计数。

`json.nl=arrmap`将格式化为`[{"facetValue1": facetCount1}, {"facetValue2": facetCount2}]`.

`json.nl=map`将格式化为`{"facetValue1": facetCount1, "facetValue2": facetCount2}`.

响应作者的文档，特别是 json.nl（nl = 命名列表）可以在这里找到：[https ://cwiki.apache.org/confluence/display/solr/Response+Writers#ResponseWriters-JSON-SpecificParameters](https://cwiki.apache.org/confluence/display/solr/Response+Writers#ResponseWriters-JSON-SpecificParameters)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T10:23:09.737

不久前我也经历过类似的事情。

尝试将标签 multiValued=false 添加到字段的定义中。我记得为我修好了。

不过，您可能必须重新索引。

# statistics - 这会产生泊松过程吗？

> ID：13899725
> 
> 赞同：2
> 
> 时间：2012-12-16T08:28:11.943
> 
> 标签：statistics

我想模拟一条（非常长的）巴士路线，其中巴士随着时间的推移在路线上随机分布，但巴士到达我的巴士站的平均时间正好是 20 分钟。为此，我创建了一条 2000 万分钟的线性时间带，并在该时间间隔内随机分散了 100 万辆公共汽车。我只是将标准随机浮点生成器的输出（在区间 [0,1) 上的均匀分布）乘以 2000 万，以生成 100 万次随机分布在 2000 万分钟内的到达时间，时间线上的所有点的可能性均等。这样一来，100 万辆公交车到站之间的所有时间加起来总长度为 2000 万分钟，公交车之间平均等待 20 分钟。

我想知道的是，这个简单的过程是否会为公交车到达创建泊松过程。或者这会是其他一些过程吗？产生的工艺参数是什么？有比我更了解统计知识的人会告诉我由时间轴上如此简单的均匀分布事件分散所产生的统计过程吗？这是一种易于使用的编程技术，所以我想确保我没有误解它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:52:48.517

嗯，这有两个方面：

*   如果您采用无限分钟和无限巴士的限制，那么是的，您确实有泊松过程

*   您描述的过程接近但不完全是泊松过程，因为由于总线数量有限，在过程中会产生一些“记忆”，因此存在一些偏差。

但是，当您可以通过使用例如 gsl (http://www.gnu.org/software/gsl/) 直接获得偏差来生成指数偏差时，为什么要使用这样的过程来近似泊松分布？

# python - How do I configure my system so that Windows Python 2.7 CGI scripts see user-defined packages?

> ID：13899730
> 
> 赞同：0
> 
> 时间：2012-12-16T08:29:15.153
> 
> 标签：python, windows, apache, cgi

I have a Python script that uses some of my own packages in my own library which is stored in a non-standard folder: k:\lib. When running the script from the command-line the interpreter can find my packages because I have set the PYTHONPATH environment variable.

However, when running the script as a CGI script, the environment variable does not seem to be read, so my question is what can I do about this?

One solution I read was to put

```
import sys
sys.path.append( 'k:\\lib' ) 
```

at the top of my script but this doesn't work - the next line in my script is

```
import site_consts 
```

where site_consts is in k:\lib but I get the error message "no module named site_consts".

Not sure if this is Python problem or a Windows or an Apache one.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:44:27.670

您可以将文件添加到文档中描述[的](http://docs.python.org/2/library/site.html#module-site)`name.pth`四个目录之一。

# java - BufferWriter 不转换大于 383 的整数

> ID：13899743
> 
> 赞同：0
> 
> 时间：2012-12-16T08:31:56.340
> 
> 标签：java, bytearray, byte, bufferedwriter

我正在尝试将数字转换为字节数组形式。有一个简单的技巧是这样的：

```
int input = number;    
byte[] bytes = ByteBuffer.allocate(4).putInt(input).array();

for(int i = 0 ; i < bytes.length ; i++)
            System.out.println(bytes[i]); 
```

就像一个魅力，除了当我超过整数值 383（字节：0 0 1 127）时，它会在将其写入文件时自动生成一个整数值为 319（字节：0 0 1 63）的数组：

```
BufferedWriter out;

for(int i = 0 ; i < input.length ; i++)
            out.write(input[i]); 
```

有解决办法吗？

# mysql - 按日期时间mysql排序

> ID：13899744
> 
> 赞同：13
> 
> 时间：2012-12-16T08:32:04.773
> 
> 标签：mysql, datetime, sql-order-by

我有一个包含日期时间字段类型的表，我想对选择语法进行排序取决于它的降序，如下所示：

> 2012-12-12 01:44:20
> 
> 2012-12-11 01:44:40
> 
> 2012-12-10 01:40:36
> 
> 2012-12-09 12:28:19
> 
> 2012-12-09 12:19:21
> 
> 2012-12-09 12:11:50
> 
> 2012-12-09 12:00:11
> 
> 2012-12-09 11:59:26
> 
> 2012-12-09 11:57:08
> 
> 2012-12-09 11:55:21

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-16T08:33:05.110

```
ORDER BY columnname DESC 
```

**达达！**

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-06-02T21:03:46.793

```
ORDER BY UNIX_TIMESTAMP(columnname) DESC 
```

`UNIX_TIMESTAMP`是必需的，因为 mysql 将它们作为字符串进行测试（例如出现`9:00`在 之后`16:00`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-16T09:54:40.167

在我的情况下*dtEvent*字段是日期时间类型。这是我找到的唯一解决方案：

```
SELECT myTable.recordId, myTable.dtEvent
FROM myTable
WHERE myTable.dtEvent IS NOT NULL
ORDER BY CAST(YEAR(myTable.dtEvent) AS UNSIGNED),
    CAST(MONTH(myTable.dtEvent) AS UNSIGNED),
    CAST(DAY(myTable.dtEvent) AS UNSIGNED) 
LIMIT 100; 
```

# css - 如何在 sharepoint 2010 中显示/隐藏功能区和快速启动？

> ID：13899745
> 
> 赞同：2
> 
> 时间：2012-12-16T08:32:05.087
> 
> 标签：css, sharepoint, sharepoint-2010

我正在使用 Sharepoint 2010 构建一个站点，但不幸的是，就服务器端编辑而言，我的选择非常有限（我的工作场所从 sharepoint 服务器中删除了一些功能）。

现在我在标签中显示不同的列表（使用 EasyTabs 5.0 脚本），为此我需要在没有任何 UI 的情况下显示列表 - 没有功能区，也没有快速启动。我找到了摆脱两者的方法，但现在我发现自己陷入了新的困境 - 我无法使用功能区编辑列表，因为我不知道如何将其恢复！

隐藏功能区和/或我使用具有以下代码的内容编辑器部件：

```
<style type="text/css"> 

#s4-ribbonrow, .ms-cui-topBar2, .s4-notdlg, .s4-pr s4-ribbonrowhidetitle, .s4-notdlg noindex, #ms-cui-ribbonTopBars, #s4-titlerow, #s4-pr s4-notdlg s4-titlerowhidetitle, #s4-leftpanel-content {display:none !important;}
    .s4-ca{margin-left:0px !important; margin-right:0px !important;}

</style> 
```

关于如何现在编辑我的列表或者如何取回功能区的任何想法？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:46:13.517

没关系，明白了。您可以使用共享点设计器编辑页面 - 在那里您可以看到带有 CSS 代码的隐藏 Web 部件并对其进行编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T20:51:07.753

注意 - 您应该使用脚本来执行此操作 - 这样您可以添加 Web 部件以在需要时执行正确的 CSS。

最好的方法是使用文本文件来存储 CSS（或脚本）。添加到文档库，然后使用内容编辑器 Web 部件执行它。

例如，隐藏左侧导航（所有站点）：

```
<style type="text/css">
#s4-leftpanel { display:none !important; }
.s4-ca { margin-left:0px !important; }
</style> 
```

要在发布站点中显示左侧导航：

```
<style type="text/css">
#s4-leftpanel{
width:155px;
float:left;
display:inline !important;
}
.s4-ca{
/* [ReplaceColor(themeColor:"Light1")] */ background:#fff;
margin-left:155px !important;
margin-right:0px;
min-height:324px;
}
</style> 
```

使用这种方法，您不必嵌入东西 - 您可以自动将 Web 部件添加到页面布局中。

大卫·斯特林 davidmsterling.blogspot.com www.sterling-consulting.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T11:51:41.590

要在不借助 SharePoint 设计器的情况下删除内容编辑器 Web 部件，您只需使用 Web 部件页面维护页面。例如，如果您的页面是

```
http://stackoverflow.com/SitePages/NoRibbon.aspx 
```

只需将其更改为

```
http://stackoverflow.com/SitePages/NoRibbon.aspx?Contents=1 
```

在 Web 部件页面维护页面中，检查内容编辑器 Web 部件并单击“删除”。现在，您将丢失您在内容编辑器 Web 部件中放置的代码，但您将恢复您的页面。在使用 CSS 和 JavaScript 时，我总是从记事本或 SP Designer 复制和粘贴，以防我不得不像这样吹走 CEWP。

# shell - 使用 xargs 将查找结果中的目录 mv 到另一个目录中

> ID：13899746
> 
> 赞同：34
> 
> 时间：2012-12-16T08:32:05.607
> 
> 标签：shell, find, xargs, mv

我有以下命令：

```
find . -type d -mtime 0 -exec mv {} /path/to/target-dir \; 
```

这会将创建的目录移动到另一个目录。我怎样才能使用`xargs`而不是`exec`做同样的事情。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-07-20T16:53:02.783

使用[BSD xargs](http://www.unix.com/man-page/freebsd/1/xargs/)（适用于**OS X**和 FreeBSD），您可以使用`-J`为此构建的：

```
find . -name some_pattern -print0 | xargs -0 -J % mv % target_location 
```

这会将任何匹配`some_pattern`的东西`.`移到`target_location`

对于[GNU xargs](http://www.unix.com/man-page/linux/1/xargs/)（适用于**Linux**和 Cygwin），请`-I`改用：

```
find . -name some_pattern -print0 | xargs -0 -I % mv % target_location 
```

`-i`GNU xargs的 deprecated选项暗示`-I{}`并且可以按如下方式使用：

```
find . -name some_pattern -print0 | xargs -0 -i mv {} target_location 
```

请注意，BSD xargs 也有一个`-I`选项，但它还有其他作用。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-16T08:42:07.810

如果你有 GNU [`mv`](http://www.gnu.org/software/coreutils/manual/html_node/mv-invocation.html)(and `find`and `xargs`)，你可以使用`-t`选项 to `mv`(and `-print0`for `find`and `-0`for `xargs`):

```
find . -type d -mtime -0 -print0 | xargs -0 mv -t /path/to/target-dir 
```

* * *

请注意，现代版本`find`（与 POSIX 2008 兼容）支持`+`代替使用，并且行为与不使用`;`大致相同：`xargs``xargs`

```
find . -type d -mtime -0 -exec mv -t /path/to/target-dir {} + 
```

这使得将`find`方便数量的文件（目录）名称组合到程序的单个调用中。您无法控制传递给`mv`该`xargs`提供的参数数量，但您实际上很少需要它。这仍然取决于`-t`GNU 的选项`mv`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-13T09:19:10.317

```
find ./ -maxdepth 1 -name "some-dir" -type d -print0 | xargs -0r mv -t x/ 
```

**find**：使用 option `-print0`，输出将以 '\0' 结尾；

**xargs**：使用 option `-0`，它会将 args 拆分为 '\0' 但空格，`-r`表示 no-run-if-empty，因此如果`find`没有得到任何输出，您将不会收到任何错误。（这`-r`是一个 GNU 扩展。）

当我不确定目标文件是否存在时，我通常在脚本中使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-20T02:23:09.530

`find`这不是一个很好的工具。我想您想将所有子目录移动到另一个目录中。`find`会输出类似的东西

```
./a
./a/b
./a/b/c
./a/b/c/d 
```

首先移动后`./a`，您只会收到有关“没有这样的文件或目录”所有子目录的错误。

您应该只使用`mv */ /another/place`-- 通配符上的尾部斜杠将扩展限制为仅 dirs。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T09:37:56.343

如果您不使用 GNU mv，则可以使用该命令：

```
find . -depth -type d -mtime 0 -exec bash -c 'declare -a array;j=1;for i; do array[$j]="$i"; j=$((j+1));done; mv "${array[*]}" /path/to/target-dir' arg0 {} + 
```

否则，这是一个不需要 xargs 的更简单的解决方案：

```
find . -depth -type d -mtime 0 -exec mv -t /path/to/target-dir {} + 
```

请注意，我添加了 -depth 否则在同时处理目录及其子目录之一时会出现错误。

# android - 具有多个片段的操作栏：片段布局向上移动

> ID：13899748
> 
> 赞同：1
> 
> 时间：2012-12-16T08:32:47.770
> 
> 标签：android, android-fragments

我有一个运行以下代码的操作栏：

```
public class MainActivity extends Activity {

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().requestFeature(Window.FEATURE_ACTION_BAR);

    ActionBar bar = getActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayShowTitleEnabled(false);

    bar.addTab(bar.newTab()
        .setText("Fragment_1")
        .setTabListener(
                new TabListener<ExampleFragment>(this, "Fragment_1", ExampleFragment.class)));
  .
  .
  .
   <Listener code that add the Fragment via FragmentTransaction>..
 }

 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);

    MenuItem mSearchItem = menu.findItem(R.id.menu_fragments);
    edit = (EditText) mSearchItem.getActionView().findViewById(R.id.edit);
    return super.onCreateOptionsMenu(menu);
 }

} 
```

我的菜单`options_menu.xml`是这样的：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

   <item
       android:id="@+id/menu_fragments"
       android:actionLayout="@layout/fragment"
       android:showAsAction="always">
   </item>

</menu> 
```

我有一个片段如下：

```
public class ExampleFragment extends Fragment {

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    ViewGroup view = (ViewGroup) inflater.inflate(R.layout.fragment, container, false);
    return view;
  }
} 
```

我`fragment.xml`的如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:gravity="center"
     android:orientation="vertical" >

<FrameLayout
    android:id="@+id/fragment_content"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1" />

  <LinearLayout
      android:layout_width="match_parent"
      android:layout_height="0dip"
      android:layout_weight="1"
      android:gravity="center"
      android:orientation="vertical" >

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        tools:listitem="@android:layout/simple_list_item_1" >
    </ListView>

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/Button" />
  </LinearLayout>
</LinearLayout> 
```

`fragment.xml`现在这个问题是，当我调用 Fragment 时，当我选择输入内容时，布局会向上移动。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:42:33.827

好的。没关系。我有问题。

`<requestFocus/>`在 Actionbar 的`@layout/main`xml 文件中的 EditText 小部件上是愚蠢的。删除它，现在可以工作了。

编辑：对不起，问题仍然存在，但我终于抓住了解决方案。

包括，

`android:windowSoftInputMode="adjustPan|adjustResize"` **到您的活动中，该活动**在`AndroidManifest.xml`

如果您使用小键盘/数字键盘，布局不会改变。

# c++ - 连接后第一个字母不显示

> ID：13899749
> 
> 赞同：-1
> 
> 时间：2012-12-16T08:32:48.843
> 
> 标签：c++, concatenation

下面是给出的代码，我已经让这个程序连接两个字符串连接，但是在显示连接后它不显示第一个单词.....我认为 cin.ignore() 中缺少一些东西请检查并帮助我？ ？？？

```
#include "stdafx.h"
#include<iostream>
#include <stdio.h>
#include <string>
#define MAX 100
using namespace std;
void main ()
{

char str[MAX],abc[MAX];
cout<<"\nEnter the string 1";
cin.ignore();                   
cin.get(str,MAX);                                                     
cout<<"\nEnter The String 2";
cin.ignore();
cin.get(abc,MAX);
cout<<"\nS1="<<str;
cout<<"\ns2="<<abc;
strcat(str,abc);
cout<<"\nStrings after catenation are"<<str;
system("pause");

} 
```

该程序中的错误是连接后的第一个字母未显示在该行上`cin.ignore();`。另一个错误是我想将结果存储在另一个字符中，`char d[MAX]`但编译器给出了错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T08:40:31.160

问题是“.ignore()”，它忽略了用户输入的下一个字符。你为什么用这个？

# ruby-on-rails - 如何使用 Ajax 频繁重新加载部分？

> ID：13899754
> 
> 赞同：0
> 
> 时间：2012-12-16T08:33:29.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

在后台，我希望它重新加载并显示有多少未读消息。
我想要不刷新页面。我的意思是使用ajax。

如果我在菜单中有这个，我怎么能每 30 秒只刷新这个部分？

```
<li><%= link_to sanitize('<i class="icon-envelope"></i> ') + "received messages" + sanitize(' <span class="badge badge-info">'+current_user.mailbox.inbox(:read => false).count(:id, :distinct => true).to_s+'</span>'), messages_received_path  %></li> 
```

消息控制器.rb

```
 def received
    if params[:search]
     @messages = current_user.mailbox.inbox.search_messages(@search).page(params[:page]).per(10)
    else
     @messages = current_user.mailbox.inbox.page(params[:page]).per(10)
    end 
     add_crumb 'Messages Received', messages_received_path

     @box = 'inbox'
     render :index
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:43:53.723

你应该有一个动作，它会返回一些未读消息，并使用 JS 函数对其进行轮询`setInterval()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T09:19:31.067

像这样的东西应该工作：

**控制器**

```
def messages_received
  @messages = Messages.messages_received
  respond_to |format|
   format.json { render json: @messages }
  end
end 
```

**js**

```
 setInterval(function(){
   $.ajax({
        type: 'GET',
        url: '/messages_received',
        data: {},
        success: function(JSONRESPONSE){
            alert(JSONRESPONSE)  // @messages variable
        };
   })
 },30000)   // 30 segs 
```

# asp.net - 为每个网页单独的 css

> ID：13899756
> 
> 赞同：2
> 
> 时间：2012-12-16T08:33:50.427
> 
> 标签：asp.net, html, css

我正在用 asp.net 4.0 开发一个网站。在设计时我有一个问题

*   每个网页都有单独的 css 好不好？

或者

*   在一个 CSS 中包含所有样式？

请告诉我什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:37:34.427

最好将所有规则保存在一个 CSS 文件中，因为该文件将为所有后续请求缓存。

除非你有大量的 CSS（即超过几百 kB），否则这不会影响 CSS 引擎的性能，但它会显着加快页面的加载速度，因为不必为每个加载的页面重复请求，这除了生成的 HTML 页面之外，这将是您最大的加载时间增益。

**编辑**：您应该考虑实现编译时（或按需）连接；这样您就可以拥有多个 CSS 文件，这些文件将作为单个文件提供给您的客户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T08:43:49.963

这取决于您的代码库的大小。

通常全局规则都应该在一个文件中，除非您正在处理大量代码库，并且将它们组织到单独的文件中是有意义的（但仍然在每个请求中全局包含）。

通常页面特定的 CSS 应该放在它自己的文件中，并且只包含在需要它的页面中。

一般来说，对于大型代码库，您将拥有一个缩小器和构建过程，将所有全局 css 连接到一个文件中，并将其包含在生产环境中。这可能很难调试，因此在开发中最好将它们保存为单独的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T09:01:35.100

除了其他答案中概述的缓存和最小化好处之外，请考虑您的 CSS 本质上是为您的网站或 Web 应用程序分配一个*主题。*如果您考虑一个主题在您最喜欢的媒体播放器或网络浏览器中的工作方式，当您应用该主题时，它通常会影响整个应用程序，而不仅仅是其中的一部分。

因此，如果您将 CSS 视为一个主题，那么您的设计师就可以更轻松地更改网站的外观和感觉，而无需触及任何一行 HTML。由于一个好的设计实践是让你的 HTML、JavaScript 和 CSS 完全分开，它可以更容易地对其中的一个进行更改，而不必担心对其他的更改。这减少了出现错误的机会，因为不变的事物保持稳定。

更重要的是，您的设计师只需更改 1 个文件即可创建新主题，这使他们的工作更轻松。它使您的工作更轻松，因为您不必经历和修复一堆损坏的 HTML 和 JavaScript，因为 CSS 专家必须对可能不是他们专业领域的代码进行更改。

这种做法的一个很好的例子是 Stack Exchange。Stack Overflow、[Server Fault](http://serverfault.com)、[Super User](http://superuser.com)和[Stack Apps](http://stackapps.com)都运行在同一个 Q&A 引擎上，但每个主题的主题略有不同。要创建一个全新的问答网站，前端更改几乎只涉及 CSS 更改。这就是 Stack Exchange 可以摆脱只有 1 名设计师[Jin](https://ux.stackexchange.com/users/4/jin)的情况，他负责管理网络上每个问答网站的设计。使他的工作更轻松的是标准化和简单性，并遵循“不要重复自己”的经验法则。

从浏览器源码看，你可以看到只有 1 个 CSS 文件：

```
 <link rel="stylesheet" type="text/css" 
        href="http://cdn.sstatic.net/stackoverflow/all.css?v=52aab16f8140"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T08:50:32.407

不，为每个网页保留单独的 CSS 是不好的。专业人士从不这样做。但是你可以为不同的浏览器使用两个或三个单独的 css ..

# windows-8 - Windows 应用商店应用认证：本机映像生成失败

> ID：13899757
> 
> 赞同：0
> 
> 时间：2012-12-16T08:34:11.780
> 
> 标签：windows-8, windows-store-apps, app-certification-kit

我构建了一个基本的 Grid App 并尝试通过 Windows App 认证工具包运行它。它通过了所有标准，除了一个：原生图像生成。

这是 WAC Result 的错误输出：

> “发现性能启动错误：性能启动测试收集了以下结果：。本机图像生成器失败”

当我尝试按照此处所述进行故障排除时：http: [//support.microsoft.com/kb/2716152](http://support.microsoft.com/kb/2716152)

这是我在“Performance_Test__trace_Launch*.txt”中找到的：

> 程序信息：0 : 16-12-2012 13:34:54 INFO:[NGenTest]ERROR: GetCorSvcBindToUnregisteredWorker 失败，因为工作进程因错误代码 -2147221168 而死
> 
> 程序信息：0 : 16-12-2012 13:34:54 INFO:[NGenTest]ERROR: 编译失败：C:\Users\EC\documents\visual studio 2012\Projects\BookSiteV1\BookSiteV1\bin\Release\AppX \BookSiteV1.exe
> 
> 程序信息：0 : 16-12-2012 13:34:55 INFO:[NGenTest]ERROR: GetCorSvcBindToUnregisteredWorker 失败，因为工作进程因错误代码 -2147221168 而死
> 
> 程序信息：0 : 16-12-2012 13:34:55 INFO:[NGenTest]ERROR: 编译失败：C:\Users\EC\documents\visual studio 2012\Projects\BookSiteV1\BookSiteV1\bin\Release\AppX \BookSiteV1.exe
> 
> 程序信息：0 : 16-12-2012 13:34:55 INFO:[NGenTest] 生成编译至少一个程序集时发生错误。

我进一步尝试使用空白的默认网格应用程序来测试相同的东西。我刚刚打开一个新的空白网格应用程序并直接调试它。仍然表现出同样的失败。那没有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:49:47.497

你有什么版本的ACK？它在 ACK 开始时说。

较旧的 ACK 版本存在此类问题。最新版本的 ACK 是 2.2，你应该只使用那个。你可以从[这里找到](http://msdn.microsoft.com/en-US/windows/apps/jj572486)

# android - 无法运行 EndlessAdapterDemo 应用程序

> ID：13899758
> 
> 赞同：0
> 
> 时间：2012-12-16T08:34:47.700
> 
> 标签：android, commonsware-cwac

我正在尝试查看 EndlessAdapter 演示 (https://github.com/commonsguy/cwac-endless)，但我不断收到 com.commonsware.cwac.endless.demo.DemoAdapter 类的 NoClassDefFoundError。但是，课程显然在那里！除了在 Eclipse 上使用“修复项目设置”选项之外，我根本没有更改任何代码。

我到处找，我找不到如何摆脱这个错误！

这是截图： http: [//grab.by/ikO6](http://grab.by/ikO6)

如果有人能给我一个逐步解决这个问题的解决方案，我将非常感激！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:00:34.010

使用兼容的 adt 插件检查您的 android 版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:39:19.287

确保您已将主项目声明为 Android 库项目，并且`demo/`子项目具有对该 Android 库项目的引用。

# excel - VBA中的开始停止按钮

> ID：13899761
> 
> 赞同：0
> 
> 时间：2012-12-16T08:35:35.240
> 
> 标签：excel, vba

我编写了这个简单的 VBA 代码来包含开始和停止按钮。在我单击 On 按钮启动 Do 循环后，excel 保持忙碌状态，我无法单击 Off 按钮停止循环。你能帮忙吗？

```
Public ONOFF As Boolean

Sub ON_Button()
    ONOFF = True
    Do While ONOFF
        Matha
    Loop
    MsgBox ("Exit Matha sub")
End Sub

Sub OFF_Button()
     ONOFF = False
End Sub

Sub Matha()
Dim X, Y, Z
    X = 1
    Y = 2
    Z = 5
    Z = X * Y + Z
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:50:42.293

您是否将 Off_Button 分配给“开”按钮？添加带有文本的 debug.print 以确保其正常工作
如果这不是问题，请尝试在循环中添加 DoEvents 以允许 Excel 处理您的点击。

构建这样的循环将占用您所有的处理器时间（至少是 Excel 专用的核心）。如需更好的解决方案，请查看：[如何使用 Windows API 函数创建计时器事件](http://support.microsoft.com/kb/180736/en-us)。

# html - 提供了一个 html 文件和 css 文件，是否有任何 IDE 可以找到并删除未使用的 css 类？

> ID：13899764
> 
> 赞同：3
> 
> 时间：2012-12-16T08:35:53.053
> 
> 标签：html, css, ide

有没有办法自动删除那些未使用的 css 类？另外，我可以更系统地管理 css 文件吗？例如，我可以更改css文件中的类名，html文件中相应的类名也会更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:09:32.747

I have been using this website to check unused css selectors, you can give it a try [http://unused-css.com](http://unused-css.com)

# android - 如何将 Android 应用程序连接到基于 Web 的数据库

> ID：13899765
> 
> 赞同：3
> 
> 时间：2012-12-16T08:36:09.403
> 
> 标签：android, jquery, jquery-mobile, soap, ksoap

我对 android 和基于 web 的数据库相当陌生。我已经使用 Jquery 移动框架和 phone gap 编写了一个基于 android 的应用程序。

我正在寻找一种方法来通过应用程序的请求使用基于 Web 的数据库中保存的信息填充我的应用程序。

当应用程序需要信息时，我不确定如何即时执行此操作。我对 YQL 进行了一些研究，但不确定这是否足够。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:08:53.217

您可以执行以下操作：

1.  在您的 android 项目中使用 ksoap2 librery 作为参考
2.  开发一个 Web 服务，它具有您需要的所有方法和功能，以便您的 android 项目在云中的外部数据库上执行。
3.  然后使用在步骤 1 中添加的 librery 定义您希望与此 Web 服务通信的方式，例如将您的代码放入 Aynctask 或可运行或任何其他符合您要求的设计中。

这是一个教程，您可以从它开始了解如何使用 Ksoap2

*   [图1](http://javatutorialspoint.blogspot.com/2012/02/android-web-service-access-using-ksoap2.html)
*   [图2](http://www.helloandroid.com/tutorials/using-ksoap2-android-and-parsing-output-data)
*   [图3](http://sarangasl.blogspot.com/2011/10/android-web-service-access-tutorial.html)

# jquery - Unexpected Token：尝试解析 JSON 字符串时

> ID：13899767
> 
> 赞同：2
> 
> 时间：2012-12-16T08:36:42.813
> 
> 标签：jquery, json

我正在尝试解析这个 JSON 字符串：

```
{ "RESULTS": [ { "name": "Thessaloniki GR", "type": "Sailing", "l": "/sailing-weather/beach:Porto%20Carras%20Marina 45904" }, { "name": "Thessaloniki, Greece", "type": "city", "c": "GR", "zmw": "00000.1.16622", "tz": "Europe/Athens", "tzs": "EET", "l": "/q/zmw:00000.1.16622" } ] } 
```

从[这里检索](http://autocomplete.wunderground.com/aq?&format=jsonp&query=Thessaloniki)

这是我的片段：

```
$(document).ready(function () {

  $("#w11").autocomplete({
        source: function (a, b) {
            $.ajax({
                url: "http://autocomplete.wunderground.com/aq",
                dataType: "jsonp",
                data: {
                    format: "jsonp",
                    query: a.term
                },
                success: function (a) {
                    for (i in data.RESULTS) {
                        console.log(data.RESULTS);
                    }
                }
            })
        }
    });

});​ 
```

`Uncaught SyntaxError: Unexpected token :`这在第一行给了我一个错误`{ "RESULTS": [`

如何解析 JSON 结果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T08:40:16.360

您已经告诉 jQuery 期待[JSON-P](http://en.wikipedia.org/wiki/JSONP#JSONP)，而不是[JSON](http://json.org)：

```
dataType: "jsonp" 
```

...但结果是 JSON。JSON-P 和 JSON 是根本不同的东西。这是一个示例 JSON 响应：

```
{"foo": 42} 
```

下面是 JSON-P 响应的样子：

```
callback({"foo": 42}); 
```

或者

```
callback({foo: 42}); 
```

如果`http://autocomplete.wunderground.com/a`与您的代码正在运行的文档不在同一个来源，您将无法通过 ajax 从中检索 JSON，因为[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)（除非有问题的服务器支持[CORS](http://www.w3.org/TR/access-control/)，允许您的请求来源，并且用户拥有的浏览器也支持CORS）。我怀疑这就是您尝试使用跨域工作的 JSON-P 的原因。但问题是，**服务器**也必须支持 JSON-P。尽管`format=jsonp`在 URL 中，服务器没有使用 JSON-P 响应，而是使用 JSON。

在评论中，您链接到[他们的 API 文档](http://www.wunderground.com/weather/api/d/docs?d=autocomplete-api)，这表明他们*确实*支持 JSON-P，只是在 URL 中使用了非标准参数名称（`cb`而不是更常见的`callback`）。

所以这应该可行（我还解决了我在对该问题的评论中提到的代码的问题）：

```
$.ajax({
    url:      "http://autocomplete.wunderground.com/aq",
    dataType: "jsonp",
    jsonp:    "cb",     // <================= New bit is here
    data:     {
        format: "json", // <=== "json" not "jsonp" according to the docs, but I think the "cb" argument overrides it anyway
        query:  a.term
    },
    success:  function (data) { // <=== `data`, not `a`
        var i;
        for (i in data.RESULTS) {
            console.log(data.RESULTS[i]); // <=== Use [i] here
        }
    }
}); // <=== Semicolon was missing 
```

事实上它确实有效：[Live Example](http://jsbin.com/oqecik/1) | [来源](http://jsbin.com/oqecik/1/edit)

该`jsonp`参数告诉 jQuery 使用哪个 URL 参数来定义 JSON-P 回调的名称。默认为标准`callback`，但该 API 使用非标准参数。

# android - 将 3D 形状的脸隐藏在另一个 Android 画布后面？

> ID：13899774
> 
> 赞同：0
> 
> 时间：2012-12-16T08:38:39.047
> 
> 标签：android, 3d, rotation, android-canvas

假设我必须在画布中绘制 3D 形状的两个面。在 OpenGL 中，我们使用顶点的顺时针和非顺时针顺序来检测什么是正面，什么是背面，但是*我不能使用 OpenGL*，我会使用画布。似乎如果我们画在脸后面然后画前面，它会隐藏在脸后面，但是我的 3D 形状会旋转，每个脸有时必须在前面，有时必须在后面。

我的问题是：当形状旋转时，我如何检测女巫的脸在前面？或任何其他方式来隐藏前面的脸后面的电流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:28:49.867

您描述的过程称为*背面剔除*（这将大大提高您在该主题上的谷歌能力）。

实现的直接方法是使用`normal vector`您的`face`，并检查它是否面向或远离相机。

您可以使用相机`dot product`的`normal`和来执行此操作。`view vector`根据`sign`点积的不同，多边形朝向或远离相机。

如果此时您实际上没有相机，请在屏幕中替换一个矢量（即`[0, 0, 1]`或`[0, 0, -1]`取决于您的轴系统）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:55:04.780

您是否正在寻找 3D 翻转？
如果是这样，那么我建议您查看[此链接](http://code.google.com/p/android-3d-flip-view-transition/)和[此](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)链接。
StackOverFlow 和其他博客上还有一些其他相关问题。只需在 Google 上搜索“ *Android 上的 3D Flip* ”即可。

祝你好运！

# c# - 套接字：一个现有的连接被远程主机强行关闭

> ID：13899779
> 
> 赞同：0
> 
> 时间：2012-12-16T08:39:24.430
> 
> 标签：c#, sockets, ssl, https

我正在尝试实现 HTTP+HTTPS+POP3+IMAP 代理服务器。到目前为止，我已经实现了 HTTP 和 HTTPS 代理。但是在尝试使用 HTTPS 代理时，我有以下异常： `an existing connection was forcibly closed by remote host`

这是我处理来自 TCP 侦听器的套接字的代码：

```
 static void PerformConnection(object o)
    {
        try
        {

            Socket receiver = o as Socket;
            if (receiver != null)
            {
                NetworkStream ns = new NetworkStream(socket: receiver);
                byte[] buffer = new byte[450000];
                ns.Read(buffer, 0, Convert.ToInt32(450000));
                string data = Encoding.UTF8.GetString(buffer);
                string line = data.Replace("\r\n", "\n").Split(new string[] {"\n"}, StringSplitOptions.None)[0];
                if (line != "" && line != null)
                {
                    Uri uri = new Uri("http://someforbiddenhost.org");

                    uri = new Uri(line.Split(new string[] {" "}, StringSplitOptions.None)[1]);
                    if (uri.Host.Contains("shelesta.org"))
                    {
                        string Html = "<html><body><h1>It works!</h1></body></html>";
                        string response = "HTTP/1.1 200 OK\nContent-type: text/html\nContent-Length:" + Html.Length.ToString() + "\n\n" + Html;
                        receiver.Send(Encoding.UTF8.GetBytes(response));
                    }
                    else
                    {
                        if (line.StartsWith("CONNECT"))
                        {

                            string host = uri.ToString().Substring(0, uri.ToString().IndexOf(':'));
                            TcpClient clDestination = new TcpClient();
                            clDestination.Connect(host, 443);
                            SslStream sslStream = new SslStream(clDestination.GetStream());

                            sslStream.AuthenticateAsClient(host);  

                            byte[] request = Encoding.UTF8.GetBytes(String.Format("GET https://{0}:443/  HTTP/1.1\r\nHost: {0}\r\n\r\n", host));
                            sslStream.Write(request, 0, request.Length);
                            sslStream.Flush();
                            int bytes = 10;
                            receiver.ReceiveTimeout = 6000000;
                            do
                            {
                                bytes = sslStream.Read(buffer, 0, buffer.Length);
                                Console.Write(Encoding.UTF8.GetString(buffer, 0, bytes));
                                receiver.Send(buffer,buffer.Length,SocketFlags.Partial);// HERE EXCEPTION RAISES

                            } while (bytes != 0); 

                        }
                        else
                        {
                            IPHostEntry rh = Dns.GetHostEntry(uri.Host);
                            Socket webserver = new Socket(rh.AddressList[0].AddressFamily, SocketType.Stream,
                                                          ProtocolType.IP);
                            webserver.Connect(new IPEndPoint(rh.AddressList[0], 80));
                            byte[] databytes = Encoding.ASCII.GetBytes(data);
                            webserver.Send(databytes, databytes.Length, SocketFlags.None);
                            byte[] ReceiverBuffer = new byte[2000048];
                            webserver.Receive(ReceiverBuffer);
                            receiver.Send(ReceiverBuffer); 
                        }
                    }
                }
            }
        }
        catch
        {

        }
    } 
```

对代码格式感到抱歉，我看不到 SO WYSIWYG 编辑器，只是消息：Stack Overflow 需要来自另一个域的外部 JavaScript，它被阻止或无法加载。

# java - GAE/J Memcache：不能用作键

> ID：13899782
> 
> 赞同：0
> 
> 时间：2012-12-16T08:39:48.293
> 
> 标签：java, google-app-engine, memcached, apache-commons-collection

[GAE 文档](https://developers.google.com/appengine/docs/java/memcache/overview)说：

```
Keys and values can be of any Serializable type or class 
```

我使用[MultiKey](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/keyvalue/MultiKey.html)作为键，但更新我的应用程序后，它给了我异常：

```
java.lang.IllegalArgumentException: Cannot use as a key: 'MultiKey[class com.xx.xx.xx, Key<?>(Domain("xxx.com")/AppUser(2001)), -1, {}, [-lastModified, ]]'
    at com.google.appengine.api.memcache.AsyncMemcacheServiceImpl.makePbKey(AsyncMemcacheServiceImpl.java:251)
    at com.google.appengine.api.memcache.AsyncMemcacheServiceImpl.doGet(AsyncMemcacheServiceImpl.java:294)
    at com.google.appengine.api.memcache.AsyncMemcacheServiceImpl.get(AsyncMemcacheServiceImpl.java:306)
    at com.google.appengine.api.memcache.MemcacheServiceImpl.get(MemcacheServiceImpl.java:49) 
```

[MultiKey](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/keyvalue/MultiKey.html)来自 apache commons-collections，它确实实现了 Serializable

```
public class MultiKey
extends java.lang.Object
implements java.io.Serializable 
```

有任何想法吗？

谢谢。

编辑，代码如下：

```
MemcacheService ms = MemcacheServiceFactory.getMemcacheService();
MultiKey key=new MultiKey(xx, xx, xx...);
ms.put( key, value );
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:40:39.287

也许我明白了，下面是 gae 如何序列化密钥，它只是将对象写入字节数组，所以如果密钥中包含的对象之一（在我的情况下为 MultiKey）没有实现 Serializable，此方法将不起作用并且抛出异常，这只是我的情况。

```
 } else if (value instanceof Serializable) {
          flags = Flag.OBJECT;
          ByteArrayOutputStream baos = new ByteArrayOutputStream();
          ObjectOutputStream objOut = new ObjectOutputStream(baos);
          objOut.writeObject(value);
          objOut.close();
          bytes = baos.toByteArray();
     } 
```

# android - 如何将可运行文件放入捆绑包中？

> ID：13899786
> 
> 赞同：9
> 
> 时间：2012-12-16T08:41:00.123
> 
> 标签：android, runnable, serializable

我想通过捆绑将 Runnable 传递给活动，以便在 onCreate 触发时必须运行 runnable。我写了一个实现 Serializable 的类，但它会导致异常：`"java.lang.RuntimeException: Parcelable encountered IOException writing serializable object"`. 我的代码在这里：

```
package some.company.common;

import java.io.Serializable;

public class SerializedRunnable implements Serializable, Runnable {

    private static final long serialVersionUID = 6641813629033240205L;

    public SerializedRunnable() {
    }

    private Runnable runnable;

    public SerializedRunnable(Runnable runnable) {
        this.runnable = runnable;
    }

    @Override
    public void run() {
        this.runnable.run();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:52:21.060

看起来 Runnable 是不可序列化的。要实现您自己的序列化，您必须`readObject`自己实现`writeObject`。

[在这里](http://www.javapractices.com/topic/TopicAction.do?Id=45)检查

# asp.net - 带有下拉列表年份和月份的 asp.net 日历

> ID：13899789
> 
> 赞同：1
> 
> 时间：2012-12-16T08:41:20.940
> 
> 标签：asp.net, ajax, asp.net-ajax

您好，我正在使用 ajax 日历扩展器，我希望可以使用下拉列表选择年份和月份。

附上 2 张图片，第一张是现有的，第二张是想要的结果。谢谢。

![现有日历](../Images/85bc3252fb390af3b8ef33a6de3dd400.png)

![通缉日历](../Images/90e519b42061f2cfe50dc9b8a124ea88.png)

# c# - 让应用程序在 Windows 服务器上运行，甚至注销

> ID：13899791
> 
> 赞同：1
> 
> 时间：2012-12-16T08:41:39.290
> 
> 标签：c#, windows-services

我已经使用 C# 为 mysql 数据库开发了一个备份调度程序。我没有创建它`Windows Service`。即使我注销，我也需要在 Windows 服务器上继续运行应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:45:17.773

尝试[任务计划程序](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)您所需要的只是设置要运行的计划、用户帐户和程序。

# unicode - 桌面应用程序中的数字本地化

> ID：13899793
> 
> 赞同：8
> 
> 时间：2012-12-16T08:41:54.103
> 
> 标签：unicode, localization, numbers, character, desktop-application

在 Unicode 的数字**十进制类别**中，定义了 460 个十进制字符（有关示例，请参见此[页](http://www.omniglot.com/language/numerals.htm)）。不幸的是，无论其外观如何，我都找不到任何代表数字的字符。因此，目前大多数软件只能将西方阿拉伯数字字符理解为数字。因此，您不能在 MS Excel 中输入其他数字字符。

![各种书写系统中的数字表](../Images/b483453a184e1969e248d0e3c840cd28.png)

如果 Unicode 有（至少）10 个数字 0 到 9 的代码作为纯数字，而不是字形，我们几乎可以在所有正常使用中使用它们，并且主机环境可以根据用户的区域设置显示本地化的数字字形。当我们想要将数字字形用作字符串时，我们也可以使用 460 个十进制 Unicode 数字中的任何一个。

另一方面，如果我们接受当前字符 U+0030 到 u+0039 作为纯数字，那么我们需要十个新字符用于西方阿拉伯数字。这种实现似乎也更向后兼容。此外，字符 U+0030 到 U+0039 的名称不涉及任何特定数字的外观。

显然，我们可以在应用程序中对所有 460 个十进制数字字符进行硬编码，并在内部将它们视为数字，但我正在寻找更合适的解决方案。如果我们还考虑包括罗马数字和古波斯数字在内的 224+464 个其他 Unicode 数字字符（Nl 类别 + 无类别），问题就会变得更加复杂。

我们如何使用操作系统范围的解决方案来解决这个问题？

另请参阅[Web 应用程序中的数字本地化](https://stackoverflow.com/q/13757310/752603)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T02:01:21.787

我不确定您要问什么，但与特定问题最接近的问题似乎是，“在当前情况下，我们应该如何以用户可以看到其本地数字字形的方式处理数学应用程序中的数字？”

非常简单：编写自己的数学应用程序。它将具有其数据的**模型**，例如，整数或实数。它还将具有该数据的**视图**，例如，以用户知道如何阅读的符号表示数字的字符串。（这些术语指的是*[模型-视图-控制器架构](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)*。）在您自己的应用程序中，为您的视图编写代码，使用阿拉伯数字字符、孟加拉数字字符、中文数字字符或任何您想要的表示来显示数字。

正如 Esailija 所写，[通用语言环境数据存储库 (CLDR)](http://www.unicode.org/repos/cldr/trunk/common/supplemental/numberingSystems.xml)和[Unicode 国际类 (ICU) 库](http://icu-project.org/apiref/icu4c/classRuleBasedNumberFormat.html)可以帮助您编写此应用程序。

你写，

> 无论其外观如何，我都找不到任何代表数字的字符。因此，目前大多数（或所有）软件只能将西方阿拉伯数字字符理解为数字。所以你不能在 MS Excel 中输入其他数字字符。

我认为这三个句子没有逻辑联系。

您无法在 Microsoft Excel 中输入其他数字字符的原因是，Microsoft 做出了一个商业决策，即如果 Excel 仅用西方数字表示数字，它就足够有用了，而且他们没有必要构建您寻求的多语言电子表格。

目前大多数（或所有）软件仅将西方阿拉伯数字字符理解为数字的原因是因为许多其他软件开发人员已做出与 Microsoft 相同的业务决策。这不是因为数字是如何以 Unicode 编码的。

您是正确的，Unicode 标准没有代表数字的字符，无论其外观如何。这是因为 Unicode 标准处理字符，使用一个非常详细的模型来说明什么是字符，什么不是字符。Unicode 标准（通常）不与其他抽象数据模型实体一起使用。

所以：去编写具有您想要的行为的数学应用程序。平台和 API 对您开放。Unicode 标准以及 CLDR 和 ICU 为您提供了工具。做大事！

您添加：

> 显然，我们可以在应用程序中对所有 460 个十进制数字字符进行硬编码，并在内部将它们视为数字，但我正在寻找更合适的解决方案......我们如何使用操作系统范围的解决方案来解决这个问题？

您宣布解决方案“合适”的标准是什么？对十进制数字字符进行硬编码，或者更具体地说，编写一组特定于语言的例程以将抽象数字数据类型转换为各种语言的文本表示，是我认为可行的唯一方法。“操作系统范围的解决方案”是指可以安装到操作系统中的解决方案，它会改变现有应用程序的行为吗？好吧，您可以对此抱有希望，但我认为它不会传递给当前的操作系统。

请注意，特定于语言的例程可能可以使用[`RuleBasedNumberFormat`ICU 类](http://icu-project.org/apiref/icu4c/classRuleBasedNumberFormat.html)来实现。此类可以将抽象数字格式化为文本字符串，例如“（例如，25,3476 为“25,376”或“vingt-cinq mille trois cents soixante-seize”或“fünfundzwanzigtausenddreihundertsechsundsiebzig”）' . 人们可能可以使用此类编写代码，以使用您确定的 46 种语言数字集中的任何一种来格式化数字。但是，应用软件仍然需要结合 ICU 和数字格式代码。

**更新**：修改了我的答案以跟踪原始发帖人问题中的措辞变化。添加了对“操作系统范围解决方案”的呼吁的响应。修复了“模型-视图-控制器”中的维基百科链接。

**更新**：删除虚假单词“the”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T10:36:59.013

[您可以在CLDR](http://www.unicode.org/repos/cldr/trunk/common/supplemental/numberingSystems.xml)中找到编号系统。-`id`属性描述可以在[数字的 bcp 文件中](http://www.unicode.org/repos/cldr/trunk/common/bcp47/number.xml)找到。编号系统是`numeric`或`algorithimic`，在 - 属性中指定`type`。如果是`"numeric"`，则该`digits`属性包含该系统中从 0 开始的数字。如果是`"algorithmic"`，则`rules`-attribute 将引用使用的规则。[读取编号系统文件](http://www.unicode.org/reports/tr35/#Numbering_Systems)

有关编号系统的算法规则，请参见[rbnf（基于规则的数字格式）文件夹中](http://www.unicode.org/repos/cldr/trunk/common/rbnf/root.xml)的 root.xml 文件。[更多关于阅读 rbnf 文件](http://www.unicode.org/reports/tr35/#Rule-Based_Number_Formatting)的信息。

[ICU 库](http://icu-project.org/apiref/icu4c/classRuleBasedNumberFormat.html)已经实现了这一点，但您也可以根据上述链接中的数据自行滚动，将任何编号系统字符转换为整数，反之亦然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T01:16:58.100

Unicode 没有为字符规定字形。字符被认为是一种抽象，独立于特定的造型。所以，从某种意义上说，所有的人物都是“不分外貌”的。

但是要解决您的问题（我认为），要执行这种本地化方式，需要首先识别代表数字的代码点序列并将其转换为实际数字。我认为没有 Unicode 出版物涵盖如何做到这一点（即使[UTR 25](http://www.unicode.org/reports/tr25/)假定拉丁数字），而且它不一定会很容易。例如，如前所述，某些代码点的值在 0-9 范围之外，并且数字可以从左到右出现在其他从右到左的周围文本中。

但是，假设您想尝试此操作，您将需要每个代码点的 the`Numeric Type`和 the `Numeric Value`；这些是[规范属性，其值在 UnicodeData.txt 中列出](http://www.unicode.org/reports/tr44/#UnicodeData.txt)。它们定义了代表数字的每个代码点的抽象值（请注意，数字不一定是数字）。获得抽象编号后，您需要执行相反的过程，将其转换为表示相同值的与语言环境相关的代码点序列。

# android - Android 偶尔会从 url 下载图片

> ID：13899801
> 
> 赞同：0
> 
> 时间：2012-12-16T08:43:27.513
> 
> 标签：android, download, imageview, warnings

我的应用程序的一部分是从 url 下载图像并将它们解析为 listview 和单个 imgaview。一般它不起作用，但是偶尔会出现一些图像。

![在此处输入图像描述](../Images/5ba8931f360912df99c915bd53d45093.png)

```
public class ImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService; 

    public ImageLoader(Context context){
        fileCache=new FileCache(context);
        executorService=Executors.newFixedThreadPool(5);
    }

    int stub_id = R.drawable.ic_launcher;
    public void DisplayImage(String uurl, int loader, ImageView imageView)
    {
        String url = uurl.replaceAll(" ", "%20");
        url = url.replaceAll("\n", "%20");
        stub_id = loader;
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            imageView.setImageResource(loader);
        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url)
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;
        return downloadBitmap(url);

        //from web
        /*try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }*/
    }
    Bitmap downloadBitmap(String url){
        Bitmap bmp = null;
        URL url_1 = null;
        try {
            url_1 = new URL(url);
             bmp = BitmapFactory.decodeStream(url_1.openConnection().getInputStream());
        } catch (Exception e) {
            Log.v("Error while downloading bitmap from url", e.getMessage());
        }
        return bmp;
    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u;
            imageView=i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad){
            this.photoToLoad=photoToLoad;
        }

        public void run() {
            if(imageViewReused(photoToLoad))
                return;
            Bitmap bmp=getBitmap(photoToLoad.url);
            memoryCache.put(photoToLoad.url, bmp);
            if(imageViewReused(photoToLoad))
                return;
            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
            Activity a=(Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad){
        String tag=imageViews.get(photoToLoad.imageView);
        if(tag==null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;
            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
            else
                photoToLoad.imageView.setImageResource(stub_id);
        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

} 
```

文件现金

```
public class FileCache {

    private File cacheDir;

    public FileCache(Context context){
        //Find the dir to save cached images
        if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
            cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"TempImages");
        else
            cacheDir=context.getCacheDir();
        if(!cacheDir.exists())
            cacheDir.mkdirs();
    }

    public File getFile(String url){
        String filename=String.valueOf(url.hashCode());
        File f = new File(cacheDir, filename);
        return f;

    }

    public void clear(){
        File[] files=cacheDir.listFiles();
        if(files==null)
            return;
        for(File f:files)
            f.delete();
    }

} 
```

记忆现金

```
public class MemoryCache {
    private Map<String, SoftReference<Bitmap>> cache=Collections.synchronizedMap(new HashMap<String, SoftReference<Bitmap>>());

    public Bitmap get(String id){
        if(!cache.containsKey(id))
            return null;
        SoftReference<Bitmap> ref=cache.get(id);
        return ref.get();
    }

    public void put(String id, Bitmap bitmap){
        cache.put(id, new SoftReference<Bitmap>(bitmap));
    }

    public void clear() {
        cache.clear();
    }
} 
```

功利

```
public class Utils {
    public static void CopyStream(InputStream is, OutputStream os)
    {
        final int buffer_size=1024;
        try
        {
            byte[] bytes=new byte[buffer_size];
            for(;;)
            {
              int count=is.read(bytes, 0, buffer_size);
              if(count==-1)
                  break;
              os.write(bytes, 0, count);
            }
        }
        catch(Exception ex){}
    }
} 
```

适配器

```
public class CandidateAdapter extends BaseAdapter{
    Context ctx;
    LayoutInflater lInflater;
    ArrayList<Candidate> objects;
    CandidateAdapter(Context context, ArrayList<Candidate> candidates) {
            ctx = context;
            objects = candidates;
            lInflater = (LayoutInflater) ctx
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          }
    public int getCount() {
        return objects.size();
      }
    public Object getItem(int position) {
        return objects.get(position);
      }
    public long getItemId(int position) {
        return position;
      }
    Candidate getCandidate(int position) {
        return ((Candidate) getItem(position));
      }
    public View getView(int position, View convertView, ViewGroup parent) {
        // используем созданные, но не используемые view
        View view = convertView;
        if (view == null) {
          view = lInflater.inflate(R.layout.inbox_list_item, parent, false);
        }
        Candidate p = getCandidate(position);
        ((TextView) view.findViewById(R.id.from)).setText(p.get_name());
        ((TextView) view.findViewById(R.id.subject)).setText(p.get_office());
        ((RatingBar) view.findViewById(R.id.rateindicator)).setRating(p.get_ranking());
        int loader = R.drawable.loader;

        ImageView image = (ImageView) view.findViewById(R.id.photo);

        String image_url = p.get_photograph();

        ImageLoader imgLoader = new ImageLoader(ctx);

        imgLoader.DisplayImage(image_url, loader, image);
        return view;
    }

} 
```

活动

```
public class InboxActivity extends ListActivity {

    List<Candidate> candidates;
    private DatabaseHandler db;

    public void onDestroy(){
        if (db != null)
            db.close();

        super.onDestroy();
        //db.close();
    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.inbox_list);
        db = new DatabaseHandler(this);
        candidates = db.getAllCandidates(1);
        db.close();
        CandidateAdapter adapter = new CandidateAdapter(this,(ArrayList) candidates);
        ListView lvMain = getListView();
        //String numofrows = "" + candidates.size();
        //Log.d("Number of candidates", numofrows);
        lvMain.setAdapter(adapter);
        lvMain.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.from)).getText().toString();
                Log.d("Name ", name);

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra("name", name);
                Log.d("Starting activity ", "Yeah ");
                startActivity(in);

            }
        });
    }

} 
```

logcat 警告

12-16 08:35:33.525：W/Zygote(33)：预加载的可绘制资源 #0x1080093 (res/drawable-hdpi/sym_def_app_icon.png)，随配置而异！！

谁能帮我解决这里的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:47:12.867

我认为这可能是 url 中的问题意味着它包含空格。因此，如果其 url 包含以下代码的空白，则下载图像。

```
public void DisplayImage(String uurl, int loader, ImageView imageView)
{
    String url = uurl.replaceAll(" ", "%20");
    stub_id = loader;
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);
    if(bitmap!=null)
        imageView.setImageBitmap(bitmap);
    else
    {
        queuePhoto(url, imageView);
        imageView.setImageResource(loader);
    }
} 
```

使用它从指定的 url 下载位图。

```
Bitmap downloadBitmap(String url)
{
    URL url_1 = null;
    try {
        url_1 = new URL(url);
        bmp = BitmapFactory.decodeStream(url_1.openConnection().getInputStream());
    } catch (Exception e) {
        Log.v("Error while downloading bitmap from url", e.getMessage());
    }
    return bmp;
} 
```

# php - 如何在 php 中以静态方法访问父非静态属性？

> ID：13899804
> 
> 赞同：0
> 
> 时间：2012-12-16T08:43:58.613
> 
> 标签：php, static-methods, non-static

我在子类静态方法中访问父（非静态）属性时遇到问题。我试过这些如下：

```
class Parent
{
    protected $nonStatic;
    // Other methods and properties
}

class Child extends Parent
{
    public static function staticFunc()
    {
        $test = $this->nonStatic;     # Using $this when not in object context
        $test = self::$nonStatic;     # Access to undeclared static property
        $test = parent::$nonStatic    # Access to undeclared static property
    }
} 
```

我在stackoverflow中检查了类似的问题，但我没有得到任何有效的解决方案

* * *

**PS**抱歉错别字，上面的代码是一个虚拟示例

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T08:47:59.700

您不能从静态方法访问父非静态属性，因为根据定义这是不可能的并且没有意义。

非静态属性*仅*在您有对象实例时可用，而您没有任何对象实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:47:47.190

也使父母的财产成为静态的。否则当您在静态上下文中时无法访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T08:53:50.183

显然，静态方法不会知道非静态父属性是什么。它不知道调用对象的哪个实例——所以它不知道对象是父对象。将父道具设置为静态或将子对象的实例传递给方法并调用passedChildObject.parentProp

```
public static function staticFunc(Child c)
{
//should give you passed instance parent prop
return  c.$nonStatic
} 
```

现在当你想要房产时..

```
{
//assume x is already initialized, this is just for clarity 
Child x;
returnedProp = x.staticFunc(x)
} 
```

# jquery-selectors - jquery next() 什么都不返回

> ID：13899806
> 
> 赞同：2
> 
> 时间：2012-12-16T08:44:18.497
> 
> 标签：jquery-selectors, next

我试图选择相邻之间的所有内容`<p>`，“p”的数量每次都在变化。p 个标签对之间的内容可能与任何事物无关。像这样的一些事情：

```
 <p><a href="x">...ABC...</a></p>

    <<<<<<<< Beginning of what I want >>>>>>>>

    <fieldset>...</fieldset>
    <font title="...">...</font>
    sometext without any tag<br>
    <a href="...">...</a>
    //[0..N] more tags

    <<<<<<<< End of what I want >>>>>>>>

    <p><a href="x+1">...ABC...</a></p>
    [0..N] more "p"'s with similar pattern ("p" with random url in "a") 
```

更新：

我想将那些流氓代码（未标记的文本）包装到某个 div 中，以便以后处理它们。像这样：

```
<div id="outer">
    <div id="1">
        <p><a href="x">...ABC...</a></p>

    <! Beginning of what I want >

        <fieldset>...</fieldset>
        <font title="...">...</font>
        sometext without any tag<br>
        <a href="...">...</a>
        //[0..N] more tags

    <! End of what I want >
    </div>
    <div id="2">
        <p><a href="x+1">...ABC...</a></p>
    </div>
    <div id="3">
        //something or nothing
    </div>
    //something or nothing
</div> 
```

为了做到这一点，我不得不使用这段代码，因为它周围有一些没有任何标签的文本：

```
 var ps = $("p:contains('ABC')");
    ps.each(function(){
        if(!($(this).next()[0])){
            return true;
        }
        var me = $(this);
        var pa = me.parent().contents();
        var nx = me.next("p:contains('ABC')"); //returns [] in this case
        var i0 = pa.index(me);
        var i1 = pa.index(nx);
        if (i1 > i0) {
            var elements = pa.slice(i0, i1);
            elements.each(function(){
                //Do something
            });
        }
    }); 
```

正如代码中所标记的，即使我将 next() 函数更改为 next("p")，它也不会返回任何内容。但是如果我使用 me.next().next().next().next().next() 我可以选择下一个“p”标签。为什么会发生这种情况？我怎样才能做得更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:48:39.980

您应该`.nextUntil("p")`用于此目的！因为 .next() 只检查下一个元素，而 nextUntil() 搜索直到找到关联的元素！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T09:00:17.070

阅读您的问题后，我得到的是您想要`<p>`标签中的内容......无论是内容还是 html 标签。如果我错了，请告诉我...

我创建了一个演示小提琴，请看一下。[http://jsfiddle.net/dineshswami/YpYWY/1/](http://jsfiddle.net/dineshswami/YpYWY/1/)

**更新小提琴：http:** [//jsfiddle.net/dineshswami/YpYWY/3/](http://jsfiddle.net/dineshswami/YpYWY/3/)

HTML：

```
<p><a href="x">...ABC...</a></p>

<fieldset>...</fieldset>
<font title="...">...</font>
sometext without any tag<br>
<a href="...">...</a>
//[0..N] more tags

<p><a href="x+1">...ABC...</a></p> 
```

查询：

```
$("p").contents().unwrap(); 
```

输出：

```
<a href="x">...ABC...</a>

    <fieldset>...</fieldset>
    <font title="...">...</font>
    sometext without any tag<br>
    <a href="...">...</a>
    //[0..N] more tags

    <a href="x+1">...ABC...</a> 
```

# python - 如何使用python增加进程优先级

> ID：13899808
> 
> 赞同：1
> 
> 时间：2012-12-16T08:44:36.563
> 
> 标签：python, windows, subprocess

我正在使用 Windows 7 上用 python 编写的应用程序，它需要调用进程并将进程的优先级设置为高，如何使用 python 增加或更改调用的进程优先级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:41:47.880

似乎解决方案在于使用[subprocess 模块](http://blog.doughellmann.com/2007/07/pymotw-subprocess.html)

# objective-c - 使用openCV在目标-c中进行模板匹配

> ID：13899811
> 
> 赞同：0
> 
> 时间：2012-12-16T08:44:44.327
> 
> 标签：objective-c, xcode, opencv

我已使用以下代码进行模式识别。但它给出了错误的匹配结果。请帮我看看有什么问题。这是用 xcode 编写的。

```
Mat img_display;
img.copyTo( img_display );

/// Create the result matrix
int result_cols =  img.cols - templ.cols + 1;
int result_rows = img.rows - templ.rows + 1;

result.create( result_cols, result_rows, CV_32FC1 );

/// Do the Matching and Normalize
matchTemplate( img, templ, result, 5 );
normalize( result, result, 0, 1, NORM_MINMAX, -1, Mat() );

/// Localizing the best match with minMaxLoc
double minVal; double maxVal; Point minLoc; Point maxLoc;
Point matchLoc;

minMaxLoc( result, &minVal, &maxVal, &minLoc, &maxLoc, Mat() );

/// For SQDIFF and SQDIFF_NORMED, the best matches are lower values. For all the other methods, the higher the better
if( match_method  == CV_TM_SQDIFF || match_method == CV_TM_SQDIFF_NORMED )
{
    matchLoc = minLoc;
    printf("fsf");
}
else
{
    matchLoc = maxLoc;
    printf("fsf2");
}

/// Show me what you got
rectangle( img_display, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );
//rectangle( result, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );

//imshow( image_window, img_display );
//imshow( result_window, result );

return img_display; 
```

提前致谢 。我在这里附上了截图![在此处输入图像描述](../Images/f5325bcc55bc2cbfe1843a8eef73f6d3.png)

![在此处输入图像描述](../Images/76f050a28e7893ab1f23b8485dfa3d5b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T21:31:40.547

你应该替换 result.create(result_cols, result_rows, CV_32FC1); 使用 result.create(result_rows, result_cols, CV_32FC1);

# iphone - - (void)drawRect:(CGRect)rect ，绘制迷宫并检测其边界

> ID：13899813
> 
> 赞同：0
> 
> 时间：2012-12-16T08:45:10.757
> 
> 标签：iphone, objective-c, ios, drawrect, maze

我正在尝试实现一个迷宫游戏，该游戏将通过开发的代码绘制自己的关卡`drawRect`，我只需要知道如何检测将由代码绘制的图像内容的边界，

我正在使用`UIButton`以下代码进行拖动：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
     map = [[mapView alloc]initWithFrame:CGRectMake(0, 0, 200, 200)];
    [self.view addSubview:map];

    self.view.backgroundColor = [UIColor blackColor];
    meButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [meButton setTitle:@"Drag me!" forState:UIControlStateNormal];
    meButton.backgroundColor = [UIColor yellowColor];
    [meButton addTarget:self action:@selector(wasDragged:withEvent:) forControlEvents:UIControlEventTouchDragInside];

    meButton.frame = CGRectMake(100,100,50, 50);

    [self.view addSubview:meButton];
 }

- (void)wasDragged:(UIButton *)button withEvent:(UIEvent *)event
{
    UITouch *touch = [[event touchesForView:button] anyObject];

    CGPoint previousLocation = [touch previousLocationInView:button];
    CGPoint location = [touch locationInView:button];
    CGFloat delta_x = location.x - previousLocation.x;
    CGFloat delta_y = location.y - previousLocation.y;

    // move button
    button.center = CGPointMake(button.center.x + delta_x,
                            button.center.y + delta_y);
    if(CGRectIntersectsRect(button.frame, map.frame)) {

        NSLog(@"CGRectIntersectsRect");

    }
} 
```

此代码用于绘制地图（仍未正确实现）

```
- (void)drawRect:(CGRect)rect;
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(context, 1.0, 1.0, 0.0, 1.0); // yellow line

    CGContextBeginPath(context);

    CGContextMoveToPoint(context, 50.0, 50.0); //start point
    CGContextAddLineToPoint(context, 250.0, 100.0);
    CGContextAddLineToPoint(context, 250.0, 350.0);
    CGContextAddLineToPoint(context, 50.0, 350.0); // end path

    CGContextClosePath(context); // close path

    CGContextSetLineWidth(context, 8.0); // this is set from now on until you explicitly change it

    CGContextStrokePath(context); // do actual stroking

    CGContextSetRGBFillColor(context, 0.0, 1.0, 0.0, 0.5); // green color, half transparent
    CGContextFillRect(context, CGRectMake(20.0, 250.0, 128.0, 128.0)); // a square at the bottom left-hand corner
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:53:27.280

所以你有两种方法可以真正实现这一目标。第一个，在我看来更难的选项是测试您当前在迷宫中的像素，看看颜色是否对应于墙壁。这种方法可能会出现一些微妙的问题，这意味着它不是最佳的。

更好的方法是将您的屏幕划分为一个网格（例如，大小为 10x10 像素）并使用它来保存您的迷宫地图（例如，使用二维布尔数组）。这样您就可以简单地查看您所在的当前图块并查看允许的移动方向。这是处理迷宫的相当标准的方法。

# .net - 如何在 installshield 2010 中添加先决条件？

> ID：13899816
> 
> 赞同：1
> 
> 时间：2012-12-16T08:45:41.130
> 
> 标签：.net, installation

如何在 installshield 2010 中添加额外的先决条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T06:11:34.330

在工具 >>prerequisite 编辑器中添加一个默认名称为 MyPrerequisite1 的先决条件，然后您可以重命名此名称转到路径 C:\Program Files (x86)\InstallShield\2010\SetupPrerequisites 找到文件 MyPrerequisite1.prq 并更改名称然后运行 ​​install shield

# python - 点安装 web2py

> ID：13899823
> 
> 赞同：5
> 
> 时间：2012-12-16T08:46:52.957
> 
> 标签：python, pip, web2py

我试图用 pip 安装 Web2py。安装成功完成。但在那之后我不知道如何启动服务器。我知道有三个应用程序是“w2p_clone”、“w2p_apps”和“w2p_run”。我不知道如何使用这三个应用程序。而且我没有为 Web2py 设置我的虚拟环境，但是即使我没有虚拟环境，我也可以从 src 代码启动 Web2py 服务器（如 python web2py.py）

我只想知道如何将 pip intall 用于 Web2py。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:46:53.193

我想我可以回答我自己的问题：我们不需要安装 web2py，只需下载它并 python 它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:29:57.530

'python web2py.py' 启动服务器，它会自动启动您的默认网络浏览器。输入密码后，您可以看到 web2py 管理界面，您可以在其中创建应用程序或研究示例应用程序。

相应的文档在这里： [http ://web2py.com/books/default/chapter/29/03](http://web2py.com/books/default/chapter/29/03)

# node.js - TCP服务器不关闭，nodeJS

> ID：13899824
> 
> 赞同：0
> 
> 时间：2012-12-16T08:47:02.360
> 
> 标签：node.js, tcp, tcplistener

我正在尝试调用`close()`TCP`nodeJS`服务器，但似乎没有发生。这是我的代码

```
var net = require('net');

var server = net.createServer(function(){console.log("SERVER CREATED")});

server.listen(4000,function(){console.log("SERVER LISTENING")});

setTimeout(function () {
            console.log(">>> CLOSING ");
            server.close(function () {console.log("CLOSED!!")});
        }, 2000);

setTimeout(function () {
            console.log(">>> TEST TIMED OUT!!! ");
            process.exit(1);
        }, 2000); 
```

我使用计时器来确保服务器有足够的时间来调用回调函数。它很奇怪，但我得到的唯一输出是

```
SERVER LISTENING
>>> CLOSING 
>>> TEST TIMED OUT!!! 
```

任何想法为什么？被关闭调用但不知何故没有输出任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:07:07.803

我运行了你的代码，它确实很有意义。如果您增加进程退出的超时时间，它将按您的预期工作。

节点是单线程的，因此一次只会执行一件事。它还按照链接到它们的事件发生的顺序调用回调。

我已经重写了你的测试，以便更容易解释顺序：

```
var net = require('net'),
    serverCreated = function(){console.log("SERVER CREATED")},
    serverListening = function(){console.log("SERVER LISTENING")},
    serverClosing = function () {
      console.log(">>> CLOSING ");
      server.close(serverClosed)
    },
    serverClosed = function () {console.log("CLOSED!!")},
    processExit = function () {
      console.log(">>> TEST TIMED OUT!!! ");
      process.exit(1);
    },
    server = net.createServer(serverCreated);

server.listen(4000,serverListening);

setTimeout(serverClosing, 2000);

setTimeout(processExit, 2000); 
```

所以执行顺序是：

1.  创建所有变量
2.  server.listen(4000,serverListen);
3.  节点将 serverListening 添加到回调队列
4.  设置超时（服务器关闭，2000）；
5.  节点将 serverClosing 添加到回调队列
6.  设置超时（进程退出，2000）；
7.  节点将 processExit 添加到回调队列
8.  2 秒：节点调用 serverClosing
9.  2 秒：节点调用 processExit
10.  进程存在，执行停止。

如果在第 6 步加上 4ms，那么 6 之后的顺序变为：

1.  节点将 processExit 添加到回调队列
2.  2 秒：节点调用 serverClosing
3.  服务器关闭
4.  2.004 秒：节点调用 processExit
5.  进程存在，执行停止。

在我的机器上我必须添加 4ms，但在其他机器上它可能或多或少。这取决于 ServerClosing 需要多长时间。

注意：您不必调用proces.exit。当没有更多的回调或代码要执行时，节点将退出。只需从我的示例中删除最后一行来测试它。

# iphone - 如何获取关系键

> ID：13899826
> 
> 赞同：3
> 
> 时间：2012-12-16T08:47:39.693
> 
> 标签：iphone, ios, xcode, ipad, restkit

对不起英语:( ....我知道用restkit编写简单的json。但非常令人困惑的json如下所示。

```
 {
    "success": {
        "code": 1,
        "message": "Message"
    },
    "customers": [
        {
            "customerId": "182",
            "customerName": "anil",
            "email": "anil@yahoo.com",
            "customerAbout": "To show the customer details",
            "customerLogoSmall": "http://server.com/ thumb/1.jpg",
            "customerLogoLarge": "http://server.com/ 2.jpg",
            "ratingPoint": "10",
            "address": "adress of customer",
.
.
.
            "openingHour": [
                {
                    "day": "monday",
                    "morning": "10to12.30",
                    "evening": "1to6",
                    "customerId": "182"
                },
                {
                    "day": "sunday",
                    "morning": "",
                    "evening": "",
                    "customerId": "182"
                }
            ]
        },
        {
            "customerId": "183",
            "customerName": "miche",
            "email": "babu@yahoo.com",
            "customerAbout": "To show the customer details",
            "customerLogoSmall": "http://server.com/ thumb/1.jpg",
            "customerLogoLarge": "http://server.com/ 2.jpg",
            "ratingPoint": "10",
.
.
.
            "openingHour": [
                {
                    "day": "monday",
                    "morning": "10to12.30",
                    "evening": "1to6",
                    "customerId": "183"
                },
                {
                    "day": "sunday",
                    "morning": "",
                    "evening": "",
                    "customerId": "183"
                }
            ]
        }
    ],
    "allCustomers": [
        {
            "customerId": "182"
        },
        {
            "customerId": "183"
        }
    ]
} 
```

//CheckInCustomerOpeningHour.h（对于 'openingHour' 键）

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>
@class CheckInCustomers;
@interface CheckInCustomerOpeningHour : NSManagedObject
@property (nonatomic, retain) NSNumber * customerId;
@property (nonatomic, retain) NSString * day;
@property (nonatomic, retain) NSString * evening;
@property (nonatomic, retain) NSString * morning;
@property (nonatomic, retain) CheckInCustomers *openHourrelationship;
@end 
```

//CheckInCustomers.h（对于“客户”键）

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>
@class CheckInCustomerOpeningHour;
@interface CheckInCustomers : NSManagedObject
@property (nonatomic, retain) NSString * address;
@property (nonatomic, retain) NSNumber * alreadyRated;
@property (nonatomic, retain) NSString * alreadyRatedMessage;
@property (nonatomic, retain) NSNumber * avgCustomerRating;
@property (nonatomic, retain) NSNumber * bonusProgram;
@property (nonatomic, retain) NSString * colourCode;
@property (nonatomic, retain) NSString * contactNumber;
@property (nonatomic, retain) NSString * customerAbout;
@property (nonatomic, retain) NSNumber * customerId;
@property (nonatomic, retain) NSString * customerLogoLarge;
@property (nonatomic, retain) NSString * customerLogoSmall;
@property (nonatomic, retain) NSString * customerName;
@property (nonatomic, retain) NSNumber * distanceToShop;
@property (nonatomic, retain) NSString * email;
@property (nonatomic, retain) NSString * location;
@property (nonatomic, retain) NSString * locationLatitude;
@property (nonatomic, retain) NSString * locationLongitude;
@property (nonatomic, retain) NSNumber * numberOfCustomerRating;
@property (nonatomic, retain) NSNumber * offerCount;
@property (nonatomic, retain) NSNumber * rateLater;
@property (nonatomic, retain) NSNumber * ratingPoint;
@property (nonatomic, retain) CheckInCustomerOpeningHour *customerRelationShip;
@end 
```

//CheckInAllCustomers.h（对于'allCustomers'键）

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>
@interface CheckInAllCustomers : NSManagedObject
@property (nonatomic, retain) NSNumber * customerId;
@end 
```

//映射代码

```
RKObjectManager *objectManager = [[OPRestKit sharedDataManager] objectManager];

    RKObjectMapping *success_Mapping = [RKObjectMapping mappingForClass:[checkInSuccess class]];
    [success_Mapping mapKeyPath:@"code" toAttribute:@"code"];
    [success_Mapping mapKeyPath:@"message" toAttribute:@"message"];
    [objectManager.mappingProvider setMapping:success_Mapping forKeyPath:@"success"];

    RKManagedObjectMapping *openingHour_Mapping = [RKManagedObjectMapping mappingForClass:[CheckInCustomerOpeningHour class]
                                                                     inManagedObjectStore:objectManager.objectStore];
    openingHour_Mapping.primaryKeyAttribute = @"customerId";
    [openingHour_Mapping mapKeyPath:@"customerId" toAttribute:@"customerId"];
    [openingHour_Mapping mapKeyPath:@"day" toAttribute:@"day"];
    [openingHour_Mapping mapKeyPath:@"evening" toAttribute:@"evening"];
    [openingHour_Mapping mapKeyPath:@"morning" toAttribute:@"morning"];

    RKObjectMapping *hour_Mapping = [RKObjectMapping mappingForClass:[checkInOpeningHour class]];
    [hour_Mapping mapKeyPath:@"openingHour" toRelationship:@"openingHourData" withMapping:openingHour_Mapping];

    RKManagedObjectMapping *getCustomer_Mapping = [RKManagedObjectMapping mappingForClass:[CheckInCustomers class]
                                                                     inManagedObjectStore:objectManager.objectStore];
    getCustomer_Mapping.primaryKeyAttribute = @"customerId";
    [getCustomer_Mapping mapKeyPath:@"customerId" toAttribute:@"customerId"];
    [getCustomer_Mapping mapKeyPath:@"address" toAttribute:@"address"];
    [getCustomer_Mapping mapKeyPath:@"alreadyRated" toAttribute:@"alreadyRated"];
    [getCustomer_Mapping mapKeyPath:@"alreadyRatedMessage" toAttribute:@"alreadyRatedMessage"];
    [getCustomer_Mapping mapKeyPath:@"avgCustomerRating" toAttribute:@"avgCustomerRating"];
    [getCustomer_Mapping mapKeyPath:@"bonusProgram" toAttribute:@"bonusProgram"];
    [getCustomer_Mapping mapKeyPath:@"colourCode" toAttribute:@"colourCode"];
    [getCustomer_Mapping mapKeyPath:@"contactNumber" toAttribute:@"contactNumber"];
    [getCustomer_Mapping mapKeyPath:@"customerAbout" toAttribute:@"customerAbout"];
    [getCustomer_Mapping mapKeyPath:@"customerLogoLarge" toAttribute:@"customerLogoLarge"];
    [getCustomer_Mapping mapKeyPath:@"customerLogoSmall" toAttribute:@"customerLogoSmall"];
    [getCustomer_Mapping mapKeyPath:@"customerName" toAttribute:@"customerName"];
    [getCustomer_Mapping mapKeyPath:@"distanceToShop" toAttribute:@"distanceToShop"];
    [getCustomer_Mapping mapKeyPath:@"email" toAttribute:@"email"];
    [getCustomer_Mapping mapKeyPath:@"location" toAttribute:@"location"];
    [getCustomer_Mapping mapKeyPath:@"locationLatitude" toAttribute:@"locationLatitude"];
    [getCustomer_Mapping mapKeyPath:@"locationLongitude" toAttribute:@"locationLongitude"];
    [getCustomer_Mapping mapKeyPath:@"numberOfCustomerRating" toAttribute:@"numberOfCustomerRating"];
    [getCustomer_Mapping mapKeyPath:@"offerCount" toAttribute:@"offerCount"];
    [getCustomer_Mapping mapKeyPath:@"rateLater" toAttribute:@"rateLater"];
    [getCustomer_Mapping mapKeyPath:@"openingHour" toRelationship:@"customerRelationShip" withMapping:openingHour_Mapping];

    RKManagedObjectMapping *getAllCustomer_Mapping = [RKManagedObjectMapping mappingForClass:[CheckInAllCustomers class]
                                                                     inManagedObjectStore:objectManager.objectStore];
    [getAllCustomer_Mapping mapKeyPath:@"customerId" toAttribute:@"customerId"];

    RKObjectMapping *c_Mapping = [RKObjectMapping mappingForClass:[checkInRoot class]];
    [c_Mapping mapKeyPath:@"customers" toRelationship:@"customersData" withMapping:getCustomer_Mapping];
    [c_Mapping mapKeyPath:@"allCustomers" toRelationship:@"allCustomersData" withMapping:getAllCustomer_Mapping];

    [objectManager.mappingProvider registerMapping:c_Mapping withRootKeyPath:@""]; 
```

输出将获得 'success'、'customers' 和 'allCustomers' 但 'openingHour' 值为 NULL。

```
[getCustomer_Mapping mapKeyPath:@"openingHour" toRelationship:@"customerRelationShip" withMapping:openingHour_Mapping]; 
```

像上面的代码一样正确吗？我不知道如何获得“openingHour”键的值。请帮助我

# 编辑：

让我解释一下它是如何工作的：

*   上面的 json 是从我们的服务器获取的。所有密钥都需要保存到核心数据中。
*   “成功”键是对象而不是数组。它将保存“checkInSuccess”类对象但不需要核心数据。
*   “客户”键是数组。它将使用“CheckInCustomers”对象保存到 coredata。
*   'allCustomers' 键是另一个数组。它将使用“CheckInAllCustomers”对象保存到 coredata。
*   'openingHour' 键是一个数组。我们需要保存到核心数据。
*   我使用了不会通过“checkInOpeningHour”对象保存到 coredata 的代码。那是问题。
*   我想知道如何在 coredata 中保存“openingHour”数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:16:12.057

看看它怎么运作：

```
NSDictionary *dictionary = [yourParser parse: jsonString];
for (int i= 0; i < [[dictionary valueForKey:@"customers"] count]; i++) {
    NSArray *openingHourArray = [[[dictionary valueForKey:@"customers"] objectAtIndex:i] valueForKey: openingHour];

    for(int j = 0; j <[openingHourArray count]; j++){
        NSDictionary *openingHourDictionary = [openingHourArray objectAtIndex:i];
        NSLog(@"openingHourDictionary =%@", openingHourDictionary);
    }

} 
```

这里给你一个作业，`valueForKey`相应地检查返回的值是dict还是array。否则会导致应用程序崩溃。快乐的编码.. :)

# ruby-on-rails - 使用 mongoid 捕获所有验证错误

> ID：13899831
> 
> 赞同：1
> 
> 时间：2012-12-16T08:49:32.483
> 
> 标签：ruby-on-rails, exception, mongoid, rescue

我尝试这样做以从基类中捕获所有验证错误：

```
rescue_from Mongoid::Errors::Validations, :with => :rescue_from_validations 
```

似乎不起作用。

也试过这个：

```
around_filter :handle_errors 
```

两者都不起作用。

示例场景是我正在使用设计并尝试创建密码小于 6 的用户，因此出现验证错误：

[“密码太短（最少6个字符）”]

有没有办法在控制器范围内捕捉到这一点？基本上我想编写一个代码来捕获所有验证错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:43:38.200

也许您想创建自己的`RegistrationsController`继承自`Devise::RegistrationsController`（有关更多信息，请参阅[此](https://github.com/plataformatec/devise#configuring-controllers)内容），然后您可以`rescue_from`在该控制器中添加您的代码。

# php - 仅当用户在 php 中关闭/离开网站的所有页面时，如何销毁会话？

> ID：13899832
> 
> 赞同：-1
> 
> 时间：2012-12-16T08:49:45.247
> 
> 标签：php

我的网站有 5 个页面，page1.php、page2.php、page3.php、page4.php、logout.php。

page4.php 有一个登录表单，上面有一个 php 脚本，用于从登录表单捕获用户输入并将其放入会话中，然后将用户重定向到他来自的我网站的页面（通过使用 header(' location: '.$_SESSION['page']);) ，或者如果他不是来自任何页面，即他的第一个访问页面是page4.php，则将他重定向到page1.php。最上面有 session_start();

Page1.php 、 page2.php 和 page3.php 代码：

```
<?php
 session_start();
 $_SESSION['page'] = $_SERVER['PHP_SELF'];
 // also have a link to click to go to page4.php if not logged in and a link to   
 //logout.php
?> 
```

logout.php 的代码：

```
<?php 
session_start();
session_destroy();
header('location: '.$_SESSION['page']);
?> 
```

问题是当用户单击注销链接 logout.php 破坏所有会话并重定向到它来自的页面时，再次设置 $_SESSION['page'] 并且即使所有页面都关闭也不会被破坏。因此，下次如果用户第一次访问 page4.php 并登录，他将被重定向到他上次访问该站点时所在的页面。我希望用户关闭所有页面（如果他打开了多个站点页面选项卡）然后第一次访问page4.php，他会被重定向到page1.php。仅当站点的所有页面都关闭时，我如何销毁会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:58:24.433

```
<?php 
session_start();
$temp = $_SESSION['page'];
$_SESSION = array();
session_destroy();
header('location: '. $temp);

?> 
```

如果我理解正确，您希望清除会话数据，以便在注销后不会使用旧页面。

关于如何正确结束会话的 PHP.net 示例：

*   [http://us3.php.net/manual/en/function.session-destroy.php#example-4515](http://us3.php.net/manual/en/function.session-destroy.php#example-4515)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T08:55:43.697

在设置任何新会话之前，当用户首先登录站点时首先销毁所有会话是否有意义？只要您不需要前一页中的任何内容，加载的每个新页面也是如此。显然，您将需要您的登录会话，因此您不会破坏该会话。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-16T08:53:40.030

你想用`session_unset()`清除所有`$_SESSION`。对于特定`$_SESSION`变量，请使用`unset($_SESSION['whatever'])`

# sql - 列减少时 SQL 查询花费更多时间

> ID：13899833
> 
> 赞同：0
> 
> 时间：2012-12-16T08:49:48.070
> 
> 标签：sql, sql-server, execution-time

我有一个选择查询，其中包含来自 15 个表的 100 多列和超过 100000 行。该查询的执行时间约为 15 分钟。现在，当我将列数减少到 50 并注释掉相应的表时。根据我的理解，新查询应该花费不到 15 分钟，但现在执行时间增加到 4 小时 :(。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:52:15.663

如果没有更详细的信息，我建议重建查询中涉及的所有表的索引（并更新任何剩余的列统计信息）：

```
DBCC DBREINDEX('MyTable')
go

UPDATE STATISTICS MyTable WITH FULLSCAN, COLUMNS
go 
```

[关于在生产服务器上运行的常见警告/注意事项适用]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:46:50.060

我建议您进行一些优化：

1.  确保你的表有索引；WHERE 条件或 JOIN 条件中使用的列需要在这些索引中
2.  除非需要，否则请确保不要使用“*”选择器；

# android - 在 Fragment 类中更改方向时保留数据

> ID：13899835
> 
> 赞同：1
> 
> 时间：2012-12-16T08:50:13.113
> 
> 标签：android, orientation

我正在为学校的工作制作 Android Jabber 聊天客户端。

到目前为止一切正常。但是当我改变手机的方向时，它会重新连接到服务器。

重新连接只需要 3-5 秒，但在此期间如果我发送消息，则会导致`NullPointerException`which 是`XMPPConnection`变量。

通过谷歌搜索，我发现我可以使用`onRetainNonConfigurationInstance`，但我的`ChatClient`类扩展`Fragment`并且它不可用。

我的目标是 4.0.3+，所以我不需要担心兼容性支持等问题。

`static`除了使用变量之外的任何解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:00:20.673

我不确定在片段中托管您的 xmppconnection 是一个好主意。

一种常见的方法是将其托管在[服务](http://developer.android.com/reference/android/app/Service.html)中，这样即使应用程序在后台（并且在任何情况下不依赖于您的活动/片段重新创建），您的连接也可以持续存在，或者，如果您对连接它不感兴趣当您的应用程序处于后台时，另一个不错的选择是将 xmppconnection 托管在单例对象中。

另一方面，如果这是一个学校项目，而您想要的只是片段随配置更改（例如旋转）保持不变，则可以使用 [setRetainInstance](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)方法：

> 控制是否在 Activity 重新创建期间（例如从配置更改）保留片段实例。这只能与不在后台堆栈中的片段一起使用。

# ruby - Octopress 包含代码崩溃

> ID：13899848
> 
> 赞同：1
> 
> 时间：2012-12-16T08:53:23.523
> 
> 标签：ruby, linux, gem, jekyll, octopress

我使用 Octopress (jekyll) 作为博客引擎/生成器。当我包含一段代码时

```
{% include_code foo.bar %} 
```

语法，它完全崩溃了。如果我使用其他语法在标记内编写代码，也会发生这种情况

```
``` ruby
puts foo
``` 
```

但只有当我指定一种语言时。

我不知道如何解决它，stackoverflow**上类似问题的答案****并没有让我找到解决方案**！修补 gem 不起作用，插入插件`RubyPython::Interpreter.configure`等等也不起作用。

我正在运行 ArchLinux。

这是错误输出：

```
~/blog$ rake generate
## Generating Site with Jekyll
unchanged sass/screen.scss
Configuration from /home/matthias/blog/_config.yml
/usr/lib/ruby/gems/1.9.1/gems/blankslate-3.1.2/lib/blankslate.rb:51: warning: undefining `object_id' may cause serious problems
Building site: source -> public
  File "<string>", line 1
    import sys; print sys.executable
                        ^
SyntaxError: invalid syntax
sh: - : Ungültige Option
Benutzung:      sh [Lange GNU Option] [Option] ...
                sh [Lange GNU Option] [Option] Script-Datei ...
Lange GNU Optionen:
        --debug
        --debugger
        --dump-po-strings
        --dump-strings
        --help
        --init-file
        --login
        --noediting
        --noprofile
        --norc
        --posix
        --protected
        --rcfile
        --restricted
        --verbose
        --version
Shell-Optionen:
        -irsD oder -c Kommando          (Nur Aufruf)
        -abefhkmnptuvxBCHP oder Option -o
sh: - : Ungültige Option
Benutzung:      sh [Lange GNU Option] [Option] ...
                sh [Lange GNU Option] [Option] Script-Datei ...
Lange GNU Optionen:
        --debug
        --debugger
        --dump-po-strings
        --dump-strings
        --help
        --init-file
        --login
        --noediting
        --noprofile
        --norc
        --posix
        --protected
        --rcfile
        --restricted
        --verbose
        --version
Shell-Optionen:
        -irsD oder -c Kommando          (Nur Aufruf)
        -abefhkmnptuvxBCHP oder Option -o
/usr/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/lib/ffi/library.rb:121:in `block in ffi_lib': Could not open library 'lib.so': lib.so: cannot open shared object file: No such file or directory (LoadError)
        from /usr/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/lib/ffi/library.rb:88:in `map'
        from /usr/lib/ruby/gems/1.9.1/gems/ffi-1.0.11/lib/ffi/library.rb:88:in `ffi_lib'
        from /usr/lib/ruby/gems/1.9.1/gems/rubypython-0.5.3/lib/rubypython/python.rb:29:in `<module:Python>'
        from /usr/lib/ruby/gems/1.9.1/gems/rubypython-0.5.3/lib/rubypython/python.rb:21:in `<top (required)>'
        from /usr/lib/ruby/gems/1.9.1/gems/rubypython-0.5.3/lib/rubypython.rb:261:in `load'
        from /usr/lib/ruby/gems/1.9.1/gems/rubypython-0.5.3/lib/rubypython.rb:261:in `reload_library'
        from /usr/lib/ruby/gems/1.9.1/gems/rubypython-0.5.3/lib/rubypython.rb:104:in `start'
        from /usr/lib/ruby/gems/1.9.1/gems/pygments.rb-0.2.13/lib/pygments/ffi.rb:8:in `start'
        from /usr/lib/ruby/gems/1.9.1/gems/pygments.rb-0.2.13/lib/pygments/ffi.rb:82:in `highlight'
        from /home/matthias/blog/plugins/pygments_code.rb:24:in `pygments'
        from /home/matthias/blog/plugins/pygments_code.rb:14:in `highlight'
        from /home/matthias/blog/plugins/backtick_code_block.rb:37:in `block in render_code_block'
        from /home/matthias/blog/plugins/backtick_code_block.rb:13:in `gsub'
        from /home/matthias/blog/plugins/backtick_code_block.rb:13:in `render_code_block'
        from /home/matthias/blog/plugins/octopress_filters.rb:12:in `pre_filter'
        from /home/matthias/blog/plugins/octopress_filters.rb:28:in `pre_render'
        from /home/matthias/blog/plugins/post_filters.rb:112:in `block in pre_render'
        from /home/matthias/blog/plugins/post_filters.rb:111:in `each'
        from /home/matthias/blog/plugins/post_filters.rb:111:in `pre_render'
        from /home/matthias/blog/plugins/post_filters.rb:166:in `do_layout'
        from /usr/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/post.rb:189:in `render'
        from /usr/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/site.rb:193:in `block in render'
        from /usr/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/site.rb:192:in `each'
        from /usr/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/site.rb:192:in `render'
        from /usr/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/site.rb:40:in `process'
        from /usr/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/bin/jekyll:250:in `<top (required)>'
        from /usr/bin/jekyll:19:in `load'
        from /usr/bin/jekyll:19:in `<main>'
~/blog$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:58:02.770

如果我将 /usr/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.4/lib/pygments/mentos.py 的第一行改为运行“python2”，它适用于 Arch Linux “蟒蛇”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:13:07.370

This might help:
[https://github.com/tmm1/pygments.rb/issues/35](https://github.com/tmm1/pygments.rb/issues/35)

You seem to be running an old(er) version of `pygments`.
As of this writing 0.3.2 looks like the newest one:

[http://rubygems.org/gems/pygments.rb](http://rubygems.org/gems/pygments.rb)

# c# - 网站中需要的 app.config 条目

> ID：13899849
> 
> 赞同：1
> 
> 时间：2012-12-16T08:53:37.250
> 
> 标签：c#, asp.net, visual-studio-2010, web-applications

我有一个 Visual Stuido 2010 网站项目（不是 Web 应用程序）。我需要提供进行 Web 服务调用的能力，无论是从网站按钮临时调用还是预定调用。因此，我创建了 ac# 库，其中包含对目标 Web 服务的 WCF 调用。然后我从网站上添加对我的图书馆的引用。我现在可以在我的库上调用一个公共方法，然后调用 web 服务 - 太棒了！

我的问题是，该网站似乎坚持要求调用 Web 服务所需的 system.servicemodel web.config 条目。虽然这可行，但这意味着我有两个地方可以维护它们 - 在客户端网站的 web.config 和我的 c# 库的 app.config 中。我还创建了引用库应用程序的 ac# 控制台应用程序（以按计划触发 Web 服务调用），这也需要在其 app.config 中复制 system.servicemodel 条目。这同样适用于连接字符串。

有谁知道是否有一种简单的方法可以避免这种依赖于在解决方案的各个项目中传播重复的 web.config / app.config 条目的情况？

谢谢，罗伯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:03:28.657

您可以将相关配置部分“外部化”到单独的文件中，并从两者`app.config`以及您的`web.config`.

任何 .NET 配置部分都可以存储到外部配置文件中，因此您可以编写：

```
<system.serviceModel>
  <bindings configSource="bindings.config" />
  <behaviors configSource="behaviors.config" />
  <client configSource="client.config" /> 
  ....
</system.serviceModel> 
```

现在，您的外部文件将与配置中的相关配置部分完全相同：

`bindings.config`：

```
<?xml version="1.0" encoding="utf-8" />
<bindings>
   <basicHttpBinding>
       <binding name="......."  ...... />
   </basicHttpBinding>
</bindings> 
```

注意：Visual Studio 的编辑器会抱怨该`configSource=`属性 - 但 Intellisense 混淆了 -每个配置部分**都**`configSource`存在该属性，并且**它工作**得很好！

 ****注意＃2：您不能将整个部分外部化，`<system.serviceModel>`因为这是一个**配置部分组**- 不幸的是，这些部分没有任何方法可以放入外部文件中。****

# java - 如何使用 java 创建 git 的提交功能？

> ID：13899852
> 
> 赞同：0
> 
> 时间：2012-12-16T08:54:11.123
> 
> 标签：java, eclipse, git

我是 git 的新用户。我正在使用 java 在我自己的系统上的本地存储库上扩展 eclipse 中的 git 功能。我必须使用 java 开发 git 的提交功能。您能否准确说明我应该导入哪些库以进行提交和版本控制？我需要在eclipse中安装任何其他库吗？如果是，请给我一个链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:49:01.417

如果你想在 Java 中实现 Git 功能，一个好的库是[JGIT](http://www.eclipse.org/jgit/)。

> JGit 是一个 EDL（新型 BSD）许可的轻量级纯 Java 库，实现了 Git 版本控制系统：

然后再次：

> JGit 的依赖项非常少，使其适合嵌入任何 Java 应用程序，无论该应用程序是否利用其他 Eclipse 或 OSGi 技术

# android - TypeError: _init_() 至少需要 3 个参数（给定 2 个） MonkeyRunner

> ID：13899859
> 
> 赞同：1
> 
> 时间：2012-12-16T08:56:01.737
> 
> 标签：android, testing, monkeyrunner

我正在使用monkeyrunner 测试Android UI。我成功地使用 startActivity(component) 使用 MonkeyRunner 启动了一项活动。但现在我想使用以下代码在我的 UI 上单击一个名为“示例”的按钮：

> device.startActivity（组件=运行组件）
> 
> vc=ViewClient(设备)
> 
> vc.dump()

当我运行这个 python 脚本时，在到达这一行时，我的脚本以错误结束

> vc=ViewClient(设备)
> 
> TypeError: _ *init* () 至少需要 3 个参数（2 个给定）

我究竟做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:05:05.337

可以在monkey runner中使用以下行按下名称为**Entry的视图**

```
vc=ViewClient.findViewWithText('Entry')
vc.touch() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:52:41.923

这是 ViewClient 的**初始化**签名和 epydoc：

```
def __init__(self, device, serialno, adb=None, autodump=True, localport=VIEW_SERVER_PORT, remoteport=VIEW_SERVER_PORT, startviewserver=True):
    '''
    Constructor

    @type device: MonkeyDevice
    @param device: The device running the C{View server} to which this client will connect
    @type serialno: str
    @param serialno: the serial number of the device or emulator to connect to
    @type adb: str
    @param adb: the path of the C{adb} executable or None and C{ViewClient} will try to find it
    @type autodump: boolean
    @param autodump: whether an automatic dump is performed at the end of this constructor
    @type localport: int
    @param localport: the local port used in the redirection
    @type remoteport: int
    @param remoteport: the remote port used to start the C{ViewServer} in the device or
                       emulator
    @type startviewserverparam: boolean
    @param startviewserverparam: Whether to start the B{global} ViewServer
    ''' 
```

如您所见，**init**至少需要 2 个参数：`device`和`serialno`. 所有其他参数都是可选的。在大多数情况下，这些参数是从 ViewClient.connectToDevice() 获得的：

```
device, serialno = ViewClient.connectToDeviceOrExit()
device.startActivity(component=component)
time.sleep(3)
vc = ViewClient(device, serialno) 
```

**重要提示：** 您应该只连接到您的设备一次。你只需要`MonkeyRunner.waitForConnection`或`AndroidViewClient.connectToDeviceOrExit`不需要*两者*！

# jquery - Jquery .hide 没有按预期工作。没有错误和空白控制台

> ID：13899860
> 
> 赞同：2
> 
> 时间：2012-12-16T08:56:16.253
> 
> 标签：jquery, show-hide

我在 .click 中有一个 jQuery 函数，但它不起作用。我已经测试了 jQuery 并且它正在工作，但是已经尝试了多种组合作为 .click 内的测试，并且由于某种原因无法正常工作。控制台为空白，并表示没有错误。但是，它确实说它找不到我定义的任何变量...

html:

```
<body>
    <section id="container_header">
        <header>
            <nav>
                <a id="home">Home</a>
                <a id="about">About</a>
                <a id="work">Work</a>
                <a id="contact">Contact</a>
            </nav>
        </header>
    </section>
    <section id="container_content">
        <div class="section" id="section-home"></div>
        <div class="section" id="section-about"></div>
        <div class="section" id="section-work"></div>
        <div class="section" id="section-contact"></div>
    </section> 
```

使用 CSS 我正在渲染空 div 并且它们正确显示。现在对于js：

```
 $(function(){
            $(this).click(function(){
                var pid = $(this).attr("id"); //console says this var is not defined???
                $(this).hide(); //even this does not work???
                //$("div[id^=section-]").hide(); //this works just fine???
                //$(this).closest("#container_header").hide(); //not working???
                //$(this).closest("body").find("#section-" + pid).show(); //no likey???
                //alert("h"); //works
            });
        }); 
```

上面的评论描述了有用的东西和没有用的东西。这可能是愚蠢的，但我看不到。是的，在测试时，我会在尝试之前删除评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:02:18.517

在`ready`处理程序中，`this`绑定到文档本身。既然你写了：

```
$(function() {
    $(this).click(function() {  // Here, 'this' is 'document'.
        var pid = $(this).attr("id");
        $(this).hide();
    }
}); 
```

您正在尝试获取`id`不存在的文档的属性，然后隐藏文档本身，这是无法实现的。

尝试匹配暴露类的`<div>`元素：`section`

```
$(function() {
    $("div.section").click(function() {
        var pid = $(this).attr("id");
        $(this).hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T09:01:01.643

也许这就是你想要的，你的第一个`this`用错了，应该是标签选择器。

```
$(function() {
  $('#container_header a').click(function() {
    $('#container_content > div').hide();
    $('#section-'+this.id).show();
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-16T14:18:51.257

您可以使用以下命令删除所有控制台日志：

```
if ( window.console && window.console.log ) {  console.clear(); } 
```

# php - PHP：将 CSV 导入 MYSQL

> ID：13899862
> 
> 赞同：-2
> 
> 时间：2012-12-16T08:56:42.047
> 
> 标签：php, mysql

我正在尝试将一些数据从 CSV 文件（带有标题）导入 MySQL 表。我已经调试了这个脚本，它似乎一直在工作，直到“句柄”变量。当我运行此代码时，我得到一个空白屏幕，并且 MySQL 表未使用 CSV 数据更新。我可能在这里遗漏了一些东西。任何帮助表示赞赏！

谢谢，

AME

这是代码：

```
<?PHP

error_reporting(E_ALL & ~E_NOTICE);
if (ini_get('display_errors') === FALSE) {
ini_set('display_errors', 1);
}

$dbhost = 'localhost';
$dbuser = 'myusernam';
$dbpasswd = 'mypassword';
$db = "dbname";

$dbh = mysql_connect($dbhost, $dbuser, $dbpasswd) or die("Unable to connect to SQL server");
$my_db = @mysql_select_db($db, $dbh) or die("Unable to select database");

$file = $_SERVER['DOCUMENT_ROOT']."/home/test.csv";

$handle = fopen($file, "r");

while (($fileop = fgetcsv($handle,1000,",")) !==false)
{

    $listid = $fileop[0];
    $listclass = $fileop[1];
    $type = $fileop[2];
    $status = $fileop[3];
    $remarks = $fileop[3];
    $streetaddress = $fileop[6];
    $fulladdress = $fileop[6].",".$fileop[7].",".$fileop[8];
    $orgname = $fileop[9];
    $licenseid = $fileop[10];
    $agentname = $fileop[12]." ".$fileop[12];
    $imagecount = $fileop[13];

    $sql = mysql_query("INSERT INTO markers (id,Class,Status,AskingPrice,Remarks,StreetAddres,address,OrgName,AgentLicenseID,AgentName,ImageCount) VALUES ('$listid','$listclass','$type','$status','$remarks','$streetaddress','$fulladdress','$orgname','$licenseid','$agentname','$imagecount')");

}

    if($sql)
    {
        echo 'data uploaded successfully';
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:11:52.550

Sounds to me like your file permissions are not correct, so your unable to read the file! To get error messages to output to your browser add this just under your `<?php` tag:

```
error_reporting(E_ALL & ~E_NOTICE);
if (ini_get('display_errors') === FALSE) {
    ini_set('display_errors', 1);
} 
```

If it's not the file permissions at least it should hopefully output something more useful to us!

# android - 从android中的路径中删除图像/文件名

> ID：13899865
> 
> 赞同：6
> 
> 时间：2012-12-16T08:57:35.587
> 
> 标签：android, relative-path

我从 SD 卡上的文件夹中选择了一个文件，现在我想获取该路径而不附加文件名，这是我如何做的代码：

```
currImageURI = data.getData();
String name=getRealPathFromURI(currImageURI); 
```

现在 name 存储所有路径，如 /mnt/sdcard/images/photo1.jpg。我想从这条路径中删除 photo1.jpg，在这方面需要帮助，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T09:01:25.863

用这个：

```
String path = new File(name).getParent(); 
```

# c++ - 如何设置全局容器（C++03）？

> ID：13899866
> 
> 赞同：4
> 
> 时间：2012-12-16T08:57:58.713
> 
> 标签：c++, global-variables, containers, c++03

我想定义一个全局容器（C++03），这是我试过的一个示例代码，它不起作用。

```
#include <vector>
#include <string>
using namespace std;

vector<string> Aries;
Aries.push_back("Taurus");    // line 6

int main() {} 
```

编译错误：

```
prog.cpp:6:1: error: 'Aries' does not name a type 
```

看来我可以定义一个空的全局向量，但不能填满它。看起来在 C++03 中，我也不能指定初始化程序，例如：

```
vector<string> Aries = { "Taurus" }; 
```

我在这里犯了一个错误，或者我该如何解决这个问题？

我尝试在 StackOverflow 上搜索以查看之前是否已回答过此问题，但仅遇到以下帖子：[C++ 中的全局对象、C++](https://stackoverflow.com/questions/4395102/global-objects-in-c)中的[定义全局常量](https://stackoverflow.com/questions/2268749/defining-global-constant-in-c)，但这无助于回答这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T09:02:41.677

虽然函数之外的声明和初始化（例如`main`）没有问题，但您不能在函数之外拥有代码。您要么需要在初始化时正确设置值（如在 C++11 中），要么在 main 中填充全局对象：

```
std::vector<string> Aries;

/* ... */

int main() {
    Aries.push_back("Taurus");
    /* ... */
} 
```

## 其他方式（不填充 main 中的向量）

### 单一值

还有其他不需要的方法`.push_back`或主要的其他代码。例如，如果`Aries`只包含一项，您可以使用`std::vector<T>::vector(size_t s, T t)`with`s == 1`和`t == "Taurus"`：

```
std::vector<string> Aries(1, "Taurus");

/* ... */

int main() { /* ... */ } 
```

如果您多次需要相同的值，您可以简单地调整`s`。

### 多个不同的值

现在这变得有点棘手。您想`vector`使用合适的构造函数来填充 。`std::vector<T>`在 C++03 中提供了四种不同的构造函数：

1.  `std::vector<T>::vector()`
2.  `std::vector<T>::vector(size_t, T = T())`
3.  `template <class InputIt> std::vector<T>::vector(InputIt, InputIt)`
4.  `std::vector<T>::vector(const vector&)` 请注意，它们实际上都将分配器作为附加的最后一个参数，但这不是我们关心的问题。

我们可以忘记`std::vector<T>::vector()`，因为我们想用值填充向量，`std::vector<T>::vector(size_t, T)`但也不适合，因为我们想要*不同的*值。剩下的是模板构造函数和复制构造函数。以下示例显示了如何使用模板化构造函数：

```
std::string const values[] = {"Taurus", "Ares", "Testos"};

template <class T, size_t N>
T* begin(T (&array)[N]){ // this is already in C++11, very helpful 
    return array;
}
template <class T, size_t N>
T* end(T (&array)[N]){
    return array+N;
}

std::vector<std::string> Aries(begin(values), end(values)); 
```

请注意，`begin`并且`end`不是必需的 - 我们可以简单地使用`Aries(values, values+3)`. 但是，事情往往会发生变化，您通常会添加一个值或删除一个值。如果您忘记更改偏移量`3`，您将忘记输入或跨越`values`.

然而，这个解决方案引入了一个新的全局变量，这不是很好。让我们退后一步。我们需要，`values`因为我们想使用`std::vector<T>::vector(InputIt, InputIt)`，它需要一个有效的范围。并且范围在我们使用构造函数的时候必须是已知的，所以它需要是全局的。诅咒！但是请注意：我们的工具箱仍然包含一个构造函数，即复制构造函数。为了使用它，我们创建了一个附加函数：

```
namespace {
    std::vector<std::string> initializer(){
        const std::string dummy_array[] = {"Taurus", "Ares", "Testos"};
        return std::vector<std::string>(begin(dummy_array), end(dummy_array));
    }
}

std::vector<std::string> Aries(initializer()); 
```

此示例同时使用复制构造函数和范围构造函数。您还可以创建一个临时向量并用于`std::vector<T>::push_back`在函数中填充它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-16T09:20:31.000

我找到了一个巧妙的解决方法来“初始化”C++03 全局 STL 容器（并且确实在之前“全局”执行代码`main()`）。这使用逗号运算符。参见示例：

```
#include <vector>
#include <string>
#include <iostream>
using namespace std;

vector<string> Aries;

// dummy variable initialization to setup the vector.
// using comma operator here to cause code execution in global scope.
int dummy = (Aries.push_back("Taurus"), Aries.push_back("Leo"), 0);

int main() {
    cout << Aries.at(0) << endl;
    cout << Aries.at(1) << endl;
} 
```

输出

```
Taurus
Leo 
```

唯一真正的问题，如果你可以这么说的话，就是额外的全局变量。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-20T21:08:59.997

我的经验是，这种“惊人但可怕”（帽子提示）的解决方案是不可预测的。您的初始化在加载时运行。您无法保证加载 ORDER。因此，使用该容器的所有东西都必须在同一个模块中，或者以某种方式保证在访问容器之前加载该模块。否则，容器构造函数尚未运行，但您的代码会愉快地调用它的访问器。

当它出错时，它会出错，并且错误与编译器、平台和月相有关——在所有情况下，都没有给出关于南方发生了什么的最遥远的线索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T01:24:34.543

为了完整起见，此解决方案使用迭代器对构造函数和普通的旧数组初始值设定项。

```
#include <vector>
#include <string>
#include <iostream>
using namespace std;

string contents[] = {"Taurus", "Leo"};
vector<string> Aries(contents, contents + sizeof contents/sizeof contents[0]);

int main() {
    cout << Aries.at(0) << endl;
    cout << Aries.at(1) << endl;
} 
```

这可能更清楚，但它调用了更多的复制构造函数。

# perl - 递归网络爬虫 perl

> ID：13899872
> 
> 赞同：3
> 
> 时间：2012-12-16T08:59:07.567
> 
> 标签：perl, recursion, web-scraping, web-crawler

我正在尝试编写一个最小的网络爬虫。目的是从种子中发现新的 URL 并进一步抓取这些新的 URL。代码如下：

```
use strict;
use warnings;
use Carp;
use Data::Dumper;
use WWW::Mechanize;

my $url = "http://foobar.com"; # example
my %links;

my $mech = WWW::Mechanize->new(autocheck => 1);
$mech->get($url);
my @cr_fronteir = $mech->find_all_links();

foreach my $links (@cr_fronteir) {
    if ( $links->[0] =~ m/^http/xms ) {
        $links{$links->[0]} = $links->[1];
    }
} 
```

我被困在这里，我该如何进一步爬取 %links 中的链接，以及如何添加深度以防止溢出。建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T13:22:23.587

[Mojolicious](http://mojolicio.us/)网络框架提供了一些对网络爬虫有用的有趣功能：

*   除 Perl v5.10 或更高版本外没有依赖项
*   网址解析器
*   DOM 树解析器
*   `fork()`异步 HTTP/HTTPS 客户端（允许无开销的并发请求）

这是一个递归爬取本地 Apache 文档并显示页面标题和提取链接的示例。它使用 4 个并行连接并且不超过 3 个路径级别，每个提取的链接只访问一次：

```
#!/usr/bin/env perl
use 5.010;
use open qw(:locale);
use strict;
use utf8;
use warnings qw(all);

use Mojo::UserAgent;

# FIFO queue
my @urls = (Mojo::URL->new('http://localhost/manual/'));

# User agent following up to 5 redirects
my $ua = Mojo::UserAgent->new(max_redirects => 5);

# Track accessed URLs
my %uniq;

my $active = 0;

sub parse {
    my ($tx) = @_;

    # Request URL
    my $url = $tx->req->url;

    say "\n$url";
    say $tx->res->dom->at('html title')->text;

    # Extract and enqueue URLs
    for my $e ($tx->res->dom('a[href]')->each) {

        # Validate href attribute
        my $link = Mojo::URL->new($e->{href});
        next if 'Mojo::URL' ne ref $link;

        # "normalize" link
        $link = $link->to_abs($tx->req->url)->fragment(undef);
        next unless $link->protocol =~ /^https?$/x;

        # Don't go deeper than /a/b/c
        next if @{$link->path->parts} > 3;

        # Access every link only once
        next if ++$uniq{$link->to_string} > 1;

        # Don't visit other hosts
        next if $link->host ne $url->host;

        push @urls, $link;
        say " -> $link";
    }

    return;
}

sub get_callback {
    my (undef, $tx) = @_;

    # Parse only OK HTML responses
    $tx->res->code == 200
        and
    $tx->res->headers->content_type =~ m{^text/html\b}ix
        and
    parse($tx);

    # Deactivate
    --$active;

    return;
}

Mojo::IOLoop->recurring(
    0 => sub {

        # Keep up to 4 parallel crawlers sharing the same user agent
        for ($active .. 4 - 1) {

            # Dequeue or halt if there are no active crawlers anymore
            return ($active or Mojo::IOLoop->stop)
                unless my $url = shift @urls;

            # Fetch non-blocking just by adding
            # a callback and marking as active
            ++$active;
            $ua->get($url => \&get_callback);
        }
    }
);

# Start event loop if necessary
Mojo::IOLoop->start unless Mojo::IOLoop->is_running; 
```

有关更多网络抓取提示和技巧，请阅读[我不需要臭味 API：为了乐趣和利润而进行的网络抓取](http://blog.hartleybrody.com/web-scraping/)文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T09:24:56.500

如果不使其成为函数，就不能进行递归。

```
use strict;
use warnings;
use Carp; #unused, but I guess yours was a sample
use Data::Dumper;
use WWW::Mechanize;

my %links;
my $mech = WWW::Mechanize->new(autocheck => 1);

sub crawl {
    my $url = shift;
    my $depth = shift or 0;
    #this seems like a good place to assign some form of callback, so you can
    # generalize this function

    return if $depth > 10; #change as needed

    $mech->get($url);
    my @cr_fronteir = $mech->find_all_links();

    #not so sure what you're trying to do; before, $links in the
    # foreach overrides the global %links
    #perhaps you meant this...?
    foreach my $link (@cr_fronteir) {
        if ($link->[0] =~ m/^http/xms) {
            $links{$link->[0]} = $link->[1];

            #be nice to servers - try not to overload them
            sleep 3;
            #recursion!
            crawl( $link->[0], depth+1 );
        }
    }
}

crawl("http://foobar.com", 0); 
```

我没有在这个分区上安装 Perl，所以这很容易出现语法错误和其他恶作剧，但可以作为基础。

正如在第一个函数评论中所说：您可以通过向函数传递一个回调并为您抓取的每个链接调用它来概括您的函数以获得更大的荣耀，而不是对映射功能进行硬编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T09:27:25.177

一些*伪*代码：

```
while ( scalar @links ) {
    my $link = shift @links;
    process_link($link);
}

sub process_link {
    my $link = shift;

    $mech->get($link);
    foreach my $page_link ( $mech->find_all_links() ) {
        next if $links{$page_link};
        $links{$page_links} = 1;
        push @links, $page_link;
    }
} 
```

PS`/m`和`/s`修饰符在您的代码中是不必要的（也是`/x`如此）。

# html - 如何在映射图像上添加标记/指针

> ID：13899881
> 
> 赞同：0
> 
> 时间：2012-12-16T09:00:40.347
> 
> 标签：html, database, image, mapping, coordinates

> **可能重复：**
> [如何为图像的映射部分分配唯一 ID 并将其与数据库链接](https://stackoverflow.com/questions/13899332/how-to-assign-a-unique-ids-to-the-mapped-portion-of-an-image-link-it-with-data)

我有一个简单的建筑平面图（jpg 图像），上面有房间。它是一个映射图像。我想要的是在特定房间上添加标记/指针。可以说，如果用户搜索“CR1”，则应在表示 CR1 的图像的映射区域放置一个标记。CR1 表示 Class Room 1。这是我的代码：

`<img src="UG ground.jpg" alt="UG" usemap="#mymap"/> <map name="mymap"> <area shape="circle" coords="90,58,3" alt="Mercury" href="mercur.htm"> <area shape="poly" coords="549,272,489,334,534,377,594,316" href="www.msn.com" target="_top" alt="CR1" name="room-1"> <area shape="poly" coords="578,244,621,201,662,240,622,286" href="#" alt="CR2"> <area shape="poly" coords="665,155,624,201,669,244,711,200" href="#" alt="CR3">`

# c# - 我想检测 DataGridView 单元格是否仅在选择模式下离开事件

> ID：13899883
> 
> 赞同：0
> 
> 时间：2012-12-16T09:00:51.613
> 
> 标签：c#, .net, winforms, datagridview

我试图`DataGridViewCell`仅在选择模式而不是在 C# 中的编辑模式中检测离开事件。那就是下面给出的代码在这里显示：

```
 private void dgv_CellLeave(object sender, DataGridViewCellEventArgs e)
      {
              if (dgvC.CurrentCell.ColumnIndex == 0)
              {
                  if (dgv.CurrentCell.Value == null)
                      MessageBox.Show("You have to enter somthing");
              }
      }

    private void dgv_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {
              if (dgv.CurrentCell.ColumnIndex == 0)
              {
                  if (dgv.CurrentCell.Value.ToString() !="S" )
                      MessageBox.Show("You have to enter S");
              }

 } 
```

当我选择网格单元格时，上述事件正常工作，但在编辑单元格时它们不起作用。意味着在这两种情况下都发生了休假事件。所以我想检测当前单元格是否处于编辑模式或选择模式，之后我必须将光标放在同一个单元格中，不应更改。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:28:57.327

你好那里尝试使用这个事件。

```
 private void dataGridView2_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
    {
        if (dataGridView2.IsCurrentCellDirty)
            if (e.ColumnIndex == 0)
            {
                if (string.IsNullOrWhiteSpace(dataGridView2[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString()))
                {
                    e.Cancel = true;
                    MessageBox.Show("Please enter some text before you leave.");
                }
                else if (dataGridView2[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString() != "S")
                {
                    e.Cancel = true;
                    MessageBox.Show("You have to enter S");
                }
            }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:15:54.127

在单元格编辑模式下不要使用 CurrentCell 只需使用“e”参数来查找单元格。

示例代码：

```
private void dgv_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 0)
    {
        if (dgv[e.ColumnIndex, e.RowIndex].Value.ToString() !="S" )
        {
            MessageBox.Show("You have to enter S");
        }
    }
} 
```

# java - GUI期间后台的JAVA算法

> ID：13899896
> 
> 赞同：1
> 
> 时间：2012-12-16T09:03:30.993
> 
> 标签：java, multithreading, user-interface, background

我有问题，我不能突然出现。我必须制作一个狂野的图形界面，在某个事件或特定算法的某个动作（如有限状态机）之后启用按钮。

我决定创建两个类，一个用于 GUI，另一个是创建框架后运行的线程。

现在必须等到消息到达套接字，之后他们必须启用一个按钮，然后必须等待您按下此按钮并随后启用两个，依此类推。

然后我在 Frame 类中创建了静态按钮，用于启用/禁用相应的线程。

这是一个正确的解决方案吗？

有没有办法用 GUI 创建“类似有限状态机”？

- 编辑 -

我有一个创建 GUI 的控制器类。在创建之后，我调用应该运行算法的“类过程”。

在 I 类 CONTROLLER 中的按钮和图形对象静态

静态 JButton btn1; 静态 JPanel panel1 静态 JButton btn2;

在 PROCEDURES 类中，将调用上面列出的项目的方法。

示例：当你可以看到 Frame 我需要检查一个特定的变量时，只需更改，我需要启用 btn1 .. 按下 btn1 后，我 abiliare btn2，等等 ..

那么作为解决方案是否正确？

--- 编辑 2 ---

```
public class Controller extends JFrame {

    static JButton btn1;
    static JPanel panel1;
    static JButton btn2;

    public Controller() {       

        JPanel panel = new JPanel();
        getContentPane().add(panel, BorderLayout.CENTER);
        panel.setLayout(new GridLayout(7, 1, 0, 0));

        //PANEL
        panel1 = new JPanel();      
        FlowLayout flowLayout_1 = (FlowLayout) panel_1.getLayout();
        flowLayout_1.setAlignment(FlowLayout.LEFT);
        panel_chkCom0.add(panel_1);
        btn1 = new JButton("BUTTON 1");     
        btnChk.setEnabled(false);
        btnChk.setPreferredSize(new Dimension(300, 50));
        panel_1.add(btn1);
        panel.add(panel1);

        //TODO

        //When I finish init myself, call my manager thread
        Thread t = new Thread(new SetupProcedure());
        t.start();
    }   
}

public class SetupProcedure implements Runnable {
    protected boolean btnChkIsPress = false;

    public void run(){ 
         SetupManager();
    }

    public void SetupManager() {

        final long POLLING_TIME = 600000;
        boolean isOff = true;

        long pollingTime = 0;
        //Check if it's on

        while(isOff){
            //SIMULATE READING FROM REGISTER
            try {
                Thread.sleep(3000);
                PWisOff = false;
                Controller.btn1.setEnabled(true);               
            } catch (InterruptedException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }           
        }

        SetupController.btn1.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent arg0) {
                btnChkIsPress  = true;
            }
        });
        while(!btnChkIsPress){
            System.out.println("..wait..");
        }

        SetupController.btn2.setEnabled(true);

    ...OTHER...

    public String getResponseFromKernel(String request){
        String s = "Response";
        return s;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:35:11.440

Make a data model **FiniteStateModel**, with listeners for events. Maka a view **ViewFrame**, with normal non-static buttons, if needed dynamically added buttons or so. The controller **Controller** can then wire the events to the view, and change so.

You will need `EventQueue.invokeLater(new Runnable() { });` to be responsive and to switch to the AWT event queue.

* * *

***Schematically:***

For an easy GUI editor, creating JFrames and JPanels, you could try the NetBeans IDE. (It really helps - concentrating on the business on hand, instead of the plumbing.)

```
/** Model. */
public class MessagesModel {
    ... controller.onMessageArrived(messageInfo); // Or via a more generic listener pattern.
}

/** View. */
public class ViewFrame extends JFrame {
    private App controller;
    private JButton btn1;

    public ViewFrame(App controller) {
        this.controller = controller;
        ...
    }

    ... controller.markMessageRead(messageInfo);
}

/** Controller. */
public class App {
    private MessagesModel model;
    private ViewFrame view;

    public static void main(String[] args) {
        new App().start();
    }

    public void start() {
        model = new MessagesModel();
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                view = new ViewFrame(this);
                view.setVisible(true);
            });
    }

    /** Called by the model. */
    public void onMessageArrived(MessageInfo info) {
        view.setSomeAlert(info.title);
    }

    /** Called by the view. */
    public void markMessageRead(MessageInfo info) {
        model.markMessageRead(info);
    }
} 
```

The model informs the controller of changes, and the controller calls a corresponding view method. This can be done by an event listener, or for simplicities sake, passing the controller to the model's constructor.

The advantage of MVC being that all the business logic / control flow is concisely written in the controller class.

# xforms - XForms 重复 - 询问用户行数

> ID：13899899
> 
> 赞同：1
> 
> 时间：2012-12-16T09:04:53.603
> 
> 标签：xforms, xforms-betterform

我想通过 xf:input 询问用户，在某个重复中您想要“多少项目”，然后根据用户的响应，呈现具有该行数的重复（我猜这也会在 xf:instance 中生成）。

我熟悉使用触发器插入和删除行。

我在这里要问的是如何提示用户要创建和呈现的初始行数。

例如，假设用户想要 10 行。我猜重复的数据可能不相关，直到他们回答了那个问题，当他们回答时，一些动作可以动态地创建行，然后使重复的数据相关。

但是如何做到这一点？

**12 月 20 日更新**

下面的标记显示了一个输入字段，并且更好的形式是在按下按钮时向实例添加行。但是，betterForm 不会在 UI 中显示数据（尽管我猜这完全是一个单独的问题）。我还没有尝试过其他实现。

```
<xhtml:head>
    <xf:model id="m">
        <xf:instance id="main-instance">
          <data>
            <items>
              <item1>item 11</item1>
              <item2>item 12</item2>
              <item3>item 13</item3>
            </items>
          </data>
          </xf:instance>

        <xf:instance id="variable">
            <variable xmlns="">
                <iteration-count/>
            </variable>
        </xf:instance>
    </xf:model>
</xhtml:head>
<xhtml:body>

  <!-- Simple field to enter the number of iterations -->
  <xf:input ref="instance('variable')/iteration-count">
    <xf:label>How many iterations?</xf:label>
  </xf:input>

  <xf:trigger>
    <xf:label>Insert with while</xf:label>
    <xf:action ev:event="DOMActivate">
            <xf:action while="instance('variable')/iteration-count != 0">
                <xf:insert ev:event="DOMActivate" nodeset="items"/>
                <xf:setvalue ref="instance('variable')/iteration-count" value=". - 1"/>
            </xf:action>
          <!--<xf:refresh model="m"/>-->
        </xf:action>
    </xf:trigger>

  <table>

    <tbody id="r-attrs" xf:repeat-nodeset="items">
      <tr>
        <td>
          <xf:output ref="item1"></xf:output>
        </td>
        <td>
          <xf:output ref="item2"></xf:output>
        </td>
        <td>
          <xf:output ref="item3"></xf:output>
        </td>
      </tr>
    </tbody>

  </table>       

</xhtml:body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:25:46.743

一个动作的 while 和 iterate 属性会重复这个动作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:57:44.810

从用户那里获取信息的一种方法是将输入小部件绑定到辅助文档中的元素（我经常称该文档，`ui`因为它包含用户界面状态信息）并从中控制插入和显示。如果你想强制用户提供一个值，你可以让它默认为0；如果您不这样做，您可以提供一些合理的默认数字，用户可以根据需要覆盖这些默认数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T18:54:14.657

如果我理解得很好，你会问两个不同的问题：

1.  如何提示用户
2.  如何插入给定的迭代次数

这里是

1.  要提示用户，您可以使用对话框（`xforms:dialog`由 XForms 2.0 标准化，Orbeon Forms 支持该`xxforms:dialog`扩展）。您还可以使用 an`xforms:switch`来显示/隐藏字段与重复。

2.  获得值后，您可以如 Alain 所说，使用`while`或`iterate`属性多次执行插入操作。或者，如果您有 XPath 2.0，则可以`for`在`origin`表达式中使用 a。

这是一个完整的示例，显示了两种插入方式：

```
<xh:html xmlns:xh="http://www.w3.org/1999/xhtml"
      xmlns:xf="http://www.w3.org/2002/xforms"
      xmlns:ev="http://www.w3.org/2001/xml-events">
    <xh:head>
        <xf:model>
            <xf:instance id="repeats">
                <repeats/>
            </xf:instance>
            <xf:instance id="count">
                <count/>
            </xf:instance>
        </xf:model>
    </xh:head>
    <xh:body>

        <!-- Simple field to enter the number of iterations -->
        <xf:input ref="instance('count')">
            <xf:label>How many iterations?</xf:label>
        </xf:input>

        <!-- Variant 1 -->
        <xf:trigger>
            <xf:label>Insert with for</xf:label>
            <xf:insert
                ev:event="DOMActivate"
                if="instance('count') castable as xs:integer"
                context="instance('repeats')"
                ref="repeat"
                origin="for $i in 1 to instance('count')
                        return xf:element('repeat')"/>
        </xf:trigger>

        <!-- Variant 2 -->
        <xf:trigger>
            <xf:label>Insert with while</xf:label>
            <xf:insert
                ev:event="DOMActivate"
                if="instance('count') castable as xs:integer"
                context="instance('repeats')"
                while="count(repeat) lt xs:integer(instance('count'))"
                ref="repeat"
                origin="xf:element('repeat')"/>
        </xf:trigger>

        <xf:trigger>
            <xf:label>Clear</xf:label>
            <xf:delete ev:event="DOMActivate" ref="instance('repeats')/*"/>
        </xf:trigger>

        <!-- Your repeat -->
        <xf:repeat ref="repeat">
            <xf:output value="position()"/>
        </xf:repeat>

    </xh:body>
</xh:html> 
```

# css - 是否可以检查 ::after 和 ::before 伪元素的“计算”样式？

> ID：13899901
> 
> 赞同：8
> 
> 时间：2012-12-16T09:05:59.100
> 
> 标签：css, google-chrome, pseudo-element

当我检查一个元素时，Chrome 会在“**匹配的 CSS 规则”**`::after`窗格中向我显示和`::before`定义（以及继承的定义等） 。但**Computed Styles**窗格仅显示根元素的计算样式。

 ****我有一个完整的 CSS 类层次结构用于伪元素的一些属性继承和一些覆盖等，并且想知道是否有任何方法可以看到实际应用的样式集（即计算样式窗格显示的内容）根元素）

如果有人能对此有所了解，那将非常有帮助。

**编辑 - 2014 年 2 月 13 日**

最近版本的 Chrome 确实内置了这个功能 也许这个小线程与他们有关，包括它？:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:43:28.820

# [`window.getComputedStyle( element[, pseudoElt] )`](https://developer.mozilla.org/en/docs/Web/API/Window/getComputedStyle)

> `pseudoElt`选修的
> 
> 指定要匹配的伪元素的字符串。对于常规元素，必须省略（或为空）。伪类可以像 ":focus" 那样指定。

我可能误解了您要完成的工作，但这里有一些 JavaScript 可以使用。我希望它有用。

它遍历文档中的每个元素并尝试获取`content`其`:before`s 和`:after`s。
如果找到，它将详细信息输出到`console`.
简单，但可以证明。

```
document.querySelectorAll( "*" ).forEach( ( e ) => {
  const ebc = window.getComputedStyle( e, ":before" ).content,
        eac = window.getComputedStyle( e, ":after" ).content;
  if ( ebc || eac ) {
    console.log( e );
    console.log( ( ebc ? "Before content = " + ebc : "No :before content" ) );
    console.log( ( eac ? "After content = " + eac : "No :after content" ) );
  }
} );
```

```
div:before {
  content: "This is a test.";
}
p:after {
  content: attr( data-content );
}
span:after {
  content: " dolor";
}
```

```
<div>
  <p data-content="&hellip;">Lorem <span>ipsum</span></p>
</div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:58:13.277

是的，虽然不是那么明显。如果您使用的是 Firebug，您需要确保在样式下拉选项卡上选择了“仅显示应用的样式”。然后正如您从下面的屏幕截图中看到的那样，您应该能够选择伪元素并查看它们的计算样式（或应用的样式），其中考虑了任何覆盖等。

![计算样式](../Images/a5f27cecf6c1c0afa12ebb14ad2dfe7c.png)****

# javascript - Javascript / Jquery - 正则表达式中的变量

> ID：13899904
> 
> 赞同：1
> 
> 时间：2012-12-16T09:06:22.213
> 
> 标签：javascript, jquery, regex, variables

该数组`replaceThis`是用户生成的，因此我无法编写常量正则表达式规则。
但是我怎样才能创建正则表达式规则？
有什么好的解决方案的想法吗？

```
var replaceThis = new Array();
replaceThis[0] = ':)';
replaceThis[1] = 'XD';
replaceThis[2] = '-.-';
replaceThis[3] = 'hello world';
replaceThis[3] = ' a ';        
replaceThis[3] = ' B ';                

var message = 'text text :) text text -.- and hello world XD and text a btext B text text';
$.each(replaceThis, function(i)
{
    var regex = new RegExp (" ??? ","gi");
    message = message.replace(regex,'<span class="blue">'+????+'</span>');
});

$('body').append(message+'<hr/>'); 
```

**游乐场：http:** [//jsfiddle.net/s7b3r/2/](http://jsfiddle.net/s7b3r/2/)

提前致谢！
杰米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T09:20:25.743

***[检查工作演示](http://jsfiddle.net/s7b3r/5/)***。

您需要转义正则表达式的特殊字符。

```
String.prototype.escapeRegExp = function() {
  return this.replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1");
} 
```

然后像这样使用它：

```
$.each(replaceThis, function(i, data){
    var regex = new RegExp(data.escapeRegExp(),"gi");
    message = message.replace(regex, '<span class="blue">$&</span>'); 
}); 
```

# java - JTextField 无法正常工作

> ID：13899905
> 
> 赞同：1
> 
> 时间：2012-12-16T09:06:33.337
> 
> 标签：java, swing, initialization, jframe, local-variables

我只想运行一个显示文本字段的摇摆应用程序。以下是运行时生成的异常的代码：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at textf.<init>(textf.java:10)
at textf$1.run(textf.java:35)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

请帮忙怎么办。

```
import java.awt.FlowLayout;
import javax.swing.*;

class textf{
JTextField tf;
JFrame j;
textf(){
    new JFrame("TextField Demo");
    j.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    j.setSize(400,200);
    j.setLayout(new FlowLayout());
    tf=new JTextField("press<Enter>",20);

    j.add(tf);
    j.setVisible(true);
}

public static void main(String s[]) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new textf();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:07:45.917

您永远不会为 分配值`j`，因此它的默认值为`null`. 当您尝试在构造函数 ( `j.setDefaultCloseOperation(...)`) 的第二行中取消引用它时，会抛出`NullPointerException`. 请注意，这是在您到达`JTextField`...之前

只需将构造函数的第一行更改为：

```
j = new JFrame("TextField Demo"); 
```

之后，整理代码的缩进以及类和变量的命名，这样你就可以得到更易于维护的代码:)

# javascript - 使用 Sublime 连接文件？

> ID：13899906
> 
> 赞同：1
> 
> 时间：2012-12-16T09:06:39.953
> 
> 标签：javascript, sublimetext2, concat

我有一堆`*.js`文件。我希望 Sublime 通过按热键将它们连接到一个文件中。找不到做这些事情的插件。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:38:27.023

我有同样的问题（unicode 错误），使用相同的包。

所以我做了一个合并到 repo 中的更新。

它的作用是在将文件内容插入连接文件之前对其进行unicode。它为我解决了这个问题，所以尝试更新包：

[https://github.com/marcneuwirth/SublimeConcat](https://github.com/marcneuwirth/SublimeConcat)

# sql - 从行和列计算的问题（将两列与不同行的第三列相加）

> ID：13899909
> 
> 赞同：3
> 
> 时间：2012-12-16T09:07:10.710
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

参考我之前的问题 [添加由 GROUP BY 子句产生的列](https://stackoverflow.com/questions/13892128/adding-columns-resulting-from-group-by-clause/13892514#13892514)

```
SELECT AcctId,Date,
   Sum(CASE
         WHEN DC = 'C' THEN TrnAmt
         ELSE 0
       END) AS C,
   Sum(CASE
         WHEN DC = 'D' THEN TrnAmt
         ELSE 0
       END) AS D
FROM   Table1 where AcctId = '51'
GROUP  BY AcctId,Date
ORDER  BY AcctId,Date 
```

我执行了上述查询并得到了我想要的结果..

```
 AcctId       Date         C        D
    51       2012-12-04   15000      0
    51       2012-12-05   150000  160596
    51       2012-12-06    600        0 
```

现在我要对同一个查询进行另一个操作，即

我需要结果是这样的

```
 AcctId   Date                                Result

    51       2012-12-04    (15000-0)->       15000  
    51       2012-12-05   (150000-160596) + (15000->The first value)  4404
    51       2012-12-06     600-0         +(4404 ->The calculated 2nd value) 5004 
```

是否可以使用相同的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:00:45.857

使用递归 CTE

```
;WITH cte AS
 (
  SELECT AcctId, Date,
     Sum(CASE
           WHEN DC = 'C' THEN TrnAmt
           ELSE 0
         END) AS C,
     Sum(CASE
           WHEN DC = 'D' THEN TrnAmt
           ELSE 0
         END) AS D,
     ROW_NUMBER() OVER (ORDER BY AcctId, Date) AS Id 
  FROM   Table1 where AcctId = '51'
  GROUP  BY AcctId, Date
  ), cte2 AS
 (
  SELECT Id, AcctId, Date, C, D, (C - 0) AS Result
  FROM cte
  WHERE Id = 1
  UNION ALL
  SELECT c.Id, c.AcctId, c.Date, c.C, c.D, (c.C - c.D) + ct.Result
  FROM cte c JOIN cte2 ct ON c.Id = ct.Id + 1
  )
  SELECT *
  FROM cte2 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/45911/1/0)上的简单示例[](http://sqlfiddle.com/#!3/45911/1/0)

# pandas - 基于子级别的分级索引

> ID：13899914
> 
> 赞同：5
> 
> 时间：2012-12-16T09:07:52.483
> 
> 标签：pandas

我有一个 DataFrame 如下。如何选择第二个索引所在的行`['two','three']`？

```
index = MultiIndex(levels=[['foo', 'bar', 'baz', 'qux'],
                               ['one', 'two', 'three']],
                       labels=[[0, 0, 0, 1, 1, 2, 2, 3, 3, 3],
                               [0, 1, 2, 0, 1, 1, 2, 0, 1, 2]])
hdf = DataFrame(np.random.randn(10, 3), index=index,
            columns=['A', 'B', 'C'])

In [3]: hdf
Out[3]: 
                  A         B         C
foo one   -1.274689  0.946294 -0.149131
    two   -0.015483  1.630099  0.085461
    three  1.396752 -0.272583 -0.760000
bar one   -1.151217  1.269658  2.457231
    two   -1.657258 -1.271384 -2.429598
baz two    1.124609  0.138720 -1.994984
    three  0.124298 -0.127099 -0.409736
qux one    0.535038  1.139026  0.414842
    two    0.287724  0.461041 -0.268918
    three -0.259649  0.226574 -0.558334 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:31:09.963

一种使用 DataFrame 方法的[`select`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.select.html#pandas.DataFrame.select)方法：

```
In [4]: hdf.select(lambda x: x[1] in ['two', 'three'])
Out[4]: 
                  A         B         C
foo two   -0.015483  1.630099  0.085461
    three  1.396752 -0.272583 -0.760000
bar two   -1.657258 -1.271384 -2.429598
baz two    1.124609  0.138720 -1.994984
    three  0.124298 -0.127099 -0.409736
qux two    0.287724  0.461041 -0.268918
    three -0.259649  0.226574 -0.558334 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:04:05.870

请注意，您还可以执行以下操作：

```
In [9]: hdf.index.get_level_values(1).isin(['two', 'three'])
Out[9]: array([False,  True,  True, False,  True,  True,  True, False,  True,  True], dtype=bool) 
```

确实应该有更好的语法。

# php - .htaccess 重写重定向的 url

> ID：13899920
> 
> 赞同：0
> 
> 时间：2012-12-16T09:09:02.673
> 
> 标签：php, html, mod-rewrite

我已使用 get 参数将所有 .html 页面重定向到 process.php，现在我想清理查询 url。

我已经像这样重定向了。

```
RewriteEngine on
RewriteRule ^([^/]*)/(.*\.html) /Site/process.php?dir=$1&page=$2 [R=301,L] 
```

这给出了这样的网址。

```
http://localhost/Site/process.php?dir=Directory&page=page.html 
```

我想像这样将此网址清理回原始网址，并且仍然能够发布获取参数。

```
http://localhost/Site/Directory/page.html 
```

我试过这样。

```
RewriteEngine on
RewriteRule ^([^/]*)/(.*\.html) /Site/process.php?dir=$1&page=$2 [R=301,L]
RewriteRule ^Site/$1/$2([^/.]+)/?$ [L] 
```

但它什么也没做。

请查看并建议任何可能的方法。

谢谢。

**编辑**

这些 html 页面实际上不存在，只是页面中的链接，我想处理这些链接以使用 php 和 htaccess 从数据库制作页面，保持 url 完整，可以这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:14:32.410

部分答案`and still be able to post get parameter`（将完整的原始查询字符串传递给脚本）：

`RewriteRule some.html some-other.php?%{QUERY_STRING} [L]`

可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:34:38.023

如果您只是想将“html”部分留在地址栏中以制作“漂亮的 URL”，只需取消`[R]`标记，并删除第二条规则。重定向将发生在服务器上，但浏览器仍然有`.html`URL。

# python - Python，从列表中删除数据

> ID：13899921
> 
> 赞同：-1
> 
> 时间：2012-12-16T09:09:07.837
> 
> 标签：python, list, python-2.7

我在python中有以下代码：

```
data   = [1,2,3,4,5,6]
data_f = data[0::2] 
```

**编辑：抱歉，英语不是我的第一语言。我误解了文档，因此提出了一个毫无意义的问题。我只是想从列表*数据*中获取每隔一个项目并将其放入 _data_f_ 中，以便 _data_f_ 包含*(1, 3, 5)*并且*数据*包含*(2, 4, 6)*。如果不使用 pop，我将如何完成这项工作？（我现在知道还有别的）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:14:48.140

```
In [11]: print list.pop.__doc__
L.pop([index]) -> item -- remove and return item at index (default last).
Raises IndexError if list is empty or index is out of range. 
```

Note that [index] means that the index is optional, not that it should come as a list.

To remove every second element from a list, you could use a list comprehension:

```
data_f = [data[i] for i in range(len(data))[0::2]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:18:34.810

我想如果你真的想使用那种语法，你可以这样做

```
[data.remove(y) for y in data[0::2]] 
```

# php - Magento：在发票上包含可配置的产品 Sku - 目前仅显示相关的简单产品

> ID：13899922
> 
> 赞同：0
> 
> 时间：2012-12-16T09:09:21.433
> 
> 标签：php, magento, magento-1.5

我需要在所有打印发票上包含可配置产品 SKU，因为可配置产品 SKU 是人类可读的，但简单的产品是 16 位数字条形码，这使得挑选产品成为一场噩梦。

我发现 /app/code/core/Mage/Sales/Model/Order/Pdf/Invoice.php 编写了文档。在其中，它具有以下内容，我相信这些内容会创建文件。

```
 $page->drawText(Mage::helper('sales')->__('Product'), 35, $this->y, 'UTF-8');
    $page->drawText(Mage::helper('sales')->__('SKU'), 255, $this->y, 'UTF-8');
    $page->drawText(Mage::helper('sales')->__('Price'), 380, $this->y, 'UTF-8');
    $page->drawText(Mage::helper('sales')->__('Qty'), 430, $this->y, 'UTF-8');
    $page->drawText(Mage::helper('sales')->__('Tax'), 480, $this->y, 'UTF-8');
    $page->drawText(Mage::helper('sales')->__('Subtotal'), 535, $this->y, 'UTF-8'); 
```

我的问题是如何将“SKU”更改为可配置的产品 SKU。我商店中的所有产品都是可配置的，因此它不会覆盖简单的产品 sku。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:33:03.713

Magento 为每个销售的可配置产品保存两个订单项目。您可以在 sales_flat_order_item 表中看到这一点。但是，您会注意到这两个项目上的 SKU 是相同的......简单的 SKU。所以，不幸的是，没有简单的方法来获取可配置产品的 SKU，但可以做到。

1.  查找订单商品的加载位置*。寻找：

    `$order/$invoice->getAllItems()`

2.  使用存储的来获取`product_id`可配置产品的`product_id``order_item`

    `$item->getProductId()`

3.  加载可配置产品

    `$product = Mage::getModel('catalog/product')->load($product_id_from_step2)`

4.  将**上的SKU设置`order_item`为来自真实产品的SKU

    `$item->setSku($product->getSku())`

*- 这是您在问题中引用的文件中的某处。但是请注意，您上面的代码实际上是显示表格的标题行，而不是实际的产品数据。

**- 除非您调用`$item->save()`. 您只是临时修改加载到内存中的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:39:43.113

只需转到此文件 app\code\core\Mage\Sales\Model\Order\Pdf\Items\Invoice\Default.php 在这里你可以找到 sku 字段，打印`$item`数组你会得到你需要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:34:59.213

您可以为简单的产品类型提供自己的 PDF 渲染器，然后查找可配置的产品等。

创建自定义扩展将其添加到您的 config.xml

```
<global>

    <pdf>
        <invoice>
            <simple>invoice/sales_order_pdf_items_invoice_simple</simple>
        </invoice>
    </pdf>
</global> 
```

在您的扩展程序中创建文件。Sales\Order\Pdf\Items\Invoice\Simple.pdf

```
<?php
class YourModule_Invoice_Model_Sales_Order_Pdf_Items_Invoice_Simple extends     Mage_Sales_Model_Order_Pdf_Items_Abstract
{

    public function draw()
    {
        $order  = $this->getOrder();
        $item   = $this->getItem();
        $pdf    = $this->getPdf();
        $page   = $this->getPage();
        $lines  = array();

        // Render your PDF. Look in parent class for examples.
    }
} 
```

# multithreading - Delphi：如何处理动态创建的线程

> ID：13899926
> 
> 赞同：1
> 
> 时间：2012-12-16T09:09:39.677
> 
> 标签：multithreading, delphi, delphi-xe2

我有一个来自 TThread 的孩子。一切正常，但我怎样才能对我创建的线程进行大规模挂起或恢复？或者我怎样才能只挂起第二个线程（在 Button2Click 中创建）？这是我的代码的一部分：

```
TMyThread = class(TThread)
private
  source_file, destination_file: string;
  total_size, current_size, download_item_id: integer;
protected
  procedure ShowResult;
  procedure Execute; override;
public
end;

var
 MyThread: TMyThread;

begin

procedure TMyThread.Execute;
 begin
  //Some code for download file here, it doesn't matter
 end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  MyThread := TMyThread.Create(True);
  MyThread.source_file :='http://example.com/download1.zip';
  MyThread.destination_file := 'c:\download1.zip';
  MyThread.download_item_id := 0;
  MyThread.Priority := tpNormal;
  MyThread.FreeOnTerminate := True;
  MyThread.Resume;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  MyThread := TMyThread.Create(True);
  MyThread.source_file :='http://example.com/download2.zip';
  MyThread.destination_file := 'c:\download2.zip';
  MyThread.download_item_id := 1;
  MyThread.Priority := tpNormal;
  MyThread.FreeOnTerminate := True;
  MyThread.Resume;
end;

end. 
```

也就是说，如果我创建这样的线程 - 它对我有用：

```
var
 MyThread1, MyThread2: TMyThread;
...
procedure TForm1.Button1Click(Sender: TObject);
begin
  MyThread1 := TMyThread.Create(True);
  MyThread1.source_file :='http://example.com/download1.zip';
  MyThread1.destination_file := 'c:\download1.zip';
  MyThread1.download_item_id := 0;
  MyThread1.Priority := tpNormal;
  MyThread1.FreeOnTerminate := True;
  MyThread1.Resume;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  MyThread2 := TMyThread.Create(True);
  MyThread2.source_file :='http://example.com/download2.zip';
  MyThread2.destination_file := 'c:\download2.zip';
  MyThread2.download_item_id := 1;
  MyThread2.Priority := tpNormal;
  MyThread2.FreeOnTerminate := True;
  MyThread2.Resume;
end;

//Terminate all of TMyThread
procedure TForm1.Button3Click(Sender: TObject);
begin
  MyThread1.Terminate;
  MyThread2.Terminate;
  ShowMessage('All downloads were terminated!');
end;

//Terminate ONLY the second of TMyThread
procedure TForm1.Button4Click(Sender: TObject);
begin
  MyThread2.Terminate;
  ShowMessage('The second download was terminated!');
end; 
```

但是如何为一组动态创建的 TMyThread（如第一个代码示例）做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T11:31:56.670

# 局限性

你真的，真的不应该保留对在终止时设置为空闲的线程的引用。它要求各种各样的问题。下面的代码确实使用了 FreeOnTerminate 设置为 True 的线程。这只是安全的，因为：1）在线程终止和释放之前，引用被删除；2) 在主线程的上下文中调用 OnTerminate 处理程序和/或使用线程安全的 TList 后代；并且 - 最重要的是 - 3) 引用仅用于从主线程的上下文中选择性地取消线程。

一旦您想将引用用于其他任何事情（如暂停和恢复）或可以从主线程以外的任何线程的上下文中访问它们，您确实应该更深入地研究线程程序执行的各种机制。

几个关键字：线程同步、事件信号、互斥体、信号量、临界区。

使用 Delphi 进行多线程编程的一个很好的参考是[Multithreading - The Delphi Way](http://thaddy.co.uk/threads/)

# 回答

如果您以后确实需要引用线程，则确实需要将引用存储在某处。但是您不需要为您创建的每个线程都有单独的变量。有很多选择。我想到了一个数组，但最简单的可能是一个对象列表（来自`Contnrs`单元）：

```
TForm1 = class(TForm)
  private
    MyThreads: TObjectList;

constructor TForm1.Create(AOwner: TComponent);
begin
  inherited;
  MyThreads := TObjectList.Create;
end;

destructor TForm1.Destroy;
begin
  MyThreads.Free;
  inherited;
end; 
```

TObjectList 有一个`OwnsObjects`属性，默认情况下是`True`. 这意味着释放对象列表也将释放它包含的实例。这意味着您需要确保列表仅包含有效的引用。通常这不是问题，但是对于线程，您需要特别小心，尤其是当您使用`FreeOnTerminate`set to时`True`。

像在第一个示例中一样创建线程，并进行一些更改：

使用局部变量（您应该避免使用全局变量，即使它们尽可能只在单元内可见）。

将线程添加到您的对象列表中。

当您还想使用设置为 True 的“FreeOnTerminate”时，设置 OnTerminate 处理程序以从对象列表中删除实例。

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Thread: TThread;                                       // Local var
begin
  Thread := TMyThread.Create(True);
  MyThreads.Add(Thread);                                 // Add to list
  Thread.source_file :='http://example.com/download1.zip';
  Thread.destination_file := 'c:\download1.zip';
  Thread.download_item_id := 0;
  Thread.Priority := tpNormal;
  Thread.OnTerminate := HandleThreadTerminate;           // Ensure you keep list valid
  Thread.FreeOnTerminate := True;                        // Advice against this!
  Thread.Start;
end;

procedure TForm1.HandleThreadTerminate(Sender: TObject);
var
  idx: Integer;
begin
  // Acquire Lock to protect list access from two threads
  idx := MyThreads.IndexOf(Sender);
  if idx > -1 then
    MyThreads.Delete(idx);
  // Release lock
end; 
```

HandleThreadTerminate 过程应该使用某种锁，因此两个线程不能同时尝试从列表中删除实例，因为在 IndexOf 和 Delete 之间切换可能意味着删除错误的实例。处理程序中的代码可以写成`MyThreads.Remove(Sender)`. 尽管这是一条语句，但它不是线程安全的，因为它与我在幕后展示的代码相同。

*编辑*：实际上，正如@LURD 提到的那样，它恰好是线程安全的，因为在主线程的上下文中调用了 OnTerminate。我将离开 TThreadList 示例，因为如果您需要/碰巧从多个线程访问列表，这是一种很好的方法。

要自动处理锁定内容，您可以使用**TThreadList**（来自`classes`单元）。所需的代码更改：

当然你需要实例化一个 TThreadList 而不是 TObjectList。

```
constructor TForm1.Create(AOwner: TComponent);
begin
  inherited;
  MyThreads := TThreadList.Create;
end; 
```

因为 TThreadList 没有 的概念`OwnsObjects`，所以您必须自己释放任何剩余的线程：

```
destructor TForm1.Destroy;
var
  LockedList: TList;
  idx: integer;
begin
  LockedList := MyThreads.LockList;
  try
    for idx := LockedList.Count - 1 downto 0 do
      TObject(MyThreads.Items(idx)).Free;
  finally
    MyThreads.UnlockList;
  end;

  MyThreads.Free;
  inherited;
end; 
```

现在可以安全地简化 OnTerminate 处理程序，因为 TThreadList 将负责所需的锁定。

```
procedure TForm1.HandleThreadTerminate(Sender: TObject);
begin
  MyThreads.Remove(idx);
end; 
```

*编辑*：正如@mghie 所提到的，当 FreeOnTerminate 为真时释放线程与终止时释放的整个想法相冲突。您可以在释放线程（这将终止它）之前将 FreeOnTerminate 设置为 false，或者如果您想保持 FreeOnTerminate 处理，您应该断开 OnTerminate 处理程序，然后使用 Terminate 来告诉线程终止。

```
destructor TForm1.Destroy;
var
  LockedList: TList;
  idx: integer;
begin
  LockedList := MyThreads.LockList;
  try
    for idx := LockedList.Count - 1 downto 0 do
    begin
      TThread(MyThreads.Items(idx)).OnTerminate := nil;
      TThread(MyThreads.Items(idx)).Terminate;
    end;
  finally
    MyThreads.UnlockList;
  end;

  MyThreads.Free;
  inherited;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:15:38.107

答案很简单——如果你创建了一个 FreeOnTerminate 类型的 TThread，那么你根本就不会使用任何外部引用到那个 TThread 实例。这样做就像玩俄罗斯轮盘赌......它迟早会在你的脸上炸开。是的，有一些方法可以做到这一点，但你不应该这样做。

你可以做的是在父母和孩子之间引入一个共享的沟通媒介。有许多不同的方式可以从子线程传达状态更新，这些方式不涉及对 TThread 实例的任何直接引用。（查看自定义窗口消息，可能是最常用的方法。）

一个非常明显（我认为）、简单化的例子。我在此消息框中对此进行了编码，因此不要期望它可以编译...这只是为了帮助证明需要配置一个单独的机制，以便您可以在父子之间安全地进行通信，而无需依赖引用一些 TThread 实例。（这假设有一个子线程......是的，还有很多其他方法可以做到这一点。）

```
unit MyPubComm.pas;

initialization
uses ...;

type
  TThreadComm = class
  private
    fThreadIsBusy:Boolean;  //more likely a State of some sort
    fThreadMessage:String;
  public
   property ThreadIsBusy:Boolean read fThreadIsBusy write fThreadIsBusy;
   property ThreadMessage:String read fThreadMessage write fThreadMessage;
  end;

  function IsChildBusy:Boolean;
  function ChildMessage:String;
  procedure SetThreadMessage(const MessageText:String);

var
  pubThreadStatus:TThreadComm;

implementation

function IsChildBusy:Boolean;
begin
  pubThreadStatus.Monitor.Enter;
  try
    Result := pubThreadStatus.ThreadIsBusy;
  finally
    pubThreadStatus.Monitor.Exit;
  end;
end;

function ChildMessage:String;
begin
  pubThreadStatus.Monitor.Enter;
  try
    Result := pubThreadStatus.ThreadMessage;
  finally
    pubThreadStatus.Monitor.Exit;
  end;
end;

procedure SetThreadMessage(const MessageText:String);
begin
  pubThreadStatus.Monitor.Enter;
  try
    pubThreadStatus.ThreadMessage := MessageText;
  finally
    pubThreadStatus.Monitor.Exit;
  end;
end;

initialization
  pubThreadStatus := TThreadCom.Create;
finalization
  pubThreadStatus.Free();

--------
unit MainAppCode.pas
...
implementation
Uses MyPubComm;

procedure TMyForm1.WorkingOnSomething();
begin
   if IsChildBusy() then  //safely check child state
   begin 
      label1.caption := 'Child thread busy...';
   end
   else
   begin
      label1.caption := ChildMessage();  //safely retrieve shared data
   end;
end;
------
MyThread.pas
...
implementation
Uses MyPubComm;

function TMyThread.WorkerBee();
begin
   If TimeToCommunicateThreadMessage then
   begin 
     SetThreadMessage(MyMessage);  //safely update shared data
   end;
end; 
```

这也应该在 WorkingOnSomething() 中显示一个明显的问题 在检查 IsChildBusy() 和 ChildMessage() 调用之间，实际的忙碌状态和消息文本可能会发生变化，这就是需要更强大的通信方法的原因。

# enums - Dart 是否支持枚举？

> ID：13899928
> 
> 赞同：106
> 
> 时间：2012-12-16T09:10:05.750
> 
> 标签：enums, dart

Dart 是否支持枚举？例如：

```
enum myFruitEnum { Apple, Banana } 
```

对文档的粗略搜索表明没有。

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-12-16T13:54:23.240

从[1.8](http://news.dartlang.org/2014/11/dart-18-library-improvements-and.html)开始，您可以像这样使用枚举：

```
enum Fruit {
  apple, banana
}

main() {
  var a = Fruit.apple;
  switch (a) {
    case Fruit.apple:
      print('it is an apple');
      break;
  }

  // get all the values of the enums
  for (List<Fruit> value in Fruit.values) {
    print(value);
  }

  // get the second value
  print(Fruit.values[1]);
} 
```

* * *

1.8之前的旧方法：

```
class Fruit {
  static const APPLE = const Fruit._(0);
  static const BANANA = const Fruit._(1);

  static get values => [APPLE, BANANA];

  final int value;

  const Fruit._(this.value);
} 
```

类中的那些静态常量是编译时常量，现在可以在例如`switch`语句中使用这个类：

```
var a = Fruit.APPLE;
switch (a) {
  case Fruit.APPLE:
    print('Yes!');
    break;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-19T20:11:54.233

使用 r41815 Dart 获得了原生 Enum 支持，请参阅[http://dartbug.com/21416](http://dartbug.com/21416)并且可以像这样使用

```
enum Status {
  none,
  running,
  stopped,
  paused
}

void main() {
  print(Status.values);
  Status.values.forEach((v) => print('value: $v, index: ${v.index}'));
  print('running: ${Status.running}, ${Status.running.index}');
  print('running index: ${Status.values[1]}');
} 
```

> [Status.none，Status.running，Status.stopped，Status.paused]
> 值：Status.none，索引：0
> 值：Status.running，索引：1
> 值：Status.stopped，索引：2
> 值：Status.paused，索引：3
> 运行：Status.running，1
> 运行索引：Status.running

一个限制是不可能为枚举项设置自定义值，它们会自动编号。

本草案中的更多详细信息[https://www.dartlang.org/docs/spec/EnumsTC52draft.pdf](https://www.dartlang.org/docs/spec/EnumsTC52draft.pdf)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-16T11:00:31.073

枚举应该在将来可用。但是在[Enum 登陆](http://code.google.com/p/dart/issues/detail?id=88)之前，您可以执行以下操作：

```
class Fruit {
  static final APPLE = new Fruit._();
  static final BANANA = new Fruit._();

  static get values => [APPLE, BANANA];

  Fruit._();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-16T09:25:20.487

[这](http://code.google.com/p/dart/issues/detail?id=88)和[这](https://groups.google.com/a/dartlang.org/forum/#!msg/misc/GkGw4Ewni6o/BoouMFKo-YEJ)可能是您问题的答案：

```
... for the technology preview it was decided to leave it out and just 
use static final fields for now. It may be added later. 
```

您仍然可以执行以下操作：

```
interface ConnectionState { }
class Connected implements ConnectionState { }
class Connecting implements ConnectionState { }
class Disconnected implements ConnectionState { }

//later
ConnectionState connectionState;
if (connectionState is Connecting) { ... } 
```

我认为使用起来更清楚。编写应用程序结构有点困难，但在某些情况下，它会更好更清晰。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-17T13:00:28.793

这种方法怎么样：

```
class FruitEnums {
  static const String Apple = "Apple";
  static const String Banana = "Banana";
}

class EnumUsageExample {

  void DoSomething(){

    var fruit = FruitEnums.Apple;
    String message;
    switch(fruit){
      case(FruitEnums.Apple):
        message = "Now slicing $fruit.";
        break;
      default:
        message = "Now slicing $fruit via default case.";
        break;
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-30T14:41:19.377

是的！在 Dart 中进行枚举实际上非常有用：

```
 enum fruits{
    BANANA, APPLE, ORANGE
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-20T07:55:19.460

只需使用类型类文件。

[飞镖类型](https://github.com/NabilNoN/dart-types.git)

简单，快速，更强大，更有帮助。

***小问题，**就是这个类限制为五个不同的选择，加一个为空。*

# node.js - How to get the request method type in `app.all()`?

> ID：13899936
> 
> 赞同：25
> 
> 时间：2012-12-16T09:12:05.967
> 
> 标签：node.js, express

With expressjs, `app.all()` handles all request, and now I want the request method type(`get` or `post`) in `app.all()`, but I don't know how to do this. I've been search in expressjs document, but didn't find anything valuable.

Thanks for your answer.

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-16T09:16:22.957

I've found it! [req.method](http://expressjs.com/tr/api.html#req.method) will do, so easy!

# jquery - jquery mobile ui-btn-active doesn't work

> ID：13899939
> 
> 赞同：1
> 
> 时间：2012-12-16T09:12:25.190
> 
> 标签：jquery, mobile, tabs

In jQuery mobile I have tabs bar with three values, when i switch between the categories it just light a second

i want when i click on any tab, the tab will be set active with different color

i use this jQuery code :

```
$(document).delegate('.ui-navbar ul li > a', 'click', function () {
    $(this).closest('.ui-navbar').find('a').removeClass('ui-navbar-btn-active');
    //$('.ui-navbar ul li > a').removeClass('ui-navbar-btn-active');
    $(this).addClass('ui-navbar-btn-active');
    //$('.content_div').hide();
    $('#' + $(this).attr('data-href')).show().siblings('.content_div').hide();
}); 
```

Html :

```
 <div class="boxshadow" >

        <div data-role="navbar">
            <ul>
                <li ><a href="javascript:;" data-href="a" data-theme="a"  class="ui-btn-active ui-state-persist" class="ui-navbar-btn-active">Shopping</a></li>
                <li><a href="javascript:;" data-href="b" data-theme="a">
                Entertainment</a></li>
                <li><a href="javascript:;" data-href="c" data-theme="a">Restaurants</a></li>
            </ul>
        </div><!-- /navbar --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T18:50:49.210

当您使用 .ui-state-persist 类时，您是在告诉 jQuery Mobile 让 li 标记处于活动状态，无论您导航到哪个页面。所以你的 jQuery 脚本没有达到目的

Nix jquery 脚本和 .ui-state-persist 类，并像这样为 .ui-btn-active 类分配背景颜色

```
[data-theme="b"].ui-btn-active { background: none 0 0 no-repet #whatever-color; } 
```

如果您有多个页面结构（[http://view.jquerymobile.com/1.3.1/dist/demos/widgets/pages/#Multi-pagetemplatestructure](http://view.jquerymobile.com/1.3.1/dist/demos/widgets/pages/#Multi-pagetemplatestructure)），导航栏应该自动处理活动状态。

# c - 当没有足够的内存在 C 中运行我的程序时，我该怎么办？

> ID：13899943
> 
> 赞同：1
> 
> 时间：2012-12-16T09:13:08.633
> 
> 标签：c, memory, stack-overflow

> **可能重复：**
> [如何使用双指针分配二维数组？](https://stackoverflow.com/questions/5040496/how-can-i-allocate-a-2d-array-using-double-pointers)

我使用 VB 2012 Express 制作了一个迷宫程序。

`ROW*COLUMN`即使我设置为,它也能很好地工作`499*499`（迷宫是一个数组：）`unsigned char maze[ROW][COLUMN]`。

但是有一次我试图做一个超级巨大的迷宫`999*999`，编译器给了我一个“堆栈溢出”错误。

我知道这意味着什么，但是有没有办法分配额外的内存甚至使用一些磁盘空间来运行我的程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:15:40.793

您`maze`在堆栈上进行分配，堆栈大小通常限制在 1 到 8 兆字节之间。要克服此限制，`maze`请在堆上分配。

有关如何执行此操作的建议，请参阅[如何使用双指针分配 2D 数组？](https://stackoverflow.com/questions/5040496/how-can-i-allocate-a-2d-array-using-double-pointers)和[堆分配一个二维数组（不是指针数组）](https://stackoverflow.com/questions/10116368/heap-allocate-a-2d-array-not-array-of-pointers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T10:10:16.433

您可以动态分配数组（例如`maze = new char[ROW*COLUMN]`）或全局分配（在函数范围之外），例如

```
#define ROW 999
#define COLUMN 999

unsigned char maze[ROW][COLUMN];

int main(void)
{

} 
```

# php - Send form fields in html email

> ID：13899950
> 
> 赞同：0
> 
> 时间：2012-12-16T09:14:22.007
> 
> 标签：php, mysql

I have an HTML user form. User will fill form from webpage, when user submit that form then it will go to admin email(including form fields i.e textfield, checkbox etc) as originally filled by user

Now the problem is that form send to gmail, yahoo, hotmail as i want but to outlook it is sent as see in pic below,

![enter image description here](../Images/5694d63f83177a644d303723cc0734c7.png)

I'm using this code below,

```
$headers = "From: " ."mail@example.com" . "\r\n";
$headers .= "Reply-To: ". "mail@example.com" . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$message = "<html><body><table border='1'>
    <tr>
        <td>Name</td>
        <td><input type='text' value='test user' name='name'/></td>
    </tr>
    <tr>
        <td>Education</td>
        <td>
            <input type='checkbox' name='graduate' value='graduate' checked='checked' />Graduate<br/>
            <input type='checkbox' name='high_school' value='high_school'/>High School<br/>
            <input type='checkbox' name='primary_school' value='primary_school'/>Primary School<br/>
        </td>
    </tr>
    <tr>
        <td colspan='2'>
            <input type='submit' name='submit' value='Submit' />
        </td>
    </tr>
</table></body></html>"; 
```

Note : User will fill the form from webpage, the out put will go to admin email same as in the original form.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:40:28.563

您可以使用图像而不是复选框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T09:37:29.260

我认为您无法解决此限制，出于安全原因，它可能存在。此外，使用实际的表单字段可能会非常令人困惑——当看到它们时，用户可能会期待一些没有交互的机会。

您是否考虑过使用图形符号？

*   它适用于所有客户
*   它将独立于用户的操作系统如何呈现复选框

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T09:38:45.147

发布指向提供表单的网站的链接。当用户填写表格时，将表格中的结果发布给管理员/员工。

HTML 加上表单加上电子邮件 = 噩梦。

许多人（比如我）一开始只看“纯文本”电子邮件，这意味着根本没有 HTML 和图像。

# c++ - Win32 application with console output and without new window

> ID：13899953
> 
> 赞同：1
> 
> 时间：2012-12-16T09:14:51.913
> 
> 标签：c++, windows, visual-c++, console-application

I'd like to create a tool that can either act as command line (display some console output based on input parameters), or display a window, based on input parameters.

I'm using MSV2012 with C++, and it seems you have to 'choose' between console and window app.

I know the net is filled with samples which use AllocConsole() and redirect std::out, but it doesn't make it feel like a command line application : calling the exe from the windows console will open a new window with the console output...

Is there a way to have it use the current console window instead of allocating a new one?

If not possible, I'll make 2 applications instead, but that's a pity..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:28:12.200

其他人可能有更权威的答案，但我不相信它得到支持。

通常的解决方法是创建一个 Windows 应用程序，但有一个从 CLI 启动它的命令行包装器（并提供与原始控制台通信的通道）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T19:41:25.670

它在技术上不受支持，但我通过获取当前进程的快照找到了一个很好的解决方案，找到父进程，如果它是一个控制台应用程序，则附加到它的控制台或使用 AllocConsole 创建一个，重定向输出，获取父进程的线程如果它是 cmd.exe 并暂停它，在我退出我的应用程序之前恢复它

# android - 如何为 facebook android 应用禁用单点登录？

> ID：13899955
> 
> 赞同：2
> 
> 时间：2012-12-16T09:15:26.420
> 
> 标签：android, facebook, single-sign-on

我正在构建一个需要多个用户的用户凭据的应用程序。如果启用了 SSO，那么在使用我们的应用程序后，我将无法注销用户（前提是设备上安装了 Facebook 应用程序）。会话持续存在，注销用户的唯一方法是通过 facebook 应用程序，然后下一个用户才能登录到我们的应用程序。

所以，我需要禁用 SSO，以便它独立于设备上的 facebook 应用程序。

我在这里看到了被查询的问题：[Disabling and Enable Single Sign On in Facebook as required](https://stackoverflow.com/questions/9823868/disabling-and-enabling-single-sign-on-in-facebook-as-required)

我知道在 SDK 2.0 中，可以使用 FORCE_DIALOG_AUTH 完成，但在 SDK 3.* 中，我该怎么做？ [http://developers.facebook.com/docs/tutorials/androidsdk/3.0/upgrading-from-2.0-to-3.0/](http://developers.facebook.com/docs/tutorials/androidsdk/3.0/upgrading-from-2.0-to-3.0/)

**PS：任何其他使登录和注销独立于 facebook 应用程序的方法也可以使用**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:05:05.580

请参阅传递给 Session.openFor[Read|Publish] 的 OpenRequest 中的 setLoginBehavior - [https://developers.facebook.com/docs/reference/android/3.0/Session.OpenRequest#setLoginBehavior%28SessionLoginBehavior%29](https://developers.facebook.com/docs/reference/android/3.0/Session.OpenRequest#setLoginBehavior%28SessionLoginBehavior%29)

您可以将其设置为 SUPPRESS_SSO，它将使用 Web 对话框而不是 SSO - [https://developers.facebook.com/docs/reference/android/3.0/SessionLoginBehavior#SUPPRESS_SSO](https://developers.facebook.com/docs/reference/android/3.0/SessionLoginBehavior#SUPPRESS_SSO)

# iphone - Rotation Code not working in iOS6 it worked perfectly on iOS 5

> ID：13899958
> 
> 赞同：1
> 
> 时间：2012-12-16T09:15:56.860
> 
> 标签：iphone, objective-c, xcode, ios5, ios6

I have this code and it works perfectly on iOS 5 but not on iOS 6 please help

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)orientation
    {
        return (orientation != UIDeviceOrientationPortrait) &&
        (orientation != UIDeviceOrientationPortraitUpsideDown);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:41:26.983

让我们试试这个：首先内部`viewDidLoad`函数使用这个代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:@"UIDeviceOrientationDidChangeNotification" object:nil];
} 
```

然后，我将创建将接收两行代码通知的函数：

```
- (void)orientationChanged:(NSNotification *)object{
    NSLog(@"orientation change");
    UIDeviceOrientation deviceOrientation = [[object object] orientation];
    if(deviceOrientation == UIInterfaceOrientationPortrait || deviceOrientation == UIInterfaceOrientationPortraitUpsideDown){
        if(deviceOrientation ==UIInterfaceOrientationPortrait){
            NSLog(@"Changed Orientation To Portrait");
            // Handle your view.
        }
    }else{
        if(deviceOrientation ==UIInterfaceOrientationLandscapeLeft){
            NSLog(@"Changed Orientation To Landscape left");
            // Handle your view.
        }else{
            NSLog(@"Changed Orientation To Landscape right");
            // Handle your view.
        }

    }
} 
```

我希望我的回答会有所帮助。干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T09:26:17.867

在 iOS6 中，“shouldAutorotateToInterfaceOrientation”方法已被弃用。尝试在 plist 文件中设置方向。

# mysql - Update nothing on duplicate key exist

> ID：13899959
> 
> 赞同：-4
> 
> 时间：2012-12-16T09:16:11.133
> 
> 标签：mysql, sql, c#-4.0

I'm using the query `INSERT INTO ... ON DUPLICATE KEY UPDATE ...` in order to insert a record into the table, and if a row with duplicate keys already exists, this results in triggering an update.

I don't want any updates being performed on an existing row, if exist.

What should I do to update nothing when a row with duplicate keys exist?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:57:31.340

只需使用原始值设置唯一值，（*假设`ProductID`是唯一的*）例如，

```
INSERT INTO CART (ProductID, Quantity)
VALUES (1, 100)
ON DUPLICATE KEY UPDATE ProductID = ProductID; 
```

# java - JPanel filling entire JFrame

> ID：13899961
> 
> 赞同：1
> 
> 时间：2012-12-16T09:16:42.540
> 
> 标签：java, swing, jframe, jpanel

I am writing a simple game withing which I am using a JFrame which contains a grid and a JPanel.
Here is my pseudo code:

```
void MyJframeConstructor()
{
  // some basic bootstrap logic
  // calling repaint to draw grid
  repaint();

  // Grid is drawn fine.
  // Showing user a confirm dialog box on which I add below JPanel.

  if(confirmed)
  {
   // GameInfoPanel extends JPanel.
    infoPanel = new GameInfoPanel(new FlowLayout(FlowLayout.LEFT));
    infoPanel.setPreferredSize(new Dimension(400, 100));
    infoPanel.setLocation(500, 50);
    this.add(infoPanel);
    infoPanel.validate();      
  }
} 
```

My problem here is my JFrame or window is 480 x 680.
Within this I am drawing a grid in 480 x 480 area.
Below which I want the JPanel to be located at 500,50 with dimension 400, 100.
However, when I run this code, once the user confirms with OK, the JPanel fills up the entire JFrame.
How can I keep the panel in its location and consistent in size through out the life of the app ?
Any help is highly appreciated and thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T09:22:12.610

> 在这个范围内，我在 480 x 480 区域中绘制了一个网格。

*   覆盖[JPanel 的 PreferredSize](https://stackoverflow.com/a/9258934/714968)

*   然后调用`JFrame.pack()`和`JFrame.setVisible(true)`作为最后的代码行

*   必须阅读[InitialThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

*   如果只有一个`JPanel`( ) 则[在](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)fe`JPanel filling entire JFrame`中使用[built_in`BorderLayout``JFrame`](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)`myFrame.add(infoPanel, BorderLayout.CENTER)`而不是 FlowLayout

*   不要扩展`JFrame`创建它`Object`作为局部变量

# git - git - How do I switch the content of two branches?

> ID：13899963
> 
> 赞同：3
> 
> 时间：2012-12-16T09:17:16.263
> 
> 标签：git, github

I have a repository with an open source iOS framework. There's two branches at the moment: `master` and `develop`.

`master` contains the current version of my framework, which is now obsolete. `develop` contains the new version, which is ready for "release".

Now, I want to make the new version on `develop` the official version so I want to move it to `master`. Normally, I'd use a simple merge from `develop` to `master`. However, there are quite a bit API changes between `develop` and `master` so I get quite a bit of merge conflicts.

Before I dive into these conflicts, I'd like to know if there's a better way to just switch `master` and `develop`. The 2 versions are quite different, so I don't care about properly moving the changes. Backwards compatibility is not really a problem, just being able to switch would be just fine.

I know of `git branch -m <old> <new>`: I could *rename* `master` to `v1.4` and `develop` to `master` (and create a new `develop` from the new `master`), but I'm not sure if this is the way to go. It works fine locally, but I have no clue how this will affect downstream users once I push to Github.

So, is `git branch -m` okay, or should I bite the merge bullet? Or is there some other way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:24:40.210

您可以重命名它们，或者您可以更新每个分支以包含另一个分支的内容。这两个操作之间的唯一区别是[reflog](http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)会发生什么。假设您不在乎，那么是的，您可以将一个重命名为另一个。或者您可以使用`git reset`更改签出分支，或者`git update-ref`，这基本上是下面的机器`git branch -m`。

最简单的方法可能是使用`git branch -m`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T21:27:39.480

`git reset`是的，从技术上讲，您可以使用or将您的分支设置为任何提交`git branch -m`，但我认为您应该首先考虑分支的***含义***。

根据您的描述，您有不同版本的软件。一个旧的，当前由您的*主*分支跟踪，一个新的当前由您的*开发*分支跟踪。

如果有人知道您的旧版本并想要对其进行处理，那么他将检查您的*master*分支并期望它包含旧版本。如果您现在只是将您的*master*设置为*开发*分支（无论是合并还是重置），那将会激怒任何希望获得旧版本的人。

如果你曾经想过将分支指针移动到完全不同的提交上，这通常意味着你没有好的分支概念。- 也许您应该将您的*主*分支称为*current-stable*。然后，一旦有新的稳定版本可用，就将其重置为新的提交是有意义的。

但这一切都取决于你的发展方式。也许最好有一个开发分支，每个稳定版本一个分支，一个当前稳定分支，只要新版本准备好，它就会跳转。

# signalr - Scaling SignalR With Windows Server Service Bus

> ID：13899964
> 
> 赞同：0
> 
> 时间：2012-12-16T09:17:29.510
> 
> 标签：signalr

Is it possible to scale out SignalR using Windows Server Service Bus?

I found sample of doing it with Redis, and I know there are libraries in GitHub for SQL Server (although I couldn't find a working sample for that), but I would like to implement it using the new on-premises Service Bus.

Any ideas / references?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:09:05.223

理论上是的。当前的稳定版本支持 Azure 服务总线，[最新的来源](https://github.com/SignalR/SignalR/tree/master/src/Microsoft.AspNet.SignalR.ServiceBus)包括对横向扩展提供程序的返工，这样即使它不能开箱即用（因为这两个服务总线解决方案旨在具有 API 奇偶校验）它应该是直接实施。

使用其[DependencyResolverExtensions 类](https://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.ServiceBus/DependencyResolverExtensions.cs)启用服务总线横向扩展。

# gmail - SMTP authentication error while connecting to Gmail with oAuth2/JavaMail in web app

> ID：13899965
> 
> 赞同：3
> 
> 时间：2012-12-16T09:17:34.330
> 
> 标签：gmail, oauth-2.0, jakarta-mail

I am able to run Google's sample code for Gmail IMAP/SMTP using JavaMail with oAuth on cmdline (OAuth2Authenticator.java from [http://code.google.com/p/google-mail-oauth2-tools/](http://code.google.com/p/google-mail-oauth2-tools/))

But the same code doesn't seem to work for SMTP (IMAP works fine) in the web app on tomcat. It throws

> 535-5.7.1 Username and Password not accepted. Learn more at 535 5.7.1 [http://support.google.com/mail/bin/answer.py?answer=14257](http://support.google.com/mail/bin/answer.py?answer=14257)

Any idea, why this doesn't work for SMTP alone on web app?

# javascript - Rails - Heroku 上的 Highcharts - 获取“ReferenceError：Highcharts 未定义”

> ID：13899967
> 
> 赞同：3
> 
> 时间：2012-12-16T09:17:46.810
> 
> 标签：javascript, ruby-on-rails, heroku, highcharts

我正在使用 highcharts 绘制一些图表。它在本地工作得很好，但是当部署到heroku时，我收到这个javascript错误，说Highcharts没有定义。我虽然可能没有预编译 javascript 文件，但我检查了 heroku 日志，发现它确实被预编译了。我也去**myapp.herokuapp.com/assets/highcharts.js**并在那里找到它。所以我不确定问题是什么。

任何帮助表示赞赏，谢谢。

--- 这是页面的html

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="/assets/application-eb12a5437181ffb065f7793b96f720c9.css" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/application-b5b4fd7bed721cbc4cc70b5a8c8654e9.js" type="text/javascript"></script>
<meta content="authenticity_token" name="csrf-param" />
....
<div id="container2" style="min-width: 400px; height: 100%; margin: 0 auto"></div><br><br />

<script>
$(function () {
    var chart2;
    $(document).ready(function() {
        chart2 = new Highcharts.Chart({
            chart: {
            renderTo: 'container2',
            type: 'bar',
            height: 450
         },
        title: {
            text: 'Questions'
        },
         subtitle: {
            text: 'number of students with answer'
        },
        xAxis: {
            categories: ["Part3 00:03:31", "Part4 00:03:41", "Part5 00:06:17"],
            labels:{
            useHTML: true}

        },
        yAxis: {
            min: 0,
            allowDecimals: false,
            title: {
                text: 'Number of Students'
            }
        },
        legend: {
            enabled: false,
            layout: 'vertical',
            backgroundColor: '#FFFFFF',
            align: 'left',
            verticalAlign: 'top',
            x: 100,
            y: 70,
            floating: true,
            shadow: true
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.series.name+': '+ this.y +' student(s)<br>'+question(this.point.x, this.series.name);
            }
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },

        series: [{"name":"Answer 1","data":[11,7,6]},{"name":"Answer 2","data":[4,6,2]},{"name":"Answer 3","data":[5,7,6]},{"name":"Answer 4","data":[0,0,6]}]
    }); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-23T19:26:24.770

我建议使用这个 gem：[https ://github.com/market76/lazy_high_charts](https://github.com/market76/lazy_high_charts)

它使在 Rails 应用程序中使用 High Charts 变得更加容易。您也可以使用 PhantomJS 导出图形图像服务器端。

# c - 二叉树插入根

> ID：13899968
> 
> 赞同：0
> 
> 时间：2012-12-16T09:18:27.293
> 
> 标签：c

我正在从包含一些整数的输入文件中读取整数并尝试创建二叉树。我无法弄清楚为什么它一直在 (l==NULL)。第二次它应该向左或向右取决于读取值是否大于根值。感谢任何帮助。谢谢！

```
leaf* create_leaf(int i)
{
  leaf* l = (leaf*)malloc(sizeof(leaf));
  l->left = NULL;
  l->right = NULL;
  l->data = i;
}

leaf* l=NULL;
while(fscanf(input,"%d",&i) != EOF)
   {
       add_leaf(l,i);
    }

void add_leaf(leaf* l, int i)
{

   if(l == NULL)
  {
    printf("adding root\n"); 
    l = create_leaf(i);
  }

 else if(i <= l->data)
   {
    if(l->left == NULL)
       {
        l->left = create_leaf(i);}
     else {
      add_leaf(l->left,i); }   
   }
 else 
  {
    if(l->right == NULL)
      { 
    l->right = create_leaf(i); }
     else {
      add_leaf(l->right,i); }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:26:51.853

您的代码有一些问题。

首先也是最重要的主要问题是您没有返回您在 create_leaf 函数中创建的叶子。

其次，请不要强制转换 malloc，它是不必要的，并且可以掩盖问题。

第三请检查malloc的返回码。尽管即使 malloc 指示在过度使用系统上成功，也不能保证您的内存可用，但如果您获得 NULL，那肯定会很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T09:20:56.860

当您重新分配`l`in`add_leaf()`时，新值`l`不会在函数返回时传播给调用者。

你有两个选择：

*   您可以将其作为双指针传递`leaf** l`，并相应地更改您的代码。
*   你可以从函数`return`中获取新的。`l`

# search - 如何制作一个从数据库中获取数据的简单自动完成搜索框？

> ID：13899971
> 
> 赞同：0
> 
> 时间：2012-12-16T09:18:33.907
> 
> 标签：search, autocomplete, jquery-autocomplete, jquery-ui-autocomplete, autosuggest

我有点菜鸟，`jQuery`而且`MySQL`......我看过一些教程，但我不知道如何将这些东西与我的数据库结合起来。例如，我有一个表（？），其中包含我在数据库中称为“TOPICS”的所有主题。我想要的是，如果有人使用搜索框，他们将获得这些主题中的建议。

[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

这是我想使用的一个非常简单的自动完成功能。我可以根据当地的建议来做，但我不知道如何将它与我的`database`. 任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T00:21:02.717

我认为这就是您所追求的（好吧，无论如何我都会这样做）：

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Autocomplete - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    var availableTags = [
      <?php
        require "connect.php"; //connect to your database
        $select = "
          SELECT topicname
          FROM topics
          ORDER BY topicname
        ";
        $query = mysqli_query($link, $select);
        if(!$query) die("Error: " . mysqli_error($link) . "\nMySQL: " . $select); //for trouble shooting purposes
        while($array = mysqli_fetch_array($query)){
          echo '"' . $array['topicname'] . '",';
        }
      ?>
    ];
    $( "#tags" ).autocomplete({
      source: availableTags
    });
  });
  </script>
</head>
<body>
 <div class="ui-widget">
 <label for="tags">Tags: </label>
 <input id="tags" />
</div>
</body></html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:01:17.873

您不能直接从 Javascript 连接到 MySQL。您需要一个 php 文件、jsp 文件或类似文件来从数据库中获取结果并将它们返回给自动完成。查看[http://www.htmlblog.us/jquery-autocomplete](http://www.htmlblog.us/jquery-autocomplete)以获得一个简单的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T09:22:01.967

自动完成提供了一个例子：http: [//jqueryui.com/autocomplete/#remote-jsonp](http://jqueryui.com/autocomplete/#remote-jsonp)

```
$( "#city" ).autocomplete({
            source: function( request, response ) {
                $.ajax({
                    url: "http://ws.geonames.org/searchJSON",
                    dataType: "jsonp",
                    data: {
                        featureClass: "P",
                        style: "full",
                        maxRows: 12,
                        name_startsWith: request.term
                    },
                    success: function( data ) {
                        response( $.map( data.geonames, function( item ) {
                            return {
                                label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
                                value: item.name
                            }
                        }));
                    }
                });
            },
            minLength: 2,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.label :
                    "Nothing selected, input was " + this.value);
            },
            open: function() {
                $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
            },
            close: function() {
                $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T05:37:17.417

与其通过 REST 前端连接到 MySQL，我认为查看第三方解决方案（例如 www.rockitsearch.com）是有意义的。它具有开箱即用的基本自动完成功能。您需要做的就是注册、导出数据并将小部件集成到您的网站。其余的工作将自动为您完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-24T23:31:42.953

我认为对 PHP 脚本的 Ajax 调用返回 JSON 格式的前 10 个可用答案列表，基于搜索输入文本值，并在搜索框下方的 DIV 中从 Javascript（在 Ajax 调用函数内部）显示，值是可选择/可点击的。

# netbeans - NetBeans 文档 TeX

> ID：13899975
> 
> 赞同：1
> 
> 时间：2012-12-16T09:19:37.073
> 
> 标签：netbeans, tex

我想知道是否有办法将 TeX 与 NetBeans 集成？

我试过用谷歌搜索，但找不到明确的答案，但找到了一个 Eclipse 项目，但 NetBeans 需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:52:42.287

您是否尝试过[http://plugins.netbeans.org/plugin/5749/tex-language-support](http://plugins.netbeans.org/plugin/5749/tex-language-support)？我知道这个插件很旧，但也许它适合您的需求？

# c# - Entity Framework Code First：多对多关系；从用户中删除一些角色

> ID：13899977
> 
> 赞同：0
> 
> 时间：2012-12-16T09:20:01.727
> 
> 标签：c#, entity-framework, ef-code-first, many-to-many

我有一个多对多的用户/角色关系。

没关系，当我将新用户插入数据库并将其添加到某些角色时。

但是，如何从用户中删除一些角色？我不想完全删除用户或角色，我只想： 1\. 从用户中删除一些角色；2\. 为用户分配新角色。

我的课程：

```
public class User
{
    public int Id { get; set; }    
    public virtual string UserName { get; set; }
    public virtual string Password { get; set; }

    public List<Role> Roles { get; set; }
}

public class Role
{
    public int Id { get; set; }
    public virtual string Name { get; set; }

    public List<User> Users { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:32:33.037

我对您的要求并不完全清楚，但我认为您希望能够从用户中删除角色，并且从适当的角色中删除该用户？

如果是这样，您将知道用户和角色，并且对于这个简单的情况，想要使用[List.Remove](http://msdn.microsoft.com/en-us/library/cd666k3e.aspx)函数。

```
void RemUserRole(User u, Role r)
{
    u.Roles.Remove(r);
    r.Users.Remove(u);
} 
```

这将从每个角色和用户的相关列表中删除项目。

编辑：

要向用户添加新角色，请使用[List.Add](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx)方法。

```
void AddUserRole(User u, Role r)
{
    u.Roles.Add(r);
    r.Users.Add(u);
} 
```

这只是将每个项目添加到另一个角色/用户列表中。

# sql - 3张表的sql查询重复记录

> ID：13899979
> 
> 赞同：0
> 
> 时间：2012-12-16T09:20:22.657
> 
> 标签：sql

我有这个查询返回给我一个用户的所有行

```
$strSQL = "SELECT * FROM customer , bills , vouchers
WHERE 
bills.bills_CustomerName = customer.customer_Name and
vouchers.vouchers_CustomerName = customer.customer_Name and
bills.bills_CustomerName like '%".$_POST["MyName"]."%'
"; 
```

我的问题是一行重复 2 次，该`customer`表与表相关，`bills`并且与`vouchers`一个 FK 列上的表相关。

`bills`桌子 ：

```
bills_ID  - bills_CustomerName - bills_Total 
```

`customer`桌子 ：

```
customer_ID - customer_Name - customer_Tell 
```

`vouchers`桌子 ：

```
vouchers_ID - vouchers_CustomerName - vouchers_Total 
```

我们得到

```
Name       Total    Tell 

kam johin   100      0444444444
kam johin   100      0444444444
mak pop    200      0588888888
mak pop    200      0588888888 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:34:36.507

如果客户到账单是一对多，客户到凭证也是一对多，那么您有时会遇到“鸿沟陷阱”，您必须在加入之前汇总账单和凭证中的子值顾客。

或者您的数据模型应该更像：- Customer->Bill->Voucher，在这种情况下，您需要在凭证表中包含与凭证相关的 Bill 的外键。

顺便说一句，您可能可以为客户使用一些代理键 - 当两个不同的客户具有相同的名称时会发生什么？

# c++ - 比 stat() 在目录中查找文件更好的方法？

> ID：13899982
> 
> 赞同：2
> 
> 时间：2012-12-16T09:20:56.040
> 
> 标签：c++, linux, ubuntu

我试图找出某些文件是否在某个文件夹中。但是，即使文件存在，我尝试查找它们的方式在某些文件夹中也不起作用。

```
bool FileExists(string strFilename) {
  struct stat stFileInfo;
  bool blnReturn;
  int intStat;
  intStat = stat(strFilename.c_str(),&stFileInfo);
  if(intStat == 0) {
    // We were able to get the file attributes
    // so the file obviously exists.
    blnReturn = true;
    printf("Found file %s\n", strFilename.c_str());
  } else {
    blnReturn = false;
    printf("Didn't find file %s\n", strFilename.c_str());
  }

  return(blnReturn);
} 
```

当我在 /mnt/ram 中挂载一个目录时，它不会（有时会）在那里找到文件，但是当我使用磁盘上的另一个目录时，它总是能找到文件。

有没有其他方法可以找出目录中是否存在文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:17:47.720

调用或任何其他目录/文件列表的结果`stat`取决于调用进程的权限。`/mnt/ram`可能对当前用户隐藏。

如评论中所述，`opendir`并且`readdir`是获取（递归）目录列表的惯用方式。显然，`stat`是成语的一部分`:-)`。

# jquery - 从同一表行中找出键上的特定输入值

> ID：13899986
> 
> 赞同：0
> 
> 时间：2012-12-16T09:21:18.563
> 
> 标签：jquery, jquery-selectors

我有以下表格。我想要做的是当值`rate[]`改变时我想得到改变值的值和`product[]`使用jquery的值。

例如：如果我将 rate[] 的值（从表的第一行）更改为 100，我想获得 rate[] ..100 的新值及其 product_id[].. 1001

```
<form id="myform">
  <table>
     <tr>
         <td>Product 1</td>
         <input type="hidden" name="product_id[]" value="1001" />
         <td><input type="text" name="rate[]" value="2" /></td>
         <td><input type="text" name="quantity[]" value="10" /></td>
     </tr>

    <tr>
         <td>Product 2</td>
         <input type="hidden" name="product_id[]" value="1002" />
         <td><input type="text" name="rate[]" value="2" /></td>
         <td><input type="text" name="quantity[]" value="10" /></td>
     </tr>
  <table>
</form> 
```

我的 JQuery 代码；

```
<script type="text/javascript">

  $(":text[name='rate[]']").bind("keyup", function() {

     // What to write here?

 }); 
```

你能帮我写 jquery 代码来找出这些值吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:27:37.097

这应该有效：

```
var productID = $(this).closest('tr').find('input[name^="product_id"]').val(); 
```

# google-chrome-extension - 滚动条在 chrome 扩展中不可见

> ID：13899990
> 
> 赞同：2
> 
> 时间：2012-12-16T09:22:10.770
> 
> 标签：google-chrome-extension, scrollbar

我开发了一个 chrome 扩展，如果弹出窗口中的内容超过 popup 正文的指定高度，它应该有一个滚动条。

我正在添加我的 popup.html 的内容

```
<!DOCTYPE html>
  <head>
    <title>Compare Hatke</title>
    <script type='text/javascript' src='popup.js'>
    </script>
    <style>
      body {
        min-width:357px;
        min-height: 500px;
        overflow-x:hidden;
        overflow-y:auto;
      }

      img {
        margin:5px;
        border:2px solid black;
        vertical-align:middle;
        width:75px;
        height:75px;
      }
    </style>
  </head>
  <body>

    Extension developed by Prashant Singh
  </body>
</html> 
```

还有将数据注入弹出文件的JS

```
var len = currentArray.length;
  var string = "";

  for(i=0;i<len;i++){
    if(tab.id==currentArray[i].tabID){
     string += "<img src='" + currentArray[i].image + "' height='20px' max-width='100px'> " + currentArray[i].prod +"<br>";
    }
  }
  document.write(string); 
```

可能是什么问题？即使要显示的数据要大得多，可以在一个视图中显示，我也没有得到滚动条。

任何解释将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:43:49.293

在 popup.html 页面中添加了一个 div

```
<body>
    <div id='showData'>
    Extension developed by Prashant Singh
  </div>
  </body> 
```

取而代之`document.write`的是`document.getElementById('showData').innerHTML`，它一闪而过。任何解释。为什么前一个不起作用？

# javascript - 使用 Flash TextArea 作为 TinyMCE 编辑器 textarea

> ID：13899995
> 
> 赞同：-2
> 
> 时间：2012-12-16T09:23:05.043
> 
> 标签：javascript, flash, tinymce, textarea, externalinterface

我有一个包含 TextArea 的 flash swf 文件，我想将该 textarea 用作 TinyMCE textArea。请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:03:05.950

不，这是不可能的，因为 swf 中的 textarea 不是 tinymce 初始化所需的常规 html 元素。