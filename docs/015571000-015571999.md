# StackOverflow 问答 15571000-15571999

# python - 正文未在 Python REST 中定义

> ID：15571000
> 
> 赞同：0
> 
> 时间：2013-03-22T13:01:34.493
> 
> 标签：python, django, python-requests

我正在使用 python `requests` 发出 POST REST 请求。

这是代码

```
REST_URLU = REST_URL+'user/'+get_usermain.username
headers = {'content-type': 'application/json; charset=UTF-8','Accept':'application/json; charset=UTF-8','X-Talisman-Secret':API_KEY}
payload = {"org_name":ORG_KEY,
          "first_name":full.first_name.encode('utf8'),
         "middle_name" : "ranjan",
         "last_name" : "dubey",    
         "passwd":"9454545", 
         "city" : "Gwalior",
         "state" : "Madhya Pradesh",
         "country" : "India",
         "pin" : "560068",
         "street" : "Cocx town",
         "primary_landline" : "080255555",
         "primary_mobile":"584644884",
         "primary_phon" : "0558877822558",
         "primary_email":get_usermain.email.encode('utf8'),
         }

print payload
print "resttttttttttttttttt"
print REST_URLU

print "+++++++++++++++++++++++++++++++++"
r = requests.post(REST_URLU, params=payload,headers = headers) 
```

现在的问题是每当我发布相同的身体时

```
{"org_name":"45668",
              "first_name":"NAME",
             "middle_name" : "ranjan",
             "last_name" : "dubey",    
             "passwd":"9454545", 
             "city" : "Gwalior",
             "state" : "Madhya Pradesh",
             "country" : "India",
             "pin" : "560068",
             "street" : "Cocx town",
             "primary_landline" : "080255555",
             "primary_mobile":"584644884",
             "primary_phon" : "0558877822558",
             "primary_email":"someemail@hi.com",
             } 
```

来自 Mozilla REST 客户端它工作正常。但是当我在 Python 中使用相同的主体时它不起作用。

租赁帮助我我可能做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:05:55.907

我敢打赌，您需要将内容传递为`data=json.dumps(payload)`to`requests.post()`而不是 as `params`。文档说这`params`成为 url 参数，而您希望将其作为 JSON 编码的消息体。

# ios - iOS 在越狱设备上录制电话音频

> ID：15571007
> 
> 赞同：0
> 
> 时间：2013-03-22T13:01:57.837
> 
> 标签：ios, jailbreak, cydia

我希望能够在越狱的 iOS 设备上录制电话的音频。
我可以想到两种可能的方法：
1）一旦电话开始就启动麦克风录音机并记录2）捕获电话的实际音频流

以上任何一种可能吗？还有别的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:04:22.657

语音备忘录记录器仅从麦克风拾取音频 - 因此除非您使用免提电话，否则它不会记录其他人。

# accelerometer - 升级到 4.0 后禁用了几个 Android 软件传感器

> ID：15571008
> 
> 赞同：1
> 
> 时间：2013-03-22T13:02:07.270
> 
> 标签：accelerometer, android-4.0-ice-cream-sandwich, android-sensors

我最近使用[HTCdev](http://www.htcdev.com/devcenter/downloads)上的 RUU 将我的 HTC Desire S 更新为 Ice Cream Sandwich (Android 4.0) 。在此升级之前，所有与 2.3 兼容的传感器都可以正常工作。*升级后，唯一工作*的传感器是：

```
- Accelerometer
- Light sensor
- Magnetic field sensor
- Microphone
- Orientation sensor
- Proximity sensor 
```

这带来了一个问题，因为我需要一个项目的线性加速度计。我无济于事，试图找到解决这个问题的方法。xperia 似乎也出现了一些类似的问题，但总的来说，我似乎找不到解决这个问题的方法，也找不到任何下载可能有帮助的软件补丁的地方。任何帮助将不胜感激。

[可以在此处](http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en//compatibility/4.0/android-4.0-cdd.pdf)查看 4.0 应包含的传感器列表

# android - 片段内部类应该是静态的

> ID：15571010
> 
> 赞同：70
> 
> 时间：2013-03-22T13:02:17.013
> 
> 标签：android, fragment, android-dialogfragment

我有一个`FragmentActivity`应该显示的内部类`Dialog`。但我必须做到`static`。Eclipse 让我可以用`@SuppressLint("ValidFragment")`. 如果我这样做是不是很糟糕，可能的后果是什么？

```
public class CarActivity extends FragmentActivity {
//Code
  @SuppressLint("ValidFragment")
  public class NetworkConnectionError extends DialogFragment {
    private String message;
    private AsyncTask task;
    private String taskMessage;
    @Override
    public void setArguments(Bundle args) {
      super.setArguments(args);
      message = args.getString("message");
    }
    public void setTask(CarActivity.CarInfo task, String msg) {
      this.task = task;
      this.taskMessage = msg;
    }
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
      // Use the Builder class for convenient dialog construction
      AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
      builder.setMessage(message).setPositiveButton("Go back", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int id) {
          Intent i = new Intent(getActivity().getBaseContext(), MainScreen.class);
          startActivity(i);
        }
      });
      builder.setNegativeButton("Retry", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int id) {
          startDownload();
        }
      });
      // Create the AlertDialog object and return it
      return builder.create();
    }
  } 
```

`startDownload()`启动异步任务。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-03-22T17:19:55.137

*非静态内部类*确实持有对其父类的引用。使 Fragment 内部类非静态的问题在于您始终持有对*Activity*的引用。GarbageCollector*无法*收集您的*Activity*。因此，如果例如方向发生变化，您可以“泄漏”*活动。*因为*Fragment*可能仍然存在并被插入到新的*Activity*中。

**编辑：**

由于有人问我一些例子，我开始写一个，在这样做时，我发现使用非静态片段时出现了更多问题：

*   它们不能在 xml 文件中使用，因为它们没有空的构造函数（它们可以有一个空的构造函数，但您通常通过这样做来实例化非静态嵌套类`myActivityInstance.new Fragment()`，这与仅调用空构造函数不同）
*   它们根本不能被重用——因为`FragmentManager`有时也会调用这个空的构造函数。如果您在某些事务中添加了*片段。*

因此，为了使我的示例正常工作，我必须添加

```
wrongFragment.setRetainInstance(true); 
```

线以不使应用程序在方向更改时崩溃。

如果您执行此代码，您将有一个带有一些文本视图和 2 个按钮的活动 - 这些按钮会增加一些计数器。片段显示了他们认为他们的活动所具有的方向。一开始一切正常。但是在更改屏幕方向后，只有第一个 Fragment 可以正常工作 - 第二个仍然在其旧活动中调用东西。

我的活动课：

```
package com.example.fragmenttest;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.content.res.Configuration;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;

public class WrongFragmentUsageActivity extends Activity
{
private String mActivityOrientation="";
private int mButtonClicks=0;
private TextView mClickTextView;

private static final String WRONG_FRAGMENT_TAG = "WrongFragment" ;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    int orientation = getResources().getConfiguration().orientation;
    if (orientation == Configuration.ORIENTATION_LANDSCAPE)
    {
        mActivityOrientation = "Landscape";
    }
    else if (orientation == Configuration.ORIENTATION_PORTRAIT)
    {
        mActivityOrientation = "Portrait";
    }

    setContentView(R.layout.activity_wrong_fragement_usage);
    mClickTextView = (TextView) findViewById(R.id.clicksText);
    updateClickTextView();
    TextView orientationtextView = (TextView) findViewById(R.id.orientationText);
    orientationtextView.setText("Activity orientation is: " + mActivityOrientation);

    Fragment wrongFragment = (WrongFragment) getFragmentManager().findFragmentByTag(WRONG_FRAGMENT_TAG);
    if (wrongFragment == null)
    {
        wrongFragment = new WrongFragment();
        FragmentTransaction ft = getFragmentManager().beginTransaction();
        ft.add(R.id.mainView, wrongFragment, WRONG_FRAGMENT_TAG);
        ft.commit();
        wrongFragment.setRetainInstance(true); // <-- this is important - otherwise the fragment manager will crash when readding the fragment
    }
}

private void updateClickTextView()
{
    mClickTextView.setText("The buttons have been pressed " + mButtonClicks + " times");
}

private String getActivityOrientationString()
{
    return mActivityOrientation;
}

@SuppressLint("ValidFragment")
public class WrongFragment extends Fragment
{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        LinearLayout result = new LinearLayout(WrongFragmentUsageActivity.this);
        result.setOrientation(LinearLayout.VERTICAL);
        Button b = new Button(WrongFragmentUsageActivity.this);
        b.setText("WrongFragmentButton");
        result.addView(b);
        b.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                buttonPressed();
            }
        });
        TextView orientationText = new TextView(WrongFragmentUsageActivity.this);
        orientationText.setText("WrongFragment Activities Orientation: " + getActivityOrientationString());
        result.addView(orientationText);
        return result;
    }
}

public static class CorrectFragment extends Fragment
{
    private WrongFragmentUsageActivity mActivity;

    @Override
    public void onAttach(Activity activity)
    {
        if (activity instanceof WrongFragmentUsageActivity)
        {
            mActivity = (WrongFragmentUsageActivity) activity;
        }
        super.onAttach(activity);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        LinearLayout result = new LinearLayout(mActivity);
        result.setOrientation(LinearLayout.VERTICAL);
        Button b = new Button(mActivity);
        b.setText("CorrectFragmentButton");
        result.addView(b);
        b.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                mActivity.buttonPressed();
            }
        });
        TextView orientationText = new TextView(mActivity);
        orientationText.setText("CorrectFragment Activities Orientation: " + mActivity.getActivityOrientationString());
        result.addView(orientationText);
        return result;
    }
}

public void buttonPressed()
{
    mButtonClicks++;
    updateClickTextView();
}

} 
```

请注意，`onAttach`如果您想在不同的活动中使用您的*片段*，您可能不应该将活动投入其中- 但在这里它适用于示例。

activity_wrong_fragment_usage.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".WrongFragmentUsageActivity" 
android:id="@+id/mainView">

<TextView
    android:id="@+id/orientationText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="" />

<TextView
    android:id="@+id/clicksText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="" />

<fragment class="com.example.fragmenttest.WrongFragmentUsageActivity$CorrectFragment"
          android:id="@+id/correctfragment"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-03-10T12:29:31.383

我不会谈论内部片段，而是更具体地说是在活动中定义的 DialogFragment，因为它是这个问题的 99%。
从我的角度来看，我不希望我的 DialogFragment（您的 NetworkConnectionError）是静态的，因为我希望能够从其中的包含类（Activity）中调用变量或方法。
它不会是静态的，但我也不想生成 memoryLeaks。
解决办法是什么？
简单的。当你进入 onStop 时，确保你杀死你的 DialogFragment。就这么简单。代码看起来像这样：

```
public class CarActivity extends AppCompatActivity{

/**
 * The DialogFragment networkConnectionErrorDialog 
 */
private NetworkConnectionError  networkConnectionErrorDialog ;
//...  your code ...//
@Override
protected void onStop() {
    super.onStop();
    //invalidate the DialogFragment to avoid stupid memory leak
    if (networkConnectionErrorDialog != null) {
        if (networkConnectionErrorDialog .isVisible()) {
            networkConnectionErrorDialog .dismiss();
        }
        networkConnectionErrorDialog = null;
    }
}
/**
 * The method called to display your dialogFragment
 */
private void onDeleteCurrentCity(){
    FragmentManager fm = getSupportFragmentManager();
     networkConnectionErrorDialog =(DeleteAlert)fm.findFragmentByTag("networkError");
    if(networkConnectionErrorDialog ==null){
        networkConnectionErrorDialog =new DeleteAlert();
    }
    networkConnectionErrorDialog .show(getSupportFragmentManager(), "networkError");
} 
```

这样您就可以避免内存泄漏（因为它很糟糕），并确保您没有无法访问您活动的字段和方法的 [expletive] 静态片段。从我的角度来看，这是处理该问题的好方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-17T07:28:51.897

如果你在 android studio 中开发它，那么如果你不把它作为静态的就没有问题。项目将运行没有任何错误，并且在生成 apk 时你会得到错误：这个片段内部类应该是静态的 [ValidFragment]

那是 lint 错误，您可能正在使用 gradle 构建，要禁用错误中止，请添加：

```
lintOptions {
    abortOnError false
} 
```

**构建.gradle。**`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-06T17:56:58.043

如果您想访问外部类（Activity）的成员并且仍然不想在 Activity 中使成员静态（因为片段应该是公共静态的），您可以覆盖 onActivityCreated

```
public static class MyFragment extends ListFragment {

    private OuterActivityName activity; // outer Activity

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        activity = (OuterActivityName) getActivity();
        ...
        activity.member // accessing the members of activity
        ...
     } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-03-07T07:42:45.513

在内部类之前添加注释

@SuppressLint("有效片段")

# c - 传递的参数改变值

> ID：15571012
> 
> 赞同：0
> 
> 时间：2013-03-22T13:02:19.043
> 
> 标签：c, visual-studio-2010, pointers, memory, parameters

这是代码：

```
#include <stdio.h>
#include <stdlib.h>

void foo(int* ptr) {
    printf("ptr is %x\n", ptr);
}

void main() {
    int* ptr = (int*)malloc(sizeof(int));
    printf("ptr is %x\n", ptr);
    foo(ptr);
    free(ptr);
} 
```

...他是输出：

```
ptr is 0x007446c0
ptr is 0x00000000 
```

...问题
*是：为什么这会发生在我身上？？？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:07:57.090

发生这种情况是因为`%x`in`printf`需要一个无符号整数，而不是指针。

以下是如何修复您的程序以获得您想要的行为：

```
#include <stdio.h>
#include <stdlib.h>

void foo(int* ptr) {
    printf("ptr is %p\n", (void*)ptr);
}

int main() {
    int* ptr = malloc(sizeof(int));
    printf("ptr is %p\n", (void*)ptr);
    foo(ptr);
    free(ptr);
    return 0;
} 
```

这是[ideone 的链接](http://ideone.com/mpZ5mK)；运行产生预期结果：

```
ptr is 0x8fa3008
ptr is 0x8fa3008 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:08:02.360

因为你的程序调用了未定义的行为，我想。这就是我认为你的意思：

```
#include <stdio.h>
#include <stdlib.h>

void foo(int* ptr) {
    printf("ptr is %p\n", (void *) ptr); /* %x tells printf to expect an unsigned int. ptr is not an unsigned int. %p tells printf to expect a void *, which looks a little better, yeh? */
}

int main() { /* main ALWAYS returns int... ALWAYS! */
    int* ptr = malloc(sizeof(int)); /* There is no need to cast malloc. Stop using a C++ compiler to compile C. */
    printf("ptr is %p\n", (void *) ptr);
    foo(ptr);
    free(ptr);
} 
```

这能解决你的问题吗？

# android - 如何合并两个应用程序？

> ID：15571013
> 
> 赞同：0
> 
> 时间：2013-03-22T13:02:24.250
> 
> 标签：android

我正在开发一个应答机应用程序。

基本上它必须自动接听电话，发出语音信息并开始录制电话。

我设计了一个应用程序来自动接听电话和另一个应用程序来记录电话。单独两个应用程序都可以正常工作。但是在我合并它们之后，应用程序崩溃了。

我在这里看到了一个例子：[Combine 2 android apps](https://stackoverflow.com/questions/7950677/combine-2-android-apps)。我以相同的方式合并了应用程序，但应用程序仍然崩溃。

如何正确合并我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:27:45.160

尝试

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setClassName("com.example.package", "com.example.package.ActivityToStart");
startActivity(intent); 
```

或者

```
PackageManager pm = getPackageManager();
Intent intent = pm.getLaunchIntentForPackage("com.example.package");
startActivity(intent); 
```

调用 2 个应用程序。并从其默认保存位置检索文件。

# junit4 - JUnit4：假设该消息未打印

> ID：15571016
> 
> 赞同：2
> 
> 时间：2013-03-22T13:02:27.417
> 
> 标签：junit4

如何查看`assumeThat`JUnit4 中的错误消息？

该测试通过但不打印任何内容。原因是要对 进行测试`read1`，我`b`需要`true`。由于`b`是`false`，因此该测试不适用。

```
boolean b = false;
byte[] read1 = null;
assumeThat("b shold be true to continue testing", b, is(true));
assertThat("read1 should not be null", read1, is(notNullValue())); 
```

我没有找到任何类型的`assumeThat`消息日志。我的问题是我想知道哪些测试通过但没有完成，因为假设 X 失败。如果仍然为假设打印一条消息（例如类似于断言失败时），那就太好了。

奇怪的是，我无法找到关于这个问题的评论（包括在 JUnit 页面中）。所以有可能我只是做错了什么或在错误的地方寻找消息。我正在使用 Eclipe。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:13:08.090

如果我理解正确，

```
assertThat("read1 should not be null", read1, is(notNullValue())); 
```

应该只在 if 中执行`b == true`，但如果`b == false`?

那你为什么不干脆做：

```
if(b) {
    assertThat("read1 should not be null", read1, is(notNullValue()));
} else {
    log.warn("b == false, Test on read1 skipped");
} 
```

? 或者如果发生这种情况，您是否希望有一个特殊的测试结果状态（“成功但可疑”）？

更新：我刚刚重新阅读了 Assume 上的文档。它指出，如果假设失败，则整个测试被认为“没有意义”并标记为“忽略”。通过小型、有针对性的测试，通常可以为您提供所需的所有信息。

更新 2：刚刚在 Eclipse 4.2 中使用 JUnit 4.8 进行了尝试，我手头在这里。这只是标志着测试成功。所以我猜 Eclipse 中的 JUnit runner 可能无法正确支持该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-13T11:13:48.620

同意之前的答案（由 NamshubWriter 提供）。
但是，如果您真的希望（有理由）清楚地表明由于某些假设失败而忽略了测试，您可以执行以下操作：

```
@Before
public void before() {
    final String mandatoryPropKey = "system.mandatory-property-for-this-test";
    final String mandatoryPropExpectedVal = "true";
    try { // try/catch because the Assume failure won't print any message (by design)
        Assume.assumeTrue("Assumed that the \"" + mandatoryPropKey + "\" system property is \"" + mandatoryPropExpectedVal + "\".", Boolean.valueOf(System.getProperty(mandatoryPropKey, mandatoryPropExpectedVal)));
    } catch (AssumptionViolatedException ave) {
        logger.warn("Not executing this test because this assumption failed: {}", ave.getMessage());
        throw ave;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-02T09:20:38.027

不会打印错误，因为假设失败不是错误。这些`assume`方法用于短路由于值或状态一个或多个对象（或原语）而不应运行的测试。假设是为 Theories 跑步者设计的，但它们也可以用于其他跑步者。

假设的一种常见用法是，当您有多个测试方法需要执行一组操作以使对象进入特定状态之前，才能执行实际的测试用例逻辑。

在假设之前，每个测试都会使对象进入所需的状态，断言它处于该状态，然后继续。例如，对于堆栈的测试，许多测试需要一个非空堆栈，因此您将创建一个堆栈，推送一个项目，断言堆栈不为空，然后执行其余的测试（弹出一个项目，推送另一个项目等）。

如果您在多个测试中执行此模式，然后引入了一个导致所有这些测试失败的错误（例如，`isEmpty()`始终返回 true），就会出现问题。当您运行测试时，您会遇到很多失败，以至于您不知道从哪里开始。

因此，您有一个测试来验证如果您将一个项目推入一个空堆栈，则`isEmpy()`返回 false。然后任何需要非空堆栈的测试都会这样做：

```
Stack<Object> stack = new Stack<>();
stack.push(new Object());
assumeFalse(stack.isEmpty());
// Continue with the test methods 
```

如果您想要一条错误消息，您可能想要使用断言。

# java - 如何在远程 Windows 机器上打开文件并查看

> ID：15571021
> 
> 赞同：0
> 
> 时间：2013-03-22T13:02:37.010
> 
> 标签：java, windows, jakarta-ee, command-line, remote-access

我想从本地 Windows 机器上打开远程 Windows 机器上的文件。该文件应仅在远程计算机上可见。

我的问题是，我应该在远程 pc 上打开一个 bat 文件，该文件创建访问权限以执行诸如打开浏览器等操作。

我确实使用**PSExec**远程运行 bat 文件。一切看起来都不错，但是当我尝试在远程 PC 上打开浏览器时，它不会打开浏览器，而是在任务管理器中显示浏览器进程。

当我在远程机器上手动打开该 bat 文件时，一切正常。浏览器打开，我的工作就完成了。

但我想从我的本地机器上做这件事，尤其是从命令行。这样我就可以在 Java 中使用这个命令。

请帮忙。如果问题不清楚，请询问更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:27:40.837

尝试将 -i 选项与 psexec 一起使用或指定会话，即。-i 1

来自 psexec 手册。

'-i 运行程序，使其与远程系统上指定会话的桌面交互。如果未指定会话，则进程在控制台会话中运行。

例子：

C:\SysinternalsSuite\psexec.exe \remotecomputer -u DOMAIN\administrator -p adminpass -i 1 "\remotecomputer\c$\Program Files (x86)\Google\Chrome\Application\chrome.exe" [http://tinyurl. com/6fbgntx](http://tinyurl.com/6fbgntx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:31:22.143

我建议您使用 WMI - 它管理工具。它允许在远程机器上运行进程（显然如果你有足够的权限）。您可以使用一种流行的互操作性库（JaWin、JInterop、JIntegra）从 Java 访问 WMI，也可以编写 JScript 或 VBScript 并从 java 执行它。

JaWin 和 Jinterop 是开源的。JIntegra 不是。JaWin 需要客户端计算机上的 Windows 操作系统。JIntegra 和 JInterop 可以从其他操作系统执行。

我使用了所有 2 个建议的方法和所有 3 个库。可能现在我更喜欢 JInterop。

# c# - 保存图像时如何查找通用 GDI+ 错误的原因？

> ID：15571022
> 
> 赞同：40
> 
> 时间：2013-03-22T13:02:40.260
> 
> 标签：c#, .net, image, gdi+, system.drawing

在加载和存储图像时，我的代码可以工作很长时间，我发现我有*一个图像*破坏了这个代码：

```
const string i1Path = @"c:\my\i1.jpg";
const string i2Path = @"c:\my\i2.jpg";

var i = Image.FromFile(i1Path);
i.Save(i2Path, ImageFormat.Jpeg); 
```

例外是：

> System.Runtime.InteropServices.ExternalException 发生
> 
> **GDI+ 中出现一般错误。**
> 
> 在 System.Drawing.Image.Save（字符串文件名，ImageCodecInfo 编码器，EncoderParameters encoderParams）
> 在 System.Drawing.Image.Save（字符串文件名，ImageFormat 格式）
> 在 ...

据我所知，这张照片没有什么特别之处。它的大小约为 250 像素，可以在 Windows Image Viewer 或 Paint.NET 中打开：

![在此处输入图像描述](../Images/46a5c7a477e41037c4a2da26efee788f.png)

*（由于上图，上传到 Stack Overflow 后就没有报错了，我把[原图放在这里了](https://www.magerquark.de/misc/i1.jpg)）*

我发现在调用[`Save`方法](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.image.save?view=dotnet-plat-ext-3.1#System_Drawing_Image_Save_System_String_System_Drawing_Imaging_ImageFormat_)时，目标图像文件是用零字节创建的。

我真的对导致错误的原因一无所知。

**我的问题：**

*   你能想到什么特殊的东西会阻碍 .NET 保存图像吗？
*   有没有办法（除了恐慌）来缩小这些错误的范围？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-24T06:35:50.107

虽然我仍然没有找到保存图像时导致错误的确切原因，但我找到了一个解决方法：

```
const string i1Path = @"c:\my\i1.jpg";
const string i2Path = @"c:\my\i2.jpg";

var i = Image.FromFile(i1Path);

var i2 = new Bitmap(i);
i2.Save(i2Path, ImageFormat.Jpeg); 
```

即通过将图像内部复制到[`Bitmap`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)实例中并保存该图像而不是原始图像，错误消失了。

我假设通过复制它，导致原始`Save`调用失败的错误部分被删除和/或规范化，从而使保存操作能够成功。

![保存的图像 i2.jpg](../Images/a0106176041cd01d60033f33d9b3dae7.png)

有趣的是，如此存储的图像在磁盘上的文件 (16 kB) 比其原始源 (26 kB) 小。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-02-16T05:50:33.887

首先确保所需的文件夹具有读/写权限。更改权限为我解决了这个问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-04-28T12:53:38.567

解决方案就在这里，你必须释放图像对象来释放服务器上的内存。尝试使用`using`语句。确保服务器上的目标目录也存在。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-22T13:03:55.580

原因可能是图像延迟加载，当您尝试保存时，加载过程尚未完成。

遵循[此博客文章](http://csharp-tricks.blogspot.ch/2010/10/allgemeiner-fehler-in-gdi.html)中的内容（假设您在问题中链接的图片是德国人）提供了一个可能的解决方案。此外[，这个 SO question's](https://stackoverflow.com/questions/7105561/a-generic-error-occurred-in-gdi) accepted answer 表明这是由于您尝试保存的图像文件已锁定。

**编辑**
Ulysses Alves，来自链接的博客条目：如果您使用它加载图像，`Image.FromFile()`它会保持锁定状态，直到它被处理掉。这可以防止调用`Save()`.

```
pictureBox1.Image = Image.FromFile("C:\\test\\test1.jpg");
pictureBox1.Image.Save("C:\\test\\test2.jpg"); 
```

上面的代码会抛出一个错误。

要使其工作，您需要复制图像。以下代码有效：

```
pictureBox1.Image = Image.FromFile("C:\\test\\test1.jpg");
Image copy = pictureBox1.Image;
copy.Save("C:\\test\\test2.jpg") 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-12-25T00:09:58.227

我发现这个问题是因为我也遇到了类似的错误，并且该文件**实际上是用零长度创建的**（如果您没有看到任何文件，请首先按照其他答案的建议检查写入文件夹的权限）。尽管我的代码略有不同（我`stream`习惯从内存中读取图像，而不是从文件中读取图像），但我认为我的回答可能对任何面临类似问题的人有所帮助。

它可能看起来违反直觉，但在完成图像之前，您无法真正处理内存流。

**不工作**：

```
Image patternImage;

using (var ms = new MemoryStream(patternBytes)) {
    patternImage = new Bitmap(ms);
}

patternImage.Save(patternFile, ImageFormat.Jpeg); 
```

只是在你完成图像之前不要处理流。

**作品**：

```
using (var ms = new MemoryStream(patternBytes)) {
    patternImage = new Bitmap(ms);
    patternImage.Save(patternFile, ImageFormat.Jpeg);
} 
```

什么是误导：

*   错误信息并没有真正告诉你任何事情
*   您可以看到图像属性，例如宽度和高度，但无法保存

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-12-17T14:13:23.533

我的解决方案是在保存文件之前编写临时内容（File.WriteAllText）

**这是代码：**

```
var i = Image.FromFile(i1Path);
File.WriteAllText(i2Path, "empty");  // <---- magic goes here
i.Save(i2Path, ImageFormat.Jpeg); 
```

请尝试让我知道

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-01-14T14:52:10.237

就我而言，我不小心删除了存储图像的目录。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-20T18:34:50.760

只需以管理员身份使用 Visual Studio 或以管理员身份运行代码创建的应用程序，它应该可以顺利运行。这是用户访问权限问题。我遇到了同样的问题，并通过以管理员身份运行 Visual Studio 来解决它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-23T14:14:56.777

在程序中打开

```
const string i1Path = @"c:\my\i1.jpg";

const string i2Path = @"c:\my\i2.jpg";

var i = Image.FromFile(i1Path);

i.Save(i2Path, ImageFormat.Jpeg);

i.Dispose(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-24T05:40:31.680

关键信息：

```
// Using System.Drawing.Imaging:
new Bitmap(image).Save(memoryStream, ImageFormat.Jpeg); 
```

您**必须**将图像转换为位图才能保存。

使用：

```
// Using System.Drawing.Imaging:
image.Save(memoryStream, ImageFormat.Jpeg); 
```

将抛出错误：

> 保存图像时出现一般 GDI+ 错误

# php - 向 Zend2 ViewModel 添加默认变量

> ID：15571023
> 
> 赞同：1
> 
> 时间：2013-03-22T13:02:43.933
> 
> 标签：php, zend-framework2, viewmodel

将默认变量添加到 ViewModel 的“Zend”方式是什么。

目前我有：

```
return new ViewModel(array('form' => new CreateUserForm)); 
```

但我想总是向 ViewModel 数组添加一些变量。就像时间和日期一样，或者菜单的类别。我正在考虑扩展 ViewModel，因为这似乎是 OO 方式，但 Zend 总是以不同的方式做事......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:16:56.587

一种方法可能是在控制器中有一个方法，该方法返回 ViewModel 填充时间、日期等，然后 addVariables() 到 Action 中返回的模型。

但是，更好的方法是使用**视图助手**，因为它们在整个应用程序的每个视图/布局中都可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:52:16.983

如果你想要一些额外的功能，你总是可以扩展 ViewModel ......

```
class MyViewModel extends ViewModel
{
     /**
      * Default Variables to set
      */
     protected $_defaultValues = array(
        'test' => 'bob'
     );

     /**
     * Constructor
     *
     * @param  null|array|Traversable $variables
     * @param  array|Traversable $options
     */
    public function __construct($variables = null, $options = null)
    {
        //$variables = array_merge($this->_defaultValues, $variables);
        $this->setVariables($this->_defaultValues);

        parent::__construct($variables, $options)
    }
} 
```

现在在您的控制器中，只需使用 return 您的新视图模型：

```
/**
 * Some Controller Action 
 */
function myAction()
{
     return new MyViewModel();
} 
```

# .net - Array 或 ArraySegment 作为缓冲区

> ID：15571035
> 
> 赞同：2
> 
> 时间：2013-03-22T13:03:42.150
> 
> 标签：.net, buffer, bytearray

在深入探讨问题本身之前，请理解，我无法控制这里的整个食物链 - “你做错了”的回答或评论无济于事，因为我需要针对给定的 API 进行开发.

传递原始数据块的组件通常通过类型为`byte[]`或`ArraySegment<byte>`. 后者的一大优势是能够一次性分配一个大缓冲区，然后通过 ArraySegment 机制使用部分缓冲区来减少内存分配、碎片和 GC 问题。这里没有什么新鲜事。

不过，这是有代价的：消耗 an 的（可能是外部的、闭源的）组件`ArraySegment<byte>`获得对完整数组的引用（并因此访问），这意味着，如果它行为不端，它有能力破坏完全不相关的缓冲区。

现在：

*   广泛的搜索显示没有任何机制可以**仅**将现有数组的一部分公开为完整数组，[这个 SO 问题](https://stackoverflow.com/questions/5756692/arraysegment-returning-the-actual-segment-c-sharp)是我得到的最接近的问题，但仍然无法使用，因为它“不是数组”。
*   `System.Array`不支持继承自。
*   `System.ArraySegment<T>`也不支持继承自。

我的一系列问题是（回答一个过时的问题）：

*   是否有一种“棘手”的方式来`byte[]`向（外国）消费者展示自行开发的包装器
*   或者是否有一种“棘手”的方式将自行开发的包装器呈现`ArraySegment<byte>`给（外国）消费者，这不会暴露完整的底层数组
*   或者，有没有办法继承`System.Array`，我错过了
*   再次交替：有没有办法`byte[]`从一个已经分配（和固定）的内存区域创建一个，我错过了，如果它是 GCed，它不会搞砸

**编辑：**

从我的评论来看，我说得不够表达。来回复制数据不是解决方案。这是我现在使用的拐杖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:07:14.837

**编辑：**为了澄清，你的选择是

*   将外部库重写为不硬编码`T[]`/`ArraySegment<T>`
*   选择不同的方式来分割缓冲区，以便对外部库的调用自然与缓冲区大小保持一致
*   接受你的超大缓冲区暴露了容易被外部代码破坏的额外数据
*   复制数据

**编辑2：**毫无疑问

> 是否有一种“棘手”的方式将自行开发的包装器作为字节 [] 呈现给（外国）消费者

不，你不能这样做。

> 或者是否有一种“棘手”的方式将自行开发的包装器作为 ArraySegment 呈现给（外国）消费者，这不会暴露完整的底层数组

不，你不能这样做。

> 或者，有没有办法从 System.Array 继承，我错过了

不，你不能这样做。

> 再次交替：有没有办法从一个已经分配（和固定）的内存区域创建一个字节 []，我错过了，如果它是 GCed，它不会搞砸

不，你不能这样做。

* * *

*在不*更改外部 API 的情况下，这变成了原始答案：

如果您在使用数组时遇到问题并希望阻止其他代码访问超出允许范围的数组部分，则必须执行以下操作：

```
T[] originalData = ...;
int viewStart = ...;
int viewLength = ...;

// use a separate array for the viewable region
T[] view = new T[viewLength];
Array.Copy(originalData, viewStart, view, 0, viewLength);
ArraySegment<T> segment = new ArraySegment<T>(view).

// call other code
...

// apply changes
Array.Copy(view, 0, originalData, viewStart, viewLength); 
```

这些是由于 API 设计者选择使用`T[]`/`ArraySegment<T>`而不是`IList<T>`.

# java - 如何深拷贝

> ID：15571036
> 
> 赞同：3
> 
> 时间：2013-03-22T13:03:44.413
> 
> 标签：java

我很难理解 Java 中“深拷贝”的概念。

假设我有一个包含各种参数的类“myClass”。我尝试编写一个方法“copy”，它应该返回这样的类的深层副本：

```
public myClass copy() {

    myClass deepCopy = new myClass();
    deepCopy.varA = varA;
    deepCopy.varB = varB;
    return deepCopy;

} 
```

有人可以确认这是否确实是“深度复制”还是我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:05:52.143

如果您不想自己实现深拷贝，那么您可以进行[序列化](http://javapapers.com/core-java/java-serialization/)。它确实隐式地实现了深拷贝，并且优雅地处理了循环依赖关系。

可以在[这里](http://javapapers.com/core-java/java-clone-shallow-copy-and-deep-copy/)找到一篇关于深拷贝、克隆和浅拷贝的好文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:33:44.990

如果 varA 和 VarB 是原始类型，这将只是一个深拷贝。如果它们是引用类型，那么您的新对象将指向这些类的与原始对象相同的实例。

实现深拷贝的一种简单方法是通过序列化。Apache commons lang 为此提供了一个实用方法（SerializationUtils.clone( foo ) ）。

然而，它确实要求所有对象都是可序列化的。

如果您不是这种情况，XStream 可用于以最少的开发工作进行深度克隆。

[http://x-stream.github.io/](http://x-stream.github.io/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:07:16.370

除非：

*   类“myClass”仅包含 varA 和 varB。
*   类“myClass”没有超类。
*   变量 varA 和 varB 是基本类型（即 String、int、long ......）。否则，您也必须对它们应用相同的复制过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:10:44.590

在深拷贝中当复制的对象包含一些其他对象时，它的引用被递归复制

[在这里](http://javapapers.com/core-java/java-clone-shallow-copy-and-deep-copy/)查看更多

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T13:17:17.033

当一个对象连同它所引用的对象一起被复制时，就会发生深拷贝。

如果假设有一个`MainObject1`具有int 类型和ContainObject 类型`MainObject`字段的类型。当您对 MainObject1 进行深层复制时，将使用包含“field1”复制值的“field3”和包含 ContainObject1 复制值的“ContainObject2”创建 MainObject2。因此，在 MainObject1 中对 ContainObject1 所做的任何更改都将在 MainObject2 中。`"field1"``"ContainObject1"``not be reflected`

在您的实现中，如果您尝试模拟深拷贝，那么您应该只有这两个变量：`varA`并且`varB`在您的原始类型类中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-22T13:16:29.633

观察以下程序的输出。
1> 在没有 clone() 方法的情况下查看输出。从以下程序中删除 clone() 方法。（浅拷贝示例）
2> 使用 clone() 方法查看输出。（示例深拷贝。请参阅 ArrayList 对象的输出）

```
import java.util.ArrayList;
import java.util.List;

public class DeepCopy implements Cloneable {
    private List<String> hobbiesList;
    private int age;
    private String name;
    private float salary;

    public static void main(String[] args) throws CloneNotSupportedException {
        DeepCopy  original = new DeepCopy();
        original.name="AAA";
        original.age=20;
        original.salary=10000;
        original.hobbiesList = new ArrayList<String>();
        original.hobbiesList.add("Cricket");
        original.hobbiesList.add("Movies");
        original.hobbiesList.add("Guitar");
        original.hobbiesList.add("Eating");

        DeepCopy  cloned = (DeepCopy) original.clone();
        System.out.println("original:="+original);
        System.out.println("cloned  :="+cloned);
        System.out.println("After adding two more hobbies in 'original' which untimately reflected in 'cloned'");
        cloned.name="BBB";
        cloned.age=27;
        cloned.salary=18237;
        cloned.hobbiesList.add("Trecking");
        System.out.println("original       :="+original);
        System.out.println("cloned  changed:="+cloned);
    }
    @Override
    protected Object clone() throws CloneNotSupportedException {
        DeepCopy clone = (DeepCopy)super.clone();
        clone.hobbiesList = new ArrayList<String>(clone.hobbiesList);
        return clone;
    }
    @Override
    public String toString() {
        return "My name is (String)"+name + " having age (int)"+age+". I earned (float)"+salary+" and hobbies are (ArrayList)"+hobbiesList;
    }
} 
```

# php - 存储数据库过程

> ID：15571037
> 
> 赞同：0
> 
> 时间：2013-03-22T13:03:47.067
> 
> 标签：php, sql, stored-procedures, pdo

我正在使用php和pdo，有人告诉我，如果我在数据库中使用程序，我的程序会大大提高。

我想知道在以下几点方面可以提供程序的改进是什么：

*   请求速度。
*   安全方面。（程序和数据库）。
*   可扩展性。
*   盈利能力。
*   什么时候方便，什么时候不方便。
*   其他有好有坏之分。

还想知道调用过程的 PDO 参数化查询是否可能。

我很欣赏**任何**关于这个主题的材料（书籍、教程、代码片段、评论）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:27:35.897

在决定程序的哪个部分在哪里执行时，这是个好问题。当我使用 Classic ASP 和 MS SQL Server 编写应用程序时，我遇到了类似的问题。

在回答您的问题之前，我想指出一个 Web 应用程序至少具有三层：

*   表示层，例如客户端的网络浏览器
*   应用层——你的 PHP 或 JSP 或 ASP 服务器运行的地方
*   以及数据所在的数据库层。

常识是，无论可以在表示层执行什么数据验证，我们都将其放在那里。例如，检查某个表单域是否为空。

当应用程序必须在其他两层（应用程序和数据库层）开发时，这很有趣。许多糟糕的程序员编写代码的方式是在 Web 服务器和 DB 服务器之间进行多次往返，以完成非常小的事情。我们应该考虑在这些时候在数据库中编码存储过程。

关于你提到的几点，我想回答：

*   **请求速度。**

    由于 Web 服务器和数据库服务器之间的往返次数较少，因此对您的 Web 服务器发出的请求处理得更快。当您的应用程序变得非常复杂并且数据变得太大（以数百 TB 计）时，这种差异尤其显着。处理负载从您的 Web 服务器转移到您的数据库服务器，因此您的 Web 服务器更适合您的客户端请求。

*   **安全方面。（程序和数据库）。**

    为您的程序提供的安全性现在处于两个级别 - Web 服务器级别和数据库级别。您可以对这两者之间的通信进行限制，以确保您的程序不会崩溃并且数据完好无损。

*   **可扩展性。**

    Web 服务器代码和数据库服务器代码现在处于两个不同的层。两个层都可以根据需要独立扩展。阅读[此处](http://docs.oracle.com/cd/B10500_01/server.920/a96532/ch1.htm#18265)了解可扩展性的确切含义。

*   盈利能力。

    我不知道如何回答这个问题，但我突然想到一个想法：如果您支付数据库服务器费用并让它在 Web 服务器超载时闲置，那有什么意义呢？如果我为数据库服务器付费，我会充分利用它，给它一些我的 Web 服务器所具有的处理负载。

*   **什么时候方便，什么时候不方便。**

    当 Web 和数据库服务器之间的往返次数过多时，使用它最为方便。我可能会一次又一次地提到这一点，但事实证明这个问题令人头疼。

    When it is not convenient? Well, in simple cases where a single SQL statement does everything necessary.

*   Others good and bad points.

    *   You must be sure about the communication between these two tiers - what is passed and what is received. Keep everything well documented as any mistake would hamper both the tiers.

# android - 客户端服务器通信应用程序在模拟器上运行，但不在设备上

> ID：15571038
> 
> 赞同：2
> 
> 时间：2013-03-22T13:03:47.887
> 
> 标签：android, client-server, httpclient

我正在为android制作客户端服务器应用程序，其中客户端是android，服务器是本地服务器。它在模拟器上成功运行，但不在设备上。它实际上并没有崩溃，而是从服务器给出响应

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
    <title>ERROR: The requested URL could not be retrieved</title>
</head>
<body>
    <div id="content">

    <h1>ERROR</h1>
    <h2>The requested URL could not be retrieved</h2>
    <hr/>
    <P>
     While trying to retrieve the URL:
    <A HREF="http://10.0.2.2/test/testing.php">http://10.0.2.2/test/testing.php</A>
    <P>
     The following error was encountered:
   <UL>
       <LI>
            <STRONG>
         Connection to 10.0.2.2 Failed
         </STRONG>
     </UL>
         <P>
     The system returned:
     <PRE><I>    (110) Connection timed out</I></PRE>
         <P>
         The remote host or network may be down.  Please try the request again.
            <P>Your cache administrator is <A HREF="mailto:webmaster">webmaster</A>. 
     </div>
           <!--
          -- Unfortunately, Microsoft has added a clever new
          -- feature to Internet Explorer.  If the text in
           -- an errors message is too small, specifically
           -- less than 512 bytes, Internet Explorer returns
           -- its own error message.  Yes, you can turn that
           -- off, but *surprise* its pretty tricky to find
          -- buried as a switch called smart error
           -- messages  That means, of course, that many of
           -- Resins error messages are censored by default.
           -- And, of course, youll be shocked to learn that
           -- IIS always returns error messages that are long
           -- enough to make Internet Explorer happy.  The
           -- workaround is pretty simple: pad the error
           -- message with a big comment to push it over the
           -- five hundred and twelve byte minimum.  Of course,
           -- thats exactly what youre reading right now.
         //-->
         </body></html> 
```

我正在使用 httpclient 和 url 是 10.0.2.2 并且还使用互联网权限和 USB 调试。我只想在设备上运行。有没有我必须在移动设备上更改的设置或在 android 清单文件中更改 android 项目或任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:58:55.873

模拟器可以工作，因为它与计算机位于同一网络上。如果要在手机上使用 URL，则必须连接到服务器的网络。您使用的是**本地**IP 地址，因此您应该在同一个网络上。这将使用您手机的无线连接。

您可以做的另一件事是使用您的**外部**IP 地址，这样您就不需要在同一个网络上。你应该用谷歌搜索细节，但我认为你只需要找到你的**外部**IP 地址（[whatismyip.com](http://www.whatismyip.com/)）并确保你要连接的端口在路由器的设置中是打开的（通常是端口 80）。这将让您使用手机的 3G 或 4G。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-02T18:41:53.807

我也面临同样的问题`node.js server`

这是我如何解决这个问题的：

1.  `Control Panel`在你的电脑上 打开
2.  点击`System and Security` ![截屏](../Images/761d4afa2a7bf869e7b99687bd415c96.png)
3.  `Windows Defender Firewall`点击 下方`Allows app through windows firewall` ![截屏](../Images/4d56f1c34cfc1417b8f7683cade47223.png)
4.  找到`Node.js server-side Javascript`并标记正确 ![截屏](../Images/dec8ba0651189e6e64d26abb8a3e0c57.png)

# cxf - cxf spring_security 样本失败

> ID：15571041
> 
> 赞同：0
> 
> 时间：2013-03-22T13:04:04.030
> 
> 标签：cxf

我正在尝试学习 CXF。我刚刚下载了最新的并且正在运行示例。我能够成功运行“基本”jax-rs 演示。我现在正在尝试“spring_security”演示。运行服务器应用程序时，我看到以下异常：

```
Mar 22, 2013 8:51:39 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/beans.xml]
Mar 22, 2013 8:52:00 AM org.springframework.util.xml.SimpleSaxErrorHandler warning
WARNING: Ignored XML validation warning
org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'http://www.springframework.org/schema
/security/spring-security-2.0.4.xsd', because 1) could not find the document; 2) the document could not be read; 3) the
root element of the document is not <xsd:schema>.
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:
195)
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.warning(ErrorHandlerWrapper.java:96)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:380)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.reportSchemaErr(XSDHandler.java:2541)
        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.reportSchemaWarning(XSDHandler.java:2532)
        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getSchemaDocument(XSDHandler.java:1836)
        at com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:531)
        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(XMLSchemaLoader.java:556)
        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.findSchemaGrammar(XMLSchemaValidator.java:2443)

        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1788
)
        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:711)
        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.ja
va:400)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocument
FragmentScannerImpl.java:2756)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScanne
rImpl.java:511)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
        at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:232)
        at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
        at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.j
ava:388)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.jav
a:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.jav
a:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefini
tionReader.java:143)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefini
tionReader.java:178)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefini
tionReader.java:149)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext
.java:124)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext
.java:93)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefresha
bleApplicationContext.java:130)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationCont
ext.java:467)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:771)
        at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:411)
        at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:763)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:247)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1238)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:706)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:480)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
        at org.eclipse.jetty.server.Server.doStart(Server.java:277)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at demo.jaxrs.servlet.Server.<init>(Server.java:55)
        at demo.jaxrs.servlet.Server.main(Server.java:61)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:291)
        at java.lang.Thread.run(Thread.java:662)
Mar 22, 2013 8:52:00 AM org.springframework.web.context.ContextLoader initWebApplicationContext
SEVERE: Context initialization failed
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 53 in XML document from ServletContext resou
rce [/WEB-INF/beans.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matc
hing wildcard is strict, but no declaration can be found for element 'security:global-method-security'.
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.j
ava:396)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.jav
a:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.jav
a:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefini
tionReader.java:143)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefini
tionReader.java:178)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefini
tionReader.java:149)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext
.java:124)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext
.java:93)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefresha
bleApplicationContext.java:130)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationCont
ext.java:467)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:771)
        at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:411)
        at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:763)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:247)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1238)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:706)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:480)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
        at org.eclipse.jetty.server.Server.doStart(Server.java:277)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at demo.jaxrs.servlet.Server.<init>(Server.java:55)
        at demo.jaxrs.servlet.Server.main(Server.java:61)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:291)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration ca
n be found for element 'security:global-method-security'.
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:
195)
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator
.java:423)
        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3188)

        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1933
)
        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:711)
        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.ja
va:400)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocument
FragmentScannerImpl.java:2756)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScanne
rImpl.java:511)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
        at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:232)
        at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
        at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.j
ava:388)
        ... 34 more
Mar 22, 2013 8:52:00 AM org.eclipse.jetty.webapp.WebAppContext doStart
WARNING: Failed startup of context o.e.j.w.WebAppContext{/,file:/C:/cxf/apache-cxf-2.7.3-src/distribution/src/main/relea
se/samples/jax_rs/spring_security/target/JAXRSSpringSecurity/},target/JAXRSSpringSecurity.war
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 53 in XML document from ServletContext resou
rce [/WEB-INF/beans.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matc
hing wildcard is strict, but no declaration can be found for element 'security:global-method-security'.
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.j
ava:396)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.jav
a:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.jav
a:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefini
tionReader.java:143)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefini
tionReader.java:178)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefini
tionReader.java:149)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext
.java:124)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext
.java:93)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefresha
bleApplicationContext.java:130)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationCont
ext.java:467)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:771)
        at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:411)
        at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:763)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:247)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1238)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:706)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:480)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
        at org.eclipse.jetty.server.Server.doStart(Server.java:277)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at demo.jaxrs.servlet.Server.<init>(Server.java:55)
        at demo.jaxrs.servlet.Server.main(Server.java:61)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:291)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration ca
n be found for element 'security:global-method-security'.
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:
195)
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator
.java:423)
        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3188)

        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1933
)
        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:711)
        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.ja
va:400)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocument
FragmentScannerImpl.java:2756)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScanne
rImpl.java:511)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
        at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:232)
        at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
        at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.j
ava:388)
        ... 34 more
Mar 22, 2013 8:52:00 AM org.eclipse.jetty.server.AbstractConnector doStart
INFO: Started SelectChannelConnector@0.0.0.0:9002
Server ready... 
```

**beans.xml 如下：**

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:jaxrs="http://cxf.apache.org/jaxrs"
  xmlns:aop="http://www.springframework.org/schema/aop"
  xmlns:security="http://www.springframework.org/schema/security"
  xsi:schemaLocation="
http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/aop 
http://www.springframework.org/schema/aop/spring-aop.xsd
http://www.springframework.org/schema/security 
http://www.springframework.org/schema/security/spring-security-2.0.4.xsd
http://cxf.apache.org/jaxrs
http://cxf.apache.org/schemas/jaxrs.xsd">

  <import resource="classpath:META-INF/cxf/cxf.xml" />
  <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

  <jaxrs:server id="bookservice" address="/">
    <jaxrs:serviceBeans>
      <ref bean="customerservice"/>
    </jaxrs:serviceBeans>          
    <jaxrs:providers>
        <bean class="demo.jaxrs.service.SecurityExceptionMapper"/>
    </jaxrs:providers>
  </jaxrs:server>

  <bean id="customerservice" class="demo.jaxrs.service.CustomerServiceImpl"/>
<!--
  <bean id="customerservice" class="demo.jaxrs.service.CustomerServiceSecuredImpl"/>
-->

  <security:global-method-security secured-annotations="enabled">
      <security:protect-pointcut 
        expression="execution(* demo.jaxrs.service.CustomerService.getCustomer(*))" 
        access="ROLE_CUSTOMER, ROLE_ADMIN"/>
      <security:protect-pointcut 
        expression="execution(* demo.jaxrs.service.CustomerService.addCustomer(*))" 
        access="ROLE_ADMIN"/>
      <security:protect-pointcut 
        expression="execution(* demo.jaxrs.service.CustomerService.updateCustomer(Long,demo.jaxrs.service.Customer))" 
        access="ROLE_ADMIN"/> 
      <security:protect-pointcut 
        expression="execution(* demo.jaxrs.service.CustomerService.deleteCustomer(*))" 
        access="ROLE_ADMIN"/>    
      <security:protect-pointcut 
        expression="execution(* demo.jaxrs.service.CustomerService.getOrder(*))" 
        access="ROLE_CUSTOMER, ROLE_ADMIN"/> 
  </security:global-method-security>

  <security:http auto-config='true'>
    <security:http-basic />
  </security:http>

  <security:authentication-provider>
    <security:user-service>
      <security:user name="bob" password="bobspassword" authorities="ROLE_CUSTOMER" />
      <security:user name="fred" password="fredspassword" authorities="ROLE_CUSTOMER, ROLE_ADMIN" />
    </security:user-service>
  </security:authentication-provider> 
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:16:17.223

security:global-method-security 元素似乎有错误。您是否在 bean 配置文件中使用此元素？验证您是否在 xml 文件的标头上使用了正确的 xsd 定义。xsd 版本必须与 spring-security 版本兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:48:34.160

如果您使用的是最新的 CXF，请确保您在 spring 配置文件中定义了正确的命名空间和模式位置。例如：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:sec="http://www.springframework.org/schema/security"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans      http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/security   http://www.springframework.org/schema/security/spring-security-3.1.xsd">

</beans> 
```

并确保您具有`spring-security-config`. 如果你在`Maven`这里使用它是：

```
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-config</artifactId>
    <version>${org.springframework.version}</version>
    <scope>compile</scope>
</dependency> 
```

# c++ - C++ - 允许通过基类（接口）访问，禁止通过派生类访问（具体实现）？

> ID：15571044
> 
> 赞同：2
> 
> 时间：2013-03-22T13:04:10.997
> 
> 标签：c++, inheritance, casting, abstract-class, explicit-implementation

假设我有纯抽象类`IHandler`和派生自它的类：

```
class IHandler
{
public:
   virtual int process_input(char input) = 0;
};

class MyEngine : protected IHandler
{
public:
   virtual int process_input(char input) { /* implementation */ } 
}; 
```

我想在我的 MyEngine 中继承该类，以便我可以传递`MyEngine*`给任何期望`IHandler*`并让他们能够使用`process_input`. 但是我不想允许访问，`MyEngine*`因为我不想公开实现细节。

```
MyEngine* ptr = new MyEngine();
ptr->process_input('a');                           //NOT POSSIBLE
static_cast<IHandler*>(ptr)->process_input('a');   //OK
IHandler* ptr2 = ptr;                              //OK
ptr2->process_input('a');                          //OK 
```

这可以通过受保护的继承和隐式转换来完成吗？我只设法得到：

> 从“MyEngine *”到“IHandler *”的转换存在，但无法访问

由于我来自 C# 背景，这基本上是 C# 中的显式接口实现。这是 C++ 中的有效方法吗？

**额外的：**

为了更好地了解我为什么要这样做，请考虑以下几点：

类`TcpConnection`通过 TCP 实现通信，并且在其构造函数中需要指向 interface 的指针`ITcpEventHandler`。当`TcpConnection`在套接字上获取一些数据时，它将该数据传递给它的`ITcpEventHandler`using `ITcpEventHandler::incomingData`，或者当它轮询它使用的传出数据时`ITcpEventHandler::getOutgoingData`。

我的类`HttpClient`使用`TcpConnection`（聚合）并将自身传递给`TcpConnection`构造函数，并在这些接口方法中进行处理。

所以`TcpConnection`必须实现这些方法，但我不希望用户使用`HttpClient`直接访问`ITcpEventHandler`方法（`incomingData`，`getOutgoingData`）。他们应该不能打电话`incomingData`或`getOutgoingData`直接打电话。

希望这能澄清我的用例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T13:09:02.407

派生`protected`使基类的成员无法通过指向派生类的指针访问，并且不允许隐式转换。

在我看来，您想要的不是禁止通过基类（接口）进行访问，而是通过派生类（具体实现）：

```
class IHandler
{
public:
   virtual int process_input(char input) = 0;         //pure virtual
   virtual std::string name() { return "IHandler"; }  //simple implementation
};

class MyEngine : public IHandler
//               ^^^^^^
{
protected: // <== Make the functions inaccessible from a pointer
           //     or reference to `MyEngine`.

   virtual int process_input(char input) { return 0; }   //override pure virtual
   using IHandler::name;                                 //use IHandler version
}; 
```

在这里，在派生类中，您基本上覆盖了`process_input`函数的可见性，因此客户端只能通过指针或对基类的引用来调用它们。

这样，您将无法做到这一点：

```
MyEngine* ptr = new MyEngine();
ptr->process_input('a');   // ERROR!
std::cout << ptr->name();  // ERROR! 
```

但这将是可能的：

```
IHandler* ptr = new MyEngine();
ptr->process_input('a');   // OK
std::cout << ptr->name();  // OK 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:08:10.043

在 C++`protected`和`private`继承服务中使用**继承的实现**。也就是说，你定义了一个带有方法的类，例如一个模板类，当你想使用它的功能而不是它的接口时，你继承`protected`or `private`。所以实际上你的基类需要定义你想在子类中使用的方法。

[这](http://www.parashift.com/c++-faq/private-inheritance.html)是有关此主题的链接。这真的很难，我同意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:18:24.437

有点难以理解您希望在这里实现的真正目标，因为无论您在父级或子级上调用该方法，只要它是虚拟的，都会调用相同的方法。

那就是说你有几个选择。

您可以通过强制执行返回接口的创建调用来使用户无法*获得子类型的指针（或对象）。*那你就不用担心人为的限制了，他们根本就生不了孩子：

```
class Concrete : public Interface
{
public:
    static Interface* create() { return new Concrete; }

private:
    Concrete() { }
}; 
```

您可以覆盖界面，`protected`如另一个答案所示。

您可以利用非虚拟接口模式来制作父级中定义的整个可访问公共接口。然后不管他们有什么对象，他们总是从接口类中获取公共 API：

```
class Interface
{
public:
    void foo() { foo_impl(); }

private:
    virtual void foo_impl() = 0;
};

class Concrete
{
private:
    virtual void foo_impl() { }
}; 
```

# django - Django 强制密码过期

> ID：15571046
> 
> 赞同：11
> 
> 时间：2013-03-22T13:04:15.100
> 
> 标签：django, passwords

是否有任何 django 应用程序可以在 30 天等特定时间间隔后强制使用户的密码过期？我正在使用 djangp 的 auth 并想扩展它或使用社区应用程序。

到目前为止我已经尝试过：

1.  在用户配置文件中添加了一个字段，用于存储上次更新密码的日期。
2.  扩展登录方法以检查此日期并将用户重定向到密码更改页面。

我感到困惑的是：

1.  在更改密码之前阻止用户访问该站点。
2.  用户不应该能够登录或只输入 url 来直接访问该页面。

请注意，我不想使用中间件，因为它会限制资源。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T13:52:47.100

你似乎在正确的轨道上。设置最后一次更新密码的日期，检查timedelta是否大于30天，如果是则重定向到更改密码页面。如果 timedelta 大于 30 天，您的登录视图应该基本保持不变，除非用户实际上不会登录到请求对象。

```
from datetime import date, timedelta
from django.contrib.auth import authenticate, login

def my_view(request):
    username = request.POST['username']
    password = request.POST['password']
    user = authenticate(username=username, password=password)
    if user is not None:
        if user.is_active:
            if date.today() - user.password_date > timedelta(days=30):
                # Redirect to password change page
            else:
                login(request, user)
                # Redirect to a success page.
        else:
            # Return a 'disabled account' error message
    else:
    # Return an 'invalid login' error message. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-30T20:20:45.357

嗯，有 django-passwords-policies，[http ://tarak.github.io/django-password-policies/topics/force.password.change.html](http://tarak.github.io/django-password-policies/topics/force.password.change.html)

# c# - 无法创建“匿名类型”类型的常量值

> ID：15571047
> 
> 赞同：7
> 
> 时间：2013-03-22T13:04:21.177
> 
> 标签：c#, .net, entity-framework, linq-to-entities, anonymous-types

我有两个 linq 查询。我想在另一个查询中使用一个查询的结果。

```
var t2s = (from temp3 in _ent.Products                       
           where temp3.Row_Num == 2
           select new { temp3.ProductID }); 
```

然后我在另一个查询中使用这个 var：

```
var _query = (from P1 in _ent.brands
              join temp2 in on 
                  new { Produ_ID = (Int32?)P1.Prod_ID } 
                  equals new { Produ_ID = (Int32?)temp2.ProductID }
             ); 
```

当我自己运行第一个查询时，它会给我正确的结果。如果我在没有 a 的情况下运行第二个，`join`它会给我正确的结果，但是带有 a`join`会给我以下错误：

> 错误：无法创建“匿名类型”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:58:49.097

你确定你需要加入吗？那这个呢：

```
var t2s = _ent.Products.Where(t => t.Row_Num == 1).Select(t =>t.ProductID);

var _query = _ent.brands.Where(b => t2s.Contains(b.Prod_ID)); 
```

根据 ProductID 和/或 Prod_ID 是否可以为空，您可能需要稍作更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:51:56.730

尝试按如下方式更改您的查询：

```
var t2s = from temp3 in _ent.Products                       
          where
             temp3.Row_Num == 2
          select temp3.ProductID;

var _query = from P1 in _ent.brands
             join temp2 in t2s on P1.Prod_ID equals temp2 
             select ... 
```

# jakarta-ee - 桌面文件如何通过 RPC 调用与 Gwt Web 应用程序中的网络服务器同步？

> ID：15571050
> 
> 赞同：0
> 
> 时间：2013-03-22T13:04:24.927
> 
> 标签：jakarta-ee, gwt, uibinder

根据我的项目要求，每当我们将文件/文件夹添加到本地机器中的特定文件夹时，数据应该与网络服务器同步并自动显示在 Web UI 上，而无需按下刷新按钮......

为此，我使用 GWT UI-Binder、Java EE 和 MySQL DB。你能帮我解决这个问题吗.....

```
 Thanking U...........in Advance 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T06:28:57.703

我认为您将无法做到这一点，因为浏览器对文件系统的访问权限有限，并且 javascript 在浏览器沙箱中运行。可能您可以尝试使用小程序将文件上传到服务器以及将通知推送到客户端的一些方法。

# javascript - JSON对象的动态淘汰表

> ID：15571053
> 
> 赞同：1
> 
> 时间：2013-03-22T13:04:29.117
> 
> 标签：javascript, jquery, json, knockout.js, knockout-mapping-plugin

我试图用淘汰赛集成填充表格。这需要来自 Json 的数据。

JSON数据

```
{
   "info":[
      {
         "Name":"Noob Here",
         "Major":"Language",
         "Sex":"Male",
         "English":"15",
         "Japanese":"5",
         "Calculus":"0",
         "Geometry":"20"
      },
      {
         "Name":"Noob Here",
         "Major":"Calculus",
         "Sex":"Female",
         "English":"0.5",
         "Japanese":"40",
         "Calculus":"20",
         "Geometry":"05"
      }
   ]
} 
```

我使用敲除映射将数据动态映射到页面中。已在 JS-bin 中添加为 Javascript。我的脚本在示例的 html 页面中

```
$(document).ready(function () {
    $("#div1").append("<tr><td data-bind='text: name'></td><td data-bind='text: major'></td><td data-bind='text: sex'></td><td><input data-bind='value: English' /></td><td><input data-bind='value: Japanese' /></td><td><input data-bind='value: Calculus' /></td><td><input data-bind='value: Geometry' /></td></tr>");

    function loadData(fileName) {
        var data = {
            "info": [{
                "Name": "Noob Here",
                    "Major": "Language",
                    "Sex": "Male",
                    "English": "15",
                    "Japanese": "5",
                    "Calculus": "0",
                    "Geometry": "20"
            }, {
                "Name": "Noob Here",
                    "Major": "Calculus",
                    "Sex": "Female",
                    "English": "0.5",
                    "Japanese": "40",
                    "Calculus": "20",
                    "Geometry": "05"
            }]
        }

        return (data);
    }

    var dataFunction = function () {
        this.Items = ko.observableArray([]);
    };

    var myFile = "Data";
    var data = [];

    var data1 = {
        "info": [{
            "Name": "Noob Here",
                "Major": "Language",
                "Sex": "Male",
                "English": "15",
                "Japanese": "5",
                "Calculus": "0",
                "Geometry": "20"
        }, {
            "Name": "Noob Here",
                "Major": "Calculus",
                "Sex": "Female",
                "English": "0.5",
                "Japanese": "40",
                "Calculus": "20",
                "Geometry": "05"
        }]
    }
    if (data1 && data1.info) {
        console.log(data1.info[0]);
        $.each(data1.info[0], function (key, value) {

        });

        $.each(data1.info, function (index, element) {
            data.push({
                English: element.English,
                Japanese: element.Japanese,
                Calculus: element.Calculus,
                Geometry: element.Geometry,
                name: element.Name,
                major: element.Major,
                sex: element.Sex
            });
        });
        dataFunction.prototype = function () {
            var getAllItems = function () {
                var self = this;
                ko.mapping.fromJS(data, {}, self.Items);
            };
            var finalObj = {};
            var info = [];
            $.each(data1.info, function (i, v) {
                var object = {};
                $.each(v, function (i1, val1) {
                    if ($.isNumeric(val1)) {

                        object[i1] = val1
                    }
                });
                info.push(object);
            });
            finalObj['info'] = info;
            console.log(finalObj);
            return {
                getAllItems: getAllItems
            }
        }();
        var dataList = new dataFunction();
        dataList.getAllItems();

        ko.applyBindings(dataList);
    }
}); 
```

我想换

```
data.push({
                English: element.English,
                Japanese: element.Japanese,
                Calculus: element.Calculus,
                Geometry: element.Geometry,
                name: element.Name,
                major: element.Major,
                sex: element.Sex
            }); 
```

**进入动态脚本**，以便我添加的任何 json 数据都将以表格格式显示。即使它的列名或列号发生变化。

有谁知道该怎么做？

[http://jsbin.com/ipeseq/1/](http://jsbin.com/ipeseq/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:15:27.807

假设姓名、专业和性别的大小写变化不是实际要求，您可以直接推送对象。

```
data.push(element); 
```

因为你基本上是逐个创建元素的副本并推动它，为什么不只是推动元素本身呢？

# tabs - Netsuite 如何将主页上的子选项卡链接到页面/类别？

> ID：15571054
> 
> 赞同：0
> 
> 时间：2013-03-22T13:04:30.613
> 
> 标签：tabs, web, categories, netsuite

我正在使用 Netsuite 编辑以前设置的公司网站。对于如何将演示文稿子选项卡链接到适当的类别/页面，我将不胜感激。问题是这样的：在前任设计师删除一个类别之前，这些类别已经设置好并且运行良好。我已经重新创建了这个类别（命名与以前相同），但演示文稿子选项卡（主页上的侧边导航）没有链接到它。子选项卡当前显示该类别不再可用。我已确保该类别的设置与所有其他功能类别一样 - 这使我相信这与定义从子选项卡到新类别的路径有关，但我找不到任何地方可以更改它. 我看到链接主选项卡的位置，但看不到从它们脱落的子选项卡。欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:57:58.857

你检查过common.css吗？只是因为显示了css而显示在那里的图像吗？我发现我们的主页滑块存在问题，即使记录设置为非活动状态，除非在主页模板上注释掉，否则仍会调用它。如果您找不到在 CSS 或模板中列出的类别图像，请检查自定义设置中的自定义选项卡 - 它可能隐藏在那里。您的类别是图像/按钮还是链接文本 CSS 属性？

# list - 从顶点提取地图并通过 REST-API 返回地图数组

> ID：15571058
> 
> 赞同：0
> 
> 时间：2013-03-22T13:04:42.390
> 
> 标签：list, rest, map, neo4j, gremlin

我正在尝试将顶点的所有属性放在地图中并向该地图添加其他值。稍后，我想将此地图作为 JSON 响应返回。一般来说，我发现 neo4j 的[REST-API](http://docs.neo4j.org/chunked/stable/gremlin-plugin.html)有点冗长，我需要一个顶点的 ID 以及其他值。因此，我决定直接通过 gremlin 查询来执行此操作。

结果应如下所示：

```
[ {"id": 1, "name": "Name1"}, {"id": 2, "name": "Name2"} ] 
```

我设法使用以下 gremlin 脚本做到了这一点：

```
x = [];
g.v( 1 ).out.transform{
                     m = [:];
                     m.putAll( it.map() );
                     m.put( "id", it.id );
                     x.add( m )
                    }.iterate();
x 
```

但是，我在 neo4j 社区 1.8.2 和 1.9M05 中遇到了这个查询的问题。

a) neo4j 1.8.2 返回字符串的 JSONArray 而不是 JSONObjects 的 JSONArray：

```
[ "{id: 1, name: Name1}", "{id: 2, name: Name2}" ] 
```

b) neo4j 1.9M5 返回异常：

```
{
  "message":"Invalid list type: map",
  "exception":"IllegalStateException",
  "stacktrace":
      [
        "org.neo4j.server.rest.repr.RepresentationFormat.serializeList(RepresentationFormat.java:65)",
        "org.neo4j.server.rest.repr.ListRepresentation.serialize(ListRepresentation.java:50)",
        "org.neo4j.server.rest.repr.OutputFormat.assemble(OutputFormat.java:179)",
        "org.neo4j.server.rest.repr.OutputFormat.formatRepresentation(OutputFormat.java:131)",
        "org.neo4j.server.rest.repr.OutputFormat.response(OutputFormat.java:117)",
        "org.neo4j.server.rest.repr.OutputFormat.ok(OutputFormat.java:55)",
        "org.neo4j.server.rest.web.ExtensionService.invokeGraphDatabaseExtension(ExtensionService.java:122)",
        "java.lang.reflect.Method.invoke(Method.java:597)"
      ]
} 
```

如果我修改 gremlin 脚本并将 x 更改为地图，它可以在两个 neo4j 版本中使用：

```
x = [:];
g.v( 1 ).out.transform{
                     m = [:];
                     m.putAll( it.map() );
                     m.put( "id", it.id );
                     x.put(it.id, m );
                    }.iterate();
x 
```

返回

```
{ "1" : {"id": 1, "name": "Name1"}, "2" : {"id": 2, "name": "Name2"} } 
```

然而，结果现在是一个带有 JSONObjects 的 JSONObject。

有没有办法使用 gremlin 解决我的问题？我前两天刚开始学习gremlin。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:27:19.030

由于neo4j，这两种情况都不起作用。1.8.2 版在自定义地图方面的 JSONSerialization 很差。已提供 1.9 版的修复程序。

# javascript - IE8 html选择需要点击两次才能打开下拉菜单

> ID：15571059
> 
> 赞同：0
> 
> 时间：2013-03-22T13:04:43.540
> 
> 标签：javascript, jquery, html, internet-explorer

这是我的代码。

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<script src="http://code.jquery.com/jquery-1.7.1.js"></script>
<style type="text/css">
div {
    background-color: silver;
    border: 1px solid black;
    width:200px;
}
</style>
<script>
    $(function() {
        $("#click").dblclick(function(e) {
            var options = "<select id='combobox'>"
            for ( var i = 0; i < 50; i++) {
                options += '<option value="ActionScript">Value - ' + i + '</option>';
            }
            $(this).html(options + "</select>");
        });
    });
</script>
</head>
<body>
    <div id="click">double click me</div>
</body>
</html> 
```

双击 后，会在 中呈现`div`一个元素。问题是在 IE8中渲染后，需要点击两次才能打开下拉菜单。它应该只需单击一下即可打开。`select``div``select`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:28:35.243

目前我没有 IE8 请尝试`$('#click').unbind('dblclick');`在创建选择元素后添加，它将禁用#click dblclick 事件。

```
$(function() {
     $("#click").dblclick(function(e) {
          var options = "<select id='combobox'>"
          for ( var i = 0; i < 50; i++) {
               options += '<option value="ActionScript">Value - ' + i + '</option>';
          }

          $(this).html(options + "</select>");
          $('#click').unbind('dblclick');
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:52:59.633

最后我找到了这个解决方案。我使用 jQuery `appendTo`as in`$(options + "</select>").appendTo(this);`方法而不是`.html`as in `$(this).html(options + "</select>");`。

# node.js - Azure 上的 JSDom（本机 Node.js 模块）

> ID：15571061
> 
> 赞同：1
> 
> 时间：2013-03-22T13:04:47.317
> 
> 标签：node.js, azure, jsdom, contextify

我无法让依赖于 JSDo 的 nodejs 应用程序在 Azure 上工作，因为它依赖于本机模块 - [Contextify](https://github.com/brianmcd/contextify)，我了解 Azure 不提供本机模块的编译。

但是根据[Azure 文档](http://www.windowsazure.com/en-us/develop/nodejs/common-tasks/working-with-node-modules/)

> 由于 Windows Azure 云服务依赖于作为应用程序一部分部署的 node_modules 文件夹，因此作为已安装模块的一部分包含的任何本机模块都应该在云服务中工作，只要它是在 Windows 开发系统上安装和编译的。

它在我的开发盒上运行良好，因为它是在 npm 安装期间编译的，我不明白为什么它不能在 Azure 上运行，因为我提供了编译版本？如果它适用于我的 Windows 开发盒，则编译显然是成功的。我从本地 git 存储库部署到天蓝色，所以我想知道当我提交时编译的文件是否被遗漏了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T21:19:55.613

更新：最新的 Azure 版本（特别是移动服务后端）支持任意 NPM 模块 -[请参阅移动服务部分：NPM 模块支持](http://weblogs.asp.net/scottgu/archive/2013/06/14/windows-azure-major-updates-for-mobile-backend-development.aspx)

来自 npm 上的 JSDom 文档：

> 不幸的是，做这种魔术需要 C++。在 Node.js 中，使用 JavaScript 中的 C++ 意味着使用“本机模块”。本机模块在安装时编译，以便它们精确地为您的机器工作；也就是说，您无需从 npm 下载 contextify 二进制文件，而是在从 npm 下载源代码后在本地构建一个。

[https://npmjs.org/package/jsdom#contextify](https://npmjs.org/package/jsdom#contextify)

由于您的“本机模块”与 azure 的“本机模块”中的任何机器都没有相同的签名，因此它不会加载。

# php - Micropayment.de 测试

> ID：15571066
> 
> 赞同：1
> 
> 时间：2013-03-22T13:04:58.540
> 
> 标签：php, api, payment-gateway

我已经为**micropayment.de实现****了 call2pay**事件 API，但我不知道如何测试它。它是否提供像 Paypal (Sandbox) 这样的测试环境？

 **谢谢**

# c# - 如何从 ListBox (c#) 中的选定行获取文本？

> ID：15571067
> 
> 赞同：0
> 
> 时间：2013-03-22T13:04:59.360
> 
> 标签：c#

我想从列表框中的选定行获取数据。我使用命令：

```
string selected = ListBox1.SelectedItems[0].ToString(); 
```

但结果是：

```
ListVievItem: {here is correct value} 
```

我该怎么办：“ListVievItem：{}”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:07:16.397

```
string urItemText = ListBox1.SelectedItem.Text; 
```

[http://msdn.microsoft.com/fr-fr/library/system.windows.forms.listbox_properties(v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.listbox_properties(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:10:21.513

**编辑**正如 John Willemse 所建议的，`ListBox`不能，`ListViewItems`所以看起来这个问题与a 相关`ListView`而不是与 a相关`ListBox`，因此答案中的代码会相应地更改。

当你这样调用它时，`listView1.SelectedItems[0].ToString();`你实际上是在调用对象的`ToString()`方法，`ListViewItem`它给出了不需要的结果（首先打印类名，然后是值）。每个`ListViewItem`对象都有`Text`属性，您可以从中获取其文本。

```
string selected = listView1.SelectedItems[0].Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:06:31.280

尝试这样的事情：

```
string selected = ListBox1.SelectedItems[0].Text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:07:26.590

您是否尝试过：`ListBox1.SelectedItem.Value`

# error-handling - 如何使用 catch 将屏幕上的错误捕获到 TCL 中的变量中

> ID：15571071
> 
> 赞同：0
> 
> 时间：2013-03-22T13:05:10.403
> 
> 标签：error-handling, tcl, catch-block

通过捕获例如 grep 屏幕上的错误

```
 puts $c
   #error on terminal : can't read "c": no such variable

   catch {puts $c} err
   puts $err # value of err 1 
```

除了变量 err.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:13:15.687

是的。相应地读取`::errorInfo`或`::errorCode`全局变量以获取堆栈跟踪和机器可解析的“POSIX 错误”三元素列表。

从 Tcl 8.5 开始，还可以`catch`在变量名称之后传递字典名称以接收结果，并且该字典将由我上面描述的通过“经典”错误变量获得的大部分内容填充，并且更多的。

[这在`catch`手册页](http://www.tcl.tk/man/tcl8.6/TclCmd/catch.htm)中都有解释。

# jquery - 当我们单击该元素时，如何在类中存储 ajax 响应并再次获取数据

> ID：15571080
> 
> 赞同：0
> 
> 时间：2013-03-22T13:05:36.423
> 
> 标签：jquery, html

我`data`通过 ajax 得到了一些东西

我在课堂上存储数据`class="' + data + '"`

```
 $.each(response.d, function (i, data) {
                    var id = data.Soid;
                    var title = data.Name;
                    debugger;
                    $("#ulAchievementCarousel").append('<li id="' + id + '" title="' + title + '"><img src="../Images/DefaultImage.png" class="' + data + '" /><img src="../Images/trashIcon.png" class="trash" /></li>');
                }); 
```

现在我想在单击图像时获取这些数据：-

```
$("#ulAchievementCarousel img[src='../Images/DefaultImage.png']").live("click", function () {
        var str = $(this).attr('class'); 
```

和 agian 从该类中获取价值并希望显示类似这样的内容

```
var id = str.Soid;
var title = str.Name; 
```

但问题是当我从类中获取 str 时，值是 `:[object Object]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:21:35.370

您可以使用[.data()](http://api.jquery.com/data/)作为在 DOM 元素中存储任意数据的地方：

```
var data = { foo: "bar" };
$("#myElement").data("stuff",data); 
```

您可以稍后像这样检索它：

```
var data = $("#myElement").data("stuff");
console.log(data.foo);      // writes "bar" in the console. 
```

这是一个非常简单的[小提琴](http://jsfiddle.net/ULfcR/)来演示。

# c# - 像在 NUnit 中一样在 MBUnit 中测试数据源

> ID：15571083
> 
> 赞同：0
> 
> 时间：2013-03-22T13:05:47.480
> 
> 标签：c#, nunit, mbunit

如何使用 NUnit 中的测试数据源属性注释我的 MBUnit 测试：

NUnit中的伪代码：

```
[TestCaseSource("GetData")]
public void Test(int value)
{

}

private static IEnumerable<int> GetData()
{
   yield return 1;
   yield return 2;
   yield return 3;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:01:43.893

MbUnit 支持使用属性的各种测试数据源。请参阅[MBUnit 文档 wiki](http://www.gallio.org/wiki/doku.php?id=mbunit%3aattributes)。

您的 NUnit 示例可以使用以下语法在 MBUnit 中重新实现：

```
[TestFixture]
public class SampleFixture
{
  public IEnumerable<int> GetData()
  {
    yield return 1;
    yield return 2;
    yield return 3;
  }

  [Test, Factory("GetData")]
  public void Test(int value)
  {
  }
} 
```

# javascript - 控件组的图例垂直居中但仅在静态创建时

> ID：15571087
> 
> 赞同：1
> 
> 时间：2013-03-22T13:05:58.763
> 
> 标签：javascript, jquery

如果我静态创建一个控制组，它的图例是完全垂直排列的。但是当另一个控制组被动态创建时，它的图例在顶部对齐。

请看小提琴：http: [//jsfiddle.net/H5mmu/8/](http://jsfiddle.net/H5mMu/8/)

```
<div id="term_grp" data-role="fieldcontain"><a>Semester:</a>
        <fieldset id="term_fields" data-role="controlgroup" data-type="horizontal">
            <input type="radio" name="term" id="ss"/><label for="ss">Sommersemester</label>
            <input type="radio" name="term" id="ws" checked="checked"/>    <label for="ws">Wintersemester</label>
        </fieldset>
    </div>
<div id="datum_grp" data-role="fieldcontain" data-type="horizontal"><a class="grpLegend">Datum:</a>
<fieldset id="datum_1_fields" data-role="controlgroup" data-type="horizontal" class="forceinline"></fieldset>
<fieldset id="datum_2_fields" data-role="controlgroup" data-type="horizontal" class="forceinline"></fieldset>
</div>
 <div id="zeit_grp" data-role="fieldcontain"><a class="grpLegend">Stunden:</a>
 <fieldset id="zeit_1_fields" data-role="controlgroup" data-type="horizontal" class="forceinline"></fieldset>
<fieldset id="zeit_2_fields" data-role="controlgroup" data-type="horizontal" class="forceinline"></fieldset> 
```

知道为什么会这样吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:04:33.783

```
$('#datum_1_fields .ui-controlgroup-controls').find('div').first().remove();
$('#datum_2_fields .ui-controlgroup-controls').find('div').first().remove();
$('#zeit_1_fields .ui-controlgroup-controls').find('div').first().remove();
$('#zeit_2_fields .ui-controlgroup-controls').find('div').first().remove(); 
```

# php - 从 Youtube 频道抓取视频信息，使用 PHP 将其存储在 MYSQL 中

> ID：15571090
> 
> 赞同：0
> 
> 时间：2013-03-22T13:06:15.107
> 
> 标签：php, mysql, youtube

我需要一种方法来从特定频道获取标题、描述、URL 等信息，然后将其存储在数据库中。

最棘手的部分似乎是格式化我从 youtube api 返回的信息。我很难把它拆开并得到我需要的东西。

```
$url = 'http://gdata.youtube.com/feeds/api/users/'.$username.'/uploads';
$xml = simplexml_load_file($url); 
```

以上是我正在做的。

vimeo 的做事方式似乎要容易得多。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:52:28.537

我知道您使用的是 xml，但我发现 JSON 更易于使用：

```
<?php
  $url = 'http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?v=2&alt=json';
  $content = file_get_contents($url);
  $json = json_decode($content, true);

  print_r($json);
?> 
```

然后你可以使用任何东西来显示它，但我昨晚在推特上使用 Handbars.js，这很容易。我希望我有代码，所以我可以给你一个例子，对此感到抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:00:29.653

这对我有用：

```
$username="riotgamesinc";
$url = 'http://gdata.youtube.com/feeds/api/users/'.$username.'/uploads';
$xml = simplexml_load_file($url);
foreach ($xml->entry as $video) {
    echo $video->title;
    echo "<br />";
    echo $video->content;
    echo "<br />";
    $attributes = $video->link[0]->attributes();
    echo $attributes['href'];
    echo "<br /><br />";
} 
```

# java - linux中的TimeZone.getDefault()因用户而异

> ID：15571091
> 
> 赞同：5
> 
> 时间：2013-03-22T13:06:17.263
> 
> 标签：java, linux, timezone

我有一个配置了两个用户的 linux 机器。我也有这段Java代码：

```
long time = System.currentTimeMillis();
String millis = Long.toString(time);
Date date = new Date(time);
System.out.println("Current time in milliseconds = " + millis + " => " + date.toString());
TimeZone tz = TimeZone.getDefault();
System.out.println("Current time zone: " + TimeZone.getDefault().getID()); 
```

如果我`date`在 bash 上运行，两个用户的结果相同：

用户 1：

```
$ date
Fri Mar 22 10:02:58 PYST 2013 
```

用户 2：

```
$ date
Fri Mar 22 10:03:22 PYST 2013 
```

但是，如果我运行相同的 java 代码，我有：

用户 1：

```
$ java TimeTest
Current time in milliseconds = 1363957432669 => Fri Mar 22 10:03:52 PYST 2013
Current time zone: America/Asuncion 
```

用户 2：

```
$ java TimeTest
Current time in milliseconds = 1363957456954 => Fri Mar 22 13:04:16 GMT 2013
Current time zone: GMT 
```

所以我想这与为每个用户配置 java 的方式有关。

我检查了`TZ`定义的环境变量，但没有为**任何** `TZ`用户定义。

关于为什么我`TimeZone.getDefault()`在同一个 Linux 机器上为不同用户获得不同值的任何想法？

虚拟机：

```
$ java -version
java version "1.6.0_24"
Java(TM) SE Runtime Environment (build 1.6.0_24-b07)
Java HotSpot(TM) 64-Bit Server VM (build 19.1-b02, mixed mode) 
```

发行版：

```
$ cat /etc/issue
Red Hat Enterprise Linux Server release 5.8 (Tikanga) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:14:15.017

这可能与用户的区域设置有关。

检查这些变量： http: [//linux.die.net/man/1/locale](http://linux.die.net/man/1/locale)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T18:44:34.680

两台机器的类似问题/解决方案：

*   两台linux机器设置为`UTC`
*   一个 JVM 报告不正确的时区（例如`CET`）
*   其他正确报告`UTC`

问题可能是：

*   故障机器有这个符号链接：`/etc/localtime -> /usr/share/zoneinfo/Europe/Paris`
*   `/usr/share/zoneinfo/Europe/Paris`包含`UTC`信息

造成这种情况的原因可能是简单地`cp /usr/share/zoneinfo/UTC /etc/localtime`替换内容`/usr/share/zoneinfo/Europe/Paris`而不是覆盖`/etc/localtime`符号链接而不是文件！

# c - 如何将展平的二维数组从全局内存复制到 CUDA 中的共享内存

> ID：15571092
> 
> 赞同：0
> 
> 时间：2013-03-22T13:06:22.377
> 
> 标签：c, cuda, parallel-processing, nvidia

我有一个内核接收一个扁平的二维数组，我想每次共享内存时复制一行数组，我的内核如下所示：

```
__global__ void searchKMP(char *test,size_t pitch_test,int ittNbr){
    int  tid = blockDim.x * blockIdx.x + threadIdx.x;
    int strideId = tid * 50;

    int m = 50;

    __shared__ char s_test[m];

    int j;
               //this loops over the number of lines in my 2D array           
                   for(int k=0; k<ittNbr; k++){

                   //this loops to store my flattened (basically threats 1 line at a time) array into shared memory     
                   if(threadIdx.x==0){
                     for(int n =0; n<50; ++n){
                    s_test[n] = *(((char*)test + k * pitch_test) + n);

                }
             }
            __syncthreads();

             j=0;

            //this is loop to process my shared memory array against another 1D array
             for(int i=strideID; i<(strideID+50); i++{
             ...dosomething...
             (increment x if a condition is met) 
             ...dosomething...
             }
             __syncthreads();
             if(x!=0)
                cache[0]+=x;

            ...dosomething...

} 
```

尽管当我验证 x 的值时，x 的值始终在变化，或者随着线程数的变化而变化。例如，当 20 个 250 个线程块根据执行返回值 7 或 6 时，10 个 500 个线程块返回 9。我想知道问题是来自复制到共享内存中的二维扁平数组，还是在这段代码中做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:08:09.280

看起来您在共享内存中的数组有 20 个元素：

```
 int m = 20;
   __shared__ char s_test[m]; 
```

但是在您的内部循环中，您尝试编写 50 个元素：

```
 for(int n =0; n<50; ++n){
      s_test[n] = *(((char*)test + k * pitch_test) + n); 
```

我不知道这是否是您正在寻找的具体问题，但看起来它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:47:42.550

共享内存在同一块中的所有线程之间共享

目前还不是很清楚，为什么需要共享内存以及您在做什么：

在您的代码中，块中的所有线程多次将相同的值写入您的共享内存，但它是冗余的

使用共享内存的常用方法是这样的：

```
if(threadIdx.x < m)
  s_test[threadIdx.x] = *(global_mem_pointer + threadIdx.x);

__syncthreads(); 
```

块中的所有线程“同时”写入自己的值，并且在`__syncthreads();`您的内存充满您需要的内容并且对块中的所有线程可见之后

# jquery - 在 jqplot 图表中仅显示 %

> ID：15571102
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:06:46.920
> 
> 标签：jquery, jqplot

我正在将 jqplot jquery 图表插件集成到我的 rails 应用程序中。在 jqplot 的例子中提到了

```
var data = [
    ['Heavy Industry', 12],['Retail', 9], ['Light Industry', 14], 

  ]; 
```

但是当图表呈现时，它显示为百分比。我需要知道这些值是如何转换为百分比的，以便我也可以在我的 rails 应用程序中应用该计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:42:03.107

默认情况下，标签显示切片的百分比。相应的选项是`showDataLabels`（设置为 true 或 false 以显示/隐藏切片的百分比）。

有关饼图和圆环图的更多文档，请参见[此处。](http://www.jqplot.com/tests/pie-donut-charts.php)

# ribbon - Dynamics CRM - 单击功能区按钮打开实体表单

> ID：15571103
> 
> 赞同：0
> 
> 时间：2013-03-22T13:06:47.400
> 
> 标签：ribbon, microsoft-dynamics

我计划将功能区按钮添加到特定实体的现有组中。我创建了一个自定义实体，它是我为其创建功能区按钮的实体的子实体。在父实体的屏幕上单击此功能区按钮时，如何打开新的自定义实体表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:15:55.653

我认为解决上述问题的方法是： [https ://community.dynamics.com/crm/b/crminogic/archive/2013/01/31/supported-ways-of-accessing-url-addressable-forms-reports -scripts.aspx#.UU6ZydazRVo](https://community.dynamics.com/crm/b/crminogic/archive/2013/01/31/supported-ways-of-accessing-url-addressable-forms-reports-scripts.aspx#.UU6ZydazRVo)

# c# - 如何使用数字和运算符列表进行基本数学计算

> ID：15571104
> 
> 赞同：0
> 
> 时间：2013-03-22T13:07:06.963
> 
> 标签：c#, list

我有一个包含 5 个数字的十进制类型列表：`{10, 9, 100,73,3457}`. 我在这些数字之间有另一个字符串类型的 4 个运算符的列表：`*`乘法`-`减法`/`除法`+`加法。

我怎样才能得到字符串的结果？我不知道如何强加运算符优先级。

```
10 * 9 - 100 / 73 + 3457 = ??? 
```

这是我的代码，我以完全错误的方式解决问题，应该怎么做？

```
static List<decimal> numbers = new List<decimal>();
static List<string> operators = new List<string>();

foreach (decimal number in numbers)
{
    foreach (string operatorz in operators)
    {
        resultnumber = 
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:16:45.150

希望我有你想要的，这将使所有数字交叉连接到他们自己，然后进入运营商。您已经列出了二元运算符，所以我想每个运算符都需要两个操作数。结果行数为 =`numbers.Length * numbers.Length * operators.Length`

```
void Main()
{
   var numbers = new[] { 10, 9, 100, 73, 3457 };
   var operators = new [] { "*", "+", "/", "-" };

    var r = from n1 in numbers
            from n2 in numbers
            from op in operators
            select string.Format("{0} {1} {2} = {3}",
                                  n1, op, n2,   Perform(n1, op, n2));

}

public int Perform(int val1, string @operator, int val2)
{
    //main core if your question, consider to extract operators to outer level
    var operators = new Dictionary<string, Func<int, int, int>>
    {
        {"+", (v1, v2) => v1 + v2},
        {"/", (v1, v2) => v1 / v2},
        {"*", (v1, v2) => v1 * v2},
        {"-", (v1, v2) => v1 - v2},
    };

    return operators[@operator](val1, val2);
} 
```

结果是

```
10 * 10 = 100 
10 + 10 = 20 
10 / 10 = 1 
10 - 10 = 0 
10 * 9 = 90 
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:25:57.720

不完全清楚你想要什么。但是假设这些运算符位于数字之间，并解析为本地运算符优先级：简单的方法是编写脚本。您的运算符优先级将是本地的。

[脚本](http://www.csscript.net/)

```
private static void Main(string[] args)
{
    var numbers = new[]{ 10, 9, 100, 73, 3457 };
    var ops = new[] { "*","-","/","+" };

    if (numbers.Length != ops.Length + 1)
        throw new Exception("TODO");

    string statement = numbers[0].ToString();

    for (int i = 0; i < ops.Length; i++)
    {
        statement += string.Format(" {0} {1}", ops[i], numbers[i + 1]);
    }

    Console.WriteLine("Statement: " + statement);

    var method = String.Format(@"int Product() {{ return {0}; }} ", statement);

    Console.WriteLine("Method: " + method);

    var Product = CSScript.Evaluator.CreateDelegate(method);
    int result = (int)Product();

    Console.WriteLine(result);
} 
```

结果：

```
Statement: 10 * 9 - 100 / 73 + 3457
Method: int Product() { return 10 * 9 - 100 / 73 + 3457; }
3546
Press any key to continue . . . 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T13:17:30.887

[http://msdn.microsoft.com/fr-fr/library/s53ehcz3(v=VS.80).aspx](http://msdn.microsoft.com/fr-fr/library/s53ehcz3(v=VS.80).aspx)

您可以使用自己的类来处理计算

# plugins - CRM 2011 插件 - 检查 OptionSet 是否不为空

> ID：15571108
> 
> 赞同：2
> 
> 时间：2013-03-22T13:07:21.290
> 
> 标签：plugins, null, dynamics-crm-2011

我正在编写一个插件，我在其中检查字段的特定值，选项集是否等于特定值，如果是，那么我会执行某些操作。

现在，在插件 C# 代码中，我如何检查选项集字段是否不为空 - 即，是否设置为默认值？

我所做的（显然，这是错误的）因为它从未超过 Null 检查语句。而且，如果我没有支票，那么我会收到此错误消息

**错误**：

```
Unexpected exception from plug-in (Execute): CRM.AppStateHandler.Plugins.PostApplicationCreate: System.NullReferenceException: Object reference not set to an instance of an object. 
```

**代码**：

```
application applicationEntity = entity.ToEntity<new_application>();
if (new_applicationEntity.new_Applicationstatus != null)
{
    var applicationStatus = applicationEntity.new_Applicationstatus.Value;
    if (applicationStatus == CRMConstants.EntityApplication.Attributes.ApplicationStatusOptions.Applying)
    {
        //my logic
    }
} 
```

文件 constants.cs 有以下内容

```
class CRMConstants
{
    public struct EntityApplication
    {
        public struct Attributes
        {
            public struct ApplicationStatusOptions
            {
                // More before this
                public const int Applying = 100000006;
                // More to come
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:28:27.707

我认为 SergeyS 可以解决您的问题，但我会添加一些其他（希望如此）有用的评论。

不要为您的选项集值自定义创建结构。使用[CrmSrvcUtil](http://www.develop1.net/public/post/Generate-Early-Bound-OptionSet-enums.aspx)自动为您创建枚举。

我对必须检查 OptionSetValues 是否为空感到恼火，所以我使用这些扩展方法让我的生活更轻松：

```
/// <summary>
/// Returns the value of the OptionSetValue, or int.MinValue if it is null
/// </summary>
/// <param name="osv"></param>
/// <param name="value"></param>
/// <returns></returns>
public static int GetValueOrDefault(this OptionSetValue osv)
{
    return GetValueOrDefault(osv, int.MinValue);
}

/// <summary>
/// Returns the value of the OptionSetValue, or int.MinValue if it is null
/// </summary>
/// <param name="osv"></param>
/// <param name="value"></param>
/// <returns></returns>
public static int GetValueOrDefault(this OptionSetValue osv, int defaultValue)
{
    if (osv == null)
    {
        return defaultValue;
    }
    else
    {
        return osv.Value;
    }
}

/// <summary>
/// Allows for Null safe Equals Comparison for more concise code.  ie.
/// if(contact.GenderCode.NullSafeEquals(1))
/// vs.
/// if(contact.GenderCode != null && contact.gendercode.Value == 1)
/// </summary>
/// <param name="osv"></param>
/// <param name="value"></param>
/// <returns></returns>
public static bool NullSafeEquals(this OptionSetValue osv, int value)
{
    if (osv == null)
    {
        return false;
    }
    else
    {
        return osv.Value == value;
    }
}

/// <summary>
/// Allows for Null safe Equals Comparison for more concise code.  ie.
/// if(contact.GenderCode.NullSafeEquals(new OptionSet(1)))
/// vs.
/// if(contact.GenderCode != null && contact.gendercode.Value == new OptionSet(1))
/// </summary>
/// <param name="osv"></param>
/// <param name="value"></param>
/// <returns></returns>
public static bool NullSafeEquals(this OptionSetValue osv, OptionSetValue value)
{
    if (osv == null)
    {
        return osv == value;
    }
    else
    {
        return osv.Equals(value);
    }
} 
```

有两种方法，每个方法都有重载：

*   GetValueOrDefault - 这等效于 Nullable.GetValueOrDefault()。一个区别是，我默认的不是默认为 0，而是`int.MinValue`确保我不会意外匹配 0 选项集值。如果您愿意，Overload 允许您指定默认值。

*   NullSafeEquals - 这是您在代码中使用的不必检查 null

```
application applicationEntity = entity.ToEntity<new_application>();
if (applicationEntity.new_Applicationstatus.NullSafeEquals(CRMConstants.EntityApplication.Attributes.ApplicationStatusOptions.Applying))
{
    //my logic
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:17:29.187

您正在检查：

```
if (new_applicationEntity.new_Applicationstatus != null) 
```

但你需要检查：

```
if (applicationEntity.new_Applicationstatus != null) 
```

# google-cloud-messaging - 如何强制 GCMRegistrar 注销？

> ID：15571110
> 
> 赞同：2
> 
> 时间：2013-03-22T13:07:24.207
> 
> 标签：google-cloud-messaging

我无法取消注册 GCMRegistrar。我试图在我的代码中运行：

```
GCMRegistrar.unregister(getApplicationContext()); 
```

并且

```
GCMRegistrar.setRegisteredOnServer(getApplicationContext(), false); 
```

并且

```
Intent unregIntent = new Intent("com.google.android.c2dm.intent.UNREGISTER");
unregIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
startService(unregIntent); 
```

即使我清除了我的应用程序的数据/缓存并且这个应用程序被杀死但没有卸载，我也会收到通知。（我也检查了 DDMS）。

不幸的是，由于版权公司，我无法粘贴我的代码。有人有同样的问题吗？

# javascript - 使用传单从 url 加载兴趣点

> ID：15571115
> 
> 赞同：1
> 
> 时间：2013-03-22T13:07:31.893
> 
> 标签：javascript, leaflet

我以前从未使用过传单。我正在尝试在 OpenStreetMap 图层上使用自定义图标绘制一些点。我想从文件 url 加载这些点，但我不知道如何。文件格式并不重要：它是由我的程序生成的，我可以更改输出类型。

我确信答案很简单，但我发现的唯一示例使用的是在主 javascript 块中硬编码的信息。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:09:21.140

这是我的解决方案：

```
L.geoJson(data, {
    onEachFeature: function (feature, layer) {
        layer.bindPopup(feature.properties.title);
    },
    pointToLayer: function(feature, latlng) {
        var myicon = L.icon({
            iconUrl: feature.properties.icon,
            iconSize: [24, 24],
            iconAnchor: [0, 24],
            popupAnchor: [12, -32],
        })
        return L.marker(latlng, {icon:myicon});
    }
}).addTo(map); 
```

`data`定义如下：

```
<script src="geojson.js" type="text/javascript"></script> 
```

`geojson.js`是一个普通的geojson文件，但它以`data =`

来源：[https ://groups.google.com/d/msg/leaflet-js/lWTj9jiB1yw/EKczooIpxjgJ](https://groups.google.com/d/msg/leaflet-js/lWTj9jiB1yw/EKczooIpxjgJ)

# c# - 如何避免从下拉列表中选择？

> ID：15571116
> 
> 赞同：0
> 
> 时间：2013-03-22T13:07:37.670
> 
> 标签：c#, asp.net

我不知道如何避免在运行时填充下拉列表时列出的选择文本。

```
 DataRow row = ds.Tables[0].NewRow();
    row["cabTypeId"] = "0";
    row["cabType"] = "Select";
    ds.Tables[0].Rows.InsertAt(row, 0);
    ddlCabSize.DataTextField = ds.Tables[0].Columns["cabType"].ToString();
    ddlCabSize.DataValueField = ds.Tables[0].Columns["cabTypeId"].ToString();
    ddlCabSize.DataSource = ds.Tables[0];
    ddlCabSize.DataBind(); 
```

如果我将选择下拉列表意味着“选择”不应该显示到下拉列表中。帮我看看怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:21:25.033

使用下面的代码。

```
ddlCabSize.DataSource = ds.Tables[0];
ddlCabSize.DataTextField = ds.Tables[0].Columns["cabType"].ToString();
ddlCabSize.DataValueField = ds.Tables[0].Columns["cabTypeId"].ToString();
ddlCabSize.DataBind();
ddlCabSize.Items.Insert(0, new ListItem("Select Below","0")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:22:31.893

不知道你在问什么。

尝试交换你的价值观。

```
ddlCabSize.DataTextField = ds.Tables[0].Columns["cabTypeId"].ToString();
ddlCabSize.DataValueField = ds.Tables[0].Columns["cabType"].ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:13:12.787

对于插入的需要，您可以使用添加此代码`Add Method`

```
ddlCabSize.DataBind();
ddlCabSize.Items.Add(new ListItem("Select ..")); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/e7s6873c.aspx](http://msdn.microsoft.com/fr-fr/library/e7s6873c.aspx)

注意：您也可以使用插入方法

您必须将列添加到表中

```
DataColumn dc = new DataColumn ("Name", Type);
dt.Columns.Add(dc); 
```

所以 ：

```
DataColumn dc = new DataColumn ("cabType", typeof(string)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:32:03.930

如果我正确地回答了您的问题，您希望在更改选择后从下拉列表中删除带有文本“选择”或值 =“0”的项目

您可以使用 jquery 轻松完成此操作，因为您需要知道下拉列表的 clientId，这很容易使用[ddlCabSize.ClientID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)属性获得

像这样将 jquery 引用添加到您的页面

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

并复制脚本代码

```
<script type="text/javascript">
 $(document).ready(function () {
     $("#<#= ddlCabSize.ClientID #>").change(function () {
         $("#<#= ddlCabSize.ClientID #> option[value='0']").remove();
     });
 });
</script> 
```

有关更多信息，请参阅[小提琴](http://jsfiddle.net/kJZRa/4/)

# php - PHP MySQL重新填充多选列表

> ID：15571124
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:07:53.827
> 
> 标签：php, mysql, multi-select

我有一个按以下方式定义的多选：

```
<select id="slctAdditional" name="slctAdditional[]" size="1"     class="drop_down" style="WIDTH: 300px; MARGIN: 5px 0 0 0; POSITION: relative;" VALUE="">
      <option value="50ffbee0768642.23917400_127.0.0.1">blah blah</option>
      <option value="50ffbee0768642.23917410_127.0.0.1">blah blah</option>
      <option value="50ffbee0768642.23917420_127.0.0.1">blah blah</option>
      <option value="50ffbee0768642.23917430_127.0.0.1">blah blah</option>
      <option value="50ffbee0768642.23917440_127.0.0.1">blah blah</option>

   </select> 
```

我设法使用 PHP 将所选项目存储到 MySQL 数据库中。

```
50ffbee0768642.23917410_127.0.0.1
50ffbee0768642.23917420_127.0.0.1 
```

现在，当我想将列表显示回来进行编辑时，我不知道如何重新选择这两项。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:12:37.720

1.  以数组的形式获取存储在数据库中的所有项目。
2.  在 HTML 中检查该数组中是否存在该值。

    ```
     <?php
         $selected_vals  = 1D array from DB
     ?>

    <select id="slctAdditional" name="slctAdditional[]" size="1"     class="drop_down" style="WIDTH: 300px; MARGIN: 5px 0 0 0; POSITION: relative;" VALUE="">
      <option <?php if(in_array('50ffbee0768642.23917400_127.0.0.1',$selected_vals)){?> selected="selected" <?php }?> value="50ffbee0768642.23917400_127.0.0.1">blah blah</option>
      <option value="50ffbee0768642.23917410_127.0.0.1">blah blah</option>
      <option value="50ffbee0768642.23917420_127.0.0.1">blah blah</option>
      <option value="50ffbee0768642.23917430_127.0.0.1">blah blah</option>
      <option value="50ffbee0768642.23917440_127.0.0.1">blah blah</option> 
    ```

为所有选项添加这个`<?php if(in_array('50ffbee0768642.23917400_127.0.0.1',$selected_vals)){?> selected="selected" <?php }?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:12:42.720

要将选择框中的选项设置为默认选择，请向其添加“selected”属性。

```
<option value="XXXX" selected>Something</option> 
```

因此，当您创建选项列表时，请查看该值是否等于数据库中的值。

```
<option value="50ffbee0768642.23917410_127.0.0.1" <?=($DB_VALUE=='50ffbee0768642.23917410_127.0.0.1' ?'selected' : '')?>>blah blah</option>
<option value="50ffbee0768642.23917420_127.0.0.1" <?=($DB_VALUE=='50ffbee0768642.23917420_127.0.0.1' ?'selected' : '')?>>blah blah</option> 
```

# c# - 使用 XPathNavigator 循环遍历节点

> ID：15571132
> 
> 赞同：0
> 
> 时间：2013-03-22T13:08:06.487
> 
> 标签：c#, xml, xpath

您好，下面是我正在使用的 xml 示例。我经历了各种我能想到的能够从 personData 节点开始并迭代结果的选项，除非我从根目录向下手动导航每个子节点，否则我似乎没有尝试过任何尝试。谁能建议我如何在不从根开始的情况下做到这一点

我的代码目前是

```
using (var r = File.OpenText(@"C:\S\sp.xml"))
        {
            XPathDocument document = new XPathDocument(XmlReader.Create(r));
            XPathNavigator xPathNav = document.CreateNavigator();

            XmlNamespaceManager nsmgr = new XmlNamespaceManager(xPathNav.NameTable);
            nsmgr.AddNamespace("g2", "http://person.transferobject.com/xsd");

            XPathNodeIterator xni = xPathNav.Select("/g2:companys/g2:company/g2:person/g2:personData", nsmgr);

            foreach (XPathNavigator nav in xni)
                Console.WriteLine(nav.Name);
        } 
```

xml

```
<?xml version="1.0" encoding="UTF-8"?>
<Header xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<dataSource xmlns="http://person.transferobject.com/xsd">IG2</dataSource>
<dateTime xmlns="http://person.transferobject.com/xsd">Thu Mar 21 15:56:42 GMT 2013</dateTime>
<formatVersion xmlns="http://person.transferobject.com/xsd">2.0</formatVersion>
<companys xmlns="http://person.transferobject.com/xsd">
<company>
    <errorMessages xsi:nil="true"/>
    <person>
        <personData>
            <address>
                <address1 xmlns="http://transferobject.com/xsd">37 Smith St</address1>
                <county xmlns="http://transferobject.com/xsd">COUNTY-37</county>
                <postcode xmlns="http://transferobject.com/xsd">Po12 123</postcode>
            </address>
            <basicDetails>
                <currentFirstName xmlns="http://transferobject.com/xsd">Fred</currentFirstName>
                <currentLastName xmlns="http://transferobject.com/xsd">Bloggs</currentLastName >
                <currentStage xmlns="http://transferobject.com/xsd">H1</currentStage>
                <currentGroup xmlns="http://transferobject.com/xsd">3</currentGroup>
                <dob xmlns="http://transferobject.com/xsd">2000-04-25</dob>
                <email xmlns="http://transferobject.com/xsd">AN@AN.AOM</email>
                <entryDate xmlns="http://transferobject.com/xsd">2003-09-03</entryDate>
            </basicDetails>
        </personData>
        <personData>
            <address>
                <address1 xmlns="http://transferobject.com/xsd">37 Smith St</address1>
                <county xmlns="http://transferobject.com/xsd">COUNTY-37</county>
                <postcode xmlns="http://transferobject.com/xsd">Po12 123</postcode>
            </address>
            <basicDetails>
                <currentFirstName xmlns="http://transferobject.com/xsd">John</currentFirstName>
                <currentLastName xmlns="http://transferobject.com/xsd">Bloggs</currentLastName >
                <currentStage xmlns="http://transferobject.com/xsd">H1</currentStage>
                <currentGroup xmlns="http://transferobject.com/xsd">3</currentGroup>
                <dob xmlns="http://transferobject.com/xsd">1999-04-25</dob>
                <email xmlns="http://transferobject.com/xsd">AN@AN.AOM</email>
                <entryDate xmlns="http://transferobject.com/xsd">2003-09-03</entryDate>
            </basicDetails>
        </personData>
    </person>
</company>
</companys>
</header> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:33:19.977

我知道您正在使用 XPath，但是由于您对 XPath 有一个答案，我将使用 Linq 给出一个答案

```
using System;
using System.Linq;
using System.Xml.Linq;

namespace xmlTest
{
    class Program
    {
        static void Main()
        {
            XDocument doc = XDocument.Load("C:\\Users\\me\\Desktop\\so.xml");
            var personDataDetails = (from p in doc.Descendants().Elements()                                     
                                     where p.Name.LocalName == "personData"
                                         select p);

            foreach (var item in personDataDetails)
            {
                Console.WriteLine(item.ToString());
            }

            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:11:32.440

`personData`您是否只是在问如何在不列出完整路径的情况下遍历节点？如果这就是你想要做的，你可以这样做：

```
XPathNodeIterator xni = xPathNav.Select("//g2:personData", nsmgr); 
```

# c++ - 相对于结束迭代器的取消引用

> ID：15571135
> 
> 赞同：1
> 
> 时间：2013-03-22T13:08:13.303
> 
> 标签：c++, std

这是取消引用范围中最后一项的正确方法吗？

```
std::string getName(Foos::const_iterator& begin, Foos::const_iterator& end)
{
    return boost::apply_visitor(Detail::NameGetterForFoo(),*--end);
} 
```

假设我总是在向量中有一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:52:26.073

如果您始终确定容器中有某些东西，请使用 std::prev on end 来获取它之前的迭代器，然后递减它。以下是我将如何编写您的代码块：

```
std::string getName(Foos::const_iterator begin, Foos::const_iterator end)
{
    // Assert: begin != end.
    return boost::apply_visitor(Detail::NameGetterForFoo(),*std::prev(end));
} 
```

编辑：容器也支持 .back() 成员函数。如果您传入容器而不是迭代器范围，则可以使用它。这可能会有所帮助，因为在这段代码中，您真正想要的只是容器的最后一个元素。例如

```
std::string getName(Foos const& foos)
{
    // Assume Foos is a standard container with front() and back() and that
    // it is non-empty.
    return boost::apply_visitor(Detail::NameGetterForFoo(), foos.back());
} 
```

# yaml - yaml.scanner.ScannerError：扫描指令时

> ID：15571137
> 
> 赞同：3
> 
> 时间：2013-03-22T13:08:14.457
> 
> 标签：yaml, pyyaml

我使用 PyYAML 读取文件，python 代码为：

```
with open('demo.yml') as f:
    dataMap = yaml.load(f) 
```

演示.yml：

```
%YAML:1.0
my_svm: !!opencv-ml-svm
  svm_type: C_SVC
  kernel: { type:LINEAR }
  C: 1. 
```

那么错误是：

```
yaml.scanner.ScannerError: while scanning a directive
  in "demo.yml", line 1, column 1
expected alphabetic or numeric character, but found ':'
  in "demo.yml", line 1, column 6 
```

谁来帮帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:19:33.893

该指令应该是`%YAML 1.0`（没有冒号）。您还需要一个“文档开始”（`---`）来将您的指令与文档分开。例如：

```
%YAML 1.0
---
my_svm: !!opencv-ml-svm
  svm_type: C_SVC
  kernel: { type: LINEAR }
  C: 1. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-28T17:26:02.570

您可以从 opencv 修改由 opencv 3.0 file1 创建的 yaml 文件：

```
1 %YAML:1.0
2 my_svm: !!opencv-ml-svm
3   svm_type: C_SVC
4   kernel: { type:LINEAR }
5   C: 1.
6 ... 
```

文件2：

```
1 my_svm: opencv-ml-svm
2   svm_type: C_SVC
3   kernel: { type: LINEAR }
4   C: 1.
5 ... 
```

文件 1-> 文件 2：

1.  删除第 1 行
2.  删除“！！opencv-ml-svm”
3.  在第 4 行的“type:”之后添加空格

然后你可以`yaml.load(filename)`用来加载你的数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-27T07:39:56.280

这对我有用：

```
from cv2 import cv
import numpy as np

filepath = "test.yml"
matrixA = np.array( cv.Load(filepath, cv.CreateMemStorage(), "matrixA") )
matrixB = np.array( cv.Load(filepath, cv.CreateMemStorage(), "matrixB") )
print "matrixA:", matrixA
print "matrixB:", matrixB 
```

如所见：http: [//xudongai.blogspot.jp/2013/08/how-to-use-python-to-load-opencv-yml.html](http://xudongai.blogspot.jp/2013/08/how-to-use-python-to-load-opencv-yml.html)

# python - 将对象的两个元素添加到列表而不重复它们的最佳方法是什么？

> ID：15571140
> 
> 赞同：0
> 
> 时间：2013-03-22T13:08:23.433
> 
> 标签：python, list, for-loop, iteration

**性能、优雅和可读性**是**“最佳方式”的要求**

我有字典数组：

```
items = [
    {'id1' : 1, 'id2' : 2, 'other' : 'xxx'},
    {'id1' : 1, 'id2' : 3, 'other' : 'yyy'},
    {'id1' : 2, 'id2' : 4, 'other' : 'zzz'}
] 
```

结果应该是：`ids = [1,2,3,4]`（id1 和 id2 的列表）

**编辑：** 像这样的东西：

```
ids = []
for item in items:
   if item.id1 not in ids:
       ids.append(item.id1)
   if item.id2 not in ids:
       ids.append(item.id2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:11:45.950

```
>>> set(x for y in items for x in y.values())
set([1, 2, 3, 4]) 
```

* * *

更新更新的问题

```
>>> set(v for y in items for (k,v) in y.items() if k.startswith('id'))
set([1, 2, 3, 4]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T13:11:49.617

这可以通过使用[`itertools.chain.from_iterable()`](http://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable)扁平化生成 id 值的嵌套[生成器表达式](http://www.youtube.com/watch?v=pShL9DCSIUw)来轻松完成- 我们假设所有键都将是字符串，并且以指定的开头`"id"`指定一个 id。然后我们制作一组这些值来删除重复项：

```
from itertools import chain

set(chain.from_iterable((value for name, value in item.items() 
                         if name.startswith("id"))
                        for item in items)) 
```

如果你真的想要一个列表，那么你可以从集合中创建一个，但在大多数情况下，集合应该是原样的。请注意，该集合没有顺序，因此如果您想要一个顺序，您将需要使用`sorted()`，例如。

`itertools.chain.from_iterable()`是扁平化迭代的最有效和可读的方法。

当涉及到什么是 id 时，您的规范不清楚。如果您有一组定义 id 的键，那么像这样的内容可能更适合作为内部生成器表达式的 if 子句：

```
if name in {"id1", "id2"} 
```

# hobo - 提交后覆盖重定向网址 在流浪汉轨道

> ID：15571141
> 
> 赞同：0
> 
> 时间：2013-03-22T13:08:23.843
> 
> 标签：hobo

**重定向代码在哪里..我正在使用带有rails 2.x的hobo 0.8版本**

```
'<pre>
'< 'def tag = "trash" attrs ="no-redirect" >

  < delete-button with="&this" after-submit="#{redirect_uri}" title = " #{tooltip}"
                 label="Erase !" class="nav-button" / >
</ def>'
</pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:00:57.820

Rails 和 Hobo 中的重定向是在控制器中完成的，尤其是在 5 年前的 Hobo 版本中。Hobo 2.0 有其他方法可以做到这一点，但在 Hobo 0.8 中，这是您唯一的选择：

```
def destroy
  hobo_destroy
  redirect_to redirect_url
end 
```

# jquery - 更改已设置变量的值

> ID：15571145
> 
> 赞同：2
> 
> 时间：2013-03-22T13:08:29.470
> 
> 标签：jquery, variables

这可能真的是一个非常基本的问题，但我已经尝试了几件事，但似乎没有用。

我有这个变量：

```
w = $("#el").width(); 
```

我想**通过 var**`#el`改变宽度。因此，通过使用 var 设置宽度而不重新使用整个. 我怎么做？我已经尝试了以下方法：**`w``$("#el").width()`**

 **```
w = 50;
w == 50;
w = "50px";
w == "50px"; 
```

但这些似乎不起作用。

所以我想`w`在一个函数中使用来设置`#el`宽度。所以我不想使用`$("#el").width()`，因为我会经常使用它。我需要使用该变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T13:09:58.087

[`.width()`](http://api.jquery.com/width/)接受一个参数。

```
 $("#el").width(100);//set width to 100 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T13:10:32.380

如果你让 w 持有这个功能

```
var w = (function() {
   var $el = $("#el"); //cache the query selector to only use once
   return function(x){
       if(typeof x ==="undefined"){
          return $el.width();
       }
       return $el.width(x);
   };
})(); 
```

...然后你可以这样做：

```
w();//get the width
w(50);//set the width 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T13:10:54.333

你的变量不是*live*。它是分配时宽度的副本。更改变量不会更改实际宽度。

相反，您需要这样做：

```
$("#el").width(50); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T13:11:24.597

```
w = $("#el").width(); 
```

只是将 el 的宽度值传递给 w，而不是参考。这意味着在做出该声明时，w 拥有一个等于 el 宽度的整数。

为了改变 el 的宽度，你只需要使用函数参数：

```
$("#el").width(50); 
```

并不是说使用带参数的函数会改变函数的返回类型。`$("#el").width(50);`不返回新的宽度，所以你不能使用语句 `w = $("#el").width(50);`为了更新你的变量和基于该变量的实际宽度，它必须像这样完成：

```
w = 50;
$("#el").width(w); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T13:10:06.063

[看这里](http://api.jquery.com/width/)

```
var w = $("#el").width();

 $("#el").width(w); 
```

你可以这样做

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T13:11:17.197

尝试 ：

```
var w = 100;
$("#el").width(w); 
```

有关详细信息，请参阅[width() 文档](http://api.jquery.com/width/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T13:13:46.787

```
w = 50; 
```

*这只会改变变量值。*

```
$("#el").width(w); 
```

*这应该改变元素宽度。***

# android - 媒体专辑艺术家播放列表意图

> ID：15571153
> 
> 赞同：2
> 
> 时间：2013-03-22T13:08:48.037
> 
> 标签：android

在我的 Android 应用程序中，我希望用户能够选择专辑、艺术家和播放列表，然后发送一个意图让他们的默认媒体播放器播放它们。

我以标准方式获取 ID：

```
final Uri exAudioUri = Uri.parse("content://com.google.android.music.MusicContent/playlists");

final String[] proj = { MediaStore.Audio.Playlists._ID, MediaStore.Audio.Playlists.NAME };

final Cursor musiccursor = ctx.getContentResolver().query(exAudioUri, proj, null, null, null);

    String name = null;
    String id = null;

        if (musiccursor != null && musiccursor.getCount() > 0) {
            while (musiccursor.moveToNext()) {
                name = musiccursor.getString(musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Playlists.NAME));
                id = musiccursor.getString(musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Playlists._ID)); 
```

对于播放列表，我使用以下意图：

```
 Intent playMediaIntent = new Intent(Intent.ACTION_VIEW);
    playMediaIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    playMediaIntent.setType(MediaStore.Audio.Playlists.CONTENT_TYPE);
    playMediaIntent.putExtra("playlist", playlistID); 
```

Google Play 音乐应用会拦截此内容并成功播放播放列表。

尝试对专辑执行相同操作会给我一个未找到的活动异常：

```
 Intent playMediaIntent = new Intent(Intent.ACTION_VIEW);
    playMediaIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    //playMediaIntent.setType("vnd.android.cursor.dir/track");
    playMediaIntent.setType(MediaStore.Audio.Albums.CONTENT_TYPE);
    //playMediaIntent.setData(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI);
    playMediaIntent.putExtra("album", albumID); 
```

我知道这些是未记录的方法并且可能会发生变化，但是当用户已经选择了他们最喜欢的时，我不想实现自己的整个媒体播放器......

任何人都可以建议媒体播放器将拦截的任何“标准”代码吗？

或者，有没有一种方法可以从专辑（或艺术家）中获取所有歌曲，并发送包含要播放或排队的曲目 URI 数组的数据的意图？

去过谷歌/ Stackoverflow的深处，画了一个空白......

请帮忙！我提前谢谢你。

# wordpress - wordpress：如何保护其他用户的附件

> ID：15571154
> 
> 赞同：0
> 
> 时间：2013-03-22T13:08:55.330
> 
> 标签：wordpress

作为管理员，我创建了一些带有附件的帖子，并允许对特定用户授予权限，它工作正常，没有其他成员或非成员可以访问这些帖子，但是每个人都可以访问这些附件的附件呢？

我读了[http://www.idowebdesign.ca/wordpress/password-protect-wordpress-attachments/](http://www.idowebdesign.ca/wordpress/password-protect-wordpress-attachments/)但我不想使用`.htaccess`. 有没有什么好的wp插件可以做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-23T19:17:31.790

您可以通过 Yoast 插件下载 SEO。有一些设置可以应用无索引等，以使搜索和站点地图无法发现内容。

您还可以使用会员插件，例如 imember360（以前称为 infusionwp）或 Premise（由 coppyblogger 人提供）

有很多方法可以保护附件等。

我想我的问题是任何人都可以看到附件所在的页面，还是你给他们一个链接的页面？

谢谢！

# php - Mootools 从每个获得第一个值

> ID：15571157
> 
> 赞同：0
> 
> 时间：2013-03-22T13:09:12.510
> 
> 标签：php, ajax, json, mootools

我有一个来自 Json 的数组图像：

```
images=JSON.decode(images); 
```

这是数组值：

```
[
    {
        "title": "",
        "description": "",
        "name": "loc commerciale.jpg"
    },
    {
        "title": "",
        "description": "",
        "name": "foto2.jpg"
    },
    {
        "title": "",
        "description": "",
        "name": "foto 1.jpg"
    },
    {
        "title": "",
        "description": "",
        "name": "a01.jpg"
    }
] 
```

我从 name 得到值：

```
images.each(function(image){                
    alert(image.name);
}); 
```

我只需要获取第一个值名称

像 php ：

```
$images = (array) json_decode($row->images);
$first = true;
foreach ($images as $k => $image) {
    if ($first)
    {
        $firstimage= $image->name;
        $first = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T18:57:30.577

尝试：

```
if (images[0].length){
    var firstImageName = images[0].name;
} 
```

# arrays - Perl 尝试修改不可创建的数组值，下标 -1

> ID：15571158
> 
> 赞同：0
> 
> 时间：2013-03-22T13:09:12.797
> 
> 标签：arrays, perl, compare

我有一个执行递归函数的 Perl 脚本。在其中比较二维数组的两个元素：

我用二维数组“@data”和“0”作为起始值调用例程。首先，我将参数加载到单独的二维数组“@test”中

然后我想看看，如果数组只包含一个元素 --> 比较最后一个元素 == 第一个元素。这就是发生错误的地方：尝试修改不可创建的数组值，下标-1。

> 你试图让一个数组值突然出现，并且下标可能是负数，甚至从数组的末尾向后计数。

这对我没有多大帮助......我很确定它与 if 子句“$counter-1”有关。但是我不知道是什么，希望大家能帮帮我！

```
routine(@data,0);

sub routine {
    my @test #(2d-Array) 

    my $counter = $_[-1]

    for(my $c=0; $_[$c] ne $_[-1]; $c++){

        for (my $j=0; $j<13;$j++){    #Each element has 13 other elements

            $test[$c][$j] = $_[$c][$j];

        }
    }
    if ($test[$counter-1][1] eq $test[-1][1]{

        $puffertime  = $test[$counter][4];

    }
    else{
        for (my $l=0; $l<=$counter;$l++){

            $puffertime+= $test[$l][4]

        }
    }    
}
#
#
#

if ($puffertime <90){

    if($test[$counter][8]==0){

        $counter++;
        routine(@test,$counter);
    }  

    else{ return (print"false");}

}
else{return (print "true");} 
```

奇怪的是我今天早上试了一下，它奏效了。在运行了一小段时间后，他再次提出了此错误消息。可能是我没有赶上动态数据库条目可能发生的错误星座。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:09:15.377

如果你的`routine()`函数像这样开始，你的函数会更容易阅读：

```
sub routine {
  my @data = @_;
  my $counter = pop(@data);
  my @test;

  for(my $c=0; $c <= $#data; $c++){
    for (my $j=0; $j<13;$j++){    #Each element has 13 other elements
      $test[$c][$j] = $data[$c][$j];
    }
  } 
```

`scalar(@data) == 1`您可以通过或来检查@data 是否只有一个元素`$#data == 0`。从您的代码片段中，我看不出您为什么需要将数据复制到传递`routine()`给`@test`. 似乎是多余的。如果您不打算修改传递给您的例程的任何数据，您也可以跳过所有这些复制。您的下一个代码可能如下所示：

```
if ($#test == 0) {
  $puffertime = $test[0][4];
} else {
  for (my $l=0; $l <= $counter; $l++) {
    $puffertime += $test[$l][4];
  }
} 
```

但是，如果您的全局变量`$puffertime`被初始化为零，那么您可以将此代码替换为：

```
for (my $l=0; $l <= $counter; $l++) {
  $puffertime += $test[$l][4];
} 
```

# c# - 从另一个类调用主类的公共方法

> ID：15571164
> 
> 赞同：2
> 
> 时间：2013-03-22T13:09:21.227
> 
> 标签：c#, winforms

我的主要**Form1.cs**如下

```
 public partial class Form1: Form
    {
        Test _Test = new Test()

        public Form1()
        {
            InitializeComponent();
            _Test._TestMethod();
        }

        public void _MainPublicMethod(string _Message, string _Text)
        {
            MessageBox.Show(_Message);
            TextBox1.Text = Text;
        }
    } 
```

我的**Test.cs**如下

```
class Test
{
    Form1 _Form1 = new Form1();

    public void _TestMethod()
    {
        _Form1._MainPublicMethod("Test Message", "Test Text");
    }
} 
```

当我调试我的项目时，代码不起作用。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:11:12.630

可以修改这段代码，加括号`()`

```
Form1 _Form1 = new Form1(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:19:27.680

我猜您想在所有者表单上调用 mainpublicmethod，而不是所有者表单的新实例。像这样：

```
public partial class Form1: Form
{
    Test _Test = new Test()

    public GrabGames()
    {
        InitializeComponent();
        _Test._TestMethod(this); //pass this form to the other form
    }

    public void _MainPublicMethod(string _Message, string _Text)
    {
        MessageBox.Show(Message);
        TextBox1.Text = Text;
    }
}

class Test
{
   public void _TestMethod(Form1 owner)
   {
       //call the main public method on the calling/owner form
       owner._MainPublicMethod("Test Message", "Test Text");
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T13:18:12.763

您的代码显示了一个常见的误解（或缺乏对基本 OOP 原则的理解）。
当您的代码在 form1 中调用 _Test._TestMethod() 时，您正在调用一个“属于”在您的 form1 中定义和初始化的类 Test 实例的方法。反过来，该实例尝试调用 Form1 类中定义的方法 _MainPublicMethod。但是，因为要调用该方法（实例方法，而不是静态方法）您需要 Form1 的实例，所以您声明并初始化了 Form1 的另一个**实例**

您最终打开了 Form1 类的两个实例，并且调用由 Form1 的第二个实例解决，而不是来自最初调用 _TestMethod 的实例。

为避免此问题，您需要将引用传递给调用 Test_Method 的 Form1 实例，并在 Test 中使用该实例来回调公共方法。

因此，当调用 Test_Method 时，传递 Form1 的当前实例

```
 public Form1()
   {
        InitializeComponent();
        _Test._TestMethod(this);
   } 
```

并在 Test.cs

```
class Test
{
    Form1 _frm = null;

    public void _TestMethod(Form1 f)
    {
        _frm = f;
        _frm._MainPublicMethod("Test Message", "Test Text");
    }
} 
```

# javascript - 在 Jquery 模板中注册事件

> ID：15571166
> 
> 赞同：0
> 
> 时间：2013-03-22T13:09:25.690
> 
> 标签：javascript, jquery

我正在使用 jquery 模板并具有以下 html 标记

```
<div id="results">           
  <div class="CommentItem" commentid="33064" id="33064" data-guid="/Profile/Profile.aspx?id=Charliedog33"> 
    <div class="CommentPic">                 
      <img src="AspNetForumAvatarguy18.jpg">
    </div>             
    <div class="CommentText">thsi is text</div>
  </div>
  <div class="CommentItem" commentid="33064" id="33064" data-guid="/Profile/Profile.aspx?id=Charliedog33"> 
    <div class="CommentPic">                 
      <img src="AspNetForumAvatarguy18.jpg">
    </div>             
    <div class="CommentText">thsi is text</div>
  </div>
</div> 
```

它确实在列表中呈现数据，但我如何在单个项目上注册事件。（commentid 确实具有唯一值）

```
 $("#results").live("click", function (evt) {

        if ($(this).evt.attr('commentid') != null) {
            alert("event registered goes here");
        }
        else {
            alert("there is prolem");
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:16:08.840

首先你应该使用 on() 因为 live 已被弃用。尝试这样的事情：

```
$("body").on("click", ".CommentItem", function () {
    if ($(this).attr('commentid')) {
        alert("event registered goes here");
    }
    else {
        alert("there is prolem");
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:20:44.930

```
 if ($(this).attr('id') != null) {
            alert("event registered goes here");
        }
        else {
            alert("there is prolem");
        } 
```

> 如果 id 不可用 $(this).attr("id") 将返回 undefined。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:55:32.440

采用

```
$("#results .CommentItem").live("click", function (evt) {
    if ($(evt.target).closest('.CommentItem').attr('commentid') != null) {
        alert("event registered goes here");
    } else {
        alert("there is prolem");
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/tRMHy/)

如果您使用 jQuery >= 1.7，那么我建议使用[.on()](http://api.jquery.com/on/)而不是[.live()](http://api.jquery.com/live/)因为它在 1.7 中已弃用并[在 1.9 中删除](http://jquery.com/upgrade-guide/1.9/#live-removed)。

```
$(function(){
    $(document).on("click", '#results .CommentItem', function (evt) {
        var commentItem = $(evt.target).closest('.CommentItem');
        var commentid = commentItem.attr('commentid');
        if ( commentid ) {
            alert("event registered goes here: " + commentid);
        } else {
            alert("there is prolem");
        }
    });
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/tRMHy/1/)

# java - 旋转屏幕时保存活动状态

> ID：15571168
> 
> 赞同：3
> 
> 时间：2013-03-22T13:09:37.193
> 
> 标签：java, android, rotation

我正在开发一个 android 应用程序，现在我限制用户只对所有活动使用水平视图。

我希望能够为用户提供旋转屏幕的选项，但是当我这样做时，活动从头开始，而不是保持不变。

知道旋转屏幕时如何保存状态吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T13:11:56.820

首先，您必须在您的活动中**覆盖。`onConfigurationChanged(Configuration)`**

```
 public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
  } 
```

您还必须在清单文件中编辑适当的元素以包含 android:configChanges 只需查看以下代码：

```
<activity android:name=".MyActivity"
          android:configChanges="orientation|keyboardHidden"
          android:label="@string/app_name"> 
```

我也喜欢 Marko 的想法，但它根本没有效率。这样，我们就不必调用 onCreate/onStartup/etc。我们一直在做一个简单的旋转。无需从头开始“重建”基础设施（例如获取视图，..）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T13:12:19.930

每次旋转设备时，都会再次调用 onCreate 方法。您可以通过覆盖 onSavedInstanceState 来保存这些值，然后在 onRestoreInstanceState 或 onCreate 方法中将它们取回。例如让我们保存布尔值（你可以保存任何你想要的）：

保存值：

```
public void onSaveInstanceState(Bundle outState) {
        outState.putBoolean("booleanValue", true);
} 
```

恢复值（您也可以在 onCreate 中调用它）：

```
protected void onRestoreInstanceState(Bundle savedInstanceState) {
        if (savedInstanceState != null && savedInstanceState.containsKey("booleanValue")) {
            boolean myBoolean = savedInstanceState.getBoolean("booleanValue");
        }
        super.onRestoreInstanceState(savedInstanceState);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:15:26.863

```
<activity (...)
          android:configChanges="orientation|keyboard"
          (...)> 
```

将此添加到您的清单中不允许 Android 在更改布局后重新启动活动。

# java - 我需要帮助理解 java 中 Timer 类的 scheduleAtFixedRate 方法

> ID：15571169
> 
> 赞同：3
> 
> 时间：2013-03-22T13:09:37.277
> 
> 标签：java, syntax

作为[番茄钟技术](http://www.pomodorotechnique.com/)的粉丝，我正在为自己制作一个倒数计时器，以让我专注于我的家庭作业。然而，这个特定的项目不是家庭作业。:)

Stack 有很多关于在用户输入之前使用计时器来控制延迟等问题，但在独立计时器上却没有很多问题。我从朋友那里看到了这段代码，并研究了 Java 文档上的课程。

```
public class Stopwatch {
    static int interval;
    static Timer timer;

    public static void main(String[] args)
    {
        Scanner sc = new Scanner(System.in);
        System.out.print("Input seconds => : ");
        String secs = sc.nextLine();
        int delay = 1000;
        int period = 1000;
        timer = new Timer();
        interval = Integer.parseInt( secs );
        System.out.println(secs);
        timer.scheduleAtFixedRate(new TimerTask()
        {
            public void run()
            {
                System.out.println(setInterval());
            }
        }, delay, period);
    }
    private static final int setInterval()
    {
        if( interval== 1) timer.cancel();
        return --interval;
    }
} 
```

有一些语法我不清楚。考虑：

```
timer.scheduleAtFixedRate(new TimerTask()
{
     public void run()
     {
          System.out.println(setInterval());
     }
}, delay, period); 
```

我不明白括号和大括号是如何工作的。乍一看，鉴于`scheduleAtFixedRate(TimerTask task, long delay, long period)`我可以看到`delay`and`period`参数的用法，但不是第一个参数之前的开放括号。

我的第一个参数实际上是整个代码块吗？我希望整个块都被括号包围......但事实并非如此。这是java中的常见语法吗？我以前从未遇到过它。

新 TimerTask() { public void run() { System.out.println(setInterval()); } }

我只是想澄清一下，在我开始修改更改之前我理解它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T13:13:51.083

```
timer.scheduleAtFixedRate(new TimerTask()
{
     public void run()
     {
          System.out.println(setInterval());
     }
}, delay, period); 
```

该代码等效于此重构，其中将`new TimerTask`分配给局部变量。

```
TimerTask task = new TimerTask()
{
     public void run()
     {
          System.out.println(setInterval());
     }
};

timer.scheduleAtFixedRate(task, delay, period); 
```

当然，奇怪的部分刚刚向上移动了一点。这到底是什么`new TimerTask`东西？

Java 具有用于定义[匿名内部类](https://stackoverflow.com/questions/355167/how-are-anonymous-inner-classes-used-in-java)的特殊语法。匿名类是一种语法便利。`TimerTask`您可以在使用时直接定义它及其`run()`方法，而不是定义其他地方的子类。

上面的代码等价于下面的代码，匿名`TimerTask`子类变成了显式命名的子类。

```
class MyTimerTask extends TimerTask
{
     public void run()
     {
          System.out.println(setInterval());
     }
}

TimerTask task = new MyTimerTask();
timer.scheduleAtFixedRate(task, delay, period); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:12:14.527

你是对的，第一个参数是整个代码块：

```
new TimerTask()
{
     public void run()
     {
          System.out.println(setInterval());
     }
} 
```

这些声明称为*匿名类，*[在 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html)中有更详细的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:15:42.530

它是一个[匿名内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html)。您需要**研究内部类才能理解这一点**。通常，当您不需要在代码中的其他位置使用该类时，会使用此类类。你不能在其他地方使用它，因为你**没有指向它的参考。** 您也可以将上面的代码替换如下：

```
class MyTimerTask extends TimerTask {

        @Override
        public void run() {
            // Timer task code goes here.
             System.out.println(setInterval());
        }

    }
    MyTimerTask timerTask = new MyTimerTask();
    timer.scheduleAtFixedRate(timerTask, delay, period); 
```

# android - 膨胀类片段时出错（Tabhost）

> ID：15571173
> 
> 赞同：0
> 
> 时间：2013-03-22T13:10:03.933
> 
> 标签：android, android-layout, android-fragments, inflate-exception

在这里，我正在实施一项活动以显示 tabhost.but 我得到错误，因为错误膨胀二进制 xml .... 我在这个论坛上搜索了类似的答案，但没有一个对我有帮助？这是我的活动课

* * *

```
package com.example.iolcalci;

import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;
import android.app.Activity;

public class Menu extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_menu);
        TabHost mTab=(TabHost)findViewById(android.R.id.tabhost);
        mTab.setup();

        TabSpec specs=mTab.newTabSpec("tag1");
        specs.setContent(R.id.srkt_fragment);
        specs.setIndicator("SRK/T");
        mTab.addTab(specs);

        specs=mTab.newTabSpec("tag2");
        specs.setContent(R.id.srk2_fragment);
        specs.setIndicator("SRK II");
        mTab.addTab(specs);

        specs=mTab.newTabSpec("tag3");
        specs.setContent(R.id.holl_fragment);
        specs.setIndicator("HOLLADAY");
        mTab.addTab(specs);

        specs=mTab.newTabSpec("tag4");
        specs.setContent(R.id.bink_fragment);
        specs.setIndicator("BINKHORST");
        mTab.addTab(specs);
    }

} 
```

* * *

这是我的xml代码

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

<TabHost xmlns:tools="http://schemas.android.com/tools"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:ignore="HardcodedText" xmlns:android="http://schemas.android.com/apk/res/android">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:orientation="vertical">

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >
            </TabWidget>

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="160dp"
                android:layout_weight="0.05"
                android:background="@color/Black" >

                <TextView
                    android:id="@+id/al"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/k1"
                    android:layout_alignBottom="@+id/k1"
                    android:layout_alignLeft="@+id/k2"
                    android:text="@string/AL"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <EditText
                    android:id="@+id/al_editText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/al"
                    android:layout_alignBottom="@+id/al"
                    android:layout_alignLeft="@+id/k2_editText"
                    android:layout_alignRight="@+id/k2_editText"
                    android:background="@drawable/editbg"
                    android:ems="10"
                    android:enabled="true"
                    android:inputType="numberDecimal"
                    android:scrollHorizontally="true"
                    android:singleLine="true"
                    android:textColor="@color/White"
                    android:textSize="15sp"
                    android:visibility="visible"
                    android:width="100dp" />

                <TextView
                    android:id="@+id/k1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentTop="true"
                    android:layout_marginLeft="46dp"
                    android:layout_marginTop="27dp"
                    android:layout_toRightOf="@+id/al_editText"
                    android:text="@string/K1"
                    android:textColor="@color/white"
                    android:textSize="15sp" />

                <EditText
                    android:id="@+id/k2_editText"
                    android:layout_width="65dp"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/k2"
                    android:layout_alignBottom="@+id/k2"
                    android:layout_marginLeft="14dp"
                    android:layout_toRightOf="@+id/k2"
                    android:background="@drawable/editbg"
                    android:ems="10"
                    android:enabled="true"
                    android:inputType="numberDecimal"
                    android:scrollHorizontally="true"
                    android:singleLine="true"
                    android:textColor="@color/White"
                    android:textSize="15sp"
                    android:visibility="visible"
                    android:width="100dp" >

                    <requestFocus />
                </EditText>

                <TextView
                    android:id="@+id/k2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/al_editText"
                    android:layout_marginLeft="16dp"
                    android:layout_marginTop="22dp"
                    android:text="@string/K2"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/al_const"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@+id/k2_editText"
                    android:layout_alignLeft="@+id/k1"
                    android:text="@string/Rx"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/dr"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/k2_editText"
                    android:layout_alignParentBottom="true"
                    android:layout_marginBottom="17dp"
                    android:layout_toLeftOf="@+id/k1"
                    android:ems="10"
                    android:gravity="center"
                    android:text="@string/dr"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <EditText
                    android:id="@+id/dr_editText"
                    android:layout_width="65dp"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/dr"
                    android:layout_alignBottom="@+id/dr"
                    android:layout_toRightOf="@+id/dr"
                    android:background="@drawable/editbg"
                    android:ems="10"
                    android:inputType="numberDecimal"
                    android:singleLine="true"
                    android:textColor="@color/White"
                    android:textSize="15sp" />

                <TextView
                    android:id="@+id/al_metric"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_above="@+id/k2_editText"
                    android:layout_alignTop="@+id/k1"
                    android:layout_toLeftOf="@+id/al_const"
                    android:layout_toRightOf="@+id/al_editText"
                    android:gravity="left|center_vertical"
                    android:text="mm"
                    android:textAppearance="?android:attr/textAppearanceSmall"
                    android:textColor="@color/White" />

                <EditText
                    android:id="@+id/k1_editText"
                    android:layout_width="65dp"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/k1"
                    android:layout_alignBottom="@+id/k1"
                    android:layout_marginLeft="19dp"
                    android:layout_toRightOf="@+id/k1"
                    android:background="@drawable/editbg"
                    android:ems="10"
                    android:enabled="true"
                    android:inputType="numberDecimal"
                    android:scrollHorizontally="true"
                    android:singleLine="true"
                    android:textColor="@color/White"
                    android:textSize="15sp"
                    android:visibility="visible"
                    android:width="100dp" />

                <EditText
                    android:id="@+id/al_const_editText"
                    android:layout_width="65dp"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/al_const"
                    android:layout_alignBottom="@+id/al_const"
                    android:layout_toRightOf="@+id/al_const"
                    android:background="@drawable/editbg"
                    android:ems="10"
                    android:enabled="true"
                    android:inputType="numberDecimal"
                    android:scrollHorizontally="true"
                    android:singleLine="true"
                    android:textColor="@color/White"
                    android:textSize="15sp"
                    android:visibility="visible"
                    android:width="100dp" />

                <EditText
                    android:id="@+id/k1_metric"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@+id/al_metric"
                    android:layout_alignTop="@+id/k1"
                    android:layout_toRightOf="@+id/k1_editText"
                    android:gravity="left|top"
                    android:inputType="text"
                    android:textAppearance="?android:attr/textAppearanceSmall"
                    android:textColor="@color/White" />

                <EditText
                    android:id="@+id/k2_metric"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@+id/k2_editText"
                    android:layout_alignTop="@+id/al_const"
                    android:layout_toRightOf="@+id/k2_editText"
                    android:inputType="text"
                    android:textAppearance="?android:attr/textAppearanceSmall"
                    android:textColor="@color/White" />

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@+id/dr_editText"
                    android:layout_alignRight="@+id/al_const"
                    android:layout_alignTop="@+id/dr"
                    android:layout_toRightOf="@+id/k1"
                    android:text="D"
                    android:textAppearance="?android:attr/textAppearanceSmall"
                    android:textColor="@color/white" />
            </RelativeLayout>

            <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:background="@color/Black" >

            <fragment
                android:id="@+id/bink_fragment"
                android:name="com.example.iolcalci.Binkhorst_x"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                 />

            <fragment android:name="com.example.iolcalci.Srkt_x"
                android:id="@+id/srkt_fragment"
                android:layout_width="match_parent"
                android:layout_height="match_parent"/>
            <fragment android:name="com.example.iolcalci.Holladay_x"
                android:id="@+id/holl_fragment"
                android:layout_width="match_parent"
                android:layout_height="match_parent"/>
            <fragment android:name="com.example.iolcalci.Srk2_x"
                android:id="@+id/srk2_fragment"
                android:layout_width="match_parent"
                android:layout_height="match_parent"/>

        </FrameLayout>

    </LinearLayout>

</TabHost>
</RelativeLayout> 
```

* * *

这是我的 logcat 报告

* * *

```
03-22 18:30:46.869: D/AndroidRuntime(364): Shutting down VM
03-22 18:30:46.869: W/dalvikvm(364): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-22 18:30:46.894: E/AndroidRuntime(364): FATAL EXCEPTION: main
03-22 18:30:46.894: E/AndroidRuntime(364): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Menu}: android.view.InflateException: Binary XML file line #236: Error inflating class fragment
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.os.Looper.loop(Looper.java:123)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-22 18:30:46.894: E/AndroidRuntime(364):  at java.lang.reflect.Method.invokeNative(Native Method)
03-22 18:30:46.894: E/AndroidRuntime(364):  at java.lang.reflect.Method.invoke(Method.java:507)
03-22 18:30:46.894: E/AndroidRuntime(364):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-22 18:30:46.894: E/AndroidRuntime(364):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-22 18:30:46.894: E/AndroidRuntime(364):  at dalvik.system.NativeStart.main(Native Method)
03-22 18:30:46.894: E/AndroidRuntime(364): Caused by: android.view.InflateException: Binary XML file line #236: Error inflating class fragment
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
03-22 18:30:46.894: E/AndroidRuntime(364):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.app.Activity.setContentView(Activity.java:1657)
03-22 18:30:46.894: E/AndroidRuntime(364):  at com.example.iolcalci.Menu.onCreate(Menu.java:13)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-22 18:30:46.894: E/AndroidRuntime(364):  ... 11 more
03-22 18:30:46.894: E/AndroidRuntime(364): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.example.iolcalci-2.apk]
03-22 18:30:46.894: E/AndroidRuntime(364):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
03-22 18:30:46.894: E/AndroidRuntime(364):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
03-22 18:30:46.894: E/AndroidRuntime(364):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.view.LayoutInflater.createView(LayoutInflater.java:471)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
03-22 18:30:46.894: E/AndroidRuntime(364):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
03-22 18:30:46.894: E/AndroidRuntime(364):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
03-22 18:30:46.894: E/AndroidRuntime(364):  ... 23 more 
```

* * *

我不知道错误在哪里，因为它没有在日志文件中显示原因。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:10:27.960

如果您在布局中使用标签，则使用属性`fragment`指向片段的类：`class`

```
<fragment
     android:id="@+id/bink_fragment"
     class="com.example.iolcalci.Binkhorst_x"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
/> 
```

# c# - 使用带有 VS2012 的 Sql Server 2012 developer 而不是内置的 express 版本

> ID：15571176
> 
> 赞同：0
> 
> 时间：2013-03-22T13:10:12.717
> 
> 标签：c#, .net, visual-studio-2012, sql-server-2012

如果我想在现有的 VS2012 Pro 安装中安装 SQl Server 2012 的完整开发人员版，我是否必须摆脱与 VS2012 Pro 版捆绑在一起的 Sql server 快速版？我打算使用开发者版本，而不是 VS2012 附带的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:56:46.393

不，您可以同时安装两者。

# c# - 将 C# 方法转换为异步调用 Page/Web 方法或 jQuery 的最简单方法

> ID：15571177
> 
> 赞同：0
> 
> 时间：2013-03-22T13:10:15.470
> 
> 标签：c#, jquery, asynchronous

我有一个来自 Web 表单的 C# 方法，我想使用页面方法、Web 方法或可能的 jQuery 异步调用该方法，以避免回发到服务器。该方法调用其他方法并重建树视图并执行验证并设置一些其他值。下面是代码示例。

这样做的最简单方法是什么？如果可能，将不胜感激提供的任何代码示例。没有更新面板..

```
protected void btnSubmit_Click(object sender, ImageClickEventArgs e)
{

        if (ValidateSelection() == true)
        {
            int ProductID = Convert.ToInt32(grdGetProducts.SelectedValue.ToString());

            if (Convert.ToInt32(ddBetTypeID.SelectedItem.Value) != 2)
            {
                SubmitProduct(Convert.ToInt32(ddProductTypeID.SelectedItem.Value), currentWeek, Convert.ToInt32(ddProductID.SelectedItem.Value), Convert.ToInt32(ddValue.SelectedItem.Value), Convert.ToInt32(ddCost.SelectedItem.Value), ProductID);
            }

            if (Convert.ToInt32(ddProductTypeID.SelectedItem.Value) == 2)
            {

                int price;
                price= 1;
                //if 1 open side then part 2
                if (txtProductID.Text != "0" && txt2ProductID.Text == "0")
                {
                    price= 2;

                }

            if (ProductID > 2)
            {
                BuildTree(currentTime, Convert.ToInt32(ddProductID.SelectedItem.Value), currentProduct);

            }

        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:25:59.627

如果没有更新面板，您肯定需要大量客户端 JavaScript。

我一直在用动态表做这样的事情，我做的第一件事就是隔离我的数据和我的显示。你应该从做同样的事情开始。

找出正在验证的数据以及如何在客户端上收集这些数据以发送到 Web 方法。然后，您需要编写客户端脚本来执行此收集和发布。使用客户端脚本发布后，在 ajax 调用的回调中，您需要在页面上进行渲染。如果没有更新面板，这一切都取决于您。

不使用更新面板的问题是您将不得不重新创建树视图结构或在客户端对其进行操作。这意味着替换所有元素及其事件处理程序。对于更复杂的 ASP 控件，这可能是一项非常艰巨的任务。

服务器需要发回以进行渲染的将是树需要的所有数据。你要弄清楚那是什么。

我之前已经动态渲染了gridviews，因为使用它们来创建复杂的样式很好。然后，只需根据我从服务器获得的数据，在客户端使用脚本创建行；我想你可以用树视图做类似的事情。

[通过阅读encosia.com](http://encosia.com)，我学到了很多关于 jQuery、ajax 和 ASP.NET 交互的知识。那个人是一个很好的资源。

*   [避免使用 jQuery AJAX 和 ASP.NET 的事情](http://encosia.com/3-mistakes-to-avoid-when-using-jquery-with-aspnet-ajax/)
*   [错误：手动 JSON 序列化](http://encosia.com/asp-net-web-services-mistake-manual-json-serialization/)
*   [使用jQuery直接调用asp.net页面方法](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)
*   [更新面板很危险](http://encosia.com/why-aspnet-ajax-updatepanels-are-dangerous/)

# mysql - 在 MySQL 中，如何获取每天每个条目的值？

> ID：15571178
> 
> 赞同：1
> 
> 时间：2013-03-22T13:10:17.543
> 
> 标签：mysql, sql, pivot

所以，我有一个类似于这个的 MySQL 表：

```
|Day | Participant| Score |
+----+------------+-------+
|Mon | Andy       | 9     |
|Mon | Betty      | 8     |
|Mon | Charlie    | 7     |
|Tue | Andy       | 6     |
|Tue | Betty      | 6     |
|Tue | Charlie    | 8     |
|Wed | Andy       | 7     |
|Wed | Charlie    | 4     | 
```

我想把它输出到这个：

```
| Day | Andy | Betty | Charlie |
+-----+------+-------+---------+
| Mon | 9    | 8     | 7       |
| Tue | 6    | 6     | 7       |
| Wed | 7    | null  | 4       | 
```

我用 PHP 解决了这个问题，这就是我想出的：

1.  查询每个参与者的姓名。
2.  使用 PHP，为每个参与者每天的分数构建一个子查询，如下所示：

    ```
    SELECT score FROM TableName WHERE (Day=ref_point AND Participant='Andy') 
    ```

3.  生成包含所有子查询的主查询，如下所示：

    ```
    SELECT Day AS ref_point,(/* Sub-query for Andy */) AS Andy,(/* Sub-query for Betty */) AS Betty,(/*Sub-queries for the rest of participants */) AS Others FROM TableName GROUP BY Day 
    ```

这工作得很好，但是随着参与者数量的增加，查询字符串也会增加。我担心有一天查询会超过 PHP 的最大字符串长度。我需要知道如何在 MySQL 中完全做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:11:51.077

```
SELECT  DAY,
        MAX(CASE WHEN Participant = 'Andy' THEN Score END) `Andy`,
        MAX(CASE WHEN Participant = 'Betty' THEN Score END) `Betty`,
        MAX(CASE WHEN Participant = 'Charlie' THEN Score END) `Charlie`
FROM    tableName
GROUP   BY DAY 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/813c8/1)

如果您有未知数量的参与者，更好的方法是使用`Dynamic SQL`，例如

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(case when Participant = ''',
      Participant,
      ''' then Score end) AS ',
      Participant
    )
  ) INTO @sql
FROM TableName;

SET @sql = CONCAT('SELECT  DAY, ', @sql, ' 
                  FROM    tableName
                  GROUP   BY DAY');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/813c8/3)
*   [SQLFiddle Demo（*不改变语句的附加记录*）](http://www.sqlfiddle.com/#!2/ca92d/1)

输出

```
╔═════╦══════╦════════╦═════════╗
║ DAY ║ ANDY ║ BETTY  ║ CHARLIE ║
╠═════╬══════╬════════╬═════════╣
║ Mon ║    9 ║ 8      ║       7 ║
║ Tue ║    6 ║ 6      ║       8 ║
║ Wed ║    7 ║ (null) ║       4 ║
╚═════╩══════╩════════╩═════════╝ 
```

# url - 当 url 不存在时，CakePHP requestAction 捕获错误

> ID：15571182
> 
> 赞同：0
> 
> 时间：2013-03-22T13:10:24.083
> 
> 标签：url, cakephp, exception

当我使用 requestAction($url); 时，当我的应用程序中不存在请求的 url 时，我尝试捕获错误；使用 try-catch 块，继续加载请求的错误 url；

请告诉我是否有其他解决方案来测试 url 是否存在，或者文件是否存在于 cakephp 目录中（我的 url 可以由插件名称组成）。

我的实际代码：

```
$url = $appliUrl .  $cron['Cron']['plugin'] . '/'. $cron['Cron']['controller'] . '/' . $cron['Cron']['action'];
if (!empty($cron['Cron']['params'])) {
    $params = explode(',', $cron['Cron']['params']);
    foreach ($params as $param)
        $url .= '/' . $param;
}
try{
    $output = $this->requestAction($url);
}catch (Exception $e){
    $output = "error in the url : ".$url;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:46:27.970

您可以使用多种方法来完成此操作。在此示例中，使用 cURL。

```
function url_exists($url) {
    if (!$fp = curl_init($url)) return false;
    return true;
} 
```

然后你可以将你的 $output 包装在一个 if 块中检查 url。

```
if (url_exists($url)) {
   $output = $this->requestAction($url);
} 
```

*编辑*

确保将函数放在库或引导程序中以供访问。不要像那样把它粘在你的控制器里:)

**另一个编辑**

```
<?php 
$ch = curl_init('http://yoururl/'); 
curl_setopt($ch, CURLOPT_NOBODY, 1); 
$c = curl_exec($ch); 
echo curl_getinfo($ch, CURLINFO_HTTP_CODE); 
```

# java - 谷歌图表 JSON 问题 - Java

> ID：15571185
> 
> 赞同：1
> 
> 时间：2013-03-22T13:10:25.910
> 
> 标签：java, json, charts

我正在使用 jquery 从 servlet 返回一个基本的 JSON 对象，它工作得非常好，但是我在格式化 JSON 以实际填充图表时遇到了麻烦。

这是调用 servlet 的代码：

```
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);
function drawChart() {

    $.getJSON('SearchServlet', {servletAction: 'getSummary'}, function(json) {
        var data = new google.visualization.DataTable(json);
          var chart = new google.visualization.PieChart(document.getElementById('summaryPieChart'));
          chart.draw(data, {backgroundColor:'#e9f1f4',width: '90%', height: '90%', legend:{position:'none'}, chartArea:{width:"90%",height:"90%"},colors:['#94d784','#d78484']});
    });

} 
```

在 servlet 方面，我用来创建 JSON 的代码是：

```
private int positive;
private int negative;
private int neutral;

public DataTable createResultsJSON(){
    DataTable data = new DataTable();
    ArrayList<ColumnDescription> cols = new ArrayList<ColumnDescription>();
    cols.add(new ColumnDescription("summary", ValueType.TEXT, "Summary"));
    cols.add(new ColumnDescription("result", ValueType.NUMBER, "Result"));

    data.addColumns(cols);

    try {
        data.addRowFromValues("positive", positive, true);
        data.addRowFromValues("negative", negative, true);
        data.addRowFromValues("neutral", neutral, true);
      } catch (TypeMismatchException e) {
        System.out.println("Invalid type!");
      }
      return data;
} 
```

使用以下方法将其转换为 JSON：

```
String resultJson = new Gson().toJson(createResultsJSON()); 
```

结果 JSON 的一个示例是：

```
{
"columns":[
{"id":"summary","type":"TEXT","label":"Summary","pattern":""}, 
{"id":"result","type":"NUMBER","label":"Result","pattern":""}],
"columnIndexById":{"result":1,"summary":0},
"rows":[
{"cells":[{"value":{"value":"positive"}},{"value":{"value":362.0}}]},
{"cells":[{"value":{"value":"negative"}},{"value":{"value":302.0}}]},
{"cells":[{"value":{"value":"neutral"}},{"value":{"value":349.0}}]}],
"warnings":[]
} 
```

但是，根据 Google Chart JSON 规范，它应该类似于以下内容：

```
{
"cols": [
    {"id":"","label":"Topping","pattern":"","type":"string"},
    {"id":"","label":"Slices","pattern":"","type":"number"}
  ],
"rows": [
    {"c":[{"v":"Mushrooms","f":null},{"v":3,"f":null}]},
    {"c":[{"v":"Onions","f":null},{"v":1,"f":null}]},
    {"c":[{"v":"Olives","f":null},{"v":1,"f":null}]},
    {"c":[{"v":"Zucchini","f":null},{"v":1,"f":null}]},
    {"c":[{"v":"Pepperoni","f":null},{"v":2,"f":null}]}
  ] 
```

}

我已经尝试了多种不同的方法来在服务器端正确格式化 JSON，但仍然卡住了，我相信这是一个快速简单的修复，因此感谢您的帮助。

当查询获取 JSON 并尝试处理它时，它会显示“表没有列”

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:44:15.267

创建字符串而不是 json。该字符串放入请求范围并直接在 jsp(request.getAttribute()) 中获取该字符串；

```
var data = new google.visualization.DataTable(request.getAttribute()); 
```

我做了这个我得到了答案..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T20:17:41.997

使用 JSON Renderer 为数据表创建 Json，如下所示。

```
JsonNode root = null;
String json = JsonRenderer.renderDataTable(data, true, false).toString();

        try{
            JsonParser parser = new JsonFactory().createJsonParser(json)
                .enable(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES)
                .enable(JsonParser.Feature.ALLOW_SINGLE_QUOTES);
                 root = new ObjectMapper().readTree(parser);
            }catch(Exception e){
              e.printStackTrace();
            } 
```

返回根.toString();

Json 将是谷歌图表 api 所需的格式。它对我有用。

# android - 使用 xml 属性值作为字段名称和标记内容作为记录值从 XML 文件填充 SQLite 数据库

> ID：15571188
> 
> 赞同：2
> 
> 时间：2013-03-22T13:10:36.030
> 
> 标签：android, xml, sqlite

我想*使用 Android 从 XML 文件填充 SQLite 数据库*。但我不想使用元素标签的名称作为我的数据库中的字段名称，而是我想使用元素**属性的值，****作为数据库中的字段名称**（有时是记录值）和**内容的子元素作为记录值**。

让我通过提供一些关于 XML 的想法来尝试澄清一下：

```
<xml version="1.0" encoding="utf-8" ?>
  <itemset>
    <item item_identifier="identifier_code">
      <metadata schema="core">
        <property key="title">
          <text lang="en">Title Text</text>
        </property>
        <property key="category">
          <text lang="en">Book</text>
        </property>
        <property key="date">
          <date>1985/2002</date>
        </property>
        <property key="language">
          <text lang="en">English</text>
        </property>
        <property key="description">
          <text lang="en">This is the description</text>
        </property>
      </metadata>
      <metadata schema="another">
        <property key="originator">
          <text lang="en">The originator</text>
        </property>
        <!-- more property elements -->
      </metadata>
      <sequence>
        <metadata schema="core">
          <!-- similar to above -->
        </metadata>
        <metadata schema="another">
          <!-- similar to above -->
        </metadata>
        <image filename="the file name">
          <metadata schema="core">
            <!-- similar to above -->
          </metadata>
          <metadata schema="another">
            <!-- similar to above -->
          </metadata>
          <transcript lang="en">Translation of text on post card or whatever</transcript>
        </image>
      </secquence>
    </item>
    <item identifier="the identifier code here">
      <!-- repeat of something similar above, I'll provide more xml should anyone ask for it -->
    </item>
  </itemset>
</xml> 
```

从这里我想填充一个数据库，如下所示：

```
Table: metadata_core
|----|------------|----------|-----------|----------|-------------------------|-----------------|
| id | title      | category | date      | language | description             | item_identifier |
|----|------------|----------|-----------|----------|-------------------------|-----------------|
| 1  | Title Text | Book     | 1985/2002 | English  | This is the description | identifier_code |
|----|------------|----------|-----------|----------|-------------------------|-----------------|

Table: metadata_another <similar to metadata_core table>

Table: transcript
|----|----------------------------------------------|-----------------|
| id | transcript                                   | item_identifier |
|----|----------------------------------------------|-----------------|
| 1  | Translation of text on post card or whatever | identifier_code |
|----|----------------------------------------------|-----------------|

Table: parent_elements
|----|---------|----------|------------|---------------|---------------|----------|-----------------|
| id | exhibit | type     | md_core_id | md_another_id | transcript_id | resource | item_identifier |
|----|---------|----------|------------|---------------|---------------|----------|-----------------|
| 1  | 1       | sequence | 1          | 1             | null          | false    | identifier_code |
|----|---------|----------|------------|---------------|---------------|----------|-----------------|

Table: child_elements
|----|-----------|----------|------------|---------------|---------------|----------|-----------------|
| id | parent_id | type     | md_core_id | md_another_id | transcript_id | resource | item_identifier |
|----|-----------|----------|------------|---------------|---------------|----------|-----------------|
| 1  | 1         | image    | 2          | 2             | 1             | filename | identifier_code |
|----|-----------|----------|------------|---------------|---------------|----------|-----------------| 
```

这是可能的还是我应该修改我的数据库设计？

# html - 如何创建一个 html 表，其中标题 (th) 折叠所有列 (td)？

> ID：15571189
> 
> 赞同：0
> 
> 时间：2013-03-22T13:10:38.883
> 
> 标签：html

我想创建一个带有 th 标题和每行 4 个单元格的 html 表。

你是怎样做的？标题的宽度为 100%，单元格的宽度为 40%、10%、40%、10%。

```
<table width="100%">
  <tr><th width="100%">Header</th></tr>
  <tr>
     <td width="40%">text</td>
     <td width="10%">value</td>
     <td width="40%">text</td>
     <td width="10%">value</td>
  </tr>   
  <tr>
     <td width="40%">text</td>
     <td width="10%">value</td>
     <td width="40%">text</td>
     <td width="10%">value</td>
  </tr>   
  <tr>
     <td width="40%">text</td>
     <td width="10%">value</td>
     <td width="40%">text</td>
     <td width="10%">value</td>
  </tr>   
</table> 
```

![在此处输入图像描述](../Images/d3f94187bc6d1d303fcff1a3b7ba429a.png)

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:11:59.893

使用`colspan`属性：

```
<tr><th colspan="4">Header</th></tr> 
```

该`colspan`属性包含一个非负整数值，该值指示单元格扩展了多少列。它的默认值为 1；如果它的值设置为 0，它会一直延伸到最终隐式定义的单元格所属的末尾。高于 1000 的值将被缩减为 1000。

请参阅：[https ://developer.mozilla.org/en-US/docs/HTML/Element/th](https://developer.mozilla.org/en-US/docs/HTML/Element/th)

[mozilla.org](https://developer.mozilla.org/en-US/docs)上的开发者文档是最好的。下次从那里开始。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T13:12:36.080

您可以使用标签标题为表格创建标题。或使用属性 colspan="number of colls"

# asp.net-mvc - ServiceStack Funq MVC html 助手扩展

> ID：15571190
> 
> 赞同：2
> 
> 时间：2013-03-22T13:10:38.937
> 
> 标签：asp.net-mvc, servicestack, helper, funq

我正在尝试创建一个必须声明为静态类的 MVC html 帮助程序扩展，如下所示：

```
public static class PhotoExtension
{
    public static IPhotoService PhotoService { get; set; }
    public static IGalleryService GalleryService { get; set; }

    public static MvcHtmlString Photo(this HtmlHelper helper, int photoId, string typeName)
    {
         //[LOGIC GOES HERE]
         return new MvcHtmlString(..some resulting Html...);
    }
} 
```

现在，我想在该`Photo()`方法中使用 IPhotoService 和 IGalleryService。到目前为止，我发现如何在 AppHost.Configure() 中注入这些服务的唯一方法：

```
PhotoExtension.PhotoService = container.Resolve<IPhotoService>();
PhotoExtension.GalleryService = container.Resolve<IGalleryService>(); 
```

这行得通，尽管我很好奇是否有更好的方法来实现这一点。

`IPhotoService`和都`IGalleryService`以标准方式注册在`AppHost.Configure()`.

谢谢，安东宁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T22:07:42.753

更容易阅读/遵循，将它们连接到静态构造函数中？

```
using ServiceStack.WebHost.Endpoints;

public static class PhotoExtension
{
    public static IPhotoService PhotoService { get; set; }
    public static IGalleryService GalleryService { get; set; }

    static PhotoExtension()
    {
        PhotoService = EndpointHost.AppHost.TryResolve<IPhotoService>();
        GalleryService  = EndpointHost.AppHost.TryResolve<IGalleryService>();
    }

    public static MvcHtmlString Photo(this HtmlHelper helper, int photoId, string typeName)
    {
     //[LOGIC GOES HERE]
     return new MvcHtmlString(..some resulting Html...);
    }
} 
```

# acl - 思科交换机：如何将整个文件（或部分）复制到访问列表？

> ID：15571192
> 
> 赞同：0
> 
> 时间：2013-03-22T13:10:45.510
> 
> 标签：acl, cisco

需要帮助：我找到了如何将带有 ACL 规则的文件作为文件复制到交换机。但我不知道如何允许我的文件数据访问列表。有人知道我该怎么做吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:36:17.337

```
copy flash:filename running-config 
```

将您复制到交换机“flash”文件系统的文件合并到运行配置中**。**

# c# - 仅使用 Spring.net.Social

> ID：15571194
> 
> 赞同：0
> 
> 时间：2013-03-22T13:10:47.497
> 
> 标签：c#, .net, facebook, linkedin, spring.net

我们的应用程序使用 Prism/MEF，现在我们需要绑定到 twitter/facebook/linkedin/google+ 等。

Spring.Net 社交库似乎包含了其中一些，所以问题是 -

是否可以*仅*使用wpf 应用程序中的 spring.social ？

或者，任何其他包含一些社交 API 的库？

我们发现的另一个库是 socialauth.net，但它主要用于网络应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:22:41.310

Afaik，你不需要使用 spring.net 依赖注入框架来使用 spring.social；它只依赖于 spring.rest （它又没有依赖关系）。因此，您应该能够将它与 Prism/MEF 或您使用的任何框架一起使用。

查看[nuget 包](http://nuget.org/packages?q=spring.social)- 似乎支持 atm Twitter、LinkedIn 和 Dropbox，因此并未满足您的所有要求。

目前看来，facebook lpugin[正在开发中](https://github.com/SpringSource/spring-net-social-facebook)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:58:30.533

是的，您可以单独使用 Spring.NET Social，如示例中所示。

# asp.net-mvc - Web API 将 Object 传递给 Get 方法

> ID：15571195
> 
> 赞同：18
> 
> 时间：2013-03-22T13:10:47.773
> 
> 标签：asp.net-mvc, asp.net-web-api

有没有办法在 Web API 的 Get 方法中将对象作为参数传递？我有以下情况：

在我的 Web.API 项目中，Get 方法如下所示：

```
public IEnumerable<ArticleMetaData> GetComponentXMLByDate(ComponentRequest request)
        {
           // Some logic here
            return articleMeta;
        } 
```

我的 ComponentRequest 对象看起来像：

```
public class ComponentRequest
    {        
        public string startdate { get; set; }
        public string enddate { get; set; }       
        public string pagenumber { get; set; }
        public string pagesize { get; set; }
    } 
```

我试图这样称呼它：

> [http://mydomain.com/api/values/?startdate=121922&enddate=063020&pagenumber=2&pagesize=100](http://mydomain.com/api/values/?startdate=121922&enddate=063020&pagenumber=2&pagesize=100)

在 ComponentRequest 方法中，请求为空。如果我将方法更改为接受多个字符串参数而不是对象，则它可以正常工作。

我的设置中缺少什么吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-22T13:31:08.257

我觉得

```
public IEnumerable<ArticleMetaData> GetComponentXMLByDate([FromUri]ComponentRequest request)
{
    // Some logic here
    return articleMeta;
} 
```

应该管用。

Mike Stall 有一篇关于[webapi-does-parameter-binding的好文章](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-22T13:29:58.017

您需要使用`[FromUri]`属性。

看下面的问题。 [ASP.NET MVC Web Api 获取未将 QueryString 映射到强类型参数](https://stackoverflow.com/questions/12589988/asp-net-mvc-web-api-get-not-mapping-querystring-to-strongly-typed-parameter)

# mysql - Mysql：如何检查对的唯一性

> ID：15571199
> 
> 赞同：5
> 
> 时间：2013-03-22T13:11:05.590
> 
> 标签：mysql, sql

```
 CREATE TABLE nodes (
        id INTEGER PRIMARY KEY,
        name VARCHAR(10) NOT NULL,
        feat1 CHAR(1), -- e.g., age
        feat2 CHAR(1)  -- e.g., school attended or company
   );

   CREATE TABLE edges (
        a INTEGER NOT NULL REFERENCES nodes(id) ON UPDATE CASCADE ON DELETE CASCADE,
        b INTEGER NOT NULL REFERENCES nodes(id) ON UPDATE CASCADE ON DELETE CASCADE,
        PRIMARY KEY (a, b)
   );

   CREATE INDEX a_idx ON edges (a);
   CREATE INDEX b_idx ON edges (b); 
```

如果我们想表示一个无向图，我们需要对对的唯一性添加一个 CHECK 约束。

由于 SQL 标准不允许在 CHECK 约束中使用子查询，我如何检查该对的唯一性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T21:53:52.487

您可以安装一个触发器，该触发器在看到`(A,B)`or时失败`(B,A)`：

这是触发器：

```
DELIMITER $$
CREATE TRIGGER edges_bi BEFORE INSERT
ON edges FOR EACH ROW
BEGIN
    DECLARE found_count,dummy,diff,SomethingsWrong INT DEFAULT 0;
    DECLARE errmsg VARCHAR(128);
    SET diff = new.a - new.b;
    IF diff = 0 THEN
        SET errmsg = CONCAT('[',new.a,',',new.b,'] is Vertex, Not Edge');
        SET SomethingsWrong = 1;
    END IF;
    SELECT COUNT(1) INTO found_count FROM edges
    WHERE (a=NEW.a AND b=NEW.b) OR (a=NEW.b AND b=NEW.a);
    IF found_count = 1 THEN
        SET errmsg = CONCAT('[',new.a,',',new.b,'] Already Exists');
        SET SomethingsWrong = 1;
    END IF;
    IF SomethingsWrong = 1 THEN
        SELECT errmsg INTO dummy FROM edges WHERE 1=1;
    END IF;
END; $$
DELIMITER ; 
```

这是一个示例表：

```
DROP DATABASE if exists saurabh;
CREATE DATABASE saurabh;
USE saurabh
CREATE TABLE edges
(
   a INTEGER NOT NULL,
   b INTEGER NOT NULL,
   PRIMARY KEY (a,b),
   UNIQUE KEY (b,a)
); 
```

请注意，我有一个 PRIMARY KEY 和一个 UNIQUE KEY，其中 PRIMARY KEY 的列颠倒了

让我们创建表：

```
mysql> DROP DATABASE if exists saurabh;
Query OK, 1 row affected (0.01 sec)

mysql> CREATE DATABASE saurabh;
Query OK, 1 row affected (0.00 sec)

mysql> USE saurabh
Database changed
mysql> CREATE TABLE edges
    -> (
    ->    a INTEGER NOT NULL,
    ->    b INTEGER NOT NULL,
    ->    PRIMARY KEY (a,b),
    ->    UNIQUE KEY (b,a)
    -> );
Query OK, 0 rows affected (0.12 sec)

mysql> 
```

让我们创建触发器：

```
mysql> DELIMITER $$
mysql> CREATE TRIGGER edges_bi BEFORE INSERT
    -> ON edges FOR EACH ROW
    -> BEGIN
    ->     DECLARE found_count,dummy,diff,SomethingsWrong INT DEFAULT 0;
    ->     DECLARE errmsg VARCHAR(128);
    ->     SET diff = new.a - new.b;
    ->     IF diff = 0 THEN
    ->         SET errmsg = CONCAT('[',new.a,',',new.b,'] is Vertex, Not Edge');
    ->         SET SomethingsWrong = 1;
    ->     END IF;
    ->     SELECT COUNT(1) INTO found_count FROM edges
    ->     WHERE (a=NEW.a AND b=NEW.b) OR (a=NEW.b AND b=NEW.a);
    ->     IF found_count = 1 THEN
    ->         SET errmsg = CONCAT('[',new.a,',',new.b,'] Already Exists');
    ->         SET SomethingsWrong = 1;
    ->     END IF;
    ->     IF SomethingsWrong = 1 THEN
    ->         SELECT errmsg INTO dummy FROM edges WHERE 1=1;
    ->     END IF;
    -> END; $$
Query OK, 0 rows affected (0.11 sec)

mysql> DELIMITER ; 
```

以下是一些示例数据：

```
INSERT INTO edges (a,b) VALUES (5,3);
INSERT INTO edges (a,b) VALUES (3,3);
INSERT INTO edges (a,b) VALUES (3,5);
INSERT INTO edges (a,b) VALUES (5,5);
SELECT * FROM edges; 
```

让我们尝试将这些加载到`edges`表中：

```
mysql> INSERT INTO edges (a,b) VALUES (5,3);
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO edges (a,b) VALUES (3,3);
ERROR 1366 (HY000): Incorrect integer value: '[3,3] is Vertex, Not Edge' for column 'dummy' at row 1
mysql> INSERT INTO edges (a,b) VALUES (3,5);
ERROR 1366 (HY000): Incorrect integer value: '[3,5] Already Exists' for column 'dummy' at row 1
mysql> INSERT INTO edges (a,b) VALUES (5,5);
ERROR 1366 (HY000): Incorrect integer value: '[5,5] is Vertex, Not Edge' for column 'dummy' at row 1
mysql> SELECT * FROM edges;
+---+---+
| a | b |
+---+---+
| 5 | 3 |
+---+---+
1 row in set (0.00 sec) 
```

请注意，阻塞 A=B 条件可防止任何自循环

# 警告

此触发器不起作用，如果

*   你从一张空桌子开始
*   `(3,3)`作为第一行输入

因为`BEFORE INSERT`触发器不会在空表上触发。

使用`A`<>输入有效行`B`后，所有检查都会正确执行。

试试看 ！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T13:16:41.787

MySQL 不支持 CHECK 约束。

您可以创建 BEFORE INSERT 和 BEFORE UPDATE 触发器来检查这种情况，并在需要时抛出错误。

例子：

```
CREATE TABLE edges(
  a INT(11) NOT NULL,
  b INT(11) NOT NULL
);

DELIMITER $$

CREATE TRIGGER trigger1
BEFORE INSERT
ON edges
FOR EACH ROW
BEGIN
  SET @cnt = NULL;

  SELECT COUNT(*) INTO @cnt FROM edges
    WHERE a = new.a AND b = new.b OR a = new.b AND b = new.a;

  IF @cnt > 0 THEN
    SIGNAL SQLSTATE '02000' SET MESSAGE_TEXT = 'Error: uniqueness of pair';
  END IF;
END
$$

DELIMITER ; 
```

此外，创建类似的 BEFORE UPDATE 触发器以避免更新时出现新的错误值，或者只使用存储过程，因为代码是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T13:59:54.183

`CHECK``CREATE TABLE`MySQL不支持，如[文档](http://dev.mysql.com/doc/refman/5.5/en/create-table.html "mysql 创建表文档")所述

> CHECK 子句被所有存储引擎解析但忽略

事实上，自 2004 年以来就有一个关于该问题的[开放错误报告](http://bugs.mysql.com/bug.php?id=3464 "在检查约束上打开错误")（！）。

我将采取的方法是在插入和更新时创建一个存储过程触发器，如果​​该对存在，则故意失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T16:00:01.473

我认为答案可能取决于您如何填充`edges`表格，这在您的问题中并不清楚。如果它是从`nodes`表中填充的，那么您可以基于排除镜像对（即 1,2 和 2,1）的 SELECT 查询构建一个 VIEW。这也可能解决级联和删除要求。

# javascript - 移动设备上 window.prompt 的不一致阻止行为

> ID：15571202
> 
> 赞同：4
> 
> 时间：2013-03-22T13:11:07.420
> 
> 标签：javascript, mobile, alert, prompt

```
<script type="text/javascript">
    var x = prompt("enter x");
    var y = prompt("enter y");
    alert(x + " " + y);
</script> 
```

这个非常简单的代码会提示用户输入`x`，然后输入`y`，然后显示带有两个值的警报。在桌面浏览器上，这可以正常工作，因为`window.prompt`并且`window.alert`正在阻塞。

通过移动设备（本文末尾的用户代理）查看时，第一个提示被阻止，但是当我点击“确定”时，第二个提示没有被阻止，因此警报会立即弹出以下消息（假设我`5`在第一个提示中输入):

```
5 null 
```

为什么会这样？能解决吗？

现场示例：http: [//jsfiddle.net/YEA5w/](http://jsfiddle.net/YEA5w/)

> Mozilla/5.0 (Linux; U; Android 2.3.5; en-gr; HTC_WildfireS_A510e Build/GRJ90) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T12:17:50.393

作为记录，在我的三星 Galaxy S2 和 Firefox 浏览器上，你的小提琴对我来说都很好。

如果您仍然遇到问题，也许您可​​以使用`setTimeout`或`setInterval`不断检查这些提示是否已填写，如果有，请发出警报。

就像是：

```
<script>
    var x = false;
    var y = false;
    var timer = setInterval(function(){
            if(x !== false && y !== false) {
                 alert(x + " " + y);
                 clearInterval(timer);
            }
    },100);
    x = prompt("enter x");
    y = prompt("enter y");
</script> 
```

# java - 将日历对象更改为字符串

> ID：15571203
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:11:09.313
> 
> 标签：java, date, object, calendar

我在将日历更改为字符串时遇到问题。当我运行该程序时，日历不会更改为日期。这是我的代码：

```
switch(selection){
    case 1:
        Calendar cal = Calendar.getInstance();
        cal.getTime().toString();
        LifeTimeMembers lifetime = new LifeTimeMembers();
        lifetime.setName(name);
        lifetime.setSurname(surname);
        lifetime.setAddress(address);
        lifetime.setJoinDate(cal);
        members.add(lifetime);
        break;
    case 2:
        cal.add(Calendar.YEAR, 1);
        YearlyMembers yearly = new YearlyMembers(name, surname, address, cal);
        members.add(yearly);
        break;
}
System.out.println("Member added"); 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:34:55.623

首先格式化即将到来的日期。

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MMM-dd");
Date d=dateFormat.format(cal); 
```

将该日期解析为字符串

```
String dateAsStr = dateFormat.format(d); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:15:07.033

`cal.getTime().toString();`正在返回一个值，但您没有对它做任何事情。

而是做类似的事情

`String timeAsString = cal.getTime().toString();`然后`timeAsString`在你的程序中使用你喜欢的任何方式。

您可以看到[Date.toString()](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#toString%28%29)的默认格式。如果要对其进行格式化，请查看[DateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)类的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:13:22.353

我不确定你想要什么，但也许这会做到：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MMM-dd");
dateFormat.setLenient(false);
Date d = cal.getTime();
String dateAsStr = dateFormat.format(d); 
```

# mysql - 将列值组合在一个单元格中

> ID：15571207
> 
> 赞同：1
> 
> 时间：2013-03-22T13:11:14.747
> 
> 标签：mysql, sql

我需要编写一个 SQL 选择语句，将一列中的值组合到一个单元格中。

例如

```
table name: Customer_Hobbies
+------------+------------+-----------+
| CustomerId |     Age    |  Hobby    |
+------------+------------+-----------+
| 123        |     17     |  Golf     |
| 123        |     17     |  Football |
| 324        |     14     |  Rugby    |
| 627        |     28     |  Football |
+------------+------------+-----------+ 
```

应该回来...

```
+------------+------------+----------------+
| CustomerId |     Age    |  Hobbies       |
+------------+------------+----------------+
| 123        |     17     |  Golf,Football |
| 324        |     14     |  Rugby         |
| 627        |     28     |  Football      |
+------------+------------+----------------+ 
```

这可能吗？

注意我知道数据的排列方式不是特别合理，但我无法改变这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:12:38.260

你想要`group_concat()`：

```
select customerId, age, group_concat(hobby) as hobbies
from t
group by customerId, age 
```

# jquery - 如何使用 JQuery 禁用按钮？

> ID：15571209
> 
> 赞同：0
> 
> 时间：2013-03-22T13:11:18.657
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我正在开发 MVC 应用程序。我有复选框和提交按钮。

我想在复选框的选中事件上启用提交按钮，而在未选中的提交按钮上应该禁用。

这个怎么做 ？

我有以下代码....

```
 @model PaymentAdviceEntity.Account
    @using PaymentAdviceEntity;

    @{
        ViewBag.Title = "Create";
        PaymentAdvice oPA = new PaymentAdvice();
        oPA = (PaymentAdvice)ViewBag.PaymentAdviceObject;

      <div>
             <input type="checkbox" class="optionChk" value="1" /> Paid
        </div>

    <input type="submit" value="Create"  />
    <input type="button"  class="btn-primary" />
    }

    <script type="text/javascript">
$(".optionChk").on("change", function () {
    if ($(this).is(":checked"))
    {
        alert("1");

        $(".SubmitButton").attr("disabled", "disabled"); 
    } else 
    {
        alert("2");

        $(".SubmitButton").attr("enable", "enable"); 
    }    
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:40:40.200

您应该使用[prop](http://api.jquery.com/prop/)来设置/获取 disabled 属性

```
$(".optionChk").on("change", function () {
     $("input[type=submit]").prop("disabled",!this.checked);   
}); 
```

此外，您的提交按钮没有 class='Submit' 因此您需要使用属性选择器.. 或给它 class='Submit' 并使用`$('.Submit')`代替`$('input[type=submit]')`

[小提琴](http://jsfiddle.net/wirey00/vWCzU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:22:04.763

尝试这个：

```
$(function(){
    $('.optionChk').click(function(){
        $('input[type="submit"]').toggle('fast');
    });

}); 
```

和 HTML：

```
<div>
         <input type="checkbox" class="optionChk" value="1" checked="checked" /> Paid
    </div>

<input type="submit" value="Create"  /> 
```

工作[小提琴](http://jsfiddle.net/jS72j/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:16:16.750

尝试这个：

```
$(".optionChk").on("change", function () {
    if ($(this).is(":checked")) {
        $("input[type=submit]").removeAttr("disabled");
    } else {
        $("input[type=submit]").attr("disabled", "disabled");
    }    
}); 
```

[JSFiddle](http://jsfiddle.net/3LAxr/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-07T12:20:00.370

禁用提交按钮：

```
$(".optionChk").on("change", function () {

if ($(this).is(":checked")) 
{
$("input[type='submit']").attr('disabled',false); //button will be enabled
}
else
{
$("input[type='submit']").attr('disabled',true); //button will be disabled
}
}) 
```

启用或禁用提交按钮的代码：

```
$("input[type='submit']").attr('disabled',true); //button will be disabled 
```

# c# - 如何在 GridView 的单击行中找到存在的任何控件？

> ID：15571215
> 
> 赞同：0
> 
> 时间：2013-03-22T13:11:30.893
> 
> 标签：c#, asp.net, sql, gridview

我正在尝试创建嵌套评论。下面的代码给了我索引超出范围。必须是非负数且小于集合的大小。参数名称：索引

```
protected void GridViewRowCommand(Object sender, GridViewCommandEventArgs e)
{
    var scrapId = Int32.Parse(e.CommandArgument.ToString());
    switch (e.CommandName)
    { 
        case "comment":
            int index = Convert.ToInt32(e.CommandArgument);
            GridViewRow gvRow = GridViewUserScraps.Rows[index];
            TextBox txtcomment = (TextBox)GridViewUserScraps.Rows[index].FindControl("txtcomment");

            string postcomment = "Insert INTO comment (FromId,ToId,PostId,CommentMsg) VALUES('" + Session["UserId"].ToString() + "','" + Request.QueryString["Id"].ToString() + "','" + scrapId + "','"+txtcomment.Text+"')";
            dbClass.ConnectDataBaseToInsert(postcomment);

            break;
    }
} 
```

数据键名是 ..`DataKeyNames="ScrapId"`

我想传递与我单击发布的按钮位于同一行的文本框的值。

按钮：

```
<asp:Button ID="Button1" runat="server" Text="Comment" CommandName="comment" 
                                        CommandArgument='<%# Eval("ScrapId")%>' /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:34:59.640

尝试获取行索引，例如：

```
GridViewRow gvr = (GridViewRow)(((Button)e.CommandSource).NamingContainer);
int index = gvr.RowIndex; 
```

通常`commandArgument`，默认情况下包含 rowIndex，但在您的情况下，您将在标签中覆盖它，使用`Eval("ScrapId")`.

这`e`是一个对象，其中包含有关已触发事件的信息。`ComandSource`是触发事件的源控件，在您的情况下是 Button，因此我们将其转换为 Button。然后，我们有`NamingContainer`, 即包装您的 Button 的服务器控件，在本例中为`GridViewRow`.

使用`GridViewRow`，我们可以在事件发生时直接访问活动行，并且我们有更多关于该行的数据，包括当前`RowIndex`

# c++ - 抛出异常的异常

> ID：15571216
> 
> 赞同：2
> 
> 时间：2013-03-22T13:11:31.973
> 
> 标签：c++, exception

在 C++ 中处理异常时，我注意到一个奇怪的行为，我希望这里有人能解释一下。看下面的代码：

```
class Foo
{
public:

    Foo()
    {
        throw 0;
    }
};

class RandomException
{
public:

    Foo f;
};

void bar()
{
    throw RandomException();
}

// Case #1
int main()
{
    bar();
    return 0;
} 
```

在上述情况下，我有一个未处理的异常。现在，如果我将`main`函数的主体更改为：

```
// Case #2
int main()
{
    try
    {
        bar();
    }
    catch (int)
    {
    }

    return 0;
} 
```

我正在接受这个例外。没有未处理的异常，代码运行良好。如果我将代码更改为：

```
// Case #3
int main()
{
    try
    {
        bar();
    }
    catch (RandomException&)
    {
    }

    return 0;
} 
```

现在我又遇到了一个未处理的异常。

我想知道为什么在案例 #2 中我没有未处理的异常，而在案例 #3 中我有，即使在这两种情况下我都抛出了 2 个异常，一个`int`和一个 type `RandomException`。

抛出异常同时抛出异常时，C++如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:17:53.827

在这里，`RandomException`对象的构造失败并出现异常，因此`throw RandomException()`永远不会完成并`int`抛出（0）（在构造过程中`RandomException`）。

如果您有一个处理程序（如案例＃2），控制将转移到该处理程序。如果不是（如案例#3），`std::terminate()`将被调用。

# c - C 预处理器指令的 Lex 规则

> ID：15571218
> 
> 赞同：3
> 
> 时间：2013-03-22T13:11:34.623
> 
> 标签：c, c-preprocessor, lex

我正在编写一个 lex 程序来标记**C**程序。我编写了以下规则来匹配**C**预处理器指令

```
 #.*                             {printf("\n%s is a PREPROCESSOR DIRECTIVE",yytext);} 
```

但是当我使用文件作为 yyin 的输入时，文件中的预处理器指令与 yytext 匹配，显示为空

例如我得到

```
is a PREPROCESSOR DIRECTIVE 
```

***yyin***是**标准输入**时没有问题，但这仅在输入文件时出现。有替代的 LEX 规则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:27:45.063

专注于它不适用于文件而不是 lex 规范的事实，因为这更有可能导致问题。`printf`文件中的应`lex`始终至少打印`#`. 以下内容适用于文件：

```
%{
#include <stdio.h>
%}
%%
#.* { printf("'%s' preproc\n", yytext); }
%%

int yywrap(void)
{
        return 1;
}

int main(int argc, char ** argv)
{
        if (argc > 1)
        {
                if ((yyin = fopen(argv[1], "r")) == NULL)
                {
                        fprintf(stderr, "Can't open `%s'.\n", argv[1]);
                        exit(1);
                }
        }
        return (yylex());
} 
```

# asp.net - 在 Windows azure 上托管多个项目和服务

> ID：15571219
> 
> 赞同：2
> 
> 时间：2013-03-22T13:11:35.860
> 
> 标签：asp.net, azure, webforms

我有一个基于 ASP.NET 4.0 Web 窗体的电子商务应用程序，我想将该站点迁移到 Windows Azure。

> 我的应用程序中有 6 个项目：
> 
> *   MyApp.UserWeb - *我的主页项目
> *   MyApp.AdminWeb - *管理网络应用程序
> *   MyApp.Services - UserWeb 和 AdminWeb 应用程序使用的 WCF 服务
> *   其他 3 个类似于上述 3 个项目中引用的不同层，例如 BusinessObjects、DataAccess 和 Security。

我想将 MyApp.UserWeb 部署和发布为 www.mysite.com 并将 MyApp.AdminWeb 部署为 www.admin.mysite.com 并将服务托管为 services.mysite.com

您能否建议从 Visual Studio 2010 部署和发布站点的步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:30:47.453

您可以将应用程序的三个组成部分发布到它们自己的网络角色中。然后，在您的 DNS 设置中，您可以为 www、www.admin 和服务设置 CNAME 记录，以指向每个 Web 角色的相应虚拟 IP。还需要在门户中为每个角色配置 CNAME。

[为 Windows Azure 云服务或存储帐户配置自定义域名](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/)

You may also required multiple instances for the front-end (or other mission critical areas) of your site to guarantee the SLA of 99.95% availability.

The above configuration will give you a decent amount of compute resources for your application and will scale nicely. If you'd prefer to start with a lower cost solution I would suggest running the 3 components on one web-role and adding the 3 CNAMEs.

Azure Websites will be even cheaper again, but this feature is still in preview and has no SLA.

[For step-by-step deployment instructions have a look here.](http://blogs.msdn.com/b/jnak/archive/2010/02/08/migrating-an-existing-asp-net-app-to-run-on-windows-azure.aspx)

You will also need to [download the Azure SDK for Visual Studio 2010](http://www.windowsazure.com/en-us/downloads/):

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:19:47.497

您可以使用 Windows Azure 网站（共享或保留模式以允许自定义域名）或 Web 角色（云服务）来执行此操作。网站或云服务上的选择因您想要的控制和管理级别而异。

以下是有关为网站设置自定义域名的一些信息：http: [//www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)

# css - CSS - 清除修复不起作用

> ID：15571220
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:11:35.890
> 
> 标签：css, clearfix

我正在对父级 (ul) 应用明确的修复，但它不起作用

当设置 display:block; 到a，然后清除修复有效，但是为什么呢？[这里](http://jsbin.com/ajobez/2/edit)的代码

HTML

```
<nav>
 <ul class="hmenu main-menu group">
   <li><a href="#" class="active">home</a>
   <li><a href="#">services</a>
   <li><a href="#">pricing</a>
   <li><a href="#">portfolio</a>
   <li><a href="#">blog</a>
   <li><a class="no-border last-menu-item" href="#">contact</a>
  </ul>
 </nav>
 <span>sadfsdafsdaf</span> 
```

CSS

```
.group:after {
     visibility: hidden;
     display: block;
     font-size: 0;
     content: " ";
     clear: both;
     height: 0;
     }
.group { display: inline-block; }
/* start commented backslash hack \*/
* html .group { height: 1%; }
.group { display: block; }
/* close commented backslash hack */
/*
.group:after {
 content: ""; display: table; clear: both; }
*/

.hmenu li{
 float: left;
 display: inline;
 list-style-type: none;
}
a{
 text-decoration:none;
}

.main-menu{
 width: 940px;
 padding: 0;
 border-top:1px solid #4d4d4d;
  background:#3c3c3c;
}
.main-menu a{
 color: #fff;
/*display:block;*/
 padding: 20px 30px;
 border-right:1px solid #5b5b5b;
}
a.last-menu-item{
 margin-right:181px;

}
.main-menu a.active{
 background:#000;
}
a.no-border{
 border: none;
}
a.lang{
 padding:20px 11px;
}
span{padding:10px 10px;
  margin:20px 30px;
background:red;
height:100px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:19:48.667

尝试设置

```
display: inline-block; 
```

对于跨度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:25:33.310

锚点上的填充不适用，因为锚标记是内联显示的，因此当您将锚点设置为显示块时，填充会应用。

# c++ - C++：编译某些代码所需的前向类定义

> ID：15571221
> 
> 赞同：3
> 
> 时间：2013-03-22T13:11:40.357
> 
> 标签：c++, visual-c++, forward-declaration

我正在用 C++ 编写一个小游戏作为练习，我遇到了一个难题。基本思想是 a`Level`有一个`vector`of `Entity`，每个`Entity`实例都知道它属于哪个级别。到目前为止非常简单。

我在我的 Entity 类中遇到了一些令人讨厌的编译错误，因为它无法弄清楚是什么`Level`。在声明之前的一个简单的**前向类声明**`Entity`很容易解决这个问题。但是，我已经包含`"Level.h"`在`"Entity.h"`. And `Level`and`Entity`都在同一个命名空间中声明和定义。

注：`Entity.h`还包括`Level.h`.

```
#include "Level.h"

namespace GameNS {

  // Required, otherwise the compiler complains
  class Level;

  class Entity
  {
  public:
  ... 
```

`Level`编译器不应该在它到达时已经知道是什么`Entity`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T13:14:33.420

不，这不是 C++ 编译器的工作方式。它的作用是基本上一次通过一个翻译单元的文件。TU 松散地说，是一个包含所有内容的实现文件。

如果你在`Level.h`and中包含了守卫`Entity.h`（你可能会这样做）并且它们相互包含，根据顺序，其中一个将被编译器遗漏，并且其中一个名称将不会被声明。

根据经验，尽可能使用前向声明，并且`include`在必须的地方使用。

# android - Android：BitmapFactory.nativeDecodeAsset 处的 OutOfMemoryError（Honeycomb 3.0 及更高版本）

> ID：15571228
> 
> 赞同：0
> 
> 时间：2013-03-22T13:11:52.800
> 
> 标签：android, android-listview, out-of-memory, heap-memory, dalvik

由于 Android 在 Android 3.0 中引入了新的位图内存管理（位图数据现在[在 Dalvik Heap](http://www.google.com/events/io/2011/sessions/memory-management-for-android-apps.html)中分配），我得到了这个 OutOfMemoryError 错误，它使我的应用程序崩溃。

基本上我有一个 ListView 大约。1000 个 ImageViews 包含我的资产文件夹中的位图（分辨率：300 x 200 像素）。

我在运行 Jelly Bean 的 HTC Desire 上检测到了这个问题。如果我滚动到快，我的应用程序的 Pro 版本会崩溃。（免费版列表中只有 150 项）我尝试在模拟器中重现错误，发现 Android 3.0 及更高版本中 DDMS 的垃圾收集消息不像我的旧 2.3.6 智能手机上的 GC_EXTERNAL_ALLOC （它运行应用程序没有任何问题）。因此，大量数据的内存大小是不够的。我不认为 ListView 真的将所有的 Bitmaps 都保存在内存中，但是 150 个 Items 和 1000 个 Items 之间肯定是有区别的。

我尝试在我的列表适配器中对 GetView() 执行 AsyncTask，但随后 OutOfMemory 发生在 AsyncTask 线程中。所以我对此无能为力......

有人有解决这个问题的想法吗？

[谷歌的开发指南](http://developer.android.com/training/displaying-bitmaps/index.html)对我没有帮助

# **编辑：**

好的，我对我的APP进行了MAT分析，似乎不是导致问题的ListView，而是我的ViewFlipper。

我的 MainMenu、我的 SearchScreen、我的 SearchResults（ListView 和 GridView - 可切换）和我的DetailedView 都是我的 ViewFlipper 的单个“页面”。

MainMenu、SearchScreen 和DetailedView 占用了我大约20 MB 的内存。我从代码中提取了 List- 和 Gridview，看起来它们占用了 8MB 到 13MB 的空间（取决于执行滚动的速度）。

Android SDK 模拟器（模拟 4.2）的 VM 堆大小为 32MB。所以最初它可以工作，如果我滚动到快速，我会遇到内存不足，并显示错误消息：

```
skia decoder->decode returned false 
```

其次是各种 Bitmap-decode-OutOfMemory 问题。

**所以我想我必须卸载/缓存我的 ViewFlipper 的页面 - 对吧？怎么做？？？**

这是 ListView/GridView 实现的提取源代码。

```
public class GridTestActivity extends Activity {

    GridView gv;
    ListView lv;
    int lvScreenWidth;
    int lvScreenHeight;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_grid_test);

        Display display = getWindowManager().getDefaultDisplay(); 
        this.lvScreenWidth  =  display.getWidth();
        this.lvScreenHeight  =  display.getHeight();

        MyAdapter adp = new MyAdapter(this);

        gv = (GridView)findViewById(R.id.gridView1);
        gv.setAdapter(adp);
        gv.setFastScrollEnabled(true);

        lv = (ListView)findViewById(R.id.listView1);
        lv.setAdapter(adp);
        lv.setFastScrollEnabled(true);

        ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
        Toast.makeText(this, "DALVIK HEAP SIZE: " + am.getMemoryClass() + "MB", 5).show();

    }

    static class ViewHolder{
         TextView text;
         ImageView icon;
    }

    public class MyAdapter extends BaseAdapter{

        private LayoutInflater mInflater;

        public MyAdapter(Context context) {
            mInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        @Override
        public int getCount() {
            return 1000;
        }

        @Override
        public Object getItem(int arg0) {
            return null;
        }

        @Override
        public long getItemId(int position) {
            return 0;
        }

        @Override
        public boolean hasStableIds() {
            return true;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder;

            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.list_item_icon_text, parent, false);
                holder = new ViewHolder();
                holder.text = (TextView) convertView.findViewById(R.id.text);
                holder.icon = (ImageView) convertView.findViewById(R.id.icon);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.text.setText("pos:" + position);

            // best way to load an asset-image???
            try {
                InputStream ims = getAssets().open("assetpic_" + position + ".jpg");
                BitmapDrawable d = (BitmapDrawable) Drawable.createFromStream(ims, null);
                ims.close();
                holder.icon.setImageDrawable(d);

                if (parent.equals(lv)){   
                    int oldWidth = d.getIntrinsicWidth();
                    int oldHeight= d.getIntrinsicHeight();
                    holder.icon.getLayoutParams().height = lvScreenWidth * oldHeight/oldWidth;
                }

            }
            catch(IOException ex) {
                Log.i("MyAdapter" , "Could not load 'assetpic_" + position + ".jpg' from Assets-folder");
            }

            return convertView;
        }

    }

} 
```

我不确定，但也许我错过了我的代码的一些细节？

## [完整源代码 (25MB)](http://www.cip.ifi.lmu.de/~aucha/GridListTest.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:15:54.553

您应该在不使用时回收位图。

```
bitmap.recycle(); 
```

您可以使用通用图像加载器。[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

您可以使用延迟加载图像。[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。

两者都使用缓存。

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。演讲内容是关于内存管理、回收位图以及如何使用 MAT Analyzer 检测内存泄漏。

[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。使用 View Holder 进行平滑滚动。

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。谈话是关于视图持有者和列表视图的性能。

正如您所提到的，您已经有效地完成了位图的显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:17:16.163

这可能不是一个适当的解决方案，但这就是我现在必须提供的全部。添加你的清单（在应用程序标签中）

```
android:largeHeap="true" 
```

这可能会在一定程度上解决您的内存不足问题。如果您显示您的适配器和列表视图对，我可能会告诉一些更合法的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:42:02.750

问题是 AsyncTask 仅适用于少数图像，对于数百（或数千）图像它们处理得不是很好。

缓存肯定是绝对必要的，在您发布的 Google 链接上，有关于 RAM 和磁盘缓存的解释。

对于像这样的大型数据集，您实际上有两个选择：

1.  使用库（例如 Universal Image Loader 或 Lazy List），它们并不完美，但它们在大多数情况下都运行良好。

2.  创建自己的实现。我之前已经实现了这些，我希望它们不是公司 IP 的一部分，因为我想开源它。但是您必须为从一个缓存或另一个缓存或从在线加载的线程实现几组线程（使用[Executors](https://developer.android.com/reference/java/util/concurrent/Executors.html)）并返回结果并记住如果该 ImageView 正在被回收，则取消返回。这是一个漫长而复杂的过程，但如果你做得对，你会得到一些非常流畅的滚动。

# c# - 在 taglib-sharp.DLL WP8 中发生“System.TypeLoadException”

> ID：15571229
> 
> 赞同：-2
> 
> 时间：2013-03-22T13:11:52.687
> 
> 标签：c#, windows-phone-8

当我要在 WP8 中使用 TagLib 创建文件时，发生此错误

> *在 taglib-sharp.DLL 中发生 System.TypeLoadException' 类型的第一次机会异常*

在给定的第一行

```
TagLib.File f = TagLib.File.Create(Path);

f.Tag.Album = "New Album Title";
f.Save(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:35:56.400

简短的回答是`File`您的库中的类型`TagLib`与 Windows Phone 8 不兼容。

很可能您没有为库使用正确的程序集类型/版本。

# android - 加速度计值 Android

> ID：15571230
> 
> 赞同：0
> 
> 时间：2013-03-22T13:11:54.030
> 
> 标签：android, accelerometer

我正在开发一个 Android 应用程序，并且正在使用加速度计值。我用了这个方法

```
if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
    System.out.println("X: " + event.values[0]);
    System.out.println("Y: " + event.values[1]);
    System.out.println("Z: " + event.values[2]);
} 
```

我的值似乎从 -10 到 10 不等。在我的应用程序中，我需要使用一个[数据集](http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones)，其中包含来自加速度计的三轴加速度（总加速度）和估计的身体加速度。然而，这两个值似乎从 -1 到 1 不等，因此根本不符合我的值。你能告诉我如何转换我的值以匹配数据集的值（以便我可以比较它们）以及我需要使用哪种加速度，身体加速度还是总加速度？

# node.js - 编译node.js出现“NameError: global name 'file' is not defined”

> ID：15571236
> 
> 赞同：1
> 
> 时间：2013-03-22T13:12:04.297
> 
> 标签：node.js

我有 python2 和 python3，我运行 ./configure 并且它可以工作。但是我运行 make，

```
make -C out BUILDTYPE=Release V=1

make[1]: 进入目录`/home/colin4124/MyProgram/node/out'
  LD_LIBRARY_PATH=/home/colin4124/MyProgram/node/out/Release/lib.host:/home/colin4124/MyProgra>m/node/out/Release/lib.target:$LD_LIBRARY_PATH; 导出 LD_LIBRARY_PATH；cd ../deps/v8/tools/gyp；mkdir -p /home/colin4124/MyProgram/node/out/Release/obj/gen; python ../../tools/gen-postmortem-metadata.py "/home/colin4124/MyProgram/node/out/Release/obj/gen/debug-support.cc" ../../src/objects. h ../../src/objects-inl.h
回溯（最近一次通话最后）：
  文件“../../tools/gen-postmortem-metadata.py”，第 479 行，在
    发射配置（）；
  文件“../../tools/gen-postmortem-metadata.py”，第 432 行，在 emit_config 中
    out = file(sys.argv[1], 'w');
NameError：未定义全局名称“文件”
make[1]: *** [/home/colin4124/MyProgram/node/out/Release/obj/gen/debug-support.cc] 错误 1
make[1]: 离开目录`/home/colin4124/MyProgram/node/out'
make: *** [节点] 错误 2

```

我怎么能解决它，想想你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:32:46.677

看起来您的默认 Python 是 3.x，但 Node 构建脚本需要 Python 2.x。

根据[这些说明](https://github.com/joyent/node/wiki/Installation)，您可以通过将`PYTHON`环境变量设置为指向您的 Python 2 可执行文件来修复它：

```
export PYTHON=`which python2` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T09:27:08.157

这是因为您的默认设置`python`是`python3.x`. Node.js 推荐`python2.6`/`python2.7`编译源码。
尝试`python`通过以下方式检查您的命令：

```
ls -l /usr/bin/python 
```

它会显示`lrwxrwxrwx 1 root root 9 Apr 3 15:46 /usr/bin/python -> python3`

要`python2.7`作为默认`python`命令使用：

```
sudo ln -sf `which python2.7` `which python`
ls -l /usr/bin/python 
```

现在应该是`lrwxrwxrwx 1 root root 9 Apr 3 15:46 /usr/bin/python -> python2.7`

# internet-explorer - ie 条件注释在 ie10 浏览器中不起作用（ie9、ie8、ie9）

> ID：15571240
> 
> 赞同：1
> 
> 时间：2013-03-22T13:12:18.630
> 
> 标签：internet-explorer

我正在使用 Internet Explorer 查看与 ie 相关的设计问题。因此，我尝试为 ie 特别编写 ie 条件注释，但它不起作用。当我刷新页面时，它的行为就像它的工作（加载时）意味着为 ie 7 编写的 css 可以工作，但是当它完全加载时它消失了。我不知道我的 Internet Explorer 中到底发生了什么。

我知道 ie10 已经删除了它的条件注释，但是低版本应该使用 ie 条件注释对吗？

我正在使用窗口 8，它具有内置的 ie10 、 ie9 、 ie8 、 ie7 任何帮助将不胜感激。提前致谢。

```
<!--[if lte IE 7]>

<link href="stylesheets/ie.css" rel="stylesheet">

<![endif]--> 
```

ie.css 的 CSS 代码

```
.three_columns { width:500px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T14:33:41.677

我知道这是一个老问题，但我在 IE8 中测试网站时遇到了同样的问题。

我使用的是 IE10 浏览器并将兼容模式（从开发人员工具-F12）更改为`Document mode: 8`and `User agent string: Internet Explorer 8`. 结果是网页没有加载`shiv`脚本，因为我使用条件注释来定位早于 9 的 IE 版本。

我研究发现 IE10 丢弃了条件注释（呃！），但这也影响了该浏览器附带的兼容模式。因此，基本上即使您在这种模式下运行（IE8），IE10 和 IE11 也会忽略所有条件注释并将它们转换为常规注释，导致标签由于未加载而`html5`无法识别。`shiv.js`

简而言之，在*真正*的IE8 浏览器中测试您的网站，而不是在 IE10 或 IE11 的兼容模式下。您可以通过 Google 找到许多通过大量浏览器和设备加载网页的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:24:53.930

IE 10 在 Intranet 上切换到 IE 7。要更改此行为，请参阅：[X-UA-Compatible 设置为 IE=edge，但它仍然不会停止 Compatibility Mode](https://stackoverflow.com/questions/6156639/x-ua-compatible-is-set-to-ie-edge-but-it-still-doesnt-stop-compatibility-mode)。

对于测试，您还可以通过按 F12 并手动更改文档兼容性来切换到您想要的任何引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T12:43:08.037

我知道这个问题已经很老了，但正如@otinani 已经指出的那样，这是兼容模式的问题。这主要发生在公司的 Intranet 上，但在最坏的情况下，可能会在生产模式下发生在任何已切换 IE 模式的人身上。

简而言之：如果您想安全，请不要使用 cond-comments，而是使用我为此问题编写的这个库：[https ://github.com/activenode/IE-Behaviour-Detection-Library](https://github.com/activenode/IE-Behaviour-Detection-Library)

# java - 关于 BinaryHeap，如何确定数组的初始大小？

> ID：15571244
> 
> 赞同：0
> 
> 时间：2013-03-22T13:12:34.250
> 
> 标签：java, heap

```
public BinaryHeap( AnyType [ ] items ) {
    currentSize = items.length;
    array = (AnyType[]) new Comparable[ ( currentSize + 2 ) * 11 / 10 ];

    int i = 1;
    for( AnyType item : items )
        array[ i++ ] = item;
    buildHeap( );
} 
```

为什么是`array.length = (currentSize + 2) * 11 /10`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:57:46.650

我会这样解释：

*   `currentSize + 2`- 肯定会有两个元素添加到堆中，将容量增加两个
*   `(currentSize + 2) * 11/10` - 容量增加 10%

问题是，这种堆实现的容量有限——受分配数组长度的限制。插入`((currentSize + 2) * 11/10 + 1)`元素时，您需要调整数组的大小，这可能是一项代价高昂的操作。特别是如果您总是通过将旧数组长度增加一来调整大小。

看起来代码的作者想要确保数组的大小足以容纳可能添加到其中的所有元素。

编辑：

正如 Ivaylo Strandjev 在评论中提到的那样，设置堆大小的常用方法是选择`k`这样的`2^k > currentSize`. 如果输入项的大小足够大，代码的作者可能不会选择这种方法：

例如，在大多数情况下，预期输入大小约为 1200，峰值为 1500，而您的初始输入大小为 1025 个元素。通过通常的方法，您必须选择 k=11 -> size is 2048 但这意味着您浪费了 (2048 - 1500 = 548) * 内存中 AnyType 对象字节的大小。

# c# - 终止由 Visual Studio 插件生成的所有线程的正确方法是什么？

> ID：15571248
> 
> 赞同：1
> 
> 时间：2013-03-22T13:12:38.933
> 
> 标签：c#, multithreading, visual-studio, add-in

当插件被卸载并且 OnDisconnection() 方法运行时，我希望插件产生的所有线程都立即终止。更具体地说，如果其中一个线程或主线程创建了一个消息框，我希望在卸载加载项的那一刻销毁消息框。

我现在看到的行为是，当我卸载插件（工具 - > 管理插件）时，线程会继续在后台运行，并且与插件相关的 UI 一直清晰可见，直到用户手动关闭它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:28:21.480

首先也是最重要的，

> 我希望插件产生的所有 thredas 立即终止。

**不，你没有。**您想要的是其他线程以正常方式停止运行自己。异步异常（例如`ThreadAbortException`）可能会使应用程序处于不良状态，这与您要完成的任务完全相反。

在不知道你的外接程序有多个线程的具体原因的情况下，我只能提出以下建议：

*   确保可以通过在加载项中设置标志或调用某种取消回调来取消长时间运行的操作。
*   避免保持空闲线程运行（当工作完成后，线程的主函数应该返回并且线程将停止运行）。
*   如果无法停止加载项，可以通知用户下次重新启动 Visual Studio 时将应用更改。该[`IVsUIShell.ShowMessageBox`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivsuishell.showmessagebox.aspx)方法可能是您要用于此通知的方法。
*   我以前没有使用过它，但 Visual Studio shell 提供的似乎[`IVsThreadedWaitDialogFactory`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivsthreadedwaitdialogfactory.aspx)是为了解决这个领域的一些问题而创建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:26:43.837

一些有用 [的资源：C#、Visual Studio 2010、如何停止方法、线程？](https://stackoverflow.com/questions/11025496/c-visual-studio-2010-how-to-stop-a-method-threads)

[如何：创建和终止线程](http://msdn.microsoft.com/en-us/library/7a2f3ay4%28v=vs.90%29.aspx)

如第一个链接中所列，建议查看[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# jquery - 拖放 - 获取可放置对象内的所有元素

> ID：15571253
> 
> 赞同：-2
> 
> 时间：2013-03-22T13:13:04.790
> 
> 标签：jquery, html, css

获取droppable中的所有元素

示例：如果我将十个元素拖动到可放置并删除三个，当单击按钮时，它会识别可放置内的元素。有人知道怎么做吗？我认为其他人面临这个问题。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:07:26.867

您的问题可以措辞更好，您可以显示一些代码，以便我们可以更好地提供帮助。

在不知道您的设置如何的情况下，我猜想像

```
$('#dropped-container .draggable-items').each(function() {
    $(this).whateverYouWantToDo();
}); 
```

# c++ - 了解 CPP 指针

> ID：15571257
> 
> 赞同：-2
> 
> 时间：2013-03-22T13:13:19.853
> 
> 标签：c++, pointers, integer

如果

```
int number[];
int *tommy; 
```

那么以下陈述有什么区别？这两个语句都不会将数字的地址复制给汤米吗？

```
tommy = &number; 
```

或者

```
tommy = number; 
```

编辑：对不起，我的意思是 int 数组，而不仅仅是 int。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:25:35.523

`int number;`定义一个整数`number`。`int *tommy;`定义`tommy`为指向整数的指针。

`tommy = &number;`分配`number`to的地址`tommy`。`*tommy`将给出实际数字。

`tommy = number`存储`number`in的值`tommy`。一，应该有一个编译错误，最重要的是，如果你成功存储`number`到`tommy`，那么`*tommy`将尝试从地址与内容相同的无效位置进行延迟，`number`并导致分段错误。

**后记**

我很想如果你看到这样的例子

```
int a[10];
int *tommy;

tommy = a; // This will work 
```

在本例中，`a`是数组的名称，相当于数组的地址或数组的第一个元素，即`&a[0]`。因此，存入`a`是`tommy`有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:15:24.600

第一个分配`number`into的地址`tommy`。第二个尝试将数字分配给`number`指针`tommy`，它应该无法编译。

**编辑**

通过编辑，情况正好相反：第一个不应该编译。int 数组的地址是 类型`int (*)[size]`，不能转换为`int*`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T13:29:59.827

为了编译您的示例，数组需要一个大小：

```
int number[1]; 
```

因为你不能创建一个未知大小的变量。

```
tommy = &number;

error: cannot convert ‘int (*)[1]’ to ‘int*’ in assignment 
```

这不应该编译。`&number`是指向数组的指针，它不能转换为指向 的指针`int`，因此不能分配给该类型的变量。

```
tommy = number; 
```

这可以。在表达式中使用时，数组可以转换为指向其第一个元素的指针。该指针类型为`int*`，与 相同`tommy`，因此允许赋值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:22:34.113

不，两者本质上是不同的。表达式的`&number`计算结果为存储值的*地址*`number`，而表达式的`number`计算结果直接为值本身。

假设 number 的*值为*42，并且它存储在内存中的*地址*1024。内存是线性的*，所以它看起来像这样：

```
+--------+ Address 0
| ...... |
+--------+
|   42   | Address 1024 (value is stored here)
+--------+
| ...... |
+--------+ Address xxxx 
```

现在，该语句`tommy = &number;`将值 1024 分配给`tommy`，因为`&number == 1024`， 的地址`number`。

另一个语句，只要它完全编译，就会将（无意义的）值 42（的值`number`）分配给`tommy`. 任何取消引用（访问指向的数据）的尝试`tommy`都可能产生分段错误，因为 42 （可能）不是有效地址。

*至少，操作系统会给你一种地址空间是线性和连续的错觉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T13:15:32.460

第一个赋值是正确的——它把 的地址赋给`number`了指针`tommy`。

第二个赋值将*赋值*给`number`指针`tommy`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T13:15:39.397

不，他们不会，`&`或者`reference operator`它将`address of`获取您预先附加的变量的地址，所以这可以满足您的需求：

```
tommy = &number 
```

当您只使用 plain 时`number`，它只返回存储在 number 中的整数值，它不会编译。这个关于指针的[参考](http://www.cplusplus.com/doc/tutorial/pointers/)涉及到更多的细节。

`Update:`

因此，在对问题进行编辑后，如果没有大小，这将无法编译：

```
int number[]; 
```

这是有效的：

```
int number[10]; 
```

所以现在它被颠倒了，这是有效的并且将编译：

```
tommy = number ; 
```

第二行尝试将整数数组视为单个整数，编译器不允许这样做，因此它无效：

```
tommey = &number ; 
```

# python - Python：绘图的 A4 大小

> ID：15571267
> 
> 赞同：27
> 
> 时间：2013-03-22T13:13:55.320
> 
> 标签：python, matplotlib

我有一个保存数字的代码：

```
savefig("foo.eps", orientation = 'portrait', format = 'eps') 
```

如果我没有指定任何其他内容，则该图形已正确保存，但是当我打印它时，该图形仅填充 A4 纸的一半。如果我将字符串修改为：

```
savefig("foo.eps", papertype = 'a4', orientation = 'portrait', format = 'eps') 
```

什么都没有！如何以填充整个 A4 纸的方式设置图形的大小？提前谢谢了。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-25T19:20:46.087

在保存之前尝试设置图形的大小（以英寸为单位）。您可以在初始化图形时执行以下操作：

```
figure(figsize=(11.69,8.27)) # for landscape 
```

或者如果该数字存在：

```
f = gcf()  # f = figure(n) if you know the figure number
f.set_size_inches(11.69,8.27) 
```

或提前为所有地块，使用

```
rc('figure', figsize=(11.69,8.27)) 
```

# amazon-ec2 - 在 Amazon EC2 上部署 Oracle WebCenter Sites JSK

> ID：15571268
> 
> 赞同：1
> 
> 时间：2013-03-22T13:13:57.070
> 
> 标签：amazon-ec2, fatwire, webcenter-sites

我们正在考虑部署一个 Oracle Webcenter Sites 实例，首先是 JumpStartKit 版本，使用 Amazon EC2 服务。

我有一些问题：

*   是否存在不兼容问题？
*   推荐什么 linux [AMI](http://en.wikipedia.org/wiki/Amazon_Machine_Image)？库兼容性等

我希望你们中的任何人以前都尝试过这个...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:40:18.450

Webcenter Sites 是一个 CMS 应用程序，运行在 Tomcat、JBoss、Weblogic、Websphere 等 App Server 之上，并连接到 HSQLDB、Oracle、DB2、SQL Server、MySQL 等数据库，

您应该检查您选择的相关应用服务器和数据库的云产品。

JSK 在 Tomcat 上运行并连接到 HSQLDB，但您始终可以自己运行安装程序并将其配置到其他服务器和数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:57:50.940

Amazon EC2 目前不支持 WebCenter Sites，虽然我听说在技术上是可行的，但它不是经过认证的配置，可能不是一项简单的任务。您可以在此处找到经过认证的配置和文档的电子表格 [http://www.oracle.com/technetwork/middleware/webcenter/sites/downloads/index.html](http://www.oracle.com/technetwork/middleware/webcenter/sites/downloads/index.html)

菲尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T00:41:08.770

我与为我以前的雇主在 AWS 上安装 WebCenter Sites 的供应商合作，没有任何问题。它目前正在为公司网站提供动力。我们使用了 Amazon RHEL AMI。我最近与执行安装的技术人员交谈，他说没有任何真正的“陷阱”。

我目前正在在 Ubuntu 版本上安装 WebCenter 站点。我不是 linux 人，所以安装速度很慢，但到目前为止还不错。

# netbeans - Weld-se 和 netbeans：调试不起作用

> ID：15571271
> 
> 赞同：1
> 
> 时间：2013-03-22T13:14:06.433
> 
> 标签：netbeans, glassfish, jboss-weld, glassfish-embedded, weld

我正在尝试将 javaSE 应用程序移植到 Weld SE 以获得依赖注入支持。应用程序启动并正常运行（我将 main 更改为 ContainerInitialized 事件的观察者，添加 beans.xml 并从 org.jboss.weld.environment.se.StartMain 类开始，我还有一些出现的注入工作正常）。

然而，现在调试似乎停止在 netbeans 中工作。我恢复了我的更改以返回没有焊接 SE 的设置，并且调试再次开始工作。

我正在使用netbeans 7.3。我做错了什么，还是在 netbeans 中配置了一些特殊的东西来调试 Weld SE 应用程序以按预期工作？

**编辑：**原来这是一个冲突，因为同一个 JavaSE 项目还具有对 glassfish 嵌入的依赖项，因此它可以向 glassfish 服务器发出 JMS 请求：

```
<dependency>
    <groupId>org.glassfish.main.extras</groupId>
    <artifactId>glassfish-embedded-all</artifactId>
    <version>3.1.2.2</version>
</dependency> 
```

我猜 glassfish-embedded 和weld-se 的焊接库相互冲突或混淆了调试器。暂时无法完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T10:27:38.233

So as I wrote in the "edit" of the question, it turns out it's a conflict because this same JavaSE project also has dependencies to glassfish embedded so that it can make JMS requests to a glassfish server:

```
<dependency>
    <groupId>org.glassfish.main.extras</groupId>
    <artifactId>glassfish-embedded-all</artifactId>
    <version>3.1.2.2</version>
</dependency> 
```

I guess the weld libraries from glassfish-embedded and from weld-se are fighting with each other or confusing the debugger. Didn't manage to make this work for now.

# .net - WindowsFormsHost 不能旋转。要抑制此错误，请处理 LayoutError 事件并将 ThrowException 设置为 false

> ID：15571277
> 
> 赞同：0
> 
> 时间：2013-03-22T13:14:19.293
> 
> 标签：.net, xaml, vlc, windowsformshost

我在 WPF 中有 VLC ActiveX 插件控件。

```
<Grid> 
    <WindowsFormsHost  HorizontalAlignment="Stretch" Margin="0,0,0,0" Visibility="Hidden"   Name="windowsFormsHost1" VerticalAlignment="Stretch" ClipToBounds="True" SnapsToDevicePixels="True"  /> 
 </Grid> 
```

当我尝试应用一些动画时，我遇到了这个错误：

```
A WindowsFormsHost cannot be rotated. To suppress this error, handle the LayoutError event and set ThrowException to false. 
```

任何线索我们如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:38:14.127

这个错误很简单。您根本无法旋转或调整`WinFormsHost`控件大小。见[这里](http://social.msdn.microsoft.com/Forums/en-US/surfaceappdevelopment/thread/a3eed1a5-3895-4a83-bdd2-6d5caf47db0c/)。

# javascript - 为什么不是每次都执行javascript代码？

> ID：15571281
> 
> 赞同：0
> 
> 时间：2013-03-22T13:14:54.943
> 
> 标签：javascript, jquery

我在 javascript 中有这个控件，但出现了问题，因为似乎每次我进行更改时都不会执行。我放了警报，这样我就可以看到发生了什么。我做错了什么？

`controlToSet`并且`control1`是复选框并且`control2`是单选按钮。

```
function SetValues(controlToSet, control1, control2) {

    if (control1.is(':checked') && control2.is(':checked')) {
        $(controlToSet).attr('disabled', 'disabled');
        $(controlToSet).attr('checked', false);
        alert('checked and checked');
    }

    if (control1.is(':checked') && control2.is(':checked') == false) {
        $(controlToSet).attr('disabled', false);
        alert('checked an unchecked');
    }

    if (control1.is(':checked') == false && control2.is(':checked') == false) {
        $(controlToSet).attr('disabled', 'disabled');
        $(controlToSet).attr('checked', false);
        alert('unchecked and unchecked');
    }
} 
```

这些控件在 Web 应用程序中使用，并且依赖于其他控件之一，并且当主题之一更改这些 javascript 代码应该执行的值时，但并非一直都在发生这种情况。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:16:47.323

您的浏览器可能使用了 javascript 的缓存版本。尝试清除浏览器缓存和/或重新启动浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:16:50.550

如果您希望在进行更改时执行代码，则必须捕获`change`事件。

您可以使用[更改](http://api.jquery.com/change/)绑定功能：

```
control1.add(control2).change(function(){
     SetValues(controlToSet, control1, control2)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:17:40.887

确实忘记了 control1.is(':checked') == false && control2.is(':checked') 的情况吗？

# visual-studio-2012 - Visual Studio 2012 速成版是否支持 T4 模板？

> ID：15571290
> 
> 赞同：0
> 
> 时间：2013-03-22T13:15:17.943
> 
> 标签：visual-studio-2012, t4

哪些 Visual Studio 2012 速成版支持 T4 模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T02:47:14.930

是的，VS 在 VS2005 之后不久就支持 T4 并且从那时起就内置了。

这里还有一个来自[VS](https://stackoverflow.com/questions/3309551/does-vs-2010-express-edition-support-t4-preprocessed-templates)的人，让您知道 2010 年快递的问题，默认情况下不显示 t4，即使它在那里并且有效。

一种应该起作用的方法是创建一个新的文本文件，并以 结束`.tt`，看看你是否得到一个 VS 解决方案资源管理器图标，立即显示它会生成一些东西。如果不尝试将该文件的自定义工具属性设置为`TextTemplatingFileGenerator`

[*2005 年：Microsoft 发布了 T4 的第一个版本，作为 Visual Studio 2005 的带外版本*](http://en.wikipedia.org/wiki/Text_Template_Transformation_Toolkit)

# html - 标签中的 HTML5 字体标签替代

> ID：15571291
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:15:23.363
> 
> 标签：html, tags

我有一个标签标签，我想更改该标签中的部分文本字体。在我使用字体标签之前，但现在它被完全丢弃在 html5 中，我不太确定我该怎么做。我知道的唯一方法是有一个嵌套标签。

老路 `<label>some text <font> Fonted TEXT</font><label>`

新方法？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T13:17:41.640

如果您不想添加语义含义，请改用`<span>`标签：

```
<label>some text <span>Fonted TEXT</span></label> 
```

并使用这样的 CSS 设置样式：

```
label > span {} 
```

如果要强调文本，也可以使用`<em>`或`<strong>`。您可以在 HTML5 Doctor 上阅读这些标签：“ [i、b、em 和强元素](http://html5doctor.com/i-b-em-strong-element/)”

# android - 按钮单击在 jellybean 中无法正常工作

> ID：15571295
> 
> 赞同：1
> 
> 时间：2013-03-22T13:15:27.910
> 
> 标签：android

我正在从edittext 中获取文本，并对除JellyBean 之外的每个api 版本都有效的值进行一些计算。问题是当我在编辑文本中输入一个数字并按下计算按钮时它会起作用，然后当我将该编辑文本的值更改为其他值并再次按下计算时它不起作用。我需要重新启动应用程序才能使用它。我没有任何可测试的软糖设备，但我的客户为我提供了一个视频，我看到这个事实是真实的。我现在该怎么办？

这是我在那个按钮点击监听器中所做的计算代码

```
try {
                double i = Double.parseDouble(startdate.getText().toString()) / 365;
                double j = 1 / i;
                double k = Math.pow(d3, j);
                double l = k - 1;
                double m = l * 100;
                annualroi = roundTwoDecimals(m);
                investmentyear.setText("Investment periode(Days):"
                        + startdate.getText().toString());

                annualizeroi.setText("Simple Annualized ROI(%):" + annualroi);
            } catch (Exception e) {
                e.printStackTrace();
            } 
```

这是我的实际活动代码：

```
public class MainActivity extends Activity implements OnClickListener {

    EditText originalinvestment, returnedvalue, startdate;
    Button startpick, endpick, calculate, calculateannual;
    String posstartdate, postenddate;
    static final int DATE_PICKER_DIALOG_ID = 0;
    static final int DATE_PICKER_DIALOG_IDTWO = 1;
    Date dayofyearone;
    Date dayofyeartwo;
    double d1;
    double d;
    double d2;
    double d3;
    TextView tgainorloss, investmentyear, returninvestment, annualizeroi;
    double year;
    double gainorloss;
    double roi;
    double annualroi;
    int k1;
    int l1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        // getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);
        setContentView(R.layout.activity_main);

        initializer();

        calculate.setOnClickListener(this);
        calculateannual.setOnClickListener(this);
    }

    private void initializer() {

        originalinvestment = (EditText) findViewById(R.id.etoriginalinvestment);
        returnedvalue = (EditText) findViewById(R.id.etreturnedvalue);
        startdate = (EditText) findViewById(R.id.etstartdate);

        calculate = (Button) findViewById(R.id.btncalculate);
        tgainorloss = (TextView) findViewById(R.id.txtgainorloss);
        investmentyear = (TextView) findViewById(R.id.txtinvestmentterm);
        returninvestment = (TextView) findViewById(R.id.txtreturninvest);
        annualizeroi = (TextView) findViewById(R.id.txtannualizeroi);
        calculateannual = (Button) findViewById(R.id.btncalculateannual);

    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {

        case R.id.btncalculate:
            getYearDifference();

            break;

        case R.id.btncalculateannual:
            try {
                double i = Double.parseDouble(startdate.getText().toString()) / 365;
                double j = 1 / i;
                double k = Math.pow(d3, j);
                double l = k - 1;
                double m = l * 100;
                annualroi = roundTwoDecimals(m);
                investmentyear.setText("Investment periode(Days):"
                        + startdate.getText().toString());

                annualizeroi.setText("Simple Annualized ROI(%):" + annualroi);
            } catch (Exception e) {
                e.printStackTrace();
            }
            break;
        }

    }

    double roundTwoDecimals(double d) {
        return Double.valueOf((new DecimalFormat("#.##")).format(d))
                .doubleValue();
    }

    public void getYearDifference() {
        try {

            if (!originalinvestment.getText().toString().contentEquals("")
                    && !returnedvalue.getText().toString().contentEquals("")) {

                d = Double.parseDouble(originalinvestment.getText().toString());
                d1 = roundTwoDecimals(Double.parseDouble(returnedvalue
                        .getText().toString()) - d);

                gainorloss = d1;
                roi = roundTwoDecimals(100D * (d1 / d));
                d3 = (roi / 100) + 1;

                tgainorloss.setText("Gain or loss investment($):" + gainorloss);
                returninvestment.setText("Return on Investment(%):" + roi);

            }

        } catch (Exception e) {

            e.printStackTrace();
        }

    }
} 
```

# ios - 试图理解一个简单的陈述

> ID：15571300
> 
> 赞同：1
> 
> 时间：2013-03-22T13:15:39.317
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

```
#define IS_IPHONE5 (([[UIScreen mainScreen] bounds].size.height-568)?NO:YES) 
```

我使用上面的方法来检查用户是否使用 iPhone 5，但我真的不明白它是如何工作的。

常识告诉我，如果用户屏幕边界是 X - 568 = 0，则用户正在使用 iPhone 5。但在上面的语句中，0 将是 NO BOOL，因此不明白它如何返回 YES。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:19:02.240

`(0 ? "yes" : "no")`结果`"no"`。

`(0 ? "no" : "yes")`结果`"yes"`。

后面的`?`表达式是布尔表达式为真时的结果。后面的`:`表达式是布尔表达式为假时的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:22:40.837

它的意思是 ：

```
if([[UIScreen mainScreen] bounds].size.height-568)
    return NO;
return YES; 
```

IPHONE5的高度是568，所以`[[UIScreen mainScreen] bounds].size.height-568 = 0`，`0`表示`NO`，其他表示`YES`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T13:17:10.580

这很简单，

你已经解决了逻辑，是的，它会说零，在零上它会返回**YES**。

因为在编程中零意味着错误！所以 False 将返回“YES”

而非零意味着 TRUE ！所以 TRUE 将返回“NO”

这里使用三元运算符，它将以上述方式工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T08:40:06.810

首先，一些这样的语句：“isTrue?NO:YES”，表示当“?”之前的语句为真时，整个语句（isTrue?NO:YES）的值为“NO”，否则值为"YES";这里，这个语句的值([[UIScreen mainScreen] bounds].size.height-568)可以是零或者非零，所以当[[UIScreen mainScreen] bounds].size.height等于568时，上面的语句是零，零表示假，所以它返回“YES”。

# r - R轮廓和填充轮廓不能在一起

> ID：15571303
> 
> 赞同：3
> 
> 时间：2013-03-22T13:15:46.590
> 
> 标签：r, contour

我想画一张全球海面温度的图片，但是在填充了sst的轮廓后，我尝试在填充的图片上添加counter更宽，然后发生了一些奇怪的事情，这两张图片不能放在一起这里是代码，因为我没有空间放原始数据，所以使用了一个随机数

这是代码

```
library(maps)

ee<-array(rnorm(89*180),dim=c(89,180))

lati <- seq(-90,90,length=89) #Latitudes goes from -90 to 90 as far as I know :)
long <- seq(-180,180,length=180)
plot(NA, xlim=c(-180,180), ylim=c(-90,90), xlab="", ylab="", xaxs="i", yaxs="i")
contour(long, lati, t(ee), add=TRUE)
filled.contour(long,lati,t(ee), color.palette=terrain.colors)
maps::map(database="world", fill=TRUE, col="light blue", add=TRUE) 
```

如我们所见，填充图片的位置与原始数据不对应，例如唯一的轮廓图片

问题是什么？

最后对不起我的英语不好，谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:35:55.333

`filled.contour`您可以在帮助页面中阅读以下内容：

> 'filled.contour' 产生的输出实际上是两个图的组合；一个是填充轮廓，一个是图例。为这两个绘图设置了两个独立的坐标系，但它们仅在内部使用 - 一旦函数返回，这些坐标系就会丢失。如果要注释主等高线图，例如添加点，可以在“plot.axes”参数中指定图形命令。请参阅示例。

因此，尝试将此应用于您的示例，您可以执行以下操作：

```
library(maps)
ee<-array(rnorm(89*180),dim=c(89,180))
lati <- seq(-90,90,length=89) #Latitudes goes from -90 to 90 as far as I know :)
long <- seq(-180,180,length=180)
draw.map <- function() {maps::map(database="world", fill=TRUE, col="light blue", add=TRUE)}
filled.contour(long,lati,t(ee), color.palette=terrain.colors, plot.axes=draw.map()) 
```

这使 ：

![在此处输入图像描述](../Images/ed78716ac3fc46586fbf43e28cb0fd4e.png)

# jquery - 将变量传递给 Primefaces 选择器

> ID：15571311
> 
> 赞同：0
> 
> 时间：2013-03-22T13:16:17.483
> 
> 标签：jquery, jsf, jquery-selectors, primefaces

在我的 JSF/Primefaces 页面中，我有一个包含 tabview 的表单，其中每个选项卡包含一个手风琴面板，每个手风琴包含一个数据表。单个数据表的完整 id 类似于`id="form:tabs:0:accordion:0:table"`

每个选项卡还包含一个命令按钮，该按钮必须更新选项卡本身内的数据表，因此它不会更新其他选项卡内的表。

使用 Primefaces 选择器，我设法更新了所有 id 以 "table": 结尾的数据表`update="searchValue @('div$=table')`，但我无法解决所有 id 以 "0:table" 结尾的数据表，其中 "0" 是动态的（基于在当前选项卡上）。

我试过：

```
<ui:param name="ta" value="#{settore.id - 1}:table" />
<p:commandButton id="plainSearch" value="Filter"
    action="#{myBean.search()}"
    update="@('div$=#{ta}')"> 
```

但它给了我一个 Javascript 错误：`Uncaught Syntax Error: Unexpected identifier`，然后整个表单被更新。

如何正确地将变量传递给 Primefaces 选择器？

这是我的 XHTML 页面：

```
<h:form id="form">
  <p:tabView id="tabs" value="#{myBean.sectors}" var="tab">
    <p:tab id="tab" title="#{tab.description}">
    <p:commandButton id="plainSearch" value="Filter"
      action="#{myBean.search()}"
      update="@('div$=table')">
      <p:accordionPanel id="accordion" value="#{myBean.getTabs()}" var="tab" multiple="true" activeIndex="#{myBean.activeIndexes}">
        <p:tab id="accordionTab" title="#{tab.title}">
          <p:dataTable id="table" var="row" value="#{myBean.getObjects()}"  emptyMessage="Empty table">
            <p:column headerText="Code">
              <h:outputText value="#{row.codice}" />
            </p:column>
            <p:column headerText="Description">
              <h:outputText value="#{row.descrizione}" />
            </p:column>
          </p:dataTable>
        </p:tab>
      </p:accordionPanel>
    </p:tab>
  </p:tabView>
</h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:28:31.170

我对（jquery）选择器本身有点困惑。如果我理解正确，primefaces 此时正在使用 jquery 选择器，@() 的语法只会将其识别为 jquery 选择器。

如果它是一个 jquery 选择器（[Attribute Ends With Selector](http://api.jquery.com/attribute-ends-with-selector/)）不应该是这样的：

```
$(div[id$=table]) 
```

对于带有 id 的版本：

```
$(div[id$=#{ta}\\:table]) 
```

**编辑：**我已经更新了代码示例（不带引号）

# android - facebook oauth 对话框提示无限次

> ID：15571312
> 
> 赞同：0
> 
> 时间：2013-03-22T13:16:17.670
> 
> 标签：android, facebook

我正在尝试使用 facebook 凭据登录到我的应用程序。如果我的设备安装了 facebook 应用程序，那么在身份验证后，对话框“想访问您的公共个人资料，朋友列表”尽管点击了确定按钮，但仍会无限次弹出。但是当我的设备中没有安装 facebook 应用程序时，同样的情况也可以正常工作。

你能指出我哪里出错了吗？

**编辑（包括代码）**

```
void signInWithFaceBook{
        Session.openActiveSession(this, true, new Session.StatusCallback() {
        @Override
        public void call(Session session, SessionState state,
                Exception exception) {              
            if (session.isOpened()) {                                       
                Request.executeMeRequestAsync(session,new Request.GraphUserCallback() {
                            @Override
                            public void onCompleted(GraphUser user,
                                    Response response) {
                                //my code
                            }
                        });
            }
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode,
        Intent intent) {        
    super.onActivityResult(requestCode, resultCode, intent);        
    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, intent);
} 
```

当我单击登录 facebook 按钮时，将调用 signInWithFaceBook()。我还注意到，当我安装我的 facebook 应用程序进行测试时，onActivityResult() 接收的结果代码总是为 0。

# c# - 除单例模式外，私有构造函数的任何其他用途

> ID：15571324
> 
> 赞同：0
> 
> 时间：2013-03-22T13:16:48.693
> 
> 标签：c#, asp.net

当我试图搜索私有构造函数的使用时，我发现的只是它在单例模式中的使用。除了单例模式之外，私有构造函数还有什么用处。一些链接或代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:21:24.040

这是另外两个原因：

工厂模式。

*   使用私有构造函数和公共静态方法来调用它们。

不可变类的构建器模式。

*   使用嵌套的可变 Builder 类，其实例被传递给私有构造函数。

示例生成器模式：

```
using System;

namespace Demo
{
    public static class Program
    {
        public static void Main(string[] args)
        {
            var demo = new ImmutableClass.Builder{
                A = 1,
                B = "two",
                C = 3.0
            }.Build();
        }
    }

    public sealed class ImmutableClass
    {
        public sealed class Builder
        {
            public int A;
            public string B;
            public double C;

            public ImmutableClass Build()
            {
                return new ImmutableClass(this);
            }
        }

        private ImmutableClass(Builder builder)
        {
            _a = builder.A;
            _b = builder.B;
            _c = builder.C;
        }

        public int A
        {
            get
            {
                return _a;
            }
        }

        public string B
        {
            get
            {
                return _b;
            }
        }

        public double C
        {
            get
            {
                return _c;
            }
        }

        private readonly int _a;
        private readonly string _b;
        private readonly double _c;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:23:32.023

快速回答：序列化和链式构造函数。

更长的答案：

# 需要初始化值的对象的序列化

```
public class SomeSerializableClass {

    private SomeSerializableClass() {} // Used only in serialization

    public SomeSerializableClass(int initParameter){
        this.Property = initParameter;
    }

    public int Property { get; set; }

}

public class Program{

    static void Main(){
        var obj1 = new SomeSerializableClass(42); // valid
        var obj2 = new SomeSerializableClass(); // invalid

        var xs = new XmlSerializer(typeof(SomeSerializableClass));
        var obj3 = (SomeSerializableClass)xs.Deserialize(someStream); // possible

    }

} 
```

# 链式构造函数（分解一些构造函数逻辑）：

```
public class SomeClass {

    private SomeClass(int initParameter) {
        this.Property = initParameter; // Will always be executed, the logic exists once        
    }

    public SomeSerializableClass(int initParameter, string otherParameter)
        : this(initParameter)
    {
    }
    public SomeSerializableClass(int initParameter, int againAntherParameter)
        : this(initParameter)
    {
    }

    public int Property { get; set; }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:20:49.373

在从静态 Search(...) 函数后面的 DataReader 初始化对象时，我使用私有构造函数 - 如果是公共的，这样的构造函数就没有什么意义了。

# xampp - XAMPP 1.8 中的 Joomla 2.53 和 Joomla 3.02

> ID：15571328
> 
> 赞同：1
> 
> 时间：2013-03-22T13:16:54.697
> 
> 标签：xampp, joomla2.5

在 localhost 上成功安装了 Joomla 3.02 和 XAMPP 1.81 进行试用。但是，当我试图掌握 Joomla 版本 3 时，我仍然想使用 Joomla 2.53。当我想在这个 XAMPP 1.81 中安装 Joomla 2.53 时，我遇到了数据库问题。Joomla 2.5 和 Joomla 3.02 不能在同一个 XAMPP 1.81 中共同运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:42:52.937

它们在相同的 XAMPP 安装上运行良好。但当然他们不能使用同一个数据库。

转到 localhost/phpmyadmin/ 并为每个 Joomla! 创建一个数据库！安装。例如一个名为 Joomla25 和一个 Joomla30。在 Joomla! 安装，然后设置相应的数据库和Joomla！将在指定的数据库中创建所需的表。

还要确保您使用最新的 Joomla！版本，即 Joomla! 2.5.9 和 Joomla！3.0.3。

# javascript - 如何像 Google 一样获得下拉图像视图？

> ID：15571333
> 
> 赞同：0
> 
> 时间：2013-03-22T13:17:05.560
> 
> 标签：javascript, html, css, drop-down-menu

我正在为我的学校项目（高中）创建一个投资组合网页，并且我有一个名为工作的部分。在那里，我想让图像彼此并排显示（只是一些填充），然后如果您单击它们，将会有一种下拉菜单，其中图像将出现在左侧站点上，而文本则出现在右侧站点上。这也会将网页上的其余内容向下推。

一个例子？谷歌图片。如果你在某个地方搜索，比如说“google”，然后你去图片，如果你现在点击一张随机图片，就会有一个带有图片和一些文字的平滑下拉列表，网站上的其余内容是推下去。这就是我要的。只是我不知道如何获得该下拉菜单并将页面的其余部分向下推。

让图片像谷歌一样浮动没什么大不了的，这里的问题是当你点击图片时会出现下拉内容，并且内容会被下推。

我正在使用 PHP 以便能够在我想要的任何时候放入东西，但是现在获取该 imagedropdown 不在我的能力范围内。

这不一定必须在所有浏览器中工作，只要它在 webkit 和 mozilla 中工作就可以了。

有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:57:51.987

你可以用 JQuery 做到这一点..

只需创建一个您想要动画的 div，不显示任何内容。

使用 Jquery 向下滑动功能

```
$(selector).slideDown(); 
```

和 Jquery 文档

[http://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)

（如果您还没有，请不要忘记先包含 JQuery）

编辑-（我真的很讨厌还不能对问题发表评论）

无论如何，在需要时将内容向下推送只需将您想要的内容包装在最小高度为 100px 的容器 div 中，然后如果该容器内的任何内容大于 100px，则 div 将增长以使其适合并将所有内容向下推。

这是一个更新的小提琴 [http://jsfiddle.net/hvf7Q/1/](http://jsfiddle.net/hvf7Q/1/)

希望我有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:29:18.247

让每行图像都位于类似`div`. 然后，下拉列表可能应该已经存在于您的 HTML 中的某个地方，并使用 jQuery（函数删除、附加、之后等）“传输”它。

可以使用其行中图像的索引来定位小三角形。如果它们是正方形更容易，否则使用 jquery width 矩形。

# javascript - 使用新地址、标题等更新 sharethis 悬停小部件

> ID：15571338
> 
> 赞同：0
> 
> 时间：2013-03-22T13:17:16.010
> 
> 标签：javascript, jquery, html, sharethis, jquery-address

我在单页应用程序上使用了 sharethis 悬停小部件（显示：固定）和 jQuery 地址。所有请求都是 pushState 并通过 ajax 加载。因此，当用户从 pageA.html 转到 pageB.html 时，地址会通过 pushState 更新。但是，当我单击“共享到 facebook”上的某个页面时，我进入网站的页面正在共享，而不是当前页面。这个现象可以在[这个网站](http://www.posterlion.com)上看到。

我在存储 url、标题等的 stWidget 对象中进行了搜索，但我找不到它。Sharethis 对此非常保密，并一直引用[此页面](http://support.sharethis.com/customer/portal/articles/475079-share-properties-and-sharing-custom-information#sthash.fdHmlgu2.gCVBQlcG.dpbs)，但这仅说明如何在 ajax 加载的内容中激活小部件，而不是如何使用新地址、标题等更新小部件或如何修改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:40:56.210

最后我做了一个这样的处理程序。这很愚蠢，因为它删除了按钮并再次添加它们，而不是仅仅更改变量。我仍然不明白为什么他们对刷新按钮的变量这样简单的过程如此保密。

```
function updateShareThisButtons() {

    var services = [];
    services.push("facebook", "googleplus","twitter","pinterest", "email", "sharethis");
    if($('#sthoverbuttons-chicklets').length == 0)
        $('.sthoverbuttons-chicklets').attr('id','sthoverbuttons-chicklets')

    $('#sthoverbuttons-chicklets').html('');
    for (var i = 0; i < services.length; i++) {
          stWidget.addEntry({"service":services[i],"element":document.getElementById('sthoverbuttons-chicklets'),"url":$.address.baseURL(),"title":$.address.title(), "type":"large","summary":"summary"});
    };
} 
```

# asp.net-mvc-4 - 将参数传递给 mvc 中的局部视图以加载特定的 db 行

> ID：15571344
> 
> 赞同：2
> 
> 时间：2013-03-22T13:17:35.097
> 
> 标签：asp.net-mvc-4, partial-views

我正在开发一个 mvc 4 应用程序，我即将完成。我遇到的唯一问题是在用户填写的多页表单的末尾，我想要一个显示他们输入的所有信息的摘要页面。我认为最简单的方法是通过使用部分视图来显示来自不同页面的表单数据，他们在其中输入了数据。从表单的页面到页面，传递一个 int 参数，该参数表示他们正在填写的表单的数据库中的 id 号（用户会提前通过电子邮件发送该 id，因为他们需要它来登录）。问题是，一旦表单完成并加载了摘要页面，主视图就会加载 id 参数（例如它的 mysite.com/vendor/quotesummary/22），但我不知道如何通过那个参数，到局部视图以加载正确的数据。所以这就是我的代码的样子：

在我的控制器中：

```
[HttpGet]
    public ActionResult QuoteSummary(int id = 0)
    {
        General_Info general_info = unitOfWork.General_Info_Repository.GetByID(id);
        return View(new QuotesViewModel(general_info));
    }

    [HttpGet]
    [ChildActionOnly]
    public ActionResult GenInfoSummary()
    {

        return View(new QuotesViewModel());
    }

    [HttpGet]
    [ChildActionOnly]
    public ActionResult QuoteDataSummary()
    {

        return View(new QuotesViewModel());
    } 
```

然后在我的 QuoteSummary 视图中，我有：

```
@model SourceMvc.DAL.QuotesViewModel
@{
    ViewBag.Title = "QuoteSummary";
 }

<h2>Quote Summary</h2>

@Html.Partial("QuoteSummaryChildOne", new SourceMvc.DAL.QuotesViewModel());
@Html.Partial("QuoteSummaryChildTwo", new SourceMvc.DAL.QuotesViewModel()); 
```

就像我说的那样，我的 QuoteSummary 正在加载正确的 id 参数，即使在我可以将该参数传递给部分视图之前，这没有任何意义。

两天来我一直在试图解决这个问题，我觉得答案必须很简单，这就是为什么它如此令人沮丧。你们可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:27:16.937

您可以在要呈现部分视图的视图中放置一个动作吗

```
@Html.Action("GenInfoSummary","Home") 
```

并让动作结果呈现这样的局部视图

```
[HttpGet]
[ChildActionOnly]
public ActionResult GenInfoSummary(int id = 0)
{

    return PartailView(new QuotesViewModel());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T13:23:19.357

```
[HttpGet]
public ActionResult QuoteSummary(int id = 0)
{
    General_Info general_info = unitOfWork.General_Info_Repository.GetByID(id);
    return View(new QuotesViewModel(general_info));
}

[HttpGet]
[ChildActionOnly]
public ActionResult GenInfoSummary(int id = 0)
{

    return View(new QuotesViewModel(/* whatever info you need from id */));
}

[HttpGet]
[ChildActionOnly]
public ActionResult QuoteDataSummary(int id = 0)
{

    return View(new QuotesViewModel(/* whatever info you need from id */));
} 
```

在您看来，假设您的 QuotesViewModel 具有 Id 属性

```
@model SourceMvc.DAL.QuotesViewModel
@{
    ViewBag.Title = "QuoteSummary";
 }

<h2>Quote Summary</h2>

@Html.Action("GenInfoSummary", Model.Id);
@Html.Action("QuoteDataSummary", Model.Id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:27:34.197

该值名称来自路由定义。这就是为什么你不能设置它，路由从 URL 中提取它并且该值优先。您的问题的解决方案是按照建议在操作中重置它，或者调整您的路由定义。

# perl - Mojo::Dom 对象的 `at` 方法有什么作用？

> ID：15571348
> 
> 赞同：3
> 
> 时间：2013-03-22T13:17:46.743
> 
> 标签：perl, mojolicious

刚刚遇到以下代码：

```
use warnings;
use strict;
use Data::Dumper;
use lib './lib/lib/perl5';

use Mojo::DOM;

my $dom = Mojo::DOM->new($html);
my $table = $dom->at('table');
for my $record ($table->children('tr')->each) 
my %record = map { $_->text } $record->children('td')->each; 
```

该方法在这里究竟做了`at`什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T15:10:59.710

[`find`](https://metacpan.org/module/Mojo%3a%3aDOM#find)它是返回第一个匹配项的特殊情况。`find`返回一个`Mojo::Collection`对象（blessed arrayref），其中填充了`Mojo::DOM`表示匹配的对象。使用时，`at`您会直接将第一个匹配项作为`Mojo::DOM`对象。这只是方便。其实方法就是

```
sub at { shift->find(@_)->[0] } 
```

提供的代码跳过了 Mojo::Collection 的一些功能。我可以把上面写成：

```
my $dom = Mojo::DOM->new($html);
my @records = $dom->at('table')->find('tr td')->pluck('text')->each; 
```

当然要看具体情况。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T13:20:58.370

[`at`](http://p3rl.org/Mojo%3a%3aDOM#at)，在这种情况下，是在变量上调用的方法，该`$dom`变量是 的实例[`Mojo::DOM`](http://p3rl.org/Mojo%3a%3aDOM)。文档告诉我们该`at`方法用于

> 使用 CSS 选择器查找单个元素。支持 Mojo::DOM::CSS 中的所有选择器。

# phpquery - phpQuery查找标签的类型

> ID：15571349
> 
> 赞同：0
> 
> 时间：2013-03-22T13:17:52.593
> 
> 标签：phpquery

我需要能够确定我使用 phpQuery 选择的标签类型。

那么，如果我有一个元素的引用，我怎么能很容易地找出它的标签类型呢？

在 jquery/js 中，tagName 就足够了，或者 prop('tagName')

但是在phpQuery中我似乎找不到一个直接的函数来做到这一点..

```
$doc = phpQuery::newDocumentFilePHP($ftp_file['local_path']);
if(!pq('.clasToFind')->length) {
      $tagType = pq('.clasToFind')->tagName;
} 
```

最佳答案正则表达式是这里的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:19:53.600

tagName 是一个 DomNode 属性。所以当你迭代时：

```
foreach(pq('.clasToFind') as $el){
  echo $el->tagName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-17T21:45:38.577

在这里查看我的答案：[如何使用 phpquery 查找标签名称？](https://stackoverflow.com/questions/31645478/how-to-find-tag-name-using-phpquery/40096122#40096122)

您需要调用`get`以指向集合的第一个元素，即使它只有一个元素。因此，您的代码将是这样的：

```
$doc = phpQuery::newDocumentFilePHP($ftp_file['local_path']);
if($doc->find('.clasToFind')->length) {
      $tagType = $doc->find('.clasToFind')->get(0)->tagName;
} 
```

# javascript - 在 Foundation 3 中使用 Modernizr 来检测设备是否是手机？

> ID：15571352
> 
> 赞同：1
> 
> 时间：2013-03-22T13:17:55.877
> 
> 标签：javascript, responsive-design, zurb-foundation, modernizr

我正在 Foundation 3 中构建一个响应式站点。

剩下的一个症结是排行榜广告。我希望有一个广告位在台式机和平板电脑上显示排行榜广告，但在手机上显示特定于手机的广告（因为排行榜显然不适合）。

我与 Doubleclick（我们的广告供应商）进行了交谈，他们建议在广告加载一个或另一个广告调用的位置使用 javascript 浏览器嗅探器内联。

由于 Foundation 使用 Modernizr，我一直在寻找一种方法来利用它来检测要投放的广告。但是查看它的文档，我什么也没看到。触摸是唯一相关的，但包括平板电脑；我只想定位手机。

在 Modernizr 中是否有这样做的，或者我应该求助于 navigator.userAgent？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:24:47.810

走用户代理之路可能是矫枉过正。

> 我只想定位手机

即使使用 Modernizrs 功能检测，*准确地*将手机与平板电脑区分开来也是一件令人头疼的事情。

如果您的核心问题是显示正确尺寸的广告，为什么不直接使用用户视口来确定广告尺寸？

例如

```
if($(window).width() < desktopAdWidth){
      // do mobile ad stuff..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:06:36.617

如果您想使用 Modernizr 进行简单检查，您可以检查 Touch 支持

```
if ( Modernizr.touch ) {
   // mobile
} else {
   // desktop
} 
```

当然，这不是最正确的解决方案，因为有些手机不支持触摸事件。如果您想对移动设备进行更彻底的检查，`navigator.userAgent`我想现在正确的方法是检查。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-16T18:12:29.437

我正在使用 Modernizr.mq() 来评估屏幕尺寸和像素密度的组合。我相信任何像素密度高于 1.0 的东西都是可移动的。

此外，根据文档，触摸检测不可靠，因为 WebOS 不报告触摸，我怀疑 Windows 8 支持触摸的 PC 上的未来版本的浏览器将开始报告触摸。

# r - 在R中变换位置矩阵

> ID：15571354
> 
> 赞同：0
> 
> 时间：2013-03-22T13:18:10.080
> 
> 标签：r, matrix, location, transform

我在 csv 文件中有一个 x、y 和 z 矩阵，其中 x 和 y 是 z 值的物理位置。第一列是 x 位置，第一行是 y 位置。

```
 0  1  2  3  4  5  6      
0  z values   
1    
2    
3    
4 
```

我想建立一个三列的矩阵和/或数据框，例如：

```
X  Y    Z  
0  0  6.7
0  1  9.0 
```

等等。

目的是创建这些数据的地形图或 xyz 图。

关于清理这个有什么想法吗？

```
raw <- as.data.frame(read.csv(choose.files(), header = FALSE))
raw <- raw[2:15, 2:29]
rownames(raw) <- 0:13
colnames(raw) <- 0:27
g <- transform(expand.grid(x=as.numeric(rownames(raw)), 
                           y=as.numeric(colnames(raw))), 
               z=unlist(raw)) 
```

第二行是`raw`仅声明为`z`值。

关于概括第二、第三和第四行的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:26:23.887

试试这个：

```
transform(expand.grid(x=as.numeric(rownames(df)), 
                      y=as.numeric(colnames(df))), 
                      z=unlist(df)) 
```

测试数据（来自@Roland）

```
set.seed(42)
m <- matrix(rnorm(25),ncol=5)
df <- as.data.frame(m)
rownames(df) <- colnames(df) <- 0:4

#    x y           z
# 01 0 0  1.37095845
# 02 1 0 -0.56469817
# 03 2 0  0.36312841
# 04 3 0  0.63286260
# 05 4 0  0.40426832
# 11 0 1 -0.10612452
# 12 1 1  1.51152200
# 13 2 1 -0.09465904
# 14 3 1  2.01842371
# 15 4 1 -0.06271410
# 21 0 2  1.30486965
# 22 1 2  2.28664539
# 23 2 2 -1.38886070
# 24 3 2 -0.27878877
# 25 4 2 -0.13332134
# 31 0 3  0.63595040
# 32 1 3 -0.28425292
# 33 2 3 -2.65645542
# 34 3 3 -2.44046693
# 35 4 3  1.32011335
# 41 0 4 -0.30663859
# 42 1 4 -1.78130843
# 43 2 4 -0.17191736
# 44 3 4  1.21467470
# 45 4 4  1.89519346 
```

# internet-explorer-8 - IE8中的Highcharts yAxis文本旋转问题

> ID：15571359
> 
> 赞同：4
> 
> 时间：2013-03-22T13:18:33.550
> 
> 标签：internet-explorer-8, highcharts

![演示](../Images/919ee3df1e98899f7ab25b16ebb17db2.png)

嗨，我正在使用 Highcharts 库来绘制图表，但是我在 Internet Explorer 中遇到了 yAxis 的问题。

如何在 IE8 和 IE7 中正确旋转显示 yAxis 文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-20T14:03:56.990

我有同样的问题，我发现这个问题是由 ie8 模拟器引起的。因此，如果您使用本机 ie8（来自 windows xp 的 ie8），将毫无问题地工作。在 highcharts 代码中，有一种方法可以创建 css 属性，在此基础上，highcharts 会为每个浏览器创建属性。如果是-ms-transform，如果是mozilla moz-transform，如果是web-kit ...

但是ie9之前的浏览器不支持css3旋转，所以有一个矩阵旋转，而且这个家伙（progid：DXImageTransform.Microsoft.Matrix）在ie8-模拟器上不起作用。

尝试在 winxp 本机 ie8 上运行您的代码，并且可以正常工作。;D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:18:20.323

根据您对问题的描述，我相信这会有所帮助。请注意，唯一的解决方法是将背景颜色应用于标签。

[https://github.com/highslide-software/highcharts.com/issues/663](https://github.com/highslide-software/highcharts.com/issues/663)

# php - 使用 MySqli 进行多个查询

> ID：15571363
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:18:38.907
> 
> 标签：php, mysqli

我正在使用 PHP/MySqli 进行查询，如下所示：

```
$sql = $mysqli->prepare("SELECT * FROM rooms
WHERE 1
LIMIT 0, 30 ");

$result = "['Number', 'Status', 'Category', 'Pbx Number', 'Price for today'],";
$sql->execute();
$sql->bind_result($id, $number, $status, $category, $pbx);

while ($sql->fetch()) {

$result .= " ['$number', '$status', '$category', '$pbx',"  . priceForRoom($mysqli, $number, time()) . "],";

}

$sql->free_result();
return ($result); 
```

一切正常，只要`priceForRoom()`不需要连接到 mysqli db 即可返回值。但是，一旦我实施`priceForRoom()`和使用 mysqli，我就会收到这个错误：

```
Commands out of sync; you can't run this command now 
```

很多人都遇到了同样的错误，但我仍然不明白我该如何解决这个问题。我不想将结果存储在数组中，如何在`mysqli_store_result`不采用程序样式的情况下使用？我想保持我的代码面向对象：我应该要求 mysqli 在哪里存储结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:24:26.107

您需要将获取的结果存储到变量中，然后才能再次使用它们。

因此

```
$sql->bind_result($id, $number, $status, $category, $pbx);
while ($sql->fetch()) {
  $sql->store_result(); 
```

[`store_result()`](http://php.net/manual/en/mysqli-stmt.store-result.php)在 php.net 上阅读更多信息。

# vb.net - 使用 SevenZipSharp.dll 压缩文件

> ID：15571364
> 
> 赞同：1
> 
> 时间：2013-03-22T13:18:41.987
> 
> 标签：vb.net, compression, sevenzipsharp

我想使用`vb.net`and压缩和移动文件`SevenZipSharp.dll`

`c:\Backup\FULLBackup.bak -> c:\Archive\20130322.7z`

我添加了一个参考 SevenZipSharp.dll

```
Imports SevenZip   

SevenZip.SevenZipCompressor.SetLibraryPath(System.AppDomain.CurrentDomain.BaseDirectory & "\SevenZipSharp.dll")

Dim theCompressor As New SevenZipCompressor()
            With theCompressor
                .ArchiveFormat = OutArchiveFormat.SevenZip
                .CompressionMode = CompressionMode.Create
                .CompressionMethod = CompressionMethod.Default
                .DirectoryStructure = False
                .CompressionLevel = CompressionLevel.Normal
            End With

theCompressor.CompressFilesEncrypted("c:\Archive\20130322.7z","c:\Backup\FULLBackup.bak") 
```

我收到一个错误：`Can not load 7-zip library or internal COM error! Message: library is invalid.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T16:37:21.563

我认为这只是 LibraryPath 不能指向“ **SevenZipSharp.dll** ”而是“ **7z.dll** ”的事实。 [http://blog.jongallant.com/2011/10/7-zip-dll-file-does-not-exist.html#.UaOLk0DxobA](http://blog.jongallant.com/2011/10/7-zip-dll-file-does-not-exist.html#.UaOLk0DxobA)

# c++ - 将参数传递给作为另一个类成员的类的构造函数

> ID：15571368
> 
> 赞同：3
> 
> 时间：2013-03-22T13:18:55.677
> 
> 标签：c++, class, parameters, constructor

我有一个名为 Bar 的类，在这个类 Bar 中有一个 Foo 类型的对象（一个类）。类 Bar 有 3 个参数，x、y 和 z。Foo 有 2 个参数，y 和 z。

目前我正在这样做：

```
class Bar {
 public:
  Bar(int x, int y, int z) { 
      foo = new Foo(y, z);
      do something with x;
  }

 private:
  Foo * foo;
}; 
```

我记得在一本书中看到了另一种使用冒号的方法，但我不记得具体是如何做到的。

做这样的事情的标准或通常的方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T13:20:57.357

使用[初始化列表](http://www.parashift.com/c++-faq/init-lists.html)并避免动态分配：

```
class Bar {
public:
    Bar(int x, int y, int z) : foo(y, z) {}
private:
    Foo foo;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:20:47.040

```
class Bar {
 public:
  Bar(int x, int y, int z) : foo(y, z) { 
      do something with x;
  }

 private:
  Foo foo;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:44:26.770

你的困惑线应该是

```
... 
Bar(int x, int y, int z) : foo(new Foo(y,z)) { 
... 
private: 
Foo* foo; 
... 
```

我看到其他答案不使用指针。但正确的应该是这个。

# http - 302重定向是否支持方法转发？

> ID：15571376
> 
> 赞同：0
> 
> 时间：2013-03-22T13:19:12.177
> 
> 标签：http, protocols, http-protocols

我们在我的公司有一个快捷服务，它基本上提供了将短别名重定向到完整 URL 的功能。服务器运行一个简单的 http 重定向 ( **302** ) 服务，该服务使用主机请求标头对基于文件系统的数据存储进行查找。

我有一个 Resful Web Applciation 并且所有**GET**请求都可以正常工作，但是**POST/PUT**请求没有到达服务器。

302“重定向”是否默认保留原始请求的方法，或者它被 GET 类型覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:37:10.163

302一般是按照303的规定来实现的。为了保持原来的方法，改用307。

另请参阅[HTTP 状态代码定义的](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)[302](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.3)部分：

> 注意：RFC 1945 和 RFC 2068 指定不允许客户端更改重定向请求的方法。然而，大多数现有的用户代理实现将 302 视为 303 响应，无论原始请求方法如何，都对 Location 字段值执行 GET。状态码 303 和 307 已被添加用于希望明确明确期望客户端做出何种反应的服务器。

[303](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4)指定应该由 GET 请求新位置。[307](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.8)保持原来的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:28:03.747

对于 302，POST 总是重写为 GET。有时还有其他方法（取决于浏览器的损坏程度，请参阅[http://greenbytes.de/tech/tc/httpredirects/](http://greenbytes.de/tech/tc/httpredirects/)）。

# javascript - 销毁记录实际上并没有删除它们

> ID：15571383
> 
> 赞同：0
> 
> 时间：2013-03-22T13:19:43.440
> 
> 标签：javascript, spine.js

我遇到了一个问题，在模型对象上调用 destroy() 会触发“destroy”事件，但实际上并没有丢弃模型对象。

我正在使用关系，但似乎遇到了有或没有关系的问题。

```
var stagelet = stage.stagelets().findByAttribute("reference", id);
stagelet.destroy(); 
```

触发销毁事件，然后调用：

```
stage.stagelets().all(); 
```

仍将返回最近销毁的对象。是否存在这些被破坏的物品留在商店中的情况，或者我应该在其他地方寻找我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:16:17.273

这看起来像一个错误，被销毁的对象不应该由 .all() 返回

如果您可以通过 github 上的拉取请求提交测试用例，我们可以进一步研究。

# c# - 如何分隔 CSV 分隔的数据并相应地存储值？

> ID：15571387
> 
> 赞同：1
> 
> 时间：2013-03-22T13:19:53.727
> 
> 标签：c#, parsing, csv

我在模式中有 CSV 数据

```
A,B,C,D,E,F,G

C,F,G,L,K,O,F

a,b,c,d,e,f,g

f,t,s,n,e,K,c

B,F,d,e,t,m,A

```

我希望这些数据以以下形式存储：

```
A B C D

B,C,D,E

C,D,E,F

D,E,F,G
.
.
.

```

当我尝试按照以下方式进行操作时，我在中间缺少一种模式。例如：`C,D,E,F`

这是我的代码：

```
static void Main(string[] args)
{
    FileStream fs = new FileStream("studentSheet.csv", FileMode.Open);
    StreamReader reader = new StreamReader(fs);
    List<string> subline = new List<string>();
    string line = "";
    while ((line = reader.ReadLine()) != null)
    {
        string[] splitstring = line.Split(';');
        string ft = null;
        int i =0;
        while(i <( splitstring.Length - 3)+1)
        {
            ft = splitstring[i] + "," + splitstring[i+1]
                + "," + splitstring[i+2] +","+ splitstring[i+3];
            subline.Add(ft);
            i = i + 1;
        }

    }
    foreach(string s in subline)
        Console.WriteLine(s);
    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:27:02.650

假设您可以将所有内容读入一个名为 的大列表中`input`，并且您不需要它非常快，您可以这样做：

```
List<string> output = Enumerable.Range(0, input.Length - 4)
    .Select(i => String.Join(",", input.Skip(i).Take(4)))
    .ToList(); 
```

# java - 社交网络意图 Android

> ID：15571390
> 
> 赞同：0
> 
> 时间：2013-03-22T13:19:57.213
> 
> 标签：java, android, android-intent, youtube

在我的应用程序中，我有几个不同的社交媒体链接，来自不同的平台，我试图建立一个意图来启动适当的应用程序（如果有的话）。如果不放弃浏览器的链接。

例如有脸书：

```
facebook://facebook.com/username 
```

这很好用，如果我启动了 facebook 应用程序并加载了给定的地址。

现在同一个用户还拥有googleplus、twitter、Xing、Youtube。

如果我试试这个：

```
String socialNetwork = "http://m.youtube.com/user/username"
startActivity(Intent.createChooser(new Intent(Intent.ACTION_VIEW, Uri.parse(socialNetwork)), "Open with:")); 
```

该地址在浏览器窗口中打开。但我希望它与安装的 YouTube 应用一起打开。或 twiiter 或 googleplus 或 xing 基于我尝试打开的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:47:59.183

据我了解，要做这种工作，我们所拥有的就是 ACTION_VIEW。没有“社交网络意图”。您必须手动检查要自己打开的应用程序。例如，[这个](https://stackoverflow.com/questions/574195/android-youtube-app-play-video-intent)是针对 Youtube 的。[这](https://stackoverflow.com/questions/11105103/open-page-in-twitter-app-from-other-app-android)是推特。

希望这可以帮助。

# php - 输入值 0 = 空？

> ID：15571391
> 
> 赞同：1
> 
> 时间：2013-03-22T13:20:01.037
> 
> 标签：php, html, forms, input, null

我有一个页面，您可以在其中注册您的狗，并且我希望所有这些字段都是必需的：

```
$required_fields = array('name', 'age', 'gender', 'breed', 'size');
foreach ($_POST as $key => $value) {
    if (empty($value) && in_array($key, $required_fields) === true) {
        $errors[] = 'All fields marked with * are required.';
        break 1;
    }
} 
```

问题是，如果有人输入 0（如果狗是小狗，我会指示他们这样做），提交似乎将该字段读取为空（给我这个错误）。我已经进一步检查删除任何非整数等，但我仍然认为用户的最佳解决方案和最简单的形式是让他们能够输入 0 作为值。无论如何，有什么办法可以让我的 php 代码读取值不为空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:21:34.957

从[手册](http://www.php.net/manual/en/function.empty.php)：

以下内容被认为是空的：

```
"" (an empty string)
0 (0 as an integer)
0.0 (0 as a float)
"0" (0 as a string)
NULL
FALSE
array() (an empty array)
$var; (a variable declared, but without a value) 
```

您可能考虑的解决方法是执行以下操作：

```
if ((empty($value) && $value != 0) && in_array($key, $required_fields) === true) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:32:38.413

检查`$value === null`

```
if ($value === null && in_array($key, $required_fields) === true) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:21:14.207

PHP 将这些视为空的：

```
null
0
""
"0"
false 
```

所以你有两个选择。在其上附加一些东西，例如 value`a0`或 use `isset`。

# php - 只允许用户下载图片

> ID：15571393
> 
> 赞同：0
> 
> 时间：2013-03-22T13:20:09.137
> 
> 标签：php

我编写了一个脚本并将它们存储在本地主机中。我只想知道我怎样才能允许用户只下载图像。

我的意思是，如果脚本中有漏洞，人们可以从服务器下载任何文件。我在这里搜索一些具有高安全性的脚本。所以用户不能下载除了图像之外的任何东西。

我在这里找到了一些东西。 [如何允许用户下载图片（.gif、.png、.jpeg）？](https://stackoverflow.com/questions/12046334/how-can-i-allow-users-to-download-pictures-gif-png-jpeg)

真的安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:52:04.993

我这样做的方式是以某种方式设置层次结构。

主文件夹

*   索引（服务器根目录）
    *   索引.php
    *   图片（文件夹）
*   页面
*   文件

这意味着文件和页面位于服务器根文件之上，因此用户无法访问它们（除非您编写了一个提供文件的脚本）。您可以将图片移动到服务器根目录之外，但是您**必须**编写一个脚本来从根目录之外获取图像，否则服务器在获取图像时不喜欢它。

# java - OSGI 中的服务和组件

> ID：15571394
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:20:11.723
> 
> 标签：java, osgi, equinox, osgi-bundle, knopflerfish

我对 OSGI 概念有一些愚蠢的怀疑，但需要澄清它们才能更好地理解概念。谁能告诉我 OSGI 服务和组件之间有什么区别。我所知道的是，Service 就像 java 中的一个接口文件，可以由不同的服务或组件使用。而组件就像服务的特定实现。

如果我错了，请让我知道，或者建议一些链接，我可以从中得到很好的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:22:22.693

OSGi 核心规范定义了服务模型，它是 OSGi 概念的关键部分。服务是实现声明类型（通常是接口）的对象（实例）。OSGi 框架提供了服务层，它是服务提供者和服务消费者之间的代理。

DS 引入了服务组件的概念，它们是捆绑中的类，由 DS 运行时 (SCR) 管理。组件由 SCR 读取的包中的 XML 描述。这些组件一旦被实例化并且如果被声明为服务，就可以被 SCR 注册为服务。

所以组件可以是服务（但它们不一定是）并且它们可以使用服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:44:22.630

OSGi 发展了服务的概念，因此包可以减少它们与其他包的耦合 - 即。实现松耦合。“最松散”的耦合来自使用动态服务，其中产生服务的捆绑包在消费者注册以使用这些服务时动态启动。动态服务模型与 OSGi 一起经历了几次演变，包括服务注册和事件侦听、服务跟踪器，最后是声明式服务。

除了最后一个（声明式服务）之外，服务注册代码都放在捆绑包的激活器中。使用声明式服务，公开服务的包称为组件，它在框架理解的 component.xml 文件中声明 - 不需要激活器。在 Eclipse IDE 中，您可以通过右键单击包并添加“组件定义”来使用声明式服务。有一本关于该主题的非常好的书，它通过教程带您了解该技术：

[OSGi 和 Equinox](http://www.amazon.co.uk/OSGi-Equinox-Creating-Modular-Systems/dp/0321585712/ref=sr_1_2?ie=UTF8&qid=1363959797&sr=8-2)

# python - 在 Python 中使用输入建议进行输入

> ID：15571397
> 
> 赞同：1
> 
> 时间：2013-03-22T13:20:28.090
> 
> 标签：python, windows, input

我不知道如何要求用户输入同时给他一个提示。

当我使用`raw_input("some description")`一个小窗口时，用户必须输入一些东西，因为输入是完全空的。如何达到同样的效果，但已经写入输入框（用户的提示，他/她可以接受或简单地更改它）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:34:08.820

之前已经回答过：

[https://stackoverflow.com/a/2533142/1217949](https://stackoverflow.com/a/2533142/1217949)

> 标准库函数 input() 和 raw_input() 没有这个功能。如果您使用的是 Linux，您可以使用 readline 模块来定义一个使用预填充值和高级行编辑的输入函数：

```
def rlinput(prompt, prefill=''):
   readline.set_startup_hook(lambda: readline.insert_text(prefill))
   try:
      return raw_input(prompt)
   finally:
      readline.set_startup_hook() 
```

# jquery - Rails Jquery/Ajax 更改事件未在 Rails 3.2 上执行

> ID：15571398
> 
> 赞同：0
> 
> 时间：2013-03-22T13:20:37.013
> 
> 标签：jquery, ruby-on-rails-3.2

更新大家好，我是 Ajax 和 jquery 的新手，请帮忙。我只是看不出这个片段的问题。基本上在我看来，当用户从下拉选择框中选择一门课程时，应该加载一批属于该课程的学生。目的是为这批学生创建一个考试。这是我的 create_exam 视图中下拉列表的代码：

```
<%= select_tag :course_id, 
options_for_select(
Course.find(:all,:select=>"code,id").collect{|c| [c.code,c.id]}),
:data => { :remote => true, :url => url_for(:controller => "exam", 
                                     :action => "update_batch",
                                     :filter =>"course")} %> 
```

我的考试控制器中的 update_batch 操作如下所示： def update_batch @batch = Batch.find_all_by_course_id(params[:course_name], :conditions => { :is_deleted => false, :is_active => true })

```
respond_to do |format|
format.html
format.js 
```

结尾

结尾

我使用以下 javasscript 创建了文件 'update_batch.js.erb'： $("#update_batch").html("<%= escape_javascript(render('exam/update_batch')) %>")

我的 application.js 文件包含希望触发选择框的 onchange 事件的 jquery：

```
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree .

$(function($) {
$("#course_id").change(function() {
$.ajax({
url: '<%=url_for :controller => 'exam',:action => 'update_batch' %>',
type: 'GET',
data: 'course_id=' + this.value,
dataType: 'script'
  })
}); 
```

});

下拉选择框正在填充，当我选择一门课程时，应该呈现“update_batch”部分。从下面显示的终端输出中，很明显部分正在呈现：ExamController#update_batch 作为 JS 参数处理：{"filter"=>"course", "course_id"=>"1"} Batch Load (0.2ms) SELECT "batches".* FROM "batches" WHERE "batches"."is_deleted" = 'f' AND "batches"."is_active" = 't' AND "batches"."course_id" IS NULL 渲染考试/_update_batch.html .erb (0.6ms) 渲染的考试/update_batch.js.erb (2.1ms) 在 6ms 内完成 200 OK (Views: 4.5ms | ActiveRecord: 0.2ms)

问题是这部分没有显示在网页上。我的问题是：我的 jquery 代码有什么问题吗，这里甚至有必要吗？为什么部分没有显示在网页上？_update_batch 部分如下所示：

```
<% @batch.each do |batch| %>
  <%= link_to batch.course.full_name, batch_exam_groups_path(batch) %> : <%= batch.full_name %> 
<% end %> 
```

我在 Rails 3.2.8 上，并且 jquery-rails 已正确安装。我哪里会出错？感谢您的帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:17:51.863

我认为您不能将 data-remote 与 options_for_select 一起使用，也许我错了。当我需要在选择中提交值时，我会执行以下操作：

```
$("#select_id").change(function() {
  var id = $(this).val();

  $.ajax({
    url: "/url_here",
    type: "GET",
    data: {"course_id": id},
    dataType: "choose_the_dataType"
    success: function(data) {
      //do something here 
    }
  });
}); 
```

# html - W3C 验证错误

> ID：15571402
> 
> 赞同：1
> 
> 时间：2013-03-22T13:20:52.843
> 
> 标签：html

我一直在努力寻找这个 W3C HTML 验证错误的解决方案，而不是我应该做的。我仍然无法弄清楚如何解决这个问题。如果这里有人可以帮助我，那就太好了。

```
Line 109, Column 27: The for attribute of the label element must refer to a form control. 
                    <label for="location">Location</label>

Line 162, Column 27: The for attribute of the label element must refer to a form control. 
                    <label for="location">Location</label> 
```

代码

```
<fieldset id="meat">
    <legend>Meat Toppings</legend>
       <label for="location">Location</label>
        <img  src="full.png" alt="full">
        <img src="left.png" alt="left">
        <img src="right.png" alt="right">
        <img id="location" src="none.png" alt="none"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:26:26.987

a 的目的`label`是描述一个表单元素。使用 a`label`时，该`for`属性需要与`id`它所描述的表单元素的 相同。

```
<label for="location">Location:</label><input type="text" id="location" name="location" /> 
```

您收到此错误是因为您为`for`不存在或未`id`正确编辑的表单元素提供属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:22:05.677

> 与标签元素在同一文档中的可标记表单相关元素的 ID。文档中第一个具有与 for 属性值匹配的 ID 的此类元素是该标签元素的标签控件。

代码中没有表单控件。标签元素的唯一目的是标记表单控件。改成`<img id="location"`表单控件；输入、文本区域、按钮或选择。

[https://developer.mozilla.org/en-US/docs/HTML/Element/label](https://developer.mozilla.org/en-US/docs/HTML/Element/label)

# ios - iOS 6：尝试从不同路径的 2 个数据库中进行选择

> ID：15571404
> 
> 赞同：1
> 
> 时间：2013-03-22T13:20:54.017
> 
> 标签：ios, sqlite

我有两个数据库。

1.  ch_coins.db 是 [NSBundle mainBundle] 中 tableview 的只读数据。
2.  文档中的 User_data.sqlite

我尝试结合从两个数据库中选择并将数据填充到对象。我的方法是这样的：

```
-(NSMutableArray*)returnSubCountries
{
NSString *path = [[[NSBundle mainBundle] resourcePath]
                  stringByAppendingPathComponent:databaseName];

NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];
NSString *userDB = [documentsDir stringByAppendingPathComponent:user_data];

NSMutableArray *subCountiresArr=[[NSMutableArray alloc]init];

if (sqlite3_open([path UTF8String], &database) == SQLITE_OK)
{

    /*const char *sqlSubCountries="SELECT subCountryID,subCountryName,subCountryComment,image,priority,hasRegions,navigationKey\
    FROM subCountries\
    ORDER BY priority ASC";*/
    const char *sqlSubCountries="SELECT subCountryID,subCountryName,subCountryComment,image,priority,hasRegions,navigationKey,usdb.quantity\
    attach database 'userDB' as usdb\
    INNER JOIN usdb on subCountries.subCountryID=usdb.refID\
    FROM subCountries\
    ORDER BY priority ASC";
    sqlite3_stmt *statement;
    int sqlResult = sqlite3_prepare_v2(database, sqlSubCountries, -1, &statement, NULL);
    if ( sqlResult== SQLITE_OK)
    {
        while (sqlite3_step(statement) == SQLITE_ROW)
        {
            SubCountry *sbCountryObj=[[SubCountry alloc]init];
            sbCountryObj.subCountryID=sqlite3_column_int(statement, 0);
            char *subCountryName=(char *)sqlite3_column_text(statement, 1);
            char *subCountryComment=(char *)sqlite3_column_text(statement, 2);
            char *image=(char *)sqlite3_column_text(statement, 3);
            sbCountryObj.priority=sqlite3_column_int(statement, 4);
            sbCountryObj.hasRegions=(sqlite3_column_int(statement, 5)==1);
            sbCountryObj.navigationKey=sqlite3_column_int(statement, 6);
            sbCountryObj.quantity=sqlite3_column_int(statement, 7);
            sbCountryObj.subCountryName=(subCountryName)?[NSString stringWithUTF8String:subCountryName]: @"";
            sbCountryObj.subCountryComment=(subCountryComment)?[NSString stringWithUTF8String:subCountryComment]: @"";
            sbCountryObj.image=(image)?[NSString stringWithUTF8String:image]: @"";
            [subCountiresArr addObject:sbCountryObj];
        }
        sqlite3_finalize(statement);
        sqlite3_close(database);
    }
}
else
{
    //[self dbConnectionError];
}
return subCountiresArr;
} 
```

我一定做错了什么。任何帮助深表感谢。谢谢。

编辑：

```
-(NSMutableArray*)returnSubCountries
{
NSString *path = [[[NSBundle mainBundle] resourcePath]
                  stringByAppendingPathComponent:databaseName];

NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];
NSString *userDB = [documentsDir stringByAppendingPathComponent:user_data];

NSMutableArray *subCountiresArr=[[NSMutableArray alloc]init];

if (sqlite3_open([path UTF8String], &database) == SQLITE_OK)
{

    /*const char *sqlSubCountries="SELECT subCountryID,subCountryName,subCountryComment,image,priority,hasRegions,navigationKey\
    FROM subCountries\
    ORDER BY priority ASC";*/
    NSString *userDBName = [NSString stringWithFormat:@"attach database '%@' as usdb", userDB];
    const char *sqlAttachedDatabase = [userDBName UTF8String];

    const char *sqlSubCountries="SELECT subCountryID,subCountryName,subCountryComment,image,priority,hasRegions,navigationKey,usdb.quantity\
    sqlAttachedDatabase userDB as usdb\
    INNER JOIN usdb on subCountries.subCountryID=usdb.refID\
    FROM subCountries\
    ORDER BY priority ASC";
    sqlite3_stmt *statement;
    int sqlResult = sqlite3_prepare_v2(database, sqlSubCountries, -1, &statement, NULL);
    if ( sqlResult== SQLITE_OK)
    {
        while (sqlite3_step(statement) == SQLITE_ROW)
        {
            SubCountry *sbCountryObj=[[SubCountry alloc]init];
            sbCountryObj.subCountryID=sqlite3_column_int(statement, 0);
            char *subCountryName=(char *)sqlite3_column_text(statement, 1);
            char *subCountryComment=(char *)sqlite3_column_text(statement, 2);
            char *image=(char *)sqlite3_column_text(statement, 3);
            sbCountryObj.priority=sqlite3_column_int(statement, 4);
            sbCountryObj.hasRegions=(sqlite3_column_int(statement, 5)==1);
            sbCountryObj.navigationKey=sqlite3_column_int(statement, 6);
            sbCountryObj.quantity=sqlite3_column_int(statement, 7);
            sbCountryObj.subCountryName=(subCountryName)?[NSString stringWithUTF8String:subCountryName]: @"";
            sbCountryObj.subCountryComment=(subCountryComment)?[NSString stringWithUTF8String:subCountryComment]: @"";
            sbCountryObj.image=(image)?[NSString stringWithUTF8String:image]: @"";
            [subCountiresArr addObject:sbCountryObj];
        }
        sqlite3_finalize(statement);
        sqlite3_close(database);
    }
    else
    {
        NSLog(@"%s: prepare failed: %s", __FUNCTION__, sqlite3_errmsg(database));
    }
}
else
{
    //[self dbConnectionError];
}
return subCountiresArr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:58:10.287

您应该执行以下操作：

1.  运行 SQL "attach database 'full db path' as usdb"，其中 "full db path" 是数据库文件的完整路径
2.  准备并执行 SELECT 语句（从中删除“附加数据库 ...”）
3.  不需要时分离数据库“分离数据库'完整数据库路径'”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:20:42.680

You're specifying the database path as `userDB` in your SQL, but that's not the name of the database file. That is, the name of the variable that has the full path name in it, but you presumably actually have to build your SQL with that filename. For example:

```
NSString *sql = [NSString stringWithFormat:@"attach database '%@' as usdb", userDB];
const char *sqlAttachedDatabase = [sql UTF8String]; 
```

Execute that. Then, as a separate statement, you can execute your SELECT SQL that uses the `usdb` alias. And when you're done, detach the database.

Also, I notice that you're checking to see if the result is `SQLITE_OK` (which is good). But you're not showing any diagnostic information if it's not. For example, your SQL is wrong, but you're not showing a meaningful error message. Thus, if your `sqlite3_prepare_v2` fails to return `SQLITE_OK`, you should:

```
NSLog(@"%s: prepare failed: %s", __FUNCTION__, sqlite3_errmsg(database)); 
```

If you do this when you have an error, you'll be able to figure out what's wrong. Without that, you're flying blind.

* * *

A working example, where my "author" database is in the bundle, and my "book" database is in `Documents`:

```
int rc;

NSString *docsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
NSString *bookFilename = [docsPath stringByAppendingPathComponent:@"book.sqlite"];

NSString *authorFilename = [[NSBundle mainBundle] pathForResource:@"author" ofType:@"sqlite"];

sqlite3 *database;

if ((rc = sqlite3_open([authorFilename UTF8String], &database)) != SQLITE_OK)
{
    NSLog(@"%s: open failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database), rc);
    return;
}

NSString *sql = [NSString stringWithFormat:@"attach database '%@' as userdb;", bookFilename];

if ((rc = sqlite3_exec(database, [sql UTF8String], NULL, NULL, NULL)) != SQLITE_OK)
    NSLog(@"%s: attach failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database), rc);

sqlite3_stmt *statement;

sql = @"select book.*, author.* from userdb.book inner join author on author_id = book_author_id;";

if ((rc = sqlite3_prepare_v2(database, [sql UTF8String], -1, &statement, NULL)) != SQLITE_OK)
    NSLog(@"%s: prepare failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database), rc);

while ((rc = sqlite3_step(statement)) == SQLITE_ROW)
{
    // do whatever you want row by row
    NSLog(@"Row");
}

if (rc != SQLITE_DONE)
    NSLog(@"%s: step failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database), rc);

sqlite3_finalize(statement);

sql = @"detach database userdb;";

if ((rc = sqlite3_exec(database, [sql UTF8String], NULL, NULL, NULL)) != SQLITE_OK)
    NSLog(@"%s: detach failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database), rc);

sqlite3_close(database); 
```

# windows - 在批处理脚本中使用 VMMap

> ID：15571411
> 
> 赞同：0
> 
> 时间：2013-03-22T13:21:05.843
> 
> 标签：windows, memory-management, batch-file, scheduled-tasks

我正在对我们在我工作的地方运行的一些软件进行一些分析工作。该软件似乎在某些地方存在内存问题，这些问题被证明难以追踪。我们决定使用 Sysinternals VMMap 来跟踪软件使用的内存。

我们让 VMMap 使用 Windows 调度程序每 20 秒导出一次使用情况，以启动一个批处理脚本，该脚本会拉回目标进程 PID 并使用它启动 VMMap。该过程运行了一段时间，输出出现在 out 目录中，但过了一会儿它停止了。Windows 调度程序报告作业运行良好，并将在触发时启动另一个实例，再次没有输出。

经过一番调查，VMMap 似乎无法打开进程并试图通过其 GUI 报告错误。由于我们是批量运行的，因此我们看不到此错误以将其关闭。这导致产生了许多进程，但实际上并没有做任何事情。

有没有人在使用 VMMap 时遇到过这个问题，或者知道任何可能有帮助的东西？我在想可能有一些我可以通过的标志来抑制消息，或者我可以通过某种方式批量处理它，但谷歌没有帮助，也没有 Sysinternals 论坛。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:30:11.237

[VMMap](http://technet.microsoft.com/en-us/sysinternals/dd535533.aspx)是一个 GUI 工具，因此尝试以自动化方式捕获其输出将是困难的。相反，请尝试使用另一个 SysInternals 工具[Handle](http://technet.microsoft.com/en-us/bb896655)，它可以捕获许多相同的信息，但在命令行中导出/报告它，这样可以更容易地捕获它。或者，在使用 VMMap 时不要以自动重复的方式运行输出，而是让您的脚本以某种方式检测错误或缺少预期的结果/数据并停止，以便检查 GUI 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:53:53.613

所有 Sysinternals 工具在新机器上首次启动时都会弹出一个同意对话框以接受其许可。我认为您确实将该工具部署到了生产机器上，并且它试图显示同意对话框，但没有人按下确定。

他们基本上确实在机器上创建了一个注册表项，如果您需要完全自动化的部署，您可以伪造该注册表项，或者您可以在目标机器上为相关用户启动一次。

# html - 符号在 Mozilla 中无法正确显示

> ID：15571413
> 
> 赞同：0
> 
> 时间：2013-03-22T13:21:11.587
> 
> 标签：html, css, mozilla, symbols

我有一个网页问题，它只在 Mozilla 中错误地显示了一些符号。该页面是[单击此处](http://www.winmansoftware.com/FAQ.htm)在此页面中使用了很多 -> 符号。它在 Mozilla 中显示为 ®。那么我怎样才能让它在 Mozilla 中正确显示为 -> 符号。该页面具有由 micosoft word 创建的样式。我想保留它们原样。所以我可以用它来做任何 css 技巧吗？要了解我面临的错误，请转到此[页面](http://www.winmansoftware.com/FAQ.htm)并搜索软件® 单击“立即购买”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:25:42.833

您使用特定的 Microsoft 扩展：

```
<span style="mso-list:Ignore">§<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp; </span></span> 
```

并且以包围它们的样式定义字体`&quot;`显然是错误的。

我不知道 MSWord 试图做什么，但它显然不是试图为万维网构建标准的 HTML 文档。那是最新版本吗？

您必须修复生成的 HTML。

另一个问题是您的渲染依赖于 Times New Roman 字体，该字体在非 Windows 计算机中不可用。

[使用标准 HTML 并以 UTF-8 编码您的文档，您可以用简单的箭头字符](http://utf8-characters.com/arrows/)替换这些跨度。

但更好的解决方案是简单地忘记将 MSOffice 文档转换为 HTML 并构建适当的 HTML 文档的想法。

# android - 当 MediaPlayer 在不同位置播放时，如何从只读 RandomAccessFile 中读取

> ID：15571415
> 
> 赞同：1
> 
> 时间：2013-03-22T13:21:15.313
> 
> 标签：android, media-player, randomaccessfile

我有一个自定义文件格式（类似于 zip 文件），它将小文件（小图像、mp3 文件）打包成 1 个物理文件。我的 android 应用程序下载此文件，并从中显示一张图像。用户可以触摸图像，它将开始播放压缩文件中的一个小 mp3“文件”。他还可以向左或向右滑动，应用程序显示上一张或下一张图像。

为了使事情更顺利，我在内存中保存了 3 张“卡片”：当前显示的一张，前一张和下一张。这样，当它被刷卡时，我可以立即显示下一张图片。为此，我将图像和 mp3 预加载到 MediaPlayer 中。问题在于它是多线程的，因为预加载是在后台完成的。我有一个错误：当我开始播放 mp3 时，在播放过程中我滑动，我预加载的图像在中间被剪切。经过大量调试，我找到了原因：当我加载图像时，MediaPlayer 正在移动文件描述符中的文件指针，这导致下一次读取从 mp3 中间读取而不是图像。

这是代码：

```
InputStream imageStream = myPackedFile.getBaseStream("cat.jpg"); // this returns an InputStream representing "cat.jpg" from my packed file (which is based on a RandomAccessFile)
Drawable image = Drawable.createFromStream(imageStream, imagePath);

FileDescriptor fd = myPackedFile.getFD();
long pos = myPackedFile.getPos("cat.mp3");
long len = myPackedFile.getLength("cat.mp3");
player.setDataSource(fd, pos, len);
player.prepare(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:31:53.600

这对我有用：我没有创建一个 RandomAccessFile 并持有它，而是创建一个文件，每次我需要将它作为 RandomAccessFile 访问时，我都会创建一个新文件：

```
public class PackagedFile {
    private File file;
    PackagedFile(String filename) {
        file = new File(filename);
    }
    public RandomAccessFile getRandomAccessFile() {
        RandomAccessFile raf = null;
        try {
            raf = new RandomAccessFile(file, "r");
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        return raf;
    }
} 
```

上面的代码变成了：

```
InputStream imageStream = myPackedFile.getBaseStream("cat.jpg"); // this returns an InputStream representing "cat.jpg" from my packed file (which is based on a RandomAccessFile)
Drawable image = Drawable.createFromStream(imageStream, imagePath);

FileDescriptor fd = myPackedFile.getRandomAccessFile().getFD();
long pos = myPackedFile.getPos("cat.mp3");
long len = myPackedFile.getLength("cat.mp3");
player.setDataSource(fd, pos, len);
player.prepare(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:21:25.197

对于 API 级别 13 及以上，可以考虑`ParcelFileDescriptor.dup`复制文件描述符。更多信息请参考此链接： [http ://androidxref.com/4.2.2_r1/xref/frameworks/base/core/java/android/app/ActivityThread.java#864](http://androidxref.com/4.2.2_r1/xref/frameworks/base/core/java/android/app/ActivityThread.java#864)

# c++ - 带有模板的 boost::signal slot_type

> ID：15571416
> 
> 赞同：1
> 
> 时间：2013-03-22T13:21:17.743
> 
> 标签：c++, boost, boost-signals

为以下功能构建时出现构建错误：

```
template <class T> class Event {
public:
    typedef boost::signal<void (void*, const T)>    signal_t;
    typedef boost::signals::connection              connection_t;   

public:
    Event() { }

    connection_t connect(signal_t::slot_type subscriber){
        return signal.connect(subscriber);
    }
} 
```

错误：

```
error: 'class boost::signal<void ()(void*, T), boost::last_value<typename boost::function_traits<void ()(void*, T)>::result_type>, int, std::less<int>, boost::function<void ()(void*, T)> >::slot_type' is not a type 
```

我相信这与它是模板化的事实有关，但我不确定如何修复它。我试过添加，这样

```
connection_t connect(signal_t::slot_type<T> subscriber) 
```

但这只会产生另一个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T13:23:19.100

告诉编译器它是一个类型`typename`：

```
connection_t connect(typename signal_t::slot_type subscriber){
    return signal.connect(subscriber);
} 
```

问题在于这`signal_t`取决于模板参数`T`，因此您需要明确告诉编译器`signal_t::slot_type`将成为一种类型。

# c# - 拼写检查器的 C# LevenshteinDistance 算法

> ID：15571419
> 
> 赞同：0
> 
> 时间：2013-03-22T13:21:23.790
> 
> 标签：c#, levenshtein-distance

嗨，我正在使用 levenshtein 算法来计算两个字符串之间的差异，使用下面的代码。它目前提供了从“答案”到“目标”需要进行的更改总数，但我想将这些分成正在发生的错误类型。因此将错误分类为删除、替换或插入。

我尝试添加一个简单的计数，但我是新手，并不真正了解代码是如何工作的，所以不知道如何去做。

```
static class LevenshteinDistance
    {
        /// <summary>
        /// Compute the distance between two strings.
        /// </summary>
        public static int Compute(string s, string t)
        {
            int n = s.Length;
            int m = t.Length;
            int[,] d = new int[n + 1, m + 1];
            // Step 1
            if (n == 0)
            {
                return m;
            }
            if (m == 0)
            {
                return n;
            }
            // Step 2
            for (int i = 0; i <= n; d[i, 0] = i++)
            {
            }
            for (int j = 0; j <= m; d[0, j] = j++)
            { 
            }
            // Step 3
            for (int i = 1; i <= n; i++)
            {

                //Step 4
                for (int j = 1; j <= m; j++)
                {
                    // Step 5
                    int cost = (t[j - 1] == s[i - 1]) ? 0 : 1;
                    // Step 6
                    d[i, j] = Math.Min(
                        Math.Min(d[i - 1, j] + 1, d[i, j - 1] + 1),
                        d[i - 1, j - 1] + cost);
                }
            }
            // Step 7
            return d[n, m];
        }
    } 
```

提前致谢。

# javascript - 如何为 JVectorMap jquery 插件生成新的自定义地图？

> ID：15571422
> 
> 赞同：2
> 
> 时间：2013-03-22T13:21:28.353
> 
> 标签：javascript, jquery, svg, jvectormap

## **有用的链接**

*   JVectorMap：http: [//jvectormap.com/](http://jvectormap.com/)
*   购物中心示例：http: [//jvectormap.com/examples/mall/](http://jvectormap.com/examples/mall/)
*   笔记; 请查看以上链接以获取转换器链接，因为作为新成员的声誉少于 10，我不能添加超过两个链接。

* * *

## **关于购物中心**

在此问题的“有用链接”部分，我添加了一个指向购物中心示例的链接，该示例可在 JVectorMap 网站上找到。在此页面上，它解释了以下内容；使用此处提供的转换器从 SVG 创建的自定义地图示例（见注释）。请注意，如果您使用从 SVG 生成的地图，则需要按像素坐标定位标记，而不是像从 GIS 生成的地图那样按纬度和经度定位标记。

* * *

## **我需要什么帮助**

我需要为我当地的购物中心制作类似的地图，购物中心的经理已经提供了数字地图。我需要知道如何将建筑群的这种日常图像格式转换为形状文件，然后如何使用该文件和转换器来创建我自己的自定义地图。

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T00:49:17.627

我希望你熟悉 gimp 或 photoshop。我是个笨手笨脚的人，所以我这样做的方式是，我会拿你从雇主那里得到的数字地图，并在你想要包括的选定区域周围建立路径。转到您的路径选项，右键单击并将路径导出为 SVG。获得 svg 文件后，转到[http://svgto.jvectormap.com/](http://svgto.jvectormap.com/)并将文件中的 SVG 代码复制/粘贴到转换器中。这将帮助您构建地图。

请注意，您也可以将 svg 代码直接导入到您的 html 文件中，而无需使用 jvectormap。

# c# - ITextSharp 在 enddocument 处抛出 NullReference 异常

> ID：15571425
> 
> 赞同：0
> 
> 时间：2013-03-22T13:21:32.493
> 
> 标签：c#, itextsharp

我有一个代码：

```
 TextReader reader = new StringReader(html);// step 1: creation of a document-object
  var document = new Document(PageSize.A4, 30, 30, 30, 30);
  var resultPdf = new MemoryStream();
  PdfWriter.GetInstance(document, resultPdf);
  var worker = new HTMLWorker(document);
  document.Open();
  FontFactory.Register(FontFileName, "arial unicode ms");
  var st = new StyleSheet();
  st.LoadTagStyle("body", "encoding", "Identity-H");
  worker.Style = st;
  worker.StartDocument();
  worker.Parse(reader);
  worker.EndDocument();
  worker.Close();
  document.Close(); 
```

该代码在以下行失败：

```
 worker.EndDocument(); 
```

除了：

```
 System.NullReferenceException: Object reference not set to an instance of an object.
  at iTextSharp.text.FontFactoryImp.GetFont(String fontname, String encoding, Boolean embedded, Single size, Int32 style, BaseColor color, Boolean cached)
  at iTextSharp.text.FontFactoryImp.GetFont(String fontname, String encoding, Boolean embedded, Single size, Int32 style, BaseColor color)
  at iTextSharp.text.html.simpleparser.FactoryProperties.GetFont(ChainedProperties props)
  at iTextSharp.text.html.simpleparser.FactoryProperties.CreateChunk(String text, ChainedProperties props)
  at iTextSharp.text.html.simpleparser.HTMLWorker.Text(String str)
  at iTextSharp.text.xml.simpleparser.SimpleXMLParser.Flush()
  at iTextSharp.text.xml.simpleparser.SimpleXMLParser.Go(TextReader reader) 
```

我的 html 使用

```
 <div style="font-family: arial unicode ms">
  <div style="padding-left: 15px;"> 
```

不幸的是，它没有达到 100%。

有人见过吗？谢谢

# java - 在Equinox中安装签名的jar

> ID：15571432
> 
> 赞同：2
> 
> 时间：2013-03-22T13:21:44.037
> 
> 标签：java, jar, bouncycastle, equinox

我正在尝试将一个功能安装到 equinox OSGi 容器中。我通过 p2 director 命令行工具执行此操作：

```
java -jar ./plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar -application org.eclipse.equinox.p2.director -no
splash -consoleLog -debug  -repository <repositoryUrl> -installIU <featurename> -profile <profileName> -vmargs -Declipse.p2.unsignedPolicy=allow 
```

但是安装失败并显示以下错误消息：

```
!MESSAGE One or more certificates rejected. Cannot proceed with installation. 
```

这可能是因为该功能包含来自 bouncycastle 的已签名 jar，并且用于签署这些 jar 的证书被拒绝。

有人知道我该如何解决这个问题吗？

当我通过 GUI 安装工具安装该功能时，我没有问题，但在安装过程中我收到一个弹出窗口，询问我是否要信任证书链。如果我在此对话框中单击“是”，该功能将正确安装。

氪，

弗雷德里克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:40:34.867

这似乎是 p2 Director 中的一个错误/缺失功能。解决方法是将证书安装到您的 JVM 中。您可以从签名的 JAR 文件中提取原始证书。

[（您可以在这篇文章](https://stackoverflow.com/questions/13692917/extract-raw-x-509-certificate-from-a-signed-apk-or-jar)中找到有关如何提取证书的更多信息。）

# spring - 在实现类中注入存储库而不使用 @autowired 在 spring 数据中使用 xml

> ID：15571441
> 
> 赞同：5
> 
> 时间：2013-03-22T13:22:20.350
> 
> 标签：spring, jpa, spring-data-jpa

我是 spring-data 的新手，我想尝试使用 spring 数据而不使用`@autowired`过度存储库。我只想通过 xml 直接注入存储库，因为我无法从 xml 获取我的实现类中的存储库实例，使用基于 xml 的配置的原因是这是我以前的服务层和控制器不支持任何注释功能所以我只需要使用 spring 数据操作 dao 层这是我的 xml 配置

```
 <?xml version="1.0" encoding="UTF-8"?>
        <beans xmlns="http://www.springframework.org/schema/beans"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
            xmlns:context="http://www.springframework.org/schema/context"
            xmlns:jpa="http://www.springframework.org/schema/data/jpa"
            xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
                http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.2.xsd http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-2.5.xsd">

            <context:component-scan base-package="com.nousinfo.tutorial" />
            <!-- Database -->
            <bean id="datasource"
                class="org.springframework.jdbc.datasource.DriverManagerDataSource">
                <property name="driverClassName" value="com.mysql.jdbc.Driver" />
                <property name="url" value="jdbc:mysql://192.168.25.30:3306/employee" />
                <property name="username" value="***" />
                <property name="password" value="*****" />
            </bean>

            <!-- Entity Manager -->
            <bean id="entityManagerFactory"
                class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
                <property name="dataSource" ref="datasource" />
                <property name="persistenceUnitName" value="EmployeeApp" />
            </bean>

            <!-- Transaction Manager -->
            <beanid="transactionManager"                                                                               class="org.springframework.orm.jpa.JpaTransactionManager">
                <property name="entityManagerFactory" ref="entityManagerFactory" />
            </bean>

    <!--- here i having problem on injecting the bean of employeeRepositories---->
            <bean id="employeeDaoImpl" class="com.nousinfo.tutorial.repository.impl.EmployeeDAOImpl">
                <property name="employeeRepository" ref="employeeRepository" />
            </bean>
   <bean id="employeeRepositories" class="com.nousinfo.tutorial.dao.EmployeeRepositories"/>

            <!-- Jpa Repositories -->
            <jpa:repositories base-package="com.nousinfo.tutorial.dao"></jpa:repositories>

  </beans> 
```

这是我的persistence.xml

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
version="1.0">
<persistence-unit name="EmployeeApp" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>com.nousinfo.tutorial.model.Department</class>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
        <property name="hibernate.hbm2ddl.auto" value="update" />
        <property name="hibernate.show_sql" value="true" />
    </properties>
</persistence-unit> 
```

这是我的员工资料库

```
public interface EmployeeRepositories extends JpaRepository<Employee, Long> {
    public List<Employee> findByFirstName(String name);

    @Query("FROM Employee emp WHERE emp.firstName = :firstname or emp.lastName = :lastname")
    List<Employee> getEmployeesByName(@Param("lastname") String lastname,
            @Param("firstname") String firstname);

    List<Employee> findByLastNameOrderByFirstNameAsc(String lastname);

    List<Employee> findByLastNameOrderByFirstNameDesc(String lastname);

    List<Employee> findByDepartmentId(String departmentId); 
```

}

这是我的实现

```
public class EmployeeDAOImpl {

EmployeeRepositories employeeRepositories ;

public void setEmployeeRepositories (EmployeeRepositories employeeRepositories ) {
    this.employeeRepositories = employeeRepositories ;
}

public List<Employee> getAllEmployees() {
    return employeeRepositories.findAll();
} 
```

这样我就调用了测试方法

```
 ApplicationContext applicationContext=new ClassPathXmlApplicationContext("MyBean.xml");
        EmployeeDAOImpl daOImpl=(EmployeeDAOImpl)applicationContext.getBean("employeeDaoImpl");
daOImpl.getAllEmployees(); 
```

由于映射错误，异常即将到来，所以请提供正确的映射，我将不胜感激

这是我的例外

```
 Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeDaoImpl' defined in class path resource [mybeans.xml]: Cannot resolve reference to bean 'employeeRepositories' while setting bean property 'employeeRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeRepositories' defined in class path resource [mybeans.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.nousinfo.tutorial.dao.EmployeeRepository]: Specified class is an interface
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1317)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1076)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:574)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.nousinfo.tutorial.common.basemodel.MainTest.main(MainTest.java:13)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeRepositories' defined in class path resource [mybeans.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.nousinfo.tutorial.dao.EmployeeRepository]: Specified class is an interface
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:955)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:901)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 15 more
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.nousinfo.tutorial.dao.EmployeeRepository]: Specified class is an interface
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:52)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:948)
    ... 23 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:00:22.583

消除

```
<bean id="employeeRepositories" class="com.nousinfo.tutorial.repository.EmployeeRepositories"/> 
```

并使用：

```
 <bean id="employeeDaoImpl" class="com.nousinfo.tutorial.repository.impl.EmployeeDAOImpl">
            <property name="employeeDAO" ref="employeeRepositories " />
        </bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:38:36.347

问题在于以下语句

```
<bean id="employeeRepositories" class="com.nousinfo.tutorial.dao.EmployeeRepositories"/> 
```

EmployeeRepositories 是一个接口。您不能为接口创建 bean。

您必须在 bean 中提供实现类

```
<bean id="employeeRepositories" class="<Implementation class>"/> 
```

如果您正在使用`jpa:repositories`标签，请检查您是否`@Repository` 在 EmployeeRepository 实现类中提供了标签，例如

```
@Repository
class EmployeeReporsitoriesImpl implements EmployeeReporsitories 
```

# c# - 字符串“0.080”加倍为 80.00

> ID：15571443
> 
> 赞同：3
> 
> 时间：2013-03-22T13:22:24.810
> 
> 标签：c#, mysql, string, parsing, double

我在 c# 中有这个问题，我想将字符串转换为双精度。

```
textBoxKostOnderhoud.Text = "0.08";

kost.OnderhoudKost = double.Parse(textBoxKostOnderhoud.Text); 
```

这使我的数据库中有 80.00，我不知道为什么。这个问题有什么解决办法吗？

这就是我将值添加到数据库（mysql）的方式

```
public bool insert(Kost kost)
{
    string query = "INSERT INTO kost (wagenId, onderhoudKost, tolKost, bedrijfsVerzekering, autoVerzekering, ladingVerzekering, wegenBelasting, eurovignet, accountantKost, telefoonKost, documentenEnVergunningen, onvoorzien, overige, andere) VALUES('" + kost.WagenId + "', '" + kost.OnderhoudKost + "', '" + kost.TolKost + "', '" + kost.BedrijfsVerzekering + "', '" + kost.AutoVerzekering + "', '" + kost.LadingVerzekering + "', '" + kost.WegenBelasting + "', '" + kost.Eurovignet + "', '" + kost.AccountantKost + "', '" + kost.TelefoonKost + "', '" + kost.DocumentenEnVergunningen + "', '" + kost.Onvoorzien + "', '" + kost.Overige + "', '" + kost.Andere + "')";

    if (this.OpenConnection())
    {
        //Create Command
        MySqlCommand cmd = new MySqlCommand(query, connection);
        //Create a data reader and Execute the command
        cmd.ExecuteReader();

        //close Connection
        this.CloseConnection();

        return true;
    }
    else
    {
        return false;
    }
} 
```

sql

```
CREATE TABLE IF NOT EXISTS `kost` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `wagenId` int(11) NOT NULL,
  `onderhoudKost` double(10,2) NOT NULL,
  `tolKost` double(10,2) NOT NULL,
  `bedrijfsVerzekering` double(10,2) NOT NULL,
  `autoVerzekering` double(10,2) NOT NULL,
  `ladingVerzekering` double(10,2) NOT NULL,
  `wegenBelasting` double(10,2) NOT NULL,
  `eurovignet` double(10,2) NOT NULL,
  `accountantKost` double(10,2) NOT NULL,
  `telefoonKost` double(10,2) NOT NULL,
  `documentenEnVergunningen` double(10,2) NOT NULL,
  `onvoorzien` double(10,2) NOT NULL,
  `overige` double(10,2) NOT NULL,
  `andere` double(10,2) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `wagenId` (`wagenId`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=64 ; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-22T13:24:40.247

我怀疑您使用的文化是小数点分隔符是“，”，分组分隔符是“。”。

您可以指定解析时使用的文化：

```
double d = double.Parse(s, CultureInfo.InvariantCulture); 
```

这是否合适取决于上下文，通常 - 字符串来自哪里？如果是用户，你知道*他们的*文化是什么吗？如果它不是来自用户，那么数据源本身是否是文本的，或者有没有一种方法可以在没有任何字符串转换的情况下获得值？

请注意，如果这是针对*货币*价值，您几乎肯定应该使用`decimal`而不是`double`.

编辑：现在您已经包含了 SQL，我们可以看到为什么该值没有正确传播到数据库：

```
// Note properly broken, but this is all on one line. (Ick to start with.)
string query = "INSERT INTO kost (wagenId, onderhoudKost, tolKost, 
   bedrijfsVerzekering, autoVerzekering, ladingVerzekering, wegenBelasting, 
   eurovignet, accountantKost, telefoonKost, documentenEnVergunningen, onvoorzien, 
   overige, andere) VALUES('" + kost.WagenId + "', '" + kost.OnderhoudKost + "', '" 
   + kost.TolKost + "', '" + kost.BedrijfsVerzekering + "', '" +
   kost.AutoVerzekering + "', '" + kost.LadingVerzekering + "', '" + 
   kost.WegenBelasting + "', '" + kost.Eurovignet + "', '" + kost.AccountantKost + 
   "', '" + kost.TelefoonKost + "', '" + kost.DocumentenEnVergunningen + "', '" + 
   kost.Onvoorzien + "', '" + kost.Overige + "', '" + kost.Andere + "')"; 
```

您正在将所有值转换为*SQL*中的字符串，并希望您的数据库能够以相同的方式再次解析它们。碰巧的是，由于您的默认文化，它不会再发生。

更重要的是，这里有一个*大规模的* [SQL 注入](http://bobby-tables.com)攻击漏洞。

**不要这样做。**请改用参数化 SQL，在 SQL 中放置*占位符*，然后分别指定参数值。好处：

*   防止 SQL 注入攻击
*   通过将代码（SQL）与数据分离，让您的 SQL 语句*更加简洁*
*   减少您最终进行的转换次数，因此您不必担心文化等问题

有关用于参数的确切格式，请参阅您正在使用的 MySQL 驱动程序的文档（我相信根据驱动程序的不同，格式可能会略有不同） - 但从根本上讲，这适用于您的*所有*数据库访问，无论数据库您正在与您使用的任何语言交谈。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T13:26:09.543

您可以使用[`CultureInfo.InvariantCulture`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)in[`double.Parse`](http://msdn.microsoft.com/en-us/library/t9ebt447.aspx)忽略当前的文化：

```
double d = double.Parse(s, CultureInfo.InvariantCulture); 
```

[**演示**](http://ideone.com/ncw9Wv)

```
output:
0.08 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T13:48:54.857

由于您正在连接字符串以创建 SQL 命令文本，因此您`double d`可能会转换为字符串为“0,080”，MySql 可能会将其解释为 80。

# heap-memory - 在 Domino Designer 中显示堆状态每次都会重置

> ID：15571446
> 
> 赞同：2
> 
> 时间：2013-03-22T13:22:37.010
> 
> 标签：heap-memory, lotus-notes, domino-designer-eclipse

有没有办法让这个设置坚持下去？
每次我进入 Domino Designer 时，我都需要在 Preferences-General 下启用此设置。
它已设置，但未显示堆状态。需要禁用并重新启用。
令人沮丧...

版本 8.5.3 或 ND9，同样的“错误”

# git - 将现有 Git 存储库导入 IntelliJ IDEA

> ID：15571451
> 
> 赞同：28
> 
> 时间：2013-03-22T13:23:11.423
> 
> 标签：git, intellij-idea, repository

我有一个本地 Git 存储库，其中包含我自己的分支、存储库和所有爵士乐，我想将此存储库添加到 IntelliJ IDEA 中，以便我可以管理它，而不是从 IDEA 中创建存储库的新副本。我怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-08T13:24:35.423

您实际上可以使用现有的存储库。只需转到**打开**并打开您想要成为根目录的目录。然后选择 git repo 目录，进入 VCS 菜单，然后选择**Enable Version Control Integration**。

这就是我的全部。在 Mac 上就是这么简单。不确定其他平台上的流程是否完全相同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-22T15:30:33.473

理想的方法是在 Intellij 中打开目录，而不是尝试从 repo 导入它。当您将目录作为项目打开时，Intellij 会询问您是否需要配置 VCS。

甚至在 Intellij 中创建项目后，您也可以转到 VCS 菜单并包含到 Git 存储库中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-25T03:38:37.880

本质上它只是两个步骤：

1.  指定 VCS 根目录，

    这应该在**首选项 ( `⌘,`) > 版本控制中完成**

2.  启用版本控制集成

    如果您可以在**Menu > VCS**中找到此选项，祝您好运，只需单击它。否则，请选择**菜单 > 帮助 > 查找操作...( `⇧⌘A`)**，然后键入`Enable Version Control Integration`，然后按`Enter`键。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-29T13:20:27.700

当您启动 intellij 并且没有打开任何项目时，会出现“从 VCS 导入”的对话框选项。选择它而不是创建新项目或导入项目。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-30T02:03:53.500

在最新版本的 IntelliJ IDEA 上，当项目包含多个模块并且其中一个模块已经绑定到 VCS 集成时，将不会出现**VCS > Enable Version Control Integration菜单。**如果在将集成添加到项目之前，其中一个模块缺少相关的*.git目录，则会发生这种情况。*

通过浏览到相关项目的*.idea/vcs.xml*文件然后添加另一行来解决，例如：

```
<mapping directory="$PROJECT_DIR$/../project_name" vcs="Git" /> 
```

更改应立即反映在 UI 中（例如，更改的行将突出显示）。

# mysql - 从 CSV 导入后，mysql 日期显示为 0000:00:00

> ID：15571454
> 
> 赞同：1
> 
> 时间：2013-03-22T13:23:17.517
> 
> 标签：mysql, csv, import

我有一个大的 CSV 文件，其中包含按时间格式 41354 保存的日期，即 21/03/2013

它在 MS excel 上显示良好，但只是因为您可以将其格式化为日期 YYYY-mm-dd

但是，一旦上传到数据库，它就会显示像 0000:00:00 这样的日期，并且只有在 phpymyadmin 上按下每个单元格时它才会转换为正常日期

尝试使用加载文件

```
SET date = STR_TO_DATE(@date_conv, '%Y/%m/%d') 
```

也尝试了多种解决方案，但没有任何帮助。

编辑

如下表

```
CREATE TABLE table1 (
  date date DEFAULT NULL
); 
```

并创建一个新的 1.csv 文件并通过 ms excel 在 A1 单元格上制作 41354 ，将其格式化为日期，您将获得 21/03/2013

现在将其上传到您的数据库以发现日期为 0000:00:00

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:47:06.250

您需要为此值创建一个新日期：将天数 (41354) 加到“1900-01-01”。

例如**（已编辑）** -

文件文件.csv：

```
41354 
```

桌子：

```
CREATE TABLE table1 (
  date date DEFAULT NULL
); 
```

询问：

```
LOAD DATA INFILE 'file.csv' INTO TABLE table1(@var)
  SET date = DATE('1900-01-01') + INTERVAL @var DAY; 
```

输出：

选择 * 从表 1；

```
+------------+
| date       |
+------------+
| 2013-03-23 |
+------------+ 
```

# vb6 - 使用VB尝试计算二进制输入后的校验和

> ID：15571459
> 
> 赞同：1
> 
> 时间：2013-03-22T13:23:26.207
> 
> 标签：vb6

我不知道如何在 text1 中输入数据后计算校验和，输入 text1 作为二进制字节的除数。我试过 checksum.text = Text1.Text Xor Text2.Text 但它不起作用，我已经在互联网上搜索过，但它只适用于 C++ 和 java，在 VB 中是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:16:23.167

你不能`XOR`在一个字符串上。您必须对 2 个数字而不是字符串执行此操作。

尝试：

```
checksum.text = CStr(Clng(Text1.Text) Xor CLng(Text2.Text)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:22:37.157

@乔治

```
Private Sub Command1_Click()

    If Len(Text1.Text) & (Text2.Text) = 0 Or Text1.Text & Text2.Text) Like "[!0-1]" Then
        Text3 = "Wrong Input, Please Correct it!!"
    Else
        checksum.Text = CStr(CLng(Text1.Text) Xor CLng(Text2.Text))
        Trans(2).Text = (Text1.Text) + (checksum.Text) 
        Text3 = "Congratulation CRC is generated"
    End If 

End Sub 
```

# javascript - 向对象添加新属性

> ID：15571462
> 
> 赞同：1
> 
> 时间：2013-03-22T13:23:35.200
> 
> 标签：javascript

我有一个 javascript 对象，我将其用作具有键值对的映射类型。

当从控制器向其注入值时，会出现此映射的填充：

```
var people = {"2":"Brad","3":"Antonio","5":"Stacy","6":"Marry","1":"Jim"} 
```

我想创建一个新对象，但还有一个条目，即伪代码

```
var new_people = people + {11: "John"} 
```

我试着先把人复制给新人，然后：

```
new_people.\"11\" = "John" 
```

和

```
new_people."11" = "John" 
```

两者都会产生失败。虽然任何字符串而不是数字都有效，即

```
new_people.anystring = "John"

var new_people = {"2":"Brad","3":"Antonio","5":"Stacy","6":"Marry","1":"Jim", "anystring":"John"} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T13:24:54.070

您可以使用索引：

```
new_people['11'] = 'John'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:25:27.443

您只需要向对象添加一个键值：

```
people['11'] = "John"; 
```

如果密钥是有效的标识符名称（不是数字），您可以使用：

```
people.key = "John"; 
```

当它不是有效的变量名时，您必须使用索引：

```
people["~!#$#$#HV"] ="some value"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T13:32:28.117

你会遇到一个问题，因为变量在存储对象时持有引用。通过变异 new_people，你也在变异人。

```
var people = {"1":"James"}
console.log(people);       // Object {1: "James"}
var new_people = people;
new_people["2"] = "Jimmy";
console.log(people);       // Object {1: "James", 2: "Jimmy"}
console.log(new_people);   // Object {1: "James", 2: "Jimmy"} 
```

您需要先克隆对象，然后对克隆进行变异，以免影响原始对象。

一种简单的方法是使用[underscore.js](http://underscorejs.org/#extend)的extend() 方法，如下所示：

```
var new_people = _.extend({}, people, {"2": "Jimmy"});
console.log(people);       // Object {1: "James"}
console.log(new_people);   // Object {1: "James", 2: "Jimmy"} 
```

或者类似地，使用[jQuery](http://api.jquery.com/jQuery.extend/) extend() 像这样：

```
var new_people = $.extend({}, people, {"2": "Jimmy"});
console.log(people);       // Object {1: "James"}
console.log(new_people);   // Object {1: "James", 2: "Jimmy"} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:59:01.480

@Gandalf StormCrow 这是一个代码：[jsfiddle](http://jsfiddle.net/f8gnj/)

```
var people = {"2":"Brad","3":"Antonio","5":"Stacy","6":"Marry","1":"Jim"};

var newpeople = {"11": "John"};
jQuery.extend(people, newpeople);
//Now: people = {"2":"Brad","3":"Antonio","5":"Stacy","6":"Marry","1":"Jim","11": "John"}

for(var i in people){
  alert(people[i]);  
}; 
```

# chef-infra - Chef - 错误：RuntimeError：请设置 EDITOR 环境变量

> ID：15571465
> 
> 赞同：34
> 
> 时间：2013-03-22T13:24:01.150
> 
> 标签：chef-infra

我已经在我的工作站上成功安装了厨师，但是当我尝试使用以下命令创建角色时

```
knife role create startmeup 
```

我明白了

> 错误：RuntimeError：请设置 EDITOR 环境变量

知道问题是什么吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-22T18:58:59.090

您必须定义`EDITOR`为环境变量。

尝试

```
export EDITOR=$(which vi) 
```

要坚持这一点，请将其添加到`~/.bashrc`or `~/.bash_profile`。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-09-09T12:33:22.597

在您的 Knife.rb 文件 (~/.chef/knife.rb) 中为 notepad++ 添加以下行：

```
knife[:editor] = "C:\\progra~2\\notepa~1\\notepad++.exe -nosession -multiInst" 
```

或者如果您只想使用记事本

```
knife[:editor] = "notepad" 
```

或 GNU 的 emacs

```
knife[:editor] = "emacs" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-30T20:01:41.883

我使用这样的东西：

```
knife role create startmeup -e vi 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-08T23:20:04.280

如果要为该会话设置它，命令

```
set EDITOR="C:\Program Files (x86)\Notepad++\notepad++.exe" 
```

作品。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-12-02T07:11:09.077

有几种方法可以解决这个问题。

1.  设置**环境变量 $EDITOR**。您可以通过在 shell 中导出它`export EDITOR=vim`，或者将此行放在**.bashrc**之类的文件中；

2.  将**选项`-e vim`**（即`--editor vim`）传递给`knife`命令。例如，您可以这样做：

    `knife role create startmeup -e vim`

3.  修改**~/.chef/knife.rb**添加这一行：

    `knife[:editor] = "vim"`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-25T10:14:14.973

只需设置您的编辑器，它就会工作。就我而言，我使用 vim 编辑器，这就是为什么我的命令如下：

```
export EDITOR=vim 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-19T07:56:41.620

```
export EDITOR=vi 
```

就我而言，它有效。但是对于 ubuntu14.o 版本 vi 编辑器退格键不起作用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-26T13:51:47.950

将此条目添加到刀配置文件对我有用

```
knife[:editor] = "Notepad" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-18T21:33:09.557

Knife 将 knife.rb 优先于环境变量。

如果没有提供配置，knife 似乎将默认为 vim（无论如何在我的系统上），因此在您准备好为自定义编辑器（在我的情况下为脚本）配置环境之前省略该值是安全的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-05T15:29:51.643

如果您的机器上安装了记事本++：

```
knife environment create startmeup -e notepad++ 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2015-02-13T10:02:59.773

没有明确的方法来设置knife.rb 下的变量。使用 $export EDITOR=vim （或您想保留的任何一个）在您的 shell 上导出是件好事。

即使没有在knife.rf 下设置变量，它也可以工作。只需通过设置适当的值来导出 EDITOR。

# android - Android：无需root即可备份包数据

> ID：15571468
> 
> 赞同：0
> 
> 时间：2013-03-22T13:24:13.903
> 
> 标签：android

我见过可以在没有 root-ruser 权限的情况下从另一个应用程序备份/恢复包数据的应用程序。我的 google-fu 似乎在这方面不合时宜。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:20:22.463

这是不可能的。我与一位我认为已经完成此操作的开发人员进行了交谈，他说他之所以能够这样做，是因为他所针对的相关应用数据对数据文件夹的权限已放宽。

# sql - 通过查询-SQL Server 查找组中的最后一行

> ID：15571471
> 
> 赞同：1
> 
> 时间：2013-03-22T13:24:25.487
> 
> 标签：sql, sql-server, group-by

我在 SQL Server 中有表。我想在每个组中找到最后一行。我尝试了以下查询，但它没有返回确切的结果。ID 列是 PK，其他列设置为 NOT NULL。

```
select ID, Name FROM 
(select ID, Name, max(ID) over (partition by Name) as MAX_ID
from Customer) x where ID= MAX_ID 
```

要更清楚。我有 2 个查询。首先：

```
ALTER PROCEDURE [dbo].[Ramiz_Musterija_RowNum]
@Datum DATE,
@BrojKamiona INT
AS SET NOCOUNT ON
SELECT Ime,MusterijaID,RowNum=ROW_NUMBER() OVER(ORDER BY Ime)FROM Musterije
WHERE Datum=@Datum AND BrojKamiona=@BrojKamiona  GROUP BY Ime,MusterijaID 
```

第二个：

```
ALTER PROCEDURE [dbo].[Ramiz_Musterija_FindLast]
@Datum DATE,
@BrojKamiona INT
AS SET NOCOUNT ON
SELECT a.* from Musterije a
JOIN (SELECT Ime, MAX(MusterijaID) AS MAXID FROM Musterije GROUP BY Ime) AS b 
ON a.MusterijaID = b.MAXID AND a.Datum=@Datum AND a.BrojKamiona=@BrojKamiona 
```

然后 LINQ 查询：

```
 var rowNumList = from f in customerFindLastList
                     join r in customerRowNumList
                     on f.MusterijaID equals r.MusterijaID
                     select new { r.RowNum }; 
```

我试图在每一行中找到最后一行，然后在 MusterijaID 列上匹配这两个查询。对此的任何帮助将不胜感激。这是一组的输出。现在，问题是这两个查询在“4250” MusterijaID 上匹配，但我需要在“4229”上匹配查询。

```
Ime MusterijaID
100//1  4246
100//1  4247
100//1  4248
100//1  4249
100//1  4250
100//1  4229 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T13:25:25.187

```
select ID, Name 
FROM (select ID, Name, -- add other columns here
             ROW_NUMBER() over (partition by Name ORDER BY ID DESC) as MAX_ID
      from Customer) x
WHERE MAX_ID = 1 
```

# licensing - GNU 公共许可证和 CSS

> ID：15571475
> 
> 赞同：0
> 
> 时间：2013-03-22T13:24:33.437
> 
> 标签：licensing, gpl

我创建了一个 Web 应用程序，我将付费授权给其他公司。为了给他们内部的灵活性，我想允许他们更改我的原始代码，但不能重新分发或出售代码。对于我的基本 css，我使用的是 WordPress 主题，它具有以下许可证：

> 许可证：GNU 通用公共许可证
> 
> 本程序是免费软件：您可以根据自由软件基金会发布的 GNU 通用公共许可条款（许可的第 3 版或（由您选择）任何更高版本）重新分发和/或修改它。

如果我包含这个 css，我不清楚我是否可以拥有“双重许可”，因为许可方不能重新分发我的代码，但他们可以重新分发 css。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:48:35.017

如果您的代码依赖于来自主题的 GPLed css，并且您将主题与您的代码一起分发，那么很容易辩称您的代码是衍生作品，因此必须根据 GPL 的条款获得许可。

如果您想限制代码的使用，我建议从您分发的内容中删除任何 GPL 代码（并且不以任何方式要求它）。

处理此问题的一种方法可能是使用您自己的 css（不是以任何方式从 GPLed 主题派生）分发代码，但使其与 GPLed 主题兼容，并让用户根据需要将其替换为 GPLed 主题。

最后，也是最重要的，如果您收取的软件费用足以支付律师来回答这些问题。

# asp.net - 在重新启动应用程序池之前，Aspx 页面响应速度非常慢

> ID：15571482
> 
> 赞同：0
> 
> 时间：2013-03-22T13:24:55.630
> 
> 标签：asp.net, iis-7

我在 IIS7 上运行的网站在周末晚上的响应速度非常慢，在重新启动应用程序池后，该网站会在一定时间内快速响应。随着时间的推移（可能是几个小时），网站响应再次变慢。

我在任务管理器打开资源监视器，寻找网站的进程，平均 CPU 是 6-8，让我好奇的是 Receive B/s 上升到 0.8-1MB 而 Sent B/s 只有有200B，不知道有没有关系。

所以我希望能深入了解这里的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:23:31.730

你的问题有点含糊。首先，我们是在谈论连接到数据库的 Web 应用程序吗？如果是这样，什么类型的数据库？这可能有多种原因。

但从它的声音来看，我会首先从您正在运行的任何数据库查询开始。我在使用 Web 应用程序时遇到了与您类似的问题，结果证明这是效率低下的 SQL 存储过程的结果。该网站会减速并几乎停止运行，但在重新启动应用程序池后会恢复生机。重写主 Sproc 解决了这个问题。

# c# - 如何实现用户之间的消息系统？

> ID：15571485
> 
> 赞同：0
> 
> 时间：2013-03-22T13:25:17.297
> 
> 标签：c#, mysql, asp.net-mvc, database, architecture

我需要在网站上实现一个消息传递系统。有用户，这些用户可以互相发送消息。我怎样才能做到这一点？我需要什么样的数据库结构？

我现在拥有的是这样的：

```
CREATE TABLE `message` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `SenderId` int(11) NOT NULL,
  `ReceiverId` int(11) NOT NULL,
  `MessageContent` varchar(2000) COLLATE utf8_turkish_ci NOT NULL,
  `MessageDate` datetime NOT NULL,
  `Viewed` bit(1) NOT NULL DEFAULT b'0',
  PRIMARY KEY (`Id`),
  KEY `FK_Message_User_idx` (`SenderId`),
  KEY `FK_Message_Receiver_idx` (`ReceiverId`),
  CONSTRAINT `FK_Message_Sender` FOREIGN KEY (`SenderId`) REFERENCES `user` (`Id`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `FK_Message_Receiver` FOREIGN KEY (`ReceiverId`) REFERENCES `user` (`Id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3 
```

这是 MySql 创建表的脚本。基本上，我存储 senderid、receiverid 和 message。问题是，如果接收者将删除他的消息，消息也会从发件人那里消失。我想实现一个像邮箱这样的结构。你有什么建议？

PS 我正在使用 ASP.NET MVC 3 和 C# 开发项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T13:34:39.360

如果您想为每个发件人创建一个收件箱（也可能是一个“已发送消息”邮箱），在规范化数据库中，您可以将其建模为一个`Mailbox`表。

```
Mailbox
______
MailboxId
UserId -- who the mailbox belongs to
MailboxTypeId -- is it an inbox, sent, drafts box... 
```

然后，您的 Message 表将与一个用户的已发送邮箱和一个用户的收件箱具有多对多的关系。这种关系被建模为一个`MessageMailbox`表格。

```
Message
_______
MessageId
MessageText
-- .. other fields, e.g. MessageDate

MessageMailbox
______________
MailboxId
MessageId 
```

当您从邮箱中删除邮件时，您可以删除`MessageMailbox`表示该邮件在您要从中删除的邮箱中的行。

要创建消息，请将消息保存在`Message`表中，因此 MessageId=2 和 MessageText="Hi"。发送消息时（例如，我将其发送给您），您在 MessageMaibox 中创建两行，其中一行包含已创建消息的 messageId 和 MailboxId=23（假设 23 对应于我在Mailbox 表），另一个具有相同的 messageID 和 MaiboxId=42（假设 42 是您在 Mailbox 表中的收件箱）。

这使您可以将消息发送给多个收件人（只需在 MessageMaibox 中为消息应该到达的每个收件箱添加一行），甚至理论上可以将消息发送给多个发件人，这是电子邮件通常不提供但您正在开发的应用程序可能希望允许。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:41:25.593

只需添加一个字段

```
deleted int default 0 
```

并添加到您的查询中

```
and deleted = 0 
```

此外，如果需要，您可以对该字段进行状态。

例如，

```
deleted = 1   -  deleted by sender
deleted = 2   -  delted by reciever
deleted = 3   -   deleted by both 
```

如果您有多个 revevers，则您的表应该不同：

```
CREATE TABLE `message` (
   `Id` int(11) NOT NULL AUTO_INCREMENT,
   `SenderId` int(11) NOT NULL,
   `MessageContent` varchar(2000) COLLATE utf8_turkish_ci NOT NULL,
   `MessageDate` datetime NOT NULL,
   PRIMARY KEY (`Id`) 
```

)

```
CREATE TABLE recieversmessages (
    receiverId int,
    messageId int,
     viewed int,
    primary key(receiverId, messageId)
) 
```

# c# - 基于复选框的查询

> ID：15571486
> 
> 赞同：0
> 
> 时间：2013-03-22T13:25:18.300
> 
> 标签：c#, ms-access

我正在开发一个查询个人电影数据库的程序。计划的难点在于选择流派。例如，假设我有 3 个复选框动作、冒险和喜剧。一部电影可能属于一种类型或多种类型。电影可以是动作片或动作/喜剧。

下面的代码片段是我开始的......但不适应所有的变化。Fill_Grid 函数填充一个dataGridView。如果电影具有一种流派，或者用户选择的电影与数据库中的流派完全相同，它就可以工作。需要发生的是，如果电影是动作喜剧，那么它应该在用户选择仅动作或仅喜剧或动作和喜剧时显示。

如果这没有意义，请提出问题。

在此先感谢，-J

```
 string str_SQL = "SELECT Name, File, Action, Fantasy, Horror, Thriller, Adventure, Animation, Comedy, Crime, Documentary, Drama, Family, Games, Mystery, Romance, SciFi, War FROM tbl_Main WHERE Action = " + chk_Action.Checked +
            " AND Fantasy = " + chk_Adv.Checked +
            " AND Horror = " + chk_Hor.Checked +
            " AND Thriller = " + chk_Thrill.Checked +
            " AND Adventure = " + chk_Adv.Checked +
            " AND Animation = " + chk_Anim.Checked +
            " AND Comedy = " + chk_Com.Checked +
            " AND Crime = " + chk_Crime.Checked +
            " AND Documentary = " + chk_Doc.Checked +
            " AND Drama = " + chk_Drama.Checked +
            " AND Family = " + chk_Fam.Checked +
            " AND Games = " + chk_Game.Checked +
            " AND Mystery = " + chk_Mys.Checked +
            " AND Romance = " + chk_Rom.Checked +
            " AND SciFi = " + chk_Sci.Checked +
            " AND War = " + chk_War.Checked + ";";

            Fill_Grid(str_SQL); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:30:32.173

先看看复选框是否被选中。然后，将其添加到查询中。

```
if (chk_Adv.Checked == true) {
   str_SQL = str_SQL+" AND Fantasy = 1"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:54:47.547

如果所有列数据类型都`bit`在 sql 中，请尝试此操作：

```
string str_SQL = "SELECT Name, File, Action, Fantasy, Horror, Thriller, Adventure, Animation, Comedy, Crime, Documentary, Drama, Family, Games, Mystery, Romance, SciFi, War FROM tbl_Main WHERE Action = " + chk_Action.Checked +
" AND Fantasy = " + chk_Adv.Checked?-1 :0 +
" AND Horror = " + chk_Hor.Checked ? -1 : 0 +
" AND Thriller = " + chk_Thrill.Checked ? -1 : 0 +
" AND Adventure = " + chk_Adv.Checked ? -1 : 0 +
" AND Animation = " + chk_Anim.Checked ? -1 : 0 +
" AND Comedy = " + chk_Com.Checked ? -1 : 0 +
" AND Crime = " + chk_Crime.Checked ? -1 : 0 +
" AND Documentary = " + chk_Doc.Checked ? -1 : 0 +
" AND Drama = " + chk_Drama.Checked ? -1 : 0 +
" AND Family = " + chk_Fam.Checked ? -1 : 0 +
" AND Games = " + chk_Game.Checked ? -1 : 0 +
" AND Mystery = " + chk_Mys.Checked ? -1 : 0 +
" AND Romance = " + chk_Rom.Checked ? -1 : 0 +
" AND SciFi = " + chk_Sci.Checked ? -1 : 0 +
" AND War = " + chk_War.Checked ? -1 : 0 + ";";

Fill_Grid(str_SQL); 
```

**如果您在 ms-access 中使用并且数据类型为，则**更新**`Yes/No`，然后 true=-1 和 false=0，[请在此处查看](http://www.w3schools.com/sql/sql_datatypes.asp?output=print)**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:25:22.603

下面的代码片段有效。谢谢大家的意见，你让我朝着正确的方向前进

```
string str_Checkboxes="";
string str_SQL = "SELECT Name, File, Action, Fantasy, Horror, Thriller, Adventure, Animation, Comedy, Crime, Documentary, Drama, Family, Games, Mystery, Romance, SciFi, War FROM tbl_Main WHERE ";

//Loop through each control on the form, we are looking for checkboxes
foreach (Control c in this.Controls)
 {
  if(c is CheckBox)
    {
      if (((CheckBox)c).Checked)
        {
         //Bypass putting AND at the beginning of str_Checkboxes
         if(str_Checkboxes != "")
           str_Checkboxes+=" AND ";
         //Checkbox text is the same as the field name in the database
           str_Checkboxes += (((CheckBox)c).Text) + " = True";
        }
     }
   }
//build the SQL
str_SQL += str_Checkboxes + ";"; 
//Fill the grid
Fill_Grid(str_SQL); 
```**

# ruby-on-rails - 如何允许用户在 BrowserCMS 中更改密码？

> ID：15571488
> 
> 赞同：0
> 
> 时间：2013-03-22T13:25:24.723
> 
> 标签：ruby-on-rails, browsercms

我已经为非管理员用户生成了正常的重置密码 portlet 并将其插入到页面中，但它似乎不起作用。提交时它什么也不做。

portlet 的代码是标准的：

```
<% if flash_scope = flash[:reset_password] -%>
  <% if flash_scope[:error] -%>
    <span class="reset-password-error"><%= flash_scope[:error] %></span>
  <% end -%>
  <% if flash_scope[:notice] -%>
    <span class="reset-password-notice"><%= flash_scope[:notice] %></span>
  <% end -%>
<% end -%>

<%= form_tag '' do %>
  <% if params[:token] -%>
  <%= hidden_field_tag "token", params[:token] %>
  <% end -%>

  <label for="password">New Password:</label>
  <%= password_field_tag "password" %><br>

  <label for="password_confirmation">Confirm New Password:</label>
  <%= password_field_tag "password_confirmation" %><br>

  <%= submit_tag "Reset Password" %>
<% end %> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:16:30.667

感谢thisfeller推动正确的方向！

问题是提到默认密码更改portlet仅用于向用户发送电子邮件等的密码重置portlet。所以我基于该重置密码portlet编写了自己的portlet，但通过令牌删除了对所需用户的发现，而只是检查谁登录。

# c# - 共享从 ajax 频繁调用的相同变量

> ID：15571491
> 
> 赞同：0
> 
> 时间：2013-03-22T13:25:32.337
> 
> 标签：c#, asp.net, ajax

我正在 asp.net 中创建一个具有批处理过程的 Web 应用程序（在后台执行大约需要 2 小时）。我创建了一个静态类，它有一些静态变量来更新批处理的进度。从 Web 浏览器通过 ajax 访问这些变量以显示进度。

现在的问题是，当调用 ajax 来访问这些静态变量时，浏览器在从服务器获得响应之前没有响应。我认为这是由于同时从 ajax 和后台批处理过程访问相同的静态变量而发生的。但是当后台批处理没有运行时，一切都很好。

请帮我解决这个问题或让我知道更好的方法。

共享部分

```
public static class ExecutionStatusLog
{
  public static string RunID;
  public static string ExecutionStatus;
  public static int RunningFlag = 0;        
  public static DateTime StartTime;
  public static DateTime EndTime;
  public static int count;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:01:47.463

您可以使用`lock structure`为了同时阻止两个线程的访问

```
mutual exclusion problem 
```

链接： http: [//msdn.microsoft.com/fr-fr/library/c5kehkcz (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/c5kehkcz(v=vs.80).aspx)

注意：您也可以使用 Monitor、Mutex 或 Semaphore ...

# python - ValueError：请设置带有序列的数组元素

> ID：15571495
> 
> 赞同：0
> 
> 时间：2013-03-22T13:25:36.027
> 
> 标签：python, arrays, numpy

我的代码工作正常，除非我在下面的函数方程中输入 r1

```
def u(Substrate):         
    return((u_max*ys[:,0])/(Ks+ys[:,0]))

biomass = ys[:,1]    
u = u(ys[:,0])

def r1(u,biomass):
    r1 = u*biomass*YieldCO2_1
    return r1

r1 = r1(u,biomass)

def F(y,t):    
    Ptot = 710
    Vgas = 2
    D = 0.00826*(273.15+Temp)    
    Cstar_CO2 = KH_CO2 * y[2]
    Cstar_CH4 = KH_CH4 * y[3]
    TG_CO2 = KLa_CO2*(Cstar_CO2-y[0])
    TG_CH4 = KLa_CH4*(Cstar_CH4-y[1])
    Q_CO2 = -D*V*TG_CO2
    Q_CH4 = -D*V*TG_CH4
    Qgas = (Q_CO2+Q_CH4)+Q
    F=np.zeros(4)
    F[0] = Q/V * (CO2_To-y[0]) + TG_CO2 + r1
    F[1] = Q/V * (CH4_Do-y[1]) + TG_CH4 
    F[2] = -Ptot*D*TG_CO2*(V/Vgas)-y[2]*(Qgas/Vgas)
    F[3] = -Ptot*D*TG_CH4*(V/Vgas)-y[3]*(Qgas/Vgas)
    return F 

yinit = np.array([4,3,250,200])             
ts = np.arange(0,4,0.4)  
y = odeint(F,yinit,ts) 
```

当在方程 F[0] 中看到 r1 时，我收到以下错误：

```
F[0] = Q/V * (CO2_To-y[0]) + TG_CO2 + r1
ValueError: setting an array element with a sequence.
odepack.error: Error occurred while calling the Python function named F 
```

但是，当我在没有 r1 数组的情况下执行该函数时，没有错误。所以这就是为什么我假设将 r1 数组放入函数中有问题如果有人可以为我的问题提供输入，我会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:39:35.540

`F[0] = expression`期望`expression`在这里是一个数字，而不是一个数组。然而`Q/V * (CO2_To-y[0]) + TG_CO2 + r1`是一个`r1`维度数组。要看到这一点，请尝试评估以下行：

```
>>> 1 + numpy.array([1,2])
array([2, 3]) 
```

要消除异常，您应该根据您要实现的目标以某种方式将此表达式转换为一个数字。

# java - 如何检查文件夹是否存在？

> ID：15571496
> 
> 赞同：231
> 
> 时间：2013-03-22T13:25:36.680
> 
> 标签：java

我正在玩一些新的 Java 7 IO 功能。实际上，我正在尝试检索文件夹中的所有 XML 文件。但是，当文件夹不存在时，这会引发异常。如何使用新的 IO 检查文件夹是否存在？

```
public UpdateHandler(String release) {
    log.info("searching for configuration files in folder " + release);
    Path releaseFolder = Paths.get(release);
    try(DirectoryStream<Path> stream = Files.newDirectoryStream(releaseFolder, "*.xml")){

        for (Path entry: stream){
            log.info("working on file " + entry.getFileName());
        }
    }
    catch (IOException e){
        log.error("error while retrieving update configuration files " + e.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：307
> 
> 时间：2013-03-22T13:30:57.900

使用`java.nio.file.Files`：

```
Path path = ...;

if (Files.exists(path)) {
    // ...
} 
```

您可以选择传递此方法`LinkOption`值：

```
if (Files.exists(path, LinkOption.NOFOLLOW_LINKS)) { 
```

还有一个方法`notExists`：

```
if (Files.notExists(path)) { 
```

* * *

## 回答 #2

> 赞同：231
> 
> 时间：2013-03-22T13:26:58.220

非常简单：

```
new File("/Path/To/File/or/Directory").exists(); 
```

如果你想确定它是一个目录：

```
File f = new File("/Path/To/File/or/Directory");
if (f.exists() && f.isDirectory()) {
   ...
} 
```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2014-09-23T16:59:01.773

使用新 IO 检查目录是否存在：

```
if (Files.isDirectory(Paths.get("directory"))) {
  ...
} 
```

`isDirectory``true`如果文件是目录则返回；`false`如果文件不存在，不是目录，或者无法确定文件是否是目录。

请参阅：[文档](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#isDirectory(java.nio.file.Path,%20java.nio.file.LinkOption...))。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-08-16T23:16:28.340

从文件夹目录的字符串生成文件

```
String path="Folder directory";    
File file = new File(path); 
```

和使用方法存在。
如果你想生成你应该使用的文件夹 mkdir()

```
if (!file.exists()) {
            System.out.print("No Folder");
            file.mkdir();
            System.out.print("Folder created");
        } 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-22T13:28:20.480

您需要将您的 Path 转换为 a`File`并测试是否存在：

```
for(Path entry: stream){
  if(entry.toFile().exists()){
    log.info("working on file " + entry.getFileName());
  }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-03-17T12:45:52.543

不需要单独调用该`exists()`方法，因为`isDirectory()`隐式检查目录是否存在。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-01-31T15:12:45.920

```
import java.io.File;
import java.nio.file.Paths;

public class Test
{

  public static void main(String[] args)
  {

    File file = new File("C:\\Temp");
    System.out.println("File Folder Exist" + isFileDirectoryExists(file));
    System.out.println("Directory Exists" + isDirectoryExists("C:\\Temp"));

  }

  public static boolean isFileDirectoryExists(File file)

  {
    if (file.exists())
    {
      return true;
    }
    return false;
  }

  public static boolean isDirectoryExists(String directoryPath)

  {
    if (!Paths.get(directoryPath).toFile().isDirectory())
    {
      return false;
    }
    return true;
  }

} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-22T13:43:22.773

```
File sourceLoc=new File("/a/b/c/folderName");
boolean isFolderExisted=false;
sourceLoc.exists()==true?sourceLoc.isDirectory()==true?isFolderExisted=true:isFolderExisted=false:isFolderExisted=false; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-18T09:08:04.957

我们可以检查文件和三个文件夹。

```
import java.io.*;
public class fileCheck
{
    public static void main(String arg[])
    {
        File f = new File("C:/AMD");
        if (f.exists() && f.isDirectory()) {
        System.out.println("Exists");
        //if the file is present then it will show the msg  
        }
        else{
        System.out.println("NOT Exists");
        //if the file is Not present then it will show the msg      
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-29T08:41:48.250

从[SonarLint](https://rules.sonarsource.com/java/tag/java8/RSPEC-3725)中，如果您已经有了路径，请使用`path.toFile().exists()`而不是以`Files.exists`获得更好的性能。

> 该`Files.exists`方法在 JDK 8 中的性能明显较差，并且在用于检查实际不存在的文件时会显着降低应用程序的速度。和也是
> 
> 如此。`Files.notExists``Files.isDirectory``Files.isRegularFile`

不合规代码示例：

```
Path myPath;
if(java.nio.Files.exists(myPath)) {  // Noncompliant
    // do something
} 
```

合规解决方案：

```
Path myPath;
if(myPath.toFile().exists())) {
    // do something
} 
```

# python - 在 Django 错误电子邮件中包含局部变量

> ID：15571499
> 
> 赞同：11
> 
> 时间：2013-03-22T13:25:43.983
> 
> 标签：python, django, error-handling, stack-trace

我有一个用 Django 构建的网站。

当生产站点发生错误时，Django 会自动将堆栈跟踪发送到 settings.py 中的 ADMINS 列表中列出的电子邮件地址。

我希望这个堆栈跟踪包含每个堆栈帧的局部变量（就像站点处于调试模式时的标准堆栈跟踪一样）。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T00:29:21.417

设置它真的很简单。只需`'include_html': True`输入正在为您发送错误电子邮件的处理程序的日志记录配置。

例如（这是除“include_html”行之外的默认日志处理程序）：

```
'handlers': {
    'mail_admins': {
        'level': 'ERROR',
        'filters': ['require_debug_false',],
        'class': 'django.utils.log.AdminEmailHandler',
        'include_html': True
    }
} 
```

这包括错误电子邮件中的 html 附件，其中包含您在 DEBUG=True 时获得的错误页面的内容。[Django 文档](https://docs.djangoproject.com/en/dev/topics/logging/#django.utils.log.AdminEmailHandler)有更多细节和关于安全性的说明。

您还可以查看设置使用的子类的日志记录处理程序，`django.utils.log.AdminEmailHandler`如果`django.views.debug.ExceptionReporter`您需要自定义更多内容。

# json - 读取 JSON (Corona SDK)

> ID：15571508
> 
> 赞同：1
> 
> 时间：2013-03-22T13:25:58.403
> 
> 标签：json, lua, coronasdk

我想从我的 json 中读取或分离一个字段。我会读 ：

```
local datos = json.decode(event.response)

print(datos["latitud"])
print(datos["longitud"])
print(datos["direccion"])
print(datos["telefono"])
print(datos["fax"])
print(datos["servicios"]) 
```

但是“servicios”是另一个 JSON，我无法获取他的字段，“null”是我这样做时的响应：

```
for i in pairs(datos) do
            print(datos["servicios"][servicios][i])
end 
```

屏幕出口：

```
{
    "latitud": "39.98008",
    "longitud": "-0.063171",
    "direccion": "Ctra. Nacional 340 Km 64,500 - 12006 Castellón de la Plana",
    "telefono": "964 20 28 38",
    "fax": "964 34 18 54",
    "servicios": [
        {
            "servicio": "Acceso al parking"
        },
        {
            "servicio": "Actividades infantiles"
        },
        {
            "servicio": "Áreas de descanso"
        },
        {
            "servicio": "Ascensores"
        },
        {
            "servicio": "Ascensores adaptados"
        },
        {
            "servicio": "Aseos exclusivos adaptados"
        },
        {
            "servicio": "Autobús"
        },
        {
            "servicio": "Cajeros automáticos"
        },
        {
            "servicio": "Carritos infantiles"
        },
        {
            "servicio": "Escaleras"
        },
        {
            "servicio": "Escaleras mecánicas"
        },
        {
            "servicio": "Parking gratuito"
        },
        {
            "servicio": "Plazas de parking adaptadas con doble ancho"
        },
        {
            "servicio": "Reserva de taxis"
        },
        {
            "servicio": "Restaurantes especializados en organizar eventos para niños"
        },
        {
            "servicio": "Sala de lactancia"
        },
        {
            "servicio": "Servicio atención al cliente"
        },
        {
            "servicio": "Sillas de ruedas"
        },
        {
            "servicio": "Teléfonos públicos"
        }
    ]
}
39.98008    
-0.063171   
Ctra. Nacional 340 Km 64,500 - 12006 Castellón de la Plana  
964 20 28 38    
964 34 18 54    
table: 0x115806ed0 
```

我想出现字段而不是“表：0X115 ....”

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:41:52.853

```
for _, v in ipairs(datos.servicios) do
   print(v.servicio)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:11:50.887

你的迭代逻辑`datos`是错误的。在您的代码中，您`i`对表的索引有所不同，`datos`但您试图将它们引用到`datos["servicios"][servicios]`导致`nil`. 正确的循环是：

```
for i in pairs( datos["servicios"] ) do
    print( datos["servicios"][i] )
end 
```

或者，更简单地说

```
for i in pairs( datos.servicios ) do
    print( datos.servicios[i] )
end 
```

# java - 获取特定用户的所有权限

> ID：15571513
> 
> 赞同：2
> 
> 时间：2013-03-22T13:26:20.197
> 
> 标签：java, spring, spring-security

我有一个`User`实体，每个存在的用户都应该有 1 个或多个特定的角色/权限。例如`admin` `user`等等。所以我创建了一个`authorities`包含 2 个字段（`username`和`authority`）的表`application-context-securtiy.xml`

```
<jdbc-user-service id="userService" data-source-ref="dataSource"
    users-by-username-query="
        select nickname, password, true from users where nickname=?"
    authorities-by-username-query= "select username, authority AS authorities 
    from authorities where username=?" 
/> 
```

这工作得很好。

现在我正在尝试创建一个 jsp 文件，其中列出了我的所有用户及其角色/权限，但我无法做类似的事情`user.getAuthorites()`并在 jsp 中打印它们。

我已经尝试实现了`UserDetailsService`，但我不知道如何连接我的用户和 UserDetailsS​​ervice。

希望你能给我一些建议。

编辑：jsp的一部分我想如何使用它：

```
<tbody>
<c:forEach var="user" varStatus="stats" items="${users}">
    <tr>
        <td>
            <c:out value="${user.nickname}" />
            <c:forEach var="role" varStatus="status_" items="${user.getAuthorities()}">
                <c:out value="${role}" />
            </c:forEach>
        </td>
        <td>test</td>
        <td>options</td>
    </tr>
</c:forEach>
</tbody> 
```

我如何将数据从控制器发送到我的视图：

```
@RequestMapping(value = "/manageUsers", method = RequestMethod.GET)
public String startManageUsers(ModelMap model, Principal principal) {
    List<User> list = userService.getUsers();
    model.addAttribute("users", list);    
    return "showUsers";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T21:18:22.610

我认为最好的方法是实现 UserDetailsS​​ervice 和 UserDetails。

UserDetailsS​​ervice 的示例实现。

```
@Service
@Transactional
public class UserLoginService implements UserDetailsService {

    @Autowired
    private UserService userService;

    @Override
    public UserDetails loadUserByUsername(String userId) throws UsernameNotFoundException {
        UserEntity userEntity = this.userService.getUserByUserId(userId);
        if (userEntity == null) {
            throw new UsernameNotFoundException("User not found");
        }

        UserLoginBean bean = new UserLoginBean(userEntity.getId(), userEntity.getUserId(), userEntity.getPassword(), userEntity.getEnabled());
        bean.setFullname(userEntity.getFullname());
        bean.setUserEntity(userEntity);

        Set<GrantedAuthority> roles = new HashSet<GrantedAuthority>();
        roles.add( new SimpleGrantedAuthority( userEntity.getRole() ) );
        bean.setAuthorities(roles);

        return bean;
    }

} 
```

UserDetails 的示例实现。

```
public class UserLoginBean implements UserDetails {

    private static final long serialVersionUID = 1L;

    private Long id;
    private String fullname;
    private String username;
    private String password;
    private boolean locked;
    private Set<GrantedAuthority> authorities = null;

    private UserEntity userEntity;

    public UserLoginBean(Long id, String username, String password, boolean locked ) {
        this.id = id;
        this.username = username;
        this.password = password;
        this.locked = locked;
    }

    public boolean isAccountNonExpired() {
        return true;
    }

    public boolean isAccountNonLocked() {
        return locked;
    }

    public boolean isCredentialsNonExpired() {
        return true;
    }

    public boolean isEnabled() {
        return true;
    }

    public Set<GrantedAuthority> getAuthorities() {
        return authorities;
    }

    public void setAuthorities( Set<GrantedAuthority> authorities ) {
        if ( this.authorities == null ) {
            this.authorities = authorities;
        }
    }

    // setters, getters
    } 
```

最后一件事是将 Spring Security 配置为 UserLoginService 作为身份验证提供程序。

例子：

```
<security:authentication-manager alias="authenticationManager">
      <security:authentication-provider user-service-ref="userLoginService">
      <security:password-encoder ref="userPasswordEncoder"/>
      </security:authentication-provider>
    </security:authentication-manager>

    <bean

    <bean id="userLoginService" class="com.stackoverflow.UserLoginService" /> 
```

在jsp页面中需要添加：

```
<%@ taglib prefix="a" uri="http://www.springframework.org/security/tags"%>

<a:authentication property="principal" var="principal" /> 
```

现在您可以访问 UserLoginBean 中的所有内容。

```
<c:if test="${not empty principal && principal != 'anonymousUser'}">
        <c:set var="fullname"><c:out value="${principal.fullname}" /></c:set>
    </c:if> 
```

# android - 如何将 proguard 配置为仅删除 android 日志记录调用

> ID：15571520
> 
> 赞同：21
> 
> 时间：2013-03-22T13:26:52.187
> 
> 标签：android, proguard

我正在尝试将 proguard 配置为仅从我的 Android 应用程序中删除对 android.util.Log 的调用（用于发布版本）。我特别不希望 proguard 对代码进行任何混淆或缩小。

这是我尝试过的配置，但它不会删除`Log`调用（我假设是因为`-keep class **`）

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keepattributes Exceptions,InnerClasses,Signature,Deprecated,SourceFile,LineNumberTable,*Annotation*,EnclosingMethod

-keep class ** {
    *;
}

-assumenosideeffects class android.util.Log {
    *;
} 
```

我问的问题甚至可以用proguard吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-23T22:56:38.200

您可以使用以下选项删除记录调用`proguard-project.txt`：

```
-assumenosideeffects class android.util.Log {
    public static boolean isLoggable(java.lang.String, int);
    public static int v(...);
    public static int i(...);
    public static int w(...);
    public static int d(...);
    public static int e(...);
} 
```

此选项仅在未禁用优化时才相关，例如在`proguard-android.txt`. `proguard-android-optimize.txt`相反，您必须在 中指定`project.properties`：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android-optimize.txt:proguard-project.txt 
```

如果您愿意，可以禁用收缩和混淆。如果您愿意，您还可以保留应用程序的内部 API 以防止优化：

```
-keep class myapp.** { *; } 
```

从 ProGuard 的角度来看，禁用这些步骤并保留所有代码当然不是最佳选择。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-06-11T16:19:16.817

在 build.gradle

```
buildTypes {

        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    } 
```

* * *

在 proguard-rules.pro

```
-dontwarn **
-target 1.7
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose

-optimizations !code/simplification/arithmetic,!code/allocation/variable
-keep class **
-keepclassmembers class *{*;}
-keepattributes *

#This will not remove error log
-assumenosideeffects class android.util.Log {
   public static boolean isLoggable(java.lang.String, int);
    public static int v(...);
    public static int i(...);
    public static int w(...);
    public static int d(...);
   #public static int e(...);
} 
```

# android - 更改可见性时的 Android 动画

> ID：15571537
> 
> 赞同：0
> 
> 时间：2013-03-22T13:27:26.487
> 
> 标签：android

很长的问题可能是一个简短的答案。

我有一系列图像（显示在网格视图中），当按下按钮时，我使用*AnimationDrawable类对其进行动画处理。*
动画代码片段；

```
AnimationDrawable mAnimation;
view.setImageDrawable(null);

Random randomGenerator = new Random();
int rand = randomGenerator.nextInt(6);

BitmapDrawable frame0 = (BitmapDrawable)context.getResources().getDrawable(spinImages.get(0));
BitmapDrawable frame1 = (BitmapDrawable)context.getResources().getDrawable(spinImages.get(1));
BitmapDrawable last = (BitmapDrawable)context.getResources().getDrawable(endImages.get(rand));

mAnimation = new AnimationDrawable();
mAnimation.isOneShot();

for (int i=0; i < spinNumber; i++) {
    mAnimation.addFrame(frame0, spinDuration);
    mAnimation.addFrame(frame1, spinDuration);
}
mAnimation.addFrame(last, spinDuration);

view.setBackgroundDrawable(mAnimation);
view.setTag(rand);

mAnimation.start(); 
```

还有一个微调器将根据所选值过滤图像，将其中一些设置为不可见（到目前为止一切正常）。

```
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

    int index = arg0.getSelectedItemPosition();
    String[] filterOptions;
    filterOptions = getResources().getStringArray(R.array.spn_options);

    // hide all below filter value
    GridView gridView = (GridView) findViewById(R.id.grid_view);
    for (int i=0; i < ((ViewGroup)gridView).getChildCount(); ++i) {
        View nextChild = ((ViewGroup)gridView).getChildAt(i);
        nextChild.setVisibility(View.VISIBLE);
        if (nextChild instanceof ImageView) {
            // get tag
            if (Integer.parseInt(nextChild.getTag().toString()) < arg2) {
                nextChild.setVisibility(View.INVISIBLE);
            }
            nextChild.getTag();
        }
    }
} 
```

The problem is when the spinner to show all is selected I apply `setVisibility(View.VISIBLE)`on the image; 这使图像重新出现但再次触发动画。我希望图像重新出现，仅显示动画的最终状态。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:08:36.717

我通过在使其不可见之前设置图像资源来解决它。

```
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

    int index = arg0.getSelectedItemPosition();
    String[] filterOptions;
    filterOptions = getResources().getStringArray(R.array.spn_options);

    // hide all below filter value
    GridView gridView = (GridView) findViewById(R.id.grid_view);
    for (int i=0; i < ((ViewGroup)gridView).getChildCount(); ++i) {
        View nextChild = ((ViewGroup)gridView).getChildAt(i);
        nextChild.setVisibility(View.VISIBLE);
        if (nextChild instanceof ImageView) {
            // get tag
            if (Integer.parseInt(nextChild.getTag().toString()) < arg2) {
                ImageView iv = (ImageView) nextChild;
                iv.setImageResource(R.drawable.one);
                iv.setTag(nextChild.getTag().toString());
                iv.setVisibility(View.INVISIBLE);
            }
            nextChild.getTag();
        }
    }
} 
```

我仍然欢迎其他/更好的解决方案，

# jquery - 将鼠标悬停事件添加到砌体

> ID：15571541
> 
> 赞同：1
> 
> 时间：2013-03-22T13:27:32.043
> 
> 标签：jquery, css, mouseover, jquery-masonry

这可能是一个简单的答案，但我很难找到很多关于它的东西。

我正在使用 masonry 插件来填充带有图像的页面。图像是艺术品。当您将鼠标悬停在他/她的作品图像上时，我希望艺术家的名字从底部向上滑动。

现在我只是想让一个鼠标悬停事件起作用，但什么也没发生。有人可以帮忙吗？

```
$(document).ready(function(){

$.get("artists.json", function(data){

    json = $.parseJSON(data);

    $.each(json, function(i, data){

            $("#container").append("<div class='thumbnail small' id='" + data.id + "' index='"+i+"' style=\"background:url('" + data.imageofWork + "') no-repeat center center; background-size:cover; \" caption = '"+data.artistName+"' ></div>");

    });

});

$("#container").imagesLoaded( function(){
    setTimeout(function()
    {
        $('#container').masonry({
            itemSelector : '.thumbnail',
            gutterWidth: 0,
            isAnimated: true
        });

        $("#container").css('visibility','visible').hide().fadeIn('slow', function(){setTimeout(function(){ checkURL();},500)});

    },1200)

});

$(document).on("mouseover", ".thumbnail.small", function(){

        //console.log($(this));
        $(this).css('width:', '110%');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:14:00.700

你可以用css做到这一点......

[http://jsfiddle.net/3Rkdp/1/](http://jsfiddle.net/3Rkdp/1/)

你的jquery（来自你的回答）

```
$("#container").append("<div class='thumbnail small' id='" + data.id + "' index='"+i+"' style=\"background:url('" + data.imageofWork + "') no-repeat center center; background-size:cover; \" ><div id='artistname' style='display: block; visibility: hidden;z-index:1000; font-size: 115%; font-weight: bold; padding: 10px; background-color: #000000; color: #ffffff; opacity: .5;'>"+data.artistName+"</div></div>"); 
```

css

```
.thumbnail { height: 200px; width:300px; overflow:hidden; position: relative; }
.thumbnail:hover .artistname { bottom: 0; }
.artistname { padding: 10px; width:100%; background-color: #000000; color: #ffffff; opacity: .5; position:absolute; bottom :-100px;  -webkit-transition:all .2s ease-in-out; -moz-transition:all .2s ease-in-out; -o-transition:all .2s ease-in-out; -ms-transition:all .2s ease-in-out; } 
```

我正在使用 css 过渡来使过渡看起来很漂亮，这不适用于 ie 9 及更低版本，但它会优雅地降级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:57:59.233

我需要在包含砖石的 div 内嵌套和设置我想在鼠标悬停时出现的 div（在本例中为“thumbnail small”）：

```
$("#container").append("<div class='thumbnail small' id='" + data.id + "' index='"+i+"' style=\"background:url('" + data.imageofWork + "') no-repeat center center; background-size:cover; \" ><div id='artistname' style='display: block; visibility: hidden;z-index:1000; font-size: 115%; font-weight: bold; padding: 10px; background-color: #000000; color: #ffffff; opacity: .5;'>"+data.artistName+"</div></div>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:13:51.320

虽然“鼠标悬停”应该可以工作，但在元素上使用“mouseenter”和“mouseleave”的组合可能是有利的。这也将允许您微调输入/输出转换的视觉效果。

尝试：

```
$("body").on("mouseenter mouseleave", ".thumbnail.small", function(e){
    if(e.type == "mouseenter"){
        //some hover state
    }else if(e.type == "mouseleave"){
        //remove your hover state
    }
}); 
```

祝你好运！

# c# - 从 Java 向 C# 发送 HTTP 请求

> ID：15571543
> 
> 赞同：1
> 
> 时间：2013-03-22T13:27:34.983
> 
> 标签：c#, java, http, request

我`HttpListener`在 C# 中使用来获取 HTTP 请求。我需要使用 Java 发送请求。我尝试使用`HttpURLConnection`and发送请求`DataOutputStream`，但 C# 代码没有收到任何请求。

我认为问题出在 Java 上，因为我在 C# 中创建了一个小型测试应用程序，它使用该`HttpWebRequest`对象发送请求，并且一切正常。

什么可能导致这个问题？

这是我的 C# 代码中的一个片段：

```
 Listener = new HttpListener();
        Listener.Start();
        Listener.Prefixes.Add(string.Format("http://{0}:{1}/", "127.0.0.1", "14141"));
        HttpListenerContext context = Listener.GetContext(); 
```

这是我的 Java 代码中的一个片段：

```
 String message = "test message";
     URL url = new URL("http://127.0.0.1:14141/");

     HttpURLConnection connection = (HttpURLConnection)url.openConnection(); 

     connection.setDoOutput(true);
     connection.setDoInput(true);
     connection.setInstanceFollowRedirects(false); 
     connection.setRequestMethod("POST"); 
     connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
     connection.setRequestProperty("charset", "utf-8");
     connection.setRequestProperty("Content-Length", "" + Integer.toString(message.getBytes().length));
     connection.setUseCaches (false);

     DataOutputStream wr = new DataOutputStream(connection.getOutputStream ());
     wr.writeBytes(message);

     writer = new OutputStreamWriter(connection.getOutputStream());
     writer.write(message); 
```

# windows-phone-7 - Windows Phone 7/8 上的 SpatiaLite 支持？

> ID：15571553
> 
> 赞同：0
> 
> 时间：2013-03-22T13:27:48.177
> 
> 标签：windows-phone-7, windows-phone-8, spatialite

是否可以让 SpatiaLite 在 Windows Phone 7 或 8 上运行？我找不到这方面的任何文档，谷歌让我失望了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:28:50.733

您最好的选择是查看 SharpMap 的移植部分[并](http://sharpmap.codeplex.com/)使用[SpatiaLite 提供程序](http://geobabble.wordpress.com/2009/04/11/spatialite-provider-code-for-sharpmap-09/)。

# html - html colspan 行跨度

> ID：15571556
> 
> 赞同：-3
> 
> 时间：2013-03-22T13:27:50.673
> 
> 标签：html, html-table

我使用 html 表、colspan 和 rowspan。我想创建这样的表：

```
.________________________。
| | | |
|______ |________|_______|
|___|___| |___|___|
| |_______| |      
|_______|___|___|_______|
```

但是找不到解决办法！请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:33:00.277

您需要使用`colspan`and`rowspan`属性，检查我的示例以了解它是如何完成的。当你 a`<td>`有 a`colspan`或`rowspan`它被扩展并且下一个`<td>`应该在那个位置的被跳过（见最后一个`<tr>`只有 2 `<td>`s）。

![桌子](../Images/5a00ed47b6472bfa9b46bd146ee2aa02.png)

[jsFiddle](http://jsfiddle.net/Tyriar/tAsbE/)

```
<table>
    <tr>
        <td colspan="6">&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td colspan="2" rowspan="2">&nbsp;<br />&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td colspan="2" rowspan="2">&nbsp;<br />&nbsp;</td>
        <td colspan="2" rowspan="2">&nbsp;<br />&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:32:16.293

制作一个有四行的表格，并使用这些设置在行中的单元格：

```
colspan 6

none
none
colspan 2, rowspan 2
none
none

colspan 2, rowspan 2
colspan 2, rowspan 2

none
none 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:34:10.070

这应该这样做：

```
<table>
    <tr>
        <td colspan=6>&nbsp;<br>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td colspan=2 rowspan=2>&nbsp;<br>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td colspan=2 rowspan=2>&nbsp;<br>&nbsp;</td>
        <td colspan=2 rowspan=2>&nbsp;<br>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

[小提琴](http://jsfiddle.net/jdZK4/3/)

# celery - 打破芹菜中的无限循环

> ID：15571557
> 
> 赞同：6
> 
> 时间：2013-03-22T13:27:50.863
> 
> 标签：celery

我使用 celery.chord(...) 创建了一组任务和一个在组中的所有任务完成后调用的方法。

我使用 amqp 结果后端（但我想切换到 memcached）。

我的工人每秒一遍又一遍地打印这条线。我不知道如何打破这个无限循环。我可以访问rabbitMQ Web 界面，但找不到ID 为“32ba5fe4-...”的东西。

```
[2013-03-22 14:18:26,896: INFO/MainProcess] Task celery.chord_unlock[32ba5fe4-918c-480f-8a78-a310c11d0c3a] retry: Retry in 1s
[2013-03-22 14:18:26,897: INFO/MainProcess] Got task from broker: celery.chord_unlock[32ba5fe4-918c-480f-8a78-a310c11d0c3a] eta:[2013-03-22 13:18:27.895123+00:00] 
```

这是一个测试环境。没有数据可以丢失。

我使用芹菜 3.0.16

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:01:13.453

它不应该是一个无限循环。

celery.chord_unlock 任务检查和弦子任务是否已完成调用合并回调任务。如果不是，它会安排自己在一秒钟内再次检查。和弦任务完成后，您将不再在日志中看到这些消息。

编辑：您可以撤销 chord_unlock 任务以停止循环

```
celery.control.revoke('32ba5fe4-918c-480f-8a78-a310c11d0c3a') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-21T17:22:39.957

为了进行完整性检查，我`max_retries`在 worker 启动时设置了 via 一个信号：

```
from celery.signals import worker_init

@worker_init.connect
def limit_chord_unlock_tasks(worker, **kwargs):
    """
    Set max_retries for chord.unlock tasks to avoid infinitely looping
    tasks. (see celery/celery#1700 or celery/celery#2725)
    """
    task = worker.app.tasks['celery.chord_unlock']
    if task.max_retries is None:
        retries = getattr(worker.app.conf, 'CHORD_UNLOCK_MAX_RETRIES', None)
        task.max_retries = retries 
```

`CHORD_UNLOCK_MAX_RETRIES`然后在我的 Celery 配置中添加一个变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-02T23:55:15.133

我遇到过同样的问题。为了停止循环，我安装了[flower](https://github.com/mher/flower)，然后从Web 界面的**Tasks菜单中撤消了该任务。****Revoke**按钮位于单击任务的 UUID 后出现的任务详细信息页面中。

# qt - QFile myFile.copy(newFile) 失败，但 myFile.error 返回 0（这意味着 NoError）

> ID：15571560
> 
> 赞同：0
> 
> 时间：2013-03-22T13:28:04.987
> 
> 标签：qt, copy, qfile

我将 Qt 4.6.3 与 SUSE 11 Linux 一起使用，并尝试使用 QFile 复制文件：

```
QFile myFile ("/my/path/myFile.txt");

if (!myFile.copy("/my/otherpath/myNewFile.txt")){
    cout << "Qt error: " << myFile.error() << endl;
} 
```

如果设备上有足够的空间，一切正常。

如果磁盘已满，并且如果我尝试使用 bash 在 linux 控制台中复制文件，则会收到一条错误消息。

```
cp /my/path/myFile.txt /my/path/myFile.txt
cp: writing `/my/path/myFile.txt': No space left on device 
```

在我的 C++ 程序中，myFile.copy() 返回“false”，但 myFile.error() 返回“0”。我预计 myFile.error() 返回的值不是'0。

此外，我尝试了 myFile.errorString() 并得到“未知错误”作为结果。

是否有可能收到错误代码或消息，例如“设备上没有剩余空间”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T06:38:37.727

很可能目标文件已经存在。文档[http://doc.qt.digia.com/4.6/qfile.html#copy](http://doc.qt.digia.com/4.6/qfile.html#copy)说：

> 如果同名文件`newName`已存在，则`copy()`返回 false。

这不是实际的错误情况，因为`copy()`不覆盖是正常的。检查它的存在。当您检查文件错误时，请使用错误枚举，例如：

```
QFile from("fromFile");
QFile target("targetFile");
if (target.exists())
    target.remove();
if (target.error() != QFile::NoError)
    // remove error
from.copy(target.fileName());
if (from.error() != QFile::NoError)
    // copy error 
```

# c - C中的策划者评分算法

> ID：15571561
> 
> 赞同：4
> 
> 时间：2013-03-22T13:28:08.413
> 
> 标签：c, algorithm, scoring

我正在用 C 语言开发一个客户端/服务器策划游戏，到目前为止我已经完成了。我的程序正在运行，平均 6 到 7 次猜测它就解决了这个秘密。然后我浏览了互联网，发现了 Donals Knuths 的方法：

1.  创建一组剩余的可能性（此时有 1296 个）。第一个猜测是aabb。
2.  如果它们是答案，则从 S 中删除不会给出相同分数的彩色和白色钉子的所有可能性。
3.  对于每个可能的猜测（不一定在 S 中），计算每个可能的彩色/白色分数从 S 中消除多少可能性。猜测的分数是这些值中最小的。以最高分（minimax）进行猜测。
4.  回到步骤 2，直到你做对了。

我这里要说的是，我用了5个位置和8种颜色。

当我试图优化我的程序时，我很难理解第 3 步的样子，特别是计算什么猜测会消除最多的可能性。

我所知道的是我必须查看每个元素并将其与其他元素进行比较，但我不确定如何比较它，因为我没有任何白色/黑色值。我想知道我怎么知道满足某些**条件**的条目会消除最大的可能性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:05:26.123

[我在我的博客上](http://programmingpraxis.com/2009/11/20/master-mind-part-2/)讨论了算法并给出了一个实现（用 Scheme，而不是 C）。棘手的部分是 minimax 函数中的这个谓词：

```
(or (< size min-size)
    (and (= size min-size)
         (member (car ps) pool)
         (not (member min-probe pool)))) 
```

您必须阅读整篇博文才能了解详细信息，但这基本上实现了 Knuth 的“服从”要求：如果探测器是新的最小值，或者等于当前最小值，则它是池，并且当前最小值不是池的成员，保持它为新的最小值，否则循环到下一个探测。

# knockout.js - 锚标记上的敲除绑定

> ID：15571564
> 
> 赞同：7
> 
> 时间：2013-03-22T13:28:18.703
> 
> 标签：knockout.js

我有一个锚标签，里面有一个图标，如下所示：

```
<a>
    <i class="icon-flip-2"></i>
    hello
</a> 
```

我想用绑定元素替换 hello 文本。就像是：

```
<a data-bind="text: myValue">
    <i class="icon-flip-2"></i>
    hello
</a> 
```

问题是我丢失了元素 < i class="icon-flip-2">

我想保留它并能够在锚标签上绑定一些东西。

谢谢。

任何的想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T13:31:56.833

使用虚拟元素

```
<a>
    <i class="icon-flip-2"></i>
    <!-- ko text: myValue --><!-- /ko -->
</a> 
```

或一个`<span>`

```
<a>
    <i class="icon-flip-2"></i>
    <span data-bind="text: myValue, if: myValue().length > 0"></span>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:30:23.700

将您的文本放在 a 标签内的 span 中，然后绑定 span 的 text 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:30:35.050

我很想把你的文字放在一个跨度中：

```
<a>
    <i class="icon-flip-2"></i>
    <span data-bind="text: myValue"></span>
</a> 
```

# c - 一步一步编译C程序

> ID：15571567
> 
> 赞同：0
> 
> 时间：2013-03-22T13:28:21.860
> 
> 标签：c, compiler-construction

最近我在处理编译器设计中的一些问题。我想要的是一个可以逐步编译C程序的工具。执行词法分析并给出输出文件，然后对该输出文件进行语法分析，依此类推，直到获得最终的可执行代码。有没有这样的工具或技术来做到这一点？我当然熟悉 lex 和 yacc。我需要的是一个单一的工具，它可以直观地指导您完成编译、词法分析、语法分析、语义分析、中间代码生成、代码优化和代码生成的所有不同阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:12:17.610

如果您有兴趣了解 GCC 的内部结构，您可以使用`-fdump`option。它将为每次传递创建大量文件（主要是从中端到后端，不确定前端）。此链接可能会帮助您：

[http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)

# c# - 自定义字典中索引器的奇怪行为

> ID：15571569
> 
> 赞同：5
> 
> 时间：2013-03-22T13:28:27.360
> 
> 标签：c#, generics, dictionary

我制作了一个继承自 Dictionary 的自定义 Dictionary 类。但是，根据我使用类的方式调用索引器时会发生奇怪的事情。这是该类的简化版本：

```
public class MyDictionary<TKey, TValue> : Dictionary<TKey, TValue>
{
    public new TValue this[TKey key]
    {
        get
        {
            return base[key];
        }
        set
        {
            base[key] = value;
        }
    }
} 
```

现在，我想创建一个实例并向其中添加一些内容。以下工作正常，即我可以在索引器的设置器中设置一个断点，它将被命中。

```
MyDictionary<int, string> dict = new MyDictionary<int, string>();
dict[0] = "some value"; 
```

但是，如果我这样做（实例化为 IDictionary 变量）：

```
IDictionary<int, string> dict = new MyDictionary<int, string>();
dict[0] = "some value"; 
```

它不会再在索引器的设置器中命中我的断点，即它必须调用其他东西。如果我看一下 .NET 的 Dictionary 实现（我的类从它继承），除了我覆盖的那个之外，我找不到其他索引器，而且它不会从其他任何东西继承。所以问题是，发生了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T13:30:43.550

关键在于索引器声明中的`new`关键字。这不会覆盖基类索引器，并且每次您从基类或接口访问索引器（如`IDictionary`您的示例中）时 - 都会调用基类的索引器。此外，您不能覆盖基类索引器，因为它没有`virtual`在`Dictionary<TKey, TValue>`类定义中标记为

考虑这篇关于方法声明中的[新修饰符的文章](http://msdn.microsoft.com/en-us/library/435f1dw2.aspx)

尝试在这里使用组合，而不是继承。

如果您确定，您需要完全`IDictionary<TKey, TValue`而不是更抽象的接口的自定义行为，例如`ICollection<KeyValuePair<TKey, TValue>>`or even `IEnumerable<KeyValuePair<TKey, TValue>>`，请使用下一个示例：

```
public class MyDictionary<TKey, TValue> : IDictionary<TKey, TValue>
{
    IDictionary<TKey, TValue> dictionary = new Dictionary<TKey, TValue>();

    //LOTS of other methods here, that are required by IDictionary<TKey, TValue>
    //their implementation would be delegation to dictionary instance

    public TValue this[TKey key] //implementation of a interface
    {
        get
        {
            return dictionary[key];
        }
        set
        {
            dictionary[key] = value;
        }
    }
} 
```

# android - 如何在 Android 中流式传输 RTMP 实时视频

> ID：15571571
> 
> 赞同：6
> 
> 时间：2013-03-22T13:28:28.350
> 
> 标签：android, rtmp

我在 Android 上开发了一个应用程序，用于通过[RTSP](https://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)进行实时流式传输，并且运行良好。我可以在[Daroon Player](https://play.google.com/store/apps/details?id=com.daroonplayer.dsplayer)和[Wondershare](https://play.google.com/store/apps/details?id=com.wondershare.mobilego)的帮助下播放 RTSP [URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)。RTSP的运行代码是：

```
Uri stream = Uri.parse("rtsp://media-us-2.soundreach.net/slcn_lifestyle.sdp"); 
Intent videointent = new Intent(Intent.ACTION_VIEW,stream); 
startActivity(videointent); 
```

现在我必须通过 RTMP 流式传输实时视频，但我无法使用上述过程调用它。要求是仅使用 Wondershare 播放 RTMP URL。

如何借助第三方应用程序（即 Wondershare）在 Android 设备上播放 RTMP URL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:43:32.297

请看看[Vitamio](http://vitamio.org/)。这是一个播放多媒体内容的好图书馆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:17:38.563

您可以使用您的代码，但不是 Daroon Player，而是使用[MX Video Player](https://play.google.com/store/apps/details?id=com.mxtech.videoplayer.ad&hl=en)播放它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T12:23:27.743

您可以使用适用于 Android 的[Vitamio](https://www.vitamio.org/en/)库。唯一的缺点是它有许可证。

这是它的[教程](http://www.truiton.com/2015/03/stream-rtmp-live-android/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-31T13:33:14.740

您可以在 Play 商店中找到的任何播放器都不支持 RTMP 流。（这是因为 RTMP 协议还没有任何实现。它是由 Adob​​e 为 Flash Player 开发的。）播放 RTMP 流的唯一方法是使用嵌入了 Flash Player 的 webview，然后使用 RTMP 链接到 HTML 代码中的视频。这是唯一的方法，但遗憾的是正在观看的用户必须安装 Flash Player。

更新：Android 的 VLC 播放器可以播放 RTMP 流。上述信息已过时。

# java - 结合 TimePicker 中的 CurrentHour 和 CurrentMinute

> ID：15571572
> 
> 赞同：-3
> 
> 时间：2013-03-22T13:28:34.443
> 
> 标签：java, android, eclipse, sqlite

我有一个应用程序，它将 TimePicker 中的 CurrentHour 和 CurrentMinute 存储在 sqlite 数据库中，然后将其显示在另一个活动 ViewCountry java

我想在 9:30 合并这两个字段并将它们一起显示 - 例如在

```
<TextView 
   android:id="@+id/codeText"
   style="@style/StyleText"/> 
```

view_country xml

add_country xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" android:layout_weight="1">

    <LinearLayout android:id="@+id/linearLayout"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical" 
      android:padding="5dp">

      <EditText android:id="@+id/nameEdit"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content" 
         android:imeOptions="actionNext" 
         android:hint="@string/name_hint"
         android:inputType="textPersonName|textCapWords"/>

      <EditText android:id="@+id/capEdit"
         android:layout_width="fill_parent" 
         android:layout_height="wrap_content" 
         android:imeOptions="actionNext" 
         android:hint="@string/cap_hint"
         android:inputType="textPersonName|textCapWords"/>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Data Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="left"
            android:textColor="#ffffff"
            android:text="10MB" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="right"
            android:textColor="#ffffff"
            android:text="Unlimited Data" />
    </LinearLayout>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Bandwidth Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="left"
            android:textColor="#ffffff"
            android:text="10kbs" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:textColor="#ffffff"
            android:gravity="right"
            android:text="Unlimited Bandwidth" />
    </LinearLayout>

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:textAppearanceSmall" />

     <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="WiFi Time Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <TimePicker
        android:id="@+id/timeEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:layout_weight="1.0" />

     <EditText
        android:id="@+id/codeEdit"
        android:inputType="textUri"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:lines="1"
        android:hint="@string/code_hint"
        android:imeOptions="actionNext" />

      <Button android:id="@+id/saveBtn" 
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_marginTop="15dp"
         android:layout_gravity="center_horizontal"
         android:text="@string/save_btn"/>
    </LinearLayout>
    </ScrollView> 
```

**添加国家**

来自 TimePicker 的很可能的分钟值在这里搞砸了

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;

public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;
 private TimePicker timeEt;
 private TimePicker minEt;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.nameEdit);
      capEt = (EditText) findViewById(R.id.capEdit);
      codeEt = (EditText) findViewById(R.id.codeEdit);
      timeEt = (TimePicker) findViewById(R.id.timeEdit);
      minEt = (TimePicker) findViewById(R.id.timeEdit);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         timeEt.setCurrentHour(extras.getInt("time"));
         minEt.setCurrentMinute(extras.getInt("min"));
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

       private void saveContact() 
       {
          DatabaseConnector dbConnector = new DatabaseConnector(this);

          if (getIntent().getExtras() == null)
          {
              dbConnector.insertContact(nameEt.getText().toString(),
                      capEt.getText().toString(),
                      timeEt.getCurrentHour().toString(),
                      minEt.getCurrentMinute().toString(),
                      codeEt.getText().toString());
          }
          else
          {
             dbConnector.updateContact(rowID,
                nameEt.getText().toString(),
                capEt.getText().toString(),
                timeEt.getCurrentHour().toString(), /* Storing as String*/
                minEt.getCurrentMinute().toString(), 
                codeEt.getText().toString());
          }
       }
} 
```

**数据库连接器 Java**

```
 import android.content.ContentValues;
 import android.content.Context;
 import android.database.Cursor;
 import android.database.SQLException;
 import android.database.sqlite.SQLiteDatabase;

   public class DatabaseConnector {

private static final String DB_NAME = "WorldCountries";
private SQLiteDatabase database;
private DatabaseOpenHelper dbOpenHelper;

public DatabaseConnector(Context context) {
    dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
}

   public void open() throws SQLException 
   {
      //open database in reading/writing mode
      database = dbOpenHelper.getWritableDatabase();
   } 

   public void close() 
   {
      if (database != null)
         database.close();
   }       

   public void insertContact(String name, String cap, String code, String time, String min) 
           {
              ContentValues newCon = new ContentValues();
              newCon.put("name", name);
              newCon.put("cap", cap);
              newCon.put("time", time);
              newCon.put("min", min);
              newCon.put("code", code);

              open();
              database.insert("country", null, newCon);
              close();
           }

           public void updateContact(long id, String name, String cap,String code,  String time, String min) 
           {
              ContentValues editCon = new ContentValues();
              editCon.put("name", name);
              editCon.put("cap", cap);
              editCon.put("time", time);
              editCon.put("min", min);
              editCon.put("code", code);

              open();
              database.update("country", editCon, "_id=" + id, null);
              close();
           }

           public Cursor getAllContacts() 
           {
              return database.query("country", new String[] {"_id", "name"}, 
                 null, null, null, null, "name");
           }

           public Cursor getOneContact(long id) 
           {
              return database.query("country", null, "_id=" + id, null, null, null, null);
           }

           public void deleteContact(long id) 
           {
              open(); 
              database.delete("country", "_id=" + id, null);
              close();
           }
 } 
```

**数据库开放助手 Java**

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseOpenHelper extends SQLiteOpenHelper {

public DatabaseOpenHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String createQuery = "CREATE TABLE country (_id integer primary key autoincrement,name, cap, code,  time, min);";                 
    db.execSQL(createQuery);        
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}
 } 
```

如何将 currentMinute 和 currentHour 合并到一个文本字段中，以便以正常时间格式显示 [ex 9:30]

# 在 fcm 的解决方案/建议之后更新：

# JAVA

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.content.Context;

public class AddEditCountry extends Activity {

     private long rowID; 
     private EditText nameEt;
     private EditText capEt;
     private EditText codeEt;
     private TimePicker timeEt;
     private TimePicker minEt;
     private String cHour;
     private String cMinute;
     private String normalTimeFormat;

       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState); 
          setContentView(R.layout.add_country);

          nameEt = (EditText) findViewById(R.id.nameEdit);
          capEt = (EditText) findViewById(R.id.capEdit);
          codeEt = (EditText) findViewById(R.id.codeEdit);
          timeEt = (TimePicker) findViewById(R.id.timeEdit);
          minEt = (TimePicker) findViewById(R.id.timeEdit);

          Bundle extras = getIntent().getExtras(); 

          if (extras != null)
          {
             rowID = extras.getLong("row_id");
             nameEt.setText(extras.getString("name"));  
             capEt.setText(extras.getString("cap"));  
             codeEt.setText(extras.getString("code"));  
             timeEt.setCurrentHour(extras.getInt("time"));
             minEt.setCurrentMinute(extras.getInt("min"));
          }

          Button saveButton =(Button) findViewById(R.id.saveBtn);
          saveButton.setOnClickListener(new OnClickListener() {

              public void onClick(View v) 
              {
                 if (nameEt.getText().length() != 0)
                 {
                    AsyncTask<Object, Object, Object> saveContactTask = 
                       new AsyncTask<Object, Object, Object>() 
                       {
                          @Override
                          protected Object doInBackground(Object... params) 
                          {
                             saveContact();
                             return null;
                          }

                          @Override
                          protected void onPostExecute(Object result) 
                          {
                             finish();
                          }
                       }; 

                    saveContactTask.execute((Object[]) null); 
                 }

                 else
                 {
                    AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                    alert.setTitle(R.string.errorTitle); 
                    alert.setMessage(R.string.errorMessage);
                    alert.setPositiveButton(R.string.errorButton, null); 
                    alert.show();
                 }
              } 
         });
       }

           private void saveContact() 
           {
              DatabaseConnector dbConnector = new DatabaseConnector(this);

              if (getIntent().getExtras() == null)
              {
                  dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString(),
                          minEt.getCurrentMinute().toString(),
                          codeEt.getText().toString());
              }
              else
              {
                  dbConnector.updateContact(rowID,
                          nameEt.getText().toString(),
                          capEt.getText().toString(),

                          String cHour = timeEt.getCurrentHour().toString(), /* Storing as String*/
                          String cMinute = minEt.getCurrentMinute().toString(), 
                          String normalTimeFormat = cHour + ":" + cMinute;

                          //Do whatever you want to do with normalTimeFormat

                          codeEt.getText().toString());
                    }
           }
} 
```

# 更新的日志：

```
03-22 14:35:00.174: I/Adreno200-EGLSUB(1320): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-22 14:35:00.174: D/memalloc(1320): ion: Mapped buffer base:0x5ca41000 size:614400 offset:0 fd:57
03-22 14:35:00.184: E/(1320): Can't open file for reading
03-22 14:35:00.184: E/(1320): Can't open file for reading
03-22 14:35:00.225: D/memalloc(1320): ion: Mapped buffer base:0x5d12e000 size:614400 offset:0 fd:61
03-22 14:35:02.087: D/Activity(1320): Activity.onPause(), editTextTapSensorList size: 0
03-22 14:35:02.127: I/Adreno200-EGLSUB(1320): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-22 14:35:02.127: D/memalloc(1320): ion: Mapped buffer base:0x5d4ce000 size:614400 offset:0 fd:64
03-22 14:35:02.227: D/memalloc(1320): ion: Mapped buffer base:0x5d6f7000 size:614400 offset:0 fd:71
03-22 14:35:02.247: D/memalloc(1320): ion: Unmapping buffer  base:0x5ca41000 size:614400
03-22 14:35:02.247: D/memalloc(1320): ion: Unmapping buffer  base:0x5d12e000 size:614400
03-22 14:35:02.917: D/memalloc(1320): ion: Mapped buffer base:0x5c929000 size:614400 offset:0 fd:56
03-22 14:35:04.319: D/Activity(1320): Activity.onPause(), editTextTapSensorList size: 0
03-22 14:35:04.509: I/Adreno200-EGLSUB(1320): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-22 14:35:04.509: D/memalloc(1320): ion: Mapped buffer base:0x5ca41000 size:614400 offset:0 fd:60
03-22 14:35:04.599: D/memalloc(1320): ion: Mapped buffer base:0x5dc02000 size:614400 offset:0 fd:75
03-22 14:35:04.619: D/memalloc(1320): ion: Mapped buffer base:0x5dca8000 size:614400 offset:0 fd:78
03-22 14:35:04.629: D/memalloc(1320): ion: Unmapping buffer  base:0x5d4ce000 size:614400
03-22 14:35:04.629: D/memalloc(1320): ion: Unmapping buffer  base:0x5d6f7000 size:614400
03-22 14:35:04.629: D/memalloc(1320): ion: Unmapping buffer  base:0x5c929000 size:614400
03-22 14:35:08.433: W/dalvikvm(1320): threadid=12: thread exiting with uncaught exception (group=0x410889d8)
03-22 14:35:08.453: E/AndroidRuntime(1320): FATAL EXCEPTION: AsyncTask #2
03-22 14:35:08.453: E/AndroidRuntime(1320): java.lang.RuntimeException: An error occured while executing doInBackground()
03-22 14:35:08.453: E/AndroidRuntime(1320):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.lang.Thread.run(Thread.java:856)
03-22 14:35:08.453: E/AndroidRuntime(1320): Caused by: java.lang.Error: Unresolved compilation problems: 
03-22 14:35:08.453: E/AndroidRuntime(1320):     String cannot be resolved to a variable
03-22 14:35:08.453: E/AndroidRuntime(1320):     Syntax error on token "cHour", delete this token
03-22 14:35:08.453: E/AndroidRuntime(1320):     String cannot be resolved to a variable
03-22 14:35:08.453: E/AndroidRuntime(1320):     Syntax error on token "cMinute", delete this token
03-22 14:35:08.453: E/AndroidRuntime(1320):     Syntax error, insert ")" to complete MethodInvocation
03-22 14:35:08.453: E/AndroidRuntime(1320):     Syntax error, insert ";" to complete BlockStatements
03-22 14:35:08.453: E/AndroidRuntime(1320):     String cannot be resolved to a variable
03-22 14:35:08.453: E/AndroidRuntime(1320):     Syntax error on token ")", delete this token
03-22 14:35:08.453: E/AndroidRuntime(1320):     at com.nfc.linkingmanager.AddEditCountry.saveContact(AddEditCountry.java:122)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at com.nfc.linkingmanager.AddEditCountry.access$1(AddEditCountry.java:103)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at com.nfc.linkingmanager.AddEditCountry$1$1.doInBackground(AddEditCountry.java:76)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
03-22 14:35:08.453: E/AndroidRuntime(1320):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-22 14:35:08.453: E/AndroidRuntime(1320):     ... 5 more
03-22 14:35:08.493: D/Activity(1320): Activity.onPause(), editTextTapSensorList size: 0
03-22 14:35:08.563: I/Adreno200-EGLSUB(1320): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-22 14:35:08.563: D/memalloc(1320): ion: Mapped buffer base:0x5d4bb000 size:614400 offset:0 fd:56
03-22 14:35:08.573: D/memalloc(1320): ion: Mapped buffer base:0x5d8f7000 size:614400 offset:0 fd:64
03-22 14:35:08.593: D/memalloc(1320): ion: Unmapping buffer  base:0x5ca41000 size:614400
03-22 14:35:08.593: D/memalloc(1320): ion: Unmapping buffer  base:0x5dc02000 size:614400
03-22 14:35:08.593: D/memalloc(1320): ion: Unmapping buffer  base:0x5dca8000 size:614400
03-22 14:35:09.775: D/memalloc(1320): ion: Mapped buffer base:0x5ca41000 size:614400 offset:0 fd:60 
```

# 信息

现在它的行为略有不同。现在它仅在您单击 add_country 中的保存按钮后才会强制关闭：

按钮 android:id="@+id/saveBtn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:32:25.367

您可以使用格式化的字符串：

```
int hour = 9;
int minute = 30;
String format = "%d:%d";
String time = String.format (format, hour, minute);

yourTextView.setText (time); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:31:05.230

我可能误解了，它可能比这复杂得多，但是......

```
String normalTimeFormat = CurrentHour + ":" + CurrentMinute; 
```

* * *

```
private void saveContact() 
       {

          DatabaseConnector dbConnector = new DatabaseConnector(this);

          //Here's the new change
          String cHour = timeEt.getCurrentHour().toString();
          String cMinute = minEt.getCurrentMinute().toString();
          String normalTimeFormat = cHour + ":" + cMinute;

          //Do whatever with normalTimeFormat now

          if (getIntent().getExtras() == null)
          {
              dbConnector.insertContact(nameEt.getText().toString(),
                      capEt.getText().toString(),
                      timeEt.getCurrentHour().toString(),
                      minEt.getCurrentMinute().toString(),
                      codeEt.getText().toString());
          }
          else
          {
              dbConnector.updateContact(rowID,
                      nameEt.getText().toString(),
                      capEt.getText().toString(),
                      codeEt.getText().toString());
                }
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:36:34.523

可能我错过了一些实现细节，但你可以只存储`System.currentTimeinMillis()`然后做类似的事情

```
Date date = new Date(timeStampFromSQLite);
String currentDate = date.getHours() + ":" + date.getMinutes(); 
```

# android - Google Cloud Messaging (GCM) 使用哪个端口和协议？

> ID：15571576
> 
> 赞同：24
> 
> 时间：2013-03-22T13:28:47.330
> 
> 标签：android, push-notification, google-cloud-messaging

Google Cloud Messaging (GCM) 使用哪个端口和协议？

我们有时会遇到消息无法通过的情况，并且注意到这取决于我们所在的网络。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-22T14:21:17.177

设备通过端口 5228-5230 访问 GCM 服务器。

> 注意：如果您的组织有防火墙限制进出 Internet 的流量，您需要将其配置为允许与 GCM 连接。要打开的端口是：5228、5229 和 5230。GCM 通常只使用 5228，但有时会使用 5229 和 5230。GCM 不提供特定 IP。它经常更改IP。我们建议不要使用 ACL，但如果必须使用它们，请采用广泛的方法，例如此支持链接中建议的方法。

如果您的设备通过 WiFi 连接到互联网，则这很重要。

以下是相关 GCM 文档的链接：[https ://developers.google.com/cloud-messaging/http](https://developers.google.com/cloud-messaging/http)

# mysql - mysql - 排序规则与嵌套选择的非法混合

> ID：15571579
> 
> 赞同：2
> 
> 时间：2013-03-22T13:29:07.767
> 
> 标签：mysql, collation

我有一个 MySQL 查询，有几个嵌套选择。如下：

我的内部查询，返回两列：

```
 ` MIN( PreQuery.updatetime ) as InTime`

      `MAX( PreQuery.updatetime ) as OutTime` 
```

这些是日期时间格式，`2013-03-22 12:04:06`

我只想返回过去 26 小时内的日期时间，所以使用 where 子句： `'InTime'> DATE_SUB(NOW(), INTERVAL 26 HOUR)`

这将返回错误： `#1267 - Illegal mix of collations (utf8_general_ci,COERCIBLE) and (latin1_swedish_ci,NUMERIC) for operation '>'`

关于如何更正此问题或仅显示过去 26 小时的数据的任何想法？一如既往地感谢。

```
select * from (select
      PreQuery.callingname,
      PreQuery.geofence,
      PreQuery.GroupSeq,
      MIN( PreQuery.`updatetime` ) as InTime,
      MAX( PreQuery.`updatetime` ) as OutTime
   from
     ( select
              v_starting.callingname,
              v_starting.geofence,
              v_starting.`updatetime`,
              @lastGroup := @lastGroup + if( @lastAddress = v_starting.geofence 
                                         AND @lastVehicle = v_starting.callingname, 0, 1 ) as GroupSeq,
              @lastVehicle := v_starting.callingname as justVarVehicleChange,
              @lastAddress := v_starting.geofence as justVarAddressChange
           from
              v_starting,
              ( select @lastVehicle := '',
                       @lastAddress := '',
                       @lastGroup := 0 ) SQLVars
           order by
              v_starting.`updatetime` ) PreQuery
   Group By
      PreQuery.callingname,
      PreQuery.geofence,
      PreQuery.GroupSeq) parent

      where geofence <>'' and 'InTime'>  DATE_SUB(NOW(), INTERVAL 26 HOUR) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:32:23.100

去掉周围的撇号`InTime`，即

```
where geofence <>'' and InTime >  DATE_SUB(NOW(), INTERVAL 26 HOUR) 
```

# backbone.js - Backbone Todos 示例应用程序

> ID：15571580
> 
> 赞同：0
> 
> 时间：2013-03-22T13:29:10.997
> 
> 标签：backbone.js, coffeescript

我目前对 Backbone 的 todos 应用程序示例有疑问。你可以在这里找到我的代码：http: [//jsfiddle.net/chrisg93/96tgP/3/](http://jsfiddle.net/chrisg93/96tgP/3/)

```
$ ->
  Todo = Backbone.Model.extend
    defaults:
      title: "Empty task"
      done:  false
      order: Todos.nextOrder()

  TodoList = Backbone.Collection.extend
    model: Todo
    nextOrder: ->
      if not @length then 1 else (@model.last().get "order") + 1

  Todos = new TodoList() 
```

当我尝试运行此极简代码时，我收到一条错误消息，提示我无法调用未定义的方法“nextOrder”。我已按照教程进行操作，但不明白为什么这不起作用。

你可以帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:38:05.593

模型内部的定义`Todos`是未定义的。

我认为您应该`order`为您的模型创建一个方法并引用该模型所属的集合，如下所示：

```
Todo = Backbone.Model.extend
    defaults:
      title: "Empty task"
      done:  false

    order: @collection.nextOrder() 
```

# java - 写入 HDFS 只能复制到 0 个节点而不是 minReplication (=1)

> ID：15571584
> 
> 赞同：27
> 
> 时间：2013-03-22T13:29:19.077
> 
> 标签：java, hadoop, mapreduce, hive, hdfs

我有 3 个数据节点正在运行，在运行作业时出现以下错误，

> java.io.IOException：文件 /user/ashsshar/olhcache/loaderMap9b663bd9 只能复制到 0 个节点而不是 minReplication (=1)。有 3 个数据节点正在运行，并且在此操作中排除了 3 个节点。在 org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget(BlockManager.java:1325)

此错误主要出现在我们的 DataNode 实例空间不足或 DataNode 未运行时。我尝试重新启动 DataNodes 但仍然遇到相同的错误。

我的集群节点上的 dfsadmin -reports 清楚地显示有大量可用空间。

我不确定为什么会这样。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-05T07:06:19.333

1.停止所有Hadoop守护进程

```
for x in `cd /etc/init.d ; ls hadoop*` ; do sudo service $x stop ; done 
```

2.删除所有文件`/var/lib/hadoop-hdfs/cache/hdfs/dfs/name`

```
Eg: devan@Devan-PC:~$ sudo rm -r /var/lib/hadoop-hdfs/cache/ 
```

3.格式化Namenode

```
sudo -u hdfs hdfs namenode -format 
```

4.启动所有Hadoop守护进程

```
for x in `cd /etc/init.d ; ls hadoop*` ; do sudo service $x start ; done 
```

[停止所有 Hadoop 服务](http://www.cloudera.com/content/cloudera/en/documentation/cdh4/latest/CDH4-Installation-Guide/cdh4ig_topic_27_3.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-04-06T18:04:36.453

我有同样的问题，我的磁盘空间非常低。释放磁盘解决了它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-14T08:59:42.460

1.  检查您的 DataNode 是否正在运行，使用命令：`jps`.
2.  如果它**没有运行，**请等待一段时间并重试。
3.  如果它正在**运行**，我认为你必须重新格式化你的 DataNode。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T13:46:31.587

发生这种情况时，我通常会去*tmp/hadoop-username/dfs/*目录并手动删除*数据*和*名称*文件夹（假设您在 Linux 环境中运行）。

然后通过调用*bin/hadoop namenode -format*格式化 dfs （确保在询问是否要格式化时以大写*Y回答；如果没有被询问，则再次重新运行该命令）。*

*然后您可以通过调用bin/start-all.sh*再次启动 hadoop

 ** * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-20T03:39:09.363

我遇到了这个问题，我解决了它如下：

1.  查找您的数据节点和名称节点元数据/数据保存在哪里；如果找不到，只需在 mac 上执行此命令即可找到它（位于名为“tmp”的文件夹中）

    **查找 /usr/local/Cellar/ -name "tmp";**

    find 命令是这样的： find <"directory"> -name <"任何该目录或文件的字符串线索">

2.  找到该文件后， cd 进入它。/usr/local/Cellar//hadoop/hdfs/tmp

    然后 cd 到 dfs

    然后使用 -ls 命令查看数据和名称目录位于那里。

3.  使用 remove 命令，将它们都删除：

    **rm -R 数据。和 rm -R 名称**

4.  如果您还没有完成，请转到 bin 文件夹并结束所有内容：

    **sbin/end-dfs.sh**

5.  从服务器或本地主机退出。

6.  再次登录服务器：ssh <"server name">

7.  启动dfs：

    **sbin/start-dfs.sh**

8.  格式化namenode以确保：

    **bin/hdfs 名称节点格式**

9.  您现在可以使用 hdfs 命令将数据上传到 dfs 并运行 MapReduce 作业。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-28T10:27:53.127

就我而言，这个问题是通过在数据节点上打开 50010 上的防火墙端口来解决的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-17T13:58:28.427

**在 Windows 8.1 上对同一问题进行非常简单的修复**
我使用了 Windows 8.1 操作系统和 Hadoop 2.7.2，做了以下事情来克服这个问题。

1.  当我启动 hdfs namenode -format 时，我注意到我的目录中有一个锁。请参考下图。
    [![HadoopNameNode](../Images/70ec33bc14ef61e9c8831d3cf90dad42.png)](https://i.stack.imgur.com/EJZQl.png)
2.  一旦我删除了如下所示的完整文件夹，然后我再次执行了**hdfs namenode -format。** [![文件夹位置](../Images/cda679d11b7f802e299b24d6994b6815.png)](https://i.stack.imgur.com/SNu7y.png)
    [![完整文件夹删除](../Images/40d93e684ce3f2e554aba9df5195b1c6.png)](https://i.stack.imgur.com/4Ub3w.png)
3.  执行以上两个步骤后，我可以成功地将所需的文件放入 HDFS 系统中。我使用**start-all.cmd**命令启动 yarn 和 namenode。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-15T16:51:08.153

在我的情况下，hdfs-site.xml 中的 dfs.datanode.du.reserved 太大，并且名称节点给出了数据节点的私有 IP 地址，因此无法正确路由。私有 ip 的解决方案是将 docker 容器切换到主机网络，并将主机名放在配置文件的主机属性中。

这超越了 [关于复制问题的其他可能性堆栈问题](https://stackoverflow.com/questions/36015864/hadoop-be-replicated-to-0-nodes-instead-of-minreplication-1-there-are-1/36310025)*

# asp.net - 由于数据量大而不会发生回发（？）

> ID：15571587
> 
> 赞同：0
> 
> 时间：2013-03-22T13:29:23.617
> 
> 标签：asp.net, iis-7, postback

在我的应用程序的一个 ASP.NET 页面上，我得到了一个包含 4 列和 130 行的数据网格，每列包含一个自定义文本框（我知道这不是最佳做法）。

有一个按钮可以使用这些数据进行一些计算。

我将我的应用程序部署到开发服务器和测试服务器。测试服务器位于另一个网络中，出于安全原因，我们需要事先使用 VPN。

这个麻烦的页面在我们的开发服务器上没有任何问题（按钮完成了它的工作）。

然而，在我们的测试服务器上，当我单击按钮时，我们的 AjaxLoadingPanel 的 gif 永远不会停止，就好像请求需要永远处理或者请求由于防火墙或其他一些花哨的安全因素而被切断。

我不得不使用，

```
<add key="aspnet:MaxHttpCollectionKeys" value="2000" /> 
```

在我们的 webconfig 中，因为该页面上的自定义文本框控件的数量。因此，每当我减少此键的值时，我会立即从开发服务器上的应用程序中收到 502 错误请求。因此，此密钥可以按预期工作并按预期工作。

这两个应用程序在开发服务器和测试服务器的本地都可以正常工作。只有当我尝试通过键入 url（即从外部访问）来运行测试应用程序时才会出现问题。

两个应用程序的 webconfigs 完全相同。它不会卡在 maxRequestLength 或 maxRequestTimeout 上。

我认为，很明显它是某种防火墙或其他安全软件/硬件相关，由于其大小而阻止了请求。（此操作发送到服务器的数据量大约为 900KB）

可能是什么问题，有什么想法吗？因为我没有遇到任何异常，所以 gif 就像我提到的那样永远不会停止。

# windows - 如果getchar，openCV显示图像灰色

> ID：15571597
> 
> 赞同：0
> 
> 时间：2013-03-22T13:29:49.883
> 
> 标签：windows, opencv

为了不让显示的图像闪烁，我放了一个 getchar()。这是 Windows 控制台项目。

```
cv::Mat image= cv::imread("me.jpg");
cv::namedWindow("Image1");
cv::imshow("Image1",image);
getchar(); 
```

“Image1”窗口是灰色的，似乎是“无响应”，而如果我将其更改`getchar()`为`cv:waitKey(5000)`，它的行为正常。为什么，它与过程有什么关系？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:49:42.703

imshow() 只是复制一个图像引用，waitKey() 执行（窗口）消息泵送，没有它，您的程序将永远无法到达实际 blitting 发生的地方

# c# - 从验证器中删除的字符串仍显示在项目中

> ID：15571601
> 
> 赞同：1
> 
> 时间：2013-03-22T13:30:08.870
> 
> 标签：c#, asp.net, webforms, sitecore, customvalidator

如果可能的话，我正在尝试在 ASP 验证框架内组合一个表单和工作。最近重新考虑一些验证似乎是谨慎的，所以我去掉了四个验证器并用一个`CustomValidator`. 现在我有两个`CustomValidator`s（以前我有一个`CustomValidator`和四个`RegulorExpressionValidator`s）。

所以这就是奇怪的事情。我的一个自定义验证器以某种方式显示了我删除的验证器的错误消息。我实际上已经仔细检查并确认`string`它显示的不再在项目中。它也不是我要部署到的目录中的任何位置。（我已经建造、清理和重建）。

此外，这似乎不是浏览器缓存问题，因为我已关闭缓存（FF Web Developer）。这个问题也会根据我在页面中放置验证器的位置而改变（再次验证这不是一些奇怪的缓存问题）。

我终于能够通过验证器标签内的内容来解决它。

所以这有效：

```
<asp:CustomValidator
        ID="validateUrl"
        OnServerValidate="ValidateWebsiteUrl"
        ClientValidationFunction="isUrlValid" 
        ControlToValidate="websiteURLInput"
        ValidationGroup="CommentGroup"
        runat="server" 
        ForeColor="#991112"
>Please enter a valid URL</asp:CustomValidator> 
```

但这失败了：

```
<asp:CustomValidator
        ID="validateUrl"
        OnServerValidate="ValidateWebsiteUrl"
        ClientValidationFunction="isUrlValid" 
        ControlToValidate="websiteURLInput"
        ValidationGroup="CommentGroup"
        runat="server" 
        ForeColor="#991112"
        ErrorMessage="Please enter a valid URL" /> 
```

就像这样（没有错误消息）：

```
<asp:CustomValidator
        ID="validateUrl"
        OnServerValidate="ValidateWebsiteUrl"
        ClientValidationFunction="isUrlValid" 
        ControlToValidate="websiteURLInput"
        ValidationGroup="CommentGroup"
        runat="server" 
        ForeColor="#991112" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:44:01.900

验证器控件具有一个`Text`和一个`ErrorMessage`属性，在正常使用中，Text 会覆盖 ErrorMessage，并且标签内的内容与 Text 属性相同（与 Label.Text 一样）

如果未指定 Text 或使用 ValidationSummary，则使用 E​​rrorMessage。

我希望这可以帮助您找到真正的问题。

# spring - 使用 Spring DATA 实现 DAO

> ID：15571608
> 
> 赞同：0
> 
> 时间：2013-03-22T13:30:25.580
> 
> 标签：spring, spring-data, spring-data-jpa

我的要求是：我必须创建一个 AccountRepository 接口，并且我必须在我的 AccountRepositoryImpl 本身中实现所有方法，那么我该怎么做呢？

例子：

1) 接口

```
/* this is the interface */  
public interface AccountRepository extends JpaRepository
{
    List<Account> getAllAccounts();
} 
```

2）实施？

```
public class AccountRepositoryImpl implements AccountRepository
{
    public List<Account> getAllAccounts() {
        // now what?
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T14:57:31.303

Spring Data 的重点是您*不*实现存储库。反正通常不会。相反，典型的用法是您提供一个接口，然后 Spring 注入一些您从未见过的实现。

通过扩展`org.springframework.data.repository.CrudRepository`. 该接口为您提供方法名称。

然后在某些情况下，您可以编写方法签名以便 Spring Data 知道要获取什么（如果您知道 Grails，则在概念上类似于 GORM），这称为“通过方法名称创建查询”。您可以像这样在界面中创建一个方法（[从 spring data jpa 文档中复制一个示例](http://docs.spring.io/spring-data/jpa/docs/current/reference/html/repositories.html#repositories.query-methods.details)）：

```
List<Person> findByLastnameAndFirstnameAllIgnoreCase(
    String lastname, String firstname); 
```

Spring Data 将从名称中找出您需要的查询。

最后，为了处理复杂的情况，您可以提供一个查询注释来指定您要使用的 JPQL。

因此，每个实体（实际上是每个聚合根）都有不同的存储库接口。您想要执行基本 CRUD 但也有您想要执行的特殊查询的 Account 实体的存储库可能看起来像

```
// crud methods for Account entity, where Account's PK is 
// an artificial key of type Long
public interface AccountRepository extends CrudRepository<Account, Long> {
    @Query("select a from Account as a " 
    + "where a.flag = true " 
    + "and a.customer = :customer")
    List<Account> findAccountsWithFlagSetByCustomer(
        @Param("customer") Customer customer);
} 
```

你就完成了，不需要实现类。（大部分工作是编写查询并将正确的注释放在持久实体上。您必须将存储库连接到您的 spring 配置中。）

# asp.net-mvc - mvc区域路由？

> ID：15571609
> 
> 赞同：1
> 
> 时间：2013-03-22T13:30:25.953
> 
> 标签：asp.net-mvc, routing, area

我的项目结构：

```
Controller
    AdminController
    HomeController 
```

区域添加后我的项目结构我在项目中添加了一个管理区域，

```
Areas
    Admin
        Controller
            SomeController
Controller
    AdminController
    HomeController 
```

然后所有链接都断开了。例如

```
@Html.ActionLink(
    "go to some action", 
    "SomeAction", 
    "Admin", 
    new { area = "" }, 
    null) 
```

当我写上面的链接时，它会将我路由到`www.myDomain.com/Admin/SomeAction`，但这是区域操作，我想路由到 AdminController 操作。

我怎样才能做到这一点？我应该更改区域或控制器名称吗？

**更新**

以上链接输出：

```
domain/Admin/SomeAction
// I expect that is AdminController/SomeAction
// but not. There is SomeAction in my admin controller
// I get this error "The resource cannot be found."
// because it looks my expected, but it works unexpected
// it tries to call AdminArea/SomeController/SomeAction 
```

**更新 2**

例如：

```
 @Html.ActionLink(
    "go to some action", 
    "SomeAnotherAction", 
    "Admin", 
    new { area = "" }, 
    null) 
```

对于上面的链接，我没有收到任何错误，因为我所在的地区有 SomeAnotherAction。

区域登记

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "Admin_default",
        "Admin/{controller}/{action}/{id}",
        new { action = "Index", id = UrlParameter.Optional }
    );
} 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:03:03.393

由于您首先注册了您的区域，因此它们具有优先权。解决这个问题没有简单的方法。最好的解决方案是将`AccountController`站点的主要部分重命名为其他名称，以避免冲突。

另一种可能性是在您的区域路由注册中限制控制器：

```
context.MapRoute(
    "Admin_default",
    "Admin/{controller}/{action}/{id}",
    new { action = "Index", id = UrlParameter.Optional },
    new { controller = "Some|SomeOther" }
); 
```

现在只有请求`/Admin/Some/{action}`或`/Admin/SomeOther/{action}`将被路由到该区域，这意味着`/Admin/SomeAction`它将被全局路由定义拦截并路由到您的`AdminController`.

# android - 如何在水平 LinearLayout 中垂直对齐 EditText 和 ProgressBar？

> ID：15571610
> 
> 赞同：0
> 
> 时间：2013-03-22T13:30:28.700
> 
> 标签：android, textview, progress-bar, android-linearlayout, vertical-alignment

在我的布局中，我有四个这样的块：

```
 <LinearLayout
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <EditText
        android:id="@+id/label1"
        android:layout_width="100dip"
        android:layout_height="wrap_content"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="@string/freq_1_50" />
    <ProgressBar android:id="@+id/progress_horizontal1"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="100dip"
        android:layout_height="wrap_content"
        android:max="100"
        android:progress="50" />
    <EditText
        android:id="@+id/textScore1"
        android:layout_width="100dip"
        android:layout_height="wrap_content"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:inputType="none"
        android:text="50%" />

</LinearLayout> 
```

在android模拟器中产生了这张图片：

![在此处输入图像描述](../Images/c15f7260e4391222a7a64b4b411d33c6.png)

显而易见的问题是：如何垂直对齐 EditText 和进度条？

提前致谢！

这是添加 center 属性的预期结果：

![在此处输入图像描述](../Images/2d0df525a63f929978c60bf824725be2.png)

问题解决了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:33:45.603

尝试

> ```
> <LinearLayout
> android:orientation="horizontal"
> android:layout_width="match_parent"
> android:layout_height="wrap_content" 
> ```
> 
> **机器人：重力=“中心”** >

```
<EditText
    android:id="@+id/label1"
    android:layout_width="100dip"
    android:layout_height="wrap_content"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:text="@string/freq_1_50" />
<ProgressBar android:id="@+id/progress_horizontal1"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="100dip"
    android:layout_height="wrap_content"
    android:max="100"
    android:progress="50" />
<EditText
    android:id="@+id/textScore1"
    android:layout_width="100dip"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:inputType="none"
    android:text="50%" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:32:51.573

只需添加`android:gravity = "center"`到上面的线性布局

# .net - 使用反射检测 .NET 对象上的集合类型属性

> ID：15571613
> 
> 赞同：2
> 
> 时间：2013-03-22T13:30:32.333
> 
> 标签：.net, object, reflection, collections

我正在尝试编写一些代码来迭代我的业务对象并将它们的内容转储到日志文件中。

为此，我希望能够找到所有公共属性并使用反射输出它们的名称和值——我还希望能够检测**集合属性**并对其进行迭代。

假设有两个这样的类：

```
public class Person 
{
    private List<Address> _addresses = new List<Address>(); 

    public string Firstname { get; set; }
    public string Lastname { get; set; }

    public List<Address> Addresses
    {
        get { return _addresses; }
    }
}

public class Address
{
    public string Street { get; set; }
    public string ZipCode { get; set; }
    public string City { get; set; }
} 
```

我目前有类似这样的代码，可以找到所有公共属性：

```
public void Process(object businessObject)
{
    // fetch info about all public properties
    List<PropertyInfo> propInfoList = new List<PropertyInfo>(businessObject.GetType().GetProperties(BindingFlags.Instance | BindingFlags.Public));

    foreach (PropertyInfo info in propInfoList)
    {
       // how can I detect here that "Addresses" is a collection of "Address" items 
       // and then iterate over those values as a "list of subentities" here?
       Console.WriteLine("Name '{0}'; Value '{1}'", info.Name, info.GetValue(businessObject, null));
    }
} 
```

但我无法弄清楚如何检测给定属性（例如类`Addresses`上的`Person`）是**对象的****集合`Address`**？似乎找不到`propInfo.PropertyType.IsCollectionType`房产（或类似的东西会给我我正在寻找的信息）

我（不成功）尝试过类似的事情：

```
info.PropertyType.IsSubclassOf(typeof(IEnumerable))
info.PropertyType.IsSubclassOf(typeof(System.Collections.Generic.List<>))

info.PropertyType.IsAssignableFrom(typeof(IEnumerable)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:38:09.860

只需检查[`IEnumerable`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)每个集合都实现了哪个，甚至是数组：

```
var isCollection = info.PropertyType.GetInterfaces()
                       .Any(x => x == typeof(IEnumerable)); 
```

请注意，您可能希望为实现此接口的类添加一些特殊情况处理，但仍不应将其视为集合。[`string`](http://msdn.microsoft.com/en-us/library/system.string.aspx)会是这样的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-13T06:27:17.937

如果你想避免字符串和其他事情的麻烦：

```
 var isCollection = info.PropertyType.IsClass && 
info.PropertyType.GetInterfaces().Contains(typeof(IEnumerable)); 
```

# java - Android：在 Android 中用于视频渲染的最佳 C 原生库（框架）是什么？

> ID：15571616
> 
> 赞同：1
> 
> 时间：2013-03-22T13:30:38.903
> 
> 标签：java, android, mobile, video, native

我正在寻找具有自定义缓冲的视频播放本机库，用于在 android 应用程序中渲染大视频文件（500MB+）。什么是最好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:00:06.453

您需要一个带有 JNI 包装器的库还是只需要一个原生库？

我们为此目的使用 FFMPEG (libav)，但它没有任何可以使用的 JNI。不过，您可以搜索 Java 包装器。

它的重量很重，但可以做很多不同的事情。缺点是互联网上没有太多文档。而且几乎所有的教程现在都已经过时了，因为 API 变化非常快。

[这](http://dranger.com/ffmpeg/)是一个很好的入门教程。最好的文档是他们在[ffmpeg.org](http://ffmpeg.org/doxygen/trunk/index.html)或[libav.org上的 doxygen](http://libav.org/doxygen/master/)

我们还没有找到更好的东西..

# boost - 用更少的标题建立提升

> ID：15571619
> 
> 赞同：1
> 
> 时间：2013-03-22T13:30:44.087
> 
> 标签：boost, build

我目前正在尝试仅使用最低要求的软件包来构建 boost 1.53。这是我使用（在 Windows 上）编译 boost 的命令行。

```
b2^
 install^
 --prefix=%BOOST_OUTPUT_DIR%^
 --includedir=%BOOST_INCLUDE_DIR%^
 --toolset=%BOOST_TOOLSET%^
 --link=%BOOST_LINK%^
 --threading=%BOOST_THREADING%^
 --address-model=%BOOST_ADDRESS_MODEL%^
 --runtime-link=%BOOST_RUNTIME_LINK%^
 --build-dir=%BOOST_BUILD_DIR%^
 --without-atomic^
 --without-chrono^
 --without-context^
 --without-date_time^
 --without-exception^
 --without-filesystem^
 --without-graph^
 --without-graph_parallel^
 --without-iostreams^
 --without-locale^
 --without-math^
 --without-mpi^
 --without-program_options^
 --without-python^
 --without-random^
 --without-serialization^
 --without-signals^
 --without-system^
 --without-test^
 --without-thread^
 --without-timer^
 --without-wave

rem --without-regexp^ 
```

这个例子的工作方式是我只编译正则表达式包，但似乎所有已删除包的所有头文件仍添加到输出包含目录中。

有谁知道是否可以不将已删除包的标头放入输出包含目录中？

# c# - .NET 中的线程队列实现问题

> ID：15571620
> 
> 赞同：0
> 
> 时间：2013-03-22T13:30:46.247
> 
> 标签：c#, multithreading, unit-testing, mono

我正在尝试在.NET 中实现一个线程队列，但是当我通过测试运行它时遇到了一些麻烦。

允许该实现放弃线程处理的一些复杂性，因为它强制只有一个线程将项目放入队列中，并且只有一个线程将它们取出（这是设计使然）。

问题是有时，Take() 会跳过一个项目，就好像它从未存在过一样，在我的测试中，我会得到“预期：736 但原为：737”。我在这段代码中看不到会发生这种效果的任何地方。Put 只会放在最后一个项目之后（因此它不应该直接影响 this.m_Head），并且 Take 正在使用 Interlocked.Exchange 从头部获取项目。

此实施如何允许问题发生？

**执行：**

```
using System;
using System.Threading;

#pragma warning disable 420

namespace Tychaia.Threading
{
    public class TaskPipeline<T>
    {
        private int? m_InputThread;
        private int? m_OutputThread;
        private volatile TaskPipelineEntry<T> m_Head;

        /// <summary>
        /// Creates a new TaskPipeline with the current thread being
        /// considered to be the input side of the pipeline.  The
        /// output thread should call Connect().
        /// </summary>
        public TaskPipeline()
        {
            this.m_InputThread = Thread.CurrentThread.ManagedThreadId;
            this.m_OutputThread = null;
        }

        /// <summary>
        /// Connects the current thread as the output of the pipeline.
        /// </summary>
        public void Connect()
        {
            if (this.m_OutputThread != null)
                throw new InvalidOperationException("TaskPipeline can only have one output thread connected.");
            this.m_OutputThread = Thread.CurrentThread.ManagedThreadId;
        }

        /// <summary>
        /// Puts an item into the queue to be processed.
        /// </summary>
        /// <param name="value">Value.</param>
        public void Put(T value)
        {
            if (this.m_InputThread != Thread.CurrentThread.ManagedThreadId)
                throw new InvalidOperationException("Only the input thread may place items into TaskPipeline.");

            // Walk the queued items until we find one that
            // has Next set to null.
            var head = this.m_Head;
            while (head != null)
            {
                if (head.Next != null)
                    head = head.Next;
                if (head.Next == null)
                    break;
            }
            if (head == null)
                this.m_Head = new TaskPipelineEntry<T> { Value = value };
            else
                head.Next = new TaskPipelineEntry<T> { Value = value };
        }

        /// <summary>
        /// Takes the next item from the pipeline, or blocks until an item
        /// is recieved.
        /// </summary>
        /// <returns>The next item.</returns>
        public T Take()
        {
            if (this.m_OutputThread != Thread.CurrentThread.ManagedThreadId)
                throw new InvalidOperationException("Only the output thread may retrieve items from TaskPipeline.");

            // Wait until there is an item to take.
            var spin = new SpinWait();
            while (this.m_Head == null)
                spin.SpinOnce();

            // Return the item and exchange the current head with
            // the next item, all in an atomic operation.
            return Interlocked.Exchange(ref this.m_Head, this.m_Head.Next).Value;
        }
    }
}

#pragma warning restore 420 
```

**失败的测试：**

```
[Test]
public void TestPipelineParallelTo100()
{
    var random = new Random();
    var pipeline = new TaskPipeline<int>();
    var success = true;
    int expected = 0, actual = 0;
    ThreadStart processor = () =>
    {
        pipeline.Connect();
        for (int i = 0; i < 100; i++)
        {
            var v = pipeline.Take();
            if (v != i)
            {
                success = false;
                expected = i;
                actual = v;
                break;
            }
            Thread.Sleep(random.Next(1, 10));
        }
    };
    var thread = new Thread(processor);
    thread.Start();
    for (int i = 0; i < 100; i++)
    {
        pipeline.Put(i);
        Thread.Sleep(random.Next(1, 10));
    }
    thread.Join();
    if (!success)
        Assert.AreEqual(expected, actual);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:37:43.683

如果你`m_Head.Next`在它被读入之后分配值`Take`传递给`Interlocked.Exchange(ref this.m_Head, this.m_Head.Next)`，指针将丢失，因为访问它的唯一方法是通过`m_Head`。

*   `Take`读为`m_Head.Next`( `==null`)
*   `Put`写`m_Head.Next`( `!=null`)
*   `Take`写`m_Head`( `==null`)

**编辑：**这应该有效。我使用了非空标记值，`Interlocked.CompareExchange`并确保`Put`不会尝试重用`Take`已删除的条目。

**编辑 2：**调整为`Take`.

**编辑3：**我相信如果识别出`goto retry;`的`Put`尾巴是`Entry.Sentinel`.

```
using System;
using System.Threading;

#pragma warning disable 420

namespace Tychaia.Threading
{
    public class TaskPipeline<T>
    {
        private int? m_InputThread;
        private int? m_OutputThread;
        private volatile Entry m_Head;

        private sealed class Entry
        {
            public static readonly Entry Sentinel = new Entry(default(T));

            public readonly T Value;
            public Entry Next;

            public Entry(T value)
            {
                Value = value;
                Next = null;
            }
        }

        /// <summary>
        /// Creates a new TaskPipeline with the current thread being
        /// considered to be the input side of the pipeline.  The
        /// output thread should call Connect().
        /// </summary>
        public TaskPipeline()
        {
            this.m_InputThread = Thread.CurrentThread.ManagedThreadId;
            this.m_OutputThread = null;
        }

        /// <summary>
        /// Connects the current thread as the output of the pipeline.
        /// </summary>
        public void Connect()
        {
            if (this.m_OutputThread != null)
                throw new InvalidOperationException("TaskPipeline can only have one output thread connected.");
            this.m_OutputThread = Thread.CurrentThread.ManagedThreadId;
        }

        /// <summary>
        /// Puts an item into the queue to be processed.
        /// </summary>
        /// <param name="value">Value.</param>
        public void Put(T value)
        {
            if (this.m_InputThread != Thread.CurrentThread.ManagedThreadId)
                throw new InvalidOperationException("Only the input thread may place items into TaskPipeline.");

        retry:
            // Walk the queued items until we find one that
            // has Next set to null.
            var head = this.m_Head;
            while (head != null)
            {
                if (head.Next != null)
                    head = head.Next;
                if (head.Next == null)
                    break;
            }

            if (head == null)
            {
                if (Interlocked.CompareExchange(ref m_Head, new Entry(value), null) != null)
                    goto retry;
            }
            else
            {
                if (Interlocked.CompareExchange(ref head.Next, new Entry(value), null) != null)
                    goto retry;
            }
        }

        /// <summary>
        /// Takes the next item from the pipeline, or blocks until an item
        /// is recieved.
        /// </summary>
        /// <returns>The next item.</returns>
        public T Take()
        {
            if (this.m_OutputThread != Thread.CurrentThread.ManagedThreadId)
                throw new InvalidOperationException("Only the output thread may retrieve items from TaskPipeline.");

            // Wait until there is an item to take.
            var spin = new SpinWait();
            while (this.m_Head == null)
                spin.SpinOnce();

            // Return the item and exchange the current head with
            // the next item, all in an atomic operation.
            Entry head = m_Head;
        retry:
            Entry next = head.Next;
            // replace m_Head.Next with a non-null sentinel to ensure Put won't try to reuse it
            if (Interlocked.CompareExchange(ref head.Next, Entry.Sentinel, next) != next)
                goto retry;

            m_Head = next;
            return head.Value;
        }
    }
} 
```

# r - R比较相应的单元格并创建一个以内容命名的新列

> ID：15571627
> 
> 赞同：3
> 
> 时间：2013-03-22T13:31:00.977
> 
> 标签：r, dataframe

我刚从R开始，虽然我一直做得很好，但是这个杀了我！:)

我有一个数据框：

```
df <- data.frame(
col1=letters[1:5],col2=c(NA,letters[4:1]),col3=letters[11:15],
col1_rr=letters[15:11], col2_rr=letters[2], col3_rr=c(letters[11:14], "oz")) 
```

看起来像这样：

```
 col1      col2    col3    col1_rr  col2_rr  col3_rr
 1     a        NA       k        o        b        k
 2     b        d        l        n        b        l
 3     c        c        m        m        b        m
 4     d        b        n        l        b        n
 5     e        a        o        k        b        oz 
```

请注意列名中的模式。对于每一列`colX`，都有一个`colX_rr`.

现在，我想检查 的内容`df[1,"col1"]`是否包含在`df[1,"col1_rr"]`.

例如，此语句对于 是错误的`df[1,"col1"]`，但对于所有`col3`单元格都是正确的（甚至`df[5,"col3"]`，因为`o`包含在 中`oz`）。

我知道我可以使用`grepl`：

```
 > grepl(df[1,"col3"], df[1,"col3_rr"])
 [1] TRUE
 > grepl(df[2,"col1"], df[2,"col1_rr"])
 [1] FALSE
 > grepl(df[1,"col2"], df[1,"col2_rr"])
 [1] NA
 > grepl(df[5,"col3"], df[5,"col3_rr"])
 [1] TRUE 
```

接下来：一般来说，如果字符`y`from`[z , colX]`包含在等效`[z , colX_rr]`单元格中，那么我想创建一个新列`y`并`1`为给定行输入。如果字符`y`from`[z , colX]`不包含在等效项中，则`[z , colX_rr]`输入`0`.`df$y`

所以我最后会有这样的事情：

```
 col1      col2    col3    col1_rr  col2_rr  col3_rr     a        b (...)  k(...)
 1     a        NA       k        o        b        k        0        0        1
 2     b        d        l        n        b        l        0        0        0
 3     c        c        m        m        b        m        0        0        0
 4     d        b        n        l        b        n        0        1        0
 5     e        a        o        k        b        oz       0        0        0 
```

在列范围`col1:col3`的每个单元格中，只有一个字母，并且每个参与者（行）仅出现一次。column range `col1_rr`:的内容`col3_rr`非常混乱，包含不同长度的字符串，但每个字母对于每一行也只存在一次。

请注意，`NA`表中也出现了 s。

我希望这是自动化的，因为真实数据中有 50 列。但如有必要，我可以为每一列单独编写一行脚本。

实际数据中的字母来自 range `letters[1:14]`，因此最后将只有 14 个新列，每个包含值 0 或 1（或`TRUE`/ `FALSE`，如果这使解决方案更简单）。

`ifelse`对于如此复杂的规则，我一直在尝试`merge`但不知道如何让它们解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:00:48.697

这是一个解决方案，但不是很优雅。它使用`reshape2`包：

```
df <- data.frame(col1=letters[1:5],col2=c(NA,letters[4:1]),col3=letters[11:15],
                 col1_rr=letters[15:11], col2_rr=letters[2], col3_rr=c(letters[11:14], "oz"))
col.vars <- names(df)[1:3]
colrr.vars <- names(df)[4:6]
df$id <- 1:nrow(df)
df.var <- melt(df[,c("id",col.vars)], id.vars="id")
df.var_rr<- melt(df[,c("id",colrr.vars)], id.vars="id")
let <- names(table(unlist(df[,1:3])))
m <- data.frame(sapply(let, function(l) df.var$value==l & grepl(l, df.var_rr$value)))
cbind(df, aggregate(m, list(df.var$id), sum)) 
```

这使 ：

```
 col1 col2 col3 col1_rr col2_rr col3_rr id Group.1 a  b c d e k l m n o
1    a <NA>    k       o       b       k  1       1 0 NA 0 0 0 1 0 0 0 0
2    b    d    l       n       b       l  2       2 0  0 0 0 0 0 1 0 0 0
3    c    c    m       m       b       m  3       3 0  0 0 0 0 0 0 1 0 0
4    d    b    n       l       b       n  4       4 0  1 0 0 0 0 0 0 1 0
5    e    a    o       k       b      oz  5       5 0  0 0 0 0 0 0 0 0 1 
```

# html - 为什么img标签只显示一半的图像？

> ID：15571645
> 
> 赞同：0
> 
> 时间：2013-03-22T13:32:12.957
> 
> 标签：html, image

谁能解释为什么下面的代码只会显示一半图像？

```
<img src="http://amragl.com/images/entrada.gif" alt="la tabla de gongora" style="width:400px; height:241px;overflow:visible"/> 
```

对于这个愚蠢的问题，我真的可以找到答案或解决方法。

我正在使用 Chrome 版本 25.0.1364.97 m 和 IE10。

请参见下面的示例。

提前致谢。

**实时查看** [http://jsbin.com/ipixod/1/](http://jsbin.com/ipixod/1/) **代码编辑** [http://jsbin.com/ipixod/1/edit](http://jsbin.com/ipixod/1/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:34:07.660

图像文件已损坏，您可以在此处看到：http: [//amragl.com/images/entrada.gif](http://amragl.com/images/entrada.gif)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:35:06.613

img 标签没有问题。实际上，您的图像已损坏。尝试直接在浏览器中打开图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:38:33.247

您的原始图像位于[http://amragl.com/images/entrada.gif](http://amragl.com/images/entrada.gif)

您已为图像指定了固定尺寸`style="width:400px; height:241px;overflow:visible"`。所以它是按照尺寸出现的。

更改尺寸以进行相应设置。

问题在于图像。

# javascript - 有没有办法在 Google Maps API V3 中同步地图拖动？

> ID：15571652
> 
> 赞同：2
> 
> 时间：2013-03-22T13:32:22.097
> 
> 标签：javascript, google-maps-api-3

我使用 GMaps API v3，我有两个并排放置的谷歌地图让我们将地图称为左侧**X**和右侧的地图**Y**。我的问题是当用户拖动**X**时是否可以让**Y**拖动自己？

 **我知道如何检测谷歌地图上的拖动事件，但是如何将拖动从一张地图应用到另一张地图？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T17:50:40.853

我想要一个类似的功能，但需要缩放也被镜像。

如您所料，它与接受的答案非常相似：

```
google.maps.event.addListener(map, 'bounds_changed', (function () {
    map2.setCenter(map.getCenter());
    map2.setZoom(map.getZoom());
})); 
```

这是一个演示它的JSFiddle：http: [//jsfiddle.net/LREfU/](http://jsfiddle.net/LREfU/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:58:09.333

这是我要尝试的：在您的拖动事件中，`getCenter()`在**X**`setCenter()`上使用，然后在**Y**上使用该 lat-lng 。我假设您正在使用地图 API 的“bounds_changed”事件。

更新：这样的事情：

```
//X and Y are map objects
google.maps.event.addListener(X, 'bounds_changed', (function () {
    Y.setCenter(X.getCenter());
})); 
```

您甚至可以添加一些逻辑`setTimeout`来检测用户何时停止拖动 X，然后才将中心设置在 Y 上。**

# php - 如何显示可以在 PHP 的文本区域中输入的最大字数？

> ID：15571655
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:32:26.037
> 
> 标签：php, ajax, forms

我正在处理一个 PHP 表单，我在其中放置了一个文本区域字段。文本区域字段最多可输入 500 个单词。我正在用标签显示该值。

在这里，我想要做的是，当用户在文本区域字段中输入时，应该从最大单词中减去总输入的单词，并且该值应该显示为实时。

例如，如果我输入了文本“I”，那么 max words 的值应该更改为 499。

那么我该如何执行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:46:57.843

您不需要 ajax 来执行此操作。只需在页面上使用脚本以减少开销，例如：

HTML：

```
<!-- create textarea and limit characters -->
<textarea id="input" rows="4" cols="50" maxlength="500"> 
</textarea>
<span id="output"></span> 
```

JS：

```
var maxWords = 500;
var input = document.getElementById('input');
var output = document.getElementById('output');

output.innerHTML = maxWords + " words left";

input.onkeyup = function() {
    var words = input.value.split(" "); // Convert string into words
    var diff = maxWords - words.length; // Subtract words from maxWords
    if (diff < 0) { // If words < maxWords prevent user from inputting more than maxWords
        words.length = maxWords; // Remove words over limit
        input.value = words.join(" "); // Fill input
        diff = 0;
    }
    output.innerHTML = diff + " words left"; // Tell user new word count
} 
```

[http://jsfiddle.net/georeith/z2KfV/2/](http://jsfiddle.net/georeith/z2KfV/2/)

然而，这并没有考虑到语言的复杂性，并假设任何空格都表示一个新词。如果你想让它做这些事情，你将不得不考虑使用正则表达式。

*有关最大字符版本，请参见：http: [//jsfiddle.net/georeith/z2KfV/4/](http://jsfiddle.net/georeith/z2KfV/4/)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:40:43.137

html代码

```
<textarea id="field"></textarea>
<div id="charNum">0</div> 
```

jQuery代码

```
$("#field").keyup(function(){
el = $(this);
if(el.val().length >= 500){
    el.val( el.val().substr(0, 500) );
} else {
    $("#charNum").text(500-el.val().length);
}
}); 
```

工作示例 [http://jsfiddle.net/vikastyagi87/xqyWV/255/](http://jsfiddle.net/vikastyagi87/xqyWV/255/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T13:46:26.940

[这里的](http://jsfiddle.net/sCj3P/2/)工作示例

```
$(function() {
    $("textarea").keypress(function() {
        total_words = this.value.split(/[\s\.\?]+/).length;     
        $("p").html(500 - total_words); 
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T13:49:16.677

请试试这个:)

```
<?php $no_of_word = 500;?>
<script>
$(document).ready(function(){
    $('#wordcount').keyup(function(){
        var totalword = $(this).val().length;
        if(totalword > <?php echo $no_of_word;?>){
            alert('Max word exceeded');
            $(this).attr('value',$(this).val().substr(0,<?php echo $no_of_word?>));
            $('#textrem').html(0);
        }else{
            var remword = <?php echo $no_of_word;?> - totalword;
            $('#textrem').html(remword);
        }
    });
});
</script>

<label>No of word remaining</label> <span id='textrem'><?php echo $no_of_word?></span>
<textarea id='wordcount'></textarea> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T13:35:32.293

您应该在 Javascript 中执行此操作。使用正则表达式计算文本区域中的空格数（一个空格=单词）。然后你显示减法：maxWords-words

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T13:38:27.480

为了在用户每次输入字母时更新屏幕上的元素，您必须结合使用 Javascript 和 HTML DOM。

JQuery 简化了一点：[http ://api.jquery.com/text/](http://api.jquery.com/text/)

您需要使用 Javascript 事件来捕获输入到 textarea 中的内容，这实际上有点复杂。

查看此线程以获取一些信息：[Textarea onchange detection](https://stackoverflow.com/questions/2823733/textarea-onchange-detection)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T13:44:09.043

要获取字符串的单词数，请使用以下命令：

```
var string = "lorem ipsum dolor sit amet"
  , words = string.match(/\w+/g)  // ["lorem", "ipsum", ...]
  , numberOfWords = words.length; // 5 
```

或作为一个班轮：`"lorem ipsum".match(/\w+/g).length;`

您需要将此检查添加到 textarea 的 onKeyup 和 onChange 事件中。

# zooming - OpenLayer Map 限制平移和缩放

> ID：15571660
> 
> 赞同：3
> 
> 时间：2013-03-22T13:32:47.257
> 
> 标签：zooming, openlayers

我是 OpenLayers 的新手，正在尝试弄清楚如何限制用户可以平移和向外缩放的数量。对于此应用程序，用户在地图中选择一个本地区域并单击一个按钮，表示使用该区域，我们希望他们不能平移到该范围之外或缩小到更大的范围。单击按钮时，我使用 map.GetExtent() 将 maxRestrictedExtent 和 maxExtent 设置为当前范围。我还通过调用 map.getResolution() 将 maxResolution 设置为当前分辨率。平移效果很好，但缩放却不行。通过给定的分辨率，用户仍然可以缩小。

我添加了代码，每次范围更改时，都会打印出当前范围和分辨率。在第 6 次范围更改时，我设置了上面列出的三个地图属性并打印出这些设置。这使我可以从完整的世界视图放大到足够本地化的区域进行测试。在第 6 次范围更改时，我用鼠标滚轮缩小并查看选择的范围和分辨率。单击鼠标滚轮进行缩小时，下一个打印输出清楚地显示分辨率确实大于 map.maxResolution 的设置，并且我可以看到可视区域大于选择的区域。我已经尝试了很多事情，包括设置 maxExtent，但似乎没有什么会导致最大可缩放范围受到限制。如果我愿意，我可以再次放大到完整的世界视图。

下面你可以看到我编写的测试代码，它使用导航控件和 OSM 层实例化地图，然后注册地图的 moveend 事件，创建一个回调函数，执行我所描述的操作，最后缩放到最大程度.

有没有人知道我应该做些什么不同的事情来限制缩小到所选最大范围的能力？我希望我不必手动将范围调整回最大范围内，但如果是这样的话，至少知道这会有所帮助。

PS - 不幸的是，整个 html 没有显示，因为从样式到样式之前，以及最终样式之后都被处理为 html。唯一真正缺少的是我在正文的 onload 事件中调用了 init()。

```
<style type="text/css">    
    html, body {
        width: 100%;
        height: 100%;
        margin: 0;         
    }
    #map {
        width: 100%;
        height: 100%;
        margin: 0;         
    } 
</style>

<script src="http://www.openlayers.org/api/OpenLayers.js"></script>
<script type="text/javascript">

var map;
var num;

function init(){
    map = new OpenLayers.Map('map', { controls: [] });       
    map.addControl(new OpenLayers.Control.Navigation());       
    map.addLayer(new OpenLayers.Layer.OSM());

    map.events.register("moveend", this, function (e) {
        if (num == 5)
        {
            map.maxExtent = map.getExtent();
            map.restrictedExtent = map.maxExtent;
            map.maxResolution = map.getResolution();
            console.log(num++ + ": Setting maxExtent/restrictedExtent: " + map.maxExtent + "; resolution: " + map.maxResolution);
        }
        else
        {
            console.log(num++ + ": Changed to extent: " + map.getExtent() + "; resolution: " + map.getResolution());
        }
    });

    num = 0;
    map.zoomToMaxExtent();
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:28:10.967

我刚刚做了你想做的事，它对我有用。

创建地图时，我指定了最小/最大分辨率

```
 map = new OpenLayers.Map('map_element', {
    minResolution: 0.02197265625,
    maxResolution: 0.00274658203125
}); 
```

添加图层时，我还指定了 serverResolutions 列表。

```
 var tilecache_disk_layer = new OpenLayers.Layer.TileCache("TileCache Layer",
        ["http://" + tilecache_host + "/tilecache/"],
        "basic",
        {
         serverResolutions: [0.703125, 0.3515625, 0.17578125, 0.087890625, 
                        0.0439453125, 0.02197265625, 0.010986328125, 
                        0.0054931640625, 0.00274658203125, 0.001373291015625, 
                        0.0006866455078125, 0.00034332275390625, 0.000171661376953125, 
                        0.0000858306884765625, 0.00004291534423828125, 0.000021457672119140625]
        },
        {wrapDateLine: 'true'},
        {isBaseLayer: true}
    ); 
```

以下 javascript 向我的服务器发送请求以获取地图参数。

```
 if (site_coords == undefined) {
    coordinates = sendHttpRequest("http://" + tile_host + "/ManagerApp/mapView?position=true");
    mapParameters = coordinates.split(",");       
    map.setCenter(new OpenLayers.LonLat(mapParameters[0], mapParameters[1]));
    map.minResolution = mapParameters[2];
    map.maxResolution = mapParameters[3];
    zoom_level = mapParameters[4];
    map.restrictedExtent = new OpenLayers.Bounds(mapParameters[5], mapParameters[6], mapParameters[7], mapParameters[8])
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:50:32.390

所以这是我的答案。经过大量搜索、发布和电子邮件，我找到了一个告诉我一个简单答案的人。我已经在注册“moveend”事件，捕捉所有范围的移动，这样我就可以看看发生了什么。答案是在类上声明一个私有 int 变量（maxZoomLevel），当第一次绘制地图时，它的值为零，因为我正在绘制世界视图开始，然后设置为当前缩放级别getZoom() 在用户单击按钮时选择当前要使用的区域。那么“moveend”事件的注册如下所示：

```
 map.events.register("moveend", this, function (e) {
        if (map.getZoom() < maxZoomLevel)
        {
            map.zoomTo(maxZoomLevel);
        }
    }); 
```

由于世界视图是 0，而最地面视图是 19，那么如果当前视图小于最大值（选择的缩放级别），我们只需缩放到最大值。

这很好用。当我滚动鼠标缩小时，我确实闪烁了一下，超过了选择的最大缩放级别，但它不再缩小了。此外，此方法不需要我向地图图层添加分辨率数组，或在地图上设置最大/最小分辨率。（希望我能摆脱那种闪烁......嗯！）

# javascript - 如何在 jwplayer 中制作交互式视频

> ID：15571664
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:32:54.290
> 
> 标签：javascript, html, jwplayer

我正在尝试使用 jwplayer 制作交互式视频，其中我可以在视频中间弹出测验，用户可以与视频交互并回答问题，并且在给出正确答案时，应该允许用户再次播放视频

如何做到这一点任何人都可以帮助我

我特意找 javascript , html 代码

连同 JWplayer api 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:46:48.353

先尝试一个人做，如果不行的话，把你的代码贴在这里，然后我们看看会给出答案，

无论如何，您可以先显示您的问题，如果用户允许，然后您可以显示视频播放（您可以调用 JWplayer 函数）

```
jwplayer("myElement").setup({
    playlist: "http://example.com/playlist.rss",
    height: 360,
    listbar: {
        position: 'right',
        size: 320
    },
    width: 960
}); 
```

# javascript - 没有触发主干销毁函数的成功回调

> ID：15571667
> 
> 赞同：0
> 
> 时间：2013-03-22T13:32:59.760
> 
> 标签：javascript, backbone.js, backbone-views

我无法弄清楚我做错了什么。我的成功和错误回调没有触发，我正在从服务器返回 JSON 响应。关于我在哪里搞砸的任何想法？

```
mysite.city.delete_photo = {
    "Model": Backbone.Model.extend({
        "id": "deletePhoto",
        "initialize": function initialize(id) {
            this.url = "/assets/ajax/delete_image.php?img_id=" + id;
        }
    }),
    "View": Backbone.View.extend({
        "initialize": function initialize(id) {
            _.bindAll(this,
                "render",
                "success");

            this.model = new mysite.city.delete_photo.Model(id);

            this.render();
        },
        "render": function render() {
            this.model.destroy({
                "cache": false,
                "success": this.success,
                "error": this.error
            });
        },
        "success": function success(model, data) {
            console.log("test");
        },
        "error": function error() {
            message('error', 'This image could not be deleted.');
        }
    })
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:23:56.800

以下行

```
this.model = new mysite.city.delete_photo.Model(id); 
```

应该：

```
this.model = new mysite.city.delete_photo.Model({'id':id}); 
```

在第一种情况下`Id`，根本没有设置模型，并且 `destroy`返回 false 甚至没有向服务器发送`DELETE`请求，因为模型没有`ID`并且被认为是`new`.

[http://backbonejs.org/#Model-destroy](http://backbonejs.org/#Model-destroy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:49:48.740

`success`or`error`不是 Model 中的函数，但都是 Model 的 fetch 和 save 方法的回调。使用打击代码获取时，您可以触发成功或错误事件：

```
model.fetch({success: function(model, response, options) {
    console.log('success triggered');
}); 
```

`error`与回调相同的逻辑。

# asp.net - 在动态创建的链接按钮单击事件中传递参数

> ID：15571669
> 
> 赞同：3
> 
> 时间：2013-03-22T13:33:07.480
> 
> 标签：asp.net

我的问题是我在动态单元格中创建动态链接按钮。
从那个我处理链接按钮的事件

```
lnk.Click += new EventHandler(this.LinkButton_Click);            
protected void LinkButton_Click(object sender, EventArgs e)
{      
    LinkButton lnk = (LinkButton)sender;
    //perform some logic
} 
```

我想对这个动态创建的链接按钮单击事件做一些事情，但为此我需要传递一些参数。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:11:32.570

这是一个类似的问题，可能会对您有所帮助。
您可以使用 coomand artuments 和命令名称来解决您的问题。
[动态创建按钮以调用方法并传入参数](https://stackoverflow.com/questions/7840821/create-buttons-dynamically-to-call-method-and-pass-in-parameter)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T10:42:36.753

这是一个类似的问题，可能会对您有所帮助。您可以使用 coomand artuments 和命令名称来解决您的问题。动态创建按钮以调用方法并传入参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:38:22.217

您可以使用 CommandArgument 和 CommandName 属性。在创建时设置它们并使用 lnk.CommandArgument 或 lnk.CommandName 检索它们

# tkinter - wxWidgets 相当于 PyTk 的 update_idletasks？

> ID：15571673
> 
> 赞同：0
> 
> 时间：2013-03-22T13:33:20.447
> 
> 标签：tkinter, wxwidgets

我正在将视频播放器从 PyTk 移植到 wxWidgets。

我有一个单独的工作线程，每 30 毫秒将事件推送到主应用程序`wx.PostEvent`（基于这些说明：[http](http://wiki.wxpython.org/Non-Blocking%20Gui) ://wiki.wxpython.org/Non-Blocking%20Gui ）。主应用程序应该从视频文件中读取一个新帧并显示它。事件被正确接收和处理（通过调试语句确认），但屏幕上的实际图像不会更新。GUI 仅在工作线程终止后更新——所以我只能看到最后一帧。

我的帧读取和显示代码工作正常——我已经使用滑块对其进行了测试。我无法弄清楚 GUI 不更新的原因。

在 PyTk 中，有一个名为 update_idletasks 的方法可以强制重新绘制小部件。我有一种感觉，我需要在 wxWidgets 中做类似的事情——是这样吗？如果是，那么 wxWidgets 替代 update_idletasks 是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:45:19.203

我的猜测：这比 wxWidgets 更像是一个 windows 的东西。我想您可能需要告诉窗口管理器包含视频帧的窗口需要重新绘制。在该窗口上调用 Refresh() 或 Invalidate() 可能值得一试。

# sql-server-2008 - 如何在另一个过程中使用一个过程的返回值

> ID：15571676
> 
> 赞同：0
> 
> 时间：2013-03-22T13:33:26.003
> 
> 标签：sql-server-2008

我是数据库和 sql-server 2008 的新手。我有一个看起来像

```
CREATE PROCEDURE P @myint as int
AS
BEGIN

CREATE TABLE #temp (Quantity smallint, Timing smallint)

INSERT INTO #temp

SELECT 
    Order.quantity as 'Quantity',
    Order.ValidUntil - Order.ValidFrom / X

FROM
    Order

WHERE 
    Order.id = 123

SELECT * FROM #temp

DROP TABLE #temp

END 
```

现在问题出在我提到“X”的第二列中的上述选择语句中。对于这个 X，在执行另一个返回表的过程后，我应该有一个值，并且我想使用该表的某个列中的值。

所以，而不是 X 我想写类似的东西

```
create table #tmp (col1 nvarchar(512), col2 smalldatetime, col3 smalldatetime, col4 int, col5 float)
Insert into #tmp EXEC ProcedureHere 6, '20130101', '20131231', 0, 400
select col4 from #tmp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:49:41.143

在您的程序中，您必须将参数与输出属性一起放置，当您将参数定义为 OUT/OUTPUT 时，该值将在程序执行完成后可用。

```
--first declare all variables with the same type as table #tmp fields     
--remember: It's a better design put the declare block in the top of the procedure
declare @p1 nvarchar(512), 
        @p2 smalldatetime, 
        @p3 smalldatetime,
        @p4 int,
        @p5 float

--create the table  
create table #tmp (col1 nvarchar(512), col2 smalldatetime, col3 smalldatetime, col4 int, col5 float)

--call the procedure
EXEC ProcedureHere @p1, @p2, @p3, @p4, @p5             

--insert data into temporary table
Insert into #tmp 
  select @p1, @p2, @p3, @p4, @p5

--read col4 
select col4 from #tmp 
--or 
select @p4 
```

程序 DDL：

```
if another parameters is required, you simply add then in the mark (*):
Create Procedure ProcedureHere(
        @p1 nvarchar(512) output, 
        @p2 smalldatetime output, 
        @p3 smalldatetime output,
        @p4 int output,
        @p5 float output,
        *) as
begin
  .
  DoStuff
  .
  --define @p1 result value
  select @p1 = select something from somewhere
  --so on for the others parameters      
  .
end
go 
```

# android - Android，在最终文本视图上更改字体

> ID：15571677
> 
> 赞同：0
> 
> 时间：2013-03-22T13:33:28.417
> 
> 标签：android, fonts, textview, final

我想更改文本视图上的字体但是按下按钮即可修改电视，并且我将电视定义为“最终”，并且应用程序崩溃了...我能做什么？

```
Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/HeroQuest.ttf");
final TextView tv = (TextView) findViewById(R.id.textView1);
    tv.setTypeface(tf); 
```

如果 tv 不是最终代码，则此代码有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:37:53.057

定义您的`TextView`as**字段**

即私人 TextView 电视；

```
if u need more clarification on crash.paste the code in your OnClicklistener 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:35:59.827

尝试

```
Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/HeroQuest.ttf");
TextView tv1 = (TextView) findViewById(R.id.textView1);
tv1.setTypeface(tf);
final TextView tv = tv1;
.... 
```

# makefile - Makefile：缺少分隔符

> ID：15571678
> 
> 赞同：-2
> 
> 时间：2013-03-22T13:33:29.023
> 
> 标签：makefile

这是我的 Makefile：

```
obj-m +=hello.o

all:
make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules
clean:
rm -rf *.o *.mod.o *.order  
make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

我在`rm -rf`声明中收到“缺少分隔符”错误。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:43:42.110

“缺少分隔符”错误是由于前面缺少制表符“\t”引起的`rm -rf ...`，即应该是

```
clean:
<tab-here>rm -rf ... 
```

这对于任何进入目标（也在您的`make ...`行前）是必需的。

# java - 从 jdbc (clojure/java) 生成“创建表”脚本

> ID：15571680
> 
> 赞同：2
> 
> 时间：2013-03-22T13:33:36.130
> 
> 标签：java, sql, jdbc, clojure

有谁知道是否可以使用clojure或java通过jdbc从数据库生成“创建表脚本”？

我可以从系统表或信息模式中获取，但每个不同的数据库类型会有所不同。例如，MSSQL 必须是查询才能从信息模式构建创建表（或视图），并从 ibm.systables 构建 db2。希望这个问题以前在 JDBC 世界中已经解决了。

例如，我希望区分源数据库和目标数据库之间的创建表语句。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:23:16.550

在 MySQL 中，您可以使用`show create table`：

`(require '[clojure.java.jdbc :as jdbc])`

```
(defn gen-script [db table]
  (jdbc/with-connection db
    (jdbc/with-query-results rs [(str "show create table " table)]
      (get (first rs) (keyword "create table"))))) 
```

测试：

```
(def db {:classname "com.mysql.jdbc.Driver"
         :subprotocol "mysql"
         :subname (str "//localhost:3306/testtest")
         :user "root"
         :password "..."})

(println (gen-script db "example"))

=> CREATE TABLE `example` (
     `id` int(11) NOT NULL AUTO_INCREMENT,
     `name` varchar(30) DEFAULT NULL,
     `age` int(11) DEFAULT NULL,
     PRIMARY KEY (`id`)
   ) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

在其他数据库中，您可以从以下数据库开始：

```
(defn- gen-script [db table]
  (jdbc/with-connection db
    (let [conn (jdbc/connection)
          meta (.getMetaData conn)]
      (format "create table %s (\n%s\n)"
         table
         (apply str
           (interpose ",\n"
            (map (fn [x]
                   (format "  %s %s(%s)%s%s%s"
                      (:column_name x)
                      (:type_name x)
                      (:column_size x)
                      (if (not= "YES" (:is_nullable x)) " NOT NULL" "")
                      (if (= "YES" (:is_autoincrement x)) " AUTO_INCREMENT""")             
                      (if (= "YES" (:column_def x)) " DEFAULT" "")))
                 (resultset-seq (.getColumns meta nil nil table "%"))))))))) 
```

测试：

```
(println (gen-script db "example"))

=> create table example (
     id INT(10) NOT NULL AUTO_INCREMENT,
     name VARCHAR(30),
     age INT(10) 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:36:13.540

尝试使用休眠工具项目。它将生成一个休眠映射，您可以从中生成创建语句。

但是，当您的数据库可以为您做到这一点时，为什么要那样做......

# workflow-foundation - WF 结果 OR 属性从一个活动作为输入到设计器中的下一个活动

> ID：15571687
> 
> 赞同：2
> 
> 时间：2013-03-22T13:33:48.333
> 
> 标签：workflow-foundation

我正在使用设计器将一些`CodeActivity`基于活动的活动串联起来。使用可以输入 VB 表达式的属性窗口，我不确定如何引用之前的活动。

我想要两件事。

1.  获取上一个活动的结果并将其传递给设计器中的 in Argument 属性。

2.  可能阅读`InArgument`了以前的活动。因此，如果我为文件名设置一个 in 参数，我希望能够读取文件名。如果有帮助，我可以将它们更改为 inout 参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:07:42.570

您可以创建一个派生自`CodeActivity<string>`

# c# - 在 TFS 启用多签出文件

> ID：15571695
> 
> 赞同：8
> 
> 时间：2013-03-22T13:34:11.980
> 
> 标签：c#, tfs

我与一个小团队一起使用 TFS 2010。签出文件的策略不启用多重签出。但我希望对于特定文件（仅适用于两个文件（cs 文件））有多重检出选项？当一个人使用“签出编辑”时，“锁定类型”的组合框表示只有一个人可以编辑文件并且没有更改它的选项。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T13:43:26.470

TFS 中的多重检出只能[在项目级别启用或禁用](http://msdn.microsoft.com/en-us/library/ms242869%28v=vs.100%29.aspx)。要启用或禁用它，具有团队项目管理员访问权限的人需要使用团队资源管理器导航到：

（项目）-> 团队项目设置-> 源代码管理-> 签出设置并打开“允许多次签出”框。

如果为一个项目启用了多个签出，并且您右键单击源代码管理资源管理器中的*特定*项目并“签出以进行编辑”，您现在应该会收到询问要应用哪种锁定类型的提示。这使您可以专门针对每个项目进行独家结帐。

但是，AFAIK，您不能将多个结帐限制为项目子集，除非您强制用户手动对其他所有内容进行排他性结帐。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-06T08:19:42.987

正如[Mike Edenfield](https://stackoverflow.com/users/425736/mike-edenfield)所说，您可以启用`Multiple Check-Outs in the Team Project Settings`:并在框
`(project) -> Team Project Settings -> Source Control -> Checkout Settings`上切换。 但这还不够： 在中，对于您想要的每种文件类型，启用合并，否则 TFS 将在结帐时锁定文件。`"Allow Multiple Check-Outs"`

`(project) -> Team Project Collection Settings -> Source Control`

[![文件合并选项](../Images/185a1c35766744f9fecf3b199f3a1e78.png)](https://i.stack.imgur.com/YjyQk.png)

# titanium - 无法安装合金

> ID：15571696
> 
> 赞同：0
> 
> 时间：2013-03-22T13:34:14.230
> 
> 标签：titanium, appcelerator, titanium-alloy

我在尝试下载钛合金时遇到此错误。似乎代理错误，但我仔细检查了没有代理设置。我怎样才能通过它。npm 错误！错误：无法建立隧道套接字，原因=getaddrinfo ENOTFOUND。这是日志文件

```
 0 info it worked if it ends with ok
    1 verbose cli [ 'c:\\Program Files\\nodejs\\node.exe',
    1 verbose cli   'c:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js',
    1 verbose cli   'install',
    1 verbose cli   '-g',
    1 verbose cli   'alloy' ]
    2 info using npm@1.2.15
    3 info using node@v0.10.1
    4 verbose read json C:\Users\tarak\AppData\Roaming\npm\package.json
    5 verbose read json C:\Users\tarak\AppData\Roaming\npm\package.json
    6 verbose cache add [ 'alloy', null ]
    7 verbose cache add name=undefined spec="alloy" args=["alloy",null]
    8 verbose parsed url { protocol: null,
    8 verbose parsed url   slashes: null,
    8 verbose parsed url   auth: null,
    8 verbose parsed url   host: null,
    8 verbose parsed url   port: null,
    8 verbose parsed url   hostname: null,
    8 verbose parsed url   hash: null,
    8 verbose parsed url   search: null,
    8 verbose parsed url   query: null,
    8 verbose parsed url   pathname: 'alloy',
    8 verbose parsed url   path: 'alloy',
    8 verbose parsed url   href: 'alloy' }
    9 silly lockFile 8d809cba-alloy alloy
    10 verbose lock alloy C:\Users\tarak\AppData\Roaming\npm-cache\8d809cba-alloy.lock
    11 silly lockFile 8d809cba-alloy alloy
    12 silly lockFile 8d809cba-alloy alloy
    13 verbose addNamed [ 'alloy', '' ]
    14 verbose addNamed [ null, '' ]
    15 silly lockFile b2f8915b-alloy alloy@
    16 verbose lock alloy@ C:\Users\tarak\AppData\Roaming\npm-cache\b2f8915b-alloy.lock
    17 silly addNameRange { name: 'alloy', range: '', hasData: false }
    18 verbose url raw alloy
    19 verbose url resolving [ 'https://registry.npmjs.org/', './alloy' ]
    20 verbose url resolved https://registry.npmjs.org/alloy
    21 info trying registry request attempt 1 at 18:54:45
    22 http GET https://registry.npmjs.org/alloy
    23 info retry will retry, error on last attempt: Error: tunneling socket could not be established, cause=getaddrinfo ENOTFOUND
    24 info trying registry request attempt 2 at 18:55:03
    25 http GET https://registry.npmjs.org/alloy
    26 info retry will retry, error on last attempt: Error: tunneling socket could not be established, cause=getaddrinfo ENOTFOUND
    27 info trying registry request attempt 3 at 18:56:05
    28 http GET https://registry.npmjs.org/alloy
    29 silly lockFile b2f8915b-alloy alloy@
    30 silly lockFile b2f8915b-alloy alloy@
    31 error Error: tunneling socket could not be established, cause=getaddrinfo ENOTFOUND
    31 error     at ClientRequest.onError (c:\Program Files\nodejs\node_modules\npm\node_modules\request\tunnel.js:161:17)
    31 error     at ClientRequest.g (events.js:175:14)
    31 error     at ClientRequest.EventEmitter.emit (events.js:95:17)
    31 error     at CleartextStream.socketErrorListener (http.js:1500:9)
    31 error     at CleartextStream.EventEmitter.emit (events.js:95:17)
    31 error     at Socket.onerror (tls.js:1336:17)
    31 error     at Socket.EventEmitter.emit (events.js:117:20)
    31 error     at net.js:807:16
    31 error     at process._tickCallback (node.js:415:13)
    32 error If you need help, you may report this log at:
    32 error     <http://github.com/isaacs/npm/issues>
    32 error or email it to:
    32 error     <npm-@googlegroups.com>
    33 error System Windows_NT 6.1.7600
    34 error command "c:\\Program Files\\nodejs\\node.exe" "c:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "-g" "alloy"
    35 error cwd C:\Users\tarak
    36 error node -v v0.10.1
    37 error npm -v 1.2.15
    38 error code ECONNRESET
    39 verbose exit [ 1, true ] 
```

# asp.net-mvc - 作为构建过程的一部分的站点链接爬虫/检查器？

> ID：15571697
> 
> 赞同：0
> 
> 时间：2013-03-22T13:34:22.623
> 
> 标签：asp.net-mvc, msbuild, automated-tests, integration-testing

当我们构建我们的 MVC 应用程序时，我们有一个构建过程将站点推送到我们的 UAT 框。

发布后，我们希望运行一个自动化工具来抓取应用程序中的所有链接并检查损坏的链接和任何其他问题（例如可用性/可访问性等）

存在哪些工具可以抓取网站并生成报告，报告损坏的链接等？

它可以集成到我们的 CI (TFS) 构建中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:56:25.163

在没有任何替代建议的情况下，我们采用了以下解决方案：

[http://wummel.github.com/linkchecker/](http://wummel.github.com/linkchecker/)

它对我们很有效。该系统的主要优点之一是它具有带有许多选项的命令行模式，并且可以在一次爬网中生成多种格式的报告（HTML、Sitemap、CSV、XML）。我过去使用的其他工具必须运行多次，消耗更多的带宽和时间。

这样做的好处是我们可以将它添加到我们的构建过程中，然后自动化输出。当构建推送到 UAT 时，LinkChecker 运行。完成后，HTML 输出将通过电子邮件发送给我们并解析 XML 输出。所有 404 错误都作为 TFS 中的错误引发。

相当不错的解决方案。

# android - Android画布隐藏形状

> ID：15571698
> 
> 赞同：0
> 
> 时间：2013-03-22T13:34:27.473
> 
> 标签：android, canvas

我正在制作一个需要绘制一些矩形并使用它的`contains()`方法的小应用程序。我的问题是绘制一个隐藏的矩形。我正在尝试使用Paint's `setStyle(Paint.Style.STROKE),`then `setStrokeWidth(0)`。但中风仍然可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:47:30.740

将油漆颜色设置为透明色。试试下面

```
 Paint paint = new Paint();
    paint.setColor(0xFF);

            OR

    paint.setColor(Color.TRANSPARENT);

    canvas.drawRect(30, 30, 80, 80, paint); 
```

# c++ - g++ -M -MF 选项输出一个目标文件，如何输出

> ID：15571701
> 
> 赞同：1
> 
> 时间：2013-03-22T13:34:48.000
> 
> 标签：c++, qt, gcc, g++

我使用 g++ -M -MF 选项。但这会输出我项目中的一个目标文件。如何为我的项目中的所有 .o 文件获取此输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:45:43.010

我不知道 QTCreater，但 IDE 通常会在内部处理头文件依赖项。[如果您编写自己的 Makefile，](http://wiki.osdev.org/Makefile)您提到的 GCC 选项主要有用，它有自己的自动头依赖处理。

# php - PHP str_replace 只有来自中间的数据

> ID：15571702
> 
> 赞同：0
> 
> 时间：2013-03-22T13:34:55.750
> 
> 标签：php, str-replace

我在一个看起来像这样的变量中有一个 XML 块：

```
<DailySchedule ID="1363108332926" Name="Daily Backup" Hour="11" Minute="0" Duration="-1"     BackupType="FILE" LastUpdated="1363108332926" Interval="-1" EnableSkipBackup="N"/><DailySchedule ID="1363699291763" Name="Schedule3" Hour="21" Minute="0" Duration="-1" BackupType="FILE" LastUpdated="1363699291763" Interval="-1" EnableSkipBackup="N"/><WeeklySchedule ID="1363697754949" Name="Schedule0" Sun="N" Mon="Y" Tue="Y" Wed="N" Thu="N" Fri="N" Sat="N" Hour="21" Minute="0" Duration="-1" BackupType="FILE" LastUpdated="1363697754949" Interval="-1" EnableSkipBackup="N"/><MonthSchedule ID="1363698082481" Name="Schedule1" Occurrence="Last" Criteria="Weekday" Date="0" Hour="21" Minute="0" Duration="-1" BackupType="FILE" LastUpdated="1363698082481" EnableSkipBackup="N"/> 
```

根据计划的 ID，我需要从字符串中删除整个 XML 块。例如，如果我的 ID 为 1363697754949，我需要删除`<WeeklySchedule ID="1363697754949" Name="Schedule0" Sun="N" Mon="Y" Tue="Y" Wed="N" Thu="N" Fri="N" Sat="N" Hour="21" Minute="0" Duration="-1" BackupType="FILE" LastUpdated="1363697754949" Interval="-1" EnableSkipBackup="N"/>`

我已经尝试过`str_replace('1363697754949', '', $xmlString);`，但这只会删除实际数字。我需要删除整个 XML 标记。我可以使用某种通配符或其他模式来完成此操作吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:45:08.477

最好的解决方案是构建一个有效的 XML 文档并使用适当的库来操作它。可以使用更快的解决方案`preg_replace()`，如下所示：

```
preg_replace('/<([^>]+)ID="1363697754949"([^>]+)>/', '', $yourString); 
```

# linux - Bash 变量：是否区分大小写？

> ID：15571706
> 
> 赞同：41
> 
> 时间：2013-03-22T13:35:04.123
> 
> 标签：linux, bash, shell, case-sensitive, variable-names

bash shell 脚本是否区分大小写？

变量`date`是否相同`DATE`？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-22T13:36:40.563

是的，它是区分大小写的，就像 UNIX 的其他部分一样。是两个不同的变量`$date`。并且是两个不同的文件。并且是两个不同的标志（通常）。`$DATE``makefile``Makefile``-h``-H`

# arduino - 如何使用arduino Mega控制伺服电机的速度

> ID：15571707
> 
> 赞同：0
> 
> 时间：2013-03-22T13:35:06.503
> 
> 标签：arduino

我正在做一个需要改变伺服电机速度的项目。我使用的硬件是 Arduino Mega 2560 板，我使用 Servo.h 库来控制伺服系统。伺服从 o 旋转到 180 度。我在项目中使用了 12 个伺服电机，并且必须同时控制它们。有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:40:29.773

您可以`delay()`在 while 或 for 循环中使用函数

例子：

```
Servo s;
s.attach(9);
for(int i=0 ; i<180 ; i++)
{
    s.write(i);
    delay(10); //10 milisecond
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T19:47:26.857

也许您可以在伺服电机之前在伺服电机的 VCC 引脚上串联一些电阻以降低电压；从而减慢它。但是，这将导致您的伺服系统保持“恒定”速度。

另一种方法是在伺服 VCC 连接之间放置一个晶体管，并在基本引脚上设置 PWM 以调节电流（以调节速度），但如果您之间不使用多路复用器，那么每个伺服将花费一个额外的引脚；并且可以使您的设计更复杂一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T23:38:33.513

**如果它们的度数相同，请尝试下面的代码。**

**在最顶部**（不在任何“{}”之间）**：**

```
#include <Servo.h> 
Servo S1;
Servo S2;
Servo S3;
Servo S4;
Servo S5;
Servo S6;
Servo S7;
Servo S8;
Servo S9;
Servo S10;
Servo S11;
Servo S12; 
```

**把这个放在** `Setup`**：**

```
S1.attach(1);
S2.attach(2);
S3.attach(3);
S4.attach(4);
S5.attach(5);
S6.attach(6);
S7.attach(7);
S8.attach(8);
S9.attach(9);
S10.attach(10);
S11.attach(11);
S12.attach(12); 
```

您需要更改密码。

**把它放在任何地方**（不在任何“{}”之间）**：**

```
void TurnServos(int toDegree){
  servosAt = S1.read;
  if(servosAt == toDegree){

  }
  if(servosAt > toDegree){
    while(S1.read > toDegree){
      int currentToDegree = S1.read - 1;
      S1.write(currentToDegree);
      S2.write(currentToDegree);
      S3.write(currentToDegree);
      S4.write(currentToDegree);
      S5.write(currentToDegree);
      S6.write(currentToDegree);
      S7.write(currentToDegree);
      S8.write(currentToDegree);
      S9.write(currentToDegree);
      S10.write(currentToDegree);
      S11.write(currentToDegree);
      S12.write(currentToDegree);
      delay(10);         //Adjust this to make it faster or slower.
    }
  }
  if(servosAt < toDegree){
    while(S1.read < toDegree){
      int currentToDegree = S1.read + 1;
      S1.write(currentToDegree);
      S2.write(currentToDegree);
      S3.write(currentToDegree);
      S4.write(currentToDegree);
      S5.write(currentToDegree);
      S6.write(currentToDegree);
      S7.write(currentToDegree);
      S8.write(currentToDegree);
      S9.write(currentToDegree);
      S10.write(currentToDegree);
      S11.write(currentToDegree);
      S12.write(currentToDegree);
      delay(10);         //Adjust this to make it faster or slower.
    }
  }
}
void ClearServos(){
  int startDegree = 90;   //Change this number to anything you want.
  S1.write(startDegree);
  S2.write(startDegree);
  S3.write(startDegree);
  S4.write(startDegree);
  S5.write(startDegree);
  S6.write(startDegree);
  S7.write(startDegree);
  S8.write(startDegree);
  S9.write(startDegree);
  S10.write(startDegree);
  S11.write(startDegree);
  S12.write(startDegree);
} 
```

* * *

**如何使用这个：** 在`setup` **你对舵机做任何事情之前，但在我告诉你安装的部分之后**，**`ClearServos();`**用来准备要使用的舵机。（这个可能不一定，但是我不知道你在`S1.read`不改变它的情况下使用会发生什么，如果舵机在不同的位置，它会解决问题。如果它不会引起问题，可以避免，但我如果可以的话，认为你应该使用它。）所有这些都会变成 90 度。（可以用 中的变量改变 90 度`startDegree`。`void ClearServos`）

要转动它们，请使用**`TurnServos(90);`**. 90 是您希望它转向的程度。

* * *

没有测试过这个，因为我没有 Mega 或 12 伺服系统。如果您发现任何错误，请发表评论，因为这是巨大的。我花了很多时间在这上面，所以我希望能帮上忙。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-12T08:44:47.723

delayMicroseconds(value) 最接近 90-null 是最慢的 360 伺服器，在我的延时摄影装置上，平移和托架，拍摄移动拍摄，及时与机械快门点击器（迷你标准伺服）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-22T13:49:32.930

在伺服库 WriteMicroseconds(...) 函数中设置伺服速度。

更多信息请[点击](http://arduino.cc/en/Reference/ServoWriteMicroseconds)

# python - 使用 pattern.db 时出错

> ID：15571711
> 
> 赞同：0
> 
> 时间：2013-03-22T13:35:24.960
> 
> 标签：python, database

我在 python 中使用 pattern-2.5 中的 pattern.db 模块来创建数据库，但是当我运行它时，会出现一条消息：

```
Traceback (most recent call last):
  File "cobadb.py", line 25, in <module>
    db = Database('my_stuff')
  File "/usr/local/lib/python2.7/dist-packages/pattern/db/__init__.py", line 381, in __init__
    _import_db(type)
  File "/usr/local/lib/python2.7/dist-packages/pattern/db/__init__.py", line 54, in _import_db
    import pysqlite2.dbapi2 as sqlite
ImportError: No module named pysqlite2.dbapi2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:37:48.310

从消息中可以清楚地看出，您需要安装`pysqlite2`.

# asp-classic - 参数对象定义不正确

> ID：15571712
> 
> 赞同：0
> 
> 时间：2013-03-22T13:35:28.183
> 
> 标签：asp-classic, vbscript

以下是我在经典 ASP 应用程序中的 VBScript 代码：

```
 Set newParam = command.CreateParameter(Name, ParamType, 1)
    newParam.Value = Value
    command.Parameters.Append(newParam)
    command.Parameters(Name) = Value 
```

'Append' 行总是中断并出现以下错误：

![在此处输入图像描述](../Images/81aabb17c0a468e188a22793301bc259.png)

该命令是否具有有效的活动连接或连接是否打开（连接到 Oracle 数据库）似乎没有区别。

'Name'、'ParamType' 和 'Value' 参数值是正确的。

什么不见​​了？或者可能是错的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:47:56.030

从`Append`指令中删除括号。在这种情况下，它们的含义是“按值传递参数”，而不是“参数列表”（请参阅[​​本文](http://blogs.msdn.com/b/ericlippert/archive/2003/09/15/52996.aspx)）。还要将值赋值放在参数赋值之后。

```
Set newParam = command.CreateParameter(Name, ParamType, 1)
command.Parameters.Append newParam
newParam.Value = Value 
```

您仍然收到`Append`指令错误吗？如果是这样，你的`Name`或`ParamType`论点有问题。

# c# - 自动调整字体大小以适合矩形

> ID：15571715
> 
> 赞同：10
> 
> 时间：2013-03-22T13:35:40.043
> 
> 标签：c#, .net, fonts

如何在 .NET 4.5 / C# 中创建具有自适应大小以适合指定矩形的字体？

我根据字符串长度调整大小，字符串越长，字体越小，但效果不佳，如果字符串太长，文本会变得非常小。这种方法的问题是，如果我改变矩形大小，所有的字体大小都不好了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-06-01T07:25:21.250

已经有一段时间了，但我遇到了这个问题。MSDN 提供了一个带有 GetAdjustedFont 方法的示例来帮助完成此过程：

*（无耻地从[https://msdn.microsoft.com/en-us/library/bb986765.aspx](https://msdn.microsoft.com/en-us/library/bb986765.aspx)窃取）*

```
public Font GetAdjustedFont(Graphics g, string graphicString, Font originalFont, int containerWidth, int maxFontSize, int minFontSize, bool smallestOnFail)
{
   Font testFont = null;
   // We utilize MeasureString which we get via a control instance           
   for (int adjustedSize = maxFontSize; adjustedSize >= minFontSize; adjustedSize--)
   {
      testFont = new Font(originalFont.Name, adjustedSize, originalFont.Style);

      // Test the string with the new size
      SizeF adjustedSizeNew = g.MeasureString(graphicString, testFont);

      if (containerWidth > Convert.ToInt32(adjustedSizeNew.Width))
      {
         // Good font, return it
         return testFont;
      }
   }

   // If you get here there was no fontsize that worked
   // return minimumSize or original?
   if (smallestOnFail)
   {
      return testFont;
   }
   else
   {
      return originalFont;
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T13:47:23.120

使用[Graphics.MeasureString](http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx)，您可以测量字符串的大小，从而计算出您需要的内容。

来自 MSDN 的示例

```
private void MeasureStringMin(PaintEventArgs e)
{

    // Set up string. 
    string measureString = "Measure String";
    Font stringFont = new Font("Arial", 16);

    // Measure string.
    SizeF stringSize = new SizeF();
    stringSize = e.Graphics.MeasureString(measureString, stringFont);

    // Draw rectangle representing size of string.
    e.Graphics.DrawRectangle(new Pen(Color.Red, 1), 0.0F, 0.0F, stringSize.Width, stringSize.Height);

    // Draw string to screen.
    e.Graphics.DrawString(measureString, stringFont, Brushes.Black, new PointF(0, 0));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-29T10:58:40.087

您可以使用任何字体大小（例如 16）测量字符串宽度，然后您可以像这样计算所需的字体大小：

```
fontSize = (previouslyMeasuredFontSize * targetWidthOfString) / previouslyMeasuredStringWidth; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-29T13:19:37.370

我也需要类似的东西。我创建了一些代码来满足在具有多个自动字体大小选项的已定义矩形内绘制文本的需求（请参阅 DrawMethod 枚举）。它还支持带和不带自动字体大小的自动变形。我的解决方案受到上述答案的启发。请务必添加 WindowsBase 和 PresentationCore 程序集。

**DrawTextToBitmap.cs**

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Text;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ReportPrepare
{
    class TextDrawing
    {
        public enum DrawMethod
        {
            AutosizeAccordingToText, // create the smallest bitmap needed to draw the text without word warp
            AutoFitInConstantRectangleWithoutWarp, // draw text with the biggest font possible while not exceeding rectangle dimensions, without word warp
            AutoWarpInConstantRectangle, // draw text in rectangle while performing word warp. font size is a constant input. drawing may exceed bitmap rectangle.
            AutoFitInConstantRectangleWithWarp // draw text with the biggest font possible while not exceeding rectangle dimensions, with word warp
        }

        private static void SetGraphicsHighQualityForTextRendering(Graphics g)
        {
            // The smoothing mode specifies whether lines, curves, and the edges of filled areas use smoothing (also called antialiasing). One exception is that path gradient brushes do not obey the smoothing mode. Areas filled using a PathGradientBrush are rendered the same way (aliased) regardless of the SmoothingMode property.
            g.SmoothingMode = SmoothingMode.AntiAlias;

            // The interpolation mode determines how intermediate values between two endpoints are calculated.
            g.InterpolationMode = InterpolationMode.HighQualityBicubic;

            // Use this property to specify either higher quality, slower rendering, or lower quality, faster rendering of the contents of this Graphics object.
            g.PixelOffsetMode = PixelOffsetMode.HighQuality;

            // This one is important
            g.TextRenderingHint = TextRenderingHint.AntiAliasGridFit;
        }

        public static Size MeasureDrawTextBitmapSize(string text, Font font)
        {
            Bitmap bmp = new Bitmap(1, 1);
            using (Graphics g = Graphics.FromImage(bmp))
            {
                SizeF size = g.MeasureString(text, font);
                return new Size((int)(Math.Ceiling(size.Width)), (int)(Math.Ceiling(size.Height)));
            }

        }

        public static int GetMaximumFontSizeFitInRectangle(string text, Font font, RectangleF rectanglef, bool isWarp, int MinumumFontSize=6, int MaximumFontSize=1000)
        {
            Font newFont;
            Rectangle rect = Rectangle.Ceiling(rectanglef);

            for (int newFontSize = MinumumFontSize; ; newFontSize++)
            {
                newFont = new Font(font.FontFamily, newFontSize, font.Style);

                List<string> ls = WarpText(text, newFont, rect.Width);

                StringBuilder sb = new StringBuilder();
                if (isWarp)
                {
                    for (int i = 0; i < ls.Count; ++i)
                    {
                        sb.Append(ls[i] + Environment.NewLine);
                    }
                }
                else
                {
                    sb.Append(text);
                }

                Size size = MeasureDrawTextBitmapSize(sb.ToString(), newFont);
                if (size.Width > rectanglef.Width || size.Height > rectanglef.Height)
                {
                    return (newFontSize - 1);
                }
                if (newFontSize >= MaximumFontSize)
                {
                    return (newFontSize - 1);
                }

            }

        }

        public static List<string> WarpText(string text, Font font, int lineWidthInPixels)
        {
            string[] originalLines = text.Split(new string[] { " " }, StringSplitOptions.None);

            List<string> wrappedLines = new List<string>();

            StringBuilder actualLine = new StringBuilder();
            double actualWidthInPixels = 0;

            foreach (string str in originalLines)
            {
                Size size = MeasureDrawTextBitmapSize(str, font);

                actualLine.Append(str + " ");
                actualWidthInPixels += size.Width;

                if (actualWidthInPixels > lineWidthInPixels)
                {
                    actualLine =  actualLine.Remove(actualLine.ToString().Length - str.Length - 1, str.Length);
                    wrappedLines.Add(actualLine.ToString());
                    actualLine.Clear();
                    actualLine.Append(str + " ");
                    actualWidthInPixels = size.Width;
                }
            }

            if (actualLine.Length > 0)
            {
                wrappedLines.Add(actualLine.ToString());
            }

            return wrappedLines;
        }

        public static Bitmap DrawTextToBitmap(string text, Font font, Color color, DrawMethod mode, RectangleF rectanglef)
        {
            StringFormat drawFormat = new StringFormat();
            Bitmap bmp;
            switch (mode)
            {
                case DrawMethod.AutosizeAccordingToText:
                    {
                        Size size = MeasureDrawTextBitmapSize(text, font);

                        if (size.Width == 0 || size.Height == 0)
                        {
                            bmp = new Bitmap(1, 1);
                        }
                        else
                        {
                            bmp = new Bitmap(size.Width, size.Height);
                        }

                        using (Graphics g = Graphics.FromImage(bmp))
                        {
                            SetGraphicsHighQualityForTextRendering(g);

                            g.DrawString(text, font, new SolidBrush(color), 0, 0);

                            return bmp;
                        }

                    }
                case DrawMethod.AutoWarpInConstantRectangle:
                    {
                        Rectangle rect =  Rectangle.Ceiling(rectanglef);
                        bmp = new Bitmap(rect.Width,rect.Height);

                        if (rect.Width == 0 || rect.Height == 0)
                        {
                            bmp = new Bitmap(1, 1);
                        }
                        else
                        {
                            bmp = new Bitmap(rect.Width, rect.Height);
                        }

                        using (Graphics g = Graphics.FromImage(bmp))
                        {
                            SetGraphicsHighQualityForTextRendering(g);

                            g.DrawString(text, font, new SolidBrush(color), rectanglef, drawFormat);

                            return bmp;
                        }

                    }
                case DrawMethod.AutoFitInConstantRectangleWithoutWarp:
                    {
                        Rectangle rect = Rectangle.Ceiling(rectanglef);

                        bmp = new Bitmap(rect.Width, rect.Height);

                        if (rect.Width == 0 || rect.Height == 0)
                        {
                            bmp = new Bitmap(1, 1);
                        }
                        else
                        {
                            bmp = new Bitmap(rect.Width, rect.Height);
                        }

                        using (Graphics g = Graphics.FromImage(bmp))
                        {
                            int fontSize = GetMaximumFontSizeFitInRectangle(text, font, rectanglef, false);

                            SetGraphicsHighQualityForTextRendering(g);

                            g.DrawString(text, new Font(font.FontFamily, fontSize,font.Style, GraphicsUnit.Point), new SolidBrush(color), rectanglef, drawFormat);

                            return bmp;
                        }

                    }
                case DrawMethod.AutoFitInConstantRectangleWithWarp:
                    {
                        Rectangle rect = Rectangle.Ceiling(rectanglef);

                        if (rect.Width == 0 || rect.Height == 0)
                        {
                            bmp = new Bitmap(1, 1);
                        }
                        else
                        {
                            bmp = new Bitmap(rect.Width, rect.Height);
                        }

                        using (Graphics g = Graphics.FromImage(bmp))
                        {
                            int fontSize = GetMaximumFontSizeFitInRectangle(text, font, rectanglef, true);

                            SetGraphicsHighQualityForTextRendering(g);

                            g.DrawString(text, new Font(font.FontFamily, fontSize, font.Style, GraphicsUnit.Point), new SolidBrush(color), rectanglef, drawFormat);

                            return bmp;
                        }

                    }
            }
            return null;

        }

    }
} 
```

**使用示例：Form1.cs**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Globalization;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

// add WindowsBase and PresentationCore assemblies

namespace ReportPrepare
{
    public partial class Form1 : Form
    {
        PictureBox picbox = new PictureBox();
        int i = 0;
        Timer t = new Timer();

        public Form1()
        {
            InitializeComponent();

            this.Controls.Add(picbox);
            picbox.Dock = DockStyle.Fill;

            t.Interval = 5000;
            t.Tick += t_Tick;
            t.Enabled = true;

            this.Shown += Form1_Shown;
            this.SizeChanged += Form1_SizeChanged;

            this.Size = new Size(812, 400);

            this.StartPosition = FormStartPosition.CenterScreen;

        }

        void Form1_Shown(object sender, EventArgs e)
        {
            DrawText();
        }

        void t_Tick(object sender, EventArgs e)
        {
            i++;
            if (i > 3)
            {
                i = 0;
            }
            DrawText();
        }

        private void DrawText()
        {

            // text and font
            string text = "one two three four five six seven eight nine ten eleven twelve";

            Font font = new System.Drawing.Font("Arial", 30, FontStyle.Regular, GraphicsUnit.Point);

            switch (i)
            {
                case 0:
                    picbox.Image = TextDrawing.DrawTextToBitmap(text, font, Color.Red, TextDrawing.DrawMethod.AutosizeAccordingToText, new RectangleF(0, 0, picbox.Width, picbox.Height));
                    break;
                case 1:
                    picbox.Image = TextDrawing.DrawTextToBitmap(text, font, Color.Red, TextDrawing.DrawMethod.AutoFitInConstantRectangleWithoutWarp, new RectangleF(0, 0, picbox.Width, picbox.Height));
                    break;
                case 2:
                    picbox.Image = TextDrawing.DrawTextToBitmap(text, font, Color.Red, TextDrawing.DrawMethod.AutoWarpInConstantRectangle, new RectangleF(0, 0, picbox.Width, picbox.Height));
                    break;
                case 3:
                    picbox.Image = TextDrawing.DrawTextToBitmap(text, font, Color.Red, TextDrawing.DrawMethod.AutoFitInConstantRectangleWithWarp, new RectangleF(0, 0, picbox.Width, picbox.Height));
                    break;
            }
            this.Text = ((TextDrawing.DrawMethod)(i)).ToString() + "                      Please resize window size by mouse to see drawing methods differences";

        }

        private void Form1_SizeChanged(object sender, EventArgs e)
        {
            t.Enabled = false;
            t.Enabled = true;
            DrawText();
        }

    }
} 
```

该示例每 5 秒自动在绘图模式之间切换一次。图片框停靠在主窗体内。调整表单大小向用户展示了绘图模式之间的差异。

# hibernate - 将列值映射到类层次结构中的对象实例

> ID：15571716
> 
> 赞同：0
> 
> 时间：2013-03-22T13:35:43.137
> 
> 标签：hibernate, nhibernate

让我们想象一下这个类结构：

```
abstract class A {}

class B:A {}
class C:A {}
class D:A {}

class Entity
{
  A PropertyA { get; set; }
} 
```

**实体**用 nhibernate 映射，**PropertyA**被持久化。

我的问题是：是否可以将**PropertyA**存储在具有某种 id 的数据库列中？例如：

*   如果 PropertyA 是 B，那么在数据库中存储 property-b
*   如果 PropertyA 是 C，那么在数据库中存储 property-c
*   如果 PropertyA 为 D，则在数据库中存储 property-d

而且当我查询数据库并创建实体时，我希望将 PropertyA 初始化为 B/C/D，具体取决于数据库列中的值。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:38:05.840

显然答案是**nHibernate 中的自定义类型**：

[http://blog.miraclespain.com/archive/2008/Mar-18.html](http://blog.miraclespain.com/archive/2008/Mar-18.html)

# wpf - 在 TileBrush 中绑定标签？

> ID：15571718
> 
> 赞同：1
> 
> 时间：2013-03-22T13:35:50.080
> 
> 标签：wpf, xaml, binding, user-controls, visualbrush

我正在研究时间轴控件，到目前为止我有： ![在此处输入图像描述](../Images/36bdd8543bf508fc10722da6db4c3477.png)

我需要将'00:00'标记绑定到它们的实际值应该是什么。第一个，如图所示，应该是 '00:01' 下一个蓝线应该是 '00:02'

我知道我的设计可能需要改进，但我需要看看我走的路是否正确。我不认为我目前走在正确的道路上。我不认为使用`VisualBrush`平铺模式是我时间轴中秒线的正确解决方案。

我的这个 Timeline 控件的代码被分成两部分`UserControls`，我使用`TileBush`'es 来重绘 Timeline。

控制 1：

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
x:Class="WpfApplication1.UserControl1"
x:Name="UserControl" HorizontalAlignment="Center" VerticalAlignment="Top" UseLayoutRounding="True">

<Grid x:Name="LayoutRoot" HorizontalAlignment="Center" Width="431" ClipToBounds="True" SnapsToDevicePixels="False" UseLayoutRounding="True">
    <Grid Height="30" SnapsToDevicePixels="True" Margin="-35,0,0,0">
        <Grid SnapsToDevicePixels="False">
            <Grid.Background>
                <VisualBrush TileMode="Tile" Viewport="0,0,5,30" ViewportUnits="Absolute" Viewbox="0,0,5,30" ViewboxUnits="Absolute">
                    <VisualBrush.Visual>
                        <Line Stroke="Coral" StrokeThickness="2" X1="0" X2="0" Y1="25" Y2="30" UseLayoutRounding="True" />
                    </VisualBrush.Visual>
                </VisualBrush>
            </Grid.Background>
        </Grid>
        <Grid Margin="50,0,0,0" SnapsToDevicePixels="False" UseLayoutRounding="True">
            <Grid.Background>
                <VisualBrush TileMode="Tile" Viewport="0,0,50,30" ViewportUnits="Absolute" Viewbox="0,0,50,30" ViewboxUnits="Absolute">
                    <VisualBrush.Visual>
                        <Line Stroke="Red" StrokeThickness="2" X1="0" X2="0" Y1="20" Y2="30" UseLayoutRounding="True" />
                    </VisualBrush.Visual>
                </VisualBrush>
            </Grid.Background>
        </Grid>

        <Grid SnapsToDevicePixels="False" Height="30" UseLayoutRounding="True" >
            <Grid.Background>
                <VisualBrush TileMode="Tile" Viewport="0,0,500,30" ViewportUnits="Absolute" Viewbox="0,0,500,30" ViewboxUnits="Absolute">
                    <VisualBrush.Visual>
                        <Grid HorizontalAlignment="Left" Width="500" UseLayoutRounding="True">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="21*"/>
                                <ColumnDefinition Width="25*"/>
                                <ColumnDefinition Width="25*"/>
                                <ColumnDefinition Width="25*"/>
                                <ColumnDefinition Width="25*"/>
                                <ColumnDefinition Width="25*"/>
                                <ColumnDefinition Width="25*"/>
                                <ColumnDefinition Width="25*"/>
                                <ColumnDefinition Width="25*"/>
                                <ColumnDefinition Width="20*"/>
                                <ColumnDefinition Width="9*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="15"/>
                                <RowDefinition Height="1*"/>
                            </Grid.RowDefinitions>
                            <Label Grid.Row="0" FontFamily="Tahoma" FontSize="8" Padding="0" VerticalAlignment="Bottom" Grid.Column="1" Height="9" Content=".100" Foreground="White"/>
                            <Label Grid.Row="0" FontFamily="Tahoma" FontSize="8" Padding="0" VerticalAlignment="Bottom" Grid.Column="2" Height="9" Content=".200" Foreground="White"/>
                            <Label Grid.Row="0" FontFamily="Tahoma" FontSize="8" Padding="0" VerticalAlignment="Bottom" Grid.Column="3" Height="9" Content=".300" Foreground="White"/>
                            <Label Grid.Row="0" FontFamily="Tahoma" FontSize="8" Padding="0" VerticalAlignment="Bottom" Grid.Column="4" Height="9" Content=".400" Foreground="White"/>
                            <Label Grid.Row="0" FontFamily="Tahoma" FontSize="8" Padding="0" VerticalAlignment="Bottom" Grid.Column="5" Height="9" Content=".500" Foreground="White"/>
                            <Label Grid.Row="0" FontFamily="Tahoma" FontSize="8" Padding="0" VerticalAlignment="Bottom" Grid.Column="6" Height="9" Content=".600" Foreground="White"/>
                            <Label Grid.Row="0" FontFamily="Tahoma" FontSize="8" Padding="0" VerticalAlignment="Bottom" Grid.Column="7" Height="9" Content=".700" Foreground="White"/>
                            <Label Grid.Row="0" FontFamily="Tahoma" FontSize="8" Padding="0" VerticalAlignment="Bottom" Grid.Column="8" Height="9" Content=".800" Foreground="White"/>
                            <Label Grid.Row="0" FontFamily="Tahoma" FontSize="8" Padding="0" VerticalAlignment="Bottom" Grid.Column="9" Height="9" Content=".900" Foreground="White"/>
                        </Grid>
                    </VisualBrush.Visual>
                </VisualBrush>
            </Grid.Background>
        </Grid>
    </Grid>
</Grid> 
```

控制 2：

```
<UserControl x:Class="WpfApplication1.UserControl2"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="clr-namespace:WpfApplication1"
         mc:Ignorable="d" d:DesignHeight="30" d:DesignWidth="1000">

<StackPanel x:Name="stackPanel" Orientation="Horizontal">
    <StackPanel.Background>
        <VisualBrush TileMode="Tile" Viewport="0,0,900,30" ViewportUnits="Absolute" Viewbox="0,0,900,30" ViewboxUnits="Absolute">
            <VisualBrush.Visual>
                <StackPanel Orientation="Horizontal">

                    <local:UserControl1 Width="430" UseLayoutRounding="True" />

                    <Grid VerticalAlignment="Top" Width="20" ClipToBounds="True" UseLayoutRounding="True">

                        <Grid Height="30">
                            <Grid.Background>
                                <VisualBrush TileMode="Tile" Viewport="0,0,5,30" ViewportUnits="Absolute" Viewbox="0,0,5,30" ViewboxUnits="Absolute">
                                    <VisualBrush.Visual>
                                        <Line Stroke="Coral" StrokeThickness="2" X1="0" X2="0" Y1="25" Y2="30" />
                                    </VisualBrush.Visual>
                                </VisualBrush>
                            </Grid.Background>
                        </Grid>

                            <Grid Height="30" Margin="0,0,0,0" SnapsToDevicePixels="False" >
                                <Grid.Background>
                                    <VisualBrush TileMode="Tile" Viewport="0,0,40,30" ViewportUnits="Absolute" Viewbox="0,0,40,30" ViewboxUnits="Absolute">
                                        <VisualBrush.Visual>
                                            <Grid VerticalAlignment="Top">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="15"/>
                                                    <RowDefinition Height="1*"/>
                                                </Grid.RowDefinitions>
                                                <Label Content="00:00" FontFamily="Tahoma" FontSize="8" Padding="0" VerticalAlignment="Top" Grid.Row="0" Foreground="White" UseLayoutRounding="True"/>
                                            </Grid>
                                        </VisualBrush.Visual>
                                    </VisualBrush>
                                </Grid.Background>
                            </Grid>

                        <Grid Height="30" SnapsToDevicePixels="False" Margin="10,0,0,0" UseLayoutRounding="True" >
                            <Grid SnapsToDevicePixels="True" >
                                <Grid.Background>
                                    <VisualBrush TileMode="Tile" Viewport="0,0,40,30" ViewportUnits="Absolute" Viewbox="0,0,40,30" ViewboxUnits="Absolute">
                                        <VisualBrush.Visual>
                                            <Grid VerticalAlignment="Top">
                                                <Line Stroke="#FF071DFD" StrokeThickness="2" X1="0" X2="0" Y1="15" Y2="30" />
                                            </Grid>
                                        </VisualBrush.Visual>
                                    </VisualBrush>
                                </Grid.Background>
                            </Grid>
                        </Grid>

                    </Grid>

                    <local:UserControl1 Width="430"/>

                    <Grid VerticalAlignment="Top" Width="20" ClipToBounds="True" UseLayoutRounding="True">
                        <Grid Height="30">
                            <Grid.Background>
                                <VisualBrush TileMode="Tile" Viewport="0,0,5,30" ViewportUnits="Absolute" Viewbox="0,0,5,30" ViewboxUnits="Absolute">
                                    <VisualBrush.Visual>
                                        <Line Stroke="Coral" StrokeThickness="2" X1="0" X2="0" Y1="25" Y2="30" />
                                    </VisualBrush.Visual>
                                </VisualBrush>
                            </Grid.Background>
                        </Grid>

                        <Grid Height="30" Margin="0,0,0,0" SnapsToDevicePixels="False" >
                            <Grid SnapsToDevicePixels="True" >
                                <Grid.Background>
                                    <VisualBrush TileMode="Tile" Viewport="0,0,40,30" ViewportUnits="Absolute" Viewbox="0,0,40,30" ViewboxUnits="Absolute">
                                        <VisualBrush.Visual>
                                            <Grid VerticalAlignment="Top">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="15"/>
                                                    <RowDefinition Height="1*"/>
                                                </Grid.RowDefinitions>
                                                <Label Content="00:00" FontFamily="Tahoma" FontSize="8" Padding="0" VerticalAlignment="Top" Grid.Row="0" Foreground="White" UseLayoutRounding="True" />
                                            </Grid>
                                        </VisualBrush.Visual>
                                    </VisualBrush>
                                </Grid.Background>
                            </Grid>
                        </Grid>

                        <Grid Height="30" SnapsToDevicePixels="False" Margin="10,0,0,0" UseLayoutRounding="True" >
                            <Grid SnapsToDevicePixels="True" >
                                <Grid.Background>
                                    <VisualBrush TileMode="Tile" Viewport="0,0,40,30" ViewportUnits="Absolute" Viewbox="0,0,40,30" ViewboxUnits="Absolute">
                                        <VisualBrush.Visual>
                                            <Grid VerticalAlignment="Top">
                                                <Line Stroke="#FF071DFD" StrokeThickness="2" X1="0" X2="0" Y1="15" Y2="30" />
                                            </Grid>
                                        </VisualBrush.Visual>
                                    </VisualBrush>
                                </Grid.Background>
                            </Grid>
                        </Grid>

                    </Grid>

                </StackPanel>
            </VisualBrush.Visual>
        </VisualBrush>
    </StackPanel.Background>
</StackPanel> 
```

在主窗口中：

```
 <ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Disabled" >
            <local:UserControl2 Width="3059"  />
        </ScrollViewer> 
```

# orm - Doctrine 2.1 通过唯一字段查找实体

> ID：15571720
> 
> 赞同：1
> 
> 时间：2013-03-22T13:35:51.887
> 
> 标签：orm, doctrine, unique

我想通过唯一的（在本例中为电子邮件）字段查找实体。

```
User
id (int, pk)
email (string, not null, unique)
password (string, not null) 
```

我知道有`findBy`存储库，但由于电子邮件字段是唯一的，我不想使用存储库，因为总是只有一个结果。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:37:20.463

它可以通过使用来完成`findOneBy`

# jquery - 在jQuery中从下到上动画div而不是从上到下

> ID：15571722
> 
> 赞同：4
> 
> 时间：2013-03-22T13:35:54.403
> 
> 标签：jquery, html, jquery-animate

在触发点击功能时，我有一个`div`动画：`height`

```
$('#menu').click(function() {
  $('#test').animate({
      height: 'toggle'
    }, 290, function() {    
  });
}); 
```

到目前为止效果很好。但我想`div`从下到上制作动画，不像在这个[小提琴](http://jsfiddle.net/uWnjx/)中看到的那样。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T13:42:02.517

您可以将它放在容器中并绝对定位吗？：

**HTML：**

```
<a href="#" id="menu">click me for menu</a>
    <div id="cont">
    <div id="test"></div>
</div> 
```

**CSS：**

```
#cont{
    height:500px; width:50px; position:relative;
}
#test{
    height: 500px; width: 50px; background-color: #000; display: none; position:absolute; bottom:0; left:0;
} 
```

**JavaScript：**

```
$('#menu').click(function() {
    $('#test').animate({
        height: 'toggle'
        }, 290, function() {
    });
}); 
```

[小提琴](http://jsfiddle.net/uWnjx/5/)

**编辑：为什么它起作用**
我在菜单周围放置了一个容器并赋予它 style `position:relative`。我假设的菜单 ( `#test`) 已经被赋予了样式，这`position:absolute`意味着您可以根据 、 和 相对于包含元素定位它`top`（`right`如果它具有非默认值，因此我们给容器一个位置）。如果我们给元素 a 元素的左上角会粘在它的父元素的左上角，类似地，如果我们这样做，这个元素的左下角会粘在它的父元素的左下角。*乱跑，不是吗？*所以，总结一下，`bottom``left``position``relative``top:0;left:0``top:0;bottom:0`*`#test`被“卡”在其父级的底部，因此它从底部开始动画。另一个要点，容器高度很重要！因为我们给出`#test`了一个绝对位置，它不会将容器推到它的高度，所以我们设置高度以确保`#test`从容器顶部加载 500px。*

# c++ - 使用 boost.python 在 cygwin 中手动构建 python 扩展

> ID：15571726
> 
> 赞同：4
> 
> 时间：2013-03-22T13:35:58.193
> 
> 标签：c++, build, cygwin, boost-python, python-extensions

对不起，这样一个笼统的标题，但我不太确定我到底错过了什么或我做错了什么。我的目标是在 cygwin 下使用 boost.python 构建一个 python 扩展，并避免使用 boost.build 工具，即使用 make 而不是 bjam。后一种方式对我来说非常好，但现在我想这样做。我通过谷歌搜索和寻找类似的主题解决了许多问题，这帮助我找出了一些技巧并继续前进。然而在最后一步似乎有一些问题。我将尝试详细描述我的所有步骤，希望这篇文章将来对其他人有用，并更好地描述设置。

因为我不太确定 python 和 boost 的原始安装（来自各种 cygwin 存储库），所以我决定在我的主目录中从头开始安装它们，所以这就是我所做的：

1.  首先安装python。我将跳过这个细节，它或多或少是直截了当的。对于后面的描述重要的是路径：

    /home/Alexey_2/Soft/python2.6 - 这是 PYTHONPATH，也包含在 PATH 中

2.  致力于提升：

    a) 将 boost 源解压到

    ```
    /home/Alexey_2/Soft/boost_1_50_0   - this is BOOST_ROOT 
    ```

    b) 制作 bjam。首先进入目录：

    ```
    /home/Alexey_2/Soft/boost_1_50_0/tools/build/v2 
    ```

    接下来，调用 bootstrap.sh 这最终会在此目录中创建 b2 和 bjam 可执行文件。在 .bash_profile 中将此目录添加到 PATH，这样我们就可以调用 bjam。在这里和以后每次编辑 .bash_profile 之后，我都会重新启动 cygwin 以使更改生效

    c) 仍在

    ```
    /home/Alexey_2/Soft/boost_1_50_0/tools/build/v2 
    ```

    目录 - 编辑 user-config.jam，让 bjam 知道要使用哪个 python。所以就我而言，我只添加一行：

    ```
    using python : 2.6 : /home/Alexey_2/Soft/python2.6/bin/python2.6 : /home/Alexey_2/Soft/python2.6/include/python2.6 : /home/Alexey_2/Soft/python2.6/bin ; 
    ```

    在 lib-path （最后一个条目）中，我放 /home/Alexey_2/Soft/python2.6/bin 因为它包含 libpython2.6.dll

    d) 好的。现在我们可以制作 boost-python 库了。进入 BOOST_ROOT 目录并执行命令

    ```
    bjam --with-python toolset=gcc link=shared 
    ```

    这将创建必要的库（cygboost_python.dll 和 libboost_python.dll.a）并将它们放入

    ```
    /home/Alexey_2/Soft/boost_1_50_0/stage/lib 
    ```

3.  构建python扩展。

    这是我的简单测试程序（实际上是示例代码的一部分）

    ```
    // file xyz.cpp
    #include <boost/python.hpp>
    #include <iostream>
    #include <iomanip>
    using namespace std;
    using namespace boost::python;

    class Hello
    {
      std::string _msg;
    public:
      Hello(std::string msg){_msg = msg;}
      void set(std::string msg) { this->_msg = msg; }
      std::string greet() { return _msg; }
    };

    BOOST_PYTHON_MODULE(xyz)
    {
      class_<Hello>("Hello", init<std::string>())
        .def("greet", &Hello::greet)
        .def("set", &Hello::set)
      ;  
    } 
    ```

    这是Makefile：

    ```
    FLAGS= -fno-for-scope -O2 -fPIC
    CPP=c++

    # BOOST v 1.50.0
    p1=/home/Alexey_2/Soft/boost_1_50_0
    pl1=/home/Alexey_2/Soft/boost_1_50_0/stage/lib

    # PYTHON v 2.6
    p2=/home/Alexey_2/Soft/python2.6/include/python2.6
    pl2=/home/Alexey_2/Soft/python2.6/bin

    I=-I${p1} -I${p2}
    L=-L${pl1} -lboost_python -L${pl2} -lpython2.6

    all: xyz.so

    xyz.o: xyz.cpp 
        ${CPP} ${FLAGS} ${I} -c xyz.cpp

    xyz.so: xyz.o 
        ${CPP} ${FLAGS} -shared -o xyz.so xyz.o ${L}

    clean:
        rm *.o
        rm xyz.so 
    ```

一些评论：

1.  库路径已设置，我针对适当的库进行编译（查看更多：[用 win7-64bit 中的 mingw 用 boost.python 编译一些代码](https://stackoverflow.com/questions/14090683/compile-some-code-with-boost-python-by-mingw-in-win7-64bit)）。

2.  上面的链接解释了为什么配置 user-config.jam 很重要——我在步骤 1c 中做了。

3.  为了避免可能出现的问题（如上面的链接以及[无法将 boost.python 与 mingw 链接](https://stackoverflow.com/questions/5392962/cannot-link-boost-python-with-mingw)（尽管对于 mingw）），我使用静态喜欢的 boost.python 库

    ```
    link=shared 
    ```

    作为 bjam 的论据（见 1d）

4.  正如这里所解释的：[MinGW + Boost: undefined reference to `WSAStartup@8'](https://stackoverflow.com/questions/12472654/mingw-boost-undefined-reference-to-wsastartup8) 想要编译某些东西的库应该列在目标文件之后，这就是为什么我们有：

    ```
    ${CPP} ${FLAGS} -shared -o xyz.so xyz.o ${L} 
    ```

    并不是

    ```
    ${CPP} ${FLAGS} -shared ${L} -o xyz.so xyz.o 
    ```

这是我的 .bash_profile 的一部分（最终），我在其中定义了环境变量：

```
# Python
export PATH=/home/Alexey_2/Soft/python2.6/bin:$PATH
export PYTHONPATH=/home/Alexey_2/Soft/python2.6
export LD_LIBRARY_PATH=/home/Alexey_2/Soft/python2.6/lib:/home/Alexey_2/Soft/python2.6/bin:$LD_LIBRARY_PATH

# Boost
export BOOST_ROOT=/home/Alexey_2/Soft/boost_1_50_0
export LD_LIBRARY_PATH=/home/Alexey_2/Soft/boost_1_50_0/stage/lib:$LD_LIBRARY_PATH
export PATH=/home/Alexey_2/Soft/boost_1_50_0/stage/lib:$PATH

# bjam
export PATH=/home/Alexey_2/Soft/boost_1_50_0/tools/build/v2:$PATH 
```

最后，到问题。通过上述设置，我能够成功构建 python 扩展对象文件：

```
xyz.so 
```

但是，当我通过简单的脚本对其进行测试时：

```
# this is a test.py script
import xyz 
```

ImportError 来了：

```
$ python test.py
Traceback (most recent call last):
  File "test.py", line 1, in <module>
    import xyz
ImportError: No module named xyz 
```

已经注意到，出现此类问题的原因可能是使用了错误的 python 可执行文件，但事实并非如此：

```
$ which python
/home/Alexey_2/Soft/python2.6/bin/python 
```

预期的内容（注意 python 是从该目录到 python2.6 的符号链接）

这是我拥有的另一条有用的信息：

```
$ ldd xyz.so
    ntdll.dll => /cygdrive/c/Windows/SysWOW64/ntdll.dll (0x76fa0000)
    kernel32.dll => /cygdrive/c/Windows/syswow64/kernel32.dll (0x76430000)
    KERNELBASE.dll => /cygdrive/c/Windows/syswow64/KERNELBASE.dll (0x748e0000)
    cygboost_python.dll => /home/Alexey_2/Soft/boost_1_50_0/stage/lib/cygboost_python.dll (0x70cc0000)
    cygwin1.dll => /usr/bin/cygwin1.dll (0x61000000)
    cyggcc_s-1.dll => /usr/bin/cyggcc_s-1.dll (0x6ff90000)
    cygstdc++-6.dll => /usr/bin/cygstdc++-6.dll (0x6fa90000)
    libpython2.6.dll => /home/Alexey_2/Soft/python2.6/bin/libpython2.6.dll (0x67ec0000)
    ??? => ??? (0x410000) 
```

我想知道什么

```
??? => ??? (0x410000) 
```

可能意味着。可能这就是我所缺少的。但那是什么？非常感谢任何意见和建议（不仅是关于最后一个问题）。

**编辑：**

根据 (twsansbury) 的建议，使用 -vv 选项检查 python 模块搜索路径：

```
python -vv test.py 
```

给

```
# trying /home/Alexey_2/Programming/test/xyz.dll   
# trying /home/Alexey_2/Programming/test/xyzmodule.dll
# trying /home/Alexey_2/Programming/test/xyz.py
# trying /home/Alexey_2/Programming/test/xyz.pyc
...
# trying /home/Alexey_2/Soft/python2.6/lib/python2.6/site-packages/xyz.dll
# trying /home/Alexey_2/Soft/python2.6/lib/python2.6/site-packages/xyzmodule.dll
# trying /home/Alexey_2/Soft/python2.6/lib/python2.6/site-packages/xyz.py
# trying /home/Alexey_2/Soft/python2.6/lib/python2.6/site-packages/xyz.pyc
Traceback (most recent call last):
  File "test.py", line 1, in <module>
    import xyz
ImportError: No module named xyz 
```

第一个目录是我调用 python 来运行脚本的地方。主要结论是 cygwin python 正在寻找具有标准 Windows 扩展的模块（库） - dll（以及其他 3 种类型），而不是我最初从 cygwin 的 Linux 仿真风格所期望的 .so。因此，将上一个 Makefile 中的以下几行更改为：

```
all: xyz.dll

xyz.o: xyz.cpp 
        ${CPP} ${FLAGS} ${I} -c xyz.cpp

xyz.dll: xyz.o 
    ${CPP} ${FLAGS} -shared -o xyz.dll xyz.o ${L}

clean:
    rm *.o
    rm xyz.dll 
```

生成xyz.dll，可以成功加载：

```
python -vv test.py 
```

现在给出：

```
Python 2.6.8 (unknown, Mar 21 2013, 17:13:04)
[GCC 4.5.3] on cygwin
Type "help", "copyright", "credits" or "license" for more information.
# trying /home/Alexey_2/Programming/test/xyz.dll
dlopen("/home/Alexey_2/Programming/test/xyz.dll", 2);
import xyz # dynamically loaded from /home/Alexey_2/Programming/test/xyz.dll 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:54:12.903

这`ImportError`通常与 Boost.Python 无关。相反，它通常表明它`xyz`不在[Python Module Search Path](http://docs.python.org/2/tutorial/modules.html#the-module-search-path)中。

要对此进行调试，请考虑使用[`-vv`](http://docs.python.org/3.1/using/cmdline.html#cmdoption-trace-v)参数运行 python。这将导致 python 为尝试导入时检查的每个文件打印一条消息`xyz`。无论如何，构建过程看起来是正确的，因此问题可能是文件扩展名或模块不在搜索路径中的结果。

我不确定 Cygwin 将如何与 Python 的运行时加载行为进行交互。然而：

*   在[Windows](http://docs.python.org/2/extending/windows.html#a-cookbook-approach)上，python 扩展有一个`.pyd`扩展名。
*   在 Linux 上，python 扩展有一个`.so`扩展。

此外，验证`xyz`库是否位于以下位置之一：

*   包含`test.py`脚本的目录（或当前目录）。
*   [`PYTHONPATH`](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH)环境变量中列出的目录。
*   依赖于安装的默认目录。

如果显示的未解析库`ldd`导致错误，它通常会显示为`ImportError`带有指示未定义引用的消息。

# c# - 如何在运行时检索全景项目的名称？

> ID：15571728
> 
> 赞同：2
> 
> 时间：2013-03-22T13:36:01.607
> 
> 标签：c#, windows-phone-8, panorama-control

我正在以编程方式将项目添加到名为 PanoramaCC 的全景控件中。

```
//function to create the panorama items in our view
private void showPanorama(string panoramaName)
{
    //create the panorama item and define it
    PanoramaItem genItem = new PanoramaItem();
    genItem.Height = 265;
    genItem.Width = 440;
    genItem.Tap += new EventHandler<System.Windows.Input.GestureEventArgs>(PanoramaItem_Tap);
    genItem.Name = panoramaName;

    //create the stackpanel for the panoramaitem
    StackPanel genStack = new StackPanel();
    genStack.Orientation = System.Windows.Controls.Orientation.Horizontal;
    //margin to be done
    genStack.Margin = new Thickness(0, -20, 0, 20);

    //load the image
    Image genImg = new Image();
    genImg.Height = 220;
    genImg.Width = 400;
    genImg.Stretch = System.Windows.Media.Stretch.Fill;
    genImg.Margin = new Thickness(20, 5, 20, 5);

    string path = "Assets/AppGraphics/CreditCards/" + panoramaName.ToString() + "Front.png";
    Uri uriR = new Uri(path, UriKind.Relative);
    BitmapImage imgSource = new BitmapImage(uriR);
    genImg.Source = imgSource;

    //add image into stackpanel
    genStack.Children.Add(genImg);
    //add stackpanel to the panoramaitem
    genItem.Content = genStack;
    //add the panoramaitem to the panoramaview
    this.PanoramaCC.Items.Add(genItem);
} 
```

我遇到的问题是，在运行时我想检索`panoramaItem`我当前正在查看的名称并对其进行处理。我已经设法通过点击事件检索名称以进行导航，`string name = ((PanoramaItem)sender).Name;`但这是一个不同的场景。我想检索名称，然后删除具有相应名称的项目。按下一个按钮应该删除当前选择的`panoramaItem`，这是我想要实现的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:42:10.543

您可以使用[SelectedItem](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.panorama.selecteditem%28v=vs.105%29.aspx)属性获取当前的[PanoramaItem 。](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.controls.panoramaitem%28v=vs.105%29.aspx)您无需获取名称即可将其删除。

```
PanoramaItem currentItem = myPanorama.SelectedItem as PanoramaItem;
if(currentItem != null)
{
   //if you want the name for other reasons
   string name = currentItem.Name;

   //Items returns an ItemsCollection object
   myPanorama.Items.Remove(currentItem);       
} 
```

# c++ - 在不使用数学库的情况下找到以指数为浮点数的十进制数的幂

> ID：15571731
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:36:20.160
> 
> 标签：c++, math

```
 #include<iostream>
 #include<cmath>
 using namespace std;
 int main()
 {
double x,y,z;
cin>>x>>y;
z=exp(y*log(x));
cout<<z;
system("pause");
return 0;
} 
```

这是查找指数为浮点数的数字的幂的代码，即 2.3^2.3 如果我们使用对数和反对数，我们可以很容易地得到答案，但我的面试问题是在不使用 c++ 中的任何数学库的情况下找到幂。我用谷歌搜索了它，但无法理解谷歌的一些参考资料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:02:50.233

您可以随时实施`exp()`和`log()`自己。

并且更容易实际实现 2 ^x和 log [2]`exp()` x 的目的，并以与and相同的方式使用`log()`。

2 ^x = 2^(整数部分(x)+小数部分(x)) = 2整数部分( ^(x)) * 2^(小数部分(x))

2 ^(fractional_part(x))可以使用泰勒级数展开计算 -1 <= x <= +1。

然后乘以 2 ^(integer_part(x))相当于将浮点数的指数部分调整为 integer_part(x) 或者您确实可以将 2 提高到 integer_part(x) 的整数幂并乘以它。

同样，log [2] x = log [2] (x * 2 ^N ) - N

其中 N（整数，2 的幂）被选择为使得 0.5 <= x * 2 ^N <= 1（或者，在 1 和 2 之间）。

选择 N 后，我们可以再次使用泰勒级数展开计算 log [2] (x * 2 ^N )。

这就是全部，只是一点点数学。

**编辑**：也可以使用近似多项式而不是泰勒级数，它们更有效。感谢 Eric Postpischil 的提醒。但是您可能需要一个数学参考来查找或构建它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:58:04.513

[您可以对ln(x)](http://www.math.com/tables/expansion/log.htm)和[e^x](http://www.math.com/tables/expansion/exp.htm)使用泰勒级数展开：

```
ln(x) = 2 * sum[ ((x-1)/(x+1))^(2n-1) / (2n-1), n=1..inf ]
      = 2 [ (x-1)/(x+1) + (1/3)( (x-1)/(x+1) )^3 + (1/5)( (x-1)/(x+1) )^5 + (1/7) ( (x-1)/(x+1) )^7 + ... ] 
e^x = sum(  x^n / n!, n = 0 .. inf ) 
    = 1/1 + x/1 + x^2 / 2 + x^3 / 6 + ... 
```

您可以将积分幂实现为 for 循环并继续扩展以获得所需的近似值。然后插入你的价值观，以及 badda-bing，badda-boom。请注意，上述收敛区域是对于 ln(x) 的 x > 0 和对于 e^x 的所有值。

# c# - 控制用户对表数据的编辑，从 SQL Server 数据库中读取

> ID：15571732
> 
> 赞同：1
> 
> 时间：2013-03-22T13:36:29.937
> 
> 标签：c#, sql, sql-server, visual-c#-express-2010

目前我有一个 C# 应用程序，它正在从我的 SQL Server 数据库的表中读取数据。

这是为了最终用户的目的和管理，我希望他们能够编辑该数据并将其提交回数据库。

```
private void fillDataGrid()
{
   string connectionString = "Server=; Database=; User Id=; Password=;";
   DataTable Table = new DataTable("TestTable");

   using (SqlConnection _con = new SqlConnection(connectionString))
   {
       string queryStatement = "SELECT * FROM dbo.table ORDER BY id ASC";

       using (SqlCommand _cmd = new SqlCommand(queryStatement, _con))
       {
           SqlDataAdapter _dap = new SqlDataAdapter(_cmd);

           _con.Open();
           _dap.Fill(Table);
           _con.Close();
       }
   }

   dataGridView1.DataSource = Table;
} 
```

如何将通过应用程序所做的更改再次提交回服务器？

另外，假设我有一个名为 的列`Colour`，有没有办法可以为每一行指定可能的数据。IE 不允许用户键入“黄色”，而是将红色、黄色和蓝色作为“下拉”选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:54:34.937

要提交对数据库的更改，您必须首先指定适配器的 InsertCommand、UpdateCommand 和 DeleteCommand。

可能会有所帮助：

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter(v=vs.90).aspx)

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.insertcommand(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.insertcommand(v=vs.90).aspx)

[http://msdn.microsoft.com/en-us/library/ms254937(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms254937(v=vs.90).aspx)

此外，您可以使用 DataGridViewComboBoxColumn （请注意 Color 列中的空值，但它不能很好地处理空值）

```
// choose from existng:
var data = (from a in Table.AsEnumerable()
             select new ValueHolder
             {
                 Name = a.Field<string>("Colour")
             }).Distinct().OrderBy(p => p.Name).ToList(); 
// your own
var data = new List<ValueHolder>();
data.Add(new ValueHolder("Red"));
data.Add(new ValueHolder("Yellow"));
//..................

var column = new DataGridViewComboBoxColumn();      
column.DataSource = data; 
column.ValueMember = "Name"; 
column.DisplayMember = "Name"; 

dataGridView1.Columns.Add(column); 
```

//------------------------------------------------ ------------

```
class ValueHolder
{
  public string Name{get;set;}

   public ValueHolder(string name)
   {
     this.Name = name;
   }

  // this part may not be necessary without nulls:
  //public override bool Equals(object obj)
  //      {
  //          ValueHolder other = obj as ValueHolder;
  //          if (other.Name.Equals(this.Name)) return true;
  //          return false;
  //      }

  //      public override int GetHashCode()
  //      {
  //          return Name == null ? 0 : Name.GetHashCode();
  //      } 
} 
```

不过，它可能可以以更简单的方式完成。

# dojo - 需要道场散点图或气泡图示例

> ID：15571737
> 
> 赞同：1
> 
> 时间：2013-03-22T13:36:40.690
> 
> 标签：dojo

我在理解如何处理 dojo 中的散点图和气泡图时遇到了一些麻烦。有没有人有我可以查看的示例或好的文档来帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T09:45:36.877

与任何其他图表不同（线、条、区域，每个点需要两个输入，x 和 y）

**气泡图每点需要三个输入（x、y 和气泡大小）**

气泡图示例：

```
 require([
              "dojox/charting/Chart",
              "dojox/charting/themes/MiamiNice",
              "dojox/charting/plot2d/Bubble",
              "dojox/charting/plot2d/Markers",
              "dojox/charting/axis2d/Default",
              "dojo/domReady!"
            ],function(Chart,theme){
             var d1 = [];
             for (var i = 0; i <= 10; i += 1){
                d1.push({x: i, y: parseInt(Math.random() * 30), size: parseInt(Math.random() * 10)});
                 // or you can put "size:1" for simplicity
             }
             var chart = new Chart("container");
             chart.addPlot("default", {
                 type:"Bubble"
             });
             chart.addAxis("x");
             chart.addAxis("y", {vertical: true, fixLower: "major", fixUpper: "major"});

             // Add the series of data
             chart.addSeries("Demo", d1);
             chart.render();
            }); 
```

**散点图类似于任何其他点图，除了 x 轴值可以是浮点（或双精度）类型。**

散点图示例：

```
 require([
              "dojox/charting/Chart",
              "dojox/charting/themes/MiamiNice",
              "dojox/charting/plot2d/Scatter",
              "dojox/charting/plot2d/Markers",
              "dojox/charting/axis2d/Default",
              "dojo/domReady!"
            ],function(Chart,theme){
              var d1 = [];
              for (var i = 0; i <= 4; i += 0.1){
                  d1.push({x: i, y: parseInt(Math.random() * 30)});
              }
              var chart = new Chart("container");
              chart.addPlot("default", {
                 type:"Scatter"
              });
              chart.addAxis("x");
              chart.addAxis("y", {vertical: true, fixLower: "major", fixUpper: "major"});

              // Add the series of data
              chart.addSeries("Demo", d1);
              chart.render();
            }); 
```

希望这可以帮助 ... ..

# azure - Azure 保留网站的通配符 DNS A 记录

> ID：15571739
> 
> 赞同：4
> 
> 时间：2013-03-22T13:36:44.983
> 
> 标签：azure, dns, azure-web-app-service

我设置了通配符 A 记录，因此 *.mydomain.com 解析为我保留的 WAWS 的固定 IP 地址。我还为各种子域设置了一些测试 a 和 cname 记录。

[这里](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)的指南明确提到了通配符 a 记录：

> 一个记录
> 
> 使用 A 记录，您可以将域（例如 contoso.com 或 www.contoso.com）或通配符域（例如 *.contoso.com）映射到 Windows Azure 网站内部署的单个公共 IP 地址.
> 
> 与使用 CNAME 相比，此方法的主要优点是除了子域（例如 www.contoso.com）之外，您还可以映射根域（例如 contoso.com）和通配符域（例如 *.contoso.com）。

在 Azure 门户中，我可以添加在被接受之前经过验证的各种域。我可以添加根 mydomain.com 以及任何明确的 a 和 c 子域，例如 test.mydomain.com。导航到 mydomain.com、www.mydomain.com 和 test.mydomain.com 都可以正常工作，但如果我在没有明确设置的地方尝试 something.mydomain.com，我会得到 404。

something.mydomain.com 解析为正确的 IP，但不起作用。使用通配符记录时，我需要在 azure 中配置什么才能使其正常工作？

mydomain.com 已经存在，但似乎不允许任何子域

*.mydomain.com 不被接受

由于验证失败，即使明确尝试添加每个所需的子域（例如 something.mydomain.com）似乎也不起作用（除非我为每个子域创建单独的 DNS 记录，这违背了通配符的目的）。

我不知道如何进行。鉴于上面提到的 windowsazure.com 文章中提到了通配符域，似乎应该支持它们，但在同一篇文章中，有一条[评论](https://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/#comment-700346954)指出它们不受支持，我当然没有设法让它工作所以远的。

知道现在这是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:48:24.803

WAWS 目前不支持 Wilcard 域。目前正在开发中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T08:15:47.100

老实说，Azure 上的大多数文档都已过时，例如关于 CDN 的页面。你不能依赖所写的内容，这太糟糕了。

我想这个通配符问题自 3 月以来没有任何变化？

# jquery - 未捕获的类型错误：对象 [object Array] 没有方法“prependTo”

> ID：15571742
> 
> 赞同：0
> 
> 时间：2013-03-22T13:36:55.240
> 
> 标签：jquery, typeerror

我知道有很多这样的问题，但没有一个答案能解决我的问题。这是我尝试/验证但没有结果的事情。

另外，这里的页面有问题：[http](http://sandboxdewsly.com/author/tomclark/) ://sandboxdewsly.com/author/tomclark/ （您必须选择“画廊”，然后选择列出的一个画廊，当覆盖打开时，会发生错误。） - 画廊的第 142 行。 js

1.  验证页面上加载了 jQuery，并且只加载了一次。- 完毕
2.  验证 jQuery 在您的脚本之前加载。- 完成，页眉中的 jQuery，页脚中的脚本。
3.  尝试在无冲突模式下运行 - 产生其他问题

所有这一切的第 22 个问题是它在我的主页上运行没有任何问题。所以这只是问题的这个实例。

有人对这个虚幻的问题有什么建议吗？我在这个问题上花了几个小时没有结果......感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:03:35.583

这是因为出现错误的页面不包含`<script>`您`id="img-wrapper-tmpl"`要查找的内容，但它确实存在于正常工作的页面上。

jQuery 在未找到时返回一个空的类似数组的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:41:48.657

您的违规行：

```
$('#img-wrapper-tmpl').tmpl( {itemsCount : itemsCount} ).prependTo( $rgGallery ); 
```

听起来您正在返回一个非 jQuery 对象并尝试对其执行操作。

我建议在有问题的对象上执行 console.log() 以找出`what`您正在返回的确切位置。然后从那里走。

# database - 搜索子表单

> ID：15571746
> 
> 赞同：0
> 
> 时间：2013-03-22T13:37:13.430
> 
> 标签：database, ms-access, search, subform

我们建立了一个数据库，其中包含一个主要的客户详细信息表单——其中有几个与客户访问的服务相关的子表单。我们无法搜索子表单字段的整体，因为它只是搜索单个客户的记录，因为链接。

最好的搜索方式是什么？我在想也许在总机上有一个搜索选项，单击该选项允许用户选择一个表单，然后自行打开该表单。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:55:15.547

我经常在我的许多表单中添加“子表单过滤器”。它通常是一个按钮，会弹出一个对话框，其中包含“要搜索的字段”下拉菜单和一个用于搜索字符串的文本框。假设您有一个父表 [Student] 和一个相关的子表 [Awards]：

[StudentID] 数字（长整数）
[AwardName] 文本（255）

主要的学生表格可以有一个子表格，显示学生获得的奖项。如果您想过滤学生记录以显示“数学奖”的收件人，那么应用于 [Students] 表的过滤器将是

```
[StudentID] IN (SELECT [StudentID] FROM [Awards] WHERE [AwardName]="Math Prize") 
```

对于子字符串搜索，要查找“本周运动员”、“年度女运动员”等的所有收件人，您可以构造一个过滤字符串，如

```
[StudentID] IN (SELECT [StudentID] FROM [Awards] WHERE [AwardName] LIKE "*athlete*") 
```

# linux - 在 Unix 中分离 awk 输入

> ID：15571747
> 
> 赞同：1
> 
> 时间：2013-03-22T13:37:15.273
> 
> 标签：linux, unix, awk, nawk

我正在尝试编写一个 Awk 程序，它需要两个由 / 分隔的日期，例如 2013 年 3 月 22 日，并将它们分成三个单独的数字，以便我可以分别使用 3、22 和 2013。

我希望程序被称为

```
awk -f program_file 2/23/2013 4/15/2013 
```

到目前为止，我有：

```
BEGIN {
d1 = ARGV[1]
d2 = ARGV[2]
} 
```

这将接受两个日期，但我不知道如何分解它们。另外，上面的程序必须用 nawk 调用，用 awk 表示它无法打开 2/23/2013。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:52:35.787

你不能以你的方式去做。因为 awk 认为您有两个文件作为输入。也就是说，您的日期字符串被视为文件名。这就是您收到该错误消息的原因。

如果这两个日期存储在 shell 变量中，您可以：

```
awk -vd1="$d1" -vd2="$d2" BEGIN{split(d1,one,"/");split(d2,two,"/");...}{...}' 
```

该`...`部分是您的逻辑，在上面的行中，拆分的部分存储在数组`one`和`two`. 例如，您只想打印以下元素`one`：

```
kent$  d1=2/23/2013
kent$  d2=4/15/2013
kent$  awk -vd1="$d1" -vd2="$d2"  'BEGIN{split(d1,one,"/");split(d2,two,"/"); for(x in one)print one[x]}'
2
23
2013 
```

或其他建议，您可以使用`FS`awk，但您必须这样做：

```
kent$  echo $d1|awk -F/ '{print $1,$2,$3}'         
2 23 2013 
```

如果您短时间传递两个变量，`-F/`则将不起作用，除非它们（两个日期）在不同的行中

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:45:16.407

如果您使用的是带有 nawk 和 awk 的机器，那么您有可能在 Solaris 上并使用 /bin/awk 或 /usr/bin/awk，它们都是旧的、损坏的 awk，永远不能使用。在 Solaris 上使用 /usr/xpg4/bin/awk 代替。

无论如何，对于你的问题：

```
$ cat program_file
BEGIN {
   d1 = ARGV[1]
   d2 = ARGV[2]

   split(d1,array,/\//)
   print array[1]
   print array[2]
   print array[3]

   exit
}

$ awk -f program_file 2/23/2013 4/15/2013
2
23
2013 
```

不过可能有更好的方法。如果您需要帮助，请发布有关您尝试做什么的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:46:32.583

这个怎么样？

```
[root@01 opt]# echo 2/23/2013 | awk -F[/] '{print $1}'
2
[root@01 opt]# echo 2/23/2013 | awk -F[/] '{print $2}'
23
[root@01 opt]# echo 2/23/2013 | awk -F[/] '{print $3}'
2013 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:43:43.857

您可以决定将其`/`用作字段分隔符，并传递`-F /`给 GNU `awk`（或传递给`nawk`）

# android - LibGDX 读取 XML 文件

> ID：15571752
> 
> 赞同：4
> 
> 时间：2013-03-22T13:37:35.447
> 
> 标签：android, xml, libgdx, xmlreader

我有这个 XML 文件：

```
<pack name="Cappellino" num_monete_livello="1100">
  <level number="1" status="nolocked" />
  <level number="2" status="locked" />
  <level number="3" status="locked"/>
</pack>
<pack name="Canottiera">
  <level number="4" status="locked"/>
  <level number="5" status="locked"/>
  <level number="6" status="locked"/>
  <level number="7" status="locked"/>
</pack>
<pack name="Tuta">
  <level number="8" status="locked"/>
  <level number="9" status="locked"/>
  <level number="10" status="locked"/>
 </pack> 
```

为了阅读这个文件，我使用这个代码：

```
XmlReader xml = new XmlReader();
XmlReader.Element xml_element = xml.parse(ProgressFileHandle);
Iterator iterator_level = xml_element.getChildrenByName("level").iterator();
while(iterator_level.hasNext()){
     XmlReader.Element level_element = (XmlReader.Element)iterator_level.next();
     String level_number = level_element.getAttribute("number");
     String level_status = level_element.getAttribute("status");
 } 
```

问题是代码只返回了最后一个包，实际上该行`XmlReader.Element xml_element = xml.parse(ProgressFileHandle);`只返回了这个：

```
<pack name="Tuta">
    <level number="8" status="noeggs"/>
    <level number="9" status="locked"/>
    <level number="10" status="locked"/>
</pack> 
```

你知道为什么吗？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T07:20:51.347

您的 xml 存在结构问题。每个 xml 文件必须只有 1 个根元素。这就是 xml 阅读器只读取第一个元素的原因。您可以将您的 xml 内容放在根元素中。

# java - 当我在 EDT 外的线程上调用我的打印方法时没有任何反应？

> ID：15571755
> 
> 赞同：1
> 
> 时间：2013-03-22T13:37:45.770
> 
> 标签：java, multithreading, swing

我有一个`method`做一些打印的任务，我希望任务在另一个线程（而不是 EDT）上运行，因为它可能正在创建一个大文件，我不希望长时间的过程冻结 GUI。执行在 EDT 上完美运行（当然 GUI 冻结 - 这是不希望的），但是当在不同的线程上调用时，它只是不执行。
方法来了；

```
 buildReceipt(itemList, method); 
```

在哪里;

*   `itemList`是一个用于填充收据的 ArrayList，并且
*   `method`是一种`enum`类型，用于确定是将输出设为 .pdf 文件还是将其直接发送到打印机

`doInBackground()`上面的代码在 EDT 上执行时可以很好地生成文档，但是当我尝试使用of 方法使其成为后台任务时`SwingWorker`，它根本没有做任何事情；然后我很好奇并尝试了以下方法；

```
Thread thread = new Thread(new Runnable(){
    @Override
    public void run()
    {
        buildReceipt(itemList, method);
    }
});
thread.start(); 
```

仍然没有发生任何事情............更有趣和令人困惑的是我什至尝试过`SwingUtilities.InvokeLater`& `SwingUtilities.InvokeAndWait`（根据文档在 EDT 上运行）但仍然无济于事。

我已经尽可能多地搜索了与 Stack Overflow 相关的问题，但没有一个能解决我的奇怪问题。我真的需要这方面的帮助。从昨天开始就卡住了？！？！？！

## 编辑：

回应让·瓦盖蒂；这里简要介绍一下里面发生的事情`buildReceipt`

```
private boolean buildReceipt(ArrayList<Sales> itemList, PrintMethod method)
{
    boolean built = false;
    if(!itemList.isEmpty())
    {
        InvoiceDesign design = new InvoiceDesign(itemList);
        try 
        {
            JasperReportBuilder report = design.build();

            if(method.equals(PrintMethod.PDF))
            {
                appManager.connectToDB();
                File fileDir = appManager.getReceiptsDir();
                appManager.disconnectDB();
                FileOutputStream fos = new FileOutputStream(fileDir);
                report.toPdf(fos);
                fos.close();
                built = true;
            }
            else if(method.equals(PrintMethod.PRINTER))
            {
                report.print(true);
                built = true;
            }
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }
        catch (DRException e) 
        {
            e.printStackTrace();
        }
    }
    return built;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:43:13.103

所以基本上你的项目列表是空的，因此它永远不会在该方法中执行 IF 条件中的代码。

# ios - 如何在 Objective-C 中以编程方式获取本地域的名称知道 ip 地址？

> ID：15571767
> 
> 赞同：1
> 
> 时间：2013-03-22T13:38:22.217
> 
> 标签：ios, cocoa-touch

嗨，在 2 个不同的本地网络中有很多 iPad，我想在 Objective-C 中以编程方式了解基于每个 iPad 中 IP 地址的本地域。例如，我在本地域“project.local”中有一台 iPad。在这个域中，我们有许多 IP 地址为 192.168.12.50。IOS 设备自动获取其 IP 地址。

现在我想在objective-C中以编程方式获得知道IP地址的域名“projet.local”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:42:39.427

试试这个（类似于dreamlax的答案[https://stackoverflow.com/a/3575383/1758762](https://stackoverflow.com/a/3575383/1758762)）：

```
struct addrinfo *results = NULL;
char hostname[NI_MAXHOST] = {0};

if ( getaddrinfo("192.168.12.50", NULL, NULL, &results) != 0 )
    return;

for (struct addrinfo *r = results; r; r = r->ai_next)
{
    if (getnameinfo(r->ai_addr, r->ai_addrlen, hostname, sizeof hostname, NULL, 0 , 0) != 0)
        continue; // try next one
    else
    {
        NSLog (@"Found hostname: %s", hostname);
        break;
    }
}

freeaddrinfo(results); 
```

# vlc - 使用 VLCJ 动态更改播放视频的分辨率

> ID：15571769
> 
> 赞同：0
> 
> 时间：2013-03-22T13:38:26.343
> 
> 标签：vlc, libvlc, vlcj

String mrl="rtsp://"XX.XX.XX.XX"/axis-media/media.amp?videocodec=h264&resolution=720x480";

我使用 mediaPlayer.playMedia(mrl); 播放视频 它工作得很好。但现在我想动态改变播放视频的分辨率。例如，在播放时我需要将分辨率更改为 720X560 或类似的东西。可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:54:25.193

最后我才知道，这是不可能通过 MRL 实现的。要么我必须停止并以新的分辨率启动播放器，否则我应该手动调整 JPanl 大小。

# jquery - Jquery 切换类悬停

> ID：15571770
> 
> 赞同：2
> 
> 时间：2013-03-22T13:38:26.607
> 
> 标签：jquery, hover, toggleclass

我在我的链接 SLIDE 上得到了这个子菜单，问题是当我点击关闭子菜单时，如果我将光标移动到其他地方，但“SLIDE”链接它工作正常，但如果我关闭它并且我的光标停留在链接上.hover 的切换类是跳跳虎，所以我有一个“活动”链接，没有什么可显示的。

[http://jsfiddle.net/6GPtg/13/](http://jsfiddle.net/6GPtg/13/)

我该如何解决这个问题，这让我发疯......谢谢

```
 $(".border").hover(function(){
        if($(this).next('.sous_menu').is(':visible')){
            $('.sous_menu').closest('.border').removeClass('border').addClass('border_active');

        }else{
            $(this).toggleClass('border_active border', 500);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:46:50.923

最好使用`mouseenter`and`mouseleave`而不是`hover`.

```
$(".border").on({
    "mouseenter": function(){
        if($(this).next('.sous_menu').is(':visible')){
            $('.sous_menu').closest('.border').removeClass('border').addClass('border_active');
        }else{
            $(this).addClass('border_active', 500);
        }
    },
    "mouseleave": function(){
        if($(this).next('.sous_menu').is(':visible')){
            $('.sous_menu').closest('.border').removeClass('border').addClass('border_active');
        }else{
            $(this).removeClass('border_active', 500);
        }
    }
}); 
```

到了，完成！[jsFiddle](http://jsfiddle.net/6GPtg/32/)

你有这个`$(this).toggleClass('border_active border', 500);`也切换了`border`课程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:00:27.730

试试这个：

```
$(".border").click(function (e) {
    $(".sous_menu").slideUp('fast');
    if ($(this).next('.sous_menu').is(':visible')) {
        $(this).next(".sous_menu").slideUp('fast');
        if(!$(this).hasClass('border_active'))
        $(this).toggleClass('border_active border', 500);
    } else {
        $(this).next(".sous_menu").slideDown('fast');
    }
}); 
```

**[演示](http://jsfiddle.net/CuCaQ/1/)**

# ios - Instashare 如何在 iOS 设备上扩展 AirDrop？

> ID：15571771
> 
> 赞同：2
> 
> 时间：2013-03-22T13:38:26.763
> 
> 标签：ios, objective-c, macos, airdrop

我希望复制 Instashare 功能（用于更简单、更专业的任务，即在彼此靠近的多个人之间交换笔记）。

我不知道从哪里开始，无论是从架构的角度来看，还是从开发的角度来看。

到目前为止，我假设我需要在 2 个设备之间创建一个内部网络（例如，使所有设备都成为客户端和服务器），然后在所有设备上保持某种连接。

它是否正确？这可能是一个更好的方法吗？我可以为此使用哪些框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:50:37.107

您可以使用[GKSession](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKSession_Class/Reference/Reference.html)和[GKSessionDelegate](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKSessionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/GKSessionDelegate) ( [Tutorial](http://mobile.tutsplus.com/tutorials/iphone/bluetooth-connectivity-with-gamekit/) ) 通过蓝牙来回发送文件。对于仅通过 Wifi 发送，您将使用 TCP 和[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)和/或[SocketKit 之](https://github.com/unixpickle/SocketKit)类的东西。

顺便说一句，似乎是一个很棒的周末项目。想要解决它的荣誉;）

关于 SO 的其他相关问题：

[在 Cocoa 中构建服务器/客户端应用程序](https://stackoverflow.com/questions/7047250/building-a-server-client-application-in-cocoa)

# c# - Kentico 中 Uniselector 中的自定义表

> ID：15571778
> 
> 赞同：3
> 
> 时间：2013-03-22T13:38:36.577
> 
> 标签：c#, asp.net, content-management-system, kentico

直到今天我一直在使用 Kentico 没有问题，这是我的问题

我想在单选器中使用自定义表。

我遇到这个问题的原因是，我需要使用自定义表单控件，例如 SiteManager->Users Advanced 过滤器。我们有添加角色，它会打开一个弹出窗口，并显示所有角色的列表。

此 Web 部件使用 Uniselector

```
<cms:CMSUpdatePanel ID="pnlUpdate" runat="server">
    <ContentTemplate>
        <cms:UniSelector ObjectType="cms.role" SelectionMode="MultipleTextBox"
            OrderBy="RoleDisplayName" ResourcePrefix="roleselect" runat="server"
            ID="usRoles" ShortID="s" AllowEditTextBox="true" AddGlobalObjectSuffix="true" />
    </ContentTemplate>
</cms:CMSUpdatePanel> 
```

现在如果我使用

```
ObjectType="cms.role" 
```

它工作正常，因为它是系统表

现在如果我使用

```
ObjectType="customtable.country" 
```

这行不通

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T08:32:57.953

从版本 7 开始，您可以使用：

```
ObjectType="customtableitem.namespace.customtable" 
```

这将是

```
ObjectType="customtableitem.customtable.SampleTable" 
```

用于示例自定义表（来自企业示例站点）。

如果您有任何其他问题，请随时与我联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:37:18.747

不幸的是，UniSelector 在设计上需要 Kentico 对象类型，它不适用于自定义表。

但是，基本上有三种可能的解决方法：

1.  您可以开发自定义表单控件而不是使用 UniSelector ->[开发人员指南 - 开发表单控件](http://devnet.kentico.com/docs/devguide/index.html?developing_form_controls.htm)
2.  使用内置的**下拉列表**控件
3.  修改**UniSelector**表单控件 - 您将在文件 ~\CMSAdminControls\UI\UniSelector\UniSelector.ascx.cs 的 LoadObjects() 方法中加载 DataSet

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:25:52.307

我们已经更改了 uniselector.ascx，记住 kentico 可以在更新时覆盖它，使用这个 CMSAdminControls

我使用这种方法并获得成功创建新页面为

1.  CustomUniSelector.ascx
2.  CustomSelectionDialog.ascx

将方法 Loadobject 更改为给定 url ~/CMSAdminControls/Mycustomcontrol/CustomSelectionDialog.aspx

而不是更改 CustomSelectionDialog.ascx.cs 中的 LoadControls() 方法

CMSObjectHelper.GetObject() 方法无法从自定义表中获取数据，因此添加了从自定义表中获取数据的新方法

# javascript - 从 express/connect 中间件“结束”请求的正确方法是什么？

> ID：15571779
> 
> 赞同：26
> 
> 时间：2013-03-22T13:38:41.763
> 
> 标签：javascript, node.js, express, connect

假设我有这样的中间件；

```
var express = require('express');
var app = express();

app.use(function (req, res, next) {
    var host = "example.com";

    if (req.host !== host) {
        res.redirect(301, host + req.originalUrl);
        res.end();
    }
}); 
```

我需要在这里遵守什么样的规则？

1.  我应该打电话`res.end()`吗？（或者`res.redirect()`为我做这个？）
2.  我应该打电话`next()`吗？（或者连接是否检测到请求已经结束并干净地退出？）
3.  假设我*应该*调用`next()`，我想这意味着*我*可能会收到对我的中间件的请求，这些请求可能已经被链中更高的其他中间件结束了；我该如何保护自己免受这种伤害？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-22T13:55:08.013

1.  `res.redirect()`确实`res.end()`自称；
2.  `next()`如果你的中间件不是终点，你应该打电话；在生成重定向的情况下，它*是*一个端点，`next()`不应该被调用，但是如果是`req.host === host`，您需要调用`next()`以将请求沿链向上移动到其他中间件/路由；
3.  请求不会结束，响应会结束。当它发生时，它将结束中间件链，因此您不必担心。

# ios - 访问 NSMutableArray 对象以在 TableView 上使用

> ID：15571780
> 
> 赞同：1
> 
> 时间：2013-03-22T13:38:43.090
> 
> 标签：ios, objective-c, uitableview, nsmutablearray, nsdictionary

我开始开发一个使用带有 JSON 数据的 WCF 服务的应用程序。我从 WCF 服务中获取了数据，但我没有按照自己的意愿使用它。

这是 JSON 数据：

```
{"MenuDoldurAndroidResult":[
{"menu_description":"Turkish Pizza","menu_title":"L Pizza","menu_price":"26 TL"},{"menu_description":"Italiano Pizza","menu_title":"L Pizza","menu_price":"27 TL"},{"menu_description":"Extravaganza","menu_title":"L Pizza","menu_price":"29 TL"},{"menu_description":"Pepporoni Pizza","menu_title":"L Pizza","menu_price":"28 TL"},{"menu_description":"Turkish Pizza","menu_title":"S Pizza","menu_price":"12 TL"},{"menu_description":"Italiano Pizza","menu_title":"S Pizza","menu_price":"13 TL"},{"menu_description":"Extravaganza","menu_title":"S Pizza","menu_price":"15 TL"},{"menu_description":"Pepporoni Pizza","menu_title":"S Pizza","menu_price":"14 TL"}
]} 
```

我想要的是：

如果这里有 2 个标题，那么表格视图中必须有 2 个部分。每个项目都必须在他们的部分。

像这样：

-L 比萨

*   土耳其披萨 26 TL
*   意大利比萨 27 TL
*   盛宴披萨 29 TL
*   意大利辣香肠披萨 28 TL

-S 比萨

*   土耳其披萨 12 TL
*   意大利比萨 13 TL
*   Extravaganza 比萨 15 里拉
*   意大利辣香肠披萨 14 TL

我怎样才能访问这个项目并像这样显示？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

//I posted request to service here. I didn't write these parts of code.

NSDictionary* json = [NSJSONSerialization
                              JSONObjectWithData:data
                              options:NSJSONReadingMutableContainers
                              error:&error];

        NSMutableArray *array= [json objectForKey:@"MenuDoldurAndroidResult"];

        menu = [[NSMutableArray alloc] initWithCapacity:3];

        NSString *descriptionTemp;
        NSString *titleTemp;
        NSString *priceTemp;
        for(int i=0; i< array.count; i++)
        {
            NSDictionary *menuList= [array objectAtIndex:i];
            titleTemp = [menuList objectForKey:@"menu_title"];
            descriptionTemp = [menuList objectForKey:@"menu_description"];
            priceTemp = [menuList objectForKey:@"menu_price"];
            [menu addObject:[NSArray arrayWithObjects:titleTemp,descriptionTemp,priceTemp,nil]];

        }
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 2;
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 2;
}

-(NSString *)tableView:(UITableView*)tableView titleForHeaderInSection:(NSInteger)section{

    if (section==0) {
        return @"L Pizzas";
    }
    else{
        return @"S Pizzas";
    }
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:nil];
    cell.textLabel.text = [menu objectAtIndex: indexPath.row];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:06:50.523

如果您的内容是静态的，您可以尝试使用 Sunny 的答案。但如果是动态的，最好以不同的方式存储数据。显然 L 披萨和 S 披萨似乎是一个类别，其余的就像类别项目。

您需要制作类别的集合。[演示项目源代码](http://dl.dropbox.com/u/35012982/Demo%20Projects/DemoProject_Pizzas.zip)

```
- (void)viewDidLoad
{
    [super viewDidLoad];

//I posted request to service here. I didn't write these parts of code.

NSDictionary* json = [NSJSONSerialization
                              JSONObjectWithData:data
                              options:NSJSONReadingMutableContainers
                              error:&error];

NSMutableArray *allPizzas = [json[@"MenuDoldurAndroidResult"] mutableCopy];

NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"menu_price"
                                                                 ascending:YES
                                                                  selector:@selector(compare:)];
[allPizzas sortUsingDescriptors:@[sortDescriptor]];

NSMutableArray *pizzaCategories = [@[]mutableCopy];
//Find unique categories in all the pizzas
NSSet* categories = [NSSet setWithArray: [allPizzas valueForKey:@"menu_title"]];

//Enumerate to form a new reformatted category array
for (NSString *categoryTitle in categories)
{
    //Predicate is used to find the items that come under current category
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"menu_title == %@",categoryTitle];
    NSArray *categoryItems = [allPizzas filteredArrayUsingPredicate:predicate];
    //New dictionary with name of category and category items are formed 
    NSDictionary *categoryDict = @{@"menu_title":categoryTitle,@"pizzas":categoryItems};
    [pizzaCategories addObject:categoryDict];

}

//Assign the new formatted category array to the instance variable for holding categories.
self.categories = pizzaCategories;
} 
```

修改tableView的datasource为新结构

```
#pragma mark - UITableViewDataSource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
   //The count of categories will give number of sections
    NSUInteger sections = [self.categories count];
    return sections;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    //The number of items in a category is calculated
    NSDictionary *category = self.categories[section];
    return [category[@"pizzas"] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    //Title for the category
    NSDictionary *category = self.categories[section];
    return category[@"menu_title"];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"CellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

    NSDictionary *category      = self.categories[indexPath.section];
    NSArray *categoryItems      = category[@"pizzas"];
    NSDictionary *categoryItem  = categoryItems[indexPath.row];

    cell.textLabel.text = categoryItem[@"menu_description"];
    cell.detailTextLabel.text = categoryItem[@"menu_price"];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:10:53.973

您还可以使用免费的 Sensible TableView 框架从 Web 服务获取数据并自动将其显示在您的表格视图中。

# c# - 两个网络浏览器控件之间的链接

> ID：15571783
> 
> 赞同：0
> 
> 时间：2013-03-22T13:38:54.773
> 
> 标签：c#, html, wpf

我在我的应用程序中使用了两个 Web 浏览器，一个用于将书籍的“内容表”显示为链接，另一个用于显示此链接的内容

举个例子 ：

```
<h2>Table of Contents</h2>
<ul>
<li>
<a href="#www_gutenberg_org@files@26178@26178-h@26178-h-0_htm_pgepubid00001">THE MIRROR OF TASTE,</a>
<ul>
<li>
<a href="#www_gutenberg_org@files@26178@26178-h@26178-h-0_htm_pgepubid00002">DRAMATIC CENSOR.</a>
<ul>
<li>.... 
```

我想通过点击访问这个链接：

```
<div class="mirror"><a class="pageno" title="189" id="pgepubid00000"/> <a id="www_gutenberg_org@files@26178@26178-h@26178-h-0_htm_page189"/>
<h1 id="www_gutenberg_org@files@26178@26178-h@26178-h-0_htm_pgepubid00001">THE MIRROR OF TASTE,</h1>
<h6>AND</h6>
<h2 id="www_gutenberg_org@files@26178@26178-h@26178-h-0_htm_pgepubid00002">DRAMATIC CENSOR.</h2>
<table class="title" summary="title strip">
<tbody><tr>
<td>Vol. I.</td>
<td class="center">MARCH 1810.</td>
<td class="right">No. 3.</td>
</tr> 
```

每个部分都在一个网络浏览器中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:06:12.987

我通过挂钩 webBrowser 控件上的导航事件，获取目的地并将其应用到其他浏览器来做到这一点。如果您找到要在其他地方应用的链接，则取消导航事件。但是，我使用了托管的 winforms WebBrowser 控件

为了确定何时应用到其他浏览器，我将数据放入我能够解析出来的链接中。

# asp.net - Tabpanel Set visible false 在 ASP 网页服务器端不起作用

> ID：15571787
> 
> 赞同：0
> 
> 时间：2013-03-22T13:39:00.780
> 
> 标签：asp.net

```
 <AjaxToolkit:tabpanel runat="server" id="nourl" headertext=" " width="90%" height="100px" visible="false" >
    <headertemplate>  
                New 
            </headertemplate>  
            <contenttemplate >  
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
               <tr>
                <td align="center"  valign="middle">                        
                </td>
            </tr>
        </table>

            </contenttemplate>  
    </AjaxToolkit:TabPanel>

        </ajaxtoolkit:tabcontainer> 
```

这是`aspx`文件代码

在服务器端，我将此选项卡面板设置为可见真，然后我在另一个按钮事件中设置可见假，它不会隐藏选项卡面板。如何解决这个问题呢

```
try
{
   DataTable dtFeedurls = getDatatable();

   if (dtFeedurls.Rows.Count > 0)
   {
     foreach (DataRow dr in dtFeedurls.Rows)
      {
         AjaxControlToolkit.TabPanel tb = new AjaxControlToolkit.TabPanel();
         tb.ID = ("Tab" + dr["COLUMN_1"].ToString());
         tb.HeaderText  = dr["COLUMN_2"].ToString();
         tc.Tabs.Add(tb);

     }

    nourl.Visible = false;

   }
   else
   {
     nourl.Visible = true;                
   }

   tc.ActiveTabIndex = 0;
}
catch (Exception ex)
 {
   throw ex;
 } 
```

这是服务器端代码

# ios5 - 关于如何使用 KIF 测试实现拉取刷新的任何想法？

> ID：15571789
> 
> 赞同：4
> 
> 时间：2013-03-22T13:39:07.030
> 
> 标签：ios5, kif-framework

这是相当开放的。

有没有人知道如何在 KIF 测试中测试下拉刷新功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:30:22.507

只需从屏幕顶部向下拖动到屏幕底部即可，对吗？KIF 在 UIView-KIFAdditions 类别中实现了以下方法：

```
- (void)dragFromPoint:(CGPoint)startPoint toPoint:(CGPoint)endPoint; 
```

我继续为简单的拖动操作创建了以下测试步骤：

```
+ (id)stepToDragFromStartPoint:(CGPoint)startPoint toEndPoint:(CGPoint)endPoint
{
    NSString *description = [NSString stringWithFormat:@"Simulate dragging finger from point %.1f,%.1f to point %.1f,%.1f", startPoint.x, startPoint.y, endPoint.x, endPoint.y];
    return [KIFTestStep stepWithDescription:description executionBlock:^(KIFTestStep *step, NSError **error) {
        UIView *viewToSwipe = [UIApplication sharedApplication].keyWindow.subviews.lastObject;

        [viewToSwipe dragFromPoint:startPoint toPoint:endPoint];

        return KIFTestStepResultSuccess;
    }];
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T16:41:24.357

发布此问题一段时间后，KIF 开发了内置的“拉动刷新”功能。请参阅以下方法`KIFUITestActor`

```
- (void)pullToRefreshViewWithAccessibilityLabel:(NSString *)label pullDownDuration:(KIFPullToRefreshTiming) pullDownDuration;
- (void)pullToRefreshViewWithAccessibilityLabel:(NSString *)label value:(NSString *)value;
- (void)pullToRefreshAccessibilityElement:(UIAccessibilityElement *)element inView:(UIView *)viewToSwipe pullDownDuration:(KIFPullToRefreshTiming) pullDownDuration; 
```

# vb.net - 如何从不同的表单中获取 DataGridView.SelectedRows().Cells() 的值？

> ID：15571791
> 
> 赞同：1
> 
> 时间：2013-03-22T13:39:13.050
> 
> 标签：vb.net, winforms, datagridview

我有 2 种形式，在 2 种形式中的每一种中都有一个`DataGridView`(`chatform`和`prodetail`)。

在`chatform`我创建了一个在每一行`DataGridView`中都有一个生成的。`Button`

每次`Button`单击时都会加载一个`prodetail`表单，并且在`prodetail`表单中我想`SelectedRow.Cell`从`DataGridView`原始`chatform`.

代码 ( `chatform`):

```
Public Sub loadtoDGV()
    Dim sqlq As String = "SELECT * FROM chattbl"
    Dim sqlcmd As New SqlCommand
    Dim sqladpt As New SqlDataAdapter
    Dim tbl As New DataTable

    With sqlcmd
        .CommandText = sqlq
        .Connection = conn
    End With

    With sqladpt
        .SelectCommand = sqlcmd
        .Fill(tbl)
    End With

    DataGridView1.Rows.Clear()
    For i = 0 To tbl.Rows.Count - 1
        With DataGridView1
            .Rows.Add(tbl.Rows(i)("Username"), tbl.Rows(i)("Title"), tbl.Rows(i)("ChatDateTime"))
        End With
    Next
    conn.Close()
End Sub

Private Sub ChatForm_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    loadtoDGV()
End Sub 
```

代码 ( `DataGridView1.CellContentClick`):

```
Private Sub grdData_CellContentClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellContentClick
    Dim colName As String = DataGridView1.Columns(e.ColumnIndex).Name
    If colName = "Detail" Then
        Prodetail.Show()
        MessageBox.Show(String.Format("You clicked the button in row {0} of the Detail column", e.RowIndex))
    End If
End Sub 
```

代码 ( `prodetail`):

```
Public Sub loadtoDGV2()

    Dim i As Integer
    i = ChatForm.DataGridView1.SelectedRows.Count
    MsgBox(i)

    Dim compareai As String = ChatForm.DataGridView1.SelectedRows(i).Cells(1).Value
    Dim sqlq As String = "SELECT * FROM Chattbl WHERE Title =" & compareai & ""
    Dim sqlcmd As New SqlCommand
    Dim sqladpt As New SqlDataAdapter
    Dim tbl As New DataTable

    With sqlcmd
        .CommandText = sqlq
        .Connection = conn
    End With

    With sqladpt
        .SelectCommand = sqlcmd
        .Fill(tbl)
    End With

    DataGridView1.Rows.Clear()
    For i = 0 To tbl.Rows.Count - 1
        With DataGridView1
            .Rows.Add(tbl.Rows(i)("Username"), tbl.Rows(i)("Title"), tbl.Rows(i)("ChatDateTime"), tbl.Rows(i)("ChatContent"))
        End With
    Next
    conn.Close()
End Sub

Private Sub Prodetail_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    loadtoDGV2()
End Sub 
```

我做错了什么？

我尝试使用`MsgBox(i) i = SelectedRow(0)`假设它会显示第一行的数据，但不会从数据库中加载任何数据`DataGridView1`。`prodetail`

我没有观察到任何错误，我只是没有解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:52:17.713

第一个问题是您调用的是类而不是实例。VB.NET 将允许您调用表单的一个实例作为其名称，但每次使用时它都是同一个实例。我不建议这样做。

首先我会改变这个：

```
Private Sub grdData_CellContentClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellContentClick
    Dim colName As String = DataGridView1.Columns(e.ColumnIndex).Name
    If colName = "Detail" Then
        Prodetail.Show()
        MessageBox.Show(String.Format("You clicked the button in row {0} of the Detail column", e.RowIndex))
    End If
End Sub 
```

对此：

```
Private Sub grdData_CellContentClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellContentClick
    Dim colName As String = DataGridView1.Columns(e.ColumnIndex).Name
    If colName = "Detail" Then
        Dim newDetailForm as new Proddetail(dataGridView1.Rows(e.RowIndex).Cells(1).Value)
        newDetailForm.show()
        MessageBox.Show(String.Format("You clicked the button in row {0} of the Detail column", e.RowIndex))
    End If
End Sub 
```

然后在`Proddetail`类中，您需要添加一个构造函数和一个成员，如下所示：

```
Private SearchValue as String 

Public Sub New(byval theSearchValue as string)
    InitalizeComponent()

    SearchValue = theSearchValue
End Sub 
```

然后在您的加载例程中：

```
Public Sub loadtoDGV2()      
    Dim sqlq As String = "SELECT * FROM Chattbl WHERE Title =" & SearchValue & ""
    Dim sqlcmd As New SqlCommand
    Dim sqladpt As New SqlDataAdapter
    Dim tbl As New DataTable

    With sqlcmd
        .CommandText = sqlq
        .Connection = conn
    End With

    With sqladpt
        .SelectCommand = sqlcmd
        .Fill(tbl)
    End With

    DataGridView1.Rows.Clear()
    For i = 0 To tbl.Rows.Count - 1
        With DataGridView1
            .Rows.Add(tbl.Rows(i)("Username"), tbl.Rows(i)("Title"), tbl.Rows(i)("ChatDateTime"), tbl.Rows(i)("ChatContent"))
        End With
    Next
    conn.Close()
End Sub 
```

这应该会在类的新实例中显示单击行的详细信息`Proddetail`。

我向获取 SQL 查询字符串值的类添加了一个自定义*参数化构造函数。*这样，当您在代码中创建表单的新实例时，您始终可以传入搜索字符串，该字符串将导致您想要查看的详细信息。

# wamp - Web 服务器根层次结构之外的媒体文件夹

> ID：15571792
> 
> 赞同：0
> 
> 时间：2013-03-22T13:39:15.490
> 
> 标签：wamp

我想要一个离线网站（无意让它在局域网外可用），处理我的用户图片文件夹中的几张图片（他们必须留在原地），但问题是我不知道我是否可以从 WAMP 访问它们，因为它位于文件夹层次结构之外。

还考虑了另一种解决方案，可能存在一些用于 PHP 的网络服务器，例如 SQLite 用于 SQL，不需要任何安装的轻量级独立程序，可以放置在任何地方。

在此先感谢，任何帮助都会非常感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:43:26.267

有几种方法可以解决这个问题：

*   使用 Mod_Rewrite 将 URL 从“/图片”之类的内容定向到图片的位置，请参阅 [http://httpd.apache.org/docs/2.4/rewrite/remapping.html](http://httpd.apache.org/docs/2.4/rewrite/remapping.html)

*   将httpd.conf中apache服务器的文档根目录改成图片所在的位置（可能不是你想要的）

*   将另一个虚拟服务器添加到 apache 并将其文档根设置为图片的位置（同样，可能不是你想要的，但我认为我会建议它）

*   添加一个符号链接，不太确定它在 Windows 中如何工作（如果有的话），但同样，你可以看看

# build - TeamCity：可以组合完成构建触发器和计划触发器吗？

> ID：15571793
> 
> 赞同：2
> 
> 时间：2013-03-22T13:39:16.530
> 
> 标签：build, continuous-integration, teamcity

我的设置是这样的，TeamCity 开始构建另一个项目的成功构建。

这很好用，但是现在我需要对其进行限制，以使上述情况仅在白天的某个窗口中发生。

即在成功构建项目 X 时开始构建 Y，但仅在 9 到 5 小时之间。

据我所知，我不能*AND*或*OR*两个构建触发器来实现这一点。有谁知道解决这个问题的方法？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-03T05:36:52.353

另一种解决方案是在构建 Y 中添加第一步，它将在指定的时间间隔内返回成功代码；只有在这种情况下才会执行下一步；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:24:12.697

为了解决贾斯汀的评论：我的理解是您希望项目 Y 构建在指定时间窗口之外跳过。

我可以提供以下解决方案：

*   创建一个辅助构建 Z：
    *   构建步骤。一个构建步骤：命令行运行程序，脚本检查当前时间，如果时间在 9 到 5 之间，则返回错误级别 = 0，否则返回不同的错误级别。
    *   建立失败条件。如果构建过程退出代码不为零，则失败。
    *   构建触发。由成功的构建 X 触发。
*   修改构建 Y 以由成功构建 Z 而不是 X 触发。

这会成功的。

但是，您必须为 Z 花费一个构建配置，如果您使用的是 TeamCity 专业版，这可能是一个问题，它的构建配置限制为 20 个。您也可以通过在 Y 中添加相同的构建步骤而不创建构建 Z，但我不知道它是否会满足您的需求。不利的一面是它会导致项目 Y 有许多构建失败，只是因为它不是适合他们的时间。尽管如此，您仍将通过避免构建 Y 的剩余步骤来节省 CPU 资源（如果资源节省是您想要实现的目标）。

# html - 像 Canvas 中的 Flash 时间轴

> ID：15571799
> 
> 赞同：3
> 
> 时间：2013-03-22T13:39:42.480
> 
> 标签：html, flash, canvas

我正在寻找制作动画电影，但不是使用 Flash，而是使用 HTML5 画布。

在 Flash Professional 中，有一个很棒的时间线，可以非常轻松地创建动画。不同的电影剪辑有不同的时间线。

是否有任何框架/库可用于在 HTML5 画布中类似时间线的环境中工作？

如果没有，在 HTML5 画布中创建动画电影的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T15:01:10.210

Adobe 为 DOM 元素创建了一个基于时间轴的工具，但遗憾的是它没有使用该`canvas`元素。它将使用包含`canvas`元素的 html。

它肯定工作看看：

[Adobe边缘动画](http://html.adobe.com/edge/animate/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:41:49.757

**如果您来自 Flash 背景，您应该查看 Grant Skinner 的 EaselJS。**

EaselJS：[http ://www.createjs.com/#!/EaselJS](http://www.createjs.com/#!/EaselJS)

它是一个画布绘图库，它从 Flash API 中获得了它的风格——你得到了你习惯的舞台和显示对象。但它使用 javascript 和 canvas 来驱动和显示您的动画。

如果您有现有的 Flash 资源，您可以使用他的 Zoe 工具将您的 .swf 转换为画布可以显示的 spritesheets。我想我在某个地方读到过 Grant Skinner 和 Adob​​e 合作使 Zoe 变得非常准确和稳定——但不要引用我的话！

我想理论上你可以：

*   在梦幻般的 Flash 环境中做你的未来发展
*   使用 Zoe 将 .swf 转换为 spritesheets
*   使用真正的画布绘图库，如 EaselJS 或 KineticJS 来控制精灵。（这些库喜欢 spritesheets！）

# asp.net - 为什么 WebMethod 可以在没有 EnableSessionState 的情况下访问会话状态？

> ID：15571800
> 
> 赞同：13
> 
> 时间：2013-03-22T13:39:45.943
> 
> 标签：asp.net, webforms, asmx, session-state, webmethod

我在标记为 a 的页面上有一个方法，`[WebMethod]`它使用某些会话状态作为其操作的一部分。在我写完这段代码后，我突然有了一个内存，`EnableSessionState`当您在 a 中使用会话状态时需要使用它`[WebMethod]`（例如，请参见此处：http: [//msdn.microsoft.com/en-us/library/byxd99hx.aspx](http://msdn.microsoft.com/en-us/library/byxd99hx.aspx)） . 但它似乎工作正常。为什么？

后面的示例代码：

```
protected void Page_Load(object sender, EventArgs args) {
    this.Session["variable"] = "hey there";
}
[System.Web.Services.WebMethod]
public static string GetSessionVariable() {
    return (string)HttpContext.Current.Session["variable"];
} 
```

示例正文 html：

```
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    function getSession() {
        $.ajax({
            type: 'POST',
            url: 'Default.aspx/GetSessionVariable',
            data: '{ }',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (msg) {
                document.getElementById("showSessionVariable").innerHTML = msg.d;
            }
        });
        return false;
    }
</script>
<form id="form1" runat="server">
    <div id="showSessionVariable"></div>
    <button onclick='return getSession()'>Get Session Variable</button>
</form> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-29T21:34:19.427

在[http://msdn.microsoft.com/en-us/library/system.web.services.webmethodattribute.enablesession(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.services.webmethodattribute.enablesession(v=vs.90).aspx)上，您将看到这适用于 XML Web 服务（即类派生自 System.Web.Services.WebService）。

```
[WebMethod(EnableSession=true)] 
```

因为您的页面可能扩展了 System.Web.UI.Page，所以没有必要显式启用会话。在[http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.enablesessionstate.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.enablesessionstate.aspx)上，您可以看到默认情况下为 Pages 启用了 EnableSessionState（您可能已经知道）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T21:26:57.877

[http://forums.asp.net/t/1630792.aspx/1](http://forums.asp.net/t/1630792.aspx/1)

gsndotnet 的回答：你是对的，但无论你说什么都适用于 WebServices 上下文中的方法。我们还在 WebService (.asmx) 的方法上使用相同的 WebMethod 属性。因此，在 Web 服务的上下文中，当我们想要允许访问 Session 时，我们必须添加 EnableSession = true。而在 PageMethods 的上下文中，它们已经可以访问 Session，因为它们是在从 Page 类继承的类中定义的。

您的 msdn 链接意味着您使用 Web 服务，即派生自 System.Web.Services.WebService 的类。在您的代码中，您直接在页面上添加您的方法，因此它可以访问会话。

# ios - NSDateFormatter 不会格式化奇怪的日期字符串

> ID：15571801
> 
> 赞同：2
> 
> 时间：2013-03-22T13:39:47.503
> 
> 标签：ios, objective-c, date, nsdate, nsdateformatter

所以我收到了一个如下所示的日期字符串：“2013-03-20T21:13:26-7:00”，我从 Web 后端收到。我无法控制后端，仅供参考。

我的偏好是将日期格式化为：3/20 晚上 9:13。

当我执行以下操作时

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSDate *date  = [dateFormatter dateFromString:@"2013-03-20T21:13:26-7:00"]; 
```

`date`一片空白。

我的第一个想法是日期字符串看起来很奇怪，也许我应该删除 T 和“-7:00”，因为“-7:00”附加到我收到的每个日期，我不确定是什么那是为了。

即使在字符串看起来像 @"2013-03-20 21:13:26" 之后，`date`它仍然为空。

我承认我不是格式化日期的专家，所以如果我能在这个问题上得到一些帮助，那就太好了。

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T13:45:18.597

您必须将 dateFormat 设置为 dateFormatter

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssz"];
NSDate *date  = [dateFormatter dateFromString:@"2013-03-20T21:13:26-7:00"];

[dateFormatter setDateFormat:@"hh:mma 'at' MM/yy"];
NSString *dateString = [dateFormatter stringFromDate:date]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:42:33.873

为 设置日期格式`dateFormatter`，你的问题在于日期的最后一部分，其次你可以在 dateformatter 中设置 T 如下

```
 [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssz"];
  [dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];

  NSDate *date  = [dateFormatter dateFromString:@"2013-03-20T21:13:26-7:00"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:45:18.810

设置日期格式，

```
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"]; 
```

# java - 矩阵中对象的翻译

> ID：15571805
> 
> 赞同：0
> 
> 时间：2013-03-22T13:40:17.633
> 
> 标签：java, clone, arrays

我正在对气体粒子进行一些模拟。

我的问题是我制作了 3 个二维整数表。一个用于粒子的压力值，另一个用于描述粒子的 x 和 y 运动。

尽管我制作了arraycopy并克隆它仍然以某种方式设法更改全局表中的值

```
private void translate() {
    int [][] VectorXBuff = new int[500][500];
    System.arraycopy(VectorX.clone(), 0, VectorXBuff, 0, VectorX.length);
    int [][] VectorYBuff = new int[500][500];
    System.arraycopy(VectorY.clone(), 0, VectorYBuff, 0, VectorX.length);
    int [][] FieldBuff = new int[500][500];
    System.arraycopy(FieldMatrix.clone(), 0, FieldBuff, 0, VectorX.length);

    for (int y = 0; y < FieldMatrix.length; y++){
        for (int x = 0; x < FieldMatrix.length; x++){
            if(FieldBuff[x][y]!= 0 && FieldBuff[x][y]!= 9 ){
                FieldBuff[x + VectorXBuff[x][y]][y + VectorYBuff[x][y]] = Integer.valueOf(FieldBuff[x][y]);
                FieldBuff[x][y] = 0;
                VectorXBuff[x + VectorXBuff[x][y]][y + VectorYBuff[x][y]] = Integer.valueOf(VectorXBuff[x][y]);
                VectorYBuff[x + VectorXBuff[x][y]][y + VectorYBuff[x][y]] = Integer.valueOf(VectorYBuff[x][y]);
                VectorXBuff[x][y] = 0;
                VectorYBuff[x][y] = 0;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:45:59.590

这是因为您只复制二维数组的一维。因此，您仍然引用相同的数组，因此在原始数组中对其进行修改。

基本上，您有一个源对象`[[1,2],[3,4]]`，当您进行复制时，您将指针复制到新数组`[1,2]`并复制`[3,4]`到新数组中。

由于克隆做了一个浅拷贝（检查[在数组上调用 clone() 是否也克隆它的内容？](https://stackoverflow.com/questions/5821851/does-calling-clone-on-an-array-also-clone-its-contents)），这最终恢复为在内存中创建另一个完全相同的数组实例的数组。

# css - 悬停时围绕框阴影的 Firefox 轮廓

> ID：15571807
> 
> 赞同：2
> 
> 时间：2013-03-22T13:40:21.337
> 
> 标签：css, firefox, mozilla, shadow, outline

这是我在 StackOverflow 上的第一个问题，所以我会尝试以正确的方式对其进行格式化。

基本上，我有一个带有边框和轮廓的 div。悬停时，div 也会得到一个阴影，当然，它应该在轮廓之外。这适用于所有浏览器，除了 Firefox。由于某种原因，Firefox 似乎在框阴影之外渲染了轮廓。可以在这里看到一个例子：[http ://rubencoolen.be/test.php](http://rubencoolen.be/test.php)

这是我的 CSS：

```
.block {

    background: #eceeeb;
    border: 3px solid white;
    outline: 2px solid lavender;
    width: 240px;
    padding: 10px;
    float: left;
    height: 130px;
    margin: 40px;
    text-align: center;
    cursor: default;
    -moz-transition: background 0.7s, -moz-box-shadow 0.3s;
    -webkit-transition: background 0.7s, -webkit-box-shadow 0.3s;
    -o-transition: background 0.7s;
    transition: background 0.7s, box-shadow 0.3s;

}

.block:hover {

    background: whitesmoke;
    -webkit-box-shadow: 0px 0px 18px rgba(50, 50, 50, 0.30);
    -moz-box-shadow: 0px 0px 18px rgba(50, 50, 50, 0.30);
    box-shadow: 0px 0px 18px rgba(50, 50, 50, 0.30);

} 
```

我似乎找不到解决这个问题的正确方法。

请原谅我中等的英语，它不是我的主要语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:25:22.543

As others have stated in the comments, you're not really using `outline` for it's intended purposes -- it's not meant to be treated just as an additional border in case the standard one isn't good enough for you; it has it's own reason for existing, and its own semantics. I'd suggest not using it this way at all.

So you asked what you could use instead?

*   `border-image`:

    Recent browsers all support a feature called `border-image`, which allows you to define the look of the border pretty much as you want to. You can specify any images you want in the borders, and thus you can design the border to look the way you have it (or even a lot more complex), without needing to resort to the `outline` style at all.

    The down-side is that IE doesn't support it (not even IE10), so you'll need to fall back on your `outline` solution for that. But you could use something like Modernizr to do feature detection for `border-image`, and only fall back to `outline` if `border-image` isn't supported.

    *   Reference: [https://developer.mozilla.org/en-US/docs/CSS/border-image](https://developer.mozilla.org/en-US/docs/CSS/border-image)
    *   Examples: [http://www.sitepoint.com/css3-border-image/](http://www.sitepoint.com/css3-border-image/)
    *   Browser support: [http://caniuse.com/border-image](http://caniuse.com/border-image)
*   `:before` or `:after` with a border.

    The `:before` and `:after` pseudo-selectors allow you to create an additional element before an after a given element using just CSS.

    You could use either of these to create an element with a `border` which would solve the problem for you, again without needing to use an `outline` or any additional markup.

Hope that helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:31:46.137

您可以嵌套`div`s 以提供与轮廓相同的效果：

```
<div class='outline'>
    <div class="block">Test</div>
</div> 
```

然后添加更改css：

```
.block {
    position:absolute;
    top:0px;
    left:0px;
    background: #eceeeb;
    border: 3px solid white;
    width: 234px;
    padding: 10px;
    float: left;
    height: 124px;
    text-align: center;
    cursor: default;
    -moz-transition: background 0.7s, -moz-box-shadow 0.3s;
    -webkit-transition: background 0.7s, -webkit-box-shadow 0.3s;
    -o-transition: background 0.7s;
    transition: background 0.7s, box-shadow 0.3s;
}

.outline {
    position:relative;
    border: 2px solid lavender;
    width: 240px;
    padding: 10px;
    float: left;
    height: 130px;
    margin: 40px;
} 
```

[这适用于最新版本的 Chrome 和 Firefox](http://jsfiddle.net/Z3m6Q/3/)

# javascript - Javascript Catch，但仍然抛出错误

> ID：15571809
> 
> 赞同：0
> 
> 时间：2013-03-22T13:40:27.257
> 
> 标签：javascript, try-catch, throw

我已经构建了一个 javascript 函数，它将多个 ajax 函数合并到一个请求中。对于每个请求，几乎总是有一个回调函数。捆绑的函数一次调用一个回调函数。

我用 try catch 将它们包围起来，以防止一个函数阻止其他函数运行。但是，我仍然希望浏览器通知我有关 javascript 错误的信息。我怎样才能做到这一点？

我已经为我在[这里](http://jsfiddle.net/chpD2/1/)尝试做的事情树立了一个例子。

来自上面 jsfiddle 链接的代码：

```
<script>
function doSomeStuff() {
    for (var i in arguments) {
        try { 
            arguments[i].apply(this);
        }
        catch (e) {
            throw e;
        }
    }
}

doSomeStuff(function() { console.log("i'm an apple"); }, 
    function() { imnotavariable = test; },
    function() { console.log("i'm an apple too"); });
</script> 
```

问题摘要：如何捕获错误，同时仍将其报告给浏览器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:48:31.407

如果您希望循环完成（即调用所有函数），则不能在其中抛出错误。实现您想要的一种方法是保存错误并在循环之后将其抛出，即

```
var error = null;
for (...) {
  try {
    ...
  }
  catch(e) {
    error = e;
  }
}
if(error != null) { throw error; } 
```

不过，这只会传播最后一个错误。如果你想捕获所有发生的错误，你需要将它们合并成一个你可以再次抛出的错误。

### 汤姆的替代解决方案

您还可以在 上设置超时，`throw`这样它就不会干扰函数的执行。

```
function doSomeStuff() {
  for (var i in arguments) {
    try { 
      arguments[i].apply(this);
    }
    catch (e) {
      setTimeout(function() { throw e; }, 100);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:50:07.820

您需要通过“仍向浏览器报告”来定义您的意思。

简短的回答可能是，如果你有一些备用的日志系统，你可以尝试做类似的事情：

```
 var apperrors;

    function appLog(error){
        apperrors = apperrors || [];

        apperrors.push(error);
       //maybe trigger an app error event?
    }

    function doSomeStuff() {
        for (var i in arguments) {
            try { 
                arguments[i].apply(this);
            }
            catch (e) {
                appLog(e);
            }
        }
    } 
```

然后对你的错误做点什么。不过，您并没有真正描述那是什么。

# 编辑

在下面的评论之后：如果你发现错误，我可以看到你有三个行动方案：

*   忽略它（这很糟糕）
*   重新抛出它并做一些额外的事情（即因为你想更优雅地通知用户）
*   或捕获错误，并以其他不那么激进的方式处理它

如果你重新抛出错误，除非你做一些“额外的”事情，否则你不会获得任何东西。

# javascript - 带有 KnockoutJS 的 ClickToEdit 按钮

> ID：15571812
> 
> 赞同：1
> 
> 时间：2013-03-22T13:40:30.197
> 
> 标签：javascript, knockout.js, ko.observablearray

我正在创建一个自定义绑定，它将显示一个锚点，单击该锚点会变成一个文本框。一旦用户输入一个值并按下回车键，该值将被推送到传递给绑定的 observableArray 中。

大部分绑定取自 Ryan Niemeyers 示例 - 可在[此处找到](http://jsfiddle.net/rniemeyer/2jg2F/2/)

**html**

```
<div data-bind="clickToEdit: { data: items, buttonText: 'New Item' }"></div> 
```

**捆绑**

```
ko.bindingHandlers.clickToEdit = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, context) {
        var options = valueAccessor() || {};

        var editing = ko.observable(false);
        var newValue = ko.observable();

        var button = $('<a class="btn btn-mini" href="#">' + options.buttonText + '</a>').prepend('<span class="icon-plus"></span>').appendTo(element)[0];
        var input = $('<input type="text">').appendTo(element)[0];

        ko.applyBindingsToNode(button, {
            hidden: editing,
            click: function () {
                editing(true);
            }
        });

        ko.applyBindingsToNode(input, {
            value: newValue,
            visible: editing,
            hasFocus: editing,
            //valueUpdate: 'afterkeydown',
            onEnter: function(data) {
                debugger;
                options.data.push(data);
                editing(false);
            }
        });
    }
}; 
```

问题是在绑定到`onEnter`绑定的函数中，数据参数始终未定义，因此新值永远不会被推入数组。

请参阅我的[小提琴](http://jsfiddle.net/bflemi3/cpXns/)以获取完整示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:00:30.433

有两件事可以提供帮助：

*   该`applyBindingsToNode`调用接受第三个参数，您可以在其中提供上下文。在我的一些示例中，上下文无关紧要，因为它直接写入可观察对象并且不需要数据。因此，您可以将`context`（或`viewModel`）作为第三个参数传递给您的第二个`applyBindingsToNode`调用。

*   如果我了解您要执行的操作，那么我认为您可以执行以下操作： `options.data.push(new Item(newValue());`而无需担心上下文/数据（这将是整体视图模型，因为您处于顶层范围）。

示例：http: [//jsfiddle.net/rniemeyer/Pmns4/](http://jsfiddle.net/rniemeyer/Pmns4/)

# java - 如何使用 keytool 生成私钥证书

> ID：15571815
> 
> 赞同：0
> 
> 时间：2013-03-22T13:40:35.807
> 
> 标签：java, ssl, ssl-certificate, keytool

我正在尝试使用带有私钥的 java 6 keytool 生成证书有什么帮助吗？

```
1\.   Generate private key, public key and keystore to store the keys.

       /usr/local/packages/jdk16/bin/keytool -genkeypair -keyalg RSA -validity 300 -alias sslcert -keystore weblogic.jks

2\. Create self signed certificate

    /usr/local/packages/jdk16/bin/keytool -selfcert -keyalg RSA -alias sslcert -keystore weblogic.jks

3\.  Export the self signed certificate to a file

$ `/usr/local/packages/jdk16/bin/keytool -export -alias sslcert -rfc -file ohs.crt -keystore weblogic.jks`
      Enter keystore password: 
      Certificate stored in file <ohs.crt> 
```

当我尝试导入该证书时，它说

```
Error in installing the server certificate.
 No private key found. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T06:01:32.363

导出的证书不包含私钥。私钥保留在密钥库中。您似乎正在使用一种长期的方式来复制密钥库。只需将密钥库复制到服务器即可。事实上它应该已经*在*服务器上，否则你就有泄露私钥的风险。

# android - 撤消按钮操作？

> ID：15571816
> 
> 赞同：1
> 
> 时间：2013-03-22T13:40:37.840
> 
> 标签：android

我有一些按钮，当单击每个按钮时，按钮执行以下操作：

```
public TextView CurrentPosW(){

    TextView wordletters[] = {wordLetter1, wordLetter2, wordLetter3,
            wordLetter4, wordLetter5, wordLetter6, wordLetter7};

    TextView currentPos = null;
    for(int i=0; i<wordletters.length; i++){
    if(!wordletters[i].getText().toString().equals(("*")) && wordletters[i].getText().toString().equals("")){       
        currentPos = wordletters[i];
        return currentPos;
        }
    }
    return null; 
```

CurrentPos() 方法检查 7 个不同的文本视图并将文本设置为每次调用时的第一个空文本视图，并从 7 个按钮中的每一个调用。此外，一些按钮可能具有相同的文本。我希望能够通过单击文本视图来撤消此文本视图的操作。假设上面的第 5 个按钮设置了第 3 个 textview 的文本。所以当这个textview点击我想： -reinable按钮 -再次设置它可点击 -清空这个textview的文本所以基本上我想撤消按钮的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:46:29.977

如果你 setClickable(false) 那么你不能点击那个文本视图。因此，也许一个解决方案是添加一个撤消按钮并将您所做的操作存储在 ArrayList 或某种堆栈中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:30:44.773

要撤消此操作，您必须以某种方式保存最后一个操作。单击文本视图后，您必须知道上次为此视图执行了哪个操作。为此，您需要知道上次哪个按钮更新了这个特定的文本视图。

要存储状态，您可以做很多事情。例如，您可以存储上次更改的 textview 的 id 和按钮的 id，并将其存储为键值对。或者，您可以将顺序值设置为从 0 到 n 的 textview，并在一维数组中将数据存储为 textview 的分配数字作为索引和按钮作为值。或者您可以使用其他方法。但关键是你必须为特定的文本视图存储上次哪个按钮更改了它的信息。

如果您知道上面提到的值，那么您可以轻松撤消设置。

正如我所提到的，可能有很多其他方法可以做到这一点，因此您可以考虑其他方法。如果我误解了您的问题，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:07:23.603

**

## 更新并寻求其他帮助

** 我已经取得了一些进展，我使用了通过单击按钮将文本动态添加到 Textviews 的方法。我使用了类似序列的解决方案来解决上述问题，但没有按我的意愿工作。我制作了一个数组列表来对按钮点击的顺序进行排序：

```
ArrayList<TextView> letterList = new ArrayList<TextView>(); 
```

（是的，也有文本视图，但我称它们为按钮以将它们与其他字母组分开）。

然后，当使用此代码单击按钮时，我将相应的视图添加到数组列表中：

```
if(letterList.size() < 8 && !letterList.contains(randomLetter1))
        letterList.add(randomLetter1); 
```

现在在 textviews 我使用列表来获取按钮的视图（实际上是 textview）：

```
String wLetter = wordLetter1.getText().toString();
        if(wLetter.equals(letterList.get(0).toString()))
            letterList.get(0).setText(wLetter);
            letterList.get(0).setClickable(true);
            letterList.get(0).setEnabled(true);
            wordLetter1.setText(""); 
```

将以上所有 7 个文本视图和按钮相乘。这种方法可以正常工作，直到位置发生变化。我的意思是，例如，如果我按此顺序按下第 1、第 3 和第 6 个按钮，则这 3 个按钮单击会归档前 3 个文本视图。如果我现在单击第二个文本视图，则此文本视图上的字母返回按钮（实际上此按钮再次启用可点击）并且位置清除。现在，如果按下第 4 个按钮，例如，这将获得第 2 个清除位置，并且问题开始了。发生这种情况是因为创建的文本视图/按钮对永远不会更新。因此，如果第 3 个按钮与第一个 textview 链接，则如果在第二次单击第 3 个按钮时，此链接不会更改，该按钮现在占据了第 3 个 textview 的位置。但我希望更新此链接。我希望你能从上面的描述中理解这个问题。

那么您认为这可以通过改进上述解决方案来完成，还是必须走完全不同的道路？请尝试在您的答案中包含一些与我的代码相关的代码，以便更容易理解，因为我对没有任何相关研究并试图独自阅读和学习的开发很陌生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T21:46:53.630

**我找到的解决方案的另一个更新**

我找不到上述方法的解决方案（将单击的按钮序列保存到列表中），所以我尝试了不同的方法。这次我使用了按钮的可点击/启用属性，通过一种返回禁用/不可点击按钮的方法：

```
public List<TextView> getFreePos(){
TextView[] randomletters = {randomLetter1, randomLetter2, randomLetter3,
        randomLetter4, randomLetter5, randomLetter6, randomLetter7};
int i;
for( i=0; i<randomletters.length; i++){
if(randomletters[i].isClickable()== false){
    clickable.add(randomletters[i]);
}
}   
return clickable;
} 
```

然后在每个文本视图上使用它，我检查文本视图的文本是否等于第一个列表的对象：

```
String wLetter = wordLetter1.getText().toString();          
        if(isEmpty(wordLetter1)){
        getFreePos().clear();
        getFreePos();           
        if(clickable.get(0).getText().toString().equals(wLetter)){
            clickable.get(0).setText(wLetter);
            clickable.get(0).setClickable(true);
            clickable.get(0).setEnabled(true);
        }
        else if(clickable.get(1).getText().toString().equals(wLetter)){
            clickable.get(1).setText(wLetter);
            clickable.get(1).setClickable(true);
            clickable.get(1).setEnabled(true);
        }
        else if (clickable.get(2).getText().toString().equals(wLetter)){
            clickable.get(2).setText(wLetter);
            clickable.get(2).setClickable(true);
            clickable.get(2).setEnabled(true);
        }
        else if (clickable.get(3).getText().toString().equals(wLetter)){
            clickable.get(3).setText(wLetter);
            clickable.get(3).setClickable(true);
            clickable.get(3).setEnabled(true);
        }
        else if (clickable.get(4).getText().toString().equals(wLetter)){
            clickable.get(4).setText(wLetter);
            clickable.get(4).setClickable(true);
            clickable.get(4).setEnabled(true);
        }
        else if (clickable.get(5).getText().toString().equals(wLetter)){
            clickable.get(5).setText(wLetter);
            clickable.get(5).setClickable(true);
            clickable.get(5).setEnabled(true);
        }
        else if (clickable.get(6).getText().toString().equals(wLetter)){
            clickable.get(6).setText(wLetter);
            clickable.get(6).setClickable(true);
            clickable.get(6).setEnabled(true);
        }
        }
        wordLetter1.setText(""); 
```

这种方式工作正常，但我找不到避免所有这些 if 语句的方法（上面的代码乘以 7）。我尝试使用 for 循环，如下所示：

```
for (int i=0; i<clickable.size(); i++){
            if (wLetter.equals(clickable.get(i).getText().toString()))
        clickable.get(i).setText(wLetter);
        clickable.get(i).setEnabled(true);
        clickable.get(i).setClickable(true);
        wordLetter3.setText("");
        break; 
```

并且还使用 switch 案例而不是 if 语句，但两者都没有按预期工作。我遇到了一些索引越界错误（并非每次都发生），并且启用了错误按钮并更改为错误字母的问题。因此，总而言之，只有上述 if/else if 方式才能按预期工作。如果代码可以更短更紧凑，我会很好。有什么想法/想法吗？

# sql - SQL在一行上显示多条记录

> ID：15571819
> 
> 赞同：1
> 
> 时间：2013-03-22T13:40:43.633
> 
> 标签：sql

我有一个查询，它将显示所有选定的记录，除了 MAX 记录（每个查询最多可以有 5 条记录）。但是，它显示在单独的行上。如何在一行中显示结果？

当前数据：

```
John Smith 
Jack Smith
Gerald Smith 
```

一行中的所需数据（或在单独的字段中但不是多行）：

约翰·史密斯; 杰克史密斯；杰拉德·史密斯

SQL 语句：

```
 SELECT distinct /*all existing records */
 rtrim(ltrim(pn.sFirstName + ' ' + pn.uLastName)) as record1,
 '' as record2,
 ''  as record3,
 '' as record4,
 '' as record5
 FROM tenant t (nolock)
 INNER JOIN person pn (nolock) on pn.hmy = t.person
 WHERE pn.hmy <>
 (SELECT MAX(pn.hmy) 
 FROM tenant t (nolock)
 INNER JOIN person pn (nolock) on pn.hmy = t.person
 WHERE t.scode = '111111'
 )and t.scode = '111111' 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:59:53.267

看起来您正在使用 SQL Server。如果您使用的是 2005 或更高版本，则可以使用以下命令执行此操作`row_number()`：

```
SELECT (case when seqnum = 2 then rtrim(ltrim(max(pn.sFirstName+ ' ' + pn.uLastName)))  as record1,
       (case when seqnum = 3 then rtrim(ltrim(max(pn.sFirstName+ ' ' + pn.uLastName)))  as record2,
       (case when seqnum = 4 then rtrim(ltrim(max(pn.sFirstName+ ' ' + pn.uLastName)))  as record3,
       (case when seqnum = 5 then rtrim(ltrim(max(pn.sFirstName+ ' ' + pn.uLastName)))  as record4,
       (case when seqnum = 6 then rtrim(ltrim(max(pn.sFirstName+ ' ' + pn.uLastName)))  as record5
 FROM (select pn.*,
              ROW_NUMBER() over (partition by t.scode order by pn.hmy desc) as seqnum
       from tenant t (nolock) INNER JOIN
            person pn (nolock)
            on pn.hmy = t.person
       where t.scode = '111111'
      ) pn 
```

内部查询根据 分配一个序号`pn.hmy`，最大值为 1。外部查询汇总数据，使用条件选择第二个到第六个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:47:21.770

您需要一个变量来保存该信息，例如

```
declare @result;
set @result = '';

select @result = @result + ',' + rtrim(ltrim(pn.sFirstName + ' ' + pn.uLastName))  
from ..... 

select substring(@result, 0, len(@result)); 
```

# php - 为什么codeigniter会话经常过期？用户在现场也很活跃

> ID：15571824
> 
> 赞同：1
> 
> 时间：2013-03-22T13:40:58.367
> 
> 标签：php, codeigniter, session

我正在为我的应用程序使用 codeigniter。发展。

这些是会话设置。我正在使用数据库会话。

```
$config['sess_cookie_name']= 'ci_session';
$config['sess_expiration']= 7200;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']= 'ci_sessions';
$config['sess_match_ip']= FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

我没有使用 AJAX 或动态资源加载会话库。我还检查了会话数据，所有数据都保存在数据库中。

这在本地主机上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:45:14.507

默认情况下，它每 2 小时 (7200) 过期一次，但在某些情况下检查您的应用程序中是否会销毁会话。如果您想增加小时数，请在 $config['sess_expiration'] 中写入大于 7200 的数字。例子：

```
$config['sess_expiration']= 18000; //5 hours 
```

如果您希望会话不会过期，请写入：

```
$config['sess_expiration']= 0; 
```

# html - Firefox中闪烁/闪烁的图像

> ID：15571825
> 
> 赞同：1
> 
> 时间：2013-03-22T13:41:05.227
> 
> 标签：html, css, firefox

当我在 Firefox 中鼠标悬停时，我的图像闪烁。它们在 chrome 和 safari 上运行良好。

我想我已经将它缩小到包装图像的标签，但我不知道为什么它会导致这个问题。（左图周围没有标签，这很好，但右图有，而且还在闪烁。）

完整的 HTML： http: [//mf.atlantadesigngroup.com/firefox.php](http://mf.atlantadesigngroup.com/firefox.php)

相关HTML：

```
<div id="portfolio">
  <div class="portfolio"> <img src="images/portfolio/bw/uploaded1.jpg" class="portfolioImg"></div>
  <div class="portfolio"> <a href="firefox.php"> <img src="images/portfolio/bw/uploaded4.jpg" class="portfolioImg"> </a> </div>
</div> 
```

完整的 CSS： http: [//mf.atlantadesigngroup.com/css/mignonFowler.css](http://mf.atlantadesigngroup.com/css/mignonFowler.css)

相关CSS：

```
/*portfolio page*/
#portfolio{
    display: table;
    table-layout: fixed;
    width: 980px;
    padding: 10px;
}

.portfolio{
    display: table-cell;
    height:440px;
    border: #000000 solid 10px;
    overflow: hidden;
    position: relative;
}

.portfolioImg{
    height: 100%;
}

.portfolio div{
    height: 100px;
    width: 100%;
    position: relative;
    top: 100px;
    background-image: url('../images/captionBg.png');
    background-position: bottom;
    background-repeat: repeat-x;
}

.portfolio div p{
    display: block;
    width: 100%;
    padding-top: 70px;
    color: #c9b52e;
    text-align: center;
} 
```

# android - 应用程序在启动时挂起

> ID：15571826
> 
> 赞同：1
> 
> 时间：2013-03-22T13:41:15.350
> 
> 标签：android, performance, bitmap, load, android-asynctask

我有一个游戏应用程序需要很长时间才能加载。我以前在说明我的游戏时没有滞后，但现在是这样，我怀疑有些东西挂了。是否有可能由于我加载图像的方式而挂起？这是我所拥有的：

在 onCreate() 我有：

```
v = new SView(this);                      // Creates my new SurfaceView
a = new Accelerator();                    // Adds the accelerometer
new loadPhotos().execute("");             // Initiates the AsyncTask posted below
new handleStuff().execute("");            // starts the generation of the game map
startTime = System.currentTimeMillis();   // Used to generate time lasted
setContentView(v);                        // Sets contentView to the SurfaceView

public class loadPhotos extends AsyncTask<String, Integer, String>
{
@Override

protected String doInBackground(String... arg0) {

    return null;
}

@Override
protected void onPreExecute() {
    super.onPreExecute();
    Log.d(null, "!!!!!!!!!!!!!----------Starting Load-----------!!!!!!!!!1");
    player = BitmapFactory.decodeResource(getResources(), R.drawable.player);
    playerOpaque = BitmapFactory.decodeResource(getResources(), R.drawable.player_opaque);
    livesBM = BitmapFactory.decodeResource(getResources(), R.drawable.lives);
    playerMissile = BitmapFactory.decodeResource(getResources(), R.drawable.player_missle);
    missileButton = BitmapFactory.decodeResource(getResources(), R.drawable.missile_button);
    playerBullet = BitmapFactory.decodeResource(getResources(), R.drawable.bullet);
    enemyBullet = BitmapFactory.decodeResource(getResources(), R.drawable.enemy_bullet);
    enemyMissile = BitmapFactory.decodeResource(getResources(), R.drawable.enemy_missle);
    enemy = BitmapFactory.decodeResource(getResources(), R.drawable.enemy);
    explosionBig = BitmapFactory.decodeResource(getResources(), R.drawable.explosion);
    lastESpawn = System.currentTimeMillis();
    background = BitmapFactory.decodeResource(getResources(), R.drawable.background_clearsky);
    cloudBM1 = BitmapFactory.decodeResource(getResources(), R.drawable.cloud1);
    cloudBM2 = BitmapFactory.decodeResource(getResources(), R.drawable.cloud2);
    Log.d(null, "!!!!!!!!!!!!!----------Ending Load-----------!!!!!!!!!1");
} 
```

}

这是我的 LogCat

```
03-22 10:03:50.546: D/(1220): !!!!!!!!!!!!!----------Starting Load-----------!!!!!!!!!1
03-22 10:03:50.596: D/(1220): !!!!!!!!!!!!!----------Ending Load-----------!!!!!!!!!1
03-22 10:03:50.616: I/Adreno200-EGLSUB(1220): <ConfigWindowMatch:2087>: Format RGBA_8888.
03-22 10:03:50.646: W/SurfaceView(1220): CHECK surface infomation creating=false formatChanged=false sizeChanged=false visible=false visibleChanged=true surfaceChanged=true realSizeChanged=false redrawNeeded=true left=false top=false
03-22 10:03:50.656: D/(1220): !!!!!!!!!!!!!----------Starting Load-----------!!!!!!!!!1
03-22 10:03:50.706: D/dalvikvm(1220): GC_CONCURRENT freed 2361K, 14% free 22198K/25543K, paused 11ms+2ms, total 28ms
03-22 10:03:50.726: D/(1220): !!!!!!!!!!!!!----------Ending Load-----------!!!!!!!!!1
03-22 10:03:50.746: I/Adreno200-EGLSUB(1220): <ConfigWindowMatch:2087>: Format RGBA_8888.
03-22 10:04:18.096: D/dalvikvm(1220): GC_FOR_ALLOC freed 4756K, 28% free 20236K/27975K, paused 16ms, total 18ms
03-22 10:04:18.096: I/dalvikvm-heap(1220): Grow heap (frag case) to 32.131MB for 3686416-byte allocation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:50:15.993

尝试如下加载图像在图像视图中 iv.setImageResource(R.drawable.imagename);

这比通过decoderresource加载要快得多。你的每一个图片加载都有这样的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:48:33.723

您正试图通过您无法访问的方式访问您的`UI`资源`doInBackground`。这需要 in`onPostExecute()`或其他`Async`方法，但我什至不确定你想要/需要一个`AsyncTask`。您可以设置`images`使用[ImageView 方法](http://developer.android.com/reference/android/widget/ImageView.html)并将它们加载到您的方法中`Activity`

# python-3.x - 子进程似乎结束，但不释放文件句柄

> ID：15571828
> 
> 赞同：1
> 
> 时间：2013-03-22T13:41:34.077
> 
> 标签：python-3.x, subprocess, signing

在 Windows 8、Python 3.3 下运行，我生成了 3 个进程，它们应该一个接一个地运行：首先，签署一个可执行文件，其次，使用 Inno Setup 构建一个工具包（它涉及第一步中的可执行文件），最后，使用第二步的输出来签名。但是，从 ti 时间开始，我得到了似乎是一种竞争条件，其中签名工具抱怨它无法签署可执行文件。在我看来，第二个进程并没有以某种方式（或操作系统）释放文件句柄......在查找错误代码之后，虽然它应该完成（我正在使用 process.communicate() 来确保这一点） . 我也怀疑存在竞争条件，因为使用 time.sleep() 似乎可以解决问题。

第二个进程是否有可能以某种方式分离并在后台运行？但如果是这样，为什么我仍然可以始终在我的日志文件中看到正确登录的操作（例如，第一次唱歌输出、构建、第二次签名（无论它是成功还是不成功））？我从通信中获得输出的事实不应该意味着所有资源（包括文件句柄）都已被释放吗？这是代码：

```
def do_build():
'''
Prepare the kit.
'''
    global kit_file 
    kit_file = ''.join([OUTPUT_FILENAME, '_', version]) # do not add '.exe', as Inno does it during build
    DESCR = 'Execute Build'
    logf.write(BEGIN + DESCR + SEP2)

    def run_command(c, ex):
        with subprocess.Popen(c, stdout = subprocess.PIPE, stderr = subprocess.PIPE, executable = ex) as proc:  
            stdout_data, stderr_data = proc.communicate()
            logf.write(str(stdout_data, 'cp1252'))   
        if proc.returncode != 0:    # log errors if needed
            logf.write(str(stderr_data, 'cp1252'))
            sys.exit()       

    sign_exe = [SIGNCODE, '-cn', TTT, '-n', KIT_TYPE2.upper(), '-i', URL, '-t', TSURL]
    sign_kit = sign_exe[:]  # make copy
    sign_exe.append(os.sep.join([PDIR, DEPLOYMENT, EXECUTABLE]))  # sign the executable
    run_command(sign_exe, os.sep.join([PDIR, SIGNCODE]))

    compile = [ISCC, ''.join(['/O', OUTPUT_DIR]), ''.join(['/F', kit_file]), os.sep.join([PDIR, ISS_FILE])]   # compile using the ISS script
    run_command(compile, os.sep.join([ISSC_PATH, ISCC]))

    # time.sleep(something) here seems to save the day...

    sign_kit.append(os.sep.join([PDIR, ''.join([kit_file, '.exe'])]))   # sign the kit, don't forget '.exe'
    run_command(sign_kit, os.sep.join([PDIR, SIGNCODE]))
    logf.write(END + DESCR + SEP2) 
```

我正在使用 InnoSetup 5、命令行工具、iscc.exe、FWIW。

对这种行为有什么解释吗？我看到的唯一解决方法是在尝试最后一次签名之前使用 os.access(file, os.W_OK) 。

我没有运行防病毒软件，也想不出其他任何可能干扰签名过程的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:49:21.267

事实证明，我在错误的方向寻找罪魁祸首。

经过更多研究 - 并且未能找出锁定我的文件的进程（使用 Process Explorer，直接来自我的脚本的 Handle 工具 LockHunter） - 我找到了足够的轶事证据来确定 Windows Defender 是“罪犯”。显然，它在 Windows 8 中集成得非常好，以至于您完全忘记了它的实时保护模块是在后台运行的。有时，一旦创建了我的可执行文件，它就会将其锁定很短的时间，这足以让我随后尝试对其进行签名......失败。

我为我最初的错误假设道歉。

# ruby-on-rails - 延迟作业：将未保存的 ActiveRecord 对象应用于其他对象

> ID：15571829
> 
> 赞同：1
> 
> 时间：2013-03-22T13:41:36.477
> 
> 标签：ruby-on-rails, activerecord, delayed-job

我正在尝试将未保存的 ActiveRecord 对象应用于已保存对象`Thing`的数组`Person`。

```
person has_many :things 
```

但延迟作业不适用于未保存的 ActiveRecord 模型。我知道，因为他们告诉我：

> DJ 不适用于未保存的 ActiveRecord 模型。

[https://github.com/collectiveidea/delayed_job/wiki/Common-problems#wiki-DJ_doesnt_deserialize_an_unsaved_ActiveRecord_model](https://github.com/collectiveidea/delayed_job/wiki/Common-problems#wiki-DJ_doesnt_deserialize_an_unsaved_ActiveRecord_model)

...所以我无法绕过错误：

```
{ActiveRecord::RecordNotFound, class: Thing , primary key: 
```

我一直在尝试一些策略来解决它：

[1) 从这里](https://github.com/collectiveidea/delayed_job/blob/master/lib/delayed/serialization/active_record.rb)覆盖 self.yaml_new 。听起来是个可怕的主意。

2）覆盖`Thing.find`以从未找到中恢复并仅水合未保存的对象。这是一个比#1更糟糕的主意

3）先保存`Thing`到数据库。坏主意，因为我们将`Thing`在数据库中有一个孤儿，作业必须清理（`Thing`没有附加的 s 真的不存在`Person`），作业的调用者必须知道保存第`Thing`一个，我们将拥有覆盖验证检查`Person`。可怕。

4) 创建`Thing.to_open_struct`将 AR 详细信息转储到 OpenStruct 以进行 DJ 序列化的方法。有点乱 需要使该方法与任何迁移保持同步。不理想，但这是我迄今为止最好的。

有任何想法吗？我没有设置 DJ 序列化未保存的`Thing`我只是想要一个干净的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T00:47:27.400

一个想法是创建一个名为 UnsavedThing 的新表/模型，它没有任何关联，但与 Thing 基本相同。

DJ 找到一个 UnsavedThing，用它调用 Thing.new，用它做一些事情，调用 Thing.save，然后调用 UnsavedThing.destroy。

不是那么优雅，但替代品也不是很好。

你不能先保存东西的原因是什么？如果您可以提供更多关于类如何交互的上下文以及何时可以保存 Thing 的标准，则可能会有更好的解决方案。

# ios - uiscrollview 在 imageview 中更改图像

> ID：15571830
> 
> 赞同：1
> 
> 时间：2013-03-22T13:41:40.843
> 
> 标签：ios, image, sdk, uiscrollview, uiimageview

我有一个 10 页的滚动视图，最后 6 页我有一个 ImageView。

当我点击一个按钮时，我的屏幕会跳转到正确的 ImageView。但是如何在按钮单击事件上更改此 ImageView 上的图像？

有任何想法吗？

`ImageView1.image = [UIImage imageNamed:@"mhb2-1.jgp" ];`

什么都不做

我在 ViewController.h 中创建 ImageView

并在“视图确实加载”中：

```
if (pageNumber == 6) {
        ImageView1 = [[UIImageView alloc] initWithFrame:CGRectMake( 10.0, 50.0, 300.0, 300.0)];
        [ImageView1 setImage :[UIImage imageNamed:@"2.jpg"]];
        [self.view addSubview:ImageView1];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:49:54.283

给你的按钮标签，int selectedButtonTag; 当按钮被点击时使用 selectedButtonTag=button.Tag;

```
if(selectedButtonTag==2){
        [ImageView1 setImage :[UIImage imageNamed:@"2.jpg"]];
}
if(selectedButtonTag==3){
        [ImageView1 setImage :[UIImage imageNamed:@"3.jpg"]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:47:07.667

你不应该这样做：`[scrollView addSubView:ImageView1];`??

# c# - 在集合中公开的模型中实现 INotifyPropertyChanged

> ID：15571831
> 
> 赞同：1
> 
> 时间：2013-03-22T13:41:43.180
> 
> 标签：c#, wpf, mvvm, mvvm-light

我在 ObservableCollection 中公开了一个 Model 类，该类使用 DataTemplate 设计，其中处理 Model 的属性绑定。

当我在 Model 类中手动实现 INotifyPropertyChanged 接口时， ObservableCollection 中的绑定属性不会自动更改，但只有在重新渲染集合之后才会更改。

当我从 ViewModelBase（一个 MVVM Light 工具包类）继承并使用 RasiePropertyChanged 方法时，绑定的属性会自动更改，而无需刷新整个集合。

除了实现 INotifyPropertyChanged 接口之外，ViewModelBase 做了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T13:47:42.533

Well `ViewModelBase`in MVVM Light Toolkit 为您提供了一些额外的帮助程序，例如`IsInDesignMode`和`MessengerInstance`

随着实施`INotifyPropertyChanged`

现在在一个模型中，如果您只想实现`INotifyPropertyChanged`而不是尝试自己做，只需从`ObservableObject`

`ObservableObject`也来自 MVVM Light 工具包，它只执行 INPC 没有修剪，使其非常适合模型。

如果您查看`ViewModelBase`Visual Studio 中的定义，它会继承`ObservableObject`自身

# actionscript-3 - 按钮内的影片剪辑

> ID：15571838
> 
> 赞同：-1
> 
> 时间：2013-03-22T13:42:04.407
> 
> 标签：actionscript-3, button, movieclip, flash-cs6

我正在使用 AS 3.0，并且我有一个按钮 (mcbtn1)，里面有一个影片剪辑，当您将鼠标悬停在播放动画并停止时，它会播放动画，然后是另一个我想转到场景 2 的按钮

```
function gotoCenter(event:MouseEvent):void {
MovieClip(root).btn_K.gotoAndStop(1, "Scene");
}
mcbtn1.addEventListener(MouseEvent.CLICK, gotoCenter); 
```

这是我正在使用的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:49:42.780

我猜您在访问该按钮内的影片剪辑时遇到了错误。它不适用于将影片剪辑放在按钮内。最好的解决方案是使用movieclip（作为按钮的替代品）。然后，您可以使用 yourMovieClip.buttonMode = true 来访问按钮属性。

# wcf - 从 void 类型的 WCF 操作发送空肥皂体响应

> ID：15571840
> 
> 赞同：0
> 
> 时间：2013-03-22T13:42:08.953
> 
> 标签：wcf, response

我们正在使用 .NET WCF 服务项目重新创建基于第三方 WDSL 的 Web 服务。然而，客户期待所有操作的响应，即使它们是 void 类型。空正文将用于指示操作成功完成。

响应应如下所示：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body/>
</s:Envelope> 
```

问题是我们新创建的 wcf 服务没有响应主体，即使我们使用 SOAP 1.1 消息格式和基本 http 绑定抛出错误异常。

有没有办法始终 1\. 发送响应正文，2\. 使用 SOAP 1.1 发送故障正文？我们正在使用 SoapUI 来测试服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:29:50.677

我们通过使用 svcutil.exe 实用程序和现有 WDSL 文件生成接口代码来重新创建现有 Web 服务。它生成的接口代码确实具有将所有操作定义转换为单向方法的属性。

这使得只要服务的传输级别没有错误，所有方法都会返回 http 202 接受的响应。

我们只是从我们新的 web 服务代码隐藏文件中引用了接口并实现了所有方法，而实际上并不知道 IsOneWay 属性的含义。

```
[System.ServiceModel.OperationContractAttribute(IsOneWay = true, Action = "Case_New")] 
```

将定义转换为 IsOneWay=false 实际上完全按照我们希望的方式更改了服务的行为。

```
[System.ServiceModel.OperationContractAttribute(IsOneWay = false, Action = "Case_New")] 
```

我们从[WCF 和确认中得到了答案 - 我是否需要向客户发回“OK 得到它”？](https://stackoverflow.com/questions/226953/wcf-and-confirmations-do-i-need-to-send-back-a-ok-got-it-to-client)

# python - matplotlib 误差线连续线图

> ID：15571843
> 
> 赞同：1
> 
> 时间：2013-03-22T13:42:16.163
> 
> 标签：python, matplotlib, stderr

我在 matplotlib 中使用错误栏遇到了这个有趣的问题。我有两个列表：“迭代”，它是从 0 到 999 的整数值列表；和“平均”，它是 1000 大小的列表，具有真正的负值。

如果我没有指定“yerr”属性，我会得到：

*误差条（迭代，平均）*

![图像1](../Images/6432b5671fa384482a2ecbc2780bf7c0.png)

但是，如果我指定了 yerr 属性，但设置为 0，我会得到以下信息：

*误差条（迭代，平均，yerr = 0）*

![img2](../Images/92ba809cf9ad14487a92b4c347d79b50.png)

在我看来，两张图片应该是一样的，但第二张是由小的水平线组成的，而第一张看起来是连续的。

当我将数组作为 yerr 传递时，问题就出现了（大小：1000，所有值都设置为 0，除了一些真正的标准错误值，其中 index%50==0，以免图像过度拥挤）。

*误差条（迭代，平均，yerr=stderr）*

我想获得一个主线连续的图像（如第一张图像），但我得到的是一个凌乱的图像，如第二张图像。我已经尝试了很多东西，比如修改线型参数，但我仍然不断得到类似第一张图片的东西（每 50 步间隔都有错误栏）

难道我做错了什么？有没有可能做我想做的事。

**更新 1**

正如大卫在评论中所说，出现水平线是因为标准错误的默认形状是 0。我认为值 0 表示没有错误栏。所以我只需要避免在我将其设置为 0 的地方绘制误差线（误差线仅在 50、100、150、200、250...1000 中）。

**更新 2（并已解决）**

在这里添加大卫提出的解决方案：

```
# plot all points without error bars
plot(iterations, average)
# plot errorbars for every 50th point
errorbar(iterations[::50], average[::50], yerr=stderr[::50], linestyle='None') 
```

我刚刚添加了 linestyle='None' 以避免在每个 yerr 条之间绘制线。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:48:02.250

好吧，你要求错误栏，你得到了它们。相反，如果您未`yerr`在参数列表中指定，则[错误栏的文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.errorbar)指出“如果 yerr 不是无，则绘制垂直错误栏”。

我不明白 using`errorbar`和 setting背后的目的`yerr=0`，但`yerr=0`错误栏显示为小的水平线，因为垂直延伸为零的错误栏的样式。

如果您想指示许多数据点的错误，最好使用阴影背景来指示错误区域。这可以通过[`fill_between`函数来​​实现](http://matplotlib.org/1.2.0/api/pyplot_api.html#matplotlib.pyplot.fill_between)

编辑：使用评论中的精致问题，绘图代码可以是

```
# plot all points without error bars
plot(iterations, average)
# plot errorbars for every 50th point
errorbar(iterations[::50], average[::50], yerr=error[::50]) 
```

# dom - 使用 Selenium 自动点击 JavaScript 链接

> ID：15571844
> 
> 赞同：2
> 
> 时间：2013-03-22T13:42:22.547
> 
> 标签：dom, xpath, selenium, automation, selenium-ide

我正在尝试自动单击在网页上异步运行的数据库的第 2 页。使用 Xpath 时：

```
//id('standardView')/x:div[3]/x:div[3]/x:a[1] 
```

我收到以下错误：

```
[error] Invalid xpath [2]: //id('rightMenu')/x:div[3]/x:div[3]/x:a[1] 
```

所以我尝试使用 DOM 来查找它的路径，下面的代码显示了使用 Firebug 运行时被推送的实际链接......

```
 main = document.getElementById("rightMenu"); mainCont = main.contentDocument;
   paging = mainCont.getElementsByTagName("a"); pageTwo = paging[0]; 
```

Firebug 将显示：

```
<a href="javascript:chgPage(2);"> 
```

但是 Selenium 抛出了这个错误：

```
[error] Unexpected Exception: fileName -> chrome://selenium-ide/content/selenium-
core/scripts/selenium-api.js, lineNumber -> 2535, columnNumber -> 45 
```

并且只是简单地记录动作并没有发现按钮被按下。我似乎找不到解决方法。有什么见解吗朋友们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:42:00.193

有点奇怪的xpath。尝试使用`//*[@id='standardView']/div[3]/div[3]/a[1]`

但尽量使用没有索引且尽可能短的选择器

`//a[@href='javascript:chgPage(2);']`

或者

`//*[@id='standardView']//a[@href='javascript:chgPage(2);']`

这些也可以工作（如果它们是唯一的，请使用 firepath plugin for firebug 进行检查）

# javascript - 如何使文本字段适合 Dynamics CRM 2011

> ID：15571845
> 
> 赞同：1
> 
> 时间：2013-03-22T13:42:28.083
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm, crm, microsoft-dynamics

有谁知道如何在 Dynamics CRM 2011 中缩小文本字段的大小？我试图在网上找到解决方案，但似乎不可能。

现在，有一个设置可以让我调整文本框的大小，`document.window`但它太大了。

我想根据字段的长度来制作它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:14:50.923

如果表单和控件的设置不够，您可以考虑创建自己的 Web 资源，其中包含您可以完全控制的 HTML 文档。然后，您可以使用 IFRAME 将其塞入其中。但这通常是很多工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:15:56.087

默认情况下，表单编辑器将使用文本字段可用的最大空间量，并且没有用于指定确切大小的“CRM 支持”方法。您可以在表单上添加分隔符以占用一些可用空间，但这必须手动完成，而不是基于字段的文本大小。

不支持的方法是在 DOM 中查找文本框并在加载期间通过 javascript/Jquery 对其进行编辑。

# javascript - mootools 获取没有 ID 的元素的位置

> ID：15571846
> 
> 赞同：2
> 
> 时间：2013-03-22T13:42:33.570
> 
> 标签：javascript, dom, mootools

除了一些基本的 jQuery 东西外，我对整个 Javascript 都比较陌生。

最近我接手了一个使用 mootools 的小型本地项目，但我陷入了困境。

我有几个页面具有相对简单的 dom 结构和存储在数据库中的内容。每个页面上的第一个元素要么是一个 div，要么是一个具有固定宽度和高度的段落。

所述元素有三个变体，每个变体的高度不同，这意味着我们在每个页面上都有其中一个

```
<div class="header1"><img ...></div>
<p class="header2"><img ...></p>
<p class="header3"><img ...></p> 
```

每一个后面都有几个包含文本或图像的段落。

我的问题：我必须在页面的第一个元素（div 或 p）和以下内容之间放置一个带有打印图标的小 div，但我不允许更改生成此页面的任何代码。

想法是使用 mootools（无论如何都会加载）将 div 放置在第一个元素下方的绝对位置上。

这可以使用 jQuery 轻松完成，但我必须使用 mootools 加上元素没有 ID。

有没有什么简单的方法可以获取或者在页面加载时的位置，然后在它的正下方放置 (position: absolute;) 一个 div？

到目前为止，我有这个（很差），它用“header1”类记录元素

```
window.addEvent('domready', function() {
$$('.header1').each(function(element){
    console.log(element);
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:48:03.930

[`element.getPosition()`](http://mootools.net/docs/core/Element/Element.Dimensions#Element%3agetPosition)获取元素的 x 和 y 位置，这应该允许您在某处创建一个新元素。`getPosition()`可能在 MooTools More 中，具体取决于您使用的版本。

在适当的位置向 DOM 添加新元素而无需复杂的定位可能会更容易，但这取决于您的 DOM。

* * *

从评论中判断您的反应，如果您只是想通过 id 以外的其他内容来匹配文档中的单个元素，这`document.getElement()`就是您所需要的，它的作用与 大致相同`$$()`，但返回第一个匹配项，或者`null`如果没有匹配项则返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:48:39.457

是的当然。问题是如果元素没有 ID，如何获取你想要的元素。这和 jQuery 一样难，也和 jQuery 一样简单。

看看 mootools 的文档[`Element.getPosition()`](http://mootools.net/docs/core/Element/Element.Dimensions#Element%3agetPosition)。

# initialization - 自定义实例变量并使用 PetitParser 进行初始化

> ID：15571855
> 
> 赞同：3
> 
> 时间：2013-03-22T13:43:08.257
> 
> 标签：initialization, instance-variables, pharo, petitparser

据我所知，*PetitParser*使用同名的生产方法初始化每个实例变量。应该怎么做，例如添加一个自定义实例变量并在`initialize`方法中对其进行初始化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:44:16.070

您可以覆盖子类中的类端方法`#ignoredNames`，以添加您自己的 PetitParser 不涉及的实例变量：

```
PPCompositeParser class>>#ignoredNames
    "Answer a collection of instance-variables that should 
     not be automatically initialized with productions, but
     that are used internal to the composite parser."

     ^ PPCompositeParser allInstVarNames 
```

# jsp - 它与jsp中使用的bean有关

> ID：15571857
> 
> 赞同：-4
> 
> 时间：2013-03-22T13:43:16.250
> 
> 标签：jsp, javabeans

`<jsp:useBean name="beanname" property="propertyname"/>`如何访问 bean 属性的值。我们可以通过使用上述语法来做到这一点，但我想增加这个属性的值如何可能请帮助我。没有它我无法完成我的项目

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T13:50:54.827

如果我是正确的，你有 Bean 类为这个类提供包描述 ex。exp.DemoBean。在 jsp 标签中。在您的 bean 类中使用此名称值作为对象并调用方法之后。

# cordova - 使用 Phonegap 的 IBM Worklight 响应式 Web 应用程序

> ID：15571858
> 
> 赞同：0
> 
> 时间：2013-03-22T13:43:19.133
> 
> 标签：cordova, web-applications, ibm-mobilefirst

我正在尝试使用 Phonegap(cordova) 和 IBM Worklight 制作示例混合移动应用程序。我已将 iPad 和 iPhone 添加为目标设备。

应用程序内的 Web 内容将是响应式的，使用 CSS @media 查询。

我面临的问题是，当我在 iPad/iPhone 上启动应用程序时，它无法识别我编写的媒体查询。我尝试使用设备方向方法和最大宽度方法切换 CSS。仍然没有成功。

设备宽度方法中使用的代码是

```
/* Portrait */
@media screen and (max-width: 768px) {
  /* Portrait styles since iPad in portrait has device width 768px */

/* Landscape */
@media screen and (max-width: 1024px) {
    /* Landscape styles since iPad in landscape has device width 1024px  */
} 
```

我尝试了定位

```
/* Portrait */
@media screen and (orientation:portrait) {
  /* Portrait styles */

/* Landscape */
@media screen and (orientation:landscape) {
    /* Landscape styles */
} 
```

任何人都可以建议如何在 IBM Worklight 中制作响应式 webapp，phonegap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:48:29.803

尝试这个：

```
/* iPhone (landscape) */
@media only screen and (min-width : 321px) {
    /* Your style here */
}

/* iPhone (portrait) */
@media only screen and (max-width : 320px) {
    /* Your style here */
}

/* iPad (landscape) */
@media only screen  and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : landscape) {
    /* Your style here */
}

/* iPad (portrait) */
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : portrait) {
    /* Your style here */
} 
```

# ios - 使用 AIR for iOs 是否可以使用 iOs 原生“数据保护”？

> ID：15571859
> 
> 赞同：1
> 
> 时间：2013-03-22T13:43:18.983
> 
> 标签：ios, encryption, air, adobe, air-native-extension

我想使用 Adob​​e AIR 在我们的企业中开发和部署自定义 iOs 应用程序 - 但我有一个要求，我必须使用 iOs 原生“数据保护”来加密本地存储的任何数据。

我了解通过设置密码在设备上全局启用“数据保护”，然后各个应用程序必须选择加入才能使用该功能；通常这种“选择加入”是通过调用 Objective-C 中的数据保护类来完成的。所以我的问题是，AIR-for-iOs 应用程序是否可以使用本机数据保护，因为它是用不同的语言（在我的例子中是 Flex / ActionScript）开发的，而且我无法访问 Objective-C 代码?

我的第一个猜测是我可能会设置一个应用程序级别的标志（在 AIR 开发中或在生成 .ipa 文件之后），它将自动对任何本地数据应用数据保护。那样就好了。

我的第二个猜测是，我可以开发和调用一个 AIR Native Extension，它的唯一功能是使用本机数据保护类进行加密和解密。这不太可取，因为我不是 Objective-C / XCode 开发人员。

我熟悉 AIR 自己的加密 API；但 iOS 原生数据保护是我们企业目前唯一接受的加密方法。所以如果我不能让它工作，我将不得不放弃 AIR 进行 iOs 开发。

# javascript - 仅在调用 jquery 覆盖时如何执行 javascript？

> ID：15571865
> 
> 赞同：0
> 
> 时间：2013-03-22T13:43:31.260
> 
> 标签：javascript, jquery, scrollbar, overlay

我在 aspx 页面上设置了一个简单的 jquery 覆盖。以下是相关代码：

```
<img rel="#1208" src="/images/testsmall.png" />
<div class="simple_overlay" id="1208"><img src="/images/testlarge.png" /></div> 
```

使用 jquery 库：

```
http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js 
```

和脚本：

```
<script>
    $(document).ready(function() {
    $("img[rel]").overlay();
    });
</script> 
```

在页面本身上有一个 javascript 滚动条，用于此代码所在的部分：

```
<head>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#scrollbar2').tinyscrollbar();
        });
    </script>
</head> 
```

问题是，我只想在调用覆盖时禁用滚动条。对 jquery 和 javascript 来说相当新，虽然我知道如何使用 javascript 的 hide() 方法隐藏滚动条，但我不确定如何将其编码为仅在调用叠加层时调用。那，或者如果有比 hide() 方法更好的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:55:27.127

您可以隐藏/禁用覆盖的滚动条 onLoad()。然后覆盖层的 onClose() 可以显示显示/启用滚动条。

查看 onLoad() 和 onClose() 的文档以了解您的叠加层。

[http://jquerytools.org/documentation/overlay/](http://jquerytools.org/documentation/overlay/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:56:51.873

我不知道是否有比调用`.hide()`滚动条更好的方法，但是您可以使用叠加层的`onLoad`and`onClose`事件来控制它应该何时发生：

```
$("img[rel]").overlay({
    onLoad: function(event) {
        // hide the scrollbar
    },
    onClose: function(event) {
        // show the scrollbar
    }
}); 
```

关于覆盖的选项、事件和方法的更多信息可以在[jQuery 工具覆盖文档](http://jquerytools.org/documentation/overlay/index.html#events)中找到。可以在[此处](http://jquerytools.org/documentation/scripting.html#events)找到有关使用 jQuery 工具的事件的更多一般信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:45:01.233

试试这个代码：

```
$.getScript("ajax/test.js", function(data, textStatus, jqxhr) {
console.log(data); //data returned
console.log(textStatus); //success
console.log(jqxhr.status); //200
console.log('Load was performed.');
}); 
```

应该做的伎俩。看看这个：[http ://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:55:08.227

```
 $(document).ready(function () {
            var callBack = function(){
                $('#scrollbar2').tinyscrollbar();
            };
            $("img[rel]").overlay(callBack);
            // then call this callback function inside overlay function
        }); 
```

# flash - 网格上的涟漪效应 - 知道他们是如何做到的吗？

> ID：15571874
> 
> 赞同：0
> 
> 时间：2013-03-22T13:44:12.680
> 
> 标签：flash, 2d-games

我只是想知道这个应用程序如何实现这种特殊的连锁反应：

[http://img44.imageshack.us/img44/6182/music.swf](http://img44.imageshack.us/img44/6182/music.swf)

这是您可能玩过的 Tone Matrix 游戏。没有实现，只是想知道这里的算法。我有一些理论，但我想知道你的！对不起，如果这是一个可怕的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:50:25.393

我可以看到这样的系统的两种方法。两者（当然）都涉及将更新屏幕的计时器或 enter_frame 侦听器。

1）基于“邻居”的更新：每次新的更新，每个节点都会询问邻居是否有“波”进入（因此存储波的方向和“强度”）。在被激活后，节点使用一些衰减函数慢慢地再次变为非活动状态。此解决方案的幼稚实现肯定不会显示圆圈

2）基于原始来源更新：发出音符的方块将被突出显示，根据自触发以来的时间，方块的值将淡出。将根据触发后的时间绘制一个圆圈，并且所有击中圆圈的方块都会亮起。这应该保持视觉真的像一个圆圈。

# javascript - 我需要什么才能使 getUserMedia() 工作？

> ID：15571877
> 
> 赞同：0
> 
> 时间：2013-03-22T13:44:16.803
> 
> 标签：javascript, html, getusermedia

我对 javascript 很陌生，我想使用`getUserMedia()`. 当我进入此[页面](http://www.simpl.info/getusermedia/)时，一切正常，chrome 要求我允许访问我的相机。但是当我从[他们的 github](https://github.com/samdutton/simpl/tree/master/getusermedia)下载他们网站的源代码并尝试在本地运行该代码时，它不起作用。我需要什么额外的东西才能让它工作吗？我该如何调试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:49:42.743

您需要从网络服务器而不是本地文件系统运行文件，否则您将收到如下错误：

```
navigator.getUserMedia error:  NavigatorUserMediaError {code: 1, PERMISSION_DENIED: 1} 
```

Chrome 带有一套出色的调试工具。您应该做的第一件事是按 F12 启动它们（假设您在 Windows 上）并检查控制台是否有任何错误。然后花时间玩耍并熟悉这些工具；它们对您非常有用；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T05:32:19.953

您也可以从本地文件中使用，但问题是您的系统中需要一个本地网络服务器，例如 wamp。并将您的文件放在 www 文件夹中。

# c# - 实体框架 - 具有 order by 和 group by 的 Linq 查询

> ID：15571878
> 
> 赞同：14
> 
> 时间：2013-03-22T13:44:17.653
> 
> 标签：c#, mysql, linq, entity-framework

我有`Measurement`具有相关属性`CreationTime`（日期时间）和`Reference`（字符串）以及其他一些值的对象。

我想写一个有效的 linq`DbContext`查询

*   按给定分组我的`Measurement`对象`Reference`
*   按组`CreationTime`中第一个的属性或属性`Measurement`的平均值对组进行排序`CreationTime`
*   将查询限制为最近的`numOfEntries`

（在后面的步骤中，我计算了这些返回组的平均值，但我想这与我的问题无关。）

DbContext 本身有一个`DbSet<Measurement>`称为`Measurements`保存所有`Measurement`对象的方法。

我提出了以下查询，该查询导致正确排序但缺少介于两者之间的某些组的组列表。

```
var groupByReference = (from m in context.Measurements
                          orderby m.CreationTime
                          group m by new { m.Reference } into g
                          select g).Take(numOfEntries).ToList(); 
```

如何`Measurement`正确选择“最近”的 s 组？

我将 Entity Framework 4.4 与 MySQL 数据库（MySql Connector/Net 6.6.4）一起使用。这个例子被简化了，我可以更详细地介绍和/或在必要时给出一个例子。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-22T14:01:32.880

它是方法语法（我发现它更容易阅读）但这可能会做到

**更新了帖子评论**

使用`.FirstOrDefault()`代替`.First()`

关于平均日期，您可能不得不暂时放弃该订单，因为我目前无法访问 IDE

```
var groupByReference = context.Measurements
                              .GroupBy(m => m.Reference)
                              .Select(g => new {Creation = g.FirstOrDefault().CreationTime, 
//                                              Avg = g.Average(m => m.CreationTime.Ticks),
                                                Items = g })
                              .OrderBy(x => x.Creation)
//                            .ThenBy(x => x.Avg)
                              .Take(numOfEntries)
                              .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T09:53:44.963

您可以尝试先将 GroupBy 和 Take 的结果转换为 Enumerable 然后处理其余部分（基于 NinjaNye 提供的解决方案

```
var groupByReference = (from m in context.Measurements
                              .GroupBy(m => m.Reference)
                              .Take(numOfEntries).AsEnumerable()
                               .Select(g => new {Creation = g.FirstOrDefault().CreationTime, 
                                             Avg = g.Average(m => m.CreationTime.Ticks),
                                                Items = g })
                              .OrderBy(x => x.Creation)
                              .ThenBy(x => x.Avg)
                              .ToList() select m); 
```

您的 sql 查询看起来与此类似（取决于您的输入）

```
SELECT TOP (3) [t1].[Reference] AS [Key]
FROM (
    SELECT [t0].[Reference]
    FROM [Measurements] AS [t0]
    GROUP BY [t0].[Reference]
    ) AS [t1]
GO

-- Region Parameters
DECLARE @x1 NVarChar(1000) = 'Ref1'
-- EndRegion
SELECT [t0].[CreationTime], [t0].[Id], [t0].[Reference]
FROM [Measurements] AS [t0]
WHERE @x1 = [t0].[Reference]
GO

-- Region Parameters
DECLARE @x1 NVarChar(1000) = 'Ref2'
-- EndRegion
SELECT [t0].[CreationTime], [t0].[Id], [t0].[Reference]
FROM [Measurements] AS [t0]
WHERE @x1 = [t0].[Reference] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T13:50:15.733

尝试移动`order by`after `group by`：

```
var groupByReference = (from m in context.Measurements
                        group m by new { m.Reference } into g
                        order by g.Avg(i => i.CreationTime)
                        select g).Take(numOfEntries).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T23:09:51.150

您的要求无处不在，但这是我对它们的理解的解决方案：

按参考属性分组：

```
var refGroupQuery = (from m in context.Measurements
            group m by m.Reference into refGroup
            select refGroup); 
```

现在你说你想通过“最近的 numOfEntries”来限制结果 - 我认为这意味着你想限制返回的测量值......在这种情况下：

```
var limitedQuery = from g in refGroupQuery
                   select new
                   {
                       Reference = g.Key,
                       RecentMeasurements = g.OrderByDescending( p => p.CreationTime ).Take( numOfEntries )
                   } 
```

要按第一个测量创建时间对组进行排序（请注意，您应该对测量进行排序；如果您想要最早的 CreationTime 值，请将“g.SomeProperty”替换为“g.CreationTime”）：

```
var refGroupsOrderedByFirstCreationTimeQuery = limitedQuery.OrderBy( lq => lq.RecentMeasurements.OrderBy( g => g.SomeProperty ).First().CreationTime ); 
```

要按平均 CreationTime 对组进行排序，请使用 DateTime 结构的 Ticks 属性：

```
var refGroupsOrderedByAvgCreationTimeQuery = limitedQuery.OrderBy( lq => lq.RecentMeasurements.Average( g => g.CreationTime.Ticks ) ); 
```

# jquery - 未捕获的类型错误：对象 [对象对象] 没有方法 'datepicker'

> ID：15571884
> 
> 赞同：1
> 
> 时间：2013-03-22T13:44:26.810
> 
> 标签：jquery, asp.net-mvc, jquery-ui

我刚刚开始了一个 MVC 4 项目，但我无法弄清楚 JQuery 损坏的原因：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>

    <link href="/Content/site.css" rel="stylesheet"/>

    <link href="/Content/themes/base/jquery.ui.core.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.resizable.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.selectable.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.accordion.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.autocomplete.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.button.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.dialog.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.slider.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.tabs.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.datepicker.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.progressbar.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.theme.css" rel="stylesheet"/>

    <script src="/Scripts/modernizr-2.5.3.js"></script>

    <script src="/Scripts/jquery-1.7.1.js"></script>

    <script src="/Scripts/jquery-ui-1.8.20.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#datepicker").datepicker();
        });
    </script>

</head>
<body>

<h2>List</h2>

<p>Date: <input type="text" id="datepicker" /></p>

    <script src="/Scripts/jquery-1.7.1.js"></script>

</body>
</html> 
```

标题中的链接工作得很好。我在 Chrome 中收到此错误：

```
Uncaught TypeError: Object [object Object] has no method 'datepicker' 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-03T11:12:41.343

**在使用datetimepiker**或**datepicker**函数之前插入此代码

```
var jq = $.noConflict(); 
```

# operating-system - 根据操作系统不同的结果

> ID：15571886
> 
> 赞同：1
> 
> 时间：2013-03-22T13:44:48.453
> 
> 标签：operating-system, fortran, compiler-optimization, compiler-options

我正在使用用 Fortran 编写的 CFD 代码。它的某些部分已与 OpenMP 并行化。即使我在 Windows 和 Linux 机器上打开 OpenMP 并使用相同的编译器选项 (-O3)，我也会得到不同的结果。在尝试关闭优化 (-O0) 并将 (-fp-model 源) 添加到我的编译器选项后，它仅在 2 个迭代步骤后显示 NaN。是否有任何其他原因导致结果不同，我如何确保它们相同）

谢谢，塞巴斯蒂安

PS：两台机器都使用相同的 Intel Fortran Compiler 2013，都是 64 位的，并且有一个 Intel Xeon CPU。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:11:22.473

根据算法和分辨率，没有错误的 CFD 代码可能会通过打开并行性获得显着不同的结果。

正如 HPMark 所暗示的，更换平台时可能会出现细微的差异。较大的差异表明您有一些编译器或系统特定的代码，需要进行移植工作。当您关闭优化级别时遇到重大问题可能是内存错误。

当您遇到这种令人困惑的情况时，请注意一次只更改一件事。

# php - 在每种方法中自创单例。不好吗？

> ID：15571887
> 
> 赞同：0
> 
> 时间：2013-03-22T13:44:50.937
> 
> 标签：php, optimization, resources, singleton

大家！这是注册表模式的一个小单例。它很常见。

```
class REG {
    private $_objects;  
    protected static $_instance;

    private function __construct() {}

    public static function getInstance() {
        if (self::$_instance === NULL) self::$_instance = new self();  
        return self::$_instance;
    }

    public static function set($name, $object) {
        self::$_instance->_objects[$name] = $object;
    }

    public static function get($name) {
        return self::$_instance->_objects[$name];
    }   

    public static function testMe() {
        return self::$_instance;
    }       

    private function __clone() {}
    private function __wakeup() {}    
} 
```

使用它假设我们应该`REG::getInstance()`首先调用任何所需的方法。

```
REG::getInstance();
REG::set('name','Denis');
var_dump(REG::testMe());
// object(REG)#1 (1) { ["_objects":"REG":private]=> array(1) { ["name"]=> string(5) "Denis" } } 
```

一切正常！但是......因为我打算使用这个类来存储我的项目的全局变量，所以我显然不想每次需要访问 func 中的任何全局变量时都花费额外的代码。在上面的例子中，我们可以省略调用`REG::getInstance()`并且在运行脚本时不会出错。唯一的区别是`self::$_instance`现在将是 stdClass 的一个实例

```
REG::set('name','Denis');
var_dump(REG::testMe());
// object(stdClass)#1 (1) { ["_objects"]=> array(1) { ["name"]=> string(5) "Denis" } } 
```

在这种特殊情况下，它没有任何区别，但是如果我们需要类的一些附加功能，这可能变得至关重要。另一种避免调用的方法是在我们类的每个方法上`REG::getInstance()`加上`if (self::$_instance === NULL) self::$_instance = new self();`一行：

```
class REG {
    private $_objects;  
    protected static $_instance;

    private function __construct() {}

    public static function getInstance() {
        if (self::$_instance === NULL) self::$_instance = new self();  
        return self::$_instance;
    }

    public static function set($name, $object) {
        if (self::$_instance === NULL) self::$_instance = new self();  
        self::$_instance->_objects[$name] = $object;
    }

    public static function get($name) {
        if (self::$_instance === NULL) self::$_instance = new self();  
        return self::$_instance->_objects[$name];
    }   

    public static function testMe() {
        if (self::$_instance === NULL) self::$_instance = new self();  
        return self::$_instance;
    }       

    private function __clone() {}
    private function __wakeup() {}    
}
REG::set('name','Denis');
var_dump(REG::testMe());
// object(REG)#1 (1) { ["_objects":"REG":private]=> array(1) { ["name"]=> string(5) "Denis" } } 
```

现在好了！
所以，我想问的问题=) 使用这种方法有没有被忽视的缺点？也许是一些不希望的资源开销或其他什么？

PS：在问这个问题之前我已经搜索过，但没有找到答案。也许是因为我的英语不是很好。那么请指点我正确的方向。
提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:02:03.127

**可能是有人试图用悍马杀死一只蚂蚁，**
为什么你不会喜欢我的想法：

```
class REG {
public function data($name, $value=null){
if(!$value) return $this->{$name};
$this->{$name} = $value;
}
}
$bin = new REG();
$bin->data('working','no');
echo $bin->data('working'); 
```

**编辑**

**你伤害了我的面向对象思维**

好吧，你想创建一个桶来存储你的粒子，然后让每一类人都可以使用它。
但是，如果您将它们存放在垃圾箱中，然后将其交给需要的人怎么办。
OOP 带有封装的思想。但是单顿会伤害它。因为您的变量将在全球范围内可用。
另一件事是 OOP 带有良好的代码可重用性的想法。
但是，如果您创建一个具有从单例调用的某些函数的类怎么办。下次你需要同时使用 singlton 和你的主类。

所以，如果你下定决心使用singlton。然后它还不错，因为很多人都在使用它。
但是，** 我建议将您的变量作为参数传递给需要它的函数。
感谢您有时间阅读。再说一次，我没有那么多经验，我才 17 岁

# r - R中的二维聚合？（创建热图）

> ID：15571891
> 
> 赞同：1
> 
> 时间：2013-03-22T13:44:58.317
> 
> 标签：r, aggregate

我有一个包含两个因子列的表，我想将它们聚合成一个易于热图映射的表。

该表具有例如具有以下格式

```
 City         Date           Revenue     Costs       Manager 
 ____         ____            _______    ______       ___
 New York     Feb 1           2000        200        Stuart
 San Fran     Feb 3           1200        300        John
 Boston       Feb 1           1500        400        Mike
 Boston       Feb 1           1300        200        Cissy 
```

等等

我想按收入有一个这种格式的二维聚合表

```
Sum Revenue  New York     San Fran     Boston   
 ____         ____           ____       ____
 Feb 1        2000             0        2800
 Feb 2          0              0          0
 Feb 3          0             1200        0 
```

有没有一种简单的方法可以做到这一点，还是我被困在循环中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:57:10.410

正如@Arun 在评论中建议的那样，`reshape`将为您执行此操作。

```
d<-read.table(text='City         Date           Revenue     Costs
"New York"     "Feb 1"           2000        200
"San Fran"     "Feb 3"           1200        300
Boston       "Feb 1"           1500        400', header=TRUE)
reshape(d[! names(d) %in% 'Costs'], idvar='Date', timevar='City', direction='wide')
#    Date Revenue.New York Revenue.San Fran Revenue.Boston
# 1 Feb 1             2000               NA           1500
# 2 Feb 3               NA             1200             NA 
```

如果您想首先组合多个城市/日期条目，您可以使用`aggregate`.

```
d<-read.table(text='City         Date           Revenue     Costs
"New York"     "Feb 1"           2000        200
"New York"     "Feb 1"           1000        100
"San Fran"     "Feb 3"           1200        300
Boston       "Feb 1"           1500        400', header=TRUE)
dd<-with(d, aggregate(Revenue, by=list(City=City, Date=Date), sum))
#     City     Date  x
# 1   Boston   Feb 1 1500
# 2 New York   Feb 1 3000
# 3 San Fran   Feb 3 1200
ddd<-reshape(dd, idvar='Date', timevar='City', direction='wide')
#    Date x.Boston x.New York x.San Fran
# 1 Feb 1     1500       3000         NA
# 3 Feb 3       NA         NA       1200 
```

然后将`NA`s替换为`0`。

```
ddd[is.na(ddd)] <- 0
#    Date x.Boston x.New York x.San Fran
# 1 Feb 1     1500       3000          0
# 3 Feb 3        0          0       1200 
```

为了解决@Arun 在下面提出的问题，在上一步之前，您可以使用该`merge`函数填写缺失的日期。

```
missing.Dates <- c('Feb 2')
ddd<-merge(ddd, data.frame(Date=missing.Dates), by='Date', all=TRUE)
#   Date x.Boston x.New York x.San Fran
#1 Feb 1     1500       3000         NA
#2 Feb 3       NA         NA       1200
#3 Feb 2       NA         NA         NA
ddd[is.na(ddd)] <- 0
#    Date x.Boston x.New York x.San Fran
# 1 Feb 1     1500       3000          0
# 2 Feb 3        0          0       1200
# 3 Feb 2        0          0          0 
```

# web-services - 在 Musicbrainz 上搜索 AcoustID

> ID：15571893
> 
> 赞同：5
> 
> 时间：2013-03-22T13:45:03.427
> 
> 标签：web-services, fingerprinting, audio-fingerprinting, musicbrainz

Muscibrainz 提供[AcoustID](http://acoustid.org/)指纹，例如，[这里](http://musicbrainz.org/recording/d486f8c5-e19d-4892-a808-4047cd05d786/fingerprints)

但是，我找不到直接搜索它们的可能性（就像PUID或[echoprints](http://musicbrainz.org/search)[一样](http://echoprint.musicbrainz.org/search)）

我错过了什么吗？

acoustid.org 提供我想要的信息，但不是 Acoustid WebService。

示例：给定指纹 **453a8e75-ef90-4f31-a2b2-84494219bd3b** 我想要以下页面提供的信息：http: [//acoustid.org/track/453a8e75-ef90-4f31-a2b2-84494219bd3b](http://acoustid.org/track/453a8e75-ef90-4f31-a2b2-84494219bd3b)

（旁注：我对任何指纹匹配过程都不感兴趣，我只想要具有给定 acoustID 的所有条目）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T13:03:38.003

AcoustID 不直接包含在 MusicBrainz 数据库中，因此无法使用 MusicBrainz Web 服务进行搜索。还有一个[AcoustID Web 服务](http://acoustid.org/webservice)。

您还不能通过 acoustID 进行查找。您只能查找由 chromaprint 创建的指纹： [http://api.acoustid.org/v2/lookup?client=8XaBELgH&meta=recordingids&duration=641&fingerprint=AQABz0qUkZK4oOfhL-CPc4e...](http://api.acoustid.org/v2/lookup?client=8XaBELgH&meta=recordingids&duration=641&fingerprint=AQABz0qUkZK4oOfhL-CPc4e5C_wW2H2QH9uDL4cvoT8UNQ-eHtsE8cceeFJx-LiiHT-aPzhxoc-Opj_eI5d2hOFyMJRzfDk-QSsu7fBxqZDMHcfxPfDIoPWxv9C1o3yg44d_3Df2GJaUQeeR-cb2HfaPNsdxHj2PJnpwPMN3aPcEMzd-_MeB_Ej4D_CLP8ghHjkJv_jh_UDuQ8xnILwunPg6hF2R8HgzvLhxHVYP_ziJX0eKPnIE1UePMByDJyg7wz_6yELsB8n4oDmDa0Gv40hf6D3CE3_wH6HFaxCPUD9-hNeF5MfWEP3SCGym4-SxnXiGs0mRjEXD6fgl4LmKWrSChzzC33ge9PB3otyJMk-IVC6R8MTNwD9qKQ_CC8kPv4THzEGZS8GPI3x0iGVUxC1hRSizC5VzoamYDi-uR7iKPhGSI82PkiWeB_eHijvsaIWfBCWH5AjjCfVxZ1TQ3CvCTclGnEMfHbnZFA8pjD6KXwd__Cn-Y8e_I9cq6CR-4S9KLXqQcsxxoWh3eMxiHI6TIzyPv0M43YHz4yte-Cv-4D16Hv9F9C9SPUdyGtZRHV-OHEeeGD--BKcjVLOK_NCDXMfx44dzHEiOZ0Z44Rf6DH5R3uiPj4d_PKolJNyRJzyu4_CTD2WOvzjKH9GPb4cUP1Av9EuQd8fGCFee4JlRHi18xQh96NLxkCgfWFKOH6WGeoe4I3za4c5hTscTPEZTES1x8kE-9MQPjT8a8gh5fPgQZtqCFj9MDvp6fDx6NCd07bjx7MLR9AhtnFnQ70GjOcV0opmm4zpY3SOa7HiwdTtyHa6NC4e-HN-OfC5-OP_gLe2QDxfUCz_0w9l65HiPAz9-IaGOUA7-4MZ5CWFOlIfe4yUa6AiZGxf6w0fFxsjTOdC6Itbh4mGD63iPH9-RFy909XAMj7mC5_BvlDyO6kGTZKJxHUd4NDwuZUffw_5RMsde5CWkJAgXnDReNEaP6DTOQ65yaD88HoeX8fge-DSeHo9Qa8cTHc80I-_RoHxx_UHeBxrJw62Q34Kd7MEfpCcu6BLeB1ePw6OO4sOF_sHhmB504WWDZiEu8sKPpkcfCT9xfej0o0lr4T5yNJeOvjmu40w-TDmqHXmYgfFhFy_M7tD1o0cO_B2ms2j-ACEEQgQgAIwzTgAGmBIKIImNQAABwgQATAlhDGCCEIGIIM4BaBgwQBogEBIOESEIA8ARI5xAhxEFmAGAMCKAURKQQpQzRAAkCCBQEAKkQYIYIQQxCixCDADCABMAE0gpJIgyxhEDiCKCCIGAEIgJIQByAhFgGACCACMRQEyBAoxQiHiCBCFOECQFAIgAABR2QAgFjCDMA0AUMIoAIMChQghChASGEGeYEAIAIhgBSErnJPPEGWYAMgw05AhiiGHiBBBGGSCQcQgwRYJwhDDhgCSCSSEIQYwILoyAjAIigBFEUQK8gAYAQ5BCAAjkjCCAEEMZAUQAZQCjCCkpCgFMCCiIcVIAZZgilAQAiSHQECOcQAQIc4QClAHAjDDGkAGAMUoBgyhihgEChFCAAWEIEYwIJYwViAAlHCBIGEIEAEIQAoBwwgwiEBAEEEOoEwBY4wRwxAhBgAcKAESIQAwwIowRFhoBhAE)

有多个指纹映射到一个 AcoustID。

编辑：我[在 MusicBrainz 上](http://tickets.musicbrainz.org/browse/MBS-6052)开了 一张~~[票，在 acoustid.org](https://bitbucket.org/acoustid/acoustid-server/issue/7/web-service-cant-search-by-acoustid)~~上开了一张票。

编辑：MB 所说的“AcoustID”是 acoustid.org 上的“AcoustID 曲目 ID”，您可以通过[http://api.acoustid.org/v2/lookup?client=8XaBELgH&meta=recordingids&trackid=453a8e75-ef90-4f31访问它-a2b2-84494219bd3b](http://api.acoustid.org/v2/lookup?client=8XaBELgH&meta=recordingids&trackid=453a8e75-ef90-4f31-a2b2-84494219bd3b)（自 2011 年以来）。目前还没有相关文档，但很快就会有。

编辑： **这现在记录在** [http://acoustid.org/webservice#lookup_by_trackid](http://acoustid.org/webservice#lookup_by_trackid)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T21:37:37.133

实际上，您可以通过 AcoustID 查找，而不是使用指纹和持续时间，它似乎没有被记录：

[http://api.acoustid.org/v2/lookup?client=8XaBELgH&meta=recordingids+recordings&trackid=453a8e75-ef90-4f31-a2b2-84494219bd3b](http://api.acoustid.org/v2/lookup?client=8XaBELgH&meta=recordingids+recordings&trackid=453a8e75-ef90-4f31-a2b2-84494219bd3b)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-09T07:09:24.863

当您从 AcoustID 获取一些详细信息时，您可以像这样手动使用它们

[http://musicbrainz.org/artist/53b106e7-0cc6-42cc-ac95-ed8d30a3a98e](http://musicbrainz.org/artist/53b106e7-0cc6-42cc-ac95-ed8d30a3a98e)

[http://musicbrainz.org/release/189002e7-3285-4e2e-92a3-7f6c30d407a2](http://musicbrainz.org/release/189002e7-3285-4e2e-92a3-7f6c30d407a2)

更多细节在这里[https://musicbrainz.org/doc/MusicBrainz_Identifier](https://musicbrainz.org/doc/MusicBrainz_Identifier)

# java - 在android web视图中加载html文件时不显示图像

> ID：15571894
> 
> 赞同：3
> 
> 时间：2013-03-22T13:45:06.500
> 
> 标签：java, android, html

我需要加载一个 html 文件，它将在 android 模拟器中显示图像。我有一个单独的 css 文件和 html fie 以及要在我的应用程序的 /assets 文件夹中显示的图像。我使用 getAssets() 读取了 css 文件和 html 文件。我尝试使用 loadData() 方法加载 html 文件，因为我只能使用字符串来获取字符串中的 html 文件，并且仅使用该字符串而不是使用“file:///android_asset”来加载 html 文件/eppi.html”。谁能说出解决方案？。您可以从我的以下代码中理解。提前致谢。

我的 MainActivity.java 代码：

```
 package com.exercise.AndroidHTML;

 import java.io.InputStream;
 import java.io.IOException;

 import android.annotation.SuppressLint;
 import android.app.Activity;
 import android.os.Bundle;
 import android.webkit.WebSettings;
 import android.webkit.WebView;
 import android.content.res.AssetManager;

 public class AndroidHTMLActivity extends Activity {

    WebView myBrowser;
String html;
String css;
String HTML;

 /** Called when the activity is first created. */
 @SuppressLint("SetJavaScriptEnabled")
@Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myBrowser = (WebView)findViewById(R.id.mybrowser);

    AssetManager assetmanager=getAssets();
    InputStream input;
    try{
        input= assetmanager.open("eppi.html");

        int size=input.available();
        byte[] buffer=new byte[size];
        input.read(buffer);
        input.close();

         html=new String(buffer);

    } catch (IOException e){
        e.printStackTrace();
    }
    try{
        InputStream input1= assetmanager.open("eppi.css");

        int size=input1.available();
        byte[] buffer=new byte[size];
        input1.read(buffer);
        input1.close();

         css=new String(buffer);
    }catch (IOException e){
        e.printStackTrace();
    }

     HTML=css+html;     
    myBrowser.getSettings().setJavaScriptEnabled(true);
    WebSettings settings = myBrowser.getSettings();
    settings.setDefaultTextEncodingName("utf-8");
    myBrowser.loadData(HTML,"text/html","utf-8");

 }
 } 
```

我的 eppi.css 文件：

```
<html>
<head>
<style>
#header{
height:80px;
width:320px;
position:absolute;
background-color:#000000;
}
#text{
height:80px;
width:159px;
position:absolute;
color:#806C00;
}
#logo{
top:2px;
    left:200px;
height:80px;
width:97px;
position:absolute;

}
#image{
top:79px;
height:80px;
width:159px;
position:absolute;

}
#image1{
top:79px;
left:159px;
height:80px;
width:161px;
position:absolute;

}
#image2{
top:158px;
height:80px;
width:159px;
position:absolute;

}
#image3{
top:158px;
left:159px;
height:80px;
width:161px;
position:absolute;

}
#body{
margin:0;
padding:0;
}

</style>
</head> 
```

我的 eppi.html 代码：

```
<body id="body">
<div id="header">
<div id="text">
<center>
h4><b><i>The Show
Welcomes You</i></b></h4>
</center>
</div>
<div id="logo">
<img src="logo.png" width="100" height="75">
</div>
</div>
<div id="image">
<a href="Media.html"><img src="mine.png" width="159" height="80"/></a>
</div>
<div id="image1">
<a href="Trading.html"><img src="offers.png" width="161" height="80"/></a>
</div>
<div id="image2">
<a href="Hours.html"><img src="horse.png" width="159" height="80"/></a>
</div>
<div id="image3">
<a href="Release.html"><img src="entering.png" width="161" height="80"/></a>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:04:52.787

您可以解析 HTML（至少在初级层面上）、查找图像并手动加载它们（就像处理 HTML 文件一样）。

在您可以将 HTML 中的图像 URL 更改为 base64 回显的[数据 URL](http://en.wikipedia.org/wiki/Data_URI_scheme)之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:58:29.830

您必须更改图像路径。而不是 <img src="mine.png"> 写 <img src="file:///android_asset/mine.jpg">

# asp.net-mvc - Index Post 没有将整个模型返回给控制器？

> ID：15571899
> 
> 赞同：0
> 
> 时间：2013-03-22T13:45:09.093
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我试图在表单提交时将整个模型数据返回到索引帖子。它只返回传入 URL 参数的 ID。为什么？

![在此处输入图像描述](../Images/d4f3a019c2b879ad980414a71b65b13b.png)

```
@using Volunteer.BootstrapSupport
@model IEnumerable<Volunteer.Models.Activity>
 @using (Html.BeginForm())
{
    <h2>Member Volunteering List </h2>
    <div>
            <button type="submit" class="btn btn-primary" >New Activity</button>
    </div>
    <table id="volunteerlist" class="table table-striped table-bordered table-hover .table-condensed">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Committee.Name)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.Committee.Type)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Role)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.EndDate)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Source)
                </th>
                <th></th>
            </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:16:01.727

除了属性的显示之外，您还需要包括隐藏字段。

```
@Html.HiddenFor(m => m.Role) 
```

对您没有为其创建输入元素的每个属性执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:24:48.553

如果要将模型属性返回到索引，则必须将属性添加为路由值。

return RedirectToAction("搜索", new{"key", value});

隐藏字段是存储数据以通过提交传递的一种方式，使用路由更复杂但作为角色 url 更好的解决方案。对于隐藏的几个值可以正常工作，但如果您发现自己必须创建大量包含大量路由值的操作链接，那么请查看路由。

# xslt-1.0 - XSLT 分组和求和

> ID：15571901
> 
> 赞同：-2
> 
> 时间：2013-03-22T13:45:16.973
> 
> 标签：xslt-1.0, biztalk, biztalk-2010

我需要根据相同的 itemid 对 qty 进行分组。标题应按原样显示。

此 XSLT 将在 BizTalk 2010 中使用。任何帮助将不胜感激。

我在 BizTalk 2010 中使用这些 XML 和 XSLT，因此不支持 XSLT 2.0 版

我看过很多例子，但对我没有用，也没有犯错。

这是我的输入

```
 <Invoice>
        <LineHeader>
            <ContractorID>1</ContractorID>
            <ContractorName>XXX</ContractorName>
            <InvoiceDate>1999-05-31</InvoiceDate>
            <GSTCode>AUS</GSTCode>
        </LineHeader>
        <LineItems>
            <LineItem>
                <ItemID>1</ItemID>
                <Qty>10</Qty>
            </LineItem>

            <LineItem>
                <ItemID>2</ItemID>
                <Qty>20</Qty>
            </LineItem>

            <LineItem>
                <ItemID>1</ItemID>
                <Qty>-3</Qty>
            </LineItem>

        </LineItems>
    </Invoice> 
```

我的输出应该是

```
 <Invoice>
        <LineHeader>
            <ContractorID>1</ContractorID>
            <ContractorName>XXX</ContractorName>
            <InvoiceDate>1999-05-31</InvoiceDate>
            <GSTCode>AUS</GSTCode>
        </LineHeader>
        <LineItems>
            <LineItem>
                <ItemID>1</ItemID>
                <Qty>7</Qty>
            </LineItem>

            <LineItem>
                <ItemID>2</ItemID>
                <Qty>20</Qty>
            </LineItem>
        </LineItems>
    </Invoice> 
```

输入中有三个行项目，但输出中只有两个。ItemID 1 分组，qty 计算为 10

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-23T10:33:26.320

这是我接受的输入

[http://www.sharexml.com/x/get?k=qbbVk8enuoNF](http://www.sharexml.com/x/get?k=qbbVk8enuoNF)

这是 XSLT 的诀窍

[http://www.sharexml.com/x/get?k=F9zGd5aTG2t7](http://www.sharexml.com/x/get?k=F9zGd5aTG2t7)

# c# - WCF 服务和对象构造函数

> ID：15571902
> 
> 赞同：3
> 
> 时间：2013-03-22T13:45:17.533
> 
> 标签：c#, wcf, serialization

我只是在学习 WCF 服务。我有一个方法可以返回我创建的名为 GPSPosition 的对象。GPS 位置对象具有纬度和经度。如果没有这些属性，该对象永远不会真正存在。所以，我想让构造函数接受 Lat 和 Long 浮点数。所以当对象被创建时，值是被设置的，并且永远不会是无效的（Unset）。

但是，它是我的 WCF 服务的一个对象。我的调用应用程序使用的 WCF 服务对象可以具有构造函数吗？如果我`var position = new GpsPosition{ lat=1, lon=1 };`在我的调用代码中，构造函数会工作吗？WCF 类中可以有构造函数吗？

我认为它们在不同的语言之间共享 - 例如，如果 Java 使用该服务，我不确定构造函数将如何触发。对象**结构**共享给调用应用程序，不是吗？您可以在构造函数中触发 .net 代码吗（在这种情况下，还有 getter 和 setter 方法）？

如果构造函数不可用 - 有没有办法确保我的对象永远不会无效？（必须具有介于 -180 和 +180 之间的有效纬度/经度值）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T15:18:16.743

答案将取决于您的类型`GpsPosition`使用的序列化模型。WCF 中最常用的两个是 POCO（普通 CLR 对象）和`[DataContract]`. 在前者中，对象必须有一个无参数的构造函数，这违背了您的要求（值需要设置一次）。在后者中，*不调用*对象构造函数——而是创建了一个未初始化的类型实例，并通过反序列化设置其成员。

因此，构造函数不是验证来自网络的对象的​​替代方法。您需要验证对象而不是构造函数的是*序列化回调*，它在反序列化完成时调用。WCF 序列化程序将在反序列化完成时调用它们，您可以在那里检查对象是否已正确初始化，否则抛出异常。这篇[博](http://blogs.msdn.com/b/carlosfigueira/archive/2011/09/06/wcf-extensibility-serialization-callbacks.aspx)文有更多关于序列化回调的详细信息，下面的代码显示了您的场景的一种可能实现。

```
[DataContract]
public class GpsPosition
{
    private float _lat;
    private float _lon;
    private bool _latWasSet;
    private bool _lonWasSet;

    public GpsPosition(float lat, float lon)
    {
        _lat = lat;
        _lon = lon;
    }

    [DataMember]
    public float lat
    {
        get { return _lat; }
        private set
        {
            _lat = value;
            _latWasSet = true;
        }
    }

    [DataMember]
    public float lon
    {
        get { return _lon; }
        private set
        {
            _lon = value;
            _lonWasSet = true;
        }
    }

    [OnDeserialized]
    void OnDeserialized(StreamingContext ctx)
    {
        if (!_latWasSet || _!lonWasSet ||
            _lat < -90 || _lat > 90 ||
            _lon < -180 || _lon > 180)
        {
            throw new InvalidOperationException("Required property is missing");
        }
    }
} 
```

# wpf - 具有 3 个状态的复选框，将在 WPF 中充当“全选/取消全选”

> ID：15571903
> 
> 赞同：0
> 
> 时间：2013-03-22T13:45:18.160
> 
> 标签：wpf, data-binding, checkbox

我有一个带有几个复选框的 WPF 窗口，这些复选框数据绑定到我的对象中相应的布尔属性。我从 INotifyPropertyChanged 派生了我的对象，因此数据的变化反映在视图中，视图的变化反映在数据中。

现在我必须添加另一个具有 3 个状态的复选框，它将充当“全选/取消全选”，工作如下：

*   如果用户选中 - 将选中所有其他复选框
*   如果用户未选中 - 将取消选中所有其他复选框
*   如果所有其他复选框都被选中 - 将显示为选中
*   如果所有其他复选框均未选中 - 将显示为未选中
*   如果选中了其他一些复选框 - 将显示为不确定

我是 WPF 的新手。如何在 WPF 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:22:05.523

我敢肯定有一个更好的方法来解决这个问题，但这是我想出的一个快速解决方案，似乎可行。

这是 XAML：

```
<Window x:Class="StackOverflow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:StackOverflow"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:AllNoneCheckboxConverter x:Key="converter"/>
    </Window.Resources>
    <Grid>
        <StackPanel>
            <CheckBox x:Name="chk1" Content="1"/>
            <CheckBox x:Name="chk2" Content="2"/>
            <CheckBox x:Name="chk3" Content="3"/>
            <CheckBox x:Name="all" Content="all">
                <CheckBox.IsChecked>
                    <MultiBinding Converter="{StaticResource converter}">
                        <Binding ElementName="chk1" Path="IsChecked"/>
                        <Binding ElementName="chk2" Path="IsChecked"/>
                        <Binding ElementName="chk3" Path="IsChecked"/>
                    </MultiBinding>
                </CheckBox.IsChecked>
            </CheckBox>
        </StackPanel>
    </Grid>
</Window> 
```

这里是 MultiValueConverter；

```
class AllNoneCheckboxConverter: IMultiValueConverter
    {
        public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            bool result = (bool)values[0];
            for (int i = 0; i < values.Length; i++)
                if (result != (bool)values[i])
                    return null;

            return result;
        }

        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
        {
            object[] result = new object[targetTypes.Length];
            bool isChecked = (bool)value;

            for (int i = 0; i < result.Length; i++)
                if (isChecked)
                    result[i] = true;
                else
                    result[i] = false;

            return result;
        }
    } 
```

# java - Neo4j 1.9.M02-M05 中密码行为的预期变化？

> ID：15571909
> 
> 赞同：4
> 
> 时间：2013-03-22T13:45:37.680
> 
> 标签：java, exception, neo4j, cypher

这是 Neo4j 1.9.M02-M05 中的一个已知问题和/或预期行为，您不能再从事务之外的密码查询中删除节点和关系？

以下示例代码在 1.8.2 中有效，但在 1.9.M02-M05 中无效：

```
ExecutionEngine engine = new ExecutionEngine(graphDb);
ExecutionResult result = engine.execute("start n = node(*) match (n)<-[r:SOME_TYPE]-() return r");

final Iterator<Relationship> rels = result.columnAs("r");
assertTrue(rels.hasNext());
Transaction tx = graphDb.beginTx();
try {
    rels.next().delete();
    tx.success();
} finally {
    tx.finish();
} 
```

堆栈跟踪：

```
org.neo4j.graphdb.TransactionFailureException: Failed to mark transaction as rollback only.
at org.neo4j.kernel.TopLevelTransaction.markAsRollbackOnly(TopLevelTransaction.java:94)
at org.neo4j.kernel.PlaceboTransaction.finish(PlaceboTransaction.java:48)
Caused by: java.lang.NullPointerException
at org.neo4j.kernel.TopLevelTransaction.markAsRollbackOnly(TopLevelTransaction.java:90) 
```

如果您将密码查询移动到事务中，它会像以前一样工作，并且符合预期：

```
Transaction tx = graphDb.beginTx();

try {
    ExecutionResult result = engine.execute("start n = node(*) match (n)<-[r:ONE_TO_ONE]-() return r");
    final Iterator<Relationship> rels = result.columnAs("r");
    assertTrue(rels.hasNext());

    rels.next().delete();
    tx.success();
} finally {
    tx.finish();
} 
```

顺便说一句，与节点相同。

如果你不使用 cypher 来获取关系，比如 fe 使用 node.getRelationship() 或者在 tx 之外进行索引查找，你可以删除 rel。

我已经为 structr 编写了一些测试 [1]，这些测试都通过 Neo4j 1.8.2 通过，但是两个注释掉了 1.9.M02-1.9.M05 失败（由于依赖问题无法测试 M01）。

干杯阿克塞尔

[1] [https://github.com/structr/structr/blob/develop/structr-core/src/test/java/org/structr/common/CypherNotInTransactionTest.java](https://github.com/structr/structr/blob/develop/structr-core/src/test/java/org/structr/common/CypherNotInTransactionTest.java)

**更新：**似乎与惰性评估有关。以下代码不会引发异常：

```
Relationship r = rels.next();

Transaction tx = graphDb.beginTx();

try {

    r.delete();
    tx.success();

    [...] 
```

# excel - 使用 INT 函数时的舍入错误

> ID：15571911
> 
> 赞同：2
> 
> 时间：2013-03-22T13:45:42.437
> 
> 标签：excel, vba

我在两个单元格中有用户输入，名为“UpperRangeHigh”和“UpperRangeLow”。我有以下代码：

```
dRangeUpper = [UpperRangeHigh] - [UpperRangeLow]
lLines = Int(dRangeUpper * 100 / lInterval) 
```

用户分别在输入单元格中输入 120.3 和 120。lInterval 的值为 10。VBA 为 lLines 生成 2，而不是 3。

我可以通过将 0.000000001 添加到 dRangeUpper 来克服这个问题，但我想知道这种行为是否有已知原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:09:09.960

这似乎是 Excel 的计算和有效数字的问题。如果你这样做：

`=120.3 - 120`并格式化单元格以显示 15 位小数，结果显示为：

`0.2999999999999970`

这是一个简短的概述，它解释了 Excel 如何使用二进制算术，这可能会导致结果与您的预期不同：

[http://excel.tips.net/T008143_Avoiding_Rounding_Errors_in_Formula_Results.html](http://excel.tips.net/T008143_Avoiding_Rounding_Errors_in_Formula_Results.html)

您可以通过强制舍入精度来克服这个问题，例如小数点后 10 位：

`lLines = Int(Round(dRangeUpper, 10) * 100 / lInterval`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T14:27:32.100

请在使用小数时使用单精度或双精度以获得更准确的结果。

```
Sub sample()
    Dim dRangeUpper As Double
    dRangeUpper = CDbl("120.3") - CDbl("120")
    lLines = Round(CDbl(dRangeUpper * 100 / 10), 4)
End Sub 
```

**输出 = 3**

![在此处输入图像描述](../Images/88436b7dc4063934c739f141ce331db8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:05:06.080

这是 Excel 中已知的浮点问题

[http://support.microsoft.com/kb/78113](http://support.microsoft.com/kb/78113)

来自 MSDN：

> 要最大限度地减少浮点算术存储不准确的任何影响，请使用 Round() 函数将数字四舍五入到计算所需的小数位数。例如，如果您使用货币，您可能会四舍五入到小数点后 2 位：
> 
> =圆形(1*(0.5-0.4-0.1),2)

在您的情况下，使用 round() 而不是 INT 应该使用 0 而不是 2 来解决问题

# iphone - iOS6 iPad 运行的应用程序数量会影响内存警告频率吗？

> ID：15571916
> 
> 赞同：4
> 
> 时间：2013-03-22T13:46:04.780
> 
> 标签：iphone, ipad, memory-management, ios6, profiling

我在没有太多应用程序同时运行的开发设备上构建我的应用程序。我希望我的客户在打开任意数量的其他应用程序的情况下运行该应用程序。为确保我的应用不会因内存问题而崩溃，我想在预期的操作条件下测试我的应用。

这就提出了一个问题——**双击主页按钮栏中可见的其他应用程序的数量是否会影响设备的内存使用量？**换句话说，如果我打开设备上的每个应用程序，然后启动我的应用程序，与关闭所有其他应用程序相比，我是否更有可能收到内存警告？

我记得听过一个 WWDC 演示文稿，其中提到对于一些使用 <8mb 内存的应用程序，当应用程序最小化时，它们的内存被写入磁盘，不确定这会发生什么变化。

谢谢你的澄清。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:04:39.190

> 双击主页按钮栏中可见的其他应用程序的数量是否会影响设备的内存使用量？

不，多任务栏只是最近应用程序的历史记录。其中一些可能仍在记忆中，而另一些则不在。你没有办法只看它就知道。

当内存不足时，iOS 将首先终止最需要内存的后台应用程序。如果您的应用程序在短时间内分配了大量内存，iOS 可能无法足够快地回收内存并立即终止您的应用程序。

您所能做的就是尽可能减少占用空间，并且尽量不要一次性分配大量缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:58:33.077

> 是的，我认为打开的应用程序的数量会影响您的应用程序接收内存警告的方式。关闭所有在后台运行的应用程序或重新启动设备可以减少发送到您的应用程序的内存警告消息（您可以使用仪器看到此效果）。
> 
> 建议：
> 当您收到内存警告时，请尝试执行以下操作：
> - 停止计时器和其他周期性任务。
> - 停止任何正在运行的元数据查询。
> - 不要启动任何新任务。
> - 暂停电影播放（通过 AirPlay 播放时除外）。
> - 如果您的应用是游戏，则进入暂停状态。
> - 降低 OpenGL ES 帧速率。
> - 暂停执行非关键代码的任何调度队列或操作队列。（您可以在不活动时继续处理网络请求和其他对时间敏感的后台任务。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T22:15:30.333

只是一个简短的说明。我发现打开其他应用程序确实会影响实际内存分配。**使用“活动监视器”分析应用程序可以让您查看当前在内存中加载了哪些应用程序以及它们使用了多少**。假设设备有 512mb，你有 512 - （什么是开放的）可以使用，iOS 可能会杀死一些应用程序来为你的应用程序释放内存。

# c# - 如何从 WPF 中 FlowDocument 的 TableRow 中获取 TableCell 值？

> ID：15571921
> 
> 赞同：1
> 
> 时间：2013-03-22T13:46:22.470
> 
> 标签：c#, wpf, mouseevent, flowdocument, tablerow

`TableRow`当单击行时，我想从 中获取所有数据`WPF`。

```
currentRow = tab.RowGroups[0].Rows[r];
currentRow.MouseLeftButtonDown += new MouseButtonEventHandler(test);

void test(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
   try 
   {
      TableRow tr = sender as TableRow;
      // After that what i do to read TableCell Value
   } 

   catch(Exception ex) 
   {
       MessageBox.Show(ex.Message);
   }
} 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-07T22:32:49.340

我知道这有点晚了，你可能还不在这里，更不用说还在这个项目上，但是对于那些将来可能会看到这个的人：要从每个单元格获取数据，之后

```
TableRow tr = sender as TableRow; 
```

执行以下操作：

```
// I imagine you'd want to start a list here
// that will hold the contents of your loops' results.
List<string> resultsList = new List<string>();
foreach(var tableCell in tr.Cells)
{
    // May want to start another list here in case there are multiple blocks.
    List<string> blockContent = new List<string>();
    foreach(var block in tableCell.Blocks)
    {
        // Probably want to start another list here to which to add in the next loop.
        List<string> inlineContent = new List<string>();
        foreach(var inline in block.Inlines)
        {
            // Implement whatever in here depending the type of inline,
            // such as Span, Run, InlineUIContainer, etc.
            // I just assumed it was text.
            inlineContent.Add(new TextRange(inline.ContentStart, inline.ContentEnd).Text);
        }
        blockContent.Add(string.Join("", inlineContent.ToArray()));
    }
    resultsList.Add(string.Join("\n", blockContent.ToArray()));
} 
```

阅读 FlowDocument 层次结构可能是一个好主意。一个不错的起点是[MSDN 的文档](https://msdn.microsoft.com/en-us/library/system.windows.documents.flowdocument(v=vs.100).aspx)。

# c - 将 CURL 结果放入字符串而不是 STDOUT？

> ID：15571922
> 
> 赞同：1
> 
> 时间：2013-03-22T13:46:24.930
> 
> 标签：c, http, curl, stdout, io-redirection

我有以下 curl 代码，它向网站发出请求并从中检索数据，它运行良好，但我想将我的数据存储在字符串中，而不是在输出窗口中。任何的想法？

```
#include <stdio.h>
#include <curl/curl.h>

int main(void)
{
  CURL *curl;
  CURLcode res;

  curl = curl_easy_init();
  if(curl) {
    curl_easy_setopt(curl, CURLOPT_URL, "http://api.hostip.info/get_html.php?ip=xxx.xxx.xx.xxx");
    curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);
    res = curl_easy_perform(curl);
    if(res != CURLE_OK)
      fprintf(stderr, "curl_easy_perform() failed: %s\n",
              curl_easy_strerror(res));
    curl_easy_cleanup(curl);
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:56:25.973

```
int http_get_response(void *buffer, size_t size, size_t rxed, char **msg_in)
{
    char *c;

    if (asprintf(&c, "%s%.*s", *msg_in, size * rxed, buffer) == -1) {
        free(*msg_in);
        msg_in = NULL;
        return -1;
    }

    free(*msg_in);
    *msg_in = c;

    return size * rxed;
} 
```

并在您的 main 添加以下 curl 选项

```
char *msg_in = calloc(1,sizeof(char));

curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, http_get_response);
curl_easy_setopt(curl, CURLOPT_WRITEDATA, &msg_in); 
```

然后你会在`msg_in`

**编辑**

`msg_in`当它在你的程序中变得无用时不要忘记释放

```
free(msg_in); msg_in = NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:53:39.807

一种通用（非 curl 特定）方法，在调用 curl 之前更改标准输出（路径 1）（或标准错误：路径 2）路径。阅读手册页`dup2`以了解如何将路径复制到特定描述符，以及`fdopen`从中获取的函数`FILE *`。

这个想法是您首先`dup`为 stdout 路径 1，和/或为 stderr 路径 2，将它们的副本保存在某处。然后你`close`原来的路径。您创建一个管道 ( `man pipe`)，然后创建管道`dup2`的第二个通道到路径 1（或 2）。您现在可以`read()`从管道的第一个通道获取放置在那里的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:49:10.990

试试这个：

```
curl_easy_setopt(curl, CURLOPT_RETURNTRANSFER, true); 
```

# javascript - F4 onKeyPress 与 Internet Explorer 不起作用

> ID：15571926
> 
> 赞同：1
> 
> 时间：2013-03-22T13:46:28.977
> 
> 标签：javascript, jquery, javascript-events

我在 IE9 上执行 jQuery onKeyPress() 时遇到问题。

在 Mozilla 上一切正常，但 IE9 出现问题。

当我将焦点设置到文本区域并按 F4 时，我调用函数来显示 div。这在 Mozilla 中运行良好，但在 IE9 中则不行。我尝试了许多与 onKeyDown/onKeyUp 的组合，但没有成功。

我会请你帮助测试解决方案。

我的代码是：

```
$('#textBox).on('keypress', foo);

function foo() {
    var KEYCODE_F4 = 115;
    if (event.which == KEYCODE_F4) {
        someMethod();
    }

} 
```

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:50:26.963

我认为

```
function foo() {
    ...
} 
```

应该

```
function foo(event) {
    ...
} 
```

正如[巴里查普曼](https://stackoverflow.com/users/655667/barry-chapman)所指出的，你也错过了`'`你的`$('#textBox')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:52:10.927

我希望不是因为这个：

```
$('#textBox).on('keypress', foo);
           ^-missing a ' 
```

应该：

```
$(document.body).on('keypress', '#textBox', function(event) {

   var KEYCODE_F4 = 115;
   if (event.which == KEYCODE_F4) {
       someMethod();
   }

}); 
```

# php - 歌曲长度倒计时，需要跟踪剩余长度

> ID：15571933
> 
> 赞同：2
> 
> 时间：2013-03-22T13:46:43.290
> 
> 标签：php, javascript, countdown

我有下面的 javascript 用于歌曲长度倒计时。我在一个php页面中使用它。

我遇到的问题是，当我刷新页面时，或者当我在播放歌曲时进入页面时，我不会得到剩余的长度。我会得到完整的歌曲长度倒计时。

例如，一首 2 分钟的歌曲。如果它从上午 9:38 开始，并且我在上午 9:39 进入页面，我想要 1 分钟倒计时，而不是 2 分钟。

所以我想真正的问题是：如何在服务器端跟踪剩余的歌曲长度？

```
var startTime, countAmt, interval;
function now() {
  return ((new Date()).getTime());
}
function tick() {
  var elapsed = now() - startTime;
  var cnt = countAmt - elapsed;
  var elem = document.getElementById("countdown");
  if (cnt > 0) {
    elem.innerHTML = minute(Math.round(cnt / 1000));
  } else {
    elem.innerHTML = "0:00";
    clearInterval(interval);
  }
}
function startTimer(secs) {
  document.getElementById("countdown").innerHTML = minute(secs);
  countAmt = secs * 1000;
  startTime = now();
  interval = setInterval(tick, 1000);  
}
function minute(secs){
    minVar = Math.floor(secs/60);  // The minutes
    secs = secs % 60;              // The balance of seconds
    if (secs < 10) {
        secs = "0"+secs;
    }
    return minVar+":"+secs;
}
startTimer(<?php echo $stream['info']['length'];?>);
document.getElementById("countdown").innerHTML = minute(<?php echo $stream['info']['length'];?>); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:45:31.727

使用 Winamp 的高级标题格式，我可以以这种格式发送歌曲开始的时间：`h:m:s`.

我得到总秒数：

```
sscanf($song_begins, "%d:%d:%d", $hours, $minutes, $seconds);
$song_begins_sec = $hours * 3600 + $minutes * 60 + $seconds; 
```

获取当前时间：

```
$now = date('H:i:s', time()); 
```

马上：

```
sscanf($now, "%d:%d:%d", $hours, $minutes, $seconds);
$now_sec = $hours * 3600 + $minutes * 60 + $seconds; 
```

然后我计算歌曲何时结束：

```
$songend = $song_begins_sec+$stream['info']['length']; 
```

所以正确的 $countdown 是：

```
$countdown = $songend-$now_sec; 
```

# inversion-of-control - Tapestry 是否管理应用程序内的所有线程？

> ID：15571938
> 
> 赞同：0
> 
> 时间：2013-03-22T13:46:53.187
> 
> 标签：inversion-of-control, ioc-container, tapestry

考虑服务，它`thread`在其中启动一些。是否会`Tapestry 5`部分管理该线程，例如关闭`hibernate`此类线程内的会话？（例如，我们可以`Session`从服务中传递这样的子线程内的对象。`Tapestry`在线程死亡后会安全地关闭这个会话吗？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:37:19.810

Tapestry 只能管理在你的 AppModule 中声明的东西。

作为一个简单的规则，如果您使用“new”关键字，它不会由 Tapestry 管理。

如果您希望 Tapestry 管理您的可运行文件，请查看 ParallelExecutor

如果你想模仿挂毯管理的线程，你必须在你的可运行对象完成后调用 Perthreadmanager.cleanup() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:37:45.277

Hibernate 会话附加到处理当前请求的 Web 容器线程。

如果您决定生成自己的线程并将该 Session 传递给它，那么只有在 Tapestry 提交之前或上述 Web 容器的线程结束处理该请求之前完成更改，才会提交对该 Session 的更改。

Tapestry 对休眠会话的控制绑定到当前请求，在处理请求后会话关闭，因此生成另一个比使用会话的请求更长的线程将是一个坏主意。

# firebreath - 如何访问插件代码中的数据属性？

> ID：15571941
> 
> 赞同：0
> 
> 时间：2013-03-22T13:46:57.730
> 
> 标签：firebreath

这是插件使用的标签`<object type="something" data="myfile.mytype"></object>`。现在我想在我的插件源代码中使用 src 值，我该如何访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:55:30.933

```
try {
    std::string test = m_host->getDOMElement()->getProperty<std::string>("src");
} catch (...) {
    // There wasn't a value to fetch
} 
```

# php - travis-ci 脚本

> ID：15571942
> 
> 赞同：17
> 
> 时间：2013-03-22T13:46:58.543
> 
> 标签：php, github, integration, phing, travis-ci

我正在尝试设置 phing 以使用 travis-ci，但我无法让它运行设置脚本来安装所有依赖项。

我的 .travis.yml 文件是：

```
language: php
php:
  - 5.2
script: ./.travis-phing.sh 
```

在特拉维斯，我得到了错误：

```
/home/travis/build.sh: line 105: ./.travis-phing.sh: Permission denied 
```

是什么原因造成的？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-22T14:20:01.797

**解决了**

要设置为执行的脚本。我用了：

```
chmod a+x .travis-phing.sh 
```

然后简单地提交，然后推回 github。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-19T06:29:22.317

# 使用 bash 运行脚本

**另一种选择是使用 bash 运行脚本**，这将省略修改文件权限的需要。

```
bash path/to/file.sh 
```

或者：

```
sh path/to/file.sh 
```

* * *

## *注意*

在这种情况下，您**不是在** *执行*脚本本身，而是在*执行* `bash`或`sh`随后*运行*脚本。因此脚本不需要是*可执行*的。

有道理？

* * *

我自己发现这个解决方案非常有用。我主要在 travis-ci 上运行`node`&`npm`项目，这些构建使用`npm test`您可以配置为任何内容的命令。

我要修改我需要`sudo chmod ...`在本地机器上使用的文件权限。但是你不能总是`sudo`在 travis-ci 上使用。

`sh file.sh`允许我在本地和 travis-ci 上运行我的测试，而无需手动更新权限。

# database - Joomla 3 JDatabase如何回显行

> ID：15571943
> 
> 赞同：1
> 
> 时间：2013-03-22T13:47:01.480
> 
> 标签：database, joomla

我找不到用于获取行和显示项目的有效语句`JDatabase`。

我的代码如下所示：

```
$db = JFactory::getDbo();
$query = $db->getQuery(true);
$query->select(array('item_id, item_name'));
$query->from('#__items'); 
```

如何打印出表格中的这些项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:58:02.507

文档页面在这里：[http ://docs.joomla.org/Accessing_the_database_using_JDatabase/3.0](http://docs.joomla.org/Accessing_the_database_using_JDatabase/3.0)

你需要添加这样的东西：

```
$db->setQuery($query);
$results = $db->loadObjectList(); 
```

这将为您提供一个对象数组，其中每个对象都是一行。

此页面：[http](http://docs.joomla.org/Accessing_the_database_using_JDatabase/1.5) ://docs.joomla.org/Accessing_the_database_using_JDatabase/1.5适用于 Joomla！1.5，但仍然有（恕我直言）获取数据的可能功能的最佳列表。我认为大多数仍然有效。

要输出 $results 数组，您可以使用以下内容：

```
foreach ($results as $row) :
    echo $row->item_id;
    echo $row->item_name;
endforeach; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:54:39.860

试试这样：

```
// Get a database object
$db = JFactory::getDbo();

$query = $db->getQuery(true);
$query->select('item_id, item_name');
$query->from('#__items');

// sets up a database query for later execution
$db->setQuery($query);

// fetch result as an object list
$result = $db->loadObjectList(); 
```

有关更多详细信息，请参阅[使用 JDatabase/3.0 访问数据库](http://docs.joomla.org/Accessing_the_database_using_JDatabase/3.0)的链接。有关如何获取结果的更多方法，您可以使用`loadResult()`, `loadRow()`, `loadAssoc()`, `loadObject()`, `loadResultArray()`, `loadRowList()`, `loadAssocList()`.

你也可以参考这个[Accessing the database using JDatabase/1.5](http://docs.joomla.org/Accessing_the_database_using_JDatabase/1.5)。

您也可以参考此链接了解如何

[开发模型-视图-控制器组件/3.0/简介](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/3.0/Introduction)

[开发模型-视图-控制器组件/2.5](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component)

希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:05:13.550

您无需将数组添加到您的选择查询中，您只需添加值，用逗号分隔，如下所示：

```
$db = JFactory::getDbo();
$query = $db->getQuery(true);
$query->select('item_id, item_name')
$query->from('#__items');
$db->setQuery($query);
$results = $db->loadObjectList(); 
```

# java - 在父类中记录静态方法

> ID：15571950
> 
> 赞同：3
> 
> 时间：2013-03-22T13:47:08.900
> 
> 标签：java, static, log4j

我有一个抽象类 Parent，有 2 个子类 A 和 B。Parent 有一个名为 do() 的静态方法。我想知道该静态方法是否可以在 Logger 中为类 A 添加日志信息，当它被称为 A.do() 时，当它被称为 B.do() 时记录 B。通常

```
protected final Logger LOGGER = Logger.getLogger(getClass()); 
```

不起作用，因为 do() 是一个静态方法，所以 Logger 也需要是静态的，但 getClass() 方法显然不是静态的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:00:00.370

`private final static Logger LOGGER = Logger.getLogger(A.class);`

每个类都有自己的`logger`: 指定类很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:22:12.490

我不会推荐它，但如果你真的想要它......

```
public class A {
  public static void do() {
    doImpl(A.class);
  }
  protected static void doImpl(Class<?> refClass) {
  }
}

public class B extends A {
  public static void do() {
    doImpl(B.class);
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T13:50:54.713

最佳做法是将 LOGGER 声明为静态，例如

```
protected final static Logger LOGGER = Logger.getLogger(getClass()); 
```

这样您就可以从动态和静态方法中使用 LOGGER。

此外，每个类都应该有自己的记录器实例。所以我会将受保护的更改为私有。

此外，您应该调用“MyApp.class”而不是调用“getClass()”，例如

```
private final static Logger LOGGER = Logger.getLogger(MyApp.class); 
```

# sorting - 在 分页不适用于 dynamicColumns+lazy+sorting

> ID：15571958
> 
> 赞同：1
> 
> 时间：2013-03-22T13:47:41.043
> 
> 标签：sorting, jsf-2, primefaces, datatable, pagination

我有一个生成动态列的延迟加载数据表

这是我的数据表

```
<p:dataTable var="iterator" id="dataTable" 
            value="#{MyManagedBean.lazyModel}" 
        paginator="true" rows="20"
            lazy="true">
    <p:columns value="#{MyManagedBean.columns}" var="column"
             columnIndexVar="colIndex"  
             sortBy="#{iterator[column.property]}"
               filterBy="#{iterator[column.property]}">
        <f:facet name="header">  
                   #{column.header}  
               </f:facet>  
            #{iterator[column.property]}  
   </p:columns> 
</p:dataTable> 
```

无需分页即可完美运行。如果我分页，load() 方法不会给出 SortField 值，而是给出“属性]”

谁能帮我解决这个问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T08:59:48.303

我相信这是一个 Primefaces 错误。

我认为在分页时应该将正确的排序详细信息传递给 LazyDataModel.load() 以便在您的数据库查询中使用。

添加

```
|| (table.isLazy() && table.isPaginationRequest(context)) 
```

到 org.primefaces.component.datatable.feature.SortFeature 中的 shouldDecode 方法应该可以解决这个问题。

```
public boolean shouldDecode(FacesContext context, DataTable table) {
    return isSortRequest(context, table) || (table.isLazy() && table.isPaginationRequest(context));
} 
```

我创建了一个新问题： [https ://code.google.com/p/primefaces/issues/detail?id=7068](https://code.google.com/p/primefaces/issues/detail?id=7068)

# clojure - 编写测试以确定代码是否正在并行执行（未来）

> ID：15571961
> 
> 赞同：2
> 
> 时间：2013-03-22T13:47:44.740
> 
> 标签：clojure

我有一段代码，我使用未来并行运行 -

```
(def services [s1 s2])

(defn get-data []
  (->>
   (map #(future
            (->> (p/fetch %)
                 (p/parse %)))
        services)
   (map deref)
   (apply concat)))

(get-data) 
```

上面这段代码的要求是并行运行两个服务。所以我想创建一个测试来确定函数是否`(get-data)`并行运行这两个服务的代码。如何编写这样的测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:34:04.167

使用代理将启动和停止事件记录到一个序列中，然后读取该序列以确保它在第一个停止事件之前至少包含两个启动事件。

```
 (map #(future
          (send watcher conj :start)
          (let [result (->> (p/fetch %)
                            (p/parse %))]
            (send watcher conj :finish)
            result))) 
```

或者您可以使用`with-redefs`包装您的 fetch 和 parse 函数以避免混合测试和生产代码。

# c# - 内容绑定到 ValueConverter 的后备或默认值

> ID：15571964
> 
> 赞同：1
> 
> 时间：2013-03-22T13:47:49.483
> 
> 标签：c#, wpf, xaml, binding, contentcontrol

我有一个内容控件，它根据当前状态显示动态内容。这一切都很好，但在设计时，我希望它显示默认状态。有什么办法可以使用`ValueConverter`or`FallbackValue`或其他东西来做到这一点？

XAML

```
<ContentControl Content="{Binding State, 
              Converter={StaticResource InstallationStateToControlConverter}}" /> 
```

C＃

```
class InstallationStateToControlConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {            
        //return controls depending on the state
        switch ((InstallationState)value)
        {
            case InstallationState.LicenceAgreement:
                return new LicenceAgreementControl();
            default:
                return new AnotherControl();
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

**更新**

根据 Viv 的问题，我已将以下内容添加到我的 XAML 中，它可以编译，但我仍然在设计器中看不到任何内容？

```
d:DataContext="{d:DesignInstance Type=local:LicenceAgreementControl, IsDesignTimeCreatable=True}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:48:34.033

好的，我终于开始工作了，

这是评论中多种内容的组合。希望这可以为您解决。

假设所有运行时都可以查看显示`ContentControl`和排序的模型

这些是我做的步骤。

*   确保视图模型有一个无参数的构造函数
*   在构造函数中分配`ContentControl` `Content`绑定值（`State`在您的情况下）要显示的默认 ViewModel。

例子：

```
public LicenceAgreementControl() {
  State = new NewViewModel();
} 
```

*   `d:DataContext`从您的主 xaml 文件中删除所有出现的。
*   使用一些键将视图模型创建为 xaml 中的普通旧资源，并将其分配`DataContext`给您的`ContentControl`

例子：

```
<Window.Resources>
  <local:LicenceAgreementControl x:Key="LicenceAgreementControl" />
</Window.Resources>
<ContentControl Content="{Binding State}" DataContext="{Binding Source={StaticResource LicenceAgreementControl}}" /> 
```

*   在您的视图模型构造函数中放置一个断点
*   Expression Blend 中的开放解决方案
*   现在在 Visual Studio 中，工具 -> 附加到进程... -> “选择列表中的混合” -> 单击附加
*   切换回混合。关闭并打开 xaml 文件。应该调用 Visual Studio 中的断点
*   逐步进行时，我注意到一个异常被调用，我可以通过 IsInDesignState 检查绕过该异常。
*   如果您没有例外，您应该在混合设计器中看到默认视图模型的视图加载（同样适用于 Visual Studio 设计器）

现在如果您可以在设计时看到视图加载正常，我们可以只更新设计时的方法，否则问题出在当前设置视图模型的方式上，需要首先对其进行排序

^^一旦上面的东西工作正常。要将其作为仅设计功能，请从 xaml 中删除作为资源创建的视图模型，还可以`DataContext`从`ContentControl`.

现在你只需要

```
d:DataContext="{d:DesignInstance Type=local:LicenceAgreementControl, IsDesignTimeCreatable=True}" 
```

在 xaml 文件中，您应该完成（仍然需要 ctor 使用您希望在中显示的默认视图模型设置 State 属性`ContentControl`）

# javascript - 脚本权限错误，即使启用了 CORS

> ID：15571968
> 
> 赞同：9
> 
> 时间：2013-03-22T13:48:06.730
> 
> 标签：javascript, cross-domain, cors

我的页面 P1 上有一个 iframe，它托管在服务器 S1 上。在运行时，我会`iframe.src=`加载 iframe 内服务器 S2 上托管的页面 P2。

我知道 CORS 和服务器 S2 上的页面 P2，我已经设置`Access-Control-Allow-Origin: *`了，当我在浏览器中检查它时，我可以在响应头上确认相同的内容。

现在页面 P2 及其所有资产只加载文件，但是当我尝试使用 P1 访问 P2 的 DOM 时`window.frames["iframe"].document`，它会引发权限错误。

即使我`Access-Control-Allow-Origin: *`在服务器 S2 上设置，为什么我仍然无法访问 P2 的 DOM？这`Access-Control-Allow-Origin: *`是应该工作的方式吗？

![请求-响应](../Images/1fd827589f11b3da327d3b92c6a78540.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:55:54.450

您可以使用 PostMessages 设置文档之间的通信。即使他们来自不同的域。

您可以通过 PostMessage 发送数据。它是有限的，但这总比没有好

看看[http://easyxdm.net/wp/](http://easyxdm.net/wp/)它有很好的 api 可以使用。很久以前，我使用该库进行了跨域 http <-> https ajax 请求。

# wordpress - 图像在 wordpress 函数简码中显示为“外部”循环

> ID：15571973
> 
> 赞同：0
> 
> 时间：2013-03-22T13:48:32.210
> 
> 标签：wordpress, function, shortcode

我从一两个指南中制作了一个简码，[news cat="1" num="5"]Title[/news] in functions.php in WordPress。代码如下：

```
 Create the callback function

    function recent_posts_function($atts, $content = null) {
       extract(shortcode_atts(array(
          'num' => 1,
          'id' => ''
       ), $atts));

       $return_string = '<h3>'.$content.'</h3>';
       $return_string .= '<div class="custom-recent-posts">';
       query_posts(array(
        'orderby' => 'date', 
        'order' => 'DESC' , 
        'showposts' => $num,
        'cat' => $id,
        ));
       if (have_posts()) :
          while (have_posts()) : the_post();
            $return_string .= '<div class="custom-recent-posts-post">';
            $return_string .= ''.the_post_thumbnail('news-thumbnail').'';
            $return_string .= '<h3><a href="'.get_permalink().'">'.get_the_title().'</a></h3>';
            $return_string .= '<p>'.get_the_date().'</p>';
            $return_string .= '<p>'.get_the_excerpt().' <a href="'.get_permalink().'">Les mer</a></p>';
            $return_string .= '</div>';
          endwhile;
       endif;
       $return_string .= '</div>';

       wp_reset_query();
       return $return_string;
    }

// Register the shortcode

function register_shortcodes(){
   add_shortcode('news', 'recent_posts_function');
} 
```

问题是，代码输出不正确。将图像移动到我的容器上方。比如这个（我知道我的 HTML 可以更整洁）。

```
<img width="248" height="100" src="http://localhost:8888/dhs/wp-content/uploads/2013/03/Diakonveien-18-bygg2-248x100.jpg" class="attachment-news-thumbnail wp-post-image" alt="Test Diakonveien-18-bygg" />
<img width="163" height="100" src="http://localhost:8888/dhs/wp-content/uploads/2013/03/large-test.jpg" class="attachment-news-thumbnail wp-post-image" alt="Test large-test" />

<h3>Nyheter</h3>
<div class="custom-recent-posts">
<div class="custom-recent-posts-post">
    <h3><a href="http://localhost:8888/dhs/for-ansatte-nyheit-test/">For ansatte nyheit test</a></h3>
    <p>22\. mars 2013</p>
    <p>Content <a href="http://localhost:8888/dhs/for-ansatte-nyheit-test/">Les mer</a></p>
</div>
<div class="custom-recent-posts-post">
    <h3><a href="http://localhost:8888/dhs/nytt-innlegg-for-student-test/">Nytt innlegg for student test</a></h3>
    <p>21\. mars 2013</p>
    <p><a href="http://localhost:8888/dhs/nytt-innlegg-for-student-test/">Les mer</a></p>
</div> 
```

任何简单的解决方案，还是我应该重建我的代码？我知道有这个插件。所以我只是要求有人指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:19:02.040

您应该使用[`get_the_post_thumbnail`](http://codex.wordpress.org/Function_Reference/get_the_post_thumbnail), 因为`the_post_thumbnail`将输出缩略图而不是返回它。

# javascript - 表单域：添加新的 到一个内部 通过 Javascript

> ID：15571979
> 
> 赞同：0
> 
> 时间：2013-03-22T13:48:35.540
> 
> 标签：javascript, forms

我正在尝试通过按钮将新字段添加到我的表单中。但是，它将它添加到表单的外部。关于编辑什么来实现这一点的任何想法？谢谢。

我的 HTML：

```
<div id="page">

<h1>Quick Order</h1>
<div id="dynamicInput">
<form method="post" name="QuickOrderMulti">

<input type="hidden" name="formName" value="dmiformQuickOrderMulti">

  <p>Product #  <input type='Text' name="ProductNumber" title="Enter Product #"></p>
  <p>Product #  <input type='Text' name="ProductNumber" title="Enter Product #"></p>

<input type="submit" value="Add"><input type="button" value="Add another text input"     onClick="addInput('dynamicInput');">

</form>
</div>
</div> <!-- page --> 
```

我的 JavaScript：

```
<script type="text/javascript">
var counter = 0;
var limit = 3;
function addInput(dynamicInput){
     if (counter == limit)  {
          alert("You have reached the limit of adding " + counter + " inputs");
     }
     else {
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "Product # " + (counter + 1) + " <br><input type='text'     name='ProductNumber[]'>";
          document.getElementById(dynamicInput).appendChild(newdiv);
          counter++;
     }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:50:53.483

您将附加到表单周围的 DIV，因此这些字段不会在子表单内。

将表单放在“dynamicInput” div 周围...或插入表单内。

**选项 A：**

```
<form method="post" name="QuickOrderMulti">
  <div id="dynamicInput">
  ...
  </div>
</form> 
```

**选项 B：**

```
<div id="dynamicInput">
  <form method="post" name="QuickOrderMulti" id="QuickOrderMulti">
  ...
  </form>
</div>

<script type="text/javascript">
  ...
  document.getElementById('QuickOrderMulti').appendChild(newdiv);
                           ^^^^^^^^^^^^^^^
  ...
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:53:18.680

您正在将输入添加到 div，而不是表单。只需给表单一个 id 并将输入字段添加到其中。

```
document.getElementById("formId").innerHTML = "Product # " + (counter + 1) + " <br><input type='text'     name='ProductNumber[]'>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:17:39.340

尝试：

```
<script type="text/javascript">
var counter = 0;
var limit = 3;
function addInput(dynamicInput){
 if (counter == limit)  {
      alert("You have reached the limit of adding " + counter + " inputs");
 }
 else {
 var parent = document.getElementById('myform')
 var element = null;
 try { // IE
 element = document.createElement('<input type="text" name="ProductNumber[]">');
 } 
 catch (e) { // W3C
 element = document.createElement("input");
 element.setAttribute("type", "text");
 element.setAttribute("name", "ProductNumber[]");
  }
 parent.appendChild("Product # " + (counter + 1) + element);
 counter++;
  }
}
 </script> 
```

# java - 使用 setPropertyActionListener 设置 ENUM

> ID：15571980
> 
> 赞同：1
> 
> 时间：2013-03-22T13:48:36.927
> 
> 标签：java, jsf, primefaces

我正在尝试使用 setPropertyActionListener 设置枚举属性，但我不知道该怎么做。这是实体：

```
@Entity
public class Invoice {
    public enum InvoiceStatus { ACTIVE, CANCELED }

        ...

        @Enumerated(EnumType.STRING)
    private InvoiceStatus status;

        ...

        public InvoiceStatus getStatus() {
        return status;
    }

    public void setStatus(InvoiceStatus status) {
        this.status = status;
    } 
```

这是命令按钮，假设使用 setPropertyActionListener 将状态设置为 ACTIVE

```
 ...

  <h:form id="invoiceCreatedSuccessfully">
        <p:dialog header="#{msg['title.success']}" widgetVar="invoiceCreatedSuccessfullyDialog" resizable="false" showEffect="fade" hideEffect="fade">  
            <h:panelGrid columns="2" rows="3" style="margin-bottom: 10px">  
                <h:outputText value="#{msg['message.invoiceCreatedSuccessfully']}" />
            </h:panelGrid>  
            <p:commandButton value="#{msg['label.acknowledged']}" actionListener="#{invoiceManager.reload}" action="viewInvoices">
                <f:setPropertyActionListener target="#{invoiceManager.invoice.status}" value="ACTIVE" />
            </p:commandButton>
        </p:dialog>
    </h:form> 
```

未报告错误，但未设置数据库中的“状态”字段。有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:10:20.130

~~字符串不会直接转换为 EL 中的枚举，您需要在**faces-config**中进行自定义转换，jsf 有一个适合您的枚举转换器，~~

 ~~```
<converter>
  <converter-for-class>java.lang.Enum</converter-for-class>
  <converter-class>javax.faces.convert.EnumConverter</converter-class>
</converter> 
```~~  ~~现在查看 EnumConverter 的源代码，它似乎只有当 targetClass 在转换器中可用时才有效。

因此，您需要将其扩展为与您的 enum 一起使用，

```
public class MyEnumConverter extends EnumConverter {
  public MyEnumConverter () {
    super(MyEnum.class);
  }
}

<converter>
  <converter-id>MyEnum</converter-id>
  <converter-class>com.test.MyEnumConverter</converter-class>
</converter> 
```

添加`<f:converter converterId="MyEnum"/>`你的组件。

如果你有很多枚举并且为了让事情变得简单，你可以看看omnifaces [http://showcase.omnifaces.org/converters/GenericEnumConverter](http://showcase.omnifaces.org/converters/GenericEnumConverter)~~

# ubuntu - 启动时运行的 Ubuntu 程序

> ID：15571981
> 
> 赞同：0
> 
> 时间：2013-03-22T13:48:38.723
> 
> 标签：ubuntu

我有 2 个没有尽头的程序，当我启动我的 Ubuntu 服务器时，我想在后台运行它们。现在我在我的 rc.local 中：

```
setsid mono ../root/Check.exe

setsid sh ../root/blabla.sh 
```

它们都是无穷无尽的，所以 Check.exe 永远不会退出，因此 blabla.sh 永远不会运行。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:52:03.897

使用`nohup`which 停止接收`NOHUP`信号的进程，并在您退出调用程序的 shell 时终止。`&`在后台运行一个进程。

```
nohup setsid mono ../root/Check.exe &

nohup setsid sh ../root/blabla.sh & 
```

# google-drive-api - 谷歌驱动器 REST API。根目录

> ID：15571983
> 
> 赞同：7
> 
> 时间：2013-03-22T13:48:42.140
> 
> 标签：google-drive-api

我需要列出“我的云端硬盘”的所有文件，但只列出紧随其后的文件和文件夹，而不是同时列出云端硬盘中的所有文件和文件夹。

谢谢你的帮助，

马里奥

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T14:24:01.970

我建议使用[`files.list`](https://developers.google.com/drive/v2/reference/files/list)API 方法。
设置`q`参数：

```
'root' in parents and trashed = false 
```

这意味着您可以在页面上找到：[搜索文件](https://developers.google.com/drive/search-parameters)。[您可以在APIs Explorer Drive API v2](https://developers.google.com/drive/search-parameters)页面上测试 API 方法。

请另见：

*   [按文件夹获取 Drive SDK 上的文件列表](https://stackoverflow.com/questions/11400669/getting-a-list-of-files-by-folder-on-drive-sdk)。

# c# - 在 DirectX 中渲染时的性能问题

> ID：15571994
> 
> 赞同：1
> 
> 时间：2013-03-22T13:49:20.457
> 
> 标签：c#, directx, rendering, render, direct3d

在我的项目中，我展示了很多球体。

![装置](../Images/beea4c00d90eec1be04cc950196af1c0.png)

为了显示球体，我加载了一个包含一些值的文件。因此它可能是 1600 个球体。现在我在渲染时遇到性能问题...... :(

在这一部分中，我初始化了我的设备对象：

```
 try
        {
            meshList = new List<Sphere>();

            // Erstellt die PresentParameters für weitere Einstellungen des Device
            PresentParameters presParams = new PresentParameters()
            {
                Windowed = true,                            // Device nur innerhalbe des Fensterhandels benutzen
                SwapEffect = SwapEffect.Discard,            // Grafikkarte entscheidet selbst wie sie den Backbuffer zur anzeige bringt
                EnableAutoDepthStencil = true,              // Boolean zum Merken der Tiefe
                AutoDepthStencilFormat = DepthFormat.D16    // Format der Tiefe
            };

            // Erzeugt eine Instanz von dem Device
            device = new Device(0,                                      // Nummer fuer den Grafikadapter der verwendet wird                  
                                DeviceType.Hardware,                    // Parameter über die Garfikkarte oder CPU ausführen
                                panel1,                 // Fensterhadel für das Device 
                                CreateFlags.HardwareVertexProcessing,   // Einstellung des Device. Gibt an, dass die Vertices nur per Software verarbeitet werden 
                                presParams);                            // Gibt die weiteren Einstellungen mit

            // Wenn das Device neupositioniert wird
            device.DeviceReset += new System.EventHandler(this.OnResetDevice);
            // Führt das Reset aus
            OnResetDevice(device, null);

            // Definiert keine Vor und Rückseite
            device.RenderState.CullMode = Cull.Clockwise;
            // Direct3D-Beleuchtung deaktivieren
            device.RenderState.Lighting = false;
            // Beschreibt einen festen Füllmodus
            device.RenderState.FillMode = FillMode.Solid;

            // Erstellt den Buffer für die Vertices (Lab Koordinatensystem)
            vertexBuffer = new VertexBuffer(typeof(CustomVertex.PositionColored),   // Typ der Vertices
                                            18,                                     // Anzahl der Vertices
                                            device,                                 // Gerätekontext unser device
                                            0,                                      // Anzahl der Flags zur Verarbeitung der Vertice
                                            CustomVertex.PositionColored.Format,    // Typ der Vertices (Weil man auch eigene Strukturen definieren kann)
                                            Pool.Default);                          // Speicherung der Vertices

            // Event welches aufgerufen wird wenn der Vertexbuffer erstellt wurde
            vertexBuffer.Created += new System.EventHandler(this.OnCreateVertexBuffer);
            // Event wird von Hand aufgerufen
            this.OnCreateVertexBuffer(vertexBuffer, null);

            return true;    // Device wurde erstellt
        }
        catch { return false; } // Device konnte nicht erstellt werden 
```

在这一部分中，我渲染所有顶点：

```
 public void Render()
    {
        // Fragt ob das Device erstellt wurde und noch gültig ist
        if (device == null)
            return;

        // Inhalt des Backbuffers löschen und das ganze mit einer Farbe einfärben
        device.Clear(ClearFlags.Target | ClearFlags.ZBuffer,    // Die entsprechende Oberfläche
                     System.Drawing.Color.Black,                // Die Farbe 
                     1.0f,                                      // Abstand vom Betrachter, an dem die Oberfläche gelöscht wird und einen Wert, ...
                     0);                                        // ...der in jedem Stencil-Buffer-Eintrag gespeichert wird.

        // Anfang der Szene
        device.BeginScene();
        // Matrizen aufsetzen
        SetupMatrices();

        // Bindet den Buffer an das Device
        device.SetStreamSource(0,           // Nummer des Streams
                               vertexBuffer,// Der Buffer
                               0);          // StartOffset in dem Buffer

        // Teilt dem Device das Format der Vertices mit
        device.VertexFormat = CustomVertex.PositionColored.Format;
        // Zeichnet die Dreiecke
        device.DrawPrimitives(PrimitiveType.LineList,   // Typ der Primitive
                              0,                        // Eintrag des ersten Vertex
                              3);                       // Anzahl der Primetive

        // Zeichnet jedes einzelne Sphere
        foreach (Sphere mesh in meshList)
        {
            mesh.labMesh.DrawSubset(0);
        }

        // Ende der Szene
        device.EndScene();
        // Bringt die Zeichnung auf das Fensterhandle
        device.Present();
    } 
```

这是创建每个球体的类：

```
/// <summary>
/// Die Klasse Sphere
/// </summary>
public class Sphere
{
    // Radius der Kugel
    private const float radius = 4f;
    // Die Anzahl der Ebenen einer Kugel
    private const int slices = 40;
    // Die Anzalh der Flächen einer Ebene
    private const int stacks = 40;

    // Das Mesh zum Darstellen der Kugel
    private Mesh mesh = null;
    private Vector3 vec;
    public Vector3 min;
    public Vector3 max;

    /// <summary>
    /// Gibt den Mesh zurück
    /// </summary>
    public Mesh labMesh
    {
        get { return mesh; }
    }

    public Vector3 labVector 
    {
        get { return vec; }
    }

    /// <summary>
    /// Erstellt das Mesh
    /// </summary>
    /// <param name="device">Das 3D Device</param>
    /// <param name="color">Die Farbe der Kugel</param>
    /// <param name="labValues">Die Lab Werte der Kugel</param>
    public void createMesh(Device device, Color color, params float[] labValues)
    {
        // Erstellt die Kugel mit der Anbindung an das Device
        mesh = Mesh.Sphere(device, radius, slices, stacks);
        // Kopiert das Mesh zum Erstellen des VertexArrays
        Mesh tempMesh = mesh.Clone(mesh.Options.Value, Vertex.FVF_Flags, device);
        // Erstellt den VertexArray
        Vertex[] vertData = (Vertex[])tempMesh.VertexBuffer.Lock(0, typeof(Vertex), LockFlags.None, tempMesh.NumberVertices);

        // Weist jedem Vertex die Farbe und die Position zu
        for (int i = 0; i < vertData.Length; ++i)
        {
            vertData[i].color = color.ToArgb();
            vertData[i].x += labValues[1];
            vertData[i].y += labValues[0] - 50f;
            vertData[i].z += labValues[2];
        }
        min = new Vector3(labValues[1], labValues[0] + 100f, labValues[2]);
        max = new Vector3(labValues[1], labValues[0] - 100f, labValues[2]);

        // Gibt den VertexBuffer in der Kopie frei
        tempMesh.VertexBuffer.Unlock();
        // Löscht den Mesh aus dem Speicher
        mesh.Dispose();
        // Legt die Kopie in der Meshinstanz ab
        mesh = tempMesh;

        Vector3 v = new Vector3(labValues[1], labValues[0], labValues[2]);
        vec = v;
    }
}

/// <summary>
/// Vertex für die Kugel
/// </summary>
struct Vertex
{
    public float x, y, z; // Position of vertex in 3D space
    public int color;     // Diffuse color of vertex

    /// <summary>
    /// Konstruktor der Vertex
    /// </summary>
    /// <param name="_x">X(A) - Position</param>
    /// <param name="_y">Y(L) - Position</param>
    /// <param name="_z">Z(B) - Position</param>
    /// <param name="_color">Die Farbe</param>
    public Vertex(float _x, float _y, float _z, int _color)
    {
        x = _x; y = _y; z = _z;
        color = _color;
    }

    // Das Format des Vertex
    public static readonly VertexFormats FVF_Flags = VertexFormats.Position | VertexFormats.Diffuse;
} 
```

我不知道如何通过渲染 1600 个球体来提高性能！我认为在游戏中也必须是一个解决方案。

我希望你有一个想法来帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:30:47.890

我建议通过分析器运行您的代码，并查看代码中的瓶颈所在并对其进行优化。

查看[这个问题](https://stackoverflow.com/q/10644/1496443)，了解 C# 有哪些分析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:47:42.020

首先我不得不说微软不支持托管 DirectX。你最好使用 XNA 之类的东西，或者更好的是[SlimDX](http://slimdx.org/)。

一种方法是仅使用一个球体，然后设置包含矩阵数据的第二个顶点流。然后，您可以使用一个单独的绘制调用来渲染实例化的球体。这应该会显着提高性能。

另一种方法是构建一个巨大的顶点缓冲区，其中包含尽可能多的球体，这样你就可以`DrawSubset`减少调用次数。这将提高性能。

也就是说，每帧 1600 次绘制调用很高，但并不是*那么*重要，因此应该可以按原样获得不错的性能。

可以尝试的几件事是在您的`mesh.Clone`通话中添加以下标志：

1.  只写
2.  优化顶点缓存
3.  共享

还要确保关闭 alpha 混合（可能但值得一试）。

理想情况下，按从前到后的顺序渲染球体将优化溢出（写入像素的次数也应尽可能低），但这通常会使用比您节省的 GPU 时间更多的 CPU。

其他要记住的事情是你的领域有多复杂。他们可以减少tris的数量吗？

除此之外，使用 Caesar 建议的某种调试器（尽管我从不输入；））是一个很好的前进方式。可能只是托管 DirectX 的性能不足以为您提供您想要的结果......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:53:28.497

在此示例中，您的 Draw Call 数量是瓶颈，而不是您的 GPU 性能。您绝对应该减少绘图调用的数量。对于一款完整的高端游戏，在 PC 上的 draw call 数量很少超过 2000，这是一个非常优化的管道。在笔记本电脑上，这仍然是一个非常高的数字。使用 C# 时的目标是最多 1000 个绘图调用。

为了解决您的问题，有一些选择。

第一种选择是将所有数据放入一个缓冲区。您应该将顶点缓冲区视为发送到 gpu 的数据块，并且您希望向 gpu 发送尽可能少的东西，因为这里的开销很大。您应该将所有球体放入单个缓冲区或几个缓冲区中。这将解决您的性能问题。合并静态对象是游戏引擎中的常见做法。

第二种选择是，如果您需要可移动的球体，您可以使用实例化。实例化是一种技术，您可以在其中多次渲染相同的数据，每个实例都有一些额外的数据。这只需要一个绘图调用。现在所有 GPU 通常都支持实例化，因此如果您需要移动对象或参数化对象，请使用它。一个快速的谷歌肯定会提供更多的信息。

最后一点，就像已经提到的那样，托管 Directx 已经死了好几年了。它很慢，只有 dx9。使用 c# 时应该切换到 SlimDX（XNA 也已死）。