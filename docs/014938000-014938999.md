# StackOverflow 问答 14938000-14938999

# ios - 如何为使用 ARC 的项目构建没有 ARC 的静态库？

> ID：14938006
> 
> 赞同：0
> 
> 时间：2013-02-18T13:56:48.890
> 
> 标签：ios, objective-c, xcode4.5, static-libraries

如何为使用 ARC 的项目构建没有 ARC 的静态库？

我找到了一些静态库的源代码，我想为我的项目构建它，但我使用 ARC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:05:23.637

静态库可以在没有 ARC 的情况下构建，并使用 ARC 包含在您的项目中，而无需做任何特别的事情。如果要直接添加源代码，则需要在构建阶段为每个非 arc 文件添加以下编译选项：`-fno-objc-arc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:00:59.557

一般情况下：您可以选择不使用 ARC 的少数文件（静态库）和使用 ARC 的您自己的文件。

但对于 lib，它不是必需的。

[您可以非常简单地合并 ARC 和非 ARC 文件](http://www.codeography.com/2011/10/10/making-arc-and-non-arc-play-nice.html)，但是您已经编译了 lib，那么它并不关心。

# function - 一个像素的 4 个邻域

> ID：14938012
> 
> 赞同：-4
> 
> 时间：2013-02-18T13:57:14.010
> 
> 标签：function, matlab, filter, neighbours

`nlfilter`我知道matlab中有一个函数。我试图找到的是`4-neighbours`一个像素。这是否意味着一个`2x2`窗口？我们可以这样做`nlfilter`吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:08:40.377

我想如果你从街区而不是邻居的角度来考虑它，你可能会发现这更容易理解。所以一个 2x2 的邻居实际上只是一个 2x2 的块。

如果您谈论的是相对于北、南、东、西像素的中心像素，那么您将需要使用 3x3 块。不幸的是，该街区还将包括东北、西北、东南、西南邻国。

[这是在 Matlab 中使用 nlfilter 进行滑动邻域运算的示例](http://www.mathworks.com/help/images/performing-sliding-neighborhood-operations.html)。

# asp.net-mvc - ObjectContext.SaveChanges 事件的事件处理程序

> ID：14938015
> 
> 赞同：0
> 
> 时间：2013-02-18T13:57:16.240
> 
> 标签：asp.net-mvc, entity-framework

我的要求是在`ObjectContext.SaveChanges`调用方法时更新对象的 UpdatedDate 属性，为此我尝试为 savechanges 事件附加事件处理程序，我想在其中找到正在更新的对象并更新其 UpdateDate 属性，但我没有找到方法找到正在更新的对象。

任何的想法？我是否在做正确的事情来满足我的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:01:53.120

你可以看看`ObjectStateManager`

像这样的东西：

```
private void context_SavingChanges(object sender, EventArgs e)
{
    var context = (ObjectContext)sender;
    var lst = context.ObjectStateManager
                  .GetObjectStateEntries(EntityState.Modified); 

    foreach(var item in lst)
    { 
      var entity = item.Entity;
       // TODO: set values here:
    }  
} 
```

# java - 使用夏令时分配 java.sql.Timestamp

> ID：14938017
> 
> 赞同：2
> 
> 时间：2013-02-18T13:57:20.633
> 
> 标签：java, sql, timestamp, dst

我很难理解`java.sql.timestamp`。

如果我运行不推荐使用的 java 构造函数：

```
java.sql.Timestamp(106,2,26,1,0,0,0)
java.sql.Timestamp(106,2,26,2,0,0,0)
java.sql.Timestamp(106,2,26,3,0,0,0)   //<-- Separated by one hour 
```

我得到：

```
2006-03-26 01:00:00.0
2006-03-26 03:00:00.0     
2006-03-26 03:00:00.0   //<--These last two are the same 
```

夏令时发生在这些时间（至少在我的国家）。但时间前后的日期不会移动。为什么两个不同的时间会同时返回？

我想获取时间戳作为我的输入，我该如何强制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:58:50.697

Don't use this deprecated constructor, which is deprecated precisely because it uses the default time zone.

Use a Calendar (or a DateFormat) with the appropriate time zone (CET), set the fields of the calendar (or parse a string containing the date you want to insert), get the milliseconds from the calendar/date, and construct a Timestamp from the milliseconds.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:30:26.640

使用`System.currentTimeMillis();`为您提供不受夏令时、闰秒和其他日期意外调整影响的格林威治标准时间。

```
long now = System.currentTimeMillis(); 
```

或手动指定时区：

```
long ms = Calendar.getInstance(TimeZone.getTimeZone("GMT")).getTimeInMillis(); 
```

资料来源：[在 Java 中获取 GMT 时间](https://stackoverflow.com/questions/5236052/get-gmt-time-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-07T00:56:18.087

# javascript - db.transaction 完成后的 WebSQL 递归循环

> ID：14938021
> 
> 赞同：1
> 
> 时间：2013-02-18T13:57:30.810
> 
> 标签：javascript, jquery, cordova

我正在尝试遍历从 a 返回的一组结果`db.transaction`。在这个循环中，我将 html 内容附加到一个 JavaScript 变量中，一旦循环完成，它就会使用 jQuery 的`html()`函数添加到 DOM 中。这按预期工作。

问题是在循环期间，我正在进行另一个`db.transaction`查询。我遇到的问题是第二个查询（循环内）在移动到循环的下一次迭代之前没有完成。

我最初使用`for()`循环，但认为这是导致问题的原因，因为 for 循环无法知道`db.transaction`循环内的循环是否已完成。

所以我决定使用递归循环，如下所示：

```
var html_content = '<table class="booking-table"><tbody>';
var i = 0;

function getPhotoCountForSyncItemSuccessRecursive(i){
    html_content += "More HTML content, not relevant"
    localStorage.setItem("current_row_booking_id", results.rows.item(i).id);
    i++;
    db.transaction(getPhotoCountForSyncItem, getPhotoCountForSyncItemFailRecursive,                 getPhotoCountForSyncItemSuccessRecursive(i));

    if (i == results.rows.length){
        html_content += '</tbody></table>';
        $('.booking-items-wrapper').html(html_content);
    }
}

getPhotoCountForSyncItemSuccessRecursive(i); 
```

因此，首先我设置了 2 个变量，一个用于保存 html 内容（**html_content**），另一个用于保存当前结果的计数（**i**）

接下来是`getPhotoCountForSyncItemSuccessRecursive()`接受一个参数的函数声明，即当前计数 ( **i** )。在这个函数之后，我正在调用该函数来启动递归循环。

在函数中，我正在对 html_content 变量进行大量附加（此处未显示，因为它无关紧要）。然后我设置一个`localStorage`名为`current_row_booking_id`的值，该值具有当前结果 id 的值（不久将在第二个查询中使用）。

然后我增加计数，并调用函数的递归部分：

```
db.transaction(getPhotoCountForSyncItem, getPhotoCountForSyncItemFailRecursive, getPhotoCountForSyncItemSuccessRecursive(i)); 
```

如您所见，我调用了一个函数`getPhotoCountForSyncItem`，并在成功时调用递归函数`getPhotoCountForSyncItemSuccessRecursive(i)`（创建我的循环）

我的`getPhotoCountForSyncItem`（以及它的成功和失败回调）看起来像：

```
function getPhotoCountForSyncItem(tx){
    tx.executeSql("SELECT * FROM booking_photo WHERE booking_id = '" + localStorage.getItem("current_row_booking_id") + "'", [], getPhotoCountForSyncItemSuccess, getPhotoCountForSyncItemFail);
}

function getPhotoCountForSyncItemFail(tx, results){
  console.log("getPhotoCountForSyncItemFail");
  localStorage.removeItem("current_row_booking_id");
}

function getPhotoCountForSyncItemSuccess(tx, results){
    if (results.rows.length == 0){
        console.log('no photos');
        localStorage.removeItem("current_row_booking_id");
    } else {
        console.log('got photos ' + results.rows.length);
        localStorage.removeItem("current_row_booking_id");
    }
} 
```

我遇到的问题是递归函数（ ），只有在函数完成后`getPhotoCountForSyncItemSuccessRecursive`才能再次调用它，然后再触发。`getPhotoCountForSyncItem`关于什么是错的任何建议？有没有更好的方法来做到这一点？

# content-management-system - Oracle UCM -ridc - 获取文档的所有版本

> ID：14938027
> 
> 赞同：3
> 
> 时间：2013-02-18T13:57:40.953
> 
> 标签：content-management-system, oracle-ucm, webcenter

我通过 RIDC 从 Oracle UCM 获取文件。我正在使用 DataBinder，如下所示：

```
IdcClient client =getUCMConnection();
DataBinder dataBinder = client.createBinder ();
dataBinder.putLocal ("IdcService", "GET_FILE");
dataBinder.putLocal ("dID", dID);
IdcContext userContext = new IdcContext(username);
ServiceResponse response = client.sendRequest (userContext, dataBinder);  
InputStream fstream = response.getResponseStream ();

....... etc. 
```

我想问一下，我怎样才能获得文档的“所有版本”而不是最新发布的文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T14:55:02.780

首先您必须调用服务[**DOC_INFO**](http://docs.oracle.com/cd/E29542_01/doc.1111/e11011/core.htm#autoId73)，您可以使用**REVISION_HISTORY**集获取修订的结果集。

您将获得每个版本的特定 dID，迭代它们并使用带有[**dID**](http://docs.oracle.com/cd/E29542_01/doc.1111/e11011/core.htm#BABFDEFH)的 GET_FILE 作为每个版本的参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:00:48.657

我现在无法对其进行测试，但我认为您正在寻找的服务是 GET_INFO，尝试一下并检查您获得的所有结果集我很确定其中一个具有所有文档修订的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T23:17:55.323

您可以使用服务[REV_HISTORY](http://docs.oracle.com/cd/E14571_01/doc.1111/e11011/c05_core003.htm#CSSRG2312)来获取包含所有修订信息的结果集 REVISIONS。

# php - PHP - 将数组转换为新数组

> ID：14938030
> 
> 赞同：1
> 
> 时间：2013-02-18T13:57:48.393
> 
> 标签：php, arrays, multidimensional-array

**当前阵列：**

```
stdClass Object (
[name1] => Someting very useful
[text1] => Description of something useful
[url1] => link.to/useful
[name2] => Someting very useful2
[text2] => Description of something useful2
[url2] => link.to/useful2
[name3] => Someting very useful3
[text3] => Description of something useful3
[url3] => link.to/useful3
) 
```

**我需要：** 创建多维数组，其中 name1、text1、url1 等键将被放入自己的数组中。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:05:41.483

我想你想要：

```
$array = array_chunk((array)$object, $chunkSize = 3, $preserveKeys = true); 
```

（`$object`上面是你的对象）

这会将您的对象转换为一个数组，并将其拆分为较小的数组，每个数组包含 3 个元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:01:35.930

好;

```
$array = (array) $object; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:10:25.260

即使您没有一致的输入，这也将非常通用，例如每个孩子恰好三个属性。此外，对象中的属性不必按任何特定顺序排列。

```
//$obj is the object you have in the question
$objects = array();
foreach($obj as $key => $val) {
    $result = preg_match('%([a-zA-Z]+)([0-9]+)%', $key,$matches);
    $new_key = $matches[2];
    $property = $matches[1];
    if(!isset($objects[$new_key])) {
        $objects[$new_key] = array();
    }
    $objects[$new_key][$property] = $val;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T14:11:02.467

```
$array = array();
$c = count($object) / 3;
(Array) $object;

for($i = 1; $i <= $c; $i++){

    $array[$i]['name' + $i] = $object['name' + $i];
    $array[$i]['text' + $i] = $object['text' + $i];
    $array[$i]['url' + $i] = $object['url' + $i];

} 
```

# php - 如何从 PHP 连接到 Exchange 在线 API

> ID：14938033
> 
> 赞同：5
> 
> 时间：2013-02-18T13:57:55.337
> 
> 标签：php, exchangewebservices

我手头有一项任务，需要我连接 Exchange Online 帐户并在 PHP 中列出所有日历条目。

我已经阅读了许多 Microsoft 帮助文档，但都是指 c# 代码。有人可以指导我完成使用 PHP 实现这一目标的步骤。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T14:14:34.480

尝试这个：

```
$ews = new ExchangeWebServices($host, $username, $password);

$request = new EWSType_FindItemType();
$request->Traversal = EWSType_ItemQueryTraversalType::SHALLOW;

$request->ItemShape = new EWSType_ItemResponseShapeType();
$request->ItemShape->BaseShape =
        EWSType_DefaultShapeNamesType::DEFAULT_PROPERTIES;

$request->CalendarView = new EWSType_CalendarViewType();
$request->CalendarView->StartDate = date('c', strtotime('01/01/2011 -00'));
$request->CalendarView->EndDate = date('c', strtotime('01/31/2011 -00'));

$request->ParentFolderIds = new EWSType_NonEmptyArrayOfBaseFolderIdsType();
$request->ParentFolderIds->DistinguishedFolderId =
        new EWSType_DistinguishedFolderIdType();
$request->ParentFolderIds->DistinguishedFolderId->Id =
        EWSType_DistinguishedFolderIdNameType::CALENDAR; 
```

有了这个：[https ://github.com/jamesiarmes/php-ews](https://github.com/jamesiarmes/php-ews)

# wpf - StateHelper（带有 MVVM 的 VisualStateManager）

> ID：14938037
> 
> 赞同：0
> 
> 时间：2013-02-18T13:58:03.757
> 
> 标签：wpf, mvvm, visualstatemanager

基于[StackOverflow 的问题（已回答）或者您可以在](https://stackoverflow.com/questions/6002046/binding-visualstatemanager-view-state-to-a-mvvm-viewmodel)[GitHub 上](https://gist.github.com/Nilzor/4078545)查看 StateHelper 本身（已更新）

有用！但是我不明白当助手方法 SetState 获取 DependencyObject（视图控制）作为输入参数时，助手从视图中解析依赖视图模型的方式。这意味着无论如何视图模型都必须有一个控制链接（这很糟糕）并将其传递给助手。

我试着问另一种方式（如果你很难理解我的英语，以防万一）。如何从视图模型动态更改控制的视觉状态。很明显，如果你能给我一个尽可能简单的例子。

我也没有办法作为触发器。我必须根据更改视图模型属性来更改视觉状态。WinRT 中的触发器不像我以前看到的那样工作。

## 更新

也许我想错了，这段代码将状态绑定到隐藏在 StateHelper 中的属性名称。但是我仍然做不到，我无法理解对于具有 100 个项目的面板（用户控件）来说，其中视图模型（该面板的）必须更改每个项目的状态。

# 已回答

这是一个愚蠢的问题，在问这样的问题之前，我会为所有需要睡眠的人回答。

在这个使用 StateHelper 的片段中隐藏了一个恶魔

```
<controls:SomeControl x:Name="ball" MyApp:StateHelper.State="{Binding State, Mode=TwoWay}"/> 
```

“状态”是您的视图模型中的一个属性，它只是一个带有状态名称的字符串。您所需要的只是更改它，并借助“双向”绑定调用 StateHelper.SetState 进行正确的控制（在我的情况下，我使用了 contorl 的包装器 - “ControlName”WithStates，我可以在面板视图中设置控制状态的属性选择控制模型）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:52:23.873

这是一个愚蠢的问题，在问这样的问题之前，我会为所有需要睡眠的人回答。

在这个使用 StateHelper 的片段中隐藏了一个恶魔

```
<controls:SomeControl x:Name="ball" MyApp:StateHelper.State="{Binding State, Mode=TwoWay}"/> 
```

“状态”是您的视图模型中的一个属性，它只是一个带有状态名称的字符串。您所需要的只是更改它，并借助“双向”绑定调用 StateHelper.SetState 进行正确的控制（在我的情况下，我使用了 contorl 的包装器 - “ControlName”WithStates，我可以在面板视图中设置控制状态的属性选择控制模型）

我也在视图模型中使用枚举类型并在视图中使用转换器。多亏了这一点，我不再在我的视图模型中使用字符串，我的视图片段看起来像

```
<local:Ball DataContext="{Binding}" common:StateHelper.State="{Binding State, Mode=TwoWay, Converter={StaticResource EnumToBallStatesConverter}}"/> 
```

# javascript - 事件监听器的问题

> ID：14938039
> 
> 赞同：0
> 
> 时间：2013-02-18T13:58:13.853
> 
> 标签：javascript, html

我正在制作一个有按钮重置的应用程序

现在这个重置按钮需要将所有值重置为默认值

我找到了一个例子：http: [//jsfiddle.net/RoryMcCrossan/b55Au/2/](http://jsfiddle.net/RoryMcCrossan/b55Au/2/)

但我无法在我的 Index.cshtml 中使用它 我想知道是否有人可以告诉我如何在我的应用程序中使用它，也许将函数放在 .js 文件中并将这个 .js 文件加载到布局中或其他什么？

我的 index.cshtml 类：

```
@{

ViewBag.Title = "Index";
}

<script>
    function resetInput1(e) {
        document.getElementById('input1').value = document.getElementById('input1').defaultValue;
    }
    function resetInput2(e) {
        document.getElementById('input2').value = document.getElementById('input2').defaultValue;
    }
    function resetSelect1(e) {
        document.getElementById('select1').value = document.getElementById('select1').selectedIndex = 0;
    }

    document.getElementById("btn1").addEventListener('click', resetInput1, true);
    document.getElementById("btn2").addEventListener('click', resetInput2, true);
    document.getElementById("btn3").addEventListener('click', resetSelect1, true);

</script>

<form id="test">
    Input 1: <input type="test" id="input1" value="abcded" /><br><br>

    Input 2: <input type="test" id="input2" value="xyz123" /><br><br>

    Select 1:
    <select id="select1">
        <option selected="selected">Please select...</option>
        <option>Option #1</option>
        <option>Option #2</option>
        <option>Option #3</option>
        <option>Option #4</option>
    </select><br /><br />

    <input type="button" id="btn1" value="Reset Input #1" /><br><br>    
    <input type="button" id="btn2" value="Reset Input #2" /><br><br>    
    <input type="button" id="btn3" value="Reset Select #1" /><br><br>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:39:16.213

在您的文档完成加载之前分析您的脚本，这意味着当它尝试查找 ID 时，尚未创建元素，因此没有添加事件侦听器。要么将你的标签放在相应的 html 下，要么更好，把它放在一个外部 .js 文件中，并在结束 body 标签之前引用它。

# php - Output on same form in Javascript

> ID：14938048
> 
> 赞同：-1
> 
> 时间：2013-02-18T13:58:55.177
> 
> 标签：php, javascript, html

I want to search employee list depend on area name which is selected from dropdown list. I can retrieve names of areas from database into dropdown list from PHP HTML. But now I am confused how to pass selected option in dropdown list to SQL query in PHP. Also I want index numbers of selected options. My code is as follows.

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title></title>
</head>
<body>
<?php
include 'Connect.php';
$query = "SELECT varAreaName FROM tbArea" ;
$result = mysql_query($query);
echo'<select name="somename">';
echo'<option value="ANY">--ANY--</option>';
while($row = mysql_fetch_assoc( $result )) { 
    echo '<option value="'.$row['varAreaName'].'">' . $row['varAreaName'] . '</option>';   
}
echo '</select>';                
?>
</body>
</html> 
```

Also I want the output on same form using Javascript. But I am new in JavaScript. Please help me to sort this out.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:05:16.163

为此，您可能想了解 AJAX。仅当有另一个脚本执行服务器端操作（在本例中为数据库查询）时，才可能使用 javascript 从数据库中动态更改页面。

这应该让你朝着这个方向前进。[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

此外，强制 - 请不要使用 MySQL，因为它已被弃用并且不再由 PHP 维护。使用 MySQLi 或 PDO。

# android - 在 actionbarsherlock 中自定义操作栏

> ID：14938050
> 
> 赞同：2
> 
> 时间：2013-02-18T13:59:05.997
> 
> 标签：android, styles, android-actionbar, actionbarsherlock

我想自定义我的**操作栏**，如下**图所示**。

![在此处输入图像描述](../Images/0e5bddde6cbe4023f4ee8759e86a7fe5.png)

我在实现中使用 Actionbarsherlock，正如我所展示的那样，我总共有 5 个图标，其中 3 个位于中心，另外 2 个位于侧面。

还添加了分隔符，

如何添加这样的样式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T14:05:53.417

只需创建一个布局。作为分隔符，您可以使用宽度为 1dp 的视图，您的图标将是图像视图。然后将此布局设置为您的操作栏。

您可以像这样将布局添加到您的操作栏：

```
ActionBar actionBar = getSupportActionBar();

View actionBarView = getLayoutInflater().inflate(
            R.your_layout, null);

actionBar.setCustomView(actionBarView);
actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM);

actionBar.setDisplayUseLogoEnabled(true);
actionBar.setDisplayShowTitleEnabled(false);
actionBar.setDisplayShowHomeEnabled(true);
actionBar.setDisplayHomeAsUpEnabled(true); 
```

然后，如果您想将 onClickListener 添加到您的 ImageView，您可以这样做：

```
ImageView imageViewOption = (ImageView) actionBarView.findViewById(R.id.image_view_option); //it's important to use your actionbar view that you inflated before

imageViewOption.setOnClickListener(...); 
```

如果您不想在操作栏中显示应用程序图标，则可以使用 setDisplayXXX 选项。你可以在这里找到更多：http: [//developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

# artificial-intelligence - 计算机程序比程序员更聪明？是否可以？

> ID：14938057
> 
> 赞同：-1
> 
> 时间：2013-02-18T13:59:18.437
> 
> 标签：artificial-intelligence, evolutionary-algorithm

今天，我问一位心理学家，你如何设计一个智商测试来评估一个比设计师更聪明的人？他回答我，就像你可以设计一个棋类游戏程序一样，设计者赢不了！

但是，作为初学者，我不确定这个问题是否可以在这里得到回答，但是**如果我们可以编写一个可以自行进化和学习的程序**，使人类（甚至是程序员）无法预测它，这对我来说很有趣。希望答案是假的，否则，未来可能会出现行为不可预测的病毒或蠕虫，控制人类社会！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:08:56.620

人工智能代理在某个编程空间内运行（下棋代理在下棋空间内）。

代理不能离开编程空间。国际象棋特工不太可能很快接管世界。从这个意义上说是可以预见的。

这个空间中的行为在某种程度上是可以预测的（这种行为毕竟是基于明确定义的数学方程）（这些方程通常非常复杂，因此不容易预测，但可能），但通常会涉及一些随机性，这显然是不可预测。

请注意，“智能”与可预测性不同。长期以来，研究人员一直试图让人工智能真正变得智能，但进展缓慢（可以说）。

**编辑：**

请注意，某些代理可以将其编程空间设置为整个世界。这不会强制执行很多边界。

我所说的“编程空间”并不是指被编程到代理中的内容，而是代理被编程为观察或执行的内容。如果代理只能看到棋盘，只能下棋，它怎么会不仅仅是下棋代理？

真正的进化可能允许代理扩展他们的编程空间，但我必须考虑这是否真的可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T14:03:56.677

有可能的。国际象棋程序实际上确实以很大的优势击败了他们的设计师。他们以较小的优势击败了国际象棋世界冠军，但这只是时间问题。

有一个系统“学会如何更快地学习”的例子：地球上的进化已经优化了自己。基因和行为被优化以促进高边际改善率。由于自然缺陷（辐射、化学过程……），繁殖几乎从不失败，基因的突变量恰到好处。“可调参数”设置得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:15:24.930

我认为您在问题中的文字描述**了两种**情况：

1.  第一个 alinea 涵盖了 IQ 测试和国际象棋游戏。两者都有有限的选择。尽管有很多可能性，但它仅限于一定数量，并且可以从一开始就排除很多可能性，因为它们的使用率太低甚至无法考虑。因此，存在这样的程序。请注意，仍然有很多可能性，这就是为什么它还不完美。

2.  第二个 alinea 涵盖自学习程序或机器人。在现实世界中，有无数种可能性，可能发生的事情。您可能会尝试编写程序，但是（在不久的将来）您无法获得生活所提供的所有东西。

我必须在下面评论杜克林的评论。如果你设法编写一个程序，该程序可以学会对生活所提供的几乎所有东西（包括负面部分）做出反应，那么这样的人工智能可能会评估他自己的“空间”，并且能够看甚至走出它。

长话短说：它会发生。其结果将是未知的：要么机器人被完美地编程，要么将被关闭，或者人类将灭绝。由于我们将以您现在无法想象的速度推进技术，每一种情况都是可能的。你有疑问吗？去告诉某人 50 年前，一台机器击败了国际象棋中最好的棋手。

# android - How does Chrome's glyph cache work?

> ID：14938060
> 
> 赞同：1
> 
> 时间：2013-02-18T13:59:23.367
> 
> 标签：android, html, google-chrome, canvas

Thanks to the new Chrome experimental profiler, I'm getting some more information about a Canvas2D app I'm developing. The glyph cache memory usage is *massive*, as you can see below :

![Chrome Profiler](../Images/30348d7977861ff9b12d613b7eafb1c5.png)

I suspect that one of the reasons why it's doing that is that I'm drawing each character one by one along a path *(because only Firefox currently supports text along a path)*. Thus each character is added into the glyph cache, making the memory usage ginormous and the rendering speeds slow as hell.

It is especially worrying in Android, where I'm working on limited resources. The app is essentially unusable unless I don't render any text that way.

[This article](http://simonsarris.com/blog/322-canvas-drawtext-considered-harmful) suggests that using small offscreen canvases and `drawImage` calls improves performance a lot, but that was 2 years ago.

So, how does Chrome's glyph cache actually work? Does it cache each character, each word, each string passed to `fillText`? Does it cache only by character or by a tuple of `(character, size)`?

# java - Java日期比较器问题

> ID：14938067
> 
> 赞同：0
> 
> 时间：2013-02-18T13:59:53.527
> 
> 标签：java, priority-queue

我在按日期整理比较器时遇到问题。日期格式应为“dd/MM/yyyy”所以我从 SQL 数据库中调用我的信息，然后通过执行以下操作将字符串转换为日期：

```
 public void setDeadlineDate(String deadDate) throws ParseException {
        this.d_date = deadDate;
        //convert strings to dates
        formatter = new SimpleDateFormat("dd/MM/yyyy");
        convertedDeadlineDate = (Date)formatter.parse(deadDate);
    } 
```

然后我在下面创建一个 get 方法来调用我的比较器。我必须举一些例子，但在奇数日期不合适和比较不正确方面总是存在差异。

示例 1：

```
 @Override
    public int compare(JobRequest j1, JobRequest j2) {

        if (j1.getConvertedDeadlineDate().before(j2.getConvertedDeadlineDate())) {
            return -1;
        } else if (j1.getConvertedDeadlineDate().after(j2.getConvertedDeadlineDate())) {
            return 1;
        } 
        else {
            return 0;
        }
    } 
```

示例 2：

```
public int compare(JobRequest j1, JobRequest j2){
return j1.getConvertedDeadlineDate().compareTo(j2.getConvertedDeadlineDate());
} 
```

这两个例子都给了我问题，我的优先队列截止日期没有按照我想要的正确顺序排列。在我的数据库中，它们以 2012 年 12 月 1 日以下格式“01/12/2012”保存为 varchar，因为它不允许我使用他们的日期函数将其保存为英文格式。

他们是我转换字符串然后比较的更好方法还是我错过了什么？

谢谢

编辑：获取订购日期的输出：

*   2011 年 5 月 4 日
*   2012 年 12 月 16 日
*   2012 年 6 月 18 日
*   2013 年 12 月 17 日
*   2013 年 12 月 17 日
*   2013 年 12 月 16 日
*   2013 年 12 月 17 日
*   2012 年 8 月 14 日
*   2013 年 12 月 19 日

我在哪里声明 PriortyQueue：

```
private Comparator<JobRequest> comparator = new JobQueueComparator(); //calls my comparator
    private PriorityQueue< JobRequest> scheduledJobs = new PriorityQueue<JobRequest>(100, comparator);

    public void addJob(JobRequest job) {
        // now add job to priority queue
        scheduledJobs.add(job); // add jobs from the resultset into queue
    } 
```

scheduleJobs.add(job) 只是从结果集中填充队列并不断添加到队列中，直到读取数据库中的所有字段，见下文

```
public void populateQueueFromDB() {
        // create priority queue
        try {
            String url = "jdbc:mysql://localhost:3306/project";
            Connection conn = DriverManager.getConnection(url, "root", "nbuser");

            PreparedStatement stmt = conn.prepareStatement("SELECT user_id,s_date,e_date,d_date,department,projectname,projectapplication,priority,cores,disk_space,analysis FROM booking");
            ResultSet rs;
            rs = stmt.executeQuery();

            //List<JobRequest> jobList = new ArrayList<JobRequest>();

            while (rs.next()) {
                JobRequest job = new JobRequest();
                User user = new User();
                user.setUserID(rs.getString("user_id"));
                job.setUserID(user.getUserID()); // changes the /user id to the job.setuser id so can call for my queue print.
                job.setStartDate(rs.getString("s_date"));
                job.setEndDate(rs.getString("e_date"));
                job.setDeadlineDate(rs.getString("d_date"));
                job.setDepartment(rs.getString("department"));
                job.setProjectName(rs.getString("projectname"));
                job.setProjectApplication(rs.getString("projectapplication"));
                job.setPriority(rs.getInt("priority"));
                job.setCores(rs.getInt("cores"));
                job.setDiskSpace(rs.getInt("disk_space"));
                job.setAnalysis(rs.getString("analysis"));

                schedulerPriorityQueue.addJob( job );

            }
            schedulerPriorityQueue.printQueue();

            conn.close();

        } catch (Exception e) {
            System.err.println("Got an exception! ");
            System.err.println(e.getMessage());
        }

    }

} 
```

打印队列：

```
public void printQueue() {
        for (JobRequest jr : scheduledJobs) {

            System.out.print(jr.getUserID() + "-->");
            System.out.print(jr.getStartDate() + "--START-->");
            System.out.print(jr.getEndDate() + "---END-->");
            System.out.print(jr.getDeadDate() + "--DROP-->");
            System.out.print(jr.getDepartment() + "-->");
            System.out.print(jr.getProjectName() + "-->");
            System.out.print(jr.getProjectApplication() + "-->");
            System.out.print(jr.getPriority() + "--PRIORITY-->");
            System.out.print(jr.getCores() + "-->");
            System.out.print(jr.getDiskSpace() + "-->");
            System.out.println(jr.getAnaylsis());

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:39:30.040

当你这样做时：`for (JobRequest jr : scheduledJobs) { ...`你实际上是在使用一个 implicit `Iterator`，它不能保证这些项目将按优先级顺序返回（由你的比较器定义）。

如上所述，文档指出：

> 此类及其迭代器实现了 Collection 和 Iterator 接口的所有可选方法。方法 iterator() 中提供的 Iterator 不能保证以任何特定顺序遍历优先级队列的元素。如果您需要有序遍历，请考虑使用 Arrays.sort(pq.toArray())。

这意味着队列中作业的顺序和迭代器的顺序不一定相同。

如果您只需要列出工作，请使用`Arrays.sort`文档中提到的方法。

如果您想确保您的 PriorityQueue 正常工作，您必须将它作为一个整体使用，执行以下操作：

```
while(!scheduledJobs.isEmpty()) {
     ... = scheduledJobs.poll();
     //print, do whatever
} 
```

请记住，这会从队列中删除元素，并且只能用于测试目的，或者根据需要实际处理作业。但这应该以实际优先顺序向您显示日期。

在我看来，`PriorityQueue`应该如何使用存在一些混淆。我会说常规用例类似于：

*   将元素添加到队列
*   定义一个方法来处理队列中的“作业”（每个元素）
*   当队列不为空时，使用`poll`（返回最小的）获取每个元素，然后做任何你需要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:26:44.367

PriorityQueue 的文档说

> 方法 iterator() 中提供的 Iterator 不能保证以任何特定顺序遍历优先级队列的元素。如果您需要有序遍历，请考虑使用 Arrays.sort(pq.toArray())

. [http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:33:02.990

这对我来说非常有效：

```
public class JobRequest implements Comparable<JobRequest> {

    static final DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");
    Date convertedDeadlineDate;

    Date getConvertedDeadlineDate() {
        return convertedDeadlineDate;
    }

    public JobRequest(String deadDate) {
        try {
            convertedDeadlineDate = (Date) formatter.parse(deadDate);
        } catch (ParseException e) {
            e.printStackTrace();
        }
    }

    @Override
    public int compareTo(JobRequest j) {
        return this.getConvertedDeadlineDate().compareTo(
                j.getConvertedDeadlineDate());
    }

    public static void main(String[] args) {
        List<JobRequest> list = new ArrayList<>();
        list.add(new JobRequest("10/10/2010"));
        list.add(new JobRequest("09/09/2009"));
        list.add(new JobRequest("11/11/2011"));
        list.add(new JobRequest("08/08/2008"));

        Collections.sort(list);

        for (JobRequest j : list) {
            System.out.println(formatter.format(j.getConvertedDeadlineDate()));
        }
    }

} 
```

这导致输出：

```
08/08/2008
09/09/2009
10/10/2010
11/11/2011 
```

# java - JFileChooser 在顶部显示目录，就像在 Windows 中一样

> ID：14938069
> 
> 赞同：2
> 
> 时间：2013-02-18T13:59:58.517
> 
> 标签：java, swing, windows-7, jfilechooser

有没有办法让 JFileChooser 在对话框顶部显示目录字符串，就像在 Windows 中一样？我需要它，因为这样，用户可以粘贴他们想要的值，而不是每次都遍历层次结构。

**PS：**如果可能，我想避免使用自定义 FileChoosers。

**我想要的是：**

![在此处输入图像描述](../Images/d36eb61ef1925a3689ff26e92c2fe450.png)

**是）我有的：**

![在此处输入图像描述](../Images/8c611c030c6fb2fa585d887faa725309.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:58:06.267

最好的解决方案是使用`FileChooser`from `JavaFX`。它具有模拟 Windows 文件对话框所需的所有功能。

[http://docs.oracle.com/javafx/2/api/javafx/stage/FileChooser.html](http://docs.oracle.com/javafx/2/api/javafx/stage/FileChooser.html)

# html - 锚图像和文本高度不正确

> ID：14938073
> 
> 赞同：0
> 
> 时间：2013-02-18T14:00:04.093
> 
> 标签：html, css, positioning

我正在尝试创建一个带有内部文本和图像作为链接的选项卡。我面临的问题是锚尺寸和/或定位似乎与图像不同。正如您在 jsfiddle 链接中看到的那样，图像底部和我的 div 底部之间有一些间距，我不知道为什么会这样。

[JSFiddle 链接](http://jsfiddle.net/XLeGd/)

* * *

如果您无法访问该链接，HTML 代码：

```
<div id="SapDataBtn">
    <a href="#">
        <img runat="server" src="http://i.cubeupload.com/Tm2tPF.png" />
    </a>
    <a href="#" id="SapBtnText">
        Data
    </a>
</div> 
```

CSS：

```
#SapDataBtn {
  background-color: #c7ddf2;
  text-align: center;
  border-bottom-left-radius: 20px;
  border-bottom-right-radius: 20px;
  padding-left: 15px;
  padding-right: 15px;
  width: 90px;
}
#SapDataBtn a:link,
#SapDataBtn a:visited,
#SapDataBtn a:hover,
#SapDataBtn a:active {
  font-size: 15px;
  font-weight: bold;
  color: #19456e;
  text-decoration: none;
}
#SapDataBtn img {
  border-style: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:07:43.103

添加`vertical-align:bottom;`你的`#SapDataBtn img`，这应该可以解决问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:17:05.950

试试下面...它会帮助你...

```
#SapDataBtn img {
  border-style: none;
  vertical-align: middle;
} 
```

小提琴：http: [//jsfiddle.net/XLeGd/1/](http://jsfiddle.net/XLeGd/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:05:23.663

也许这就是你要找的：

```
#SapBtnText {
    vertical-align: super;
} 
```

# wpf - WPF：将控件高度设置为填充网格行高

> ID：14938074
> 
> 赞同：8
> 
> 时间：2013-02-18T14:00:10.373
> 
> 标签：wpf, grid, height

具有 3 行和 3 列的 WPF 网格控件。有问题的行高设置为自动。在前两个单元格中，我有两个具有动态高度的控件。在第三个单元格中，我有另一个控件，我希望将其自动设置为在 Grid 单元格中进行拉伸。我试过`VerticalAlignment="Stretch"`了，但这只是将网格行高度设置为控件的高度。我在这里有什么选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T16:51:32.313

不确定您在单元格 3 中使用的是哪种控件，但大多数 WPF 控件会自动拉伸以适应网格单元格。网格的行高将由单元格 1 和 2 中控件的高度设置。

如果您使用某种自定义控件，其中高度的默认行为不同，您可以设置`Height="Auto"`.

如果这也不起作用，您可以进行数据绑定以获取单元格 1 或 2 中控件的实际高度。将`Height`单元格 3 中控件的属性设置为以下内容：

```
Height="{Binding ActualHeight, ElementName=MyControlNameFromCell1, Mode=OneWay}" 
```

**编辑**

另一种可能更健壮的方法是对行的高度进行数据绑定。因此，不要使用`"Auto"`行高，而是使用上面显示的数据绑定。

# tsql - TSQL：用名称中的计数器声明变量

> ID：14938075
> 
> 赞同：1
> 
> 时间：2013-02-18T14:00:09.387
> 
> 标签：tsql, variable-names

如何在 MS SQL Server 上使用名称中的计数器创建/声明变量？我有一个带有 CURSOR 的“for-like”循环和

```
WHILE @@FETCH_STATUS = 0 
```

但是：这些值的数量在不断变化。所以我想把每个值都写在一个自己的变量中。我的目标是获得 var 名称，例如：@var1、下一个循环 @var2、下一个 @var3 等。好吧

```
SET @counter = (@counter + 1) 
```

并不难，但是如何将@counter 的值（！）添加到@var 的名称（！）中？

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:07:11.160

我认为您应该创建一个临时表来存储这些变量。例如：

```
DECLARE @ValTable TABLE
(
  ID int,
  Val int, -- or any type you need
) 
```

现在插入一个新值：

```
SET @counter = (@counter + 1);
INSERT INTO @ValTable VALUES (@counter, <VALUE>); 
```

要获得此值，请`[i]`使用简单的选择：

```
SELECT Val FROM @ValTable where ID=<Number of value here>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:53:42.887

我真的不明白你想要实现什么，但一种方法是在你的 for 循环中构建你想要的查询字符串，而不是执行它以获得你想要的格式化结果。

# jquery - 单击并关闭时从右到左动画 div 位置

> ID：14938076
> 
> 赞同：0
> 
> 时间：2013-02-18T14:00:13.567
> 
> 标签：jquery, animation, html

我在这里有一个关于从右到左为点击事件上的 div 位置设置动画的快速问题。我这样设置css

```
#featured {
position:fixed;
top:0px;
right:-400px;
border-left:1px solid #000;
background:#fff;
padding:20px;
width:350px;
height:100%;
opacity:0.9; 
```

}

现在，我可能会让这个东西工作以将正确的位置设置为 0px，但是当我再次关闭它时我被卡住了。

我基本上有一个名为“信息”的 div。单击时，#featured 正在被动画化，并在其中包含 div #close 以让#featured 动画回到原来的右侧：-400px; 位置。

我发现其他带有动画功能的帖子，但没有一个带有“关闭”“打开”功能的帖子。因为当谈到 Jquery 时我仍然是一个菜鸟，所以我想我问她。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:12:42.150

试试这个：

```
$("#target").click(function () {
    var left = $('#coolDiv').offset().left;
    $("#coolDiv").css({
        left: left
    }).animate({
        "left": "0px"
    }, "slow");
}); 
```

[**在这里演示**](http://jsfiddle.net/xLZV5/)

# ruby-on-rails-3 - active_admin login page testing with Capybara

> ID：14938082
> 
> 赞同：2
> 
> 时间：2013-02-18T14:00:37.977
> 
> 标签：ruby-on-rails-3, activeadmin

```
 visit new_admin_user_session_path
 fill_in('admin_user_email', :with =>  "admin@example.com")
 fill_in('admin_user_password', :with => "password")
 click_button('Login')
 page.must_have_content("Signed in successfully") 
```

After running my test i am getting error like :

```
MiniTest::Assertion: expected there to be text "Signed in successfully" in "Invalid email or password. Shakti Login Email*Password*Remember me Forgot your password?".
.rvm/gems/ruby-1.9.3-p362/gems/capybara_minitest_spec-1.0.0/lib/capybara_minitest_spec.rb:42:in `block in define_assertion'
(eval):6:in `must_have_content' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T08:18:14.510

用户很可能不在数据库中。首先创建它： `admin = FactoryGirl.create(:admin_user, email: 'admin@example.com', password: 'password')`如果您使用的是 FactoryGirl

# wpf - Stop scrolling for a content in a scrollviewer

> ID：14938086
> 
> 赞同：0
> 
> 时间：2013-02-18T14:00:49.033
> 
> 标签：wpf, silverlight, c#-4.0, windows-8

Is it possible to stop scrolling for a content in a scrollviewer? e.g.

```
<ScrollViewer>
    <Grid>
        <TextBlock /> <!-- I want not to scroll this item when rest is scrolling -->
        <!-- other controls -->
    </Grid>
</ScrollViewer> 
```

Placing the element outside scrollviewer is not considered.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:48:13.810

如果这是在使用 WPF 的桌面应用程序中，最好的方法是重写 ScrollViewer 的[ArrangeOverride](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.arrangeoverride.aspx)方法。在这种情况下，我建议您创建自己的自定义附加属性，如**ScrollHoldOffset**并将其分配给 TextBox。然后，在覆盖中，您可以检查每个控件以查看它是否设置了此属性。如果是这样，则控件应保持在原位而不是滚动，直到滚动超过某个阈值（**ScrollHoldOffset**）。

如果这是一个 Windows 应用商店应用程序，它将变得更加困难，因为 ScrollViewer 是密封的，因此不能继承，也不能覆盖 ArrangeOverride 方法。只要滚动位置发生变化，就可以编写一些代码来“撤消”滚动。我将从[这个示例](http://www.c-sharpcorner.com/blogs/3703/how-to-detect-the-scrollbar-has-changed-in-a-scrollviewer-in.aspx)开始，该示例向您展示如何订阅滚动条位置更改事件。然后，您可以更改 RenderTransform 以偏移滚动。

抱歉，我今天没有时间编写代码，所以它必须是理论上的，而不是实践的。我希望它有所帮助。

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:28:19.520

我会这样做的方式：

```
<ScrollViewer>
    <TextBlock /> 
    <ScrollViewer>
        <Grid>
            <!-- other controls -->
        </Grid>
    </ScrollViewer>
</ScrollViewer> 
```

# javascript - javascript 函数是否在所有对象之间共享？

> ID：14938087
> 
> 赞同：0
> 
> 时间：2013-02-18T14:00:52.027
> 
> 标签：javascript, function

所以这是一些代码

```
ob1 = {
 m: function(){
   alert(this);
   }
}

ob2.m = ob1.m; 
```

那是因为我认为在这种情况下函数只存储在内存中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:04:14.100

是的，使用该代码，两者`ob1`都`ob2`引用了**相同**的函数`m`。如果你调用，`ob1.m()`它会调用引用。如果你调用，它会调用引用。该函数只有*一个*副本，并且您对该函数有多个*引用*。在 JavaScript 中，函数是真实的对象，就像任何其他对象一样。（许多其他编程语言并非如此。）`m``this``ob1``obj2.m()``m``this``ob2`

 **你也可以这样做：

```
function m() {
}

var ob1 = {m: m};
var ob2 = {m: m}; 
```

他们再次共享功能。

或这个：

```
function MyObject() {
}
MyObject.prototype.m = function() {
};

var ob1 = new MyObject();
var ob2 = new MyObject(); 
```

它们再次共享该函数，因为它们`MyObject.prototype`在通过创建它们时都接收为它们的底层原型`new MyObject`，并且原型具有对该函数的引用。

同样（在启用 ES5 的环境中）：

```
var MyProto = {
    m: function() {
    }
};

var ob1 = Object.create(MyProto);
var ob2 = Object.create(MyProto); 
```

该对象再次共享一个原型，并且该原型具有该`m`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:02:01.200

是的。函数是第一类对象。您只会真正与对它们的引用进行交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:07:16.113

在您的示例中，您只需将链接存储到 ob2 中的函数 m。

要使函数全局化，您需要设置对象原型。我不推荐它，但这应该有效：

```
Object.prototype.test=1;
{test} --> 1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-18T14:08:34.743

是的，但您可以像下面这样分配对象

```
ob2 = ob1; 
```

**不喜欢** `ob2.m = ob1.m;`

看到这个小提琴：http: [//jsfiddle.net/RYh7U/87/](http://jsfiddle.net/RYh7U/87/)**

# java - Must Primefaces Data Exporter target be an absolute id?

> ID：14938101
> 
> 赞同：2
> 
> 时间：2013-02-18T14:01:41.007
> 
> 标签：java, jsf, jakarta-ee, primefaces, java-ee-6

I am trying to use Prime Faces data exporter component:

```
<p:dataExporter type="xls" target="table_name" fileName="summaries"/> 
```

It would seem that the target attribute needs to point to the id of a data table. On my page I have a composite component which gets included twice. It takes one parameter which tells it where to get its data from. So the composite component renders the same table twice, but with different data.

I want the exporter for both tables. In my composite component I have:

```
<p:dataTable id="overview" 
```

Of course when this is rendered twice JSF generates the id dynamically e.g.

```
form:tabView:j_id1693604892_4df53909:overview 
```

Is there any way I can get the Prime Faces data exporter to work in this circumstance ?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:53:30.217

来自 DataExporter.java 的代码（Primefaces 源代码已简化）

```
String tableId = (String) target.getValue(elContext);

Exporter exporter = ExporterFactory.getExporterForType(exportAs);

UIComponent component = event.getComponent().findComponent(tableId);

if(component == null) {
    throw new FacesException("Cannot find component \"" + tableId + "\" in view.");
}

if(!(component instanceof DataTable)) {
    throw new FacesException("Unsupported datasource target:\"" + component.getClass().getName() + "\", exporter must target a PrimeFaces DataTable.");
}

DataTable table = (DataTable) component;
exporter.export(context, table, outputFileName, isPageOnly, isSelectionOnly, encodingType, preProcessor, postProcessor); 
```

所以不支持多个组件。

你可以尝试什么：

1.  将数据表 ID 作为单独的参数传递给您的复合组件。

2.  为您的复合组件提供 id。因为它是一个命名容器，所以它将这个 id 附加到它的子组件中。这样您就可以随意引用它。

# android - Android TextView Line Break keep words together (and be efficient)

> ID：14938103
> 
> 赞同：1
> 
> 时间：2013-02-18T14:01:44.103
> 
> 标签：android, android-layout

I have a gallery that displays a picture and a subtitle (TextView).

Now the text is broken into multiple lines if the text is long enough (correct, up to three lines) but our marketing department insists that I do not break words separated by a hyphen (e.g. "This is a double-word line" can be broken anywhere but on "double-word"). Problem is that Android tends to put the breaks exactly there :-)

Is there a way to set line break modes? Or any other idea that prevents those sentences from being broken into multiple lines?

One further thing: I use a coverflow effect and it really needs to be very smooth (which it is) for our marketing people to be happy. Which means that I need an efficient solution, as the text is set every time a new picture is selected (and users love to swish through them)...

Thanks and sunny greetings from Berne, Stephan Wiesner

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-18T14:10:13.663

您可以使用 HTML 格式的文本，例如

`textView.setText(Html.fromHtml("<font color=#ffff00>" + My name + "</font>" +" " +"<font color=#ffffff>" + is + "</br> bull. "+ "</font>"));`

字体颜色将改变文本的颜色并将文本移动到下一行。

不要忘记在您的 XML 中创建 textview 多行。希望这对您有所帮助。

# java - JAVA - How to make a installer for my software?

> ID：14938107
> 
> 赞同：-1
> 
> 时间：2013-02-18T14:01:57.903
> 
> 标签：java, installation

How to make a java version installer for my software(java swing app)?

The installer will copy a jar(Launcher) file and a folder with sound and images file in the installer to the user's desktop and AppDate folder.

My problem is how to "know" the user's name so I can copy the file to the user's Desktop and AppData folder and how to copy the file..

Can someone help me. Thank

==Sorry for My Bad English==

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:08:19.287

Java Web Start 是您的最佳选择。它处理所有事情，并且支持自定义安装程序，例如设置应用程序数据。

如果您的数据文件从不更改，您可能应该将它们捆绑在您的 .jar 文件中并使用 访问它们`Class.getResource`，而不是将它们复制到用户的应用程序数据目录。

使用 Java Web Start 通常不需要编写任何代码。您只需创建一个简短的 XML 文件，给它一个 .jnlp 扩展名，然后将它与您的 .jar 文件放在一个 Web 服务器上。它通常看起来像这样：

```
<?xml version="1.0"?>
<!DOCTYPE jnlp PUBLIC "-//Sun Microsystems, Inc//DTD JNLP Descriptor 6.0.10//EN" "http://java.sun.com/dtd/JNLP-6.0.10.dtd">
<jnlp version="1.6"
      codebase="http://www.example.com/myapp/"
      href="MyApp.jnlp">
    <information>
        <title>MyApp</title>
        <homepage href="http://www.example.com/myapp/"/>
        <description>My application</description>
        <offline-allowed/>
    </information>

    <security>
        <all-permissions/>
    </security>

    <resources>
        <j2se version="1.7+"/>
        <jar href="MyApp.jar" main="true"/>
    </resources>

    <application-desc/>
</jnlp> 
```

更多细节可以在[这里](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/contents.html)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:05:28.197

尝试使用 System.getEnv("APPDATA")。这应该返回 APPDATA 文件夹，与系统无关。

# ip - 在捕获文件中发现 localhost icmp 数据包：为什么？

> ID：14938112
> 
> 赞同：4
> 
> 时间：2013-02-18T14:02:15.453
> 
> 标签：ip, localhost, packet-capture, tcpdump, icmp

这是我的`tcpdump`过滤器（`ip[8]`是 IP ttl 字段，`icmp[0]=11`对应于时间超过的 ICMP 消息）：

```
(ip and ip[8]=2 and src host $myIPAddress) or (icmp and dst host $myIPAddress and icmp[0]=11) 
```

这是我在捕获文件中找到的内容：

```
>>> p.show()
###[ Ethernet ]###
  dst       = 00:15:f2:e3:90:e9
  src       = 00:11:43:e5:48:10
  type      = 0x800
###[ IP ]###
     version   = 4L
     ihl       = 5L
     tos       = 0xc0
     len       = 56
     id        = 19126
     flags     = 
     frag      = 0L
     ttl       = 254
     proto     = icmp
     chksum    = 0xa697
     src       = 127.0.0.1
     dst       = 127.0.0.1
     \options   \ 
```

为什么我捕获了**ICMP localhost**数据包？无论如何，这种数据包的目的是什么？而且，最重要的是，为什么上面的过滤器没有拒绝它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T12:12:48.447

什么是“$myIpAddress”？它真的是一个 IPv4 地址吗？如果它实际上是类似于 FQDN 或主机名的任何东西，那么手册页会解释会发生什么：

[http://www.tcpdump.org/manpages/pcap-filter.7.html](http://www.tcpdump.org/manpages/pcap-filter.7.html)

```
 host host
 (stuff removed)
 If host is a name with multiple IP addresses, each address will be checked for a match. 
```

我不确定如果是会发生什么，可能IP映射到MAC地址？

我喜欢 Guy 关于使用 -d 的建议。

# maven - Maven/Jenkins java.lang.UnsupportedClassVersionError：不支持的major.minor版本51.0

> ID：14938114
> 
> 赞同：11
> 
> 时间：2013-02-18T14:02:23.770
> 
> 标签：maven, jenkins, java

我有一个 Jenkins 服务器，同时安装了 JDK & JRE 6 和 7。

所有的项目都建立在 1.6 之上，除了一个依赖于 1.7 的项目。

我已将 maven pom 文件配置为使用 JAVA_HOME_7 环境 PATH 中的 Java 编译器。

```
<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                    <showDeprecation>true</showDeprecation>
                    <showWarnings>true</showWarnings>
                    **<executable>${env.JAVA_HOME_7}/bin/javac</executable>**
                    <fork>true</fork>
                    <verbose>false</verbose>
                </configuration>
            </plugin> 
```

在 mvn install 期间，我收到以下错误：

```
java.lang.RuntimeException: There was an error in the forked process
java.lang.UnsupportedClassVersionError: : Unsupported major.minor version 51.0 
```

我认为这意味着服务器正在使用 JRE 1.6。

如何将 JRE 1.6 与 1.7 保持在一起以保持与旧 1.6 项目和新 1.7 项目的兼容性？

非常感谢， 阿塔纳斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T14:30:09.323

您还需要使用 java 7 运行万无一失的测试。默认情况下，surefire 将使用与运行 maven 相同的 jvm - 在您的情况下为 Java6。

```
 <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <version>2.13</version>
      <configuration>
        ...
        <jvm>${env.JAVA_HOME_7}/bin/java</jvm>
      </configuration>
    </plugin>
  </plugins> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T14:22:29.987

我记得我也为这个问题而苦苦挣扎。请按照以下步骤解决问题

**原因：**当安装了多个 JRE 时，多个**java.exe**也会安装到系统的多个位置。

**解决方案：**修改环境**PATH**变量并更改**java.exe**的顺序。将**java.exe**的位置放在第一个位置，如下面的代码

PATH = C:\Program Files\Java\jdk1.6.0\; 其他；其他；其他

根据您的使用和安装位置更改上述位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T05:09:44.470

我不止一次遇到这个问题，这是因为你的系统上有多个版本的 jdk(jre)，所以只需将 JAVA_HOME 设置为你编译项目的正确 jdk，运行就可以了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-03T12:27:03.950

看看你的 target/lib 目录，你可能有两个版本的同一个 jar。对我来说，它正在创造专业

# python - 在python中将字符串转换为列表

> ID：14938120
> 
> 赞同：1
> 
> 时间：2013-02-18T14:02:33.863
> 
> 标签：python

我需要在python中将字符串转换为列表，字符串格式如下，

```
'[{"name":"Tom","adress":"adress1"},{"name":"Mari","adress":"adress2"}]' 
```

我需要将此**字符串**转换为 python**列表**数据类型，并希望通过迭代生成的列表来获取字典。

我已经尝试过 json 库，但没有运气。> 更正（**json.loads 正在工作**。）

你能告诉我这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T14:03:04.603

你可以`ast.literal_eval`没有任何问题。

```
>>> s = '[{"name":"Tom","adress":"adress1"},{"name":"Mari","adress":"adress2"}]'
>>> import ast
>>> ast.literal_eval(s)
[{'adress': 'adress1', 'name': 'Tom'}, {'adress': 'adress2', 'name': 'Mari'}] 
```

但`json.loads`似乎也没有任何问题......

```
>>> import json
>>> json.loads(s)
[{u'adress': u'adress1', u'name': u'Tom'}, {u'adress': u'adress2', u'name': u'Mari'}]
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T14:09:53.950

正如几条评论中所指出的，`eval`内置函数能够解析此类字符串，但并不安全！所以`ast.literal_eval`应该首选该方法。

# c# - 获取页面的url

> ID：14938121
> 
> 赞同：2
> 
> 时间：2013-02-18T14:02:37.927
> 
> 标签：c#, html-agility-pack

我用它导航到一个网站

```
doc = web.Load("http://google.com/search?btnI=1&q=[my keyword]") //I'm Feeling Lucky 
```

然后我需要导航网站的网址......我怎样才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:51:59.657

您可以使用`HtmlWeb.ResponseUri`获取实际响应请求的 Internet 资源的 URI 的属性。

一个例子 - 谷歌搜索“cookies”：

```
var web = new HtmlWeb();
var doc = web.Load("http://google.com/search?btnI=1&q=cookies");
var responseUrl = web.ResponseUri; 
```

得到`http://en.wikipedia.org/wiki/HTTP_cookie`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:04:58.660

您可以通过以下方式获取当前浏览器的 url：

```
string url = HttpContext.Current.Request.Url.AbsoluteUri; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:20:37.413

看起来 Sam1 可能已经为您提供了一个或两个实例尝试的正确答案（我对 HTML Agility Pack 没有真正的经验）。

话虽这么说，如果您打算使用 Google 进行大量调用`keywords`以便检索最高结果（即“我感觉很幸运”结果），那么我强烈建议您使用 Google 的自定义搜索 API（[https ://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)）。

如果您使用此 API 提取 JSON 结果，它将使用更少的带宽。

API 的使用只允许每天 100 次免费查询。这可能符合您的应用程序要求，但也可能不符合。如果您有能力，如果您打算进行数千次查询，我建议您通过付费来支持 Google。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:23:48.633

这里有两点需要注意。首先 -在没有“www”的上述 URL 中使用“ [http://google.com ”会强制 301 重定向到“](http://google.com) [http://www.google.com](http://www.google.com) ”，因此您应该包含 www 以保持简单。

第二个是打开 URL（带有 www）执行 302 重定向。目标位于响应标头内。因此，如果您能捕捉到该 302 响应，您就可以在 Google 将您发送到那里之前获取该 URL。

这是第一个请求的响应和请求标头，其中 Google 执行 301 重定向到 www 域。

**响应头**
Cache-Control public, max-age=2592000
Content-Length 244
Content-Type text/html; charset=UTF-8
日期 2013 年 2 月 18 日星期一 14:14:40 GMT
到期 2013 年 3 月 20 日星期三 14:14:40 GMT
位置 [http://www.google.com/search?btnI=1&q=html5](http://www.google.com/search?btnI=1&q=html5)
服务器 gws
X -Frame-Options SAMEORIGIN
X-XSS-Protection 1；模式=块

**请求标头**
Accept text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Connection keep-alive
Cookie PREF =ID=5d01155d00a8d706:U=49fab5927df1f8ad:FF=0:TM=1359732743:LM=1360874099:S=byw-1-fgfbcRWdPN; NID = 67 = NpFNjRkjTFtyrcYPE-pQeJiMFEgWMWdyVMVpbYATZySlsw63Hz4FCw2Tcr4tynhAhyq1vnuPqmdFBOC65Nd-048ZxrgP_HVtKbVCe7psi-G2aMvsOUbiBl1xYks2xK2K
DNT 1个
主机google.com
用户代理的Mozilla / 5.0（Windows NT的6.2; WOW64; RV：18.0）壁虎/ 20100101火狐/ 18.0

以及将我带到目标页面的 302 的响应/请求标头。您可以看到返回的目标 URL。我在副本中加粗了它。

**响应头**
Cache-Control private
Content-Length 231
Content-Type text/html; charset=UTF-8
日期 Mon, 18 Feb 2013 14:14:41 GMT
Location **[http://en.wikipedia.org/wiki/HTML5](http://en.wikipedia.org/wiki/HTML5)**
服务器 gws
X-Frame-Options SAMEORIGIN
X-XSS-Protection 1; 模式=块

**请求标头**
Accept text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Connection keep-alive
Cookie PREF =ID=5d01155d00a8d706:U=49fab5927df1f8ad:FF=0:TM=1359732743:LM=1360874099:S=byw-1-fgfbcRWdPN; NID = 67 = NpFNjRkjTFtyrcYPE-pQeJiMFEgWMWdyVMVpbYATZySlsw63Hz4FCw2Tcr4tynhAhyq1vnuPqmdFBOC65Nd-048ZxrgP_HVtKbVCe7psi-G2aMvsOUbiBl1xYks2xK2K
DNT 1个
主机www.google.com
用户代理的Mozilla / 5.0（Windows NT的6.2; WOW64; RV：18.0）壁虎/ 20100101火狐/ 18.0

# php - preg_replace <*>

> ID：14938129
> 
> 赞同：2
> 
> 时间：2013-02-18T14:03:25.820
> 
> 标签：php, preg-replace

如何使用（用，例如）更改`<*>`文本文件每一行中所有出现的 （每行总共 5 个）？`<*>``preg_replace``|`

我的代码是：

```
preg_replace("/<*\>/", "|", $text); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T14:18:24.440

你应该逃避`*`

```
preg_replace("/<\*>/", "|", $text); 
```

# php - Laravel 3多对多关系不绑定查询

> ID：14938130
> 
> 赞同：0
> 
> 时间：2013-02-18T14:03:25.827
> 
> 标签：php, laravel, eloquent, laravel-3

我正在处理多对多关系的文档，并且遇到了各种各样的砖墙。我正在尝试使用现有的数据库模式并将 Laravel/Eloquent 包装在它周围，这需要向 Eloquent 教授不同的外键字段。下面是我的两个模型以及显示查询输出的 DB::profile() 的结果。请注意，它成功构建了查询，但是 UserID 未绑定到它。

在我的代码中，我将模型称为 User::find(1)->roles。我希望为该特定用户获得一系列角色，但它是空的。

## 用户模型

```
class User extends Eloquent
{
   public static $table = 'GDN_User';
   public static $key = 'UserID';
   public function roles()
   {
      return $this->has_many_and_belongs_to('role', 'GDN_UserRole', 'UserID', 'RoleID');
   }
} 
```

## 好榜样

```
class Role extends Eloquent
{
   public static $table = 'GDN_Role';
   public static $key = 'RoleID';
   public function users()
   {
      return $this->has_many_and_belongs_to('user', 'GDN_UserRole', 'RoleID', 'UserID');
   }
} 
```

## DB::profile() 输出

```
array(2) {
  [0]=>
  array(3) {
    ["sql"]=>
    string(51) "SELECT * FROM `GDN_User` WHERE `UserID` = ? LIMIT 1"
    ["bindings"]=>
    array(1) {
      [0]=>
      int(1)
    }
    ["time"]=>
    string(4) "4.04"
  }
  [1]=>
  array(3) {
    ["sql"]=>
    string(367) "SELECT `GDN_Role`.*, `GDN_UserRole`.`id` AS `pivot_id`, `GDN_UserRole`.`created_at` AS `pivot_created_at`, `GDN_UserRole`.`updated_at` AS `pivot_updated_at`, `GDN_UserRole`.`UserID` AS `pivot_UserID`, `GDN_UserRole`.`RoleID` AS `pivot_RoleID` FROM `GDN_Role` INNER JOIN `GDN_UserRole` ON `GDN_Role`.`RoleID` = `GDN_UserRole`.`RoleID` WHERE `GDN_UserRole`.`UserID` = ?"
    ["bindings"]=>
    array(1) {
      [0]=>
      NULL
    }
    ["time"]=>
    string(4) "0.10"
  }
} 
```

结果查询很好。如果我直接在我的服务器上运行它，它会返回两个用户 ID = 1 的组。绑定没有发生，我不确定这是一个错误还是我滥用了 Eloquent。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:35:16.077

Laravel 通常将键小写。我建议将模型中的所有实例都小写`UserID`并`RoleID`从那里开始工作。

如果您正在设计与 Laravel 一起使用的数据库，则旨在使用小写的表名和列名（如果您使用的是现有数据库，我很感激您可能别无选择）。

——菲尔斯帕克斯

# sql - 多表sql重复

> ID：14938133
> 
> 赞同：1
> 
> 时间：2013-02-18T14:03:37.793
> 
> 标签：sql

```
SELECT c1, c2, c3
FROM 
(SELECT * FROM table1
UNION ALL
SELECT * FROM table2
UNION ALL
SELECT * FROM table3
UNION ALL
SELECT * FROM table4) data
GROUP BY c1, c2, c2
HAVING (COUNT(*) > 1) 
```

我不能只找到共同的重复行。此查询演示了常见示例数据表 1 和 2 中的所有数据 .. 我只想要所有表中常见的数据有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:28:59.073

这将返回在所有四个表中找到的重复记录

```
SELECT c1,c2,c3
FROM   (
           SELECT *
           FROM   table1
           UNION ALL
           SELECT *
           FROM   table2
           UNION ALL
           SELECT *
           FROM   table3
           UNION ALL
           SELECT *
           FROM   table4
       ) DATA
GROUP BY c1, c2, c3
HAVING (COUNT(*) >3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T14:22:33.207

SQLServer2005+中[INTERSECT](http://msdn.microsoft.com/en-us/library/ms188055%28v=sql.105%29.aspx)的另一种选择

```
SELECT c1, c2, c3
FROM Table1
INTERSECT
SELECT c1, c2, c3
FROM Table2
INTERSECT
SELECT c1, c2, c3
FROM Table3
INTERSECT
SELECT c1, c2, c3
FROM Table4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:08:14.170

假设您想要每个表中共有的所有记录，请在每个表上使用`INNER JOIN`：

```
SELECT t1.c1, t1.c2, t1.c3
FROM Table1 t1
    INNER JOIN Table2 t2 ON t1.c1 = t2.c1 AND t1.c2 = t2.c2 AND t1.c3 = t2.c3
    INNER JOIN Table3 t3 ON t1.c1 = t3.c1 AND t1.c2 = t3.c2 AND t1.c3 = t3.c3
    INNER JOIN Table4 t4 ON t1.c1 = t4.c1 AND t1.c2 = t4.c2 AND t1.c3 = t4.c3 
```

这将返回每个表中的所有匹配记录。

这是一个示例[SQL Fiddle](http://sqlfiddle.com/#!2/591ca/1)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T14:05:15.980

我不知道这是否是拼写错误，但在您的`GROUP BY`条款中，没有`c3`并且您有 double `c2`。它应该是

```
SELECT c1, c2, c3
FROM 
    (
        SELECT * FROM table1
        UNION ALL
        SELECT * FROM table2
        UNION ALL
        SELECT * FROM table3
        UNION ALL
        SELECT * FROM table4
    ) data
GROUP BY c1, c2, c3
HAVING (COUNT(*) > 1) 
```

# autocomplete - EXT.Net 自定义搜索组合框在用户点击 ENTER 时触发

> ID：14938138
> 
> 赞同：1
> 
> 时间：2013-02-18T14:03:55.090
> 
> 标签：autocomplete, combobox, webforms, asp.net-4.0, ext.net

是否有任何示例方法可以告诉 Ext.NET 组合框在用户按 Enter 时显示自动完成的可用值。
[我真的很喜欢 Ext.net 组合框示例的高级搜索示例。](http://examples.ext.net/#/Form/ComboBox/Custom_Search/)在我的定制中，我从 SQL 进行数据存储，并且搜索查询非常不喜欢尝试避免自动触发结果集。我的想法是允许用户输入查询字符串并按回车键或任何热键，然后执行从 sql 获取数据并允许用户在显示的网格中选择可用项目的逻辑？

我的环境是.net4、ASP.NET、WebForms、Ext.Net V2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:12:07.397

[我们来自 Ext.Net 的大学帮助我解决了问题](http://forums.ext.net/showthread.php?23542-Custom-search-trigered-by-hotkey&p=102932&posted=1#post102932)

```
<ext:ComboBox
    runat="server"
    DisplayField="Common"
    ValueField="Common"
    TypeAhead="false"
    Width="570"
    PageSize="10"
    HideBaseTrigger="true"
    MinChars="10000"
    TriggerAction="Query">
    ...
    <Listeners>
        <SpecialKey Handler="
        if (e.getKey() == e.ENTER) {
            this.doQuery(this.getValue(), true);
        }"></SpecialKey>
    </Listeners>
</ext:ComboBox> 
```

# javascript - draw2d javascript 库 - 多行标签

> ID：14938140
> 
> 赞同：1
> 
> 时间：2013-02-18T14:03:59.347
> 
> 标签：javascript, canvas, draw2d-js

你知道如何用draw2d创建一个多行标签吗`draw2d.shape.basic.Label`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:37:38.317

实际上，您可以通过在其中使用 '\n' 以编程方式设置标签的文本来制作多行标签（至少在视觉上）。喜欢`label.setText('Some \n text')`。但是您不能“手动”执行此操作，因为您输入的是`<input type="text">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:21:49.423

该库使用[HTML5 Canvas API](http://www.w3schools.com/html/html5_canvas.asp)。为了绘制文本，它使用了[`fillText()`](http://www.w3schools.com/tags/canvas_filltext.asp)开箱即用的不支持多行的方法。为了实现这样的文本需要分解成多个标签，我认为这个库不支持。

# php - php xor 运算符未按预期工作

> ID：14938141
> 
> 赞同：-1
> 
> 时间：2013-02-18T14:04:02.053
> 
> 标签：php, xor

我有以下代码。如果我分别运行每个条件它工作正常，但只要我添加'xor'或'or'或'||' 运营商似乎都不匹配。

我知道这将是一些简单的事情，我错过了，但无法发现它。我是不是用错了这个运算符？

```
if ($usercurrentpassword['password'] != $currentpasswordmd5 xor $usercurrentpassword['password'] != $currentpasswordsha1){
                    $a = "Current passwords do not match";
                    return $a;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:29:17.220

就我而言，PHP（任何其他语言）中的 XOR（异或）运算符是**插入符号**: **^**。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:06:35.150

也许你应该使用括号：

```
if (($usercurrentpassword['password'] != $currentpasswordmd5) xor ($usercurrentpassword['password'] != $currentpasswordsha1)) { 
```

# c# - 屏蔽 UI 事件的最佳方法是什么？

> ID：14938144
> 
> 赞同：0
> 
> 时间：2013-02-18T14:04:10.900
> 
> 标签：c#, winforms, events, user-interface

我正在使用 DataGridView，并使用该`CellValueChanged`事件。

当我通过代码更改单元格值时，我不希望触发此事件。但是，我希望在用户编辑它时触发它。

这就是为什么我用以下代码附上我的单元格值更改操作：

```
void changeCellOperation()
{
    dgv.CellValueChanged -= new DataGridViewCellEventHandler(dgv_CellValueChanged);

    ...
    cell.Value = myNewCellValue
    ...

    dgv.CellValueChanged += new DataGridViewCellEventHandler(dgv_CellValueChanged);
} 
```

我最终拥有了几个不同的功能，其中我的 DataGridView 单元格以这种方式更新。

因为这些函数是从不同的地方调用的并且可以嵌套，所以我不能保持这个代码不变以避免事件不需要的事件重新激活。

所以我以这种方式结束：

```
int valueChangedEventMask = 0;

void changeCellOperation()
{
    valueChangedEventMask++;

    ...
    cell.Value = myNewCellValue
    ...

    valueChangedEventMask--;
}

void dgv_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    if (valueChangedEventMask > 0)
        return

    ...
} 
```

这工作正常。此外，当调用嵌套时，包括在事件本身内部。

但是该`CellValueChanged`事件现在无缘无故地被**触发了太多次**。

因为我经常不得不处理这种模式，所以我正在寻找一种可以普遍适用于 UI 中的事件的解决方案，而不仅仅是 DataGridView。

所以我的问题是：

正确屏蔽 UI 事件并避免不必要的事件触发的最佳技巧是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:25:13.500

`CellValueChanged`不是 UI 事件，而是属性更改事件。这意味着您不能使用它来区分用户输入和程序更改。您始终可以使用订阅者/取消订阅或标记+/- 或 BeginEdit/EndEdit 类似的技术，但也许您必须找到另一种（更好的）方法。例如，在复选框的情况下，您可以使用`Click`event 而不是，因为（惊喜！）它会告诉您用户何时单击它，否则会以编程`Changed`方式安全地更改值。`Checked`

在`DataGridView`最简单的情况下，将使用`Changed`一些标志（将在编辑开始时设置并在结束时重置 - 参见，`CellBeginEdit/CellEndEdit`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:26:24.917

您可以使用`CellEndEdit`而不是`CellValueChange`. 我不知道您的方法是做什么的`dgv_CellValueChanged`，请注意`CellEndEdit`每次退出单元格的编辑模式时都会触发它，即使它的值没有更改。这意味着如果您不希望在值不变时执行该方法，则必须跟踪单元格的当前值。

我会避免与鼠标相关的事件，例如 CellClick，因为您的用户只能使用键盘。

无论如何，我通常通过将逻辑与用户界面分离来避免此类问题，即我编写了一个绑定到表单的单独类。看看[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)（如果你愿意，你可以在 WinForms 中实现你自己的版本）或好的旧[MVC](http://msdn.microsoft.com/en-us/library/ff649643.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:59:41.187

我最终将两种解决方案混合在一个非常简单的解决方案中。我使用一个计数器，我只挂钩/取消挂钩我想要屏蔽的事件。

```
EventMask valueChangedEventMask;

// In the class constructor
valueChangedEventMask = new EventMask(
    () => { dgv.CellValueChanged += new DataGridViewCellEventHandler(dgv_CellValueChanged); },
    () => { dgv.CellValueChanged -= new DataGridViewCellEventHandler(dgv_CellValueChanged); }
);

// The value change operation I want to hide from the event
void changeCellOperation()
{
    valueChangedEventMask.Push();

    ...
    cell.Value = myNewCellValue
    ...

    valueChangedEventMask.Pop();
}

// The class
public class EventMask
{
    Action hook;
    Action unHook;

    int count = 0;

    public EventMask(Action hook, Action unHook)
    {
        this.hook = hook;
        this.unHook = unHook;
    }

    public void Push()
    {
        count++;
        if (count == 1)
            unHook();
    }

    public void Pop()
    {
        count--;
        if (count == 0)
            hook();
    }
} 
```

# replace - 用 sed 或其他命令替换非唯一的出现

> ID：14938146
> 
> 赞同：0
> 
> 时间：2013-02-18T14:04:11.287
> 
> 标签：replace, sed

我在这里的第一篇文章和初学者级别。有没有办法用 sed （或任何其他方式）解决这个问题？我想每天操作一个新创建的文件并替换一些 IP 和端口出现。

1）我想用 A3 替换第一次出现的“5027,5028”，用 A4 替换第二次出现的“5027,5028”。2）我想用 A1 替换第一次出现的“5026”，用 A2 替换第二次出现的“5026”。

PS。我试图简化示例，并在前面的行中保留 version="y" 或 version="x"，这可能有助于区分出现的情况。（第一个 x 和 y 版本对是主要连接，另外两个是辅助连接）。

**输入文件：**

```
version="x"
commaSeparatedList="5027,5028"`
version="y"
commaSeparatedList="5026"
version="x"
commaSeparatedList="5027,5028"
version="y"
commaSeparatedList="5026" 
```

**编辑文件：**

```
version="1.4.1-12"
commaSeparatedList="A3"
version="1.3.0"
commaSeparatedList="A1"
version="1.4.1-12"
commaSeparatedList="A4"
version="1.3.0"
commaSeparatedList="A2" 
```

对不起，我有几分钟的编辑恐惧。希望现在看起来更容易理解。我基本上是在每晚部署的系统上接收这个文件，我想在它开始确保连接正常之前使用 cron 作业编辑这个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:22:41.047

不要费心尝试使用`sed`它。可以做到，但`sed`工具不对。

改为使用`awk`。用 A3 替换第一次出现的“5027,5028”，用 A4 替换第二次出现的“5027,5028”。

```
awk '/5027,5028/ && count < 2 { if( count ++ ) repl="A4"; else repl="A3";
    sub( "5027,5028", repl)} 1' input 
```

第二个替换留作练习。基本上是一样的，你可以运行两次 awk 或者只是在上面添加额外的子句。

要覆盖原始文件，请使用 shell 重定向：

```
awk ... input > tmpfile && mv tmpfile input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T15:01:38.553

这可能对您有用（GNU Sed）：

```
sed '1,/5027,5028/s/5027,5028/A3/;s/5027,5028/A4/;1,/5026/s/5026/A1/;s/5026/A2/' file 
```

# c# - C# 类名中有大括号

> ID：14938149
> 
> 赞同：0
> 
> 时间：2013-02-18T14:04:15.640
> 
> 标签：c#

我在某个地方有一堂课。这个名字很奇怪，它叫“Something[into]ABC.cs”。类名中的“[into]”是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:14:01.320

应该注意的是，CLI 允许在 C# 中使用非法名称（C# 编译器在“命名”匿名类型时会利用这一技巧）：***但是***- 类型名称**不能**包含`.`（这将表示命名空间），还有一点检查表明`[`/`]`在名称中使用时必须转义；所以它会是`a\[b\]`（或者`a\\[b\\]`当写成 C# 字符串时）。因此，我认为我们可以得出结论，您*没有*一个名为`Something[into]ABC.cs`. 我怀疑您有一个名为该*文件*的文件，而该类则更加理智。

文件名不定义类名，尽管保持两者同步被认为是礼貌的。

# r - 通过 GoogleVis 更改工具提示

> ID：14938150
> 
> 赞同：4
> 
> 时间：2013-02-18T14:04:16.650
> 
> 标签：r, google-visualization, googlevis

下面的代码生成我想要的图表。除了我想将值 l 添加到工具提示之外。目前我不知道如何做到这一点。

```
require(googleVis)

df <-  data.frame(x = c(1:5), y = c(10, 20 , 30, 40, 50), 
                  l = c("A", "B", "C", "D", "E"))

plot(gvisLineChart(df, xvar = "x", yvar = "y")) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-18T22:06:22.510

我也在寻找一种方法来控制 gvis 图表中的工具提示。所以在谷歌搜索之后，我偶然发现了这个网站[GoogleVis 小插图：通过 googleVis 使用角色](http://cran.r-project.org/web/packages/googleVis/vignettes/Using_Roles_via_googleVis.html)。所以看来这个问题已经解决了。

我花了一段时间才让它适用于不同的图表类型。此外，在布置数据时，请确保它的列在数据和工具提示、数据和工具提示之间交替，... la cbind - 一组工具提示列到您的数据框）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T11:02:12.170

我（还）找不到在 googleVis 中执行此操作的方法。rCharts 是另一个与 javascript 工具交互的包，用于交互式可视化，工具提示似乎具有灵活性：例如 [http://rcharts.io/viewer/?6644957#.Uk0xQIZDvb8](http://rcharts.io/viewer/?6644957#.Uk0xQIZDvb8)

我确实想使用它，但后来不知道如何获得对数刻度，所以现在使用 SVGAnnotation 包来提供 svg。

# sql-server-2008 - SQL中两个不同表的减法

> ID：14938153
> 
> 赞同：1
> 
> 时间：2013-02-18T14:04:34.753
> 
> 标签：sql-server-2008, ms-access, vba

由于我的问题有些特殊，经过很长时间的搜索，我还没有找到并回答，所以就这样吧：我有两个表：In_Stock 和 Out_Stock。我使用以下选择：

**有存货：**

```
select 
INs.CatID as CategoryID, 
INs.SubCatID as SubcategoryID, Sum(INs.Quantity) as QuantityIN
from IN_Stock INs
group by INs.CatID, INs.SubCatID
╔════════════╦═══════════════╦════════════╗
║ CategoryID ║ SubcategoryID ║ QuantityIN ║
╠════════════╬═══════════════╬════════════╣
║          2 ║             9 ║ 0          ║
║          1 ║            16 ║ 8          ║
║          1 ║            27 ║ 5          ║
║          1 ║            30 ║ 160        ║
║          1 ║            31 ║ 6          ║
║          1 ║            39 ║ 35         ║
║          1 ║            40 ║ 7          ║
║          2 ║            44 ║ 13         ║
║          2 ║            54 ║ 6          ║
║          2 ║            70 ║ 5          ║
║          3 ║            87 ║ 3,5        ║
╚════════════╩═══════════════╩════════════╝ 
```

**缺货：**

```
select 
OUTs.CatID as CategoryID, 
OUTs.SubCatID as SubcategoryID, 
Sum(OUTs.Quantity) as QuantityOUT
from OUT_Stock OUTs
group by OUTs.CatID, OUTs.SubCatID
╔════════════╦═══════════════╦═════════════╗
║ CategoryID ║ SubcategoryID ║ QuantityOUT ║
╠════════════╬═══════════════╬═════════════╣
║          1 ║            30 ║          30 ║
║          1 ║            39 ║          15 ║
╚════════════╩═══════════════╩═════════════╝ 
```

**我得到的是下面这张表（这显然是不对的）。** 

```
select
INs.CatID as CategoryID, 
INs.SubCatID as SubcategoryID, 
Sum(INs.Quantity) as QuantityIN,
SUM(OUTs.Quantity) as QuantityOUT,
SUM(INs.Quantity)- SUM(OUTs.Quantity) as RemainingQuantity
from IN_Stock INs
left join OUT_Stock OUTs on INs.CatID=OUTs.CatID and INs.SubCatid=OUTs.SubCatid
group by INs.catid, INs.subcatid

╔════════════╦═══════════════╦═════════════╦════════════╦═══════════════════╗
║ CategoryID ║ SubcategoryID ║ QuantityIN  ║ QuantityOUT║ RemainingQuantity ║
╠════════════╬═══════════════╬═════════════╬════════════╬═══════════════════╣
║          2 ║             9 ║ 0           ║            ║                   ║
║          1 ║            16 ║ 8           ║            ║                   ║
║          1 ║            27 ║ 5           ║            ║                   ║
║          1 ║            30 ║ 320         ║        150 ║               170 ║
║          1 ║            31 ║ 6           ║            ║                   ║
║          1 ║            39 ║ 35          ║         30 ║                 5 ║
║          1 ║            40 ║ 7           ║            ║                   ║
║          2 ║            44 ║ 13          ║            ║                   ║
║          2 ║            54 ║ 6           ║            ║                   ║
║          2 ║            70 ║ 5           ║            ║                   ║
║          3 ║            87 ║ 3,5         ║            ║                   ║
╚════════════╩═══════════════╩═════════════╩════════════╩═══════════════════╝ 
```

**我想要的是在 SQL 中进行选择，返回类似于下表的内容**......我想知道我是否以及如何在 RemaningStock 列中看到：**130**，其中 SubcategoryID=30 和**20**，其中 SubCategoryID=39。

```
╔════════════╦═══════════════╦════════════╦════════════╦═══════════════════╗
║ CategoryID ║ SubcategoryID ║ QuantityIN ║ QuantityIN ║ RemainingQuantity ║
╠════════════╬═══════════════╬════════════╬════════════╬═══════════════════╣
║          2 ║             9 ║ 0          ║            ║                   ║
║          1 ║            16 ║ 8          ║            ║                   ║
║          1 ║            27 ║ 5          ║            ║                   ║
║          1 ║            30 ║ 160        ║         30 ║               130 ║
║          1 ║            31 ║ 6          ║            ║                   ║
║          1 ║            39 ║ 35         ║         15 ║                20 ║
║          1 ║            40 ║ 7          ║            ║                   ║
║          2 ║            44 ║ 13         ║            ║                   ║
║          2 ║            54 ║ 6          ║            ║                   ║
║          2 ║            70 ║ 5          ║            ║                   ║
║          3 ║            87 ║ 3,5        ║            ║                   ║
╚════════════╩═══════════════╩════════════╩════════════╩═══════════════════╝ 
```

两个表都有一个或多个特定类别或子类别的记录
。非常感谢任何帮助。非常感谢！
SQL 或 Access VBA 代码对我都有好处。
**PS：**由于这是我的第一篇文章，请“温柔”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:13:05.907

你可以使用子查询来获得你想要的，例如：

```
SELECT *
FROM   (SELECT INs.catid         AS CategoryID,
           INs.subcatid      AS SubcategoryID,
           SUM(INs.quantity) AS QuantityIN
    FROM   in_stock INs
    GROUP  BY INs.catid,
              INs.subcatid) AS a
   LEFT JOIN (SELECT OUTs.catid         AS CategoryID,
                     OUTs.subcatid      AS SubcategoryID,
                     SUM(OUTs.quantity) AS QuantityOUT
              FROM   out_stock OUTs
              GROUP  BY OUTs.catid,
                        OUTs.subcatid) AS b
          ON ( a.subcategoryid = b.subcategoryid )
             AND ( a.categoryid = b.categoryid ); 
```

由此，使用 MS Access 中的查询设计窗口编辑和修改查询确实非常容易

```
SELECT a.categoryid,
   a.subcategoryid,
   a.quantityin,
   b.quantityout,
   [quantityin] - [quantityout] AS RemainingQuantity
FROM   (SELECT INs.catid         AS CategoryID,
           INs.subcatid      AS SubcategoryID,
           SUM(INs.quantity) AS QuantityIN
    FROM   in_stock INs
    GROUP  BY INs.catid,
              INs.subcatid) AS a
   LEFT JOIN (SELECT OUTs.catid         AS CategoryID,
                     OUTs.subcatid      AS SubcategoryID,
                     SUM(OUTs.quantity) AS QuantityOUT
              FROM   out_stock OUTs
              GROUP  BY OUTs.catid,
                        OUTs.subcatid) AS b
          ON ( a.subcategoryid = b.subcategoryid )
             AND ( a.categoryid = b.categoryid ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:31:43.443

主要问题是您的最终查询在初始数据集中的各个行上进行连接，然后才执行聚合，而您希望对中间总和执行连接。

假设这个测试数据，例如：

```
CREATE TABLE table_in (
  id INTEGER,
  value INTEGER
  );

CREATE TABLE table_out (
  id INTEGER,
  value INTEGER
  );

INSERT INTO table_in(id, value) VALUES
  (1, 120),
  (1, 10);

INSERT INTO table_out(id, value) VALUES
  (1, 30); 
```

您`LEFT JOIN`在最后一个查询中编写的方式：

```
SELECT t1.value AS val1, t2.value AS val2
    FROM table_in t1 LEFT JOIN table_out t2 ON t1.id=t2.id; 
```

将在聚合之前生成这些行：

```
ID     VAL1        VAL2
1      120         30
1      10          30 
```

在这里，总和将给出：

```
ID      SUM(VAL1)    SUM(VAL2)
1       130          60 
```

只要用于连接的条件超过一行，就会发生这种情况。

您需要在聚合操作*之后*执行连接，因为您希望将所有输​​入的总和与所有输出的总和进行比较。

这可以使用子选择语句或[CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)来完成。

例如：

```
WITH sum_in AS (
  SELECT id, SUM(value) AS all_in
     FROM table_in
  GROUP BY id
), sum_out AS (
  SELECT id, SUM(value) AS all_out
     FROM table_out
  GROUP BY id
)
SELECT t1.id, all_in, all_out, all_in - all_out
    FROM sum_in t1 LEFT JOIN sum_out t2 ON t1.id=t2.id 
```

# python - 不要在python中显示“文件覆盖”消息

> ID：14938154
> 
> 赞同：0
> 
> 时间：2013-02-18T14:04:36.547
> 
> 标签：python

我需要使用 pyfits ( [http://www.stsci.edu/institute/software_hardware/pyfits](http://www.stsci.edu/institute/software_hardware/pyfits) ) 为我正在做的工作打开/编写一些光谱。问题是，每次我使用“writeto”函数写入 .fits 文件并覆盖它时，我都会在屏幕上收到“覆盖现有文件：XXX.fits”消息。是否可以告诉程序不显示此特定消息？

我已经检查过并且找不到将停用此消息的“writeto”函数的关键字，所以我在想是否有任何方法告诉python将特定函数的所有输出（除非它是错误）重定向到某个东西像 /dev/null 或类似的。

最坏的情况，我认为可能使用“日志记录”并将所有输出重定向到一个文件，就是这样..

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:13:11.673

当您“破坏”现有文件时，该库使用 Python[`warnings`模块发出警告。](http://docs.python.org/2/library/warnings.html)

您可以使用相同的模块来抑制警告：

```
import warnings

with warnings.catch_warnings():
    warnings.simplefilter("ignore")
    pyfits.writeto(...) 
```

使用`catch_warnings()`上下文管理器会抑制所有`pyfits.writeto()`可能引发的警告。您还可以为要忽略的特定消息配置过滤器：

```
import warnings
warnings.filterwarnings('ignore', message='Overwriting existing file .*', module='pyfits\.hdu.*') 
```

将忽略以例如`Overwriting existing file`开头的模块引发的消息。`pyfits.hdu`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:12:51.233

您可以使用[`warnings.filterwarnings`](http://docs.python.org/2/library/warnings.html#warnings.filterwarnings)来抑制消息。只需添加

```
warnings.filterwarnings('ignore', message='Overwriting existing file') 
```

# excel - 在 Excel 中构建和管理复杂函数的建议

> ID：14938160
> 
> 赞同：0
> 
> 时间：2013-02-18T14:04:59.970
> 
> 标签：excel, excel-formula

很多时候，我有一个公式将函数封装在函数内部到哪组参数，通常发现自己在修改后半小时内调试语句会产生意想不到的结果。

我一直在做的是将函数切成一列中的各个部分......每一行代表一个函数，当我对最终结果感到满意时，我将每一部分复制回它是前一个单元格中的相应位置，直到我完成并希望可以工作的功能。

考虑：

```
 =IF((ISERROR((VLOOKUP(D2,$A$2:$A9,1,0))),(IF((D2=(VLOOKUP(D2,$A$2:$A$9,1,0))),0,D2)),E2)
0        =IF((ISERROR((VLOOKUP(D2,$A$2:$A9,1,0))),L17,E2)
TRUE     =ISERROR((VLOOKUP(D2,$A$2:$A9,1,0))
0        =IF((D2=L18),0,D2)
the      =VLOOKUP(D2,$A$2:$A$9,1,0) 
```

能够记录内联或具有类似于 VBA 弹出离子的东西来编辑公式会很棒，但由于*不*存在，我很想知道还有哪些其他技术可以有效地构建您的复杂函数'发现很有帮助。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:17:01.553

通常，我将公式拆分为多列 - 然后每列包含公式的一部分。我从来没有把它们粘在一个单元格中——虽然“更干净”，但它们是不可能调试的。如果列太多，我会构建一个可以隐藏的“管理”表。

我一般不喜欢 excel 公式编辑器 - 虽然我真的很喜欢公式的强大功能，但编辑器使用起来很痛苦。

# language-agnostic - 全序、弱序、偏序 - 完整定义

> ID：14938163
> 
> 赞同：4
> 
> 时间：2013-02-18T14:05:17.630
> 
> 标签：language-agnostic, strict-weak-ordering

之间有什么区别

*   严格/非严格排序，
*   弱/非弱排序，以及
*   部分/全部排序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T14:14:23.933

设*X*是一个集合。一个关系 < ⊆ *X*  ×  *X*是一个*偏序*，如果

*   对于所有*x* ∈ *X*，我们永远不会有*x* < *x*，

*   每当*x* < *y*，我们永远不会有*y* < *x*，并且

*   每当*x* < *y*和*y* < *z*时，我们就有*x* < *z*。

全*排序*是具有附加属性的部分排序，即对于任何两个*x*和*y*，我们恰好具有*x*  <  *y*或*y* < *x*或*x* = *y*之一。

集合*X*上的*弱排序*是（据我所知）部分排序 < 具有附加属性，即商集*X* / ~ 上的诱导排序是全排序，其中 [ *x* ] = [ *y* ] ∈ *X* / ~ 当且仅当*x*  <  *y*和*y*  <  *x*在*X*中都不成立。

 ***换句话说，在一个偏序中，*一些*元素是可以比较的，*如果*它们可以比较，则排序是一致的。部分排序的例子：

*   *集合X*的适当子集，其中*A* < *B*表示*A* ⊊ *B*。

*   *a* < *b*表示“ *a*除*b* ”的自然数。

*   C++ 中的模板特化。

全排序是*所有*元素同时形成一个单一的、一致的顺序。

如果您愿意将几个元素集中在一起并将它们视为等效的排序目的，那么弱排序就是总排序。

* * *

术语“严格”是指使用“<”作为定义关系，而不是“≤”。您可以看到用 ≤ 重写所有定义是多么容易，例如，在偏序中，我们总是有*x*  ≤ x 等。

* * *

这里有两个例子，都是 C++ 模板特化。当然，两者都是部分有序的，但第一个也是完全有序的。

**示例 #1：**

```
template <typename T> struct Foo {};               // A1
template <typename U> struct Foo<U*> {};           // A2
template <> struct Foo<int*> {};                   // A3 
```

这些特化完全按 A3 < A2 < A1 排序，其中“<”表示“比”更特化。

**示例 #2：**

```
template <typename T1, typename T2> struct Bar {}; // B1
template <typename U> struct Bar<int, U> {};       // B2a
template <typename V> struct Bar<V, int> {};       // B2b
template <> struct Bar<int, int> {};               // B3 
```

这一次，我们有 B3 < B2b < B1 和 B3 < B2a < B1，但 B2a 和 B2b*没有*可比性。

在 C++ 中，这表现为以下方式：如果未定义特化 B3，则尝试实例化`Bar<int, int>`将导致编译器错误，因为没有明确的“最特化”特化。

偏序集可以有许多“最小”元素和“最大”元素，因为这些概念只能谈论可比较的元素。在 B1、B2a 和 B2b 中，B2a 和 B2b 都是“最小元素”，因为没有比它更小的元素了。尽管如此，没有唯一的最小元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T10:19:59.767

简单地说，严格的弱排序被定义为**定义（可计算的）等价关系**的排序。等价类按严格弱排序排序：*严格弱排序是对等价类的严格排序*。

部分排序（不是严格的弱排序）没有定义等价关系，因此*任何使用“等价元素”概念的规范对于严格的弱排序都是没有意义的。*所有 STL 关联容器在某些时候都使用这个概念，因此所有这些规范对于严格的弱排序都是没有意义的。

因为部分排序（不是严格的弱排序）没有定义任何严格的排序，所以您不能根据偏排序在常识中“对元素进行排序”（您所能做的只是具有较弱属性的“拓扑排序”） .

给定

*   一个数学集`S`
*   `<`部分排序`S`
*   `x`一个值`S`

你可以定义一个分区`S`（的每个元素`S`要么在`L(x)`，`I(x)`要么`G(x)`）：

```
L(x) = { y in S | y<x }
I(x) = { y in S | not(y<x) and not(x<y) }
G(x) = { y in S | x<y }

 L(x) : set of elements less than x
 I(x) : set of elements incomparable with x
 G(x) : set of elements greater than x 
```

一个序列根据`<` *iff*对序列中的每一个`x`进行排序，其中的元素`L(x)`首先出现在序列中，然后是 的元素`I(x)`，然后是 的元素`G(x)`。

当序列中出现在另一个元素之后的每个元素不小于时，一个序列是拓扑排序*的*。这是一个比排序更弱的约束。`y``x``y``x`

证明 的每个元素`L(x)`都小于 的任何元素是微不足道的`G(x)`。`L(x)`的元素和 的元素`I(x)`之间，或 的元素`I(x)`和 的元素之间没有一般关系`G(x)`。但是，如果`<`是严格的弱关系，则比 的每个元素`L(x)`都小于 的任何元素`I(x)`，并且 的任何元素`I(x)`都小于 的任何元素`G(x)`。

If`<`是严格的弱关系，`x<y`则 的任何元素`L(x) U I(x)`小于任何元素`I(y) U G(y)`：不大于`x`的任何元素小于不小于 的任何元素`y`。**这不适用于部分排序。*****

# lucene - Lucene 查询解析器未按预期解析字段

> ID：14938169
> 
> 赞同：1
> 
> 时间：2013-02-18T14:05:26.200
> 
> 标签：lucene, lucene.net, query-parser

我想使用 lucene (3.0.3) 解析一个简单的查询：

```
title:(+return +"pink panther") 
```

就像在文档示例中一样。

预期结果是：

```
+title:return +title:"pink panther" 
```

但相反，我得到：

```
+title:return +title:"itle return pink panther" 
```

代码很简单（c#）：

```
Query query = 
    new QueryParser(
        Lucene.Net.Util.Version.LUCENE_30, 
        "content", 
        new Lucene.Net.Analysis.Standard.StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30))
    .Parse("title:(+return +\"pink panther\")"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T09:19:15.890

我无法重现这一点。这仍然发生在你​​身上吗？

我认为这可能是输出窗口中的一些显示伪影。这是来自即时窗口、监视窗口还是对 Console.WriteLine 的调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T07:17:21.820

抱歉给您带来麻烦，问题是自定义修改的 Lucene.Net 程序集...

# ios - git 和变音符号

> ID：14938172
> 
> 赞同：1
> 
> 时间：2013-02-18T14:05:28.540
> 
> 标签：ios, macos, git

我在 MAC OSX 上有一个名为“TransportAufträge”的文件夹，它是由 git 版本控制的。然后我将名称（在提交之前）更改为“TransportAuftraege”。

现在尝试提交时，我收到以下错误消息：

> 错误：pathspec '"App/ViewControllers/TransportAuftra\314\210ge/TransportAuftraege.h"' 与 git 已知的任何文件都不匹配。错误：pathspec '"App/ViewControllers/TransportAuftra\314\210ge/TransportAuftraege.m"' 与 git 已知的任何文件都不匹配。错误：pathspec '"App/ViewControllers/TransportAuftra\314\210ge/TransportAuftraege.xib"' 与 git 已知的任何文件都不匹配。

似乎 git 没有注意到我重命名了文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:10:52.530

在源代码管理下重命名文件时，您应该使用 Git 进行重命名，例如

```
git mv TransportAufträge.h TransportAuftraege.h
git mv TransportAufträge.m TransportAuftraege.m
git mv TransportAufträge.xib TransportAuftraege.xib 
```

幸运的是，您应该能够将文件重命名为原始名称（使用 Finder 或普通`mv`命令），然后运行这些`git mv`命令。

# bash - 从 csh 到 bash 并重新获取相同的文件

> ID：14938182
> 
> 赞同：1
> 
> 时间：2013-02-18T14:06:06.793
> 
> 标签：bash, csh

我有一个需要获取资源的 bash 文件。用户可能在不知道（默认配置）的情况下拥有 csh，所以我想将 shell 更改为 bash，但获取文件是因为这是用户的意图。

对此有很多帮助，生成的代码将是：

```
#!/bin/csh (AND bash!)
[ "$?shell" = "1" ] && bash --login -c 'source this_file; bash' && exit
... 
```

`this_file`除了必须对源文件进行硬编码这一事实之外，一切都按预期工作。在 csh`$_`中将包含`source this_file`因为那是开始获取脚本的命令，但是我无法将它传递给 bash 命令。

这表示：

1.  如果我使用：

    ```
    ... && set this_file=($_) && bash -c "$this_file; bash" && ...
    ```

    bash 会抱怨括号错误（这在 bash 启动并尝试获取源时第二次发生`this_file`

2.  如果我使用：

    ```
    ... && bash -c ""$_"; bash" && ... 
    ```

    bash 得到一个无效的命令：`bash -c "source" "this_file" "; bash"`

3.  如果我使用：

    ```
    ... && bash --login -c "$_; bash" && ... 
    ```

    csh 得到一个损坏的命令：“不匹配”。

我不知道如何使用`$_`可接受的 bash 语法，将值作为单个命令传递（即`bash -c "source this_file; bash"`）

这是测试：

```
cat >a.sh<<'EOF'
[ "$?shell" = "1" ] && bash --login -c 'source a.sh; bash' && exit
a=1
EOF 
```

然后我希望这会起作用：

```
$ csh -c 'source a.csh'
$ echo $a
1 
```

我很确定它曾经可以工作...我正在尝试找出为什么现在不行。（我使用 tcl modules 包解决了这个问题，但我会试一试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:33:49.040

可以将参数传递给`bash -c 'cmd'`构造，即`bash -c 'echo $@' arg0 1 2 3 4 5`！

```
#!/bin/csh (AND bash!)
#[ "$?shell" = "1" ] && bash --login -c 'source this_file; bash' && exit
[ "$?shell" = "1" ] && bash --login -c '${@}; bash' arg0 $_ && exit 
```

# cocoa-touch - 核心数据：在获取时重命名属性

> ID：14938185
> 
> 赞同：1
> 
> 时间：2013-02-18T14:06:16.137
> 
> 标签：cocoa-touch, core-data, nsfetchrequest

我有两个具有以下关系的实体：

```
Contact <--> ContactMeta 
```

在这里，Contact 的关系之一是“contactMeta”，而 ContactMeta 的属性之一是“操作”。

我在 Contact 实体上触发 fetchRequest。结果类型是 NSDictionaryResultType。

所以我得到了一个字典数组，我正在使用 NSJSONSerialization 对其进行序列化，并将其作为 JSON 请求发送到服务器。

现在，我将“contactMeta.operation”添加到 propertiesToFetch 列表中，因此字典中的键之一是“contactMeta.operation”。

**问题是 -**我需要在 JSON 请求中发送“操作”作为键，而不是“contactMeta.operation”。

**我有一个选择**——遍历列表中的每个字典，添加一个键——“操作”，其值为键“contactMeta.operation”的值，然后删除“contactMeta.operation”的键值。

但我对这种方法并不满意，并认为在 sqlite 中我们可以进行这样的查询：

```
Select first_name, last_name, contactmeta as operation from contact; 
```

我们可以在核心数据中做类似的事情，还是有什么更聪明、更好的方法来实现我想要做的事情？

请建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T09:27:06.083

你的预感是对的，还有另一种方法。NSExpressionDescription 是您正在寻找的。

```
 NSFetchRequest* request = [NSFetchRequest fetchRequestWithEntityName:@"Contact"];
    [request setResultType:NSDictionaryResultType];
    NSExpression *keyPathExpression = [NSExpression expressionForKeyPath:@"contactmeta"];
    NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];
    [expressionDescription setName:@"operation"];
    [expressionDescription setExpression:keyPathExpression];
    [expressionDescription setExpressionResultType:NSUndefinedAttributeType];
    [request setPropertiesToFetch:@[@"first_name",@"last_name",expressionDescription]];
    NSError* error = nil;
    NSArray* rez = [context executeFetchRequest:request error:&error]; 
```

# c# - 从自身静态方法访问受对象保护的静态字段

> ID：14938196
> 
> 赞同：-4
> 
> 时间：2013-02-18T14:06:57.907
> 
> 标签：c#, c#-3.0

我有一个棘手的情况，请让我描述一下，我有以下几个领域的公共课程：

```
public class TextClass  
{  
        protected static readonly TraceSwitch Ts = new TraceSwitch();
        protected static readonly TraceAction Th = new TraceHelper();

        public TextClass()
        {
        }

        public static void TakToSaTuAKODOSTANEM()
        {
            // i want to access to fieldd 'Ts' and 'Th' here!
        }
    } 
```

当我访问该方法时，我意识到已经创建了类的静态字段。你怎么看？

编辑1：好的，我写的有点不对，我可以像那样访问它，但重点是通过反射动态访问它们，因为我需要在更多不同的对象中使用它。

编辑2：谢谢大家，我提出了我的观点，我将关闭线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:17:38.040

您可以访问它们，它们是创建的，但您不能通过`this`. `this`引用实际实例。由于静态类没有实例，它不会工作。

你可以访问它们`TextClass.TraceSwitch`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T14:14:32.473

这两个字段都在您的应用程序启动期间初始化，因此您可以随时使用访问它们;-)

# c# - 什么是插入排序？

> ID：14938198
> 
> 赞同：-2
> 
> 时间：2013-02-18T14:07:00.780
> 
> 标签：c#, sorting, insertion-sort

我是编程新手，刚刚听说过排序。我浏览了排序的基础知识，发现插入排序是最简单的。但问题是我不明白它是什么！你能详细解释一下什么是插入排序以及如何实现它。在 c# 中的实现将不胜感激。

**任何帮助将不胜感激！:)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:10:23.043

[在维基百科](http://en.wikipedia.org/wiki/Insertionsort)上掠夺

插入排序的算法是

```
 int temp, j;

 for (int i=1; i < vector.length; i++){
   temp = vector[i];
   j = i-1;

   while (j >= 0 && vector[j] > temp){
     vector[j + 1] = vector[j];
     j--;
   }

   vector[j+1] = temp;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:11:23.990

对于小数据集的排序，插入排序比我们之前实现的算法（冒泡排序和选择排序）效率更高。当列表部分排序时，主要使用插入排序。我们假设第一个元素已排序。然后我们检查相邻索引的值是否更小或更大。如果值更小，我们将它插入到 index[0] 的左侧，这意味着现在更小的值位于 index[0] 处，如果它大于 index[0] 的原始值，那么我们得到一个 2 的排序列表元素。我们对相邻元素实施相同的方法。然后将其与之前的元素进行比较以创建排序列表。所以基本上 - 你最终会在数组的左侧得到排序列表，而在一个阶段在右侧未排序。

这是插入排序的 C# 实现：

```
class Program
    {
        static void Main(string[] args)
        {
            int i, j;
            int[] unsortedarrayed = new int[] { 34, 36, 2, 7, 8, 3, 6, 5 };

            for (i = 0; i < unsortedarrayed.Length; i++)
            {
                Console.WriteLine(unsortedarrayed[i]);
            }

            int[] sortedarray = InsertionSorted(unsortedarrayed);

            for (i = 0; i < sortedarray.Length; i++)    
            {
                Console.WriteLine(sortedarray[i]);
            }

            Console.Read();
        }

        public static int[] InsertionSorted(int[] unsortedarrayed)
        {
            for (int i = 1; i < unsortedarrayed.Length; i++)
            {
                int temp = unsortedarrayed[i];
                int j = i - 1;

                while ((j > -1) && (unsortedarrayed[j] > temp))
                {
                    int tempo = unsortedarrayed[j + 1];
                    unsortedarrayed[j + 1] = unsortedarrayed[j];
                    unsortedarrayed[j] = tempo;

                    j = j - 1;
                }
            }

            return unsortedarrayed;
        }
    } 
```

来源：有关更多详细信息，请单击以下链接：1）[链接 1](http://weemundo.com/insertion-sort-c) 2）[链接 2](http://www.softwareandfinance.com/CSharp/Insertion_Sort.html)

# html - 分配给 SVG:text 的伪元素后意外重复。使用伪元素和 SVG

> ID：14938201
> 
> 赞同：4
> 
> 时间：2013-02-18T14:07:10.540
> 
> 标签：html, css, google-chrome, svg, pseudo-element

这是一个两部分的问题，见下文。

在尝试使用 :after 伪元素通过 CSS 将 % 符号添加到 SVG 文本实例时，我遇到了这个问题（提供了[JsFiddle](http://jsfiddle.net/74mP2/)）。我使用的是 Chrome 版本 24.0.1312.57。

HTML：

```
<span class="percentage2">This is 20</span>
<p class="percentage2">This is 20</p>
<h1 class="percentage2">This is 20</h1>
<div class="wrapper">
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
        <text x="20" y="20" style="fill:black;" class="percentage2">This is 20</text>
    </svg>
</div> 
```

CSS：

```
.wrapper {
    width: 300px;
    height:80px;
    overflow:hidden;
}

.percentage2:after {
    content:"%";
    display: inline-block;
    font-size: 0.7em;
    position:relative;
    left:100px;
} 
```

出乎意料的结果是 % 符号出现了两次：一次在包装元素的最左边缘，一次在它应该定位的位置。

![在此处输入图像描述](../Images/ef695bae8dd9f9f644e5e32d43dacaa7.png)

**第一个问题**：为什么会这样？

如果我没有指定 display:inline-block :after 内容将作为内联插入 HTML 元素中，但不会出现在 SVG 中。

CSS：

```
.percentage1:after {
    content:"%";
    font-size:0.7em;
} 
```

截屏：

![在此处输入图像描述](../Images/2fa92c08cf7a879089443c53c797e979.png)

**第二个问题**：有没有办法将内联伪元素添加到 SVG 文本元素？将 :after 元素应用于 SVG 元素时，还支持哪些其他显示模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:08:13.140

就像 Duopixel 写的那样，SVG 不支持 CSS`:before`或`:after`应用于 svg 元素的伪元素。SVG 将来可能会允许这样做，但它应该如何工作仍然没有定义。

# oracle - 从 Mondo DB /Oracle 风格的 MongoDB 滞后操作中的前几行访问数据

> ID：14938203
> 
> 赞同：0
> 
> 时间：2013-02-18T14:07:10.963
> 
> 标签：oracle, mongodb, aggregation-framework

在 Oracle 中存在 LAG 分析功能，用于访问前一行的数据。

有没有什么直接的方法可以用 MongoDB 达到同样的效果？

我真正想做的是显示股票价格的每日变化。所以从下面的输入

```
 {
    {"stock":"Bob",
     "date":"2012-12-01",
     "price":97.99                         
    },
    {"stock":"Bob",
     "date":"2012-12-02",
     "price":98.99                         
    },
    {"stock":"Bob",
     "date":"2012-12-03",
     "price":99.99                         
    },
    .
    .
    .      
} 
```

我想返回一些类似的东西

```
 {
   {"stock":"Bob",
     "date":"2012-12-01",
     "dailyChange":null                         
    },
    {"stock":"Bob",
     "date":"2012-12-02",
     "dailyChange":1.0                         
    },    
    {"stock":"Bob",
     "date":"2012-12-03",
     "dailyChange":1.0                         
    },
    .
    .
    .      
} 
```

但要做到这一点，我每次都需要访问我正在处理的行之前的行。如果可能的话，能够使用聚合框架来做到这一点真是太好了。

任何建议都非常感谢。

谢谢，

马特。

更新：

正如下面所建议的，将这些信息存储下来是有意义的，因为数据没有变化。这意味着每次新价格出现时，都需要创建新的每日变化值。

这样做的最佳方法是什么？map reduce 任务似乎是最好的，但我不清楚它是如何构建的。

# smartgwt - smart gwt 将列表保存为属性

> ID：14938207
> 
> 赞同：0
> 
> 时间：2013-02-18T14:07:16.650
> 
> 标签：smartgwt

您好，我是 smart gwt 的新手，现在我们从 smartgwt 2.1 迁移到 smart gwt 3.1p，我遇到了问题：

> java.lang.UnsupportedOperationException：无法将数组的元素 0 转换为 JavaScriptObject。类 `com.test.ListDTO' 的实例不能自动转换。请参阅 RPCRequest.data 的 SmartClient 文档以获取可自动转换的 Java 类型表。

有人写：

```
treeNode.setAttribute(TODO, listDTO.getLis()); 
```

我该如何修复该代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:04:54.953

TreeNode 的 setAttribute 方法尝试在内部转换列表元素。您自己的域对象失败了。您可以尝试使用此辅助方法设置列表：

```
com.smartgwt.client.util.JSOHelper.setObjectAttribute(treeNode.getJsObj(), TODO, listDTO.getLis()); 
```

现在 Java 对象被设置在 JavaScriptObject 上。要取回此对象，您可以调用：

```
treeNode.getAttributeAsObject(TODO); 
```

# sql - 如何在sql server中使用if语句和case

> ID：14938210
> 
> 赞同：0
> 
> 时间：2013-02-18T14:07:38.330
> 
> 标签：sql

我的源表（CountryCodes、SubCodes）中有几列，这些列的值是

```
Subcodes   CountryCodes  
100         1111
100         1566
100         2485
100         4586
101         4789
101         4756
101         7895     so on 
```

我正在使用下面的查询，它根据需要给我结果

```
select 
    CASE  WHEN C.SubCodes= '100' Then 
            CASE 
                WHEN C.CountryCodes IN ('5001','5048') THEN '001'
                WHEN C.CountryCodes = '5005' THEN '003'
                WHEN C.CountryCodes= '5018' AND SA.Amt IN(30,900) THEN '094'
                WHEN C.CountryCodes = '5018' AND SA.Amt IN(40,1200) THEN '095'
                WHEN C.CountryCodes = '5018' AND SA.Amt IN(50,1500) THEN '096'
                WHEN C.C.CountryCodes  = '5029' THEN '781'
                WHEN C.C.CountryCodes  = '5026' THEN '454'
                WHEN C.C.CountryCodes  = '5064' THEN '001'
                WHEN C.C.CountryCodes  = '5017' THEN '064' 
                               ELSE CAST('' AS CHAR(3))
            END 
    ELSE CAST('' AS CHAR(3))    
END
        END AS SomeCountryCoDes 
```

现在业务提出了新的要求。那是

CountryCode 5020 位于 SubCode 100 中。

现在我的要求是如果`CountryCode 5020`是，`Subcode 100`那么我需要将 subCode 的值从 100 更改为 101。

上面的 case 语句必须用 if 语句进行修改。

Step1: 如果 CountryCode = 5020 and subcode= 100 那么 Subcode 必须是 101 Else case statement

Step2：上述Case语句必须在IF之后

注意：在 Source 表中，不应更改该值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:13:29.623

你为什么不只做一个案例而不是嵌套案例：

```
CASE WHEN C.SubCode = '100' AND C.CountryCode in ('5001', '5048') THEN '001'
  WHEN C.SubCode = '100' AND C.CountCode =- '5005' THEN '003'
  ...
  WHEN C.SubCode = '100' AND CountryCode = '5020' THEN '101'
  ...
END 
```

# arrays - 在javascript中迭代json

> ID：14938215
> 
> 赞同：-3
> 
> 时间：2013-02-18T14:07:45.433
> 
> 标签：arrays, json

想要遍历这条路线->边界->腿->步骤和警报（路径）。我是新来使用 json 的，你能告诉我如何实现这个吗？提前谢谢。

JSON是——

```
 {"routes":[{"bounds":{"copyrights":"Map data ©2013 Google"},
"legs":["steps":[{"distance":{"text":"1 ft","value":0},
"path":[{"ib":39.049870000000006,"jb":-76.51013}],
"lat_lngs":[{"ib":39.049870000000006,"jb":-76.51013}],
"start_point":{"ib":39.04987000000001,"jb":-76.51013},
"end_point":{"ib":39.04987000000001,"jb":-76.51013}}],
"via_waypoint":[],"via_waypoints":[]}],"status":"OK"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:26:40.620

第一步是解析您收到的 JSON 字符串。然后你可以通过点符号访问它的所有属性：

使用 jQuery，您可以这样做：

```
//{
//  "Name": "Apple",
//  "Expiry": "2008-12-28T00:00:00",
//  "Price": 3.99,
//  "Sizes": [
//    "Small",
//    "Medium",
//    "Large"
//  ]
//}

var json = '{"Name": "Apple","Expiry": "2008-12-28T00:00:00","Price": 3.99,"Sizes": ["Small","Medium","Large"]}';

var obj = jQuery.parseJSON(json);

$.each(obj.Sizes, function(index, item) {
   $("body").append("<p>" + item + "</p");
}); 
```

看看我如何访问`Sizes`解析的 JSON 字符串上的属性： `obj.Sizes`

# symfony - 包括使用相同子包的两个包

> ID：14938216
> 
> 赞同：1
> 
> 时间：2013-02-18T14:07:47.677
> 
> 标签：symfony, twitter-bootstrap, composer-php, sonata-admin

我试图在我的 symfony2.1 项目中使用以下两个包：

*   [奏鸣曲管理包](https://github.com/sonata-project/SonataAdminBundle)
*   [精心设计的引导程序包](https://github.com/braincrafted/bootstrap-bundle)

我的问题是，这两个捆绑包都使用[knp-menu bundle](https://github.com/KnpLabs/KnpMenu)。但是奏鸣曲需要 1.1.x-dev 的 knp-menu 包和精心设计的 bootstrap-bundle dev-master。

使用以下作曲家设置，我收到以下错误。作曲家.json：

> ```
>  "sonata-project/admin-bundle": "dev-master",
>     "sonata-project/doctrine-orm-admin-bundle": "dev-master",
>     "sonata-project/intl-bundle": "dev-master",
>     "sonata-project/cache-bundle": "dev-master",
>     "knplabs/knp-menu-bundle": "1.1.x-dev",
>     "braincrafted/bootstrap-bundle": "dev-develop" 
> ```

错误：在 vendor/braincrafted/bootstrap-bundle/Braincrafted/BootstrapBundle/Voter/RequestVoter 中找不到 Knp\Menu\Matcher\Voter\VoterInterface'

我知道早期的 knp 菜单捆绑版本中不存在 Matcher。但是，如果我将 knp 菜单包版本更改为：

> “knplabs/knp-menu-bundle”：“开发大师”，

无法安装奏鸣曲管理包。如果我执行命令“composer.phar update”，会出现以下错误

```
 Problem 1
    - sonata-project/admin-bundle dev-master requires knplabs/knp-menu-bundle >=1.1.0,<2.0.x-dev -> satisfiable by knplabs/knp-menu-bundle 1.1.x-dev, knplabs/knp-menu-bundle 1.1.x-dev, knplabs/knp-menu-bundle v1.1.0.
    - sonata-project/admin-bundle dev-master requires knplabs/knp-menu-bundle >=1.1.0,<2.0.x-dev -> satisfiable by knplabs/knp-menu-bundle 1.1.x-dev, knplabs/knp-menu-bundle 1.1.x-dev, knplabs/knp-menu-bundle v1.1.0.
    - Can only install one of: knplabs/knp-menu-bundle dev-master, knplabs/knp-menu-bundle 1.1.x-dev.
    - Can only install one of: knplabs/knp-menu-bundle dev-master, knplabs/knp-menu-bundle 1.1.x-dev.
    - Can only install one of: knplabs/knp-menu-bundle v1.1.0, knplabs/knp-menu-bundle dev-master.
    - Installation request for knplabs/knp-menu-bundle dev-master -> satisfiable by knplabs/knp-menu-bundle dev-master.
    - Installation request for sonata-project/admin-bundle dev-master -> satisfiable by sonata-project/admin-bundle dev-master. 
```

有人知道我如何使用这两个捆绑包还是没有办法？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:38:53.740

编辑 composer.json 并参考 knp-menu-bundle 修改该行，如下所示： **"knplabs/knp-menu-bundle": "1.1.x-dev",**

它需要一个 >=1.1.0,<2.0.x-dev 的版本，该版本在错误的第一行中说明。

这对我行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:33:10.733

使用 Composer，您不能同时使用这两个包。其实你应该在[https://github.com/braincrafted/bootstrap-bundle](https://github.com/braincrafted/bootstrap-bundle)开一张票并说明情况。他们应该更新项目的 composer.json 以允许人们使用当前版本的 KnpMenu 而不仅仅是最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T14:19:17.637

我找到了一个临时解决方案来使用这两个捆绑包，直到这张[票](https://github.com/sonata-project/SonataAdminBundle/issues/1234)得到解决。

我在 composer.json 文件中定义了一个存储库并操作了奏鸣曲管理包要求**（“knplabs/knp-menu-bundle”：“dev-master”）：**

```
"repositories": [
{
    "type": "package",             
    "package": {
        "name": "sonata-project/admin-bundle",
        "type": "symfony-bundle",
        "description": "Symfony SonataAdminBundle",
        "keywords": ["Admin Generator", "admin", "sonata", "bootstrap"],
        "homepage": "http://sonata-project.org/bundles/admin",
        "license": "MIT",
        "authors": [
        {
            "name": "Thomas Rabaix",
            "email": "thomas.rabaix@sonata-project.org",
            "homepage": "http://sonata-project.org"
        },
        {
            "name": "Sonata Community",
            "homepage": "https://github.com/sonata-project/SonataAdminBundle/contributors"
        }
        ],
        "require": {
            "symfony/http-foundation": ">=2.1,<2.3-dev",
            "symfony/form": ">=2.1,<2.3-dev",
            "symfony/validator": ">=2.1,<2.3-dev",
            "symfony/security-bundle": ">=2.1,<2.3-dev",
            "symfony/routing": ">=2.1,<2.3-dev",
            "symfony/config": ">=2.1,<2.3-dev",
            "symfony/console": ">=2.1,<2.3-dev",
            "symfony/twig-bridge": ">=2.1,<2.3-dev",
            "twig/twig": ">=1.10,<2.0-dev",
            "knplabs/knp-menu-bundle": "dev-master",
            "sonata-project/jquery-bundle": "dev-master",
            "sonata-project/exporter": "dev-master",
            "sonata-project/block-bundle": "dev-master",
            "doctrine/common": ">=2.2,<3.0"
        },
        "require-dev": {
            "jms/translation-bundle": "*"
        },
        "suggest": {
            "sonata-project/doctrine-orm-admin-bundle": "dev-master",
            "sonata-project/intl-bundle": "dev-master"
        },
        "autoload": {
            "psr-0": {
                "Sonata\\AdminBundle": ""
            }
        },
        "target-dir": "Sonata/AdminBundle",            
        "version": "dev-master",
        "source": {
            "url": "git://github.com/sonata-project/SonataAdminBundle.git",
            "type": "git",
            "reference": "0269691d61764798537a2fd3b13bfafbfb387eef"
        }                   

    }
} 
```

然后我不得不覆盖管理类中的 buildSideMenu 方法，因为方法 setCurrentUri() 不再存在（现在命名为 setUri()）。我自己的所有管理类现在都扩展了 MyAdmin

```
abstract class MyAdmin extends Admin
{

    /**
     * Build the side menu related to the current action
     *
     * @param string                                   $action
     * @param \Sonata\AdminBundle\Admin\AdminInterface $childAdmin
     *
     * @return \Knp\Menu\ItemInterface|boolean
     */
    public function buildSideMenu($action, AdminInterface $childAdmin = null)
    {
        if ($this->loaded['side_menu']) {
            return;
        }

        $this->loaded['side_menu'] = true;

        $menu = $this->menuFactory->createItem('root');
        $menu->setChildrenAttribute('class', 'nav nav-list');
        $menu->setUri($this->getRequest()->getBaseUrl().$this->getRequest()->getPathInfo());

        $this->configureSideMenu($menu, $action, $childAdmin);

        foreach ($this->getExtensions() as $extension) {
            $extension->configureSideMenu($this, $menu, $action, $childAdmin);
        }

        $this->menu = $menu;
    }

} 
```

我知道这不是最好的解决方案，但它适用于我的目的

# java - Android中的混乱多线程

> ID：14938217
> 
> 赞同：1
> 
> 时间：2013-02-18T14:07:51.170
> 
> 标签：java, android, multithreading, thread-sleep

这是我的代码：

```
public class MainActivity extends Activity {
    private TextView view;
    private Handler handler = new Handler();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        view = (TextView) findViewById(R.id.view);
        view.setText("how are you");

        handler.post(r);

        System.out.println("oncreate");
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        System.out.println("onstart");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    Runnable r = new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            try {
                Thread.sleep(10000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    };
} 
```

在**activity_main.xml**中，我采用的是LinearLayout，里面只有一个TextView。运行程序后，10秒后屏幕上会出现“你好吗”的文字。但是文本字符串“oncreate”和“onstart”可以立即显示在logcat中。这怎么可能发生？在我看来，所有的文本字符串应该在程序运行后的 10 秒后显示出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:24:13.563

简单的方法是：

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
view = (TextView) findViewById(R.id.view);
System.out.println("oncreate");
new Thread(new Runnable() {
        public void run() {
            try {
                Thread.sleep(10000);
            } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            }
         }
}).start();
    view.setText("how are you");

} 
```

此代码将立即在 logcat 上打印“onstart”和“oncreate”，接下来 10 秒将在 textview 上设置文本...

# powershell - 创建具有适当范围的函数

> ID：14938229
> 
> 赞同：1
> 
> 时间：2013-02-18T14:08:19.520
> 
> 标签：powershell, scope

我需要创建一个脚本来对远程 PC 进行身份验证并访问 PS 控制台。它确实有效，但是当我需要终止此会话时，我需要执行一些命令。

所以我创建了一个函数 STOP 被调用来终止会话，但它不能被使用。这是范围问题吗（因为它在 if 语句中）？如果我手动创建相同的函数，然后尝试调用它......它可以工作！

```
# get connection parameters
$credential = Get-Credential -Credential xxx
$remote_PC = Read-Host "Insert the server name or IP (Q to abort): "
# connect
if (someKindOfCheck) {
    Enter-PSSession -ComputerName $remote_PC -Credential $credential
    # some commands
    function STOP {
        Exit-PSSession;
        # some commands
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:31:28.393

我之前遇到过类似的问题，我通过创建一个`New-PSSession`并将其分配给一个变量来解决它，然后我使用`Invoke-Command`with`-Session`选项来执行所需的命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T14:30:24.423

Enter-PSSession 仅用于交互式使用（一旦您进入该会话，它只接受来自控制台的输入）。我能想到的使这项工作“自动”的唯一方法是在目标机器上创建一个自定义远程会话，该会话为 Exit-PSSession 实现代理功能，并将您的命令放入该功能中。

# c - size_t 预处理器值的大小

> ID：14938231
> 
> 赞同：4
> 
> 时间：2013-02-18T14:08:25.390
> 
> 标签：c, hash, hashtable, c-preprocessor, size-t

出于教育目的，我正在 C 中创建哈希表的实现。

散列函数应该返回一个 size_t 散列。由于 size_t 的大小在不同的平台上是不同的（并且我想使用一个散列函数来散列 size_t 中的所有位），我想为不同的大小创建不同的散列函数。由于哈希函数将用作函数指针，我怀疑编译器不能像这样内联代码：

```
size_t hash4(void* key, size_t size);
size_t hash8(void* key, size_t size);

size_t hash(void* key, size_t size)
{
    if (sizeof(size_t) == 4)
    {
        return hash4(key, size);
    }
    else if (sizeof(size_t) == 8)
    {
        return hash8(ket, size);
    }
}

size_t (*hashFunc)(void* key, size_t size) = hash; 
```

每次调用散列函数时都会使用两级间接。

这就是为什么我想做这样的事情：`size_t (*hashFunc)(void* key, size_t size) = hash##sizeof(size_t);`而不是。只会使用一级间接。问题是 sizeof 运算符在 prepossessing 阶段不可用。

那么定义一个预处理器值的好方法是什么，它将在每个平台上扩展到正确的 size_t 大小？我想我可以检查预定义的宏，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T14:21:09.787

`sizeof`是 C 运算符。`##`是预处理器运算符。后者对前者一无所知。

因此，您最好使用一个宏来引用系统用于寻址的位宽，例如像这样进行测试：

```
#if UINTPTR_MAX == 0xffffffffffffffff
/* it's 64bits pointers */
#elif UINTPTR_MAX == 0xffffffff
/* it's 32bits pointers */
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T14:21:19.320

你可以这样做：

```
size_t (*hashFunc)(void* key, size_t size) = (sizeof(size_t) == 8) ? hash8 : hash4; 
```

eznme 的方法也没有任何问题——编写一个根据`size_t`. 当然，前提是您不需要该`hash4`功能用于 64 位实现的其他目的。

关于问题的标题-如果您绝对需要`size_t`在预处理器时了解，请使用`SIZE_MAX`来自`stdint.h`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:12:51.033

使用为许多编译器定义的 64 位检测宏，例如 GCC 使用`__x86_64`

```
size_t hash(void* key, size_t size) {
   #ifdef __x86_64
       compute 64bit hash
   #else
       compute 32bit hash
   #endif
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-23T22:40:55.127

> 那么定义一个预处理器值的好方法是什么，它将在每个平台上扩展到正确的 size_t 大小？

根据[Glibc 手册 | 整数类型的宽度](https://www.gnu.org/software/libc/manual/html_node/Width-of-Type.html)：

> TS 18661-1:2014 定义了整数类型宽度的宏（值和符号位的数量）。这些宏的一个好处是它们可以在#if 预处理器指令中使用，而 sizeof 不能。以下宏在limits.h 中定义。
> 
> ```
> CHAR_WIDTH
> SCHAR_WIDTH
> UCHAR_WIDTH
> SHRT_WIDTH
> USHRT_WIDTH
> INT_WIDTH
> UINT_WIDTH
> LONG_WIDTH
> ULONG_WIDTH
> LLONG_WIDTH
> ULLONG_WIDTH 
> ```
> 
> 这些分别是 char、signed char、unsigned char、short int、unsigned short int、int、unsigned int、long int、unsigned long int、long long int 和 unsigned long long int 类型的宽度。
> 
> 此外，此类宏在 stdint.h 中定义。除了由宽度指定的类型（参见整数）之外，还定义了以下内容：
> 
> ```
> INTPTR_WIDTH
> UINTPTR_WIDTH
> PTRDIFF_WIDTH
> SIG_ATOMIC_WIDTH
> SIZE_WIDTH
> WCHAR_WIDTH
> WINT_WIDTH 
> ```
> 
> 这些分别是 intptr_t、uintptr_t、ptrdiff_t、sig_atomic_t、size_t、wchar_t 和 wint_t 类型的宽度。

根据手册`SIZE_WIDTH`是你要找的。

我不确定 MSVC、XLC 和 SunCC 等编译器是否可用；或 AIX、OX X、Solaris 或 Windows 等平台。

# asp.net - 提交按钮时如何将两个单选按钮和总数添加到 mdb 数据库？

> ID：14938233
> 
> 赞同：0
> 
> 时间：2013-02-18T14:08:36.180
> 
> 标签：asp.net, ms-access

嘿，我需要这个作业的帮助，我有一个名为 Courses 的 mdb 数据库，其中一个表名为`Course1`4 个字段

```
ID(AutoNumber),Alchamex1(Text) and Alchamex2(Text) Total(Text) 
```

我如何将这些选定的值保存到 mdb 数据库中提前谢谢！！！

```
If CheckBox1.Checked = True And CheckBox2.Checked = True Then   
    answerLbl.Text =( Double.Parse(Label1.Text)+ Double.Parse(Label2.Text)).ToString()
ElseIf CheckBox2.Checked = True Then
    answerLbl.Text =Label2.Text
ElseIf CheckBox1.Checked = True Then
    answerLbl.Text = Label1.Text
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:25:31.537

基本步骤：

```
OleDbConnection connection = new OleDbConnection (connectionString);
OleDbCommand cmd = new OleDbCommand();
cmd.Connection = connection;
cmd.CommandText= "INSERT INTO Table1(col1, col2) VALUES (@col1, @col2)";
cmd.Parameters.Add ("@col1", OleDbType.String).Value = valueToInsert;
...
cmd.ExecuteNonQUery(); 
```

参考这个：

[使用 ASP.NET 将记录插入 Microsoft Access 数据库](http://www.codefixer.com/asp-net/tutorials/insert-records-access-database-2.asp)

[在VS 2010中将asp.net与MS access 2007连接起来](https://stackoverflow.com/questions/12041223/connecting-asp-net-with-ms-access-2007-in-vs-2010)

[从 ASP.NET 插入到 MS Access](https://stackoverflow.com/questions/459442/insert-from-asp-net-to-ms-access)

# javascript - 需要 JS，谷歌地理编码 - 同源问题

> ID：14938237
> 
> 赞同：0
> 
> 时间：2013-02-18T14:08:44.073
> 
> 标签：javascript, json, google-maps-api-3, requirejs, geocoding

**我在做什么和我尝试过的**

我正在使用谷歌地理编码网络服务来获取我通过的地址的纬度和经度，如下所示：

```
$.getJSON("http://maps.googleapis.com/maps/api/geocode/json?address=Boston&sensors=true",function(data){
    //Do my programming here
}); 
```

出于某种原因，它最初工作得很好，但后来它停止工作，我发现[这](https://stackoverflow.com/questions/2921745/how-to-make-cross-domain-ajax-calls-to-google-maps-api)是问题所在，即使用谷歌客户端 API。

我还阅读了关于[那个](https://stackoverflow.com/questions/2921745/how-to-make-cross-domain-ajax-calls-to-google-maps-api)SO 问题的答案，其中说`<script>`标签有助于克服跨站点脚本问题。

**我的问题 ：**

我正在使用 RequireJs，所以我包含这样的文件：

```
var Google = require("http://maps.google.com/maps/api/js?sensor=false"); 
```

那么，如何让我的 Google API 再次工作以及如何使用 requireJS 来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:50:17.580

requirejs 将异步加载 Maps-API，但您使用的 URL 不能用于异步加载（请参阅[async loading javascript with document.write](https://stackoverflow.com/questions/13003644/async-loading-javascript-with-document-write/13004230#13004230)）。

**怎么做：**将回调参数添加到 URL，以便能够异步加载 Maps-API 并在名称等于提供的`callback`参数值的函数中执行与 google-maps 相关的代码。

```
function geocodeaddr(){
  var geocoder = new google.maps.Geocoder();
      geocoder.geocode({ 'address': 'Boston' }, function (results, status) {
         if (status == google.maps.GeocoderStatus.OK) {
            console.log(results[0].geometry.location);
         }
         else {
            console.log("Geocoding failed: " + status);
         }
      });
}
require(["http://maps.google.com/maps/api/js?sensor=false&callback=geocodeaddr"]); 
```

# ruby-on-rails-3 - PaperClip + S3 AWS + Rails 3 + Heroku 部署时出错

> ID：14938240
> 
> 赞同：1
> 
> 时间：2013-02-18T14:08:53.287
> 
> 标签：ruby-on-rails-3, heroku, amazon-web-services, amazon-s3, paperclip

我正在尝试在 s3 上托管我的图像，但是当我将我的应用程序部署到 heroku 时，它返回一个错误：

Heroku 日志：

```
Completed 500 Internal Server Error in 14ms
2013-02-18T13:58:01+00:00 app[web.1]: 
2013-02-18T13:58:01+00:00 app[web.1]:     12:     <%= f.input :needshussler, as: :boolean, label: "Hussler" %>
2013-02-18T13:58:01+00:00 app[web.1]: ActionView::Template::Error (no such file to load -- aws-sdk (You may need to install the aws-sdk gem)): 
```

我在亚马逊创建了一个名为 startupcogs-pro 的存储桶

我的 config/s3.yml 文件包含：

```
development:

 bucket: startupcogs-dev
  access_key_id: ***
  secret_access_key: ***
production:
  bucket: startupcogs-pro
  access_key_id: ***
  secret_access_key: *** 
```

我的初始化程序/s3.rb 包含：

```
if Rails.env == "production"
  # set credentials from ENV hash
  S3_CREDENTIALS = { :access_key_id => ENV['S3_KEY'], :secret_access_key => ENV['S3_SECRET'], :bucket => ENV['S3_BUCKET']}
else
  # get credentials from YML file
  S3_CREDENTIALS = Rails.root.join("config/s3.yml")
end 
```

我的模型有：

```
has_attached_file :image, :storage => :s3, :s3_credentials => S3_CREDENTIALS, styles: { large: "800x600>"} 
```

我这样设置我的heroku键：

```
heroku config:add S3_KEY=*** S3_SECRET=*** S3_BUCKET=startupcogs-dev 
```

任何帮助都是极好的！挣扎了一段时间......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:25:51.550

显然我只有 aws-s3 gem 而不是 aws-sdk gem！

# c++ - C/C++：如何正确地将“unsigned int *”值转换为“unsigned int”？

> ID：14938242
> 
> 赞同：0
> 
> 时间：2013-02-18T14:08:56.727
> 
> 标签：c++, c, memory, unsigned, unsigned-integer

我有一个“unsigned int *”值，我需要将它转换为一个简单的“unsigned int”，这样我就可以将它转移到一个函数中。但是，不幸的是，当我尝试进行简单的转换时，值会发生变化：

```
Code:

unsigned int * addr;

...

fprintf(stdout, "=== addr: %08x ===\n", addr); fflush(stdout);
fprintf(stdout, "=== casted addr: %08x ===\n", (unsigned int)addr);

Output:

=== addr: fc880000 ===
=== casted addr: 400eff20 === 
```

请告诉我，如何正确转换此值，使其在转换过程中不会改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T14:12:40.290

只需使用`*addr`. 这是有效的，应该始终有效。如果您需要获取指针的**值**而不是指针指向的值**，**则需要更大的类型。通常 an 的`unsigned int*`值为 64 位，而`unsigned int`只有 32 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:13:04.763

当你声明一个指针时，比如

```
unsigned int * addr; 
```

该指针的值将是`unsigned int`它指向的地址。

当您想获取`unsigned int`它指向的值时，请使用取消引用运算符`*`：

```
unsigned int value = *addr; 
```

因此，您在第二个输出行中看到的是`addr`指向的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:13:04.833

如果您有某种类型的指针，并且需要将其转换为仅类型，则只需要引用指针即可。

```
void foo(unsigned int some_value);

...

int main()
{

    unsigned int * addr = 0x12345678; // some address holding an unsigned int
    foo(*addr);  // some function taking a unsigned int 
```

无需在此处进行任何类型转换，因为您没有更改类型。请注意您的代码中的“值”不会改变：

```
// prints the address
fprintf(stdout, "=== addr: %08x ===\n", addr); 

// prints the value at that address
fprintf(stdout, "=== casted addr: %08x ===\n", *(unsigned int *)addr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T14:14:08.777

你没有改变价值。在

```
fprintf(stdout, "=== addr: %08x ===\n", addr); fflush(stdout); 
```

您正在访问指针的地址。

在

```
fprintf(stdout, "=== casted addr: %08x ===\n", *(unsigned int *)address); 
```

您正在访问指向的值。

# python - 需要帮助设计正则表达式或 pyparsing 方法来修改管道中包含的所有单词

> ID：14938243
> 
> 赞同：0
> 
> 时间：2013-02-18T14:08:57.600
> 
> 标签：python, regex, pyparsing

例如：

```
blahblah|0A 4D 5E 43|adfsdasd|92| sgagrewas|12 5E| 
```

必须成为

```
blahblahx0Ax4Dx5Ex43adfsdasdx92 sgagrewasx12x5E 
```

我正在尝试一些类似的东西：`re.sub(r'\|(\w+ ?)*\|', r'x\1', a)`但是我很难让它在第一场比赛之外发挥作用。

**更新**：看起来正则表达式不是一个好的选择。pyparsing 解决方案可行吗？

如果没有，我可以编写一个简单的迭代解决方案，但我更喜欢可扩展的东西。但我很难让它比第一场比赛更有效。

**UPDATE2**：我最后使用了纯python方法，它工作正常，也可以处理转义字符。

```
def strtohex(self, string):
    hexmode = False
    hexstring = ''
    i=0
    while i<len(string):
        if string[i] == '\\':
            i += 1
            #No escape charecters inside hex pipes
            hexstring += string[i]   
        elif string[i] == '|':
            hexmode = not hexmode
        elif string[i] == ' ':
            hexstring += '' if hexmode else  ' '
        else:
            if hexmode:
                hexstring += chr(int(string[i:i+2],16))
                i += 1
            else:
                hexstring += string[i]

        i += 1
    return hexstring 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:12:35.683

这是 pyparsing 中的样子：

```
from pyparsing import Word,hexnums,Suppress,OneOrMore

twoDigitHex = Word(hexnums,exact=2)
VERT = Suppress('|')

pattern = VERT + OneOrMore(twoDigitHex) + VERT

# attach parse action to prefix each 2-digit hex with 'x' and join all together
pattern.setParseAction(lambda t: ''.join('x'+tt for tt in t))

# take sample code, and use transformString to apply conversion
sample = "blahblah|0A 4D 5E 43|adfsdasd|92| sgagrewas|12 5E|"
print pattern.transformString(sample) 
```

印刷

```
blahblahx0Ax4Dx5Ex43adfsdasdx92 sgagrewasx12x5E 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T15:08:31.810

我敢肯定你*可以*只使用正则表达式来做到这一点，但为什么要麻烦呢？使用您的编程语言很简单：

在竖线处折断你的绳子。检查并酌情替换。重组。

```
line = 'blahblah|0A 4D 5E 43|adfsdasd|92| sgagrewas|12 5E|'
parts = line.split('|')
for i, s in enumerate(parts):
    if re.match(r'^([\dA-F]{2} )*[\dA-F]$', s):
    parts[i] = re.sub('^| ', 'x', s)
result = "".join(parts) 
```

*检查整个*子字符串是否由以空格分隔的两位十六进制数字组成。我假设所有的十六进制字母都是大写的，就像你的例子一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:43:41.207

我不认为 python 能够平衡正则表达式。据我所知，.NET 是唯一具有这种支持的风格（而且它看起来很丑，维护起来也很糟糕）。

您最好在管道符号上拆分字符串，然后重新加入字符串，在奇数字符串数组项上应用所需的格式（如果需要，通过正则表达式）。

**编辑：**再想一想，我相信这可以使用带有可变长度表达式的lookbehind，但不幸的是python不支持这些。（例如，类似的东西`(?<=^(?:[^|]*\|[^|]*\|)*[^|]*)\|(\w+ ?)*\|`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:25:51.670

我进行了两次：

*   第一次替换每个十六进制值
*   然后删除空白和`|`

它给：

```
>>> s = 'blahblah|0A 4D 5E 43|adfsdasd|92| sgagrewas|12 5E|'
>>> re.sub(r'[| ]', r'', re.sub(r' ?([0-9A-F]{2})', r'x\1', s))
'blahblahx0Ax4Dx5Ex43adfsdasdx92sgagrewasx12x5E' 
```

# jakarta-ee - JNDI 查找不适用于 EJB 3.x

> ID：14938244
> 
> 赞同：5
> 
> 时间：2013-02-18T14:09:10.173
> 
> 标签：jakarta-ee, jpa-2.0, jndi, ejb-3.1

我正在使用以下 Bean 类：

```
@Stateless(name="UserBean", mappedName="UserBean")
@LocalBean
public class User implements UserRemote {

@PersistenceContext
private EntityManager em;

public User() {

}

public String login(String username, String password) {

    Query query = em.createQuery("...");
    return "xyz";
}

} 
```

我的方法是

```
public String myMethod()    {

    try {
        User user = (User) new InitialContext().lookup("UserBean");
        return "xyz";
    } catch (NamingException e) {
        e.printStackTrace();
    }
    return null;        
} 
```

在这里我得到一个

```
javax.naming.NameNotFoundException: Unable to resolve 'UserBean'. Resolved ''; remaining name 'UserBean' 
```

JNDI 查找名称“UserBean”似乎是正确的。不知道是什么问题。有人可以帮忙吗？我已经使用 JPA 2.0 和 EJB 3.x 在 weblogic 12c 上部署了我的应用程序

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-18T09:41:52.657

问题是我使用的是远程接口。仅使用没有映射名称的@stateless 注释以下代码有效：

```
new InitialContext().lookup("java:global/ProjectName/ModuleName/BeanName!FullyQualif‌​iedNameOfRemoteInterface"); 
```

谢谢@安德烈！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-31T08:49:51.200

虽然这个问题两年前就已经回答了，但我想对此添加评论。使用 mappedName 属性应该没有问题。如果您在 WebLogic 上进行部署，则必须添加`#[fully.qualified.interface.name]`查找。

例如`mappedName = "UserBean",`，EJB 在 com.acme.user 包中实现了一个名为 MyInterface 的接口，那么查找就像

```
... = new InitialContext().lookup("UserBean#com.acme.user.MyInterface"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:31:17.063

使用 Portable JNDI Name 可能是一个更好的主意，即只用注释`@Stateless`

[https://blogs.oracle.com/kensaks/entry/application_specified_portable_jndi_names](https://blogs.oracle.com/kensaks/entry/application_specified_portable_jndi_names)

# django - Django 音乐应用的 urls.py 结构

> ID：14938250
> 
> 赞同：0
> 
> 时间：2013-02-18T14:09:53.683
> 
> 标签：django, django-urls

我的 Django 应用程序的 urls.py 文件的结构存在一些问题。

我的项目是一个基本的音乐播放器应用程序。您首先单击*Music*的链接，然后单击（例如）*Artists*，然后选择艺术家，例如*Weezer*。然后，该应用程序会显示该艺术家的专辑和歌曲列表，由 views.artist_name 在**artist_name.html****模板**上呈现**函数**

 **到目前为止，在应用程序的导航中，URL 看起来像*http://localhost/music/artists/Weezer/*。

我的问题在于下一个 URL 的编码。如果我选择 Weezer 的专辑*The Blue Album*，我会返回 URL：*http://localhost/music/artists/Weezer/The%20Blue%20Album*。

这应该使用**views.artist_album_title**函数呈现一个名为**artist_album_title.html的模板。**相反，它使用与当前页面相同的**views.artist_name**函数呈现新页面。

 ****似乎正在发生的事情是*...Weezer/The%20Blue%20Album/*的正则表达式模式与我的 urls.py 文件中的相关 URL 模式不匹配。作为 Django 新手（并且对正则表达式的经验很少），我很难确定我的 urls.py 文件对于这种应用程序应该是什么样子。

以下是我目前的 urls.py 文件。欢迎对我的问题提供任何帮助。多谢你们。

```
from django.conf.urls import patterns, include
from music.views import home, music, artists, artist_name,  artist_album_title

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    (r'^admin/', include(admin.site.urls)),
    (r'^$', home),
    (r'^music/$', music),
    (r'^music/artists/$', artists),
    (r'^music/artists/([\w\W]+)/$', artist_name),
    (r'^music/artists/([\w\W]+)/([\w\W]+)/$', artist_album_title),
) 
```

**来自views.py 的artist_album_title 函数**

```
def artist_album_title(request, album_title):
    album_tracks = Track.objects.filter(album__title=album_title)
    return render_to_response('artist_album_title.html', locals(), context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:38:20.057

您的 urlpatterns 的问题在于 url /music/artists/Weezer/The%20Blue%20Album 满足第一个模式，因此它不会转到下一个模式。这是因为 Django 按照指定的顺序执行模式。

为了使它起作用，您必须像这样切换两种模式的位置：

```
urlpatterns = patterns('',
    (r'^admin/', include(admin.site.urls)),
    (r'^$', home),
    (r'^music/$', music),
    (r'^music/artists/$', artists),
    (r'^music/artists/([\w\W]+)/([\w\W]+)/$', artist_album_title),
    (r'^music/artists/([\w\W]+)/$', artist_name),

) 
```

最好的做法是为您的网址使用以下结构：

```
urlpatterns = patterns('',
    (r'^admin/', include(admin.site.urls)),
    (r'^$', home),
    (r'^music/$', music),
    (r'^music/artists/$', artists),
    (r'^music/artists/(?P<artist_name>[\w\W]+)/(?P<album_title>[\w\W]+)/$', artist_album_title),
    (r'^music/artists/(?P<artist_name>[\w\W]+)/$', artist_name),

) 
```

然后您的视图定义将如下所示：

```
def artist_album_title(request, artist_name,album_title): 
```

和

```
def artist_name(request, artist_name): 
```

[您可以在此处https://docs.djangoproject.com/en/dev/topics/http/urls/#named-groups](https://docs.djangoproject.com/en/dev/topics/http/urls/#named-groups)在 Django 文档中的 url 中阅读有关命名组的更多信息******

# javascript - Ember.js：将参数从父视图传递到嵌套子视图

> ID：14938251
> 
> 赞同：2
> 
> 时间：2013-02-18T14:09:54.550
> 
> 标签：javascript, ember.js

我正在尝试创建一个简单的嵌套视图。“子”视图是 Ember.Select。“选择”参数需要来自父级，我无法让它工作。如何做到这一点？

```
<script type="text/x-handlebars" data-template-name="application">
    {{view App.SelectView contentBindingForSelect="App.names"}}
</script>

<script type="text/x-handlebars" data-template-name="select-view">
    <h1>In SelectView</h1>
    {{view view.childSelectView contentBinding="view.contentBindingForSelect"}}
</script>

window.App = Ember.Application.create();

App.names = ["Yehuda", "Tom"];

App.ApplicationView = Ember.View.extend({
    templateName: 'application',
});

App.SelectView = Ember.View.extend({
    templateName: 'select-view',  
    childSelectView: Ember.Select
}); 
```

JSFiddle 示例：http: [//jsfiddle.net/kRwcU/1/](http://jsfiddle.net/kRwcU/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:11:00.813

我发现了问题......我错过了 Ember 中“约定”的这一部分：“contentBindingForSelect”作为名称不起作用。“Binding”一词需要保留在末尾，例如：“contentForSelectBinding”。我已经更正了 JSFiddle。它现在工作正常。

[http://jsfiddle.net/kRwcU/4/](http://jsfiddle.net/kRwcU/4/)

```
<script type="text/x-handlebars" data-template-name="application">
    <h1>Hello from Ember.js</h1>
    {{view App.SelectView contentForSelectBinding="App.names"}}
</script>

<script type="text/x-handlebars" data-template-name="select-view">
    <h1>In SelectView</h1>
    {{view view.childSelectView contentBinding="view.contentForSelect"}}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:51:57.817

我刚刚开始在 ember.js 中使用，但是如果您检查当前为空的 select 元素，您会看到 ember 实际上已在 select 标记内呈现了您的视图 html。这显然是垃圾 html，因此无法正确呈现。

我怀疑正确的答案是您不想以这种方式扩展 ember.select 来实现所需的功能。

# java - 获取昨天 - 不推荐使用 Date 类型的方法 getDate()

> ID：14938253
> 
> 赞同：8
> 
> 时间：2013-02-18T14:09:58.780
> 
> 标签：java, date

我试图得到昨天的日期。所以我写下一个函数：

```
public  String getYestrday() {
    DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    Date date = new Date();
    return dateFormat.format(date.getDate() - 1);
} 
```

但它给了我下一个警告：

```
The method getDate() from the type Date is deprecated 
```

它不起作用。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T14:12:02.807

[**Date#getDate()**](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)是 JDK 1.1 之后不推荐使用的方法。您应该使用[**Calendar**](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)类来操作日期。

从[**API**](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)：

> 在 JDK 1.1 之前，Date 类有两个附加功能。它允许将日期解释为年、月、日、小时、分钟和秒值。它还允许格式化和解析日期字符串。不幸的是，这些函数的 API 不适合国际化。从 JDK 1.1 开始，应使用 Calendar 类在日期和时间字段之间进行转换，并且应使用 DateFormat 类来格式化和解析日期字符串。Date 中的相应方法已弃用。

它也清楚地记录在 API 中使用[**Date#getDate()**](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)使用`Calendar#get(Calendar.DATE);`

> 已弃用。从 JDK 版本 1.1 开始，由 Calendar.get(Calendar.DAY_OF_MONTH) 取代

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, -1);
return dateFormat.format(cal.getTime()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T20:18:59.637

# 避免使用 java.util.Date & .Calendar

接受的[答案](https://stackoverflow.com/a/14938297/642706)是正确的。然而，java.util.Date 和 .Calendar 类是出了名的麻烦。避开他们。使用[Joda-Time](http://www.joda.org/joda-time/)或新的[java.time 包](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)（在 Java 8 中）。

# 将日期时间操作与格式化分开

此外，问题中的代码将日期时间工作与格式混合在一起。将这些任务分开，使您的代码更清晰，测试/调试更容易。

# 时区

时区在日期时间工作中至关重要。如果您忽略此问题，将应用 JVM 的默认时区。更好的做法是始终指定而不是依赖默认值。即使您想要默认值，也要显式调用[`getDefault`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeZone.html#getDefault%28%29).

一天的开始由时区定义。巴黎的新一天比蒙特利尔更早。因此，如果“昨天”是指当天的第一刻，那么您应该 (a) 指定时区，并且 (b) 调用[`withTimeAtStartOfDay`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html#withTimeAtStartOfDay%28%29).

# 乔达时间

Joda-Time 2.3 中的示例代码。

```
DateTimeZone timeZone = DateTimeZone.forID( "Europe/Paris" );
DateTime today = DateTime.now( timeZone ); 
```

或者从 java.util.Date 对象转换。

```
DateTime today = new DateTime( myJUDate, timeZone ); 
```

减去一天以得到昨天（或前一天）。

```
DateTime yesterday = today.minusDays( 1 );
DateTime yesterdayStartOfDay = today.minusDays( 1 ).withTimeAtStartOfDay(); 
```

默认情况下，Joda-Time 和 java.time 解析/生成[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式的字符串。

```
String output = yesterdayStartOfDay.toString(); // Uses ISO 8601 format by default. 
```

使用格式化程序将完整日期设置为四位数年份、两位数月份和两位数月份日期 (yyyy-MM-dd)。Joda-Time 中已经定义了这样的格式化程序。

```
String outputDatePortion = ISODateFormat.date().print( yesterdayStartOfDay ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:10:47.587

用来`java.util.Calendar`做。或者试试[乔达](http://joda-time.sourceforge.net/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:20:38.167

您可以使用[Calendar](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)类来执行相同的任务：

```
Calendar c = new Calendar();
//c.add(Calendar.DAY_OF_MONTH, -1);
Date d = c.getTime(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-16T14:06:52.493

以下对我有用

```
int date = Calendar.getInstance().get(Calendar.DAY_OF_MONTH); 
```

# c++ - C++11有没有办法静态测试方法访问级别？

> ID：14938256
> 
> 赞同：0
> 
> 时间：2013-02-18T14:10:12.737
> 
> 标签：c++, unit-testing, c++11, static-assert

C++11 添加了许多新的类模板，允许静态测试类型特征，即在编译时检测问题。我正在为一个类编写一个测试，我需要确保给定的方法是公开的。

“动态”解决方案是创建一个对象并调用该方法，如果它不起作用，编译器会抱怨。但是可能会发生不同类型的错误，这会使生成的错误消息更加混乱。如果可能，最好使用静态断言测试方法访问级别。

有可能还是我真的必须为此创建一个对象？

（另外，如果我需要该方法是私有/受保护的，我该怎么办）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:31:31.437

这为我编译：

```
#include <type_traits>

namespace has_foo_imp
{

template <class T>
auto
test(T&& t) -> decltype(t.foo(), std::true_type());

auto
test(...) -> std::false_type;

}  // has_foo_imp

template <class T>
struct has_foo
    : public std::integral_constant<bool,
                        decltype(has_foo_imp::test(std::declval<T>()))::value>
{
};

class A
{
    void foo();
public:
};

class B
{
public:
    void foo();
};

int
main()
{
    static_assert(!has_foo<A>::value, "");
    static_assert( has_foo<B>::value, "");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T16:06:54.490

据我所知，以下是[符合标准](https://stackoverflow.com/questions/8984013/can-sfinae-detect-private-access-violations)的：

```
#include <type_traits>

template<typename T,typename=void>
struct NullaryFooCanBeCalled:std::false_type {};

template<typename T>
struct NullaryFooCanBeCalled<
      T,
      typename std::enable_if<
         std::is_same<
               decltype(std::declval<T>().Foo()),
               decltype(std::declval<T>().Foo())
         >::value >::type
      >:
   std::true_type {};

struct PrivateFoo {private:void Foo() {}};
struct PublicFoo {public:void Foo() {}};
struct ProtectedFoo {protected:void Foo() {}};
struct StrangeFoo {
   struct Bar { void operator()() {}; };
   Bar Foo;
};

#include <iostream>

int main() {
   std::cout << "PrivateFoo:" << NullaryFooCanBeCalled<PrivateFoo>::value << "\n";
   std::cout << "PublicFoo:" << NullaryFooCanBeCalled<PublicFoo>::value << "\n";
   std::cout << "ProtectedFoo:" << NullaryFooCanBeCalled<ProtectedFoo>::value << "\n";
   std::cout << "StrangeFoo:" << NullaryFooCanBeCalled<StrangeFoo>::value << "\n";
} 
```

另一方面，编译器对这种语言怪癖的支持很差。

[Clang 3.2](http://liveworkspace.org/code/17V6bx$7)编译并工作。 [gcc 4.7.2](http://liveworkspace.org/code/17V6bx$8)无法构建。 [英特尔 13.0.1](http://liveworkspace.org/code/17V6bx$9)编译但返回错误值（在每种情况下都为真！）

# ruby - Facebook 使用用户对用户的请求测试用户

> ID：14938258
> 
> 赞同：5
> 
> 时间：2013-02-18T14:10:16.367
> 
> 标签：ruby, facebook, facebook-graph-api, koala

我上周问了这个问题，但只有 8 次浏览。

我正在处理的应用程序的一部分需要创建大量的用户对用户请求并验证它们都在应用程序中得到正确处理。这需要无数小时的 QA 工作，并且可以使用简单的脚本来自动化，例如

```
users_api = Koala::Facebook::TestUsers.new(config)

users = test_users.create_network(10, true, "email,user_likes,publish_actions")

users.permutations(2) do |u1, u2|
  graph = Koala::Facebook::API.new(u1['access_token'])

  requests_types.each do |req|
    graph # .user_to_user_request(u2, req) Oh noes I can't do this part
  end
end 
```

我所看到的一切都表明不可能在脚本中创建用户对用户的请求，即使对于测试用户也是如此。有没有其他（自动）方法可以做到这一点？

### 编辑

我试图找到的是一种创建用户对用户请求的方法。验证仍将由 QA 团队手动进行。我们面临的问题是他们需要创建 90 个请求并确保他们没有跳过一个请求，然后验证数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:03:23.907

解决这个问题很棘手。您可能有两种解决方案，具体取决于您的需要。

第一个是手动为测试提供访问令牌。这将需要创建几个虚构用户或通过[Api Explorer](https://developers.facebook.com/tools/explorer/)从朋友那里收集访问令牌。这当然非常不方便，但可能需要第二个想法，所以我提到它。问题是您需要测试多少用户？在大多数情况下，3-4 个用户应该足以提供测试用例。

第二个想法需要使用第一个想法实际运行测试套件，并使用像[webmock](https://github.com/bblimke/webmock)或[fakeweb](https://github.com/chrisk/fakeweb)这样的 gem 记录结果。这将允许您记住将提供什么 API 响应并在以后的测试中使用它，而无需重新生成令牌。这也应该会显着加快您的测试，因为这将避免等待来自 FB API 的每个请求。

# javascript - 图片连接时间javascript

> ID：14938260
> 
> 赞同：2
> 
> 时间：2013-02-18T14:10:21.853
> 
> 标签：javascript, image, time, connection, loading

我玩了一堆从 javascript 中加载的图像，如下所示：

```
albumArray[16][214] = new Image();
albumArray[16][214].src = 'dalb214.png'; 
```

我正在用更大的精灵图像替换这些以降低 http 请求，但我在玩耍时注意到的一件事是，在 javascript 中加载的图像的连接时间比在 chrome 开发工具中用 html 加载的图像的连接时间长得多.

正常图片连接时间：1-3ms javascript图片：300-350ms

这对我来说似乎很奇怪，以至于我想知道我是否做错了什么。

是什么导致我的 javascript 图像连接时间过长，我可以做些什么来加快它的速度？

# magento - 在 magento 主页上显示所有产品时出现问题

> ID：14938267
> 
> 赞同：1
> 
> 时间：2013-02-18T14:10:35.170
> 
> 标签：magento, view, product

我在我的 magento 主页上显示所有产品时遇到问题。我已将此代码添加到我的 CMS - 页面 - 设计中：

{{block type="catalog/product_list" name="home.catalog.product.list" alias="products_homepage" template="catalog/product/list.phtml"}}

但没有运气。我已经尝试重新索引我的产品并且我已经刷新了缓存。一直在这几个小时寻找答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:54:25.050

将您的根类别 ID 添加到阻止，因此它看起来像： {{block type="catalog/product_list" **category="2"** name="home.catalog.product.list" alias="products_homepage" template="catalog/ product/list.phtml"}} 然后将此类别属性“Is Anchor”更改为 Yes。

# sql-server - 获取实体框架更新后修改对象的列表

> ID：14938268
> 
> 赞同：0
> 
> 时间：2013-02-18T14:10:39.070
> 
> 标签：sql-server, entity-framework

所以我试图防止应用程序之间的竞争条件。

使用 IsolationLevel/TransactionScope，我可以按我需要的方式锁定表，但需要先运行更新操作，然后对修改的对象列表进行操作。

为此，我需要运行更新并一次性获取更新的 ID 列表。

如果我先尝试获取 ID，则不会锁定表，并且另一个应用程序实例可以在它们被标记之前查询相同的列表。

有没有办法做类似的事情：

```
//modify some objects    
var updatedIds = context.SaveChanges();
//Process updatedIds 
```

有没有办法做到这一点？我试过查看 ObjectContext 条目，但在 Save 之后似乎什么都没有。

也许我必须做一个sproc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:15:11.663

这段代码可以进入你的 Context 类，应该给你你需要的东西

```
public override int SaveChanges()
{
    using (var scope = new System.Transactions.TransactionScope())
    {
        //pre processing
        var result = base.SaveChanges();
        //post processing
        scope.Complete();
        return result;
    }
} 
```

# android - Android 警报对话框帮助自定义 API >=8

> ID：14938274
> 
> 赞同：-1
> 
> 时间：2013-02-18T14:10:56.513
> 
> 标签：android, api, android-alertdialog

Hiee 伙计们，我需要让我的 alertDialog 看起来像这样：

对于 API >=8。

请让我知道如何去做。是否可以为所有 android 版本创建这个>=8

![在此处输入图像描述](../Images/8a3f7ac093d39e03b38531b2768f47d9.png) 任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:22:48.570

如果您的意思是要自定义可以使用的主题 `AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder( new ContextThemeWrapper(activity,R.style.CustomAlertDialogTheme));`

“activity”是对您的活动的引用，“CustomAlertDialogTheme”是一个自定义主题，您可以在其中设置颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:36:45.863

以下是如何使用`Dialog`.

```
Dialog dialog = new Dialog(FingerPaintActivity.this, android.R.style.Theme_Light_Panel);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE); // no title 
dialog.getWindow().getAttributes().windowAnimations = R.style.PauseDialogAnimation; // this is used for custom animation when dialog is showing and hiding 
dialog.setContentView(getLayoutInflater().inflate(R.layout.myCustomLayout, null)); // here is your custom layout
dialog.getWindow().setLayout(width-50, (height-100)); // set height / width
dialog.show(); 
```

您必须添加的布局是`R.layout.myCustomLayout`，之后您可以在该布局中声明您的视图，如下所示（例如一个按钮）：

```
Button myOkBtn = (Button) dialog.findViewById(R.id.myOkBtn);
myOkBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

        }
}); 
```

就这样。

**PS**如您所见，我在对话框打开和关闭以及宽度和高度时添加了一些额外的内容，例如自定义动画。

# r - 在ggplot2中绘制时间序列

> ID：14938278
> 
> 赞同：1
> 
> 时间：2013-02-18T14:11:04.777
> 
> 标签：r, ggplot2

我正在处理时间序列。我的真实数据的前 20 行如下所示。我希望：

一种。将我的 ggplot 图子集到特定的时间范围（例如，仅显示 07:46:40 和 07:49:00 之间的值）。

湾。我还希望更改 x 轴上刻度线的频率。使用示例详细的 bwlow 我希望只在轴上显示整分钟（但是对于我的正确图表，我希望只显示每小时值）。

任何关于上述内容的建议将不胜感激。

```
day3 <- structure(list(Date = c("11/12/2012", "11/12/2012", "11/12/2012", 
                            "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", 
                            "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", 
                            "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", "11/12/2012", 
                            "11/12/2012", "11/12/2012"), Time = c("07:46:10", "07:46:20", 
                                                                  "07:46:30", "07:46:40", "07:46:50", "07:47:00", "07:47:10", "07:47:20", 
                                                                  "07:47:30", "07:47:40", "07:47:50", "07:48:00", "07:48:10", "07:48:20", 
                                                                  "07:48:30", "07:48:40", "07:48:50", "07:49:00", "07:49:10", "07:49:20"
                            ), Axis1 = c(59L, 651L, 59L, 0L, 22L, 50L, 0L, 0L, 114L, 899L, 
                                         129L, 33L, 21L, 9L, 224L, 135L, 266L, 16L, 59L, 126L), Steps = c(1L, 
                                                                                                          2L, 1L, 0L, 2L, 1L, 0L, 0L, 5L, 15L, 6L, 2L, 2L, 0L, 8L, 5L, 
                                                                                                          16L, 1L, 3L, 8L)), .Names = c("Date", "Time", "Axis1", "Steps"
                                                                                                          ), row.names = 52838:52857, class = "data.frame")
#Creates a new dataframe with a time column.
day3 <- within(day3,{
  posb <- as.POSIXlt(Time,format="%H:%M:%S")
  posb <- NULL  # cleanup
})

library(ggplot2)
g = ggplot(day3, aes(x=strptime(Time, "%H:%M:%S"), y=Axis1)) + geom_line(aes(group = 1)) +
  theme_bw() +
  xlab("Time") + 
  ylab("Activity (Counts per 10 seconds)") + 
  scale_x_datetime(limits=c(as.POSIXct("07:47:50"),as.POSIXct("07:49:10")))

g 
```

**编辑**

如果我想在我的图表上添加一个文本框，我如何使用时间列？到目前为止，我得到了：

```
geom_text(aes(05:00,0),label="Sedentary") 
```

...但这目前不想工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:18:41.440

这是你想要的 ？

```
library(scales)
ggplot(day3, aes(x=strptime(Time, "%H:%M:%S"), y=Axis1)) + geom_line(aes(group = 1)) +
  theme_bw() +
  xlab("Time") + 
  ylab("Activity (Counts per 10 seconds)") +
  scale_x_datetime(limits=c(as.POSIXct("07:46:40",format="%H:%M:%S"),as.POSIXct("07:49:00",format="%H:%M:%S")),
                   breaks=date_breaks("1 min"), labels = date_format("%H:%M")) 
```

![在此处输入图像描述](../Images/833ad188e64bfc72f6d21b569f7ed3d6.png)

# java - 关闭后 JavaFX 应用程序仍在运行

> ID：14938279
> 
> 赞同：20
> 
> 时间：2013-02-18T14:11:05.977
> 
> 标签：java, javafx-2, javafx

我在关闭我的 javaFX 应用程序时遇到问题，当我从我的舞台上单击关闭按钮时，我的应用程序会消失，但是如果我在任务管理器中查找它，我的应用程序仍然存在而没有关闭。我尝试使用下面的代码强制它关闭主线程和所有子线程，但问题仍然存在。

```
primaryStage.setOnCloseRequest(new EventHandler<WindowEvent>() {

            @Override
            public void handle(WindowEvent t) {
                Platform.exit();
            }

        }); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-18T15:11:33.487

您的应用程序是否产生任何子线程？如果是这样，您是否确保终止它们（假设它们不是守护线程）？

如果您的应用程序产生非守护线程，那么它们（以及您的应用程序）将继续存在，直到您终止该进程

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-18T18:13:01.260

唯一的方法是调用 System.exit(0);

```
primaryStage.setOnCloseRequest(new EventHandler<WindowEvent>() {
            @Override
            public void handle(WindowEvent t) {
                Platform.exit();
                System.exit(0);
            }
        }); 
```

**[编辑]**

System.exit 只会隐藏您的应用程序，如果您打开 SO 的管理器任务，您的应用程序将在那里。正确的方法是在关闭应用程序之前一一检查您的线程并关闭所有线程。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-04-06T12:49:48.410

[先看这里](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html)

```
 public void start(Stage stage) {
        Platform.setImplicitExit(true);
        stage.setOnCloseRequest((ae) -> {
            Platform.exit();
            System.exit(0);
        });
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-10T19:54:26.597

我能够通过调用来解决这个问题`com.sun.javafx.application.tkExit()`。您可以在此处阅读我的其他答案中的更多信息：[https](https://stackoverflow.com/a/22997736/1768232) ://stackoverflow.com/a/22997736/1768232 （这两个问题确实是重复的）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-11-08T22:28:08.660

我目前在控制器中使用 ThreadExecutor 时遇到了这个问题。如果 ThreadExecutor 没有关闭，应用程序不会退出。请参阅此处： [如何关闭所有执行程序时退出应用程序](https://stackoverflow.com/questions/1211657/how-to-shut-down-all-executors-when-quitting-an-application)

由于在控制器中识别应用程序出口可能会出现问题，因此您可以从 Application 类中获取对控制器的引用，如下所示（使用 Eclipse 中的示例应用程序）：

```
public class Main extends Application {
private SampleController controller;

@Override
public void start(Stage primaryStage) {
    try {
        FXMLLoader loader = new FXMLLoader(getClass().getResource("MyFXML.fxml"));

        BorderPane root = (BorderPane)loader.load(getClass().getResource("Sample.fxml").openStream());

        Scene scene = new Scene(root,400,400);
        scene.getStylesheets().add(getClass().getResource("application.css").toExternalForm());
        primaryStage.setScene(scene);
        primaryStage.show();
        controller = loader.<SampleController>getController();          
    } 
    catch(Exception e) 
    {
        e.printStackTrace();
    }
} 
```

您的应用程序覆盖了 stop 方法，您可以在其中调用控制器的内务管理方法（我使用名为 startHousekeeping 的方法）：

```
/**
 * This method is called when the application should stop, 
 * and provides a convenient place to prepare for application exit and destroy resources. 
 */
@Override
public void stop() throws Exception 
{
    super.stop();
    if(controller != null)
    {
        controller.startHousekeeping(); 
    }

    Platform.exit();
    System.exit(0);
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-22T12:51:40.847

请注意：尝试检查您是否使用

```
Platform.setImplicitExit(false); 
```

有一个类似的问题并且溢出了我的任务。上面的行不会使舞台关闭，它会隐藏它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-12T07:38:47.603

要模仿按“x”，可以这样做：

```
stage.fireEvent(new WindowEvent(stage, WindowEvent.WINDOW_CLOSE_REQUEST)) 
```

# c# - 将控制器 json 结果传递给查看

> ID：14938280
> 
> 赞同：1
> 
> 时间：2013-02-18T14:11:05.780
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-4, kendo-ui

我需要简单地传递在控制器中创建的 json 数据来查看我的代码如下：

我的模型：**Machines.cs** 在我的模型中，我将日期作为字符串并将它们解析为日期时间。当我在那里打断点时，解析操作成功，我看到了结果。

```
 public class Machines
{
    [Key]
    public int AutoKey;
    public string MachineGroup;
    public DateTime StartDate;
    public DateTime EndDate;
    public int Duration;
    public List<Machines> SqlAccessParameter(string startDate,string endDate)
    {
        DateTime sDate = DateTime.Parse(startDate);
        DateTime eDate = DateTime.Parse(endDate);
        string connstr = "Data Source=USER-BILGISAYAR;Initial Catalog=Report;Integrated Security=True";
        SqlConnection myConnection = new SqlConnection(connstr);
        myConnection.Open();
        SqlCommand myCommand = new SqlCommand("DateRange", myConnection);
        myCommand.CommandType = CommandType.StoredProcedure;
        myCommand.Parameters.Add("@SP_startDate", SqlDbType.DateTime).Value = sDate;
        myCommand.Parameters.Add("@SP_endDate", SqlDbType.DateTime).Value = eDate;

        SqlDataAdapter dataAdapter = new SqlDataAdapter();
        myCommand.ExecuteNonQuery();
        dataAdapter.SelectCommand = myCommand;

        DataSet dSet = new DataSet();
        dataAdapter.Fill(dSet);

        myConnection.Close();

        List<Machines> machinePost = new List<Machines>();
        foreach (DataRow row in dSet.Tables[0].Rows)
        {
            Machines mac = new Machines();
            mac.AutoKey = (int)row["AUTOKEY"];
            mac.MachineGroup = (string)row["MACHINEGROUP"];
            mac.Duration = (int)row["DURATION"];
            mac.StartDate = (DateTime)row["STARTTIME"];
            mac.EndDate = (DateTime)row["ENDTIME"];
            machinePost.Add(mac);
        }
        return machinePost;
    }
} 
```

}

我的控制器：**MachinesController.cs**

```
 public ActionResult MachineParameter()
       {
        Machines model = new Machines();
        return View("Index",model);
       } 
```

我的观点：索引在我看来，我尝试根据用户指定日期范围内的数据绘制图表，但没有成功。

```
@model DenemeReport.Models.Machines
@{
    ViewBag.Title = "Index";
 }

 <head>
<title>Intro</title>

<script src="~/Scripts/jquery-1.8.3.min.js"></script>
<script src="~/Scripts/kendo/kendo.all.min.js"></script>
<link href="~/Scripts/kendo/kendo.common.min.css" rel="stylesheet" />
<link href="~/Scripts/kendo/kendo.default.min.css" rel="stylesheet" />

 </head>
   <div>

   Start Date:  <input type="text" id="start" name="start" />

   End Date: <input type="text" id="end" name="end" />

   </div>
   <input type="button" value="OK" onclick="CallAjaxFunction()" />

 <body>
<div id="chart"></div>
<script>

    function CallAjaxFunction() {

        var sDate = document.getElementById('start').value;
        var eDate = document.getElementById('end').value;

        $.ajax
             ({
                 url: "@Url.Action("MachineParameter","Machines")",
                 data: { startDate: sDate, endDate: eDate },
                 type: "POST",
                 success: function () {
                     alert(sDate);
                     $("#chart").kendoChart
                 ({
                     theme: $(document).data("kendoSkin") || "default",
                     title: {
                         text: "Pie Chart Test"
                     },
                     legend: {
                         position: "bottom",
                     },

                     dataSource:
                         {
                             transport:
                                 {
                                     read:
                                             {
                                                 url: "@Url.Action("MachineParameter", "Machines")",
                                                 dataType: "json",
                                                 contentType: 'application/json; charset=utf-8'
                                             }
                                 }
                         },

                     seriesDefaults: {
                         labels: {
                             visible: true,
                             format: "{0}"
                         }
                     },

                     series: [{
                         type: "pie",
                         field: "Duration",
                         categoryField: "MachineGroup"
                     }],

                     tooltip: {
                         visible: true,
                         format: "{0}"
                     }
                 });
                 }

             });
    }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:21:41.517

`Parameter`您可以通过您的模型访问它或向控制器中的操作发出 AJAX 请求。我重写了您的参数操作以返回视图并使用 MachinesSql 作为模型：

```
public ActionResult Parameter()
{
   MachinesSql model = new MachinesSql();

   return View("YourViewName", model);
} 
```

那么在您看来，您可以这样做：

```
@Model MachinesSql

foreach(var m in @Model.SqlAccessParameter(startDate, endDate)) {
    @Html.DisplayFor(m=>m.DataValue);
} 
```

**编辑：展示如何通过 AJAX 调用实现**

```
function CallAjaxFunction() {
     var sDate = document.getElementById('start');
     var eDate = document.getElementById('end');

     $.ajax{({
         url: '@Url.Action("Parameter")',
         data: { startDate: sDate, endDate: eDate },
         type: "POST",
         success: function(content) { 
            alert(content);
         }
     }); 
} 
```

# java - java.lang.OutOfMemoryError：Java 堆空间运行小程序

> ID：14938281
> 
> 赞同：2
> 
> 时间：2013-02-18T14:11:06.627
> 
> 标签：java

我正在使用 NetBeans IDE 7.0.1 开发图形用户界面。我需要使用长字符串（大约 1 GB）进行操作，并且我已将启动配置参数更改为：

```
-J-Xss512M
-J-Xms4G
-J-Xmx12G
-J-XX:PermSize=4G
-J-XX:MaxPermSize=8G 
```

当我执行小程序时，我收到“ `java.lang.OutOfMemoryError: Java heap space`”异常。我已经检查了异常的点，此时，小程序试图连接两个字符串，其中一个长度为 550.000.000，另一个为 68.000.000 如果我更改上面的参数，它不会改变小程序上的任何内容例外。我的电脑有 16 GB RAM，所以我认为这不是问题。也许一些小程序配置？你能帮助我吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:18:20.100

你在什么操作系统上运行？如果它是 32 位的，您将无法处理超过 4G 的 RAM（实际上更少，尤其是在 Windows 机器上）。

***我认为***这里的第二点是您要更改的配置是针对 NetBeans 的，而不是针对小程序的。如果是这样（我不确定这在 NetBeans 中是如何工作的），那么您需要更改 Applet 本身的内存设置，而不是 NetBeans。

这通常通过您尝试运行的应用程序/小程序等的运行配置设置来完成。

希望这可以帮助！

# php - 解析 HTML 文本内容时保留标签

> ID：14938286
> 
> 赞同：1
> 
> 时间：2013-02-18T14:11:28.900
> 
> 标签：php, dom, xpath, html-parsing

我有一个小问题。
我想用 PHP 解析一个简单的 HTML 文档。这是简单的 HTML：

```
<html>
       <body>
             <table>
                     <tr>
                          <td>Colombo <br> Coucou</td> 
                          <td>30</td>
                          <td>Sunny</td> 
                     </tr>
                     <tr>
                          <td>Hambantota</td> 
                          <td>33</td>
                          <td>Sunny</td> 
                     </tr>

             </table>    
       </body>
 </html> 
```

这是我的 PHP 代码：

```
$dom = new DOMDocument();

$html = $dom->loadHTMLFile("test.html");

$dom->preserveWhiteSpace = false; 

$tables = $dom->getElementsByTagName('table'); 

$rows = $tables->item(0)->getElementsByTagName('tr'); 

foreach ($rows as $row) 
{ 

  $cols = $row->getElementsByTagName('td'); 

  echo $cols->item(0)->nodeValue.'<br />'; 
  echo $cols->item(1)->nodeValue.'<br />'; 
  echo $cols->item(2)->nodeValue;
} 
```

但是正如你所看到的，我有一个`<br>`标签并且我需要它，但是当我的 PHP 代码运行时，它会删除这个标签。
谁能解释我如何保持它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:55:48.977

我建议您在 XPath 的帮助下捕获表格单元格的值：

```
$values = array();

$xpath = new DOMXPath($dom);

foreach($xpath->query('//tr') as $row) {
   $row_values = array();

   foreach($xpath->query('td', $row) as $cell) {
      $row_values[] = innerHTML($cell);
   }

   $values[] = $row_values;
} 
```

此外，我也遇到了与您相同的问题，`<br>`因为它们本身被视为空节点，因此标签被从获取的内容中剥离；不幸的是，它们不会自动替换为换行符 ( `\n`)；

所以我所做的是设计了我自己的 innerHTML 函数，该函数已在许多项目中证明是无价的。在这里和大家分享一下：

```
function innerHTML(DOMElement $element, $trim = true, $decode = true) {
   $innerHTML = '';

   foreach ($element->childNodes as $node) {
      $temp_container = new DOMDocument();
      $temp_container->appendChild($temp_container->importNode($node, true));

      $innerHTML .= ($trim ? trim($temp_container->saveHTML()) : $temp_container->saveHTML());
   }

   return ($decode ? html_entity_decode($innerHTML) : $innerHTML);
} 
```

# php - TinyMCE Editor - 如何集成自定义滚动条

> ID：14938288
> 
> 赞同：2
> 
> 时间：2013-02-18T14:11:31.800
> 
> 标签：php, javascript, jquery, tinymce

我需要将自定义滚动条集成到 TinyMCE 编辑器。请指导我如何集成它。

网址： http: [//manos.malihu.gr/tuts/jquery_custom_scrollbar.html](http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:52:37.543

您摆脱了默认的 scollbar，您可以将此 css 应用于编辑器 iframe（您可能需要更精确，否则您也可以从其他 iframe 中删除滚动条）

```
iframe {
    overflow:hidden;
} 
```

这是将 css 文件放入 tinymce 编辑器 iframe 头的必要代码

```
var ed = tinymce.get('your_editor_id');
ed.dom.loadCSS( 'url_to_css_file'); 
```

# jquery - 如何避免在引导模式中刷新页面？

> ID：14938290
> 
> 赞同：16
> 
> 时间：2013-02-18T14:11:35.060
> 
> 标签：jquery, ajax, codeigniter, twitter-bootstrap

这是我在 twitter bootstrap 中的模态代码：

```
<div class="modal-body">
<form class="form-horizontal" method="POST" name="loginForm" id="loginForm">
<div class="control-group">
<label class="control-label" for="inputEmail">Email</label>
<div class="controls">
  <div class="input-prepend">
    <span class="add-on"><i class="icon-envelope"></i></span>
    <input class="span2" id="inputIcon" type="text" name="email"/>
  </div>
</div>
</div>
<div class="control-group">
<label class="control-label" for="inputPassword">Password</label>
<div class="controls">
  <div class="input-prepend">
    <span class="add-on"><i class="icon-lock"></i></span>
    <input class="span2" id="password" type="password" name="password"/>
  </div>
</div>
</div>
<div class="control-group">
<div class="controls">
<label class="checkbox">
<input type="checkbox"> Remember me
</label>
</form>
<button type="submit" class="btn" id="signin_button">Sign in</button>
</div>
</div> 
```

每当我按下登录按钮时，它都会重新加载页面。单击按钮后如何禁用刷新页面？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-18T14:15:14.727

您可以阻止提交页面的按钮的默认行为。

这是 Mozilla 开发者网络关于“preventDefault”的链接：[event.preventDefault](https://developer.mozilla.org/en/docs/Web/API/Event/preventDefault)

在 jQuery 中，您可以这样做：

```
$("#signin_button").on("click", function(e) {
    e.preventDefault();

    // the rest of your code ...
}); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-18T14:26:50.867

尝试将输入 type="submit" 更改为

```
<button class="btn" id="signin_button">Sign in</button> 
```

或者

```
<input type="button" class="btn" id="signin_button" value="Sign in"/> 
```

如果您的目标不是提交表格。

也可能有用：[<input type='button' /> 和 <input type='submit' /> 之间的区别](https://stackoverflow.com/questions/290215/difference-between-input-type-button-and-input-type-submit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-12T16:15:10.450

您也可以使用 click ：

```
$("#signin_button").click(function (e) {
  e.preventDefault();
  // code
} 
```

# javascript - 页面加载后没有自动播放（Twitter 引导轮播）

> ID：14938293
> 
> 赞同：1
> 
> 时间：2013-02-18T14:11:51.043
> 
> 标签：javascript, jquery, twitter-bootstrap

我的滑块在页面加载后没有自动播放。如果我右键单击，则自动播放已打开。怎么了？

```
$('#myCarousel').on('slid', '', function() {
    var $this = $(this);

    $this.children('.carousel-control').show();
    if($('.carousel-inner .item:first').hasClass('active')) {
      $this.children('.left.carousel-control').hide();
    } 
    else if($('.carousel-inner .item:last').hasClass('active')) {
      $this.children('.right.carousel-control').hide();
  }

}).trigger('slid'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:25:37.773

将间隔设置为最低

```
 // invoke the carousel
   $('#myCarousel').carousel({
     interval: 2000
    }); 
```

# mysql - mysql对包含char和数值的varchar字段进行排序

> ID：14938294
> 
> 赞同：0
> 
> 时间：2013-02-18T14:11:57.747
> 
> 标签：mysql, sorting, varchar

我在 SQL 中有以下数据：

```
name       ID  
 A[0]       1  
 A[1]       1  
 A[2]       1  
 AA[0]      2  
 AA[15]     2   
 AA[27]     2 
```

我想对这些数据进行排序，首先按 ID，然后按名称。按 ID 排序很容易，因为它是一个 int，问题在于名称 - 当我尝试以数字方式排序时，我得到了奇怪的值，例如 a[7],a[27],a[3]。当按字母排序时，我得到了您所期望的 a[10],a[11]...a[19],a[2] 等
我认为这是因为该字段是 varchar 并且具有数字和文本部分. 有没有办法对此进行排序？将其拆分为子字符串似乎是一个糟糕的选择，因为每个部分（文本和数字）的长度不是恒定的。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:17:16.693

根据您的要求，您可以考虑将列拆分为两部分（即 A[20] 将变为 A 和 20 ）并按生成的拆分值的组合进行排序。

因此，您的查询将看起来像按 id、名称第一部分（通过拆分或获取子字符串获得）、to_number（名称第二部分）排序

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-18T14:14:16.967

好的，您可能想要创建一个像这样使用的函数，或者在名称字段上使用子字符串

```
CREATE FUNCTION SPLIT_STR(
  x VARCHAR(255),
  delim VARCHAR(12),
  pos INT
)
RETURNS VARCHAR(255)
RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(x, delim, pos),
       LENGTH(SUBSTRING_INDEX(x, delim, pos -1)) + 1),
       delim, ''); 
```

见参考 - [http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/](http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/)

但还应该注意的是，如果您发现自己必须拆分列，这将在将来给您带来查询性能问题，因为底层数据库设计存在缺陷。我将使用 split 函数重新创建该表并将其分成两列。在继续之前，您应该阅读三个级别的规范化数据库。

也 -[将值从一个字段拆分为两个](https://stackoverflow.com/questions/2696884/mysql-split-value-from-one-field-to-two/2696960#2696960)

# c# - 应用程序心跳监控，可能通过 SQL 服务器

> ID：14938296
> 
> 赞同：1
> 
> 时间：2013-02-18T14:12:01.770
> 
> 标签：c#, asp.net, sql-server, monitoring, health-monitoring

我有一个用 ASP.NET C# 编写的应用程序，它应该运行大约 2 天，然后停止，直到它再次启动。应用程序有时会遇到一些麻烦，目前需要人工干预才能使其继续运行。（到目前为止，SQL Server 本身从来都不是问题）

工作时，应用程序至少每 20 分钟向日志数据库表写入一行。如果这些行不存在，则意味着应用程序要么完成了任务，要么需要帮助才能继续。在这些情况下，我想收到一封电子邮件或其他一些通知。

如果或何时应用程序停止将这些行写入日志数据库表，检测并通知我的最佳方法是什么？

如果它使事情变得更容易，我可以让应用程序执行一些其他常规任务，例如写入文件或在某处发送 TCP/UDP 数据包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:33:53.793

除了与此应用程序的设计有关的明显问题。鉴于您当前的设计，您可能会编写一个 Windows 服务来监视日志文件。如果它超过 N 分钟，请关闭`System.Net.Mail.MailMessage`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:58:32.273

您可以从全局应用程序错误处理程序（Global.asax 中的 Application_Error）发送电子邮件。Windows 服务监视数据库是另一种解决方案，但最好编写一个简短的脚本/命令行应用程序并使用 Windows 调度程序运行它。它占用空间更小，更易于编写和安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:50:53.270

如果您能够让应用程序执行诸如发送数据包之类的操作，那么您是否有任何理由不能让应用程序发送自己的警报？当应用程序完成或需要“帮助”（我假设某种手动输入或确认）时，需要发送警报。可以合理地假设应用程序可以知道这些事情何时发生，所以......为什么应用程序不能发送警报？ASP.NET 应用程序可以使用`System.Net.Mail.SmtpClient`. 让一个单独的程序代表一个可以访问一个非常好的电子邮件客户端类的程序发送电子邮件对我来说似乎真的很奇怪。

# perl - Net::DBus 与 ActiveState Perl

> ID：14938300
> 
> 赞同：1
> 
> 时间：2013-02-18T14:12:05.810
> 
> 标签：perl, dbus, activestate

道歉如果我误解了任何错误，我对 DBus 非常陌生，在 Perl 方面有初学者经验。

我正在为一个需要从窗口机器连接到远程 dbus（在 linux 上运行）的项目工作。我将连接到远程系统总线并调用方法调用、信号等。我无法将主机更改为 Linux，因为我们在 Windows 平台上开发了其他开发。

Perl 使用 Net::DBus 模块提供对 dbus 的支持，但该模块不适用于窗口平台。

[http://code.activestate.com/ppm/Net-DBus/](http://code.activestate.com/ppm/Net-DBus/)

[似乎在http://sourceforge.net/projects/windbus/](http://sourceforge.net/projects/windbus/)上还有一个 dbus 的 Windows 端口

我正在尝试使用 DBus 的此 Windows 端口构建 Net-DBus 模块，但无法正常工作。

感谢您的帮助，如何构建这样的模块。

# string - Fluent 映射因“无法确定类型...”异常而失败。

> ID：14938302
> 
> 赞同：0
> 
> 时间：2013-02-18T14:12:17.407
> 
> 标签：string, nhibernate, mapping, fluent, identifier

在我的项目中，我有这个映射：

```
public virtual string LicensePlate { get; set; }

public VehicleMap()
{
    Table("VEHICLE");

    Id(x => x.LicensePlate, "LICENSE_PLATE");
    ...
} 
```

当我尝试运行应用程序时，会生成一个 MappingException，指定：

```
 Could not determine type for: nononono.Vehicle, nononono.DataAccess, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null, for columns: NHibernate.Mapping.Column(LICENSE_PLATE) 
```

有人可以指出我做错了什么吗？

我试过设置`Id`to `.NotNullable`，`.GeneratedBy.Assigned()`但没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:59:25.937

解决了这个问题，它是在另一个错误地使用实体的类上。

代替

```
 public virtual Vehicle VehicleLicensePlate{ get; set; } 
```

我改为

```
 public virtual string VehicleLicensePlate{ get; set; } 
```

# c# - 使用 c# 在 postgresql DB 中插入错误

> ID：14938303
> 
> 赞同：1
> 
> 时间：2013-02-18T14:12:17.930
> 
> 标签：c#, .net, sql, postgresql

我想在表格的字段中插入字符串'xxx'xxx'。' 字符中的问题。我怎样才能插入这个字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T14:14:42.640

您需要复制单引号：

```
insert into foo (col_name)
values
('xxx''xxx'); 
```

但是你应该研究一下准备好的语句，它不仅可以让这样的事情变得更容易，而且还可以保护你免受 SQL 注入（我不懂 C#，所以我无法帮助你了解细节）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:16:43.283

`single quote`如果您直接插入，则加倍，

```
INSERT INTO tableName (colName) VALUES ('xxx''xxx') 
```

但如果您在 上执行此操作`C#`，请使用参数化查询。

```
string connStr = "connection String here";
string val = "xxx'xxx";
string query = "INSERT INTO tableName (colName) VALUES (:val)";
using(NpgsqlConnection conn = new NpgsqlConnection(connStr))
{
    using(NpgsqlCommand comm = new NpgsqlCommand())
    {
        comm.Connection = conn;
        comm.CommandText = query;
        NpgsqlParameter p = new NpgsqlParameter("val", NpgsqlDbType.Text);
        p.value = val;
        comm.Parameters.Add(p);
        try
        {
            conn.Open();
            comm.ExecuteNonQuery();
        }
        catch(NpgsqlException e)
        {
            // do something with
            // e.ToString();
        }
    }
} 
```

*   [PostgreSQL 和 C# - 使用结果集 - Npgsql .NET 数据提供者](http://www.sqlines.com/postgresql/npgsql_cs_result_sets)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:20:21.033

在c#中，如果要插入单引号，可以通过替换原始值来做到这一点：

```
string x = "xxx'xxx";
string replacedText = x.Replace("'","''"); 
```

并且在插入以防止 sql 注入时始终使用参数：

```
 myCommand.CommandText = "INSERT INTO TableName (x) VALUES (@x)";
 myCommand.Parameters.Add("@x", x); 
```

# php - 如何在php中合并一些元素数组？

> ID：14938305
> 
> 赞同：0
> 
> 时间：2013-02-18T14:12:21.803
> 
> 标签：php, arrays

例子：

```
Array (
     [0] => 35
     [1] => -
     [2] => 59
     [3] => *
     [4] => 2
     [5] => /
     [6] => 27
     [7] => *
     [8] => 2 ) 
```

然后计算：

`59*2=118`

新数组是：

```
 Array (
    [0] => 35
     [1] => -
     [2] => 118
     [3] => /
     [4] => 27
     [5] => *
     [6] => 2 ) 
```

这是我的原始来源： `input ($_POST['numbers'])`是一个字符串，例如：

`65*6/6+5-5`

```
class calculator {
    //property
    private $str='';
    private $len=0;
    private $ar_str=array();
    private $ar_design=array();
    private $ar_sum=array();
    private $ar_min=array();
    private $ar_mult=array();
    private $ar_divi=array();

//Method
public function __construct($str1=''){
    $this->str=$str1;
    $this->len=strlen($this->str);
    $this->ar_str=str_split($this->str);
    if($this->ar_str[0] == '+' ||
    $this->ar_str[0] == '-' ||
    $this->ar_str[0] == '*' ||
    $this->ar_str[0] == '/' ||
    $this->ar_str[$this->len-1] == '+' ||
    $this->ar_str[$this->len-1] == '-' ||
    $this->ar_str[$this->len-1] == '*' ||
    $this->ar_str[$this->len-1] == '/'
    ){
        exit("Syntax error!");
    }else if(!filter_var($this->ar_str[0], FILTER_VALIDATE_INT)){
        exit("just use numbers and 4 operators!");
    }
    $this->ar_design[0]=$this->ar_str[0];
    //start for
    $j=1;
    for($i=1;$i<$this->len;$i++){
        if($this->ar_str[$i] == '+' || $this->ar_str[$i] == '-' || $this->ar_str[$i] == '*' || $this->ar_str[$i] == '/'){
            if($this->ar_str[$i-1] == '+' || $this->ar_str[$i-1] == '-' || $this->ar_str[$i-1] == '*' || $this->ar_str[$i-1] == '/'){
                exit("Syntax error!");
            }else{
                $this->ar_design[$j]=$this->ar_str[$i];
                $j++;
            }
        }else if(filter_var($this->ar_str[$i], FILTER_VALIDATE_INT)){
            if($this->ar_str[$i-1] == '+' || $this->ar_str[$i-1] == '-' || $this->ar_str[$i-1] == '*' || $this->ar_str[$i-1] == '/'){
                $this->ar_design[$j]=$this->ar_str[$i];
            }else{
                $j--;
                $this->ar_design[$j]=$this->ar_design[$j].$this->ar_str[$i];
            }
        $j++;
        }else{
            exit("just use numbers and 4 operators!");
        }
    }//end of for

    print_r($this->ar_design);//array this array should be calculate!!!!!
}//end construct 
```

}

```
if(isset($_POST['numbers'])){
    $num_str=trim($_POST['numbers']);
    if($num_str!=''){
        $num_str = str_replace('`','+',$num_str);
        new calculator($num_str);
    }
} 
```

我可以找到答案：

```
$this->len_d=count($this->ar_design);
        $this->ar_cal[0]=$this->ar_design[0];
        $k=1;
        for($i=1;$i<$this->len_d;$i++){
            if($this->ar_design[$i] == '*'){
                $k--;
                $this->ar_cal[$k]=$this->ar_design[$i-1]*$this->ar_design[$i+1];
                $i++;
            }else{
                $this->ar_cal[$k]=$this->ar_design[$i];
            }
            $k++;
        }
        print_r($this->ar_cal); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:25:45.777

你可以用一个循环来做，然后执行它。

```
 $array=Array (35,'-',59,'*',2,'/',27,'*',2);
        foreach ($array as $value){
          $stringify.=$value;
        }
        echo 'Calculation looks like this: '.$stringify.'<br/>';

        function calculate( $math ){
            $calc = create_function("", "return (" .$math. ");" );
            return $calc();
        }   
        echo calculate($stringify); 
```

可以改进，例如通过验证输入...

工作示例：[http ://allanthya.net/arrcalc2.php](http://allanthya.net/arrcalc2.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:34:49.653

```
<?php
    $array = array( 35, '-', 59, '*', 2, '/', 27, '*', 2 );
    print_r($array);
    echo "<p>";

    while ( true ) {
        $div = array_keys($array, '/');
        $mult = array_keys($array, '*');
        $add = array_keys($array, '+');
        $sub = array_keys($array, '-');

        if ( count($div) >= 1 ) {
            $index = $div[0];
            $op1 = $array[$index-1];
            $op2 = $array[$index+1];

            $array[$index] = $op1 / $op2;
            unset($array[$index-1]);
            unset($array[$index+1]);
            $array = array_values($array);

            continue;
        } else if ( count($mult) >= 1 ) {
            $index = $mult[0];
            $op1 = $array[$index-1];
            $op2 = $array[$index+1];

            $array[$index] = $op1 * $op2;
            unset($array[$index-1]);
            unset($array[$index+1]);
            $array = array_values($array);

            continue;
        } else if ( count($add) >= 1 ) {
            $index = $add[0];
            $op1 = $array[$index-1];
            $op2 = $array[$index+1];

            $array[$index] = $op1 + $op2;
            unset($array[$index-1]);
            unset($array[$index+1]);
            $array = array_values($array);

            continue;
        } else if ( count($sub) >= 1 ) {
            $index = $sub[0];
            $op1 = $array[$index-1];
            $op2 = $array[$index+1];

            $array[$index] = $op1 - $op2;
            unset($array[$index-1]);
            unset($array[$index+1]);
            $array = array_values($array);

            continue;
        }
        else {
            break;
        }
    }
    print_r($array);
    echo "<p>";
?> 
```

这是 while 循环每次迭代后 print_r() 的输出，因此您可以看到它逐个运行除法、乘法、加法和减法，并在运行时修改数组：

```
Array ( [0] => 35 [1] => - [2] => 59 [3] => * [4] => 2 [5] => / [6] => 27 [7] => * [8] => 2 )

Array ( [0] => 35 [1] => - [2] => 59 [3] => * [4] => 0.0740740740741 [5] => * [6] => 2 )

Array ( [0] => 35 [1] => - [2] => 4.37037037037 [3] => * [4] => 2 )

Array ( [0] => 35 [1] => - [2] => 8.74074074074 )

Array ( [0] => 26.2592592593 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:23:17.397

为什么不计算将输入拆分为数组，然后输出结果？举个例子：

```
$input = "35-59*2/27*2";

if (preg_match('/[^-+*\/\\d]/', $input)) // simple checking
{
    echo "just use numbers and 4 operators!"; 
}
else
{
    $substraction = explode('-', $input);
    foreach ($substraction as $pos_s => $sub)
    {
        $addition = explode('+', $sub);
        foreach ($addition as $pos_a => $add)
        {
            $multiplication = explode('*', $add);
            foreach ($multiplication as $pos_m => $mult)
            {
                $division = explode('/', $mult);
                $d = $division[0];
                for ($i=1; $i < count($division);$i++)              
                    $d = $d / $division[$i];

                $multiplication[$pos_m] = $d;
            }
            $m = $multiplication[0];
            for ($i=1; $i < count($multiplication);$i++)                
                $m = $m * $multiplication[$i];

            $addition[$pos_a] = $m;
        }
        $a = $addition[0];
        for ($i=1; $i < count($addition);$i++)              
            $a = $a + $addition[$i];

        $substraction[$pos_s] = $a;
    }
    $result = $substraction[0];
    for ($i=1; $i < count($substraction);$i++)              
        $result = $result - $substraction[$i];
    echo $input . " = " . $result; 
} 
```

印刷

> 35-59*2/27*2 = 26.259259259259

# sql - 创建一个从备用表和数据库中获取数据的函数

> ID：14938311
> 
> 赞同：0
> 
> 时间：2013-02-18T14:12:44.753
> 
> 标签：sql, sql-server, sql-server-2008

我对 SQL Server 很陌生，我被分配了一个创建函数的任务（我以前从未做过）。

以下是该函数应该执行的操作： 数据库中有三个具有出生日期的表。其中两个表在 database1 中，而第三个表在 database2 中。

因此，我的函数需要（在调用/使用时）进入数据库 1 和表 1 以查看特定人的出生日期是否可用。如果是，则抓住该值。如果否，则查看表2。最后，如果两个表都没有出生日期，则去database2和表3获取出生日期。

这可能吗？函数可以从两个不同的数据库中获取数据吗？

任何帮助表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:21:22.927

这是创建函数的一种方法：

```
CREATE FUNCTION [dbo].[GetDatOfBirth](@PersonID INT)
RETURNS DATE
AS
BEGIN
    DECLARE @DateOfBirth DATE

    SELECT @DateOfBirth = DateOfBirth
    FROM Database1..Table1
    WHERE PersonID = @PersonID

    IF @DateOfBirth IS NULL
    BEGIN
        SELECT @DateOfBirth = DateOfBirth
        FROM Database1..Table2
        WHERE PersonID = @PersonID  
    END
    IF @DateOfBirth IS NULL
    BEGIN
        SELECT @DateOfBirth = DateOfBirth
        FROM Database2..Table1
        WHERE PersonID = @PersonID  
    END

RETURN(@DateOfBirth)
END 
```

免责声明：通常像这样的标量函数是性能杀手，所以我建议在大多数情况下使用其他选项（比如在连接上使用这个表）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T14:24:55.233

要从另一个数据库访问表，请使用以下语法：

```
Database.Schema.Object 
```

请注意，这仅适用于同一台服务器。如果您的数据库位于不同的服务器上，您将需要创建一个链接服务器。

要创建用户定义的函数，请查看：

[http://msdn.microsoft.com/en-us/library/ms186755.aspx](http://msdn.microsoft.com/en-us/library/ms186755.aspx)

# java - Android 上的 MD5 奇怪行为

> ID：14938312
> 
> 赞同：0
> 
> 时间：2013-02-18T14:12:48.940
> 
> 标签：java, android, md5

我有一个简单的方法，它接收一个字符串并使用 MD5 算法对其进行哈希处理（不用说，所有这些`sysos`都是为了监视/调试我一直在经历的奇怪行为）：

```
private String hashMD5(String input) throws UnsupportedEncodingException, NoSuchAlgorithmException {
    MessageDigest digest = MessageDigest.getInstance("MD5");

    // BYTES_ENCODING == "UTF-8"
    digest.update(input.getBytes(BYTES_ENCODING), 0, input.length());

    System.out.println(new BigInteger(1, digest.digest()).toString(16));
    System.out.println(new BigInteger(1, digest.digest()).toString(16));
    System.out.println(new BigInteger(1, digest.digest()).toString(16));

    String hash = new BigInteger(1, digest.digest()).toString(16);
    System.out.println(hash + " : used hash");
    System.out.println(hash.length() + " - " + new BigInteger(1, digest.digest()).toString(16).length());
    return hash;
} 
```

当使用 set String 调用此方法时，我得到以下结果：

```
02-18 08:49:23.355: I/System.out(2753): 78bfa0ce6d53a698a98aac899562bb4
02-18 08:49:23.355: I/System.out(2753): d41d8cd98f00b204e9800998ecf8427e
02-18 08:49:23.355: I/System.out(2753): d41d8cd98f00b204e9800998ecf8427e
02-18 08:49:23.355: I/System.out(2753): d41d8cd98f00b204e9800998ecf8427e : used hash
02-18 08:49:23.355: I/System.out(2753): 32 - 32 
```

所以我对你们所有人的问题是：

*为什么第一个`BigInteger`与所有其他的（在长度和内容上）有什么不同？*

我在我的两个测试设备上都遇到了同样的行为，我必须至少创建 2 个`BigInteger`才能获得正确长度的哈希：

1.  Nexus S (Android 4.1.1)
2.  连结 7 (Android 4.2.2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:21:49.380

因为第一个 digest.update() 会更新摘要但不会重置 MessageDigest 实例。然后打印的第一个结果是 input.getBytes(BYTES_ENCODING), 0, input.length()) 与 new BigInteger(1, digest.digest()).toString(16) 连接的哈希

注释显示为 digest.update(...) 的行

请注意，BigInteger.toString() 仅将字节数组转换为十六进制。它不附加任何前导零。

```
String s = new BigInteger(1, digest.digest()).toString(16);
while (s.length()<16) s="0"+s; //or something else to the same effect
System.out.println(s); 
```

# web-services - Web 引用错误 - 无法导入操作

> ID：14938314
> 
> 赞同：0
> 
> 时间：2013-02-18T14:12:51.337
> 
> 标签：web-services, asmx

我正在尝试设置从 MVC4 (.net 4.5) 项目到旧式 ASMX Web 服务的 Web 引用。

我可以毫无问题地浏览该服务，并且 wsdl 迪斯科的东西都可以按预期使用，但是当我尝试实际引用该服务时，我收到以下错误：

“无法导入操作‘登录’。Channel 类型的成员 Diagram.Item 隐藏了 AbstractSchedule1 类型的基类成员 Element.Item。使用 XmlElementAttribute 或 XmlAttributeAttribute 指定新名称。”

我根本无法控制这项服务，所以我必须使用我可用的东西，但真的不知道如何围绕这个进行编码，或者即使有可能这样做。

# javascript - javascript：在 if 语句中覆盖（不仅仅是定义）一个函数

> ID：14938317
> 
> 赞同：1
> 
> 时间：2013-02-18T14:12:53.057
> 
> 标签：javascript

我有以下 javascript。

```
var f = function() { ... };
if (x === 1) {
    // redefine f.
    f = function() { 
       ...
    };
} 
```

该代码有效吗？换句话说，我可以在我实际编写代码的 if 语句中重新定义 javascript 函数。

我因此而担心： [if/else statements 中的函数声明？](https://stackoverflow.com/questions/10069204/function-declarations-inside-if-else-statements)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:14:14.943

是的，你可以这么做。

```
f = function() { 
   ...
}; 
```

不是函数*声明*，它是函数*表达式*（分配给），因此其他问题中提到的问题不适用于此处**。****`f`**

 **只有变量和函数声明被提升。**

# forms - 如何国际化 一个值在jsp中？

> ID：14938318
> 
> 赞同：0
> 
> 时间：2013-02-18T14:12:55.557
> 
> 标签：forms, jsp, select, bundle, option

请注意下面的代码片段：

```
 <form:select path="type">
            <form:option value="national"><s:message code="holiday-list-type1" /></form:option>
            <form:option value="state"><s:message code="holiday-list-type2" /></form:option>
            <form:option value="city"><s:message code="holiday-list-type3" /></form:option>
            <form:option value="other"><s:message code="holiday-list-type4" /></form:option>
        </form:select> 
```

我希望每个`<form:option ... />` 值都在包中定义一个值，而不是在 JSP 上硬编码。

我该怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:06:29.047

我通过执行以下操作使其工作：

```
<form:select path="type">
    <form:option value="holiday-list-type1"><s:message code="holiday-list-type1" /></form:option>
    <form:option value="holiday-list-type2"><s:message code="holiday-list-type2" /></form:option>
    <form:option value="holiday-list-type3"><s:message code="holiday-list-type3" /></form:option>
    <form:option value="holiday-list-type4"><s:message code="holiday-list-type4" /></form:option>
</form:select> 
```

这样，我将值 holiday-list-type{1-4} （这是我的消息包的键）持久保存到数据库中，并且 JSP 返回国际化值。

希望这对某人也有帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:30:32.513

这是基于语言外部化所有字符串的链接。

@BalusC Sir 给出了一个几乎像教程一样的答案:)

[如何使 Java Web 应用程序国际化？](https://stackoverflow.com/questions/4276061/how-to-internationalize-a-java-web-application)

# android - Android开发：列表项搜索不匹配音频

> ID：14938324
> 
> 赞同：1
> 
> 时间：2013-02-18T14:13:06.337
> 
> 标签：android

我在 eclipse 中有这段代码，我有很多列表项，我只是缩短了代码。这里的问题是，每当我搜索一个项目时，语音音频不再匹配该项目。我想知道是否可以为列表项分配索引。有可能吗？

```
public class IndexActivity extends Activity implements OnClickListener{

    Button btnHome;
    Button btnBack;
    Button btnHelp;
    Button btnCateg;

     // List view
    private ListView lv1;

    // Listview Adapter
    ArrayAdapter<String> adapter1;

    // Search EditText
    EditText inputSearch1;

    // ArrayList for Listview
    ArrayList<HashMap<String, String>> productList1;

      @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_index);

            TabHost th = (TabHost) findViewById (R.id.tabhost);
            th.setup();

            TabSpec ts = th.newTabSpec("tag1");
            ts.setContent(R.id.tab1);
            ts.setIndicator("Chavacano - English");
            th.addTab(ts);

            ts = th.newTabSpec("tag2");
            ts.setContent(R.id.tab2);
            ts.setIndicator("English - Chavacano");
            th.addTab(ts);

            btnHome = (Button) findViewById(R.id.btnHome);
            btnHome.setOnClickListener(this);
            btnBack = (Button) findViewById(R.id.btnBack);
            btnBack.setOnClickListener(this);
            btnHelp = (Button) findViewById(R.id.btnHelpFooter);
            btnHelp.setOnClickListener(this);
            btnCateg = (Button) findViewById(R.id.btnCategoriesFooter);
            btnCateg.setOnClickListener(this);

            // Listview Data
            final String products1[] = {
            "January - Enero",
            "February - Pebrero",
            "March - Marso",
            "April - Abril",
            "May - Mayo",
            "June - Hunyo",
            "July - Hulyo",
            "August - Agosto",
            "September - Setyembre",
            "October - Oktubre",
            "November - Nobyembre",
            "December - Disyembre"
                    };

            lv1 = (ListView) findViewById(R.id.list_view1);
            inputSearch1 = (EditText) findViewById(R.id.txtSearch1);

            // Adding items to listview
            adapter1 = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name, products1);
            //adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.btnSound);
            lv1.setAdapter(adapter1); 

          //Audio
            lv1.setOnItemClickListener(new OnItemClickListener() {
                   public void onItemClick(AdapterView<?> a, View v, int position, long id)
                  { 
                       //oneoclock
                       if (lv1.getItemIdAtPosition(position) == 0)
                       {
                           MediaPlayer january = MediaPlayer.create(IndexActivity.this, R.raw.oneoclock);
                           january.start();
                       }
                       //February
                       else if (lv1.getItemIdAtPosition(position) == 1)
                       {
                           MediaPlayer february = MediaPlayer.create(IndexActivity.this, R.raw.fiveoclock);
                           february.start();
                       }
                       //March
                       else if (lv1.getItemIdAtPosition(position) == 2)
                       {
                           MediaPlayer march = MediaPlayer.create(IndexActivity.this, R.raw.below);
                           march.start();
                       }
                       //April
                       else if (lv1.getItemIdAtPosition(position) == 3)
                       {
                           MediaPlayer april = MediaPlayer.create(IndexActivity.this, R.raw.open);
                           april.start();
                       }
                       //May
                       else if (lv1.getItemIdAtPosition(position) == 4)
                       {
                           MediaPlayer may = MediaPlayer.create(IndexActivity.this, R.raw.abio);
                           may.start();
                       }
                       //June
                       else if (lv1.getItemIdAtPosition(position) == 5)
                       {
                           MediaPlayer june = MediaPlayer.create(IndexActivity.this, R.raw.aboard);
                           june.start();
                       }
                       //July
                       else if (lv1.getItemIdAtPosition(position) == 6)
                       {
                           MediaPlayer july = MediaPlayer.create(IndexActivity.this, R.raw.april);
                           july.start();
                       }
                       //August
                       else if (lv1.getItemIdAtPosition(position) == 7)
                       {
                           MediaPlayer august = MediaPlayer.create(IndexActivity.this, R.raw.boring);
                           august.start();
                       }
                       //September
                       else if (lv1.getItemIdAtPosition(position) == 8)
                       {
                           MediaPlayer september = MediaPlayer.create(IndexActivity.this, R.raw.take);
                           september.start();
                       }
                       //October
                       else if (lv1.getItemIdAtPosition(position) == 9)
                       {
                           MediaPlayer october = MediaPlayer.create(IndexActivity.this, R.raw.achara);
                           october.start();
                       }
                       //November
                       else if (lv1.getItemIdAtPosition(position) == 10)
                       {
                           MediaPlayer november = MediaPlayer.create(IndexActivity.this, R.raw.remember);
                           november.start();
                       }
                       //December
                       else if (lv1.getItemIdAtPosition(position) == 11)
                       {
                           MediaPlayer december = MediaPlayer.create(IndexActivity.this, R.raw.inside);
                           december.start();
                       }

                  }
            });

            inputSearch1.addTextChangedListener(new TextWatcher() {

                @Override
                public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                    // When user changed the Text
                    IndexActivity.this.adapter1.getFilter().filter(cs);
                }

                @Override
                public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                        int arg3) {}

                @Override
                public void afterTextChanged(Editable arg0) {} 
            });
      }         

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if (v.getId() == R.id.btnHome){
            startActivity(new Intent(this, HomescreenActivity.class));
            MediaPlayer button = MediaPlayer.create(IndexActivity.this, R.raw.button);
            button.start();
        }
        else if (v.getId() == R.id.btnBack){
            finish();
            MediaPlayer button = MediaPlayer.create(IndexActivity.this, R.raw.button);
            button.start();
        }
        else if (v.getId() == R.id.btnHelpFooter){
            startActivity(new Intent(this, HelpActivity.class));
            MediaPlayer button = MediaPlayer.create(IndexActivity.this, R.raw.button);
            button.start();
        }
        else if (v.getId() == R.id.btnCategoriesFooter){
            startActivity(new Intent(this, CategoriesActivity.class));
            MediaPlayer button = MediaPlayer.create(IndexActivity.this, R.raw.button);
            button.start();
        }   
    }   
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-18T15:50:55.193

这些项目不再匹配的原因是因为您使用 `getItemIdAtPosition`的是 android 文档并没有说太多，但我不会依赖它，因为这似乎是问题的来源。我建议使用`position`（可能我从未使用过适配器的过滤器功能）或使用`lv1.getItemAtPosition(position)`并且应该返回适​​配器中的选定项目（在本例中为字符串）并使用它来确定您要播放的声音。

您还可以做的是创建一个自定义类，其中包含要显示的字符串和要播放的声音参考，然后这将被返回`getItemAtPosition`，您可以为媒体播放器使用声音参考。这样你就不需要这个巨人了。

# java - 重用NDK代码需要安装NDK吗？

> ID：14938332
> 
> 赞同：1
> 
> 时间：2013-02-18T14:13:44.060
> 
> 标签：java, android

我已经下载了代码[http://code.google.com/p/aacplayer-android/downloads/detail?name=aacplayer-android-r25.zip&can=2&q=](http://code.google.com/p/aacplayer-android/downloads/detail?name=aacplayer-android-r25.zip&can=2&q=)用于在 ANDROID 中播放 AAC 文件

下面是 Eclipse 中该代码的图像

![在此处输入图像描述](../Images/8820aa9f03a457ece8609d870099329a.png)

在这里你可以看到LIBS文件夹中有jni文件夹和libs文件夹也包含.so文件

目前我还没有安装任何 NDK，并且我已经导入了这个工作正常的项目......但是如果我在我的项目中使用这些文件和代码，我是否必须安装 NDK？

我已将此 jni 和 libs 文件夹复制并粘贴到我的应用程序中，现在我该怎么办！如何告诉我的应用这是本机代码！

我的应用程序文件夹结构在下面（复制粘贴后）

![在此处输入图像描述](../Images/25fde52446c9724b635ca54c125db36f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:20:27.713

如果您不想重建 .so 文件，则不需要 NDK。Eclipse/Java/Android 将像处理原生 java 库一样处理它们。如果您希望能够为 android 平台编译 c/c++ 代码，则需要 ANdroid NDK。

# c# - 上限/下限推断和修复

> ID：14938337
> 
> 赞同：10
> 
> 时间：2013-02-18T14:14:06.747
> 
> 标签：c#

在 C# 4.0 规范 7.5.2.9 中：

> 从 U 型到 V 型的*下限推断*如下：

*   如果 V 是未固定的 X [i之一，则将 U 添加到 X] [i]的下限集合中。
*   [...]

这部分我已经看过很多次了。由于缺少章节引用，这个定义读起来就像一个循环引用。所以，我希望在附近找到语法制作或章节参考来澄清......我没有。本节还与存在类似定义问题 的*Fixing相关联。*

什么是 a `upper-bound inference`vs a `lower-bound inference`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T22:34:35.023

我会尽力把它描述得更清楚。最坏的情况，我用*不同*的方式描述它。

上/下推断是关于用于特定泛型方法调用的类型参数的类型推断的分阶段方法的一部分。显然，如果在第一阶段显式键入参数 (E)，则不会应用上/下推理。例如：

给定

```
public static T Choose<T>(T first, T second) {
        return (rand.Next(2) == 0)? first: second;
    } 
```

我可以`Choose`使用显式类型参数调用：

```
Choose<String>("first", "second"); 
```

关于上限或下限推断，在整个 7.5.2 中都有一些含义，它们决定了下限或上限推断是否适用。例如，7.5.2.9（和 .10）详细说明类型参数对于发生上限或下限推断是*不固定的。*7.5.2.5 详细说明了一个类型参数仅在该类型参数依赖于另一个不固定类型参数时才是不固定的。例如

```
IEnumerable<TResult> Select<TSource, TResult>(IEnumerable<TSource> e,
    Func<TSource, Result> f) 
```

`TResult`“取决于” `TSource`，因为 的类型`TSource`可能决定 的类型`TResult`。例如，与调用类似`Select(c, e->Name)`，`TResult`取决于`Name`in的类型`TSource`。

就上限和下限推断而言，对于未显式声明类型 (V) 的给定非固定类型参数 (X)（参见第一段），推导出类型 U 的类型实参 (E) 的上限*或*下限. 如果类型参数是协变的（具有`out`修饰符）并且下限集中的类型之一是参数的候选者，则发生下限推断。相反，如果类型参数是逆变的（具有 'in' 修饰符）并且上限集中的类型之一是参数的候选者，则发生上限推断。例如 with `Select(c, e->e.Name)`and `c`was`IEnumerable<Mammal>`然后编译器会推断出的下限**因为**`Mammal`类型参数 in`IEnumerable`是协变的（例如它被声明`IEnumerable<out T>`. 如果它被声明，`IEnumerable<in T>`那么将推断出一个上限。如果它被声明`Enumerabale<T>`——没有`in`或`out`那么它将是*不变*的，并且上限和下限推断都不会适用。）

显然，如果参数类型既不能是协变的也不能是逆变的，那么必须发生完全匹配

# php - php: datetime() 2个日期时间与2个变量之间的差异

> ID：14938339
> 
> 赞同：2
> 
> 时间：2013-02-18T14:14:09.547
> 
> 标签：php, date, datetime

我的数据库中有 4 列，它们是：

```
Date_in | Time_in | Date_out | Time_out 
```

Date_in 和 Time_in 属于一起（例如，2013-02-18 13:00:00）并且 date_out 与 Time_out 一起使用。我想找出 和 我已经起床之间的区别：

```
$start_time = new DateTime("'$list[date_in] "."$list[time_in]'");
$since_start = $start_time->diff(new DateTime("'$list[date_out] "."$list[time_out]'"));

$hours = $since_start->h.' hours'; 
```

但它不起作用。我认为我的引号和双引号都搞砸了，因为使用**" ' .**真的让我感到困惑..

提前感谢您提供有关如何修复代码的任何建议！

[编辑]感谢大家的所有详细帮助！我刚刚意识到服务器不支持 php 5.3，我不能使用 datetime()。

所以我的解决方案是：

```
$start_time = strtotime("$list[date_in] " . "$list[time_in]");
$end_time = strtotime("$list[date_out] " . "$list[time_out]");
$hours = abs(($end_time - $start_time)/3600); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T14:18:54.347

试试这个，

```
function datediff( $date1, $date2 )
{
    $diff = abs( strtotime( $date1 ) - strtotime( $date2 ) );

    return sprintf
    (
        "%d Days, %d Hours, %d Mins, %d Seconds",
        intval( $diff / 86400 ),
        intval( ( $diff % 86400 ) / 3600),
        intval( ( $diff / 60 ) % 60 ),
        intval( $diff % 60 )
    );
}

print datediff( "18th February 2013", "now" ) . "\n"; 
```

**或者**

您可以使用[DateTime::diff](http://www.php.net/manual/en/datetime.diff.php)

```
 $start_date = new DateTime("2012-02-10 11:26:00");
    $end_date = new DateTime("2012-04-25 01:50:00");
    $interval = $start_date->diff($end_date);
    echo "Result " . $interval->y . " years, " . $interval->m." months, ".$interval->d." days "; 
```

**编辑：**

结帐链接，

[如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

[Php 日期时间 – 计算 2 个日期之间差异的 7 种方法。](http://forums.webmasterhub.net/viewtopic.php?f=23&t=1831)

可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T14:15:56.700

如果要评估变量内容，则不需要引号。在这种情况下，您只需要它们来创建日期和时间之间的分隔：

```
$start_time = new DateTime($list['date_in']." ".$list['time_in']);
$since_start = $start_time->diff(new DateTime($list['date_out']." ".$list['time_out'])); 
```

我使用点`.`来将变量与字符串连接起来，在这种情况下，字符串是一个空格。

[您可以在文档](http://php.net/manual/en/language.operators.string.php)中阅读有关串联的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:15:49.870

```
$start_time = new DateTime("$list[date_in] " . "$list[time_in]");
$since_start = $start_time->diff(new DateTime("$list[date_out] " . "$list[time_out]")); 
```

或者

```
$start_time = new DateTime("{$list['date_in']} {$list['time_in']}");
$since_start = $start_time->diff(new DateTime("{$list['date_out']} {$list['time_out']}")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T14:22:35.293

```
// Time format is UNIX timestamp or
// PHP strtotime compatible strings
function dateDiff($time1, $time2, $precision = 6) {
    // If not numeric then convert texts to unix timestamps
    if (!is_int($time1)) {
      $time1 = strtotime($time1);
    }
    if (!is_int($time2)) {
      $time2 = strtotime($time2);
    }

    // If time1 is bigger than time2
    // Then swap time1 and time2
    if ($time1 > $time2) {
      $ttime = $time1;
      $time1 = $time2;
      $time2 = $ttime;
    }

    // Set up intervals and diffs arrays
    $intervals = array('year','month','day','hour','minute','second');
    $diffs = array();

    // Loop thru all intervals
    foreach ($intervals as $interval) {
      // Set default diff to 0
      $diffs[$interval] = 0;
      // Create temp time from time1 and interval
      $ttime = strtotime("+1 " . $interval, $time1);
      // Loop until temp time is smaller than time2
      while ($time2 >= $ttime) {
    $time1 = $ttime;
    $diffs[$interval]++;
    // Create new temp time from time1 and interval
    $ttime = strtotime("+1 " . $interval, $time1);
      }
    }

    $count = 0;
    $times = array();
    // Loop thru all diffs
    foreach ($diffs as $interval => $value) {
      // Break if we have needed precission
      if ($count >= $precision) {
    break;
      }
      // Add value and interval 
      // if value is bigger than 0
      if ($value > 0) {
    // Add s if value is not 1
    if ($value != 1) {
      $interval .= "s";
    }
    // Add value and interval to times array
    $times[] = $value . " " . $interval;
    $count++;
      }
    }

    // Return string with times
    return implode(", ", $times);
}

// Set start & end time
$start_time = "2013-02-18 13:00:00";
$end_time = "2013-02-16 10:00:00";

// Run and print diff
echo dateDiff($start_time, $end_time, 6); 
```

最后一个参数是精度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-22T09:35:32.693

```
$diff = abs( strtotime( '2014-04-25 16:00:00' ) - strtotime( '2014-04-27 18:02:00' ) );

if(sprintf("%d",intval( $diff / 86400 )) != '0'){
    if(sprintf("%d",intval( $diff / 86400 )) == '1'){
        echo sprintf("%02d day ", intval( $diff / 86400 ));
    }else{
        echo sprintf("%02d days ", intval( $diff / 86400 ));
    }
}
if(intval( ( $diff % 86400 ) / 3600) != '0'){
    if(intval( ( $diff % 86400 ) / 3600) == '1'){
        echo sprintf("%02d hour ", intval( ( $diff % 86400 ) / 3600));
    }else{
        echo sprintf("%02d hours ", intval( ( $diff % 86400 ) / 3600));
    }
}
if(intval( ( $diff / 60 ) % 60 ) != '0'){
    if(intval( ( $diff / 60 ) % 60 ) == '1'){
        echo sprintf("%02d min", intval( ( $diff / 60 ) % 60 ));
    }else{
        echo sprintf("%02d mins", intval( ( $diff / 60 ) % 60 ));
    }
} 
```

# java - Thymeleaf 构造带有变量的 URL

> ID：14938344
> 
> 赞同：61
> 
> 时间：2013-02-18T14:14:24.853
> 
> 标签：java, jsp, thymeleaf

我有以下代码在我的控制器中设置一个变量：

```
model.set("type", type); 
```

在 thymeleaf 视图中，我想构造一个带有操作 url 的表单：

```
/mycontroller/{type} 
```

任何想法如何实现这一目标？我没有运气阅读百里香文档。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-02-18T14:17:31.370

正如[user482745 在评论中建议的那样](https://stackoverflow.com/questions/14938344/thymeleaf-construct-url-with-variable#comment53400366_14938399)（现已删除），我之前建议的字符串连接

```
<form th:action="@{/mycontroller/} + ${type}"> 
```

在某些网络环境中会失败。

Thymeleaf 使用[`LinkExpression`](http://www.thymeleaf.org/apidocs/thymeleaf/2.1.4.RELEASE/org/thymeleaf/standard/expression/LinkExpression.html)它来解析`@{..}`表达式。在内部，这使用[`HttpServletResponse#encodeURL(String)`](http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html#encodeURL-java.lang.String-). 它的 javadoc 状态

> 对于健壮的会话跟踪，servlet 发出的所有 URL 都应通过此方法运行。否则，URL 重写不能用于不支持 cookie 的浏览器。

在通过 URL 完成会话跟踪的 Web 应用程序中，该部分将附加到在附加`@{..}`之前发出的字符串`${..}`。你不想要这个。

相反，请按照[文档中的建议使用路径变量](http://www.thymeleaf.org/doc/articles/standardurlsyntax.html#adding-parameters)

> 您还可以像普通参数一样以路径变量的形式包含参数，但在 URL 的路径中指定一个占位符：
> 
> ```
> <a th:href="@{/order/{id}/details(id=3,action='show_all')}"> 
> ```

所以你的例子看起来像

```
<form th:action="@{/mycontroller/{path}(path=${type})}"> //adding ending curly brace 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-03-17T12:41:53.010

如果您不想使用字符串连接（[由 Sotirios 提出](https://stackoverflow.com/a/14938399/3271406)），您可以在[URL 链接中使用](http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#link-urls)[表达式预处理](http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#preprocessing)：

```
<form th:action="@{/mycontroller/__${type}__}"> 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-09-25T11:23:57.080

您需要在 @{} 内连接字符串。

```
<form th:action="@{'/mycontroller/' + ${type}}"> 
```

@{} 用于 URL 重写。URL 重写的一部分是跟踪会话。第一次用户请求 URL，应用服务器添加到 url`;jsessionid=somehexvalue`并生成带有 jsessionid 的 cookie。当客户端在下一次请求期间发送 cookie 时，服务器知道客户端支持 cookie。如果服务器知道客户端支持 cookie，服务器将不会在 URL 中保留 addind jsessionid。

我首选的方法是使用管道语法 (|) 进行文字替换。

```
<form th:action="@{|/mycontroller/${type}|}"> 
```

Thymeleaf 路径变量语法是

```
<form th:action="@{/mycontroller/{pathParam}(pathParam=${type}}"> 
```

参考： [Thymeleaf 标准 URL 语法](http://www.thymeleaf.org/doc/articles/standardurlsyntax.html#adding-parameters)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-01-03T08:48:38.867

**你需要的是：**

```
<a th:href="@{/mycontroller/{type}(type=${type})}"> 
```

**文档：**

这里有很大的帮助： [http](http://www.thymeleaf.org/doc/articles/standardurlsyntax.html) ://www.thymeleaf.org/doc/articles/standardurlsyntax.html 。我从那里使用的是：

> 您还可以像普通参数一样以路径变量的形式包含参数，但在 URL 的路径中指定一个占位符：
> 
> `<a th:href="@{/order/{id}/details(id=3,action='show_all')}">`
> 
> ... 更重要的是：一个 URL 表达式，如：
> 
> `<a th:href="@{/order/details(id=${order.id})}">`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-16T13:30:10.793

```
Exception evaluating SpringEL expression: "businessId" (login:50) 
```

我有同样的问题，并通过字符串连接解决，如下所示。

***登录控制器.java***

```
@RequestMapping(value = "/login/{businessId}", method = RequestMethod.GET)
    public ModelAndView get(HttpServletRequest request, @PathVariable String businessId) {
        ModelAndView modelAndView = new ModelAndView("login");
        modelAndView.addObject("businessId", businessId);
        return modelAndView;
    } 
```

***登录.html***

```
 <form role="form" th:action="@{/login} + '/'+ ${businessId}" th:method="post">
                            <fieldset>
                                <div class="form-group">
                                    <input class="form-control" placeholder="E-mail" name="userName"
                                        type="email"></input>
                                </div>
                                <div class="form-group">
                                    <input class="form-control" placeholder="Password"
                                        name="password" type="password" value=""></input>
                                </div>
                                <div class="checkbox">
                                    <label> <input name="remember" type="checkbox"
                                        value="Remember Me"></input>Remember Me
                                    </label>
                                </div>
                                <!-- Change this to a button or input when using this as a form -->
                                <button id="login" class="btn btn-lg btn-success btn-block" type="submit">Login</button>
                            </fieldset>
            </form> 
```

# jquery - 使用 jquery 将数组打印到新窗口

> ID：14938345
> 
> 赞同：0
> 
> 时间：2013-02-18T14:14:26.350
> 
> 标签：jquery, arrays

我有一个包含 PHPlot 图像的 php 页面，我想添加一个按钮，将数据值打印到新窗口（或警报屏幕，由于数组大小（> 10k 值）而不可取）但我不是很确定这将如何工作。

1.  我考虑过 window.open 但这需要一个 URL，所以我不知道它是如何工作的
2.  我还考虑过使用 $.each 循环遍历数组并打印值，但这并没有将它放在新窗口中。

到目前为止，我有以下脚本块：

```
$('.XY').click(function() {
  var mz_array = <?php echo json_encode($mz_array) ?>;
  var int_array = <?php echo json_encode($int_array) ?>;
  for (var i = 0; i < mz_array.length; i++) {
    // This is obviously not what I want, it is just here to demonstrate the alert idea
    //alert(mz_array[i] - TAB - int_array[i]);
    // The below idea has my preference
    //window.open( /* printf(mz_array[i] + "\t" + int_array[i] + "\n" */ );
  }
}); 
```

我会喜欢任何关于如何以聪明的方式做到这一点的建议。

PS：1和2下的陈述是基于我有限的知识，我很可能是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:24:32.627

**替代解决方案**（不需要数组大小相同）

```
$(function() {
    $('.XY').click(function() {
        var mz_array = <?php echo json_encode($mz_array) ?>;
        var int_array = <?php echo json_encode($int_array) ?>;

        var output = mz_array.map( function(val, idx) {
            return (val + "\t" + (int_array[idx] || "") );
        });

        var disp = window.open('','','width=400,height=150');
        $(disp.document.body).text( output.join("\t") );
    });
}); 
```

* * *

基本上，这会将结果合并到一个数组中，然后警告结果。然而，这种数据处理可能应该在 PHP 的后端完成，并且返回具有更有用结构的对象可能更有用，例如：

```
[{ mz: 'abc', int: 1 }, { mz: 'def', int: 2 }, { mz: 'ghi', int: 13 }, ...] 
```

假设两个数组的长度相同：

```
$(function() {
    $('.XY').click(function() {
        var mz_array = <?php echo json_encode($mz_array) ?>;
        var int_array = <?php echo json_encode($int_array) ?>;
        var output = [];

        for (var i=0; i < (mz_array.length + int_array.length); i++ ) {
            output.push ( i%2 ? int_array[i] : mz_array[i] );
        }

        var disp = window.open('','','width=400,height=150');
        $(disp.document.body).text( output.join("\t") );
    });
}); 
```

# google-analytics - 是否可以在 Google Analytics 的页面级自定义变量中设置多个值？

> ID：14938354
> 
> 赞同：1
> 
> 时间：2013-02-18T14:14:45.923
> 
> 标签：google-analytics, analytics

是否可以在 Google Analytics 的页面级自定义变量中设置多个值？

```
_gaq.push(['_setCustomVar',3,'Tag','tag value1',3]);
_gaq.push(['_setCustomVar',3,'Tag','tag value2',3]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:49:04.037

不，至少如果您坚持对多个调用使用相同的索引（setCustomvar 的第一个参数），则至少不会 - 这只会覆盖第一个值。如果您为每个变量选择不同的索引（从 1 到 5），则最多可以使用五个页面级别变量。

如果您发现 5 个 var 还不够（而且您没有 250 Grand for Analytics Premium），您可以将连接的字符串 (value1_value2_value3) 存储在单个 var 中，并在 GA 接口中使用正则表达式来匹配您的子字符串过滤器或目标定义。

# symfony - 缓存文件夹增长非常非常快

> ID：14938355
> 
> 赞同：12
> 
> 时间：2013-02-18T14:14:51.357
> 
> 标签：symfony

我将 Symfony2 用于一个关键应用程序。对于每个客户端（浏览器中的每个选项卡都是客户端），JS 每秒通过 AJAX 请求数据。文件夹 /cache/dev/profiler/ 增长得非常快！17Gb 2 天！我怎样才能禁用这种写作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-18T14:25:29.757

config_dev.yml 中有选项

```
framework:
    profiler: { only_exceptions: true } 
```

这是假的，现在一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:31:11.527

检查您的环境是否在 dev（开发）模式下运行，如果是，请确保它处于 prod（生产）模式。在开发模式下，出于调试原因进行了很多处理，而您的客户不需要这样做。

如果你想禁用分析器，你可以这样做：`app/config/config_dev.yml`

```
web_profiler:
     toolbar: true
     only-exceptions: true
     intercept_redirects: false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-09T14:58:18.450

[这是更好的解决方案，由于SncRedisBundle](https://github.com/snc/SncRedisBundle) ，您可以将分析器数据存储在 redis 中，他们已经实现了**profiler_storage**。

他们还添加了 TTL，因此您的分析器数据可以自动过期。

首先在 config.yml 中配置你的 snc_redis 客户端

```
snc_redis:
    clients:
        default:
            type: predis
            alias: default
            dsn: redis://localhost 
```

然后在 config_dev.yml 中添加 profiler 存储

```
snc_redis:
    profiler_storage:
        client: default
        ttl: 86400 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-24T09:43:34.370

我的解决方案

```
* * * * * root cd /path/to/project/src/var/cache/dev/profiler && sed -i ':a;$q;N;101,$D;ba' ./index.csv && ls -1t | tail -n +102 | xargs rm -rf 
```

在哪里：

`sed -i ':a;$q;N;101,$D;ba' ./index.csv`删除 index.csv 中的所有行，最后 100 行除外。（新转储最后存储）

`ls -1t | tail -n +102 | xargs rm -rf`按修改日期删除除最新的 100 个以外的所有文件夹和文件。

102 - 考虑 index.csv

# html - HTML/CSS 菜单的小错误

> ID：14938356
> 
> 赞同：2
> 
> 时间：2013-02-18T14:14:55.957
> 
> 标签：html, css, drop-down-menu

我正在尝试建立一个网站，但我遇到了动态菜单的一些问题。更具体地说，我已经调整了一个模板以包含一个下拉菜单：一些菜单项包含一个子列表，当光标悬停时会出现；此外，当用户在该特定页面上时，主要项目应在鼠标悬停时更改背景。

我想得到的是，每当您访问子页面时，只会突出显示主菜单项，但不幸的是这不会发生。我不能让主项目在被选中时切换背景，我也不知道为什么。

这是涉及的 CSS：/* 菜单 */

```
#menu {
    background: #65b63a;
    clear: both;
    height: 30px;
    border: 1px solid #65b63a;
    padding:0;
    margin:0;
}

#menu ul li.active a, #menu ul li:hover {
    background:url('images/menuover.jpg') repeat-x bottom;
}

#menu ul {
    list-style: none;
    float:left;
    margin:0;
    padding:0;
    font-size:10pt;
}    

#menu ul li {
    background: #65b63a;
    position:relative;
    display: block;
    float: left;
    margin-right: 1px;
    font-size: 10pt;
    text-transform:uppercase;
    line-height: 30px;
    padding:0;
    margin:0;
    border-right:1px #aeaeae solid;
}

#menu ul li a {
    display: block;
    float: left;
    padding: 0 17px;
    color: #FFFFFF;
    text-decoration: none;
}

#menu ul li.sub a{
    background-image:none;
}

#menu ul li ul{
    display:none;
}

#menu ul li ul li{
    padding:0;
    margin:0;
}

#menu ul li:hover ul{
    background:none;
    display:block;
    position:absolute;
    width:200px;
    padding-top:30px;
    margin:0;
    font-size:10pt;
}

#menu ul li ul a:hover {
    text-decoration:underline;
    background:none;
}

#menu ul li li{
    width:200px;
    font-size:10pt;
    background-image:none;
    text-transform:none;

} 
```

这是涉及的HTML：

```
 <div id="menu">
            <ul>
               <li><a href="index.html">Home</a></li>  <!-- this one is a single item -->
                <li class="active"><a href="#">Chi? Dove? Quando?</a> <!-- this should be "active" but it isn't -->
                    <ul>
                        <li class="sub"><a href="chi.html">Chi siamo</a></li>
                        <li class="sub"><a href="dove.html">Dove siamo</a></li>
                        <li class="sub"><a href="orari.html">Orari</a></li>
                        <li class="sub"><a href="staff.html">Lo staff</a></li>
                        <li class="sub"><a href="contatti.html">Contatti</a></li>
                    </ul>
                </li>
            </ul>
        </div> 
```

我相信问题出在 CSS 中，但我无法让它工作。

在此先感谢，洛伦佐

PS 作为参考，你可以找到网站的一个 raw @http [://www.pansepol.it/raw](http://www.pansepol.it/raw) 主页是单项页面的示例，而“Viaggi di Gruppo”>“亚洲”是一个示例一个多层次的。如您所见，在导航到最后一页时，“Viaggi di Gruppo”并未突出显示。

编辑： - - - - - - - - - - - - - - - - - - - - - - - - ------------

愚蠢的我，就这么简单。我将“活动”类应用于`<li>`元素并按照 Justus 和 Raad 的建议更正了 CSS。

现在代码如下：

```
#menu ul li.active a, #menu ul li:hover {
    background:url('images/menuover.jpg') repeat-x bottom;
} 
```

和

```
<li class="active"><a href="#">Chi? Dove? Quando?</a>
                <ul>
                    <li class="sub"><a href="chi.html">Chi siamo</a></li>
                    <li class="sub"><a href="dove.html">Dove siamo</a></li>
                    <li class="sub"><a href="orari.html">Orari</a></li>
                    <li class="sub"><a href="staff.html">Lo staff</a></li>
                    <li class="sub"><a href="contatti.html">Contatti</a></li>
                </ul>
            </li> 
```

一切顺利。

谢谢，

洛伦佐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:20:52.650

我相信您在 CSS 中犯了一个小错误：

```
#menu ul li.active a, #menu ul li:hover { 
```

应该：

```
#menu ul li.active, #menu ul li:hover { 
```

因为您希望`li`显示背景图像，而不是您的`a`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:27:12.720

On the "Home" page, the "active" class is being applied to the `<li>` element; but on the "Viaggi di Gruppo" > "Asia" it is applied to the `<a>` element instead. It needs to be one or the other, then adjusted in the css if necessary.

# jquery - jquery：操作 div 和添加效果会导致未捕获的 TypeErrors 无限循环

> ID：14938358
> 
> 赞同：2
> 
> 时间：2013-02-18T14:15:01.807
> 
> 标签：jquery, slidedown, dom-manipulation

我正在尝试按顺序执行三个任务：

a) 通过 ajax 将 html-content 加载到隐藏的 div 中。

b) 遍历内容并将元素插入到现有的 div 中。

c)`slideDown`为每个新添加的 div 添加动画。

当我这样做时，我得到一个无休止的错误循环

> 未捕获的类型错误：对象# 的属性“未定义”不是函数

这是代码：

```
for(var step=1;step<=total_steps;step++)
{
 add_target=$('#content');
 add_entry=$('#response_hidden').find('.slide :eq('+ step +')');

 add_entry.hide();
 add_entry.prependTo(add_target);
 add_entry.slideDown("slow");
} 
```

有什么线索吗？使用这个[ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:22:25.687

尝试这个

```
 add_entry=$('#response_hidden').find('.slide:eq('+ step +')');
                                         -----^--- you have extra space here 
```

# asp.net-mvc - MVC 4：将单个继承模型传递到主模型到局部视图

> ID：14938362
> 
> 赞同：0
> 
> 时间：2013-02-18T14:15:22.777
> 
> 标签：asp.net-mvc, models, asp.net-mvc-partialview, asp.net-mvc-controller, dbset

我想弄清楚这一点。

我有一门专业课叫做食物。

我有多个继承自 Food 的类：Pizza、Sandwich、Meals 等...

我使用代码优先方法创建了数据库。该数据库有披萨、三明治和餐食的表格。

现在在我的主页上，我需要显示我拥有的每种食物的前 5 名，但我不想创建一个名为 foods 的表。那么我如何获取前 5 种食物的列表（我无法从我的 DBSet 类中访问 foods.ToList()，因为这将导致我为其创建一个数据库表，但我仍然如何将所有这些值转换为多个Class Foods 的对象。然后将它们传递给我的 C# 代码中的视图？

在我获得前 5 名比萨饼、前 5 名三明治、前 5 名膳食的所有这些值后，我将需要将它们传递给渲染模型“食物”并显示这些类之间共有的属性的局部视图（即仅那些在食物中的那些，而不是比萨饼或膳食中单一的特殊特性）等等......

这很重要，因为我试图理解 mvc 如何工作的概念，这与创建一个 2 类模型并创建一个接受这个模型的视图不同，正如我在所有帖子中看到的那样，比萨饼和三明治在线的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:04:06.053

这个案例似乎是使用[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)的绝佳机会。使用这种模式，您可以创建一个名为“FoodRepository”的类，该类可以从您的 DbSet 中读取特定表，将它们包装在父“Food”类中，并将它们作为列表返回。该存储库将包含执行“前 5 种食物”之类的所有逻辑。控制器将调用此存储库，并在视图模型中返回此列表。然后，视图会将其传递给一个局部视图，该视图被强类型化为 IEnumerable，并负责显示该列表。

这是一个很好的教程，介绍如何开始[使用 EF Code First 的存储库模式](http://www.codeproject.com/Articles/207820/The-Repository-Pattern-with-EF-code-first-Dependen)。

# zend-framework2 - Zend Framework 2 - 如何上传多个文件？

> ID：14938366
> 
> 赞同：2
> 
> 时间：2013-02-18T14:15:47.043
> 
> 标签：zend-framework2

如何在 Zend Framework 2 中上传多个文件。我已经完成了这项工作。但是，我收到第二个文件的以下错误。

```
'first-filename' was illegally uploaded. This could be a possible attack. 
```

供你参考，

```
 $size   = new Size(array('max' => 1048576));
            $adapter= new \Zend\File\Transfer\Adapter\Http(); 
            $File    = $this->params()->fromFiles('logo');
            $adapter->setValidators(array($size), $File['name']);
            $FileName   = '';

            if (!$adapter->isValid()){
                $dataError = $adapter->getMessages();
                $error = array();
                foreach($dataError as $key=>$row)
                {
                    $error[] = $row;
                }
            } else {
                $adapter->setDestination(path);
                if ($adapter->receive($File['name'])) {
                    // manipulation
                }
            }

            $logoFile   = $this->params()->fromFiles('logo2');
            $adapterLogo    = new \Zend\File\Transfer\Adapter\Http(); 
            $adapterLogo->setValidators(array($size), $logoFile['name']);
            $logoFileName= '';

            if (!$adapterLogo->isValid()){
                $dataError = $adapterLogo->getMessages();
                $error = array();
                foreach($dataError as $key=>$row)
                {
                    $error[] = $row;
                }
            } else {
                $adapterLogo->setDestination(path2);
                if ($adapterLogo->receive($logoFile['name'])) {
                    // manipulation
                }
            } 
```

我该如何解决这个问题？为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:38:21.923

你确定你的表格上有正确的编码类型吗？

```
$form->setAttribute('enctype','multipart/form-data'); 
```

也将文件名添加到 isValid 检查中

```
if($adapterLogo->isValid('logo2')) { /** .. **/ } 
```

如果您使用 Forms 为您验证它比使用这样的验证器要简单得多，请参见以下示例：

[http://samsonasik.wordpress.com/2012/08/31/zend-framework-2-creating-upload-form-file-validation/](http://samsonasik.wordpress.com/2012/08/31/zend-framework-2-creating-upload-form-file-validation/)

# javascript - 如何在 Z WebGL 中翻译？

> ID：14938371
> 
> 赞同：0
> 
> 时间：2013-02-18T14:16:04.730
> 
> 标签：javascript, three.js, webgl, translate-animation, translate3d

我的问题是该函数`translateZ`停止代码并且不起作用。没有这一行：`particals.translateZ(50);`代码有效，但我想将 Z 轴上的分词翻译 50 这个代码。

```
<!DOCTYPE html>
<!-- saved from url=(0070)http://mrdoob.github.com/three.js/examples/webgl_particles_random.html -->
<html lang="en"><meta style="visibility: hidden !important; display: block !important; width: 0px !important; height: 0px !important; border-style: none !important;"><embed id="__IDM__" type="application/x-idm-downloader" width="1" height="1" style="visibility: hidden !important; display: block !important; width: 1px !important; height: 1px !important; border-style: none !important; position: absolute !important; top: 0px !important; left: 0px !important;"></meta><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>three.js webgl - particles</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        body {
            background-color: #000000;
            margin: 0px;
            overflow: hidden;
            font-family:Monospace;
            font-size:13px;
            text-align:center;
            font-weight: bold;
            text-align:center;
        }

        a {
            color:#0078ff;
        }

        #info {
            color: #fff;
            position: absolute;
            top: 0px; width: 100%;
            padding: 5px;
            z-index: 100;
        }

    </style>
</head>
<body>

    <div id="info">
        <a href="http://threejs.org/" target="_blank">three.js</a> - webgl particles example
    </div>

    <script src="./three.js webgl - particles_files/three.min.js"></script>
    <script src="./three.js webgl - particles_files/three.js"></script>
    <script src="./three.js webgl - particles_files/Detector.js"></script>
    <script src="./three.js webgl - particles_files/stats.min.js"></script>

    <script>

        if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

        var container, stats;
        var camera, scene, renderer, particles, geometry, materials = [], parameters, i, h, color;
        var mouseX = 0, mouseY = 0;

        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

        init();
        animate();

        function init() {

            container = document.createElement( 'div' );
            document.body.appendChild( container );

            camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 3000 );
            camera.position.z = 1000;

            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2( 0x000000, 0.0007 );

            geometry = new THREE.Geometry();

            for ( i = 0; i < 50; i ++ ) {

                var vertex = new THREE.Vector3();
                vertex.x = Math.random() * 2000 - 1000;
                vertex.y = Math.random() * 2000 - 1000;
                vertex.z = Math.random() * 2000 - 1000;

                geometry.vertices.push( vertex );

            }

            parameters = [ [ [1.0, 1.0, 1.0], 55 ], [ [0.95, 1, 1], 44 ], [ [0.90, 1, 1], 33 ], [ [0.85, 1, 1], 22 ], [ [0.80, 1, 1], 11 ] ];
            //parameters = [ [ 0xff0000, 5 ], [ 0xff3300, 4 ], [ 0xff6600, 3 ], [ 0xff9900, 2 ], [ 0xffaa00, 1 ] ];
            //parameters = [ [ 0xffffff, 5 ], [ 0xdddddd, 4 ], [ 0xaaaaaa, 3 ], [ 0x999999, 2 ], [ 0x777777, 1 ] ];

            for ( i = 0; i < parameters.length; i ++ ) {

                size  = parameters[i][1];
                color = parameters[i][0];

                //materials[i] = new THREE.ParticleBasicMaterial( { color: color, size: size } );

                materials[i] = new THREE.ParticleBasicMaterial( { size: size } );
                materials[i].color.setHSV( color[0], color[1], color[2] );

                particles = new THREE.ParticleSystem( geometry, materials[i] );

                //particles.rotation.x = Math.random() * 6;
                //particles.rotation.y = Math.random() * 6;
                particals.translateZ(50);
                particles.rotation.z = Math.random() * 30000;

                scene.add( particles );

            }

            renderer = new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );
            container.appendChild( renderer.domElement );

            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            container.appendChild( stats.domElement );

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );
            document.addEventListener( 'touchstart', onDocumentTouchStart, false );
            document.addEventListener( 'touchmove', onDocumentTouchMove, false );

            //

            window.addEventListener( 'resize', onWindowResize, false );

        }

        function onWindowResize() {

            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );

        }

        function onDocumentMouseMove( event ) {

        /*  mouseX = event.clientX - windowHalfX;
            mouseY = event.clientY - windowHalfY;*/

        }

        function onDocumentTouchStart( event ) {

            if ( event.touches.length === 1 ) {

                event.preventDefault();

                /*mouseX = event.touches[ 0 ].pageX - windowHalfX;
                mouseY = event.touches[ 0 ].pageY - windowHalfY;*/

            }

        }

        function onDocumentTouchMove( event ) {

            if ( event.touches.length === 1 ) {

                event.preventDefault();

                /*mouseX = event.touches[ 0 ].pageX - windowHalfX;
                mouseY = event.touches[ 0 ].pageY - windowHalfY;*/

            }

        }

        //

        function animate() {

            requestAnimationFrame( animate );

            render();
            stats.update();

        }

        function render() {

            var time = Date.now() * 0.00005;

            camera.position.x += ( mouseX - camera.position.x ) * 0.05;
            camera.position.y += ( - mouseY - camera.position.y ) * 0.05;

            camera.lookAt( scene.position );

            for ( i = 0; i < scene.children.length; i ++ ) {

                var object = scene.children[ i ];

                if ( object instanceof THREE.ParticleSystem ) {

                    object.rotation.y = time * ( i < 4 ? i + 1 : - ( i + 1 ) );

                }

            }

            for ( i = 0; i < materials.length; i ++ ) {

                color = parameters[i][0];

                h = ( 360 * ( color[0] + time ) % 360 ) / 360;
                materials[i].color.setHSV( h, color[1], color[2] );

            }

            renderer.render( scene, camera );

        }

    </script><div><canvas width="1304" height="640" style="width: 1304px; height: 640px;"></canvas><div id="stats" style="width: 80px; opacity: 0.9; cursor: pointer; position: absolute; top: 0px;"><div id="fps" style="padding: 0px 0px 3px 3px; text-align: left; background-color: rgb(0, 0, 34);"><div id="fpsText" style="color: rgb(0, 255, 255); font-family: Helvetica, Arial, sans-serif; font-size: 9px; font-weight: bold; line-height: 15px;">49 FPS (0-54)</div><div id="fpsGraph" style="position: relative; width: 74px; height: 30px; background-color: rgb(0, 255, 255);"><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 30px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 17.4px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 17.1px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.7px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.1px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.399999999999999px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.1px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.7px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.1px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.1px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 15px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.399999999999999px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.1px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 13.799999999999997px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.1px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.1px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.1px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.1px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.399999999999999px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 15px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 18.299999999999997px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 16.2px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 16.2px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.399999999999999px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.7px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.399999999999999px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.7px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.7px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.399999999999999px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 15px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.7px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 14.7px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 15.600000000000001px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 17.4px; float: left; background-color: rgb(17, 17, 51);"></span><span style="width: 1px; height: 15.3px; float: left; background-color: rgb(17, 17, 51);"></span></div></div><div id="ms" style="padding: 0px 0px 3px 3px; text-align: left; background-color: rgb(0, 34, 0); display: none;"><div id="msText" style="color: rgb(0, 255, 0); font-family: Helvetica, Arial, sans-serif; font-size: 9px; font-weight: bold; line-height: 15px;">20 MS (3-13222)</div><div id="msGraph" style="position: relative; width: 74px; height: 30px; background-color: rgb(0, 255, 0);"><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 24.9px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 16.5px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 28.5px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.15px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 28.05px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.75px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 24.9px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 24.9px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.15px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 28.05px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 24.9px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 25.2px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.75px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 24.75px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 25.2px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.75px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 24.75px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 25.05px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 25.05px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 25.05px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.15px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.9px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.45px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 25.05px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.3px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27.6px; float: left; background-color: rgb(17, 51, 17);"></span><span style="width: 1px; height: 27px; float: left; background-color: rgb(17, 51, 17);"></span></div></div></div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:22:09.040

也许你拼错了“粒子” `particals.translateZ(50);`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:30:25.537

关于什么：

```
particles.position.z += 50 
```

?

# android - 有什么方法可以限制 Android 上的私钥可见性吗？

> ID：14938373
> 
> 赞同：0
> 
> 时间：2013-02-18T14:16:05.723
> 
> 标签：android, pki, digital-certificate, android-keystore

我正在开发需要验证最终用户创建的数据的应用程序。

我知道我可以为此使用[KeyChain API](http://developer.android.com/reference/android/security/KeyChain.html "钥匙串 API")，但是这个 API 有我认为对我们的应用程序来说是一个缺陷的地方。由于 KeyChain 需要用户访问证书并因此访问私钥，因此我们的应用程序可能被指控窃取身份和伪造数据。我需要某种方法来使用用户私钥来验证这些数据，而不能“复制”私钥或发送到其他地方。

无论如何我可以做到这一点吗？

我现在期待智能卡和 USB 令牌，但如果其他人可以分享实施经验以解决类似问题甚至提出建议，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:25:42.420

如果 KeyChain API 使用硬件密钥存储实现，则不允许复制私钥。毫无疑问，只有 Android 4.1+ 的 Google Nexus 设备实现了硬件密钥库。其他供应商也*可能*这样做，或者可能使用标准的不安全软件实现。

我认为有专门的 SD 卡支持智能卡，但它们并不便宜，我不知道它们是否适用于所有手机。

同样在 Android 4.1+ 中，您无法访问私钥。您只会获得一个可用作签名/解密/加密中的私钥的对象，但您没有获得实际的密钥。在此处查看有关实施的更多详细信息：http: [//nelenkov.blogspot.de/2012/07/jelly-bean-hardware-backed-credential.html](http://nelenkov.blogspot.de/2012/07/jelly-bean-hardware-backed-credential.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:38:18.497

**如果您将返回对象而不是访问并在同一文件中有两个类时**使用私有变量。

```
private class test_A
{
    private int num;

    private test_A getObject()
    {
        return this;
    }

}

private class test_B
{
    private void test()
    {
        test_A __object__ = new test_A().getObject();
        __object__.num = 3;
    }
}* 
```

# c# - ViewModel 和 Interface 无法正常获取数据

> ID：14938381
> 
> 赞同：1
> 
> 时间：2013-02-18T14:16:38.297
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我很难解决这个问题，如何创建带有界面的视图模型，

我一直在尝试在线遵循一些示例，即

[http://www.rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications](http://www.rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications)

和

[http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)

但我无法让它工作，任何帮助将不胜感激，我的代码如下。

```
public class TravelGuideViewModel
    {
    private readonly IGetCountryDetails _IGCD;
    public DisplayCountryDetails displayCountryDetails { get; set; }

    public TravelGuideViewModel(IGetCountryDetails IGCD)
        {
        _IGCD       = IGCD;
        }
    //Trying to get DisplayCountryDetails here, but everything i try does not work
    } 
```

======================更新===============

```
public class TravelGuideViewModel
    {
    private readonly IGetCountryDetails _IGCD;
    public DisplayCountryDetails displayCountryDetails { get; set; }

    public TravelGuideViewModel(IGetCountryDetails IGCD)
        {
        _IGCD       = IGCD;
        }
    public TravelGuideViewModel Asia()
        {
        var countries = _IGCD.DisplayCountriesOfTheWorldDetails()
            .Where(a => a.strCountryContinent == "Asia").FirstOrDefault();

        return countries.strCountry.AsEnumerable(); << Does not work
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:03:35.903

您的 .AsEnumerable() 不起作用的原因是该函数的返回类型是 TravelGuideViewModel 而不是 Enumerable。

尝试类似...

```
public TravelGuideViewModel Asia()
{
  var countries = _IGCD.DisplayCountriesOfTheWorldDetails()
       .Where(a =>a.strCountryContinent == "Asia).FirstOrDefault();
      return new TravelGuideViewModel(countries);
} 
```

为了让 View 可以访问某些东西，ViewModel 必须包含一个指向它的指针。将 ViewModel 视为您的 View 试图喝掉的杯子。不是饮料本身。很方便，但如果你不把它填满的话，就没有什么好处了。

# c - C linux错误中的下标值既不是数组也不是指针也不是向量

> ID：14938384
> 
> 赞同：0
> 
> 时间：2013-02-18T14:16:50.430
> 
> 标签：c, linux, ubuntu

这是在 C 中初始化 2D 字符数组的代码 该数组是 3X3 的字符 我在 ubuntu 上使用 Eclipse C/C++ IDE，当使用此函数时，GCC 输出如下错误： ***下标值既不是数组也不是指针，也不是vector*** tis error 是什么意思，谁能帮帮我，提前谢谢:)

```
void init(char* ptr)
{
    int i=0;
    int j=0;
    for(i=0;i<3;i++)
    {
        for(j=0;j<3;j++)
        {
            *ptr[i][j]=' ';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:18:32.920

应该定义为`char** ptr`的参数`init()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:37:04.710

该函数无法猜测数组的大小，但由于`c`您可以自己进行操作（2 个选项）：

```
void initA(char* ptr, int totalSize)
{
    int i=0;
    int j=0;
    for(i=0;i<totalSize;i++)
    {
        *ptr[i]=' ';
    }
}

void initB(char* ptr, int sizeX, int sizeY)
{
    int i=0;
    int j=0;
    for(i=0;i<sizeX;i++)
    {
        for(j=0;j<sizeY;j++)
        {
            *ptr[(i * sizeY) + j]=' ';
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:19:03.127

你在 init 中只传递了一个指针。如果是 3x3，那么您需要将签名更改为：

```
 void init(char **ptr){ ... } 
```

在访问您的指针时，可以：

```
ptr[i][j] = ''; 
```

或者

```
(*(ptr[i])+j) = ''; 
```

或者

```
(*(*(ptr+i))+j) = ''; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:20:55.023

`ptr`是一个`pointer`不。所以你应该使用或`char``char[][]``**ptr``char (*ptr)[size_of_2nd_dimension]`

或简单：

```
void init(char (*ptr)[size2]) <-----
{
    int i=0;
    int j=0;
    for(i=0;i<3;i++)
    {
        for(j=0;j<3;j++)
        {
            ptr[i][j]=' ';
        }
    }
} 
```

# javascript - 将数据从 html 发布到远程 asp.net 服务器 (.aspx.vb)

> ID：14938386
> 
> 赞同：0
> 
> 时间：2013-02-18T14:17:05.390
> 
> 标签：javascript, asp.net, html, vb.net, jquery

我有`.html`一个引用远程 javascript 文件的页面`Data.js`。其中`Data.js`有一个函数调用`navigator.appName`并将生成的值分配给我页面`HiddenField`中已经定义的值。`.html`

**页面.html**

```
 <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>
        <script type="text/javascript" src="http://server.com/Data.js" ></script> 
    </head>
    <body style = "font-family:Arial; font-size:10pt" onload="Execution();">
    <form id="form1">
    <div>
        <input type="hidden" id="Hidden2" />
        </div>
        </form>
    </body>
    </html> 
```

**数据.js**

```
function Myfunction()
{
var val = navigator.appName;
document.getElementByID('Hidden2').value = val
} 
```

我还有另一个功能可以将`Hidden2`值发布到远程服务器，以便将其存储在数据库中，如下所示：

```
 function POSTHidden() {
        $.ajax({
            type: "POST",
            url: "http://server.com/VB.aspx/GETHidden",
            data: '{name: "' + $("#Hidden2")[0].value + '" }',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: OnSuccess,
            failure: function (response) {
                alert(response.d);
            }
        });
    }
function OnSuccess(response) {
    alert(response.d);
} 
```

第三个函数执行第一个函数，`MyFunction();`然后执行第二个函数`POSTHidden();`，如下所示：

```
function Execution()
{
myFunction();
POSTHidden();
} 
```

现在我`VB.aspx`有一个`WebMethod`调用`GETHidden`它基本上将一个字符串作为参数传递并将其存储在数据库中，如下所示：

```
<System.Web.Services.WebMethod()> _
Public Shared Function GETHidden(ByVal value As String) As String
Dim value = String.Empty
Dim str = value.Split(New Char() {" "c})
Dim conn As String

conn = ConfigurationManager.ConnectionStrings("connStr").ConnectionString
Dim sqlcon As New SqlConnection(conn)

Try
sqlcon.Open()
Dim cmd = New SqlCommand("Insert into table (Record1) values (@param)", sqlcon)
cmd.Parameters.AddWithValue("@param", value)
cmd.ExecuteNonQuery()
cmd.Dispose()
sqlcon.Close()

Catch ex As Exception

End Try
End Function 
```

**仅**当页面与根据此[帖子](https://stackoverflow.com/questions/5049635/how-to-send-data-to-remote-server-using-javascript)生成或位于`.html`同一域中时，上述所有内容才有效。当我尝试将我通常上传到的域移出并将其上传到另一个域时，当打开 时，它不起作用，而如果它在同一个域名中则它起作用。我想要实现的是，要让文件位于任何地方并且在运行时，从引用收集的数据应该发布到远程服务器并存储在数据库中。因此，`ajax request``VB.aspx``.html``.html``.html``Data.js``.html`页面应该在任何地方远程工作（尽管它位于域中或是否在本地 PC 上），并且数据应该被传递或发布到远程服务器（通过 ajax 请求或任何可以解决问题的 POST 请求），以便`Hidden2`可以存储在数据库中。请记住，浏览器兼容性和多个用户同时打开页面（对服务器的多个发布请求）。任何建议或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T14:25:53.267

您必须在服务器端指定访问控制标头来处理跨域请求

```
Access-Control-Allow-Headers 
```

HTTP 访问控制 (CORS)

参考这些。与其他相比，它在.net 中有点棘手

[http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api)

[http://patelshailesh.com/index.php/cross-domain-asp-net-web-api-call-using-ajax](http://patelshailesh.com/index.php/cross-domain-asp-net-web-api-call-using-ajax)

# java - 在 java swing 中添加一个表

> ID：14938387
> 
> 赞同：1
> 
> 时间：2013-02-18T14:17:05.007
> 
> 标签：java, swing, layout, jtable, jpanel

我已经有一个面板，我在其中添加了按钮和一个文本区域。现在我需要在它下面显示一个表格。面板的布局是 AbsoluteLayout，如果我使用以下方法给表格充气，它会显示为空

```
 String data[][] = { { "vinod", "BCA", "A" }, { "Raju", "MCA", "b" },
                { "Ranjan", "MBA", "c" }, { "Rinku", "BCA", "d" } };

        String col[] = { "Name", "Course", "Grade" };
        JTable table = new JTable(data, col);
        table.setLocation(25,343);
        panel.add(table, BorderLayout.CENTER); 
```

但是，当我使用 setbounds 时，表格显示还可以，但它占用的空间超过了所需的空间，并且这些行没有显示在空白空间中，而且看起来很糟糕。有谁知道如何仅设置表格的 x,y 位置并保留其余位置（宽度和高度以适应所需的内容）

```
String data[][] = { { "vinod", "BCA", "A" }, { "Raju", "MCA", "b" },
        { "Ranjan", "MBA", "c" }, { "Rinku", "BCA", "d" } };

String col[] = { "Name", "Course", "Grade" };
JTable table = new JTable(data, col);
table.setBounds(25,343,122,122);
panel.add(table, BorderLayout.CENTER); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T14:30:28.260

*   [不要使用 AbsoluteLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，导致调整大小等问题。

*   将[JTable 放到 JScrollPane](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)中，不要使用[JPanel 作为 JTable 的容器](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)

*   阅读有关[如何使用 JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)的 Oracles 教程，

*   [在这个论坛上询问、回答和描述](https://stackoverflow.com/questions/tagged/java+swing+jtable)所有重要的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:21:15.513

```
JFrame frame = new JFrame();
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.getContentPane().setLayout(new BorderLayout());
frame.add (Box.createVerticalStrut(343), BorderLayout.NORTH);
frame.add (Box.createHorizontalStrut(25), BorderLayout.WEST);
frame.add (new JTable (5, 5), BorderLayout.CENTER);
frame.pack();
frame.setVisible(true); 
```

# c# - 删除使用来自 mdb(MS ACCESS) 的 DataSource 的列表框项

> ID：14938391
> 
> 赞同：1
> 
> 时间：2013-02-18T14:17:11.247
> 
> 标签：c#, ms-access, listbox, datasource

我创建了一个 winform 程序，并在我的表单中有一个列表框和删除按钮。我的列表框使用来自 .mdb (Microsoft Access) 文件的数据源/数据绑定。这是我现在使用的删除按钮代码：

```
private void deletepcsetting_Click(object sender, EventArgs e)
{
    DialogResult dialogResult = MessageBox.Show("Are you sure want to delete PC No " + listBox1.SelectedItem + "?", this.Text, MessageBoxButtons.YesNo, MessageBoxIcon.Warning);
    if (dialogResult == DialogResult.Yes)
    {
        PCNo selectedPCNo = (PCNo)listBox1.SelectedItem;
        if (selectedPCNo != null)
        {
            OleDbCommand cmd = new OleDbCommand("DELETE FROM ClientListing WHERE PCNO = " + listBox1.SelectedItem + "", GetConnection());
            _pcno.Remove(selectedPCNo);
        }
        GetConnection().Close();
    }
} 
```

忽略消息框，上面的代码成功从我的列表框中删除了该项目，但没有从数据库（mdb）中删除，所以这件事给我带来了一个问题，因为重新打开表单后我注意到之前已删除的项目仍然存在（它只是从列表框中删除而不是 mdb）。

我也尝试将删除命令从更改为`" + listBox1.SelectedItem + "`，`"selectedPCNo"`但它没有用，有谁知道如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:21:52.910

命令执行器在哪里...？

只需添加以下行并尝试相同的操作....

```
MessageBox.Show(ListBox1.SelectedItem); //Check whether the Selected Item Rendered or NOT

OleDbCommand cmd = new OleDbCommand("DELETE FROM ClientListing WHERE PCNO = " + listBox1.SelectedItem + "", GetConnection());
cmd.ExecuteNonQuery() // it Executes the query...
_pcno.Remove(selectedPCNo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:21:24.827

确保您有 listBox1.SelectedItem 返回正确的值，您是否尝试过使用 SelectedValue 代替？

# c# - 如何在 Windows Phone 8 中访问 UserControl 的组件/元素

> ID：14938396
> 
> 赞同：2
> 
> 时间：2013-02-18T14:17:16.700
> 
> 标签：c#, xaml, windows-phone-8, windows-phone, longlistselector

我为我的 windows phone 8 开发了 UserControl，如下所示。

```
<UserControl x:Class="SpinrWindowsMobile.UserControls.ProgressiveLongListSelector"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"

    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    d:DesignHeight="480" d:DesignWidth="480">

    <Grid x:Name="LayoutRoot" Background="{StaticResource PhoneChromeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
        </Grid.RowDefinitions>
        <phone:LongListSelector Grid.Row="0"  Name="longlistselector">
        </phone:LongListSelector>
        <StackPanel Grid.Row="1">
            <ProgressBar Name="listProress" IsIndeterminate="True"></ProgressBar>
            <TextBlock Name="ProgressText" Text="Loading..."></TextBlock>
        </StackPanel>
    </Grid>
</UserControl> 
```

正如您在上面的 xaml 中看到的，我在网格控件中使用**了 LongListSelector 和 StackPanel 。**我在我的 MainPage.xaml 中使用此控件，如下所示。

```
<phone:PhoneApplicationPage
    x:Class="SpinrWindowsMobile.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:UserControls="clr-namespace:SpinrWindowsMobile.UserControls"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True">
    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">     
            <UserControls:ProgressiveLongListSelector>

            </UserControls:ProgressiveLongListSelector>

     </Grid>    
</phone:PhoneApplicationPage> 
```

到目前为止，这很好，但我想做如下的事情。

```
 <UserControls:ProgressiveLongListSelector>
                  <UserControls:ProgressiveLongListSelector.longlistselector 
                 ItemsSource="Binding" ItemTemplate="{staticresource myTemplate}">
                  </UserControls:ProgressiveLongListSelector.longlistselector>
    </UserControls:ProgressiveLongListSelector> 
```

如何访问作为**UserControl****的元素/组件**的longlistselector ？这样做的好处是。对我来说，这种东西是今天的要求。**`I can directly set the LongListSelector Properties in the xaml(in which i am embedding My usercontrol) itself`**

 **谁能指导我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:12:34.083

由于您正在扩展和修改 LongListSelector，因此我建议对 LongListSelector 进行子类化和重新模板化，而不是将其放在 UserControl 中。这将允许您访问 LongListSelector 上的所有现有属性和方法，并像使用 LongListSelector 一样使用新的 ProgressiveLongListSelector。

首先，您可以创建一个继承 LongListSelector 的新类：

```
public class ProgressiveLongListSelector : LongListSelector {

    public ProgressiveLongListSelector() {
        DefaultStyleKey = typeof(ProgressiveLongListSelector);
    }
} 
```

注意**DefaultStyleKey**。这就是新控件模板的来源。

现在您可以将以下样式放置在您的 App.xaml 资源中。请注意，*TargetType*是*ProgressiveLongListSelector*。这就是**DefaultStyleKey**将如何找到您的新默认样式。

```
 <Style TargetType="phoneApp2:ProgressiveLongListSelector">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="phoneApp2:ProgressiveLongListSelector">
                    <Grid Background="{TemplateBinding Background}" d:DesignWidth="480" d:DesignHeight="800">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="ScrollStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="00:00:00.5" />
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Scrolling">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="VerticalScrollBar" />
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="NotScrolling" />
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid Margin="{TemplateBinding Padding}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="auto" />
                            </Grid.ColumnDefinitions>
                            <ViewportControl x:Name="ViewportControl" HorizontalContentAlignment="Stretch" VerticalAlignment="Top" />
                            <ScrollBar x:Name="VerticalScrollBar" Grid.Column="1" Margin="4,0,4,0" Opacity="0" Orientation="Vertical" />
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

此样式/模板是默认 LongListSelector 模板（从 Blend 中提取）的副本。从这里，您可以将 UserControl 中的其他元素（例如 ProgressBar 和 TextBlock）添加到模板中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:41:44.097

您可以做的是使用 DependencyProperty 机制公开 UserContorl 的属性。然后，您可以从使用该 UserControl 的页面中将它们设置为 XAML。我不确定您是否要公开 VisualTree 的所有位，因为这可能会在将来发生变化。但是您可以公开一些间接影响 UserControl 行为的属性。

这是一个如何做到这一点的示例：

（这个例子取自我的代码，但我想你可以弄清楚如何适应它）

首先，您在 UserControl 中声明一个 DependencyProperty：

```
public partial class MyUserControl : UserControl
{
    public bool IsEditingMode
    {
        get { return (bool)GetValue(IsEditingModeProperty); }
        set { SetValue(IsEditingModeProperty, value); }
    }

    public static readonly DependencyProperty IsEditingModeProperty =
        DependencyProperty.Register("IsEditingMode", typeof(bool), typeof(MyUserControl), new PropertyMetadata(false, IsEditingModeChanged));
}

private static void IsEditingModeChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    // this will be called when someone would set the exposed property to some new value
} 
```

接下来，将 MyUserControl 添加到某个 Page 并设置该属性：

```
<phone:PivotItem Header="{Binding Path=LocalizedResources.MyPivotHeader, Source={StaticResource LocalizedStrings}}" Margin="0">
    <my:MyUserControl x:Name="People" IsEditingMode="True"/>
</phone:PivotItem> 
```

请注意`IsEditingMode`XAML 中的设置方式。当然，您也可以从代码中设置它，`public bool IsEditingMode`使用`IsEditingModeProperty`.**

# java - Double、float 和 long 声明

> ID：14938397
> 
> 赞同：-4
> 
> 时间：2013-02-18T14:17:21.257
> 
> 标签：java, floating-point

我想知道为什么在Java中它通过执行以下操作会产生编译错误：

```
double d34324.34; //error
float f3342.34; //error 
```

另一方面：

```
long L32423424; // works fine
double D32432424; // works fine 
```

所以基本上我想知道为什么只有浮点值的语法存在这种限制。

我知道如果将字母标识符（D，d，F，f）放在数字的末尾，它可以工作，但我仍然想知道为什么另一种形式不适用于浮点。只是好奇，我知道如果我输入 3443.43434f 它可以工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T14:20:09.340

```
double d34324.34 
```

不分配值，`34324.34`但尝试使用无效名称声明变量`d4324.34`。

你可能想要

```
double myDouble = 34324.34d;
long myLong = 34324l; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T14:19:18.290

点不是标识符（变量名、方法名、类名、参数名等）的有效字符。它在 Java 语言规范的第[3.8节中是正确的。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)所以这永远不会奏效：

```
double d34324.34;  // error
float f3342.34;    // error 
```

Java 中的有效标识符只能包含字母、数字、“_”和“$”，并且不能以数字开头。请注意，这不包括点。

为什么要用数字命名变量？你确定你的意思不是这样吗？：

```
double d = 34324.34;
float  f = 3342.34f; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T14:20:08.243

这是因为它是一个无效的变量声明（语法错误）——只能有字母、数字和下划线；并且不能以数字开头

请参阅此以了解[java 中的有效变量名](http://www.cafeaulait.org/course/week2/08.html)

> 变量名称可以包含任何字母字符或数字以及下划线 _。您可以为变量命名的主要限制是它们不能包含任何空格。变量名不能以数字开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:21:03.490

如果 Value 是 float 还是 double 以使用以 -d 和 -f 结尾的数字来识别 JVM。例如

```
0.04f(float) and 0.045d(double) 
```

我认为 。是错误的根本原因。谢谢

# c# - Ninject：也在库中使用配置

> ID：14938398
> 
> 赞同：0
> 
> 时间：2013-02-18T14:17:30.300
> 
> 标签：c#, ninject, ninject.web.mvc

我从 Ninject 开始，我在 MVC 4 场景中使用它，并在“NinjectWebCommon”中配置了我的绑定。一切正常。

现在我想在一个库中以某种方式从 MVC 应用程序中获取具有配置的内核。

例如：在我的 MVC 项目中，我有一个带有属性的类“BaseController”

```
[Inject]
public IKernel Ninject { get; set; } 
```

完美运行，这意味着在从 BaseController 继承的控制器中的每个操作中，属性“Ninject”都是很好的实例而不是 null！

现在我的外部库中有类“NinjectProxy”，具有完全相同的属性，但每次我创建一个新的“NinjectProxy”实例时，道具“Ninject”都是空的！

```
public class NinjectProxy
{
    [Inject]
    public IKernel Ninject { get; set; }

    public T Resolve<T>()
    {
        return Ninject.Get<T>();
    }
} 
```

我的完整解决方案如下所示：

```
MVC app
- Reference on Common.dll and Ninject
- Contains ControllerBase
Common.dll
- This project contains the NinjectProxy class and have a reference on Ninject
- Here I want somehow get the kernel config that I configured in the mvc app to resolve dependecies
Implementation.dll
- References on Common.dll and Ninject 
```

该库在“NinjectWebCommon”中加载：

```
kernel.Load(Assembly.Load("lib")) 
```

如果这很重要。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:45:20.083

您正在使用手动创建实例`new`此对象不由 ninject 处理，并且永远不会获得依赖项。

将实例注入某处，或使用[工厂](https://github.com/ninject/ninject.extensions.factory/wiki)由 ninject 创建

但是鲁本是绝对正确的，您正在遵循一种无论如何都不应该使用的模式。而是在引导程序中完全配置 Ninject。要么使用与整个项目匹配的约定，要么引用所有必需的程序集并为它们设置绑定。

# erlang - 在孩子被主管重新启动后使用相同的参考？

> ID：14938404
> 
> 赞同：1
> 
> 时间：2013-02-18T14:17:59.147
> 
> 标签：erlang, erlang-supervisor

我有一个主管可以启动作为数据库服务器的动态子级。当数据库服务器被异常终止时，主管重新启动它，这是它应该的。

但我在 shell 中有一个对数据库服务器的引用，如下所示：

```
Ref = {Pid, Ref} 
```

例如 {<0.52.0>,#Ref<0.0.0.146>}

当我想用我的一个数据库服务器做某事时，它看起来像这样

```
database_server:write(Country,Capital,Ref). 
```

例如

```
database_server:write(England,London,Ref). 
```

因此，在该孩子重新启动后，我希望能够使用相同的 Ref，即使 Pid 在重新启动时很可能发生了变化。

在网上找不到任何好的解决方案：/

谢谢！

# asp.net - SQL CE 天蓝色连接

> ID：14938406
> 
> 赞同：2
> 
> 时间：2013-02-18T14:18:04.033
> 
> 标签：asp.net, azure, sql-server-ce, database-connection, azure-sql-database

我正在使用 azure 发布一个 asp.net 应用程序，当我在本地发布时它工作正常，但在 Azure 上，与数据库相关的所有内容都没有显示并得到“页面无法显示，因为发生了内部服务器错误。”

想知道我的连接字符串是否有问题。

[http://webly.azurewebsites.net/](http://webly.azurewebsites.net/)

App_Data 文件夹与 webly_data.sdf Bin: webly.dll ... Simple.Data.SqlCe40.dll

```
<connectionStrings>
    <add name="webly" connectionString="Data Source=|DataDirectory|\webly_data.sdf" providerName="System.Data.SqlServerCe.4.0" />
</connectionStrings> 
```

我正在使用 sdf，但不知道 azure 如何引领...

- - - 问题解决了 - - - -

![](../Images/07da3f396c06d76146642f1bc9a60cd7.png)

我做了以下事情：

1.  配置网站（在 Azure 管理中）
2.  将连接字符串作为自定义放在那里

不知道为什么需要这样做，也许它忽略了我的 web.config 中的连接字符串....感谢谁在这里回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:59:54.323

![](../Images/07da3f396c06d76146642f1bc9a60cd7.png)

我做了以下事情：

1.  配置网站（在 Azure 管理中）
2.  将连接字符串作为自定义放在那里

不知道为什么需要这样做，也许它忽略了我的 web.config 中的连接字符串....

# c# - c#.net 中 (string, byte[]) 组合的列表

> ID：14938416
> 
> 赞同：-1
> 
> 时间：2013-02-18T14:18:36.453
> 
> 标签：c#, asp.net

我想在 c#.net 中使用 (string, byte[]) 的组合制作列表。

我确实想存储多个带有名称和图像的图像...例如，列表，但我不知道如何动态存储和检索要列出的数据！

存储数据之类的东西..

```
("Blue hills", byte[]), ("Sunset", byte[]), ("Winter", byte[]) 
```

请帮我操作类似上面的数据..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:20:53.767

您应该使用这些信息创建一个数据结构（例如一个新类）。例如：

```
public class Image
{
    private readonly byte[] data;
    private readonly string name;

    public string Name { get { return name; } }

    public Image(string name, byte[] data)
    {
        this.name = name;
        this.data = data;
    }

    public Stream GetDataStream()
    {
        return new MemoryStream(data, false);
    }
} 
```

然后你会使用一个`List<Image>`. 请注意，我使用 a`MemoryStream`作为字节数组的有用只读视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T14:22:45.327

你要么想要

```
Dictionary<string, byte[]> 
```

如果字符串值是唯一的，或者

```
List<Tuple<string, byte[]>> 
```

如果不是。或者，您也可以编写自己的类来保存`string`和`byte[]`

```
public class MyClass
{
    public string Name { get; set; }
    public byte[] Data { get; set; }
} 
```

并创建一个`List`你的班级。

```
List<MyClass> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:22:45.900

您可以简单地使用字典。您的“姓名”似乎是关键：

```
Dictionary<String, Byte[]> myDictionary = new Dictionary<String, Byte[]>(); 
```

如果你想访问某个值，那么你就有了不需要迭代的优势。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:22:59.097

您可以按照 Jon 所说的创建一个类或使用一个名为 KeyPairValue 的类，而不是创建一个数据结构

# html - 为什么 max-width 不能解决这个问题？

> ID：14938428
> 
> 赞同：23
> 
> 时间：2013-02-18T14:19:18.967
> 
> 标签：html, button, css

使用普通的旧 CSS，为什么 'max-width' 不能在以下情况下工作：

```
button {
  text-align: center;
  max-width: 540px;
  height: auto;
  display: block;
  padding: 10px 0;
  margin: 0 auto;
  border: none;
} 
```

此元素的包装器：

```
#wrapper {
  max-width: 1024px;
  overflow: hidden;
  position: relative;
  margin: 0 auto;
  padding: 0 50px;
  text-align: center;
} 
```

**编辑**

添加到 jsfiddle 的代码：http: [//jsfiddle.net/BXdrG/](http://jsfiddle.net/BXdrG/)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-18T15:22:30.457

为了`max-width`正常工作，您的元素首先需要一个特定的`width`. 使用**100%**来实现你想要的。看这里：

[http://jsfiddle.net/QsHa9/](http://jsfiddle.net/QsHa9/)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-02-18T14:37:48.137

啊，好吧，我误解了它的用途。为了获得一个不会拉伸到大尺寸的流畅按钮，我添加了以下内容：

```
width:100%;
max-width: 540px; 
```

感谢评论者！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-18T15:12:48.390

```
button {
  text-align: center;
  max-width: 540px;
  height: auto;
  display: block;
  padding: 10px 0;
  margin: 0 auto;
  border: none;

  width:100%; /* you forgot this */
} 
```

# c - 如何在不解码的情况下使用 OpenCV 捕获帧？

> ID：14938431
> 
> 赞同：2
> 
> 时间：2013-02-18T14:19:38.723
> 
> 标签：c, opencv

我正在使用 Raspberry PI 上的 C 项目，我正在通过网络发送帧，它工作正常，除了 RP 中的解码速度太慢，这使得过程非常慢，我需要让它尽可能实时，所以我需要在不解码的情况下发送帧，然后在服务器上对其进行解码。

这是我的代码，这是我从 RP 上的摄像头捕获帧的方式：

```
while ( 1 ) {
     // Get one frame
     if(!cvGrabFrame(capture)){              
    printf("Could not grab a frame\n");
    exit(0);
  }
     IplImage* frame = cvRetrieveFrame( capture,0 );
     if ( !frame ) {
       printf("no frame");
       continue;
     } 
```

我搜索了很多关于如何在不解码的情况下从 Cam 抓取帧的信息，我的 cam 是带有 h264 编码的罗技 c920，它们是否有任何内置功能可以做到这一点。

# c# - 使用 CheckedListBox 多列

> ID：14938432
> 
> 赞同：0
> 
> 时间：2013-02-18T14:19:39.577
> 
> 标签：c#, winforms, checkedlistbox

我正在使用一个`checkedlistbox`with just `one column`。但是现在，我需要一个`validate`选中项目的字段。我用了`MultColumn = True`of`Checkedlistbox`但我不能。

我需要的是让用户选择一个项目列表，然后在旁边的另一个字段中说明它是否是一个`Required`字段。例如

`[ ]Name [ ]Required`
`[ ]birthday [ ]Required`

我需要一种方法（可能使用除 之外的其他工具`checkedlistbox`）来说明该字段是否`Required`...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:33:25.477

我会考虑为此使用您自己的 UserControl。您可以使用两个复选框轻松创建自定义控件。

我有一个`ValidatedCheckedListboxControl : System.Windows.Forms.UserControl`里面有两个checkedListbox。您可以添加一个公共方法来添加到您的字段列表（例如 fieldsCheckedList），这样您也可以将另一个添加到您的“必须是”列表中。

还有另一种方法`hasToBe(int element){ return hasToBeList[element].Checked);}`

# java - 为 Java 骰子游戏创建类时遇到问题

> ID：14938433
> 
> 赞同：0
> 
> 时间：2013-02-18T14:19:39.930
> 
> 标签：java, class, constructor, implementation, dice

几个月前我刚开始学习 Java，我被设定了一个任务，用 Java 创建一个简单的骰子游戏。第一个练习是实现一个 Die 类，具有以下实例变量、构造函数和方法：

```
private int faceValue; // Current face value of die
private int sides; // Number of sides
private Random generator;
public Die(int s){}
public void throwDie(){}
public int getFaceValue(){}
public String toString() {} 
```

在我之前编写的纸牌游戏中，我使用了：

```
public static final String suits[] = { "Clubs", "Spades", "Hearts", "Diamonds"}; 
```

要设置我的西装的值，我能否对我的“faceValue”变量做同样的事情，只将它们设置为 1、2、3、4、5 和 6？

感谢阅读，希望这里有人可以提供帮助，实现类和构造函数是我似乎正在努力的事情！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:31:03.200

这看起来很像一个家庭作业问题，所以我不会给你一个实现，而是一个想法。（如果不是，那么说出来，我可以相应地调整。）

我认为您传递给构造函数的参数可能应该是 Die 中的边数，这意味着最大边数是可变的。您不想动态创建数组或枚举，因为我认为您想要的唯一面值是整数，而这比必要的工作更多。

您可能希望将该输入值分配给代表它的变量，并使用它来创建一个在 0 和该数字之间缩放的数字生成器。

# c# - Windows 窗体在执行时抛出错误

> ID：14938436
> 
> 赞同：0
> 
> 时间：2013-02-18T14:19:47.393
> 
> 标签：c#, winforms, connection-string

我开发了一个 Windows 窗体应用程序以在台式计算机上运行。

这是用 C# 编写的简单系统，它使用 Microsoft 访问作为其数据库。

我几乎完成了代码，并准备创建安装文件以在其他系统上安装。

我确实创建了安装文件并安装在其中一个系统中，但不幸的是，该应用程序无法找到数据库并引发以下错误。 ![运行应用程序时出现错误消息](../Images/862549879128c15be65616ec47cc8489.png)

我已将数据库文件放在项目的根文件夹中。

![在此处输入图像描述](../Images/5877e693e66e0aed67ebcc8519048292.png)

我在整个应用程序中提供了以下连接字符串。

**在 App.Config 中**

```
configuration>
    <configSections>
    </configSections>
    <connectionStrings>
        <add name="Database" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\Database.accdb;Persist Security Info=False;"
            providerName="System.Data.OleDb" />
 </connectionStrings>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
</configuration> 
```

**在应用程序类中**

```
string connString = ConfigurationManager.ConnectionStrings["Database"].ConnectionString; 
```

这是我第一次创建安装文件，我不确定我错在哪里。

有人能找到我问题的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:18:27.610

您说安装程序时看到此错误。我认为安装文件夹中缺少配置文件（您正在从中读取连接字符串）。您的安装设置（输出文件、配置等）可能有问题。正如我在图片中看到的，您的整个项目都在`Program Files`文件夹中！这是选择整个源文件夹进行安装的证据！

您应该只选择`bin\Debug`文件夹进行安装，或者如果您使用的是 Visual Studio 部署项目，您应该选择`Project Output`文件夹中的`Program Files`文件。

# c# - 以编程方式从 Web 浏览器控件中删除 html 元素

> ID：14938437
> 
> 赞同：-2
> 
> 时间：2013-02-18T14:19:50.147
> 
> 标签：c#, webbrowser-control

我搜索谷歌，发现几行代码可以做到这一点。这是代码

```
using Microsoft.mshtml;
....
{
...
    // To Remove     
    HTMLDocumentClass htmldoc = wbCtrl.Document.DomDocument as HTMLDocumentClass;
    IHTMLDOMNode node = htmldoc.getElementById("xBar") as IHTMLDOMNode;
    node.parentNode.removeChild(node);
...
} 
```

我收到 mshtml 参考错误，但我从这个路径**C:\Program Files\Microsoft.NET\Primary Interop Assemblies 添加库并添加名为 Microsoft.mshtml.dll 的 dll**

但仍然有错误。所以帮我添加什么，结果我可以使用上面的代码。我正在运行我的应用程序 VS2010 IDE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:21:44.640

您最近问题的旧答案已重新发布，因为它适用：

```
//in class def
private bool firstTime;
//in method
bool firstTimeLcl = firstTime
firstTime = false;
if (firstTimeLcl)
{
//write header
} 
else
{
String.Replace(/*closing tags*/, "");
}
//write everything within body
//write closing tags 
```

# ios - Phonegap (cordova) 2.4.0 启动画面显示缩小

> ID：14938440
> 
> 赞同：3
> 
> 时间：2013-02-18T14:19:58.717
> 
> 标签：ios, cordova, splash-screen

我正在 iOS 上开发一个 phonegap 应用程序，并在带有 IOS 6.1 的 iPhone 4 上进行测试。我已经从启动文件夹中定义了所有启动屏幕，但这仍然无法按预期工作。首先，启动画面被正确加载，全尺寸，但是当加载指示器出现时，图像被缩小并显示为白色背景。它看起来很丑。如何解决这个问题？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:17:34.837

找到了一个“肮脏”的解决方案：

在 CDVViewController.m 中替换

```
 if (launchImageFile == nil) { // fallback if no launch image was specified
    if (CDV_IsIPhone5()) {
        // iPhone 5 or iPod Touch 6th-gen
        launchImageFile = @"Default-568h";
    } else {
        launchImageFile = @"Default";
    }
} 
```

和

```
if (launchImageFile == nil) { // fallback if no launch image was specified
    if (CDV_IsIPhone5()) {
        // iPhone 5 or iPod Touch 6th-gen
        launchImageFile = @"Default-568h";
    } else {
        launchImageFile = @"Default-568h"; //iphone5 image
    }
} 
```

但是寻找更好的解决方案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:53:26.690

似乎 Cordova 只在 iPhone 5 和 iPod 之间产生差异。虽然我可以找到 iPad 方向和匹配初始屏幕的逻辑，但我找不到旧 Retina iPhone + 甚至更旧的原始屏幕分辨率的功能。不小心漏掉了？

# objective-c - 在控制器之间传递数据

> ID：14938441
> 
> 赞同：0
> 
> 时间：2013-02-18T14:19:59.303
> 
> 标签：objective-c, uiimageview

我正在尝试将 URL 从 传输`UITableViewController`到`UIViewController`，但由于某种原因，图像没有`UIImageView`从提交的 URL 中显示。这是我的代码：

**表视图.m**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *url = @"http://www.macdigger.ru/wp-content/uploads/2013/02/Apple-Nokia-Samsung-1.jpg";

    ImageViewController *imageView = [[ImageViewController alloc] init];        
    [self.navigationController pushViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"imageViewController"] animated:YES];

    [imageView setDetailItem:url];

} 
```

**ImageViewController.m**

```
@interface ImageViewController ()
- (void)configureView;
@end

@implementation ImageViewController

- (void)setDetailItem:(id)newUrl
{
    NSLog(@"%@", newUrl);
    self.urlOfImage = newUrl;
    [self configureView];

}

- (void)configureView
{
        NSURL *url = [NSURL URLWithString:_urlOfImage];
        NSLog(@"%@",url); //There URL is normally displayed in the log
        NSData *data = [NSData dataWithContentsOfURL:url];
        UIImage *image = [UIImage imageWithData:data];
        _imageView.image = image;//And then the picture does not want to output
} 
```

在日志中显示传递的 URL（粗体）。事实证明，URL 本身被传递，但是`UIImageView`，不显示来自该 URL 的图像。

PPS**数据**以以下形式显示在日志中`"<ffd8ffe1 00184578 69660000 49492a00 08000000 00000000 00000000 ffec0011 4475636b 79000100 04000000 460000ff e1031b68 7474703a 2f2f6e73 2e61646f 62652e63 6f6d2f78 61702f31 2e302f00 3c3f7870 61636b65 74206265 67696e3d 22efbbbf 22206964...>"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:01:57.447

可能是因为 ViewController 尚未加载而出错，尝试检查它是否已在`setDetailItem`方法中加载，如果未加载 - viewDidLoad 中的 configureView：

```
- (void)setDetailItem:(id)newUrl
{
    NSLog(@"%@", newUrl);
    self.urlOfImage = newUrl;
    if ([self isViewLoaded]) {
        [self configureView];
    }

}

- (void)viewDidLoad 
{
    [super viewDidLoad];
    if (self.urlOfImage) {
        [self configureView]
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:16:44.810

你为什么不做另一个初始化器？

```
ImageViewController *imageView = [[ImageViewController alloc] initWithURL:urlToGo]; 
```

在 .m 文件中，在顶部：

```
@interface ImageViewController ()
@property (nonatomic, strong) NSURL *url;
@end

- (id)initWithURL:(NSURL *url){
   self = /* any kind of normal initialization, xib or storyboard */ [super init];
   if (self) {
       _url = url;
   }
}

- (void)viewDidLoad {
   [super viewDidLoad];
   [self configureView];
} 
```

# c++ - 静态函数

> ID：14938448
> 
> 赞同：0
> 
> 时间：2013-02-18T14:20:12.673
> 
> 标签：c++, eclipse, optimization, arduino

好吧，我已经为一个 arduino 程序制作了一个 ntp 服务器库。我想让我在 ntp lib 中制作的函数成为静态的，这样我就可以从其他类调用它们，而无需制作该 ntp 服务器类的对象。

我的问题是，当我一一制作静态类的函数和变量时（因为某些函数使用一些类变量），我发现自己将某个函数设为静态，然后整个库都会出错。整个库无法理解任何变量。我收到无法解析变量的错误我也收到错误说无法使用 NTP 类的函数，因为它们没有对象（但它是类的函数并且存在没有在另一个类中实现）。我会给你我的代码。

```
#ifndef NTPLIB_H_
#define NTPLIB_H_

#include "Arduino.h"
#include "SPI.h"
#include "IPAddress.h"
#include "EthernetUdp.h"
#include "Ethernet.h"
#include "DayNumber.h"

class NTPlib {

private:

public:
    static EthernetUDP  Udp;
    static DayNumber DN;

    static const int Gmt=2;
    static const unsigned int localPort = 8888;
    static const int NTP_PACKET_SIZE=48;

    static byte  packetBuffer[NTP_PACKET_SIZE ];

    unsigned long secsSince1900;
    unsigned long UnixTime;
    static unsigned long daysPassedInYear;
    static int utchour;
    static int lcthour;
    static int min;
    static int sec;
    static int year;
    static int month;
    static int date;
    static int dayOfWeek;

    NTPlib();
    static NTPlib getTime();
    static bool testNtpServer();
    void startEthernetAndUdp();
    unsigned long  static sendNTPpacket(IPAddress& address);

    virtual ~NTPlib();
};

#endif /* NTPLIB_H_ */ 
```

这是头文件，这是 .cpp 文件

```
#include "NTPlib.h"

NTPlib::NTPlib() {
    // TODO Auto-generated constructor stub

}

NTPlib NTPlib::getTime(){

    if (testNtpServer()){
        // We've received a packet, read the data from it
        Udp.read((unsigned char*)packetBuffer,NTP_PACKET_SIZE);  // read the packet into the buffer

        //the timestamp starts at byte 40 of the received packet and is four bytes,
        // or two words, long. First, extract the two words:
        unsigned long highWord = word(packetBuffer[40], packetBuffer[41]);
        unsigned long lowWord = word(packetBuffer[42], packetBuffer[43]);

    // combine the four bytes (two words) into a long integer
        // this is NTP time (seconds since Jan 1 1900):
        unsigned long secsSince1900 = highWord << 16 | lowWord;
        Serial.print("Seconds since Jan 1 1900 = " );
        Serial.println(secsSince1900);
        // now convert NTP time into everyday time:
        // Unix time starts on Jan 1 1970\. In seconds, that's 2208988800:
        const unsigned long seventyYears = 2208988800UL;
        // subtract seventy years:
        unsigned long UnixTime = secsSince1900 - seventyYears;

        sec = UnixTime % 60;
        //calc min
        min = (UnixTime/60)%60;
        //calc hour
        utchour = (UnixTime/3600)%24;
        lcthour = utchour + Gmt;
        //day of the week
        dayOfWeek = (((UnixTime/86400UL) + 3) % 7) + 1;//setting first day Sunday=1

        // print Unix time:
        Serial.print("Unix time = ");
        Serial.println(UnixTime);

        Serial.print("the day is : ");
        Serial.println(dayOfWeek);

        Serial.print("The LTC time is ");
        Serial.println(lcthour);

        unsigned long UnixTimeToDays=UnixTime/86400UL;
        Serial.println(UnixTimeToDays);
        unsigned long calcDaysInYears=0;
        int calcYear=1970;
        while((calcDaysInYears+= (DN.checkLeapYear(calcYear)? 366:365)) <= UnixTimeToDays){
            calcYear++;
        }
        //setting year
        year = calcYear;
        Serial.print("the year is :");
        Serial.println(year);

        //calculating days in this year
        calcDaysInYears -= (DN.checkLeapYear(calcYear)? 366:365);
        daysPassedInYear = UnixTimeToDays - calcDaysInYears;
        Serial.println(daysPassedInYear);

        //set Daynumber one year loop
        DN.Days1YearLoop = daysPassedInYear+1;
        //calculating date and month
        static const uint8_t monthDays[]={31,28,31,30,31,30,31,31,30,31,30,31};

        int calcMonth;
        int monthLength;

        for (calcMonth=0; calcMonth<12;calcMonth++){
            if (DN.checkLeapYear(year)){
                monthLength = (calcMonth==1) ? 29: 28;
            }else{
                monthLength = monthDays[calcMonth];
            }
            if ( daysPassedInYear > monthLength){
                daysPassedInYear -= monthLength;
            }else{
                break;
            }
        }
        month = ++calcMonth;
        date = ++daysPassedInYear;
        Serial.print("Month is : ");
        Serial.print(month);
        Serial.print(" Date is: ");
        Serial.println(date);

        // print the hour, minute and second:
        Serial.print("The UTC time is ");       // UTC is the time at Greenwich Meridian (GMT)
        Serial.print(utchour); // print the hour (86400 equals secs per day)
        Serial.print(':');

        if ( min < 10 ) {
        // In the first 10 minutes of each hour, we'll want a leading '0'
          Serial.print('0');
        }
        Serial.print(min); // print the minute (3600 equals secs per minute)
        Serial.print(':');

        if ( sec < 10 ) {
         // In the first 10 seconds of each minute, we'll want a leading '0'
           Serial.print('0');
        }
        Serial.println(sec); // print the seconds

        return NTPlib();

    }else{
    //error  ntp time from DS1307
        Serial.println("RTC");
        return NTPlib();
    }
}

unsigned long NTPlib::sendNTPpacket(IPAddress& address){

  // set all bytes in the buffer to 0    
  memset(packetBuffer, 0, NTP_PACKET_SIZE);   
  // Initialize values needed to form NTP request    
  // (see URL above for details on the packets)    
  packetBuffer[0] = 0b11100011;   // LI, Version, Mode    
  packetBuffer[1] = 0;     // Stratum, or type of clock    
  packetBuffer[2] = 6;     // Polling Interval    
  packetBuffer[3] = 0xEC;  // Peer Clock Precision    
  // 8 bytes of zero for Root Delay & Root Dispersion    
  packetBuffer[12]  = 49;    
  packetBuffer[13]  = 0x4E;    
  packetBuffer[14]  = 49;    
  packetBuffer[15]  = 52;    
  // all NTP fields have been given values, now
  // you can send a packet requesting a timestamp:    
  Udp.beginPacket(address, 123); //NTP requests are to port 123    
  Udp.write(packetBuffer,NTP_PACKET_SIZE);    
  Udp.endPacket();

}

void NTPlib::startEthernetAndUdp(){

//declaration of the mac address of ethernet shield
    byte mac[]= {0x00,0xAA,0xBB,0xCC,0xDE,0x02};   
    if (Ethernet.begin(mac) == 0) {   
        Serial.println("Failed to configure Ethernet using DHCP");   
        // no point in carrying on, so do nothing forevermore: 
        //for(;;)   
        //  ;  
    }

    Udp.begin(localPort);
}

bool NTPlib::testNtpServer(){

    byte serverslist[4][4]={
            193,93,167,241,
            129,215,160,240,
            138,195,130,71,
            132,163,4,101
    } ;
    IPAddress ntpServers(serverslist[0]);
    sendNTPpacket(ntpServers);
    int x=0;
    delay(1000);

    while(!Udp.parsePacket() && x<=3){
            x++;
            IPAddress ntpServers(serverslist[x]);
            Serial.println("ton pairneis");
            sendNTPpacket(ntpServers);
            delay(1000);
        }

    if (x<=3){
        Serial.print("leitoyrgei o server ");
        Serial.println(++x);
        return true;
    }else{
        return false;
    }
}

NTPlib::~NTPlib() {
    // TODO Auto-generated destructor stub
} 
```

起初我将gettime函数设为静态，当然还有所有相关变量。之后我不得不将testNTPServer函数设为静态，而我只有1个错误。错误是

> 说明资源路径位置类型无法在没有对象 NTPlib.cpp /NTP/lib 第 191 行 C/C++ 问题的情况下调用成员函数 'long unsigned int NTPlib::sendNTPpacket(IPAddress&)'

这个函数是它不应该需要对象的类的函数。同样，当我执行此函数时，静态所有 cpp 都会为类的所有变量提供未定义的引用。一个示例是这样的：

> 说明 资源路径位置 键入更多未定义的对 `NTPlib::packetBuffer' 的引用遵循 NTPlib.cpp /NTP/lib 第 149 行 C/C++ 问题

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:38:18.693

在 C++ 中，当您在类声明中声明静态数据成员时，您还必须在源文件中为这些数据成员提供定义：

头文件：

```
class C
{
    static int MyInt;
}; 
```

源文件：

```
int C::MyInt = 0; 
```

# ninject - Ninject.Extensions.Wcf.SelfHost 与 nuget？

> ID：14938450
> 
> 赞同：0
> 
> 时间：2013-02-18T14:20:17.167
> 
> 标签：ninject, nuget, ninject-extensions

我从 nuget 中提取了最新的**Ninject.Extensions.Wcf** (3.0.0.5)，但是

**SelfHost 示例中使用的 NinjectWcfConfiguration**类型不在那个包中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:00:20.867

不，这不对。它在`Ninject.Extension.Wcf.SelfHost`3.0.2-unstable-x 预发行版中

# blackberry - 类似于 WhatsApp 的图库中的图像选择器和联系人个人资料图片选择器 [Blackberry]

> ID：14938451
> 
> 赞同：0
> 
> 时间：2013-02-18T14:20:19.747
> 
> 标签：blackberry, java-me

在我的应用程序中，我希望用户能够打开与 WhatsApp 和联系人中的文件选择器相同的文件选择器来选择个人资料图片。

谁能指导我如何实现这一点？![在此处输入图像描述](../Images/f782bca7482f6ca442b7a391f8e78f10.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:17:34.700

对于 OS 6.0 及更高版本，这非常简单。使用文件选择[器](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/picker/FilePicker.html)：

```
FilePicker picker = FilePicker.getInstance();
picker.setView(FilePicker.VIEW_PICTURES);
picker.show(); 
```

# c# - Google Analytics V3 和 C# 示例

> ID：14938455
> 
> 赞同：0
> 
> 时间：2013-02-18T14:20:36.287
> 
> 标签：c#, google-analytics

我的任务是连接到 Google Analytics 并从帐户中提取数据。我一直试图弄清楚这一点。有谁知道我可以使用的工作样本？我在 stackoverflow 上找到了一些代码，但我继续收到“用户对此配置文件没有足够的权限”，尽管我相信我的帐户设置正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:42:52.533

此错误消息表明用户对查询中指定的实体没有足够的权限。

解决方案是2：

您的帐户配置错误（仔细检查）

您传递了错误的凭据（检查您的 OAuth 2.0 clientID 和 apikey）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:40:21.633

谷歌提供数据 API。你可以用那个。

参考：[Core Reporting API - 开发者指南](https://developers.google.com/analytics/devguides/reporting/core/v3/coreDevguide)

Core Reporting API 提供对 Google Analytics 标准和自定义报告中表格数据的访问。要访问数据，您可以创建一个查询来指定：配置文件、开始和结束日期以及构成表中列标题的维度和指标。此查询被发送到 Core Reporting API，Core Reporting API 以表格的形式返回所有数据

# c# - c# 初始化内部属性

> ID：14938456
> 
> 赞同：1
> 
> 时间：2013-02-18T14:20:35.877
> 
> 标签：c#, visual-studio-2010, properties, initialization, nested-properties

我有两节课：

```
public class TmpClass
{
    public TmpClass() 
    {
        InnerClass = new InnerClass();
    }

    public InnerClass InnerC { get; set; }
}

public class InnerClass
{
    public string Name { get; set; }
} 
```

是否可以像这样初始化 InnerClass 的属性，因为 VS2010 不能这样做。

```
TmpClass a = new TmpClass()
{
    InnerC.Name = "blabla"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:22:48.587

使用下一个代码片段：

```
TmpClass a = new TmpClass
{
    InnerC = new InnerClass { Name = "Name" }
}; 
```

请注意，默认情况下，该语句`new TmpClass`将调用构造函数。另请注意：您的构造函数声明错误。将构造函数更改`TmpClass`为下一个代码示例，以便编译：

```
public TmpClass() 
{
    InnerC = new InnerClass();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:24:20.343

```
TmpClass a = new TmpClass()
{
    InnerC = new InnerClass
    {
        Name = "blabla"
    }
} 
```

# .net - Ngen 硬绑定（DependencyAttribute）用法

> ID：14938459
> 
> 赞同：2
> 
> 时间：2013-02-18T14:20:40.857
> 
> 标签：.net, .net-assembly, ngen

**一些上下文**

安装我的应用程序后，安装程序会为其部署的所有程序集调用 Ngen。这样做是为了减少启动时间，并且效果很好（它在我的机器上将时间从大约 22 秒减少到大约 14 秒）。它是一个 .NET 4.0 x86 WPF 应用程序，使用大约 40 个程序集（其中大部分是第三方的），所有程序集的大小约为 45 MB。

我现在将一些[DependencyAttributes](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.dependencyattribute%28v=vs.100%29.aspx)应用于我的代码以启用硬绑定（[MSDN 中的解释](http://msdn.microsoft.com/en-us/library/6t9t5wcf%28v=vs.100%29.aspx)）。这样做的原因是在启动期间已经加载了一些第三方程序集，否则在用户打开第一个数据输入窗口之前不会加载这些程序集。是的，我知道这会减慢我的应用程序的启动时间，但如果它减少了打开第一个数据输入窗口所需的时间，那就没问题了。

**问题**

1) 有什么方法可以检查加载的本机图像是作为硬绑定还是普通/软绑定加载的？

2）（如果第一个问题的答案是肯定的，我可以自己检查一下。）如果我有定义的 AssemblyA 和定义的`[assembly: Dependency("AssemblyB", LoadHint.Always)]`AssemblyB，`[assembly: Dependency("AssemblyC", LoadHint.Always)]`加载 AssemblyA 还会加载带有硬绑定的 AssemblyC（假设所有三个都有有效的本机图像） ? 还是我需要为所有依赖程序集指定直接硬依赖项？因为如果我这样做，`ngen display /verbose`那些间接依赖不会被列为直接硬依赖，而只是作为依赖的硬依赖。

3）我刚刚发现，如果该程序集未直接在我的程序集中使用，则我无法将程序集定义为硬依赖项（消息来自`ngen install /verbose`：警告：无法硬绑定到 ThirdPartyAssemblyB，因为它未加载）。所以我的项目引用了ThirdPartyAssemblyA 和ThirdPartyAssemblyB，但没有使用ThirdPartyAssemblyB 中的任何类。但是在运行时仍然需要 ThirdPartyAssemblyB，因为 ThirdPartyAssemblyA 使用它。使用 .NET Reflector 我可以看到编译器删除了我对 ThirdPartyAssemblyB 的引用。并使用`ngen display /verbose`我可以看到我的程序集没有直接依赖于 ThirdPartyAssemblyB，既不是硬的也不是软的。当然，它仍然对 ThirdPartyAssemblyA 有间接依赖（这是一个硬依赖），但由于 ThirdPartyAssemblyA 对 ThirdPartyAssemblyB 没有硬依赖，这无济于事。我真的需要创建一些直接引用 ThirdPartyAssemblyB 的虚拟代码来获得硬绑定吗？

4）由于某种原因`ngen install MyAssembly /verbose`打印以下警告：“警告：无法硬绑定到 PresentationFramework，版本 = 4.0.0.0，文化 = 中性，PublicKeyToken = 31bf3856ad364e35，因为依赖项没有本机图像（检查 FusLogVw 的原因）”。但是我**确实**有一个 PresentationFramework 的本机图像，并且使用 Fuslogvw 我可以看到它是在运行时加载的。安装本机图像后，`ngen display /verbose`甚至将 PresentationFramework 列为我的程序集的硬依赖项。那么这个警告是什么意思呢？

# sql - sql连接表及其子表

> ID：14938466
> 
> 赞同：-1
> 
> 时间：2013-02-18T14:20:56.073
> 
> 标签：sql, sql-server

假设以下示例表：

```
+-----+-----+-----+
| ID1 | ID2 | VAL |
+-----+-----+-----+
| A   | X   | 1   |
| A   | Y   | 2   |
| A   | Z   | 3   |
| B   | X   | 4   |
| B   | Z   | 5   |
| C   | Y   | 6   |
+-----+-----+-----+ 
```

说我感兴趣`ID1 = B`并想与其他人进行比较。所需的输出将是：

```
+---------+---------+---------+---------+---------+---------+---------+
| REF.ID1 | OTH.ID1 | REF.ID2 | REF.ID2 | REF.VAL | OTH.VAL |  DIFF   |
+---------+---------+---------+---------+---------+---------+---------+
| B       | A       | X       | X       | 4       | 1       |  3      |
| B       | A       | NULL    | Y       | NULL    | 2       | -2      |
| B       | A       | Z       | Z       | 5       | 3       |  2      |
| B       | B       | X       | X       | 4       | 4       |  0      |
| B       | B       | Z       | Z       | 5       | 5       |  0      |
| B       | C       | NULL    | Y       | NULL    | 6       | -6      |
+---------+---------+---------+---------+---------+---------+---------+ 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:23:46.257

您需要的是交叉连接：

```
SELECT Ref.Id, Oth.id, ......
FROM dbo.tbl AS Ref
CROSS JOIN dbo.tbl AS Oth
WHERE Ref.Id = 'B'; 
```

有关联接的更多信息，请查看我的博客系列：http: [//sqlity.net/en/1146/a-join-a-day-introduction/](http://sqlity.net/en/1146/a-join-a-day-introduction/)

此处描述了交叉连接：http: [//sqlity.net/en/1183/a-join-a-day-the-cross-join/](http://sqlity.net/en/1183/a-join-a-day-the-cross-join/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:31:29.157

这应该这样做：

```
SELECT  A.ID1 [REF.ID1],
        A.ID1 [OTH.ID1],
        CASE WHEN A.ID2 = B.ID2 THEN A.ID2 ELSE NULL END [REF.ID2],
        B.ID2 [OTH.ID2],
        CASE WHEN A.ID2 = B.ID2 THEN A.VAL ELSE NULL END [REF.VAL],
        B.VAL [OTH.VAL],
        CASE WHEN A.ID2 = B.ID2 THEN A.VAL ELSE 0 END - B.VAL [DIFF]
FROM (  SELECT *
        FROM YourTable
        WHERE ID1 = 'B') A
CROSS JOIN YourTable B 
```

# c# - 在 IEnumerable.Select 中调用异步方法

> ID：14938467
> 
> 赞同：44
> 
> 时间：2013-02-18T14:20:56.263
> 
> 标签：c#, async-await

我有以下代码，在类型之间转换项目`R`并`L`使用异步方法：

```
class MyClass<R,L> {

    public async Task<bool> MyMethodAsync(List<R> remoteItems) {
        ...

        List<L> mappedItems = new List<L>();
        foreach (var remoteItem  in remoteItems )
        {
            mappedItems.Add(await MapToLocalObject(remoteItem));
        }

        //Do stuff with mapped items

        ...
    }

    private async Task<L> MapToLocalObject(R remoteObject);
} 
```

是否可以使用 IEnumerable.Select 调用（或类似调用）来减少代码行？我试过这个：

```
class MyClass<R,L> {

    public async Task<bool> MyMethodAsync(List<R> remoteItems) {
        ...

        List<L> mappedItems = remoteItems.Select<R, L>(async r => await MapToLocalObject(r)).ToList<L>();

        //Do stuff with mapped items

        ...
    }
} 
```

但我得到错误：

> “无法将异步 lambda 表达式转换为委托类型 `'System.Func<R,int,L>'`。异步 lambda 表达式可能返回`void`， `Task`或`Task<T>`，其中任何一个都不能转换为 `'System.Func<R,int,L>'`。”

我相信我遗漏了关于 async/await 关键字的一些内容，但我不知道是什么。有谁知道我可以如何修改我的代码以使其工作？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-02-18T14:59:50.927

你可以通过考虑游戏中的类型来解决这个问题。例如，`MapToLocalObject`- 当被视为异步函数时 - 确实映射 from`R`到`L`. 但是如果你把它看成一个同步函数，它会从 映射`R`到`Task<L>`。

`Task`是一个“未来”，因此`Task<L>`可以被认为是在未来某个时间点*产生*的类型。`L`

所以你可以很容易地从一个序列转换为`R`一个序列`Task<L>`：

```
IEnumerable<Task<L>> mappingTasks = remoteItems.Select(remoteItem => MapToLocalObject(remoteItem)); 
```

请注意，这与您的原始代码之间存在重要的语义差异。您的原始代码等待每个对象被映射，然后再继续下一个对象；此代码将同时启动所有映射。

你的结果是一系列任务——一系列未来的`L`结果。要处理任务序列，有一些常见的操作。`Task.WhenAll`并且`Task.WhenAny`是针对最常见要求的内置操作。如果您想等到所有映射完成，您可以执行以下操作：

```
L[] mappedItems = await Task.WhenAll(mappingTasks); 
```

如果您希望在完成后处理每个项目，您可以`OrderByCompletion`从[我的 AsyncEx 库](http://nitoasyncex.codeplex.com)中使用：

```
Task<L>[] orderedMappingTasks = mappingTasks.OrderByCompletion();
foreach (var task in orderedMappingTasks)
{
  var mappedItem = await task;
  ...
} 
```

# php - PHP：preg_replace()、`e`-修饰符和对象

> ID：14938472
> 
> 赞同：0
> 
> 时间：2013-02-18T14:21:13.880
> 
> 标签：php, regex, preg-replace

我正在编写一个方法，该方法通过其编号返回函数参数。

```
protected function parseArgs($str, $args)
{
    return preg_replace('|#(\d)|e', '$args[\\1 - 1]', $str);
} 
```

$str - 带有 '#N' 的字符串，其中 N 是多个参数 $args - 参数数组

所以如果我写 '#1' - 它返回 $arg[0]，第一个参数。它适用于字符串参数，整数......但不要使用对象作为参数。在返回字符串`Object`。我如何使用此功能获取对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:23:19.710

你不能让它像那样工作，因为`preg_replace` *总是*返回一个字符串。事实上，这个版本也未能保留所有其他非字符串值的类型，这意味着在调用之后`parseArgs`您无法区分 eg`null`和as 值。`false``''`

也就是说，这个函数的目的是什么？我为什么要写这个

```
$args = ('foo', 'bar');
$value = parseArgs('#1', $args); 
```

而不是这个？

```
$args = ('foo', 'bar');
$value = $args[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:40:48.270

该`e`修饰符已弃用。不鼓励使用它。

相反，我会将您指向[`preg_replace_callback() function`](http://www.php.net/manual/en/function.preg-replace-callback.php)，它还使您能够从正则表达式替换中调用 PHP 代码，但没有`e`修饰符中体现的不良做法。

您的原始示例代码试图执行以下操作：

```
return preg_replace('|#(\d)|e', '$args[\\1 - 1]', $str); 
```

*   以包含哈希的字符串开头，后跟一个数字
*   获取`$args`比数字少一的数组元素的内容。
*   用元素的内容替换字符串中的数字`$args`。

正如@Jon 所说，这并不是 regex replace 可以用来做的最有用的事情，但如果你确实需要这样做，它可以很容易地完成，并且通过更好的编码实践，使用`preg_replace_callback()`：

```
preg_replace_callback(
    '|#(\d)|',
    function($matches) use($args) {return $args[$matches[1]-1];},
    $str
); 
```

这里的优点是您现在在替换代码中具有更大的灵活性。

希望有帮助。（我把它放在多行以使其更容易阅读）

请注意，上面的代码假设您使用的是 PHP 5.3 或更高版本。如果您使用的是早期版本，则需要使用`create_function()`而不是内联函数。

我知道我没有直接回答这个问题，但这没关系，因为@Jon 已经解决了这方面的问题。但我希望回答这将引导您获得更好的代码。

# codeigniter - 如果调用特定 URL，则忽略 CodeIgniter i18n 路由

> ID：14938473
> 
> 赞同：0
> 
> 时间：2013-02-18T14:21:14.093
> 
> 标签：codeigniter

我正在 CodeIgniter 上构建一个多语言站点，并且我正在使用路由来强制语言位于 URL 中，如下所示：

```
// URI like '/en/about' -> use controller 'about'
$route['^(en|de|fr|nl)/(.+)$'] = "$2";

// '/en', '/de', '/fr' and '/nl' URIs -> use default controller
$route['^(en|de|fr|nl)$'] = $route['default_controller']; 
```

有了这个，如果你去，`mydomain.com/auth/login`你会被重定向到，`mydomain.com/en/auth/login`但我只想在调用的特定 URL 上避免这种情况。就像我一直希望语言在 URL 中一样，除非您调用`mydomain.com/get/123`，它应该保持原样。

我试图在以前的路线之前添加这个，但没有成功：

```
$route['get/(:num)'] = "get/$1"; 
```

谢谢你的帮助，路线让我迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:07:02.773

我希望它可以帮助。

```
$default_controller = "webpages";
$language_alias = array('gr','fr');
$controller_exceptions = array('admin','forums');

$route['default_controller'] = $default_controller;
$route["^(".implode('|', $language_alias).")/(".implode('|', $controller_exceptions).")(.*)"] = '$2';
$route["^(".implode('|', $language_alias).")?/(.*)"] = $default_controller.'/$2';
$route["^((?!\b".implode('\b|\b', $controller_exceptions)."\b).*)$"] = $default_controller.'/$1';
foreach($language_alias as $language)
    $route[$language] = $default_controller.'/index';
$route['404_override'] = ''; 
```

您真正关心的唯一更改是前三行代码：

```
$default_controller = "webpages";
$language_alias = array('gr','fr');
$controller_exceptions = array('admin','forums'); 
```

如果您有一个多语言网站，则 $language_alias 是您要添加的语言元素，例如：

*   [http://mycustomproject.com/blog](http://mycustomproject.com/blog)
*   [http://mycustomproject.com/gr/blog](http://mycustomproject.com/gr/blog)
*   [http://mycustomproject.com/fr/blog](http://mycustomproject.com/fr/blog)

当然[http://mycustomproject.com/gr](http://mycustomproject.com/gr)和[http://mycustomproject.com/fr](http://mycustomproject.com/fr)正在路由到您的基本控制器的索引。

$controller_exceptions 是不遵循此路由结构的控制器。例如：

*   [http://mycustomproject.com/admin/](http://mycustomproject.com/admin/)
*   [http://mycustomproject.com/forums/](http://mycustomproject.com/forums/)

从[这里](http://www.web-and-development.com/codeigniter-minimize-url-and-remove-index-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:20:10.250

利用更新的库，其中包括用于创建非本地化区域的特殊 URI。更多信息可以在这里找到：[https ://github.com/EllisLab/CodeIgniter/wiki/CodeIgniter-2.1-internationalization-i18n](https://github.com/EllisLab/CodeIgniter/wiki/CodeIgniter-2.1-internationalization-i18n)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:05:16.130

仅供参考，强制从`mydomain.com/auth/login`to重定向`mydomain.com/en/auth/login`与路由文件无关，它是`MY_Lang.php`库提供的文件文件，它将用户重定向到默认语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T22:30:55.063

不如只使用更新版本的库，它为非本地化区域提供内置的 $special 数组。

# debugging - Magento 调试代码

> ID：14938475
> 
> 赞同：0
> 
> 时间：2013-02-18T14:21:18.490
> 
> 标签：debugging, magento-1.7

我已经开发了一些使用 cakePHP 作为框架的网站，并且喜欢调试和退出代码来阻止一切运行，这样我就可以轻松地检查正在呈现的变量。

Magento 中是否有等价物可以让我在该点运行之后停止所有内容并按原样呈现页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:36:54.850

我刚开始使用下面的代码来解决一些眼前的问题；

```
var_dump($var_of_interest); exit(); 
```

# php - 如果成功后验证，则禁用 e.preventDefault()

> ID：14938480
> 
> 赞同：1
> 
> 时间：2013-02-18T14:21:33.723
> 
> 标签：php, javascript, jquery, ajax, codeigniter

## 概述

以下是我想要发生的事情：

```
1\. User answers the form, clicks submit
2\. The data will be evaluated by the CodeIgniter `validate_new_account()`
     a. If there are errors, prevent submission so that the dynamically added fields will not disappear
     b. If successful / no error validation, proceed to the **else** part of `validate_new_account()` to `$this->view_preview_form( $this->get_post_data() );` 
```

我有一个表格，我将它提交给我的控制器的`validate_new_account()`功能：

```
function validate_new_account() 
{
    // validations here 

    if ( $this->form_validation->run() == FALSE ) {
    // JSON-encoded validations
        $errors = json_encode( $this->form_validation->error_array() );
        echo $errors;
    } else {
        // next step
    $this->view_preview_form( $this->get_post_data() );
    }
} 
```

我使用[jQuery Form Plugin](http://malsup.com/jquery/form/#code-samples)与控制器进行交互。

```
var options = {
    url: "<?php echo site_url('new_account/validate_new_account'); ?>",
    type: 'POST',
    dataType: 'json',
    success: function(data) {

      if (data.length === 0) {
        alert('Form successfully submitted!');
      } else {
        // echo validation errors from CodeIgniter
        alert("Some fields weren't answered successfully. Please answer them.");
        $.each(data, function(key, value){
          var container = '<div class="error">'+value+'</div>';
          $('.form-element input[name="'+key+'"]').after(container);
        });

      }

    }
};

$('#main-submit').click(function(e) {
  $('#main-form').valid();
  $('#main-form').ajaxSubmit(options);  
  e.preventDefault();
}); 
```

## 问题

如果没有我的 ajax 函数，上面的代码可以完美运行，但是我动态添加了需要 ajax 处理所有验证的元素，否则这些元素将消失（糟糕的 UX）。

因此，如果我启用并使用我的 ajax 函数，来自 CodeIgniter 的验证错误会以我想要的方式打印出来（通过 ajax 的成功部分）**但是如果所有验证现在都正确，则表单不会转到`$this->view_preview_form( $this->get_post_data() );`**.

为什么会这样？我一直在寻找类似的问题，但遗憾的是没有一个与我的情况相似。

**`e.preventDefault()`如果表格发送成功，如何通过？**

## 感觉

对于所有帮助我解决这个问题的人，可能是评论或答案，非常感谢。我一直在寻找这个解决方案（CodeIgniter 验证 + jQuery 验证 + AJAX 提交 + 无缝文件上传）两个月，现在我终于可以喘口气了。我永远不会忘记你所有的帮助。你永远不会知道这对我意味着什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:43:21.613

简单：

```
<script>
    $('form').on('submit', function(e) {
        // do your AJAX validation here
        var url = $(this).attr('action');
        var params = $(this).serialize();
        $.post(url, params, function(response) {
            if (response.errors.length > 0) {
                e.preventDefault();
            }
        });
    });
</script> 
```

如果返回的错误不止一个，这将阻止表单提交。否则，事件将照常进行并传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:33:22.963

我认为在验证后你想阻止表单提交，以防止页面被重新加载。如果这就是你想要的，那么试试这个

将处理程序绑定到`submit`表单的`click`事件而不是按钮的事件并返回`false`，这将阻止`form`提交

```
$('#main-form').on('submit', function () {

    $(this).valid(); // do your validation here
    $(this).ajaxSubmit(options); // then call the ajax function

    return false;
}); 
```

# uicollectionview - 根据单元格数量调整 UICollectionView 的大小

> ID：14938486
> 
> 赞同：1
> 
> 时间：2013-02-18T14:21:42.610
> 
> 标签：uicollectionview, uicollectionviewcell, uicollectionviewlayout

我有一个`UICollection`包含 1-4 个单元格的视图，下面的 a`UITextField`被限制在它的底部。

我希望能够调整它的大小，`UICollectionView`所以如果它有 1 个或 2 个单元格，那么它的高度`UICollectionView`就是这个高度，否则如果它有 3 个或 4 个单元格，高度就是 2 * 单元格高度 + 垂直间距。

有没有一种简单的方法可以在没有所有数学的情况下做到这一点？有约束系统似乎很奇怪，但仍然需要做这个费力的数学来确定 a 的大小`UIView`。

一如既往的感谢

# menu - YUI：单击树视图中的标签时显示对话框

> ID：14938489
> 
> 赞同：1
> 
> 时间：2013-02-18T14:21:44.430
> 
> 标签：menu, dialog, treeview, listener, yui

我正在使用 yui 树来填充菜单，一旦你点击任何菜单项，我需要打开一个 yui 对话框。我的代码是这样的

```
 tree = new YAHOO.widget.TreeView("treeDiv1");

var root = tree.getRoot();

var myobj = {
    label : "Account Search",
    myNodeId : "myid1",
    labelStyle : "mymenu"   

};
var tmpNode = new YAHOO.widget.MenuNode(myobj, root, false);
var myobj = {
    label : "Activate Account",
    myNodeId : "myid1",
    labelStyle : "mymenu"   
};
var tmpNodel2 = new YAHOO.widget.MenuNode(myobj, root, false);

var myobj = {
    label : "Code of the Day",
    myNodeId : "myid1",
    labelStyle : "mymenu"   
};
var tmpNodel3 = new YAHOO.widget.MenuNode(myobj, root, false);
     tree.render(); 
```

对于这个标签，我想添加侦听器，当我单击时，我应该使用 yaho.widget.dialog() 打开一个 yui 对话框。为此，我将给出另一个 gsp(grails) 中的参数 divid。将侦听器添加到 myNodeId 是不工作。任何人都可以建议如何在菜单中的这些标签中添加听众..提前谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:39:29.637

您不向单个标签添加侦听器，而是侦听 labelClick 事件，如下所示：

[http://developer.yahoo.com/yui/treeview/#events](http://developer.yahoo.com/yui/treeview/#events)

然后在为 myNodeId 读取的值或您想从节点决定的任何值上进行分支。

# apache - 如何使用 Apache POI 自动创建行？

> ID：14938494
> 
> 赞同：6
> 
> 时间：2013-02-18T14:21:53.577
> 
> 标签：apache, apache-poi, xls

我正在使用 Java 进行一个项目，我需要创建一个包含一些信息的 xls 文件。因此，根据信息量，我需要自动创建行和单元格来放置这些信息。

示例：如果输入文档有 13 个站点信息，我需要创建 13 行和 4 个单元格。我该怎么做？..我尝试编码：

```
Workbook wb = new HSSFWorkbook();
    Sheet sheet = wb.createSheet("new sheet");

    int numberrows = Integer.parseInt(JOptionPane.showInputDialog(null, "numbers of sites??"));

    String siteName = JOptionPane.showInputDialog(null, "Site name");
    String rncname = JOptionPane.showInputDialog(null, "RncName");

    for (int i = 0; i < numberrows; i++) {
        HSSFRow linha =  (HSSFRow) sheet.createRow(i);

        linha.createCell((short) i ).setCellValue(siteName);
        linha.createCell((short) i ).setCellValue(rncname);

    } 
```

提前致谢..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T14:56:12.770

你能不能做一些简单的事情，比如：

```
int nextRow = 12;

Row r = sheet.getRow(nextRow);
if (r == null) {
    r = sheet.createRow(nextRow);
}

Cell c = r.getCell(2, Row.CREATE_NULL_AS_BLANK);
c.setCellValue("My String");

nextRow++; 
```

# asp.net - 使用 nuget 安装 asp.net nightly build

> ID：14938496
> 
> 赞同：0
> 
> 时间：2013-02-18T14:22:06.917
> 
> 标签：asp.net, visual-studio-2012, nuget-package

我正在尝试安装 asp.net 的夜间构建版本，如此处所述 [http://aspnetwebstack.codeplex.com/wikipage?title=Use%20Nightly%20Builds](http://aspnetwebstack.codeplex.com/wikipage?title=Use%20Nightly%20Builds) 我想使用夜间构建来使用 ODataController添加 OData 支持。

我已将[http://www.myget.org/F/aspnetwebstacknightly/](http://www.myget.org/F/aspnetwebstacknightly/)添加到我的包源列表中我不确定我应该使用什么 nuget 命令来安装每晚构建

我已经尝试过以下命令，但我很确定我在某处错过了这一点。

```
Install-Package Microsoft.AspNet -version "nightly 2013 Feb 14"
Install-Package AspNet -version "nightly 2013 Feb 14"
Install-Package AspNet
Install-Package Install-Package Microsoft.AspNet.WebApi -version "nightly 2013 Feb 14" 
```

我需要什么命令才能安装最新版本的 asp.net 以支持 ODataController，我使用的是 VS2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:41:48.247

好像昨天才放出来的！所以我不再需要使用（或尝试使用）夜间构建

[https://nuget.org/packages/Microsoft.AspNet.WebApi.OData](https://nuget.org/packages/Microsoft.AspNet.WebApi.OData)

# apache - modrewrite 规则诱使 apache 相信 PHP 是 JS 的

> ID：14938498
> 
> 赞同：0
> 
> 时间：2013-02-18T14:22:06.683
> 
> 标签：apache, mod-rewrite

在我的一个外部 JS 文件中，如果可以从 URL 获取 php 变量，则可以更轻松地编写一些代码。出于这个原因，我尝试编辑 .htaccess 文件，以便 header.php 可以被读取为 header.js。

```
# Header.php into header.js
RewriteRule ^js/header.php$ js/header.js 
```

但是，当我将以下内容放在文档的开头时，Chrome 的 javascript 控制台说它发现了 404 错误并且无法加载文件。

```
 <script type="text/javascript" src="/js/header.js?url=<?php echo $url; ?>"></script> 
```

我想了一秒钟，这是因为查询字符串中传递了 GET 变量。但是，当我在[此处](http://sportannica.com/js/header.js)找到的浏览器中查看 header.js 文件时，它显示 404 错误......让我相信 modrewrite 规则无法正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:20:49.593

正如您所写的那样，RewriteRule 期望`/js/header.php`从浏览器调用 URL，并将其重写为`/js/header.js`. 这与您想要的相反。试试这个：

```
RewriteRule ^js/header.js$ /js/header.php [L] 
```

请注意，我还在重写路径的开头添加了一个斜杠 - 这取决于上下文，但您可能需要它。

# sql-server - Recordset.RecordCount 不允许

> ID：14938506
> 
> 赞同：1
> 
> 时间：2013-02-18T14:22:25.433
> 
> 标签：sql-server, asp-classic, sql-server-2008-r2, ado

从 ASP VBscript 查询 SQL Server 2008 R2 时，我想从结果集中获取记录数：

```
Conn = "Provider=SQLNCLI10; DataTypeCompatibility=80; Data Source=Source; Initial Catalog=catalog; User ID=id; Password=pw; Network Library=dbmssocn; Encrypt=Yes;" 
```

这将返回正确的记录计数：

```
consulta = "select 'x' x;"

rs.open consulta, Conexao, 3
Response.Write(rs.RecordCount) 
```

但是当我从临时表中选择时，它会引发错误：

```
consulta = "select 'x' x into #t; select * from #t; drop table #t;"

rs.open consulta, Conexao, 3
Response.Write(rs.RecordCount)

ADODB.Recordset error '800a0e78'

Operation is not allowed when the object is closed. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T15:21:18.913

我认为您需要使用`.NextRecordSet()`：

```
strsql = "select 'x' x into #t; select * from #t; drop table #t;"

rs.Open strsql, conn

'Move to your 2nd recordset to return the values (in this case 'x')
Set rs = rs.NextRecordset()
if not rs.eof then
    response.write rs(0)
end if
rs.close 
```

`EXECUTE`如果我将 sql 字符串分开并使用或`OPEN`根据需要，这也适用于我：

```
'Create Temp Table 
strsql = "select 'x' x into #t; "
conn.execute strsql

'Select From Temp Table
strsql = "select * from #t;"
rs.open strsql, conn
if not rs.eof then
    response.write rs(0)
end if
rs.close

'Drop Temp Table
strsql = "drop table #t;"
conn.execute strsql 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-18T21:54:24.643

如果问题只是复合 SQL 命令语句之一（在我的示例中使用临时表），那么这是一个非常通用的解决方案：

```
Set RecSet = CreateObject("ADODB.Recordset")

On Error Resume Next
Call RecSet.Open(SQLstr, ADO_ConnObj, adOpenStatic, adLockOptimistic)

ErrNum = Err.Number         'Capture it for later error processing
ErrDesc = Err.Description   '   "

Do While ErrNum = 0 And RecSet.State <> adStateOpen
    'SQL specifications that include use of local temporary tables (subsequently referenced by
    'a final SELECT statement) are an example of compound command statements for which ADO
    'returns a collection of record sets, one for each command statement in the specification.
    'Local temporary tables are automatically dropped when they go out of scope, resulting in
    'their corresponding record set's State property being set to adStateClosed, once the query
    'is finished executing.  So any such closed record sets must be ignored and skipped over,
    'in order to find the actual query-results data, which will usually be the last record set
    'in the collection, with a State property value of adStateOpen.  So search for the first
    'open record set:

    Set RecSet = RecSet.NextRecordset
    If RecSet Is Nothing Then
        MsgBox "No open ADO DB Recordsets found in the returned Recordset collection."

        Exit Sub
    End If
Loop
On Error GoTo 0

'Process the actual data (or error conditions)... 
```

# android - 如何获取已经在 J SONArray 中的 JSONArray

> ID：14938519
> 
> 赞同：1
> 
> 时间：2013-02-18T14:22:50.793
> 
> 标签：android, json

我似乎无法获得 JSON 数组中的第二层。我想要的是，从类别中获取所有名称，然后我想通过意图将“论坛 id”发送到不同的活动。
如果有帮助，我按照本[教程进行操作，并从](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)[这里](http://api.facepun.ch/?&action=getforums)获取我的 JSON 数组

**JSON 数组的一部分**

```
{
"categories": [{
    "name": "Facepunch",
    "forums": [{
        "id": 6,
        "name": "General Discussion",
        "viewing": 217
    }, {
        "id": 60,
        "name": "Fast Threads",
        "viewing": 188
    }, {
        "id": 64,
        "name": "Videos And Flash Movies and That Kind Of Crap",
        "viewing": 239
    }, {
        "id": 403,
        "name": "Mass Debate",
        "viewing": 9
    }, {
        "id": 396,
        "name": "Sensationalist Headlines",
        "viewing": 455
    }, {
        "id": 51,
        "name": "In The News Node",
        "viewing": 100
    }]
  }]
} 
```

我的部分代码

```
try {
    // Getting Array of Contacts
categories = json.getJSONArray(TAG_CATEGORIES);
forums = json.getJSONArray(TAG_FORUMS); 

// looping through All categories
for(int i = 0; i < categories.length(); i++){
    JSONObject c = categories.getJSONObject(i);

    // Storing each json item in variable
    String CatName = c.getString(TAG_CATName);

    // Phone number is agin JSON Object
            JSONObject All_forums = forums.getJSONObject(i);
            String forum_id = All_forums.getString(TAG_FORUMS_ID);
            String forum_name = All_forums.getString(TAG_FORUMS_NAME);

        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();

        // adding each child node to HashMap key => value
    map.put(TAG_CATName, CatName);
    map.put(TAG_FORUMS, forum_name);

    // adding HashList to ArrayList
    contactList.add(map);
}
} catch (JSONException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:34:26.770

要获得一个类别的论坛数组，您必须致电

```
forums = c.getJSONArray(TAG_FORUMS); 
```

在你的 for 循环中。之后，您可以遍历论坛以获取他们的 ID 和名称。

代码示例：

```
categories = json.getJSONArray(TAG_CATEGORIES);
for(int i = 0; i < categories.length(); i++) {
    JSONObject c = categories.getJSONObject(i);
    forums = c.getJSONArray(TAG_FORUMS);
    for(int j = 0; j < forums.length(); j++){
        JSONObject f = forums.getJSONObject(j);
        String forum_id = f.getString(TAG_FORUMS_ID);
        String forum_name = f.getString(TAG_FORUMS_NAME);
        …
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:37:03.057

您必须从 JSONObject 类别中获取第二层。

```
try {
// Getting Array of Contacts
categories = json.getJSONArray(TAG_CATEGORIES);

// looping through All categories
for(int i = 0; i < categories.length(); i++){
    JSONObject c = categories.getJSONObject(i);

    forums = c.getJSONArray(TAG_FORUMS); 

    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:29:33.020

您应该使用 Gson 解析器。它比 Android 标准 JSON 解析器非常简单和基本的用法。你解析得很基本。

为已经在其中的 json 对象项创建类到对象或原始类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:40:20.753

试试这个： **// 获取联系人
列表 categories = json.getJSONArray(TAG_CATEGORIES);
论坛 = categories.getJSONArray(TAG_FORUMS);

// 循环遍历所有类别
for(int i = 0; i < forums.length(); i++){
JSONObject c = forums.getJSONObject(i);
// 你的代码....
}**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T14:42:11.610

简单使用

```
public String getClasstoJson(Object o) throws Exception
{
    Gson gson = new Gson();
    gson.toJson(o);
    return gson.toString();
}

public Object getJsontoClass(Object o,String json) throws Exception
{

    Gson gson = new Gson();

    try {
        Object st = o.getClass().newInstance();
        st= gson.fromJson(json.toString(), st.getClass());
        return  st;

    }catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InstantiationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return null;
} 
```

# c# - 项目列表中每个项目的最大值

> ID：14938531
> 
> 赞同：1
> 
> 时间：2013-02-18T14:23:46.387
> 
> 标签：c#, linq

我有一个 C 类，它有一个 List[B]，每个 B 都有一个 Dictionary[A, double]

我需要选择当前我正在做的每个 A 的 max(double)：

```
Dictionary<A,double> rtn = new Dictionary<A,double>();
foreach (var B in C.Bs)
{
    foreach (var kvpA in B.A_list.Where(a => !rtn.Keys.ToList().Contains(a)))
    {
        rtn.Add(kvpA.Key, kvpA.Value);
    }
    foreach(var kvpA in B.A_list.Where(a => rtn.Keys.Contains(a) && a.Value>rtn[a]))
    {
        rtn[kvpA.Key] = kvpA.Value;
    }
}
return rtn; 
```

然而，这看起来相当混乱，所以我正在尝试构建一个更好的 linq 查询，但无法弄清楚语法。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T14:37:06.923

我将假设 max(int) 你的意思是“max”，因为每个唯一 A 的最大 double 跨越所有`A_Lists`，这似乎实际上是字典。

无论如何，您可以在一个 LINQ 语句中通过三个步骤完成所有操作：

1.  [**使用SelectMany**](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)折叠所有键值对[](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)
***   [**使用GroupBy**](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)按唯一 A 分组[](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)***   [**使用ToDictionary 获取**](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.todictionary.aspx)每个 A 键的最大双倍[](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.todictionary.aspx)****

 ******`c`类的实例在哪里`C`：

```
var dct = c.Bs.SelectMany(x => x.A_List)
            .GroupBy(p => p.Key, p => p.Value)
            .ToDictionary(g => g.Key, g => g.Max()); 
```

您还可以使用[**ToLookup**](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)代替 ToDictionary，这将在与 ToDictionary 实现的相同元组上产生一个 IEnumerable 迭代器`[A, double]`。******

# java - 我可以从 Matlab 代码中调用 java 小程序吗

> ID：14938534
> 
> 赞同：-1
> 
> 时间：2013-02-18T14:23:50.007
> 
> 标签：java, matlab, applet, processing

我想从 Matlab 代码中调用 Java 小程序（特别是处理草图），我可以这样做吗？如果可以，有什么例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:28:07.763

小程序？可能不是，但 Matlab 有它自己的 JVM，所以任何你可以从“java ...”命令行运行的东西，你都可以从 Matlab 运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:55:43.953

我建议您阅读： [链接](http://blogs.mathworks.com/community/2009/07/06/calling-java-from-matlab/?doing_wp_cron)

MATLAB Spoken Here 2009 年 7 月 6 日 从 MATLAB 调用 Java

到目前为止，还没有人从交互式网页帖子中获得额外的功劳。我认为没有图像文件显示图形的问题太有趣了，不能放弃，所以我自己想出了解决方案，并将其放在文件交换中。涉及 ActiveX 的第二个挑战将保持开放，直到我有机会写出它的解决方案。或者，如果您没有时间这样做，您仍然可以通过向我们发送您的桌面来赢取一件 T 恤。...

# c# - onrowupdating 事件不起作用

> ID：14938537
> 
> 赞同：0
> 
> 时间：2013-02-18T14:24:10.850
> 
> 标签：c#, asp.net

我不知道为什么，因为`onrowdeleting`工作正常删除方法与更新方法在同一类中

```
<form id="formulario" runat="server" method="post">
<asp:GridView AllowPaging="true" id="inf_clientes" AutoGenerateColumns="false" 
 runat="server" GridLines="Both" BorderWidth="1" 
onrowdeleting="Grid_DeleteCommand" onrowupdating="Grid_UpdateCommanda"
DataKeyNames="cliente_id,nombre,apellido,celular">
<Columns>
<asp:TemplateField>
    <ItemTemplate>
        <asp:ImageButton CommandName="Delete" runat="server" ValidationGroup="validation" ImageUrl="borrar.jpg" ToolTip="Borrar" Height="20px" Width="20px"  />
    </ItemTemplate>
</asp:TemplateField>

<asp:TemplateField>
    <ItemTemplate>
        <asp:ImageButton CommanName="Update" ImageUrl="guardar.jpg" ValidationGroup="validation" runat="server" ToolTip="Guardar" Height="20px" Width="20px" />
    </ItemTemplate>
</asp:TemplateField> 
```

和后面的代码

```
protected void Grid_UpdateCommanda(object origen,GridViewUpdateEventArgs e)
    {   

        con.Open();
        EjecutarComando = new SqlCommand("UPDATE dclntes SET nombre='c' where cliente_id=4",con);
        EjecutarComando.ExecuteNonQuery();
        con.Dispose();
        todos();
    } 
```

如果您需要更多，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:52:08.167

我被告知要回答自己，所以我这样做了：错误是写`CommanName`的而不是`CommandName`. 我不知道它是否会帮助某人，但这就是问题所在。

# matplotlib - 如何改进 matplotlib 散点图的标签放置（代码、算法、提示）？

> ID：14938541
> 
> 赞同：40
> 
> 时间：2013-02-18T14:24:29.597
> 
> 标签：matplotlib, label

我使用 matplotlib 绘制散点图：

![在此处输入图像描述](../Images/82c58393e4160b09fce5d4ffc5b88d6b.png)

并根据[matplotlib 的提示使用透明框标记气泡：如何在散点自动放置的箭头上注释点？](https://stackoverflow.com/questions/9074996/matplotlib-how-to-annotate-point-on-a-scatter-automatically-placed-arrow)

这是代码：

```
if show_annote:
    for i in range(len(x)):
        annote_text = annotes[i][0][0]  # STK_ID
        ax.annotate(annote_text, xy=(x[i], y[i]), xytext=(-10,3),
            textcoords='offset points', ha='center', va='bottom',
            bbox=dict(boxstyle='round,pad=0.2', fc='yellow', alpha=0.2),
            fontproperties=ANNOTE_FONT) 
```

以及由此产生的情节： ![在此处输入图像描述](../Images/df588cc09bd0d84d6f2624b91c13886e.png)

但是在减少重叠方面仍有改进的空间（例如标签框偏移固定为（-10,3））。是否有算法可以：

1.  根据邻域的拥挤程度动态改变标签框的偏移量
2.  远程动态放置标签框并在气泡和标签框之间添加箭头线
3.  稍微改变标签方向
4.  label_box 重叠气泡比 label_box 重叠 label_box 好？

我只是想让图表易于人眼理解，所以一些重叠是可以的，而不是像[http://en.wikipedia.org/wiki/Automatic_label_placement](http://en.wikipedia.org/wiki/Automatic_label_placement)建议的那样严格的约束。并且图表中的气泡数量大部分时间都小于 150。

我发现所谓的`Force-based label placement` [http://bl.ocks.org/MoritzStefaner/1377729](http://bl.ocks.org/MoritzStefaner/1377729) 很有趣。我不知道是否有任何 python 代码/包可用于实现该算法。

我不是学术人员，也不是在寻找最佳解决方案，而且我的 python 代码需要标记许多图表，因此速度/内存在考虑范围内。

我正在寻找一种快速有效的解决方案。关于这个主题的任何帮助（代码、算法、提示、想法）？谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-01-09T18:09:45.540

以下内容基于[tcaswell 的回答](https://stackoverflow.com/a/15859652/190597)。

Networkx 布局方法，例如`nx.spring_layout`重新调整位置，使它们都适合一个单位正方形（默认情况下）。甚至固定的位置`data_nodes`也被重新缩放。因此，要将 应用于`pos`原始`scatter_data`，必须执行 unshifting 和 unscaling 。

另请注意，它`nx.spring_layout`有一个`k`控制节点之间最佳距离的参数。随着`k`增加，注释与数据点的距离也会增加。

```
import numpy as np
import matplotlib.pyplot as plt
import networkx as nx
np.random.seed(2016)

N = 20
scatter_data = np.random.rand(N, 3)*10

def repel_labels(ax, x, y, labels, k=0.01):
    G = nx.DiGraph()
    data_nodes = []
    init_pos = {}
    for xi, yi, label in zip(x, y, labels):
        data_str = 'data_{0}'.format(label)
        G.add_node(data_str)
        G.add_node(label)
        G.add_edge(label, data_str)
        data_nodes.append(data_str)
        init_pos[data_str] = (xi, yi)
        init_pos[label] = (xi, yi)

    pos = nx.spring_layout(G, pos=init_pos, fixed=data_nodes, k=k)

    # undo spring_layout's rescaling
    pos_after = np.vstack([pos[d] for d in data_nodes])
    pos_before = np.vstack([init_pos[d] for d in data_nodes])
    scale, shift_x = np.polyfit(pos_after[:,0], pos_before[:,0], 1)
    scale, shift_y = np.polyfit(pos_after[:,1], pos_before[:,1], 1)
    shift = np.array([shift_x, shift_y])
    for key, val in pos.items():
        pos[key] = (val*scale) + shift

    for label, data_str in G.edges():
        ax.annotate(label,
                    xy=pos[data_str], xycoords='data',
                    xytext=pos[label], textcoords='data',
                    arrowprops=dict(arrowstyle="->",
                                    shrinkA=0, shrinkB=0,
                                    connectionstyle="arc3", 
                                    color='red'), )
    # expand limits
    all_pos = np.vstack(pos.values())
    x_span, y_span = np.ptp(all_pos, axis=0)
    mins = np.min(all_pos-x_span*0.15, 0)
    maxs = np.max(all_pos+y_span*0.15, 0)
    ax.set_xlim([mins[0], maxs[0]])
    ax.set_ylim([mins[1], maxs[1]])

fig, ax = plt.subplots()
ax.scatter(scatter_data[:, 0], scatter_data[:, 1],
           c=scatter_data[:, 2], s=scatter_data[:, 2] * 150)
labels = ['ano_{}'.format(i) for i in range(N)]
repel_labels(ax, scatter_data[:, 0], scatter_data[:, 1], labels, k=0.008)

plt.show() 
```

有`k=0.011`产量

[![在此处输入图像描述](../Images/545fb40b682ce001340ffe071d826acd.png)](https://i.stack.imgur.com/Za4XZ.png) 和`k=0.008`产量 [![在此处输入图像描述](../Images/c423b2aeba3997ba2f61a551b6533e90.png)](https://i.stack.imgur.com/AcTUI.png)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-01-07T10:08:35.600

使用我的库的另一个选项`adjustText`，专门为此目的编写（[https://github.com/Phlya/adjustText](https://github.com/Phlya/adjustText)）。

```
from adjustText import adjust_text
np.random.seed(2016)

N = 50
scatter_data = np.random.rand(N, 3)
fig, ax = plt.subplots()
ax.scatter(scatter_data[:, 0], scatter_data[:, 1],
           c=scatter_data[:, 2], s=scatter_data[:, 2] * 150)
labels = ['ano_{}'.format(i) for i in range(N)]
texts = []
for x, y, text in zip(scatter_data[:, 0], scatter_data[:, 1], labels):
    texts.append(ax.text(x, y, text))
plt.show() 
```

[![在此处输入图像描述](../Images/e1d754c7463ea601afbcd4a196fe1d79.png)](https://i.stack.imgur.com/YipY3.png)

```
np.random.seed(2016)

N = 50
scatter_data = np.random.rand(N, 3)
fig, ax = plt.subplots()
ax.scatter(scatter_data[:, 0], scatter_data[:, 1],
           c=scatter_data[:, 2], s=scatter_data[:, 2] * 150)
labels = ['ano_{}'.format(i) for i in range(N)]
texts = []
for x, y, text in zip(scatter_data[:, 0], scatter_data[:, 1], labels):
    texts.append(ax.text(x, y, text))
adjust_text(texts, force_text=0.05, arrowprops=dict(arrowstyle="-|>",
                                                    color='r', alpha=0.5))
plt.show() 
```

[![在此处输入图像描述](../Images/31ebe3a47f45c2c8a71fcfa415a43683.png)](https://i.stack.imgur.com/qeDW0.png)

它不会排斥气泡，只会排斥它们的中心和其他文本。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-04-07T06:35:53.393

边缘有点粗糙（我不太清楚如何衡量弹簧网络的相对强度与排斥力的关系，并且边界框有点搞砸了），但这是一个不错的开始：

```
import networkx as nx

N = 15
scatter_data = rand(3, N)
G=nx.Graph()

data_nodes = []
init_pos = {}
for j, b in enumerate(scatter_data.T):
    x, y, _ = b
    data_str = 'data_{0}'.format(j)
    ano_str = 'ano_{0}'.format(j)
    G.add_node(data_str)
    G.add_node(ano_str)
    G.add_edge(data_str, ano_str)
    data_nodes.append(data_str)
    init_pos[data_str] = (x, y)
    init_pos[ano_str] = (x, y)

pos = nx.spring_layout(G, pos=init_pos, fixed=data_nodes)
ax = gca()
ax.scatter(scatter_data[0], scatter_data[1], c=scatter_data[2], s=scatter_data[2]*150)

for j in range(N):
    data_str = 'data_{0}'.format(j)
    ano_str = 'ano_{0}'.format(j)
    ax.annotate(ano_str,
                xy=pos[data_str], xycoords='data',
                xytext=pos[ano_str], textcoords='data',
                arrowprops=dict(arrowstyle="->",
                                connectionstyle="arc3"))

all_pos = np.vstack(pos.values())
mins = np.min(all_pos, 0)
maxs = np.max(all_pos, 0)

ax.set_xlim([mins[0], maxs[0]])
ax.set_ylim([mins[1], maxs[1]])

draw() 
```

![示例图像](../Images/29943e44a82eecda098aa3d87fa6b6d8.png)

它的工作效果在某种程度上取决于您的数据是如何聚集的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-14T21:16:38.827

我们可以为此使用 plotly。但是如果有很多数据，我们不能帮助正确放置重叠。相反，我们可以放大和缩小。

```
import plotly.express as px
df = px.data.tips()

df = px.data.gapminder().query("year==2007 and continent=='Americas'")

fig = px.scatter(df, x="gdpPercap", y="lifeExp", text="country", log_x=True, size_max=100, color="lifeExp",
                 title="Life Expectency")
fig.update_traces(textposition='top center')

fig.show() 
```

输出：

[![在此处输入图像描述](../Images/d9dd535d2e217fc9fe1a0d87ea596c87.png)](https://i.stack.imgur.com/Ei4n6.gif)

# javascript - 用于 ASP.Net WebForms 的 MV* 框架 - 代码重用

> ID：14938543
> 
> 赞同：0
> 
> 时间：2013-02-18T14:24:33.950
> 
> 标签：javascript, asp.net, knockout.js, mv

我正在从事一个需要 Asp.Net WebForms 的项目（这是一个巨大的 .net 2.0 站点的迁移，没有时间在 MVC 中重新实现）和 asmx Web 服务。当请求页面时，服务器会发送一个页面，并像 SPA 一样工作。过了一段时间，我们意识到我们需要一个 javascript 背后的模型来避免噩梦般的代码。我们尝试了 Knockout.js，直到遇到一个我们无法解决的问题：用户控件和 Knockout.js 视图模型的代码重用。我们的用户控件具有视图模型，当多个用户控件组合在一个页面中时。淘汰赛根本行不通。我知道在制作 SPA 网络应用程序时，网络表单可能不是典型的堆栈，但是……需求就是需求……有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:36:42.120

在您的情况下，我会做什么（因为我过去自己做过）：

有一个全局 ViewModel 对象，比如：

```
var _ViewModel = {} 
```

对于您的每个控件，都有一个设置 ViewModel 部分的函数，即（这在 .ascx 中并指向一个 JS 文件函数）

```
<script language="javascript">
var _ViewModel // this should be in a global.js file or something.
SetupThisViewModel()
ko.applyBindings(_ViewModel);
</script> 
```

在 JS 文件中：

```
// Used for user  control 1
function SetupThisViewModel()
{
    _ViewModel.testItem = ko.observable('');
}

// Used for user control 2
function SetupThisViewModel2()
{
    _ViewModel.testItem2 = ko.observable('');
} 
```

而且，如果您想在一个页面上有两个用户控件，只需执行以下操作：

```
<script language="javascript">
    var _ViewModel // this should be in a global.js file or something.
    SetupThisViewModel();
    SetupThisViewModel2();
    ko.applyBindings(_ViewModel);
    </script> 
```

这将适用于您的方案。

# java - 无法读取数据库

> ID：14938544
> 
> 赞同：0
> 
> 时间：2013-02-18T14:24:50.173
> 
> 标签：java, android, database, sqlite

我正在尝试从我的数据库中读取，但我收到了这些错误。我的数据库在资产文件夹中。我已经下载了 AnyDBAdapter 类，只是尝试使用一个简单的选择函数..

```
02-18 14:18:24.168: E/SQLiteLog(964): (14) cannot open file at line 30176 of [00bb9c9ce4]
02-18 14:18:24.168: E/SQLiteLog(964): (14) os_unix.c:30176: (2) open(/data/data/com.onlywithalcohol.mk/databases/Alcohol_DB) - 
02-18 14:18:24.387: E/SQLiteDatabase(964): Failed to open database '/data/data/com.onlywithalcohol.mk/databases/Alcohol_DB'.
02-18 14:18:24.387: E/SQLiteDatabase(964): android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not open database
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.database.sqlite.SQLiteConnection.nativeOpen(Native Method)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:209)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:669)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at com.onlywithalcohol.mk.AnyDBAdapter$DatabaseHelper.checkDataBase(AnyDBAdapter.java:150)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at com.onlywithalcohol.mk.AnyDBAdapter$DatabaseHelper.createDataBase(AnyDBAdapter.java:119)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at com.onlywithalcohol.mk.AnyDBAdapter.open(AnyDBAdapter.java:47)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at com.onlywithalcohol.mk.Main$1.onClick(Main.java:30)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.view.View.performClick(View.java:4202)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.view.View$PerformClick.run(View.java:17340)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.os.Handler.handleCallback(Handler.java:725)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.os.Looper.loop(Looper.java:137)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at java.lang.reflect.Method.invokeNative(Native Method)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at java.lang.reflect.Method.invoke(Method.java:511)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-18 14:18:24.387: E/SQLiteDatabase(964):  at dalvik.system.NativeStart.main(Native Method)
02-18 14:18:24.648: D/AndroidRuntime(964): Shutting down VM
02-18 14:18:24.648: W/dalvikvm(964): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-18 14:18:24.748: E/AndroidRuntime(964): FATAL EXCEPTION: main
02-18 14:18:24.748: E/AndroidRuntime(964): java.lang.Error: Error copying database
02-18 14:18:24.748: E/AndroidRuntime(964):  at com.onlywithalcohol.mk.AnyDBAdapter$DatabaseHelper.createDataBase(AnyDBAdapter.java:135)
02-18 14:18:24.748: E/AndroidRuntime(964):  at com.onlywithalcohol.mk.AnyDBAdapter.open(AnyDBAdapter.java:47)
02-18 14:18:24.748: E/AndroidRuntime(964):  at com.onlywithalcohol.mk.Main$1.onClick(Main.java:30)
02-18 14:18:24.748: E/AndroidRuntime(964):  at android.view.View.performClick(View.java:4202)
02-18 14:18:24.748: E/AndroidRuntime(964):  at android.view.View$PerformClick.run(View.java:17340)
02-18 14:18:24.748: E/AndroidRuntime(964):  at android.os.Handler.handleCallback(Handler.java:725)
02-18 14:18:24.748: E/AndroidRuntime(964):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-18 14:18:24.748: E/AndroidRuntime(964):  at android.os.Looper.loop(Looper.java:137)
02-18 14:18:24.748: E/AndroidRuntime(964):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-18 14:18:24.748: E/AndroidRuntime(964):  at java.lang.reflect.Method.invokeNative(Native Method)
02-18 14:18:24.748: E/AndroidRuntime(964):  at java.lang.reflect.Method.invoke(Method.java:511)
02-18 14:18:24.748: E/AndroidRuntime(964):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-18 14:18:24.748: E/AndroidRuntime(964):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-18 14:18:24.748: E/AndroidRuntime(964):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 AnyDBAdapter 类：

```
package com.onlywithalcohol.mk;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.UUID;

import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class AnyDBAdapter {

    private static final String TAG = "AnyDBAdapter";
    private DatabaseHelper mDbHelper;
    private static SQLiteDatabase mDb;

    //make sure this matches the 
    //package com.MyPackage;
    //at the top of this file
    private static String DB_PATH = "/data/data/com.onlywithalcohol.mk/databases/";

    //make sure this matches your database name in your assets folder
    // my database file does not have an extension on it 
    // if yours does
    // add the extention
    private static final String DATABASE_NAME = "Alcohol_DB";

    //Im using an sqlite3 database, I have no clue if this makes a difference or not
    private static final int DATABASE_VERSION = 3;

    private final Context adapterContext;

    public AnyDBAdapter(Context context) {
        this.adapterContext = context;
    }

    public AnyDBAdapter open() throws SQLException {
        mDbHelper = new DatabaseHelper(adapterContext);

        try {
            mDbHelper.createDataBase();
        } catch (IOException ioe) {
            throw new Error("Unable to create database");
        }

        try {
            mDbHelper.openDataBase();
        } catch (SQLException sqle) {
            throw sqle;
        }
        return this;
    }

    public Cursor selectRecord(int id){
        Cursor c = mDb.rawQuery("SELECT title FROM alcorecords"
                + " WHERE id ='"+id+"'", null);
                   return c;
    }
    //Usage from outside
    // AnyDBAdapter dba = new AnyDBAdapter(contextObject); //in my case contextObject is a Map
    // dba.open();
    // Cursor c = dba.ExampleSelect("Rawr!");
    // contextObject.startManagingCursor(c);
    // String s1 = "", s2 = "";
    // if(c.moveToFirst())
    // do {
    //  s1 = c.getString(0);
    //  s2 = c.getString(1);
    //  } while (c.moveToNext());
    // dba.close();
    public Cursor ExampleSelect(String myVariable)
    {
        String query = "SELECT locale, ? FROM android_metadata";
        return mDb.rawQuery(query, new String[]{myVariable});
    }

    //Usage
    // AnyDBAdatper dba = new AnyDBAdapter(contextObjecT);
    // dba.open();
    // dba.ExampleCommand("en-CA", "en-GB");
    // dba.close();
    public void ExampleCommand(String myVariable1, String myVariable2)
    {
        String command = "INSERT INTO android_metadata (locale) SELECT ? UNION ALL SELECT ?";
        mDb.execSQL(command, new String[]{ myVariable1, myVariable2});
    }

    public void close() {
        mDbHelper.close();
    }

    private static class DatabaseHelper extends SQLiteOpenHelper {

        Context helperContext;

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            helperContext = context;
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(TAG, "Upgrading database!!!!!");
            //db.execSQL("");
            onCreate(db);
        }

        public void createDataBase() throws IOException {
            boolean dbExist = checkDataBase();
            if (dbExist) {
            } else {

                //make sure your database has this table already created in it
                //this does not actually work here
                /*
                 * db.execSQL("CREATE TABLE IF NOT EXISTS \"android_metadata\" (\"locale\" TEXT DEFAULT 'en_US')"
                 * );
                 * db.execSQL("INSERT INTO \"android_metadata\" VALUES ('en_US')"
                 * );
                 */
                this.getReadableDatabase();
                try {
                    copyDataBase();
                } catch (IOException e) {
                    throw new Error("Error copying database");
                }
            }
        }

        public SQLiteDatabase getDatabase() {
            String myPath = DB_PATH + DATABASE_NAME;
            return SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);
        }

        private boolean checkDataBase() {
            SQLiteDatabase checkDB = null;
            try {
                String myPath = DB_PATH + DATABASE_NAME;
                checkDB = SQLiteDatabase.openDatabase(myPath, null,
                        SQLiteDatabase.OPEN_READONLY);
            } catch (SQLiteException e) {
            }
            if (checkDB != null) {
                checkDB.close();
            }
            return checkDB != null ? true : false;
        }

        private void copyDataBase() throws IOException {

            // Open your local db as the input stream
            InputStream myInput = helperContext.getAssets().open(DATABASE_NAME);

            // Path to the just created empty db
            String outFileName = DB_PATH + DATABASE_NAME;

            // Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);

            // transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }

            // Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close();
        }

        public void openDataBase() throws SQLException {
            // Open the database
            String myPath = DB_PATH + DATABASE_NAME;
            mDb = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READWRITE);
        }

        @Override
        public synchronized void close() {

            if (mDb != null)
                mDb.close();

            super.close();

        }
    }

} 
```

我要做的就是：

```
AnyDBAdapter adapter = new AnyDBAdapter(getApplicationContext());
                adapter.open();
                adapter.selectRecord(num); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:29:28.457

这是你的数据库路径，

```
private static String DB_PATH = "/data/data/com.onlywithalcohol.mk/databases/"; 
```

如果没有，则将其更改为您的数据库名称。

# java - jms：OracleAQ 的监听器

> ID：14938549
> 
> 赞同：1
> 
> 时间：2013-02-18T14:25:20.363
> 
> 标签：java, spring, jms, spring-jms, oracle-aq

关于 Spring 中 OracleAQ 的以下配置

```
<jms:listener-container connection-factory="connectionFactory"
    client-id="LUKAS34"
    message-converter="messageConverter"
    container-class="org.springframework.data.jdbc.jms.listener.oracle.AdtMessageListenerContainer"
    destination-type="topic">
    <jms:listener destination="AQ_TS_MY_TEST"  
        ref="messageDelegate" method="handleMessage" subscription="LUKAS34" />
</jms:listener-container> 
```

这里的问题是，尽管我们没有订阅 LUKAS34（但我们有其他 - LUKAS）以上配置导致来自 AQ_TS_MY_TEST 的所有消息都被读取。

我希望如果我定义`subscription="LUKAS"`此订阅的所有消息都会被读取，否则不会被读取。

上面的配置有什么问题？

此外，我在表中看到：

```
select *
from ALL_QUEUE_SUBSCRIBERS; 
```

有许多条目，例如“TSUB_1_*”，在我看来，spring 配置“创建”新的消费者，并且配置中的名称“LUKAS”被跳过。

好的...我修改了一些春季课程（这不是解决方案，但它显示了问题出在哪里...）。我们来看看私有方法... org.springframework.jms.listener.DefaultMessageListenerContainer#initResourcesIfNecessary

```
private void initResourcesIfNecessary() throws JMSException {
        if (getCacheLevel() <= CACHE_CONNECTION) {
            updateRecoveryMarker();
        }
        else {
            if (this.session == null && getCacheLevel() >= CACHE_SESSION) {
                updateRecoveryMarker();
                this.session = createSession(getSharedConnection());
            }
            if (this.consumer == null && getCacheLevel() >= CACHE_CONSUMER) {
                this.consumer = createListenerConsumer(this.session);
                synchronized (lifecycleMonitor) {
                    registeredWithDestination++;
                }
            }
        }
    } 
```

如果我在这里更改（在此方法中，消费者名称从随机生成（我想是由 spring 随机生成）更改为我的固定名称“LUKAS”，一切都按我的预期工作 - 我的听众只读取那些在 PL/SQL 端定义的消息消费者“卢卡斯”。

所以问题是我是否可以在 spring jms:listener configuration consumer name 中以某种方式设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T11:44:06.383

尝试改变你的

```
destination-type="topic" 
```

至：

```
destination-type="durableTopic" 
```

看看这是否有效。

# python - 已知组时从 numpy ndarray 中选择行

> ID：14938551
> 
> 赞同：3
> 
> 时间：2013-02-18T14:25:30.223
> 
> 标签：python, numpy

我有一个 numpy 数组`x`和一个标签列表，`cls`它保留了 的顺序`x`，并记录了每个元素`x`所属的类。例如，对于两个不同的类`0`和`1`：

```
x = [47 21 16 19 38]
cls = [0 0 1 0 1] 
```

意思是`47, 21, 19`属于一起的，所以也是`16, 38`。

有没有一种按类选择元素的pythonic方法`x`？

现在我在做

```
for clusterId in np.unique(cls):
indices = [i for i in range(len(cls)) if cls[i]==clusterId]
print 'Class ', clusterId
for idx in indices:
    print '\t', x[idx,].tolist() 
```

但我不敢相信没有比这更优雅的了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T14:27:59.523

`cls`非常适合构建布尔索引数组：

```
>>> import numpy as np
>>> x = np.array([47, 21, 16, 19, 38])
>>> cls = np.array([0, 0, 1, 0, 1],dtype=bool)
>>> x[cls]
array([16, 38])
>>> x[~cls]
array([47, 21, 19]) 
```

请注意，如果`cls`还不是布尔数组，您可以使用`ndarray.astype`：

```
>>> cls = np.array([0, 0, 1, 0, 1])
>>> x[cls]  #Not what you want
array([47, 47, 21, 47, 21])
>>> x[cls.astype(bool)]  #what you want.
array([16, 38]) 
```

在一般情况下，您有一个`cls`数组并且您只想选择具有该索引的元素：

```
>>> x[cls == 0]
array([47, 21, 19])
>>> x[cls == 1]
array([16, 38]) 
```

要查找您拥有的所有课程，您可以使用`np.unique(cls)`

# c# - 未创建 user.config 文件但 app.config 是？

> ID：14938553
> 
> 赞同：7
> 
> 时间：2013-02-18T14:25:34.420
> 
> 标签：c#, settings, user-config

我的程序有一些内置的设置，它们都有一个用户范围。但是，当程序启动时，它只会创建 AppName.exe.config 文件，其中包含设置。

稍后在运行时保存设置时，它会在 AppData/Local/AppName/ 位置创建 user.config 文件（以前不存在），但该文件仅包含保存的设置。

为什么会这样？为什么它不会创建 user.config 或在启动时使用它（如果存在）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:30:05.673

来自[MSDN 的应用程序设置架构](http://msdn.microsoft.com/en-us/library/8eyb2ct1.aspx)：

> 1.  应用程序范围的设置可以存储在 machine.config 或 app.exe.config 文件中。Machine.config 始终是只读的，而 app.exe.config 受到安全考虑的限制，对于大多数应用程序来说是只读的。
>     
>     
> 2.  用户范围的设置可以存储在 app.exe.config 文件中，在这种情况下，它们被视为静态默认值。
>     
>     
> 3.  非默认用户范围设置存储在新文件 user.config 中，其中 user 是当前执行应用程序的人员的用户名。您可以使用 DefaultSettingValueAttribute 为用户范围的设置指定默认值。因为用户范围的设置在应用程序执行期间经常发生变化，所以 user.config 始终是读/写的。

您首先看到的是（您所说的）您的“内置设置”被存储为（Microsoft 所说的）“静态默认”用户范围的设置，这些设置存储在 app.exe 中（根据 2）。

然后，当您在运行时写回您的设置时，它们被视为“非默认”用户范围的设置，并且它们被写入 user.config（根据 3），因此为什么只有这样您才能看到用户.config 文件已创建。

简而言之，不需要每个用户的 user.config 文件，只要用户范围的设置对每个人都是相同的（默认值）。

# php - PHP上传的图像被截断

> ID：14938561
> 
> 赞同：2
> 
> 时间：2013-02-18T14:26:02.563
> 
> 标签：php, image, file-upload

我有一个上传图片的表单 < 500kb 我遇到的问题是服务器上上传的图片部分可见/缺少图片的一部分。

有谁知道可能是什么问题？

```
if(isset($_POST['Submit']))
{
    $image = $_FILES['image']['name'];  //reads the name of the file the user submitted for uploading
    if ($image) //if it is not empty
    {   
        $filename = stripslashes($_FILES['image']['name']); //get the original name of the file from the clients machine
        $extension = getExtension($filename);//get the extension of the file in a lower case format
        $extension = strtolower($extension);

        if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") && ($extension != "gif")){
            echo '<h1>Error, allowed only: .jpg, .png, .gif</h1>';
            $errors=1;
        }else{
            $size = filesize($_FILES['image']['tmp_name']);

            if ($size > 512000){
                echo '<h1 style="color:red;">Too big (Max: 500KB). Try again. </h1>';
                $errors=1;
            }else{ //MAX SIZE IS SMALLER

                $s = $_POST['first_name'];
                $ts = array("/ä/","/Ä/");
                $tn = array("a","A");

                $image_name= preg_replace($ts,$tn, str_replace(' ','+',$s)).'_'.time().'.'.$extension; // $image_name=time().'.'.$extension;
                $newname="img/uploads/images/".$image_name;

                $copied = copy($_FILES['image']['tmp_name'], $newname);
                if (!$copied)
                {
                    echo '<h1>Could not upload image</h1>';
                    $errors=1;
                }

            }
        }
    }
} 
```

![在此处输入图像描述](../Images/df2c50d89234c53d492f79ee45d8b2e9.png)

^^^^ 更多图片丢失

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T19:22:12.727

您上传的图像已被截断，因此可以假设文件未完成上传。也许服务器上的临时目录已满，也许您超出了服务器上的配额。我已经在我的服务器上测试了你的代码，这里没有问题。

# jquery - 将功能应用于特定元素

> ID：14938565
> 
> 赞同：0
> 
> 时间：2013-02-18T14:26:13.610
> 
> 标签：jquery

我知道这是基本的东西，但我就是想不通......

如何将 css 更改应用于多个元素？目前，它只适用于第一个，但没有显示错误。

```
function elemInit(){

    var elem1 = jQ('#elem1');
    var elem2 = jQ('#elem2');

    jQ(elem1, elem2).each(function(){
        jQ(this).css({
            'margin-left': '-' + jQ(this).width()/2 + 'px'
        });
    });

};

elemInit(); 
```

`jQ`是为了确保没有冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:29:01.140

jQuery 选择器像 CSS 选择器一样工作，方法内部也`css`使用`each`方法，您可以编写代码：

```
jQ('#elem1, #elem2').css('marginLeft', function(i, oldMarginLeft) {
     return '-' + jQ(this).width()/2 + 'px';
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T14:27:22.347

```
var jQelem1and2 = jQ('#elem1, #elem2');

jQelem1and2.each(function(){
    jQ(this).css({
        'margin-left': '-' + jQ(this).width()/2 + 'px'
    });
}); 
```

还是我错过了什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:30:06.680

您用来连接两个 jQuery 对象的语法 -- `$($obj1, $obj2)`-- 不正确；它做[了一些完全不同](http://api.jquery.com/jQuery/#jQuery1)的事情。

除了通过直接匹配您需要的元素来工作的其他解决方案之外，一般解决方案是使用[`.add`](http://api.jquery.com/add/)：

```
$obj1.add($obj2).each(...) 
```

最后，这里真的没有必要`.each`——`.css`直接也可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:29:48.213

试试这个

```
var elem1 = '#elem1';
var elem2 = '#elem2';  
jQ(elem1, elem2).each(function(){
    jQ(this).css({
        'margin-left': '-' + jQ(this).width()/2 + 'px'
    });
}); 
```

# c# - wpf 应用程序的动态绑定源

> ID：14938567
> 
> 赞同：0
> 
> 时间：2013-02-18T14:26:20.020
> 
> 标签：c#, sql-server, data-binding

我正在寻找一些关于如何在 C# 中构建 wpf 应用程序的建议。

我们目前有五个 sql 数据库 (2005)，它们都具有相同的数据结构（表、字段和视图等），但是它们的名称不同（A、L、M、T 0）。我正在尝试使用具有接口项目和数据访问项目的模型，因为我想继续将数据访问项目中的工作用于其他项目/屏幕。

我已经成功地创建了项目来更新来自基于数据集、sql 类或实体框架的数据库之一的数据。

我现在想创建一个窗口，您可以在其中从组合框中选择要更新的数据源，然后设置窗口数据源，例如，供应商数据显示在表单上并且可以更新。

我可以考虑构建一个方法，该方法基于组合中的选定值，查找连接字符串并创建一个供应商对象，然后将该对象绑定到窗口控件。

我还查看了集合视图源，但看不到如何动态设置它的直接方法

选择我所说的“运行时”绑定的最佳方法是什么。当然，链接和示例会很棒。

# java - 此代码的 Java 适当 I/O 用于空终止字符

> ID：14938568
> 
> 赞同：1
> 
> 时间：2013-02-18T14:26:25.550
> 
> 标签：java, linux, file-io, io

这段代码的等价物是什么`Java`？我已经放了一部分，我对 I/O 部分感兴趣：

```
int fd = open(FILE_NAME, O_WRONLY);  
int ret = 0;  
if (fd == -1) {         
    exit(EXIT_FAILURE);  
}  
while (1) {  
    ret = write(fd, "\0", 1);  
} 
```

**更新：**
代码不会复制文件。它只会每 X 秒在文件中写入一个字节（？）/char（？）（不确定是什么）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:38:29.410

这基本上就是你想要的。

```
try {
  FileOutputStream os = new FileOutputStream(FILENAME);
  while( true ){
     os.write(0);
     Thread.sleep(2000);  // wait 2 seconds before the next write
  }
}
catch( FileNotFoundException e ){
  System.err.println("watchdog error: " + e.getMessage())
  System.exit(1);
} 
```

如果您真的想像 C 代码一样忽略所有“写入”错误，请将 os.write 更改为：

```
try {
  os.write(0);
}
catch( Exception we ){
  //ignoring write exception 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:39:47.933

```
public static void main(String[] args) throws IOException, InterruptedException {
    //open the file (throws exception if failed)
    FileOutputStream fstream = new FileOutputStream("fName"); 

    while (true) {
         //write "\0" in the file (throws exception if failed)
         fstream.write(0); 
         //sleep for 1000ms, throw exception if interrupted
         Thread.sleep(1000);
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:30:38.527

```
Filereader file = new Filereader("filename");
BufferedReader reader = new BufferedReader();
String line = "";

FileWriter fstream = new FileWriter("fName");
BufferedWriter fbw = new BufferedWriter(fstream);

while ((line = reader.readLine()) != null) {

    fbw.write(line + "\n");

} 
```

你的意思是这样的？从一个文件读取并写入另一个文件。

# php - Wordpress 主题中的“if/elseif”和“is_active_sidebar”语句

> ID：14938569
> 
> 赞同：1
> 
> 时间：2013-02-18T14:26:32.640
> 
> 标签：php, wordpress, if-statement

我有这个代码：

```
<?php if ( is_active_sidebar('lt') && is_active_sidebar('rt')) { ?>

  <div class="grid_6 eqh">

<?php } elseif ( !is_active_sidebar('lt') || !is_active_sidebar('rt')) { ?>

  <div class="grid_9 eqh">

<?php } elseif ( !is_active_sidebar('lt') && !is_active_sidebar('rt')) { ?>

  <div class="grid_12 eqh">

<?php }; ?> 
```

这是我正在开发的 wordpress 主题的一部分。它应该根据侧边栏是否处于活动状态显示不同的类。如果侧边栏处于活动状态，我从 wp 得到的响应是 1，如果不是，则为 NULL。如果'lt'侧边栏处于活动状态，它会起作用，但'rt'不是，它会显示'grid_9' div，如果没有任何侧边栏处于活动状态，它会显示'grid_12' div，但如果'rt'侧边栏处于非活动状态且“lt”处于活动状态，它仍显示“grid_6”div。如果我删除第一个 if 语句：

```
<?php if ( is_active_sidebar('lt') && is_active_sidebar('rt')) { ?> 
```

它不显示任何 div。

我已经尝试了所有想到的组合，我已经分离了：

```
<?php } elseif ( !is_active_sidebar('lt') || !is_active_sidebar('rt')) { ?> 
```

在 2 个不同的语句中，尝试单独的 if 语句而不使用 'elseif'，尝试使用 'AND' 和 'OR' 而不是 '&&' 和 '||' 和一大堆其他变体，但没有任何效果。

如果有人可以帮助我或至少让我朝着正确的方向前进，我将不胜感激。

根据@one-trick-pony 的建议，代码现在是：

```
<?php
$ltActive = is_active_sidebar('lt');
$rtActive = is_active_sidebar('rt');

if($ltActive && $rtActive){
  $class = 'grid_6';

}elseif(!$ltActive && !$rtActive){
  $class = 'grid_12';

}else{
  $class = 'grid_9';      // <==
}
?>

<div class="<?php echo $class; ?> eqh"> 
```

php 代码正在运行，但似乎 WP 中的`is_active_sidebar()`函数存在错误，但他们忽略了我在 WP 支持论坛上的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:38:39.490

首先，将返回结果放入变量中（会加快处理速度）：

```
$ltActive = is_active_sidebar('lt');
$rtActive = is_active_sidebar('rt'); 
```

现在，问题出在您的第二个条件 - 您正在检查是否有任何侧边栏处于非活动状态，如果其中一个或两个都处于非活动状态，则永远不会评估第三个条件。

所以：

```
(!$ltActive && !$rtActive) 
```

必须先去：

```
(!$ltActive || !$rtActive) 
```

（最后一个条件不需要，你可以离开`else{...}`）

* * *

好的，这是代码：

```
if($ltActive && $rtActive){
  $class = 'class when both sidebars are active';

}else(!$ltActive && !$rtActive){
  $class = 'class when both sidebars are inactive';

}else{
  $class = 'class when only one of the sidebars is active (either one)';      
}

?>
<div class="<?= $class; ?>"> 
```

# delphi - 如何以编程方式检查修改权限？

> ID：14938570
> 
> 赞同：6
> 
> 时间：2013-02-18T14:26:35.467
> 
> 标签：delphi, file-permissions, uac

如何以编程方式检查文件夹的创建文件权限？修改文件权限？删除文件权限？
`GetNamedSecurityInfo`返回我可以写入`C:\Program Files`但 UAC 说`Access Denied (5)`
如何有效地确定访问权限？

我的代码：

```
function GetAccessRights(const FileName: String; ObjectType: SE_OBJECT_TYPE; 
  var Access: Cardinal): Cardinal;
var
  SecDesc: PSECURITY_DESCRIPTOR;
  pDacl: PACL;
  Trusteee: TRUSTEE_;
begin
  result := GetNamedSecurityInfo(PChar(FileName), ObjectType, 
    DACL_SECURITY_INFORMATION, nil, nil, @pDacl, nil, SecDesc);
  if ERROR_SUCCESS = result then
  begin
    // the pDacl may be NULL if the object has unrestricted access
    if pDacl <> nil then
    begin
      with Trusteee do
      begin
        pMultipleTrustee := nil;
        MultipleTrusteeOperation := NO_MULTIPLE_TRUSTEE;
        TrusteeForm := TRUSTEE_IS_NAME;
        TrusteeType := TRUSTEE_IS_UNKNOWN;
        ptstrName := 'CURRENT_USER';
      end;
      result := GetEffectiveRightsFromAcl(pDacl^, Trusteee, Access);
    end
    else
    begin
      Access := $FFFFFFFF;
      result := ERROR_SUCCESS;
    end;
    if SecDesc <> nil then
      LocalFree(Cardinal(SecDesc));
  end;
end; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T14:48:51.957

我一直在用[`NT Utilities`](http://www.wilsonc.demon.co.uk/d6ntutils.htm)这个。使用 Win2K/XP/Vista/7 对我来说效果很好

***我的设置项目中的示例：***

```
uses unitNTSecurity;

function CheckAccessToFile(DesiredAccess: DWORD; const FileOrDirName: string; ObjectName: string): Boolean;
var
  fo: TNTFileObject;
  acl: TAccessControlList;
  ace: TAccessControlElement;
  name: string;
  i: integer;
begin
  Result := False;
  if FileExists(FileOrDirName) or DirectoryExists(FileOrDirName) then
  begin
    fo := TNTFileObject.Create(FileOrDirName);
    acl := TAccessControlList.Create;
    try
      fo.GetDiscretionaryAccessList(acl);
      for i := 0 to acl.ElementCount - 1 do
      begin
        ace := acl.Element[i];
        name := ace.Name; // format is: BUILTIN\Users
        if (CompareText(ObjectName, name) = 0) and
          (ace.Type_ = aeAccessAllowed) and
          (DesiredAccess = ace.Mask) then
        begin
          Result := True;
          Break;
        end;
      end;
    finally
      fo.Free;
      acl.Free;
    end;
  end;
end; 
```

检查`modify`权限：

```
Result := CheckAccessToFile($001301BF, 'C:\foo', 'BUILTIN\Users'); 
```

* * *

**关于我的回答的注释：**上面的代码回答了 OP 问题：

> 如何以编程方式检查修改权限

但是，如果您需要做的就是*检查*您的应用程序是否能够写入目录，我**不会**采用这种 ACL 解决方案，而是尝试向其中写入一个临时文件，这样我就可以100% 确定我可以写信给它。

我将此代码用作我需要授予`modify`某些目录权限的设置过程的一部分，因此此代码用于检查该目录是否还没有这些权限 - 这可能与您的情况截然不同。

关于这个问题有几个讨论：

*   [获取文件系统限制](https://stackoverflow.com/q/12880144/937125)
*   [如何使用 Delphi 测试目录是否可写？](https://stackoverflow.com/q/3599256/937125)

所以你需要根据你的实际场景来选择你的解决方案。

# windows - 在 QMake 脚本中将 Unix 路径转换为窗口

> ID：14938577
> 
> 赞同：8
> 
> 时间：2013-02-18T14:26:59.460
> 
> 标签：windows, qt, path, qmake, visual-studio-2010

无论如何要获取包含目录的Windows 样式路径`.pro`或将存储的内容转换`_PRO_FILE_PWD_`为 Windows 样式路径？

* * *

我对`_PRO_FILE_PWD_`Qmake 中的变量有疑问，它在 Windows 上返回 unix 样式路径。

例如`c:/foo/bar`，而不是`c:\foo\bar`

这证明了路径被用作发布链接步骤的一部分的问题。

```
QMAKE_POST_LINK += copy /y $$[QT_INSTALL_BINS]\\QtCore4.dll  $${_PRO_FILE_PWD_}/bin/; 
```

我使用该`.pro`文件创建了一个 Visual Studio 项目，我可以看到，如果我在 VS 中手动将正斜杠更改为反斜杠，那么所有内容都可以正常复制而没有任何错误。

如果我不更正路径，我会在 Visual Studio 中收到以下错误。

```
PostBuildEvent:
1>  Description: copy /y C:\Qt\4.8.3\bin\QtCore4.dll E:/foo/build/win32//bin//;
1>  The syntax of the command is incorrect.
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(113,5): error MSB3073: The command "copy /y C:\Qt\4.8.3\bin\QtCore4.dll E:/foo/build/win32/bin/;
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(113,5): error MSB3073: :VCEnd" exited with code 1. 
```

* * *

**解决方案**

非常简单的解决方案，感谢 Roku，通过使用 / 字符在路径周围添加转义双引号。

```
MAKE_POST_LINK += 
    copy /y $$[QT_INSTALL_BINS]\\QtCore4.dll \"$${_PRO_FILE_PWD_}/bin/\"; 
```

注意要添加多个复制命令，您必须用 & 号分隔它们，分号不起作用。

例如

```
 MAKE_POST_LINK += 
        copy /y $$[QT_INSTALL_BINS]\\QtCore4.dll \"$${_PRO_FILE_PWD_}/bin/\" &
    MAKE_POST_LINK += 
        copy /y $$[QT_INSTALL_BINS]\\QtGui4.dll \"$${_PRO_FILE_PWD_}/bin/\"; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-30T02:01:48.873

`$$shell_path()`将斜杠转换为本地系统格式，因此：

```
QMAKE_POST_LINK += copy /y "$$shell_path($$QT_INSTALL_BINS/QtCore4.dll)" "$$shell_path($$_PROD_FILE_PWD_/bin)" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-11T07:16:14.307

奇怪的是，转义双引号适用于目标文件，但不适用于源文件。

即这有效：

```
copy C:\dev\playground\qt\SampleProject\debug_qt.conf "C:/dev/playground/qt/build-SampleProject-Qt_8_4_6_Desktop-Debug/qt.conf" 
```

但这不是：

```
copy "C:/dev/playground/qt/SampleProject/debug_qt.conf" "C:/dev/playground/qt/build-SampleProject-Qt_8_4_6_Desktop-Debug/qt.conf" 
```

如前所述，[`$$shell_path(path)`](http://doc.qt.io/qt-5/qmake-function-reference.html#shell-path-path)在 Qt5 下工作。

在 Qt4 上，[`$$replace(string, old_string, new_string)`](http://doc.qt.io/qt-4.8/qmake-function-reference.html#replace-string-old-string-new-string)可以改用。

例子：

```
MY_PATH = $$PWD
message($$replace(MY_PATH, /, \\)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T18:07:43.357

我通过使用 / 字符在路径周围添加转义双引号来实现此功能：

```
QMAKE_POST_LINK += 
    copy /y $$[QT_INSTALL_BINS]\\QtCore4.dll \"$${_PRO_FILE_PWD_}/bin/\"; 
```

# performance - Haskell foldl'（++）性能不佳

> ID：14938584
> 
> 赞同：5
> 
> 时间：2013-02-18T14:27:19.617
> 
> 标签：performance, haskell, lazy-evaluation, strictness, weak-head-normal-form

我有这个代码：

```
import Data.List

newList_bad  lst = foldl' (\acc x -> acc ++ [x*2]) [] lst
newList_good lst = foldl' (\acc x -> x*2 : acc) [] lst 
```

这些函数返回每个元素乘以 2 的列表：

```
*Main> newList_bad [1..10]
[2,4,6,8,10,12,14,16,18,20]
*Main> newList_good [1..10]
[20,18,16,14,12,10,8,6,4,2] 
```

在 ghci 中：

```
*Main> sum $ newList_bad [1..15000]
225015000
(5.24 secs, 4767099960 bytes)
*Main> sum $ newList_good [1..15000]
225015000
(0.03 secs, 3190716 bytes) 
```

为什么`newList_bad`函数的工作速度比 慢 200 倍`newList_good`？我知道这不是该任务的好解决方案。但是为什么这个无辜的代码工作得这么慢呢？

这是什么“4767099960字节”？对于那个简单的操作，Haskell 使用了 4 GiB？

编译后：

```
C:\1>ghc -O --make test.hs
C:\1>test.exe
225015000
Time for sum (newList_bad [1..15000]) is 4.445889s
225015000
Time for sum (newList_good [1..15000]) is 0.0025005s 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T18:10:27.277

关于这个问题有很多困惑。给出的通常原因是“在列表末尾重复附加需要重复遍历列表，因此是`O(n^2)`”。*但在严格*的评估下，它只会如此简单。在惰性评估下，一切都应该被延迟，所以它引出了一个问题，是否真的存在这些重复的遍历和附加。最后的添加是由前面的消费触发的，由于我们在前面消费，所以列表越来越短，所以这些动作的确切时间是不清楚的。所以真正的答案更微妙，并处理惰性求值下的具体归约步骤。

直接的罪魁祸首是`foldl'`仅将其累加器参数强制为弱头范式 - 即直到暴露非严格构造函数。这里涉及的功能是

```
(a:b)++c = a:(b++c)    -- does nothing with 'b', only pulls 'a' up
[]++c = c              -- so '++' only forces 1st elt from its left arg

foldl' f z [] = z
foldl' f z (x:xs) = let w=f z x in w `seq` foldl' f w xs

sum xs = sum_ xs 0     -- forces elts fom its arg one by one
sum_ [] a = a
sum_ (x:xs) a = sum_ xs (a+x) 
```

所以实际的归约序列是 (with `g = foldl' f`)

```
sum $ foldl' (\acc x-> acc++[x^2]) []          [a,b,c,d,e]
sum $ g  []                                    [a,b,c,d,e]
      g  [a^2]                                   [b,c,d,e]
      g  (a^2:([]++[b^2]))                         [c,d,e]
      g  (a^2:(([]++[b^2])++[c^2]))                  [d,e]
      g  (a^2:((([]++[b^2])++[c^2])++[d^2]))           [e]
      g  (a^2:(((([]++[b^2])++[c^2])++[d^2])++[e^2]))   []
sum $ (a^2:(((([]++[b^2])++[c^2])++[d^2])++[e^2])) 
```

`O(n)`请注意，到目前为止， 我们只执行了步骤。`a^2`可在此处立即用于`sum`的消费，但`b^2`不是。**我们留下了`++`表达式的左嵌套结构。**其余的最好[由 Daniel Fischer 在这个答案](https://stackoverflow.com/a/13879693/849891)中解释。它的要点是，要`b^2`退出，`O(n-1)`必须执行步骤 - 在此访问之后留下的结构仍将是左嵌套的，因此下一次访问将采取`O(n-2)`步骤，依此类推 - 经典`O(n^2)`行为。所以真正的原因是它`++` **没有强迫或重新安排它的论点以达到有效的程度**。

这实际上是违反直觉的。我们*可以*期待惰性评估在这里神奇地为我们“做”。毕竟我们只是表达了*将来*`[x^2]`添加到列表末尾的意图，我们实际上并没有立即这样做。所以这里的时间是关闭的，但它可以正确 - 当我们访问列表时，如果时间*正确*，新元素将被添加到其中并立即使用：如果将在（空间方面）之后添加到列表中)，也就是说，*就在（及时）*被消耗之前，遍历/访问将始终为.**`c^2``b^2` *`b^2``O(1)`***

 ***这是通过所谓的“差异列表”技术实现的：

```
newlist_dl lst = foldl' (\z x-> (z . (x^2 :)) ) id lst 
```

`++[x^2]`如果您想一想，它看起来与您的版本完全相同。它表达了相同的意图，并且也留下了左嵌套结构。

正如 Daniel Fischer 在同一个答案中所解释的那样，不同之处在于**chain`(.)`在**第一次被强制时，会逐步将***自身重新排列成*一个右嵌套`($)`结构**¹，`O(n)`之后每次访问都是`O(1)`并且附加的时间是最佳的，正如在上面的段落，所以我们留下了整体`O(n)`行为。

* * *

¹这有点神奇，但它确实发生了。:)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-18T14:41:08.430

经典列表行为。

记起：

```
(:)  -- O(1) complexity
(++) -- O(n) complexity 
```

所以你正在创建一个 O(n^2) 算法，而不是一个 O(n) 算法。

对于这种以增量方式附加到列表的常见情况，请尝试使用[dlist](http://hackage.haskell.org/packages/archive/dlist/0.3/doc/html/Data-DList.html)，或者只是在最后反转。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T18:57:55.803

用更大的视角补充其他答案：对于惰性列表，`foldl'`在返回列表的函数中使用通常是一个坏主意。 `foldl'`当您将列表缩减为严格（非惰性）标量值（例如，对列表求和）时，它通常很有用。但是当你建立一个列表作为结果时，`foldr`通常会更好，因为懒惰；构造函数是惰性的`:`，因此在实际需要之前不会计算列表的尾部。

在你的情况下：

```
newList_foldr lst = foldr (\x acc -> x*2 : acc) [] lst 
```

这实际上与`map (*2)`：

```
newList_foldr lst = map (*2) lst
map f lst = foldr (\x acc -> f x : acc) [] lst 
```

评估（使用第一个`map`-less 定义）：

```
newList_foldr [1..10] 
  = foldr (\x acc -> x*2 : acc) [] [1..10]
  = foldr (\x acc -> x*2 : acc) [] (1:[2..10])
  = 1*2 : foldr (\x rest -> f x : acc) [] [2..10] 
```

这大约是 Haskell 将评估何时`newList [1..10]`被强制。如果这个结果的消费者需要它，它只会进一步评估 - 并且只需要满足消费者的需求。例如：

```
firstElem [] = Nothing
firstElem (x:_) = Just x

firstElem (newList_foldr [1..10])
  -- firstElem only needs to evaluate newList [1..10] enough to determine 
  -- which of its subcases applies—empty list or pair.
  = firstElem (foldr (\x acc -> x*2 : acc) [] [1..10])
  = firstElem (foldr (\x acc -> x*2 : acc) [] (1:[2..10]))
  = firstElem (1*2 : foldr (\x rest -> f x : acc) [] [2..10])
  -- firstElem doesn't need the tail, so it's never computed!
  = Just (1*2) 
```

这也意味着`foldr`-based`newList`也可以与无限列表一起使用：

```
newList_foldr [1..] = [2,4..]
firstElem (newList_foldr [1..]) = 2 
```

`foldl'`另一方面，如果使用，则必须始终计算整个列表，这也意味着您不能处理无限列表：

```
firstElem (newList_good [1..])    -- doesn't terminate

firstElem (newList_good [1..10])
  = firstElem (foldl' (\acc x -> x*2 : acc) [] [1..10])
  = firstElem (foldl' (\acc x -> x*2 : acc) [] (1:[2..10]))
  = firstElem (foldl' (\acc x -> x*2 : acc) [2] [2..10])
  -- we can't short circuit here because the [2] is "inside" the foldl', so 
  -- firstElem can't see it
  = firstElem (foldl' (\acc x -> x*2 : acc) [2] (2:[3..10]))
  = firstElem (foldl' (\acc x -> x*2 : acc) [4,2] [3..10])
    ...
  = firstElem (foldl' (\acc x -> x*2 : acc) [18,16,14,12,10,8,6,4,2] (10:[]))
  = firstElem (foldl' (\acc x -> x*2 : acc) [20,18,16,14,12,10,8,6,4,2] [])
  = firstElem [20,18,16,14,12,10,8,6,4,2]
  = firstElem (20:[18,16,14,12,10,8,6,4,2])
  = Just 20 
```

`foldr`基于 - 的算法需要 4 个步骤来计算`firstElem_foldr (newList [1..10])`，而基于-的算法需要`foldl'`大约 21 个步骤。更糟糕的是，这 4 个步骤是固定成本，而 21 与输入列表的长度成正比——<code>firstElem (newList_good [1..150000]) 需要 300,001 步，而`firstElem (newList_foldr [1..150000]`需要 5 步，`firstElem (newList_foldr [1..]`就像那件事。

另请注意，`firstElem (newList_foldr [1.10])`在恒定空间和恒定时间中运行（它必须；您需要比恒定时间更多的时间来分配比恒定空间更多的空间）。严格`foldl`语言的突出性——“`foldl`是尾递归的并且在恒定空间中运行，`foldr`不是尾递归并且在线性空间中运行或更糟”——在 Haskell 中是不正确的。***

# c# - 转换列表 进入 ICollection 类型的对象

> ID：14938587
> 
> 赞同：0
> 
> 时间：2013-02-18T14:27:27.887
> 
> 标签：c#, asp.net-mvc, linq, many-to-many

我在 DB First MVC3 项目中有两个表，表之间存在多对多链接。

这些表结合起来产生一个可编辑的矩阵，并通过一个 Ajax 调用返回一个简单的数组。

由于多对多关系，我现在需要更改数组：

```
List<int[]> 
```

使用如下值：{AssetId：1，CourseId：2}{AssetId：1，CourseId：3}{AssetId：1，CourseId：4}{AssetId：2，CourseId：3}{AssetId：2，CourseId：4}

给一个：

```
ICollection<int, int[]> 
```

使用这样的值：

{AssetId: 1, CourseId[2, 3, 4]}{AssetId: 2, CourseId[3, 4]}

我被卡住了，非常感谢任何帮助，甚至是正确方向的一点。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:34:19.573

您可以使用`GroupBy`方法按数组的索引对其进行分组，例如：

```
var groupedResult = list.GroupBy(x => x[0]); 
```

并使用`foreach`语句循环结果：

```
foreach(var item in groupedResult)
{
  var assetId = item.Key ;
  foreach(int courseId in item)
  {
     // courses Id here
  }
} 
```

您建议的解决方案：

```
var courseIds = list.Where(o => o[0] == item[0]).Distinct(); 
```

# java - 如何在 JGraphT 中复制图形？

> ID：14938591
> 
> 赞同：3
> 
> 时间：2013-02-18T14:27:48.657
> 
> 标签：java, graph, jgrapht

我需要制作一个简单图表的副本。

我在图生成器中看不到图复制器，并且 UndirectedGraph 没有实现克隆方法。

年，我可以用手抄一张图。但我想在一行中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:59:33.310

UndirectedGraph 是一个接口。然而，大多数具体的子类（例如 SimpleGraph）都扩展了 AbstractBaseGraph，后者实现了 clone() 方法。

所以，如果你能保证你手中的UndirectedGraph继承自AbstractBaseGraph，只需转换为AbstractBaseGraph并调用clone方法。

```
public void someMethod(UndirectedGraph g)
{
  // Do some stuff...

  ((AbstractBaseGraph)g).clone(); // <== Your 1-liner

  // Do some more stuff...
} 
```

但请记住，[根据 JavaDoc](http://jgrapht.org/javadoc/org/jgrapht/graph/AbstractBaseGraph.html#clone%28%29)，clone() 方法执行的是浅克隆。因此，图形实例被克隆，但其中的顶点和边不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-02T19:32:43.560

A very crude (but quick) solution to copy a graph would be:

```
 DirectedGraph<String, DefaultEdge> graph = new DefaultDirectedGraph<String, DefaultEdge>(DefaultEdge.class);
    DirectedGraph<String, DefaultEdge> revGraph = new EdgeReversedGraph<>(graph);
    DirectedGraph<String, DefaultEdge> graphCopy = new EdgeReversedGraph<>(revGraph);
    //To reduce the memory complexity
    revGraph = null; 
```

However, it is to be kept in mind that the solution would have high memory & computation complexity if the graph is too big. Discarding the intermediate reversed graph would improve the solution.

# php - Jquery - 如何选择 PHP 生成的选项

> ID：14938593
> 
> 赞同：1
> 
> 时间：2013-02-18T14:27:49.223
> 
> 标签：php, jquery, select, include

我有一个由 php 生成的选择。

```
<div id="panneauModifAnnonce" class="divAdmin">
<form id="modifierAnnonceForm">

<label class ="labelEmail">ID</label>
<input id="inp_idAnnonce" class ="inputEmail" />

<label class ="labelEmail">Titre</label>
<input id ="inp_titreAnnonce" class ="inputEmail" />

<label class ="labelEmail">Description</label>
<textarea id ="inp_txtDescription" class ="inputEmail" maxlength="500" ></textarea>

<label class ="labelEmail">Taille</label>
<select id ="inp_selectTaille" class ="inputEmail">
<option value="" selected="selected"> </option>
<optgroup label="Taille">
<option value="XS-36">XS-36 </option>
<option value="S-38">S-38 </option>
<option value="M-40">M-40 </option>

</optgroup>
<optgroup label="Pointure">                                                 
<option value="36">36 </option>
<option value="37">37 </option>
<option value="38">38 </option>

</optgroup>                                                
</select>

<label class ="labelEmail">Couleur</label>
<input id="inp_couleurAnnonce" class ="inputEmail" />

<label class ="labelEmail">Marque</label>
<input id ="inp_marqueAnnonce" class ="inputEmail" />

<label class ="labelEmail">Prix</label>
<input id ="inp_prixAnnonce" class ="inputEmail" />

<label class ="labelEmail">Annonceur</label>
<input id ="inp_annonceur" class ="inputEmail" />

<label class ="labelEmail">Catégories</label>
<select id ="inp_selectCatAnnonces" class ="inputEmail">
<option value="" selected="selected"> </option>
   <?php include_once 'includes/inc_selectCategories.php'; ?>
</select>

<label class ="labelEmail">Validité</label>
<div>
   <input type="radio" name="rad_valid" id ="inp_radValide" value ="1" /><span>Oui</span>
   <input type="radio" name="rad_valid" id ="inp_radinvalide" value ="0" /><span>Non</span>
</div>
<input type="submit" name="submit_modifier" value="Enregistrer les modifications" />
<input type="button" name ="btn_annulerModif" value ="Annuler" />
</form>
</div><!-- panneauModifAnnonce--> 
```

我正在尝试使用 jquery 获取和选择值，但似乎 jquery 不喜欢包含函数。我读过其他一些帖子，但我认为他们没有谈论同样的问题。任何帮助都会很棒！谢谢！

jQuery代码：

```
$(document).ready(function(){
    $("#btn_modifierAnnonce").click(function(){

        $.each($("input[type='checkbox']:checked"), function(){
            //attribution des données au champs correspondant et sauvegarde de la valeur du champs
            var id = $(this).parent().parent().find("td:eq(0)");
            $("#inp_idAnnonce").val(id.text());

            var titre = $(this).parent().parent().find("td:eq(1)");    //  eq(2) = cherche le 2è element qui correspond au sélécteur                                                
            $("#inp_titreAnnonce").val(titre.text());

            var description = $(this).parent().parent().find("td:eq(2)");
            $("#inp_txtDescription").val(description.text()); 

            var taille = $(this).parent().parent().find("td:eq(4)");            
            $("#inp_selectTaille option[value="+taille.text()+"]").attr('selected','selected');

            var couleur = $(this).parent().parent().find("td:eq(5)");
            $("#inp_couleurAnnonce").val(couleur.text());

            var marque = $(this).parent().parent().find("td:eq(6)");
            $("#inp_marqueAnnonce").val(marque.text());

            var prix = $(this).parent().parent().find("td:eq(8)");
            $("#inp_prixAnnonce").val(prix.text()); 

            //it doesnt work only for this case.. 
            var categorie = $(this).parent().parent().find("td:eq(7)");
            $('#inp_selectCatAnnonces option[value="'+categorie.text()+'"]').attr('selected','selected');

            var annonceur = $(this).parent().parent().find("td:eq(9)");
            $("#inp_annonceur").val(prix.text());

            var validite = $(this).parent().parent().find("td:eq(10)");
            if(validite.text()=="1"){
                $('#inp_radValide').attr('checked','checked');                        
            }
            else{
                $('#inp_radinvalide').attr('checked','checked');                        
            }

        })//fin $.each(input select)
    })//fin $(#btn_modifierAnnonce).click
 })//fin document.ready 
```

我使用 var 类别获得了正确的值，但我无法在选择中自动选择值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:31:28.593

这就是该`val()`功能的用途：

```
$("#inp_selectCatAnnonces").val('newlyselectedvalue'); 
```

并通过以下方式获取所选值：

```
$("#inp_selectCatAnnonces").val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:40:46.893

您可能对引号和 value 属性有疑问。尝试像这样组合简单和双引号：

```
$('#inp_selectCatAnnonces option[value="'+categorie.text()+'"]').attr('selected', true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:05:02.577

要开始只需简单地删除`selected="selected"`. **因为无论如何默认选择**第一个元素。

然后包括`includes/inc_selectCategories.php`你正在做的事情。确保填充的数据是有效的 HTML！使用 FireBug 或类似工具执行此操作。（大多数浏览器中的 F12）。

然后将您的 Javascript 代码更改为：

```
// On DOM ready. This is very important!
$(function() {
    var categorie = $(this).parent().parent().find("td:eq(7)");
    // console.log ( categorie.text() ); // Make sure it returns a valid value!!

    // Select the right value from the dropdown
    $('#inp_selectCatAnnonces').val(categorie.text());
}); 
```

只要确保您至少`alert`获得您想要从中获得的价值`categorie.text()`。我怀疑该值与`<select>`列表中的值不完全匹配。还要确保`values`里面的内容是正确的。

这是一个说明此行为的示例：

[http://jsfiddle.net/3g4PU/](http://jsfiddle.net/3g4PU/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T15:13:50.150

对不起，我打扰了你们：我自己找到了。

我检查了 PHP 脚本，选项的值是 id 不是正确的值！

谢谢大家！

# sql-server - 使用分区或使用单独的数据库进行表扩展？

> ID：14938598
> 
> 赞同：2
> 
> 时间：2013-02-18T14:28:06.503
> 
> 标签：sql-server, database-design, azure, database-performance, database-partitioning

假设我有一张表（我们称之为`BigTable`），每天可以体验**5,000,000 次插入**（可能有同样多的 SELECT）。插入的每一行大约为 50kb。

这些每日 INSERT 平均分配给 5 个客户端（该表有一个名为 的 FK `ClientID`）。永远不需要跨多个客户端选择或连接数据。

随着这张表的增长，我担心数据库性能，所以我想出了两个解决方案。

**解决方案 1：**

*   分区`BigTable`依据`ClientID`
*   将每个分区存储在服务器上的单独硬盘上（使用 Azure 博客存储）。
*   将 1 个月前的所有数据（存档数据，但仍需要可查询）分区到另一组 READONLY 分区中。

本质上，这意味着它们自己的存储设备上的以下分区：

*   主要（所有数据不包括`BigTable`）
*   ClientA `BigTable`（每天 5,000,000 行 / 5 个客户 x 30 天 = 30,000,000 行）
*   ClientB `BigTable`（30,000,000 行）
*   ClientC `BigTable`（30,000,000 行）
*   ClientD `BigTable`（30,000,000 行）
*   ClientE `BigTable`（30,000,000 行）
*   客户A的`BigTable`档案
*   客户B的`BigTable`档案
*   ClientC的`BigTable`档案
*   ClientD的`BigTable`档案
*   ClientE的`BigTable`档案

存档表中的行数将为 (5,000,000) x (DB 天数) - (30,000,000)。这仍然是一个巨大的表格，但只会用于绘制奇怪的报告。

SQL Server 将托管在 14GB、8 核的 Azure VM 上。

**解决方案 2：**

另一种选择是为每个客户端托管单独的数据库。这意味着每个人都将拥有自己的专用 SQL Server 机器。归档数据仍会进行分区。

由于数据的物理分离，此选项不是最佳选择。必须管理对多个数据库的更新可能会带来很大的问题。为每个客户端建立单独的数据库连接也是开发人员的考虑因素。

有人可以就这些选项提出建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T16:33:16.560

由于您使用 [azure] 和 [sql-server] 对此进行了标记，因此我假设您正在尝试在 Windows Azure 中执行此操作。如果是这种情况，那么 a) 客户端分区不一定是一个好主意，并且 b) SQL 可能不是最适合您的问题的（完整）。

在构建可扩展架构时，分区策略不应该基于特定的东西，比如“客户端”，而是更随意的东西。原因很简单——除非客户端有独立的理由，例如不希望他们的数据与其他数据混合，或者每个客户端有不同的 SLA，否则选择“客户端”作为分区可能不会呈现最佳结果。如果你 80% 的业务是由单个客户端生成的，那么你的问题还没有解决，仍然需要维护*n 个*单独的数据库来应对边际负载。

每天 500 万次数据库插入并不是一个很大的数字，但对于托管在 Azure IaaS 或 Azure SQL 数据库中的 SQL Server 来说可能是一个很大的数字——由于底层商品硬件的性能。在确定如何对 SQL 进行分区之前，请先问自己两个问题。首先，您希望从数据中获得哪些用途和性能特征？（它必须立即保持一致吗？您可以异步处理数据吗？）其次，您是否将这些特征与其他数据存储技术进行了对比？您是否考虑过表存储（或 Redis 等非 MS 解决方案）？

在尝试了几个选项后，您可能会发现：

*   有时，SQL 可以很好地存储某些数据。
*   大部分处理可以异步完成，因此插入的峰值性能无关紧要（在 24 小时内进行 5 百万次插入不是问题）。
*   SQL 可能不适合长期存储。
*   使用 map-reduce 可以有效地查询旧数据，而不是 SQL 查询。

例如，我有一个以一秒为间隔跟踪车辆的应用程序。它的目标是 100,000 辆汽车，但其架构能够在不更改任何代码或数据库的情况下扩展到数百万辆。但从中期来看，它必须每天处理 7200 万次插入。所有这些都在一个小于 10GB 的 Windows Azure SQL 数据库和一大堆表存储上运行。这样做的原因是，虽然我想归档所有数据（7200 万行），但我不需要复杂的 SQL 查询访问它，所以它很高兴地位于表存储中。我在 SQL 中存储的是数据的摘要。所以在我的例子中，我只对车辆的旅程感兴趣（起点和终点位置，行驶距离等），这意味着我每天每辆车只有两到三行我需要的 SQL — 大大减少了数据库的负载。此外，我的瓶颈在于数据的收集，因此我立即将数据添加到（Windows Azure）队列中——并担心在单独的工作负载中汇总数据。

这个答案可能有点长，但是是为了让你更仔细地思考你的数据模型，而不是仅仅试图思考如何用 SQL 来解决问题。[有关更多详细信息，请查看CALM](https://github.com/projectcalm/Azure-EN)中的数据模型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T18:52:39.783

给您的一些想法： 1) 使用 Azure 表而不是 SQL。有 PartitionKey = ClientID。每个表可以是 200TB 并支持 20k IOPS。每个分区是 2k IOPS，因为客户端在逻辑上是分开的，你会得到一个自然的负载平衡（Azure load balances by Partition）。这也将使您不必运行/管理 XL VM 24x7（即便宜得多）。存储成本将是相同的，因为 VM 的数据驱动器无论如何都由 Azure 存储提供支持。每天 500 万次插入仅为约 60/秒，因此会有很大的增长空间。这在 b/c 中尤其如此，您正在执行相当简单的插入/选择并且不会跨越客户端边界。

2）如果你想做一个每个客户端的数据库，我会选择 SQL Azure。配置速度要快得多，每个数据库都是一个单独的缩放单元（这将防止一个客户端为其他客户端创建问题）。您还可以根据客户端更改动态更改数据库。

3）如果你想要一个单一的单体数据库，我会在 VM 上使用 SQL Server。创建多个数据驱动器并将它们安装为条带集。对于 XL VM，最多可以映射 16 个驱动器。这会将数据库的最大大小限制为 16TB，因此您需要有一些机制来老化/归档/垃圾收集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:47:50.867

您不仅需要考虑访问性能，还需要考虑灾难恢复性能。仅在活动月份，每个客户端的容量为 6TB，我强烈建议将客户端保存在单独的数据库中。

如果您有一个不错的 Continuos 集成和自动部署过程，那么保持数据库模式同步应该不是什么大问题。

# python - 默认情况下，按钮调用的函数的标准输出在哪里？

> ID：14938600
> 
> 赞同：0
> 
> 时间：2013-02-18T14:28:07.437
> 
> 标签：python, tkinter

我试图调用的函数如下：

```
def numberitems(self):
    files = len(os.listdir(self.directory))
    print (items) 
```

按钮的代码：

```
button = Button(text = 'Count Items', command = Class1.numberItems()).pack() 
```

我在哪里导入课程：

```
from class import Class1 
```

定义目录：

```
def loadDirectory():
    return Class1(filedialog.askdirectory())
    dir = loadDirectory() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:33:30.313

您所描述的不是标准输出。`print`当您使用该语句时，标准输出是事情的去向。您所描述的是函数的返回值。

Tkinter 就像所有其他 python 包一样——返回值被返回给调用者。这种情况下的调用者是事件循环。事件循环不知道如何使用它调用的函数的返回值，所以它把结果扔掉了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:32:18.813

根据 tcaswell 给出的上下文，您的主代码中有几个错误。

假设一个`chrome.py`是：

```
class Chrome:
    directory = ""

    def __init__(self, directory):
        self.directory = directory

    def numberOfFiles(self):
        return len(os.listdir(self.directory)) 
```

要调用它来打印 的结果`numberOfFiles`，您需要执行与此类似的操作：

文件：`q_14938600.py`

```
import os
from chrome import Chrome
from Tkinter import *

class App(object):
    """Basic TK App."""

    def __init__(self, parent):
        f = Frame(parent)
        f.pack(padx=15, pady=15)

        # Here I initiate the Chrome class, and set its directory. I'm using os.getcwd() as an example.
        self.ch = Chrome(os.getcwd())

        # Here I tell the button what to call when clicked. Note I'm NOT passing arguments to the function, just a reference.
        button = Button(f, text='Count Files', command=self.printFileCount)
        button.pack(side=BOTTOM)

    def printFileCount(self):
        # And here, I print the output of ch.numberOfFiles, which was defined in the Chrome class
        print(self.ch.numberOfFiles())

if __name__ == "__main__":
    # This is just standard app stuff
    root = Tk()
    root.title('q_14938600')
    app = App(root)
    root.mainloop() 
```

# django - 将“，”替换为“。” 在 Django 的模板中

> ID：14938601
> 
> 赞同：0
> 
> 时间：2013-02-18T14:28:12.080
> 
> 标签：django

我有一个问题）模型：

```
var = models.FloatField() 
```

当我在模板中得到它时：

```
dict.var 
```

我有**`15,78`**，但我需要**`15.78`**。我需要将 var 更改为十进制字段或编写过滤器？在文档中我没有找到任何模板过滤器，可以做我想要的。谢谢

# javascript - 重叠 jquery mouseover 事件

> ID：14938603
> 
> 赞同：0
> 
> 时间：2013-02-18T14:28:28.820
> 
> 标签：javascript, jquery, html, css

我正在写一张卡片清单。
卡片列表中的 li 元素同时具有 mouseenter 和 mouseleave 事件。

```
mouseenterCard: function(index) {
    var nOnRight = index+2;
    var n = index+1;

    if (n!=1) {
        $('#cards-list li:nth-child('+n.toString()+')').animate({'margin-left': '30px'},
                                                                 "fast",
                                                                 function() {

                                                                 });
    }
    $('#cards-list li:nth-child('+nOnRight.toString()+')').animate({'margin-left': '30px'},
                                                                   "fast");
},
mouseleaveCard: function(index) {
    var nOnRight = index+2;
    var n = index+1;
    if (n!=1) {
        $('#cards-list li:nth-child('+n.toString()+')').animate({'margin-left': marginLeft.toString()+'px'},
                                                                 "fast",
                                                                 function() {

                                                                 });
    }
    $('#cards-list li:nth-child('+nOnRight.toString()+')').animate({'margin-left': marginLeft.toString()+'px'},
                                                                   "fast");
}

$('#cards-list').on('mouseenter', 'li' ,function(e){
    CardList.getInstance().mouseenterCard($(this).index());
});

$('#cards-list').on('mouseleave', 'li' ,function(e){
    CardList.getInstance().mouseleaveCard($(this).index());
}); 
```

这是[演示](http://www.catoyeung.com/showcase/cards.php)
当您在两个元素之间快速交换时，li 元素的行为很奇怪。
问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:34:45.350

您可以尝试去抖动/限制事件。 [http://benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)

如果您有正在运行的动画，请在 mouseleave 事件上使用 .stop() 来中断动画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:33:11.430

当您多次在同一个元素上移动时，动画会排队。您必须使用`.stop`or停止动画`.finish`（稍后立即结束动画）：

```
$('#cards-list li:nth-child('+nOnRight.toString()+')').stop().animate(... 
```

# java - 使用 SOAP 使用 Sharepoint Web 服务

> ID：14938604
> 
> 赞同：1
> 
> 时间：2013-02-18T14:28:28.760
> 
> 标签：java, web-services, soap

在我的 Netbeans 中，在干净并成功构建之后，运行我的程序时会出现以下消息：

```
SEVERE: Injection on a method requires a void return type
 symbol: javax.xml.ws.WebServiceRef
 location: public com.microsoft.schemas.sharepoint.soap.directory.GetUserInfoResponse$GetUserInfoResult pt.marinha.ditic.dss.NewWebServiceFromWSDL.getUserInfo(java.lang.String)
SEVERE: Injection on a method requires a void return type
 symbol: javax.xml.ws.WebServiceRef
 location: public com.microsoft.schemas.sharepoint.soap.directory.GetUserInfoResponse$GetUserInfoResult pt.marinha.ditic.dss.NewWebServiceFromWSDL.getUserInfo(java.lang.String)
SEVERE: Annotations processing failed for file:/C:/Users/m9351234/Documents/NetBeansProjects/SharePointWS/SharePointWS-war/build/web/
INFO: WS00018: Webservice Endpoint deployed

INFO: WEB0671: Loading application [SharePointWS-war] at [/SharePointWS-war]
INFO: SharePointWS-war was successfully deployed in 1.480 milliseconds. 
```

这意味着什么？

*我不知道如何处理 Java 中的用户组方法。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:33:11.417

根据错误消息，您似乎正在尝试使用一些依赖注入框架，该框架仅支持对具有 void 返回类型的方法进行成员注入，而您的方法正在返回一个对象实例。

# .net - 如何在不覆盖的情况下上传到 Azure Blob 存储？

> ID：14938606
> 
> 赞同：26
> 
> 时间：2013-02-18T14:28:42.950
> 
> 标签：.net, azure, azure-storage

默认情况下，调用 UploadFromStream 会覆盖文件 - 我如何确保仅上传不在容器中的 blob？

```
CloudBlockBlob blockBlob = container.GetBlockBlobReference(blobName);
blockBlob.UploadFromStream(stream) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-18T14:28:42.950

向代码添加访问条件，以便检查 blob 的[ETag](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.blobproperties.etag.aspx)属性 - 允许使用通配符，因此我们希望仅在具有此名称的 blob 没有任何 etag 时才允许上传（这是一种迂回的说法，确实此 blob 名称存在）。

您会得到一个 StorageException，如下所述。

```
 CloudBlockBlob blockBlob = container.GetBlockBlobReference(blobName);
    try {
        blockBlob.UploadFromStream(stream, accessCondition: AccessCondition.GenerateIfNoneMatchCondition("*"));
    } catch (StorageException ex) {
        if (ex.RequestInformation.HttpStatusCode == (int)System.Net.HttpStatusCode.Conflict) {
            // Handle duplicate blob condition
        }
        throw;
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-03-16T21:58:11.010

Azure 现在有一个只会添加而不是覆盖的访问条件：`AccessCondition.GenerateIfNotExistsCondition()`

定义：

> 构造一个访问条件，以便仅当资源不存在时才执行操作。

例子：

```
var accessCondition = AccessCondition.GenerateIfNotExistsCondition();
blockBlob.UploadFromStream(stream, accessCondition); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-03T22:33:38.407

Rob Church 提供的答案似乎还可以。检查字符串是否有错误不是最佳实践，可以通过以下方式改进：

```
 CloudBlockBlob blockBlob = container.GetBlockBlobReference(blobName);
        try
        {
            blockBlob.UploadFromStream(stream, accessCondition: AccessCondition.GenerateIfNoneMatchCondition("*"));
        }
        catch (StorageException ex)
        {
            if (ex.RequestInformation.HttpStatusCode == (int)System.Net.HttpStatusCode.Conflict)
            {
                // Handle duplicate blob condition
            }
            throw;
        } 
```

# perl - 环境变量在 Perl 中不起作用

> ID：14938613
> 
> 赞同：1
> 
> 时间：2013-02-18T14:29:03.197
> 
> 标签：perl, variables, environment, dbi, dbd

我试图在程序一开始就在 Perl 中设置一些环境变量，但我一直收到错误消息，除非我在调用我的 Perl 脚本的 Bash 脚本中设置它们。

```
#!/usr/bin/perl -w
$ENV{'ORACLE_HOME'}='path';
$ENV{'LD_LIBRARY_PATH'}='path'; 
```

这不起作用，但我的 shell 脚本可以：

```
#!/bin/bash
export ORACLE_HOME=path
export LD_LIBRARY_PATH=path
./perlscript.pl 
```

我设置这些路径是为了让我的 DBI 模块工作。理想情况下，我想在 Perl 脚本中设置路径，而不是使用 Bash 脚本。

### 错误：

> Install_driver (Oracle) 失败：无法为模块 DBD 加载 /some/path/：Oracle：libclntsh.so.11.1：无法打开共享对象文件：/some/path/DynaLoader.pm 第 230 行没有此类文件或目录

### 代码

```
use DBI;
my $dbh = DBI->connect("DBI:Oracle:host=something;port=something;sid=something");
my $sth = $dbh->perepare($query);
$sth->execute();
$sth->finish(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T14:40:42.753

IIRC，这是因为 C 库制作了自己的环境副本和/或因为`LD_LIBRARY_PATH`在加载可执行文件时使用。解决方法：

```
#!/usr/bin/perl -w
if (!$ENV{ORACLE_HOME}) {
    $ENV{ORACLE_HOME} = 'path';
    $ENV{LD_LIBRARY_PATH} = 'path';
    exec($^X, '--', $0, @ARGV);
}
... 
```

如果我错了，请先尝试以下方法。它确保在加载使用它们的模块之前设置环境变量。

```
#!/usr/bin/perl -w
BEGIN {
    $ENV{ORACLE_HOME} = 'path';
    $ENV{LD_LIBRARY_PATH} = 'path';
}
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T14:40:36.207

您的问题可能是在您实际设置这些环境变量之前，模块已包含在编译阶段。

如果是这样，如果您将它们放在一个`BEGIN { ... }`块中，它应该可以工作。

```
#!/usr/bin/perl -w
BEGIN
{
    $ENV{'ORACLE_HOME'}='path';
    $ENV{'LD_LIBRARY_PATH'}='path';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T05:43:36.927

当 Perl 启动时，它会生成自己的子 shell。该子外壳不包含所有功能，例如采购仅可用于主外壳的外壳文件。您不能从 Perl 为您的主 shell 设置或导出任何环境路径。

您可以使用 Bash 文件从 CPAN 获取 Perl 外部模块中的环境路径，即 Shell::Source。

```
$env_path= Shell::Source->new(shell=>"tcsh",file=>"../path/to/file/temp.csh");
$env_path->inherit;
print "$ENV{ORACLE_HOME}";
print "$ENV{LD_LIBRARY_PATH}"; 
```

有关更多信息，您可以在 CPAN.org 上搜索相关模块。

# ruby-on-rails - Rails 中用于 scss 的 Autosave-chrome 工具

> ID：14938615
> 
> 赞同：0
> 
> 时间：2013-02-18T14:29:18.247
> 
> 标签：ruby-on-rails, google-chrome, sass, saas

在 scss 之前，我在示例 css 文件上使用了自动保存工具用于 chrome。但是在 rails scss 中，它当然是行不通的。你为现场编辑做什么？自动保存后，我无法在任何 css 更改后在浏览器和 IDE 之间切换:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:49:25.650

看看[guard](https://github.com/guard/guard)和[guard-sass](https://github.com/hawx/guard-sass)。

将其与[guard-livereload](https://github.com/guard/guard-livereload)和[rack-livereload 联系起来](https://github.com/johnbintz/rack-livereload)。

此设置意味着您根本不必使用浏览器，如果您使用正确，它会在您编辑 scss 文件时自动刷新。

# ruby-on-rails - 使用 capistrano(rbenv) 部署时出现捆绑错误

> ID：14938619
> 
> 赞同：2
> 
> 时间：2013-02-18T14:29:30.207
> 
> 标签：ruby-on-rails, ruby, nginx, capistrano, rbenv

我使用 capistrano 将我的 rails 应用程序部署到我的 vps。我有问题`cap deploy update`。

错误信息是这样的：

```
 ** [out :: 1] Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
 ** [out :: 1] 
 ** [out :: 1] /usr/bin/ruby1.9.1 extconf.rb
 ** [out :: 1] 
 ** [out :: 1] 
 ** [out :: 1] Gem files will remain installed in /home/deployer/apps/get-real/shared/bundle/ruby/1.9.1/gems/raindrops-0.10.0 for inspection.
 ** [out :: 1] 
 ** [out :: 1] Results logged to /home/deployer/apps/get-real/shared/bundle/ruby/1.9.1/gems/raindrops-0.10.0/ext/raindrops/gem_make.out
 ** [out :: 1] 
 ** [out :: 1] An error occurred while installing raindrops (0.10.0), and Bundler cannot continue.
 ** [out :: 1] 
 ** [out :: 1] Make sure that `gem install raindrops -v '0.10.0'` succeeds before bundling. 
```

我尝试`gem install raindrops -v '0.10.0'`在我的服务器上运行推荐，它成功了。但是当我`cap deploy:update`再次运行时，它会失败并显示相同的错误消息。

我之前遇到过这个问题，我尝试了一些方法，它奏效了。但现在我忘记了我做了什么让它工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:59:06.857

我解决了这个问题。

我刚`/home/deployer/apps/get-real/shared/bundle/ruby/1.9.1/gems/`跑过去`gem install raindrops -v '0.10.0'`

# c# - 如何创建不同的自动映射？

> ID：14938621
> 
> 赞同：0
> 
> 时间：2013-02-18T14:29:41.037
> 
> 标签：c#, automapper

```
 Mapper.CreateMap<Product, SelectListOptionItem>()
        .ForMember(dest => dest.Text, opt => opt.MapFrom(src => src.Description))
        .ForMember(dest => dest.Value, opt => opt.MapFrom(src => src.Id)); 
```

我需要对 Product.TypeId 使用 distinct

# php - SQL 未获取第二行的 ID

> ID：14938622
> 
> 赞同：2
> 
> 时间：2013-02-18T14:29:42.840
> 
> 标签：php, mysql, pdo

我有一个似乎没有获取第二行 ID 的 SQL 查询。我该如何解决？

```
 $sql = "SELECT 
                        *
                        FROM ts_request
                        INNER JOIN ts_day
                        ON ts_request.day_id = ts_day.id
                        INNER JOIN ts_period
                        ON ts_request.period_id = ts_period.id
                        INNER JOIN ts_allocation
                        ON ts_request.id = ts_allocation.request_id
                        WHERE ts_request.round=:round
                        AND ts_request.dept_id=:dept
                        ORDER BY ts_request.module_id ASC";
        }
        $stm = $pdo->prepare( $sql );
        $stm->execute( array( ':round' => 'P', ':dept' => $loggedin_id  ) );
        $rows = $stm->fetchAll();        

        foreach ($rows as $row) 
        {
        $row_id = $row['id'];
        echo '<tr align="center">'; 
        echo '<td>'.$row['module_id'].'</td>';
        echo '<td>'.$row['day'].'</td>';    
        echo '<td>'.$row['period'].'</td>';
        echo '<td>';

            $sql = "SELECT 
                    *
                    FROM ts_roompref
                    WHERE request_id=:request_id";
            $stm = $pdo->prepare( $sql );
            $stm->execute( array( ':request_id' => $row_id ) );
            $rows = $stm->fetchAll();           
    foreach ($rows as $row) 
            {
                if ($row['room_id']!="0")
                    echo $row['room_id'].'<br>';
            }

        echo '</td>';

        echo '<td>';

        $sql = "SELECT 
                        *
                        FROM ts_allocation
                        WHERE request_id=:request_id";
        $stm = $pdo->prepare( $sql );
        $stm->execute( array( ':request_id' => $row_id ) );
        $rows = $stm->fetchAll();           
        foreach ($rows as $row) 
        {
            echo $row['status'];
        }

        echo '</td></tr>';
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:36:03.330

您正在为数组使用`foreach`循环，`$rows`并在其中覆盖`$rows`变量。所以只需为内部循环使用另一个变量名：

```
$rows = $stm->fetchAll();
foreach ($rows as $row)
{
    // ...
    $rows2 = $stm->fetchAll();
    foreach ($rows2 as $row2)
    {
        // ...
    }
} 
```

# wpf - WPF RadioButtonList 从集合中设置 IsEnabled 和 IsChecked 属性

> ID：14938628
> 
> 赞同：4
> 
> 时间：2013-02-18T14:30:07.413
> 
> 标签：wpf, xaml, wpf-controls, isenabled

我重新设置了 ListBox 的样式以从此[链接创建 RadioButtonList](http://archive.msdn.microsoft.com/wpfradiobuttonlist)

我的要求是这样的：我必须一次从 ListBox 中选择一个项目（即**单选**模式）。此外，我必须根据绑定到集合的属性禁用/启用 ListBoxItem。所以我设置了

```
IsChecked="{TemplateBinding IsSelected}" 
```

并从我的集合中绑定**IsEnabled属性。**

```
IsEnabled="{Binding IsEnabled}" 
```

结果如下： ![在此处输入图像描述](../Images/fd203c2d2ec6f5facf8b4c879c897018.png)

您可以看到一些记录处于禁用状态，但它们仍然是可选择的。如果我删除**IsChecked**属性，它会按预期完美运行。但我需要**IsEnabled**和**IsSelected**功能。然后，我为 IsEnabled 属性创建了一个多值转换器，并根据我已将相应值绑定到该属性的值。现在我无法从列表中直观地选择禁用的项目。但是当我选择一个禁用的项目时，我失去了选择。请检查图像： ![在此处输入图像描述](../Images/c539bdea4702207e4b7f5d11a6d8af90.png)。

并在代码后面的**IsChecked**属性设置为第一条记录。我想限制这个选择。我怎样才能做到这一点？xaml 中是否有任何设置有助于满足我的要求？请指教...

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:56:07.650

听起来您正在绑定的`IsEnabled`属性`RadioButton`而不是`ListBoxItem`. 这将禁用`RadioButton`，但不会禁用`ListBoxItem`，这就是仍然可以选择它的原因。

您应该能够绑定 的`IsEnabled`属性`ListBoxItem`，并且它将按照您想要的方式工作。 

根据您发布的指向您正在使用的样式的链接，该链接将位于样式`ItemContainerStyle`部分`RadioButtonList`：

```
<Style TargetType="{x:Type ListBoxItem}" >
    <!-- Here -->
    <Setter Property="IsEnabled" Value="{Binding IsEnabled}" />

    <Setter Property="Margin" Value="5" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListBoxItem}">
                <Border BorderThickness="0" Background="Transparent">
                    <RadioButton Focusable="False"
                                 IsHitTestVisible="False"
                         IsChecked="{TemplateBinding IsSelected}">
                        <ContentPresenter />
                    </RadioButton>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# linux-kernel - 通过jtag在目标上加载linux内核

> ID：14938633
> 
> 赞同：1
> 
> 时间：2013-02-18T14:30:18.860
> 
> 标签：linux-kernel, gdb, boot, jtag

我正在尝试通过 AM3517 评估板上的 JTAG 加载和启动 linux 内核。我的调试器是 BDI3000。我没有使用 openocd，因为根据调试器的文档，它不是必需的。到目前为止，我认为我能够将 vmlinux 映像加载到内存中，但是一旦完成，“cont”gdb 命令就不会启动 linux。我没有在串行控制台上收到任何消息。

我正在按照此链接[http://elinux.org/Debugging_The_Linux_Kernel_Using_Gdb中给出的说明进行操作](http://elinux.org/Debugging_The_Linux_Kernel_Using_Gdb)

尝试获取链接中提到的 log_buffer 的地址给了我以下输出

```
(gdb) p (char*) &__log_buf[log_start]
$1 = 0xc04cd460 <Address 0xc04cd460 out of bounds> 
```

我在互联网上搜索了很多，但找不到正确的答案。不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:40:28.067

Linux 内核不能只是加载然后执行。
在 Linux 内核可以执行之前，ARM 架构需要一个引导加载程序：

*   配置内存系统。
*   在正确的内存地址加载内核映像。
*   可以选择在正确的内存地址加载初始 RAM 磁盘。
*   初始化引导参数以传递给内核（又名*内核命令行*）。
*   获取 ARM Linux 机器类型（以及 ATAG 的其他信息）
*   使用适当的寄存器值输入内核。

这些步骤中的大多数对所有架构都是通用的，但系统信息的 ATAG 列表是 ARM 独有的。[“引导 ARM Linux”](http://www.simtec.co.uk/products/SWLINUX/files/booting_article.html#d0e428)
中提到了所有这些引导要求。 通常，引导加载程序（例如 U-Boot）执行这些任务。 你提到的教程告诉你使用引导加载程序来初始化你的板：

> 最实用的方法是在内核启动时设置硬件断点
> 并使用 JTAG 复位信号复位您的电路板。
> 您的引导加载程序将初始化您的电路板，并且执行将在内核启动时停止。
> 之后，您可以将内核加载到内存中并运行它。

# lambda - 在一行中用 lambda 表达式做多件事

> ID：14938642
> 
> 赞同：0
> 
> 时间：2013-02-18T14:30:47.043
> 
> 标签：lambda

这纯粹是为了简化代码并使其更具可读性。

我在我的计算机上打印出一个 Windows 服务列表。这样做时，我调用`ServiceController.GetServices()`并检索服务数组。但我更愿意将它放在一个强类型列表中并将其打印到我的 txbMain 文本框中。我已经用 3 行代码完成了这两件事。但是有没有办法在第一行打印到 txbMain 这样我就可以避免 foreach 循环？

```
List<ServiceController> list = ServiceController.GetServices()
    .OrderBy(x => x.DisplayName)
    .ToList();

foreach (ServiceController sc in list)
    txbMain.Text += sc.DisplayName + Environment.NewLine; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:34:16.473

如果您在此声明之后不使用您的列表，您可以执行以下操作：

```
ServiceController.GetServices()
    .OrderBy(x => x.DisplayName)
    .ToList()
    .ForEach(x => txbMain.Text += x.DisplayName + Environment.NewLine); 
```

请注意，无论如何它都会在内部执行一个 foreach 循环。

更糟糕的是，在使用 ForEach 方法之前，它首先必须创建一个列表，这很耗时。

请参阅[Eric Lippert 的帖子](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)。

也许你应该坚持你的 foreach 循环。

# android - 如何在按下背景布局时在一个图像视图上应用选择器

> ID：14938643
> 
> 赞同：1
> 
> 时间：2013-02-18T14:30:46.773
> 
> 标签：android, android-layout, android-selector

我有一个包含图标图像和文本视图的布局。我想要的是在按下父布局时更改图标图像的背景。我尝试了选择器功能，但它仅适用于正在按下的视图。如果我在按下图标图像时应用选择，则效果很好，但我想要的是在用户按下其整个父布局时更改图标图像。这是我的布局 xml 文件

```
<RelativeLayout
                android:id="@+id/home_edit_profile"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1" 
                 >

                <RelativeLayout
                    android:id="@+id/first_row_image_container"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true" 
                    android:layout_marginLeft="20dp">

                    <ImageView
                        android:id="@+id/image_edit_profile"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:duplicateParentState="true"
                        android:src="@drawable/home_page_edit_profile_press" 
                        />
                </RelativeLayout>

                <RelativeLayout

                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_toRightOf="@+id/first_row_image_container" 
                    android:layout_toLeftOf="@+id/first_row_arrow_container"
                    android:paddingLeft="15dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerInParent="false"
                        android:text="Edit Profile"
                        android:textColor="#ffffff"
                        android:duplicateParentState="true"
                        android:textAppearance="?android:attr/textAppearanceLarge" />

                </RelativeLayout>

                <ImageView
                    android:id="@+id/imageView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/home_page_saparatar_line" 
                    android:layout_alignParentBottom="true"/>

            </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:42:24.187

//你需要添加这一行`android:duplicateParentState="true"`

在您的图标和文本视图中。

```
android:duplicateParentState - 
When this attribute is set to true, the view gets its drawable state 
(focused, pressed, etc.) from its direct parent rather than from itself. 
```

# java - t.page 上的 Freemarker utf-8 编码问题

> ID：14938644
> 
> 赞同：4
> 
> 时间：2013-02-18T14:30:55.363
> 
> 标签：java, html, spring, utf-8, freemarker

我遇到了内页问题。它只是将页面识别为iso，但我想要utf-8，我将它声明为默认字符集。我尝试了对 freemarker 配置的一些修改，但它们没有效果。

spring-servlet.xml

```
<bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">
    <property name="templateLoaderPath" value="/WEB-INF/pages/"/>
</bean> 
```

模板.html

```
<#macro page>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Cemitério - Prefeitura Municipal de Maringá</title>
</head>

<body>
Usuários
<#nested/>
</body>
</html>
</#macro> 
```

登录.html

```
<#import "templates/template.html" as t/>

<@t.page>

<#if erroLogin??>
    ${erroLogin}
</#if>
<form action="entrar" method="post">
    <div>
        <label>Usuário:</label>
        <input type="text" name="usuario" />
        <br />
        <label>Senha:</label>
        <input type="text" name="senha" />
        <br />
        <input type="submit" name="submit" />
    </div>
</form>

</@t.page> 
```

输出

![在此处输入图像描述](../Images/535c7c2bcba2ab2647d21ce395cc974a.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T20:47:41.967

由于插入的变量中重音是可以的，但是直接输入到模板中的重音不是，并且浏览器似乎知道该页面使用UTF-8（您可以在浏览器的页面信息对话框中查看） ， 任何一个：

*   模板文件以错误的编码保存。在 Eclipse 中，您应该转到 Window -> Preferences -> Workspace，并将文本文件编码设置为 UTF-8。这是一个全局设置，但默认情况下 Eclipse 使用平台默认值，这在 99% 的项目中没有意义。您也可以在项目 -> 属性 -> 资源下的项目级别上进行设置。

*   FreeMarker 使用错误的字符集来解码模板文件，因为它默认也使用平台默认值。因此，您应该将`default_encoding`设置设置为`UTF-8`. 您还可以使用 强制在模板中进行编码`<#ftl encoding='UTF-8'>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:08:53.230

如果你添加这个 charset="UTF-8" 怎么样

```
<label charset="UTF-8" >Usuário:</label> 
```

在 HTML 5 中，您将添加：

```
<meta charset="UTF-8"> 
```

在以前的 HTML 中（请注意您的代码中有小写字母..也许这可能是造成它的原因）

```
<meta http-equiv="Content-type" content="text/html;charset=UTF-8"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:17:14.327

我找到了解决方案。我需要使用dreamweaver 再次创建login.html 文件，然后另存为html 并将文件粘贴到eclipse 项目中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-28T09:57:33.470

在某些情况下，您可能想要对实体进行编码。如果您使用 Java 对象作为模板的数据（上下文），您可以在其中添加一个方法来编码实体：

```
public String htmlEntities(String input)
{
    StringBuilder sb = new StringBuilder(input.length());
    for (char c : input.toCharArray()) {
        if (c == '"') {
            sb.append("&quot;");
        }
        else if (c == '<') {
            sb.append("&lt;");
        }
        else if (c == '>') {
            sb.append("&gt;");
        }
        else if (c < 128) {
            sb.append(c);
        }
        else {
            sb.append(String.format("&#x%04x;", (int) c));
        }
    }
    return sb.toString();
} 
```

这可以在您的模板中使用，例如：

```
${htmlEntities('Usuário')} 
```

结果将是：

```
Usu&#x00e1;rio 
```

# perl - 我在哪里可以找到 ActiveState Perl 5.6.1 版？

> ID：14938645
> 
> 赞同：1
> 
> 时间：2013-02-18T14:30:57.743
> 
> 标签：perl

我想`ActiveState Perl` `version 5.6.1`在 Windows 上测试一些 Perl 模块。我用谷歌搜索，但没有任何网站可以下载它。有人知道如何下载吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T14:36:38.347

> Community Edition 提供对 ActivePerl 最新版本的访问。在 Business Edition 和 Enterprise Edition 中可以访问旧版本（Perl 5.6、5.8、5.10、5.12）。

因此，您需要购买[商业版或企业版](http://www.activestate.com/activeperl/downloads)的访问权限。

# android - Android：如何在实际从设备发送之前获取从本机应用发送的短信内容？

> ID：14938647
> 
> 赞同：-1
> 
> 时间：2013-02-18T14:31:03.457
> 
> 标签：android, sms

我希望我的应用程序在从本机短信应用程序实际发送之前检查消息内容，例如原始地址（电话号码）和文本内容。因此，如果您在本机短信应用程序的某人线程中键入内容并按发送，我的应用程序应该在实际发送和分析信息之前检测到他的消息，并可能更改一些信息然后发送它。有什么方法可以做到吗？阻止其他消息发送然后对其进行分析的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:36:31.597

我认为不允许执行此类拦截，除非您正在运行经过修改以满足您的需要的自定义 ROM。

*原因*：允许干扰其他应用程序的处理是对框架的安全漏洞。

# css - 奇怪的 css 选择器组合

> ID：14938649
> 
> 赞同：2
> 
> 时间：2013-02-18T14:31:15.787
> 
> 标签：css, css-selectors, css-specificity

这是我的代码：

`HTML`

```
<div id="corner">
    <div id="cornerbox"></div>
</div> 
```

`CSS`

```
#corner {
    background-color: red;
    width: 200px; height: 200px;
}
#corner #cornerbox {
    background-color:black;
    width: 100px; height: 100px;
    opacity: 0.4;
}
#corner:hover  #cornerbox, #corner #cornerbox.show{
    opacity: 1;
} 
```

`JavaScript`

```
$(document).keypress(function(e) {
        //console.log("keypress event from document: ",e.which);
        if (e.which == 63) {    // question mark (?) key
            $("#cornerbox").toggleClass("show");
        }
}); 
```

[JSFiddle 代码在这里](http://jsfiddle.net/gotoandrun/thgPF/)

因此，每当#corner:hover 时，CSS 都会使“#cornerbox”更改不透明度，并且只要按下问号 (?) 键，JavaScript 就会切换“#cornerbox”的类“显示”。

我注意到，如果我将上面的 CSS 更改为如下所示：

```
#corner {
    ...
}
#corner #cornerbox {
    ...
}
#corner:hover #cornerbox, #cornerbox.show {
    ...
} 
```

按下（？）键时不透明度不会改变，但“#cornerbox”接收类“show”。

所有其他可能性都有效。

这行得通。

```
#corner {
    ...
}
#cornerbox {
    ...
}
#corner:hover #cornerbox, #corner #cornerbox.show {
    ...
} 
```

这有效。

```
#corner {
    ...
}
#cornerbox {
    ...
}
#corner:hover #cornerbox, #cornerbox.show {
    ...
} 
```

为什么？

先感谢您！

田濑

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T14:34:06.973

发生这种情况是因为选择器`#cornerbox.show`的[特异性](http://www.htmldog.com/guides/cssadvanced/specificity/)低于`#corner #cornerbox`，这意味着它无法覆盖它。

如果`#cornerbox.show`通过添加 id 选择器来增加 id 选择器的特异性，或者`#corner #cornerbox`通过删除 id 选择器来降低 id 选择器的特异性，则新的事务状态允许第二个选择器覆盖。

# java - 将对象引用传递给 Util 类

> ID：14938651
> 
> 赞同：1
> 
> 时间：2013-02-18T14:31:21.120
> 
> 标签：java

我正在开发一个基于 Java EE 的基于 Web 的应用程序。

我的问题：我正在创建一个实例`BaseAPI`并将其传递给一个名为的实用程序类`BaseUtil`，如下所示：

```
package com ;

public class Test {
    public static void main(String args[]) {
        BaseAPI bApi = new BaseAPI();
        BaseUtil.getData(bApi);

    }

}

public class BaseUtil {

public static String getData(BaseAPI bapi) {

        bapi.addAccountIdParameter("SIM1");
        bapi.getData();
        return null;
    }
}

package com;

import java.util.HashMap;

public class BaseAPI {
    HashMap<String, Object> params = new HashMap<String, Object>();
    public void addAccountIdParameter(String value) {
        addParameter("ID", value);
    }
    public void addParameter(String name, String value) {
        if ((name != null) && (value != null)) {
            params.put(name.trim().toLowerCase(), value.trim());
        }
    }

    public String getData()
    {
        return "";
    }

} 
```

这工作正常。请让我知道这是否是一种有效的方法，或者它会在任何地方产生任何负面影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:42:55.027

这是一种完全有效的方法，通常不会产生负面影响。但是，需要更多信息才能了解它是否是您 API 的最佳选择。一项建议：

将 BaseUtil 类的构造函数设为私有：

```
public class BaseUtil {
    private BaseUtil(){}
    ...
} 
```

如果它只是一个静态实用程序类，这将阻止您的其他类创建此类的对象。此外，如果您开始向此 BaseUtil 类添加字段，则如果您的应用程序将是多线程的，则需要开始考虑线程安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:45:46.173

从运行时的角度来看，该方法看起来不错，如果您指的是这些，它不应该导致任何性能或内存问题。

从更一般的设计角度来看，它看起来很尴尬，我建议不要这样做。您的`BaseAPI`类（并且名称已经暗示）看起来像一个公共 API，但在您的情况下，该`BaseAPI`实例也以参数的形式存储状态。该类`BaseAPI`看起来更像是一个 DAO，您可以轻松地在无状态的情况下实现它：

```
public class BaseAPI {
    public String getData(Map<String, Object> params)
    {
        // Do your parameter mapping here, then fetch the data
        return "";
    }
} 
```

或者，提供 ID 参数作为方法参数。

*将其与Spring 之*类的依赖注入机制捆绑在一起，您的设计将更加简洁。

# python - 如何使用 Pyramid 访问 Plone 生成并保存在 ZODB 上的数据？

> ID：14938652
> 
> 赞同：1
> 
> 时间：2013-02-18T14:31:22.913
> 
> 标签：python, plone, pyramid, zodb

我有一个文件 Data.fs，其中包含 Plone 在 ZODB 上保存的数据。仅使用了 Plone 的标准内容类型（例如 ATNewsItem、ATLink、ATFile，...）。我想使用 Pyramid (www.pylonshq.org) 来访问这些数据（只能读取，不能写入），并且可以恢复例如 NewsItem 或 Link 的标题。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:35:47.157

要阅读信息，您需要有可用于导入的原始类；泡菜只能加载到原始类结构中。

我不确定这是否会奏效。有很多假设和依赖项可能与 Pyramid 框架发生冲突，或者在没有 Zope 框架可用的情况下无法满足。

另一种方法是创建您通过原始导入位置提供的*新*类，让您至少可以读取包含的数据，但这可能需要付出很大的努力。

如果您需要只读访问权限，则可能需要研究一种不同的方法；使用某种[方式将数据导出](http://developer.plone.org/content/importexport.html)到 SQL 服务器。从长远来看，这将更容易处理。

# ios - 不支持的 NSSortDescriptor（不支持比较器块）

> ID：14938653
> 
> 赞同：11
> 
> 时间：2013-02-18T14:31:24.693
> 
> 标签：ios, nsfetchedresultscontroller, nssortdescriptor

在`fetchedResultsController`设置`NSSortDescriptor`iam 时出现此错误**，不支持 NSSortDescriptor（不支持比较器块）**。

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"Alarm" inManagedObjectContext: managedObjectContext];
[fetchRequest setEntity:entity];

//Below code is not working and causing error. sorting use the hours&seconds part of the time attribute  

NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                          initWithKey:@"time" ascending:YES comparator:^NSComparisonResult(id obj1, id obj2) {

                                  NSCalendar *calendar = [NSCalendar currentCalendar];
                                  NSDateComponents *components1 = [calendar components:(NSHourCalendarUnit|NSMinuteCalendarUnit) fromDate:obj1];
                                  NSDateComponents *components2 = [calendar components:(NSHourCalendarUnit|NSMinuteCalendarUnit) fromDate:obj2];
                                  NSDate *date1 = [calendar dateFromComponents:components1];
                                  NSDate *date2 = [calendar dateFromComponents:components2];

                                  return [date1 compare:date2];

                          }]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T14:34:42.833

您不能在任何地方使用带有比较器块的排序描述符 - 例如不能用于核心数据提取。

但是，当您过滤普通数组时，它们可以正常工作。

除此之外-那里有我忽略的问题吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-14T20:42:25.400

正如 Monolo 所说，您不能将比较器块与 Core Data 一起使用。但是，您可以使用：

```
[NSSortDescriptor sortDescriptorWithKey:(NSString *) ascending:(BOOL) selector:(SEL)] 
```

如果您不使用标准选择器，则需要扩展您的模型。

例如，我只需要订购字符串“a la Finder”（即 1,2,9,10，而不是 1,10,2,9）并且我使用

```
request.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:myEntity ascending:NO selector:@selector(localizedStandardCompare:)]]; 
```

查看[Apple 的 NSSortDescriptor 类参考](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/classes/NSSortDescriptor_Class/Reference/Reference.html#//apple_ref/doc/uid/20001921-SW8)

快乐编码:)

# android - 在 android 中使用画布和位图

> ID：14938657
> 
> 赞同：0
> 
> 时间：2013-02-18T14:31:30.527
> 
> 标签：android, canvas, bitmap

我正在尝试使用 Canvas 和 Bitmaps 来绘制我的活动，但我没有掌握以下内容：

1.  何时调用 onDraw 函数。
2.  修改后如何再次调用 onDraw 函数。（`this.invalidate`似乎没有奏效）。
3.  如何在画布上绘制一些东西并对其进行更改并稍后刷新它。

有人可以解释这些吗？（示例代码将是一个额外的加号）。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:58:21.527

1.  onDraw() 最初由系统在膨胀包含视图的布局后调用。例如，如果您在 onCreate() 中设置了 ContentView()，则至少要等到 onCreate() 返回才会绘制它，因为 UI 线程必须空闲才能进行绘制。

2.  invalidate() 是这样做的方法。不要从 onDraw 中调用它，否则您将处于无限循环中。

3.  同样，在需要重绘时使用 invalidate()。这就是它的目的。

# c# - 将标头参数传递给动态调用的 Web 服务

> ID：14938658
> 
> 赞同：1
> 
> 时间：2013-02-18T14:31:38.887
> 
> 标签：c#, web-services

我正在尝试动态调用需要标头身份验证的 Web 服务，但我不知道应该如何传递所需的标头凭据

我的代码：

```
public object[] GeneratewebserviceProxy(string WSDL)
{
        WebRequest webRequest = WebRequest.Create(WSDL);
        System.IO.Stream requestStream = webRequest.GetResponse().GetResponseStream();
        ServiceDescription description = ServiceDescription.Read(requestStream);
        string sdName = description.Services[0].Name;
        string Method_Name = description.Messages["LoginSoapIn"].Name.Replace("Request", "");
        Method_Name = Method_Name.Replace("SoapIn", "");
        ServiceDescriptionImporter importer = new ServiceDescriptionImporter();
        importer.ProtocolName = "Soap";
        importer.AddServiceDescription(description, null, null);
        CodeNamespace nmspace = new CodeNamespace();
        CodeCompileUnit unit1 = new CodeCompileUnit();
        unit1.Namespaces.Add(nmspace);
        ServiceDescriptionImportWarnings warning = importer.Import(nmspace, unit1);
        object[] objRet = null;
        if (warning == 0)
        {
            CodeDomProvider provider1 = new CSharpCodeProvider();
            string[] assemblyReferences = new string[3]{ "System.Web.Services.dll", "System.Xml.dll", "System.Data.dll" };
            CompilerParameters parms = new CompilerParameters(assemblyReferences);
            CompilerResults results = CodeDomProvider.CreateProvider("CSharp").CompileAssemblyFromDom(parms, unit1);
            object o = results.CompiledAssembly.CreateInstance(sdName);
            Type t = o.GetType();

            //PropertyInfo credentials = t.GetProperty("Credentials");
            //PropertyInfo credentials = t.GetProperty("Credentials");
           // credentials.SetValue(o, new NetworkCredential(username, passwd), null);

            MethodInfo m = t.GetMethod("Invoke", BindingFlags.NonPublic | BindingFlags.Instance);

            object[] webmethod_param = { "UserName", "Password" };
            object[] objParams = { Method_Name, webmethod_param };
            objRet = (object[])m.Invoke(o, objParams);
            if (objRet.Length > 0)
            {
                objRet = (object[])objRet[0];
            }
        }
        return objRet;
    } 
```

请求应如下所示：

```
 tem:AuthHeader>
     <tem:Username>UserName</tem:Username>
     <tem:Password>Password</tem:Password>
  </tem:AuthHeader 
```

我已经尝试了两种方法来传递凭据（正如您可以在代码中看到的那样），但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:00:54.907

您必须从 ClientBase 对象中检索 ClientCredentials 属性。（代码中的“o”）并设置用户名和密码：

例子 ：

```
ClientCredentials.UserName.UserName = "username";
ClientCredentials.UserName.Password = "password"; 
```

来自 MSDN：http: [//msdn.microsoft.com/it-it/library/ms599072.aspx](http://msdn.microsoft.com/it-it/library/ms599072.aspx)

*ClientCredentials 通过 ClientBase 类的 ClientCredentials 属性访问。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:53:37.900

我还没有找到答案。我正在寻找的是在肥皂请求的标头中传递凭据。而不是以上面建议的方式使用客户端凭据

# file - 基于平台创建动态文件路径

> ID：14938666
> 
> 赞同：0
> 
> 时间：2013-02-18T14:32:13.270
> 
> 标签：file, grails, groovy

我有以下代码将一个文件夹中的所有文件移动到另一个文件夹：

```
for(File file: sourcePath.listFiles()){
    log.debug("File = " + sourcePath + "\\" + file.getName())
    File f1 = new File("C:\\\\" + sourcePath + "\\" + file.getName())
    f1.renameTo(new File("C:\\\\" + destinationPath + "\\" + file.getName()))
} 
```

这在本地运行良好，因为我在 Windows 机器上。

显然，当我将我的应用程序部署到我的 unix 测试/生产服务器时，它不起作用。

这是在 Grails 2.1.0 项目中。

是否可以在不诉诸条件语句的情况下做到这一点？（一些开发者会在本地使用 linux）。

## 更新

我必须使用 Java 6。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:35:43.477

[`File.separator`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#separator)将为您提供一个系统相关的分隔符，`"/"`适用于类 unix 和`"\"`windows。[`File.separatorChar`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#separatorChar)有相同的东西，但`char`类型。

此外，如果你可以使用 Java 7，NIO2 的 Path API 提供了更方便和干净的方式：

```
Path source = Paths.get("C:", sourcePath, file.getName());
Path target = Paths.get("C:", targetPath, file.getName());
Files.move(source, target); 
```

有关文档，请参阅以下页面：

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html) [http://docs.oracle.com/javase/7/docs/api/java/nio/file /文件.html](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:42:55.757

工作解决方案：

```
File sourcePath = new File(config.deals.imageUploadTmpPath + "/test_" + testId)
File destinationPath = new File(config.deals.imageUploadPath + "/" + testId)

for(File file: sourcePath.listFiles()) {
    log.debug("File = " + sourcePath.getAbsolutePath() + File.separator + file.getName())

    File f1 = new File(sourcePath.getAbsolutePath() + File.separator + file.getName())
    f1.renameTo(new File(destinationPath.getAbsolutePath() + File.separator + file.getName()))

} 
```

使用[File.getAbsolutePath()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getAbsolutePath%28%29)可以解决问题。

# java - Jackson JSON反序列化：每行中的数组元素

> ID：14938667
> 
> 赞同：21
> 
> 时间：2013-02-18T14:32:16.723
> 
> 标签：java, json, jackson, deserialization

我正在使用[杰克逊](https://github.com/FasterXML/jackson-core)，并希望漂亮地打印 JSON，以便数组中的每个元素都进入每一行，例如：

```
{
  “富”：“酒吧”，
  “废话”：[
    1、
    2、
    3
  ]
}

```

设置`SerializationFeature.INDENT_OUTPUT`true 只为对象字段插入换行符，而不是数组元素，以这种方式打印对象：

```
{
  “富”：“酒吧”，
  “废话”：[1、2、3]
}

```

有谁知道如何实现这一目标？谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-10-14T13:41:44.743

如果您不想扩展`DefaultPrettyPrinter`，也可以在`indentArraysWith`外部设置属性：

```
ObjectMapper objectMapper = new ObjectMapper();
objectMapper.enable(SerializationFeature.INDENT_OUTPUT);

DefaultPrettyPrinter prettyPrinter = new DefaultPrettyPrinter();
prettyPrinter.indentArraysWith(DefaultIndenter.SYSTEM_LINEFEED_INSTANCE);

String json = objectMapper.writer(prettyPrinter).writeValueAsString(object); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-18T15:30:53.240

多亏了有用的提示，我能够配置我`ObjectMapper`所需的缩进如下：

```
private static class PrettyPrinter extends DefaultPrettyPrinter {
    public static final PrettyPrinter instance = new PrettyPrinter();

    public PrettyPrinter() {
        _arrayIndenter = Lf2SpacesIndenter.instance;
    }
}

private static class Factory extends JsonFactory {
    @Override
    protected JsonGenerator _createGenerator(Writer out, IOContext ctxt) throws IOException {
        return super._createGenerator(out, ctxt).setPrettyPrinter(PrettyPrinter.instance);
    }
}

{
    ObjectMapper mapper = new ObjectMapper(new Factory());
    mapper.configure(SerializationFeature.INDENT_OUTPUT, true);
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-18T14:49:21.717

您可以扩展[DefaultPrettyPrinter](http://fasterxml.github.com/jackson-core/javadoc/2.1.0/com/fasterxml/jackson/core/util/DefaultPrettyPrinter.html)并覆盖*beforeArrayValues(...)*和*writeArrayValueSeparator(...)*方法来归档所需的行为。[*之后，您必须通过setPrettyPrinter(...)*](http://fasterxml.github.com/jackson-core/javadoc/2.1.0/com/fasterxml/jackson/core/JsonGenerator.html#setPrettyPrinter%28com.fasterxml.jackson.core.PrettyPrinter%29)将新的实现添加到您的 JsonGenerator中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-05-08T07:41:41.790

映射器可以配置（jackson-2.6）：

```
ObjectMapper mapper = ...
DefaultPrettyPrinter prettyPrinter = new DefaultPrettyPrinter();
prettyPrinter.indentArraysWith(DefaultIndenter.SYSTEM_LINEFEED_INSTANCE);
mapper.setDefaultPrettyPrinter(prettyPrinter);

//use mapper 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-24T11:28:58.137

值得庆幸的是，OP 提供 的[答案](https://stackoverflow.com/a/14939762/1091453 "回答")`String`显示了一种从`writeValueAsString`. `writeValue`基于它here的解决方案可以使用更少的代码将相同格式的JSON直接写入文件：

```
private static class PrettyPrinter extends DefaultPrettyPrinter {
    public static final PrettyPrinter instance = new PrettyPrinter();

    public PrettyPrinter() {
        _arrayIndenter = Lf2SpacesIndenter.instance;
    }
}

{
    ObjectMapper mapper = new ObjectMapper();
    ObjectWriter writer = mapper.writer(PrettyPrinter.instance);
    writer.writeValue(destFile, objectToSerialize);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T14:47:41.720

试用 JSON 生成器...

[API 参考](http://jackson.codehaus.org/1.1.2/javadoc/org/codehaus/jackson/JsonGenerator.html)
[很好的例子](http://www.mkyong.com/java/jackson-streaming-api-to-read-and-write-json/)

# qt - QT 应用程序自动启动 --- 在 linux 中

> ID：14938669
> 
> 赞同：4
> 
> 时间：2013-02-18T14:32:29.917
> 
> 标签：qt, embedded-linux

我在 Qt 中开发了一个应用程序，并希望它自动启动并占据我的屏幕。它也有一些弹出窗口。它用于控制网络上的一些继电器。

1.  嵌入式 linux 中自动启动 Qt 应用程序并在系统启动时占用我的屏幕的正确程序应该是什么？
2.  哪个是用于嵌入式 linux 的最佳窗口管理器？
3.  在这种情况下我需要显示管理器或桌面管理器吗？因为我需要运行单个应用程序？
4.  这个链接也让我有点困惑。桌面环境中的窗口管理器？

    这些桌面环境是 KDE 等桌面管理器的另一个名称吗？ [http://www.engadget.com/2012/10/30/how-to-picking-a-window-manager-linux/](http://www.engadget.com/2012/10/30/how-to-picking-a-window-manager-linux/)

5.  如果要运行多个 Qt 应用程序怎么办？但是在启动时我想要一个应用程序覆盖屏幕？

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:40:31.790

1）您可以简单地创建一个脚本来启动您的应用程序并将其添加到 /etc/init.d 文件夹，例如：`/etc/init.d/S30myapp`，其中包括：

```
#!/bin/sh
/etc/my_qt_app -qws & 
```

当然，不要忘记`chmod +x`他们。

2-3) 最简单的解决方案是使用Qt Windowing System (QWS)。[在这里](http://doc.qt.digia.com/stable/qt-embedded-running.html)查看更多技术细节。

4）取自*超级用户*的标签：

> **桌面环境**：提供图形用户界面的软件，具有图标、窗口、工具栏等元素以及附加功能。流行的例子包括 Gnome 和 KDE。
> 
> **窗口管理器**负责在 GUI 驱动的操作系统中放置和显示窗口。有时，该术语还指扩展此基本功能的插件。

我不知道您的要求，但通常嵌入式设备中只使用 Windows 管理器。但正如我之前提到的，Qt 有自己的窗口管理器——QWS。另一个广泛使用的选项是*X Server*。

5) 如果您使用 QWS（或任何其他窗口管理器），您可以启动初始应用程序并将其最大化到全屏，因此它将是唯一可见的应用程序。但是，请查看[此讨论](https://stackoverflow.com/questions/1656891/problems-with-multiple-qapplications)以了解使用 QWS 的多个并发应用程序。

# java - Android avd Manager 和 Sdk.exe 无法打开

> ID：14938671
> 
> 赞同：0
> 
> 时间：2013-02-18T14:32:37.000
> 
> 标签：java, android, sdk, avd, jdk1.6

就在几天前，我的 sdk 和 avd 工作正常，但现在它已经完全停止打开了。我尝试运行 exe 文件，但只有一小部分时间 cmd 窗口打开和关闭，没有任何反应。

我的环境变量： **C:\Program Files (x86)\Java\jdk1.6.0_25\bin;** 有以下路径。试过 Where Java in cmd n 我得到了这两个东西： **C:\Program Files (x86)\Java\jdk1.6.0_25\bin\java.exe C:\Windows\System32\java.exe**

一切似乎都是正确的。我的 avd 和 sdk 仍然不起作用。我尝试再次重新安装它。还下载了 sdk 的捆绑包，但仍然无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:53:39.387

我也遇到过类似的问题，经过太多努力，我最终重新安装了最新的 java 和 android sdk。现在它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:48:45.567

我建议你：
1）验证你的 Java JDK 是否运行没有问题，之后
2）使用新的 android skd，现在它包含在一个 zip 文件中，
3）在新的模拟器 android 中测试启动你的应用程序
祝你好运

# php - 在第 7 行调用非对象上的成员函数 attributes()

> ID：14938672
> 
> 赞同：0
> 
> 时间：2013-02-18T14:32:37.473
> 
> 标签：php, xml, simplexml

好的，伙计们，我到处寻找这个问题的答案，但没有解决问题的运气。我创建了一个名为 questions.xml 的 xml 文档。代码示例是

```
<Quiz>
    <topic text="Preparation for Exam">
        <subtopic text="Science">
            <question text="What is the largest planet in our solar system?"> 
            <answer num = "A" Text="Jupiter" correct="1"></answer> 
            <answer num = "B" Text="Venus" correct="0"></answer> 
            <answer num = "C" Text="Saturn" correct="0"></answer> 
            <answer num = "D" Text="Mars" correct="0"></answer> 
            </question>

            <question text="What is the smallest planet?" > 
            <answer num = "A" Text="Pluto" correct="1"></answer> 
            <answer num = "B" Text="Venus" correct="0"></answer> 
            <answer num = "C" Text="Saturn" correct="0"></answer> 
            <answer num = "D" Text="Mars" correct="0"></answer> 
            </question>
                </subtopic>
         </topic>
</Quiz> 
```

然后我制作了一个表格数据，显示不同的问题编号，我必须选择一个问题。我使用单选按钮进行选择，然后定义了一个名为“问题”的提交按钮。因此，当用户选择并提交任何问题时，单选按钮值 0、1、2、3 等将通过 POST 方法传递到另一个 php 页面。现在在这个新的 php 页面中，我必须在文本字段区域中显示所需的问题。问题是我总是收到这个愚蠢的错误“在第 6 行调用非对象上的成员函数属性（）”。我的代码是

```
<?php
    $condition= $_POST['question'];
    $xml = simplexml_load_file("questions.xml");
    echo $condition;
    if ($condition=="0"){
        $question= $xml-> topic -> subtopic-> question[$condition] ->  attributes()-> text."<br>";
        echo "<form action='' method='post'> 
        <label for='question'> Question</label>
        <textarea name='question' id='1' cols='45' rows='5'>".$question."</textarea>
        <P><INPUT TYPE=SUBMIT VALUE='submit'> </form>";

        }
 ?> 
```

现在没有语法错误，程序正在显示 echo $condition ，但它不显示问题总是显示“在第 6 行对非对象调用成员函数 attributes()”。我真的很生气..请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:40:01.733

`$xml-> topic -> subtopic-> question[0]`存在和`$xml-> topic -> subtopic-> question["0"]`不存在。

转换`$_POST['question']`为整数就可以了。

```
$condition= (int) $_POST['question']; 
```

会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:36:19.553

首先检查，你收到一个用户输入，所以它不能被设置或者可以是任何字符串。

转换为 int：

```
$condition = (isset($_POST['question'])) ? (int) $_POST['question'] : "some default value" ;

if (isset($xml-> topic -> subtopic-> question[$condition]) && is_object($xml-> topic -> subtopic-> question[$condition])){
  $question= $xml-> topic -> subtopic-> question[$condition] ->  attributes()-> text."<br/">
  //and so on.
} 
```

# highcharts - 使用 Highchart 显示与固定数据相关的百分比

> ID：14938676
> 
> 赞同：0
> 
> 时间：2013-02-18T14:32:54.180
> 
> 标签：highcharts

我有一个来自数据库的值，它定义了我的系列的最大值 100%。

但是，我只想显示一个系列的数据，并使用数据库中的这个值来设置我的 100%。

例如，我有这个系列：

```
 $(function () {
    var chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container'
        },

        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
        }]

    });
}); 
```

但是我数据库中的最大值是 250。我如何设置它并以百分比显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:21:29.203

您可以使用百分比参数[http://api.highcharts.com/highcharts#plotOptions.series.stacking](http://api.highcharts.com/highcharts#plotOptions.series.stacking)

# apache - RewriteCond 忽略网站而不是网站

> ID：14938677
> 
> 赞同：0
> 
> 时间：2013-02-18T14:32:55.787
> 
> 标签：apache

我知道这可能不是最好的命名方案，但我的服务器上有一个名为 web 的文件夹，我希望重写使用我的 .htaccess 文件忽略该文件夹。其余的被重定向到codeigniter，我有一个需要重定向的/website，但是如果我像下面这样输入异常，它会忽略web和/website。

```
RewriteCond $1 !^(index\.php|files|web|image) 
```

也许有更好的方式来表达这个问题，所以它更通用，可以多次使用，但我不知道有什么方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:43:26.737

毫无疑问，有一个更清洁的解决方案，但同时这样的事情可能会奏效。想法是分成两个条件，一个用于目录，一个用于文件。第一个条件的尾随 / 意味着只有那些确切的目录应该被处理。

```
RewriteCond $1 !^(web|files|image)/
RewriteCond $1 !^index.php 
```

请注意，这是未经测试的，但希望能给您一个想法。

# c# - HowTo：在平铺视图中获取 Winforms ListView 以水平呈现

> ID：14938689
> 
> 赞同：1
> 
> 时间：2013-02-18T14:33:35.883
> 
> 标签：c#, winforms, listview

[如Horizo​​ntal scroll winforms listview](https://stackoverflow.com/questions/1044599/horizontal-scroll-winforms-listview)中所述，我已将 Alignment 设置为 Left，但这无济于事。它现在向下渲染，但渲染下一个它不适合第一个图块右侧的图块。

根据我目前的设置，这给了我两排四块瓷砖，而我想要一排八块。当您考虑到我的组只有两个或三个项目时，它看起来更糟，而不是呈现为单行瓷砖，而是呈现为两行。无论是一列还是两列。

![在此处输入图像描述](../Images/71f3f7ce29ef83658d4e57f1907c7e95.png)

# awk - 在 awk 中打印数值 < NF？

> ID：14938690
> 
> 赞同：1
> 
> 时间：2013-02-18T14:33:38.457
> 
> 标签：awk

我使用 pgbench 运行了一堆测试，记录了结果：

```
run-params: 1 1 1
transaction type: SELECT only
scaling factor: 1
query mode: simple
number of clients: 1
number of threads: 1
duration: 90 s
number of transactions actually processed: 280465
tps = 3116.254233 (including connections establishing)
tps = 3116.936248 (excluding connections establishing)

run-params: 1 1 2
transaction type: SELECT only
scaling factor: 1
query mode: simple
number of clients: 1
number of threads: 1
duration: 90 s
number of transactions actually processed: 505943
tps = 5621.570463 (including connections establishing)
tps = 5622.811538 (excluding connections establishing)

run-params: 10000 10 3
transaction type: SELECT only
scaling factor: 10000
query mode: simple
number of clients: 10
number of threads: 1
duration: 90 s
number of transactions actually processed: 10
tps = 0.012268 (including connections establishing)
tps = 0.012270 (excluding connections establishing) 
```

我想提取图形的值。同时尝试学习AWK。这是我的 AWK 程序：

```
/run-params/      { scaling = $2 ; clients = $3 ; attempt = $4 }
/^tps.*excluding/ { print $scaling "," $clients "," $attempt "," $3 } 
```

当我运行它时，我得到以下输出：

```
$ awk -f b.awk -- b.log 
tps,tps,tps,3116.936248
tps,tps,=,5622.811538
,,0.012270,0.012270 
```

这不是我想要的。

我明白什么时候`scaling = 1`，1 引用字段 1，在这种情况下恰好是 tps。当 scaling = 10000 时，因为行上没有 10000 个字段，所以返回 null。我确实尝试使用 分配缩放和朋友`"" $2`，但无济于事。

如何在后续操作块中使用/报告数值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:45:56.090

简单的把`$`前面的`scaling`等去掉。即是`scaling`变量引用，`$scaling`是字段引用。

# android - 无法在可扩展的 ListView 中实现 onChildClick()

> ID：14938691
> 
> 赞同：0
> 
> 时间：2013-02-18T14:33:39.510
> 
> 标签：android, android-layout, android-listview

`setOnGroupExpandListener()`工作正常，但子节点不调用。可能是什么问题？

活动课：

```
public class MainActivity extends ExpandableListActivity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ExpandableListView expandbleLis = getExpandableListView();
        expandbleLis.setDividerHeight(2);
        expandbleLis.setGroupIndicator(null);
        //expandbleLis.setClickable(true);

        setGroupData();
        setChildGroupData();

        NewAdapter mNewAdapter = new NewAdapter(groupItem, childItem);
        mNewAdapter.setInflater((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE),this);
        getExpandableListView().setAdapter(mNewAdapter);

        expandbleLis.setOnGroupExpandListener(new OnGroupExpandListener()
          {
           public void onGroupExpand(int groupPosition) 
           {
            Log.e("onGroupExpand", "OK");
           }
          });

        expandbleLis.setOnGroupCollapseListener(new OnGroupCollapseListener()
          {
           public void onGroupCollapse(int groupPosition) 
           {
            Log.e("onGroupCollapse", "OK");
           }
          });

        expandbleLis.setOnChildClickListener(new OnChildClickListener()
          {
           @Override
           public boolean onChildClick(ExpandableListView parent, View v,
             int groupPosition, int childPosition, long id) {
            Log.e("OnChildClickListener", "OK");
            return false;
           }
          });
    }

    public void setGroupData() {
        groupItem.add("TechNology");
        groupItem.add("Mobile");
        groupItem.add("Manufacturer");
        groupItem.add("Extras");
    }

    ArrayList<String> groupItem = new ArrayList<String>();
    ArrayList<Object> childItem = new ArrayList<Object>();

    public void setChildGroupData() {
        /**
         * Add Data For TecthNology
         */
        ArrayList<String> child = new ArrayList<String>();
        child.add("Java");
        child.add("Drupal");
        child.add(".Net Framework");
        child.add("PHP");
        childItem.add(child);

        /**
         * Add Data For Mobile
         */
        child = new ArrayList<String>();
        child.add("Android");
        child.add("Window Mobile");
        child.add("iPHone");
        child.add("Blackberry");
        childItem.add(child);
        /**
         * Add Data For Manufacture
         */
        child = new ArrayList<String>();
        child.add("HTC");
        child.add("Apple");
        child.add("Samsung");
        child.add("Nokia");
        childItem.add(child);
        /**
         * Add Data For Extras
         */
        child = new ArrayList<String>();
        child.add("Contact Us");
        child.add("About Us");
        child.add("Location");
        child.add("Root Cause");
        childItem.add(child);
    }

        } 
```

适配器：

```
@SuppressWarnings("unchecked")
public class NewAdapter extends BaseExpandableListAdapter {

    public ArrayList<String> groupItem, tempChild;
    public ArrayList<Object> Childtem = new ArrayList<Object>();
    public LayoutInflater minflater;
    public Activity activity;

    public NewAdapter(ArrayList<String> grList, ArrayList<Object> childItem) {
        groupItem = grList;
        this.Childtem = childItem;
    }

    public void setInflater(LayoutInflater mInflater, Activity act) {
        this.minflater = mInflater;
        activity = act;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return null;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return 0;
    }

    @Override
    public View getChildView(int groupPosition, final int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        tempChild = (ArrayList<String>) Childtem.get(groupPosition);
        TextView text = null;
        if (convertView == null) {
            convertView = minflater.inflate(R.layout.childrow, null);
        }
        text = (TextView) convertView.findViewById(R.id.textView1);
        text.setText(tempChild.get(childPosition));
        /*convertView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(activity, tempChild.get(childPosition),
                        Toast.LENGTH_SHORT).show();
            }
        });*/
        return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return ((ArrayList<String>) Childtem.get(groupPosition)).size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return null;
    }

    @Override
    public int getGroupCount() {
        return groupItem.size();
    }

    @Override
    public void onGroupCollapsed(int groupPosition) {
        super.onGroupCollapsed(groupPosition);
    }

    @Override
    public void onGroupExpanded(int groupPosition) {
        super.onGroupExpanded(groupPosition);
    }

    @Override
    public long getGroupId(int groupPosition) {
        return 0;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = minflater.inflate(R.layout.grouprow, null);
        }
        ((CheckedTextView) convertView).setText(groupItem.get(groupPosition));
        //((CheckedTextView) convertView).setChecked(isExpanded);
        return convertView;
    }

    @Override
    public boolean hasStableIds() {
        return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:49:18.923

请在您的适配器中从此方法返回 true。

```
@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    return true;
} 
```

`ExpandableListActivity`如果您要`onChildClickListebner`手动设置侦听器，那么使用的意义何在。只需覆盖`onChildClick()`. 您还可以`ExpandableListActivity`覆盖. [http://developer.android.com/reference/android/app/ExpandableListActivity.html](http://developer.android.com/reference/android/app/ExpandableListActivity.html)`onGroupExpand()``onGroupCollapse()``ExpandableListActivity`

# sql-server-express - SQL Server Express 导致 CPU 在单核平板电脑上达到 100%

> ID：14938693
> 
> 赞同：1
> 
> 时间：2013-02-18T14:33:51.137
> 
> 标签：sql-server-express, cpu-usage

我正在一台用于特殊用途应用程序的老式平板电脑上运行 SQL Server Express 的实例。SQL Server 进程会定期启动并以 100% 的速度运行 CPU，从而使应用程序停止。（从技术上讲，它不会停止，它只是将其减慢到关键进程超时的程度。）在更换硬件之前还需要两到三年，所以这不是一个选择。有没有办法限制 SQL Server Express？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T02:39:10.627

有一些技术可以识别 MSSQL 上的 CPU 占用活动，但由于您的机器当时完全没有响应，因此您几乎没有选择。使用 SQL Profiler 运行后台跟踪记录到表或文件可能是您最好的选择。

直到最近，您还需要付费版本的 MSSQL 才能使用 Profiler，但 MS 现在包括带有 MSSQL Express 2012 SP1 的 Profiler。这是一个直接下载链接：

[http://www.microsoft.com/en-us/download/details.aspx?id=35579](http://www.microsoft.com/en-us/download/details.aspx?id=35579)

（注意，如果您不想升级您的 MSSQL 服务器实例，您可能可以安装 Profiler）。

如果您以前从未使用 Profiler 来诊断占用 CPU 的查询，那么我建议您这样做：

*   新跟踪 > 连接到您的 MSSQL 实例
*   确保选择了“CPU”列
*   确保检查所有查询（语句/查询/批处理/过程/等）的“开始”和“完成”事件。
*   使用“列过滤器”仅显示“CPU”列中有值的事件
*   选择跟踪的名称**和目标**（表或 .TRN 文件）
*   启动跟踪并让它运行

遇到 CPU 问题后，一旦您的机器恢复：打开跟踪结果，特别注意 CPU 列，以及 100% 利用率开始的日期/时间。这是一个链接，其中包含有关使用 Profiler 分析跟踪的更多信息：

[http://msdn.microsoft.com/en-us/library/ms175848.aspx](http://msdn.microsoft.com/en-us/library/ms175848.aspx)

# javascript - 如何将一个事件推送到两个不同的 Google Analytics 帐户？

> ID：14938698
> 
> 赞同：3
> 
> 时间：2013-02-18T14:34:13.323
> 
> 标签：javascript, google-analytics, event-tracking

我在我的网站上实现了以下内容，以将事件传递给两个不同的 Google-Analytics 帐户。

在我的头部部分的 GA-Trackingcode 中，定义**了两个不同的帐户**：

```
_gaq.push(['_setAccount', 'UA-XXXXX1-1']);   
_gaq.push(['_trackPageview']);  

_gaq.push(['account2._setAccount', 'UA-XXXXX2-1']);
_gaq.push(['account2._trackPageview']); 
```

我的活动如下：

```
<a href="#" onClick="_gaq.push(['_trackEvent', 'Download', 'xyz', 'xyzz'],
['account2._trackEvent', 'Download', 'xyz', 'xyzz']);">
Download_Fible_Fluegas</a> 
```

但是代码确实**只**将事件推送到 UA-XXXXX1-1 帐户，而不是（如我预期的）两个帐户！为什么？！？！

有人可以帮忙吗？

-谢谢

**编辑**

这是我正在**测试**的新实现，就像谷歌在他们的文档中告诉我的那样[https://developers.google.com/analytics/devguides/collection/gajs/?hl=de-DE#MultipleCommands](https://developers.google.com/analytics/devguides/collection/gajs/?hl=de-DE#MultipleCommands)

```
<a href="#" onClick="_gaq.push(['_setAccount', 'UA-XXXXXXX3-1'], ['_trackEvent', 'Download', 'xyz', 'xyzz'],['account2._setAccount', 'UA-XXXXXXX2-1'],['account2._trackEvent', 'Download', 'xyz', 'xyzz']);">Link_to_download</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:24:29.717

`_trackPageview`并`_trackEvent`通过从 Google Analytics 服务器请求跟踪像素来工作 - 如果您的链接在同一窗口中打开新页面或导致下载，则浏览器可能会在捕获数据之前提前取消跟踪像素请求，并且您'第一个请求已经通过，在时间上很幸运。

常见的解决方案是将链接处理延迟一小段时间（如 150 毫秒），以允许发出请求。

就像是

```
function trackMe(link) {
  _gaq.push(['_trackEvent', 'Download', 'xyz', 'xyzz'], ['account2._trackEvent', 'Download', 'xyz', 'xyzz']);
  setTimeout(function(){document.location = link.href}, 150);
  return false;
}

<a href="#" onClick="return trackMe(this);">Download_Fible_Fluegas</a> 
```

# c# - 无法将字符串转换为 DateTime？

> ID：14938702
> 
> 赞同：0
> 
> 时间：2013-02-18T14:34:19.883
> 
> 标签：c#, .net, datetime

在函数内部，**我需要在 seconds 中找到 2 个日期之间的差异**。如果差异超过 30 秒，我返回**False**否则返回**True**，第一个我从数据库中读取它，第二个是当前 DateTime.Now

这是我正在使用的代码片段，它可以`dr.GetValue(0).ToString()`在数据库中保存当前值的同时完成工作：

```
if (dr.Read())
            {

                DateTime nowDate = Convert.ToDateTime(DateTime.Now.ToString("M/dd/yyyy H:mm:ss tt"));
                DateTime then = DateTime.ParseExact(dr.GetValue(0).ToString(), "M/dd/yyyy H:mm:ss tt", CultureInfo.InvariantCulture);

                TimeSpan diff = nowDate - then;

                int timeDifference = diff.Seconds;

                if (timeDifference > 30)
                {
                    myConn.Dispose();
                    return false;
                }
                else {
                    myConn.Dispose();
                    return true;
                }
            } 
```

当我执行上面的代码时，我收到一条消息错误：
`string was not recognized as valid DateTime`

这是导致错误的行：

```
 DateTime then = DateTime.ParseExact(dr.GetValue(0).ToString(), "M/dd/yyyy H:mm:ss tt", CultureInfo.InvariantCulture); 
```

时间以这种格式存储在数据库中：`2013-02-18 14:06:37`

但是当我执行以下行（出于调试目的）时：

```
MessageBox.Show(dr.GetValue(0).ToString()); 
```

我看到一个消息框以这种格式显示日期：`2/18/2013 2:06:37 PM`

如何找到当前时间与存储在 dr.GetValue(0).ToString() 中的时间之间的秒差

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:37:15.767

你想要`h`，没有`H`。`h`是 12 小时格式`H`的小时， 是 24 小时格式的小时。由于您的示例小时是`2 PM`（不是`14 PM`），因此它是您想要的 12 小时格式。

还：

*   您正在将您现在的时间转换为字符串并返回 - 不要打扰！
*   您`Seconds`算不上`TotalSeconds`- 这是不正确的，因为例如 60 秒的时间段给出的`Seconds`值为`0`.

```
DateTime nowDate = DateTime.Now;
DateTime then = DateTime.ParseExact(
    dr.GetValue(0).ToString(), "M/dd/yyyy h:mm:ss tt",
    CultureInfo.InvariantCulture);

TimeSpan diff = nowDate - then;

double secondsDifference = diff.TotalSeconds; 
```

你甚至应该能够按照以下方式做一些事情

```
DateTime then = dr.GetDateTime(0); 
```

并完全避免字符串解析，但`H`/`h`差异是您得到您询问的特定异常的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:41:51.447

如果看起来像您的日期是数据库中的日期时间，您可以将这两行简化为：

```
DateTime nowDate = DateTime.Now;
DateTime then = (DateTime)dr.GetValue(0); 
```

（虽然我在这里做了很多假设）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:44:27.977

你的代码真的应该很简单：

```
if (dr.Read())
{
    DateTime then = dr.GetDateTime(0);
    TimeSpan diff = DateTime.Now - then;
    int timeDifference = diff.TotalSeconds;
} 
```

需要注意的一件事 - 你真的不应该打电话给`myConn.Dispose();`你的`if/else`. 将您的联系和读者包装在一份`using`声明中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:39:30.990

我认为您的服务器有应用程序服务器设置了其他日期格式。您可以尝试的是：

```
Convert.ToDate(value,System.Globalization.CultureInfo.GetCultureInfo("en-US").DateTimeFormate); 
```

希望这将解决错误。尚未测试，所以希望最好

# javascript - 坚持将 d3 与数据集成

> ID：14938703
> 
> 赞同：0
> 
> 时间：2013-02-18T14:34:21.807
> 
> 标签：javascript, d3.js

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>D3 Demo: SVG with data</title>
<script type="text/javascript" src="d3/d3.v3.js"></script>
<style type="text/css">
</style>
</head>
<body>
<script type="text/javascript">

var dataset = {
    "entry":[
    {"date": "2011-03-18T00:00:04"},
    {"date": "2011-04-18T00:05:03"},
    {"date": "2011-03-29T00:10:04"},
    {"date": "2011-05-19T00:15:03"},
    {"date":"2011-06-12T00:20:03"},
    {"date": "2011-08-09T00:25:03"}
    ],

 "entry" :[
    {"date": "2012-03-18T00:00:04"},
    {"date": "2012-04-18T00:05:03"},
    {"date": "2012-03-29T00:10:04"},
    {"date": "2012-05-19T00:15:03"},
    {"date":"2012-06-12T00:20:03"},
    {"date": "2012-08-09T00:25:03"}
    ]
}

console.log(dataset.entry);

var height = 600;
var width = 500;
var x = d3.time.scale().domain([new Date(2011, 0, 1,23,33,00), new Date(2013, 0, 1, 23, 59)]).range([0, width]);

var svg = d3.selectAll("body")
.append("svg")
.attr("width",width)
.attr("height",height)
.attr("shape-rendering","crispEdges");

svg.selectAll("body")
.data(dataset)
.enter()
.append("rect")
.attr("width", 4)
.attr("height",12)
.attr("x", function(d) { return x(new Date(d.entry.date)); } )
.attr("y",function(d,i){return i*10;})
.attr("fill","steelblue");

</script>
</body>
</html> 
```

这是我创建的一个简单文件。目的是模仿甘特图。如您所见，数组中共有 12 个值。我做错了什么，导致无法打印。

谁能指导我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:17:24.153

传递给 d3 选择的数据应该是一个数组。我想你想要的是这样的：

```
svg.selectAll("body")
  .data(dataset.entry)
  ...
  .attr("x", function(d) { return x(new Date(d.date)); } ) 
```

另外，删除“数据集”的“条目”属性之一。它们似乎在您当前的代码中重复，我怀疑这是复制/粘贴错误。

如果不是复制/粘贴错误，则不能定义两个名称相同的“条目”元素 - 您需要将数据集转换为数组。IE：

```
var dataset = [ [ {"date": "blah" } ], [ {"date":"blah" } ] ]; 
```

并更改您访问数据的方式。

# wpf - WPF 如何使用 DesignerProperties.IsInDesignTool 解决设计时错误“无法创建实例”？

> ID：14938714
> 
> 赞同：0
> 
> 时间：2013-02-18T14:34:59.503
> 
> 标签：wpf, design-time

我使用以下类来填充组合框：

```
public class DamageTypeList
{
    static Begbil2Entities _DB = new Begbil2Entities();
    public static List<HUB_DamageTypes> _list = (from d in _DB.HUB_DamageTypes orderby d.DamageOrder select d).ToList(); 

    public static List<HUB_DamageTypes> TList
    {
        get
        {
            return _list;
        }
    }
 } 
```

在 xaml 文件中，我像这样添加它：

```
<UserControl.Resources>
    <me:DamageTypeList  x:Key="DamageTypeList"/> 
```

xaml 行创建错误（仅在设计时，它在运行时完美运行）：

无法创建“DamageTypeList”的实例。C:\HUB\HUB\HubbCostOfferPage.xaml

我找到了一些建议来解决它：

```
if (!DesignerProperties.IsInDesignTool) 
```

但是如何使用它来解决我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:36:19.807

您可以使用标志 DesignerProperties.IsInDesignTool 来防止创建数据库并在列表中使用硬编码实体。

```
public class DamageTypeList
{
    static Begbil2Entities _DB;
    public static List<HUB_DamageTypes> _list;

    public static Begbil2Entities DB
    {
        get
        {
            if(_DB == null && !DesignerProperties.IsInDesignTool)
                _DB = new Begbil2Entities();
            return _DB;
        }
    }

    public static List<HUB_DamageTypes> TList
    {
        get
        {
            if(_list == null)
            {
                if(!DesignerProperties.IsInDesignTool)
                    _list = (from d in DB.HUB_DamageTypes orderby d.DamageOrder select d).ToList(); 
                else
                    _list = new List<HUB_DamageTypes>(){
                        // Initialize it with hardcoded values
                    };
            }
            return _list;
        }
    }
 } 
```

Before doing that, tough, I would investigate a little further what is the cause of the design-time exception, as @fhlamarche suggested. You can try to debug the design time execution, is not that hard. See [this link](http://blogs.msdn.com/b/expression/archive/2008/06/19/debugging-design-time-exceptions.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:56:47.607

设计器尝试调用默认构造函数，但您的类没有。
您只需要向您的类添加一个`private`或`internal`默认构造函数。

# python - 在 Python 3 中使用 urllib 的套接字资源警告

> ID：14938716
> 
> 赞同：10
> 
> 时间：2013-02-18T14:35:07.893
> 
> 标签：python, python-3.x, warnings, urllib

我正在使用 urllib.request.urlopen() 从我正在尝试测试的 Web 服务中获取。

这将返回一个 HTTPResponse 对象，然后我使用 read() 来获取响应正文。

但我总是从 socket.py 中看到关于未关闭套接字的 ResourceWarning

这是相关的功能：

```
from urllib.request import Request, urlopen

def get_from_webservice(url):
    """ GET from the webservice  """
    req = Request(url, method="GET", headers=HEADERS)
    with urlopen(req) as rsp:
        body = rsp.read().decode('utf-8')
        return json.loads(body) 
```

这是程序输出中出现的警告：

```
$ ./test/test_webservices.py
/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/socket.py:359: ResourceWarning: unclosed <socket.socket object, fd=5, family=30, type=1, proto=6>
self._sock = None
.s
----------------------------------------------------------------------
Ran 2 tests in 0.010s

OK (skipped=1) 
```

如果我可以对 HTTPResponse（或 Request？）做任何事情以使其干净地关闭其套接字，我真的很想知道，因为此代码用于我的单元测试；我不喜欢忽略任何地方的警告，尤其是不在那儿。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-23T11:04:51.527

我不知道这是否*是*答案，但它是答案的一部分。

如果我将标头“connection: close”添加到来自我的 Web 服务的响应中，HTTPResponse 对象似乎会正确清理自身而不会发出警告。

事实上，HTTP 规范 ( [http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html) ) 说：

> 不支持持久连接的 HTTP/1.1 应用程序必须在每条消息中包含“关闭”连接选项。

所以问题出在服务器端（即我的错！）。如果您无法控制来自服务器的标头，我不知道您能做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-14T10:45:33.433

我遇到了同样的问题，`urllib3`我只是添加了一个上下文管理器来自动关闭连接：

```
import urllib3

def get(addr, headers):
    """ this function will close the connection after a http request. """
    with urllib3.PoolManager() as conn:
        res = conn.request('GET', addr, headers=headers)
        if r.status == 200:
            return res.data
        else:
            raise ConnectionError(res.reason) 
```

请注意，`urllib3`它旨在拥有一个连接池并为您保持连接活动。如果它需要发出一系列请求，例如很少调用后端 API，这可以显着加快您的应用程序的速度。

请`urllib3`在此处阅读有关连接池的文档：[https ://urllib3.readthedocs.io/en/1.5/pools.html](https://urllib3.readthedocs.io/en/1.5/pools.html)

**PS**你也可以使用**`requests`**lib，它不是 Python 标准库的一部分（2019 年），但非常强大且易于使用：[http ://docs.python-requests.org/en/master/](http://docs.python-requests.org/en/master/)

# html - 最大宽度不适用于桌子或 tr？

> ID：14938721
> 
> 赞同：1
> 
> 时间：2013-02-18T14:35:39.450
> 
> 标签：html, css

我有一个 php，它返回的行可能很长，这会导致水平滚动条很烦人。

我尝试使用 max-width 的 css 属性，但它没有任何区别。我希望该行在达到新行的最大屏幕尺寸时基本上中断。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:40:22.613

首先，尝试更改表格样式以包括：

```
table-layout:fixed; 
```

如果这不起作用，请更改 td 样式以包括：

```
word-wrap:break-word; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:41:09.307

你可以`word-wrap: break-word;`这样使用：[jsFiddle](http://jsfiddle.net/B93XB/11/)

# java - 使用 System.arraycopy 复制到 ArrayList 时出现异常，获取：ArrayStoreException：null

> ID：14938732
> 
> 赞同：5
> 
> 时间：2013-02-18T14:36:20.747
> 
> 标签：java, arrays, arraylist

我在尝试复制两个数组时遇到了一些麻烦。考虑以下简单代码：

```
 ArrayList<Integer> t1 = new ArrayList<Integer>();
    Integer i1 = new Integer(1);
    Integer i2 = new Integer(2);
    t1.add(i1);
    t1.add(i2);

    ArrayList<Integer> t2 = new ArrayList<Integer>();
    System.arraycopy(t1, 0, t2, 0, t1.size()); 
```

控制台显示： java.lang.ArrayStoreException: null 。这段代码可能有什么问题，或者我该如何以不同的方式做到这一点。抱歉，这可能是一个简单的问题，但我在这个问题上坚持了几个小时，无法解决。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T14:37:53.733

System.arraycopy 期望数组（例如 Integer[]）作为数组参数，而不是 ArrayLists。

如果您想复制这样的列表，只需执行以下操作：

```
List<Integer> t2 = new ArrayList<Integer>(t1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T14:40:17.110

你需要`Collections#copy`

```
Collections.copy(t1,t2); 
```

它会将 t1 列表中的所有元素复制到 t2 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-03T10:49:39.483

如果有人只想添加第二个 ArrayList 的一部分，可以这样做：

```
ArrayList<Integer> t1 = new ArrayList<Integer>();
Integer i1 = new Integer(1);
Integer i2 = new Integer(2);
Integer i3 = new Integer(3);
t1.add(i1);
t1.add(i2);
t1.add(i3);

ArrayList<Integer> t2 = new ArrayList<Integer>();

/*
 * will add only last two integers
 * as it creates a sub list from index 1 (incl.)
 * to index 3 (excl.)
 */
t2.addAll(t1.subList(1, 3));

System.out.println(t2.size()); // prints 2
System.out.println(t2.get(0)); // prints 2
System.out.println(t2.get(1)); // prints 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:45:19.920

更轻松：

```
ArrayList<Integer> t2 = new ArrayList<Integer>(t1); 
```

或者如果 t2 已经创建

```
t2.clear();
t2.addAll(t1); 
```

# java - 在 java 中对整个脚本运行 pig explain 命令

> ID：14938735
> 
> 赞同：2
> 
> 时间：2013-02-18T14:36:33.520
> 
> 标签：java, apache-pig, sql-execution-plan

我正在尝试找到在 java 中对整个 pig 脚本运行解释命令的方法。我使用的是 PigServer，但它只提供对单个查询（别名）而不是整个脚本的解释。有没有办法做类似的事情：

```
$ pig -x local -e 'explain -script Temp1/TPC_test.pig -out explain-out9.txt' 
```

但从我的Java代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T19:50:52.263

为此，您可以使用[PigRunner](http://pig.apache.org/docs/r0.10.0/api/index.html?org/apache/pig/PigRunner.html)。
例如：

```
import org.apache.pig.PigRunner;
import org.apache.pig.tools.pigstats.PigStats;

public class PigTest {

    public static void main(String[] args) throws Exception {

        args = new String [] {
                "-x", "local",
                "-e", "explain -script Temp1/TPC_test.pig -out explain-out9.txt"
        };

        PigStats stats = PigRunner.run(args, null);
        //print plan:
        //stats.getJobGraph().explain(System.out, "text", true);
    }

} 
```

我发现需要以下运行时依赖项来避免*NoClassDefFoundError*：

*   [杰克逊-映射器-asl](http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-mapper-asl)
*   [antlr 运行时](http://mvnrepository.com/artifact/org.antlr/antlr-runtime)
*   [番石榴](http://mvnrepository.com/artifact/com.google.guava/guava)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:57:41.350

您可以使用 org.apache.pig.PigServer 从 Java 程序运行 pig 脚本：

```
PigServer pigServer = new PigServer(ExecType.MAPREDUCE);
pigServer.registerScript("scripts/test.pig");
Requires 'pig.properties' on classpath.

fs.default.name=hdfs://<namenode-hostname>:<port>
mapred.job.tracker=<jobtracker-hostname>:<port>
Or pass an instance of java.util.Properties to PigServer constructor.

Properties props = new Properties();
props.setProperty("fs.default.name", "hdfs://<namenode-hostname>:<port>");
props.setProperty("mapred.job.tracker", "<jobtracker-hostname>:<port>");
PigServer pigServer = new PigServer(ExecType.MAPREDUCE, props); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-30T07:58:26.437

当然你也可以使用 grunt shell！（我总是忘记这一点。）

在我们的网站上，我们使用了一个启动器脚本，它准备了一个 pig 调用命令，如下所示：

```
$ pig -p param1=foo -p param2=bar script.pig 
```

您可以`explain -script`在 grunt shell 中使用：

*   调用`pig`
*   用`explain`

看起来像：

```
$ pig
grunt> explain -param param1=foo -param param2=bar script.pig 
```

# c# - 排序时如何投射？

> ID：14938738
> 
> 赞同：0
> 
> 时间：2013-02-18T14:36:39.757
> 
> 标签：c#, .net, linq, sql-order-by

我有类**Vehicle**和**class:Car是从****class:Vehicle**继承的，如下所示。我有一个列表，我想使用**LINQ**基于 Car 类（不是车辆父类）的属性对其进行排序。

```
class vehicle
{
    public String Name {get; set; }
}

class Car:Vehicle
{
    public String ModelName {get; set; }
}

List<Vehicle> vehicleList=new List<Vehicle>();

Car c1 = new Car();
vechicleList.Add(c1); //s note that i am adding **Car** objects

Car c2 = new Car();
vechicleList.Add(c2);
// added 10 such Car objects 
```

然后我想根据 CarModel 对车辆列表进行排序（这是 Car 的属性，而不是 Parent 类的属性）

我尝试了下面的一个，但它不起作用。

```
vehicleList.OrderBy(c => (Car)c.ModelName) 
```

有关如何执行此操作的任何帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T14:39:18.017

你必须决定你想拥有什么：

实例列表`Car`或`Vehicle`实例列表。

如果您想要一个`Vehicle`实例列表，则不能按 的属性排序`Car`，因为在列表中`Vehicles`也可能有 a`Bus`或 a `Bicycle`。
执行您当前尝试的操作（转换为`Car`）可能会在运行时引发异常。

话虽如此，如果您坚持这样做，则必须注意两件事：

1.  你需要修复你的演员表：`vehicleList.OrderBy(c => ((Car)c).ModelName)`
2.  您需要注意`OrderBy`不执行就地排序。`vehicleList`仍将保持其原始顺序。如果要在 中获得有序结果`vehicleList`，则需要将结果分配`OrderBy`给它：

    ```
    vehicleList = vehicleList.OrderBy(c => ((Car)c).ModelName).ToList(); 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T14:38:15.427

做你想做的最易读的代码是

```
vehicleList.Cast<Car>().OrderBy(c => c.ModelName); 
```

当然，您也可以修复括号并编写相同的内容

```
vehicleList.OrderBy(c => ((Car)c).ModelName); 
```

**也就是说，如果`Vehicle`您的列表中有任何不是`Car`**. 如果这不能发生，那为什么不`List<Car>`首先呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:37:54.257

你必须投进`c`一个`Car`，不是`c.ModelName`。

尝试 ：

```
vehicleList.OrderBy(c => ((Car)c).ModelName) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:39:08.840

尝试使用：

```
vehicleList.OfType<Car>().OrderBy(c=>c.ModelName) 
```

注意：这只会返回您列表中的汽车

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T14:39:42.080

尝试这个：

```
vehicleList.OrderBy(c=>((Car)c).ModelName) 
```

但请注意，如果物品实际上不是汽车，它会爆炸！

一种解决方法是：

```
vehicleList.OrderBy<Vehicle, string>(c=>
{
    Car car = c as Car;
    if (car != null)
        return car.ModelName
    else
        return "";
} 
```

但如果有“非汽车”，则位置将由空字符串相对于列表中的其他项目确定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T14:40:22.593

```
vehicleList.OfType<Car>().OrderBy(c=>c.ModelName) 
```

# html - 全屏背景色css3

> ID：14938742
> 
> 赞同：6
> 
> 时间：2013-02-18T14:36:58.077
> 
> 标签：html, css

![在此处输入图像描述](../Images/76f954192889456a68a5c8b976546238.png)我有一个渐变作为背景颜色，但它只是重复。我希望渐变拉伸到全屏，因此无法缩小并看到任何空白或重复渐变。

这是我的身体CSS

```
body {
text-align:center;
background: rgb(238,238,238); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(238,238,238,1) 0%, rgba(89,89,89,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(238,238,238,1)), color-stop(100%,rgba(89,89,89,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(89,89,89,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(89,89,89,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(238,238,238,1) 0%,rgba(89,89,89,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(238,238,238,1) 0%,rgba(89,89,89,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#595959',GradientType=0 ); /* IE6-9 */
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T14:47:03.617

尝试设置高度和宽度，`body`并尝试使用`background-attachment`：

```
html, body
{
    width: 100%;
    height: 100%;
}
body
{
    …
    width: 100%;
    height: 100%;
    background-attachment: fixed;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T14:43:42.790

我将您的代码粘贴在测试页面中，它似乎完全符合您的要求。如果您遇到问题，也许您可​​以尝试添加`background-size: 100%;`

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-21T12:46:20.107

以下对我有用：

```
body
{
...
background-size: cover;
} 
```

# asp.net - 如何阅读 asp.net 中的所有 X 标头

> ID：14938746
> 
> 赞同：1
> 
> 时间：2013-02-18T14:37:05.550
> 
> 标签：asp.net, .net, mobile, http-headers, ultidev

我希望能够使用某种形式的 ID 来识别移动设备。

我读了这个答案：[Get unique, static id from a device via web request](https://stackoverflow.com/questions/6445472/get-unique-static-id-from-a-device-via-web-request) about reading x headers in asp.net 但是当我使用以下代码列出所有标头时，我没有得到任何有用的 x 标头

```
 For Each var As String In Request.ServerVariables
        Response.Write("<b>" & var & "</b>: " & Request(var) & "<br>")
    Next 
```

在我的安卓设备上，我得到的唯一 X 标头是 HTTP_X_WAP_PROFILE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:42:53.513

如果您想阅读 HTTP 标头，那么您就走错了路。ServerVariables 仅包含来自标头的*一些*信息。

您应该查看 Request.Headers 属性。以下代码将列出来自 HTTP 请求的所有标头。推测您所指的“x”标题将在那里..

```
For Each headerName As String In Request.Headers.AllKeys
    Response.Write("<b>" & headerName & "</b>: " & Request.Headers(headerName) & "<br>")
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:46:50.650

要读取标题值，您可以使用下面的代码。
我通过使用`user-agent`它可以了解浏览器。

**C＃**

```
var headers = Request.Headers.ToString();

// If you want it formated in some other way.
var headers = String.Empty;
foreach (var key in Request.Headers.AllKeys)
  headers += key + "=" + Request.Headers[key] + Environment.NewLine; 
```

**VB.NET：**

```
Dim headers = Request.Headers.ToString()

' If you want it formated in some other way.'
Dim headers As String = String.Empty
For Each key In Request.Headers.AllKeys
  headers &= key & "=" & Request.Headers(key) & Environment.NewLine
Next 
```

从[在 ASP.NET (Android) 中检测移动设备用户代理](http://forums.asp.net/t/1595912.aspx/1)：

```
 //for Mobile device 
    protected override void OnInit(EventArgs e) 
    { 

        string userAgent = Request.UserAgent; 
        if (userAgent.Contains("BlackBerry") 
          || (userAgent.Contains("iPhone") || (userAgent.Contains("Android")))) 
        { 
            //add css ref to header from code behind 
            HtmlLink css = new HtmlLink(); 
            css.Href = ResolveClientUrl("~/mobile.css"); 
            css.Attributes["rel"] = "stylesheet";  
            css.Attributes["type"] = "text/css";  
            css.Attributes["media"] = "all";  
            Page.Header.Controls.Add(css); 
        }       
    } 
```

# hibernate - 从控制台应用程序使用带有休眠功能的spring-data-jpa时如何延迟加载收集

> ID：14938748
> 
> 赞同：31
> 
> 时间：2013-02-18T14:37:07.450
> 
> 标签：hibernate, spring-data-jpa

我有一个小型控制台应用程序，我正在使用 spring-data-jpa 和休眠。在独立的控制台应用程序中，当使用 spring-data-jpa 及其存储库时，我真的不知道如何延迟初始化集合。这是我的一些代码：

```
@Entity
public class User {
...
    @OneToMany(cascade=CascadeType.ALL)
    @JoinColumn(name="USER_ORDER_ID")
    private Set<Order> orders = new HashSet<Order>();
...
} 
```

存储库：

```
public interface UserRepository extends PagingAndSortingRepository<User, Long> {

    public ArrayList<User> findByFirstNameIgnoreCase(String firstName);
} 
```

服务内涵：

```
@Service
@Repository
@Transactional
public class UserServiceImpl implements UserService {
    @Autowired
    private UserRepository userRepository;

public ArrayList<User> findByFirstNameIgnoreCase(String firstName) {
    ArrayList<User> users = new ArrayList<User>();
    users = userRepository.findByFirstNameIgnoreCase(firstName);
    return users;
} 
```

我的主要方法：

```
...
user = userRepository.findByFirstNameIgnoreCase("john").get(0);
orders = user.getOrders();
for (Order order : orders) {
  LOGGER.info("getting orders: " + order.getId());
} 
```

foreach 循环出现异常：

EVERE：无法延迟初始化角色集合：com.aki.util.User.orders，没有会话或会话关闭 org.hibernate.LazyInitializationException：无法延迟初始化角色集合：

**请注意，从带有某种 OpenSessionInViewFilter 的 webapp 运行它时，我没有这个问题。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T14:58:18.667

一种解决*方案*`User.orders`是通过

 *```
@OneToMany(cascade=CascadeType.ALL, fetch = FetchType.EAGER)
private Set<Order> orders = new HashSet<Order>(); 
```

默认情况下，实体关联是延迟加载的。这意味着`orders`Set 实际上只是一个代理对象，在您调用它的方法之前不会被初始化。这很好，因为`Order`除非需要，否则不会加载关联的对象。但是，如果您尝试在正在运行的事务之外访问未初始化的集合，这可能会导致问题。

如果您知道在大多数情况下您将需要用户的订单，那么急切地获取关联是有意义的。否则，您将必须确保集合在事务中被初始化/加载。您提到的`OpenSessionInViewFilter`确保事务在请求处理期间保持打开状态，这就是您在 webapp 中没有此问题的原因。

如果您必须保持延迟加载，请尝试使用 Spring`TransactionTemplate`将代码包装在您的 main 方法中：

```
TransactionTemplate transactionTemplate = new TransactionTemplate(transactionManager);
transactionTemplate.execute(new TransactionCallbackWithoutResult() {
    @Override
    protected void doInTransactionWithoutResult(TransactionStatus status) {
    ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-20T10:05:39.233

不过，我找到了一种方法。此方法在我的服务实现中：

```
public Set<Order> fetchUserOrders(Long userId) {
    User user = userRepository.findOne(userId);
    Hibernate.initialize(user.getOrders());
    Set<Order> orders = user.getOrders();
    return orders;
} 
```

注意：这是@zagyi 在他的评论之一中所建议的，但也要注意声明：`Hibernate.initialize(user.getOrders());`没有这个集合仍然不会被初始化，你会得到一个错误。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-08-07T00:42:42.060

这对我有用：

```
@Component
public class Test {

    @Inject 
    OrderDAO orderDAO;

    @PersistenceUnit
    private EntityManagerFactory emf;

    @PostConstruct
    public void test(){
        EntityManager em= emf.createEntityManager();
        for (Order o:orderDAO.findAll()){
            o=em.find(o.getClass(),o.getId());
            System.out.println(o.getLazyField());
        }
        em.close();
    }
} 
```*

# html - Phonegap + Admob 清除 HTML5 本地存储

> ID：14938752
> 
> 赞同：1
> 
> 时间：2013-02-18T14:37:23.023
> 
> 标签：html, cordova, admob, local-storage

我已经使用 Phonegap、HTML5 LocalSorage 和 JS 完成了一个 Andriod 应用程序。一切正常。但是由于我添加了 Admob，每次应用程序完全加载或手机重新启动时，我的应用程序都会清除 LocalStorage。

就像[这里](https://stackoverflow.com/questions/8850103/android-html5localstorage-admob-bug) 和[Github](https://github.com/phonegap/phonegap/wiki/In-App-Advertisements)上的推荐一样，我使用延迟来防止清除。但在我的情况下，它仍在清除 LocalStorage。没有 Admob 一切正常。

还有其他建议如何防止 Admob 清除 localStorage？或者其他防止localStorage的简单替代方法？

感谢帮助！

# c# - c# 事件处理：避免线程争用和线程池耗尽的最佳实践

> ID：14938753
> 
> 赞同：2
> 
> 时间：2013-02-18T14:37:25.060
> 
> 标签：c#, multithreading, events, thread-safety, threadpool

当事件触发时，它们使用线程池中的线程。因此，如果您有一堆事件的触发速度比它们返回的速度快，那么您就会耗尽线程池。因此，只要您有一个事件处理程序方法，它没有任何其他控制来限制线程进入的速率，并且不能保证快速返回，并且您不会在其中煞费苦心地实现 100% 线程安全代码方法，最好实现一些线程控制。显而易见的简单事情是在事件处理方法中使用 lock() ，但如果这样做，第一个线程之后的所有线程将阻塞在队列中，等待进入锁定区域，从线程池中占用所有线程。最好检测另一个线程在这个方法中，然后快速中止。

问题是：我有一种方法可以检测到另一个已经在运行的线程，并快速中止后续线程。但由于使用“const”并在低级别手动处理锁定标志，它似乎不是很 C#-ish。有没有更好的办法？

这基本上是 lock() 功能的直接复制，但使用非阻塞 Interlocked.Exchange，而不是使用阻塞 Monitor.Enter()

```
 public class FooGoo
    {
        private const int LOCKED = 0;            // could use any arbitrary value; I choose 0
        private const int UNLOCKED = LOCKED + 1; // any arbitrary value, != LOCKED
        private static int _myLock = UNLOCKED;
        void myEventHandler()
        {
            int previousValue = Interlocked.Exchange(ref _myLock, LOCKED);
            if ( previousValue == UNLOCKED )
            {
                try
                {
                    // some handling code, which may or may not return quickly
                    // maybe not threadsafe
                }
                finally
                {
                    _myLock = UNLOCKED;
                }
            }
            else
            {
                // another thread is executing right now. So I will abort.
                //
                // optional and environment-specific, maybe you want to 
                // queue some event information or set a flag or something,
                // so you remember later that this thread aborted
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:59:34.953

到目前为止，这是我找到的最佳答案。是否存在任何等效于非阻塞 lock() 的速记来缩短它？

```
static object _myLock;
void myMethod ()
{
    if ( Monitor.TryEnter(_myLock) )
    {
        try
        {
            // Do stuff
        }
        finally
        {
            Monitor.Exit(_myLock);
        }
    }
    else
    {
        // then I failed to get the lock.  Optionally do stuff.
    }
} 
```

# c# - 如何在 Windows 窗体应用程序中显示存储过程返回的结果集？

> ID：14938758
> 
> 赞同：-2
> 
> 时间：2013-02-18T14:37:38.463
> 
> 标签：c#, .net, vb.net

我是 Windows 应用程序的新手。我将通过接受两个日期范围从存储过程返回一组结果。我将如何在 Windows 窗体应用程序中显示这些结果？

如果我可以使用数据网格视图控件，那么它看起来不太好。是否有任何其他控件我可以使用或是否有任何其他方式来显示这些结果？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:42:51.500

显示此类数据的最佳方式是使用数据表。如果您不喜欢默认网格，请尝试 Infragistics 控件，它们看起来比内置网格更漂亮、更干净。我敢肯定还有很多其他类似的控件可以下载，只是需要一点研究......

另外，如果您不希望用户添加或编辑您的网格，请将网格的只读属性更改为 true。

# javascript - Jquery Colorbox，从输入字段打开，返回值

> ID：14938767
> 
> 赞同：2
> 
> 时间：2013-02-18T14:38:06.887
> 
> 标签：javascript, jquery, colorbox

我尝试从颜色框弹出搜索表单中填充/覆盖（如果存在）输入字段，但我没有将变量返回到我的输入字段中。

这是主页：

```
link rel="stylesheet" href="jquery/css/ui-darkness/jquery-ui-1.10.1.custom.css">
<script src="jquery/js/jquery-1.9.1.js"></script>
<script src="jquery/js/jquery-ui-1.10.1.custom.js"></script>
<script src="jquery/colorbox/jquery.colorbox-min.js"></script>
<link rel="stylesheet" href="jquery/colorbox/colorbox.css" />

<script>
$(function() {
var kid = $('#Kontaktname').val();
$("#Kontaktname").colorbox({
    href:"contact_search_popup.php?s_contacts_id=" + kid,
    iframe:true,
    innerWidth:850,
    innerHeight:400,
    opacity:0.1,
    overlayClose:false,
    });
});
</script>

<p><input type="text" id="Kontaktname" value="1001" name="Kontaktname"></p>

<p id="test">
return value:
</p> 
```

这是彩盒弹出页面：

```
link rel="stylesheet" href="jquery/css/ui-darkness/jquery-ui-1.10.1.custom.css">
<script src="jquery/js/jquery-1.9.1.js"></script>
<script src="jquery/js/jquery-ui-1.10.1.custom.js"></script>
<script src="jquery/colorbox/jquery.colorbox-min.js"></script>
<link rel="stylesheet" href="jquery/colorbox/colorbox.css" />

<input type="submit" id="formSubmit" class="test" value="{Label1}" name="formSubmit"> 

<script>
 $(document).ready(function() {
 $("input.test").click(function() {
 window.parent.$("#kontaktname").text($(this).val()); // works
 window.parent.$("#test").text($(this).val());        // dont work !!!
 parent.$.colorbox.close();
 });
 });
 </script> 
```

# java - 你能用一个命令在 Geany 中编译和执行 Java 文件吗？

> ID：14938777
> 
> 赞同：3
> 
> 时间：2013-02-18T14:38:37.750
> 
> 标签：java, compiler-construction, geany

有没有办法`F1`在 Geany 中使用一个命令编译和执行 java 文件？

它比必须单击 f5 等待类先编译然后`F1`执行该编译文件要舒服得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-07-11T15:14:42.693

是的你可以！

在编辑 Java 文件时，转到*Build > Set Build Commands*。在*Java 命令*下单击第一个空标签并为其命名，例如`Compile & Execute`。然后在*命令*字段中输入您将在终端中使用的命令行来编译和执行文件，用变量替换文件和类名（请参阅[Geany 手册](http://www.geany.org/manual/current/index.html#substitutions-in-commands-and-working-directories)）。

例如，在 Linux 上可以使用`javac "%f" && java "%e"`. （使用 && 确保生成的类文件仅在编译成功时执行。）

单击 OK 并再次打开*Build*菜单以查看*Compile & Execute*命令现在在那里。就我而言，Geany 自动为其分配了快捷键`F9`。如果没有快捷键，您可以在*Preferences > Keybindings*中指定一个。

现在按下快捷键将运行您输入的命令行并在*消息窗口的**编译器*选项卡中显示其输出。或者，您可以在*Execute commands*而不是*Java commands*下创建构建命令，它将在终端窗口中运行。

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:06:47.853

您可以尝试创建一个首先编译该类然后运行它的 shell 脚本。然后设置这个 shell 脚本，而不是分别将 Geany 指向`javac`和`java`。

不利的一面是，您将不得不处理脚本中的编译失败，这听起来很难看。

我建议坚持 Geany 中现有的工作流程。

如果您正在寻找高级功能，您可能需要考虑升级到真正的 IDE，例如*Eclipse*或*Netbeans*。***

# r - R 相当于方便的 dev.copy2pdf 但对于 dev.copy2svg？

> ID：14938778
> 
> 赞同：3
> 
> 时间：2013-02-18T14:38:39.637
> 
> 标签：r, svg

我发现非常方便的 dev.copy2pdf 命令可以将我正在查看的窗口复制到 pdf 文件中，如下所示：

```
plot(rnorm(1000))
dev.copy2pdf(file="myfile.pdf") 
```

我的问题是：是否有`dev.copy2svg`相同效果的等价物，但写成 svg 格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T14:42:04.977

实际上，`dev.copy2pdf`它是对泛型`dev.copy`函数的方便包装。您可以使用它来复制到 SVG 设备，如下所示：

```
plot(rnorm(1000))
dev.copy(svg, file="myfile.svg")
dev.off() 
```

# install4j - 如何在不同的文件夹中安装相同的文件集

> ID：14938785
> 
> 赞同：0
> 
> 时间：2013-02-18T14:39:14.283
> 
> 标签：install4j

我是安装产品的新手，即 install4j

我无法将同一组文件安装在不同的文件夹中（基于它们的存在）

说以下三个文件夹

C:\company\lib C:\company\32bit\lib C:\company\64bit\lib

如果他们在场；那么我应该在那里复制一组罐子。

我尝试在安装组件下设置三个不同的“安装文件”部分。在任何时候，我都只会得到一组“安装文件”开始工作。即，如果我有 lib 和 64bit\lib.. 那么它将被复制其中一个文件夹并继续程序组...

或者有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:06:42.280

您必须在“文件->定义分发树”上配置不同的文件集。有关说明，请参阅[此帮助主题](http://resources.ej-technologies.com/install4j/help/doc/helptopics/concepts/files.html)。

# iphone - 如何在 XCode 4.6 中创建 .ipa 文件？

> ID：14938787
> 
> 赞同：0
> 
> 时间：2013-02-18T14:39:18.100
> 
> 标签：iphone, ipa, xcode4.6

我正在尝试将我的 xcode 项目放在我的（越狱）iPhone 上。我能做些什么？我试图存档产品，但它是灰色的。此外，当我插入我的 iPhone 并尝试在我的 iPhone 中使用 xcode 构建它时，它会显示“代码签名错误”。我可以在不为开发者帐户支付 100 美元的情况下做到这一点吗？我不想在应用商店中发布我的应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:47:07.827

不幸的是，在设备上运行您的应用程序需要证书，这需要开发人员帐户 AFAIK。

# .net - 依赖注入的通用接口

> ID：14938788
> 
> 赞同：3
> 
> 时间：2013-02-18T14:39:19.240
> 
> 标签：.net, dependency-injection

我正在开发一个使用 Ninject 进行依赖注入的开源库。我想为其他人提供在我的代码中使用他们自己的注入库的能力。据我所知，我没有使用任何特定于 Ninject 的东西。

是否有社区已经在使用的标准接口可以用于此目的？如果没有，以前有没有人创建过这样的界面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T14:58:43.047

这就是[Common Service Locator](http://commonservicelocator.codeplex.com/)的设计用途。[Ninject](http://nuget.org/packages/CommonServiceLocator.NinjectAdapter/)有一个CSL 适配器。

# javascript - 我想创建自己的 html 标签

> ID：14938791
> 
> 赞同：0
> 
> 时间：2013-02-18T14:39:26.150
> 
> 标签：javascript, html

我想创建自己的 html 标签。我在不止一页上使用它。

```
<myTag>
text
</myTag> 
```

可以添加属性。应该运行一个 javascript 函数。每当使用标签时，该函数都必须运行。任何想法？

例如：

```
<body>
    <myTag  id="" class="" newAttribute="value" --blah blah blah-- >text</myTag>
</body>

<script>

   function myTagFunction(){
      blah blah.....
   }

<script> 
```

我的目的不是破坏 HTML 标准。我只想学习如何创建自定义 HTML 标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:44:34.437

您想如何告诉浏览器以您定义的方式处理您的 html 标签？浏览器无法解释非标准标签。HTML 是一种标准，因此您不能以这种方式使用非标准标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T14:42:18.987

只需使用调用 JavaScript 函数的普通 HTML 按钮即可。创建自己的 HTML 元素会使您的网站不合规。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T14:53:29.890

> 我想创建自己的 html 标签

你真的没有。

HTML 是一种允许我们为文本添加含义的语言。

```
This is just some text.

<p>But this is a paragraph, because it has a <p> tag around it.</p>

<input type="submit" value="And this is a form submission button"> 
```

这使得计算机程序（包括传统的网络浏览器、视障人士的屏幕阅读器、移动电话和搜索引擎）可以与 HTML 进行有效交互，因为标签指示每个元素是什么。

这只有效，因为世界上每个人都同意这些标签的含义（通过[HTML 规范](http://www.w3.org/TR/2011/WD-html5-author-20110809/spec.html)）。

您*应该*做的是使用任何现有的 HTML 标记，该标记与您所考虑的控件最匹配。对于“后退按钮”（请注意，世界上每个 Web 浏览器都已经提供），它可能是一个`<button>`标签，也可能是一个链接 ( `<a>`)。您还可以查看[Accessible Rich Internet Applications (ARIA) 规范](http://www.w3.org/TR/wai-aria/)，看看是否有任何控件类型符合您的想法。

不过，我对您想要制作自定义 HTML 标记的解释有点困惑：

> 因为，我想在不止一页上使用它

也许您不想重复单击按钮时应该运行的 JavaScript 函数？如果是这样，您可以将该函数放入其自己的文件中，并将其包含在您要使用它的页面中：

```
<script src="/myFunction.js"></script> 
```

然后您的按钮可以像这样使用它（非常简化的示例）：

```
<button onclick="myFunction();"></button> 
```

您可以在此处阅读更多内容：[DOM 事件处理程序](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_handlers)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:45:01.877

那不可能在 html 中创建我们自己的自定义标签

最好给出类名以进行唯一标识..like

```
<span id="" class="backButton" newAttribute="value" >BACK</span> 
```

并将此类`'backButton'`用于您的操作..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T14:45:25.237

您可以在 html 标头中有自己的命名空间。但是你必须在每一页上设置它。它看起来类似于：

```
<html 
xmlns = "http://www.w3.org/1999/xhtml"
xmlns:og = "http://ogp.me/ns#"
xmlns:fb="http://ogp.me/ns/fb#"> 
```

但你不想要那个，因为它是一个非常繁重的过程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T14:55:04.203

您可以在技术上利用 XML [Element Declaration](http://www.w3.org/TR/2004/REC-xml-20040204/#sec-entity-decl)，它是 XML 核心`DTD`规范的一部分，但我不知道 HTML 5 与基本 XML 相比，与 XHTML 相比表现得更好。

```
<!DOCTYPE html[
<!ELEMENT backButton ANY >
]> 
```

仅供参考，我不知道上述方法是否有效，如果它有效，它就是如何工作的。

然而，这根本不值得，正如 Eric 所建议的那样，简单地使用一个`class`属性（可以用空格分隔以允许多个属性）会更加合规和可靠，或者，如果您仍然感到精力充沛，请使用`data-`属性，例如：

```
<div data-button_type="back">[back]</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T14:41:49.660

相反，使用带有 CSS 类的 <span> 或 <div>，然后将事件处理程序附加到它。JQuery 使这种事情变得简单：

```
$(".myCSSClass").on("click", backButton); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-18T14:43:57.017

有一种方法可以创建自己的元素，但我不确定你是否可以如此轻松地分配 JS。

首先从现有元素派生

```
<element name="backButton" extends="button"> ... </element> 
```

然后使用它

```
<backButton> ... </backButton> 
```

请参阅[此处](http://www.dartlang.org/docs/tutorials/custom-elements/)了解更多信息。

除此之外，其他人都是对的！您的网站将不符合 HTML 标准。

# python - 为什么我不断收到 NameError: name 'PS' is not defined

> ID：14938798
> 
> 赞同：1
> 
> 时间：2013-02-18T14:39:45.947
> 
> 标签：python, django, class, django-models

好的，在我的 models.py 文件中，我刚刚创建了这个：

```
class PL(models.Model):
  created = models.DateTimeField(default=timezone.now)
  owner = models.ForeignKey(User, related_name='PL')
  text = models.CharField(max_length=2000, blank=True)
  rating = models.IntegerField(default=0)
  pal = models.ManyToManyField(PS, blank=True, null=True)
  class Meta:
    verbose_name = "PL text"
  def __unicode__(self):
    return self.user

class PS(models.Model):
  Original = models.ForeignKey(PL, related_name='OPL', blank=True)
  rating = models.IntegerField(default=0)
  word = models.CharField(max_length=50, blank=True)

  def __unicode__(self):
    return "Word: %s" % (self.word) 
```

但我不断收到： NameError: name 'PS' is not defined

为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T14:44:47.473

就像 mgilson 说的那样，它从上到下。但是 Django 有办法通过这样做来克服它 -

```
pal = models.ManyToManyField('PS', blank=True, null=True) 
```

Django 文档在 ForeignKey 下对其进行了描述。

> 如果需要在尚未定义的模型上创建关系，可以使用模型的名称，而不是模型对象本身。

你可以[在这里阅读更多](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:41:58.000

在 PL 类中：

```
pal = models.ManyToManyField(PS, blank=True, null=True) 
```

你很想使用 PS，但它还没有被创建，因为 python 脚本是从上到下读取的。通常，解决方案是定义`PS`before `PL`，但这对您不起作用，因为也`PS`取决于`PL`：

```
Original = models.ForeignKey(PL, related_name='OPL', blank=True) 
```

你已经让自己陷入了一个鸡蛋的角落。你需要一只鸡，但没有鸡蛋你不能得到它——但你不能没有鸡就得到鸡蛋，但是......

最终，您需要进行一些重构，以使这两个类不相互依赖。

请注意，问题不会发生在方法中，因为在这种情况下，方法类在运行之前不会被查找——但是，由于类命名空间在类创建时被执行，所以你有一个`NameError`.

# mysql - MySQL - 带有符号“&”的数据

> ID：14938800
> 
> 赞同：-1
> 
> 时间：2013-02-18T14:39:50.143
> 
> 标签：mysql

我的 MySQL 表“类别”中有以下数据：

```
id    Name
-----------------
1     Books & CDs
2     Dress 
```

当我尝试从表中获取值时，它适用于以下 SQL。

```
SELECT * FROM `categories` WHERE `name` = 'Books & Cds'; 
```

但是在 PHP 中使用时，它给了我一些 SQL 错误。

> SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 '' 附近使用正确的语法

我在哪里可以找到这个的真正原因？如何调试这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:57:22.147

如果您想在 PHP 代码中搜索 Category 表中的行，我建议您在表中添加一列以供代码使用，而不是搜索您用于最终用户的名称。您面临的潜在问题是，如果您想更改类别的名称，您必须在代码中找到您按名称引用该类别的所有位置并更改它。但如果你的桌子看起来像这样：

```
ID   code   name
1    BCDS   Books & CDs
2    DRS    Dress 
```

那么您的代码可以执行诸如“where code = 'BCDS'”之类的操作，并且您可以将该类别称为“Books & CDs”、“CDs and Books”或您喜欢的任何其他内容。

现在，就解决语法问题而言，您必须发布用于生成失败查询的 PHP。正如另一位海报所说，您可能错误地转义了某些内容，而 MySQL 没有得到您认为正在得到的查询。

# unit-testing - 使用 lwit 的单元测试类

> ID：14938802
> 
> 赞同：1
> 
> 时间：2013-02-18T14:39:52.493
> 
> 标签：unit-testing, java-me, lwuit

我正在使用 LWUIT 作为 UI 的相当老的应用程序。

我目前正在尝试为 MIDlet 类编写单元测试，但由于有很多 LWUIT 静态方法调用，即使使用 PowerMock 也很难使其正常工作。

有没有人有什么应该被完全嘲笑、压制以最终运行这些测试的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:25:20.397

有太多可嘲笑的了。您可以构建自己的 LWUITImplementation 类，它允许您执行其中一些操作（请参阅各种平台的端口）。或者您可以将代码迁移到具有自己的单元测试框架和测试记录器的[Codename One 。](http://www.codenameone.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:07:33.783

我实际上已经将所有 LWUIT 初始化和主题相关代码提取到一个特殊的类中。我可以模拟它并至少测试所有其他应用程序功能。

依赖 LWUIT 之类的表单和控件的代码需要很多 PowerMock 技巧

# java - 外部存储到内部存储

> ID：14938805
> 
> 赞同：0
> 
> 时间：2013-02-18T14:40:05.590
> 
> 标签：java, android

我正在制作一个程序，它将 EditText 中输入的单词保存到 sd 卡中的文本文件中。但是，在我的平板电脑中安装 sd 卡有问题，所以我想将文本文件保存到内部存储中。谁能帮我把它切换到内部存储？任何评论将不胜感激。谢谢。

**这是我的代码：**

```
public void writeToSDFile() {

    File root = android.os.Environment.getExternalStorageDirectory(); 
    tv.append("\nExternal file system root: "+root);    

    File dir = new File (root.getAbsolutePath());
    dir.mkdirs();
    File file = new File(dir, "wordlist.txt");

    try {   

        FileOutputStream f = new FileOutputStream(file);           

        PrintWriter pw = new PrintWriter(f);
        pw.println(stringword);
        pw.append(stringword);        

        pw.flush();
        pw.close();
        f.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        Log.i(TAG, "******* File not found.");
    } catch (IOException e) {
        e.printStackTrace();
    }   
    tv.append("\n\nFile written to "+file);    

}//end writeToSDFile 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:43:08.243

这应该可以帮助你：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:47:19.130

由于外部存储是可移动的，因此您不应假定它一直存在。因此，在进行任何 io 操作之前，请检查存储状态。

关于您对内部存储的问题，有两种方法：1.在应用程序存储（应用程序缓存）中 - 参考：Environment.getDataDirectory() 2.在公共数据目录中 - 参考：Context.getCacheDir()。

希望这可以帮助。

# ios - 使用 hurl.it 测试通过 Parse 发送 iOS 推送通知

> ID：14938814
> 
> 赞同：0
> 
> 时间：2013-02-18T14:40:30.050
> 
> 标签：ios, json, parse-platform, push

我正在尝试向我的 iOS 测试客户端发送推送通知。我已经正确设置了应用程序并且可以接收推送通知。我要解决的问题是没有收到自定义字段：就像它被过滤掉了。

我正在使用 Corona SDK 构建我的应用程序，我相信我已经正确设置了 config.lua。我已经创建了适当的证书等，并且确实收到了通知。自定义字段没有。

我正在尝试使用 hurl.it 通过推送发送自定义数据，但无法确定要发送的正确 JSON 内容。我了解格式 - 这是我需要的内容。

谁能帮我正确配置表格？目前我正在发送到 URL： [https ://api.parse.com/1/push/](https://api.parse.com/1/push/)

POST 正文是：

```
{"data":{"badge":"Increment","custom":"gumbo","alert":"This is a test message from tester1@mailinator.com","title":"This is a test message from "},"channels":["Atester2_mailinator_com"]} 
```

“自定义”值作为“自定义”接收：[]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T17:40:57.133

问题在于“自定义”是一个字符串。这里的类型必须是表格。

# xcode - 从其他窗口显示 MainMenu.xib

> ID：14938817
> 
> 赞同：1
> 
> 时间：2013-02-18T14:40:37.033
> 
> 标签：xcode, macos, xib, viewcontroller, nsviewcontroller

我已将我的 xcode 项目中的第一个 viewController 设置为不同的视图控制器。但是我想从我的第一个视图控制器中打开 MainMenu.xib。

我不太确定如何实现这一目标。

谢谢你的帮助！

最好的，朱利安

# javascript - 我应该如何重定向到带有 ember 中的对象的路径？

> ID：14938818
> 
> 赞同：0
> 
> 时间：2013-02-18T14:40:42.023
> 
> 标签：javascript, ember.js, ember-router

我正在尝试在 Ember.js 中组合一个数据驱动的菜单系统。这是javascript `js/nodal.js`，：

```
window.Form = Ember.Application.create();

var menuOptions = [
{id: "root",
 options: [ "a", "b" ]},
{id: "a",
      name: "Option A",
 options: [ "c", "d" ]},
{id: "b",
  name: "Option B",
 options: [ "e", "f" ]},
{id: "c",
 name: "Option C"},
{id: "d",
 name: "Option D"},
{id: "e",
 name: "Option E"},
{id: "f",
 name: "Option F"}
]

Form.MenuOption = Ember.Object.extend({});

var builtOptions = menuOptions.map( function(attrs) {
return Form.MenuOption.create( attrs );
});

Form.options = {};
for( i = 0; i < builtOptions.length; i++ ) {
var opt = builtOptions[i];
Form.options[opt.id] = opt;
}

Form.MenuRoute = Ember.Route.extend({
model: function(params){
    console.log( params );
    if( !params || !params.index_id || params.index_id == "undefined") {
    params.index_id = "root";
    }
    var keys = Form.options[params.index_id].options;
    var options = new Array();
    keys.map(function(k){ options.push( Form.options[k] ); });
    return options;
  }    
});

Form.IndexRoute = Ember.Route.extend({
redirect: function(){
        /* This here is the problem line... */
    this.transitionTo( "menu", Form.options.root );
}
});

Form.Router.map(function(){
this.resource( "menu", { path: "/menu/:index_id" } );
}); 
```

这是 HTML，例如：

```
 <title>Hello</title>
  <meta name="description" content="My First Ember.js App">
  <meta name="author" content="Your Name Here">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <script data-template-name="application" type="text/x-handlebars">
<h1>Title Goes Here</h1>
{{outlet}}
  </script>

  <script data-template-name="menu" type="text/x-handlebars">
<ul>
{{#each controller}}
  <li>{{#linkTo menu this}}{{name}}{{/linkTo}}</li>
{{/each}}
</ul>
  </script>

  <script src="js/libs/jquery-1.9.1.js"></script>
  <script src="js/libs/handlebars.js"></script>
  <script src="js/libs/ember-1.0.0-rc.1.js"></script>
  <script src="js/nodal.js"></script>
</body>
</html> 
```

我想要的是用户一`/menu/root`打开页面就被重定向到。到目前为止，我还没有找到正确的咒语来完成这项工作。当我加载上述内容时，我得到了这个异常：

```
Error: assertion failed: an Ember.CollectionView's content must implement Ember.Array. You passed <(generated menu controller):ember172> 
```

如果我直接加载`index.html#/menu/root`，它可以工作 - 只有重定向不起作用。`this.transitionTo`将 IndexRoute 定义中的行替换为：

```
this.transitionTo( "menu", [Form.options.root] ); 
```

*确实*重定向，但它重定向到`/menu/undefined`，而不是`/menu/root`。这很丑陋，而且显然坏了。

我错过了什么？

**编辑**

按照建议，我尝试添加一个 ArrayController：

```
Form.MenuController = Ember.ArrayController.extend({}); 
```

这给了我一个新的错误：

```
arrangedContent.addArrayObserver is not a function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:15:05.277

错误消息基本上说视图需要数组或数组控制器作为视图的内容，但会接收生成的控制器（当没有为路由定义控制器时生成控制器）。路由的`model`方法返回数组，因此它必须用适当的控制器包装 - `ArrayController`. *您应该为扩展的菜单*路由定义一个自定义控制器`ArrayController`- 这将消除错误消息。

### 编辑

关于路由：我认为您应该将我们的每个菜单选项定义为嵌套在*菜单*资源中的路由，如下所示：

```
Form.Router.map(function(){
    this.resource( "menu", { path: "/menu/:index_id" }, function () {
        this.route('root');
        this.route('a');
        this.route('b');
        ...
    });
}); 
```

这还需要为每条路线定义*路线*类..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T17:12:40.457

问题是您的 URL 假定您正在使用一个模型，但在 transitioTo 和您的模型挂钩中，您正在传递/返回一个数组。你的 MenuRoute 总是关于**一个**MenuOption，对吧？

因此我建议：

```
Form.MenuRoute = Ember.Route.extend({
model: function(params){
    console.log( params );
    if( !params || !params.index_id || params.index_id == "undefined") {
    params.index_id = "root";
    }
    var menuOption = Form.options[params.index_id];
    return menuOption;
  }    
}); 
```

在这种情况下，您的相应模板应如下所示：

```
<script data-template-name="menu" type="text/x-handlebars">
<ul>
{{#each option in controller.content.options}}
  <li>{{#linkTo menu option}}{{option.name}}{{/linkTo}}</li>
{{/each}}
</ul>
</script> 
```

# java - SpringSecurity UserDetailsS ervice 获取密码

> ID：14938823
> 
> 赞同：14
> 
> 时间：2013-02-18T14:40:49.717
> 
> 标签：java, spring-security

我在 Spring 中创建身份验证服务。

我正在使用 UserDetailsS​​ervice 来获取表单变量，但我发现 loadUserByUsername 只有一个变量 - userName。

如何获取密码？

```
public class userAuthentication implements UserDetailsService{

    private @Autowired
    ASPWebServicesUtils aspWebServicesUtils;

    @Override
    public UserDetails loadUserByUsername(String name) throws UsernameNotFoundException {

        //how to get password ?

        User user = new User("test", "test", true, true, true, true, getAuthorities(true));

        return user;  

    }

    private List<GrantedAuthority> getAuthorities(boolean isAdmin){

        List<GrantedAuthority> authorityList = new ArrayList<GrantedAuthority>(2);
        authorityList.add(new SimpleGrantedAuthority("USER_ROLE"));
        if(isAdmin){
            authorityList.add(new SimpleGrantedAuthority("ADMIN_ROLE"));
        }
        return authorityList;

    }
//...
} 
```

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-18T14:56:18.543

如果查看[User](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/userdetails/User.html)对象，构造函数中的第二个参数是密码。

[UserDetailsS​​ervice](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html)用于从后端结构（如数据库）加载用户。当用户尝试使用用户名和密码登录时调用[loadUserByUsername方法，然后由服务负责加载用户定义并将其返回给安全框架。](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html#loadUserByUsername%28java.lang.String%29)所需的详细信息包括`username`、`password`、`accountNonExpired`、`credentialsNonExpired`和`accountNonLocked`等数据`authorities`。

一旦 spring security 接收到用户对象，它将根据用户输入的密码和其他数据（如用户帐户状态（accountNonExpired、credentialsNonExpired 等））验证用户

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-09-28T20:03:21.257

检索用户信息和提供身份验证信息的一些标准（开箱即用）机制包括：

*   **inMemoryAuthentication**
*   **jdbc身份验证**
*   **ldap身份验证**
*   **用户详情服务**

如果上述不适合您的目的并且您需要自定义解决方案，则可以创建和配置新的身份验证提供程序，如下所示：

**安全配置：**

```
@Configuration
@EnableWebMvcSecurity
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {

    @Override
    @Autowired
    public void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.authenticationProvider(new CustomAuthenticationProvider());
    }

    ....
} 
```

**身份验证提供者：**

```
public class CustomAuthenticationProvider implements AuthenticationProvider {

    @Override
    public Authentication authenticate(Authentication authentication)
            throws AuthenticationException {
        String name = authentication.getName();
        // You can get the password here
        String password = authentication.getCredentials().toString();

        // Your custom authentication logic here
        if (name.equals("admin") && password.equals("pwd")) {
            Authentication auth = new UsernamePasswordAuthenticationToken(name,
                    password);

            return auth;
        }

        return null;
    }

    @Override
    public boolean supports(Class<?> authentication) {
        return authentication.equals(UsernamePasswordAuthenticationToken.class);
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T14:50:32.433

我相信 a`UserDetailsService`应该用于`UserDetails`从一些后端存储、数据库、平面文件等获取对象。一旦你有了它`UserDetails`，spring security（或你）必须将它与用户名（或其他主体）和密码进行比较（凭据）由用户提供以验证该用户。

我认为您没有按照预期的方式使用它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-22T01:46:55.313

`UserDetailsService`通过以下方式获取密码`request.getParameter("password")`：

```
public class MyUserDetailsService implements UserDetailsService {

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();
        String password = request.getParameter("password"); // get from request parameter
        ......
    }
} 
```

`RequestContextHolder`是基于`ThreadLocal`.

如果您的项目基于 Spring Framework（不是 Spring Boot），请添加`RequestContextListener`到 web.xml

```
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-10T11:07:09.203

XML 实现：

```
<authentication-manager  alias="loginAuthenticationManager">
    <authentication-provider ref="loginAuthenticationProvider" />
</authentication-manager>

<!-- Bean implementing AuthenticationProvider of Spring Security -->
<beans:bean id="loginAuthenticationProvider" class="com.config.LoginAuthenticationProvider">
</beans:bean> 
```

身份验证提供者：

```
public class LoginAuthenticationProvider implements AuthenticationProvider {
    @Override
    public Authentication authenticate(Authentication authentication)
            throws AuthenticationException {
        String name = authentication.getName();
        // You can get the password here
        String password = authentication.getCredentials().toString();

        // Your custom authentication logic here
        if (name.equals("admin") && password.equals("pwd")) {
            List<GrantedAuthority> grantedAuths = new ArrayList<>();
            grantedAuths.add(new SimpleGrantedAuthority("ROLE_USER"));
            return new UsernamePasswordAuthenticationToken(name, password, grantedAuths);
        }
        return null;
    }
    @Override
    public boolean supports(Class<?> authentication) {
        return authentication.equals(UsernamePasswordAuthenticationToken.class);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T14:46:14.450

这`loadUserByUsername(String name)`是在您的服务实现的接口（我认为是 userServicedetails）上定义的方法。您必须编写实现。

就像你必须为 getPassword() 或类似的东西编写实现一样...... spring 不提供。我想密码存储在您的用户对象中，但您写道……您创建了一个`getPassword()`方法吗？

# c# - 为什么延续以不可预测的顺序执行？

> ID：14938826
> 
> 赞同：1
> 
> 时间：2013-02-18T14:40:58.383
> 
> 标签：c#, .net, asynchronous, task-parallel-library, task

如果我将延续链接在一起，它们似乎是以我没想到的顺序执行的。

例如：

```
for (int i = 1; i < 6; i++)
{
    HttpRequestMessage request = new HttpRequestMessage();

    Task<JsonResult<MyResult>> message = Task.Factory.StartNew<HttpResponseMessage>(() =>
        {
            Console.WriteLine(i + " started");
            return client.SendAsync(request).Result;
        })
        .ContinueWith<JsonResult<MyResult>>((r) =>
            {
                var stringresult = r.Result.Content.ReadAsStringAsync().Result;
                var deserialized = JsonConvert.DeserializeObject<JsonResult<MyResult>>(stringresult);
                Console.WriteLine(deserialized.Id + " deserialized");
                return deserialized;
            })
        .ContinueWith<JsonResult<MyResult>>(m =>
            {
                Console.WriteLine(m.Id + " completed");
                return m.Result;
            });

} 
```

现在我希望看到交错的不同请求，我确实这样做了，但我希望看到每个单独的进程按顺序执行：开始、反序列化、完成。但是，有时“完成”的继续在反序列化继续之前执行，如下所示：

> 1 开始
> 2 开始
> 3 开始
> 4 开始
> 1 反序列化，长度：69
> 1 完成
> 5 开始
> 5 反序列化，长度：831
> **2 完成**
> 4 反序列化，长度：1022
> 3 完成
> 3 反序列化，长度：356
> 4 完成
> **2 反序列化，长度：878**
> 5 完成

我在这里想念什么？

**编辑：**

是的，我知道闭包，真正的代码要长得多，当然会处理这个，但是我去掉了我认为与问题无关的废话，然后每个人都去关注丢失的废话！它不会改变我看到的问题或问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:53:50.960

因此，您最大的问题是您正在对所有异步操作（`SendAsync`和`ReadAsStringAsync`）进行同步等待。您只是在后台线程中进行这些同步等待。您的调用根本没有任何价值`ContinueWith`，因为您的所有延续都没有异步组件。您不妨将整个代码放在原始`StartWith`调用中；把它放在一个延续中不会给你带来任何好处。

这是您的程序示例，但没有异步操作的同步等待：

```
for (int i = 1; i < 6; i++)
{
    HttpRequestMessage request = new HttpRequestMessage();

    int id = i;
    Console.WriteLine("{0} started", id);
    var result = client.SendAsync(request)
        .ContinueWith(t =>
        {
            Console.WriteLine("{0} reading", id);
            return t.Result.Content.ReadAsStringAsync();
        })
        .Unwrap()
        .ContinueWith(t =>
        {
            Console.WriteLine("{0} read", id);
            var deserialized = JsonConvert.DeserializeObject<JsonResult<MyResult>>(t.Result);
            Console.WriteLine("{0} deserialized", id);
            return deserialized;
        });
} 
```

另请注意，您向我们展示的代码中的一个问题是您在登录控制台时并未始终使用相同的标识号。我一直使用循环变量，以保持清晰。我还确保获取循环变量的副本，这样我就不会关闭循环变量。我还记录了稍微不同的东西，这些东西应该会产生更有趣的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:28:31.217

正如@Henrik 所说，当线程运行时，值`i`将会改变。这将使确定线程实际运行的顺序看起来不正确。

尝试将`i`in 传递给函数：

```
 Task<JsonResult<MyResult>> message = Task.Factory.StartNew<HttpRequestMessage>(state =>  {

            Console.WriteLine(state.ToString() + " started");
            return client.SendAsync(request).Result;
        }, i )
            .ContinueWith<JsonResult<MyResult>>((r) =>
            {
                var stringresult = r.Result.Content.ReadAsStringAsync().Result;
                var deserialized = JsonConvert.DeserializeObject<JsonResult<MyResult>>(stringresult);
                Console.WriteLine(deserialized.Id + " deserialized");
                return deserialized;
            })
            .ContinueWith<JsonResult<MyResult>>(m =>
            {
                Console.WriteLine(m.Id + " completed");
                return m.Result;
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:32:56.650

您没有在打印输出中比较相同的 id:s。尝试将最后一个延续更改为

```
 .ContinueWith<JsonResult<MyResult>>(m =>
        {
            Console.WriteLine(m.Result.Id + " completed");
            return m.Result;
        }); 
```

所以你至少在延续中比较相同的 id。

# javascript - JSON基本错误

> ID：14938827
> 
> 赞同：0
> 
> 时间：2013-02-18T14:41:01.627
> 
> 标签：javascript, json, web

我正在做一个网络开发课程，我正在做一个练习，它包含了我迄今为止基于我的工作的文件，但我刚刚注意到我必须使用一个 json 文件，我已经完成了基本的 HTML、CSS , JavaScript 和 JQuery 在过去的几周里，并将所有这些文件很好地集成到了我的网页中，但是有了这个 json，我不太确定该怎么做，与其他资源相比，网络上关于 json 的资源远没有那么多，所以我希望这里有人可以帮助我，我尝试将其包含在我的网页中

```
<script type='text/javascript' src='hall.json'></script> 
```

我的主要问题是我无法让它在 Dreamweaver 中工作，我在第 2 行遇到语法错误

![一只忙碌的猫](../Images/6fdd9ca73d57a3642d5efec2d4292469.png)

下面是 JSON 代码

```
{
"who": "RSNO",
"what": "An American Festival",
"when": "2013-02-08 19:30",
"where": "User Hall - Main Auditorium",
"seats": [
    "00000000000000000011111111111111000000000000000000",
    "0000000000000001111111111111111aaa0000000000000000",
    "00000000000000aa111111111111111aaaaa00000000000000",
    "00000000000001111111111111111111111111000000000000",
    "000000000aa00aaaaaaaaaaaaaaaaaaaaaa1100aa000000000",
    "00000001111001111111111111111111111100111100000000",
    "00000aaaaaa0011aaaaaaaaa11111111aaa1100aaaaaa00000",
    "00001111111001111111111111111111111100111111100000",
    "000aaaaaaa110011111111111111111111110011aaaaaaa000",
    "00111111111100111111111111111111111001111111111000",
    "00aaaaa1111110011111111111111111111001111aaaaaaa00",
    "11111111111100111111111111111111111001111111111110",
    "0aaaaaaaaaaaa001111111111111111111100aaaaaaaaaaaa0",
    "01111111111110011111111111111111110011111111111100",
    "00000000000000001111111111111111110000000000000000",
    "01111111111111001111111111111111100111111111111100",
    "01111111111111001111111111111111110011111111111110",
    "01111111111111001111111111111111100111111111111100",
    "00a11111111111100111111111111111100111111111111a00",
    "00111111111111100111111111111111001111111111111000",
    "00011111111111110011111111111111001111111111111000",
    "00111111111111100111111111111111001111111111111000",
    "00011111111111110011111111111111001111111111111000",
    "00011111111111110011111111111110011111111111110000",
    "0000000111a111111001111a1111a110011111111110000000",
    "00000000111111110011111111111110011111111000000000",
    "00000000001111111001111111111110011111110000000000",
    "00000000000000111001111111111100111000000000000000"
],
"rows": [
    "DD",
    "CC",
    "BB",
    "AA",
    "Z",
    "Y",
    "X",
    "W",
    "V",
    "U",
    "T",
    "S",
    "R",
    "Q",
    "P",
    "N",
    "M",
    "L",
    "K",
    "J",
    "H",
    "G",
    "F",
    "E",
    "D",
    "C",
    "B",
    "A"
],
"seatPrice": [
    "                  00000000000000                  ",
    "               0000000000000000000                ",
    "              0000000000000000000000              ",
    "             0000000000000000000000000            ",
    "         00  000000000000000000000000  00         ",
    "       0000  00000000000000000000000  0000        ",
    "     000000  000000000000000000000000  000000     ",
    "    0000000  00000000000000000000000  0000000     ",
    "   000000000  0000000000000000000000  000000000   ",
    "  0000000000  000000000000000000000  0000000000   ",
    "  00000000000  00000000000000000000  00000000000  ",
    "000000000000  000000000000000000000  000000000000 ",
    " 000000000000  00000000000000000000  000000000000 ",
    " 000000000000  0000000000000000000  000000000000  ",
    "                000000000000000000                ",
    " 0000000000000  00000000000000000  0000000000000  ",
    " 0000000000000  000000000000000000  0000000000000 ",
    " 0000000000000  00000000000000000  0000000000000  ",
    "  0000000000000  0000000000000000  0000000000000  ",
    "  0000000000000  000000000000000  0000000000000   ",
    "   0000000000000  00000000000000  0000000000000   ",
    "  0000000000000  000000000000000  0000000000000   ",
    "   0000000000000  00000000000000  0000000000000   ",
    "   0000000000000  0011111111100  0000000000000    ",
    "       0000000000  111111111111  0000000000       ",
    "        00000000  1111111111111  00000000         ",
    "          0000000  111111111111  0000000          ",
    "              000  00000000000  000               "
],
"priceLookup": [
    10,
    20
] 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:53:54.883

您没有在页面上正确包含 JSON。JSON 不像 javascript 那样被解释或编译的语言，它只是一种像 XML 或 CSV 这样的数据表示语言。要在您的页面中使用它，您将对其发出 ajax 请求，然后在`success`回调中使用它：

```
$.getJSON('hall.json', function (data) {
    var who = data.who; // "RSNO"
    var where = data.where; // "User Hall - Main Auditorium"
    // etc...
}); 
```

请注意，它为您`$.getJSON`执行隐式操作`JSON.parse`，因此`data`已经是 javascript 对象，而不是字符串。

有关更多信息，请参阅[$.getJSON 的文档。](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:56:19.057

您发布的 JSON 是有效的。

您会收到语法错误，因为您试图将其解释为 JavaScript。

您可以编写一个脚本来读取 JSON 文件并将内容解析为 JavaScript 对象。

一个非常基本的*例子*是这样的：

```
httpReq = new XMLHttpRequest();
httpReq.open('GET','hall.json',false);
httpReq.send();

hall = JSON.parse(httpReq.responseText); 
```

然后您可以使用 JavaScript 对象表示法访问内容：

```
who = hall.who; // 'RSNO'

seatsCount = hall.seats.length; // 28 
```

并操纵 DOM 以动态构建或编辑网页以显示数据（但这超出了问题的范围......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T17:33:02.260

旧版 Dreamweavers 在以下情况下会出错：

```
{
"something":"content",
    "otherthing":"more content"
    } 
```

所以你必须使用类似数组的东西：

```
[{"something":"content","otherthing":"more content"}] 
```

但持续版本修复它。我现在使用的是 Dreamweaver CC 2015，并且已经放置了你所有的代码。它现在没有错误！

# bash - 使用 find 递归地从 bash 脚本中获取文件名

> ID：14938830
> 
> 赞同：1
> 
> 时间：2013-02-18T14:41:21.740
> 
> 标签：bash, directory-traversal

我正在尝试以递归方式从 find 命令中检索文件名。此命令打印具有完整路径的所有文件名

```
> for f in $(find -name '*.png'); do echo "$f";done          
> ./x.png
> ./bg.png
> ./s/bg.png 
```

但是当我尝试使用这些命令获取文件名时，它会打印

```
for f in $(find -name '*.png'); do echo "${f##*/}";done                                                                                                       
bg.png 
```

和

```
for f in $(find -name '*.png'); do echo $(basename $f);done   
bg.png 
```

它省略了其他 2 个文件。我是 shell 脚本的新手。我无法弄清楚这个有什么问题。

**编辑：**

这是我真正想要的。

1.  我想递归地遍历一个目录并找到所有的 png 图像
2.  将其发送到 pngnq 进行 RGBA 压缩
3.  它输出新文件`orgfilename-nq8.png`
4.  将其发送到 pngcrush 并重命名并生成一个新文件（org 文件将被覆盖）
5.  删除新文件

我有一个适用于单个目录的代码

```
for f in *.png; do pngnq -f -n 256 "$f" && pngcrush "${f%.*}"-nq8.png "$f";rm "${f%.*}"-nq8.png; done 
```

我想递归地做这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:43:03.900

只需这样做：

```
find -name '*.png' -printf '%f\n' 
```

如果你想为每个文件运行一些东西：

```
find -name '*.png' -printf '%f\n' |
while read file; do
    # do something with "$file"
done 
```

或与`xargs`：

```
find -name '*.png' -printf '%f\n' | xargs -n1 command 
```

确保你不能`find`像这样直接使用：

```
find -name '*.png' -exec command {} + 
```

或者

```
find -name '*.png' -exec bash -c 'do_something with ${1##*/}' -- {} \; 
```

搜索[http://unixhelp.ed.ac.uk/CGI/man-cgi?find](http://unixhelp.ed.ac.uk/CGI/man-cgi?find)或`-printf`_

```
man find | less +/^' *-printf' 
```

# xna - 绘制 2D HUD 会破坏 3D 模型的渲染？

> ID：14938832
> 
> 赞同：1
> 
> 时间：2013-02-18T14:41:22.597
> 
> 标签：xna

我正在使用 XNA 3.1

`Components.Add(myComponent)`我最近使用我的游戏创建了一个 2D 平视显示器 (HUD) 。HUD 看起来不错，显示 2D 地图、十字准线和帧率计数器。问题是，每当 HUD 在屏幕上时，游戏中的 3D 对象就不再正确绘制。

离我的玩家更远的东西可能会在更近的东西之后被吸引，当我走过模型时，模型有时会失去定义。当我移除 HUD 时，一切都正常绘制。

他们是否有任何我应该注意的已知问题？我应该如何在我的 3D 游戏区域上绘制 2D HUD？

这是没有 a 的样子`GameComponent`：

![两个 3D 对象，较远的对象正确渲染在较近的对象后面](../Images/f36c3dd9d43bcde2b9aac7709aee0d7b.png)

下面是它的外观`GameComponent`（在这种情况下，它只是左上角屏幕外显示帧率的一些文本），注意后面的树是如何出现在靠近相机的树前面的：

![两个 3D 对象，较远的对象在较近的对象之上渲染](../Images/b5dcfad43a3959f06613aed803597a7d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:14:09.893

您必须启用深度缓冲区：

```
// XNA 3.1
GraphicsDevice.RenderState.DepthBufferEnable = true;
GraphicsDevice.RenderState.DepthBufferWriteEnable = true;

// XNA 4.0
GraphicsDevice.DepthStencilState = DepthStencilState.Default; 
```

`SpriteBatch.Begin`改变图形管线的状态：

*   [XNA 3.1 的 SpriteBatch 渲染状态](http://blogs.msdn.com/b/shawnhar/archive/2006/11/13/spritebatch-and-renderstates.aspx)
*   [XNA 4.0 的 SpriteBatch 渲染状态](http://blogs.msdn.com/b/shawnhar/archive/2010/06/18/spritebatch-and-renderstates-in-xna-game-studio-4-0.aspx)

在这两个版本中，深度缓冲都被禁用，这就是导致问题的原因。

同样，我不能强调这一点：

**在绘制任何几何体之前，请始终确保正确设置所有渲染状态。**

*   混合状态
*   深度模板状态
*   光栅化状态
*   视口
*   渲染目标
*   着色器
*   采样器状态
*   纹理
*   常数

了解渲染管道[中每个状态](http://blogs.msdn.com/b/shawnhar/archive/2010/04/02/state-objects-in-xna-game-studio-4-0.aspx)和每个阶段的目的。如果有疑问，请尝试将所有内容重置为默认值。

# iphone - 如何在iphone的缩略图中显示数组图像

> ID：14938836
> 
> 赞同：-2
> 
> 时间：2013-02-18T14:41:38.477
> 
> 标签：iphone, objective-c

我是电话编程的新手。

谁能告诉我如何像照片库一样在 4by4 缩略图中显示文档目录文件夹图像？所有图像都存储在一个数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:09:24.223

尝试这个，

-> 你必须添加滚动视图，然后连接 IBOutlet

```
- (void)viewDidLoad
{
    [super viewDidLoad];

int nLastYPos = 0;

 for (int i=0; i<[arrImages count]; i++)
    {
        UIView *Viewthumbnail = [[UIView alloc] init];
        Viewthumbnail.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:[NSString StringByAppendingFormat:@"%@",[arrImages objectAtIndex:i]]]];
        Viewthumbnail.frame = CGRectMake(4+(i%4)*44,5+(i/4)*44, 42, 42);
        [scroll addSubview: Viewthumbnail];
        nLastYPos = btnthumbnail.frame.origin.y+44;
        [Viewthumbnail release];
    }
    if(nLastYPos>280)
        scroll.contentSize = CGSizeMake(scroll.frame.size.width,nLastYPos);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:51:43.003

您可以通过创建具有您需要的宽度和高度的子视图然后将其添加到超级视图“scrollView”来实现

```
-(void) createGridView:(NSMutilbeArray *)array{
for(int i=0;i<array.count;i++)
{
  UIView *temp=[[UIView alloc] initWithFrame:CGRectMake(x,y,wi,hi)];//UIImageView
  [scrollView addSubView:temp];
}
} 
```

你可以给每个视图标签来处理触摸动作`sender.tag`

# c# - 使用 Linq 时 SQLite.Net 有多聪明？

> ID：14938845
> 
> 赞同：1
> 
> 时间：2013-02-18T14:42:09.933
> 
> 标签：c#, sqlite

当使用 SQLite.Net 时，Linq 查询会变成有希望的高性能 SQL 查询。但是，是否有可能某种查询过于复杂并导致完整且缓慢的表扫描？就像，假设我想从一个有 50k 行的表中获取一个项目 - 我不希望它循环所有行并将值与我在 .Net 代码中请求的值进行比较；它应该生成一个适当的“where”子句。我知道人们可以看到 SQLite.Net 生成的查询，但由于它们是动态的，因此不能保证愚蠢的子句组合可能会导致性能下降。还是我想得太远了，这不可能发生？

# jquery - 通过在标题 col >> jQuery 解决方案上添加一个类来隐藏我的表格的整个列

> ID：14938850
> 
> 赞同：1
> 
> 时间：2013-02-18T14:42:21.577
> 
> 标签：jquery, html, css

我有一个表，我想通过简单地将名为“masked”的类应用于标题 col 来隐藏整个列（第 3 列 >> head+body），如下所示：

```
<table>
 <thead>
    <th>aaa</th>
    <th class="masked">bbb</th>
    <th class="masked">ccc</th>
 </thead>
 <tbody>
    <tr>
        <td>a1</td>
        <td>b1</td>
        <td>c1</td>
    </tr>
    <tr>
        <td>a2</td>
        <td>b2</td>
        <td>c2</td>
    </tr>
    <tr>
        <td>a3</td>
        <td>b3</td>
        <td>c3</td>
    </tr>
 </tbody> 
```

的CSS：

```
.masked {
    display:none;
} 
```

此时，只有标题 col 被屏蔽。我怎样才能屏蔽整列？

在此处查看演示：http: [//jsbin.com/axukob/1/](http://jsbin.com/axukob/1/)

谢谢。

编辑 - - - - - - - - - - -

我可以使用 jQuery 解决方案，因为仅使用 CSS 似乎很困难。但对我来说，将课程添加到标题“th”是很重要的。

请注意，我可能有超过 1 列要屏蔽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:48:25.853

将类移动到表中并添加此样式（此处重命名为*mask-col-3*）：

```
<style type="text/css">
table.mask-col-3 th + th + th,
table.mask-col-3 td + td + td {
  display: none;
}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:17:31.873

通过在 CSS 中添加以下代码将隐藏表格中的第三列...试试看...

```
 td:nth-child(3){ display : none;} 
```

小提琴：http: [//jsfiddle.net/RYh7U/89/](http://jsfiddle.net/RYh7U/89/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:52:02.907

由于您愿意使用 JS（您将不得不使用），您可以这样做：

示例：http: [//jsfiddle.net/mBhB3/1/](http://jsfiddle.net/mBhB3/1/)

```
$(document).ready(function() {
    var masked = $('.masked');
    $.each(masked, function() {
        var idx = $(this).index();
        $.each($('tr'), function() {
            $(this).find('td').eq(idx).hide();
        });
    });
}); 
```

# android - 无法获取 TYPE_SYSTEM_OVERLAY 的触摸事件

> ID：14938853
> 
> 赞同：10
> 
> 时间：2013-02-18T14:42:27.957
> 
> 标签：android, background, overlay, android-gesture

我喜欢开发一个类似于[Swapps](https://play.google.com/store/apps/details?id=com.schiztech.swapps)的应用程序。我试图在任何屏幕上显示一个按钮，并且应该只在滑动操作时发生。我尝试使用下面的代码

```
 WindowManager.LayoutParams params = new WindowManager.LayoutParams();
    params.type =WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY;
    params.flags = WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN;
    params.format =PixelFormat.TRANSLUCENT; 
    params.height = WindowManager.LayoutParams.WRAP_CONTENT;
    params.width = WindowManager.LayoutParams.WRAP_CONTENT;
    parentlay = new LinearLayout(this);
    mybt = new Button(getApplicationContext());
    bt.setText("Click to Go");

    parentlay.setBackgroundColor(Color.TRANSPARENT);
    parentlay.setHapticFeedbackEnabled(true);
    parentlay.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
                // event.getAction() prints 4 and not able to get up or down event
           }
       });
   windowmanager.addView(parentlay, params); 
```

当用户通过捕获该事件并执行从左到右滑动时，我试图显示按钮

```
 parentlay.addView(bt); 
```

并在用户从右向左滑动时删除视图

```
 parentlay.removeView(bt); 
```

如前所述，除非我将类型更改为 TYPE_SYSTEM_ALERT ，否则我无法获得运动事件，但这反过来会冻结所有屏幕并且无法单击返回或主页按钮，是否有任何替代方法可以做到这一点。

我刚刚尝试了以下修改

```
 params.type =WindowManager.LayoutParams.TYPE_SYSTEM_ALERT;
    params.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
    |WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH
   |WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN;

    params.height = WindowManager.LayoutParams.MATCH_PARENT;
    params.width = WindowManager.LayoutParams.MATCH_PARENT; 
```

但是我无法单击下面的按钮，可能是由于 MATCH_PARTENT 但如果我将其设置为 wrap_content 那么我无法获得点击事件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T19:50:32.917

要隐藏视图，您需要调用 mWindowManager.removeView(mOverlay);

```
private RelativeLayout mOverlay;
        private WindowManager mWindowManager;   
     WindowManager.LayoutParams params = new WindowManager.LayoutParams(
                        WindowManager.LayoutParams.WRAP_CONTENT,
                        WindowManager.LayoutParams.WRAP_CONTENT,
                        WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
                        WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
                                | WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
                        PixelFormat.TRANSLUCENT);
                params.gravity = Gravity.TOP;
                LayoutInflater inflater = (LayoutInflater) context
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                mOverlay = (RelativeLayout) inflater
                        .inflate(R.layout.phasechange, null);

                mWindowManager = (WindowManager) context
                        .getSystemService(Context.WINDOW_SERVICE);
                mWindowManager.addView(mOverlay, params);
                Button b = (Button) mOverlay.findViewById(R.id.button1);
                b.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        mWindowManager.removeView(mOverlay);
                    }
                });

            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-19T12:57:44.070

使用 window type和 flag`TYPE_PHONE`来代替。`TYPE_SYSTEM_OVERLAY``FLAG_NOT_FOCUSABLE`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:26:24.773

你完成这项任务的方法非常不同寻常。只需添加一个新视图就可以很好地处理任务。

添加此代码：

```
RelativeLayout layout = new RelativeLayout(this);
Button b = new Button(this);
b.setBackgroundColor(Color.LTGRAY);
b.setText("Click to Go");
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.CENTER_IN_PARENT);
b.setLayoutParams(params);
layout.addView(b);

//get a reference to your main layout:
ViewGroup myLayout = findViewById(R.id.whateverMayLayoutIdIs);
layout.addView(layout); 
```

要隐藏视图，您可以将其从布局中移除，或更改其可见性。

您正在使用的方法非常棘手，并且其他人在处理触摸方面遇到了问题。示例包括[Android : Multi touch 和 TYPE_SYSTEM_OVERLAY](https://stackoverflow.com/questions/8073803/android-multi-touch-and-type-system-overlay)以及[TYPE_SYSTEM_OVERLAY 中的 GestureDetector](https://stackoverflow.com/questions/9717763/gesturedetector-within-a-type-system-overlay)。试试[这个谷歌搜索](http://www.google.com/search?client=safari&rls=en&q=android%20type_system%20overlay%20touch%20events&ie=UTF-8&oe=UTF-8)更多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T07:11:39.570

从准则中获取观点总是很忙，而且有点难以管理。因此，或者您可以在布局中添加按钮，并根据您的滑动使其可见和不可见。

并使用下面的代码来获取手势

```
public class MyGestureDetector implements OnGestureListener {
        @Override
        public boolean onDown(MotionEvent arg0) {
            return false;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float arg3) {
            return setCurrentSwipeTab(e1, e2, velocityX, arg3);
        }

        @Override
        public void onLongPress(MotionEvent arg0) {
        }

        @Override
        public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2,
                float arg3) {
            return false;
        }

        @Override
        public void onShowPress(MotionEvent e) {
        }

        @Override
        public boolean onSingleTapUp(MotionEvent e) {
            return false;
        }
    }

public boolean setCurrentSwipeTab(MotionEvent e1, MotionEvent e2,
            float velocityX, float arg3) {
        try {
            if (Math.abs(e1.getY() - e2.getY()) > Util.SWIPE_MAX_OFF_PATH)
                return false;
            // Left to right swipe of the user detected
            if (e1.getX() - e2.getX() > Util.SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > Util.SWIPE_THRESHOLD_VELOCITY) {

                }
                    // Nothing to do since you are at the Last tab!! it's task
                    // of the left swipe now
                }
            } else if (e2.getX() - e1.getX() > Util.SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > Util.SWIPE_THRESHOLD_VELOCITY) {

        } catch (Exception e) {
            e.printStackTrace();
        }
        return false;
    } 
```

# c# - 理解我的负载测试

> ID：14938854
> 
> 赞同：0
> 
> 时间：2013-02-18T14:42:28.930
> 
> 标签：c#, asp.net, visual-studio, testing, performance-testing

我正在尝试测试我公开的一些 Web 服务。我创建了一些模拟用户活动的网络性能测试。我已经将它们放入负载测试中，采用步进负载模式，旨在加载用户以发现会使响应时间超过 10 秒的并发用户数 x。

我试过这样做，但结果......出乎意料。超过 1,000 个`500-InternalServerErrors`。然而，奇怪的是，我的平均响应时间基本保持不变——处于极低的值（该图中的蓝线），而用户数量增加到最多 200 人，尽管该图表明（红线）和每秒请求数也增加（绿色）。当然这是不正确的，因为页面响应时间应该随着这些而增加。

![图形](../Images/bfdd6e27eb03911b9469026c00aea36c.png)

谁能提供任何关于这里可能发生的事情以及我如何解决它的见解？

我正在使用的数据集是一个很小的测试数据集，所以我唯一的理论是可能所有请求都被缓存，这解释了快速响应时间，但服务器仍然被淹没，因此出现错误。

抱歉缺乏细节 - 我是性能测试的新手。任何问题都会立即得到解答。非常感谢 ：）

# android - 在 Android SDK 模拟器设备上初始化 FBO 失败

> ID：14938857
> 
> 赞同：3
> 
> 时间：2013-02-18T14:42:48.207
> 
> 标签：android, android-emulator, android-ndk, opengl-es-2.0

所以这就是 FBO 的初始化方式：

```
/**
 * Initializes Renderbuffer.
 */
static GLuint init_renderbuffer(GLuint width, GLuint height, GLenum format) {
    GLuint renderbuffer;

    glGenRenderbuffers(1, &renderbuffer);
    checkGlError("init_renderbuffer: glGenRenderbuffers");

    glBindRenderbuffer(GL_RENDERBUFFER, renderbuffer);
    checkGlError("init_renderbuffer: glBindRenderbuffer");

    glRenderbufferStorage(GL_RENDERBUFFER, format, width, height);
    checkGlError("init_renderbuffer: glRenderbufferStorage");

    glBindRenderbuffer(GL_RENDERBUFFER, 0);
    checkGlError("init_renderbuffer: glBindRenderbuffer");

    return renderbuffer;
}

/**
 * Initializes FBO.
 */
static void engine_init_fbo(struct engine* engine, GLuint width, GLuint height) {
    // create renderable texture
    glGenTextures(1, &engine->renderableTexture);
    checkGlError("engine_init_fbo: glGenTextures");

    glBindTexture(GL_TEXTURE_2D, engine->renderableTexture);
    checkGlError("engine_init_fbo: glBindTexture");

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_SHORT_5_6_5, 0);
    checkGlError("engine_init_fbo: glTexImage2D");

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    checkGlError("engine_init_fbo: glTexParameteri");

    // create render buffers
    engine->depthRenderBuffer   = init_renderbuffer(width, height, GL_DEPTH_COMPONENT16);
    engine->stencilRenderBuffer = init_renderbuffer(width, height, GL_STENCIL_INDEX8);

    LOGI("****************************** FBO: T: %d, D: %d, S: %d", engine->renderableTexture,
         engine->depthRenderBuffer, engine->stencilRenderBuffer);

    // create framebuffer object
    glGenFramebuffers(1, &engine->framebufferObject);
    checkGlError("engine_init_fbo: glGenFramebuffers");

    glBindFramebuffer(GL_FRAMEBUFFER, engine->framebufferObject);
    checkGlError("engine_init_fbo: glBindFramebuffer");

    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, engine->renderableTexture, 0);
    checkGlError("engine_init_fbo: glFramebufferTexture2D");

    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, engine->depthRenderBuffer);
    checkGlError("engine_init_fbo: glFramebufferRenderbuffer");

    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_STENCIL_ATTACHMENT, GL_RENDERBUFFER, engine->stencilRenderBuffer);
    checkGlError("engine_init_fbo: glFramebufferRenderbuffer");

    GLenum status = glCheckFramebufferStatus(GL_FRAMEBUFFER);
    checkGlError("engine_init_fbo: glCheckFramebufferStatus");

    if(status != GL_FRAMEBUFFER_COMPLETE) {
        switch(status) {
            case GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT:
                LOGI("****************************** engine_init_fbo: FBO error: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");
                break;

            case GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:
                LOGI("****************************** engine_init_fbo: FBO error: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");
                break;

            case GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS:
                LOGI("****************************** engine_init_fbo: FBO error: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");
                break;

            case GL_FRAMEBUFFER_UNSUPPORTED:
                LOGI("****************************** engine_init_fbo: FBO error: FRAMEBUFFER_UNSUPPORTED");
                break;

            default:
                LOGI("****************************** engine_init_fbo: Unknown FBO error");
        }
    }
    else {
        LOGI("****************************** engine_init_fbo: FBO has been successfully initialized");
    }

    glBindTexture(GL_TEXTURE_2D, 0);
    checkGlError("engine_init_fbo: glBindTexture");

    glBindFramebuffer(GL_FRAMEBUFFER, 0);
    checkGlError("engine_init_fbo: glBindFramebuffer");
} 
```

可以看到，这里的一切都是按照 OpenGL ES 标准来完成的：使用 RGB565 内部格式的 2D 纹理作为颜色；2 个渲染缓冲区用作深度和模板表面；尺寸为 32x32。

它在真实设备上运行良好（Alcatel OT 918D，在 adb logcat 中打印“FBO 已成功初始化”），但在虚拟设备上因 FRAMEBUFFER_UNSUPPORTED 而失败。

我的虚拟设备的 CPU 是 atom，启用了 GPU 仿真，OpenGL ES 2.0 工作正常 - 与其他应用程序（不使用 FBO）检查。

可以使用 ndk-build 编译的整个项目（基于 NDK 的本机活动示例）在这里： [https ://docs.google.com/file/d/0Byy41LxMuTKUZVJxSUtBZDVDXzA/edit?usp=sharing](https://docs.google.com/file/d/0Byy41LxMuTKUZVJxSUtBZDVDXzA/edit?usp=sharing)

我的问题是：这是 android-sdk 模拟器中的错误吗？因为一切似乎都满足 OpenGL ES 2.0 实现的最低要求。

谢谢！

编辑：找到解决方案。看来，AVD 不支持附加对象的这种配置。我必须移除模板附件才能使其正常工作。

EDIT2：这似乎是上下文创建问题。我不需要模板位，所以可能 AVD 在没有模板支持的情况下创建了上下文，而阿尔卡特手机 - 使用了模板。

无论如何，这不是错误，而是我的错误。

# javascript - PrimeFaces p:blockUI 动态阻止某个组件（在 JSF EL 条件下）？

> ID：14938862
> 
> 赞同：5
> 
> 时间：2013-02-18T14:42:55.203
> 
> 标签：javascript, ajax, jsf, primefaces, el

您如何使 PrimeFaces p:blockUI 动态阻止某个组件，即在 EL 条件下？

用例：

手头的情况基本上是用户可以在页面上的一种模式：如果有任何超出的冲突并且它们当前根据用户的请求显示，则阻止导航树（显示超出的冲突模式，导航树被阻止），否则我们在常规视图中，导航树应该是畅通的（显示常规碰撞模式，导航树畅通）。

当前的问题是，当处于“超出模式”时，当状态更改对话框将状态更改为未超出时，页面会正确呈现/更新自身回到常规模式，**但导航树上的阴影仍然存在**。由于我们现在处于常规模式，如果不再有超出的碰撞，我需要一些方法来解除阻塞。

明白了吗？:-)

好的，这里首先是 bean 属性：

```
/*
 * The logic of this method ensures that after status update the
 * mode is automatically put back into regular view if no followup
 * date exceeded collisions exist.
 */
public boolean isFollowupExceededCollisionsShown()
{
    return getFollowupExceededCount() > 0 ? this.followupExceededCollisionsShown : false;
} 
```

**第一次尝试：**

查看 VDL 文档[http://www.primefaces.org/docs/vdl/3.4/primefaces-p/blockUI.html](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/blockUI.html)揭示了一些被阻止的属性。

```
 <p:blockUI widgetVar="explorerBlocker"
               block=":explorer-form"
               blocked="#{collisionManager.followupExceededCollisionsShown}" /> 
```

然而，上面的内容完全没有任何作用。

**第二次尝试：**

查看展示[http://www.primefaces.org/showcase/ui/blockUI.jsf](http://www.primefaces.org/showcase/ui/blockUI.jsf)，客户端 API 似乎更合适。

这个想法是在状态更改对话框上按 OK 时根据 ValueExpression 调用 show() 或 hide() ：

```
 <p:dialog id="state-change-dialog"
              widgetVar="stateChangeDialog"
              modal="true"
              appendToBody="true">

        <h:form>

            <ui:include src="/view/collisionmgmt/collisionStatusChangeGrid.xhtml" />

            <h:panelGroup layout="block" styleClass="center-button-panel">
                <p:commandButton id="save-button"
                                 icon="ui-icon ui-icon-disk"
                                 value="OK"
                                 action="#{collisionManager.performStatusChange}"
                                 process="@form"
                                 update=":explorer-form:tree :collision-form:period-grid :collision-form:list :collision-form:growl"
                                 oncomplete="stateChangeDialog.hide();" />
                <p:commandButton icon="ui-icon ui-icon-close"
                                 value="Cancel"
                                 update=":collision-form:list"
                                 onclick="stateChangeDialog.hide();"
                                 immediate="true" />
            </h:panelGroup>
        </h:form>

    </p:dialog> 
```

`explorerBlocker.show();`这个想法是通过调用或`explorerBlocker.hide();`依赖于 EL 的新值来以某种方式扩展 OK 按钮的 oncomplete="" `#{collisionManager.followupExceededCollisionsShown}`。

我尝试了两种基本变体：

```
oncomplete="stateChangeDialog.hide(); #{collisionManager.followupExceededCollisionsShown ? 'explorerBlocker.show();' : 'explorerBlocker.hide();' }"

oncomplete="stateChangeDialog.hide(); if ( #{collisionManager.followupExceededCollisionsShown} ){ explorerBlocker.show(); } else { explorerBlocker.hide(); }" 
```

状态更改对话框一直关闭，但上面的逻辑没有启动。

我一定在这里犯了一些本质上的错误。我怀疑 OK 按钮的 oncomplete EL 表达式在被单击时没有得到重新评估。将 @this 添加到更新列表不会改变任何内容。

```
 update="@this :explorer-form:tree :collision-form:period-grid :collision-form:list :collision-form:growl" 
```

1.  如何最好地解决我的问题，其中“最佳”首先是 JSF，然后是 PrimeFaces 特定的（理想情况下，这是记录在哪里！）。

2.  是否可以在 EL 中使用 blockUI blocked="#{?}" 属性？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T11:48:11.813

一种方法是从 Managed Bean 调用 BlockUI 的 hide() 和 show() 方法。
您可以通过使用 RequestContext 来做到这一点：

> RequestContext.getCurrentInstance().execute("widgetVar.show()");

另一个是您可以将变量传递给 JavaScript 函数，然后让 Javascript 函数为您处理。

```
onClick="func(#{elvariable})"

<script type="text/javascript">
 function func(value)
 {
 if(value==something){
 widgetVar.show();
 }else{
 widgetVar.hide();
 }
 }
</script> 
```

# python - 通过rpy2从ggplot2中的geom_histogram中删除基线？

> ID：14938865
> 
> 赞同：3
> 
> 时间：2013-02-18T14:42:58.787
> 
> 标签：python, r, ggplot2, rpy2

我正在通过 rpy2 用 ggplot2 绘制直方图，如下所示：

```
p = ggplot2.ggplot(df) + \
    ggplot2.aes_string(x="x", colour="sample") + \
    ggplot2.facet_grid(Formula("sample ~ .")) + \
    ggplot2.geom_histogram(binwidth=0.3, fill="white") 
```

它工作得很好，除了在直方图底部添加一个“基线”栏`geom_histogram`，`geom_density`我想删除它。这条线怎么去掉？这是我指的是用箭头注释的线的图片。谢谢。 ![在此处输入图像描述](../Images/4cfc0d2fd37246f043d025351fc1bf20.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:14:25.307

那是从酒吧的边缘传来的。

只需删除`colour = "sample"`.

# ios - Objective-C: NSLinguisticTagger "new york" vs "New York"

> ID：14938867
> 
> 赞同：18
> 
> 时间：2013-02-18T14:43:00.880
> 
> 标签：ios, objective-c, ios5

我刚刚开始`NSLinguisticTagger`在这个博客上使用我的代码：[NSLinguisticTagger @ NSHipster.com](http://nshipster.com/nslinguistictagger/)

```
NSLinguisticTaggerOptions options = NSLinguisticTaggerOmitWhitespace | NSLinguisticTaggerOmitPunctuation | NSLinguisticTaggerJoinNames;
NSLinguisticTagger *tagger = [[NSLinguisticTagger alloc] initWithTagSchemes: [NSLinguisticTagger availableTagSchemesForLanguage:@"en"] options:options];
tagger.string = question;
[tagger enumerateTagsInRange:NSMakeRange(0, [question length]) scheme:NSLinguisticTagSchemeNameTypeOrLexicalClass options:options usingBlock:^(NSString *tag, NSRange tokenRange, NSRange sentenceRange, BOOL *stop) {
NSString *token = [question substringWithRange:tokenRange];
NSLog(@"%@: %@", token, tag); }]; 
```

当我用 运行它时`question = @"Weekend in New York"`，`"New York"`会被标记为`PlaceName`哪个很棒。但是当我用 运行它时`question = @"Weekend in new york"`，`"new"`被标记为`"Adjective"`并被`"york"`标记为`PlaceName`。有没有办法解决这个问题，`"New York"`并且`"new york"`两者都被标记为`PlaceName`？

我对这个语言学的东西完全陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-02T21:42:28.060

让这个话题更进一步。**名字和姓氏的正确大写是**NSLinguisticTagger 识别名字的要求。

*经过几个小时的挫折*，我决定用大写、小写和大写字母创建各种测试。

NSLinguisticTagger 在几乎所有测试中都有不同的结果

**当 NSLinguisticTagger 以大写形式解析字符串时，几乎所有名词都被标记为 personalName**。什么？

这非常令人沮丧。

我想分享的教训是，NSLinguistic 标注器可以猜测它放置在单词上的标签，但最终它只是对单词的语法评估。评估取决于适当的语言结构，例如单词位置以及单词是否大写。

我仍然发现它是一个有用的课程，但这篇文章的寓意是**“正确”**。

在解析文本时，有时我们的程序员倾向于使用大写和小写来简化我们的工作。我们仍然可以这样做，但**请记住单词大小写确实会改变 NSLinguisticTagger 结果**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T21:44:37.437

评论中已经提到了这一点，但无论如何还是想指出这一点。NSLinguisticTagger 认为“New York”和“new york”是不同的——因为它们是不同的。大写 N 表示它是专有名词。据我所知，NSLinguisticTagger 中没有任何东西可以改变这种行为。

但是，您可以做的是依靠 iOS 自动更正。只需确保输入值的文本字段启用了自动更正，它应该自动将“纽约”更正为“纽约”，以及类似的情况。如果自动更正没有发现这一点，那么我会尝试寻找其他一些库进行语言分析。

iOS 中已经包含追溯自动更正（在一定程度上），因此应该足以将“纽约”更正为“纽约”。如果您想更正整个句子（即“纽约周末”为“纽约周末”），您需要自己实现该功能。这应该不是很困难，因为您必须遵循一些简单的语法规则，并且自动更正会发现很多东西。

希望这会有所帮助，如果您需要更多信息，请告诉我。

# java - 在 GUI 中使用除法 ("/") 时

> ID：14938871
> 
> 赞同：-1
> 
> 时间：2013-02-18T14:43:16.453
> 
> 标签：java, user-interface

我在除法部分遇到问题，加法（+），减法（-）和乘法（*）似乎没问题，但是当我使用除法（/）时，它会产生错误的输入......为什么？

-示例 - `10/2 = 0.2`<<---- 为什么？

我的代码：

```
private void jButton12ActionPerformed(java.awt.event.ActionEvent evt) {                                          
                    SolveTEMP = Double.parseDouble(  jTextField1.getText() );
                    if ( addBool == true  )
                        SolveTEMP = SolveTEMP + TEMP;
                    else if ( subBool == true  )
                        SolveTEMP = SolveTEMP - TEMP;
                    else if ( mulBool == true  )
                        SolveTEMP = SolveTEMP * TEMP;
                    else if ( divBool == true  )
                        SolveTEMP = SolveTEMP / TEMP;

       jTextField1.setText(  Double.toString( SolveTEMP ) );
        addBool = false ;
        subBool = false ;
        mulBool = false ;
        divBool = false ;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:46:10.047

你已经交换了分子和分母。

尝试

```
SolveTEMP = TEMP / SolveTEMP; 
```

代替

```
SolveTEMP = SolveTEMP / TEMP; 
```

**编辑：**

对于加法和乘法，顺序无关紧要。

减法工作正常吗，还是也需要切换？

# javascript - 如何防止正则表达式中的“*/”被解释为块注释？

> ID：14938873
> 
> 赞同：0
> 
> 时间：2013-02-18T14:43:21.457
> 
> 标签：javascript, jquery, regex

我正在开发一个书签，它使用[replaceText](http://benalman.com/projects/jquery-replacetext-plugin/)插件将页面上的所有单词（和无关空格/标点符号）包装在 span 标签中。该插件遍历页面上的所有文本节点，并允许我调用一个函数来操作每个节点的内容，而不会破坏页面上的任何其他 HTML 格式。（这都不是问题，我很确定，但我觉得上下文可能有用）。我的函数调用是这样的，供大家参考：

```
$("body *").replaceText(/\S+\s*/g, spanWrap); 
```

问题是我发现的用于分隔这些单词的最佳正则表达式 - `/\S+\s*/g`- 包含块注释结尾的字符（“*/”）。如果我在 Notepad++ 的 .js 文件中的前几行添加块注释的开头，我可以看到语法高亮器正在读取它。

当我运行我的书签时，大多数网站似乎都没有遇到此问题，并且书签按预期工作。但是，由于我无法预测的原因，某些站点会抛出“ `Uncaught SyntaxError: Unexpected token <`”错误，并且小书签会中断/停止运行。如果我将`replaceText`函数中使用的正则表达式更改为我在早期版本的小书签中使用的正则表达式 -- `/\b(\S+?)\b/g`-- 在小书签中完全没有更改任何其他内容时，这些站点停止给出错误并且小书签工作正常很好，所以我必须相信是块注释关闭的存在导致了它。

不过，就我试图对小书签做的事情而言，其中带有注释闭包的表达式`/\S+\s*/g`————比另一个没有标点符号和空格的表达式好得多，好得多。但是，如果我的书签没有在某些网站上损坏，我也会非常喜欢它。

那么，有没有一种方法可以修复我拥有的正则表达式，使其不会被视为评论，或者你能建议一个可以用不同的语法或其他东西完成相同工作的方法吗？（如果从我的问题中看不出来，我对正则表达式的工作原理最了解，并且通过从其他 Stack Overflow 问题/答案中复制它们来获得我在本示例中使用的那些）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:52:40.727

使用长版本：

```
var regex = new RegExp("\\S+\\s*", "g");
$("body *").replaceText(regex, spanWrap); 
```

*（编辑：转义字符串中的反斜杠）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:50:13.503

> 那么，有没有一种方法可以修复我拥有的正则表达式，使其不会被视为评论

我想不出任何理智的事情。（您可以通过使用`RegExp`构造函数并将正则表达式分成两个字符串，然后将它们连接在一起以形成正则表达式来获得效果。不过，我不会认为那是理智的。）

我会使用一系列行注释`//`而不是块注释。

# cmake - 将 cmake 命令直接用作自定义命令而不是包装脚本的更好方法？

> ID：14938875
> 
> 赞同：1
> 
> 时间：2013-02-18T14:43:27.770
> 
> 标签：cmake

目前，我喜欢 ~4 个脚本，它们仅包含一些简单的 CMake 命令，例如“FILE(COPY ...)”或“CONFIGURE_FILE(...)”，因此我可以在自定义命令中将它们与**-P 标志一起使用，例如：**

```
ADD_CUSTOM_TARGET(  ${target}_TMP_RESOURCES ALL
                    COMMAND ${CMAKE_COMMAND} -DFILES_LIST="${${target}_RESOURCES}" -DDESTINATION="${BUILD_INTERMEDIATE_DIR}/${target}/bin/assets" -DEXCLUDE_EXT=".svn .git CVS .DS_Store" -P ${ROOT_DIR}/cmake/scripts/copyFiles.cmake
                    DEPENDS "${target}_TMP_BIN_DIR" 
                    COMMENT "Collecting resource files..." ) 
```

**-E 标志**看起来像我想要的，不幸的是，根据文档，它只支持很少的平台命令。

那么，有没有更好的方法在自定义命令中使用 CMake 命令，而无需在脚本模式下运行 cmake 并且不必编写这些简单的脚本？

# php - 如何使用多个具有相同名称的表单输入？

> ID：14938877
> 
> 赞同：4
> 
> 时间：2013-02-18T14:43:34.687
> 
> 标签：php, html, forms, query-string, html-input

我有几个从表单中的循环创建的复选框（我不知道它们的数量）。

```
<form>
<input type="checkbox" name="id" value="id">
<input type="checkbox" name="id" value="id">
...//create in a loop
<input type="checkbox" name="id" value="id">
</form> 
```

我的问题是如何阅读它们，如果我使用`<?php $_REQUEST['id']; ?>`，它只会读取最后一个复选框。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T14:44:19.090

使用输入数组：

```
<input type="checkbox" name="id[]" value="id_a">
<input type="checkbox" name="id[]" value="id_b">
<input type="checkbox" name="id[]" value="id_c">
<!--                           ^^ this makes it an array --> 
```

`$_REQUEST['id']`可以访问：

```
foreach($_REQUEST['id'] as $id)
{
    echo $id;
} 
```

输出

> id_a
> id_b
> id_c

旁注：这适用于`$_POST`and `$_GET`（不仅仅是`$_REQUEST`）。一般来说，`$_REQUEST`如果可能的话应该避免。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-18T14:49:50.393

为您的复选框使用唯一 ID，例如，

```
<form>
<input type="checkbox" name="id1" value="value1">
<input type="checkbox" name="id2" value="value2">
...//create in a loop
<input type="checkbox" name="id3" value="value3">
</form> 
```

# javascript - Jquery 包含选择的 div 太高了

> ID：14938879
> 
> 赞同：2
> 
> 时间：2013-02-18T14:43:35.980
> 
> 标签：javascript, jquery

我敢肯定，这对我来说完全是愚蠢的举动，但无法弄清楚这里发生了什么。

我正在尝试选择一个包含特定单词的 div，但 Jquery 似乎选择了错误级别的 div。如果你运行它，你会明白我的意思：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
      <script src="http://code.jquery.com/jquery-latest.js"></script>

    <script type="text/javascript">
        $(function () {
            $(".ms-my-profileDetails:contains('Birthday')").css("color", "red");
        });
    </script>
</head>
<body>
    <div class="ms-my-profileDetails">
        <div>
            Department : <a href='http://Someurl'>IT</a>
        </div>        
        <br />
        <div>
            Birthday : <a href='http://Someurl'>1921-04-13</a>
        </div>
        <br />
    </div>
</body>
</html> 
```

`<div class="ms-my-profileDetails">`当我只想要生日 div 时，上面的结果包含匹配生日和部门的整个 div 。

请帮忙。发送

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T14:46:05.507

你应该是这样的：

```
$(".ms-my-profileDetails").children(":contains('Birthday')").css("color", "red"); 
```

那应该只在子 div 上查看，因此在这种情况下选择你想要的 div ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T14:47:58.080

Antons 解决方案的替代方案，不知道它是否更有效

```
$(".ms-my-profileDetails > div:contains('Birthday')").css("color", "red"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:44:36.853

使用`:last`using contains 获取所有带有您正在搜索的关键字的元素，因此您必须使用 :last 来获取包含它的确切元素

```
$("div:contains('Birthday'):last").css("color", "red"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T14:53:25.683

你的选择器是错误的。您告诉 jQuery 使用包含“Birthday”的“.ms-my-profileDetails”搜索元素。您的 html 中只有 1 个元素。

现在，您希望在带有“.ms-my-profileDetails”的元素中包含“Birthday”的 div。那将是：

```
$(".ms-my-profileDetails div:contains('Birthday')").css("color", "red"); 
```

[http://jsfiddle.net/pquT7/](http://jsfiddle.net/pquT7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T14:47:38.580

提这个

```
$(".ms-my-profileDetails").children().last().css("color", "red"); 
```

# sql - 跨表的多次计算

> ID：14938886
> 
> 赞同：-1
> 
> 时间：2013-02-18T14:44:07.533
> 
> 标签：sql, oracle

我正在尝试获取客户所有发票的总成本。理想情况下，最终格式将是两列 [客户名称] 和 [总发票]。到目前为止，我已将其分解为多个部分，以便我可以检查并更好地了解加入表格的过程，并进行了计算以获得每张发票上的项目总数，但现在我被卡住了。

正如您从我的[屏幕截图](https://docs.google.com/file/d/0BxJ9hgcQ1wJGZXJITEtQS0JYVUE/edit?usp=sharing)中看到的（必须链接到我的谷歌文档，因为我无法在此处发布图片 - 抱歉）我多次列出公司名称。每个项目一次，每个发票编号，然后项目。如何更改我的查询以仅显示一次客户名称以及所有发票的相应总计？

我将第 3 行和第 4 行作为我认为下一步的注释，因此我可以在将查询微调到我想要的输出之前分步执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:50:23.027

像这样的东西应该使用`SUM`and工作`GROUP BY`：

```
SELECT CustomerName, SUM(itemPrice * qty) InvoiceTotal
FROM YourTables With Your Joins
GROUP BY CustomerName 
```

如果您在上面发布了整个查询，我可以复制并粘贴到示例中。但这应该让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:51:40.327

```
Select Customer.CustName, Sum(InvoiceItem.Quantity*Item.ItemPrice) As TotalValue
  From Customer
       Inner Join Invoice On Customer.CustABN = Invoice.CustABN
       Inner Join InvoiceItem On Invoice.InvoiceNo = InvoiceItem.InvoiceNo
       Inner Join Item On InvoiceItem.ItemNo = Item.ItemNo
 Group By Customer.CustName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:49:59.953

分组可能会有所帮助，您还需要检查您的 dbms 是否允许在不使用聚合函数的情况下进行分组（某些 DBMS 不允许这样做，并返回误导性结果）。多家公司是因为我猜是公司-发票-产品的关系。

# django - 序列化器处理嵌套对象

> ID：14938895
> 
> 赞同：9
> 
> 时间：2013-02-18T14:44:42.637
> 
> 标签：django, django-rest-framework

使用[Django REST 框架](http://django-rest-framework.org/api-guide/serializers.html)，我在下面有以下序列化程序。我想将（嵌套）相关对象（ProductCatSerializer）添加到 ProductSerializer。我已经尝试了以下......

```
class ProductCatSerializer(serializers.ModelSerializer):
    class Meta:
        model = ProductCat
        fields = ('id', 'title')

class ProductSerializer(serializers.ModelSerializer):
    """
    Serializing the Product instances into representations.
    """
    ProductCat = ProductCatSerializer()

    class Meta:
        model = Product
        fields = ('id', 'title', 'description', 'price',) 
```

所以我想要发生的是 Products 以显示嵌套在结果中的相关类别。

谢谢你。

**更新：**

使用 depth = 2 选项*（感谢 Nandeep Mali ）*我现在得到了嵌套值，但它们只显示使用 ID 而不是 keyparis 像其余的 json 请求一样（参见下面的类别）。它几乎是正确的。

```
"results": [
        {
            "id": 1, 
            "title": "test ", 
            "description": "test", 
            "price": "2.99", 
            "product_url": "222", 
            "product_ref": "222", 
            "active": true, 
            "created": "2013-02-15T15:49:28Z", 
            "modified": "2013-02-17T13:05:28Z", 
            "category": [
                1, 
                2
            ], 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T16:35:44.797

您的示例几乎是正确的，除了您应该将字段称为“productcat”（或称为模型关系的任何名称，但没有 CamelCase），并将其添加到您的字段中。

```
class ProductCatSerializer(serializers.ModelSerializer):
    class Meta:
        model = ProductCat
        fields = ('id', 'title')

class ProductSerializer(serializers.ModelSerializer):
    """
    Serializing the Product instances into representations.
    """
    productcat = ProductCatSerializer()

    class Meta:
        model = Product
        fields = ('id', 'title', 'description', 'price', 'productcat') 
```

# android - 我是否需要始终使用最后一个 targetSdkVersion？

> ID：14938896
> 
> 赞同：12
> 
> 时间：2013-02-18T14:44:44.327
> 
> 标签：android, android-manifest, android-library

简单的问题：在 Eclipse 中，“新建 Android 项目”命令总是尝试使用最后一个可用的 sdk。这总是一个好主意吗？

**更新：**

我试图解释。现在在 Eclipse 中，“新建项目”会生成一个清单，其中包含：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" /> 
```

因此，定位到最后一个 Android（Jelly Bean，4.2.x），但它也可以在 Froyo (2.2) 上运行。对我来说还好。这个选择我会做错什么？

**更新**

如果我将 android:minSdkVersion="8" + android:targetSdkVersion="17" 和构建目标设置为 2.2 以确保我的应用程序将在旧设备上运行（没有 NoSuchMethodError 异常），可以吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T14:52:50.613

> 这个选择我会做错什么？

这个选择没有错，这就是构建工具默认使用它的原因。

将选项设置为`targetSdkVersion`您可能无法使用较旧的`targetSdkVersion`. 您可以通过阅读[.`Build.VERSION_CODES`](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T14:48:24.183

如果您想为旧版本开发应用程序，这不是一个好主意。您始终可以检查[最常用的版本](http://developer.android.com/about/dashboards/index.html)是什么，并根据该版本制作您的应用程序。在某些情况下，需要使用最新版本，因为某些功能尚未在旧版本中实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T14:48:25.917

您可以在这里阅读更多相关信息：http: [//developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

但是您几乎应该始终将目标设置为最新的，然后将最小值更改为您想要的最旧的。

# visual-studio - 如何部署到共享点？

> ID：14938899
> 
> 赞同：0
> 
> 时间：2013-02-18T14:44:50.343
> 
> 标签：visual-studio, sharepoint, deployment

使用 SharePoint 2010 有一段时间了，感觉我的部署方法既慢又复杂，所以我的问题基本上是..

无论如何，我是否可以直接从 Visual Studio 将包部署到远程共享点服务器？..

例如..我能否在我的 Visual Studio 项目和我想要部署到的共享点服务器之间建立一个连接，然后只需按下某种“部署按钮”，然后部署整个项目（或者甚至更好的是我的更改) 针对远程共享点服务器？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:59:41.627

这并不容易。首先`Deploy`，您可以为每个 SharePoint 项目选择。这会将解决方案 (WSP) 部署到您`Site URL`为项目指定的 URL。但是，这对您的情况没有帮助，因为它仅部署到本地 SharePoint Server。

根本没有从 Visual Studio 中自动部署到远程服务器的方法。您所说的实际上具有*持续集成*的各个方面-> 每次签入时都希望不断地进行部署。
持续集成的完美工具是 Team Foundation Server。在那里，您可以创建一个部署脚本（通过 TFS 工作流），它会自动增加程序集的版本号并将它们部署到远程 SharePoint 服务器。这通常通过 PowerShell 远程处理完成。

PowerShell 是这里的关键字，因为最终您可以创建自己的 PowerShell 部署脚本，然后在 Visual Studio Post-Build 中调用它们，而不是使用完整的 TFS。

# svn - svn 查找不同版本的文件

> ID：14938900
> 
> 赞同：0
> 
> 时间：2013-02-18T14:44:50.870
> 
> 标签：svn

我有一个基本的 SVN 存储库和这个场景：

我有一个使用 SVN 更新源代码的共享服务器。首先，我将整个 repo 更新为`svn up`最新版本，例如：`12`. 但是在有人（不要问我为什么）仅在 1 个文件上使用`svn up -rXX`（其中 XX != ）之后几次。`12`

```
svn up -r10 public/style.css 
```

我回到文件夹，当我使用`svn info`修订版时`12`，我需要列出与根文件夹不同修订版的所有文件？

我正在寻找一个更好的解决方案来全局化所有文件并使用 svn info :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:55:49.260

> 我需要列出与根文件夹不同版本的所有文件吗？

不，您**不需要**这个 - 不要混淆术语“存储库修订”（全局）和“文件修订”（对于任何版本化和在时间文件期间更改）

*   **全局修订是***存储库中所有对象在*某个时刻的历史片段（它们的修订可能不同，只是因为存储在存储库更改 /revision/*可能不会影响每个文件*）

*   **文件修订版**是该文件在某个时刻的状态（并且自身修订版未更改的文件可能并且可以存在于不同的全局修订版中）

    > svn ls -v [http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/](http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/)

    ```
     36 lazybadg              янв 09 11:45 ./

     34 lazybadg           42 мар 24  2012 Dr?p?r.ma?ar.sv?nskan.man.eller.smalensk?n.txt

     32 lazybadg           88 дек 27  2011 Hello.de.txt

     33 lazybadg           82 фев 28  2012 Hello.en.txt

     36 lazybadg           88 янв 09 11:45 Hello.eo.txt

     35 lazybadg           90 янв 09 11:35 Hello.fr.txt 
    ```

（如您所见，在主干文件的 HEAD 中有不同的修订版 - 没关系）

```
>svn info http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/
...
Revision: 37
...
Last Changed Rev: 36
... 
```

如果你想将工作副本从当前的 Mixed 返回到存储库 r12 的状态，你只有`svn up -r 12`或者，如果是 12，如果 HEAD -`svn up`

**流程演示（与上述相同的 URL）**

```
>svn co http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/
A    trunk\Dr?p?r.ma?ar.sv?nskan.man.eller.smalensk?n.txt
A    trunk\Hello.en.txt
A    trunk\Hello.eo.txt
A    trunk\Hello.fr.txt
A    trunk\Hello.de.txt
 U   trunk
Checked out revision 37. 
```

*混合我们的厕所*

```
>svn up -r 30 Hello.de.txt
Updating 'Hello.de.txt':
U    Hello.de.txt
Updated to revision 30. 
```

（我们将文件更新为*存储库修订版*30 的状态，Hello.de.txt 修订版可能 <= 30）

*检查厕所*

```
>svn status 
```

 `（无输出 - WC 很干净，可以轻松更新）

*回归纯HEAD*

```
>svn up
Updating '.':
U    Hello.de.txt
Updated to revision 37. 
```

（同样：37 是 repo 的修订版，在这种状态下 Hello.de.txt 可能/并且拥有/自己的修订版 - 根据 ls 是 32 - 但我们不能准确地知道这个修订版，Subversion 为我们存储这些数据并在需要时使用)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:16:25.693

首先要做的事情是开始进行艰苦的战斗，以摆脱陷入困境的困境。您应该能够在共享和混合工作副本的链条上出售风险。

你可以从你的工作副本中做这样的事情

`svn status -v | grep -v 12`

列出工作副本中所有文件的 rev 并打印那些没有 12`

# selenium - 找不到夹具：fitlibrary.spider.SpiderFixture

> ID：14938905
> 
> 赞同：-2
> 
> 时间：2013-02-18T14:45:01.847
> 
> 标签：selenium, fitnesse, web-testing, fitlibraryweb

我尝试使用 FitLibraryWeb 为基于 Selenium 的 Web 测试设置 Fitnesse。教程测试`/FitLibraryWeb.SpiderFixture.SpiderTutorial.StartingWithSpider`工作（我将驱动程序从 firefox 更改为 chrome，但这不重要），但如果我创建自己的测试页面，它总是会中止并显示错误消息**[1]**。

我什至复制了教程测试页面的确切内容，以确保测试本身没有错误。**我还需要什么才能使测试页可执行？**

*   页面类型为“测试”
*   网址是`/SandBox.MyTest`

我在[FitNesse UserGuide](http://butunclebob.com/FitNesse.UserGuide.SpecialPages)中读到，有一些特殊页面总是包含在顶部，即`PageHeader`用于`SetUp`测试。但这些都不存在：

*   `/FitLibraryWeb.SpiderFixture.SpiderTutorial.StartingWithSpider.SetUp`
*   `/FitLibraryWeb.SpiderFixture.SpiderTutorial.SetUp`
*   `/FitLibraryWeb.SpiderFixture.SetUp`
*   `/FitLibraryWeb.SetUp`

（对于 相同`PageHeader`）

**[1] 测试页面开始如下：**

```
!define spider {''!-SpiderFixture-!''}
!| fitlibrary.spider.SpiderFixture |

| ''start spider with'' | chrome |
| ''shutdown browser automatically'' | false |

| ''get url'' | http://localhost:${FITNESSE_PORT}/FitLibraryWeb.TemplateFixture | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:58:26.810

好的，我想通了... [ClassPath 文档](http://butunclebob.com/FitNesse.UserGuide.ClassPath)是缺少的链接：

> 对于给定的测试页面**SubWiki**，您可以通过提供所谓的 ClassPath 定义来指定 FitNesse 在哪里可以找到所需的所有夹具类，这是包含包的目录的完整绝对文件路径（在 Java 中）或可以在其中找到所有已编译类的程序集（在 C# 中）。**只需在您的 SubWiki 的主页**上包含一个 ClassPath 定义。

*（我强调）*

因此，我搜索的代码位于`FitLibraryWeb`：

```
!*< paths and defines
#!path ../bin
!path lib/fitlibraryweb-2.0.jar
!path fitlibrary-2.0.jar
#!path ../../fitlibrary/bin
!path lib/*.jar
!define TEST_RUNNER {fitlibrary.suite.FitLibraryServer}
!define REGRACE_LINK {false}
!define REGRACE_TOC {false}

*! 
```

这些定义适用于*SubWiki*中的所有子页面。我将它复制到我`SandBox`的主页，将此页面的类型更改为`Suite`，现在它可以工作了！

# mp3 - jplayer 播放本地媒体文件

> ID：14938906
> 
> 赞同：0
> 
> 时间：2013-02-18T14:45:07.830
> 
> 标签：mp3, playback, jplayer

我正在使用 jplayer 播放 mp3 文件，该文件位于我的本地机器上。但是播放器无法播放。这是我的代码。

```
 $("#jquery_jplayer_1").jPlayer({
                    ready: function () {
                      $(this).jPlayer("setMedia", {

                        //m4a: location1
                        oga: location2,
                        mp3: "http://172.17.4.45/test.mp3"
                      });
                    },
                    swfPath: "<?php echo $base;?>/jplayer/",
                    supplied: "m4a, oga, mp3"
                  }); 
```

我怎样才能做到这一点。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:42:35.920

这应该有效：

设置播放器

```
 jQuery("#jquery_jplayer_1").jPlayer({
       swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
  supplied: "mp3",
  wmode: "window",
  preload:"auto",
  autoPlay: true,
  errorAlerts:false,
  warningAlerts:false
}); 
```

加载曲目

```
 jQuery("#jquery_jplayer_1").jPlayer(
  "setMedia", {
    mp3: "http://xxxx.rackcdn.com/"+track_id+".MP3"
  }); 
```

玩！

```
 jQuery("#jquery_jplayer_1").jPlayer("play"); 
```

这应该有效。如果不是，则文件路径必须存在问题。

# .net - 一个理想的 Visual Studio 模板，可用于实体框架作为单独的层

> ID：14938908
> 
> 赞同：0
> 
> 时间：2013-02-18T14:45:19.303
> 
> 标签：.net, entity-framework, entity-framework-4

我是实体框架的新手。我想知道我是否想在单独的层/项目中部署我的 EF，哪个 Visual Studio 模板最适合该层。我应该使用“类库”还是简单的“控制台应用程序”。除了一些已知的模板之外，是否有任何规则或指南可以为我们打算定义为单独的层/项目的内容选择正确的模板？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:50:07.583

您的 EF 内容应该放在一个类库项目中，以便输出一个 DLL，该 DLL 可以由 Web 应用程序或控制台/Windows 窗体应用程序使用而无需更改。

通常你有一个“可运行”项目，它往往是默认项目。这可以是 ASP.Net 应用程序、控制台、Windows 窗体、Windows 服务等。

该项目充当应用程序逻辑的入口点，因为其余项目是 DLL，它们比可执行的项目更可重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:51:42.700

您所描述的不是类模板。

Windows 应用程序/控制台应用程序/类库指的是输出类型。控制台应用程序必须具有“Main”方法，并且基于该方法 VS 知道将代码编译为可执行文件。当您启动可执行文件时，会调用 Main。

一般来说，考虑拥有一个控制台应用程序或Windows应用程序类型的项目，并将其设置为启动项目（右键单击它>设置为启动项目）。将大部分代码放在一个库中，然后从控制台项目中调用它。

特别是对于 EF，您绝对是一个包含所有与数据库相关的代码的库 - 即与其余代码分开。

# batch-file - 如果其 TXT 文件的总和大于 50 MB，则删除文件夹？

> ID：14938919
> 
> 赞同：0
> 
> 时间：2013-02-18T14:45:55.747
> 
> 标签：batch-file, cmd

我有一台服务器运行并每小时创建 10KB 日志 TXT 文件。当 TXT 文件达到 50MB 时，我想全部清除，只保留 10MB（所以删除 40MB 的文件，剩下的 10MB 将只是最近的文件）。

我很难使用`dir`，例如：

```
dir *.txt 
```

在最后一行的前一行`dir`是这样的：

```
9 Rép(s)  566 773 248 octets 
```

然后我会提取这一行的最后一个数字，如果这个数字大于 50 000 000，那么我将删除所有前 40MB 的文件。

我不知道如何进行，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:48:31.250

我认为您不能在不伤害自己的情况下批量执行此操作。很糟糕。

将 VBScript 与[断开连接的记录集](http://technet.microsoft.com/en-us/magazine/2008.09.heyscriptingguy.aspx)一起使用可能是一种更好的方法。

```
Const adBigInt  = 20
Const adDate    = 7
Const adVarChar = 200

Const SizeThreshold = 52428800 'Byte
Const SizeLimit     = 10485760 'Byte

Set fso = CreateObject("Scripting.FileSystemObject")

Set rs = CreateObject("ADOR.Recordset")
rs.Fields.Append "path", adVarChar, 255
rs.Fields.Append "date", adDate
rs.Fields.Append "size", adBigInt
rs.Open

totalSize = 0

For Each f In fso.GetFolder("C:\Temp").Files
  rs.AddNew
  rs("path") = f.Path
  rs("date") = f.DateLastModified
  rs("size") = f.Size
  rs.Update
  totalSize = totalSize + f.Size
Next

If totalSize > SizeThreshold Then
  rs.Sort = "date ASC, size ASC"
  rs.MoveFirst

  Do Until rs.EOF Or totalSize < SizeLimit
    rs.MoveFirst
    fso.DeleteFile rs("path")
    totalSize = totalSize - CLng(rs("size"))
    rs.Delete
  Loop
End If

rs.Close 
```

# linux - 脚本因退出代码 19543 而中止

> ID：14938920
> 
> 赞同：0
> 
> 时间：2013-02-18T14:46:00.730
> 
> 标签：linux, wget

我有一个脚本可以下载一个大文件（~4gb）作为部分文件。这个脚本是从 java 线程中调用的。该脚本使用Linux 的*wget*实用程序来下载文件。突然脚本异常退出并显示错误消息

```
19543 Aborted  /usr/bin/wget 
```

一旦脚本失败，线程将休眠 1 小时，当它唤醒时，它会再次开始下载。它继续下载约 10 分钟，然后再次失败并显示相同的错误消息。

它下载的服务器，资源管理很好，没有问题。运行脚本的客户端的 CPU 使用率也很好。

不明白为什么会发生这种失败。早些时候，该脚本用于从同一台服务器成功下载，没有任何问题。

它以 128kbps 的速度下载。

# android - 网络连接和 UI 视图以相同的方法更改

> ID：14938927
> 
> 赞同：0
> 
> 时间：2013-02-18T14:46:17.423
> 
> 标签：android, ui-thread

我的应用程序中的 AsyncTask 有问题。我在 doInBackground() 中加载了一些数据，并使用该数据（包含下载图像的链接）填充 ListView。我的想法是在 onPostExecute() 中填充 ListView，但我不能，因为适配器使用 Http 连接来下载图像并显示它。

因此，如果我将适配器放在 onPostExecute() 中，Android 会告诉我无法在 UI 主线程中建立网络连接。但是如果我这样做了 doInBackground() ，它会告诉我只有创建视图层次结构的原始线程才能触及它的视图。

有什么建议吗？

# javascript - jQuery .stop() 不适用于动画

> ID：14938928
> 
> 赞同：0
> 
> 时间：2013-02-18T14:46:21.047
> 
> 标签：javascript, jquery, javascript-events

我在一个网站上工作，我试图让悬停看一个样本：http: [//jsfiddle.net/PBbSh/6/](http://jsfiddle.net/PBbSh/6/)但你可以看到`.stop()`在这里不起作用。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:48:37.293

尝试做`.stop(true, true)`。[该文档将](http://api.jquery.com/stop/)stop 指定为

> `.stop( [clearQueue ] [, jumpToEnd ] )`

这样做`.stop(true, true)`将清除队列并将动画跳到最后。如果您只想清除动画队列，请执行`.stop(true, false)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:50:27.417

试试这个而不是停止，使用 .clearQueue()

```
$(document).ready(function(){

$(".projectenfoto1").stop().mouseover( projectenfunction(".projectenfoto1"));
$(".projectenfoto2").stop().mouseover( projectenfunction(".projectenfoto2"));
$(".projectenfoto3").stop().mouseover( projectenfunction(".projectenfoto3"));

function projectenfunction(foto1){
    $(foto1).stop().mouseover (function(){
        $(foto1).animate({
            width: "278",
            }, 500);
        });

    $(foto1).clearQueue.mouseout(function(){
        $(foto1).animate({
        width: "186.75",
    }, 500);
    });
}

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:50:35.820

试试这个优化的代码：

```
$(document).ready(function(){

    $(".projectenfoto1, .projectenfoto2, .projectenfoto3")
    .mouseover(function(){
        jQuery(this).stop().animate({
                width: "278",
                }, 500);
    })
    .mouseout(function(){
        jQuery(this).stop().animate({
            width: "186.75",
        }, 500);
    }); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T15:41:43.790

试试这个（为了清楚起见，我已经清理了你的 HTML、CSS 和 jQuery）

HTML：

```
<div id="fotowrapper">
        <div id="fotocontainer">

            <div class="projectenfoto1">
            </div>

        </div>
</div> 
```

CSS：

```
#fotowrapper {
    margin-top: 11px;
}

#fotocontainer {
    width: 747px;
    height: 523px;
    margin-left: auto;
    margin-right: auto;
    position:relative;
}

.projectenfoto1 {
    width: 186.75px;
    height: 378px;
    background-image: url(http://www.crewtime.nl/kookenleer/Images/Slideshow/foto3.png);
    background-repeat: no-repeat;
    float:left;
    z-index: 4;
    position: absolute;
} 
```

jQuery：

```
$(document).ready(function(){
    projectenfunction(".projectenfoto1");

    function projectenfunction(foto1){

        $(foto1).mouseover (function(){
            $(foto1).stop().animate({
                width: "278"
            }, 500);
        });

        $(foto1).stop().mouseout(function(){
            $(foto1).stop().animate({
                width: "186.75"
            }, 500);
        });
    }
}); 
```

更新的小提琴：http: [//jsfiddle.net/PBbSh/10/](http://jsfiddle.net/PBbSh/10/)

# vbscript - 从 vbscripy:qtp 中的数据表打开超链接

> ID：14938929
> 
> 赞同：0
> 
> 时间：2013-02-18T14:46:21.900
> 
> 标签：vbscript, qtp

有什么方法可以从全局表中提取链接并在脚本中使用它来打开它。这意味着我们必须打开数据表中的超链接。例如在这一行 Browser("Browser").Page("KOHLER_4").Link("Reports").Click

我们可以从数据表中获取链接“报告”，然后运行脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:25:49.700

你的意思是这样的吗？

```
 Browser("Browser").Navigate DataTable("URL", dtGlobalSheet) 
```

您可以使用该`DataTable`实用程序从数据表中获取值，您可以将此值用作方法的参数（如上所示）或作为对象描述的一部分，例如：

```
Link("href:="& DataTable("URL", dtGlobalSheet)) 
```

# asp.net - 服务器上的两个不同版本的 .net

> ID：14938937
> 
> 赞同：2
> 
> 时间：2013-02-18T14:46:42.547
> 
> 标签：asp.net, iis, asp.net-4.0, asp.net-2.0

是否可以在 Web 服务器上有两个不同版本的 .net 框架，然后在 IIS 的 ASP.Net 选项卡中让一个虚拟目录使用 2.0 版本，另一个虚拟目录使用 4.0 版本？

客户拥有在 2.0 框架中编译的所有 ASP.Net 应用程序。但他们想在不同的虚拟目录中安装更新的 ASP.Net 应用程序。而这个新的应用程序是在 4.0 框架下创建的。

他们如何在 IIS 上进行配置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T14:58:25.777

是的，可以在 Web 服务器上安装多个版本的 .NET。

您可以在不同框架上的 IIS 中运行多个应用程序。

然而，一个应用程序只能使用一个框架。由于虚拟目录是应用程序的一部分，它在应用程序的框架下运行。例如应用程序（.NET 2.0），它的虚拟目录是它的子目录，所以它们在.NET 2.0 下运行。

[有关 IIS、应用程序和虚拟目录的更多详细信息](http://www.iis.net/learn/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis)

解决方案是运行 2 个应用程序，一个用于 2.0，一个用于 4.0。

幸运的是，在 IIS 中，有一种方法可以将虚拟目录转换为虚拟应用程序，这使您有机会使用不同的应用程序池，从而使用不同的框架版本。

我将建议您阅读这篇 StackOverflow 帖子，它比我的更有说服力。

[StackOverFlow - 应用程序和虚拟目录之间的区别](https://serverfault.com/questions/102523/difference-between-application-and-virtual-directory)

# android - 看不到 Mopub 广告

> ID：14938938
> 
> 赞同：0
> 
> 时间：2013-02-18T14:46:46.530
> 
> 标签：android, unity3d, mopub

我正在为 Unity3D 使用 MoPub 插件。当我使用插件附带的默认测试广告 ID 时，我可以完美地看到测试广告。

但是，当我使用自己的帐户创建新的广告单元（横幅广告）并使用新的广告 ID 时，我在 Android 设备上看不到任何广告。logcat 输出显示广告已被接收并加载并显示。同样在控制台中，我可以看到广告请求。

我有什么需要做的设置吗？有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:48:49.660

err.. 抱歉，问题出在国家/地区。我所在的国家/地区没有可展示的广告。我刚刚检查了 VPN，将我的国家设置为美国并且有广告 :-) 我在 Revmob 中遇到了同样的问题，所以尝试了这个。无论如何谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T15:16:06.490

您确定广告尺寸正确吗？我已经看到一些问题，因为广告似乎对您的屏幕来说太大了，因此无法加载广告。请注意，当您将设备置于横向模式时，设备的尺寸会有所不同。

# javascript - 谷歌地图信息框位置

> ID：14938939
> 
> 赞同：9
> 
> 时间：2013-02-18T14:46:47.797
> 
> 标签：javascript, css, google-maps-api-3, position

我在谷歌上搜索这个问题已经有一段时间了，我得到的只是头痛。我在我的谷歌地图上添加了带有信息框的谷歌标记，但信息框的位置低于标记，我真的很感激它超过标记。有谁知道该怎么做？

并且请不要将某些链接指向某个地方，我今天看到它很长时间了。先感谢您。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T15:14:28.483

`alignBottom`将infoBox的-property 设置为`true`（默认为`false`）。要进一步调整位置，请使用`pixelOffset`infoBox 的 -property

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T15:24:16.343

默认情况下，信息框将指向标记的左下角。你可以简单地这样做：

```
var ib= new InfoBox({
    ....//other properties,
    pixelOffset: new google.maps.Size(-25, 0) //where your marker's height is 25px
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-04T06:45:29.113

```
infobox = new InfoBox({
         content: document.getElementById("infobox"),
         disableAutoPan: false,
         maxWidth: 150,
         pixelOffset: new google.maps.Size(-140, -45),
         zIndex: null,
         boxStyle: {
            background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/tipbox.gif') 0% 100% no-repeat",
            opacity: 0.75,
            width: "280px"
        },
        infoBoxClearance: new google.maps.Size(1, 1),
        alignBottom: true
    });

#infobox {
    border:2px solid black;
    margin-bottom: 8px;
    background:#333;
    color:#FFF;
    font-family:Arial, Helvetica, sans-serif;
    font-size:12px;
    padding: .5em 1em;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    border-radius: 2px;
    text-shadow:0 -1px #000000;
    -webkit-box-shadow: 0 0  8px #000;
    box-shadow: 0 0 8px #000;
} 
```

// 从本地加载自定义箭头

# java - 场景不适合舞台

> ID：14938945
> 
> 赞同：1
> 
> 时间：2013-02-18T14:46:55.463
> 
> 标签：java, xml, javafx-2, fxml

我通过以下方式加载舞台：

```
public void start(Stage stage) throws Exception{
    stage.setTitle("title");
    Scene scene = (Scene)FXMLLoader.load(getClass().getResource("../view/MainMenu.fxml"));
    stage.setScene(scene);
    stage.setWidth(1080);
    stage.setHeight(720);
    stage.setFullScreen(false);
    stage.show();
} 
```

改变场景：

```
@FXML protected void click(ActionEvent event) throws Exception{
    Stage stage = (Stage)menu.getScene().getWindow();
    Scene scene = (Scene)FXMLLoader.load(getClass().getResource("../view/MainMenu.fxml"));
    stage.setScene(scene);
    stage.show();
} 
```

文件格式：

```
<Scene fx:controller="controller.CtrlMainMenu" xmlns:fx="http://javafx.com/fxml" stylesheets="view/Style.css">
    <AnchorPane fx:id="menu">
        <VBox spacing="8"
              AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0"
              AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
            <Button text="click" onAction="#click"/>
        </VBox>
    </AnchorPane>
</Scene> 
```

换场景的时候问题就来了；新场景更小，出现在左上角并且不完全适合窗口（窗口保持其大小，在调整窗口大小后，场景再次调整到窗口，但之前，不是）。

另外，是否可以将对象发送到视图的控制器，因为我需要使用控制器处理模型？（使用 MVC 架构）

* * *

现在用 fx:root 尝试了这个方法 2 并具有以下内容：

应用：

```
public void start(Stage stage) throws Exception{
    FXMLLoader fxmlLoader = new FXMLLoader();
    Pane p = (Pane) fxmlLoader.load(getClass().getResource("../view/MainMenu.fxml").openStream());
    CtrlMainMenu controller = (CtrlMainMenu) fxmlLoader.getController();
    controller.sendString("test");      //send object test
    stage.setScene(new Scene(p));

    stage.setWidth(1080);
    stage.setHeight(720);
    stage.setFullScreen(false);
    stage.show();
} 
```

文件格式：

```
<fx:root type="javafx.scene.layout.AnchorPane" xmlns:fx="http://javafx.com/fxml" fx:controller="controller.CtrlMainMenu">
    <children>
        <AnchorPane fx:id="menu">
            <VBox spacing="8"
                  AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0"
                  AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
                <Button text="click" onAction="#click"/>
            </VBox>
        </AnchorPane>
    </children>
</fx:root> 
```

改变场景：

```
@FXML protected void click(ActionEvent event) throws Exception{
    FXMLLoader fxmlLoader = new FXMLLoader();
    Pane p = (Pane) fxmlLoader.load(getClass().getResource("../view/Options.fxml").openStream());
    Stage stage = (Stage)menu.getScene().getWindow();
    stage.setScene(new Scene(p));
    stage.show();
} 
```

重叠：

```
@FXML protected void Options(ActionEvent event) throws Exception{
    FXMLLoader fxmlLoader = new FXMLLoader();
    Pane p = (Pane) fxmlLoader.load(getClass().getResource("../view/Options.fxml").openStream());
    menu.getChildren().add(p);
} 
```

fxml（旧的没有 fx:root 行）：

```
<fx:root type="javafx.scene.layout.AnchorPane" xmlns:fx="http://javafx.com/fxml"
         fx:controller="controller.CtrlOptions" stylesheets="view/Style.css">
    <children>
        <GridPane xmlns:fx="http://javafx.com/fxml" alignment="center"
                  hgap="10" vgap="10" id="optionBackgorund"
                  AnchorPane.topAnchor="50.0" AnchorPane.bottomAnchor="50.0"
                  AnchorPane.leftAnchor="50.0" AnchorPane.rightAnchor="50.0"
                  fx:id="options">
            <!-- the view -->
        </GridPane>
    </children>
</fx:root> 
```

ok，现在可以用fx:root发送一个物体，制作一个场景，但是还是有场景不适合舞台的问题

现在有一个新问题，我没有没有fx：root，这个是使用另一个AnchorPane来重叠当前的那个，现在不重叠它，它只是出现在中间但大小保持不变小（装锚前）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:28:24.557

找到了让场景适合舞台的方法：

```
@FXML protected void click(ActionEvent event) throws Exception{
    FXMLLoader fxmlLoader = new FXMLLoader();
    Pane p = (Pane) fxmlLoader.load(getClass().getResource("../view/Options.fxml").openStream());
    Scene scene= menu.getScene();
    scene.setRoot(p);
} 
```

# json - 如何在 POST 方法中从 csv 文件发送 JSON 数据？

> ID：14938950
> 
> 赞同：2
> 
> 时间：2013-02-18T14:47:28.537
> 
> 标签：json, csv, jmeter, load-testing

在我的项目中，我使用 Jmeter 进行负载测试。
我创建了一个测试计划，如下所示：

1.  使用具有 10 个唯一用户名和密码的 csv 文件登录应用程序（成功完成）

2.  正则表达式提取器将从响应中获取会话 ID，该会话 ID 将在下一个采样器中用于提交请求。（sessionId提取成功）
3.  下一个采样器将提交请求。此采样器接受两个参数：sessionId 和 licenseRequest。java-script的一些细节如下：

    ```
    url: "groovy/enqueue",
    type: "POST",
    global: false,
    data: {sessionId: uSessionId, licenseRequest: JSON.stringify(requestJSON) },
    dataType: "text", 
    ```

为了提交请求，我创建了一个 csv 文件。
csv类似于这样：

**条目 1：**
`{"activations":["<activation-code>","<activation-code>"],"email":"<emailIdofUser>","csvEntries":[{"model":"<modelname>","serial":"<serialNo>"}],"comment":"testing jmeter"}`

我发现，在第二个采样器中提交请求时，发布请求格式不正确：

```
POST data:
sessionId=vZNjFjW38cid&licenseRequest=%3CEOF%3E 
```

如您所见，licenseRequest 的值不正确。它正在发送不需要的 EOF。

![在此处输入图像描述](../Images/188365482bc3137a36c05fcec21adb6d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T15:16:07.650

确保您拥有正确的[CSV 数据集](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config) `Recycle on EOF`和`Stop Thread on EOF`值：

*   如果您计划多次遍历文件，则必须设置`Recycle on EOF = True`（即指示 jmeter 移回 CSV 文件的顶部）；
*   `Stop Thread on EOF = False`如果您正在使用循环控制器，`Stop Thread on EOF = True`如果您正在使用 while 控制器并希望在读取整个 csv 数据集后停止；
*   如果您需要 N 个线程中的每一个从 csv 文件中读取并使用单个且唯一的行，您必须`Sharing mode: Current thread group`为 CSV 数据集配置设置（在这种情况下，csv 条目的数量应该与线程数相同，或者`Recycle on EOF? False`应该是否则设置）；
*   如果您需要 N 个线程中的每一个都读取并使用 csv 文件中的所有行，您必须`Sharing mode: Current thread`为 CSV 数据集配置进行设置。

不要忘记查看 jmeter.log 或使用[Log Viewer](http://jmeter.apache.org/usermanual/hints_and_tips.html#debug_logging)来检测 csv 使用的任何问题。

* * *

最简单的情况如下：

```
 **Test Group**
Number of Threads = 10
    **CSV Data Set Config (User Logins)**
    Filename: ... (your csv-file should have 10 entries)
    Recycle on EOF = False
    Stop Thread on EOF = True
    Sharing Mode = All threads
    **CSV Data Set Config (License Request)**
    Filename: ... (your csv-file should have 10 entries)
    Recycle on EOF = False
    Stop Thread on EOF = True
    Sharing Mode = All threads
    **Login Sampler**
    **License request Sampler** 
```

这将产生 10 个线程，每个线程都有来自 csv 的单独的登录条目和许可证请求条目。

# linux - 访问不包含桌面的监视器

> ID：14938952
> 
> 赞同：1
> 
> 时间：2013-02-18T14:47:30.513
> 
> 标签：linux, windows-7, x11, multiple-monitors

在具有多个显示器的计算机上，其中一个显示器上没有显示桌面，有没有办法从程序中在该显示器上绘图？

推理：我需要在单独的显示器上全屏显示可变图像，而用户不能用鼠标干扰屏幕，也不能在我的图像上移动窗口。示例：一台计算机连接了一台显示器和一台投影仪；显示器显示“正常”桌面，投影仪显示生成的图像（例如，颜色渐变）。

第一次使用是在 Win7 上，但如果存在可移植的解决方案，Linux 下的 X11 解决方案也不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:59:10.300

在 Linux 上，使用虚拟帧缓冲区 xvfb 很容易。命令是：

```
Xvfb :1 -screen 0 1600x1200x32 
```

您可以通过设置环境变量在虚拟屏幕上运行程序`DISPLAY=:1`

最好的部分是用户甚至不必担心干扰鼠标或键盘。对测试非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:12:41.010

在 Linux 下，您还可以在额外的监视器上运行第二个 X 会话

```
Xorg :1 -config /path/to/xorg_1.conf 
```

但是您需要编写一个 xorg_1.conf 配置文件来输入。

# go - 没有身体的功能是什么意思？

> ID：14938960
> 
> 赞同：37
> 
> 时间：2013-02-18T14:47:52.610
> 
> 标签：go, abstract-methods

我正在阅读 package 的代码，`time`然后我想知道它是如何`func After(d Duration) <-chan Time`工作的。

我发现代码如下：

```
func After(d Duration) <-chan Time {
    return NewTimer(d).C
}

func NewTimer(d Duration) *Timer {
    c := make(chan Time, 1)
    t := &Timer{
        C: c,
        r: runtimeTimer{
            when: nano() + int64(d),
            f:    sendTime,
            arg:  c,
        },
    }
    startTimer(&t.r)
    return t
} 
```

所以我找到了`startTimer`- 函数`startTimer`没有函数体的定义。

```
func startTimer(*runtimeTimer) 
```

我想知道：

1.  真正的代码在哪里`startTimer`
2.  为什么这里可以存在“抽象方法”
3.  为什么 Go 的作者会这样写

谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-18T15:02:47.100

1.  函数[在这里](https://golang.org/src/runtime/time.go#L206)定义：

    ```
    // startTimer adds t to the timer heap.
    //go:linkname startTimer time.startTimer
    func startTimer(t *timer) {
        if raceenabled {
            racerelease(unsafe.Pointer(t))
        }
        addtimer(t)
    } 
    ```

2.  [函数声明](http://golang.org/ref/spec#Function_declarations)：

    > 函数声明可以省略主体。这样的声明为在 Go 之外实现的函数（例如汇编例程）提供了签名。

3.  并非每种编程语言都可以完全表达自己的运行时（例如，C 可以）。Go 运行时和标准库的一部分在 C 中，部分在汇编中，而其他一些在`.goc`.

# wcf - WCF Duplex nettcp 回调不起作用

> ID：14938968
> 
> 赞同：2
> 
> 时间：2013-02-18T14:48:29.287
> 
> 标签：wcf, nettcpbinding, duplex-channel

## 环境

WCF 服务 (NET:TCP | Reliable | SecurityEnabled) 在物理机 A 上作为控制台运行

有 20-30 个 .NET 客户端应用程序 (Winforms) 暴露在 Citrix 上，因此再次托管在与服务器不同的一台物理机器上。

## 问题

应用程序结构遵循与Juval Lowy在[http://msdn.microsoft.com/en-us/magazine/cc163537.aspx](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)中讨论的相同模式。

问题出在服务器上，它能够毫无错误地调用回调，但客户端永远不会收到它。如果在 60 秒内没有回调调用，则有代码尝试再次订阅。它的副作用是它通过调用服务器上的订阅 API 打开一个新连接。在一段时间内，您可以看到服务器上打开了许多 TCP 连接。没有错误，但仍然永远不会调用客户端回调。

## 附加信息

有时会抛出以下错误：

无法在分配的超时时间 00:01:00 内传输消息。可靠通道的传输窗口中没有可用空间。分配给此操作的时间可能是较长超时的一部分。

此外，MaxBufferPoolSize 设置为 Int64.MaxValue，如下面的代码所示

```
var binding = new NetTcpBinding(SecurityMode.Transport, reliableSession);
binding.ReliableSession.Enabled = true;
binding.ReliableSession.InactivityTimeout = TimeSpan.FromDays(1);
binding.ReliableSession.Ordered = true;
binding.CloseTimeout = TimeSpan.FromHours(1);
binding.SendTimeout = TimeSpan.FromHours(1);
binding.ReceiveTimeout = TimeSpan.FromHours(1);
binding.OpenTimeout = TimeSpan.FromHours(1);
binding.ReaderQuotas.MaxDepth = Int32.MaxValue;
binding.ReaderQuotas.MaxStringContentLength = Int32.MaxValue;
binding.ReaderQuotas.MaxArrayLength = Int32.MaxValue;
binding.ReaderQuotas.MaxBytesPerRead = Int32.MaxValue;
binding.ReaderQuotas.MaxNameTableCharCount = Int32.MaxValue;
binding.MaxBufferPoolSize = Int64.MaxValue;
binding.MaxReceivedMessageSize = Int32.MaxValue; 
```

任何建议都会有很大帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:16:30.837

## 最近的发现：

我最近发现客户端的回调根据用户屏幕上的可见内容进行了不同类型的处理。这阻止了要确认的回调。这也解释了缓冲区溢出。与每个客户端处理它们所花费的时间相比，从服务器发送通知的频率非常高。

除了我所做的更改（例如禁用安全性、正确配置超时）之外，以下代码行有很大帮助：

```
 public void OnNotification(AmigoMessage messsage)
    {
        ThreadPool.QueueUserWorkItem((x) => { ProcessNotification(messsage); });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-23T17:14:14.940

看看`[CallbackBehavior(UseSynchronizationContext = false)]`。回调服务上没有此属性将尝试（通常）编组到 UI 线程。

# opencv - 如何在opencv中使用色度键来去除背景

> ID：14938969
> 
> 赞同：1
> 
> 时间：2013-02-18T14:48:30.267
> 
> 标签：opencv, chromakey

我需要开发一种算法来从前景图像中删除背景。我想使用色度键控。这将在实时摄像机流上完成，我需要使用 C++ 中的 OpenCV 来完成。

我认为的算法是这样的：

1.  将网络摄像头的帧捕获到矩阵中
2.  计算 3d rgb 空间图
3.  围绕某个值的点，例如绿色背景的 (10,255,10)。
4.  将绿色区域周围的所有点转换为 0。
5.  其余为 1。
6.  将其与原始图像相乘（卷积）
7.  应该摆脱背景。

我想要一些关于从前景图像中删除纯色背景而不从前景图像中删除颜色的方法的帮助。
是否有一种特殊类型的裁剪功能来去除背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T09:33:37.823

我在 C++ 中使用 OpenCV，但我不完全理解你想要什么，@Seif（对不起我的英语不好）。你想用前景的颜色替换背景中的绿色，并且你被困在“与原始图像相乘（卷积）”吗？您的算法非常正确，但是您必须将绿色设置为角度，圆形...并实现它们，有很多算法可以做到（我正在这样做），否则，我认为除了更改任何绿色之外都是不可能的像素到前景的类似像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:17:58.670

我正在使用 Python 中的 OpenCV。假设您遵循了基本教程，并拥有来自相机的框架和背景图像。一行代码应该可以使用 numpy 的[where](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)函数来解决问题。

```
outputImage = np.where(frame == (10,255,10), background, frame) 
```

现在 outputImage 包含不是绿色的原始帧和绿色的背景图像。正如你所说，你应该使用一些宽容。

# java - 如何使用带有 basicAuth 的 AsyncHttpClient 上传文件？

> ID：14938972
> 
> 赞同：0
> 
> 时间：2013-02-18T14:48:42.217
> 
> 标签：java, android, file-upload, upload, android-async-http

请求必须是 post 类型，当我尝试 AsyncHttpClient 返回我 ClientProtocolException Caused by NonRepeatableRequestException

我的代码：

```
 if (checkIfClientIsReady(act)) {
        try {
            RequestParams params = new RequestParams();
        params.put("name", name);
        params.put("document", file); 
```

// params.put("document", new FileInputStream(file), name, "image/png");

```
 client.post(act, getAbsoluteUrl("/user-documents"), params, new AsyncHttpResponseHandler() {
            @Override
            public void onStart() {
                super.onStart();
                intf.onRequestStart(Constant.REQUEST_BILL_SEND);
            }

            @Override
            public void onFailure(Throwable error, String content) {
                super.onFailure(error, content);
                intf.onRequestFailure(Constant.REQUEST_BILL_SEND, error, content);
            }

            @Override
            public void onSuccess(int statusCode, String content) {
                super.onSuccess(statusCode, content);
                intf.onRequestSuccess(Constant.REQUEST_BILL_SEND, statusCode, content);
            }

            @Override
            public void onFinish() {
                super.onFinish();
                intf.onRequestFinish(Constant.REQUEST_BILL_SEND);
            }
        });
        } catch (FileNotFoundException e) {
            e.printStackTrace();
            DocUtils.loge("bug ici");
        }
    } 
```

# c# - 显示错误输出的代码

> ID：14938977
> 
> 赞同：1
> 
> 时间：2013-02-18T14:48:54.237
> 
> 标签：c#, sorting, insertion-sort

我在 c# 中开发了一个程序，它正在执行“插入排序”，代码获取元素的最大值和元素的值，然后一一显示排序值的步骤。

**代码：**

```
 static void insertionSort(int[] ar)
    {
        for (int i = 1; i < ar.Length; i++)
        {
            int temp = ar[i];
            int j = i - 1;

            while (j >= 0 && ar[j] > temp)
            {
                ar[j + 1] = ar[j];

                foreach (int val in ar)
                    Console.Write(val + " ");
                Console.WriteLine();

                j--;
            }
        }

    }

    static void Main(String[] args)
    {

        int ar_size;
        ar_size = Convert.ToInt32(Console.ReadLine());
        int[] ar = new int[ar_size];
        for (int i = 0; i < ar_size; i++)
        {
            ar[i] = Convert.ToInt32(Console.Read());
        }

        insertionSort(ar);
        Console.ReadKey();
    } 
```

**我提供的示例输入：**

```
5
2 4 6 8 3 
```

**输出：** ![在此处输入图像描述](../Images/17bcad1eff298974944faecf97cded8d.png)

**谁能解释我为什么会这样！**

**任何帮助将不胜感激！:)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:50:55.857

除了排序本身的问题之外，结果中出现奇怪数字的原因是您使用的`Console.Read`非常错误。它返回用户输入的字符的 ASCII 值。此外，它将返回所有输入字符的 ASCII 值，而不仅仅是数字。

因此，第一次调用`Console.Read()`将返回 50（的 ASCII 值`'2'`）。
第二次调用将返回 32（空格的 ASCII 值）。
第三次调用将返回 52（ASCII 值`'4'`）。
等等

要解决此问题，请像这样初始化`ar`：

```
var numbers = Console.ReadLine().Split(' ');
for (int i = 0; i < ar_size; i++)
    ar[i] = Convert.ToInt32(numbers[i]); 
```

请注意，此代码缺少错误处理。在以下情况下会抛出异常：

1.  用户输入了除空格和数字之外的任何内容
2.  用户输入的数字少于他在第一行中指定的数字

# build - 构建道场会留下带有“//>>已构建”的图层文件

> ID：14938979
> 
> 赞同：3
> 
> 时间：2013-02-18T14:49:06.703
> 
> 标签：build, dojo

我正在从 util/buildscripts/build.sh 构建 dojo 并包含我的自定义模块导致层文件（例如 dojo.js）仅包含文本“//>>已构建”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:49:06.703

这个问题在这里讨论并解决了问题

[http://dojo-toolkit.33424.n3.nabble.com/Building-of-1-7-2-custom-module-leaves-some-js-files-empty-td3781592.html](http://dojo-toolkit.33424.n3.nabble.com/Building-of-1-7-2-custom-module-leaves-some-js-files-empty-td3781592.html)

# python - 在 python 中使用 re.sub 捕获替换的文本

> ID：14938982
> 
> 赞同：3
> 
> 时间：2013-02-18T14:49:15.353
> 
> 标签：python, regex, python-2.7

我正在尝试为程序使用`re.sub`. 我无法弄清楚如何将替换的文本捕获到变量中。你们中的任何人都可以帮我做这件事吗？请找到以下代码

```
import re

Report_file = open("report.txt", "w")
st = '''<item><AP>item1</AP><AP>Item2</AP><AP>item3</AP><AP>Item4</AP></item>'''

outval = re.sub(r'(?i)item1', "value1", st)
outval = re.sub(r'(?i)item2', "value2", outval)
outval = re.sub(r'(?i)item3', "value3", outval)  
print outval 
```

我想要以下格式的报告文件

```
OLD: item1
NEW: value1

OLD: item2
NEW: value2

OLD: item3
NEW: value3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T14:52:22.480

您需要使用函数而不是替换模式：

```
def build_replacer(replacement):
    def replace(match):
        print match.group(), replacement
        return replacement
    return replace 
```

然后运行：

```
outval = re.sub(r'(?i)item1', build_replacer("value1"), st)
outval = re.sub(r'(?i)item2', build_replacer("value2"), outval)
outval = re.sub(r'(?i)item3', build_replacer("value3"), outval) 
```

它将打印原始文本并进行替换。

然后给出：

```
>>> st = '''<item><AP>item1</AP><AP>Item2</AP><AP>item3</AP><AP>Item4</AP></item>'''
>>> outval = re.sub(r'(?i)item1', build_replacer("value1"), st)
item1 value1
>>> outval = re.sub(r'(?i)item2', build_replacer("value2"), outval)
Item2 value2
>>> outval = re.sub(r'(?i)item3', build_replacer("value3"), outval)  
item3 value3
>>> outval
'<item><AP>value1</AP><AP>value2</AP><AP>value3</AP><AP>Item4</AP></item>' 
```

当然，您也可以将这些信息存储在其他地方，而不是打印。

该`build_replacer()`函数只返回一个新函数 ，`replace()`它是`re.sub()`在找到匹配项时使用的函数。它不是直接替换匹配的文本，而是询问函数使用什么作为替换文本。

我们`build_replacer()`在这里用作嵌套函数的原因是，我们可以将固定的替换文本存储在某个地方，并一遍又一遍地重复使用相同的替换函数，而无需对替换文本进行硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:31:19.673

在你的问题和答案中，你必须写尽可能多的说明

```
outval = re.sub(r'(?i)item3', .......... ) 
```

因为有需要更换的物品。

如果要替换 56 个项目怎么办？

.

在我的以下解决方案中，有 5 项要替换，但指令
`r.sub(fruiting,text)`只写了一次：

```
text = '''
OR 125
BA  48
Pr 12
ba 4
Cherry 147
Ba   10
Or 7
OR 6
Orange 2
AP 9
PR          3
Banana 101
or 22
pR 13
''' 
```

. 重新进口

```
the_items = ('OR','BA','AP','PR','CH')
new_items = ('Orange','Banana','Apple','Pear','Cherry')
corresp = dict(zip(the_items,new_items))

r = re.compile('(%s) *(\d+)' % '|'.join(the_items),
               re.IGNORECASE)

def fruiting(ma,longname = corresp):
    fresh = '%-12s %s' % (longname[ma.group(1).upper()],
                          ma.group(2) ) 
    tu = ('OLD: %r\n'
          'NEW: %r\n'
          %
          ( ma.group(),fresh) )
    print tu
    return fresh

print '%s%s' % (text, r.sub(fruiting,text)) 
```

结果

```
OLD: 'OR 125'
NEW: 'Orange       125'

OLD: 'BA  48'
NEW: 'Banana       48'

OLD: 'Pr 12'
NEW: 'Pear         12'

OLD: 'ba 4'
NEW: 'Banana       4'

OLD: 'Ba   10'
NEW: 'Banana       10'

OLD: 'Or 7'
NEW: 'Orange       7'

OLD: 'OR 6'
NEW: 'Orange       6'

OLD: 'AP 9'
NEW: 'Apple        9'

OLD: 'PR          3'
NEW: 'Pear         3'

OLD: 'or 22'
NEW: 'Orange       22'

OLD: 'pR 13'
NEW: 'Pear         13' 
```

.

```
OR 125
BA  48
Pr 12
ba 4
Cherry 147
Ba   10
Or 7
OR 6
Orange 2
AP 9
PR          3
Banana 101
or 22
pR 13

Orange       125
Banana       48
Pear         12
Banana       4
Cherry 147
Banana       10
Orange       7
Orange       6
Orange 2
Apple        9
Pear         3
Banana 101
Orange       22
Pear         13 
```

# c# - 访问 LINQ 结果 - 什么是更好的方法？

> ID：14938985
> 
> 赞同：0
> 
> 时间：2013-02-18T14:49:25.053
> 
> 标签：c#, linq

所以我有一组来自我需要使用的 API 调用的数据。我过滤以更正子集并使用下面的代码访问特定字段。有没有更好的方法来获取`currentDate`and `beforeCurrentDate`？

```
DateTime beforeCurrentDate, currDate;

var curr = from c in GlobalResults<FinancialYear>.Results
    where c.IsCurrentYear = true
        select c;

var prev = from c in GlobalResults<FinancialYear>.Results
    where c.ID < curr.FirstOrDefault().ID && c.YearEnd == curr.FirstOrDefault ().YearStart.AddDays(-1)
        select c;

foreach (var cfy in curr)
{
    currDate = cfy.YearEnd;
}

foreach (var pfy in prev)
{
    beforeCurrentDate = pfy.YearStart.AddDays (-1);
} 
```

我知道 foreach 是错误的方式，所以我应该使用什么？

编辑：API 结果包含的是一组日期，其中一个将 IsCurrent 字段设置为 true。我想要 IsCurrent = true 结果的 EndDate 字段，以及前一个结果的 StartDate 字段。StartDate 到 EndDate 期间的前一个 ito。ID 字段没有用，因为可以在当前日期范围之后捕获先前的日期范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:59:44.433

```
var curr = GlobalResults<FinancialYear>.Results.FirstOrDefault(c => c.IsCurrentYear);
var prev = GlobalResults<FinancialYear>.Results.FirstOrDefault(c => c.ID < curr.ID && c.YearEnd == curr.YearStart.AddDays(-1));

var currDate = curr.YearEnd;
var beforeCurrentDate = prev.YearStart.AddDays(-1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:58:54.840

`Last()`您可以通过限制年份并选择替换`foreach`循环来获取财政年度的当前日期：

```
var currYear = GlobalResults<FinancialYear>.Results.Where(p=>p.IsCurrentYear == true).Last();
var currDate = currYear.YearEnd; 
```

同样，您可以使用`currYear`来获取以前的信息：

```
var prevYear =  GlobalResults<FinancialYear>.Results.Where(p=>p.YearEnd == currDate.AddDays(-1)).FirstOrDefault();
var beforeCurrentDate = prevYear.YearStart.AddDays(-1); 
```

# javascript - 使用 val() 获取空值

> ID：14938993
> 
> 赞同：1
> 
> 时间：2013-02-18T14:49:47.170
> 
> 标签：javascript, jquery, html

`<td class="firstRow"> <span id="randomWordToTranslate"></span></td>` 我在`firstRow`该类仅包含css中的填充首选项的行之一中有具有以下ID的表 。

在我的 java 脚本类中，我调用了两个函数，第一个随机分配了一个值给这个 id，所以当我加载我的页面时，我每次都会得到一个不同的词：这部分正在工作 `$("#randomWordToTranslate").html(current_dict[listOfKeys[Math.floor(Math.random() * listOfKeys.length)]]);`

按钮侦听器中的第二个尝试在单击按钮时获取此字段中单词的值

```
var spanishWord = $("#randomWordToTranslate");
var inputValue = $(spanishWord).val(); 
```

但是当我执行 console.log(inputValue) 时，我在日志中打印了一个空行。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T14:51:12.440

由于`<span>`不是`<input>`标签（或其他表单输入，如`<select>`），它不会有`.val()`（值）。相反，您需要`.html()`或`.text()`：

```
var spanishWord = $("#randomWordToTranslate");
var inputValue = spanishWord.text();
// Or:
var inputValue = spanishWord.html(); 
```

# php - 如何在php中获取IP地址的前3部分

> ID：14938994
> 
> 赞同：1
> 
> 时间：2013-02-18T14:49:47.710
> 
> 标签：php

我正在尝试在 php 中获取 IP 地址的前 3 部分。

例如，让我们将 IP 地址视为

```
"1.2.3.4"; 
```

那么我想得到

```
"1.2.3"; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T14:55:03.127

您可以这样做以获得前 3 个部分：

```
$nums = explode(".", "1.2.3.4") ;

echo $nums[0]. "." .$nums[1]. "." .$nums[2] ; 
```

或者你也可以这样做：

```
$ip = "1.2.3.4";
$dotPosition = strrpos($ip, '.'); //getting position of the last dot
echo substr($ip, 0, $dotPosition); //getting the characters until that position. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T14:55:31.987

```
$ip = "1.2.3.4";

echo substr($ip, 0, strrpos($ip, '.')); 
```

输出

> 1.2.3

这用于[`strrpos()`](http://www.php.net/manual/en/function.strrpos.php)查找`.`字符的最后一次出现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T14:52:34.580

```
$nums = explode(".", "1.2.3.4") ;
echo "{$nums[0]}.{$nums[1]}.{$nums[2]}" ; //echoes 1.2.3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T14:57:13.490

```
$ip = "1.2.3.4";

$nums = explode(".",$ip) ;

echo $nums[0].".".$nums[1].".".$nums[2] ; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T15:06:54.113

这是一个函数：

```
function GetFirstThree($ip) {
    if(strlen($ip) <= 10) {
        $pos = strpos($ip, '.', strlen($ip)-3);
    } else {
        $pos = strpos($ip, '.', strlen($ip)-4);
    }
    $ip = substr($ip, 0, $pos);
    $ip = substr($ip, 0, strlen($ip));
    return $ip;
}

echo GetFirstThree("127.0.0.1"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-09T05:29:51.970

```
$ip = "1.2.3.4"
$firstThreeOctetOfIp = implode('.', array_slice(explode('.', $ip), 0, 3)); // "1.2.3" 
```

1.  `explode`获取具有 4 个值的数组的 IP
2.  `array_slice`获取具有所需值的数组
3.  `implode`从最终数组中获取字符串