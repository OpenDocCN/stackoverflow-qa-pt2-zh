# StackOverflow 问答 14889000-14889999

# node.js - 在 Cloud Foundry Node.js 上发送 Gmail SMTP 电子邮件？

> ID：14889002
> 
> 赞同：2
> 
> 时间：2013-02-15T05:48:26.193
> 
> 标签：node.js, smtp, gmail, sendmail, cloud-foundry

我在下面有这段代码，它可以在本地工作，但是当我部署到时`api.cloudfoundry.com`，根本没有发送电子邮件。你能帮我理解为什么吗？是因为 Cloud Foundry 阻止了某些端口吗？

```
var port = (process.env.VMC_APP_PORT || 3000),
    host = (process.env.VCAP_APP_HOST || 'localhost'),
    http = require('http'),
    async = require('async');
var email   = require("emailjs");
var server  = email.server.connect({
   user:    "username", 
   password:"password", 
   host:    "smtp.gmail.com", 
   ssl:     true
});
// send the message and get a callback with an error or details of the message that was sent
http.createServer(function(req, res) {
async.series([
   function(callback){
server.send({
  text:    "This should be <b>BOLD</b>...", 
  from:    "XXX <xxx@gmail.com>", 
  to:      "YYY <yyy@gmail.com>, ZZZ <zzz@gmail.com>",
  cc:      "",
  subject: "emailjs: test HTML body 3",
   attachment: 
   [
      {data:"<h1>Big a$$ title</h1><br/>Or maybe this should be <b>BOLD</b> instead!!", alternative:true}

   ]
}, function(err, message) { console.log(err || message); });
       callback(null, 'success');
   }
],
function(err, results){
 res.writeHead(200, {'Content-Type': 'text/plain'});
 res.write(results + '...');
});
}).listen(port, host); 
```

**更新 1：**

看起来这是一个 gmail SMTP 问题。我做到了`vmc files myapp logs/stdout.log`，它显示：

> { [Error: authorization.failed] code: 3, previous: { [Error: bad response on command 'cGludGVyZXN0'] code: 2, smtp: '535-5.7.1 请使用您的网络浏览器登录，然后重试。在\n535 5.7.1 [https://support.google.com/mail/bin/answer.py?answer=7875](https://support.google.com/mail/bin/answer.py?answer=7875) 4 hn9sm22202393qab.8 - gsmtp\r\n' }, smtp: undefined }了解更多信息

我测试了另一个 SMTP 或不同的 gmail 帐户，它可以工作。所以它特定于我正在测试的这个 gmail 帐户。

然后我点击此链接[https://support.google.com/mail/bin/answer.py?hl=en&answer=78754](https://support.google.com/mail/bin/answer.py?hl=en&answer=78754)授权该应用程序

> 下一步
> 
> 在接下来的十分钟内使用您要授权访问您的帐户的应用程序登录。Google 会在登录后记住该应用程序，并且只要它使用正确的密码，它就会允许它在未来访问您的帐户。

并尝试再次登录，但仍然没有运气。我以为我应该在 gmail 中收到一封电子邮件来批准，但到目前为止还没有:(

**更新 2：**

我尝试使用另一个 gmail 帐户并完成了批准 Cloud Foundry 访问应用程序的步骤，并且它可以正常工作。显然，对于不起作用的帐户，我错过了登录和批准 Cloud Foundry 的“10 分钟窗口”。Gmail 再也没有回来并要求再次批准它。小姐是小姐:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:23:47.793

我刚刚尝试自己将其部署到 Cloud Foundry，它似乎可以工作 - 尽管您的应用程序不向 HTTP 客户端返回任何内容可能不是一个好习惯（在您的最后一个函数中尝试使用 res.end 而不是 res.write ）。

您还应该使用 VCAP_APP_PORT 而不是 VMC_APP_PORT，尽管现在两者都可以使用。

在我的例子中，我还创建了一个包含 async 和 emailjs 依赖项的 package.json 文件，并在本地测试并将应用程序推送到 Cloud Foundry 之前运行了 npm install 和 npm shrinkwrap。

你看到什么错误？您是否检查了服务器端的日志（vmc logs 命令）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-28T09:01:26.593

如果您的应用程序不适用于 google gmail，请使用这两个链接。

[一](https://myaccount.google.com/lesssecureapps)- 允许不太安全的应用程序

[二](https://accounts.google.com/DisplayUnlockCaptcha)- 禁用应用程序和登录的显示验证码

# macos - sed 中的十六进制代码 - 在 OSX 上的行为不符合预期

> ID：14889005
> 
> 赞同：8
> 
> 时间：2013-02-15T05:48:35.717
> 
> 标签：macos, sed, hex

我的问题的答案可能存在于 SO 上，但老实说，我已经努力寻找并找不到它。我得到的最接近的是[这个问答，](https://stackoverflow.com/questions/3435370/stripping-hex-bytes-with-sed-no-match)但我无法在我的机器上重现他们的结果（OSX 10.7.5，使用`bash`）。

这是问题的本质：我无法将（例如for ）`sed`解释为十六进制字符。尤其让我抓狂的是：`\xnn``\x41``A`

```
echo -e '\x41' 
```

结果`A`- 所以操作系统及其功能理解我的十六进制代码......

```
echo -e '\x41' | sed 's/A/B/' 
```

结果- 正如预期的那样，因为十六进制代码在看到它之前`B`被转换为`A``sed`

但

```
echo A | sed 's/\x41/B/' 
```

结果`A`- 我本来期望的`B`

我尝试过类似的事情

```
echo A | LANG='C' sed 's/\x41/B/' 
```

结果是`A`

```
echo A | LANG='' sed 's/\x41/B/' 
```

同上...

```
echo A | sed 's/[\x41]/B/' 
```

结果是`A`

但...

```
echo A | sed 's/[\x41-\x41]/B/' 
```

结果`B`？？？

我完全愚蠢吗？还是真的有什么奇怪的地方`sed`？它显然可以解释一个范围内的十六进制代码，但我不能让它被解释为单个字符。我错过了什么？

请注意 - 我正在寻找既能解释上述行为为何如此的答案，也能*在 OSX 平台上*的字符串中的任何位置插入*单个十六进制代码*的方法。这意味着在“搜索”和命令的“替换”部分。因为我显然已经表明我可以使用 [\xnn-\xnn]; 搜索单个字符；这不是我要找的答案。`sed`*`s/`*

 *提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T07:20:12.033

没有关于“操作系统及其功能理解”的一般概念——每个程序、函数等都理解自己特定的元字符集、转义符等。而且碰巧`sed`不使用十六进制代码。但是 bash 会（如果你要求的话），所以你可以在调用之前让它翻译`sed`它们`$''`：

```
$ echo A | sed $'s/\x41/B/'
B 
```

请注意，这也会在将其他转义序列传递给 之前对其进行解释`sed`，因此如果要将任何转义传递给`sed`，则需要对它们进行双重转义，或切换引号模式，以便只有相关部分位于`$''`：

```
$ echo A | sed $'s/\\(\x41\\)/B\\1/' # double-escapes for sed's escape sequences
BA
$ echo A | sed 's/\('$'\x41''\)/B\1/' # equivalent with different quote modes
BA
$ echo A | sed 's/\(A\)/B\1/' # simplest equivalent version
BA 
```

如果你想解释一个变量而不是常量字符串中的十六进制转义，那么你几乎必须使用 shell 的`printf`内置函数：

```
$ hex=41
$ echo A | sed "s/$(printf "\x$hex")/B/"
B 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T13:46:46.097

@GordonDavisson 给了我尝试另外两件事的灵感……

首先 - 我突然想知道我是否误解了

```
echo A | sed 's/[\x41-\x41]/B/' 
```

我认为这意味着`sed`理解`\xnn`某个范围内的代码，但我错了。当我尝试

```
echo A | sed 's/[\x40-\x40]/B/' 
```

尽管我认为我不再将( ) 包含在该范围内，但我**仍然**得到了输出。显然，是在以某种不同于我预期的方式解释我的范围。通过更仔细地查看页面解决了这个问题。它说`B``A``\x41``sed``man re_format`

> [...] 所有其他特殊字符，包括 `\'，在括号表达式中失去其特殊意义。

但后来我得到了灵感：如果`echo -e`可以扩展字符串，也许我可以用它来喂我想要的字符串`sed`......

```
echo "This?" | sed `echo -e 's/\x54\x68\x69\x73\x3F/\x59\x65\x73\x21/'` 
```

生产`Yes!`

```
echo "That?" | sed `echo -e 's/\x54\x68\x69\x73\x3F/\x59\x65\x73\x21/'` 
```

生产`That?`

当然，在这种情况下，`\xnn`字符只代表纯 ASCII 对字符串进行解码`'s/This?/Yes!/'`，但它确实建立了将十六进制字符插入到字符串中的原则`sed`。这无助于澄清的唯一一件事是“如果您的echo语句打印需要在`sed`. `sed`. 我仍然怀疑这是可能的......在阅读文档后更是如此`sed`（声称使用“旧”正则表达式，尽管 -E 标志可以使其使用“扩展”表达式，并将用户引导到`re_format`手册页有关详细信息；以及由以下人员`re_syntax`引用的页面`re_format`. 在这些之间，看起来确实应该直接添加一个十六进制字符串......

我将此信息添加为我的问题的“答案”而不是“编辑”，因为我相信它*开始*回答我的问题......期待评论！*

# python - 计算python中另一个列表中每个列表项的频率

> ID：14889007
> 
> 赞同：0
> 
> 时间：2013-02-15T05:48:48.560
> 
> 标签：python, python-2.7

我正在尝试获取列表中最后一位数字出现在列表中的频率，并且遇到了很多麻烦。

基本上这是我要创建的功能：

```
>>> ones_digit_histogram([0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181, 6765])
[0.09523809523809523, 0.19047619047619047, 0.047619047619047616, 0.14285714285714285, 0.14285714285714285, 0.14285714285714285, 0, 0.14285714285714285, 0.047619047619047616, 0.047619047619047616] 
```

这就是我到目前为止所拥有的

```
def last_digit(number):
    last_digit = str(number)[-1]
    last_digit = int(last_digit)
    return last_digit

def ones_digit_of_each_list_item(num_list):    
    returned_list = []
    for list_value in num_list:
        returned_list = (returned_list + [last_digit(list_value)])

    return returned_list

print ones_digit_of_each_list_item([123, 32, 234, 34, 22]) 
```

我遇到的麻烦涉及获得以下结果

```
ones_digit_of_each_list_item([123, 32, 234, 34, 22]) 
```

包含在列表中查找出现频率（以百分比的形式）`[123, 32, 234, 34, 22]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:28:40.077

数字的最后一位数字是该数字除以十的余数，因此您可以使用`%`运算符更有效地计算它。

在构建结果列表时，最好`.append()`将新值连接到新列表，而不是连接列表。或者甚至更好地使用列表理解。

```
def last_digit(number):
    return number % 10

def one_digit_of_each_list_number(number_list):
    return [last_digit(number) for number in number_list] 
```

然后，您只需要计算每个数字出现的次数（可能只有十位，所以最好使用列表而不是字典），然后除以项目总数。

```
def ones_digit_histogram(number_list):
    histogram = [0] * 10
    for digit in one_digit_of_each_list_number(number_list):
        histogram[digit] += 1
    return [float(x)/len(number_list) for x in histogram] 
```

然后，例如，您将获得：

```
>>> print ones_digit_histogram([123, 32, 234, 34, 22])
[0.0, 0.0, 0.4, 0.2, 0.4, 0.0, 0.0, 0.0, 0.0, 0.0] 
```

# c# - 在统一 3d 中删除对象的 Box 对撞机

> ID：14889010
> 
> 赞同：5
> 
> 时间：2013-02-15T05:48:54.357
> 
> 标签：c#, object, scripting, unity3d, raycasting

这是我的`Update`函数代码。该对象有一个盒子碰撞器。

```
if (Input.GetMouseButtonDown(0)) { 
    Ray ray = camera.ScreenPointToRay(Input.mousePosition); 
    if (Physics.Raycast (ray, out hit3, 400.0F)) {
        wName = hit3.collider.gameObject.name;
        Destroy(hit3.collider.gameObject);
    }
} 
```

但是盒子对撞机并没有被摧毁。

我怎样才能摧毁它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:59:58.127

它现在使用代码

```
 Destroy(hit3.collider); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:59:09.677

根据[Destroy()](http://docs.unity3d.com/Documentation/ScriptReference/Object.Destroy.html)上的文档， “实际的对象销毁总是延迟到当前更新循环之后，但总是在渲染之前完成。”

这可能是问题吗？如果您在当前的 Update 函数中检查该对象可能尚未被销毁。否则 Destroy() 应该删除该游戏对象的所有组件。

# javascript - Windows Metro 应用程序的功能测试

> ID：14889012
> 
> 赞同：0
> 
> 时间：2013-02-15T05:49:03.120
> 
> 标签：javascript, windows, microsoft-metro, functional-testing

我想在功能上测试一个使用 Javascript 设计的 Windows Metro 应用程序。

我已经进行了一些在线搜索，但找不到任何关于正确处理它的好框架的建议。

目前可用的最佳选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:07:57.360

我可以推荐[Jasmine](http://pivotal.github.com/jasmine/)，但我也听说过很多关于[Mocha](http://visionmedia.github.com/mocha/)的好消息。基本上任何 Javascript 测试框架都应该这样做。如果你想做验收测试，你可以看看[我整理的这个要点](https://gist.github.com/milgner/4154841)，我们使用[Cucumber.js](https://github.com/cucumber/cucumber-js)的修改版本来制定测试。

# jquery - 我没有得到选择字段值

> ID：14889016
> 
> 赞同：2
> 
> 时间：2013-02-15T05:49:19.343
> 
> 标签：jquery, html

这是我的html页面。我没有得到选择标签的价值。它一直在工作，直到我没有添加选择标签。但现在它不起作用。

```
<form id="multi">  
    <div>
        <label>Tag</label>
        <select name="" class="tag">
            <option value="1">India</option>
            <option value="2">Australia</option>
        </select>
        <input class="tag" type="text" name="" value="text" />
        <a href="#" data-action="add">add</a>
        <a href="#" data-action="delete">delete</a>
    </div>
    <input type="submit" value="save" >
</form> 
```

jquery函数是

```
jQuery(function($) {
    var multiTags = $("#multi");
    function handler(e) 
        var jqEl = $(e.currentTarget);
        var tag = jqEl.parent();
        switch (jqEl.attr("data-action")) {
        case "add":
            tag.after(tag.clone().find("input","select").val("").end());
            break;
        case "delete":
            tag.remove();
            break;
        }
        return false;
    }

    function save(e) {
        var tags = multiTags.find("input.tag","select.tag").map(function() {
            return $(this).val();
        }).get().join(',');
        alert(tags);
        return false;
    }

    multiTags.submit(save).find("a").live("click", handler);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:18:17.150

`find`不接受两个参数。改为使用`find('input.tag, select.tag')`。`find('.tag')`也足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:18:44.070

`find`不适用于多个选择器。

只需使用

```
.find(".tag") 
```

[这是一个简化的小提琴](http://jsfiddle.net/66FMD/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T06:08:59.687

您没有获得`select`元素的值，因为它缺少一个`name`属性。

明显地。

```
<select name="I-HAVE-A-NAME-THEREFORE-I-EXIST" class="tag"></select> 
```

这与 JavaScript 或 jQuery 无关。

# git - 如何显示本地分支历史？

> ID：14889017
> 
> 赞同：8
> 
> 时间：2013-02-15T05:49:20.027
> 
> 标签：git

我对 git 很陌生，我想知道如何跟踪分支历史？

例如：

```
echo "update README in branch master" >> README.md
git commit -a -m"commit in branch master"
git checkout -b b1
echo "update README in branch b1" >> README.md
git commit -a -m"commit in branch b1"
git checkout master
git merge b1
git push 
```

那么有人克隆了这个 repo，如何显示分支历史？

```
git log --graph

* commit 4162ecc962aa020ec6294312e4f8eed63ca152d1
| Author: test1 <test1@adsf.com>
| Date:   Fri Feb 15 14:37:43 2013 +0900
|
|     commit in branch b1
|
* commit 08e80fc644fa7ebb374a601e16533a8fc3578f88
| Author: test1 <test1@adsf.com>
| Date:   Fri Feb 15 14:37:04 2013 +0900
|
|     commit in branch master
|
* commit 9d9649cdb409654616798d8feeb516738997e2e0
  Author: test1 <test1@adsf.com>
    Date:   Thu Feb 14 21:33:46 2013 -0800

            Initial commit 
```

我也看到了一些这样的日志：

```
* commit 2f49d77afe0708037eab1de3d216484d01f1c190
| Author: ericz <really.ez@gmail.com>
| Date:   Wed Feb 13 11:45:49 2013 -0800
|
|     readme update
|
*   commit 996214b87cce3473297ed0997ca567497271e05a
|\  Merge: a239b70 5269cd4
| | Author: ericz <really.ez@gmail.com>
| | Date:   Wed Feb 13 11:45:23 2013 -0800
| |
| |     Merge branch 'master' of github.com:peers/peerjs
| |
| * commit 5269cd455f1522e88ab5a15228effe11665e6a89
| | Author: Eric Zhang <really.ez@gmail.com>
| | Date:   Wed Feb 13 09:47:05 2013 -0800
| |
| |     Update README.md
| |
* | commit a239b706f294c469a5c6542ce7e6f5e60417445a
| | Author: ericz <really.ez@gmail.com>
| | Date:   Wed Feb 13 11:45:09 2013 -0800
| |
| |     new exmales
| |
* | commit 0ce560d093637b3a17c7b5f1ab1de3f9c00bb888
|/  Author: ericz <really.ez@gmail.com>
|   Date:   Wed Feb 13 11:02:33 2013 -0800
|
|       simple chat example 
```

这是怎么发生的？

以及如何绘制这样的图表：

```
 D---E-------F
                      /     \       \
                     B---C---G---H---I---J
                    /                     \
                   A-------K---------------L--M 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T06:55:23.677

你在正确的轨道上。尝试使用：

```
git log --graph --all --oneline 
```

这是一个例子：

```
* e96e246 H
| * c12759a G
|/  
*   547058e F
|\  
| * b81eb87 E
* | 26a34db D
| | * 47a536f C
| | * b8fa965 B
| |/  
|/|   
* | cd14ec4 A 
```

我个人在 .gitconfig 中使用了一个别名，

```
[alias]
    graph = log --graph --all --date=short --pretty=format':%C(yellow)%h%Cblue%d%Creset %s %Cgreen %aN, %ad%Creset' 
```

这给出了类似的输出，但更令人敬畏（分支、日期、作者）：

```
* e96e246 (HEAD, master, origin/master) H.  Developer A, 2012-12-13
| * c12759a (branch_2) G.  Developer B, 2012-12-13
|/  
*   547058e F. Developer C, 2012-12-11
|\  
| * b81eb87 E. Developer A, 2012-11-28
* | 26a34db D. Developer C, 2012-12-11
| | * 47a536f (branch_1) C.  Developer B, 2012-10-10
| | * b8fa965 B. Developer B, 2012-10-11
| |/  
|/|   
* | cd14ec4 A. Developer B, 2012-10-10 
```

如果你有能力在 git 中使用 GUI，那么通常强烈建议使用 gitk 来处理这类事情。这是一个[介绍](http://lostechies.com/joshuaflanagan/2010/09/03/use-gitk-to-understand-git/)。

# ios - iOS App Orientation 问题 - 将项目从纵向切换到横向

> ID：14889022
> 
> 赞同：0
> 
> 时间：2013-02-15T05:49:50.343
> 
> 标签：ios, ipad, ios6

我已经用头撞墙了大约两个星期了。我开始了一个项目，该项目最初将是 iPhone 和 iPad 上的肖像。在某个地方，该项目切换到 iPhone 上的 Landscape，然后是 iPad 上的 Landscape。

顺便说一句，该应用程序不应该支持旋转，我希望这只是横向。顺便说一句，它在 iPhone 和 iPad 模拟器（iOS 5 和 6）上都很好用。

在 iPad 上，情况完全不同。主视图控制器通过 xib 加载（就像在 iPhone 上一样），并设置为横向方向。我在模拟器上加载并运行该应用程序，一切正常。我在 iPad 上运行该应用程序，它以纵向模式启动。xib（因为它是横向的），只是在左上角的屏幕上被绘制并被推离边缘。

我在主视图控制器上将模拟指标设置为横向，并将其设置为 1024x768。我已将支持的方向设置为仅横向左和横向右。我已将初始界面方向设置为横向（左主页按钮）。我已经实现`preferredInterfaceOrientationForPresentation`（仅返回`UIInterfaceOrientationMaskLandscapeLeft`）（顺便说一下，基于 NSLog 该函数永远不会被调用）。我已经实现了`supportedInterfaceOrientation`(returning `UIInterfaceMaskOrientationLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight`) （同样，基于`NSLog`也从未被调用过）。

我无计可施。我有点想从头开始这个项目，然后花时间把所有东西重新组合起来。

一定有我遗漏的东西，对吧？

# javascript - jquery.ajax() 查询

> ID：14889023
> 
> 赞同：-1
> 
> 时间：2013-02-15T05:49:51.790
> 
> 标签：javascript, jquery, html, ajax

我想问我是否想使用 Jquery Ajax 从网站获取数值，关于如何开始的任何想法？

我将不胜感激任何建议。谢谢！

问候，

迅速

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:01:15.757

它应该是这样的

```
$.get("/yoururl", function (numberString) {
    var i = parseInt(numberString);
    alert(i);
}); 
```

# html - 在图像悬停时显示播放图标

> ID：14889028
> 
> 赞同：5
> 
> 时间：2013-02-15T05:50:54.587
> 
> 标签：html, css

目标：当我将鼠标悬停在“项目”图像上时，我希望“播放”图像出现在“项目”图像 div 的中心。我做了以下工作：

play.img 与 itemImage.img 重叠

HTML：

```
<div class="itemsContainer">
  <img src="/images/G1.jpg"/>
  <div class="playy">
    <img src="/images/playy.png"/>
  </div>
</div>
<div class="itemsContainer">
  <img src="/images/B1.jpg"/>
  <div class="playy">
    <img src="/images/playy.png"/>
  </div>
</div>
<div class="clear"> 
```

CSS

```
.itemsContainer {
  float: left;
  width : 300px;
  height : 300px;
  margin-left : 2px;
}

.itemsContainer img {
  width : 300px;
  height : 175px;
  margin-bottom : -115px;
  z-index : -1;
}
.play img {
  position : relative;
  width : 50px;
  height : 50px;
  z-index : 100;
  margin : 0 0 50px 125px;
  opacity : 0.0 ;
} 

.itemsContainer img:hover {
  opacity : 0.8;
} 
```

使用上面的代码，“播放”图像仅在我将鼠标悬停在 div.play 上时出现，而我希望在我将鼠标悬停在 .itemContainer.img 上时出现“播放”图像

如何通过将鼠标悬停在 itemImage.img 上来使“播放”图像出现？

参考：[http ://www.itsalif.info/content/show-play-icon-mouse-over-thumbnail-using-css](http://www.itsalif.info/content/show-play-icon-mouse-over-thumbnail-using-css)

出于某种原因，我不想使用“a”标签，我也想知道我做错了什么？

```
http://jsfiddle.net/e6Lav/5/   -- Problem
http://jsfiddle.net/2uJKR/11/  -- Solution 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-15T06:00:41.603

试试这个

**HTML**

```
<div class="itemsContainer">
    <div class="image"> <a href="#">  <img src="#" /> </a></div>
    <div class="play"><img src="#" /> </div>
</div> 
```

**CSS**

```
.itemsContainer {
    background:red; 
    float:left;
    position:relative
}
.itemsContainer:hover .play{display:block}
.play{
  position : absolute;
    display:none;
    top:20%; 
    width:40px;
    margin:0 auto; left:0px;
    right:0px;
    z-index:100
} 
```

**[演示](http://jsfiddle.net/twfJh/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T17:40:51.467

CSS 很好，这个 HTML 可能会更好

`<div class="itemsContainer"> <a href=""><img src=""/></a> <div class="play"> <a href=""><img src="" /></a> </div> </div>`

这也将有助于播放按钮成为一个链接:)

# cordova - Phonegap Blackberry 上的 Java 集成

> ID：14889029
> 
> 赞同：0
> 
> 时间：2013-02-15T05:51:01.270
> 
> 标签：cordova, blackberry, phonegap-plugins, blackberry-webworks

在我的 Phonegap Blackberry 应用程序中，需要集成 Java。我的要求是，在启动画面或加载屏幕之后，我需要一个带有两个按钮（选项）的警报对话框，说是或否。当我单击“是”时，应加载一个 HTML 页面，单击“否”时，应加载另一个 HTML 页面。这是用 Java 完成的流程，请指导我做同样的事情。感谢和问候阿什维尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:47:35.250

用javascript轻松完成。

jQuery版本：

```
var r=confirm("Yes or No?");
if (r==true)
  {
  $('body').load('page1.html');
  }
else
  {
  $('body').load('page2.html');
  } 
```

仅 Javascript 版本：

```
var r=confirm("Yes or No?");
if (r==true)
  {
        var xhr= new XMLHttpRequest();
        xhr.open('GET', 'page1.html', true);
        xhr.onreadystatechange= function() {
            if (this.readyState!==4) return;
            if (this.status!==200) return; // or whatever error handling you want
            document.innerHTML= this.responseText;
        };
        xhr.send();
  }
else
  {
        var xhr= new XMLHttpRequest();
        xhr.open('GET', 'page2.html', true);
        xhr.onreadystatechange= function() {
            if (this.readyState!==4) return;
            if (this.status!==200) return; // or whatever error handling you want
            document.innerHTML= this.responseText;
        };
        xhr.send();
  } 
```

# java - Java XMLBeans 抛出 NoSuchMethod 错误

> ID：14889031
> 
> 赞同：2
> 
> 时间：2013-02-15T05:51:19.103
> 
> 标签：java, xmlbeans

我有以下代码

```
 static {
       wsAuthenticate = WsAuthenticate.Factory.newInstance(); 
    ...
    } 
```

调用

```
public static final SchemaType type = (SchemaType) 
       XmlBeans.typeSystemForClassLoader(WsAuthenticate.class.getClassLoader(), 
           "schemaorg_apache_xmlbeans.system.sDE164C7F4147229ECE15396F7FA5432D")
       .resolveHandle("wsauthenticate751ftype"); 
```

在包含 .xsb 文件的 jar 文件中。我使用了以下 jar 文件

*   xBean1.0.3.jar
*   xmlBeans2.3.0.jar
*   xmlSchema1.4.7.jar

但我面临以下异常：

```
java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlBeans.typeSystemForClassLoader(Ljava/lang/ClassLoader;Ljava/lang/String;)Lorg/apache/xmlbeans/SchemaTypeSystem;
    at com.travis.webservices.WsAuthenticate.<clinit>(WsAuthenticate.java:19)
    at com.travis.webservices.WsAuthenticate$Factory.newInstance(WsAuthenticate.java:119)
    at com.mmi.api.ticketvala.TicketWalaMain.<clinit>(TicketWalaMain.java:64)
Exception in thread "main" 

at : 

   XmlBeans.typeSystemForClassLoader(WsAuthenticate.class.getClassLoader(),       "schemaorg_apache_xmlbeans.system.sDE164C7F4147229ECE15396F7FA5432D").resolveHandle("wsauthenticate751ftype"); 
```

可能是什么原因以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T07:15:23.017

读取 .xlsx 文件时我也遇到了同样的异常

```
org.apache.poi.POIXMLException: java.lang.reflect.InvocationTargetException
Caused By :java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlBeans.typeSystemForClassLoadern 
```

然后我删除了我的旧 xmlbeans-2.0.jar 并放入了包含此方法的最新[xmlbeans-2.3.0.jar ，现在它已解决](http://www.java2s.com/Code/Jar/x/Downloadxmlbeans230jar.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T04:32:00.860

此`typeSystemForClassLoader`方法在 (2.1.0) 版本中引入。查看[javadoc](http://xmlbeans.apache.org/docs/2.1.0/reference/)检查以前的版本，您会发现此方法丢失。

```
<dependency>
    <groupId>xmlbeans</groupId>
    <artifactId>xbean</artifactId>
    <version>2.1.0</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-17T13:20:06.223

添加此依赖项解决了我的问题：

```
 <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>ooxml-schemas</artifactId>
        <version>1.3</version>
    </dependency> 
```

# c# - 如何在 WPF 中加载对象的默认模板？

> ID：14889035
> 
> 赞同：0
> 
> 时间：2013-02-15T05:51:30.320
> 
> 标签：c#, wpf, datatemplate, .net-4.5, resourcedictionary

标题是不言自明的。我一辈子都无法弄清楚如何从 DataTemplateSelector 中为特定对象加载默认模板。

我知道你会问。为什么你需要这样做？如果您将对象绑定到某个东西，WPF 将为您选择该模板！

好吧，简短的回答是：我需要确保返回的每个 DataTemplate 都是模板的新实例。我绑定此模板的控件正在重用它。我正在尝试使用 x:Shared="False" 但控件本身不会尝试再次获取资源，它只是重用它已经拥有的资源。但是，当我使用 DataTemplateSelector 时，每次请求新 UI 时都会调用 SelectTemplate 函数。因此，如果我可以确保此处返回的 DataTemplate 是一个新实例，那么一切都应该很好。

除了，只要我使用默认模板（例如，没有 x:Key="" 属性）。我不知道如何获得该资源。

谢谢。

# php - 带有 php 的谷歌日历 api

> ID：14889040
> 
> 赞同：5
> 
> 时间：2013-02-15T05:51:50.447
> 
> 标签：php, google-calendar-api

我需要集成谷歌日历 API 以在我的 php 网站中显示登录的用户谷歌日历，它与谷歌日历中的所有功能相同，有什么可能的方法吗？目前正在使用此[https://developers.google.com/google-apps/calendar/](https://developers.google.com/google-apps/calendar/) 所以请告诉我您的建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T06:13:54.063

查看一些链接，

[日历 API](http://www.w3.org/TR/calendar-api/#usage-example)

[如何使用 Google API 通过 PHP 访问 Google 日历](http://www.wikihow.com/Access-Google-Calendar-With-PHP-Using-Google-API)

[用于 PHP 的 Google API 客户端库](http://code.google.com/p/google-api-php-client/wiki/Samples)

[将您的 PHP 应用程序与 Google 日历集成](http://www.ibm.com/developerworks/library/x-googleclndr/)

[谷歌日历 API：PHP](http://www.sanisoft.com/blog/2010/04/26/howto-google-calendar-api-php/)

[使用 Google Calendar API 添加/删除事件](http://mark.biek.org/blog/2010/07/addingdeleting-events-with-the-google-calendar-api/)

[add-2-google-cal](http://www.phpclasses.org/package/7420-PHP-Generate-links-to-add-events-to-Google-Calendar.html)

[Google Calendar API 的新 JSON 格式](http://googleappsdeveloper.blogspot.in/2010/09/new-json-format-for-google-calendar-api.html)

可以帮助你。

# ruby-on-rails - 在 ruby /Rails 类内部但在实例方法外部访问实例方法

> ID：14889042
> 
> 赞同：0
> 
> 时间：2013-02-15T05:51:54.703
> 
> 标签：ruby-on-rails, ruby

我正在尝试将活动记录对象关联的计数发送到[redis-object gem](https://github.com/nateware/redis-objects)

```
class Post > ActiveRecord::Base
    has_many :comments

   include Redis::Objects
   value :redis_comment_count, :default => self.comments.count
end 
```

PS：设置 :default => "string" 工作得很好

但这不起作用，因为代码中那个位置的 self （它不在方法定义中）是指 Post 的类定义而不是 post 实例本身。我试图弄清楚这是否有可能做到。

我说得有道理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:11:47.377

你有没有尝试过？

```
value :redis_comment_count, default: -> { self.comments.count} 
```

那是使用 Ruby 1.9 的[新哈希语法](https://stackoverflow.com/questions/11412242/what-are-the-benefits-of-the-new-hash-syntax-in-ruby-1-9)以及 'stab' 或[lambda operator](http://ruby.about.com/od/newinruby191/qt/LambdaOperator.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:58:54.263

不幸的是，看起来您将不得不采取更长的方式为您的评论设置保存回调。我浏览了 gem，它看起来还不支持传递一个用于稍后调用的 proc（请参见[此处](https://github.com/nateware/redis-objects/blob/269252174f95f9a5c81d8e6ca9bb94713e5f6233/lib/redis/value.rb)）。

**顺便说一句**：

除了您调用的是类方法而不是实例方法这一事实之外，在`self.comments.count`加载类时评估，就在您调用时：

```
 value :redis_comment_count, :default => self.comments.count

 # This becomes:
 # value :redis_comment_count, :default => 1  # Example 
```

而不是每次 redis-objects gem 使用`value_options[:default]`.

如果你的类不断被重新加载，这个值将不断被重新评估，就像开发环境的默认设置一样。但是，在我们通常`cache_classes`启用的生产环境中，仅当 Rails 应用程序启动并加载您的模型时才会评估此值。

如果支持，则传递 proc 将起作用。

# css - Safari 和 IE 无法读取 TTF 和 EOT 字体

> ID：14889045
> 
> 赞同：8
> 
> 时间：2013-02-15T05:52:11.110
> 
> 标签：css, safari, cross-browser, font-face, truetype

1.  我在 Safari 中阅读字体时遇到问题。我将 OTF 转换为 TTF - 两种粗体和常规字体。在 Chrome 和 Firefox 中都很好。但在 Safari 中，只有粗体字体有效，常规字体无效。

2.  IE 不读取我从网站转换的 EOT 字体。有没有更好的方法将 OTF 转换为 EOT？

这是我的代码：

```
<style type="text/css">
//Bariol_Bold
@font-face{
    font-family: Bariol_Bold;
    src:url("fonts/bariol_bold.eot"); /*For ie browser*/
}

@font-face{ 
    font-family: Bariol_Bold;
    src:url("fonts/bariol_bold.ttf"); /*For other browsers*/
}

//Bariol_Regular
@font-face{
    font-family:bariol_regular;
    src:url("fonts/bariol_regular.eot"); /*For ie browser*/
}

@font-face{ 
    font-family: bariol_regular;
    src:url("fonts/bariol_regular.ttf"); /*For other browsers*/  
</style>

<p style="font-family: Bariol_Bold; font-size: 20px;">hello world</p>
<p style="font-family: bariol_regular; font-size: 20px;">hello world</p> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T06:10:40.953

您应该检查[Paul Irish 的 Bulletproof `@font-face`Syntax](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)或[FontSpring 的`@font-face`语法](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)，它们需要在不同的文件类型中多次声明相同的字体以服务多个浏览器。

基本声明就像

```
@font-face {
  font-family: 'MyFontFamily';
  src: url('myfont-webfont.eot?#iefix') format('embedded-opentype'), 
   url('myfont-webfont.woff') format('woff'), 
   url('myfont-webfont.ttf')  format('truetype'),
   url('myfont-webfont.svg#svgFontName') format('svg');
} 
```

我也更喜欢[FontSquirrel 的`@font-face`生成器](http://www.fontsquirrel.com/fontface/generator)，但你可以谷歌其他替代品。FontSquirrel 只需要转换一种字体，它将为您提供一个基本`.zip`文件，其中包含必要的字体类型以及生成的字体的示例演示。

# linux - 对子目录中的文件执行程序

> ID：14889052
> 
> 赞同：0
> 
> 时间：2013-02-15T05:53:01.940
> 
> 标签：linux, bash, shell

我在目录中有以下文件架构。

```
 Directory
     /A/abc.xyz
     /B/abc.xyz
     /C/abc.xyz
     /D/abc.xyz
     /E/abc.xyz 
```

我想在每个子目录中的 acb.xyz 上执行一个程序。将输出文件保存在不同的目录中，即在输出文件`Directory/processed`的名称后附加子目录的名称。可以这样写吗？需要更正。

```
for i in `ls "Directory/"`
do
  program.pl $i/abc.xyz > processed/$i-abc.xyz
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:58:53.170

```
for dir in Directory/*; do
    program.pl "$dir/abc.xyz" > "processed/${dir##*/}-abc.xyz"
done 
```

该`${dir##*/}`部分从 中删除前导目录名称`$dir`，因此`Directory/A`变为`A`. 我添加了引号以确保带有空格的目录名称不会引起问题（一个好习惯，即使您知道没有空格）。

作为字符串 munging 的替代方法，如果您首先更改目录，则可以简化此操作：

```
cd Directory

for dir in *; do
    program.pl "$dir/abc.xyz" > "processed/$dir-abc.xyz"
done 
```

# mysql - 在mysql中检索当前年份的一部分

> ID：14889054
> 
> 赞同：6
> 
> 时间：2013-02-15T05:53:25.577
> 
> 标签：mysql, sql, select

我想检索当前年份的最后两位数字-我想从当前年份“2013”​​中检索“13”。帮我为此提供一个合适的查询

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T07:24:11.740

试试这个

```
SELECT DATE_FORMAT(datefield, '%y') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T05:54:17.433

利用`DATE_FORMAT`

```
SELECT DATE_FORMAT(CURDATE(), '%y') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/7491)
*   [MySQL DATE_FORMAT()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:28:43.253

是的，您可以使用 date_format 函数：

```
SELECT DATE_FORMAT(now(), '%y') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T06:00:17.413

结合[Extract 函数](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_extract)和[Substring 函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substr)，如：

```
SELECT Substring(EXTRACT(YEAR FROM '2013-07-02'), 3) 
```

会返回：`13`

# node.js - 带有 Sequelizejs 的 Nodejs 对每个模型使用单独的文件

> ID：14889055
> 
> 赞同：16
> 
> 时间：2013-02-15T05:53:27.647
> 
> 标签：node.js, sequelize.js

这是一个令人尴尬的初学者问题，但我只是想解决我对 Sequelizejs 的担忧。我想将每个模型拆分到自己的文件中，以保持我的源代码井井有条。为了做到这一点，我需要在每个文件`require("sequelize')`的`var sequelize = new Sequelize('DB-Name', 'DB-User', 'DB-Password');`开头。

我的问题是，这会为每个模型创建一个到数据库的新连接，还是会继续重复使用相同的连接？我是否应该放弃“每个文件一个模型”的整个概念而只创建一个主 Models.js 文件？

我对 Node 很陌生，并且仍在习惯它的约定。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T11:30:25.570

每个模型都定义为自己的模块，您可以将其导出：

```
module.exports = function(sequelize, DataTypes){
    return sequelize.define('Brand', {
        name: {
            type: DataTypes.STRING,
            unique: true,
            allowNull: false },
        description: {
            type: DataTypes.TEXT,
            allowNull: false },
        status: {
            type: DataTypes.INTEGER,
            unique: false,
            allowNull: true }
    })
}; 
```

然后在初始化 Sequelize 时简单地导入模块（并且您可以在此处导入许多模型）：

```
var Sequelize = require("sequelize");
var config = require("../../config/config.js");
var sequelize = new Sequelize(config.database, config.username, config.password,
    { dialect: config.dialect, host: config.host, port: config.port,
      omitNull: true, logging: false });
var Brand = require("./Brand").Brand; 
```

[您可以在http://nodejs.org/api/modules.htm](http://nodejs.org/api/modules.htm)阅读有关模块的更多信息，但上面的示例应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-30T09:09:04.520

如果想使用 EcmaScript 6 方法，[这里](http://docs.sequelizejs.com/manual/tutorial/models-definition.html#import)的 Sequelize 文档中有很好的示例说明。

```
// in your server file - e.g. app.js
const Project = sequelize.import(__dirname + "/path/to/models/project")

// The model definition is done in /path/to/models/project.js
// As you might notice, the DataTypes are the very same as explained above
module.exports = (sequelize, DataTypes) => {
  return sequelize.define("project", {
    name: DataTypes.STRING,
    description: DataTypes.TEXT
  })
} 
```

导入方法也可以接受回调作为参数。

```
sequelize.import('project', (sequelize, DataTypes) => {
  return sequelize.define("project", {
    name: DataTypes.STRING,
    description: DataTypes.TEXT
  })
}) 
```

# jquery - Live Droppable UI 元素仅在第二次尝试时接受 Drop

> ID：14889058
> 
> 赞同：0
> 
> 时间：2013-02-15T05:53:36.953
> 
> 标签：jquery, jquery-ui, jquery-ui-droppable

我有通过 Ajax 动态添加到页面的 JQuery UI Droppables。尝试按照指南以实时方式连接 Droppables：

[jQuery UI Droppable：如何让它活起来？](https://stackoverflow.com/questions/3978460/jquery-ui-droppable-how-to-make-it-live/6866437#6866437)

在第一次尝试拖放时，`hoverClass`未连接，放置目标也未注册`Droppable`（放置事件处理程序不会触发）。在随后的尝试中，它按预期工作。

小提琴：http: [//jsfiddle.net/ericjohannsen/ESCN9/](http://jsfiddle.net/ericjohannsen/ESCN9/)

我怎样才能让 drop 功能第一次工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:34:28.940

仅当您将鼠标悬停在“ctFilterDropArea”元素上并启动实时可放置功能时，您的代码才有效。

拖动另一个 div 后，尝试启动 liveDroppable 实现。

JSFiddle：- [http://jsfiddle.net/ESCN9/3/](http://jsfiddle.net/ESCN9/3/)

```
$.fn.liveDroppable = function (opts) {
    if (!$(this).data("ctDropInit")) {
        $(this).data("ctDropInit", true).droppable(opts);
    }
};

$('#dragMe').draggable({
    cursor: "move",
    distance: 20,
    opacity: 0.7,
    helper: 'clone',
    start: startDroppable
});

function startDroppable() {
    $('#ctFilterDropArea').liveDroppable({
        hoverClass: "ctDropHover",
        drop: function (event, ui) {
            alert("Dropped!");
        }
    });
} 
```

# android - 如何删除 在我的解析数据 Dom Parsing

> ID：14889062
> 
> 赞同：0
> 
> 时间：2013-02-15T05:53:49.740
> 
> 标签：android, parsing, dom, xml-parsing

大家好，我的解析数据有问题，似乎这些额外的字母也在解析中，我希望它们删除

如何在我的代码中执行此操作，我将在下面发布。

这是我的 xmlparser.java

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    dbf.setCoalescing(true);
    dbf.setNamespaceAware(true);
    if (dbf.isNamespaceAware()==Boolean.TRUE) {
        dbf.setNamespaceAware(Boolean.FALSE);

    }
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE || child.getNodeType() == Node.CDATA_SECTION_NODE  ){   
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);
        str = str.replaceAll("<br/>"," \n");
        return this.getElementValue(n.item(0));
    }

 public final String getElemementValue2 ( Node elem) {
     Node child;
     if( elem != null) {
         if (elem.hasChildNodes()) {
             for ( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ) {
                 if(child.getNodeType() == Node.CDATA_SECTION_NODE) {
                     return child.getNodeValue();

                 }
             }
         }
     }

    return "";

 }

 public String getValue3(Element item, String str) {
     NodeList n = item.getElementsByTagNameNS("http://purl.org/rss/1.0/modules/content/",str );
     String ses = this.getElemementValue2(n.item(0));

     String mim =ses.replaceAll("(?s)\\<.*?\\>", " \n");

    return mim;

 }

} 
```

这里是 main.java AndroidXMLParsingActivity

```
public class AndroidXMLParsingActivity extends ListActivity {

// All static variables
static final String URL = "https://news.instaforex.com/news";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_PUBDATE = "pubDate";
static final String KEY_DESCRIPTION = "description";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_PUBDATE, parser.getValue(e, KEY_PUBDATE));
        map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_TITLE, KEY_DESCRIPTION, KEY_PUBDATE }, new int[] {
                    R.id.name, R.id.desciption, R.id.cost });

            adapter.setNotifyOnChange(true);
    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String title = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String pubDate = ((TextView) view.findViewById(R.id.cost)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.desciption)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_PUBDATE, pubDate);
            in.putExtra(KEY_DESCRIPTION, description);
            startActivity(in);

        }
    });
}
} 
```

我只是想在描述中解析这些代码，我想在此之前停止解析数据

请查看此[链接](https://news.instaforex.com/news)并检查说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:40:37.487

查看[如何在 Android 中剥离或转义 html 标签](https://stackoverflow.com/questions/6502759/how-to-strip-or-escape-html-tags-in-android)

您可以使用 `Html.fromHtml(stringToEscape).toString();`方法来转义任何您想要的标签。

**编辑：**

尝试通过从 HashMap 获取来传递 pudate 和描述的值，如下所示：

> ```
>  @Override
>   public void onCreate(Bundle savedInstanceState) {
>         super.onCreate(savedInstanceState);
>      setContentView(R.layout.main);
> ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
> XMLParser parser = new XMLParser();
> String xml = parser.getXmlFromUrl(URL); // getting XML
> Document doc = parser.getDomElement(xml); // getting DOM element
> 
> NodeList nl = doc.getElementsByTagName(KEY_ITEM);
> // looping through all item nodes <item>
> for (int i = 0; i < nl.getLength(); i++) {
>     // creating new HashMap
>     HashMap<String, String> map = new HashMap<String, String>();
>     Element e = (Element) nl.item(i);
>     // adding each child node to HashMap key => value
>     map.put(KEY_ID, parser.getValue(e, KEY_ID));
>     map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
>     map.put(KEY_PUBDATE, parser.getValue(e, KEY_PUBDATE));
>     map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));
>     // adding HashList to ArrayList
>     menuItems.add(map);
> }
> 
> // Adding menuItems to ListView
> ListAdapter adapter = new SimpleAdapter(this, menuItems,
>         R.layout.list_item,
>         new String[] { KEY_TITLE, KEY_PUBDATE }, new int[] {
>                 R.id.name, R.id.cost });
> 
> setListAdapter(adapter);
> 
> // selecting single ListView item
> ListView lv = getListView();
> lv.setOnItemClickListener(new OnItemClickListener() {
>     @Override
>     public void onItemClick(AdapterView<?> parent, View view,
>             int position, long id) {
>         String m_pubDate = menuItems.get(position).get(KEY_PUBDATE).toString();
>     String m_description=menuItems.get(position).get(KEY_DESCRIPTION).toString();
> 
> System.out.println("PubDate==>"+m_pubDate+"\n Description===>"+m_description);
>         // Starting new intent
>         Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
>         in.putExtra(KEY_PUBDATE, m_pubDate);
>         in.putExtra(KEY_DESCRIPTION, m_description);
>         startActivity(in);
>     }
>    });
>  } 
> ```

我希望它会帮助你。

谢谢。

# c# - Intranet 上的多租户或多实例应用程序

> ID：14889065
> 
> 赞同：0
> 
> 时间：2013-02-15T05:54:05.547
> 
> 标签：c#, sql, asp.net-mvc

我有一个现有的 MVC 应用程序，它将在不久的将来被另一个用户组使用。现有的和新的用户组/程序都将具有独立的数据。我只是想在表中添加标志以区分两个用户组/程序，并在他们访问应用程序以提取相应数据时进行一些路由。

现在，当涉及到代码定制时，例如，一个组/程序希望在页面上具有第一组不想要的额外字段，或者应用程序的流程在两个用户组之间是分开的。

如果上述两种情况会频繁发生，我是不是应该只做一个新的 web 和数据库实例，而不是为每个程序/用户组自定义代码。这样，我的两个客户/用户组都可以灵活地向应用程序添加不同的逻辑/字段。

我看到的非多租户方法的唯一缺点是开发人员维护两个单独的应用程序所花费的时间。我害怕添加条件逻辑来为每个不同的用户组/程序定制相同的代码库。基础设施成本不是问题。此外，我不认为此应用程序在任何时候都被超过 2 个用户组/程序使用。那么你们认为我应该采取哪种方法，为什么？提前谢谢大家

PS 用户没有任何忍者会试图入侵该网站以查看其他租户的数据。他们是企业用户。他们宁愿不使用这个应用程序，而是使用它的一部分，所以他们必须使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:22:04.843

值得看看微软关于多租户的[文章。](http://msdn.microsoft.com/en-us/library/aa479086.aspx)

我也在尝试设计一个具有这样一个架构的 mvc 应用程序，每个客户端都可以有单独的字段和自定义屏幕。

我得出的结论是，使用支持多租户的 IOC 容器可能会使整个事情变得容易得多。

Autofac 内置了[多租户支持](http://code.google.com/p/autofac/wiki/MultitenantIntegration)。

就每个视图中的客户端逻辑而言，我相信如果你沿着 IOC 路径走，你可以为每个租户拥有一个控制器，在这种情况下，硬编码这样的客户端特定逻辑并不一定像拥有它那样糟糕将所有内容硬编码到共享控制器中。本质上，我相信在为特定租户编写组件时，您可以将思维转变为编写，就好像该租户是唯一使用该系统的人一样。

我用于自定义视图的另一个解决方案是使用[RazorGenerator](http://razorgenerator.codeplex.com)方法的变体来编译视图，我将每个租户视图编译到一个单独的程序集中，并创建了我自己的视图引擎（基于[此](http://razorcontrib.codeplex.com/)），我可以在其中换出我根据路由参数中的值查找视图的程序集。

当然，我仍在探索这种方法，并没有完全清除它以找出它可能不足的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T05:59:17.237

如果 2 个用户的需求差异超过 10% 的屏幕/功能，那么您最好拥有 2 个数据库和应用程序。如果预计少于 10%，那么只需针对功能不同的地方编写单独的操作（可能在操作名称中使用不同的前缀或后缀）。

# objective-c - 在目标 c 中的 uibezier 圆形路径上描边渐变

> ID：14889066
> 
> 赞同：1
> 
> 时间：2013-02-15T05:54:05.017
> 
> 标签：objective-c, xcode, gradient, alpha, uibezierpath

我想用渐变绘制圆形/弧形路径。渐变是单色的，在开始角度颜色的 alpha 值为零，对于结束角度颜色的 alpha 值等于映射在 0-1 之间的点的弧度。

# javascript - 解析 Javascript 生成 HTML 的链接？

> ID：14889071
> 
> 赞同：0
> 
> 时间：2013-02-15T05:54:30.967
> 
> 标签：javascript, html, web-scraping, beautifulsoup

过去，当我使用 BeautifulSoup 和 lxml 来解析网页时，这非常容易，因为链接看起来都是这样的：`<a href="www.website.com">Website</a>`. 但是，我遇到了一些网页，其中链接出现在浏览器中，但没有出现在页面源中。

例如，在[此 Edmunds.com 页面上](http://www.edmunds.com/subaru/brz/2013/long-term-road-test/2013-subaru-brz-its-just-fun-on-a-back-road.html)，该`Past Long-Term Road Tests`部分如下所示：

[`1991 Acura NSX`](http://www.edmunds.com/acura/nsx/1991/long-term-road-test/)
[`2011 Acura TSX Sport Wagon`](http://www.edmunds.com/acura/tsx-sport-wagon/2011/long-term-road-test/)
`...`

* * *

[但是，页面](http://www.edmunds.com/subaru/brz/2013/long-term-road-test/2013-subaru-brz-its-just-fun-on-a-back-road.html)`Past Long Long-Term Road Tests`部分的源代码如下所示：

```
<script type="text/javascript">
PAGESETUP.addControl(function() {
function linksObj(){
var elink = "|acura|nsx|1991|long-term-road-test|"; //generates edmunds.com/acura/nsx/1991/long-term-road-test/
this.link0 = {anchor:elink,label:"1991 Acura NSX"};
var elink = "|acura|tsx-sport-wagon|2011|long-term-road-test|"; //generates edmunds.com/acura/tsx-sport-wagon/1991/long-term-road-test/
this.link1 = {anchor:elink,label:"2011 Acura TSX Sport Wagon"};
...
}
var links_obj = new linksObj();
var links_container = document.getElementById('links_list_offpage2');
var more_link = "";
var more_link_text = "";
var elinks = new EDMUNDS.linksList(links_obj, links_container,more_link, more_link_text);
}, 'low');
</script> 
```

Javascript 行在浏览器中`var elink = "|acura|nsx|1991|long-term-road-test|";`展开。`edmunds.com/acura/nsx/1991/long-term-road-test`

* * *

**BeautifulSoup 和 lxml 等工具无法找到在 Javascript 中生成的链接。如何解析这些链接？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:58:52.120

使用诸如[ghost.py之类的](http://jeanphix.me/Ghost.py/)[无头浏览器](https://stackoverflow.com/questions/814757/headless-internet-browser)来运行页面的 JavaScript，您应该可以毫无问题地抓取 JS 更改的 DOM。

# java - 如何使用存储在 android 设备中的 mupdf 阅读器读取存储在 sdcard 中的 pdf 文件

> ID：14889075
> 
> 赞同：0
> 
> 时间：2013-02-15T05:56:03.873
> 
> 标签：java, android

嗨，我正在制作一个在 android 中从给定 url 读取 pdf 的应用程序，然后将其存储在 sdcard 中，然后使用我的 android 设备中的 mupdf 阅读器打开它。

我的 logcat 中出现以下错误：

日志猫：

```
 02-15 05:47:10.276: E/AndroidRuntime(3134): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ohile.openpdf/com.ohile.openpdf.MainActivity}: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/pdf/Read.pdf typ=application/pdf }
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.os.Handler.dispatchMessage(Handler.java:99)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.os.Looper.loop(Looper.java:137)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.ActivityThread.main(ActivityThread.java:5039)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at java.lang.reflect.Method.invokeNative(Native Method)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at java.lang.reflect.Method.invoke(Method.java:511)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at dalvik.system.NativeStart.main(Native Method)
        02-15 05:47:10.276: E/AndroidRuntime(3134): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/pdf/Read.pdf typ=application/pdf }
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1622)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.Activity.startActivityForResult(Activity.java:3370)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.Activity.startActivityForResult(Activity.java:3331)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.Activity.startActivity(Activity.java:3566)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.Activity.startActivity(Activity.java:3534)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at com.ohile.openpdf.MainActivity.showPdf(MainActivity.java:46)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at com.ohile.openpdf.MainActivity.onCreate(MainActivity.java:32)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.Activity.performCreate(Activity.java:5104)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
        02-15 05:47:10.276: E/AndroidRuntime(3134):     ... 11 more 
```

我写了以下java代码：

**下载文件.java **

```
public class DownloadFile {
    public static void downloadFile(String fileUrl, File directory)  {
        try {
            FileOutputStream f = new FileOutputStream(directory);
            URL u = new URL(fileUrl);
            HttpURLConnection c = (HttpURLConnection) u.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();
            InputStream in = c.getInputStream();
            byte []buffer = new byte[1024];
            int len = 0;
            while((len = in.read(buffer))>0) {
                f.write(buffer,0,len);
            }
            f.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

**MainActivity.java**

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String extStorageDirectory = Environment.getExternalStorageDirectory()
                .toString();
        File folder = new File(extStorageDirectory, "pdf");
        folder.mkdir();
        File file = new File(folder, "Read.pdf");
        try {
            file.createNewFile();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        DownloadFile.downloadFile("http://14.140.41.194/monali/i.pdf",
                file);

        showPdf();
    }

     public void showPdf()
     {
         File file = new File(Environment.getExternalStorageDirectory()+"/pdf/Read.pdf");
         PackageManager packageManager = getPackageManager();
         Intent testIntent = new Intent(Intent.ACTION_VIEW);
         testIntent.setType("application/pdf");
         List list = packageManager.queryIntentActivities(testIntent, PackageManager.MATCH_DEFAULT_ONLY);
         Intent intent = new Intent();
         intent.setAction(Intent.ACTION_VIEW);
         Uri uri = Uri.fromFile(file);
         intent.setDataAndType(uri, "application/pdf");
         startActivity(intent);
     }
} 
```

有人可以帮我找出我的代码中的错误在哪里。？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:09:00.077

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(
                Uri.parse("file://" + getFilesDir() + "/example.pdf"),
                "application/pdf");

        startActivity(intent);
    } 
```

# java - IOUtils.closeQuitely 用于 FileChannel

> ID：14889083
> 
> 赞同：0
> 
> 时间：2013-02-15T05:57:19.087
> 
> 标签：java, io, filechannel

我想知道 Apache 库方法 IOUtils.close 非常适合 FileChannel。我看到它需要 Closeable 作为参数，并且 FileChannel 确实在层次结构中实现了它。但是我们能不能面对任何问题。任何经验都可以分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:10:55.553

我认为如果我们按照 IOUtils.closeQuietly API 的建议使用它就可以了，即双重关闭

```
 FileChannel ch = null;
    try {
        ch = new FileInputStream("foo.txt").getChannel();
        // process
        ch.close();
    } catch (Exception e) {
        // error handling
    } finally {
        IOUtils.closeQuietly(ch);
    } 
```

但是如果 Java 7 可用，则使用资源尝试是一种更清洁的方法。

# javascript - javascript Uncaught TypeError：无法调用 null 的方法“getElementsByTagName”

> ID：14889088
> 
> 赞同：1
> 
> 时间：2013-02-15T05:57:53.653
> 
> 标签：javascript, xml, jquery

在`Prestashop`我使用字母搜索模块。当我在我的 prestashop 主题上安装模块时，`(1.5.0.17)`我收到了一个错误，例如

```
Uncaught TypeError: Cannot call method 'getElementsByTagName' of null 
```

这是jQuery文件的代码

```
function initXMLHTTPRequest()
{
var xmlHttp = null;
  try 
  {
    // Firefox, Opera 8.0+, Safari
    xmlHttp = new XMLHttpRequest();
    }
    catch (e)
     {
           // Internet Explorer
            try 
            {
                xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
            }catch (e)
             {
                xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
       }
     return xmlHttp;
}
function getProdList(id,langid)
{
    var xmlHttp=initXMLHTTPRequest();
    var str = "value="+id+"&langid="+langid;
    var span="";
    var url = "modules/alphabetsearch/PHP/searchDetails.php?";
        xmlHttp.onreadystatechange=function()
        {
                  if(xmlHttp.readyState==4 )
                  {
                      span=span+"<ul style='padding-bottom:20px;'><li><b>"+id+"</b></li>";
                      var xmldata=xmlHttp.responseXML;
                      var xmlObj = xmldata.getElementsByTagName("ProductDetails")[0];
                      var menusize= xmlObj.childNodes[0].childNodes[0].childNodes[0].nodeValue;
                      var xmlObjlength = xmlObj.childNodes.length;
                      for(var i=1;i<xmlObjlength;i++)
                        {
                        var ProductName=xmlObj.childNodes[i].childNodes[0].childNodes[0].nodeValue;
                        var productId=xmlObj.childNodes[i].childNodes[1].childNodes[0].nodeValue;
                        span=span+"<li  style='line-height:20px;display:block;height:20px;list-style:none;border-bottom:1px solid #666666;'><a href='product.php?id_product="+productId+"'><div>"+ProductName+"</div></a></li>"
                        }
                        if(xmlObjlength==1)
                        {
                            document.getElementById("products").innerHTML="";
                            document.getElementById("products").innerHTML="No Products Under this Alphabet";
                        }
                        else{
                        document.getElementById("products").innerHTML="";
                        span=span+"</ul>";
                        document.getElementById("products").innerHTML=span;
                        }
                  }
        };
         xmlHttp.open("POST",url,true); 
         xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
         xmlHttp.setRequestHeader("Content-length", str.length);
         xmlHttp.setRequestHeader("Connection", "close");
         xmlHttp.send(str);
} 
```

有人可以告诉我如何解决这个问题吗？任何帮助和建议都会非常明显。谢谢

现场可以在[这里找到](http://www.secretperfumes.com/)

# android - android将电子邮件附件下载到SD

> ID：14889089
> 
> 赞同：1
> 
> 时间：2013-02-15T05:57:53.923
> 
> 标签：android, email, email-attachments

我已经阅读了很多关于 android 电子邮件的博客和论坛...我现在的目标是从***POP3 邮件服务器*下载收到的电子邮件...**有大量的信息如何发送电子邮件，**但**同时几乎**没有**关于如何以编程方式**接收**带有附件的电子邮件并将附件保存在***SD 卡***上的信息...

请，任何帮助表示赞赏！

例如，最接近的含义是... [Android：正确下载/保存电子邮件附件](https://stackoverflow.com/questions/6872991/android-correctly-downloading-saving-an-email-attachement)

这段代码在java中的PC上工作！！！

```
 package com.tsysv.mail;
    import java.io.IOException;
    import java.util.Properties;
    import javax.mail.Folder;
    import javax.mail.Message;
    import javax.mail.MessagingException;
    import javax.mail.NoSuchProviderException;
    import javax.mail.Session;
    import com.sun.mail.pop3.POP3Store;
    public class EmailReceiveTest {

public static void main(String[] args) {

    String mailPop3Host = "pop3.***.**";
    String mailStoreType = "pop3";
    String mailUser = "*****";
    String mailPassword = "******";

    receiveEmail(mailPop3Host, mailStoreType, mailUser, mailPassword);
}

public static void receiveEmail(String pop3Host, String storeType, String user, String password) {

    try {
        Properties properties = new Properties();
        properties.put("mail.pop3.host", pop3Host);
        Session emailSession = Session.getDefaultInstance(properties);

        POP3Store emailStore = (POP3Store) emailSession.getStore(storeType);
        emailStore.connect(user, password);

        Folder emailFolder = emailStore.getFolder("INBOX");
        emailFolder.open(Folder.READ_ONLY);

        Message[] messages = emailFolder.getMessages();
        for (int i = 0; i < messages.length; i++) {
            Message message = messages[i];
            System.out.println("==============================");
            System.out.println("Email #" + (i + 1));
            System.out.println("Subject: " + message.getSubject());
            System.out.println("From: " + message.getFrom()[0]);
            System.out.println("Text: " + message.getContent().toString());
        }

        emailFolder.close(false);
        emailStore.close();
    } catch (NoSuchProviderException e) {
        e.printStackTrace();
    } catch (MessagingException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}
} 
```

但是在 Android 上实现它会在 StackTrace 中出现这样的错误......

```
 02-15 10:21:55.044: W/System.err(2687): javax.mail.MessagingException: Connect failed;
    02-15 10:21:55.044: W/System.err(2687):   nested exception is:
    02-15 10:21:55.044: W/System.err(2687):     java.net.SocketException: Permission denied
    02-15 10:21:55.044: W/System.err(2687):     at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:176)
    02-15 10:21:55.054: W/System.err(2687):     at javax.mail.Service.connect(Service.java:291)
    02-15 10:21:55.054: W/System.err(2687):     at javax.mail.Service.connect(Service.java:172)
    02-15 10:21:55.054: W/System.err(2687):     at javax.mail.Service.connect(Service.java:192)
    02-15 10:21:55.054: W/System.err(2687):     at m.tsysv.pop3mail.MainActivity.receiveEmail(MainActivity.java:67)
    02-15 10:21:55.054: W/System.err(2687):     at m.tsysv.pop3mail.MainActivity$1.onClick(MainActivity.java:53)
    02-15 10:21:55.054: W/System.err(2687):     at android.view.View.performClick(View.java:2408)
    02-15 10:21:55.054: W/System.err(2687):     at android.view.View$PerformClick.run(View.java:8817)
    02-15 10:21:55.054: W/System.err(2687):     at android.os.Handler.handleCallback(Handler.java:587)
    02-15 10:21:55.054: W/System.err(2687):     at android.os.Handler.dispatchMessage(Handler.java:92)
    02-15 10:21:55.054: W/System.err(2687):     at android.os.Looper.loop(Looper.java:144)
    02-15 10:21:55.054: W/System.err(2687):     at android.app.ActivityThread.main(ActivityThread.java:4937)
    02-15 10:21:55.054: W/System.err(2687):     at java.lang.reflect.Method.invokeNative(Native Method)
    02-15 10:21:55.054: W/System.err(2687):     at java.lang.reflect.Method.invoke(Method.java:521)
    02-15 10:21:55.054: W/System.err(2687):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    02-15 10:21:55.054: W/System.err(2687):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    02-15 10:21:55.054: W/System.err(2687):     at dalvik.system.NativeStart.main(Native Method)
    02-15 10:21:55.054: W/System.err(2687): Caused by: java.net.SocketException: Permission denied
    02-15 10:21:55.064: W/System.err(2687):     at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocketImpl(Native Method)
    02-15 10:21:55.064: W/System.err(2687):     at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocket(OSNetworkSystem.java:186)
    02-15 10:21:55.064: W/System.err(2687):     at org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:265)
    02-15 10:21:55.064: W/System.err(2687):     at java.net.Socket.checkClosedAndCreate(Socket.java:873)
    02-15 10:21:55.064: W/System.err(2687):     at java.net.Socket.connect(Socket.java:1020)
    02-15 10:21:55.064: W/System.err(2687):     at java.net.Socket.connect(Socket.java:997)
    02-15 10:21:55.064: W/System.err(2687):     at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:284)
    02-15 10:21:55.064: W/System.err(2687):     at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:227)
    02-15 10:21:55.064: W/System.err(2687):     at com.sun.mail.pop3.Protocol.<init>(Protocol.java:98)
    02-15 10:21:55.064: W/System.err(2687):     at com.sun.mail.pop3.POP3Store.getPort(POP3Store.java:227)
    02-15 10:21:55.064: W/System.err(2687):     at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:172)
    02-15 10:21:55.064: W/System.err(2687):     ... 16 more 
```

# html - 试图在页面上居中固定菜单 div

> ID：14889090
> 
> 赞同：2
> 
> 时间：2013-02-15T05:58:04.480
> 
> 标签：html, css, center

我尝试了一些不同的规则，但我可以让我的顶部菜单居中。当我将位置更改为绝对或相对时，它确实会到达中心，但由于某种原因，高度会变为 100%。我没有设定高度，因为我希望五个孩子的大小。

这是HTML：

```
<div id="topWrapper">
    <a href="index.html">
        <header id="top_header">
            <h1>MacroPlay Games</h1>
        </header>
    </a>
    <nav id="topnav">
        <ul>
            <a href="index.html"><li>Home</li></a>
            <a href="about.html"><li>About</li></a>
            <a href="video.html"><li>Trailers</li></a>
        </ul>
    </nav>   
</div> 
```

CSS：

```
#topWrapper {
    border:1px solid #00ffff;
    background-color:#0d0d0d;
    text-align:center;
    position:fixed;
    z-index:9999;
    width: 850px;
    margin: 0px auto;
    float:clear;
} 
```

小提琴：http: [//jsfiddle.net/kjAAy/](http://jsfiddle.net/kjAAy/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T06:02:25.033

添加`margin:0 auto`与`left:0px; right:0px`

```
#topWrapper {
    border:1px solid #00ffff;
    background-color:#0d0d0d;
    text-align:center;
    position:fixed;
    z-index:9999;
    width: 850px;
    margin: 0 auto; left:0px; right:0px;
    float:clear;
} 
```

**[演示](http://jsfiddle.net/kjAAy/1/)**

同样的方法甚至适用于`position:absolute`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-07T12:44:17.960

我注意到原始代码中的一个小错误以及来自 Sowmya 的最流行响应的代码。

更具体地说，有问题的属性是“float: clear;”，据我所知，没有“float: clear;”这样的东西。

不幸的是，由于我刚刚创建了这个帐户，我无法更正错误或回复该帖子。这就是我创建一个新帖子的原因。

您可以在此处查看 W3C 的浮动 CSS 属性：http: [//www.w3.org/wiki/CSS/Properties/float](http://www.w3.org/wiki/CSS/Properties/float)

列出的值是“左 | 右 | 无 | 继承”

感谢收听！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:19:40.503

```
Position="fixed" is not recommended though.
<div id="someid" align="center">
 --whatever code--
</div> 
```

这样就可以了。我建议你应该阅读位置标签的目的。 [http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T06:23:44.440

或者你可以使用：

> ```
> border:1px solid #00ffff;
> background-color:#0d0d0d;
> text-align:center;
> position:fixed;
> z-index: 9999;
> width: 850px;
> float: clear;
> left: 50%; /* position halfway from the left of screen */    
> margin: 0px 0px -425px 0px; /* pull the div into center */ } 
> ```

小提琴：http: [//jsfiddle.net/zXFdN/3/](http://jsfiddle.net/zXFdN/3/)

HTML5 不支持 ps align="center"：http: [//www.w3schools.com/tags/att_div_align.asp](http://www.w3schools.com/tags/att_div_align.asp)

# android - 无法为安卓创建模拟器

> ID：14889094
> 
> 赞同：-2
> 
> 时间：2013-02-15T05:58:20.203
> 
> 标签：android, android-emulator

我正在尝试通过从工具文件夹中选择 emulator-x86.exe 来创建模拟器。每当我创建时，我都会收到以下错误，并且没有创建模拟器。问题是什么？

> Ant 构建错误=执行失败：java.io.IOException：无法运行程序“${emulator.dir}\android.bat”（在目录“ECLIPSE_PATH\configuration\org.eclipse.osgi\bundles\370\1.cp\ emulators\android"):CreateProcess error=2, 系统找不到指定的文件

请朋友帮帮我

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-15T06:01:49.293

您可以按照本[教程](http://mobile.tutsplus.com/tutorials/android/common-android-virtual-device-configurations/)或这样做

```
hw.lcd.density=252
sdcard.size=32M
skin.name=NEXUS-ONE
skin.path=platforms/android-10/skins/NEXUS-ONE
hw.cpu.arch=arm
hw.keyboard.lid=no
abi.type=armeabi
hw.keyboard=no
vm.heapSize=24
hw.ramSize=256
image.sysdir.1=platforms/android-10/images/ 
```

# .net - 为什么 BinaryFormatter 被命名为 tha 而不是 BinarySerializer？

> ID：14889099
> 
> 赞同：-1
> 
> 时间：2013-02-15T05:58:49.107
> 
> 标签：.net, serialization

我是序列化的新手。我有一个愚蠢的问题：为什么 BinaryFormatter 被命名为 BinaryFormatter 而不是 BinarySerializer？

更具体地说，如果它正在进行序列化，为什么不将其称为 BinarySerializer ？除了数据序列化之外，它还能做什么，它应该被称为格式化程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:06:54.967

为什么*不*呢？为什么会有`BinarySerializer`更好的名字？

我不参与 API 设计团队的审议，但我怀疑它被称为“格式化程序”，因为它格式化从字节流中检索或推送的数据。在序列化和反序列化数据时，您可以使用格式化程序作为帮助对象。

另请注意，有一个[`SoapFormatter`类](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.soap.soapformatter.aspx)遵循相同的命名方案，并且这两个类都定义在[`System.Runtime.Serialization.Formatters`namespace](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.aspx)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:21:28.560

我个人同意你的看法——它至少会与`XmlSerializer`, 和（后来的）`DataContractSerializer`,`JavaScriptSerializer`等更一致。也许他们觉得它不同，因为它用于远程处理，但最终它所做的是序列化和反序列化。

然而：*命名东西是困难的*。也许就这么简单。

# jquery - jQuery Validation 插件在密码旁边显示成功/失败图像

> ID：14889103
> 
> 赞同：2
> 
> 时间：2013-02-15T05:58:59.530
> 
> 标签：jquery, jquery-validate

我正在使用验证插件使用 jQuery 表单验证。我已经用至少 7 个字符和一个大写字母和 oe 数字验证了密码。同时，当我发现密码有效时，需要在文本字段附近显示正确的图像。否则图片错误。

```
jQuery.validator.addMethod('mypassword', function(value, element) {
        return this.optional(element) || (value.match(/[A-Z]/) && value.match(/[0-9]/));
    },
    'Password must contain at least one capital and one number.');

    jQuery("#loanRequestDetailsForm").validate({
        ignore: "",
        rules : {

        password: {
                required: true,
                minlength: 7,
                mypassword :true
            },
            confirmpassword: {
                required: true,
                minlength: 7,
                equalTo: "#password"
            }

        },
        messages : {

            password : {
                required:"Please provide a password",
                minlength:"Your password must be at least 7 characters long"    
            },  
            confirmpassword : {
                required:"Please provide a password",
                minlength:"Your password must be at least 7 characters long",
                equalTo: "Please enter the same password as above"
            }

        }
    }); 
```

显示图像的任何想法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T18:13:05.340

将[`errorPlacement`、`success`和回调函数`highlight`与`unhighlight`](http://docs.jquery.com/Plugins/Validation/validate#toptions)CSS结合使用`class`。以下看起来很冗长，但它是为了只显示密码字段旁边的图像。*如果您想在所有*字段旁边显示图像，则可以大大简化它。

**CSS**：

```
.passError {
    background: url("bad.gif") no-repeat 0px 0px;
}
.passValid {
    background: url("good.gif") no-repeat 0px 0px;
} 
```

**HTML**：

```
<input type="text" class="pw" name="password" id="password" />
<input type="text" class="pw" name="confirmpassword" /> 
```

**jQuery** :

```
$(document).ready(function () {

    jQuery.validator.addMethod('mypassword', function (value, element) {
        return this.optional(element) || (value.match(/[A-Z]/) && value.match(/[0-9]/));
    }, 'Password must contain at least one capital and one number.');

    $('#loanRequestDetailsForm').validate({ // initialize the plugin
        errorPlacement: function (error, element) {
            error.insertAfter(element);
            if (element.hasClass('pw')) {
                element.next().removeClass('passValid').addClass('passError');
            }
        },
        success: function (label) {
            if (label.prev().hasClass('pw')) {
                label.text("ok!");
            }
        },
        highlight: function (element, errorClass, validClass) {
            if ($(element).hasClass('pw')) {
                $(element).next().removeClass('passValid').addClass('passError');
            } else {
                $(element).addClass(errorClass).removeClass(validClass);
            }
        },
        unhighlight: function (element, errorClass, validClass) {
            if ($(element).hasClass('pw')) {
                $(element).next().removeClass('passError').addClass('passValid');
            } else {
                $(element).removeClass(errorClass).addClass(validClass);
            }
        },
        rules: {
            password: {
                required: true,
                minlength: 7,
                mypassword: true
            },
            confirmpassword: {
                required: true,
                //minlength: 7, // <- redundant
                equalTo: "#password"
            }
        },
        messages: {
            password: {
                required: "Please provide a password",
                // use the placeholder {0} to automatically insert rule val
                minlength: "Your password must be at least {0} characters long"
            },
            confirmpassword: {
                required: "Please provide a password",
                equalTo: "Please enter the same password as above"
            }
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/jtmDY/](http://jsfiddle.net/jtmDY/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T09:14:37.367

在此处显示错误时，有一个使用图像的好例子

[http://jquery.bassistance.de/validate/demo/custom-methods-demo.html](http://jquery.bassistance.de/validate/demo/custom-methods-demo.html)

它使用这个 css 来处理错误的图像

```
em.error {
  background:url("images/unchecked.gif") no-repeat 0px 0px;
  padding-left: 16px;
} 
```

注意这个例子已经设置

```
errorElement: "em" 
```

所以css可以工作，但是查看源代码并尝试一下

# java - Java 类构造函数错误

> ID：14889104
> 
> 赞同：1
> 
> 时间：2013-02-15T05:59:12.453
> 
> 标签：java, user-interface

我正在构建自己的 GUI，它将以列表形式显示朋友对象的列表。我遇到的第一个问题是，当我在没有构造函数的情况下运行代码时，一切正常。但是当我为我的 GUI 类创建一个构造函数时，会显示错误消息：

```
load: GUIapp.class is not public or has no public constructor.
java.lang.IllegalAccessException: Class sun.applet.AppletPanel can not access a member of             class GUIapp with modifiers ""
at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:65)
at java.lang.Class.newInstance0(Class.java:349)
at java.lang.Class.newInstance(Class.java:308)
at sun.applet.AppletPanel.createApplet(AppletPanel.java:807)
at sun.applet.AppletPanel.runLoader(AppletPanel.java:714)
at sun.applet.AppletPanel.run(AppletPanel.java:368)
at java.lang.Thread.run(Thread.java:680) 
```

我的代码：

```
public class GUIapp extends JApplet{

/*
 * Attributes
 */

//** Friends Objects**//
private FriendsGroup a;
private ArrayList<friends> friendList;

//** PANEL **//
private JPanel outerPanel;

//** Button **//
private JButton button1;

/*
 * Constructor for Getting all the friends set up
 */

private GUIapp(){
    a = null;  //initialize variable

    try {
        a = new FriendsGroup("friends.txt"); //import friend list
    } catch (IOException e) {
        System.out.println("Fail Import.");
    }

    friendList = a.getFriendsGroup(); //return an arrayList of Friends Object
}

/*
 * Create Stuff
 */
public void createStuff() {
    outerPanel = new JPanel(); //create outer panel
    button1 = new JButton("Click Me");
    outerPanel.add(button1,BorderLayout.SOUTH);
}

/*
 * Initialize Stuff
 * 
 */
public void init(){
    createStuff(); //initialize create stuff

    this.add (outerPanel); 
}
} 
```

在上面的代码中，如果你取出构造函数，它似乎可以完美地工作。我的问题是，代码有什么问题？为什么我似乎不能创建一个构造函数来首先加载数据？

我的第二个问题是我将如何创建一个面板来显示朋友姓名列表？这些名称被导入并存储在名为friendList 的朋友对象的arraylist 中，该对象存储在构造函数中。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:42:37.453

当您自己定义构造函数时，编译器不会创建默认构造函数，因为您定义的构造函数是私有的，您将没有公共构造函数

所以只需创建一个公共构造函数

```
public GUIapp(){
    // your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:01:00.463

因为您定义构造函数`private`将其更改为；

```
public GUIapp(){
    a = null;  //initialize variable

    try {
        a = new FriendsGroup("friends.txt"); //import friend list
    } catch (IOException e) {
        System.out.println("Fail Import.");
    }

    friendList = a.getFriendsGroup(); //return an arrayList of Friends Object
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:04:20.647

问题是这样的：`private GUIapp(){`。这意味着您的构造函数仅对该类可用。通常构造函数是`public`，尽管确实存在例外，其中的例子可能是[Singleton Pattern](http://en.wikipedia.org/wiki/Singleton_pattern)。

删除构造函数是可行的，因为每个类默认都有一个无参数的构造函数。查看[本](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)教程以获取有关访问修饰符的更多信息。

或者，你可以在你的`GUIapp`类中有这样的方法：

`public static GUIapp getInstance() { return new GUIapp(); }`

你从你的主类中调用它，但我认为在这种情况下，将你的构造函数从更改`private`为`public`应该就足够了。

关于您的第二个问题，[本](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)教程应该会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T06:16:11.960

您需要将 syour 构造函数更改为 public 并调试为：

```
a.getFriendsGroup(); 
```

它不清楚这个方法做了什么，我假设由于某种原因（可能文件中的列表是空的）方法试图访问导致空引用异常的未分配对象，尝试调试到方法中以查看发生的位置或发布方法的代码。

# node.js - 在 Emacs nodejs 模式下获取垃圾提示

> ID：14889113
> 
> 赞同：6
> 
> 时间：2013-02-15T06:00:09.543
> 
> 标签：node.js, shell, emacs, read-eval-print-loop

我使用`nodejs-mode`on `Emacs 24`，但是当我输入：

```
M-x nodejs 
```

它提示垃圾提示`[0J>`，现在即使我在下面添加了

```
(setq ansi-color-for-comint-mode t) 
```

在`emacs`文件中。它仍然无法正常工作。

都是一样的，如果我输入`node`directory on `Emacs shell-mode`，那么我会得到一个更烦人的提示，如下所示：

```
ryu@ryu:~$ node
[1G[0J> [3G 
```

有谁知道它为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:37:12.007

最后我放弃了使用 nodejs-mode 进行交互。然后参考[这里](https://stackoverflow.com/questions/13862471/using-node-js-with-js-comint-in-emacs)

# wcf - 如何在 WCF 4.5 中使用 IHttpCookieContainerManager

> ID：14889118
> 
> 赞同：1
> 
> 时间：2013-02-15T06:00:22.567
> 
> 标签：wcf

只是想知道我们如何在 WCF 4.5 中使用 IHttpCookieContainerManager。请建议任何示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:00:43.757

在 .NET 4.5 中，如果 AllowCoookies = true，您可以使用 .GetProperty().CookieContainer 方法访问 cookie 容器，如下所示。

```
 Uri serverUri = new Uri("http://localhost/WcfService/Service1.svc");
        CookieContainer myCookieContainer = new CookieContainer();
        myCookieContainer.Add(serverUri, new Cookie("cookie1", "cookie1Value"));

        ChannelFactory<IService1> factory = new ChannelFactory<IService1>(new BasicHttpBinding() { AllowCookies = true }, new EndpointAddress(serverUri));
        IService1 client = factory.CreateChannel();
        factory.GetProperty<IHttpCookieContainerManager>().CookieContainer = myCookieContainer;

        Console.WriteLine(client.GetData(123));

        myCookieContainer = factory.GetProperty<IHttpCookieContainerManager>().CookieContainer;
        foreach (Cookie receivedCookie in myCookieContainer.GetCookies(serverUri))
        {
            Console.WriteLine("Cookie name : " + receivedCookie.Name + " Cookie value : " + receivedCookie.Value);
        }

        ((IChannel)client).Close();
        factory.Close(); 
```

//服务器端

```
public class Service1 : IService1
   {
    public string GetData(int value)
    {
        //Read the cookies
        HttpRequestMessageProperty reqProperty = (HttpRequestMessageProperty)OperationContext.Current.IncomingMessageProperties[HttpRequestMessageProperty.Name];
        string cookies = reqProperty.Headers["Cookie"];

        //Write a cookie
        HttpResponseMessageProperty resProperty = new HttpResponseMessageProperty();
        resProperty.Headers.Add("Set-Cookie", string.Format("Number={0}", value.ToString()));
        OperationContext.Current.OutgoingMessageProperties.Add(HttpResponseMessageProperty.Name, resProperty);
        return string.Format("You entered: {0}", value);
    }
} 
```

# android - 使用自己的图像作为地图并使用 android 中的 x,y 坐标标记地点

> ID：14889135
> 
> 赞同：2
> 
> 时间：2013-02-15T06:02:33.213
> 
> 标签：android, maps

我需要使用自己的图像作为地图，并根据某些标准在地图上的不同位置（x、y 坐标或 l、t、r、b 参数）动态放置标记（或小标志图像） . 我在使用“ImageView”、“ImageMap”和“Drawable”实现它时遇到问题，并且搜索了有关 stackoverflow 的所有问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:27:19.857

我为我的第一个应用程序做了类似的事情。在我的活动中，我创建了一个自定义 View 类，在其中我覆盖了 onDraw 方法并绘制了我的地图图像、标志等。这是我使用的教程，我建议你查看：[Anddev.org](http://www.anddev.org/large_image_scrolling_using_low_level_touch_events-t11182.html)（你可能不需要实现滚动，但其余部分应该是相关的）。

或者，您可以使用 Google Maps API 使用叠加层显示他们的地图，但这听起来不像您想要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:10:04.600

您必须使用叠加层才能在地图上显示图像。[官方文档](https://developers.google.com/maps/documentation/android-api/)中给出了一个非常好的教程。

# algorithm - 将一组数字除以排序？查找通用术语？

> ID：14889139
> 
> 赞同：1
> 
> 时间：2013-02-15T06:02:53.233
> 
> 标签：algorithm, sequence

我们如何将一组数字划分为序列？并找到通用术语？

1 - 数字总是有序的

2 - 如果我们有 n 个数字 n/2 数字总是存在

例如我们有：

```
Input: 0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30
Output--> 2*X, x=[0..15] 
```

或者

```
Input: 0,2,4,5,6,8,10,12,14,15,16,18,20,22,24,26,28,30 
```

分成两组

```
A: 0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30

B: 5,10,15,20

Output--> 2*X, x=[0..15] AND 5*X, x=[1..4] 
```

我觉得这很难，有什么意见吗？

什么计算机领域或算法可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:28:53.750

据我了解，问题是这样的：给定一个数字序列，找到从零开始并以覆盖该集合的常数倍数增加的序列集。

这是我将要做的事情的大致轮廓：

我将列出集合中的所有数字，并从前两个元素开始迭代以生成满足您的标准的所有可能集合。如果您在列表中遇到一个元素，您可以将其从作为生成数字的考虑中删除，因为任何将该数字作为常数倍数的列表都是您之前遇到的列表的子集。完成后，您将获得一个可能的集合列表，您可以使用它来覆盖该集合。例如：

0,2,4,5,6,8,10,12,14,15,16,18,20,22,24,26,28,30

我们将从 0 和 2 开始。我们将查找连续大 2 的元素，并将它们从将被视为可能的倍数的元素列表中删除。一旦我们找到不在此列表中的 2 的倍数，我们将停止生成。开始了：

```
s(2) = [0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30] 
```

留下：

```
[5,15] 
```

作为两个潜在的其他候选人。您是否看到任何可被 2 整除的元素（例如 4）将成为该列表的子集，因此不需要考虑？

集合中的剩余列表将从 0 开始并增加 5，这是我们最小的元素：

[0,5,10,15,20]

（请记住，我们正在检查这些倍数的原始列表而不是截断列表 - 截断列表只是剩余候选者的列表。当候选者列表为空时，我们知道我们将找到包含在该集合中的所有集合谁没有超集。

对于更复杂的示例：

[0 2 3 4 5 6 7 8 9 10 12 13 14 15]

我们将从：

```
[0 2 4 6 8 10 12 14] 
```

留下 [3 5 7 9 13 15]

作为候选人，这反过来会产生：

```
[0 3 6 9 12 15] 
```

离开

```
[5 7 13] 
```

这会产生

```
[0 5 10 15] 
```

离开

```
[7 13] 
```

这会产生

```
[0 7 14] 
```

离开

```
[13] 
```

这会产生

```
[0 13]. 
```

集合的总组合是：

```
[0 2 4 6 8 10 12 14]
[0 3 6 9 12 15]
[0 5 10 15]
[0 7 14]
[0 13]. 
```

此时，您拥有覆盖您的集合所需的所有集合的最小列表。从这里生成正确的 [0,1...n]/a*n 描述符应该很简单。

# javascript - 如果另一个显示相反，则隐藏一个 div？

> ID：14889140
> 
> 赞同：0
> 
> 时间：2013-02-15T06:02:58.993
> 
> 标签：javascript

如果显示 div 2，我试图隐藏 div 1，但是当隐藏 div 2 时，我希望显示 div 1。我试图在javascript中做到这一点，但它不适合我:(

有人可以告诉我我哪里出错了谢谢。

```
<script>
 $(".profile-banner2").hide();
    $(document).ready(function(){
        if ($('.infobox-profile').is(":visible")) {
             $(".profile-banner2").hide();

              } else if ($('.infobox-profile').is(":hidden")) {
            $('.profile-banner2').show();

        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:12:10.630

试试这样：

```
<div id="div1"> this is first div </div>
<div style="display:none"> this is second div</div>

<input type="submit" value="toggle" id="toggle"/> 
```

和脚本：

```
$(function(){
    $("#toggle").click(function(){
    $("div").toggle();
    });

}); 
```

这是[小提琴](http://jsfiddle.net/UuJPw/1/)

* * *

**编辑**

检查更新的[小提琴](http://jsfiddle.net/UuJPw/2/)，如果点击 html 中的任何地方，它就可以工作

# java - How to stop a task in ScheduledThreadPoolExecutor once I think it's completed

> ID：14889143
> 
> 赞同：30
> 
> 时间：2013-02-15T06:03:15.323
> 
> 标签：java, scheduled-tasks, scheduling, scheduler

I have a ScheduledThreadPoolExecutor with which I schedule a task to run at a fixed rate. I want the task to be running with a specified delay for a maximum of say 10 times until it "succeeds". After that, I will not want the task to be retried. So basically I'll need to stop running the scheduled task when I want it to be stopped, but without shutting down the ScheduledThreadPoolExecutor. Any idea how I'd do that?

Here's some pseudocode -

```
public class ScheduledThreadPoolExecutorTest
{
  public static ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(15);  // no multiple instances, just one to serve all requests

  class MyTask implements Runnable
  {
    private int MAX_ATTEMPTS = 10;
    public void run()
    {
      if(++attempt <= MAX_ATTEMPTS)
      {
        doX();
        if(doXSucceeded)
        {
          //stop retrying the task anymore
        }
      }
      else
      { 
        //couldn't succeed in MAX attempts, don't bother retrying anymore!
      }
    }
  }

  public void main(String[] args)
  {
    executor.scheduleAtFixedRate(new ScheduledThreadPoolExecutorTest().new MyTask(), 0, 5, TimeUnit.SECONDS);
  }
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-15T06:22:40.467

run this test, it prints `1 2 3 4 5` and stops

```
public class ScheduledThreadPoolExecutorTest {
    static ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(15); // no
    static ScheduledFuture<?> t;

    static class MyTask implements Runnable {
        private int attempt = 1;

        public void run() {
            System.out.print(attempt + " ");
            if (++attempt > 5) {
                t.cancel(false);
            }
        }
    }

    public static void main(String[] args) {
        t = executor.scheduleAtFixedRate(new MyTask(), 0, 1, TimeUnit.SECONDS);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-03T11:01:41.397

Nicely cancelled outside of thread:

```
public class ScheduleTest {

    @Test
    public void testCancel() throws Exception {
        final ScheduledThreadPoolExecutor EXECUTOR = (ScheduledThreadPoolExecutor) Executors.newScheduledThreadPool(2);
        ScheduledFuture f1 = EXECUTOR.scheduleAtFixedRate(new Runnable() {
            @Override
            public void run() {
                System.out.println("Im alive 1");
            }
        }, 0, 1, TimeUnit.SECONDS);
        ScheduledFuture f2 = EXECUTOR.scheduleAtFixedRate(new Runnable() {
            @Override
            public void run() {
                System.out.println("Im alive 2");
            }
        }, 0, 2, TimeUnit.SECONDS);

        Thread.sleep(10000);
        f1.cancel(true);
        System.out.println("f1 cancel");
        Thread.sleep(10000);
        f2.cancel(false);
        System.out.println("f2 cancel");
        Thread.sleep(10000);
    }
} 
```

Sometimes thread couldn't be cancelled, this solved usually via `volatile boolean isCancelled;`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-09-30T05:35:35.837

`CountDownLatch` is an alternative approach. When the thread completes, call `countDown()` on the latch. The calling thread calls `latch.await()` until all threads complete. At that point call `ExecutorService.shutdownNow()` so that your main thread doesn't turn into a zombie.

```
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

public class ScheduledThreadPoolExecutorTest {

  static int i = 0;

  public static void main(String[] args) throws Exception {
    final ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);
    final CountDownLatch latch = new CountDownLatch(1);
    executor.scheduleAtFixedRate(() -> {
        System.out.println(++i);
        if (i > 4) {
          latch.countDown();
        }
    }, 0, 100, TimeUnit.MILLISECONDS);
    latch.await();
    executor.shutdownNow();
  }
} 
```

# terminal - 终端重定向命令

> ID：14889144
> 
> 赞同：0
> 
> 时间：2013-02-15T06:03:15.640
> 
> 标签：terminal, cmd, alias

我现在一直在做几个项目。总是在我启动终端时，在 mac 中，我从根文件夹开始，这在大多数情况下都很好。但我想知道是否有可能制作一个将您立即重定向到地图的文件。比如说我必须输入：

cd 桌面/justamap/justanothermap/andamap/等。

是否可以在根文件夹中创建一个命令文件，其中包含指定地图的完整地址，这将带我到选定的地图，例如运行它？

这可以为我在处理项目之间有时间的项目时节省大量时间。

如果我重新发布一个问题，我真的很抱歉，但我找不到我的关键字的东西。

提前谢谢，感谢您的帮助！

问候，

基普特斯克里迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:08:57.690

您可以创建一个简单的**sh 文件**（例如 ./anything_here）并运行它：

```
#!/bin/sh
cd Desktop/justamap/justanothermap/andamap/etc

$ chmod +x ./anything_here
$ ./anything_here 
```

您还可以创建指向该文件夹的**符号链接**，然后*cd*进入符号链接（这就像文件夹实际上是*./anything_here 一样*）：

```
$ ln -s ./anything_here Desktop/justamap/justanothermap/andamap/etc
$ cd ./anything_here 
```

或者您可以创建一个**alias**，并将其写入控制台，将其放在您的 ~/.bashrc 或 ~/.bash_profile 文件中：

```
alias anything_here="cd Desktop/justamap/justanothermap/andamap/etc"

$ anything_here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:08:57.067

尝试使用

```
vi ~/.bash_profile 
```

它将在 vim 中打开你可以使用 mate 或其他任何东西

```
 alias project='cd Desktop/justamap/justanothermap/andamap/etc.' 
```

关闭您的终端并重新启动它。宾果游戏应该适合你。

工作对我来说很棒:)

# linux - 更改 SSH 会话的主机名

> ID：14889145
> 
> 赞同：-1
> 
> 时间：2013-02-15T06:03:22.390
> 
> 标签：linux, ubuntu

当我通过 SSH 连接到我的服务器时，它的名称很长

```
user@this-is-a-really-really-really-really-long-server-name:~$ 
```

我怎样才能将其更改为

```
user@short-name:~$ 
```

我不知道什至谷歌是为了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:20:20.533

就像马特说的。[Unix.stackexchange](https://unix.stackexchange.com/questions/3012/changing-the-bash-prompt)上有类似的问题

你 [在这里找到一些背景](http://www.cyberciti.biz/tips/howto-linux-unix-bash-shell-setup-prompt.html)

修改PS11

```
PS1="touch me : " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:27:04.237

问题是您是否想真正更改服务器的主机名，或者只更改 cli 开头显示的内容。

如果您想更改主机名，最好专门检查您的发行版。

如果您只想更改 cli 开头显示的内容，请通过 ~/.bashrc（特定于用户）或 /etc/profile（全局）或类似的方式更改 ${PS1} 变量。

# c# - 带有文本字段的 Gridview

> ID：14889146
> 
> 赞同：0
> 
> 时间：2013-02-15T06:03:41.843
> 
> 标签：c#, asp.net, .net, visual-studio-2010, gridview

![你好如何做一个像这样的gridview](../Images/7782789f69dc3cfbc280b9902ae0ee7c.png)

你好，我想从数据库中的两个表创建一个网格视图。并将其绑定在一起并更新数据库中的另一个表。Customer_Name 是 BillingData 表中的一列，Group_Name 是 GroupMapping 中的另一列。其余字段应该是文本字段，用户可以在其中输入值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:43:31.653

你有几件事要解决。

1.  首先，您需要为您的保存操作创建一个业务对象/DTO
2.  然后，您必须为插入、更新和选择操作编写 SQL（使用 'joins' 来加入您的相关表）- 我建议您使用 INNER JOIN [SQL Join W3School](http://www.w3schools.com/sql/sql_join.asp)
3.  然后，您可以在表示层上绑定您的 gridview 并选择通过 gridview 进行批量编辑或使用单独的表单进行插入和更新操作

达米安。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:10:55.860

您应该输入 DTO 对象。像这样的东西：

```
class Program
{
    static void Main(string[] args)
    {
        A a = new A();
        B b = new B();
        ABDto abDto = new ABDto(a, b);

    }

}

public class A
{
    public Int32 Id { get; set; }
    public String Name { get; set; }
}

public class B
{
    public Int32 Id { get; set; }
    public String Name { get; set; }
}

public class ABDto
{
    public Int32 Id { get; set; }

    public String AName { get; set; }

    public String BName { get; set; }

    public ABDto(A a, B b)
    {
        AName = a.Name;
        BName = b.Name;
    }
} 
```

# android - 无法用颜色填充多边形

> ID：14889147
> 
> 赞同：2
> 
> 时间：2013-02-15T06:03:44.517
> 
> 标签：android, polygon, google-maps-android-api-2

我正在添加这样的多边形：

```
PolygonOptions options = new PolygonOptions();
for (int x = 0; x <= 360; x++) {

//get LatLng ll
options.add(ll);
}
options.strokeColor(Color.BLUE);
options.strokeWidth(2);
options.fillColor(Color.CYAN);
map.addPolygon(options); 
```

我得到的是一个蓝色笔划多边形（圆形）。但我无法用颜色填充它（它只是空的）。我错过了什么？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:15:13.723

[确保按照文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/PolygonOptions?hl=es#addAll%28java.lang.Iterable%3Ccom.google.android.gms.maps.model.LatLng%3E%29)中给出的逆时针顺序添加顶点。

# android - 如何在android中解压.7z文件

> ID：14889148
> 
> 赞同：3
> 
> 时间：2013-02-15T06:03:51.983
> 
> 标签：android, compression, shared-libraries, android-native-library

我想解压缩从服务器获取的 .7z 文件。
为此，我在项目 libs 目录中添加了 Sevenzipjbinding.jar 库及其共享库 Sevenzipjbinding-AllLinux.jar，
但出现错误**“库 'sevenzipjbinding-AllLinux.jar' 包含无法在设备上运行的本机库**”在运行应用程序时在控制台中。

我尝试`system.loadLibrary(sevenzipjbinding-AllLinux.jar);`在活动中使用，但再次给出同样的错误。

请告诉我如何实现它。如何解压缩 tar.7z

# iphone - 如何使用 Graph api 将图像与文本一起发布？

> ID：14889155
> 
> 赞同：1
> 
> 时间：2013-02-15T06:04:25.980
> 
> 标签：iphone, ios, facebook, facebook-graph-api

下面的代码成功地将我的文本发布在 facebook 墙上，现在我想使用下面的代码发布图像和文本

```
- (IBAction)callFacebookAPI:(id)sender
 {
[self.txtinputfield resignFirstResponder];
if (txtinputfield.text.length !=0) 
{
   //create the instance of graph api
    objFBGraph = [[FbGraph alloc]initWithFbClientID:FbClientID];

    //mark some permissions for your access token so that it knows what permissions it has

    [objFBGraph authenticateUserWithCallbackObject:self andSelector:@selector(FBGraphResponse) andExtendedPermissions:@"user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins,publish_checkins,email"];
}
else 
{
    UIAlertView *objAlert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"Kindly enter data in the text field" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [objAlert show];
}
}

 - (void)FBGraphResponse
{

@try 
{
    if (objFBGraph.accessToken) 
    {
        SBJSON *jsonparser = [[SBJSON alloc]init];

        FbGraphResponse *fb_graph_response = [objFBGraph doGraphGet:@"me" withGetVars:nil];

        NSString *resultString = [NSString stringWithString:fb_graph_response.htmlResponse];
        NSDictionary *dict =  [jsonparser objectWithString:resultString];
        NSLog(@"Dict = %@",dict);

        NSMutableDictionary *variable = [[NSMutableDictionary alloc]initWithCapacity:1];

        [variable setObject:txtinputfield.text forKey:@"message"];
        [objFBGraph doGraphPost:@"me/feed" withPostVars:variable];

        UIAlertView *objAlert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"String posted on your wall and you may check the console now" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [objAlert show];

    }
}
@catch (NSException *exception) {
    UIAlertView *objALert = [[UIAlertView alloc]initWithTitle:@"Alert" message:[NSString stringWithFormat:@"Something bad happened due to %@",[exception reason]] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [objALert show];
}

txtinputfield.text = clearText;
} 
```

我尝试了一些方法，但对我没有用，我没有使用 Graph Api 的经验任何帮助都会得到帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:39:22.727

尝试如下：

```
- (IBAction)buttonClicked:(id)sender
{
    NSArray* permissions = [[NSArray alloc] initWithObjects:
                            @"publish_stream", nil];
    [facebook authorize:permissions delegate:self];
    [permissions release];

}
- (void)fbDidLogin
{
  NSString *filePath =pathToImage;
       NSData *videoData = [NSData dataWithContentsOfFile:filePath];
       NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   videoData, pathToImage,
                                   @"picture/jpeg", @"contentType",
                                   @"Video Test Title", @"title",
                                   @"Video Test Description", @"description",
                                   nil];
    [facebook requestWithGraphPath:@"me/photos"
                         andParams:params
                     andHttpMethod:@"POST"
                       andDelegate:self];
    }
-(void)fbDidNotLogin:(BOOL)cancelled
{
    NSLog(@"did not login");
}
- (void)request:(FBRequest *)request didLoad:(id)result
{
    if ([result isKindOfClass:[NSArray class]])
    {
        result = [result objectAtIndex:0];
    }
    NSLog(@"Result of API call: %@", result);
}
- (void)request:(FBRequest *)request didFailWithError:(NSError *)error
{
    NSLog(@"Failed with error: %@", [error localizedDescription]);
} 
```

# mysql - 存储过程：if else语句在case when

> ID：14889157
> 
> 赞同：1
> 
> 时间：2013-02-15T06:04:29.000
> 
> 标签：mysql, sql

```
BEGIN
    CASE x
        WHEN 0 THEN (
                    IF thisIsAVariable = 'viewAll' THEN
                       SELECT id, fname FROM Persons WHERE 1
                    ELSE
                       SELECT id, fname FROM Persons WHERE id = '1111'
                    END IF
                 );
    END CASE;
END 
```

casewhen 语句中 ifelse 语句的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:05:59.100

只需使用`IF-ELSE`，

```
DELIMITER $$
CREATE PROCEDURE procName
BEGIN
    IF x = 0 THEN
        IF thisIsAVariable = 'viewAll' THEN
            SELECT id, fname FROM Persons WHERE 1;
        ELSE
            SELECT id, fname FROM Persons WHERE id = '1111';
        END IF;
    ELSE
        -- other codes if you have
    END IF;
END $$
DELIMITER ; 
```

*我认为*在使用时`CASE`，select 语句应该只返回一个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:17:05.197

我们可以在 if 中使用 if 来简化代码，如下所示：

```
BEGIN
    IF x = 0 THEN
        IF thisIsAVariable = 'viewAll' THEN
            SELECT id, fname FROM Persons WHERE 1;
        ELSE
            SELECT id, fname FROM Persons WHERE id = '1111';
        END IF;
    END IF;
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:03:04.763

试试这个

```
BEGIN
    CASE x
        WHEN 0 THEN (
                    SELECT id, fname FROM Persons WHERE id = IF(thisIsAVariable = 'viewAll',1,'1111')
                 );
    END CASE;
END 
```

# ios - 旋转动画直到 UIViewController 消失

> ID：14889158
> 
> 赞同：0
> 
> 时间：2013-02-15T06:04:36.213
> 
> 标签：ios, uiimageview, cabasicanimation, uianimation

我有一个`UIImageView`我必须提供旋转动画效果（当视图出现时开始旋转并不断旋转直到该视图消失）。我在另一个问题中找到了这个简单的答案：[UIView Infinite 360​​ degree rotation animation?](https://stackoverflow.com/questions/9844925/uiview-infinite-360-degree-rotation-animation/9845530#9845530)

但我的问题是如何将持续时间设置为视图消失之前的时间。而且，我应该在我的场景中设置重复计数的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:32:39.227

你用什么让视图消失？如果消失是指将 alpha 淡化为 0，则可以将旋转动画与淡化 alpha 的动画相匹配。例如，如果您有一个持续 0.25 秒的旋转，并且您希望它在 1 秒后淡出，则让它旋转 4 次。

如果您的意思是您要保持图像视图旋转直到用户执行某些操作以使其消失，则可以将重复计数设置为无限，并使用添加时提供的标签将动画从 imageview 中删除动画：

`[yourLayer addAnimation:yourAnimation forKey:@"spinning"];`当你添加它

`[yourLayer removeAnimationForKey:@"spinning"];`一旦 imageview 消失了

# c - switch_dev_register的使用场景是什么

> ID：14889159
> 
> 赞同：1
> 
> 时间：2013-02-15T06:04:43.703
> 
> 标签：c, linux-kernel, linux-device-driver

我正在尝试了解 fsa9485 驱动程序（USB 开关）。在码头初始化代码中我遇到了：

```
switch_dev_register(&switch_dock) 
```

`switch_dock`是一种类型的结构，`switch_dev`在附件检测例程中使用如下：

```
switch_set_state(&switch_dock, attached) 
```

我推断如下：有两种类型的底座，一种是汽车底座，另一种是桌面底座，`switch_dev`类用于在它们之间切换。

为什么我们需要`switch_dev`课程？？该类如何区分两个不同的码头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:57:26.187

该`switch_dev_register`函数注册一个设备`sysfs`并在`/sys/`. `Switch_set_state`更新正在运行的内核（文件）上创建的文件之一中的值`state`。所以在我的内核中，我可以通过读取文件“/sys/devices/virtual/switch/dock/state”来查看状态。`State`为 1， 为`deskdock`2 `cardock`，否则为 0。这只是将硬件信息传递给用户空间的一种简单方法。

有必要使用`switch_dev`该类进行标准化`sysfs`。驱动程序通过读取驻留在 I2C 总线上的 fsa9485 芯片的寄存器值来区分两个坞站。请参阅`fsa9480_detect_dev`fsa9480.c 中的驱动程序从模数转换器`(ADC)`和设备类型寄存器读取值以确定坞站的类型。

# java - 注册适合当前 SDK 版本的组件回调

> ID：14889160
> 
> 赞同：1
> 
> 时间：2013-02-15T06:05:10.487
> 
> 标签：java, android

我想在可用时接收 onTrimMemory (ICS+) 和 onLowMemory (> ICS) 的通知。我的问题如下：

1.  只要我不实例化，系统是否允许我定义一个实现当前 SDK 中没有的接口的类？例如，`CallbacksICS implements ComponentCallbacks2`在以 minSdk 8 为目标时进行定义，但在选择要实例化和注册的内容之前检查当前的 SDK_INT。
2.  当应用程序准备好被系统清理时，onTerminate 总是会被调用吗？我依稀记得早期听说某些应用程序生命周期方法不能保证被调用。

从我的应用程序类：

```
@SuppressLint("NewApi")
@Override
public void onCreate() {
    super.onCreate();

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        callbacksICS = new CallbacksICS();
        registerComponentCallbacks(callbacksICS);
    }
    else {
        callbacksLegacy = new CallbacksLegacy();
        registerComponentCallbacks(callbacksLegacy);
    }
}

@SuppressLint("NewApi")
@Override
public void onTerminate() {
    super.onTerminate();

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        unregisterComponentCallbacks(callbacksICS);
    }
    else {
        unregisterComponentCallbacks(callbacksLegacy);
    }
} 
```

# mysql - 在 MyISAM 中删除之前，我是否应该检查表中是否存在行？

> ID：14889162
> 
> 赞同：1
> 
> 时间：2013-02-15T06:05:21.277
> 
> 标签：mysql

假设我的数据库中有 5 个 MyISAM 表。每个表都有一个键，我们称之为“id_num”...

“id_num”是我用来将所有表连接在一起的字段。“id_num”的某个值可能出现在所有表中，有时也可能只出现在表的子集中。

如果我想删除数据库中某个“id_num”的所有实例，我可以只对所有表执行 DELETE 命令，还是应该检查“id_num”的值是否存在？

```
DELETE * FROM table1 WHERE id_num = 123;
DELETE * FROM table2 WHERE id_num = 123;
DELETE * FROM table3 WHERE id_num = 123;
DELETE * FROM table4 WHERE id_num = 123;
DELETE * FROM table5 WHERE id_num = 123; 
```

或者我应该先在每个表上执行一个 SELECT 命令，以检查这些行在删除之前是否存在于表中？什么是最佳实践？

（我使用的是 MyISAM，所以级联删除在这里不是一个选项。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:13:53.680

要回答您关于首次运行 SELECT 的问题，这样做没有任何好处。如果给定表中没有行，则 DELETE 只会影响零行。如果有匹配的行，那么先执行 SELECT 再执行 DELETE 只会使查找行的工作加倍。所以只需执行删除并完成它。

你知道 MySQL 有多表 DELETE 语法吗？

如果您确定 table1 有匹配的行，则可以对其他行使用外连接：

```
DELETE table1.*, table2.*, table3.*, table4.*, table5.*
FROM table1
LEFT OUTER JOIN table2 USING (id_num)
LEFT OUTER JOIN table3 USING (id_num)
LEFT OUTER JOIN table4 USING (id_num)
LEFT OUTER JOIN table5 USING (id_num)
WHERE table1.idnum = 123; 
```

我假设 id_num 在所有这些表中都有索引，否则执行 JOIN 将表现不佳。但是在没有索引帮助的情况下执行删除来查找行也会表现不佳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:09:56.910

听起来您需要按如下方式更改您的设计 - 有一个`id_num`作为 PK`id_num`的表，并在其他表中创建一个 FK，并带有 on-delete-cascade。这将允许您只运行一个删除语句来删除所有适用的数据（这通常也是更正确的处理方式）。

以上显然在 MyISAM 中不起作用，但是有[一个使用触发器的解决方法](https://stackoverflow.com/a/5342878/1711796)（但现在它看起来确实是一个不那么吸引人的选项）。

但是我相信您的上述查询应该可以工作，无需先检查是否存在某些内容，`DELETE`而不会做任何事情。

`rows affected`如果您想查看数据是否实际被删除，大多数 API 都会为您提供某种计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:09:47.193

在从表中删除之前，您不应该执行选择查询。因为选择查询会给服务器带来一些额外的负载。但是，在执行删除查询后，您可以使用 php.ini 中的 mysql_affected_rows() 函数检查已删除的行数。

# ant - JUnit 报告不显示已执行的测试

> ID：14889165
> 
> 赞同：3
> 
> 时间：2013-02-15T06:05:30.130
> 
> 标签：ant, junit, report

我正在尝试`JUnit`使用生成报告`Ant`。我创建了`build.xml`以下内容：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- WARNING: Eclipse auto-generated file.
              Any modifications will be overwritten.
              To include a user specific buildfile here, simply create one in the same
              directory with the processing instruction <?eclipse.ant.import?>
              as the first entry and export the buildfile again. --><project basedir="." default="build" name="myWebApp">
    <property environment="env"/>

    <property name="M2_REPO" value="C:/Users/samprity.kashyap/.m2/repository"/>
    <property name="ECLIPSE_HOME" value="C:/install/eclipse-jee-juno-win32/eclipse"/>
    <property name="junit.output.dir" value="junit"/>
    <property name="debuglevel" value="source,lines,vars"/>
    <property name="target" value="1.7"/>
    <property name="source" value="1.7"/>
    <path id="Apache Tomcat v7.0 [Apache Tomcat v7.0].libraryclasspath">
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/annotations-api.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/antlr-2.7.7.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/catalina-ant.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/catalina-ha.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/catalina-tribes.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/catalina.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/commons-logging-1.1.1.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/dom4j-1.6.1.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/ecj-3.7.2.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/el-api.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/hibernate-commons-annotations-4.0.1.Final.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/hibernate-core-4.1.8.Final.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/hibernate-jpa-2.0-api-1.0.1.Final.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/jasper-el.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/jasper.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/javassist-3.15.0-GA.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/jboss-logging-3.1.0.GA.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/jboss-transaction-api_1.1_spec-1.0.0.Final.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/jsp-api.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/junit-4.8.2.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/mybatis-3.0.3.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/mysql-connector-java-5.1.12-bin.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.aop-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.asm-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.aspects-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.beans-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.context-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.context.support-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.core-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.expression-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.instrument-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.instrument.tomcat-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.jdbc-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.jms-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.orm-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.oxm-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.test-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.transaction-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.web-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.web.portlet-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.web.servlet-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/org.springframework.web.struts-3.1.2.RELEASE.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/servlet-api.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/tomcat-api.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/tomcat-coyote.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/tomcat-dbcp.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/tomcat-i18n-es.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/tomcat-i18n-fr.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/tomcat-i18n-ja.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/tomcat-jdbc.jar"/>
        <pathelement location="../../../../Program Files/Apache Software Foundation/Tomcat 7.0/lib/tomcat-util.jar"/>
    </path>
    <path id="myWebApp.classpath">
        <pathelement location="target/classes"/>
        <pathelement location="${M2_REPO}/javax/transaction/jta/1.0.1B/jta-1.0.1B.jar"/>
        <pathelement location="${M2_REPO}/junit/junit/4.5/junit-4.5.jar"/>
        <pathelement location="${M2_REPO}/org/springframework/spring-core/3.2.0.RELEASE/spring-core-3.2.0.RELEASE.jar"/>
        <pathelement location="${M2_REPO}/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar"/>
        <pathelement location="${M2_REPO}/log4j/log4j/1.2.14/log4j-1.2.14.jar"/>
        <pathelement location="${M2_REPO}/org/springframework/spring-web/3.2.0.RELEASE/spring-web-3.2.0.RELEASE.jar"/>
        <pathelement location="${M2_REPO}/org/springframework/spring-context/3.2.0.RELEASE/spring-context-3.2.0.RELEASE.jar"/>
        <pathelement location="${M2_REPO}/org/springframework/spring-aop/3.2.0.RELEASE/spring-aop-3.2.0.RELEASE.jar"/>
        <pathelement location="${M2_REPO}/aopalliance/aopalliance/1.0/aopalliance-1.0.jar"/>
        <pathelement location="${M2_REPO}/org/springframework/spring-beans/3.2.0.RELEASE/spring-beans-3.2.0.RELEASE.jar"/>
        <pathelement location="${M2_REPO}/org/springframework/spring-expression/3.2.0.RELEASE/spring-expression-3.2.0.RELEASE.jar"/>
        <pathelement location="${M2_REPO}/org/springframework/spring-webmvc/3.2.0.RELEASE/spring-webmvc-3.2.0.RELEASE.jar"/>
        <pathelement location="${M2_REPO}/org/hibernate/hibernate/3.2.6.ga/hibernate-3.2.6.ga.jar"/>
        <pathelement location="${M2_REPO}/net/sf/ehcache/ehcache/1.2.3/ehcache-1.2.3.jar"/>
        <pathelement location="${M2_REPO}/commons-collections/commons-collections/2.1.1/commons-collections-2.1.1.jar"/>
        <pathelement location="${M2_REPO}/asm/asm-attrs/1.5.3/asm-attrs-1.5.3.jar"/>
        <pathelement location="${M2_REPO}/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar"/>
        <pathelement location="${M2_REPO}/antlr/antlr/2.7.6/antlr-2.7.6.jar"/>
        <pathelement location="${M2_REPO}/cglib/cglib/2.1_3/cglib-2.1_3.jar"/>
        <pathelement location="${M2_REPO}/asm/asm/1.5.3/asm-1.5.3.jar"/>
        <pathelement location="${M2_REPO}/org/hibernate/hibernate-annotations/3.3.1.GA/hibernate-annotations-3.3.1.GA.jar"/>
        <pathelement location="${M2_REPO}/org/hibernate/hibernate-commons-annotations/3.0.0.ga/hibernate-commons-annotations-3.0.0.ga.jar"/>
        <pathelement location="${M2_REPO}/org/hibernate/ejb3-persistence/1.0.1.GA/ejb3-persistence-1.0.1.GA.jar"/>
        <pathelement location="${M2_REPO}/mysql/mysql-connector-java/5.1.6/mysql-connector-java-5.1.6.jar"/>
        <pathelement location="${M2_REPO}/org/springframework/flex/spring-flex-core/1.5.0.BUILD-SNAPSHOT/spring-flex-core-1.5.0.BUILD-SNAPSHOT.jar"/>
        <pathelement location="${M2_REPO}/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.jar"/>
        <pathelement location="${M2_REPO}/commons-codec/commons-codec/1.2/commons-codec-1.2.jar"/>
        <pathelement location="${M2_REPO}/cglib/cglib-nodep/2.1_3/cglib-nodep-2.1_3.jar"/>
        <pathelement location="${M2_REPO}/org/springframework/spring-context-support/3.0.5.RELEASE/spring-context-support-3.0.5.RELEASE.jar"/>
        <pathelement location="${M2_REPO}/com/adobe/blazeds/blazeds-core/4.0.0.14931/blazeds-core-4.0.0.14931.jar"/>
        <pathelement location="${M2_REPO}/com/adobe/blazeds/blazeds-common/4.0.0.14931/blazeds-common-4.0.0.14931.jar"/>
        <pathelement location="${M2_REPO}/com/adobe/blazeds/blazeds-proxy/4.0.0.14931/blazeds-proxy-4.0.0.14931.jar"/>
        <pathelement location="${M2_REPO}/com/adobe/blazeds/blazeds-remoting/4.0.0.14931/blazeds-remoting-4.0.0.14931.jar"/>
        <pathelement location="${M2_REPO}/org/springframework/spring-test/3.2.0.RELEASE/spring-test-3.2.0.RELEASE.jar"/>
        <path refid="Apache Tomcat v7.0 [Apache Tomcat v7.0].libraryclasspath"/>
    </path>
    <target name="init">
        <mkdir dir="target/classes"/>
        <copy includeemptydirs="false" todir="target/classes">
            <fileset dir="src/main/java">
                <include name="**/*.java"/>
                <exclude name="**/*.java"/>
            </fileset>
        </copy>
        <copy includeemptydirs="false" todir="target/classes">
            <fileset dir="src/main/resources">
                <exclude name="**/*.java"/>
                <exclude name="**/*.java"/>
            </fileset>
        </copy>
    </target>
    <target name="clean">
        <delete dir="target/classes"/>
    </target>
    <target depends="clean" name="cleanall"/>
    <target depends="build-subprojects,build-project" name="build"/>
    <target name="build-subprojects"/>
    <target depends="init" name="build-project">
        <echo message="${ant.project.name}: ${ant.file}"/>
        <javac debug="true" debuglevel="${debuglevel}" destdir="target/classes" includeantruntime="false" source="${source}" target="${target}">
            <src path="src/main/java"/>
            <src path="src/main/resources"/>
            <include name="**/*.java"/>
            <exclude name="**/*.java"/>
            <classpath refid="myWebApp.classpath"/>
        </javac>
    </target>
    <target description="Build all projects which reference this project. Useful to propagate changes." name="build-refprojects"/>
    <target description="copy Eclipse compiler jars to ant lib directory" name="init-eclipse-compiler">
        <copy todir="${ant.library.dir}">
            <fileset dir="${ECLIPSE_HOME}/plugins" includes="org.eclipse.jdt.core_*.jar"/>
        </copy>
        <unzip dest="${ant.library.dir}">
            <patternset includes="jdtCompilerAdapter.jar"/>
            <fileset dir="${ECLIPSE_HOME}/plugins" includes="org.eclipse.jdt.core_*.jar"/>
        </unzip>
    </target>
    <target description="compile project with Eclipse compiler" name="build-eclipse-compiler">
        <property name="build.compiler" value="org.eclipse.jdt.core.JDTCompilerAdapter"/>
        <antcall target="build"/>
    </target>
    <target name="MapManagerTest">
        <mkdir dir="${junit.output.dir}"/>
        <junit fork="yes" printsummary="withOutAndErr">
            <formatter type="xml"/>
            <test name="com.sample.application.MapManagerTest" todir="${junit.output.dir}"/>
            <classpath refid="myWebApp.classpath"/>
        </junit>
    </target>

    <target name="MapManagerTest.testCheckUser">
        <mkdir dir="${junit.output.dir}"/>
        <junit fork="yes" printsummary="withOutAndErr">
            <formatter type="xml"/>
            <test name="com.sample.application.MapManagerTest" todir="${junit.output.dir}"/>
            <classpath refid="myWebApp.classpath"/>
        </junit>
    </target>
   <junitreport todir="./junit">
  <fileset dir="./junit">
    <include name="TEST-*.xml"/>
  </fileset>
  <report format="frames" todir="./junit/html"/>
</junitreport>

</project> 
```

但是生成的报告没有显示任何价值。我创建了一个名为 junit 的文件夹，其中生成了 html 页面。`overall-summary.html`节目：

```
测试 失败 错误 成功率 时间
0 0 0 南 0.000

```

控制台输出：

```
Hibernate: 
    select
        user0_.id as id0_,
        user0_.password as password0_,
        user0_.username as username0_ 
    from
        USER user0_ 
    where
        user0_.username=?
Hibernate: 
    select
        userdetail0_.id as id1_0_,
        userdetail0_.firstname as firstname1_0_ 
    from
        USERDETAILS userdetail0_ 
    where
        userdetail0_.id=?
User [id=4, userName=xyz, password=abc] 
```

和测试用例

```
@Test
public void testCheckUser() {                   
    User user=new User();
    user.setId(4);
    user.setUserName("xyz");
    user.setPassword("abc");
    UserDetails userDetails= new UserDetails();

    user.setUserDetails(userDetails);
    user1=mapManager.checkUser(user);
          equals(user1.equals(user));
} 
```

这是运行时的控制台输出`build.xml`

```
Buildfile: D:\Users\samprity.kashyap\workspace\myWebApp\build.xml
build-subprojects:
init:
build-project:
     [echo] myWebApp: D:\Users\samprity.kashyap\workspace\myWebApp\build.xml
build:
junitreport:
[junitreport] Processing D:\Users\samprity.kashyap\workspace\myWebApp\junit\TESTS-TestSuites.xml to C:\Users\SAMPRI~1.KAS\AppData\Local\Temp\null1323106157
[junitreport] Loading stylesheet jar:file:/C:/install/eclipse-jee-juno-win32/eclipse/plugins/org.apache.ant_1.8.3.v20120321-1730/lib/ant-junit.jar!/org/apache/tools/ant/taskdefs/optional/junit/xsl/junit-frames.xsl
[junitreport] Transform time: 232ms
[junitreport] Deleting: C:\Users\SAMPRI~1.KAS\AppData\Local\Temp\null1323106157
build-subprojects:
init:
build-project:
     [echo] myWebApp: D:\Users\samprity.kashyap\workspace\myWebApp\build.xml
build-refprojects:
init-eclipse-compiler:
    [unzip] Expanding: C:\install\eclipse-jee-juno-win32\eclipse\plugins\org.eclipse.jdt.core_3.8.1.v20120531-0637.jar into C:\install\eclipse-jee-juno-win32\eclipse\plugins\org.apache.ant_1.8.3.v20120321-1730\lib
    [unzip] Expanding: C:\install\eclipse-jee-juno-win32\eclipse\plugins\org.eclipse.jdt.core_3.8.2.v20120814-155456.jar into C:\install\eclipse-jee-juno-win32\eclipse\plugins\org.apache.ant_1.8.3.v20120321-1730\lib
BUILD SUCCESSFUL
Total time: 2 seconds 
```

# javascript - javascript：避免浏览器在内容插入时滚动回顶部

> ID：14889166
> 
> 赞同：1
> 
> 时间：2013-02-15T06:05:34.327
> 
> 标签：javascript, jquery

我认为这很容易解决，但我似乎无法在任何地方找到解决方案。这是一个非常烦人的 javascript '功能？'。每次我向 div 添加内容时，文档都会滚动回顶部。我怎样才能避免这种恼人的行为？

```
n = 0;
function addContent() {
    div = document.getElementById('content');
    for(var i = 0; i < 100; i++) {
        n++;
        div.innerHTML = div.innerHTML + n + '<br />';
    }
}

</script>
</head>

<body>
<div id="content"></div>
<a href="#" onclick="addContent()">more content</a> 
```

例如：http: [//jsfiddle.net/hQP2q/](http://jsfiddle.net/hQP2q/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:36:05.533

这里的问题是，

当您单击锚链接时，会触发为该元素注册的 onclick 事件处理程序。

现在锚标记的默认行为是导航到它自己的 href 属性。

在您的情况下，两者都发生了，因此 url 被导航到“#”。"#" 充当书签，因此浏览器将查找任何具有 id 的 html 元素，与 url 中 # 后面的字符串相同。

所以解决这个问题的解决方案是，在你的 onclick 处理程序中，传递事件对象，当 onclick 处理程序被执行时，只需使用事件对象来防止元素点击行为的默认操作。

所以代码会像修改时一样。

```
<script>
     n = 0;
    function addContent(e) {
        div = document.getElementById('content');
        for(var i = 0; i < 100; i++) {
            n++;
            div.innerHTML = div.innerHTML + n + '<br />';
        }
        e.preventDefault();
        return false;
    }

    </script>
    </head>

    <body>
    <div id="content"></div>
<a href="#" onclick="addContent(event)">more content</a> 
```

在这里看小提琴：http: [//jsfiddle.net/uKrpH/2/embedded/result/](http://jsfiddle.net/uKrpH/2/embedded/result/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-14T09:32:40.390

有同样的问题..当我点击表格中的图标时，浏览器更改了单元格的内容并滚动到页面顶部。我试图添加“return false;” 问题消失了。

```
<a href="#" onclick="addContent(); return false;">more content</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:28:23.210

另一种解决方案应该是提供一个页面上不存在的#id。

例如

```
<a href="#dontscroll" onclick="addContent()">more content</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T06:25:29.087

你可以更换

```
<a href="#" onclick="addContent()">more content</a> 
```

和

```
<a href="javascript:void(0);" onclick="addContent()">more content</a> 
```

或尝试：

```
<a href="#" onclick="addContent();return false;">more content</a> 
```

另一种选择是像这样向 href 添加一个 id：参见[示例](http://jsfiddle.net/hQP2q/1/)

```
<a id="link" href="#link" onclick="addContent()">more content</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T07:01:05.677

相反，我会用 jQuery 的方式来做：http: [//jsfiddle.net/hQP2q/3/](http://jsfiddle.net/hQP2q/3/)

```
<a href="#">more content</a> // <----i just removed the onclick from here

<script type="text/javascript">
        n = 0;

        function addContent() {
            div = document.getElementById('content');
            for (var i = 0; i < 100; i++) {
                n++;
                div.innerHTML = div.innerHTML + n + '<br />';
            }
        }
        $(function() { //<----------------------i would do it here.
            $('a').click(function(e) {
                addContent();
                e.preventDefault();
            });
        });
    </script> 
```

# linux - 使用基于日期的shell脚本删除旧数据

> ID：14889171
> 
> 赞同：0
> 
> 时间：2013-02-15T06:06:01.610
> 
> 标签：linux, bash, shell

我有很多以数据格式（2012-10-11）创建的文件。如何根据日期删除文件。我的意思是应该删除少于 3 个月的文件。它应该在 shell 脚本中完成。我在谷歌搜索并使用了 ubuntu 软件中心提供的工具。并且还在启动板中搜索脚本。任何人都可以帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:52:52.037

尝试这个：

寻找 。-ctime +90 -exec rm -i '{}' \;

如果你觉得很幸运，你也可以删除'-i'（删除前询问）

# plsql - PLSQL中的拆分字符串

> ID：14889172
> 
> 赞同：-1
> 
> 时间：2013-02-15T06:06:03.443
> 
> 标签：plsql

以下应返回 Y

```
CASISA#Y

INVOPT#LUMREG#LUMSUM#2000#REGSUM#8000

LUMSUM#2000#REGSUM#8000 
```

即哈希分隔代码和值，它也分隔代码、值对（早期的分号用于分隔代码、值对）

以下应返回 N（因为这些是不正确的输入字符串格式）

```
CASISA#

INVOPT#LUMREG#LUMSUM

LUMSUM#2000#REGSUM#8000# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:16:37.547

`case when regexp_like(your_string||'#', '^(\w+#\w+#)+$') then 'Y' else 'N' end`

[SQL小提琴](http://www.sqlfiddle.com/#!4/df293/4)

# javascript - 使用 swfobject 将 Flash 添加到 HTML 失败

> ID：14889173
> 
> 赞同：0
> 
> 时间：2013-02-15T06:06:13.480
> 
> 标签：javascript, flash, swfobject

请帮帮我，我快疯了......关键代码在下面，它不起作用，“对象”中没有任何内容：

```
 var obj=document.createElement('object');
    obj.id="FlashFormulaEditor";
    obj.width="520";
    obj.height="500";
    document.body.appendChild(obj);
    table.appendChild(obj);
    var swfVersionStr = "9.0.0";
    // To use express install, set to playerProductInstall.swf, otherwise the empty string. 
    var xiSwfUrlStr = "";
    var flashvars = {};
    var params = {};
    params.quality = "high";
    params.bgcolor = "#ffffff";
    params.allowscriptaccess = "sameDomain";
    params.allowfullscreen = "true";
    var attributes = {};
    attributes.id = "FlashFormulaEditor";
    attributes.name = "FlashFormulaEditor";
    attributes.align = "middle";
    swfobject.embedSWF("./FlashFormulaEditor.swf", "FlashFormulaEditor",  "475", "552", swfVersionStr, xiSwfUrlStr, flashvars, params, attributes); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:15:59.977

试试这个：

```
function initFlash(){
            var flashvars = {};
            var params = {};
            var attributes = {};
            params.quality = "high";
            params.play = "true";
            params.loop = "true";
            params.wmode = "transparent";
            params.scale = "showall";
            params.menu = "false";
            params.devicefont = "true";
            params.salign = "";
            params.allowScriptAccess = "always";
            params.allowFullScreen = "true";
            attributes.id = "swfLoader";
            attributes.name = "swfLoader";
            swfobject.embedSWF("your.domain/flash.swf", "flashContent", "100%", "100%", "11", false, flashvars, params, attributes);
        } 
```

只需将 id('flashContent') 添加到您的 div 中。希望这可以帮助。

# android - 片段中的 AlertDialog

> ID：14889174
> 
> 赞同：0
> 
> 时间：2013-02-15T06:06:15.267
> 
> 标签：android, android-fragments, android-alertdialog, android-dialogfragment

`AlertDialog`我在片段中工作时遇到了一些困难。我有六个按钮，当单击每个按钮时，`AlertDialog`框应显示其内容。即使 prg 运行没有任何错误并且 tat 片段页面正在打开按钮，如果我单击按钮对话框没有打开，任何人都可以帮助我吗？提前致谢。

这是我的片段活动代码：

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class Fragment3 extends  DialogFragment implements OnClickListener  {

    private static final int ALERT_DIALOG1 = 1;
  private static final int ALERT_DIALOG2 = 2;
  private static final int ALERT_DIALOG3 = 3;
  private static final int ALERT_DIALOG4 = 4;
  private static final int ALERT_DIALOG5 = 5;

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
      //setContentView(R.layout.activity_fragment2);
    View view =  inflater.inflate(R.layout.fragment3layout, container, false);

      Button alert1 = (Button) view.findViewById(R.id.Button1);
      alert1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
          showDialog(ALERT_DIALOG1);
      }
  });

 default:
        dialog = null;
    }
    return dialog;

} 
```

这是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.pacificstereoapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

            </intent-filter>
        </activity>
        <activity
            android:name="com.example.a.Fragment1"
            android:label="@string/title_activity_fragment1" >
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:10:21.653

您正在创建对话框，但并未真正显示它。打电话`dialog.show()`。

# html - 依赖选择选项一个又一个

> ID：14889175
> 
> 赞同：0
> 
> 时间：2013-02-15T06:06:27.987
> 
> 标签：html, jsp, jstl

大家早上好，我有一段对我来说看起来很重的代码，我想用轻量级的代码。我的任务是使用两个下拉框选择州和城市。我需要根据州下拉框更改城市下拉框，请帮助我

这是我的代码:::

```
<fieldset>
    <legend>Compare To</legend>
    <span>state</span><select id="locationId" name="locationId">
    <option value="0" <c:if test="${loc.location eq '0'}">selected="selected"</c:if>>All Locations</option> 
    <c:forEach items="${locationDetailsList}" var="locationDetails">
        <option value="${locationDetails.locationId}" <c:if test="${loc.locationId2 eq locationDetails.locationId}">
        selected="selected"</c:if>>${locationDetails.locationName}</option>
    </c:forEach></select>

    <span>area</span> 
    <select id="area" name="area">
        <option value="0" <c:if test="${locationId eq '0'}">selected="selected"</c:if>>All Locations</option> 
        <option value="1" <c:if test="${locationId ge '1'}">selected="selected"</c:if>>Hyderabad</option>
        <option value="1" <c:if test="${locationId ge '1'}">selected="selected"</c:if>>Vizag</option>
    </select> 
</fieldset> 
```

提前谢谢亲爱的朋友们...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:34:29.740

从这个问题的答案：[JSF2 Facelets中的JSTL......有意义吗？](https://stackoverflow.com/q/3342984/1065197), *[JSTL](https://stackoverflow.com/tags/jstl/info)标记 (...) 在视图构建期间执行*，这意味着它们在构建要呈现给客户端的 HTML 时仅被评估一次。

知道这一点，您`<select id="area">`只能通过对服务器执行完整的请求/响应以根据`<select id="locationId">`组件的值加载值来更新您的数据。

在这个时代，仅使用下拉列表的元素让用户获得全新的响应是非常痛苦的，因此您可以使用 Ajax 方法，如下所示：[如何使用 Servlets 和 Ajax？](https://stackoverflow.com/a/4113258/1065197)请注意，BalusC 甚至在Here's another example 中编写了一个关于构建`<option>`列表的完整示例，该*示例显示**为*部分。`Map<String, String>`*`Map<String, String>``<option>`*

请记住，对于 ajax 解决方案，您的`<select id="area">`内部不应该有任何 JSTL 标记，它根本不应该有任何元素：

```
<select id="area">
</select> 
```

# c - 使用套接字的 Http 客户端程序不起作用

> ID：14889176
> 
> 赞同：-2
> 
> 时间：2013-02-15T06:06:29.910
> 
> 标签：c, http, sockets, network-programming, httpclient

```
#include <stdio.h>
#include <stdlib.h>
#include <netdb.h>
#include <netinet/in.h>
#include <sys/socket.h>
#include <string.h>

/* getLine() Reads a line from a stream and stores it in "string"

 size_t getLine(char **string, FILE *stream)
 {
 size_t rd=0;
 char s;
 int ln = getline(string,&rd,stream);

 if(ln == -1)
 {

 return -1;
 }
 return rd;
 }

 /* Convert file descriptor into stream (i.e., FILE*).  Exit if there is a
 * failure. */

FILE* getStream(int sock)
{
    FILE *fp;
    fp = fdopen(sock,"a+b");

    if(fp == NULL)
    {
        fprintf(stderr,"error opening socket\n");
        exit(EXIT_FAILURE);
    }

    return fp;
}

/* Creates a TCP socket and returns the file descriptor for it. */

int createSocket(char *hostname, char *port)
{
    if(hostname == NULL || port == NULL)
    {
        fprintf(stderr, "One or more parameters passed to createSocket() are NULL\n");
        exit(EXIT_FAILURE);
    }

    /* Request a TCP connection using the version of IP that is configured
     on the machine.
     */

    struct addrinfo * result, *h;
    struct addrinfo hints;
    memset(&hints, 0, sizeof(hints));
    hints.ai_family = AF_INET;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE|AI_ADDRCONFIG;

    int error = getaddrinfo(hostname, "http", &hints, &result);

    if(error != 0)
    {
        fprintf(stderr,"\n error in getaddrinfo:%s\n",gai_strerror(error));
        exit(EXIT_FAILURE);
    }

    /* TODO: Create a socket using socket() and the "result" structure.
     Check for an error. If one occurs, print a message and exit.
     */

    for(h=result; h != NULL; h = h->ai_next)
    {
        int sock = socket(h->ai_family, h->ai_socktype, h->ai_protocol);

        if(sock == -1)
        {
            fprintf(stderr,"\nerror in creating Socket");
            exit(EXIT_FAILURE);
        }

        /* TODO: Call connect() with "sock" and information from the
         "result" struct to start a TCP connection. Check for error. If
         one occurs, print message and exit.
         */

        if(connect(sock, h->ai_addr, h->ai_addrlen) == -1)
        {
            fprintf(stderr,"\nerror in connecting");
            exit(EXIT_FAILURE);
        }

        freeaddrinfo(result);
        return sock;

    }
}

int main(int argc, char *argv[])
{

    /* TODO: Check number of arguments */

    if(argc<2)
    {
        printf("expected a name for resolving");
        exit(1);
    }

    /* Setup socket. */

    int sock = createSocket(argv[1], argv[2]);
    FILE *stream = getStream(sock);
    printf("\n###### CLIENT IS SENDING THE FOLLOWING TO THE SERVER\n");

    /* TODO: Write HTTP request to "stream" */

    printf(" GET / HTTP/1.0\n Host: %s\n Connection: close \r\n \r\n", argv[1]);
    fprintf(stream, "GET / HTTP/1.0\n Host: %s\n Connection: close \r\n \r\n", argv[1]);

    while(1) // while there is data to read
    {
        char *string = NULL;
        printf("#####CLIENT RECEIVED THE FOLLOWING FROM SERVER\n");
        int len = getLine(&string, stream);
        printf("%s",string);
        while((len=getLine(&string, stream)) != -1)
        {
            printf("%s",string);
        }

        fclose(stream);
        printf("\n##### Connection closed by server\n");
        exit(EXIT_SUCCESS);
        free(string);

    } // end infinite loop
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:54:46.697

您没有遵守[HTTP 协议规范](http://www.w3.org/Protocols/HTTP/1.0/spec.html)。它显然要求您使用 CRLF 终止请求标头中的每一行，这意味着 \r\n。在您的情况下，您仅使用 LF 终止某些行，因此服务器的行为未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:13:13.880

您可以使用 curl 库来构造 http(s) 请求。看看这个

[http://curl.haxx.se/libcurl/](http://curl.haxx.se/libcurl/)

# jquery - 在 2g 网络上运行我的应用程序

> ID：14889181
> 
> 赞同：0
> 
> 时间：2013-02-15T06:07:19.887
> 
> 标签：jquery, html, mobile, mobile-application

**我的应用程序说明：**

我有一个使用 PHONEGAP 以简单的 HTML/CSS/Javascript-Jquery 构建的应用程序！我的应用程序在与 DB 进行通信的服务器上运行了一个 WCFService。我使用 AJAX 调用从我的应用程序调用了 WCFService ！！！

现在一切就绪，我已经构建了应用程序并在我的移动设备（ios/android/blackberry）上对其进行了测试！！

***！！..答对了..！！***它在测试 WIFI 连接时工作正常。但是当尝试使用移动 GPRS（2g 数据）连接时它失败了。我是否应该指定任何其他设置以确保我的应用程序也可以在 2g 网络上运行？？？

**更新：- 我的 AJAX 代码：**

```
$.ajax({
                url: http://www.xyzftp.com/WCFService/Service1.svc/rejectrequest,
                data:JSON.stringify({login:{"loginid":userid,"reqType":"R"}}),
                type: 'POST',
                dataType:"json",
                contentType: 'application/json',
                success: function(data) {  

    $.each(data.GetRejectedRequestsMethodResult,function(key,val){

                //my code on success//

                error: function(data, status, jqXHR) {                       
                    alert('There was an error.');
                }
            }); // end $.ajax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:00:17.783

没有单独的设置..尝试使用[连接 API](http://docs.phonegap.com/en/1.0.0/phonegap_connection_connection.md.html)检测您的网络连接类型.确保您有相当大的速度并确保您启用了移动数据..它应该可以工作..

# jquery - 图像模糊跨浏览器不适用于 safari、opera 和 ie

> ID：14889182
> 
> 赞同：0
> 
> 时间：2013-02-15T06:07:46.270
> 
> 标签：jquery, internet-explorer, safari, cross-browser, opera

我有这个代码：

JS：

```
<script src="scripts/jquery.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("img").css({
        "filter": "url(#example-one)", 
        "-webkit-filter": "blur(4px)", 
        "-moz-filter": "blur(4px)",
        "-o-filter": "blur(4px)",
        "-ms-filter": "blur(4px)"

    });
    window.setTimeout(function() {
        $("img").css({
            "filter": "url(#example-two)", 
            "-webkit-filter": "blur(3px)", 
            "-moz-filter": "blur(3px)",
            "-o-filter": "blur(3px)",
            "-ms-filter": "blur(3px)"

        });
    }, 3000);
    window.setTimeout(function() {
        $("img").css({
            "filter": "url(#example-three)", 
            "-webkit-filter": "blur(2px)", 
            "-moz-filter": "blur(2px)",
            "-o-filter": "blur(2px)",
            "-ms-filter": "blur(2px)"

        });
    }, 3100);
    window.setTimeout(function() {
        $("img").css({
            "filter": "url(#example-four)", 
            "-webkit-filter": "blur(1.5px)", 
            "-moz-filter": "blur(1.5px)",
            "-o-filter": "blur(1.5px)",
            "-ms-filter": "blur(1.5px)"

        });
    }, 3200);
    window.setTimeout(function() {
        $("img").css({
            "filter": "url(#example-five)", 
            "-webkit-filter": "blur(1px)", 
            "-moz-filter": "blur(1px)",
            "-o-filter": "blur(1px)",
            "-ms-filter": "blur(1px)"

        });
    }, 3300);
    window.setTimeout(function() {
        $("img").css({
            "filter": "", 
            "-webkit-filter": "", 
            "-moz-filter": "",
            "-o-filter": "",
            "-ms-filter": ""

        });
    }, 3400);
    $("#promoIMG").fadeIn(5000);
}); 
```

html:

```
<div id="page">

    <div id="promoIMG">
        <a href="main.php"><img src="images/akb1.png" alt="" onMouseOver="this.src='images/akb2a.png'" onMouseOut="this.src='images/akb1.png'"/></a><br/>
        <img src="images/akb2.png" alt="AKB" />

    </div>

    <svg height="0" xmlns="http://www.w3.org/2000/svg">

        <!-- Filter ID/Name -->
        <filter id="example-one">

            <!-- Amount of Gaussian Blur that should be applied -->
            <feGaussianBlur stdDeviation="4"/>

        </filter>
        <filter id="example-two">
            <feGaussianBlur stdDeviation="3"/>
         </filter>
         <filter id="example-three">
            <feGaussianBlur stdDeviation="2"/>
         </filter>
         <filter id="example-four">
            <feGaussianBlur stdDeviation="1.5"/>
         </filter>
         <filter id="example-five">
            <feGaussianBlur stdDeviation="1"/>
         </filter>
    </svg>
    </div> 
```

Tt 在 chrome 和 mozilla firefox 中运行完美，但是当我尝试在 safari、opera 和 IE 上运行时，图像模糊动画不起作用。

我的代码有问题吗？还是 safari、opera 和 IE 缺少的东西？

任何帮助将不胜感激，谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:22:21.237

您可以改用 svg 的`<image>`元素（基本上是在 svg 内移动图像），这应该适用于大多数浏览器（请参阅[caniuse](http://caniuse.com/#feat=svg-filters)以获取支持图表）。

# ios - 在我的 ipad 应用程序中打开电子邮件附件

> ID：14889186
> 
> 赞同：0
> 
> 时间：2013-02-15T06:08:14.557
> 
> 标签：ios, objective-c, cordova, phonegap-plugins

我想通过我的 iOS(iPad) 应用程序打开电子邮件附件（比如 .ppt、.doc、.xls .. 等文件）。我能够在邮件附件上实现“打开方式”，之后我的应用程序就会打开。handleOpenURL函数将与打开的附件的 url 一起被调用**。**现在在这个函数中，当我尝试检查文件是否存在时，它不存在。

```
NSFileManager *defaultManager = [NSFileManager defaultManager];

NSString *filePath  = [NSString stringWithFormat:@"%@",url];
if ([defaultManager fileExistsAtPath:filePath]) {
    NSLog(@"fileExists");
}else{
    NSLog(@"file does not Exists");
} 
```

我想在这里实现的是我想通过这个 url 复制文件并将其粘贴到其他文件夹中。但是这里文件本身不存在。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:16:38.057

这不是将 NSURL 转换为路径的正确方法。你应该做：

```
NSString *filePath = [url path]; 
```

# html - 如何为多个标签分配类？

> ID：14889195
> 
> 赞同：1
> 
> 时间：2013-02-15T06:09:17.977
> 
> 标签：html, css

就像是：

html:

```
<tr class = "foo"> 
   <td class = "foo"> ... </td>
   <td class = "foo"> ... </td>
</tr> 
```

样式表：

```
// I want to merge these
tr.foo { ... } 
td.foo { ... } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:12:33.300

只需使用`.foo{/*styles in here*/}`无需指定标签

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T06:11:57.963

您可以使用逗号在 CSS 中组合规则集：

```
tr.foo, td.foo { /* all these rules apply to both */ } 
```

这当然不排除您拥有其他规则集，包括另一个`tr.foo`or `td.foo`，或覆盖级联中的规则。

如果你想使用后代选择器，它只是一个空格：

```
tr.foo td.foo { /* affects all td class=foo children of tr class=foo */ } 
```

还有更具体的子选择器`>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:15:02.913

```
<tr id="trow" >
  <td id="tcol">...</td>
  <td id="tcoll">..</td>
</tr> 
```

**CSS**

```
#trow,#tcol,#tcoll { 
-------------
-------------
} 
```

你提到的类名是一样的..

```
foo {
---------
---------
} 
```

足够。如果样式相同，则无需合并..

# silverlight - 无法退出我的 WP7 silverlight 应用程序

> ID：14889196
> 
> 赞同：0
> 
> 时间：2013-02-15T06:09:17.503
> 
> 标签：silverlight, windows-phone-7

我使用此方法关闭我的应用程序：

```
public void quit()
{
    if (NavigationService.CanGoBack)
    {
        while (NavigationService.RemoveBackEntry() != null)
        {
            NavigationService.RemoveBackEntry();
        }
    }
} 
```

当我按返回键后调用它时，应用程序按预期关闭：

```
protected override void OnBackKeyPress(CancelEventArgs e)
{
    quit();
} 
```

但是在我调用此方法的其他任何地方，堆栈被清空但应用程序不会关闭。

如果我尝试：

```
quit();
NavigationService.GoBack(); 
```

会出现运行时错误。如果有人可以帮助我，因为我不喜欢通过异常，因为它将被记录为市场统计数据中的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:15:11.667

无需清除导航堆栈；如果应用程序终止，导航堆栈将消失。不要担心用户前进；没有前进键。

要删除异常：

```
quit();
if( NavigationService.CanGoBack)
{
    NavigationService.GoBack(); 
} 
```

但在你这样做之前，看看代码：你想完成什么？首先，您要清理堆栈，然后要使用堆栈。

# objective-c - iPad 上的文字看起来很模糊

> ID：14889197
> 
> 赞同：0
> 
> 时间：2013-02-15T06:09:30.577
> 
> 标签：objective-c, uifont

我已经在 iPhone 上创建了 iPhone 应用程序，它工作得很好，但是当我在我的 ipad 上运行它并将它移动到我的应用程序中的 2x 文本时，显示模糊是否有任何解决方案在我的视网膜 ipad 上的文本看起来也像 iPhone 上一样平滑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:18:02.173

几个月前我遇到了同样的问题，这是因为您的应用程序仅适用于 iPhone。请不要担心这个问题，因为这个问题只会出现在 iPad（非 Retina）上。对于带 Retina 的 iPad，我可以正常工作。您将在视网膜 (iPad) 上看到平滑的字体。如果您想在 iPad（非视网膜）上使用相同的功能，请选择通用应用程序。我使用通用应用程序解决了这个问题。

# google-app-engine - 谷歌应用引擎数据存储统计信息未显示

> ID：14889198
> 
> 赞同：3
> 
> 时间：2013-02-15T06:09:35.007
> 
> 标签：google-app-engine

我已经在 Google App Engine 上部署了一个应用程序，它运行良好。所有数据都显示在 DataSotre Viewer 中，但 DataStore 统计页面持续显示未找到统计信息。自从我部署我的应用程序以来已经超过 2 天，因此它排除了在部署应用程序 1 天后生成统计信息的可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T21:17:33.040

GAE 需要 1-2 天才能生成报告。所以要有耐心。

# objective-c - Objective C中的环境变量列表？

> ID：14889199
> 
> 赞同：3
> 
> 时间：2013-02-15T06:09:36.117
> 
> 标签：objective-c, environment-variables

我需要在 Objective C 中使用的环境变量列表。

例如`NSObjCMessageEnabled: YES`，它用于方法记录。请列出所有此类方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:58:05.063

关于 Apple 的[文档](http://developer.apple.com/library/mac/#technotes/tn2124/_index.html)，列表因版本而异。例如，对于我的 OSX 10.2.8，存在以下调试环境变量（除了**NSObjCMessageLoggingEnabled**）：

*   **OBJC_PRINT_OPTIONS**：列出设置了哪些选项
*   **OBJC_PRINT_IMAGES**：在加载时记录图像和库名称
*   **OBJC_PRINT_LOAD_METHODS**：记录对类和类别+加载方法的调用
*   **OBJC_PRINT_INITIALIZE_METHODS**：记录对类+初始化方法的调用
*   **OBJC_PRINT_RESOLVED_METHODS**：记录由 +resolveClassMethod: 和 +resolveInstanceMethod: 创建的方法
*   **OBJC_PRINT_CLASS_SETUP**：记录类和类别设置的进度
*   **OBJC_PRINT_PROTOCOL_SETUP**：记录协议设置的进度
*   **OBJC_PRINT_IVAR_SETUP** : 非脆弱 ivars 的日志处理
*   **OBJC_PRINT_VTABLE_SETUP**：类vtables的日志处理
*   **OBJC_PRINT_VTABLE_IMAGES**：打印显示覆盖方法的 vtable 图像
*   **OBJC_PRINT_CACHE_SETUP**：方法缓存的日志处理
*   **OBJC_PRINT_FUTURE_CLASSES**：记录未来类的使用情况以进行免费桥接
*   **OBJC_PRINT_GC**：记录一些 GC 操作
*   **OBJC_PRINT_PREOPTIMIZATION**：日志预优化由 dyld 共享缓存提供
*   **OBJC_PRINT_CXX_CTORS**：记录对实例变量的 C++ ctors 和 dtors 的调用
*   **OBJC_PRINT_EXCEPTIONS**：日志异常处理
*   **OBJC_PRINT_EXCEPTION_THROW**：记录每个 objc_exception_throw() 的回溯
*   **OBJC_PRINT_ALT_HANDLERS** : 异常 alt 处理程序的日志处理
*   **OBJC_PRINT_REPLACED_METHODS**：日志方法替换为类别实现
*   **OBJC_PRINT_DEPRECATION_WARNINGS**：警告调用已弃用的运行时函数
*   **OBJC_PRINT_POOL_HIGHWATER**：记录自动释放池的高水位标记
*   **OBJC_PRINT_CUSTOM_RR：**具有未优化的自定义保留/释放方法的日志类
*   **OBJC_PRINT_CUSTOM_AWZ**：使用未优化的自定义 allocWithZone 方法记录类
*   **OBJC_DEBUG_UNLOAD**：警告卸载时表现不佳的捆绑包
*   **OBJC_DEBUG_FRAGILE_SUPERCLASSES**：警告子类可能已被超类的后续更改破坏
*   **OBJC_DEBUG_FINALIZERS**：警告实现 -dealloc 但不实现 -finalize 的类
*   **OBJC_DEBUG_NIL_SYNC**：警告@synchronized(nil)，它不同步
*   **OBJC_DEBUG_NONFRAGILE_IVARS**：反复排列非脆弱的 ivars
*   **OBJC_DEBUG_ALT_HANDLERS**：记录有关错误 alt 处理程序使用的更多信息
*   **OBJC_USE_INTERNAL_ZONE**：在专用的 malloc 区域中分配运行时数据
*   **OBJC_DISABLE_GC**：强制 GC 关闭，即使可执行文件希望它开启
*   **OBJC_DISABLE_VTABLES** : 禁用 vtable 调度
*   **OBJC_DISABLE_PREOPTIMIZATION**：禁用预优化，由 dyld 共享缓存提供

如果您想在您的系统中获取该列表，请设置`OBJC_HELP`并`YES`启动一个程序。然后，列表被转储。

# racket - 如何在 DrRacket 中将交互语言从简体中文更改回英语

> ID：14889200
> 
> 赞同：3
> 
> 时间：2013-02-15T06:09:36.697
> 
> 标签：racket

刚开始使用 DrRacket，但安装完成后它会自动将环境设置为简体中文。

我看过 drracket 中包含的教程：

```
C:\Program Files\Racket\doc\drracket\Menus.html#part._.Help 
```

但是，我的简体中文帮助按钮不包含“与英文 DrRacket 交互”选项

是否有另一种方法可以将环境语言更改回英语？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T06:36:18.813

确保您的`~/.racket/racket-prefs.rktd`:

```
(plt:human-language english) 
```

（针对版本 5.2.1 进行测试。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-27T08:19:08.247

*编辑：对不起。在发布答案之前，我没有仔细阅读该问题，因为该问题已经表明“帮助”菜单选项不可用。但是，我测试了将交互语言更改为中文变体并使用当前版本恢复为英文并且它可以工作。也许屏幕截图可以帮助其他人更快地找到此设置。*

您也可以直接使用 GUI 菜单`Help`更改交互语言（使用当前版本的 DrRacket 7.3 进行测试），例如选择`Interact with DrRacket in English`。

[![DrRacket 的帮助菜单，带有选择交互语言的选项](../Images/0490bf9064e85bcbebb77912bd2a0766.png)](https://i.stack.imgur.com/Dmrlt.png)

# python - 从零开始的搜索引擎

> ID：14889206
> 
> 赞同：0
> 
> 时间：2013-02-15T06:10:17.000
> 
> 标签：python, mysql, search, search-engine

我有一个 MySQL 数据库，里面有大约 10,000 篇文章，但这个数字可能会随着时间的推移而增加。我希望能够搜索这些文章并根据一些关键字提取最相关的结果。我知道有很多我可以插入的项目基本上可以为我做到这一点。但是，此应用程序非常简单，如果能够直接控制和了解整个事情的运作方式，那就太好了。因此，我想研究一下用 Python 从头开始​​构建一个非常简单的搜索引擎。

我什至不知道从哪里开始，真的。我可以将 MySQL DB 中的所有内容转储到一个列表中，并尝试根据相关性对该列表进行排序，但这似乎会很慢，并且随着数据库项目数量的增加而变慢。我可以使用一些基本的 MySQL 搜索来从 MySQL 的想法中获取前 100 个最相关的结果，然后对这 100 个进行排序。但这是一个两步过程，可能效率较低，如果文章刚刚发表，我可能会错过一篇文章的范围。

我可以采取哪些最佳方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:41:24.313

为 10,000 篇文章做“搜索引擎”的最佳选择是阅读**Toby Segaran 的“编程集体智能”**。精彩阅读并节省您的时间，请参阅 2007 年 8 月号的第 4 章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:19:43.097

如果您不介意用其他东西替换 MySQL 数据库，那么我建议使用[elasticsearch](http://pythonhosted.org/pyes/manual/usage.html)，使用[pyes](http://www.elasticsearch.org/)。

它具有您期望的搜索引擎的功能，包括全文搜索、出色的性能、分页、更像这样、可插件的评分算法，并且是实时的 - 所以当添加更多数据时，它将立即显示在搜索结果中。

如果您不想删除当前数据库，那么您可以轻松地并排运行它们，并将 MySQL 视为主数据库。

# jsf - valueChnageListner 在 jsf 中不起作用

> ID：14889209
> 
> 赞同：0
> 
> 时间：2013-02-15T06:10:29.513
> 
> 标签：jsf, jsf-1.2

我是 jsf 的新手。我正在我的食堂应用程序中实现“valueChangeListener”。在支持 bean 中，我有一个字符串映射。

我在 jsp 页面中有一个下拉列表，当我从下拉列表中选择值时，listner 被触发。我想在文本框中显示相应的值。但它给了我“为空转换器设置值==”错误。

当我实现转换器时，错误发生了变化，现在它显示“Bean 属性不可写”的错误。

我正在使用 jsf 1.2。我看过很多关于这个的帖子，但没有任何效果。

请大家帮帮我.....提前谢谢。

//jsp代码

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>

<f:view>
    <h:form id="myform">
        <html>
        <head>
                  <body>
<h:outputText value="select chinese" /><h:selectOneMenu id="chinese" value="#{mychinese.chineseName}" onchange="submit()">
            <f:valueChangeListener type="backing_Bean.ChineseValueListner" />       
<f:selectItems value="#{mychinese.chineseName}" />
        </h:selectOneMenu>

<br>
<h:outputText value="Message from server" /><h:inputText value="#{mychinese.chinesemessage}" />
 <h:message for="chinese"/>
<body>
<head>
<html>
</h:form>
<f:view> 
```

// backing bean 代码如下

```
package backing_Bean;

import java.util.LinkedHashMap;
import java.util.Map;
public class MyChinese {
        private static Map<String, String> chineseName;
        private String chinesemessage="Select-Chinese";

    static {
        chineseName = new LinkedHashMap<String, String>();
        chineseName.put("Select-Chinese", "Chinese");
        chineseName.put("Manchurian", "Manchurian");
        chineseName.put("Hakka", "Hakka");
        chineseName.put("Sezvan", "Sezvan");
        chineseName.put("Singapori", "Singapori");
        }

    public String getChinesemessage() {
        return chinesemessage.toString();
    }
    public void setChinesemessage(String chinesemessage) {
        this.chinesemessage = chinesemessage;
    }
    public Map<String, String> getChineseName() {
        return chineseName;
    }
    public void setChineseName(Map<String, String> chineseName) {
        MyChinese.chineseName = chineseName;
    }
}

//Listener code

package backing_Bean;

import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import javax.faces.event.AbortProcessingException;
import javax.faces.event.ValueChangeEvent;
import javax.faces.event.ValueChangeListener;

public class ChineseValueListner implements ValueChangeListener{

public void processValueChange(ValueChangeEvent event)
        throws AbortProcessingException {
    MyChinese chinese = (MyChinese) FacesContext.getCurrentInstance()
            .getExternalContext().getSessionMap().get("mychinese");
    chinese.setChinesemessage(event.getNewValue().toString());
    FacesMessage fm = new FacesMessage();
    fm.setDetail(chinese.getChinesemessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:06:47.437

问题是您使用 a`Map<String, String>`来保存您的选定值`<h:selectOneMenu>`：

```
<h:selectOneMenu id="chinese" value="#{mychinese.chineseName}" onchange="submit()">
    ...
</h:selectOneMenu> 
```

为了解决这个问题，您应该将`value`标记属性绑定到`String`托管 bean 中的属性。

MyChinese类修改：

```
public class MyChinese {
    private static Map<String, String> chineseName;
    private String chinesemessage="Select-Chinese";
    private String selectedChineseName;

    //the getter/setter functions for the new selectedChineseName attribute
    //the rest of your code
} 
```

JSP修改：

```
<h:selectOneMenu id="chinese" value="#{mychinese.selectedChineseName}"
    onchange="submit()">
    ...
</h:selectOneMenu> 
```

请注意，有了这个，也许你不需要`valueChangeListener`.

* * *

请注意，您的 HTML 存在问题：

*   `<head>`元素一定不能包裹元素，`<body>`首先你写了`<head>`，关闭它，然后它来了`<body>`，它的，嗯，body。
*   将`<h:form>`生成一个纯 HTML `<form>`，因此**它必须在`<body>`标签**内，而不是在标签外。
*   `<h:form>`应该只包含将在请求中发送的元素，而不包含更多元素，这是为了在重复时与托管 bean 中的值产生混淆。

修复此代码：

```
<f:view>
    <html>
        <head>
        </head>
        <body>
            <h:form id="myform">
                <h:outputText value="select chinese" />
                <h:selectOneMenu id="chinese" value="#{mychinese.selectedChineseName}" onchange="submit()">
                    <f:valueChangeListener type="backing_Bean.ChineseValueListner" />       
                    <f:selectItems value="#{mychinese.chineseName}" />
                </h:selectOneMenu>
            </h:form>
            <br>
            <h:outputText value="Message from server" />
            <h:inputText value="#{mychinese.chinesemessage}" />
            <h:message for="chinese"/>
        </body>
    </html>
<f:view> 
```

# php - 循环外的函数不更新

> ID：14889217
> 
> 赞同：1
> 
> 时间：2013-02-15T06:11:44.077
> 
> 标签：php, function, loops, while-loop

我正在尝试做一个循环，根据平均负载和 CPU/内存等显示一些条件。但是，它似乎只为整个循环提取一次使用信息。我希望它在每个循环中更新它：这就是我得到的，非常感谢任何形式的帮助！

```
<?php

exec("cat /proc/cpuinfo | grep processor | wc -l",$processors);
$totalc=$processors[0];

function sys_getloadavg_hack()
{
    $str = substr(strrchr(shell_exec("uptime"),":"),1);
    $avs = array_map("trim",explode(",",$str));

    return $avs;
}

$load = sys_getloadavg_hack();

  function get_memory() {
  foreach(file('/proc/meminfo') as $ri)
    $m[strtok($ri, ':')] = strtok('');
  return 100 - round(($m['MemFree'] + $m['Buffers'] + $m['Cached']) / $m['MemTotal'] * 100);
}

function print_exec(){
$out_arr=array();
$last_line=exec("mpstat",$out_arr);
return $last_line;
}

   for ($i=1; $i<=50; $i++)
  {

$memory = get_memory(); 

$cpu = substr(print_exec(),-5);

if($memory>"10" && $cpu>"10" && $load[0]<$totalc) {

echo "Everything is good!";

    } else {

}
    echo "Memory: $memory || CPU: $cpu || Load AVG: $load[0] || #CPU's: $totalc<br> || #Runtime: $i\n\n"; 
    usleep(800000);
}
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:22:27.413

您必须在每个循环中进行所有计算。例如：您只在循环之前调用**sys_getloadavg_hack()**一次。

尝试在 for 循环中添加 sys_getloadavg_hack() 调用。

```
for(...)
{
    $load = sys_getloadavg_hack();
    ...
} 
```

# iphone - GPUImageAlphaBlendFilter - 在一个图像上合并两个图像

> ID：14889219
> 
> 赞同：2
> 
> 时间：2013-02-15T06:11:50.980
> 
> 标签：iphone, ios, gpuimage

我想使用 GPUImageAlphaBlendFilter 将两个图像合并到一个图像上。我怎样才能做到这一点？

而且我想分别对这两个图像进行效果..有可能吗？？！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:45:34.303

你看过 GPUImageFilterGroup 吗？这使您可以创建一个过滤器，将其他预先构建的过滤器有效地链接到一个过滤器中；您可以只添加两个 GPUImageAlphaBlendFilter 实例。

有关使用示例，请参阅 GPUImageGaussianSelectiveBlurFilter 和 GPUImageHarrisCornerDetectionFilter。

# c - 不需要的 printf 输出

> ID：14889221
> 
> 赞同：0
> 
> 时间：2013-02-15T06:11:59.443
> 
> 标签：c, printf

我正在研究用于计算数据的遗留源代码。

为了调试一些错误情况，我在代码中添加了以下 printf

```
printf("What???!!!!....\n"); 
```

日志保存在一个文件中，我正在搜索字符串“What???!!!!....”，但我从未找到这个，因为它的输出如下：

> 什么？？|！！！....

由于这种不需要的输出，我已经浪费了很多时间。有人可以帮我找出原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:23:56.530

输出与 trigraph 相关，即字符串

> ？？？对应 |

检查您的 makefile 是否有 -trigraphs

确保现在有更明智的打印:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:25:20.680

在过去，键盘不一定包含编写 C 程序所需的所有字符。为了让那些没有正确键盘的人能够进行编程，最早的 C 编译器版本使用三字母和二字母，这是不常见的两个或三个字符组合，可以直接转换为可能不存在的键。以下是 C 的二合字母和三合字母列表：

[http://en.wikipedia.org/wiki/Digraphs_and_trigraphs#C](http://en.wikipedia.org/wiki/Digraphs_and_trigraphs#C)

？？？在列表中，它转换为 | 在预处理器中。

解决此问题的一种方法是在我上面链接的文章中：用 \ 分隔问号，或关闭字符串并在问号之间重新打开它。这可能是您的最佳选择，因为您正在使用遗留代码。

通常，您还可以使用编译器开关禁用二合字母和三合字母。有关这些详细信息，请参阅您的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:18:41.757

*Trigraphs*（3 个字符序列）和*Digraphs （2 个字符序列）被添加到 C 中，以帮助人们键入一些*[ISO 646](http://en.wikipedia.org/wiki/ISO/IEC_646)字符集之外的字符，并且没有符合该字符集的键盘。

[这是Diagraph and Trigraphs Wiki 页面](http://en.wikipedia.org/wiki/Digraphs_and_trigraphs)中的一段，它清楚地指定了它：

> C 编程语言的基本字符集是 ASCII 字符集的子集，其中包括 ISO 646 不变字符集之外的九个字符。当使用的编码（可能还有键盘）不支持这九个字符中的任何一个时，这可能会给编写源代码带来问题。ANSI C 委员会发明了三元组作为使用支持任何版本的 ISO 646 字符集的键盘输入源代码的一种方式。

要打印这两个问号，您可以转义第二个，或使用字符串连接：

```
printf("What??\?!!!!....\n"); 

printf("What??" "?!!!!....\n); 
```

# java - 分层应用程序中异常日志记录的最佳实践，以避免重复的错误日志消息

> ID：14889225
> 
> 赞同：1
> 
> 时间：2013-02-15T06:12:13.777
> 
> 标签：java, exception, logging, n-tier-architecture

在具有表示层、服务层和 dao 层的经典 3 层应用程序中，确保简洁且不重复的异常报告日志消息的最合适方法是什么。想象一下，您的 dao 层捕获任何类型的已检查异常（我们将使用 Java 术语，但相同的概念适用于其他异常处理语言）并将其转换为带有适当消息的 daoexception。是否应该在 dao 层同时记录相应的消息（例如“访问 db 时发生异常”+ e.getMessage()）？然后服务层捕获所有的daoexception，自己提供适当的服务层消息，将daoexception（包装）翻译成serviceexception，然后重新抛出。服务层是否也应该记录捕获的异常？简而言之：

*   应该只记录 dao 层吗？
*   应该只记录服务层吗？
*   两层都应该记录吗？
*   还是应该根据用例/服务调用等逐案考虑每种情况？

出于这个问题的目的，我忽略了表示层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:17:38.207

服务层异常中的堆栈跟踪将包含底层的 dao 异常，所以我想在服务层记录它是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:33:23.510

这个问题对我来说是主观的。AFAIK 它是由设计决定的。

要回答，您是否应该考虑记录调用和异常的要求，有些是您记录的，有些是您吃的，有些是您忽略的。对于 web 服务或其他组件调用，您当然需要服务层日志记录。我宁愿在你的问题中选择第四个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:34:10.903

我将以尽可能高的级别登录。

您是否碰巧使用`Commons`了 Apache 的任何库，例如您可能会遇到`StringUtils.isBlank()`. 这些库不会在其中记录任何错误消息，相反，如果需要，它们会将异常返回给您，由您决定处理它，或打印任何有用的调试消息。

# algorithm - 最早的最短匹配位置

> ID：14889228
> 
> 赞同：0
> 
> 时间：2013-02-15T06:12:27.243
> 
> 标签：algorithm

假设您有一个函数`matchWithMagic`返回给定字符串的布尔值。您不知道它是如何做到的任何细节，但您知道`true`意味着“匹配”的结果。假设这个函数的复杂度在时间和空间上与输入字符串的大小成线性关系。

现在的问题是实现一个函数，对于给定的字符串，它将返回一对整数，即`pos`和`len`这样`matchWithMagic(substring(inputstring,pos,len))` 匹配并且`pos`是可以为真的最小数字（最早匹配）。当`pos`已知时，`len`是匹配的最小数字（最短匹配，具有较低优先级）。对效率没有要求，但答案应该包括性能分析。

例如，假设输入字符串的魔术函数 return true 包含“Good Guy！” 或“坏人！” 您的函数应该返回`pos=5,len=8`“Good Bad Guy！”。

首选语言是 C/C++/Java/JavaScript/C#/Basic，但其他语言也可以。

**更新**

现在已经发布了一个简单的答案。我希望能出现更有效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:20:54.313

鉴于该功能是黑盒的，我不确定你能做得比这更好：

```
for (int pos = 0:n)
for (int len = 0:(n-pos))
  if (matchWithMagic(substring(inputstring,pos,len)))
    return {pos, len};
return null; 
```

我相信是`O(n^3)`（假设`matchWithMagic`是`O(n)`）。

# performance - 确定两个表是否具有相同的键集

> ID：14889234
> 
> 赞同：2
> 
> 时间：2013-02-15T06:12:50.357
> 
> 标签：performance, lua, set

我通过将集合的值放在表键中并`1`作为表值来使用 Lua 表作为集合，例如

```
function addToSet(s,...)      for _,e in ipairs{...} do s[e]=1   end end
function removeFromSet(s,...) for _,e in ipairs{...} do s[e]=nil end end

local logics = {}
addToSet(logics,true,false,"maybe") 
```

要测试两组是否相等，我需要确保它们具有完全相同的键。有什么有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T06:27:02.170

既然你问效率，我将提供一个替代实现。根据您预期的输入表，您可能希望避免第二个循环的查找。如果期望表相同，则效率更高，如果存在差异，则效率较低。

```
function sameKeys(t1,t2)
  local count=0
  for k,_ in pairs(t1) do
    if t2[k]==nil then return false end
    count = count + 1
  end
  for _ in pairs(t2) do
    count = count - 1
  end
  return count == 0
end 
```

另一个版本避免查找，除非它们是必要的。这可能在另一组用例中执行得更快。

```
function sameKeys(t1,t2)
  local count=0
  for _ in pairs(t1) do count = count + 1 end
  for _ in pairs(t2) do count = count - 1 end
  if count ~= 0 then return false end
  for k,_ in pairs(t1) do if t2[k]==nil then return false end end
  return true
end 
```

**编辑：**经过更多的研究和测试，我得出的结论是你需要区分 Lua 和 LuaJIT。使用 Lua，性能特征由 Lua 的 Parser 决定，因此由源代码令牌的数量决定。对于 Lua，这意味着 Phrogz 的版本很可能是更快的选择。对于 LuaJIT，情况发生了巨大变化，因为解析器不再是问题。对于几乎所有情况，我展示的第一个版本是一个改进，当表非常大时，第二个版本可能是最好的。我建议每个人都运行自己的基准测试并检查哪个版本在他们的环境中效果最好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T06:12:50.357

循环遍历两个表并确保键在另一个中具有值。一旦发现不匹配就失败，`true`如果两者都通过，则返回。对于大小集，`M`这`N`是 O(M+N) 复杂度。

```
function sameKeys(t1,t2)
  for k,_ in pairs(t1) do if t2[k]==nil then return false end end
  for k,_ in pairs(t2) do if t1[k]==nil then return false end end
  return true
end 
```

在行动中看到：

```
local a,b,c,d = {},{},{},{}
addToSet(a,1,2,3)
addToSet(b,3,1,2,3,3,1)
addToSet(c,1,2)
addToSet(d,2,1)
print(sameKeys(a,b)) --> true
print(sameKeys(a,c)) --> false
print(sameKeys(d,c)) --> true 
```

*注意测试`t[k]==nil`比仅仅`not t[k]`处理（不太可能）您`false`为表条目设置值并且希望键出现在集合中的情况要好。*

# vb.net - 在 vb.net 上执行 string.substring 时出错

> ID：14889236
> 
> 赞同：1
> 
> 时间：2013-02-15T06:13:05.507
> 
> 标签：vb.net, string

我正在使用 vb.net 2010，我想提取当年的最后 2 位数字。
例如，2013 应该返回 13。
我正在使用以下代码：

```
Dim sid_1 As String = Year(Now) 'or Year(Now).ToString
sid_1 = sid_1.Substring(sid_1.Length, 2)  'highlighted error 
```

但它返回一个错误：

```
ArgumentOutOfRangeException was unhandled  
Index and length must refer to a location with the string.  
Parameter name: length 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:14:28.850

应该是：

```
sid_1.Substring(sid_1.Length - 2, 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:20:59.193

[String.Substring()](http://msdn.microsoft.com/en-gb/library/aka44szs%28v=vs.80%29.aspx)的第一个参数是函数开始获取的索引，它不可能是长度，因为已经超出了字符串的范围。

如果您只想要格式中的最后两位数字`Date`，`String`我建议您使用以下代码：

```
sid_1 = Date.Now.ToString("yy") 
```

您可以在[MSDN 文档](http://msdn.microsoft.com/es-es/library/zdtaw1bw.aspx)`Date.Tostring()`中查看该方法的全部功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:22:40.277

用这个 ：

```
DateTime dt = DateTime.Now;
Console.WriteLine(dt.ToString("yy")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T06:26:49.133

为什么`SubString`？只需简单地`StartIndex = 2`使用`13` `:D`

```
 Dim sid_1 As String = Year(Now) 'or Year(Now).ToString
    sid_1 = sid_1.Substring(2)  'highlighted error
    MsgBox(sid_1.ToString()) 
```

# java - 显示图像时内存消耗增加 50 MB

> ID：14889238
> 
> 赞同：1
> 
> 时间：2013-02-15T06:13:09.933
> 
> 标签：java, swing, javafx-2

我有一个 JavaFX 应用程序（Swing 用户输入可能也有帮助），它基本上是图像库。它监视一个文件夹，一旦添加任何图像，图像就会显示在屏幕上。

添加更多图像后，应用程序内存消耗只会越来越大。在分析时，我观察到在添加图像（大小 1.3 MB）时，内存消耗增加了大约 50 MB。包含 Image 的类是一个`ImageView`包含`Image`. 有没有人有类似的经历？Windows 和 Mac 上的行为相同

PS：我知道这里的任何代码都会有所帮助，但没有什么可显示的。正如我所说，有一个包含 Image 的 ImageView 列表。ImageView 列表绑定到另一个`List`说`l1`。在检测到图像时，将图像添加到`l1`屏幕上显示的实际列表中

编辑：

我刚刚尝试了一个示例代码。我观察到，在它加载的每个 Iamge 上（在这种情况下为 2.3 MB），每个内存都会增加 12 MB：

```
package side;

import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import javafx.application.Application;
import javafx.geometry.Orientation;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.ScrollBar;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

public class Test extends Application {

public static void main(String... args) {
    launch(args);
}

@Override
public void start(Stage primaryStage) throws Exception {
    ScrollBar bar = new ScrollBar();
    bar.setOrientation(Orientation.VERTICAL);

    final VBox box = new VBox();
    Group root = new Group();
    root.getChildren().addAll(box, bar);
    Scene scene = new Scene(root);
    primaryStage.setScene(scene);
    primaryStage.setTitle("Layout Sample");
    primaryStage.show();

    for (int ik = 0; ik < 6; ik++) {
        System.out.println("1");
        ImageView i = new ImageView();
        InputStream is = new FileInputStream(new File("C:\\Users\\Jatin\\Documents\\BarcodeNew\\w.png"));
        Image im = new Image(is);
        i.setImage(im);
        box.getChildren().add(i);
        is.close();
    }

    //r.close();

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:47:57.437

发现两个问题：

1.  我没有关闭我的信息流。
2.  从此[_](https://stackoverflow.com/questions/14890351/high-memory-consumption-by-an-image)

> 请记住，PNG 图像的文件大小和未压缩图像在内存中的内存消耗是非常不同的。

在指定它的大小时，`Image`一切都很好。

# java - 如何使用javascript在输入类型文件中设置默认值？

> ID：14889239
> 
> 赞同：2
> 
> 时间：2013-02-15T06:13:11.707
> 
> 标签：java, javascript, jsp, jquery

当我想将文件从本地系统上传到服务器时。当时我想在输入类型文件字段中设置本地路径，但未设置为该值。所以我无法上传文件。

所以请帮助我。

代码 ：

```
<input type="file" name="fileName" id="fileId" value="c:\\\\myFolder\\myFile.txt"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:16:56.177

出于安全原因浏览器不允许，上传输入是只读的，除非您有自定义的上传输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:32:56.427

我认为您无法在没有人工干预的情况下从浏览器访问文件系统。如果浏览器允许，您可以破解您的系统。这将是浏览器中的一个潜在缺陷。但是，有一种方法可以解决您的问题。

您可以编写一个简单的应用程序来从文件系统中获取文件。您将要求客户端在机器中安装应用程序。现在这个应用程序将与浏览器交互并获取文件。

# java - Java - 通过帧传递值

> ID：14889242
> 
> 赞同：0
> 
> 时间：2013-02-15T06:13:17.060
> 
> 标签：java

我需要问一个小问题，因为它激怒了我。

如何在 Java 中将一个值从一帧传递到另一帧？

下面我编写了一个应该返回值的小脚本，但我不太清楚如何在另一个框架中访问它。

这是假设将 JcomboBox 中的当前值作为字符串返回到另一个框架的代码：

```
public String getUser(String user)

{

 user = (String)jComboBox1.getSelectedItem().toString();

return user;

} 
```

我认为它会起作用的方式是将该类的一个新实例调用到另一个框架中（类名称是editUser）所以这就是我认为我需要做的。

```
public editPass() 

{

initComponents();

editUser name = new editUser();

String test = name.getUser();

} 
```

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:19:21.510

问题在于这样做：`editUser name = new editUser()`是您正在创建一个新实例（除了根据约定类名应以大写开头的事实）。这会导致您丢失任何数据，因为您现在正在引用一个新对象。

如果您需要访问前一帧的数据，您需要做的是：

*   使用所有相关数据创建一个新对象并将其传递到下一帧或
*   将当前帧传递到下一帧。这将允许新框架能够引用前一个框架。

作为旁注，[卡片布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)可能与您要实现的目标相关。

编辑：根据您的评论问题：假设您有一个`editUser`框架，假设我们调用它`frame1`并填充您需要的所有数据。然后，用户按下 Next 或类似的东西会导致他/她进入下一帧，因此`frame1`将不再隐藏或不存在，具体取决于您的实现。

让我们称之为第二帧`frame2`。现在，`frame2`您需要访问存储在`frame1`. 这样做：`editUser name = new editUser();`将导致`frame2`创建 的**新**实例`frame1`，因此意味着您创建了一个具有空值的新框架。调用`name.getUser()`不应该产生任何东西。

当我提到*使用相关数据创建对象时，*我的意思是，如果您正在编辑用户值，您可以创建一个对象，该对象将包含所有已编辑的信息。所以它可以有像`userId`, `originalUserName`,`newUserName`等这样的字段。

用户在您的 中按下 Next 后`frame1`，您可以创建和填充此对象，并使用它将数据从一帧传输到下一帧。在这种情况下，您将创建的对象将被称为数据传输对象 (DTO)。

因此，第二帧的构造函数看起来像这样：

```
public editPass(UserEditDTO userEditDTO)
{
    initComponents();
    String test = userEditDTO.getNewUserName();  //gets the new username the user has provided.
} 
```

在您的`editUser`班级中，就在创建 的新实例之前`editPass`，您将执行以下操作：

```
...
UserEditDTO uEDTO = new UserEditDTO();
uEDTO = ... //set all the relevant fields here
new editPass(uEDTO).setVisible(true);
... 
```

或者，您可以传递对`frame1`而不是 DTO 的引用。这种方法更简单。所以你的构造函数`editPass`看起来像这样：

```
public editPass(editUser editUser)
{
    initComponents();
    String test = editUser.getUser();
} 
```

您的`editUser`代码如下所示：

```
...
new editPass(this).setVisible(true);
... 
```

# c++ - C2143 类型的错误 - 在 '<' 之前缺少 ','

> ID：14889243
> 
> 赞同：0
> 
> 时间：2013-02-15T06:13:22.177
> 
> 标签：c++, visual-studio

我试图通过扩展抽象类 linearList 来定义具体的*类**arrayList*。

 *我定义类的标题如下： class arrayList : public linearList 我在第 4 行得到错误：*错误 C2143：语法错误：在 '<' 之前缺少'，'*

当我通过扩展*linearList定义**链*时，也会发生这种情况。

 *我确保使用命名空间 std 并包含所有必要的文件。*linearList*类中没有错误，所以我认为这是*arrayList*中的错误。

我还在第 27 行收到错误“请参阅正在编译的类模板实例化 'arrayList' 的引用”（在代码中标记）。arrayList和*linearList**都*包含在下面。

数组列表

```
#include <iostream>
using namespace std;
template<class T>
class arrayList : public linearList<T> 
{
public:
    // constructor, copy constructor and destructor
    arrayList(int initialCapacity = 10);
    arrayList(const arrayList<T>&);
    ~arrayList() {delete [] element;}
    // ADT methods
    bool empty() const {return listSize == 0;}
    int size() const {return listSize;}
    T& get(int theIndex) const;
    int indexOf(const T& theElement) const;
    void erase(int theIndex);
    void insert(int theIndex, const T& theElement);
    void output(ostream& out) const;
    // additional method
    int capacity() const {return arrayLength;}
protected:
    void checkIndex(int theIndex) const;
    // throw illegalIndex if theIndex invalid
    T* element;      // 1D array to hold list elements
    int arrayLength;       // capacity of the 1D array
    int listSize;          // number of elements in list
}; //line 28
template<class T> 
arrayList<T>::arrayList(int initialCapacity)
{
    // Constructor.
    if (initialCapacity < 1)
    {
        ostringstream s;
        s << "Initial capacity = " << initialCapacity << " Must be > 0";
        throw illegalParameterValue(s.str());
    }
    arrayLength = initialCapacity;
    element = new T[arrayLength];
    listSize = 0;
}
template<class T>
arrayList<T>::arrayList(const arrayList<T>& theList)
{
    // Copy constructor.
    arrayLength = theList.arrayLength;
    listSize = theList.listSize;
    element = new T[arrayLength];
    copy(theList.element, theList.element + listSize, element); 
}
template<class T>
void arrayList<T>::checkIndex(int theIndex) const
{
    // Verify that theIndex is between 0 and 
    // listSize - 1.
    if (theIndex < 0 || theIndex >= listSize)
    {
        ostringstream s;
        s << "index = " << theIndex << " size = " 
            << listSize;
        throw illegalIndex(s.str());
    } 
}
template<class T>
T& arrayList<T>::get(int theIndex) const
{
    // Return element whose index is theIndex.
    // Throw illegalIndex exception if no such
    // element.
    checkIndex(theIndex);
    return element[theIndex];
}
template<class T>
int arrayList<T>::indexOf(const T& theElement)const
{
    // Return index of first occurrence of theElement.
        // search for theElement
        int theIndex = (int) (find(element, element
        + listSize, theElement) - element);
    // check if theElement was found
    if (theIndex == listSize)
        return -1; // not found
    else return theIndex; 
}
template<class T>
void arrayList<T>::erase(int theIndex)
    {// Delete the element whose index is theIndex.
    checkIndex(theIndex);
    // valid index, shift elements with higher
    // index
    copy(element + theIndex + 1, element + 
    listSize,element + theIndex);
    element[--listSize].~T(); // invoke destructor
}
template<class T>
void arrayList<T>::insert(int theIndex, const T& theElement)
{
    // Insert theElement.
    if (theIndex < 0 || theIndex > listSize)

    {// invalid index
        // code to throw an exception comes here
    }
    // valid index, make sure we have space
    if (listSize == arrayLength)
    {
        // no space, double capacity
        changeLength1D(element, arrayLength, 
        2 * arrayLength);
        arrayLength *= 2;
    }
    // shift elements right one position
    copy_backward(element + theIndex, 
    element + listSize,
    element + listSize + 1);
    element[theIndex] = theElement;
    listSize++;
}
template<class T>
void arrayList<T>::output(ostream& out) const
{
    // Put the list into the stream out.
    copy(element, element + listSize, 
        ostream_iterator<T>(out, "  ")); 
}
template <class T>
ostream& operator<<(ostream& out, const arrayList<T>& x)
{x.output(out); return out;} 
```

线性列表

```
#include <ostream>

using namespace std;

template<class T>
class linearList 
{
public:
virtual ~linearList() {}
virtual bool empty() const = 0;
virtual int size() const = 0;
virtual T& get(int theIndex) const = 0;
virtual int indexOf(const T& theElement)const = 0;
virtual void erase(int theIndex) = 0;
virtual void insert(int theIndex,const T& theElement) = 0;
virtual void output(ostream & out) const = 0;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:01:18.243

洛里有正确的答案，但以防万一它不清楚：

`arrayList`继承自`linearList`，因此如果`arrayList`不知道`linearList`. 这就是编译器在第 4 行抱怨的原因；它还不知道`linearList`。`using namespace std`与这个问题无关，顺便说一句，`using`在头文件中包含语句是不好的做法。

假设您的“ArrayList”代码示例在`array_list.h`并且“LinearList”在`linear_list.h`，您应该将前几行更改为`array_list.h`：

```
#include <iostream>
#include "linear_list.h"

template<class T>
class arrayList : public linearList<T> 
{
public:
... 
```**

# c# - 出现错误请提供有效的凭据。OAuth oauth_problem="OST_OAUTH_PARAMETER_ABSENT_ERROR", realm="yahooapis.com"

> ID：14889246
> 
> 赞同：0
> 
> 时间：2013-02-15T06:13:36.220
> 
> 标签：c#, asp.net

我正在开发“ [http://developer.yahoo.com/yql/console/](http://developer.yahoo.com/yql/console/) ”网站。 [http://query.yahooapis.com/v1/public/yql?q=select%20](http://query.yahooapis.com/v1/public/yql?q=select%20) *%20from%20social.profile%20where%20guid='ZGVG52ZDAYGCZRFF4VBA5L6ICY'

当我在地址栏中输入执行的字符串时

请提供有效的凭据。OAuth oauth_problem="OST_OAUTH_PARAMETER_ABSENT_ERROR", realm="yahooapis.com" 我认为发生了身份验证错误。但我不明白我在哪里使用 api 设置身份验证参数？在网址中？但如何？请帮助提供示例代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T06:41:43.553

我认为您需要添加 Authorization 标头，并将请求 Uri 作为标头。像这样的东西

```
 string headerString = "Authorization: OAuth realm=Your Oauth realm&" +
                            "oauth_timestamp= xxxxxxxx&oauth_nonce=your value&,"+
                            "oauth_version=1.0&oauth_signature_method=HMAC-SHA1&"+
                                "oauth_consumer_key=your key&,oauth_token=your token&"+
                                    "oauth_signature=your signature";

        var req = (HttpWebRequest)WebRequest.Create("requsting uri");
        req.ContentType = "application/xml";
        req.Method = "POST";
        req.Headers.Add(headerString);

        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        var sr = new StreamReader(resp.GetResponseStream());
        string response = sr.ReadToEnd().Trim(); 
```

在这里，我假设您正在拨打 POST 电话。

# android - 活动可以设置为动态壁纸吗？

> ID：14889247
> 
> 赞同：0
> 
> 时间：2013-02-15T06:13:46.497
> 
> 标签：android, live-wallpaper

我当前的活动是否可以作为设备的背景或壁纸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:15:32.847

不，这在 Android 上是不可能的。Android 上的所有动态壁纸都***必须***扩展`WallpaperService`。[这里](http://www.vogella.com/articles/AndroidLiveWallpaper/article.html)有一个关于制作动态壁纸的很棒的教程。

# javascript - 使用事件委托时如何访问与元素关联的数据

> ID：14889248
> 
> 赞同：1
> 
> 时间：2013-02-15T06:13:47.060
> 
> 标签：javascript, performance, dom-events, event-delegation

我在 n 行上使用事件委托，我的旧方法是将每一行与事件绑定，代码看起来像这样：

```
function getDiv (data) {
    var div = $("<div class='theDiv'>");

    div.click(function () {
        console.log(data);
    });

    return div;
}

function getContainer() {
    var i, container;

    container = $("<div class='container'></div>");
    for (i = 0 ; i < 1000 ; i++) {
        container.append(getDiv(i));
    }
    return container;
}

$("body").append(getContainer()); 
```

注意：在这种方法中，每个行元素 ( `theDiv`) 都可以访问它们的数据。

现在的问题是，我想绑定单击`container`并访问数据，事件委托方法如下所示：

```
function getNewDiv (data) {
    var div = $("<div class='theDiv'>");

    return div;
}

function getNewContainer() {
    var i, container;

    container = $("<div class='container'></div>");
    for (i = 0 ; i < 1000 ; i++) {
        container.append(getNewDiv(i));
    }

    container.click (function (e) {
        var targetElem = e.target;
        console.dir(e);
        if ($(targetElem).hasClass("theDiv")) {
            console.log("row was clicked");
        }
    })

    return container;
}

$("body").append(getNewContainer()); 
```

现在，如何访问与每一行关联的数据？

根据我的学习：我可以将数据添加到

*   data-*，但这会限制我使用简单的数据类型
*   $.data 关联到元素

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:21:29.163

您可以使用`$.data()`inside`getNewDiv()`来存储参考索引：

```
function getNewDiv (dataIndex) {
    return $("<div class='theDiv'>").data('idx', dataIndex);
} 
```

然后，使用每个元素的数据索引变量来引用大数据数组中的一个对象：

```
var mydata = [{ ... }, { ... }, { ... }];

container.on('click', '.theDiv', function () {
    var data = mydata[$(this).data('idx')];
    console.log("row was clicked");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:15:42.907

`.on`允许您进行事件委托：

```
container.on('click', '.theDiv', function () {
    //`this` is `.theDiv`.
}); 
```

# c++ - 创建 C++ DLL / COM

> ID：14889250
> 
> 赞同：0
> 
> 时间：2013-02-15T06:13:59.270
> 
> 标签：c++, visual-c++, dll, com, regsvr32

我是 C++ 新手。

我想创建一个 C++ dll 库，它也可以被其他 PC 使用。我尝试创建一个类型设置为“DLL”的 WIN32 控制台应用程序。我曾经使用“regsvr32”注册 dll，以便在其他 PC 中使用该 dll。

1.  我可以通过这种方式在其他PC上使用编译好的dll吗？（我错过了什么步骤？）

2.  COM 对象是否也是这样创建的？如果没有，我还需要做什么？（我看到 C# 使用某种 GUID(...)....）

3.  我必须在 dll 项目中创建一个用于声明的 .h 文件吗？

# mysql - 在命令行中流式传输文件

> ID：14889251
> 
> 赞同：0
> 
> 时间：2013-02-15T06:14:12.257
> 
> 标签：mysql, shell, centos, command-line-arguments

我想将一个非常大的 sql 文件导入我的测试数据库服务器，该文件大约 50GB。问题是如果我这样做`mysql -uuser -p < sqlfile.sql`，由于文件加载时间本身，这将需要很长时间。

因此，我想将文件拆分为 100MB 左右的非常小的块，`split -bytes=100M`但问题是拆分不会与 SQL 语句对齐（跨越文件边界的插入语句中断）。

现在我的问题是，有没有办法在命令行中流式传输多个文件？就像是

`mysql -user -p <1.sql < 2.sql < 3.sql`依此类推，如果可能的话，我是否可以做一些 shell scripting-fu 来使用`xargs`并`for`循环为目录中的所有文件执行此操作？

编辑：我尝试拆分文件受这篇文章的约束，[How to import LARGE sql files into mysql table](https://stackoverflow.com/questions/9337855/how-to-import-large-sql-files-into-mysql-table)。看来问题和我的一样。好吧，测试服务器是 8 GB，Xeon Quadcore，我在另一台服务器上尝试了相同的服务器，20 核 144GB，它在 11 小时运行时完成（共享一个，有很多 CPU/RAM 密集型工作正在进行...... ）。测试服务器，该过程尚未完成。所以我猜这是RAM +文件加载开销。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:21:46.187

> 问题是如果我这样做`mysql -uuser -p < sqlfile.sql`，由于文件加载时间本身，这将需要很长时间。

当您重定向这样的文件时，没有“加载时间”。MySQL 可以尽可能快地读取文件；没有开销。拆分文件不会给你任何加速。这是最快的。

> 现在我的问题是，有没有办法在命令行中流式传输多个文件？

它会比将文件分成一大块要慢，但如果你真的愿意，你可以这样做：

```
cat 1.sql 2.sql 3.sql | mysql -uuser -p 
```

或者，您可以为每个文件单独运行 mysql：

```
for file in *.sql; do mysql -uuser -p < "$file"; done 
```

# dependency-injection - Jersey/Jersey-spring @Autowire 在引入 AspectJ 并且未执行建议时不再工作

> ID：14889258
> 
> 赞同：2
> 
> 时间：2013-02-15T06:15:06.920
> 
> 标签：dependency-injection, jersey, aspectj

有没有人设法让 Jersey 与 AspectJ 一起工作（从春天开始）？

在我的示例中，我在 java/groovy 中有一个球衣类：

```
@Component
@Path("/resource")
class Resource{

    @Autowired
    ResourceAccess resourceAccess 

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public String getResource(@QueryParam("name") String name){
        def res= resourceAccess.getResource(name)
        return res
    }

...
} 
```

它工作得很好，resourceAccess 由 Spring 注入， /resource?name=test 返回我名为 test 的资源

但是当我想在游戏中引入 AspectJ (AOP) 时，resourceAccess 对象不再被注入，我的 Advice 甚至没有被执行。

我在 applicationContext.xml 中添加并创建了我的方面：

```
@Aspect
@Component
public class MyAspect{
    static final Logger logger = LoggerFactory.getLogger(MyAspect.class);

    @Before("execution(* com.test.Resource.getResource(..))")
    public void logBefore(JoinPoint joinPoint) {
        logger.debug("logBefore() is running!");
    }
} 
```

备注：如果我将建议中的切入点更改为针对其他目标，它会再次正常工作。

有人能在这个问题上帮助我吗？

# java - Android：不断用新值更新 TextView

> ID：14889263
> 
> 赞同：0
> 
> 时间：2013-02-15T06:15:32.587
> 
> 标签：java, android, textview

我需要一些关于如何使用通过我的代码生成的值来更新位于 XML 中的 Textview 的建议。

该程序通过画布绘制一条直线，我希望 textView 反映线的尖端 x 值。

我的代码如下：

```
package com.example.threadexperiment1;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.Bundle;
import android.view.View;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class MainActivity extends Activity {

    lineDrawing InfiniteLine;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        InfiniteLine = new lineDrawing (this);
        setContentView(R.layout.activity_main);

        Thread thread = new Thread(InfiniteLine);
        thread.start();

        RelativeLayout RL1 = (RelativeLayout)findViewById(R.id.RelativeLayout1);
        RL1.addView(InfiniteLine);

    }
    public class lineDrawing extends View implements Runnable {

        float x=100, y=100;
        Paint lineColour = new Paint ();
        TextView TV1 = (TextView)findViewById(R.id.textView1);

        //Constructor
        public lineDrawing(Context context) {                               
            super(context);
            lineColour.setColor(Color.BLACK);   
        }

        //ondraw codes
        @Override
        public void onDraw (Canvas canvas){
            canvas.drawLine(0,0,x,y,lineColour);

            if (x==500){
                x=0;
                y=0;
            }

            invalidate();
        }

        @Override
        public void run() {
            while (!Thread.currentThread().isInterrupted()) {

            try {
            Thread.sleep(250);
                } 

            catch (Exception e) {}
                x+=10;
                y+=10;
            }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:16:13.500

在线程中尝试 textView.setText(string) 。

# database - 如何存储和检索大量数据点以进行图形可视化？

> ID：14889266
> 
> 赞同：0
> 
> 时间：2013-02-15T06:15:41.923
> 
> 标签：database, graph

我正在考虑构建一个基于 Web 的数据记录和可视化服务。基本思想是在某个时间间隔内，某物（例如传感器）向服务器报告一个值（例如温度）。服务器将该值记录到数据库中。会有一个基于 Web 的 UI，允许我在基于时间的图表上查看这些数据。理想情况下，该图将具有各种分辨率（过去 30 秒、上周、去年等）。在一个超级理想的世界中，我将能够放大任何时间点的数据。

问题是传感器将产生大量数据。例如，每 5 秒报告一个值的传感器每天将生成大约 18k 个值。我在想象一个拥有数千个传感器的系统。随着时间的推移，这会变成大量数据。

天真的解决方案是将这些数据放入关系数据库并以我想要的各种方式检索它，但这不会扩展。

简单的解决方案是通过定期汇总数据来减少数据量。新数据可能会进入一个每 5 秒有一个数据点的表。每小时，一些系统将这些数据泵入另一个表，该表每分钟都有数据点，原始数据被删除。这会重复几个级别。这样做的缺点是时间越早，数据就越不详细。那可能没问题。我想，与具有这种汇总的系统相比，我需要大量的硬件来支持所有时间的数据的全分辨率。

有一个更好的方法吗？有现成的解决方案吗？我不得不想象这是一个相当普遍的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:11:46.190

您可能想要一个固定大小的数据库，例如 RRDTool： http: [//oss.oetiker.ch/rrdtool/](http://oss.oetiker.ch/rrdtool/)

Graphite 也建立在类似的数据存储实现之上：http: [//graphite.wikidot.com/](http://graphite.wikidot.com/)

# c# - 添加项目后如何显示列表框的内容？

> ID：14889268
> 
> 赞同：1
> 
> 时间：2013-02-15T06:15:51.147
> 
> 标签：c#, asp.net, .net, listbox-control

我有一个应用程序，我需要在其中显示 System.Web.UI.ListBox 中函数的字符串输出列表。要获得一个字符串输出（执行函数），它需要一些时间。我在生成字符串输出后将其添加到列表框。我的问题是应用程序等待整个时间（直到所有项目都被计算并添加到列表框），最后一口气显示整个列表框（由于生成大量输出字符串需要时间而等待了一段时间）。请有人帮我在添加后立即在页面上显示 listox 项目。谢谢。

```
public void add_to_list_box()
{
   int b; 
   for (b = 0; b <= 20; b++) 
   {
      string message = demo(b);
      ListBox1.Items.Add(message);
   }
   Button2.Text = "completed"; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:19:26.793

您必须了解填充 ListBox 的代码是在 Web 服务器上运行的，它会生成 html / css / 等。整个页面生成后，它会发送到客户端。在您的情况下，客户端是 Web 浏览器，生成页面后，发送到客户端才显示。

为了实现您的即时显示，您必须使用[Ajax](http://www.asp.net/ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:20:41.003

使用阿贾克斯。在 url 中放置 add_to_list_box() 函数，然后在 Ajax 的成功部分中，执行以下操作：

```
Button2.Text = "completed"; 
```

# android - Android 从父 Activity 访问 TabHost 视图

> ID：14889277
> 
> 赞同：0
> 
> 时间：2013-02-15T06:17:15.107
> 
> 标签：android, android-tabhost

我有一个带有 FrameLayout 的 tabhost 视图，一旦在我的 java 中选择了一个选项卡，我就会创建新的意图并在 FrameLayout 中调用不同的活动。

现在我正在尝试从父活动访问子活动（FrameLayout 内的那个）视图，但它不起作用。这是示例代码

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.book_download_activity);

        tabHost = getTabHost();
        addTab("Download File", R.drawable.ic_action_download,DownloadActivity.class);

   }

    private void addTab(String labelId, int drawable, Class<?> c) {
    Intent intent = new Intent(this, c);
    TabHost.TabSpec spec = tabHost.newTabSpec(labelId);

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.custom_tabs, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);

    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawable);
    icon.setScaleType(ImageView.ScaleType.FIT_CENTER);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
} 
```

现在名为 DownloadActivity 的活动有它自己的 xml 布局，我想从这个活动中访问它

错误日志

```
 02-15 06:08:09.147: E/AndroidRuntime(2588): FATAL EXCEPTION: main
            02-15 06:08:09.147: E/AndroidRuntime(2588): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.utext.unext/com.utext.unext.BookFrame}: java.lang.NullPointerException
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at android.os.Handler.dispatchMessage(Handler.java:99)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at android.os.Looper.loop(Looper.java:137)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at android.app.ActivityThread.main(ActivityThread.java:5039)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at java.lang.reflect.Method.invokeNative(Native Method)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at java.lang.reflect.Method.invoke(Method.java:511)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at dalvik.system.NativeStart.main(Native Method)
            02-15 06:08:09.147: E/AndroidRuntime(2588): Caused by: java.lang.NullPointerException
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at com.utext.unext.BookFrame.createView(BookFrame.java:190)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at com.utext.unext.BookFrame.onCreate(BookFrame.java:62)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at android.app.Activity.performCreate(Activity.java:5104)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
            02-15 06:08:09.147: E/AndroidRuntime(2588):     ... 11 more 
```

希望有意义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:38:46.893

我有类似的问题。这是我的代码

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Removes the title bar
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    Intent i = getIntent();
    mExtras = i.getExtras();
    mScreenNum = mExtras.getString("num");
    setContentView(R.layout.tab);
    int a = Integer.parseInt(mScreenNum);
                     this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    title = (TextView) findViewById(R.id.title_money2);
    // Removes the default keyboard
    this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);
    TabHost tabHost = getTabHost();
    // Creating tab here
    ImageView iv_tabl_selected = new ImageView(this);
    iv_tabl_selected.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f));
    iv_tabl_selected.setImageResource(R.drawable.tab_indicator_bill);

    ImageView iv_tab2_selected = new ImageView(this);
    iv_tab2_selected.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f));
    iv_tab2_selected.setImageResource(R.drawable.tab_indicator_recharge);

    ImageView iv_tab3_selected = new ImageView(this);
    iv_tab3_selected.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f));
    iv_tab3_selected.setImageResource(R.drawable.tab_indicator_dth);

    // Displaying the Tab host which are created
    TabSpec tab_first= tabHost.newTabSpec("One");
    tab_first.setIndicator(iv_tabl_selected);
    TabSpec tab_second= tabHost.newTabSpec("two");
    tab_second.setIndicator(iv_tab2_selected);
    TabSpec tab_three = tabHost.newTabSpec("three");
    tab_three.setIndicator(iv_tab3_selected);

    // Switching between Tabs
    mActivity1 = new Intent(this, Activity1.class);
    mActivity2= new Intent(this, Activity2.class);
    mActivity3= new Intent(this, Activity3.class);
    tab_first.setContent(mActivity1 );
    tab_second.setContent(mActivity2);
    tab_three.setContent(mActivity3);

    // The order in which the tabs are displayed
    tabHost.addTab(tab_first);
    tabHost.addTab(tab_second);
    tabHost.addTab(ttab_three);
    //tabHost.getTabWidget().getChildTabViewAt(2).setOnClickListener(null);

    // Switch case to select Tab from Home screen
    switch (a) {
    case TAB1:
        tabHost.setCurrentTab(0);
        tab_recharge.setIndicator(iv_tabl_selected);
        break;

    case TAB2:
        tabHost.setCurrentTab(1);
        tab_dth.setIndicator(iv_tab2_selected);
        break;

    case TAB3:
        tabHost.setCurrentTab(2);
        tab_billpayment.setIndicator(iv_tab3_selected);
        break;
    }

        }
    });

} 
```

}

# jquery - 向tiptip jQuery添加变量

> ID：14889278
> 
> 赞同：0
> 
> 时间：2013-02-15T06:17:22.680
> 
> 标签：jquery, wordpress, tiptip

我想不出一个更具描述性的标题，所以我希望它有意义（如果我错了，请随时纠正我）。

基本上我正在向站点添加表格，并且列将根据添加的列数自动调整大小。添加一个单一的作品非常好，它对我来说有点复杂（也许是在头上），只要我在同一页面上添加一个额外的表格 - 运行的脚本会完整地计算所有列。
例如，如果我在页面顶部添加一个三列表，然后在底部添加一个三列表 - 脚本然后计算总共 6 列，然后将 100 除以该数字..

是否有一种简单的方法来创建变量或表计数，以便底部的脚本检测单独的表并调整每个表的列大小？

以下代码片段：

```
<div class="table<?php echo $tblid; ?>">
        <div class="cols">
        </div>

    ..code going on here..
        <div class="cols">
        </div> 
    ..Some more code going on here..
</div> 
```

```
 var v = jQuery('.table .cols').length;

    var cw = (100/v);

    jQuery('.table .cols').css('width',cw+'%'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:25:08.183

如果我没记错的话，你有两个具有相同类名的表，所以你的选择器`jQuery('.table .cols')`会同时获取这两个表，并且 `jQuery('.table .cols').length;`会给你组合两个表的列的长度......

你能做的是。给他们单独上课并给每个人打电话。

**HTML**

```
 <div class="table1">
    <div class="cols">
    </div>

  ..other code going on here..

</div>

<div class="table2">
    <div class="cols">
    </div>

  ..other code going on here..

</div> 
```

**jQuery**

```
jQuery(function(){
  jQuery('div[class^="table"]').each(function(){
    var obj=jQuery(this).find('.cols');
    var v = obj.length;
    var cw = (100/v);

    obj.css('width',cw+'%');
  });
}); 
```

这应该适用于任意数量的表..

# linux - Linux shell 理解

> ID：14889285
> 
> 赞同：0
> 
> 时间：2013-02-15T06:18:03.320
> 
> 标签：linux, shell

**我不明白这个脚本是如何工作的，以下命令是什么意思？**

```
sed -n '/Domain Summary: Message Delivery/,/Domain Summary: Messages Received/p' test_mx1 | grep "yahoo.com" 
```

**下面也是**

```
sed -n '/Domain Summary: Messages Received/,/Senders by message count/p' test_mx1 | grep "yahoo.com" 
```

我无法理解这些命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:49:24.353

该脚本正在处理该文件`test_mx1`。的`-n`选项`sed`意味着“不打印每一行”（它通常会这样做）。

```
'/Domain Summary: Message Delivery/,/Domain Summary: Messages Received/p' 
```

这将查找包含 , 的行`Domain Summary: Message Delivery`，并从该行开始直到包含的行`Domain Summary: Messages Received`打印出每一行。如果找到与第一行匹配的另一行，它将再次开始打印。

然后，命令的输出会`sed`被过滤，因此只打印`grep`包含`yahoo.com`（或`yahooXcom`任何字符）的行。`X`

`grep`可以省略：

```
fr_line="Domain Summary: Message Delivery"
to_line="Domain Summary: Messages Received"
sed -n "/$fr_line/,/$to_line/{/yahoo.com/p;}" test_mx1 
```

第二个例子几乎相同；模式不同，但除此之外，命令是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:31:34.107

`sed`[正在按模式](http://www.grymoire.com/Unix/Sed.html#uh-29)为文件做范围，然后 Linux 管道`sed`的输出到`grep`. `grep`正在打印具有`yahoo.com`.

# reflection - 如何在不使用 dll 的情况下判断 obj 是否属于 ClassA 类型

> ID：14889292
> 
> 赞同：0
> 
> 时间：2013-02-15T06:18:55.017
> 
> 标签：reflection

我想在不使用包含 ClassA 的 dll 的情况下检查 obj 是否属于 ClassA 类型。我的意思是说我得到一个对象引用“obj”，我想检查这个对象是否属于“ClassA”类型。使用 dll，我可以使用

如果（obj 是 A 类），

但我的要求是不要使用 dll。我可以使用反射来做到这一点，比如

```
if(obj.getType().Name=="ClassA") 
```

但是通过这种方法，我遇到了以下问题。

说 ClassB 是从 ClassA 派生的

obj 是 ClassB 的对象

使用第一种方法

`if(obj is ClassA)`仍然有效

使用第二种方法它没有。那么我该如何解决这个问题:(

希望我没有混淆太多。没有比这更好的了。

# android - 数据如何显示thro switch case？

> ID：14889293
> 
> 赞同：-2
> 
> 时间：2013-02-15T06:18:56.463
> 
> 标签：android

## 行动=1

```
 String[] values = new String[] { "Android", "iPhone", "WindowsMobile"};
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
     android.R.layout.simple_list_item_1, android.R.id.text1, values);
      lisdis.setAdapter(adapter); 
      lisdis.setOnItemClickListener(this);

}
@Override
public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
{

    Intent mIntent = new Intent(display_publishermagazine.this, display_publicationmagazine.class);
        mIntent.putExtra("position", position+1);
        startActivity(mIntent); 
```

## 行动=2

```
 Intent mIntent = getIntent();
    int intValue = mIntent.getIntExtra("position",0);

   switch (intValue)
    {
        case 1:values = new String[] { "Android For Beginer","Android Devloper" };break;
        case 2:values = new String[] { "I-phone for beginer","I-phone for devloper" };break;
        case 3:values = new String[] { "windows for beginer","windows for devloper" };break;
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
         android.R.layout.simple_list_item_1, android.R.id.text1, values);

lisdis.setAdapter(adapter); 
    lisdis.setOnItemClickListener(this);        
}

@Override
public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
{
    Intent myIntent = new Intent(display_publishermagazine.this, display_publicationmagazine.class);

    myIntent.putExtra("position", position+1);
    startActivity(myIntent);
   } 
```

## 第三幕

```
 Intent myIntent = getIntent(); 
      int intValue = myIntent.getIntExtra("position", 0);

    switch (intValue)
    {
        case 1:values = new String[] { "Android for lerner1","android for learner2" };break;
        case 2:values = new String[] { "Android  for devloper1","android for devloper2" };break;
    }

/*values = new String[] { "iphone for lerner1","iphone for learner2" }      
values = new String[] { "iphone for devloper1","iphone for devloper2} */
}

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,

             android.R.layout.simple_list_item_1, android.R.id.text1, values);

        g1.setAdapter(adapter); 
} 
```

我需要

*   当用户点击 android 时，使用 switch case 在另一个活动中显示数据
*   然后显示数据 android Lerner 或 android developers.then 点击 android learner
*   然后显示 android lerner1 或 android learner2
*   and when select android developer then display android lerner1 or android learner2.

在这里，它仅适用于 android，不适用于 iphone 或 windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:35:28.017

查看[链接](http://www.listviewinandroid.blogspot.in/)，它显示了您想要实现的相同目标。

它会帮助你。

谢谢。

# iphone - 丑陋的 heightForRowAtIndexPath 和 cellForRowAtIndexPath

> ID：14889298
> 
> 赞同：1
> 
> 时间：2013-02-15T06:19:28.620
> 
> 标签：iphone, ios, objective-c, xcode, uitableview

我有一个`UItableview`，我正在用数据填充它，使用`heightForRowAtIndexPath`and `cellForRowAtIndexPath`。显然苹果让我在我的代码中做两次事情。

首先，我必须计算我的视图的大小（为此我必须制作它们）`heightForRowAtIndexPath`，然后我必须再次制作它们，以将它们添加到实际视图中。

我有一个非常复杂的视图，所以当你必须写两次时​​，它看起来很丑。

难道没有更好的方法来做到这一点吗？

**更新**

这就是我的代码的外观。它不完全一样，但非常接近。为什么苹果让我写两次？

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    NSLog(@"heightForRowAtIndexPath");

    //Initiating strings
    NSString *headlineString;
    NSString *subHeadlineString;
    NSString *bylineString;
    if (global.magazine.issues.count==0) {
        return 45;
    }else if(indexPath.section == global.magazine.issues.count+1) {
        //Finding the right issue and article for this row
        Issue *issue = [global.magazine.issues objectAtIndex:global.magazine.issues.count-1];

        //Creating the headline
        headlineString = [NSString stringWithFormat:@"<span class='bold_style'>FOREWORD</span>"];

        //Creating the subHeadline
        subHeadlineString = [NSString stringWithFormat:@"%@", [issue.magazine_foreword substringToIndex:100]];

        //Creating byline
        bylineString = [[NSString stringWithFormat:@"<span class='ital_style'>By %@</span>", issue.magazine_byline] capitalizedString];
    }else{
        //Finding the right issue and article for this row
        Issue *issue = [global.magazine.issues objectAtIndex:indexPath.section-1];
        Article *article = [issue.articles objectAtIndex:indexPath.row];

        //Creating the headline
        headlineString = [NSString stringWithFormat:@"<span class='bold_style'>%@</span>", [article.title uppercaseString]];

        //Creating the subHeadline
        subHeadlineString = [NSString stringWithFormat:@"%@", [article.main_text substringToIndex:100]];

        //Creating byline
        bylineString = [NSString stringWithFormat:@"<span class='ital_style'>By %@</span>", article.byline];
    }

    //Creating the labels
    NMCustomLabel *headline = [global.label headLineLabelWithString:headlineString fromTop:30 withWidth:global.screenWidth-60];
    NMCustomLabel *subHeadline = [global.label subHeadlineLabelWithString:subHeadlineString fromTop:30+headline.height+10 withWidth:global.screenWidth-60];
    NMCustomLabel *byline = [global.label articleBylineLabelWithString:bylineString fromTop:30+headline.height+10+subHeadline.height+10 withWidth:global.screenWidth-60];

    //Setting the height of the row
    return 30+headline.height+10+subHeadline.height+10+byline.height+30;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    NSLog(@"cellForRowAtIndexPath");
    //Preparing the cell
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    if (cell == nil) {
        cell = [[UITableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault
                reuseIdentifier:CellIdentifier];
    }

    //Removing former text views
    for (UIView *subview in [cell subviews]) {
        if (subview.tag == 21 || subview.tag == 22 || subview.tag == 23) [subview removeFromSuperview];
    }

    //Removing and setting tableview border
    [[cell viewWithTag:30] removeFromSuperview];
    UIView *rightBorder = [[UIView alloc] initWithFrame:CGRectMake(cell.width-1, 0, 1, cell.height)];
    rightBorder.backgroundColor = global.lightGrey;
    rightBorder.tag = 30;
    [cell addSubview:rightBorder];

    //Setting the seletion background color on the cells
    UIView *bgColorView = [[UIView alloc] init];
    bgColorView.backgroundColor = global.extraLightGrey;
    cell.selectedBackgroundView = bgColorView;
    if (global.magazine.issues.count==0) {
        return cell;
    }else if (indexPath.section-1 == global.magazine.issues.count) {
        //Finding the right issue and article for this row
        Issue *issue = [global.magazine.issues objectAtIndex:global.magazine.issues.count-1];

        //Creating the headline
        NSString *headlineString = [NSString stringWithFormat:@"<span class='bold_style'>FOREWORD</span>"];
        NMCustomLabel *headline = [global.label headLineLabelWithString:headlineString fromTop:30 withWidth:global.screenWidth-60];
        headline.tag = 21;
        [cell addSubview:headline];

        //Creating the subHeadline
        NSString *subHeadlineString = [[NSString stringWithFormat:@"%@", issue.magazine_foreword] substringToIndex:100];
        NMCustomLabel *subHeadline = [global.label subHeadlineLabelWithString:subHeadlineString fromTop:30+headline.height+10 withWidth:global.screenWidth-60];
        subHeadline.tag = 22;
        [cell addSubview:subHeadline];

        //Creating byline
        NSString *bylineString = [[NSString stringWithFormat:@"<span class='ital_style'>By %@</span>", issue.magazine_byline] capitalizedString];
        NMCustomLabel *byline = [global.label articleBylineLabelWithString:bylineString fromTop:30+headline.height+10+subHeadline.height+10 withWidth:global.screenWidth-60];
        byline.tag = 23;
        [cell addSubview:byline];
    }else{
        //Finding the right issue and article for this row
        Issue *issue = [global.magazine.issues objectAtIndex:indexPath.section-1];
        Article *article = [issue.articles objectAtIndex:indexPath.row];

        //Creating the headline
        NSString *headlineString = [NSString stringWithFormat:@"<span class='bold_style'>%@</span>", [article.title uppercaseString]];
        NMCustomLabel *headline = [global.label headLineLabelWithString:headlineString fromTop:30 withWidth:global.screenWidth-60];
        headline.tag = 21;
        [cell addSubview:headline];

        //Creating the subHeadline
        NSString *subHeadlineString = [NSString stringWithFormat:@"%@", [article.main_text substringToIndex:100]];
        NMCustomLabel *subHeadline = [global.label subHeadlineLabelWithString:subHeadlineString fromTop:30+headline.height+10 withWidth:global.screenWidth-60];
        subHeadline.tag = 22;
        [cell addSubview:subHeadline];

        //Creating byline
        NSString *bylineString = [[NSString stringWithFormat:@"<span class='ital_style'>By %@</span>", article.byline] capitalizedString];
        NMCustomLabel *byline = [global.label articleBylineLabelWithString:bylineString fromTop:30+headline.height+10+subHeadline.height+10 withWidth:global.screenWidth-60];
        byline.tag = 23;
        [cell addSubview:byline];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:19:22.800

最简单的解决方案是遵循 DRY 原则，或者添加高度作为您用作数据源的对象的属性，或者向视图控制器添加方法，例如：

```
-(CGFloat)calculateHeightForHeadline:(NSString*)headline andSubHeadline:(NSString*)subHeadline andByLine:(NSString*)byLine 
```

那么至少你在一个地方只有计算代码。

或者，您可以`[tableView heightForRowAtIndexPath:indexPath]`从 cellForRowAtIndexPath 方法调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T07:20:04.403

您必须这样做两次，因为表格视图需要在绘制任何内容之前知道它的总高度 - 因此它在调用任何单元格方法之前为每一行调用 height 方法。使用您当前的代码，根据行数，您可能会在表格出现之前遇到轻微的延迟 - 仪器会告诉您这是您花费时间的高度方法。

我不知道您自定义标签类做了什么，但您可以通过使用字符串或属性字符串绘图和大小计算[UIKit 扩展](http://developer.apple.com/library/ios/documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html)来计算高度而无需创建视图（这很昂贵） ，这些扩展是为此精确创建的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:11:09.100

我想知道，您为什么要在 中创建自定义标签`heightForRowAtIndexpath`？你为什么不直接用`sizeWithFont:`或者这样的方法来计算文本的大小呢？我认为这将是计算行高的更好方法。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T06:33:39.990

```
heightForRowAtIndexPath 
```

将为您的所有行调用。此委托方法返回行的高度。由于您的设计需要根据条件为每行提供不同的高度。不幸的是，每次创建行之前，您都必须计算行高。就像我们在绘制行之前决定它的高度一样。

**有一种方法可以避免这种情况。但我不会建议你去做。因为它会改变你的设计`UITableView`。**您可以做的是，您可以从所有可能的条件中确定行的最大高度。例如。让我们将其视为 100 像素。然后你可以画出你剩下的单元格。但是，如果您的任何行小于 100 像素，则会留下空白空间。而且它看起来很蓬松。

基本上，要满足您的要求，您必须这样做两次。没有其他选择:-(

# winforms - RowLeave 事件 - 操作无效，因为它会导致对 SetCurrentCellAddressCore 函数的可重入调用

> ID：14889301
> 
> 赞同：0
> 
> 时间：2013-02-15T06:19:41.463
> 
> 标签：winforms, datagridview, invalidoperationexception

我在 Windows 应用程序中有 DataGridView 控件。
我使用上面的代码加载数据并将其绑定到网格。

```
 private void LoadData()
        {
            clsData objData = new clsData();
            DataTable dtTemp = new System.Data.DataTable();
            dtTemp = objData.GetDatatable(" SELECT [ID],[CustomerName],[OrderQty],[Price],[POStatus],[Remarks],[EstdShipDate],[ActualShipDate],[IsShipped]  FROM [tblPO] ");
            dgPO.DataSource = null;
            dgPO.DataSource = dtTemp;

        } 
```

其中 dgPO 是 DataGrdiView(DGV)。
现在我想在用户离开该行时更新 DGV 中的记录。
为此我使用了 DGV.code 的 RowLeave 事件在这里

```
private void dgPO_RowLeave(object sender, DataGridViewCellEventArgs e)
{
    int POId = Convert.ToString(dgPO.Rows[e.RowIndex].Cells[0].Value) == "" ? 0 : Convert.ToInt32(dgPO.Rows[e.RowIndex].Cells[0].Value);
                    string CustName = Convert.ToString(dgPO.Rows[e.RowIndex].Cells[1].Value);
                    int Qty = Convert.ToInt32(dgPO.Rows[e.RowIndex].Cells[2].Value);
                    decimal Price = Convert.ToDecimal(dgPO.Rows[e.RowIndex].Cells[3].Value);
                    string Status = Convert.ToString(dgPO.Rows[e.RowIndex].Cells[4].Value);
                    string Remarks = Convert.ToString(dgPO.Rows[e.RowIndex].Cells[5].Value);
                    string dtEsdt = Convert.ToDateTime(dgPO.Rows[e.RowIndex].Cells[6].Value).ToString("yyyy-MM-dd");
                    string dtActl = Convert.ToDateTime(dgPO.Rows[e.RowIndex].Cells[7].Value).ToString("yyyy-MM-dd");
                    bool Shipped = dgPO.Rows[e.RowIndex].Cells[8].Value == DBNull.Value ? false : Convert.ToBoolean(dgPO.Rows[e.RowIndex].Cells[8].Value);

                    string strQry = "";
                    if (POId > 0)
                    {
                        strQry = " UPDATE [tblPO] SET [CustomerName] = '" + PreString(CustName) + "',[OrderQty] = " + Qty + ",[Price] = " + Price + ",[POStatus] = '" + Status + "'";
                        strQry = strQry + ",[Remarks] = '" + PreString(Remarks) + "',[EstdShipDate] = '" + dtEsdt + "',[ActualShipDate] = '" + dtActl + "',[IsShipped] = '" + Shipped + "'";
                        strQry = strQry + " WHERE ID =" + POId;
                    }
                    else
                    {
                        strQry = " INSERT INTO [tblPO] ([CustomerName],[OrderQty],[Price],[POStatus],[Remarks],[EstdShipDate],[ActualShipDate],[IsShipped]) ";
                        strQry += " VALUES('" + PreString(CustName) + "'," + Qty + "," + Price + ",'" + PreString(Status) + "','" + PreString(Remarks) + "'";
                        strQry += " ,'" + PreString(dtEsdt) + "','" + PreString(dtActl) + "','" + Shipped + "')";
                    }

                    clsData objData = new clsData();
                    if (objData.ExecuteQuery(strQry))
                    {
                        LoadData();                   
                    }
} 
```

当数据库中的数据更新时，我通过调用 LoadData 方法刷新 DGV。

此时，我收到这样的错误消息。

**“操作无效，因为它会导致对 SetCurrentCellAddressCore 函数的可重入调用”**

我在 SO 和 MSDN 博客上尝试了可用的解决方案，但它们对我不起作用

1）[http://social.msdn.microsoft.com/Forums/en/winformsdatacontrols/thread/f824fbbf-9d08-4191-98d6-14903801acfc](http://social.msdn.microsoft.com/Forums/en/winformsdatacontrols/thread/f824fbbf-9d08-4191-98d6-14903801acfc)
2）[当datagridvew的同一行的单元格处于编辑模式时，单击任何其他单元格原因 Operation is not valid reentrant call](https://stackoverflow.com/questions/7968916/click-on-any-other-cell-while-a-cell-of-same-row-of-datagridvew-is-in-edit-mode)
3) [InvalidOperationException - 当结束编辑一个单元格并移动到另一个单元格时](https://stackoverflow.com/questions/893752/invalidoperationexception-when-ending-editing-a-cell-moving-to-another-cell)

需要帮助。
提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:03:16.400

**回答：**

```
 private void dgPO_RowLeave(object sender, DataGridViewCellEventArgs e)
    {
        dataGridView1.EndEdit();
        //You code below
    } 
```

**建议：**另一种方式

您是否尝试使用[`.RowValidating Event`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowvalidating.aspx)and [`.IsCurrentRowDirty Method`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.iscurrentrowdirty%28v=vs.80%29.aspx)？

```
 private void dataGridView1_RowValidating(object sender, DataGridViewCellCancelEventArgs e)
    {
          if (dataGridView1.IsCurrentRowDirty)
          {
            //Your code here
          }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T02:16:05.713

在“RowLeave”或“EndEdit”方法中应用您的编辑之前，请使用以下检查：

```
public void dgPO_RowLeave(object sender, DataGridViewCellEventArgs e) 
{
  if (!dgPO.Rows[e.RowIndex].Cells[e.ColumnIndex].Selected)
                return;
  //...rest of your code to apply edit below...
} 
```

这应该适用于正在编辑的任何单元格。（失去焦点时不应用编辑代码；键入 Enter 足以应用编辑）

# c++ - 布尔条件在 do-while 循环中无法正常工作

> ID：14889302
> 
> 赞同：0
> 
> 时间：2013-02-15T06:19:42.640
> 
> 标签：c++, boolean, do-while

函数 require() 中的循环需要 3 个条件，a > b 或“a”或“b”不是数字。即使我不满足条件并放入 2 个整数，它也会再次循环。

此外，当我输入一个字符时，它只是无休止地循环“输入最小数字输入最大数字”而忽略了 cins。有谁知道为什么？我是初学者，所以这可能真的很明显

```
#include <iostream>
#include <cmath>
#include <cstdlib>
#include <ctime>

using namespace std;

int random(int minN, int maxN)   //generates random number within specified range
{
    srand (time(NULL));
    int x = (maxN - minN);
    int y = minN + (rand() % (x+1));
    return y;
}

int require()        //makes sure a < b and both are digits
{
    int a,b;
    do {
    cout << "Enter minimum number" << endl;
    cin >> a;
    cout << "Enter maximum number. Note: Has to be greater or equal to minimum." << endl;
    cin >> b;
    } while (a > b || !isdigit(a) || !isdigit(b));

    return random(a,b);
}

int main()
{
    cout << require() << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:23:10.243

您正在阅读的数字是数字，而不是`isdigit`函数所期望的字符。如果您使用的是符合 C++11 标准的标准库，如果输入不是有效的整数，则`a`和的值实际上将为零，这意味着例如将是. 如果您使用的是非 C++11 库，那么 和 的值将是随机的，并且很可能导致为真，并且在完整的 32 位整数范围内有效数字 ASCII 值的数量相当小的。`b``!isdigit(a)``true``a``b``!isdigit(a)`

* * *

如果您阅读有关输入运算符的参考，例如[this](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt) ，您将看到如果提取失败，则将`failbit`设置流。这可以像这样“内联”测试：

```
if (!(std::cin >> a))
{
    std::cout << "Not a valid number, try again: ";
    continue;
} 
```

或者可以使用流[`fail`](http://en.cppreference.com/w/cpp/io/basic_ios/fail)功能对其进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:35:39.717

你不应该使用`isdigit`，因为这涉及到一个特定的字符是数字。相反，循环应该如下所示：

```
int require()        //makes sure a < b and both are digits
{
    validNumbers = true;
    do
    {
       cout << "Enter minimum number" << endl;
       cin.clear();
       cin >> a;
    } while (cin.fail());

    do
    {
       cout << "Enter maximum number. Note: Has to be greater or equal to minimum."
            << endl;
       cin.clear();
       cin >> b;
    } while (cin.fail() || a > b);

    return random(a,b);
} 
```

**PS：**您只需要`srand (time(NULL));`在程序开始时调用一次。

# c++ - Win32 API：用户模拟技术以其他用户身份运行进程？

> ID：14889305
> 
> 赞同：0
> 
> 时间：2013-02-15T06:20:19.977
> 
> 标签：c++, winapi, process

我正在编写一个应用程序，它在 Windows 上以特权较低的用户身份运行第三方可执行文件。为此，我使用了以下 Win32 API 函数：

```
LogonUser(L"UserName", L"Domain", NULL, LOGON32_LOGON_SERVICE, LOGON32_PROVIDER_DEFAULT, &hToken) 
```

然后打电话

```
CreateProcessAsUser() 
```

使用 hToken 我必须运行该过程。我启动这个可执行文件的实际程序是以管理员身份运行的。我的疑问是：

1.  如果启用了 UAC（用户帐户控制）。这行得通吗？？

2.  我需要多次创建流程。我可以`hToken`通过将它保存在某个地方来使用它吗？

3.  是否 `CreateProcessAsUser()`适用于 Domain\User 的不同组合，即 .\Administrator 或 \Administrator 或 Domain\UserName 等。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:25:46.803

MSDN[说](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429(v=vs.85).aspx)：“通常，最好使用[`CreateProcessWithLogonW`](https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-createprocesswithlogonw)创建具有备用凭据的进程。” 下面的[例子](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682431(v=vs.85).aspx)演示了如何调用这个函数。

```
#include <windows.h>
#include <stdio.h>
#include <userenv.h>

void DisplayError(LPWSTR pszAPI)
{
    LPVOID lpvMessageBuffer;

    FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_SYSTEM,
        NULL, GetLastError(), 
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), 
        (LPWSTR)&lpvMessageBuffer, 0, NULL);

    //
    //... now display this string
    //
    wprintf(L"ERROR: API        = %s.\n", pszAPI);
    wprintf(L"       error code = %d.\n", GetLastError());
    wprintf(L"       message    = %s.\n", (LPWSTR)lpvMessageBuffer);

    //
    // Free the buffer allocated by the system
    //
    LocalFree(lpvMessageBuffer);

    ExitProcess(GetLastError());
}

void wmain(int argc, WCHAR *argv[])
{
    DWORD     dwSize;
    HANDLE    hToken;
    LPVOID    lpvEnv;
    PROCESS_INFORMATION pi = {0};
    STARTUPINFO         si = {0};
    WCHAR               szUserProfile[256] = L"";

    si.cb = sizeof(STARTUPINFO);

    if (argc != 4)
    {
        wprintf(L"Usage: %s [user@domain] [password] [cmd]", argv[0]);
        wprintf(L"\n\n");
        return;
    }

    //
    // TO DO: change NULL to '.' to use local account database
    //
    if (!LogonUser(argv[1], NULL, argv[2], LOGON32_LOGON_INTERACTIVE, 
            LOGON32_PROVIDER_DEFAULT, &hToken))
        DisplayError(L"LogonUser");

    if (!CreateEnvironmentBlock(&lpvEnv, hToken, TRUE))
        DisplayError(L"CreateEnvironmentBlock");

    dwSize = sizeof(szUserProfile)/sizeof(WCHAR);

    if (!GetUserProfileDirectory(hToken, szUserProfile, &dwSize))
        DisplayError(L"GetUserProfileDirectory");

    //
    // TO DO: change NULL to '.' to use local account database
    //
    if (!CreateProcessWithLogonW(argv[1], NULL, argv[2], 
            LOGON_WITH_PROFILE, NULL, argv[3], 
            CREATE_UNICODE_ENVIRONMENT, lpvEnv, szUserProfile, 
            &si, &pi))
        DisplayError(L"CreateProcessWithLogonW");

    if (!DestroyEnvironmentBlock(lpvEnv))
        DisplayError(L"DestroyEnvironmentBlock");

    CloseHandle(hToken);
    CloseHandle(pi.hProcess);
    CloseHandle(pi.hThread);
} 
```

# iphone - iOS本地通知：我想在通过本地通知重新进入应用程序时执行一个功能

> ID：14889307
> 
> 赞同：3
> 
> 时间：2013-02-15T06:20:29.370
> 
> 标签：iphone, ios, objective-c, xcode

我正在使用 XCode 4.6，并正在尝试在 iOS 上构建一个本地通知功能，该功能将在重新进入应用程序时执行一个功能。基本上我想更改某些标签中的文本并在重新进入应用程序时添加一些声音. 我以为我走在了正确的轨道上，但是当通过本地通知重新进入应用程序时，我的代码只有部分工作。

首先，我将此函数添加到我的 AppDelegate 中：

```
-(void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification{
    NSLog(@"test1");   //this traces successfully 
    myAppViewController * controller = [myAppViewController alloc];
    [controller doSomething];  //calling a function in my myAppViewController.m
} 
```

我以为我已经弄明白了，但现在只有 NSLog 在我的 myAppViewController.m 函数中起作用：

```
-(void)doSomething{
    NSLog(@"do something"); //traces successfully 
    self.notificationTime.text=@"something else"; //nothing happens here, it works in other functions but not here
    [self doSomethingElse]; //calling another function from this function for further testing 
} 
```

调用下一个函数....

```
-(void)doSomethingElse{
    NSLog(@"do something else"); //this works
    //this whole thing doesn't work -- no sound -- 
    NSURL* url = [[NSBundle mainBundle] URLForResource:@"cash" withExtension:@"mp3"];
    NSAssert(url, @"URL is valid.");
    self.player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
    [self.player prepareToPlay];
    [self.player play];
    //this doesn't work again
    self.notificationTime.text=@"something else";
} 
```

我希望在这里得到一些一般性的建议，我将不胜感激。如果有人知道解决问题的完全不同的方法，那也很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:21:42.250

该`didReceiveLocalNotification`方法仅在您的应用程序在前台运行时调用。如果您看到一个徽章并单击应用程序启动它，那么您需要使用`application:willFinishLaunchingWithOptions:`（或`application:didFinishLaunchingWithOptions:`）处理本地通知。要通过这两种方法中的任何一种获取本地通知，请`UIApplicationLaunchOptionsLocalNotificationKey`用作选项字典的键。

请注意，从启动选项中提取本地通知后，调用您的方法是一种可行的`didReceiveLocalNotification`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:50:14.783

您不需要分配应用程序控制器的第二个实例。你可以只使用`self`. 如果这样做，代码是否按预期工作？

# c++ - 错误 C2039：“下一个”：不是“链”的成员 ' 与 [T=Person]

> ID：14889308
> 
> 赞同：1
> 
> 时间：2013-02-15T06:20:44.583
> 
> 标签：c++, visual-studio-2012, compiler-errors

我正在使用一组特定的预制模板来实现链式数据结构。编译后，我收到标题中的错误。

数组列表.h：

```
#ifndef arrayList_h
#define arrayList_h

#include <iostream>
#include "linearList.h"

using namespace std;
template<class T>
class arrayList : public linearList<T>{
public:
    //constructor, copy constructor, destructor
    arrayList(int initialCapacity = 10);
    arrayList(const arrayList<T>&);
    ~arrayList() {delete [] element;};

    //ADT methods
    bool empty() const {return listSize == 0;};
    int size() const {return listSize;};
    T& get(int theIndex) const;
    int indexOf(const T& theElement) const;
    void erase(int theIndex);
    void insert(int theIndex, const T& theElement);
    void output(ostream& out) const;

    //additional method
    int capacity() const {return arrayLength;};

protected:
    void checkIndex(int theIndex) const;
    //throw illegalIndex if theIndex is invalid
    T* element;         //1D array to hold list elements
    int arrayLength;    //capacity of 1D array
    int listSize;       //number of elements in list
};
#endif 
```

链.h：

```
#ifndef chain_h
#define chain_h

#include <iostream>
#include "linearList.h"
#include "chainNode.h"

using namespace std;
template<class T>
class chain : public linearList<T>{
public:
    // constructor and destructor
    chain(int initialCapacity = 10);
    //chain(const chain<T>&);
    ~chain();

    // ADT methods
    bool empty() const {return listSize == 0;}
    int size() const {return listSize;}
    T& get(int theIndex) const;
    int indexOf(const T& theElement) const;
    void erase(int theIndex);
    void insert(int theIndex, const T& theElement);
    void output(ostream& out) const;

protected:
    void checkIndex(int theIndex) const;
    chain<T>* firstNode;
    int listSize;          
};
#endif 
```

链节点.h：

```
#ifndef chainNode_h
#define chainNode_h

#include <iostream>

template <class T>
struct chainNode
{
    // data members
    T element;
    chainNode<T> *next;

    // methods
    chainNode() {}
    chainNode(const T& element)
    {this->element = element;}
    chainNode(const T& element, chainNode<T>* next)
    {this->element = element;
        this->next = next;}
};

#endif 
```

链.cpp：

```
#include "chain.h"
#include "person.h"

using namespace std;

template<class T>
chain<T>::chain(int initialCapacity){
    // Constructor.
    /*if (initialCapacity < 1){
        ostringstream s;
        s << "Initial capacity = "
        << initialCapacity << " Must be > 0";
        throw illegalParameterValue(s.str());
    }*/
    firstNode = NULL;
    listSize = 0;
}

template<class T>
chain<T>::~chain(){
    // Chain destructor. Delete all nodes
    // in chain.
    while (firstNode != NULL){
        // delete firstNode
        chainNode<T>* nextNode = firstNode->next;
        delete firstNode;
        firstNode = nextNode;
    }
}

template<class T>
T& chain<T>::get(int theIndex) const{
    // Return element whose index is theIndex.
    checkIndex(theIndex);
    // move to desired node
    chainNode<T>* currentNode = firstNode;
    for (int i = 0; i < theIndex; i++)
        currentNode = currentNode->next;
    return currentNode->element;
}

template<class T>
int chain<T>::indexOf(const T& theElement) const{
    // search the chain for theElement
    chainNode<T>* currentNode = firstNode;
    int index = 0;  // index of currentNode
    while (currentNode != NULL && currentNode->element != theElement){
        // move to next node
        currentNode = currentNode->next;
        index++;
    }
    // make sure we found matching element
    if (currentNode == NULL)
        return -1;
    else
        return index;
}

template<class T>
void chain<T>::erase(int theIndex){
    checkIndex(theIndex);
    chainNode<T>* deleteNode;
    if (theIndex == 0){
        // remove first node from chain
        deleteNode = firstNode;
        firstNode = firstNode->next;
    }
    else{
        // use p to get to beforeNode
        chainNode<T>* p = firstNode;
        for (int i = 0; i < theIndex - 1; i++)
            p = p->next;
        deleteNode = p->next;
        p->next = p->next->next;
    }
    listSize--;
    delete deleteNode;
}

template<class T>
void chain<T>::insert(int theIndex, const T& theElement){
    if (theIndex < 0 || theIndex > listSize){
        // THROW ILLEGAL EXCEPTION
    }
    if (theIndex == 0) // insert at front
        firstNode = new chainNode<T>(theElement, firstNode);
    else{
        // find predecessor of new element
        chainNode<T>* p = firstNode;
        for (int i = 0; i < theIndex - 1; i++)
            p = p->next;
        // insert after p
        p->next = new chainNode<T>(theElement, p->next);
    }
    listSize++;
} 
```

人.h：

```
#ifndef Person_h
#define Person_h

#include <string>
#include <sstream>

using namespace std;

class Person{
public:
//Variables
    string birthdate;
    string first_name;
    string last_name;
    string hometownID;
    string hometownName;
    string userID;

    string name;
//Constructors
    Person();
    Person(string birthdate, string first_name, string last_name, string hometownID, string hometownName, string userID);
//Methods
    string getBirthdate();
    void setBirthdate(string birthdate);

    string getFirst_name();
    void setFirst_name(string first_name);

    string getLast_name();
    void setLast_name(string last_name);

    string getName();
    void setName(string name);

    string getHometownID();
    void setHometownID(string hometownID);

    string getHometownName();
    void setHometownName(string hometownName);

    string getUserID();
    void setUserID(string userID);

    int compare(Person& p, int criteria);

//Comparisons
    friend bool operator== (Person p1, Person p2);
    friend bool operator!= (Person &p1, Person &p2);

    friend bool operator> (Person &p1, Person &p2);
    friend bool operator>= (Person &p1, Person &p2);

    friend bool operator< (Person &p1, Person &p2);
    friend bool operator<= (Person &p1, Person &p2);

    friend ostream& operator<<(ostream& os, const Person& p);
};
#endif 
```

Person.cpp：我已经减少了很多。我目前与 Node 没有任何关系。

```
#include "Person.h"
#include <sstream>
#include <string>

using namespace std;

Person::Person(){
    birthdate = "";
    name = "";
    hometownID = "";
    hometownName = "";
    userID = "";
}
Person::Person(string birthdate, string first_name, string last_name, string hometownID, string hometownName, string userID){
    this->birthdate = birthdate;
    this->first_name = first_name;
    this->last_name = last_name;
    this->hometownID = hometownID;
    this->hometownName = hometownName;
    this->userID = userID;

    name = last_name+ ", " +first_name;
}

    //mostly get/set methods after here, nothing having to do with node. 
```

主.cpp：

```
#include "arrayList.cpp"
#include "block_allocator.h"
#include "chain.cpp"
#include "chainNode.h"
#include "json.h"
#include "linearList.h"
#include "Person.h"

#include <string>
#include <fstream>
#include <streambuf>
#include <iostream>
#include <cstdlib>
#include <algorithm>
#include <time.h>

using namespace std;

//ArrayList helper methods
arrayList<Person> arrayListStructure(string fileName);
int arrayListSort(int criteria, arrayList<Person>* list);
void arrayListReverseSort(int criteria, arrayList<Person>* list);
int arrayListFlip(arrayList<Person>* list);
//Chain helper methods
chain<Person> chainStructure(string fileName);
//Hashtable helper methods

int main(int argc, const char * argv[]){
    //get fileName
    cout << "Please enter a filename:" << endl;
    string fileName;
    cin >> fileName;

    //get data structure type
    cout << "Please choose a data structure:" << endl;
    cout << "     1\. Arraylist" << endl;
    cout << "     2\. Chain" << endl;
    cout << "     3\. Hashtable" << endl;
    int dataStructure;
    cin >> dataStructure;

    cout << "Please choose a criteria:" << endl;
    cout << "     1\. Name" << endl;
    cout << "     2\. Birthday" << endl;
    cout << "     3\. Location" << endl;
    int criteria;
    cin >> criteria;

    arrayList<Person> friends;
            chain<Person> friendChain;

    //parse file into data structure
    switch(dataStructure){
    case 1:     //Arraylist
        //edited out, irrelevant
    /*case 2:       
        //Chain
        //code goes here
        /*switch(criteria){
        case 1: //Name

        case 2: //Birthday
        case 3: //Location
        }
        break;*/
    /*case 3:
        //Hashtable
        //code goes here
        break;
    */
    }
}

//Helper methods for chain
chain<Person> chainStructure(string fileName){
    //create initial (empty) chain
    chain<Person> friends;

    //open input file
    ifstream fileInput(fileName);

    //turn input stream into string
    string inputStr((istreambuf_iterator<char>(fileInput)), istreambuf_iterator<char>());

    //parse file content into json object
    char *errorPos = 0;
    char *errorDesc = 0;
    int errorLine = 0;
    block_allocator allocator(1 << 10);

    json_value *root = json_parse(const_cast<char*>(inputStr.c_str()), &errorPos, &errorDesc, &errorLine, &allocator);

    //Take value of first element
    json_value *list = root->first_child;

    //Outer loop addresses each friend's JSON object
    for(json_value *it = list->first_child; it; it = it->next_sibling){
        string first_name, last_name, birthdate, hometownID, hometownName, userID;
        //Inner loop looks at each key/value pair within each friend object
        for(json_value *friendKeys = it->first_child; friendKeys; friendKeys = friendKeys->next_sibling){

            //grab first name
            if(!string(friendKeys->name).compare("first_name")){
                    first_name = friendKeys->string_value;
            }
            //grab last name
            else if(!string(friendKeys->name).compare("last_name")){
                last_name = friendKeys->string_value;
            }
            //grab birthday and trim to 5 characters
            else if(!string(friendKeys->name).compare("birthday")){
                birthdate = friendKeys->string_value;
                birthdate = birthdate.substr(0, 5);
            }
            //grab hometown info
            else if(!string(friendKeys->name).compare("hometown")){
                for(json_value *hometownKeys = friendKeys->first_child; hometownKeys; hometownKeys = hometownKeys->next_sibling){

                    if(!string(hometownKeys->name).compare("id")){
                        hometownID = hometownKeys->string_value;
                    }

                    if(!string(hometownKeys->name).compare("name")){
                        hometownName = hometownKeys->string_value;
                    }
                }
            }
            //grab userID
            else if(!string(friendKeys->name).compare("id")){
                userID = friendKeys->string_value;
            }

        }

        if(birthdate != "" && first_name != "" && last_name != "" && hometownID != "" && hometownName != "" && userID != ""){
            //Create new Person in chain
            Person person(birthdate, first_name, last_name, hometownID, hometownName, userID);
            friends.insert(friends.size(), person);
        }
    }
    //return friends;
    return friends;
}

//Helper methods for hashtable 
```

所以我知道这是一堵巨大的文字墙，但我真的不确定这种脱节在哪里，而且我不想提供太少的信息。任何帮助或建议将*不胜*感激，因为我对 C++ 非常陌生，而且对使用模板系统更加缺乏经验。

编辑：线性列表.h：

```
#ifndef linearList_h
#define linearList_h

#include <iostream>

using namespace std;

template<class T>
class linearList
{
public:
    virtual ~linearList() {};

    virtual bool empty() const = 0;
    // return true iff list is empty

    virtual int size() const = 0;
    // return number of elements in list

    virtual T& get(int theIndex) const = 0;
    // return element whose index is theIndex

    virtual int indexOf(const T& theElement) const = 0;
    // return index of first occurence of theElement

    virtual void erase(int theIndex) = 0;
    // remove the element whose index is theIndex

    virtual void insert(int theIndex, const T& theElement) = 0;
    // insert theElement so that its index is theIndex

    virtual void output(ostream& out) const = 0;
    // insert list into stream out
};

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:34:13.980

在chain.h 中，`chain<T>`模板有一个成员：

```
chain<T>* firstNode; 
```

我很确定应该是：

```
chainNode<T>* firstNode; 
```

可能还有其他错误（或者可能没有），但这似乎很可能导致您当前的问题，这是这个问题的主题。

侧边栏：这个东西需要*认真*重构才能使用标准库中的容器和算法（`std::vector<T>`,`std::list<T>`等...）只要考虑一下。

# android - 在我的 android 设备中检测已安装的证书

> ID：14889309
> 
> 赞同：15
> 
> 时间：2013-02-15T06:20:46.263
> 
> 标签：android, certificate

应用程序启动时，我正在我的应用程序中安装证书。我浏览了以下几个链接并成功安装了证书。

*   [http://nelenkov.blogspot.in/2011/12/ics-trust-store-implementation.html](http://nelenkov.blogspot.in/2011/12/ics-trust-store-implementation.html)

*   [http://pastebin.com/Bn6qSYHx](http://pastebin.com/Bn6qSYHx)

*   [如何在 Android 中以编程方式安装 CA 证书（用于 EAP WiFi 配置）？](https://stackoverflow.com/questions/9024721/how-to-programmatically-install-a-ca-certificate-for-eap-wifi-configuration-in)

*   [如何在没有用户交互的情况下在 Android 上以编程方式安装 CA 证书](https://stackoverflow.com/questions/11657172/how-to-install-ca-certificate-programmatically-on-android-without-user-interacti)

我知道我们无法在没有用户交互的情况下静默安装证书。目前我不知道每次用户打开我的应用程序时如何停止提示。

每当我的应用程序当前启动时，每次它要求用户安装证书。有什么方法可以检测证书（在这种情况下是我的证书）是否已经安装，以编程方式。

我在我的应用程序中安装证书的代码片段

```
private void installCertificate()
    {
        try 
        {
            BufferedInputStream bis = new BufferedInputStream(getAssets().open(MY_CERT));
            byte[] keychain = new byte[bis.available()];
            bis.read(keychain);

            Intent installIntent = KeyChain.createInstallIntent();
            X509Certificate x509 = X509Certificate.getInstance(keychain);
            installIntent.putExtra(KeyChain.EXTRA_CERTIFICATE, x509.getEncoded());
            installIntent.putExtra(KeyChain.EXTRA_NAME, MY_CERT);
            startActivityForResult(installIntent, INSTALL_KEYCHAIN_CODE);
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        catch (CertificateException e) 
        {
            e.printStackTrace();
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        if (requestCode == INSTALL_KEYCHAIN_CODE) 
        {
            switch (resultCode) 
            {  
                case Activity.RESULT_OK:
                    doTheTask();
                    break;
                case Activity.RESULT_CANCELED:
                    finish();
                    break;                  
                default:
                    super.onActivityResult(requestCode, resultCode, data);
            }
        }
    } 
```

另外仅供参考，从 onCreate() 调用 installCertificate()。

请帮助我。任何帮助将不胜感激。

* * *

**查询：**当提示输入证书名称时，输入的文本将作为选定内容出现，并且在方向更改时出现剪切/复制选项。任何人都知道提示出现时如何停止文本选择？！！！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-20T11:44:07.880

我使用下面的 Java 代码来检查我的证书是否已安装：

```
try
{
    KeyStore ks = KeyStore.getInstance("AndroidCAStore");
    if (ks != null) 
    {
        ks.load(null, null);
        Enumeration aliases = ks.aliases();
        while (aliases.hasMoreElements()) 
        {
            String alias = (String) aliases.nextElement();
            java.security.cert.X509Certificate cert = (java.security.cert.X509Certificate) ks.getCertificate(alias);

            if (cert.getIssuerDN().getName().contains("MyCert")) 
            {
                isCertExist = true;
                break;
            }
        }
    }
} catch (IOException e) {
    e.printStackTrace();
} catch (KeyStoreException e) {
    e.printStackTrace();
} catch (NoSuchAlgorithmException e) {
    e.printStackTrace();
} catch (java.security.cert.CertificateException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-10T10:49:35.663

在@Android 的答案中添加一些附加信息（我还不能发表评论），其代码仅适用于 Android 4.0 或更高版本的设备。

**对于 IceCream Sandwich 之前的设备（API < 14）：**

```
boolean isCertExist;
    TrustManagerFactory tmf;
    try {
        tmf = TrustManagerFactory.getInstance(TrustManagerFactory
                .getDefaultAlgorithm());

        tmf.init((KeyStore) null);

        X509TrustManager xtm = (X509TrustManager) tmf.getTrustManagers()[0];
        for (X509Certificate cert : xtm.getAcceptedIssuers()) {
            if (cert.getIssuerDN().getName().contains("MyCert")) {
                isCertExist = true;
                break;
            }
        }
    } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (KeyStoreException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

**对于 Android 4.0 及更高版本（API >= 14）的设备：**

```
boolean isCertExist;
    try 
    {
        KeyStore ks = KeyStore.getInstance("AndroidCAStore");
        if (ks != null) 
        {
            ks.load(null, null);
            Enumeration aliases = ks.aliases();
            while (aliases.hasMoreElements()) 
            {
                String alias = (String) aliases.nextElement();
                java.security.cert.X509Certificate cert = (java.security.cert.X509Certificate) ks.getCertificate(alias);

                if (cert.getIssuerDN().getName().contains("MyCert")) {
                    isCertExist = true;
                    break;
                }
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    } catch (KeyStoreException e) {
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (java.security.cert.CertificateException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T16:33:55.947

KeyChain.createInstallIntent，创建的intent会调用android.security.certinstaller来安装证书，然后certinstaller会在安装证书的时候打印log。因此您可以转储日志猫以检查是否安装了证书。（如果用户更改了证书的存储名称，您可以获得别名）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-21T21:40:02.920

从受信任的 CA 存储中读取如下

```
KeyStore ks = KeyStore.getInstance("AndroidCAStore"); 
```

只会获取 CA 证书，而不是用户/客户端证书。客户端证书不必与 CA 证书共享相同的别名。

# c# - 在 Try..Catch 中断言被捕获

> ID：14889310
> 
> 赞同：9
> 
> 时间：2013-02-15T06:20:51.677
> 
> 标签：c#, unit-testing, mstest, assert

刚刚遇到了一些有趣的行为 -`Assert`被`Catch`阻止。

```
List<Decimal> consArray = new List<decimal>();
try
{
    Decimal d;
    Assert.IsTrue(Decimal.TryParse(item.Value, out d));
    consArray.Add(d);
}
catch (Exception e)
{
     Console.WriteLine(item.Value);
     Console.WriteLine(e);
} 
```

断言抛出`AssertFailedException`并被`catch`. 一直认为如果`Assert`失败则测试失败并中止连续执行。但在那种情况下 - 测试继续进行。如果以后没有任何问题发生 - 我得到**绿色**测试！理论上 - 这是正确的行为吗？

编辑：我知道这可能是 .NET 限制以及如何在 MsTest 中进行断言。断言抛出异常。因为`catch`- 捕获它捕获断言异常的所有内容。但它在理论上是正确的还是特定于 MsTest 的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T09:48:48.950

正如已经回答的那样，这是正确的行为。您可以通过捕获 AssertFailedException 并重新抛出它来更改您的代码以获得*您的预期行为。*

```
 List<Decimal> consArray = new List<decimal>();
        try
        {
            Decimal d;
            Assert.IsTrue(Decimal.TryParse(item.Value, out d));
            consArray.Add(d);
        }
        catch (AssertFailedException)
        {
            throw;
        }

        catch (Exception e)
        {
            Console.WriteLine(item.Value);
            Console.WriteLine(e);
        } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T07:14:52.810

您的代码按预期工作。当`Assert`失败时，它会抛出一个继承自[Exception的](http://msdn.microsoft.com/en-us/library/system.exception%28v=vs.110%29.aspx)[AssertFailedException](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assertfailedexception%28v=vs.100%29.aspx)。所以你可以添加一个并抓住它。`try-catch`

`throw`在您的情况下，在末尾添加 a`catch`并重新引发异常。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-15T09:27:39.817

`NUnit`会做同样的事情。与我认为的任何其他测试框架一样，但我只知道`MStest`和`NUnit`在 C# 中。

我希望您的测试代码不会包含`Decimal.TryParse`，但您的业务逻辑会这样做，您将使用对象和方法调用对其进行测试。

就像是：

```
var sut = new Sut();
var d = sut.DoSomethingThatReturnsTheDecimal(item.Value);

Assert.AreEqual(0.123, d, string.Format("passed value can not be parsed to decimal ({0})", item.Value); 
```

为了更接近您的实施：

```
List<Decimal> consArray = new List<decimal>();

Decimal d = Decimal.MinValue;

// You don't need to try-catch a Decimal.TryParse
// Decimal.TryParse(item.Value, out d));

try
{
    d = Decimal.Parse(item.Value)
}
catch
{
    // Handle exception
}

Assert.AreEqual(0.123, d);

// Does the list add anything at all? In this sample it seems a bit redundant
consArray.Add(d); 
```

无论如何，回答你的问题。try-catch 应该能捕捉到你的`AssertFailedException`.

PS：接住`AsserFailedException`再扔也行，不过感觉有点奇怪。我会努力将`Assert`s 留在任何`try-catch`街区之外。但这可能只是我的意见，你没有要求:)。

# ios - 在 UITableView 中自动选择错误的单元格？

> ID：14889314
> 
> 赞同：0
> 
> 时间：2013-02-15T06:21:09.477
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我的问题是，当我选择一个单元格时，它也会自动选择其他单元格。此外，当我取消选择该选定单元格时，自动选择的单元格也会被取消选择。任何帮助深表感谢。谢谢你。

我的代码是：

```
#pragma mark
#pragma mark UITableViewDelegate
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
     return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [cellDataArray count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellIdentifier = @"customCellSearchBySpeciality";
    SpecialityCustomCell *cell = (SpecialityCustomCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SearchBySpecialityViewController" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    } 

    cell.cellData.text = [cellDataArray objectAtIndex:indexPath.row];
    return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    SpecialityCustomCell *selectedCell = (SpecialityCustomCell *)[tableView cellForRowAtIndexPath:indexPath];

    if (selectedCell.selectedCellImageView.image) {
        selectedCell.selectedCellImageView.image = nil;
    }
    else{
        [selectedCell.selectedCellImageView setImage:[UIImage imageNamed:@"image"]];
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:38:41.697

我认为您需要维护您在每一行上添加的单元格的实例，然后对单元格图像视图的特定对象进行选择和取消选择，如下所示，

```
 NSMutableArray *cellArray;

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellIdentifier = @"customCellSearchBySpeciality";
    SpecialityCustomCell *cell = (SpecialityCustomCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    [cellArray addObject:cell];

    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SearchBySpecialityViewController" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    cell.cellData.text = [cellDataArray objectAtIndex:indexPath.row];
    return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    for(int cc=0;cc<[cellArray count];cc++){
    if(indexPath.row==cc){
    if ([cellArray objectAtIndex:cc].selectedCellImageView.image) {
        [cellArray objectAtIndex:cc].selectedCellImageView.image = nil;
    }
    else{
        [[cellArray objectAtIndex:cc].selectedCellImageView setImage:[UIImage  imageNamed:@"image"]];
    }
  }
} 
```

# search - innerHTML 或 jquery.html() API 不适用于多个搜索记录

> ID：14889318
> 
> 赞同：0
> 
> 时间：2013-02-15T06:21:48.660
> 
> 标签：search, innerhtml

长期读者。第一次问问题。我从这个论坛学到了很多东西。。

我正在使用在线数据库 (Caspio.com) 并将其配置为返回搜索结果。基本上，我的数据库有一个“会员”字段，它可以有 3 个级别 - 基本、专业和高级。根据会员级别，我需要在搜索结果页面中显示不同的 HTML 代码。

我已经尝试过 a) Jquery 的 html() API

```
<div id="biz-name"></div>

<script type="text/javascript">
var membership = '[@field:Membership]';
if (membership == 'Basic') 
{
   $("#biz-name").html("[@field:Company_name]");
}
</script> 
```

b) 内部HTML

```
<div id="biz-name"></div>

<script type="text/javascript">
var membership = '[@field:Membership]';
if (membership == 'Basic') 
{
   document.getElementById('biz-name').innerHTML ='[@field:Company_name]';
}
</script> 
```

在这两种情况下，当搜索返回多个结果时，*只会*更新第一个结果的 div。但是，它具有*LAST*结果的 Company_name 的值。

有谁知道如何调整它以使其在每个结果的基础上工作？

我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:27:10.837

我不太明白您希望如何显示结果，但我认为对多个元素使用相同的 ID 属性并不好。尝试改用类。此外，当您以这种方式操作多个结果时，我认为您需要使用 each() 函数。

```
$(".biz-name").each(function() { $(this).html("...") }); 
```

# bash - 是否可以逐行调试 bash 脚本？

> ID：14889322
> 
> 赞同：6
> 
> 时间：2013-02-15T06:22:21.357
> 
> 标签：bash, debugging, line-by-line

*我会喜欢 Microsoft Visual Studio 在bash*中使用当前变量值等进行的逐行调试。

有什么工具或方法可以做到吗？`set -x`很好，`set -v`但并不完美。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T18:29:07.330

见`bashdb`。

如果它已安装在您的系统上，请参阅`man bashdb`。

如果未安装，请参阅[http://bashdb.sourceforge.net](http://bashdb.sourceforge.net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-11T16:14:12.387

是的。[使用来自http://bashdb.sourceforge.net/](http://bashdb.sourceforge.net/)的“bashdb”

撰写本文时的最新版本 [http://sourceforge.net/projects/bashdb/files/bashdb/4.2-0.8/](http://sourceforge.net/projects/bashdb/files/bashdb/4.2-0.8/)

如果您使用的是 Mac（就像我一样），那么您可能需要安装 GNU 版本的 Bash。

我使用“MacPorts” [http://www.macports.org/做到了这一点](http://www.macports.org/)

一旦你有了 MacPorts...

> 端口安装 bash

然后按照说明进行

> ./configure（在 bashdb 解压目录中）
> 
> 制作
> 
> 须藤使安装

然后在 PATH 中添加可以找到 bashdb 的文件夹

# php - 无法浏览 Zend Framework 项目“找不到类'Zend\Filter\AbstractFilter'”

> ID：14889324
> 
> 赞同：0
> 
> 时间：2013-02-15T06:22:31.267
> 
> 标签：php, zend-framework

我是 Zend 的新手，我正在尝试创建我的第一个 Zend 应用程序。我正在关注这里的教程。[http://akrabat.com/zend-auth-tutorial/](http://akrabat.com/zend-auth-tutorial/) 不幸的是，我使用的是 xampp。我发现在使用 xampp 和 zend 时会出现一些冲突。我已经添加了

> C:\xampp\php

到我的系统变量，我在 php.ini 文件中编辑了 include_path 到

> .;C:\xampp\php\PEAR;C:\xampp\htdocs\zend\library

但是当我试图查看我新创建的项目时，它会输出这个错误。

> 致命错误：在第 19 行的 C:\xampp\htdocs\zf-tutorial\library\Zend\Filter\Inflector.php 中找不到类 'Zend\Filter\AbstractFilter'

我不知道，因为我是 Zend 的新手。请大家帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T23:40:38.483

我刚刚发现了这个问题，因为我遇到了同样的问题，希望它在将来会有用，很抱歉恢复了一个相当死的帖子。

对我来说，这个问题是因为我下载了 zend 框架 2，并将该库添加到我在 PHP 中的包含路径中。然而事实证明，我的操作系统（一个名为 crunchbang 的 linux 发行版）预装了 zend 框架 1.1。

我的自动加载器基本上从 1.1 库中加载所有内容，当它没有找到它时，它回退到 2.2 库，它在 2.2 中找到了 Inflector，但无论出于何种原因，都没有找到紧挨着的 AbstractFilter它。

我通过添加一个 register_shutdown_function 来解决这个问题，该函数使用 get_included_files() 将所有包含的文件脱口而出。

一旦我发现了问题，这很容易解决，我从我的 PHP 配置中删除了 zend 框架 2.2 包含，然后，一切都很好:)

问候，菲尔，

# testing - 我如何在 Android 运行时知道它是测试环境还是实时环境？

> ID：14889331
> 
> 赞同：0
> 
> 时间：2013-02-15T06:23:15.957
> 
> 标签：testing, runtime, live, environment

我如何在 Android 运行时知道它是从 Eclipse 运行的测试环境还是从 Market 安装的签名版本？（我只需要在测试时运行一些调试代码，因为在现场我会在运行此代码时捕获一些 ANR 报告）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:27:27.803

你不需要。您可以将它们记录在 Log.d 级别，然后使用 ProGuard 等工具删除此类日志

[http://proguard.sourceforge.net/](http://proguard.sourceforge.net/)

此答案中的更多解释在[发布之前删除所有调试日志记录调用：是否有工具可以执行此操作？](https://stackoverflow.com/questions/2446248/remove-all-debug-logging-calls-before-publishing-are-there-tools-to-do-this/2466662#2466662)

编辑

如果是这种情况，您需要在外部属性文件中有某种布尔值并有条件地写入日志。

有关此处的更多信息 [来自 Ant 中的属性文件的变量](https://stackoverflow.com/questions/10747065/variables-from-properties-file-in-ant)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:56:34.917

根据[http://android-developers.blogspot.co.uk/2010/09/securing-android-lvl-applications.html](http://android-developers.blogspot.co.uk/2010/09/securing-android-lvl-applications.html)

```
boolean isDebuggable =  ( 0 != ( getApplcationInfo().flags &= ApplicationInfo.FLAG_DEBUGGABLE ) ); 
```

如果可调试，会通知您，然后您可以将其保存到共享首选项或其他方法，然后随时检查。

# javascript - 用 JavaScript 添加十进制数

> ID：14889332
> 
> 赞同：0
> 
> 时间：2013-02-15T06:23:19.283
> 
> 标签：javascript, validation, add, floating-point-precision

我讨厌添加关于这个主题的一连串问题，但我不知道在哪里可以找到一个简洁的答案，所以这里是：

**我在** [jsFiddle上有这个表格](http://jsfiddle.net/dvqF8/3/)

我通过结合我今天在网上找到的几个不同的例子来达到这一点，以获得我想要的整体效果。

在研究过程中，我发现很多帖子都在谈论添加浮点数的危害。我相信我理解为什么这通常是一个关于精度的坏主意的概念。但是，这似乎只是当两个数字的总和带有几个小数位时才真正成为问题。（如 6 个或更多）

在我的代码**中，我只会添加有 2 个小数位的数字，**并且我 `var n=val.toFixed(2);`用来确保结果有 2 个且只有 2 个小数位。当测试一切似乎都很好。

**我的问题**是双重的：

1.  **鉴于我只需要 2 位小数，**这是实现我想要的结果并保持精度的一种可接受的方式吗？

2.  你能给我举一个**例子**，展示一个更好或更被接受的方式来做我想做的事吗？

恕我直言（我非常尊重这个社区）**我知道“客户端验证不会取代服务器端验证”** ，**我只需要支持 Chrome**，所以如果我的代码中的任何内容都不能按预期工作其他浏览器不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:27:29.947

一般来说，是的。浮点数通常可以提供 15 位有效数字的精度，因此只保留 2 位数字几乎总是有效的。

然而，根据我的个人经验，我发现*始终*以整数工作更可靠——甚至使用字符串运算来删除小数点并跟踪我有效地将原始数字乘以了多少次方我可以在最后再次分裂。

# c# - 数组创建表达式和长维度长度

> ID：14889333
> 
> 赞同：3
> 
> 时间：2013-02-15T06:23:22.540
> 
> 标签：c#, overflowexception

我只是在阅读 C# 规范和数组创建表达式的部分。在规范中它说：

```
array-creation-expression:
new   non-array-type   [   expression-list ]   rank-specifiersopt   array-initializeropt
new   array-type   array-initializer
new   rank-specifier   array-initializer 
```

[剪辑]

> 表达式列表的维度长度表达式按从左到右的顺序计算。在评估每个表达式之后，将执行到以下类型之一的隐式转换（第 6.1 节）：int、uint、long、ulong。选择此列表中存在隐式转换的第一个类型。如果对表达式的求值或随后的隐式转换导致异常，则不会再求值表达式，也不会执行进一步的步骤。

兴奋，我想嗯我还没有看到，让我们尝试一个长尺寸长度：

```
bool[] bb = new bool[2L + Int32.MaxValue];
bb[int.MaxValue + 1L] = true; 
```

Visual Studio 指着第一行说：

未处理的异常：System.OverflowException：算术运算导致溢出。

请注意，这不是“OutOfMemoryException”。如果我更改我的数组创建表达式并使其更小：

```
bool[] bb = new bool[Int32.MaxValue]; 
```

这次我得到一个“OutOfMemoryException”。我知道 CLR 的整个“没有对象可以大于 2GB”的限制。我的问题是当长度不再可转换为 Int32 时，为什么我会得到一个非常不同的异常（OverflowException 与 OutOfMemoryException）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T06:41:19.647

编译器可以根据维度计算的输入推断出更大的整数类型，但这并不意味着数组的长度可以超过限制。编译器基本上是在检查的上下文中将值转换为本机整数，使用会引发溢出的操作码。这是为了防止值换行或以其他方式允许负数作为维度。

例如，请注意此处的数组声明：

```
var array = new int[2L + int.MaxValue]; 
```

和由此产生的 IL

```
IL_0001:  ldc.i4      01 00 00 80 
IL_0006:  conv.u8     
IL_0007:  conv.ovf.i 
IL_0008:  newarr      System.Int32
IL_000D:  stloc.0     // array 
```

特别注意第三行。该[操作码](http://msdn.microsoft.com/en-US/library/system.reflection.emit.opcodes.conv_ovf_i.aspx)是产生转换并在失败时引发异常的指令。

# three.js - Three.js 中 3D 锥体中的图像格式问题

> ID：14889334
> 
> 赞同：0
> 
> 时间：2013-02-15T06:23:27.673
> 
> 标签：three.js

我正在使用 CylinderGeometry 创建一个 3D 圆锥。

我正在使用`ImageUtils.loadTexture`将图像加载到锥体的底部和曲面上。

```
var mat1 = new THREE.MeshBasicMaterial({ color : 0xcccccc , map: THREE.ImageUtils.loadTexture( 'textures/CIRCLE_1.png' ), overdraw: true } );     
var mat2 = new THREE.MeshBasicMaterial({ color : 0xcccccc , map: THREE.ImageUtils.loadTexture( 'textures/LABEL.png' ), overdraw: true } ); 
```

曲线表面图像被挤压以适合圆锥体。

我可以选择要在圆锥中显示的图像的一部分而不显示图像的其余部分吗？

否则，如果我们提供一个三角形图像，它会创建一个看起来像空心的圆锥体，因为图像的透明部分在渲染圆锥体时也会出现。

我无法在这篇文章中附加图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:21:01.923

要选择图像的一部分，您必须修改 UV 坐标。我不知道那会有多容易。另一种方法是在 gimp 或 photoshop 中根据自己的喜好修改图像。

# c# - 在显示进度环时禁用 UI Winrt C# 应用程序

> ID：14889335
> 
> 赞同：3
> 
> 时间：2013-02-15T06:23:29.023
> 
> 标签：c#, windows-runtime, progress-bar

在我的 winrt C# 应用程序中，我想在显示进度环并且在后台运行某些东西时禁用用户交互。

请让我知道我们如何实现这一目标。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:40:44.683

将您的内容放在一个包含一行和一列的网格中，并将您的内容放在这个单个单元格中（很可能在另一个网格中）。在包含网格内，紧挨“真实”内容下方但在同一个单元格内，放置一个全宽、全高透明虚拟网格，其可见性与进度环的可见性绑定。通过一些调整，您应该能够让虚拟网格捕获所有用户输入并防止它进入“真实”内容。当虚拟网格的可见性折叠时（即当进度环也折叠时），“真实”内容将正常运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-15T07:20:19.430

As I have did this. I have created user control called CurtainUserControl with only grid inside:

```
 <Grid x:Name="curtainGrid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    </Grid> 
```

and in code I can show it

```
 public void ShowCurtain()
    {
        CurtainUserControl guc = new CurtainUserControl();
        mainGrid.Children.Add(guc);
    } 
```

and hide

```
 public void HideCurtain()
    {
        int childCount = VisualTreeHelper.GetChildrenCount(mainGrid);
        for (int i = 0; i < childCount; i++)
        {
            CurtainUserControl guc = mainGrid.Children.ElementAt(i) as CurtainUserControl;
            if (guc != null)
            {
                mainGrid.Children.RemoveAt(i);
            }
        }
     } 
```

# tfs - 如何在 TFS 中组织工作项的层次结构？

> ID：14889341
> 
> 赞同：2
> 
> 时间：2013-02-15T06:24:06.580
> 
> 标签：tfs, project-planning, workitem, tfs-workitem

例如，假设我添加了一个名为“开发事件聚合器”的新工作项。我开始实现这个功能，突然不明白它包含更具体的任务，例如“实现按时间过滤”，“实现按应用名称过滤”等。

我需要组织它们，以便应该有一个工作项负责人（“开发事件聚合器”）和从属工作项（“按时间实施过滤”等）。

如何完成我描述的任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T02:43:58.670

您需要在这些工作项之间使用父子链接来获得层次结构，即项目的树列表。

请参阅：[https ://msdn.microsoft.com/en-us/library/dd293534.aspx](https://msdn.microsoft.com/en-us/library/dd293534.aspx)

# mysql - Mysql 自动复制数据

> ID：14889342
> 
> 赞同：0
> 
> 时间：2013-02-15T06:24:21.650
> 
> 标签：mysql, database-design, phpmyadmin

好吧，解释起来很复杂，但是我拥有的是一个带有地址表的数据库。我想要做的是在另一个数据库中复制该表，以便我可以访问相同的数据。

所以基本上它就像我希望数据库 A 表 A 是与数据库 B 表 A 相同的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:27:43.890

尝试这个：

```
DROP TABLE IF EXISTS `DatabaseB.TableA`;
CREATE TABLE `DatabaseB.TableA` SELECT * FROM `DatabaseA.TableA`; 
```

请注意，这不会重新创建主键或索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:20:35.697

如果两个数据库可以同时访问（即在同一台服务器上并且任何用户都可以访问两者），您可以使用[`CREATE TABLE LIKE`](http://dev.mysql.com/doc/refman/5.6/en/create-table.html)和创建一个新的相同表[`INSERT INTO SELECT`](http://dev.mysql.com/doc/refman/5.6/en/insert-select.html)

```
CREATE TABLE DatabaseB.TableA LIKE DatabaseA.TableA;
INSERT INTO DatabaseB.TableA SELECT * FROM DatabaseA.TableA; 
```

# hadoop - 如何从 Web 应用程序向 hadoop 集群提交作业？

> ID：14889345
> 
> 赞同：0
> 
> 时间：2013-02-15T06:24:59.057
> 
> 标签：hadoop

我有一个嵌入到 Apache Tomcat Web 容器中的 Map Reduce 程序。但是在运行程序时，它作为本地作业运行程序运行，而不是使用 jobClient 在集群上运行。请帮我将作业提交到远程集群。将作业和配置提交到 java 程序的过程是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:52:21.127

Hadoop 在找不到配置时以本地模式运行。当它可以找到它时，它会包含 JobTracker 的地址。
您可以将 mapred-site xml 放在 /etc/hadoop/conf/ 目录
中，或者在作业配置中明确设置 JobTracker URL。

# sql-server - 无法在 Visual Studio 2010 中创建表，出现“找不到指定模块（Hresult 异常：0x800700E）”错误

> ID：14889346
> 
> 赞同：2
> 
> 时间：2013-02-15T06:25:03.483
> 
> 标签：sql-server, visual-studio-2010, sql-server-express

我正在尝试使用来自服务器资源管理器部分的 Visual Studio 2010 Sp1 本身创建一个数据库及其表。

我可以成功创建数据库，但是当我查找表时出现错误：

> 找不到指定的模块（Hresult 异常：0x800700E）

我在系统上也安装了 SQL Server 2012 Enterprise，我正在尝试使用 .\sqlexpress 在 Visual Studio 中创建数据库。

记录在案：我安装了 Visual Studio 2012，但由于我受不了它而将其删除。这与这个问题有什么关系吗？

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-15T06:48:28.107

好的，我解决了问题。它是由以前安装 Visual Studio 2012 然后卸载它引起的。Visual Studio 2012 更改`dsref80.dll`位于：

> C:\Program Files (x86)\Common Files\microsoft shared\Visual Database Tools\

覆盖旧版本。当它被卸载时，dll 仍然存在，并且由于它的版本较新并且没有版本 10 ，Visual Studio 2010 会生成错误。要解决此问题，您需要做的就是获取版本 10 dll 并将其放置在上述路径中（修复或重新安装即可解决问题）。如果有人需要，这是我系统上的 dll。 [这里是源](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/d65c71f5-3887-4f2a-bbd3-e799a4ac6fdc/)

[dsref80.dll](http://sdrv.ms/UlBOr4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T13:08:13.547

虽然[Hossein](https://stackoverflow.com/users/938244/hossein)的回答是正确的，但我想补充一点，修复 Visual Studio 2010 并没有解决我的问题。除此之外，该文件位于

```
C:\Program Files (x86)\Common Files\Microsoft Shared\Visual Database Tools 
```

我电脑上的目录。我使用的是 Windows 8。只需`dsref80.dll`将此目录替换为 Hossein 提供的文件即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T09:37:26.863

我遇到了同样的问题，浪费了我重新安装 VS 的时间。

解决方案是简单地替换上述目录中的 dsref80.dll 文件，如果仍然无法正常工作，请重新启动 PC 并再次从某个工作系统中复制

# c# - C# winform textbox.text 不会改变

> ID：14889347
> 
> 赞同：0
> 
> 时间：2013-02-15T06:25:04.170
> 
> 标签：c#, winforms

```
public partial class A : UserControl
{
  private string _x;
  public string X {
    get { return _x; }
    set { 
      this._x = value;
      this.textBox1.Text = this._x; 
  }
}
public partial class B : WinForm
{
   public B() {
     //Add usercontrol A to Groupbox1
     //Set A.X = "hello world"
   }
}
public class MainForm: WinForm
{
    public void button1_Click(....) { 
       B bForm = new B();
       bForm.ShowDialog();
    }
} 
```

在设计时，我设置了 textbox1.Text="hello"。在主类中，我有一个按钮可以打开一个新表单 B，并且在该表单 BI 上有一个组框来添加这个用户控件 A 并更改 X 属性值 =“hello world”，但 textBox1.Text 没有在 UI 上进行更改。当我在设置 textbox1.Text = this._x 之后设置断点时，它显示值确实更改为“hello world”但它没有反映在 UI 上？

为什么？以及如何解决？

谢谢一堆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:24:17.610

我的猜测是（因为我没有看到所有代码，这就像猜谜游戏 8）） -`InitializeComponent`在`classB`. 由于`X`属性没有`DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)`属性，它在`InitializeComponent`方法中用空字符串序列化 - 从而擦除先前显式设置的值。

# java - 正则表达式：如何在 java 中替换这个字符串？

> ID：14889348
> 
> 赞同：0
> 
> 时间：2013-02-15T06:25:05.650
> 
> 标签：java, regex

所以我有这个**java String**。

```
<script type="text/javascript"  
    src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script type='text/x-mathjax-config'>
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script> 
```

我想用`""`.

我正在做的是这样的：

```
.replaceAll("(<img[^>]*>)|(<script[^>]*>)", "") 
```

但这不会 `MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});`在脚本标签之间删除。

上面的正则表达式也会查找所有`<img>`标签并将它们替换为`""`，我想为上面显示的`<script>`标签以及它们**之间**的所有内容实现相同的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:37:31.497

这似乎工作

```
str = Pattern.compile("<img .+?</img>|<script .+?</script>", Pattern.DOTALL).matcher(str).replaceAll(""); 
```

请注意，您的 str 有 CRLF 这为什么是 DOTALL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:41:36.610

```
If you want to replace part of the string between the tags to replace then try this.

string = string.replaceAll("(<script>.*?)Here is our keyword which should be replaced(.*?</script>)","$1Replaced with:$2"); 
```

如果您想用“”替换标签之间的所有内容，请尝试此操作。

```
s = s.replaceAll("(<script>).*?(</script>)",""); 
```

# oracle-apex - apex_application 全局变量的范围

> ID：14889357
> 
> 赞同：2
> 
> 时间：2013-02-15T06:26:40.860
> 
> 标签：oracle-apex

顶点全局变量的范围是什么`APEX_APPLICATION.G_X01...G_X10`？它们是真正的“全局”、会话范围还是请求范围？

我做了一些测试，我的发现似乎是这些全局变量是请求范围的（即：同一会话中的其他请求和不同会话中的其他请求获得自己的全局变量副本），但我想确认我的发现是正确的。

我们设置的详细信息：

客户端 JS 代码如下所示：

```
data = {'first_name':$('#P25_FIRST_NAME').val()};
data = JSON.stringify(data);

$.ajax({
   type: "POST",
   url: "wwv_flow.show",
   data: {
     p_flow_id:$('#pFlowId').val(), 
     p_flow_step_id:$('#pFlowStepId').val(), 
     p_instance:$('#pInstance').val(), 
     x01:data,
     p_request:"APPLICATION_PROCESS=AJAX_TEST"
   },
   dataType: "json",
   success: function(data) {
     alert('success:\n' + data);
   },
   error: function(data) {
     alert('error:\n' + data);
   },
}); 
```

服务器端 PL/SQL 代码如下所示：

```
CREATE OR REPLACE PROCEDURE
AJAX_TEST IS

JSON_REQUEST JSON;
JSON_RESPONSE JSON;

BEGIN

  JSON_REQUEST := JSON(APEX_APPLICATION.G_X01);
  JSON_RESPONSE := JSON();

  JSON_RESPONSE.PUT('first_name', JSON_REQUEST.GET('first_name').GET_STRING());
  JSON_RESPONSE.PUT('last_name', 'smith');

  HTP.P(JSON_RESPONSE.to_char());

END AJAX_TEST; 
```

我想确保变量`APEX_APPLICATION.G_X01`,`X02`等...不会受到处理当前请求范围内的其他请求的影响。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:01:01.557

每个请求（或页面提交）。快速测试可以证实这一点：
On Demand Process:"bogus"

```
htp.p("X01: '||apex_application.g_x01); 
```

然后从控制台运行：

```
var ajaxRequest = new htmldb_Get(null, $v("pFlowId"), "APPLICATION_PROCESS=bogus", $v("pFlowStepId"));
ajaxRequest.addParam("x01","xxxx");
var ajaxReturn = ajaxRequest.get(); 
```

回复：

```
X01: xxxx 
```

然后运行：

```
var ajaxRequest = new htmldb_Get(null, $v("pFlowId"), "APPLICATION_PROCESS=bogus", $v("pFlowStepId"));
var ajaxReturn = ajaxRequest.get(); 
```

回复：

```
X01: 
```

当然，在页面提交期间，f## 数组和 x## 项目将保存提交的值，直到处理结束。
此外，另一个用户（会话）不会影响这些值。您可能会说这些项目的缓存在每次提交/请求后被清除。

# performance - 我怎么知道存储过程的并行运行是否高效？

> ID：14889360
> 
> 赞同：0
> 
> 时间：2013-02-15T06:26:46.000
> 
> 标签：performance, oracle, plsql, parallel-processing, oracle10g

我正在使用 dbms_jobs 并行运行存储过程。

除了比较每个程序的运行时间与并行运行它之外，还有什么方法可以知道并行运行程序是否更快/更有效？

无论如何在oracle中查看CPU /使用情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:29:29.270

这不是一个容易回答的问题，因为大多数分析都是针对作业的确切性质以及系统上运行的所有其他内容。

要问的关键问题是：

*   系统是否有足够的可用资源在我想做的时候并行运行作业？
*   代码中是否有任何内容表明作业可能会受益于同时运行，反之亦然？

作为后者的示例，如果您有多个作业都需要对一个非常大的表进行全表扫描，那么您可以从同时运行它们中受益，因为它们可以从实例缓冲区中读取相同的块。实际上，一个会话将读取块，而其他会话将等待它们被读取。当它们在不同时间运行时，它们可能都必须产生物理 i/o 才能从磁盘读取块。

关于全表扫描的注意事项：来自全表扫描的块被加载到 db 块缓冲区以进行常规读取（除非通过在 10g 中启用串行直接路径读取另外指定）或加载到 PGA 以进行并行查询（除非 CACHE 另有提示）或串行直接路径在 11g 中读取。[根据 11.2 文档http://docs.oracle.com/cd/E11882_01/](http://docs.oracle.com/cd/E11882_01/server.112/e16508/memory.htm#CNCPT1224)，加载到 db 块缓冲区时，它们不会像单个块读取那样被标记为 MRU，而是“进入 LRU 列表的中间” [server.112/e16508/memory.htm#CNCPT1224](http://docs.oracle.com/cd/E11882_01/server.112/e16508/memory.htm#CNCPT1224)

在任何情况下，块都不必在内存中保存很长时间，因为会有一个或多个会话记录他们对读取它们的兴趣——大量的“缓冲区忙等待”将是多个会话的标志正在等待另一个人阅读他们感兴趣的块。

# javascript - Javascript：为什么我无法在我的对象行为中清除超时？

> ID：14889365
> 
> 赞同：1
> 
> 时间：2013-02-15T06:27:08.293
> 
> 标签：javascript, html, settimeout

我已经解决了很多小时，但我不知道为什么我不能解决它。我有以下代码：

```
var Timer_Tick;
var Game_Engine = {
    //Set the min and sec of the timer by default is 2 min
    min:1,
    sec:60,
    star_count: 0,
    tongue_count: 0,
    time: '',
    star1: '',
    star2: '',
    star3: '',
    star_bar: '',
    tongue_bar: '',
    frog: '',
    bug: '',
    flower: '',
    Timer: function () {
        //Start Timer
        var that = this;
        var stop = function () { that.stopTimer(); };
        Timer_Tick = setTimeout(function () {
                var Time = new Date(0, 0, 0, 0, that.min, that.sec--).toTimeString().slice(3,8);
                that.time.text = Time;
                console.log(that.min + ':' + that.sec);
                    if (that.min === 1 && that.sec === 40) {
                        that.bug.gotoAndPlay('take_photo');
                        that.flower.onPress = null;
                        stop();
                    }
                    else if (that.min === 1 && that.sec === -60) {
                        that.stopTimer();
                        //clearTimeout(Timer_Tick);
                        that.time.text = '00:00';
                        createjs.Tween.get(that.bug, { loop: false }).to({ y: that.bug.y + 100 }, 400, createjs.Ease.linear);
                        setTimeout(function () {
                            that.bug.gotoAndPlay('bite');
                            setTimeout(function () {
                                that.flower.gotoAndPlay('broken_flower');
                                that.frog.gotoAndPlay('lose');
                            }, 200);
                            createjs.Tween.get(that.bug, { loop: false }).wait(500).to({ x: 200, y: -100 }, 6000, createjs.Ease.linear);
                        }, 400);
                    }

                that.Timer();        
        }, 100);
    },
    stopTimer: function () {
        //Pause or stop Timer
        clearTimeout(Timer_Tick);
    }
}; 
```

我已经把`debugger`找出我的事件是否被触发。结果是它按预期正确触发，但计时器不会停止并永远继续运行。谁能帮助我我现在真的需要你的帮助。我是 javascript 的新手 :)。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:20:14.317

尝试添加“return false;” 在您的计时器功能中调用停止后。就像现在一样，我认为您将停止计时器，但随后您将在函数底部再次启动它。

```
if (that.min === 1 && that.sec === 40) {
   that.bug.gotoAndPlay('take_photo');
   that.flower.onPress = null;
   stop();
   return false;
} 
```

# java - 如何移动放置在容器底部的最小化组件？

> ID：14889369
> 
> 赞同：3
> 
> 时间：2013-02-15T06:27:21.070
> 
> 标签：java, swing, jinternalframe, mouse-listeners

我在一个容器中有三个组件和其中的按钮。当我点击最小化按钮时，组件被最小化到容器的底部，当我点击最小化的组件时，它被最大化。

假设三个组件位于底部，如果我最大化第二个组件，那么它会被最大化并且第三个最小化的组件不会占据第二个的位置，这仍然是空间。

截屏
[![在此处输入图像描述](../Images/2d83b8faf4c6a2d101ee63eb22972559.png)](https://i.stack.imgur.com/LcCjQ.jpg)

```
package Project;

import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.HeadlessException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyVetoException;
import javax.swing.JButton;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.plaf.basic.BasicInternalFrameTitlePane;
import javax.swing.plaf.basic.BasicInternalFrameUI;

public class Test2 {

    public Test2() throws HeadlessException, PropertyVetoException {
        createAndShowGUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new Test2();
                } catch (HeadlessException ex) {
                    ex.printStackTrace();
                } catch (PropertyVetoException ex) {
                    ex.printStackTrace();
                }

            }
        });
    }

    private void createAndShowGUI() throws HeadlessException, PropertyVetoException {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final JDesktopPane jdp = new JDesktopPane() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(600, 400);
            }
        };

        frame.setContentPane(jdp);
        frame.pack();

        createAndAddInternalFrame(jdp, 0, 0);
        createAndAddInternalFrame(jdp, 300, 0);
        createAndAddInternalFrame(jdp, 1, 200);

        frame.setVisible(true);
    }

    private void createAndAddInternalFrame(final JDesktopPane jdp, int x, int y) throws PropertyVetoException {
        final JInternalFrame jInternalFrame = new JInternalFrame("", true, true, true, true);
        jInternalFrame.setLocation(x, y);

        JPanel jp = new JPanel();
        JLabel jl=new JLabel("panel"+x);

        JButton jb = new JButton("_");
        JButton jb2 = new JButton("[]");
        JButton jb3 = new JButton("X");

        jInternalFrame.setLayout(new GridLayout(2, 2));
jp.add(jl);
        jp.add(jb);
        jp.add(jb2);
        jp.add(jb3);

        jInternalFrame.add(jp);

        jb.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    if (jInternalFrame.getLayer() == JDesktopPane.FRAME_CONTENT_LAYER) {
                        jdp.remove(jInternalFrame);
                        jdp.add(jInternalFrame, JDesktopPane.DEFAULT_LAYER);
                        jdp.revalidate();
                        jdp.repaint();
                    }
                    jInternalFrame.pack();
                    jInternalFrame.setIcon(true);
                } catch (PropertyVetoException ex) {
                    ex.printStackTrace();
                }

            }
        });
        jb2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    if (jInternalFrame.isMaximum()) {//restore
                        jInternalFrame.pack();
                    } else {//maximize
                        jInternalFrame.setMaximum(true);
                    }
                    jdp.remove(jInternalFrame);
                    jdp.add(jInternalFrame, JDesktopPane.FRAME_CONTENT_LAYER);
                    jdp.revalidate();
                    jdp.repaint();
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        });
        jb3.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    jInternalFrame.dispose();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

            }
        });

        BasicInternalFrameTitlePane titlePane = (BasicInternalFrameTitlePane) ((BasicInternalFrameUI) jInternalFrame.getUI()).getNorthPane();
        jInternalFrame.remove(titlePane);

        jInternalFrame.pack();
        jInternalFrame.setVisible(true);
        jdp.repaint();

        jdp.add(jInternalFrame);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:37:50.380

我已经用 Metal 和 Windows L&F 测试过这个，你可能需要用其他一些测试它。

基本上，当组件无效并`doLayout`调用方法时，我们会检查是否存在任何`JInternalFrame.JDesktopIcon`组件。然后我们把它们拿出来，按照我们喜欢的方式布置出来……

```
public class TestInternalFrame {

    public static void main(String[] args) {
        new TestInternalFrame();
    }

    private int xpos = 0;
    private int ypos = 0;

    public TestInternalFrame() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception exp) {
                    exp.printStackTrace();
                }
                DesktopPane pane = new DesktopPane();
                pane.add(newInternalFrame());
                pane.add(newInternalFrame());
                pane.add(newInternalFrame());

                JFrame frame = new JFrame();
                frame.add(pane);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });
    }

    public JInternalFrame newInternalFrame() {
        JInternalFrame inf = new JInternalFrame("Blah", true, true, true, true);
        inf.setLocation(xpos, ypos);
        inf.setSize(100, 100);
        inf.setVisible(true);

        xpos += 50;
        ypos += 50;

        return inf;
    }

    public class DesktopPane extends JDesktopPane {

        @Override
        public void doLayout() {
            super.doLayout();
            List<Component> icons = new ArrayList<Component>(25);
            for (Component comp : getComponents()) {
                if (comp instanceof JInternalFrame.JDesktopIcon) {
                    icons.add(comp);
                }
            }

            int x = 0;
            for (Component icon : icons) {

                int y = getHeight() - icon.getHeight();
                icon.setLocation(x, y);
                x += icon.getWidth();

            }
        }
    }
} 
```

别搞错了，这是一个粗略的 hack

**更新**

```
int x = 0;
for (Component icon : icons) {
    int y = getHeight() - icon.getHeight();
    icon.setLocation(x, y);
    x += icon.getWidth();
    setLayer(icon, 10); // <--- Add me
} 
```

对于您的另一个问题，您只需将图标移动到更高的层。问题在于，您实际上需要找到足够高的层。您可以使用`Integer.MAX_VALUE`，但这有点苛刻（并且您可能希望在其之上有一些东西），相反，您可以计算最大层并将 +1 放在其之上...

```
public void doLayout() {
    super.doLayout();
    List<Component> icons = new ArrayList<Component>(25);
    int maxLayer = 0;
    for (Component comp : getComponents()) {
        if (comp instanceof JInternalFrame.JDesktopIcon) {
            icons.add(comp);
            maxLayer = Math.max(getLayer(comp), maxLayer);
        }
    }

    maxLayer++;
    int x = 0;
    for (Component icon : icons) {

        int y = getHeight() - icon.getHeight();
        icon.setLocation(x, y);
        x += icon.getWidth();
        setLayer(icon, maxLayer);

    }
} 
```

你真的需要花时间学习[如何使用内部框架](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)和[如何使用分层窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)，因为（至少最后一部分）在这些......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:14:07.550

像这样的东西：

```
jdp.setDesktopManager( new DefaultDesktopManager(){
    @Override
    public void deiconifyFrame(JInternalFrame f) {
        super.deiconifyFrame(f);
        JDesktopPane d = f.getDesktopPane();
         JInternalFrame[] frames = d.getAllFrames();
         for(JInternalFrame frame : frames ) {
             Rectangle bounds = getBoundsForIconOf(frame);
              // relayout all frames
         }
    }
}); 
```

# javascript - 想要产生1-45之间的随机数而不重复

> ID：14889371
> 
> 赞同：-2
> 
> 时间：2013-02-15T06:27:27.590
> 
> 标签：javascript, titanium

我遇到了一个非常奇怪的问题。我试图找到它的解决方案，但徒劳无功。我的问题是我想创建一个介于 1-45 之间的随机数，并且我不希望该数字再次重复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T06:30:42.000

根据定义，随机选择将随机重复。

但是，您可以构建一个包含每个数字的数组，然后对数组进行打乱，生成随机的数字顺序而不重复。

```
var nums = [], i;
for( i=1; i<=45; i++) nums.push(i);
nums.sort(function(a,b) {return Math.random()-0.5;});
alert(nums.join(",")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:37:16.807

这是工作代码..

```
Random rd =new Random();    
int n = rd.Next(1,45); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:39:37.483

您真正想要的是在给定范围内创建一组数字并随机删除其中一个数字，直到该组为空。

这是一个生成另一个函数的函数，该函数正是这样做的：

```
function generateRandomRangeSet(beg, end) {
  var numbers = []; // Create an array in range [beg, end].
  for (var i=beg; i<=end; i++) { numbers.push(i); }
  return function() {
    if (numbers.length < 1) { throw new Error('no more numbers'); }
    var i=Math.floor(Math.random()*numbers.length), number=numbers[i];
    numbers.splice(i, 1); // Return and remove a random element of the array.
    return number;
  }
}

var r = generateRandomRangeSet(1, 45);
r(); // => 9
r(); // => 24
r(); // => 7 ... for each number [1, 45] then ...
r(); // Error: no more numbers 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-03T08:41:57.013

这是有效的

```
function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min)) + min;
} 
```

# spring-integration - 弹簧集成

> ID：14889373
> 
> 赞同：0
> 
> 时间：2013-02-15T06:27:29.550
> 
> 标签：spring-integration

我已经使用入站通道适配器实现了一个轮询器，代码运行良好，但它抛出了这个我无法解决的特殊异常

```
11:43:27.664 [main] DEBUG o.s.i.u.MessagingMethodInvokerHelper - Method [public void com.ms.aps.fsmessaging.alert.QueryServiceActivator.getMessageProcessStatus(byte[],com.ms.aps.fsmessaging.alert.types.MessageType,java.lang.String) throws java.lang.Exception] is not eligible for Message handling.
java.lang.IllegalArgumentException: Found more than one parameter type candidate: [byte[]] and [com.ms.aps.fsmessaging.alert.types.MessageType]
    at org.springframework.util.Assert.isNull(Assert.java:89) ~[org.springframework.core.jar:3.0.5.RELEASE]
    at org.springframework.integration.util.MessagingMethodInvokerHelper$HandlerMethod.setExclusiveTargetParameterType(MessagingMethodInvokerHelper.java:623) ~[spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.util.MessagingMethodInvokerHelper$HandlerMethod.generateExpression(MessagingMethodInvokerHelper.java:557) ~[spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.util.MessagingMethodInvokerHelper$HandlerMethod.<init>(MessagingMethodInvokerHelper.java:437) ~[spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.util.MessagingMethodInvokerHelper$1.doWith(MessagingMethodInvokerHelper.java:300) ~[spring-integration-core-2.0.5.jar:na]
    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:452) [org.springframework.core.jar:3.0.5.RELEASE]
    at org.springframework.integration.util.MessagingMethodInvokerHelper.findHandlerMethodsForTarget(MessagingMethodInvokerHelper.java:274) [spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.util.MessagingMethodInvokerHelper.<init>(MessagingMethodInvokerHelper.java:167) [spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.util.MessagingMethodInvokerHelper.<init>(MessagingMethodInvokerHelper.java:119) [spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.util.MessagingMethodInvokerHelper.<init>(MessagingMethodInvokerHelper.java:114) [spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.handler.MethodInvokingMessageProcessor.<init>(MethodInvokingMessageProcessor.java:56) [spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.handler.ServiceActivatingHandler.<init>(ServiceActivatingHandler.java:34) [spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.config.ServiceActivatorFactoryBean.createMethodInvokingHandler(ServiceActivatorFactoryBean.java:48) [spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.config.AbstractStandardMessageHandlerFactoryBean.createHandler(AbstractStandardMessageHandlerFactoryBean.java:72) [spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.config.AbstractSimpleMessageHandlerFactoryBean.createHandlerInternal(AbstractSimpleMessageHandlerFactoryBean.java:89) [spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.config.AbstractSimpleMessageHandlerFactoryBean.getObject(AbstractSimpleMessageHandlerFactoryBean.java:68) [spring-integration-core-2.0.5.jar:na]
    at org.springframework.integration.config.AbstractSimpleMessageHandlerFactoryBean.getObject(AbstractSimpleMessageHandlerFactoryBean.java:31) [spring-integration-core-2.0.5.jar:na]
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1429) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:245) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563) [org.springframework.beans.jar:3.0.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895) [org.springframework.context.jar:3.0.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425) [org.springframework.context.jar:3.0.5.RELEASE]
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139) [org.springframework.context.jar:3.0.5.RELEASE]
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83) [org.springframework.context.jar:3.0.5.RELEASE]
    at com.ms.aps.fsmessaging.alert.StartPolling.main(StartPolling.java:20) [.ide-bin/:na] 
```

我使用行映射器以存储结果集的 bean 对象的形式配置输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:00:09.440

这只是一个调试消息，而我们遍历服务以找到匹配的方法。这是良性的，没有什么可担心的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T00:13:53.970

您的服务激活器处理程序方法`getMessageProcessStatus`无法处理接收到的输入数据类型。只需按预期使用适当的数据类型。

它找不到匹配的方法，它是您在服务激活器中提供的方法名称。

# php - 获取 HTML 格式的 DOMXpath 结果

> ID：14889377
> 
> 赞同：-1
> 
> 时间：2013-02-15T06:28:03.483
> 
> 标签：php, domdocument

我正在使用从另一个网站获取数据`file_get_contents()`，但我需要使用类 inputpanelfields 提取多个表记录，

```
$d = new DOMDocument  
libxml_use_internal_errors(true)  
$d->loadHTML($html)   
$table = $x->query('//table[contains(@class, "inputpanelfields")]') 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:03:26.930

[`DomDocument::saveHTML()`](HTTP://php.net/domdocument.savehtml)接受一个参数来只保存文档的一个子集。例如，您可以像这样输出第一个匹配表的 HTML：

```
echo $d->saveHTML($table[0]); 
```

# java - 如何将字体添加到 iText？

> ID：14889381
> 
> 赞同：-1
> 
> 时间：2013-02-15T06:28:33.263
> 
> 标签：java, itext

如何将字体添加到 iText Java API？我必须在哪个源代码文件中进行更改才能以 .ttf 格式添加位于我的系统上的字体集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:32:45.243

试试[这个](http://itextpdf.com/examples/iia.php?id=195)：

```
BaseFont base = BaseFont.createFont("c:/windows/fonts/arial.ttf", BaseFont.WINANSI);
Font font = new Font(base, 11f, Font.BOLD); 
```

也见[BaseFont](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/BaseFont.html)类

# iphone - 通过推送通知发送图像或消息

> ID：14889382
> 
> 赞同：0
> 
> 时间：2013-02-15T06:28:35.000
> 
> 标签：iphone, xcode

我开发了一个聊天应用程序，用户可以在其中通过推送通知发送和接收消息。我正在使用 php 向服务器发送消息。当我在应用程序关闭的情况下向另一台手机发送消息时，推送通知将显示在主屏幕中移动为“您收到来自 john 的消息”。因此用户单击推送通知并打开应用程序以查看消息。当用户未单击推送通知时意味着我的应用程序没有收到任何消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:39:55.030

仅当用户操作通知或在您的应用程序处于前台时收到通知时，您的应用程序才会收到推送消息有效负载。

这就是为什么您不应该将内容推送到您的应用程序的原因。它只是为了让用户知道有新内容。您的应用程序应该负责从后端服务器中提取任何新内容，只要它能够这样做。

# javascript - jQuery.on 函数不起作用

> ID：14889389
> 
> 赞同：0
> 
> 时间：2013-02-15T06:28:59.677
> 
> 标签：javascript, jquery

我正在使用 jQuery 1.9.1，我需要对动态添加的 td 执行操作。我尝试使用 jQyuery.on 函数，但没有调用我的代码。请帮忙！这是我的代码

**HTML**

```
<div>First Name:
    <input type="text" name="txtFName" id="txtFName" />
    <br/>Last Name:
    <input type="text" name="txtLName" id="txtLName" />
    <br/>
    <input type="button" value="Add User" id="btnAdd" />
</div>
<br/>
<div>Users
    <table id="tblusers">
        <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="tbUsers"></tbody>
    </table>
    <br/>
    <input type="button" value="Save Users" />
</div> 
```

**Javascript**

```
$(document).ready(function () {
    $('#btnAdd').click(function () {
        var content = "";
        var fName = $('#txtFName').val();
        var lName = $('#txtLName').val(); ;
        content = "<tr><td>" + fName + "</td><td>" + lName + "</td><td class=\"clremove\">Delete</td></tr>";
        $('#tbUsers').append(content);
    });

    $('.clremove').on('click', function () {
        $('#tbUsers tr').remove($(this).closest('tr'));
    });
}); 
```

这是我的[提琴手](http://jsfiddle.net/jobzky/txKEs/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T06:30:43.850

`.clremove`调用时不存在`.on`，因此没有任何约束。您想使用事件委托：

```
$("#tbUsers").on('click', '.clremove', function () {
    $("#tbUsers tr").remove($(this).closest('tr'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:32:40.573

由于您`clremove`是动态添加的，`$('.clremove').on('click'..`因此事件不会触发（文件中一次不存在）..您可以为此使用 on() 委托事件。

```
$('#tbUsers').on('click','.clremove' function () {
    $('#tbUsers tr').remove($(this).closest('tr'));
}); 
```

如果您想了解更多关于其直接和委托事件的信息，您可以通过该[链接。](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)`jquery.on`

# android - Spinner 滚动崩溃应用程序

> ID：14889392
> 
> 赞同：1
> 
> 时间：2013-02-15T06:29:39.143
> 
> 标签：android, spinner

我有一个通过 Web 服务调用加载的微调器，它工作正常，但是当我滚动它或第二次选择项目时，它会使应用程序崩溃。第一次点击它工作正常。我知道这可能是数组长度的问题，但无法解决。

这是我的代码：

```
Log.d("ArrayAdapter",""+ SpinnerData.length);
ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(abc.this,android.R.layout.simple_list_item_1, SpinnerData);

spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
lv.setAdapter(spinnerArrayAdapter); 
```

SpinnerData 是包含来自服务的数据的字符串数组。

logcat 看起来像这样：

```
02-15 10:40:40.350: W/System.err(992): java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 0
02-15 10:40:40.360: W/System.err(992):  at java.util.Vector.elementAt(Vector.java:329)
02-15 10:40:40.360: W/System.err(992):  at org.ksoap2.serialization.SoapObject.getProperty(SoapObject.java:116)
02-15 10:40:40.360: W/System.err(992):  at ums.lovely.university.StudentPracMarsksDetails.soap(StudentPracMarsksDetails.java:216)
02-15 10:40:40.360: W/System.err(992):  at ums.lovely.university.StudentPracMarsksDetails$Search$1.run(StudentPracMarsksDetails.java:322)
02-15 10:40:40.360: W/System.err(992):  at android.os.Handler.handleCallback(Handler.java:587)
02-15 10:40:40.360: W/System.err(992):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-15 10:40:40.360: W/System.err(992):  at android.os.Looper.loop(Looper.java:123)
02-15 10:40:40.370: W/System.err(992):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-15 10:40:40.370: W/System.err(992):  at java.lang.reflect.Method.invokeNative(Native Method)
02-15 10:40:40.370: W/System.err(992):  at java.lang.reflect.Method.invoke(Method.java:521)
02-15 10:40:40.370: W/System.err(992):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-15 10:40:40.370: W/System.err(992):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-15 10:40:40.370: W/System.err(992):  at dalvik.system.NativeStart.main(Native Method)
02-15 10:40:40.370: D/The students3rfrfg4ry(992): ghsksrrsio
02-15 10:40:40.370: D/Else The studenty(992): ghskssio
02-15 10:40:41.130: D/AndroidRuntime(992): Shutting down VM
02-15 10:40:41.130: W/dalvikvm(992): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-15 10:40:41.150: E/AndroidRuntime(992): FATAL EXCEPTION: main
02-15 10:40:41.150: E/AndroidRuntime(992): java.lang.NullPointerException
02-15 10:40:41.150: E/AndroidRuntime(992):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
02-15 10:40:41.150: E/AndroidRuntime(992):  at android.widget.ArrayAdapter.getDropDownView(ArrayAdapter.java:376)
02-15 10:40:41.150: E/AndroidRuntime(992):  at android.widget.Spinner$DropDownAdapter.getDropDownView(Spinner.java:329)
02-15 10:40:41.150: E/AndroidRuntime(992):  at android.widget.Spinner$DropDownAdapter.getView(Spinner.java:325)
02-15 10:40:41.150: E/AndroidRuntime(992):  at android.widget.AbsListView.obtainView(AbsListView.java:1315)
02-15 10:40:41.150: E/AndroidRuntime(992):  at android.widget.ListView.makeAndAddView(ListView.java:1727)
02-15 10:40:41.150: E/AndroidRuntime(992):  at android.widget.ListView.fillDown(ListView.java:652)
02-15 10:40:41.150: E/AndroidRuntime(992):  at android.widget.ListView.fillSpecific(ListView.java:1284)
02-15 10:40:41.150: E/AndroidRuntime(992):  at android.widget.ListView.layoutChildren(ListView.java:1570)
02-15 10:40:41.150: E/AndroidRuntime(992):  at android.widget.AbsListView.onLayout(AbsListView.java:1147) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:04:52.233

onSelectedItemListener 中的函数如何？
需要记住数组长度和数组索引。
Array : 0 ... x
且长度为 x + 1

如果仍然错误，尝试将 android.R.layout.simple_list_item_1 更改为 android.R.layout.simple_spinner_item

# javascript - 如何在沙盒环境中运行 JavaScript 函数？

> ID：14889393
> 
> 赞同：2
> 
> 时间：2013-02-15T06:29:44.513
> 
> 标签：javascript, node.js

我有一个用 JavaScript(node.js) 编写的应用程序服务器。我接受一个 JS 函数代码作为来自网络浏览器的输入。现在我希望能够在服务器上运行这个功能而不影响其他任何东西。

我想确保这个函数正在修改的所有变量都是函数的本地变量，并且不会影响服务器上的任何其他变量。

此外，我想以某种方式避免无限循环或递归以及任何其他不可预见的问题。

大多数情况下，我希望用户能够在我采取一些行动之前触发一些代码作为要运行的函数。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T17:02:05.260

[Sandbox](https://github.com/gf3/sandbox)是一个节点模块，根据 README；

*   可用于执行不受信任的代码
*   支持超时（例如防止无限循环）
*   受限代码（无法访问 node.js 方法）

[@maerics 所写](https://stackoverflow.com/questions/14889393/how-to-run-a-javascript-function-in-a-sandbox-environment/14898901#14898901)[的停止问题](http://en.wikipedia.org/wiki/Halting_problem)可以通过为代码设置超时来解决，尽管您不能在同一进程中这样做，因为例如`while(1)`会阻止它。沙盒通过使用子进程解决了这个问题。

因此，变量问题也应该得到解决，因为 Sandbox 位于子进程而不是主进程中。

如前所述，如果可能，您应该避免用户在您的服务器上运行任意代码，因为这会带来*巨大*的安全风险。即使模块提供了此限制，您也应该至少以尽可能无特权的用户运行子进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T16:23:13.750

### 您无法以编程方式确定任意代码是否会无限期运行或终止。

这被称为[停机问题](http://en.wikipedia.org/wiki/Halting_problem)。

您可能能够防止任意 JS 代码修改变量，而不是通过在单独的进程中通过沙箱创建的变量。

无论哪种方式，接受在服务器上执行的任意代码都会给您的系统带来巨大的安全风险。仔细考虑如何避免它。

# git - 在 SVN 中不起作用的 git 的具体示例合并

> ID：14889395
> 
> 赞同：12
> 
> 时间：2013-02-15T06:29:55.227
> 
> 标签：git, svn, merge

**我正在寻找可以在 git 中工作但会导致 SVN 冲突的具体示例合并。**除此之外，您从未在 Git 中尝试过的硬/痛苦的 SVN 合并示例也可以。

关于我的问题，我可以确定主要有四类合并：

1.  [大爆炸合并](https://stackoverflow.com/questions/6172037/really-a-concrete-example-that-merging-in-git-is-easier-than-svn/6172181#6172181)
2.  重命名/移动相关的合并
3.  在两个分支中创建了目录/相同的文件
4.  [**纵横交错合并**](https://stackoverflow.com/questions/6172037/really-a-concrete-example-that-merging-in-git-is-easier-than-svn/6178091#6178091)

**我错过了这里的任何场景吗？**

寻找 1-3 的样本是微不足道的（在评论中找到 2 的样本，3 作为我答案的一部分，1 几乎是任何变基）。**有没有人有一个成功的交叉合并****的样本**（不看学术） ，这将在 SVN 中失败？

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:08:22.680

当然值得一提的是`octopus`合并策略？

一般来说，很难找到章鱼合并的具体例子，最多有 8 个分支（最少为 3 个）。

![章鱼合并示例](../Images/8897eb3c509fc315c1a682413f8ede42.png)

但是，为了更准确地回答您的问题，我认为提供一个人为的“这在 Git 但不适用于 SVN”示例不会赢得您与同事/管理层的任何战斗。

我认为很难 - 我是根据我在搬家后从 SVN 过渡到 Git 的经验说的 - 在不充分了解这两种工具的基本“基本要素”的情况下欣赏 Git 的真正力量是很困难的。我不确定 Linus 本人是否可以向不了解 Git 与 SVN 内部工​​作原理的*人（街上的典型人物）提出一个成功的“电梯推销”。*

有些人可能不同意这种观点，但我对 Git 的采用来自受人尊敬的人，他们说它是源代码控制的最佳工具。我信任他们，并且他们已被证明是正确的，因为我更多地了解了 Git 内部的工作原理以及其高效的工作流程。

我对使用 SVN 的持久记忆是每天解决合并冲突。我曾经认为这是开发软件的正常部分，但并非必须如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T09:43:33.093

找到[一篇](http://www.laliluna.de/articles/2012/06/15/when-subversion-fails.html)带有很好样本的文章。创建“team b”分支只是为了显示与在两个分支中创建相同目录的树冲突。这是一个概述：![墙样](../Images/84343e3bb76dbcfa5318961cc75e31d9.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T06:17:40.297

好吧，在现实世界中捕获并注册[的奇怪和错误合并的真实样本](https://stackoverflow.com/questions/15221544/svn-merge-tree-conflict-wierd)

1.  在分支中添加的文件
2.  通过两次合并（分支->主干->另一个分支）文件出现在另一个分支
3.  在分支目标中编辑的文件
4.  将分支合并到主干失败，因为有问题的文件出现“树冲突”

`r9 | Badger | 2013-03-06 11:42:34 +0600 (Ср, 06 мар 2013) | 1 line Changed paths: M /branches/B2/src/add.txt`

```
B2 changes in add.txt
------------------------------------------------------------------------
r8 | Badger | 2013-03-06 11:35:45 +0600 (Ср, 06 мар 2013) | 2 lines
Changed paths:
   M /branches/B2
   M /branches/B2/core.txt
   A /branches/B2/src/add.txt (from /trunk/src/add.txt:7)

Merge from trunk to B2
------------------------------------------------------------------------
r6 | Badger | 2013-03-06 11:31:36 +0600 (Ср, 06 мар 2013) | 1 line
Changed paths:
   M /trunk
   M /trunk/core.txt
   A /trunk/src/add.txt (from /branches/B1/src/add.txt:5)

Merge from B1 to trunk
------------------------------------------------------------------------
r5 | Badger | 2013-03-06 11:28:58 +0600 (Ср, 06 мар 2013) | 1 line
Changed paths:
   M /branches/B1/core.txt
   A /branches/B1/src/add.txt

B1 changes
------------------------------------------------------------------------ 
```

从 b2 到主干的合并尝试（预期结果 - 将更改合并`src/add.txt`到现有文件的主干版本中）

```
>svn merge --dry-run file:///Z:/Repo/branches/B2
--- Merging r4 through r9 into '.':
   C src\add.txt
 G   .
Summary of conflicts:
  Tree conflicts: 1 
```**

# https - java.lang.Exception：输入不是 X.509 证书：keytool 错误

> ID：14889396
> 
> 赞同：9
> 
> 时间：2013-02-15T06:30:08.340
> 
> 标签：https, tomcat6, keytool, x509

我想在 tomcat 6 中激活 https。当我导入 SSL 证书时，出现以下错误：

```
keytool error: java.lang.Exception: Input not an X.509 certificate 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-19T03:03:48.097

当我尝试将 .crt 文件导入 java 密钥库时，我遇到了类似的问题。

我可以通过以下步骤修复它：

生成 pkcs12 格式的密钥库：

在以下两个命令中输入您想要的密码：

```
openssl pkcs12 -export -name <domain_name> -in <certificate_name>.crt -inkey <certificate_name>.key -out keystore.p12 
```

将 pkcs12 密钥库转换为 java 密钥库

```
keytool -importkeystore -destkeystore tomcat.jks -srckeystore keystore.p12 -srcstoretype pkcs12 -alias <domain_name> 
```

检查您在密钥库中的证书：

```
keytool -list -v -keystore tomcat.jks 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-29T19:35:01.073

我遇到了同样的问题，实际问题是行尾字符，证书文件不应包含行尾字符。解码后的字符串应该在一行中。

```
例如。如果您的 cer 文件包含如下所示的字符
-----开始证书-----
SSFDsdfsSDfsGSDFasdfSFADsdSDFSsdf
FGHJFGHfghRTURTYUTRYyrtRTYTRYRTYR
ASDFRTYRttyrtyRtryrTRYrtyrTYRYrt
werWERWer#$%&EEFGERedfgre$%#dfg^#
-----结束证书-----

```

将其更改为

```
-----开始证书-----
```

SSFDsdfsSDfsGSDFasdfSFADsdSDFSsdfFGHJFGHfghRTURTYUTRYyrtRTYTRYRTYRASDFRTYRTrtyrtyRTryrTRYrtyrTYRYrtwerWERWer#$%&EEFGERedfgre$%#dfg^#

```
-----结束证书-----
```

没有额外的行或列。希望能帮助到你。

# java - 如何传递 ArrayList 从一项活动到另一项活动？

> ID：14889397
> 
> 赞同：0
> 
> 时间：2013-02-15T06:30:10.397
> 
> 标签：java, android, object, arraylist

我有这个`ArrayList<ToLet> toLet;`

ToLet 类是 POJO 类。

现在我怎样才能将它从一项活动传递到另一项活动？最好的方法是什么？

我已经浏览了以下链接..

[如何在Android上将对象从一个活动传递到另一个活动](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)

[如何在 Android 中将 ArrayList<Custom_Object> 从一个活动传递到另一个活动？](https://stackoverflow.com/questions/13637625/how-to-pass-arraylistcustom-object-from-one-activity-to-another-in-android)

但没有帮助我。所以如果有人知道答案，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:45:04.293

您也可以使用它来传递 ArrayList tolet；一项活动到另一项活动。

创建类的对象：-

```
ToLet obj = new ToLet();

ArrayList<ToLet> tolet;
int size = tolet.getSize();    
Intent ii = new Intent(your_current_class.this, next_class_where_you_want_to_use);
ii.putExtra("listsize",size);

 startActivity(ii); 
```

现在去你的下一堂课并使用：-

```
Intent intent = getIntent();
String mylistsize = intent.getIntExtra("listsize",default value); 
```

和 AndroidMainest.xml 文件更新此活动。

```
<activity android:name="yourcurrentclass" />
<activity android:name="yournextclass" /> 
```

它应该可以解决您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:39:18.907

当您创建意图对象时，您可以利用以下两种方法在两个活动之间传递对象。

[把Parceble](http://blog.cluepusher.dk/2009/10/28/writing-parcelable-classes-for-android/)

[putSerializable](http://developer.android.com/reference/android/os/Bundle.html#putSerializable%28java.lang.String,%20java.io.Serializable%29)

下面告诉你关于putParceble

仔细查看*[为 Android 编写 Parcelable 类](http://blog.cluepusher.dk/2009/10/28/writing-parcelable-classes-for-android/)*。在这里，他们使用 Hashmap 来存储值并将对象传递给另一个类。

## 或者

* * *

做一堂课，`ObjectA`. 在那，我使用了所有的 setter 和 getter 方法。

```
package com.ParcableExample.org;

import android.os.Parcel;
import android.os.Parcelable;

/**
 * A basic object that can be parcelled to
 * transfer between objects.
 */

public class ObjectA implements Parcelable
{
    private String strValue = null;
    private int intValue = 0;

    /**
     * Standard basic constructor for non-parcel
     * object creation.
     */

    public ObjectA()
    {
    }

    /**
     *
     * Constructor to use when re-constructing object
     * from a parcel.
     *
     * @param in a parcel from which to read this object.
     */

    public ObjectA(Parcel in)
    {
        readFromParcel(in);
    }

    /**
     * Standard getter
     *
     * @return strValue
     */
    public String getStrValue()
    {
        return this.strValue;
    }

    /**
     * Standard setter
     *
     * @param strValue
     */

    public void setStrValue(String strValue)
    {
        this.strValue = strValue;
    }

    /**
     * Standard getter
     *
     * @return intValue
     */
    public Integer getIntValue()
    {
        return this.intValue;
    }

    /**
     * Standard setter
     *
     * @param strValue
     */
    public void setIntValue(Integer intValue)
    {
        this.intValue = intValue;
    }

    @Override
    public int describeContents()
    {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags)
    {
        // We just need to write each field into the
        // parcel. When we read from parcel, they
        // will come back in the same order

        dest.writeString(this.strValue);
        dest.writeInt(this.intValue);
    }

    /**
     *
     * Called from the constructor to create this
     * object from a parcel.
     *
     * @param in parcel from which to re-create object.
     */
    public void readFromParcel(Parcel in)
    {
        // We just need to read back each
        // field in the order that it was
        // written to the parcel

        this.strValue = in.readString();
        this.intValue = in.readInt();
    }

    /**
    *
    * This field is needed for Android to be able to
    * create new objects, individually or as arrays.
    *
    * This also means that you can use use the default
    * constructor to create the object and use another
    * method to hyrdate it as necessary.
    */
    @SuppressWarnings("unchecked")
    public static final Parcelable.Creator CREATOR = new Parcelable.Creator()
    {
        @Override
        public ObjectA createFromParcel(Parcel in)
        {
            return new ObjectA(in);
        }

        @Override
        public Object[] newArray(int size)
        {
            return new ObjectA[size];
        }
    };
} 
```

然后制作一个用于将对象发送到另一个活动的活动。

```
package com.ParcableExample.org;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class ParcableExample extends Activity
{
    private Button btnClick;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        initControls();
    }

    private void initControls()
    {
        btnClick = (Button)findViewById(R.id.btnClick);
        btnClick.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View arg0)
            {
                ObjectA obj = new ObjectA();
                obj.setIntValue(1);
                obj.setStrValue("Chirag");

                Intent i = new Intent(ParcableExample.this,MyActivity.class);
                i.putExtra("com.package.ObjectA", obj);
                startActivity(i);
            }
        });
    }
} 
```

现在终于创建另一个活动来读取对象并从中获取值。

```
package com.ParcableExample.org;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class MyActivity extends Activity
{
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Bundle bundle = getIntent().getExtras();
        ObjectA obj = bundle.getParcelable("com.package.ObjectA");

        Log.i("---------- Id   ",":: "+obj.getIntValue());
        Log.i("---------- Name ",":: "+obj.getStrValue());
    }
} 
```

# android - Android 将当前活动置于最前面

> ID：14889403
> 
> 赞同：0
> 
> 时间：2013-02-15T06:30:40.993
> 
> 标签：android, android-intent, android-activity

我的应用中有一条通知，其中设置了待处理的意图。当我使用我的应用程序时，我会进行多项活动。登录 -> 主屏幕 -> 关于等。我想将我的应用程序恢复到前景，但我不知道在 Intent 构造函数中设置它的当前活动是哪个类。我想从通知中恢复它。如果打开并再次打开，则成为一种返回应用程序的方法，因为通知来自服务。

当用户将其带回时，我想带回位于顶部的活动。换句话说，我想模拟行为->返回设备的主屏幕[此时应用程序正在运行但处于后台]，如果单击应用程序图标..应用程序恢复上一个活动/将其带到我所在的前面当单击主页按钮时，也可以从通知中执行此操作

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:50:01.037

```
 NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
            Notification notification = new Notification(R.drawable.icon,"Details", System.currentTimeMillis());
            RemoteViews remoteView = new RemoteViews(getPackageName(),R.layout.custom_notification);
            remoteView.setImageViewResource(R.id.icon, R.drawable.icon);
            remoteView.setTextViewText(R.id.Mesg, "Status : "+ details);
            notification.contentView = remoteView;
            Intent notificationIntent = new Intent(context,Form.class).putExtra("layout", "99");
            PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(), 0, notificationIntent,Notification.FLAG_AUTO_CANCEL);
            notification.contentIntent = contentIntent;
            notification.flags = Notification.FLAG_AUTO_CANCEL+ Notification.FLAG_ONLY_ALERT_ONCE;
            manager.notify(45, notification); 
```

并在我创建我的应用程序时使用

```
 Intent i = getIntent();
    k = Integer.parseInt(i.getStringExtra("layout"));
    Log.i(TAG, ">>>>>>>>>>" + k);
    if (k == 99) {
        finish();
    } 
```

这将检查您的活动是否仍然存在。如果活动被杀死或关闭，它将带您进入堆栈顶部的活动。如果应用程序完全关闭，它不会做任何事情

# c++ - 程序入口点 __gxx_personality_sj0 无法位于...

> ID：14889407
> 
> 赞同：17
> 
> 时间：2013-02-15T06:30:49.343
> 
> 标签：c++, windows, cross-compiling, mingw-w64

我已经设法（以某种方式）使用 Mingw-w64 项目的 32 位 Windows 编译器交叉编译 Qt5。所有库都已安装到`~/i686-w64-mingw32`.

我有一个基于 CMake 的 Qt 项目，我正在尝试交叉编译。按照[这些说明](http://www.vtk.org/Wiki/CMake_Cross_Compiling)，我已经能够编译项目。到现在为止还挺好。

不幸的是，在 Windows 上执行生成的二进制文件时，我最终得到一个错误：

> “无法在动态链接库 [application_name].exe 中找到过程入口点 __gxx_personality_sj0”

^(* [application_name] 是主可执行文件的完整路径)

我听说这种类型的问题有时可能是由混合使用不同版本的 MinGW 编译的库引起的。但是这台机器上的所有东西（所有的库和可执行文件）都由同一个编译器（`i686-w64-mingw32`工具链）编译。

此外，我发现奇怪的是，错误抱怨应用程序可执行文件中缺少入口点，而不是`.dll`文件之一。

什么可能导致此错误以及可以采取哪些措施来纠正它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-12T22:44:57.793

**查找错误库的位置：**

*   打开命令提示符。
*   输入“libstdc++-6.dll”并点击“Enter”
*   应该会出现一个带有路径和消息的消息框：***c:/somefolder/someapp/.../libstdc++-6.dll*** *这个文件没有与之关联的程序...等等等等* **。路径就是答案.**
*   从 IDE 中运行您的应用程序：IDE 中的 %PATH% 可能与命令提示符中的 %PATH% 不同（请参阅 IDE 设置）。在这种情况下，将“libstdc++-6.dll”放入批处理文件并从 IDE 中运行批处理应该会显示您的程序正在拾取的库的哪个特定实例。

**我的个人解决方案：**

*   打开“系统属性”->“环境变量”（在 Windows 7 中，在我的情况下）并确保两个 %PATH% 变量（用于您的帐户和系统范围变量 %PATH% 的变量）都以 c:\mingw 开头\bin （或您为该库提供的任何路径）。此外，您可能必须重新启动 IDE 才能选择新的 PATH。

* * *

*根据我的经验，MS Windows 在 %PATH% 中选择位置的方式可能非常不稳定。上次，我添加了一个具有单个函数的源文件，并将该函数包含在我的代码中。即使我删除了所有函数的代码并且只留下了“return”语句，该程序总是会选择错误的 libstdc++-6.dll。每次该函数被注释掉（排除）时，程序都会再次正常运行。我怀疑有时 Windows 会出于某种原因从“系统变量”中选择 PATH 并避免使用“用户变量”PATH（您的 Windows 帐户的 PATH）。*

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-15T08:18:50.483

`libstdc++-6.dll`最后发现问题出在某处的任性导致的`$PATH`。在确保由 Mingw-w64 构建的副本在应用程序的目录中之后，一切正常。

# php - 将php日期传递给javascript

> ID：14889409
> 
> 赞同：0
> 
> 时间：2013-02-15T06:30:50.833
> 
> 标签：php, javascript, html

我正在制作一个代码，当我选择开始日期时，结束日期将自动出现。结束日期是开始日期的 +3 天

```
<input type="date" name="start_date" id="start" onKeyUp="date()">
<input type="text" name="end_date" id = "end" onKeyUp="date()" disabled />

<script type = "text/javascript">
function date() {
var startdate = document.getElementById('start');
var enddate = document.getElementById('end');

enddate.value = startdate + 3 days; 
}
</script> 
```

这个 enddate.value = startdate + 3 天；我知道代码是错误的。我不知道如何将日期传递给 javascript。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:38:49.493

```
<input type="text" name="num_days" id = "days"  />
<input type="date" name="start_date" id="start" onChange="date()">
<input type="text" name="end_date" id = "end" onKeyUp="date()"  />

    <script type = "text/javascript">
    function date() {
         var numdays = document.getElementById('days');
    var startdate = document.getElementById('start');
    var enddate = document.getElementById('end');
    //conver you selected stuff to a proper date format
    var old = new Date(Date.parse(startdate.value));
    //take a new date
    var newdate = new Date();
        days = parseInt(numdays.value);
    // add how many days you want to add i use 3 you can use as many
    newdate.setDate(old.getDate()+days);
    enddate.value = newdate.getFullYear()+'-'+(newdate.getMonth()+1)+'-'+newdate.getDate(); 
    }
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:38:58.190

只需通过开始日期`date()`

```
var today = new Date(document.getElementById('start'));
var dd = today.getDate();
var mm = today.getMonth()+1;//January is 0!
var yyyy = today.getFullYear();
if(dd<10){
    dd='0'+dd
}
if(mm<10){
    mm='0'+mm
}
var startdate=yyyy+'-'+mm+'-'+dd ;
var enddate=yyyy+'-'+mm+'-'+(parseInt(dd)+3) ; 
```

这将为您提供 2 个日期：

1.  开始日期

2.  开始日期 + 3 天，即结束日期

我希望它会帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:41:01.043

在这里试试[DEMO](http://jsfiddle.net/mybidfix/ZuugH/2/)

```
function mydate() {
     var targetDate = new Date();
     targetDate.setDate(targetDate.getDate() + 3); //how many days ahead

     var dd = targetDate.getDate();
     var mm = targetDate.getMonth() + 1; // 0 is January, so we must add 1
     var yyyy = targetDate.getFullYear();
     var dateString = yyyy + "-" + mm + "-" + dd;
     return dateString; 
} 
```

# vb.net - 如何将表单重置为原始状态？

> ID：14889411
> 
> 赞同：1
> 
> 时间：2013-02-15T06:30:58.150
> 
> 标签：vb.net, winforms

我正在开发一个 vb.net windows 应用程序。在这个我有一个窗口窗体，它有几个文本框和几个控件。现在，在加载表单后，我在该表单中创建并删除了一些控件。我在表单上还有一个重置按钮，因此用户可以单击它并获得表单的原始设计。我试图调用 InitializeComponents() 方法。但它不反映表格上的任何变化。如何在按钮点击时获得我的原始设计？

好的，我需要修改我的问题。我不想重新设计我的所有控件，而只想重新设计我修改过的树视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:41:59.653

Windows 窗体的“原始”状态/设置不会在任何地方跟踪。您在运行时所做的修改（添加、调整大小、删除等控件）都是实时发生的，并成为表单的当前*唯一*状态。

您可以自己跟踪原始设置，然后编写代码来循环所有控件并恢复它们，但这将是很多工作。

更简单的解决方案是销毁当前表单并用新创建的表单替换它。当然，当创建一个新表单时，它会具有*默认*状态，这正是您想要的。

* * *

**编辑：**调用`InitializeComponents()`不是一个完美的解决方案。不叫它是有原因的`ReinitializeComponents()`。它旨在在首次创建和显示表单时进行*初始初始化。*它的设计目的不是为了在其他地方被客户端代码再次调用。无论如何，如果你这样做，它会破坏事情。

如果树节点是您唯一担心保留的东西，为什么不声明一个类级成员来保存您删除的那些？您可以在它们被删除后使用 a[`Queue`](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)或[`Stack`](http://msdn.microsoft.com/en-us/library/3278tedw.aspx)集合之类的东西来保存它们，并在要将它们恢复到 TreeView 时将它们弹出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:54:31.197

```
Public Sub resetform(ByVal form_name as Form)  
    form_name.dispose  
    form_name.show
End Sub 
```

在您的按钮单击事件上调用 resetform

```
resetform(YourFormName) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:43:16.960

我刚刚工作，现在完成了。我将一个变量作为树节点并分配了原始树视图的克隆。最后只需将该变量添加到我的树视图中。

# c# - adb shell，我怎样才能从这里得到请求？

> ID：14889412
> 
> 赞同：1
> 
> 时间：2013-02-15T06:30:57.540
> 
> 标签：c#, .net

`su`我正在尝试制作仅检查手机是否已root的程序。为此，我必须通过cmd发送adb shell ，但问题是我的文本框没有得到任何输出来检查结果。这是我的代码：

```
public string root_checker
    {
        get
        {
            psi.Arguments = "shell su";
            Process call = Process.Start(psi);
            StreamReader sr = call.StandardOutput;
            string output = sr.ReadToEnd();
            return output;
        }

    } 
```

这个按钮：

```
private void button2_Click_1(object sender, EventArgs e)
        {
            string shell = adb.root_checker;
            textBox1.Text = shell;
        } 
```

我的程序没有响应，什么也没发生，我在网上搜索了很多，但没有任何用处。

谢谢你

# rest - 如何通过将 blob 拆分为块并使用 REST 和 PHP 调用 PutBlockList 来将 blob 上传到 Windows azure

> ID：14889413
> 
> 赞同：1
> 
> 时间：2013-02-15T06:31:19.367
> 
> 标签：rest, azure, azure-storage

请有人可以发布一些代码或提供有关我们如何通过将 blob 拆分为块并使用 REST 和 PHP 调用 PutBlockList 将其上传到 Azure 存储的参考。我在这里使用 .NET 代码引用了相同的代码[http://wely-lau.net/2012/02/26/uploading-big-files-in-windows-azure-blob-storage-with-putlistblock/](http://wely-lau.net/2012/02/26/uploading-big-files-in-windows-azure-blob-storage-with-putlistblock/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:39:38.283

看看 Windows Azure SDK for PHP：[https](https://github.com/WindowsAzure/azure-sdk-for-php) ://github.com/WindowsAzure/azure-sdk-for-php尤其是这个：[https ://github.com/WindowsAzure/azure-sdk-for-php/blob/主/WindowsAzure/Blob/BlobRestProxy.php](https://github.com/WindowsAzure/azure-sdk-for-php/blob/master/WindowsAzure/Blob/BlobRestProxy.php)。您可以按原样使用 SDK，也可以查看代码以了解如何实现 Blob 上传。

# java - 意外的碧玉异常

> ID：14889414
> 
> 赞同：0
> 
> 时间：2013-02-15T06:31:21.633
> 
> 标签：java, jsp, jasper-reports, jspinclude

我正在使用 Tomcat6.0、面向 Web 开发人员的 Eclipse SDE 7.0 Express 和 jdk1.6

在我的 jsp 页面中，我的代码如下所示

```
<%
List<String> options = new ArrayList<String>();
DynamicCombo comboBox = new DynamicCombo();
options = comboBox.generateComboBox();
Collections.sort(options);
int tempVar = 0;
while (tempVar < options.size()) {
out.print("<option value=\"");
out.print(options.get(tempVar));
out.print("\">");
out.print(options.get(tempVar));
out.print("</option>");
tempVar++;
}
%> 
```

DynamicCombo 是包 com.ems.billGen.util 中的一个类，我将这个包适当地导入到 jsp 中：-

```
<%@page import="com.ems.billGen.util.*" %> 
```

此类 DynamicCombo 有一个名为 generateComboBox() 的方法，它只是创建一个字符串列表并返回此字符串。

当我将鼠标悬停在上述 jsp 中的 DynamicCombo 类上时，我意识到它已被很好地识别，因为我获得了该类的正确文档。请看下面的屏幕截图：- ![将鼠标悬停在 jsp 文件中的类名上](../Images/657b153275f0c5ca45b71b2ff3ff82d0.png)

现在，当我部署上述页面并在 Firefox 中查看它时，我得到以下 jasper 异常：-

在 jsp 文件中的第 36 行发生错误：/implementation.jsp

```
DynamicCombo cannot be resolved to a type
33:     <td><select name="product_list">
34:         <%
35:             List<String> options = new ArrayList<String>();
36:             DynamicCombo co = new DynamicCombo();
37:             options = co.generateComboBox();
38:             Collections.sort(options);
39:             int tempVar = 0; 
```

我无法理解原因，以及如何解决这个问题。任何输入表示赞赏。

相应的类文件也在war文件的web-inf文件夹中为DynamicCombo生成：- ![类文件实际上存在于生成的war文件中](../Images/20f2467e6b4a0062f2cf2471779ada7a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:38:29.930

错误消息说明了一切，屏幕截图确认：正确的路径中不存在此类。

问题很微妙：你 import `com.ems.billGen.util.DynamicCombo`，类的路径是`com/ems/billgen/util/DynamicCombo.class`（注意包名中的大写 G 和路径名中缺少它）。

可能是某些工具的错误。该错误是由命名不遵循 Java 约定（[在包名中永远不会使用大写字母](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)）这一事实触发的。

# segmentation-fault - wkhtmltoimage 分段错误（核心转储）。错误带有一些特定的网址

> ID：14889415
> 
> 赞同：1
> 
> 时间：2013-02-15T06:31:32.807
> 
> 标签：segmentation-fault, wkhtmltoimage

s [http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltoimage-0.11.0_rc1-static-amd64.tar.bz2](http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltoimage-0.11.0_rc1-static-amd64.tar.bz2)

[http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltoimage-0.11.0_rc1-static-i386.tar.bz2](http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltoimage-0.11.0_rc1-static-i386.tar.bz2)

我已经尝试了以上两个 wkhtml2image 版本，我得到了相同的结果：

“wkhtmltoimage-i386 --disable-javascript --disable-plugins [http://apple.com](http://apple.com) test.jpg”

正在加载页面 (1/2) 渲染 (2/2)
QPixmap: 不使用 GUI 时无法创建 QPixmap] 25% 分段错误（核心转储）

奇怪的是，该插件在某些网站 url 上运行良好，例如 google.com、wordpress.com，但在某些 url 上却没有，例如：apple.com、paypal.com、linkedin.com、....

[我尝试像一些人在http://code.google.com/p/wkhtmltopdf/issues/detail?id=786](http://code.google.com/p/wkhtmltopdf/issues/detail?id=786)上所说的那样添加一些标志来禁用 javascript，但它没有任何效果。

我的服务器信息：CentOS 6.3。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:35:15.183

我安装了虚拟 X11 服务器来解决这个问题。我找到的教程在 [http://tech.gluga.com/2012/09/screenshot-webpage-via-command-line.html下面](http://tech.gluga.com/2012/09/screenshot-webpage-via-command-line.html)

# jsp - 在 Struts 1.3 中将数据从 Action 传递到 view(jsp) 的最佳实践是什么？

> ID：14889417
> 
> 赞同：5
> 
> 时间：2013-02-15T06:31:36.260
> 
> 标签：jsp, jakarta-ee, web-applications, struts, struts-1

我正在用**struts 1.3**编写 web 应用程序。我想将员工的 ArrayList 传递给 JSP 页面。

我看到以下两种方法：

**1.** 将员工列表作为字段放入 ActionForm。

```
List<Employee>  employees; 
```

设置此字段的操作类：

```
empForm.setEmployees(employeeList); 
```

并且 JSP 使用这些数据作为：

```
${empForm.employees} 
```

**2.** 将员工名单直接放入请求中。

操作类将employeeList 设置为请求。

```
request.setAttribute("employees", employeeList); 
```

在 JSP 中：

```
${employees} 
```

请建议我应该采用哪种方法。**在Struts 1.3**中哪一个被认为是一个好的实践。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:08:10.847

两者都是正确的。如果页面需要表单，您可以将列表放在 ActionForm 中。我个人更喜欢在 ActionForm 中设置，因为它更有条理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:20:53.630

如果您需要编辑数据，最好将其付诸行动，否则没有太大区别。**

# c# - 面临从数据创建的 XML 结构的问题

> ID：14889419
> 
> 赞同：3
> 
> 时间：2013-02-15T06:31:44.170
> 
> 标签：c#, xml, xml-serialization

我想通过数据创建 XML，并且我从数据库中接收到数据`DataSet`or `IList<Booking>`。现在我正在使用`DataSet`此代码创建 XML。

```
string result = String.Empty;

using (StringWriter sw = new StringWriter())
 {
   ds.WriteXml(sw);
   result = sw.ToString();
 } 
```

我的 XML 就是这种形式。

```
<Booking> 
    <ID>32</ID> 
    <BookingNumber>12120001</BLNumber> 
    <ReferenceNo>ABCED11212280007</ReferenceNo> 
    <Name>Customer Name1</Name> 
    <Address>Customer Address</Address>
</Booking>

<Booking> 
    <ID>33</ID> 
    <BookingNumber>12120002</BLNumber> 
    <ReferenceNo>ABCED11212280008</ReferenceNo> 
    <Name>Customer Name2</Name> 
    <Address>Customer Address2</Address>
</Booking>

<BookingDetail> 
   <ID>206</ID> 
   <BookingID>32</BookingID> 
   <OrderItem>Item1</OrderItem> 
</BookingDetail>

<BookingDetail> 
   <ID>207</ID> 
   <BookingID>32</BookingID> 
   <OrderItem>Item2</OrderItem> 
</BookingDetail>

<BookingDetail> 
   <ID>208</ID> 
   <BookingID>33</BookingID> 
   <OrderItem>Item1</OrderItem> 
</BookingDetail>

<BookingDetail> 
   <ID>209</ID> 
   <BookingID>33</BookingID> 
   <OrderItem>Item2</OrderItem> 
</BookingDetail>

<BookingDetail> 
   <ID>210</ID> 
   <BookingID>33</BookingID> 
   <OrderItem>Item3</OrderItem> 
</BookingDetail> 
```

但我想要这种形式的 XML。

```
<CompleteBooking>
 <Booking> 
    <ID>32</ID> 
    <BookingNumber>12120001</BLNumber> 
    <ReferenceNo>ABCED11212280007</ReferenceNo> 
    <Name>Customer Name1</Name> 
    <Address>Customer Address</Address>
 </Booking>

 <BookingDetail> 
   <ID>206</ID> 
   <BookingID>32</BookingID> 
   <OrderItem>Item1</OrderItem> 
 </BookingDetail>

 <BookingDetail> 
   <ID>207</ID> 
   <BookingID>32</BookingID> 
   <OrderItem>Item2</OrderItem> 
 </BookingDetail>

</CompleteBooking>

<CompleteBooking>
 <Booking> 
    <ID>33</ID> 
    <BookingNumber>12120002</BLNumber> 
    <ReferenceNo>ABCED11212280008</ReferenceNo> 
    <Name>Customer Name2</Name> 
    <Address>Customer Address2</Address>
 </Booking>

 <BookingDetail> 
   <ID>208</ID> 
   <BookingID>33</BookingID> 
   <OrderItem>Item1</OrderItem> 
 </BookingDetail>

 <BookingDetail> 
   <ID>209</ID> 
   <BookingID>33</BookingID> 
   <OrderItem>Item2</OrderItem> 
 </BookingDetail>

 <BookingDetail> 
   <ID>210</ID> 
   <BookingID>33</BookingID> 
   <OrderItem>Item3</OrderItem> 
 </BookingDetail>

</CompleteBooking> 
```

谁能帮我创建这种类型的 XML？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:28:33.253

使用 System.Xml.Serialization，创建您的预订对象：

```
public class XMLEntities
{   
  [XmlRoot(ElementName = "CompleteBooking")]
  public class CompleteBooking
  {
    [XmlElement(ElementName = "Booking")]
    public Booking Bookings { get; set; }

    [XmlElement(ElementName = "BookingDetail")]
    public List<BookingDetail> BookingDetail { get; set; }
  }

  public class Booking
  {
    [XmlElement("ID")]
    public int ID { get; set; }

    [XmlElement("BookingNumber")]
    public int BookingNumber { get; set; }

    [XmlElement("ReferenceNumber")]
    public string ReferenceNumber { get; set; }

    [XmlElement("Name")]
    public string Name { get; set; }

    [XmlElement("Address")]
    public string Address { get; set; }
  }

  public class BookingDetail
  {
    [XmlElement("ID")]
    public int ID { get; set; }

    [XmlElement("BookingID")]
    public int BookingID { get; set; }

    [XmlElement("OrderItem")]
    public string OrderItem { get; set; }
  }
} 
```

现在，对于序列化器对象（用于实际将对象序列化为字符串）：

```
 public class XMLEntitiesSerializer
 {
   public string Serialize(XMLEntities.CompleteBooking completeBooking)
   {
     var serializedXml = string.Empty;

     var serializer = new XmlSerializer(typeof (XMLEntities.CompleteBooking));
     var stringWriter = new System.IO.StringWriter();

     try
     {
       serializer.Serialize(stringWriter, completeBooking);
       serializedXml = stringWriter.ToString();
     }
     catch(Exception ex)
     {
       //Log the stuff
     }
     finally
     {
       stringWriter.Close();
     }

     return serializedXml;
   }
 } 
```

现在，您只需创建正确定义的对象并在某种函数中序列化。例如，在控制台应用程序的 main 方法中：

```
public static void Main(string[] args)
{
  //Create new booking objects
  var booking1 = new XMLEntities.Booking()
                  {
                    ID = 32,
                    BookingNumber = 1212001,
                    ReferenceNumber = "ABCED11212280007",
                    Name = "Customer Name1",
                    Address = "Customer Address"
                  };
  var booking2 = new XMLEntities.Booking()
                   {
                     ID = 33,
                     BookingNumber = 12120002,
                     ReferenceNumber = "ABCED11212280008",
                     Name = "Customer Name2",
                     Address = "Customer Address2"
                   };

  //Create the booking details objects

  var booking1Detail1 = new XMLEntities.BookingDetail()
                         {
                           ID = 206,
                           BookingID = 32,
                           OrderItem = "Item1"
                         };
  var booking1Detail2 = new XMLEntities.BookingDetail()
                          {
                            ID = 207,
                            BookingID = 32,
                            OrderItem = "Item2"
                          };

  var booking2Detail1 = new XMLEntities.BookingDetail()
                          {
                            ID = 208,
                            BookingID = 33,
                            OrderItem = "Item1"
                          };
  var booking2Detail2 = new XMLEntities.BookingDetail()
                          {
                            ID = 209,
                            BookingID = 32,
                            OrderItem = "Item2"
                          };
  var booking2Detail3 = new XMLEntities.BookingDetail()
                          {
                            ID = 210,
                            BookingID = 32,
                            OrderItem = "Item3"
                          };

  //Smash them together so we can serialize as one

  var completeBooking1 = new XMLEntities.CompleteBooking()
                          {
                            Bookings = booking1,
                            BookingDetail = new List<XMLEntities.BookingDetail>()
                                              {
                                                booking1Detail1,
                                                booking1Detail2
                                              }
                          };
  var completeBooking2 = new XMLEntities.CompleteBooking()
                           {
                             Bookings = booking2,
                             BookingDetail = new List<XMLEntities.BookingDetail>()
                                               {
                                                 booking2Detail1,
                                                 booking2Detail2,
                                                 booking2Detail3
                                               }
                           };

  //Serialize the data for each of the booking objects

  var serializedXML = new XMLEntitiesSerializer();
  var xml = string.Empty;

  var booking1XmlString = serializedXML.Serialize(completeBooking1);
  var booking2XmlString = serializedXML.Serialize(completeBooking2);

  Console.ReadLine();
} 
```

显然，您可以在重构函数中使用它（这将使生活更轻松），但这会为您提供您正在寻找的一般输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T08:06:04.803

这是一种可能的方法：

```
 DataTable Booking = new DataTable();
        Booking.Columns.AddRange(new DataColumn[]{ new DataColumn("ID"), new DataColumn("BookingNumber"), new DataColumn("ReferenceNo"), new DataColumn("Name"), new DataColumn("Address") });

        DataTable BookingDetail = new DataTable();
        BookingDetail.Columns.AddRange(new DataColumn[] { new DataColumn("ID"), new DataColumn("BookingID"), new DataColumn("OrderItem") });

        Booking.Rows.Add(32, 12120001, "ABCED11212280007", "Customer Name1", "Customer Address");
        BookingDetail.Rows.Add(206, 32, "Item1");
        BookingDetail.Rows.Add(207, 32, "Item2");

        Booking.Rows.Add(33, 12120002, "ABCED11212280008", "Customer Name2", "Customer Address2");
        BookingDetail.Rows.Add(208, 33, "Item1");
        BookingDetail.Rows.Add(209, 33, "Item2");
        BookingDetail.Rows.Add(210, 33, "Item3");

        XElement root = new XElement("Root");

        // For each row from Booking add one CompleteBooking element
        foreach(DataRow BookingRow in Booking.Rows.Cast<DataRow>())
        {
            XElement xeCompleteBooking = new XElement("CompleteBooking");

            XElement xeBooking = new XElement("Booking");
            int BookingID = Convert.ToInt32(BookingRow["ID"]);

            IEnumerable<string> columnNames_Booking = Booking.Columns.Cast<DataColumn>().Select(col => col.ColumnName);
            // Add element under Booking element for every column of table
            foreach (string colName in columnNames_Booking)
                xeBooking.Add(new XElement(colName, BookingRow[colName]));

            xeCompleteBooking.Add(xeBooking);

            IEnumerable<string> columnNames_BookingDetail = BookingDetail.Columns.Cast<DataColumn>().Select(col => col.ColumnName);

            // For Booking.ID find all BookingDetail rows according to BookingDetail.BookingID
            IEnumerable<DataRow> details = BookingDetail.Rows.Cast<DataRow>().Where(BookingDetailRow => Convert.ToInt32(BookingDetailRow["BookingID"]) == BookingID);
            foreach (DataRow BookingDetailRow in details)
            {
                XElement xeBookingDetail = new XElement("BookingDetail");

                // Add element under BookingDetail element for every column of table
                foreach (string colName in columnNames_BookingDetail)
                    xeBookingDetail.Add(new XElement(colName, BookingDetailRow[colName]));

                xeCompleteBooking.Add(xeBookingDetail);
            }

            root.Add(xeCompleteBooking);
        }

        string xml = root.ToString(); 
```

它使用 LINQ to XML。它读取列名以创建适当命名的 XML 元素，因此如果您从表中添加或删除某些列，这不应该分解，唯一应该具有固定列名的列是`ID`( `Booking`) 和`BookingID`( `BookingDetail`)，因为它们用于链接两张桌子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T06:52:33.600

你不能在你的数据对象上使用 XmlSerializer 类吗？还是我误解了这个问题？

在没有看到一些对象结构的情况下，我无能为力，只能提供一些“如果我在你的鞋子里……”

您想要的是“非标准”XML，因为当一个是列表（BookingDetail）时，您在同一标签下有两种类型的对象“Booking”和“BookingDetail”。

如果必须采用这种形式，我会采用手动序列化的方式：

```
public String Serialize(CompleteBooking [] cbs) {
    String FinalXML = "<CompleteBookings>";
    foreach(CompleteBooking cb in cbs) {
        FinalXML += cb.ToXML();
    }
    FinalXML += "</CompleteBookings>";
} 
```

和数据对象：

```
public class CompleteBooking {
    public Booking Booking;
    public BookingDetail [] BookingDetails

    public String ToXML() {
        String RVal = "<CompleteBooking>" + this.Booking.ToXML();
        foreach(BookingDetail bd in BookingDetails) {
            RVal += bd.ToXML();
        }
        RVal += "</CompleteBooking>"

    }
}

public class Booking {
    // Fields Here
    public String ToXML() {
        return "<Booking>" + [Fields] + "</Booking>";
    }
}

public class BookingDetail {
    // Fields Here
    public String ToXML() {
        return "<BookingDetail>" + [Fields] + "</BookingDetail>";
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-23T20:53:21.953

假设我们有以下数据类：

```
class Booking
{
    public int ID { get; set;}
    public int BookingNumber { get; set;}
    public string ReferenceNo { get; set;}
    public string Name { get; set;}
    public string Address { get; set;}
}

class BookingDetails
{
    public int ID { get; set;}
    public int BookingId { get; set;}
    public string OrderItem { get; set;}
} 
```

以及以下测试数据：

```
 static private IList<Booking> _bookings = new List<Booking>() {
        new Booking() { ID = 32, BookingNumber = 12120001, ReferenceNo = "ABCED11212280007", Name = "Customer Name1", Address = "Customer Address" },
        new Booking() { ID = 33, BookingNumber = 12120002, ReferenceNo = "ABCED11212280008", Name = "Customer Name2", Address = "Customer Address2" }
    };

    static private IList<BookingDetails> _details = new List<BookingDetails>() {
        new BookingDetails() { ID = 206, BookingId = 32, OrderItem = "Item1" },
        new BookingDetails() { ID = 207, BookingId = 32, OrderItem = "Item2" },
        new BookingDetails() { ID = 208, BookingId = 33, OrderItem = "Item1" },
        new BookingDetails() { ID = 209, BookingId = 33, OrderItem = "Item2" },
        new BookingDetails() { ID = 210, BookingId = 33, OrderItem = "Item3" }
    }; 
```

我们可以使用以下 Linq to XML 查询轻松获得给定格式的输出 XML：

```
var bookings = _bookings.Join(_details, b => b.ID, d => d.BookingId, (b, d) => new { b, d })
                        .GroupBy(g => g.b, g => g.d)
                        .Select(g => new XElement("CompleteBooking",
                                        new XElement("Booking", 
                                            new XElement("ID", g.Key.ID),
                                            new XElement("BookingNumber", g.Key.BookingNumber),
                                            new XElement("ReferenceNo", g.Key.ReferenceNo),
                                            new XElement("Name", g.Key.Name),
                                            new XElement("Address", g.Key.Address)),
                                        g.Select(d => new XElement("BookingDetail",
                                                            new XElement("ID", d.ID),
                                                            new XElement("BookingID", d.BookingId),
                                                            new XElement("OrderItem", d.OrderItem))).ToArray())).ToArray(); 
```

它会给我们一个 XElement 对象数组。获取xml字符串使用`String.Join<XElement>`方法：

```
var xmlString = String.Join<XElement>(Environment.NewLine, bookings); 
```

**但是**，我会建议一些不同的 XML 模式：

```
<Bookings>
  <Booking>
    <ID>32</ID>
    <BookingNumber>12120001</BookingNumber>
    <ReferenceNo>ABCED11212280007</ReferenceNo>
    <Name>Customer Name1</Name>
    <Address>Customer Address</Address>
    <Details>
      <Detail>
        <ID>206</ID>
        <OrderItem>Item1</OrderItem>
      </Detail>
      <Detail>
        <ID>207</ID>
        <OrderItem>Item2</OrderItem>
      </Detail>
    </Details>
  </Booking>
  <Booking>
    <ID>33</ID>
    <BookingNumber>12120002</BookingNumber>
    <ReferenceNo>ABCED11212280008</ReferenceNo>
    <Name>Customer Name2</Name>
    <Address>Customer Address2</Address>
    <Details>
      <Detail>
        <ID>208</ID>
        <OrderItem>Item1</OrderItem>
      </Detail>
      <Detail>
        <ID>209</ID>
        <OrderItem>Item2</OrderItem>
      </Detail>
      <Detail>
        <ID>210</ID>
        <OrderItem>Item3</OrderItem>
      </Detail>
    </Details>
  </Booking>
</Bookings> 
```

这种格式的数据没有冗余。要获得它，请使用以下查询：

```
var bookings = _bookings.Join(_details, b => b.ID, d => d.BookingId, (b, d) => new { b, d })
                        .GroupBy(g => g.b, g => g.d)
                        .Select(g => new XElement("Booking", 
                                        new XElement("ID", g.Key.ID),
                                        new XElement("BookingNumber", g.Key.BookingNumber),
                                        new XElement("ReferenceNo", g.Key.ReferenceNo),
                                        new XElement("Name", g.Key.Name),
                                        new XElement("Address", g.Key.Address),
                                        new XElement("Details",
                                            g.Select(d => new XElement("Detail",
                                                              new XElement("ID", d.ID),
                                                              new XElement("OrderItem", d.OrderItem))).ToArray()))).ToArray();

var data = new XDocument(new XElement("Bookings", bookings)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T11:23:47.460

很抱歉，我对您的问题@Umair Noor 的评论迟到了。

由于您使用`DataSet`的是 .NET，因此这是我所知道的从其中获取所需 XML 的最简单方法 - 以及相关的在线参考：

1.  创建一个表示您希望看到的 XML 输出的 XML 文档。 *您已经*在您的问题中完成了此操作，*但*您需要 1）用标签替换`<\BLNumber>`结束标签`<\BookingNumber>`和 2）解决 @ByteBlast 关于样本中多个根元素的观点。

    通过对您想要的 XML 示例进行最低限度的调整，我很快就得出了以下结论：

    ```
    <Bookings> <!-- fix for multiple root elements -->
      <CompleteBooking>
        <Booking>
          <ID>32</ID>
          <BookingNumber>12120001</BookingNumber> <!-- fixed BLNumber closing tag -->
          <ReferenceNo>ABCED11212280007</ReferenceNo>
          <Name>Customer Name1</Name>
          <Address>Customer Address</Address>
        </Booking>

        <BookingDetail>
          <ID>206</ID>
          <BookingID>32</BookingID>
          <OrderItem>Item1</OrderItem>
        </BookingDetail>

        <BookingDetail>
          <ID>207</ID>
          <BookingID>32</BookingID>
          <OrderItem>Item2</OrderItem>
        </BookingDetail>

      </CompleteBooking>

      <CompleteBooking>
        <Booking>
          <ID>33</ID>
          <BookingNumber>12120002</BookingNumber> <!-- fixed BLNumber closing tag -->
          <ReferenceNo>ABCED11212280008</ReferenceNo>
          <Name>Customer Name2</Name>
          <Address>Customer Address2</Address>
        </Booking>

        <BookingDetail>
          <ID>208</ID>
          <BookingID>33</BookingID>
          <OrderItem>Item1</OrderItem>
        </BookingDetail>

        <BookingDetail>
          <ID>209</ID>
          <BookingID>33</BookingID>
          <OrderItem>Item2</OrderItem>
        </BookingDetail>

        <BookingDetail>
          <ID>210</ID>
          <BookingID>33</BookingID>
          <OrderItem>Item3</OrderItem>
        </BookingDetail>

      </CompleteBooking>
    </Bookings> <!-- fix for multiple root elements --> 
    ```

2.  使用[`xsd.exe`命令行工具](http://msdn.microsoft.com/en-us/library/vstudio/x6c1kb0s%28v=vs.100%29.aspx)从代表性 XML 文件生成 XML 架构定义 (XSD) 文件。

    或者，编写几行代码来读取 XML 文件，用于[`XmlReadMode.InferSchema`](http://msdn.microsoft.com/en-us/library/system.data.xmlreadmode.aspx)为其生成模式；并将生成的架构写入 XSD 文件。例如，这是我在 WPF 暂存应用程序中快速放入按钮事件处理程序的内容：

    ```
    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        // BEGIN: the bottom-line logic
        var ds = new DataSet();

        var sr = new StreamReader("Bookings.xml"); // file into which I put your sample, desired XML
        ds.ReadXml(sr, XmlReadMode.InferSchema); // XmlReadMode.InferSchema - key
        sr.Close();

        ds.WriteXmlSchema("Bookings.xsd"); // file into which I got the resulting schema
        // END: the bottom-line logic
    } 
    ```

    这两种方法都足够快。

3.  使用 XSD 文件...

    ```
    <?xml version="1.0" standalone="yes"?>
    <xs:schema id="Bookings" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
      <xs:element name="Bookings" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
        <xs:complexType>
          <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element name="CompleteBooking">
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="Booking" minOccurs="0" maxOccurs="unbounded">
                    <xs:complexType>
                      <xs:sequence>
                        <xs:element name="ID" type="xs:string" minOccurs="0" />
                        <xs:element name="BookingNumber" type="xs:string" minOccurs="0" />
                        <xs:element name="ReferenceNo" type="xs:string" minOccurs="0" />
                        <xs:element name="Name" type="xs:string" minOccurs="0" />
                        <xs:element name="Address" type="xs:string" minOccurs="0" />
                      </xs:sequence>
                    </xs:complexType>
                  </xs:element>
                  <xs:element name="BookingDetail" minOccurs="0" maxOccurs="unbounded">
                    <xs:complexType>
                      <xs:sequence>
                        <xs:element name="ID" type="xs:string" minOccurs="0" />
                        <xs:element name="BookingID" type="xs:string" minOccurs="0" />
                        <xs:element name="OrderItem" type="xs:string" minOccurs="0" />
                      </xs:sequence>
                    </xs:complexType>
                  </xs:element>
                </xs:sequence>
              </xs:complexType>
            </xs:element>
          </xs:choice>
        </xs:complexType>
      </xs:element>
    </xs:schema> 
    ```

    ...定义类型化的`DataSet`（例如`Bookings`or ） - 而不是您可能使用`BookingsDataSet`的通用目的。`DataSet`

    您可以将`xsd.exe`'`/d[ataset]`选项与步骤 3 中的 XSD 文件一起使用，或者您可以`DataSet`在 Visual Studio 中将新项目添加到您的项目，然后将步骤 3 派生的架构粘贴到其`.xsd`文件中。

    相同 - 无论哪种方式都足够快。

4.  根据需要重复，直到获得所需的确切结果。

作为权威参考，MSDN[很好地概述了 ADO.NET](http://msdn.microsoft.com/en-us/library/ms810298.aspx)中的 XML，它解释了我所描述的大部分内容。

* * *

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-15T06:45:38.850

您可以使用 LINQ to XML 创建自定义结构。使用嵌套的 XElement 构造函数。例如，请参阅[如何创建这种结构的 XML](https://stackoverflow.com/questions/13725426/how-to-create-an-xml-of-this-structure)并[使用 c# 动态构建 XML](https://stackoverflow.com/questions/4199489/build-xml-dynamically-using-c-sharp?rq=1)

# android - 单击编辑文本时，会出现一个自定义列表对话框，列表项应根据编辑文本中的文本更改而更改，适用于 android

> ID：14889421
> 
> 赞同：0
> 
> 时间：2013-02-15T06:32:13.007
> 
> 标签：android, database, sqlite, android-listview, customdialog

我正在为冰淇淋三明治开发一个 android 应用程序我想在编辑文本单击时填充一个包含数据库列表项（只有一列）的对话框，但列表应该根据编辑文本中的文本变化进行过滤。那可能吗 ？？到目前为止，我能够填充包含所有列表项的对话框，但我不知道根据编辑文本过滤此列表，这就像搜索栏一样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T06:05:47.780

您正在寻找的东西可以使用 android 中的 AutoCompleteTextView 来完成。每次您在文本字段中输入字母时，它都会填充一个对话框。预测来自包含项目列表的 ArrayList。正如您所说，您可以从数据库中获取项目列表并将项目放入显示预测的 arrayList 中。

这是根据您的需要的一个示例。

[http://www.javatpoint.com/android-autocompletetextview-example](http://www.javatpoint.com/android-autocompletetextview-example)

将 Sqlitedatabse 代码与上述链接中给出的示例集成以满足您的需求。

# c++ - 读取二进制文件 C++

> ID：14889423
> 
> 赞同：0
> 
> 时间：2013-02-15T06:32:17.873
> 
> 标签：c++, fread

请帮我。我无法读取二进制文件。该文件的长度是198944，但我的代码读取374。我尝试使用fread、ifstream、WinAPI ReadFile。这是读取文件的函数：

```
std::string ReadThisFile(std::string aPath) {
   FILE *inputstream = fopen(aPath.c_str(),"rb");
   long size;
   size_t result; 
   fseek(inputstream,0,SEEK_END); 
   size = ftell(inputstream); 
   rewind(inputstream); 
   char *buff = new char [size];
   result = fread (buff,1,size,inputstream); 
   std::string ret=buff; 
   fclose(inputstream); 
   delete[]buff; 
   return ret; 
} 
```

[文件样本](http://dl.dropbox.com/u/41777790/file.dat)

需要任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:47:03.823

只要您知道`std::string`您返回的包含二进制数据，请替换

```
std::string ret=buff; 
```

和

```
std::string ret(buff, size); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:34:26.877

您不能将二进制数据放在字符串中。请记住，字符串由`'\0'`与值零相同的特殊字符终止。如果二进制数据包含零，则与字符串的结尾相同。

您可能应该使用 a`std::vector<int8_t>`来存储二进制数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:42:15.093

问题在这里：

```
std::string ret = buff; 
```

据此，[它](http://www.cplusplus.com/reference/string/string/string/)：

> “复制s 指向的以**空字符结尾的**字符序列（C 字符串）。”

因此，一旦`0x00`到达字符，它就会停止。

如果您要返回`buff`（这是一种危险的做法）或让您的函数将 char 数组作为输入参数并仅将其存储在那里，它应该可以工作。您可能想要返回一个长度指示符，否则 C++ 将不知道数组有多大。

# extjs - Ext JS - 在树面板中拖放具有不可见的根

> ID：14889424
> 
> 赞同：2
> 
> 时间：2013-02-15T06:32:28.703
> 
> 标签：extjs, extjs4.1

我试图弄清楚是否有一种方法可以配置 Ext JS 树面板拖放功能，以允许将树面板中的树节点转移到另一个配置有不可见根的树面板。两个树面板都配置为不显示根节点，因此树面板看起来有多个根节点。

我创建了一个[jsFiddle 脚本](http://jsfiddle.net/tZSeB/4/)，其中包含两个树面板的工作实现。将文件夹条目从树 1 拖放到树 2 是可行的，因为显示了树 2 的根节点，但是一旦我将树 2 的 rootVisible 属性设置为 false，就无法将文件夹节点从树 1 拖放到树 2 . 这是来自 jsFiddle 脚本的代码：

```
Ext.onReady(function () {
    Ext.define('Folder', {
        extend: 'Ext.data.Model',
        fields: [{
            name: 'id',
            type: 'int'
        }, {
            name: 'parentId',
            type: 'int'
        }, {
            name: 'name',
            type: 'string'
        }]
    });

    var store1 = Ext.create('Ext.data.TreeStore', {
        model: 'Folder',
        proxy: {
            type: 'memory',
            reader: {
                type: 'json',
                root: 'folders'
            }
        }
    });

    var tree1 = Ext.create('Ext.tree.Panel', {
        itemId: 'tree1',
        store: store1,
        rootVisible: false,
        useArrows: true,
        flex: 1,
        title: 'Tree 1',
        root: [],
        columns: [{
            xtype: 'treecolumn',
            dataIndex: 'name',
            flex: 1
        }],
        viewConfig: {
            plugins: {
                ptype: 'treeviewdragdrop',
                appendOnly: true,
                dragGroup: 'firstTreeDDGroup',
                dropGroup: 'secondTreeDDGroup'
            }
        },
        listeners: {
            afterrender: function (tree) {
                var root = tree.getRootNode();

                // load static data
                root.appendChild([{
                    id: 1,
                    parentId: -1,
                    name: 'Folder 1',
                    expanded: true,
                    folders: [{
                        id: 11,
                        parentId: 1,
                        name: 'Folder 1.1',
                        folders: []
                    }, {
                        id: 12,
                        parentId: 1,
                        name: 'Folder 1.2',
                        folders: []
                    }]
                }, {
                    id: 2,
                    parentId: -1,
                    name: 'Folder 2',
                    folders: [{
                        id: 21,
                        parentId: 2,
                        name: 'Folder 2.1',
                        folders: []
                    }, {
                        id: 22,
                        parentId: 2,
                        name: 'Folder 2.2',
                        folders: []
                    }]
                }]);
            }
        }
    });

    var store2 = Ext.create('Ext.data.TreeStore', {
        model: 'Folder',
        proxy: {
            type: 'memory',
            reader: {
                type: 'json',
                root: 'folders'
            }
        }
    });

    var tree2 = Ext.create('Ext.tree.Panel', {
        itemId: 'tree2',
        store: store2,
        rootVisible: true,
        useArrows: true,
        flex: 1,
        title: 'Tree 2',
        root: [],
        columns: [{
            xtype: 'treecolumn',
            dataIndex: 'name',
            flex: 1
        }],
        viewConfig: {
            plugins: {
                ptype: 'treeviewdragdrop',
                allowContainerDrop: true,
                allowParentInsert: true,
                appendOnly: true,
                dragGroup: 'secondTreeDDGroup',
                dropGroup: 'firstTreeDDGroup'
            }
        }
    });

    Ext.create('Ext.window.Window', {
        width: 550,
        height: 300,

        layout: {
            type: 'hbox',
            align: 'stretch'
        },

        items: [tree1, tree2]
    }).show();
}); 
```

# java - 在 Websphere 集群环境中分离 Log4j 日志

> ID：14889426
> 
> 赞同：3
> 
> 时间：2013-02-15T06:32:43.220
> 
> 标签：java, websphere-7, log4j2

我们正在使用 Log4j 登录我们的 Web 应用程序。我们的应用程序部署在 Websphere 集群环境中。

例如：

一台主机有两个不同的 JVM，其中部署了 Web 应用程序。

```
Host-1      
  JVM -1 [App-1, App-2]
  JVM -2 [App-1, App-2] 
```

**App-1**的Log4j 配置为：

```
<log4j:configuration debug="true">
    <appender name="ASYNC" class="org.apache.log4j.AsyncAppender">
        <appender-ref ref="FileOut" />
    </appender>
    <appender name="FileOut" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="/home/applogs/app-1.log" />
        <param name="DatePattern" value="'.'yyyy-MM-dd" />
        <param name="Append" value="true" />
        <param name="MaxFileSize" value="10MB" />
        <param name="MaxBackupIndex" value="5" />
        <param name="Threshold" value="ALL" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern"
                value="%d %-5p - %m%n" />
        </layout>
    </appender>   
    <root>
        <level value="INFO" />
        <appender-ref ref="ASYNC" />
    </root>    
</log4j:configuration> 
```

但这里的问题是不同的 JVM 日志被写入同一个文件**/home/applogs/app-1.log**。

有没有办法为集群环境配置单独的日志文件？如果我们在 1 个 JVM 或 2 个 JVM 或 3 个 JVM 等中部署应用程序，那么我的 Log4j 配置不应该更新吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:44:32.020

您可以使用`ManagementFactory.getRuntimeMXBean().getName()`在运行时查找 JVM 的 ProcessID 以获取唯一的文件名，然后您需要以某种方式在记录器的运行时更新文件名。看看[这个答案](https://stackoverflow.com/a/14877698/1515052)来做到这一点。完整的：

添加到您的主要方法：

```
//set a property to the JVM-Name
System.setProperty("logFilename", ManagementFactory.getRuntimeMXBean().getName());
//update the Logger context to relead the filename with the lookup
LoggerContext ctx =  (LoggerContext) LogManager.getContext(false);
ctx.reconfigure(); 
```

在您的 log4j2.xml 中使用带有文件名查找的 Appender：

```
<appenders>
<File name="MyFile" fileName="${sys:logFilename}.log">
    <PatternLayout pattern="%-4r %d{${datestamp}} [%t] %-5level %logger{36} - %msg%n"/>
</File>
</appenders> 
```

# php - Ajax + 变量未定义

> ID：14889430
> 
> 赞同：1
> 
> 时间：2013-02-15T06:32:54.343
> 
> 标签：php, javascript, ajax, jquery

我有一个简单的 js 函数，我在其中传递迭代次数。如果它大于 1 则它适用于 1 次迭代，它在警报中说未定义。如何将 test_iterations 存储在 ajax 函数中。

```
function _startTest(test_iterations) {
    $.ajax({
      url: '<?php echo $_SERVER['PHP_SELF']; ?>?start=1',
      success: function(data) {
        $('.results').append('<p>Test #' + test_number +' ' + data + ' ms</p>');
        $('.results').scrollTop(10000);

        test_results.push(data);
        alert("_startTest" + test_iterations);

        if(test_number >= test_iterations) {
            end_tests(test_iterations);
        }

        test_number++;
      }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:45:33.447

不确定这个问题，但您是否尝试过将 var 放在函数之外？好像你一直在做他们`test_number`

```
var iteration_count = 0;   // here
function _startTest(test_iterations) {
    iteration_count++;    // here
    $.ajax({
      url: '<?php echo $_SERVER['PHP_SELF']; ?>?start=1',
      success: function(data) {
        $('.results').append('<p>Test #' + test_number +' ' + data + ' ms</p>');
        $('.results').scrollTop(10000);

        test_results.push(data);
        alert("_startTest" + iteration_count); // use this value instead
        if(test_number >= test_iterations) {
            end_tests(test_iterations);
        }
        test_number++;    
      }
    });

} 
```

# asp.net-mvc-4 - DataAnnotation Range 属性的客户端验证之旅

> ID：14889431
> 
> 赞同：7
> 
> 时间：2013-02-15T06:32:55.837
> 
> 标签：asp.net-mvc-4, jquery-validate, data-annotations, unobtrusive-validation

我的模型类中有以下代码：

```
 [Range(1, 100)]
    public decimal Price { get; set; } 
```

在最近将 jquery.validate 升级（我假设）到 1.11.0 之后，即使我输入了有效值，我也会收到错误消息。如果我在 web.config 中关闭客户端验证 - 工作正常。所有其他属性（StringLength，必需）都可以正常工作。生成的 HTML 如下（为清楚起见添加了换行符）：

```
<input class="text-box single-line" data-val="true" 
data-val-number="The field Price must be a number." 
data-val-range="The field Price must be between 1 and 100." 
data-val-range-max="100" data-val-range-min="1" 
data-val-required="The Price field is required." id="Price" name="Price" 
type="text" value="" /> 
```

我很确定它以前工作过……除了 jquery.validate 中的错误之外，什么都想不到。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T20:52:52.057

我们在使用 jQuery.validate 1.11.0 和 Microsoft.jQuery.Unobtrusive.Validation 2.0.30116.0 时遇到了同样的问题。在验证库更新的某个地方，数字验证器坏了。

GitHub 问题跟踪器上有一个与此问题相关的未解决问题：[https ://github.com/jzaefferer/jquery-validation/issues/626](https://github.com/jzaefferer/jquery-validation/issues/626)

在那个问题中引用：

> 返回 this.optional(element) || （值 >= 参数 [0] && 值 <= 参数 [1]）；
> 
> 因为这一行检查的是字符串，而不是数字。如果我的范围在 30 到 200 之间，并且我想验证 120，则字符串 120 小于字符串 30。
> 
> 这一行必须是这样的：
> 
> 返回 this.optional(element) || ( Number(value) >= Number(param[0]) && Number(value) <= Number(param[1]) );

我已经更改了 jquery.validate.js 的副本：

```
// http://docs.jquery.com/Plugins/Validation/Methods/range
range: function( value, element, param ) {
    return this.optional(element) || (value >= param[0] && value <= param[1]) || (Number(value) >= Number(param[0]) && Number(value) <= Number(param[1]));
}, 
```

现在范围操作使用 DataAnnotations 按预期工作：

```
[Range(1, 100)]
public decimal Price { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:55:55.773

Microsoft 发布了对 microsoft.jQuery.Unobtrusive.Ajax 和 microsoft.jQuery.Unobtrusive.Validation 的更新（从版本“2.0.20710.0”到“2.0.30116.0”），修复**了**.live 和验证问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:47:56.397

发生这种情况是因为您更新了 Jquery 版本，而新版本的 Jquery 有不同的新更新，并且他们还删除了一些功能，如 .live 并用 .on 替换它

通过它...

[http://jquery.com/upgrade-guide/1.9/#live-removed](http://jquery.com/upgrade-guide/1.9/#live-removed)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-23T17:18:14.273

我最近遇到了这个。我从 MVC 2 升级到 MVC 5。参数名称似乎从“最小”和“最大”更改为“最小”和“最大”

如果您想解决问题而无需经历升级 JavaScript 文件的麻烦，请在您的解决方案中搜索这两行并将它们替换为更好的行

```
rule.ValidationParameters['minimum'] 
```

用。。。来代替

```
typeof(rule.ValidationParameters['minimum'])!='undefined'?rule.ValidationParameters['minimum']:rule.ValidationParameters['min'] 
```

和

```
rule.ValidationParameters['maximum']; 
```

和

```
typeof(rule.ValidationParameters['maximum'])!='undefined'?rule.ValidationParameters['maximum']:rule.ValidationParameters['max'] 
```

或者，用此代码替换“RangeValidator”函数

```
Sys.Mvc.RangeValidator.create=function(rule){var $0=typeof(rule.ValidationParameters['minimum'])!='undefined'?rule.ValidationParameters['minimum']:rule.ValidationParameters['min'];var $1=typeof(rule.ValidationParameters['maximum'])!='undefined'?rule.ValidationParameters['maximum']:rule.ValidationParameters['max'];return Function.createDelegate(new Sys.Mvc.RangeValidator($0,$1),new Sys.Mvc.RangeValidator($0,$1).validate);} 
```

# iphone - Segue 从 Master 到 Detail UITableView，其中第二个具有分组样式

> ID：14889433
> 
> 赞同：2
> 
> 时间：2013-02-15T06:32:56.293
> 
> 标签：iphone, objective-c, segue, uitableview

我真的觉得我开始失去理智了，我已经在这方面工作了这么长时间，但没有任何进展。我要做的只是单击 UITableView 中的一行，然后转到另一个具有分组样式格式的 UITableView。换句话说，我想做下图所示的事情。

如果第二个屏幕是一个带有我已添加标签的**视图控制器，我可以让这个概念完美地工作。**我的从主视图到详细视图的代码有效，但问题是这种方式看起来不像下图。

下图中的第二个屏幕显示了一个分组样式表。然而，每次我删除**View Controller**，添加一个**TableViewController**，向表格添加标签，将样式设置为分组，并在详细视图控制器类中为标签的属性创建一个出口时，我都会得到这个**“不能有原型对象作为其目的地”**错误。

我在某处读到该问题与需要将其自己的类配置为**UITableViewCell**作为其子类的表有关。但是当我尝试添加一个类并与该界面文件建立连接（控制+拖动）时，无法建立连接。

我真正想要的是有人告诉我我做错了什么，这样我才能最终实现下图所示的内容。有这方面的教程吗？我已经看过了，找不到。

有人请给我一些建议或链接我到一个教程，如果你能找到一个。

附加信息：使用 XCode 4.6。我查看了 Apple 的文档，但没有帮助。我正在用故事板创建项目。

[![屏幕截图 2013 年 2 月 14 日晚上 9.50.58](../Images/5b1c1d0514a80a12208a6ef3eaf74f72.png)](http://www.flickr.com/photos/93162002@N03/8475621356/ "BobOB31 于 2013 年 2 月 14 日晚上 9 点 50 分在 Flickr 上截屏")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:30:25.533

您的问题是您正在尝试将插座连接到动态原型单元，而您不能这样做。您可以通过以下两种方式之一来解决它。您可以使该表视图具有静态单元格，并从表视图的 .h 文件连接插座。或者，如果您需要动态单元格，则需要创建 UITableViewCell 的子类，并向其添加任何插座或属性。在 IB 中，将单元格的类更改为子类，然后您可以将单元格的出口连接到其子视图。

第二个表具有分组表视图样式的事实与您的问题无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:46:24.863

我有你的问题。让我简单解释一下。

**问题：** 您在 UITableViewCell 中添加了一个 UILabel，并尝试在 UIViewController 中添加它的 IBOutlet。

**那么如何解决呢？**

这取决于你的需要。

1.  如果您只需要一个标签而不是在 UITable 或 UITableViewCell 中添加。不要拿 UITableViewController 拿 UIViewController 在里面添加 UITableView 和 UILabel 。（在 UIViewController 中添加 UILabel 而不是在 UITableView 中）。

2.  如果您想在每个 UITableViewCell 中添加此 UILabel，则必须使用自定义 UITableViewCell。创建 UITableViewCell 的子类并在那里创建 UILabel 的 IBOutlet。

您将在互联网上获得许多自定义 UITableViewCell 的教程。

祝一切顺利....

# opengl - 关于渲染到纹理

> ID：14889434
> 
> 赞同：0
> 
> 时间：2013-02-15T06:33:03.540
> 
> 标签：opengl, render-to-texture

我正在实施渲染到纹理的概念，并且对 FBO 的范围有疑问。在我完成对默认 FBO 的 glDrawArrays 调用并渲染到纹理后，我将删除纹理和非默认 FBO。然后我调用 glReadPixels 来读取默认 FBO 上的内容。所以，我的问题是我做得对吗？我的意思是我应该在删除 FBO 和纹理之前调用 readpixel 吗？

我假设在默认 FBO 上绘制后，我们不需要非默认 FBO 和纹理，但后来一些 OpenGL 开发人员告诉我，我在上面提到的应用程序中做了一些奇怪的事情。请帮助我理解这一点。

以下是我正在遵循的步骤：

1.  创建一个帧缓冲区对象并附加一个合适的纹理作为颜色附件
2.  绑定和清除FBO
3.  渲染一些原语
4.  取消绑定 FBO 从而切换回系统 FBO
5.  绑定用作颜色附件的纹理
6.  使用上面创建的纹理在系统 FBO 上渲染。
7.  删除创建的纹理和 FBO。
8.  来自系统 FBO 的 glReadpixel。

现在，正如我在系统 FBO 上渲染的那样。为什么我们仍然需要该纹理和其他用作纹理的 FBO？

注意：我使用术语系统 FBO 来区分两个 FBO，这是我的术语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:52:14.673

我建议阅读： http: [//www.songho.ca/opengl/gl_fbo.html](http://www.songho.ca/opengl/gl_fbo.html)

但总而言之，这里是 OpenGL 中渲染到纹理的一些伪代码

```
init() {
    // setup FBO, attachments, etc...
}

render() {
    glBindFramebuffer(your_fbo);
    glClearBuffer(...);
    renderScene();

    glBindFramebuffer(0);  // setup default, system FBO
    glBindTexture(texture_id_that_was_attached_to_FBO);
    renderSecondScene();
} 
```

渲染场景后无需删除纹理或 fbo，在应用程序结束时在某些清理过程中删除它们。

# dotnetnuke - 如何在 DotNetNuke(DNN) 中以 Pdf 格式导出 Gridview 数据？

> ID：14889435
> 
> 赞同：1
> 
> 时间：2013-02-15T06:33:03.023
> 
> 标签：dotnetnuke

如何在 DotNetNuke(DNN) 中以 Pdf 格式导出 Gridview 数据？

代码背后的代码是： -

```
Response.ContentType = "application/pdf";
Response.AddHeader("content-disposition", "attachment;filename=PurchaseOrderDetails.pdf");
Response.Cache.SetCacheability(HttpCacheability.NoCache);
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);
GridView gridview1 = new GridView();

gridview1.AllowPaging = false;
//DataSet ds = objOrderRegistratonController.GetOrders();                
grddisplay.DataBind();
grddisplay.RenderControl(hw);
grddisplay.HeaderRow.Style.Add("width", "15%");
grddisplay.HeaderRow.Style.Add("font-size", "10px");
grddisplay.Style.Add("text-decoration", "none");
grddisplay.Style.Add("font-family", "Arial, Helvetica, sans-serif;");
grddisplay.Style.Add("font-size", "8px");
StringReader sr = new StringReader(sw.ToString());
Document pdfDoc = new Document(PageSize.A2, 7f, 7f, 7f, 0f);
HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
pdfDoc.Open();
htmlparser.Parse(sr);
pdfDoc.Close();
Response.Write(pdfDoc);
Response.End(); 
```

错误来了：- 'gridview' 类型的控件必须放在带有 runat=server 的表单标签内

我也尝试使用这种方法，因为许多人给出了解决方案，它的网格视图渲染问题 public override void VerifyRenderingInServerForm(Control control) { //base.VerifyRenderingInServerForm(control); }

但是这种方法在 DNN 'MPPR.mpprcms_OrderRegistraton.ViewPurchaseOrder.VerifyRenderingInServerForm(System.Web.UI.Control)' 中给出错误：找不到合适的方法来覆盖

请给出合适的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-21T08:10:16.503

```
public override void VerifyRenderingInServerForm(Control control)

{
    /* Verifies that the control is rendered */ 
}

protected void GeneratePDF_Click(object sender, EventArgs e) {

    Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition", "attachment;filename=UserDetails.pdf");
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    GridView1.AllowPaging = false;
    GridView1.DataBind();
    GridView1.RenderControl(hw);
    GridView1.HeaderRow.Style.Add("width", "15%");
    GridView1.HeaderRow.Style.Add("font-size", "10px");
    GridView1.Style.Add("text-decoration", "none");
    GridView1.Style.Add("font-family", "Arial, Helvetica, sans-serif;");
    GridView1.Style.Add("font-size", "8px");
    StringReader sr = new StringReader(sw.ToString());
    Document pdfDoc = new Document(PageSize.A2, 7f, 7f, 7f, 0f);
    HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
    PdfWriter.GetInstance(pdfDoc, Response.OutputStream); pdfDoc.Open();
    htmlparser.Parse(sr);
    pdfDoc.Close();
    Response.Write(pdfDoc);
    Response.End();     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:40:08.487

您是否尝试过将 DotNetNuke 包装器控件用于支持导出为各种格式的 Telerik 网格。我不使用包装器，但它可能会帮助您实现您想要实现的目标。

关于如何使用包装器的链接

[这太容易了——实现 DNNGrid（又名 Telerik RadGrid）](http://www.tressleworks.ca/Blog/tabid/73/EntryId/77/Thats-Too-Easy-Implementing-DNNGrid-aka-Telerik-RadGrid.aspx)

有关用于导出的 telerik radgrid 控件的链接。

[Telerik RadGrid - 导出为 PDF](http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/pdfexport/defaultcs.aspx)

# perl - Perl中的错误消息“在空操作中使用未初始化的值”是什么意思？

> ID：14889437
> 
> 赞同：4
> 
> 时间：2013-02-15T06:33:11.890
> 
> 标签：perl

Perl 中的错误消息“在空操作中使用未初始化的值”是什么意思？

我已经对此进行了广泛的搜索，并发现了许多人们讨论此表单错误的页面。但是，尽管我进行了搜索，但我仍然无法理解这表明什么错误情况。请注意：我没有可以共享的源代码来演示此错误，因为它仅在“Test::More”下运行时出现在测试脚本中，并且涉及大量 XS 代码。我只是想知道这个错误消息可能意味着什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:03:04.373

查找[`perldoc perldiag`](http://perldoc.perl.org/perldiag.html)“使用未初始化的值”。

*   `Use of uninitialized value%s`

    （W 未初始化）使用未定义的值，就好像它已经定义了一样。它被解释为“”或 0，但可能是一个错误。要抑制此警告，请为您的变量分配一个定义的值。

    为了帮助您找出未定义的内容，perl 将尝试告诉您未定义的变量的名称（如果有的话）。在某些情况下它无法做到这一点，因此它还会告诉您在哪个操作中使用了未定义的值。但是请注意，perl 优化了您的程序，并且警告中显示的操作不一定会在您的程序中出现。例如，“that $foo”通常被优化为“that”。$foo ，警告将引用连接 (.) 运算符，即使没有 . 在你的程序中。

有趣的部分是弄清楚“in null operation”是什么意思。它不是那么简单：

```
my $x;
$x; 
```

这得到：

```
Useless use of private variable in void context 
```

在这个阶段，我不确定；您可以通过显示触发消息的 Perl 脚本来提供帮助。

* * *

查看 Perl 源代码（我通常避免这样做）后，有许多测试包含诸如 ( `t/lib/dbmt_common.pl`) 之类的注释：

```
# Bug ID 20001013.009
#
# test that $hash{KEY} = undef doesn't produce the warning
#     Use of uninitialized value in null operation 
```

您还可以在 中找到对“空操作”的引用`regen/opcodes`。空操作似乎是操作码 0。

```
# Nothing.

null        null operation      ck_null     0
stub        stub            ck_null     0
scalar      scalar          ck_fun      s%  S

# Pushy stuff.

pushmark    pushmark        ck_null     s0 
```

如果您查看`opcode.h`，您会发现：

```
#ifndef DOINIT
EXTCONST char* const PL_op_name[];
#else
EXTCONST char* const PL_op_name[] = {
    "null",
    "stub",
    "scalar",
    "pushmark",

...

#ifndef DOINIT
EXTCONST char* const PL_op_desc[];
#else
EXTCONST char* const PL_op_desc[] = {
    "null operation",
    "stub", 
    "scalar",
    "pushmark", 
```

该文件`cpan/Encode/lib/Encode/Encoding.pm`包含注释（在某些 POD 中）：

```
=item -E<gt>renewed

Predefined As:

  sub renewed { $_[0]->{renewed} || 0 }

Tells whether the object is renewed (and how many times).  Some
modules emit C<Use of uninitialized value in null operation> warning
unless the value is numeric so return 0 for false. 
```

我认为您最好在[PerlMonks](http://perlmonks.org/)或 Perl 内部专家们常去的类似地方提问。

# javascript - 如何使用 javascript 将日期 2011-08-13T10:38:27 转换为 dd /mm/yy 格式

> ID：14889442
> 
> 赞同：2
> 
> 时间：2013-02-15T06:33:48.130
> 
> 标签：javascript, date

我有一个以 2011-08-13T10:38:27 格式显示的原始日期，我希望使用 javascript 将其转换为 mm/dd/yy 格式并删除时间等额外值。

有没有办法以这种格式获取日期？

谢谢，罗南

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:36:05.353

您可以通过调用非常简单地将日期转换为 Date 对象

```
var date = new Date("2011-08-13T10:38:27"); 
```

然后使用输出它

```
var dateString = (date.getMonth()+1).toString() + '/' + date.getDate().toString() + '/' +  date.getFullYear().toString(); 
```

在发布新问题之前，请阅读以前的帖子。 [在javascript中将日期格式化为MM/dd/yyyy](https://stackoverflow.com/questions/11591854/format-date-to-mm-dd-yyyy-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:41:27.563

```
var date = new Date('2011-08-13T10:38:27');
alert((date.getMonth()+1).toString() + '/' + date.getDate().toString() + '/' +  date.getFullYear().toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:37:26.270

```
var from = new Date(ur_date);</br>
var date =  " DATE('"+(from.getMonth()+1)+"-"+from.getDate()+"-"+from.getFullYear()+"')";</br> 
```

干杯...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T06:44:00.500

使用 substr：

```
var dateyear="2011-08-13T10:38:27";
var year=dateyear.substr(0,dateyear.indexOf(-)-1);
var month=dateyear.substr(dateyear.indexOf(-)+1,dateyear.indexOf(-)+3)
var date=dateyear.substr(dateyear.indexOf(-)+4,dateyear.indexOf(-).length);

alert(month+"-"+date+"-"+year); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-15T06:39:54.710

试试这个[功能](http://jsfiddle.net/E9guF/1/)

```
function formatDate(dateparam) {
    var dateObj = new Date(Date.parse(dateparam));

    var date = dateObj.getDate();
    date = (date.toString().length == 1) ? "0" + date : date;

    var month = dateObj.getMonth();
    month++;
    month = (month.toString().length == 1) ? "0" + month : month;

    var year = dateObj.getFullYear();

    return month + "/" + date + "/" + year;
}

document.write(formatDate("2011-08-13 05:38:27"));
// returns 08/13/2011 
```

# malware - 我无法从我的 .php 页面中删除恶意软件 iframe

> ID：14889443
> 
> 赞同：1
> 
> 时间：2013-02-15T06:33:55.147
> 
> 标签：malware

我在 footer.php 页面中发现以下行：

```
<iframe style="height:1px" src="http://www&#46;Brenz.pl/rc/" frameborder=0 width=1>
</iframe> 
```

我不能删除这一行。如果我删除它，那么它会一次又一次地显示。为什么 ？这是我搜索 Google 后发现的恶意软件 iframe。

任何帮助都非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:02:10.080

似乎另一个文件在检测到更改时可能正在修改该文件。您需要找到所有恶意文件/代码并将它们根除以防止该行出现。此外，您可能希望加强安全性、更新补丁等。攻击者可能仍然可以访问您的网站或服务器。如果您为您的网站使用网络托管公司，您可能需要向他们寻求删除帮助。

祝你好运！

# php - 需要登录两次（PHP Session）

> ID：14889445
> 
> 赞同：0
> 
> 时间：2013-02-15T06:34:06.893
> 
> 标签：php, session, login

这是我的 login.php 代码：

```
session_start(); 
ob_start ();

$_SESSION['login'] = "login";

header('Location: http://www.domain.com/folder/home.php');

exit(); 
```

这是我的 home.php 代码：

```
session_start(); 

ob_start ();

if (!isset($_SESSION['login'])) 
{
    header('Location: http://www.domain.com/folder/login.php');
    exit();
} 
```

问题是当我第一次登录时，它会转到`home.php`并重定向回`login.php`. 当我再次登录时，它不会再次将我重定向到 login.php。

我使用 Firefox 开发人员工具栏查看流程。

我曾经`var_dump($_SESSION)`查看过是否设置了会话。它返回`array(0)`。

这段代码有问题吗？还是因为其他问题？

感谢：D

# google-analytics - 谷歌分析显示实际浏览量和事件的点击率百分比

> ID：14889453
> 
> 赞同：1
> 
> 时间：2013-02-15T06:34:37.753
> 
> 标签：google-analytics

我为页脚中的链接设置了事件，该链接位于我的 CMS 网站的所有页面中。这工作得很好。我也为此创建了一个仪表板，如下所示

页面标题 | 总事件 | 独特的事件

现在我还想在同一个仪表板中包含页面的实际综合浏览量。所以仪表板现在应该有如下列的表格

页面标题 | 总事件 | 独特的事件 | 实际浏览量 | 点击率%

我知道这可以通过在仪表板中创建 2 个不同的小部件来单独完成，但是有没有办法将这两者结合起来。任何帮助都会很棒。

# python - python中字符串的打印长度

> ID：14889454
> 
> 赞同：9
> 
> 时间：2013-02-15T06:34:53.933
> 
> 标签：python, string, pretty-print, tty

有没有办法在python中找到（甚至是最好的猜测）字符串的“打印”长度？例如，'potaa\bto' 是 8 个字符，`len`但在 tty 上打印的只有 6 个字符宽。

预期用途：

```
s = 'potato\x1b[01;32mpotato\x1b[0;0mpotato'
len(s)   # 32
plen(s)  # 18 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:47:13.183

至少对于 ANSI TTY 转义序列，这是有效的：

```
import re
strip_ANSI_pat = re.compile(r"""
    \x1b     # literal ESC
    \[       # literal [
    [;\d]*   # zero or more digits or semicolons
    [A-Za-z] # a letter
    """, re.VERBOSE).sub

def strip_ANSI(s):
    return strip_ANSI_pat("", s)

s = 'potato\x1b[01;32mpotato\x1b[0;0mpotato'

print s, len(s)
s1=strip_ANSI(s)
print s1, len(s1) 
```

印刷：

```
potato[01;32mpotato[0;0mpotato 32
potatopotatopotato 18 
```

对于退格 \b 或垂直制表符或 \r 与 \n - 这取决于它的打印方式和位置，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-17T22:19:26.433

**bash** shell 具有完全相同的需求，以便在提示字符串中存在不可打印字符的情况下知道用户输入的输入何时换行到下一行。他们的解决方案是*甚至不尝试*- 相反，他们要求任何设置提示字符串的人都放置在提示`\[`的`\]`非打印部分周围。打印的长度被计算为字符串的长度，这些特殊序列和它们之间的所有文本都被过滤掉了。（当然，输出中省略了特殊序列。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-02T09:49:50.097

字符串的打印长度取决于字符串的类型。

> python 2.x 中的普通字符串在 utf-8 中。utf-8 的长度等于 String 中的字节数。将类型更改为 unicode，len() 现在提供打印的标志。所以格式化工作：

```
value = 'abcäöücdf'
len_value  = len(value)
len_uvalue = len(unicode(value,'utf-8'))
size = self['size'] + len_value-len_uvalue
print value[:min(len(value),size)].ljust(size) 
```

# jquery - 绑定到选择的 liszt:ready 事件

> ID：14889466
> 
> 赞同：1
> 
> 时间：2013-02-15T06:36:12.013
> 
> 标签：jquery, events, jquery-chosen

我们正在使用 jQuery Chosen 插件将 HTML 转换`select`为一个漂亮的可搜索列表。我正在尝试的是在选择准备好（即被`liszt:ready`触发）后在列表底部添加一个链接。

我可以很容易地绑定到`liszt:showing_dropdown`以下代码，它工作得很好：

```
$("select").chosen().on("liszt:showing_dropdown", function(){
   console.log "List opened."
}) 
```

但是，当我尝试用它替换`liszt:showing_drop`时，`liszt:ready`它不起作用。我认为这是正常的，因为执行`liszt:ready`时会触发`$("select").chosen()`。

这是触发事件的 jquery.chosen.js 的摘录`liszt:ready`：

```
...
this.results_build();
this.set_tab_index();
return this.form_field_jq.trigger("liszt:ready", {
  chosen: this
});
... 
```

有人可以指导我如何绑定到`liszt:ready`事件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T06:47:28.187

我不确定这是否是正确的方法，但它对我有用：

1.  听`liszt:ready`事件
2.  申请选择
3.  `liszt:ready`手动触发

监听`liszt:ready`事件：

```
$("select").on("liszt:ready", function(){
   console.log("Hey, I am ready!");
}) 
```

`liszt:ready`然后应用选择并手动触发

`("select").chosen().trigger("liszt:ready");`

请让我知道是否有更合适的方法来实现这一目标。

# android - android中的onclickListener

> ID：14889470
> 
> 赞同：0
> 
> 时间：2013-02-15T06:36:26.287
> 
> 标签：android, checkbox, onclicklistener

在我的应用程序中，我正在动态添加复选框。我想在单击复选框时执行操作。我尝试了很多。下面是代码。请帮助我。我怎样才能获得点击复选框的 ID。在下面的代码中它甚至没有进入 onclick 函数。

```
 public class ImportFile extends Activity implements OnClickListener{

 TableLayout tl;
 Intent i;
 ImageView im;
 int idcount;
public OnClickListener checkBoxListener;
 TextView nameoffile,sizeoffile,line;
 CheckBox[] ch=new CheckBox[100];

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylist); 
        tl=(TableLayout) findViewById(R.id.table);

        File file = new File(Environment.getExternalStorageDirectory()
            + File.separator
            + "gallery" //folder name
        );
        if (!file.exists()) {
            file.mkdirs();
        }

               /* i=new Intent();
                i.putExtra("file","string");
                setResult(RESULT_OK, i);
                finish(); */

        TableRow tr=new TableRow(this);

        int id=1;

        File f = new File("/sdcard/download");//or Environment.getExternalStorageDirectory().getPath()
        File[] files = f.listFiles();

        for(int i = 0; i < files.length; i++) {
            File file1 = files[i];
            //take the file name only
            long size = file1.length()/1024;

            String myfile = file1.getPath().substring(file1.getPath().lastIndexOf("/")+1,file1.getPath().length()).toLowerCase(); 
            if(myfile.endsWith(".jpeg")||myfile.endsWith(".png")|| myfile.endsWith(".gif") || myfile.endsWith(".jpg"))
            {

            ch[id]=new CheckBox(getApplicationContext());
            ch[id].setId(id);
            ch[id].setText("  ");

            System.out.println("id is........"+id);

            Bitmap b=ThumbnailUtils.extractThumbnail(BitmapFactory.decodeFile((file1.getPath())), 40,40);

            im=new ImageView(this);
            im.setImageBitmap(b);       

            nameoffile=new TextView(this);
            nameoffile.setText("  "+myfile);
            nameoffile.setWidth(200);

            sizeoffile=new TextView(this);
            sizeoffile.setText(size+"KB");
            sizeoffile.setWidth(100);

            tr=new TableRow(this);
            tr.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            if((id%2)==0)
            {
                tr.setBackgroundResource(R.color.Thistle);
            }
            else{
                tr.setBackgroundResource(R.color.Bisque);
            }
            tr.addView(ch[id++]); 
            idcount=id;
            tr.addView(im);
            tr.addView(nameoffile);
            tr.addView(sizeoffile);
            tr.setId(id);

            tl.addView(tr,new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));

            }

        }

       }

    @Override
    public void onClick(View v) {
        int j;
        // TODO Auto-generated method stub
        for(j=1;j<idcount;j++){
            if(ch[j].isChecked())
            {
        System.out.println("PPPPPPPPPPPPPPPPPP"+j);
    }       
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:04:17.590

您必须将 onCLick 侦听器更改为 onCheckChangedListener

```
public class ImportFile extends Activity implements OnCheckedChangeListener {

TableLayout tl;
Intent i;
ImageView im;
int idcount;
public OnClickListener checkBoxListener;
TextView nameoffile, sizeoffile, line;
CheckBox[] ch = new CheckBox[100];

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mylist);
    tl = (TableLayout) findViewById(R.id.table);

    File file = new File(Environment.getExternalStorageDirectory()
                         + File.separator
                         + "gallery" //folder name
    );
    if (!file.exists()) {
        file.mkdirs();
    }

    /* i=new Intent();
     i.putExtra("file","string");
     setResult(RESULT_OK, i);
     finish(); */

    TableRow tr = new TableRow(this);

    int id = 1;

    File f = new File("/sdcard/download");//or Environment.getExternalStorageDirectory().getPath()
    File[] files = f.listFiles();

    for (int i = 0; i < files.length; i++) {
        File file1 = files[i];
        //take the file name only
        long size = file1.length() / 1024;

        String myfile = file1.getPath().substring(file1.getPath().lastIndexOf("/") + 1, file1.getPath().length()).toLowerCase();
        if (myfile.endsWith(".jpeg") || myfile.endsWith(".png") || myfile.endsWith(".gif") || myfile.endsWith(".jpg")) {

            ch[id] = new CheckBox(this);
            ch[id].setId(id);
            ch[id].setText("  ");
            ch[id].setOnCheckedChangeListener(this);

            System.out.println("id is........" + id);

            Bitmap b = ThumbnailUtils.extractThumbnail(BitmapFactory.decodeFile((file1.getPath())), 40, 40);

            im = new ImageView(this);
            im.setImageBitmap(b);

            nameoffile = new TextView(this);
            nameoffile.setText("  " + myfile);
            nameoffile.setWidth(200);

            sizeoffile = new TextView(this);
            sizeoffile.setText(size + "KB");
            sizeoffile.setWidth(100);

            tr = new TableRow(this);
            tr.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            if ((id % 2) == 0) {
                tr.setBackgroundResource(R.color.Thistle);
            }
            else {
                tr.setBackgroundResource(R.color.Bisque);
            }
            tr.addView(ch[id++]);
            idcount = id;
            tr.addView(im);
            tr.addView(nameoffile);
            tr.addView(sizeoffile);
            tr.setId(id);

            tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        }

    }

}

@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
 // TODO Auto-generated method stub
    int kk = ch[1].getId();
    System.out.println("PPPPPPPPPPPPPPPPPP" + kk);
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:42:13.880

改变

```
ch[id]=new CheckBox(this); 
```

到

```
ch[id] = new CheckBox(getApplicationContext()); 
```

它会解决你的问题

# mysql - Solr 4.0 Delta-import 3 表连接

> ID：14889473
> 
> 赞同：0
> 
> 时间：2013-02-15T06:36:58.763
> 
> 标签：mysql, join, solr, dih

我在 Ubuntu 上使用 Solr 4.0 DIH（JDBC 连接器）。我正在尝试使以下 MySQL JOIN 查询与 Solr 一起工作`Delta-import`：

```
select c.*,u.*,g.* from user u inner join group g on u.bus_grp_id = g.dt_grp_id inner join customer c on c.id = g.dt_id 
```

这里 c, u, g 分别是表和`customer`的别名。`user``group`

以下是`data-config.xml`完整和增量导入的文件：

```
<entity name="cust" pk="id" query="select c.*,u.*,g.* from user u inner join group g on u.bus_grp_id = g.dt_grp_id inner join customer c on c.id = g.dt_id"
                deltaImportQuery="select c.*,u.*,g.* from user u inner join group g on u.bus_grp_id = g.dt_grp_id inner join customer c on c.id = g.dt_id where c.id='${dih.delta.c.id}'"
                deltaQuery="select id from customer where last_modified &gt; '${dih.last_index_time}'">

                <entity name="grp" pk="dt_id"
                    query="select * from group where dt_id='${cust.c.id}'"
                    deltaQuery="select dt_id from group where last_modified > '${dih.last_index_time}'"
                    parentDeltaQuery="select id from customer where id=${grp.dt_id}" >

                <entity name="usr" pk="bus_grp_id"
                query="select * from user"
                deltaQuery="select bus_grp_id from user where last_modified > '${dih.last_index_time}'"
                parentDeltaQuery="select dt_grp_id from group where dt_grp_id=${usr.bus_grp_id}" >

</entity>
</entity>
</entity> 
```

没问题，`full-import`但`Delta-import`不工作（增量导入后我没有得到任何结果）。自从我试图完成这项工作以来已经快一个月了，但做不到。

有什么帮助吗？请！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:53:42.223

如果您的主要实体元素中的查询即

```
select c.*,u.*,g.* from user u 
inner join group g on u.bus_grp_id = g.dt_grp_id 
inner join customer c on c.id = g.dt_id 
```

正在为您提供在 Solr 中索引所需的所有字段，我认为您不需要其他两个子实体。另外我猜你的 deltaImportQuery 中有一个错字。你应该使用`dih.delta.id`而不是`dih.delta.c.id`.

我想如果你只保留这个，它应该可以正常工作：

```
<entity 
   name="cust" 
   pk="id" 
   query="select c.*,u.*,g.* from user u 
            inner join group g on u.bus_grp_id = g.dt_grp_id 
            inner join customer c on c.id = g.dt_id"
   deltaImportQuery="select c.*,u.*,g.* from user u 
            inner join group g on u.bus_grp_id = g.dt_grp_id 
            inner join customer c on c.id = g.dt_id 
              where c.id='${dih.delta.id}'"
   deltaQuery="select id from customer 
                where last_modified &gt; '${dih.last_index_time}'" /> 
```

完成完全导入后，请检查文件 dataimport.properties。完全导入完成后，请确保`customer`表中的某些文档`last_modified`的时间大于在 dataimport.properties 中找到的时间，以便增量有一些数据可以运行。然后尝试 delta import 并查看这些文档是否被重新索引。您可以通过查看 delta 导入来了解有多少被索引`http://HOST:PORT/solr/CORE/dataimport`

# php - 如果我在新选项卡中打开页面或直接访问，如何继续上一个地址

> ID：14889478
> 
> 赞同：-1
> 
> 时间：2013-02-15T06:37:29.813
> 
> 标签：php, javascript, session, cookies

我有类似的结果页面

```
http://www.test.com/search 
```

和这样的搜索结果数据

```
http://www.test.com/search/a
http://www.test.com/search/b
http://www.test.com/search/c 
```

现在我想要什么，如果我直接在浏览器地址栏中访问页面[http://www.test.com/search/a](http://www.test.com/search/a)然后返回上一个链接应该是[http://www.test.com/search](http://www.test.com/search)

即使我打开搜索结果页面[http://www.test.com/search/a](http://www.test.com/search/a)到新标签，那么它也应该参考[http://www.test.com/search](http://www.test.com/search)点击返回上一个链接

注意：javascript:history.go(-1) 在这个问题上不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:50:30.523

浏览器后退和前进按钮是不可能的。因为如果您输入 url 或在新选项卡/窗口中打开，它们将被禁用。但是，您可以在页面本身上放置返回按钮/链接，该按钮/链接可以重定向到上一页 url。

```
<a href="/search" >Back</a> 
```

也可以选择点赞后关闭窗口

```
<a href="#" onclick="javascript:window.close();return false;" >Back</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T07:07:19.133

谢天谢地，这是不可能的。如果每个站点都有能力劫持浏览器的后退和前进按钮，那么互联网将是一个非常可怕的地方。事实上，浏览器不允许您这样做是一项安全功能。

我什至无法想到需要这种方法的目的，但是如果到达`/search`对导航/用户体验如此重要，那么`/search`默认情况下只需将用户路由到，除非他们从那里提交了查询。

# java - 关于变量参数和匿名数组

> ID：14889482
> 
> 赞同：0
> 
> 时间：2013-02-15T06:37:47.743
> 
> 标签：java

请告知我如何将以下程序转换为可变参数，这是java 5引入的新功能，现在我正在使用匿名内部数组..

```
public class AnnonymousArrayExample {

    public static void main(String[] args) {

        //calling method with anonymous array argument
        System.out.println("first total of numbers: " + sum(new int[]{ 1, 2,3,4}));
        System.out.println("second total of numbers: " + sum(new int[]{ 1, 2,3,4,5,6,}));

    }

    //method which takes an array as argument
    public static int sum(int[] numbers){
        int total = 0;
        for(int i: numbers){
            total = total + i;
        }
        return total;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:41:38.237

像这样制作你的方法签名 `public static int sum(int ... numbers)`

以下是有效的调用

```
sum();
sum(1,2,3);
sum(1,2,3,4,5);
sum(new int[] {1,2,3}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T06:41:48.380

使用可变参数

```
public static int sum(int... numbers){} 
```

* * *

**另见**

*   [Java中的“...”是什么意思？](https://stackoverflow.com/questions/4618930/what-does-mean-in-java/4618944#4618944)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T06:45:38.407

没有“匿名内部数组”之类的东西 - 你所拥有的只是一个[数组创建表达式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)。

要使用可变参数数组，您只需像这样更改方法声明：

```
public static int sum(int... numbers) {
    // Code as before - the type of numbers will still be int[]
} 
```

并将调用代码更改为：

```
System.out.println("first total of numbers: " + sum(1, 2, 3, 4)); 
```

有关更多详细信息，请参阅[Java 语言规范的第 8.4.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.1)，或[Java 1.5 语言指南](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T06:42:15.380

使用`varargs (...)`改变你的方法签名`public static int sum(int... numbers)`。

```
public static int sum(int... numbers){
       int total = 0;
       for(int i: numbers){
           total = total + i;
       }
       return total;
} 
```

...

```
System.out.println("first total of numbers: " + sum(new int[]{ 1, 2,3,4}));
System.out.println("second total of numbers: " + sum(new int[]{ 1, 2,3,4,5,6,})); 
```

更多信息`varargs`-[参考文件](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T06:42:19.920

只需更改您的参数声明（从 [] 到 ...）并且调用部分没有更改：

```
public class AnnonymousArrayExample {

    public static void main(String[] args) {

        // calling method with anonymous array argument
        System.out.println("first total of numbers: "
                + sum(new int[] { 1, 2, 3, 4 }));
        System.out.println("second total of numbers: "
                + sum(new int[] { 1, 2, 3, 4, 5, 6, }));

    }

    // method which takes an array as argument
    public static int sum(int... numbers) {
        int total = 0;
        for (int i : numbers) {
            total = total + i;
        }
        return total;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T06:43:10.140

sum 方法应声明如下：

```
public static int sum(int ... numbers) 
```

呼叫应如下所示：

```
sum(1,2,3,4,5) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-15T06:53:51.303

**sum**函数如下所示：

```
public static int sum(int... numbers) {
  int total = 0;
  for (int i : numbers) {
    total = total + i;
  }
  return total;
} 
```

它看起来几乎与您的原始代码相同 - 并且有充分的理由。据我所知，在内部，可变参数是由编译器使用数组翻译的。这两个函数的签名是相同的——你不能在代码中同时保留这两个函数。所以“省略号”语法只是语法糖。

以及函数的调用：

```
int total = sum(1,2,3,4); 
```

语法上看起来更简洁，但在底层，它与您的原始代码相同 - 编译器将创建一个数组，使用给定的值对其进行初始化，并将其作为参数传递给函数。

# javascript - 显示在 javascript 中实现时 mouse_id 未定义的错误

> ID：14889495
> 
> 赞同：2
> 
> 时间：2013-02-15T06:39:06.443
> 
> 标签：javascript, jquery, html, ajax, json

嗨，我在执行以下操作时遇到错误。

当我单击以下代码中的“保存”按钮时：

```
<td width="20%"><a href='#' class="close"> <input id="save"  onClick="updateMouseInfo();" type="button" value="Save" /></a></td> 
```

我想从 getMouseInfo() 函数调用 mouse_id 参数到 updateMouseInfo() 并且我收到 mouse_id 未定义的错误，所以请帮助我解决问题。

```
function getMouseInfo(mouse_id) 
{ 
  var dataString = {auth_token: sessionStorage.auth_token, id: mouse_id};
  var mh_url =  MH_HOST + '/mice/get_mouse_info.json';
  alert("Inside Mouse Get Info");
  $.ajax(
  {
    type: "POST",
    url: mh_url,
    data: dataString,
    dataType: "json",
    success: function (data) 
    {

            //for (var info_count = 0, info_len = data.length; info_count < info_len; info_count++ );
            //{
                alert("Inside for loop");
                 //var mouse_info = data.cage.mice[info_count];

                 var ear_tag = document.getElementById("ear_tag");
                 var age = document.getElementById("age");
                 var genotype = document.getElementById("genotype");
                 var owner = document.getElementById("owner");
                 //var born = document.getElementById("born");
                 //var euthanize = document.getElementById("euthanize");
                 //var note = document.getElementById("note");

                 ear_tag.innerHTML = data[0].ear_tag;
                 age.innerHTML = data[0].age;
                 genotype.innerHTML = data[0].genotype_id;
                 owner.innerHTML = data[0].owner_id;
                 //born.innerHTML = data[0].dob;
                 //euthanize.innerHTML = data[0].dob;
                 //note.innerHTML = data[0].dob; 
            //} 
    },
    error: function (data) 
    {
        alert("fail");
    }    
  });   
}

//update mouse info
function updateMouseInfo(mouseid) 
{ 
  var ear_tag = $('#input_ear_tag').val();
  var age = $('#input_age').val();  
  var genotype = $('#input_genotype').val();
  var owner = $('#input_owner').val();

  var dataString = {auth_token: sessionStorage.auth_token, id: mouseid, mouse: 
  {ear_tag: ear_tag, age: age,}};
  var mh_url =  MH_HOST + '/mice/update.json';

  alert("Inside Mouse update Info");
  console.log('Data String='+ dataString.auth_token + 'Mouse id=' + dataString.id);
  $.ajax(
  {
    type: "POST",
    url: mh_url,
    data: dataString,
    dataType: "json",
    success: function (data) 
    {  
        document.getElementById('ear_tag').innerHTML = "<div" + ear_tag + "'>" + ear_tag + "</div>";
        document.getElementById('age').innerHTML = "<div" + age + "'>" + age + "</div>";
        document.getElementById('genotype').innerHTML = "<div" + genotype + "'>" + genotype + "</div>";
        document.getElementById('owner').innerHTML = "<div" + owner + "'>" + owner + "</div>";
    },
    error: function (data) 
    {
        alert("fail");
    }    
  }); 

} 
```

我在浏览器控制台中收到以下错误。

```
m_id=99 
Data String=pvHxzkr3cys1gEVJRpCDMouse id=undefined 
```

而在上述情况下，id 应该是 99，它显示未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:18:57.387

您正在以下列方式调用 updateMouseInfo 函数：

```
onClick="updateMouseInfo();" 
```

如果您想在调用时具有相同的 mouseid 值，该值由`getMouseInfo()`函数获取`updateMouseInfo()`，则必须全球化`getMouseInfo()`

希望它有效。

# php - 不想显示贝宝自适应付款的结束日期

> ID：14889499
> 
> 赞同：1
> 
> 时间：2013-02-15T06:39:10.093
> 
> 标签：php, paypal, payment, paypal-adaptive-payments

我得到了这个贝宝自适应付款来进行现场工作。现在我的问题是，当我们重定向到预批准请求的贝宝屏幕时，我如何隐藏预批准的结束日期，因为它使用户感到困惑（左栏中的 Enddatum）。

如果这是不可能的，可以在贝宝屏幕上写一个简短的说明吗？

![在此处输入图像描述](../Images/4c7c7f072efc9622278300117d912471.png)

提前致谢。

# css - 未最大化时隐藏侧边栏浮动共享栏

> ID：14889506
> 
> 赞同：0
> 
> 时间：2013-02-15T06:39:41.967
> 
> 标签：css, sidebar

我已经为我的博客添加了一个共享栏的代码，它工作正常，但我想让它在窗口未最大化时不可见。我需要改变什么才能做到这一点？

```
<style>
#pageshare {position:fixed; bottom:15%; right:10px; float:left; border: 1px solid #999999; border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#e5e5e5;padding:0 0 2px 0;z-index:10;}

#pageshare .sbutton {float:left;clear:both;margin:5px 5px 0 5px;}
.fb_share_count_top {width:48px !important;}
.fb_share_count_top, .fb_share_count_inner {-moz-border-radius:3px;-webkit-border-radius:3px;}
.FBConnectButton_Small, .FBConnectButton_RTL_Small {width:49px !important; -moz-border-radius:3px;-webkit-border-radius:3px;}
.FBConnectButton_Small .FBConnectButton_Text {padding:2px 2px 3px !important;-moz-border-radius:3px;-webkit-border-radius:3px;font-size:8px;}
</style>
<br/><div id='pageshare' title="Share This With Your Friends">
<div class='sbutton' id='gb'><script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script><fb:like layout="box_count" show_faces="false" font=""></fb:like></div>
<br/><div class='sbutton' id='rt'><a href="http://twitter.com/share" class="twitter-share-button" data-count="vertical" >Tweet</a><script src='http://platform.twitter.com/widgets.js' type="text/javascript"></script></div>
<br/><div class='sbutton' id='gplusone'><script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script><g:plusone size="tall"></g:plusone></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:54:00.737

您可以通过媒体查询来做到这一点吗？

```
@media screen and (max-width: 768px) {
#pageshare{
    display: none;
} 
```

}

# jquery - Jquery 模态调用错误。ASP VB

> ID：14889507
> 
> 赞同：0
> 
> 时间：2013-02-15T06:39:52.823
> 
> 标签：jquery, asp.net, vb.net

它曾经可以工作，但是当我包含一个 jquery-ui 选项卡时。它突然有一个错误..所以这就是我所说的

```
Dim strCallScript As String = "$(function() { " & _
        "$('#dialog').dialog('open'); " & _
        "});  "
        ClientScript.RegisterStartupScript(Page.GetType(), "error", strCallScript, True) 
```

这是它的功能

```
 $(function myFunction(){ 
            $( "#dialog" ).dialog({ 
                autoOpen: false,
                modal: true,
                buttons: {
                    OK: function() {
                        $(this).dialog("close");
                    }
                } 
            });                                                
        }); 
```

这是它的 div

```
<div id="dialog" title="Invalid Date Range" class="ui-dialog ui-widget ui-widget-content ui-corner-all"> 
                    <div class="ui-widget">
                        <div class="ui-state-error ui-corner-all" style="padding: 0 .7em;">
                            <p>
                                <span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>
                                Please enter starting date.
                            </p>
                        </div>
                    </div> 
                </div> 
```

这是错误：

![在此处输入图像描述](../Images/5cb2ae25af9033f850cbb183bb34dbfa.png)

请帮忙。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:12:19.267

这是我的错误:)

```
Dim strCallScript As String = "$(function myFunction(){ " & _
        "$(function() { " & _
        "$('#dialog').dialog('open'); " & _
        "});  " & _
        "});  "

    ClientScript.RegisterStartupScript(Page.GetType(), "error", strCallScript, True) 
```

本来应该是这样的

# c# - .Net 4.5 杀死了我的 TPL，现在怎么办？

> ID：14889514
> 
> 赞同：17
> 
> 时间：2013-02-15T06:40:48.500
> 
> 标签：c#, task-parallel-library, .net-4.5

图表 1：一些将 Async（不是`async`！）网络调用包装成`Task`

```
public static Task<byte[]> GetAsync(IConnection connection, uint id)
{
    ReadDataJob jobRDO = new ReadDataJob();

    //No overload of FromAsync takes 4 extra parameters, so we have to wrap
    // Begin in a Func so that it looks like it takes no parameters except 
    // callback and state
    Func<AsyncCallback, object, IAsyncResult> wrapped = (callback, state) =>
                jobRDO.Begin(connection, 0, 0, id, callback, state);

    return Task<byte[]>.Factory.FromAsync(wrapped, ar =>
    {
        ErrorCode errorCode;
        UInt32 sError;
        UInt32 attribute;
        byte[] data = new byte[10];
        jobRDO.End(out errorCode, out sError, out attribute, out data);
        if(error != ErrorCode.NO_ERROR)  throw new Exception(error.ToString());
        return data;
    }, jobRDO);
} 
```

安装 .Net 4.5（不将 VS 指向它，也不重新编译）会停止此工作。回调永远不会被调用。

有什么想法可能导致这种情况，否则，我可以做些什么来尝试进一步缩小问题的根本原因或解决它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T07:18:17.357

**重新编辑**：我与[Stephen Toub](http://blogs.msdn.com/b/toub/)交换了几封电子邮件。下面我尝试将我的原始答案和他的答案合并为一个连贯的整体。

**tl;博士**解决这个问题，强制`CompleteSynchronously`总是返回 false （*警告非演讲者*）。

* * *

## .Net 4.5“重大”更改的 MSDN 文档

发布此问题后，我立即点击了一个[相关问题](https://stackoverflow.com/questions/14424221/what-other-silent-changes-did-happen-from-net-frameworkf-v-4-0-to-4-5?rq=1)，最后看到了[“.NET Framework 4.5 中的应用程序兼容性”](http://msdn.microsoft.com/en-us/library/hh367887%28v=VS.110%29.aspx#core)，其中有这样的说法`FromAsync`：

> **更改**：`IAsyncResult`实现必须同步完成，并且其`CompletedSynchronously`属性必须返回**true** 才能完成结果任务。
> 
> **影响**`IAsyncResult`：如果实现未完成同步执行但其 `CompletedSynchronously`属性返回 True ，则生成的任务将不会完成。

具有讽刺意味的是，（或令人愤怒地），[`CompletedSynchronously`](http://msdn.microsoft.com/en-us/library/system.iasyncresult.completedsynchronously.aspx)状态页面：

> **实现者注意事项**：接口的大多数实现者`IAsyncResult`不会使用此属性，应返回**false**。

* * *

## Stephen Toub 通过以下方式澄清了这一点：

> [http://msdn.microsoft.com/en-us/library/hh367887%28v=VS.110%29.aspx#core](http://msdn.microsoft.com/en-us/library/hh367887%28v=VS.110%29.aspx#core)上的表格 ，特别是“更改”的描述，是错误的（...） .
> 
> .NET 4.5 对 .NET 进行了更改`FromAsync`，但并不是所有 `IAsyncResult.CompletedSynchronously`实现都必须返回 true：这没有任何意义。变化是`FromAsync`实际上着眼于`IAsyncResult’s CompletedSynchronously`现在（它在 .NET 4 中根本没有看到它），因此它希望它是准确的。因此，如果您有一个错误的`IAsyncResult`实现，`FromAsync`可能仍然可以在 .NET 4 中工作，而对于 .NET 4.5，它不太可能使用有错误的实现。
> 
> 具体来说，如果`IAsyncResult.CompletedSynchronously`返回 就可以了`false`。但是，如果它返回`true`，则`IAsyncResult`实际上必须已同步完成。如果`CompletedSynchronously`返回 `true`但`IAsyncResult`尚未完成，则您有一个需要修复的错误，并且`Task`返回的可能`FromAsync` 无法正确完成。
> 
> 出于性能原因进行了更改。

* * *

## 返回我的问题代码

这是他非常有用的分析，我将其全部包括在内，因为它可能对其他实现者有用`IAsyncResult`：

> 问题似乎是您正在使用的库的实现非常错误`IAsyncResult`；特别是，它执行`CompletedSynchronously`不正确。这是他们的实现：
> 
> ```
> public bool CompletedSynchronously
> {
>     get { return _isCompleted; }
> }
> public bool IsCompleted
> {
>     get { return _isCompleted; }
> } 
> ```
> 
> 它们的`_isCompleted`字段指示异步操作是否已完成，这很好，并且可以从 中返回 this `IsCompleted`，因为该属性旨在指示操作是否完成。但`CompletedSynchronously`不能只返回相同的字段：`CompletedSynchronously`需要返回操作是否同步完成，即是否在调用期间完成`BeginXx`，并且必须始终为给定`IAsyncResult`实例返回相同的值。
> 
> 考虑如何 `IAsyncResult.CompletedSynchronously`使用的标准模式。其目的是允许调用者`BeginXx`继续做后续工作，而不是让回调完成工作。这对于避免堆栈潜水特别重要（想象一下实际上是同步完成的一长串异步操作：如果回调处理了所有工作，那么每个回调将启动下一个操作，其回调将启动下一个操作，但是因为它们同步完成，它们的回调也将作为`BeginXx`方法的一部分同步调用，因此每次调用都会在堆栈上越来越深，直到它可能溢出）：
> 
> ```
> IAsyncResult ar = BeginXx(…, delegate(IAsyncResult iar) =>
> {
>     if (iar.CompletedSynchronously) return;
>     … // do the completion work, like calling EndXx and using its result
> }, …);
> if (ar.CompletedSynchronously)
> {
>     … // do the completion work, like calling EndXx and using its result
> } 
> ```
> 
> 请注意，调用者和回调都使用相同的 `CompletedSynchronously`属性来确定它们中的哪一个运行回调。因此，`CompletedSynchronously`必须始终为此特定实例返回相同的值。否则，很容易导致错误的行为。例如，他们的实现 `CompletedSynchronously`返回了`IsCompleted`. 所以想象以下事件序列：
> 
> *   `BeginXx`被调用并启动异步操作
> *   `BeginXx`返回给它的调用者，它检查`CompletedSynchronously`，这是错误的，因为操作还没有完成。
> *   现在操作完成并调用回调。回调认为这`CompletedSynchronously`是真的，因此不做任何后续工作，因为它假定调用者做了它。
> *   现在没有人运行或将运行回调。
> 
> 简而言之，图书馆有一个错误。如果您更改 `CompletedSynchronously`为返回 true，则您掩盖了此问题，但您可能会导致另一个问题：如果调用者（在您的情况下，`FromAsync`）认为操作已经完成，它将立即调用该`EndXx`方法，该方法将阻塞直到异步操作已完成，因此您已将异步操作转换为同步操作。您是否尝试过始终返回 false`CompletedSynchronously`而不是始终返回 true？

# oracle - 无法使用不同的操作系统用户帐户连接到 oracle

> ID：14889515
> 
> 赞同：0
> 
> 时间：2013-02-15T06:40:55.890
> 
> 标签：oracle, ubuntu-12.04

我已经在 Ubuntu 上使用 OS 用户安装了 Oracle `oracle`。当我以不同的操作系统用户（除了`oracle`）登录时尝试连接到 Oracle 时，出现错误：

```
SQL> connect user1/user1@orcl 
ORA-12154: TNS:could not resolve the connect identifier specified 
```

但是，如果我不提及 Oracle SID，那么我不会收到任何错误：

```
SQL> connect user1/user1
Connected to:
Oracle Database 
SQL> 
```

我已经在用户资料中声明`ORACLE_HOME`了。`SID`但它没有用。有人可以帮我理解这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:36:40.203

从某种意义上说，你真的没有问题。`ORACLE_HOME`您可以使用和环境变量在本地连接`ORACLE_SID`，这很好。

当您使用该`connect user1/user1@orcl`版本时，`orcl`它*不是*您的 SID；如[文档中所述](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve015.htm)，它是“Oracle Net 连接标识符”。

> *连接标识符*
> 
> Oracle 网络连接标识符。确切的语法取决于 Oracle Net 配置。有关详细信息，请参阅 Oracle Net 手册或联系您的 DBA。SQL*Plus 不会提示输入服务名称，但如果您不包含连接标识符，则会使用您的默认数据库。

因此，您通过网络连接进行连接，即使它连接到同一主机，而不是在内部使用 IPC。这样做时甚至不需要`ORACLE_SID`设置，因为它用于 IPC，而不是网络连接的一部分。

现在，连接标识符实际上可能与您的 SID 是相同的字符串，但不一定非要如此。通常，当您使用单个术语时，例如使用文件`orcl`中定义的“网络服务名称” `tnsnames.ora`。（取决于你的[命名方法是如何配置的`sqlnet.ora`](http://docs.oracle.com/cd/E11882_01/network.112/e10835/glossary.htm#BGBIDIII)，这决定了连接标识符是如何解析的；但这仍然是我认为最常见的配置）。

Oracle Net 配置可以作为用户使用[`netca`](http://docs.oracle.com/cd/E11882_01/network.112/e10836/glossary.htm#BGBIFGDG)配置助手进行配置`oracle`，尽管您可以创建一个私有`tnsnames.ora`来覆盖它。

有关连接如何工作和配置的更多信息，请参阅[Oracle Net 管理员指南，有关较短版本的](http://docs.oracle.com/cd/E11882_01/network.112/e10836/intro.htm)[SQL*Plus 用户指南](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_three.htm#i1142625)。

为了使您的`user1/user1@orcl`连接正常工作，您需要一个`tnsnames.ora`类似于以下内容的条目：

```
orcl = 
 (DESCRIPTION = 
   (ADDRESS = (PROTOCOL=tcp)(HOST=my_host)(PORT=1521))
   (CONNECT_DATA = (SERVICE_NAME = orcl))) 
```

...`my_host`您的 Oracle 服务器的 DNS 名称或 IP 地址在哪里，并且`1521`是侦听器配置为运行的端口。（侦听器必须正在运行，您才能以这种方式连接）。也不一定与您的`SERVICE_NAME`SID 相同，但取决于数据库配置；该`lsnrctl status`命令将显示可用的服务名称。

ORA-12154 错误告诉您您根本没有`tnsnames.ora`文件，或者它不包含 alias 条目`orcl`。

正如@a_horse_with_no_name 指出的那样，还有其他形式的连接标识符，您不一定需要`tnsnames.ora`用于网络连接的文件；选项在[这里解释](http://docs.oracle.com/cd/E11882_01/network.112/e10836/concepts.htm#CIAGGGDG)。我只是专注于您尝试使用的那个。您不一定需要使用它们中的任何一个，因为您可以在本地连接。

# android - 从 epub 文件访问 android 上的本地文件

> ID：14889517
> 
> 赞同：2
> 
> 时间：2013-02-15T06:41:03.257
> 
> 标签：android, epub

我正在尝试将 epub 文件链接到本地​​存储在我的设备上的 html 文档。我有一个`<a>`带有 href 的标签：

“文件：//sdcard/mobi/content/file.html”。

这不起作用。epub文件目前位于mobi目录如上图，有没有办法相对访问html文件还是我的href不对？我已经测试了阅读器，如果它托管在我们的本地网络上，它可以打开 file.html 页面。

预先感谢您的任何帮助

# javascript - 使用javascript在Phonegap中找不到变量

> ID：14889519
> 
> 赞同：1
> 
> 时间：2013-02-15T06:41:12.510
> 
> 标签：javascript, android, jquery, cordova, jquery-mobile

当我在浏览器上运行此程序时，我收到失败的响应，但在 android 手机中运行此程序时，我收到参考错误找不到变量**数据**。代码也可以在模拟器中完美运行。帮我

```
 <html>
    <head>
    <script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script>

    <script type="text/javascript" charset="utf-8" src="cordova-2.4.0.js"></script>
    <script type = "text/javascript">
    function getResponse(){

    var url = "http://www.apexweb.co.in/apex_quote/phone_gap/uname_validation.asp?un=9999999999&pwd=123456789&callback=your_callback";

    var head= document.getElementsByTagName('head')[0];
        var script= document.createElement('script');
        script.type= 'text/javascript';
        script.src= url;
        head.appendChild(script);

     your_callback(data);    //here i am getting reference error, can't find  variable data

     }

    function  your_callback(data){

    var st = data.status;
    alert(st);

    }

    </script>
    </head>
    <body>
    <button input type = "button" onClick = "getResponse()"> GetResponse </button>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:43:39.563

无论我从您的代码中了解到什么，我都在其中添加了一些代码，请在下面查看我的答案：

我还添加了数据变量声明并从中获取值。

```
<script type = "text/javascript">

   var data=""; // Declare varible here so that you can get variable in both function.
        function getResponse(){

        var url = "http://www.apexweb.co.in/apex_quote/phone_gap/uname_validation.asp?un=9999999999&pwd=123456789&callback=your_callback";

        var head= document.getElementsByTagName('head')[0];
            var script= document.createElement('script');
            script.type= 'text/javascript';
            script.src= url;
            data = head.appendChild(script); // get your script value in data variable

         your_callback(data);    //here i am getting reference error, can't find  variable data

         }

        function  your_callback(data){

        var st = data.value;
        alert('script value is: '+st);

        }

        </script> 
```

确保您已将 html 文件放入 assest/www 文件夹和此代码：

通过使用 web 视图，您可以使用 java 脚本和 html 页面。

```
public class MainActivity extends Activity {

    WebView webView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        webView = (WebView)findViewById(R.id.webView);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebChromeClient(new WebChromeClient());
        webView.loadUrl("file:///android_asset/www/index.html");
//        webView.loadUrl("WebAppDemo/assets/www/index.html");

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:45:05.870

您的 url 变量的值应与 JSONP [1] 调用一起使用。有独立的帮助程序库 [2] 或 Jquery 选项 [3]。您应该使用其中之一，因为您不必手动使用所有 JSONP 机制。

我还注意到您同时包含 phonegap.js 和 cordova.js。您应该删除第一个。它真的很老了。

[1] [http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

[2] [http://pastebin.com/ADxHdCnB](http://pastebin.com/ADxHdCnB)

[3] [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# php - 在php中通过FTP上传文件

> ID：14889531
> 
> 赞同：1
> 
> 时间：2013-02-15T06:41:43.470
> 
> 标签：php, ftp

我想将文件上传到多个 FTP。但它显示错误：

`ftp_put() [function.ftp-put]: php_connect_nonb() failed: Operation now in progress (115)`.

看看我的代码

```
foreach ($channel_details as $channel_list)
{

    if(isset($connection))
    unset($connection);
    if(isset($login))
    unset($login);
    if(isset($upload))
    unset($upload);

    $server = $channel_list['channel'];
    $ftp_user_name = $channel_list['username'];
    $ftp_user_pass = $channel_list['password'];

    $source='file_push.html';

   $dest='/public_html/'.$path.$file;

    $connection = ftp_connect($server) or die("Couldn't connect to ftp server");

    $login = ftp_login($connection, $ftp_user_name, $ftp_user_pass);

    // turn passive mode on
    ftp_pasv($connection, true);

    if (!$connection || !$login) { die('Connection attempt failed!'); }

    $upload = ftp_put($connection, $dest, $source, FTP_ASCII);
    if (!$upload) { echo 'FTP upload failed!'; }

    ftp_close($connection); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:16:05.740

您的代码似乎是正确的。也许有防火墙问题？

见这里：[https ://bugs.php.net/bug.php?id=47110](https://bugs.php.net/bug.php?id=47110)

# sql - 在 where 子句中使用 case 语句时优化查询

> ID：14889535
> 
> 赞同：0
> 
> 时间：2013-02-15T06:41:57.457
> 
> 标签：sql, sql-server-2008

我有以下 sql 查询，当我运行这个**没有** `where`正在使用的子句时，它在 1 秒内运行完美，但是当我运行这个正在使用的子句时，`case statements` 它花费了太长时间`where clause``case statements`

所以问题是我如何优化它`where clause`以使其完美运行。

```
 declare @JailCode int =141 
            declare @PrisonerType nvarchar(4)='All'  
            declare @Location nvarchar(4)='All'    
            declare @DATE1 smalldatetime='01/01/2009'  
            declare @DATE2 smalldatetime='12/31/2009'       
            declare @Caste nvarchar(10)='All'    
            declare @Religion nvarchar(10) ='All'   
            declare @Occupation int=0  
            declare @Qualification int=0  
            declare @Tendency nvarchar(10)='All'    
            declare @Risk nvarchar(10)='All'    
            declare @Annual nvarchar(10)='All'    
            declare @Marital nvarchar(10)='All'         
            declare @Sex nvarchar(10)='All'    
            declare @Nationality int=0  
            declare @Offence int=0  

    SELECT PT.P_Name as Prisoner_Type,      
    PE.PID_No,PE.Jail_Code,PE.Entry_Year,Convert(varchar(10),PE.Admission_Date,103) Admission_Date,PE.JID_No,Convert(varchar(10),PE.Release_Date,103) Release_Date ,  
    PM.Prisoner_Name, SUBSTRING(PM.Father_Name, 0, 17)as Father_Name, PM.Mother_Name,PM.Spouse_Name,PM.Caste_Code,
    PM.Religion_Code,PM.Occupation_Code,PM.Qualification,PM.Tendency_Type,PM.Risk_Type,PM.Annual_Income_Code,PM.Marital_Status_Code,PM.Id_Mark,
    PM.Sex_Code,PM.Nationality_Code,PM.Off_Code,PM.Present_Add, Age as age ,PM.Permt_Add, LS.Location  AS Location 
    ,NT.Nation_Name , JT.Jail_Address
    --,PrisonerPicture.Photo
    ,OT.Offence_Name,QT.Qualification as quali ,IT.Annual_Income_Range,CT.Caste_Name
    ,RT.Religion_Name,MT.Marital_Status_Name,OFT.Occ_Name AS Occupation
    , STUFF((    SELECT ', ' + cc.Act_Sec AS [text()]

    FROM CourtCases cc
    WHERE
    cc.PID_NO = PE.PID_NO and (',' + Replace(pe.Case_No,'$',',') +',' LIKE '%,' + CONVERT(VARCHAR, cc.Case_No) + ',%') group by cc.Act_Sec
    FOR XML PATH('')     ), 1, 1, '' )

    AS [Act_Sec]
    , STUFF((    SELECT ', ' + Convert(varchar(10),CC.Fir_Date,103) AS [text()]
    FROM CourtCases cc
    WHERE
    cc.PID_NO = PE.PID_NO and (',' + Replace(pe.Case_No,'$',',') +',' LIKE '%,' + CONVERT(VARCHAR, cc.Case_No) + ',%') group by  Convert(varchar(10),CC.Fir_Date,103) 
    FOR XML PATH('')     ), 1, 1, '' )

    AS [Fir_Date]

    ,STUFF((    SELECT ', ' + FIR_No AS [text()]
    FROM CourtCases cc
    WHERE
    cc.PID_NO = PE.PID_NO and (',' + Replace(pe.Case_No,'$',',') +',' LIKE '%,' + CONVERT(VARCHAR, cc.Case_No) + ',%') group by FIR_No
    FOR XML PATH('')     ), 1, 1, '' )

    AS [FIR_No]

    ,  STUFF((    SELECT ', ' + ct.Court_Name AS [text()]

    FROM CourtCases cc inner join Court_Tab as ct 
    ON cc.Court_Code=convert(nvarchar(50),ct.Court_Code)
    WHERE
    cc.PID_NO = PE.PID_NO and (',' + Replace(pe.Case_No,'$',',') +',' LIKE '%,' + CONVERT(VARCHAR, cc.Case_No) + ',%') group by  ct.Court_Name
    FOR XML PATH('')     ), 1, 1, '' )
    AS [Court_Name]

    , STUFF((    SELECT ', ' + pt.PS_Name AS [text()]                      
    FROM CourtCases cc inner join PS_Tab as pt 
    ON convert(nvarchar(50),cc.PS_Code)=convert(nvarchar(50),pt.PS_Code)
    WHERE
    cc.PID_NO = PE.PID_NO and (',' + Replace(pe.Case_No,'$',',') +',' LIKE '%,' + CONVERT(VARCHAR, cc.Case_No) + ',%') group by pt.PS_Name
    FOR XML PATH('')     ), 1, 1, '' )

    AS [PS_Name]

    FROM PrisonMaster AS PM 
    INNER  JOIN   PrisonerEntry     AS PE        ON PE.PID_No = PM.PID_No  AND   PE.Jail_Code=@JailCode

    INNER   JOIN  Nation_Tab        AS NT        ON PM.Nationality_Code = NT.Nation_Code
    INNER JOIN  Sex_Tab         AS S         ON PM.Sex_Code = S.Sex_Code

    INNER  JOIN  Jail_Tab       AS JT        ON PE.Jail_Code = JT.Jail_Code
    INNER   JOIN  Prisoner_Tab   AS PT        ON PE.Prisoner_Type=PT.P_Type
    INNER  JOIN  Loc_Status     AS LS        ON PE.Location=LS.Loc_Status
    left JOIN   Offence_Tab AS    OT        ON OT.Offence_Code=PM.Occupation_Code
    left JOIN Qualification_Tab AS QT       ON QT.Q_Code=PM.Qualification
    left JOIN Income_Tab AS IT               ON IT.Annual_Income_Code=PM.Annual_Income_Code
    left JOIN Caste_Tab AS CT                ON CT.Caste_Code=PM.Caste_Code
    LEFT JOIN Religion_Tab AS RT             ON RT.Religion_Code=PM.Religion_Code
    LEFT JOIN Marital_Tab AS MT              ON MT.Marital_Status_Code=PM.Marital_Status_Code
    LEFT JOIN Occupation_Tab AS OFT          ON     OFT.Occ_Code=PM.Occupation_Code
    WHERE   

    PE.Admission_Date BETWEEN  @DATE1  AND  @DATE2 

    AND isnull(PE.Prisoner_Type,0) =CASE WHEN @PrisonerType!='All' THEN @PrisonerType WHEN @PrisonerType ='All' THEN isnull(PE.Prisoner_Type,0) END

    AND isnull(PE.Location,0)=CASE WHEN @Location!='All' THEN @Location WHEN @Location ='All' THEN isnull(PE.Location,0) END

    AND isnull(PM.Caste_Code,0)=CASE WHEN @Caste!='All' THEN @Caste WHEN @Caste ='All' THEN isnull(PM.Caste_Code,0) END

    AND isnull(PM.Religion_Code,0)=CASE WHEN @Religion!='All' THEN @Religion WHEN @Religion ='All' THEN isnull(PM.Religion_Code,0) END

    AND isnull(PM.Occupation_Code,0)=CASE WHEN @Occupation!=0 THEN @Occupation WHEN @Occupation =0 THEN isnull(PM.Occupation_Code,0) END

    AND isnull(PM.Qualification,0)=CASE WHEN @Qualification!=0 THEN @Qualification WHEN @Qualification =0 THEN isnull(PM.Qualification,0) END

    AND isnull(PM.Tendency_Type,0)=CASE WHEN @Tendency!='All' THEN @Tendency WHEN @Tendency ='All' THEN isnull(PM.Tendency_Type,0) END

    AND isnull(PM.Risk_Type,0)=CASE WHEN @Risk!='All' THEN @Risk WHEN @Risk ='All' THEN isnull(PM.Risk_Type,0) END

    AND isnull(PM.Annual_Income_Code,0)=CASE WHEN @Annual!='All' THEN @Annual WHEN @Annual ='All' THEN isnull(PM.Annual_Income_Code,0) END

    AND isnull(PM.Marital_Status_Code,0)=CASE WHEN @Marital!='All' THEN @Marital WHEN @Marital ='All' THEN isnull(PM.Marital_Status_Code,0) END

    AND isnull(PM.Sex_Code,0)=CASE WHEN @Sex!='All' THEN @Sex WHEN @Sex ='All' THEN isnull(PM.Sex_Code,0) END

    AND isnull(PM.Nationality_Code,0)=CASE WHEN @Nationality!=0 THEN @Nationality WHEN @Nationality =0 THEN isnull(PM.Nationality_Code,0) END

    AND isnull(PM.Off_Code,0)=CASE WHEN @Offence!=0 THEN @Offence WHEN @Offence =0 THEN isnull(PM.Off_Code,0) END

    ORDER BY  PE.PID_No 
```

我刚从我的动态 sql 同事那里得到了一个解决方案，但我不想使用那个。我不喜欢将查询写成字符串然后执行它。如果我必须这样做，那么为什么我要使用存储过程？并且只有动态 sql 是我可以使用的选项，或者可以做任何其他事情。

# javascript - 如何打破递归函数内的for循环并在Javascript中返回？

> ID：14889537
> 
> 赞同：2
> 
> 时间：2013-02-15T06:42:00.327
> 
> 标签：javascript, function, recursion, return

我正在尝试比较两个对象的键，属性值无关紧要。

```
var obj1 = {
    foo: {
        abc: "foo.abc",
    },
    bar: {
        aaa: {
            bbb: "bar.aaa.bbb" // <-- difference
        }
    }
};

var obj2 = {
    foo: {
        abc: "foo.abc",
    },
    bar: {
        aaa: {
            ccc: "bar.aaa.ccc" // <-- difference
        }
    }
}; 
```

```
// function should return true if properties are identical, false otherwise
function compareObjProps(obj1, obj2) {
    for(var prop in obj1) {

        // when comparing bar.aaa.bbb and bar.aaa.ccc
        // this does get logged, but the function doesn't return false
        if(!obj2.hasOwnProperty(prop)) {
            console.log("mismatch found");
            return false;
        }

        if(typeof(obj1[prop]) === "object") {
            compareObjProps(obj1[prop], obj2[prop]);
        }
    }

    // this always returns
    return true;
} 
```

似乎`return false`不是从顶层函数返回，而是从递归函数返回。

那么，当整个匹配函数执行完毕后，如何返回 false 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T06:43:52.023

你错过了回报：

```
 if(typeof(obj1[prop]) === "object"
        && !compareObjProps(obj1[prop], obj2[prop]))
    {
       return false;
    } 
```

否则递归调用的结果将被完全忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T06:53:13.693

试试这个：

```
function compareObjProps(obj1, obj2) {
    var result = true;
    for (var prop in obj1) {
        if (obj1.hasOwnProperty(prop) && !obj2.hasOwnProperty(prop)) {
            console.log("mismatch found");
            result = false;
        } else if (typeof(obj1[prop]) === "object") {
            result = compareObjProps(obj1[prop], obj2[prop]);
        }

        if (!result) {
            break;
        }
    }

    return result;
} 
```

[http://jsfiddle.net/gSYfy/4/](http://jsfiddle.net/gSYfy/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:52:41.740

是的，函数 B 调用的函数 A 不能告诉 B 返回。有些人建议返回递归调用的结果，但这不会给你正确的结果，因为它会导致程序返回它找到的第一个子对象是否相同，而不是如果所有对象都相同. 我建议你做这个修改：

```
if(typeof(obj1[prop]) === "object") {
   if(!compareObjProps(obj1[prop], obj2[prop])){
      return false;
   }
} 
```

这将使您的程序根据需要传播“假”，但如果结果为“真”，则使其继续运行。

# wpf - 在带有 HierarchicalDataTemplate 的 WPF TreeView 中使用命令

> ID：14889544
> 
> 赞同：1
> 
> 时间：2013-02-15T06:42:27.940
> 
> 标签：wpf, treeview, command, hierarchicaldatatemplate

有没有办法在树视图中使用带有 HierarchicalDataTemplate 的命令，以便我可以对单击树视图中的项目做出反应？如果有的话，我更喜欢没有代码隐藏的解决方案。

这是我的树视图：

```
<TreeView ItemsSource="{Binding Main.TreeItems}">
    <TreeView.ItemTemplate>                     
        <HierarchicalDataTemplate ItemsSource="{Binding Path=Children}">
            <TextBlock Text="{Binding Path=Header}" />
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>                
</TreeView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:52:18.027

在您的项目（ViewModel）上提供 ICommand 类型的属性并绑定到该属性。所以你的项目类将是这样的：

```
class MyTreeItem
{
   public MyTreeItem()
   {
      this.SomeCommand = /* create command here */ null;
      this.Children = new ObservableCollection<MyTreeItem>();
   }

   public ICommand SomeCommand { get; private set; }

   public ObservableCollection<MyTreeItem> Children { get; private set; }
} 
```

然后，您可以在 xaml 中编写：

```
<TreeView ItemsSource="{Binding Main.TreeItems}">
    <TreeView.ItemTemplate>                     
       <HierarchicalDataTemplate ItemsSource="{Binding Path=Children}">
            <TextBlock Text="{TemplateBinding Header}" />
            <Button Text="My Command" Command="{TemplateBinding SomeCommand}" />
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>                
</TreeView> 
```

我认为这应该有效，至少上次我使用它时类似:)

# oracle - oracle 中的 AWR 报告

> ID：14889550
> 
> 赞同：4
> 
> 时间：2013-02-15T06:42:45.520
> 
> 标签：oracle

我正在尝试在 oracle 11G 中生成 AWR 报告。在创建时，我收到一些错误消息。错误在下面提到

> 使用报告名称 awrrpt_1_2504_2709.html。从表中选择输出（dbms_workload_repository.awr_report_html(:dbid, * ERROR at line 1: ORA-00904: : invalid identifier

我用于生成 AWR 报告的步骤

> @$ORACLE_HOME/rdbms/admin/awrrpt.sql
> 
> 输入报告类型的值：html
> 
> 输入 begin_snap 的值：2504 指定的开始快照 ID：2504
> 
> 输入 end_snap 的值：2709 指定的结束快照 ID：2709

请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T07:01:30.247

您用于生成 AWR 的用户不得对`DBMS_WORKLOAD_REPOSITORY`包具有执行权限。

引用 Oracle 文档，

> ..要调用这些过程，用户必须被授予 DBA 角色。

这是`GRANTS`生成 AWR 所需的列表

```
GRANT SELECT ON SYS.V_$DATABASE TO MY_USER;

GRANT SELECT ON SYS.V_$INSTANCE TO MY_USER;

GRANT EXECUTE ON SYS.DBMS_WORKLOAD_REPOSITORY TO MY_USER;

GRANT SELECT ON SYS.DBA_HIST_DATABASE_INSTANCE TO MY_USER;

GRANT SELECT ON SYS.DBA_HIST_SNAPSHOT TO MY_USER;

GRANT ADVISOR TO MY_USER; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-17T18:23:37.253

我发现 Oracle 18c 抛出了同样的错误，我以 sys 身份连接并使用 sysdba 角色。

# vb.net - 同时捕获多个异常

> ID：14889560
> 
> 赞同：13
> 
> 时间：2013-02-15T06:44:04.740
> 
> 标签：vb.net, exception, try-catch

有时人们想对两种不同类型的异常做同样的事情。我进行了搜索，但没有找到任何适用于 VB.NET 的内容。

简单的例子：

```
Try
    '...
Catch ex As Net.WebException
    'Do something
Catch ex As Net.CookieException
    'Do the same
Catch ex As Exception
    '...
End Try 
```

我想知道是否有一种方法可以一次捕获两个异常而无需重复代码。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-15T06:51:35.390

正如[在一次捕获多个异常中所见？](https://stackoverflow.com/questions/136035/catch-multiple-exceptions-at-once/136114#136114)可以这样做：

```
Catch ex As Exception When TypeOf ex Is FormatException OrElse TypeOf ex Is OverflowException 
```

# c++ - 如何以编程方式在 CMFCStatusbar 中显示窗格的工具提示？

> ID：14889561
> 
> 赞同：1
> 
> 时间：2013-02-15T06:44:19.057
> 
> 标签：c++, mfc, tooltip

我有一个`CMFCStatusBar`指示应用程序状态的图标。随着状态的变化，我需要将更改的状态显示几秒钟作为工具提示。如何以编程方式显示这个？

# sql - Microsoft Sync Framework 未将 Azure 数据库与本地 SQL Server 2008 同步

> ID：14889565
> 
> 赞同：0
> 
> 时间：2013-02-15T06:44:40.393
> 
> 标签：sql, database, microsoft-sync-framework

我正在使用 Microsoft Sync 框架将 Azure 数据库与本地 SQL Server 2008 数据库同步。一切正常。但我有一个小问题，如下所述

我正在以一种方式（即）从 Azure DB 同步到本地 DB。Azure DB 上的插入/更新/删除与本地数据库同步。但是我尝试使用正常的更新语句手动更新本地数据库中的记录。我还用 Azure DB 中的相应新值更新了相同的记录。现在本地数据库中的记录没有从 Azure 数据库中获取更新的值。只有在本地数据库中手动更新记录后才会出现此问题。

请帮助任何人......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:03:36.737

那是因为你现在遇到了冲突。当行的两个副本在两端都更新时，您最终会发生冲突，您需要告诉 Sync Framework 如何解决它（例如，保留本地副本或覆盖它）

请参阅：[如何：处理数据库同步的数据冲突和错误](http://technet.microsoft.com/en-au/subscriptions/ff928697.aspx)

# html - 在允许另一个 ajax 调用之前等待 jQuery ajax 响应完成更新页面

> ID：14889570
> 
> 赞同：2
> 
> 时间：2013-02-15T06:45:10.167
> 
> 标签：html, jquery

我已经阅读了很多关于此的帖子，但仍然无法解决我的问题。我看过 jQuery.when 但不知道如何使用它。我通过 ajax 从服务器获取数据，然后更新页面。有时，可能需要几秒钟，具体取决于返回的数据量。我不希望在页面上加载所有 html 之前运行相同的 ajax 函数。那可能吗？

我有一个计时器来运行一个调用 ajax 请求的函数。

```
setInterval( "update()", 25000 ); 
```

这是更新函数里面的ajax

```
 $.ajax({
                            type: "POST",
                            url: "/ajax/modify.php",
                            data: "id="+ id +"& action="+ act,
                            success: function(response){
                                //update the html on the page
                            }           
                    }); 
```

用户可以通过单击链接获得更多帖子。问题是，如果他们单击该链接以获取更多帖子并且计时器立即发生，它会刷新页面并中断用户请求并使用之前的内容重新加载 div 容器。所以我需要它等到响应完成并且页面已经更新，然后才能允许更多请求。

一个值得赞赏的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:00:27.657

JQuery 的 ajax 方法返回一个 Promise，您可以使用它来附加回调。您可以将此承诺存储到变量中。在函数成功/失败时，您可以清除变量。这样您就知道请求当前是否处于活动状态。只需确保变量在函数范围之外，否则它不会对您有任何帮助。例如：

```
var currentRequest = null;

function doUpdate() {
    // don't do anything if there's an active request
    if (currentRequest)
        return;

    currentRequest = $.ajax({
        type: "POST",
        url: "/ajax/modify.php",
        data: "id="+ id +"& action="+ act
    }).then(function(response) {
        // do your UI updates here.
    }).always(function() {
        // whether the call succeeds or not, still clear out the request
        // so that the next call into the function makes a new request
        currentRequest = null;
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:54:43.483

看看这个 SO question [jQuery deferreds and promises - .then() vs .done()](https://stackoverflow.com/questions/5436327/jquery-deferreds-and-promises-then-vs-done)

[jQuery 延迟对象](http://api.jquery.com/category/deferred-object/)

* * *

这样做`async:false`会杀死它的目的，您可以在第一个成功回调中触发下一个 ajax 请求，但这不是一个干净的方法 IMO

# jquery - jquery mobile data-theme 属性不能到处使用

> ID：14889571
> 
> 赞同：1
> 
> 时间：2013-02-15T06:45:13.950
> 
> 标签：jquery, css, jquery-mobile, mobile

使用 jquerymobie 主题滚轮我发现了一些问题，我不知道如何克服。

问题 1：当我将 data-theme 属性定义到 div 的开头时，例如`<div data-role="page" data-theme="a">`，如果我想在 div 中放置另一个主题，如下例所示，那么它就不起作用了。例如：

```
<div data-role="page" data-theme="a">
        <div data-theme="e">
                Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard.
        </div>
</div> 
```

问题 2：就我而言，我必须使用`class="ui-grid-a"`. 我知道 jquerymobile`<filedset>`元素中已经有单选按钮，但在我的情况下，这种设计不适合。但是，尽管我在包装网格 div 中指定了默认主题，但我的单选按钮需要主题“e”颜色，例如：

```
<div data-role="page" data-theme="a">
            <div data-role="header" data-position="inline" data-theme="b">
                <h1>It Worked!</h1>
            </div>

            <div class="ui-grid-a" data-theme="e">
                <form>
                    <div class="ui-block-a"><label class="border-r"><input  type="checkbox" name="checkbox-0" /> BLACK </label></div>
                    <div class="ui-block-b"><label class="border-r"><input type="checkbox" name="checkbox-0" /> BLACK </label></div>
                </form>
            </div>
        </div> 
```

但它似乎不起作用检查我尝试过的在线示例[http://jsfiddle.net/SmYZd/](http://jsfiddle.net/SmYZd/)。但是，如果我将主题指定给特定的表单元素，它会起作用，例如`<div class="ui-block-a"><label class="border-r"><input type="checkbox" data-theme="e" name="checkbox-0" /> BLACK </label></div>`参见示例表单[http://jsfiddle.net/EEFQR/](http://jsfiddle.net/EEFQR/)。

任何人都可以让我知道这件事吗？我知道我可以通过简单地将相似的颜色添加到其他 css 来实现我的颜色，但是在 jquerymobile css 中我们已经内置了很多 css。我只需要知道为什么我们不能`data-theme`在任何元素上使用属性来满足我们的愿望？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:32:59.293

**问题一：**

您应该指定`data-role`以便调用`data-theme`.

检查这个：http: [//jsfiddle.net/EEFQR/](http://jsfiddle.net/EEFQR/)

**问题 2：**

我不确定你的问题是什么。`ui-grid`或调用的设计`data-theme`？

# java - Android 2.1 中的正则表达式负前瞻

> ID：14889578
> 
> 赞同：2
> 
> 时间：2013-02-15T06:46:01.127
> 
> 标签：java, android, regex, negative-lookahead, android-2.0-eclair

正则表达式，专门用于负前瞻模式，在 Android 2.1 代码中似乎无法正常工作。

请参见下面的示例：

```
private String parseString(String regex, String raw) {
    StringBuffer sb = new StringBuffer();
    Matcher m = Pattern.compile(regex).matcher(raw);
    m.matches();
    if (m.find()) sb.append(m.group()); 
    return sb.toString();
}

// Using the helper method above:
// Looking for 4-digit numeric strings within a text
String regex = "(\\d{4})(?!\\d)";
String text = "Looking for a 4-digit string 1234 in here!";
Log.i("Test", "[" + parseString(regex, text) + "]"); 
```

在 Android 2.1 上，结果如下：

```
I/Test (  451): [] 
```

在 Android 2.2 上，它是：

```
I/Test (  451): [1234] 
```

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:52:30.897

Android 的正则表达式中有一个错误，特别是针对负前瞻模式。

官方票在 Android 2.2 (Froyo) 中创建和修复： [http ://code.google.com/p/android/issues/detail?id=17159](http://code.google.com/p/android/issues/detail?id=17159)

解决方案：

(a) 如果需要，请勿使用 Android 2.1；或者

(b) 在没有负模式的情况下重建你的正则表达式（可能会变得更脏，但应该可以）

# php - 结果超过 30 项时 jEasyUI 不呈现

> ID：14889590
> 
> 赞同：1
> 
> 时间：2013-02-15T06:47:15.443
> 
> 标签：php, ajax, json, jquery-easyui

请帮我调试下面的代码。这是一个简单的搜索功能，我试图通过`jEasyui`数据网格显示结果。如果搜索结果低于 30 项，则它可以工作。问题是，如果查询结果有超过 30 个匹配，则 json 文件会完整生成，但数据网格不会呈现。

```
<?php
$ip =   $_SERVER['REMOTE_ADDR'];
$DBresult = $ip."DBtoJson.json";
unlink($DBresult);

if(isset($_POST['submit'])){

$cat = $_POST['v1'];
$sch = $_POST['v2'];

$username="root";
$password="********";
$database="dbfldp";
mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
// $query="SELECT * FROM supportticket ORDER BY support_ticket_number ASC";
$query="SELECT * FROM supportticket WHERE ".$cat." REGEXP '".$sch."' ORDER BY support_ticket_number ASC";
$result=mysql_query($query);

$num=mysql_numrows($result);
mysql_close();

$DBresult = $ip."DBtoJson.json";
$fh = fopen($DBresult,'w') or die ("can't open file");

$stringdata = ' {"total":"'.$num.'","rows":[ ';
fwrite($fh, $stringdata);

$i=0;
while ($i < $num) {

$f1=mysql_result($result,$i,"support_ticket_number");
$f2=mysql_result($result,$i,"date_filed");
$f3=mysql_result($result,$i,"time_filed");
$f4=mysql_result($result,$i,"duration");
$f5=mysql_result($result,$i,"name");
$f6=mysql_result($result,$i,"department");
$f7=mysql_result($result,$i,"markers_error_tag");
$f8=mysql_result($result,$i,"venue");
$f9=mysql_result($result,$i,"racedate");
$f10=mysql_result($result,$i,"racenumber");
$f11=mysql_result($result,$i,"activities_before_occurance");
$f12=mysql_result($result,$i,"running_programs");
$f13=mysql_result($result,$i,"problem_encountered");
$f14=mysql_result($result,$i,"encountered_before");
$f15=mysql_result($result,$i,"support_person_tag");
$f16=mysql_result($result,$i,"support_comment");
$f17=mysql_result($result,$i,"solution");
$f18=mysql_result($result,$i,"resolved");
$f19=mysql_result($result,$i,"watchlist");
if($i<($num - 1)){$comma=",";}
if($i>=($num - 1)){$comma="";}
$stringdata = '
{
"ticketno":"'.$f1.'",
"datefiled":"'.$f2.'",
"timefiled":"'.$f3.'",
"duration":"'.$f4.'",
"name":"'.$f5.'",
"department":"'.$f6.'",
"reportedas":"'.$f7.'",
"racevenue":"'.$f8.'",
"racedate":"'.$f9.'",
"racenumber":"'.$f10.'",
"experiencedwhile":"'.$f11.'",
"runningapps":"'.$f12.'",
"pencountered":"'.$f13.'",
"historical":"'.$f14.'",
"findings":"'.$f15.'",
"supportcomment":"'.$f16.'",
"actioncaken":"'.$f17.'",
"resolved":"'.$f18.'",
"watchlist":"'.$f19.'"
}'.$comma.'
';
fwrite($fh, $stringdata);
$i++;
}

$stringdata = ' ]}';
fwrite ($fh, $stringdata);
fclose($fh);
if (file_exists($DBresult)) {
?>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Error DB Entries</title>
<link rel="stylesheet" type="text/css" href="jquery-easyui-1.3.1/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="jquery-easyui-1.3.1/themes/icon.css">
<link rel="stylesheet" type="text/css" href="jquery-easyui-1.3.1/demo/demo.css">
<script type="text/javascript" src="jquery-easyui-1.3.1/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="jquery-easyui-1.3.1/jquery.easyui.min.js"></script>

<script>

    $(function(){
        $('#tt').datagrid({
            url: '<?php echo $DBresult; ?>',
            title: 'Error Reports',
            autoRowHeight: false,
            fitColumns: true,
            width: 'auto',
            rownumbers: true,
            columns:[[
                {field:'ticketno',title:'Ticket Number',align:'center', sortable:'true'},
                {field:'datefiled',title:'Date Filed',align:'center', sortable:'true'},
                {field:'timefiled',title:'Time Filed',align:'center', sortable:'true'},
                {field:'duration',title:'Duration',align:'center', sortable:'true'},
                {field:'name',title:'Name',align:'center', sortable:'true', hidden: 'true'},
                {field:'department',title:'Department',align:'center', sortable:'true'},
                {field:'reportedas',title:'Reported as:',align:'center', sortable:'true'},
                {field:'racevenue',title:'Race Venue',align:'center', sortable:'true'},
                {field:'racedate',title:'Race Date',align:'center', sortable:'true'},
                {field:'racenumber',title:'R.no#',align:'center', sortable:'true'},
                {field:'experiencedwhile',title:'Experienced while marker is:',align:'center', sortable:'true'},
                {field:'runningapps',title:'Running Apps:',align:'center', sortable:'true'},
                {field:'pencountered',title:'Problem Encountered:',align:'center', sortable:'true'},
                {field:'historical',title:'With History?:',align:'center', sortable:'true'},
                {field:'findings',title:'Findings:',align:'center', sortable:'true'},
                {field:'supportcomment',title:'Support Comment',align:'center', sortable:'true'},
                {field:'actioncaken',title:'Action Taken',align:'center', sortable:'true'},
                {field:'resolved',title:'Resolved?',align:'center', sortable:'true'},
                {field:'watchlist',title:'Watchlist?',align:'center', sortable:'true'}
            ]],
            onHeaderContextMenu: function(e, field){
                e.preventDefault();
                if (!$('#tmenu').length){
                    createColumnMenu();
                }
                $('#tmenu').menu('show', {
                    left:e.pageX,
                    top:e.pageY
                });
            }
        });
    });
    function createColumnMenu(){
        var tmenu = $('<div id="tmenu" style="width:100px;"></div>').appendTo('body');
        var fields = $('#tt').datagrid('getColumnFields');
        for(var i=0; i<fields.length; i++){
            $('<div iconCls="icon-ok"/>').html(fields[i]).appendTo(tmenu);
        }
        tmenu.menu({
            onClick: function(item){
                if (item.iconCls=='icon-ok'){
                    $('#tt').datagrid('hideColumn', item.text);
                    tmenu.menu('setIcon', {
                        target: item.target,
                        iconCls: 'icon-empty'
                    });
                } else {
                    $('#tt').datagrid('showColumn', item.text);
                    tmenu.menu('setIcon', {
                        target: item.target,
                        iconCls: 'icon-ok'
                    });
                }
            }
        });
    }

</script>
</head>
<body>
<form name="jho" action="<?php echo $_SERVER["PHP_SELF"];?>" method="post" enctype="multipart/form-data">
<input type="hidden" name="v1">
<select class="easyui-combobox" name="v1" style="width:175px;"> 
    <option value="*">Select A Search Category</option> 
    <option value="support_ticket_number">Ticket Number</option> 
    <option value="date_filed">Date Filed</option> 
    <option value="time_filed">Time Filed</option>
    <option value="duration">Duration</option>
    <option value="name">Name</option>
    <option value="department">Department</option>
    <option value="markers_error_tag">Reported As:</option>
    <option value="venue">Venue</option>
    <option value="racedate">Race Date</option>
    <option value="racenumber">Race Number</option>
    <option value="activities_before_occurance">Occured while:</option>
    <option value="running_programs">Running Apps</option>
    <option value="problem_encountered">Problem Encountered</option>
    <option value="encountered_before">With History?</option>
    <option value="support_person_tag">Findings:</option>
    <option value="support_comment">Support Comment</option>
    <option value="solution">Action Taken</option>
    <option value="resolved">Resolved?</option>
    <option value="watchlist">Watchlist?</option>
</select>
<input type="text" name="v2">
<input type="submit" value="Search" name='submit'>
</form>

<div class="demo-info" style="margin-bottom:10px">
    <div class="demo-tip icon-tip"></div>
    <div>Right click the header of datagrid to show context menu.</div>
</div>  
<table id="tt"></table>
</body>
</html>
<?php
}
} 
else
{?>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Error DB Entries</title>
<link rel="stylesheet" type="text/css" href="jquery-easyui-1.3.1/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="jquery-easyui-1.3.1/themes/icon.css">
<link rel="stylesheet" type="text/css" href="jquery-easyui-1.3.1/demo/demo.css">
<script type="text/javascript" src="jquery-easyui-1.3.1/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="jquery-easyui-1.3.1/jquery.easyui.min.js"></script>
<script>
    $(function(){
        $('#tt').datagrid({
            url: '<?php echo $ip."DBtoJson.json"; ?>',
            title: 'Error Reports',
            width: 'auto',
            fitColumns: true,
            rownumbers: true,
            singleSelect: true,
            autoRowHeight: false,
            columns:[[
                {field:'ticketno',title:'Ticket Number',align:'center', sortable:'true'},
                {field:'datefiled',title:'Date Filed',align:'center', sortable:'true'},
                {field:'timefiled',title:'Time Filed',align:'center', sortable:'true'},
                {field:'duration',title:'Duration',align:'center', sortable:'true'},
                {field:'name',title:'Name',align:'center', sortable:'true'},
                {field:'department',title:'Department',align:'center', sortable:'true'},
                {field:'reportedas',title:'Reported as:',align:'center', sortable:'true'},
                {field:'racevenue',title:'Race Venue',align:'center', sortable:'true'},
                {field:'racedate',title:'Race Date',align:'center', sortable:'true'},
                {field:'racenumber',title:'R.no#',align:'center', sortable:'true'},
                {field:'experiencedwhile',title:'Experienced while marker is:',align:'center', sortable:'true'},
                {field:'runningapps',title:'Running Apps:',align:'center', sortable:'true'},
                {field:'pencountered',title:'Problem Encountered:',align:'center', sortable:'true'},
                {field:'historical',title:'With History?:',align:'center', sortable:'true'},
                {field:'findings',title:'Findings:',align:'center', sortable:'true'},
                {field:'supportcomment',title:'Support Comment',align:'center', sortable:'true'},
                {field:'actioncaken',title:'Action Taken',align:'center', sortable:'true'},
                {field:'resolved',title:'Resolved?',align:'center', sortable:'true'},
                {field:'watchlist',title:'Watchlist?',align:'center', sortable:'true'}
            ]],
            onHeaderContextMenu: function(e, field){
                e.preventDefault();
                if (!$('#tmenu').length){
                    createColumnMenu();
                }
                $('#tmenu').menu('show', {
                    left:e.pageX,
                    top:e.pageY
                });
            }
        });
    });
    function createColumnMenu(){
        var tmenu = $('<div id="tmenu" style="width:100px;"></div>').appendTo('body');
        var fields = $('#tt').datagrid('getColumnFields');
        for(var i=0; i<fields.length; i++){
            $('<div iconCls="icon-ok"/>').html(fields[i]).appendTo(tmenu);
        }
        tmenu.menu({
            onClick: function(item){
                if (item.iconCls=='icon-ok'){
                    $('#tt').datagrid('hideColumn', item.text);
                    tmenu.menu('setIcon', {
                        target: item.target,
                        iconCls: 'icon-empty'
                    });
                } else {
                    $('#tt').datagrid('showColumn', item.text);
                    tmenu.menu('setIcon', {
                        target: item.target,
                        iconCls: 'icon-ok'
                    });
                }
            }
        });
    }

          function changeP(pos){  
        $('#tt').datagrid('loadData',[]);  
        $('#tt').datagrid({pagePosition:pos});  
    }  
</script>
</head>
<body>

<form name="jho" action="<?php echo $_SERVER["PHP_SELF"];?>" method="post" enctype="application/x-www-form-urlencoded">
<input type="hidden" name="v1">
<select class="easyui-combobox" name="v1" style="width:175px;">
    <option value="*">Select A Search Category</option>
    <option value="support_ticket_number">Ticket Number</option> 
    <option value="date_filed">Date Filed</option> 
    <option value="time_filed">Time Filed</option>
    <option value="duration">Duration</option>
    <option value="name">Name</option>
    <option value="department">Department</option>
    <option value="markers_error_tag">Reported As:</option>
    <option value="venue">Venue</option>
    <option value="racedate">Race Date</option>
    <option value="racenumber">Race Number</option>
    <option value="activities_before_occurance">Occured while:</option>
    <option value="running_programs">Running Apps</option>
    <option value="problem_encountered">Problem Encountered</option>
    <option value="encountered_before">With History?</option>
    <option value="support_person_tag">Findings:</option>
    <option value="support_comment">Support Comment</option>
    <option value="solution">Action Taken</option>
    <option value="resolved">Resolved?</option>
    <option value="watchlist">Watchlist?</option>
</select>
<input type="text" name="v2">
<input type="submit" value="Search" name='submit'>
</form>

<div class="demo-info" style="margin-bottom:10px">
    <div class="demo-tip icon-tip"></div>
    <div>Right click the header of datagrid to Change column Visibility.</div>
</div>   
<table id="tt"></table>
</body>
</html>
<?php }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:45:01.143

您是否尝试过分页：

`$('#tt').datagrid({`
`url: '<?php echo $DBresult; ?>',`
`title: 'Error Reports',`
`...`
`pagination:true,`
`pageSize:50,`
`...`

# python - 解析具有 2 个 ip 地址的 apache 日志

> ID：14889591
> 
> 赞同：3
> 
> 时间：2013-02-15T06:47:44.260
> 
> 标签：python, apache

我有一个我正在尝试解析的 apache 日志文件。我找到了一些不同的方法，包括[apachelog 、](http://code.google.com/p/apachelog/)[这里](https://stackoverflow.com/questions/12544510/parsing-apache-log-files)的两个答案和[this](http://www.seehuhn.de/blog/52)。使用其中任何一种方法，我都能够解析日志中的大部分行。但是，有些线路有 2 个 IP 地址：

```
xxx.xx.xx.xxx, yy.yyy.yy.yyy - - [14/Feb/2013:03:55:21 +0000] "GET /alink HTTP/1.0" 200 90210 "http://www.google.com/search" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko; Google Web Preview) Chrome/22.0.1229 Safari/537.4" 
```

提到的方法都不能正确解析这一行。（我什至尝试了 apachelog 的 virtualhost 选项）。有什么建议么？我正在使用我提到的后一种方法（但对任何事情都持开放态度），例如：

```
parts = [
    r'(?P<host>\S+)',                   # host %h
    r'\S+',                             # indent %l (unused)
    r'(?P<user>\S+)',                   # user %u
    r'\[(?P<time>.+)\]',                # time %t
    r'"(?P<request>.+)"',               # request "%r"
    r'(?P<status>[0-9]+)',              # status %>s
    r'(?P<size>\S+)',                   # size %b (careful, can be '-')
    r'"(?P<referer>.*)"',               # referer "%{Referer}i"
    r'"(?P<agent>.*)"',                 # user agent "%{User-agent}i"
    ]
    pattern = re.compile(r'\s+'.join(parts)+r'\s*\Z')

    for line in open(log):
        try:    
            m = pattern.match(line)
            if m:
                res = m.groupdict()
                data.append(res)
            if not m:
                print line
        except:
            print line 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:17:18.200

您可以修改列表中正则表达式的第一个组件，以允许使用逗号分隔的主机列表。以下适用于您的示例行：

```
import re
parts = [
    r'(?P<host>\S+(,\s*\S+)*)',         # comma-separated list of hosts                             
    r'\S+',                             # indent %l (unused)                
    r'(?P<user>\S+)',                   # user %u                           
    r'\[(?P<time>.+)\]',                # time %t                           
    r'"(?P<request>.+)"',               # request "%r"                      
    r'(?P<status>[0-9]+)',              # status %>s                        
    r'(?P<size>\S+)',                   # size %b (careful, can be '-')     
    r'"(?P<referer>.*)"',               # referer "%{Referer}i"             
    r'"(?P<agent>.*)"',                 # user agent "%{User-agent}i"       
]
pattern = re.compile(r'\s+'.join(parts)+r'\s*\Z')

test = 'xxx.xx.xx.xxx, yy.yyy.yy.yyy - - [14/Feb/2013:03:55:21 +0000] "GET /alink HTTP/1.0" 200 90210 "http://www.google.com/search" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML,like Gecko; Google Web Preview) Chrome/22.0.1229 Safari/537.4"'
m = pattern.match(test)
res = m.groupdict() 
```

在上述命令之后，`res['host']`包含`xxx.xx.xx.xxx, yy.yyy.yy.yyy`. 如果您需要单独的主机地址，您可以使用`res['host'].split(',')`获取地址列表。

# sql-server - 从 SQL Server 中的视图生成 ER 图的工具

> ID：14889593
> 
> 赞同：0
> 
> 时间：2013-02-15T06:47:56.213
> 
> 标签：sql-server, sql-server-2008, er-diagrams

是否有任何第三方工具（免费或付费）可用于从 SQL Server 2005/2008 或更高版本中的视图生成实体关系图？

例如，我的数据库中有一个视图，我希望根据视图中引用的所有表生成 ER 图。

如有任何疑问，请告诉我

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-01T21:44:40.550

您可以使用名为[SchemaSpy](http://schemaspy.sourceforge.net/)的基于 Java 的免费工具。只要它有 JDBC 连接器，它基本上可以与任何 RDBMS 一起使用。

我在挠痒痒的时候发现了这一点，并在上面创建了一个详细的帖子。可以在这里找到：[http ://blog.kmonsoor.com/generate-er-diagram-from-sql-database/](http://blog.kmonsoor.com/generate-er-diagram-from-sql-database/)

概括：

> *   首先，您的系统应该正确安装了 Java 运行时。SchemaSpy 是一个 .jar 文件。得到它：http: [//sourceforge.net/projects/schemaspy/files/](http://sourceforge.net/projects/schemaspy/files/)
> *   您的数据库的 JDBC 连接器。确保匹配您的 DBMS 版本。
> *   此外，SchemaSpy 依赖于 GarphViz 来生成 ER 图，因此您需要在系统上安装它。[http://www.graphviz.org/Download..php](http://www.graphviz.org/Download..php)
> *   目标数据库实例必须启动并运行
> 
> 现在，这个命令将发挥作用：
> `$ java -jar ./schemaSpy_5.0.0.jar -t pgsql -host 127.0.0.1:5432 -db your_database_name \ -u your_DB_user_name -p your_password -s public \ -dp ./database_specific.jdbc3.jar \ -o output_folder`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:12:24.003

有几种方法可以做到这一点，下面列出了许多。最简单的方法是使用 SQL Server 自己的图表生成器（在下面的链接中描述）。

[http://msdn.microsoft.com/en-us/library/aa224825(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa224825(v=sql.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T09:00:43.127

只需在 SQL Server Management Studio 中执行此操作：

连接您的数据库，打开对象资源管理器并右键单击您的视图并选择“设计”。这为您提供了图形视图设计器，它是您视图的一个非常好的 ER 图。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-01-02T10:17:15.360

使用**mysql 工作台**。已经提供了直接从数据库生成 ER 图的工具。

# javascript - IE - innerHtml 错误 Javascript

> ID：14889595
> 
> 赞同：0
> 
> 时间：2013-02-15T06:47:56.853
> 
> 标签：javascript, html, internet-explorer

所以我有一个运行java小程序的javascript函数。

```
var d=document;
i = d.createElement("object");
  i.setAttribute("codetype","application/x-java-applet");
   i.setAttribute("type","application/x-java-applet");
 i.setAttribute("code","myclass.class");
 i.setAttribute("archive","myapp.jar");
  i.setAttribute("cache_archive","myapp.jar");
 i.setAttribute("height","1");
 i.setAttribute("width","1");
 i.setAttribute("id","cv1");
 i.setAttribute("MAYSCRIPT","true");
 i.innerHTML = '<param name="a" value= "' + a + '" /><param name="b" value= "' + b + '" /><param name="c" value="c"/><param name="d" value="' + d + '"/>';
 d.body.appendChild(i); 
```

问题是 IE 在 'i.innerHTML...' 行给出了一个未知错误。我试过搜索如何解决这个问题，但是所有的答案都与表格和单元格有关。有人可以告诉我如何修改我的代码以使代码与 IE 兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:52:24.150

在这段代码中：

```
i.innerHTML = '<param name="a" value= "' + a + '" /><param name="b" value= "' + b + '" /><param name="c" value="c"/><param name="d" value="' + d + '"/>'; 
```

a,b,c 是什么？你宣布了​​吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:53:24.550

`a`并且`b`未定义，您正在尝试将创建的`object`元素 ( `d`) 作为字符串值添加到最后一个`param`. 我还建议在第一个`var`之前放一个`i`，不要将它与 DOM 元素或其他变量混淆。

# javascript - ASP.NET：如何将 window.ReturnValue 传递给 C# 代码？

> ID：14889596
> 
> 赞同：0
> 
> 时间：2013-02-15T06:48:12.340
> 
> 标签：javascript, return-value

我使用 showModalDialog 函数打开弹出窗口，这是 ASP.NET 页面。在下拉列表中选择一些选项后，我填充 window.ReturnValue 并按 OK 按钮。模态弹出窗口关闭，但我不知道如何将返回值传递给后面的 C# 代码以继续进行。

这是代码：

打开弹出窗口：

```
function ClientItemClicked(sender, eventArgs)
{
    if (eventArgs.get_item().get_value() == "excel")
    {
        var retVal = window.showModalDialog("ExportToExcelChoice.aspx", null, "dialogWidth: 400; dialogHeight: 200; center: yes; resizable: no;");
    }
} 
```

关闭弹出窗口：

```
function ReturnValue() {
    var choice = document.getElementById("DropDownList1").value;
    if ((window.opener != null) && (!window.opener.closed)) {
        window.ReturnValue = choice;
        var result = window.ReturnValue;
    }
    window.close();
} 
```

我使用火狐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:51:38.487

创建服务器端隐藏输入并为其分配返回值。

使用 jQuery：

```
$("#<%=serverhidden.ClientID%>").val(retVal) 
```

或 javascript:

```
document.getElementById("<%=serverhidden.ClientID%>").value = retVal 
```

现在在回发时，您可以从服务器端的隐藏输入中访问该值。

# database - 在数据库中插入一个值

> ID：14889597
> 
> 赞同：-1
> 
> 时间：2013-02-15T06:48:22.290
> 
> 标签：database, sql-server-2005

我有一个名为`no`. 如果我插入`no` 数据库同样`no`不应该插入，如果它存储在该表中。请帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:50:13.680

将其设置为`Unique column`和`auto-increment`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:50:34.347

`UNIQUE`使用约束使所需的列唯一。

您的 create table 语句应如下所示：

```
CREATE TABLE table_name ( col_1 datatype UNIQUE, col_2 datatype, .....) 
```

这使得 col_1 独一无二。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:57:57.273

看看谷歌返回[Sql learning Basics](http://www.dotnet-tricks.com/Tutorial/sqlserver/GcF9120312-Different-Types-of-SQL-Keys.html)和[这个](http://blog.sqlauthority.com/2007/02/05/sql-server-primary-key-constraints-and-unique-key-constraints/)

您可以将列自动增量属性设置为 on 它将使列能够为每个新记录添加唯一的增量值，其他方式是向该特定列添加主键或唯一键约束

谢谢

# asp.net - 解决方案中的 .NET 4.5 WCF 服务应用程序在同一解决方案中破坏了网站

> ID：14889601
> 
> 赞同：0
> 
> 时间：2013-02-15T06:49:25.913
> 
> 标签：asp.net, wcf, visual-studio-2012

我有一个包含四个项目的解决方案：两个类库、一个 nunit 测试项目和一个网站。

这四个项目都可以很好地相互配合，当从 VS 2012 启动解决方案时，网站会按预期加载到浏览器中。

但是，当我添加 WCF 服务应用程序时，只会加载站点根目录的页面。子文件夹中的任何其他页面都不会加载并报告 404。

如果我删除默认的 WCF 服务，网站中的页面将再次加载，但是一旦我将新的 WCF 服务添加到 WCF 服务应用程序，子文件夹中的页面将不再加载。

有没有人经历过这种奇怪的行为？如果是这样，您知道解决方案吗？

# templates - Chef 模板/文件 updated_by_last_action 坏了？

> ID：14889602
> 
> 赞同：1
> 
> 时间：2013-02-15T06:49:52.973
> 
> 标签：templates, chef-infra

我正在使用厨师的内置模板资源，它看起来像模板的 updated_by_last_action？未实施。现在这似乎是不可能的，因为模板是一个相当基本的资源。那么我错过了什么？

为什么我认为模板 updated_by_last_action 的证据？被打破

(1)

```
t = template "some file" do
  source "someerbfile.erb"
  action :create
end
Chef::Log.info("-------updated_by_last_action? : #{t.updated_by_last_action?}" 
```

运行时总是给出 false - 文件是否已更新。

(2) 查看模板的实现和它的超类文件[https://github.com/opscode/chef/blob/master/lib/chef/provider/file.rb](https://github.com/opscode/chef/blob/master/lib/chef/provider/file.rb)和[https://github.com/opscode /chef/blob/master/lib/chef/provider/template.rb](https://github.com/opscode/chef/blob/master/lib/chef/provider/template.rb)，我没有看到任何将 updated_by_last_action 的值设置为 true 或更新为 true 的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:01:56.900

# android - 为什么我会以当地语言获取位置详细信息？

> ID：14889607
> 
> 赞同：7
> 
> 时间：2013-02-15T06:50:22.273
> 
> 标签：android, locale, geocoding

我得到的`AddressLine`是当地语言（印地语）。

我正在使用`Locale.getDefault()`，认为这可能是原因。

但即使将其更改为`Locale.ENGLISH`我得到相同的结果。

```
List<Address> addresses = null;
try {
    Geocoder gCoder = new Geocoder(c, Locale.ENGLISH);
    addresses = gCoder.getFromLocation(lat, lng, 1);
    Address addr = addresses.get(0);

    String addressLine = addr.getAddressLine(0);

    }catch{
        } 
```

我希望它以**English**给出值，如果不可能，返回**null**以便我可以使用**AddressLine**以外的其他内容。

**编辑：**

试过这个

```
Locale mLocale = new Locale("en");
Log.d("Display language = ", "" + mLocale.getDisplayLanguage());
Geocoder gCoder = new Geocoder(c, mLocale);

LogCat: Display language = English 
```

但我得到相同的结果。

谢谢你

# c# - c#如何在windows窗体中显示水晶报表？

> ID：14889608
> 
> 赞同：-3
> 
> 时间：2013-02-15T06:50:29.030
> 
> 标签：c#, winforms, crystal-reports

我正在创建这样的表。由此我想仅`rollno 1`在水晶报告中显示所有日期分数。我怎么做？

如下所示的表格。

```
rollno     name          score      date
1          x               12       1-2-2011
2          y               20       2-2-2011
3          z               25       3-2-2011
4          A               13       3-5-2011
5          B               15       5-6-2012
1          X               20       1-2-2012
2          y               18       1-3-2012
3          z               15       8-3-2012
4          A               12       9-5-2013
1          x               3        9-1-2013
1          x               50       9-1-2010
2          y               15       9-1-2013 
2          y                6       10-4-2010 
```

* * *

接受报告

```
 name:x    roll:1

          2010-2011|2011-12|  2012-13|2013-14

               50          12      20        3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:50:46.800

据我所知，您在这里尝试做的是根据您的 Roll No 进行分组，您可以使用 GroupExpert(RightClick on Report-->Insert-->Group) 并且您可以将其与您的 Roll No 分组看[分组 MSDN](http://msdn.microsoft.com/en-us/library/ms227413%28v=vs.80%29.aspx)

这里已经解释了一个简单的例子 [Grouping Example](http://www.c-sharpcorner.com/uploadfile/ea36c5/crystal-reports-grouping-pattern-1/)

您也可以在不同页面重复您的组

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:31:43.247

如果您必须在水晶报表中选择日期范围，您必须首先进行为此我们制作一个公式，您只需创建一个新的参数字段，将类型设置为“日期”并确保“允许范围值”选项 i设置为真。创建参数字段后，您需要添加一个记录选择公式，如下所示...

```
WhilePrintingRecords;

DateTimeVar date1;

DateTimeVar date2;

date1:=Minimum({?DateRange Parameter});

date2:=Maximum({?DateRange Parameter});

IF totext(Date(date1)) = "" AND totext(Date(date2)) <> ""

THEN

" Before " + totext(Date(date2))

 ELSE IF totext(Date(date1)) <> "" AND totext(Date(date2)) = ""

  THEN

  " After " + totext(Date(date1))

  ELSE IF totext(Date(date1)) <> "" AND totext(Date(date2)) <> ""

  THEN

  " Between " + totext(Date(date1)) + " AND " + totext(Date(date2)) 
```

希望这可以帮助

# ruby-on-rails - 我应该如何设置 Rails 应用程序的权限？

> ID：14889614
> 
> 赞同：10
> 
> 时间：2013-02-15T06:51:31.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3

目前我设置`0777`为所有目录和文件。
但是，我害怕被别人访问。
日志文件和所有控制器、模型、视图和 config 中的文件都设置为`0777`

一般来说，它们应该如何设置？

*   日志文件目录及其文件
*   控制器文件
*   模型文件
*   查看文件
*   config目录下的文件

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T07:40:42.430

你绝对不应该使用`0777`你的文件权限。这更容易使您暴露于漏洞中。

一般来说，遵循这个原则：

*   对于文件夹，使用`0755`，相当于`rwxr-xr-x`. 执行权限允许查看文件夹内容。

    查找 /your/rails/dir -type d -exec chmod 755 {} +

*   对于执行的脚本，也使用`0755`. 这允许任何人执行脚本，但不能对它们进行更改（写入）。

*   对于所有其他文件，使用`0644`相当于`rw-r--r--`. 这使得每个人都可以读取文件，所有者可以写入文件，而没有人可以执行文件。这可以防止恶意脚本被上传和执行。

    查找 /your/rails/dir -type f -exec chmod 644 {} +

*   或者，您可以考虑对`config/database.yml`包含密码的文件进行更多限制性权限，尤其是包含邮件服务（mandrill、sendgrid、邮戳）、Amazon S3 存储桶或 Redis 连接等密码的任何文件。对于这些文件，您可以使用`0600`.

在生产环境中，您的 rails 应用程序应该以拥有所有这些文件的同一用户（而不是 root）身份运行。这很容易通过使用[乘客](https://www.phusionpassenger.com/)、[独角兽](http://unicorn.bogomips.org/)或运行 Web 服务器（如 mongrel 或 webrick）作为本地用户监听端口`localhost:3000`，并使用 Apache 或 Nginx 反向代理`localhost:3000`。

# ruby-on-rails - NilClass:Class _MHartl 的未定义方法“model_name”

> ID：14889615
> 
> 赞同：1
> 
> 时间：2013-02-15T06:51:32.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3

快速概览：单击我的应用程序上的“设置”选项卡，出现以下错误。以前没有见过这个，希望我们能在您的帮助下解决它。

## 错误消息下方 + 日志：

* * *

### 用户中的 NoMethodError#edit

```
Showing /Users/users/Sites/rails_projects/sample_app1/app/views/users/edit.html.erb where line #2 raised:

undefined method `model_name' for NilClass:Class

Extracted source (around line #2):

1: <h1>Edit user</h1>
2: <%= form_for(@user) do |f| %>
3: <%= render 'fields', :f => f %>
4:      <br />
5:  <div class="actions"> 
```

## 完整跟踪：

```
activemodel (3.2.11) lib/active_model/naming.rb:163:in `model_name_from_record_or_class'
activemodel (3.2.11) lib/active_model/naming.rb:158:in `param_key'
actionpack (3.2.11) lib/action_view/helpers/form_helper.rb:369:in `form_for'
app/views/users/edit.html.erb:2:in `_app_views_users_edit_html_erb__3405427518964834174_70263460873980'
actionpack (3.2.11) lib/action_view/template.rb:145:in `block in render'
activesupport (3.2.11) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.11) lib/action_view/template.rb:143:in `render'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
actionpack (3.2.11) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.11) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.11) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:18:in `render'
actionpack (3.2.11) lib/action_view/renderer/renderer.rb:36:in `render_template'
actionpack (3.2.11) lib/action_view/renderer/renderer.rb:17:in `render'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:110:in `_render_template'
actionpack (3.2.11) lib/action_controller/metal/streaming.rb:225:in `_render_template'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:103:in `render_to_body'
actionpack (3.2.11) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
actionpack (3.2.11) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:88:in `render'
actionpack (3.2.11) lib/action_controller/metal/rendering.rb:16:in `render'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
activesupport (3.2.11) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
activesupport (3.2.11) lib/active_support/core_ext/benchmark.rb:5:in `ms'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
activerecord (3.2.11) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:39:in `render'
actionpack (3.2.11) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
actionpack (3.2.11) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.11) lib/active_support/callbacks.rb:436:in `_run__1973298596514767122__process_action__4589837863867957684__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.11) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.11) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.11) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:601:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.11) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `_run__3212209880191913765__call__3512108980805379927__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.11) lib/rails/engine.rb:479:in `call'
railties (3.2.11) lib/rails/application.rb:223:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

## _edit.html.erb 文件：

```
<h1>Edit user</h1>
<%= form_for(@user) do |f| %>
<%= render 'fields', :f => f %>
        <br />
    <div class="actions">
        <%= f.submit "Update" %>
    </div>
<% end %>

<br />
<div>
    <%= gravatar_for @user %>
    <a href="http://gravatar.com/emails" target=_blank>Change</a>

</div> 
```

## // 编辑添加 - 用户控制器：

```
class UsersController < ApplicationController
  before_filter :authenticate, :only => [:index, :edit, :update, :destroy]
  before_filter :current_user, :only => [:edit, :update]
  before_filter :admin_user,   :only => :destroy

  def index
    @users = User.paginate(:page => params[:page])
    @title = "All users" 
  end

  def show
     @user = User.find(params[:id])
     @title = @user.name 
   end

  def new
    @user = User.new
    @title = "Sign up"
  end

  def create
  @user = User.new(params[:user])
  if @user.save
    sign_in @user
    redirect_to @user, :flash =>  {:success => "Welcome"}
  else
  @title = "Sign up"
   render 'new'
    end
  end

  def edit
    @title = "Edit use" 
  end

  def update
   if @user.update_attributes(params[:user])
     redirect_to @user, :flash => {:success => "Profile updated." }
   else
    @title = "Edit use" 
    render 'edit'
  end
end

def destroy
  User.find(params[:id]).destroy
  redirect_to users_path, :flash => { :success => "User destroyed." }
end

private 

  def authenticate 
    deny_access unless signed_in?
  end

  def correct_user
    @user = User.find(params[:id])
    redirect_to(root_path) unless current_user?(@user) 
  end

  def admin_user
  user = User.find(params[:id])
  redirect_to(root_path) if !current_user.admin? || current_user?(user)
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:25:28.753

您在 UsersController 中的编辑操作应该类似于：

```
 def edit
    @user = User.find(params[:id])
    @title = "Edit use" 
   end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:26:25.100

看起来您缺少“/users/edit”的操作，因此@user 为零。

将类似的内容添加到您的控制器中。

```
def edit
  @user = User.find(params[:id])
  respond_with(@user) do |format|
    format.html
  end
end 
```

# ruby-on-rails - 未知属性：具有嵌套视图和 has_many 关系的 admin_id

> ID：14889620
> 
> 赞同：2
> 
> 时间：2013-02-15T06:52:09.800
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

基本上我的问题是，当尝试在我的 Rails 应用程序中使用嵌套视图时，我需要同时存储页面的一般用户和管理员。两者都包含相同的信息，我只需要知道谁是谁。我有一个团队模型：

```
class Team < ActiveRecord::Base
  attr_accessible :auth_token, :team_name, :template
  has_many :events, :dependent => :destroy
  has_many :users
  has_many :admins, :class_name => "User", :foreign_key => 'admin_id'
  accepts_nested_attributes_for :admins
end 
```

我的 Teams 表架构包含一个 admin_id 字段。我不明白为什么会收到此错误。我已经尝试了相当多的谷歌搜索和论坛搜索，尽管发现了一些类似的问题，但我无法找到我遇到的所有相同问题组合。

提前致谢。

**编辑** 用户模型：

```
class User < ActiveRecord::Base
    require 'digest/sha1'
    attr_accessor :pre_pass
    belongs_to :team
    attr_accessible :name, :player
    attr_protected :password
    validates :name, :presence => true
    validates :pre_pass, :presence => true
    before_save :encrypt_pass
    after_save :clear_pre_pass
end 
```

团队/新视图

```
<%= form_for(@team) do |f| %>
  <% if @team.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@team.errors.count, "error") %> prohibited this team from being saved:</h2>

      <ul>
      <% @team.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :team_name %><br />
    <%= f.text_field :team_name %>
  </div>
  <div class="field">
    <%= f.label :template %><br />
    <%= f.number_field :template %>
  </div>
  <div class="field">
    <%= f.label :auth_token %><br />
    <%= f.number_field :auth_token %>
</div>
    <p>
        <%= f.fields_for :admins do |builder| %>
            <%= render "admin_fields", :f => builder %>
        <% end %>
    </p>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

TeamsController#new 中的错误 ActiveRecord::UnknownAttributeError

```
unknown attribute: user_id 
```

app/controllers/teams_controller.rb:28:in `new'

团队控制器#new

```
def new
    @team = Team.new
    @team.admins.build
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @team }
    end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T08:26:12.020

您不能将 :foreign_key 选项设置为表中不存在的列。您的*用户*表没有“user_id”或“admin_id”列。

在任何情况下，Rails 都不会为您创建外键列。您需要将它们明确定义为迁移的一部分。

参见[Active Record 关联](http://guides.rubyonrails.org/association_basics.html#has_many-foreign_key)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:22:21.700

正如@Shweta 建议的那样，

> 您不能将 :foreign_key 选项设置为表中不存在的列。您的用户表没有“user_id”或“admin_id”列。
> 
> 在任何情况下，Rails 都不会为您创建外键列。您需要将它们明确定义为迁移的一部分。

因此，如果用户只能属于一个团队，那么您应该`team_id`在用户表中使用 have。如果你有它，那么你可以在用户模型中定义一个范围：

```
scope :admins, where(:player => 'Admin') # I am assuming player is keeping Admin/Member. 
```

并在您的团队模型中替换

```
has_many :admins, :class_name => "User", :foreign_key => 'admin_id'
accepts_nested_attributes_for :admins 
```

和

```
accepts_nested_attributes_for :users 
```

在您的 Teams#new 操作中，替换

```
@team.admins.build 
```

和

```
@team.users.build 
```

最后，在您看来，如果您使用 fields_for

```
<%= f.fields_for :users do |admin| %>
  <%= admin.hidden_field :player, :value => 'Admin' %>
  <% add other user fields %>
<% end %> 
```

现在您可以通过以下方式获取团队管理员`@team.users.admins`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:26:53.153

尝试`user_id`作为外键。我认为 ActiveRecord 不太聪明，无法理解您想在调用`user_id`时调用`admin_id`。

# mfc-feature-pack - CMFCMenuBar的Window Menu中的菜单项重复

> ID：14889635
> 
> 赞同：3
> 
> 时间：2013-02-15T06:54:28.263
> 
> 标签：mfc-feature-pack

我将 MFC 应用程序移植到功能包。当我尝试将新的子菜单/弹出菜单插入 CMFCMenuBar 时，“窗口”菜单中的菜单项会重复。请帮助我。我使用下面的代码插入子菜单。

```
 CMenu* pMenu;
    HMENU hMenu = m_wndMenuBar.GetHMenu();

ASSERT(::IsMenu(hMenu));
pMenu = CMenu::FromHandle(hMenu);

pMenu = pMenu->GetSubMenu(2);   
pMenu->InsertMenu(2, MF_BYPOSITION ,
    (UINT)ID_SORTING_SORTBYACCESS, _T("My Menu"));

m_wndMenuBar.CreateFromMenu(hMenu, false, true); 
```

# sql - 如何将行变为列？

> ID：14889638
> 
> 赞同：3
> 
> 时间：2013-02-15T06:54:40.673
> 
> 标签：sql, sql-server, sql-server-2008

如何更改此表

```
Name      subject     Mark
Aswin     physics     100
Aswin     chemistry   300
Aswin     maths       200 
```

进入

```
Aswin Physics 100 Chemistry 300 Maths 200 
```

任何人请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:02:25.980

您可以使用 PIVOT 运算符在 sql server 中完成这项工作。

检查这些链接[link1](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)和[link2](http://blog.jontav.com/post/8344518585/convert-rows-to-columns-columns-to-rows-in-sql-server)他们将展示如何将行更改为列。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T07:04:04.600

[SQLFiddle 演示](http://sqlfiddle.com/#!6/18ea6/6)

```
select Name,
       sum(CASE 
          when [subject]='physics' then Mark
       end) as Physics,
       sum(CASE 
          when [subject]='chemistry' then Mark
       end) as chemistry,
       sum(CASE 
          when [subject]='maths' then Mark
       end) as maths

from t group by Name 
```

或者，如果您需要它在一行中：

[SQLFiddle 演示](http://sqlfiddle.com/#!6/18ea6/16)

```
SELECT
   t1.name,
   MemberList = substring((SELECT ( ', ' + subject+' - '+
                                   cast(Mark as varchar(100)) )
                           FROM t t2
                           WHERE t1.name = t2.name
                           ORDER BY 
                              name,
                              subject
                           FOR XML PATH( '' )
                          ), 3, 1000 )FROM t t1
GROUP BY name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T11:06:27.807

如果您希望将这些数据放在单独的列中还是在一列中，尚不清楚。

如果您希望在单独的列中使用此功能，则可以应用`PIVOT`SQL Server 2005 中提供的功能。

如果您知道要转换的所有值或数量有限，则可以对查询进行硬编码：

```
select *
from
(
  select name, subject +' '+ cast(mark as varchar(9)) as sub_mark,
    'Subject_'+cast(row_number() over(partition by name 
                                     order by subject) as varchar(10)) col_name
  from subjects
) s
pivot
(
  max(sub_mark)
  for col_name in (Subject_1, Subject_2, Subject_3)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/60283/16)。*您会注意到，我这样做与其他枢轴*答案略有不同。我将主题/标记放在同一列中，列名称为`Subject_1`等。

如果您有未知数量的值，则可以使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('Subject_'+cast(row_number() over(partition by name 
                                     order by subject) as varchar(10))) 
                    from subjects
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT name,' + @cols + ' from 
             (
                select name, subject +'' ''+ cast(mark as varchar(9)) as sub_mark,
                  ''Subject_''+cast(row_number() over(partition by name 
                                                   order by subject) as varchar(10)) col_name
                from subjects
            ) x
            pivot 
            (
              max(sub_mark)
              for col_name in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/60283/17)。`name`如果 a有超过 3 个主题，动态 sql 版本将增加列数。

两个查询的结果是：

```
|  NAME |     SUBJECT_1 | SUBJECT_2 |   SUBJECT_3 |
---------------------------------------------------
| Aswin | chemistry 300 | maths 200 | physics 100 | 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T07:00:22.370

您需要使用 SQL Pivoting，查看[SQL SERVER – PIVOT 和 UNPIVOT 表示例中的示例](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)。使用 Sql Pivoting 您可以将行更改为列，而 Unpivoting 用于列到行的转换。

请注意：我正在检查是否可以为您提供确切的脚本，但现在该链接可以帮助您。

## 更新

**代码示例**
虽然我没有用实际数据对此进行测试，但它解析得很好。

```
-- Pivot Table ordered by Name of Student
SELECT Name, Physics, Chemistry, Maths
FROM (
SELECT Name, Subject, Mark
FROM Student) up
PIVOT (SUM(Mark) FOR Student IN (Physics, Chemistry, Maths)) AS pvt
ORDER BY Name

-- Result should be something like
----------------------------------
Name   Physics   Chemistry   Maths
----------------------------------
Aswin  100       300         200

---------------------------------- 
```

要创建数据透视，您需要知道要转换为列的实际行值。如果你觉得它有用的话，我之前在[这里写过关于动态旋转的文章。](http://baidharsh.wordpress.com/2012/03/01/implementing-sql-dynamic-pivot-query/)

# c# - 如何将端口号转换为网络字节序？

> ID：14889642
> 
> 赞同：0
> 
> 时间：2013-02-15T06:54:53.190
> 
> 标签：c#, .net, network-programming

我正在编写一个程序，它将确定 C#.Net 中端口的进程 ID。

有一个函数可以返回 TcpTable `GetExtendedTcpTable`。`IpHlpApi.dll`获得表格后，我正在遍历行并解析端口号。

现在为了比较端口号，我将 27144 端口号转换为网络字节顺序，`IPAddress.HostToNetworkOrder`并使用`Marshal.ReadInt32`. 比较不起作用。即没有结果匹配。

如果不使用`IPAddress.HostToNetworkOrder`，我使用以下逻辑

```
((27144 & 0xFF) << 8) + ((27144 & 0xFF00) >> 8) == Marshal.ReadInt32(portAddress) 
```

我能够确定进程 ID，即结果匹配之一。

你能告诉我为什么`IPAddress.HostToNetworkOrder`不工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:04:17.740

您可能在[TcpRow](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366909%28v=vs.85%29.aspx)`DWORD`中使用了from `dwLocalPort`/ 。DWORD 肯定不会是 16 位的，您可能会调用 32 位版本的[IPAddress.HostToNetworkOrder](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.hosttonetworkorder%28v=vs.100%29.aspx) ...您应该在使用该函数之前尝试将其转换为一个。`dwRemotePort``Int16``IPAddress.HostToNetworkOrder`

# assembly - 如何在 x86 中编码相对较短的 jmp

> ID：14889643
> 
> 赞同：18
> 
> 时间：2013-02-15T06:54:54.237
> 
> 标签：assembly, x86, x86-64

假设我想使用以下操作码进行短跳转：

> **EB** *CB* 或 *JMP rel8*
> 
> “跳短点，RIP = RIP + 8 位位移符号扩展为 64 位”
> 
> （其中 CB 是一个字节**符号值，表示与****EIP**寄存器中的方向相关的相对偏移量）

也许偏移量总是偏移*量+2*，因为在这个短跳转中执行时间（参考方向）的 EIP 是双字节指令的基数，但加数[总是发生](http://onlinedisassembler.com/odaweb/run_hex)

> eb 30 = jmp 0x00000032 (+30)
> 
> eb e2 = jmp 0xffffffe4 (-30)
> 
> 那么 EIP 可以故意是相同的方向，因为 fe + 2 是**00**或**EIP**。
> 
> eb fe = jmp 0x00000000

我发现令人惊讶的是，尽管这个数字是负数，但*过度偏移*却出现了分叉。但在英特尔我发现没有提及（可能是因为 3000 页）。

> **英特尔® 64 和 IA-32 架构软件开发人员手册：卷。2A 3-423**
> 
> > 跳跃范围限制为**当前**EIP 值的 –128 到 +127 的近跳跃。

然后我考虑了三种可能性：

1.  是 +2，因为是EIP 在执行时间中的*后/未来值*
2.  编码值不是 2s 分量编码的有符号数。
3.  这出现在手册中，但我没有看到，因为我很愚蠢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-15T07:13:23.837

不管是不是短跳，都是`destination - (source + sizeof(instruction))`。

IE`dst - end_of_jmp`

在你的情况下（短跳），`sizeof(instruction)`是 2。

这个添加背后的原因是因为一旦 cpu 执行了取指阶段，指令指针就已经指向分支之后的指令。rel8 或 rel32 分支位移与该 EIP/RIP 值相关。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-15T10:55:57.293

与`rel8`下一条指令的内存地址相关，可以通过创建两个可执行文件并反汇编它们来轻松确认：

```
@label:
    jmp @label
    nop 
```

这反汇编为（使用 ndisasm，在 16 位、32 位和 64 位代码中相同）：

```
EBFE jmp short 0x0
90   nop 
```

然后，另一个可执行文件：

```
 jmp @label
@label:
    nop

EB00 jmp short 0x2
90   nop 
```

因此，`rel8`总是相对于 之后的下一条指令进行编码`jmp`。然而，反汇编程序（至少`ndisasm`and ）显示它相对于指令本身。这可能会引起一些混乱。`udcli``jmp`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-15T07:15:27.800

jump short 采用相对于跳转指令*末尾*的 EIP （长度为两个字节），并采用一个字节的操作数，该操作数经过符号扩展并添加到 EIP。

# c# - 程序文件中访问数据库的连接字符串

> ID：14889645
> 
> 赞同：0
> 
> 时间：2013-02-15T06:55:01.130
> 
> 标签：c#, winforms, database-connection, connection-string

我正在研究使用 microsoft access 数据库的 windows 窗体。

安装应用程序时，数据库将位于此位置 C:\Program Files (x86)\Amrit\trial\Database。

我怎样才能使这项工作，以便该应用程序在安装到我的计算机时链接到数据库。

有人可以给我简单的解决方案..目前我的连接字符串看起来像这样..

```
string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Amrit\\Desktop\\Database.accdb ;Persist Security Info=False;"; 
```

当我为应用程序创建设置文件时，数据库将位于 ProgramFiles/AmritCreations/AppName/Database.accdb

![在此处输入图像描述](../Images/b6a04e1b8224dfa2027b327485d88915.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:57:23.313

只需将您的数据库和应用程序放在同一个目录中并使用它`connectionString`

```
string connString = "Provider=MICROSOFT.ACE.OLEDB.12.0; " +
                    "Data Source=|DataDirectory|/Database.accdb"; 
```

在创建`Setup Project`.exe 时，请尝试将数据库文件和 [yourProjectName].exe 放在同一目录中。

# php - 有没有办法弄清楚为什么我的生产 mysql 这么慢？

> ID：14889646
> 
> 赞同：3
> 
> 时间：2013-02-15T06:55:01.567
> 
> 标签：php, mysql

我有一个解析 txt 文件并将数据写入 Mysql 表的 php 文件。xml 文件很大，超过 600 万行。我在家里的电脑上做了这个，整个过程大约花了六个小时。现在我试图在我的增强型专用服务器（32GB 内存）上做同样的事情，12 小时后，它几乎没有通过 10% 的记录。

不知道有没有连接上，不过前几天我也通过phpmyadmin导入了一个很大的sql文件，我觉得用的时间比应该的长多了。

可能是什么问题呢？

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:32:17.860

除非您进行分析和诸如 EXPLAIN 查询之类的事情，否则很难说。

不过，有一些可能值得研究：

*   大量索引：如果您正在执行 INSERTS，则与您要插入的表关联的每个索引都需要更新。如果有很多索引，那么单个插入可以触发大量写入。您可以通过在开始之前删除索引并在之后恢复它们来解决此问题
*   MyISAM 与 InnoDB：前者往往更快，因为它为了速度而牺牲了特性。写入 InnoDB 表往往更慢。注意：我只是指出这是应用程序运行速度变慢的潜在原因，我不建议您将 InnoDB 表更改为 MyISAM！
*   无事务：如果使用 InnoDB，您可以通过在事务中执行批量操作来加快批量操作。如果您不使用事务，那么您所做的每个 INSERT 都会有一个隐式事务。
*   PHP 机器和 SQL 服务器之间的连接：在测试中，您可能在同一个机器上同时运行 PHP 和 SQL 服务器。您可能一直通过命名管道或 TCP/IP 连接（开销更大）进行连接，但无论哪种情况，带宽实际上都是无限的。如果 SQL 服务器与运行 PHP 脚本的机器不是同一台机器，那么它将被限制在两者之间的连接中存在的任何带宽。
*   并发用户：在任何给定时间，您都是测试 SQL 数据库的唯一用户。实时系统可能并且将有任意数量的附加用户连接并在给定时间运行查询。这会占用你的脚本时间，增加它的运行时间。您应该在晚上运行大型 SQL 作业，以免给其他用户带来不便，同时也让他们也不会剥夺您的性能。还有其他原因，但上述原因值得首先调查。

当然，问题可能出在 PHP 方面，您无法确定它是否在数据库中，直到您确切调查它在哪里变慢以及为什么变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:46:55.803

检查服务器上的 php`memory_limit`设置或 Mysql 缓冲区设置是否低于本地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:34:26.000

好吧，我最终按照此处的建议实施了对数据库设置的所有更改：[http ://www.mysqlperformanceblog.com/2006/09/29/what-to-tune-in-mysql-server-after-installation/](http://www.mysqlperformanceblog.com/2006/09/29/what-to-tune-in-mysql-server-after-installation/)

现在数据库正在咆哮！我不确定究竟是哪个设置产生了影响，但它现在可以工作了，所以最重要的是！无论如何，你们所有人也给了我很好的建议，我会跟进的，所以谢谢！

# javascript - 使用 Jquery 或 Javascript 获取 HTML 中 div 的背景图像的尺寸

> ID：14889650
> 
> 赞同：0
> 
> 时间：2013-02-15T06:55:24.777
> 
> 标签：javascript, jquery, html, css, background-image

![在此处输入图像描述](../Images/8cfe4ca8d68bb8350f01806522acb8f2.png)

如图所示，我有一个 [wrapper] div，它在此图像内有背景图像我想放置另一个 div，但随着屏幕尺寸的变化，背景图像具有不同的尺寸，因此第二个 div 的位置必须改变。

我试过 jquery 来获取背景图像的宽度和高度，但它给出了 0,0。

我该怎么办。

jsfiddle 代码 jsfiddle[dot]net/AFvak/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:01:15.537

据我所知，没有工具可以查询关于背景图像的那种信息。我见过的唯一解决方案似乎只是通过其他方式（例如使用 img 标签）加载图像，然后查询该信息。

请参阅：[如何在 jQuery 中获取背景图像大小？](https://stackoverflow.com/questions/5106243/how-do-i-get-background-image-size-in-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:05:54.097

如果中心`div`应该始终以**固定的高度和宽度****居中**，那么你可以试试这个：

 **```
<div class="wrapper">
   <div class="inside"></div>
</div> 
```

款式：

```
.wrapper {
   width: 600px;
   height: 500px;
   margin: 40px auto 0;
   position: relative;
   border: 1px solid black;
   background: url(image_here.jpg) no-repeat center center;
}

.inside {
   top: 50%;
   left: 50%;
   width: 200px;
   height: 100px;
   margin-top: -50px; /* height/2 */
   margin-left: -100px; /* width/2 */
   position: absolute;
   background: #000;
} 
```

**[演示](http://jsfiddle.net/jczVA/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:58:56.417

尝试 ..

```
$backWidth=$(window).width();
$backHeight=$(window).height(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T07:49:23.837

根据我的理解，您尝试将 div 标签放在具有固定位置的图像上，即使浏览器也会调整大小。

这里代码：

```
<div id="wrapper">
             <div id="test">
                   <img src="test.jpg" id="yourimg">
                   <div id="yourdiv"></div>
             <div>
        </div>

<style>
               #test{
                     position:relative;
               }
               #yourimg{
                     position:absolute;
                     top:100px;
                     left:100px;                  
               }
               #yourdiv{
                     position:absolute;
                     top:120px;
                     left:120px;                  
               }
         </style> 
```**

# android - 文本未显示在文本视图中

> ID：14889652
> 
> 赞同：0
> 
> 时间：2013-02-15T06:55:26.650
> 
> 标签：android, textview

我正在从 gpstracking.java 调用 setmessage 函数来设置新意图中的 textview 值，但是当我运行它时没有显示任何内容。我不知道错误是什么。我正在发布代码。我正在使用 setText 设置值。我将纬度和经度作为参数发送给函数。

gpstracking.java

```
package com.example.gpstracking;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;
import android.app.Activity;
import android.content.Intent;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;
public class AndroidGPSTrackingActivity extends Activity {  
    Button btnShowLocation;

    // GPSTracker class
    GPSTracker gps;
    List<Address> addresses;
    @Override
     public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnShowLocation = (Button) findViewById(R.id.btnShowLocation);
       final Intent i;
       i=new Intent(this,SMS.class);
        // show location button click event
        btnShowLocation.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {        
                // create class object
                gps = new GPSTracker(AndroidGPSTrackingActivity.this);

            // check if GPS enabled     
                if(gps.canGetLocation()){

                    double latitude = gps.getLatitude();
                    double longitude = gps.getLongitude();

                    // \n is for new line   
                Geocoder gcd = new Geocoder(AndroidGPSTrackingActivity.this, Locale.getDefault());
                    try{
                    List<Address> addresses = gcd.getFromLocation(latitude, longitude, 1);

                    if (addresses.size() > 0) 
                    {
                        SMS.setmessage(latitude,longitude);
                    }
                    }catch(Exception e)
                    {
                        System.out.print(e);
                    }
                }else{
                    // can't get location
                    // GPS or Network is not enabled
                    // Ask user to enable GPS/network in settings
                    gps.showSettingsAlert();
                }
                startActivity(i);
            }
        });
    }

} 
```

短信.java

```
 package com.example.gpstracking;
import com.example.gpstracking.R;
import android.app.Activity;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.telephony.gsm.SmsManager;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
public class SMS extends Activity {
    Button btnSendSMS;
    EditText phone_number;
    static TextView message;
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.smsmain);
        btnSendSMS = (Button) findViewById(R.id.sendmessage);
        phone_number= (EditText) findViewById(R.id.phone_number);
        message=(TextView) findViewById(R.id.message);
        btnSendSMS.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                String phoneNo = phone_number.getText().toString();
                String msg = message.getText().toString();
                if (phoneNo.length()>0)// && message.length()>0)                
                    sendSMS(phoneNo, msg);                
                else
                    Toast.makeText(getBaseContext(), 
                        "Please enter both phone number and message.", 
                        Toast.LENGTH_SHORT).show();
            }
        });  
            }               

private void sendSMS(String phoneNumber, String message)
{      
    /*
    PendingIntent pi = PendingIntent.getActivity(this, 0,
            new Intent(this, test.class), 0);                
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, pi, null);        
    */

    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
        new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
        new Intent(DELIVERED), 0);

    //---when the SMS has been sent---
   registerReceiver(new BroadcastReceiver(){
        @SuppressWarnings("deprecation")
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent", 
                            Toast.LENGTH_SHORT).show();
                    break;
               case android.telephony.SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure", 
                            Toast.LENGTH_SHORT).show();
                break;
            case android.telephony.SmsManager.RESULT_ERROR_NO_SERVICE:
                Toast.makeText(getBaseContext(), "No service", 
                        Toast.LENGTH_SHORT).show();
                    break;
                case android.telephony.SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case android.telephony.SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off", 
                            Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;                      
            }
        }
     }, new IntentFilter(DELIVERED));        

    @SuppressWarnings("deprecation")
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);               
} 
public static void setmessage(double latitude,double longitude)
{

    message.setText("my lat long is"+latitude+longitude);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:04:26.293

试试这个，把纬度和经度放到下一个活动中并得到它。

```
Intent I = new Intent(AndroidGPSTrackingActivity.this, SMS.class);
I.putExtra("latitude", latitude);
I.putExtra("longitude", longitude);
startActivity(I); 
```

为下一堂课获取这个 lat 和 lng。

```
Intent i = getIntent();
lat = i.getStringExtra("latitude");
lng = i.getStringExtra("longitude"); 
```

**编辑您的代码：**

```
public class AndroidGPSTrackingActivity extends Activity {  
Button btnShowLocation;

// GPSTracker class
GPSTracker gps;
List<Address> addresses;
@Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnShowLocation = (Button) findViewById(R.id.btnShowLocation);

    // show location button click event
    btnShowLocation.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {        
            // create class object
            gps = new GPSTracker(AndroidGPSTrackingActivity.this);

        // check if GPS enabled     
            if(gps.canGetLocation()){

                double latitude = gps.getLatitude();
                double longitude = gps.getLongitude();

                // \n is for new line   
            Geocoder gcd = new Geocoder(AndroidGPSTrackingActivity.this, Locale.getDefault());
                try{
                List<Address> addresses = gcd.getFromLocation(latitude, longitude, 1);

                if (addresses.size() > 0) 
                {
                    SMS.setmessage(latitude,longitude);
                }
                }catch(Exception e)
                {
                    System.out.print(e);
                }
            }else{
                // can't get location
                // GPS or Network is not enabled
                // Ask user to enable GPS/network in settings
                gps.showSettingsAlert();
            }
             final Intent i;
   i=new Intent(this,SMS.class);
   i.putExtra("latitude", latitude);
i.putExtra("longitude", longitude);
            startActivity(i);
        }
    });

} 
```

然后在 SMS.class 中获取您的 lat 和 lng `onCreate`。你会得到价值

# sql - 内联查询与 with 子句的性能问题

> ID：14889654
> 
> 赞同：-1
> 
> 时间：2013-02-15T06:55:36.573
> 
> 标签：sql, performance, oracle11g, database-performance

我有一个结构如下的查询：

```
select (select first_name 
        from sub_table_1,
             sub_table_2,
             sub_table_3 
        where <where clause for sub_table 1,2,4> 
          and sub_table_1.col_1=table_1.col_1) first_name ,
       (select last_name 
        from sub_table_1,
             sub_table_2,
             sub_table_3 
        where <where clause for sub_table 1,2,4> 
              and sub_table_1.col_1=table_1.col_1) last_name ,
       <other select clause for table 1,2,3>
from table_1,
     table_2,
     table_3
where <Where clauses>
union
select (select first_name 
        from sub_table_1,
             sub_table_2,
             sub_table_3 
        where <where clause for sub_table 1,2,3> 
          and sub_table_1.col_1=table_4.col_1) first_name ,
       (select last_name 
        from sub_table_1,
             sub_table_2,
             sub_table_3 
        where <where clause for sub_table 1,2,3> 
          and sub_table_1.col_1=table_4.col_1) last_name ,
       <other select clause for table 4,5,6>
from table_4,
     table_5,
     table_6
where <Where clauses> 
```

我想作为我是否参加：

```
(select first_name , last_name
    from sub_table_1,
    sub_table_2,
    sub_table_3 
    where <where clause for sub_table 1,2,3> 
    and sub_table_1.col_1=table_4.col_1) first_name ,
        (select last_name 
    from sub_table_1,
    sub_table_2,
    sub_table_3 
    where <where clause for sub_table 1,2,3> ) 
```

将帮助我使查询更快更好，否则会产生不利影响。

另请注意，此子查询可能会在其中获取大约 10000 条记录。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:24:14.280

据我所知，公用表表达式（WITH 子句）对查询有两个潜在影响。

*   它们允许优化器具体化结果集，有效地创建一个临时表来保存结果。据我所知，它执行此操作的条件没有记录，但我已经读过，如果集合的大小超过会话的排序区域大小，并且结果将在查询。

*   有时会出现与 CTE 查询优化相关的错误。

所以在性能方面，如果您有一个多次使用的大型结果集，那么我认为它是 CTE 的更好候选者。

我倾向于在 Oracle 和 PostgreSQL 中大量使用它们，因为我发现它们使代码比嵌套的内联视图更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:36:29.033

如果您继续将其作为子查询进行，则使用 CTE / WITH 子句不太可能影响性能，因为 SQL 解释器将有效地将其扩展为长形式 - 用于此类目的（即不使用递归 CTE 的地方） ，使用 CTE 是一种有效地编写更 DRY 的代码的方式。

可以肯定的是，比较两个版本产生的查询计划。

在任何一种情况下，现有的查询结构都非常低效，因为它实际上必须为主查询中返回的每一行单独执行每个子查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T10:18:37.517

根据我在 11gR2 中的经验，使用 WITH 子句可能会更慢。提示`materialize`可以非常有效并大大缩短执行时间。但正如 Mark Ba​​nnister 所说，要进行真正的调整，您需要制定执行计划。

# database-design - 只是想知道各种层次结构场景，例如员工经理关系

> ID：14889657
> 
> 赞同：0
> 
> 时间：2013-02-15T06:56:18.153
> 
> 标签：database-design, wiki

我想知道各种业务场景，其中可以设计一个或多个表创建循环的层次结构。

例如。员工 - 一对多的经理关系 Employee(empid, name, managerid) 经理 id 引用 empid

User-Friend 关系多对多类似于许多社交媒体网站 User(userid, name, gender) UserFriendMap(userid,friendid) UserId 引用 user 表，FriendId 也引用 User 表。UserId 不等于 FriendId

您在职业生涯中使用过或能想到的其他可能案例是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:21:44.060

测试-测试，其中一个测试包含多个需要执行的子测试。

族谱表中的人，通过表示孩子的连接表。

一台服务器是主服务器而其他服务器复制的服务器。

而且，由于这个问题非常开放，不妨给出一些关于[父子维度的](http://technet.microsoft.com/en-us/library/ms174846.aspx)文档。

再看一下堆栈溢出，这似乎是这里的骗局：[当我们需要在数据库设计中使用一对一关系时？](https://stackoverflow.com/questions/6352324/when-we-need-to-use-1-to-1-relationship-in-database-design/6362543#6362543)

# c# - 删除特定标签（ ) 从 xsd 文件使用 C#

> ID：14889660
> 
> 赞同：0
> 
> 时间：2013-02-15T06:56:36.333
> 
> 标签：c#, regex, xsd

我是 XSD 的新手。我有一个 XSD 文件，其中以下内容在 xsd 文件中出现了几次。

```
<xs:any namespace="##any" minOccurs="0" maxOccurs="unbound">
  <xs:annotation>
     <xs:documentation> blah blah blah</xs:documentation>
  </xs:annotation>
</xs:any> 
```

我必须从 XSD 文件中删除这部分，其中这些“任何”标记使用 C#。我尝试使用 System.Xml.Schema 但失败了，因为这个片段可以是任何级别。然后我尝试使用以'开头的正则表达式xs:any' 并以带有角括号的 '/xs:any' 结尾，但未能写出确切的模式。请帮我解决。它可能是 System.Xml.Schema 或 Regex 或任何其他方式。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:03:54.857

您可以为此使用 LINQ to XML：

```
XNamespace xs = "http://www.w3.org/2001/XMLSchema";
var doc = XDocument.Load(your xsd file);
doc.Descendants(xs + "any").Remove(); 
```

# ruby-on-rails-3 - 在 linode 生产中延迟的作业在一段时间后停止

> ID：14889661
> 
> 赞同：2
> 
> 时间：2013-02-15T06:56:38.527
> 
> 标签：ruby-on-rails-3, nginx, delayed-job, linode

我在rails3 应用程序中使用delayed_jobs 3.0 gem 进行电子邮件通知。它使用 nginx+capistrano 部署在 linode 上。我的 linode 配置是 512MB 的 RAM 和 24GB 的存储空间。在那两个实例正在运行。

第二个实例的延迟工作给出了问题。一段时间后它会关闭并需要手动重新启动。Production.log 和delayed_jobs.log 上没有错误。当我发出命令“free -m”时，结果显示为：缓存的总使用的空闲共享缓冲区内存：496 415 80 0 5 45 -/+ 缓冲区/缓存：364 131 交换：255 130 125

我无法找出它下降的原因，请建议我可能的解决方案。

# jsf - Bean 验证和复杂对象

> ID：14889663
> 
> 赞同：0
> 
> 时间：2013-02-15T06:56:52.387
> 
> 标签：jsf, bean-validation, disabled-input

我有一个有几个字段的 bean

```
@NotNull( message = "{ch.ethz.id.wai.doi.validation.doi.missingdoi}" )
@Pattern( regexp = "10\\.[\\d.]+/.*", message = "{ch.ethz.id.wai.doi.validation.doi.invalidDoi}" )
private String  doi;

@ManyToOne
@NotNull( message = "{ch.ethz.id.wai.doi.validation.doi.missingpool}" )
private DoiPool doiPool; 
```

第一个注释在 JSF 中按预期工作

```
<h:inputText
    id       = "doi"
    value    = "#{detailModel.afterObject.doi}"
/>
<h:messages for="doi" style="clear: both; color: red;"/> 
```

对于另一个字段，我有一个禁用的输入文本，我在其中放置了引用对象的名称。用户可以通过单击按钮并在单独的视图中选择它来指定对象。

```
<h:inputText
    id       = "doiPool"
    value    = "#{detailModel.afterObject.doiPool.name}"
    disabled = "true"
/>
<h:messages for="doiPool" style="clear: both; color: red;"/> 
```

由于 the`inputText`不是指它的名字，`detailModel.afterObject.doiPool`而是指它的名字，所以什么也没有发生。

`detailModel.afterObject.doiPool`即使不能使用输入字段直接编辑，我如何强制验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:15:32.320

在处理表单提交期间会跳过禁用的输入。

让`disabled`属性`false`在回发期间在呈现响应之外的其他阶段进行评估。

```
<h:inputText ... disabled="#{not facesContext.postback or facesContext.renderResponse}" /> 
```

这样，它将`false`在表单提交期间进行评估，从而被包含在处理中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T16:59:17.773

作为对 BalusC 答案的补充：

`@NotNull`是在对象上指定的，而`DoiPool`不是他的名字（显示在文本字段中）。为了使其工作，文本字段需要绑定到验证字段：

```
<h:inputText
  id       = "doiPool"
  value    = "#{detailModel.afterObject.doiPool}"
  disabled = "#{facesContext.renderResponse}"
>
    <f:converter converterId="ch.ethz.id.wai.doi.DoiPoolConverter"></f:converter>
</h:inputText> 
```

转换器只是返回`getName()`对象的。

```
@FacesConverter( "ch.ethz.id.wai.doi.DoiPoolConverter" )
public class DoiPoolConverter implements Converter
{

    /**
     * This converter works only in the other direction.
     *
     * @return null
     */
    @Override
    public Object getAsObject( FacesContext facesContext, UIComponent uiComponent, String string )
    {
            return null;
    }

    @Override
    public String getAsString( FacesContext facesContext, UIComponent uiComponent, Object object )
    {
            if ( object instanceof DoiPool )
            {
                    return ( (DoiPool)object ).getName();
            }
            return null;
    }
} 
```

# extjs - 在 extjs4 Ext.MessageBox.alert() msg 中显示空白窗口？

> ID：14889666
> 
> 赞同：1
> 
> 时间：2013-02-15T06:57:17.053
> 
> 标签：extjs, extjs4

我在 extjs4 中工作，我将在屏幕上打印一个消息框，但它显示一个空白消息窗口。其中没有显示。

这是我的代码：-

```
Ext.application({
    name: 'App',

    appFolder: 'app',

    //controllers: ['Books'],
    requires:[
                 'Ext.window.MessageBox',
              //   'Ext.tip.*'
             ],
    launch: function() {
        Ext.create('Ext.tab.Panel', {
            renderTo: Ext.getBody(),
            height: 100,
            width: 200,
            items: [
                {
                    // Explicitly define the xtype of this Component configuration.
                    // This tells the Container (the tab panel in this case)
                    // to instantiate a Ext.panel.Panel when it deems necessary
                    xtype: 'panel',
                    title: 'Tab One',
                    html: 'The first tab',
                    listeners: {
                        render: function() {
                           //Ext.MessageBox.alert('Rendered One', 'Tab One was rendered.');
                             Ext.Msg.alert('hi', 'Please enter your name:');
                            //Ext.MessageBox.confirm('Confirm', 'Are you sure you want to do that?');
                            //alert("hi");

                        }
                    }
                },
                {
                    // this component configuration does not have an xtype since 'panel' is the default
                    // xtype for all Component configurations in a Container
                    title: 'Tab Two',
                    html: 'The second tab',
                    listeners: {
                        render: function() {
                            //Ext.MessageBox.alert('Rendered One', 'Tab Two was rendered.');
                        }
                    }
                }
            ]
        });
    }
}); 
```

这是消息屏幕窗口

![在此处输入图像描述](../Images/32c0a9ea86425efa869f9e7f99409af0.png)

没有任何 messageBox 方法在此代码中工作有什么问题？请给我一些建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:51:14.400

使用“boxready”事件（[jsfiddle](http://jsfiddle.net/YpuFx/)）。

如果输出到控制台：

```
...
render: function() {
    console.log(Ext.Msg.alert('hi', 'Alert message'))
}
.... 
```

在“渲染”监听器中，您会看到错误地计算了警报的大小和位置：

```
...
width: NaN
x: -41
... 
```

# node.js - 在另一个休息函数中调用一个休息函数

> ID：14889673
> 
> 赞同：0
> 
> 时间：2013-02-15T06:58:19.440
> 
> 标签：node.js, mongodb, rest, express

我有两个资源，称为“项目”和“标签”。添加新项目时，数据通过 POST 传输，并传递到 project.create(req, res)。这会将项目保存在 mongodb 数据库中，并`res.send(200);`在成功时返回。

我希望项目和标签具有多对多关系，以便我可以轻松列出所有标签、列出项目标签和列出标签项目。

存储这些标签的最简单方法是在 project.create 函数中查找+更新这些标签，然后将它们的 id 数组保存在一个数组中`project.tags`。但是，我觉得这违反了 DRY ......我在 tag.create(req, res) 中有相同的标签 find+upsert 代码。

我怎样才能使它在调用 project.create 时调用 tag.create？我也刚刚意识到，如果我创建一些执行 find+upsert 的中间件会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:21:54.063

免责声明：此答案涉及 REST API 的一般良好实践（不是特别针对 MongoDB）。

**了解现实生活中的 REST API 的一件重要事情是，某些资源可以是只读的（通常使用 MapReduce 从读写资源生成）。**

假设您在概念上在项目和关键字之间有一个 nn 关联。修改此类链接更自然的地方是在项目中。因此，例如，您将拥有：

*   `GET`，`PUT`或`DELETE` `/project/stackOverflow`（真实对象），
*   `GET` `/keyword/QnA`（虚拟对象*又名*查询）。

# asp.net - 如何在 asp.net 中获取文件的最后修改时间？

> ID：14889678
> 
> 赞同：3
> 
> 时间：2013-02-15T06:59:01.313
> 
> 标签：asp.net, file, time

我需要找到一天中最后一次修改文件的时间**。**

使用下面的代码我只得到**日期**：

```
System.IO.File.GetLastWriteTime(Server.MapPath("myFile.txt")).ToString("D"); 
```

如何只获得时间部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T07:13:45.860

使用 HH、mm、ss：

```
System.IO.File.GetLastWriteTime(Server.MapPath("myFile.txt")).ToString("HH:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T07:03:37.137

可能这会有所帮助：

```
 System.IO.File.GetLastWriteTime(@"C:\MyPath\a.txt").TimeOfDay.ToString() 
```

我去这个：

```
17:55:14.3229896 
```

您可以根据自己的方便进行格式化

# angularjs - 为什么这个 $apply in 指令会抛出 value undefined 错误

> ID：14889683
> 
> 赞同：1
> 
> 时间：2013-02-15T06:59:09.790
> 
> 标签：angularjs

我正在尝试使用 Angular js 编写指令，其中单击按钮必须增加一个`count`值。

在单击事件处理程序上，我尝试使用`scope.$apply`构造增加值，但它`Syntax Error: Token 'undefined' not a primary expression at column NaN of the expression [count++] starting at [count++]`在控制台中引发错误。

标记

```
<div ng-app="myApp">
    <div ng-controller="MainCtrl">
        <div my-directive >
        </div>
    </div>
</div> 
```

JS

```
var myApp = angular.module('myApp', []);

myApp.directive('myDirective', function(){
    return {
        scope: {},
        template: '<div>{{count}}</div><input type="button" class="increment" value="Increment" />',
        link: function(scope, iElement, iAttrs, controller) {
            console.log('link', scope.count)
            iElement.on('click', '.increment', function(){
                console.log('click', scope.count);
                scope.$apply('count++');
            })
        },
        controller: function($scope){
            console.log('controller')
            $scope.count = 0;
        }
    };
});

myApp.controller('MainCtrl', ['$scope', function($scope){
}]); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/3gNus/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:07:42.503

将您的表情更改为

```
count = count + 1 
```

解决问题。演示：[小提琴](http://jsfiddle.net/BinaryMuse/3gNus/1/)

由于 Angular 不`eval`用于计算表达式，因此您不能在其中使用全部 JavaScript；这是这些例外之一。如果您*确实*需要更强大的功能，可以将 JavaScript 函数传递给`$apply`（演示：[Fiddle](http://jsfiddle.net/BinaryMuse/3gNus/2/)）：

```
scope.$apply(function() {
  scope.count++;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T07:08:06.057

为什么不直接使用`ng-click`？

```
<body ng-controller='MainCtrl'>
  <button ng-click="increment()" value="Increment Me!">
  <h1>{{count}}</h1>
</body> 
```

在你的 JS 中：

```
function MainCtrl($scope) {
  $scope.count = 0;
  $scope.increment = function() { $scope.count++; };
} 
```

# eclipse - ExtJS 日期字段不可点击

> ID：14889684
> 
> 赞同：1
> 
> 时间：2013-02-15T06:59:21.267
> 
> 标签：eclipse, jquery, extjs, tomcat7

我的 JSP 代码不会选择日期，也不会显示我的组合框的数据。我不知道是什么问题。当我让我的代码在另一台电脑上运行时，它工作正常。我正在使用 eclipse juno、tomcat 7、jquery 和 extjs ..请帮助..

![我的 JSP 代码不会选择日期，也不会显示我的组合框的数据。 我正在使用 eclipse juno、tomcat 7、jquery 和 extjs ..请帮助..](../Images/9e72d83131bef23116ff917312dcc821.png)

这是我的 JSP 代码。

```
var genres = new Ext.data.SimpleStore({
        fields: ['id', 'genre'],
        data : [['1','Comedy'],['2','Drama'],['3','Action']]
    });

    var movie_form = new Ext.FormPanel({
        url: 'localhost:8080',
        renderTo: document.body,
        frame: true,
        title: 'Movie Information Form',
        width: 250,
        items: [{
            xtype: 'textfield',
            fieldLabel: 'Title',
            name: 'title',
            allowBlank: false
        },{
            xtype: 'textfield',
            fieldLabel: 'Director',
            name: 'director',
            vtype: 'name'
        },{
            xtype: 'datefield',
            fieldLabel: 'Released',
            name: 'released',
            disabledDays: [0]
        },{
            xtype: 'radio',
            fieldLabel: 'Filmed In',
            name: 'filmed_in',
            boxLabel: 'Color'
        },{
            xtype: 'radio',
            hideLabel: false,
            labelSeparator: '',
            name: 'filmed_in',
            boxLabel: 'Black and White' 
        },{
            xtype: 'checkbox',
            fieldLabel: 'Bad Movie',
            name: 'badmovie'
        },{
            xtype: 'combo',
            name: 'genre',
            fieldLabel: 'Genre',
            mode: 'local',
            store: genres,
            displayField:'genre',
            width: 120

        }] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:32:10.450

我的第一个猜测是您使用的是某个版本的 IE。由于它是 localhost，当 Extjs 正确或错误地检测到它时，您可能会获得 Intranet 兼容模式，将您的 IE 版本降级为其他版本。

将`<meta http-equiv="X-UA-Compatible" content="IE=edge" />`标签放在页面顶部，以强制浏览器以与普通互联网上的某人相同的方式呈现，并强制正在查看它的人使用标准模式。

另外，请确保页面顶部的 doctype 标签是：

```
<!doctype html> 
```

# windows-phone-7 - WP7.x APP是否可以使用16：9（720P）设备上的全部空间

> ID：14889685
> 
> 赞同：2
> 
> 时间：2013-02-15T06:59:41.917
> 
> 标签：windows-phone-7, xaml

我有使用 WP7.x SDK 的应用程序。我没有使用任何 Window Phone 8 功能。我的应用程序的 XAML 页面非常适合 WVGA 和 WXGA，但在 720P 屏幕顶部有一些空白区域。我该如何解决这个问题（我不想为 Window Phone 8 创建单独的版本）。请告知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:47:07.773

不幸的是，这是不可能的。在 WP8 设备上运行的 WP7 应用程序被限制在 480x800 的容器中。

要利用 720p 屏幕，您必须构建应用程序的 WP8 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T14:24:13.937

至少在图形上这是可能的。您可以正确处理 WP7 XNA 输入和图形：在这里查看我的 awnswer：[https ://stackoverflow.com/a/23457119/766304](https://stackoverflow.com/a/23457119/766304)

您要做的第二件事是使用 XNA 呈现您的 Silverlight / XAML UI。从这里获得更多信息：http: [//msdn.microsoft.com/en-us/library/hh221583.aspx](http://msdn.microsoft.com/en-us/library/hh221583.aspx)

所有这些都经过测试并且运行良好，但这只会操纵渲染而不是 XAML 输入端，输入修复可能是可能的，也可能不是。这两个纵横比之间的差异仍然很小，以至于结果可能足够好。

# css - 如何垂直分割 2 种颜色的文本？

> ID：14889689
> 
> 赞同：3
> 
> 时间：2013-02-15T07:00:17.323
> 
> 标签：css, typography

我希望我的 div 中的一个单词使用纯 CSS 垂直分成 2 种颜色，知道我该怎么做吗？

![](../Images/c78bfea30063cccbb94b67539e0179c9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:02:28.693

你当然可以使用 CSS3 渐变和剪辑属性.. 我知道我使用的 webkits，但不确定其他浏览器，如果你愿意，你可以试试这个

[**演示**](http://jsfiddle.net/5rJ8R/)（请在 chrome 上查看）

```
div {
  font: 40px Arial;
  background: -webkit-linear-gradient(top, #0d2172 0%,#0d2172 50%,#ff2828 50%,#ff0000 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
} 
```

> 注意：作为网络开发人员没有使用任何最新的浏览器，如果您知道任何相同的专有属性，请随时编辑我的答案

# cisco - 调试 *生成树事件 * 未显示在 2960 路由器上？

> ID：14889692
> 
> 赞同：0
> 
> 时间：2013-02-15T07:00:28.000
> 
> 标签：cisco, cisco-ios

在数据包跟踪器中的实验室 5.5.1 上做我的 ccna3。问题要求在 2960 路由器上执行*调试生成树事件命令。*这不起作用。所有路由器都开启了 STP。

下图是带有根桥的交换机的捕获。此命令不适用于 3 个开关中的任何一个，并且书中清楚地写明要对所有 3 个开关执行此命令。

任何帮助将不胜感激

```
S2#show spanning-tree 
VLAN0001
Spanning tree enabled protocol ieee
Root ID    Priority    32769
         Address     0001.643C.50E9
         This bridge is the root
         Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec

Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
         Address     0001.643C.50E9
         Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
         Aging Time  20

Interface        Role Sts Cost      Prio.Nbr Type
---------------- ---- --- --------- -------- --------------------------------
Fa0/1            Desg FWD 19        128.1    P2p
Fa0/2            Desg FWD 19        128.2    P2p
Fa0/6            Desg FWD 19        128.6    P2p
Fa0/11           Desg FWD 19        128.11   P2p
Fa0/18           Desg FWD 19        128.18   P2p

S2#debug ?
ip       IP information
sw-vlan  vlan manager

S2#debug spanning-tree events
          ^
% Invalid input detected at '^' marker. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T03:14:17.963

这是一个旧线程，但是，它可能是 Packet Tracer 的限制。鉴于这不是路由器，实际上是交换机，我会从输出中假设。在这种情况下，这是一个限制。

# java - 如何在Android中获取源类文件的包名？

> ID：14889694
> 
> 赞同：13
> 
> 时间：2013-02-15T07:00:48.987
> 
> 标签：java, android, class, android-library, package-managers

我只使用一个项目来移植 lite 和完整版本，因为我只是在更新 Manifest 文件包名称。

我的项目结构是这样的

我的应用程序
      |_src
          |_com.example.myapp
                                              |_MyClass.java

我的清单包名称不同。

包="com.example.myapplite"

我正在使用一个库项目，因为我想要在 MyApp 中使用的类的包名称。

我用过这个

```
 System.out.println("Package Name " + context.getPackageName()); 
```

但它给了我一个清单文件包名称值，即。*com.example.myapplite*

我想要 MyClass.java 包名。IE。*com.example.myapp*

我也知道这一点

```
 MyClass mClass = new MyClass();
 Package pack = mClass.getClass().getPackage(); 
```

但我不能使用这种方法，因为我正在使用以下方法在我的库项目中获取类文件

```
Class c = Class.forName("package_name.MyClass"); 
```

如何以编程方式获取 MyClass.java 文件的包名？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T07:06:39.163

可能会有所帮助

```
package org.kodejava.example.lang;
import java.util.Date;

public class ObtainingPackageName {
public static void main(String[] args) {
    //
    // Create an instance of Date class, and then obtain the class package
    // name.
    //
    Date date = new Date();
    Package pack = date.getClass().getPackage();
    String packageName = pack.getName();
    System.out.println("Package Name = " + packageName);

    //
    // Create an insatnce of our class and again get its package name
    //
    ObtainingPackageName o = new ObtainingPackageName();
    packageName = o.getClass().getPackage().getName();
    System.out.println("Package Name = " + packageName);
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-22T23:16:34.183

Kotlin 解决方案：

```
val packageName = this.javaClass.`package`?.name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-09T05:12:55.440

```
String packageName = this.getClass().getPackage().getName(); 
```

肯定会工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T07:19:33.673

尝试这个，

```
 try {
        Class c = Class.forName("package_name.MyClass");

        Object o = c.newInstance();

        Package p = o.getClass().getPackage();

        System.out.println("Package Name :: " + p.getName());

    } catch (ClassNotFoundException e) {            
        e.printStackTrace();
    } catch (InstantiationException e) {            
        e.printStackTrace();
    } catch (IllegalAccessException e) {            
        e.printStackTrace();
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-24T14:00:22.877

一些类的简单例子`NotificationListener`：

```
Timber.d(NotificationListener.class.getPackage().getName());
Timber.d(NotificationListener.class.getSimpleName());
Timber.d(NotificationListener.class.getName()); 
```

输出：

```
D/PermissionsUtil: com.example.receivers
D/PermissionsUtil: NotificationListener
D/PermissionsUtil: com.example.receivers.NotificationListener 
```

# java - 使用 Http-Client 上传 BIG 文件

> ID：14889703
> 
> 赞同：1
> 
> 时间：2013-02-15T07:01:43.007
> 
> 标签：java, file-upload, httpclient

我正在尝试使用`HTTP Client`.it 在服务器上上传文件。它成功完成了它的任务。但是当我尝试上传大小为 1.5 GB 的 Zip 文件时，它会抛出一个

> 异常：请求不包含多部分/表单数据或多部分/混合流，内容类型标头为空

请帮忙，我该如何解决这个*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:07:53.417

我认为您应该在 http 标头中设置正确的内容类型。将内容类型设置为“应用程序/zip”。

# selenium - 如何在使用 RC 创建脚本时使用 selenium-server-standalone-2.0rc2

> ID：14889705
> 
> 赞同：-1
> 
> 时间：2013-02-15T07:01:47.977
> 
> 标签：selenium, selenium-rc, selenium-webdriver, selenium-grid

```
package com.html;

import com.thoughtworks.selenium.DefaultSelenium;
import com.thoughtworks.selenium.Selenium;

import junit.framework.TestCase;

public class Html5 extends TestCase{`enter code here`
    Selenium selenium1;
    public void setUp()
    {
        selenium1=new DefaultSelenium("localhost",4444,"*firefox","http://live.com");
        selenium1.start();
    }
} 
```

com.thoughtworks.selenium.DefaultSelenium 中出现错误；和 DefaultSelenium("localhost",4444,"*firefox"," [http://live.com](http://live.com) "); 线。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:53:42.363

第一的 ：

字符串在那里做什么`enter code here`？

第二 ：

`import com.thoughtworks.selenium.DefaultSelenium;`如果和 中有错误`new DefaultSelenium`，那肯定是 jar 不在您的类路径中

`selenium-server-standalone`包含 Selenium 服务器类，但不包含客户端类，其中`DefaultSelenium is`. 您必须将客户端 jars 带入您的类路径中，这就是`selenium2-java`我认为的这个版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:30:41.037

我认为您需要在构造函数中为 firefox.exe 提供路径..所以

```
selenium1 = new DefaultSelenium("localhost",4444,"*firefox","http://live.com");   Goes like
selenium1 = new DefaultSelenium("localhost",4444,"*firefox C:\Documents and Settings\Mozilla Firefox\firefox.exe","http://live.com"); 
```

试试这个。

# ember.js - Ember.js 将路由从控制器传递到 linkTo

> ID：14889707
> 
> 赞同：1
> 
> 时间：2013-02-15T07:01:51.683
> 
> 标签：ember.js

在我的控制器中，我有以下定义：

```
 this.tabs = Ember.A([
                Ember.Object.create({
                    title:"All Contacts",
                    active:true,
                    linkTo:"contact.list.all"
                }),
                Ember.Object.create({
                    title:"My Contacts",
                    active:false,
                    linkTo:"contact.list.my"
                })

]); 
```

在我的html中，我有以下循环：

```
{{#each tab in tabs}}
        <li {{bindAttr class="tab.active:active"}} > {{#linkTo tab.linkTo data-toggle="tab"}} {{tab.title}} {{/linkTo}}</li>
{{/each}} 
```

当我运行此视图时，我收到一条错误消息，提示“找不到路由 tab.linkTo”，因为 linkTo Helper 需要一个路由对象。

我也尝试过直接使用例如传递路线

```
linkTo:App.Router.router.getHandler("contact.list.my") 
```

但我得到同样的错误。

那么如何动态设置linkTo helper的路由呢？

# java - 来自自定义小部件的 GWT 加载面板

> ID：14889709
> 
> 赞同：1
> 
> 时间：2013-02-15T07:01:57.393
> 
> 标签：java, gwt, event-handling

我在 GWT 中创建了一个自定义小部件，例如：

```
public class Header extends Composite {
    private Button btnContribute;

    public Header() {
        btnContribute = new Button("Contribute");
    }
} //This is only a sample - in actual there are few bundled widgets 
```

在我的入口点类中，我将此自定义小部件用作我的 dockLayoutPanel 的北面板，如下所示：

```
public class MyClass implements EntryPoint {
private DockLayoutPanel dockLayoutPanel;
private ScrollPanel contentScrollPanel;

private Header header; //My custom widget

public void onModuleLoad() {
    RootPanel rootPanel = RootPanel.get();

    dockLayoutPanel = new DockLayoutPanel(Unit.EM); 
    rootPanel.add(dockLayoutPanel, 20, 10);

    header = new Header();
    dockLayoutPanel.addNorth(header, 7.7);

    dockLayoutPanel.addSouth(new HTML("south"), 7.7);
    dockLayoutPanel.addWest(new HTML("west"), 7.7);

    contentScrollPanel = new ScrollPanel();
    dockLayoutPanel.add(contentScrollPanel);

    htmlContent = new HTML("content", true);
    contentScrollPanel.setWidget(htmlContent);
    htmlContent.setSize("100%", "100%");
}
} 
```

我想在我的自定义小部件“btnContribute”中的按钮上创建一个 onClick 事件处理程序，以便它动态更新“contentScrollPanel”，删除当前内容，并在其中加载一个表单。

问题是当我尝试在我的自定义小部件中创建事件处理程序时，我无法弄清楚我应该如何从我的入口点类中添加和删除小部件..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:11:59.707

`Header`在类中创建吸气剂；

在您的`Entrypoint`类中添加如下处理程序：

```
header.getbtnContribute().addClickHandler(new ClickHandler() {
        @Override
        public void onClick(ClickEvent event) {
            //TODO
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:13:43.127

在您的自定义小部件中创建一个方法，该方法接受一个`ClickHandler`（如`addContributeClickHandler(ClickHandler handler)`. 在此方法中，将给定添加`ClickHandler`到您的`btnContribute`.

`contentScrollPanel`在您的 EntryPoint 中创建后，调用

```
header.addContributeClickHandler(new ClickHandler(){
    @Override
    public void onClick(ClickEvent event) {
        contentScrollPanel.clear();
        //...
    }
}); 
```

`contentScrollPanel`必须是`final`或成员才能使其正常工作。

# c# - 每个会话存储大量数据 ASP.NET MVC

> ID：14889710
> 
> 赞同：2
> 
> 时间：2013-02-15T07:02:02.360
> 
> 标签：c#, session, asp.net-mvc-4

我基于 MVC 的应用程序挂钩了一些发送回大量数据的 Web 服务！使用相同的，我呈现我的观点。网络服务很慢而且我无法控制。所以我想在每个会话中存储这些信息，但我担心这会使我的网络服务器瘫痪。如果有几百个用户，Web 服务器将耗尽内存。

有没有办法可以将这个会话数据存储在每个会话的文件中？我更关注一些开箱即用的开源解决方案。

我欢迎，新的建议也是如此！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:22:41.290

您可以在会话存储中存储几乎任何对象，除了一些通常与在服务器场上运行有关的例外。但是，我将在这里忽略这些情况。

如果您只处理几 MB 的数据，则将其存储在 Session 对象（或 @Rick 建议的缓存）中不一定是一个主要问题。从 Web 服务返回数据并解析为您自己的内部数据结构后，只需将数据结构的根对象放入 Session 中即可。我经常使用这种方法来存储需要很长时间才能运行的数据库查询的结果，尤其是在查询条件不太可能经常更改的情况下。

对于较大的数据集，您可能应该使用数据库来存储信息。创建与您要返回的数据结构相匹配的表，并以某种方式标记数据以指示它的历史以及获取它时使用的标准。根据需要进行更新，并在数据库中查询每个客户端请求的记录。

还有很多其他选项，包括创建临时文件来存储数据，使用 SessionID 来识别它们，但我建议先研究数据库选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:10:05.793

缓存是你的朋友。而且由于您使用 MS 技术，您可能想看看[Cache Class](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T09:11:13.083

您可以将结果集合序列化并将其保存为 xml 文件（甚至使用 linq/XPath 直接从 XML 处理它），或使用任何 .net 本机 xml 数据库将数据存储和持久保存在文件中。

# php - Drupal 7x 和 Moodle 2X 的双面集成？

> ID：14889713
> 
> 赞同：0
> 
> 时间：2013-02-15T07:02:10.457
> 
> 标签：php, drupal-7, integration, drupal-modules, moodle

大家好，是否有可能从双方集成 Drupal 7X 和 Moodle 2x。用户在 drupal 中创建，它也在 moodle 中使用相同的名称登录，用户在 moodle 中创建，它也在 drupal 中使用相同的名称登录。我将一侧的drupal集成到了moodle。但是如果可能的话，我不知道如何进行双面集成，任何人都可以帮助mi。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:09:05.977

为了通过其他 db Moodle 进行身份验证，请提供称为外部数据库 ( [http://docs.moodle.org/24/en/External_database_authentication](http://docs.moodle.org/24/en/External_database_authentication) ) 的出色身份验证插件。

您可以在设置中填写您的 drupal 数据库详细信息，并对在 drupal 中创建的相同用户进行身份验证。

希望它会帮助你。

# c++ - C++ cmake 错误 BOOST_ROOT DOXYGEN

> ID：14889719
> 
> 赞同：0
> 
> 时间：2013-02-15T07:02:37.347
> 
> 标签：c++, boost, build, cmake, doxygen

我正在尝试构建隐藏马尔可夫模型的 C++ 实现 - 从

```
http://www.cs.au.dk/~asand/?page_id=152 
```

我正在使用 g++ 4.6 编译器在 ubuntu 12.04 上编译它。

按照网页上提到的说明，输入

```
cmake . 
```

我收到以下错误，

```
-- Could NOT find Doxygen (missing:  DOXYGEN_EXECUTABLE) 
CMake Error at CMakeLists.txt:101 (message):
The Boost C++ libraries was not found.  Get Boost from
http://www.boost.org/ or set the environment variable BOOST_ROOT to point
to the root of boost directory. 
```

有人可以帮我解决这些问题。

我的 boost 文件夹位于

```
/usr/local/boost_1_52_0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:05:23.100

它告诉你设置 BOOST_ROOT 环境变量。所以就这样做：

```
BOOST_ROOT=/usr/local/boost_1_52_0 cmake 
```

（在 posix shell 中设置环境变量作为命令的前缀，只为该命令设置它；cmake 之后会记住 CMakeCache.txt 中的值）

我想它没有找到 doxygen 的事实并不重要。您仍然应该能够构建该库，只是无法为它生成好的文档，但这可能存在于网络上的某个地方，或者您可以直接在标题中阅读它。

# windows - 如何使用 Windows 批处理文件查找和替换文件中的字符串？

> ID：14889728
> 
> 赞同：-1
> 
> 时间：2013-02-15T07:03:53.757
> 
> 标签：windows, batch-file

使用 Windows 批处理文件在文件中查找和替换字符串的简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:06:08.450

没有开箱即用的功能，所以你需要使用第三方工具，如[sed](http://gnuwin32.sourceforge.net/packages/sed.htm)

# tabs - 在文本框中按 Tab 键后如何触发事件

> ID：14889732
> 
> 赞同：4
> 
> 时间：2013-02-15T07:04:12.113
> 
> 标签：tabs, jquery

`Tab`当我在文本框中按下键时，我想触发一个事件，例如显示警报消息。

```
<input type="text" />

$("input").blur(function (e) {
   if (e.which == 9)
       alert("Hurray!!!");
}); 
```

我想要发生的是，每当我在文本框中输入然后点击`Tab`它就会做一些事情。

我正在使用`jquery1.7.2.min.js`

我真的不知道我做得对不对。

对于演示[http://jsfiddle.net/QfCpC/](http://jsfiddle.net/QfCpC/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-15T07:08:24.523

```
$("input").keydown(function (e) {

   if (e.which == 9)
       alert("Hurray!!!");
}); 
```

**[小提琴演示](http://jsfiddle.net/QfCpC/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T07:09:35.480

这有帮助吗

```
$("input").live("keydown" , function (e) {
if (e.which == 9)
   alert("Hurray!!!");
}); 
```

[http://jsfiddle.net/QfCpC/3/](http://jsfiddle.net/QfCpC/3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T07:12:05.457

```
<input type="text" />

$("input").keydown(function (e) {
   if (e.which == 9)
        $('#someButton).trigger('click');//or you can directly call the handler also
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T07:16:23.080

```
$(document).ready(function() {

    $("input").bind("keydown",function (e) {

   if (e.which == 9)        
       alert("Hurray!!!");
});
}); 
```

演示在这里..

[http://jsfiddle.net/QfCpC/](http://jsfiddle.net/QfCpC/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T07:08:42.753

为了`e.which`正确设置参数，我相信必须从 keydown 事件中调用它。

看这里的小提琴。[http://jsfiddle.net/QfCpC/2/](http://jsfiddle.net/QfCpC/2/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-15T07:10:03.480

试试：http: **[//jsfiddle.net/cEzLL/](http://jsfiddle.net/cEzLL/)**

```
$("input").keydown(function (e) {
   if (e.keyCode === 9)
       alert("Hurray!!!");
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-15T07:11:12.140

原因是当你点击“标签”时会发生两个动作

1.  选项卡按钮的 KeyUp
2.  输入类型字段的模糊操作

现在根据您的代码，您正在将 eventlistner 添加到 blur 事件......并且 blur 事件没有为您提供键绑定的属性。

所以为了做到这一点，你需要绑定“keydown”。

```
$("input").keydown(function (e) {
  if (e.which == 9)
       alert("YEYYYYYYY!!!");
}); 
```

# twitter - PHP 检索最新推文

> ID：14889733
> 
> 赞同：1
> 
> 时间：2013-02-15T07:04:15.503
> 
> 标签：twitter, php

我目前正在使用以下代码从我的 Twitter 提要中检索最新的推文：

```
<?php
    $username='myUsername';
    $format = 'json';
    $tweet = json_decode(file_get_contents("http://api.twitter.com/1/statuses/user_timeline/{$username}.{$format}"));
    $latestTweet = htmlentities($tweet[0]->text, ENT_QUOTES);
    $latestTweet = preg_replace('/http:\/\/([a-z0-9_\.\-\+\&\!\#\~\/\,]+)/i', '<a href="http://$1" target="_blank">http://$1</a>', $latestTweet);
    $latestTweet = preg_replace('/@([a-z0-9_]+)/i', '<a href="http://twitter.com/$1" target="_blank">@$1</a>', $latestTweet);
    echo '<p class="inset white">'.$latestTweet.'</p>';
?> 
```

在 MAMP 上，这可以完美运行，但是在我的实时站点上，我什么也得不到，甚至没有服务器端错误消息。我在类似的帖子中读到，这可能与`allow_url_fopen = On`未在 php.ini 中设置有关，但设置似乎没有任何区别。

尽管 Twitter 可能已经改变了他们关于 API 使用的政策（我不相信他们已经改变了），但我还是不知道可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T16:34:06.187

我以前使用相同的方法，但不幸的是，它使用的是 Twitter API v1，并且 v1 不再可用（查看[https://dev.twitter.com/blog/api-v1-retirement-final-dates](https://dev.twitter.com/blog/api-v1-retirement-final-dates)了解更多详细信息） . 您现在需要拥有 OAuth 使用者和用户访问权限。GitHub themattharris 的 tmhOAuth 库对于显示 Twitter 提要非常方便。

您可以查看我在 stackoverflow 上发布的问题作为对您问题的参考：

[使用 tmhOAuth 和 PHP 显示最新的 Twitter 提要“创建日期”](https://stackoverflow.com/questions/17124612/display-latest-twitter-feed-date-created-using-tmhoauth-and-php)

它已经拥有如何访问需要在 Twitter 中检索的公共信息的代码。

# java - 休眠条件查询时间戳

> ID：14889741
> 
> 赞同：2
> 
> 时间：2013-02-15T07:05:12.920
> 
> 标签：java, hibernate, timestamp, criteria

我有一张表，其中有一列提交日期（没有时区的时间戳）。我需要列出表中具有特定日期作为提交日期的所有记录。但不要考虑数据库中的时间。我通过使用条件查询和休眠来检索记录。如何忽略这里的时间？

实际上，我从客户端传递了一个日期，并且必须检索与 submit_date 具有相同日期的记录。但是不需要考虑时间。

```
 else if(extjsFilter.getField().equals("submittedDate")) {
                            String str_date=extjsFilter.getValue(); 
                            SimpleDateFormat format1 = new SimpleDateFormat("MM/dd/yyyy");
                            SimpleDateFormat format2 = new SimpleDateFormat("yyyy-MM-dd");
                            Date date2 = format1.parse(str_date);
                            String datenew = format2.format(date2);
                            Date date = (Date)format2.parse(datenew);

                            if(extjsFilter.getType().equals("date"))
                            {
                                if(extjsFilter.getComparison().equals("gt"))
                                {
                                    Filter postDateFilterGT = getSession().enableFilter("jobFilterPostDateGT");
                                    postDateFilterGT.setParameter("postDateFilterGT", date);
                                }
                                if(extjsFilter.getComparison().equals("lt"))
                                {
                                    Filter postDateFilterLT = getSession().enableFilter("jobFilterPostDateLT");
                                    postDateFilterLT.setParameter("postDateFilterLT", date);
                                }
                                if(extjsFilter.getComparison().equals("eq"))
                                {
                                    Filter postDateFilterEQ = getSession().enableFilter("jobFilterPostDateEQ");
                                    postDateFilterEQ.setParameter("postDateFilterEQ", date);
                                }
                            }
} 
```

以上是我的代码。客户端使用 extjs 完成。extjs 过滤一个日期字段的服务器端代码是这样的。

下面给出了休眠。

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.hiringsteps.ats.job.domain">
    <class
        name="Job"
        table="hs_job_master"> 

        <id name="id" column="job_id" unsaved-value="null">
            <generator class="sequence">
                <param name="sequence">hs_job_id_seq</param>
            </generator>
        </id>

        <property name="submittedDate" column="submitted_date"/>                

        <filter name="jobFilterPostDateGT"><![CDATA[submitted_date > :postDateFilterGT]]></filter>
        <filter name="jobFilterPostDateLT"><![CDATA[submitted_date < :postDateFilterLT]]></filter>
        <filter name="jobFilterPostDateEQ"><![CDATA[:postDateFilterEQ = submitted_date]]></filter>  
    </class>    

    <filter-def name="jobFilterPostDateGT">
        <filter-param name="postDateFilterGT" type="date"/>
    </filter-def>
    <filter-def name="jobFilterPostDateLT">
        <filter-param name="postDateFilterLT" type="date"/>
    </filter-def>
    <filter-def name="jobFilterPostDateEQ">
        <filter-param name="postDateFilterEQ" type="date"/>
    </filter-def>
</hibernate-mapping> 
```

我在数据库中有两条记录，提交日期如下。

2013-02-15 00:00:00

2013-02-15 13:04:42.787

当我查询过滤日期为今天的记录时，仅检索提交日期为 2013-02-15 00:00:00 的第一条记录。

这是因为我用来查询的日期对象也有这个值'2013-02-15 00:00:00'

我将如何进行忽略时间部分的查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T08:12:14.037

为此，您必须应用一个限制，即选择提交日期和提交日期+1 之间的所有日期。

```
//Resticts the dates between start date 0000 hrs and end date 0000 hrs
criteria.add(Restrictions.ge("startDate", sDate)); 
criteria.add(Restrictions.lt("endDate", eDate)); 
```

在您的情况下， startDate = 2013-02-15 和 end date = 2013-02-16

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T08:23:15.380

您可以尝试以下代码，该代码利用原生 Oracle`trunc`函数在比较时丢弃时间。

```
criteria.add(Restrictions.sqlRestriction("trunc(submitted_date) = ?", submittedDate, org.hibernate.type.StandardBasicTypes.DATE)); 
```

您可以根据数据库提供程序修改功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T07:12:43.953

只需将限制添加到与列提交日期相对应的属性的条件中。你可以把它写成

```
criteria.add(Restrictions.eq("submittedDate"), '2013-02-15'); 
```

# php - 检查字符串是否与php中的另一个字符串相似？

> ID：14889745
> 
> 赞同：2
> 
> 时间：2013-02-15T07:05:23.680
> 
> 标签：php, string, if-statement

我需要检查是否，`$string1 == $string2`但我不希望一个大写而另一个是小写，例如我想`if (harrisburg == HARRISBURG)`返回 true！最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T07:07:43.260

`strtolower($string1) == strtolower($string2)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T07:10:27.150

`strcasecmp ( string $str1 , string $str2 )` 忽略大小写，如果相等则返回 0

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T07:17:59.387

试试这个，

```
$str1 = 'harrisburg';
$str2 = 'HARRISBURG'; 
```

**Option-1：**如果`$str2`值是大写的。

```
strtolower('$str2'); 
```

更多细节[strtolower — 将字符串设为小写](http://php.net/manual/en/function.strtolower.php)

**选项 2：**不区分大小写的字符串比较

```
strcasecmp ($str1 ,$str2) 
```

更多细节[strcasecmp - 二进制安全的不区分大小写的字符串比较](http://www.php.net/manual/en/function.strcasecmp.php)

**注意（对于选项 2）**：`Returns < 0 if str1 is less than str2; > 0 if str1 is greater than str2, and 0 if they are equal.`

这可以帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T07:11:56.180

```
strcmp ( strtolower($str1) , strtolower($str2)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-05T22:54:19.860

显然在PHP中有一个函数？此函数将返回传递的两个字符串之间的相似度值。不完全是OP所要求的，但考虑到问题标题，认为这将是一个相关的答案。

[相似文本（str1，str2）](http://php.net/manual/en/function.similar-text.php)

# objective-c - 日期作为 iPhone 中的上标格式

> ID：14889747
> 
> 赞同：2
> 
> 时间：2013-02-15T07:05:34.327
> 
> 标签：objective-c, nsdate

我想通过这样的编程在 iPhone 中显示日期

2013 年 2 月 1 日

表示上标“st”

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:12:17.487

您要查找的**类**`NSAttributeString`是，您要查找的**属性**是`NSSuperscriptAttributeName`。

参考：[Apple Docs 属性字符串](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/AttributedStrings/Articles/standardAttributes.html#//apple_ref/doc/uid/TP40004903-SW2)

# gwt - 如何创建动态增长的 CellTree

> ID：14889751
> 
> 赞同：0
> 
> 时间：2013-02-15T07:06:21.803
> 
> 标签：gwt, gwt2

我是 GWT 的新手，在创建子节点动态增长的树时遇到问题。当我的页面加载时，树看起来像这样：

```
ROOT_Node
    |
    |_Child 1
    |
    |_Child 2 
```

当用户点击 Child 1 或 Child 2 时，它们会像这样展开：

```
ROOT_Node
    |
    |_Child 1
    |   |
    |   |_Child 1_1
    |   |_Child 1_2
    |
    |_Child 2 
```

如果用户点击 Child 1_1，如果 Child 1_1 有任何子节点，它将再次展开。并且所有节点都会动态增长。我在 GWT TreeCell 上做了一些基本的示例，并了解它不会动态增长。因此，每当用户单击子节点时，我都会删除 CellTree 并添加新的 CellTree。这太糟糕了。至少我应该能够编写一些可以处理任意数量的子节点及其子节点的代码。

我已经阅读了一些 GWT 教程，包括官方 GWT 教程。但是找不到与此类问题相关的示例。教程只包含“if (value instanceof SomeClass) then do this”，添加某种选择处理程序等。如果我使用这种方法，我应该编写很多 if-then-else 块。

谁能帮我解决这个问题。或者有什么简单的方法可以在不使用 CellTree 的情况下显示树？清单对我有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:04:49.683

CellTree**确实**支持动态数据。

如果您想支持延迟加载或事先不知道层次结构，则可以使用[AsyncDataProvider 。](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/view/client/AsyncDataProvider.html)
还有一个展示使用动态数据的示例，可以在[这里](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCellTree)找到。

The use of all the `if (value instanceof SomeClass)` is necessary if you want to use different `Cells` for each tree level (see showcase example).

If `Child1` and `Child1_2` are of the same type and are supposed to be rendered in the same way, you can use a different approach. Instead of checking if the object is a specific class you could check a field in the object which tells you about to which level in the tree it belongs or if your objects are linked together via references (i.e. child object has a reference to it's parent) you can also make use of this information to create your `TreeViewModel`

# security - 如果确认电子邮件属于其他人怎么办？

> ID：14889765
> 
> 赞同：-1
> 
> 时间：2013-02-15T07:07:58.167
> 
> 标签：security, registration, email-confirmation

这可能是一个非常罕见的情况，但是：

如果`user A`使用不属于他的电子邮件在网站上注册帐户并在未确认的情况下使用它（因为现在许多网站允许您，至少以有限的方式）然后其他人`user B`试图使用他*实际*拥有的同一电子邮件注册一个帐户？

是否会显示“该电子邮件已与现有帐户相关联”的消息，它会允许两者使用相同`user A`的`user B`电子邮件访问该站点还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:13:56.227

它可能会给您“该电子邮件已与现有帐户相关联”的消息。用户 B 必须使用不同的电子邮件来创建帐户。

这是严格的一般情况。任何网站都可以有任何实现。我假设你问是因为你要实现你自己对这个特性的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:17:16.467

在我的解决方案中，我几乎总是使用电子邮件作为用户标识符，这意味着只能有一个用户与一个电子邮件地址关联。这意味着如果有人使用其他人的电子邮件，它确实会导致“此电子邮件已在使用中”。

但是，地址的真正所有者可以很容易地在他的电子邮件中收到密码提醒。

伪造电子邮件地址的解决方案；向指定的电子邮件发送帐户激活电子邮件，以便能够完成注册过程。

您的问题/疑问是在什么情况下出现的？

# ruby - 在运行时动态重新加载 somefile.rb？

> ID：14889774
> 
> 赞同：1
> 
> 时间：2013-02-15T07:08:42.793
> 
> 标签：ruby

我有两个 Ruby 文件：exec.rb 和 lib.rb。exec.rb 需要 lib.rb。每次修改lib.rb，都需要重启exec.rb。

运行时是否可以让 exec.rb 重新加载 lib.rb？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:12:11.990

您可以订阅文件更改通知。这是 osx 的一个库：[rb-fsevent](https://github.com/thibaudgg/rb-fsevent)。

当您收到文件更改的通知时，您可以重新加载它。

```
filename = './lib.rb' # get file name from event
load filename 
```

您应该使用`load`而不是`require`，因为`require`只加载文件一次，然后不会再次加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:14:15.327

可以使用[`File.mtime`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-mtime)并比较 lib.rb 的最后修改时间戳来执行此操作。

在您的代码中，获取`mtime`首次加载文件的时间：

```
last_mtime = File.mtime('lib.rb')
load 'lib.rb' 
```

稍后，在您处理的循环中，再次检查修改时间是否更改，并在必要时重新加载：

```
current_mtime = File.mtime('lib.rb')
if (current_mtime != last_mtime)
  last_mtime = current_mtime
  load 'lib.rb'
end 
```

我过去使用过类似的技术，效果很好。我设置了我的，所以它每五分钟检查一次，但您的需求可能会有所不同。

# hadoop - ImportTsv-HBASE 批量加载中的错误

> ID：14889776
> 
> 赞同：0
> 
> 时间：2013-02-15T07:08:57.820
> 
> 标签：hadoop, hbase

我有 hbase 0.94.0。我尝试使用 importtsv 工具进行批量导入。这是我给的命令

```
./hadoop jar /home/ericsson/Desktop/ProjectFiles/hbase-0.94.0/hbase-0.94.0.jar importtsv -Dimporttsv.columns=HBASE_ROW_KEY,a,b,c,d,e,f,g '-Dimporttsv.separator=,' Test1 /home/ericsson/Desktop/ProjectFiles/inputFiles1/CharginUsage-m-00000 
```

Test1-Hbase 中已经存在的我的表。/home/ericsson/Desktop/ProjectFiles/inputFiles1/CharginUsage-m-00000- 我有 CSV 文件的目录。

我收到以下错误：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: com/google/common/collect/Multimap
    at org.apache.hadoop.hbase.mapreduce.Driver.main(Driver.java:43)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.ClassNotFoundException: com.google.common.collect.Multimap
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 6 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:02:15.600

importtsv 任务需要 Google 的 Guava 库才能运行。这个库位于**$HBASE_HOME/lib/guava-.jar** 下。告诉 hadoop 在执行期间获取这个 guava jar 是很重要的。只需将 jar 从 hbase lib 复制到 hadoop lib。一个更体面的解决方案是将此 jar 路径添加到 hadoop 类路径或使用以下命令执行 hadoop 任务。

`export HADOOP_CLASSPATH=$HADOOP_CLASSPATH:$HBASE_HOME/lib/guava-<version>.jar`

或者

导出 HADOOP_CLASSPATH= ``hbase classpath`` /hadoop jar /home/ericsson/Desktop/ProjectFiles/hbase-0.94.0/hbase-0.94.0.jar importtsv -Dimporttsv.columns=HBASE_ROW_KEY,a,b,c,d,e,f,g '-Dimporttsv.separator=,'Test1 /home/ericsson/Desktop/ProjectFiles/inputFiles1/CharginUsage-m-00000*

# android - 在Android上接收来电时检测DTMF

> ID：14889779
> 
> 赞同：6
> 
> 时间：2013-02-15T07:09:11.427
> 
> 标签：android

我想知道我们是否可以在 android 中接收 DTMF 音。假设，我接到一个电话，一旦我接听电话，是否可以检测到其他人在我们通话期间按下的键。我已经走了通过许多有关此的堆栈溢出问题，但其中大多数都没有提供解决方案。

通过java反射或类似的方式实现它怎么样？之前的所有帖子都是针对2.2和3.0版本的。现在我们在4.0及以上版本中，那么4或以上版本可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:02:03.530

SDK 中没有执行此操作的包。

首先，您需要听扬声器的声音，因为您无法录制语音通话：

```
AudioManager mAudioManager = (AudioManager) Sos.getContext().getSystemService(Context.AUDIO_SERVICE);
int maxVolume = mAudioManager.getStreamMaxVolume(AudioManager.STREAM_VOICE_CALL);
mAudioManager.setStreamVolume(AudioManager.STREAM_VOICE_CALL, maxVolume, AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
mAudioManager.setSpeakerphoneOn(true); 
```

而且，这个项目可以帮助你：

[http://code.google.com/p/dtmf-decoder/source/checkout](http://code.google.com/p/dtmf-decoder/source/checkout)

我已经这样做了，所以我知道这是可能的。

祝你好运

# ubuntu - 在 Ubuntu 上使用最新的 Less CSS 版本

> ID：14889785
> 
> 赞同：-1
> 
> 时间：2013-02-15T07:09:47.653
> 
> 标签：ubuntu, twitter-bootstrap, less

我让 Lessc 通过 apt-get 在 Ubuntu 12.10 上工作，但它是 1.3 版 - 我无法编译 Bootstrap，我认为需要 1.3.3。

有人知道如何让 1.3.3 在 Ubuntu 上运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:37:20.077

您可以安装[node.js](http://nodejs.org/)，然后使用以下命令安装最新的 less `npm`：

```
sudo apt-get install nodejs
sudo npm install -g less 
```

# android - 如何使用 DOM 解析器解析 XML

> ID：14889786
> 
> 赞同：3
> 
> 时间：2013-02-15T07:09:55.803
> 
> 标签：android, parsing, dom, xml-parsing

如何使用解析以下 XML`DOM PARSER`

```
<Result>
<Status>OK</Status>
<All_BookDetails>
<BookAuthor>Mohammadi Reyshahri</BookAuthor> 
<BookRating>0</BookRating>
<BookDescription>Islamic belief and ideology</BookDescription>
<DatePublished>May  1 1992 12:00AM</DatePublished>
<BookTitle>Are You Free or Slave</BookTitle>
<BookID>171</BookID>
<BookCode>EN171</BookCode>
<BookImage>1.jpg</BookImage>
<TotalPages>164</TotalPages>
</All_BookDetails>
</Result> 
```

我想得到`BookAuthor`, `BookRating`, `BookDescription`, `DatePublished`, `BookTitle`, `BookID`, `BookCode`,的值`BookImage` `TotalPages`

我怎样才能做到这一点。我试图解析上面选择`All_BookDetails`为父节点的 XML，但`nodelist`返回长度为 0

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:51:56.383

获取 XML DOM 元素

```
public Document getDomElement(String xml) {
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

    dbf.setCoalescing(true);
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is);

    } catch (ParserConfigurationException e) {
        return null;
    } catch (SAXException e) {
        return null;
    } catch (IOException e) {
        return null;
    }

    return doc;

} 
```

然后我尝试了这个并且它的工作

```
Document doc = parser.getDomElement(XMLString);
            NodeList nl = doc.getElementsByTagName("All_BookDetails");

            progressDialog.setCancelable(true);
            Element e = (Element) nl.item(0);
            BookRating = (Integer.valueOf(parser.getValue(e,
                        "BookAuthor")));

            BookTitle = parser.getValue(e, "BookTitle");
            BookAuthor = parser.getValue(e, "BookAuthor");
            BookPublishDate = parser.getValue(e, "DatePublished");
            BookDescription = parser.getValue(e, "BookDescription");
            bookID = parser.getValue(e, "BookID");
            bookCode = parser.getValue(e, "BookID");
            bookPageCount = parser.getValue(e, "TotalPages"); 
```

# jquery - Jquery Ajax 提交/检索

> ID：14889788
> 
> 赞同：0
> 
> 时间：2013-02-15T07:09:57.693
> 
> 标签：jquery, ajax

我以前从未真正使用过 Jquery，我想知道在将它用于 Ajax 时您对它的看法。我需要在页面上提交表单而不重新加载页面，然后在新数据到达时将提交的数据与 div 中的其他数据一起加载，想想类似于聊天室的功能，因为功能大致相同。

您认为我应该使用 Jquery 还是应该从头开始查看其他内容/代码？我正在努力使我的网站更加动态和静态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:21:32.827

`Imagine`..在你 ping 了一个并且整个页面刷新并得到了你的朋友的回复之后。多么难过 :(

`Ajax`改变了网络。毫无疑问。它使互联网成为一个更快乐的地方（好吧，当它使用得当时）并帮助推动`Web 2.0 movement`它成为它的样子`today`。

我的建议是去做**。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:31:18.587

在我看来，就解析和操作 HTML 文档而言，jQuery 是最好的 javascript 库。它还支持 Ajax，而且非常易于使用。另一大优势是可在多种浏览器上运行，因此您只需编写一次代码，即可在所有 5 种主要浏览器（IE、Firefox、Chrome、Opera 和 Safari）上运行。

所以我建议你使用 jQuery 和 AJAX 来改进你的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:33:56.003

我认为你应该在你的项目中使用 jquery。使用它非常简单。并且您必须使用 jquery 或 javascript 大胆地使用 Ajax。因为使用 Ajax 网页使用他们需要的资源。并且加载时间也将被最小化。

# javascript - 创建多次有效，但不适用于 for 循环

> ID：14889793
> 
> 赞同：0
> 
> 时间：2013-02-15T07:10:23.560
> 
> 标签：javascript, html, for-loop, break

有什么我认为似乎是一种奇怪的问题。我有一个用于在 HTML5 中绘制元素的函数。如果我多次写它，它会被绘制那些次，但如果我将它放在一个循环中，它只会绘制第一次。例如，我试图通过 console.log 来监控它，但是一旦我尝试绘制它，循环就会被中断。好像里面有某种类型的“中断”功能。

有人对此有任何想法吗？

```
<body>
   <section id="wrapper">
        <h1></h1>
        <canvas id="canvas" width="800" height="600" style=" border-color: #000; border-style: solid; border-width: 1px;">
            <p>Your browser doesn't support canvas.</p>
        </canvas>

        <script>
            var context;
            var canvas;
            var WIDTH;
            var HEIGHT;

            $(document).ready(function() {

                main_init();

            });
            function main_init() {
                console.log("init");
                WIDTH = $("#canvas").width();
                HEIGHT = $("#canvas").height();
                canvas = document.getElementById('canvas');
                context = canvas.getContext('2d');

                var width = 10;
                var height = 10;

                var posX = 30;
                var posY = 60;

                //NOT WORKING
                for(y = 1; y < height; y+=1)
                {           
                    for(x = 1; x < width; x+=1)
                    {
                        console.log("y:"+ y + " x:" + x);
                        //console.log(isEven(x));
                            if(isEven(x))
                            {               
                              HexagonObj(posX * x, posY * y, 0.95);
                            }
                            else
                            {                   
                              HexagonObj(posX * x, (posY + 20) * y, 0.95);
                            }
                    }
                }

                //WORKING
                HexagonObj(-30, 60, 0.95);
                HexagonObj(10, 80, 0.95);
                HexagonObj(50, 60, 0.95);

                HexagonObj(-30, 100, 0.95);

            }

            HexagonObj = function(xCorrd, yCorrd, size){
                //console.log("hexagon");

                var x0=xCorrd; var y0=yCorrd; //cordinates
                var xx=20 * size; var yy=20 * size; //size of the legs of the shape

                x=x0; y=y0; context.moveTo(x,y);
                x+=xx; y+=0;  context.moveTo(x,y);
                x+=xx; y+=0;  context.lineTo(x,y);
                x+=xx; y+=yy; context.lineTo(x,y);
                x+=(xx*-1); y+=yy; context.lineTo(x,y);
                x+=(xx*-1); y+=0; context.lineTo(x,y);
                x+=(xx*-1); y+=(yy*-1); context.lineTo(x,y);
                x+=xx; y+=(yy*-1); context.lineTo(x,y);

                context.fillStyle = "#FFFF99";
                context.fill();

                context.strokeStyle = "rgba(0,0,0,1)";    
                context.stroke();

            }

            function isEven(n) 
            {
               return parseFloat(n) && (n % 2 == 0);
            }

        </script>
    </section>
</body> 
```

我已经标记了`HexagonObj`有效的创作和无效的创作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:15:37.313

您需要在使用它们的每个函数中声明`x`和`y`作为变量。因为您缺少`var`声明，所以这些函数都在访问全局`x`和`y`变量。因此，第一次调用会`HexagonObj`破坏`main_init()`.

（从技术上讲，您只需要`var x, y`在其中一个函数中声明即可解决眼前的问题。但是，使用这样的全局变量是一种不好的形式。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:19:12.583

for 循环在函数中只执行一次，`main_init`因为`x`和`y`哪些是全局的，在`HexagonObj`函数内部被修改为`y:81 and x:50`

# python - 通过级联代理的 HTTP 连接请求

> ID：14889797
> 
> 赞同：0
> 
> 时间：2013-02-15T07:10:47.710
> 
> 标签：python, https, proxy, connect, cascade

我正在python中创建一个基于BaseHTTPServer的代理服务器。它所做的是创建与 squid 代理的连接，识别浏览器请求（GET、CONNECT、POST 等）并向其添加代理授权标头，然后将此请求转发给 squid 代理。

问题是，据我了解，当我发送连接请求时，我应该将所有相应的流量中继到 squid 代理。但是，正如我在 Wireshark 中看到的那样，squid 代理没有回复握手的“Client Hello”部分，我认为这是由于 squid 代理不理解我只是转发给它的 SSL 的二进制数据。

在这种情况下如何处理 HTTPS 请求？

该代码或多或少类似于 TinyHTTPProxy ：[http ://www.oki-osk.jp/esc/python/proxy/](http://www.oki-osk.jp/esc/python/proxy/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:41:46.930

[RFC 2817](http://www.ietf.org/rfc/rfc2817.txt)定义了该`CONNECT`方法。它与其他 HTTP 方法的不同之处在于接收代理（您的 Python 代理）直接建立一个原始 TCP*隧道*到目标主机（在 RFC 中称为*授权）。*

代理不能对将通过该隧道发送的数据做出任何假设；它不一定是 HTTP——客户端可以使用隧道来使用它喜欢的任何协议。事实上，SSL ≠ HTTP。

你有两个选择：

*   直接打开到请求的目标主机的 TCP 连接。
*   `CONNECT`向您的上游代理 (Squid) 发出请求。这在规格范围内：

    > 可能是代理本身只能通过另一个代理到达请求的源服务器。在这种情况下，第一个代理应该`CONNECT`向下一个代理发出请求，请求一条通往权威的隧道。代理不得以任何 2xx 状态码进行响应，除非它与权威机构建立了直接或隧道连接。

    确保您的请求包含所需的`Host`标头。

    ```
    CONNECT www.google.com:443 HTTP/1.1
    Host: www.google.com:443
    Proxy-Authorization: ...
    ​ 
    ```

# logging - JBoss 7：相当于 jboss-log4j.xml

> ID：14889800
> 
> 赞同：3
> 
> 时间：2013-02-15T07:11:17.083
> 
> 标签：logging, jboss7.x, slf4j

我不想使用standalone.xml 或CLI 配置日志记录，因为我的同事需要额外的步骤才能获得一个工作的开发环境。我希望将这些配置文件与我们的源代码一起签入并在部署时自动应用。

在 JBoss 5 中，可以在 jboss-log4j.xml 中声明日志记录。JBoss 7 中是否也有与此文件等效的文件？

我们想使用 slf4j 和 logback。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T15:23:11.110

如果您想使用自己的日志记录而不是 JBoss 日志记录，则需要针对您希望在自己的日志记录中使用的每个应用程序执行几个步骤：

**排除 JBoss 日志记录**

编写一个 jboss-deployment-structure.xml 文件以排除 jboss log4j 或 slf4j 或 JBoss 中包含的任何其他日志记录模块。

WAR 的示例...放置在 WAR/WEB-INF/

```
<jboss-deployment-structure>
    <deployment>
        <exclusions>
            <module name="org.slf4j"/>
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

**包括你自己的罐子**

只需将您自己的 jars 放在您的 lib 文件夹中

对于 WAR，放置在 WAR/WEB-INF/lib

**包括您的日志记录配置**

只需像平常一样包含您自己的配置文件

对于 WAR，放置在 WAR/WEB-INF/classes

**使用 -D 标志启动 JBoss**

使用以下命令运行您的服务器：

```
$ ./standalone.sh -Dorg.jboss.as.logging.per-deployment=false 
```

**EAR 示例**

`Place jboss-deployment-structure.xml in EAR/META-INF`

```
<jboss-deployment-structure>
    <sub-deployment name="myWar.war>
        <exclusions>
            <module name="org.slf4j"/>
        </exclusions>
    </sub-deployment>
    <sub-deployment name="myWar2.war>
        <exclusions>
            <module name="org.slf4j"/>
        </exclusions>
    </sub-deployment>
    <sub-deployment name="myEjb.jar>
        <exclusions>
            <module name="org.slf4j"/>
        </exclusions>
    </sub-deployment>
</jboss-deployment-structure> 
```

在`EAR/lib`，包括你的罐子

在每个部署中，为该`configuration/properties`部署添加

启动服务器：`$./standalone.sh -Dorg.jboss.as.logging.per-deployment=false`

这应该已经用您自己的 JAR 替换了 JBoss 版本，因此允许您自己的 JAR 和配置文件被拾取。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T16:15:15.067

您可以将 logback 配置添加到您的应用程序。您需要在应用程序中包含 logback。您*可能*必须使用类似于[log4j 排除项的](https://docs.jboss.org/author/display/AS71/How+To#HowTo-HowdoIuselog4j.propertiesorlog4j.xmlinsteadofusingtheloggingsubsystemconfiguration%3F)[jboss-deployment-structure.xml](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7#ClassLoadinginAS7-JBossDeploymentStructureFile)来排除模块。不过，这只会为您的应用程序配置日志记录。`org.slf4j`

如果您担心只是配置日志记录子系统，那么根据您的环境，还有其他几种可能的工作方式。

第一个也是适用于任何环境的第一个是创建一个可以签入和运行的[CLI 脚本。](https://docs.jboss.org/author/display/AS71/CLI+Recipes#CLIRecipes-ScriptedConfiguration)

```
${JBOSS_HOME}/bin/jboss-cli.sh --connect --file path/to/script.cli 
```

如果您使用的是 maven，第二种可能性是使用[maven 插件](https://docs.jboss.org/jbossas/7/plugins/maven/latest/)。您可以使用插件执行[CLI 命令。](https://docs.jboss.org/jbossas/7/plugins/maven/latest/execute-commands-mojo.html)只需`execute-commands`在部署目标运行之前添加要运行的目标。

# java - 基于 GUI 的 Java 计算器：将窗口添加到容器异常

> ID：14889808
> 
> 赞同：0
> 
> 时间：2013-02-15T07:12:13.353
> 
> 标签：java, swing, jframe

我正在开发一个基于 Java Swing GUI 的计算器。我在运行代码以测试我到目前为止所做的事情时遇到问题。当我编译它时，它返回以下异常。

```
Exception in thread "main" java.lang.IllegalArgumentException: adding a window to a container
    at java.awt.Container.checkNotAWindow(Container.java:429)
    at java.awt.Container.addImpl(Container.java:1037)
    at javax.swing.JLayeredPane.addImpl(JLayeredPane.java:212)
    at java.awt.Container.add(Container.java:925)
    at javax.swing.JRootPane.setContentPane(JRootPane.java:608)
    at javax.swing.JFrame.setContentPane(JFrame.java:671)
    at calculator_project.Calculator_Project.main(Calculator_Project.java:184)
Java Result: 1
BUILD SUCCESSFUL (total time: 4 seconds) 
```

这是代码：

```
package calculator_project;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Calculator_Project extends JFrame {

private JButton add, subtract, multiply, divide, left_paren, right_paren,
        zero, one, two, three, four, five, six,seven, eight, nine;

private JTextField textfield;

public Calculator_Project(){

JPanel panel = new JPanel();

GridBagLayout layout = new GridBagLayout(); 

GridBagConstraints constraint = new GridBagConstraints(); 

panel.setLayout(layout);

textfield = new JTextField(10); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 0;
constraint.gridy = 0;
panel.add(textfield);

add = new JButton("+"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 3;
constraint.gridy = 1;
panel.add(add,constraint);

subtract = new JButton("-"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 3;
constraint.gridy = 2;
panel.add(subtract,constraint);

multiply = new JButton("*"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 3;
constraint.gridy = 3;
panel.add(multiply,constraint);

divide = new JButton("/"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 3;
constraint.gridy = 4;
panel.add(divide,constraint);

left_paren = new JButton("("); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 0;
constraint.gridy = 4;
panel.add(left_paren,constraint);

right_paren = new JButton(")"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 2;
constraint.gridy = 4;
panel.add(right_paren,constraint);

zero = new JButton("0"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 1;
constraint.gridy = 4;
panel.add(zero,constraint);

one = new JButton("1"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 0;
constraint.gridy = 3;
panel.add(one,constraint);

two = new JButton("2"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 1;
constraint.gridy = 3;
panel.add(two,constraint);

three = new JButton("3"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 2;
constraint.gridy = 3;
panel.add(three,constraint);

four = new JButton("4"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 0;
constraint.gridy = 2;
panel.add(four,constraint);

five = new JButton("5"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 1;
constraint.gridy = 2;
panel.add(five,constraint);

six = new JButton("6"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 2;
constraint.gridy = 2;
panel.add(six,constraint);

seven = new JButton("7"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 0;
constraint.gridy = 1;
panel.add(seven,constraint);

eight = new JButton("8"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 1;
constraint.gridy = 1;
panel.add(eight,constraint);

nine = new JButton("9"); 
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 2;
constraint.gridy = 1;
panel.add(nine,constraint);

event e = new event();
add.addActionListener(e);
subtract.addActionListener(e);
multiply.addActionListener(e);
divide.addActionListener(e);
left_paren.addActionListener(e);
right_paren.addActionListener(e);
zero.addActionListener(e);
one.addActionListener(e);
two.addActionListener(e);
three.addActionListener(e);
four.addActionListener(e);
five.addActionListener(e);
six.addActionListener(e);
seven.addActionListener(e);
eight.addActionListener(e);
nine.addActionListener(e);

}

 public class event implements ActionListener {

public void actionPerformed  (ActionEvent e){

    double number;

    try{

        number= Double.parseDouble(textfield.getText());

    } catch (NumberFormatException ee){

        textfield.setText("illegal entry!");
        textfield.setForeground(Color.RED);

        return;

    }

}
}

public static void main(String[] args) {
    JFrame frame = new JFrame("Calculator");
    Calculator_Project panel = new Calculator_Project();
    frame.setContentPane(panel);
    frame.setSize(300,150);
    frame.setVisible(true);

}
 } 
```

如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T07:16:44.647

您正在尝试将 JFrame 添加到 JFrame 中，这就是您看到此错误的原因。

```
Calculator_Project panel = new Calculator_Project();
frame.setContentPane(panel); 
```

您的`Calculator_Project`课程应该扩展`JPanel`. 然后你可以将它添加到`JFrame`. 或者直接使`Calculator_Project`类的实例可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T07:34:19.000

用 JPanal 而不是 JFrame 扩展你的类 Calculator_Project。这里是工作代码...

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Calculator_Project extends JPanel {

private JButton add, subtract, multiply, divide, left_paren, right_paren,
    zero, one, two, three, four, five, six,seven, eight, nine;

private JTextField textfield;

public Calculator_Project(){

JPanel panel = new JPanel();

GridBagLayout layout = new GridBagLayout();

GridBagConstraints constraint = new GridBagConstraints();

panel.setLayout(layout);

textfield = new JTextField(10);
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 0;
constraint.gridy = 0;
panel.add(textfield);

add = new JButton("+");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 3;
constraint.gridy = 1;
panel.add(add,constraint);

subtract = new JButton("-");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 3;
constraint.gridy = 2;
panel.add(subtract,constraint);

multiply = new JButton("*");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 3;
constraint.gridy = 3;
panel.add(multiply,constraint);

divide = new JButton("/");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 3;
constraint.gridy = 4;
panel.add(divide,constraint);

left_paren = new JButton("(");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 0;
constraint.gridy = 4;
panel.add(left_paren,constraint);

right_paren = new JButton(")");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 2;
constraint.gridy = 4;
panel.add(right_paren,constraint);

zero = new JButton("0");
constraint.fill= GridBagConstraints.HORIZONTAL;
 constraint.gridx = 1;
constraint.gridy = 4;
panel.add(zero,constraint);

one = new JButton("1");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 0;
constraint.gridy = 3;
panel.add(one,constraint);

two = new JButton("2");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 1;
constraint.gridy = 3;
panel.add(two,constraint);

three = new JButton("3");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 2;
constraint.gridy = 3;
panel.add(three,constraint);

 four = new JButton("4");
 constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 0;
constraint.gridy = 2;
panel.add(four,constraint);

five = new JButton("5");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 1;
constraint.gridy = 2;
panel.add(five,constraint);

 six = new JButton("6");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 2;
constraint.gridy = 2;
panel.add(six,constraint);

seven = new JButton("7");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 0;
constraint.gridy = 1;
panel.add(seven,constraint);

eight = new JButton("8");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 1;
constraint.gridy = 1;
panel.add(eight,constraint);

nine = new JButton("9");
constraint.fill= GridBagConstraints.HORIZONTAL;
constraint.gridx = 2;
constraint.gridy = 1;
panel.add(nine,constraint);

event e = new event();
add.addActionListener(e);
subtract.addActionListener(e);
multiply.addActionListener(e);
divide.addActionListener(e);
left_paren.addActionListener(e);
right_paren.addActionListener(e);
zero.addActionListener(e);
one.addActionListener(e);
two.addActionListener(e);
three.addActionListener(e);
four.addActionListener(e);
five.addActionListener(e);
six.addActionListener(e);
seven.addActionListener(e);
eight.addActionListener(e);
nine.addActionListener(e);

 add(panel);
 }

 public class event implements ActionListener {

 public void actionPerformed  (ActionEvent e){

  double number;

  try{

    number= Double.parseDouble(textfield.getText());

  } catch (NumberFormatException ee){

    textfield.setText("illegal entry!");
    textfield.setForeground(Color.RED);

    return;

  }

  }
 }

 public static void main(String[] args) {
 JFrame frame = new JFrame("Calculator");
 Calculator_Project panel = new Calculator_Project();
 frame.setContentPane(panel);
 frame.setSize(300,150);
 frame.setVisible(true);

 }
 } 
```

# python - 在变量中有原始输入？

> ID：14889813
> 
> 赞同：2
> 
> 时间：2013-02-15T07:12:27.917
> 
> 标签：python, string, debugging, raw-input

对于一个项目，我需要一个程序询问比赛名称，在另一个问题中使用该名称。
下面的代码有效。
主要问题是我需要将时间作为一个值输入并保存，以便我以后可以计算它，但是在一行中打印，说`time = """""`, 不起作用。
关于如何解决这个问题的任何建议？

```
def main():
    print "~*~*~*~*~*~ Timbuktu Archery Contest ~*~*~*~*~*~"
    archerList = [] #list
    name = raw_input ("Enter contestants first name: ")
    s = str(name)
    archerList.append(name)
    print "Enter time (in milliseconds) for " + s , raw_input (": ")

main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:16:32.493

我认为你需要做

```
t  = raw_input ("Enter time (in milliseconds) for %s :" % s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:26:22.863

For`raw_input`返回一个字符串值，
So`x = raw_input()`会将用户输入的字符串分配给`x`.
有关. [_](http://docs.python.org/2/library/functions.html#raw_input) _ 对于您的弓箭手列表，您可能需要使用字典，因为这样您就可以使用弓箭手的名字访问“时间”。有关字典文档， 请参见[此处](http://docs.python.org/2/tutorial/datastructures.html#dictionaries) 您可以使用这样的字典：`raw_input`

```
def main():
    print "~*~*~*~*~*~ Timbuktu Archery Contest ~*~*~*~*~*~"
    archers = {}
    while True: # get inputs till user inputs empty string.
        name = raw_input ("Enter contestants first name: ")
        if name == '':
            break
        while True: # get input till ttime can be converted to an int.
            ttime = raw_input ("Enter time (in milliseconds) for %s :" % name)
            try:
                ttime = int(ttime)
            except ValueError: # error handling
                print 'Invalid input, Enter a number'
            else:
                break
        archers[name] = ttime # assign values to the dictionary
    return archers # return dictionary value 
```

# google-app-engine - 为什么我的 Google AppEngine 实例会因“错误代码 121”而崩溃？

> ID：14889814
> 
> 赞同：11
> 
> 时间：2013-02-15T07:12:34.993
> 
> 标签：google-app-engine

一段时间以来，我一直在 Google AppEngine 上运行 java 高复制 Web 应用程序。大约两天前 - 基本上不知从何而来 - 许多请求开始失败，**HTTP 状态为 500**和**错误代码 121**，这意味着相应的 GAE 实例崩溃或被关闭。

这是一个示例性的日志条目，我现在有很多：

```
2013-02-15 06:44:00.909 /api 500 3770ms 0kb Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17
###.###.###.### - - [14/Feb/2013:22:44:00 -0800] "POST /api HTTP/1.1" 500 0 - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17" "###.########.###" ms=3770 cpu_ms=1191 exit_code=121 instance=00c61b117c2c2b8fd8c433bc45a62183829f6484

W 2013-02-15 06:44:00.652
    A problem was encountered with the process that handled this request, causing it to exit. This is likely to cause a new process to be used for the next request to your application. (Error code 121) 
```

该错误有时会发生在“热身”请求中，因此当新实例收到其第一个请求时。关联的日志条目如下所示：

```
2013-02-15 06:40:02.779 /_ah/warmup 500 2970ms 0kb
0.1.0.3 - - [14/Feb/2013:22:40:02 -0800] "GET /_ah/warmup HTTP/1.1" 500 0 - - "2013-02-14-1438.flox-by-gamua.appspot.com" ms=2971 cpu_ms=671 loading_request=1 exit_code=121 instance=00c61b117c48cb17ea555d1988c0db473c2390

I 2013-02-15 06:40:02.437
    This request caused a new process to be started for your application and thus caused your application code to be loaded for the first time. This request may thus take longer and use more CPU than a typical request for your application.
W 2013-02-15 06:40:02.437
    A problem was encountered with the process that handled this request, causing it to exit. This is likely to cause a new process to be used for the next request to your application. (Error code 121) 
```

我一直在网上搜索这个问题，看起来它以前发生过：[https](https://code.google.com/p/googleappengine/issues/detail?id=7348) ://code.google.com/p/googleappengine/issues/detail?id=7348 。

由于所有相关问题都已标记为“已解决”，因此我确实在此处提交了一个新的 GAE 生产问题：[https ://code.google.com/p/googleappengine/issues/detail?id=8812](https://code.google.com/p/googleappengine/issues/detail?id=8812)

**编辑 2013-04-29：**上面的链接不再起作用，因为这个问题已被 GAE 团队标记为“受限”。

不幸的是，我的求救声已经两天多没有引起人们的注意了。这就是为什么我在极度绝望中寻求您的帮助！

**有谁知道是什么导致了错误代码121？是否有某种形式的文档？我的应用程序有问题吗？有没有办法促使 AppEngine 团队调查这个问题？**

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T14:39:48.070

我没有足够的分数来回答，但我有一个看起来很有趣的特定用例：

*   蟒蛇27
*   人力资源
*   配置了 8 个实例的动态支持

一切都按预期工作，除了一个实例，instance=2，它基本上是循环的

*   '/_ah/开始'
*   （错误代码 121）
*   '/_啊/停止'

后端允许您处理特定实例，例如 2.backendname.appname.appspot.com，显然该实例有问题。

我想知道有一个糟糕的实例由于模糊的错误代码而反复失败，而不是许多实例由于模糊的错误代码而随机失败，这让人放心。如果该实例被删除等会更令人放心，特别是如果它正在循环这种模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T19:10:30.553

检查您的日志保留限制，并且您没有超过它们。您不会期望绕过您的日志保留限制会导致导致实例失败的异常，但是在我增加我的数量后，我不再看到此错误出现并且我的后端 cron 作业能够完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:53:29.467

还没有从谷歌看到任何关于这方面的确切信息。他们常常羞于解释这些问题。其中一个线程确实提到了数据存储迁移。看看是否有帮助；

[http://code.google.com/p/googleappengine/issues/detail?id=7022](http://code.google.com/p/googleappengine/issues/detail?id=7022)

# libpcap - 面对 /usr/lib/libpcap.so：运行 make 命令 nprobe 时未定义对 `pcap_lex' 的引用

> ID：14889819
> 
> 赞同：0
> 
> 时间：2013-02-15T07:12:55.717
> 
> 标签：libpcap, netflow

当我按照以下步骤操作时，我正在尝试在我的系统上安装 nprobe

```
git clone https://github.com/xrl/nprobe.git
sudo apt-get install libpcap-dev
cd nprobe/plugsins
./buildMakefile.sh  >Makefile.in
cd ..
./autogen.sh 
./configure
  make 
```

以上所有命令都运行得很好，但是当我尝试运行时，它会给我以下错误。
usr/lib/libpcap.so：未定义对“pcap_lex”collect2 的引用：ld 返回 1 退出状态

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:05:45.410

是的...我们在 netflow 导出器中遇到了这个问题。您需要已`flex`安装（UNIX 的 GNU 实现`lex`）。您可能还需要 install `bison`，我认为它也可能使用`m4`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T07:48:33.113

看来不仅需要安装libpcap-devel，还需要安装libpcap。

# ruby - 从字符串中解压缩 zip 存档

> ID：14889821
> 
> 赞同：1
> 
> 时间：2013-02-15T07:12:59.467
> 
> 标签：ruby, zip, stringio, rubyzip

我有一个字符串中的 zip 存档，但 ruby​​zip gem 似乎需要从文件中输入。我想出的最好的方法是将 zip 存档写入临时文件，其唯一目的是将文件名传递给`Zip::ZipFile.foreach()`，但这似乎很折磨：

```
require 'zip/zip'
def unzip(page)
  "".tap do |str|
    Tempfile.open("unzip") do |tmpfile|
      tmpfile.write(page)
      Zip::ZipFile.foreach(tmpfile.path()) do |zip_entry|
        zip_entry.get_input_stream {|io| str << io.read}
      end
    end
  end
end 
```

有没有更简单的方法？

注意：另请参阅[Ruby 解压缩字符串](https://stackoverflow.com/questions/5871498/ruby-unzip-string)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:21:46.290

请参阅[Zip/Ruby`Zip::Archive.open_buffer(...)`](https://bitbucket.org/winebarrel/zip-ruby/wiki/Home#!modifying-zip-data-in-memory)：

```
require 'zipruby'
Zip::Archive.open_buffer(str) do |archive|
  archive.each do |entry|
    entry.name
    entry.read
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:02:51.020

@maerics 的回答向我介绍了 zipruby gem（不要与 ruby​​zip gem 混淆）。它运作良好。我的完整代码最终是这样的：

```
require 'zipruby'

# Given a string in zip format, return a hash where 
# each key is an zip archive entry name and  each
# value is the un-zipped contents of the entry
def unzip(zipfile)
  {}.tap do |entries|
    Zip::Archive.open_buffer(zipfile) do |archive|
      archive.each do |entry|
        entries[entry.name] = entry.read
      end
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T10:14:51.233

Ruby 的[StringIO](http://ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html)在这种情况下会有所帮助。

将其视为一个字符串/缓冲区，您可以将其视为内存文件。

# javascript - 如何在 AngularJS 中管理多个资源元素

> ID：14889823
> 
> 赞同：1
> 
> 时间：2013-02-15T07:13:09.167
> 
> 标签：javascript, ruby-on-rails, angularjs

我对 AngularJS 很陌生，但到目前为止我喜欢它的方法，但它带来了一些我仍在适应的心态变化。（我正在使用 Coffeescript 和 Haml。如果您看到与我的问题无关的我应该/不应该做的任何事情，请告诉我 - 再说一次，我对 Angular 很陌生。）

我有一个这样设置的资源：

```
app.factory "ServiceRequest", ["$resource", ($resource) ->
  $resource("/service_requests/:id", {id: "@id"}, {update: {method: "PUT"}})
]

app.controller "ServiceRequestController", ["$scope", "ServiceRequest", ($scope, ServiceRequest) ->
  $scope.service_requests = ServiceRequest.query() 
```

没什么太花哨的，特别是如果您熟悉 Rails 和 RESTful 控制器。现在我想在 index.html.haml 页面上显示这些..

```
.service-request{'ng-repeat' => 'service_request in service_requests'}
  .upper
    #...
    %a.btn{:href => "", 'ng-click' => "toggleExpand(service_request)"}
  .lower{'ng-show' => 'service_request.expanded'}
    #... 
```

请注意调用 toggleExpand(service_request) 的按钮。

```
$scope.toggleExpand = (service_request) ->
  service_request.expanded = not service_request.expanded 
```

所以.. 这一直有效，直到我单击另一个更改变量的按钮，然后单击 service_request.$update()。我的 Rails 控制器返回一个 JSON service_request 变量，该变量清除了我的扩展变量。废话。

```
$scope.acceptRequest = (service_request) ->
  service_request.state_change = "accept"
  service_request.$update() 
```

**有什么更好的方法来管理这些仅用于仍然利用 Angular 壮观的双向绑定的浏览器的非数据库变量？**

谢谢！如果您需要更多代码，请告诉我。=)

**// 这就是我为解决问题所做的。**

对于 JS：

```
$scope.init = () ->
  $scope.toggleFlags = {}
  angular.forEach $scope.service_requests, (service_request) ->
    $scope.toggleFlags[service_request.id] = false

$scope.toggleExpand = (id) ->
  if not $scope.toggleFlags
    $scope.init()
  $scope.toggleFlags[id] = not $scope.toggleFlags[id] 
```

对于 HTML：

```
%a.btn{:href => "", 'ng-click' => "toggleExpand(service_request.id)"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:26:40.177

您可以做的是准备与数据对象关联的单独标志对象。我会假设数据对象具有名为“id”的唯一 ID。

在你看来：

```
<button ng-click="toggleExpand(service_request.id)"> toggle </button> 
```

在您的控制器中：

```
$scope.flags = {};

$scope.toggleExpand = function(id) {
  flags[id] = !flags[id];
}; 
```

# php - php条件不起作用

> ID：14889824
> 
> 赞同：0
> 
> 时间：2013-02-15T07:13:15.297
> 
> 标签：php

我试图根据查询结果为空白或等于 upload/ 的条件隐藏网站上的 URL，但我似乎无法使其工作。

我基本上有一个 MySQL 表，它有一个名为 file 的字段，现在用户提交表单，file 字段不是必需的，但它会在数据库中保存“upload/”。例如，如果我提交表单两次，一次带有文件附件，第二次没有附件，我的表格将如下所示：

```
fileID   |  filename
1        |  upload/file1.txt
2        |  upload/ 
```

现在，在我的页面上，我只希望它在上传文件时显示结果，但我似乎无法让它工作。这是我尝试过的：

```
if ($filename = "upload/" ) {
   echo "No file uploaded";
} else {
  echo "<div class='span2' style='padding-left:10px;'><a href='".$filename."'>Download Attachment</a></div>";
} 
```

但无论我是否上传了文件，它都会回显“未上传文件”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:14:36.250

您使用的是赋值运算符而不是相等运算符。

将第一行更改为：

```
if ($filename == "upload/" ) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T07:14:50.023

使用相等运算符`==`而不是`=`

```
if ($filename == "upload/" ) {
 echo "No file uploaded";
}else {
  echo "<div class='span2' style='padding-left:10px;'><a href='".$filename."'>Download Attachment</a></div>";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T07:15:09.103

你在做作业。

```
if ($filename = "upload/" ) 
```

基本上翻译为“将 $filename 的值设置为'upload'，然后检查它是否有一个值。当然，它在那个时候总是会有一个值，因此返回 true。

您需要使用比较操作

```
if ($filename == "upload/" ) 
```

由于 = 和 == 非常相似，这样的问题很容易出现。一些程序员遵循将不能改变的值（常量、文字、函数调用等）放在左边的约定，这样如果他们不小心输入 = 而不是 == 程序就会出错而不是表现出那种行为您正在观察，使查找此类错误变得容易得多。

```
if ('upload/' == $filename) 
```

如果你不小心写了

```
if ('upload/' = $filename) 
```

然后 PHP 将尝试为常量分配一个新值。这显然会失败，并且您的 PHP 脚本将终止并出现致命错误，准确说明错误发生的位置。然后找到并修复它变得非常容易。

# java - 在 android 中使用 HttpURLConnection 重用套接字

> ID：14889825
> 
> 赞同：1
> 
> 时间：2013-02-15T07:13:20.733
> 
> 标签：java, android, http

我想重用由 HttpURLConnection 创建的套接字。但我发现，当我调查传入/传出远程 Web 服务器的原始数据包时，它总是会创建新的套接字。以下是我访问远程 Web 服务器的代码。

```
public String getFromServer() throws IOException
{
    URL url = new URL("http://192.168.137.2/test.jsp");
    HttpURLConnection http = (HttpURLConnection)url.openConnection();
    http.setRequestProperty("Content-type", "application/x-www-form-urlencoded;charset=utf8");
    http.setRequestProperty("Connection", "keep-alive");
    http.setUseCaches(true);
    http.setFixedLengthStreamingMode(0);

    http.connect();
    InputStream is = http.getInputStream();
    BufferedReader in = new BufferedReader(new InputStreamReader(is));      

    int c;
    StringBuffer buffer =new StringBuffer();
    while((c=in.read())!=-1)
    {
        buffer.append((char)c);
    }
    Log.i("hv","debug3:"+buffer);
    is.close();
    return buffer.toString();
} 
```

并调用该函数两次。

```
try {
    java.net.CookieManager cookieManager = new java.net.CookieManager();
    System.setProperty("http.keepAlive","true");
    getFromServer();
    getFromServer();
} catch (Exception e) {
    e.printStackTrace();
} 
```

如您所见，我的删除服务器 IP 是 192.168.137.2。我的设备 IP 是 192.168.3.117。当我尝试此代码时，我预计服务器和设备之间只有一个 TCP 连接。但是设备中有两次不同TCP端口的TCP连接。以下是服务器中的 tcpdump 日志。

```
15:40:01.739295 IP 192.168.3.117.48427 > 192.168.137.2.80: Flags [S], seq 2864255093, win 14600, options [mss 1460,sackOK,TS val 15969200 ecr 0,nop,wscale 6], length 0
E..<..@.?.r....u.....+.P...u......9............
............
15:40:01.739322 IP 192.168.137.2.80 > 192.168.3.117.48427: Flags [S.], seq 3335569309, ack 2864255094, win 14480, options [mss 1460,sackOK,TS val 28276944 ecr 15969200,nop,wscale 7], length 0
..........,........u.P.+.......v..8.
..x.........
15:40:01.741673 IP 192.168.3.117.48427 > 192.168.137.2.80: Flags [.], ack 1, win 229, options [nop,nop,TS val 15969202 ecr 28276944], length 0
E..4..@.?.r5...u.....+.P...v........A......
......x.
15:40:01.742168 IP 192.168.3.117.48427 > 192.168.137.2.80: Flags [P.], seq 1:252, ack 1, win 229, options [nop,nop,TS val 15969203 ecr 28276944], length 251
E../..@.?.q9...u.....+.P...v...............
......x.GET /test.jsp HTTP/1.1
Content-type: application/x-www-form-urlencoded;charset=utf8
Connection: keep-alive
User-Agent: Dalvik/1.6.0 (Linux; U; Android 4.0.4; SHV-E210S Build/IMM76D)
Host: 192.168.137.2
Accept-Encoding: gzip
Content-Length: 0

15:40:01.742193 IP 192.168.137.2.80 > 192.168.3.117.48427: Flags [.], ack 252, win 122, options [nop,nop,TS val 28276945 ecr 15969203], length 0
......@.@.e........u.P.+.......q...z
..x.....
15:40:01.743685 IP 192.168.137.2.80 > 192.168.3.117.48427: Flags [P.], seq 1:396, ack 252, win 122, options [nop,nop,TS val 28276945 ecr 15969203], length 395
E....P@.@.d .......u.P.+.......q...zQ......
..x.....HTTP/1.1 200 OK
Date: Fri, 15 Feb 2013 06:40:01 GMT
Set-Cookie: JSESSIONID=AA93F68D2C44CDCAB57554AB70B91058; Path=/
Content-Type: text/html;charset=utf8
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 112
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive

.............)I-........I.-*J.+.s+.TpKMR04."+..+.C.....#.Cc.}.*.....R.v......}..(....Z\....j.`.......[.....'}...
15:40:01.745860 IP 192.168.3.117.48427 > 192.168.137.2.80: Flags [.], ack 396, win 245, options [nop,nop,TS val 15969203 ecr 28276945], length 0
E..4..@.?.r3...u.....+.P...q...)....?8.....
......x.
15:40:01.765863 IP 192.168.3.117.48427 > 192.168.137.2.80: Flags [F.], seq 252, ack 396, win 245, options [nop,nop,TS val 15969207 ecr 28276945], length 0
E..4..@.?.r2...u.....+.P...q...)....?3.....
......x.
15:40:01.765939 IP 192.168.137.2.80 > 192.168.3.117.48427: Flags [F.], seq 396, ack 253, win 122, options [nop,nop,TS val 28276950 ecr 15969207], length 0
......@.@.e........u.P.+...)...r...z
..x.....
15:40:01.768316 IP 192.168.3.117.48427 > 192.168.137.2.80: Flags [.], ack 397, win 245, options [nop,nop,TS val 15969208 ecr 28276950], length 0
E..4..@.?.r1...u.....+.P...r...*....?,.....
......x.
15:40:01.773846 IP 192.168.3.117.40642 > 192.168.137.2.80: Flags [S], seq 343617337, win 14600, options [mss 1460,sackOK,TS val 15969209 ecr 0,nop,wscale 6], length 0
E..<..@.?..s...u.......P.{/9......9.q..........
............
15:40:01.773855 IP 192.168.137.2.80 > 192.168.3.117.40642: Flags [S.], seq 2163692151, ack 343617338, win 14480, options [mss 1460,sackOK,TS val 28276952 ecr 15969209,nop,wscale 7], length 0
..........,........u.P....Rw.{/:..8.
..x.........
15:40:01.775312 IP 192.168.3.117.40642 > 192.168.137.2.80: Flags [.], ack 1, win 229, options [nop,nop,TS val 15969209 ecr 28276952], length 0
E..4..@.?..z...u.......P.{/:..Rx...........
......x.
15:40:01.775952 IP 192.168.3.117.40642 > 192.168.137.2.80: Flags [P.], seq 1:305, ack 1, win 229, options [nop,nop,TS val 15969209 ecr 28276952], length 304
E..d..@.?..I...u.......P.{/:..Rx....}......
......x.GET /test.jsp HTTP/1.1
Content-type: application/x-www-form-urlencoded;charset=utf8
Connection: keep-alive
User-Agent: Dalvik/1.6.0 (Linux; U; Android 4.0.4; SHV-E210S Build/IMM76D)
Host: 192.168.137.2
Accept-Encoding: gzip
Cookie: JSESSIONID=AA93F68D2C44CDCAB57554AB70B91058
Content-Length: 0
15:40:01.775977 IP 192.168.137.2.80 > 192.168.3.117.40642: Flags [.], ack 305, win 122, options [nop,nop,TS val 28276953 ecr 15969209], length 0
......@.@..[.......u.P....Rx.{0j...z
..x.....
15:40:01.776954 IP 192.168.137.2.80 > 192.168.3.117.40642: Flags [P.], seq 1:332, ack 305, win 122, options [nop,nop,TS val 28276953 ecr 15969209], length 331
E...*.@.@..........u.P....Rx.{0j...zlq.....
..x.....HTTP/1.1 200 OK
Date: Fri, 15 Feb 2013 06:40:01 GMT
Content-Type: text/html;charset=utf8
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 113
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive

.............)I-........I.-*J.+.s+.TpKMR04."+..+.C.....#.Cc.}.*.....R.v......}..(....Z\....j..`...........~..~...
15:40:01.778945 IP 192.168.3.117.40642 > 192.168.137.2.80: Flags [.], ack 332, win 245, options [nop,nop,TS val 15969210 ecr 28276953], length 0
E..4..@.?..x...u.......P.{0j..S............
......x.
15:40:01.781966 IP 192.168.3.117.40642 > 192.168.137.2.80: Flags [F.], seq 305, ack 332, win 245, options [nop,nop,TS val 15969210 ecr 28276953], length 0
E..4..@.?..w...u.......P.{0j..S............
......x.
15:40:01.782049 IP 192.168.137.2.80 > 192.168.3.117.40642: Flags [F.], seq 332, ack 306, win 122, options [nop,nop,TS val 28276955 ecr 15969210], length 0
......@.@..Y.......u.P....S..{0k...z
..x.....
15:40:01.783749 IP 192.168.3.117.40642 > 192.168.137.2.80: Flags [.], ack 333, win 245, options [nop,nop,TS val 15969211 ecr 28276955], length 0
E..4..@.?..v...u.......P.{0k..S............
......x. 
```

在第一次连接中，使用 TCP 端口 48427 与服务器连接。在下一次，我希望重用 TCP 套接字，但是，TCP 连接是用 TCP 端口 40642 新创建的。有什么我想重用套接字的吗？

添加：我在 tcpdump 日志中发现了一些意外行为。Web 服务器在 html 标头中发送带有 'Keep-Alive: timeout=5, max=100' 和 'Connection: Keep-Alive' 选项的 html 页面。但是，设备会立即发送 FIN，而无需等待 5 秒。我怀疑设备可能无法解析 keep-alive 或 timeout 选项。我在 Galaxy S3 中使用 Android 4.0.4 测试了这段代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:54:16.993

看起来这是Android中的一个错误。Keep-Alive 不适用于 gzip 压缩的内容。

[https://code.google.com/p/android/issues/detail?id=43132](https://code.google.com/p/android/issues/detail?id=43132)

# javascript - jQuery 对象作为元素

> ID：14889829
> 
> 赞同：1
> 
> 时间：2013-02-15T07:13:32.667
> 
> 标签：javascript, jquery

我在一些高级 jQuery 中看到了这种语法：

```
$container 
```

如：

```
$input = $container.find('.fn_this_timeline') 
```

编辑：根据下面的一些评论，只是为了澄清我可以看到的第一个'$container'实例是在开始时创建的：

```
init: function($container){
var myThing = this,
$input = $container.find('.fn_do_some_calc'),
$submit = $container.find('.fn_do_some_other_calc'),
defaultValue = parseInt($input.val(), 10);

myThing.$container = $container; 
```

上面的行让我更加困惑：/

我习惯使用这样的 jQuery 选择器： $('#mySelector').method('etc');

有人可以让我知道有什么区别以及何时适合或适用于使用“速记”风格吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T07:16:08.103

这不是一些速记，这只是 Javascript 变量的使用。例如，`$container`变量可能是这样声明的：

```
var $container = $("#container"); 
```

因为它是存储的，所以元素（jQuery 对象）是“缓存的”并且可以被重用，而无需让 jQuery 出去并重新遍历 DOM 以再次找到它（因为它必须每次`$("select")`使用）。

在变量名的开头使用`$`有时有助于开发人员记住它包含一个 jQuery 对象而不是 Javascript 元素（例如从`document.getElementById("container");`.

根据您的问题`init`方法所在的位置，该行`myThing.$container = $container;`只是将对象的属性“$container”设置为`$container`变量的值。所以对象可能是这样的：

```
var myObject = {
    init: function () {
        // blah blah blah
    },

    $container: undefined
}; 
```

运行该`init`方法后，它会将“$container”属性设置为某个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:16:13.027

这只是为了说明，该`$container`变量已经是一个包装好的 jQuery 对象，而不是一个原生 DOM 节点。

例如，您可以编写：

```
var container  = document.getElementById('item');
var $container = jQuery(container); // or:
var $container = jQuery('#item'); 
```

明白了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T07:29:30.230

基本上，是的，它是简写。

对于您提到的功能：

```
init: function($container){
var myThing = this,
$input = $container.find('.fn_do_some_calc'),
$submit = $container.find('.fn_do_some_other_calc'),
defaultValue = parseInt($input.val(), 10); 
```

$ 包含在内，因此您知道将 jQuery 对象传递给函数。因此，当您调用它时，您可能会执行以下操作：

```
init($('#theid')); 
```

至于下面的行：

```
myThing.$container = $container; 
```

这只是将您的 jQuery 对象存储为 myThing 对象的一部分。另一个注意事项，你可以做类似的事情`$var = 1`，这将是完全有效的。然而，通常它是作为存储 jQuery 对象的提醒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T07:21:43.660

没有使用 jQuery 的捷径。

在 jQuery 中声明变量是标准方法。

即 $container = $("#container");

$container 是一个 jquery 对象。

理解：$表示它是jquery对象，所以适当地对其进行操作。

# assembly - 每个 AT&T 语法操作数访问内存或寄存器中的什么值？

> ID：14889844
> 
> 赞同：4
> 
> 时间：2013-02-15T07:15:02.677
> 
> 标签：assembly, x86, memory-address, att, addressing-mode

假设以下值存储在指定的内存地址和寄存器中：

```
Address    Value            Register     Value
0x100      0xFF             %eax         0x100
0x104      0xAB             %ecx         0x1
0x108      0x13             %edx         0x3
0x10C      0x11

Fill in the following table showing the values for the indicated operands:

Operand           Value    //Solutions at the end of the chapter
%eax              _____    //0x100
0x104             _____    //0xAB
$0x108            _____    //0x108
(%eax)            _____    //0xFF
4(%eax)           _____    //0xAB
9(%eax, %edx)     _____    //0x11
260(%ecx, %edx)   _____    //0x13
0xFC(,%ecx,4)     _____    //0xFF
(%eax, %edx,4)    _____    //0x11 
```

有人可以用外行的方式向我解释如何做到这一点。这不是 hmwk（这是某些阅读过程中的练习题，在本章末尾有答案），我只是不理解阅读内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T07:32:06.450

AT&T x86 汇编语法的一般规则是

```
displacement(offset, relative offset, multiplier) = offset + displacement + ( relative offset * multiplier) 
```

1.  `%eax`指寄存器的实际值（=0x100）。
2.  `0x104`指地址 0x104 处的值。
3.  `$0x108`指的是常数值 0x108。
4.  `(%eax)`指地址 EAX 处的值，相当于 0x100(=0xFF)。
5.  `4(%eax)`指地址 EAX+4 处的值，即 0x104。
6.  `9(%eax, %edx)`指地址 EAX+9 + EDX 处的值，即 0x10C。
7.  `260(%ecx, %edx)`指地址 ECX+260 + EDX 处的值，即 0x108。
8.  `0xFC(,%ecx,4)`指地址(ECX*4)+0xFC处的值，即0x100处。
9.  `(%eax, %edx, 4)`指地址 (EAX+(EDX*4) 处的值，即 0x10C。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T07:32:12.673

你需要学习这个 AT&T 汇编语法和一点汇编，一旦你知道了这些东西，答案就很简单了。

所以，

`%eax`只是寄存器的内容。

`0x104`是一个内存操作数，地址为内存的内容`0x104`。

`$0x108`是一个常数。

`(some expression)`是一个内存操作数，地址为内存的内容`some expression`。

`some constant(some expression)`是一个内存操作数，地址为`some expression`+的内存内容`some constant`。

`(%register1, %register2)`正如您现在可能已经猜到的那样，它也是一个内存操作数。带括号的表达式的值为`register1`+ `register2`。

`some constant(%register1, %register2)`现在也应该是微不足道的。只需添加三个项目，这就是地址。

`(, %register, some constant)`意味着您需要将寄存器的值乘以常数。

`(%register1, %register2, some constant)`现在应该是直观的。带括号的表达式的值为`register1`+ `register2`* `some constant`。

现在猜测内存操作数的地址，如下所示：

`some constant1(%register1, %register2, some constant2)`.

# php - 发送邮件（） php xampp 雅虎

> ID：14889851
> 
> 赞同：0
> 
> 时间：2013-02-15T07:15:32.607
> 
> 标签：php, email, xampp

谁能帮我？我被 PHP`mail()`函数困住了，我已经设置了`php.ini`和`sendmail.ini`. 我只是使用功能`mail($to,$subject,$content)`并没有工作。我正在使用本地主机 XAMPP。

这个`php.ini`文件：

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = smtp.mail.yahoo.com
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = jesus4way@yahoo.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path
sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t"

; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
;mail.force_extra_parameters =

; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
mail.add_x_header = Off

; Log all mail() calls including the full path of the script, line #, to address and headers
;mail.log = "C:\xampp\apache\logs\php_mail.log" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:22:11.880

**检查服务器状态**

*   从 XAMPP 控制面板启动 Mercury Mail Server。检查状态是否为`Running`.
*   打开 Mercury 控制面板（从 XAMPP 面板或任务栏）并检查 SMTP 服务器状态是否为`Ready`.
*   从 Mercury 控制面板发送邮件到您自己的电子邮件地址，并检查它是否失败。

**PHP**

允许错误报告：`error_reporting(E_ALL);`并检查 PHP 错误和警告。

尝试将标题信息添加到您的`mail()`函数中：

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();
mail($to, $subject, $message, $headers);
?> 
```

# android - 在Android中自定义锁屏的任何教程

> ID：14889855
> 
> 赞同：-1
> 
> 时间：2013-02-15T07:15:44.283
> 
> 标签：android

我想知道在 Android 中自定义锁屏的任何教程或示例应用程序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-15T07:51:45.120

以下链接将为您提供有关如何在 android 中开发锁屏的指导

1) [WidgetCatalog](https://github.com/commonsguy/cw-omnibus/tree/master/WidgetCatalog)
2) [Android 锁屏](http://code.google.com/p/mylockforandroid/)
3)[小部件设计指南](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html)
4)[小部件框架](http://android-developers.blogspot.in/2009/04/introducing-home-screen-widgets-and.html)
5)[小部件](http://andytsui.wordpress.com/2012/02/17/mario-coin-block-open-sourced/)

我希望它会帮助你

谢谢。

# javascript - 如何使用 Flash JavaScript 文件 (.jsfl) 将库中的对象添加到舞台？

> ID：14889859
> 
> 赞同：1
> 
> 时间：2013-02-15T07:16:08.483
> 
> 标签：javascript, jsfl

在 Adob​​e Flash CS6 中，我试图将一个 MovieClip 从库中添加到舞台，但不是在导出模式（Ctrl + Enter）下，我希望我的 MovieClip 直接出现在我的工作区中。这就是我尝试使用 Flash JavaScript 文件 (.jsfl) 的原因，我将使用“运行命令...”运行该文件，但我不知道如何使用 Flash 与舞台和库进行交互Javascript 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:58:24.147

为了使用 JSFL 将 MovieClip 从库中添加到舞台，您可以使用：

```
fl.getDocumentDOM().library.addItemToDocument(position [, namePath]); 
```

位置参数是您希望在舞台上放置符号的 x、y 坐标。

第二个参数是一个字符串值，它指定库中项目的名称。如果项目位于文件夹内，您可以使用斜杠表示法指定路径。如果不包含此参数，Flash 将默认为库中当前选定的项目。

示例：如果在名为“myFolder”的文件夹中有一个名为“myMovieClip”的符号，并且您想将该符号放置在舞台上 x:250, y:180 处，则代码将是：

```
fl.getDocumentDOM().library.addItemToDocument({x:250, y:180}, "myFolder/myMovieClip"); 
```

如果您想了解更多信息，请参阅此页面上的文档：

[扩展闪存](http://livedocs.adobe.com/flash/9.0/main/flash_cs3_extending.pdf)

希望能有所帮助。

# html - 是否可以对 html5 进行后期处理？

> ID：14889862
> 
> 赞同：0
> 
> 时间：2013-02-15T07:16:14.740
> 
> 标签：html, html5-canvas, after-effects

再会

是否可以对 html5 进行后期处理？

我计划在我的背景上有一个带有现场 praps 的照相亭，例如在我的背景上是狂野的，然后在你拍照的时候有一只老虎在四处走动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:41:28.653

I think I know what you’re asking ?!

Canvas is quick enough to let you play video on the canvas and then draw a person’s picture on top of the moving video.

Here is some example code showing how to draw video into a canvas.

Then you would use the same canvas context to add a person’s photo to the video.

The effect is like having the weatherman "green screened" on top of the weather map.

```
<canvas id=c></canvas>
<video id=v controls loop>
    <source src=video.webm type=video/webm>
    <source src=video.ogg type=video/ogg>
    <source src=video.mp4 type=video/mp4>
</video>

<script>
    document.addEventListener('DOMContentLoaded', function(){
        var video = document.getElementById('v');
        var canvas = document.getElementById('c');
        var context = canvas.getContext('2d');

        var cw = Math.floor(canvas.clientWidth / 100);
        var ch = Math.floor(canvas.clientHeight / 100);
        canvas.width = cw;
        canvas.height = ch;

        video.addEventListener('play', function(){
            draw(this,context,cw,ch);
        },false);

    },false);

    function draw(video,canvasContext,w,h) {
        if(video.paused || video.ended) return false;
        c.drawImage(video,0,0,w,h);
        setTimeout(draw,20,video,canvasContext,w,h);
    }
</script> 
```

# android - 如何检测传出铃声的结束？

> ID：14889863
> 
> 赞同：1
> 
> 时间：2013-02-15T07:16:15.460
> 
> 标签：android, uri, phone-call, ringtone

我想用我的程序拨打电话，然后识别通话状态。我想检测传出铃声的结束。

如何检测传出铃声的结束？

我使用 Flowing 代码进行通话。

```
EditText ed = (EditText) findViewById(R.id.txtcall);        
Uri uri = Uri.fromParts("tel", ed.getText().toString(), null);
callIntent = new Intent(Intent.ACTION_CALL,uri);
startActivity(callIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:24:45.123

以下代码片段可以帮助您找到电话当前状态，无论是接听、响铃还是空闲。您可以轻松地使用这些状态并相应地实现您的功能。

```
 private class CustomPhoneStateListener extends PhoneStateListener
 {        
            @Override
            public void onCallStateChanged(int state, String incomingNumber) 
            {
                super.onCallStateChanged(state, incomingNumber);

                //TelephonyManager.CALL_STATE_IDLE
                //TelephonyManager.CALL_STATE_OFFHOOK
                //TelephonyManager.CALL_STATE_RINGING
            }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:51:43.947

看看意图 NEW_OUTGOING_CALL

```
 <receiver android:name=".receiver.OutgoingCallReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        </intent-filter>
    </receiver> 
```

然后您可以使用 PhoneStateListener 检查通话状态：

```
public class OutgoingCallReceiver extends BroadcastReceiver {

protected static final String CLASS_TAG = "OutgoingCallReceiver : ";

@Override
public void onReceive(Context context, Intent intent) {
    Bundle bundle = intent.getExtras();
    if(null == bundle) return;

    String phonenumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
    Log.i(LOG_TAG, CLASS_TAG + "phone number " + phonenumber);

        final TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
        tm.listen(new PhoneStateListener() {
            @Override
            public void onCallStateChanged(int state, String incomingNumber) {
                switch (state) {
                case TelephonyManager.CALL_STATE_RINGING:
                    Log.d(LOG_TAG, CLASS_TAG + "RINGING");
                    break;
                case TelephonyManager.CALL_STATE_OFFHOOK:
                    Log.d(LOG_TAG, CLASS_TAG + "OFFHOOK");
                    Process.onCallStateIsOFFHOOK();
                    break;
                case TelephonyManager.CALL_STATE_IDLE:
                    Process.onCallStateIsIDLE();
                    Log.d(LOG_TAG, CLASS_TAG + "IDLE");
                    break;
                default:
                    Log.d(LOG_TAG, CLASS_TAG + "Default: " + state);
                    break;
                }
            }
        }, PhoneStateListener.LISTEN_CALL_STATE);
    }
} 
```

在 Process 类中，您可以通过录制 VOICE_CALL 来检测铃声并创建更多状态，例如 CALLBEGINS、CALLANSWERED。onCallStateIsIDLE() 示例：

```
public void onCallStateIsIDLE() {
    setSpeakingOn(false);
    if (stateCall == STATE_CALLANSWERED ||
            stateCall == STATE_CALLBEGINS ||
            stateCall == STATE_DIALISOFFHOOK ||
            stateCall == STATE_DIALENDREQUESTED) {
        Log.i(LOG_TAG, CLASS_TAG + " - forcing state : STATE_DIALREADY : old state = " + stateCall);
        stateCall = STATE_DIALREADY;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:23:48.207

通过此检查：-您将能够致电用户

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:+9189745847"));
startActivity(callIntent); 
```

并在 androidmanifest.xml 文件中使用：

```
 <uses-permission android:name="android.permission.CALL_PHONE" /> 
```

# mongodb - 用于存储用户/项目特定数据的 Mongodb 模型

> ID：14889866
> 
> 赞同：1
> 
> 时间：2013-02-15T07:16:27.720
> 
> 标签：mongodb, mongoose

案例：系统中有用户，并且有静态文档（如书籍）每个用户可能会使用一些文档，并且对于他的每个文档都有特定的状态/设置（如文档中的当前位置/页面、书签/注释）。

使用两个键 userId 和 documentId 或 _id 等于 userId 的集合和 _id 等于 documentId 的嵌套子文档数组将用户和文档特定信息存储在平面集合中的更好方法是什么（在该场景中，集合也用于存储非文档特定的用户数据）？

> 第一个场景：find({userId: ..., documentId:...})
> 
> 第二个场景：findBy({_id:...})，然后找到_id等于documentId的子文档

第一种情况的优点：

> 1）我相信更快的查找和保存操作。

第一种情况的缺点：

> 1) 更多的文件
> 
> 2）无法在集合中存储一些与文档无关的用户特定数据

第二种情况的优点：

> 1）更好地表示数据关系（虽然是主观的）
> 
> 2) 可以使用相同的集合来存储一些其他非特定文档相关的用户数据。

第二个缺点：

> 1）更困难的搜索和更困难的保存操作（我使用的是Mongoose ODM，代码不会很复杂），我认为操作速度不如第一种情况。

需要考虑的一些事项：

> 1）一般在读取操作中我会只选择一个文档特定数据
> 
> 2）我需要经常保存一个文档的特定数据（例如定期保存用户正在使用的文档中的位置）。
> 
> 3) 用户/文档状态可能有一些必须更改的嵌套数组（书签、注释）（插入/删除文档）

考虑到这一点，我会说第一种情况更适合该任务，但我想听听一些专业人士的意见，两种情况是否有很大差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:53:19.640

您的实际访问路径是什么？您是否从用户 ID 开始，然后查找用户阅读的文档？还是从文档开始并搜索阅读它的用户？文档对象是轻量级的（只是标题和作者等信息）还是重量级的（包括内容）？如果文档是重量级的，我会将它们保存在一个单独的集合中并用于场景 2。

基本上场景 1 模拟了一个关系解决方案，场景看起来像一个对象模型。

我相信对象模型可以更好地描述现实并且更有效。

所以我会选择方案 2，除非你经常在读者中搜索一本书。

# jsp - IE如何在没有会话过期错误的情况下返回上一页

> ID：14889868
> 
> 赞同：0
> 
> 时间：2013-02-15T07:16:36.550
> 
> 标签：jsp, session, caching

我已经看到很多使用后退按钮返回上一页的示例，但没有人描述如何避免页面过期错误。

我有带有以下代码的 JSP 页面（b.jsp）以返回上一个 JSP 页面（a.jsp）

```
 <input type="button" name="cancel_button1" value="Cancel"            onclick="history.back()"></input> 
```

但是当我点击这个按钮时，我看到的不是之前的 JSP 页面，而是这个错误

> 网页已过期 最可能的原因： •此网页的本地副本已过期，网站要求您重新下载。

我如何避免这个错误。我听说过缓存，但我不知道将 JSP 页面放在哪里以及如何放置。任何建议都会非常有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:07:26.830

该解决方案在给定的链接上提供。

[http://forums.modx.com/thread/48212/solved-webpage-has-expired-issue](http://forums.modx.com/thread/48212/solved-webpage-has-expired-issue)

在您的 JSP 中使用以下代码

```
<%
    response.setHeader("Cache-Control", "no-cache");
    response.setDateHeader("Expires", 0);
%> 
```

# windows - 如何在没有 C++ 可再发行支持的情况下在 Windows XP 中运行 MFC 应用程序

> ID：14889869
> 
> 赞同：2
> 
> 时间：2013-02-15T07:16:37.047
> 
> 标签：windows, visual-studio, visual-c++

我的开发环境是

1.  C++

2.  视觉工作室 2008

3.  Windows 7的

    我要开始一个项目（MFC 应用程序），最终结果（exe）应该在 windows xp、vista、windows 7 或 windows 8 上运行，而无需安装任何额外的包（如 Visual C++ Redistributable 包）。

问题：

1.  我应该在 Visual Studio 中选择哪种项目？
2.  我应该指定哪些项目设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:10:27.580

您必须将 MFC 用作静态库。请注意此选项的项目创建向导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:50:10.997

这些是您在 Visual Studio 中启动需要在目标计算机上运行而无需安装任何其他重新分发组件的项目时必须考虑的基本事项。

1.  您必须选择项目类型`Win32-> Win32 Console Application`或`Win32-> Win32 Project`作为您的控制台或 GUI 要求。
2.  您必须`No Common Language Runtime support`选择`right click project in solution explorer -> Properties -> General -> Common Language Runtime support`
3.  您的应用程序需要运行时程序集才能在目标计算机中运行。有两种方法可以在目标计算机中部署运行时 DLL

    *   程序集静态链接 ( `right click project in solution explorer -> Properties -> General -> Use of MFC and Use of ATL`)。但是如果你的应用程序结合了多个 DLL EXE 和 LIB，这种方法就相当麻烦了。

    *   将目标计算机中的运行时 DLL 部署为私有程序集（我个人推荐这种方法）。更多细节[在这里](http://helgeklein.com/blog/2010/03/deploying-visual-c-runtime-files-as-private-assemblies/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T10:54:38.443

扩展已经说过的内容..

您需要将项目设置为构建为静态库：

1.  右键单击项目
2.  转到**“属性->配置属性->常规->项目默认值->使用MFC”**设置为**“在静态库中使用MFC”**

`/MD`如果您正在使用它，您可能还需要关闭该标志，并将其换成“/MT”：

1.  右键单击项目
2.  转到**“属性->配置属性->C/C++->代码生成->运行时库”**设置为**“多线程/MT”**

# c# - Dispatcher.Invoke 与 Action 委托

> ID：14889873
> 
> 赞同：1
> 
> 时间：2013-02-15T07:16:44.337
> 
> 标签：c#, delegates

我正在尝试使用`Action<string, bool>`委托类型来调用`Dispatcher.Invoke`

**与 detegate 一起使用的命名方法**

```
private void SomeMethod(string name,out bool result)
{
    ...
} 
```

当我使用以下内容时，它给出了一个错误，说与签名不匹配。

```
Dispatcher.Invoke(new Action<string, bool>(SomeMethod),new Object[2]{name, result}); 
```

我在这里做错了什么。请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:18:36.547

`Action<,>`没有`out`参数。您需要使用自己的委托，如下所示：

```
public void ActionOut<T1, T2>(T1 input, out T2 output) 
```

这*可能*有效（就不引发异常而言） - 我相信它会通过反思；我不太确定 with `Dispatcher.Invoke`。它*不会*将结果值留在您的`result`变量中 - 它会将其留在数组中，然后您将忽略它。你会想要：

```
object[] args = new object[] { name, null };
Dispatcher.Invoke(new ActionOut<string, bool>(SomeMethod), args);
result = (bool) args[1]; 
```

但最好只让方法*返回*结果，并使用 a`Func<string, bool>`代替。您几乎*不*应该在返回的方法中使用`out`参数`void`。在我看来，`out`参数被有效地设计为让您返回多个值 - 如果您只想返回一个值，请使用返回类型！

# wix - 如何在自定义操作中多次使用同一个 DllEntry？

> ID：14889875
> 
> 赞同：1
> 
> 时间：2013-02-15T07:16:52.707
> 
> 标签：wix, custom-action, wix3

我有一个用 C# 编写的 CustomAction。我想在我的 wix 安装程序代码中调用 DllEntry 两次。我怎样才能做到这一点？我正在通过以下方式执行此操作。但这对我有用。有没有其他公平的方法来做到这一点？

C#代码：

```
[CumtomAction]
public static ActionResult SymbolicLink(Session session)
{
     string s1=session.CustomActionData["value1"];
     string s2=session.CustomActionData["value2"];
       //mycode;
} 
```

维克斯代码：

```
<CustomAction Id="ca" Property="dllCA" Value="value1='one';value2='two'" />
<CustomAction Id="dllCA" BinaryKey="InstallerLibrary" DllEntry="SymbolicLink" Execute="deferred"/>

<CustomAction Id="ca1" Property="dllCA1" Value="value1='three';value2='four'" />
<CustomAction Id="dllCA1" BinaryKey="InstallerLibrary" DllEntry="SymbolicLink" Execute="deferred"/>

<InstallExecuteSequence>
 <Custom Action="ca" Before="InstallFinalize"></Custom>
 <Custom Action="dllCA" After="ca"></Custom>

 <Custom Action="ca1" Before="InstallFinalize"></Custom>
 <Custom Action="dllCA1" After="ca1"></Custom>
</InstallExecuteSequence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:08:15.877

定义一次就足够了，确保在调用`SymbolicLink`自定义操作之前正确设置属性：

```
<CustomAction Id="ca" Property="SymbolicLink" Value="value1='one';value2='two'" />
<CustomAction Id="ca1" Property="SymbolicLink" Value="value1='three';value2='four'" />
<CustomAction Id="dllCA" BinaryKey="InstallerLibrary" DllEntry="SymbolicLink" Execute="deferred"/>

<InstallExecuteSequence>
  <Custom Action="ca" Before="InstallFinalize"></Custom>
  <Custom Action="dllCA" After="ca"></Custom>

  <Custom Action="ca1" Before="InstallFinalize"></Custom>
  <Custom Action="dllCA" After="ca1"></Custom>
</InstallExecuteSequence> 
```

# c# - 增加 Asp.net 工具提示超时

> ID：14889882
> 
> 赞同：3
> 
> 时间：2013-02-15T07:17:41.420
> 
> 标签：c#, asp.net

有人知道如何增加 Asp.Net 控件的 toptip 超时吗？我试图在网上搜索这个，但他们建议很多人创建自己的定制工具提示。但我不想这样做，我想使用 Asp.Net/VS 附带的现有一个。有没有办法破解这个？也许在 web.config 之类的？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:24:05.727

工具提示在对象上创建一个`title`属性，该属性由客户端控制超时。如果不为工具提示创建一些其他类型的弹出窗口，例如通过使用 javascript，您将无法更改它的显示时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:26:15.000

我不知道你有什么样的控件，但你可以像这样实现这个功能

```
class testToolTip
        {
            public string P1
            {
                get;
                set;
            }
            public string p2
            {
                get;
                set;  
            }
        }
        ToolTip toolTip = new ToolTip();    
        public Form1()
        {
            InitializeComponent();
            List<testToolTip> lstToolTip = new List<testToolTip>();
            for (int i = 0; i < 100; i++)
            {
                testToolTip  t =    new testToolTip()  ;  
                t.P1 =   "Prop " + i.ToString();  
                t.p2  =  "Prop 1" + i.ToString();
                lstToolTip.Add(t);                
            }
            dataGridView1.DataSource = lstToolTip;
            toolTip.IsBalloon = true;
            toolTip.UseAnimation = true;
            toolTip.UseFading = true;   

        }

        private void dataGridView1_CellMouseEnter(object sender, DataGridViewCellEventArgs e)
        {

            Rectangle rect = this.dataGridView1.GetCellDisplayRectangle(e.ColumnIndex, e.RowIndex, true);

            toolTip.Show(dataGridView1[e.ColumnIndex, e.RowIndex].Value.ToString(), this, rect.Location.X, rect.Location.Y,1000);

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T06:33:24.150

我知道这已经得到回答，但在我看来不是很好。

这取决于。

对于 Windows 窗体，我建议通过 Form_Load 方法使用一种简单的方法...

[http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.autopopdelay%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.autopopdelay%28v=vs.85%29.aspx)

对于 Web 表单，有 CSS，它对我有用（参见第 2 版）...

[http://www.cssplay.co.uk/menu/tooltips](http://www.cssplay.co.uk/menu/tooltips)

比 Java 更容易且更易于实现，但它当然会影响所有控件及其所有工具提示。而且，它不定时，这更好！微软不应该假设人们需要多长时间阅读！

# extjs - Ext js 4 boxselect在编辑表单时显示多选数据

> ID：14889883
> 
> 赞同：0
> 
> 时间：2013-02-15T07:17:46.203
> 
> 标签：extjs, extjs4, extjs-mvc

在我正在使用的 EXTJS 4 中编辑表单时，是否有任何方法可以在 Boxselect xtype 上加载多选数据

```
Ext.getCmp('boxselect id').setValue(5,6,7,10). 
```

上面的代码在我给单个值设置值时工作，但我的条件是在编辑表单时加载多个选定的数据，因为 boxselect 是多选类型。

```
{
                                xtype : 'boxselect',
                                store : 'store',
                                name: 'attributes',
                                id: 'attributes',
                                displayField: 'name',
                                valueField: 'abbr',
                                multiSelect : true,
                                fieldLabel: 'Attribute',
                                allowBlank: false,
                                editable: true,
                                allowQueryAll : false,
                                forceSelection : true,
                                typeAhead: true,
                                triggerAction: 'all',
                                delimiter : ','
                            }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:10:13.303

试试这个 Ext.getCmp('boxselect id').setValue([5,6,7,10])。确保阵列

# iphone - 应用因屏幕分辨率而被拒绝

> ID：14889886
> 
> 赞同：0
> 
> 时间：2013-02-15T07:17:59.580
> 
> 标签：iphone, xcode

我将应用程序发布到应用程序商店，不幸的是它被拒绝了。原因是： - 未优化以支持设备屏幕尺寸和分辨率；在 iPad 上的某些视图中，各种视觉元素格格不入。

我不明白这是什么意思？

我在 iphone 6.0、iphone5.0 模拟器、iphone 视网膜（3.5 英寸）、iphone 视网膜（4 英寸）、ipad、ipad 视网膜中运行它。很好，我没有发现分辨率部分有任何问题。我不明白他们是在哪种模式下做到的。

如何使我的应用程序在 iPad 和 iPhone 上运行良好。我是否必须进行任何屏幕更改/分辨率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:24:21.220

如果你支持 iPad，你必须为 iPad 设计。你不能把你的 iPhone UI 塞进左上角；这比不支持 iPad 的用户体验更差（在这种情况下，用户会看到 iPhone 应用程序，并且可以将其缩放以填满屏幕）。

要么为 iPad 设计（这将涉及单独的 xib/故事板和一些布局代码），要么将您的应用程序标记为仅 iPhone。iPad 用户仍然可以下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:38:22.463

如果您想支持 iPad，那么您也应该像这样为 iPad 制作不同的 xib。

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    self.viewController = [[YOUR_VIEW_CONTROLLER alloc] initWithNibName:@"YOUR_VIEW_CONTROLLER_iPhone" bundle:nil];
} else {
    self.viewController = [[YOUR_VIEW_CONTROLLER alloc] initWithNibName:@"YOUR_VIEW_CONTROLLER_iPad" bundle:nil];
} 
```

# c++ - 如何计算文本文件中的所有数字？

> ID：14889888
> 
> 赞同：-5
> 
> 时间：2013-02-15T07:18:14.993
> 
> 标签：c++, c

我有一个如下 read.txt 的文本文件：

```
1.0 2.0 3.0 4.0
2.0 3.0 4.0 6
5.0 7 1.0 5.0 
```

计算.cpp：

```
void main()
{
    FILE *fp;
    fp=fopen("read.txt","r");
    double *read_feature = new double*[3];

    for(i = 0; i<3; i++) 
        read_feature[i] = new double[3];

    for(i=0;i<3;i++)
    {
        for(j=0;j<3;j++)
        {
            fscanf(fp,"%lf",&read_feature[i][j]);
        }
    }
} 
```

我想计算我的文本文件（read.txt）中的所有数字。读取文本文件由浮点数和整数组成。上述文件的答案是 12。

如何使用 c++ 动态计算文件中的浮点数？这意味着没有给出 i 和 j 的值。我需要程序会自动计算 i 和 j 的总数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T07:38:41.800

Do you need to build the array?

Or just count the number of floats?

```
 int main()
 {
     std::ifstream   file("read.txt");
     std::cout << std::distance(std::istream_iterator<double>(file),
                                std::istream_iterator<double>());
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T07:46:46.207

如果您对计算文件中元素的数量（在这种情况下为浮点数）感兴趣，您可以将文件读入 a `std::ifstream`，然后使用 a`std::istream_iterator`将迭代器获取到第一个和等价于结束元素之后的迭代器。将这些与`std::distance`元素一起使用并返回步骤数。这是一个工作示例：

```
#include <iostream>
#include <iterator>
#include <istream>
#include <fstream>

template <typename T>
int count_elements (std::istream &is) 
{ 
   std::istream_iterator<T> start(is), end;
   return std::distance(start, end);
}

int main()
{
  std::ifstream is("read.txt");
  std::cout << "Number of numbers " << count_elements<double>(is) << std::endl;
} 
```

注意：我在这里省略了错误检查，我把它留给用户。另请注意，如果存在无法解释为浮点数的元素，则算法将停止计数。所以你得到一个非零结果，对应于非法元素的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:23:25.877

假设文件只包含浮点数，为了找到浮点数的总数，您可以从文件中计算点数：

```
FILE *fp;
fp=fopen("read.txt","r");
char c;
int nFloat=0;
while(!feof(fp))
{
   fscanf(fp,"%c",&c);
   if (c=='.')  //is a dot from a floating number
       nFloat++;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-15T07:28:05.770

研究banuj的答案。您可以计算一行中的浮点数和行数

```
FILE *fp;
fp=fopen("read.txt","r");
char c;
int nFloatrow=0,nfloatcol=0,count=1;
while(!feof(fp))
{
   fscanf(fp,"%c",&c);
   if (c=='.'&&count==1)  //is a dot from a floating number
       nFloatrow++;
   if (c=='\n')  //is a newline
   {
       nFloatcol++;
       count=0;
   }
} 
```

# iphone - 在 iPhone 应用程序中使用图表

> ID：14889893
> 
> 赞同：0
> 
> 时间：2013-02-15T07:18:34.057
> 
> 标签：iphone, api, charts

我想在我的应用程序中添加图表功能..

我已经浏览了旧帖子中的各种链接。大多数链接都不起作用。

而且我无法使用以下链接 [core plot api来检查 core plot API](http://code.google.com/p/core-plot/source/checkout)

收到错误服务器发送了意外的返回值（405 Method Not Allowed）

那么任何人都可以建议或提供我可以使用的任何最新库或 API 的链接吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:23:18.497

您可以从此链接下载最新的 Core Plot 图表库版本：

[https://code.google.com/p/core-plot/downloads/detail?name=CorePlot_1.1.zip&can=2&q=](https://code.google.com/p/core-plot/downloads/detail?name=CorePlot_1.1.zip&can=2&q=)

您将使用上面下载的链接获得核心凝块库和示例。

以下是有关将其集成到您的应用程序中的说明的链接：

[https://code.google.com/p/core-plot/wiki/UsingCorePlotInApplications](https://code.google.com/p/core-plot/wiki/UsingCorePlotInApplications)

希望这对您有所帮助。

# malware - 当谷歌将文件标记为恶意软件时？

> ID：14889896
> 
> 赞同：3
> 
> 时间：2013-02-15T07:18:42.930
> 
> 标签：malware, malware-detection

我的网站中有几个 Js 文件，包括 jQuery。

谷歌说：

**Google 上一次在该网络上测试网站是在 2013 年 2 月 14 日，最后一次发现可疑内容是在 2013 年 2 月 14 日。**

您知道 Google 在什么情况下会检测到 Js 文件中的恶意软件吗？文件中的代码或恶意软件有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:47:48.093

抱歉，答案含糊不清，但没有更多细节，我无法更具体。通常，恶意软件通常使用某些模式和代码技术来溢出浏览器中的缓冲区，从而使攻击者能够控制系统。Javascript 本身只是用作浏览器的管道。通常，Shellcode 字节被编码为 javascript 以传递给毫无戒心的用户浏览器。如果您有通过 Javascript 传递的编码数据，它可能会被 Google 的启发式引擎视为可疑。

您也有可能使用与有毒脚本类似的技术（有时用于跨站点脚本 (XSS) 和跨站点请求伪造 (CSRF)）来完成您的某些工作，这是获得标记的好方法由谷歌。

另一种可能性是您的网站代码没问题，但它有一个安全漏洞导致谷歌担心，因为恶意用户可以利用您的网站。为了确定这一点，我建议使用 Nikto、[Burp Suite](http://www.portswigger.net/burp/ "打嗝套房")（我个人最喜欢的）、Acunetix 等网络扫描仪来尝试查找安全漏洞。

[您还可以在OWASP](https://www.owasp.org/index.php/Main_Page "OWASP")找到很多很棒的信息

我希望这会有所帮助，因为您的网站被 Google 标记会导致很多挫折和焦虑。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:41:16.443

如果 Google 说他们在您的文件中发现了恶意（或可疑）代码，则说明您的文件中存在恶意或可疑代码。

抱歉，Google 不会扫描漏洞 - 只会扫描您网站上已经存在的错误代码。如果不了解更多关于您的网站、操作系统、软件等的信息，就不可能为您提供更多关于它是如何发生的信息。

如果他们在您的 .js 文件中检测到它，那么您可能在这些文件的开头或结尾都有一个 document.write 语句。您的问题是，即使您找到并删除了传染性代码，您仍然不知道它是如何发生的。在不知道这一点并采取措施阻止它的情况下，它会返回。

# java - Spel 表达弹簧

> ID：14889897
> 
> 赞同：0
> 
> 时间：2013-02-15T07:18:45.593
> 
> 标签：java, spring, spring-mvc

有没有办法使用`@Value`注释来检索 2 个属性值并将它们合并为 1？

```
public void setPath(@Value("{#foo['base']+#foo['subdirectory']}) File file) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:25:28.170

根据弹簧[文档](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html)，您已获得

> .concat()

但我真的不知道它是否有效......

# php - Ajax 调用总是返回错误函数

> ID：14889899
> 
> 赞同：-1
> 
> 时间：2013-02-15T07:18:51.333
> 
> 标签：php, jquery, ajax

我有 php 页面，页面显示在 iframe 中，该页面包含一个 ajax 调用，代码如下所示

```
 $.ajax({
            url: "mindex.php",
            data: {
                model: "test",
                handler: "test_123",
                data: info
            },
            type: "post",
            dataType: "json",
            success: function(response){
                if( response.success ){
                    createChart( response.times );
                }else{
                    $('#chart-container').html( '<p style="margin: 20px 100px; color: rgb(204, 71, 71);">'+response.errors+'</p>' );
                }
            },
            error: function(){
                alert("Unknown error Occured");
            }
        }); 
```

运行此页面后，始终显示“发生未知错误”；Firebug 显示无响应（空白）。

此页面在我的本地主机中工作，但在线显示错误请帮助我

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:48:37.717

通话没有任何问题`ajax`。

从`mindex.php`您必须需要以`json`格式返回输出。

`echo json_encode($response);`在`mindex.php`文件中使用。

# clojure - 没有 LET 是否可以有类型提示？

> ID：14889903
> 
> 赞同：0
> 
> 时间：2013-02-15T07:19:26.527
> 
> 标签：clojure

这是我的代码（一个例子）：

```
(def foo (.java_method java_object))
(debug "result of method bar() on object foo: " (.bar foo)) 
```

我收到警告（`foo`属于`FooType`Java 类型）：

```
Reflection warning, example/test.clj:2 - call to bar can't be resolved 
```

我可以使用此类型提示删除警告：

```
(def foo (.java_method java_object))
(debug "result of method bar() on object foo: " (.bar ^FooType foo)) 
```

这行得通，但我每次使用`foo`. 另一种解决方案是使用`let`，但它会创建额外的缩进级别，我想避免这种情况。有没有可能做类似的事情？：

```
(def foo (.java_method java_object))
(set-type foo FooType)
(debug "result of method bar() on object foo: " (.bar foo)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:49:12.900

不。要将编译时元数据（如类型提示）与命名值相关联，请使用 let。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:34:10.193

您可以将类型提示与`def`.

```
(def ^FooType foo (.java_method java_object)) 
```

## 更新：

例子：

```
user=> (set! *warn-on-reflection* true)
true
user=> (import java.util.Hashtable)
java.util.Hashtable
user=> (def ^Hashtable table (Hashtable.))
#'user/table
user=> (.put table "one" 1)
nil
user=> (.put table "two" 2)
nil 
```

# web-services - bing api限制还是限制？

> ID：14889908
> 
> 赞同：1
> 
> 时间：2013-02-15T07:20:02.423
> 
> 标签：web-services, bing, bing-api

我为我的英语感到抱歉。

当我要求：

```
[https://api.datamarket.azure.com/Bing/Search/News?$format=json&Market=%27en-US%27&Query=%27%22REGENERON+PHARMACEUTICALS%22+|+%22ACILAC%22+|+%22EYLEA%22+|+%22Regeneron%22+|+%22Age-related+Macular+Degeneration%22+|+%22Age-related+Macular+Degeneration+%28armd+Or+Amd%29%22+|+%22FENTANYL+CITRATE+PRESERVATIVE+FREE%22+|+%22Macular+Degeneration%22%27][1] 
```

我没有任何回应数据。

但是当我将请求更改为：

```
[https://api.datamarket.azure.com/Bing/Search/News?$format=json&Market=%27en-US%27&Query=%27%22REGENERON+PHARMACEUTICALS+ACILAC%22+|+%22EYLEA%22+|+%22Regeneron%22+|+%22Age-related+Macular+Degeneration%22+|+%22Age-related+Macular+Degeneration+%28armd+Or+Amd%29%22+|+%22FENTANYL+CITRATE+PRESERVATIVE+FREE%22+|+%22Macular+Degeneration%22%27][2] 
```

我有数据作为回应。

有人谈论查询参数中的限制或限制吗？

# .htaccess - 如何在共享主机上部署 Symfony2？

> ID：14889913
> 
> 赞同：14
> 
> 时间：2013-02-15T07:20:17.507
> 
> 标签：.htaccess, mod-rewrite, symfony, shared-hosting

我想从这个 url [http://www.sample.com/amateur1访问我在生产环境（](http://www.sample.com/amateur1) [http://www.sample.com/amateur1/web/app.php](http://www.sample.com/amateur1/web/app.php) ）中的 symfony 应用程序。

为此，我将 .htacces 文件移动到[http://www.sample.com/amateur1/.htaccess](http://www.sample.com/amateur1/.htaccess)，其中包含以下内容：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteBase /web/

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

但是当我访问[http://www.sample.com/amatur1](http://www.sample.com/amateur1)时显示 404 错误，并且*prod.log*没有写入。

我也使用了`RewriteBase /amateur1/web/`，因为我不知道*RewriteBase*路径是相对于服务器的*DocumentRoot*，还是来自*.htaccess*文件所在的路径。由于这个答案[Symfony2: How to deploy in subdirectory (Apache)](https://stackoverflow.com/questions/12423983/symfony2-how-to-deploy-in-subdirectory-apache)也尝试`/amateur1`并作为 RewriteBase`/amateur1/`

通过三个尝试，“异常”页面显示为无样式，并且未加载任何图像。但随后我在 prod.log 文件中收到以下错误：

```
[2013-02-15 02:06:47] request.ERROR: Symfony\Component\HttpKernel\Exception\NotFoundHttpException: No route found for "GET /amateur1/" (uncaught exception) at /home/u105859802/public_html/amateur1/app/cache/prod/classes.php line 5121 [] [] 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-15T10:56:39.500

在您的配置中，apache`public_html`用作文档根目录

如果 Symfony2 安装在 directory`/home/u105859802/public_html/amateur1`中，则要服务的 Symfony 公共目录是`/home/u105859802/public_html/amateur1/web/`

你应该使用

```
RewriteBase /amateur1/web/ 
```

**但要小心，这并不安全**
**你必须保护你的 symfony 目录！（配置可访问）**

你为什么不试着把你的 symfony 文件移动到你的私人区域呢？
您可以将 Symfony 网络目录重命名为`public_html`

在文档手册中查看[如何做到这一点](http://symfony.com/doc/current/cookbook/configuration/override_dir_structure.html#override-the-web-directory)

因此，我的推荐结构如下所示：

*   /home/u105859802/
    *   小贩
    *   源代码
    *   应用程序
    *   斌
    *   **public_html** (symfony2 中默认的 web) **<- 唯一的公共目录**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T08:02:51.593

在大多数共享主机中，您无法覆盖 Apache 设置，在这种情况下可能需要在 .htaccess 文件中编写重定向规则

```
Options +FollowSymLinks +ExecCGI

RewriteEngine On

RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.com$ [NC]
RewriteRule !^projectName/ /projectName/web/app.php/%{REQUEST_URI} [L,NC] 
```

这是我在项目中使用的规则。您可能需要以其他方式提供资产的完整路径，否则它们不会被加载。

# c - 使用 n 个参数运行函数

> ID：14889917
> 
> 赞同：0
> 
> 时间：2013-02-15T07:20:37.420
> 
> 标签：c, function, undefined

我需要在原始 ANSI C (1989) 中解决一个问题。

我有一些指针（void *func）可以使用（int n）双参数起作用，并且有`double values[]`带有`n`数字的数组。所以我想用`n`值中的参数运行我的函数。

例如，我有功能：

```
double hypotenuse(double x, double y, double z); 
```

所以

```
void *func = (void *)hypotenuse; double values[3] = {5, 4, 3}; int n = 3; 
```

我想做这样的事情：

```
func(n, values); 
```

问题是我不能改变函数的原型，所以我需要以某种方式做到这一点（也许是一些宏？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T08:09:36.900

主要问题是您必须根据参数的数量（即取决于`n`变量）以不同的方式转换指针。

一种方法是使用包含`switch`参数号语句的包装函数：

```
double wrapper(void *func, double args[], int n)
{
    switch (n)
    {
    case 0:
        return ((double (*)(void)) func)();
    case 1:
        return ((double (*)(double)) func)(args[0]);
    case 2:
        return ((double (*)(double, double)) func)(args[0], args[1]);
    case 3:
        return ((double (*)(double, double, double)) func)(args[0], args[1], args[2]);
    default:
        printf("Error: wrapper called with %d arguments\n", n)
        break;
    }

    return 0.0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:52:51.970

*昨晚写的很晚——但是当我试图发布它时，我的互联网连接中断了。我看到约阿希姆写了基本相同的答案。*

* * *

在限制范围内，这将起作用：

```
#include <assert.h>

extern double function_invoker(void *func, int n, double *values);

double function_invoker(void *func, int n, double *values)
{
    switch (n)
    {
    case 0:
        return (*(double (*)(void))func)();
    case 1:
        return (*(double (*)(double))func)(values[0]);
    case 2:
        return (*(double (*)(double, double))func)(values[0], values[1]);
    case 3:
        return (*(double (*)(double, double, double))func)(values[0], values[1], values[2]);
    default:
        assert("Need more entries in the switch in function_invoker()" == 0);
        return(0.0);
    }
} 
```

明显的限制是您要在`switch`. 我见过松散相似的代码多达 100 多个参数。我不确定为什么认为这是必要的。

该代码在 Mac OS X 10.8.2 上的 GCC 4.6.0 下编译时没有警告：

```
$ gcc -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
    -Wold-style-definition -c x.c
$ 
```

但是如果你用`double (*)()`代替`void *`，你会得到：

```
$ gcc -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
    -Wold-style-definition -c x.c
x.c:3:1: warning: function declaration isn’t a prototype [-Wstrict-prototypes]
x.c:5:1: warning: function declaration isn’t a prototype [-Wstrict-prototypes]
$ 
```

# css - 在 extjs 中显示图像而不是复选框的选中状态

> ID：14889918
> 
> 赞同：3
> 
> 时间：2013-02-15T07:20:59.213
> 
> 标签：css, extjs, extjs4, extjs4.1

用户检查时如何显示图像（勾选的图像）而不是复选框的默认勾选？

我尝试使用`checkedCls`配置，其中图像来自复选框的背面。

```
checkedCls: 'checkedBoxStyle' 
```

* * *

```
 .checkedBoxStyle{
       background-image:url('http://www.chathamhouse.org/sites/default/files/public/images/buttons/tick-icon.png');
       background-repeat:no-repeat;
 } 
```

[**jsfiddle**](http://jsfiddle.net/nue7j/4/)开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T08:02:10.837

好吧，图像只会改变它的背景位置

```
.x-form-cb-checked {
     background-position: 0 -13px;
} 
```

导致原始图像如下所示：

![在此处输入图像描述](../Images/63025428a08aab10c9d756249ca95657.png)

您应该在此处更改整个图像。

我建议更改基类并强制覆盖

像这样：

```
.newBase input{
    background-image:url('../resources/images/checkBox_Tick_Mark.png') !Important;
} 
```

并且在配置中

```
...
baseCls: 'newBase',
... 
```

查看您的**[JSFiddle](http://jsfiddle.net/nue7j/6/)**（图像路径不正确，但它应该向您展示诀窍）

# linux - 无法在当前目录中获取脚本

> ID：14889921
> 
> 赞同：10
> 
> 时间：2013-02-15T07:21:07.587
> 
> 标签：linux, bash, sh

`source`显然，如果该脚本在当前目录中，我就不能编写脚本。例如，

```
# source some/dir/script.sh
Ok 
```

工作正常，但如果我在与脚本相同的目录中，则会出错：

```
# cd some/dir
# source script.sh
-sh: source: script.sh: file not found 
```

是什么赋予了？是改变目录的唯一方法吗？

如果相关的话，我在 Angstrom Linux 上使用 bash v4.2.10。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-15T08:25:10.180

引用源手册页：

> 源文件名 [参数]
> 
> ……
> 
> 如果 filename 不包含斜杠，则使用 PATH 中的文件名来查找包含 file-name 的目录。

所以...`source`正在尝试`script.sh`在`PATH`.

如果要在当前文件夹中获取文件，请使用

```
source ./script.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:22:38.387

使用绝对路径 -- `source /root/path/to/some/dir/script.sh`-- 应该对你进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-21T15:20:18.250

This can happen when the file is in the wrong format. I FTP'd a Korn Shell script from Windows. I could edit it, but got "not found [No such file or directory]" when I tried to run it. It turned out it was in DOS format, which was indicated in the file name line when I edited it in vi. After I re-FTP'd it, making sure it was being transferred as ASCII, it ran fine.

# ormlite - 使用 ormlite-android 创建自定义 Dao 时出现空指针异常

> ID：14889928
> 
> 赞同：3
> 
> 时间：2013-02-15T07:21:38.910
> 
> 标签：ormlite

我正在尝试扩展基础 ORMLite DAO 类，以便添加一些自定义方法。我试过按照这里的答案，但我得到一个空错误，不知道如何正确地转换 dao 对象（[Ormlite - BaseDaoImpl 扩展时构造函数调用失败](https://stackoverflow.com/questions/10184169/ormlite-constructor-call-failing-when-basedaoimpl-is-extended)） 目前，我有下表：

```
@DatabaseTable(tableName="beers", daoClass=BeerDao.class)
public class Beer {
    public static final String BEER_NAME = "name";

    @DatabaseField(generatedId = true)
    private UUID id = UUID.randomUUID();

    @DatabaseField()
    private String name;

    @DatabaseField()
    private String breweryName;

    public Beer() {}

    ... getters/setters
    } 
```

BeerDao 类：

```
public class BeerDao<Beer,UUID> extends BaseDaoImpl<Beer,UUID> {

    public BeerDao(ConnectionSource connectionSource, Class<Beer> dataClass) throws SQLException {
        super(connectionSource, dataClass);
    }
} 
```

数据库助手代码：

```
public class DatabaseHelper extends OrmLiteSqliteOpenHelper  {
    private static final String TAG = "Database";

    private static final String DATABASE_NAME = "brewgenius.db";
    private static final int DATABASE_VERSION = 7;

    private BeerDao<Beer, UUID> beerDao = null;
    private Dao<Checkin, UUID> checkinDao = null;

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION, R.raw.ormlite_config);
    }

    /* ... onCreate and onUpgrade code ..*/

    /**
     * Get Beer Model DAO
     * 
     * @return Beer DAO
     */
    public BeerDao<Beer, UUID> getBeerDao() {
        if (beerDao == null) {
            try {
                beerDao = getDao(Beer.class);
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
        return beerDao;
    } 
```

}

在我的活动中，当我尝试获取 Dao 时，我得到一个空指针异常。

```
BeerDao<Beer,UUID> dao = getHelper().getBeerDao(); 
```

仅供参考，Dao 被投射到：

```
BeerDao<Beer,UUID> 
```

**更新**

看起来我的 DatabaseConfigUtil 没有读取 DaoClass 属性。

```
public class DatabaseConfigUtil extends OrmLiteConfigUtil {
    public static void main(String[] args) throws SQLException, IOException {
        writeConfigFile("ormlite_config.txt");
    }
} 
```

从 DatabaseHelper 的构造函数中删除 ormlite_config.txt 会导致即时读取正确读取 DaoClass 属性。知道作者为什么不写这个吗？

这是 ormlite_config.txt

```
# --table-start--
dataClass=com.brewgenius.model.Beer
tableName=beers
# --table-fields-start--
# --field-start--
fieldName=id
columnName=_id
generatedId=true
# --field-end--
# --field-start--
fieldName=name
# --field-end--
# --field-start--
fieldName=breweryName
# --field-end--
# --table-fields-end--
# --table-end--
################################# 
```

# iphone - 从核心数据中获取主键

> ID：14889936
> 
> 赞同：1
> 
> 时间：2013-02-15T07:21:48.350
> 
> 标签：iphone, core-data, primary-key, fetch

我喜欢获取实体主键的所有对象。我应该如何实现它？我如何从中检索ID？

此代码推荐：

```
[NSManagedObject objectID]. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:10:32.923

如果您知道对象 ID，则可以调用

```
 NSManagedObject *object = [managedObjectContex objectForID:objectId] 
```

检索相应的对象。

正如您还建议您使用 cna 获取 ID

```
 NSManagedObjectID *moID = [managedObject objectID]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:14:31.433

获取然后访问对象的最佳方法是：

```
 NSFetchRequest* request = [[NSFetchRequest alloc] init];
    [request setEntity:entity];
    [request setResultType:NSManagedObjectIDResultType];
    [request setFetchBatchSize:20];

    NSError* error = nil;
    NSArray* items = [context executeFetchRequest:request error:&error];

    for (NSManagedObjectID* objectID in items) {
        NSManagedObject* object = [context objectWithID:objectID];
        ...
    } 
```

# php - PHP表单数据未通过

> ID：14889938
> 
> 赞同：0
> 
> 时间：2013-02-15T07:21:54.167
> 
> 标签：php, forms, post

我有一个相当基本的问题，但我无法理解它。

我有一个多年来一直运行良好的 PHP 表单，突然之间，php 表单值没有与 post 数据一起传递。为了解决问题，我开始从表单中删除一些行，我到了某个点，for 又开始工作了。所以我加了一条线，它就停止了？我根本无法解释这一点。我检查了 post_max_size 设置和它的 120m 所以不可能是问题。甚至提交按钮的 POST 值也没有被传递。print_r() 不显示任何数据。

我的完整表格（曾经有效）是：

```
<form name="form1" id="form1" action="bsassigncosts.php" method="post">
<table id="hor-minimalist-a">
    <tr>
        <th></th>
        <th>Date & Time</th>
        <th>Parked</th>
        <th><font color=red>Load Number</font></th>
        <th><font color=red>Trailer</font></th>
        <th><font color=red>Weight</font> kg's</th>
        <th><font color=red>Source</font></th>
        <th><font color=red>Destination</font></th>
        <th><font color=red>Cycle Type</font></th>
        <th><font color=red>Rate to be applied</font></th>
        <th>LOC Status / Comments</th>
    </tr>

<? while($row = $loads->fetch(PDO::FETCH_ASSOC)) { ?>
    <tr>
        <td><input type="checkbox" name="checkbox[]" id="checkbox[]" value="<? echo $row['loadnumber']; ?>"></td>
        <td><? echo $row['sarrive']; ?></td>
        <td><input type="radio"  <? if($row['parkinglot']==="yes"){echo "checked='checked'";} ?> disabled >&nbsp;</td>
        <td><input type="text" name="correctedloadnumber<? echo $row['loadnumber']; ?>" id="correctedloadnumber<? echo $row['loadnumber']; ?>" value="<? echo $row['loadnumber']; ?>" class="inputsmall"></td>
        <td>
            <SELECT name="correctedtrailer<? echo $row['loadnumber']; ?>" id="correctedtrailer<? echo $row['loadnumber']; ?>"  class="selectnarrow"> 
            <OPTION value="<? echo $row['trailer']; ?>" selected ><? echo $row['trailer']; ?></option>
            <option>
            <?=$optionstrailer?> 
            </option>
            </SELECT> 
        </td>
            <td><input type="text" name="correctedweight<? echo $row['loadnumber']; ?>" id="correctedweight<? echo $row['loadnumber']; ?>" value="<? echo $row['weight']; ?>" class="inputsmall"></td>
        <td>
            <SELECT name="correctedsource<? echo $row['loadnumber']; ?>" id="correctedsource<? echo $row['loadnumber']; ?>"  class="selectnarrow"> 
            <OPTION value="<? echo $row['source']; ?>" selected ><? echo $row['source']; ?></option>
            <option>
            <?=$optionssource?> 
            </option>
            </SELECT> 
        </td>
        <td>
            <SELECT name="correcteddestination<? echo $row['loadnumber']; ?>" id="correcteddestination<? echo $row['loadnumber']; ?>"  class="selectnarrow"> 
            <OPTION value="<? echo $row['destination']; ?>" selected ><? echo $row['destination']; ?></option>
            <option>
            <?=$optionsdestination?> 
            </option>
            </SELECT> 
        </td>
        <td>
            <SELECT name="correctedcycletype<? echo $row['loadnumber']; ?>" id="correctedcycletype<? echo $row['loadnumber']; ?>"  class="selectnarrow"> 
            <OPTION value="<? echo $row['cycletype']; ?>" selected ><? echo $row['cycletype']; ?></option>
            <option>
            <?=$optionscycle?> 
            </option>
            </SELECT> 
        </td>
        <td>
            <SELECT NAME="rate<? echo $row['loadnumber']; ?>" id="rate<? echo $row['loadnumber']; ?>" class="select"> 
            <OPTION VALUE=0 >
            <?=$optionsrate?> 
            </option>
            </SELECT> 
        </td>
        <td><? if($row['adminstatus']="approvereject"){ if(isset($row['approvedby'])){echo "Rejected by<font color=red> ".$row['approvedby']."</font>:  ".$row['lmcomments'];}}  ?></td>    </tr>
<? } ?>
</table>

<input type="submit" name="testupdate" id="testupdate" value="Updated selected">
<input type="submit" name="park" id="park" value="Park Selected">

</form> 
```

如前所述，这曾经可以正常工作。现在没有了。为了进行故障排除，我从表中删除了一些行，这现在可以工作并将帖子值传递到下一页。

```
<form name="form1" id="form1" action="bsassigncosts.php" method="post">
<table id="hor-minimalist-a">
    <tr>
        <th></th>
        <th>Date & Time</th>
        <th><font color=red>Trailer</font></th>
        <th><font color=red>Load Number</font></th>
        <th><font color=red>Weight</font> kg's</th>
        <th><font color=red>Source</font></th>
        <th><font color=red>Destination</font></th>
        <th><font color=red>Cycle Type</font></th>
        <th><font color=red>Rate to be applied</font></th>
        <th>LOC Status / Comments</th>
    </tr>
<? while($row = $loads->fetch(PDO::FETCH_ASSOC)) { ?>
    <tr>
        <td><input type="checkbox" name="checkbox[]" id="checkbox[]" value="<? echo $row['loadnumber']; ?>"></td>
        <td><? echo $row['sarrive']; ?></td>
        <td>
            <SELECT name="correctedtrailer<? echo $row['loadnumber']; ?>" id="correctedtrailer<? echo $row['loadnumber']; ?>"  class="selectnarrow"> 
            <OPTION value="<? echo $row['trailer']; ?>" selected ><? echo $row['trailer']; ?></option>
            <option>
            <?=$optionstrailer?> 
            </option>
            </SELECT> 
        </td>   
        <td><input type="text" name="correctedloadnumber<? echo $row['loadnumber']; ?>" id="correctedloadnumber<? echo $row['loadnumber']; ?>" value="<? echo $row['loadnumber']; ?>" class="inputsmall"> </td>
        <td><input type="text" name="correctedweight<? echo $row['loadnumber']; ?>" id="correctedweight<? echo $row['loadnumber']; ?>" value="<? echo $row['weight']; ?>" class="inputsmall"> </td>

        <td><? if($row['adminstatus']="approvereject"){ if(isset($row['approvedby'])){echo "Rejected by<font color=red> ".$row['approvedby']."</font>:  ".$row['lmcomments'];}}  ?></td>

    </tr>
<? } ?>
</table>
</form> 
```

如果我在下面的代码中再添加一个条目，那么该帖子现在将失败。我不明白：

```
<td>
    <SELECT name="correctedsource<? echo $row['loadnumber']; ?>" id="correctedsource<? echo $row['loadnumber']; ?>"  class="selectnarrow"> 
    <OPTION value="<? echo $row['source']; ?>" selected ><? echo $row['source']; ?></option>
    <option>
    <?=$optionssource?> 
    </option>
    </SELECT> 
</td> 
```

这里的任何建议将不胜感激。如果这是一个非常简单或愚蠢的问题，我们深表歉意。

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:25:45.877

令人沮丧的是，这个问题的答案不在于代码本身，而在于传递的表单字段的数量。

我减少了while循环中的mysql行数并重新提交了表单并成功处理。在[研究](http://php.net/manual/en/info.configuration.php)中，该`max_input_vars`字段设置为 1000。我认为这是问题的根源，并已与我的托管公司记录了一个电话，以便为我更改 php.ini 参数。

谢谢您的帮助，

# jquery-mobile - 如何使用 Jquery Mobile 根据平台更改按钮大小

> ID：14889939
> 
> 赞同：1
> 
> 时间：2013-02-15T07:22:01.343
> 
> 标签：jquery-mobile

如何使用 jQuery Mobile 根据平台更改按钮大小？我在显示网格按钮时使用了网格。但是，当我在具有大屏幕尺寸的设备或 iPad 上部署应用程序时，按钮看起来就像是在屏幕的一侧。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:23:58.360

正确的方法是通过纯 css 媒体类型。这是一个响应式列表视图的实例，它的宽度由屏幕宽度决定：

```
ul { 
float: left; width: 100% !important; 
}

/* iPhone Horizontal -------------------*/ 
@media all and (min-width: 480px){  
ul { width: 100% !important; } 
}       

/* iPad Verticle -----------------------*/ 
@media only screen and (min-width: 768px) {
ul { width: 50% !important; } 
}  

/* iPad Horizontal ---------------------*/ 
@media only screen and (min-width: 1024px) {     
ul { width: 50% !important; } 
}  

/* Nexus 7 Horizontal ------------------*/ 
@media only screen and (min-width: 1280px) {     
ul { width: 33.3333333% !important; } 
}  

/* Laptop 1440 -------------------------*/ 
@media only screen and (min-width: 1440px) {     
ul { width: 33.3333333% !important; } 
}  

/* Monitor 1600 ------------------------*/ 
@media only screen and (min-width: 1600px) {
ul { width: 25% !important; } 
}  

/* Monitor 1920 ------------------------*/ 
@media only screen and (min-width: 1920px) {     
ul { width: 20% !important; } 
} 
```

这是一个有效的 jsFiddle 示例： http: [//jsfiddle.net/Gajotres/Yz3nS/](http://jsfiddle.net/Gajotres/Yz3nS/)，用它来修复你的按钮。

**编辑 ：**

这是一个适用于您的 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/vjsua/](http://jsfiddle.net/Gajotres/vjsua/)，您应该调整结果区域的大小以查看差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:05:32.073

```
if( navigator.userAgent.match(/Android/i){
      //apply style to element
}else if ( navigator.userAgent.match(/iPhone/i)){
      //apply style to element
}else if ( navigator.userAgent.match(/iPad/i)){
      //apply style to element
} 
```

# html - Base64 图像未在 IE6 中显示

> ID：14889940
> 
> 赞同：1
> 
> 时间：2013-02-15T07:22:02.003
> 
> 标签：html, image, base64, internet-explorer-6

我正在尝试`IE6`从`base64`编码的字符串中渲染图像。根据[此处](https://stackoverflow.com/questions/1575333/ie6-how-to-get-inline-base64-images-to-work-with-ie6)和[此处](http://venodesigns.net/2010/06/17/you-got-your-base64-in-my-css/)的资源，我正在尝试以下代码（图像只是`base64`我的个人资料图片的编码在这里...... :)，从[这个网站](http://webcodertools.com/imagetobase64converter/Create)获得）

```
<!--
Content-Type: multipart/related; boundary="=_data-uri"
-->
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#pic {
width:670px;height:710px;
background-image: expression("url(mhtml:" + window.location + "!locoloco)");
}
</style>
<script type = 'text/javascript'>
window.onload = function() { alert(window.location); }
</script>
</head>
<body> 
<div>Foo</div>
<div id="pic" ></div>
<div id=test style="display: none;">

--=_data-uri
Content-Location:locoloco
Content-Transfer-Encoding:base64

/9j/4AAQSkZJRgABAgAAAQABAAD//gAEKgD/4gIcSUNDX1BST0ZJTEUAAQEAAAIMbGNtcwIQAABtbnRyUkdCIFhZWiAH3AABABkAAwApADlhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApkZXNjAAAA/AAAAF5jcHJ0AAABXAAAAAt3dHB0AAABaAAAABRia3B0AAABfAAAABRyWFlaAAABkAAAABRnWFlaAAABpAAAABRiWFlaAAABuAAAABRyVFJDAAABzAAAAEBnVFJDAAABzAAAAEBiVFJDAAABzAAAAEBkZXNjAAAAAAAAAANjMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0ZXh0AAAAAEZCAABYWVogAAAAAAAA9tYAAQAAAADTLVhZWiAAAAAAAAADFgAAAzMAAAKkWFlaIAAAAAAAAG+iAAA49QAAA5BYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAkoAAAD4QAALbPY3VydgAAAAAAAAAaAAAAywHJA2MFkghrC/YQPxVRGzQh8SmQMhg7kkYFUXdd7WtwegWJsZp8rGm/fdPD6TD////bAEMACAYGBwYFCAcHBwkJCAoMFA0MCwsMGRITDxQdGh8eHRocHCAkLicgIiwjHBwoNyksMDE0NDQfJzk9ODI8LjM0Mv/bAEMBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/CABEIAKAAoAMAIgABEQECEQH/xAAbAAADAQEBAQEAAAAAAAAAAAADBAUCAQAGB//EABUBAQEAAAAAAAAAAAAAAAAAAAAB/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwAAARECEQAAAfiw7yeL3Br2dHG1Tm9ZGdwXYBxV08gMYQetA8GyZyYJvOemi5ZOGJ4FjRxcVnRL7RRJxy5BF1gB4ozIN4Pb8yFpkoADMGAt+6cAYRPh2YZzB+ifCiOq84FC0uULUi8EIMxvfOmiDIeXKoT476grrORgOCCw9jLqL4BS/M2XNKHKHvniH0G47A0LBCBJ+2mnzO+cNlUpkvF2QWhNAJ7W+D7XCCk2ogPmlaKRpjpwVXJ8ojdTO/RpUjHzd2EEwlwrtr2hxN9QXVdGJUOunOnCLLmAQGHxjLIjCvyVCYOz7KIf6D5KwfQ9RcAt9GNbDwIvwJwfRgwGVHlDKGB1Kp8vwJSdSA2UnYxCzyf0f4DZwehHR+GYB5gLOozihfkWT83p6dGU6OBQstwb9woIuBBRjCGWGwdc9oEi6sUHt0Jf/8QAJhAAAgIBBAICAgMBAAAAAAAAAQIAAxEEEBIhEzEiMiBBBRQjQv/aAAgBAAABBQI9b9iZmYD2BOoHhOZwYzxGJWAeY5F+zPW7bZ6yZ7mJiKIVmNvLgc2MB41ct+MM/R/HEA7xiZ2OZgmIktPWJw+IEXsfth2/4CKsAhE4mLSxg0jT+vPHwhHI4AnLb9noExjncRUiUdLSs8CxdMggRRsRLvoVmIwi+z09hE9w9GAZiVkmqnEAgAgmdjtefhznuETx/Kz2diOpphmKgEGw3EMaWdl0gYiB4H7b5QjYr1iabqDsCD8TLY7/ADLfEw+gpJ9Q7GsGPViI5Q12g7BsEYMxOMxGjDI1GncTkYcxe5XMdYySOyWK4GfiJxQzTkk2qYbLUiahoLrINQRPOp3u0qPPq3U9Gqp7I+kXDAqT9MZhT5KVUVsATesZ6zA4BqsBHOchOSiHVplv7FosoCT/AKq03M1VhlsUCa1ACuMfv22B5K9OtcPt1hrmRVHtURV1NsTQCBFSNL/slebMEBRyq7469v8ATkBMloi5ldObWT/Ph0ywrPFzldKLMT1GhmpB8lK4VSITGIVbG8lj5BFhE07ZXTDt/bYhBmDFQ5A2aNswBJlKiWdTVajyRftYNtM8pu684nOppmKdy0Jh2MYxNQAt9jWDQ6RbZfpeFhGY9UTKWVrydBAvKcBgdTMzCZnYwxovQt+v8aYaw67WTT2xGEBnOEzMJ/FjF+TS6fx6/wCiCeQTM8JsZaPG3AqQ7LPK08sB2O5MY5iLgGWe9HhRWRgdyuoxFCjUvwYWBpzE5loRkIcTlMzMLQtEXZofa1ltMlLYpo8YAi1Ey6gMor4lVMG2MbZhaZzESAbGfuoYoT1//8QAFhEAAwAAAAAAAAAAAAAAAAAAABFg/9oACAECEQE/AaNn/8QAFhEAAwAAAAAAAAAAAAAAAAAAABFg/9oACAEBEQE/AaNH/8QAKBAAAgEDAwMEAgMAAAAAAAAAAAERAiExECAwEkFhAzJRcUCBIiOR/9oACAEAAAY/AuXJHYe+3BghI8De18F9bbOnY9Z4cF9IG9jjRvffTBZa2Hxy+B8HVrjilfhwPxw+OLqpvtk8aSouf2Nngs2Q2WMaYZek+NfhnS9fB7rn0LSBS7nVn6PbV/h3/a0tUYk9pLhIihOt+Dt6aMtvTqqwZhLsITGnqk1IqkovfYviSMvwWS9NE+pU62RSo0jRENH7FT42I6dtqVt+yWUoikl4Q6vnWSdntZjglq5J0U42Oktkmos+O6ZGKR11fpCrp9r1RJnlZ0jpey/O/rZY6crsZsWL0l1HHVU3Bksfy0pq7c9kncdMWqiS+dXSzp7r8D//xAAlEAEAAgICAwEAAQUBAAAAAAABABEhMVFhEEFxgZEgobHB0eH/2gAIAQAAAT8hUOWU8TBpqDG45jKIauZjeCAGAuO61DVIX5/tOsOYhZpLG41HrmXRLlYfChKGLM7phZZh8h6Srw75zLFheMQ6vSWFxiLb7lLmbY5EGYrebd+DBfghB6MR3GSXPf5LtuMf/IOzn7BfVvEYIm1Rpbubxi7xqU5TQ9cTflL8EHPi6MnMZ1LHX8RLGUwaEz9MSFBjcuR/Juv2LaOGYSzcyFyhqCFf4QfIWzVRuYTf5NizBDQXNxGhPyIVB4IaRheIl0j/AO5SvcQWiVZjVFwhsPC6QQEx8jB3OBATSXfguJ9wz4lC4CX7gqxVTvcSuY6ntpuGUT3KeD5XB8joiuuUPLCaiDnU04Mk8mp4HB5YYYQXKonqEIosTIXEsk5lVMtYRpzCwjqF2+d2yFsLBGHcu9TcRDuU5h2hO0FhjFTSUWRQcrY6d1HIHWp7ekUpAKj0ublnvUXDZeCMb5FFypbjAQvGYj/hMZdLdbSx0xLhKh3Ec0TLeKlOzE0pXJgGDl2JTAMHrEQKYo0X3DintNkjUudP2L5afQlrqzqWbB2RPsfEE3h8gGzsM+AIYW/7TLy+SYYBPWnGMCv8hDgGGC/aS+zzqppFUw4NRaok1MZikEWViYcEz5yTJLTylOBq0If9yy39gcQGiOpoyjd7IYrqWIhbQGElrJuouF6sxksXUXOAmskL8I4uYE2ylBxmadPyHGaeGkAEv0i+yYr+VZuwnLNDMzfuW7tQ2L8cEV15ljqyV1EnhnoNy+G0odzrgARRRhxTJNITYgFm1FyN8vM0EweMFnyGFWG+pc0KfIk/zTZrRLiFQa/oCvhRCGV0XFVH3cs2fq4Vw6uGCImyWB5lhp8iXtB2gEZqhD4jKxeDtqCLqBZpqAJi3w6m8DWzOXEMjiEeyHiL4WL4B+McE0qILFg/YQokpjTmX6bS7eJPb38ghl/IUab6l3vyWXKJaon2ppMhCCBq1lg0xlzqWxyYTK/IR1c7aUw+xGAN0MVaA6mwzNCMssURnE97AmkNmZ/udPypiAVVfoMzIbd9TVW4xTiKncvm+iyfZCyoiGMVyzxPayqPjU03yHCf/9oADAMAAAERAhEAABDCzjyiDggBgAwSRgyyQBASRxhyBiBwwiywwAhAzwjgjBhyxAByyBgAxSAAgihwQQxjjQBThRhDCRAjASAiAiTAADQBiQgggxxywQf/xAAXEQEAAwAAAAAAAAAAAAAAAAABABFg/9oACAECEQE/ENGMKn//xAAXEQADAQAAAAAAAAAAAAAAAAAAARFg/9oACAEBEQE/ENHDdP/EACUQAQACAgICAQQDAQAAAAAAAAEAESExQVFhcYGRobHBENHh8P/aAAgBAAABPxD0olnbDzIFw+BDCUrisxmoPhICGhe464i7uWm3WRzKGFcpG6tcCxSifmY0CG7XUtlFyQYItGzdc1/szElqHzDEB2W+yCBWcVM0bIFtallPObhzGos5K4ma9Lupd9jtiKItsZ4hJZr43LtOThGGuLMQrup1MIXri7JUhfbWfUVrVxh94CIBQTANbhWba3Mhe5gUMUXFKi1TX2mKND+Zgkch+YUqlBbJfUVi+CO7vEBesS7A/FyoPYHJFSgnxFtZHYiaAE4IRVNm0MEgQ6hYwDk4xHJw5U5img8RMJFpKcbr5gDSqWBkjDsIAb4K5cQCRjlLRVghjQQdNTDdL5I1Xl0NwHBOaI1lnwIAF8DcAohVpcAW1FodzmgiH7RwYrKPsQOZVGkYHGR+YjmOSHsP7haFKL+cRSSZzfUa/aIIbVVM3C5WHcW8xwLqKJR0OY/AnS6ggNBnLFhBT7/ea51qlMuCseoi6A8EI5m0CLB4G4629h6dSvjldaI+TdAA81KHOWv6lQLK2kRDGcE8STmak1CItYRRR3r4l0R9I1GCth7bgCpifYjwq4hiV+0C4bSh4iUKsyi/MHJZp/EMBtGYi3Ay2LkCxc+0RzlRBRaqbMGkyogD2QKDLADEvVcQ6PxM2Ys+9xdy9z7j2FDlPHH5l5r4RJkmkZtDKxhoX3YDFty+sBKbyXvcw+Q4hclHEaMQcMAtIEQ1DIdsDtNahxXRFvJUcd6T9yxvLz9RgAqMJ1cFI3gWkiGEFVSEAXRnBqAg0chElCVHdEK1Hs2DuMGQ+IVbAa6gCeEEhVLTSXOIS7BEgT1nK1KkDJAzUoahKSMBaS9tSiHL+kNAorLFVD4M/MVtuypWxfqPCxYtdfSpaKLx+8xKNr1Uy4KHkV9ZYAgRrNQybJWiYAqOb3HkhRwQhUubyJRMQbpzC4nu1AFh9ZyC5btchc+YAPYNKR2ghAxCjA23cJyrxVccOHkq/UobKqhmACcDUR6n7SkgqwYYHRLsIV17l7XqALV/4ma8erPwsIwUwCr7So8Vl2xSW7Aw24epnUHauUaHRRKGVzQE9120+suY6t4Zl2W3HZX9wrBt4leeITkwaYQBp/xBY6GiEhSR+JTFAw7RL2hxcAzhpTBcNFiy/wDrmmAKuKcavGXxClUrVua4v3AdDtCo40XcpbEjtVkpp/dRlJBLV8lr7hUc8Oa+ZUD+aYHxKwNwAlEu9zLBkPVw+7F0epXnC0BwT0gZJDKQCl9zbR+YX/JzgsoKMaXcsaZ0lxB2LvRDU1nJO5Tc4BZd0yhshBQ+JauAK1zxXzKx7FtKzCIoMV3HaF9wYrIARjkwD4gTVjI0EACKmin4I0SqpyR8k0ejgioKVpdwW/KwQuMIV9CKy7ZOkFLdGxjSyZw4l2kL6zDiwkV8G4/yZgZU64P8BBuhqUKgHARYBZheIFghMQg0t26PEY8G5esRKWNrmriq5hHYg9zu2Ze6L0QO52kIHmXPqCP3EqljxWzAsefM3eszACnKH6TGyNmv6CBrbMrFncxjLkfS9SpMtMVhDRjD3lVqriOAeZSOVRyAOOIV+jKOZUYZc2vMZGpm/gVbZgHLBA8S8eGODQlvz5lhhAYhN0uXOGUx6Gz/ACXKx9wgtwOmBdfmA6mCMlRcZlBMUoNxR6gYeiO/MwlYAXLwZtfmNoWoYJicqTnpMTRANPP6hsAjHNMfqleTSXO13GxFixDsGHcfbEBnL3MkcoVmyJk1dSqKy2zGRW8wDVCiD6wOh9LDdvULgWaCCnB04j1YW4ZNtiVqHQlWQkGedS1NBVCj6QUcz3PhP4L4PLDG47TMfzfiCGosgnrTOUJ3AS3L3K8oNYfuaDXMIK0svwiqAqcEs9fnmo222RTTFyE8C+oPFtO4KsQbiCNGWOmCcwg5jvFRFICArUrVTRmdo3HGabOp/9k=
--=_data-uri--

</div>
</body>
</html> 
```

但是当我在 中运行页面时`IE6`，图像没有显示出来。谁能告诉我我做错了什么，以及如何解决它以使其正常显示`IE6`？我将文件保存在我的桌面并尝试在`IE6`...中打开它

更新：

根据下面 Musa 的评论，我更改了代码以仅将 hack 包含在 CSS 中。还是行不通：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
/*
Content-Type: multipart/related; boundary="=_data-uri"

--_
Content-Location:locoloco
Content-Type: image/png
Content-Transfer-Encoding:base64

/9j/4AAQSkZJRgABAgAAAQABAAD//gAEKgD/4gIcSUNDX1BST0ZJTEUAAQEAAAIMbGNtcwIQAABtbnRyUkdCIFhZWiAH3AABABkAAwApADlhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApkZXNjAAAA/AAAAF5jcHJ0AAABXAAAAAt3dHB0AAABaAAAABRia3B0AAABfAAAABRyWFlaAAABkAAAABRnWFlaAAABpAAAABRiWFlaAAABuAAAABRyVFJDAAABzAAAAEBnVFJDAAABzAAAAEBiVFJDAAABzAAAAEBkZXNjAAAAAAAAAANjMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0ZXh0AAAAAEZCAABYWVogAAAAAAAA9tYAAQAAAADTLVhZWiAAAAAAAAADFgAAAzMAAAKkWFlaIAAAAAAAAG+iAAA49QAAA5BYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAkoAAAD4QAALbPY3VydgAAAAAAAAAaAAAAywHJA2MFkghrC/YQPxVRGzQh8SmQMhg7kkYFUXdd7WtwegWJsZp8rGm/fdPD6TD////bAEMACAYGBwYFCAcHBwkJCAoMFA0MCwsMGRITDxQdGh8eHRocHCAkLicgIiwjHBwoNyksMDE0NDQfJzk9ODI8LjM0Mv/bAEMBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/CABEIAKAAoAMAIgABEQECEQH/xAAbAAADAQEBAQEAAAAAAAAAAAADBAUCAQAGB//EABUBAQEAAAAAAAAAAAAAAAAAAAAB/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwAAARECEQAAAfiw7yeL3Br2dHG1Tm9ZGdwXYBxV08gMYQetA8GyZyYJvOemi5ZOGJ4FjRxcVnRL7RRJxy5BF1gB4ozIN4Pb8yFpkoADMGAt+6cAYRPh2YZzB+ifCiOq84FC0uULUi8EIMxvfOmiDIeXKoT476grrORgOCCw9jLqL4BS/M2XNKHKHvniH0G47A0LBCBJ+2mnzO+cNlUpkvF2QWhNAJ7W+D7XCCk2ogPmlaKRpjpwVXJ8ojdTO/RpUjHzd2EEwlwrtr2hxN9QXVdGJUOunOnCLLmAQGHxjLIjCvyVCYOz7KIf6D5KwfQ9RcAt9GNbDwIvwJwfRgwGVHlDKGB1Kp8vwJSdSA2UnYxCzyf0f4DZwehHR+GYB5gLOozihfkWT83p6dGU6OBQstwb9woIuBBRjCGWGwdc9oEi6sUHt0Jf/8QAJhAAAgIBBAICAgMBAAAAAAAAAQIAAxEEEBIhEzEiMiBBBRQjQv/aAAgBAAABBQI9b9iZmYD2BOoHhOZwYzxGJWAeY5F+zPW7bZ6yZ7mJiKIVmNvLgc2MB41ct+MM/R/HEA7xiZ2OZgmIktPWJw+IEXsfth2/4CKsAhE4mLSxg0jT+vPHwhHI4AnLb9noExjncRUiUdLSs8CxdMggRRsRLvoVmIwi+z09hE9w9GAZiVkmqnEAgAgmdjtefhznuETx/Kz2diOpphmKgEGw3EMaWdl0gYiB4H7b5QjYr1iabqDsCD8TLY7/ADLfEw+gpJ9Q7GsGPViI5Q12g7BsEYMxOMxGjDI1GncTkYcxe5XMdYySOyWK4GfiJxQzTkk2qYbLUiahoLrINQRPOp3u0qPPq3U9Gqp7I+kXDAqT9MZhT5KVUVsATesZ6zA4BqsBHOchOSiHVplv7FosoCT/AKq03M1VhlsUCa1ACuMfv22B5K9OtcPt1hrmRVHtURV1NsTQCBFSNL/slebMEBRyq7469v8ATkBMloi5ldObWT/Ph0ywrPFzldKLMT1GhmpB8lK4VSITGIVbG8lj5BFhE07ZXTDt/bYhBmDFQ5A2aNswBJlKiWdTVajyRftYNtM8pu684nOppmKdy0Jh2MYxNQAt9jWDQ6RbZfpeFhGY9UTKWVrydBAvKcBgdTMzCZnYwxovQt+v8aYaw67WTT2xGEBnOEzMJ/FjF+TS6fx6/wCiCeQTM8JsZaPG3AqQ7LPK08sB2O5MY5iLgGWe9HhRWRgdyuoxFCjUvwYWBpzE5loRkIcTlMzMLQtEXZofa1ltMlLYpo8YAi1Ey6gMor4lVMG2MbZhaZzESAbGfuoYoT1//8QAFhEAAwAAAAAAAAAAAAAAAAAAABFg/9oACAECEQE/AaNn/8QAFhEAAwAAAAAAAAAAAAAAAAAAABFg/9oACAEBEQE/AaNH/8QAKBAAAgEDAwMEAgMAAAAAAAAAAAERAiExECAwEkFhAzJRcUCBIiOR/9oACAEAAAY/AuXJHYe+3BghI8De18F9bbOnY9Z4cF9IG9jjRvffTBZa2Hxy+B8HVrjilfhwPxw+OLqpvtk8aSouf2Nngs2Q2WMaYZek+NfhnS9fB7rn0LSBS7nVn6PbV/h3/a0tUYk9pLhIihOt+Dt6aMtvTqqwZhLsITGnqk1IqkovfYviSMvwWS9NE+pU62RSo0jRENH7FT42I6dtqVt+yWUoikl4Q6vnWSdntZjglq5J0U42Oktkmos+O6ZGKR11fpCrp9r1RJnlZ0jpey/O/rZY6crsZsWL0l1HHVU3Bksfy0pq7c9kncdMWqiS+dXSzp7r8D//xAAlEAEAAgICAwEAAQUBAAAAAAABABEhMVFhEEFxgZEgobHB0eH/2gAIAQAAAT8hUOWU8TBpqDG45jKIauZjeCAGAuO61DVIX5/tOsOYhZpLG41HrmXRLlYfChKGLM7phZZh8h6Srw75zLFheMQ6vSWFxiLb7lLmbY5EGYrebd+DBfghB6MR3GSXPf5LtuMf/IOzn7BfVvEYIm1Rpbubxi7xqU5TQ9cTflL8EHPi6MnMZ1LHX8RLGUwaEz9MSFBjcuR/Juv2LaOGYSzcyFyhqCFf4QfIWzVRuYTf5NizBDQXNxGhPyIVB4IaRheIl0j/AO5SvcQWiVZjVFwhsPC6QQEx8jB3OBATSXfguJ9wz4lC4CX7gqxVTvcSuY6ntpuGUT3KeD5XB8joiuuUPLCaiDnU04Mk8mp4HB5YYYQXKonqEIosTIXEsk5lVMtYRpzCwjqF2+d2yFsLBGHcu9TcRDuU5h2hO0FhjFTSUWRQcrY6d1HIHWp7ekUpAKj0ublnvUXDZeCMb5FFypbjAQvGYj/hMZdLdbSx0xLhKh3Ec0TLeKlOzE0pXJgGDl2JTAMHrEQKYo0X3DintNkjUudP2L5afQlrqzqWbB2RPsfEE3h8gGzsM+AIYW/7TLy+SYYBPWnGMCv8hDgGGC/aS+zzqppFUw4NRaok1MZikEWViYcEz5yTJLTylOBq0If9yy39gcQGiOpoyjd7IYrqWIhbQGElrJuouF6sxksXUXOAmskL8I4uYE2ylBxmadPyHGaeGkAEv0i+yYr+VZuwnLNDMzfuW7tQ2L8cEV15ljqyV1EnhnoNy+G0odzrgARRRhxTJNITYgFm1FyN8vM0EweMFnyGFWG+pc0KfIk/zTZrRLiFQa/oCvhRCGV0XFVH3cs2fq4Vw6uGCImyWB5lhp8iXtB2gEZqhD4jKxeDtqCLqBZpqAJi3w6m8DWzOXEMjiEeyHiL4WL4B+McE0qILFg/YQokpjTmX6bS7eJPb38ghl/IUab6l3vyWXKJaon2ppMhCCBq1lg0xlzqWxyYTK/IR1c7aUw+xGAN0MVaA6mwzNCMssURnE97AmkNmZ/udPypiAVVfoMzIbd9TVW4xTiKncvm+iyfZCyoiGMVyzxPayqPjU03yHCf/9oADAMAAAERAhEAABDCzjyiDggBgAwSRgyyQBASRxhyBiBwwiywwAhAzwjgjBhyxAByyBgAxSAAgihwQQxjjQBThRhDCRAjASAiAiTAADQBiQgggxxywQf/xAAXEQEAAwAAAAAAAAAAAAAAAAABABFg/9oACAECEQE/ENGMKn//xAAXEQADAQAAAAAAAAAAAAAAAAAAARFg/9oACAEBEQE/ENHDdP/EACUQAQACAgICAQQDAQAAAAAAAAEAESExQVFhcYGRobHBENHh8P/aAAgBAAABPxD0olnbDzIFw+BDCUrisxmoPhICGhe464i7uWm3WRzKGFcpG6tcCxSifmY0CG7XUtlFyQYItGzdc1/szElqHzDEB2W+yCBWcVM0bIFtallPObhzGos5K4ma9Lupd9jtiKItsZ4hJZr43LtOThGGuLMQrup1MIXri7JUhfbWfUVrVxh94CIBQTANbhWba3Mhe5gUMUXFKi1TX2mKND+Zgkch+YUqlBbJfUVi+CO7vEBesS7A/FyoPYHJFSgnxFtZHYiaAE4IRVNm0MEgQ6hYwDk4xHJw5U5img8RMJFpKcbr5gDSqWBkjDsIAb4K5cQCRjlLRVghjQQdNTDdL5I1Xl0NwHBOaI1lnwIAF8DcAohVpcAW1FodzmgiH7RwYrKPsQOZVGkYHGR+YjmOSHsP7haFKL+cRSSZzfUa/aIIbVVM3C5WHcW8xwLqKJR0OY/AnS6ggNBnLFhBT7/ea51qlMuCseoi6A8EI5m0CLB4G4629h6dSvjldaI+TdAA81KHOWv6lQLK2kRDGcE8STmak1CItYRRR3r4l0R9I1GCth7bgCpifYjwq4hiV+0C4bSh4iUKsyi/MHJZp/EMBtGYi3Ay2LkCxc+0RzlRBRaqbMGkyogD2QKDLADEvVcQ6PxM2Ys+9xdy9z7j2FDlPHH5l5r4RJkmkZtDKxhoX3YDFty+sBKbyXvcw+Q4hclHEaMQcMAtIEQ1DIdsDtNahxXRFvJUcd6T9yxvLz9RgAqMJ1cFI3gWkiGEFVSEAXRnBqAg0chElCVHdEK1Hs2DuMGQ+IVbAa6gCeEEhVLTSXOIS7BEgT1nK1KkDJAzUoahKSMBaS9tSiHL+kNAorLFVD4M/MVtuypWxfqPCxYtdfSpaKLx+8xKNr1Uy4KHkV9ZYAgRrNQybJWiYAqOb3HkhRwQhUubyJRMQbpzC4nu1AFh9ZyC5btchc+YAPYNKR2ghAxCjA23cJyrxVccOHkq/UobKqhmACcDUR6n7SkgqwYYHRLsIV17l7XqALV/4ma8erPwsIwUwCr7So8Vl2xSW7Aw24epnUHauUaHRRKGVzQE9120+suY6t4Zl2W3HZX9wrBt4leeITkwaYQBp/xBY6GiEhSR+JTFAw7RL2hxcAzhpTBcNFiy/wDrmmAKuKcavGXxClUrVua4v3AdDtCo40XcpbEjtVkpp/dRlJBLV8lr7hUc8Oa+ZUD+aYHxKwNwAlEu9zLBkPVw+7F0epXnC0BwT0gZJDKQCl9zbR+YX/JzgsoKMaXcsaZ0lxB2LvRDU1nJO5Tc4BZd0yhshBQ+JauAK1zxXzKx7FtKzCIoMV3HaF9wYrIARjkwD4gTVjI0EACKmin4I0SqpyR8k0ejgioKVpdwW/KwQuMIV9CKy7ZOkFLdGxjSyZw4l2kL6zDiwkV8G4/yZgZU64P8BBuhqUKgHARYBZheIFghMQg0t26PEY8G5esRKWNrmriq5hHYg9zu2Ze6L0QO52kIHmXPqCP3EqljxWzAsefM3eszACnKH6TGyNmv6CBrbMrFncxjLkfS9SpMtMVhDRjD3lVqriOAeZSOVRyAOOIV+jKOZUYZc2vMZGpm/gVbZgHLBA8S8eGODQlvz5lhhAYhN0uXOGUx6Gz/ACXKx9wgtwOmBdfmA6mCMlRcZlBMUoNxR6gYeiO/MwlYAXLwZtfmNoWoYJicqTnpMTRANPP6hsAjHNMfqleTSXO13GxFixDsGHcfbEBnL3MkcoVmyJk1dSqKy2zGRW8wDVCiD6wOh9LDdvULgWaCCnB04j1YW4ZNtiVqHQlWQkGedS1NBVCj6QUcz3PhP4L4PLDG47TMfzfiCGosgnrTOUJ3AS3L3K8oNYfuaDXMIK0svwiqAqcEs9fnmo222RTTFyE8C+oPFtO4KsQbiCNGWOmCcwg5jvFRFICArUrVTRmdo3HGabOp/9k=

--=_data-uri--
*/
#pic {
width:670px;height:710px; *background: expression("url(mhtml:" + window.location + "!locoloco)");

}
</style>
<script type = 'text/javascript'>
window.onload = function() { alert(window.location); }
</script>
</head>
<body> 
<p>Foo</p>
    <div id="pic" ></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:33:08.057

您的代码中有错误的资源分隔符：

```
Content-Type: multipart/related; boundary="=_data-uri" 
```

这`=_data-uri`是一个分隔符，您必须使用它来分隔图像。

例如：

```
/*
Content-Type: multipart/related; boundary="_"

--_
Content-Location:locoloco
Content-Type: image/png
Content-Transfer-Encoding:base64

iV... // image here
--_
Content-Location:locoloco2
Content-Type: image/png
Content-Transfer-Encoding:base64

iV... // image here
*/ 
```

最后一张图片的末尾不需要分隔符。

在您的代码中，您已经声明了 separator ，在第一个图像之前`=_data-uri`使用 separator并在它之后使用。`_``=_data-uri--`

为了使它工作，将第一个更改为声明的一个，最后删除一个。

这段代码对我有用（也在mhtml中写了固定的url，一定要把它改成适合你的）：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
/*
Content-Type: multipart/related; boundary="_"

--_
Content-Location:locoloco
Content-Type: image/png
Content-Transfer-Encoding:base64

/9j/4AAQSkZJRgABAgAAAQABAAD//gAEKgD/4gIcSUNDX1BST0ZJTEUAAQEAAAIMbGNtcwIQAABtbnRyUkdCIFhZWiAH3AABABkAAwApADlhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApkZXNjAAAA/AAAAF5jcHJ0AAABXAAAAAt3dHB0AAABaAAAABRia3B0AAABfAAAABRyWFlaAAABkAAAABRnWFlaAAABpAAAABRiWFlaAAABuAAAABRyVFJDAAABzAAAAEBnVFJDAAABzAAAAEBiVFJDAAABzAAAAEBkZXNjAAAAAAAAAANjMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0ZXh0AAAAAEZCAABYWVogAAAAAAAA9tYAAQAAAADTLVhZWiAAAAAAAAADFgAAAzMAAAKkWFlaIAAAAAAAAG+iAAA49QAAA5BYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAkoAAAD4QAALbPY3VydgAAAAAAAAAaAAAAywHJA2MFkghrC/YQPxVRGzQh8SmQMhg7kkYFUXdd7WtwegWJsZp8rGm/fdPD6TD////bAEMACAYGBwYFCAcHBwkJCAoMFA0MCwsMGRITDxQdGh8eHRocHCAkLicgIiwjHBwoNyksMDE0NDQfJzk9ODI8LjM0Mv/bAEMBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/CABEIAKAAoAMAIgABEQECEQH/xAAbAAADAQEBAQEAAAAAAAAAAAADBAUCAQAGB//EABUBAQEAAAAAAAAAAAAAAAAAAAAB/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwAAARECEQAAAfiw7yeL3Br2dHG1Tm9ZGdwXYBxV08gMYQetA8GyZyYJvOemi5ZOGJ4FjRxcVnRL7RRJxy5BF1gB4ozIN4Pb8yFpkoADMGAt+6cAYRPh2YZzB+ifCiOq84FC0uULUi8EIMxvfOmiDIeXKoT476grrORgOCCw9jLqL4BS/M2XNKHKHvniH0G47A0LBCBJ+2mnzO+cNlUpkvF2QWhNAJ7W+D7XCCk2ogPmlaKRpjpwVXJ8ojdTO/RpUjHzd2EEwlwrtr2hxN9QXVdGJUOunOnCLLmAQGHxjLIjCvyVCYOz7KIf6D5KwfQ9RcAt9GNbDwIvwJwfRgwGVHlDKGB1Kp8vwJSdSA2UnYxCzyf0f4DZwehHR+GYB5gLOozihfkWT83p6dGU6OBQstwb9woIuBBRjCGWGwdc9oEi6sUHt0Jf/8QAJhAAAgIBBAICAgMBAAAAAAAAAQIAAxEEEBIhEzEiMiBBBRQjQv/aAAgBAAABBQI9b9iZmYD2BOoHhOZwYzxGJWAeY5F+zPW7bZ6yZ7mJiKIVmNvLgc2MB41ct+MM/R/HEA7xiZ2OZgmIktPWJw+IEXsfth2/4CKsAhE4mLSxg0jT+vPHwhHI4AnLb9noExjncRUiUdLSs8CxdMggRRsRLvoVmIwi+z09hE9w9GAZiVkmqnEAgAgmdjtefhznuETx/Kz2diOpphmKgEGw3EMaWdl0gYiB4H7b5QjYr1iabqDsCD8TLY7/ADLfEw+gpJ9Q7GsGPViI5Q12g7BsEYMxOMxGjDI1GncTkYcxe5XMdYySOyWK4GfiJxQzTkk2qYbLUiahoLrINQRPOp3u0qPPq3U9Gqp7I+kXDAqT9MZhT5KVUVsATesZ6zA4BqsBHOchOSiHVplv7FosoCT/AKq03M1VhlsUCa1ACuMfv22B5K9OtcPt1hrmRVHtURV1NsTQCBFSNL/slebMEBRyq7469v8ATkBMloi5ldObWT/Ph0ywrPFzldKLMT1GhmpB8lK4VSITGIVbG8lj5BFhE07ZXTDt/bYhBmDFQ5A2aNswBJlKiWdTVajyRftYNtM8pu684nOppmKdy0Jh2MYxNQAt9jWDQ6RbZfpeFhGY9UTKWVrydBAvKcBgdTMzCZnYwxovQt+v8aYaw67WTT2xGEBnOEzMJ/FjF+TS6fx6/wCiCeQTM8JsZaPG3AqQ7LPK08sB2O5MY5iLgGWe9HhRWRgdyuoxFCjUvwYWBpzE5loRkIcTlMzMLQtEXZofa1ltMlLYpo8YAi1Ey6gMor4lVMG2MbZhaZzESAbGfuoYoT1//8QAFhEAAwAAAAAAAAAAAAAAAAAAABFg/9oACAECEQE/AaNn/8QAFhEAAwAAAAAAAAAAAAAAAAAAABFg/9oACAEBEQE/AaNH/8QAKBAAAgEDAwMEAgMAAAAAAAAAAAERAiExECAwEkFhAzJRcUCBIiOR/9oACAEAAAY/AuXJHYe+3BghI8De18F9bbOnY9Z4cF9IG9jjRvffTBZa2Hxy+B8HVrjilfhwPxw+OLqpvtk8aSouf2Nngs2Q2WMaYZek+NfhnS9fB7rn0LSBS7nVn6PbV/h3/a0tUYk9pLhIihOt+Dt6aMtvTqqwZhLsITGnqk1IqkovfYviSMvwWS9NE+pU62RSo0jRENH7FT42I6dtqVt+yWUoikl4Q6vnWSdntZjglq5J0U42Oktkmos+O6ZGKR11fpCrp9r1RJnlZ0jpey/O/rZY6crsZsWL0l1HHVU3Bksfy0pq7c9kncdMWqiS+dXSzp7r8D//xAAlEAEAAgICAwEAAQUBAAAAAAABABEhMVFhEEFxgZEgobHB0eH/2gAIAQAAAT8hUOWU8TBpqDG45jKIauZjeCAGAuO61DVIX5/tOsOYhZpLG41HrmXRLlYfChKGLM7phZZh8h6Srw75zLFheMQ6vSWFxiLb7lLmbY5EGYrebd+DBfghB6MR3GSXPf5LtuMf/IOzn7BfVvEYIm1Rpbubxi7xqU5TQ9cTflL8EHPi6MnMZ1LHX8RLGUwaEz9MSFBjcuR/Juv2LaOGYSzcyFyhqCFf4QfIWzVRuYTf5NizBDQXNxGhPyIVB4IaRheIl0j/AO5SvcQWiVZjVFwhsPC6QQEx8jB3OBATSXfguJ9wz4lC4CX7gqxVTvcSuY6ntpuGUT3KeD5XB8joiuuUPLCaiDnU04Mk8mp4HB5YYYQXKonqEIosTIXEsk5lVMtYRpzCwjqF2+d2yFsLBGHcu9TcRDuU5h2hO0FhjFTSUWRQcrY6d1HIHWp7ekUpAKj0ublnvUXDZeCMb5FFypbjAQvGYj/hMZdLdbSx0xLhKh3Ec0TLeKlOzE0pXJgGDl2JTAMHrEQKYo0X3DintNkjUudP2L5afQlrqzqWbB2RPsfEE3h8gGzsM+AIYW/7TLy+SYYBPWnGMCv8hDgGGC/aS+zzqppFUw4NRaok1MZikEWViYcEz5yTJLTylOBq0If9yy39gcQGiOpoyjd7IYrqWIhbQGElrJuouF6sxksXUXOAmskL8I4uYE2ylBxmadPyHGaeGkAEv0i+yYr+VZuwnLNDMzfuW7tQ2L8cEV15ljqyV1EnhnoNy+G0odzrgARRRhxTJNITYgFm1FyN8vM0EweMFnyGFWG+pc0KfIk/zTZrRLiFQa/oCvhRCGV0XFVH3cs2fq4Vw6uGCImyWB5lhp8iXtB2gEZqhD4jKxeDtqCLqBZpqAJi3w6m8DWzOXEMjiEeyHiL4WL4B+McE0qILFg/YQokpjTmX6bS7eJPb38ghl/IUab6l3vyWXKJaon2ppMhCCBq1lg0xlzqWxyYTK/IR1c7aUw+xGAN0MVaA6mwzNCMssURnE97AmkNmZ/udPypiAVVfoMzIbd9TVW4xTiKncvm+iyfZCyoiGMVyzxPayqPjU03yHCf/9oADAMAAAERAhEAABDCzjyiDggBgAwSRgyyQBASRxhyBiBwwiywwAhAzwjgjBhyxAByyBgAxSAAgihwQQxjjQBThRhDCRAjASAiAiTAADQBiQgggxxywQf/xAAXEQEAAwAAAAAAAAAAAAAAAAABABFg/9oACAECEQE/ENGMKn//xAAXEQADAQAAAAAAAAAAAAAAAAAAARFg/9oACAEBEQE/ENHDdP/EACUQAQACAgICAQQDAQAAAAAAAAEAESExQVFhcYGRobHBENHh8P/aAAgBAAABPxD0olnbDzIFw+BDCUrisxmoPhICGhe464i7uWm3WRzKGFcpG6tcCxSifmY0CG7XUtlFyQYItGzdc1/szElqHzDEB2W+yCBWcVM0bIFtallPObhzGos5K4ma9Lupd9jtiKItsZ4hJZr43LtOThGGuLMQrup1MIXri7JUhfbWfUVrVxh94CIBQTANbhWba3Mhe5gUMUXFKi1TX2mKND+Zgkch+YUqlBbJfUVi+CO7vEBesS7A/FyoPYHJFSgnxFtZHYiaAE4IRVNm0MEgQ6hYwDk4xHJw5U5img8RMJFpKcbr5gDSqWBkjDsIAb4K5cQCRjlLRVghjQQdNTDdL5I1Xl0NwHBOaI1lnwIAF8DcAohVpcAW1FodzmgiH7RwYrKPsQOZVGkYHGR+YjmOSHsP7haFKL+cRSSZzfUa/aIIbVVM3C5WHcW8xwLqKJR0OY/AnS6ggNBnLFhBT7/ea51qlMuCseoi6A8EI5m0CLB4G4629h6dSvjldaI+TdAA81KHOWv6lQLK2kRDGcE8STmak1CItYRRR3r4l0R9I1GCth7bgCpifYjwq4hiV+0C4bSh4iUKsyi/MHJZp/EMBtGYi3Ay2LkCxc+0RzlRBRaqbMGkyogD2QKDLADEvVcQ6PxM2Ys+9xdy9z7j2FDlPHH5l5r4RJkmkZtDKxhoX3YDFty+sBKbyXvcw+Q4hclHEaMQcMAtIEQ1DIdsDtNahxXRFvJUcd6T9yxvLz9RgAqMJ1cFI3gWkiGEFVSEAXRnBqAg0chElCVHdEK1Hs2DuMGQ+IVbAa6gCeEEhVLTSXOIS7BEgT1nK1KkDJAzUoahKSMBaS9tSiHL+kNAorLFVD4M/MVtuypWxfqPCxYtdfSpaKLx+8xKNr1Uy4KHkV9ZYAgRrNQybJWiYAqOb3HkhRwQhUubyJRMQbpzC4nu1AFh9ZyC5btchc+YAPYNKR2ghAxCjA23cJyrxVccOHkq/UobKqhmACcDUR6n7SkgqwYYHRLsIV17l7XqALV/4ma8erPwsIwUwCr7So8Vl2xSW7Aw24epnUHauUaHRRKGVzQE9120+suY6t4Zl2W3HZX9wrBt4leeITkwaYQBp/xBY6GiEhSR+JTFAw7RL2hxcAzhpTBcNFiy/wDrmmAKuKcavGXxClUrVua4v3AdDtCo40XcpbEjtVkpp/dRlJBLV8lr7hUc8Oa+ZUD+aYHxKwNwAlEu9zLBkPVw+7F0epXnC0BwT0gZJDKQCl9zbR+YX/JzgsoKMaXcsaZ0lxB2LvRDU1nJO5Tc4BZd0yhshBQ+JauAK1zxXzKx7FtKzCIoMV3HaF9wYrIARjkwD4gTVjI0EACKmin4I0SqpyR8k0ejgioKVpdwW/KwQuMIV9CKy7ZOkFLdGxjSyZw4l2kL6zDiwkV8G4/yZgZU64P8BBuhqUKgHARYBZheIFghMQg0t26PEY8G5esRKWNrmriq5hHYg9zu2Ze6L0QO52kIHmXPqCP3EqljxWzAsefM3eszACnKH6TGyNmv6CBrbMrFncxjLkfS9SpMtMVhDRjD3lVqriOAeZSOVRyAOOIV+jKOZUYZc2vMZGpm/gVbZgHLBA8S8eGODQlvz5lhhAYhN0uXOGUx6Gz/ACXKx9wgtwOmBdfmA6mCMlRcZlBMUoNxR6gYeiO/MwlYAXLwZtfmNoWoYJicqTnpMTRANPP6hsAjHNMfqleTSXO13GxFixDsGHcfbEBnL3MkcoVmyJk1dSqKy2zGRW8wDVCiD6wOh9LDdvULgWaCCnB04j1YW4ZNtiVqHQlWQkGedS1NBVCj6QUcz3PhP4L4PLDG47TMfzfiCGosgnrTOUJ3AS3L3K8oNYfuaDXMIK0svwiqAqcEs9fnmo222RTTFyE8C+oPFtO4KsQbiCNGWOmCcwg5jvFRFICArUrVTRmdo3HGabOp/9k=
*/

#pic {
    width:670px;
    height:710px;
    *background: expression("url(mhtml:http://localhost/~iadramelk/tmp/base64.html!locoloco)");

}
</style>
</head>
<body> 
<p>Foo</p>
<div id="pic" ></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T16:00:10.563

base64 图像出现在 IE6 和 IE7 中……最后，当您在 css 中使用编码图像时，我找到了一个简单的解决方案。

**“在同一个类中写两个不同的属性”**

我将在下面解释它。

```
<div class="myClass">    </div>
<style>
    .myClass {
            /*this will work for other browsers*/
            background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAySURBVHjaYlSdd/4/AwQwQml0PgMTHsn/yIoYCCmEKcKrEFkRTrcxEVIAs46g7wACDACraA+g90OOjwAAAABJRU5ErkJggg%3D%3D');        
            /* For ie6 and ie7*/
            *background:url('give real path_to_image');
    }
</style> 
```

# linux - 在构建期间将静态库链接到共享库？

> ID：14889941
> 
> 赞同：19
> 
> 时间：2013-02-15T07:22:07.857
> 
> 标签：linux, gcc, shared-libraries, static-libraries, libtool

我在使用 GCC/Linux 构建共享库时遇到问题。目前这个共享库是使用 GCC/libtool 选项“-shared”创建的，一切都很好。

现在有两个额外的静态库（.a-files）必须添加到这个共享库中，因为它们提供了共享库所需的一些功能。使用选项“-l”添加这些静态库没有帮助，之后它们不是 .so 文件的一部分。

那么如何强制 GCC/libtool 真正将这些静态库的代码添加到共享库中呢？

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-15T08:22:28.323

在这种情况下，您需要`--whole-archive`链接器选项来命令链接器将整个静态库的内容包含到共享库中。

```
g++ -shared sample.o -o libSample.so -Wl,-whole-archive -lmylib1.a -lmylib2.a -Wl,-no-whole-archive 
```

来自`man ld`：

> 对于命令行中在**--whole-archive**选项之后提到的每个存档，在链接中包含存档中的每个目标文件，而不是在存档中搜索所需的目标文件。这通常用于将存档文件转换为共享库，强制将每个对象包含在生成的共享库中。此选项可以多次使用。
> 
> 从 gcc 使用此选项时有两个注意事项：首先，gcc 不知道此选项，因此您必须使用 -Wl,-whole-archive。其次，不要忘记在你的档案列表之后使用**-Wl,-no-whole-archive**，因为 gcc 会将它自己的档案列表添加到你的链接中，你可能不希望这个标志也影响这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-30T17:00:06.680

您只需要**--whole-archive**参数来*强制*链接器包含库，但它应该能够从不匹配的符号中推断出自己的需求。

确保命令行上的任何静态库都在其依赖的目标文件之后，例如：

```
g++ -Wl,-E -g -pipe -O2 -pipe -fPIC  myobjectfile.o mystaticlibrary.a -shared -o mylib.so 
```

# groovy - 在 Jenkins 上运行 groovy 脚本

> ID：14889948
> 
> 赞同：1
> 
> 时间：2013-02-15T07:22:45.707
> 
> 标签：groovy, jenkins

我已经在 J​​enkins 1.501 上安装了脚本插件：

[https://wiki.jenkins-ci.org/display/JENKINS/Scriptler+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Scriptler+Plugin)

我创建了这个脚本：

```
import org.apache.commons.httpclient.*
import org.apache.commons.httpclient.auth.*
import org.apache.commons.httpclient.methods.*

@Grab(group='commons-httpclient', module='commons-httpclient', version='3.1')
void createNewJenkinsProject() {

  out.println("Test")

}
createNewJenkinsProject() 
```

基于这个例子：

[https://wiki.jenkins-ci.org/display/JENKINS/Authenticating+scripted+clients](https://wiki.jenkins-ci.org/display/JENKINS/Authenticating+scripted+clients)

在我的一个奴隶的工作中，我将上述脚本添加为构建步骤。当我建立工作时，我得到：

```
Execution of script [move-projects.groovy] failed - java.lang.NoClassDefFoundError: org/apache/ivy/core/report/ResolveReportorg.jenkinsci.plugins.scriptler.util.GroovyScript$ScriptlerExecutionException: java.lang.NoClassDefFoundError: org/apache/ivy/core/report/ResolveReport
    at org.jenkinsci.plugins.scriptler.util.GroovyScript.call(GroovyScript.java:66)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoClassDefFoundError: org/apache/ivy/core/report/ResolveReport 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T13:50:57.160

如果您选择“执行系统 ​​Groovy 脚本”作为构建操作，那么它将在 Jenkins master 上运行。因此，请确保所有必需的 jar 都存在于类路径中。您甚至可以在使用脚本之前对其进行检查。为此，请转到 your-jenkins-url/jenkins/script 并粘贴脚本并进行测试

如果选择了“Execute Groovy Script”选项，请确保 jars 在从站的类路径中。

# c++ - XP 下使用 WS_EX_COMPOSITED 绘制 OwnerDraw

> ID：14889949
> 
> 赞同：3
> 
> 时间：2013-02-15T07:23:05.223
> 
> 标签：c++, winapi, doublebuffered, ownerdrawn

我有一个静态控件，它在装箱时具有`SS_OWNERDRAW`和`SS_NOTIFY`标记。它的父窗口有`WS_EX_COMPOSITED`标志。

在 Windows XP 下，绘制不正确，如下图所示（右上角的矩形）：

![在此处输入图像描述](../Images/5241c1b28218795ed8b1844e76fa8e24.png)

但在 Windows 7 下，它是正确绘制的，如下图所示（右上方的十字“X”）：

![在此处输入图像描述](../Images/e6896958d516e56e57958e5f1e51bebe.png)

如何在XP中解决这个问题？此外，是什么导致了这个问题（在 XP 中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:59:50.383

MSDN for`CreateWindowEx()`这样说：

> 设置 WS_EX_COMPOSITED 后，窗口的所有后代都使用双缓冲从下到上绘制顺序。自下而上的绘制顺序允许后代窗口具有半透明（alpha）和透明度（颜色键）效果，但前提是后代窗口也设置了 WS_EX_TRANSPARENT 位。双缓冲允许在不闪烁的情况下绘制窗口及其后代。

即子`STATIC`控件应该`WS_EX_TRANSPARENT`设置。

# sql - SQL Server 2005 可以创建假表吗

> ID：14889950
> 
> 赞同：1
> 
> 时间：2013-02-15T07:23:15.113
> 
> 标签：sql, sql-server

我想知道是否可以在 SQL Server 2005 中创建一个假表。

因为当我尝试时出现错误

> *消息 208，级别 16，状态 1，第 1 行
> 无效的对象名称“双重”。*

这是我 [尝试过的](https://stackoverflow.com/questions/606234/select-count-from-multiple-tables)

它没有用。出于测试目的，我创建了一个测试表来执行查询。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T07:25:08.250

在 SQL Server 中，您可以省略该`FROM`子句。所以你不需要假表。

而不是写

```
select 42
from dual; 
```

写吧

```
select 42; 
```

# junit - 如何使用 mockito verify() 调用两次方法来验证方法

> ID：14889951
> 
> 赞同：368
> 
> 时间：2013-02-15T07:23:15.940
> 
> 标签：junit, mockito, verify

我想通过 mockito verify 验证一个方法是否至少被调用一次。我使用了验证，它抱怨如下：

```
org.mockito.exceptions.verification.TooManyActualInvocations: 
Wanted 1 time:
But was 2 times. Undesired invocation: 
```

* * *

## 回答 #1

> 赞同：633
> 
> 时间：2013-02-15T07:41:49.813

使用适当的验证模式：

```
import static org.mockito.Mockito.atLeast;
import static org.mockito.Mockito.times;
import static org.mockito.Mockito.verify;

verify(mockObject, atLeast(2)).someMethod("was called at least twice");
verify(mockObject, times(3)).someMethod("was called exactly three times"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-11-20T20:16:39.127

## 对于科特林：

构建梯度：

```
testImplementation "com.nhaarman.mockitokotlin2:mockito-kotlin:2.2.0" 
```

代码：

```
interface MyCallback {
  fun someMethod(value: String)
}

class MyTestableManager(private val callback: MyCallback){
  fun perform(){
    callback.someMethod("first")
    callback.someMethod("second")
    callback.someMethod("third")
  }
} 
```

测试：

```
import com.nhaarman.mockitokotlin2.times
import com.nhaarman.mockitokotlin2.verify
import com.nhaarman.mockitokotlin2.mock
...
val callback: MyCallback = mock()
val uut = MyTestableManager(callback)
uut.perform()

val captor: KArgumentCaptor<String> = com.nhaarman.mockitokotlin2.argumentCaptor<String>()

verify(callback, times(3)).someMethod(captor.capture())

assertTrue(captor.allValues[0] == "first")
assertTrue(captor.allValues[1] == "second")
assertTrue(captor.allValues[2] == "third") 
```

## 对于 Java：

龙目岛曾经简化。如果您愿意，也可以输入构造函数。

构建梯度：

```
testImplementation "org.mockito:mockito-core:3.6.28" 
```

代码：

```
// MyCallback.java
public interface MyCallback {
  void someMethod(String value);
}
// MyTestableManager.java
public class MyTestableManager {
  private MyCallback callback;

  public MyTestableManager(MyCallback callback) {
    this.callback = callback;
  }

  public void perform(){
    callback.someMethod("first");
    callback.someMethod("second");
    callback.someMethod("third");
  }
} 
```

测试：

```
import org.mockito.Mockito.times;
import org.mockito.Mockito.verify;
import org.mockito.Mock;
import org.mockito.Captor;
// whatever other imports you need
@Mock
private MyCallback callback;
@Captor
private ArgumentCaptor<String> captor;

private MyTestableManager uut = new MyTestableManager(callback);

// in your test method:
uut.perform()

verify(callback, times(3)).someMethod(captor.capture())

assertTrue(captor.getAllValues().get(0) == "first")
assertTrue(captor.getAllValues().get(1) == "second")
assertTrue(captor.getAllValues().get(2) == "third") 
```

# javascript - 无法使用 ExtJs 将 TabPanel 放入窗口

> ID：14889952
> 
> 赞同：1
> 
> 时间：2013-02-15T07:23:17.387
> 
> 标签：javascript, extjs

我在 ExtJs 3.4 应用程序中有一个窗口：

```
 x = new Ext.Window({
        id: 'myWindow', 
        layout: 'fit',
        title:'Информация БДОН',
        autoScroll:false,
        width:600,
        autoLoad : {  
            url : url_servlet+"form.jsp?bdon=1&ss="+str,                                        
            scripts: true  
        }
    })
    x.show(); 
```

`autoLoad`并使用form.jsp将内容加载到此窗口：

```
<html>
<head>
<head>
<body> 
    <script type="text/javascript"> 
        function highlightWindow() {
            var win = Ext.getCmp('myWindow');  
            var winBody= win.body;  
            winBody.highlight();

            var tabs = new Ext.TabPanel({
                type:'tabpanel',
                deferredRender: false,
                activeTab: 0,
                bodyStyle:'padding:5px 5px 0',
                autoScroll: false,
                layoutOnTabChange: true,
                height:400,
                hideMode: 'offsets',

                items: [searchform,zemform,reallyform,docform,podform]
            });
            tabs.render(winBody);
        }
        highlightWindow.defer(1000);
     </script>
 </body>
</html> 
```

将其FromPanels`searchform,zemform,reallyform,docform,podform`转换为 TabPanel 的位置。每个想法都很好，但看起来很丑：

![在此处输入图像描述](../Images/c1413b428bd6868addde98116f7b9dbe.png)

即使我使用`layout:'fit'`.
这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:28:59.533

尝试为您的表单使用适合布局。

# java - 如何使用 slim3 MVC 框架提交多部分表单？

> ID：14889955
> 
> 赞同：2
> 
> 时间：2013-02-15T07:23:29.200
> 
> 标签：java, upload, slim-3

如何使用适用于 Google 应用引擎的 slim3 MVC 框架提交多部分表单？

例子：

**表单.jsp**：

```
<form enctype="multipart/form-data">
    <input type=file name='filename'/>
    <input type='text' name='title'/>
</form> 
```

**控制器/动作**：

```
request.getParameter("title"); 
```

不工作。仅当 enctype 不是多部分时才有效。

我能做些什么？

我试过用

```
MultipartRequest req = new MultipartRequest(request, "."); 
```

它只是崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T08:39:40.757

当您使用**enctype="multipart/form-data"**时，当您尝试使用**getParameter**获取数据时会获得空值，我不记得具体原因，但它是这样工作的，所以这不是您的实现问题.

使用 slim3 的一种解决方案是使用**getAttribute**而不是**getParameter**。在这种情况下，如果您需要获取多个与您的一个输入相关联的值，例如，如果您正在提交一个表单并且您有一组复选框，您可以在名称的末尾添加单词**Array**表单中的复选框；这样，当您获取属性时，slim3 会自动将其转换为字符串数组。

[您可以在slim3 文档](https://sites.google.com/site/slim3appengine/slim3-controller/request-response-servletcontext)中查看此信息。

我希望这有帮助，

告别。

# macos - 在登录期间为所有用户启动可可应用程序

> ID：14889956
> 
> 赞同：2
> 
> 时间：2013-02-15T07:23:33.130
> 
> 标签：macos, cocoa, shell, launchd, osascript

我想在登录时启动 myapp.app，它应该适用于所有用户。

我尝试使用仅针对运行该命令的用户启动的 osascript。

/usr/bin/osascript -e "告诉应用程序\"系统事件\" 创建一个新的登录项，其属性 {path : "Path/myapp.app" hidden:false name:"myapp"} 在末尾"

我以 guser 身份运行此登录。所以它仅在 guser 登录期间启动。

甚至我尝试使用 sudo defaults write /Library/Preferences/loginwindow AutoLaunchedApplicationDirectory -array-add '{ "Path" ="path1" ; "隐藏"="0";}'

当 path1=myapp.app 它没有工作当 path1=myapp.app/Contents/MacOS/myapp 它正在为所有用户启动，但即使是终端窗口也与应用程序一起启动。

我有一个 shell 脚本，我必须使用一些命令来为所有用户登录时间启动可可应用程序。请帮忙 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:28:49.103

您可以使用[LSSharedFileList](http://cocoatutorial.grapewave.com/tag/lssharedfilelist-h/) API。
看看[Cocoa 应用程序如何将自己添加为全局登录项？](https://stackoverflow.com/questions/5449135/how-can-a-cocoa-application-add-itself-as-a-global-login-item)并[注册为 Cocoa 的登录项？](https://stackoverflow.com/questions/608963/register-as-login-item-with-cocoa)

查看[技术说明 TN2083](http://developer.apple.com/library/mac/#technotes/tn2083/_index.html)（全局登录项）

> 全局登录项是在任何用户登录时启动的登录项。安装全局登录项大致相当于为系统上的所有用户安装该登录项：每次用户登录时，loginwindow 都会启动该用户的登录项和所有全局登录项。

# javascript - javascript中的“使用严格”

> ID：14889967
> 
> 赞同：21
> 
> 时间：2013-02-15T07:24:14.353
> 
> 标签：javascript, use-strict

我最近一直在阅读许多 JavaScript 代码，我想知道使用`"use strict"`. 任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T07:32:03.580

在你去把“use strict”放在你所有的脚本上之前，一个警告：

不支持严格模式的浏览器将以与支持的浏览器不同的行为运行您的代码。

现在，回答你的问题。严格模式的好处是：

1.  有些错误不再沉默，而是抛出。
2.  允许解释器进行优化。
3.  禁止在下一版本的 ECMAScript 中可能会弃用的语法。

（来源：[https](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode) ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T07:26:52.710

它[激活严格模式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)（如果支持）。主要的好处是一些无声的错误和一些可能会让你绊倒的编码实践变成了很大的错误，所以你可以完全避免它们。

# c# - C# 的 Type.Attributes 是如何工作的？

> ID：14889968
> 
> 赞同：0
> 
> 时间：2013-02-15T07:24:14.713
> 
> 标签：c#, .net, system.reflection

所以`System.Type`有一个名为[Attributes](http://msdn.microsoft.com/en-us/library/system.type.attributes.aspx)的实例方法。

```
public TypeAttributes Attributes { get; } 
```

它返回一个`enum`类型[`TypeAttributes`](http://msdn.microsoft.com/en-us/library/system.reflection.typeattributes.aspx)。以下是此枚举的一些成员：

```
public enum TypeAttributes {
    AnsiClass = 0,
    Class = 0,
    AutoLayout = 0,
    NotPublic = 0,
    Public = 1,
    NestedPublic = 2,
    NestedPrivate = 3,
    NestedFamily = 4,
    NestedAssembly = 5,
    NestedFamANDAssem = 6,
    VisibilityMask = 7,
    NestedFamORAssem = 7,
    SequentialLayout = 8,
    ExplicitLayout = 16,
    LayoutMask = 24,
...
} 
```

但另一方面，`Type`类为这个枚举中出现的大多数东西提供了太多的属性：

*   `IsPublic`
*   `IsClass`
*   `IsNestedFamANDAssem`
*   `IsAutoLayout`
*   `...`

那么究竟`Type.Attributes`是为了什么？我猜它不是一个位掩码值，因为它是一个枚举并且它只返回一个枚举成员。这不是`Type`类的静态属性，那么它到底是做什么的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:36:20.697

> 我猜这不是位掩码值

你猜错了。它被标记为[`FlagsAttribute`](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)：

> 表示可以将枚举视为位域；即一组标志。

正如您所指出的，其中许多也可作为属性使用。那么，为什么会暴露呢？嗯，首先，因为它是这些信息的自然表示。属性（例如`IsPublic`）只是为您隐藏位测试。其次，有时传递一个比布尔数组更方便的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T07:37:15.040

`Type.Attributes`是一个位掩码值。它甚至[在文档中这么说](http://msdn.microsoft.com/en-us/library/system.reflection.typeattributes.aspx)。

`enum`s 通常用作 Flag 数据类型，通过使用`Flags`属性来装饰它们。

而`Type`, like`IsPublic`等的那些属性`IsClass`只是检查这些标志并返回一个布尔值。您可以通过使用反射器查看定义来自己查看。

`IsPublic`，例如做这样的事情：

```
public bool IsPublic {
    get {
        return ((this.Attributes & TypeAttributes.VisibilityMask) == TypeAttributes.Public);
    }
} 
```

并非所有属性都`Type`必须代表其中一个标志（如`IsEnum`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T07:42:25.623

它是位掩码值，其中部分值表示类型的特定属性 -

*   `myType.Attributes & TypeAttributes.VisibilityMask`为您提供枚举中的几个 Public/NonPublic/NestedPublic... 值之一
*   `myType.Attributes & TypeAttributes.LayoutMask`为您提供布局类型（顺序/显式/默认）

等等。

# c# - 在“资源”参数中多次指定了该项目。“资源”参数不支持重复项目

> ID：14889973
> 
> 赞同：33
> 
> 时间：2013-02-15T07:24:32.587
> 
> 标签：c#, vb.net, visual-studio-2010, resources, resx

在编译我的 Visual Studio C# 项目时，我收到以下错误：

`The item "obj\Debug\SampleProject.Forms.MDIMain.resources" was specified more than once in the "Resources" parameter. Duplicate items are not supported by the "Resources" parameter.`

但是我在互联网上搜索了很多，但没有一个解决方案对我有用。

我试图删除表单并将其重新添加到项目中，但它对我不起作用。

我只有一个`resx`文件。

我正在使用 VS 2010。

另外，我尝试了以下解决方案，但对我不起作用：

1.  [https://stackoverflow.com/a/7928191/2074603](https://stackoverflow.com/a/7928191/2074603)
2.  [https://stackoverflow.com/a/10066009](https://stackoverflow.com/a/10066009)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2016-05-31T17:38:30.183

简单的！

1.  右键单击您的项目并选择“卸载项目”

2.  再次右键单击并“编辑 your_project.csproj”

3.  搜索错误消息中提到的重复文件并将其删除。

4.  保存并关闭。

5.  右键单击选择“重新加载项目”[查看图像](https://i.stack.imgur.com/XsnQa.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-06-19T21:39:10.557

我最近遇到了这个问题，我想我弄清楚了我的特殊情况，所以也许它会对你有所帮助。

我曾使用 Visual Studio IDE 复制现有表单（我们称之为`Form1`）。我将它粘贴到同一个项目中（它到达时`Copy of Form1`）

然后我将该新副本重命名为`Form2`.

我花了一段时间，但我最终发现 IDE 已将两者重`Form1`命名`Copy of Form1`为`Form2`

文件名是正确的......只是命名了里面的实际类。

我手动将原始文件重命名为正确的类，*瞧*，它起作用了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-22T16:53:56.873

我有同样的错误，在我的情况下，我解决了这个问题，如下所示。

![在此处输入图像描述](../Images/567c98a0f428dd1165dc777256df6c1f.png)

在突出显示的部分下方是另一个文件 some_name_not_equal_to_main.resx ，删除它后，我的程序开始正常运行。

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-24T17:16:30.077

我刚遇到同样的问题。不确定确切的语义，但它与将多个文件维护为“主”表单类的一部分有关。

在我的例子中，IDE 将表单初始化例程添加到不是“主”表单的部分类文件之一。

这造成了两种“主要”形式和冲突。

只需找到添加的 init 函数并将它们与关联的 .resx 文件一起删除，即可解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-26T07:23:57.323

重命名文件后，重命名新创建的文件中的类和所有构造函数。默认情况下，文件的名称会更改，但其中的类名称不会更改。所以做有需要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-05T02:07:58.370

如果您创建了表单副本，请转到属性并更改复制表单的名称。

在大多数情况下，当您创建表单副本时会发生这种情况。当您创建表单的副本时，新表单与旧表单具有相同的名称。它不是旧形式的名称被更改。

从这个例子：

我曾使用 Visual Studio IDE 复制现有表单（我们称之为 Form1）。我将它粘贴到同一个项目中（它作为 Form1 的副本到达）。现在转到“Form1 的副本”[]如果您已经重命名，那么它将是那个名称]转到属性将名称更改为 Form2（或您想要的任何类名）

它应该可以工作。

另外，请记住，当您重命名类名时，代码中对类名的引用也可能会发生变化。所以要小心。我会建议在更改名称后重新编译代码，这样如果更改了引用，那么您可以恢复到原始类名（在这种情况下为 Form1）。然后你就可以开始使用你的新类引用了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-06T14:52:52.487

有时，与另一个类同名的部分类会产生这个问题。尝试找出是否有任何两个具有相同类名的类。删除/重命名其中之一，然后您的问题将得到解决。

# c# - c#中的等于是真的

> ID：14889977
> 
> 赞同：1
> 
> 时间：2013-02-15T07:24:57.327
> 
> 标签：c#, equals, webmethod

我在 c# 中做 webmethod。在调试时，

```
(chk.Equals(oldpass)) 
```

查询在左侧和右侧显示相同的值。

但是，执行转移到显示返回语句的 else 部分，而不是进入 if 内部。跟随。是我的代码。

```
[WebMethod (Description="for change in password")]
public string update(string authenid,string oldpass,string newpass)
{
     SqlConnection conn = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=D:\\Workspace\\visual studio workspace\\Tmrepo\\App_Data\\tmrepo.mdf;Integrated Security=True;User Instance=True");

    try
    {
        conn.Open();

  string chk = "select pwd from client where authenid = '"+ @authenid +"' ";
        if(chk.Equals(oldpass))
        {
            string update = "update client set pwd=@newpass where pwd=@oldpass and authenid=@authenid";
            SqlCommand cmd = new SqlCommand(update, conn);
            cmd.Connection = conn;
            cmd.Parameters.AddWithValue("@authenid", authenid);
            cmd.Parameters.AddWithValue("@oldpass", oldpass);
            cmd.Parameters.AddWithValue("@newpass", newpass);
            cmd.ExecuteNonQuery();

        }

        else
        {
            return "invalid oldpass";
        }
 conn.Close();
        return newpass;
    }
    catch (Exception ex)
    {
        return ex.ToString();
    }

} 
```

这段代码有什么问题吗？我是ac#新手。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T07:34:40.037

您还没有执行命令：您的旧密码 chk 是："select pwd from client where authenid = '"+ @authenid +"' ";，这是一个不太可能的密码。例如，查看 ExecuteScalar。

额外的想法：

*   *参数*化 sql - 不要连接 id；它应该是`"select pwd from client where authenid = @authenid";`您添加一个名为的参数的位置，该参数`authenid`的值来自`authenid`. 您在第二个 ADO.NET 查询中得到了正确的结果。
*   密码应加盐和散列：不直接存储；您永远无法提取和/或解密密码

* * *

（外部编辑）

**更新**：执行代码，`"select pwd from client where authenid = '"+ @authenid +"' ";`因为`"select pwd from client where authenid = '@authenid' ";`返回空值。

**update2**： `cmd.ExecuteScalar();`让它工作。并删除`cmd.ExecuteNonQuery();`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T07:31:46.230

您的代码所做的是与`select pwd from client where authenid = some_value`oldpass 的值进行比较，这将是错误的！

固定代码逻辑：

```
 string oldpass = "somehing";

        string authenid = "pass_to_test";
        string sql = string.Format("select pwd from client where authenid = '{0}' ", authenid);
        string chk = null;
        SqlCommand cmd = new SqlCommand(update, conn);

        var reader = cmd.ExecuteReader();
        if (reader.Read())
        {
            // has record with username
            chk = reader.GetString(0);
            if (chk.Equals(oldpass))
            {
                string update = "update client set pwd=@newpass where pwd=@oldpass and authenid=@authenid";

                cmd.CommandText = update;
                cmd.Connection = conn;
                cmd.Parameters.AddWithValue("@authenid", authenid);
                cmd.Parameters.AddWithValue("@oldpass", oldpass);
                cmd.Parameters.AddWithValue("@newpass", newpass);
                cmd.ExecuteNonQuery();

            }

            else
            {
                return "invalid oldpass";
            }

        }
        else
        {
            // not a valid username
        }
        reader.Close();
        reader.Dispose(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:03:09.010

终于，解决了！！！我使用了数据集。具有完全正确代码的第二种方法是：

```
string chk = "select pwd from client where authenid = @authenid";
        SqlCommand cmd1 = new SqlCommand(chk , conn);
        cmd1.Parameters.AddWithValue("@authenid", authenid);
        DataSet ds = new DataSet();
        SqlDataAdapter da = new SqlDataAdapter(cmd1);
        da.Fill(ds);
        int cnt = ds.Tables[0].Rows.Count;
        if (cnt > 0)
        {
            if (ds.Tables[0].Rows[0]["pwd"].ToString().Equals(oldpass))
            {
                string update = "update client set pwd=@newpass where pwd=@oldpass and authenid=@authenid";
                SqlCommand cmd = new SqlCommand(update, conn);
                cmd.Connection = conn;
                cmd.Parameters.AddWithValue("@authenid", authenid);
                cmd.Parameters.AddWithValue("@oldpass", oldpass);
                cmd.Parameters.AddWithValue("@newpass", newpass);
                cmd.ExecuteNonQuery();
            }            
        } 
```

希望它可以帮助像我这样的其他新手！

# c# - 获取当前类的名称

> ID：14889978
> 
> 赞同：3
> 
> 时间：2013-02-15T07:24:59.110
> 
> 标签：c#, .net-2.0

我有以下课程：

```
public class dlgBoughtNote : dlgSpecifyNone
{
    public com.jksb.reports.config.cases.BoughtNoteReport _ReportSource;

    public dlgBoughtNote()
    {
        btnPreview.Click += new EventHandler(Extended_LaunchReport);
        this.Text = "Bought Note Print";
    }

    protected override void InitReport()
    {
        _ReportSource = new com.jksb.reports.config.cases.BoughtNoteReport(null);
        ReportSourceName = _ReportSource;
    }
} 
```

从技术上讲，如果我调用以下构造函数 dlgBoughtNote()

```
public dlgBoughtNote()
{
    btnPreview.Click += new EventHandler(Extended_LaunchReport);
    this.Text = "Bought Note Print";
    MessageBox.Show(this.Name);
} 
```

我应该得到“dlgBoughtNote”的结果，但我得到的是“dlgSpecifyNone”。除了我正在做的方式之外，还有什么方法可以获得当前班级的名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:29:20.743

获取当前类名称的最简单方法可能是`this.GetType().Name`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T07:32:07.670

你可以调用获取实例的类型，并使用类型的`GetType()`属性来获取当前类型的名称。调用返回被实例化的类型，而不是定义当前执行方法的类型，所以在基类中调用它会给你创建的派生子类的类型。`this``Name``this.GetType()``this`

有点混乱......这是一个例子：

```
public class BaseClass
{
    public string MyClassName()
    {
        return this.GetType().Name;
    }
}

public class DerivedClass : BaseClass
{
}

...

BaseClass a = new BaseClass();
BaseClass b = new DerivedClass();

Console.WriteLine("{0}", a.MyClassName()); // -> BaseClass
Console.WriteLine("{0}", b.MyClassName()); // -> DerivedClass 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T07:53:46.960

你从来没有告诉我们，你`this.Name`是什么。但是，如果您需要获取运行时类型名称，则可以使用上述任何答案。那只是：

```
this.GetType().Name 
```

您喜欢的任何组合。

但是，我想，您尝试做的是拥有一个属性，为任何派生（或基）类返回某个特定值。然后你需要至少有一个`protected virtual`属性，你需要在每个派生类中覆盖它：

```
public class dlgSpecifyNone
{
    public virtual string Name
    {
        get
        {
            return "dlgSpecifyNone";//anything here
        }
    }
}

public class dlgBoughtNote : dlgSpecifyNone
{
    public override string Name
    {
        get
        {
            return "dlgBoughtNote";//anything here
        }
    }
} 
```

但这显然是不必要的，如果`this.GetType().Name`解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T07:31:06.123

这是我的做法，我一直将它用于我的记录器：

```
using System.Reflection;

//...

Type myVar = MethodBase.GetCurrentMethod().DeclaringType;
string name = myVar.Name; 
```

# objective-c - 我们还能在 Facebook SDK 3.1 中发布到 Facebook 墙上吗

> ID：14889983
> 
> 赞同：0
> 
> 时间：2013-02-15T07:25:07.150
> 
> 标签：objective-c, facebook, xcode4.5

美味帖子中的帖子发给我/fb_sample_scrumps:eat

如果我想发布到墙上而不是我/fb_sample_scrupts:eat 怎么办？

还有为什么我必须先创建动作？

如果我只想发布“Hello World”或其他内容怎么办？

还有一种方法可以在用户不必一直被问到要发布什么的情况下发布吗？例如，当用户在肯德基炸鸡上按赞时，我想发布“First Name like Kentucky Fried Chicken”。

# jscript - 找不到变量：$

> ID：14889985
> 
> 赞同：6
> 
> 时间：2013-02-15T07:25:23.410
> 
> 标签：jscript

```
var scriptFile = $(tempNode).attr("customJScriptSrc"); 
```

当通过这个我得到

> “引用错误：找不到变量：$”</p>

请建议我任何替代方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T07:28:13.303

添加这个脚本：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

在文档顶部（在您的 javascript 代码之前添加）。

或下载库并在您的代码中引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-25T17:41:31.200

我遇到了同样的问题，这是因为我将 .js 文件放在 DOM 中的 jQuery .js 文件之前。这导致了一个错误，因为它在识别出 jQuery 甚至已安装之前尝试读取我的 .js 文件。`body`始终按执行顺序放置所有脚本，并始终位于标记的最底部。这始终确保在尝试执行任何 javascript 之前页面已完全加载。

之前（不正确）：

```
<script type="text/javascript" src="_javascript/rp-global.js"></script>
<script type="text/javascript" src="_javascript/jquery-3.2.1.min.js"></script> 
```

之后（正确）：

```
<script type="text/javascript" src="_javascript/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="_javascript/rp-global.js"></script> 
```

# .net - 如何将“Where”与异步谓词一起使用？

> ID：14889988
> 
> 赞同：27
> 
> 时间：2013-02-15T07:25:55.270
> 
> 标签：.net, linq, async-await, c#-5.0

我有一个这样的异步谓词方法：

```
private async Task<bool> MeetsCriteria(Uri address)
{
    //Do something involving awaiting an HTTP request.
} 
```

假设我有一个`Uri`s 集合：

```
var addresses = new[]
{
    new Uri("http://www.google.com/"),
    new Uri("http://www.stackoverflow.com/") //etc.
}; 
```

我想`addresses`使用`MeetsCriteria`. 我想异步执行此操作；我希望对谓词的多次调用异步运行，然后我想等待它们全部完成并生成过滤后的结果集。不幸的是，LINQ 似乎不支持异步谓词，所以这样的事情**不起作用**：

```
var filteredAddresses = addresses.Where(MeetsCriteria); 
```

有没有类似方便的方法来做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-15T12:56:52.597

我认为框架中没有这样的原因之一是存在很多可能的变化，并且在某些情况下每个选择都是正确的：

*   谓词应该并行执行还是串行执行？
    *   如果它们并行执行，是应该全部同时执行，还是应该限制并行度？
    *   如果它们并行执行，结果应该与原始集合的顺序相同、完成顺序还是未定义顺序？
        *   如果它们应该按完成的顺序返回，是否应该有某种方法（异步）在它们完成时获取结果？（这需要将返回类型从更改为`Task<IEnumerable<T>>`其他类型。）

您说您希望谓词并行执行。在这种情况下，最简单的选择是一次执行它们并按完成顺序返回它们：

```
static async Task<IEnumerable<T>> Where<T>(
    this IEnumerable<T> source, Func<T, Task<bool>> predicate)
{
    var results = new ConcurrentQueue<T>();
    var tasks = source.Select(
        async x =>
        {
            if (await predicate(x))
                results.Enqueue(x);
        });
    await Task.WhenAll(tasks);
    return results;
} 
```

然后你可以像这样使用它：

```
var filteredAddresses = await addresses.Where(MeetsCriteria); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-16T17:36:46.070

第一种方法：一个接一个地发出所有请求，然后等待所有请求返回，然后过滤结果。（svick 的代码也这样做了，但这里我是在没有中间 ConcurrentQueue 的情况下这样做的）。

```
// First approach: massive fan-out
var tasks = addresses.Select(async a => new { A = a, C = await MeetsCriteriaAsync(a) });
var addressesAndCriteria = await Task.WhenAll(tasks);
var filteredAddresses = addressAndCriteria.Where(ac => ac.C).Select(ac => ac.A); 
```

第二种方法：一个接一个地执行请求。这将需要更长的时间，但它会确保不会用大量的请求来打击 web 服务（假设 MeetsCriteriaAsync 会发送到 web 服务......）

```
// Second approach: one by one
var filteredAddresses = new List<Uri>();
foreach (var a in filteredAddresses)
{
  if (await MeetsCriteriaAsync(a)) filteredAddresses.Add(a);
} 
```

第三种方法：至于第二种方法，但使用假设的 C#8 功能“异步流”。C#8 尚未推出，异步流尚未设计，但我们可以梦想！RX 中已经存在 IAsyncEnumerable 类型，希望他们会为它添加更多组合子。IAsyncEnumerable 的好处是我们可以在前几个filteredAddresses 到来后立即开始使用它们，而不是等待所有内容都被过滤掉。

```
// Third approach: ???
IEnumerable<Uri> addresses = {...};
IAsyncEnumerable<Uri> filteredAddresses = addresses.WhereAsync(MeetsCriteriaAsync); 
```

第四种方法：也许我们不想一次用所有请求敲击 Web 服务，但我们很乐意一次发出多个请求。也许我们做了实验，发现“一次三个”是一种快乐的媒介。注意：此代码假定在 UI 编程或 ASP.NET 等单线程执行上下文中。如果它在多线程执行上下文中运行，那么它需要一个 ConcurrentQueue 和 ConcurrentList 来代替。

```
// Fourth approach: throttle to three-at-a-time requests
var addresses = new Queue<Uri>(...);
var filteredAddresses = new List<Uri>();
var worker1 = FilterAsync(addresses, filteredAddresses);
var worker2 = FilterAsync(addresses, filteredAddresses);
var worker3 = FilterAsync(addresses, filteredAddresses);
await Task.WhenAll(worker1, worker2, worker3);

async Task FilterAsync(Queue<Uri> q, List<Uri> r)
{
  while (q.Count > 0)
  {
    var item = q.Dequeue();
    if (await MeetsCriteriaAsync(item)) r.Add(item);
  }
} 
```

也有使用 TPL 数据流库的第四种方法的方法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-05-09T01:46:02.993

我认为这比不使用任何并发队列的公认答案更简单。

```
public static async Task<IEnumerable<T>> Where<T>(this IEnumerable<T> source, Func<T, Task<bool>> predicate)
{
    var results = await Task.WhenAll(source.Select(async x => (x, await predicate(x))));
    return results.Where(x => x.Item2).Select(x => x.Item1);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2021-06-30T23:17:06.483

考虑到框架的较新版本和`IAsyncEnumerable<T>`界面的采用，我不再在这里建议任何其他高度自定义的答案，因为它们在很大程度上是不必要的。

[LINQ的`System.Linq.Async`](https://www.nuget.org/packages/System.Linq.Async)异步版本可通过[NuGet 包](https://www.nuget.org/packages/System.Linq.Async)获得。

这是进行异步检查的语法：

```
var filteredAddresses = addresses
    .ToAsyncEnumerable()
    .WhereAwait(async x => await MeetsCriteria(x)); 
```

`filteredAddresses`将是 type `IAsyncEnumerable<int>`，可以是：

*   用`ToListAsync`,`FirstAsync`等具体化
*   迭代`await foreach`

要获得与以前相同的效果并允许使用方法组进行调用，您可以将返回类型更改`MeetsCriteria`为`ValueTask`：

```
private async ValueTask<bool> MeetsCriteria(Uri address)
{
    //Do something involving awaiting an HTTP request.
}

...

var filteredAddresses = addresses
    .ToAsyncEnumerable()
    .WhereAwait(MeetsCriteria); 
```

我不建议`ValueTask`只使用来保存几个字符，因为它应该进行基准测试并用于性能/内存原因。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-10-31T11:10:04.753

我会使用下面的方法而不是使用`ConcurrentBag`or`ConcurrentQueue`

```
public static async IAsyncEnumerable<T> WhereAsync<T>(this IEnumerable<T> source, Func<T, Task<bool>> predicate)
{
    foreach(var item in source)
    {
        if(await (predicate(item)))
        {
            yield return item;
        }
    }
} 
```

例如

```
 var result =  numbers.WhereAsync(async x =>
                                               await IsEvenAsync(x));
    await foreach (var x in result)
    {
        Console.Write($"{x},");
    } 
```

# javascript - .html 工作，但 ajax 请求后不出现文本

> ID：14889993
> 
> 赞同：5
> 
> 时间：2013-02-15T07:26:18.293
> 
> 标签：javascript, jquery, html, ajax

ajax 调用后，我将 div 附加`buf`到某个消息框，但重新打开对话框后会出现文本。在 Chrome、firefox、IE 8 上，这可以正常工作，但在 ie 7 中不行。

编辑：我有一个对话窗口，点击链接打开。然后我做ajax请求并收到一条消息。单击对话框中的按钮后，此消息应出现在对话框窗口中（在某些 div 中）。但在 IE7 中，重新打开对话框窗口后会出现消息。

```
$("#promised_pay_dialog").dialog({
        buttons: {
            "some button": function(){
                if ($('#confirm').is(':checked')) {
                    $.ajax({
                        url: 'ajax/promisedPayment',
                        type: "POST",
                        data: {
                            subsId:$("#sid").val()
                        },
                        success: function(buf){
                            $('#message_box').html(buf);
                            return false;
                        }
                    });
                }
                else {
                    alert("some message");
                }
            },
            "some button": function() {
                $(this).dialog("close");
            }
        },
        show: {
            effect: "blind",
            duration: 1000
        },
        hide: {
            effect: "explode",
            duration: 1000
        },
        modal: true,
        resizable: false,
        width: 550,
        height: 250
    }); 
```

解决了问题，但**并不**令人满意：

单击链接时，调用`createDialog("")`不带参数的函数。ajax 请求后，接收消息并调用`createDialog(buf)`。但我认为这不是一个好的解决方案。有任何想法吗？

```
function createDialog(mess){
    $('#message_box').html(mess);
    $("#promised_pay_dialog").dialog({
        buttons: {
            "some button": function(){
                if ($('#confirm').is(':checked')) {
                    $.ajax({
                        url: 'ajax/promisedPayment',
                        type: "POST",
                        data: {
                            subsId:$("#sid").val()
                        },
                        cache:false,
                        success: function(buf){
                            createDialog(buf);
                        }
                    });
                }
                else {
                    alert("some message");
                }
            },
            "some button": function() {
                $(this).dialog("close");
            }
        },
        show: {
            effect: "blind",
            duration: 1000
        },
        hide: {
            effect: "blind",
            duration: 1000
        },
        modal: true,
        resizable: false,
        width: 550,
        height: 250
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T07:46:46.710

`.html()`知道 IE6-8 的问题

尝试替换以下

```
$('#message_box').html(buf); 
```

和

```
$('#message_box').empty().html(buf); 
```

# python - python中用于网络抓取的正则表达式公式错误

> ID：14889996
> 
> 赞同：0
> 
> 时间：2013-02-15T07:26:26.860
> 
> 标签：python, web-scraping, scripting-language

我正在尝试从网站上抓取一些信息。我需要 8 个信息字段，我已经获得了 5 个字段，但 3 个字段总是为空。我认为我的正则表达式公式存在一些错误。我在 python 中做，我不必使用 BS。这是我需要抓取的 HTML 文件。这是其中一个网页的示例。

```
enter code here

<td><span class="facultyName">John Matthew Falletta, MD</span>

<span class="primaryTitle">Professor of Pediatrics</span>

<span class="secondaryTitle">Professor in the School of Nursing</span>

<td><span class="label">Department:</span>
        &nbsp;&nbsp;
    </td><td>Pediatrics</td>

<td><span class="label">Division:</span>
        &nbsp;&nbsp;
    </td><td>Hematology/Oncology</td>

<td><span class="label">Address:</span></td><td>Box 2991<br>DUMC<br>Durham, NC &nbsp;27710   </td>

<td><span class="label">Phone:</span></td><td>
       (919)
       668-5111<br>

<td><span class="label">FAX:</span></td><td>                
        (919)
        688-5125</td> 
```

这是我的代码，其中包含每种标签的相应正则表达式：

```
enter code here

patFinderFullname = re.compile('<span class="facultyName">(.*)</span>')
patFinderPTitle = re.compile('<span class="primaryTitle">(.*)</span>')
patFinderSTitle = re.compile('<span class="secondaryTitle">(.*)</span>')
patFinderDepartment = re.compile('<span class="label">Department:</span>\s+&nbsp;&nbsp;\s+</td><td>(.*)</td>')
patFinderDivision = re.compile('<span class="label">Division:</span>\s+&nbsp;&nbsp;\s+</td><td>(.*)')

patFinderAddress = re.compile(' <span class="label">Address:</span>\s+(.*)\s+</td>')
patFinderPhone = re.compile('<span class="label">Phone:</span></td><td>\s*(.*?)\s*<br>')
patFinderFax = re.compile('<td><span class="label">FAX:</span>\s+</td><td>\s+(.*)</td>') 
```

前五个字段结果正确，但地址、电话和传真的后三个字段总是返回空。谁能指出我错过了什么？或者最后三个字段的正则表达式有什么问题。我已经发布了一个较早的 [1][question]，但是这些问题后来才出现，所以我在另一个问题中问它。

[1] :[如何在 python 中抓取分布在多行的 html 标签？](https://stackoverflow.com/questions/14888508/how-to-scrape-html-tags-spread-over-multiple-lines-in-python)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:20:15.047

```
patFinderAddress = re.compile('<td><span class="label">Address:</span></td>.*?</td>'
patFinderPhone  = re.compile('<td><span class="label">Phone:</span>\s*</td><td>\s*^\s*.*\s*^\s*.*<br>',re.M)
patFinderFax = re.compile('<td><span class="label">FAX:</span>\s*</td><td>\s*^\s*.*\s*^\s*.*</td>',re.M) 
```

这是一些适用于您的数据的正则表达式。最后两个没有工作，因为数据跨越了多行。第一个不起作用，因为它是错误的。

但是，对于 html 解析，请使用 html 解析器，因为它更加健壮并为您提供所需的数据，而不是这种令人眼花缭乱的 html 字符串。

# ruby-on-rails - Rails 视图 [被指南迷惑]

> ID：14889999
> 
> 赞同：0
> 
> 时间：2013-02-15T07:26:36.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我对以下几行感到困惑：

```
 <td><%= link_to 'Show', book %></td>
    <td><%= link_to 'Edit', edit_book_path(book) %></td>
    <td><%= link_to 'Remove', book, :confirm => 'Are you sure?', :method => :delete %></td> 
```

从

```
http://guides.rubyonrails.org/layouts_and_rendering.html 
```

'edit_book_path(book)' 是什么定义的？你能解释一下这意味着什么吗？它是否在传入变量 book 时查看控制器“ *book* ”并检查控制器方法“edit”？

是什么`<%= link_to 'Show', book %>`？是否转到控制器方法“显示”？还是显示“显示”？'book' 是传递的变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:28:37.617

路径由 ruby​​ 的路由生成。您可以通过运行获取应用程序中可用的路线列表`rake routes`，这将解析您的`config/routes.rb`文件并为您提供路线列表及其各自的路径。该命令的输出应包括 edit_book_path，它可能由文件`resources :books`中的一行生成`config/routes.rb`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:27:08.607

```
1) <%= link_to 'Show', book %>
    # => <a href="/resource/show/1">Show</a> 
```

这意味着要显示`Show`的是链接和该链接的路径`book`。因此，如果您单击`Show`，将显示相应的书籍。

这里 book 的 id 为 1。所以你说显示了 id = 1 的书。

例子：

```
link_to "Profile", :controller => "profiles", :action => "show", :id => @profile
# => <a href="/profiles/show/1">Profile</a> 
```

相似地，

```
link_to "Profiles", profiles_path
# => <a href="/profiles">Profiles</a> 
```

上面的链接将`Profiles`作为链接和路径`profiles`作为其路径。

```
2) <td><%= link_to 'Edit', edit_book_path(book) %></td>
            #=> <a href="/book/1/edit">Edit</a> 
```

这意味着这`Edit`是链接，该链接的路径是`book`要编辑的。因此，如果您单击`Edit`，将显示相应的书籍页面进行编辑。

```
3) <td><%= link_to 'Remove', book, :confirm => 'Are you sure?', :method => :delete  %></td>
    #=> <a href=book rel="nofollow" data-method="delete" data-confirm="Are you sure?">Remove</a> 
```

这意味着要删除`Remove`该链接的链接和路径。`book`因此，如果您单击`Remove`，相应的书页将被删除并且不会显示在视图中。