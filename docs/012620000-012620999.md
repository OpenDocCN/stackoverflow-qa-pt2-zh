# StackOverflow 问答 12620000-12620999

# html - 希伯来语文本未正确显示

> ID：12620000
> 
> 赞同：0
> 
> 时间：2012-09-27T11:10:22.190
> 
> 标签：html, text, character-encoding, hebrew

出于某种原因，在我的网站上出现的任何希伯来文文本都像

```
 \u05d0\u05d9\u05d9\u05dc \u05d2\u05d5\u05dc\u05df 
```

等等，有人知道为什么吗？以及如何让它正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:50:56.963

显然，希伯来语文本应该由某些软件编写，可能是 JavaScript 代码，例如`\u05d0`，在字符串文字中表示 Unicode 字符 U+05D0 HEBREW LETTER ALEF “א”。听起来这样的结构被错误地“转义”了，例如，使`\`字符前面有另一个`\`字符，这使含义无效并将其变成`\`了单纯的字符。

这是一个相当抽象的答案，尽管比问题更具体。如需更详细的答案，请发布一些代码。

# com - 如何通过自动化 API 设置 MS Word 页面大小？

> ID：12620003
> 
> 赞同：0
> 
> 时间：2012-09-27T11:10:26.677
> 
> 标签：com, ms-word, ui-automation

我需要将 MS Word 文档的页面大小从 Letter 更改为 A4 并找到这个自动化类：http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.word.document_members.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.document_members.aspx)。我需要设置哪个属性（可能是嵌套的）？我找不到与页面大小相关的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:18:59.230

根据[您引用的文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.document_members.aspx)，可以看出 a`Document`公开了一个[`PageSetup`属性](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.pagesetup_members.aspx)。

该`PageSetup`属性有一个[`PaperSize`属性](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.pagesetup.papersize.aspx)，允许您定义文档的纸张大小 - 可用纸张大小的完整列表由`WdPaperSize`枚举指定（在此处查看其成员：http: [//msdn.microsoft.com/en-us/library /microsoft.office.interop.word.wdpapersize.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.wdpapersize.aspx)）。

所以基本上，要设置文档的纸张大小，您可以执行以下操作：

```
document.PageSetup.PaperSize = WdPaperSize.wdPaperA4; 
```

为了展示如何在“完整”上下文中完成此操作，我在下面包含了一个完整示例。该示例使用 .NET 4.5、Microsoft Office 对象库 15.0 版和 Microsoft Word 对象库 15.0 版（即 MS Office 2013 附带的对象库）作为 C# 控制台应用程序实现。

```
using System;
using Microsoft.Office.Interop.Word;
using Application = Microsoft.Office.Interop.Word.Application;

namespace WordDocStats
{
    class Program
    {
        static void Main()
        {
            // Open a doc file
            var wordApplication = new Application();
            var document = wordApplication.Documents.Open(@"C:\Users\Username\Documents\document.docx");

            // Set paper size
            document.PageSetup.PaperSize = WdPaperSize.wdPaperA4;

            // Save settings
            document.Save();

            // Close word
            wordApplication.Quit();
            Console.ReadLine();
        }
    }
} 
```

# android - 在android中使用restful web服务处理身份验证

> ID：12620006
> 
> 赞同：3
> 
> 时间：2012-09-27T11:10:37.300
> 
> 标签：android, web-services, rest, authentication, spring-security

我正在开发一个 android 应用程序，它将复制我的 Web 应用程序。我的 Web 应用程序具有登录/身份验证/会话，这是使用 Spring 安全框架实现的。现在的问题是我需要使用 RESTful Web 服务安全地处理 android 应用程序中的每一项工作，但我无法找到实现 Web 服务的正确方法。我正在使用[本教程](http://blog.orange11.nl/2011/02/07/creating-an-android-app-for-your-website-with-spring-android-and-rest/)，这实际上并不安全。他给出了一些关于如何使用**OAUTH**安全地进行操作的提示，但我不清楚。

我的问题是；

*   由于 REST 是无状态的并且 android 应用程序不是浏览器，我们不能基于 cookie 进行会话管理，但有人说我们可以。如果是这样怎么办？
*   我听说过用于轻松处理会话的 Spring Android 库，但没有找到合适的文档。如果有人有关于它的链接。把它们贴在这里。
*   如果可能的话，请向我提供有关 Spring 安全性的 RESTful 安全 Web 服务的详细解释/教程的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:03:00.623

通常对于具有 RESTful Web 服务的移动客户端，我没有使用过会话。通常每个方法都是独立验证的，通常使用 https 并将用户名密码作为 URL 中的参数传递或使用基本验证。参见例如这个问题和答案：

[使用 Android 调用 Restful Web 服务](https://stackoverflow.com/questions/4664384/calling-a-rest-web-service-secured-with-spring-security-from-android?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:46:20.187

在这种情况下，对你来说最简单的解决方案可能是打开 webview 并加载你的 web 应用程序登录。用户将登录，您将检查响应并可能返回一些令牌。

# spring - 如何实现 Spring Batch 的阅读器？

> ID：12620009
> 
> 赞同：1
> 
> 时间：2012-09-27T11:10:50.677
> 
> 标签：spring, spring-batch

我英语说的不好。如果有奇怪的句子请指出。

我有一个问题。这就是如何实现 CSV 文件和数据库的两个输入的 ItemReader。Spring Batch 有 JdbcCursorItemReader 和 FlatFileItemReader，但是每个类只使用一个输入项。我想实现使用 ItemReader 或其他类的两个输入。这不应该由 Spring Batch 实现吗？如果它不好，那么我想另一种方法。这是 ItemProcessor 或 ItemWriter 对第二次输入的处理。有人请教我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T12:44:03.807

正如 Serkan 在评论中所说，为了为您提供更好的答案，我们需要您正在工作的案例（您正在努力实现的目标）。

无论如何，为了做你想做的事（从两个来源读取），你可以通过三个步骤完成工作，前两个步骤从一个来源读取并写入公共中间队列/数据库（统一记录）和第三步读取和处理统一的源，或者您可以尝试实现 CompositeItemReadListener。

# telnet - telnet成功与否？

> ID：12620012
> 
> 赞同：0
> 
> 时间：2012-09-27T11:10:54.913
> 
> 标签：telnet

我telnet到服务器xxx.xxx.xxx.yyy 1433，它可以telnet到带有黑屏和光标的sql server框。光标闪烁一会儿后，窗口对话框切换回Administrator cmd。

这说明什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:03:51.533

这里有两个问题。

一是，除非您的目标设置为期望端口 1433 上的 Telnet（终端未加密）流量，否则它不会握手，并且您的 Telnet 命令将超时。

第二，如果您的 NETWORK 未配置为允许端口 1433 上的流量通过防火墙（双向），那么握手将失败，并且您的 Telnet 命令将超时。

另一个问题是：端口 1433 是一个常用的 SQL 端口，因此它被充分记录为 SQL 注入技术、蠕虫感染等易受攻击的端口。所以很有可能不允许端口 1433 上的连接，除非可能连接到受信任的主机，如果有的话。

因此，除非您正在探测服务器以确保 1433 已关闭，否则希望 IT 安全人员会问一些非常尖锐的问题，说明您*为什么*要通过此端口上的 Telnet 连接。

# hibernate - 来自简单 SQL 查询的休眠条件查询（带有嵌套子查询）

> ID：12620016
> 
> 赞同：4
> 
> 时间：2012-09-27T11:11:02.013
> 
> 标签：hibernate, criteria, hibernate-criteria

我正在尝试在休眠“标准”（不在 hql 中）中进行查询，但我没有得到做什么或使用什么。

```
select * from foo where column1 = 8 and column2 not in (
    select column2 from foo where column1 = 11 
) 
```

我用两个不同的查询做了它，然后使用 Java 函数来获得结果，但我需要一个单一的标准查询。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T00:46:32.310

模知道你的实际实体映射是什么（这当然是完全未经测试的），它可能通过类似的东西来解决

```
Session hibernateSession = ... (however you get it).

DetachedCriteria d = DetachedCriteria.forClass(Foo.class)
      .add(Restrictions.eq("column1", 11))
      .setProjection(Projections.property("column2"));

Criteria criteria = hibernateSession.createCriteria(Foo.class)
      .add(Restrictions.eq("column1", 8))
      .add(Subqueries.propertyNotIn("column2", d));

List<Foo> result = criteria.list(); 
```

这几乎肯定需要调整，因为“column1”和“column2”是 sql 字段名称，而您在这些地方需要的是 java 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:22:25.673

创建一个标准选择所有`Criteria cr = session.createCriteria(Your.class); List list = cr.list();` 然后你可以添加你的限制，即列1 = 8等，如下所示：`cr.add(Restrictions.eq("YourCondition", YourCondition));`

最后，您可以像这样提供 not in 子句：`crit.add(Restrictions.not(Restrictions.in("YourNotInCondition", YourNotInCondition)));`

# java - 用于校正 FishEye 镜头的桶形失真校正算法 - 无法用 Java 实现

> ID：12620025
> 
> 赞同：6
> 
> 时间：2012-09-27T11:11:30.887
> 
> 标签：java, algorithm, image-processing, distortion, fisheye

我有大量用鱼眼镜头拍摄的照片。因为我想对照片进行一些图像处理（例如边缘检测），所以我想消除严重影响我的结果的桶形失真。

经过一些研究和大量阅读文章后，我发现了这个[页面](http://mipav.cit.nih.gov/documentation/HTML%20Algorithms/BarrelDistortionCorrection.html)：他们描述了一种算法（和一些公式）来解决这个问题。

> M = a *rcorr^3 + b * rcorr^2 + c * rcorr + d
> rsrc = (a * rcorr^3 + b * rcorr^2 + c * rcorr + d) * rcorr
> 
> rsrc = 像素到源图像中心的
> 距离 rcorr = 像素到校正后图像中心的距离
> a,b,c = 图像失真 d = 图像线性缩放

我使用了这些公式并尝试在 Java 应用程序中实现它。不幸的是，它不起作用，我没能使它起作用。“更正”的图像看起来与原始照片完全不同，而是在中间显示了一些神秘的圆圈。看这里：

[http://imageshack.us/f/844/barreldistortioncorrect.jpg/](http://imageshack.us/f/844/barreldistortioncorrect.jpg/) （这曾经是一头白牛在蓝墙前的照片）

这是我的代码：

```
protected int[] correction(int[] pixels) {

    //
    int[] pixelsCopy = pixels.clone();

    // parameters for correction
    double paramA = 0.0; // affects only the outermost pixels of the image
    double paramB = -0.02; // most cases only require b optimization
    double paramC = 0.0; // most uniform correction
    double paramD = 1.0 - paramA - paramB - paramC; // describes the linear scaling of the image

    //
    for(int x = 0; x < dstView.getImgWidth(); x++) {
        for(int y = 0; y < dstView.getImgHeight(); y++) {

            int dstX = x;
            int dstY = y;

            // center of dst image
            double centerX = (dstView.getImgWidth() - 1) / 2.0;
            double centerY = (dstView.getImgHeight() - 1) / 2.0;

            // difference between center and point
            double diffX = centerX - dstX;
            double diffY = centerY - dstY;
            // distance or radius of dst image
            double dstR = Math.sqrt(diffX * diffX + diffY * diffY);

            // distance or radius of src image (with formula)
            double srcR = (paramA * dstR * dstR * dstR + paramB * dstR * dstR + paramC * dstR + paramD) * dstR;

            // comparing old and new distance to get factor
            double factor = Math.abs(dstR / srcR);
            // coordinates in source image
            double srcXd = centerX + (diffX * factor);
            double srcYd = centerY + (diffX * factor);

            // no interpolation yet (just nearest point)
            int srcX = (int)srcXd;
            int srcY = (int)srcYd;

            if(srcX >= 0 && srcY >= 0 && srcX < dstView.getImgWidth() && srcY < dstView.getImgHeight()) {

                int dstPos = dstY * dstView.getImgWidth() + dstX;
                pixels[dstPos] = pixelsCopy[srcY * dstView.getImgWidth() + srcX];
            }
        }
    }

    return pixels;
} 
```

我的问题是：
1）这个公式正确吗？
2）我把这个公式变成一个软件是不是犯了一个错误？
3）还有其他算法（例如[如何通过openCV模拟鱼眼镜头效果？](https://stackoverflow.com/questions/1927145/how-to-simulate-fisheye-lens-effect-by-opencv)或wiki/Distortion_（光学）），它们更好吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-04T07:07:23.197

您遇到的主要错误是算法指定 r_corr 和 r_src 以 min((xDim-1)/2, (yDim-1)/2) 为单位。需要这样做以标准化计算，以便参数值不依赖于源图像的大小。使用代码，您将需要为 paramB 使用更小的值，例如 paramB = 0.00000002 对我来说工作正常（对于尺寸为 2272 x 1704 的图像）。

在计算与中心的差异时，您还有一个错误，导致生成的图像与源图像相比旋转 180 度。

修复这两个错误应该会给你这样的东西：

```
protected static int[] correction2(int[] pixels, int width, int height) {
    int[] pixelsCopy = pixels.clone();

    // parameters for correction
    double paramA = -0.007715; // affects only the outermost pixels of the image
    double paramB = 0.026731; // most cases only require b optimization
    double paramC = 0.0; // most uniform correction
    double paramD = 1.0 - paramA - paramB - paramC; // describes the linear scaling of the image

    for (int x = 0; x < width; x++) {
        for (int y = 0; y < height; y++) {
            int d = Math.min(width, height) / 2;    // radius of the circle

            // center of dst image
            double centerX = (width - 1) / 2.0;
            double centerY = (height - 1) / 2.0;

            // cartesian coordinates of the destination point (relative to the centre of the image)
            double deltaX = (x - centerX) / d;
            double deltaY = (y - centerY) / d;

            // distance or radius of dst image
            double dstR = Math.sqrt(deltaX * deltaX + deltaY * deltaY);

            // distance or radius of src image (with formula)
            double srcR = (paramA * dstR * dstR * dstR + paramB * dstR * dstR + paramC * dstR + paramD) * dstR;

            // comparing old and new distance to get factor
            double factor = Math.abs(dstR / srcR);

            // coordinates in source image
            double srcXd = centerX + (deltaX * factor * d);
            double srcYd = centerY + (deltaY * factor * d);

            // no interpolation yet (just nearest point)
            int srcX = (int) srcXd;
            int srcY = (int) srcYd;

            if (srcX >= 0 && srcY >= 0 && srcX < width && srcY < height) {
                int dstPos = y * width + x;
                pixels[dstPos] = pixelsCopy[srcY * width + srcX];
            }
        }
    }

    return pixels;
} 
```

使用此版本，您可以使用现有镜头数据库（如 LensFun）中的参数值（尽管您需要翻转每个参数的符号）。现在可以在[http://mipav.cit.nih.gov/pubwiki/index.php/Barrel_Distortion_Correction找到描述该算法的页面](http://mipav.cit.nih.gov/pubwiki/index.php/Barrel_Distortion_Correction)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T23:37:26.050

我认为你的圈子是由这条线引起的：

```
double srcYd = centerY + (diffX * factor); 
```

我猜应该是：

```
double srcYd = centerY + (diffY * factor); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:16:58.150

可能您的径向失真参数太大，图像被压缩在一个球体上。尝试将较小的值放入`a`、`b`和。`c``d`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:46:45.797

你的价值观非常极端，所以你看到了极端的结果。

尝试 a=0，b=0，c=1。这根本没有更正，如果您的程序正确，您应该看到原始图像。然后逐渐改变c和b。以 0.1 为增量进行更改是一个好的开始。

# c# - 如何解决 smtpException 未被用户代码处理

> ID：12620029
> 
> 赞同：-1
> 
> 时间：2012-09-27T11:11:38.690
> 
> 标签：c#

```
public partial class ForgotPassword : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnPass_Click(object sender, EventArgs e)
    {
        //Create Connection String And SQL Statement
        string strConnection = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        string strSelect = "SELECT UserName,Password FROM Users WHERE Email = @Email";

        SqlConnection connection = new SqlConnection(strConnection);
        SqlCommand command = new SqlCommand();
        command.Connection = connection;
        command.CommandType = CommandType.Text;
        command.CommandText = strSelect;

        SqlParameter email = new SqlParameter("@Email", SqlDbType.VarChar, 50);
        email.Value = txtEmail.Text.Trim().ToString();
        command.Parameters.Add(email);

        //Create Dataset to store results and DataAdapter to fill Dataset 
        DataSet dsPwd = new DataSet();
        SqlDataAdapter dAdapter = new SqlDataAdapter(command);
        connection.Open();
        dAdapter.Fill(dsPwd);
        connection.Close();
        if(dsPwd.Tables[0].Rows.Count > 0 )
        {

            MailMessage loginInfo = new MailMessage();
            loginInfo.To.Add(txtEmail.Text.ToString());
            loginInfo.From = new MailAddress("YourID@gmail.com");
            loginInfo.Subject = "Forgot Password Information";

            loginInfo.Body = "Username: " + dsPwd.Tables[0].Rows[0]["UserName"] + "<br /><br />Password: " + dsPwd.Tables[0].Rows[0]["Password"] + "<br /><br />";
            loginInfo.IsBodyHtml = true;
            SmtpClient smtp = new SmtpClient();
            smtp.Host = "smtp.gmail.com"; 
            smtp.Port = 587;
            smtp.EnableSsl = true;
            smtp.Credentials = new System.Net.NetworkCredential("YourGmailID@gmail.com", "YourGmailPassword");
            smtp.Send(loginInfo);
            lblMessage.Text = "Password is sent to you email id,you can now <a href='Login.aspx'>Login</a>";
        }
        else
        {
            lblMessage.Text = "Email Address Not Registered";
        }

    }
} 
```

我遇到了错误 smtpException is unhandled by user code ...如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:14:39.623

很简单，写一些用户代码来处理它！

如果您不熟悉 Try..Catch 块，我建议您阅读它们，并使用它们（在适当的情况下）处理**异常**情况（即邮件服务器离线、网络连接问题、密码过期）。

导致您的异常的代码很可能是这一行，它应该给您一个开始的地方：

```
smtp.Send(loginInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:26:47.503

问题是您使用了错误的端口号。用于通过 SSL 的 Gmail。从[文档](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)中：

```
Outgoing Mail (SMTP) Server - requires TLS3 or SSL: smtp.gmail.com (use authentication)
Use Authentication: Yes
Port for TLS/STARTTLS: 587
Port for SSL: 465 
```

由于您将`EnableSsl`选项设置为 true，因此您的端口号应设置为`465`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:15:20.037

您应该在用户代码中处理异常：

```
try
{
    smtp.Send(loginInfo); 
}
catch (Exception ex)
{
    //Handle your exception here
    lblMessage.Text = "Oeps, something when wrong when we tried to send the email";
    return;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-09-08T09:32:48.083

错误：邮件未发送 - 用户代码未处理 smtp 异常

```
if (ModelState.IsValid)
        {
            try{
            string from = "abcd@gmail.com";
            using (MailMessage mail = new MailMessage(from, obj.Idemail))
            {
                mail.Subject = "Admin";
                mail.Body = "Registration successful!";
                mail.IsBodyHtml = false;
                SmtpClient smtp = new SmtpClient();
                smtp.Host = "smtp.gmail.com";
                smtp.EnableSsl = true;
                NetworkCredential networkCredential = new NetworkCredential(from, "pswd");
                smtp.UseDefaultCredentials = true;
                smtp.Credentials = networkCredential;
                smtp.Port = 587;
                smtp.Host = "localhost";
                smtp.Send(mail); 
                ViewBag.Message = "Password Sent through mail. Please chack password in your account and signup.";
            }
            }
            catch (Exception ex)
            {
                ViewBag.Message = "Error occur for sending data";
            }
        }

        else
        {
            return Json("Invalid Information!", JsonRequestBehavior.AllowGet);
        } 
```

# java - Java：摆动计时器等待

> ID：12620031
> 
> 赞同：3
> 
> 时间：2012-09-27T11:11:41.263
> 
> 标签：java, swing, timer, swingworker

我有这样的代码：

```
final SwingWorker worker = new SwingWorker() { 
      @Override
      protected Object doInBackground() throws Exception {...};
}
Timer timer=new Timer(10000, new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            worker.execute(); 
        }
    });
    timer.start(); 
```

有时**worker**进程需要超过10秒，但有时3-4秒，那么如何设置**定时器**等待**worker**完全执行？有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:20:05.543

请参阅`SwingWorker`该类的 javadoc：

> 在工作线程上调用 doInBackground 方法之前，SwingWorker 将状态属性更改为 StateValue.STARTED 通知任何 PropertyChangeListener。在 doInBackground 方法完成后，将执行 done 方法。然后 SwingWorker 将状态属性更改为 StateValue.DONE 通知任何 PropertyChangeListener。

因此，完成后会触发事件`SwingWorker`。`Timer`附加一个侦听器并在正确的事件上重新激活您的。

# javascript - 我怎样才能使元素居中

> ID：12620032
> 
> 赞同：1
> 
> 时间：2012-09-27T11:11:41.423
> 
> 标签：javascript, html, css

> **可能重复：**
> [如何使用 CSS 轻松地将 <div> 水平居中？](https://stackoverflow.com/questions/618097/how-do-you-easily-horizontally-center-a-div-using-css)

[http://jsfiddle.net/rehan008/s5eEf/](http://jsfiddle.net/rehan008/s5eEf/) 请参考这里。

我想让所有快捷方式居中对齐，但最后一行应该左对齐。如果有任何想法，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:21:37.263

将除最后一个之外的所有`div`子级设置`.shortcut`为具有居中边距。

```
.shortcut > div {
    margin: 0 auto;
}

.shortcut:last-child > div {
    margin: 0;
} 
```

[更新小提琴](http://jsfiddle.net/s5eEf/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:19:59.540

为了使每个 div 居中对齐（并且单独在一行上），这就是我解释您的要求的方式，您可以将**.shortcut** css 样式更改为：

```
.shortcut{
    border: 1px solid red;
    height:65px;
    width:45px;
    display:block;
    margin:5px auto;
} 
```

要使最后一个快捷方式左对齐，只需给它另一种样式：

```
 .lastShortcut{
        border: 1px solid red;
        height:65px;
        width:45px;
        display:block;
        margin:5px 0px;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:18:21.060

在您的 CSS 中添加此样式并检查。我希望它对你有用

> td { 文本对齐：中心；}

# iphone - iPhone App - 打开网页 - Appstore 批准

> ID：12620039
> 
> 赞同：0
> 
> 时间：2012-09-27T11:12:11.287
> 
> 标签：iphone, ios, app-store

只是一个快速的问题。为了节省时间，我们计划只创建一个打开浏览器并指向我们网站的应用程序。下线更新将提供其余功能。

根据您的经验，这个应用程序会获得批准吗？如果不是，我需要做什么才能获得批准？

干杯， RJ

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T11:18:57.163

不要认为它会被批准：

> *   **2.9** “beta”、“demo”、“trial”或“test”版本的应用程序将被拒绝
> *   **2.12**不是很有用、独特、只是捆绑为应用程序的网站或不提供任何持久娱乐价值的应用程序可能会被拒绝
> *   **2.13**主要是营销材料或广告的应用程序将被拒绝

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:18:08.830

虽然我不能直接引用[App Store Review Guidelines](https://developer.apple.com/appstore/resources/approval/guidelines.html)，因为它需要开发者帐户，但我可以说第 2.12 点表明该应用程序不会获得批准。

我的建议是您阅读审查指南以了解获得批准所需的条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:20:08.913

我知道 App Store 上的应用只不过是 UIWebView。请参阅此链接以获取证明：[App Store 和 UIWebView](http://www.iphonedevsdk.com/forum/business-legal-app-store/70355-app-store-and-uiwebview.html)

为了提升用户体验，你也可以考虑使用[phonegap](http://phonegap.com/)或者[appcelerator](http://www.appcelerator.com/)

# java - 支持动态数据库的最佳方法

> ID：12620041
> 
> 赞同：0
> 
> 时间：2012-09-27T11:12:13.677
> 
> 标签：java, database, postgresql, database-design

我的项目需要支持可配置的表单格式。我的意思是用户可以向表单添加“n”个列（以设计它），然后必须将列数据保存在数据库中。稍后我还想在这些列上查询 where 子句..

但是由于列的数量和类型不固定，我如何设计我的数据库来支持这样的功能？我使用 Java 作为我的编程语言和 PostgreSQL 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:07:57.887

您需要一个包含列值的单独表：

```
-------------------------------
| formId | columnNo | value   |
-------------------------------
| 1      | 1        | first   |
-------------------------------
| 1      | 2        | second  |
-------------------------------
| 1      | 3        | third   |
------------------------------- 
```

列号也可以更改为列名。当然应该有另一个表格，您可以在其中保存每个表格有多少列。这是最简单的解决方案。当您需要为不同的列使用不同的数据类型时，事情会变得更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:27:26.517

您需要构建与名为“Randy”的人完全相同的解决方案

[http://www.simple-talk.com/opinion/opinion-pieces/bad-carma/](http://www.simple-talk.com/opinion/opinion-pieces/bad-carma/)

您也可以在谷歌上搜索“内部平台效应”，因为如果您尝试构建符合该要求的东西，那么这正是您将要做的。

您将只是在现有 DBMS 之外重新创建一个 DBMS。您将在您的应用程序代码中重新创建类型和域检查，而您现有的 DBMS 已经拥有它们，并且与 DBMS 免费提供的目的完全相同。您将重新创建表达式解析器和编译器，而您现有的 DBMS 已经拥有它们。您将重新创建数据访问策略的选择，而您现有的 DBMS 已经拥有它们。您将要重新创建的以及您现有 DBMS 已经拥有的每一件小东西，都将是您现有 DBMS 已经拥有的更差的版本。

您的用户正在寻求一种可以立即构建的软件解决方案，该解决方案可以并且将满足他将来可能遇到的所有可能需求，而无需 IT 人员的进一步干预（意思是：您的用户担任数据库设计师，虽然不具备这样做的技能，并且希望您的应用程序能够填补所有需要但用户没有的知识空白来扮演该角色）。

这听起来像是一个合理的要求吗？你真的认为构建这样的应用程序甚至是遥不可及的吗？嗯，有可能，有点。这样的应用程序确实存在。它们被称为 DB2、Oracle、Sybase、PostgreSQL ……我毫不怀疑，在您的用户可以等待的时间范围内构建与它们相匹配的东西将是遥不可及的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:06:58.603

这并不像听起来那么难。您只需要为表单中的列和每个实体中的值（已填写表单的一个实例）创建一个单独的表。这有时是调用和[实体属性值模型](http://en.wikipedia.org/wiki/Entity-attribute-value_model)。

形式

*   ID
*   姓名
*   ETC

form_column

*   表格编号
*   柱子
*   属性

实体

*   ID
*   表格编号

实体属性

*   实体 ID
*   表格栏
*   属性
*   值（您可以只使用字符串，或者使用 value_string、value_int 和 value_float）

要搜索实体，您的查询屏幕可以通过在 WHERE 子句中添加“OR (entity_attribute.entity_id=entity.entity_id and entity_attribute.attribute=FOO and entity_attribute.value=BAR)”子条款来构建 SELECT 语句。

另一种方法是将表单设计和实体（填写在表单中）存储为 XML。从那里您可以使用 XMLBeans 或 DOM 解析器来处理实体。

# facebook - facebook 应用程序动作语法

> ID：12620055
> 
> 赞同：0
> 
> 时间：2012-09-27T11:12:55.223
> 
> 标签：facebook, facebook-graph-api

我创建了一个 Facebook 应用程序来拨打电话。好吧，我仍然无法验证操作。

当我试图提交它以供批准时，我收到了这条消息：

![审批状态](../Images/32729a4b4960c1bb0cc594e1456a283f.png)

动作语法如下：

![动作语法](../Images/a514f80183f55cd00b35e080a342509c.png)

我在我指定的语法中找不到错误。我阅读了他们的文档。我还是想不通。

谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:31:42.997

原因是你的祈使时态太长了。

更改`'make free calls using'`为`'call using'`

# android - 如何强制重新安装APK

> ID：12620059
> 
> 赞同：1
> 
> 时间：2012-09-27T11:13:05.347
> 
> 标签：android, installation

我想导出我的应用程序的新版本，并且我想强制用户卸载并重新安装新版本的应用程序（出于不同的原因）。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:27:04.687

改变你的应用程序的签名，就可以了。发生的情况是，系统会在安装新应用程序时警告用户该应用程序被发现但具有不同的签名。用户必须先卸载当前应用程序，然后才能安装新应用程序。

不存在比这更直接的方法。许多用户可能不明白为什么该应用程序无法安装。您应该尝试制作您的应用程序，这样就没有必要了。卸载当前的应用程序也意味着用户会丢失它的数据。

另一种选择是更改清单文件中的包名称，但这意味着用户会丢失所有的应用程序数据。因为该应用程序将作为全新的应用程序安装。

这不好....

罗尔夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:16:46.763

更改您的 apk 的签名/密钥。我已阅读这会强制在设备上完全卸载

![在此处输入图像描述](../Images/787c20e91b783e5fa95a796234849b10.png)

日食的截图。

# android - android中的嵌套列表，带有来自多个xml文件的listview

> ID：12620061
> 
> 赞同：0
> 
> 时间：2012-09-27T11:13:14.293
> 
> 标签：android, xml, parsing, listview, nested

我正在创建一个`Buttons`在第一个屏幕上有几个的应用程序。每个都`Button`将解析一个单独的`XML`文件，并应该从该信息创建一个嵌套列表。

所有`XML`文件都具有以下结构：

```
<blalist>
<house>
     <name>Blaname1</name>
     <eaddress>195 bla steet</eaddress>
     <caddress>195 bla strasse</caddress>
     <telephone>123456</telephone>
</house>
<house>
     <name>Blaname2</name>
     <eaddress>15 bla steet</eaddress>
     <caddress>15 bla strasse</caddress>
     <telephone>12345685</telephone>
</house>
</blalist> 
```

单击第一个按钮后，我想生成一个`ListView`仅由标签“名称”中的名称组成的名称。所以列表应该只显示 Blaname1,Blaname2...
单击其中一个名称后，所有其他标签都应显示为内容；标签“eaddress”，“caddress”，“telephone”和三个额外的按钮。

基本上是一个 3 个屏幕的场景。带有主要按钮的第一页。第二页显示仅使用名称生成的列表。第三个屏幕显示单击的特定名称的详细信息。

我该怎么做？我发现了大量用于解析 xml 的信息`ListView`以及一些关于的信息，`ExpandableListView`但我无法真正了解如何处理这个问题。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:21:33.243

您需要做的就是解析 XML 并以`SimpleExpandableListAdapter`类支持的格式构建数据。

1) 团体 `List<HashMap<String, String>> lstGroups`

2) 对于组的子项 `List<ArrayList<HashMap<String, String>>> lstGroupItems`

然后你可以使用`SimpleExpandableListAdapter`

```
SimpleExpandableListAdapter expListAdapter = new SimpleExpandableListAdapter(
                getApplicationContext(), lstGroups,
                R.layout.group_row, // Group item layout XML.
                new String[] { "Group Item" }, // the key that will identify group in `lstGroups`.
                new int[] { R.id.row_name }, // ID of each group item.-Data
                lstGroupItems, // childData describes second-level
                R.layout.child_row, // Layout for sub-level entries(second level).
                new String[] { "Sub Item" }, // Keys that will identify child items in `lstGroupItems`
                new int[] { R.id.grp_child }
        );
setListAdapter(expListAdapter); 
```

你可以参考这个例子

[ANDROID中使用SimpleExpandableListAdapter的Expandable ListView，一个简单的例子。](http://www.coderzheaven.com/2011/04/10/expandable-listview-in-android-using-simpleexpandablelistadapter-a-simple-example/)

**添加 ：**

如果您有大量数据，我认为您应该使用 SQLiteDatabase，否则您可以按以下格式构建数据

`Map<String, Map<String, String>> mapHouses;`

这里的键将是房屋名称，其值将再次是包含房屋属性和相应值的 Map。

您将需要访问`mapHouses`不同的活动，以便您可以在应用程序上下文（即`Application`类）中拥有相同的活动，并将房屋名称传递给需要显示房屋详细信息的活动。但是您最终会将大量数据保存到内存中，如果您的应用程序被 Android 杀死，这些数据可能会丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:57:42.190

根据您对 Vishal 的评论，您的问题实际上是在询问如何构建整个应用程序。

你需要建立

*   带有启动列表活动的按钮的主要活动
*   显示名称列表的列表活动
*   可用于显示与名称关联的详细信息的详细信息活动

此外，您还需要决定将用于反序列化 XML 并以某种方式存储它的技术。我建议使用 XStream 进行反序列化，但有很多选项，您可能已经有了偏好。

然后，您需要存储已反序列化的 Name 对象。我建议您使用 ORMLite 或 DB4O。

您将需要一种方法来加载所有名称的列表，以及从您选择的任何持久性技术中加载特定名称的详细信息的方法。

您最好的选择是尝试做这些事情，然后发布有关您尝试构建应用程序的特定问题的新问题。

希望这会有所帮助......而且不仅仅是教奶奶吸鸡蛋

# perl - 使用 Perl VimDebug 的“==!!! Resulted fork bomb”错误

> ID：12620074
> 
> 赞同：1
> 
> 时间：2012-09-27T11:13:58.247
> 
> 标签：perl, debugging, vim, ubuntu

我使用这个 VimDebug：[http](http://www.vim.org/scripts/script.php?script_id=663)
://www.vim.org/scripts/script.php?script_id=663 在我按 F12 开始调试会话后，我有很长的堆栈跟踪，错误如下：

```
==!!! Resulted for bomb which slowly wil ... 
```

CPU 达到 100%...

有人知道它可能是什么吗？
谢谢你的前面。

# javascript - 在按钮单击时重置 setInterval

> ID：12620079
> 
> 赞同：0
> 
> 时间：2012-09-27T11:14:19.027
> 
> 标签：javascript, jquery, setinterval, jquery-click-event

**使用最新代码更新：**

这是最新的代码，仍然有 2 个按钮和 2 个功能。每个按钮都应该运行相关函数，并通过 setInterval 将代码设置为每分钟后运行相同的按钮。出于某种原因，第一个 setInterval 似乎总是保持设置，即使在单击应该更改它的第二个按钮之后也是如此。不知道我做错了什么：

```
$(document).ready(function() {
    var myTimer = null;

    get_popular();

    clearInterval(myTimer);
    myTimer = null;
    myTimer = setInterval(function() {$('a.btnPopular').click();}, 60*1000);

    $('a.btnPopular').click( function(event) {
        event.preventDefault(); 
        get_popular( $(this) );

        clearInterval(myTimer);
        myTimer = null;
        myTimer = setInterval(function() {$('a.btnPopular').click();}, 60*1000);
    });

    function get_popular( that ) {
        $.ajax({
            url: 'get_popular.aspx?rand=' + Math.random(),
            type: 'GET',
            error: function(xhr, status, error) {
                // error message here
            },
            success: function(results) { 
                if ( typeof that != "undefined" ) {
                    that.closest('.outer_div').find('.inner_div').empty().append( results );
                } else {
                    $('.inner_div.new').empty().append( results ).removeClass('new');
                }
            }
        });
    }

    $('a.btnLatest').click( function(event) {
        event.preventDefault(); 
        get_latest( $(this) );

        clearInterval(myTimer);
        myTimer = null;
        myTimer = setInterval(function() {$('a.btnLatest').click();}, 60*1000);
    });

    function get_latest( that ) {
        $.ajax({
            url: 'get_latest.aspx?rand=' + Math.random(),
            type: 'GET',
            error: function(xhr, status, error) {
                // error message here
            },
            success: function(results) { 
                if ( typeof that != "undefined" ) {
                    that.closest('.outer_div').find('.inner_div').empty().append( results );
                } else {
                    $('.inner_div.new').empty().append( results ).removeClass('new');
                }
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:17:06.723

尝试：

```
setInterval(function() {$('a.btnPopular').click();}, 60*1000); 
```

编辑：你也不能`get_popular();`在没有参数的情况下调用；）

编辑2：这应该可以解决您的问题：

```
var myTimer = null;

$('a.btnPopular').click(function(event) {
    event.preventDefault(); 
    get_popular($(this));
    clearTimeout(myTimer);
    myTimer = setTimeout(function(){$('a.btnPopular').click();}, 60*1000);
});

$('a.btnLatest').click(function(event) {
    event.preventDefault(); 
    get_latest($(this));
    clearTimeout(myTimer);
    myTimer = setTimeout(function(){$('a.btnLatest').click();}, 60*1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:20:13.270

```
setInterval(function() {$('a.btnPopular').trigger('click');}, 60*1000);
// Ad do this
$(elem).click(function(){}) => $(elem).on('click', function(){}); 
```

# python - 正则表达式匹配表示整数的字符串中的数字范围数？

> ID：12620080
> 
> 赞同：0
> 
> 时间：2012-09-27T11:14:22.960
> 
> 标签：python, regex

我只想匹配代表数字之间的字符串`0...9999`

```
import re
NUMERIC  = re.compile("\d{,4}")
NUMERIC.match("324234")
nr =NUMERIC.match("324234")
nr.group(0) 
```

尝试了上述方法，但它匹配字符串中的前 4 位数字，即使字符串有 5 位数字。

正则表达式匹配此字符串表示的整数中具有 1 到 4 位数字的数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:40:32.933

Anchors 可以做到不匹配太多：

```
>>> pattern = re.compile("^\d{1,4}$")
>>> pattern.match("0").group()
'0'
>>> pattern.match("42").group()
'42'
>>> pattern.match("777").group()
'777'
>>> pattern.match("2012").group()
'2012'
>>> pattern.match("65535").group()
------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'group' 
```

注意`{1,4}`-- 我假设你不想匹配空字符串。但是，这将**不**匹配`00001`，这肯定在范围内。

一个更强大的正则表达式替代方案是利用 Python 的内置整数解析：

```
def parse_4digit_number(s):
    i = int(s)
    if 0 <= i <= 9999:
        return i
    else:
        raise ValueError("{0} is out of range".format(i)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:23:04.050

^ 是行首 $ 是行尾

你可能想要单词......而不是整行......所以

```
\< = start of word 
\> = end of word
\b is word boundry... 
```

许多语言不支持 \< 和 >...

所以

```
\b(\d{1,4})\b 
```

但是，这将匹配 22.33 作为两个单独的匹配项。

你可以通过做这样的事情来避免这种情况。

```
(?:^|\s)(\d{1,4})(?:\s|$) 
```

然而那会错过

```
super duper 3333,and 
```

因此，您必须在尾随字符列表中添加“，”或其他标点符号...

```
(?:^|\s)(\d{1,4})(?:\s|$|[,:;?]) 
```

然而，这让我们回到...

有5个人。今天...

5 将被错过！您如何区分这与“有 55.55% 的人”之间的区别

# java - jboss 7上的肥皂是一场噩梦

> ID：12620081
> 
> 赞同：0
> 
> 时间：2012-09-27T11:14:24.083
> 
> 标签：java, soap, jboss7.x, seam2

我在 jboss 7 上运行一个肥皂服务。我有一个肥皂服务 bean，它的开头是这样的：

```
@Stateless 
@WebService(name = "AboxConfigurationMgt", targetNamespace = "http://com.atriumnetwork.ws/abox/configuration", serviceName = "AboxConfigurationMgtService")
@SOAPBinding(style = SOAPBinding.Style.RPC, use = SOAPBinding.Use.LITERAL) 
public class AboxConfigurationServiceBean implements AboxConfigurationServiceLocal { 
```

另一堂课也是这样开始的：

```
@WebService(name = "AboxConfigurationMgt", targetNamespace = "http://com.atriumnetwork.ws/abox/configuration")
@SOAPBinding(style = SOAPBinding.Style.RPC)
public interface AboxConfigurationMgt { 
```

对于 ws 配置，我的standalone.xml 是这样的：

```
<subsystem xmlns="urn:jboss:domain:webservices:1.1">
        <modify-wsdl-address>true</modify-wsdl-address>
        <wsdl-host>${jboss.bind.address:127.0.0.1}</wsdl-host>
        <endpoint-config name="Standard-Endpoint-Config"/>
        <endpoint-config name="Recording-Endpoint-Config">
            <pre-handler-chain name="recording-handlers" protocol-bindings="##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM">
                <handler name="RecordingHandler" class="org.jboss.ws.common.invocation.RecordingServerHandler"/>
            </pre-handler-chain>
        </endpoint-config>
    </subsystem> 
```

但是当我运行时，我收到以下错误：

```
EXCEPTION_CAUGHT_WHILE_(PREPARING_FOR)_PERFORMING_THE_INVOCATION: org.jboss.ws.WSException: Target endpoint address not set
at org.jboss.ws.core.CommonClient.invoke(CommonClient.java:359) [jbossws-native-core-4.0.2.GA.jar:4.0.2.GA]
at org.jboss.ws.core.jaxws.client.ClientImpl.invoke(ClientImpl.java:246) [jbossws-native-core-4.0.2.GA.jar:4.0.2.GA]
at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:176) [jbossws-native-core-4.0.2.GA.jar:4.0.2.GA]
at org.jboss.ws.core.jaxws.client.ClientProxy.invoke(ClientProxy.java:162) [jbossws-native-core-4.0.2.GA.jar:4.0.2.GA]
at $Proxy158.generateNewConfig(Unknown Source)  at com.atriumnetwork.webportal.abconfig.logic.impl.GeneratConfigAction.valid(GeneratConfigAction.java:176) [myatrium_intranet.jar:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_35]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_35]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_35]
at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_35] 
```

我究竟做错了什么？？？我真的很感激任何帮助。此刻有些绝望。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:08:28.710

尝试将 ejb.jar 添加到您的 wWEB-INF\lib 中。要创建端点，您需要将 ejb jar 添加到 lib。这是 as7 中的常见问题。

[在这里](https://community.jboss.org/message/761837?tstart=0)查看

# iphone - 将分数提交到排行榜

> ID：12620085
> 
> 赞同：0
> 
> 时间：2012-09-27T11:14:37.157
> 
> 标签：iphone

我已经`Game Center`在我的 iTunes 中为我的应用程序启用了连接。在我的游戏中心，我创建了一个名为“Level 1”的排行榜，其 id 为“level1”，整数。

在我的游戏中，我尝试提交这样的分数：

```
 NSAutoreleasePool   *pool = [[NSAutoreleasePool alloc]init];

    GKScore *scoreReporter = [[[GKScore alloc] initWithCategory:@"level1"] autorelease];

    int64_t score1 =scr;
    scoreReporter.value = score1;
    [scoreReporter reportScoreWithCompletionHandler:^(NSError *error) { 
        if (error != nil) {
            NSLog(@"Submit failed");
        }
        else {
            NSLog(@"Score Submited");
        }
    }];

    [pool release]; 
```

但我**提交失败**；我在大约 30-40 分钟前创建了排行榜，苹果还没有启用它吗？如果否则，我不知道我做错了什么。

这是我的错误：

> 错误：错误域 = GKErrorDomain 代码 = 6 “请求的操作无法完成，因为本地播放器尚未经过身份验证。” UserInfo=0x1ed4d4a0 {NSLocalizedDescription=请求的操作无法完成，因为本地播放器尚未通过身份验证。}

顺便说一句，我的 iPhone 可以访问互联网，并且我的手机已连接到苹果帐户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:57:04.057

没有在游戏中心认证，现在可以了！

[Game Center Programming Guide 中](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Users/Users.html)的示例：

```
- (void) authenticateLocalPlayer
{
    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    [localPlayer authenticateWithCompletionHandler:^(NSError *error) {
         if (localPlayer.isAuthenticated)
         {
             // Player was successfully authenticated.
             // Perform additional tasks for the authenticated player.
         }
     }];
} 
```

# ruby - Sinatra haml 选择和删除多个文件

> ID：12620090
> 
> 赞同：1
> 
> 时间：2012-09-27T11:14:59.637
> 
> 标签：ruby, checkbox, sinatra, haml, params

我正在尝试根据列表删除多个文件，但在从 chekcbox 获取参数时遇到问题

这是我的 list.haml：

```
%form(method="post" action="/selection" enctype="multipart/form-data")
        -   @files.each do |file|
            %br
            %input{:type => "checkbox", :name => "checkbox[]", :value => "#{file}" }
            =file
        %br
        %input(type='submit' value="Delete Selected Files") 
```

现在，我现在只是想看看我在 params 中得到了什么，所以我以后可以处理如何删除这个文件列表。

```
params.inspect 
```

"给我" ≃> {"checkbox"=>["yet_another_file.txt", "file1", "file2"]}

但我不知道如何将它放入一个数组中，这样我就可以做类似的事情

```
var.each do |c|
    puts c
end 
```

我试过 var = params[:checkbox] 但 var 是空的，现在有谁我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:38:47.427

您应该使用`var = params["checkbox"]`, 因为 params 键不是符号，而是字符串。

# file - VBA将数据从文件放入Excel表格

> ID：12620095
> 
> 赞同：1
> 
> 时间：2012-09-27T11:15:18.823
> 
> 标签：file, vba, io

我得到了这样的 file.txt 结构：

```
“第一的”
a1 b1 c1 d1
a2 b2 c2 c2

“第二”
e1 f1
e2 f2

“第三”
g1 h1
```

我的 Excel 文件中有三张纸：“第一”、“第二”和“第三”。如何通过 VBA 代码将此数据填充到三张纸中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:01:14.967

我仍然认为每行读取文本文件行是最好的方法。您可以将整个文件加载到数组中并稍后写入条件。

```
Sub Read_text_File()

Dim oFSO As New FileSystemObject
Dim oFS
Dim sText as String
Dim vArray
Dim lCnt as Long

Set oFS = oFSO.OpenTextFile("c:\textfile.TXT")

Do Until oFS.AtEndOfStream
    lCnt = lCnt + 1 
    sText = oFS.ReadLine
    vArray(lCnt) = sText
Loop

End Sub 
```

然后查看数组并做你的事情。

或者您可以立即将数据加载到三个单独的数组中，代表三张纸。
这完全取决于您。
让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:52:04.473

开始录制宏并打开以空格分隔的txt文件。按 ctrl + f 并分三步找到 First、Second 和 Third。将所需范围从活动工作簿复制到相应工作表中所需的工作簿。

这将为您提供一个录制的宏，您可以对其进行重组以制作自动代码。也许我可以稍后发布一些代码。您将必须添加 vba 行来读取用于查找第二个和第三个单元格的行号，以便您知道必须复制的范围。

1个问题，你文件中的列数如图所示？？？？

这是一个代码。

```
Sub Macro1()
Dim startRow As Integer
Dim endRow As Integer
Dim wb As Workbook

Workbooks.OpenText Filename:="D:\file.txt", Origin:=437, startRow:=1, _
    DataType:=xlDelimited, TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter _
    :=True, Tab:=True, Semicolon:=False, Comma:=False, Space:=True, Other _
    :=False, FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1)), _
    TrailingMinusNumbers:=True

 Set wb = ActiveWorkbook

Cells.Find(What:="FIRST", After:=ActiveCell, LookIn:=xlFormulas, LookAt _
    :=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
    False, SearchFormat:=False).Activate
startRow = ActiveCell.Row + 1

Cells.Find(What:="SECOND", After:=ActiveCell, LookIn:=xlFormulas, LookAt _
    :=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
    False, SearchFormat:=False).Activate
endRow = ActiveCell.Row - 1

Range("A" & startRow & ":D" & endRow).Copy
ThisWorkbook.Activate
Sheets("Sheet1").Select
Range("A1").Select
ActiveSheet.Paste

startRow = endRow + 2
wb.Activate

Cells.Find(What:="THIRD", After:=ActiveCell, LookIn:=xlFormulas, LookAt _
    :=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
    False, SearchFormat:=False).Activate
endRow = ActiveCell.Row - 1

Range("A" & startRow & ":D" & endRow).Copy
ThisWorkbook.Activate
Sheets("Sheet2").Select
Range("A1").Select
ActiveSheet.Paste

wb.Activate
startRow = endRow + 2
endRow = Range("A" & Rows.Count).End(xlUp).Row

Range("A" & startRow & ":D" & endRow).Copy
ThisWorkbook.Activate
Sheets("Sheet3").Select
Range("A1").Select
ActiveSheet.Paste

wb.Close (False)
End Sub 
```

# android - Android 卡在布局和列表视图中

> ID：12620098
> 
> 赞同：0
> 
> 时间：2012-09-27T11:15:34.860
> 
> 标签：android, listview, layout

只需直接查看屏幕快照即可轻松理解...

这是正常的屏幕..！

![在此处输入图像描述](../Images/c68a21fc1453103a54d7ed5045b5a832.png)

但是当我点击edittext它看起来像这样..

![在此处输入图像描述](../Images/d7981a913b99d731762ea684caa3b28c.png)

对于信息我正在使用相对布局看看..

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center"
android:background="@drawable/back"
android:orientation="vertical"
android:visibility="visible" >

<include
    android:id="@+id/include1"
    layout="@layout/titlebar_layout" />

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:gravity="center" >

    <ListView
        android:id="@+id/lvcategory"
        android:layout_width="320dp"
        android:layout_height="334dp"
        android:cacheColorHint="@color/Transpaternt_color" >
    </ListView>

</LinearLayout>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/include1"
    android:text="Recenter Map At : "
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/Text_color" />

<EditText
    android:id="@+id/edtaddress"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:editable="true"
    android:ems="10"
    android:enabled="true"
    android:hint="@string/Address"
    android:textColorHint="@color/Hint_color" />

<Button
    android:id="@+id/btngo"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/edtaddress"
    android:layout_alignBottom="@+id/edtaddress"
    android:layout_alignParentRight="true"
    android:text="Go" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/edtaddress"
    android:text="Categories : "
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/Text_color" />

</RelativeLayout> 
```

那么如何解决这个问题？任何帮助将不胜感激..在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:25:56.233

只需将您的 xml 替换为：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center"
android:background="@drawable/back"
android:orientation="vertical"
android:visibility="visible" >

<include
    android:id="@+id/include1"
    layout="@layout/titlebar_layout" />

<ListView
    android:id="@+id/lvcategory"
    android:layout_width="match_parent"
    android:layout_height="324dp"
    android:layout_alignParentBottom="true"
    android:layout_below="@+id/textView2"
    android:cacheColorHint="@color/Transpaternt_color" >

</ListView>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/include1"
    android:text="Recenter Map At : "
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/Text_color" />

<EditText
    android:id="@+id/edtaddress"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:editable="true"
    android:ems="10"
    android:enabled="true"
    android:hint="@string/Address"
    android:textColorHint="@color/Hint_color" />

<Button
    android:id="@+id/btngo"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/edtaddress"
    android:layout_alignBottom="@+id/edtaddress"
    android:layout_alignParentRight="true"
    android:text="Go" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/edtaddress"
    android:text="Categories : "
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/Text_color" />

</RelativeLayout> 
```

希望您明白，在您的情况下，您不应该将 ListView 与任何布局一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:27:14.750

试试这个可能是使用完整的调整清单

```
<activity
  android:windowSoftInputMode="adjustResize"              
  android:name=".youractivity" android:label="@string/app_name" > 
```

# html - 背景图像不跨越整个容器流体

> ID：12620099
> 
> 赞同：2
> 
> 时间：2012-09-27T11:15:35.763
> 
> 标签：html, css, twitter, twitter-bootstrap, background-image

我是这个引导程序的新手。我有一个背景图像，我想将其放入容器流体中。怎么做。

这是我的代码：

```
<div class="image_outer">
    <div class="container-fluid">
         <div class="row-fluid">
                <div class="span5">
                     <div class="fl navi"> <a href="#" title="One" class="mr30">One</a> <a href="#" title="two">TwoP</a> </div>
                </div>
                <div class="span2"">
                     <div id="image1"><img src="/Something/something.jpg" alt="" /></div>
                </div>
                <div class="span5">
                     <div class="fr navi"> <a href="#" title="three" class="mr30">Three</a> <a href="#" title="four">Four</a> </div>
                </div>
         </div>
    </div>
</div> 
```

对应的类是

```
.image_outer{width:100%;margin:0 auto; background:url(Something/something_bg.jpg) repeat-x; height:128px;}
.fl{float:left;}
.fr{float:right;}
.mr30{margin-right:100px; font-family: ee_nobblee,arial;}
.navi a{ font-size:22px; color:#6D6E70; margin-top:50px; float:left; font-weight:normal; font-family:ee_nobblee,arial;}
.navi a:hover { text-decoration:none; color:#858687;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T06:47:04.257

试试这个 CSS：

```
.image_outer {
   width:100%;
   margin:0 auto; 
   background:url(Something/something_bg.jpg) repeat-x; 
   height:128px; 
   background-position:cover;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:36:18.097

像这样使用您的代码，我希望这适用于图像

> .image_outer{width:100%;margin:0 auto; 背景：url（../Something/something_bg.jpg）重复-x；高度：128 像素；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:18:58.057

我可能错了，你是漂浮的孩子。您需要清除浮动，以便背景占据指定的高度。

```
<div class="row-fluid">
            <div class="span5">
                 <div class="fl navi"> <a href="#" title="One" class="mr30">One</a> <a href="#" title="two">TwoP</a> </div>
            </div>
            <div class="span2"">
                 <div id="image1"><img src="/Something/something.jpg" alt="" /></div>
            </div>
            <div class="span5">
                 <div class="fr navi"> <a href="#" title="three" class="mr30">Three</a> <a href="#" title="four">Four</a> </div>
            </div>
            <div style="clear:both"></div>
     </div> 
```

# asp.net-mvc - MVC MultiSelect 模型绑定

> ID：12620100
> 
> 赞同：1
> 
> 时间：2012-09-27T11:15:38.500
> 
> 标签：asp.net-mvc, entity-framework, razor, asp.net-mvc-4

我希望能够显示和更新我的用户组织，最好使用 htmlhelper Html.TextBoxFor(

我有一个 entityframework 5 数据库第一个数据库，其关系在 3 个表用户组织 UserOrganisation 上按预期定义

产生以下类

```
public partial class User
{
    public System.Guid UserId { get; set; }
    public string Fullname { get; set; }
    ...
}
public partial class Organisation
{
    public int OrganisationID { get; set; }
    public string Title { get; set; }
    ...
}
public partial class UserOrganisation
{
    public System.Guid UserId { get; set; }
    public int OrganisationID { get; set; }
} 
```

我将用户作为模型传入，并在视图包中填充潜在组织的列表，即

```
ViewBag.PossibleOrganisations = OrganisationFactories.GetOrganisations() 
```

剃刀标记是。@Html.ListBoxFor(model => model.UserOrganisations, new MultiSelectList(ViewBag.PossibleOrganisations,"OrganisationID","Title"))

现在这会正确显示组织列表，我可以多选它们。但是它不显示选定的组织，并且在回发时也不会将其写回数据库（顺便说一下，所有其他字段在此更改之前确实写回了）。

有人对以这种方式工作的多选列表有任何建议或示例吗？

干杯蒂姆

# actionscript-3 - 单选按钮上的空格键和箭头键触发 TypeError：错误 #1009

> ID：12620101
> 
> 赞同：1
> 
> 时间：2012-09-27T11:15:39.400
> 
> 标签：actionscript-3, air

我刚刚在我的应用程序中发现了一个错误，它看起来像一个 Flash 播放器错误，我想知道是否有人找到了解决方法或其他什么。

我的应用中有一些单选按钮组。如果我在按住空格键的同时按箭头键，它最终会触发

```
 TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at fl.controls::LabelButton/drawIcon()
    at fl.controls::LabelButton/draw()
    at fl.controls::RadioButton/draw()
    at fl.core::UIComponent/callLaterDispatcher() 
```

如果找到描述我同样情况的[这个线程。](http://board.flashkit.com/board/showthread.php?819852-wacky-bug-in-flash-component)你认为有什么解决方法吗？它真的是一个闪存错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T15:35:11.163

所以，我调查了这个问题，发现标准 fl 组件存在错误。这不仅仅是关于 RadioButton。如果您按住空格键，然后通过单击“TAB”按钮切换当前 UI 元素 - 您将收到类似的错误。

要解决它，您应该修复组件的来源：在类中`LabelButton`，方法`keyUpHandler`替换代码

```
setMouseState(oldMouseState); 
```

和

```
if (oldMouseState!==null) {
    setMouseState(oldMouseState);
} 
```

并添加覆盖：

```
override protected function focusOutHandler(event:FocusEvent):void {
    if (oldMouseState) {
        keyUpHandler(new KeyboardEvent(KeyboardEvent.KEY_UP, true, true, 0, Keyboard.SPACE));
    }

    super.focusOutHandler(event);
} 
```

如果你不知道，你可以怎么做：

1.  只需复制`Adobe Flash CS5 install folder\Common\Configuration\Component Source\ActionScript 3.0\User Interface\fl\controls\LabelButton.as`到具有相同包结构的另一个目录`\fl\controls\LabelButton.as`

2.  那么您需要将这个重复的结构包含在项目中。

这不是很好的方法，但在这种情况下它确实修复了这个错误。顺便说一句，我会把它发送给 Adob​​e。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T14:26:16.887

实际上它不是一个闪存错误它的组件的错误。如果您的单选按钮不需要空格键（我认为它没用），您可以通过创建自己的扩展 RadioButton 类的 MyRadioButton 来禁用它，这将禁用空格键输入

```
package  {
import flash.events.KeyboardEvent;
import fl.controls.RadioButton;
import flash.ui.Keyboard;

public class MyRadioButton extends RadioButton{

    public function MyRadioButton() {
        super();
    }

    override protected function keyUpHandler(event:KeyboardEvent):void {
        if(event.keyCode != Keyboard.SPACE){
            super.keyUpHandler(event);
        }
    }

    override protected function keyDownHandler(event:KeyboardEvent):void {
        if(event.keyCode != Keyboard.SPACE){
            super.keyDownHandler(event);
        }
    }

} 
```

}

只是您需要将类属性 fl.controls.RadioButton 从您的库元素更改为 MyRadioButton：“RadioButton”。（我假设 MyRadioButton 在 fla 附近）

------>编辑

这是另一种不禁用空格键的解决方案。这一次，当用户在空格键 keyup 代码之前进行 anykeydown 时，在 anykeydown 之前运行空格键 keyup。并且焦点从单选按钮中删除，您还可以添加任何其他解决方案，例如如果空格键键状态关闭，请不要让任何键按下。

```
package  {
import flash.events.KeyboardEvent;
import fl.controls.RadioButton;
import flash.ui.Keyboard;
import flash.events.Event;

public class MyRadioButton extends RadioButton{

private var _isSpaceDown:Boolean = false;

    public function MyRadioButton() {
        super();
    }

    override protected function handleChange(event:Event):void {
        if (_isSpaceDown) {
            keyUpHandler(new KeyboardEvent(KeyboardEvent.KEY_UP, true, true, 0, Keyboard.SPACE));
            setMouseState('up');
        }
        super.handleChange(event);
    }

    override protected function keyUpHandler(event:KeyboardEvent):void {
        if(event.keyCode == Keyboard.SPACE){
            if(_isSpaceDown){
                _isSpaceDown = false;
            }else{
                return;  
            }
        }           
        super.keyUpHandler(event);
    }

    override protected function keyDownHandler(event:KeyboardEvent):void {
        if(event.keyCode == Keyboard.SPACE){
            _isSpaceDown = true;                
        }else{
            if(_isSpaceDown){                   
                var e:KeyboardEvent = new KeyboardEvent(KeyboardEvent.KEY_DOWN);
                e.keyCode = Keyboard.SPACE;
                super.keyUpHandler(e);
                _isSpaceDown = false;
            }
        }           
        super.keyDownHandler(event);
    }

} 
```

}

# asp.net-mvc - 将第一个外键编码到 asp 成员表

> ID：12620103
> 
> 赞同：2
> 
> 时间：2012-09-27T11:15:44.807
> 
> 标签：asp.net-mvc, foreign-keys, asp.net-membership, code-first

我有一个使用 CF 创建的表（比如“MyTable”）。此外，我的数据库中有 asp 的 Membership 表，它是与 Users、UserInRoles 和 Roles 表一起自动生成的。这些表只存在于数据库中，而不是作为模型（类）存在于项目中。现在，我需要将“MyTable”中的外键设置为 Membership 表。当然，问题是我的项目中没有“会员”类，所以我不能先用代码设置 FK。我想把我的用户管理交给 asp.net 的信任，所以我不想为此创建自己的表。

如何首先使用代码设置该 FK？

# android - 如何在加载谷歌地图时显示标题栏

> ID：12620104
> 
> 赞同：2
> 
> 时间：2012-09-27T11:15:46.373
> 
> 标签：android, titlebar

谷歌地图已显示，但在加载地图时，标题栏消失了。有没有办法显示标题栏？

```
private void calc_short_Distance() {
        String uri = "http://maps.google.com/maps?saddr=" + currentLatitude+","+currentLongitude+"&daddr="+fixedLatitude+","+fixedLongitude;
        Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
        intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
        //***Title bar displayed upto here and after loading intent it disappear
        startActivity(intent);

    } 
```

清单代码在[这里](http://pastie.org/4828812)，主要活动类在[这里](http://pastie.org/4829043)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:26:32.017

您的标题栏未显示在地图上，因为您将地图作为地图应用程序打开。现在显示地图时，它不再是您的应用程序，而是 Google 的应用程序。如果您想控制地图的显示方式，那么您需要创建自己的活动，`MapView`并使用`MapView`API 绘制路线等。您的伪 XML 可能如下所示：

```
<LinearLayout android:orientation="vertical">
    <!-- 
    Whatever you want at the top
    -->

    <MapView android:layout_width="match_parent" android:layout_height="match_parent" />
</LinearLayout> 
```

然后，您需要通过扩展`MapActivity`并使用此 XML 作为其内容视图来创建您的活动。然后，您可以使用`MapView`API 显示您需要的任何叠加层。您还需要获取用于地图的 API 密钥。查看[Google 的 MapView 教程](https://developers.google.com/maps/documentation/android/hello-mapview)，了解有关如何编写此活动的更多信息。

一旦你有了地图活动，然后使用意图来启动这个地图活动，而不是谷歌地图应用程序。

# c - 结构体和多维数组

> ID：12620108
> 
> 赞同：0
> 
> 时间：2012-09-27T11:15:57.217
> 
> 标签：c, arrays, struct

我试图用 C 来概括一下二维数组（结构）的概念

假设我有以下定义：

```
typedef struct group group;

struct group {
    int members;
    int neighbours;
    char color;
};

#define NUM_CELLS 10 
```

使用以下函数应该将一些数据从单个数组复制到多维数组：

```
void test_mgroup_arr(group clusters[][NUM_CELLS],group tests[NUM_CELLS], int num_groups) {

    int i;
    int j = 0;

    for (i = 0; i < num_groups; ++i)
        clusters[i][j] = tests[i];
} 
```

这被称为：

```
int num_groups = 5;
group clusters[NUM_CELLS][NUM_CELLS];

group tests[NUM_CELLS];
tests[0].members = 101;
tests[0].neighbours = 111;

tests[1].members = 102;
tests[1].neighbours = 112;

tests[2].members = 103;
tests[2].neighbours = 113;

tests[3].members = 104;
tests[3].neighbours = 114;

tests[4] = tests[3];

test_mgroup_arr(clusters, tests, num_groups); 
```

我希望函数中的代码将测试数组中的 5 个项目复制到多维数组中的正确位置。但是，这并没有按预期工作，在某些情况下甚至会出现段错误。

这怎么不正确？将结构从 1dim 数组复制到 2dim 数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:02:57.353

我没有看到您如何传递数组或访问它的问题。该代码实际上看起来正确，并给了我正确的结果。笔记：

```
for(i = 0; i < num_groups, ++i)
   clusters[i][j] = tests[i]; 
```

让我们说地址：

```
clusters[0][0] is 0x0047F7EC
clusters[1][0] is 0x0047F864
clusters[2][0] is 0x0047F8DC

sizeof(group) = 0xC * 0xA (num of groups) = 0x78 
```

所以你可以在这里看到数学运算。j 总是 == 0，那我在做什么呢？clusters+i 的地址为：

```
0x0047F7EC for i=0
0x0047F864 for i=1
0x0047F8DC for i=2 
```

正是你所期望的。当我离开 test_mygroup_arr 时，我得到 clusters[0][0]、clusters[1][0]、clusters[2][0]、clusters[3][0]、clusters[4][0] 的值分别设置为tests[0]、tests[1]、tests[2]、tests[3]、tests[4]中的值。

这就是你想要的对吗？

您是否尝试打印出地址以查看发生了什么？您的代码是否还有其他未显示的内容？我想知道是否还有其他原因导致您的段错误。我假设您使用的是 C99 编译器？

**注意：**我对运行良好的代码的测试只是并且正是您发布的内容。

```
int main()
{
   int num_groups = 5; 
   ...
   test_mgroup_arr(clusters, tests, num_groups); 
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:25:11.287

实际上要将数组作为参数传递，您必须在它的第一个元素上传递指针，这是编译器所期望的，所以而不是

`void test_mgroup_arr(group clusters[][NUM_CELLS],group tests[NUM_CELLS], int num_groups)` 采用

```
void test_mgroup_arr(group (*)[NUM_CELLS],group tests[NUM_CELLS], int num_groups) 
```

# vb.net - 对包含数字和字符串的 DataGridView 字符串列进行排序

> ID：12620111
> 
> 赞同：0
> 
> 时间：2012-09-27T11:16:07.760
> 
> 标签：vb.net

我有一个显示文件大小的绑定 DataGridView：

133 kb
20 Mb
43.11 Mb
2.23 Gb

ETC

我通常会确保数据源（此处为数据表）中的列类型是十进制的，但该值包含阻止这种情况的大小指定。如何在遵守数据单元的同时对它们进行数字排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:58:50.990

这就是我现在所拥有的。

```
<!-- language: lang-vb-->
     Dim d As New DataTable()

    Dim c As New DataColumn("Size")
    c.DataType = GetType(Integer)

    Dim c2 As New DataColumn("SizeInUnits")
    c2.DataType = GetType(String)

    d.Columns.Add(c)
    d.Columns.Add(c2)

    Dim strFileSize As String = ""
    Dim di As New IO.DirectoryInfo("C:\temp")
    Dim aryFi As IO.FileInfo() = di.GetFiles("*.*")

    For Each fi As IO.FileInfo In aryFi
        Dim r As DataRow = d.NewRow()
        r(0) = fi.Length
        r(1) = GetSizeInUnits(fi.Length)
        d.Rows.Add(r)
    Next

    d.DefaultView.Sort = "Size ASC"
    DataGridView1.DataSource = d
    DataGridView1.Columns(0).Visible = False

    'New Code Here, Don't Auto Sort. We will sort the data ourselves in event
    'DataGridView1_ColumnHeaderMouseClick. You will have to do some additional work
    'to determin the sort direction. i.e. If Current Sort Order is ASC, the sort DESC 
    'and vice versa
    DataGridView1.Columns(1).SortMode = DataGridViewColumnSortMode.Programmatic

     Private Sub DataGridView1_ColumnHeaderMouseClick(ByVal sender As System.Object, ByVal e As        System.Windows.Forms.DataGridViewCellMouseEventArgs) Handles DataGridView1.ColumnHeaderMouseClick
            DataGridView1.Sort(DataGridView1.Columns(0), System.ComponentModel.ListSortDirection.Descending)
     End Sub

    Private Function GetSizeInUnits(ByVal size As Double) As String
    Dim sizeKB As String = "KB"
    Dim sizeMB As String = "MB"
    Dim sizeGB As String = "GB"

    If (size < 1000000) Then
        Return size / 1000 & sizeKB
    End If

    If (size > 1000000 AndAlso size < 1000000000) Then
        Return size / 1000000 & sizeMB
    End If

    If (size > 1000000000) Then
        Return size / 1000000000 & sizeGB
    End If

    End Function 
```

# pdf - 有助于学习官方 PDF 规范的示例 PDF 语言代码？

> ID：12620113
> 
> 赞同：-1
> 
> 时间：2012-09-27T11:16:26.413
> 
> 标签：pdf, pdf-generation

我正在尝试学习 PDF 文件格式。

为此，我下载了 Adob​​e 的 PDF 规范文件，该文件非常庞大。

因此，为了帮助我研究 PDF 的细节，我想通过并行查看一些真实世界的 PDF 文件来遵循它的抽象解释。

例如，一个想法是创建一个 PDF 文件（使用 LaTeX），它只有一页，内容甚至只有一个字符，`a`.

但是当我在十六进制编辑器（或其他可以显示内部 PDF 结构的工具）中打开这个 PDF 文件时，这个 PDF 中有很多二进制或压缩内容。有关我所看到的示例，请查看下面的屏幕截图：

![十六进制编辑器打开我的 PDF 的屏幕截图](../Images/3e67fcdbb59e4c2a2f39050bf3a32387.png)

我根本无法确定这个二进制文件的哪一部分代表了我`a`在这个 PDF 中的角色。

到目前为止，我尝试过的所有真实世界的 PDF 文件都会发生同样的情况。我根本找不到任何包含工作示例代码的 PDF 文件来帮助我理解通用 PDF 语言规范。

*   我希望其他人向我解释：有没有一种实用的方法来研究 PDF 规范，同时用真实的 PDF 文件验证它的点点滴滴？

*   我想知道：PDF 程序员常用哪些软件工具可以帮助像我这样的新手开发人员剖析和解压缩现有的二进制 PDF 文件，以便可以使用简单的文本编辑器研究其源代码？[（注意：我不是在寻求*建议*。根据 SO FAQ，我只想知道这些工具是否存在，以及它们有哪些名称。）]

*   是否有不包含二进制和/或压缩内容的免费 PDF 文件资源？或者我如何创建自己的示例文件？

*   是否有（最好是免费的）PDF 编辑器/解析器可以可视化 + 剖析 PDF 文件的原始二进制数据并公开它们的结构？

我只需要第一个钩子。如果您愿意的话，是通往真实世界 PDF 文件丛林中狭窄路径的入口点，然后我可以沿着这条路走……同时使用名为“PDF 规范”的丛林探险者的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:07:52.680

[iText](http://www.itextpdf.com/) （用于创建和操作 PDF 的 Java/C# 库）的创建者发布了一个名为[RUPS](http://sourceforge.net/projects/itextrups/)的工具。

从 sourceforge 页面：

> RUPS 是阅读和更新 PDF 语法的缩写。RUPS 是基于 iText® 构建的工具，可让您查看 PDF 文档内部并浏览不同的 PDF 对象和内容流。（尚无法更新 PDF。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T13:41:58.177

我建议使用[PDF Vole](http://java.net/projects/pdfvole)（基于 iText 的工具，类似于[RUPS](https://stackoverflow.com/a/12621014/501196)）查看一些文件。

PDF Vole 和 RUPS 都允许您浏览 PDF 文件的结构，检查每个对象上的条目，解压缩压缩流，在需要时解密文件，查看页面和注释的内容，并追踪它们之间的关系文件中的对象。

例如这个文件：
![PDF 样本](../Images/60bf5712483b2231c603a41852b573ee.png)

在 PDF Vole 中看起来像这样：
![PDF田鼠捕捉](../Images/fa1a219ec87347865e72c5cbfaceeef7.png)

您还可以查看 iText 本身的类层次结构（与 PDF 规范几乎是一对一的）以及解释它的书[iText in Action](http://www.manning.com/lowagie/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-27T21:55:38.313

我帮助自己学习 PDF 语法的方式是这样的：

*   寻找可以解压缩 PDF（解压缩内部流）的工具。

*   发现[**qpdf**](http://qpdf.sf.net/)，Jay Birkenbilt 的命令行工具被描述为：*“对 PDF 文件进行结构性、内容保留的转换”*。

*   例行运行`qpdf --qdf input.pdf decompressed-input.pdf`。

*   `decompressed-input.pdf`在文本编辑器中打开新创建的。

该`--qdf`工具的模式以一种非常有用的方式转换 PDF 的二进制和 ASCII 元素，而不会改变它们的视觉页面外观（而且速度非常快）：

1.  解压之前压缩过的对象（暴露页面元素绘制操作的PDF语言源代码）。

2.  同时展开对象流 ( `ObjStrm`)。

3.  规范化数组、字符串等的表示。

4.  重新编号对象，以便它们从文件开始`1 0 obj`，然后在文件中按升序显示它们。

5.  修复 b0rken`xref`条目。

6.  在原始文件中添加包含对象原始身份的注释。

7.  为每个页面添加评论。

8.  ……还有更多。

在普通文本编辑器中查看这些（现在主要是 ASCII）文件比试图找出原始二进制 PDF 更容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T11:24:14.767

如果您尝试通过代码生成 PDF 文件，那么此[CodeProject 源代码](http://www.codeproject.com/Articles/7627/PDF-Library-for-creating-PDF-with-tables-and-text)可能会有所帮助。

与 Adob​​e 规范一起的代码应该可以帮助您前进。我不认为这里有很多捷径。理解 PostScript 需要一些学习！

编辑：并且看到 PDF 是压缩的 PostScript，像[RoPS](http://www.rops.org/)这样的东西也可能很方便。

# asp.net-mvc-3 - 带约束的单元测试 ASP MVC 路由

> ID：12620121
> 
> 赞同：1
> 
> 时间：2012-09-27T11:16:59.763
> 
> 标签：asp.net-mvc-3, unit-testing, routing, mvccontrib

我有一条这样定义的路线：

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional, area = "" }, // Parameter defaults
            new { home = new HomePageConstraint() }
        );

public class HomePageConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        return !httpContext.Request.RawUrl.StartsWith("/home", StringComparison.InvariantCultureIgnoreCase);
    }
} 
```

我正在尝试像这样测试它：

```
[Test]
public void Home_Load_Homepage()
{
    "~/".ShouldMapTo<HomeController>(x => x.Index());
} 
```

我遇到的问题`httpContext`是 null ，所以测试失败。如何将 http 上下文注入约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:29:03.330

最后我这样做了：

```
var context = new FakeHttpContext("~/");
var fakeRequest = new FakeRequest("~/", new Uri("http://localhost/"), new Uri("http://localhost/"));
context.SetRequest(fakeRequest);

var route = RouteTable.Routes.GetRouteData(context);

route.ShouldMapTo<HomeController>(x => x.Index()); 
```

# security - 通过 GET 参数进行管理员访问

> ID：12620124
> 
> 赞同：0
> 
> 时间：2012-09-27T11:17:09.460
> 
> 标签：security, login

我正在开发一个非常简单的网站。我通常会做一个完整的管理员来编辑网站，但这次我考虑的是就地编辑 (contenteditable="true")。

为了简化用户的登录，我只想给他一个密码，他可以在地址栏中输入密码来登录，而不是通常的登录表单。所以他会访问 domain.com/page?p=the_password 然后我会将他的数据存储在一个会话中并给他一个带有会话 ID（通常的东西）的 cookie 并将他重定向到 domain.com/page。

这有多安全/不安全？我在 PHP 中执行此操作，但我想它适用于任何服务器端语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:33:54.857

您的登录想法是不安全的：请求的 URL 最终会出现在 Web 服务器日志和其他地方，这意味着密码最终会出现在 Web 服务器日志中。

您的“contentedittable”想法可能不安全，但方式更微妙。它也（再次，可能）不符合 HTTP 规范。

`GET`请求应该始终是幂等的。这是因为用户代理（浏览器、缓存等）可以在`GET`未经用户同意的情况下多次重新发出相同的请求。浏览器可能会这样做的一个原因是因为用户按下了后退按钮并且前一页不再在缓存中。如果请求不是幂等的，那么第二次发出它可能会产生意想不到的副作用。

听起来您的“就地编辑”功能可能并不总是幂等的。有许多种简单的编辑实际上是幂等的，所以我可能是错的，但只要你有能力通过这种界面将新项目添加到列表中，它就不是了。

非幂等请求应通过 、 和 等`PUT`方法`POST`发出`DELETE`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:04:21.643

添加到@Celada 答案。URL 将存储在浏览器历史记录或网络缓存/代理中，因此密码可能会以这种方式泄漏。此外，以其他人身份登录随机 Internet 用户（登录跨站点请求伪造攻击）也是微不足道的，例如拥有一个带有指向 domain.com/page?p=the_password 的 img 元素的网站

你不会写这个，但是一旦用户登录，你的方案需要防止跨站点请求伪造（所以随机页面不能对登录用户的行为执行管理操作）。

# sql-server - 创建聚集索引是否会破坏我的应用程序

> ID：12620125
> 
> 赞同：1
> 
> 时间：2012-09-27T11:17:27.213
> 
> 标签：sql-server, database-tuning-advisor

我正在使用 SQL Server 2008 R2 数据库调优顾问来调优一个由第 3 方 ERP 系统使用的数据库。目前，这个 ERP 应用程序在用户执行的特定操作中确实存在一些严重的性能问题。

在一天中的繁忙时间，我使用 SQL Server 配置文件跟踪他们的生产数据库几个小时。昨晚我让数据库调优顾问仔细研究，它提出了很多建议，并承诺将性能提升 89%！

所以现在，我已经明白，从建议中我应该首先创建推荐的聚集索引和唯一索引，然后重做跟踪和调整。

是否有可能通过创建聚集索引来破坏应用程序功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-05T08:24:35.637

在更新和插入新记录的情况下，聚集索引可能会破坏应用程序的性能。聚集索引告诉 SQL 按照聚集索引中定义的顺序放置记录。

如果新记录会破坏此顺序，SQL 必须移动表中的许多记录以确保每个新记录的聚集索引顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:52:54.413

> 是否有可能通过创建聚集索引来破坏应用程序功能？

不，从功能的角度来看，创建 CLUSTERED INDEX / UNIQUE INDEX 肯定不会破坏您的应用程序，因为这些在检索索引而不是执行表扫描的检索过程中会很有帮助。它们不会对数据应如何存储在表中施加任何约束，例如完整性约束（PRIMARY KEY、UNIQUE KEY、FOREIGN KEY 等）。

# hadoop - 我在哪里可以看到 Hadoop Reporter 显示的内容？

> ID：12620128
> 
> 赞同：1
> 
> 时间：2012-09-27T11:17:49.703
> 
> 标签：hadoop, mapreduce

我正在使用 Hadoop 来运行作业。我一直无法弄清楚“Reporter”（在映射器和减速器中）在哪里显示我试图使用reporter.setStatus（“info”）显示的内容。

请帮忙。

谢谢你，莫辛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:23:03.317

可以通过 Jobtracker Web 界面查看此信息。（默认在端口 50030 上）

此状态行显示在正在运行的任务表中，可以通过单击正在运行的映射器/减速器的数量来访问，

![工作现状](../Images/61784b8444ecbd3c8174c313dbb10ef4.png) ![正在运行的任务列表](../Images/a422ebbe246114181b5e9e7f8178e12f.png)

# ruby-on-rails - 您可以将一个类传递给 Rails 日期时间选择助手吗？

> ID：12620129
> 
> 赞同：2
> 
> 时间：2012-09-27T11:17:51.683
> 
> 标签：ruby-on-rails

尝试通过传入这样的类来格式化 Datetime 选择助手并没有奏效。起初我认为 Bootstrap 可能是错误的，但在查看源代码后，'span2' 不存在。

```
<%= f.datetime_select :arrival_nor_tendered, class: "span2" %> 
```

这似乎是一种令人头疼的方式，但我可能是错的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T20:39:11.420

试试这个：

```
<%= f.datetime_select :arrival_nor_tendered, {}, { class: "span2" } %> 
```

最后一个参数是`html_options`，但它前面有一个哈希参数，ruby 可能会误解这两者。

# rest - Backbone.js & REST API 资源关系&交互

> ID：12620133
> 
> 赞同：2
> 
> 时间：2012-09-27T11:18:07.420
> 
> 标签：rest, backbone.js, relationship

我有一个由 Backbone.js 提供支持的单页 Web 应用程序使用的小型 REST API

API 提供了两种资源类型，因此 Backbone 应用程序使用。这些是文章和评论。这两个资源具有不同的端点，并且每篇文章都有一个链接到该项目的所有评论的位置。

我面临的问题是，在我的网络应用程序的文章列表中，我希望能够显示每篇文章的评论数。鉴于只有在我还获得评论列表的情况下才有可能，在当前设置中，将要求我发出一个 API 请求以获取初始文章列表，并为每篇文章发出另一个请求，以便能够计算数量的评论。例如，如果有 100 篇文章，这将成为一个问题，因此需要 101 个 HTTP 请求来填充一个视图。

我现在能想到的解决方案是：

**1\. 像这样在初始文章**请求中包含评论数据

```
{
  {
    "id": 1,
    "name": "Article 1",
    ...
    "comments": {
      {
        "id": 1,
        "text": "some comment"
      },
      {
        "id": 2,
        "text": "some comment"
      },
      ...
    }
  },
} 
```

这种情况下的问题是：如何将“评论”解析为单独的评论集合而不将其包含在文章模型中？

**2.在文章响应**中包含一些元数据，如下所示：****

 **```
{
  {
    "id": 1,
    "name": "Article 1",
    ...
    "comments": 13
  },
} 
```

引发问题的选项：我应该如何处理模型的解析，以便一方面元信息可用，另一方面，“评论”属性不是 Backbone 会尝试执行更新的属性？

我觉得**可能有另一种解决方案，符合 REST 哲学**，我缺少这个，所以如果您有任何其他建议，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:03:42.223

我认为你最好的选择是选择第二个选项，在你的文章模型中包含每篇文章的评论数量。

> 引发问题的选项：我应该如何处理模型的解析，以便一方面元信息可用，另一方面，“评论”属性不是 Backbone 会尝试执行更新的属性？

不知道你关心的是什么。为什么你会担心评论属性会被更新？

我想不出任何其他“RESTy”方式来实现您想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:06:24.750

我建议使用备选方案 2 并让服务器返回文章属性的*子集*，这些属性在处理文章集合资源时被认为对应用程序有用（可能在 处可访问`/articles`）。

完整的文章成员资源及其所有评论（无论它们是否存储在后端的单独表中）将在`/articles/:id`) 可用。

从 Backbone.js 的角度来看，您可能希望将集合资源放在 a 中，例如，`ArticleCollection`它将每个成员（当前具有属性的子集）转换为`Article`模型。

当用户选择完整查看一篇文章时，您将其拉出`ArticleCollection`并调用`fetch`以完整填充它。

关于如何处理集合资源 ( `/articles`) 中包含的额外/虚拟属性，例如评论计数和可能的其他有用聚合，我看到了一些替代方案：

1.  `Article#initialize`您可以从中提取这些内容`attributes` 并将它们作为元数据存储在文章中。这样内置 `Backbone.Model#toJSON`将不会看到它们。
2.  将它们保留在`attributes`每个模型的部分中，并在“序列化”时覆盖 `Backbone.Model#toJSON`以排除它们`Article`。

在替代方案 1 中，`Article#commentCount()`帮助器可以返回 `this._commentCount || this.get('comments').length`以使其在部分和完全加载的文章上工作。

对于完全加载的`Article`情况，您可能无论如何都希望将嵌套`comments`数组转换为完整的数组并将其`CommentCollection`存储在其中，`this._comments`因此我认为让您的模型直接在模型实例上存储其他内容并不罕见，在其`attributes`散列之外.**

# python - 估计Affine3D opencv 2.4 CV_ARE_SIZES_EQ(m1, m2) && CV_ARE_SIZES_EQ(m1, mask)

> ID：12620141
> 
> 赞同：1
> 
> 时间：2012-09-27T11:18:22.300
> 
> 标签：python, opencv

我正在尝试使用`cv2.estimateAffine3D()`from (opencv 2.4.2) 函数来估计到 3D 点集之间的仿射 3D 变换。

这是我的代码：

```
def computeAffine3d():
    # Init src and dst points to 0 
    src_points = cv2.cv.CreateMat(1, 4, cv2.cv.CV_32FC3)
    dst_points = cv2.cv.CreateMat(1, 4, cv2.cv.CV_32FC3)
    cv2.cv.Zero(src_points)
    cv2.cv.Zero(dst_points)

    # Convert cv Mat to numpy array
    src_points = np.array( src_points )
    dst_points = np.array( dst_points )

    # Set src_points to (0,0,0), (1,0,0), (0,1,0) and (0,0,1)
    # Set dst_points to (1,0,0), (2,0,0), (1,1,0) and (1,0,1) 
    src_points[0][1][0] = 1.0
    src_points[0][2][1] = 1.0
    src_points[0][3][2] = 1.0 
    dst_points[0][0][0] = 1.0
    dst_points[0][1][0] = 2.0
    dst_points[0][2][0] = 1.0
    dst_points[0][2][1] = 1.0
    dst_points[0][3][0] = 1.0
    dst_points[0][3][2] = 1.0

    # Compute Affine 3D tranformation
    ok_flag, H, status1 = cv2.estimateAffine3D(src_points, dst_points)
    print ok_flag, ', ', H, ', ', status1 
```

执行这段代码后，我收到以下错误：

```
cOpenCV Error: Assertion failed (CV_ARE_SIZES_EQ(m1, m2) && CV_ARE_SIZES_EQ(m1, mask)) in runRANSAC, file /tmp/buildd/ros-fuerte-opencv2-2.4.2-0precise-20120908-1632/modules/calib3d/src/modelest.cpp, line 122
Traceback (most recent call last):
  File "./test_affine_estimation.py", line 33, in <module>
    computeAffine3d()
  File "./test_affine_estimation.py", line 25, in computeAffine3d
    ok_flag, H, status1 = cv2.estimateAffine3D(src_points, dst_points)
cv2.error: /tmp/buildd/ros-fuerte-opencv2-2.4.2-0precise-20120908-1632/modules/calib3d/src/modelest.cpp:122: error: (-215) CV_ARE_SIZES_EQ(m1, m2) && CV_ARE_SIZES_EQ(m1, mask) in function runRANSAC 
```

任何想法？谢谢！

# asp.net-mvc-3 - 展开其他行时如何关闭其他展开的行

> ID：12620149
> 
> 赞同：1
> 
> 时间：2012-09-27T11:18:52.150
> 
> 标签：asp.net-mvc-3, jqgrid, jqgrid-asp.net

我正在研究 ASP.NET MVC 中的 Jqgrid。

我已经设法为子网格进行服务器端分页和排序。

**设想**

我有一个行的集合，每行都有一个打开的子网格选项，我点击“+”展开第一行子网格首先展开，现在我点击“+”展开第三行。

在这里，我希望第一行的子网格折叠。

**简而言之：这意味着只有行的子网格应该保持扩展。**

我不知道该怎么做。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:37:16.773

您可以创建具有相同类 + 类的所有扩展器，这些扩展器将确定是否扩展它的天气。在展开器单击时，您将触发事件，该事件将从具有展开器类并附加折叠的元素中删除展开和折叠的类，并且只有单击的展开器才会获得展开的类。我将发布示例

```
<div class="expander collapsed">
    <div class="expander-title" onclick="$('expander').removeClass('expanded collapsed').addClass('collapsed'); $(this).removeClass('collapsed').addClass('expanded')">
       title here
    </div>
    <div class="content">
       content here
    </div>
</div> 
```

CSS：

```
.expanded > .content {
    display: block;
}

.collapsed > .content {
    display: none;
} 
```

这是一个扩展器

# objective-c - 测试按钮标题的正确公式是什么？

> ID：12620151
> 
> 赞同：0
> 
> 时间：2012-09-27T11:18:57.280
> 
> 标签：objective-c, ios, ios4

我知道这听起来很奇怪，但我的项目是在 iPhone 中制作**TIC TAC TOE** ，我想测试按钮文本是否等于**X**

我试图输入这个公式，但它失败了，我知道计算机没有读取“X”，因为我将它设置为 NULL 并运行它，

```
if ((([button1.titleLabel.text stringByAppendingFormat:@" " ]   && [button2.titleLabel.text stringByAppendingFormat:@" " ]
&& [button3.titleLabel.text stringByAppendingFormat:@" " ]  )) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:04:25.623

`randomButton`的 titleLabel 是一个字符串，所以你可以使用`isEqualToString:`

```
if ([randomButton.titleLabel isEqualToString:@""]){
//do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:27:12.990

电脑不能，但`iPhone`可以！:)

要比较`UIButton`您应该使用的标题文本`isEqualToString:`

```
if([yourButton.titleLabel.text isEqualToString:@"X"])
{
    //Do something ...
} 
```

PS 计算机或任何廉价编程中，它只能理解[`binary-language`](http://en.wikipedia.org/wiki/Binary_code)（有时称为`machine-language`）由`0 & 1`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:24:34.100

像这样检查：

```
if(button1.titleLabel.text isEqualToString:@"X"])
{ //YES
  //do something
}
else
{ //NO
  //do something
} 
```

# python - 如何在闪存盘上创建 virtualenv

> ID：12620154
> 
> 赞同：1
> 
> 时间：2012-09-27T11:19:17.530
> 
> 标签：python, django, virtualenv

如何？我有一个错误：

```
wolf@wolf-pc:/media/C47D-5F53$ sudo virtualenv django
New python executable in django/bin/python
ERROR: The executable django/bin/python could not be run: [Errno 13] Permission denied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:12:20.933

我曾经也有过一样的问题。我尝试在我的主文件夹中创建一个 virtualenv 并且效果很好，但是当我尝试在不同的分区上创建一个时出现该错误。

所以要解决你的问题，要么尝试不同的位置，要么看看东西是如何安装的。

如果您采用后一种方法，这将有所帮助：

[virtualenv python 可执行文件（lubuntu-12.10）的奇怪权限问题](https://stackoverflow.com/questions/14759549/strange-permissions-problems-for-virtualenv-python-executable-lubuntu-12-10)

Steve K 也可能是正确的，我不知道... Virtualenv 确实在 Windows 上工作。如果您已经这样做了，请分享您最终是如何解决问题的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:54:45.890

您不需要 sudo 来创建 virtualenv。也许这是造成问题的原因？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:11:47.493

FAT32 不处理这些类型的权限，您的密钥应[使用 ext3 重新格式化](http://johnbokma.com/mexit/2010/02/17/)。

# xcode - CSS和图像没有加载？

> ID：12620155
> 
> 赞同：0
> 
> 时间：2012-09-27T11:19:18.327
> 
> 标签：xcode, hosting

我的根目录中有一个文件夹，`candyfive`它有`html website`一个正常工作的文件夹，并且一个域指向它，我在 candyfive 中有一个名为“portal”的子文件夹。它是网站的管理面板，拥有自己的 CSS 和图像。

问题是 candyfive 文件夹中的站点正在正确加载，但门户中的站点未加载任何图像或 css。

我的门户管理站点中的 css 链接是

```
<link href="css/templatemo_style.css" rel="stylesheet" type="text/css" /> 
```

我应该在此代码中添加什么以使其在子文件夹中工作？

这是网站结构：

```
candyfive/portal/index.php
candyfive/index.html       - is working fine
candyfive/portal/index.php - css and images not loading ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T02:41:11.060

利用

```
<link href="../css/templatemo_style.css" rel="stylesheet" type="text/css" /> 
```

代替：

```
<link href="css/templatemo_style.css" rel="stylesheet" type="text/css" /> 
```

`..`用于在目录树结构中上..

# jquery - 函数 get(String, any, Function) 对于函数 jquery 类型未定义

> ID：12620157
> 
> 赞同：0
> 
> 时间：2012-09-27T11:19:24.880
> 
> 标签：jquery, get

我不明白我的代码有什么问题，因为我在许多教程中都看到了同样的问题。请帮助....这是代码：

```
$(document).ready(function() {
$('#div').click(function() {
type: 'POST';
String url= 'fivepluscms/client/CMSGallery.jsp';
String data = $('a').attr('id');
String equalPosition = data.indexOf('='); //Get the position of '='
String number = data.substring(equalPosition + 1);
$.get(url, number, function(raspuns){
  $('#div class="ngg-gallery-thumbnail"').html(raspuns);
});
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:28:36.480

尝试这个：

```
$.get(url, { number: number }, function(raspuns){
  $('.ngg-gallery-thumbnail').html(raspuns);
}); 
```

您的问题是第二个变量在需要时不是数组。你可以在这里看到这个：http: [//api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:25:59.967

尝试这个..

```
$(document).ready(function() {
         $('#div').click(function() {

           var url= 'fivepluscms/client/CMSGallery.jsp';
           var data = $('a').attr('id'); //means the id of the first 'a' //probably incorrect
           var equalPosition = data.indexOf('='); //Get the position of '='
           var number = data.substring(equalPosition + 1);

           $.get(url, number, function(raspuns){
              $('div.ngg-gallery-thumbnail').html(raspuns);
    });
    });
    }); 
```

# java - 保存调整大小的图像java

> ID：12620158
> 
> 赞同：6
> 
> 时间：2012-09-27T11:19:40.067
> 
> 标签：java, image, swing, javax.imageio, imageicon

如何将调整大小的图像保存到特定文件夹？

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    ImgChooser ic = new ImgChooser();
    ImageIcon icon = new ImageIcon(me,"id pic");
    Image img1 = icon.getImage();
    Image img2 = img1.getScaledInstance(105, 105, 0);
    icon.setImage(img2);
    jLabel1.setIcon(icon);
} 
```

第一个代码是我获取图像并调整其大小的地方。然后我希望将调整大小的图像保存在另一个文件夹中。提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T21:06:56.737

[`ImageIO.write(...)`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html) 像其他人已经说过的那样使用（给他们+1），在这里添加一个例子：

```
public static void main(String[] args) {

    try {

        BufferedImage originalImage = ImageIO.read(new File("c:\\test.jpg"));//change path to where file is located
        int type = originalImage.getType() == 0 ? BufferedImage.TYPE_INT_ARGB : originalImage.getType();

        BufferedImage resizeImageJpg = resizeImage(originalImage, type, 100, 100);
        ImageIO.write(resizeImageJpg, "jpg", new File("c:\\images\\testresized.jpg")); //change path where you want it saved

    } catch (IOException e) {
        System.out.println(e.getMessage());
    }

}

private static BufferedImage resizeImage(BufferedImage originalImage, int type, int IMG_WIDTH, int IMG_HEIGHT) {
    BufferedImage resizedImage = new BufferedImage(IMG_WIDTH, IMG_HEIGHT, type);
    Graphics2D g = resizedImage.createGraphics();
    g.drawImage(originalImage, 0, 0, IMG_WIDTH, IMG_HEIGHT, null);
    g.dispose();

    return resizedImage;
} 
```

**参考：**

*   [http://www.mkyong.com/java/how-to-resize-an-image-in-java/](http://www.mkyong.com/java/how-to-resize-an-image-in-java/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T12:47:46.203

试试这个...

使用`ImageIO.write()`方法...

`static boolean ImageIO.write(RenderedImage im, String formatName, File output) throws IOException`

**例如：**

```
try {

    // retrieve image

    BufferedImage bi = getMyImage();
    File outputfile = new File("saved.png");
    ImageIO.write(bi, "png", outputfile);

} catch (IOException e) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T12:31:03.203

首先将您的图像转换为a `BufferedImage`，然后用于`ImageIO`保存图像：

```
BufferedImage image = new BufferedImage(img2.getWidth(null), img2.getHeight(null), BufferedImage.TYPE_4BYTE_ABGR);
Graphics2D g2 = image.createGraphics();
g2.drawImage(img2, 0, 0, null);
g2.dispose();
ImageIO.write(image, formatName, outputFile); 
```

格式名称是`String`like`"jpg"`或and是要保存图像的`"png"`位置。`"gif"``outputFile``File`

另请注意，如果您要保存不支持 alpha 级别（透明度）的图像，则传递给`BufferedImage`构造函数的第三个参数应该是 3 字节图像，例如：`BufferedImage.TYPE_3BYTE_BGR`

# cmd - cmd中的新空行

> ID：12620162
> 
> 赞同：0
> 
> 时间：2012-09-27T11:19:46.733
> 
> 标签：cmd

我打开cmd时默认值为:: **C:>Users\otariki>**

当我在键盘上按 ENTER 时，会写下一个新行 **C:>Users\otariki>**

在新行中，我不需要**C:>Users\otariki> string**。我需要一个空行。请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:22:45.250

这是“PROMPT”变量，当它默认为您所拥有的那个时，您不能将其设置为空。. 您可以拥有的最近的是一个空格.. 但是.. 提示很有用，表示命令已完成并且不只是等待，以及通常告诉你你在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:05:24.617

你可以输入

```
echo off 
```

进入CMD窗口，所以它根本不会提示你，但你仍然可以输入命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:34:05.753

你可以用`PROMPT $H`得到你想要的外观。

从第一个位置开始，每一行都是空的。

但实际上每一行都会以`<backspace><space><backspace>`

# java - 在远程 Linux 机器上编辑文件？

> ID：12620165
> 
> 赞同：0
> 
> 时间：2012-09-27T11:19:53.927
> 
> 标签：java, linux

我正在为 Linux RHEL 5 机器编写 Java 代码。要求是当我坐在机器 A 上时，我应该能够在远程机器 B 上编辑一些文件。机器 A 和 B 都是 RHEL。现在有以下可能性。任何人都可以请建议哪个更好，或者是否有任何其他方式：

1.  编写一个 shell 脚本来执行此操作。从 A 执行 shell 脚本，以便在 B 中发生更改

2.  在 A 上编写一个 java 代码，可以登录到 B 并编辑 B 中的文件。

3.  编写一个 java 文件编辑实用程序（模式匹配的东西）。通过另一个 java 代码将此 util 推送到 B 上。在 B 中执行文件编辑 util。不知何故，在 B 中执行 util 的触发器也应该由 A 给出

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:33:13.397

Eclipse 远程系统资源管理器允许您这样做：http: [//www.eclipse.org/tm/](http://www.eclipse.org/tm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:50:38.077

这取决于您的需求，但我认为使用 bash 脚本和一些 linux 工具（例如 nc、telnet 或 ssh）更容易、更快捷。

使用 ssh 很简单：

```
ssh user@remote mkdir /tmp/new_directory 
```

我希望它有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:34:54.527

您也可以使用 java 库来做到这一点：

[http://www.jcraft.com/jsch/](http://www.jcraft.com/jsch/)

查看示例链接。

# android - 方法 add(String) 未定义 String 类型（JSONObject 2nd Array）

> ID：12620166
> 
> 赞同：0
> 
> 时间：2012-09-27T11:19:54.090
> 
> 标签：android, mysql, arrays, json, add

在使用 MySQL 查询从 PHP 文件中接收数据后，我想用数据填充两个数组。第一个数组有效：

```
results.add((String) json_data.get("product") + "\n" + json_data.get("owner")); 
```

但是当我添加第二个数组时：

```
mysql_id.add((String) json_data.get("id")); 
```

Eclipse 显示错误：

> 对于 String 类型，方法 add(String) 未定义

没有可用的建议，我不知道问题所在。我到处都有“mysql_id”声明为“结果”，但它不起作用！

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:23:54.800

你必须像这样使用

```
mysql_id.add(getString("id")); 
```

# ios5 - 在 ios 中使用苹果推送通知服务接收推送通知时出错

> ID：12620174
> 
> 赞同：0
> 
> 时间：2012-09-27T11:20:11.553
> 
> 标签：ios5, push-notification, apple-push-notifications

我开发了一个使用 appcelerator 云服务和 APN 的应用程序，一切正常我能够注册设备以进行推送通知，甚至能够成功发送通知，但是在通知的接收路径中我收到错误，就像`UILocalNotification keyed archive array contains invalid classes: *** -[NSKeyedUnarchiver decodeObjectForKey:]: data to unarchive contains class (NSDecimalNumberPlaceholder) which has not been allowed. Ignoring.`
我无法追踪这个错误试图说什么，请帮帮我。

谢谢普什帕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:00:55.560

刚刚也遇到了这个。当您将 APNS 有效负载中的徽章设置为负数时，这似乎一直发生在我身上。如果您在服务器上添加检查以确保徽章始终设置为 >=0，请查看这是否会消失。

希望有帮助。

干杯，阿舒

# java - 比较java中的字符串并删除它们相同的字符串部分

> ID：12620178
> 
> 赞同：7
> 
> 时间：2012-09-27T11:20:15.640
> 
> 标签：java, algorithm

我有两个字符串：

```
s1="MICROSOFT"
s2="APPLESOFT" 
```

我需要比较字符串并从第二个字符串中删除重复的部分（总是接近结尾）。所以我应该得到“MICROSOFT”和“APPLE”作为输出。

我已经逐个字符地比较了两个字符串。

```
 String s1 = "MICROSOFT";
               String s2 = "APPLESOFT";

               for(int j=0; j<s1.length(); j++)
               {
                   char c1 = s1.charAt(j);
                   char c2 = s2.charAt(j);

                   if(c1==c2)
                       System.out.println("Match found!!!");
                   else
                       System.out.println("No match found!");
               } 
```

它应该检查字符串，如果两个字符串在字符串结尾之前具有相同的字符，那么我需要从第二个字符串中删除冗余部分，在这种情况下是 SOFT。但我想不出如何从这里开始。

可以有更多的重复......但我们必须只删除那些连续相同的。如果我有 APPWWSOFT 和 APPLESOFT，我应该在第二个字符串中再次获得 APPLE，因为我们之间的 LE 与 WW 不同

你们能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:27:10.207

搜索并阅读**最长公共**子序列，您可以找到高效的算法来找出两个输入字符串的 LCS。找到输入字符串的 LCS 后，很容易对输入进行操作。例如，在您的情况下，LCS 算法会发现“SOFT”作为这两个字符串的 LCS，然后您可以检查 LCS 是否在第二个输入的最后部分，然后轻松将其删除。我希望这个想法有所帮助。

Java 中的 LCS 代码示例在这里，试试吧：http: [//introcs.cs.princeton.edu/java/96optimization/LCS.java.html](http://introcs.cs.princeton.edu/java/96optimization/LCS.java.html)

示例场景（伪代码）：

```
input1: "MISROSOFT";
input2: "APPLESOFT";

execute LCS(input1, input2);
store the result in lcs, now lcs = "SOFT";

iterate over the characters of input2,
if a character exists in lcs then remove it from input2. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:37:14.583

据我了解，您想从两个字符串中删除任何相同的字符。相同的意思是：相同的位置和相同的字符（代码）。我认为以下线性复杂度解决方案是最简单的：

```
 StringBuilder sb1 = new StringBuilder();
 StringBuilder sb2 = new StringBuilder(); //if you want to remove the identical char 
                                          //only from one string you don't need the 2nd sb
 char c;
 for(int i = 0; i<Math.min(s1.length,s2.length);i++){
     if((c = s1.charAt(i)) != s2.charAt(i)){
           sb1.append(c);
     }
 }
 return sb1.toString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T11:39:38.970

试试这个算法 - 创建第一个字符串的字符序列并在第二个字符串中找到它。

性能 -
平均情况 = (s1.length()-1)sq

```
public class SeqFind {
    public static String searchReplace(String s1,String s2) {
        String s3;
        boolean brk=false;
        for(int j=s1.length();j>0&&!brk;j--){
        for (int i = j-4; i > 0; i--) {
            String string = s1.substring( i,j);
            if(s2.contains(string)){
                System.out.println(s2+" - "+string+" "+s2.replace( string,""));
                brk=true;
                break;
            }
        }
    }
        return s3;      
    }
    public static void main(String[] args) {
        String s1 = "MICROSOFT";
        String s2 = "APPLESOFT";
        String s3 = searchReplace(s1,s2);
    }
} 
```

输出 - APPLESOFT - SOFT - APPLE

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T12:31:32.457

```
 public class Match {

public static void main(String[] args)
{
    String s1="MICROSOFT";
    String s2="APPLESOFT";
    String[] s=new String[10];
    String s3;
    int j=0,k=0;
    for(int i=s2.length();i>0;i--)
    {
        s[j]=s2.substring(k,s2.length());
        if(s1.contains(s[j]))
        {
            s3=s2.substring(0,j);
                                 System.out.println(s1+""+s3);

            System.exit(0);

        }
        else
        {
            System.out.println("");
        }
                                j++;
                                k++;
    }

}

     } 
```

我已经编辑了代码，你可以再试一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T11:25:59.413

试试这个，没有测试你

```
 String s1 = "MICROSOFT";
         String s2 = "APPLESOFT";
         String s3="";
         for(int j=0; j<s1.length(); j++)
         {
             if(s1.charAt(j)==s2.charAt(j)){
                 s3+=s1.charAt(j);
             }
         }
         System.out.println(s1.replace(s3, " ") + " \n"+ s2.replace(s3, " ")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T11:33:36.823

`StringBuffer`如果你想修改你的，你应该使用`String`..

在这种情况下，您可以有一个额外`StringBuffer`的 ，您可以在其中继续附加不匹配的字符：-

```
 StringBuffer s1 = new StringBuffer("MICROSOFT");
    StringBuffer s2 = new StringBuffer("APPLESOFT");
    StringBuffer s3 = new StringBuffer();

    for(int j=0; j<s1.length(); j++)
    {
        char c1 = s1.charAt(j);
        char c2 = s2.charAt(j);

        if(c1==c2) {
            System.out.println("Match found!!!");
        } else {
            System.out.println("No match found!");
            s3.append(c1);
        }
    }
    s1 = s3;
    System.out.println(s1);    // Prints "MICRO" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T15:11:53.773

在绞尽脑汁之后，我已经解决了我的问题。请随时纠正/改进/完善我的代码。该代码不仅适用于“MICROSOFT”和“APPLESOFT”输入，还适用于“APPWWSOFT”和“APPLESOFT”等输入（我需要从末尾删除连续重复项 - 在上述两个输入中都是 SOFT）。我正处于学习阶段，我将不胜感激任何有价值的投入。

```
public class test
    {           
        public static void main(String[] args)
        {
            String s1 = "MICROSOFT";
            String s2 = "APPLESOFT";

            int counter1=0;
            int counter2=0;

            String[] test = new String[100];
            test[0]="";

            for(int j=0; j<s1.length(); j++)
            {
                char c1 = s1.charAt(j);
                char c2 = s2.charAt(j);

                if(c1==c2)
                {
                    if(counter1==counter2)
                    {
                        //System.out.println("Match found!!!");
                        test[0]=test[0]+c2;
                        counter2++;
                        //System.out.println("Counter 2: "+counter2);
                    }
                    else
                        test[0]="";
                }
               else
               {
                   //System.out.print("No match found!");
                   //System.out.println("Counter 2: "+counter2);
                   counter2=counter1+1;
                   test[0]="";
               }

               counter1++;
               //System.out.println("Counter 1: "+counter1);
                           }

             System.out.println(test[0]);
             System.out.println(s2.replaceAll(test[0]," "));
        }
    } 
```

# c++ - 在 C++ 中编写构造函数的正确方法

> ID：12620179
> 
> 赞同：-1
> 
> 时间：2012-09-27T11:20:19.430
> 
> 标签：c++, constructor, dynamic-memory-allocation

**编辑：将我的问题更改为更有意义的问题**

如果我有课：

```
class A{
public:
     int nr;
     int *a;

     A();
};

A::A(): nr(0), a = new int[10]{} 
```

这 chrases，但如果我有

```
 A::A(): nr(0) {a = new int[10];} 
```

有用。请向我解释这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:27:17.047

`nr(0)`是数据成员的初始化器`nr`。

`{a = new T[10]; }`是一个构造函数主体，它在初始化列表中的初始化完成`a` *后*为数据成员赋值。

`{}`是一个空的构造函数体，这意味着构造函数什么都不做（除了 initialize`nr`当然，因为它在初始化列表中）。

`a = new int[10]`在初始化列表和构造函数主体之间是无意义的，语言的语法不允许这样做。它不应该编译，但是如果你找到了一个接受它的编译器然后它崩溃了，你必须查看那个编译器的文档以获得解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:28:13.817

它应该看起来像这样：

```
template<class T>
class A {
public:
     int nr;
     T *a;
     A();
};

template<class T>
A<T>::A() : nr(0), a( new T[42]) { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:22:53.940

也不应该编译。正确的方法是这样的：

*   第一种情况：`A::A(): nr( 0 ), a( new int[5] ){}`
*   第二种情况：`A<T>::A(): nr( 0 ), a( new T[10] ){}`

# outlook-addin - 更新预约收件人的回复状态

> ID：12620180
> 
> 赞同：1
> 
> 时间：2012-09-27T11:20:31.070
> 
> 标签：outlook-addin

我正在使用 VS 2010 和 c# 开发 Outlook 2010 插件

在那我想以编程方式修改约会收件人的会议状态。我可以从属性“appointmentitem.Recipients[1].MeetingResponseStatus”中读取它。但它是只读属性。有没有办法更新这个属性。可以通过约会表格功能区的“跟踪”选项卡手动更新（设置接受、拒绝等）此属性

由于可以手动编辑响应，我认为它也可以通过编程方式完成？

有什么帮助吗？？

提前谢谢你

# c++ - 装配调度系统

> ID：12620183
> 
> 赞同：2
> 
> 时间：2012-09-27T11:20:38.823
> 
> 标签：c++, multithreading, queue, multiprocessing, openmp

我想用多个处理器并行化线性运算（将复杂的数学函数拟合到某些数据集）。

假设我的机器中有 8 个内核，并且我想容纳 1000 个数据集。我期望的是一些系统将 1000 个数据集作为一个队列，并将它们发送到 8 个核心进行处理，因此它首先将 1000 个中的前 8 个作为 FIFO。每个数据集的拟合时间通常与另一个不同，因此拟合的 8 个数据集中的一些可能需要比其他数据集更长的时间。我想从系统中保存拟合数据集的结果，然后为每个已完成的线程从大队列（1000 个数据集）中继续获取新数据集。这必须继续，直到处理完整个 1000 个数据集。然后我可以继续我的程序。

这样的系统叫什么？并且在 C++ 上有模型吗？

我与 OpenMP 并行化，并使用模板和多态等高级 C++ 技术。

感谢您的任何努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:35:51.217

您基本上想要的是一个工作池（或*线程池*），它们从队列中获取作业，处理它，然后继续执行另一项作业。OpenMP 提供了不同的方法来处理这些任务，例如障碍（所有工作人员运行到某个点，并且仅在满足某个要求时才继续）或在工作人员设法计算其各自部分后将值累积到全局变量中的缩减。

您的问题非常广泛，但我可以给您的另一个提示是查看 MapReduce 范例。在这个范例中，一个函数被映射到一个数据集上，结果被排序到使用另一个函数（可能再次是相同的函数）减少的桶中。在您的情况下，这意味着您的每个处理器/核心/节点将给定函数映射到其分配的数据集，并将结果桶发送到另一个负责组合它的节点。我想如果你想在 C++ 中使用 MapReduce 并且不使用特定的 MapReduce 框架，你必须研究 MPI。当您在一个节点上运行程序时，也许您可​​以使用 OpenMP 执行类似的操作，因此在网络上搜索可能会有所帮助。

**TL;DR**搜索工作*池*（*线程池*）、*障碍*和*MapReduce*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:23:40.527

您可以将 OpenMP 并行用于动态计划或 OpenMP 任务。两者都可以用于并行化每次迭代需要不同时间来完成的情况。动态安排：

```
#pragma omp parallel
{
   Fitter fitter;
   fitter.init();
   #pragma omp for schedule(dynamic,1)
   for (int i = 0; i < numFits; i++)
      fitter.fit(..., &results[i]);
} 
```

`schedule(dynamic,1)`使每个线程一次执行一次迭代，并且线程永远不会闲置，除非没有更多的迭代要处理。

有任务：

```
#pragma omp parallel
{
   Fitter fitter;
   fitter.init();
   #pragma omp single
   for (int i = 0; i < numFits; i++)
   {
      #pragma omp task
      fitter.fit(..., &results[i]);
   }
   #pragma omp taskwait
   // ^^^ only necessary if more code before the end of the parallel region
} 
```

这里有一个线程运行一个 for 循环，产生 1000 个 OpenMP 任务。OMP 任务保存在队列中并由空闲线程处理。它的工作方式有点类似于动态 for 循环，但在代码结构中允许更大的自由度（例如，对于可以并行递归算法的任务）。该`taskwait`构造等待所有待处理的任务完成。它隐含在并行区域的末尾，因此只有在并行区域结束之前有更多代码时才真正有必要。

在这两种情况下，每次调用都`fit()`将在不同的线程中完成。您必须确保拟合一组参数不会影响拟合其他组，例如，这`fit()`是一种线程安全的方法/函数。这两种情况还要求执行时间`fit()`远高于 OpenMP 构造的开销。

OpenMP 任务需要符合 OpenMP 3.0 的编译器。如果您碰巧在 Windows 上开发，这排除了所有版本的 MS VC++（甚至是 VS2012 中的版本）。

如果您希望每个线程只初始化一个 fitter 实例，那么您应该采取一些不同的方法，例如使 fitter 对象成为全局对象并且`threadprivate`：

```
#include <omp.h>

Fitter fitter;
#pragma omp threadprivate(fitter)

...

int main()
{
   // Disable dynamic teams
   omp_set_dynamic(0);

   // Initialise all fitters once per thread
   #pragma omp parallel
   {
      fitter.init();
   }

   ...

   #pragma omp parallel
   {
      #pragma omp for schedule(dynamic,1)
      for (int i = 0; i < numFits; i++)
         fitter.fit(..., &results[i]);
   }

   ...

   return 0;
 } 
```

这`fitter`是`Fitter`该类的全局实例。该`omp threadprivate`指令指示编译器将其放入线程本地存储中，例如使其成为每个线程的全局变量。这些在不同的平行区域之间持续存在。您也可以`omp threadprivate`在`static`局部变量上使用。这些也在不同的并行区域之间持续存在（但仅在相同的函数中）：

```
#include <omp.h>

int main()
{
   // Disable dynamic teams
   omp_set_dynamic(0);

   static Fitter fitter; // must be static
   #pragma omp threadprivate(fitter)

   // Initialise all fitters once per thread
   #pragma omp parallel
   {
      fitter.init();
   }

   ...

   #pragma omp parallel
   {
      #pragma omp for schedule(dynamic,1)
      for (int i = 0; i < numFits; i++)
         fitter.fit(..., &results[i]);
   }

   ...

   return 0;
 } 
```

该调用禁用动态团队，即每个并行区域将始终使用环境变量`omp_set_dynamic(0)`指定的线程数执行。`OMP_NUM_THREADS`

# java - Eclipse 中缺少非必需库的必需库

> ID：12620184
> 
> 赞同：41
> 
> 时间：2012-09-27T11:20:42.757
> 
> 标签：java, eclipse

我正在为 Java 开发人员使用 Eclipse（在 Windows 7 上运行的 Juno x64）。

我有一个项目，我正在尝试一个我不再需要的 jar (args4j)，因此删除了依赖项。在某个时候，我的 PC 意外断电，此后我重新启动了 Eclipse。

我的项目现在有一个错误，`"Project 'MyProject' is missing required library: '/path/to/args4j-2.0.21.jar'"`. 在没有任何问题的情况下删除依赖项后，我正在使用该项目一段时间。

在 Project Properties > Java Build Path 下，任何选项卡中都没有对 args4j 的引用。

我试过了：

*   在我的项目中的所有文件中搜索字符串“args4j”，但没有匹配项。里面有*很多*参考资料`<workspace>\.metadata\.plugins\org.eclipse.core.resources\.history\`，但我不敢碰它们，因为担心我可能会破坏其他东西。
*   [编辑] 清洁重建没有效果。

有谁知道为什么 Eclipse 会抱怨，以及我可以做些什么来解决它？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-27T11:24:50.480

请执行以下操作，如果一项不能解决您的问题，请跳至下一项：

1.  检查`.classpath`项目文件夹中的文件。你那里可能有参考。
2.  关闭并重新打开项目而不关闭 Eclipse，这可能会重建 Eclipse 资源缓存。
3.  重新打开后进行干净的构建。
4.  将您的项目重新导入干净的工作区。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-28T01:11:40.027

重新添加有问题的 jar，然后删除它就可以了。这比在我的情况下重新配置整个工作区要好，因为我的工作区中有很多项目和 ADT 配置。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-30T11:22:52.057

我发现最简单最简单的方法是切换到导航器视图，打开 .factorypath 文件并删除有问题的依赖项。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-24T09:43:08.443

删除 .classpath 和 .project，然后将项目重新导入为 Maven 项目确实对我有用。在初始提交时从头开始标记所有 Eclipse 工作文件（如 p4ignore 或 gitignore 中的 .classpath）也可能很有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-15T06:46:51.320

DO - `mvn eclipse:clean eclipse:eclipse`, on project 然后`refresh`再`clean`project , 将解决这个问题

# android - Android - MenuItem 中的 ActionBarSherlock 自定义视图

> ID：12620185
> 
> 赞同：0
> 
> 时间：2012-09-27T11:20:43.583
> 
> 标签：android, radio-button, android-actionbar, actionbarsherlock, menuitem

我有一个`MenuItem`列表，我想`MenuItem`用 a`TextView`和 a设置每个视图的视图`RadioButton`，但默认情况下它只允许我为`Checkable`( `menuItem.setCheckable(true)`) 设置视图。有任何方法可以`MenuItems`在`RadioButton`选项上设置它或设置自定义视图，我可以在哪里自定义`RadioButton`选项视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:39:57.903

这个问题在你的前几天被问到：[动作栏中的自定义视图](https://stackoverflow.com/questions/12554524/custom-views-in-actionbar/12596803)

[动作提供者](http://developer.android.com/reference/android/view/ActionProvider.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:17:04.963

不是为了设置自定义视图，而是为了解决我的问题，我做了这样的事情：

```
subMenu.setGroupCheckable(groupId, true, true); 
```

但只有在子菜单项全部添加后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:58:21.600

在 onCreateOptionsMenu 上尝试类似的操作：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getSupportMenuInflater().inflate(R.menu.home, menu);

    MenuItem spin = menu.findItem(R.id.menu_spinner);
    spin.setActionView(channelsSpinner);

    return true;
} 
```

# c++ - 期货与承诺

> ID：12620186
> 
> 赞同：151
> 
> 时间：2012-09-27T11:20:48.900
> 
> 标签：c++, c++11, promise, future

我对未来和承诺之间的区别感到困惑。

显然，它们有不同的方法和内容，但实际用例是什么？

是吗？：

*   当我管理一些异步任务时，我使用未来来获得“未来”的价值
*   当我是异步任务时，我使用 Promise 作为返回类型，以允许用户从我的 Promise 中获得未来

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-09-27T11:24:48.197

Future 和 Promise 是异步操作的两个独立方面。

`std::promise`由异步操作的“生产者/编写者”使用。

`std::future`由异步操作的“消费者/读者”使用。

它被分成这两个独立的“接口”的原因是为了向“消费者/阅读者”**隐藏**“写入/设置”功能。

```
auto promise = std::promise<std::string>();

auto producer = std::thread([&]
{
    promise.set_value("Hello World");
});

auto future = promise.get_future();

auto consumer = std::thread([&]
{
    std::cout << future.get();
});

producer.join();
consumer.join(); 
```

使用 std::promise 实现 std::async 的一种（不完整）方法可能是：

```
template<typename F>
auto async(F&& func) -> std::future<decltype(func())>
{
    typedef decltype(func()) result_type;

    auto promise = std::promise<result_type>();
    auto future  = promise.get_future();

    std::thread(std::bind([=](std::promise<result_type>& promise)
    {
        try
        {
            promise.set_value(func()); // Note: Will not work with std::promise<void>. Needs some meta-template programming which is out of scope for this question.
        }
        catch(...)
        {
            promise.set_exception(std::current_exception());
        }
    }, std::move(promise))).detach();

    return std::move(future);
} 
```

使用`std::packaged_task`which is a helper（即它基本上完成了我们上面所做的工作）`std::promise`可以执行以下更完整且可能更快的操作：

```
template<typename F>
auto async(F&& func) -> std::future<decltype(func())>
{
    auto task   = std::packaged_task<decltype(func())()>(std::forward<F>(func));
    auto future = task.get_future();

    std::thread(std::move(task)).detach();

    return std::move(future);
} 
```

`std::async`请注意，这与销毁时返回的`std::future`实际阻塞位置略有不同，直到线程完成。

# c# - 如何访问中继器中的 asp.net 复选框控件以进行更新面板触发器？

> ID：12620193
> 
> 赞同：0
> 
> 时间：2012-09-27T11:21:01.427
> 
> 标签：c#, asp.net

我正在使用更新面板。中继器中有很多复选框，我想使用更新面板触发器，但我无法访问复选框控件。我怎样才能访问它？

```
<asp:UpdatePanel ID="up" runat="server">
    <ContentTemplate>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="checkbox1"
            EventName= "CheckedChanged" />
    </Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:19:54.693

您可以将此代码添加到`ItemCreated of repeater`

```
ScriptManager scriptManager = ScriptManager.GetCurrent(this);
var cbx = (CheckBox)e.Item.FindControl("checkbox1") ;
if(cbx != null)
{
    cbx.CheckedChanged+= CheckBox1_CheckedChanged;
    scriptManager.RegisterAsyncPostBackControl(cbx);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:34:28.390

控件引用的[`AsyncPostBackTrigger`](http://msdn.microsoft.com/en-us/library/system.web.ui.asyncpostbacktrigger.aspx)控件必须与作为触发器的更新面板位于同一命名容器中。不支持基于其他命名容器中的控件的触发器。

你可以[`ScriptManager.RegisterAsyncPostBackControl`](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerasyncpostbackcontrol.aspx)改用。

# perforce - 如何找出文件的最后一个更改列表编号

> ID：12620195
> 
> 赞同：2
> 
> 时间：2012-09-27T11:21:20.400
> 
> 标签：perforce

有没有办法我们可以在 Perforce 中找出文件的最后一个更改列表编号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:11:51.183

您正在寻找`p4 fstat`：

```
$ p4 fstat //depot/path/to/file
... depotFile //depot/path/to/file
... headAction edit
... headType ktext
... headTime 1348571116
... headRev 8
... headChange **496308**
... headModTime 1348571025
... 
$ 
```

如果您将文件映射到客户端工作区，则`p4 filelog -m 1`工作类似。

# jquery - jquery set div from mysql 然后提醒更改

> ID：12620201
> 
> 赞同：0
> 
> 时间：2012-09-27T11:21:41.873
> 
> 标签：jquery, mysql, html

我使用 php 从 Mysql 获取行数，并且我有一个 jquery 刷新，它将行数加载到 div 中并显示它。这很好用！

现在，如果 div 的值发生变化，我需要发送警报。我试过下面的代码，但它没有检测到 div 的任何变化。有任何想法吗？

```
var auto_refresh = setInterval(
function ()
{
    $('#load_tweets').load('<?php echo base_url(); ?>index.php/login/count_users/');
}, 1000);

$('#load_tweets').change( function() {
notify('NEW JOB');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:29:10.010

jQuery .change() 方法仅适用于表单字段。

您可以查看以下关于 SO 的答案以获得替代方案：

[jQuery 观察 div](https://stackoverflow.com/questions/3233991/jquery-watch-div/3234646#3234646)

# mysql - mysql 自然排序给定数据

> ID：12620203
> 
> 赞同：1
> 
> 时间：2012-09-27T11:21:46.577
> 
> 标签：mysql, sql, sorting, sql-order-by, natural-sort

我有以下格式的数据：

```
AC-1234/12
AC-4321/12
ANA-4532/12
231
IHC-543/12
F-125/12
F-345/12
ds-234/12 
```

我想在mysql中对此进行自然排序。

结果应该是这样的：

```
AC-1234/12
AC-4321/12
ANA-4532/12
F-125/12
F-345/12
ds-234/12
231 
```

尝试了一些 mysql 自然排序技巧，但对我不起作用。建议将不胜感激。

我试过这个：

```
select column 
from table_name 
Order By LENGTH(column), column 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:49:38.480

您可以`CASE`像这样使用表达式来执行此操作：

```
SELECT column
FROM  Tablenametemp 
ORDER BY
   CASE 
     WHEN column REGEXP '^-?[0-9]+$' THEN 1 --If column is number 
     ELSE 0 
   END, column 
```

## [这是一个 SQL 小提琴演示](http://www.sqlfiddle.com/#!2/65e56/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T09:38:37.657

我也有类似的问题，你们看看我的吗？

[MySQL按字母数字排序不起作用](https://stackoverflow.com/questions/50037699/mysql-order-by-alpha-numeric-not-working/50038031#50038031)

和我的 sql 小提琴

[http://www.sqlfiddle.com/#!9/7773a6/1](http://www.sqlfiddle.com/#!9/7773a6/1)

# hyperlink - 悬停状态不适用于访问过的链接

> ID：12620204
> 
> 赞同：1
> 
> 时间：2012-09-27T11:21:50.743
> 
> 标签：hyperlink, hover

有人可以告诉我为什么一旦我访问一个链接，悬停状态就会停止工作吗？

[http://jsfiddle.net/trajaneu/ZBzV9/](http://jsfiddle.net/trajaneu/ZBzV9/)

属于“contactos”类的页脚上的链接运行良好。但是“texto”类的那些不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:39:13.617

没关系。我在这里发现了问题：

```
.contactos a:link,.texto div a:visited,.texto div a .yshortcuts { 
```

我刚刚将“texto div”替换为“contactos”。复制粘贴有时会产生这些效果 :)

# javascript - 如何根据 Google Maps API 中现有的折线坐标绘制新的折线？

> ID：12620205
> 
> 赞同：1
> 
> 时间：2012-09-27T11:21:50.230
> 
> 标签：javascript, google-maps, google-maps-api-3

我已经解析了我使用谷歌地图绘制和导出的折线的坐标。我还在同一条折线上（可能不完全在同一条折线上）画了一些标记，我也已经解析并存储了它们的坐标。

如何在旧折线的基础上绘制一条从旧折线中标记的坐标开始到另一条的新折线？

我尝试将标记的坐标与折线的坐标进行匹配以获得新折线的起点和终点，但在大多数情况下，折线中不存在标记的坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:27:30.853

我猜你正在寻找[https://developers.google.com/maps/documentation/javascript/overlays#PolylineArrays](https://developers.google.com/maps/documentation/javascript/overlays#PolylineArrays)

将您的标记 - 或折线点 - 存储在一个数组中，然后从该数组创建您的折线。希望这可以帮助。

# ruby-on-rails - Ruby on Rails：NilClass:Class 的未定义方法“model_name”

> ID：12620206
> 
> 赞同：0
> 
> 时间：2012-09-27T11:21:54.253
> 
> 标签：ruby-on-rails, ruby, database, methods, undefined

我试图允许用户将项目输入数据库。其中一个字段允许他们为该项目输入多种技术。

这是我的项目控制器，新建和创建操作。

```
def new
  @project = Project.new
  @all_technols = Technol.all
  @project_technol = @project.projecttechnols.build

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @project }
  end
end

def create
  @project = Project.new(params[:project])
  params[:technols][:id].each do |technol|
    if !technol.empty?
      @project.projecttechnols.build(:technol_id => technol)
    end
  end
end 
```

这是我的多选技术下拉列表的新项目视图。

```
<%= fields_for(@project_technol) do |ab| %>
  <div class="tech">
    <%= ab.label "All Tech" %><br/>
    <%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true} ) %>
  </div>
<% end %> 
```

**项目.rb**

```
class Project < ActiveRecord::Base
  attr_accessible :tech
  has_many :projecttechnols
  has_many :technols, :through => :projecttechnols
end 
```

**技术.rb**

```
class Technol < ActiveRecord::Base
  attr_accessible :tech
  has_many :projecttechnols
  has_many :projects, :through => :projecttechnols
end 
```

**工程技术.rb**

```
class Projecttechnol < ActiveRecord::Base
  attr_accessible :project_id, :technol_id
  belongs_to :technol
  belongs_to :project
end 
```

目前，我有一个页面，用户可以在其中输入一项新技术。但我想将此选项移至创建新项目页面，他们可以在其中选择现有技术，或输入新技术，或两者兼而有之，他们将与该项目一起保存。

但是，当我尝试保存一个新项目时，我收到了这个错误。

```
Showing /home/james/Desktop/webapp/app/views/projects/new.html.erb where line #233 raised:

    undefined method `model_name' for NilClass:Class

Extracted source (around line #233):

233: <%= fields_for(@project_technol) do |ab| %>
234: 
235: <div class="tech">
236: <%= ab.label "All Tech" %><br/> 
```

我是 Rails 新手，还在学习，所以请记住回答。提前致谢。

**编辑**

改变后

```
@project.projecttechnols.build(:technol_id => technol) 
```

至

```
@project_technol = @project.projecttechnols.build(:technol_id => technol) 
```

我现在收到此错误：

```
NoMethodError in Projects#create

undefined method `map' for nil:NilClass

Extracted source (around line #240):

237: <div class="tech">
238: <%= ab.label "All Tech" %><br/>
239: 
240: <%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true} ) %>
241: </div>
242: <% end %> 
```

**编辑 2**

@all_technols = 创建操作中的 Technol.all

我现在得到这个错误。

```
NoMethodError in Projects#show

Showing /home/james/Desktop/webapp/app/views/projects/show.html.erb where line #181 raised:

undefined method `technol' for #<Project:0xb36823c>
Extracted source (around line #181):

178: <h3>Related books</h3>
179: 
180: <ul>
181:   <% @project.technol.each do |technol| %>
182:     <li><%= technol.tech %> <%= link_to "Details", technol_path(technol) %></li>
183:   <% end %>
184: </ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:29:24.597

您的`create`操作正在再次渲染`new`视图。但是，`@project_technol`在`create`动作中没有定义。该方法在 ( ) 中传递的参数上`fields_for`调用方法，但由于，它会抛出该错误。要解决此问题，请在您的操作中更改`model_name``@project_technol``@project_technol = nil``create`

```
@project.projecttechnols.build(:technol_id => technol) 
```

至

```
@project_technol = @project.projecttechnols.build(:technol_id => technol) 
```

# java - com.sun.faces.renderkit.RenderKitImpl.createResponseWriter 处的 java.lang.NullPointerException

> ID：12620207
> 
> 赞同：1
> 
> 时间：2012-09-27T11:21:57.853
> 
> 标签：java, jsp, jsf, tomcat, jsf-2

我正在开发一个 JSF 2 Web 应用程序。我想`.jsf`在 URL 中使用扩展名。我已经问过这个问题并得到了答案：[如何在 URL 中使用 .jsf 扩展名？](https://stackoverflow.com/questions/12120648/set-jsf-file-extension).

但是，当我使用可能正确的解决方案时，对于其他链接和访问`/page.jsf`（`page.xhtml`存在于服务器端），a`NullPointerException`被抛出。这是如何引起的，我该如何解决？

这是`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>   
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>   
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.jsf</welcome-file>
    </welcome-file-list>
</web-app> 
```

这是堆栈跟踪：

```
java.lang.NullPointerException
    at com.sun.faces.renderkit.RenderKitImpl.createResponseWriter(RenderKitImpl.java:228)
    at com.sun.faces.application.view.JspViewHandlingStrategy.renderView(JspViewHandlingStrategy.java:214)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

# database - 修改现有数据库表以添加版本控制

> ID：12620214
> 
> 赞同：1
> 
> 时间：2012-09-27T11:22:16.967
> 
> 标签：database, database-design

想象一下，我正在创建一个非常简单的错误跟踪系统。我有一个错误列表，目前在数据库中看起来像这样：

```
ID  Title           Details         CreatedDate
1   someTitle       someDetails     26/09/2012
2   otherTitle      otherDetails    27/09/2012 
```

我希望将版本控制添加到该表中，以便存储每个单独错误的历史记录。我在想这样的事情：

```
ID  BugID   CreatedDate
1   1       26/09/2012
2   3       26/09/2012

BugID   Title           Details           RevisionGroup
1       someTitle       someDetails       1
2       otherTitle      otherDetails      2
3       otherTitle      changedDetails    2 
```

这里我有第一个表中的 bug 列表，它链接到第二个表中的 bug 的最新版本。revisionGroup 列没有链接到任何东西，我只是取当前存在的最大值并在需要插入新错误时递增。

我的数据库设计非常不稳定，但我已经考虑过这一点并相信它应该可以工作。这看起来像是处理事情的最佳方式吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:10:50.443

很好的问题格式:)

好吧，既然你只想要最新的错误，为什么不放一个时间戳而不是一个版本。它将为您节省一个额外的查询，当您输入新错误并查找最新版本时会执行此操作。除非您的业务规则规定了版本号的要求。我相信你说情况并非如此，那么我认为你当前的设计没有任何其他问题。

设计数据库时，请始终记住……使用处理器进行计算比任何磁盘 I/O 都要快得多。如果可能并且可以避免，您应该避免任何额外的读/写。

祝你好运！

# asp.net-mvc - 将自定义字段添加到 aspnetdb.mdf

> ID：12620221
> 
> 赞同：0
> 
> 时间：2012-09-27T11:22:40.650
> 
> 标签：asp.net-mvc

好的，所以我在现有的 aspnetdb.mdf 数据库中创建了一个新表`aspnet_Groups`，并添加了一个外键并将其关联到该`aspnet_Users`表`GroupId`。

所以用户表现在去：

```
ApplicationId
UserId
UserName
LoweredUserName
MobileAlias
IsAnonymous
LastActivityDate
GroupId               //<--- Added by me, and related to aspnet_Groups table 
```

Groups 表只有一个`GroupId`，`GroupName`所以实际上非常简单。

我想知道的是如何从 MVC 应用程序中保存和获取该字段/表的数据。还是必须以其他方式完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:54:09.323

**已编辑**

我不建议干预 aspnetdb 的工作......如果你需要 - 创建自己的表并将其链接到 aspnetdb。更多控制、更多定制、更少引入内部 MS 身份验证的错误......

[关于在 ASPNETDB.mdf 中的自定义表中存储数据与在配置文件中存储有关用户的信息的精彩](http://forums.asp.net/t/1403528.aspx/1)帖子

但同样，您的问题没有正确的答案 - 只要它有效并且具有良好的可用性和可读性 - 就可以了。

如果您可以使用角色作为您的组 - 这可以解决问题，但如果没有，我会定义额外的表，而不是介入到预建的表中。这是我的意见。

**编辑 2**

您可以通过多种方式使用 aspnetdb。您甚至可以将其嵌入到您自己的数据库中。像这样：[配置 ASP.NET 2.0 应用程序服务以使用 SQL Server 2000 或 SQL Server 2005](http://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)

回答您的特定问题：您可以通过身份验证 API 访问 aspentdb：

```
string userName = Membership.GetUserNameByEmail(emailToCheck);
if (userName != null) 
```

或覆盖membershipprovider、roleprovider和securityprovider，甚至直接访问，就像这里描述的那样

[成员资格、角色和安全性](http://forums.asp.net/t/1736554.aspx)

希望这可以帮助！

# android - Android 2.3.5 上的 ActionBar 和 SearchView 问题

> ID：12620225
> 
> 赞同：1
> 
> 时间：2012-09-27T11:22:57.207
> 
> 标签：android, android-actionbar

我的应用程序中有一个已`ActionBar`实现的`SearchView`小部件和一个小部件。它在 Nexus 7、HTC Sensation 等设备上运行良好——我相信任何 Android 版本早于 3.0 的地方。但它不能在装有 Android 2.3.5 的手机上运行。

当程序在旧设备上运行时，无论如何“不显示”操作栏和其他不受支持的东西？

这是我在旧设备上运行时得到的错误日志，抱歉长度，不太明白哪个位有用：

```
09-27 12:15:03.008: I/dalvikvm(824): Failed resolving Lcom/example/stroke/handling/MainActivity; interface 407 'Landroid/widget/SearchView$OnQueryTextListener;'
09-27 12:15:03.008: W/dalvikvm(824): Link of class 'Lcom/example/stroke/handling/MainActivity;' failed
09-27 12:15:03.008: D/AndroidRuntime(824): Shutting down VM
09-27 12:15:03.008: W/dalvikvm(824): threadid=1: thread exiting with uncaught exception (group=0x400205a0)
09-27 12:15:03.018: E/AndroidRuntime(824): FATAL EXCEPTION: main
09-27 12:15:03.018: E/AndroidRuntime(824): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.stroke.handling/com.example.stroke.handling.MainActivity}: java.lang.ClassNotFoundException: com.example.stroke.handling.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.stroke.handling-1.apk]
09-27 12:15:03.018: E/AndroidRuntime(824):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1743)
09-27 12:15:03.018: E/AndroidRuntime(824):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
09-27 12:15:03.018: E/AndroidRuntime(824):  at android.app.ActivityThread.access$1500(ActivityThread.java:132)
09-27 12:15:03.018: E/AndroidRuntime(824):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
09-27 12:15:03.018: E/AndroidRuntime(824):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-27 12:15:03.018: E/AndroidRuntime(824):  at android.os.Looper.loop(Looper.java:150)
09-27 12:15:03.018: E/AndroidRuntime(824):  at android.app.ActivityThread.main(ActivityThread.java:4277)
09-27 12:15:03.018: E/AndroidRuntime(824):  at java.lang.reflect.Method.invokeNative(Native Method)
09-27 12:15:03.018: E/AndroidRuntime(824):  at java.lang.reflect.Method.invoke(Method.java:507)
09-27 12:15:03.018: E/AndroidRuntime(824):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-27 12:15:03.018: E/AndroidRuntime(824):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-27 12:15:03.018: E/AndroidRuntime(824):  at dalvik.system.NativeStart.main(Native Method)
09-27 12:15:03.018: E/AndroidRuntime(824): Caused by: java.lang.ClassNotFoundException: com.example.stroke.handling.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.stroke.handling-1.apk]
09-27 12:15:03.018: E/AndroidRuntime(824):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
09-27 12:15:03.018: E/AndroidRuntime(824):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
09-27 12:15:03.018: E/AndroidRuntime(824):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
09-27 12:15:03.018: E/AndroidRuntime(824):  at android.app.Instrumentation.newActivity(Instrumentation.java:1040)
09-27 12:15:03.018: E/AndroidRuntime(824):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1735)
09-27 12:15:03.018: E/AndroidRuntime(824):  ... 11 more 
```

PS 我不想使用 ActionBarSherlock！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:28:15.547

哎呀，

> 保持向后兼容
> 
> 如果您想在您的应用程序中提供操作栏并保持与 3.0 之前的 Android 版本兼容，您需要在 Activity 的布局中创建操作栏（因为 ActionBar 类在旧版本上不可用）。
> 
> 为了帮助您，Action Bar Compatibility 示例应用程序提供了一个 API 层和操作栏布局，允许您的应用程序使用一些 ActionBar API，并通过将传统的标题栏替换为自定义操作栏布局来支持旧版本的 Android。

这是我问题的答案吗？

**编辑：**那个示例应用程序很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:41:33.417

您可以使用 [http://actionbarsherlock.com/](http://actionbarsherlock.com/) 并将支持库添加到您的项目中，然后操作栏将在 1.6 及更高版本上工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:30:47.510

您可以检查当前的操作系统版本并运行支持的代码，例如

```
if(android.os.Build.VERSION.SDK_INT < 11){
   //  use api available only in sdk < 11
}else{
   //  use api available in sdk 11
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:14:43.170

这是为了通知您，您应该使用[Action Bar Sherlock](http://actionbarsherlock.com/)。这是 John Watson 提供的非常棒的功能/库。

并参考这个[幻灯片分享](http://www.slideshare.net/androidstream/action-bar-sherlock-tutorial)教程。它肯定会帮助你。

如果您对 Action Bar Sherlock 有任何疑问，请告诉我。

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-14T03:25:30.613

你只需要添加`android-support-v7-appcompat.jar`
然后使用“android.support.v7.widget.SearchView”
[http://developer.android.com/reference/android/support/v7/widget/SearchView.html](http://developer.android.com/reference/android/support/v7/widget/SearchView.html)

# javascript - 如何通过 jquery 澄清菜单项的状态？

> ID：12620228
> 
> 赞同：0
> 
> 时间：2012-09-27T11:23:05.597
> 
> 标签：javascript, jquery, asp.net, css, html-lists

我有以下菜单：

```
<div>
              <ul class="menu">
                    <li id="2" class="inactive"><a href="frm_Items.aspx" id="lnk_Draft" runat="server">1
                        <asp:Label ID="lbl_DraftCount" runat="server" CssClass="counter"></asp:Label></a></li>
                    <li id="3" class="inactive"><a href="#" id="lnk_Inbox" runat="server">2
                        <asp:Label ID="lbl_InboxCount" runat="server" CssClass="counter"></asp:Label></a></li>
                    <li id="4" class="inactive"><a href="#" id="lnk_Outbox" runat="server">3
                        <asp:Label ID="lbl_OutboxCount" runat="server" CssClass="counter"></asp:Label></a></li>
                    <li id="5" class="inactive"><a href="#" id="lnk_Archive" runat="server">4
                        <asp:Label ID="lbl_ArchiveCount" runat="server" CssClass="counter"></asp:Label></a></li>
                    <li id="6" class="inactive"><a href="#" id="lnk_New" runat="server">5 </a></li>
                    <li id="Li1" class="inactive"><a href="#" id="lnk_Search" runat="server">6 </a>
                    </li>
                </ul>
            </div> 
```

* * *

我有一个 css 类`active`，我想要一些 jquery 根据用户点击在活动和非活动之间切换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:26:05.950

它可以用更好的标记做得更好，但是......

```
$("ul > li").click(function() {
   $(this).toggleClass('active').toggleClass('inactive');
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:27:53.110

```
 $('.menu li').click(function () {
     $('.menu li').removeClass('active'); // removes class from each li
     $(this).addClass('active');
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:27:57.460

简单切换：

```
$("li.inactive").click(function() {
    // Toogle the current active li
    $("li.active").removeClass("active").addClass("inactive");
    // Toggle the li you just clicked on
    $(this).removeClass("inactive").addClass("active");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T11:27:58.447

作为替代方案，为了使代码更容易，我只需从`no-class`（您现在调用*inactive*）切换到`active`（反之亦然）

```
$('.menu').on('click', 'a', function() {
   $(this).parent().toggleClass('active');
} 
```

我想你想将处理程序绑定到`<a>`元素

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T11:28:50.663

```
$(document).ready(function(){
   $('ul.menu > li').click(function(){
      $('ul.menu li').removeClass('active');
    $(this).addClass('active');

   });

}); 
```

# sql - 获取在任何日期创建的表列表？

> ID：12620229
> 
> 赞同：2
> 
> 时间：2012-09-27T11:23:07.557
> 
> 标签：sql, sql-server, sql-server-2008

我陷入了一种情况，我想查找我在 2012 年 9 月 14 日（2012 年 9 月 14 日）在 sql server 上创建的表。

是否有任何查询会列出在此日期创建的这些表。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T11:25:23.940

```
SELECT *
FROM sys.tables
WHERE create_date >= '20120914' AND create_date < '20120915' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:25:24.410

```
SELECT  *
FROM    sys.tables
WHERE   CAST(create_date AS DATE) = '20120914' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:25:49.303

```
SELECT SCHEMA_NAME(schema_id) AS table_schema_name, name AS table_name
FROM sys.tables
WHERE CAST(create_date AS DATE)= '201209214; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:26:40.450

```
SELECT
        [name]
       ,create_date
       ,modify_date
FROM
        sys.tables
WHERE CONVERT(VARCHAR(10),create_date,103) = '14/09/2012' 
```

**[sys.tables (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187406%28v=sql.90%29.aspx)**

为每个表对象返回一行

**[sys.objects (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms190324%28v=sql.90%29.aspx)**

为在数据库中创建的每个用户定义的、模式范围的对象包含一行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T11:25:28.557

```
select * from sys.tables where cast(create_date as date)='2012-09-14' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T13:29:06.343

马丁史密斯的答案是正确的，有很多方法可以写这个查询之一，

```
 select * from 
 ( 
      SELECT *, convert(varchar,create_date,103) as tdate FROM sys.tables 
 )as t
 WHERE t.tdate = '27/09/2012' 
```

问候阿米特维亚斯

# mysql - 如何从现有数据库模式进行逆向工程

> ID：12620230
> 
> 赞同：-1
> 
> 时间：2012-09-27T11:23:19.570
> 
> 标签：mysql

我有一个 MySQL 数据库模式，说用一些表和相互依赖关系进行测试。现在使用 MySQL 工作台，我可以进行逆向工程以获取创建模式脚本。

如何使用 mysqldump 命令实现相同的目的，即获取创建模式并维护外键引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:28:23.330

你可以让mysql转储。它将包含 SQL 数据定义语句。

# enyo - 想要在 enyo.js 中的选定行上显示弹出窗口

> ID：12620233
> 
> 赞同：0
> 
> 时间：2012-09-27T11:23:25.080
> 
> 标签：enyo

我有一个转发器，在其中显示不同的值。单击每一行时，我想显示几个值。但在 enyo 示例中，弹出窗口的内容是弹出窗口.....

我想更改此内容。我已尝试如下

我有弹出窗口-

```
{name: "basicPopup", kind: "enyo.Popup", floating: true, **centered: true,**
        style: "background-color: yellow; padding: 10px", onHide: "popupHidden", components: [
            {content: "Popup..."}
        ]
    }, 
```

如果我要删除**centered:true**所有的弹出窗口都在左上角。我希望在我将单击的中继器上，弹出窗口应靠近该行，我的意思是我将单击的弹出窗口将靠近鼠标单击。

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:58:21.593

这是我用搜索列表制作的一个快速小提琴。

如果您单击一个列表项，您会看到我在那里为您制作了一个小弹出窗口，它会随着您单击的位置移动。我知道弹出窗口中显示的数据是错误的，但是嘿……这不是重点：)

[http://jsfiddle.net/joopmicroop/NEYQC/](http://jsfiddle.net/joopmicroop/NEYQC/)

PS 是的，有一个 enyo 滑动功能，它被称为“enyo.Slideable”，你可以在这里查看信息：http: [//enyojs.com/api/#enyo.Slideable](http://enyojs.com/api/#enyo.Slideable)

# string - string_variable 和 CStr(string_variable) 有什么区别

> ID：12620239
> 
> 赞同：0
> 
> 时间：2012-09-27T11:23:43.073
> 
> 标签：string, vba

我有一段 Excel-VBA 代码，其中以下行为使我无法理解

```
option explicit

....

private sub XYZ() 

   dim s       as string
   dim ser     as series
   dim diagram as chart

   ...

   s = function_returning_string(....)

 ' Following line throws runtime exception 13 
   set ser = diagram.seriesCollection.item(s)

   ....

end sub 
```

如果我尝试在上面概述`seriesCollection`的`chart`对象中获取命名项目，它会抛出（德语）错误**laufzeitfehler '13' typen unverträglich**这将是*运行时错误 13：*英语类型不匹配。

将违规行更改为

```
set ser = diagram.seriesCollection.item(CStr(s)) 
```

使错误消失。

我不知道为什么会这样。`CStr()`应该将某些东西（此处：）转换*为*`s`字符串，但`s`已经是字符串。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:37:12.653

CStr 将变量的类型转换为 String 数据类型。

如果你有一个函数 s = function_returning_string(....) 其中 s 已经输入了一个字符串，例如这样做：

```
dim s as string
dim sString as string

sString = cstr(s) 
```

将毫无意义。
在其他情况下，这可能很有用。
有时人们使用它，例如使用 cDate 将字符串转换为日期。或者取字符串，切掉一些部分并使用 cDbl 或 cInt 转换为 Double 或 Integer 数据类型。

检查您的函数“function_returning_string”是否定义为：

```
Public Function function_returning_string() as string 
```

在这种情况下，seriesCollection 只允许将 String 类型的变量添加到集合中。*

# rest - 如何仅公开 Web API 所需的属性？

> ID：12620243
> 
> 赞同：0
> 
> 时间：2012-09-27T11:23:53.083
> 
> 标签：rest, web-applications, asp.net-web-api, poco

我是 ASP.NET Web API 的新手。

我看到了如何在 RESTful Web 应用程序中获取和返回 POCO 的示例。

我想知道在现实世界的应用程序中，您如何只能传递 POCO 的一些属性（出于安全和/或消息大小的原因）。

我发现我可以使用“[ScriptIgnore]”属性，但我正在寻找一种方法来自定义根据请求控制器传递哪些属性，例如。

是否有一种很好的、​​开箱即用的方式来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:05:02.257

可能最简单的方法是装饰你的 POCO`System.Runtime.Serialization.DataContractAttribute`和你想要包含的成员，`System.Runtime.Serialization.DataMemberAttribute`即

```
[DataContract]
public class MyType
{
  [DataMember]
  public string Property1 {get; set;}
  public string Property2 {get; set;}
  public string Property3 {get; set;}
} 
```

在这种情况下，只会`Property1`被序列化。值得注意的是，两者`XmlMediaTypeFormatter`都会`JsonMediaTypeFormatter`尊重`DataContract`，因此您不需要任何 XML/JSON 特定的属性。

现在，这将在更简单的解决方案中起作用，对于一个真正的、全面的方法，您可能需要求助于 DTO 而不是将模型暴露给客户端。

您可以使用`Automapper`它，并将模型投影到 DTO - 您在这里有一篇很好的介绍性文章[http://www.mono-software.com/blog/post/Mono/120/Using-AutoMapper-to-handle-DTOs/](http://www.mono-software.com/blog/post/Mono/120/Using-AutoMapper-to-handle-DTOs/)。此外，使用 Automapper，您可以从同一个基本模型创建不同类型的 DTO，据我所知，这是您感兴趣的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:01:41.257

如果您试图从不同的控制器返回同一模型的多个表现形式，那么这是一种有害的设计（根据我的说法）。如果您仍然想这样做，您可以将不需要的属性设置为“null”并返回模型。

要处理从序列化中忽略的空对象，您必须在配置格式化程序时在某处执行此操作（在 global.asax 中）：

```
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.NullValueHandling = NullValueHandling.Ignore; 
```

# c# - 鉴于盐是随机的，是否可以从密码（与密钥一样）派生初始化向量？

> ID：12620249
> 
> 赞同：4
> 
> 时间：2012-09-27T11:24:16.937
> 
> 标签：c#, java, encryption, cryptography

请密码学大师帮忙。

我了解到，使用对称算法（例如 AES）的加密密钥应该通过 PBKDF2 函数从密码中派生，在每次加密中使用随机盐。我还了解到 IV 不应该是硬编码的，也不应该直接绑定到（派生自）密码字符串或加密密钥。到目前为止，我一直**在**随机生成密钥派生 salt**和**IV，每个 16 个字节用于我的 AES-256 加密，并将它们与加密的有效负载一起存储。

现在我认为IV的随机生成是多余的，如果我使用随机盐，因为我可以使用该盐从密码字符串中导出密钥和IV。或者也许我不应该？

所以我的问题最终是这样的：

我可以从密码中导出初始化向量（就像我使用密钥一样），还是每次都应该生成随机 IV，因为我在每次加密中都使用随机盐？

那么我可以使用下面的 C# 代码吗？

```
// Derive key and initialization vector from password:

// ---> NOTE: _salt is random 16 bytes in each encryption.

byte[] key, iv;

using (Rfc2898DeriveBytes derivedBytes = new Rfc2898DeriveBytes(password, _salt, _iterations))
{
    key = derivedBytes.GetBytes(32);
    iv = derivedBytes.GetBytes(16);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T22:46:06.413

是的，您可以这样使用它，只要您永远不会对相同的密码（即使在时间上）使用相同的盐来计算密钥和 IV。仅当您使用相同的密钥进行加密时，IV 才必须是唯一的，并且您每次都会计算一个新的密钥。原则上，您甚至可以使用全零 IV，因为密钥从不重复，但最好使用派生的。

请注意，如果您的一位同事认为`PasswordDeriveBytes`- Microsoft PBKDF1 的错误实现 - 更适合该任务，那么您很可能容易受到各种攻击。这只是一个示例，如果您的安全边际很紧，可能会出现问题......

当然应该首选完全随机的 IV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:32:13.870

你是什​​么意思“在每次加密中使用随机盐”？最好随机派生 salt 和 IV，例如密码学标准随机数生成器的输出，并将其与派生字节一起存储。为每个密码生成一个新的 IV 和盐。

为什么来自密码学标准 RNG？从密码派生意味着派生字节函数中的任何弱点都反映在字节和 IV 中。在现代编程语言中，从 RNG 生成它并不难，并且使用 RNG 可确保加密的新密码的 IV 不可预测。可能有更好的理由，但我正在画一个空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:45:21.867

任何加密系统的不同部分之间的链接越多，任何攻击者就越容易将这些链接用作从系统的一个部分到另一个部分的后门。请记住，IV 是明文发送的，而密钥**必须**保密，因此它们之间的任何形式的链接都是巨大的风险。

用于`Rfc2898DeriveBytes`生成您的密钥并使用良好的加密 RNG 生成 IV。请记住，攻击者会看到 IV，因此无需执行完整的 RFC 2898 流程。对 IV 使用标准加密 RNG，它可能比 RFC 2898 过程更快，因为它没有迭代。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T14:21:45.353

使用 AES-CBC 时初始化向量的语义安全性最重要的部分是它不应该是可预测的。

通过您建议的实现，给定的密钥将始终具有相同的初始化向量，但由于您的 128 位盐，您不会使用相同的密钥。看起来很不可预测，也就是说，这不是一个最佳实践，而且通常当你做一些聪明的事情来节省 16 个字节的空间时，你会失去某种安全性，或者让自己面临一些未知的攻击向量。

我认为您应该使用 RNG 并占用 16 字节的空间，在处理加密时保守是游戏的名称。您可能还应该研究其他内容，例如经过身份验证的加密，我[在 codereview 上有一个示例实现](https://codereview.stackexchange.com/questions/14892/review-of-simplified-secure-encryption-of-a-string)。

最终，还有其他重要的事情会为安全性提供超出 iv 的额外开销，例如身份验证加密、版本控制和密钥轮换，而且实际上还没有任何用于 C# 的高级加密框架。我一直在研究 Google 的[Keyczar](http://code.google.com/p/keyczar/)框架的 C# 实现。如果您愿意，可以在 github [Keyczar-dotnet](https://github.com/jbtule/keyczar-dotnet/tree/master/dotnet)上关注它。它的功能非常完整，并且具有 90% 的测试覆盖率，但保守地说，在它被正式接受为项目的一部分之前，我不建议使用它，并且将来可能会有更多人关注它。

# iphone - iphone：如何开发应用程序设置功能并创建这样的字段？

> ID：12620251
> 
> 赞同：-1
> 
> 时间：2012-09-27T11:24:18.573
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我是 iPhone 开发的新手，想将我的应用程序添加到设置中，我可以在其中设置一些用户在启动应用程序之前必须设置的设置值。

这些值可能是默认值，这意味着应用程序将给出一些值，但用户可以编辑这些值。

![在此处输入图像描述](../Images/d2e6a04a134ba857f71d453cb887ef08.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:34:47.020

阅读文档：[实现 iOS 设置包](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)

# android-emulator - 从android中的自定义对话框edittext中获取值

> ID：12620255
> 
> 赞同：0
> 
> 时间：2012-09-27T11:24:26.563
> 
> 标签：android-emulator

我的项目我的屏幕上有一个文本视图和按钮。在按钮单击事件上，我显示自定义对话框（对话框内容编辑文本和按钮）。我将一些数据放在对话框编辑文本中，然后单击对话框保存按钮。
现在我想在单击按钮时在屏幕文本视图上显示对话框编辑文本的值。我该怎么做.... holder.list1.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v) {
                final TextView tv=(TextView)v.findViewById(R.id.textView3);
                final Dialog dialog = new Dialog(activity);
                dialog.setContentView(R.layout.customdailogfroaddmilk);
                dialog.setTitle("Account");

                // set the custom dialog components - text, image and button
                final EditText text = (EditText) dialog.findViewById(R.id.editText1);
                text.setText(tv.getText().toString());

                Button save = (Button) dialog.findViewById(R.id.button1);
                Button cancle = (Button) dialog.findViewById(R.id.button2);
                save.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {

                        dialog.dismiss();
                        tv.setText(text.getText().toString());
                    }
                });

                cancle.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                        dialog.dismiss();
                    }
                });

                dialog.show();
            }
        }); 
```

在按钮（保存）单击事件编辑文本（保存）值未在 textview（tv）中设置 ?????.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:27:46.107

在您的布局文件夹中创建一个布局，并将其作为视图提供给对话框对象。对于下面显示的示例，您需要在该布局中有一个 TextView、一个 Button 和 EditText。

```
 final Dialog dialog = new Dialog(context,
                        android.R.style.Theme_Translucent_NoTitleBar);
        Window window = dialog.getWindow();
        window.setLayout(ViewGroup.LayoutParams.FILL_PARENT,
                        ViewGroup.LayoutParams.FILL_PARENT);
        dialog.setCancelable(true);
        dialog.setCanceledOnTouchOutside(true);
        dialog.setContentView(R.layout.xmlfile);

        Button ok = (Button) dialog.findViewById(R.id.alert_ok_button);
        TextView  alert_title = (TextView ) dialog.findViewById(R.id.alert_title);
        final EditText shelf_name_edit=(EditText)dialog.findViewById(R.id.shelf_name_edit_area);

        alert_title.setText(title);
        alert_title.setTextSize(20);
        ok.setText("OK");
        ok.setTextSize(20);

        ok.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                dialog.cancel();
                Log.i("EditText Value",shelf_name_edit.getEditableText().toString());
            }

        });
        dialog.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:34:17.037

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout01"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<Button android:layout_height="wrap_content"
android:layout_width="wrap_content"
android:id="@+id/ClkBtn"
android:text="Click Me"></Button>
</RelativeLayout> 
```

mydialog.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:background="#ffffff" android:orientation="vertical"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"

 >

 <TextView android:id="@+id/Tv1"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:textSize="15px"
 android:textColor="#6aa4cc"
 android:text="Friendcaster for Facebook"
 android:padding="10dip"
 />

 <TextView android:id="@+id/Tv2"
 android:layout_width="wrap_content" android:layout_height="wrap_content"
 android:textSize="14px"
 android:textColor="@android:color/black"
 android:layout_below="@+id/Tv1"
 android:textStyle="bold"
 android:text="A , B , C , D and or 5 friend like your status "
 android:padding="10dip"
 />

 <View  android:layout_height="15dip" android:layout_width="fill_parent"/>
 <LinearLayout android:layout_height="wrap_content" android:layout_width="fill_parent"
     android:orientation="horizontal" android:background="#d6d6d6"
     android:layout_weight="3"
      >
 <LinearLayout android:layout_height="wrap_content" android:layout_width="wrap_content"
     android:orientation="vertical" 
     android:gravity="left"
     android:id="@+id/ll"
     android:layout_weight="1" android:padding="5dip"
      >
        <ImageView android:src="@drawable/video"
                android:layout_height="30dip" android:layout_width="30dip"  android:layout_gravity="center_vertical|center_horizontal"
             /> 
             <TextView android:layout_height="wrap_content" android:layout_width="wrap_content"
                 android:text="view" android:layout_gravity="center_vertical|center_horizontal"
                   android:textColor="#0388e5"
                  />

     </LinearLayout>
     <View  android:layout_height="match_parent" android:layout_width="1dip" android:background="@android:color/darker_gray"/>

 <LinearLayout android:layout_height="wrap_content" android:layout_width="wrap_content"
     android:orientation="vertical"
     android:gravity="center"
     android:layout_weight="1" android:padding="5dip"
      >
        <ImageView android:src="@drawable/chat"
            android:layout_height="30dip" android:layout_width="30dip" android:layout_gravity="center_vertical|center_horizontal"
             /> 
             <TextView android:layout_height="wrap_content" android:layout_width="wrap_content"
                 android:text="Reply" android:layout_gravity="center_vertical|center_horizontal"

                 android:textColor="#0388e5"
                  />

     </LinearLayout>
 <View  android:layout_height="match_parent" android:layout_width="1dip" android:background="@android:color/darker_gray"/>    

 <LinearLayout android:layout_height="wrap_content" android:layout_width="wrap_content"
     android:orientation="vertical"
     android:layout_weight="1" android:padding="5dip"

     android:gravity="right"
      >
        <ImageView android:src="@drawable/cancel"
              android:layout_height="30dip" android:layout_width="30dip"  android:layout_gravity="center_vertical|center_horizontal"
             /> 
             <TextView android:layout_height="wrap_content" android:layout_width="wrap_content"
                 android:text="Zip" android:layout_gravity="center_vertical|center_horizontal"
                   android:textColor="#0388e5"
                  />

     </LinearLayout>

</LinearLayout>

</LinearLayout> 
```

main.java

```
package com.example.cusmizepopup;

import android.os.Bundle;
import android.os.Message;
import android.app.Activity;
import android.app.Dialog;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.Toast;

public class MainActivity extends Activity {

        Dialog myDialog;
        Button myButton;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            myButton = (Button) findViewById(R.id.ClkBtn);

            myButton.setOnClickListener(new OnClickListener() {          
            @Override
                public void onClick(View v) 
            {
                    myDialog = new Dialog(MainActivity.this);
                    myDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                    myDialog.setContentView(R.layout.mydialog);
                    //myDialog.setTitle("My Dialog");

                    myDialog.setCancelable(true);

                    //myDialog.setCancelable(true);
                    //myDialog.setCancelMessage("Are you Sure ? ")
                    LinearLayout button = (LinearLayout) myDialog.findViewById(R.id.ll);
                    button.setOnClickListener(new OnClickListener() {
                    @Override
                        public void onClick(View v) 
                        {
                        //myDialog.dismiss();
                        Toast.makeText(getApplicationContext(), "hi", Toast.LENGTH_LONG).show();
                        }
                    });

                    myDialog.unregisterForContextMenu(myButton);
                    myDialog.show();
                }
            });
        }
     } 
```

# sql - 与 postgresql 的错误连接

> ID：12620256
> 
> 赞同：0
> 
> 时间：2012-09-27T11:24:29.233
> 
> 标签：sql, postgresql, arcgis

我正在尝试使用 ArcCatalog 连接到 PostgreSQL。但我认为这并不重要。我什至无法连接到 pgAdmin。连接在本地主机上运行良好，问题仅在于来自远程 PC 的连接。

每次我收到错误时：

```
Failed to connect to the specified server.
Underlying DBMS error [Fatal: missing or erroneous pg_hba.conf file HINT: See server log for details. 
SQL state:] 
```

我无法理解这个错误的原因。我查看了 ESRI 站点并找到了名为“PostgreSQL DBMS for Windows”的工具，但它仅适用于 arcgis 10.1 和 Win x64。

我知道默认情况下 PostgreSQL 不允许远程连接，所以我将下一个文本放入 pg_hba.conf：

```
host    all         all         127.0.0.1/32          md5

host    all         all         169.254.231.203          trust

host    all         all     0.0.0.0/0       trust 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:31:28.320

请检查 169.254.231.203 是有效的 IP 地址。您应该配置**pg_hba.conf**以远程访问您的数据库。我希望这些链接对您有所帮助。

1.  [http://www.postgresql.org/docs/devel/static/auth-pg-hba-conf.html](http://www.postgresql.org/docs/devel/static/auth-pg-hba-conf.html)
2.  [http://www.linuxtopia.org/online_books/database_guides/Practical_PostgreSQL_database/c15679_002.htm](http://www.linuxtopia.org/online_books/database_guides/Practical_PostgreSQL_database/c15679_002.htm)

# c# - 集合中的递归函数

> ID：12620260
> 
> 赞同：2
> 
> 时间：2012-09-27T11:24:41.147
> 
> 标签：c#, function, recursion

我正在使用 c# 和 List 集合并加载了值。完成后，我将尝试以递归方式阅读它们，但有些我无法做到这一点。

以下是我的主要代码。

```
 private static void Main(string[] args)
            {
                var node = new Node
                    {
                        Name = "N1",
                        Nodes =
                            new List<Node>
                                {
                                    new Node { Name = "N1a" },
                                    new Node { Name = "N1b", Nodes = new List<Node> { new Node { Name = "N1B1" } } },
                                    new Node
                                        {
                                            Name = "N1c",
                                            Nodes =
                                                new List<Node> { new Node { Name = "N1C1", Nodes = new List<Node> {new Node{Name = "N1C1A"} } } }
                                        }
                                }
                    };
                GetNodes( node );
                Console.ReadLine();
            }

 public class Node
        {
            public string Name { get; set; }

            public IList<Node> Nodes { get; set; }
        } 
```

并且函数调用如下

```
public static IEnumerable<Node> GetNodes(Node node)
        {
            if (node == null)
            {
                return null;
            }

            Console.WriteLine(node.Name);

            foreach (var n in node.Nodes)
            {
                return GetNodes(n);
            }

            return null;
        }
    } 
```

有人可以帮我修复递归函数吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T11:29:03.640

如果您只想打印所有节点的名称，

```
public static void GetNodes(Node node)
{
    if (node == null)
    {
        return;
    }
    Console.WriteLine(node.Name);
    foreach (var n in node.Nodes)
    {
        GetNodes(n);
    }
} 
```

如果你想把树弄平，

```
public static IEnumerable<Node> GetNodes(Node node)
{
    if (node == null)
    {
        yield break;
    }
    yield return node;
    foreach (var n in node.Nodes)
    {
        foreach(var innerN in GetNodes(n))
        {
            yield return innerN;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:58:32.873

```
public static IEnumerable<Node> GetNodes(Node node)
{
    if (node == null) return null;

    var nodes = new List<Node>();
    nodes.Add(node);

    Console.WriteLine(node.Name);

    if (node.Nodes != null)
    {
        foreach (var n in node.Nodes)
        {
            nodes.AddRange(GetNodes(n));
        }
    }

    return nodes;
}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:28:53.037

您的方法仅每个返回 null，或调用自身，然后返回 null，或调用自身.....所以在一天结束时它返回 null 或不终止。如果您想序列化这些值，您可以在将它们写入控制台时将它们写入代码中的同一点的列表中。

```
public static void GetNodes(Node node, List<Node> output)
{
    if (node == null)
        return;

    output.Add(node);
    Console.WriteLine(node.Name);

    foreach (var n in node.Nodes)
    {
        GetNodes(n, output);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:29:34.913

在第一次迭代时，您会立即从循环内的方法返回。不执行其他迭代。

# stylesheet - 如何将外部样式表链接到多个页面和文件夹？

> ID：12620261
> 
> 赞同：3
> 
> 时间：2012-09-26T16:30:14.453
> 
> 标签：stylesheet

我正在建立一个相当大的网站，其中包含许多页面和文件夹。我有 1 个样式表。

如何将样式表添加到这些文件夹的“全部”？在我开始将页面放在单独的文件夹中之前，我没有这个问题。现在每个页面都有自己的文件夹，除非它在 ​​SAME 文件夹中，否则它不再读取我的样式表

例如，假设我有一个宠物文件夹、另一个汽车文件夹和另一个飞机文件夹。我必须将我的样式表放在每个文件夹和每个文件夹中，这样我才能看到我的网站。我怎样才能做到这一点，这样我就不必在每个文件夹中都放置一个样式表？

换句话说，我怎样才能让我的样式表与我的文件夹在同一页面上而不将它们放在那个文件夹中？如何让他们在不同的文件夹中进行通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:54:20.753

如果文件链接在当前目录上方（意味着您要链接的文件位于存储链接文档的文件夹之外），则必须这样编写：

`../file.html`

如果它位于当前目录之上并且在不同的文件夹中，则链接如下：

`../diffFolder/file.html`

如果它在当前目录中更深（意味着它在当前目录的文件夹中），请执行以下操作：

`deeperFolder/file.html`

当然，另一种选择是创建一个 php 标头文档并将其要求/包含在您的其他页面中。这确实是重用内容的大型网站的方式。我现在正在一个小型网站上工作，但是每个重复使用的部分都是它自己的单独文档，每当调用链接时，服务器端都需要它。因此，如果我对标题进行更改，它会影响每一页。与页脚、侧边栏等相同。

这个网站实际上很好地解释了一个非常基本的动态包含：http: [//inobscuro.com/tutorials/php-dynamic-includes-16/#](http://inobscuro.com/tutorials/php-dynamic-includes-16/#)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:31:04.180

您需要使用根相对路径或绝对路径而不是相对路径来引用它：

```
 <link rel="stylesheet" type="text/css" href="style.css"> 
```

而不是“style.css”，而是将其称为“/this/is/my/path/to/my/files/style.css”。如果您的文件位于根目录中，则为“/style.css”

```
 <link rel="stylesheet" type="text/css" href="/path/to/style.css"> 
```

如果你想有一个绝对路径：

```
 <link rel="stylesheet" type="text/css" href="http://www.mysite.com/path/to/style.css"> 
```

# vb.net - VB.Net 在 WebBrowser 中自动刷新

> ID：12620263
> 
> 赞同：0
> 
> 时间：2012-09-27T11:24:46.407
> 
> 标签：vb.net, flash, browser, sh

我花了很多时间在网上搜索一个看似显而易见但没有结果的解决方案。

1.  我需要在我的 Intranet 上运行的 Flash 应用程序中自动执行一项任务。

    *   我无法更改 Flash 应用程序，也无法访问源代码。
    *   它不是 Flash 电影，而是一个应用程序。
    *   我无法下载 swf。
2.  我在表单中使用 WebBrowser。Flash 应用程序显示没有问题。

3.  到目前为止，我已经能够自动完成任务（单击一些按钮，然后输入文本，最后将结果保存在服务器上）。它可以工作，但根本不干净，因为我使用硬编码的计时器来等待给定的操作完成，然后我在应用程序中的给定坐标处单击非常特定的点。

我想做的事：

避免使用硬编码的计时器。Flash 应用程序需要一些时间来显示窗口上的所有元素（从 20 到 60+ 秒）。我希望能够检测到所有元素的加载时间。我试图检索 windows 句柄的文本，但是虽然我可以检索 Flash `hwnd`，但我无法检索内容（通过消息）。

简而言之，如果要在 Flash 应用程序中加载的最后一个元素中写入“ABC”，而不是等待 60 秒（并且不是 100% 确定它是否足够），我想检测它是否已显示，以便我可以继续序列（单击下一步按钮）。

我正在使用 VB.net。任何实现这一目标的提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T20:06:33.493

哈哈。我正在尝试做同样的事情，但没有结果。如果应用程序具有在线性质，您可以尝试查看是否有 POST/GET 代码可以帮助您。除此之外，您只能模拟点击，因为 Flash 无法轻松交互。这就是为什么现在大多数东西都将与 HTML5 交换。

# android - 活动的荒谬行为

> ID：12620265
> 
> 赞同：1
> 
> 时间：2012-09-27T11:24:48.733
> 
> 标签：android, android-intent, android-activity

我正在为`Android ICS`. 我有一个名册（联系人）活动，可以导致聊天活动（在单击名册（联系人）列表中的条目后）。然后，人们可以聊天，并且可以在单击聊天屏幕上的按钮后返回花名册屏幕。

用于在代码中启动活动以创建意图的标志是：`Intent.FLAG_ACTIVITY_REORDER_TO_FRONT`

名册活动屏幕上还有一个搜索按钮，可将我们带到搜索活动，这反过来又允许我们进行聊天活动。

这里使用的标志是相同的。这三个都是单任务。

现在的问题是，当我从花名册活动转到聊天活动，然后再回到花名册活动时，一切都很好。但是，当我从花名册活动转到搜索活动，然后到聊天活动，然后返回花名册活动时，花名册活动被重新创建，即`oncreate()`调用花名册的功能。这不会发生在其他流程中。

谁能解释一下。为搜索创建新活动可能不受欢迎，但假设它很好，为什么会发生这种情况？

也`ondestroy()`不会调用名册活动（因为它不是强制性的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:49:31.637

您必须始终期望 onCreate 在恢复或以其他方式从不同屏幕返回到您的活动后的任何时间点被调用。Android 可以选择终止任何暂停的活动，即对用户隐藏。当返回该 Activity 时，如果它已被销毁，Android 将通过调用 onCreate（和 onRestoreInstanceState，这就是为什么您应该保存应该比 onRetainInstanceState 中的上下文更改更有效的易失性数据来重新创建它。）

这种行为并没有什么荒谬之处，它作为 Android[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)的一部分已被详细记录。

# android - 如何使用 arm-linux-androideabi-gcc 制作可执行文件（.exe）？

> ID：12620269
> 
> 赞同：0
> 
> 时间：2012-09-27T11:24:57.487
> 
> 标签：android, android-ndk, android-ndk-r5, android-ndk-r7

我有一个共享库，它使用 arm-linux-androideabi-gcc 编译器在 c 构建中编写，现在我想测试我的共享库，所以我编写了一个示例 c，它调用该共享库（.so）并且我想制作 .exe ，所以当我编译时出现这样的错误，这是我的make文件

```
 TARG_OS       = WIN32
BUILDTYPE     = Debug
OS_BITS = 32    

SRC     := TestLSBioCore.c 

OBJS = $(SRC:.c=.o)

OUT         = ./Test.exe

OUTLIB      = 

INCLUDE     = -I../../../../../../../android-ndk-r8b/platforms/android-8/arch-arm/usr/include -I../../include

LIBS        = libLSBioCore.so

# C++ compiler flags (-g -O2 -Wall)
#CCFLAGS    = -O2 -w -ansi -D_POSIX_SOURCE

CCFLAGS     = -O2 -w -D_POSIX_SOURCE

DEFS        =  "-D __MSYS__" "-D__NBISLE__"

#LDFLAGS 
CFLAGS = -nostdlib 
LDFLAGS =-Wl,-rpath-link=../../../../../../../android-ndk-r8b/platforms/android-8/arch-arm/usr/lib/ -L../../../../../../../android-ndk-r8b/platforms/android-8/arch-arm/usr/lib/
LIB = -lc -lm

OBJECT = ../../../../../../../android-ndk-r8b/platforms/android-8/arch-arm/usr/lib/crtbegin_dynamic.o \
../../../../../../../android-ndk-r8b/platforms/android-8/arch-arm/usr/lib/crtend_android.o

#compiler
#CCC        = mingw32-gcc

CCC         = arm-linux-androideabi-gcc

#Archive
#AR = ar
#AR = /cygdrive/f/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-ar

AR = arm-linux-androideabi-ar
.SUFFIXES: .c

default: dep $(OUT)

.c.o:
    $(CCC) -c $(CCFLAGS) $(INCLUDE) $(DEFS)  $< -o $@

$(OUT): $(OBJS) 
    $(CCC) -o $(OUT) $(OBJECT) $(OBJS) $(LIBS) $(CFLAGS) $(LDFLAGS) $(LIB)
    #$(AR) rcs $(OUTLIB) $(OBJS)
    rm -f $(OBJS)

depend: dep

dep:
#   makedepend -- $(CFLAGS) -- $(INCLUDES) $(SRC)

clean:
    del  $(OBJS) $(OUT) 
```

我收到以下错误

```
 libLSBioCore.so: undefined reference to `__aeabi_dcmple'
        libLSBioCore.so: undefined reference to `__aeabi_fadd'
        libLSBioCore.so: undefined reference to `__aeabi_fcmpgt'
        libLSBioCore.so: undefined reference to `__aeabi_i2f'
        libLSBioCore.so: undefined reference to `__aeabi_dcmplt'
        libLSBioCore.so: undefined reference to `__aeabi_ddiv'
        libLSBioCore.so: undefined reference to `__aeabi_dmul'
        libLSBioCore.so: undefined reference to `__aeabi_d2f'
        libLSBioCore.so: undefined reference to `__aeabi_fsub'
        libLSBioCore.so: undefined reference to `__aeabi_fcmpge'
        libLSBioCore.so: undefined reference to `__aeabi_dadd'
        libLSBioCore.so: undefined reference to `__aeabi_idiv'
        libLSBioCore.so: undefined reference to `__aeabi_dcmpgt'
        libLSBioCore.so: undefined reference to `__aeabi_dcmpge'
        libLSBioCore.so: undefined reference to `__aeabi_dsub'
        libLSBioCore.so: undefined reference to `__aeabi_f2iz'
        libLSBioCore.so: undefined reference to `__aeabi_fdiv'
        libLSBioCore.so: undefined reference to `__aeabi_i2d'
        libLSBioCore.so: undefined reference to `__aeabi_fcmpeq'
        libLSBioCore.so: undefined reference to `__aeabi_fmul'
        libLSBioCore.so: undefined reference to `__aeabi_fcmplt'
        libLSBioCore.so: undefined reference to `__aeabi_dcmpeq'
        libLSBioCore.so: undefined reference to `__aeabi_f2uiz'
        libLSBioCore.so: undefined reference to `__aeabi_d2iz'
        libLSBioCore.so: undefined reference to `__aeabi_f2d'
        libLSBioCore.so: undefined reference to `__aeabi_idivmod'
        collect2: ld returned 1 exit status
        Makefile:57: recipe for target `Test.exe' failed 
```

我希望我在我的 make 中给出了正确的链接，我无法理解这背后的错误，有人知道如何使用 arm-linux-androideabi-gcc 制作 exe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:39:52.013

你选择了复杂的方式；请注意，`ndk-build`您可以更轻松地构建可执行文件。例如，查看**test-libstdc++** NDK 示例。

但也可以**使用**裸版。但是，当您`-nostdlib`在命令行上设置时，您需要更多库。

添加`-lgcc`. 您可能需要更多的库`toolchains/arm-linux-androideabi-4.6/prebuilt/windows/lib/gcc/arm-linux-androideabi/4.6.x-google`来满足更多的引用。

# iphone - "Reachability.h" "Reachability.m 在添加它们时给出 Apple mach-o 链接器错误

> ID：12620271
> 
> 赞同：0
> 
> 时间：2012-09-27T11:25:00.930
> 
> 标签：iphone, objective-c, ios, xcode, reachability

我正在创建一个 iPhone 应用程序，并且正在使用 RestKit api 连接到服务器。每当我将`Reachability.m`and添加`Reachability.h`到项目的第二个时，我都会遇到问题`UIViewController`。我尝试在 Xcode4 中创建一个新的 .m 文件，现在我在所有 tabst 上都收到 Apple macho-linker (id) 错误。我将它添加到第一个`UIViewcontroller`它可以正常工作，但是当我尝试将它添加到任何其他表单时，我收到此错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:28:12.833

您是否已将其添加`SystemsConfigurations.Framework`到您的项目中？苹果的可达性包需要在`SystemConfigurations.Framework`使用之前添加。

此外，如果您使用 ARC（自动引用计数），请确保您已为该特定文件禁用 ARC。通过去构建阶段，编译源代码，然后双击`Reachability.m`并输入**-fno-objc-arc**来禁用 ARC 来做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:54:55.233

尝试添加 CFNetwork.framework。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:55:59.457

通过仅导入“Reachability.h”而不是“Reachability.h”和“Reachability.m”来解决它

# blackberry - 是否可以通过 Blackberry SDK 访问快速拨号键/号码关联？

> ID：12620273
> 
> 赞同：2
> 
> 时间：2012-09-27T11:25:07.653
> 
> 标签：blackberry, sdk, keyboard

我有一个应用程序，我想使用在黑莓设置中配置的键/数字关联。例如，我得到这些关联并重新创建行为，当用户按 1 时，与快速拨号设置中的该键关联的数字显示在某个文本框中。

这可能吗？或者其他允许我将快速拨号标准行为传输到我的应用程序的东西。

# .net - 将构建操作更改为发布而不是调试后失去控制

> ID：12620283
> 
> 赞同：3
> 
> 时间：2012-09-27T11:25:38.123
> 
> 标签：.net, visual-studio-2010, build, release

我的问题是：当我将项目构建操作设置为发布而不是调试时，来自外部库的控件丢失了。使用它的每一行都有这个错误：

> 'myControlName' 未定义。

当我将操作设置为再次调试并重建问题时，该控件是 SDK 库的一部分（我的意思是我没有创建它） ，问题就消失了，那么问题是什么？

编辑：我之前使用[WeifenLuo DockPanel Suite时遇到过这个问题](https://i.stack.imgur.com/s542v.png)

现在它是另一个库，但错误是一样的

编辑：参考是将构建操作设置为发布后 的 dll 文件截图。![在此处输入图像描述](../Images/a363b74bf9465939a42b9291002ba607.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:00:11.600

有特定于配置的项目设置，它们为调试与发布存储不同的值。您必须修复的第一件事，在屏幕截图中可见，是项目 + 属性、编译选项卡、向下滚动、高级编译选项、目标 CPU。将其从 AnyCPU 更改为 x86。像您使用的 ActiveX 控件很少在 64 位模式下可用，您必须强制应用程序在 32 位模式下运行才能使用该控件。

然而，对于特定错误来说，这是一个长短。另一个重要且更容易解释此类问题的是框架目标设置。尝试选择完整的而不是客户端配置文件。顺便说一句，这也不是一个很好的解释。通过比较 Debug 与 Release 配置的 Compile 选项卡设置来寻找可能的其他修复。一个完整的异常值解释是您通过编辑 .vbproj 文件而不是使用 IDE 添加了 ActiveX 引用。请务必注意错误列表窗口中的任何警告，这样的警告可能会产生难以诊断的其他错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:14:28.423

你是如何引用控件的？它是否在您的解决方案中的目录中？

尝试右键单击项目中的源 dll，然后选择“属性”。“复制到输出目录”应为“始终复制”。

# c# - 上传到 Imageshack

> ID：12620285
> 
> 赞同：1
> 
> 时间：2012-09-27T11:25:39.297
> 
> 标签：c#, http, http-post, imageshack

有人知道如何使用 C# 上传到 imageshack.us 吗？这里的另外两个线程无济于事：/那是我的一段代码。“PostParamCollection”是一个用于发送 HTTP Post 的库。非常感谢您的帮助！

我收到错误消息：“抱歉，但我们检测到收到了意外数据。缺少必需的参数 'fileupload' 或您的帖子不是 multipart/form-data ”

```
String imageshackurl = "http://www.imageshack.us/upload_api.php?";

                    PostParamCollection postParamCollection = new PostParamCollection();
                    postParamCollection.Add(new PostParam("key", imageshack_key));
                    postParamCollection.Add(new PostParam("Content-Disposition", "form-data"));
                    postParamCollection.Add(new PostParam("filename", "a.jpg"));
                    postParamCollection.Add(new PostParam("Content-Type", "image/png"));

                    HttpPost httpPost = new HttpPost(imageshackurl);
                    httpPost.doPost(postParamCollection);
                    String link = httpPost.responseStream;

                    WriteLog(link); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:44:15.987

您似乎没有在您的 中添加*fileupload*参数`postParamCollection`，我认为它需要是类型`byte[]`并包含文件的内容。

我看到`PostParam`它的名称和值使用字符串，这不适合提交二进制数据，例如图像文件。不幸的是，您需要使用不同的方法将数据发布到 ImageShack。查看内置的 .NET [WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)类，它应该允许您执行此操作。

# android - Android webkit 源码中的 JNI 函数

> ID：12620288
> 
> 赞同：2
> 
> 时间：2012-09-27T11:25:57.063
> 
> 标签：android, webview, webkit, java-native-interface

我[读到](http://code.google.com/p/awesomeguy/wiki/JNITutorial#Naming_Functions)JNI 函数（本机 C 部分）非常复杂，必须包含 java 包名称。

但是，在阅读 Android webkit 源码时。例如[WebView.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/webkit/WebView.java)`nativeMoveGeneration`中的函数

```
private native int      nativeMoveGeneration(); 
```

[它调用WebView.cpp](https://github.com/android/platform_external_webkit/blob/master/Source/WebKit/android/nav/WebView.cpp)中的 JNI 函数

```
static int nativeMoveGeneration(JNIEnv *env, jobject obj)
{
    WebView* view = GET_NATIVE_VIEW(env, obj);
    if (!view)
        return 0;
    return view->moveGeneration();
} 
```

他的 JNI 函数不遵循命名规则。为什么？

P/S：以上功能仅供演示。我正在阅读Android 4.0.3源码，所以可能与上面的github源码不同

**更新** 感谢@Alex Cohn 和这个[JNI Tips](http://developer.android.com/guide/practices/jni.html)，我知道我们可以使用 JNI_Onload 或使用复杂的名称。但是我们应该把 JNI_Onload 放在哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:30:51.093

JNI 定义了特殊函数**JNI_OnLoad**。它在调用任何 JNI 方法之前调用，它可以使用指向任何 C 函数的指针填充本机方法表。见[官方文档](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/invocation.html)

# apache-vysper - 如何在 vysper 环境中将 XML 解析为 Stanza 或 XmlFragment

> ID：12620292
> 
> 赞同：0
> 
> 时间：2012-09-27T11:26:12.313
> 
> 标签：apache-vysper

为了制作一个漂亮且可读的测试用例，我想解析一些手写的 XML（从 xmpp.org 复制粘贴），将其转换为 Stanza 或 XMLElement 并继续进行实际测试。所以我想完全避免节建设者。

使用非阻塞 XML 解析器可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:59:14.403

为了获得 XMLElement 解决方案是使用 DefaultNonBlockingXMLReader 并分配一个节侦听器。诀窍是启动“流”，因此要测试的节的 XML 应该包装成类似“.....

编码：

```
private Stanza fetchStanza(String xml) throws SAXException {
    try {
        NonBlockingXMLReader reader = new DefaultNonBlockingXMLReader();
        reader.setContentHandler(new XMPPContentHandler(new XMLElementBuilderFactory()));
        XMPPContentHandler contentHandler = (XMPPContentHandler) reader.getContentHandler();
        final ArrayList<Stanza> container = new ArrayList(); // just some container to hold stanza.
        contentHandler.setListener(new XMPPContentHandler.StanzaListener() {
            public void stanza(XMLElement element) {
                Stanza stanza = StanzaBuilder.createClone(element, true, Collections.EMPTY_LIST).build();
                if (!container.isEmpty()) {
                    container.clear(); // we need only last element, so clear the container
                }
                container.add(stanza);
            }
        });
        IoBuffer in = IoBuffer.wrap(("<stream>" + xml + "</stream>").getBytes()); // the trick it to wrap xml to stream
        reader.parse(in, CharsetUtil.UTF8_DECODER);
        Stanza stanza = container.iterator().next();
        return stanza;
    } catch (IOException ex) {
        throw new RuntimeException(ex);
    }
} 
```

# php - 使用 sqlite 和 codeigniter

> ID：12620294
> 
> 赞同：0
> 
> 时间：2012-09-27T11:26:23.180
> 
> 标签：php, sqlite, codeigniter

我的目标是创建一个稍后将由 iOS 应用程序下载的 sqlite 数据库文件。

我的问题是，如何使用 CodeIgniter 创建一个 sqlite 数据库文件？sqlite 文件的结构是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:29:03.263

只需使用`SQLite3`类在“原生”PHP 中创建一个新数据库，这与 CodeIgniter 无关！

```
$db = new SQLite3("todownload.db");
$db->exec("CREATE TABLE whatever ( whatever INT )"); 
```

# mysql - 声纳登录失败

> ID：12620296
> 
> 赞同：0
> 
> 时间：2012-09-27T11:26:28.260
> 
> 标签：mysql, sonarqube

我在 rhel 6.3 64 位机器上安装了声纳并将其与 mysql 数据库集成。以下是我的 sonar.properties 文件详细信息：

```
#----- MySQL 5.x/6.x
# Comment the embedded database and uncomment the following line to use MySQL
sonar.jdbc.url:                            jdbc:mysql://10.217.14.40:3306/sonar?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true

# Optional properties
sonar.jdbc.driverClassName:                com.mysql.jdbc.Driver
sonar.jdbc.username=sonar
sonar.jdbc.password=sonar
sonar.host.url=http://10.217.14.40:9000/ 
```

我还使用声纳安装中提供的脚本创建了声纳数据库、声纳用户并授予权限

```
CREATE DATABASE sonar CHARACTER SET utf8 COLLATE utf8_general_ci;
CREATE USER 'sonar' IDENTIFIED BY 'sonar'; 
GRANT ALL ON sonar.* TO 'sonar'@'%' IDENTIFIED BY 'sonar'; 
GRANT ALL ON sonar.* TO 'sonar'@'localhost' IDENTIFIED BY 'sonar'; 
FLUSH PRIVILEGES; 
```

现在，当我尝试登录声纳时，我收到“身份验证失败”消息，请有人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:35:50.033

首次安装 Sonar 的默认内置凭据是“admin/admin”。

是你用来登录的吗？

# java - 带有 Boss-Worker 的 Java 线程

> ID：12620297
> 
> 赞同：3
> 
> 时间：2012-09-27T11:26:29.093
> 
> 标签：java, multithreading, runnable, blockingqueue

我必须做功课，我已经完成了一些代码，但有一些问题：

**必须在 java 中创建一个 boss-workers 应用程序。**

1.  我有这些课程：`Main WorkerThread BossThread Job`

基本上我想做的是，`BossThread`持有 a`BlockingQueue`并且工人去那里寻找`Jobs`.

**问题一：**

目前我开始 5`WorkingThreads`和 1 `BossThread`。

主要的：

```
Collection<WorkerThread> workers = new ArrayList<WorkerThread>();
    for(int i = 1; i < 5; i++) {
        WorkerThread worker = new WorkerThread();
        workers.add(worker);
    }
BossThread thread = new BossThread(jobs, workers);
thread.run(); 
```

老板线程：

```
private BlockingQueue<Job> queue = new ArrayBlockingQueue<Job>(100);
private Collection<WorkerThread> workers;

public BossThread(Set<Job> jobs, Collection<WorkerThread> workers) {
    for(Job job : jobs) {
        queue.add(job);
    }
    for(WorkerThread worker : workers) {
        worker.setQueue(queue);
    }
    this.workers = workers;
} 
```

这是正常的，还是我应该`WorkerThreads`在我的`BossThread`?

**问题2：**

如您所见，我将队列分配给每个人`WorkerThread`，这是合理的还是我只能将队列存储在一个地方？

**问题 3：**

我必须`BossThread`以某种方式继续运行，只是为了等待用户是否将更多内容添加到队列中？以及我如何继续`WorkerThreads`运行，从队列中寻找工作？

**任何总体建议或设计缺陷或建议？**

```
public class WorkerThread implements Runnable {

    private BlockingQueue<Job> queue;

    public WorkerThread() {

    }

    public void run() {
        try {
            queue.take().start();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    public void setQueue(BlockingQueue<Job> queue) {
        this.queue = queue;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:56:50.597

首先，我注意到一个重要错误：

```
BossThread thread = new BossThread(jobs, workers));
thread.run(); 
```

`Runnable`s 必须传递给`Thread`对象，并且线程以 开头`start`，而不是`run`。通过调用`run`您可以在同一个线程上顺序执行。所以：

```
Thread thread = new Thread(new BossThread(jobs, workers)));
thread.start(); 
```

其次，除非你绝对必须使用`BlockingQueue`和明确的线程，否则我会使用`ExecutorService`. 它巧妙地封装了一个阻塞工作队列和一组工作人员（您可以设置其大小）。这基本上就是您正在做的事情，但使用起来更简单：

```
class Job implements Runnable {
    public void run() {
        // work
    }
}

...

// create thread pool with 5 threads and blocking queue
ExecutorService exec = Executors.newFixedThreadPool(5);

// submit some work
for(int i = 0; i < 10; i++) {
   exec.submit(new Job());
} 
```

就是这样！所有的`put`东西`take`都由执行者自动处理。

# c++ - 我可以从基类指针访问派生类的非虚函数吗？

> ID：12620299
> 
> 赞同：2
> 
> 时间：2012-09-27T11:26:33.460
> 
> 标签：c++, inheritance, polymorphism, virtual

我有这个代码：

```
A * a = new A;
a->fun();
delete a;

a = new B;
a->fun();
delete a; 
```

我需要做的是让它打印：

```
A::fun() //being printed by A's fun()
B::fun() //being printed by B's fun() 
```

**不**使用 virtual 关键字。尽管主要代码必须保持不变，但可以更改类。如何才能做到这一点？

（同样，`B`源自`A`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:32:26.487

我希望这是出于教育目的。

如果 is 的析构函数`a`不是`virtual`这会导致未定义的行为。所以**析构函数必须是`virtual`**.

如果析构函数是`virtual`，则可以使用`dynamic_cast`. 因此，您可以更改`A::foo`为：

```
void A::fun()
{
   if ( dynamic_cast<B*>(this) )
       ((B*)this)->fun();
   else
       std::cout << "A::fun()";
} 
```

### 非析构函数的替代方案`virtual`（如果您调用 ，则为未定义的行为`delete`）：

```
struct A
{
        bool isA;
        A(bool isA = true) : isA(isA){};
        void fun();
};
struct B : A
{
        B() : A(false){}
        void fun() {cout<<"B::fun()"<<endl;}
};

void A::fun()
{
        if (isA)
                std::cout << "A::fun()"<<endl;
        else
                ((B*)this)->fun();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:32:44.700

好吧，你可以做一些乱七八糟的事情，比如将类存储在 A 的实例数据中，并让每个构造函数设置正确的值，并让 A::fun() 检查并适当地转换/重定向。

或者您可以制作自己的虚函数表等价物——和以前一样，它是 A 的实例数据的一部分，但由每个类的构造函数填充。然后，A::fun() 只会做类似 MyTable->Fun() 的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:46:10.327

这样的事情可以帮助你。

```
class B;

class A
{
public:
   A() : instance(0) { }
   A(B* p): instance(p) { }
   virtual ~A() { }
   void foo();
private:
   B* instance;
};

class B : public A
{
public:
   B():A(this) { }
   void foo() { std::cout << "B::foo" << std::endl; }
};

void A::foo()
{
   if (!instance)
   {
      std::cout << "A::foo" << std::endl;
      return;
   }
   instance->foo();
} 
```

例如[http://ideone.com/Zd6cd](http://ideone.com/Zd6cd)

# ruby - 为什么 Ruby 不包含内置的类重载？

> ID：12620300
> 
> 赞同：1
> 
> 时间：2012-09-27T11:26:36.847
> 
> 标签：ruby, language-design, reloading

在典型的长时间运行的进程环境（例如`rails server`.

令我震惊的是，该语言最清楚 stdlib 定义了哪些常量，并且非常适合知道从哪些文件以及何时加载了哪些常量，当然还可以重新加载它们。

有一些复杂的情况`require 'foo'`，你也可以定义`Bar`，但这并不太难追踪，而且`define_const`使用过的情况也会使事情变得混乱。线程加载是另一个问题，但我确实可以看到允许线程从磁盘文件的当前状态重新加载自己的案例。（更快的测试服务器将是＃1想法）

似乎它应该是一种语言功能，而不是许多不同的人需要为之推出解决方案的东西。

**总而言之，为什么这不是语言功能？**看起来应该是这样，尽管使用配置文件几乎完全限于长时间运行的开发服务器。

这里的另一个问题可能是“为什么 Rails 不使用内置的 DRB 模型来加快开发服务器并跳过所有的类重新加载”，这也是一个有趣的讨论，但现在不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:36:23.323

为了能够自动重新加载一个类，您需要知道该类是如何构建的。鉴于 Ruby 的动态性，这仅在最微不足道的情况下很容易。在最终形成最终形式之前，有一个类被扩展和显着改变是很常见的。确定重新创建类所涉及的步骤并不容易，跟踪这些可能会严重拖累性能。

这在很大程度上归结为一个事实，即一个类是方法、实例变量、类变量、常量以及其他模块和类的集合。与 C++ 等更多的静态类型语言不同，它们可以并且将在任何时间、任何地点、出于任何原因声明。类的状态不是可以简单地重新生成的。

Rails 重新加载类的方式是执行一些技巧来确保可以处理和重新加载有问题的类。Rails 还必须提供几个钩子来通知扩展一个类正在重新加载，这样他们就可以在重建后重新对其进行操作，否则许多扩展只会加载一次。

简而言之，表面上看起来微不足道的事情实际上非常棘手。

# android - Android - 将用户选择的图像复制到自己的文件夹？

> ID：12620304
> 
> 赞同：0
> 
> 时间：2012-09-27T11:26:48.323
> 
> 标签：android, image

我正在开发一项功能，允许用户在应用程序中选择自己的背景图像。

在他们选择该图像后，是否应该将该图像复制到与应用相关的文件夹中，或者对此有何约定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:34:57.740

在这种情况下，用户可以自由地从其他文件夹层次结构中选择图片，并且用户可以删除该图片。因此，您应该将该图像的副本保存在您的应用程序文件夹中并解码该图片以用作背景。
但是用户可以多次重复此操作，保存每张图片的副本会占用大量空间，因此，您应该只创建一个文件，每次用户选择图片更改背景时都会覆盖该文件。
而且您不需要拥有非常高分辨率的图像。您应该对图像进行下采样，然后保存。
按照此[链接](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)进行有效的位图解码。

# jquery - 按子标签值的jQuery选择器

> ID：12620305
> 
> 赞同：1
> 
> 时间：2012-09-27T11:26:52.243
> 
> 标签：jquery, jquery-selectors

见下面的代码。

xml 值

```
<root>
   <item>
      <name>name 1</name>          
      <class>A</class>
      <age>15</age>
    </item>
   <item>
      <name>name 2</name>         
      <class>A</class>
      <age>15</age>
    </item>
   <item>
      <name>name 3</name>         
      <class>B</class>
      <age>15</age>
    </item>
   <item>
      <name>name 4</name>         
      <class>A</class>
      <age>16</age>
    </item>
   <item>
      <name>name 5</name>
      <class>B</class>
      <age>15</age>
    </item>
</root> 
```

我想检索具有 class = "A" AND age = 15 的项目。我们如何使用 jQuery 选择器来做到这一点。

像这样的东西

$items = $(root).find("item age='25'&&class='A'").

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:34:30.533

```
var $items = $(root).find('item').filter(function() {
    return $(this).find('age').text() == 25 && $(this).find('class').text() == 'a';
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:34:45.743

我这样做了。

```
$("item").filter(function(i){
   return $(this).find("class").text()=="A" &&  $(this).find("age").text()=="15"
       }); 
```

[jsFiddle](http://jsfiddle.net/TheJoeFletch/xbMac/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:38:19.643

我在这里了解您的问题，您可以做什么-

```
var $items = [];
$('age').each(function(){
 if($('age').html()=="15"){
   $item = $(this).parent();
   if($('class',$item).html()=="A")
      $items.push($item);
 }); 
```

现在 $items 是所有具有 class = "A" AND age = 15 的项目的数组。

# cygwin - cygpath 无法将 Windows 路径转换为 Linux 路径

> ID：12620306
> 
> 赞同：5
> 
> 时间：2012-09-27T11:26:52.823
> 
> 标签：cygwin, cygpath

我试图在 Windows 机器上将文件路径转换为/从 Linux 和 Windows 转换。

Windows 的 unix 路径工作正常。

```
$ cygpath -w /cygdrive/c/CYGWIN/CYGBuild/build.mak
C:\CYGWIN\CYGBuild\build.mak 
```

但是 Linux 的 windows 路径给出了错误的输出。即缺少'/'和cygdrive

```
$ cygpath -u c:\cygwin\cygbuild\build.mak
c:cygwincygbuildbuild.mak 
```

有人遇到过这个问题吗？？分享你的经验。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T12:08:46.457

我得到了这个问题的答案。

```
cygpath -u 'c:\cygwin\cygbuild\build.mak' 
```

即路径应该用单引号给出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T20:49:45.467

实际上据我所知；您需要在 cygwin 中使用的路径中使用**正斜杠**。单引号有助于路径中有空格（在这种情况下我的猜测是使用反斜杠而不是正斜杠）。否则反斜杠就像**转义字符**，而空格（虽然不是你的情况）需要转义字符本身。因此，引用路径往往会消除此类麻烦。

以下是帮助我理解这一点的链接：

*   [这个](http://www.stanford.edu/class/ee368/Android/Tutorial-2-OpenCV-for-Android-Setup-Windows.pdf)opencv（使用cygwin）教程，第4页，其中有一个使用的路径示例，带引号和不带引号，指示何时可能需要它们。
*   这[也](http://cygwin.com/faq-nochunks.html#faq.using.filename-spaces)非常有用；Cygwin 的常见问题解答列表，包括如何处理空格（或者在这种情况下，添加引号会有所帮助的路径中的反斜杠）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-25T14:55:51.327

cygpath 的`-m`选项可能是最简单的解决方案。Windows 软件一般接受`/`以及`\`. （可能有一些例外，但我使用的开发工具都很好。）

```
$ cygpath -m /cygdrive/c/CYGWIN/CYGBuild/build.mak

C:/Cygwin/CYGBuild/build.mak 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-13T08:25:10.833

似乎没有人解释为什么，我们这里是一个解释。

`Cygpath`将接受斜杠和反斜杠：`c:/cygwin/cygbuild/build.mak` `c:\cygwin\cygbuild\build.mak`. 然而，shell 将解释反斜杠，因此您需要阻止 shell 解释反斜杠。

您可以阻止 shell 解释参数中的反斜杠，方法是在它们前面加上一个反斜杠，或者通过引用（用单引号）：`c:\\cygwin\\cygbuild\\build.mak`或`'c:\cygwin\cygbuild\build.mak'`.

在这种情况下，双引号无济于事。双引号停止在空间上的参数中断，但不会停止对转义 ( `\`) 或美元 ( `$`) 扩展的解释。

# iphone - 如何获取通讯簿中特定组的所有联系人？

> ID：12620307
> 
> 赞同：6
> 
> 时间：2012-09-27T11:26:56.637
> 
> 标签：iphone, objective-c, ios, addressbook

嗨，我的 iPhone 通讯录中有多个群组，其中包含多个联系人。例如：

iPhone 通讯录、Group1、Group2 等

每个组都包含联系人信息，例如名字、姓氏、电子邮件、电话号码。现在通过选择任何组，我应该在其中获得添加联系人的所有详细信息。谁能指导我如何获取特定组的所有联系人详细信息？

请需要一些指导方针。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T11:47:56.077

```
CFErrorRef error = NULL;
ABAddressBookRef addrBook = ABAddressBookCreate();
CFArrayRef groups = ABAddressBookCopyArrayOfAllGroups(addrBook);
CFIndex numGroups = CFArrayGetCount(groups);
for(CFIndex idx=0; idx<numGroups; ++idx) {
    ABRecordRef groupItem = CFArrayGetValueAtIndex(groups, idx);

    CFArrayRef members = ABGroupCopyArrayOfAllMembers(groupRef);
    if(members) {
        NSUInteger count = CFArrayGetCount(members);
        for(NSUInteger idx=0; idx<count; ++idx) {
            ABRecordRef person = CFArrayGetValueAtIndex(members, idx);

            // your code
        }
        CFRelease(members);
    }
}

CFRelease(groups);
CFRelease(addrBook); 
```

此代码不保证防漏，因此请仔细检查。它或多或少是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:41:03.150

一切都在文档中进行了解释，所以请告诉使用您不了解的内容。你尝试了什么？你得到了什么，你有哪些错误？

如果您想使用联系人，除了非常完整的[通讯录编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)之外，您当然[还有通讯录框架参考](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBook/Reference/AddressBook_iPhoneOS_Framework/_index.html#//apple_ref/doc/uid/TP40007212)，尤其[是 ABGroup 参考文档](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBook/Reference/ABGroupRef_iPhoneOS/Reference/reference.html)来使用组。后者包含[一个明确的方法来获取一个组的所有成员](http://developer.apple.com/library/ios/DOCUMENTATION/AddressBook/Reference/ABGroupRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABGroupCopyArrayOfAllMembers)。所以你应该在这里拥有你需要的一切。

```
CFArrayRef cfmembers = ABGroupCopyArrayOfAllMembers(group);
NSArray* members = (NSArray*)cfmembers; // working with NSArray is usually easier that CFArrays so I like using toll-free bridging
for(ABRecordRef person in members)
{
  // ... your code ...
}
CFBridgingRelease(cfmembers); // release memory when done, following the usual memory mgmt rules 
```

# javascript - 我的 Parse.com 应用程序如何使用 JavaScript 发送电子邮件？

> ID：12620318
> 
> 赞同：17
> 
> 时间：2012-09-27T11:27:24.000
> 
> 标签：javascript, parse-platform

我正在使用 Parse.com (JavaScript SDK)，我希望用户能够从我的应用程序发送电子邮件。基本上，他们使用应用程序创建一个页面，然后我需要允许他们输入电子邮件地址列表；然后，该应用程序将向每个地址发送一个指向他们创建的页面的链接。

不过，我可以在文档中找到任何告诉我如何发送电子邮件的内容。我可以获取电子邮件地址列表并生成电子邮件，但我不知道如何发送它。

Parse 有可能吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-09T21:34:07.910

Parse Cloud Code Modules 现在支持通过多个 Cloud Mail Providers 发送电子邮件：

*   [邮筒](https://www.parse.com/docs/cloudcode/guide#cloud-code-modules-mailgun)
*   [山魈](https://www.parse.com/docs/cloudcode/guide#cloud-code-modules-mandrill)
*   [发送网格](https://www.parse.com/docs/cloudcode/guide#cloud-code-modules-sendgrid)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-24T04:16:31.303

我在这里创建了一个简单的 iOS 示例，使用 Mandrill 和 Parse Cloud Code [http://www.stlplace.com/2013/11/24/send-email-via-cloud-code-in-parse/](http://www.stlplace.com/2013/11/24/send-email-via-cloud-code-in-parse/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-19T09:39:47.610

有人可能会发现使用 Mailgun、iOS 和 Parse Cloud 的有用示例。

我决定使用 Mailgun，因为 Mandril 目前只有 4k 个免费邮件。

请注意，您必须有权访问您的域才能设置“TXT”和“CNAME”记录证明 Mailgun 您是该域的所有者。

云代码：

```
// Use Parse.Cloud.define to define as many cloud functions as you want.
// For example:
Parse.Cloud.define("hello", function(request, response) {
  response.success("Hello world!");
});

Parse.Cloud.define("mailSend", function(request, response) {

    var Mailgun = require('mailgun');
    Mailgun.initialize('DOMAIN_NAME', 'API_KEY');

    Mailgun.sendEmail({
      to: request.params.target,
      from: request.params.originator,
      subject: request.params.subject,
      text: request.params.text
    }, {
      success: function(httpResponse) {
        console.log(httpResponse);
        response.success("Email sent!");
      },
      error: function(httpResponse) {
        console.error(httpResponse);
        response.error("Uh oh, something went wrong");
      }
    });

}); 
```

现在在您的 ObjC 项目中的某个地方：

```
[PFCloud callFunctionInBackground:@"mailSend"
                   withParameters:@{
                                    @"target": @"target@mail.com",
                                    @"originator": @"from@mail.com",
                                    @"subject": @"Hey There",
                                    @"text": @"This is your iOS originated mail"
                                    }
                            block:^(NSString *result, NSError *error){

                                NSLog(@"error %@", error);
                                NSLog(@"result %@", result);

                            }]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-17T13:24:34.360

这是@uudaddy答案的android版本

```
public void sendMail(View view) {
    Map<String, String> params = new HashMap<>();
    params.put("text", "Sample mail body");
    params.put("subject", "Test Parse Push");
    params.put("fromEmail", "someone@example.com");
    params.put("fromName", "Source User");
    params.put("toEmail", "other@example.com");
    params.put("toName", "Target user");
    ParseCloud.callFunctionInBackground("sendMail", params, new FunctionCallback<Object>() {
        @Override
        public void done(Object response, ParseException exc) {
            Log.e("cloud code example", "response: " + response);
        }
    });
} 
```

服务器端 JS 代码(main.js) 解析云

```
Parse.Cloud.define("sendMail", function(request, response) {
var Mandrill = require('mandrill');
Mandrill.initialize('12AkxxxxxxxxxxxxxxrZEg');

Mandrill.sendEmail({
message: {
text: request.params.text,
subject: request.params.subject,
from_email: request.params.fromEmail,
from_name: request.params.fromName,
to: [
{
email: request.params.toEmail,
name: request.params.toName
}
]
},
async: true
},{
success: function(httpResponse) {
console.log(httpResponse);
response.success("Email sent!");
},
error: function(httpResponse) {
console.error(httpResponse);
response.error("Uh oh, something went wrong");
}
});
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-27T12:22:52.367

没有本地方法可以做到这一点。您最好的选择是等到 Parse 的 Cloud Code 支持 3rd-party HTTP 请求。我制作了一个快速模型，说明如何使用 IronWorker + Ruby 来发送电子邮件，但您当然可以使用其他语言：

[http://news.ycombinator.com/item?id=4506888](http://news.ycombinator.com/item?id=4506888)

# controller - Yii - 扩展控制器还是 CController？

> ID：12620321
> 
> 赞同：4
> 
> 时间：2012-09-27T11:27:36.853
> 
> 标签：controller, yii, class-design

我需要创建一个类，我们应该与我的所有控制器共享相同的方法，或者几乎所有控制器。

所以，我一直在寻找扩展控制器，但是，我注意到`Controller Class`已经扩展了另一个类`CController`。

我很困惑。

我们应该创建自己的类并**扩展** `CController`、**扩展** `Controller`或**使用** `Controller`类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:34:00.300

**您可以在Controller**中编写您的公共/共享方法，该类仅用于此目的（即您的类，做任何您想做的事）。无需创建另一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-10T17:17:32.190

它们之间有一点区别；控制器只是`CController`.

在测试应用程序中，它用于为从 Controller 派生的所有控制器提供附加变量。例如，它用于布局视图文件的设置`$breadcrumbs`和`$layout`菜单。`$variables`

在您的项目中扩展`YII`基类（以“C”符号开头）是一种很好的做法——框架更新不会触及基类，`YII`并且代码会更加解耦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:55:48.097

Controller 只是 CController 的一个子类。在此类代码中，定义了布局的 $breadcrumbs、$layout 和菜单 $variables。如果你在 SiteController 中使用 CController 而不是控制器，你会得到错误。

# actionscript-3 - 如何在 ActionScript 中计算前一个工作日？

> ID：12620325
> 
> 赞同：0
> 
> 时间：2012-09-27T11:27:43.827
> 
> 标签：actionscript-3, apache-flex

如何在 ActionScript 中计算上一个营业日期？我正在通过 flashvars 将当前服务器日期时间传递给 flex，但无法从提供的日期获取确定前一个工作日的逻辑？（工作日为周一至周五）你能在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:33:47.770

1.  将时间转换为 Date 对象
2.  从中读取星期几
3.  减去每个工作日的 24 小时（例如，如果是星期天，那么如果星期六只有 24 小时，则减去 48 小时）

此致

# node.js - 如果字段是 Date 类型，我如何在 mongodb 中知道？

> ID：12620328
> 
> 赞同：7
> 
> 时间：2012-09-27T11:27:49.380
> 
> 标签：node.js, mongodb, date

我正在开发一个 NodeJS+Mongodb 应用程序。

我刚刚使用控制台客户端将一条记录插入 mongodb：

```
db.user.save({myId:11111, myDate: ISODate("2012-04-30T00:00:00.000Z")}) 
```

问题是，当我在 node.js 中时，我需要知道“myDate”字段是否真的是 Date 类型，以便执行数据范围查询等。

我尝试了以下。

**1.在mongo客户端控制台上：**

```
typeof db.user.myDate --> It returns "Object"
db.user.myDate instanceof Date --> It returns "false" 
```

**2\. 在我的 Nodejs 代码上，**

我正在尝试获取调用此`getTypeMembers`函数的类型。（来自 db 查询的 obj）

```
exports.getTypeMembers = function(obj) {
obj = JSON.parse(JSON.stringify(obj)

for(var _k in obj){
    if(Object.prototype.toString.call(obj[_k]) === '[object Array]' ) {
        obj[_k] = "Array";
    }
    else if(typeof(obj[_k])=="object"){
        obj[_k] = this.getTypeMembers(obj[_k]);
    }else{
        obj[_k] = typeof (obj[_k]);
    }
}
return obj; 
```

};

我在这种方法中得到的是：`"String"`，当我需要时`"Date"`

有没有其他方法可以获得某种`"Date"`结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:43:25.930

您可以使用 $type 运算符来查询特定类型的字段：

```
db.col.query({a: {$type: 9}}) 
```

9 是日期类型的数字，请参阅 [http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24type](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24type)

至于确定 node.js 内部的类型，这取决于您的驱动程序。我没有使用过，但它可能是一个特定的原型，就像 ObjectId 一样。也许您可以检查对象并查找构造函数名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T09:30:03.727

我终于找到了我的解决方案。

正如@christkv 所说，一旦您调用 JSON 字符串化，所有原始类型肯定会丢失。所以，以这种方式思考，我的方法`getTypeMembers`非常适合我。

请注意，obj参数来自数据库，并且直接省略了“_id”（mongodb标识符）以避免执行递归函数时出现问题：

```
exports.getTypeMembers = function(obj) {
    for(var _k in obj){
        if (_k =="_id") continue;
        if (Object.prototype.toString.call(obj[_k]) === "[object Number]"){
            obj[_k] = "Number";
        }else if (Object.prototype.toString.call(obj[_k]) === "[object String]"){
            obj[_k] = "String";
        }else if (Object.prototype.toString.call(obj[_k]) === "[object Date]"){
            obj[_k] = "Date";
        } else if(Object.prototype.toString.call(obj[_k]) === '[object Array]' ) {
            obj[_k] = "Array";
        } else if(typeof(obj[_k])=="object"){
            obj[_k] = this.getTypeMembers(obj[_k]);
        } else{
            obj[_k]  = (typeof obj[_k])[0].toUpperCase() + (typeof obj[_k]).slice(1);
        }
    }
    return obj;
}; 
```

在 Mongo 控制台部分，我只能获得执行以下操作的类型：

```
db.user.find({},{myDate:1}).forEach(function(f) { print (f.myDate instanceof Date) } ); 
```

但如果我这样做，

```
typeof db.user.myDate --> It returns "Object"
db.user.myDate instanceof Date --> It returns "false" 
```

我仍然不明白为什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T14:26:08.047

我对使用有点困惑

```
db.user.myDate 
```

在你的例子中。您是否正在对 node-mongodb-native 给您的 Db 对象进行精确调用？如果是这样，您应该得到未定义，因为您实际上并没有查询数据库，而是检查 Db javascript 对象的属性（几乎可以肯定的属性不存在）。

您能否发布您从 node.js 进程运行的代码？我使用相同的 shell 插入测试了您的代码，一旦我从 node.js 中的数据库中检索到文档，

```
doc.myDate instanceof Date 
```

返回真。

我也不熟悉您的应用程序，但对我来说，查询您不知道数据类型的集合似乎是不明智的。为什么您不确定其他应用程序对 myDate 字段使用什么类型的值？

**编辑：**

```
var coll = new mongo.Collection(client, 'user');
    coll.find({}).toArray(function(err, docs) {
    docs.forEach(function (doc) {
        console.log(doc);
        console.log(doc.myDate instanceof Date);
    });
}); 
```

在将相同的外壳插入到您的外壳后，在 nodejs 中运行时为我记录“真”。如果你运行它会发生什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T18:15:05.080

从您最近的编辑来看，我相信我看到了问题。您正在将文档解析为 JSON。与 BSON 不同，JSON 不支持 BSON 对象的文字创建和存储。该`ISODate`对象是 BSON 数据类型。

因此，当您转换为 JSON 时，您实际上会丢失此对象。

您可以通过两种方式解决此问题：

*   在检查字段类型之前不要转换为 JSON
*   每个对象都有属性。Date 没有什么不同，它应该有一个`$date`属性（我相信），您可以检查该属性是否`isset`为 date 类型

# xcode - 无法点击 UITextField (iOS 6)

> ID：12620330
> 
> 赞同：2
> 
> 时间：2012-09-27T11:27:53.370
> 
> 标签：xcode, uitextfield, ios6

我在 .xib 中有一个 UITextField 和 UIButton。按钮位于字段下方且处于非活动状态（用户交互已禁用）。

用户点击 textField，然后出现键盘，用户可以输入文本...

问题：一些使用 iOS6 的用户无法点击 textField（键盘未出现），但在其他视图上一切正常（并且在 iOS5 上运行完美）。

我已经在不同的设备上测试了我的应用程序，但我无法重现错误：它正在正常工作。

也许有人知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:25:55.027

这可能有帮助，也可能没有帮助，但我想我会提供一个答案，以防万一它对你有所帮助。

您的控制器是如何组织的？当您可以重新排列结构并简化事物时，您是否正在更新 Nav 控制器（或类似控制器）？

我的应用程序遇到了类似的问题，其中文本字段在 iOS4 中有效，但在 iOS5 中无效。事实证明，是我的控制器的组织导致了问题，因为它在语义上不正确。我有一个带有 2 个按钮（一个登录和一个注册）的场景，每个按钮都生成了一个新的导航控制器，上面有适当的场景。用于输入电子邮件/密码的字段在 iOS4 中有效，而在 iOS5 中无效。

我重新安排了一些东西并把导航控制器放在第一位（在登录和注册的场景之前），所以这个导航控制器被重复使用，而不是在你来回移动时让另外 2 个控制器更新并杀死。一切都很好。

希望有帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T00:20:29.310

我的 iPhone App 也有同样的问题，

我通过杀死以下方法来修复它：

`- (void)viewWillAppear:(BOOL)animated`

`- (BOOL)isViewLoaded`

出于某种原因，当您在文本字段上点击手指时，它们会使键盘无响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T11:18:40.200

这可能会有所帮助。我们有一个类似的问题，它与故事板有关。如果您使用情节提要，请删除通向视图控制器的 segue，然后重新链接视图控制器。这没有任何意义，但这就是解决我们问题的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-06T18:42:47.587

对我来说，我试图在单击文本字段时显示 UIPicker。所以，我的 ViewController 符合 UITextViewDelegate。因此，我有以下功能：

```
func textFieldShouldBeginEditing(textField: UITextField) -> Bool {
    if (textField == districtTextField) {
        districtPickerView.hidden = false
    }
    return false
} 
```

问题是我为所有字段返回 false，我只需要为控制 UIPicker 的字段返回 false。这是正确的版本

```
func textFieldShouldBeginEditing(textField: UITextField) -> Bool {
    if (textField == districtTextField) {
        districtPickerView.hidden = false
        return false
    }
    return true
} 
```

# c# - umbraco API：尝试获取给定站点节点的文档类型数据

> ID：12620331
> 
> 赞同：0
> 
> 时间：2012-09-27T11:27:52.893
> 
> 标签：c#, api, umbraco

只是想了解如何通过 API 方法从 umbraco 检索数据。我相信我们正在使用 umbraco 4.9.x。

基本上有一个名为 DiaryEventItems 的数据类型，我使用以下代码来访问它：

```
// Get the ID of the data type
DocumentType DocTypeDiaryEvents = DocumentType.GetByAlias("DiaryEventItems");

// Loop through those items using a foreach at present
foreach (Document DiaryEvent in Document.GetDocumentsOfDocumentType(DocTypeDiaryEvents.Id))
{
    // Do whatever I need to
} 
```

所以这很好用..我取回了“DiaryEventItems”的集合/行，但是我当然从 umbraco 实例中获得了所有 DiaryEventItems.. 即所有站点。所以很明显有一些方法可以获取站点根节点 ID，并且可能会沿着树向下工作以获得我需要的实际文档类型，但是有一些类似于上面代码的方法吗？

任何帮助表示感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:40:20.860

您可以仅针对已发布节点尝试以下功能：

```
// this is variable to retrieve Node list
private static List<Node> listNode = new List<Node>();

public static List<Node> GetDescendantOrSelfNodeList(Node node, string nodeTypeAlias)
{
    if (node.NodeTypeAlias == nodeTypeAlias)
        listNode.Add(node);

    foreach (Node childNode in node.Children)
    {
        GetDescendantOrSelfNodeList(childNode, nodeTypeAlias);
    }

    return listNode;
} 
```

现在您可以在代码中调用该函数，如下所示：

```
// 1234 would be root node id
Node rootNode = new Node(1234)

// we are passing root node so that it can search through nodes with alias as DiaryEventItems
List<Node> diaryEventItems = GetDescendantOrSelfNodeList(rootNode, "DiaryEventItems"); 
```

我希望这会有所帮助，如果您正在寻找带有 Document 的未发布节点及其不同的节点，并且会花费一些时间，但是如果您只想要未发布的节点，那么我稍后再做。

# android - 不同分辨率的文本大小

> ID：12620343
> 
> 赞同：17
> 
> 时间：2012-09-27T11:28:26.267
> 
> 标签：android, android-layout, text, resolution

我正在使用galaxy tab 1、7inch hdpi和galaxy tab plus、7 inch hdpi但分辨率更高，在我的应用程序中，可以在galaxy tab中很好地阅读文本，但在galaxy tab plus中有太多的小。我在字体大小和布局中使用 sp。任何想法？谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-27T11:40:50.203

如果您想以编程方式设置大小，这应该对您有所帮助。文本将在每台设备上以相同大小显示

```
TextView text = new TextView(this);
text.setText("text");
text.setTextSize(16 * getResources().getDisplayMetrics().density); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-27T11:40:23.477

根据硬件规格，Galaxy Tab 1 是 MDPI 设备，但由于它使用 Android 2.x，三星以编程方式将其设置为使用 HDPI 资源。所以我可以建议你做到以下几点：

1.  `dimens.xml`在`values`目录中创建文件。
2.  放在那里`<dimen name="font_size">30sp</dimen>`。这是默认字体大小。
3.  `dimens.xml`在`values-large`目录中创建文件。
4.  放在那里`<dimen name="font_size">20sp</dimen>`。这是 Galaxy Tab 1 的字体大小。
5.  `dimens.xml`在`values-sw600dp`目录中创建文件。
6.  放在那里`<dimen name="font_size">30sp</dimen>`。这是其他搭载 Android 3.x 及更高版本的平板电脑的字体大小。
7.  在布局中指定`android:textSize="@dimens/font_size"`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-09-27T11:37:26.817

您只需要创建与密度或屏幕尺寸相关的不同文件夹，例如

**选项1。**

```
values-large
values-small
values-normal 
```

有关更多说明，请查看此链接...

[多屏支持](http://developer.android.com/training/multiscreen/screensizes.html)

**选项 2。**

```
mTextView.setTextSize(16 * getResources().getDisplayMetrics().density); 
```

这将根据密度给出**TextSize ..**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-28T07:43:57.690

(1)I think using "dp" or "dip" for text is better than using "sp" because dp(density pixel) adjusts according to screen density. So text will look bigger on High-density devices and smaller on low-density devices.

(2) OR if you specifically want to use "sp" for text size, then you can detect the device density and then set the size of text accordingly:

```
 DisplayMetrics displayMetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
    switch(displayMetrics.densityDpi){ 
        case DisplayMetrics.DENSITY_LOW: 
            //set text-size for low-density devices.
            break; 
        case DisplayMetrics.DENSITY_MEDIUM: 
            //set text-size for medium-density devices.
            break; 
        case DisplayMetrics.DENSITY_HIGH: 
            //set text-size for high-density devices.
            break; 
    } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-27T11:38:14.520

尝试这个：

像这样

```
android:textSize= "10sp" 
```

**sp**

> Scale-independent Pixels - 这类似于 dp 单位，但它也根据用户的字体大小偏好进行缩放。建议您在指定字体大小时使用此单位，以便根据屏幕密度和用户偏好进行调整。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-27T11:36:52.417

最好使用不同的值，请看一下-

[android中的不同值文件夹](https://stackoverflow.com/questions/21280277/different-values-folders-in-android)

更多看看

[http://developer.android.com/guide/topics/resources/more-resources.html#Dimension](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)

[设备无关像素的基础知识](https://stackoverflow.com/questions/4707320/basics-of-device-independent-pixels)

或者

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-27T11:35:44.603

您可以使用任何尺寸，[该](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)市场*基于屏幕的物理尺寸*。比所有设备上的文本都具有相同的物理大小。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-12-18T22:15:14.337

下面的代码使用用户的系统字体大小设置调整 textView 中的字体大小缩放。

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getRealSize(size);
int screenWidth = size.x;
float fontscale = getResources().getConfiguration().fontScale;
float textSize = (screenWidth/ fontscale)/10;
Log.e(TAG, "textSize is:  " + textSize);
yourTextView.setTextSize(TypedValue.COMPLEX_UNIT_SP,  textSize); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-08-07T06:12:14.387

TextView headerTextView（字符串标签）{

```
 TextView headerTextView = new TextView(this.context);
    float scale = context.getResources().getDisplayMetrics().density;
    if(scale > 2.0) {
    headerTextView.setWidth(210);
    headerTextView.setHeight(120);
    headerTextView.setTextSize(17);
    }
    else {
        headerTextView.setWidth(125);
        headerTextView.setHeight(60);
        headerTextView.setTextSize(21);
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-25T03:52:17.600

对于 textSize，谷歌建议使用 'sp' 而不是 'dp' ![在此处输入图像描述](../Images/10a07c0b0604f8a643838a11f930c244.png)

检查此链接 [http://developer.android.com/design/style/typography.html](http://developer.android.com/design/style/typography.html)

并且为了支持多个屏幕的字体大小，您应该为每个屏幕大小创建新资源 [http://developer.android.com/guide/topics/resources/more-resources.html#Dimension](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-28T07:57:53.113

简而言之，您可以利用[可扩展的 DP](https://github.com/intuit/sdp)和[可扩展的字体](https://github.com/intuit/ssp)方法。

Android 项目结构固有地允许通过在 dimens.xml 文件中定义支持的屏幕尺寸来指定不同的字体大小 (SP) 和边距值 (DP)。但是仍然存在的问题是 - 要使用什么值？UX 设计师通常只为一组（例如 360x640 DP 屏幕尺寸）提供样式指南，而不提供所有其他受支持的屏幕尺寸。因此，为其他受支持的屏幕尺寸使用正确的值的问题仍然没有得到解决。

一个好的解决方案（根据我的理解）是使用dimens.xml 文件的现成可扩展字典，类似于[该](https://github.com/intuit/ssp/tree/master/ssp-android/src/main/res)库提供的文件字典。将这些 xml 文件添加到项目后，您只需使用布局中的键，然后 Android 会自动使用相应目录中的字体/边距值。请参阅[此处](https://github.com/intuit/sdp)了解视觉差异 - 使用和不使用这种方法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-20T08:40:11.353

TextView tv = new TextView(context); tv.setText("Hello World");

// 值是缩放像素 (SP) tv.setTextSize(TypedValue.COMPLEX_UNIT_SP, 20f);

// 值为设备独立像素 (DIP) tv.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 20f);

// 值为原始像素 (PX) tv.setTextSize(TypedValue.COMPLEX_UNIT_PX, 20f);

// 值以点为单位 (PT) tv.setTextSize(TypedValue.COMPLEX_UNIT_PT, 20f);

// 值以毫米 (MM) 为单位 tv.setTextSize(TypedValue.COMPLEX_UNIT_MM, 20f);

// 值以英寸 (IN) 为单位 tv.setTextSize(TypedValue.COMPLEX_UNIT_IN, 20f);

# pkcs#12 - 使用 openssl 将 mykeystore.pfx 导出到 X.509 证书

> ID：12620345
> 
> 赞同：1
> 
> 时间：2012-09-27T11:28:46.240
> 
> 标签：pkcs#12

我已经使用命令行 keytool 生成了 mykeystore.pfx。谁能告诉我如何使用 openssl 生成 X.509 证书（PEM）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:16:29.943

我发现这是生成相同的一种方法：

**openssl pkcs12 -in mykeystore.pfx -out mykeystore.pem -nodes**

# php - php 扩展如何访问 http 标头

> ID：12620354
> 
> 赞同：1
> 
> 时间：2012-09-27T11:29:02.147
> 
> 标签：php, c++, c, php-extension

我正在用 C/C++ 编写 PHP 扩展，我需要访问（只读）与请求一起发送的 http 标头。我尝试了 SAPI，但我失败了。:(

有没有可移植的解决方案（带有工作源代码）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-27T08:51:49.257

This is the way you can traverse the list of http headers and output each:

```
zend_llist_position pos;
sapi_header_struct* h;
for (h = (sapi_header_struct*)zend_llist_get_first_ex(&SG(sapi_headers).headers, &pos);
     h;
     h = (sapi_header_struct*)zend_llist_get_next_ex(&SG(sapi_headers).headers, &pos))
{
    php_printf("SAPI! %.*s <br/>", h->header_len, h->header);
} 
```

# asp.net - 如何在我的 asp.net 页面中显示 MessageBox？

> ID：12620356
> 
> 赞同：-2
> 
> 时间：2012-09-27T11:29:05.467
> 
> 标签：asp.net

如何在我的 ASP.NET 页面中显示 MessageBox？完成后，我希望 bZ 显示一条消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:03:27.227

在我的项目中，我在使用单击删除按钮时显示消息框以进行确认，并显示如下所示的 div

在我看来，我有一个 div 用于显示消息

```
<div id="dialog-confirm" title="Delete Country">
    <p>
        Are you soure you wont to delete this record ?</p>
</div> 
```

我的删除链接按钮是

```
<asp:LinkButton id="lnkShow" runate="server" class="lnkDelete"></asp:LinkButton> 
```

我像这样使用这个链接

```
<script type="text/javascript">
    $(function () {
        $(".lnkDelete").button();       
        $("#dialog-confirm").dialog({
            autoOpen: false,
            model: true,
            width: 300,
            resizable: false,
            height: 200
        });

        $(".lnkDelete").click(function (e) {
            e.preventDefault();
            var targeturl = $(this).attr("href");

            $("#dialog-confirm").dialog({
                buttons: {
                    "Confirm": function () {
                        window.location.href = targeturl;
                    },
                    "Cancel": function () {
                        $(this).dialog("close");
                    }
                }
            });
            $("#dialog-confirm").dialog("open");
        });
    });
</script>
        } 
```

我想这会对你有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:39:17.660

尝试使用：
在文件后面的代码

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        ClientScript.RegisterStartupScript(this.GetType(), "Alert", "alert('hello World');", true);
    } 
```

在 aspx 文件上：

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:49:26.567

所有的网络表单加密答案是怎么回事？仅仅因为他碰巧在使用 webforms 并不意味着 webforms 解决方案是一个好的解决方案。

使用任何一个

```
<script type="text/javascript"> alert('hello world');</script> 
```

或者

```
<script type="text/javascript"> confirm('are you there?');</script> 
```

用于消息框或确认框

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:30:59.630

简单的方法是

```
Response.Write("<script>alert('Hello');</script>"); 
```

或者

```
string script = "<script type=\"text/javascript\">alert('Hello world');</script>"; 
if (!page.ClientScript.IsClientScriptBlockRegistered("alert"))
{
 page.ClientScript.RegisterClientScriptBlock(page.GetType(), "alert", script, false);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:52:50.910

你可以使用[这个](http://needim.github.com/noty/)jquery插件

在后面的代码中：

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "Key", "noty({ text: '<div>Thanks<br/><br/>Saved!</div>', layout: 'center', type: 'information' });", true); 
```

# c# - 从 CRM Dynamics 获取不规则数据

> ID：12620358
> 
> 赞同：1
> 
> 时间：2012-09-27T11:29:12.907
> 
> 标签：c#, xml, dynamics-crm

我创建了一个获取 XML，它为我提供了营销列表中的所有联系人。我还想将列表的名称烘焙到输出中。我已经找到了两种方法来实现这一点，但没有一种方法能让迂腐的我满意。

1.  转到数据库并将名称作为单独的请求获取。
2.  有一个额外的列，其中包含每个联系人的营销列表的名称。

我将从 CRM 获得多个（甚至可能是全部）营销列表，因此第二个版本似乎最合适，因为我会打一个电话并将其全部放入我将使用的数据结构中（DataSet 等很有趣） . 问题是我们得到了很多冗余。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:07:24.990

您能否将营销列表名称添加到获取中？

例如：

**询问：**

```
<fetch mapping="logical" count="50" version="1.0">
    <entity name="list">
        <attribute name="listname" />
        <link-entity name="listmember" from="listid" to="listid">
            <link-entity name="contact" from="contactid" to="entityid">
                <attribute name="fullname" />
            </link-entity>
        </link-entity>
    </entity>
</fetch> 
```

**结果：**

```
<resultset morerecords="0" paging-cookie="&lt;cookie page=&quot;1&quot;&gt;&lt;listid last=&quot;{4EDF9ECA-A108-E211-801E-00155D505002}&quot; first=&quot;{4EDF9ECA-A108-E211-801E-00155D505002}&quot; /&gt;&lt;/cookie&gt;">
    <result>
        <listname>Test Marketing List Name</listname>
        <listid>{4EDF9ECA-A108-E211-801E-00155D505002}</listid>
        <entityid.fullname>James Maths Wood</entityid.fullname>
    </result>
    <result>
        <listname>Test Marketing List Name</listname>
        <listid>{4EDF9ECA-A108-E211-801E-00155D505002}</listid>
        <entityid.fullname>James Wood</entityid.fullname>
    </result>
    <result>
        <listname>Test Marketing List Name</listname>
        <listid>{4EDF9ECA-A108-E211-801E-00155D505002}</listid>
        <entityid.fullname>WoodJ Test</entityid.fullname>
    </result>
</resultset> 
```

[另一方面，您是否看到过http://www.stunnware.com](http://www.stunnware.com)提供的 Stunnware 工具中包含的 FetchXml 构建器，它适用于 Crm 4，但几乎可以处理我需要创建的每个 2011 提取。注意：它没有正确地为上面的营销列表创建获取，我必须手动将要联系的链接实体更改为 contactid。

# delphi - 如何将 TRTTIInstanceType obj 引用转换为其实际对象引用？

> ID：12620359
> 
> 赞同：3
> 
> 时间：2012-09-27T11:29:18.783
> 
> 标签：delphi

我正在尝试使用扩展的 RTTI 功能这是我卡住的地方。

```
t := (c.FindType('Classes.TStringList') as TRttiInstanceType);
SL := t.GetMethod('Create').Invoke(t.MetaclassType,[]);
t.GetMethod('Add').Invoke(SL,['Hello Do you like my hat?']);
Lines := t.GetProperty('Text').GetValue(SL.AsObject); 
```

直到现在它工作正常现在我想改变价值

```
Lines := 'Test';

t.GetProperty('Text').SetValue(**?**,Lines); 
```

我应该在这里给出 TRTTIinstancetype 引用或实际对象引用。如果实际对象引用我将如何给出。

```
TestStringList := t(**how will i get the actual object from this TRTTIinstancetype**). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:42:15.310

首先，如果您打算将 Rtti 用于所有这些任务，我将回答应该如何正确完成它，但在这种情况下，可以避免使用 Rtti。例如：

由于您正在使用此行创建字符串列表：

```
SL := t.GetMethod('Create').Invoke(t.MetaclassType,[]); 
```

您可以稍后将其用作 TStringlist 而无需使用 Rtti：

```
var
  SL: TStringList;
...
begin
...
    SL := (t.GetMethod('Create').Invoke(t.MetaclassType,[]).ASObject) as TStringList; 
```

所以你可以打电话：

```
SL.Text := Lines; 
```

代替：

```
t.GetProperty('Text').SetValue(SL.AsObject,Lines); 
```

但是，如果您想将 Rtti 用于所有这些任务，您不应该这样做：

```
SL := t.GetMethod('Create').Invoke(t.MetaclassType,[]); 
```

如果 Create 方法不是构造函数怎么办？TStringList 可以，但对于某些其他类型可能会失败。最好有单独的函数来使用 Rtti 创建对象或使用普通的 TClass 来完成此任务：

如果要调用不带参数的构造函数：

```
SL := t.MetaclassType.Create; 
```

另外一个选项：

```
function CreateType(AType: TRttiType): TObject;
var
  AMethCreate: TRttiMethod;
  instanceType: TRttiInstanceType;
begin
  if AType.IsInstance then
  begin
    for AMethCreate in AType.GetMethods do
    begin
      if (AMethCreate.IsConstructor) and (Length(AMethCreate.GetParameters) = 0) then
      begin
        instanceType := AType.AsInstance;
        Result := AMethCreate.Invoke(instanceType.MetaclassType, []).AsObject;

        Exit;
      end;
    end;
  end;
  Result := nil;
end; 
```

...

```
var
  SL: TObject;

SL := CreateType(c.FindType('Classes.TStringList')); 
```

...

```
t.GetProperty('Text').SetValue(SL,Lines); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T11:44:54.663

的`Instance`参数与的参数`SetValue`完全相同。因此，您只需要准确传递调用. 即：`Instance``GetValue``GetValue``SL.AsObject`

```
t.GetProperty('Text').SetValue(SL.AsObject, Lines); 
```

* * *

关于问题的最后一部分，如果您需要转换`SL`为具有特定类的对象，`TStringList`在这种情况下，您可以使用运行时强制转换：

```
MyStringList := SL.AsObject as TStringList; 
```

但是，这样做反而意味着您不需要首先使用 RTTI。使用我回答的第一部分中的方法是 RTTI 执行您所要求的方法。

# javascript - 找到没有样式的 div 显示 none 并在每隔一个 div 插入一个分页样式

> ID：12620362
> 
> 赞同：1
> 
> 时间：2012-09-27T11:29:29.833
> 
> 标签：javascript, jquery

最初所有 div 都具有 style display none 属性。如果其中有任何内容，我将通过 jquery show 方法启用 div，我想找到没有样式 display:none 的 div，并且在每个第二个活动 div 之后，我想插入一个 css 用于分页符-之后：始终用于打印目的。当用户打印时，我希望一页中只有 2 个 div。所以在这个例子中，我想在 par4 和 par8 上插入 css 用于分页符

（所以简而言之，找到没有样式的 div 显示 none 并在每个第二个 div 上插入一个分页样式）

```
<div id="parent">
<div class="flip" id="par1" style="display:none;">empty</div>                     
<div class="flip" id="par2">Image/content</div>                           
<div class="flip" id="par3" style="display:none;">empty</div>                       
<div class="flip" id="par4">Image/content</div>                            
<div class="flip" id="par5" style="display:none;">empty</div>                        
<div class="flip" id="par6">Image/content</div>                         
<div class="flip" id="par7" style="display:none;">empty</div>                             
<div class="flip" id="par8">Image/content</div>                                             
<div class="flip" id="par10" style="display:none;">empty</div> 
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:38:11.683

这里：

```
$( '#parent' ).children( ':visible:odd' ).css( 'page-break-after', 'always' ); 
```

**现场演示：http:** [//jsfiddle.net/KxGKG/2/](http://jsfiddle.net/KxGKG/2/)

虽然我建议设置一个 CSS 类，而不是内联编写样式。设置/取消设置类比直接设置样式更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:35:38.283

也许这可以帮助你，但 CSS 不是更好的解决方案吗？

```
$(function() {
    $(".flip:nth-child(even)").css({ 'page-break-after': 'always' });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:36:27.833

带有 each 循环的 jQuery :visible 选择器可以解决问题。

```
$('.flip:visible').each(function(idx, elm) {
    if(idx & 1 == 1) { // every 2nd one
        $(this).css('page-break-after', 'always');
    }
}); 
```

**编辑** 第 n 个（偶数）选择更优雅（和短代码）。

# java - Java如何在抽象类中可选覆盖方法？

> ID：12620365
> 
> 赞同：21
> 
> 时间：2012-09-27T11:29:37.683
> 
> 标签：java, class, methods, abstract

假设我们有一个基类：

```
public abstract class BaseFragment extends Fragment {
    ...
    protected abstract boolean postExec();
    ...
} 
```

然后从中派生出其他类（例如 Fragment_Movie、Fragment_Weather ...）

```
public class Fragment_Music extends BaseFragment{
    @Override
    protected boolean postExec() {
        return false;
    } 
} 
```

但是，当向基类添加新方法时：

```
public abstract class BaseFragment extends Fragment {
    ...
    protected abstract boolean postExec();
    protected abstract boolean parseFileUrls();
    ...
} 
```

Eclipse 立即显示错误，要求在已经派生的类中实现这个新方法。

是否可以在基类中添加一个“默认”抽象方法，以便即使我们不在派生类中实现它也不会显示错误？（因为每次基类附加新方法时，修复每个派生类都需要花费大量时间。）

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-27T11:34:51.187

最简单的解决方案是添加带有存根实现的方法。将其声明为抽象*需要*非抽象扩展来实现该方法。

做这样的事情会缓解你的编译问题，尽管它在没有覆盖的情况下使用时显然会抛出异常：

```
public abstract class BaseFragment extends Fragment {
    protected boolean doSomethingNew() {
        throw new NotImplementedException("method not overridden");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:44:34.080

仅抽象类（包括接口）不应从其基类声明所有方法。

因此，例如扩展一个基类或实现一个接口的接口或抽象类不必声明所有方法。未实现的方法的实现将是第一个更深的具体子类的工作。

因此，对于您的问题，您最终可以使用组合而不是继承，将协作者（包含新的通用方法）添加为基类的受保护字段。

因此，无需在您的具体类中实现任何内容，并允许这些类在适当的子类方法中使用协作者的方法。

您可能对`Bridge pattern`谁的目标感兴趣（来自维基百科）：

> 桥接模式是软件工程中使用的一种设计模式，旨在“将抽象与其实现分离，以便两者可以独立变化”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:35:12.387

抽象方法的目的是*强迫*你去实现它们。

如果在超类中添加抽象方法，则必须重构代码并提供实现；即使使用默认实现，您的程序也会不一致 - 如果您需要返回自定义类型怎么办？我会花时间提供正确的实现，因为如果我添加了这些方法，我可能需要调用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:50:40.900

您可以使用基类中的新抽象方法派生一个新的抽象类。派生应该具有来自这个新类的新方法和来自旧基类的其他方法的具体类。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-27T11:32:24.683

使您的公共 BaseFragment 类抽象

```
 public abstract class Fragment_Music extends BaseFragment{
              @Override
protected boolean postExec() {
    return false;
} 

    } 
```

# c# - 列表值比较

> ID：12620367
> 
> 赞同：0
> 
> 时间：2012-09-27T11:29:44.683
> 
> 标签：c#, .net, unit-testing, list

> **可能重复：**
> [如何找出两个字符串数组是否相等](https://stackoverflow.com/questions/6196526/how-to-find-out-whether-two-string-arrays-are-equal-to-other)

如何断言两个列表包含相同的项目？

```
string[] arr1 = listvalue.ToArray();
string[] arr2 = listvalueMain.ToArray();
for (int i = 0; i < 5; i++)
{
    Assert.AreEqual(arr1[i], arr2[i]);
} 
```

这显示了一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:33:14.633

使用`CollectionAssert.AreEqual()`或其他类似方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:31:38.800

您可以使用[`SequenceEqual`](http://msdn.microsoft.com/en-us/library/bb348567.aspx)来检查元素是否相同且顺序相同。

```
bool areEqual = listvalue.SequenceEqual(listvalueMain); 
```

或者干脆

```
Assert.IsTrue(listvalue.SequenceEqual(listvalueMain)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:36:35.317

你可以这样做：

```
foreach (string item in firstList)  
{  
    if (secondList.Contains(item))  
    {  
        MessageBox.Show("Item found" + item);  
    }
} 
```

# objective-c - popToRootViewControllerAnimated 导致应用程序在设备方向更改时崩溃

> ID：12620368
> 
> 赞同：1
> 
> 时间：2012-09-27T11:29:53.150
> 
> 标签：objective-c, xcode, poptoviewcontroller

我正在开发一个基于导航的项目。

要从 A 到 B，我这样做：

```
First *firstClass=[[First alloc] initWithNibName:@"first" bundle:nil];

  [self.navigationController pushViewController:firstClass animated:YES]; 
```

然后从 B 到 C，我这样做：

```
 Second *secondClass=[[Second alloc] initWithNibName:@"Second" bundle:nil];

 [self.navigationController pushViewController:secondClass animated:YES];

Now, in C, I do this,trying to get back to A:

- (IBAction)goBack: (id)sender

{

[self.navigationController popToRootViewControllerAnimated:YES];

} 
```

通过这样做，我可以成功导航回 A ，但是当我应用程序崩溃时

向后移动后更改 A 中的设备方向，因为它不会崩溃，当 A 是

第一次加载。对此有什么帮助吗？

# java - Java 导入如何工作？

> ID：12620369
> 
> 赞同：63
> 
> 时间：2012-09-27T11:30:03.773
> 
> 标签：java

我想知道该`import`声明是如何工作的。

我问这个是因为我的`imports`项目中有以下内容：

```
import static com.googlecode.javacv.jna.highgui.cvCreateCameraCapture;
import static com.googlecode.javacv.jna.highgui.cvGrabFrame;
import static com.googlecode.javacv.jna.highgui.cvReleaseCapture;
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FrameGrabber;
import com.colorfulwolf.webcamapplet.gui.ImagePanel;
import com.googlecode.javacv.OpenCVFrameGrabber;
import com.googlecode.javacv.jna.cxcore.IplImage; 
```

我的项目中没有这些包，那么，如何导入？

如果我用我的所有类创建一个 JAR 文件，我的服务器将在哪里托管这个 JAR 文件，必须免费上网才能获得这些`package`？

我`Applet`有这些进口的问题，我在问这个问题，以了解是否可以成为互联网规则。

```
<applet code="com.colorfulwolf.webcamapplet.WebcamApplet"
archive="http://san.redenetimoveis.com/teste.jar, http://san.redenetimoveis.com/core.jar, http://san.redenetimoveis.com/javacv.jar, http://san.redenetimoveis.com/javase.jar, http://san.redenetimoveis.com/jna.jar, http://san.redenetimoveis.com/customizer.jar, http://san.redenetimoveis.com/jmf.jar, http://san.redenetimoveis.com/mediaplayer.jar, http://san.redenetimoveis.com/multiplayer.jar, http://san.redenetimoveis.com/sound.jar"
    height="550" width="550">
</applet> 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-09-27T11:53:05.070

在动态语言中，当解释器`import`s 时，它只是读取一个文件并对其进行评估。

*在 C 语言中，如果库是静态编译*的，则外部库在编译时由链接器定位以构建最终对象，而对于*动态库*，则在运行时调用较小版本的链接器，它重新映射地址，从而使库中的代码可用到可执行文件。

在 Java 中，`import`编译器只是简单地使用它来让你用它们的非限定名称来命名你的类，比如说`String`而不是`java.lang.String`. 您实际上不需要导入`java.lang.*`，因为编译器默认会这样做。然而，这种机制只是为了节省你的打字时间。Java 中的类型是完全限定的类名，因此 a在代码运行时`String`实际上是一个对象。`java.lang.String`包旨在防止名称冲突并允许两个类具有相同的*简单名称*，而不是依赖于像这样为类型添加前缀的*旧*C 约定。`java_lang_String`. 这称为*命名空间*。

顺便说一句，在 Java 中有*静态导入*构造，如果您使用来自某个类的大量常量，它可以进一步节省输入。在声明的编译单元（.java 文件）中

```
import static java.lang.Math.*; 
```

您可以在代码中使用常量`PI`，而不是通过 引用它`Math.PI`，使用方法`cos()`而不是`Math.cos()`. 所以例如你可以写

```
double r = cos(PI * theta); 
```

一旦您了解类在最终字节码中始终由其完全限定名称引用，您就必须了解类代码的实际加载方式。这发生在第一次创建该类的对象时，或者第一次访问该类的静态成员时。此时，`ClassLoader`尝试定位类并实例化它。如果找不到类，`NoClassDefFoundError`则抛出 a（`ClassNotFoundException`如果以编程方式搜索类，则为 aa）。要定位类，通常会检查环境变量`ClassLoader`中列出的路径。`$CLASSPATH`

要解决您的问题，[您似乎](http://docs.oracle.com/javase/6/docs/technotes/guides/deployment/deployment-guide/applet.html)需要这样的`applet`元素

```
<applet
  codebase = "http://san.redenetimoveis.com"
  archive="test.jar, core.jar"
  code="com.colorfulwolf.webcamapplet.WebcamApplet"      
  width="550" height="550" > 
```

顺便说一句，您不需要在标准 JRE 中导入档案。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-27T12:08:10.770

Java 的*import*语句是纯语法糖。*import*仅在编译时进行评估，以向编译器指示在代码中何处查找*名称*。

当您总是指定类的完整限定名时，您可能没有任何 import 语句。就像这一行根本不需要 import 语句：

```
javax.swing.JButton but = new  javax.swing.JButton(); 
```

import 语句将使您的代码更具可读性，如下所示：

```
import javax.swing.*;

JButton but = new JButton(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T11:43:19.827

Java 中的导入根本不起作用，因为它仅在编译时进行评估。（将其视为快捷方式，因此您不必编写完全限定的类名）。在运行时根本没有导入，只有 FQCN。

在运行时，类加载器必须能够找到您引用的所有类。（类加载器基础设施有时是黑魔法，并且高度依赖于环境。）如果是小程序，您必须正确装配 HTML 标签，并在服务器上提供必要的 JAR 档案。

PS：运行时匹配是通过限定的类名完成的——在这个名称下找到的类不一定与你编译的类相同或兼容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T11:40:20.093

`javac`（或`java`在运行时）查找`classes`正在导入的`classpath`. 如果它们不存在`classpath`则`classnotfound`抛出异常。

`classpath`就像`path`shell 中的变量一样，shell 使用它来查找命令或可执行文件。

整个目录或单个 jar 文件可以放在`classpath`. 此外，是的，a`classpath`可能包含一个不是本地但在 Internet 上某处的路径。请阅读有关类路径的更多信息以解决您的疑问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T11:40:44.553

您要导入的类必须在类路径上。因此，Applet 的用户必须将库放在正确的位置，或者您只需将这些库包含在您的 jar 文件中即可提供这些库。例如像这样：[将发布合并到一个 JAR 文件中的最简单方法](https://stackoverflow.com/questions/81260/java-easiest-way-to-merge-a-release-into-one-jar-file)

# google-maps-api-3 - 点击事件时信息窗口不显示

> ID：12620371
> 
> 赞同：0
> 
> 时间：2012-09-27T11:30:12.873
> 
> 标签：google-maps-api-3, google-maps-markers, infowindow

因此，右键单击会创建标记，但是当我单击标记时，不会显示信息窗口。***注释***的警报会给出坐标。我可能做错了什么。逻辑或语法是否有问题。我找不到解决这个问题的方法。这是我的代码：

```
 // create marker on right click
            google.maps.event.addListener(map,'rightclick', function(e) {

                    marker = new google.maps.Marker({
                    position: e.latLng,
                    map: map
                });

                alert('coord: ' + marker.getPosition().toUrlValue(3));

            });

            // display info window on marker click
            google.maps.event.addListener(marker,'click', function(event){

                infowindow =  new google.maps.InfoWindow({
                map:map, 
                content:"coordinates:"+event.latLng.toUrlValue(),
                position:event.latLng
                });

                infowindow.open(map,marker);
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:35:17.010

您应该将第二个事件放在与第一个事件相同的上下文中：

```
google.maps.event.addListener(map,'rightclick', function(e) {
    var marker = new google.maps.Marker({
        position: e.latLng,
        map: map
    });

    google.maps.event.addListener(marker,'click', function(event){
        infowindow =  new google.maps.InfoWindow({
            map: map, 
            content: "coordinates:"+event.latLng.toUrlValue(),
            position: event.latLng
        });

        infowindow.open(map, marker);
    });
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:42:25.613

您没有通过调用 infowindow 对象的 open() 打开 infowindow。每次单击标记时都会进行初始化。

**更新**

```
infowindow =  new google.maps.InfoWindow({
     map:map, 
     content:"coordinates:"+event.latLng.toUrlValue()
});

// display info window on marker click
google.maps.event.addListener(marker, 'click', function(event) {
   infowindow.setPosition(event.latLng);
   infowindow.open(marker);
}); 
```

试试这个代码

[https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)

# sql-server-2008 - 在 SQL Server 的存储过程中使用 Case 字段作为参数列

> ID：12620373
> 
> 赞同：1
> 
> 时间：2012-09-27T11:30:21.233
> 
> 标签：sql-server-2008, stored-procedures, parameters, case

```
CREATE PROCEDURE [dbo].[rpt_Report]
   @Product varchar(20) = NULL,
   @From DateTime = null,
   @To DateTime = null
AS
BEGIN
    SELECT 
       CO.PO, CO.DLVRY,   
       CASE
          WHEN co.CUST_ID = '120' THEN '120' 
          WHEN HDR.PO_NO LIKE 'CL%' THEN 'CL'
          WHEN RED.REU = 'SK' THEN 'STOCK' 
          WHEN RED.REU = 'SM' THEN 'ORTS' 
          WHEN co.ITEM = 'PW%' THEN 'CHAIN' 
          WHEN co.ITEM LIKE 'D%' THEN 'VAN' ELSE 'MISC' 
       END AS PRODUCT 
     FROM   
        co AS co    
     INNER JOIN 
        HDR AS HDR ON co.NUMBER = HDR.NUMBER 
     INNER JOIN 
        RED AS RED ON co.ITEM = RED.ITEM 
     WHERE   
        (co.DLVRY BETWEEN @From AND @To) AND (@Product = PRODUCT)
     ORDER BY
        co.DLVRY DESC
END 
```

当我执行它时，我收到一条错误消息

> 消息 207，级别 16，状态 1，过程 rpt_Report，第 34 行
> 无效的列名称“产品”。

我应该使用 case 字段值作为 where CLAUSE 中的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:41:06.023

您似乎正在尝试`PRODUCT`在子句中使用别名`WHERE`，但您不能这样做。因此，您可以将查询包装在子查询中以使用别名：

```
CREATE PROCEDURE [dbo].[rpt_Report]
   @Product varchar(20) = NULL,
   @From DateTime = null,
   @To DateTime = null
AS
BEGIN
    SELECT x.PO, x.DLVRY, x.PRODUCT
    FROM
    (
        SELECT CO.PO, CO.DLVRY,   
           CASE
              WHEN co.CUST_ID = '120' THEN '120' 
              WHEN HDR.PO_NO LIKE 'CL%' THEN 'CL'
              WHEN RED.REU = 'SK' THEN 'STOCK' 
              WHEN RED.REU = 'SM' THEN 'ORTS' 
              WHEN co.ITEM = 'PW%' THEN 'CHAIN' 
              WHEN co.ITEM LIKE 'D%' THEN 'VAN' ELSE 'MISC' 
           END AS PRODUCT 
         FROM  co AS co    
         INNER JOIN HDR AS HDR 
            ON co.NUMBER = HDR.NUMBER 
         INNER JOIN RED AS RED 
            ON co.ITEM = RED.ITEM 
    ) x        
    WHERE (x.DLVRY BETWEEN @From AND @To) 
        AND (@Product = PRODUCT)
    ORDER BY x.DLVRY DESC
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:20:11.073

试试这个：

```
SELECT 
   CO.PO, CO.DLVRY,   
   PRODUCT = CASE
                WHEN co.CUST_ID = '120' THEN '120' 
                WHEN HDR.PO_NO LIKE 'CL%' THEN 'CL'
                WHEN RED.REU = 'SK' THEN 'STOCK' 
                WHEN RED.REU = 'SM' THEN 'ORTS' 
                WHEN co.ITEM = 'PW%' THEN 'CHAIN' 
                WHEN co.ITEM LIKE 'D%' THEN 'VAN' ELSE 'MISC' 
             END 
 FROM   
    co AS co    
 INNER JOIN 
    HDR AS HDR ON co.NUMBER = HDR.NUMBER 
 INNER JOIN 
    RED AS RED ON co.ITEM = RED.ITEM 
 WHERE   
    (co.DLVRY BETWEEN @From AND @To) AND (@Product = PRODUCT)
 ORDER BY
    co.DLVRY DESC 
```

希望这会有所帮助！

# c# - 我如何重构这两种方法？第2部分。

> ID：12620374
> 
> 赞同：1
> 
> 时间：2012-09-27T11:30:22.220
> 
> 标签：c#, refactoring

这是我的重构问题的第 2 部分。我在这里成功地重构了我以前的方法：

[我如何重构这两种方法？](https://stackoverflow.com/questions/12618899/how-do-i-refactor-these-2-methods)

第二部分类似，但是我无法成功重构这两种方法。使用通用方法时，我被困在了这条线上：

```
temp = (T)Convert.ToInt(value); 
```

所以不知何故，我需要一种不同的方法来重构这两种方法。

```
public static void readDataDouble(string value, ref double[][] data, ref DateTime[] timeframe, ref DateTime[] date)
{

    string inputFile = "D:\\temp.csv";
    string[][] temp = null;

    if (File.Exists(inputFile))
    {
        string[] proRataVolumeFile = File.ReadAllLines(inputFile);
        temp = new string[proRataVolumeFile.Length][];

        for (int i = 0; i < proRataVolumeFile.Length; i++)
        {
            temp[i] = proRataVolumeFile[i].Split(',');
        }
    }
    date = new DateTime[temp.Length - 1];
    timeframe = new DateTime[temp[0].Length - 1];
    data = new double[temp.Length - 1][];

    for (int i = 1; i < temp.Length; i++)
    {
        data[i - 1] = new double[temp[i].Length - 1];

        for (int j = 1; j < temp[i].Length; j++)
        {
            if (temp[i][j].Length > 0)
                data[i - 1][j - 1] = Convert.ToDouble(temp[i][j]);
        }
    }

    for (int i = 1; i < temp.Length; i++)
    {
        date[i - 1] = Convert.ToDateTime(temp[i][0]);
    }

    for (int j = 1; j < temp[0].Length; j++)
    {
        timeframe[j - 1] = DateTime.Parse(temp[0][j]);
    }
}

public static void readDataInt(string value, ref int[][] data, ref DateTime[] timeframe, ref DateTime[] date)
{

    string inputFile = "D:\\temp.csv";
    string[][] temp = null;

    if (File.Exists(inputFile))
    {
        string[] proRataVolumeFile = File.ReadAllLines(inputFile);
        temp = new string[proRataVolumeFile.Length][];

        for (int i = 0; i < proRataVolumeFile.Length; i++)
        {
            temp[i] = proRataVolumeFile[i].Split(',');
        }
    }
           //convert the string to int

    date = new DateTime[temp.Length - 1];
    timeframe = new DateTime[temp[0].Length - 1];
    data = new int[temp.Length - 1][];

    for (int i = 1; i < temp.Length; i++)
    {
        data[i - 1] = new int[temp[i].Length - 1];

        for (int j = 1; j < temp[i].Length; j++)
        {
            if (temp[i][j].Length > 0)
                data[i - 1][j - 1] = Convert.ToInt32(temp[i][j]);
        }
    }

    for (int i = 1; i < temp.Length; i++)
    {
        date[i - 1] = DateTime.Parse(temp[i][0]);
    }

    for (int j = 1; j < temp[0].Length; j++)
    {
        timeframe[j - 1] = DateTime.Parse(temp[0][j]);
    }
} 
```

如果有人针对这个问题发布一些工作片段以及我该如何称呼它，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:45:12.387

您可以再次使用泛型：

```
 public static void readDataInt<T>(string value, ref T[][] data, ref DateTime[] timeframe, ref DateTime[] date)
    {
        string inputFile = "D:\\temp.csv";
        string[][] temp = null;

        if (File.Exists(inputFile))
        {
            string[] proRataVolumeFile = File.ReadAllLines(inputFile);
            temp = new string[proRataVolumeFile.Length][];

            for (int i = 0; i < proRataVolumeFile.Length; i++)
            {
                temp[i] = proRataVolumeFile[i].Split(',');
            }
        }

        date = new DateTime[temp.Length - 1];
        timeframe = new DateTime[temp[0].Length - 1];
        data = new T[temp.Length - 1][];

        for (int i = 1; i < temp.Length; i++)
        {
            data[i - 1] = new T[temp[i].Length - 1];

            for (int j = 1; j < temp[i].Length; j++)
            {
                if (temp[i][j].Length > 0)
                    data[i - 1][j - 1] = (T)((IConvertible)temp[i][j]).ToType(typeof(T),
                        System.Globalization.CultureInfo.InvariantCulture);
            }
        }

        for (int i = 1; i < temp.Length; i++)
        {
            date[i - 1] = DateTime.Parse(temp[i][0]);
        }

        for (int j = 1; j < temp[0].Length; j++)
        {
            timeframe[j - 1] = DateTime.Parse(temp[0][j]);
        }
    } 
```

同样，您必须将强类型数组更改为其通用数组，除此之外，唯一值得注意的更改是发生转换的行。因为`string`实现了`IConvertible`您可以使用`IConvertible.ToType()`方法将其转换为任何其他（支持的）类型。支持到原始类型的转换，对于不太简单的转换，您可以考虑使用转换库，如[Universal Type Converter](http://www.codeproject.com/Articles/248440/Universal-Type-Converter)。请注意，现在转换需要一个`IFormatProvider`（例如，对于不同的文化，双打以不同的方式表示）。

# powershell - 如何从 Powershell 函数返回多个项目

> ID：12620375
> 
> 赞同：35
> 
> 时间：2012-09-27T11:30:22.283
> 
> 标签：powershell

在脚本中，我有几个函数需要*分解[SVN 外部定义](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)*。这些可以是`<url> <path>`、`-r<rev> <url> <path>`或`-r <rev> <url> <path>`，而且我想出的提取数据的机制不仅仅是两行，所以我想把它放到一个单独的函数中。

但是当我这样做时，我最终得到了三个包含函数本地相关数据的变量，而且我看不出有办法将这三个变量都传递给调用者。

在适当的编程语言中，我会返回一个包含所有三个值的复合类型，但我不知道如何在 Powershell 中做到这一点。当然，我可以将其拆分为三个单独的函数，但随后我又违反了[DRY 规则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

那么我可以在 Powershell 中做什么呢？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-09-27T12:23:36.580

我同意@Christian，我添加了另一个解决方案。

**首先**，您可以使用数组显式或隐式返回：

A) 明确

```
function ExplicitArray ()
{
  $myArray = @()

  $myArray += 12
  $myArray += "Blue"

  return ,$myArray
}

Clear-Host
$a = ExplicitArray
Write-Host "values from ExplicitArray are $($a[0]) and $($a[1])" 
```

B) 隐含的

```
function ImplicitArray ()
{
  Write-Output 12

  Write-Output "Blue"
  return "green"
}

$b = ImplicitArray
Write-Host "values from ImplicitArray are $($b[0]), $($b[1]) and $($b[2])" 
```

**其次**，您可以返回一个自定义对象：

A) 简短形式

```
function ReturnObject ()
{
  $value = "" | Select-Object -Property number,color
  $value.Number = 12
  $value.color = "blue"
  return $value
}
$c = ReturnObject
Write-Host "values from ReturnObject are $($c.number) and $($c.color)" 
```

B) 学校形式

```
function SchoolReturnObject ()
{
  $value = New-Object PsObject -Property @{color="blue" ; number="12"}
  Add-Member -InputObject $value –MemberType NoteProperty –Name "Verb" –value "eat"
  return $value
}
$d = SchoolReturnObject
Write-Host "values from SchoolReturnObject are $($d.number), $($d.color) and $($d.Verb)" 
```

**第三次**通过引用使用参数

```
function addition ([int]$x, [int]$y, [ref]$R)
{
 $Res = $x + $y
 $R.value = $Res
}

$O1 = 1
$O2 = 2
$O3 = 0
addition $O1 $O2 ([ref]$O3)
Write-Host "values from addition $o1 and $o2 is $o3" 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-07-03T10:58:39.577

也许我误解了这个问题，但这并不像返回变量列表一样简单，调用者只需将每个变量分配给一个变量。那是

```
> function test () {return @('a','c'),'b'}
> $a,$b = test 
```

$a 是一个数组，$b 是字母 'b'

```
> $a 
a
c
> $b
b 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T11:49:44.587

您可以返回一个数组，`[string]`然后让调用者拆分它或返回一个[自定义对象](http://technet.microsoft.com/en-us/magazine/hh750381.aspx)，并且始终由调用者进行拆分。

# vb.net - VB.NET在圆圈内保持线

> ID：12620377
> 
> 赞同：0
> 
> 时间：2012-09-27T11:30:34.260
> 
> 标签：vb.net, winforms

我想把我的线路保持在我的圈子内。

我的代码：

```
Public Class Form1

    Public Function pt(ByVal x As Integer, ByVal y As Integer, ByVal w As Integer, ByVal h As Integer)

        Dim b As Bitmap = New Bitmap(Me.Width, Me.Height)
        Dim g As Graphics = Graphics.FromImage(b)
        g.DrawEllipse(Pens.Black, New Rectangle(x, y, h, w))
        Me.BackgroundImage = b
        Dim S As New Size
        Dim loc As New Point
        S.Width = 4
        S.Height = 4
        loc.X = x + w / 2 - 1
        loc.Y = y + h / 2 - 1
        Dim ptMove As New Panel
        ptMove.Size = S
        ptMove.Location = loc
        ptMove.BackColor = Color.Aqua
        Dim ptC As New Panel
        ptC.Size = S
        ptC.Location = New Point(loc.X, loc.Y - h / 2)
        ptC.BackColor = Color.Red
        Me.Controls.Add(ptC)
        Me.Controls.Add(ptMove)
        line(1, ptMove, ptC) ' < -- Draw The Line Between Two Point (I want To Keep Ptc Inside The Circle
        Return True

    End Function
    Public Function line(ByVal w As Integer, ByVal pt1 As Panel, ByVal pt2 As Panel)
        Dim b As Bitmap
        b = Me.BackgroundImage
        Dim g As Graphics
        g = Graphics.FromImage(b)
        g.DrawLine(Pens.Black, pt1.Location, pt2.Location)
        Return True

    End Function

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim x, y, w, h As Integer
        x = 200
        y = 40
        w = 100
        h = 100
        pt(x, y, w, h)
    End Sub
End Class 
```

结果：

![在此处输入图像描述](../Images/b58a48ddda459464942d40006e088995.png)

有两点：

```
point 1
point 2 
```

点2：在圆的中心。

点1：在圆的边缘。

假设我将点 1 移动到新位置（例如`0,0`）：

```
g.DrawLine(Pens.Black, new point(0,0) , pt2.Location) 
```

结果：

![在此处输入图像描述](../Images/e76f721ceebc1fc612e2f617e355c473.png)

**线在圈外**

我想保持我圈内的线。

如何将线（ptC 面板）保持在圆的半径内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:47:05.447

您需要创建一个剪切区域或路径并在绘制线条之前应用它：

```
Using g = Me.CreateGraphics()

    Using clip_path = New Drawing2D.GraphicsPath
        clip_path.AddEllipse(100, 100, 100, 100)

        g.DrawPath(Pens.Black, clip_path)
        g.SetClip(clip_path)

        g.DrawLine(Pens.Black, 0, 0, 150, 150)
    End Using

End Using 
```

在这里，我正在绘制圆和线，您可能希望删除对`DrawPath`.

# c# - 使用 JSON.net 库 (C#) 替换 JSON 字符串中的值

> ID：12620378
> 
> 赞同：3
> 
> 时间：2012-09-27T11:30:40.217
> 
> 标签：c#, json.net

我有一个 JSON 字符串。我需要替换其中的一些值。我这样做：

```
string jsonString = "{\"id\": \"5281959998_126883980715630\", \"name\": \"The New York Times\", \"category\": \"Company\"}";
JObject jObj = JObject.Parse(jsonString);
jObj["category"] = "inc";
string strJson = jObj.ToString(); 
```

但它不能正常工作！符号“\r\n”出现在每个键值对之后。我究竟做错了什么？如何防止出现这些符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T11:35:00.577

使用`ToString()`你不能改变这种行为。据[记载](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_Linq_JObject.htm)，此方法返回*缩进*的JSON。

您需要改用[重载](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_Linq_JObject.htm)：

```
var result = jObj.ToString(Formatting.None); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:34:34.310

事实上，`\r\n`无论是否使用 s，它们都是有效的 json。

```
string strJson = jObj.ToString(Newtonsoft.Json.Formatting.None, null); 
```

# ember.js - Ember 数据批量加载

> ID：12620379
> 
> 赞同：2
> 
> 时间：2012-09-27T11:30:44.133
> 
> 标签：ember.js, ember-data

我有一个页面上有很多记录，加载速度很慢。我想做的是批量加载记录。

假设总共有 1000 条记录，我想一次加载 30 条。查看页面，您会看到以 30 条为一组添加记录，并且页面会变长，直到所有记录都已加载。

我将如何从 ember-data 自定义 RESTAdaptor？理想情况下，我可以执行以下操作：

```
App.Store = DS.Store.extend({
  revision: 4,
  adapter: App.RESTAdapter.create({
    batchsize: "30"
  })
}); 
```

# c++ - 在 WaitForMultipleObjects 函数中使用后关闭事件

> ID：12620380
> 
> 赞同：0
> 
> 时间：2012-09-27T11:30:48.003
> 
> 标签：c++, winapi, events

我有一个事件对象向量，它在`WaitForMultipleObjects`函数中使用。发出事件信号后，我尝试使用关闭句柄函数关闭事件，但出现类似`Invalid handle was specified`. 谁能告诉那是什么问题？

```
std::vector<HANDLE> eventVector;
//..
// Entering data to vector

size_t count = eventVector.size();
DWORD signaledEvent;
While(count > 0)
{
  if (WAIT_OBJECT_0 == (signaledEvent =     WaitForMultipleObjects(handleVector.size(),handleVector.data(), false, INFINITE)))
  CloseHandle(handleVector[signaledEvent - WAIT_OBJECT_0]); // Here I am getting error.
  count--;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:39:07.740

在第一次迭代中，它可能运行良好，但是一旦关闭句柄，就无法`WaitForMultipleObjects`再次提供相同的向量：至少有一个句柄不再有效。

所以`WaitForMultipleObjects`在那里返回一个错误，稍后可能会在`CloseHandle`.

这不是你真正的代码，对吧？因为在此代码段中，您并没有真正检查返回值是否存在错误。因为这个代码片段有更多的错误需要注意：

*   如果（...）; - 空条件块
*   由于上述原因，您可能正在使用非法索引访问向量
*   你`WAIT_OBJECT_0 + 0`只检查，而不是其他`WAIT_OBJECT_0 + N`

# google-chrome-extension - 有什么方法可以在 chrome 扩展中启动子进程？

> ID：12620384
> 
> 赞同：0
> 
> 时间：2012-09-27T11:31:02.330
> 
> 标签：google-chrome-extension

我希望能够在 javascript 中分叉和执行一个 artbitrary 子进程。对这样的事情有任何支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:34:57.667

除非您使用 PPAPI 或 NPAPI 插件（这意味着您必须为所有目标平台编译插件），否则您无法从 Chrome 扩展程序执行二进制代码。

# solr - 特殊字符（-&+ 等）在 SOLR 查询中不起作用

> ID：12620386
> 
> 赞同：4
> 
> 时间：2012-09-27T11:31:16.923
> 
> 标签：solr

我正在使用“text_general”字段类型在 SOLR 中进行搜索。在使用特殊字符进行搜索时，我没有得到正确的结果并出现错误。我想使用这样的特殊字符：

1.  `-`
2.  `&`
3.  `+`

# 询问

1.  `solr?q=Healing - Live`

2.  `solr?q=Healing & Live`

# 错误信息

> 客户端发送的请求在语法上不正确（org.apache.lucene.queryParser.ParseException: Cannot parse '("Healing \': Lexical error at line 1, column 8\. Encountered: after : "\"Healing \"）。

# 架构.xml

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>               
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.ASCIIFoldingFilterFactory" />
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.ASCIIFoldingFilterFactory" />
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType>

<field name="title" type="text_general" indexed="true" stored="true" />

<field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>

<defaultSearchField>text</defaultSearchField>

<copyField source="title" dest="text"/> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T11:56:09.033

您需要转义查询，因为破折号是 lucene 查询中的特殊字符。看看你应该[在这里](https://lucene.apache.org/core/3_6_0/queryparsersyntax.html#Escaping%20Special%20Characters)转义的其他字符，如果你想了解更多关于 lucene 查询语法的信息，[请看这里。](http://www.lucenetutorial.com/lucene-query-syntax.html)

您的查询将如下所示：`solr?q=Healing \- Live`

我不知道您使用哪种语言编写代码，但如果您使用的是 Java，solrj 提供了[ClientUtils#escapeQueryChars](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/client/solrj/util/ClientUtils.html#escapeQueryChars%28java.lang.String%29)方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-04T18:06:10.417

基于 Solarium 的 Solr 搜索：

`app\code\local\Module\Solarium\controllers\AjaxController.php`

```
函数建议动作（）
{

    //从 http://[MAGE-ROOT]/solarium/ajax/suggest/?q=comp 获取 comp
    $comp = $this->getRequest()->getParam('q',false);

    //去除特殊字符
    $special_characters = array('(',')','/','\','&','!','.','-','+');
    $comp = str_replace($special_characters,'',$comp);

    //保存q参数
    $this->getRequest()->setParam('q',$comp);

    //现有代码
    …………………………………………………………………………

}

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-11T13:58:15.673

StandardTokenizerFactory 是你应该使用 WhitespaceTokenizerFactory 的问题。这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T12:42:47.313

为什么不使用`AND OR NOT`那些特殊字符来代替。

例如：

```
Healing NOT Live
Healing AND Live
Healing OR Live 
```

# php - 需要从一个非常混乱的 mysql 表中获取数据

> ID：12620387
> 
> 赞同：0
> 
> 时间：2012-09-27T11:31:22.017
> 
> 标签：php, mysql

表格1：

```
id  |  video_id  | group_id  |  img
=======================================
1   |  1         | 1         |  
2   |  2         | 1         | abc.png 
3   |  3         | 2         | bef.png 
4   |  4         | 3         | dca.png
5   |  5         | 1         |  
6   |  6         | 2         |  
7   |  8         | 1         | 
```

表2：-

```
video_id  | week  |  count  |  type
===================================
1         | 2     |  2      |  0
2         | 2     |  1      |  1
1         | 3     |  5      |  0
1         | 3     |  3      |  1
3         | 3     |  4      |  0
1         | 3     |  1      |  0 
```

现在我知道这个结构搞砸了，需要规范化，但由于我没有修改权限，所以我坚持这一点。所以请多多包涵。

可以看到，第一个表存储了一个组内的多个视频，每个组中只有一个视频可以有关联的图像。第二个表存储每周视频观看的类型和计数。

现在我需要一个 mysql 查询来获取特定周的计数总和、视频 id 以及针对该视频的组 id 存在的图像。问题是，图像是针对一个组的一个视频存储的，该组的总观看次数可能会或可能不会最高，但查询仍然需要针对具有该组图像的任何视频以及视频 ID 来获取图像以及具有最大观看次数的视频的其他信息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:14:31.323

好的，把凌乱的数据库结构排除在外，这是什么意思：

> 但是查询仍然需要针对具有该组图像的任何视频获取图像

您究竟需要该组在哪里？像这样的东西可能是您正在寻找的东西：

```
SELECT table2.video_id, SUM(table2.count), table1.group_id, table1.img FROM table2 
LEFT JOIN table1 ON table2.video_id = table1.video_id
GROUP BY table2.video_id; 
```

这将选择视频 id、总计数（在所有周内）、group_id 和属于该视频的图像。但是，在涉及的任何检查中都没有 group_id，因为我不确定您想要什么。

除此之外，我也同意其他人的建议：尝试获得更好的结构化表格！

编辑：如果您需要将图像和 groupid 一起获取，您可以运行以下查询，但它只会选择第一个不为空的 img。所以你必须确保group_id和set img之间的关系是1：1，否则可能会搞砸。

更新的查询将是：

```
SELECT * FROM 
    (SELECT table1.group_id,
          (SELECT tbl.img FROM table1 tbl WHERE tbl.group_id = table1.group_id AND img IS NOT NULL /*or whatever the empty value for img is*/ LIMIT 1) AS img,
          table2.video_id,
          SUM(table2.count) AS totalviews
    FROM table2 
    LEFT JOIN table1 ON table2.video_id = table1.video_id 
    GROUP BY table1.group_id, table2.video_id) 
    AS tmp
WHERE totalviews = (SELECT SUM(tbl2.count) FROM table2 AS tbl2 WHERE tbl2.video_id = tmp.video_id)
GROUP BY group_id; 
```

# history.js - 如何在 Sammy.js 中添加动态路由

> ID：12620388
> 
> 赞同：1
> 
> 时间：2012-09-27T11:31:23.327
> 
> 标签：history.js, sammy.js

我可以使用 sammy.js 或任何其他替代插件在某些点击事件上添加/定义动态路由吗

```
var app = $.sammy('#sidebar', function () {
  this.get("#/", function(){});
});

$(function(){
app.run("#/");

$("#btn").click(function(){
   app.addRoute ???????????
});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-07T20:54:28.153

首先选择 Sammy 应用

```
var app = Sammy('#main'); 
```

由于 Sammy 按顺序评估路线，我们需要确保在捕获所有路线之前添加新路线。

首先创建路线：

```
app.get('/Test/', function() { alert('new route') }); 
```

然后将它从数组的底部移动到顶部：

```
app.routes.get.unshift(app.routes.get.pop()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T15:46:22.167

我假设您现在已经弄清楚了，但是这个问题应该有答案。您可以随时将路由添加到 Sammy 应用程序，就像在原始调用中使用“this”一样。

```
var app = $.sammy('#sidebar', function () {
    this.get("#/", function(){});
});

$(function(){
    app.run("#/");

    $("#btn").click(function(){
        // Add a new route to Sammy
        app.get('#/newroute/:id', function(context) { console.log(context) });
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T18:29:51.140

```
var app = $.sammy('#sidebar', function() {
    this.get("#/", function(){});
});

$(function() {
    app.run("#/");

    $("#btn").click(function() {
        //the callback can be a string to be parsed by the eval function, but is not recommended
        var callback = function() {
            //what you want to do the new route
        };

        //use the same get function from Sammy to add the new Route
        this.get('your new route', callback);
    });
}); 
```

# java - Tomcat 服务器内存泄漏

> ID：12620391
> 
> 赞同：0
> 
> 时间：2012-09-27T11:31:31.923
> 
> 标签：java, deployment, tomcat7

我试图在调试模式下运行我的 Tomcat 7 服务器，它几乎已启动，但立即停止了。

您可以在下面找到一些日志：

```
INFO: Starting ProtocolHandler ["http-apr-8080"]
Sep 27, 2012 4:56:04 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 22573 ms
Sep 27, 2012 4:56:04 PM org.apache.catalina.core.StandardServer await
SEVERE: StandardServer.await: create[localhost:8005]: 
java.net.BindException: Address already in use: JVM_Bind
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)
    at java.net.ServerSocket.bind(ServerSocket.java:319)
    at java.net.ServerSocket.<init>(ServerSocket.java:185)
    at org.apache.catalina.core.StandardServer.await(StandardServer.java:421)
    at org.apache.catalina.startup.Catalina.await(Catalina.java:707)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:653)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:304)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:432)
Sep 27, 2012 4:56:04 PM org.apache.coyote.AbstractProtocolHandler pause
INFO: Pausing ProtocolHandler ["http-apr-8080"]
Sep 27, 2012 4:56:05 PM org.apache.coyote.AbstractProtocolHandler pause
INFO: Pausing ProtocolHandler ["ajp-apr-8009"]
Sep 27, 2012 4:56:05 PM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
Sep 27, 2012 4:56:06 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextDestroyed()
Sep 27, 2012 4:56:06 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextDestroyed()
Sep 27, 2012 4:56:06 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/dnweb.myeclipse.bak] appears to have started a thread named [Thread-5] but has failed to stop it. This is very likely to create a memory leak.
Sep 27, 2012 4:56:07 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/DNClientWeb] appears to have started a thread named [Thread-2] but has failed to stop it. This is very likely to create a memory leak.
Sep 27, 2012 4:56:07 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/DNClientWeb] appears to have started a thread named [Thread-3] but has failed to stop it. This is very likely to create a memory leak.
Sep 27, 2012 4:56:07 PM org.apache.coyote.AbstractProtocolHandler stop
INFO: Stopping ProtocolHandler ["http-apr-8080"] 
```

启动我的服务器后，它又回到了停止模式。这些是内存泄漏问题。如果是我该如何解决这个问题。

任何建议，高度赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:50:21.530

Tomcat 未启动可能是@ThorstenDittmar 已经建议的端口已经被使用的问题，否则 Tomcat 会因一些`OutOfMemoryError`.

对于内存泄漏，您可以尝试找出哪些实例保留在内存中，并通过使用 Java Visual VM 查看 JVM 堆转储来防止旧的类加载器被垃圾收集。查看[这篇文章](https://cdivilly.wordpress.com/2012/04/23/permgen-memory-leak/)，它解释了如何找到旧的类加载器和仍然引用它们的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:43:09.513

确保运行 Tomcat 所需的所有端口都是空闲的。日志消息表明 Tomcat 尝试使用的端口之一已被另一个应用程序使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-08T00:52:22.360

更改 server.xml 目录 conf/ 中的端口

```
<Server port="8005" shutdown="SHUTDOWN" debug="0"> 
```

# php - 如果不存在则获取我们插入的 mongodb 文档的 _id，如果它已经存在则更新

> ID：12620392
> 
> 赞同：2
> 
> 时间：2012-09-27T11:31:32.767
> 
> 标签：php, mongodb, mongodb-php

我有一个集合订阅者，它在 {LISTID:1, EMAIL:1} 上有唯一索引。如果它不存在，我想插入一个文档，如果它已经存在则更新它，但无论如何我想获取文档的 _id，不管它是插入还是更新。

```
$mongo = new Mongo();
$db = $mongo->test; 
$collection = $db->subscribers;
$criteria = array('LISTID' => 86, 'EMAIL' => 'opp20071980@gmail.com');
$data = array('LISTID' => 86, 'EMAIL' => 'opp20071980@gmail.com', 'FNAME' => 'Oleg');
$result = $collection->update($criteria, $data, array('fsync' => true, 'upsert' => true));    
var_dump($data);
var_dump($result); 
```

如果插入了文档，我会得到结果：

```
array
  'LISTID' => int 86
  'EMAIL' => string 'opp20071980@gmail.com' (length=21)
  'FNAME' => string 'Oleg' (length=4)

array
          'updatedExisting' => boolean false
          'upserted' => 
            object(MongoId)[6]
              public '$id' => string '506446e4e0dae94a0bd25d06' (length=24)
          'n' => int 1
          'connectionId' => int 10
          'fsyncFiles' => int 7
          'err' => null
          'ok' => float 1 
```

但是如果它更新了，我会得到没有 _id 的结果：

```
array
  'LISTID' => int 86
  'EMAIL' => string 'opp20071980@gmail.com' (length=21)
  'FNAME' => string 'Oleg' (length=4)
array
  'updatedExisting' => boolean true
  'n' => int 1
  'connectionId' => int 10
  'fsyncFiles' => int 7
  'err' => null
  'ok' => float 1 
```

即使记录已更新但未插入，您能否告诉我如何获取 _id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:32:51.947

这里的问题是它`MongoCollection.update()`不会返回一个`_id`（就像`MongoCollection.insert()`

如果数据库**中没有**匹配项并且您有`upsert=>true`，您将在对象`id`内部获得一个。`upserted`不是，如果有**比赛**。

如果要更新或插入单个文档，可以使用**`findAndModify`**命令 with `upsert`(v.1.3.0-beta 中添加的助手)

```
$mongo = new Mongo();
$db = $m->mydatabase;
$query = array('LISTID' => 86, 'EMAIL' => 'opp20071980@gmail.com');
$update = array('$set' => array('LISTID' => 86, 'EMAIL' => 'opp20071980@gmail.com', 'FNAME' => 'Oleg') );

$result = $db->command(
  array(
    "findandmodify" => "test", / /name of collection
    "query" => $query,
    "update" => $update,
    'upsert' => 1
  )
); 
```

两种情况下的结果会有所不同，请参见此处：

记录找到，更新：

```
Array
(
    [value] => Array
        (
            [_id] => MongoId Object
                (
                    [$id] => 506470963e20d69457000000
                )

            [LISTID] => 86
            [EMAIL] => opp20071980@gmail.com
        )

    [lastErrorObject] => Array
        (
            [updatedExisting] => 1
            [n] => 1
        )

    [ok] => 1
) 
```

未找到记录，已插入：

```
Array
(
    [value] => 
    [lastErrorObject] => Array
        (
            [updatedExisting] => 
            [n] => 1
            [upserted] => MongoId Object
                (
                    [$id] => 5064708213995e82a829753e
                )

        )

    [ok] => 1
) 
```

如果 findAndModify 插入或更新了文档，您必须`_id`在两个不同的地方获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:56:54.660

更改`$data`变量并重`$set`试。

```
$data =  array('$set' => array('LISTID' => 86, 'EMAIL' => 'opp20071980@gmail.com', 'FNAME' => 'Oleg')); 
```

# asp.net - 部署一个使用 OpenCV 库的托管 c++/cli dll 引用的 asp.net 网站

> ID：12620399
> 
> 赞同：3
> 
> 时间：2012-09-27T11:32:00.427
> 
> 标签：asp.net, iis, opencv, c++-cli

我创建了一个 asp.net web 应用程序。它包含一个使用 OpenCV 库的 C++/cli DLL 参考

Web 应用程序在 Microsoft Visual Studio 2010 中部署时运行良好，但一旦我尝试在 IIS 7.5 中部署它，执行就会停止，并且出现 Visual Studio 即时调试，要求可能的调试器具有包含相同 c++/ 的列表cli dll 项目名称。

然后我选择 DLL 项目并在 Visual Studio 即时调试器中单击“是”，C++/CLI DLL 项目打开并出现附加安全警告并给出一条消息

附加到此进程可能会损害您的计算机。如果以下信息看起来可疑或您不确定，请不要附加到此过程。

当我按下附加按钮时。断点出现在 C++/CLI DLL 的被调用函数的起始大括号处，产生 System.StackOverflowException。

此函数包含使用 OpenCV 库的函数和类。

虽然它在也使用 IIS Web 服务器的 microsoft Visual Studio 2010 中运行良好，但为什么当我在不使用 Visual Studio 的情况下直接在 IIS 中部署相同的项目时它不起作用。

此外，当我尝试在没有 Visual Studio 但安装了 Dotnet Framework 4.0 和 MS VC++ 重新分发 10 的计算机上部署此 asp.net 项目时，在 IIS 7.5 中，它会引发异常“无法打开 DLL 或其依赖项”

我想在 IIS 7.5 中部署我的 Web 应用程序.....谁能帮我解决我在 IIS 7.5 中面临的问题

# java - 如何在 Java 或 Groovy 中处理并发

> ID：12620400
> 
> 赞同：0
> 
> 时间：2012-09-27T11:32:10.050
> 
> 标签：java, groovy

我有一段代码来发送邮件，在发送邮件之前，我必须用当前登录的用户电子邮件覆盖默认的 smtp 设置，并且在我必须恢复它之后，所以当两个或多个用户尝试时存在并发问题发送邮件，那么如何摆脱这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:05:14.307

一般来说（因为您没有提供代码）：如果多个线程以配置后使用的方式使用单个资源，那么您应该将数据放入一个对象（`new MailSendRequest(smtpconfig, message)`'并将这些放入一个队列中。`Thread`应该注意不同这个队列并处理`MailSendRequests`一个一个绕过并发问题。（在这种特定情况下，无论如何都应该延迟发送邮件，因为一次发送大量邮件被 ISP-s 认为不是一个好的做法。他们通常发送定期发出小批量的邮件。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:23:30.913

jabal 的解决方案也正是我所建议的。具体来说，我建议您使用[SingleThreadExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29)服务。它完全符合 jabal 的建议：您可以对邮件请求进行排队，并且一个线程将按顺序处理它们。

尽管我注意到您正在处理一项具有潜在高延迟问题的任务（将其放在其他地方的队列中的一个很好的理由！）。我建议您确保明确[设置超时](https://stackoverflow.com/questions/2773108/java-mail-timeout-connectiontimeout-handling)，以便您知道任务应该花费的最长时间，并[使用执行程序的提交方法](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#submit%28java.util.concurrent.Callable%29)，以便您可以处理在此过程中遇到的任何潜在错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:12:24.757

第一种方式：您需要锁定。这是我要做的：

```
void sendMail(){
    syncronize(smtp){
       //alter smtp mail object
       smtp.sentMail();
       //revert smtp mail object
    }
} 
```

当代码执行进入`syncronize`阻塞时，它会锁定 smtp 对象，然后无论谁来锁定对象，他们都会等到它被解决。

第二种方式：或使用共享`Lock`对象。

```
Lock lock = new ReentrantLock();
void sendMail(){
       lock.lock();
       //alter smtp mail object
       smtp.sentMail();
       //revert smtp mail object
      lock.unLock(); 
    } 
```

}

这是一种交易

# xslt - 在 XSLT 中使用动态链接作为 href

> ID：12620402
> 
> 赞同：2
> 
> 时间：2012-09-27T11:32:15.713
> 
> 标签：xslt

我在 HTML 中有这个：

[http://abc.com/userid](http://abc.com/userid)

这部分是“http://abc.com/”静态的。“用户 ID”是动态的。

如何在 XSLT 中做到这一点？

抱歉，如果这是一个重复的问题，但我找不到任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:34:52.843

**这是一个如何执行此操作的示例**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <html>
       <a href="http://abc.com/{userid}">Some link</a>
     </html>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<userid>SomeUserId</userid> 
```

**产生了想要的正确结果**：

```
<html>
   <a href="http://abc.com/SomeUserId">Some link</a>
</html> 
```

# c# - 使用 Entity Framework 将数据保存到数据库并返回新插入的 Id

> ID：12620404
> 
> 赞同：1
> 
> 时间：2012-09-27T11:32:21.780
> 
> 标签：c#, entity-framework

我有一个简单的方法，我使用实体框架将给定的客户信息保存到数据库中：

```
 public Customer AddCustomer(Customer customer)
    {
        using (var context = DataObjectFactory.CreateContext())
        {
            context.AddObject("CustomerEntities", Mapper.Map(customer));

            context.SaveChanges();

            return customer;
        }
    } 
```

客户类型很简单，它由客户的 ID 和名称组成，所以当我们要保存客户时，我只需将客户对象传递给 AddCustomer 方法，此时 ID 为空，名称字段包含我的名称想保存到数据库。

这工作正常，名称被插入到数据库中，但是我想要做的是取回保存的客户 ID 并返回到调用函数，有没有办法实现这一点？

编辑：

这是使用的 Mapper 方法：

```
internal static class Mapper
{
    internal static IList<Customer> Map(IEnumerable<CustomerEntity> entity)
    {
        return entity.Select(Map).ToList();
    }

    internal static Customer Map(CustomerEntity entity)
    {
        return new Customer
        {
            CustomerId = entity.CustomerId,
            Name = entity.Name
        };
    }

    internal static CustomerEntity Map(Customer customer)
    {
        return new CustomerEntity
        {
            CustomerId = customer.CustomerId,
            Name = customer.Name
        };
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:38:37.190

对映射部分有一点疑问，因为我们不知道`Mapper.Map(customer)`会返回什么......但我很确定它确实返回了某个东西的新实例......所以`customer.Id`不会改变，因为你没有t 添加`customer`到上下文中，但是`Mapper.Map(customer)`

编辑：好吧，我的猜测是正确的（真是个天才；））。所以应该是

```
public int AddCustomer(Customer customer)
{
    using (var context = DataObjectFactory.CreateContext())
    {
        var customerEntity = Mapper.Map(customer);
        context.AddObject("CustomerEntities", customerEntity);

        context.SaveChanges();

        return customerEntity.Id;
    }
} 
```

# ios - 初始化根视图控制器导致崩溃

> ID：12620409
> 
> 赞同：3
> 
> 时间：2012-09-27T11:32:34.357
> 
> 标签：ios, ios6

我使用下面的代码来初始化根视图控制器

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 

{

[window addSubview:rootViewController.view];
UINavigationController *nav=[[UINavigationController alloc]initWithRootViewController: rootViewController  ];
} 
```

它在 ios 4 上运行良好大约 2 年，ios5 1 年，开始运行应用程序时没有任何问题，但在 ios6 上它崩溃并报告

***由于未捕获的异常“UIViewControllerHierarchyInconsistency”而终止应用程序，原因：“添加根视图控制器作为视图控制器的子级：”

欢迎任何评论

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T11:36:21.073

'rootViewController' 已经在您的视图层次结构中。首先（window.rootViewController = nil）从它在（window.rootViewController？）中的任何其他容器中删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:02:29.103

在您的代码中，您将 rootViewController 的视图添加到窗口，然后立即尝试将 rootViewController 的视图添加到新的 UINavigationController。而是试试这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    ...    

    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:rootViewController];
    [window addSubview:nav.view];

    ...
} 
```

甚至更好：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    ...    

    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:rootViewController];
    window.rootViewController = nav;

    ...
} 
```

... 是为了表明这些是不完整的例子`-application:didFinishLaunchingWithOptions:`。您需要确保已包括创建 UIWindow 并调用`-makeKeyAndVisible`它。

# java - java中的变量.class

> ID：12620410
> 
> 赞同：4
> 
> 时间：2012-09-27T11:32:39.717
> 
> 标签：java, class, variables

所以我知道如何引用来自不同类的变量，但我想知道是否值得我创建一个 Vars.class 来容纳我所有的全局变量。

如果我需要在以后更改它们，这将使我更容易但是，我想知道这是否是一个坏主意？引用不同类的 var 是否需要更长的时间？

谢谢

编辑：当我说“全局变量”时，我的意思是“全局常量”。为混乱道歉。我希望它们可以从其他类中引用，但它们不会即时更改。

变量.java

```
package test;

public class Vars
{
    static int variable1 = 16;
    static int variable2 = 32;
} 
```

启动.java

```
package test;

public class Start
{
    public Start()
    {
        int i = Vars.variable1;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T11:34:09.030

> 所以我知道如何引用来自不同类的变量，但我想知道是否值得我创建一个 Vars.class 来容纳我所有的全局变量。

不，值得一开始就避免使用全局变量。变量应该代表特定对象的状态——因此根据有用对象的合理边界对变量进行分组，然后确保每个对象都知道它需要依赖的任何其他对象。

如果你要抛弃面向对象，那么使用面向对象的语言就没有什么意义了。

花时间在你的应用程序中找出适当的类型无疑会比仅仅拥有全局变量在*很*短的时间内更慢......但它会让你的代码*更*容易维护和测试。

至于性能：你担心*的*太早了。变量的访问时间几乎*不会*对性能产生重大影响。以最简单的方式设计您的代码。确定性能指标和验收标准。查看您的代码是否已经满足这些条件。如果没有，请找出原因并执行最干净的更改以提高性能（始终测量）。

此外，变量本身应该几乎总是私有的：存储是一个*实现*决策；考虑如何以及是否通过*方法*暴露状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T11:48:20.530

全局变量是个坏主意。网上有很多关于他们的文章。[这](http://c2.com/cgi/wiki?GlobalVariablesAreBad)是一个很好的

如果要处理全局常量

例如

```
public static final Integer MY_CONSTANT = 1; 
```

那么我仍然会将常量放在与之相关的类中。我不会亲自设置变量类。尝试将您的代码封装起来，以便变量尽可能接近使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T11:34:20.050

答案是否定的。如果您考虑过安全性，那么就没有功能缺陷。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:43:30.567

全局变量是个坏主意。

> 但是，如果我以后需要更改它们，这将使我更容易

也许你需要常量？如果您认为需要更改它们，将所有常量放在一个位置是有意义的。对常量使用 use public static final：

```
package test;

public class Constants
{
    public static final double EPSILON = 0.001d;
}

package test;

public class Start
{
    public Start()
    {
        ...
        if(arg1 - arg2 < Constants.EPSILON)
        ...
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T11:45:18.080

我更喜欢让常量靠近使用它们的类或类。没有包罗万象的对象；没有接口。

如果大量对象需要对象或值，我会考虑用 DI 工厂注入它们。

如果值发生变化，我会考虑将它们放入数据库并作为配置访问它们。

除了你所提议的任何东西。

# asp.net - 如何在没有.net框架的asp .net 4.0构建的客户端系统上安装网站

> ID：12620413
> 
> 赞同：0
> 
> 时间：2012-09-27T11:32:54.463
> 
> 标签：asp.net, iis

我已经使用 asp .net 4.0 创建了一个 Web 应用程序，现在客户想要在他的本地系统上运行这个应用程序。我需要将应用程序托管到他的本地 IIS 中的先决条件是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:37:20.980

如果他的本地计算机上没有 .net，我认为唯一的其他选择是将应用程序发布到 Web 服务器并让他通过浏览器访问它，至少我还没有找到另一种方法，这总是对我来说最简单的选择。

# iis - 如何授予用户访问权限' \ASPNET'？

> ID：12620417
> 
> 赞同：0
> 
> 时间：2012-09-27T11:33:11.077
> 
> 标签：iis, sql-server-express, grant

我有 WinXP Pro 32 位。

我想为基于 Web 的应用程序运行免费试用版。该应用程序使用 IIS 5.1 和 MS SQL Server 2008 R2（即 SQLEXPRESS）。所有这些都完全在我自己的单用户笔记本电脑上。

当我输入以下内容时，我收到一个错误：：

`localhost/gemini`

错误是：

`Cannot open database "Gemini" requested by the login. The login failed. Login failed for user '<laptop_name>\ASPNET'.`

我使用 Windows 身份验证。应用程序 web.config 中的连接字符串为：

`<add name="Gemini" connectionString="data source=(local)\SQLExpress;initial catalog=Gemini;trusted_connection=true;" providerName="System.Data.SqlClient"/>`

我有 SQL Server 管理工作室。

有人建议我授予“laptop_name\ASPNET”用户对 Gemini 数据库的所有访问权限。

我不是技术人员。如果有人能建议我如何授予该用户访问权限，我将不胜感激。因为我的笔记本电脑是单用户的，所以我只想要一个简单的解决方案——而不是复杂的防盗、防黑客解决方案 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:39:37.860

在我回答这个问题之前，让我提醒您，授予 IIS/ASP.NET 登录对您的 SQL Server Express 的完全访问权限存在安全隐患。特别是，如果有人闯入您的 IIS/ASP.NET，他们可以使用 SQL Server Express 通过 SQLCLR 程序集执行任何代码。

现在，到问题本身。我假设您已经安装了 SQL Server Express，因此是该实例的管理员。您需要做的就是使用 SQL Server Management Studio 执行此 T-SQL 代码：

```
create login [<laptop_name>\ASPNET] from windows;
exec sp_addsrvrolemember N'<laptop_name>\ASPNET', sysadmin 
```

# php - php-5.3.17 安装memcached memcache 扩展

> ID：12620422
> 
> 赞同：2
> 
> 时间：2012-09-27T11:33:16.977
> 
> 标签：php, memcached

centos 6.3，php-5.3.17，memcached扩展为memcached-2.1.0.tar.gz；接着：

```
tar -zxvf memcached-2.1.0.tar.gz
cd memcached-2.1.0
./configure --with-php-config=/usr/local/php/bin/php-config
 make 
```

并且有错误，像这样： ![在此处输入图像描述](../Images/0f561e4b389d16c9a3ae7edcb96e68fd.png)

为什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:07:28.317

在 Centos 6.3 上，您可以通过使用现成的 RPM 为自己节省大量时间和精力：

[http://pkgs.org/download/php-pecl-memcached](http://pkgs.org/download/php-pecl-memcached)

RPM 也可用于最新版本的 PHP、MySQL 等，如果您还没有使用它们的话。

如果您决定将 Remi 存储库添加到您的`yum`配置中，您可以添加以下行`/etc/yum.repos.d/remi.repo`来选择您需要的包：

```
includepkgs=mysql* php* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:55:37.743

看起来您需要安装[libmemcached](http://libmemcached.org/libMemcached.html)，因为它是 pecl-memcached 的依赖项

```
sh ~> curl -O https://launchpad.net/libmemcached/1.0/1.0.11/+download/libmemcached-1.0.11.tar.gz
sh ~> tar zvxf libmemcached-1.0.11.tar.gz
sh ~> cd libmemcached-1.0.11
sh ~> ./configure
sh ~> make
sh ~> sudo make install 
```

另外，`phpize`在配置 PECL 源文件之前使用

```
sh ~> tar zxvf memcached-2.1.0.tar.gz
sh ~> cd memcached-2.1.0
sh ~> phpize
sh ~> ./configure --with-php-config=/usr/local/php/bin/php-config
sh ~> make 
sh ~> make test
sh ~> sudo make install 
```

# perl - File::Find 是否有更简洁的方法来返回所需文件的列表？

> ID：12620423
> 
> 赞同：3
> 
> 时间：2012-09-27T11:33:27.493
> 
> 标签：perl, file-find

我发现背后的设计选择[`File::Find::find`](https://metacpan.org/module/File%3a%3aFind)有点令人惊讶。我遇到的所有示例都显示`find`在无效上下文中。

该[文档](https://metacpan.org/module/File%3a%3aFind#The-wanted-function)还澄清了`\&wanted`coderef in`find( \&wanted, @dirs )`并不意味着是一个过滤器（强调我自己的）：

> 该`wanted()`函数对***每个*** 文件和目录执行您想要的任何验证。请注意，尽管它的名称，该`wanted()` 函数是一个通用的回调函数，并且不***告诉***文件 `File::Find`是否“需要”。实际上，它的返回值被忽略了。

* * *

但是，如果我确实想以类似于的方式将其用作过滤器[`grep`](http://perldoc.perl.org/functions/grep.html)怎么办？我很想知道是否有另一种写法：

```
use strict;
use warnings;
use feature 'say';

use File::Find;

my $wanted = qr/^\d{2}_/;  # e.g.

my @wanted;
find( sub { -f && /$wanted/ && push @wanted, $_ }, '.' );

# I wish my @wanted = find( ... ); worked

say for @wanted; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T11:43:12.107

在 CPAN 上，我发现了几个 File::Find 的替代接口，旨在简化接口。

我会首先尝试[`File::Finder`](http://search.cpan.org/~merlyn/File-Finder-0.53/lib/File/Finder.pm)由著名的 Perl 专家 Randal Schwartz 编写。

[`File::Find::Rule`](http://search.cpan.org/~rclamp/File-Find-Rule-0.33/lib/File/Find/Rule.pm)是另一个。

*（可以肯定地说，如果人们正在编写模块来做到这一点，那么没有简单的内置方法可以做到这一点。）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:58:53.707

我认为您以正确的方式使用它。您唯一能做的就是将`find`函数包装在另一个创建数组的函数中（使用`push`），然后返回它。

```
sub find_to_array {
    my $wanted = shift;
    my @array;
    find( sub { -f && /$wanted/ && push @array, $_ }, '.' );
    return @array;
} 
```

通过这种方式，您可以获得您正在寻找的东西，但这与您所做的几乎相同。

# javascript - ExtJS 4：克隆存储

> ID：12620424
> 
> 赞同：14
> 
> 时间：2012-09-27T11:33:28.707
> 
> 标签：javascript, extjs, model, extjs4, store

我试图弄清楚如何在`Ext.data.Store`不保留旧参考的情况下克隆一个。

让我用一些代码更好地解释一下。这是源存储：

```
var source = Ext.create ('Ext.data.Store', {
    fields: ['name', 'age'] ,
    data: [
        {name: 'foo', age: 20} ,
        {name: 'boo', age: 30} ,
        {name: 'too', age: 10} ,
        {name: 'yoo', age: 80} ,
        {name: 'zoo', age: 30}
    ]
}); 
```

遵循我想要做的一个例子：

```
var target = source;
target.removeAll ();
// Here I need to have target empty and source unchanged
// But in this case, source is empty as well 
```

现在，在上面的示例中，复制是通过引用完成的，而我需要通过值来完成。所以我`Ext.clone ()`在文档中找到了，但它似乎不适用于复杂的对象，例如`Ext.data.Store`：

```
var target = Ext.clone (source);
target.removeAll ();
// source is still empty 
```

然后我尝试了，`Ext.data.Model.copy ()`但唯一可行的方法是：

```
var target = Ext.create ('Ext.data.Store', {
    fields: ['name', 'age']
});

source.each (function (model) {
    target.add (model.copy ());
}); 
```

现在，出于我的原因，我不想实例化另一个`Ext.data.Store`，所以我想避免这种情况：

```
var target = Ext.create ('Ext.data.Store', {
    fields: ['name', 'age']
}); 
```

我想要这样的东西：

```
var target;

source.each (function (model) {
    target.add (model.copy ());
}); 
```

但是，显然，它不起作用。

**那么，如何克隆源存储？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-11-04T11:47:44.423

**ExtJS 6.x、5.x 和 4.x 解决方案**

这是一个准所有 ExtJS 版本的解决方案。请注意，record.copy 已经创建了数据的克隆。无需再次 Ext.clone 。

```
function deepCloneStore (source) {
    source = Ext.isString(source) ? Ext.data.StoreManager.lookup(source) : source;

    var target = Ext.create(source.$className, {
        model: source.model,
    });

    target.add(Ext.Array.map(source.getRange(), function (record) {
        return record.copy();
    }));

    return target;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-28T21:39:29.203

**ExtJS 3.x 解决方案**

尝试这个：

```
cloneStore : function(originStore, newStore) {

    if (!newStore) {
        newStore = Ext.create('Ext.data.Store', {
            model : originStore.model
        });
    } else {
        newStore.removeAll(true);
    }

    var records = [], originRecords = originStore.getRange(), i, newRecordData;
    for (i = 0; i < originRecords.length; i++) {
        newRecordData = Ext.ux.clone(originRecords[i].copy().data);
        newStore.add(new newStore.model(newRecordData, newRecordData.id));
    }

    newStore.fireEvent('load', newStore);

    return newStore;
} 
```

注意：`Ext.ux.clone`是一个单独的插件（你会找到它），它可以对对象进行*深度*克隆。也许，Ext JS 4 提供了一个熟悉的东西，我不知道。我从 Ext JS 3.x 开始使用这个特殊的克隆

创建新商店时可能需要指定代理`memory`（我现在不确定，因为我总是使用“提供”的方式。

**ExtJS 4.x 解决方案**

```
function deepCloneStore (source) {
    var target = Ext.create ('Ext.data.Store', {
        model: source.model
    });

    Ext.each (source.getRange (), function (record) {
        var newRecordData = Ext.clone (record.copy().data);
        var model = new source.model (newRecordData, newRecordData.id);

        target.add (model);
    });

    return target;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-11T23:20:21.360

我在 Ext.js 4.1 中成功完成了以下操作：

```
var source = Ext.create('Ext.data.Store', {
    fields: ['name', 'age'],
    data: [
        {name: 'foo', age: 20},
        {name: 'boo', age: 30},
    ],
}); 
```

在一个方法中：

```
cloneStore: function (source) {
    var clone = Ext.create('Ext.data.Store', {
        fields: ['name', 'age']
    });

    // load source store data
    clone.loadData(source.data.items);

    return clone;
} 
```

排队：

```
var clone = Ext.create('Ext.data.Store', {
    fields: ['name', 'age']
}).loadData(source.data.items); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-10T15:57:46.570

因为这仍然是我一直在寻找的东西，而上面的答案并没有为我解决这个问题，所以我自己找到了另一个解决方案：

```
var target = Ext.create ('Ext.data.Store', {
    // add other properties here if needed
    reader: source.reader
}) 
```

这对我创建商店的克隆很有用。

# android - 如何用图像替换 TextView 文本的某些部分并获取该图像的坐标？

> ID：12620426
> 
> 赞同：0
> 
> 时间：2012-09-27T11:33:32.887
> 
> 标签：android, android-widget

![在此处输入图像描述](../Images/42d6dcdd39b74264ec284c75ac993bfb.png)

我正在编写拖放代码。要求是我将答案拖放到提供的空间中（填空）。我在想的是我在屏幕上拖动一个视图并匹配提供的空间坐标并释放视图，即在 Action_Up 上。现在的问题是填充空间将在运行时设置，即带有“[WOL]”文本的字符串我必须用填充图像替换此文本并获取图像的坐标以匹配拖动的视图。请帮助我如何做到这一点。请检查所附图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:48:21.140

您不能用图像或其他组件替换 TextView 的一部分......

从上面的屏幕截图中，我可以看到 3 个独立的组件：
1\. a `TextView`（“*每个人的卡路里都很高*”），
2\. an `EditText`（或 ImageView，无论那个组件是什么）
3\. 另一个`TextView`（“ *serving* ”）；

# asp.net - Asp.net 路由 /something/{any url} 到 /{any url}

> ID：12620433
> 
> 赞同：0
> 
> 时间：2012-09-27T11:33:58.897
> 
> 标签：asp.net, routing, url-routing, asp.net-routing

这件事让我发疯：

浏览器 url --------> 物理路径

```
http://somedomain/routeName ----> ~/Default.aspx WORKS

http://somedomain/routeName/anypage.aspx ----> ~/anypage.aspx  WORKS

http://somedomain/routeName/anyfolder ----> ~/anyfolder/Default.aspx DOESNT WORK

http://somedomain/routeName/anyfolder/anypage.aspx ----> ~/anyfolder/anypage.aspx WORKS 
```

其中 anypage.aspx 是任何 aspx 页面

其中 anyfolder 是任何路径

我正在使用这条路线：

```
var sb = new StringBuilder("(");
foreach (Poll item in DataProvider.Get<IPollProvider>().GetAll())
{
    sb.AppendFormat("{0}|", item.Name);
}
sb.Length--;
sb.Append(")");
RouteTable.Routes.MapPageRoute("Alias", "{pollName}/{*url}", "~/{url}", true, new RouteValueDictionary{{"url","~/Default.aspx"}}, new RouteValueDictionary { { "pollName", sb.ToString() } }); 
```

这是一个经典的 asp.net 站点，而不是 MVC

加载了 UrlRoutingModule 的 IIS 7 集成模式

```
<add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:59:17.183

我找到了一个方法：

在路线前添加

```
RouteTable.Routes.MapPageRoute("Alias", "{pollName}/{*url}", "~/{url}", true, new RouteValueDictionary{{"url","Default.aspx"}}, new RouteValueDictionary { { "pollName", sb.ToString() } }); 
```

我要处理的每条路径的路线：

```
//for http://somedomain/routeName/admin

RouteTable.Routes.MapPageRoute("AliasAdmin", "{pollName}/Admin/{*url}", "~/Admin/{url}", true, new RouteValueDictionary{{"url","Default.aspx"}}, new RouteValueDictionary { { "pollName", sb.ToString() } }); 
```

# hibernate - 尝试使用休眠 4 创建 SessionFactory 时出现异常

> ID：12620434
> 
> 赞同：2
> 
> 时间：2012-09-27T11:33:58.600
> 
> 标签：hibernate, guice, hibernate-search

我已经从休眠 3 升级到休眠 4。但是在尝试构建 SessionFactory

配置配置 = 新配置（）；sessionFactory = configuration.configure("app.cfg.xml").buildSessionFactory();

我收到以下异常

guiceFilter java.util.ServiceConfigurationError 失败：org.hibernate.integrator.spi.Integrator：提供程序 org.hibernate.search.hcore.impl.HibernateSearchIntegrator 无法实例化：java.lang.ClassCastException：无法转换 org.hibernate.search.hcore .impl.HibernateSearchIntegrator to org.hibernate.integrator.spi.Integrator at java.util.ServiceLoader.fail(Unknown Source) at java.util.ServiceLoader.access$100(Unknown Source) at java.util.ServiceLoader$LazyIterator.next( Unknown Source) at java.util.ServiceLoader$1.next(Unknown Source) at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.loadJavaServices(ClassLoaderServiceImpl.java:251) at org.hibernate.integrator.internal.IntegratorServiceImpl.(IntegratorServiceImpl .java:53) 在 org.hibernate.service.internal.BootstrapServiceRegistryImpl。(BootstrapServiceRegistryImpl.java:80) 在 org.hibernate.service.internal.BootstrapServiceRegistryImpl.(BootstrapServiceRegistryImpl.java:57) 在 org.hibernate.service.ServiceRegistryBuilder.(ServiceRegistryBuilder.java:76) 在 org.hibernate.cfg.Configuration。 buildSessionFactory(Configuration.java:1767) 在 com.app.server.data.hibernate.SessionProvider.createSessionFactory(SessionProvider.java:55) 在 com.app.server.data.hibernate.HibernateDataSourceConnector.init(HibernateDataSourceConnector.java:39)在 com.eng.server.services.ConfigurationServlet.init(ConfigurationServlet.java:42) 在 com.google.inject.servlet.ServletDefinition.init(ServletDefinition.java:117) 在 com.google.inject.servlet.ManagedServletPipeline.init (ManagedServletPipeline.java:82) 在 com.google.inject.servlet.ManagedFilterPipeline。initPipeline(ManagedFilterPipeline.java:102) 在 com.google.inject.servlet.GuiceFilter.init(GuiceFilter.java:172) 在 org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:97) 在 org.mortbay .component.AbstractLifeCycle.start(AbstractLifeCycle.java:39) 在 org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:593) 在 org.mortbay.jetty.servlet.Context.startContext(Context.java:140) ) 在 org.mortbay.jetty.webapp.WebAppContext 的 org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513) 的 org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)。 doStart(WebAppContext.java:448) at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39) 在 org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) 在 org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115) 在 org.mortbay.component.AbstractLifeCycle.start (AbstractLifeCycle.java:39) 在 org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) 在 org.mortbay.jetty.Server.doStart(Server.java:222) 在 org.mortbay.component。 AbstractLifeCycle.start(AbstractLifeCycle.java:39) at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672) at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java: 509) com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068) com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811) com.google.gwt.dev.DevMode .main(DevMode.java:311) 引起：java.lang.ClassCastException：无法将 org.hibernate.search.hcore.impl.HibernateSearchIntegrator 转换为 java.lang.Class.cast(Unknown Source) 的 org.hibernate.integrator.spi.Integrator ... 还有 35 个

以下是我项目中的罐子

```
antlr-2.7.7.jar
antlr.jar
aopalliance.jar
avro-1.5.1.jar
cglib-2.2.jar
commons-beanutils-1.8.2.jar
commons-collections-3.2.jar
commons-configuration-1.7.jar
commons-fileupload-1.2.jar
commons-io-1.3.1.jar
commons-lang-2.6.jar
commons-logging-1.1.1.jar
dom4j-1.6.1.jar
ehcache-1.2.3.jar
gin-2.0.jar
guice-3.0.jar
guice-assistedinject-3.0.jar
guice-multibindings-3.0.jar
guice-servlet-3.0.jar
guice-throwingproviders-3.0.jar
gwt-servlet.jar
hibernate-commons-annotations-4.0.1.Final.jar
hibernate-core-4.1.3.Final.jar
hibernate-entitymanager-4.1.3.Final.jar
hibernate-search-engine-4.1.1.Final.jar
hibernate-search-orm-4.1.1.Final.jar
hibernate-validator-4.0.2.GA.jar
jackson-core-asl-1.9.2.jar
jackson-mapper-asl-1.9.2.jar
javassist-3.4.GA.jar
javax.inject.jar
javax.persistence-2.0.0.jar
jboss-logging-3.1.0.GA.jar
jta-1.1.jar
log4j-1.2.15.jar
lucene-core-3.5.0.jar
mvp4g-1.4.0.jar
mysql-connector-java-5.1.18-bin.jar
paranamer-2.3.jar
slf4j-api-1.6.1.jar
slf4j-jcl-1.6.0.jar
snappy-java-1.0.1-rc3.jar 
```

依赖项是正确的还是我缺少某些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:41:44.280

*org.hibernate.search.hcore.impl.HibernateSearchIntegrator* of Hibernate Search version 4.1.1.Final 实现了*org.hibernate.integrator.spi.Integrator* of Hibernate ORM v. 4.1.3.Final

因此，由于您的依赖项看起来很完美，唯一的解释是您有一些重复的类定义。

我建议使用[JBoss Tattletale](http://www.jboss.org/tattletale)扫描您的应用程序，这是一个漂亮的命令行工具，可以探索您的 jar 以查找重复项。

例如，看起来您有一个重复的*antlr*。

# python - 字典的元组：一个键和多个值

> ID：12620437
> 
> 赞同：5
> 
> 时间：2012-09-27T11:34:02.137
> 
> 标签：python, dictionary, tuples

如何转换元组：

```
t=(('1','a'), ('1','A'), ('2','b'), ('2','B'), ('3','c'),('3', 'C')) 
```

进入字典：

```
{'1':('a','A'),'2':('b','B'),'3':('c','C')} 
```

我在控制台中尝试过：

```
>>> d={}
>>> t[0]
(1, 'a')
>>> d[t[0][0]]=t[0][1]
>>> d
{1: 'a'}
>>> t[0][0] in d
True
>>> d[t[1][0]]=t[1][1]
>>> d
{1: 'A'}
>>> d[t[0][0]]=t[0][1]
>>> d[t[1][0]]=d[t[1][0]],t[1][1]
>>> d
{1: ('a', 'A')} 
```

现在以下脚本无法完成这项工作：

```
t=(('1','a'), ('1','A'), ('2','b'), ('2','B'), ('3','c'),('3', 'C'))
print "{'1':('a','A'),'2':('b','B'),'3':('c','C')} wanted, not:",dict(t)
d={}

for c, ob in enumerate(t):
   print c,ob[0], ob[1]
   if ob[0] in d:
       print 'test'
       d[ob[0]]=d[ob[0]],ob[1]
       print d

   else:
       print 'else', d, ob[0],ob[1]
       d[ob[0]]=d[ob[1]]           # Errror is here
       print d
print d 
```

我有错误：

```
Traceback (most recent call last):
  File "/home/simon/ProjetPython/python general/tuple_vers_dic_pbkey.py", line 20, in <module>
    d[ob[0]]=d[ob[1]]
KeyError: 'a' 
```

它似乎与 $>>> d[t[0][0]]=t[0][1]$ 不同。谢谢你的帮助

J.P

PS有没有更好的方法来进行转换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T11:39:26.143

您可以使用集合模块中的[defaultdict](http://docs.python.org/library/collections.html#defaultdict-objects)（尽管它对列表而不是元组更有效）：

```
t=(('1','a'), ('1','A'), ('2','b'), ('2','B'), ('3','c'),('3', 'C'))

from collections import defaultdict
d = defaultdict(list)
for k, v in t:
    d[k].append(v)

d = {k:tuple(v) for k, v in d.items()}
print d 
```

或者简单地将元组添加在一起：

```
t = (('1','a'), ('1','A'), ('2','b'), ('2','B'), ('3','c'),('3', 'C'))
d = {}
for k, v in t:
    d[k] = d.get(k, ()) + (v,)
print d 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T11:39:00.220

```
import itertools as it
t=(('1','a'), ('1','A'), ('2','b'), ('2','B'), ('3','c'),('3', 'C'))

{k:tuple(x[1] for x in v) for k,v in it.groupby(sorted(t), key=lambda x: x[0])} 
```

返回

```
{'1': ('A', 'a'), '2': ('B', 'b'), '3': ('C', 'c')} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:39:12.057

```
t = (('1','a'), ('1','A'), ('2','b'), ('2','B'), ('3','c'),('3', 'C'))
foo = {}
for i in t:
    if i[0] not in foo:
        foo[i[0]] = [i[1]]
    else:
        foo[i[0]].append(i[1])
foo # {'3': ['c', 'C'], '2': ['b', 'B'], '1': ['a', 'A']} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T12:48:04.237

一个超级干净和优雅的选择是执行以下操作：

```
>>> d = {}
>>> for k,v in (('1','a'), ('1','A'), ('2','b'), ('2','B'), ('3','c'),('3', 'C')):
...     d.setdefault(k, []).append(v)
... 
>>> d
{'1': ['a', 'A'], '3': ['c', 'C'], '2': ['b', 'B']} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:16:13.777

为了完整起见，您可以使用列表推导的副作用在一行中执行此操作：

```
>>> tups=t=(('1','a'), ('1','A'), ('2','b'), ('2','B'), ('3','c'),('3', 'C'))
>>> d={}
>>> [d.setdefault(k,[]).append(v) for k,v in tups]
[None, None, None, None, None, None]
>>> d
{'1': ['a', 'A'], '3': ['c', 'C'], '2': ['b', 'B']} 
```

或集合理解的副作用（Py 2.7+ 或 3.1+）：

```
>>> d={}
>>> {d.setdefault(k,[]).append(v) for k,v in tups}
set([None])
>>> d
{'1': ['a', 'A'], '3': ['c', 'C'], '2': ['b', 'B']} 
```

这更多是出于兴趣——不是推荐的语法——但仍然很有趣。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T11:47:28.953

```
>>> t=(('1','a'), ('1','A'), ('2','b'), ('2','B'), ('3','c'),('3', 'C'))
>>> d1 = {}
>>> for each_tuple in t:
    if each_tuple[0] in d1:
        d1[each_tuple[0]] = d1[each_tuple[0]] + list(each_tuple[1])
    else:
        d1[each_tuple[0]] = list(each_tuple[1])

>>> d1
{'1': ['a', 'A'], '3': ['c', 'C'], '2': ['b', 'B']} 
```

# java - 我可以使用 Java NIO 从 Socket 中读取可用字节吗？

> ID：12620443
> 
> 赞同：5
> 
> 时间：2012-09-27T11:34:28.737
> 
> 标签：java, sockets, nio

我想知道在 Java NIO Socket 中是否有可用的字节被读取。在 C/C++ 中，可以使用以下方法来完成：

```
int available(int fd){
  long readable = 0;

    if (ioctl(fd, FIONREAD, &readable) < 0){
      // error
    }

  return (int) readable;
} 
```

可以用[Java NIO](http://docs.oracle.com/javase/7/docs/api/index.html?java/nio/package-summary.html)做同样的操作吗（使用[SocketChannel](http://docs.oracle.com/javase/7/docs/api/index.html?java/nio/channels/SocketChannel.html)、[Selector](http://docs.oracle.com/javase/7/docs/api/index.html?java/nio/channels/Selector.html)、[Socket](http://docs.oracle.com/javase/7/docs/api/index.html?java/net/Socket.html)等）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T10:43:37.887

做不到。形式上讲，存在一个 API via `SocketChannel.socket().getInputStream().available()`，但是`getInputStream()`在非阻塞通道上操作将失败，因此不能在您的情况下使用它。

*编辑：*现在您已经对我们有所启发，您需要的东西在 Java 中仍然不存在，但是由于您处于非阻塞模式，所以一点也不重要。只需读入一个至少与您的套接字接收缓冲区一样大的缓冲区：读取的字节数是可以在没有阻塞的情况下读取的字节数，这正是您刚刚所做的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T00:36:36.527

NIO 背后的想法是提供一种方法来同时等待来自多个连接中的任何一个的事件（例如“连接已准备好可读数据”），这听起来正是您正在寻找的。看看`java.nio.channels.Selector`。您基本上使用此选择器对象注册所有连接的“可读”事件，然后调用`select`将等待您的一个连接上的事件的三种方法之一：

1.  `select()`- 阻塞直到事件可用（如果您的程序没有其他事情可做，请使用）
2.  `select(long timeout)`- 阻塞，直到有事件可用或发生超时（如果你想节省 CPU 负载并增加网络响应能力，如果你的程序慢一点没关系，则使用）
3.  `selectNow()`- 立即返回（如果您的程序需要继续运行，请使用）

然后，您使用该`selectedKeys`方法获取所有等待事件的连接的列表（例如，准备好读取数据）。然后只需遍历此列表并仅从带有数据的连接中读取数据，并忽略不在列表中的其他连接，因为它们没有可用的数据。

这将允许您在不阻塞的情况下检查是否有数据可用（列表中是否存在连接），但不能检查有多少数据可用。但是，如果您随后对可用数据的连接进行读取，它将立即返回而不会阻塞并返回尽可能多的可用数据，前提是您为其提供了足够大的缓冲区。然后，您可以选择在某处缓冲这些数据并使缓冲区中的数据量可用，但有些事情告诉我，您实际上并不需要它，只想继续处理数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T14:12:28.900

我已经阅读了大量的文档、论坛，当然还有你的每一个回复。我已经开发并测试了一个解决方案。这不是最好的，但它是我最好的近似值。

我使用[Selector的](http://docs.oracle.com/javase/7/docs/api/index.html?java/nio/channels/Selector.html)[selectNow()](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/Selector.html#selectNow%28%29)方法。给定一个已注册[SocketChannel](http://docs.oracle.com/javase/7/docs/api/index.html?java/nio/channels/SocketChannel.html)的命名，我可以使用此方法来了解关联的[Socket](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)是否具有可读字节：`Selector``selector`

```
public boolean isReadable() {
    try {
        selector.selectNow();
        Set<SelectionKey> selectedKeys = selector.selectedKeys();
        Iterator<SelectionKey> keyIterator = selectedKeys.iterator();
        while(keyIterator.hasNext()) {
            SelectionKey selectionKey = keyIterator.next();
            if(!selectionKey.isValid()) {
                continue;
            }
            if(selectionKey.isReadable()) {
                return true;
            }
            keyIterator.remove();
        }
    } catch(IOException e) {
        // error
    }
    return false;
} 
```

这是我发现知道套接字是否具有可读字节而不读取字节的唯一方法。您知道这样做的更好方法或这样做的缺点吗？

**编辑：**

这个解决方案第一次工作，但它有一个缺点：即使 0 字节是可读的，它也总是返回 true。即使没有数据可用，套接字也可以读取。这不是我想要的行为，因为当读取缓冲区中没有数据时我不想读取。

**EDIT2 之二：**

测试这段代码：

```
public static boolean isReadable(Selector selector) {
    try {
        selector.selectNow();
        Set<SelectionKey> selectedKeys = selector.selectedKeys();
        Iterator<SelectionKey> keyIterator = selectedKeys.iterator();
        while (keyIterator.hasNext()) {
            SelectionKey selectionKey = keyIterator.next();
            if (!selectionKey.isValid()) {
                continue;
            }
            if (selectionKey.isReadable()) {
                    keyIterator.remove();
                return true;
            }
            keyIterator.remove();
        }
    } catch (IOException e) {
        System.err.println("Error!");
        e.printStackTrace();
    }
    return false;
}

public static void read() {
    try {
        Selector selector = Selector.open();
        SocketChannel socketChannel = SocketChannel.open();

        Socket socket = socketChannel.socket();

        System.out.println("Connecting to server...");
        socket.connect(new InetSocketAddress("localhost", 9999));
        System.out.println("Connected to server.");

        socketChannel.configureBlocking(false);

        socketChannel.register(selector, SelectionKey.OP_READ);

        ByteBuffer bb = ByteBuffer.allocate(1024);

        while (true) {
            boolean readable = isReadable(selector);
            if (readable) {
                System.out.println("Readable data found! Let's read...");
                bb.clear();
                int readBytes = socketChannel.read(bb);
                if (readBytes < 0) {
                    System.out.println("End of Stream found");
                    break;
                }
                byte[] readArray = new byte[readBytes];
                System.arraycopy(bb.array(), 0, readArray, 0, readBytes);
                System.out.println("Read (" + (readBytes) + " bytes): "
                        + new String(readArray, Charset.forName("UTF-8")));
                bb.flip();
                socketChannel.write(bb);
                Thread.sleep(1000);
            } else {
                System.out.println("No data to read, sleeping");
                Thread.sleep(1000);
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public static void main(String[] args) {
    read();
} 
```

首先，我执行一个监听连接并写入数据的应用程序：我使用[netcat](http://netcat.sourceforge.net/)和这个命令：`nc -l 9999`. 然后我执行我的 Java 程序。最后，我可以在其中编写文本行，`netcat`并且我的 Java 程序可以完美运行。

请记住，它是概念证明，而不是真正的编程解决方案。事实上，这是一个非常糟糕的做法。谢谢@EJP 和@Markus！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T16:28:33.480

我不知道 NIO 中有任何方法可以做到这一点。一个只是继续阅读。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-03T10:22:42.807

Bytebuffer.limit 将返回缓冲区中可用的长度。

```
sctpChannel.receive(byteBuffer, null, null);
byteBuffer.flip();

 if (byteBuffer.limit() > 0) 
  {
         .....................//Do your work here
    //             read the data in a byte array
    byteBuffer.clear();  
  } 
```

# twitter-bootstrap - 在 Twitter Bootstrap 中居中响应式内容

> ID：12620449
> 
> 赞同：1
> 
> 时间：2012-09-27T11:34:46.820
> 
> 标签：twitter-bootstrap, responsive-design

我有一个固定的（span12）容器。其中我有一个 span3 侧边栏和一个 span9 内容区域。

在 span9 内容区域内，我有 2 张图片。我希望它们拆分 50/50，并且仍然具有响应性，因此当我的屏幕很大时，它们会跨越内容区域的整个宽度，但是当它们被调整到 1024 区域时，它们会缩小，而不是换行.

这是我的工作示例，但带有 span5 和 span4 缩略图。我如何获得 50/50，所以基本上是 span4.5 ？

[http://dl.dropbox.com/u/240752/custom/test.html](http://dl.dropbox.com/u/240752/custom/test.html)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:38:02.157

使用 a`row-fluid`在您的`span9`

```
<div class="span9">
    <div class="row-fluid">
        <div class="span6">
        </div>
        <div class="span6">
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:40:23.660

您不应该拆分 span9 itno 4 和 5 ...将其拆分为 2 span6 它将正确显示

在这里检查：http: [//jsfiddle.net/eMETn/](http://jsfiddle.net/eMETn/)

# java - JSON 响应：带有 JAXB 的 Spring

> ID：12620450
> 
> 赞同：1
> 
> 时间：2012-09-27T11:34:48.660
> 
> 标签：java, json, spring, jaxb, resteasy

技术栈：Java 1.6、JAXB、Spring 3、JAX-RS (RESTEasy)、XSD

你好，

我正在使用带有 JAX-RS 的 Spring 来创建 RestFul Webservice。

一切正常，除了生成的响应包含设置器信息，例如

```
 {
    ...

    "setName": true,
    "setId": true,
    "setAddress": true,
    "setAge": true,
} 
```

我不知道这可能是什么原因造成的？我怎样才能关闭它？

阿迪

**更新 1：**

PersonRequest 类由 JAXB 生成并包含所有 javax.xml.bind.annotation.* 注释。

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = { "personResponse " })
@XmlRootElement(name = "PersonResponse ")
public class PersonResponse {

    @XmlElement(name = "Name", required = true)
    protected String name;

    @XmlElement(name = "Id", required = true)
    protected String id;

    // and the setters and getters

} 
```

资源看起来像这样：

```
@Component
@Path("/person")
public class PersonImpl implements Person {

    @Override
    @GET
    @Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML, "application/x-amf" })
    @Path("v1")
    public PersonResponse getPerson() {

       ....
       ....
    }

} 
```

** 更新 2 ** 仅当 Content-Type 为 json 时才会发生这种情况，如果 Content Type 为“xml”，则不返回 setter。如果这有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:12:09.747

我怀疑堆栈的其他部分正在将额外的字段编织到您的域模型中（即一些 ORM 库会这样做）。为了确认您可以使用`java.lang.reflect`API 查看您的类在被`ClassLoader`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:09:45.200

[问题出在 xjb 文件中，有关详细信息，请参阅此处](https://stackoverflow.com/questions/12860742/jaxb-bean-generation)的相关问题。

# ruby-on-rails - 设计 - 让管理员用户编辑电子邮件模板？

> ID：12620455
> 
> 赞同：0
> 
> 时间：2012-09-27T11:34:54.307
> 
> 标签：ruby-on-rails, ruby, devise

我正在使用 Devise 来管理 Rails 的身份验证，并且作为其中的一部分，Devise 会发送电子邮件进行确认、重置密码*等*。我可以编辑模板以使其为我们的品牌定制。

客户现在的要求比较棘手，我需要一些指导；他们希望管理员用户能够通过应用程序编辑电子邮件模板。

Devise 邮件模板是 HAML 视图。我想我可以简单地将模板作为一个大字符串存储在数据库中，但问题是（a）用户理解 HAML（*即*，我需要使用中间标记或 TinyMCE）（b）我将如何从我的控制器？神奇的是它进入了正确的视野；我不清楚如何让控制器说“渲染”。

从技术上讲，最后一个渲染步骤似乎是一个障碍。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:41:06.570

将视图复制到您的应用程序中，然后将所有内容替换为`= @template.render`，或者您执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T03:51:16.323

另一种方法是创建一个`Email`模型，使用所见即所得的编辑器来编辑这些电子邮件，然后加载并呈现该电子邮件的正文（如果存在），否则呈现硬编码模板（作为测试环境的后备或者如果该特定电子邮件行被删除）。

这样，不再需要渲染 haml，也不需要用 html 或 haml 培训您的管理员。

这是一个应该涵盖所有内容的要点：[https ://gist.github.com/walidvb/4f0968f6cae5743b67f7](https://gist.github.com/walidvb/4f0968f6cae5743b67f7)

PS：不需要`Email`类来实现，邮件正文也可以通过其他方式直接存入数据库。但是，使用可以`ActiveRecord`方便地访问它。就我而言，我已经上了一`Email`节课。

PPS：为了防止删除设计电子邮件，我添加了一个`indestructible`专栏。此外，为了允许管理员切换回默认电子邮件，我添加了一个`active`列。

# javascript - 使用 jQuery 在新窗口中打开 iframe？

> ID：12620461
> 
> 赞同：0
> 
> 时间：2012-09-27T11:35:25.647
> 
> 标签：javascript, jquery

我在 Wordpress 帖子中嵌入了一个 iframe 的页面，我想在 iframe 中添加一个链接，单击该链接将在新窗口中打开该 iframe 的 html 页面。我希望能够在不知道该 iframe 的 URL 的情况下执行此操作。这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:42:01.357

使用 window.open 打开窗口。可以设置子窗口的高度、宽度等属性。[jsfiddle](http://jsfiddle.net/VjXHk/1/)。

```
 <a href='javascript:void(0)'  onClick="window.open(location,'_blank','width=800, height=900'); return false;" >Html name </a> 
```

jQuery：

```
$('a').click(function(){
       window.open(location,'_blank','width=800, height=900'); 
  return false; 

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:43:23.823

在 jquery 中，您只需在 javascript window.open() 中传递 iframe 的 src 值：

```
window.open($("iframe.test").attr("src"), "Window Title", "width=300,height=400,left=100,top=200"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:38:48.223

试试这个

```
<a href='pathofhtml' target=_blank >Html name </a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-19T16:15:07.657

不需要 jQuery。您可以使用 JavaScript 通过 ID 获取 iFrame 的 src。

```
 function popOut() {
        var src = document.getElementById('popOutiFrame').src;
        window.open(src);
    } 
```

接下来，使用按钮调用脚本

```
<button type="button" class="close" data-dismiss="modal"    onclick="popOut()">
    <!--Optional: Font Awesome expand icon-->
    <i class="fa fa-expand" aria-hidden="true"></i>
</button>

<iframe id='popOutiFrame' src='http://example.com'></iframe> 
```

## [演示](http://codepen.io/mabarbeau/pen/jqjByw)

# ipad - 从 ipad 上的 hotmail 导入联系人在身份验证后出现服务器错误

> ID：12620465
> 
> 赞同：2
> 
> 时间：2012-09-27T11:35:38.080
> 
> 标签：ipad, asp.net-mvc-4, contacts, hotmail

在我们的一个 MVC4 .NET 网站上，我们使用来自`<a href="http://stescodes.com/grabcontacts.aspx">stesCodes</a>`. 一切正常，直到我们尝试使用 iPad 从 hotmail 导入联系人。选择从 hotmail 导入后，我们将被重定向到 hotmail 上的身份验证页面。使用 hotmail 帐户登录后，我们应该被重定向到一个页面以指定此身份验证的持续时间。但在 iPad 上，我们会看到一个

> “/pp1350”应用程序中的服务器错误

*这是许可.live.com/ error.aspx*给出的错误，因此它不是在我们的网站上生成的，而是在hotmail 服务器的身份验证中生成的。

我们的 Windows Live API 似乎配置正确，因为我们能够从其他设备/浏览器上的 hotmail 导入联系人。即使在 PC 上使用 Safari，一切正常。

你们中有人熟悉这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T01:20:48.020

Windows live 已将其 API 更新为 oAuth 2.0，将其升级到 2.0，然后此错误将得到解决。

# java - Ant Build 无法识别 JAVA_HOME

> ID：12620467
> 
> 赞同：3
> 
> 时间：2012-09-27T11:35:41.767
> 
> 标签：java, ant, build

使用 ANT 构建时出现以下错误：

```
rem bug ID 32069: resetting an undefined env variable changes the errorlevel.
if not "C:\Program Files (x86)\Java\jdk1.6.0_30\bin\java.exe" == "" set _JAVACMD=
if not "" == "" set ANT_CMD_LINE_ARGS= 
```

我了解 ANT 无法指向 JDK。我正在通过`.bat`文件开始 ANT 构建，并在那里指定以下内容

```
set JAVA_HOME=C:\Program Files (x86)\Java\jdk1.6.0_30
set ANT_HOME=C:\Softwares\apache-ant-1.8.4 
```

如果将双引号添加到 JAVA_HOME 值，我会收到以下错误：

```
if exist "C:\Softwares\apache-ant-1.8.4\lib\ant.jar" goto checkJava

set _JAVACMD=
Files was unexpected at this time.
if ""C:\Program Files (x86)\Java\jdk1.6.0_30"" == "" goto noJavaHome 
```

令人困惑的部分是，如果我将 ANT_HOME 更改为以前的版本（1.6），它可以正常工作。

```
set ANT_HOME=C:\Softwares\Ant 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-06T15:05:04.530

这似乎与 64 位 Windows 上的 32 位 JDK 有关，但我不确定。

对我有用的是使用显然仍然有效的旧 ~ 技巧。所以在你的情况下，它可能应该是：

```
set JAVA_HOME=C:\Progra~2\Java\jdk1.6.0_30
set PATH=C:\Progra~2\Java\jdk1.6.0_30\bin;%PATH% 
```

请注意，我机器上的 progra~2 映射到 x86 程序文件目录。您的可能会有所不同，因此您需要检查一下。

# css - 使用边距使 div 上的图标居中

> ID：12620475
> 
> 赞同：0
> 
> 时间：2012-09-27T11:36:04.027
> 
> 标签：css

我正在尝试一种使用边距使图标居中的方法。我也给图标一个宽度（%）和高度（%）。我有

```
.container{
width:600px;
height:200px;
background-color:orange;
}
img {
width:6%;
margin-left:47%;
margin-right:47%;
height:16%;
margin-top:12%;
margin-bottom:12%;
}
body{

} 
```

该方法将图标水平而不是垂直居中。我想知道为什么这不起作用

```
img {
    width:6%;
    margin-left:47%;
    margin-right:47%;
    height:16%;
    margin-top:42%;
    margin-bottom:42%;
    } 
```

我也有这个小提琴，但我使用的边距顶部和边距底部是随机的[http://jsfiddle.net/thiswolf/EKWWt/](http://jsfiddle.net/thiswolf/EKWWt/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:48:15.740

由于防火墙废话，我看不到您的图像，但请看一下这个[答案](https://stackoverflow.com/questions/388180/how-to-make-an-image-center-vertically-horizontally-inside-a-bigger-div)。这也是我的[分叉小提琴](http://jsfiddle.net/WKvK3/)。

```
.container{
    width:600px;
    height:200px;
    background-color:orange;
    text-align:center;
    line-height:138px; /*You'll have to play around with this value*/
}

img {
    vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:43:41.463

尝试：

```
.container{
width:600px;
height:200px;
background-color:orange;
}
img {
margin:12% 50%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:44:22.933

您可以尝试将图标作为背景放置。如果因为它是动态加载而要求它在 html 中，那么您可以使用 javascript 将其替换为背景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:58:41.117

我认为图像是从主体而不是从容器 div 中获取边距。要水平和垂直居中图像，您可以设置位置：相对；在容器中 div 和 position: absolute; 在 img 元素中。这可能是可能的解决方案之一。

所以css可以是这样的......

```
.container{
  width:600px;
  height:200px;
  background-color:orange;
    position: relative;
 }
 img {
 width:6%;
 margin-left:47%;
 margin-right:47%;
 height:16%;
 margin-top:42%;
 margin-bottom:42%;
    position: absolute;
} 
```

# c# - 字符串比较错误

> ID：12620476
> 
> 赞同：3
> 
> 时间：2012-09-27T11:36:05.643
> 
> 标签：c#, .net-4.0, compare, immediate-window

如果我在我的即时窗口中输入这个

```
String.Compare("AA", "SA"); 
```

我得到一个结果 1

这肯定是错的吗？AA 小于 SA，所以它不应该是 -1 吗？

我正在运行 .NET 4

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T11:38:33.243

在丹麦文化中，“AA”被视为单个字母“Å”，按字母顺序排在“Z”之后。

```
CultureInfo cultureInfo = CultureInfo.GetCultureInfo("da-DK");
int comparision = String.Compare("AA", "SA", false, cultureInfo);
Console.WriteLine(comparision); 
```

结果：

```
1 
```

要获得您想要的结果，您可以使用不变的文化（或具有您想要的排序顺序的特定文化）：

```
CultureInfo cultureInfo = CultureInfo.InvariantCulture;
int comparision = String.Compare("AA", "SA", false, cultureInfo);
Console.WriteLine(comparision); 
```

结果：

```
-1 
```

# django - 多对多关系。在模板中显示数据

> ID：12620485
> 
> 赞同：0
> 
> 时间：2012-09-27T11:36:52.687
> 
> 标签：django, django-models

我学习了 Django ORM。

```
class Toy(models.Model):
    name = models.CharField(max_length=20)
    desc = models.TextField()
    price = models.DecimalField(max_digits=5, decimal_places=2)

class Box(models.Model):
    name = models.CharField(max_length=20)
    proprietor = models.ForeignKey(User, related_name='User_Box')
    toys = models.ManyToManyField(Toy, blank=True) 
```

我在视图中尝试这样的事情：

```
def show_box(request):
    user = request.user
    box = Box.objects.filter(proprietor = user)

    return render_to_response('box.html', {'box': box}) 
```

在模板中：

```
{% for b in box %}
    Toy: {% for toys in b.toys.all %}{{ toys }}<br/>{% endfor %} 
    Price:
{% endfor %} 
```

如何在模板中显示玩具的价格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:41:42.817

只需使用正常的点符号即可。`toys`是 Toy 模型的一个实例，因此您可以访问它的属性：

```
{% for box in boxes %}
    {% for toy in box.toys.all %}
        Toy: {{ toy.name }}<br/>
        Price: {{ toy.price }}<br/>
    {% endfor %}
{% endfor %} 
```

请注意，我已经更改了您的变量名称，这令人困惑：`box`您传递给模板的变量实际上应该是`boxes`，因为它是该所有者拥有的所有框的集合，而`toys`在模板内部应该是`toy`，因为它是一个特定的盒子里的玩具，而不是套装。

# c# - 将 Android cameraPreview 数据发送到 Unity

> ID：12620486
> 
> 赞同：0
> 
> 时间：2012-09-27T11:36:55.053
> 
> 标签：c#, java, android, camera, unity3d

我使用统一的java android活动。在 android 中，我使用相机获取预览，现在我想使用 将这些数据发送到统一`UnitySendMessage`，但这里只允许使用字符串。所以我将 转换`byte[]`为`Base64`字符串，然后`C#`将其解码回`byte[]`.

我不知道我做错了什么，但我只得到一个红色问号的图像。（认为​​这意味着纹理没有加载？）

这是我的java代码：

```
 _camera = Camera.open();
    _camera.setPreviewTexture(new SurfaceTexture(1));

    _camera.setPreviewCallback(new PreviewCallback() {

        public void onPreviewFrame(byte[] data, Camera cam)
        {
            String strData = Base64.encodeToString(data, Base64.DEFAULT);
            UnityPlayer.UnitySendMessage("VideoFeed", "PostFeedData", strData);
        }
    });

    Camera.Parameters parameters = _camera.getParameters();
    parameters.setPreviewFormat(ImageFormat.JPEG);
    parameters.setPreviewSize(480, 320);

    _camera.setParameters(parameters);
    _camera.startPreview(); 
```

这是我接收该方法的函数：

```
 byte[] byteData = Convert.FromBase64String(data);
    Texture2D tex = new Texture2D(480,320);
    tex.LoadImage(byteData);
    renderer.material.mainTexture = tex; 
```

我这样做是因为统一的 WebCamTexture 在我的 Android 上不起作用。这更有趣；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:02:43.997

首先，确保您的相机支持：`parameters.setPreviewFormat(ImageFormat.JPEG);`

相机可以发送 NV21 格式的数据，并检查是否`tex.LoadImage(byteDate)`知道解释您的数据（几乎可以肯定它不知道 NV21，~~也许它甚至不知道 JPEG 编码数据~~，好吧）。

检查支持的格式：

```
Parameters p = camera.getParameters();
List<Integer> formats = p.getSupportedPreviewFormats();
for(Integer format: formats){
   String strFormat = "" + format;
   switch(format.intValue()){
    case ImageFormat.JPEG: strFormat = "JPEG"; break;
    case ImageFormat.NV21: strFormat = "NV21"; break;
    case ImageFormat.RGB_565: strFormat = "RGB_565"; break;
   }
    Log.v(TAG, "preview format supported: "  + strFormat);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:41:01.820

我已经提出了另一种解决方案。我现在使用 SurfaceView 作为相机。我将此 SurfaceView 添加到统一活动中。

创建时：

```
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    ResetData();
    _camPreview = new CameraPreview();

    TextureView texView = new TextureView(this);
    _camPreview.Init(texView);

    UnityPlayer.currentActivity.addContentView(texView, new FrameLayout.LayoutParams(400, 400));
} 
```

当我初始化相机时：

```
public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height)
{
    //Get camera
    _camera = Camera.open();
    _camera.setDisplayOrientation(90);

    _TextureView.setLayoutParams(new FrameLayout.LayoutParams(400, 400, Gravity.CENTER));
    _TextureView.setTranslationY(-100);

    //Set dummy texture
    try {
        _camera.setPreviewTexture(surface);
    }
    catch (IOException e)
    {
        Log.e("Unity", "Error surface");
    }

    //Get parameters
    Camera.Parameters parameters = _camera.getParameters();

    //Set JPEG
    parameters.setPreviewFormat(ImageFormat.JPEG);

    //Set image size
    parameters.setPreviewSize(480, 320);

    //Set new parameters
    _camera.setParameters(parameters);
    _camera.startPreview();
} 
```

# titanium - 在钛框架中形成 .apk 文件的内部程序是什么？

> ID：12620487
> 
> 赞同：0
> 
> 时间：2012-09-27T11:37:03.197
> 
> 标签：titanium, titanium-mobile

我正在 Titan Ide 中编写 javascript 代码。当我运行代码.apk文件时，我可以安装在android设备中。我想知道.apk文件是如何从钛中的javascript代码形成的内部过程？我想一步一步地了解整个事情。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:55:03.277

这已经记录在 SO 上。查看这篇文章： [使用 Titanium Mobile 编译应用程序后 JavaScript 代码会发生什么情况](https://stackoverflow.com/questions/4217551/what-happens-to-javascript-code-after-app-is-compiled-using-titanium-mobile)

当您使用与本机使用完全相同的工具链创建 APK 时，Titanium 会为您完成。

# php - 从变量打开 ZIP 文件，而不是 PHP 中的 URI

> ID：12620497
> 
> 赞同：3
> 
> 时间：2012-09-27T11:37:35.760
> 
> 标签：php, zip

我尝试从变量而不是 PHP 中的文件打开 ZIP 存档。

这意味着有一个文件或一个 MySQL 查询，我读入了一个变量 $zip_contents 左右。这个变量应该被传递给像 ZipArchive::open() 这样的方法，而不是文件名。

这是可能的还是我走错了路？

亲切的问候

祖库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:46:45.517

你能负担得起对解压缩文件的现有类进行少量修补吗？比如有一个简单的解决方案，涉及到phpMyAdmin的分发，具体看下`libraries`子目录。它包含`unzip.lib.php`（GPL）。该函数`ReadFile`可以很容易地修补以接受变量，因为它在第一行读取文件，然后使用此数据。所以只需要改变它就可以直接接受数据。

[这是](http://www.boonex.com/trac/dolphin/browser/trunk/plugins/myadmin/unzip.lib.php)该课程的直接链接。

# salesforce - 根据 Salesforce 中的分组案例状态创建报表

> ID：12620498
> 
> 赞同：1
> 
> 时间：2012-09-27T11:37:47.283
> 
> 标签：salesforce

因此，让我们假设一个案例从打开到关闭需要 20 个小时。所以我需要把这20个小时分成三组（进行中，等待公司，等待客户）

无需担心谁工作/何时工作，什么状态等。我只需要能够将上述示例中的 20 小时分配到这三个组中。因此，每个案例在报告中都会有一行，这 3 列带有案例编号。

这样我就可以在案例生命周期中弄清楚这三个组花费了多少时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T07:59:30.677

我通过在报告中使用存储桶实现了这一点。我创建了三个具有提及名称的存储桶值，相应地对案例状态进行分组，然后在可打印视图中生成矩阵报告。

希望这篇文章对某人有所帮助..

# dynamics-crm - 将自定义实体从一个解决方案导入到另一个解决方案

> ID：12620502
> 
> 赞同：0
> 
> 时间：2012-09-27T11:37:58.893
> 
> 标签：dynamics-crm, dynamics-crm-2011

我的一个解决方案中有一个自定义实体，我需要另一个解决方案。如何将实体从一个解决方案导入到另一个解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:28:53.033

它应该像使用解决方案 - 实体视图中的“添加现有”按钮一样简单。

# unit-testing - 从 Intellij IDEA 开始的慢速 Grails 测试

> ID：12620503
> 
> 赞同：8
> 
> 时间：2012-09-27T11:38:01.000
> 
> 标签：unit-testing, testing, grails, intellij-idea

每次我不想运行单个测试时，IDEA 都会启动一个新的 Grails 实例。

有没有办法使用常规 Grails 跑步者但使用交互模式？在交互模式下运行测试非常快:-)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T13:22:12.783

为什么不从命令行运行它？我发现IDE非常慢。如果您使用的是 2.1.1 版本，则可以只使用普通命令 grails。这将为您提供交互式控制台，然后从那里运行命令 test-app。这将运行您的所有测试。如果你想运行任何特定的测试，你也可以这样做，只需看看[这里](http://grails.org/doc/latest/guide/single.html#testing)，你就会看到如何运行一些特定的测试

如果您使用的是 1.3 版，则可以使用命令 grails interactive，这将为您提供交互式控制台。您可以使用相同的命令 test-app 列表来运行所有测试

# eclipse - Eclipse：自定义更新站点不显示

> ID：12620511
> 
> 赞同：1
> 
> 时间：2012-09-27T11:38:29.793
> 
> 标签：eclipse

我在 Eclipse 中创建了一个自定义插件，其中包含视图。作为 Eclipse Application 运行时，它运行正常。我为它创建了一个updateSite，并在将文件夹保存在根目录后通过本地服务器安装了插件。重新启动 Eclipse 后，当它作为 Eclipse Application 运行时出现时，该选项`Window->Show View->Other->MyPlugin`没有出现。

任何人都可以帮助我吗？

# java - 获取Java类中文件的真实路径

> ID：12620515
> 
> 赞同：6
> 
> 时间：2012-09-27T11:38:34.103
> 
> 标签：java, path, filepath

我得到一个这样的文件：

```
String myFile = "D:/dev/workspace/MyProject/WebContent/stats/stats.csv";
File statsFile = new File(myFile); 
```

但我只想将相对路径设为`stats/stats.csv`. 我不想在我的代码中编写完整的路径。

在 servlet 中，我这样做：

```
File statsFile = new File(this.getServletContext().getRealPath("/") + "stats/stats.csv"); 
```

但这里它不在 servlet 中。那么java类中的等效方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:39:35.287

您应该将它放在 CLASSPATH 中并从`InputStream`获取的 using中读取它`getResourceAsStream()`。这是访问文件的与路径无关的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:13:18.893

```
String basePath = "D:/dev/workspace/MyProject/WebContent";
String absolutePath = "D:/dev/workspace/MyProject/WebContent/stats/stats.csv";

String relativePath = new File(basePath).toURI().
                        relativize(new File(absolutePath).toURI()).getPath();

System.out.println(relativePath);   // stats/stats.csv 
```

`basePath`是路径，相对于您要获取的路径`Relative Path`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:10:40.270

我找到了解决方案。我可以使用我的 JSP 来使用`File statsFile = new File(this.getServletContext().getRealPath("/") + "stats/stats.csv")`，然后传递`statsFile`给我的班级。

# java - Jibx 根包名

> ID：12620517
> 
> 赞同：0
> 
> 时间：2012-09-27T11:38:45.460
> 
> 标签：java, maven, jibx

我看到 JibX 使用默认的 binding.xml，它在标签中包含一个包属性。有没有办法覆盖这个值？具体来说，我们可以在 jibx-maven-plugin 中自定义它吗？

谢谢，戈帕尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:42:17.933

戈帕尔，
绝对！您可以将绑定文件命名为您喜欢的任何名称。只需将 <includeSchemaBindings> 标记设置为您正在使用的任何绑定文件名。有关完整的自定义列表，请查看此处的文档： [此处：http://jibx.sourceforge.net/maven-jibx-plugin/index.html](http://jibx.sourceforge.net/maven-jibx-plugin/index.html)。
大学教师

# dojox.charting - 鼠标指示器在道场图表中重叠

> ID：12620522
> 
> 赞同：2
> 
> 时间：2012-09-27T11:39:01.217
> 
> 标签：dojox.charting

我有一个不同系列的道场图表，我为每个系列添加了一个鼠标指示器。现在，当我将鼠标悬停在图表上时，它与鼠标指示器重叠。解决此问题的最佳方法是什么。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T20:09:29.117

创建指标时，添加“偏移”参数。您的第一个偏移量应为 0，然后将其增加一个设定量，以便下一个指标不妨碍第一个指标。

```
//yOffset is the step size for the y offset. index initialized to 0.
var yOffset = 20;
var interactor = new Indicator(holder.chart, "default", {
    series: *your series goes here*,  
    offset: {x: 0, y: yOffset * index}, 
 });
 index += 1; 
```

# ios - 检查界面方向的正确方法

> ID：12620528
> 
> 赞同：0
> 
> 时间：2012-09-27T11:39:15.647
> 
> 标签：ios, uiinterfaceorientation

检查设备界面方向的正确方法是什么。我应该检查状态栏方向还是当前活动视图控制器的方向属性？

也有人可以向我解释一下设备方向（如面朝上和面朝下）有用的场景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:49:26.780

如果代码在以方向作为输入的方法之外，我们使用：

```
[[UIApplication sharedApplication] statusBarOrientation] 
```

我们的一些应用程序中有它，它似乎没有造成任何麻烦......：D

`UIInterfaceOrientationPortrait`此外，和之间没有太大区别`UIInterfaceOrientationPortraitUpsideDown`，除了主页按钮相对于屏幕方向（倒置很好......倒置......）

一些开发人员选择不支持该`UIInterfaceOrientationPortraitUpsideDown`模式只是因为将设备放在顶部的主页按钮看起来很尴尬，但如果您愿意，您可以选择实现并支持它（我们所有的应用程序都这样做）。

以下是有关此可能值的更多信息以及每个值的描述：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/tdef/UIInterfaceOrientation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/tdef/UIInterfaceOrientation)

**编辑：**

但是请注意，iOS 6 改变了 UIViewControllers 的工作方式，这`shouldAutorotateToInterfaceOrientation`已经被弃用了。看到这个帖子：

[如何在 iOS 6 中强制 UIViewController 为纵向](https://stackoverflow.com/questions/12520030/how-to-force-a-uiviewcontroller-to-portait-orientation-in-ios-6)

这也是 UIViewController 上的 Apple 文档，其中提供了更多详细信息：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation)：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:00:45.833

如果您正在寻找用户查看界面的方式，请使用界面方向。我想这两种方法都很好。

如果您想找出物理设备的定位方式，请使用设备方向。

请注意，界面方向与设备方向不同（因此没有“设备的界面方向”之类的东西）。

设备方向可以是平上/平下（界面只能是纵向/倒置/横向右/左）。如果设备旋转但界面设置为常量，则设备方向也可能不同。加上横向方向是相反的，例如设备landsapeRight == interface LandscapeLeft。

我不确定何时面朝上/朝下可能有用。

以防万一您需要实际的方法，您可以使用以下方法从视图控制器检查界面方向：

```
UIInterfaceOrientation orientation = self.interfaceOrientation; 
```

或者从应用程序中的任何类使用这个（状态栏检查）：

```
UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation]; 
```

像这样获取设备方向：

```
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:12:37.033

你可以使用下面的代码..

愿这对你有所帮助。

```
if (UIDeviceOrientationIsPortrait([UIDevice currentDevice].orientation))
    {     
       //  Orientation is   Portrait   
    }       
    if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation)) 
    {       
       // Orientation is Landscape        
    } 
```

# c - 声明元素个数为 0 的数组仍然可以存储值

> ID：12620531
> 
> 赞同：5
> 
> 时间：2012-09-27T11:39:25.220
> 
> 标签：c, arrays, indexing, semantics

我知道使用负索引只是运气。但出于好奇，我尝试了这个。我知道你可以声明 array[0]; 就像 malloc(0); 是合法的。但是我怎么能在数组[0]中存储一个值呢？

```
#include <stdio.h>
#include <conio.h>
int main(void)
{
    int i;
    int array[0];
    array[0] = 5;
        printf("%d\n",array[0]);
    getch();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:59:13.820

如此`0`大小的数组在标准 C 中是违反约束的，您的编译器不应该在不给您诊断的情况下让您侥幸逃脱。如果它没有告诉您什么，那一定是您的编译器供应商添加到其 C 方言中的扩展。

不要依赖这样的扩展。

无论您是否使用 size 声明数组`0`，C 都没有对数组或指针访问进行强制边界检查。但是，如果在编译时知道超出范围，一个好的现代编译器仍然应该给你一个警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:47:20.213

您正在访问一个未定义或被其他东西使用的内存空间。这段代码最终会搞砸一些事情，因为在您使用 malloc 之前，您不知道数组存在的位置。您创建了一个大小为零的数组。无论你给它一个地址，C都会让你写任何你想写的东西。禁止操作系统干扰。“array”是一个指向数组的指针，它有一些任意值。编译器不知道在使用它时应该为数组的第零个元素保留内存空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:48:22.137

C 假设（在可能的情况下）您知道自己在做什么。零长度数组仍然有一个地址（但该地址可以很容易地与其他大小的东西共享）。当你索引到那个数组时，你只是在修改你正在使用的内存位置，而不用关心你最终得到的地址还有什么使用——并且通过写入，你很容易导致巨大的（并且难以调试）问题.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:50:47.450

就像 Vikdor 在评论中所说的那样，你正在写一个不是为你保留的内存位置。这可能会导致严重且难以调试的问题，因此我建议您永远不要这样做，但这就是它的工作原理：

当您声明一个大小为 0`int array[0]`的数组时，编译器会将名称“数组”与内存位置相关联。对于这个例子，假设为 100。但是由于数组的大小为 0，所以没有字节属于数组，因此字节 100、101 等也可能分配给其他变量。

当您说`array[0] = 5`您将数字 5 写入字节 100、101、102 和 103 时，因为 int 的长度为 4 个字节。然后您可以使用从位置 100 开始读取 4 个字节的数组 [0] 读取该数字。

当从 100 开始的空间分配给其他变量时会出现问题，因为它可能会覆盖 array[0] 并且看起来好像 array[0] 无缘无故地改变了（这是你将花费大量令人沮丧的时间的地方调试）

请记住，int array[0] 就像 int *array。数组的名称只是一个指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T12:07:15.607

```
int array[0]; 
```

是无效的 C 代码。它不符合标准。您的代码可以干净地编译，因为它使用了**[特定于编译器的扩展](http://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Zero-Length.html#Zero-Length)**。

参考：
**C99 标准：6.7.5.2 数组声明器**
**第 1 段：**

> 除了可选的类型限定符和关键字 static 之外，[ 和 ] 可以分隔表达式或`*`. 如果它们分隔了一个表达式（它指定了一个数组的大小），则该表达式应为整数类型。**如果表达式是常量表达式，则它的值应大于零**。元素类型不应是不完整类型或函数类型。可选类型限定符和关键字 static 应仅出现在具有数组类型的函数参数的声明中，然后仅出现在最外层的数组类型派生中。

* * *

> **为什么这似乎有效？**

假设您的编译器实现允许零长度数组：

```
array[0] = 5; 
```

仍然有效，因为此代码语句会导致**Undefined Behavior**。
它写入不属于数组的内存区域，从而覆盖已分配内存的边界。幸运的是，它可以工作，因为内存可能没有被其他实体使用。从技术上讲，它仍然是一种未定义的行为。

# java - JDownloader，检查链接，添加链接，读取验证码

> ID：12620536
> 
> 赞同：1
> 
> 时间：2012-09-27T11:39:37.500
> 
> 标签：java, jdownloader

我现在不知道它是否适合这个问题......

我正在为 jDownloader 开发一些插件，我有一些问题。第一个问题：如何查看链接？我试过这种方式（但它不起作用）：

```
LinkChecker lc = new LinkChecker();
lc.check("http://rapidshare..."); 
```

我想检查链接是否可下载，然后将其添加到队列中（怎么做？）

另一个问题：如何处理验证码？我想获取验证码（如果出现）并发送到服务 DeathByCaptcha.com。

非常感谢您，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:20:12.217

好的，谢谢你的建议。以下是解决方案（也许它对某人有用）：

```
// CAPTCHA
// class: CaptchaDialogQueueEntry.java
// method: viaGui()
// This method handle all captcha requests and you can read it in this way:

captchaController.getCaptchaFile().toURI().toURL().toString() // this is the path of captcha file on your computer, you can read this and do anything 
```

检查链接

您必须添加 LinkCollector 的链接，然后您可以添加文件做下载列表。这是代码：

```
 LinkCollector
            .getInstance()
            .addCrawlerJob(
                    new LinkCollectingJob(
                            "http://bitshare.com/files/vddhv6sd/2002-Habakuk---Muzyka--slowa--liczba--kolor.rar.html")); 
```

之后，您可以将所有添加的文件添加到下载列表：

```
 for (int i = 0, c = LinkCollector.getInstance().getPackages()
                .size(); i < c; i++) {

            if (LinkCollector.getInstance().getPackages().get(i)
                    .getChildren().get(0).getSize() > 0) {
                DownloadController.getInstance().addAll(
                        LinkCollector.getInstance().convert(
                                LinkCollector.getInstance().getPackages()
                                        .get(i).getChildren(), true));
            }
        } 
```

一切都是静态的，因此您可以创建自己的插件并在任何地方实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:46:24.537

你真的应该看看 JD-Developer 网站。

它有关于[如何开始](http://jdownloader.org/knowledge/wiki/development/get-started)，[验证码识别](http://jdownloader.org/knowledge/wiki/development/captcha/index)等部分......

# jquery - jquery：自动更改选择标签列表的选项

> ID：12620539
> 
> 赞同：3
> 
> 时间：2012-09-27T11:39:39.313
> 
> 标签：jquery, html

我在选择标签中有两个下拉列表项

第一个选择标签有年份列表 第二个选择标签有月份列表

```
<SELECT id="year" onchange="showData();">
  <OPTION VALUE="2012">2012
  <OPTION VALUE="2011">2011
  <OPTION VALUE="2010">2010
  <OPTION VALUE="2009">2009
  <OPTION VALUE="2008">2008
</SELECT>

<SELECT id="month" onchange="showData();">
  <OPTION VALUE="jan">jan
  <OPTION VALUE="feb">feb
  <OPTION VALUE="mar">mar
        .
        .
  <OPTION VALUE="dec">dec
</SELECT> 
```

那么我如何在 5 秒后自动更改月份和一年 60 秒

我的jQuery是什么

```
function changeMonthYear() {    
    //what to code here to change option of select tag
    //automatically after some time 
    //say 5 sec per month & after 60 sec year will be changed
    showData();    
}

showData() {    
    //some logic will show data for selected year & month    
} 
```

如何修复它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:45:10.343

尝试一下

```
function changeYear() {

        $('option:selected', '#year').removeAttr('selected').next('option').attr(
                'selected', 'selected'); //your id of select tag is 'year'

        showData();

    }

    function changeYearMonth() {

        $('option:selected', '#month').removeAttr('selected').next('option')
                .attr('selected', 'selected'); //your id of select tag is 'month'

        showData();

    }

    setInterval(changeYear, 60000);
    setInterval(changeYearMonth, 5000);

    showData(){

    //some logic will show data for selected year & month

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:01:40.007

这是一个简单的解决方案，一旦它通过所有选项，它将从头开始再次：

```
var i=0;
function changeYear() {
  var count = $('#year option').length;
  i = (i == count) ? 0 : i;
  $('#year').val($('#year option').eq(i++).val());
}

setInterval(changeYear, 1000); // example is 1 second! 
```

[这是一个小提琴](http://jsfiddle.net/deifwud/vYp2P/1/)

你也必须做同样的事情来改变月份，只是想我会把它留在这里，因为它比其他例子更干净（在我看来）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:48:03.630

```
var i=0,j=0;

 function changeMonthYear() {

        //what to code here to change option of select tag
        //automatically after some time 
        //say 5 sec per month & after 60 sec year will be changed
        setInterval(showData('year'),1000*60);
        setInterval(showData('month'),1000*5);

    }
function showData(that)
{
if(that=='year')
{    
document.getElementById(that).getElementsByTagName('option')[i].selected=true;
    i++;
}
else
{
document.getElementById(that).getElementsByTagName('option')[j].selected=true;
j++;
}
}
changeMonthYear(); 
```

# flash - 为 MAC 创建 SWF 投影仪（在 MAC 上）

> ID：12620541
> 
> 赞同：0
> 
> 时间：2012-09-27T11:39:43.630
> 
> 标签：flash, flashdevelop

我正在创建一个使用 Google 图片搜索结果作为其内容的一部分的 Flash 游戏，并且由于跨域浏览器限制，它无法在浏览器中运行。

对于 PC，我可以在独立 Flash 中运行 .SWF 并执行“文件 -> 创建投影仪”，我有一个 EXE 文件。

但是，在 Mac 上，我找不到这样的选项。如果我用 Adob​​e Flash 5.5 打开 SWF，我已经让游戏运行并加载内容，但没有“创建投影仪”或“发布”之类的选项。我读过可以为 Mac 创建一个 .HQX 文件，但我找不到任何有关如何从 SWF 文件开始执行此操作的信息。

**编辑：** 这就是我制作 .EXE 的方式

![在此处输入图像描述](../Images/151c4e952c407350ddea0125076c5fc5.png)

**编辑：** 对于项目的开发，我使用的是 FlashDevelop，它没有像 Adob​​e Flash 那样的“发布设置”。这就是我要求转换 SWF 的原因，因为我无法在 Mac 上打开我的 FlashDevelop 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:28:39.570

![这是带有 Mac 投影仪的 Flash 5.5，位于 Windows 下方](../Images/26c9c01b3d0ad0a7fe136b7639982571.png)

这是 Flash 5.5 的屏幕截图。如果您也在使用 5.5，那么问题很可能是您尝试发布的 Flash 版本，因为旧版本的 Flash Player 无法使用某些功能。它应该在那里。

# delphi - Delphi 编译器选项

> ID：12620542
> 
> 赞同：1
> 
> 时间：2012-09-27T11:39:46.427
> 
> 标签：delphi, compiler-construction, params

编译 Delphi 应用程序时，您有一些参数要在配置中使用 $(Config)\$(Platform) 将编译后的文件放在 Release\Win32 中是否有任何参数可以为我提供 DPR 文件中所述的程序名（这也是exe文件的名称）

只是为了更清楚我想要什么：我希望将所有编译的 exe 放在一个名为 C:_Delphi_Compiled\Projectname\Config\Platform 的文件夹中（使用我在下面提到的项目，它将是 C:_Delphi_Compiled\GUIDmaker \Release\Win32) 这将使我能够更好地控制我的项目 exe 文件和 DCU 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:51:06.610

`$EXENAME`是项目输出文件的名称（`Project1.exe`对于应用程序、`Project1.dll`库等）

`$PROJECTFILENAME`是您的 DPR 文件的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:11:44.773

在这里查看我的答案：[https](https://stackoverflow.com/a/9597461/978342) `\$(Platform)\$(Config)\$(MSBuildProjectName)` ://stackoverflow.com/a/9597461/978342这将为您提供所需的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T08:21:28.900

还有`Application.ExeName`，虽然如果这是由 dll 调用，则返回调用 exe 的名称而不是 dll 的名称。

[http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TApplication.ExeName](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TApplication.ExeName)

# c# - 在 contentplaceholder 中安装 gridview

> ID：12620545
> 
> 赞同：0
> 
> 时间：2012-09-27T11:39:54.807
> 
> 标签：c#, asp.net

我有一个大于我的内容占位符大小的网格视图。它不适合 contentplaceholder，每当我尝试编辑 gridview 时，它的宽度都会增加，使其延伸得更远。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:16:35.363

检查您的 gridview 是否设置了**Height**和**Width**属性。如果是这样.. 删除**高度**属性并将**宽度**设置为“100%”。

还将 gridview 放在**asp:Panel**控件中，然后将面板的**ScrollBars**属性设置为“Horizo​​ntal” ，将 Panel 的**Width**属性设置为“100%”

# iphone - 将使用相机拍摄的图像与我的应用中的图像进行比较

> ID：12620546
> 
> 赞同：1
> 
> 时间：2012-09-27T11:39:56.023
> 
> 标签：iphone, objective-c, ios, xcode, iphone-5

我想知道是否有办法为我的 iPhone 和 iPad 应用程序实现特定算法：

*   用户使用我的应用程序内的相机界面拍摄照片
*   然后将照片与我在应用程序中的一张照片进行比较
*   并显示最相似的照片

你是怎样做的？有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:50:29.970

我还没有实现任何东西，但据我所知，边缘检测在您的解决方案的某些步骤中是必要的。有一个提供边缘检测的[开源库：](http://opencv.willowgarage.com/wiki/)

在没有仔细研究的情况下，我认为这个库对于您所需算法中的其他任务也可能会派上用场。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T11:59:05.690

查看 Apple 库中的 AVFoundation 和 AVCam。AVCam[示例代码](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112-Intro-DontLinkElementID_2)演示了如何使用 AV Foundation 捕获 API 来录制电影和拍摄静止图像。

本教程讲述了如何使用 Open CV 来比较图像，[这](http://computer-vision-talks.com/2011/01/using-opencv-in-objective-c-code/)是您应该开始使用的关键方法

```
- (int)difference((int)topPixel,(int)bottomPixel)
{
    return abs(topPixel-bottomPixel);
} 
```

最后一部分是关于显示结果，我希望它对你来说一定很容易..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:13:52.920

看看这个类似的问题： [查找相似图像的算法](https://stackoverflow.com/questions/75891/algorithm-for-finding-similar-images)

最可靠和通用的方法是使用小波变换（多尺度分析）。

# symfony - Symfony2：动态创建路由（动态）

> ID：12620548
> 
> 赞同：0
> 
> 时间：2012-09-27T11:40:16.880
> 
> 标签：symfony, routing

我有一个 Symfony2 项目，我希望能够即时创建路线。例如，我有一个与项目连接的数据库，对于特定表中的每个元素，我想创建一个类似`main/help/$help_id`.

我找不到有关如何执行此操作的教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:06:04.890

你绝对**不需要**动态路由。

```
my_route:
    pattern: /main/help/{help_id}
    defaults: { _controller: MyBundle:Help:show } 
```

然后，在您的控制器操作中：

```
class HelpController
{
    public function show($help_id)
    {
        // Find your help item in the database.

        if ($help_item) {
            // Display your help item.
        } else {
            throw new NotFoundHttpException('The help item you requested was not found');
        }
    }
} 
```

# wordpress - 如何使用 node-wordpress 的示例

> ID：12620553
> 
> 赞同：4
> 
> 时间：2012-09-27T11:40:24.580
> 
> 标签：wordpress, node.js

我正在尝试使用[node-wordpress](https://github.com/scottgonzalez/node-wordpress)库运行 wordpress RPC 方法，但由于根本没有文档，我不确定运行它的正确方法是什么。

如果你有机会使用它，你能举一些例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T07:33:04.870

我设法通过阅读模块本身来完成它。

首先你启动客户端：

```
var wp = wordpress.createClient({
            "url": 'http://yourwordpressURL', 
            "username": 'user', 
            "password": 'pwd' 
}); 
```

比添加帖子，例如，只需拨打以下电话：

```
wp.newPost({
      title: 'Your title',
      status: 'publish', //'publish, draft...',
      content: '<strong>This is the content</strong>',
      author: 3, // author id
      terms: {'category': [category_id]}
    },
    function() { 
      console.log(arguments);
    }
}); 
```

wordpress 的所有文档都在[http://codex.wordpress.org/XML-RPC_WordPress_API/Posts](http://codex.wordpress.org/XML-RPC_WordPress_API/Posts)

希望有帮助。

# command-line - 需要从批处理脚本执行 FTP 命令

> ID：12620557
> 
> 赞同：2
> 
> 时间：2012-09-27T11:40:27.910
> 
> 标签：command-line, command, batch-file

> 需要编写将文件从 FTP 复制到本地驱动器的批处理脚本

我正在尝试使用`cmd`命令提示符来实现这一点

批处理文件里面

请帮助我或粘贴任何线程。

我找到了答案，非常感谢，但是，

我需要使用 2files`script.txt`和`batch.bat`

其中包含 script.txt 代码：

```
open ftp.server.com
username
password
cd folderpath/newfolder
get file1.xml
close
bye 
```

和 batch.bat 代码

```
ftp -v -i -s:script.txt
echo done! 
```

> 但是我如何只使用`.bat`文件来做到这一点，这样我只需要 1 个文件而不是 2 个文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:06:19.620

作为起点：

> 1.  对 FTP 站点执行 NSLOOKUP，例如 nslookup ftp.microsoft.com 记下 IP 地址
> 2.  编辑 LMHOSTS 文件（在 %systemroot%\system32\drivers\etc 中）
> 3.  添加行 MicrosoftFTP #PRE 例如 207.46.133.140 MicrosoftFTP #PRE
> 4.  保存文件
> 5.  打开 CMD.EXE 会话。输入命令：nbtstat -R 这将清除并重新加载名称表缓存
> 6.  输入命令：net view \MicrosoftFTP 你应该会看到网站上的信息
> 7.  现在映射一个驱动器（共享数据） net use * \MicrosoftFTP\data /user:anonymous
> 8.  全部做完。它将传递连接的驱动器号

下一步是通过编写命令脚本并在必要时使用文件/[字符串操作来更新主机文件，从而使步骤 1-4 自动化。](http://www.dostips.com/DtTipsStringManipulation.php)

使用映射的驱动器，您大概可以从一个驱动器到另一个驱动器进行正常的 Xcopy。

参考： [http ://answers.yahoo.com/question/index?qid=20080612073002AAruBR0](http://answers.yahoo.com/question/index?qid=20080612073002AAruBR0)

***更新*****响应您的编辑：**

在您的主 batch.bat 文件中，动态创建 script.txt，如下所示：

```
@echo off 
@echo open ftp.server.com > script.txt
@echo username >> script.txt
@echo password >> script.txt
@echo cd folderpath/newfolder >> script.txt
@echo get file1.xml >> script.txt
@echo close >> script.txt
@echo bye >> script.txt 
```

然后做

```
ftp -v -i -s:script.txt 
```

最后 - 整理，删除临时 script.txt：

```
del script.txt 
```

# java - jar 库中的 JAXB 混合情节和 xjc:javaType

> ID：12620558
> 
> 赞同：1
> 
> 时间：2012-09-27T11:40:38.950
> 
> 标签：java, maven-2, jaxb, jaxb2, jaxb-episode

如果有其他项目依赖的 Java 库（通过 Maven 依赖 .jar）。在这个库中有一个 XSD 文件，它定义了一些`xs:simpleType`s，这些 s 也用`xjc:javaType`将简单类型映射到该库中已经存在的 java 类和适配器类的元素进行了注释。这一切都很好，但现在我想创建一个`xs:complexType`. 我让`org.jvnet.jaxb2.maven2:maven-jaxb2-plugin`0.8.2 版从复杂类型和附加的 .episode 文件中创建一些 java bean。

在我的第二个项目中，我导入库，将 xsd 文件解压缩到模式目录中，然后让 project2.xsd 导入 library.xsd，因为它使用简单和复杂的类型。为了避免重复生成已经存在的 bean，我将库添加`episodes`为`org.jvnet.jaxb2.maven2:maven-jaxb2-plugin`. 但是现在插件抱怨它无法解析 xsd 文件并在每个类型定义行上抛出异常。

我认为使用剧集（它们不包括 simpleTypes？）和`xjc:javaType`注释存在一些问题？这个问题有什么解决方法吗？我在网上找不到太多关于这个问题的信息。感谢任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:07:23.837

我通过使用 maven-hyperjaxb3-plugin 实现了同样的事情检查如何完成：

```
 <plugin>
                <groupId>org.jvnet.hyperjaxb3</groupId>
                <artifactId>maven-hyperjaxb3-plugin</artifactId>
                <version>0.5.4</version>
                <executions>
                <execution>
                    <id>id1</id>
                    <inherited>false</inherited>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                    <configuration>
                        <args>
                            <param>-npa</param>
                        </args>
                        <generateDirectory>target/generated-sources/xjc2</generateDirectory>
                        <generatePackage>com.target.package</generatePackage>
                        <extension>true</extension>
                        <schemaIncludes>
                            <include>mine.xsd</include>
                        </schemaIncludes>
                        <forceRegenerate>false</forceRegenerate>
                        <removeOldOutput>true</removeOldOutput>
                        <verbose>true</verbose>
                    </configuration>
                </execution>
</executions>
<dependencies>
                    <dependency>
                        <groupId>com.sun.xml.bind</groupId>
                        <artifactId>jaxb-impl</artifactId>
                        <version>2.1.12</version>
                    </dependency>
                </dependencies>
            </plugin> 
```

以下是项目依赖项：

```
<dependencies>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
            <version>2.1.12</version>
        </dependency>

        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.1</version>
        </dependency>

        <dependency>
            <groupId>org.jvnet.hyperjaxb3</groupId>
            <artifactId>hyperjaxb3-ejb-runtime</artifactId>
            <version>0.3</version>
        </dependency>

        <!-- Roundtrip -->
        <dependency>
            <groupId>org.jvnet.hyperjaxb3</groupId>
            <artifactId>hyperjaxb3-ejb-roundtrip
            </artifactId>
            <version>0.3</version>
        </dependency>
    </dependencies> 
```

我定义了任何简单和复杂的类型，它就像一个魅力。希望能帮助到你！

# java - 支持 ETag、If-Modified-Since 的 Android 图像加载器库

> ID：12620561
> 
> 赞同：4
> 
> 时间：2012-09-27T11:40:49.487
> 
> 标签：java, android, caching, if-modified-since, etag

我已经使用了一段时间[**Android Http Image Manager**](http://code.google.com/p/android-http-image-manager/)，最近我切换到了[**Android Universal Image Loader**](https://github.com/nostra13/Android-Universal-Image-Loader)

恐怕他们都不支持验证本地缓存是否是最新的。

我目前正在寻找的是一个具有社区支持和支持通过[**ETag**](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19)和/或[**If-Modified-Since检查远程更改的 Image Loader 库**](http://www.freesoft.org/CIE/RFC/1945/58.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T07:52:30.900

Github AUIL 问题跟踪器回答了问题。[谢谢诺斯特拉](https://stackoverflow.com/users/913762/nostra)_

[https://github.com/nostra13/Android-Universal-Image-Loader/issues/75](https://github.com/nostra13/Android-Universal-Image-Loader/issues/75)

```
public class URLConnectionImageDownloader extends ImageDownloader {
    @Override
    public InputStream getStreamFromNetwork(URI imageUri) throws IOException {
        URLConnection conn = imageUri.toURL().openConnection();
        // check etag/last-modification-date/... params
        // if image was changed then we should delete cached image from memory cache and disc cache

        // Delete image from caches
        String uri = imageUri.toString();
        File imageFile = ImageLoader.getDiscCache().get(uri)
        if (imageFile.exists()) {
            imageFile.delete();
        }
        MemoryCacheAware<String, Bitmap memoryCache = ImageLoader.getMemoryCache();
        for (String cacheKey : memoryCache.keys()) {
            if (cacheKey.contains(uri) {
                memoryCache.remove(cacheKey);
            }
        }

        return new FlushedInputStream(new BufferedInputStream(conn.getInputStream()));
    }
} 
```

# php - 带有 cookie 的单选按钮

> ID：12620564
> 
> 赞同：1
> 
> 时间：2012-09-27T11:41:06.250
> 
> 标签：php, button, cookies, radio

我尝试为 2 个单选按钮设置一个 cookie，但我不知道我做错了什么。即使页面刷新，我也需要在检查按钮时保持选中状态。有人可以给我一个建议吗？谢谢

这是我的 test.php

```
<?php 
    if(isset($_POST['radio1'])) {
      setcookie('radio1', true, 600, '/');
      setcookie('radio2', false, 600, '/');
    } else if(isset($_POST['radio2'])) {
      setcookie('radio2', true, 600, '/');
      setcookie('radio1', false, 600, '/');
    }
    ?>

    <form method="POST" action="test.php">
      <div id="radio">
        <input type="radio" id="radio1" name="radio" checked="checked" />
        <label for="radio1">Choice 1</label>
        <input type="radio" id="radio2" name="radio" />
        <label for="radio2">Choice 2</label>
      </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:45:34.180

我不太遵循您的代码，但以下应该为您检查正确的单选按钮：

```
<?php 
if(isset($_POST['radio']) && $_POST['radio']=='val1') {
  setcookie('radio1', true, 600, '/');
  $radio1=' checked ';
  $radio2='';
  setcookie('radio2', false, 600, '/');
} else if(isset($_POST['radio'])&& $_POST['radio']=='val2') {
  setcookie('radio2', true, 600, '/');
  $radio1='';
  $radio2=' checked ';
  setcookie('radio1', false, 600, '/');
}
?>

<form method="POST" action="test.php">
  <div id="radio">
<input type="radio" id="radio1" name="radio" <?php echo $radio1;?> value="val1" />
<label for="radio1">Choice 1</label>
<input type="radio" id="radio2" name="radio" <?php echo $radio2;?> value="val2" />
<label for="radio2">Choice 2</label>
<input type="submit">
  </div>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:49:29.527

这`checked="checked"`不仅适用于 W3C`checked`

```
<?php 
    if (isset($_POST['radio']) && $_POST['radio'] == "radio1") {
        setcookie('radio1', "true", 600, '/');
        setcookie('radio2', "false", 600, '/');
        $radio1 = ' checked="checked"';
        $radio2 = '';
    } else if(isset($_POST['radio']) && $_POST['radio'] == "radio2") {
        setcookie('radio1', "false", 600, '/');
        setcookie('radio2', "true", 600, '/');
        $radio1 = '';
        $radio2 = ' checked="checked"';
    }

    if (isset($_COOKIE['radio1']) && $_COOKIE['radio1'] == "true") {
        $radio1 = ' checked="checked"';
        $radio2 = '';
    } else if (isset($_COOKIE['radio2']) && $_COOKIE['radio2'] == "true") {
        $radio1 = '';
        $radio2 = ' checked="checked"';
    }
    ?>

    <form method="POST" action="test.php">
        <div id="radio">
            <input type="radio" id="radio1" name="radio" value="radio1" <?= $radio1; ?> />
            <label for="radio1">Choice 1</label>
            <input type="radio" id="radio2" name="radio" value="radio2" <?= $radio2; ?> />
            <label for="radio2">Choice 2</label>
        </div>
    </form> 
```

# python - py.test 和 norecursedirs 粒度

> ID：12620570
> 
> 赞同：2
> 
> 时间：2012-09-27T11:41:28.313
> 
> 标签：python, pytest

我有这些目录：

```
./Tools
./ook/Tools. 
```

我在 py.test 中添加`Tools`了选项。正如预期的那样，当 py.test 收集测试时，不会进行探索。但是，两者都不是，这是一个问题，因为我*想要*这个。`norecursedirs``setup.cfg``./Tools``./ook/Tools`

 *知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:23:17.937

norecursedirs 的值是一个 glob 模式，要使其在完整路径上匹配，您的模式必须包含 / 字符。不幸的是，与之匹配的完整路径是绝对路径，因此如果您只想要基本工具，则必须包含父目录名称：

```
$ find root/
root/
root/Tools
root/Tools/test_foo.py
root/Tools/__init__.py
root/setup.cfg
root/ook
root/ook/Tools
root/ook/Tools/test_foo.py
root/ook/__init__.py
$ cat root/setup.cfg
[pytest]
norecursedirs = root/Tools
$ py.test --collectonly root/
============================= test session starts ==============================
platform linux2 -- Python 2.7.3 -- pytest-2.2.1
collected 1 items 
<Module 'root/ook/Tools/test_foo.py'>
  <Function 'test_foo'>

===============================  in 0.01 seconds =============================== 
```*

# qt - Qt 的命名管道实现中重新连接问题的解决方法？

> ID：12620574
> 
> 赞同：1
> 
> 时间：2012-09-27T11:41:36.193
> 
> 标签：qt, named-pipes

我遇到了此处描述的错误的一些变体（使用错误报告中的示例代码）：

[https://bugreports.qt.io/browse/QTBUG-22145](https://bugreports.qt.io/browse/QTBUG-22145)

它可以像这样重现：

*   启动应用程序两次（现在称为 App1 和 App2）
*   在 App1 中点击“收听”
*   在App2中点击“连接”（会看到两边都建立连接成功）
*   在 App2 中点击“ping”（您将在 App1 中看到“ping”消息，在 App2 中看到“pong”消息）
*   关闭 app1（您将在 App2 中看到断开连接消息）
*   启动另一个实例（现在称为 App3）
*   在 App3 中点击“收听”
*   在App2中点击“连接”（会看到两边都建立连接成功）
*   在 App2 中点击“ping”（此时不会发送 ping 和 pong 消息）

是否有任何已知的解决方法可以在这种情况下获得有效的连接？有什么方法可以检测到连接不起作用？

PS：除了错误报告中的VS-project-file之外，我的Qt-project-file：

> ```
> QT           += network gui
> HEADERS += \
>     mainwidget.h
> SOURCES += \
>     mainwidget.cpp \
>     main.cpp 
> ```

# sql-server-2008 - SQL Server 触发器插入和更新操作不起作用？

> ID：12620576
> 
> 赞同：1
> 
> 时间：2012-09-27T11:41:42.697
> 
> 标签：sql-server-2008, triggers

我正在使用 SQL Server 2008。我的触发器如下所示。我在两个表中插入我没有得到任何更新的值。

```
 CREATE TRIGGER trgAfterInserta ON AMS_33.dbo.access_event_logs
 AFTER INSERT,UPDATE 
 AS           
        declare @idams bigint;  
        declare @id int; 
        declare @uid nvarchar(20);
        declare @tentry datetime;
        declare @tsn nvarchar(20);
        declare @evtid nvarchar(20);
        declare @audit_action nvarchar(300);

select @idams   = i.id from inserted i;
select @id      =  max(Rownumber) + 1   from   TAV3.dbo.access_event_logs ;  
select @uid    =i.USERID from inserted i;   
select @tentry =i.TIMESTAMPS from inserted i;   
select @tsn   =i.TERMINALSN from inserted i;
select @evtid =i.EVENTID from inserted i;
set    @audit_action='Inserted Record -- After Insert.';
set    @tentry = dateadd(hh,3,@tentry); 

insert into TAV3.dbo.access_event_logs 
(Rownumber,Userid, Timeentry, Eventid, Terminalsn, Notes)
 values(@id,@uid, @tentry, @evtid, @tsn, @audit_action);

update AMS_33.dbo.access_event_logs set Calculated=1 where id= @idams; 
```

去

**表 1 AMS_33.dbo.access_event_logs**

```
 id    bigint  Unchecked
  USERID    nvarchar(50)    Unchecked
  DEPARTMENT    nvarchar(50)    Unchecked
  TIMESTAMPS    datetime    Unchecked
  EVENTID   nvarchar(50)    Unchecked
  TERMINALSN    nvarchar(50)    Unchecked
  ACCESSMETHOD  nvarchar(255)   Unchecked
  REMARKS   nvarchar(255)   Unchecked
  TERMINALIP    nvarchar(50)    Unchecked
  PHOTO image   Checked
  PHOTOSIZE int Unchecked
  RECLOGDTM datetime    Unchecked
  RECLOGFROMIP  nvarchar(50)    Unchecked
  LOCALTIMESTAMP    datetime    Unchecked
  PhotoPath nvarchar(50)    Checked
  Calculated    int Checked 
```

**表 2 TAV3.dbo.access_event_logs**

```
Rownumber   int Unchecked
Userid  nvarchar(20)    Unchecked
Timeentry   datetime    Unchecked
Eventid nvarchar(20)    Checked
Terminalsn  nvarchar(20)    Unchecked
Calculated  int Checked
Notes   nvarchar(300)   Checked 
```

这里没有插入或更新正在执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:45:52.997

您假设在 select @idams = i.id from inserted i; 等语句中只插入或更新了一行。

那可能是假的。然后这些语句将永远无法插入

# javascript - Javascript 输入管理

> ID：12620579
> 
> 赞同：0
> 
> 时间：2012-09-27T11:41:58.720
> 
> 标签：javascript, jquery, jquery-selectors

我有一些关于 jQuery 和 Javascript 的问题，需要你的帮助。

我有一个字段和一个“添加”按钮。就像，

```
<input type="text" id="txtQ1_1" />
<input type="button" id="btnQ1_1" value="Add" class="add-button" /> 
```

当我单击“添加”按钮时，此代码有效：

```
contentQ1_1 = '<div class="removable"><input type="text" class="value" value="' + value + '" /> <input type="button" id="remove-button" value="Remove" class="remove-button" /></div>'; 
divQ1_1.append(contentQ1_1); 
```

在这里，我对创建文本输入没有任何问题，但我有一个限制。

例如，如果添加的数据（contentQ1_1 或其他控制器）等于 6，我想禁用“添加”按钮。而当“删除按钮”点击时，如果值不大于或等于6，“添加”按钮必须可见。

我尝试了一些计数器并使用“可移动”类的索引值，但它没有使它工作。

你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:58:43.947

使用 jQuery < 1.6 执行以下操作：

```
$('input[type=button]').attr('disabled','disabled'); 
```

使用 jQuery 1.6+

```
jQuery("input[type='text']").prop("disabled", true); 
```

尝试：

```
if($('div.removable').length>=6)
    $('input:button').prop("disabled", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:48:36.370

用这个

```
if($('div.removable').length>=6)
  $('input[type=button]').attr('disabled','disabled'); 
```

# c - POSIX fopen(NULL,"r")

> ID：12620582
> 
> 赞同：5
> 
> 时间：2012-09-27T11:42:11.543
> 
> 标签：c, io, posix, fopen

我想知道，使用 NULL 文件名调用 fopen 是否合法。如果是，它为我节省了 2 行代码。在我的 GNU/Linux 机器上它可以工作，但它必须是可移植的。我查看了 POSIX [fopen](http://pubs.opengroup.org/onlinepubs/009695399/functions/fopen.html)，但它没有说明这个案例。它是未定义的行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:18:04.740

从 C 标准（从 1999 年开始）：

7.1.4 库函数的使用

第 1 条：

```
Each of the following statements applies unless explicitly stated otherwise
in the detailed descriptions that follow: If an argument to a function has an
invalid value (such as a value outside the domain of the function, or a
pointer outside the address space of the program, or a null pointer, or a
pointer to non-modifiable storage when the corresponding parameter is not
const-qualified) or a type (after promotion) not expected by a function with
variable number of arguments, the behavior is undefined. 
```

同一标准中的描述`fopen()`没有提及`NULL`或根本没有提及`null pointer`。

因此，根据 C 标准，`NULL`作为文件名字符串指针传递给`fopen()`会导致未定义的行为。

但是，POSIX 可能会扩展该行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:55:11.797

POSIX 似乎对这种情况有明确的含义

> [ENOENT]
> 文件名的组成部分未命名现有文件或文件名是空字符串。

因此您可以返回指向（静态）`""`的指针而不是空指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-24T20:10:56.630

正如[Alexey 指出的那样](https://stackoverflow.com/a/12621203/1175714)，当 NULL 参数的行为未指定时，这几乎肯定意味着该行为未定义。但我想补充一点，因为有正当的理由你想干净地把它卷成一个表达式。

你可以写一个函数：

```
FILE *
fopen_safe(char const *fname, char const *mode)
{
    if(fname == NULL)
        return NULL;

    return fopen(fname, mode);
} 
```

或宏，如果您想避免函数调用的开销：

```
#define fopen_safe(fname, mode) \
    ( ((fname) == NULL) ? (NULL) : (fopen((fname), (mode))) ) 
```

# jsf - 可选 Primefaces 数据列表

> ID：12620586
> 
> 赞同：0
> 
> 时间：2012-09-27T11:42:15.317
> 
> 标签：jsf, primefaces

我正在尝试选择 primefaces 数据列表中的一项。我正在关注 primefaces 网站作为教程。[http://www.primefaces.org/showcase/ui/datagrid.jsf](http://www.primefaces.org/showcase/ui/datagrid.jsf)（DataList 与 datagirid 具有相同的行为）

这是我的代码。

我的豆子：

```
@Component
@Scope("session")

public class HomeBean {

    @Value("Aranacak kelime giriniz.")
    private String keyword;
    private List<Customer> customers;
    private Customer selectedCustomer;

//Setter getters
} 
```

我的页面 ：

```
<p:dataList value="#{homeBean.customers}" var="customer"  >
           <f:attribute name="filter" value="true" />                    

                    <p:commandLink>               

                    #{customer.customerName}                     
                    <f:setPropertyActionListener value="#{customer}"  
                            target="#{homeBean.selectedCustomer}" >                   

                            </f:setPropertyActionListener>                                        
                       </p:commandLink>         

                </p:dataList> 
```

该页面显示列表具有的正确值。但是，当我尝试选择一项时。这没用。

知道如何在列表中选择一个项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:49:49.127

你`commandLink`没有任何行为。[您](http://www.primefaces.org/showcase/ui/datagrid.jsf)必须`oncomplete`向`commandLink`. _

编辑：

```
<p:commandButton action="#{yourBean.someAction}" ajax="false"> 
```

以及 bean 中的方法：

```
public String someAction()  {
       ...
   return "outcomeForAnotherPage";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:45:07.723

如果你想制作可选择的数据列表。`<p:column></p:column>`你应该用标签包围项目。

# javascript - 在 ASP.NET 中插入成功/失败时运行 javascript 函数？

> ID：12620587
> 
> 赞同：0
> 
> 时间：2012-09-27T11:42:15.870
> 
> 标签：javascript, asp.net, web, postback

我正在使用 ASP.NET 来实现一个站点，并且在提交表单时需要一些帮助给用户一些反馈。

我使用详细信息视图让用户插入所需的数据，但是当我想在插入成功或失败时给用户一些反馈时。因此，如果插入成功，我想运行 JS 函数以显示成功通知，否则显示错误通知。

我尝试使用

```
OnInserted="areaInsertHandler" 
```

在 SQL 数据源上，然后使用以下命令检查异常：

```
protected void areaInsertHandler(Object sender, SqlDataSourceStatusEventArgs e)
    {
        if (e.Exception != null)
        {
            // There was an error in submitting, show the error notification
            ClientScript.RegisterClientScriptBlock(GetType(), "DialogHandler", "showError();", true);
            e.ExceptionHandled = true;
        }
        else
        {
            // Show success 
            ClientScript.RegisterClientScriptBlock(GetType(), "DialogHandler", "showSuccess();", true);
        }
    } 
```

但是当我提交时，这两个函数似乎都没有触发。使用浏览器调试器甚至没有输入 JS 函数，因此似乎没有调用它们。使用 VS 调试器，我可以看到确实调用了处理程序并执行了 ClientScript 代码。所以我不确定为什么浏览器没有任何反应。

如果有任何区别，详细信息视图位于更新面板内。

任何有关如何解决该问题的反馈或其他建议将不胜感激。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:49:58.720

解决了。把这个答案留在这里，以防其他人遇到类似的麻烦。

问题是我在表单周围使用了更新面板，这意味着它无法将脚本添加到标题中，因为通常意义上的页面没有重新加载。相反，它使用部分回发，仅替换部分正文而不重新加载站点。

解决方案是使用 scriptmanager 而不是 clientscript 注册脚本，如下所示：

```
ScriptManager.RegisterClientScriptBlock(Page, GetType(), "DialogHandler", "showError();", true); 
```

容易=）

# javascript - 根据 CGI HTTP_HOST 确定 CSS 文件中的文件路径

> ID：12620589
> 
> 赞同：0
> 
> 时间：2012-09-27T11:42:25.880
> 
> 标签：javascript, css, cgi, http-host

我在一个小型开发团队工作，我们使用版本控制，但对我们来说真正的错误之一是我们的开发路径与我们的实时 Web 平台路径不同。

因此，当我们在自己的机器上开发项目时，我们必须不断地注释实时/开发路径，尤其是在我们的 CSS 文件中，因为我们的图像文件夹的路径与实时开发不同。

我认为这很简单，可以使用 CGI.HTTP_HOST 变量相应地设置路径，但是因为图像路径是在我们的 CSS 文件中设置的，有没有办法做到这一点？

我不确定是否使用 JavaScript 来确定我们是否在 localhost 机器上，然后设置两个变量；一个用于开发路径，一个用于实时路径是最好的，但是 O 不确定如何在 CSS 样式路径中使用这些变量？

希望这是有道理的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:45:41.820

[您应该使用ant](http://ant.apache.org/)设置构建过程。使用 ant，您可以处理您的文件并定义不同的构建目标，例如本地或生产，并自动替换您的 css 文件中的路径（还有很多）。Ant 文件可以由 Eclipse 执行而无需额外的扩展。不同的路径等在所谓的属性文件中定义。

# c# - 动态修改一个winform标签页

> ID：12620593
> 
> 赞同：0
> 
> 时间：2012-09-27T11:42:55.567
> 
> 标签：c#, winforms, dynamic, tabs

我有一组标签页，我需要在运行时更改它们的内容（控件）。一个页面可能由组合框、文本框和标签组成，我想用一个按钮替换整个选项卡。我读到的是，这样做的方法是删除标签页，而不是遍历页面上的所有控件来设置它们的可见性，这根本不起作用。我有以下代码：

```
foreach (TabPage t in tabControl1.TabPages)
{
    tabControl1.Controls.Remove(t);
}

newPanelButton = new Button();
newPanelButton.Text = "0% Complete";
newPanelButton.Location = new Point(117, 75);
newPanelButton.Height = 80;
newPanelButton.Width = 200;

TabPage tabPage = new TabPage();
tabPage.Controls.Add(newPanelButton);

tabControl1.Controls.Add(tabPage);            

Refresh(); 
```

该代码没有任何影响，就好像它甚至不存在一样。现有的控件和页面根本没有改变。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:24:38.507

您应该使用 TabControl.TabPages 属性从/向您的 tabcontrol 删除/添加页面。

你的代码应该是（我在这里和那里缩短了它）：

```
tabControl1.TabPages.Clear();

var newPanelButton = new Button() {
    Text = "0% Complete",
    Location = new Point(117, 75),
    Height = 80,
    Width = 200
};

var tabPage = new TabPage();
tabPage.Controls.Add(newPanelButton);

tabControl1.TabPages.Add(tabPage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:07:37.207

`tabControl1.Controls.Add(tabPage);`

应该

`tabControl1.TabPages.Add(tabPage);`

# c# - String.replace 删除反斜杠

> ID：12620594
> 
> 赞同：2
> 
> 时间：2012-09-27T11:42:58.200
> 
> 标签：c#, asp.net, replace

我有一个问题，我确信它很简单，但它在我的代码中不起作用。我正在创建一个日志文件，我想将日期连接到文件名，以便他们知道日志的生成时间。我的 string.replace 没有从我已转换为字符串的日期中删除“\”。

请参见下面的代码：

```
 string DateNow = Convert.ToString(System.DateTime.Now);
        DateNow = DateNow.Substring(0, 10);
        DateNow.Replace(@"\\", "-");

        string FileName = "log" + DateNow + ".txt";

        // Write values to textfile and save to Log folder
        using (StreamWriter sw = new StreamWriter(HttpContext.Current.Server.MapPath("~/Log" + FileName))) 
        {
            sw.WriteLine(System.DateTime.Now);
            sw.WriteLine("New user created");
            sw.WriteLine("Username is: " + username);
            sw.WriteLine("Password is: " + password);
            sw.WriteLine("Company is: " + company);
            sw.WriteLine("Email is: " + email);
            sw.Dispose();
            sw.Close(); 
        } 
```

这将引发异常，因为 Windows 中的文件名不能包含 \ 字符。任何想法为什么替换方法不起作用？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T11:44:33.713

它正在工作，但您没有存储结果。它需要阅读

```
DateNow = DateNow.Replace(@"\", "-"); 
```

但这只是一个糟糕解决方案的补丁。为什么不首先以正确的方式做呢？请改用`DateTime.ToString`自[定义格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。例如：

```
string DateNow = System.DateTime.Now.ToString("yyyy-MM-dd"); // or any other format 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:46:14.777

您已经使用 @ 符号转义了反斜杠，因此替换函数正在寻找“\\”，而不是“\”。要使您的代码正常工作，请将其更改为：

```
DateNow = DateNow.Replace(@"\", "-"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:51:30.143

直接的`System.DateTime.Now.Date.ToString('MM-dd-yyyy');`

**或** `DateTime`日期与时间

```
string newDate = DateTime.Now.ToString().Replace('/','-'); 
```

**或** `Date`仅

```
string newDate = DateTime.Now.Date.ToString().Replace('/','-'); 
```

**输出**

2012 年 9 月 27 日下午 5:20:12

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:53:04.573

无事可做`split`或`convert ToString()`

```
string DateNow = System.DateTime.Now.ToString("yyyy-MM-dd"); 
```

说明`yyyy-MM-dd`你也写`yyyy/MM/dd`

检查此链接以获取更多日期[格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# java - Spring - 使用了不正确的构造函数

> ID：12620595
> 
> 赞同：0
> 
> 时间：2012-09-27T11:42:59.173
> 
> 标签：java, spring

我有两个构造函数：

```
ctor(String a, String b, char[] c)

ctor(String a, String b, File c) 
```

现在，她我喜欢

```
<bean id="myBean"  class="myClass">
    <constructor-arg value="string1" />
    <constructor-arg value="string2" />
    <constructor-arg value="toCharArray" /> 
```

这是`File`由spring使用构造函数解决的......有什么想法可以阻止这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:59:16.597

您可以通过使用属性将类型信息添加到`constructor-arg`元素来解决此问题。`type`有关详细信息，请参阅 Spring 文档中的第[4.4.1.1 章基于构造函数的依赖注入](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-constructor-injection)。

```
<bean id="myBean" class="myClass">
  <constructor-arg type="java.lang.String" value="string1" />
  <constructor-arg type="java.lang.String" value="string2" />
  <constructor-arg type="char[]" value="toCharArray" />
</bean> 
```

# android - Facebook SSO 无法在 Android 设备上运行

> ID：12620601
> 
> 赞同：0
> 
> 时间：2012-09-27T11:43:11.810
> 
> 标签：android, facebook, single-sign-on

我想使用单点登录功能将 Facebook 集成到我的应用程序中。它适用于模拟器（显示用户授权对话框），但不适用于带有日志消息“无法找到 com.facebook.katana.provider.AttributionIdProvider 的提供者信息”的设备。

密钥哈希可能是正确的，因为我没有收到这样的无效密钥错误[，](https://stackoverflow.com/questions/4521013/how-to-disable-facebook-single-sign-on-for-android-facebook-android-sdk)而且当我不使用 SSO，但强制使用传统方式时，它工作正常。

也不是[这个](https://stackoverflow.com/questions/8661689/single-sign-on-works-on-emulator-but-not-on-device)问题，因为我已经包含了所需的代码。

我读过[这个](http://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/)，但也没有帮助。

我的代码如下所示：

```
public class LoginActivity extends Activity {

Facebook facebook = new Facebook("123425315215"); // my actual code is not that

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    facebook.authorize(this, new DialogListener() {
        public void onComplete(Bundle values) {Log.d("TAG","SUCCESS");}

        public void onFacebookError(FacebookError error) {Log.d("TAG","onFacebookError "+error.getMessage());}

        public void onError(DialogError e) {Log.d("TAG","onError "+e.getMessage());}

        public void onCancel() {Log.d("TAG","onCancel ");}
    });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
}
} 
```

# python - Creating a class with all the elements specified in a file using ConfigParser

> ID：12620602
> 
> 赞同：1
> 
> 时间：2012-09-27T11:43:13.297
> 
> 标签：python, python-2.7, configparser

I have created a .ini-like file with all the values which I need later in my program, see below:

```
[debugging]
checkForAbort = 10
...

[official]
checkForAbort = 30
... 
```

I would like to read all these items into a single class and make it accessible from other parts of my python project. What I have so far is the code below:

```
from ConfigParser import SafeConfigParser
import glob

class ConfigurationParameters
    def __init__(self):
        self.checkForAbortDuringIdleTime = None     

    parser = SafeConfigParser()

    # making a list here in case we have multiple files in the future!
    candidatesConfiguration = ['my.cfg']
    foundCandidates = parser.read(candidatesConfiguration)
    missingCandidates = set(candidatesConfiguration) - set(found)
    if foundCandidates:
        print 'Found config files:', sorted(found)
    else
        print 'Missing files     :', sorted(missing)
        print "aborting..."

    # check for mandatory sections below
    for candidateSections in ['official', 'debugging']:
        if not parser.has_section(candidateSections)
            print "the mandatory section", candidateSections " is missing"
            print "aborting..."

    for sectionName in ['official', 'debugging']:
        for name, value in parser.items(section_name):
            self.name = value 
```

I am new to python but I can still see lots of problem with my code:

*   I am forced to add a attribute for each item in my class file. and keep the configuration file and my class in sync all the time.
*   This class is not a singleton, therefore the reading/parsing will be done from wherever it is imported!
*   If a value is added to the config-file with is not defined in my class, it will probably crash!

How should I solve this problem instead? Can class attributes be created dynamically?

My class only need to read from the values, so no writing to the configuration file is needed!

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T13:02:23.237

[What J.F. Sebastian said.](https://stackoverflow.com/a/12620919/395321)

Also, you could do it [like Alex Martelli does in his Bunch class](http://code.activestate.com/recipes/52308-the-simple-but-handy-collector-of-a-bunch-of-named/):

file `MyConfig.py`:

```
from ConfigParser import SafeConfigParser

section_names = 'official', 'debugging'

class MyConfiguration(object):

    def __init__(self, *file_names):
        parser = SafeConfigParser()
        parser.optionxform = str  # make option names case sensitive
        found = parser.read(file_names)
        if not found:
            raise ValueError('No config file found!')
        for name in section_names:
            self.__dict__.update(parser.items(name))  # <-- here the magic happens

config = MyConfiguration('my.cfg', 'other.cfg') 
```

file `foo.py`:

```
from MyConfig import config
# ... 
```

file `MyProgram.py`:

```
from MyConfig import config

print config.checkForAbort

import foo

assert config is foo.config 
```

The [Python Language Reference](http://docs.python.org/reference/simple_stmts.html#the-import-statement) states that *"Import statements are executed in two steps: (1) find a module, and initialize it if necessary; (2) define a name or names in the local namespace (of the scope where the import statement occurs)."*

What that means is that, when a module gets imported, one or more local names are bound to a module object, and only the first time it is imported during the runtime of a Python program it gets initialized (i.e. read from file and run).

In the code above the name `config` is just a local name that refers to an attribute of a module object. The module object has been initialized by the Python interpreter when it was referenced (via `from MyConfig import config`) in `MyProgram`. When `MyProgram` imports `foo` it is already initialized and gets bound to a local name in module `foo` and in `MyProgram` we can refer to it as `foo.config`. But both names refer to the very *same* object.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T12:02:06.380

`self.name = value` doesn't work as you expect. You might mean `setattr(self, name, value)` It creates instance attributes dynamicallly.

To make it a singleton you could make the instance to be a global variable in `config`/`settings` module. Initialize it once on a program startup e.g., like the `logging` module does it for the root logger: `logging.config.fileConfig('logging.conf')`.

It is a common desire to use an attribute access for what is essentially a dict e.g., `argparse.Namespace` that carries command-line options.

You could access the config later by importing it: `from mypackage.config import config`, e.g., `mypackage/config.py`:

```
class Config(object):
    ...

config = Config() # empty or default config without any configuration 
```

In `mypackage/__main__.py`:

```
from .config import config
...
# initialization code
config.update_from_file('mypackage.conf') # it might call `setattr()` inside 
```

Note: `setattr()` works correctly even you set properties. `__dict__.update()` breaks in this case:

```
class XValidatorMixin(object):
    @property
    def x(self):
        return self._x

    @x.setter
    def x(self, value):
        if value < 0:
            raise ValueError
        self._x = value

class CUpdate(XValidatorMixin):
    def __init__(self, **options):
        self.__dict__.update(options)

class CSetAttr(XValidatorMixin):
    def __init__(self, **options):
        for name, value in options.items():
            setattr(self, name, value)

for C in [CUpdate, CSetAttr]:
    o = C(a=1, b=2) # non-property attributes work as expected
    assert o.a == 1 and o.b == 2

o = CSetAttr(x=1)
assert o.x == 1 # setattr also sets property

o = CUpdate(x=1)
try:
    o.x # .update() doesn't set property
except AttributeError:
    pass
else:
    assert 0

try:
    o = CSetAttr(x=-1)  # invokes property setter
except ValueError: # that correctly reject negative values
    pass
else:
    assert 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-13T12:26:26.003

The Answer by [pillmuncher](https://stackoverflow.com/a/12622040/1913199) is very helpful and can be easily adapted to use within an existing class. Furthermore, it is also possible to automatically convert the data types using the localconfig module ([link](https://pypi.python.org/pypi/localconfig)). To get these additional functionalities you can use something like:

```
from localconfig import LocalConfig

configfile = 'config.ini'
config = LocalConfig(configfile)
sections = list(config)

for section in sections:
    items = list(config.items(section))
    CLASS.__dict__.update(items) 
```

# vim - 如何使用列表的内容搜索字典

> ID：12620603
> 
> 赞同：1
> 
> 时间：2012-09-27T11:43:15.103
> 
> 标签：vim

假设我有一个看起来像这样的 todo 文件 (todo.txt)：

*   就 Foo 项目给 Tom 打电话
*   完成 Bar 项目的总结并发送给 Thomas
*   让 Susan 把她对 Foo 项目的预测发给我和 Tom

我希望能够编写这些任务并让 Vim 将相应的类别附加到每一行（@ 用于人员，& 用于项目）：

Tom（或 Thomas）应该生成 @Tom，Susan 应该生成 @Susan，Foo 应该生成 &Foo 和 Bar &Bar

因此结果应该是：

*   就 Foo 项目给 Tom 打电话@Tom &Foo
*   完成 Bar 项目的总结并发送给 Thomas @Tom &Bar
*   让 Susan 把她对 Foo 项目的预测发送给我和 Tom @Susan @Tom & Foo

我创建了一个字典：

```
let dictodo = {'Tom': "@Tom", 'Thomas': "@Tom", 'Susan': "@Susan", 'Foo': "&Foo", 'Bar': "&Bar",} 
```

每次我创建一个新任务并在这个特定文件中离开插入模式时，我怎样才能有一个自动命令启动一个函数（：autocmd InsertLeave todo.txt :call Filltodo() ？）

1）这将创建一个包含该行不同单词的列表：我想

```
let words = split(getline('.'), '\W\+') 
```

2) 使用此列表浏览 dictodo Dictionary

3）并将字典中对应的单词（2的**结果**）附加到行尾？我想

```
call setline(line('.'), getline('.') . ' ' . result) 
```

如果我对 1) 和 3) 的解决方案没有弄错，那么 2) 是缺少的部分（我尝试了 keyvar 但失败了）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:31:36.877

像这样的功能：

```
function! AddCat(pairs)
  let lines = []
  for line in getline(1,'$')
    let pairs = copy(a:pairs)
    let words = split(line, '\W\+')
    let cats = []
    " Looks for a category for every word and add it only once.
    call map(words,
          \'has_key(pairs, v:val) && index(cats, pairs[v:val]) == -1'
          \ . '? add(cats, pairs[v:val])'
          \ . ': ""')
    " Add the categories if non-empty.
    call add(lines, join([line]+cats))
  endfor
  call setline(1, lines)
endfunction

Define your pairs:

let dictodo = {'Tom': "@Tom", 'Thomas': "@Tom", 'Susan': "@Susan", 'Foo': "&Foo", 'Bar': "&Bar",} 
```

并这样称呼它：

```
:call AddCat(dictodo) 
```

**注意：** @ZyX 的答案比我的更容易理解，我什至使用了他的建议。自己去看看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T14:49:18.230

```
function! s:AppLine(pairs, line)
    let pairs=copy(a:pairs)
    let r=a:line
    for word in split(a:line, '\W\+')
        if has_key(pairs, word)
            let tag=remove(pairs, word)
            call filter(pairs, 'v:val isnot# tag')
            let r.=' '.tag
        endif
    endfor
    return r
endfunction
function! AddCat(pairs)
    return setline('.', s:AppLine(a:pairs, getline('.')))
endfunction 
```

用法：

```
%call AddCat(dictodo) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T12:35:14.663

我认为您应该使用列表而不是字典。

根据您在问题中提供的构建块，这个快速而幼稚的功能似乎可以满足您的需求。但是要小心：变量的范围不正确，它不会检查是否已经有一些标签。

```
function! TidyTodo()
  let listodo = [['Tom','@Tom'],['Thomas','@Tom'],['Susan','@Susan'],['Foo','&Foo'],['Bar','&Bar']]
  let words = split(getline('.'), '\W\+')
  let appendix = ''
  for word in words
    for item in listodo
      if word == item[0]
        let appendix = appendix . ' ' . item[1]
      endif
    endfor
  endfor
  call setline(line('.'), getline('.') . appendix)
endfunction 
```

# database - Oracle WHERE 子句性能

> ID：12620605
> 
> 赞同：0
> 
> 时间：2012-09-27T11:43:20.727
> 
> 标签：database, oracle

我有一个类似的声明；

```
SELECT tableA A, tableB B, tableC C
WHERE a.ID = b.ID and 
C.level = '2' 
```

如果我执行

```
SELECT tableA A, tableB B, tableC C
WHERE a.ID = b.ID and 
```

我的结果在 33 秒内返回。如果我执行原始查询，结果将在 150 秒内返回。为什么`C.level = '2'`让它变慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:00:40.457

如果您查看 Oracle 的执行计划，您将了解它在幕后所做的事情。但是，总而言之，我的猜测是您的逻辑是：

> 通过添加`C.level = '2'`，我们应该得到一个更小的数据集，因此应该更快地返回

但是，对于数据库引擎，它现在必须遍历数据并检查每条记录，看它是否符合您更复杂的条件。它如何做到这一点取决于您的架构。例如，如果您有一个索引 on `c.level`，这可能会使性能差异可以忽略不计。

# objective-c - Objective C 块通过传入指针的指针来工作？

> ID：12620610
> 
> 赞同：-1
> 
> 时间：2012-09-27T11:43:29.630
> 
> 标签：objective-c, pointers, pass-by-reference

运行此代码并进入`x is 11`控制台。更改方法范围之外的变量状态对我来说就像是块行为。块是这样工作的吗？

```
- (void)viewDidLoad
{
    NSNumber *x = [NSNumber numberWithInt:5];
    [self doSomethingWithNumber:&x];
    NSLog(@"x is %@ \n",x);

}

- (BOOL)doSomethingWithNumber:(NSNumber**)aNumber
{
    *aNumber = [NSNumber numberWithInt:11];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:19:05.987

尽管您的示例的非正统语法 - 我认为这只是为了说明一点 - 块从定义它们的词法范围捕获状态是正确的。有关内部结构的更多信息，请查看 Mark Dalrymple 关于块内部结构的[这篇文章](http://www.informit.com/articles/article.aspx?p=1749597&seqNum=12)。

通常，来自周围范围的变量在块内具有按值传递的语义，而在`__block`修饰符下具有按引用传递的语义。因此，这将~~抛出异常~~不编译*（编辑 2012-09-27 20-52-51）*：

```
#import <Foundation/Foundation.h>

typedef int (^IntBlock)();

    int main(int argc, char *argv[]) {
        NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

        int n = 5;
        IntBlock alwaysEleven = ^{ 
            n++; 
            printf("n inside the block: %d\n",n);
            return 11;
        };
        int d = alwaysEleven(n);
        printf("result = %d, n = %d", d,n);

        [p release];
    } 
```

但如果我们声明`__block int n = 5;`它不会。

@leo 建议使用 Blocks 入门。如果您对块如何捕获状态以及捕获的状态的位置（在堆栈上直到`Block_copy()`）感兴趣，那么文档中的块编程主题是值得一读的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:57:26.987

不，这就是指针的工作原理。如果你想用积木做一些事情，那么请遵循 Apple 的[积木入门或](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html)[网络上](http://ios-blog.co.uk/tutorials/programming-with-blocks-an-overview/)的众多优秀教程之一。

# wix - WiX 自定义操作未设置 ACL

> ID：12620614
> 
> 赞同：0
> 
> 时间：2012-09-27T11:43:39.570
> 
> 标签：wix, acl, custom-action

我有一个在 WiX 中运行的 C# 自定义操作：

```
 [CustomAction]
    public static ActionResult SetAppDataSecurity(Session session)
    {
        session.Log("Running security...");
        session.Log("Creating dInfo...");
        // Create a new DirectoryInfo object.
        DirectoryInfo dInfo = new DirectoryInfo(Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData) + Path.DirectorySeparatorChar + "MyApp");

        session.Log("dInfo.FullName is " + dInfo.FullName);
        session.Log("dInfo.Exists is " + dInfo.Exists);

        session.Log("Creating dSecurity...");
        // Get a DirectorySecurity object that represents the current security settings.
        DirectorySecurity dSecurity = dInfo.GetAccessControl();
        session.Log("dSecurity ACL count is " + dSecurity.GetAccessRules(true, true, Type.GetType("System.Security.Principal.SecurityIdentifier")).Count);

        session.Log("dSecurity.AddAccessRule...");
        // Add the FileSystemAccessRule to the security settings. 
        dSecurity.AddAccessRule(new FileSystemAccessRule("Authenticated Users", FileSystemRights.Write, InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit, PropagationFlags.InheritOnly, AccessControlType.Allow));

        session.Log("dInfo.SetAccessControl...");
        // Set the new access settings.
        dInfo.SetAccessControl(dSecurity);
        session.Log("dSecurity ACL count is " + dSecurity.GetAccessRules(true, true, Type.GetType("System.Security.Principal.SecurityIdentifier")).Count);
        session.Log("SetAppDataSecurity done.");
        return ActionResult.Success;
    } 
```

我的安装程序正在另一台机器上调用它 - 这是 msiexec 日志：

```
Action ended 23:24:56: InstallFinalize. Return value 1.
MSI (s) (78:F0) [23:24:56:518]: Doing action: SetAppDataSecurity
MSI (s) (78:F0) [23:24:56:518]: Note: 1: 2205 2:  3: ActionText 
Action 23:24:56: SetAppDataSecurity. 
Action start 23:24:56: SetAppDataSecurity.
MSI (s) (78:70) [23:24:56:612]: Invoking remote custom action. DLL: C:\Windows\Installer\MSICC37.tmp, Entrypoint: SetAppDataSecurity
SFXCA: Extracting custom action to temporary directory: C:\Users\EDIT~1\AppData\Local\Temp\abcdef.tmp-\ //edited
SFXCA: Binding to CLR version v4.0.30319
Calling custom action WiXCustomActions!WiXCustomActions.CustomActions.SetAppDataSecurity
Running security...
Creating dInfo...
dInfo.FullName is C:\ProgramData\MyApp
dInfo.Exists is True
Creating dSecurity...
dSecurity ACL count is 6
dSecurity.AddAccessRule...
dInfo.SetAccessControl...
dSecurity ACL count is 7
SetAppDataSecurity done.
Action ended 23:24:57: SetAppDataSecurity. Return value 1.
Action ended 23:24:57: INSTALL. Return value 1. 
```

当我查看该文件夹时，它的安全性尚未设置为“经过身份验证的用户”。

在以前的安装和部署项目中使用了相同的代码，并且工作正常，并添加了具有写入权限的 Authenticated Users 组。

# .net - 从 oracle 发送短信

> ID：12620617
> 
> 赞同：1
> 
> 时间：2012-09-27T11:43:55.067
> 
> 标签：.net, vb.net, oracle, sms, sms-gateway

我有一个 GSM 调制解调器，我想将它与 pc 连接，并希望从 oracle 数据库向用户手机发送文本消息。请任何人告诉我是否有任何正宗的方式可以从 oracle db 向用户手机发送短信。我想做我自己的网关方式使用 .net 平台（如 vb.net 或 c#）请任何人告诉我如何通过使用 vb.net 作为前端 developermetn 和 oracle db 作为后端从 oracle 发送短信

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:46:09.893

很耐人寻味。没有本地方法可以做到这一点，您将不得不使用一些外部工具来实现这一点。

按照[这个](https://forums.oracle.com/forums/thread.jspa?threadID=378726)

引用-

> **使用 GSM 调制解调器/手机及其支持软件/实用程序发送短信。**
> 
> 有很多软件/实用程序/工具可以做到这一点，但这里我使用的是一个免费项目。这样，安装/配置： * Red Hat Linux 操作系统 * Oracle Database 8i/9.x/10.x * Gnokii - 适用于诺基亚手机
> 
> ```
>  Download    : http://gnokii.org/download/gnokii/0.6.x/gnokii-0.6.2.tar.gz
>     Install     : http://urtica.linuxnews.pl/~pkot/gnokii/gnokii.html#ch1 
>     Sample File : http://cvs.savannah.nongnu.org/viewcvs/gnokii/gnokii/Docs/sample/gnokiirc?rev=1.22
>     User Guide  : http://wiki.gnokii.org/index.php/User%27s_Guide
> 
>     * Nokia Mobile Phone With Data Cable - [http://www.gnokii.org/cables.shtml] 
> ```
> 
> 尝试使用命令发送 SMS。
> 
> `$ echo "This is a test SMS using Gnokii-Linux..." | gnokii --sendsms +12052059201`
> 
> 注意：消息长度 = 160 个字符。它将需要 30 - 40 秒，并将 SMS 发送到所需的号码。
> 
> 要在 Oracle 数据库中测试和配置它，您必须创建一个 Java 类。
> 
> [http://www.oracle-base.com/articles/8i/ShellCommandsFromPLSQL.php](http://www.oracle-base.com/articles/8i/ShellCommandsFromPLSQL.php)
> 
> ```
> SET SERVEROUTPUT ON SIZE 1000000  
> CALL DBMS_JAVA.SET_OUTPUT(1000000);
> 
> BEGIN
>   Host_Command (p_command => 'echo "This is a test SMS from Oracle Database." | gnokii --sendsms +12052059201');    
> END;    
> / 
> ```

# css - 浮动元素上方的文本浮动换行

> ID：12620620
> 
> 赞同：2
> 
> 时间：2012-09-27T11:44:14.780
> 
> 标签：css

请看这个[jsFiddle](http://jsfiddle.net/Dqr8h/)。

我希望`h4`元素环绕浮动元素，**而不更改文档流**并且**不给`h4`定宽度**。

您会注意到，如果您将浮动元素移动到 上方`h4`，它的行为方式将符合我的要求。

我需要这样做的原因是该网站是响应式的，所以我不能依赖于的宽度`h4`和浮动元素需要是一个精确的宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:46:36.533

制作文本`clear:none;`并将其移动`.floated-element`到`h4`.

CSS

```
.text {
    clear: none;
    display: block;                   
} 
```

HTML

```
<div class="floated-element"></div>
<h4>This is a long title that needs to wrap around the floated element</h4> 
```

[http://jsfiddle.net/Dqr8h/6/](http://jsfiddle.net/Dqr8h/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:40:08.133

`.floated-element`在检查了其他答案和评论之后，如果不移动上面`h4`的内容或给出`h4`宽度，确实不可能做到这一点。

# c# - Sharepoint 将字段添加到网站集中的所有列表/文档库

> ID：12620624
> 
> 赞同：0
> 
> 时间：2012-09-27T11:44:30.107
> 
> 标签：c#, sharepoint

我可以将其添加到指定列表中，但我想浏览网站集中的所有列表。我只是不知道是什么让这不起作用。

适用于一个列表的代码：

```
 void btnAdd_Click(object sender, EventArgs e)
    {
        try
        {
            using (SPSite site = new SPSite("http://asdf:150/sites/test"))
            {
                using (SPWeb web = site.OpenWeb())
                {
                    SPList list = web.Lists["test8"];

                    //Needed?
                    site.AllowUnsafeUpdates = true;
                    web.AllowUnsafeUpdates = true;

                    string mainLocation = list.Fields.Add("New Field", SPFieldType.Text, false, false, null);
                    readOnly(list, mainLocation);

                    //Add to default view (will be removed after testing)
                    SPView view = list.DefaultView;
                    defaultView(view, "New Field");
                }
            } 
        }
        catch (Exception ex)
        {
        }
    } 
```

我想将该字段添加到网站集中的所有列表中，但我不知道我可能做错了什么，这就是我到目前为止所拥有的。

```
void btnAdd_Click(object sender, EventArgs e)
        {
            using (SPSite site = new SPSite("http://asdf:150/sites/test"))
            {
                using (SPWeb web = site.OpenWeb())
                {
                    //Needed?
                    site.AllowUnsafeUpdates = true;
                    web.AllowUnsafeUpdates = true;
                    try
                    {
                        SPListCollection lists = web.Lists; // ??
                        foreach (SPList list in lists)
                        {
                            string mainLocation = list.Fields.Add("New Field", SPFieldType.Text, false, false, null);
                            readOnly(list, mainLocation);

                            //Add to default view (will be removed after testing)
                            SPView view = list.DefaultView;
                            defaultView(view, "New Field");
                        }
                    }
                    catch (Exception)
                    {
                        // some exception handling
                    }
                    finally
                    {
                        //web.Dispose();
                    }
                }
            }
        } 
```

辅助方法

```
void readOnly(SPList list, string name)
{
    SPField listField = list.Fields.GetFieldByInternalName(name);
    listField.ReadOnlyField = true;
    listField.Update();
}

void defaultView(SPView view, string field)
{
    view.ViewFields.Add(field);
    view.Update();
} 
```

希望你们中的任何一个人都比我聪明:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:14:07.423

我运行你的代码，你有两个主要问题。1\. 默认视图在某些列表中可以为空。所以你应该检查一下。

```
SPView view = list.DefaultView;
if(view != null)
{
    defaultView(view, "New Field");
} 
```

2\. SPListCollection 被修改，当您对列表进行更改时。您应该有临时的 IEnumerable 用于遍历列表。

```
using System.Linq;

SPListCollection listCollection = web.Lists;
IEnumerable<SPList> lists = listCollection.Cast<SPList>();
foreach (SPList list in lists)
{ 
```

3.不要忽略Excaptions。添加一些代码来捕获块，这可以帮助你。

```
catch (Exception ex)
{
    Console.WriteLine(ex.ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:05:19.507

我发现的第一件事是您只检查网站集根 SPWeb 中的所有列表。

根 SPWeb 还可以有您需要遍历的子 SPWeb。

除此之外，如果您指定究竟是什么不工作或“错误”会有所帮助？

# android - NDK: libc.so for x86 - clone() 函数的实现

> ID：12620626
> 
> 赞同：2
> 
> 时间：2012-09-27T11:44:32.183
> 
> 标签：android, android-ndk

我发现 android ndk libc.so 对于 x86 架构存在问题。我找不到 clone() 函数的实现。它存在于 ARM 和 MIPS 架构中。我还发现了这个注释：

```
Differences between Android 2.2\. and Android 2.1:
...
- add clone() implementation for ARM (x86 and SH-4 not working yet).
... 
```

在 ndk_path/docs/system/libc/CHANGES.html

你知道我在哪里可以找到 x86 架构的“clone()”实现吗？

# php - FFmpegPHP 从外部 URL 获取缩略图

> ID：12620631
> 
> 赞同：6
> 
> 时间：2012-09-27T11:45:07.243
> 
> 标签：php, http, ffmpeg, video-thumbnails

我正在尝试从外部视频创建缩略图，主要是 MP4 和 FLV。我正在使用[FFmpegPHP](https://github.com/char0n/ffmpeg-php)。我已经使缩略图生成工作正常，但是，我需要先将视频完全加载到我的服务器上。是否可以只流式传输视频的一小部分然后从中提取缩略图？

这是我到目前为止的代码：

```
require_once PRIV . 'Vendor/FFmpegPHP/FFmpegAutoloader.php';

// Download the whole video.
$video = file_get_contents($_PUT['video']);
$file = 'path_to_cache';
file_put_contents($file, $video);

$movie = new FFmpegMovie($file);

// Generate the thumbnail.
$thumb = $movie->getFrame($movie->getFrameCount() / 2);
$thumb->resize(320, 240);
imagejpeg($thumb->toGDImage(), 'path_to_thumb'); 
```

有人有建议吗？

**编辑**

正如布拉德建议的那样，这是更新的代码：

```
$file = CACHE . 'moodboard_video_' . rand();
$fh = fopen($file, 'w');
$size = 0;

curl_setopt($ch, CURLOPT_URL, $_PUT['video']);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_WRITEFUNCTION, function($ch, $data) use($fh, &$size){
    $length = fwrite($fh, $data);

    if($length === FALSE) {
        return 0;
    } else {
        $size += $length;
    }

    // Downloads 1MB.
    return $size < 1024 * 1024 * XXXXXX ? $length : 0;
});

curl_exec($ch);

fclose($fh);
curl_close($ch);

// Create the thumbnail.
$thumb = $movie->getFrame(XXXXXX);
$thumb->resize(static::DEFAULT_THUMBNAIL_WIDTH, $thumb->getHeight() / $thumb->getWidth() * static::DEFAULT_THUMBNAIL_WIDTH);
$image = $thumb->toGDImage();
imagejpeg($image, PRIV . static::THUMBNAILS_PATH . $item->getLastInsertIdentifier() . '_' . static::DEFAULT_THUMBNAIL_WIDTH); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:45:51.933

FFMPEG 非常适合处理损坏的流。因此，我认为您应该尝试下载该远程媒体的前几兆，并尝试从不完整的文件中获取缩略图。

首先，删除`file_get_contents()`并使用 cURL。您可以将`CURLOPT_WRITEFUNCTION`选项设置为您的自定义函数，该函数逐块写入磁盘上的临时文件。当您收到足够的数据时，`0`从您的函数返回，cURL 将停止下载。您将不得不进行试验以查看最佳尺寸。如果您获得的数据太少，您将只能使用最早的帧，或者根本没有帧。太晚了，你在浪费带宽。

对于某些容器类型，文件信息位于文件末尾。对于那些，我没有给你的建议。缺少编写自己的解码器并从头开始拼接信息，我不知道在不下载整个文件的情况下如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:14:43.733

使用基于类的结构的 PHP 5、ffmpeg 和 CURL 运行代码如下：

```
require_once  'PHP_CURFN/ffmpeg-php-master/FFmpegFrame.php';
  require_once  'PHP_CURFN/ffmpeg-php-master/FFmpegAutoloader.php';

class MyVideoTest{

private $fh="";
private $size=0;
private $ch="";

public function __construct(){

                $video = 'http://[hosturl]/video/41a669911fd635167475d7530bffcc9f.mp4';
                $file = 'PHP_CURFN/cache/tmp_video_' . rand();

                $this->ch = curl_init();
                $this->fh = fopen ($file, 'w+');
                $this->ch = curl_init($video);

                $this->size = 0;
                curl_setopt($this->ch, CURLOPT_URL, $video);
                curl_setopt($this->ch, CURLOPT_HEADER, 0);

                curl_setopt($this->ch, CURLOPT_WRITEFUNCTION, array($this, "myfunction"));

                curl_exec($this->ch);

                fclose($this->fh);
                curl_close($this->ch);
                $movie = new FFmpegMovie($file);
                // Create the thumbnail.

                $thumb = $movie->getFrame(2);
                $thumb->resize(320, 240);
                $image = $thumb->toGDImage();
                imagejpeg($image, 'PHP_CURFN/cache' . $item->getLastInsertIdentifier() . '_' . 320);

}
function myfunction($ch, $data)     {
        $length = fwrite($this->fh, $data);
        $size=&$this->size;

        if($length === FALSE) {
            return 0;
        } else {
            $size += $length;
        }

        // Downloads 1MB.

        return $size < 1024 * 1024 *1 ? $length : 0;
} }

$MyVideoTest= new MyVideoTest();
pr($MyVideoTest);
exit; 
```

# java - 关于 64 位和 32 位 JVM

> ID：12620642
> 
> 赞同：0
> 
> 时间：2012-09-27T11:45:49.043
> 
> 标签：java, java-native-interface

我正在编写一个使用 JNI 调用 dll 函数的 JAVA 程序。为了加载库，我可能需要在我的 64 位机器上安装 32 位 JVM。但是，无论我安装了什么（即使是那些应该安装在 32 位系统上的），eclipse 总是指示它是 64 位的。

你们知道如何解决吗？

万分感谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:55:20.280

要手动配置 JVM，您需要编辑 eclipse.ini 文件。

看看这里

[http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F)

这个对我有用。

但是当您使用 JNI 时。32 位和 64 位 dll 可能存在一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:45:46.113

.dll 应该有一些本机代码。IA-32 位表示 Intel 架构。所以它不应该加载到 AMD 64 位平台上。您应该尝试使 .dll 与 AMD -64 位平台兼容。尝试一些交叉编译器。

# php - 更改用户电子邮件的算法

> ID：12620646
> 
> 赞同：0
> 
> 时间：2012-09-27T11:45:59.953
> 
> 标签：php, database, login, content-management-system, email

我有网络应用程序，并且在我的网络应用程序中可以更改电子邮件，如果用户更改他们的电子邮件，这就是效果

1.  更改电子邮件后将自动注销，我将激活码发送到新电子邮件。
2.  如果用户尝试在未激活的情况下使用新电子邮件登录，则会显示错误，因为电子邮件未激活。
3.  当用户更改他们的电子邮件时，在我的数据库中，电子邮件被他们的新电子邮件更改，并且我将用户的状态从 1 更改为 0，1 是活动用户 0 正在等待激活。如果状态为 1 用户可以登录，但如果状态 0 用户无法登录。使用已发送给新电子邮件用户的代码激活可以从 0 到 1 状态激活并且可以正常登录。

问题是 ：

1.  如果用户的新邮箱是假的或无效的，用户将无法再次登录。

你有什么建议来解决这个问题？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:48:10.687

仅在他们单击激活码/链接后更改电子邮件地址（您在步骤 3 中所做的操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:55:13.837

我会用下一个结构创建一个名为 user_emails 的附加表：

email_id
email
user_id
current_active
date_added

从用户表迁移电子邮件数据。
然后，我会更改我的应用程序以在需要获取用户电子邮件的地方使用这个新表。
并在用户表中删除字段电子邮件。

在此之后，您可以支持一个用户的多封电子邮件，这有很多原因。

user_emails 表中的字段 current_active 需要为某些电子邮件设置为活动，只要用户没有确认新电子邮件。
确认后，只需将旧电子邮件 current_active 设置为 0，将新电子邮件设置为 1，然后在需要用户电子邮件的地方使用该条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:51:16.960

不要自动注销它们。如果您愿意，您已经可以重新生成会话 ID，但是我认为这不需要任何注销。

然后，除非经过验证，否则不要使新的电子邮件地址有效。还要求更改电子邮件的用户在开始更改之前需要再次提供密码。

然后发送验证邮件。只有在确认后，才能设置新的登录电子邮件地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T11:52:56.343

您只需为待处理的邮件更改添加一个新表/列。过程将是这样的。

1.  用户更改电子邮件地址，服务器向旧地址发送确认/激活邮件。同时服务器也会给用户添加一个挂起的邮件更改属性。用户仍需使用旧邮件地址登录。

2.  用户尚未激活新地址并使用旧地址登录。告诉用户他仍有待更改的邮件地址。此时用户可以取消邮件更改或转到新邮件地址并激活新地址。

2.1 用户注销并激活旧邮件地址的邮件更改。在此激活完成之前，用户仍然必须使用旧邮件地址登录系统。

1.  激活/确认待处理邮件地址后，主地址出现，待处理属性消失。用户无法使用旧邮件地址登录。

# c++ - 用 c++ 列出内容

> ID：12620651
> 
> 赞同：0
> 
> 时间：2012-09-27T11:46:12.530
> 
> 标签：c++, file-io

我写了以下结构。

```
struct RGB
{
     unsigned short Red; 
     unsigned short Green;
     unsigned short Blue;
};

struct ImageBase
{
     std::string name;
     RGB array[64][64];
}; 
```

我有一个文件“Image.png”。如何读取文件（将 RGB 值打印到屏幕或文件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:18:39.250

您可以使用 gil 作为 boost 的一部分来读取图像：

```
using namespace boost::gil;
rgb8_image_t input;
png_read_and_convert_image(ipath, input); 
```

然后，您将在图像上创建一个视图以访问像素，并遍历像素以将它们写入标准输出：

```
rgb8_view_t src_view = view(input);

for (int y=0; y < src_view.height(); ++y) {

    rgb8_view_t::x_iterator src_it = src_view.row_begin(y);

    for (int x=0; x < src_view.width(); ++x)
        std::cout << "R=" << src_it[x][0] << " G=" << src_it[x][1] << " B=" << src_it[x][2] << std::endl;
} 
```

gil 的文档在这里： http: [//www.boost.org/doc/libs/1_51_0/libs/gil/doc/index.html](http://www.boost.org/doc/libs/1_51_0/libs/gil/doc/index.html)

# android - vmlite android的快捷方式？

> ID：12620654
> 
> 赞同：0
> 
> 时间：2012-09-27T11:46:27.987
> 
> 标签：android, keyboard-shortcuts, vmlite

我正在使用[vmlite android](http://www.vmlite.com/index.php?option=com_content&view=article&id=69&Itemid=178)开发 android 应用程序。

我想知道是否有任何可用的快捷方式，例如`back`/ `home`。我需要它们，因为有些应用程序不提供`back`或`quit`按钮，如果我运行它们，我没有办法退出。

* * *

**更新**

底部没有导航栏，看我的截图：

![在此处输入图像描述](../Images/ec167952762bebd7eaf3d6f2f7d49167.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:37:19.573

Home 键 Esc 键 鼠标右键

您还应该在底部看到带有返回、主页、最近使用的应用程序特殊键的导航栏

# iphone - 如何将 UILabel 视图更改为 UIImageView Xcode、Iphone

> ID：12620657
> 
> 赞同：1
> 
> 时间：2012-09-27T11:46:32.170
> 
> 标签：iphone, ios, xcode, uiscrollview, uiimageview

我制作了一个示例，其中有一个 ScrollView 和在 ScrollView 中滚动的图像。当您单击图像上的一个时，它会以 UILabelView 的形式告诉您在 UIScrollView 下方按下了哪个按钮图像。我想弄清楚的是如何将标签更改为 UIImageView。因此，当按下按钮时，而不是说按钮 %d。我想展示我规定的图像。

**厨房.h**

```
#import <UIKit/UIKit.h>
#import "SlideMenuView.h"

@interface Kitchens : UIViewController {
IBOutlet UIScrollView *windows;
SlideMenuView *slideMenuView;
UILabel *screenLabel;
}

@property (nonatomic, retain) UIScrollView *windows;
@property (nonatomic, retain) SlideMenuView *slideMenuView;
@property (nonatomic, retain) UILabel *screenLabel;

@end 
```

**厨房.m**

```
#import "Kitchens.h"
#import "SlideMenuView.h"

@interface Kitchens ()

@end

@implementation Kitchens

@synthesize windows, slideMenuView, screenLabel;
#pragma mark -
#pragma mark <Touches Began/Moved/Ended/Cancelled Methods>

- (void)viewDidLoad {

// Create and position a label
screenLabel = [[UILabel alloc] initWithFrame:CGRectMake(10.0f, 200.0f, [windows bounds].size.width-20.0f, 20.0f)];
[windows addSubview:screenLabel];

// Create buttons for the sliding menu. For simplicity I create 5 standard buttons.
NSMutableArray* buttonArray = [[NSMutableArray alloc] init];

for(int i = 0; i < 5; i++)
{
// Rounded rect is nice
UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];

// Give the buttons a width of 100 and a height of 30\. The slide menu will take care of positioning the buttons.
// If you don't know that 100 will be enough, use my function to calculate the length of a string. You find it on my blog.

[btn setFrame:CGRectMake(0.0f, 0.0f, 100.0f, 100.0f)];
[btn setTitle:[NSString stringWithFormat:@"Button %d", i+1] forState:UIControlStateNormal];

[btn addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
[btn setImage:[UIImage imageNamed:@"test.jpg"] forState:UIControlStateNormal];
[buttonArray addObject:btn];

// Rounded rect is nice
UIButton *btn1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];

// Give the buttons a width of 100 and a height of 30\. The slide menu will take care of positioning the buttons.
// If you don't know that 100 will be enough, use my function to calculate the length of a string. You find it on my blog.

[btn1 setFrame:CGRectMake(0.0f, 0.0f, 100.0f, 100.0f)];
[btn1 setTitle:[NSString stringWithFormat:@"Button2"] forState:UIControlStateNormal];
[btn1 addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
[btn1 setImage:[UIImage imageNamed:@"pia05733-640-480.jpg"] forState:UIControlStateNormal];
[buttonArray addObject:btn1];

UIButton *btn2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
// Give the buttons a width of 100 and a height of 30\. The slide menu will take care of positioning the buttons.
// If you don't know that 100 will be enough, use my function to calculate the length of a string. You find it on my blog.
[btn2 setFrame:CGRectMake(0.0f, 0.0f, 100.0f, 100.0f)];
[btn2 setTitle:[NSString stringWithFormat:@"Button3"] forState:UIControlStateNormal];
[btn2 addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
[btn2 setImage:[UIImage imageNamed:@"pia05733-640-480.jpg"] forState:UIControlStateNormal];
[buttonArray addObject:btn2];

}

// initialize the slide menu by passing a suitable frame, background color and an array of buttons.
slideMenuView = [[SlideMenuView alloc] initWithFrameColorAndButtons:CGRectMake(10.0f, 30.0f, [windows bounds].size.width-20.0f,  100.0f) backgroundColor:[UIColor blackColor]  buttons:buttonArray];

// Add the slide menu to the window.
[windows addSubview:slideMenuView];

[super viewDidLoad];

}

- (IBAction)buttonPressed:(id)sender {
screenLabel.text = ((UIButton*)sender).currentTitle;
UIButton *btn2 = (UIButton*)sender;
UIImage *image = btn2.currentImage;

// Set the image in the image view
self.imageView.image = image;

}

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} else {
    return YES;
}
}

@end 
```

**SlideMenuView,h**

```
#import <UIKit/UIKit.h>

@interface SlideMenuView : UIView <UIScrollViewDelegate> {
UIScrollView *menuScrollView;
UIImageView *rightMenuImage;
UIImageView *leftMenuImage;
NSMutableArray *menuButtons;
}
-(id) initWithFrameColorAndButtons:(CGRect)frame backgroundColor:(UIColor*)bgColor  buttons:(NSMutableArray*)buttonArray;

@property (nonatomic, retain) UIScrollView* menuScrollView;
@property (nonatomic, retain) UIImageView* rightMenuImage;
@property (nonatomic, retain) UIImageView* leftMenuImage;
@property (nonatomic, retain) NSMutableArray* menuButtons;

@end 
```

**SlideMenuView.m**

```
#import "SlideMenuView.h"

@implementation SlideMenuView
@synthesize menuScrollView, rightMenuImage, leftMenuImage;
@synthesize menuButtons;

-(id) initWithFrameColorAndButtons:(CGRect)frame backgroundColor:(UIColor*)bgColor  buttons:(NSMutableArray*)buttonArray  {

if (self = [super initWithFrame:frame]) {

    // Initialize the scroll view with the same size as this view.
    menuScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, frame.size.width, frame.size.height)];

    // Set behaviour for the scrollview
    menuScrollView.backgroundColor = bgColor;
    menuScrollView.showsHorizontalScrollIndicator = FALSE;
    menuScrollView.showsVerticalScrollIndicator = FALSE;
    menuScrollView.scrollEnabled = YES;
    menuScrollView.bounces = FALSE;

    // Add ourselves as delegate receiver so we can detect when the user is scrolling.
    menuScrollView.delegate = self;

    // Add the buttons to the scrollview
    menuButtons = buttonArray;

    float totalButtonWidth = 0.0f;

    for(int i = 0; i < [menuButtons count]; i++)
    {
        UIButton *btn = [menuButtons objectAtIndex:i];

        // Move the buttons position in the x-demension (horizontal).
        CGRect btnRect = btn.frame;
        btnRect.origin.x = totalButtonWidth;
        [btn setFrame:btnRect];

        // Add the button to the scrollview
        [menuScrollView addSubview:btn];

        // Add the width of the button to the total width.
        totalButtonWidth += btn.frame.size.width;
    }

    // Update the scrollview content rect, which is the combined width of the buttons
    [menuScrollView setContentSize:CGSizeMake(totalButtonWidth, self.frame.size.height)];

    [self addSubview:menuScrollView];

}
return self;
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
// if the offset is less than 3, the content is scrolled to the far left. This would be the time to show/hide
// an arrow that indicates that you can scroll to the right. The 3 is to give it some "padding".
if(scrollView.contentOffset.x <= 3)
{
    NSLog(@"Scroll is as far left as possible");
}
// The offset is always calculated from the bottom left corner, which means when the scroll is as far
// right as possible it will not give an offset that is equal to the entire width of the content. Example:
// The content has a width of 500, the scroll view has the width of 200\. Then the content offset for far right
// would be 300 (500-200). Then I remove 3 to give it some "padding"
else if(scrollView.contentOffset.x >= (scrollView.contentSize.width - scrollView.frame.size.width)-3)
{
    NSLog(@"Scroll is as far right as possible");
}
else
{
    // The scoll is somewhere in between left and right. This is the place to indicate that the 
    // use can scroll both left and right
}

}

- (void)drawRect:(CGRect)rect {
// Drawing code
}

- (void)dealloc {
//[menuButtons release];
//[rightMenuImage release];
//[leftMenuImage release];
//[menuScrollView release];
// [super dealloc];
}

@end 
```

![在此处输入图像描述](../Images/2414a6264fcb43abfc73a1b9ee169f3b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:06:30.193

在按钮 Action 方法中，获取该按钮的当前背景图像并将其设置在图像视图中

```
 - (IBAction)buttonPressed:(id)sender {
         UIButton *button = (UIButton*)sender;
         UIImage *image = button.currentBackgroundImage;

          // Set the image in the image view

         self.imageView.image = image;

    } 
```

# android - 如何使用android获取高度值？

> ID：12620660
> 
> 赞同：0
> 
> 时间：2012-09-27T11:46:40.500
> 
> 标签：android, location

我使用了以下代码，我得到的纬度和经度值是正确的，但高度值是 0。请帮帮我

```
locationManager = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000,
            0, (LocationListener) this);

public void onLocationChanged(Location location) {
    double lat_chn = (double) (location.getLatitude());
    double lng_chn = (double) (location.getLongitude());
    Log.d("Update Latitude= ", location.getLatitude() + "");
    Log.d("Update Longitude= ", location.getLongitude() + "");
    mapView.getOverlays().add(myLocationOverlay);

    String Text ="Latitude="+location.getAltitude()+
        "\nLongitude ="+location.hasAltitude()+"\nAltitude="+getAltitude(lat_chn,lng_chn);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T11:54:16.373

您是否也可以与[传感器管理器](http://developer.android.com/reference/android/hardware/SensorManager.html)联系，因为传感器管理器就是为此而设计的；它具有 getAltitude(float p0, float p) 函数，可根据大气压力和海平面压力计算以米为单位的高度。

希望能帮助到你。

在代码级别，您可以执行如下所示的操作......

```
import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;

public class MyActivity extends Activity implements SensorEventListener {

    private SensorManager sensorManager;
    private Sensor sensor;
    private float altitude = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        sensor = sensorManager.getDefaultSensor(Sensor.TYPE_PRESSURE);
    }

    @Override
    protected void onResume() {
        super.onResume();

        if (sensor != null) 
            sensorManager.registerListener(this, sensor, SensorManager.SENSOR_DELAY_NORMAL);
    }

    @Override
    protected void onPause() {
        super.onPause();
        sensorManager.unregisterListener(this);
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {}

    @Override
    public void onSensorChanged(SensorEvent event) {
        float presure = event.values[0];
        altitude = SensorManager.getAltitude(SensorManager.PRESSURE_STANDARD_ATMOSPHERE, presure);

        System.out.println("altitude => " + altitude);
    }
} 
```

# ruby-on-rails - 查看可排序列表

> ID：12620667
> 
> 赞同：0
> 
> 时间：2012-09-27T11:47:28.130
> 
> 标签：ruby-on-rails, ruby

我在一个页面上有一个工人列表，其中包含他们的所有信息。我希望能够有一个选择工人姓名的下拉列表，然后您只能查看该人员的信息。我的 show 函数循环如下所示：

```
<% @comp_times.each do |comp_time| %>
  <tr>
    <td><%= comp_time.name %></td>
    <td><%= comp_time.date_worked %></td>
    <td><%= comp_time.hours_earned %></td>

    <td><%= link_to 'Show', comp_time %></td>
    <td><%= link_to 'Edit', edit_comp_time_path(comp_time) %></td>
    <td><%= link_to 'Destroy', comp_time, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %> 
```

任何帮助将不胜感激。我知道如何对名称进行排序，而不是仅仅显示我想看到的工人而不显示当时我不需要的所有其他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:45:39.313

```
<%= form_tag comp_times_path, :method => 'get' do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %> 
```

# .net - .NET Sqlite SQL Shell？

> ID：12620673
> 
> 赞同：1
> 
> 时间：2012-09-27T11:47:58.143
> 
> 标签：.net, sql, sqlite, shell

我正在使用[.NET 的官方 SQLite，](http://system.data.sqlite.org/)但我想将其用作 SQL shell（如 sqlite 命令行 shell），用户可以在其中输入任意 SQL，例如：

```
>>> CREATE TABLE employee (firstname varchar(32), lastname varchar(32))
>>> insert into employee values('First','Last');
>>> select * from employee;
First | Last 
```

甚至可能：

```
>>> .tables
employee 
```

库中是否有代码可以简化此操作？或者另一个为 .NET 包装 SQLite 的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:35:35.153

`sqlite3`命令行工具在文件中实现，[`shell.c`](http://www.sqlite.org/cgi/src/finfo?name=src/shell.c)使用 SQLite C API。

System.Data.SQLite 提供了该 API 中的所有内容（除了[`sqlite3_complete()`](http://www.sqlite.org/c3ref/complete.html)），因此如果您想在 .NET 之上构建自己的 shell，则必须将该文件中的所有内容移植到某种 .NET 语言中。

# c++ - C++中的模板参数太多？

> ID：12620674
> 
> 赞同：3
> 
> 时间：2012-09-27T11:48:00.517
> 
> 标签：c++, templates

<>我使用 C++ 并计划了一个包含大约 100 个模板参数的类的库。当然，我担心有n个模板参数，如果用户需要每个组合，我们有2^n个不同的类，这是一种代码爆炸。但是，用户需要为此进行 2^n 次实例化。

我的问题是：这么多模板参数的主要*技术问题是什么？*

笔记：

*   对于*技术*，我对关于可读性、设计等的主观答案不感兴趣。我的意思是像这样的事实
    *   运行
    *   代码大小
    *   允许的最大模板数

代码示例：

```
// here we have 2, but I have 100 template parameters
template<typename T1, typename T2>
class Class
{
    T1 x;
    T2 y;
    int add(T1 _x, T2 _y) { return _x+_y; } // 4 instanciations possible?
    Class<T2, T1>* swap() { return new Class<T2, T1>(); } // always 2 instanciations?
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:51:31.333

实际上模板化的类类型是在编译时确定的。这并不意味着您有 2^n 个不同的课程，而是您只有 n 个课程。在编译时，适当的类型被替换并且类成员/函数只是您使用它们的类型。

例如

```
template <class Type1, class Type2>
class A
{
private:
    Type1 member_x;
public:
    Type2 GetTypeValue(Type1, Type2);
}; 
```

当像这样实例化时：

```
A<int, string> *x = new A<int, string>(); 
```

仅作为具有整数类型成员和字符串类型成员的类编译。同样代表功能等。

**更新：** 使用下面的更新示例，您仍然只有一个函数实例，它将是一个`string`带参数的返回函数`int`和`string`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T12:24:40.113

主要考虑因素是代码大小，这可能会对性能产生影响。每个不同的模板实例化都需要生成所有使用的成员函数（或全部，如果用户进行手动模板实例化）。不同的模板实例之间不会有代码重用。

除此之外，您提供大量参数的任何元素都很难处理。从维护的角度来看，带有 10 个参数的声明已经很难阅读。它要么延伸多行，要么在行中延伸得非常宽，并且很难通过检查来确定所有参数都在正确的位置。*那 X 是第 7 个还是第 8 个参数？*是的，你可以数一数，但它会变得很痛苦。如果参数的数量为 100，则问题只会更加严重。

为什么你希望所有这些都是模板参数？如果没有更多信息，您将不会得到其他建议，但很可能有针对同一问题的其他设计不需要这种复杂程度。也许在编译时不需要知道参数（它们可以以数组/向量的形式传递给函数/构造函数，用于非类型参数），或者它们可以被分组（一个类型模板参数包含一组相关的 typedef )...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-15T02:21:17.237

这样做是有理由的。用于序列化、解析、文档、智能感知的自动代码生成器。所有标头都可以被解析，然后自动编写为第二个类，该类具有已解析类的每个成员函数的模板成员。由于自动代码系统将编写代码，因此可读性并不重要，但是您可以访问任何类成员，无论大小或基于每个模板成员的类型的某些分支代码的间接性，这是每个自动生成的基类模板类。

然后，在使用该类时，您可以通过查看类型来编写每个“类型”的函数，或者您可以将每个模板类型的值显示为解析器或 IDE 显示器的输出。粗略地说，智能将被完全预编译以实现快速搜索。只需有一个并行项目，它可以根据头文件中的更改进行编译，然后它可以查找各种特征，而不管它是什么类型的类成员。

从技术上讲，它从解析、记录、输出或显示类中的项目的整个问题中删除类型，并在查看某些文件的某些程序的编译时执行此操作。因为每个成员都有一种查看类型的方式（类似于为什么编译器更喜欢使用 static_cast 而不是 c 样式转换）

代码大小将与每个类解析 1-1 的文件大小相同，优势将是任何程序内存空间，可以转换为匹配它的自动写入类型，然后使用类型感知的函数访问以显示操作或输出值. 想象一下，如果简单地在某个文件中找到一个“类”，就可以方便地访问该类中的所有信息，而无需进行任何解析，只需要以模板形式转换到您预先创建的类，其中自动生成类的基类有方法来操作现在可检测类型的数据。

可能他在用 100 多个模板参数做什么

# php - 我应该使用什么语言来开发这个网站？

> ID：12620676
> 
> 赞同：-2
> 
> 时间：2012-09-27T11:48:01.867
> 
> 标签：php, asp.net, programming-languages

我不完全确定这个问题是否被认为是题外话，所以如果是，请原谅我。

我想开发一个有点像流程图的网站 --> 图形网站。即，向用户呈现问题nr。1，然后他/她可以选择答案 1A 或 1B。根据选择的是 1A 还是 1B，一个新的问题 nr。2 一直出现，直到有一个最终声明，即用户最终得到。

例子：

> Q1：您有高血压吗？
> 
> > 答：是或否
> 
> Q2（用户在 Q1 中选择了是）：您的血压是多少？
> 
> > A：*一些号码*
> 
> Q2B：（用户在Q1中选择否）：您的血糖水平高吗？
> 
> > 答：是或否

依此类推.. 当用户随后回答流程图“路径”中的所有问题时，他会得出一些陈述，例如“您面临这个和那个的高风险”或“您应该考虑更多”。

将来——如果这被证明是成功的——我打算让最终陈述成为某种报告，发送到用户的电子邮件地址，下载为 pdf 文件或发送给用户。所以 - 将来添加功能是选择语言时必不可少的事情（尽管我确信所有语言将来都支持编辑:)）

但是现在，我只需要一个简单的网站，将来可以扩展。

为此，我不得不问 - 选择什么语言？我不能说我是一名程序员，所以请不要告诉我选择我喜欢的那个，因为我可能会将项目外包。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T11:52:49.807

您所说的是用户界面，您提供的选项是通常用于后端的语言。

我说后端与您的要求无关。可能还有一些任务需要完成，但不是那么多。至少目前不是。实际的应用程序将主要发生在最终用户浏览器上，为此我会说 - Javascript 和 JQuery。有一些现成的插件可用于此类任务。有关从头开始实施的类似讨论，请参阅[此线程](https://stackoverflow.com/questions/2105905/how-can-i-implement-a-wizard-style-page-using-jquery)，但我认为还有更多开箱即用的解决方案，例如[JQuery Tools](http://jquerytools.org/demos/)或类似的。

即使您不会走那条路，与 UI 相关的框架/平台/语言也是您问题的相关答案，而不是运行服务器端的东西。

# java - 为什么 date.gettime() 总是返回上一个日期，而不是 java 中的今天日期？

> ID：12620679
> 
> 赞同：0
> 
> 时间：2012-09-27T11:48:09.027
> 
> 标签：java

我有以下代码，在 Unix 服务器（WAS 5.1）上运行，它是我们公司的测试环境。当我尝试执行以下代码时，我总是得到昨天的日期（即，如果我今天执行 2012 年 9 月 27 日，它将返回日期为 2012 年 9 月 26 日）

```
long userSelectedTimeLong = date.getTime() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:51:15.767

日期根据`TimeZone`机器返回时间。您的服务器可能托管在其他地方并且 TimeZone 值不同。您需要通过具有相同的时区来比较日期的值。

一旦你这样做了，下一个任务就是`date`变量真的包含当前日期。您可以使用打印一个简单的日志`new Date().getTime()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:59:37.933

另一种可能性：服务器是否与某种时间服务同步？(ntp, ...) 也许只是 Unix 机器上的系统日期设置错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:18:22.947

会很好用 `long userSelectedTimeLong = Calendar.getInstance().getTimeInMillis()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:08:01.000

我曾经遇到过类似的问题；-) 检查本地日期变量是否在应用程序启动时被实例化，并且在应用程序运行时可能没有被刷新。

# c# - 带线程的 Ghostscript Dll

> ID：12620681
> 
> 赞同：0
> 
> 时间：2012-09-27T11:48:12.553
> 
> 标签：c#, multithreading, thread-safety, threadpool

我正在使用带有线程的 Ghostscript Dll，但它抛出了 AccessVoilation 异常，任何人都可以帮助为什么会这样，任何帮助都会非常感谢：Usman

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T22:02:09.770

API 文档指出：

> Win32 DLL gsdll32.dll 可以被多个程序同时使用，但在每个进程中只能使用一次。

因此，您将需要使用子进程而不是线程来同时运行 Ghostscript 实例。

# java - 更改 AdView 位置时出现 ClassCastException

> ID：12620685
> 
> 赞同：2
> 
> 时间：2012-09-27T11:48:18.813
> 
> 标签：java, android, android-layout

我正在尝试更改我`AdView`在 SherlockFragmentActivity 中的位置（带有标签）。由于它现在`AdView`显示在屏幕底部，我想更改它的位置，`AdView`使其显示在`ActionBar`选项卡和片段布局之间。

这是我在屏幕底部的广告布局（效果很好）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >
    </FrameLayout>

    <com.google.ads.AdView
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/adview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="@string/admod_id" />

</LinearLayout> 
```

这就是我试图改变它的方式：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.google.ads.AdView
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/adview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="@string/admod_id" />

    <FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >
    </FrameLayout>

</LinearLayout> 
```

此更改会导致方法`ClassCastExeption`中出现以下代码行`onCreate()`。

```
 adView = (AdView) findViewById(R.id.adview); 
```

使用此错误消息：

```
 Caused by: java.lang.ClassCastException: android.widget.FrameLayout cannot be cast to com.google.ads.AdView 
```

如果有人能解释为什么这会导致 a`ClassCastException`以及我将如何解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T11:51:48.193

换地方后尝试清理项目。

# android - 带有 whereclause 的 Android SQLite 更新项目

> ID：12620689
> 
> 赞同：0
> 
> 时间：2012-09-27T11:48:25.430
> 
> 标签：android, database, sqlite, filtering

我需要一些关于如何更新 SQLite 数据库中数据的建议。现在我这样做：

```
public void insertadoMedidasAdoptarCorrectamente(String codMedAdC,
        String codigoServicio) {
    AndroidOpenDbHelper androidOpenDbHelper = new AndroidOpenDbHelper(this);
    SQLiteDatabase sqliteDatabase = androidOpenDbHelper
            .getWritableDatabase();

    ContentValues contentValues = new ContentValues();
    contentValues.put(AndroidOpenDbHelper.insertadoCorrectamente, 1);

    sqliteDatabase.update("MedidasAdoptarSeleccionadas", contentValues,
            "codigomedida = '" + codMedAdC + "' AND codigoservicio = '"
                    + codigoServicio + "'", null);

    sqliteDatabase.close();
} 
```

我听说这不是更新数据的最佳方式。我认为有时它会出错。由于该代码：

```
sqliteDatabase.update("MedidasAdoptarSeleccionadas", contentValues,
            "codigomedida = '" + codMedAdC + "' AND codigoservicio = '"
                    + codigoServicio + "'", null);

    sqliteDatabase.close(); 
```

您可以观察到我正在按两个字段过滤项目。我已经看到这可以通过 whereclause 参数来完成。

所以，我的问题是，过滤要更新的数据的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:54:41.540

你不应该这样做`"codigomedida = '" + codMedAdC + "'`，因为如果有`'`in会破坏`codMedAdC`。

但是这样做就像

```
String[] whereArgs = { codMedAdC, codigoServicio };
sqliteDatabase.update("MedidasAdoptarSeleccionadas", contentValues,
            "codigomedida = ? AND codigoservicio = ?", whereArgs); 
```

很好。

如果您定期进行这些更新，您可以考虑保持数据库打开。每次新建`AndroidOpenDbHelper`和打开数据库都需要一些时间。

# asp.net-mvc-4 - Azure ACS 为 MVC WebAPI 和 Windows Store/Metro App 增加返回 URL

> ID：12620690
> 
> 赞同：0
> 
> 时间：2012-09-27T11:48:26.130
> 
> 标签：asp.net-mvc-4, microsoft-metro, acs, windows-store-apps

我在 Azure 上设置了 ACS，并在我托管在 Azure 上的 MVC 4 站点上启用了 WIF。我还制作了一个 Windows 应用商店应用程序。

为了能够从我的 Windows 商店应用程序登录，我必须将此控制器放在网站上，以将登录重定向到 Metro 应用程序中的 webauthenticationbroker。

```
public HttpResponseMessage Post()
        {
            var data = this.Request.Content.ReadAsFormDataAsync();
            var test = data.Result;

            var response = this.Request.CreateResponse(HttpStatusCode.Redirect);
            var identity = ((ClaimsIdentity)((ClaimsPrincipal)HttpContext.Current.User).Identity);
            var token = data.Result["wresult"];

            response.Headers.Add("Location", "/api/federation/end?acsToken=" + "hello");

            return response;
        } 
```

有两个问题。1) 我无法将令牌归还给 Metro，因为它太长了。带有声明的大 xml。我应该向我的客户发送什么？

2) 当我使用 WebAuthenticationBroker.AuthenticateAsync - 如果我想使用以下 url 登录（它会弹出并且人们可以选择要使用的提供程序）返回 url 需要在 ACS 管理站点上设置。它需要指向我的控制器/mysite/federation/。

[https://traffictheory.accesscontrol.windows.net:443/v2/wsfederation?wa=wsignin1.0&wtrealm=/mysite/](https://traffictheory.accesscontrol.windows.net:443/v2/wsfederation?wa=wsignin1.0&wtrealm=/mysite/)

如果我没有将此返回 url 设置为 /mysite/，则身份验证在 mcv 站点上不起作用。

我找到了一种解决方案，将返回 url 设置为 /mysite/，然后在 Windows 商店应用程序中我需要自己解析标识符。

```
 var client = new HttpClient();
    var response = await client.GetAsync("https://traffictheory.accesscontrol.windows.net:443/v2/metadata/IdentityProviders.js?protocol=wsfederation&realm=/mysite/&reply_to=/mysite/federation&context=&request_id=&version=1.0&callback=");
    var result = await response.Content.ReadAsStringAsync(); 
```

并将提供者登录信息传递给身份验证代理。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:20:35.407

对于 1，ACS 支持多种令牌格式，其中一些非常紧凑。我建议尝试[JWT](http://msdn.microsoft.com/en-us/library/gg185950.aspx#BKMK_3)，它处于测试阶段。您还可以修改输出规则以减少令牌中的声明数量，从而使其更小。

对于 2，WS-Federation 包含一个“wreply”参数，因此您可以添加“&wreply=https://mysite.com/federation”。或者，您可以在 ACS 门户中将“/federation” URL 配置为您的 RP 的默认回复 URL，在这种情况下，您不必在每个请求中都指定它。

# actionscript-3 - FLV 视频结束后跳帧

> ID：12620691
> 
> 赞同：0
> 
> 时间：2012-09-27T11:48:30.077
> 
> 标签：actionscript-3, flash, flv

所以我想不通，我需要在 FLV 视频完成时跳回帧 (1)？

```
stop();
var nc:NetConnection = new NetConnection();
nc.connect(null);

var ns:NetStream = new NetStream(nc);
videoPlayer.attachNetStream(ns);

var listener:Object = new Object();
listener.onMetaData = function(evt:Object):void {};
ns.client = listener;

ns.play("Tchibo_movie.flv");

videoPlayer.addEventListener(Event.COMPLETE,completefunc);
function completefunc(e)
{
    trace("completed");
    gotoAndPlay (1);

} 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:47:46.073

你可以听听`NetStream`。`NetStatusEvent.NET_STATUS`

```
ns.addEventListener(NetStatusEvent.NET_STATUS, handleStreamStatus);
function handleStreamStatus(e:NetStatusEvent):void{ 
    if(e.info.code == "NetStream.Play.Complete"){               
        trace('completed');
    }
} 
```

# python - 部署 Flask，并行请求

> ID：12620695
> 
> 赞同：6
> 
> 时间：2012-09-27T11:48:43.120
> 
> 标签：python, flask, wsgi

当我使用内置的 Web 服务器测试我的新 Flask 应用程序时，一切都是“单线程”和阻塞的。服务器不能在没有完成另一个请求的情况下提供一个请求。它一次只能处理一个请求。

在部署 Web 服务时，这显然是不可取的。您如何部署 Flask 应用程序以使事物可以并行移动？

关于代码内部的线程安全和并发性（用锁保护对象等）是否有不同的事情需要考虑，或者所有的产品都是等效的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:56:00.520

我将 uWSGI 与 gevent 循环一起使用。那就是车票。事实上，这就是我使用阻塞而不阻塞的 py-redis 的方式。

此外，我使用 uWSGI 在响应后编写请求，同时仍接受更多请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T12:07:37.860

有很多不错的选择。我认为最受欢迎的两个可能是：

[在 Apache 后面使用 mod_wsgi](http://flask.pocoo.org/docs/deploying/mod_wsgi/)或[在 Nginx 后面使用 uWsgi](http://flask.pocoo.org/docs/deploying/uwsgi/)运行它

这两个对我来说都很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-12T05:55:21.077

我使用 Nginx + [gunicorn](http://gunicorn.org/)。但我希望 uWSGI 是事实上的标准。

# asp.net - 只发生一次排序

> ID：12620696
> 
> 赞同：0
> 
> 时间：2012-09-27T11:48:43.443
> 
> 标签：asp.net

我的网格视图中有 4 列。当我单击任何列时，该列仅发生一次排序。我哪里错了？

这是我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
if(!IsPostBack)
{
Bind();
} 

}

public void bind()
{
String connectionString = WebConfigurationManager.ConnectionStrings["ABConnectionString"].ConnectionString;
SqlConnection con = new SqlConnection(connectionString); 
con.Open();
DataSet ds = new DataSet();

SqlDataAdapter da = new SqlDataAdapter("select * from Table1",con);
try
{
da.Fill(ds, "Table1");

GridView1.DataSource = ds.Tables["Table1"];
Session["dttable"] = ds.Tables["Table1"];
GridView1.DataBind();
}
catch (Exception ex)
{

ex.ToString();

}

protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
{

string sortExpression = e.SortExpression;
string direction = string.Empty;
SortDirection GridViewSortDirection = e.SortDirection;
if (GridViewSortDirection == SortDirection.Ascending)
{

GridViewSortDirection = SortDirection.Descending;
direction = " DESC";

}

else
{
GridViewSortDirection = SortDirection.Ascending;

direction = " ASC";

}
DataTable dt = (DataTable)Session["dttable"];
dt.DefaultView.Sort = sortExpression + direction;
GridView1.DataSource = dt;
GridView1.DataBind();
}
public SortDirection SortDirection
{
get
{
if (ViewState["SortDirection"] == null)
{
ViewState["SortDirection"] = SortDirection.Ascending;
}
return (SortDirection)ViewState["SortDirection"];
}
set
{
ViewState["SortDirection"] = value;
}
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:05:05.353

您有一个用于将 SortDirection 存储在 ViewState 中的属性，但我没有看到您在排序代码的任何地方使用它。我会在这里使用视图状态项来保留 SortExpression 和 SortDirection。

```
protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
{
    if (e.SortExpression.Equals(CurrentSortExpression, StringComparison.OrdinalIgnoreCase))
    {
        // Same sort expression, toggle direction
        // This would probably be better in a private method or extension method
        if (CurrentSortDirection == SortDirection.Ascending)
            CurrentSortDirection  = SortDirection.Descending;
        else
            CurrentSortDirection = SortDirection.Ascending;

    }
    else
    {
        // Different sort expression, default to asc
        CurrentSortExpression = e.SortExpression;
        CurrentSortDirection = SortDirection.Ascending;
    }

    string direction = "ASC";
    if (CurrentSortDirection == SortDirection.Descending)
        direction = " DESC";

    DataTable dt = (DataTable)Session["dttable"];
    dt.DefaultView.Sort = CurrentSortExpression + direction;
    GridView1.DataSource = dt;
    GridView1.DataBind();
}

public SortDirection CurrentSortDirection  // renaming to make it distinguishable
{
    get
    {
        return (SortDirection)(ViewState["SortDirection"] ?? SortDirection.Ascending);
    }
    set
    {
        ViewState["SortDirection"] = value;
    }
}

public string CurrentSortExpression
{
    get
    {
        return ViewState["SortExpression"] ?? "some default expression";
    }
    set
    {
        ViewState["SortExpression"] = value;
    }
} 
```

# c++ - 为什么 `throw MyClass' 不起作用而 `throw MyClass()' 起作用？

> ID：12620699
> 
> 赞同：1
> 
> 时间：2012-09-27T11:48:48.777
> 
> 标签：c++, exception

我在某处读到（现在找不到源）

```
MyClass *p1 = new MyClass; 
```

和

```
MyClass *p2 = new MyClass(); 
```

本质上是等价的，只要`MyClass`提供了一个默认的构造函数。编译器了解我想要做什么并添加空括号。

如果是这样，为什么不允许我写

```
throw MyException; 
```

但必须使用

```
throw MyException(); 
```

? （是的，一行开头的问号。）

为了增加一些混乱，[C++ FAQ](http://www.parashift.com/c++-faq/empty-parens-in-object-decl.html)建议第二个用例 ( `new MyClass()`) 不调用构造函数，而是调用定义的函数`operator()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:01:51.127

> 编译器了解我想要做什么并添加空括号。

不，它没有；这两个表达式并不完全等价。不同之处在于对象的初始化方式：第一个使用默认初始化，而第二个使用值初始化。所以它们对于定义默认构造函数的类是等价的；否则，第一个将使 POD 对象未初始化，而第二个会将它们初始化为零。

> 为什么我不允许写作`throw MyException;`？

`MyException()`是一个创建值初始化临时对象的表达式；你可以抛出它，就像你可以抛出任何其他合适的表达式的值一样。

`MyException`不是表达式；它只是一个类型名称。你只能抛出一个表达式的值，所以`throw MyException;`是无效的。无法创建默认初始化的临时对象。

> 为了增加一些混乱，C++ FAQ 建议第二个用例 (new MyClass()) 不调用构造函数，而是调用使用 operator() 定义的函数。

不，它没有。它说像这样的`List x();`声明声明了一个具有返回类型的函数`List`，而不是（正如人们可能认为的那样）类型的值初始化对象`List`。它与 new-expressions 或 无关`operator()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:51:11.623

因为您不是在抛出`new`异常，而是在构造它。

考虑以下：

```
MyException exception = MyException(); // works
MyException exception = MyException; // doesn't work

new MyException; // works
new MyException();// works 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:50:47.070

常见问题解答中列出的情况有所不同，不适用于此处。

`MyException`在第一种情况下只是一个类型名称，在第二种情况下创建一个变量。这只是语法。如同

```
MyException ex = MyException; 
```

不会编译，但是

```
MyException ex = MyException(); 
```

将。常见问题解答示例仅说明了以下内容：

```
MyException ex(); 
```

这确实是一个函数声明，而：

```
MyException ex; 
```

将。

没办法

```
throw MyException(); 
```

或者

```
MyException ex = MyException(); 
```

可以解释为函数声明，因此它们可以工作。

# windows-phone-7 - WP7 对列表框可见性更改的转换

> ID：12620700
> 
> 赞同：0
> 
> 时间：2012-09-27T11:48:52.577
> 
> 标签：windows-phone-7, controls, transitions

我有一个列表框，我根据页面上发生的事件更改可见性。我正在通过 Binding 执行此操作，并且它一切正常，即列表框会按原样消失，并且在我想要的时候正确显示。

我想知道当列表框显示/隐藏时实现某种转换有多容易？

我目前可以很好地使用页面转换，但我不确定在个人控制级别尝试和实现某些东西有多实用。

有没有（相对）直接的方法？

*   谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:16:01.587

要开始了解动画控件，请先查看[http://www.jeffblankenburg.com/2010/10/29/31-days-of-windows-phone-day-29-animations/](http://www.jeffblankenburg.com/2010/10/29/31-days-of-windows-phone-day-29-animations/)和[http://msdn。 microsoft.com/en-us/library/hh134792(v=expression.40).aspx](http://msdn.microsoft.com/en-us/library/hh134792(v=expression.40).aspx)

# sbt - 如何让 sbt 重新加载一切？

> ID：12620701
> 
> 赞同：0
> 
> 时间：2012-09-27T11:48:52.853
> 
> 标签：sbt

我有这个小别名，`$HOME/.sbtrc`它通常可以很好地使 sbt 重新加载所有内容，重新解析所有内容，为 Eclipse 重新准备所有内容等：

```
alias full-reload=;reload;clean;update;eclipse with-source=true 
```

但是，当我今天升级 sbteclipse sbt 插件时，我无法使用它 - sbt 顽固地拒绝启动，因为它无法识别我试图在我的项目中设置的设置键的存在，该键`build.sbt`仅存在于新版本的 sbteclipse 插件，我能找到解决这个问题的唯一方法是从常春藤缓存中删除旧版本的插件并重新启动 sbt。我怎样才能*完全*重新加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:38:40.137

删除整个`$HOME/.ivy2/cache`目录并重新启动 sbt，然后使用上面的别名（在每个受影响的项目中）应该可以工作 - 但这有点像大锤的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T13:15:04.737

我修改了我的别名以重新加载插件，这是这个问题所需要的：

```
alias full-reload=;reload plugins;clean;reload return;clean;update;eclipse with-source=true 
```

# javascript - 将数据字符串作为参数传递给 HighCharts 的函数

> ID：12620704
> 
> 赞同：4
> 
> 时间：2012-09-27T11:49:06.097
> 
> 标签：javascript, jquery, json, highcharts

我知道这个标题似乎有点奇怪，我无法更好地解释它。

这是我需要的。我有这个 javascript 函数，我需要将数据作为字符串变量传递给它：

```
var chart;
function drawChart() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: [
                ['Firefox',   45.0],
                ['IE',       26.8],
                {
                    name: 'Chrome',
                    y: 12.8,
                    sliced: true,
                    selected: true
                },
                ['Safari',    8.5],
                ['Opera',     6.2],
                ['Others',   0.7]
            ]
        }]
    });
} 
```

我需要将此数据作为参数传递给我的函数

> [ ['Firefox', 45.0], ['IE', 26.8], { name: 'Chrome', y: 12.8, sliced: true, selected: true }, ['Safari', 8.5], ['Opera', 6.2]，['其他'，0.7]]

我该怎么做？

我希望它看起来像这样

```
var chart;
function drawChart(dataString) {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'Browser market shares at a specific website, 2010'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
            percentageDecimals: 1
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: dataString
        }]
    });
} 
```

我尝试了@moonwave99 的解决方案：

```
var browsers = [
 ['Firefox',   45.0],
 ['IE',       26.8],
 {
     name: 'Chrome',
     y: 12.8,
     sliced: true,
     selected: true
 },
 ['Safari',    8.5],
 ['Opera',     6.2],
 ['Others',   0.7]
]; 
```

和

```
...........
        series: [{
            type: 'pie',
            name: 'Browser share',
            data:  JSON.stringify(browsers) 
        }]
............ 
```

我的结果是这样的：

![在此处输入图像描述](../Images/8255c6853a6bd7d3c4751866f333a85a.png)

**解决方案**：http : [//jsfiddle.net/USzVy/1/](http://jsfiddle.net/USzVy/1/)

```
var browsers = [
 ['Firefox',   45.0],
 ['IE',       26.8],
 {
     name: 'Chrome',
     y: 12.8,
     sliced: true,
     selected: true
 },
 ['Safari',    8.5],
 ['Opera',     6.2],
 ['Others',   0.7]
];

function drawChart() {
var data_str = JSON.stringify(browsers);

    var options ={
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: JSON.parse(data_str)
        }]
    }

  chart = new Highcharts.Chart(options);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:38:39.997

首先将您的数据定义为数组，而不是字符串：

```
 var data = [["Firefox",45.0],["IE",26.8],{name: "Chrome",y: 12.8, sliced: true,selected: true},["Safari",8.5],["Opera",6.2],["Others",0.7]]; 
```

然后字符串化并作为参数传递给您的函数：

```
 var data_str = JSON.stringify(data);
 drawChart(data); 
```

然后转换回JSON

```
 series: [{
        ...
        data: JSON.parse(data)
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T11:53:35.140

使用[`JSON.stringify`](http://msdn.microsoft.com/en-us/library/cc836459%28v=vs.94%29.aspx)：

```
var browsers = [
     ['Firefox',   45.0],
     ['IE',       26.8],
     {
         name: 'Chrome',
         y: 12.8,
         sliced: true,
         selected: true
     },
     ['Safari',    8.5],
     ['Opera',     6.2],
     ['Others',   0.7]
]

...

data : JSON.stringify(browsers)

... 
```

编辑[见 fiddle](http://jsfiddle.net/JDev6/)。

EDIT2：我查看了这个[库 API](http://api.highcharts.com/highcharts#series.data)，你**不需要**一个字符串，而是一个选项数组！阅读文档，您将完成它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:52:47.403

```
function drawChart(data) {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: JSON.parse(data)
        }]
    });
}

var data = "[ ['Firefox', 45.0], ['IE', 26.8], { name: 'Chrome', y: 12.8, sliced: true, selected: true }, ['Safari', 8.5], ['Opera', 6.2], ['Others', 0.7] ]";
drawChart(data); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T12:22:41.117

```
var chart;
function drawChart(dataString) {
    // options to create the chart
    var options = {
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: dataString // using the parameter
        }]
    };
    chart = new Highcharts.Chart(options);
}
// here you get the dataString some way
var dataString = [
    ['Firefox',   45.0],
    ['IE',       26.8],
    {
        name: 'Chrome',
        y: 12.8,
        sliced: true,
        selected: true
    },
    ['Safari',    8.5],
    ['Opera',     6.2],
    ['Others',   0.7]
];
drawChart(dataString); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T03:04:32.813

太好了，解决方案，我正在尝试您的代码，但我的图表没有显示任何内容，所以，我正在跟踪我像参数一样传递的值，我的问题是我像字符串一样发送我的值，我解决这个只是转换我的数据使用 parseInt() 命令。

```
 function graficar(var1,var2,var3,var4){

                    var chart;
                    var datos=[];
                    datos[0]=parseInt(var1);
                    datos[1]=parseInt(var2);
                    datos[2]=parseInt(var3);
                    datos[3]=parseInt(var4);

                    var datos_str =JSON.stringify(datos);

                    alert(datos_str);

                    chart = new Highcharts.Chart({
                        chart: {
                                renderTo: 'grafico',
                                type: 'column'
                                },
                        title: {
                                text: 'Titulo de ventas'
                               },
                        xAxis: {
                                categories: ['30%', '40%', '50%', '60%']
                                },

                        tooltip: {
                            formatter: function() {
                                        return ''+
                                        this.series.name +': '+ this.y +'';
                                        }
                                },
                        credits: {
                            enabled: false
                               },
                        series: [{
                                name: 'Valores',

                                data: JSON.parse(datos_str) 
```

………………

谢谢

# php - PHPUnit - 试图@cover 不存在的方法

> ID：12620706
> 
> 赞同：3
> 
> 时间：2012-09-27T11:49:21.170
> 
> 标签：php, phpunit, code-coverage

我的测试用例如下所示：

```
class FooTest extends PHPUnit_Framework_TestCase {

    /** @covers MyClass::bar */
    function testBar()
    {
        $result = MyClass::bar();
        $this->assertSomething($result);
    }

} 
```

现在，测试本身工作得很好，但代码覆盖率抱怨：

```
PHP_CodeCoverage_Exception: Trying to @cover not existing method "MyClass::bar *//**". 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-01T05:03:30.537

另一个原因（这就是我的原因）是没有使用*完整*的类名，包括命名空间。

```
// Should be like
@covers \Vendor\Module\MyClass::doSomething 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T17:11:55.413

## 更正

问题不在于 PHPUnit 本身，而在于 PHP_CodeCoverage。那里的解析逻辑有些重复，PHPUnit 修复（见下文）在这种情况下没有帮助。

为 3.6 修复此问题的补丁是：

```
diff --git a/PHP/CodeCoverage/Util.php b/PHP/CodeCoverage/Util.php
index f90220d..54ce44b 100644
--- a/PHP/CodeCoverage/Util.php
+++ b/PHP/CodeCoverage/Util.php
@@ -196,12 +196,12 @@ class PHP_CodeCoverage_Util
         } catch (ReflectionException $e) {
             return array();
         }
-        $docComment = $class->getDocComment() . $method->getDocComment();
+        $docComment = substr($class->getDocComment(), 3, -2) . PHP_EOL . substr($method->getDocComment(), 3, -2);

         foreach (self::$templateMethods as $templateMethod) {
             if ($class->hasMethod($templateMethod)) {
                 $reflector   = $class->getMethod($templateMethod);
-                $docComment .= $reflector->getDocComment();
+                $docComment .= substr($reflector->getDocComment(), 3, -2);
                 unset($reflector);
             }
         } 
```

我已经在[**`https://github.com/sebastianbergmann/php-code-coverage/issues/121`**](https://github.com/sebastianbergmann/php-code-coverage/issues/121).

在此修复程序发布之前（很可能这只发生在 PHPUnit 3.7 中），您需要使用三个内衬。

* * *

## 老答案：

### 旧版本的 PHPUnit 不能使用一行注释。

PHPUnit 试图找到一个名为的类/方法组合：`"MyClass::bar *//**"`

### 使用三行注释适用于所有版本

```
/** 
 * @covers MyClass::bar 
 */ 
```

我修复了这个**`PHPUnit 3.6.4`**。

见[**`Issue 328`**](https://github.com/sebastianbergmann/phpunit/issues/328)。

从`PHPUnit >= 3.6.4`您的代码中应该可以正常工作。

# php - 如何检查保险丝文件夹是否存在

> ID：12620712
> 
> 赞同：1
> 
> 时间：2012-09-27T11:49:32.560
> 
> 标签：php, fuse, sshfs

我在服务器上安装了一个指向 sftp 站点的文件夹。我需要通过 php 检查我们是否可以看到其中的文件夹。

我试过

```
file_exists("/path/to/the/mount/folder"); 
```

但它返回错误（我有点预料到），我可以通过文件系统并使用终端导航到它。

（也试过`is_dir`&& `is_link`）

这是我从外壳安装它的方法

```
echo PASS | sshfs UNAME@URL: /path/goes/here -o password_stdin 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:55:33.020

原来这是一个配置问题。

在`/etc/fuse.conf`我未注释`user_allow_other`

然后用这个命令挂载

```
echo PASS | sshfs UNAME@URL: /path/goes/here -o password_stdin,allow_other 
```

正常的文件/文件夹检查/读取功能将正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:00:40.187

路径应该是一个字符串，所以：

```
is_dir("/path/to/the/mount/folder"); 
```

另外，如果它是基于 unix 的，我总是忘记它是区分大小写的：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:17:09.903

您可以使用：

```
$path = "/path/to/the/folder";
$name_of_files = glob($path, "*.*");
foreach($name_of_file as $filename)
{
echo $filename;
} 
```

# php - 使网页可缓存 - Codeigniter PHP Chrome 优化

> ID：12620714
> 
> 赞同：0
> 
> 时间：2012-09-27T11:49:36.247
> 
> 标签：php, codeigniter, google-chrome, caching, optimization

我在我的网页上观察到非常长的加载时间，因此我决定在 chrome 上运行此审核以检测我可以提高速度的区域

所以chrome建议我

> 以下资源是明确不可缓存的。如果可能，请考虑使它们可缓存：

下面列出了 76 个文件，分别是图像文件、CSS 和 PHP 文件

我想知道如何使这些文件“可缓存”

包括的另外两个建议是：

1.  > 有多个资源来自同一个域。考虑将它们组合成尽可能少的文件。9 从 localhost 提供的 CSS 资源。

2.  > 有多个资源来自同一个域。考虑将它们组合到尽可能少的文件中。16 从 localhost 提供的 JavaScript 资源。

我想知道这 2 个 ^ 属性将在多大程度上帮助我提高网站的加载速度。

如果可能的话，请给我其他选项，让我的网站加载速度更快，除了上面提到的。急需帮助，网站真的变慢了，需要尽快优化加载

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:47:34.277

要使用 CodeIgniter 连接和缩小 CSS 和 JS，请使用[Carabiner](http://getsparks.org/packages/carabiner/versions/HEAD/show)。

至于缓存资源，该任务通常最好由网络服务器完成...... Apache 或 NGINX 或您正在运行的任何东西。您将网络服务器配置为发送通常称为“远期过期标头”的内容，您可以按文件类型进行配置。

# java - ViewPager 中片段的长时间运行 AsyncTasks

> ID：12620719
> 
> 赞同：1
> 
> 时间：2012-09-27T11:49:53.997
> 
> 标签：java, android, android-asynctask, android-fragments, android-viewpager

我有一个由 a 提供支持的活动，`FragmentPagerAdapter`它在用户左右滑动时添加片段。

添加的这个子片段当前是静态的并且包含一个`ListView`项目。我打算使用并`AysncTask`获取项目，`ListView`但此过程可能需要 10-15 秒。

我仍然迷失在一些事情上：

我应该从哪个方法`AsyncTask`调用？会是`onCreate`方法`Fragment`吗？我只希望`AsyncTask`在 Fragment 处于焦点时调用 。

然而，最大的问题是，当用户在加载`AysncTask`时从屏幕上滑开时，我会发生什么。`AsyncTask`Activity 被销毁了吗？有没有办法可以防止 Activity 被破坏？如果我不这样做，所有的进展`AsyncTask`都会丢失，我必须重新调用`AsyncTask`当它`Fragment`成为焦点时。

谢谢。

* * *

慢的原因：

我正在抓取一个包含大约 150 条记录的页面，而 jSoup 真的非常非常慢。不使用服务的问题是数据很可能发生变化，我不想“预先抓取”数据。

@Fildor 建议使用 a`Loader`来完成繁重的工作。快速浏览一下`Loader`实现表明，它允许您在短时间内保存数据，例如方向更改。我仍然想知道`ViewPager`'s 的摆动`Fragments`是否会让数据`Loader`暂时持续存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:34:15.517

你听说过[装载机](http://developer.android.com/guide/components/loaders.html)吗？我认为这正是你想要使用的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T13:56:59.933

使用[FragmentStatePagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html) 您可以简单地从片段的 onCreateView 启动 asyncTask

# specflow - techtalk.specflow.dll 丢失

> ID：12620722
> 
> 赞同：4
> 
> 时间：2012-09-27T11:49:59.847
> 
> 标签：specflow

我尝试使用 Specflow 编写一些功能。不幸的是，通过以下 URL 安装后，我在系统的任何地方都找不到 techtalk.specflow.dll。

[http://visualstudiogallery.msdn.microsoft.com/9915524d-7fb0-43c3-bb3c-a8a14fbd40ee](http://visualstudiogallery.msdn.microsoft.com/9915524d-7fb0-43c3-bb3c-a8a14fbd40ee)

我错过了什么吗？能否请你帮忙？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T12:14:32.823

Visual Studio 库下载只是安装用于 SpecFlow 的 Visual Studio 插件（项目集成、编辑器支持等）。

您还需要通过 NuGet 在您的测试项目中引用 SpecFlow，它将下载 SpecFlow 运行时 dll 以及 SpecFlow 命令行工具。另请参阅[https://github.com/techtalk/SpecFlow/wiki/Setup-SpecFlow-Projects](https://github.com/techtalk/SpecFlow/wiki/Setup-SpecFlow-Projects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-17T17:54:25.447

无论出于何种原因，nuget 包都没有通过控制台为我正确安装 SpecFlow。

因此，我将包 (*\packages\SpecRun.Runner.1.5.2\tools) 的内容复制到 %localappdata%\Temp\VisualStudioTestExplorerExtensions\SpecRun.Runner.1.5.2\tools

然后它起作用了

# java - SOA 环境 (Java) 中的身份验证信息

> ID：12620725
> 
> 赞同：-3
> 
> 时间：2012-09-27T11:50:07.630
> 
> 标签：java, public-key-encryption

我的问题很简单。我有一个面向服务的架构，其中一个服务器是身份验证服务器。用户在此服务器中使用 HTTPS 进行身份验证，然后使用令牌前往其他服务器获取服务。

我的解决方案是这样的：身份验证服务器将生成两个 cookie，一个带有用户的实际数据（用户 GUID/会话到期日期和权限），另一个带有加密令牌的 cookie，其中包括加密的实际数据（带有一些盐）用私钥。

系统中的每台服务器都将能够通过两个 cookie 和公钥来确保用户是它声称的样子。

我需要一个这样的代码示例（或者如果我遗漏了什么可能是一个更好的解决方案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:03:54.700

我认为你不需要重新发明轮子，你可以简单地使用[CAS](http://www.jasig.org/cas)来实现这个功能上的单点登录。

# javascript - 在 HTML5 Web SQL 数据库中对日期时间进行排序

> ID：12620727
> 
> 赞同：4
> 
> 时间：2012-09-27T11:50:14.900
> 
> 标签：javascript, html

我找不到我的问题的解决方案。

我有一个带有如下表格的 HTML5 Web SQL 数据库：

```
db.transaction(function(tx) {   
        tx.executeSql("CREATE TABLE IF NOT EXISTS todo " +
        "(todoId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, " +
        "note VARCHAR(100) NOT NULL, " + 
        "state VARCHAR(100) NOT NULL, " + 
        "todoDate DATETIME NOT NULL)");
}); 
```

当我向该数据库添加值时（符号 = dd-MM-yyyy），看起来 todoDate 作为字符串添加到数据库中。当我使用以下查询从数据库中收集和排序一些 todoDate 值时，这些值的排序顺序错误：

```
sql = "select * FROM todo order by todoDate asc"; 
```

输出：

```
 todoId -     note        - state         - todoDate  
             3      -     blabla      - someinfo     - 01-01-2013
             1      -     blabla      - someinfo     - 22-09-2012
             2      -     blabla      - someinfo     - 25-10-2012 
```

我想得到以下订单：

```
 todoId -     note        - state         - todoDate  
             1      -     blabla      - someinfo     - 22-09-2012
             2      -     blabla      - someinfo     - 25-10-2012
             3      -     blabla      - someinfo     - 01-01-2013 
```

我怎样才能做到这一点？

我找到了函数 str_to_date 但它不起作用或我做错了什么。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T20:22:55.040

HTML5 Web SQL 数据库实际上是底层的 SQLite。[SQLite 没有 DATETIME 类型](http://www.sqlite.org/datatype3.html)。如果您向他们发送字符串，它会将它们存储为字符串。SQLite 建议您使用 ISO-8601 规范格式（例如“2012-09-22”），以便按预期进行比较。SQLite 提供了一堆有用的日期时间函数来处理数据库中的日期时间值。见[这里](http://www.sqlite.org/lang_datefunc.html)。或者，您可以存储毫秒，但我个人更喜欢存储字符串，因为它们是人类可读的，有助于调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:15:15.583

```
Like that query you can fire :
select * from (select column1,...,convert(date,column) from table) as a order by dateColumn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:59:25.050

我找到了解决方案。

这是代码：

```
SELECT * FROM tablename ORDER by substr(dateColumn,7)||substr(dateColumn,4,2)||substr(dateColumn,1,2); 
```

# java - 将子类型对象存储在 AppEngine 数据存储区的列表中

> ID：12620731
> 
> 赞同：1
> 
> 时间：2012-09-27T11:50:29.013
> 
> 标签：java, google-app-engine, subclass

我正在尝试使用数据存储 API 创建单个排序对象列表。（它在一个列表中的原因是因为对象在写入时是有序的——它基本上就像一个美化的 LOG 文件）。

我的问题是我想存储在列表中的东西是我定义的接口/抽象类的子类型。

我有一个使用我的 SQL 的当前商店，它看起来像：ID、组 ID、序列号、子类的序列化字符串。

我希望通过将其推送到数据存储中，我不必序列化，而是可以存储对象。但我现在有点不确定这是最好的方法。

注意。我使用的是直接数据存储 API，而不是 JDO/JPA 等。

我想一个选择是继续序列化 - 我不清楚对 AppEngine 上的各种序列化方法的支持有多好？我想我可以存储为字节数组 - 直接使用可串行化接口写入？

或者，我可以存储一些主元列表，并将每个对象子类型存储为它自己的实体 - 我不确定能否引用它，以及速度影响？我有大约 100 种不同的子类型需要存储。

有人对如何做到这一点有任何建议吗？

这似乎是一个非常基本的问题——我认为使用 noSQL 数据存储自然不会有问题——但我对这整个概念很陌生——直到现在我还是一个关系数据库人:)

谢谢！！

***更新/编辑***

嗯，我刚刚重新阅读了实体/查询等的文档页面......我想我可能落入了关系数据库思考者的陷阱......

实体下的一节指出：

注意：数据存储区实体是无模式的：与传统的关系数据库不同，App Engine 数据存储区不要求给定类型的所有实体都具有相同的属性，或者给定属性的所有实体值都必须具有相同的数据类型。如果需要一个正式的模式，应用程序本身负责确保实体符合它；为此，Python SDK 包含丰富的数据建模功能库。

我认为这意味着我可以将所有子类存储在接口的“实体”引用下，例如..

A 类扩展 Z

B 类扩展 Z

将 A 类和 B 类保存为实体“Z”。不另存为实体 A 和实体 B。

似乎并不关心大多数属性等完全不同:)

这是正确的吗？出于理智，任何人都可以验证这确实是在这种情况下所期望的吗？

# android - httpclient.Execute 在 Android 上很慢

> ID：12620733
> 
> 赞同：2
> 
> 时间：2012-09-27T11:50:39.627
> 
> 标签：android

我正在使用 httpclient.execute(httppost) 大约需要 10 秒才能将一个小文件发送到我的网络服务器。当我使用手机上的网络浏览器上传相同的文件时，只需不到 1 秒。这是我的代码

```
 String urlString = "http://xxxxx/upload.php";

        HttpParams params = new BasicHttpParams();
        params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
        DefaultHttpClient httpclient = new DefaultHttpClient(params);
        HttpPost httppost = new HttpPost(urlString);

        File file = new File(pic);

        Log.d(TAG, "UPLOAD: setting up multipart entity");

        MultipartEntity mpEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        Log.d(TAG, "UPLOAD: file length = " + file.length());
        Log.d(TAG, "UPLOAD: file exist = " + file.exists());

        mpEntity.addPart("uploadedfile", new FileBody(file, "application/octet"));
     // mpEntity.addPart("id", new StringBody("1"));

        httppost.setEntity(mpEntity);
        Log.d(TAG, "UPLOAD: executing request: " + httppost.getRequestLine());
        Log.d(TAG, "UPLOAD: request: " + httppost.getEntity().getContentType().toString());

        HttpResponse response;
        try {
            Log.d(TAG, "UPLOAD: about to execute");
            response = httpclient.execute(httppost);
            Log.d(TAG, "UPLOAD: executed");
            HttpEntity resEntity = response.getEntity();
            Log.d(TAG, "UPLOAD: respose code: " + response.getStatusLine().toString());
            if (resEntity != null) {
                Log.d(TAG, "UPLOAD: " + EntityUtils.toString(resEntity));
            }
            if (resEntity != null) {
                resEntity.consumeContent();
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

Android上是否存在阻止从应用程序中快速上传文件的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:56:18.370

Android 团队建议使用[http://android-developers.blogspot.com/2011/09/androids-http-clients.html](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)`HttpUrlConnection`代替`HttpClient`

# java - java语法中用于区分>>（右移运算符）与嵌套泛型列表的技巧 >

> ID：12620736
> 
> 赞同：4
> 
> 时间：2012-09-27T11:50:43.443
> 
> 标签：java, generics, grammar

> **可能重复：**
> [Java 使用什么技巧来避免 >> 中的空格？](https://stackoverflow.com/questions/2808324/what-trick-does-java-use-to-avoid-spaces-in)

在**C++**中，嵌套参数需要额外的空格，因此您会看到如下内容：

```
List< List<String> > 
```

在**Java**中，不需要空格，可以这样写：

```
List<List<String>> 
```

如果您愿意，可以使用额外的空格，但它们不是必需的。（在**C++**中，出现了一个问题，因为`>>`没有空格表示右移运算符。Java 通过语法中的技巧解决了这个问题。）

任何人都可以解释java语法中用来解决问题的技巧是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:44:48.913

Java语言规范与C++有同样的问题

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.2)

> 每一步都使用尽可能长的翻译，即使结果最终不会产生正确的程序，而另一个词汇翻译会。
> 
> 因此，输入字符 a--b 被标记化（第 3.5 节）为 a、-、b，这不是任何语法正确程序的一部分，即使标记化 a、-、-、b 在语法上可能是 a 的一部分正确的程序。

根据规范，这意味着`>>`应始终被识别为一个令牌，而不是两个。`>`

这可能是一个（微不足道的）规范错误，因为 Java 阵营中没有人真正遵循这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:27:54.613

假设 Java 使用实际的语法，而不是一些手工编码的令牌提取不匹配（一个安全的假设），这是因为解析器试图找到参数化的结尾，并且它不考虑第二个尖括号。

这是一个可能的语法（不太可能是实际使用的语法，而且我已经多年没有为任何东西编写语法了，所以任何想要编辑的人都应该感到自由）：

```
typeref          : classname
                 | classname paramaterization

parameterization : '<' typeref '>' 
```

只有某些地方`typeref`会出现 a：变量/参数声明、强制转换或在`new`运算符之后。解析器看到左尖括号，因此知道它正在处理参数化类型。该参数化以*单个*闭合尖括号结束。

但是，定义是递归的。如果它看到另一个开放的尖括号，它知道它在另一个参数化中。然而，再一次，内部参数化以*单个*右尖括号结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:57:25.903

我的猜测（我会这样做）是 Java 在解析代码时查找对，例如 ()、{}、[]、<>、>>、<< 是对。

因此，在解析代码时，如果已经读取了该对中的第一个字符，那么它会继续寻找该对中的第二个字符，一旦找到，它就会从下一个字符开始处理。

所以当它看到第一个 > 时，`List<List<String>>`它认为它是第二个 < 的补充，依此类推。

我认为 C++ 也可以做这样的事情，但他们更喜欢可读性... :)

# silverlight - Silverlight ScrollViewer 损坏焦点逻辑

> ID：12620741
> 
> 赞同：0
> 
> 时间：2012-09-27T11:50:54.427
> 
> 标签：silverlight, xaml, scrollviewer

我的 XAML：

```
 <Grid Background="White">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="1*"/>
      <ColumnDefinition Width="1*"/>
    </Grid.ColumnDefinitions>
    <ScrollViewer Grid.Column="0">
      <StackPanel>
        <Grid Margin="5" Background="LightGray">
          <TextBlock>Grid1</TextBlock>
        </Grid>
        <TextBlock Margin="5">TextBlock1</TextBlock>
        <CheckBox Margin="5">CheckBox1</CheckBox>
        <Button Margin="5">Button1</Button>
      </StackPanel>
    </ScrollViewer>
    <StackPanel Grid.Column="1">
      <Grid Margin="5" Background="LightGray">
        <TextBlock>Grid2</TextBlock>
      </Grid>
      <TextBlock Margin="5">TextBlock2</TextBlock>
      <CheckBox Margin="5">CheckBox2</CheckBox>
      <Button Margin="5">Button2</Button>
    </StackPanel>
  </Grid> 
```

这给出了这个输出：

![用户界面输出](../Images/160237cc6c9a429a28a3f999504aeabb.png)

这是我的问题。如果*Button2*具有焦点，单击*Grid2*或*TextBlock2*将不会改变焦点。但是，如果*Button1*具有焦点并单击*Grid1*或*TextBlock1*，则焦点将从*Button1*中移除。为什么？*对我来说，当你用ScrollViewer*包围面板时，焦点逻辑似乎被破坏了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:22:14.980

我可以部分回答你...

这不是`ScrollViewer`打破焦点，当您使用 a`ScrollViewer`作为容器并单击某个没有控件能够获得焦点的地方时，`ScrollViewer`它本身就会获得焦点，因此为了避免获得焦点，`ScrollViewer`您可以禁用`IsTabStop`它的属性。

我试过这个，当你点击一个没有像or`ScrollViewer`那样的焦点处理的控件时没有获得焦点，但是焦点仍然表现得很奇怪，这就是我之前说“部分”的原因。`Grid``Textblock`

设置`IsTabStop`为`false`打开`ScrollViewer`并亲自查看...

另外，你可以看看[这篇](https://stackoverflow.com/questions/4964049/getting-a-notification-when-focus-changes-in-silverlight-4)文章，其中一个人提出了一种实现“焦点检查器”的方法，它只是几行代码。

# git - 如何查看将在合并分支时引入的新文件？

> ID：12620747
> 
> 赞同：1
> 
> 时间：2012-09-27T11:51:24.407
> 
> 标签：git

想象一个名为 A 的分支。我们从中分出一个名为 B 的分支，然后我们提交内容。一些提交正在修改现有文件，而其中一些将引入新文件。

如果我从 B 切换回 A，有没有办法找出合并时 B 会引入哪些新文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:14:06.380

您可以运行`git merge --no-commit --no-ff B`，然后查看更改然后回滚，或者您可以`git diff`在 A 和 B 分支中的最后一次提交之间尝试并检查此差异以查看新文件。如果你的分支 B 是从分支 A 的 HEAD 分支出来的，那么应该不会有任何冲突`git diff`运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:27:02.983

The `--stat` option for `git diff` will give you a list:

```
git diff --stat A..B 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T22:32:32.900

使用`--diff-filter=[(A|C|D|M|R|T|U|X|B)…[*]]`选项`git diff`过滤掉`A`添加的文件，或者对您来说重要的文件。

# python - 在循环中运行两个相互依赖的线程

> ID：12620748
> 
> 赞同：1
> 
> 时间：2012-09-27T11:51:26.607
> 
> 标签：python, multithreading

我需要知道如何编写一个运行两个线程的程序： 1\. 一个线程更新对象的位置（值） 2\. 一个线程根据第一个线程的值在其中运行两个方法 所有这些都在一个循环

这是我拥有的当前代码，我想按照我的描述进行更改，而不是值来自 valueList 并且 activate(valueList) 是一个包含几个较小方法的方法。如果您不介意，我很想举个例子来解决这个问题。谢谢

```
client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client_socket.connect(('59.191.193.42',5555))

screenw = 0
screenh = 0
while 1:
    client_socket.send("loc\n")
    data = client_socket.recv(8192)
    valueList = data.split()

    if (not(valueList[-1] == "eom" and valueList[0] == "start")):
        #print "continuing.."
            continue

        if(screenw != int(valueList[2])):
            screenw = int(valueList[2])
            screenh = int(valueList[3])

    activate(valueList) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:53:09.447

正如其他人指出的那样，看起来线程实际上并不能解决您的问题。特别是因为 Python 代码受制于[Global Interpreter Lock](http://docs.python.org/c-api/init.html#threads)，这基本上意味着只有当您的代码受 IO 限制（从磁盘读取大文件、等待慢速网络连接等）时，theading 才会对您有所帮助。如果您的程序是 CPU 密集型的，并且您真的想利用并行处理，那么[多处理](http://docs.python.org/library/multiprocessing.html)就是要走的路。使用多处理，您可以用一些内存开销和一点延迟（在创建进程时和进程间通信期间）来换取利用多核 CPU 的能力。

如果并行处理确实对您的程序有用，或者您只是好奇，我将提供以下代码示例。免责声明，我并没有尝试导入这个模块，所以认为它是伪代码。

```
import socket
from multiprocessing import Process, Queue, Value
from ctypes import c_bool

HOST = '198.51.100.0'
PORT = 8080

# This function will be run in a child process
def update_proc(data_queue, update_queue, quit_flag):
    while not quit_flag.value:
        data = data_queue.get()
        # do something with the data...
        update_queue.put(data)
    print "Closing child update process"

# This function will be run in a child process
def activate_proc(update_queue, quit_flag):
    while not quit_flag.value:
        data = update_queue.get()
        # do something with the data...
    print "Closing child activate process"

# main process begins execution here, if module is run from the terminal
if __name__ == "__main__":
    # Connect to remote host over TCP
    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client.connect((HOST,PORT))

    # Set up a Queue to pass data to the update process, and another one
    # for the two children to communicate
    data_queue = Queue()
    update_queue = Queue()

    # The quit_flag Value is a *very* primitive way to signal the child 
    # processes to quit. I'm sure there are better ways to do this, but I'm 
    # tired and can't think of any right now.
    quit_flag = Value(c_bool, False)

    # Create two child processes, pass a reference to the Queue to each
    update = Process(target=update_proc, args=(data_queue, update_queue, quit_flag))
    activate = Process(target=activate_proc, args=(update_queue, quit_flag))

    update.start()
    activate.start()

    # Read data from the TCP socket, push it onto the data_queue
    while True:
        client.sendall("loc\n")
        data = client.recv(8192)
        if not data:
            print "network connection closed by client"
            break
        data_queue.put(data)

    # Join with child processes before closing
    print "All done, closing child processes"
    update.join()
    activate.join() 
```

# c++ - 为什么 -2147483648 和 (int)-2147483648 不同

> ID：12620753
> 
> 赞同：10
> 
> 时间：2012-09-27T11:51:43.460
> 
> 标签：c++, integer, overflow

当我在 Windows7 x64 下运行以下代码时，使用 MinGW 的 GCC 编译，结果似乎下溢：

```
cout<<-2147483648 ;    //Output: 2147483648 
```

但是当我将它分配给一个整数变量时，或者只是将它转换为 int 类型：

```
cout<<(int)-2147483648 ; //Output: -2147483648 
```

那么，我的代码的以前版本有什么问题？不是int类型吗？或者整数的下限到底是多少？非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T11:57:13.923

2147483648 不适合您系统上的 int 或 long，因此它被视为 unsigned long 类型的常量。（编辑：正如 ouah 在评论中指出的那样，它在标准 C++ 中是未定义的行为，但您的编译器将其作为扩展接受。）对无符号整数值取反是可能的，但会产生另一个无符号整数值，而不是负数。否定 2147483648UL 会产生 2147483648UL （假设，就像您的系统上的情况一样，unsigned long 是 32 位类型）。

将其转换为`int`产生实现定义的结果，通常是您看到的结果，但不一定。您可以通过编写 -2147483647 - 1 获得您想要的结果而无需任何转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T12:32:27.237

> 那么，我的代码的以前版本有什么问题？

据推测，您使用的是 2011 年之前的编译器，并且在您的系统`long`上有 32 位。值 (-2 ^(31) ) 不能保证适合`long`，因此它可能会溢出。这给出了未定义的行为，所以你可以看到任何东西。

^(对于您看到的特定值 (2 31) ) ，最可能的解释是，在 C++ 中没有定义行为的情况下，您的编译器使用旧的 C90 规则，并将值转换为`unsigned long`.

> 不是int类型吗？

在 2011 年之前，`int`如果值可以由 表示`int`，否则`long`，如果这还不够，则具有未定义的行为。C++11 添加了类型，如果不够大，`long long`则允许将其用于整数文字。`long`

> 或者整数的下限到底是多少？

N 位的有符号整数类型的范围至少为 -2 ^((N-1)) +1 到 2 ^((N-1)) -1。您的值是 -2 ^(31)，这超出了 32 位有符号类型的范围。

该语言没有指定整数类型的确切大小。只是它`int`必须至少有 16 位、`long`至少 32 位和（自 2011 年以来）`long long`至少 64 位。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T13:10:40.097

首先，重要的是要了解[没有负整数文字](https://stackoverflow.com/questions/8511598/large-negative-integer-literals)。

其他人已经解释了为什么 OP 的特定编译器的行为如此。但为了记录，这是编译器在 32 位系统上*应该*做的，字里行间：

*   您有数字 2147483648，它不适合 32 位有符号`int`二进制补码格式。
*   由于它是一个十进制数（没有 U、L 或类似的后缀），编译器会检查其内部类型表 (1) 中是否有这样的整数常量。它的工作原理是这样的：尝试将其放入 an `int`，如果不适合，请尝试 a `long`，如果它也不适合那里，请尝试 a `long long`，如果它也不适合那里，我们有未定义的行为。遵循最新标准的 AC 或 C++ 编译器*不会*尝试将其适应无符号类型。
*   在这种特定情况下，数字既不适合 a`int`也不适合 a `long`，因此编译器决定使用 a`long long`作为文字的类型。
*   然后，您在此文字上使用一元减号运算符，以数字 -2147483648 结尾。具有讽刺意味的是，这将适合二进制补码格式的有符号整数，但是更改类型为时已晚，编译器已经选择`long long`了类型。

* * *

(1) 如果你有一个无符号后缀，或者你有十六进制格式等，这个“内部表”看起来会有所不同。如果有一个无符号后缀，它只会检查数字是否适合无符号数字。如果有十六进制表示法（但没有后缀），它将检查 int，然后是 unsigned int，然后是 long 等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T04:42:57.197

实际上，我从 CS:APP 的 pdf 文件中找到了一个解释，它完美地给出了解决方案，你可以从这里下载。[http://www.csapp.cs.cmu.edu/public/waside/waside-tmin.pdf](http://www.csapp.cs.cmu.edu/public/waside/waside-tmin.pdf)

# ios - iOS Paypal MPL 开发人员错误

> ID：12620759
> 
> 赞同：5
> 
> 时间：2012-09-27T11:52:10.890
> 
> 标签：ios, objective-c, paypal

我的 PayPal MPL 集成一直正常工作，今天停止工作。我的初始原型没有进行任何代码更改，它也停止了工作。

我在这里看到过类似的问题，但没有一个能解决我的问题。

我升级到新的 1.6 MPL 但它给出了同样的错误。

```
Checking Error********************
Posting Error: 2147483647
DEVELOPER ERROR: This app not using a supported version of the PayPal library. 
```

有没有其他人经历过这个？

我正在运行 Xcode 4.5，这发生在 iOS 5 和 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:48:38.927

Sorry folks - this is now resolved. Please download the updated libraries from X.com: [https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index?qt-paypal_sdk_index=2#qt-paypal_sdk_index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index?qt-paypal_sdk_index=2#qt-paypal_sdk_index)

# ios - 接受应用程序时选择“不立即”会导致“com.facebook.sdk error2”

> ID：12620760
> 
> 赞同：4
> 
> 时间：2012-09-27T11:52:17.950
> 
> 标签：ios, facebook, facebook-ios-sdk

*使用 Facebook iOS SDK 3.1。*

When choosing not to allow a 'Connect' to a Facebook app, I'm stuck with Facebook throwing "com.facebook.sdk error2." 即使在重新安装我的应用程序之后，我也会出现错误。

重现步骤：

1.  选择与 Facebook 联系
2.  `UIAlertView`在弹出的对话框中选择“Not Now”

=> 我无法选择再次连接。

用户再次连接的唯一方法是从“设置”中删除她的 Facebook 帐户并重新添加。

这是[Facebook SDK 中的错误](http://developers.facebook.com/bugs/387524091319987)还是我遗漏了什么？

*我显然遵循了授权教程，并且在选择连接时一切正常（授权，发布内容）。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T13:10:36.103

好的，所以我知道这里发生了什么。当拒绝应用程序授权时，这将作为设置存储在您设备的 Facebook 帐户中（设置 > Facebook）。

通过转到设置并重新启用有问题的应用程序，您可以尝试再次连接。对用户来说不是很清楚，但是您可以捕获此错误并向用户显示某种信息。

这就是我实现它的方式（与[Facebook 的默认错误处理](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)相比）：

```
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState)state
                      error:(NSError *)error {
....

if (error) {
        NSString *errorTitle = NSLocalizedString(@"Error", @"Facebook connect");
        NSString *errorMessage = [error localizedDescription];
        if (error.code == FBErrorLoginFailedOrCancelled) {
            errorTitle = NSLocalizedString(@"Facebook Login Failed", @"Facebook Connect");
            errorMessage = NSLocalizedString(@"Make sure you've allowed My App to use Facebook in Settings > Facebook.", @"Facebook connect");
        }

        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:errorTitle
                                                            message:errorMessage
                                                           delegate:nil
                                                  cancelButtonTitle:NSLocalizedString(@"OK", @"Facebook Connect")
                                                  otherButtonTitles:nil];
        [alertView show];
    } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:30:45.493

当我在设置中添加帐户时尝试使用 Facebook 框架登录 Facebook 时遇到了同样的问题，但我使用以下代码解决了这个问题：

据我所知“com.facebook.sdk error2”。当在 iphone 中添加了一个帐户时。

应用代理.h

@property（强，非原子） FBSession *mysession;

只需在 appdelegate.m 中添加方法

```
-(void)openSessionWithAllowLoginUI:(BOOL)allowLoginUI{

    if (!self.mysession.isOpen) {
        // create a fresh session object
        self.mysession = [[FBSession alloc] initWithPermissions:permissions];
    }

        [self.mysession openWithCompletionHandler:^(FBSession *session,
                                                    FBSessionState stat,
                                                    NSError *error){
            [self sessionStateChanged:session
                                state:stat
                                error:error];
         NSLog(@"Session Staet is = %u",stat);

            switch (stat){
                case FBSessionStateClosed:
                    break;
                case FBSessionStateOpen:{
                        NSString *strAccessToken1 = [mysession accessToken];
                        NSLog(@"AccessToken = %@",strAccessToken1);
                        NSString  *urlstring1 = [NSString stringWithFormat:@"https://graph.facebook.com/me?access_token=%@",strAccessToken1];

                        NSURL *url1 = [NSURL URLWithString:[urlstring1 stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
                        NSString  *jsonRes = [NSString stringWithContentsOfURL:url1 encoding:NSUTF8StringEncoding error:nil];
                        NSDictionary *facebookData = [jsonRes JSONValue];
                        NSLog(@"FBSessionStateOpen = %@",facebookData);

                        NSString *strFBID = [[NSString alloc]initWithString:[NSString stringWithFormat:@"%@",[facebookData objectForKey:@"id"]]];

                        NSString *strName = [[NSString alloc]initWithString:[facebookData objectForKey:@"name"]];

                        NSLog(@"FBSessionStateOpen = %@",strName);

                        NSString *ProfileImageURL = [NSString stringWithFormat:@"https://graph.facebook.com/%@/picture",strFBID];

                        NSLog(@"Profile image URL is = %@",ProfileImageURL);

                        NSString *strImageURl = [[NSString alloc]initWithString:ProfileImageURL];

                        strAccessToken = [[NSString alloc]initWithString:strAccessToken1];
                        strAppUserName = [[NSString alloc]initWithString:strName];
                        strFacebookUsername = [[NSString alloc]initWithString:strName];
                        strAppUserProfileImage = [[NSString alloc]initWithString:strImageURl];
                        strFacebookUserId = [[NSString alloc]initWithString:strFBID];

                    break;
                }
                default:
                    break;
            }
      }];
} 
```

这在我的行动方法中

```
-(IBAction)Facebook_Btn_Clicked:(id)sender{
        [appDelegate openSessionWithAllowLoginUI:YES];

      } 
```

# javascript - 将带有图像的 HTML5 画布保存为图像

> ID：12620763
> 
> 赞同：5
> 
> 时间：2012-09-27T11:52:43.340
> 
> 标签：javascript, html, canvas

我正在尝试将带有图像的画布保存为 PNG，但是当我尝试这样做时：

```
var myCanvas = document.getElementById("myCanvas");
var img = document.createElement('img');
var ctx = myCanvas.getContext ? myCanvas.getContext('2d') : null;
img.src = 'image.png';

img.onload = function () {  
    ctx.drawImage(img, 0, 0, myCanvas.width, myCanvas.height);
}

var data = myCanvas.toDataURL("image/png");
if (!window.open(data)) {
    document.location.href = data;
} 
```

我只得到一个没有图像的空白透明图像。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T11:55:28.220

您需要将`window.open`调用放在负载处理程序中，因为这是*异步*发生的。

```
img.onload = function () {  
    ctx.drawImage(img, 0, 0, myCanvas.width, myCanvas.height);

    var data = myCanvas.toDataURL("image/png");
    if (!window.open(data)) {
        document.location.href = data;
    }
} 
```

# linux - 在 apache2 网络服务器中更改密码 - 摘要式身份验证

> ID：12620764
> 
> 赞同：0
> 
> 时间：2012-09-27T11:52:44.070
> 
> 标签：linux, apache, apache2, digest-authentication

我正在尝试更改站点的密码，并且它正在使用摘要身份验证。

我尝试使用以下命令

```
 $ htdigest /home/micke/users/.htdigest Ideometrics guest 
```

并重新启动 apache2 服务器，但它不工作。我按照[教程](http://www.freebsdwiki.net/index.php/Apache,_Digest_Authentication)进行操作-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:34:22.210

首先你可以看到 htdigest 密码文件的内容，比如；

```
$ cat /home/micke/users/.htdigest 
```

并确保领域名称正确。如果是; 那你至少应该试试；

```
$ htdigest /home/micke/users/.htdigest 'Ideometrics' 'guest' 
```

或者

```
$ htdigest /home/micke/users/.htdigest 'ideometrics' 'guest' 
```

在任何情况下，域名都是区分大小写的，您还应该确保 .htaccess 中的 AuthName 指令是相同的区分大小写的域名。

# django - 表格问题

> ID：12620771
> 
> 赞同：0
> 
> 时间：2012-09-27T11:53:00.767
> 
> 标签：django, django-forms

如果我想在同一页面上显示注册和登录表单怎么办？

我可以通过 url.py 做到这一点，还是必须使用多种形式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:31:59.617

超级简单的方法就是将注册表单硬写到登录模板文件中，然后将数据发布到注册 URL。对我来说很好。

# r - 从多个以插槽为条件的实例中选择一个类的实例？

> ID：12620775
> 
> 赞同：1
> 
> 时间：2012-09-27T11:53:07.780
> 
> 标签：r, oop, s4

假设我有一个`S4`类的几个实例，就像在这个例子中一样。

```
setClass("myClass",representation(name = "character",
          description = "character")

my1 <- new("myClass",name = "my1",description = "Some test.")
my2 <- new("myClass",name = "my2",description = "Some try.")
my3 <- new("myClass",name = "my3",description = "Some more elaborate test.") 
```

我想返回包含单词的所有类的名称（即名称槽或对象名称）`test`。如果我只`grep`在单个插槽上使用它确实可以部分工作：

```
grep("test",my1@description,value=T) 
```

我最终得到了整个表达式“一些测试”。当然，我可以将所有这些插槽放在一个列表中并应用于它们。但我仍然只是以描述本身结束，而不知道它们属于哪个名称。

那么，我怎样才能找到我想要的实例呢？

你宁愿在一个单独的环境中组织一堆类的实例还是一个实例列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:53:39.167

此命令将查找实例：

```
unlist(eapply(.GlobalEnv,
              function(x)
                if (class(x)[1] == "myClass")
                  if (any(grep("test", x@description))) return(x@name))) 
```

检查全局环境中每个对象的类。如果是`myClass`并且`description`槽包含`"test"`，则槽中的值`name`和对象名称都将被返回。

您的示例的输出：

```
 my1   my3 
"my1" "my3" 
```

# uibutton - 如何使界面生成器中的 UIButton 与 4 英寸 iPhone 兼容

> ID：12620777
> 
> 赞同：0
> 
> 时间：2012-09-27T11:53:23.560
> 
> 标签：uibutton, storyboard, ios6, segue, xcode4.5

我刚刚安装了 Xcode 4.5 并尝试学习新功能和工具。

我从情节提要中设置了一张背景图片，并检查了是否`'Apply retina 4 factor'`正常`'Apply retina 3.5 factor'`工作。它工作正常。

我放了一个`UIButton`，但它没有改变它的位置，看起来像这样

![在此处输入图像描述](../Images/cffae8db9781f55be91317fabc01e9ab.png)

![在此处输入图像描述](../Images/b276ce26a52a92c9bd9c96c980c41060.png)

任何人都可以帮助我吗？
提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:43:46.673

解决了这个问题。

只需要查看`Auto Layouts`and `Constraints`。
[这](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)是对我有用的链接。
希望它也对其他人有所帮助！:)

# ruby-on-rails - API 凭据与 paypal_permissions gem 不正确

> ID：12620782
> 
> 赞同：1
> 
> 时间：2012-09-27T11:53:45.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paypal, paypal-sandbox

我正在使用[https://github.com/moshbit/paypal_permissions](https://github.com/moshbit/paypal_permissions)获取我的应用程序的卖家权限。

所有方法都工作正常，但是当我尝试使用方法时`get_basic_personal_data`，`get_advanced_personal_data`我在日志中得到了这个响应：

```
{:raw_response=>"responseEnvelope.timestamp=2012-09-27T04%3A36%3A17.904-07%3A00&response
Envelope.ack=Failure&responseEnvelope.correlationId=3baaaa7435436&responseEnvelope.build
=2210301&error(0).errorId=520003&error(0).domain=PLATFORM&error
(0).subdomain=Application&error(0).severity=Error&error(0).category=Application&error
(0).message=Authentication+failed.+API+credentials+are+incorrect.", :errors=>
[{:parameters=>[], :error_id=>"520003", :domain=>"PLATFORM", :subdomain=>"Application",
 :severity=>"Error", :category=>"Application", :message=>"Authentication failed. API
 credentials are incorrect."}], :personal_data=>{},
:timestamp=>"2012-09-27T04:36:17.904-07:00", :ack=>"Failure", :correlation_id=>"3baaaa7435436"} 
```

[您可以在https://github.com/moshbit/paypal_permissions/blob/master/examples/app/controllers/merchants_controller.rb](https://github.com/moshbit/paypal_permissions/blob/master/examples/app/controllers/merchants_controller.rb)上看到这些方法

这些是我的3个方法在我的`users_controller.rb`+最后的方法`get_basic_personal_data`：

```
def request_permissions_callback
    callback_url = URI.encode(response_permissions_callback_user_url(current_user))
    permissions = 'REFUND, ACCESS_BASIC_PERSONAL_DATA'
    paypal_response = ::PAYPAL_PERMISSIONS_GATEWAY.request_permissions callback_url, permissions
    if paypal_response[:ack] == 'Success'
      session[:id] = current_user.id
      request_token = paypal_response[:token]
      session[:request_token] = request_token
      url = ::PAYPAL_PERMISSIONS_GATEWAY.redirect_user_to_paypal_url(request_token)
      redirect_to url
    else
      #render :text => paypal_response.inspect
      # handle error
      format.html { redirect_to requirements_to_sell_user_path(current_user), alert: t(".permissions_wrong") }
    end
end

def response_permissions_callback
  session[:request_token_verifier] = params[:verification_code]
  get_access_token
  logger.info get_basic_personal_data(current_user).inspect
  p get_basic_personal_data(current_user).inspect
  respond_to do |format|
    if get_access_token == true
     format.html { redirect_to requirements_to_sell_user_path(current_user), notice: t(".refund_permissions_success") }
    elsif get_access_token == false
     format.html { redirect_to requirements_to_sell_user_path(current_user), alert: t(".refund_permissions_wrong") }
    end 
  end
end

def get_access_token
    request_token = session[:request_token]
    verifier = session[:request_token_verifier]
    paypal_response = ::PAYPAL_PERMISSIONS_GATEWAY.get_access_token request_token, verifier
    if paypal_response[:ack] == 'Success'
      current_user.update_attributes({
        :ppp_access_token => paypal_response[:token],
        :ppp_access_token_verifier => paypal_response[:token_secret],
      })
      return true
    else
      return false
    end
end

def get_basic_personal_data(current_user)
    access_token = current_user.ppp_access_token
    verifier = current_user.ppp_access_token_verifier
    ::PAYPAL_PERMISSIONS_GATEWAY.get_basic_personal_data(access_token, verifier)
 end 
```

*   （`request_permissions_callback`向贝宝发出请求，用户被重定向到贝宝权限页面。）
*   `response_permissions_callback`收到来自贝宝的响应并调用以`get_access_token`更新我的 mongodb 数据库上的数据。

当卖家从贝宝权限帐户返回时，我收到错误日志

`logger.info get_basic_personal_data(current_user).inspect`

在`get_access_token`被触发之后，我可以在我的数据库中看到正确的标记，用于在`get_basic_personal_data`方法上使用之后：

```
ppp_access_token: "ZlM-jt4LQUxQZDozxkH29I53QyXShtziJIbPlCk3m35i65iLiqVf7w", ppp_access_token_verifier: "wJd3uuP5ymyWAqiUf2qaVCPTMsk" 
```

**如果其他 3 种方法工作正常且 api 凭据正确，为什么我在此方法中出现此错误？，错误在哪里？**

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:31:46.237

感谢马克的帮助：D。

错误在我的`development.rb`文件中。

您可以评论或删除`ActiveMerchant::Billing::Base.mode = :test`行，现在工作正常。

```
Myapp::Application.configure do
  config.after_initialize do
    #ActiveMerchant::Billing::Base.mode = :test
    permissions_options = {
     :login => 'myapp_api1.gmail.com',
     :password => 'mypassword',
     :signature => 'mysignature',
     :app_id => 'APP-80W284485P519543T',  # This is the app_id for all PayPal Permissions Service sandbox test
     apps
    }
    ::PAYPAL_PERMISSIONS_GATEWAY = ActiveMerchant::Billing::PaypalPermissionsGateway.new(permissions_options)
  end
end 
```

非常感谢！

# android - StandOutWindow Spinner 无法添加窗口——令牌为空

> ID：12620784
> 
> 赞同：1
> 
> 时间：2012-09-27T11:54:03.097
> 
> 标签：android, android-layout, android-widget, android-spinner

我浏览了整个互联网，并且我很清楚 stackOverflow 中关于这个主题的线程，但没有一个对我有帮助。

在我的应用程序中，我使用 Standout 开源库来启用非全屏窗口，基本上它的作用是创建框架布局并显示它

```
WindowManager.addView(View view, LayoutParams params) 
```

在 FrameLayout 我有 Spinner 视图来显示下拉列表。当我启动应用程序时，它一切正常，我可以看到 FrameLayout 和微调器，但是当我触摸微调器时，应用程序崩溃并出现错误：“无法添加窗口 - 令牌 null 不适用于应用程序”

我没有使用 getApplicationContext() 的任何代码行，虽然 Standout 库有，但我将它们更改为指向“this”，但它仍然崩溃。

谁能帮我？

**编辑：**它只发生在 2.3.5 设备上（根据我的检查），在 4.1 上工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:52:52.533

这是因为 Standout 窗口不是一个活动。它只是一个 AlertWindow 类型。单击 Spinner 将尝试显示一个假定从活动启动的对话框。但事实并非如此。然后发生应用程序崩溃。要解决此问题，您必须扩展 Spinner 以显示列表视图对话框，如用户单击 Spinner 时显示的 Spinner。尝试以下代码以显示非活动类的对话框：

```
 public class MySpinner extends Spinner {
    @Override
    public boolean performClick() {

      // the spinner click is handled here
        selectedPosition = getSelectedItemPosition();
        Dialog dialog = getDialog();
        Window window = dialog.getWindow();
        window.getAttributes().type = WindowManager.LayoutParams.TYPE_SYSTEM_ALERT;
        dialog.show();
      }
      return true;
    }

  private Dialog getDialog() {
       AlertDialog.Builder builder = new AlertDialog.Builder(getContext());

       View dialogView = inflate(getContext(),R.layout.spin_dialog, null);
       builder.setView(dialogView);

       // show the Spinner array list in a listview
       ListView listview = (ListView) dialog.findViewById(R.id.spin_list);
       listview.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
       listview.setOnItemClickListener(this);
       ArrayAdapter adapter = new ArrayAdapter(getContext(), R.layout.list_item, spinner_array_list);

      // here is your spin adapter
      listview.setAdapter(adapter);

      builder.setOnCancelListener(new DialogInterface.OnCancelListener() {
         @Override
         public void onCancel(DialogInterface dialog) {
              dialog.dismiss();
         }
      });
      AlertDialog dialog = catBuilder.create();
      return dialog;
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T17:09:14.317

我有同样的问题。解决方案相当简单。您只需要在布局 XML 文件中添加：

```
android:spinnerMode="dropdown" 
```

所以你的微调器元素看起来像这样：

```
<Spinner
        android:id="@+id/spLists"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_weight="1"
        android:spinnerMode="dropdown" /> 
```

# c# - 在html页面中显示网格？

> ID：12620785
> 
> 赞同：0
> 
> 时间：2012-09-27T11:54:04.937
> 
> 标签：c#, html

我正在尝试在 MVC 中的视图上显示网格。

我已经填充了一个 WebGrid，但我无法让它显示？

有人可以告诉我如何显示 webGrid 吗？

我的视图代码如下：

```
@model MvcResComm.Models.ReturnProperties 
@{
    ViewBag.Title = "ShowProperties";
}   
<h2>Select Property</h2> 

@using System.Dynamic
@{
    var result = new List<dynamic>();

    foreach (var emprow in Model.DDS)
    {
        var row = (IDictionary<string, object>)new ExpandoObject();
        Dictionary<string, object> eachEmpRow = (Dictionary<string, object>)emprow;

        foreach (KeyValuePair<string, object> keyValuePair in eachEmpRow)
        {
            row.Add(keyValuePair);
        }
        result.Add(row);
    }
    var grid = new WebGrid(result);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:59:02.393

```
@using System.Dynamic
<div>
@{
   var result = new List<dynamic>();

   foreach (var emprow in Model.DDS)
   {
       var row = (IDictionary<string, object>)new ExpandoObject();
       Dictionary<string, object> eachEmpRow = (Dictionary<string, object>)emprow;

       foreach (KeyValuePair<string, object> keyValuePair in eachEmpRow)
       {
           row.Add(keyValuePair);
       }
       result.Add(row);
   }
   var grid = new WebGrid(result);

 }
 @grid.GetHtml(
       tableStyle: "grid",
       headerStyle: "grid-header",
       alternatingRowStyle: "grid-alternating-row",
       selectedRowStyle: "grid-selected-row",
       rowStyle: "grid-row-style"
       )
 </div> 
```

网站.css

```
.grid
 {
   width: 50%;
   border: 0px;
   border-collapse: collapse;
 }

 .grid a
 {
   color: #000;
 }

 .grid-row-style td
 {
    text-align:center
 }

.grid-header th
{
    padding-right:20px;
    padding-left:20px;
}

.grid-alternating-row td
{
    text-align:center
}

.grid-header
{
   padding: 6px 5px;
   text-align: center;
   background-color: #e8eef4;
   border-bottom: 2px solid #3966A2;
   height: 40px;
   border-top: 2px solid #D6E8FF;
   border-left: 2px solid #D6E8FF;
   border-right: 2px solid #D6E8FF;
}

.grid-footer
{
   padding: 6px 5px;
   text-align: center;
   background-color: #e8eef4;
   border-top: 2px solid #3966A2;
   height: 30px;
   border-bottom: 2px solid #D6E8FF;
   border-left: 2px solid #D6E8FF;
   border-right: 2px solid #D6E8FF;
}

.grid-alternating-row
{
  height: 30px;
  background-color: #f2f2f2;
  border-bottom: 1px solid #d2d2d2;
  border-left: 2px solid #D6E8FF;
  border-right: 2px solid #D6E8FF;
}

.grid-row-style
{
  height: 30px;
  border-bottom: 1px solid #d2d2d2;
  border-left: 2px solid #D6E8FF;
  border-right: 2px solid #D6E8FF;
}

.grid-selected-row
{
  font-weight: bold;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:28:41.733

需要这条线

```
@grid.GetHtml() 
```

# android - 哪个版本的 Eclipse 最适合 Phonegap？

> ID：12620786
> 
> 赞同：1
> 
> 时间：2012-09-27T11:54:06.883
> 
> 标签：android, eclipse, cordova

我是一名 dotnet 开发人员，并且是 Eclipse 的新手。我正在使用 Eclipse Juno sdk 4.2 Android 和 Phonegap 我使用教程开发了我的第一个应用程序，但有很多困难。例如，IDE 中没有 HTML 语法支持。

我需要哪些步骤来支持 HTML Intellisense 和像 Eclipse Helios 一样的语法高亮，也许就像 dotnet 一样？我已经下载了 Eclipse Helios，但我认为它不支持 Android，下载 ADT 工具时会出错，而如果我尝试直接下载 Phonegap，则会出现错误“Android 未安装”，类似的。

你会建议我用什么方便的工具使用哪个 Eclipse 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:06:21.830

PhoneGap 的 AppLaud Eclipse 插件至少需要 Eclipse 3.6 (Helios)。它不适用于 3.5（伽利略）。该插件也适用于 3.7 (Indigo)。

所以最好有一个高于3.5的版本

确实，您可以在没有插件的情况下解决问题，但它使 PhoneGap 项目的启动更加容易。

并检查此链接以获取phonegap

[http://www.phonegap.com/developer#android](http://www.phonegap.com/developer#android)

[http://www.techrepublic.com/blog/australia/set-up-an-environment-for-android-eclipse-and-phonegap/207](http://www.techrepublic.com/blog/australia/set-up-an-environment-for-android-eclipse-and-phonegap/207)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:44:31.360

使用 Eclipse Juno (classic) 和 Apache Cordova (phonegap) 2.5 时，您可以启用语法高亮和代码完成：

帮助 -> 安装软件 使用... 选择您的 eclipse 版本 (juno) 在下面的选择框中滚动到条目“Web、XML、Java...”并展开它。

选择

Eclipse Java Web 开发者工具
Eclipse Web 开发者工具
Eclipse XML 开发者编辑器和工具
JavaScript 开发工具
网页编辑器

然后下一步安装它们。

现在您应该拥有 HTML、JS 语法高亮和代码完成功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T09:54:14.903

Android 提供了一个用于开发 Phonegap 应用程序的捆绑包。这是 ADT 捆绑包的链接

1) 只需下载最新的 ADT-Bundle pack [Mac](http://developer.android.com/sdk/index.html#mac-bundle)或[Windows 32bit](http://dl.google.com/android/adt/adt-bundle-windows-x86-20131030.zip)或[Windows 64bit](http://dl.google.com/android/adt/adt-bundle-windows-x86_64-20131030.zip)

2) 将MDS AppLaud 插件下载到Eclipse -> 帮助-> 安装新软件到[https://svn.codespot.com/a/eclipselabs.org/mobile-web-development-with-phonegap/tags/r1.2/下载](https://svn.codespot.com/a/eclipselabs.org/mobile-web-development-with-phonegap/tags/r1.2/download)

而已。

只需一次下载，ADT Bundle 就包含了您开始开发应用程序所需的一切：

```
Eclipse + ADT plugin
Android SDK Tools
Android Platform-tools
The latest Android platform
The latest Android system image for the emulator 
```

我强烈推荐将[括号](http://download.brackets.io/)用作代码编辑器。

# php - PHP 标题取决于一个变量

> ID：12620789
> 
> 赞同：2
> 
> 时间：2012-09-27T11:54:16.217
> 
> 标签：php

我试图显示一个取决于变量的标题，下面是我的代码：

```
<?php 
$id = $_GET["id"];
$title1 = 'Title 1';
$title2 = 'Title 2';
$title3 = 'Title 3';
?> 
```

现在如何打印`title2`if `id='2'`，例如`echo $title($id)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T11:55:31.187

将您的标题放入数组中不是更好吗？

```
$id = (int) $_GET["id"];
$title = array(
  1 => 'Title 1',
  2 => 'Title 2',
  3 => 'Title 3'
);

echo $title[$id]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T11:56:47.190

以下应该为您解决问题：

```
<?php 
    $id = $_GET["id"];
    switch($id)
    {
        case 1:
            $title = 'Title 1';
            break;
        case 2:
            $title = 'Title 2';
            break;
        case 3:
            $title = 'Title 3';
            break;
        default:
            $title = 'Something else';
            break;
    }

    echo $title;
?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T11:56:36.883

您可以使用 Array ：

```
$title = array(
     1 => 'Title 1',
     2 => 'Title 2',
     3 => 'Title 3'
); 
```

并让你的标题与你的 get ：

```
$title[$_GET['title']]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T11:57:41.097

```
<?php 
$id = $_GET["id"];
$title_var = 'title'.$id; // Save the whole name of the variable as a string

$title1 = 'Title 1';
$title2 = 'Title 2';
$title3 = 'Title 3';

echo $$title_var; // Note the double dollar sign for a variable-variable
?> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-27T12:00:41.510

你想使用类似的东西`echo ${"title{$id}"};`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-27T12:03:13.210

使用`$$`可能是聪明的主意，例如：

```
<?php 
$id=1;
$id = "title".$id;
$title1 = 'Title 1';
$title2 = 'Title 2';
$title3 = 'Title 3';
echo $$id;
?> 
```

# android - 检查 Wifi 时出现 java.lang.Securityexception

> ID：12620790
> 
> 赞同：3
> 
> 时间：2012-09-27T11:54:20.460
> 
> 标签：android, android-wifi

```
private void requestNewCoordinates() {          

        final WifiManager wfManager = (WifiManager) context
                .getSystemService(Context.WIFI_SERVICE);
             if (manager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)
                && wfManager.isWifiEnabled()) {
             }
}

  <uses-permission android:name="android.permission.ACCESS_GPS" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" /> 
```

什么时候`wfManager.isWifiEnabled() - java.lang.Securityexception`

告诉我出了什么问题..以及如何解决问题

[https://stackoverflow.com/a/9325388/1568164](https://stackoverflow.com/a/9325388/1568164) - 它有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:21:00.510

在您的清单中授予此权限

```
<uses-feature android:name="android.hardware.wifi" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />    
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:55:46.150

确保您已在清单文件中声明了`ACCESS_NETWORK_STATE`权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:59:21.867

在清单中授予权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" /> 
```

# asp.net - 当 UpdatePanel 在计时器上更新自身时，css 样式会丢失

> ID：12620801
> 
> 赞同：1
> 
> 时间：2012-09-27T11:55:21.470
> 
> 标签：asp.net, css, updatepanel

当更新面板刷新时，我在更新面板中的元素丢失样式时遇到问题。我知道这不是一个新问题，并且已经阅读了以下主题

[Someguys 关于它的博客](http://weblogs.asp.net/rajbk/archive/2007/01/14/updatepanel-and-css.aspx)

[还有另一个线程](https://stackoverflow.com/questions/1202390/how-can-i-add-a-css-class-to-an-updatepanel-in-asp-net)

可能的解决方法包括：用 div 包围更新面板，用 div 包围更新面板。

这在我的情况下实际上不起作用，因为我的更新面板中有几个元素，但我只想将样式应用于其中的两个元素，并且此方法使更新面板中的每个元素都反映样式。

任何建议，将不胜感激

-J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:06:35.373

您可以使用周围 div 上的类来控制 div 内元素的样式。在里面的一些元素上放置类来识别它们，并在周围的div上改变类来触发改变。

例子：

```
<div id="container" class="hide">
  This is the content that can change
  <div class="someelement">asf</div>
  <div>qwer</div>
  <div class="otherelement">uyhgf</div>
</div> 
```

您可以更改外部 div 上的类：

```
document.getElementById('container').className = 'show'; 
```

现在您可以设置 CSS 规则以根据外部类显示内部元素的更改：

```
.hide .someelement { display: none; }
.show .someelement { display: block; }
.hide .otherelement { color: yellow; }
.show .otherelement { color: black; } 
```

当计时器替换内容时，内部元素看起来仍然相同，因为控制外观的类位于外部 div 上。

# sql - 当我加入第二张桌子时，总和不正确

> ID：12620802
> 
> 赞同：6
> 
> 时间：2012-09-27T11:55:26.863
> 
> 标签：sql, sql-server-2008, join, sum

这是我第一次请求你的帮助，

实际上我必须创建一个查询，并为它做了一个类似的例子。我有两张桌子，

```
Report (ReportID, Date, headCount)
Production(ProdID, ReportID, Quantity) 
```

我的问题是使用这个查询，我得到一个错误的结果，

```
SELECT    
    Report.date, 
    SUM(Report.HeadCount) AS SumHeadCount, 
    SUM(Production.Quantity) AS SumQuantity
FROM         
    Report 
INNER JOIN
    Production ON Report.ReportID = Production.ReportID
GROUP BY
    Date
ORDER BY
    Date 
```

我猜有些行被数了不止一次，你能帮帮我吗？

**编辑**

如果我运行查询以获取按天分组的总人数，我会得到：

```
 date        Headcount
7/2/2012    1843
7/3/2012    1802
7/4/2012    1858
7/5/2012    1904 
```

我也得到了生产数量：

```
2012-07-02  8362
2012-07-03  8042
2012-07-04  8272
2012-07-05  9227 
```

但是当我将这两个查询结合起来时，我得到了一个错误的查询，我预计在 7 月 2 日 8362 数量对 1843，但我得到：

```
 day      TotalHeadcount    totalQty
7/2/2012    6021    8362
7/3/2012    7193    8042
7/4/2012    6988    8272
7/5/2012    7197    9227 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:11:34.640

避免这种情况的一种方法（受 RDBMS 支持）是

```
WITH R
     AS (SELECT *,
                Sum(HeadCount) OVER (PARTITION BY date) AS SumHeadCount
         FROM   Report)
SELECT R.date,
       SumHeadCount,
       Sum(P.Quantity) AS SumQuantity
FROM   R
       JOIN Production P
         ON R.ReportID = P.ReportID
GROUP  BY R.date, SumHeadCount
ORDER  BY R.date 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:08:50.440

这可能会有所帮助

```
SELECT Report.ReportDate,
       Sum(Report.HeadCount) AS SumHeadCount,
       ProductionSummary.SumQuantity
FROM   Report
       INNER JOIN (SELECT ReportID,
                          Sum(Production.Quantity) AS SumQuantity
                   FROM   Production
                   GROUP  BY ReportID) AS ProductionSummary
         ON Report.ReportID = ProductionSummary.ReportID
GROUP  BY ReportDate
ORDER  BY ReportDate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:34:47.267

使用以下分组记录每个日期

```
SELECT ReportSummary.ReportDate, SUM(ReportSummary.SumHeadCount) AS SumHeadCount, SUM(ProductionSummary.SumQuantity) AS SumQuantity
FROM
(
  SELECT Report.ReportDate, SUM(Report.HeadCount) AS SumHeadCount
  FROM Report 
  GROUP BY Report.ReportDate
) AS ReportSummary
INNER JOIN
(
  SELECT Report.ReportDate, Sum(Production.Quantity) AS SumQuantity
  FROM Production
  INNER JOIN Report 
  ON Report.ReportID = Production.ReportID
  GROUP BY Report.ReportDate
) AS ProductionSummary
ON ReportSummary.ReportDate = ProductionSummary.ReportDate
GROUP BY ReportSummary.ReportDate
ORDER BY ReportSummary.ReportDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-12T04:58:10.783

我们有同样的问题，但我解决了。试试这个。

```
SELECT tbl_report.SumHeadCount, tbl_report.date, tbl_production.SumQuantity
FROM
 ( select date, 
    SUM(HeadCount) AS SumHeadCount FROM  Report GROUP by date)as tbl_report
JOIN
 ( select SUM(Quantity) AS SumQuantity, date FROM  Production GROUP by date)as tbl_production
WHERE tbl_report.date = tbl_production.date 
```

# json - Webservices 对象引用未设置为对象错误的实例

> ID：12620806
> 
> 赞同：0
> 
> 时间：2012-09-27T11:55:46.287
> 
> 标签：json, web-services, windows-phone-7, httpwebrequest

我必须调用 Web 服务 (JSON) 来验证尝试登录应用程序的用户。我提供了以下 xml

```
 <summary>
  http://geniewebsvc.cloudapp.net/Member.svc/Authenticate
 </summary>
  <param name="payload">
    {"UserName":"testuser@somedomain.com","Password":"p@$$w0rd"}
  </param>
  <requiredHeaders>
  Content-Type: application/json;charset=UTF-8
  </requiredHeaders>
  <returns></returns>
    [OperationContract]
    [WebInvoke(UriTemplate = "/Authenticate", Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]
    AuthenticateResponse Authenticate(AuthCredentials usernamePassword); 
```

有一个类似的方法来检查用户 ID 是否已经注册，这是一个 Get 方法。这很好，我收到了成功和不成功案例的正确响应。但是所有的 post 方法都是给我带来麻烦的方法。我注意到这些 xml 中还有一个不同之处.. 即.. isregistered webservice param 标记是这样的..

```
 <param name="emailAddress"></param> 
```

这是我的 get() 和 post() 请让我知道我的错误是什么......

```
public void Post()
    {
        RequestState myRequestState = new RequestState();
        try
        {
            System.Uri uri = new Uri(url);
            HttpWebRequest myHttpWebGetRequest;
            Logger.log(TAG, "Create a HttpWebrequest object to the URL", url);
            myHttpWebGetRequest = (HttpWebRequest)WebRequest.Create(uri);
            _mHttpWebRequest = myHttpWebGetRequest;
            myRequestState.conn = this;
            myRequestState.request = myHttpWebGetRequest;
            myRequestState.request.ContentType = "application/json;charset=UTF-8";

            myRequestState.request.Method = "POST";
            myRequestState.request.AllowReadStreamBuffering = false;
            myRequestState.request.Headers["UserName"] = "rick.labarbera@gmail.com";
            myRequestState.request.Headers["Password"] = "125124514";
            // myRequestState.request.Headers["MemberId"] = "UdE8IwmTbxEjmzmMo2nBpg==";

            IAsyncResult result = (IAsyncResult)myHttpWebGetRequest.BeginGetResponse(new AsyncCallback(RespCallback), myRequestState);
        }
        catch (Exception e)
        {
            close(myRequestState);
            if (this.listener != null)
            {
                Logger.log(TAG, "post()", e.Message);
            }
        }
    }

 public void Get()
    {
        RequestState myRequestState = new RequestState();
        try
        {
            System.Uri uri = new Uri(url);
            HttpWebRequest myHttpWebPostRequest;
            Logger.log(TAG, "Create a HttpWebrequest object to the URL", url);
            myHttpWebPostRequest = (HttpWebRequest)WebRequest.Create(uri);
            _mHttpWebRequest = myHttpWebPostRequest;
            myRequestState.conn = this;
            myRequestState.request = myHttpWebPostRequest;
            myRequestState.request.Method = "GET";
            myRequestState.request.AllowReadStreamBuffering = false;

            IAsyncResult result = (IAsyncResult)myHttpWebPostRequest.BeginGetResponse(new AsyncCallback(RespCallback), myRequestState);
        }
        catch (Exception e)
        {
            close(myRequestState);
            if (this.listener != null)
            {
                Logger.log(TAG, "get()", e.Message);
            }
        }
    } 
```

我做错了什么吗？所有这些事情对我来说都是非常新的......我非常需要帮助......

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:55:14.523

我用你的代码玩了一点，但做不到:(

您用于 POST() 方法和 GET() 方法的 URL 是什么？

顺便说一句，还有另一种方法可以调用您的服务。按着这些次序：

-- 创建一个新项目。
-- 右键单击​​项目名称并单击“添加服务引用”...然后提供地址为“http://geniewebsvc.cloudapp.net/Member.svc”并单击“Go”。
-- 下载服务信息后，提供类似“MyMemberService”之类的命名空间，然后单击“确定”。

然后转到您的 MainPage.xaml.cs 并编写以下代码。

```
MemberServiceClient client = new MemberServiceClient();
client.AuthenticateCompleted += new EventHandler<AuthenticateCompletedEventArgs>(client_AuthenticateCompleted);
client.AuthenticateAsync(new AuthCredentials() { UserName = "rick.labarbera@gmail.com", Password = "125124514" }); 
```

AuthenticateCompleted 处理程序是

```
void client_AuthenticateCompleted(object sender, AuthenticateCompletedEventArgs e)
{
    MessageBox.Show(e.Result.Successful.ToString());
} 
```

这样，您只需 2 或 3 行代码就可以简单地调用 MemberService 中的任何服务。这就是在 Visual Studio 项目中调用 soap 客户端的方式。

但同样，您需要解决一些“端点配置”问题。如果你能做到这一点，你可以节省至少 30% 到 40% 的开发时间。

祝你好运。

# mysql - MySQL 函数将 SQL 查询中的时间格式化为 mm:ss

> ID：12620816
> 
> 赞同：1
> 
> 时间：2012-09-27T11:56:20.637
> 
> 标签：mysql, datetime, time

MySQL NOOB 有问题...

我的数据库中有一个名为 TotalTime 的列，它存储经过的时间 (hh:mm:ss)。在表中，它存储为 type = time。

当它显示时，它显示 hh:mm:ss。因此，3:55 显示为 00:03:55。

在我的 SQL 查询中，有没有办法格式化显示 03:55（或者更好的是 3:55）？

查询的开头如下所示：

```
SELECT
    OverallRank,
    First,
    Last,
    TotalTime,
    AgeGroup... 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:58:18.353

采用

```
i for minutes
s for seconds 
```

像 - `i:s`

```
%i  Minutes, numeric (00..59)
%s  Seconds (00..59) 
```

**编辑**

```
SELECT OverallRank, First, Last, DATE_FORMAT(TotalTime, "%i:%s") as TotalTime,...
FROM tbl_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:59:29.747

您可以预先使用 DATE_FORMAT()？ [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

```
SELECT OverallRank, First, Last, DATE_FORMAT(TotalTime, "%i:%s") as TotalTime, AgeGroup.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:02:30.550

检查[date_format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)函数。

您可以执行以下操作：

```
SELECT
    OverallRank,
    First,
    Last,
    DATE_FORMAT(TotalTime, '%i:%s'),
    AgeGroup... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:16:29.293

如果你想获得你的`3:55`输出而不是`03:55`你也可以使用[**IF**](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)构造：

```
SELECT OverallRank, 
       First, 
       Last, 
       IF (LEFT(DATE_FORMAT(TotalTime, "%i:%s"),1) == '0',     #IF
                SUBSTRING(DATE_FORMAT(TotalTime, "%i:%s"),2) , #yes part
                DATE_FORMAT(TotalTime, "%i:%s")) as TotalTime, #no part
       AgeGroup.. 
```

# javascript - 如何将javascript包含在ruby on rails的下拉列表中？

> ID：12620817
> 
> 赞同：1
> 
> 时间：2012-09-27T11:56:19.860
> 
> 标签：javascript, jquery, ruby-on-rails

我有一个用于从不同模型加载的级联下拉框的 javascript 文件。但我不知道如何包含在下拉列表中。

## 形式：

```
<% content_for :javascript do %>

var master_surveys = <%= 
 Condition::MasterSurvey.all.map {|ms| {id: ms.Master_Survey_Code, to_s: ms[:Master_Survey_Name]}}.to_json.html_safe
%>

var elements = <%= elements = Hash.new { |hash, code| hash[code] = [] }
Condition::Element.all.each {|e| elements[e.Master_Survey_Code] << {id: e.Element_Code, to_s: e.Element} }.to_json.html_safe
%>

var sub_elements = <%= sub_elements = Hash.new { |hash, code| hash[code] = [] }
Condition::SubElement.all.each {|s| sub_elements[s.Element_Code] << {id: s.Sub_Element_Code, to_s: s.Sub_Element} }.to_json.html_safe
%>

var materials = <%=
materials = Hash.new { |hash, code| hash[code] = [] }
Condition::RenewSchedule.all.each {|rs| materials[rs.Sub_Element_Code] << {id: rs.Material_Code, to_s: rs.Material} }.to_json.html_safe
%>

$(document).ready(function(){
 $('select#enr_rds_surv_rdsap_xref_master_survey').chainedTo('select#enr_rds_surv_rdsap_xref_Element_Code');
});
<% end %>

<%= form_for(@enr_rds_surv_rdsap_xref) do |f| %>
  <% if @enr_rds_surv_rdsap_xref.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@enr_rds_surv_rdsap_xref.errors.count, "error") %>:</h2>

      <ul>
      <% @enr_rds_surv_rdsap_xref.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

    <div class="field">
      <%= f.label :Master_Survey %><br/>
      <%= f.select :master_survey, Condition::MasterSurvey.all.map{|e| [e.Master_Survey_Code]}, { :prompt => 'Please Select' }  %>
    </div>

    <div class="field">
      <%= f.label :Element_Code %><br/>
      <%= f.select :Element_Code, Condition::Element.all.map{|e| [e.Element, e.Element_Code]}, { :prompt => 'Please Select' } %>
    </div>

    <div class="field">
      <%= f.label :Sub_Element_Code %><br/>
      <%= f.select :Sub_Element_Code, Condition::SubElement.all.map{|e| [e.Sub_Element, e.Sub_Element_Code]}, { :prompt => 'Please Select' } %>

    </div>  

    <div class="field">
      <%= f.label :Material_Code %><br/>
      <%= f.select :Material_Code, Condition::RenewSchedule.all.map{|e| [e.Material]}, { :prompt => 'Please Select' } %>
    </div>

  <div class="actions">
    <%= f.submit 'Save'%>
  </div>
<% end %> 
```

因此，上面的 javascript 文件从父级收集数据。在表单中，我创建了一个下拉列表，静态加载了数据库中的数据。我想包含 javascript 以动态自动加载到下拉列表中。

提前致谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:40:29.007

我通常通过 Ajax 和部分（或页面，由你决定）来做，不好但可能有帮助？

即使在您的父母选择上也绑定更改。像

```
$("#parent_select").change(function(){
    $.ajax({
        url: '/parents/'+$(this).val()+'/childs/',
        complete: function(data){
            $('#children_select').html(data);
        }
    })
}); 
```

并在您的子控制器中呈现仅包含所选子项选项内容的部分（或页面）。像：

```
<%children.each do |child|%>
<option value='<%=child.id%>'><%=child.name%></option>
<%end%> 
```

# c++ - CString 到 LPCTSTR 的转换

> ID：12620820
> 
> 赞同：13
> 
> 时间：2012-09-27T11:56:26.137
> 
> 标签：c++, type-conversion, cstring

我有一个需要转换为 LPCTSTR(const char*) 的 CString 变量。我需要这种转换，以便我可以将它用作函数中的参数。

CString 看起来像：

```
CString sqlTemp = _T("INSERT INTO "+ sw1 +" (filename, "+ sw2 +") VALUE ("+ sw7 +","+ sw3 +" ) "); 
```

它包含一个查询。该函数的原型是：

```
int WriteBlob(LPCTSTR szSqlStat, LPCTSTR szFilePath) 
```

那么你能告诉我一个如何转换为 LPCTSTR 的例子吗？这可能是微不足道的，但我是一个 C++ 初学者，我仍然掌握它。

谢谢 。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T11:58:06.043

一种转换方法是这样的：

```
CString str;

str = "Hello";

LPCSTR szTemp = (LPCSTR)(LPCTSTR)str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T07:26:23.150

```
CString str; // the given string
CStringA strA(str); // a helper string
LPCSTR ptr = strA; 
```

[参考 MSDN](https://social.msdn.microsoft.com/Forums/vstudio/en-US/df7ae955-0c5d-408f-98d8-7349897114f3/cstring-to-lpcstr)

# c# - 在 C#/XAML Metro 应用程序上导航后无法播放媒体文件

> ID：12620821
> 
> 赞同：0
> 
> 时间：2012-09-27T11:56:28.267
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime, media

我在这里粘贴代码。我的应用程序能够访问音乐库。我没有收到任何异常，但导航后没有播放媒体文件。[这](https://skydrive.live.com/#cid=9E70869A1583FA52&id=9E70869A1583FA52!273)是 Skydrive 上托管的项目

主页.xaml

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Button Content="Click Me" Margin="563,357,0,373" Click="Button_Click_1"></Button>
</Grid> 
```

MainPage.xaml.cs

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    StorageFile file = await KnownFolders.MusicLibrary.GetFileAsync("video.mp4");
    Frame.Navigate(typeof(MediaPlayback), file);
} 
```

媒体播放.xaml

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <MediaElement  x:Name="MyMediaPlayback" Height="350" Width="640"/>
</Grid> 
```

媒体播放.xaml.cs

```
protected override async void OnNavigatedTo(NavigationEventArgs e)
{
    StorageFile file = e.Parameter as StorageFile;

    try
    {
        var stream = await file.OpenAsync(Windows.Storage.FileAccessMode.Read);
        MyMediaPlayback.SetSource(stream, file.ContentType);
        MyMediaPlayback.Play();
    }
    catch (Exception)
    {
        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:22:30.240

OnNavigatedTo 的一个常见问题是它在 Loaded 事件触发之前被调用，也就是当控件实际添加到可视化树时。我只是猜测，但您可能需要在调用 .Play() 之前等待页面加载。另外我认为默认情况下 MediaElement 设置为在您设置源时自动播放，因此调用 Play 可能是不必要的，或者实际上它可能是这里的中断。MediaElement 在 Windows 8 RTM 中仍然存在许多基本错误，需要谨慎使用以解决这些错误。这也是调用“await [WaitForLoadedAsync](http://jupitertoolkit.codeplex.com/SourceControl/changeset/view/18608#346231) ()”以查看是否需要等待该事件而不是在 Loaded 事件处理程序中寻找导航参数的绝佳用例。

# android - 记住我复选框不要保存用户名并在再次打开应用程序时通过

> ID：12620824
> 
> 赞同：-1
> 
> 时间：2012-09-27T11:56:41.630
> 
> 标签：android

记住密码意味着如果我输入用户名和密码然后启用记住密码复选框意味着它已成功登录。然后我单击注销意味着它已注销。但是我再次打开应用程序，用户名和密码显示在 d edittext 知道...但是当我在我的应用程序上注销时，我再次注销应用程序意味着用户名和密码未保存。这是我的代码：

```
 myPrefs = this.getSharedPreferences("myPrefs",MODE_PRIVATE);
        user=myPrefs.getString(PREF_USERNAME, "username");
        pass=myPrefs.getString(PREF_PASSWORD, "password");
        checked=myPrefs.getString(PREF_CHECKED, "TRUE");

        SharedPreferences sp1=this.getSharedPreferences(PREFS_NAME,MODE_PRIVATE);
         userName=sp1.getString(PREFS_NAME , null);       
        password = sp1.getString(PREF_PASSWORD, null);

loginButton.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {

InputMethodManager imm =(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(passwordEditText.getWindowToken(),
                        0);
                Data.LANGUAGE = "1";
                String username = ar_EditText.getText().toString().trim();
               String password = passwordEditText.getText().toString().trim();
               if(CBox.isChecked()){
                  getSharedPreferences(PREFS_NAME,MODE_PRIVATE).edit().putString(PREF_USERNAME,userName).putString(PREF_PASSWORD,password).putString(PREF_CHECKED,"TRUE")
                .commit();
               }else
               {
                   getSharedPreferences(PREFS_NAME,MODE_PRIVATE).edit().clear().commit();
               } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:50:33.443

尝试这样的事情：

```
if(checked){
    ar_EditText.setText(userName);
    passwordEditText.setText(password);
} 
```

# mysql - Mysql乘法运算

> ID：12620827
> 
> 赞同：0
> 
> 时间：2012-09-27T11:56:47.167
> 
> 标签：mysql, multiplication

我有一个值 = 2.05 的浮点数，当我执行 field*1000 时，结果是 2049.999952316284 为什么结果不是 2050.0？.

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:02:55.117

大概是因为该字段不是存储为 2.05 而是存储为 2.04999。如果增加字段的分辨率，即存储为 2.0500，会发生什么情况？

这个问题是由于计算机无法准确存储一些实数。

顺便说一句，如果该值应该是货币值，请将其存储为数字 (12,2)，这样就不会出现任何浮点错误。

# c# - 移动 2 个控件（图片框）平行移动而不是顺序移动

> ID：12620829
> 
> 赞同：0
> 
> 时间：2012-09-27T11:56:50.973
> 
> 标签：c#, .net, runtime, controls, sametime

两个虚拟鼠标的图像任务是水平移动并单击目标点。下面的代码在 Sequence 中成功运行（一个接一个）。我想将此代码编辑为并行工作（两个图像同时工作）。

mouseimg1 指的是 => mouse 1 和 mouseimg2 指的是 => mouse 2 。

```
public partial class Form1 : Form
{
    public delegate void delMouse();
    public delMouse delMouse1; enter code here
    public delMouse delMouse2;
    private Thread t1, t2;
    public Form1()
    {
        InitializeComponent();
        delMouse1 = new delMouse(mouse1);
        delMouse2 = new delMouse(mouse2);

    }

    private void button1_Click(object sender, EventArgs e)
    {
        t1 = new Thread(new ThreadStart(delMouse1));
        t1.Start();

    }
    private void button2_Click(object sender, EventArgs e)
    {

        t2 = new Thread(new ThreadStart(delMouse2));
        t2.Start();

    }
    void mouse2()
    {
        if (this.mouseimg2.InvokeRequired)
        {
            this.Invoke(delMouse2);
        }
        else
        {
            int destinval2 = int.Parse(textBox2.Text);
            while (mouseimg2.Location.Y != destinval2)
            {
                if (mouseimg2.Location.Y == 250)
                    mouseimg2.Location = new Point(mouseimg2.Location.X, 15);
                if (mouseimg2.Location.Y < destinval2)
                    mouseimg2.Location = new Point(mouseimg2.Location.X, mouseimg2.Location.Y + 1);
                else
                    mouseimg2.Location = new Point(mouseimg2.Location.X, mouseimg2.Location.Y - 1);
            }
            LeftClick(mouseimg2.Location.X, mouseimg2.Location.Y);
        }
    }

    void mouse1()
    {
        if (this.mouseimg1.InvokeRequired)
        {
            this.Invoke(delMouse1);
        }
        else
        {
            int destinval1 = int.Parse(textBox1.Text);

            while (mouseimg1.Location.Y != destinval1)
            {

                if (mouseimg1.Location.Y < destinval1)
                    mouseimg1.Location = new Point(mouseimg1.Location.X, mouseimg1.Location.Y + 1);
                else
                    mouseimg1.Location = new Point(mouseimg1.Location.X, mouseimg1.Location.Y - 1);
            }
            LeftClick(mouseimg1.Location.X, mouseimg1.Location.Y);
        }
    }

           [DllImport("user32.dll")]
    static extern void mouse_event(int dwFlags, int dx, int dy, int dwData, int dwExtraInfo);

    [Flags]
    public enum MouseEventFlags
    {
        LEFTDOWN = 0x00000002,
        LEFTUP = 0x00000004,
        MIDDLEDOWN = 0x00000020,
        MIDDLEUP = 0x00000040,
        MOVE = 0x00000001,
        ABSOLUTE = 0x00008000,
        RIGHTDOWN = 0x00000008,
        RIGHTUP = 0x00000010
    }
    public static void LeftClick(int x, int y)
    {
        Cursor.Position = new System.Drawing.Point(x, y);
        mouse_event((int)(MouseEventFlags.LEFTDOWN), 0, 0, 0, 0);
        mouse_event((int)(MouseEventFlags.LEFTUP), 0, 0, 0, 0);
    }

} 
```

[**截屏**](http://sphotos-b.ak.fbcdn.net/hphotos-ak-ash3/150359_421332557930529_1362773985_n.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:01:15.193

通常在 Windows 中，您不应该从创建它的线程以外的线程访问窗口。如您所见，WinForms 强制执行此规则。

我不太清楚你想做什么，但创建两个线程几乎肯定是错误的方法。

看起来有点像多线程但不是的行为通常使用计时器来完成，如果这对您有帮助的话。

# database - Oracle优化拆分行

> ID：12620838
> 
> 赞同：0
> 
> 时间：2012-09-27T11:57:34.653
> 
> 标签：database, oracle, plsql

我有两个表 Quantity(user, year, quantity) 和 MonthlyQuantity(user, year, month, quantity) - 每月一个是空的。我需要做的是根据年度表填写月表，将年度数量分成 12 个相等的部分，然后将任何剩余部分添加到上个月。所以基本上，Quantity 中的每一行都应该在 QuantityMonthly 中创建 12 行。这就是我的做法 - 问题是循环非常慢。

我怎样才能做得更快？

```
 create ro replace 
procedure pr_test
AS
BEGIN
    FOR r IN (SELECT * FROM Quantity) LOOP

    DELETE FROM QuantityMonthly qm WHERE qm.company = r.company AND qm.year = r.year;

    INSERT ALL
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 1, trunc(r.quantity / 12))
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 2, trunc(r.quantity / 12))
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 3, trunc(r.quantity / 12))
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 4, trunc(r.quantity / 12))
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 5, trunc(r.quantity / 12))
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 6, trunc(r.quantity / 12))
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 7, trunc(r.quantity / 12))
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 8, trunc(r.quantity / 12))
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 9, trunc(r.quantity / 12))
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 10, trunc(r.quantity / 12))
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 11, trunc(r.quantity / 12))
    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 12, trunc(r.quantity / 12) + mod(r.quantity , 12))
  SELECT * FROM dual;

END LOOP;

COMMIT;

END pr_test; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:14:08.547

使用[单个语句](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:2812207600346120948#2816783400346194298)，单个集合操作通常比许多小操作快得多：

```
MERGE INTO QuantityMonthly qm
 USING (SELECT *
          FROM Quantity q
         CROSS JOIN (SELECT rownum mon
                       FROM dual
                    CONNECT BY level <= 12)) q
    ON (qm.company = q.company
        AND qm.year = q.year
        AND qm.mon = q.mon)
WHEN MATCHED THEN
   UPDATE SET qm.quantity = q.quantity / 12 
                            + CASE WHEN q.mon = 12 THEN 
                                 mod(r.quantity, 12) 
                              ELSE 
                                 0 
                              END
WHEN NOT MATCHED THEN
   INSERT (company, year, mon, qty)
   VALUES (q.company, q.year, q.mon,
           q.quantity / 12 
           + CASE WHEN q.mon = 12 THEN mod(r.quantity, 12) ELSE 0 END); 
```

# asp.net - 单击设计代码时，ASP.NET 页面不显示代码后面的代码

> ID：12620840
> 
> 赞同：-2
> 
> 时间：2012-09-27T11:57:37.607
> 
> 标签：asp.net

单击设计代码时页面不显示代码后面的代码，并且代码后面的代码显示错误为找不到控件

下面的代码显示错误：系统错误

```
<%@Page Language="C#" AutoEventWireup="true" CodeFile="Register.aspx.cs" Inherits="Register" %> 
```

我不知道为什么它会获取这种类型的错误，请帮助我

代码背后：

```
using System; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:01:00.730

设计者无法打开隐藏代码的唯一原因是找不到指定的关联代码隐藏文件`Inherits="Register"`

确保你有一个名为的公共类`Register`，它也必须 `Partial`是

确保文件名后面的代码也被命名为`Register.aspx.cs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:04:40.427

好的，我完全误解了你的问题。

如果您的 Register.aspx 文件如下所示：

```
<%@Page Language="C#" AutoEventWireup="true" CodeFile="Register.aspx.cs" Inherits="Register" %> 
```

Register.aspx.cs 应该（至少）看起来像这样：

```
using System;

namespace YourDefaultNamespace
{
    public partial class Register : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

我注意到您的指令`Inherits`属性中没有命名空间。`<%@ Page %>`它应该与您的代码隐藏文件具有相同的命名空间。在我的例子中，那是`YourDefaultNamespace`，所以我的`<%@ Page %>`指令应该是这样的：

```
<%@Page Language="C#" AutoEventWireup="true" CodeFile="Register.aspx.cs" Inherits="YourDefaultNamespace.Register" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:03:45.613

必须检查 make Inherits 属性在设计和代码文件路径

# sql-server-2008 - 如何在特定列上选择不同的

> ID：12620842
> 
> 赞同：13
> 
> 时间：2012-09-27T11:57:40.143
> 
> 标签：sql-server-2008, distinct

我的表中有几列

**Col1** , **Col2** , **Col3** , **Col4**

现在我想像这样选择

`SELECT DISTINCT (Col1, Col2, Col3), Col4`

即仅基于这三个列得到不同的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:00:14.310

只需`GROUP BY Col1, Col2, Col3`使用带有`col4`like `MAX`,`MIN`等的聚合函数 .. 就像这样：

```
SELECT Col1, Col2, Col3, MAX(Col4)
FROM TableName
GROUP BY Col1, Col2, Col3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T05:32:40.643

从评论到另一个答案：

> 我可以得到这样的 Col1, Col2 , Col3 和 (Col4 的分隔符形式)

是的，您可以使用`for xml path`.

```
select Col1, 
       Col2,  
       Col3, 
       (
        select ',' + T2.Col4
        from YourTable T2
        where T1.Col1 = T2.Col1 and
              T1.Col2 = T2.Col2 and
              T1.Col3 = T2.Col3
        for xml path(''), type
       ).value('substring((./text())[1], 2)', 'varchar(max)') as Col4
from YourTable as T1
group by T1.Col1, T1.Col2, T1.Col3 
```

[SQL小提琴](http://sqlfiddle.com/#!3/40b2a/1/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:03:13.450

group by 和 distinct 在 SQL 中执行几乎相似的功能：

所以下面的两个查询几乎是等价的：

```
SELECT DISTINCT Col1, Col2, Col3 FROM tbl

SELECT Col1, Col2, Col3 FROM tbl GROUP BY Col1, Col2, Col3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:11:40.827

```
select distinct ( Convert(varchar(255),Col1) +' '+
Convert(varchar(255),Col2)+' '+Convert(varchar(255),Col3)),
Col4 from clients 
```

# java - java - 如何从Java中的SOAP端点获取响应？

> ID：12620843
> 
> 赞同：2
> 
> 时间：2012-09-27T11:57:42.623
> 
> 标签：java, web-services, soap

我对 SOAP 很陌生，所以在网上研究了一些程序，这是我想出的，但我得到一个空响应，一定是一些愚蠢的事情，但几乎不需要帮助

请在下面查看我的代码和输出。谢谢

代码

```
import java.net.URL;

import javax.xml.namespace.QName;
import javax.xml.soap.MessageFactory;
import javax.xml.soap.SOAPBody;
import javax.xml.soap.SOAPBodyElement;
import javax.xml.soap.SOAPConnection;
import javax.xml.soap.SOAPConnectionFactory;
import javax.xml.soap.SOAPElement;
import javax.xml.soap.SOAPHeader;
import javax.xml.soap.SOAPHeaderElement;
import javax.xml.soap.SOAPMessage;

public class AtomicNumber {
  public static void main(String[] args) {
    try {
      SOAPConnectionFactory sfc = SOAPConnectionFactory.newInstance();
      SOAPConnection connection = sfc.createConnection();

      MessageFactory mf = MessageFactory.newInstance();
      SOAPMessage smsg = mf.createMessage();

      SOAPHeader shead = smsg.getSOAPHeader();

      SOAPBody sbody = smsg.getSOAPBody();
      shead.detachNode();
      QName bodyName = new QName("http://www.webserviceX.NET", "GetAtomicNumber", "web");
      SOAPBodyElement bodyElement = sbody.addBodyElement(bodyName);
      QName qn = new QName("ElementName");
      SOAPElement quotation = bodyElement.addChildElement(qn);

      quotation.addTextNode("iron");

      System.out.println("\n Soap Request:\n");
      smsg.writeTo(System.out);
      System.out.println();

      URL endpoint = new URL("http://www.webservicex.net/periodictable.asmx");
      SOAPMessage response = connection.call(smsg, endpoint);

    System.out.println("\n Soap Response:\n");

     System.out.println(response.getContentDescription());

    } catch (Exception ex) {
      ex.printStackTrace();
    }
}
} 
```

我的输出

```
 Soap Request:

<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body><web:GetAtomicNumber xmlns:web="http://www.webserviceX.NET"><ElementName>sodium</ElementName></web:GetAtomicNumber></SOAP-ENV:Body></SOAP-ENV:Envelope>

 Soap Response:

null 
```

**更新**

这就是我得到的（例外）

```
<faultcode>soap:Server</faultcode>
     <faultstring>System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.Data.SqlClient.SqlException: Procedure or function 'GetAtomicNumber' expects parameter '@ElementName', which was not supplied.
at WebServicex.periodictable.GetAtomicNumber(String ElementName)
 --- End of inner exception stack trace ---</faultstring> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:49:36.053

您要做的是为此 Web 服务自动生成 Java 代码。WSDL 在这里：[http ://www.webservicex.net/periodictable.asmx?wsdl](http://www.webservicex.net/periodictable.asmx?wsdl)

在 Java 中，自动生成代码的工具是`wsimport`. 你会想要使用这样的东西：

```
wsimport http://www.webservicex.net/periodictable.asmx?wsdl -p com.company.whateveruwant -Xnocompile -d . -keep 
```

这会将您想要的代码放入指定的包中（此处`com.company.whateveruwant`）。

从那里，您所要做的就是像普通的 Java 库一样调用 SOAP 方法：

```
PeriodictableSoap soap = new Periodictable().getPeriodictableSoap();
System.out.println(soap.getAtomicNumber("Iron")); 
```

这打印出来：

```
<NewDataSet>
  <Table>
    <AtomicNumber>26</AtomicNumber>
    <ElementName>Iron</ElementName>
    <Symbol>Fe</Symbol>
    <AtomicWeight>55.847</AtomicWeight>
    <BoilingPoint>3300</BoilingPoint>
    <IonisationPotential>7.9</IonisationPotential>
    <EletroNegativity>1.6400000000000001</EletroNegativity>
    <AtomicRadius>1.17</AtomicRadius>
    <MeltingPoint>1808</MeltingPoint>
    <Density>7874</Density>
  </Table>
</NewDataSet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:35:05.387

尝试

```
 QName qn = new QName("http://www.webserviceX.NET","ElementName","web"); 
```

编辑：另外，正如其他人所建议的那样——你最好在这里使用生成的客户端代码——Axis、JAX-WS 等都是选项。

正确的代码应该如下。

```
 QName bodyName = new QName("http://www.webserviceX.NET", "GetAtomicNumber");
  SOAPBodyElement bodyElement = sbody.addBodyElement(bodyName);
  QName qn = new QName("ElementName"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:09:38.090

使用 cxf-codegen-plugin maven 插件，您可以通过添加以下依赖项快速创建soap服务的客户端：

```
<dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxws</artifactId>
            <version>2.4.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http</artifactId>
            <version>2.4.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-core</artifactId>
            <version>2.4.2</version>
        </dependency> 
```

并添加此构建部分：

org.apache.cxf cxf-codegen-plugin 2.1.2 generate-sources generate-sources wsdl2java ${basedir}/target/generated-sources/cxf ${basedir}/src/main/resources/wsdlfile.wsdl -client -wsdlLocation -p com.package.for.生成。班级

然后在 ${basedir}/target/generated-sources/cxf 中，您将拥有调用 Web 服务所需的类以及如何执行此操作的示例。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T05:48:19.657

@Ricky，这是正确的代码。

```
SOAPBody body = message.getSOAPBody();
QName bodyName = new QName("http://www.webserviceX.NET", "GetAtomicNumber");
SOAPBodyElement bodyElement = body.addBodyElement(bodyName);
SOAPElement symbol = bodyElement.addChildElement("MyMetal");
symbol.addTextNode("iron");
SOAPConnection connection = SOAPConnectionFactory.newInstance().createConnection();
SOAPMessage response = connection.call(message, endpoint);
connection.close();
message.writeTo(System.out);
System.out.println();
response.writeTo(System.out);
System.out.println(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T12:08:31.207

您真的需要使用裸 SOAP 类吗？如何[生成 JAX-WS 工件](http://www.mkyong.com/webservices/jax-ws/jax-ws-wsimport-tool-example/)以摆脱所有这些样板文件？

更多信息（包括 ANT）[在这里](http://jxs.me/2010/05/11/java-web-service-client-wsdl/)。

# android - 有官方的Android部分视图吗？

> ID：12620846
> 
> 赞同：2
> 
> 时间：2012-09-27T11:58:05.107
> 
> 标签：android, android-3.0-honeycomb, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

通过 Google 自己的应用程序和框架的一些功能（即首选项），列表部分在 Android 中被大量使用。

`View`这让我想知道Android中是否有可用的官方部分？如果是这样，它似乎被隐藏了。

这是来自[Android 设计网站](http://developer.android.com/design/style/metrics-grids.html)的图片，显示了我在说什么：

![在此处输入图像描述](../Images/cfcbf887cafc6626c9d479c7cd1b7891.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:49:50.953

> 这让我想知道Android中是否有官方部分视图可用？

不，对不起。这方面有很多库，您可能也可以从 AOSP 中获取一些代码，但 SDK 中没有任何内容。仅仅因为设计人员认为这是一个好主意并不意味着我们实际上在 SDK 中有代码来利用这些想法。

# javascript - setattribute函数的javascript问题

> ID：12620849
> 
> 赞同：0
> 
> 时间：2012-09-27T11:58:17.967
> 
> 标签：javascript, html, function, setattribute

我使用的表单显示一些 div，具体取决于您单击单选按钮的哪个选项。

问题是 div 设置为不显示，除非我选择一个选项。

因此，我添加了以下功能，以确保如果显示 div，它将具有所需属性的表单。

所以我给了这个功能：

```
<script type="text/javascript">
function addattribute()
{
    if (document.getElementById('montant').style.display == "block")
    {
        document.getElementsByName('montant_creance').setAttribute('required');
        document.getElementsByName('condition2').setAttribute('required');
    }
    if (document.getElementById('montant').style.display == "none")
    {
        document.getElementsByName('montant_creance').setAttribute('required','false');
        document.getElementsByName('condition2').setAttribute('required','false');
    }
}
</script> 
```

但它在控制台中对我说：

`Uncaught TypeError: Object #<NodeList> has no method 'setAttribute'`

我真的不知道如何找到问题。

接受我最大的尊重。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:01:54.150

`getElementsByName`返回一个元素的集合，所以你必须写例如

```
document.getElementsByName('montant_creance')[0].setAttribute('required'); 
```

每次您使用正确的索引使用此方法（或类似方法，例如`getElementsByTagName`， ...）时`getElementsByClassName`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:01:10.723

setAttribute 采用 2 个参数名称和值：

```
setAttribute('name','value'); 
```

# python - 从文件的内容创建哈希表

> ID：12620854
> 
> 赞同：0
> 
> 时间：2012-09-27T11:58:27.810
> 
> 标签：python

如何打开文本文件、读取文件内容并根据该内容创建哈希表？到目前为止，我已经尝试过：

```
import json

json_data = open(/home/azoi/Downloads/yes/1.txt).read()

data = json.loads(json_data)
pprint(data) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:12:28.047

我建议这个解决方案：

```
import json

with open("/home/azoi/Downloads/yes/1.txt") as f:
    data=json.load(f)
    pprint(data) 
```

该`with`语句确保您的文件无论发生什么都会自动关闭，并且如果打开失败，您的程序会抛出正确的异常。该`json.load`函数直接从打开的文件句柄加载数据。

此外，我强烈建议阅读和理解[Python](http://docs.python.org/tutorial/index.html)教程。这是必不可少的阅读，不会花费太长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:01:29.017

要打开文件，您必须正确使用 open 语句，例如：

```
json_data=open('/home/azoi/Downloads/yes/1.txt','r') 
```

其中第一个字符串是文件的路径，第二个是模式：`r = read, w = write, a = append`

# java - 在 Java/Android 中以编程方式进行 Saxon XSLT 转换

> ID：12620855
> 
> 赞同：1
> 
> 时间：2012-09-27T11:58:31.130
> 
> 标签：java, android, xml, xslt, saxon

您好，我想在我的 Android 应用程序中以编程方式使用 xsl 样式表转换 xml。

这是我的变压器功能：

```
//-----------------------------XLST SAXON TRANSFORMATION--------------------
public static void simpleTransform(String sourcePath, String xsltPath,
        String resultDir) {
        TransformerFactory tFactory = TransformerFactory.newInstance();
        try {
            Transformer transformer =
                    tFactory.newTransformer(new StreamSource(new File(xsltPath)));

            transformer.transform(new StreamSource(new File(sourcePath)),
    new StreamResult(new File(resultDir)));
        } catch (Exception e) {
            e.printStackTrace();
        }
} 
```

并使用他的代码开始转换：

```
 private static String sourcePath;
           private static String xsltPath = SD_CARD_PATH +"/"+ "ets4_calimero_gui.xsl";
           private static String resultDir;

           sourcePath = SD_CARD_PATH + "/"+Name+".xml"; 
           resultDir = SD_CARD_PATH + "/"+Name+"_xlst.xml";

           System.setProperty("javax.xml.transform.TransformerFactory",
                "net.sf.saxon.TransformerFactoryImpl");
           simpleTransform(sourcePath, xsltPath, resultDir);
           Log.d("XLST","XML saved as" + resultDir); 
```

但是创建的 .xml 文件是空的，并且 logcat 会抛出以下错误：

```
09-27 13:44:41.940: W/System.err(7736): (Location of error unknown)java.io.IOException: Couldn't open file:///mnt/sdcard/rg.xml 
```

但是 rg.xml 存在，我可以在我的外部 sd 卡上看到它。我还添加了 saxon.jar 作为类路径并将其插入到 libs 文件夹中。

任何人都知道为什么转换不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:17:24.333

您提到“saxon.jar”，这使您看起来可能正在运行一个相当旧的版本（也许是 6.5？）。您可能想尝试一些更新的东西。但是，Saxon 未在 Android 上进行测试或支持；我们知道存在问题，但我们没有做任何认真的工作来找出它们是什么以及是否有一个简单的解决方法（代码不会为 Android 编译，因为它依赖于 Android 平台上不存在的功能，我们要做的第一件事就是摆脱这些依赖。）

如果有人有任何让 Saxon 在 Android 上工作的经验，我们很想听听他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T14:49:30.267

Android 使用轻量级 XSLT 解析器 LibXML2 和轻量级 XSLT 标准 XSLT-version-1。

对于复杂的 XSLT 脚本（作为 XSLT2 特定函数），检查`hasExsltSupport()`并使用[EXSLT 的 commom 模块](http://www.exslt.org/exsl/index.html)和/或“注册函数”从 XSLT 脚本调用 Java 函数。

# python - pyspotify 分段错误（libspotify）

> ID：12620860
> 
> 赞同：0
> 
> 时间：2012-09-27T11:58:55.573
> 
> 标签：python, python-2.7, spotify

我正在尝试使用 pyspotify 但没有运气。

设置：

*   Ubuntu - 12.04 TLS - 全新（ish）安装
*   虚拟环境 - 1.8.2
*   libspotify - 12.1.51
*   pyspotiy - 开发 (1.8)

我有 pyspotify 示例`jukebox.py`，但是当我运行它时，它总是给出分段错误

*（我有这个例子在一个单独的虚拟机上工作，但是需要在一个新的虚拟机上复制功能。）*

```
$ python jukebox.py -uEMAIL_ADDRESS -pPASSWORD
Logging in, please wait...
Segmentation fault (core dumped) 
```

它`spotify_appkey.key`在同一个文件夹中（没有密钥，它不会到达 SegFault）。

此外，我创建了一个脚本来简单地连接到 Spotify，但这也给出了分段错误。

从 spotify.manager 导入

```
from spotify import SpotifySessionManager

session = SpotifySessionManager(username=EMAIL_ADDRESS, password=PASSWORD)

print('Connecting')
session.connect()
print('Connected') 
```

这也给出：

```
$ python test.py
Session created
Connecting
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T12:49:20.113

尝试以`jukebox.py`root 身份运行。

# wcf - 模拟调用者阻止连接到数据库（不是明显的权限问题）

> ID：12620862
> 
> 赞同：1
> 
> 时间：2012-09-27T11:59:00.877
> 
> 标签：wcf, impersonation

我有一个托管在 IIS 中的 Web 服务，该服务在一个域帐户下运行，该域帐户也具有对 SQL Server 的权限。下面提到的所有用户都可以访问此 SQL Server。

这是服务配置的片段：

```
<basicHttpBinding>
<binding name="SecureWebBinding">
<security mode="TransportCredentialOnly">
<transport clientCredentialType="Windows" /> 
```

... ETC。

在特定的服务方法中，我以服务帐户的身份调用数据库，并希望以调用服务的用户身份进行另一次调用（我们正在返回由调用用户创建的 FILESTREAM 事务上下文 - 这些是特定于用户的）。第一个调用完成，但第二个调用如下：

```
using (ServiceSecurityContext.Current.Impersonate())
{                    
   using (var connection = new SqlConnection(...Integrated Security = true...)
   {
      connection.Open(); //<---Exception 
```

调用后`Impersonate`，`WindowsIdentity.GetCurrent()`正确返回调用用户而不是服务帐户`ImpersonationLevel == Identification`。

如果我删除前 2 行，则操作以服务帐户的身份完成。当然，稍后对 FILESTREAM 的调用随后会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:36:30.473

您需要为服务器设置一个 SPN，以便在模拟时使用 kerberos。但这取决于您收到的错误消息。该资源应该可以帮助您，尽管我仍然遇到类似流程的问题，但是您的流程似乎应该与此一起使用：

[http://blogs.msdn.com/b/sql_protocols/archive/2006/12/02/understanding-kerberos-and-ntlm-authentication-in-sql-server-connections.aspx](http://blogs.msdn.com/b/sql_protocols/archive/2006/12/02/understanding-kerberos-and-ntlm-authentication-in-sql-server-connections.aspx)

# c# - 在按钮单击时验证动态 texbox

> ID：12620868
> 
> 赞同：2
> 
> 时间：2012-09-27T11:59:20.437
> 
> 标签：c#, asp.net, validation, dynamic, textbox

好吧，我已经处理这个问题两天了，我还没有解决这个问题。我想用 RegularExpressionValidation 验证文本框。

1.  用户从 Dropbox 中选择是或否
2.  如果是，则他们单击按钮以打开输入表单
3.  填写 texbox，并非全部都是必需的，但如果他们确实填写了日期，那么它必须采用正确的格式。
4.  如果有效，向导上的下一步按钮将再次可见，并且将显示一组新的文本框。注意：下一个按钮出现的唯一时间是一切都有效。

**我的主要问题是我希望它只验证这个向导步骤而不是整个“页面”**

每当我单击按钮时，我都会不断收到错误消息，但它可能来自正则表达式。证实（）：

System.NullReferenceException：对象引用未设置为对象的实例。

```
Source Error:

Line 590:
Line 591:     
Line 592:        addressRegEx.Validate(); <---Whats in red
Line 593:        EmployerRequired.Validate();
Line 594:        phoneRegex.Validate(); 
```

C＃：

```
protected void Page_Load(object sender, EventArgs e)

{ 
for (int i = 0; i < TotalNumberAddedEmployment; ++i)
    {
        addcontrolsemployment(i + 1);
    }
    if (Wizard1.ActiveStep == WizardStep3)
    {

        Button nxtButton = (Button)Wizard1.FindControl("StepNavigationTemplateContainerID$StepNextButton");
        nxtButton.Visible = false;
    }

}
public void addcontrolsemployment(int controlnumberEmp)
{

    var newPanel = new Panel();

    var employerLabel = new Label();
    var addressLabel = new Label();
    var phoneLabel = new Label();
    var fromDateLabel = new Label();
    var toDateLabel = new Label();
    var supervisorLabel = new Label();
    var jobTitleLabel = new Label();
    var dutiesLabel = new Label();
    var hoursLabel = new Label();
    var wageLabel = new Label();
    var leavingLabel = new Label();

    var employerTextbox = new TextBox();
    var addressTextbox = new TextBox();
    var phoneTextbox = new TextBox();
    var fromDateTextbox = new TextBox();
    var toDateTextbox = new TextBox();
    var supervisorTextbox = new TextBox();
    var jobTitleTextbox = new TextBox();
    var dutiesTextbox = new TextBox();
    var hoursTextbox = new TextBox();
    var wageTextbox = new TextBox();
    var leavingTextbox = new TextBox();

    // textbox needs a unique id to maintain state information
    employerTextbox.ID = "EmployerTextBox_" + controlnumberEmp;
    employerTextbox.Width = 250;
    //employerTextbox.Text = "Enter Employer Here";

    addressTextbox.ID = "AddressTextbox_" + controlnumberEmp;
    addressTextbox.AutoPostBack = true;
    phoneTextbox.ID = "phoneTextbox_" + controlnumberEmp;
    phoneTextbox.AutoPostBack = true;
    fromDateTextbox.ID = "fromDateTextbox_" + controlnumberEmp;
    toDateTextbox.ID = "toDateTextbox_" + controlnumberEmp;
    toDateTextbox.AutoPostBack = true;
    supervisorTextbox.ID = "supervisorTextbox_" + controlnumberEmp;
    supervisorTextbox.AutoPostBack = true;
    jobTitleTextbox.ID = "jobTitleTexbox_" + controlnumberEmp;
    jobTitleTextbox.AutoPostBack = true;
    dutiesTextbox.ID = "dutiesTextbox_" + controlnumberEmp;
    dutiesTextbox.Width = 250;
    dutiesTextbox.AutoPostBack = true;
    hoursTextbox.ID = "hoursTexbox_" + controlnumberEmp;
    hoursTextbox.AutoPostBack = true;
    wageTextbox.ID = "wageTexbox_" + controlnumberEmp;
    wageTextbox.AutoPostBack = true;
    leavingTextbox.ID = "leavingTexbox_" + controlnumberEmp;
    leavingTextbox.Width = 250;
    leavingTextbox.AutoPostBack = true; 
    //Label text
    employerLabel.Text = "Employer: ";
    addressLabel.Text = "Address: ";
    phoneLabel.Text = "Phone #: ";
    toDateLabel.Text = "To Date: ";
    fromDateLabel.Text = "From Date: ";
    supervisorLabel.Text = "Supervisor: ";
    jobTitleLabel.Text = "Job Title: ";
    dutiesLabel.Text = "Major Duties: ";
    hoursLabel.Text = "Hours Per Week:";
    wageLabel.Text = "Final Wage: ";
    leavingLabel.Text = "Reason for Leaving: ";

    //Regular Expression and Required field validators

    var addressRegEx = new RegularExpressionValidator();
    var EmployerRequired = new RequiredFieldValidator();
    var phoneRegex = new RegularExpressionValidator();
    var toDateRegex = new RegularExpressionValidator();
    var fromDateRegex = new RegularExpressionValidator();
    var supervisorRegex = new RegularExpressionValidator();
    var jobTitleRegex = new RegularExpressionValidator();
    var dutiesRegex = new RegularExpressionValidator();
    var hoursRegex = new RegularExpressionValidator();
    var wageRegex = new RegularExpressionValidator();
    var leavingRegex = new RegularExpressionValidator();

    EmployerRequired.Text = "Enter NA if No History";
    EmployerRequired.ID = "employerRequired" + controlnumberEmp;
    EmployerRequired.ControlToValidate = employerTextbox.ID;
    EmployerRequired.ValidationGroup = "EmploymentValid";

    addressRegEx.ValidationExpression = ".{0,50}";
    addressRegEx.Text = "Please Enter less than 50 characters for address";
    addressRegEx.ErrorMessage = "Please Enter less than 50 characters for address";
    addressRegEx.ControlToValidate = addressTextbox.ID;
   //addressRegEx.ValidationGroup = "EmploymentValid";

    phoneRegex.ID = "phoneRegex" + controlnumberEmp;
    phoneRegex.Text = "Please enter in (###)###-####";
    phoneRegex.ControlToValidate = phoneTextbox.ID;
    phoneRegex.ValidationExpression = @"((\(\d{3}\) ?)|(\d{3}-))?\d{3}-\d{4}";
   // phoneRegex.ValidationGroup = "EmploymentValid";

    toDateRegex.ID = "toDateRegex" + controlnumberEmp;
    toDateRegex.Text = "Please enter in MM/DD/YYY form";
    toDateRegex.ValidationExpression=@"^(((0?[1-9]|1[012])/(0?[1-9]|1\d|2[0-8])|(0?[13456789]|1[012])/(29|30)|(0?[13578]|1[02])/31)/(19|[2-9]\d)\d{2}|0?2/29/((19|[2-9]\d)(0[48]|[2468][048]|[13579][26])|(([2468][048]|[3579][26])00)))$";
    toDateRegex.ControlToValidate = toDateTextbox.ID;
   // toDateRegex.ValidationGroup = "EmploymentValid";

    fromDateRegex.ID = "fromDateRegex" + controlnumberEmp;
    fromDateRegex.Text = "Please enter in MM/DD/YYY form";
    fromDateRegex.ValidationExpression=@"^(((0?[1-9]|1[012])/(0?[1-9]|1\d|2[0-8])|(0?[13456789]|1[012])/(29|30)|(0?[13578]|1[02])/31)/(19|[2-9]\d)\d{2}|0?2/29/((19|[2-9]\d)(0[48]|[2468][048]|[13579][26])|(([2468][048]|[3579][26])00)))$";
    fromDateRegex.ControlToValidate = fromDateTextbox.ID;
   // fromDateRegex.ValidationGroup = "EmploymentValid";

    supervisorRegex.ID = "supervisorRegex" + controlnumberEmp;
    supervisorRegex.Text = "Please enter in 20 characters or less";
    supervisorRegex.ValidationExpression = ".{0,20}";
    supervisorRegex.ControlToValidate = supervisorTextbox.ID;
   // supervisorRegex.ValidationGroup = "EmploymentValid";

    jobTitleRegex.ID = "jobTitleRegex" + controlnumberEmp;
    jobTitleRegex.Text = "Please enter 30 characters or less";
    jobTitleRegex.ValidationExpression = ".{0,30}";
    jobTitleRegex.ControlToValidate = jobTitleTextbox.ID;
   // jobTitleRegex.ValidationGroup = "EmploymentValid";

    dutiesRegex.ID = "dutiesRegex" + controlnumberEmp;
    dutiesRegex.Text = "Please enter 60 characters or less";
    dutiesRegex.ValidationExpression = ".{0,60}";
    dutiesRegex.ControlToValidate = dutiesTextbox.ID;
   // dutiesRegex.ValidationGroup = "EmploymentValid";

    hoursRegex.ID = "hoursRegex" + controlnumberEmp;
    hoursRegex.Text = "Please enter up to 3 digits";
    hoursRegex.ValidationExpression = "[0-9]{0,3}";
    hoursRegex.ControlToValidate = hoursTextbox.ID;
  //  hoursRegex.ValidationGroup = "EmploymentValid";

    wageRegex.ID = "wageRegex" + controlnumberEmp;
    wageRegex.Text = "Please enter in currency format";
    wageRegex.ValidationExpression = @"(?n:(^\$?(?!0,?\d)\d{1,3}(?=(?<1>,)|(?<1>))(\k<1>\d{3})*(\.\d\d)?)$)";
    wageRegex.ControlToValidate = wageTextbox.ID;
   // wageRegex.ValidationGroup = "EmploymentValid";

    leavingRegex.ID = "leavingRegex" + controlnumberEmp;
    leavingRegex.Text = "Please enter 60 characters or less";
    leavingRegex.ValidationExpression = ".{0,60}";
    leavingRegex.ControlToValidate = leavingTextbox.ID;
  //  leavingRegex.ValidationGroup = "EmploymentValid";

    // add the label and textbox to the panel, then add the panel to the form
    newPanel.Controls.Add(new LiteralControl("<br />"));

    //newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(new LiteralControl("<table border='2px'><tr>"));
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(new LiteralControl("<td class='title-text'  >"));
    newPanel.Controls.Add(employerLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'width='180px' colspan='2'>"));
    newPanel.Controls.Add(employerTextbox);
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(EmployerRequired);

    newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text' >"));
    newPanel.Controls.Add(addressLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(addressTextbox);
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(addressRegEx);
    newPanel.Controls.Add(new LiteralControl("</td>"));

    newPanel.Controls.Add(new LiteralControl("<td class='title-text'>"));
    newPanel.Controls.Add(phoneLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(phoneTextbox);
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(phoneRegex);
    newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
    newPanel.Controls.Add(fromDateLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(fromDateTextbox);
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(fromDateRegex);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(toDateLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(toDateTextbox);
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(toDateRegex);
    newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
    newPanel.Controls.Add(supervisorLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(supervisorTextbox);
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(supervisorRegex);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(jobTitleLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(jobTitleTextbox);
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(jobTitleRegex);
    newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
    newPanel.Controls.Add(dutiesLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text' colspan='2'>"));
    newPanel.Controls.Add(dutiesTextbox);//next to it
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(dutiesRegex);
    newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
    newPanel.Controls.Add(hoursLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(hoursTextbox);
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(hoursRegex);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(wageLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(wageTextbox);
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(hoursRegex);
    newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
    newPanel.Controls.Add(leavingLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text' colspan='2'>"));
    newPanel.Controls.Add(leavingTextbox); // next to it
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(leavingRegex);
    newPanel.Controls.Add(new LiteralControl("</td></tr></table><br /><hr>"));

    addressRegEx.Validate();
    EmployerRequired.Validate();
    phoneRegex.Validate();
    toDateRegex.Validate();
    fromDateRegex.Validate(); 
    supervisorRegex.Validate();
    jobTitleRegex.Validate();
    dutiesRegex.Validate();
    hoursRegex.Validate();
    wageRegex.Validate();
    leavingRegex.Validate();
    if((EmployerRequired.IsValid) && (addressRegEx.IsValid) && (phoneRegex.IsValid) && (toDateRegex.IsValid) && (toDateRegex.IsValid)  && (fromDateRegex.IsValid)&& (supervisorRegex.IsValid)&&(jobTitleRegex.IsValid)&&(dutiesRegex.IsValid)&&(hoursRegex.IsValid)&&(wageRegex.IsValid) && (leavingRegex.IsValid))
   {

    EmploymentPlaceHolder.Controls.Add(newPanel);

   }

}

protected int TotalNumberAddedEmployment
{
    get { return (int)(ViewState["TotalNumberAddedEmployment"] ?? 0); }
    set { ViewState["TotalNumberAddedEmployment"] = value; }
}
protected void EmploymentButton_Click(object sender, EventArgs e)
{

        Page.Validate();

        if (Page.IsValid)
        {
            Button nxtButton = (Button)Wizard1.FindControl("StepNavigationTemplateContainerID$StepNextButton");
            nxtButton.Visible = false;
            return;

        }
        else
        {
            // Increase the number added and add the new label and textbox
            TotalNumberAddedEmployment++;
            addcontrolsemployment(TotalNumberAddedEmployment);

            Button nxtButton =       (Button)Wizard1.FindControl("StepNavigationTemplateContainerID$StepNextButton");
            nxtButton.Visible = true;
        }

}
protected void ExperienceDropDownList_SelectedIndexChanged(object sender, EventArgs e)
{
   if (ExperienceDropDownList.SelectedValue == "Yes")
    {
        Button nxtButton = (Button)Wizard1.FindControl("StepNavigationTemplateContainerID$StepNextButton");
        nxtButton.Visible = false;
        addcontrolsemployment(1);

    }
    else 
    {

        Button nxtButton = (Button)Wizard1.FindControl("StepNavigationTemplateContainerID$StepNextButton");
        nxtButton.Visible = true;

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:30:16.517

看看这篇文章[创建动态用户友好的基于 Web 的数据收集表单](http://www.codeproject.com/Articles/485798/Creating-Dynamic-User-Friendly-Web-Based-Data-Coll)我想你会找到你的问题的答案。

# java - android：淡入动画

> ID：12620870
> 
> 赞同：1
> 
> 时间：2012-09-27T11:59:23.647
> 
> 标签：java, android

我尝试以特定顺序淡入按钮。每次一个按钮淡出，但在代码完成后按钮一起淡入。我尝试在每个淡入淡出顺序之后使用 Thread.sleep ，但它根本没有帮助。有人有想法吗？

编码：

```
 for(int i=0;i<counter;i++)

    {

        switch (entered[i]) {
        case 1:
            ImageView myImageView1= (ImageView)findViewById(R.id.red_button);
            Animation myFadeInAnimation1 = AnimationUtils.loadAnimation(this, R.anim.fadein);
            myImageView1.startAnimation(myFadeInAnimation1); //Set animation to your ImageView
            break;

        case 2:
            ImageView myImageView2= (ImageView)findViewById(R.id.yellow_button);
            Animation myFadeInAnimation2 = AnimationUtils.loadAnimation(this, R.anim.fadein);
            myImageView2.startAnimation(myFadeInAnimation2); //Set animation to your ImageView
            break;  
        case 3:
            ImageView myImageView3= (ImageView)findViewById(R.id.green_button);
            Animation myFadeInAnimation3 = AnimationUtils.loadAnimation(this, R.anim.fadein);
            myImageView3.startAnimation(myFadeInAnimation3); //Set animation to your ImageView
            break;  
        case 4:
            ImageView myImageView4= (ImageView)findViewById(R.id.blue_button);
            Animation myFadeInAnimation4 = AnimationUtils.loadAnimation(this, R.anim.fadein);
            myImageView4.startAnimation(myFadeInAnimation4); //Set animation to your ImageView
            break;
        default:
            //finish();
            break;
        }

        try {
            Thread.sleep(3000);    // one second
        }

        catch (Exception e) {} 

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:12:24.820

我想您在从系统到您的应用程序的回调之一中运行它，例如点击处理程序。Android 会累积您所做的所有更改并在此回调返回后应用它们。

您可以做的是编写一个 AsyncTask ，在其 onPublishProgess 方法中进行颜色更改，然后执行 doInBackground 循环并等待并发布进度。

# java - 将接口名称也用作 bean 名称时的 Spring 行为？

> ID：12620872
> 
> 赞同：1
> 
> 时间：2012-09-27T11:59:27.707
> 
> 标签：java, spring

前几天我在我的代码库中发现了以下非正统的配置，这让我感到奇怪。当我将接口名称也用作 bean 的名称时，预期的 Spring Context 行为是什么？如果我在控制器中使用 @Autowireing 会有所不同吗？以下代码段说明了此设置：

```
interface MyAppService {...}

class InfrastructureService implements MyAppService {...}

class AdministrationService implements MyAppService {...}

class InfrastructureController {
   // some code
   public void setMyAppService(MyAppService svc){...}
}

<bean id="myAppService" class="InfrastructureService"/>

<bean id="administrationService" class="AdministrationService"/>

<bean id="infrastructureController" class="InfrastructureController">
   <property name="myAppService" ref="myAppService"/>
</bean> 
```

或者，如果仅将控制器定义为：

```
class InfrastructureController {
   @Autowired
   public void setMyAppService(MyAppService svc){...}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:01:16.490

为什么在这里很重要？`id`您在 xml 中引用 bean ，而不是按接口类型。

`<property name="myAppService" ref="myAppService"/>`

这意味着命名的属性将注入`myAppService`带有 id 的 bean 。`myAppService`与接口无关。

编辑：如果您使用带有注释的自动装配，并且您将同一接口的许多不同实现注册为组件，那么您必须使用`qualifiers`来告诉`Spring`您将使用哪个实现。如果您只注册了一个实现，则无需执行任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:10:40.123

如果您单独放置@AutoWired，它会按类型搜索依赖项（在您的情况下是MyAppService）。如果您想缩小依赖项搜索范围，可以使用@Qualifier，如下所示：

```
class InfrastructureController {
@Autowired
@Qualifier("NAME_OF_BEAN")
public void setMyAppService(MyAppService svc){...}
} 
```

# asp.net - 用于 FileUpload 客户端验证的 RegEx

> ID：12620874
> 
> 赞同：1
> 
> 时间：2012-09-27T11:59:31.253
> 
> 标签：asp.net, regex, validation, symbols

我正在尝试创建一个 RegEx 验证器，它根据允许的扩展名列表（用户指定）检查 FileUpload 输入中的文件扩展名。以下是据我所知，但我正在努力解决`\`文件路径中出现的反斜杠 ( ) 的语法。显然下面是不正确的，因为它只是转义了`]`导致错误的 ( )。我会非常感谢这里的任何帮助。那里似乎有很多例子，但当我尝试它们时似乎没有一个有效。

```
[a-zA-Z_-s0-9:\]+(.pdf|.PDF)$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:04:48.550

要在字符类中包含反斜杠，您需要使用特定的转义序列 ( `\b`)：

```
[a-zA-Z_\s0-9:\b]+(\.pdf|\.PDF)$ 
```

请注意，这可能有点令人困惑，因为在字符类之外，`\b`它表示单词边界。我还假设这`-s`是一个错字，应该代表一个空白。（否则它不应该编译，我认为）

**编辑：**您还需要避开这些点。否则，它们将成为除换行符之外的**任何字符的元字符。**

**另一个编辑：**如果您确实希望在文件名中允许使用连字符，则需要将连字符放在字符类的末尾。像这样：

```
[a-zA-Z_\s0-9:\b-]+(\.pdf|\.PDF)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:06:10.980

你可能想使用类似的东西

```
[a-zA-Z_0-9\s:\\-]+\.[pP][dD][fF]$ 
```

这与

```
[\w\s:\\-]+\.[pP][dD][fF]$ 
```

因为`\w`=`[a-zA-Z0-9_]`

确保字符`-`作为列表中的第一项或最后一项`[...]`，否则对于范围或字符具有特殊含义，例如`a-z`.

字符也`\`必须用另一个斜线转义，即使在`[...]`.

# c# - 如果可观察集合中对象的属性发生更改，则在 XAML 中调用转换器

> ID：12620875
> 
> 赞同：1
> 
> 时间：2012-09-27T11:59:52.943
> 
> 标签：c#, .net, wpf, xaml, observablecollection

我有一个接受 a`ObservableCollection`作为参数的转换器，每当集合中任何项目的特定属性发生变化时，我都想重新评估它

例如：假设我已经`Person`使用转换器将标签绑定到对象集合。转换器的工作是计算列表中女性的人数，并为 1 位女性返回“有效”或为 2 位女性返回“接受”。我希望转换器在任何时候再次调用`Gender`任何`Person`对象上的属性变了。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:38:40.207

如果您在 WPF 上玩的时间足够长，那么您最终会遇到的经典问题。

我尝试了各种解决方案，但效果最好的一个是使用 BindingList ，如下所示：

```
public class WorldViewModel : INotifyPropertyChanged
{
   private BindingList<Person> m_People;
   public BindingList<Person> People
   {
      get { return m_People; }
      set
      {
         if(value != m_People)
         {
            m_People = value;
            if(m_People != null)
            {
               m_People.ListChanged += delegate(object sender, ListChangedEventArgs args)
               {
                  OnPeopleListChanged(this);
               };
            }
            RaisePropertyChanged("People");
         }
      }
   }

   private static void OnPeopleListChanged(WorldViewModel vm)
   {
      vm.RaisePropertyChanged("People");
   }

   public event PropertyChangedEventHandler PropertyChanged;
   void RaisePropertyChanged(String prop)
   {
      PropertyChangedEventHandler handler = this.PropertyChanged;
      if (handler != null)
      {
          handler(this, new PropertyChangedEventArgs(prop));
      }
   }
} 
```

然后就像使用 ObservableCollection 一样绑定到 People 集合，除了绑定将在其项目中的任何属性更改时重新评估。

另外，请注意 OnPeopleListChanged 是静态的，因此没有内存泄漏。

Person 应该实现 INotifyPropertyChanged。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:16:35.830

仅当从集合中添加或删除项目时（而不是更改集合中的项目），才会引发 CollectionChanged 事件。因此，更改项目时不会调用转换器。

一种选择：
在 Gender Property Set 中包含评估集合的逻辑并设置您将标签绑定到的字符串 Property。

写了狒狒答案的通用版本

```
public class ObservalbeList<T>: INotifyPropertyChanged
{
    private BindingList<T> ts = new BindingList<T>();

    public event PropertyChangedEventHandler PropertyChanged;

    // This method is called by the Set accessor of each property. 
    // The CallerMemberName attribute that is applied to the optional propertyName 
    // parameter causes the property name of the caller to be substituted as an argument. 
    private void NotifyPropertyChanged( String propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public BindingList<T> Ts
    {
        get { return ts; }
        set
        {
            if (value != ts)
            {
                Ts = value;
                if (Ts != null)
                {
                    ts.ListChanged += delegate(object sender, ListChangedEventArgs args)
                    {
                        OnListChanged(this);
                    };
                }
                NotifyPropertyChanged("Ts");
            }
        }
    }

    private static void OnListChanged(ObservalbeList<T> vm)
    {
        vm.NotifyPropertyChanged("Ts");
    }

    public ObservalbeList()
    {
        ts.ListChanged += delegate(object sender, ListChangedEventArgs args)
        {
            OnListChanged(this);
        };
    }
} 
```

# sockets - 加载 Primefaces 推送/大气示例时关闭 websocket

> ID：12620877
> 
> 赞同：0
> 
> 时间：2012-09-27T12:00:07.380
> 
> 标签：sockets, netbeans, primefaces, glassfish, atmosphere

我按照本教程在 primefaces 项目中做了一个简单的计数器应用程序： [http ://blog.eisele.net/2012/09/primefaces-push-with-atmosphere-on.html](http://blog.eisele.net/2012/09/primefaces-push-with-atmosphere-on.html)

加载带有计数器的页面时，我收到一条错误消息，提示 websocket 未正确关闭？

我想知道这是否与 Glassfish 的配置有关？我启用了彗星支持和 websockets，但我可能错过了其他设置？

[配置：GlassFish 3.1.2 Atmosphere 1.0.1 Primefaces 3.4.1 Netbeans 7.2]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:18:14.397

好的，找到了，希望对其他人有帮助。

不要尝试通过 GlassFish 管理面板 (localhost:4848) 启用彗星，而是访问 Netbeans 中的服务面板，右键单击 Glassfish 服务器，然后勾选“启用彗星”。解决了。我想 Eclipse 具有相同类型的 UI。

如果我编写了命令行版本以启用我最初问题中提到的博客文章中建议的彗星，所有这一切可能都不会发生。但我还不是命令行爱好者......

# java - “收集新标签”而不是读取应用程序的标签 - NFC android

> ID：12620880
> 
> 赞同：6
> 
> 时间：2012-09-27T12:00:16.283
> 
> 标签：java, android, tags, nfc, nexus-s

我有一堂课，它创建了与 NFC 和两个活动的连接。它们都创建了该类的对象，以便它们可以连接到 NFC。早些时候它以某种方式工作，但现在我遇到了问题 - 我的应用程序在NewIntent上没有做任何事情，即使在第一个活动上也是如此。取而代之的是，我可以从名为“标签”（Nexus S）的内置应用程序中看到“收集的新标签”。

我应该怎么办？

班级：

```
public NFCForegroundUtil(Activity activity)
{
    super();
    this.activity = activity;
    mAdapter = NfcAdapter.getDefaultAdapter(activity
            .getApplicationContext());

    mPendingIntent = PendingIntent.getActivity(activity, 0, new Intent(
            activity, activity.getClass())
            .addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);

    IntentFilter ndef = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);
    IntentFilter ndef2 = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
    IntentFilter ndef3 = new IntentFilter(NfcAdapter.ACTION_TECH_DISCOVERED);

    try
    {
        ndef2.addDataType("*/*");
    }
    catch (MalformedMimeTypeException e)
    {
        throw new RuntimeException("fail", e);
    }

    mFilters = new IntentFilter[] {ndef, ndef2, ndef3 };

    mTechLists = new String[][] { new String[] {
            // android.nfc.tech.NfcV.class.getName(),
            android.nfc.tech.NfcA.class.getName(),
            android.nfc.tech.IsoDep.class.getName() } };

    mAdapter.enableForegroundDispatch(this, mPendingIntent, mFilters, mTechLists);

} 
```

活动一：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    nfcForegroundUtil = new NFCForegroundUtil(this);

}

 @Override
protected void onNewIntent(Intent intent)
{

    super.onNewIntent(intent);
    Intent i = new Intent(this, NfcDisplayLabelActivity2.class);
    startActivity(i);

 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-26T11:07:22.883

转到设置->应用程序->所有->标签（在我的情况下）->禁用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-19T21:57:26.657

尝试从 NFC 标签打开我的应用程序时，我遇到了类似的问题。我在我的 AndroidManifest.xml 中为方案“magicnfc”注册了一个意图过滤器，但它打开了 Android OS Tags 应用程序而不是我的。

我发现 NFC 意图（在我的例子中为 TECH_DISCOVERED）比基于通用方案的意图过滤器具有更高的优先级。因为标签应用程序注册了 TECH_DISCOVERED，所以它被打开而不是我的。

幸运的是，应用可以注册 NDEF_DISCOVERED（更高优先级的过滤器）并打开而不是标签应用。

当我点击标签时，这让我的应用程序打开了。

更多信息在这里：http: [//developer.android.com/guide/topics/connectivity/nfc/nfc.html](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)

但是我发现我不得不重写 onNewIntent 函数，代码如下：

```
if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
    String uri = intent.getDataString();

    Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
    if (rawMsgs != null) {
        msgs = new NdefMessage[rawMsgs.length];
        for (int i = 0; i < rawMsgs.length; i++) {
            msgs[i] = (NdefMessage) rawMsgs[i];
        }
    }
} 
```

对我来说，我所需要的只是：

```
String uri = intent.getDataString(); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-16T17:23:48.400

您可以侦听使用意图激活的*所有*`ACTION_TAG_DISCOVERED`标签，而不是使用以下代码过滤特定标签：

```
public NFCForegroundUtil(Activity activity)
{
    super();
    this.activity = activity;
    mAdapter = NfcAdapter.getDefaultAdapter(activity
            .getApplicationContext());

    mPendingIntent = PendingIntent.getActivity(activity, 0, new Intent(
            activity, activity.getClass())
            .addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 
0);

    // See below
    mAdapter.enableForegroundDispatch(this, mPendingIntent, null, null);
} 
```

从[NFCAdapter 文档](http://developer.android.com/reference/android/nfc/NfcAdapter.html#enableForegroundDispatch%28android.app.Activity,%20android.app.PendingIntent,%20android.content.IntentFilter[],%20java.lang.String[][]%29 "Nfc适配器")：

> 如果您为过滤器和 techLists 参数传递 null ，它们充当通配符并将导致前台活动通过 ACTION_TAG_DISCOVERED 意图接收所有标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-10T16:32:38.630

你的问题是当你初始化意图时我 onNewIntent

类应该是它本身，而不是第二类。

正确的代码应该是：

```
@Override
protected void onNewIntent(Intent intent)
{
    super.onNewIntent(intent);
    Intent i = new Intent(this, NfcDisplayLabelActivity1.class);
    startActivity(i);
 } 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-11-15T11:50:44.170

I was seeing "New tag collected" from build-in app called "Tags" because my application didn't work properly.

When it works ok, it has higher priority than "Tags" and phone reads tags from my application. But when it works unproperly and phone collect a tag, "Tags" application is activated and "Tags" application talks to my device.

After repairing code, my app has higher priority and phone reads tags using my application.

# php - 将其他属性添加到链接功能

> ID：12620881
> 
> 赞同：1
> 
> 时间：2012-09-27T12:00:18.203
> 
> 标签：php, doctrine, doctrine-1.2

我想在关系表中插入一个其他属性（`tiers_temps`在我的示例中为“”），该属性是否可以使用函数“ `link()`”或其他？

我实际上使用了这些代码，但我必须更新归档的“ `tiers_temps`”：

```
$Examen->link('Users', $listAdd); 
```

使用表“user_has_examen”结构：

```
Field       Type    Null  Key Default Extra
user_id     int(11) NO    PRI 0  
examen_id   int(11) NO    PRI 0  
tiers_temps int(11) YES       NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:02:29.150

当我发现自己处于这些情况时，我宁愿放弃多对多的表识别并转向这样的结构：

*   ID
*   用户身份
*   考试编号
*   tiers_temps

因为我发现在您使用的结构中管理值 tiers_temps 非常不方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:00:30.407

你的提议没有错误。对象 $user 指的是表“user”而不是“user_has_examen”（不是之前描述的，这是正确的），因此用户不存在“tiers_temps”。该解决方案有效，但我循环访问 Doctrine ...

```
foreach($user as $userId){
    $UserExam = Doctrine::getTable('UserExamen')->findByDql('user_id = ? AND examen_id = ?', array($userId, $exam))->getFirst();
    if($UserExam->tiers_temps != $users[$userId]){
        $UserExam->tiers_temps = $users[$userId];
        $UserExam->save();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:41:55.570

我没有找到与中间项目交互的好方法。但是您可以对关系采取行动以检索所有用户，然后`tiers_temps`在保存之前应用您的值`Examen`：

```
$Examen->link('Users', $listAdd);

$users = $Examen->Users;
foreach ($users as $user)
{
  $user->tiers_temps = '45';
} 
```

# c# - 如果在 C# 桌面应用程序中未选中所有子复选框且未选中其中一个复选框，则将检查标题中的复选框

> ID：12620886
> 
> 赞同：0
> 
> 时间：2012-09-27T12:00:38.667
> 
> 标签：c#, .net

我在 C# .net Windows 应用程序中有一个 datagridview ，其中有一个复选框列，并且我添加了一个标题复选框。

添加标题复选框和复选框列的代码是

```
DataGridViewCheckBoxColumn c1;
CheckBox ckBox;

private void CheckboxSelect_Load(object sender, EventArgs e)
{
c1 = new DataGridViewCheckBoxColumn();
c1.Name = "selection";
c1.HeaderCell.Style.Alignment = DataGridViewContentAlignment.MiddleCenter;

this.dgvSelectAll.Columns.Add(c1);
this.dgvSelectAll.Rows.Add();
this.dgvSelectAll.Rows.Add();
this.dgvSelectAll.Rows.Add();
this.dgvSelectAll.Rows.Add();

ckBox = new CheckBox();
Rectangle rect =this.dgvSelectAll.GetCellDisplayRectangle(0, -1, true);
ckBox.Size = new Size(18, 18);
ckBox.Location = rect.Location;
this.dgvSelectAll.Controls.Add(ckBox);
} 
```

是否有可能如果选中所有复选框，则将选中标题复选框，并且在选中的复选框中未选中一个复选框，则在 C#.Net Windows 应用程序中未选中标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:15:27.440

尝试这个，

```
 void dgvSelectAl_CellValueChanged(object sender, DataGridViewCellEventArgs e)
    {
        if (e.ColumnIndex == 0)
        {
            DataGridViewCheckBoxCell cellCheck = (DataGridViewCheckBoxCell)dgvSelectAl[e.ColumnIndex, e.RowIndex];
            if (cellCheck != null)
            {
                if ((bool)cellCheck.Value == true)
                {
                    checkBoxCounter++;
                }
                else
                {
                    checkBoxCounter--;
                }
            }
            if (checkBoxCounter == dgvSelectAl.Rows.Count-1)
            {
                ckBox.Checked = true;
            }
            else if (checkBoxCounter != dgvSelectAl.Rows.Count-1)
            {
                ckBox.Checked = false;
            }
        }
    } 
```

# mysql - 从 DateTimeField-Mysql 查询比较时间

> ID：12620893
> 
> 赞同：0
> 
> 时间：2012-09-27T12:00:44.810
> 
> 标签：mysql

我有一张表，其中字段“CreatedTime”作为日期时间文件（例如：2012-09-18 13:01:33）。我想用 CreatedTime 作为“AM”（即在 12 之前）获取该表中的所有行。我该如何为此编写查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:03:03.260

SELECT * FROM table_name where date_format(CreatedTime,'%p') = 'AM'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:07:41.203

这个应该工作：

```
 SELECT * FROM table WHERE hour(CreatedTime) < 12 
```

# ruby-on-rails - 用一个实际的例子理解 BDD

> ID：12620897
> 
> 赞同：5
> 
> 时间：2012-09-27T12:00:53.667
> 
> 标签：ruby-on-rails, testing, tdd, cucumber, bdd

我正在尝试加入行为驱动的开发方法，但要使用它，我需要了解如何以这种方式思考。

我想在我现在开始的一个新的个人项目上对其进行测试（我将使用 RoR）

该项目将提供 API 来从外部应用程序收集数据，它将提供一个身份验证系统（设计）、几个模型来根据需要收集数据，以及一个购买订阅的支付系统，这将提供一些仅限高级功能的功能。

除了 DRY 之外，我应该执行哪些测试才能涵盖所有这些功能？

我想我应该同时使用 RSpec 和 Cucumber。对于 Devise，我将按照他们网站上的文档进行操作，但我不清楚我应该执行哪种测试来检查数据是否已正确收集并正确显示给用户以及用于该任务的工具。另外，如果您可以提供一个简单的示例，说明您将如何组织此类项目的测试和开发将有所帮助（我不是在询问真正的测试代码-因为我认为它确实取决于实现-，而是关于开发过程和您将执行的各种测试）。如果您需要更多详细信息来做出选择，请告诉我并随时发明它，因为它是出于教育目的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T09:40:26.737

我认为如果没有人插话，就不能提及 BDD，因为这完全是关于交流的。所以我会成为那个人：一切都与沟通有关！真正的价值在于与不同的利益相关者以可访问的方式探索功能，以确定系统需要透明地做什么。由于每个人都说同一种语言，因此交流目标要容易得多。在实现方面，开发人员知道他们在做什么，利益相关者知道他们得到了什么，不应该有太多的惊喜（除了你错过/错误捕获/可能还没有意识到的事情）。

所以，走出去，与你的利益相关者交谈，并弄清楚*调试*系统的人想要它做什么。如果这是一项单独的努力，您将需要戴上许多不同的帽子。

您的 BDD 测试将涵盖系统的行为 - 所需功能的单元。您仍然需要进行单元测试等 - 那里没有变化。

作为产品负责人，请考虑您希望系统做什么，而不是*如何**做*。你可能不在乎事情是如何运作的，只要它们确实有效。如果您是开发人员，这可能是思维上的艰难转变。当我第一次开始研究 BDD 时，我确信在场景中经历 UI 旅程和技术细节等是有意义的。它没有。这些东西属于步骤定义。作为开发人员，您可以在那里定义所有*内容*。

至于保持干燥......准确地编写您的场景，以便捕获所需的行为。然后，您可以担心重构和确定步骤重用的机会。在某种程度上，使用正则表达式也会有所帮助。超级命令并拥有一整套可重复使用的步骤是很诱人的，但是当对单个步骤的更改波及所有场景时，您可能会意识到这一切都非常脆弱，而不仅仅是应该的场景影响。如果您对任何形式的网络自动化感兴趣，请查看网络自动化金字塔。

有用的资源（和很多例子）：

[http://books.openlibra.com/pdf/cuke4ninja-2011-03-16.pdf](http://books.openlibra.com/pdf/cuke4ninja-2011-03-16.pdf) < 很棒的免费电子书——阅读也很有趣。

[http://www.slideshare.net/lunivore/behavior-driven-development-11754474](http://www.slideshare.net/lunivore/behavior-driven-development-11754474) < Liz 真的很了解她的东西！

[http://dannorth.net/2011/01/31/whose-domain-is-it-anyway/](http://dannorth.net/2011/01/31/whose-domain-is-it-anyway/)

[https://www.google.co.uk/search?q=declarative+vs+imperative+BDD](https://www.google.co.uk/search?q=declarative+vs+imperative+BDD) < 去团队声明！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:45:16.323

我不确定这是否符合您的确切要求，但这就是我做 BDD 的方式（例如 webapp）：

假设您作为应用程序的用户坐在计算机前。写下实现其中一个用例所需执行的步骤，例如：

导航到系统的 url Login 选择您需要的功能 输入相关数据以执行功能 点击按钮启动功能 等待系统响应 确保屏幕上的数据与您期望的数据匹配。

如果这些步骤中的任何一个未能执行，或者数据不正确，则测试失败。

一旦你在测试文件中有这个，你就可以使用 Gherkin/Cucumber/Webdriver 来实现执行每个步骤所需的代码。每个方法都是可重复使用的，所以一旦你在一个地方实现了登录，它应该可以在你调用它的任何地方工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T06:51:10.017

用黄瓜或 rspec 进行测试以进行设计试试这个

看到这个 - [cucumber/rspec](https://github.com/railsapps/rails3-devise-rspec-cucumber) 或[在 github](https://github.com/railsapps/rails3-devise-rspec-cucumber)

# javascript - href="javascript:jsfunction();" 之间有什么不同 和 onclick="javascript:jsfunction();"

> ID：12620904
> 
> 赞同：1
> 
> 时间：2012-09-27T12:01:14.097
> 
> 标签：javascript, html

> **可能重复：**
> [将 JavaScript 代码放入 <a> 的不同方法之间有什么区别？](https://stackoverflow.com/questions/245868/what-is-the-difference-between-the-different-methods-of-putting-javascript-code)

之间有什么不同

```
<a href="javascript:jsFunction();">test</a> 
```

和

```
<a href="javascript:void(0);" onclick="javascript:jsFunction();">test</a> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:02:57.283

第一个仅适用于`a`标签。这是一个链接，被您的浏览器解释为 javascript。

第二个是 DOM 事件，可用于所有标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:11:57.407

不是这个@param

```
<a href="javascript:jsFunction(this);">test1</a> 
```

成功这个@param

```
<a href="javascript:void(0);" onclick="javascript:jsFunction(this);">test2</a> 

function jsFunction($this) {

    return $this; // not href  attribute this @param ; onClick attribute success  this @patam
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:08:58.983

第一个是使用该`javascript`协议的链接，告诉浏览器在此之后执行所有内容作为 JavaScript，而不是尝试加载它指向的资源。

另一方面，该`onclick`属性是一个实际的 JavaScript 事件处理程序，不应该`javascript:`在开始时使用 with - 它已经*知道*它是 JavaScript，因此不需要被告知将其作为 JavaScript 执行。

但是，为了将您的内容 (HTML) 和功能 (JavaScript) 分开，最好不要使用上述任何一种技术，而是添加（例如）`id`属性来标识您的元素，然后使用 JavaScript 绑定您的事件处理程序.

HTML：

```
<a href="#" id="test-anchor">test</a> 
```

JavaScript：

```
document.getElementById('test-anchor').onclick = function(event) {
    jsFunction();
} 
```

# java - 在java中将日期或日期字符串设置为日历

> ID：12620907
> 
> 赞同：0
> 
> 时间：2012-09-27T12:01:16.010
> 
> 标签：java, date, calendar

我有这样的代码......

```
public static void main(String args[]) {
    Calendar cal = Calendar.getInstance();
    Calendar currentcal = Calendar.getInstance();

    cal.set(2012, Calendar.SEPTEMBER, 28);

    currentcal.set(currentcal.get(Calendar.YEAR),
            currentcal.get(Calendar.MONTH),
            currentcal.get(Calendar.DAY_OF_MONTH));
    if (cal.before(currentcal))
        System.out.print("before");
    else if (cal.after(currentcal))
        System.out.print("after");
    else
        System.out.print("Equal");
} 
```

我的需要是我必须将日期设置为“2012-09-27”或 2012-09-27 到**cal.set(2012, Calendar.SEPTEMBER, 28);**

而不是将日期设置为**cal.set(2012, Calendar.SEPTEMBER, 28);**

动态明确意味着，我想直接将数据库中的日期（如“2012-09-27”或 2012-09-27）直接设置为日历。

我需要**cal.set("2012-09-27");** 或者我需要**cal.set(2012-09-27);**

而是这样...

**cal.set(2012, Calendar.SEPTEMBER, 28);**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:04:43.490

你看过[DateFormat.parse()](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)吗？

您可以使用您希望解析的适当格式构造一个[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)，并且解析输入字符串的结果是一个`java.util.Date`.

（请注意，如果您从数据库中获取日期，那么它可能会以[java.sql.Timestamp](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/Timestamp.html)的形式返回，您根本不需要解析它）

# c++ - 放置友元声明

> ID：12620908
> 
> 赞同：7
> 
> 时间：2012-09-27T12:01:17.540
> 
> 标签：c++, class, friend, protected, private-members

将子句放在类中的哪个`friend`位置（即在`protected`块内而不是`private`块内）是否重要？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T12:02:47.087

不，不是的。

```
class X
{
public:
    friend class A;
private:
    friend class B;
protected:
    friend class C;
}; 
```

这三个班级现在都是朋友`X`并享有完全相同的特权。

一个好的约定是将所有朋友声明组合在一起以提高可见性，但这只是风格。

### 11.4 朋友

> 9) 由友元声明指定的名称应可在包含友元声明的类范围内访问。`private`无论朋友声明出现在类成员规范的,`protected`或`public`(9.2) 部分中，朋友声明的含义都是相同的。

# html - 扩展动态背景

> ID：12620912
> 
> 赞同：1
> 
> 时间：2012-09-27T12:01:50.700
> 
> 标签：html, css, dynamic

我有一个居中的包装 div，其中包括一个标题、三个内容列（基于内容长度的（基于 css 的）动态高度）和一个页脚。

现在我想要一个背景，将这些元素的颜色向左和向右扩展。

这是一个 js-fiddle 演示：http: [//jsfiddle.net/SLvYx/](http://jsfiddle.net/SLvYx/)

所以我希望左上角为红色，左中角为黄色，左下角为绿色，依此类推。我的第一个解决方案是使用宽度为 2500 像素的背景 .png 作为正文，但那是在基于内容的列的动态高度被认为是必要的之后才实施的。

恐怕可能没有纯基于 html/css 的解决方案，但 JQuery 或 javascript 也是一种选择，尽管我只是脚本方面的初学者。也许我想开箱即用，也许我必须重做整个 html 结构来完成这个，但我不介意。:-)

我几乎到处搜索，但在任何地方都找不到那个特定的案例。

非常感谢您的帮助，因此提前感谢所有对此进行调查的人。

编辑：我发现这篇文章：[Dynamic table size html](https://stackoverflow.com/questions/1775715/dynamic-table-size-html?rq=1) that could help, 也许这是一个解决方案，使用一个有 5 列的表格，第一个用于左侧背景，第二至第四个用于内容，第五个用于右侧背景...这是热烈推荐的，还是我应该把桌子放在外面？

这是我的演示的完整代码：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />  <title>Test</title>
<style type="text/css">
body {margin:0;}
#wrapper {margin: 0px auto; width: 940px;}
#header {background:red; height:100px;}
#content_wrapper {width: 940px; padding: 0px 0px 0px 0px; background: #CCC; overflow: hidden;}
#leftcolumn {background:yellow; width: 470px; float:left; height:auto; min-height: 680px;}
#middlecolumn {background:goldenrod; width: 235px; float:left; height:100%; margin-bottom: -1000px; padding-bottom: 1000px;}
#rightcolumn {background:darkgoldenrod ; width: 235px; float:left; height:100%;margin-bottom: -1000px; padding-bottom: 1000px;}
#footer {background:lightgreen; height:100px;}
</style>
</head> 
<body>

<div id="wrapper">

    <div id="header">
        Header
    </div>

        <div id="content_wrapper">        

            <div id="leftcolumn">
                Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />Left Column<br />
            </div>

            <div id="middlecolumn">
                Middle Column
            </div>

            <div id="rightcolumn">
                Right Column
            </div>

        </div>    

    <div id="footer">
        Footer
    </div>

</div>    

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:42:53.177

不，您不需要 javascript 或表格。常规的 ol'（基于 div）的 HTML 和 CSS 可以解决问题。

您需要做的是稍微重组您的页面。不要依赖包装器 div，而是堆叠三个主要部分，然后在每个部分中添加一个内部 div，它是您想要的宽度。请参阅更新的[JSFiddle](http://jsfiddle.net/SLvYx/1/)。

我在每个部分中添加了一个（当然是非语义的）div，其类为“inner”，它获得了您所追求的 940 宽度。

现在唯一的技巧是中间部分。您要做的是创建一个非常宽、短的图像。比如说，3000px 宽 x 1px 高。将其拆分为 50/50，使左侧为黄色，右侧为暗金色棒。如果您使用该图像作为 content_wrapper 的背景，并使其垂直平铺，则会产生颜色从侧面延伸的错觉。这适用于大多数浏览器。

如果你不关心旧浏览器，你甚至可以更进一步，在 content_wrapper 的背景上使用 CSS Gradients。[看到这个更进一步更新的 Fiddle](http://jsfiddle.net/SLvYx/2/)。

渐变在 IE9 或更低版本中不起作用 - 但没关系，因为图像在样式表中作为后备。

# c# - 在 C# 中验证 ping 实用程序

> ID：12620915
> 
> 赞同：2
> 
> 时间：2012-09-27T12:01:55.240
> 
> 标签：c#

从 C# 控制台应用程序中，我打开了命令提示符并检查了 ping 实用程序。

```
string aptracommand;
aptracommand = "/C ping 10.38.2.73";
Process.Start(@"cmd",aptracommand); 
```

现在，我需要应用一个条件语句，如果 ping 请求超时，那么它应该说“无法连接”，如果它能够 ping，那么需要显示“服务器已启动”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T12:06:43.087

为此，您可以使用 Ping 类。如下所述：

```
using System.Net.NetworkInformation;

var ping = new Ping();
var reply = ping.Send("10.38.2.73", 60 * 1000); // 1 minute time out (in ms)
if (reply.Status == IPStatus.Success)
{
   Console.WriteLine("Server is up");
}
else
{
   Console.WriteLine("Server is down");
} 
```

您可以减少超时值以快速检查服务器是启动还是关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:08:01.510

改用这个

```
Ping pingSender = new Ping ();
byte[] data = Encoding.ASCII.GetBytes ("test");
int timeout = 100;
PingReply reply = pingSender.Send("127.0.0.1", timeout, data);
if (reply.Status == IPStatus.Success)
{
    Console.WriteLine("Address: {0}", reply.Address.ToString());
    Console.WriteLine("RoundTrip time: {0}", reply.RoundtripTime);
    Console.WriteLine("Time to live: {0}", reply.Options.Ttl);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:06:18.300

我认为您需要捕获输出，检查是否存在超时字符串，然后据此做出决定。

[捕获输出](https://stackoverflow.com/questions/1390559/how-to-get-the-output-of-a-system-diagnostics-process)

# c# - 获取表格中随机选择的单元格

> ID：12620916
> 
> 赞同：0
> 
> 时间：2012-09-27T12:02:01.543
> 
> 标签：c#, ms-word

我正在*使用 C# 在 VS2010 中开发文字功能区 MS Office 应用程序*。

当我在文档中有一个表格时，我想在按下功能区上的按钮时在表格的随机选择的单元格中添加一些文本。

问题是，每次我选择随机数量的单元格`WrdApp.ActiveWindow.Selection.Cells`时，只会获得最后一个选定的单元格。

这是代码：

```
 foreach (Cell myCell in WrdApp.ActiveWindow.Selection.Cells)
  {
      myCell.Range.Text = "text" + myCell.Range.Text
  } 
```

# performance - MATLAB：如何有效地创建一个矩阵，这是一个外积的结果？

> ID：12620920
> 
> 赞同：2
> 
> 时间：2012-09-27T12:02:06.723
> 
> 标签：performance, matlab, matrix

我有两个向量 a 和 b 以及一些函数 f。在 MATLAB 中定义此类矩阵的最佳方法（性能）是什么：

```
A(m,n) = f(a(m)*b(n)) / ( (f(a(m)) * f(b(n)) ) 
```

是否可以不使用嵌套循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:09:20.373

现在不在电脑前，但试试

```
A=f(a*b')./(f(a)*f(b)') 
```

其中 a 和 b 是列向量。a*b' 是外积。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T12:05:16.217

如果`f`支持向量语法，那么它只是：

```
 [A,B] = meshgrid(a,b);
   M = f(A.*B) ./ ( f(A).*f(B) ); 
```

* * *

顺便说一句，我不确定性能会比常规循环更好。更好的配置文件和检查。自引入 JIT 以来，Matlab 循环通常比矢量化操作运行得更快。

* * *

这是一个例子：

```
function CalcGrid()
    a = 1:10;
    b = 1:10;

    [A,B] = meshgrid(a,b);
    M = f(A.*B) ./ ( f(A).*f(B) );
    figure;surf(M);
end

function y = f(x)
    y = x-1;
end 
```

# mysql - 将简单的成员资格提供程序与 mysql 一起使用

> ID：12620922
> 
> 赞同：5
> 
> 时间：2012-09-27T12:02:20.753
> 
> 标签：mysql, asp.net-mvc-4

是否可以将 Simple Membership Provider 与 mysql 一起使用（也使用实体框架）

如果是，如何实现。

非常感谢任何文档/链接

预先感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T08:51:29.057

我在 GitHub 上创建 MySqlSimpleMembershipProvider 并制作示例项目。

[https://github.com/xyz37/MySqlSimpleMembershipProvider](https://github.com/xyz37/MySqlSimpleMembershipProvider)

就这样。

感谢您对这个问题的回答。

点击示例截图：[https ://raw.github.com/xyz37/MySqlSimpleMembershipProvider/master/_ScreenShot/SimpleMembershipProviderTest.png](https://raw.github.com/xyz37/MySqlSimpleMembershipProvider/master/_ScreenShot/SimpleMembershipProviderTest.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T00:32:17.380

查看 Fabio Costa 的这篇简短文章，了解如何将 SimpleMembership 和 OAuth 与 mySQL 和 bigint 或您想要的任何数据库和数据类型一起使用：http: [//fabiocosta.ca/2012/11/24/use-simplemembership-and-oauth-with-任何数据库和数据类型/](http://fabiocosta.ca/2012/11/24/use-simplemembership-and-oauth-with-any-database-and-datatype/)。它应该可以解决您的问题。祝你好运。

我还对我的代码进行了以下更改：

*   添加了对 MySql.Data、MySql.Data.Entity 和 MySql.Web 的引用。在每个引用上将属性“复制本地”修改为 true。

*   更改连接字符串并在 web.config 中添加 DbProviderFactory 以启用 MySql 连接。

*   在 web.config 中添加了 roleManager 和 memberShip 配置。

网络配置

```
<connectionStrings>    
    <add name="DefaultConnection" connectionString="Data Source=localhost;Database=dbname;User ID=username;Password=password;" providerName="MySql.Data.MySqlClient" />
</connectionStrings>
<system.data>
    <DbProviderFactories>
        <clear />
        <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.6.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
    </DbProviderFactories>
</system.data>
<system.web>
    <roleManager enabled="true" defaultProvider="simple">
        <providers>
            <clear/>
            <add name="simple" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
        </providers>
    </roleManager>
    <membership defaultProvider="simple">
        <providers>
            <clear/>
            <add name="simple" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData"/>
        </providers>
    </membership>
</system.web> 
```

*   在根目录中创建 _AppStart.cshtml 以初始化数据库连接和自动化。在应用程序启动时在 db 中创建表。

_AppStart.cshtml

```
@{
    if (!WebSecurity.Initialized)
    {
        WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
    }
} 
```

*   添加了过滤器以确保身份验证请求期间的数据库连接。这与在每个控制器上手动放置 InitializeSimpleMembership 属性相同。

App_Start\FilterConfig.cs

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
        filters.Add(new InitializeSimpleMembershipAttribute());
    }
} 
```

*   然后按照本教程使用 facebook 修复了我的 oAuth：[http ://www.asp.net/mvc/tutorials/mvc-4/using-oauth-providers-with-mvc](http://www.asp.net/mvc/tutorials/mvc-4/using-oauth-providers-with-mvc)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T20:21:29.467

很不幸的是，不行。

`SimpleMembershipProvider``MembershipProvider`最终只是我们都爱和恨的好，旧的派生类。

它的存在是因为人们不喜欢你必须重写多少抽象函数才能获得自定义`MembershipProvider`工作。所以这是一个非常愚蠢的实现`MembershipProvider`。你必须回去重新覆盖这些函数的实现`SimpleMembershipProvider`。

我对修改数据库设计有同样的问题，不得不回到自定义`MembershipProvider`类。

此外，取自 Microsoft 员工/ASP.NET 开发人员[John Galloway 的博客](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)：

> 虽然 SimpleMembership 与数据库无关，但它适用于 SQL Server 系列。它继续支持完整的 SQL Server，但也适用于 SQL Azure、SQL Server CE、SQL Server Express 和 LocalDB。一切都作为 SQL 调用实现，而不需要存储过程、视图、代理和更改通知。
> 
> 请注意，SimpleMembership 仍然需要一些 SQL Server 风格 - 它不适用于 MySQL、NoSQL 数据库等。如果您想查看 WebMatrix.WebData.dll 中的代码，可以使用 ILSpy 等工具查看为什么 - 在某些地方执行 SQL Server 特定的 SQL 语句，尤其是在创建和初始化表时。如果您单独创建表，您似乎可以使用另一个数据库，但我还没有尝试过，目前不支持它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T19:32:30.600

我正在通过使用 LLBLGen（适用于 MySql、Oracle、Firebird、DB2 等）来做到这一点：[MVC4 中的 SimpleMembershipProvider 用于 MySql、Oracle 和更多的 LLBLGen](http://www.mattjcowan.com/funcoding/2012/11/10/simplemembershipprovider-in-mvc4-for-mysql-oracle-and-more-with-llblgen/)。

您可以通过使用您想要的任何 DAL 策略创建自己的 ExtendedMembershipProvider 实现来执行本文中描述的相同操作。如果您想使用实体框架，您将使用支持实体框架的 MySql 提供程序编写您的提供程序实现（请参阅：[DevArt 的 MySql 实体框架教程](http://www.devart.com/dotconnect/mysql/articles/tutorial_ef.html)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T14:30:55.703

令人惊讶的是，那里的供应商很少，对于 MySQL 来说似乎没有，这真的很可悲。覆盖 SimpleMemberShip Provider 以使用 MySQL 似乎很容易，但我找不到为此制作工作包的人。

然而，我确实找到了一个看起来不错的 MonogDB 包（虽然没有测试它） [http://extmongomembership.codeplex.com/](http://extmongomembership.codeplex.com/)

我们只能希望 MySQL 将来会支持这一点——尽管我对此表示怀疑，因为没有关于它的公告。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-21T20:23:19.727

是的，只需访问[https://github.com/xyz37/MySqlSimpleMembershipProvider](https://github.com/xyz37/MySqlSimpleMembershipProvider)

下载示例应用程序并根据您的需要进行修改。它开箱即用，效果很好。当您在创建用户和适当的权限后第一次运行应用程序时，如果出现无法创建数据库的错误，请刷新浏览器一次或两次，它将创建数据库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-30T23:38:02.813

[在https://mysqlmembershipprovider.codeplex.com/](https://mysqlmembershipprovider.codeplex.com/)上有一个已接受的升级答案，它基于 xyz37 的作品和 ASP.NET Web Stack。

# r - 按组在 data.table 中创建新列

> ID：12620923
> 
> 赞同：3
> 
> 时间：2012-09-27T12:02:23.140
> 
> 标签：r, vector, data.table

我没有使用 data.table 的经验，所以我不知道我的问题是否有解决方案（至少 30 分钟在 Google 上没有给出答案），但它就在这里。

使用 data.frame 我经常使用以下命令来检查唯一值的观察次数：

```
df$Obs=with(df, ave(v1, ID-Date, FUN=function(x) length(unique(x)))) 
```

使用data.table时有没有对应的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T14:06:15.573

就在这里。令人高兴的是，您已经询问了`data.table`v1.8.2 中添加的最新功能之一：

> `:=`现在实现了按组 (FR#1491)，并且通过引用对新列进行子分配现在自动添加列（`NA`在子分配不涉及的位置初始化）(FR#1997)。`:=`by group 可以和所有类型的 组合`i`，所以*`:=`by group*包括 grouping by`i`和 by `by`。由于`:=`按组是通过引用，它应该比任何（直接或间接）`cbind`将分组结果发送到 DT 的方法要快得多，因为根本不会复制（大）DT。这是一种简短而自然的语法，可以与其他查询结合使用。
> `DT[,newcol:=sum(colB),by=colA]`

在您的示例 iiuc 中，它应该类似于：

```
DT[, Obs:=.N, by=ID-Date] 
```

代替 ：

```
df$Obs=with(df, ave(v1, ID-Date, FUN=function(x) length(unique(x)))) 
```

请注意，`:=`对于大型数据集（较小的数据集将有很多小组），按组可以很好地扩展。

查看`?":="`并[搜索 data.table 标记以获取“参考”](https://stackoverflow.com/search?q=%5C%5Bdata.table%5C%5D%20reference)

# php - 停止 htaccess 重定向

> ID：12620926
> 
> 赞同：13
> 
> 时间：2012-09-27T12:02:36.050
> 
> 标签：php, .htaccess

我访问了一个“超级文件夹”的 .htaccess 文件并意外添加了

```
Rewrite / http://google.com/ 
```

这是使用 php 完成的。现在我无法访问任何目录中的 php 文件来恢复更改。

我可以在 root 的子目录中做些什么来停止该文件夹内的重定向吗？

谢谢你。

并且请不要询问有关“事故”的更多细节......愚蠢的错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T20:39:45.980

> 我联系了服务器管理员，都笑了。虽然如何阻止它重定向仍然很有趣，尽管如果我使用 mod_rewrite 不应该发生这种情况。

使用 mod_alias' `Redirect`，你就完蛋了。该指令全面应用，从 htaccess 文件所在的路径节点（如果它在 htaccess 文件中）或`<Directory>`它所在的块的路径节点开始。所以唯一的解决方案是让管理员删除它。

但是，对于 mod_rewrite，对于 htaccess 文件，它的作用与在`<Directory>`块中的作用不同。目录中路径节点中的 htaccess 文件中的规则优先于父目录中的 htaccess 文件中的规则。因此，如果您有 2 个 htaccess 文件：

*/.htaccess*：

```
RewriteEngine On
RewriteRule ^/? http://google.com/ 
```

在*/tmp/.htaccess*中：

```
RewriteEngine On
RewriteRule ^/?tmp/ http://stackoverflow.com/ 
```

然后你去`http://yourdomain.com/tmp/`，你会被重定向到，`http://stackoverflow.com/`因为 tmp 目录中的规则优先于父目录中的规则。实际上，父目录中的规则根本不会应用，除非您使用该[`RewriteOptions Inherit`指令](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriteoptions)从父目录继承任何规则。

因此，您可以简单地使用以下内容创建一个 htaccess 文件：

```
RewriteEngine On 
```

使用FTP上传到你的子目录，上传你用来改变父目录的htaccess文件的php文件。然后只需使用您的浏览器并转到子目录中的那个 php 文件。

在您的子目录中简单地打开重写引擎，没有任何规则，意味着：

1.  我在这个目录中激活了 mod_rewrite
2.  由于该目录开启了重写引擎，所以忽略所有父目录中的所有规则。
3.  由于 mod_rewrite 规则集是空白的（没有实际`RerwiteRule`的），根本没有任何反应
4.  访问这个目录，即使重写引擎打开，mod_rewrite 什么也不做，就好像重写引擎关闭一样。

听起来违反直觉，但这就是它的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:12:00.687

使用您的 FTP 客户端进行连接。在您的 FTP 客户端中启用隐藏文件（试试 FileZilla，这个可以让您做到这一点）。在您的超级目录中删除`.htaccess`。如果此文件中有其他数据，请将其复制到本地计算机，进行更改并再次上传。

这里有更多帮助： http: [//www.intrepid.com.au/how-to-view-htaccess-with-filezilla/](http://www.intrepid.com.au/how-to-view-htaccess-with-filezilla/)

# php - 如何在一定时间后自动销毁 Zend 会话？

> ID：12620936
> 
> 赞同：0
> 
> 时间：2012-09-27T12:02:59.103
> 
> 标签：php, zend-framework, session

是否可以在一段时间后销毁会话？（例如 30 分钟）...我正在使用 Zend 框架会话

```
$sessionRegeneration = new Zend_Session_Namespace('sessionRegeneration'); 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:16:05.367

首先设置您的到期时间：

```
$sessionRegeneration = new Zend_Session_Namespace('sessionRegeneration');
//expire session namespace in 30 minutes
$sessionRegeneration->setExpirationSeconds(60*30); 
```

过期时间过后，下一次任何请求有理由调用`Zend_Session::start();`（每次构造 Zend_Session_Namespace 时都会调用）过期的会话名称空间将被取消设置。

`start()`来自:的最后一个命令`self::_processStartupMetadataGlobal();`执行该操作。

这也是全局跃点到期的时间也未设置。

# iphone - 如何在 iphone/ipad 应用程序中创建一个不规则形状的按钮

> ID：12620940
> 
> 赞同：1
> 
> 时间：2012-09-27T12:03:04.127
> 
> 标签：iphone, objective-c, xcode, ipad, button

我正在创建一个饼图，其中每个部分都是一个带有背景图像的单独按钮并表示一个单独的方法，但 uibutton 具有矩形形状并且所有按钮都重叠。

我想选择一个部分（按钮）（即按钮形状应该是图像的形状而不是默认的矩形按钮）而不干扰相邻的部分（按钮）......

例如：考虑一个带有 8 个扇区的饼图，由 1 到 8 的 8 个按钮表示，按钮具有扇形形状的背景图像，如果用户点击第一个扇区（按钮）的任何位置，则不应单击任何其他扇区（按钮）。 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:10:19.547

Add a UITapGestureRecognizer to the whole pie chart.

Get the coordinates of the tap within the chart, and use mathematics to determine which slice the tap is on.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:35:55.777

如果您在界面生成器中使用，只需将您的按钮类型更改为自定义并将您的图像分配给按钮。在编码中只需分配一个自定义按钮

# winapi - win32 - 检测子窗口的所有父窗口

> ID：12620944
> 
> 赞同：2
> 
> 时间：2012-09-27T12:03:18.290
> 
> 标签：winapi, win32gui

就像`EnumChildWindows`API 一样，想知道相反的情况是否可能......即，是否有一种技术或 API 可以枚举子窗口的所有父窗口，并最终到达主应用程序窗口。

我的问题是我有超过 1 个不同的应用程序具有相同的子窗口（可通过其窗口类和标题识别）。我想一次检测哪个应用程序特定的子窗口处于活动状态，或者如果两者都处于活动状态想要与任何一个一起工作？

例如，我有 2 个运行名为“XYZ”和“ABC”的应用程序，它们都有一个具有相同注册的子窗口/对话框。类和标题说 - “配置”。现在我想从“XYZ”应用程序中获取“配置”对话框的窗口详细信息？

希望我能够正确地提出问题的详细信息。

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:06:58.617

[`GetAncestor`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633502.aspx)功能。

```
GetAncestor(hWnd, GA_ROOT) 
```

# java - Javadoc @see 对象方法

> ID：12620945
> 
> 赞同：49
> 
> 时间：2012-09-27T12:03:26.330
> 
> 标签：java, javadoc

我想使用注释块中的@see 链接另一个对象的方法@see
只给了我链接类的选项，而不是方法。

什么是黑客？

```
public class A {
  B bee;

  /**
   * Just invoking methodB on bee.
   * @see B.methodB() <-- There
   */
  public methodA() {
     bee.methodB();
  }
}

public class B {
  /**
   * The real stuff
   */
  public methodB() {
    // real stuff
  }
} 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-09-27T12:05:24.017

使用散列而不是点，如下所示： `@see B#methodB()`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-27T12:11:42.590

您需要使用 # 而不是 .

```
@see B#methodB() 
```

请参阅`@see` [此处](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html#see)的文档。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-27T12:12:01.037

这适用于 Eclipse 中的 javadocs。

按 # 并`Ctrl+Space`获得指向当前上下文的成员方法的“链接”。

在 Javadoc 印刷机中

SDF `Ctrl+Space`#gDFS`Ctrl+Space``Space`符号

创建链接：

```
{@link SimpleDateFormat#getDateFormatSymbols() Symbol} 
```

# java - 在 OSGi 中，如何优雅地处理初始化异常？

> ID：12620951
> 
> 赞同：4
> 
> 时间：2012-09-27T12:03:54.780
> 
> 标签：java, osgi, apache-felix, declarative-services

我正在使用 Maven-SCR。通过使用`@Component`and`@Service`标签，我可以让我的类实例自动注册它提供的接口。

但是，有时，activate 方法（标记为`@Activate`）甚至构造函数可能会抛出异常并以我无法处理的方式失败。

问题是：我想捕获该异常，以便正确记录它，但同时，我想防止该类在无法激活或初始化时发布其服务。

你们是怎么做到的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:51:06.893

SCR 规范要求将这些方法的异常记录到 OSGi LogService。您是否安装了 LogService 实现包？如果是这样，您可以从那里记录的这些方法中找到异常。如果您需要将这些异常记录到其他日志中，您可能需要查看[Pax Logging](http://team.ops4j.org/wiki/display/paxlogging/Pax+Logging)之类的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:13:40.070

首先，我会查看您的 OSGi 框架的日志记录配置。它应该记录这些异常。

如果这不起作用，您可以将此类代码放入带注释的方法中

```
catch (Exception ex) {  // or RuntimeException if possible
    // log it
    // then rethrow
    throw ex;
} 
```

请注意，这被某些人认为是反模式，因为它往往会产生重复的堆栈跟踪。

这也可以转移到一个方面，尽管这可能会给 OSGi 带来痛苦。

# wpf - 在 OnApplyTemplate 之前加载的事件

> ID：12620953
> 
> 赞同：3
> 
> 时间：2012-09-27T12:04:05.207
> 
> 标签：wpf, wpf-controls, controltemplate

我的印象是，听[Loaded 事件](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.loaded.aspx)将确保我可以在那时访问可视化树。这似乎在大多数情况下都可以正常工作，而可视化树正是我所期望的。但是，当使用[TabControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.tabcontrol.aspx)时，隐藏选项卡上的控件不会在加载的事件触发*之前构建其可视化树。*

举个简单的例子：

```
<Window ...>
    <Grid>
        <TabControl>
            <TabItem Header="Tab 1">
                <my:MyTextBox />
            </TabItem>
            <TabItem Header="Tab 2">
                <my:MyTextBox />
            </TabItem>
        </TabControl>
    </Grid>
</Window> 
```

`MyTextBox`是一个自定义组件，仅在发生某些事件时注销。

```
public class MyTextBox : TextBox
{
    public MyTextBox()
    {
        Loaded += (s,e) => {
            Console.WriteLine("MyTextBox {0}: Loaded", s.GetHashCode());
            Dispatcher.BeginInvoke(()=>Console.WriteLine("MyTextBox {0}: Loaded BeginInvoke", s.GetHashCode()));
        };
    }

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        Console.WriteLine("MyTextBox {0}: OnApplyTemplate", this.GetHashCode());
    }
} 
```

这是输出：

```
MyTextBox A: OnApplyTemplate
MyTextBox A: Loaded
MyTextBox B: Loaded
MyTextBox A: Loaded BeginInvoke
MyTextBox B: Loaded BeginInvoke
(changing tab to 2)
MyTextBox B: OnApplyTemplate
MyTextBox B: Loaded
MyTextBox B: Loaded BeginInvoke 
```

如您所见，`B`第二个选项卡上的for`OnApplyTemplate`仅在您切换到其选项卡时才会执行，但加载的事件实际上是在之前引发的。

现在的问题是我的自定义组件是一个没有外观的组件，它设置了控制模板。在加载的事件中，我现在想要浏览可视化树并应用一些额外的默认值，但由于尚未应用模板，因此可视化树是空的。

是否有某种方法可以从外部（即不修改组件）确保我可以在加载可视树后立即对其进行迭代？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:10:36.960

The `TabControl` does some virtualization under the hood. You can disable this as per answers in this SO question: [How to preserve control state within tab items in a TabControl](https://stackoverflow.com/questions/2080764/how-to-preserve-control-state-within-tab-items-in-a-tabcontrol)

# r - 如何用“重复出现”的列重塑数据框？

> ID：12620964
> 
> 赞同：7
> 
> 时间：2012-09-27T12:04:48.170
> 
> 标签：r, reshape, melt, reshape2

我是使用 R 进行数据分析的新手。我最近获得了一个预先格式化的环境观测模型数据集，其示例子集如下所示：

```
date                   site      obs    mod      site           obs    mod
2000-09-01 00:00:00    campus    NA     61.63    city centre    66     56.69
2000-09-01 01:00:00    campus    52     62.55    city centre    NA     54.75
2000-09-01 02:00:00    campus    52     63.52    city centre    56     54.65 
```

基本上，这些数据包括“重复出现的列”中各个站点的每小时观测和模拟污染物浓度的时间序列，即站点 - obs - mod（在示例中，我只显示了总共 75 个站点中的 2 个）。我将这个“宽”数据集作为数据框读取，并希望将其重塑为“窄”格式：

```
date                   site           obs    mod
2000-09-01 00:00:00    campus         NA     61.63
2000-09-01 01:00:00    campus         52     62.55
2000-09-01 02:00:00    campus         52     63.52
2000-09-01 00:00:00    city centre    66     56.69
2000-09-01 01:00:00    city centre    NA     54.75
2000-09-01 02:00:00    city centre    56     54.65 
```

我相信我应该使用包“reshape2”来做到这一点。首先，我尝试融化然后 dcast 数据集：

```
test.melt <- melt(test.data, id.vars = "date", measure.vars = c("site", "obs", "mod")) 
```

但是，它只返回了一半的数据，即第一个（“校园”）之后的站点（“市中心”）的记录都被切断了：

```
date                   variable    value
2001-01-01 00:00:00    site        campus
2001-01-01 01:00:00    site        campus
2001-01-01 02:00:00    site        campus
2001-01-01 00:00:00    obs         NA
2001-01-01 01:00:00    obs         52
2001-01-01 02:00:00    obs         52
2001-01-01 00:00:00    mod         61.63
2001-01-01 01:00:00    mod         62.55
2001-01-01 02:00:00    mod         63.52 
```

然后我尝试重铸：

```
test.recast <- recast(test.data, date ~ site + obs + mod) 
```

但是，它返回错误消息：

```
Error in eval(expr, envir, enclos) : object 'site' not found 
```

我试图搜索以前的问题，但没有找到类似的场景（如果我错了，请纠正我）。有人可以帮我吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T14:05:08.957

在进行一些变量名称清理之后，您可能最好使用 base R reshape。

这是你的数据。

```
test <- read.table(header = TRUE, stringsAsFactors=FALSE,
text = "date             site  obs    mod    site             obs    mod
'2000-09-01 00:00:00'  campus   NA  61.63    'city centre'    66     56.69
'2000-09-01 01:00:00'  campus   52  62.55    'city centre'    NA     54.75
'2000-09-01 02:00:00'  campus   52  63.52    'city centre'    56     54.65")
test
#                  date   site obs   mod      site.1 obs.1 mod.1
# 1 2000-09-01 00:00:00 campus  NA 61.63 city centre    66 56.69
# 2 2000-09-01 01:00:00 campus  52 62.55 city centre    NA 54.75
# 3 2000-09-01 02:00:00 campus  52 63.52 city centre    56 54.65 
```

如果你做得对，你*应该*得到像我一样的名字：正如@chase[在他的回答](https://stackoverflow.com/a/12622347/1270695)中提到的那样，“重复的列名有点奇怪，不是正常的 R 行为”——所以我们必须解决这个问题。

> 注意：*这两个选项都会生成一个“时间”变量，您可以继续删除它。您可能希望保留它，以防万一您想重新调整为宽格式。*

*   选项 1：***如果你有像我一样的名字***（你应该有），解决方案很简单。对于第一个站点，只需将“0”附加到站点名称并使用base R reshape：

    ```
    names(test)[2:4] <- paste(names(test)[2:4], "0", sep=".")
    test <- reshape(test, direction = "long", 
                    idvar = "date", varying = 2:ncol(test))
    rownames(test) <- NULL # reshape makes UGLY rownames
    test
    #                  date time        site obs   mod
    # 1 2000-09-01 00:00:00    0      campus  NA 61.63
    # 2 2000-09-01 01:00:00    0      campus  52 62.55
    # 3 2000-09-01 02:00:00    0      campus  52 63.52
    # 4 2000-09-01 00:00:00    1 city centre  66 56.69
    # 5 2000-09-01 01:00:00    1 city centre  NA 54.75
    # 6 2000-09-01 02:00:00    1 city centre  56 54.65 
    ```

*   选项 2：***如果您确实有重复的列名***，修复仍然很容易，并且遵循相同的逻辑。首先，创建更好的列名（使用 容易做到`rep()`），然后`reshape()`如上所述使用。

    ```
    names(test)[-1] <- paste(names(test)[-1], 
                             rep(1:((ncol(test)-1)/3), each = 3), sep = ".")
    test <- reshape(test, direction = "long", 
                    idvar = "date", varying = 2:ncol(test))
    rownames(test) <- NULL

    ### Or, more convenient:
    # names(test) <- make.unique(names(test))
    # names(test)[2:4] <- paste(names(test)[2:4], "0", sep=".")
    # test <- reshape(test, direction = "long", 
    #                 idvar = "date", varying = 2:ncol(test))
    # rownames(test) <- NULL 
    ```

*   可选步骤：此表格中的数据仍然不完全“长”。如果需要，只需再执行一步：

    ```
    require(reshape2)
    melt(test, id.vars = c("date", "site", "time"))
    #                   date        site time variable value
    # 1  2000-09-01 00:00:00      campus    0      obs    NA
    # 2  2000-09-01 01:00:00      campus    0      obs 52.00
    # 3  2000-09-01 02:00:00      campus    0      obs 52.00
    # 4  2000-09-01 00:00:00 city centre    1      obs 66.00
    # 5  2000-09-01 01:00:00 city centre    1      obs    NA
    # 6  2000-09-01 02:00:00 city centre    1      obs 56.00
    # 7  2000-09-01 00:00:00      campus    0      mod 61.63
    # 8  2000-09-01 01:00:00      campus    0      mod 62.55
    # 9  2000-09-01 02:00:00      campus    0      mod 63.52
    # 10 2000-09-01 00:00:00 city centre    1      mod 56.69
    # 11 2000-09-01 01:00:00 city centre    1      mod 54.75
    # 12 2000-09-01 02:00:00 city centre    1      mod 54.65 
    ```

### 更新（尝试解决评论中的一些问题）

1.  `reshape()`文档很混乱。最好通过几个示例来了解它的工作原理。具体来说，“时间”不必指代时间（问题中的“日期”），而更多的是指面板数据，其中记录是在不同时间为同一 ID 收集的。在您的情况下，原始数据中唯一的“id”是“日期”列。另一个潜在的“id”是站点，但不是数据的组织方式。

    想象一下，如果您的数据看起来像这样：

    ```
    test1 <- structure(list(date = structure(1:3, 
        .Label = c("2000-09-01 00:00:00", 
        "2000-09-01 01:00:00", "2000-09-01 02:00:00"), class = "factor"), 
        obs.campus = c(NA, 52L, 52L), mod.campus = c(61.63, 62.55, 
        63.52), obs.cityCentre = c(66L, NA, 56L), mod.cityCentre = c(56.69, 
        54.75, 54.65)), .Names = c("date", "obs.campus", "mod.campus", 
    "obs.cityCentre", "mod.cityCentre"), class = "data.frame", row.names = c(NA, 
    -3L))
    test1
    #                  date obs.campus mod.campus obs.cityCentre mod.cityCentre
    # 1 2000-09-01 00:00:00         NA      61.63             66          56.69
    # 2 2000-09-01 01:00:00         52      62.55             NA          54.75
    # 3 2000-09-01 02:00:00         52      63.52             56          54.65 
    ```

    现在试试`reshape(test1, direction = "long", idvar = "date", varying = 2:ncol(test1))`。您会看到`reshape()`将站点名称视为“时间”（可以通过`timevar = "site"`在命令中添加“”来覆盖`reshape`）。

    当 时`direction = "long"`，您必须指定哪些列随“时间”而变化。在您的情况下，这是除第一列之外的所有列，因此我使用`2:ncol(test)`for " `varying`"。

2.  `test2`? 哪里是？

3.  @Chase 回答下的问题：我认为您误解了`melt()`应该如何工作。基本上，它试图让您获得“最精简”的数据形式。在这种情况下，最精简的形式将是上述“可选步骤”，因为`date`+`site`将是包含唯一 ID 变量所需的最小值。（我会说 " `time`" 可以安全地删除。）

    一旦您的数据采用“可选步骤”中描述的格式（我们假设输出已存储为“ `test.melt`”，您始终可以轻松地以不同方式旋转表格。作为我的意思的演示，试试下面的，看看他们做了什么。

    ```
    dcast(test.melt, date + site ~ variable)
    dcast(test.melt, date ~ variable + site)
    dcast(test.melt, variable + site ~ date)
    dcast(test.melt, variable + date ~ site) 
    ```

    如果你停留在“选项 1”或“选项 2”，要拥有这种灵活性并不容易。

* * *

### 更新（几年后）

`melt`从“data.table”现在可以以类似的方式“融化”多个列`reshape`。无论列名是否重复，它都应该有效。

您可以尝试以下方法：

```
measure <- c("site", "obs", "mod")
melt(as.data.table(test), measure.vars = patterns(measure), value.name = measure)
#                   date variable        site obs   mod
# 1: 2000-09-01 00:00:00        1      campus  NA 61.63
# 2: 2000-09-01 01:00:00        1      campus  52 62.55
# 3: 2000-09-01 02:00:00        1      campus  52 63.52
# 4: 2000-09-01 00:00:00        2 city centre  66 56.69
# 5: 2000-09-01 01:00:00        2 city centre  NA 54.75
# 6: 2000-09-01 02:00:00        2 city centre  56 54.65 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T13:19:38.047

您有重复的列名这一事实有点奇怪，这*不是*正常的 R 行为。大多数时候，R 会通过`make.names()`函数强制您使用有效名称。无论如何，我可以复制您的问题。注意我做了我自己的例子，因为你的例子是不可复制的，但逻辑是一样的。

```
#Do not force unique names
s <- data.frame(id = 1:3, x = runif(3), x = runif(3), check.names = FALSE)
#-----
  id         x         x
1  1 0.6845270 0.5218344
2  2 0.7662200 0.6179444
3  3 0.4110043 0.1104774

#Now try to melt, note that 1/2 of your x-values are missing!
melt(s, id.vars = 1)
#-----
  id variable     value
1  1        x 0.6845270
2  2        x 0.7662200
3  3        x 0.4110043 
```

解决方案是使您的列名唯一。正如我之前所说，R 在大多数情况下默认执行此操作。但是，您可以在事后通过`make.unique()`

```
names(s) <- make.unique(names(s))
#-----
[1] "id"  "x"   "x.1" 
```

请注意，x 的第二列现在附加了一个 1。现在`melt()`可以按您的预期工作：

```
melt(s, id.vars = 1)
#-----
  id variable     value
1  1        x 0.6845270
2  2        x 0.7662200
3  3        x 0.4110043
4  1      x.1 0.5218344
5  2      x.1 0.6179444
6  3      x.1 0.1104774 
```

在这一点上，如果你想把`x`和`x.1`当作同一个变量，我想用一点`gsub()`或其他的正则表达式函数来摆脱有问题的字符。这是我经常使用的工作流程。

# bash - bash - 对于目录中的每个文件，将其复制到另一个目录中，前提是它已经不存在

> ID：12620965
> 
> 赞同：0
> 
> 时间：2012-09-27T12:04:56.837
> 
> 标签：bash

非常感谢您的帮助！

我有一个包含一些 html 文件的目录

```
$ ls template/content/html
devel.html
idex.html
devel_iphone.html
devel_ipad.html 
```

我想编写一个 bash 函数来将该文件夹中的每个文件复制到一个新位置（introduction/files/），前提是那里不存在同名的文件。

这是我到目前为止所拥有的：

```
orig_html="template/content/html";
dest_html="introduction/files/";

function add_html {
    for f in $orig_html"/*";
    do
        if [ ! -f SAME_FILE_IN_$dest_html_DIRECTORY ];
        then
            cp $f $dest_html;
        fi
    done
} 
```

大写字母是我卡住的地方。

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:07:47.667

-n 选项是否足以满足您的需求？

```
 -n, --no-clobber
          do not overwrite an existing file (overrides a previous -i option) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:27:35.893

像这样使用 rsync：

```
rsync -c -avz --delete $orig_html $dest_html 
```

它使 $orig_html 与基于 $dest_html 的文件校验和保持一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:07:46.793

你需要一个 bash 脚本吗？`cp`支持 -r（递归）选项和 -u（更新）选项。从手册页：

```
 -u, --update
      copy only when the SOURCE file is  newer  than  the  destination
      file or when the destination file is missing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:05:05.287

您的`$f`变量包含完整路径，因为`/*`. 尝试做类似的事情：

```
for ff in $orig_html/*
  do
    thisFile=${ff##*/}
    if [ ! -f ${dest_html}/$thisFile ]; then
       cp $ff ${dest_html}
    fi
  done 
```

# javascript - 将 HTML 写入新窗口打开的问题

> ID：12620972
> 
> 赞同：1
> 
> 时间：2012-09-27T12:05:23.420
> 
> 标签：javascript, html

我有这个代码：

```
 <div class="col3">
    <a id = "training-launch-button" href="javascript:void(0);" title=" My title here"  class="button" onClick="Test();">Launch</a>
 </div>     

  function Test() {
      var new_window= window.open('','Ratting','width=550,height=170,0,status=0,resizable=1');
      new_window.document.createElement("div");
      document.getElementsByTagName('div')[0].innerHTML = '<ol><li>html data</li></ol>';     

  } 
```

有什么不对劲，我没有看到有序列表项？我最终想在新窗口中构建一些 HTML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:08:10.047

我会尝试

`new_window.document.getElementsByTagName('div')[0].innerHTML = ...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:08:36.583

使用这个 Js

```
function Test() {
   var newWindow= window.open('','Ratting','width=550,height=170,0,status=0,resizable=1');
   var newContent = "<HTML><HEAD><TITLE>One Sub Window</TITLE></HEAD>";
   newContent += "<BODY><div><ol><li>html data</li></ol></div>";
   newContent += "</BODY></HTML>";
   newWindow.document.write(newContent);
   newWindow.document.close();  
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:10:54.563

我认为这是你的问题；getElementsByName 返回一个数组，而不是一个元素，所以；

```
new_window.document.getElementsByTagName('div')[0].innerHTML = '<ol><li>html data</li></ol>'; 
```

注意：我在那里有一个'[0]'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:25:32.983

这应该这样做：

```
var new_window= window.open('','Ratting','width=550,height=170,0,status=0,resizable=1');
var div = new_window.document.createElement('div');
new_window.document.body.appendChild(div);
div.innerHTML = '<ol><li>html data</li></ol>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T12:28:49.327

您实际上并没有将新 div 附加到新文档的正文中，您必须为此使用`.appendChild()`方法，请参见：

```
function Test() {
    var new_window = window.open('','Ratting','width=550,height=170,0,status=0,resizable=1');
    var div = new_window.document.createElement("div");
    new_window.document.getElementsByTagName('body')[0].appendChild(div);
    div.innerHTML = '<ol><li>html data</li></ol>';         
} 
```

[见这里 - 工作示例](http://jsfiddle.net/jQDs8/)

# python - 创建一个 Python 列表，其中填充了一遍又一遍的相同字符串和一个基于变量增加的数字。

> ID：12620974
> 
> 赞同：8
> 
> 时间：2012-09-27T12:05:42.230
> 
> 标签：python, python-2.7

我正在尝试创建一个列表，该列表由重复出现的字符串和一个标记它是哪一个的数字填充。标记有多少字符串的数字是从一个 int 变量中获得的。

所以是这样的：

```
b = 5
a = range(2, b + 1)
c = []
c.append('Adi_' + str(a)) 
```

我希望这会创建一个像这样的列表：

```
c = ['Adi_2', 'Adi_3', 'Adi_4', 'Adi_5'] 
```

相反，我得到一个这样的列表

```
c = ['Adi_[2, 3, 4, 5]'] 
```

所以当我尝试在新行中打印它时

```
for x in c:
    print"Welcome {0}".format(x) 
```

结果是：

```
Welcome Adi_[2, 3, 4, 5] 
```

我想要的结果是：

```
Welcome Adi_2
Welcome Adi_3
Welcome Adi_4
Welcome Adi_5 
```

如果有人有想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T12:07:40.483

你几乎明白了：

```
for i in a:
    c.append('Adi_' + str(i)) 
```

您的第一行是将*整个*列表转换`a`为字符串。

[请注意，您可以使用列表理解和一些字符串格式](http://docs.python.org/library/string.html#formatstrings)来摆脱循环：

```
c = ['Adi_%s' % s for s in a] 
```

或者

```
c = ['Adi_{0}'.format(s) for s in a] #Python >= 2.6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:13:14.833

使用列表推导：

```
b = 5
a = range(2, b + 1)
c = ['Adi_'+str(i) for i in a]
for x in c:
    print"Welcome {0}".format(x) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:12:30.600

或作为列表理解：

```
b = 5
a = range(2, b + 1)
c = ["Adi_" + str(i) for i in a] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:19:23.397

或全部在一条线上：

```
>>> for s in ['Welcome Adi_%d' % i for i in range(2,6)]:
...     print s
... 
Welcome Adi_2
Welcome Adi_3
Welcome Adi_4
Welcome Adi_5 
```

# asp.net - Pokein 如何工作以及如何扩展

> ID：12620975
> 
> 赞同：0
> 
> 时间：2012-09-27T12:05:48.193
> 
> 标签：asp.net, push-notification, comet, server-push, pokein

我正在为我的 ASP.NET 4.5 网站项目寻找 WebSockets 解决方案，我将使用 HTML5 技术为 Web 和移动应用程序开发该解决方案。

我需要一个允许我将消息从服​​务器推送到客户端的解决方案。我发现了几个，包括 SignalR 和 Pokein，bot 似乎是 .NET 的非常好的解决方案。现在我认为我会尝试 Pokein。

我正在向那些经历过这个问题的人提出这个问题，但我也对其他替代解决方案持开放态度。

这是我关于 Pokein (Pokein.com) 的问题

1) Poekin 可以扩展到多台服务器吗？

2）Poekin是否支持私人频道和群组频道（可以发送多个人相同的消息）？

3）Poekin如何知道如何区分客户端，我必须对客户端进行身份验证，使用cookies吗？

4) 当与多台服务器一起工作以扩展 Poekin 性能时，通道对象是否是服务器之间的共享？（我虽然使用 Amazon ElasticCache 将 userId 连接保存在缓存中的单个全局对象中）

5) 一次可以激活的通道数量是否有限制？

6) 一个频道可以连接多少人？- 如果他们在我网站的特定页面上，并且如果他们在网站上的特定页面上，他们连接到特定频道，我希望能够向数十万人发送消息。因此，例如，如果有 1000 个人在 page.aspx?id=2 上，他们将在频道 2 更新时收到消息，如果他们在 page.aspx?id=2,3 上，他们将在频道 2 和 3 更新时收到消息这些消息从服务器推送到客户端

据我了解，Poekin 是一个 DLL，这意味着它与我的网站一起加载。这意味着它不独立于应用程序。那么我该如何扩展它呢？- 如果我使用 Amazon ElasticBean 来扩展我的站点，我想知道它是否可以扩展，是否可以在负载均衡器后面的多个服务器上扩展，所以，有没有办法在几个活动服务器，如果我决定关闭负载均衡器后面的服务器怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:44:01.007

答案：[http ://www.pokein.com/Discussions/tabid/62/forumid/1/threadid/1231/scope/posts/Default.aspx](http://www.pokein.com/Discussions/tabid/62/forumid/1/threadid/1231/scope/posts/Default.aspx)

# c# - 与 for 循环同步的进度条校准

> ID：12620976
> 
> 赞同：0
> 
> 时间：2012-09-27T12:05:52.887
> 
> 标签：c#, winforms, progress-bar

在下面的代码中，进度条根据 for 循环显示。但是在 for 循环中 Filecount 是可变的，这意味着它取决于文件的数量。当文件计数可分为 100（如 5、10、20）时，以下代码工作正常，但如果文件计数为 6、7、13，则即使 for 循环已完成，进度条也未显示完成。如果 Filecount 可以是任何数字并且进度条应该显示据称已校准并与 for 循环同步，那么逻辑应该是什么？请参考下面的代码 -

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            Shown += new EventHandler(Form1_Shown);
            // To report progress from the background worker we need to set this property
            backgroundWorker1.WorkerReportsProgress = true;
            // This event will be raised on the worker thread when the worker starts
            backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
            // This event will be raised when we call ReportProgress
            backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
        }

        void Form1_Shown(object sender, EventArgs e)
        {
            // Start the background worker
            backgroundWorker1.RunWorkerAsync();
        }

        // On worker thread so do our thing!
        void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            int temp = 0;
            int Filecount = 7;
            // Your background task goes here
            for (int i = 0; i < Filecount; i++)
            {
                int Progress = 100 / Filecount;
                temp = temp + Progress;

                // Report progress to 'UI' thread
                backgroundWorker1.ReportProgress(temp);
                // Simulate long task
                System.Threading.Thread.Sleep(100);
            }
        }
        // Back on the 'UI' thread so we can update the progress bar
        void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            // The progress percentage is a property of e
            progressBar1.Value = e.ProgressPercentage;

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:09:48.003

Your integer `100 / FileCount` probably isn't giving you the result you want, because of rounding.

I usually do this:

```
ReportProgress(100 * fileIndex / fileCount) 
```

You might want (fileIndex+1) instead or you might want to call it explicitly with 100 at the end as a separate operation. You might also care about whether you call ReportProgress before or after the time-consuming operation (or both).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:09:05.187

无论如何，进度条始终是近似值，尤其是当您处理的步骤数不能很好地被 100 整除时（如​​果您使用百分比）。

只需在循环末尾添加一行，将进度设置为 100%，就可以了。

# java - 在 Android 中使用 BridJ 时出现 UsatisfiedLinkError

> ID：12620988
> 
> 赞同：1
> 
> 时间：2012-09-27T12:06:22.793
> 
> 标签：java, android, android-ndk, bridj

目前我正在为 Android 使用*BRIDj-0.6.1-android.jar*。问题是库显示不满意的链接错误，如下所示：

```
09-27 17:51:58.740: E/AndroidRuntime(12589): Caused by: java.lang.ExceptionInInitializerError
09-27 17:51:58.740: E/AndroidRuntime(12589):    at java.lang.Class.newInstanceImpl(Native Method)
09-27 17:51:58.740: E/AndroidRuntime(12589):    at java.lang.Class.newInstance(Class.java:1472)
09-27 17:51:58.740: E/AndroidRuntime(12589):    at org.bridj.BridJ.getRuntimeByRuntimeClass(BridJ.java:233)
09-27 17:51:58.740: E/AndroidRuntime(12589):    at org.bridj.BridJ.getRuntime(BridJ.java:264)
09-27 17:51:58.740: E/AndroidRuntime(12589):    at org.bridj.BridJ.register(BridJ.java:287)
09-27 17:51:58.740: E/AndroidRuntime(12589):    at org.bridj.BridJ.register(BridJ.java:161)
09-27 17:51:58.740: E/AndroidRuntime(12589):    at com.g5.jna.crypto.LibcryptoLibrary.<clinit>(LibcryptoLibrary.java:20)
09-27 17:51:58.740: E/AndroidRuntime(12589):    ... 6 more
09-27 17:51:58.740: E/AndroidRuntime(12589): Caused by: java.lang.ExceptionInInitializerError
09-27 17:51:58.740: E/AndroidRuntime(12589):    at org.bridj.CRuntime.<clinit>(CRuntime.java:450)
09-27 17:51:58.740: E/AndroidRuntime(12589):    ... 13 more
09-27 17:51:58.740: E/AndroidRuntime(12589): Caused by: java.lang.UnsatisfiedLinkError: sizeOf_ptrdiff_t
09-27 17:51:58.740: E/AndroidRuntime(12589):    at org.bridj.Platform.sizeOf_ptrdiff_t(Native Method)
09-27 17:51:58.740: E/AndroidRuntime(12589):    at org.bridj.Platform.<clinit>(Platform.java:149) 
```

我将*libcrypto.so*文件保存在我的 Android 项目的*lib/armeabi/路径中。*

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:31:16.930

关于这个有一个未解决的问题： [https ://github.com/ochafik/nativelibs4java/issues/335](https://github.com/ochafik/nativelibs4java/issues/335)

# javascript - 使用 scrollTop 的 jQuery 偏移固定标题

> ID：12620993
> 
> 赞同：0
> 
> 时间：2012-09-27T12:06:36.383
> 
> 标签：javascript, jquery, html, css

我正在尝试使用 jQuery 创建一个垂直平滑滚动的网站。我正在使用此 JavaScript 和本教程[Smooth Scrolling Website](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)来创建站点。

但是我在使用固定标题时遇到了问题，滚动效果很好，但它出现在相关的中间，`div`因为它`div`与页面顶部对齐，而不是像我想要的那样仅在固定标题下方。

我尝试向 scrollTop 添加偏移量，但页面上的所有内容都变得松散，出现在固定标题上方的东西等。实际上只是一个页面混搭。如果有人能提供任何启示，将不胜感激。

```
$(function() {  
        $('ul.menu a').bind('click',function(event){
                    var $anchor = $(this);

                    $('html, body').stop().animate({
                        scrollTop: $($anchor.attr('href')).offset().top
                    }, 1500,'easeInOutExpo');
                    /*
                    if you don't want to use the easing effects:
                    $('html, body').stop().animate({
                        scrollTop: $($anchor.attr('href')).offset().top
                    }, 1000);
                    */
                    event.preventDefault();
                });
            }); 
```

我在 StackOverflow ( `+ $('.fixedheader').outerHeight()`) 上找到了这段代码，并将其添加到我的代码中（之后`scrollTop: $($anchor.attr('href')).offset().top`）它确实有效，但似乎有相反的效果。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:15:47.080

这个我解决了

```
+ $('.fixedheader').outerHeight() 
```

应该

```
- $('.fixedheader').outerHeight() 
```

我太傻了，无论如何，欢呼吧伙计们。

# sql - 基于当前的下一个/上一个记录

> ID：12620996
> 
> 赞同：3
> 
> 时间：2012-09-27T12:06:44.337
> 
> 标签：sql, sql-server-2008

我有一个不按任何列排序的表。如果我只知道当前的 ID，有什么方法可以选择下一个/上一个记录？（我正在使用 mssql）

```
Id     Label     Date
---------------------
1      label1    2011-01-10
7      label2    2011-01-15 -- how to get previous?
5      label3    2011-01-12 -- I know id of this record
10     label10   2011-01-25 -- how to get next?
12     label8    2011-01-13
2      label5    2011-01-29 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:19:31.443

试试这个：

```
VALUES (1, 'label1', '2011-01-10'), (7, 'label2', '2011-01-15'),
       (5, 'label3', '2011-01-12'), (10, 'label10', '2011-01-25'),             
       (12, 'label8', '2011-01-13'), (2, 'label5', '2011-01-29')

select * from table007; 

Declare @inptID int=12;

;WITH CTE 
as
(
   select *, ROW_NUMBER() over (order by (select 0)) as rn 
   from table007
 )

select * 
from CTE 
where rn in( select rn-1 from CTE where id = @inptID)
union all
select * from CTE where rn in(select rn + 1 from CTE where id = @inptID); 
```

SQL 小提琴演示

[**演示**](http://sqlfiddle.com/#!3/4cf3f/4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T12:38:33.653

如果它没有按任何列排序，则没有确定的下一条或上一条记录。SQL Server 中的数据没有顺序，除了由`ORDER BY`子句指定的顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T12:39:03.943

如果您真的想要随附列表中的前一个，这里有一种方法。

```
declare @t table(Id int, Label varchar(10), Date date, s int identity(1,1))
insert @t (id, label, date) 
values(1,'label1','2011-01-10'),(7,'label2','2011-01-15'),
(5,'label3','2011-01-12'),(10,'label10','2011-01-25'),
(12,'label8','2011-01-13'),(2,'label5','2011-01-29')

--select the data with a self join

select t1.id as previous_id, t2.id, t2.Label, t2.Date, t3.id, t3.id as next_id
from @t t1
right join
@t t2 on t1.s + 1 = t2.s
left join
@t t3  on t2.s = t3.s - 1 
```