# StackOverflow 问答 15657000-15657999

# javascript - JavaScript：提高 FOR 循环的性能以阻止浏览器锁定？

> ID：15657001
> 
> 赞同：1
> 
> 时间：2013-03-27T10:47:18.593
> 
> 标签：javascript

我有一个对象数组，我一次循环遍历这个数组一个对象，并进行几次检查以查看该数组中的每个对象是否符合某些标准，如果该对象符合该标准，然后我复制该对象的一个​​属性放入一个数组（该属性还包含另一个对象）。

```
for(var v = 0; features.length > v; v++){
   var feature = features[v];
    //If the feature is on the map then we want to add it
    if(feature.onScreen()){     
        dataArray.push(feature.attributes); 
    }
} 
```

现在由于某种原因，如果这个对象数组的大小很大（5000+），这个操作会变得非常昂贵，并且浏览器只会锁定一两秒（有时更多）。

我无法详细了解代码的作用，但我想知道给定这个循环，让浏览器休息的最好方法是每 500 次迭代，所以它不会锁定然后继续等等

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:53:10.947

将循环的结构更改为：

```
var index = 0;
function myfunc() {
   while(features.length > index){
       var feature = features[v];
       //If the feature is on the map then we want to add it
       if(feature.onScreen()){     
          dataArray.push(feature.attributes);

       }
       index++;
       //You can do this
       var waitingTime = 0;
       If (index% 500=0) waitingTime=100; //or 10, 20...
       //Or just with a short interval
       var waitingTime = 10;
       setTimeOut('myfunc', waitingTime);
   }
} 
```

或者带一个参数：[我更喜欢这个]

```
function myfunc(index) {
    if(!index) {
       index=0;
    }

    while(features.length > index){
       var feature = features[v];
       //If the feature is on the map then we want to add it
       if(feature.onScreen()){     
          dataArray.push(feature.attributes);
       }
        //You can do this
       var waitingTime = 0;
       If (index% 500=0) waitingTime=100; //or 10, 20...
       //Or just with a short interval
       var waitingTime = 10;
       setTimeOut('myfunc', waitingTime);
   }
} 
```

[编辑]
更改`setTimeOut`呼叫...

在你的代码中，当你调用函数时，不要给参数，初始化索引！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:54:34.597

不确定...但是将该代码放入一个函数中，然后分解并调用该函数（比如每个 xMs）怎么样？

例如，

```
var LastPos = 0;

function DoLoop()
{

    for(var v = LastPos; features.length > v; v++){
                var feature = features[v];
                //If the feature is on the map then we want to add it
                if(feature.onScreen()){     
                    dataArray.push(feature.attributes);

                }

               if(v > 500)
               {
                   LastPos = v;
                   break;
               }
    }
    setTimeout('DoLoop()', 10);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:58:56.370

setTimeOut() 可以解决这个问题。

```
var maxStatement = 1000, currentIndex=0, timeoutVar = ''
var sLimit = features.length

function multiStepLoop(){
    for (var i=currentIndex; i<currentIndex+maxStatement; i++){
        //---DO YOUR STUFFS HERE
    }

    var a = sLimit-i;
    currentIndex += maxStatement;
    if (maxStatement >= a){ maxStatement=a }
    if (a<=0){
        callBackFunction() //-- function to call when your peocess finish.
    }else{
        timeoutVar = setTimeout('multiStepLoop()',1)
    }
}
multiStepLoop(); 
```

缺点是你需要把这个过程完成后你想做的所有事情都覆盖到一个函数中，然后像 callBack_Function 一样运行它。

注意：只需将 setTimeout 的时间设置为 1 毫秒，浏览器不会显示等待光标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:52:46.327

如果你用一点点突发和一点递归做了什么：

### [小提琴代码](http://jsfiddle.net/Cwalkdawg/pHwYE/4/)

### 主功能

发生的情况是一个给定的间隔（即 500 个）通过，在以给定的迭代次数结束`index`循环时，它会以相同的突发数重新调用自己。当特征数组的末尾完成时，函数结束。`burst``for``burst`

```
var transferFeatures = function (index, burst) {
    for (var z = 0; z <= burst; z++) {
        if (index === features.length) {
            return;
        }

        var feature = features[index];

        if (feature.onScreen) {
            dataArray.push(feature.attributes);
        }
        index++;
    }
    if (index !== features.length) {
        transferFeatures(index, burst);
    }
}; 
```

### 测试

为了模拟负载，我使用各种键值对（最重要的是您的`attributes`内部对象）创建了一个对象数组：

```
//To simulate a random boolean
var randomBoolean = function () {
    return Math.random() <= 0.5;
};

//A random integer
var getRand = function () {
    return (Math.floor(Math.random() * 10).toString());
};

// Create a bunch of dummy objects
var randomFeatures = function (arr, i) {
    for (var p = 0; p < i; p++) {
        arr.push({
            onScreen: randomBoolean(),
            attributes: {
                width: getRand(),
                height: getRand(),
                someAtt: "I'm just an attribute",
                coolKidsRideBikes: true,
                foo: "bar",
                bar: "baz"
            }
        });
    }
}; 
```

当然，这与`onScreen()`您将使用的测试不同，但无论哪种方式，它都会计算出一个`boolean`值。我认为如果你在你的代码中应用这个概念，你可能会得到惊人的结果。

[我在顶部链接](http://jsfiddle.net/Cwalkdawg/pHwYE/4/)的小提琴中的所有内容都被称为：

```
randomFeatures(features, 5000);
console.log(features.length);
transferFeatures(0,500);
console.log(dataArray.length); 
```

### 负载测试

我模拟了（500 万）个随机对象被a of`5000000`推送到，脚本在大约 3.29 秒内完成。 `features``burst``1000`![模拟负载](../Images/981670c3b5b88974d69646e253b43595.png)

# c++ - 通过 std::vector 迭代

> ID：15657003
> 
> 赞同：3
> 
> 时间：2013-03-27T10:47:28.437
> 
> 标签：c++, stdvector

![在此处输入图像描述](../Images/f317d07b116c6543eb9b148251ea0b9d.png)

为什么要求我重载运算符 = ？我之前已经遍历了一个 std::list 并且我没有遇到这样的问题。

```
class Grup : public Shape {

private:

    std::vector<Shape*> continut;

public:

    static const std::string identifier;

    Grup();
    ~Grup();

    void add(Shape *shape);
    void remove(Shape *shape);
    void output(std::ostream &outs) const;
    void readFrom(std::istream &ins);
    void moveBy(int x, int y);

    friend std::ostream &operator<<(std::ostream &outs, const Grup &grup);
};

std::ostream &operator<<(std::ostream &outs, const Grup &grup)
{

 std::vector<Shape*>::iterator it;

    outs << "Grupul este format din: " << std::endl;

    for (it = continut.begin(); it != continut.end(); it++)
    {

    }    

    return outs;
} 
```

错误：“没有可行的重载'='。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:50:42.250

（放大屏幕截图后）`grup`作为 a 传入`const`，因此[`begin()`](http://en.cppreference.com/w/cpp/container/vector/begin)将返回`const_iterator`不能分配给 a 的 a `iterator`。

将声明更改`it`为：

```
std::vector<Shape*>::const_iterator it; 
```

* * *

注意 在 C++11 中，您可以使用`auto`来指示编译器推断类型：

```
for (auto it = grup.continut.begin(); it != grup.continut.end(); it++)
{
    outs << **s << std::endl;
} 
```

C++11 中的其他替代方案是[基于范围的`for`循环](http://en.cppreference.com/w/cpp/language/range-for)：

```
for (auto& shape: grub.continut)
{
    outs << *s << std::endl;
} 
```

或[`std::for_each()`](http://en.cppreference.com/w/cpp/algorithm/for_each)使用[lambda](http://en.cppreference.com/w/cpp/language/lambda)：

```
std::for_each(grub.continut.begin(),
              grub.continut.end(),
              [&](Shape* s) { outs << *s << std::endl; }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T10:49:55.430

改变：

```
std::vector<Shape *>::iterator it; 
```

至：

```
std::vector<Shape *>::const_iterator it;
                      ^^^^^^ 
```

当您传递`const Grup`参考时。

或者，如果您使用的是 C++11：

```
for (auto it = grup.continut.begin(); it != grup.continut.end(); ++it)
{
     ...
} 
```

# linux - 低功耗蓝牙：在 linux 中监听通知/指示

> ID：15657007
> 
> 赞同：43
> 
> 时间：2013-03-27T10:47:55.803
> 
> 标签：linux, bluetooth, bluetooth-lowenergy, bluez, gatt

我正在尝试通过 Linux 机器与 BLE 模块通信（该模块正在运行心率配置文件）。到目前为止，除了收听通知和指示（例如收听心率测量通知）之外，我已经能够做所有我需要的事情。我正在使用内核版本 3.5 和 bluez-5.3。

到目前为止使用的成功命令：

```
hcitool lescan
hcitool lecc
gatttool -b <Mac Address> --primary
gatttool -b <MAC Address> --characteristics
gatttool -b <MAC Address> --char-read
gatttool -b <MAC Address> --char-desc
gatttool -b <MAC Address> --interactive 
```

失败的命令：

```
gatttool -b <MAC Address> --listen 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-30T19:49:58.333

尝试这个...

`gatttool -b <MAC Address> --interactive`像以前一样奔跑。你会得到一个提示，然后你输入`connect`. 您应该`CON`会在提示中看到一个，表明您已连接到设备。然后键入`char-read-uuid 2902`。您应该获得设备上所有 CCC（客户端特征配置）属性的列表。 [您可以尝试将它们全部设置为 0100 以获取通知，0200 用于指示，0300 用于两者，或 0000 用于所有关闭。](https://www.bluetooth.com/wp-content/uploads/Sitecore-Media-Library/Gatt/Xml/Descriptors/org.bluetooth.descriptor.gatt.client_characteristic_configuration.xml) 键入`help`以查看所有命令及其参数。

## 编辑：

该`--listen`参数的使用要求您将其与其他命令结合使用以打开通知和/或指示。所以这是一个适用于 Bluez 4.101 的示例：

```
gatttool -b <MAC Address> --char-write-req --handle=0x0031 --value=0100 --listen 
```

显然，您需要将句柄更改为要为其打开通知的 CCC 的句柄。但是，我仍然发现只使用交互模式更容易。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-15T00:01:35.697

看起来旧版本的 Bluez（hcitool 和 gatttool）不允许您写入低功耗蓝牙设备。我最终安装了一个较新的版本（撰写本文时为 5.17）以启用通知等。

要获取所有句柄的列表，您可以运行以下命令：

```
char-desc 
```

然后您可以从句柄中读取：

```
char-read-hnd 0x000e 
```

（上面的手柄是我的nrf51822电池电量）

句柄是您从中获得的列表中的一个`char-desc.`

就像上面 Tim 说的，你可以写通知相关的句柄来获取指示或通知。（在我的情况下，我的设备只有通知）

```
char-write-req 0x000f 0100 
```

（上面的句柄是我的nrf51822电池电量通知）

在我的情况下，电池通知不应该发送任何东西，直到电池电量发生变化。

我写了一篇很长的博客文章，介绍如何使用 Bluez 进行设置。您可以在此处找到它：[开始使用低功耗蓝牙](http://www.jaredwolff.com/blog/get-started-with-bluetooth-low-energy/)随时查看！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-16T14:42:22.117

在 Mio Alpha 上读取心率的最终答案：

```
gatttool -b xx:xx:xx:xx:xx:xx -t random --char-write-req -a 0x0025 -n 0100 --listen

Characteristic value was written successfully
Notification handle = 0x0024 value: 10 4b 33 03 
Notification handle = 0x0024 value: 10 4b 33 03 
Notification handle = 0x0024 value: 10 4b 33 03 
Notification handle = 0x0024 value: 10 4a 3e 03 
Notification handle = 0x0024 value: 10 4c 28 03 28 03 
Notification handle = 0x0024 value: 10 4c 28 03 
Notification handle = 0x0024 value: 10 4b 33 03 
Notification handle = 0x0024 value: 10 4a 3e 03 3e 03 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-01T06:20:36.947

要保留 CCC 值，您需要将两个设备配对。配对后，您无需再次设置 CCC。下次重新连接时，它会找到设置，该设置将保存在密钥卡的c FLASH中。通过 SMP 配对后尝试配置。

# ios - MPMoviePlayerController 不加载电影

> ID：15657008
> 
> 赞同：2
> 
> 时间：2013-03-27T10:47:57.290
> 
> 标签：ios, objective-c, ipad, mpmovieplayercontroller

我想使用 MPMoviePlayerController 在我的 iPad 应用程序中播放视频。我的问题是，该播放器仅显示“正在加载”并且不播放视频。这是我使用的代码：

```
- (void)playMovieFile:(NSString *)fileName
{
    NSString *filePath=[[NSBundle mainBundle] pathForResource:fileName ofType:@"mov"];
    NSURL *fileUrl=[NSURL fileURLWithPath:filePath];

    self.moviePlayer=[[MPMoviePlayerController alloc] initWithContentURL:fileUrl];
    [self.moviePlayer.view setFrame:self.view.frame];

    [self.view addSubview:self.moviePlayer.view];
    [self.moviePlayer prepareToPlay];
    [self.moviePlayer play];
} 
```

我也尝试使用 MPMoviePlayerViewController，但成功了。另外，MPMoviePlayerController 播放哪些电影类型？可能是因为电影的大小吗？它是 263 MB。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:51:13.260

iPhone 支持的电影格式是`.mov, .m4v, mp4 or 3gp`.

[iOS 中的视频技术支持播放具有 .mov、.mp4、.m4v 和 .3gp 文件扩展名并使用以下压缩标准的电影文件：](http://developer.apple.com/library/ios/#documentation/miscellaneous/conceptual/iphoneostechoverview/MediaLayer/MediaLayer.html)

万一您播放带有上述扩展名的电影。将你的 MPMoivePlayer 声明为你的类中的类类型`.h`属性

```
@property(strong,nonatomic)MPMoviePlayerController *moviePlayer; 
```

在你的`.m`

```
NSString *filePath=[[NSBundle mainBundle] pathForResource:@"fileName" ofType:@"mov"];

NSURL *fileUrl=[NSURL fileURLWithPath:filePath];

self.moviePlayer=[[MPMoviePlayerController alloc] initWithContentURL:fileUrl];
[self.moviePlayer.view setFrame:CGRectMake(x,y,width,height)];

[self.view addSubview:self.moviePlayer.view];
[self.moviePlayer prepareToPlay];
[self.moviePlayer play]; 
```

# java - 尝试绘制多个多边形会导致错误

> ID：15657010
> 
> 赞同：1
> 
> 时间：2013-03-27T10:47:58.940
> 
> 标签：java, swing, jframe, awt

在我之前的帖子之后[，](https://stackoverflow.com/questions/15649228/cannot-create-multiple-polygons-in-java-only-one/15649335#15649335)我将代码更改为：

**PolygonnerJframe.java**

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.util.ArrayList;
import java.util.Iterator;
import javax.swing.JFrame;
import javax.swing.JPanel;

/**
 * 
 * @author X2
 *
 */
public class PolygonnerJframe
{
    public static void main (String[] args)
    {
     JFrame frame = new JFrame("Draw polygons");
     frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     frame.setContentPane(new DrawingPanel());
     frame.pack();
     frame.setVisible(true);
 }
} 
```

现在，此代码导致：![这个](../Images/7d071bc11b30690beb18ee35eed059e1.png)

我不明白是什么原因造成的。

我所做的更改是：当我们完成一个多边形时，它的坐标保存在 class 的 arrayList 中`Polygon`，每次我创建一个新的多边形时，我都会获取以前的多边形并绘制它们，同时绘制一个新多边形。

正如您在上面看到的，绘图出了点问题，我似乎找不到问题所在。

我会很感激任何帮助。

谢谢

**编辑：**

在考虑了@StanislavL 所说的之后，我将这些线移到了`mouseClicked()`，但是这次每次创建一个没有“旧”多边形的新多边形时，我都会得到一个新屏幕。

只是一个新的多边形......没有旧的

![在此处输入图像描述](../Images/159e8735a28e8acc835409f036e909ed.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:04:35.047

@Stas 代码在没有任何附加组件的情况下对我有用（在 IDE 中添加了基本的东西），你的意思是最终结果可能是 ???

![在此处输入图像描述](../Images/c165bfebe058ee33235cc0410bae182c.png)

.

编辑

.

肮脏的黑客是禁用 super.paintComponent(g);，但正确的方法应该只是

*   将所有对象添加到数组中（请参阅@trashgod 的非常清晰的评论）

*   创建一个 BurreferImage 作为背景图像（鼠标双击后）

通过禁用 super.paintComponent(g) 输出；

![在此处输入图像描述](../Images/a83d32faf1e9a7de5d16bbae56e968a0.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:02:47.780

在每次`public void paintComponent(Graphics g)`调用时，您都会创建一个新的多边形并将其添加到多边形列表中。

```
 Polygon poly = new Polygon(this.edges);

        // add the polygon to the polygons array 
        this.polygons.add(poly); 
```

猜猜应该只发生一次，例如在`mouseClicked()`处理中

# c++ - 将 lambda 函数转换为函数指针是否安全？

> ID：15657011
> 
> 赞同：13
> 
> 时间：2013-03-27T10:48:08.840
> 
> 标签：c++, c++11, lambda, function-pointers

我有这个代码：

```
void foo(void (*bar)()) {
    bar();
}

int main() {
    foo([] {
        int x = 2;
    });
} 
```

但是，我担心这会遭受与以下相同的命运：

```
struct X { int i; };

void foo(X* x) {
    x->i = 2;
}

int main() {
    foo(&X());
} 
```

它采用局部变量的地址。

第一个例子完全安全吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-27T11:04:51.260

不捕获*任何*内容的 lambda 可以隐式转换为具有相同参数列表和返回类型的函数指针。只有无捕获的 lambda 才能做到这一点；如果它捕获任何东西，那么他们就不能。

除非您使用的是 VS2010，它没有实现标准的那部分，因为在他们编写编译器时它还不存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T11:42:07.153

In addition to *Nicol*'s perfectly correct general answer, I would add some views on your particular fears:

> However, I'm worried that this will suffer the same fate as ..., which takes the address of a local variable.

Of course it does, but this is absolutely no problem when you just call it inside `foo` (in the same way your struct example is perfectly working), since the surrounding function (`main` in this case) that defined the local variable/lambda will outlive the called function (`foo`) anyway. It could only ever be a problem if you would safe that local variable or lambda pointer for later use. So

> Is the first example completely safe?

Yes, it is, as is the second example, too.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-28T04:53:11.200

是的，我相信第一个示例是安全的，无论在评估涉及无捕获 lambda 表达式的完整表达式期间创建的所有临时对象的生命周期如何。

根据工作草案 (n3485) 5.1.2 [expr.prim.lambda] p6

> 没有 lambda 捕获的 lambda 表达式的闭包类型具有一个公共的非虚拟非显式 const 转换函数，该函数指向具有与闭包类型的函数调用运算符相同的参数和返回类型的函数的指针。这个转换函数的返回值应该是一个函数的地址，当被调用时，它与调用闭包类型的函数调用运算符具有相同的效果。

上面的段落没有说明在评估 lambda 表达式后指向函数的有效性到期。

例如，我希望以下工作：

```
auto L = []() {
   return [](int x, int y) { return x + y; };
};

int foo( int (*sum)(int, int) ) { return sum(3, 4); }

int main() {
  foo( L() );
} 
```

虽然 clang 的实现细节肯定不是 C++ 的最终决定（标准是），如果它让你感觉更好，那么在 clang 中实现的方式是，当解析 lambda 表达式并在语义上分析一个闭包类型时发明了 lambda 表达式，并在类中添加了一个静态函数，其语义类似于 lambda 的函数调用运算符。因此，即使 'L()' 返回的 lambda 对象的生命周期已在 'foo' 的主体内结束，转换为指向函数的指针返回仍然有效的静态函数的地址。

考虑一个有点类似的情况：

```
struct B {
   static int f(int, int) { return 0; }
   typedef int (*fp_t)(int, int);
   operator fp_t() const { return &f; }
};
int main() {
  int (*fp)(int, int) = B{};
  fp(3, 4); // You would expect this to be ok.
} 
```

我当然不是 core-c++ 专家，而是 FWIW，这是我对标准字母的解释，我觉得它是可以辩护的。

希望这可以帮助。

# .net - Windows 键盘辅助功能和辅助技术

> ID：15657012
> 
> 赞同：0
> 
> 时间：2013-03-27T10:48:09.240
> 
> 标签：.net, accessibility, jaws-screen-reader, assistive-technology

我是 Windows 技术的新手，我尝试了解 Windows 辅助功能文档以改进应用程序的界面。我不了解为简单界面实现键盘导航的最佳实践。

在本节中：http: [//msdn.microsoft.com/en-us/library/ms971323.aspx#atg_keyboardshortcuts_designing_the_keyboard_ui](http://msdn.microsoft.com/en-us/library/ms971323.aspx#atg_keyboardshortcuts_designing_the_keyboard_ui)

微软解释说一个好的做法是使用熟悉的键盘界面，然后他们解释说用户通过按 TAB 键将输入焦点从一个 UI 元素移动到另一个进行导航。

但在本文档中：http: [//msdn.microsoft.com/en-us/windows/gg699728](http://msdn.microsoft.com/en-us/windows/gg699728)

微软解释说，只有需要用户交互才能运行的项目才应该被赋予键盘焦点，如链接、按钮等。

如果 TAB 不关注文本元素，那么像屏幕阅读器这样的辅助技术如何向用户提供文本信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-11T21:25:30.593

在您提供的第一个链接中，“UI 元素”指的是用户可以与之交互的元素。这包括按钮、链接、表单域和其他——只要用户可以对它们发起某种操作。按钮和链接允许用户点击一个键来采取行动，就像文本输入允许用户采取行动来输入一些文本一样。这些是需要键盘焦点的交互式元素。

关于屏幕阅读器如何向用户提供文本信息的问题的第二部分：

每个屏幕阅读器都有自己的控件，用于导航屏幕上的内容。大多数用户将通过屏幕阅读器（通常是`H`键或数字 1-6）浏览标题来导航文本文档。存在其他键盘命令 - 取决于屏幕阅读器 - 用于在文档中导航或跳转到特定项目（如表格）。如果您询问它如何导航网页以外的内容，则适用相同的规则。

值得记住的是，许多用户还会在他们选择的屏幕阅读器/辅助技术中设置自己的键盘快捷键，因此如果您决定在您的网站或应用程序上设置键盘快捷键，请务必记住它可能与用户本地设置冲突。

我希望这能回答你长期悬而未决的问题！

# bigcommerce - Bigcommerce - Side Cart Total 始终显示 $29.00

> ID：15657019
> 
> 赞同：0
> 
> 时间：2013-03-27T10:48:28.810
> 
> 标签：bigcommerce

我遇到了 BigCommerce 主题的一些问题。它是工作主题的精确副本，但在新站点上，无论购物车中有什么，迷​​你购物车/购物车始终显示 29.00 美元（站点也设置为使用英镑）

问题在于 %%LNG_SideCartTotalCost%%。

奇怪的是，我检查了语言文件（通过 url），这个变量的文本应该是：

```
"Your sub total is <strong>%s</strong>." 
```

然而它的出现是：

```
"Total: <strong>%s</strong>." 
```

我不确定这是谁改变的（该网站是一个客户，其他开发人员已经完成了工作）

有人将如何在 BigCommerce 中更改此语言变量？我的印象是你只能编辑主题，不能编辑代码？

那么，关于如何解决这个问题的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:30:12.927

我在 Bigcommerce 工作。您需要编辑的文件是 sidecartcontents.html 文件。您可以自定义 HTML、CSS、Javascript 和 JQuery。您唯一无权访问的是任何需要 PHP 文件的全局变量。作为 SaaS 平台，我们不向客户提供对 PHP 文件的访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:49:56.583

原来是语言文件的问题。支持人员必须对其进行更新。

# google-cloud-datastore - 如何从 gae 数据存储中检索电子邮件？

> ID：15657022
> 
> 赞同：0
> 
> 时间：2013-03-27T10:48:54.170
> 
> 标签：google-cloud-datastore

我使用谷歌数据存储和 jinja2 开始。我能够添加和检索字符串值，但是当我将电子邮件属性用作：email=db.Email 并使用 .email 检索它时，我会从数据存储中获取类“google.appengine.api.datastore_types.Email”。我如何获得电子邮件的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:27:39.697

使用 .email 对我有用。

蟒蛇代码

```
import webapp2
from google.appengine.ext import db

class Greeting(db.Model):
    author = db.StringProperty()
    email = db.EmailProperty()

class MainPage(webapp2.RequestHandler):
  def get(self):
    en = Greeting(author='hellooo', email=db.Email("a@a.com"))
    en.put()

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

并获得这样的价值

```
dev~devchat> x = Greeting.get_by_id(2)
dev~devchat> x.author
u'hellooo'
dev~devchat> x.email
u'a@a.com'
dev~devchat> x.email.ToXml()
u'<gd:email address="a@a.com" />' 
```

# javascript - 自定义着色器中的灯光位置（着色器材质）

> ID：15657023
> 
> 赞同：1
> 
> 时间：2013-03-27T10:48:56.203
> 
> 标签：javascript, three.js, webgl

我正在用 webgl 开发体积渲染应用程序，我要做的最后一件事是创建一个光照模型。我已经准备好了一切，但我无法获得场景中的灯光位置。我以这种方式添加灯光：

```
 var light = new THREE.DirectionalLight(0xFFFFFF, 1);
 light.position.set(0.5, 0.5, 0.1).normalize();
 camera.add(light); 
```

我将光连接到相机，因为如果我用相机移动，我需要有光静态。问题是，我正在使用 ShaderMaterial（自定义着色器）。我找不到任何代表光位置的统一变量。我已经搜索过，我应该设置：

```
material.lights = true; 
```

但它导致了错误。

```
Uncaught TypeError: Cannot set property 'value' of undefined 
```

我试图在顶点着色器中添加常量向量，但我需要乘以逆视图矩阵（如果我是对的）。但是 GLSL 1.0 不支持*反*函数。我有想法通过制服将逆视图矩阵发送到着色器，但我不知道在哪里可以获得 JS 中场景的视图矩阵。

感谢帮助。我已经尝试了一切:( ...

再见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:32:47.610

如果要将灯光添加为相机的子级并设置`material.lights = true`，则必须将相机添加为场景的子级。

```
scene.add( camera ); 
```

三.js r.57

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T00:03:43.997

如果您尝试使用相机将光坐标从模型空间投影到屏幕空间，这里有一个功能（由 Thibaut Despoulain 提供）可能会有所帮助 -

```
var projectOnScreen = function(object, camera)
{
var mat = new THREE.Matrix4();
mat.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld);
mat.multiplyMatrices( camera.projectionMatrix , mat);

var c = mat.n44;
var lPos = new THREE.Vector3(mat.n14/c, mat.n24/c, mat.n34/c);
lPos.multiplyScalar(0.5);
lPos.addScalar(0.5);
return lPos;
} 
```

# svn - VisualSVN 提交后挂钩失败

> ID：15657028
> 
> 赞同：1
> 
> 时间：2013-03-27T10:49:09.743
> 
> 标签：svn, visualsvn-server, svn-checkout, post-commit-hook

我尝试向我的 VisualSVN 服务器添加一个提交后挂钩。提交后，我需要检查整个项目。

我在提交挂钩中执行以下操作：

`"%VISUALSVN_SERVER%bin\svn.exe" checkout [http://Server.local.myServer:82/svn/Project/](http://Server.local.myServer:82/svn/Project/) D:/Projects/xampp/htdocs/Data/Project/Data --non-interactive --force --username Administrator --password xxx`

如果我在我的 CMD 中写这个，它工作得很好。但是如果我在我的客户端程序中提交我的项目，我总是会遇到同样的错误：

`Warning: post-commit hook failed (exit code 1) with output: svn: E720005: Error resolving case of 'D:\Projects\xampp\htdocs\Data\Project\Data'`

我能做什么:(？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:30:08.737

**提交后挂钩中的**无条件结帐通常是个坏主意：****

 ***   提交不止一次
*   签出是 1) 一次性操作 2) 用于空目标并且将失败 (AFAICR) 将现有工作副本作为签出目标

为了不使用逻辑重载提交后挂钩（但您可以实现它“如果文件夹是 WC - 更新，而不是 - 结帐”），我建议：

*   手动结帐 WC
*   挂钩`svn up`只为 WC表演**

# c# - 通过 Parent/TabControl->TabPage 访问嵌套的 DataGridview

> ID：15657039
> 
> 赞同：0
> 
> 时间：2013-03-27T10:49:50.207
> 
> 标签：c#, winforms, datagridview, nested-controls

我目前正在创建一个 Windows 窗体应用程序，我想从数据库中获取数据，该数据库将同步到我可以在特定表中找到的尽可能多的目标数据库。

为此，我为每个目标数据库实用地创建了一个`TabControl`内部文件。对于每个我创建一个 DataGridview 来存储数据，并让用户选择他们想要同步的记录。`Form 1``TabPages``TabPage`

```
foreach (DataRow row in targetDatabases.Rows)
{
    //Checking for target databases that aren't Master
    if (int.Parse(row["IS_MASTER"].ToString()) == 0)
    {
        //Creating a new TabPage for every target found in the Table
        TabPage newPage = new TabPage(row["CODE"].ToString());

        // I'm not sure if this should be
        newPage.Parent = tabControl;
        // or tabControl.Controls.Add(newPage)

        //Creating a new DataGridView for every target found
        DataGridView newDgv = new DataGridView();

        //Also not sure if this should be
        newDgv.Parent = newPage;
        //or newPage.Controls.Add(newDgv)

        //Setting the DataSource
        currDGV.DataSource = Model.getGridViewData(xmlpath, 0);

        //Layout settings for the DataGridView
        .
        .
        .
        }
    }
    // Return the TabControl to the View
    return tabControl; 
```

到现在都没问题。

现在用户可以选择他想要同步哪些记录以及同步到哪个目标。

这是它的样子：

![在此处输入图像描述](../Images/bc9bf65af6c0224029881fef6bcb128d.png)

但是现在，我不知道如何访问每个中的数据`DataGridView`以将用户选择保存到文件或开始同步。

我试过这样的事情：

```
for (int i = 0; i < targetDatabaseCount; i++)
{
    tabPages[targetDatabaseCount] = (TabPage)inputTabControl.GetControl(targetDatabaseCount);
    foreach (TabPage tabPage in tabPages)
    {
       DataGridView tempDgv =  //don't know how to get the gridview from the TabPage
    }
} 
```

请对我宽容，因为我是学徒，这是我在这里的第一篇文章:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:37:39.597

您可以迭代每个标签页中的控件，如果控件是 datagridview，您可以对其进行转换和使用。

像这样：

```
foreach (TabPage tbp in tbctrl.TabPages)
        {
            foreach (Control ctrl in tbp.Controls)
            {
                if (ctrl is DataGridView)
                {
                    DataGridView newDgv = (DataGridView)ctrl;
                    string strValue = newDgv.Rows[0].Cells[0].Value.ToString();
                }
            }
        } 
```

# asp.net - 在gridview中禁用按钮字段/命令字段的回发

> ID：15657043
> 
> 赞同：0
> 
> 时间：2013-03-27T10:49:57.213
> 
> 标签：asp.net, gridview

我有一个对象列表，它是数据绑定到网格视图的。网格视图有一个附加到该行的删除按钮。

我需要通过点击保持对象列表（就像离线工作一样）我不希望使用会话、cookie 或视图状态

当前行为：列表有 4 个项目 => 删除 1 个项目 => 列表有 3 个项目 => 删除 1 个项目（POSTBACK）列表重新生成 4 个项目，然后删除 1 个。

```
class Emails
{
    public string Email { get; set; }
    public Emails(string _Address)
    {
        Email = _Address;
    }
}

        if (!IsPostBack)
        {
            ListOfEmails = new List<Emails>();
            ListOfEmails.Add(new Emails("1@a.com"));
            ListOfEmails.Add(new Emails("2@a.com"));
            ListOfEmails.Add(new Emails("3@a.com"));
            ListOfEmails.Add(new Emails("4@a.com"));

            GridView1.DataSource = ListOfEmails;
            GridView1.DataBind();
        }

    protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        string EmailToBeDeleted = GridView1.Rows[e.RowIndex].Cells[0].Text;
        ListOfEmails.Remove(ListOfEmails.Find(L => L.Email == EmailToBeDeleted));
        GridView1.DataSource = null;
        GridView1.DataSource = ListOfEmails;
        GridView1.DataBind();
    } 
```

aspx：

```
 <asp:BoundField DataField="Email" HeaderText="Email Address" />
        <asp:ButtonField ButtonType="Button" CommandName="Delete" HeaderText="Action2" 
            ShowHeader="True" Text="Delete" />    
        <asp:CommandField ButtonType="Image" DeleteImageUrl="~/delete.gif" 
            ShowDeleteButton="True" /> 
```

“我现在有 2 个删除按钮”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:03:18.757

网页是无状态的。如果重新加载页面，所有控件和数据都会重新创建。这就是我们使用 Viewstates 和 Session 变量等东西来跨 post/gets 持久化数据的原因。使用缓存和更新面板等其他技术只会隐藏您正在使用视图状态的事实。我能想到的唯一选择是读取/写入某些数据源（数据库或 XML 等平面文件），但这比使用视图状态或会话的开销更大。也许如果你解释你想要避免这些选项的原因，我们可以想出一个解决方案？

# vim - Vim - 更改.vimrc 中的状态行颜色？

> ID：15657045
> 
> 赞同：3
> 
> 时间：2013-03-27T10:50:05.910
> 
> 标签：vim, background-color, statusbar

从这个问题：[如何更改 vim 状态行颜色？](https://stackoverflow.com/q/9065941/364088)我学会了如何更改状态行颜色，如下所示：

```
hi StatusLine ctermbg=3 ctermfg=4 
```

这很好，但我如何才能一直为每个窗口执行此操作，而不必为我打开的每个新窗口应用命令。我希望在 .vimrc 中执行此操作，但我不知道如何在 .vimrc 中执行此操作。

我在终端而不是 gui 中运行 vim；我使用沙漠作为配色方案。

* * *

回答！：在 Ingo 和 Kent 提供的答案让我确信我在做正确的事情之后，它仍然没有工作。然后我发现我的 vimrc 中有一行内容为

设置背景=暗

我不确定为什么会在那里，但是当我评论它时，我得到了我想要的状态行颜色。

* * *

**不是答案！**： 嗯。。好。我刚刚发现，在编辑 vimrc 时，对 .vimrc 进行更改确实给了我正确的颜色，但是当我编辑 python 文件时，状态颜色消失了。我猜这与 filetypes=on 有关吗？

无论哪种方式，当我有更多时间考虑时，我都必须重新提出这个问题，但似乎“设置背景 = 黑暗”的事情是一个问题，但这不是整个解决方案。

对于什么值得我的 vimrc 看起来像这样：

```
配色沙漠
autocmd BufRead,BufNewFile *.py 语法开启
autocmd BufRead,BufNewFile *.py set ai
autocmd BufRead *.py set smartindent cinwords=if,elif,else,for,while,with,try,except,finally,def,class
设置制表符 = 4
设置扩展选项卡
设置 shiftwidth=4
文件类型缩进
“格劳孔开始
:set ignorecase "默认搜索不区分大小写
:set incsearch
:set hlsearch
" 如果启用粘贴模式，则返回 true
功能！有粘贴（）
    如果&粘贴
        返回“粘贴模式”
    zh
        返回 '​​'
结束功能
" 始终显示状态行
设置最后状态=2
" 格式化状态行
set statusline=\ %{HasPaste()}%F%m%r%h\ %w\ \ CWD:\ %r%{getcwd()}%h\ \ \ Line:\ %l
您好 StatusLine ctermbg=3 ctermfg=4
“设置背景=黑暗
“格劳康结束

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:06:32.253

首先，您必须将命令放在 中的任何命令之后`:hi`，**因为**颜色方案可能提供了自己的定义。和类似。`:colorscheme``~/.vimrc``:set background=...``:syntax on`

如果状态行颜色仍然消失，即使在切换/打开新窗口时，也许（这在您的问题中并不完全清楚），必须有一个`:autocmd`这样做的。然后检查您安装的插件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T11:10:49.837

我认为没`StatusLine`问题（大`S`）。问题是（我猜）：

你把`hi StatusLin...`你的`colorscheme desert`电话之前。以便颜色方案覆盖您的状态行突出显示。

你应该把它`colorscheme desert`放在你的`.vimrc`

# javascript - 通过 DOM 操作进行 AngularJS 数据绑定

> ID：15657046
> 
> 赞同：1
> 
> 时间：2013-03-27T10:50:07.487
> 
> 标签：javascript, jquery, dom, angularjs

当我直接输入一些字符串来输入元素时，AngularJS 的双向数据绑定效果很好。但是当我通过javascript代码更改输入元素的值时，双向绑定不起作用。有没有这样做的好方法？

html代码：

```
<div ng-app ng-controller="Ctrl">
    <input id="inputElem" ng-model="modelName" type="text"/>
    <span>{{modelName}}</span>
</div> 
```

javascript代码：

```
function Ctrl($scope) {
    $scope.modelName = "";
}

function foo() {
    // THIS DOES NOT TRIGGER ANGULAR DATA-BINDING!!!!
    $("#inputElem").val("THIS IS DOM MANIPULATION");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T11:23:40.993

您可以通过触发更改事件来实现此目的

```
$("#inputElem").val("THIS IS DOM MANIPULATION").trigger('change'); 
```

演示：[Plunker](http://plnkr.co/edit/gRtM3kS0oCVweRgaaqtu?p=preview)

修改绑定值的另一个技巧

```
var scope = angular.element('#inputElem').scope();
scope.$apply(function(){
  scope.modelName = "THIS IS DOM MANIPULATION";
}); 
```

演示：[Plunker](http://plnkr.co/edit/gRtM3kS0oCVweRgaaqtu?p=preview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:36:38.600

您真的应该为此更改模型，而不是相反：

[http://jsfiddle.net/b9chris/EBWTR/](http://jsfiddle.net/b9chris/EBWtR/)

```
<div ng-app>
<div ng-controller=Ctrl>
<div><input ng-model=thing /></div>
<div ng-bind=thing></div>
</div>
</div>

function Ctrl($scope) {
    $scope.thing = 'Hi';

    // Later, for some reason you want to change the
    // input in code so you update the model
    setTimeout(function() {
        $scope.thing = 'Bye';
        $scope.$apply();
    }, 2000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:03:09.620

当您更改 Angular 之外的内容时，您必须在 $scope 上调用 $apply 才能应用您的更改。

从文档：

> $apply() 用于从 Angular 框架外部执行 Angular 表达式。（例如来自浏览器 DOM 事件、setTimeout、XHR 或第三方库）。

[http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$rootScope.Scope

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T11:03:49.553

您可以为此使用 ngChange 指令：http://docs.angularjs.org/api/ng.directive: [ngChange](http://docs.angularjs.org/api/ng.directive:ngChange)

# visual-studio-2010 - 显示有关视觉工作室 uml 的更多详细信息

> ID：15657059
> 
> 赞同：0
> 
> 时间：2013-03-27T10:50:50.360
> 
> 标签：visual-studio-2010, uml, field

我已经开始使用 Visual Studio 的 uml 功能。我想将 umls 导出到我正在做的文档中。

问题是 Visual Studio 生成的 umls 没有显示字段的类型或返回方法的内容。

现在它正在显示：

```
Fields:
_a;

Methods:
Execute 
```

我想：

```
Fields:
bool _a;

Methods:
void Execute(): void; 
```

可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:36:48.697

好的。我已经想出办法了。你只需要去 Class Diagram > Change Member format。

# java - Play Framework 2 存储用户密码哈希的最佳方式

> ID：15657062
> 
> 赞同：20
> 
> 时间：2013-03-27T10:51:00.683
> 
> 标签：java, playframework-2.0

我的应用程序中有一个添加用户选项。我想将用户传递以哈希格式存储在数据库中。密码以纯文本格式存储在框架附带的示例代码中。经过一番搜索，我发现在 play2 中实现了 Crypto.encryptAES() 函数，可用于保护密码。

我的问题是使用它的最佳位置是什么？以及如何使用它来创建最可维护的代码？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-27T21:58:34.627

我个人会在`User`模型中这样做。我的领域有吸气剂，所以在`setPassword`方法中：

```
this.password = HashHelper.createPassword(password); 
```

这`Hashhelper`只是一个用于多用途散列的单例类。

在 Hashelper 中我使用 BCrypt，只需将以下内容添加到 Build.scala

```
org.mindrot" % "jbcrypt" % "0.3m 
```

加密看起来像：

```
/**
 * Create an encrypted password from a clear string.
 * 
 * @param clearString
 *            the clear string
 * @return an encrypted password of the clear string
 * @throws AppException
 *             APP Exception, from NoSuchAlgorithmException
 */
public static String createPassword(String clearString) throws AppException {
    if (clearString == null) {
        throw new AppException("empty.password");
    }
    return BCrypt.hashpw(clearString, BCrypt.gensalt());
} 
```

解密看起来像：

```
/**
 * Method to check if entered user password is the same as the one that is
 * stored (encrypted) in the database.
 * 
 * @param candidate
 *            the clear text
 * @param encryptedPassword
 *            the encrypted password string to check.
 * @return true if the candidate matches, false otherwise.
 */
public static boolean checkPassword(String candidate, String encryptedPassword) {
    if (candidate == null) {
        return false;
    }
    if (encryptedPassword == null) {
        return false;
    }
    return BCrypt.checkpw(candidate, encryptedPassword);
} 
```

我喜欢让我的控制器尽可能简单，因为我将控制器视为用户操作和业务模型（在我的模型内部！）之间的流量控制器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-04T11:49:23.323

我在这个地址的网上找到了一个更简单的解决方案： [http ://rny.io/playframework/bcrypt/2013/10/22/better-password-hashing-in-play-2.html](http://rny.io/playframework/bcrypt/2013/10/22/better-password-hashing-in-play-2.html)

[首先在这个地址](http://mvnrepository.com/artifact/org.mindrot/jbcrypt/0.3m)下载jbcrypt-xxx.jar 。

在 build.sbt 的 libraryDependencies 中，添加：

```
"org.mindrot" % "jbcrypt" % "0.3m" 
```

这是创建新用户的函数（位于模型类用户中）：

```
 public static User create(String userName, String password) {
    User user = new User();
    user.userName = userName;
    user.passwordHash = BCrypt.hashpw(password, BCrypt.gensalt());
    user.save();
    return user;
  } 
```

而且，仍然在 User 类中，验证功能：

```
public static User authenticate(String userName, String password) {
    User user = User.find.where().eq("userName", userName).findUnique();
    if (user != null && BCrypt.checkpw(password, user.passwordHash)) {
      return user;
    } else {
      return null;
    } 
```

它工作！

# java - SQL 表达式的 HQL 查询模拟

> ID：15657065
> 
> 赞同：3
> 
> 时间：2013-03-27T10:51:04.007
> 
> 标签：java, sql, hibernate, hql

有两个实体。**会议**和**主题** （对应的表格是**会议**和**主题**）

一个会议可能包含一组主题。

示例表结构如下：

![表](../Images/a66b65758e9c465bd026a2cf12cb88fe.png)

在我的 java 代码`Meeting`类中有以下声明：

```
@OneToMany(cascade = CascadeType.ALL)
@JoinTable(name = "MeetingTopics",
joinColumns = {
    @JoinColumn(name = "meetingId")},
inverseJoinColumns = {
    @JoinColumn(name = "topicId")})    
@Expose
private Set<Topic> topicsList; 
```

我想获得一个会议列表（其中包含主题），其中`someTopicField`一个主题等于一个特定值，假设它是`11`

得到我想要的 SQL 表达式如下所示：

```
SELECT meetings.meetingcomment, 
       topics.topicsubject, 
       topics.sometopicfield 
FROM   topics 
       INNER JOIN (meetings 
                   INNER JOIN meetingtopics 
                           ON meetings.meetingid = meetingtopics.meetingid) 
               ON topics.topicid = meetingtopics.topicid 
WHERE  ( topics.sometopicfield  = 11 ); 
```

但是我想用HQL表达式来解决这个任务，我没有弄清楚，我怎么能这样做。

我已阅读[此文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)但不明白如何将这些示例应用于我的问题。

什么 HQL 表达式将与上述 SQL 执行相同的操作？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:40:26.303

尝试这样的事情：

```
select m.meetingcomment,
       t.topicsubject,
       t.sometopicfield
from Meeting as m
inner join m.topicsList as t
with t.sometopicfield = 11 
```

如果您只需要`Meeting`类字段，则 hql 是：

```
select m from Meeting as m
inner join m.topicsList as t
with t.sometopicfield = 11 
```

你会得到一个`Meeting`对象列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:29:17.283

像这样的东西应该工作

```
select meeting.meetingcomment,
       topic.topicsubject,
       topic.sometopicfield
from Meeting meeting
inner join meeetings.topicsList as topic
where topic.sometopicfield = 11 
```

# jquery - 如何创建没有选择器的 jQuery 函数？

> ID：15657066
> 
> 赞同：6
> 
> 时间：2013-03-27T10:51:06.437
> 
> 标签：jquery, function

我想为 jQuery 创建一个扩展，例如`$.ajax()`或`$.extend()`但不同于`$("selector").css()`.

所以我可以像这样调用我的自定义 jQuery 函数：`$.myCustomFunction("args");`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T10:53:33.993

只需将其分配给`jQuery`对象。

```
jQuery.myCustomFunction = function() {}; 
```

# apache-flex - SWFLoader 和加载事件

> ID：15657068
> 
> 赞同：1
> 
> 时间：2013-03-27T10:51:11.157
> 
> 标签：apache-flex, actionscript, air

我正在使用我这样声明的 SWFLoader：

```
<s:SWFLoader id="widget" maxWidth="150" maxHeight="75" maintainAspectRatio="true" /> 
```

而且我还有一种方法可以从 ByteArray 设置其源：

```
public function set widgetSource(widgetSource:ByteArray):void
{
    this.widget.source = widgetSource;
} 
```

它工作正常，但似乎设置 widget.source 是异步完成的，我需要知道它何时完成加载数据......我尝试了几件事但没有成功，包括将 Event.COMPLETE 侦听器添加到“小部件”，但事件是从未被解雇。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:36:24.040

您需要将事件侦听器添加到加载程序本身，例如

```
 var url:String = "yourlocation of file";
   var myWidgetLoader:URLLoader = new URLLoader();
   myWidgetLoader.addEventListener(Event.COMPLETE, completeHandler);
   myWidgetLoader.load(new URLRequest(url));

   function completeHandler(event:Event):void
   {
     trace(" fully loaded ");
   } 
```

您还可以添加进度事件来检查加载程序的进度，让我们知道您的进展情况。

# git - 如何在 Ubuntu 服务器上启动时运行流星

> ID：15657071
> 
> 赞同：7
> 
> 时间：2013-03-27T10:51:20.423
> 
> 标签：git, meteor, ubuntu-12.04

我学习meteorjs，我有一个小型远程VPS。

我想：

1.  设置从我的流星项目的 git 存储库自动拉取。
2.  将脚本放入自动启动中，将我的流星项目作为服务运行。

例如

```
meteor run -p 80 -- production 
```

我的服务器是 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T10:53:03.610

你应该使用 Ubuntu 方式，也就是 Upstart：

[http://upstart.ubuntu.com/](http://upstart.ubuntu.com/) [http://manpages.ubuntu.com/manpages/lucid/man5/init.5.html](http://manpages.ubuntu.com/manpages/lucid/man5/init.5.html)

如何定义守护进程：

[http://newcome.wordpress.com/2012/02/26/running-programs-as-linux-daemons-using-upstart/](http://newcome.wordpress.com/2012/02/26/running-programs-as-linux-daemons-using-upstart/)

希望能帮助到你 ：）

您的新贵文件或多或少：

```
# meteorjs - meteorjs job file

description "MeteorJS"
author "Igor S"

# When to start the service
start on runlevel [2345]

# When to stop the service
stop on runlevel [016]

# Automatically restart process if crashed
respawn

# Essentially lets upstart know the process will detach itself to the background
expect fork

# Run before process
pre-start script
        cd PATH_TO_METEOR_APP
        echo ""
end script

# Start the process
exec meteor run -p 80 --help -- production 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-19T02:58:38.230

这是我所做的：

```
description "meteor app server"
start on runlevel [2345]
stop on runlevel [06]
respawn
respawn limit 10 5
pre-start script
   set -e
   rm -f /path/to/your/app/.meteor/local/db/mongod.lock
end script
exec /bin/su - ec2-user -c '/path/to/your/app/meteor_server.sh'
post-stop script
    pkill -f meteor
end script 
```

该`meteor_server.sh`脚本包含：

```
cd /path/to/your/app/; meteor run -p 3000 --production 
```

确保脚本并`chmod +x`在`meteor_server.sh`3 个位置更改应用程序的路径。该脚本在停止时还会终止所有流星任务，因此它仅适用于在您的服务器上运行单个流星应用程序。我使用 nginx 以这种方式快速运行了一个流星应用程序，但节点似乎消耗了大量内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T12:17:46.723

这是我的 meteorjs.conf 文件 - 工作正常。我之前已经描述过所有问题，但是这个变体修复了它们。希望它可以帮助某人:)

`EXPORT`我得到的所有变量`printenv`

```
# meteorjs - meteorjs job file

description "MeteorJS"
author "Alex Babichev"

# When to start the service
start on runlevel [2345]

# When to stop the service
stop on runlevel [016]

# Automatically restart process if crashed
respawn

# Essentially lets upstart know the process will detach itself to the background
expect fork

chdir /home/dev/www/test

script

export MONGO_URL=mongodb://localhost:27017/meteor
export PATH=/opt/local/bin:/opt/local/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
export PWD=/home/sputnik
export NODE_PATH=/usr/lib/nodejs:/usr/lib/node_modules:/usr/share/javascript
export HOME=/home/sputnik

echo "---- start ----"
cd /home/dev/www/test
exec mrt

end script 
```

# arrays - 2d arr 显式包

> ID：15657076
> 
> 赞同：1
> 
> 时间：2013-03-27T10:51:34.087
> 
> 标签：arrays, perl, foreach

我查看了网站上的几个线程，包括这个线程，试图理解为什么我在使用 $line 时遇到未声明的变量错误。@lines 数组的每个元素都是一个字符串数组。

错误在 $line[$count] 语句的第 25 行和第 27 行

```
use strict;
use warnings;

my @lines;
my @sizes;

# read input from stdin file into 2d array
while(<>)
{
    push(@lines, my @tokens = split(/\s+/, $_));
}

# search through each array for largest sizes in
# corresponding elements
for (my $count = 0; $count <= 5; $count++)
{
    push(@sizes, 0);
    foreach my $line (@lines)
    {   
        if(length($line[$count])>$sizes[$count])
        {
            $sizes[$count] = length($line[$count]);
        }
    }
} 
```

如果有必要，我可以发布完整的代码，但我很确定错误一定在某个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:55:42.310

问题在这里：

```
push(@lines, my @tokens = split(/\s+/, $_)); 
```

将一个数组推入另一个数组只会将所有元素添加到第一个数组中。所以你正在制作一个非常长的一维数组。

要解决此问题，请使用方括号进行数组引用：

```
push @lines, [ split(/\s+/, $_) ]; #No need for a temp variable. 
```

此外，要访问数组引用，您必须取消引用它。这两种语法都是选项：

```
 ${$line}[$count];
    $line->[$count]; 
```

我认为第二种语法更具可读性。

**更新：** 此外，如果您在浏览文件时跟踪最长的长度，则可以简化代码：

```
use strict;
use warnings;
use List::Util qw/max/;

my @lines;
my @sizes = (0)x6;
while(<>)
{
    push @lines, [ my @tokens = split ];
    @sizes = map { max ( length($tokens[$_]), $sizes[$_] ) } 0..$#tokens;    
} 
```

*注意：*当`Data::Dumper`在 Perl 中处理复杂的数据结构时，核心模块是一个非常宝贵的工具。

```
use Data::Dumper;
print Dumper @lines; 
```

这将打印出您提供的任何变量的完整结构。这样你就可以看到你是否真的创造了你认为你所做的事情。

# svn - SVN 存储库必须始终具有主干和分支目录 - 对于工作目录，它们是可选的吗？

> ID：15657077
> 
> 赞同：1
> 
> 时间：2013-03-27T10:51:34.380
> 
> 标签：svn

我曾在使用 svn（使用 Tortoise）的项目中工作，这些项​​目以前从未有过“主干”目录，然后转向使用 git，现在我为两家公司工作过使用 svn……这个词`trunk`有时会出现。

从[Subversion 存储库中的“分支”、“标记”和“主干”是什么意思？](https://stackoverflow.com/questions/16142/what-do-branch-tag-and-trunk-mean-in-subversion-repositories)，似乎主干实际上就像 git 中的“主分支”？是否所有 SVN 存储库始终具有主干和分支目录，而对于工作目录，它们是可选的？比如，如果我们这样做

```
svn checkout some_svn_path/trunk . 
```

那么我们的工作目录就没有`trunk`目录了吗？（没有`.`，则`trunk`目录将存在，但使用`.`，则`trunk`目录将不存在）。但是如果稍后有人建议使用“try-new-feature”分支，那会发生什么？我在O'Reilly SVN的书中看到他们会有一个`calc`项目，然后工作目录有一个`trunk`子目录和一个`branches`子目录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:15:48.433

从@bahrep 的 URLs 你已经知道，Subversion（与 Mercurial/Git 的主线分支相反）**没有任何预定义**的布局，但**可能有任何常规布局**，这只是开发人员之间协议的结果。

*   在纯线性开发的情况下（没有分歧的历史，没有合并）存储库可能有平坦的空间（回购的根，仅此而已）
*   主干可以不被命名为“主干”，而是使用任何其他名称

您`svn co`真正的“*将存储库的某些子树*检出到*某个本地文件夹*中”-本地文件夹可能是任何文件夹，存储库子树也可以是任何文件夹。签出源只有一个含义 - 以后的操作不会发生在任何不在“签出根目录”下的存储库对象

> 但是如果稍后有人建议使用“try-new-feature”分支，那会发生什么？

没有什么。您必须将 WC 切换为新根（此分支的根）而不是当前的 create|checkout new WC for this branch

# c# - 从 C# 远程 MS Sql 服务器备份和恢复

> ID：15657082
> 
> 赞同：3
> 
> 时间：2013-03-27T10:51:47.177
> 
> 标签：c#, sql-server, backup, remote-server

我正在尝试创建将备份和恢复 mssql server 2005 db 的 ac# 函数。我几乎在网上尝试了所有东西，但我没有运气。在我的本地机器上，一切正常，但是当我远程尝试时，出现错误：操作系统错误 3... BACKUP DATABASE 异常终止。我正在使用 Server.MapPath("~/mypath") 作为路径。我还尝试了以下方法，但没有成功： [Transferring backup files from a remote sql server](http://www.codeproject.com/Articles/33963/Transferring-backup-files-from-a-remote-SQL-Server)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:56:08.647

```
Operating system error code 3(The system cannot find the path specified.). 
```

You should use a local directory on the remote server to save the backup
(of course the user connected should have permission to reach that local directory)

# fonts - 在 Migradoc 中嵌入字体

> ID：15657083
> 
> 赞同：1
> 
> 时间：2013-03-27T10:51:50.617
> 
> 标签：fonts, embed, font-face, pdfsharp, migradoc

像往常一样，网络上有很多关于此的帖子，但这些都没有帮助...我使用 windows 和 Migradoc Version = "1.32.3885.0"

要生成 pdf，我创建了一个文档。

```
var doc = new MigraDoc.DocumentObjectModel.Document(); 
```

然后我用字体定义文档的样式

```
var style = doc.Styles["Normal"];
style.Font.Name = "Adobe Fan Heiti Std B"; 
```

然后我添加我的部分、段落等并按如下方式打印 pdf

```
var printer = new PdfDocumentRenderer {Document = doc};
printer.RenderDocument();
printer.Save(filePath); 
```

这工作正常。但是，从设计师那里我得到了另一种字体，它没有安装在我的电脑上。我安装了 .otf 文件（它是 HelveticaNeueLTStd-Cn.otf 和其他两个版本的 HelveticaNeueLT）。我可以在所有程序（例如 MSWord）中使用新安装的字体，但我不能在我的文档中使用它们。我得到错误

```
Cannot get a matching glyph typeface for font 'HelveticaNeueLT Std Cn'. 
```

我可以直接从 c# 加载字体（不是安装的，而是源代码）

```
var tf = new GlyphTypeface(new Uri(@"C:\temp\HelveticaNeueLTStd-Cn.otf", UriKind.Absolute)); 
```

但我不知道如何将它嵌入到我的 Migradoc 文档中......

所以问题是：如何在 MigraDoc 文档中使用 .otf 字体来生成 pdf（在 Windows 机器上）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:17:39.907

PDFsharp 不能使用 PostScript 字体。

另见：
[http ://www.pdfsharp.net/wiki/PostScript_fonts.ashx](http://www.pdfsharp.net/wiki/PostScript_fonts.ashx)

OTF 可以包含 PostScript 或 TrueType 字体。PostScript 字体必须转换为 TrueType 才能与 PDFsharp/MigraDoc Foundation 一起使用（参见上面的链接）。

# image - 第二次保存 HttpPostedFileBase 时出现 MVC4 异常

> ID：15657084
> 
> 赞同：1
> 
> 时间：2013-03-27T10:51:51.200
> 
> 标签：image, exception, asp.net-mvc-4, upload, httppostedfilebase

在我的 ASP.NET MVC4 项目中，我需要一种上传图片的方法，该图片将保存到服务器上的文件夹中。我想出了下面的控制器代码：它基本上可以工作，但只是第一次！再次调用此方法时（使用相同的 TeacherId 设置新图像），我得到一个 System.IO.IOException (HResult -2147024864)，告诉我该文件正在被另一个进程使用。如何避免锁定？为什么它实际上首先起作用？我整理了所有图像和流，但它接缝我不知何故错过了一些重要的东西。谢谢你的帮助！

```
 [HttpPost]
    public ActionResult Upload(HttpPostedFileBase pic, int TeacherId)
    {
        if (pic.ContentLength > 0) {
            var fileName = "Teacher" + TeacherId.ToString() + "tmp.jpg";
            var path = Path.Combine(Server.MapPath("~/TempImages"), fileName);
            Image i = Image.FromStream(pic.InputStream, true, true);
            if (i.Size.Width > 700 || i.Height > 700)
            {
                Image resizedImage;
                resizedImage = ResizeImage(i, new Size { Width = 700, Height = 700 }, true);
                i.Dispose();
                resizedImage.Save(path,ImageFormat.Jpeg);
                resizedImage.Dispose();
            }
            else
            {
                i.Dispose();
            }
            pic.InputStream.Close();
            pic.InputStream.Dispose();

            TempData["TeacherId"] = TeacherId.ToString();
            return RedirectToAction("EditImage", new { TeacherId = TeacherId });
        }
        return RedirectToAction("UploadImage", new { TeacherId = TeacherId });
    } 
```

# ruby - 如何在 ruby 中将 Fixnum 转换为 Integer

> ID：15657085
> 
> 赞同：0
> 
> 时间：2013-03-27T10:51:51.727
> 
> 标签：ruby, arrays, integer, fixnum

我正在尝试获取整数，但我正在获取“Fixnum”值。

例如：

```
arr = ["1", "2", "3", "4"]
arr.each do |a|
m = a.to_i
m.class.name

Result
=> Fixnum 
```

根据上面的例子，我怎样才能得到整数值？Fixnum 只是一个整数，但在实现一个插件时，它会出现“请仅输入整数”之类的错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T10:55:42.870

在 Ruby 中，整数要么属于此类，要么`Fixnum`用于`Bignum`更大的数字。它们都继承自`Integer`类。

所以你已经得到了一个整数，不需要进一步转换它。

```
1.class #=> Fixnum
1.class.superclass #=> Integer 
```

* * *

要将数组元素转换为整数，您可以这样做：

```
arr = ["1", "2", "3", "4"]
arr.map(&:to_i) #=> [1, 2, 3, 4] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:00:00.977

所有`Fixnum`（S）都已经`Integer`。这是一些示例：

```
"12".to_i.class
#=> Fixnum
"12".to_i.integer?
#=> true
"12".to_i.to_int
#=> 12 
```

以上都是可能的，因为-

```
"12".to_i.class.superclass
#=> Integer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:55:12.280

`Fixnum`是标准整数的 ruby​​ 类。

具体来说，Integer 类涵盖了`Fixnum`s 和`Bignum`s，但老实说，这里没有什么可做的。

# .net - 实体框架 - Linq NOT IN 查询

> ID：15657086
> 
> 赞同：5
> 
> 时间：2013-03-27T10:51:56.857
> 
> 标签：.net, linq, entity-framework

我看过其他几个帖子问类似的问题，但坦率地说我很困惑。我正在尝试在 EntityFarmework 和 Linq 中执行以下 sql 语句，但无法使“NOT IN”和“UNION”正常工作

```
SELECT LmsTeam.* FROM LmsTeam
INNER JOIN Game ON LmsTeam.GameId = Game.ID 
WHERE LmsTeam.Id NOT IN 
(SELECT TeamHomeId as TeamID FROM LmsEventMatch WHERE EventId =1
UNION
SELECT TeamAwayId as TeamID FROM LmsEventMatch WHERE EventId =1)
AND LmsTeam.GameId = 1 AND LmsTeam.Active = 1 
```

所以我有`join`一些 where 子句如下，但不能做`NOT IN`and`UNION`子句。

```
from t in LmsTeams
join g in Games on t.GameId equals g.Id
  where t.GameId == 1 && t.Active == true
  select t 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:59:56.140

那个怎么样：

```
from t in LmsTeams
join g in Games on t.GameId equals g.Id
where t.GameId == 1 && t.Active == true && !(
        (from m in LmsEventMatch where m.EventId == 1 select m.TeamHomeId).Union(
         from m in LmsEventMatch where m.EventId == 1 select m.TeamAwayId)
    ).Contains(t.Id)
select t 
```

我没有测试它，因为没有你的数据上下文，但认为应该这样做。

**更新**

我认为你可以`Union`在这里避免：

```
from t in LmsTeams
join g in Games on t.GameId equals g.Id
where t.GameId == 1 && t.Active == true && !(
        LmsEventMatch.Where(m => m.EventId == 1).SelectMany(m => new int[] { m.TeamHomeId, TeamAwayId })
    ).Contains(t.Id)
select t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T18:46:01.560

另一种解决方案是使用左外连接并保留连接列为空的记录。

下面给出一个例子：

```
var query = db.Categories    
  .GroupJoin(db.Products,
      Category => Category.CategoryId,
      Product => Product.CategoryId,
      (x, y) => new { Category = x, Products = y })
  .SelectMany(
      xy => xy.Products.DefaultIfEmpty(),
      (x, y) => new { Category = x.Category, Product = y })
  .Where(w => w.Product.CategoryId == null)
  .Select(s => new { Category = s.Category}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:01:39.603

您可以如下编写和划分您的查询，这将轻松解决您的问题。

另请查看我的帖子：[SQL to LINQ（案例 7 - 使用 IN 和 NOT IN 子句过滤数据）](http://pranayamr.blogspot.in/2010/12/sql-to-linq-case-7-filter-data-by-using_15.html)

```
//first do the union of two
var query = ((from d in  LmsEventMatch 
             where d.EventId == 1
              select d.TeamHomeId).
        Union(from e in  LmsEventMatch 
                       where e.EventId == 1
                          select e.TeamAwayId));

//than perform !contains operation for no in
var records =( from t in LmsTeams
join g in Games on t.GameId equals g.Id
  where t.GameId == 1 && t.Active == true && !query.Contains(t.Id)
  select t).ToList(); 
```

in 和 not in 的图形表示 - linq 查询

![在此处输入图像描述](../Images/c73b6ac751a4882a5460d1a3eb131bae.png)

* * *

对于从 sql 到 linq 的转换，您可以使用：[Linqer](http://www.sqltolinq.com/) ![在此处输入图像描述](../Images/2400741f73ca1e1acbb60e01c9586bc0.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T11:05:47.897

```
var homeIds = LmsEventMatch.Where(em => em.Eventid == 1)
                           .Select(em => em.TeamHomeId);
var awayIds = LmsEventMatch.Where(em => em.Eventid == 1)
                           .Select(em => em.TeamAwayId);
var allIds = homeIds.Union(awayIds);

var query = LmsTeams.Where( 
                t => !allIds.Contains( t.Id ) && t.Active == 1 && t.GameId == 1); 
```

# javascript - 使用for循环显示同一div标签的多次

> ID：15657088
> 
> 赞同：0
> 
> 时间：2013-03-27T10:52:06.400
> 
> 标签：javascript, jquery, css

我想使用 for 循环显示具有相同 div 标签的不同文本。意味着如果我有三个文本，我将分别显示具有相同 div 标签的每个文本。我有三个数组。第一个两个数组包含基于这些文本的 x 和 y 坐标，将分别显示在 div 标签上。以下是我的代码。

```
 var i=1;
  for(var l=0;l<5;l++){
      $("#dimg1").attr('id','dimg'+i)
      $("#test").attr('id','test'+i)

        var st1=new Array();
        var st2=new Array();
        var st3=new Array();           

        st1=[120,150,190,250];
        st2=[130,170,220,280];
        st3=[Text1,Text2,Text3,Text4];
       $(document).ready(function(){
         $("#dimg1").hover(function(){     
           i++;

           for(var j=0;j<3;j++)
           {
              var X=st1[j];      
              var Y=st2[j];
              var txt=st3[j];      

              var test = $("<span class='test'+j></span>");

              test.html(txt);
              $(this).append(test.offset({left:X,top:Y}));
              //alert(i);
            }

         }, function(){
              $(".test").remove();
         }
      );

       });
   } 
```

你也看到输出

```
<div id="dimg1" class="dimg1" style=" border-color: #36C; border-style: dotted; width: 300px; height: 300px"></div> 
```

![在此处输入图像描述](../Images/92d91d33b16245f2162b141b6490792e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:41:27.220

你必须使4个部门，3个隐藏。

然后您可以加载文本并适当地隐藏它们。

[这是我想出的](http://jsfiddle.net/yNS9s/)

**脚本**

```
 $("#myimg1").hover(function(){

      var x1=["50","100","150","200"];
      var y1=["50","100","150","200"];
      var txt1=["Text1","Text2","Text3","Text4"];
      var i=0;

      for(var i=1;i<4;i++)
      {
          var X=x1[i-1];
          var Y=y1[i-1];
          var txt=txt1[i-1];
          var test = $("<span class='test'></span>");
          test.html(txt);

          $("#myimg"+i).append(test.offset({left:X,top:Y}));
      }

$('.myimgcls').show();
 }, function() {

     $('.test').remove();
$('.myimgcls').not('.firstimg').hide();     
 }); 
```

**CSS：**

```
.myimgcls {
    width:200px;
    height:200px;
    border:2px dashed #f30;
    position:relative;
}

.test {
    display:block;
    position:absolute;
} 
```

**html**

```
<div id="myimg1" class='myimgcls firstimg'></div>
<div id="myimg2" class='myimgcls' style="display:none"></div>
<div id="myimg3" class='myimgcls' style="display:none"></div>
<div id="myimg4" class='myimgcls' style="display:none"></div> 
```

# javascript - jQuery keyup 事件没有立即执行

> ID：15657099
> 
> 赞同：0
> 
> 时间：2013-03-27T10:52:56.727
> 
> 标签：javascript, jquery, keyboard-events

我有以下小型 jQuery 脚本：

```
 $("#content").on("keyup", "#ID1", function() {
        $("#ID2").load("loadText", resizeResult());
      });

      function resizeResult() {
        if($("#ID2").height() != $("#ID3").height()){
          $("#ID3").animate({
            height: $("#ID2").height()
          }, 800);
        }
      } 
```

我现在的问题是调整大小功能将仅由**下一个“keyup”**事件执行，但我希望在 ID2 中的**“加载”完成****后立即**执行。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:59:34.920

在 document.ready 中调用你的加载函数 ..

```
$(function(){
   $("#ID2").load("loadText", resizeResult());  //<-- call load function in document ready and in keyup function..
   $("#content").on("keyup", "#ID1", function() {
      $("#ID2").load("loadText", resizeResult());
   })
   .....
}); 
```

并请确保您的加载网址是正确的路径... loadText 似乎不是正确的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:58:57.120

在 keyupfunction 结束时调用 resizeResult()

```
$("#content").on("keyup", "#ID1", function() {
       ..................

       resizeResult();
      }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-16T20:48:03.430

您的代码中的一切看起来都很好。但是您需要将括号从`resizeResult`事件中的函数中保留下来。因为您不希望它在浏览器执行脚本时立即调用。仅在触发事件时才需要。因此，您应该将代码更改为此（以及我的本地常见事件，推荐使用 jQuery）：

```
$("#content").keyup(function() {
   $("#ID2").load("loadText", resizeResult);
});

function resizeResult() {
   if($("#ID2").height() != $("#ID3").height()){
      $("#ID3").animate({
         height: $("#ID2").height()
      }, 800);
   }
} 
```

为了安全执行，最好等到 html 完全加载或加载此 html 标记（`ID3`容器后的 JavaScript 代码）。第一种方法可以通过使用`$.document.ready`jQuery 来完成。**

# php - yii createUrl 规则返回带有子域的 url

> ID：15657103
> 
> 赞同：1
> 
> 时间：2013-03-27T10:53:22.023
> 
> 标签：php, url-rewriting, yii, routing

假设我的 yii 站点基域是`http://ii.local`.

`http://events.ii.local`除了我需要处理控制器的所有操作外，所有控制器操作都可以显示在基本域上`event`

通过通话`$this->createUrl('/event/index',array('code' => 'guruevent'))` ，我需要生成的网址为`http://events.ii.local/guruevent`

通过调用`$this->createUrl('/site/login')` ，我需要生成的 url 为`http://ii.local/site/login`.

```
'urlManager'=>array(
    'urlFormat'=>'path',
            'showScriptName'=>false,                             
            'caseSensitive'=>false,
        'rules'=>array(                                                                                     
                'http://events.ii.local/<code:\w+>'
                    => '<controller:event>/<action:index>', 
                'http://events.ii.local/<code:\w+>/<action:\w+>'
                    => '<controller:event>/<action>/<code>',
                '<controller:\w+>/<action:\w+>'
                    => '<controller>/<action>',
            ),
     ), 
```

事件子域的 URL 是使用`/event/index?code=guruevent`而不是使用 events.ii.local 子域生成的。

单域路由工作正常，但我需要为少数控制器和模块使用少数子域。我也试图设置 request->baseUrl 但是一旦我将它设置为`http://ii.local/`所有路由停止并且所有网址都打开相同的主页。

请提出修复建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:54:41.753

交换你的第一条和第二条规则。规则按顺序处理，并使用第一个匹配的。UrlManager 不寻找最佳匹配，而是先到先得。

自从

```
$this->createUrl('/event/index',array('code' => 'guruevent')) 
```

匹配第一个规则提供的模式，它将使用该规则，而不管存在的“额外”数据`code`。

一个好的经验法则是始终将最具体的规则放在首位，以确保它们匹配，然后完成一般规则以捕捉任何不符合细节的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:41:00.663

您可以使用自定义函数来创建您的 URL。例如`url($route, $params=array())`. 您将`Yii::app()->createUrl()`在内部使用，并且取决于`$route`会在它前面加上您的其他主机名。然后在您的项目中始终使用此功能来创建 URL。

如果您有信心，您还可以增强您的实现并为该函数添加更多参数，例如`$schema=''`or `$absolute=false`。这样你就可以使用这个函数来创建你项目中需要的所有类型的 URL。

另一种方法是编写您的自定义`urlManager`组件，该组件扩展自然`CUrlManager`后覆盖`createUrl()`。在那里您可以按照上面的建议执行相同的操作：检查`$route`并创建适当的 URL。

# php - 无效的方法 Mage_Sales_Model_Order_Shipment::create

> ID：15657105
> 
> 赞同：0
> 
> 时间：2013-03-27T10:53:30.617
> 
> 标签：php, magento

这是什么意思？

我试图以编程方式为订单创建发货，它抛出了一个错误，正如我在下面复制的那样。

我的代码：

```
if (!$order->canShip()) {
           echo 'can not ship this order';
           return false;
        }

$itemQty =  $order->getItemsCollection()->count();
$shipment = Mage::getModel('sales/service_order', $order)
                        ->prepareShipment($itemQty);

 $shipmentId = $shipment->create($order->getIncrementId(), $itemQty, 'Shipment created through ShipMailInvoice', true, true); 
```

错误是：

```
 <b>Fatal error</b>:  Uncaught exception 'Varien_Exception' with message 'Invalid method     Mage_Sales_Model_Order_Shipment::create(Array
(
[0] =&gt; $orderId
[1] =&gt; 8
[2] =&gt; Royal mail Shipment
[3] =&gt; 1
[4] =&gt; 1
)
)' 
in /home/toesocks/public_html/lib/Varien/Object.php:569
Stack trace:
#0 /home/toesocks/public_html/product_scanning/v2/functions/orderDispatch.php(82):     Varien_Object-&gt;__call('create', Array)
#1 /home/toesocks/public_html/product_scanning/v2/functions/orderDispatch.php(82):     Mage_Sales_Model_Order_Shipment-&gt;create('15300007141', 8, 'Shipment create...', true, true)
#2 {main}
  thrown in <b>/home/toesocks/public_html/lib/Varien/Object.php</b> on line <b>569</b><br     /> 
```

有人可以解释一下这是什么意思，为什么我会收到这个错误？

亲切的问候
杰伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:27:37.460

你得到一个 PHP 错误，不一定是 Magento 错误。 `Mage_Sales_Model_Order_Shipment`没有办法`create()`。你要的是不存在的东西。

查看`Mage_Sales_Model_Order_Shipment_Api::create()`以了解如何创建新货件。

另请参阅：[在 magento 中，如何在订单中添加货件和跟踪编号](https://stackoverflow.com/q/6651725/763468)

您使用 构建货件，`Mage_Sales_Model_Order_Shipment::addItem()`然后使用`Mage_Sales_Model_Order_Shipment::save()`.

# css - CSS 内容特殊字符：十六进制与普通字符

> ID：15657107
> 
> 赞同：6
> 
> 时间：2013-03-27T10:53:32.660
> 
> 标签：css, hex, character, glyph

**示例“黑星”★ (U+2605)**

```
.a:after {
   content: "\2605";
   position:absolute;
}

.b:after {
   content: "★";
   position:absolute;
} 
```

**演示：http:** [//jsfiddle.net/l2aelba/vBjxX/](http://jsfiddle.net/l2aelba/vBjxX/)

为什么有人/最推荐在 CSS 值中使用**HEX ？**`\2605`两者都得到相同的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T10:58:20.993

最好使用实际值而不是像底部示例那样硬编码特殊字符，因为由于 CSS 文件本身的编码，它们可能无法正确显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:12:38.357

你不需要记住荒谬的键盘快捷键来添加一个 unicode 数字，例如。

请记住，这个十六进制数字代表 unicode 中的一个独特且标准化的字符。插入实际字符会让您受制于字符集，实际上是字体，用于显示 css。

更重要的是，许多图标字体（Font Awesome 就是一个很好的例子）被映射到使用Unicode的**私人使用区域之一。**Font Awesome 字符位于第一个私人使用区域内。

根据标准中的定义，私人使用区域内没有标准化的字符。这意味着没有要显示的字符，因此样式表中唯一有形的表示是对其在 unicode 中的位置的数字引用。

为什么这些图标映射得这么远？一个很大的原因是一些屏幕阅读器会读出 css 内容中使用的任何字符。这似乎是错误的，但它确实发生了，需要加以防范。私人使用区域字符将不会被读出。

就个人而言，我的方法是按原样使用键盘字符，而对其他所有字符使用 unicode 数字。即便如此，如果中国人想使用我的代码，我是否知道他们可以轻松访问自己键盘上的所有相同字符？不过他们会有数字。

# php - FOSUserBundle 在 Elastic Beanstalk 中不起作用

> ID：15657110
> 
> 赞同：2
> 
> 时间：2013-03-27T10:53:45.293
> 
> 标签：php, symfony, fosuserbundle, amazon-elastic-beanstalk

我有一个流量很大的网站，该网站的性质意味着它可以在特定时间段内有很多请求。

我使用 amazon beanstalk 来管理负载均衡器和实例。

我最多可以运行 20 个实例，并且因为 FOSUserBundle 使用 Sessions 来保存数据，所以我正在失去用户登录等。

我知道 EB 具有粘性，但由于网站的性质，它变得不堪重负，有时不会将正确的用户转发到正确的实例，所以我又失去了用户。亚马逊根本没有帮助。

有没有办法覆盖它以使用安全 cookie（我知道 cookie 不安全，但我可以创建自己的加密/解密方法）

任何的意见都将会有帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:26:37.917

我发现基本上否定了存储在一台服务器上的会话。我记得使用自定义 php 系统执行此操作（使用我几年前构建的这个[php 网络会话](http://php.net/manual/en/function.session-set-save-handler.php)，但认为它不适用于 symfony。自从发布这个问题后，我发现 PdoSessionStorage 基本上将您的会话存储在数据库中而不是文件上服务器或实例。

请选择您的 syfmony 版本，因为命名空间有时会更改版本

[链接到 Symfony 上的 PdoSessionStorage](http://symfony.com/doc/2.1/cookbook/configuration/pdo_session_storage.html)

# vba - VBA代码仅在PowerPoint中更改一张幻灯片的大小

> ID：15657112
> 
> 赞同：0
> 
> 时间：2013-03-27T10:53:47.363
> 
> 标签：vba, powerpoint

如何使用 VBA 更改演示文稿中一张幻灯片的大小？

我知道`PageSetup.SlideWidth`和`PageSetup.SlideHeight`属性，但这些在演示文稿上有效，因此在所有幻灯片上都有效。

我确信这是可能的，因为您可以在 powerpoint 中手动执行此操作。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:45:10.280

你不能。不受程序控制，不受手动控制。

# jquery - Jquery 中原型 .any 的等价物是什么？

> ID：15657115
> 
> 赞同：15
> 
> 时间：2013-03-27T10:53:53.230
> 
> 标签：jquery, prototypejs

我们`.any`在 Prototype 中调用了一个函数。我想要和 Jquery 一样的东西。

我的原型代码是：

```
 if (item_name == '' || $R(1,ind).any(function(i){return($F("bill_details_"+i+"_narration") == item_name)})) {
     alert("This item already added.");
 } 
```

我想使用 Jquery 执行等效功能。

请帮助我实现所需的输出。提前致谢..

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-27T10:58:02.640

对于 IE 9+，它内置：

> some() 方法测试数组中的某个元素是否通过了提供的函数实现的测试。

[https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/some](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/some)

```
[2, 4, 6, 8, 10].some(function(n) { return n > 5; });
// -> true (the iterator will return true on 6) 
```

对于 IE 8 及以下版本：

[任何](http://prototypejs.org/doc/latest/language/Enumerable/prototype/any/)原型

```
[2, 4, 6, 8, 10].any(function(n) { return n > 5; });
// -> true (the iterator will return true on 6) 
```

您可以使用`jQuery.grep`：

```
jQuery.grep([2, 4, 6, 8, 10], function(n) { return n > 5; }).length > 0;
// -> true (as grep returns [6, 8, 10]) 
```

下划线 `_.any`或`_.some`

```
_.any([2, 4, 6, 8, 10], function(n) { return n > 5; });
// -> true (the iterator will return true on 6) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T12:15:37.027

ES5 有一个内置的函数叫做[`Array.prototype.some`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)，它测试数组中的*任何*元素是否与谓词函数匹配，一旦找到匹配的元素就会停止迭代。

```
.some(function(el) {
    return el.value === item_name;
}); 
```

然后，您的问题就变成了创建所需元素的数组之一，这比在 Prototype 中更难，因为 jQuery 中没有“范围”运算符。幸运的是`$.map`迭代空元素，即使内置`Array.prototype.map`没有，所以你可以使用`new Array(ind)`：

```
var found = $.map(new Array(ind), function(_, x) {
    return "bill_details_" + (x + 1) + "_narration";
}).some(function(id) {
    var el = document.getElementById(id);
    return el && (el.value === item_name);
}); 
```

`.some`上面的链接包含适用于旧版浏览器的 shim 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-11T19:21:10.937

JQuery 有[.is()](https://api.jquery.com/is/)方法，来自文档：`Check the current matched set of elements against a selector, element, or jQuery object and return *true* if at least one of these elements matches the given arguments`. 因此，等效代码是：

```
 if (item_name == '' || $([1,ind]).is(function(i) { return $('#bill_details_'+i+'_narration').attr('name') == item_name; })) {
      alert("This item already added.");
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:57:23.973

看来[http://api.jquery.com/jQuery.grep/](http://api.jquery.com/jQuery.grep/)是您正在寻找的。

尝试

```
if (item_name == '' || $.grep([1,ind],function(i){return($("#bill_details_"+i+"_narration").attr("name") == item_name)}).length>0) {
     alert("This item already added.");
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-18T13:44:03.367

根据 JQuery 的文档，如果您在回调函数中返回 false，它将中断循环：

> 通过使回调函数返回 false，我们可以在特定迭代中打破 $.each() 循环。返回非 false 与 for 循环中的 continue 语句相同；它将立即跳到下一次迭代。

取自：[http ://api.jquery.com/jquery.each/](http://api.jquery.com/jquery.each/)

# ruby-on-rails-3 - Net::HTTP - 如何打开带有地址的链接？

> ID：15657116
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:53:57.760
> 
> 标签：ruby-on-rails-3, faye, net-http

我需要用 Net::HTTP 打开这个链接：

```
"http://localhost:9292/something" 
```

终端：

```
http = Net::HTTP.new("http://localhost",9292)
=> #<Net::HTTP http://localhost:9292 open=false> 
```

我怎样才能打开这个链接，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:10:26.290

您可以使用[open-uri](http://ruby-doc.org/stdlib/libdoc/open-uri/rdoc/index.html)：

```
require 'open-uri'
contents = open('http://localhost:9292/login') {|f| f.read } 
```

或与`Net::HTTP`：

```
require 'net/http'
uri = URI('http://localhost:9292/login')
contents = Net::HTTP.get(uri) 
```

# android - 如何在 Android Spinner 中修复文本长度

> ID：15657119
> 
> 赞同：0
> 
> 时间：2013-03-27T10:54:08.717
> 
> 标签：android, text, view, spinner

我有从数据库收集数据并实时显示的微调器。我面临的问题是，当项目的长度很长时，微调器本身会拉伸并超出屏幕/视图。我想要的是有一个固定长度的微调器，它不应该自己伸展。这是我的 Spinner 的视图：

![实时视图](../Images/de34593ec1bd23149624eba456d79677.png)

下面是代码：

```
<Spinner
    android:id="@+id/spinner1"         
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

爪哇：

```
Spinner spinnerRub = (Spinner) findViewById(R.id.spinner1);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, lables); 

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:41:51.527

而不是使用 wrap content 作为 width ，根据您的要求指定宽度（比如 120dp 或..）。

# c# - 来自 html 文件的 HtmlHelper

> ID：15657121
> 
> 赞同：2
> 
> 时间：2013-03-27T10:54:24.337
> 
> 标签：c#, .net, asp.net-mvc

是否有可能在 .cshtm 文件中创建 HtmlHelper？

我尝试使用助手创建类，但 TagBuilder 将引号（JavaScript 代码）转换为 html 编码。cshtml 文件中的这段代码会更好地调试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T10:57:15.370

是的，您使用`@helper`并执行以下操作：

```
@helper Message(string msg)
{
    <p>@msg</p>
} 
```

调用助手：

```
@Message("Darren Davies") 
```

您还可以使用在文件中声明函数`@functions`

```
@functions {
   public string DarrenDavies() { return "Darren Davies"; }
} 
```

您可以像使用常规`Razor`方法一样使用它：

```
@DarrenDavies() 
```

# c# - WPF Datagrid 记录显示了几次

> ID：15657122
> 
> 赞同：0
> 
> 时间：2013-03-27T10:54:27.400
> 
> 标签：c#, wpf, wpf-controls

我设计了下面`DataGrid`并用三列映射。我已经把这些记录拿走了`Linq`并分配了这个`Grid`。但是这个网格显示了几次记录。不知道是什么行为？如何解决这个问题？

```
<DataGrid Name="workgrid" ItemsSource="{Binding it}" Margin="12,152,0,148" HorizontalAlignment="Left" Width="517">
        <DataGrid.Columns>
        <DataGridTextColumn Header="Name" Width="100" Binding="{Binding PersonName}" />
        <DataGridTextColumn Header="Place" Width="100" Binding="{Binding Place}" />
        <DataGridTextColumn Header="Amount" Width="100" Binding="{Binding Amount}" />
        </DataGrid.Columns>
    </DataGrid>

var objResult = from c in objEntities.PersonAccounts
        select new { c.PersonName, c.Amount, c.Place };

workgrid.ItemsSource = objResult; 
```

Anu 的帮助或建议将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:04:41.260

将 AutoGenerateColumns 设置为 false ：

```
<DataGrid AutoGenerateColumns="False" Name="workgrid" ItemsSource="{Binding it}" Margin="12,152,0,148" HorizontalAlignment="Left" Width="517">
    <DataGrid.Columns>
    <DataGridTextColumn Header="Name" Width="100" Binding="{Binding PersonName}" />
    <DataGridTextColumn Header="Place" Width="100" Binding="{Binding Place}" />
    <DataGridTextColumn Header="Amount" Width="100" Binding="{Binding Amount}" />
    </DataGrid.Columns>
</DataGrid> 
```

此外，您不需要显式设置 ItemsSource 并通过绑定。只用一个。

# android - 如何比较两个应用程序的证书

> ID：15657128
> 
> 赞同：0
> 
> 时间：2013-03-27T10:54:43.637
> 
> 标签：android, certificate, signature, android-package-managers

假设我有不同的证书 A 证书和 B 证书，并且我签署了 3 个应用程序（一个带有 A，两个带有 B）

如何检查使用证书 B 签名的表单应用程序是否也使用 B 签名（不是使用 A）

我需要一些方法来以编程方式检查某个应用程序是否使用与其他应用程序相同的证书进行签名

方法存根应该是这样的

```
public boolean sameCertificate(String packagename1,String packagename2){
//some comparison
//return true/false
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-18T14:38:16.340

```
public boolean sameCertificate(Context context, String packageName1, String packageName2) {
    return context.getPackageManager().checkSignatures(packageName1, packageName2) == PackageManager
            .SIGNATURE_MATCH;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-27T11:04:52.480

最简单的方法是甚至不需要检查自己——只需在清单中为这两个应用程序提供相同的共享用户 ID；这样，Android 将强制它们必须以相同方式签名。

如果您更喜欢手动方法，您可以使用 PackageManager 获取应用程序的签名。[如何获取 APK 签名签名？](https://stackoverflow.com/questions/5578871/android-how-to-get-app-signature)向您展示更多细节。

# c - 如何将用户重定向到我设备的 Web 管理界面？

> ID：15657132
> 
> 赞同：1
> 
> 时间：2013-03-27T10:54:50.783
> 
> 标签：c, linux, wifi

如何将用户重定向到我设备的 Web 管理界面？

我在我的项目中使用以下内容。

1.  busybox 的 httpd 作为 http 服务器。
2.  html 文件/js/css 来创建网页。
3.  我没有任何类型的 apache 像服务器。
4.  cgi.
5.  C语言和linux。
6.  16 MB 闪存。

用户将通过 wifi 连接到设备。当用户想通过 wifi 访问互联网时，他应该首先被重定向到我的网页。

我所做的研究是：为此我需要强制门户。说真的，我不知道如何实现强制门户以及它是什么。我发现 wifidog、chilispot 和 Nocatsplash 就是这种免费的强制门户。

编译wifidog后，我发现要运行我需要iptables。通过对内核进行必要的更改，我处于可以运行 wifidog 的那个阶段。但是当我运行 wifidog 时，我必须在 wifidog.conf 中进行配置。我已经尝试做到这一点。我添加了一些参数，例如：

```
ExternalInterface br0,
GatewayInterface br0,
AuthServer {
               Hostname auth.ilesansfil.org
           } 
```

我尝试使用浏览器访问运行 wifidog 的主板，但没有得到任何与 wifidog 相关的信息。它只是给了我的管理页面。

一件事是我的项目中没有主设备。所有设备都应该以相同的方式工作。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:57:07.597

As far I as understand - yes, you are on right track.

What you need now is AuthPuppy: [https://launchpad.net/authpuppy](https://launchpad.net/authpuppy)

# xml - 梨皂xml请求

> ID：15657138
> 
> 赞同：2
> 
> 时间：2013-03-27T10:55:18.127
> 
> 标签：xml, soap, wsdl, pear

我正在尝试通过 PEAR SOAP 与 API 通信我能够使用以下代码创建 SOAP 请求，但它并不完整。

```
 <?php
    require_once 'SOAP/Client.php';

    $client = new SOAP_Client('https://api.mindbodyonline.com/0_5/SiteService.asmx?
    wsdl',true);

    $options = array('namespace' => 'http://schemas.xmlsoap.org/soap/envelope/',
        'trace' => 1,
        'SOAPAction' =>     'http://clients.mindbodyonline.com/api/0_5/GetLocations',
         'Host'=> 'clients.mindbodyonline.com'
    );

    $ret = $client->call( 
    'GetLocations', 
    array( 
    'Request'=>array('SourceCredentials' =>  array('SourceName'=>'*****','Password'=>'*****************','siteIDs'=> array('int'=>'23661'))),'XMLDetail'=>'Full','PageSize'=>'10','CurrentPageIndex'=>'0')
    ,$options);
    echo '<pre>'.htmlspecialchars($client->getLastRequest()).'</pre>';
    ?> 
```

这会产生以下 SOAP 请求：

```
 POST /0_5/SiteService.asmx HTTP/1.0
    User-Agent: PEAR-SOAP @version@-beta
    Host: api.mindbodyonline.com
    Content-Type: text/xml; charset=UTF-8
    Content-Length: 464
    SOAPAction: "http://clients.mindbodyonline.com/api/0_5/GetLocations"
    Connection: close

    <?xml version="1.0" encoding="UTF-8"?>
    <SOAP-ENV:Envelope
    xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
    xmlns:ns4="http://clients.mindbodyonline.com/api/0_5">
    <SOAP-ENV:Body>
    <ns4:GetLocations>
    <Request>Array</Request></ns4:GetLocations>
    </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

当它需要采用这种格式时：

```
 POST http://clients.mindbodyonline.com/api/0_5/SiteService.asmx HTTP/1.1
    Accept-Encoding: gzip,deflate
    Content-Type: text/xml;charset=UTF-8
    SOAPAction: "http://clients.mindbodyonline.com/api/0_5/GetLocations"
    Host: clients.mindbodyonline.com
    Content-Length: 795

    <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Header/>
    <soapenv:Body>
      <GetLocations xmlns="http://clients.mindbodyonline.com/api/0_5">
     <Request>
        <SourceCredentials>
           <SourceName>{SourceName}</SourceName>
           <Password>{Password}</Password>
           <SiteIDs>
              <int>{SiteID}</int>
           </SiteIDs>
        </SourceCredentials>
        <XMLDetail>Bare</XMLDetail>
        <PageSize>10</PageSize>
        <CurrentPageIndex>0</CurrentPageIndex>
        <Fields>
           <string>Locations.Name</string>
           <string>Locations.City</string>
        </Fields>
     </Request>
  </GetLocations>
     </soapenv:Body>
    </soapenv:Envelope> 
```

也许我需要用全新的眼光来看待这个问题，因为我已经玩了好几个小时了。任何输入或建议将不胜感激。

WSDL 链接为：[https ://api.mindbodyonline.com/0_5/SiteService.asmx?wsdl](https://api.mindbodyonline.com/0_5/SiteService.asmx?wsdl)

更新：通过使用 SOAP_WSDL 类而不是 SOAP_Client 类，我能够使 XML SOAP 请求稍微接近所需版本的请求。

```
<?php   
$WSDL=new SOAP_WSDL('https://api.mindbodyonline.com/0_5/SiteService.asmx?wsdl',array    (trace=>1));  

$proxy=$WSDL->getProxy();  

$params = array('Request'=>array('SourceCredentials' => array('SourceName'=>'StudioSevaYoga','Password'=>'******','siteIDs'=>array('int'=>'23661')),'XMLDetail'=>'Full','PageSize'=>'10','CurrentPageIndex'=>'0'));

$options=array('soapaction'=> 'http://clients.mindbodyonline.com/api/0_5/GetLocations');

$ret = $proxy->call("GetLocations",$params,$options);

var_dump($ret);
?> 
```

然后我可以将这个 XML SOAP ENVELOPE 从 var_dump 中拉出来：

```
["outgoing_payload"]=>
      string(1118) "POST /0_5/SiteService.asmx HTTP/1.0
User-Agent: PEAR-SOAP @version@-beta
Host: api.mindbodyonline.com
Content-Type: text/xml; charset=UTF-8
Content-Length: 862
SOAPAction: "http://clients.mindbodyonline.com/api/0_5/GetLocations"
Connection: close

<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope
 xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
 SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
 <SOAP-ENV:Body>
<GetLocations>
<Request>
<SourceCredentials>
<SourceName xsi:type="xsd:string">StudioSevaYoga</SourceName>
<Password xsi:type="xsd:string">*****</Password>
<siteIDs>
<int xsi:type="xsd:string">23661</int></siteIDs></SourceCredentials>
<XMLDetail xsi:type="xsd:string">Full</XMLDetail>
<PageSize xsi:type="xsd:string">10</PageSize>
<CurrentPageIndex xsi:type="xsd:string">0</CurrentPageIndex></Request></GetLocations>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我仍然在 var_dump 中收到此错误：服务器无法处理请求。 - - 你调用的对象是空的

如果有人想从 var_dump 中找出问题，可以在这里找到： [Pear Soap Request Page](http://studio-seva.com/pearSoap10.php)它似乎多次重复相同的信息。任何指导或意见表示赞赏，谢谢。

我正在使用 PEAR SOAP 0.9.1 和 PHP 5.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:48:18.653

I was able to make this work by using the advice given here:[How to generate a PHP soap client code?](https://stackoverflow.com/questions/1656727/how-to-generate-a-php-soap-client-code)..... The PEAR SOAP generateProxyCode() method provided all the proper PEAR SOAP calls and arguments to pass the XML SOAP request to the server correctly. I tied the following php code to the generated services code with success.

```
<?php
 require_once 'SOAP/Client.php'; 
 require_once 'wsdl_proxy.php';

 $proxyLocations= new WebService_Site_x0020_Service_Site_x0020_ServiceSoap();

 $site=array('int'=>23661);
 $Request = array('SourceCredentials' => array('SourceName'=>'StudioSevaYoga','Password'=>'*********','SiteIDs'=>$site),'XMLDetail'=>'Full','PageSize'=>10,'CurrentPageIndex'=>0);

 $ret=$proxyLocations->GetLocations($Request);
 print_r($Request);
 var_dump($ret);
?> 
```

# documentation - DocBlocks：@uses 和 @see 之间的区别

> ID：15657139
> 
> 赞同：1
> 
> 时间：2013-03-27T10:55:20.240
> 
> 标签：documentation, phpdoc, docblocks

相当直截了当的问题——在编写文档块时，我应该如何确定我是否应该说`@uses`另一个结构元素，以及何时应该告诉人们`@see`另一个元素？

我已经做了一些谷歌搜索和一些 SO 搜索，但运气不佳，我能看到的唯一区别是`@uses`有一个匹配的`@used-by`标签，而是`@see`单向的。这是否意味着`@uses`/`@used-by`是首选`@see`还是有更多？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:00:31.703

当我想强调下面的方法使用由@uses 标记标识的方法/属性时，我选择@uses。不过，我完全使用@uses 的关键原因是创建双向@uses--@used-by 链接。认真对待@uses 始终如一地放置最终意味着我可以查看我的文档中的方法/属性并查看其上的@used-by 标签列表，从而一目了然地知道这个方法/属性可以产生多大的影响. 这在准备重构其用法隐藏在方法代码中的全局变量时特别有用。

我使用@see 表示对于下面的方法，有一些有趣的理由也可以看一下@see 指向的位置。如果有一个由这个方法和@see 方法操作的类属性，特别是以某种类似/相关的方式，我可能会在这两个方法上加上@see 标签，甚至可能在那个属性上加上一个@uses。

TL；博士？我只使用@uses 来表明该方法实际上利用了@uses 目标。我会将@see 用于任何其他“您也应该注意其他事情”的原因。

# c# - 带有代理到 whatsmyip.net 的 WebRequest 显示我的真实 IP

> ID：15657140
> 
> 赞同：2
> 
> 时间：2013-03-27T10:55:19.977
> 
> 标签：c#, proxy, httpwebrequest

我正在尝试代理我的请求，但似乎代理设置被忽略了。我正在使用以下代码：

```
var req = (HttpWebRequest)WebRequest.Create("http://whatsmyip.net/");
req.Proxy = new WebProxy("195.128.253.243", 8080) { BypassProxyOnLocal = false };
req.CachePolicy = new RequestCachePolicy(RequestCacheLevel.NoCacheNoStore);
var html = new StreamReader(req.GetResponse().GetResponseStream()).ReadToEnd(); 
```

代理只是来自[这里](http://www.freeproxylists.net/)的随机免费代理。结果总是包含我的真实 ip 而不是代理 ip。

当我使用[hidemyass](http://www.hidemyass.com/)或其他替代方法浏览该网站时，ip 会按预期更改。

任何人都知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:27:23.710

我刚刚尝试了您的代码（没有 HttpWebRequest 演员）从我的本地 tor 服务器反弹，它按预期工作。您是否直接在 IE 中尝试过代理？

# jquery - 连接列表中的 jQueryUI 可排序浮动项目高度问题和闪烁不起作用

> ID：15657141
> 
> 赞同：0
> 
> 时间：2013-03-27T10:55:24.327
> 
> 标签：jquery, html, css, jquery-ui

我有两个连接列表，#gallery 和#trash。当您在#gallery 中拖动项目时，其平滑且无闪烁。

我希望能够从#trash 拖到画廊。但是，它不允许您这样做。您必须将项目拖到#gallery 的顶部，然后它再次变为活动状态，然后允许您拖动项目。

发生这种情况是因为当 float: left 在其所有子元素上启用时，ul 的高度为 0。添加溢出：隐藏到 ul 将解决此问题，但会重新引入闪烁。

无论我尝试什么，我似乎都无法让两者一起工作。我希望能够从#gallery 拖动到#trash 并在每个div 中单独拖动而不会闪烁。

我在下面有一个完整的演示：http: [//jsfiddle.net/w3vvL/67/](http://jsfiddle.net/w3vvL/67/)

正如您将看到的，您无法从#tash 向上拖动到#gallery，除非您将其拖动到#gallery 的最顶部。

我尝试将左侧的浮动更改为 inline-block = 这有效....但是闪烁的 coems 回来了，所以没有成功。

```
#gallery li{display: inline-block;}
#trash li{display: inline-block;} 
```

还尝试给 ul 一个高度，但它再次引入了闪烁！

我被告知 clearfix 解决方案。解决方案是在 ul 上添加 clearfix（带有 :after 和 :before 的 IE）但我尝试过的没有用（除非我做错了。）

```
#gallery:after { clear:both; content:'.'; display:block; height:0; line-height:0; font-size:0; visibility:hidden; padding:0; margin:0;} 
```

也发现了这个，但不确定这是否有帮助：

```
activate: function(en, ui) {
   // do something here, height, float, inline, overflow etc?
       },
deactivate: function(en, ui) {
      // then do something here
    }, 
```

任何帮助将非常感激。希望有人可以让我摆脱痛苦！我已经厌倦了我能想到的一切。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:45:49.730

这是我所做的更改：http: [//jsfiddle.net/w3vvL/68/](http://jsfiddle.net/w3vvL/68/)

```
var galleryHeight;
var selectedLis;
var timer;

function checkChanges(){
    var tempHeight;
    if(selectedLis != $("#gallery li").length)
    {
        selectedLis = $("#gallery li").length;
        $('#gallery').css('height', 10 + 'px');
        galleryHeight = $('#selectedContainer').css("height");      
        console.log(galleryHeight);
        tempHeight = parseInt(galleryHeight) - 49; 
        $('#gallery').css('height', tempHeight + 'px');
    }
}

$(document).ready(function(){
    galleryHeight = $('#selectedContainer').css("height");
    selectedLis = $("#gallery li").length;
    timer = setInterval(checkChanges,5000);
}); 
```

基本上，每次列表变大或变小时，我都会更新 ul 的高度。5000ms 的等待时间可能有点长，可以缩短。希望这是您想要的，我不确定它是否在 jsfiddle 上正常工作，因为我只是在离线测试它。

## 更新：

我延迟了，似乎已经平滑了很多：http: [//jsfiddle.net/w3vvL/69/](http://jsfiddle.net/w3vvL/69/)

```
//Connect the two lists enable dragging between each one
$("#gallery").sortable({
    revert: true,
    connectWith: "#trash",
    refreshPositions: true,

    // Newly added to change container background
    start: function(event, ui) {
        $("li.ui-state-highlight").text("place here").delay(1500); //delay here seems to smooth out the movement
        $(".containerTwo").stop().animate({"background-color":"#ffb9b9", "border-color":"#f06666", "border-top-style":"dashed", "border-right-style":"dashed", "border-bottom-style":"dashed", "border-left-style":"dashed",  "border-width":"1px"}, 50);
    }, 
    stop: function(event, ui) {
         $(".containerTwo").stop().animate({"background-color":"#fff", "border-color":"#aaa", "border-top-style":"solid", "border-right-style":"solid", "border-bottom-style":"solid", "border-left-style":"solid",  "border-width":"1px"}, 50);
    }
}); 
```

# hadoop - 如何在 Hive 中透视数据

> ID：15657145
> 
> 赞同：3
> 
> 时间：2013-03-27T10:55:35.730
> 
> 标签：hadoop, pivot, hive, hiveql

如何在 HiveQL 中实现 PIVOT 功能。以下是 SQL 查询，请帮助我在 Hive 中实现这一点：

```
 CREATE TABLE Product(Cust VARCHAR(25), Product VARCHAR(20), QTY INT)
 GO
 -- Inserting Data into Table
 INSERT INTO Product(Cust, Product, QTY) VALUES('KATE','VEG',2)
 INSERT INTO Product(Cust, Product, QTY) VALUES('KATE','SODA',6)
 INSERT INTO Product(Cust, Product, QTY) VALUES('KATE','MILK',1)
 INSERT INTO Product(Cust, Product, QTY) VALUES('KATE','BEER',12)
 INSERT INTO Product(Cust, Product, QTY) VALUES('FRED','MILK',3)
 INSERT INTO Product(Cust, Product, QTY) VALUES('FRED','BEER',24)
 INSERT INTO Product(Cust, Product, QTY) VALUES('KATE','VEG',3)
 GO

 -- Pivot Table ordered by PRODUCT
 SELECT PRODUCT, FRED, KATE FROM (
 SELECT CUST, PRODUCT, QTY
 FROM Product) up
 PIVOT (SUM(QTY) FOR CUST IN (FRED, KATE)) AS pvt
 ORDER BY PRODUCT 
```

-- 期望输出： 定制产品数量 KATE VEG 2 KATE SODA 6 KATE MILK 1 KATE BEER 12 FRED MILK 3 FRED BEER 24 KATE VEG 3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-27T18:48:02.523

Hive 不支持以这种方式进行旋转。如果有少量值需要对结果进行透视，则可以使用查询中的“if”或“case”语句来完成。这种方法不适用于无限或未知的产品或客户集。

有一个请求 PIVOT 支持的[Jira 问题。](https://issues.apache.org/jira/browse/HIVE-3776)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-27T21:38:11.130

您真正需要的是首先将您的内容作为逗号（或任何其他选择）存储在文本文件中，如下所示：。

凯特，蔬菜，2 凯特，苏打水，6 凯特，牛奶，1 凯特，啤酒，12 弗雷德，牛奶，3 弗雷德，啤酒，24 凯特，蔬菜，3

在 Hive shell 中创建如下表后：

```
create table Products(Cust string, Product string, Qty int) row format \ 
delimited fields terminated by ',' lines terminated by '\n'; 
```

之后（假设您的文件在本地存储为 /user/avkash/prodlist.txt 您可以将数据加载到您的表中，如下所示：

```
load data inpath '/user/avkash/prodlist.txt' overwrite into table Products; 
```

验证表和记录如下：

```
describe Products;
select * from Products; 
```

之后，您可以在 Hive shell 上运行其他 hive 查询以实现您的目标。

# css - 标记 HTML5 页脚内容的正确方法是什么？

> ID：15657152
> 
> 赞同：1
> 
> 时间：2013-03-27T10:55:47.600
> 
> 标签：css, html, footer, markup

目前正在用 HTML5 重建网站模板，并试图与语义最佳实践保持一致，对于我认为非页面相关内容的 div，标记变得完全臃肿。这是我目前正在使用的包含各种信息面板的相当大的页脚块的标记：

```
<footer class="container">
    <div class="footer-info-panel left">
        <div class="contact-details">
            <div class="heading">Contact Us</div>
            <div class="content"></div>
        </div>
        <div class="follow-us">
            <div class="heading">Follow Us</div>
            <div class="content"></div>
        </div>
        <div class="bookmark">
            <div class="heading">Bookmark &amp; Recommend Us</div>
            <div class="content"></div>
        </div>
    </div>
    <div class="footer-info-panel right">
        <div class="payment-methods">
            <div class="heading">Payment Methods</div>
            <div class="content"></div>
        </div>
        <div class="customer-services">
            <div class="heading">Customer Services</div>
            <div class="content"></div>
        </div>
        <div class="company-info">
            <div class="heading">Company Information</div>
            <div class="content"></div>
        </div>
    </div>
</footer> 
```

因此，在 SASS 中以最少的样式表嵌套遵循 OOCSS 技术，我可以简单地将全局页脚样式定义为 .footer-info-panel .heading { *styles here* } 等，但是我应该使用 h1-h6 标签之一，它看起来像 div矫枉过正，但我​​对 html5 规范的解释会说否则，因为它不是相关的页面内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:31:53.177

[直接来自 HTML5 规范](http://www.w3.org/TR/html5/sections.html#the-footer-element)：

> 一些网站设计有时被称为“胖页脚”——页脚包含大量材料，包括图像、其他文章的链接、用于发送反馈的页面链接、特别优惠……在某些方面，一个完整的“头版”在页脚中。
> 
> 这个片段显示了一个带有“胖页脚”的网站页面的底部：

```
...
 <footer>
  <nav>
   <section>
    <h1>Articles</h1>
    <p><img src="images/somersaults.jpeg" alt=""> Go to the gym with
    our somersaults class! Our teacher Jim takes you through the paces
    in this two-part article. <a href="articles/somersaults/1">Part
    1</a> · <a href="articles/somersaults/1">Part 2</a></p>
    <p><img src="images/kindplus.jpeg"> Tired of walking on the edge of
    a clif<!-- sic -->? Our guest writer Lara shows you how to bumble
    your way through the bars. <a href="articles/kindplus/1">Read
    more...</a></p>
    <p><img src="images/crisps.jpeg"> The chips are down, now all
    that's left is a potato. What can you do with it? <a
    href="articles/crisps/1">Read more...</a></p>
   </section>
   <ul>
    <li> <a href="/about">About us...</a>
    <li> <a href="/feedback">Send feedback!</a>
    <li> <a href="/sitemap">Sitemap</a>
   </ul>
  </nav>
  <p><small>Copyright © 2015 The Snacker —
  <a href="/tos">Terms of Service</a></small></p>
 </footer>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:06:44.083

作为 Jared，您可以使用`aside`or`section`元素。

# objective-c - KVC strange behavior

> ID：15657156
> 
> 赞同：2
> 
> 时间：2013-03-27T10:56:04.613
> 
> 标签：objective-c, key-value-observing

Why this code works fine:

```
NSArray* arr = @[[CALayer layer], [CALayer layer]];
NSString *sumKeyPath = @"@sum.bounds.size.width";
CGFloat totalSize = [[arr valueForKeyPath:sumKeyPath] floatValue]; 
```

But this code give error:

```
NSArray* arr = @[[UIImage imageNamed:@"img1"], [UIImage imageNamed:@"img2"]];
NSString *sumKeyPath = @"@sum.size.width";
CGFloat totalSize = [[arr valueForKeyPath:sumKeyPath] floatValue]; 
```

**Error**: *[NSConcreteValue valueForUndefinedKey:]: this class is not key value coding-compliant for the key width.*

```
NSArray* arr = @[[UIView new], [UIView new]];
NSString *sumKeyPath = @"@sum.bounds.size.width";
CGFloat totalSize = [[arr valueForKeyPath:sumKeyPath] floatValue]; 
```

give the same error

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T11:41:00.243

`CALayer`有一个特殊的实现`valueForKeyPath:`。例如，以下工作：

```
CALayer *layer = [CALayer layer];
id x0 = [layer valueForKeyPath:@"bounds"];
// --> NSValue object containing a NSRect
id y0 = [layer valueForKeyPath:@"bounds.size"];
// --> NSValue object containing a NSSize
id z0 = [layer valueForKeyPath:@"bounds.size.width"];
// --> NSNumber object containing a float 
```

但以下不起作用：

```
CALayer *layer = [CALayer layer];
id x = [layer valueForKey:@"bounds"];
// --> NSValue object containing a NSRect
id y = [x valueForKey:@"size"];
// --> Exception: '[<NSConcreteValue 0x71189e0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key size.' 
```

所以一般来说，`NSValue`包含`NSRect`or`NSSize`的对象*不*符合键值。它仅适用于`CALayer`因为`valueForKeyPath:`实现处理整个密钥路径，而不是评估第一个密钥并传递剩余的密钥路径。

`UIImage`没有特殊的实现`valueForKeyPath:`。所以

```
UIImage *img1 = [UIImage imageNamed:@"img1"];
id x1 = [img1 valueForKey:@"size"];
// --> NSValue containing a NSSize 
```

有效，但是

```
UIImage *img1 = [UIImage imageNamed:@"img1"];
id x1 = [img1 valueForKeyPath:@"size.width"]; 
```

不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:06:06.237

我认为该错误可以准确地告诉您该问题是什么！“这个类不符合键宽的键值编码。”

# matlab - matlab correlation and significant values

> ID：15657161
> 
> 赞同：4
> 
> 时间：2013-03-27T10:56:23.433
> 
> 标签：matlab, statistics

I have a rather simple question that needs addressing in matlab. I think I understand but I need someone to clarify I'm doing this correctly:

In the following example I'm trying to calculate the correlation between two vectors and the p values for the correlation.

```
dat = [1,3,45,2,5,56,75,3,3.3];
dat2 = [3,33,5,6,4,3,2,5,7];

[R,p] = corrcoef(dat,dat2,'rows','pairwise');
R2 = R(1,2).^2;
pvalue = p(1,2); 
```

From this I have a R2 value of 0.11 and a p value of 0.38\. Does this mean that the vectors are correlated by 0.11 (i.e. 11%) and this would be expected to occur 38 % of the same, so 62 % of the time a different correlation could occur?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:00:55.620

```
>> [R,p] = corrcoef(dat,dat2,'rows','pairwise')

R =

    1.0000   -0.3331
   -0.3331    1.0000

p =

    1.0000    0.3811
    0.3811    1.0000 
```

相关性为 -0.3331，p 值为 0.3811。后者是当真正的相关性为零时，随机获得高达 -0.3331 的相关性的概率。p 值很大，因此我们不能在任何合理的显着性水平上拒绝无相关性的原假设。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T11:06:17.750

这里的相关系数是

```
r(1,2)
ans =
  -0.3331 
```

这是-33.3％的相关性，它告诉您两个数据集呈负线性相关。您可以通过绘制它们来看到这一点：

```
plot(dat, dat2, '.'), grid, lsline 
```

![在此处输入图像描述](../Images/171ea29ec40e35ad8af58cfbb96aeb4a.png)

相关性的 p 值为

```
p(1,2)
ans =
  0.3811 
```

这告诉您，即使两个随机变量之间*没有相关性，那么在 9 个观察值的**样本*中，您预计在大约 38.1% 的时间里会看到*至少与 -33.3% 一样极端的相关性。*

*至少在极端情况下*，我们的意思是样本中测得的相关性低于 -33.3%，或高于 33.3%。

鉴于 p 值如此之大，您无法可靠地得出关于是否应拒绝零相关性的原假设的任何结论。

# android-fragments - Customizing ViewPagerIndicator style

> ID：15657164
> 
> 赞同：0
> 
> 时间：2013-03-27T10:56:29.087
> 
> 标签：android-fragments, android-viewpager, viewpagerindicator

In my app, I am trying to style **ViewPagerIndicator**. The pager consists of several fragments. I want something exactly like the picture attached - **the CirclePageIndicator at the bottom right & a title at the bottom left**. However, the CirclePageIndicator is positioned centered by default & if I customize indicator's "**centered**" value false, then it goes to the left. I haven't found any option to move that to the right side as shown in the picture.

![Fragments in ViewPager with ViewPagerIndicator](../Images/826dee6e9563db20d27850f1dec36938.png)

Another concern is the title of the pager. I have tried with [**PagerTitleStrip**](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html) but this is not actually what I am looking for, this PagerTitleStrip shows the previous & next page's title at the left & right side of the title, but **I want only this page's title - exactly in the same format like the picture.**

BTW, I am using **Jake Wharton's** [**library**](https://github.com/JakeWharton/Android-ViewPagerIndicator) for the ViewpagerIndicator.

I am stuck in this issue for several days. I hope someone comes out with his wise thinking & helps me out of this?

Regards. & Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:08:25.293

在 src/com/viewpagerindicator/CirclePageIndicator.java

添加这个

//在第 236 行

```
 if (mRight) {
        longOffset = longSize  - ((count * threeRadius) / 2.0f);
    } 
```

//大约在第 116 行

```
public void setRight(boolean right) {
    mRight = right;
    invalidate();
} 
```

//第 58 行

```
private boolean mRight; 
```

如果需要，您还可以添加一些填充

# php - can't fetch base64 of image created using PHP using fopen and file_get_contents?

> ID：15657170
> 
> 赞同：0
> 
> 时间：2013-03-27T10:57:04.210
> 
> 标签：php, watermark, imgur

So, what I want is where user can upload image, a PHP script will add watermark to it,a nd the pic will be hosted on imgur using imgur API

Adding watermark to the image and hosting it to imgur is not the problem, but the problem is: to upload image to imgur, we must pass the base64 of the picture, and I can't fetch the pic that has been given watermark by PHP script using `file_get_contents` and `fopen`, it always gives error

Someone please help me with the problem so I can fetch the image, encode it to base64

That's all

UPDATE:

Just to tell you, i used the function to open the PHP file DIRECTLY without saving the pic to disk first, for some reason i can't save the image to the disk, that's why i use imgur

UPDATE AGAIN:

here's my code:

```
<?php
    header('Content-type: image/png');
    $image = $_GET['url'];
    $imagesize = getimagesize($image);
    $img = imagecreatetruecolor($imagesize[0], $imagesize[1] + 50);
    imagecopy($img, imagecreatefrompng($image), 0, 0, 0, 0, $imagesize[0], $imagesize[1]);
    $string = "Some wild watermarks";
    $font = "font.ttf";
    $fontSize="30";
    $textColor = imagecolorallocate($img, 255,255,255);
    $x=7;
    $y=$imagesize[1] + 42;
    imagettftext($img,$fontSize,0,$x,$y,$textColor,$font,$string);
    imagepng($img);
?> 
```

Here's the error i got:

Using `file_get_contents`:

```
Warning: file_get_contents(watermark.php?url=roughdesign.png) [function.file-get-contents]: failed to open stream: Result too large in URL 
```

Using `fopen`:

```
Warning: fopen(watermark.php?url=roughdesign.png) [function.fopen]: failed to open stream: Result too large in URL
Warning: filesize() [function.filesize]: stat failed for URL
Warning: fread(): supplied argument is not a valid stream resource in URL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:59:47.490

你可以试试这个-

```
<?php
function base64_encode_image ($filename=string,$filetype=string) {
    if ($filename) {
        $imgbinary = fread(fopen($filename, "r"), filesize($filename));
        return 'data:image/' . $filetype . ';base64,' . base64_encode($imgbinary);
    }
}
?> 
```

[您可以在base64_encode](http://php.net/manual/en/function.base64-encode.php)上找到更多信息

或者

或者你可以这样做 -

```
$imageContent= file_get_contents($yourImage);
$encoded = base64_encode($imageContent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:10:29.033

简单的伪代码思路

*   打开图片并按照[http://php.net/manual/en/image.examples-watermark.php添加水印](http://php.net/manual/en/image.examples-watermark.php)
*   将新创建的图像（包括水印）保存到磁盘
*   计算新建文件的base64

这应该可以正常工作。如果您收到任何错误，请说明他们所说的内容以及您从哪里得到它们。

# objective-c - How to set an inverse relationship in XCode

> ID：15657173
> 
> 赞同：3
> 
> 时间：2013-03-27T10:57:07.790
> 
> 标签：objective-c, core-data, xcode4.5

This is a silly question, but I seriously didn't find an answer...

I have a one-to-many relationship from the Entity `Events` to `Discounts` and I set a relationship like this in Xcode:

![enter image description here](../Images/5543890713b4188e287f0f4b51e2bdff.png)

I need that relationship to be inverse, so I can check which `Event` a `Discount` is from, but in XCode I can only choose "No Inverse." How can I set that relationship to be inverse?!

If you have to do it programatically, first, seriously? It can't be done from XCode? Secondly, how can I do it? And where should this be done?

Thanks

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T10:59:45.327

为了能够设置反向关系，您需要首先在目标实体中创建它。

因此，在 Discounts 实体中创建与要用作反向的事件的关系（例如`event`），然后您将能够选择它作为您的 toDiscounts 关系的反向

# c - 在 sprintf 中转义

> ID：15657176
> 
> 赞同：1
> 
> 时间：2013-03-27T10:57:17.253
> 
> 标签：c, printf

我想从逐字存储的文件中读取转义序列。

在某些时候，我的电话以 ansi-c 格式的函数之一结束

```
sprintf(target, format, ...); 
```

我的问题在没有 args 部分的情况下表现出来 - 所以不要担心细节。

格式字符串从文件中加载并存储在缓冲区中。 `'\\' 'r' '\0'` （文件包含`'\\' 'r' '\0'`）

我希望目标存储“ `\r`”，但我的目标总是以`'\\' 'r' '\0'`.

我怎么解决这个问题？

* * *

编辑：

解决我的问题。

文本文件包含三个字符 -`'\\' 'r' '\0'`

这三个是读取的，需要像两个字符一样存储`'\r' '\0'`

用户可以自由更改文件内容，我必须找到一种方法来解释文件中的行，就像我在编辑器中编译之前写的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:37:54.050

你`sprintf`可以**两次**吗？

如果您的原始文件有`"\\r"`（三个非空字符），第一次运行`sprintf`将创建一个目标`"\r"`（两个非空字符，反斜杠转义）。

然后你可以将它用作 next 的**格式**字符串`sprintf`，它应该创建一个`'\r'`（单个回车符）的目标。

**编辑：**如果原始格式字符串也没有转义格式说明符（`%`），这将无法正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:02:18.670

double由 ,`""`组成一个字符串`\r`，而`'\r'`指的是单个字符或转义序列。您可以使用`strcat`-function 并将单个字符附加到您的格式中，因为 strcat 需要`const char*`. 尝试

```
strcat(format, '\r'); 
```

当然，您需要提供足够的内存。

正如 Oli Charlesworth 提供的那样，拿起你的绳子，

```
len = strlen(str); str[len] = '\r';
str[len+1] = '\0'; 
```

在这种特殊情况下，您正在覆盖您的字符串。

看[这里](http://www.cplusplus.com/reference/cstring/strcat/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T11:33:13.910

没有标准的函数可以为你做非转义，所以你必须自己做。

```
void unescape(const char *in, char *out)
{
    int esc = 0;

    while (*in) {

       if (esc) {

          switch(*in) {
           case 'r':
              *out++ = '\r';
              break;
           case 'n':
              *out++ = '\n';
              break;
           default:
              *out++ = '\\';
              *out++ = *in;
              break;
          }

          esc = 0;

        } else if (*in == '\\') {
          esc = 1;
       } else {
          *out++ = *in;
       }

       in++;
   }

 *out = 0;
} 
```

（*注意，'out' 缓冲区必须至少与 'in' 缓冲区一样大。如果最后一个字符是 \，它会丢失）

然后你会做

```
char input[BUFSZ];
char buf[BUFSZ];

//read data from the file into 'input'

unescape(input, buf);
sprintf(target, buf, ...); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T11:18:14.890

解析外部格式并根据需要构建（内部）格式，例如：

```
if ((externalformat[0] == '\\')
      && ((externalformat[1] == 'r')
      && ((externalformat[2] == 0))
{
    strcpy(format, "\r");
}

/* use format */
sprintf(target, format, ...); 
```

# mstest - MSTest 结果“进行中”

> ID：15657184
> 
> 赞同：2
> 
> 时间：2013-03-27T10:58:07.180
> 
> 标签：mstest

有时我们会从 MSTEST 得到奇怪的结果。所有单元测试似乎同时开始 - MSTest 只是触发它们并继续前进。在所有这些都启动后，测试运行被中止。

结果“进行中”似乎很奇怪-我在 MSTest 文档中找不到有关此类结果的任何信息。

MSTest 在 Jenkins 中启动和执行，大多数时候一切正常。

任何关于这种情况的帮助或想法都将不胜感激。

这是删除了测试名称的确切输出：

```
20:57:22 Results               Top Level Tests
20:57:22 -------               ---------------
20:57:22 In Progress           (Test1)
20:57:22 In Progress           (Test2)
20:57:23 In Progress           (Test3)
20:57:23 In Progress           (Test4)
20:57:23 0/4 test(s) Passed, 4 Aborted
20:57:23 
20:57:23 Summary
20:57:23 -------
20:57:23 Test Run Aborted.
20:57:23   Aborted  4
20:57:23   ----------
20:57:23   Total    4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-06T11:26:28.103

尝试让 QTAgent32 感知大地址。

运行 Jenkins 和 MSTest 的构建服务器也有同样的问题，一堆测试报告状态为“进行中”，后来被中止。

这有助于：

1.  启动 Visual Studio 命令提示符（可能需要以管理员身份运行）
2.  执行以下操作：

> C:>editbin "程序文件 (x86)\Microsoft Visual Studio 11.0\Common7\IDE\QTAgent32.exe" /LargeAddressAware

有关详细信息，请参阅[此博客文章](http://blogs.msdn.com/b/calvin_hsia/archive/2012/06/27/10324809.aspx)。

# javascript - 使用 Chutzpah 和 requirejs 测试 javascript

> ID：15657185
> 
> 赞同：11
> 
> 时间：2013-03-27T10:58:08.413
> 
> 标签：javascript, visual-studio, requirejs, jasmine, chutzpah

我只是想知道是否有一个简单的教程展示了如何在 Visual Studio 中使用 Chutzpah、require.js 和 jasmine 测试 javascript。

基本上，我想在不使用 .html 文件的情况下运行测试，这样我就可以在 vs 测试资源管理器中看到结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-17T04:28:07.487

你可以在这里找到一些示例代码： [https ://chutzpah.codeplex.com/SourceControl/latest#Samples/RequireJS/Jasmine/tests/base/base.jasmine.test.js](https://chutzpah.codeplex.com/SourceControl/latest#Samples/RequireJS/Jasmine/tests/base/base.jasmine.test.js)

请注意，如果您想在 Chutzpah 和 Jasmine 中使用 requirejs，您需要在 chutzpah.json 中将 TestHarnessReferenceMode 设置为 AMD。否则测试将不会在浏览器中运行。

```
{
    "Framework": "jasmine",
    "TestHarnessReferenceMode": "AMD",
    "TestHarnessLocationMode": "SettingsFileAdjacent",
    "References": [
        { "Path": "require-2.1.8.js" },
        { "Path": "config.js" }
    ],
    "Tests": [
        { "Path": "tests" }
    ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:53:48.050

这是一个非常有用的视频，可让您开始使用 Chutzpah 和 Jasmine ...

[http://www.youtube.com/watch?v=meJ94rAN7P8](http://www.youtube.com/watch?v=meJ94rAN7P8)

我不认为如果您添加 Require js，就您如何设置而言，它会对视频中的演示产生很大影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T10:57:09.720

我设法通过添加一个加载所有测试模块的 AMD 模块来运行测试；也就是说，我创建了 all.test.js 文件，在其中我只是将所有测试模块作为依赖项加载：

```
requirejs.config({
    // same as the applications main baseUrl
    baseUrl: '../',
});

requirejs([
      'tests/moduleA',
      'tests/moduleB'
    ],
    function () { }
); 
```

从某种意义上说，这是测试模块的主要需求模块。

现在您右键单击并在浏览器中打开它，或者您可以使用测试运行器来运行测试。

# android - 如果我使用的项目库的 minSdkVersion 和 targetSdkVersion 与我的主项目不同，这真的很重要吗

> ID：15657187
> 
> 赞同：1
> 
> 时间：2013-03-27T10:58:10.203
> 
> 标签：android

目前，我的主要项目具有以下配置

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="16" /> 
```

我也在使用 ActionbarSherlock、Google Play 服务和滑动菜单库。他们有不同的配置。

## 动作栏夏洛克

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="16"/> 
```

## 谷歌播放服务

```
<uses-sdk android:minSdkVersion="8"/> 
```

## 滑动菜单

```
<uses-sdk
    android:minSdkVersion="5"
    android:targetSdkVersion="17" /> 
```

我想知道，让我的库项目具有不同的 minSdkVersion 和 targetSdkVersion 是否有任何副作用？到目前为止，我的测试是它们可以正常工作。但是，我可能会错过其他东西。

另外，拥有一个库的情况下，目标 SDK 版本比主项目高吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:00:13.013

不，这是正确的。

minSdkVersion 定义要求，targetSdkVersion - “推荐”要求，您的应用程序针对的 API。感谢某些功能的反向移植 - 一些功能（如操作栏）也可用于老年人 API。

如果您在库中有不同版本 - 您应该将 minSdkVersion 设置为与库中的相同（您的应用程序正在使用此库，并且库的最小请求通过其属性定义）。

如果没有这个，它可能对你有用，但你可能会在某些时候遇到问题。

# css - 视差滚动

> ID：15657199
> 
> 赞同：1
> 
> 时间：2013-03-27T10:58:58.253
> 
> 标签：css, scroll, parallax

谁能指出我正确的方向？我有一个带有固定背景图像的 DIV，但我希望它在向下滚动页面时以较慢的速度滚动。我不擅长 jQuery 或 CSS3，所以寻求帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T19:18:15.923

[http://potentpages.com/parallax-scroll-tutorial/](http://potentpages.com/parallax-scroll-tutorial/)

这是我和我的公司创建的一个教程，描述了如何制作您所说的网页。它不需要任何 jQuery 或高级 CSS。

有许多关于如何创建视差网站的库和教程。我们在这里列出了一些：

[http://potentpages.com/parallax-tutorials/](http://potentpages.com/parallax-tutorials/)

相关的javascript是：

```
var topDiv = document.getElementById("topDiv");
var speed = 1.5;

window.onscroll = function()
{
   var yOffset = window.pageYOffset;
   topDiv.style.backgroundPosition = "0px "+ (yOffset / speed) + "px";
} 
```

其中“topDiv”是您希望比“常规滚动速度”慢的元素。要使元素移动得更慢，请增加速度变量。为了让它移动得更慢，减少它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:07:01.587

网络上有多个关于视差效果的教程。这里区域二只是形成一个简单的谷歌搜索“视差效果教程”：

[http://net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique/](http://net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique/)

[http://richardshepherd.com/smashing/parallax/](http://richardshepherd.com/smashing/parallax/)

[http://stephband.info/jparallax/](http://stephband.info/jparallax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T11:58:03.767

这可能会有所帮助：[http](http://stephband.info/jparallax/) ://stephband.info/jparallax/ 它将节点转换为绝对定位的层，这些层会响应鼠标而移动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T20:44:08.320

```
window.onscroll = function(e)
{
    var val = document.body.scrollTop / your_scroll_factor;
    document.getElementById('your_background_image').style.posTop = -val;
} 
```

# ios - iPhone apps must support the 4-inch display

> ID：15657202
> 
> 赞同：0
> 
> 时间：2013-03-27T10:59:12.027
> 
> 标签：ios, app-store, retina-display

Got this news through Apple Developer News RSS -- [https://developer.apple.com/news/index.php?id=3212013b](https://developer.apple.com/news/index.php?id=3212013b) -- which says iPhone apps must support the 4-inch display. So now I have to update my app for 4-inch displays and also the images should be retina images.

I'm using some images which are not retina (2x) but still look good.

Will they reject my app if *all* images are not retina? is there any other source for this? I tried to find more information because the news link is not clear.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:02:11.957

是的，所有图像都必须是视网膜图像。Apple 会简单地扫描界面以查找不支持视网膜的图像，如果不是所有图像都是视网膜的，它将拒绝您的应用程序。这个过程大部分是自动化的，所以他们真的不太可能例外。

也就是说，内容可能会有一些例外，但界面不会。

# unit-testing - Unit tests coverage using Jacoco for Scala

> ID：15657205
> 
> 赞同：2
> 
> 时间：2013-03-27T10:59:23.263
> 
> 标签：unit-testing, scala, jacoco

When I using the follow structure on our Maven project:

```
<plugins>
        <plugin>
            <groupId>org.scala-tools</groupId>
            <artifactId>maven-scala-plugin</artifactId>
            <version>2.15.2</version>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>testCompile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <args>
                    <arg>-g:line</arg>
                </args>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.jacoco</groupId>
            <artifactId>jacoco-maven-plugin</artifactId>
            <version>0.5.8.201207111220</version>
            <executions>
                <execution>
                    <goals>
                        <goal>prepare-agent</goal>
                    </goals>
                </execution>
                <execution>
                    <id>report</id>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>report</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins> 
```

The tests are executed but the jacoco.exec file is not created. I tried to add this tag destFile to prepare-agent goal but have not success (the file with coverage information is not created).

Anyone have any form to calculate code coverage of unit test for Scala using maven and Jacoco?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:15:15.477

Jacoco maven 插件的工作依赖于 JDK、Scala 和插件本身的版本。

刚刚添加了相同的配置并且它工作正常：带有报告的 jacoco.exec 和 site/jacoco 都在目标目录中：[https ://github.com/plokhotnyuk/calculator/commit/e3a84db02dd942b0df71d4fa337df29512e213f6](https://github.com/plokhotnyuk/calculator/commit/e3a84db02dd942b0df71d4fa337df29512e213f6)

然后在使用最新（0.6.2.201302030002）版本的 Jacoco maven 插件时代理失败：

```
Caused by: java.lang.RuntimeException: Class java/util/UUID could not be instrumented.
    at org.jacoco.agent.rt.internal_5d10cad.core.runtime.ModifiedSystemClassRuntime.createFor(ModifiedSystemClassRuntime.java:138)
    at org.jacoco.agent.rt.internal_5d10cad.core.runtime.ModifiedSystemClassRuntime.createFor(ModifiedSystemClassRuntime.java:99)
    at org.jacoco.agent.rt.internal_5d10cad.PreMain.createRuntime(PreMain.java:51)
    at org.jacoco.agent.rt.internal_5d10cad.PreMain.premain(PreMain.java:43)
    ... 6 more
Caused by: java.lang.NoSuchFieldException: $jacocoAccess
    at java.lang.Class.getField(Class.java:1542)
    at org.jacoco.agent.rt.internal_5d10cad.core.runtime.ModifiedSystemClassRuntime.createFor(ModifiedSystemClassRuntime.java:136)
    ... 9 more
FATAL ERROR in native method: processing of -javaagent failed
Exception in thread "main" 
```

然后通过从JDK8切换到JDK7解决了故障。覆盖率报告数字没有改变。

同样在切换到 Scala 2.10 后，源代码行高亮开始看起来不同：

斯卡拉 2.9 ![在此处输入图像描述](../Images/97ffe2ef3493fc132b9740979af7a1ec.png)

斯卡拉 2.10 ![在此处输入图像描述](../Images/9bd94b7a57da35b651487fc46f1eb207.png)

# c++ - eclipse高亮显示错误但ndk编译项目

> ID：15657207
> 
> 赞同：1
> 
> 时间：2013-03-27T10:59:31.347
> 
> 标签：c++, eclipse, android-ndk, highlight

我在 Eclipse Juno & android-ndk-r8d 下编译了一个原生 C++ 项目

我对这种情况感到困惑，当 android-ndk-r8d 编译我的项目时出现一些小警告（不是错误！）并创建一个可执行文件，尽管突出显示了各种错误（未解决的标头、未知函数和其他...）通过日食）））有什么建议吗？

提前致谢！！！

# collections - Groovy 列表或 2D 数组列表

> ID：15657208
> 
> 赞同：0
> 
> 时间：2013-03-27T10:59:33.120
> 
> 标签：collections, groovy

我是 groovy 的新手，我正在编写一个程序，用于从具有以下格式的输入文件中读取数字

```
1 
2 3
4 5 6
7 8 9 10 
```

我希望将它们存储在二维数组中，我将如何实现它？

到目前为止，我有以下代码用于读取方法

```
private read(fileName){
    def count = 0
    def fname = new File(fileName)

    if (!fname.exists())
        println "File Not Found"

    else{
        def input = []
        def inc = 0
        fname.eachLine {line->
            def arr = line.split(" ")
            def list = []
            for (i in 1..arr.length-1)  {
                list.add(arr[i].toInteger())
            }
            input.add(list)//not sure if this is correct
            inc++
        }
        input.each {
             print it
                //not sure how to reference the list 
        }

    }
} 
```

我可以打印列表，但我不确定如何在程序中使用列表列表（用于对其执行其他操作）。任何人都可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:05:10.123

您只需要在行中的`input.each`每个项目中再次迭代。如果它是未知深度的集合，那么您需要坚持使用递归方法。

做了一个小改动并删除了`inc`，因为它不是必需的（至少在片段中）：

```
fname = """1 
2 3
4 5 6
7 8 9 10"""

def input = []
fname.eachLine { line->
  def array = line.split(" ")
  def list = []
  for (item in array)  {
      list.add item.toInteger()
  }
  input.add list 
}

input.each { line ->
   print "items in line: "
   for (item in line) {
     print "$item "
   }
   println ""
} 
```

印刷：

```
items in line: 1 
items in line: 2 3 
items in line: 4 5 6 
items in line: 7 8 9 10 
```

那是简单的迭代。您可以使用@Tim 的建议使其在 Groovy 中更加地道:-)

# c# - 从 XamlWriter.Save(object obj, Stream stream) 中获取字符串

> ID：15657209
> 
> 赞同：-1
> 
> 时间：2013-03-27T10:59:33.397
> 
> 标签：c#, stream, xamlwriter

我可以从 中取回一个字符串`XamlWriter.Save(myBF, stream)`吗？我需要它，所以将字符串保存在我的数据库中。我必须从[这个](https://stackoverflow.com/questions/6978067/wpf-can-binaryformatter-serialize-flowdocument-instance)答案的例子中改变什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:06:02.343

您可以创建一个[StringWriter](http://msdn.microsoft.com/en-us/library/system.io.stringwriter.aspx)并将其作为第二个参数传递给 XamlWriter.Save()。

然后你只需要调用`StringWriter.ToString()`来获取字符串。

# ios - 从事件数组中按日期对 UITableView 进行排序

> ID：15657211
> 
> 赞同：4
> 
> 时间：2013-03-27T10:59:39.973
> 
> 标签：ios, objective-c, json, uitableview, nsarray

我从 2 个不同的共享 Google 日历中检索了数据，并将数据存储在一个数组中。我需要将数据排序到按日期排序的分段 UITableView 中。

这是我的代码：

日历模型.h

```
#import "JSONModel.h"
#import "Time.h"

@interface CalendarModel : JSONModel

@property (strong, nonatomic) NSString* title;
@property (strong, nonatomic) NSArray<Time>* time;

@end 
```

日历模型.m

```
#import "CalendarModel.h"

@implementation CalendarModel

+(JSONKeyMapper*)keyMapper
{
    return [[JSONKeyMapper alloc] initWithDictionary:@{
            @"gd$when": @"time",
            @"title.$t": @"title",
            }];
}

@end 
```

时间.h

```
#import "JSONModel.h"

@protocol Time @end

@interface Time : JSONModel

@property (strong, nonatomic) NSString* startTime;
@property (strong, nonatomic) NSString* endTime;

@end 
```

Time.m 什么都不做，因为它由 JSONModel 处理

SportsViewController.m

```
#import "SportsViewController.h"
#import "JSONModelLib.h"
#import "CalendarModel.h"
#import "Time.h"
#import "JSONValueTransformer.h"

@interface SportsViewController () 

@property (strong, nonatomic) NSMutableArray *events;
@property (strong, nonatomic) NSArray *music;

- (NSDate *)dateAtBeginningOfDayForDate:(NSDate *)inputDate;
- (NSDate *)dateByAddingYears:(NSInteger)numberOfYears toDate:(NSDate *)inputDate;

@end

@implementation SportsViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    //make HTTP call
    NSString* searchCall = [NSString stringWithFormat:@"http://www.google.com/calendar/feeds/kao1d80fd2u5kh7268caop11o4%%40group.calendar.google.com/public/full?alt=json"];
    NSString* searchCall2 = [NSString stringWithFormat:@"http://www.google.com/calendar/feeds/3qag5m8iad46mtvsnnqbtrcjjg%%40group.calendar.google.com/public/full?alt=json"];

    [JSONHTTPClient getJSONFromURLWithString: searchCall
                                  completion:^(NSDictionary *json, JSONModelError *err) {

                                      //got JSON back
                                      NSLog(@"Got Sports JSON from web: %@", json);

                                      if (err) {
                                          [[[UIAlertView alloc] initWithTitle:@"Error"
                                                                      message:[err localizedDescription]
                                                                     delegate:nil
                                                            cancelButtonTitle:@"Close"
                                                            otherButtonTitles: nil] show];
                                          return;
                                      }

                                      //initialize the models
                                      _events = [CalendarModel arrayOfModelsFromDictionaries:
                                                json[@"feed"][@"entry"]
                                                ];

                                      if (_events) NSLog(@"Loaded successfully sports models");

                                      //show the Events
                                      [_events addObjectsFromArray:_music];
                                      NSLog(@"%@", _events);
                                      [self.tableView reloadData];

                                  }];

    [JSONHTTPClient getJSONFromURLWithString: searchCall2
                                  completion:^(NSDictionary *json2, JSONModelError *err2) {

                                      //got JSON back
                                      NSLog(@"Got Music JSON from web: %@", json2);

                                      if (err2) {
                                          [[[UIAlertView alloc] initWithTitle:@"Error"
                                                                      message:[err2 localizedDescription]
                                                                     delegate:nil
                                                            cancelButtonTitle:@"Close"
                                                            otherButtonTitles: nil] show];
                                          return;
                                      }

                                      //initialize the models
                                      _music = [CalendarModel arrayOfModelsFromDictionaries:
                                                json2[@"feed"][@"entry"]
                                                ];

                                      if (_music) NSLog(@"Loaded successfully music models");
                                      [_events addObjectsFromArray:_music];
                                      //show the Events
                                      [self.tableView reloadData];

                                  }];
    //[events addObjectsFromArray:music];
    [self.tableView reloadData];

}
;

-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    }

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - table methods
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _events.count;
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    CalendarModel* event = _events[indexPath.row];

    NSString *dato = [[event.time objectAtIndex:0] startTime];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss.SSSzzz";
    NSDate *gmtDate = [formatter dateFromString: dato];
    formatter.dateFormat = @"dd-MM-yyyy HH:mm";
    dato = [formatter stringFromDate:gmtDate];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"SportCell" forIndexPath:indexPath];
    cell.textLabel.text = [NSString stringWithFormat:@"%@",
                           event.title
                           ];
    cell.detailTextLabel.text = dato;

    return cell;
}
@end 
```

所以基本上我需要排序的所有数据都位于 _events 数组中。我只是不明白我如何按日期将其分类。startTime 和 endTime 是 NSStrings 的原因是，这就是我通过调用 Google 上的共享日历返回的

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T11:37:03.523

首先对所有事件进行分组-您必须处理变量范围（我在本地使用天数和分组事件，但您必须将它们声明为 ivars/properties）

```
 NSMutableArray *days = [NSMutableArray array];
    NSMutableDictionary *groupedEvents = [NSMutableDictionary dictionary];

- (void)groupEventsIntoDays
{
    for (CalendarModel *event in _events)
    {
        NSString *dato = [[event.time objectAtIndex:0] startTime];
        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss.SSSzzz";
        NSDate *gmtDate = [formatter dateFromString: dato];

        if (![days containsObject:gmtDate])
        {
            [days addObject:gmtDate];
            [groupedEvents setObject:[NSMutableArray arrayWithObject:event] forKey:gmtDate];
        }
        else
        {
            [((NSMutableArray*)[groupedEvents objectForKey:gmtDate]) addObject:event];
        }
    }

    days = [[days sortedArrayUsingSelector:@selector(compare:)] mutableCopy];
} 
```

部分标题：

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *header = [[UIView alloc] initWithFrame:CGRectMake(0,0,tableView.frame.size.width, 30)];
    UILabel *headerLabel = [[UILabel alloc] initWithFrame:header.bounds];
    [header addSubview:headerLabel];

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.dateFormat = @"dd-MM-yyyy HH:mm";
    NSString *dateAsString = [formatter stringFromDate:[days objectAtIndex:section]];

    [headerLabel setText:dateAsString];

    return header;
} 
```

我只触及了 cellForRow 中的前两行 - 您可以根据需要修改其余行以进行显示/格式化：

```
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSDate *date = [days objectAtIndex:indexPath.section];
    CalendarModel *event = [((NSMutableArray*)[groupedEvents objectForKey:date]) objectAtIndex:indexPath.row];

    NSString *dato = [[event.time objectAtIndex:0] startTime];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss.SSSzzz";
    NSDate *gmtDate = [formatter dateFromString: dato];
    formatter.dateFormat = @"dd-MM-yyyy HH:mm";
    dato = [formatter stringFromDate:gmtDate];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"SportCell" forIndexPath:indexPath];
    cell.textLabel.text = [NSString stringWithFormat:@"%@",
                           event.title
                           ];
    cell.detailTextLabel.text = dato;

    return cell;
} 
```

# javascript - 根据浏览器的窗口大小更改 Youtube 播放器屏幕大小

> ID：15657217
> 
> 赞同：1
> 
> 时间：2013-03-27T10:59:59.763
> 
> 标签：javascript, youtube-api, youtube-javascript-api, screen-size, browser-scrollbars

如果我使用下面的代码来获取浏览器屏幕大小，将会有边框和滚动条。无论我打开工具栏等，我都希望它完全适合窗口。我不想要边框空间和滚动条。既不是水平的，也不是垂直的。你能给我一个线索吗？顺便说一句，下面有一个[演示](http://olmasigereken.com/demo)和屏幕截图。

```
var w = window,
d = document,
e = d.documentElement,
g = d.getElementsByTagName('body')[0],
x = w.innerWidth || e.clientWidth || g.clientWidth,
y = w.innerHeight|| e.clientHeight|| g.clientHeight; 
```

![在此处输入图像描述](../Images/88d12570ea6c3858e4e1c4bb64d4f605.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:57:09.423

尝试稍微重置你的CSS

```
 * html, body {margin: 0; padding:0;} 
```

这对我有用

# rest - REST 资源的权限

> ID：15657220
> 
> 赞同：2
> 
> 时间：2013-03-27T11:00:06.680
> 
> 标签：rest, permissions

我正在编写一套休息服务，在一些资源中，我正在处理以下情况。例如：

有资源：

/文章

用户可以创建文章，用户不能删除任何文章。用户可以获取自己创建的所有文章的列表（GET /articles），但看不到其他用户的文章。将有一组特殊的“管理员”用户，他们将有足够的权限查看或删除任何文章。

我看到了两种方法：

*   与示例一样只有一个端点，并在服务代码中处理 POST、GET 和 DELETE 的权限

*   具有不同的端点 /admin/articles，具有单独的实现，并在身份验证之后和服务代码之前处理权限。

你认为哪个更好/更干净/RESTfullish？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:06:13.313

如果两个用户可以创建具有相同标识符的文章，那么在更深层次（如文件系统）表示它们会更“清晰”且更容易。

> /{用户名}/articles

如果他们都在同一个用户空间中创建文章，那么按资源授权更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:41:46.977

我会采用第一种方法 - 由于以下原因具有相同的端点：

1.  更干净，更容易理解。
2.  更容易维护——假设你将来会有更多的角色。这将强制为您添加的每个角色创建更多端点。
3.  松耦合。通过使用这种方法，您可以将应用程序的授权问题与 API 本身分离。
4.  无论如何，您必须检查代码本身的授权，以检查客户端是否调用了未经授权的资源，因此使用第二种方法您并没有真正保存任何东西。

# android - 申请很久打不开

> ID：15657229
> 
> 赞同：0
> 
> 时间：2013-03-27T11:00:40.753
> 
> 标签：android, mobile, ibm-mobilefirst

我正在开发一个工作灯应用程序。我为项目生成了android环境...在android应用程序中，我可以在后台看到主屏幕，但是有一个持续很长时间的忙碌图标，并且我无法在任何地方单击主页面我在模拟器上运行应用程序。一段时间后，它显示“客户端初始化失败。与服务的连接不可用”

我收到以下日志警告

> 跳过了 37 帧！应用程序可能在其主线程上做了太多工作。

我在日志中有这些错误

> SQLiteLog: (14) 无法在 [00bb9c9ce4] 的第 30176 行打开文件
> 
> SQLiteLog：（14）os_unix.c：30176：（2）打开（/CachedGeoposition.db）-
> 
> 响应 [http://9.124.23.225:8080/apps/services/api/RQMLight/android/heartbeat] 成功：

我在 url 上收到以下消息：

> /*-secure- {"WL-Authentication-Failure":{"wl_remoteDisableRealm":{"reason":"登录失败"}}}*/

！日志 [在这里](http://i.stack.imgur.com/VppU1.png)

我也收到错误

> CordovaWebViewClient.onReceivedError: 错误代码=-6 描述=与服务器的连接不成功。URL=file:///data/data/com.RQMLight/files/www/default/RQMLight.html

和

> onMessage(onReceivedError,{"errorCode":-6,"url":"file:///data/data/com.RQMLight/files/www/default/RQMLight.html","description":"连接到服务器不成功。"})

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T10:50:39.293

我通过在扩展 WLDroidGap 的主 java 类中添加以下行解决了这个问题。写在 onWLInitCompleted() 方法里面

```
super.setIntegerProperty("loadUrlTimeoutValue", 60000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T18:16:41.277

我有同样的问题。

我已经通过在 WL 应用程序中使用服务器的真实 IP 地址而不是使用 localhost 来解决它：

1.  当模拟器运行您的应用程序时，按菜单按钮。
2.  选择更改您的服务器 URL
3.  删除“localhost”并使用 IP 地址。
4.  接受并重试。

这解决了我的问题。

# vb.net - 如何从 .NET Winforms 对 ASP.Net Web 服务执行多个异步调用？

> ID：15657238
> 
> 赞同：0
> 
> 时间：2013-03-27T11:01:22.890
> 
> 标签：vb.net, winforms, web-services

我想使用我的网络服务，但我似乎无法调用多个异步函数......除了从一个 AsyncCompleted 级联启动另一个？

导入picklists.MyWebService

公共课主

```
Dim WithEvents ws As New picklists.MyWebService.picklists

Private Sub main_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    ws.GetCustomersAsDatatableAsync()
    ws.GetRoutesAsDatatableAsync()

End Sub

Private Sub ws_GetCustomersAsDatatableCompleted(sender As Object, e As GetCustomersAsDatatableCompletedEventArgs) Handles ws.GetCustomersAsDatatableCompleted

    Dim dt As DataTable = CType(e.Result, DataTable)

    cmb_customer.DataSource = dt
    cmb_customer.DisplayMember = "NAME"

End Sub

Private Sub ws_GetRoutesAsDatatableCompleted(sender As Object, e As GetRoutesAsDatatableCompletedEventArgs) Handles ws.GetRoutesAsDatatableCompleted

    Dim dt As DataTable = CType(e.Result, DataTable)

    cmb_route.DataSource = dt
    cmb_route.DisplayMember = "NAME"

End Sub 
```

内部异常： **{“异步处理过程中出现错误。多个异步同时操作需要唯一的状态对象才能完成。”}**

**编辑/解决方案**：

```
Imports picklists.MyWebService

Public Class main

    Dim WithEvents ws As New picklists.MyWebService.picklists

    Private Sub main_Load(sender As Object, e As EventArgs) Handles MyBase.Load

        ws.GetCustomersAsDatatableAsync(Guid.NewGuid.ToString)
        ws.GetRoutesAsDatatableAsync(Guid.NewGuid.ToString)

    End Sub

    Private Sub ws_GetCustomersAsDatatableCompleted(sender As Object, e As GetCustomersAsDatatableCompletedEventArgs) Handles ws.GetCustomersAsDatatableCompleted

        Dim g As String = e.UserState

        Dim dt As DataTable = CType(e.Result, DataTable)

        cmb_customer.DataSource = dt
        cmb_customer.DisplayMember = "NAME"

    End Sub

    Private Sub ws_GetRoutesAsDatatableCompleted(sender As Object, e As GetRoutesAsDatatableCompletedEventArgs) Handles ws.GetRoutesAsDatatableCompleted

        Dim g As String = e.UserState

        Dim dt As DataTable = CType(e.Result, DataTable)

        cmb_route.DataSource = dt
        cmb_route.DisplayMember = "NAME"

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:29:55.417

[这](http://www.windows-tech.info/13/145e1fa7cf14447c.php)是一些具有此问题的良好 c# 示例的文章。它指出，您应该将唯一的状态对象传递给异步方法。

```
ws.GetCustomersAsDatatableAsync(System.Guid.NewGuid())
ws.GetRoutesAsDatatableAsync(System.Guid.NewGuid()) 
```

# django - 在 Django 中将项目图像与项目和设计模型分开

> ID：15657241
> 
> 赞同：0
> 
> 时间：2013-03-27T11:01:41.263
> 
> 标签：django, model

我有一个项目模型：

```
class Project(models.Model):
     category = models.ManyToManyField(ProjectCategory)
     designer = models.ForeignKey(User)
     name = models.CharField(max_length=255)
     description = models.TextField()
     image1 = ImageField(upload_to='.../designs/')
     image2 = ImageField(upload_to='.../designs/')
     image3 = ImageField(upload_to='.../designs/') 
```

我想将图像分开到另一个模型：

```
class ProjectImages(models.Model):
     project = models.ForeignKey(Project)
     image1 = ImageField(upload_to='.../designs/')
     image2 = ImageField(upload_to='.../designs/')
     image3 = ImageField(upload_to='.../designs/') 
```

这是一个正确的模型吗？或者将项目图像与项目区分开来的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:08:05.730

一个图像字段是可以的。您可以在每个项目中保存大量图像。

```
class ProjectImages(models.Model):
     project = models.ForeignKey(Project)
     image = ImageField(upload_to='.../designs/') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:09:20.060

如果您希望每个项目具有 0 到 N 个图像的灵活性，那么您应该使用以下 ProjectImage 模型：

```
class ProjectImage(models.Model):
    project = models.ForeignKey(Project)
    image = ImageField(upload_to='.../designs/') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T11:09:46.990

你可能想要`OneToOne`关系而不是`Forienkey`，所以模型可以是

```
class ProjectImages(models.Model):
     project = models.OneToOneField(Project)
     image1 = ImageField(upload_to='.../designs/')
     image2 = ImageField(upload_to='.../designs/')
     image3 = ImageField(upload_to='.../designs/') 
```

如果每个项目的图像数量固定为 3（​​或您决定的数字），这很好。

* * *

如果您想要可变数量的图像，您可以将模型创建为

```
class ProjectImages(models.Model):
     project = models.ForeignKey(Project)
     image = ImageField(upload_to='.../designs/')
     sequence_num = IntegerField() 
```

您可以添加任意数量`ProjectImages`并指定`sequence_num`给它们（如果需要）。

# hbase - Hbase 和 Zookeeper EndOfStreamException

> ID：15657243
> 
> 赞同：2
> 
> 时间：2013-03-27T11:01:49.513
> 
> 标签：hbase, apache-zookeeper

这个异常总是出现

```
EndOfStreamException: Unable to read additional data from client sessionid 0x13da73a3622010a, likely client has closed socket
    at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:220)
    at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:224)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:54:11.837

Zookeeper 存在这个问题，在 3.4.5 中得到了修复。 [https://issues.apache.org/jira/browse/ZOOKEEPER-1582](https://issues.apache.org/jira/browse/ZOOKEEPER-1582)

# mysql - 如何在 MySQLPython 的字典中制作字典？

> ID：15657247
> 
> 赞同：0
> 
> 时间：2013-03-27T11:01:56.907
> 
> 标签：mysql, python-2.7, tuples

我有以下代码：

```
import MySQLdb  
import sys
import pprint

connect = MySQLdb.connect(host = "127.8.2.3", port=3377, user = "root",  db="data1")
with connect:

    cur = connect.cursor()
    cur.execute("SELECT familynames,names FROM data1.files")

    rows = cur.fetchall()
pprint.pprint(rows) 
```

我想创建一个大字典，其中“姓氏”作为键，“名称”作为值。此外，大字典（名称）的值应该再次是字典本身，键 = 名称，值 = 数量同姓下同名。

我已经尝试过 MySQLPython 的 DictCursor 函数，但它不能在 dict 中创建 dict。

我还尝试对大字典的每个项目进行循环以拆分并创建另一个较小的字典（用于大字典的值），但是由于 cur.execute 的返回结果是一个也不可能的元组。

有人可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:02:45.617

您需要进行一些处理才能获得该结构。我会使用[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)按姓氏对您的行进行分组，然后[`collections.Counter()`](http://docs.python.org/2/library/collections.html#collections.Counter)创建您需要的内部映射。

`groupby`要求您对数据进行排序，因此查询`ORDER BY`也需要一个子句：

```
from collections import Counter
from itertools import groupby
from operator import itemgetter
import pprint

import MySQLdb  

familynames = {}

connection = MySQLdb.connect(host="127.8.2.3", port=3377, user="root",  db="data1")
with connection:
    cur = connect.cursor()
    cur.execute("SELECT familynames, names FROM data1.files ORDER BY familynames")

    for familyname, names in groupby(cur, key=itemgetter(0)):
        familynames[familyname] = Counter(row[1] for row in names)

pprint.pprint(familynames) 
```

该`groupby`函数对每行（`familynames`列）的第一个元素上的行进行分组，因此遍历`names`可迭代对象只会产生`familynames`具有相同值的行。

然后，我们将名称（每行中的第二列）提供给`Counter()`，这会产生`name`以每个名称的计数作为值的键。

# android - 获取联系人的 ID、姓名和电话号码？

> ID：15657248
> 
> 赞同：0
> 
> 时间：2013-03-27T11:01:59.240
> 
> 标签：android

我有一个“联系人”类，我正在使用适用于 Android 的标准联系人选择器代码，但我也想获取联系人的“id”和“姓名”，而不仅仅是号码......这是我的代码。

```
@Override public void onActivityResult( int requestCode, int resultCode, Intent intent ) {

    super.onActivityResult( requestCode, resultCode, intent );
    if ( requestCode == PICK_CONTACT_REQUEST ) {

        if ( resultCode == RESULT_OK ) {
            Uri contactUri = intent.getData();
            String[] projection = {Phone.NUMBER};
            Cursor cursor = getContentResolver()
                    .query(contactUri, projection, null, null, null);
            cursor.moveToFirst();
            int column = cursor.getColumnIndex(Phone.NUMBER);
            String number = cursor.getString(column);
            int contactNumber = Integer.parseInt(number);

            //i need to get the contactId and the contactName here

            Contact newContact = new Contact(contactId,contactName,contactNumber);

               EditText _contactName = (EditText) findViewById(R.id.contact_name);
               _contactName.setText(number.toString());
            }
        }
    } 
```

我找到了解决方案。如果有人需要，就在这里。

```
 Uri contactUri = intent.getData();
            String[] projection = {Phone.NUMBER, Phone.DISPLAY_NAME, Phone._ID};

            Cursor cursor = getContentResolver()
                    .query(contactUri, projection, null, null, null);
            cursor.moveToFirst();

            int columnNumber = cursor.getColumnIndex(Phone.NUMBER);
            String contactNumber = cursor.getString(columnNumber);

            int columnName = cursor.getColumnIndex(Phone.DISPLAY_NAME);
            String contactName = cursor.getString(columnName);

            int columnID = cursor.getColumnIndex(Phone._ID);
            String ID = cursor.getString(columnID);
            int contactID = Integer.parseInt(ID); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:06:02.460

我想您的问题清楚地表明您刚刚在网上某处找到了此代码。

您`String[] projection`可以在 SQL 查询中与 'SELECT...' 进行比较。目前，您只需要 Phone.NUMBER，这就是您所得到的。

我不知道常量是什么，但我想你想要类似的东西；

```
String[] projection = {Phone.NUMBER, Contact.NAME, Contact.ID}; 
```

从那时起，您可以使用普通的 get 方法从您的 Contact 对象中获取此数据。

附言。我再说一遍，常数是一个猜测。我敢肯定，如果它们不正确，您可以自己找到确切的内容，甚至 IDE 也会通过下拉菜单帮助您。

# jpa - EclipseLink 审计/历史/跟踪更改

> ID：15657253
> 
> 赞同：5
> 
> 时间：2013-03-27T11:02:17.227
> 
> 标签：jpa, eclipselink, history, audit, changelog

我试图实现一种方法来跟踪数据更改并为我的应用程序创建历史日志。因为我使用的是 EclipseLink，所以应该很容易并且可以像他们[在 EclipseLink FAQ 上写的](http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_access_what_changed_in_an_object_or_transaction.3F)那样进行更改 。第一个解决方案有效，但第二个基于事件的解决方案无效。每次引发事件时，ObjectChangeSet 都为空。

我不简单地使用 HistoryPolicy 的原因是我不想将有关登录用户（而不是 db 用户）的信息和更改的数据存储到单独的表中。我搜索了很多，但找不到任何解决此问题的方法。

这是我的实体类：

```
@Entity
@EntityListeners(HistoryEventListener.class)
@Table(name = "t_users")
    public class Users implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "GENSEQ_USERS")
@SequenceGenerator(name = "GENSEQ_USERS", sequenceName = "SEQ_USERS", allocationSize = 1, initialValue = 1)
private Integer id;
@Column(nullable = false)
private String userid;
...
} 
```

这是我的 DescriptorEventAdapter 类：

```
public class HistoryEventListener extends DescriptorEventAdapter {

@Override
public void postUpdate(DescriptorEvent event) {
    ObjectChangeSet changeSet = event.getChangeSet();
    if (changeSet != null) {
        System.out.println("ObjectChangeSet not null");
    }
    System.out.println("ObjectChangeSet null");
}

@Override
public void postMerge(DescriptorEvent event) {
    ObjectChangeSet changeSet = event.getChangeSet();
    if (changeSet != null) {
        System.out.println("ObjectChangeSet not null");
    }
    System.out.println("ObjectChangeSet null");
}
} 
```

我使用的 persistence.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
<persistence-unit name="PhoneBookPU" transaction-type="RESOURCE_LOCAL">
    <provider>
        org.eclipse.persistence.jpa.PersistenceProvider
    </provider>
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
        <property name="javax.persistence.jdbc.driver" value="oracle.jdbc.OracleDriver"/>
        <property name="javax.persistence.jdbc.url" value="jdbc:oracle:thin:@somehostname:1521:xyz"/>
        <property name="javax.persistence.jdbc.password" value="getyourown"/>
        <property name="javax.persistence.jdbc.user" value="username"/>
        <property name="javax.persistence.logging.level" value="INFO"/>
    </properties>
</persistence-unit>
</persistence> 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:16:15.560

看起来更改集仅针对合并事件设置，而不是 postUpdate。请记录错误以将更改集添加到更新前/更新后事件。

您还可以从查询或对象中获取 ChangeSet，

```
((UpdateObjectQuery)event.getQuery()).getObjectChangeSet() 
```

或者，

```
((AttributeChangeListener)((ChangeTracker)event.getObject())._persistence_getPropertyChangeListener()).getObjectChangeSet() 
```

# r - 颜色特定回归线 - 在文本文件中提取 aov、shapiro 和 fligner

> ID：15657258
> 
> 赞同：0
> 
> 时间：2013-03-27T11:02:32.430
> 
> 标签：r, graphics, ggplot2

这是我当前的代码：

```
dat = data.frame(matrix(c(rnorm(20), rep(c(1:5),10), rep(seq(1,4),5)), ncol=3))
colnames(dat)<- c('var1','var2','var3')
ggplot(dat, aes(y=var1,x=var2,colour=var3)) + 
    geom_point() + geom_smooth(method='aov',se=F) 
```

我想为每种颜色显示 aov 线。我怎样才能做到这一点 ？

此外，我想提取`summary(aov())`文本文件中显示的行。并且还提取这些假设的测试`aov()`......换句话说，我想提取`fligner.test(dat$var1~var2)`and`fligner.test(dat$var1~var3)`和`shapiro.test(residuals(aov(var1~var2*var3)))`.

有没有办法通过利用 ggplot 包来完成所有这些工作，还是我必须通过 for 循环来操作所有数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:06:17.470

要为每个设置单独的行`var3`，应将其设置为`ggplot()`函数内部的因子。

```
ggplot(dat,aes(y=var1,x=var2,colour=as.factor(var3))) + 
   geom_point() + geom_smooth(method='aov',se=F) 
```

# html - 如何将html中浏览按钮的值传递给perl程序

> ID：15657265
> 
> 赞同：0
> 
> 时间：2013-03-27T11:02:52.880
> 
> 标签：html, perl

我有一个 html 页面，我在其中使用了一个浏览按钮，该按钮允许用户浏览其系统中的文件。当我按下提交按钮时，会调用一个 perl 脚本。我想将用户选择的值传递给 perl 程序。

**html代码：**

```
<form NAME="form1" ACTION="/cgi-bin/sample.pl" METHOD="POST">
    <center>
        <input type="file" name="selectFile" />
    </center>
    <center>
        <input type="submit" value="send" name="B">
    </center>
</form> 
```

**Perl 代码：**

```
#!/usr/bin/perl

use CGI qw(:standard);

$query = new CGI;

print "Content-Typr: text/plain\n\n";

$FileName = $query->param('selectFile'); #read the parameter passed from html page 
```

谁能帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:14:49.497

[CGI 文档](https://metacpan.org/module/CGI#PROCESSING-A-FILE-UPLOAD-FIELD)中有一个如何进行文件上传的示例。你会在那里找到你需要的一切。

# shell - java.lang.IllegalArgumentException：端口超出范围：67001

> ID：15657266
> 
> 赞同：6
> 
> 时间：2013-03-27T11:02:58.210
> 
> 标签：shell, logging

我在运行脚本时遇到以下错误。该脚本正在尝试调用 Web 服务。它成功地调用了 Web 服务。最后..它也打印了成功的消息，只是在两者之间抛出了一些带有LOG UTILS的错误。请看看并建议..

```
java.lang.IllegalArgumentException: port out of range:67001 
```

```
java.lang.NullPointerException 
        at com . drivelogic.services.logging.LogConfig.isDevMode(LogConfig.java:89)
        at com.drivelogic.services.logging.DlLogger.isTraceLog(DlLogger.java:277)
        at com.drivelogic.services.logging.DlLogger.log(DlLogger.java:55)
        at com.drivelogic.common.util.LogUtils.log(LogUtils.java:114)
        at com.drivelogic.common.util.LogUtils.fine(LogUtils.java:252)
        at com.cccis.frm.reprocess.util.PublishUtil.invokeWebService(PublishUtil.java:304)
        at com.cccis.frm.reprocess.batch.SOABatchReprocessor.reprocess(SOABatchReprocessor.java:137)
        at com.cccis.frm.reprocess.batch.SOABatchReprocessor.main(SOABatchReprocessor.java:56) 
```

```
java.lang.IllegalArgumentException: port out of range:-2
        at java.net.InetSocketAddress.<init>(InetSocketAddress.java:83)
        at weblogic.socket.SocketMuxer.newSocket(SocketMuxer.java:373)
        at weblogic.socket.SocketMuxer.newClientSocket(SocketMuxer.java:383)
        at weblogic.socket.ChannelSocketFactory.createSocket(ChannelSocketFactory.java:86)
        at weblogic.socket.BaseAbstractMuxableSocket.createSocket(BaseAbstractMuxableSocket.java:133)
        at weblogic.rjvm.t3.MuxableSocketT3.newSocketWithRetry(MuxableSocketT3.java:214)
        at weblogic.rjvm.t3.MuxableSocketT3.connect(MuxableSocketT3.java:383)
        at weblogic.rjvm.t3.ConnectionFactoryT3.createConnection(ConnectionFactoryT3.java:34)
        at weblogic.rjvm.ConnectionManager.createConnection(ConnectionManager.java:1784)
        at weblogic.rjvm.ConnectionManager.findOrCreateConnection(ConnectionManager.java:1424)
        at weblogic.rjvm.ConnectionManager.bootstrap(ConnectionManager.java:443)
        at weblogic.rjvm.ConnectionManager.bootstrap(ConnectionManager.java:321)
        at weblogic.rjvm.RJVMManager.findOrCreateRemoteInternal(RJVMManager.java:254)
        at weblogic.rjvm.RJVMManager.findOrCreate(RJVMManager.java:197)
        at weblogic.rjvm.RJVMFinder.findOrCreateRemoteServer(RJVMFinder.java:238)
        at weblogic.rjvm.RJVMFinder.findOrCreateRemoteCluster(RJVMFinder.java:316)
        at weblogic.rjvm.RJVMFinder.findOrCreateInternal(RJVMFinder.java:205)
        at weblogic.rjvm.RJVMFinder.findOrCreate(RJVMFinder.java:170)
        at weblogic.rjvm.ServerURL.findOrCreateRJVM(ServerURL.java:153)
        at weblogic.jndi.WLInitialContextFactoryDelegate.getInitialContext(WLInitialContextFactoryDelegate.java:353)
        at weblogic.jndi.Environment.getContext(Environment.java:315)
        at weblogic.jndi.Environment.getContext(Environment.java:285)
        at weblogic.jndi.WLInitialContextFactory.getInitialContext(WLInitialContextFactory.java:117)
        at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:667)
        at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
        at javax.naming.InitialContext.init(InitialContext.java:223)
        at javax.naming.InitialContext.<init>(InitialContext.java:197)
        at com.drivelogic.services.logging.QueueHandler.send(QueueHandler.java:60)
        at com.drivelogic.services.logging.DlLogger.log(DlLogger.java:66)
        at com.drivelogic.common.util.LogUtils.log(LogUtils.java:114)
        at com.drivelogic.common.util.LogUtils.fine(LogUtils.java:252)
        at com.cccis.frm.reprocess.util.PublishUtil.invokeWebService(PublishUtil.java:304)
        at com.cccis.frm.reprocess.batch.SOABatchReprocessor.reprocess(SOABatchReprocessor.java:137)
        at com.cccis.frm.reprocess.batch.SOABatchReprocessor.main(SOABatchReprocessor.java:56) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T11:03:45.683

最大端口号为**65535**，这里是[已知服务端口](http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xml)的列表（该列表经常更新）。尝试使用较低的端口号。

# testing - Dart 异步测试的奇怪行为

> ID：15657267
> 
> 赞同：1
> 
> 时间：2013-03-27T11:03:00.163
> 
> 标签：testing, asynchronous, dart

为什么这不起作用？

```
var validUri = 'postgresql://user:pwd@localhost:5432/testdb';

test('Query on closed connection.', () {
  connect(validUri).then((conn) {
    conn.close();
    conn.query("select 'blah'").toList()
      .then((_) => throw new Exception('Should not be reached.'))
      .catchError(expectAsync1((err) {}));
  });
});

test('Execute on closed connection.', () {
  connect(validUri).then((conn) {
    conn.close();
    conn.execute("select 'blah'")
      .then((_) => throw new Exception('Should not be reached.'))
      .catchError(expectAsync1((err) {});
  });
}); 
```

但是，如果更改最后一个*catchError*的回调分配：

```
(...)

test('Execute on closed connection.', () {
  var cb = expectAsync1((e) {});
  connect(validUri).then((conn) {
    conn.close();
    conn.execute("select 'blah'")
      .then((_) => throw new Exception('Should not be reached.'))
      .catchError(cb);
  });
}); 
```

有用！

我很想阅读一个很好的解释，也许在 Dart 异步测试方面有一两课:-)

编辑：问题是第一个例子确实有效 - 它报告通过了！它不应该有。我假设 expectAsyncX() 必须在以后的测试中被回调。

这是测试框架的问题吗？这种类型的问题不应该被忽视。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:27:55.270

任何异步调用都应该用 expectAsyncX() 包装，告诉测试等待它的调用。在您的第一种情况下，您的第一个异步调用没有被包装，因此它没有“等待”到足以执行 catchError 中的 expectAsync1。

# javascript - 网站中的 RUM（真实用户监控）JS 代码

> ID：15657274
> 
> 赞同：4
> 
> 时间：2013-03-27T11:03:34.633
> 
> 标签：javascript, web, monitoring

我突然在我的网站上发现了一些奇怪的代码：

```
<script type="text/javascript">var NREUMQ=NREUMQ||[];NREUMQ.push(["mark","firstbyte",new Date().getTime()]);</script> 
```

但我从来没有在我的代码中实现过这个，突然它就在那里。

有什么方法可以通过某种方式入侵我的网站吗？或者什么会导致这个奇怪的代码？

更新：

我刚刚删除了所有代码并添加了一个包含以下内容的 index.php 文件：

```
<html>
<head>
</head>
<body>
test
</body>
</html> 
```

当我查看源代码时，会显示以下代码：

```
<html>
<head>
<script type="text/javascript">var NREUMQ=NREUMQ||[];NREUMQ.push(["mark","firstbyte",new Date().getTime()]);</script>
</head>
<body>
test
<script type="text/javascript">if(!NREUMQ.f){NREUMQ.f=function(){NREUMQ.push(["load",new Date().getTime()]);var e=document.createElement("script");e.type="text/javascript";e.src=(("http:"===document.location.protocol)?"http:":"https:")+"//"+"d1ros97qkrwjf5.cloudfront.net/42/eum/rum.js";document.body.appendChild(e);if(NREUMQ.a)NREUMQ.a();};NREUMQ.a=window.onload;window.onload=NREUMQ.f;};NREUMQ.push(["nrfj","beacon-3.newrelic.com","0320653fc3","2194086","YAFRYxcHXUYCBUdQWVlLZkUMSVpbBwNLF0ZfFA==",0,1,new Date().getTime(),"","","","",""]);</script>
</body>
</html> 
```

更新 2：

到目前为止我已经尝试过：

*   删除了我所有的文件，只添加了一个带有简单 html 布局的 php 文件
*   将我所有的网络空间文件复制到我的本地目录：脚本不见了！
*   在我的主机的控制面板中禁用了所有类型的服务
*   我的虚拟主机说他们不会将代码放入网络文件中，但似乎他们这样做了，因为我想不出任何其他方案可以尝试。我还跟踪了通过这家公司托管的其他网站，许多网站的源代码中也有代码！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-18T07:50:03.210

它是 New Relic 的真实用户监控功能的一部分（您或您的主机已经在您的服务器上安装了 New Relic）。

> 为 Real User Monitoring 注入的 JavaScript 在浏览器中收集计时信息，其中包含用于识别特定应用程序和后端处理的 Web 事务的详细信息，以及每个请求在应用程序中花费的时间。当页面在最终用户的浏览器中完成加载时，RUM 会将信息异步发送回 New Relic，因此不会影响页面加载时间。RUM 使用 IP 地址来解析每个请求的地理位置。

[https://newrelic.com/docs/features/how-does-real-user-monitoring-work](https://newrelic.com/docs/features/how-does-real-user-monitoring-work)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T20:29:41.323

看起来我的虚拟主机正在添加代码。他们是在我和三个人交谈后才承认的。第一个否认一切，并指责我“糟糕的代码或糟糕的脚本”。最后，一位高级经理告诉我，他们将脚本添加到我的网站是为了进行基准测试。

我真的不喜欢这样，我很确定他们不能在不让我知道的情况下这样做，所以我正在考虑采取进一步的措施。

# php - 后生成的带有双空格标记的 HTML

> ID：15657276
> 
> 赞同：1
> 
> 时间：2013-03-27T11:03:36.903
> 
> 标签：php, html, utf-8, character-encoding, codepages

我使用 notepad++ 和 utf-8 编码来编写 php 代码。我遇到了我的标题被向下移动的问题。我发现 Firebug 在 之后显示双空格`<body>`，所以如果我删除空格，标题设置到他的位置。但是当我按“Ctrl+U”查看 HTML 代码时，我看到一切正常：

```
<!DOCTYPE html>
<html>
  <head>
  </head>
<body>
  <div id="header">
       <div class="container">
      <img alt="" src="/../images/logo.png" class="active">
       </div>
  </div>
</body>
</html> 
```

如果我选择 Encode\Conver to ANSI issue dissapears，那么重要的一点。我不能使用 ANSI，因为 DB 使用 UTF8，并且记录有西里尔字符。

问题：

```
<body>

    <div id="header"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:30:48.817

使用十六进制编辑器检查文件。介于两者之间`<body>`，`<div...`必须有一些“不可见”（例如“[空白](http://en.wikipedia.org/wiki/Whitespace_character)”或“不可见”）字符。可以在[此处](http://en.wikipedia.org/wiki/Comparison_of_hex_editors)找到十六进制编辑器列表。

但是，对于本示例，最快的解决方案是简单地保存为 ANSI/ASCII，重新打开并再次保存为 UTF-8。那应该摆脱隐形字符，或者至少在重新打开时显示一些“奇怪”字符。

**编辑** 我查看了您在问题中粘贴的问题；我认为角色因复制/粘贴而丢失，因为我没有看到任何奇怪的东西： ![在此处输入图像描述](../Images/50e74e4a5e3907c7790e78455471bf20.png)

（请注意，`0D`and`0A`是回车/换行符，或“[普通（windows）换行符](http://en.wikipedia.org/wiki/Newline#Representations)”，`20`是普通空格）

* * *

[我只记得：我确实从jsFiddle](http://jsfiddle.net/)复制代码一两次看到这个问题；它的“格式化程序/语法荧光笔”似乎（或似乎）有时会添加一些不需要的字符。例如，请参阅[此问题](https://stackoverflow.com/questions/13463458/get-rid-of-character-from-jsfiddle)。

此外，[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)有时是麻烦的根源，但这并不能解释（AFAIK）为什么中间有空格`<body>`，`<div...`因为 BOM 是文件中的前几个字节。如果您使用其中包含 BOM 的多个 PHP 文件（使用`include()`/`require()`等）来构建最终输出，那么其中一个文件可能包含不需要的（？）BOM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:22:16.603

`UTF-8 without BOM`在notepad++中，使用PHP时必须严格使用。`UTF-8`不幸的是，在notepad ++中意味着BOM将被添加到每个PHP源文件中。

因为 PHP 是不经意地编码的，所以它只会将其视为要回显的文字内容。这将导致各种问题，例如`headers already sent`错误和您的文档在某些浏览器中进入怪异模式。

`UTF-8 without BOM`仅使用-encoding 比删除`UTF-8`手动创建的 BOM容易得多。

# drools - WorkingMemoryEntryPoint.getFactHandle() 效率

> ID：15657278
> 
> 赞同：0
> 
> 时间：2013-03-27T11:03:39.630
> 
> 标签：drools

在我的应用程序中，我需要非常非常频繁地调用 WorkingMemoryEntryPoint.getObject()，但我无法保留对 factHandle 的引用，所以我要做的是（简而言之）：

获取对象（getFactHandle（对象））

我不确定 getFactHandle 是如何在内部工作的，它是否会在整个工作内存中查找直到它得到 factHandle？我想它没有，但如果是的话，我将不得不保留一个缓存对象-factHandle ......（我希望流口水为我做这件事，这就是我想知道的）......

最好的问候，塞萨尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:17:29.507

WorkingMemoryEntryPoint.getObject() 内部最终调用：[SingleThreadedObjectStore.getObjectForHandle(handle)](https://github.com/droolsjbpm/drools/blob/master/drools-core/src/main/java/org/drools/core/common/SingleThreadedObjectStore.java)，它使用 Map 进行搜索：

只是出于好奇，您为什么要调用 getFactHandle() ？

希望能帮助到你。

# objective-c - 从新对象位置重复动画

> ID：15657283
> 
> 赞同：1
> 
> 时间：2013-03-27T11:03:51.037
> 
> 标签：objective-c, animation

我想简单地为 UIImageView 设置动画以在没有计时器或显示链接的情况下无限移动。所以，这就是我所做的：

```
 [UIView animateWithDuration:0
                          delay:0
                        options: UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionRepeat
                     animations:^{self.vitesseY = self.vc + self.vitesseY;
                         self.balle.imageView.center = CGPointMake(self.balle.imageView.center.x+self.vitesseX, self.balle.imageView.center.y+self.vitesseY);}
                     completion:^(BOOL finished){NSLog(@"fini");}]; 
```

问题是我的 imageView 回到了初始位置，但我想从新位置重复动画。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:07:38.860

做你在这里做的最好的方法是使用计时器。

但是如果你真的因为一些奇怪的原因想要这样做，你需要在调用完成块时添加一个新的动画调用（但这不必要地令人费解并且可能对性能不利）。原因是 UIView 将评估您的动画块一次，然后一遍又一遍地重复相同的动画。

# jenkins - Jenkins 模板和继承

> ID：15657286
> 
> 赞同：2
> 
> 时间：2013-03-27T11:04:06.950
> 
> 标签：jenkins, cloudbees

我有 10 种类型的工作，我想把它们变成模板。例如，这些都共享相同的 SCM 存储库配置。

我必须将 SCM 设置复制到每个模板中还是有其他方法可以做到这一点？继承和超类型看起来很有趣，但似乎没有这样做，或者我还没有弄清楚如何正确使用。辅助模型可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:51:57.030

我认为目前您需要将 SCM 设置复制到每个模板中。有一个为 SCM 创建模板类型的计划，这将使这更容易，因为您可以定义一个 SCM 模板，然后从每个作业模板中“调用”它，或者从非模板化作业中“调用”它。

辅助模型和继承并非旨在使模板本身（即它们的转换器）更简单；它们的存在使得为模板属性提供复杂的配置 UI 成为可能，其中简单的对象模型是表示配置的最自然的方式（而不是解析 DSL）。

# knockout.js - 如何在 ko 验证中将自定义消息添加到模式验证

> ID：15657290
> 
> 赞同：8
> 
> 时间：2013-03-27T11:04:22.167
> 
> 标签：knockout.js, knockout-validation

假设我有：

```
self.UserName = ko.observable("").extend({ required: true }).extend({ pattern: '[\S]' }); 
```

我正在尝试做类似的事情（我尝试了一些变化）：

```
self.UserName = ko.observable("").extend({ required: true }).extend({ pattern: '[\S]', message : 'cannot contain spaces' }); 
```

但没有运气。

我可以看到[验证绑定](https://github.com/ericmbarnard/Knockout-Validation/wiki/Validation-Bindings)提到验证消息，但它似乎是针对所有验证的单个消息。

而且[自定义验证规则](https://github.com/ericmbarnard/Knockout-Validation/wiki/Custom-Validation-Rules)似乎已经过时了，因为我想要的只是一种模式，但带有不同的信息。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T11:23:56.340

你的语法是错误的。您需要将一个对象分配给`pattern`包含`message`和`params`

所以正确的用法是：

```
self.UserName = ko.observable("")
    .extend({ required: true })
    .extend({ pattern: {
         message: 'cannot contain spaces',
         params: '[\S]'
}}); 
```

另请参阅[入门](https://github.com/ericmbarnard/Knockout-Validation)示例。

# c++ - libev 自定义事件

> ID：15657291
> 
> 赞同：3
> 
> 时间：2013-03-27T11:04:23.930
> 
> 标签：c++, asynchronous, libev

我正在尝试使用 libev 进行基于事件的编程。但是 libev 提供了一些事件，例如`EV_READ, EV_WRITE, EV_TIMER ..`

那么，是否有可能拥有我自己的自定义事件。

例如，我有来自套接字的连续消息流，而我只对该消息流中的一种消息感兴趣。所以，它基本上像

```
while(true)
{
     Msg msg = getMessage();
     if(msg != null && msg.id == ourId)
         return msg;
} 
```

因此，我想注册此类事件（仅`if`满足该条件。）。它是一个自定义事件，对吗？如何将此事件指定给 libev。

我的意思是在 libev 我们这样指定..

```
ev_io_init (&stdin_watcher, stdin_cb, /*STDIN_FILENO*/ 0, EV_READ);
ev_io_start (loop, &stdin_watcher); 
```

我看不到任何可以检查我们自己事件的东西。可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T12:23:23.417

不幸的是，你不能有一个自定义事件，因为 libev 不会处理你的数据，只是检查是否有一些，或者你是否可以发送一些。

所以基本上，你必须：

1.  创建一个观察者`EV_READ`
2.  当观察者触发你的函数时，检查是否有你想要的消息：
    *   如果是，将其推送到您的消息队列
    *   如果没有，请跳过它
3.  运行`ev_loop`，理想情况下使用`EV_ONESHOT`超时观察器。之后立即调用您的消息处理程序，它将检查消息队列并处理队列中的所有消息

# visual-studio - 我该怎么做 - 类似文本框的占位符

> ID：15657293
> 
> 赞同：2
> 
> 时间：2013-03-27T11:04:37.167
> 
> 标签：visual-studio, xaml, blend

我正在尝试为文本框设置控件模板并将数据绑定到它。问题是数据没有通过。我想因为我有一个文本框标签，`<ControlTemplate>`所以我需要以某种方式占位符。

```
 <Style x:Key="TextBoxStyle" TargetType="TextBox">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="TextBox">
                <Grid x:Name="grid" Height="55" Background="White">
                    <Rectangle Stroke="#FFD9D9D9" StrokeThickness="6"/>
                    <ContentPresenter x:Name="contentPresenterText" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Black"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
  </Style> 
```

所以我通过添加`<ContentPresenter>`标签进行了实验，但这会引发错误。

这是文本框代码：

```
<TextBox x:Name="NameTextField" Grid.ColumnSpan="6" Grid.Column="1" TextWrapping="Wrap" Text="{Binding Name, Mode=TwoWay}" Margin="0" Style="{StaticResource TextBoxStyle}" /> 
```

谁能帮我理解如何做到这一点。可以应用于数据绑定仍然有效的所有文本字段的通用模板？

更新：这是崩溃时指向的代码：

```
#if DEBUG && !DISABLE_XAML_GENERATED_BREAK_ON_UNHANDLED_EXCEPTION
        UnhandledException += (sender, e) =>
        {
            if (global::System.Diagnostics.Debugger.IsAttached) global::System.Diagnostics.Debugger.Break(); //highlights this
        };
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:48:31.980

首先，将 ContentPresenter 放在 TextBox 中并不是一个好主意。

如果您使用控制模板，您应该使用模板绑定来绑定真实的组件属性。下面的代码显示了如何使用它，但据我记得 TextBox 没有像“Content”这样的属性，因此您可以传输 TextBox 类的 Text、Padding 等的值，如图所示。

```
 <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Grid x:Name="RootElement">
                        <!--TextBlock Text="{TemplateBinding Text}"/-->
                        <ContentPresenter Content="{TemplateBinding Padding}"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter> 
```

输出是 2,2,2,2 //ContentPresenter 默认显示在 TextBlock 中。

除此之外，您还可以覆盖默认内容，例如 TextBox 验证。如果您想扩展我建议覆盖默认样式的内容，您可以通过右键单击混合中的文本框并编辑模板-> 编辑复制它通过文本框状态为您生成当前模板，

默认模板是这个，

```
 <Style x:Key="TextBoxStyle1" TargetType="TextBox">
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Background" Value="#FFFFFFFF"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="Padding" Value="2"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Grid x:Name="RootElement">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ColorAnimation Duration="0" To="#FF99C1E2" Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="MouseOverBorder"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="DisabledVisualElement"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="ReadOnly">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ReadOnlyVisualElement"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualElement"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualElement"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="ValidationErrorElement">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="InvalidFocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="ValidationErrorElement">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="IsOpen" Storyboard.TargetName="validationTooltip">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <System:Boolean>True</System:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="Border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="1" Opacity="1">
                            <Grid>
                                <Border x:Name="ReadOnlyVisualElement" Background="#5EC9C9C9" Opacity="0"/>
                                <Border x:Name="MouseOverBorder" BorderBrush="Transparent" BorderThickness="1">
                                    <ScrollViewer x:Name="ContentElement" BorderThickness="0" IsTabStop="False" Padding="{TemplateBinding Padding}"/>
                                </Border>
                            </Grid>
                        </Border>
                        <Border x:Name="DisabledVisualElement" BorderBrush="#A5F7F7F7" BorderThickness="{TemplateBinding BorderThickness}" Background="#A5F7F7F7" IsHitTestVisible="False" Opacity="0"/>
                        <Border x:Name="FocusVisualElement" BorderBrush="#FF6DBDD1" BorderThickness="{TemplateBinding BorderThickness}" IsHitTestVisible="False" Margin="1" Opacity="0"/>
                        <Border x:Name="ValidationErrorElement" BorderBrush="#FFDB000C" BorderThickness="1" CornerRadius="1" Visibility="Collapsed">
                            <ToolTipService.ToolTip>
                                <ToolTip x:Name="validationTooltip" DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}" Placement="Right" PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}" Template="{StaticResource ValidationToolTipTemplate}">
                                    <ToolTip.Triggers>
                                        <EventTrigger RoutedEvent="Canvas.Loaded">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="IsHitTestVisible" Storyboard.TargetName="validationTooltip">
                                                        <DiscreteObjectKeyFrame KeyTime="0">
                                                            <DiscreteObjectKeyFrame.Value>
                                                                <System:Boolean>true</System:Boolean>
                                                            </DiscreteObjectKeyFrame.Value>
                                                        </DiscreteObjectKeyFrame>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </ToolTip.Triggers>
                                </ToolTip>
                            </ToolTipService.ToolTip>
                            <Grid Background="Transparent" HorizontalAlignment="Right" Height="12" Margin="1,-4,-4,0" VerticalAlignment="Top" Width="12">
                                <Path Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" Fill="#FFDC000C" Margin="1,3,0,0"/>
                                <Path Data="M 0,0 L2,0 L 8,6 L8,8" Fill="#ffffff" Margin="1,3,0,0"/>
                            </Grid>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

**添加取决于您的评论**：

```
 <ControlTemplate x:Key="TextBoxControlTemplate1" TargetType="TextBox">
        <Grid x:Name="grid"  Background="White">
                <Rectangle Stroke="#FFD9D9D9" StrokeThickness="26"/>
                <ContentPresenter x:Name="contentPresenterText" HorizontalAlignment="Center" VerticalAlignment="Center" >
                    <TextBox Text="{TemplateBinding Text}"/>
                </ContentPresenter>
        </Grid>
    </ControlTemplate> 
```

# postgresql - Postgresql“缺少从句错误”

> ID：15657300
> 
> 赞同：3
> 
> 时间：2013-03-27T11:04:57.970
> 
> 标签：postgresql

我有两个版本的 PostgreSQL（8.0.4 / 8.1.4），并注意到在 8.1.4 中，我收到以下语句的“Missing From-Clause 错误”：

```
DELETE FROM MDFUSERGROUPREL_DELETED 
WHERE userid = MDFUSERGROUPREL.userid 
AND usergroupid = MDFUSERGROUPREL.usergroupid 
AND userid=? 
```

由于您不能在 8.0.4 中使用 SELECT 语句执行 DELETE，因此我使用的是直接表引用，但这似乎在 8.1.4 中导致了问题

是否有人能够确认这种行为，并在可能的情况下提供解决方法？

我知道我使用的版本是旧的并且不支持这是一个环境限制，所以不，我不能只是升级它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:17:49.983

您依赖于旧版本 PostgreSQL 的行为，`FROM`当引用未在`FROM`. 您将能够在`EXPLAIN`您的查询中看到这一点。

此错误功能已从 PostgreSQL 中删除。它在拼写错误上造成了意外的交叉产品，通常是一个非常糟糕的主意。您可以通过在问题查询之前使用语句将[`add_missing_from`](http://www.postgresql.org/docs/8.4/static/runtime-config-compatible.html)配置参数设置为 true或在. 这种向后兼容的解决方法已在 9.0 中删除，因此您无法使用它来让您的应用程序与 9.0 或更高版本一起工作。我特意链接到 8.4 版本的文档，因为该参数已从更高版本中删除。`SET``postgresql.conf`

请参阅[此邮件列表讨论](http://www.postgresql.org/message-id/200304291436.43249.josh@agliodbs.com)。

此查询中问题的原因是您正在对`MDFUSERGROUPREL`. 您应该在语句的`USING`子句中明确命名此表`DELETE`。

这是一个演示问题和解决方法的演示：[http](http://sqlfiddle.com/#!11/6c4b3/4) ://sqlfiddle.com/#!11/6c4b3/4 ...这是一个演示如何正确地以两种不同的方式进行操作： http: [//sqlfiddle.com/# !11/6c4b3/7](http://sqlfiddle.com/#!11/6c4b3/7)。第一个是一个简单的修复，它只是将缺少的 from 子句添加到查询并修复生成的列名冲突：

```
DELETE FROM MDFUSERGROUPREL_DELETED
USING MDFUSERGROUPREL
WHERE MDFUSERGROUPREL_DELETED.userid = MDFUSERGROUPREL.userid 
AND MDFUSERGROUPREL_DELETED.usergroupid = MDFUSERGROUPREL.usergroupid 
AND MDFUSERGROUPREL_DELETED.userid=1; 
```

您会发现后两个示例至少在现代版本的 PostgreSQL 上导致相同的查询计划，因此无论您使用`EXISTS`还是连接都没有区别。

我在不使用表别名方面遵循了您查询的原始样式，但我强烈建议您使用别名以提高可读性。请参阅@wildplasser 的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:21:25.060

不了解您的确切意图，在我看来仍然`exists`可以解决问题：

```
DELETE FROM MDFUSERGROUPREL_DELETED del
WHERE EXISTS (SELECT *
    FROM MDFUSERGROUPRE ex
    WHERE ex.userid = del.userid 
    AND ex.usergroupid = del.usergroupid
    ) 
AND del.userid=?
 ; 
```

# vb.net - 从经典 ASP 中的 VB COM 对象返回一个数组

> ID：15657301
> 
> 赞同：1
> 
> 时间：2013-03-27T11:04:58.017
> 
> 标签：vb.net, com, asp-classic

我对 VB 很陌生，所以这可能是一个简单的问题，但我已经挣扎了几天了。我已经创建了一个在我的 ASP 页面中使用的 VB COM 对象，并且我已经弄清楚了如何从一个函数返回单个值，但我也希望能够返回一个值列表，例如订单行。

我有一个示例，我一直在查看在 ASP 页面中以下列方式检索值的位置。

```
 Set OrderData = Server.CreateObject("OrderObj.OrderObject")        

    Set Orders = OrderData.LstHeaders

    'List all order rows for a specific Customer
    rows = Orders.LstRows(CustomerNo)

  For n = 1 to rows

    'Write a record for each row
    Response.write Orders.Lines.line(n).item("Item")
    Response.write Orders.Lines.line(n).item("Qty")

  Next 
```

但是，我没有来自使用的 COM 对象的代码，我只是想弄清楚代码如何实现相同的功能？我试图通过 myServer.array(i) 创建一个公共数组来访问 COM 对象，但这似乎不起作用。

我不希望任何人为我编写整个代码，我只需要一些关于 COM 对象代码的一般结构应该如何能够像上面那样调用它的提示。

对此的任何想法或解决方案将不胜感激。我已经订购了一份 VB.NET 参考手册，但它要再过 2 周才能到货，而且在我解决这个问题之前我无法入睡。

# php - PHP preg_split 正则表达式不与点分割

> ID：15657303
> 
> 赞同：3
> 
> 时间：2013-03-27T11:05:05.560
> 
> 标签：php, regex, preg-split

我正在使用以下正则表达式将字符串拆分为数组。一切都很好，但由于某种原因，它没有与`\.(space)`. 我需要如何更改它才能使其正常工作？

```
 $sentences  = preg_split(" / (\. |, and|, or|, but|, nor|, so|, for|, yet|after|although|as|as if|as long as|because|before|even if|even though|if|once|provided|since|so that|that|though|till|unless|until|what|when|whenever|wherever|whether|while) /",$sentences); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T11:08:45.873

你的空格是这里的问题。正则表达式会考虑到这一点，因此将其更改为：

```
$sentences = preg_split("/(\. |, and|, or|, but|, nor|, so|, for|, yet|after|although|as|as if|as long as|because|before|even if|even though|if|once|provided|since|so that|that|though|till|unless|until|what|when|whenever|wherever|whether|while)/",$sentences); 
```

注意第一个之后`/`和最后一个空格之前的空格是如何`/`被删除的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:07:49.027

由于您使用的是双引号，因此您必须对点进行双重转义，所以`\\.`不仅仅是`\.`

# c - 在c中解析键值

> ID：15657306
> 
> 赞同：1
> 
> 时间：2013-03-27T11:05:21.217
> 
> 标签：c, parsing

如何解析 C 中的键值字符串并将其分配给适当的变量？

即我们将把这个字符串传递给一个程序：

```
x = 193 
```

它会给appr赋值。变量，所以

```
printf("%i", x); 
```

生产

```
193 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T11:33:04.643

给定

```
char keyname[32];
int val; 
```

我们要存储整数赋值的键名和值的名称，以及`const char * str = "x = 193"`可以使用`sscanf()`C 库函数为我们进行解析的示例格式的字符串：

```
sscanf(str, "%32[^=]=%d", keyname, &val) 
```

请注意，例如`str = " x = 193"`将存储字符串`" x "`到， `keyname`因此如果您想要灵活的语法来处理分配周围和变量名之前的空格，您仍然需要摆脱额外的空格。

将返回成功转换的次数，因此您应该在我们的案例中`sscanf()`测试它是否返回。`2`

一旦你将变量名称及其整数值存储在`keyname`and中`val`，你就可以像上面的 @unwind 建议那样查看你应该分配`val`给哪个变量，使用`strcmp`. 如果你有很多固定名称的变量，你可以有一个表并使用一个查找函数来使它比一个不可维护且容易出错的长长的`if`语句列表更漂亮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:06:27.550

您不能在运行时神奇地引入变量。当 C 程序运行时，变量的名称早已不复存在，编译器需要这些信息来构建代码，但 CPU 不需要它来运行代码。

您将不得不`strcmp()`反对已知的变量名称，并相应地分配。为了优化这一点（对于许多名称值），您当然可以使用[哈希表](http://en.wikipedia.org/wiki/Hash_table)之类的东西来存储名称对和保存值的整数。

# mysql - SELECT column_name 中的 MySQL Like 语句

> ID：15657317
> 
> 赞同：14
> 
> 时间：2013-03-27T11:05:55.647
> 
> 标签：mysql, sql, database

我正在尝试从特定表中选择列名，其中表名类似于“98673”

所以我正在使用这个：

```
SELECT 
    column_name
FROM 
    information_schema.columns
WHERE 
    table_name='lime_survey_98673'
    AND column_name LIKE '98673' 
```

但是，这不会产生任何数据。虽然我的列名中确实有“98673Blah”。

我知道我一定做错了什么，但是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T11:07:33.570

对于 LIKE，您必须添加通配符 %，因此：

```
SELECT 
    column_name
FROM 
    information_schema.columns
WHERE 
    table_name='lime_survey_98673'
    AND column_name LIKE '98673%' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T11:06:56.347

利用`%`

```
SELECT column_name
FROM information_schema.columns
WHERE table_name='lime_survey_98673'
AND column_name LIKE '%98673%' 
```

`%`表示通配符并返回任何`column_name`包含`98673`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T11:08:14.027

除非`AND column_name LIKE '98673'`你真的需要它或者：

```
SELECT column_name
FROM information_schema.columns
WHERE table_name LIKE '%lime_survey_98673%'
-- AND column_name LIKE '%98673%'  // only if needed 
```

有关更多信息，请查看以下文档：

*   [LIKE 运算符](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

*   [STRCMP() 函数](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#function_strcmp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T11:07:08.743

您需要添加`%`

```
SELECT 
    column_name
FROM 
    information_schema.columns
WHERE 
    table_name='lime_survey_98673'
    AND column_name LIKE '%98673%' 
```

这意味着`column_name`包含`98673`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-16T09:30:39.437

**也可以这样做：**

```
show columns from lime_survey_98673 like '%98673%'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-03T07:52:58.980

我认为您还需要添加带有表名的通配符。

```
SELECT 
    column_name,
    table_name
FROM 
    information_schema.columns
WHERE
    schema_name = 'db_name' 
    AND table_name='%98673%'
    AND column_name LIKE '%98673%' 
```

通过这种方式，您可以获得列名列出所有表，并且列名包含来自特定数据库或模式的“98673”等文本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-03T11:16:00.707

使用这个查询

```
SHOW COLUMNS FROM `table_name` LIKE 'coloums_name'; 
```

# c# - 预填充表单时避免触发验证

> ID：15657320
> 
> 赞同：3
> 
> 时间：2013-03-27T11:06:03.550
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我创建了一个向用户显示的注册表单，其中预先填充了一些字段。那部分工作正常。

但是，我使用两个 Register 方法进行设置的方式是在首次显示页面时触发表单验证，而不是仅在提交表单时触发。

我需要一些关于如何防止这种情况的指导。谢谢。

## 控制器

```
[HttpGet]
[AllowAnonymous]
public ActionResult Register(RegisterModel model, int? userID)
{
    if (userID != null && userID > 0)
    {
        int id = userID.Value;
        ExternalUser newUser = RepositoryHelper.GetExternalUserRepository().GetById(id);

        model.UserFirstName = newUser.NameFirst;
        model.UserLastName = newUser.NameLast;
    }
    return View(model);
} 
```

.

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
        // Attempt to register the user
        try
        {
            IUnitOfWork unit = new EFUnitOfWork();
            var rep = new PersonRepository {UnitOfWork = unit};

            var entity = new Person
                {
                    NameTitle = model.NameTitle,
                    NameFirst = model.UserFirstName,
                    NameLast = model.UserLastName,
                    NameSalutation = model.NameSalutation,
                    DateOfBirth = model.DateOfBirth,
                };

            rep.Add(entity);
            unit.Commit();

            string confirmationToken = WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { entity.Id, IsApproved = model.IsApproved =false }, true);
            WebSecurity.Login(model.UserName, model.Password);

            return RedirectToAction("RegisterStepTwo", "Account");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

## 看法

```
@model Models.RegisterModel

<div class="content">
    <hgroup class="title">
        <h1>@ViewBag.Title.</h1>
    </hgroup>

    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary()

        <fieldset>
            <legend>Registration Form</legend>
            <div id="container">
                <div class="firstContentColumn">
                    <section>
                        <ol>
                            <li>
                                @Html.LabelFor(m => m.UserFirstName)
                                @Html.TextBoxFor(m => m.UserFirstName)
                                <p>@Html.ValidationMessageFor(m => m.UserFirstName)</p>
                            </li>
                            <li>
                                @Html.LabelFor(m => m.UserLastName)
                                @Html.TextBoxFor(m => m.UserLastName)
                                <p>@Html.ValidationMessageFor(m => m.UserLastName)</p>
                            </li>
                        </ol>
                    </section>
                </div>

                        <input type="submit" value="Register" />
                    </section>
                </div>

            </div>
        </fieldset>  
    }
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/themes/base/css")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:20:49.017

我被告知 using`ModelState.Clear`会阻止初始验证，而且它似乎运行良好。

```
[HttpGet]
[AllowAnonymous]
public ActionResult Register(RegisterModel model, int? userID)
{
ModelState.Clear();

    if (userID != null && userID > 0)
    {
        int id = userID.Value;
        ExternalUser newUser = RepositoryHelper.GetExternalUserRepository().GetById(id);

        model.UserFirstName = newUser.NameFirst;
        model.UserLastName = newUser.NameLast;
    }
    return View(model);
} 
```

# wso2 - 为 WSO2 ESB 启用 TCP 传输

> ID：15657324
> 
> 赞同：1
> 
> 时间：2013-03-27T11:06:16.220
> 
> 标签：wso2, wso2esb

我正在试验 WSO2 ESB 支持的不同传输。我想为 WSO2 ESB 启用 TCP 传输。我已经下载`axis2-transport-tcp-1.0.0.jar`并放入`ESB_HOME/repository/components/lib`. 我设法通过添加启用传输发件人

```
<transportSender name="tcp" class="org.apache.axis2.transport.tcp.TCPTransportSender"/> 
```

到`axis2.xml`配置文件。为了启用传输接收器，我添加了类似的行

```
<transportReceiver name="tcp" class="org.apache.axis2.transport.tcp.TCPServer"/> 
```

但是，当我重新启动 WSO2 ESB 时，这无法初始化传输接收器。相反，我得到一个`InstantiationError`：

```
org.apache.axis2.AxisFault: Exception occured while loading the Axis configuration from /usr/local/wso2esb/repository/conf/axis2/axis2.xml
    at org.wso2.carbon.core.CarbonAxisConfigurator.getAxisConfiguration(CarbonAxisConfigurator.java:190)
    at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:64)
    at org.wso2.carbon.core.CarbonConfigurationContextFactory.createNewConfigurationContext(CarbonConfigurationContextFactory.java:65)
    at org.wso2.carbon.core.init.CarbonServerManager.initializeCarbon(CarbonServerManager.java:398)
    at org.wso2.carbon.core.init.CarbonServerManager.removePendingItem(CarbonServerManager.java:290)
    at org.wso2.carbon.core.init.PreAxis2ConfigItemListener.bundleChanged(PreAxis2ConfigItemListener.java:118)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:847)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
Caused by: org.apache.axis2.deployment.DeploymentException: org.apache.axis2.transport.tcp.TCPServer
    at org.apache.axis2.deployment.AxisConfigBuilder.processTransportReceivers(AxisConfigBuilder.java:643)
    at org.apache.axis2.deployment.AxisConfigBuilder.populateConfig(AxisConfigBuilder.java:130)
    at org.wso2.carbon.core.CarbonAxisConfigurator.populateAxisConfiguration(CarbonAxisConfigurator.java:308)
    at org.wso2.carbon.core.CarbonAxisConfigurator.getAxisConfiguration(CarbonAxisConfigurator.java:188)
... 8 more
Caused by: java.lang.InstantiationException: org.apache.axis2.transport.tcp.TCPServer
    at java.lang.Class.newInstance0(Class.java:340)
    at java.lang.Class.newInstance(Class.java:308)
    at org.apache.axis2.deployment.AxisConfigBuilder.processTransportReceivers(AxisConfigBuilder.java:627)
    ... 11 more 
```

我试过提供端口号参数，`axis2.xml`但没有任何改变。

我试图追踪错误。由于没有无参数构造函数，似乎无法实例化类对象。但是我使用相同的 jar 文件运行了以下示例，没有任何错误：

```
String className = "org.apache.axis2.transport.tcp.TCPServer";
Class receiverClass;

receiverClass = Loader.loadClass(className);

TransportListener receiver = (TransportListener) receiverClass.newInstance(); 
```

我想这是一个集成问题，但我想不出任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:07:25.807

要启用 TCP 传输，您不必添加“axis2-transport-tcp-1.0.0.jar”，它的必需库随 WSO2 ESB 一起提供。

您所要做的就是转到axis2.xml

```
ESB_HOME/repository/conf/axis2/axis2.xml 
```

并在此处为 Transport sender 和 Transport Reciver 添加以下块，您可以通过添加来添加 tcp 端口

```
<parameter name="transport.tcp.port">6060</parameter> 
```

如下所示。对于运输接收器

```
<!-- Enable TCP message -->  
<transportReceiver name="tcp" class="org.apache.axis2.transport.tcp.TCPTransportListener">
    <parameter name="transport.tcp.port">6060</parameter>
</transportReceiver> 
```

添加传输发件人

```
<transportSender name="tcp" class="org.apache.axis2.transport.tcp.TCPTransportSender"/> 
```

谢谢你，达沙那。

# jsf - Primefaces Accordion 和 TabView 打开后的问题

> ID：15657330
> 
> 赞同：1
> 
> 时间：2013-03-27T11:06:30.673
> 
> 标签：jsf, jakarta-ee, user-interface, primefaces

我对 Primefaces Accordion 和 TabView 有疑问。当我将带有 2 个或更多选项卡的 TabView 放入 Accordion 面板并第一次打开我的页面时，所有选项卡都会同时显示。然后，当我通过单击其他标题更改选项卡时，一切都恢复正常。

我的结构是：

```
<p:accordionPanel>
  <p:tab>
   <p:tabView>
     <p:tab id="tab1">
       Content 1 here
     </p:tab>
     <p:tab id="tab2">
       Content 2 here etc.
     </p:tab>
   </p:tabView>
  </p:tab>
<p:accordionPanel> 
```

我尝试使用 activeIndex="0"，但这无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-10T13:19:53.857

您可以`activeIndex`像这样使用 JSF Accordion 的属性：

```
<p:accordion id="accordionView" activeIndex="#{myBean.tabIndex}"> 
```

并放入你的backing bean a`@PostConstructor`进行搜索

```
 public static final String INDEX_PARAM = "index_get_param";

  @Inject
  private transient HttpServletRequest httpReq = null;
  private int tabIndex = 0;
  @PostConstruct
  public void init()
  {

    if (httpReq != null)
    {
      String indexParam = httpReq.getParameter(INDEX_PARAM);
      if (indexParam != null)
      {
        searchTypeParameter = searchTypeParameter.toUpperCase();
        if (indexParam.equals("FIRST")
          tabIndex = 0;
        if (indexParam.equals("SECOND")
          tabIndex = 1;

      }
    }
  }

  public int getTabIndex()
  {
    return tabIndex;
  } 
```

它也适用于`p:tabView`

# javascript - 使用渐变获取颜色栏中特定位置的颜色值

> ID：15657336
> 
> 赞同：7
> 
> 时间：2013-03-27T11:06:55.867
> 
> 标签：javascript, css, canvas, colors, linear-gradients

我生成了一个带有 CSS3 样式（[小提琴](http://jsfiddle.net/eDEWk/)）的渐变色条，现在想要该色条中特定位置的颜色值（通过 x 和 y 坐标）。据我所知，没有直接的方法可以做到这一点。

我看到两个选项：

1.  在 JavaScript 中实现梯度算法并从头计算值。是否有一个确切的定义该算法如何适用于多种颜色？每个浏览器中的渐变看起来都一样吗？

2.  使用`canvas`and`createLinearGradient`方法绘制渐变，直接访问画布获取颜色值。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T20:42:04.237

我选择实现您的第一个解决方案（使用 JavaScript 计算渐变）。这意味着您不需要依赖对`canvas`元素的支持，这可能很重要，具体取决于您的浏览器支持。

使用这些`canvas`方法也会很酷，也*更容易*。您可以从 CSS 中渲染颜色停止，然后使用`getImageData()`它来确定指针所在的颜色。

您可以使用正则表达式提取 CSS 颜色，并将任何*人类*颜色映射到 RGB...

```
var background = window.getComputedStyle(element).getPropertyValue("background");

var colorStops = [];
var matchColorStops = /,\s*(\w+)\s+(\d+)%/g;
var match;

var humanToHex = {
    "red": [255, 0, 0],
    "green": [0, 128, 0],
    "blue": [0, 0, 255]
};

while (match = matchColorStops.exec(background)) {
    if (humanToHex[match[1]]) {
        match[1] = humanToHex[match[1]];
    }
    colorStops.push({
        percentage: match[2],
        color: match[1]
    });
} 
```

您可以使用这个小的 JavaScript 函数来插入两种颜色（如果它们被分离成它们的 RGB 值）。

```
var getStepColor = function(colorA, colorB, value) {
    return colorA.map(function(color, i) {
        return (color + value * (colorB[i] - color)) & 255;
    });
}; 
```

您可以将其结合起来以获取一些可以让您执行此操作的代码...

```
var getStepColor = function (colorA, colorB, value) {
    return colorA.map(function (color, i) {
        return (color + value * (colorB[i] - color)) & 255;
    });
};

var gradient = document.querySelector("#gradient");
var preview = document.querySelector("#preview");

var background = window.getComputedStyle(gradient).getPropertyValue("background");

var colorStops = [];
var matchColorStops = /,\s*(\w+)\s+(\d+)%/g;
var match;

var humanToHex = {
    "red": [255, 0, 0],
    "green": [0, 128, 0],
    "blue": [0, 0, 255]
};

while (match = matchColorStops.exec(background)) {
    // If colour is *human-readable*, then
    // substitute it for a RGB value.
    if (humanToHex[match[1]]) {
        match[1] = humanToHex[match[1]];
    }
    colorStops.push({
        percentage: match[2],
        color: match[1]
    });
}

gradient.addEventListener("mousemove", function (event) {

    var x = event.pageX - gradient.offsetTop;
    var y = event.pageY - gradient.offsetLeft;
    var percentage = (x / this.offsetWidth) * 100;

    var i;
    for (i = 0; i < colorStops.length; i++) {
        if (colorStops[i].percentage > percentage) {
            break;
        };
    }

    var lowerIndex = i == 1 ? 0 : i - 1;
    var upperIndex = lowerIndex + 1;
    var value = x / (gradient.offsetWidth / (colorStops.length - 1)) % 1;

    color = getStepColor(colorStops[lowerIndex].color, colorStops[upperIndex].color, value);

    preview.style.backgroundColor = "rgb(" + color.join() + ")";
    preview.textContent = preview.style.backgroundColor;

}); 
```

[js小提琴](http://jsfiddle.net/aYD3T/)。

这只是一种快速的破解方法，可能有一种更好的万无一失的方法来提取颜色，并找出指针相对于哪个渐变段的位置。

# jira - [JIRA]如何知道自定义字段的创建时间

> ID：15657344
> 
> 赞同：0
> 
> 时间：2013-03-27T11:07:23.210
> 
> 标签：jira

有没有办法知道某些 JIRA 自定义字段的创建时间？甚至是哪个帐户创建了它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:33:50.517

使用 JIRA Auditor 插件来跟踪对添加字段的页面的访问。 [https://marketplace.atlassian.com/plugins/com.plugenta.jiraauditor](https://marketplace.atlassian.com/plugins/com.plugenta.jiraauditor)

# c# - 使用 foreach 循环遍历 WPF DataGrid

> ID：15657348
> 
> 赞同：6
> 
> 时间：2013-03-27T11:07:33.227
> 
> 标签：c#, wpf, datagrid, type-conversion

所有，我正在尝试`DataGrid`使用 for each 循环遍历 WPF 以更改错误单元格的背景颜色。我检查了很多问题，但我还没有找到足够的答案。到目前为止我所拥有的是

```
public void RunChecks()
{
    const int baseColumnCount = 3;
    foreach (DataRowView rv in dataGrid.Items)
    {
        for (int i = baseColumnCount; i < dataGrid.Columns.Count; i++)
        {
            if (!CheckForBalancedParentheses(rv.Row[i].ToString()))
            {
                Color color = (Color)ColorConverter.ConvertFromString("#FF0000");
                row.Background = new SolidColorBrush(color); // Problem!
            }
        }
    }
} 
```

问题是，为了更改`Background`我的行的颜色，`DataGrid`我需要使用`DataGridRow`与`DataRowView` `rv`.

**如何`DataGridRow`从对象`rv`( `DataRowView`) 中获取对 的引用？**

谢谢你的时间。

*编辑。根据下面的建议，我现在有以下样式，它适用于鼠标悬停事件并设置相关单元格的前后字体。但是，对于如何在上面的代码中在运行时将背景色应用于单元格，我真的很迷茫。XML 样式是*

```
<Window.Resources>
    <Style TargetType="{x:Type DataGridRow}">
        <Style.Triggers>
            <Trigger Property="IsMouseOver"
                     Value="True">
                <Setter Property="Background" Value="Red" />
                <Setter Property="FontWeight" Value="ExtraBold" />
            </Trigger>
        </Style.Triggers>
    </Style>
</Window.Resources> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T11:12:22.840

使用 WPF 时，请**避免始终**直接访问 UI 工件。

在您的 ModelView 中创建属性 Color，并将其绑定到 DataGrid 视图的单行模板的背景颜色。

因此，为了更改颜色，您将循环抛出 ModelView 集合并设置/读取绑定到每一行的每个对象的 Color 属性。通过更改它，如果绑定设置正确，您将影响行 UI 颜色外观。

对于具体示例，您可以查看：

[如何将数据网格行的背景绑定到特定颜色？](https://stackoverflow.com/questions/7339509/how-do-i-bind-the-background-of-a-data-grid-row-to-specific-color)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:12:23.597

您可以使用`ItemContainerGenerator`来获取数据的可视化表示，即`DataGridRow`-

```
DataGridRow row = (DataGridRow)dataGrid.ItemContainerGenerator
                                       .ContainerFromItem(rv); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T10:58:08.917

“Killercam”的答案对我有用，但我需要补充：

`myDataGrid.UpdateLayout();`

在使用 GetCell 方法之前，我确定我没有得到空引用。

让整个 Helper 类看看[DataGridHelper](https://code.google.com/p/artur02/source/browse/trunk/DataGridExtensions/DataGridHelper.cs)

在经历了所有的痛苦之后，我尝试了整个代码，我遇到了另一个问题，即正确颜色的单元格在滚动过程中发生了变化，解决方案是启用虚拟化并将其模式设置为标准。

```
VirtualizingStackPanel.IsVirtualizing="True"
VirtualizingStackPanel.VirtualizationMode="Standard" 
```

所以，希望这将帮助任何需要遍历数据网格单元的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T14:20:15.637

经过大量阅读，我找到了一种方法来做我想做的事 - 根据某些条件在运行时为单元格着色。这是我用来上色的方法

```
public void RunChecks()
{
    const int baseColumnCount = 3;
    for (int i = baseColumnCount; i < dataGrid.Columns.Count; i++)
    {
        foreach (DataGridRow row in Utilities.GetDataGridRows(dataGrid))
        {
            if (row != null)
            {
                DataGridCell cell = dataGrid.GetCell(row, i);

                // Start work with cell.
                Color color;
                TextBlock tb = cell.Content as TextBlock;
                string cellValue = tb.Text;
                if (!CheckForBalancedParentheses(cellValue))
                    color = (Color)ColorConverter.ConvertFromString("#FF0000");
                else
                    color = (Color)ColorConverter.ConvertFromString("#FFFFFF");
                row.Background = new SolidColorBrush(color);
                //cell.Background = new SolidColorBrush(color);
            }
        }
    }
} 
```

这些是所需的相关实用程序方法

```
public static T GetVisualChild<T>(Visual parent) where T : Visual
{
    T child = default(T);
    int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
    for (int i = 0; i < numVisuals; i++)
    {
        Visual v = (Visual)VisualTreeHelper.GetChild(parent, i);
        child = v as T;
        if (child == null)
            child = GetVisualChild<T>(v);
        if (child != null)
            break;
    }
    return child;
}

public static DataGridCell GetCell(this DataGrid grid, DataGridRow row, int column)
{
    if (row != null)
    {
        DataGridCellsPresenter presenter = GetVisualChild<DataGridCellsPresenter>(row);
        if (presenter == null)
        {
            grid.ScrollIntoView(row, grid.Columns[column]);
            presenter = GetVisualChild<DataGridCellsPresenter>(row);
        }
        DataGridCell cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
        return cell;
    }
    return null;
}

public static IEnumerable<DataGridRow> GetDataGridRows(DataGrid grid)
{
    var itemsSource = grid.ItemsSource as IEnumerable;
    if (null == itemsSource) yield return null;
    foreach (var item in itemsSource)
    {
        var row = grid.ItemContainerGenerator.ContainerFromItem(item) as DataGridRow;
        if (null != row) yield return row;
    }
} 
```

但是请注意，当用户滚动时，单元格的颜色会从一个单元格移动到另一个单元格！？这是 WPF 的另一个令人惊奇的烦恼。我真的很困惑为什么这么简单的事情会变得如此困难。我们需要对这种事情使用 MVVM 类型模式的建议我觉得很神奇......

我希望这对其他人有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-13T15:14:20.593

```
//the Class that resembles the Datagrid Item schema

foreach (Class cl in dgDatagrid.Items)
   {
       MessageBox.Show(cl.ID.ToString());
   }

this is the most simplest way to read the datagrid data
most articles misguide such simple things 
```

# javascript - 相对指针位置

> ID：15657354
> 
> 赞同：4
> 
> 时间：2013-03-27T11:07:46.873
> 
> 标签：javascript, canvas, kineticjs

我需要一些帮助来弄清楚如何计算[KineticJS](http://kineticjs.com)舞台上的相对指针位置。

在我的例子中，我的舞台改变了[位置](http://kineticjs.com/docs/symbols/Kinetic.Node.php#setPosition)、[偏移](http://kineticjs.com/docs/symbols/Kinetic.Node.php#setOffset)和[比例](http://kineticjs.com/docs/symbols/Kinetic.Node.php#setScale)。

这是演示：http: [//jsfiddle.net/pCZzv/](http://jsfiddle.net/pCZzv/)

```
function getRelativePointerPosition() {
    var pointer = stage.getPointerPosition();
    var pos = stage.getPosition();
    var offset = stage.getOffset();
    var scale = stage.getScale();

    return {
        x : ((pointer.x - pos.x + offset.x) / scale.x),
        y : ((pointer.y - pos.y + offset.y) / scale.y)
    };
} 
```

我希望在单击鼠标的位置出现红色圆圈。当舞台改变它的偏移和比例时，我遇到了问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:06:40.490

您对`x`和`y`坐标的计算略有偏差。这是您的示例的工作演示：http: [//jsfiddle.net/pCZzv/1/](http://jsfiddle.net/pCZzv/1/)

这是相关的更改代码：

```
function getRelativePointerPosition() {
    var pointer = stage.getPointerPosition();
    var pos = stage.getPosition();
    var offset = stage.getOffset();
    var scale = stage.getScale();

    return {
        x : ((pointer.x / scale.x) - (pos.x / scale.x) + offset.x),
        y : ((pointer.y / scale.y) - (pos.y / scale.y) + offset.y)
    };
} 
```

# logging - 如何在 Silex 中为 Monolog 设置不同的文件

> ID：15657355
> 
> 赞同：3
> 
> 时间：2013-03-27T11:07:47.743
> 
> 标签：logging, silex, channels, monolog

主题。我想在不同的文件中记录一些信息，以搜索 Symfony 2 的很多示例，但我使用 Silex 和 yaml 配置。如何设置它？

```
# console logging options
monolog.logfile: '/var/log/daemon.log'
monolog.level: error
monolog.name: 'daemon' 
```

我目前的配置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T23:03:26.837

你需要添加一个额外的提供者来制作这样的东西（我只是从头开始写的，所以我会工作，我希望）：

配置.yaml：

```
monolog.extra.logfile: '/var/log/other.log'
monolog.extra.level: error 
```

ExtendedMonologProvider.php：

```
<?php
use Silex\ServiceProviderInterface;
use Silex\Application;

use Silex\Provider\MonologServiceProvider;

class ExtendedMonologProvider implements ServiceProviderInterface {
    public function register(Application $app) {
        $app->register(new MonologServiceProvider());

        $app['monolog.extra.handler'] = function () use ($app) {
            return new StreamHandler($app['monolog.extra.logfile'], $app['monolog.extra.level']);
        };

        $app['monolog'] = $app->share($app->extend('monolog', function($log, $app) {
            $log->pushHandler($app['monolog.extra.handler']);
            return $log;
        }));
    }

    public function boot(Application $app) { }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-25T18:47:43.923

只需在注册提供者之后扩展独白并推送新的处理程序，您可以使用任何独白处理程序或您的自定义处理程序。

```
use Silex\Provider\MonologServiceProvider;
use Monolog\Handler\StreamHandler;
use Monolog\Logger;

$app->register(new MonologServiceProvider(), [
    'monolog.logfile' => /your/log/path/file.log',
]);

//extend monolog
$app->extend('monolog', function ($monolog, $app) {
    $monolog->pushHandler(new StreamHandler('/your/log/path/other.log', Logger::DEBUG));
    return $monolog;
}); 
```

# php - 复选框像单选按钮一样，选中前四个或后四个复选框，但不能同时选中 - javascript？

> ID：15657356
> 
> 赞同：0
> 
> 时间：2013-03-27T11:07:48.527
> 
> 标签：php, javascript

我在 javaScript 中遇到问题。我想将前 4 个复选框或后四个复选框中的任何一个选中为真。在我的代码中，如果我选中复选框的前四个或所有前四个中的任何一个，则最后四个复选框被禁用。现在检查任何一个或前四个后四个后四个是不可点击的。我希望它们是可点击的，并且前四个复选框未被选中。请更正我的代码

这是我的代码，提前致谢

```
<html>
<head>
<title>FooBar</title>
<script language="javascript">
function checkOnly(checked)
{
  if(document.myForm.elements[0].checked == true || document.myForm.elements[1].checked == true || document.myForm.elements[2].checked == true || document.myForm.elements[3].checked == true)
  {
      document.myForm.elements[4].checked = 0;
      document.myForm.elements[5].checked = 0;
      document.myForm.elements[6].checked = 0;
      document.myForm.elements[7].checked = 0;
  }  

}        
</script>
</head>
<body>
<form name="myForm">
<?php for($i=1;$i<=8;$i++){ ?>
<input type="checkbox" name="cb" id="cb" value="1" onClick="checkOnly(this)">
<?php } ?>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:05:46.323

考虑使用 checkOnly 函数的 'checked' 参数来确定用户选中了哪个复选框（也许给他们唯一的 id）。按照您现在的逻辑，如果您选中第一个复选框，它将清除最后四个复选框。然后，如果您选中最后一个复选框，它仍会清除最后四个复选框***，因为第一个复选框仍处于选中状态***。这使它看起来像最后四个复选框被禁用，即使它们不是。

例如：

```
<html>
<head>
<title>FooBar</title>
<script language="javascript">
function checkOnly(myCheckbox) {
   var checkboxChanged = false;
   var checkedTotalValue = 0;
   var changedTotalValue = 0;

   for(var i = 0; i < document.myForm.elements.length; i++) {
      if(document.myForm.elements[i].name != myCheckbox.name) {
         if(document.myForm.elements[i].checked == true) {
            checkboxChanged = true;
            changedTotalValue += parseInt(document.myForm.elements[i].value);
         }
         document.myForm.elements[i].checked = false;
      }

      if(document.myForm.elements[i].checked == true) {
        checkedTotalValue += parseInt(document.myForm.elements[i].value);
      }
   }

   if(checkboxChanged) {
      alert('Checked: ' + checkedTotalValue + ', Changed: ' + changedTotalValue);
   }
}
</script>
</head>

<body>
<form name="myForm">
<input type="checkbox" name="checkboxGroup1" id="cb" value="1" onClick="checkOnly(this)">
<input type="checkbox" name="checkboxGroup1" id="cb" value="1" onClick="checkOnly(this)">
<input type="checkbox" name="checkboxGroup1" id="cb" value="1" onClick="checkOnly(this)">
<input type="checkbox" name="checkboxGroup1" id="cb" value="1" onClick="checkOnly(this)">
<input type="checkbox" name="checkboxGroup2" id="cb" value="1" onClick="checkOnly(this)">
<input type="checkbox" name="checkboxGroup2" id="cb" value="1" onClick="checkOnly(this)">
<input type="checkbox" name="checkboxGroup2" id="cb" value="1" onClick="checkOnly(this)">
<input type="checkbox" name="checkboxGroup2" id="cb" value="1" onClick="checkOnly(this)">
</form>
</body>
</html> 
```

# payment-gateway - 如何在 Corona sdk 中使用支付网关？

> ID：15657358
> 
> 赞同：0
> 
> 时间：2013-03-27T11:07:50.150
> 
> 标签：payment-gateway, coronasdk

在我的应用程序中，我有书籍项目，其价格为 0.99 美元。没有应用程序内，因为这本书是按周更改的，所以我避免在应用程序内进行，而且每本书都有不同的价格。所以我需要类似 paypal 或 in- 的概念应用程序概念或其他一些你知道我帮助的概念

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T06:16:41.503

我会使用我相信你可以设置的 webview。它看起来不错，因为它会自动格式化为 Paypal 网站的移动版本。但是，棘手的部分将是检测付款何时完成。您可以通过检查 Paypal 付款完整 URL 来执行此操作。您可以自行设置。如果这些是其他人的产品，请让他们设置网址。

```
local function webListener( event )

    if event.url == "YOUR THANK YOU PAGE URL HERE" then

        print("Payment Complete")

    end

end

webView:addEventListener( "urlRequest", webListener ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T06:06:13.823

电晕没有任何贝宝插件。所以你必须使用将贝宝网页拉入网页视图和贝宝网页返回两种类型的值。用户付款成功时的“谢谢”消息。第二个是当用户取消付款时“取消”，所以你必须在你的电晕应用程序中获得这两个返回值。

# html - 在 JSON 内容加载之前设置的内联元素的宽度

> ID：15657359
> 
> 赞同：0
> 
> 时间：2013-03-27T11:07:53.667
> 
> 标签：html, css, ajax

我有一个内联元素的问题，特别是一个`<a>`元素。如下：

```
<a class="text></a>

.text{
display:inline-block;
background:red;
padding:5px
} 
```

问题是我加载了它与 JSON 一起保存的文本。现在我希望它的背景是文本的长度，但问题是 html 加载然后 json 加载，所以它不会获取文本的长度。我可以设置一个固定的宽度，但我宁愿它是文本的大小。我有什么选择吗？谢谢！

编辑：似乎导致问题的是 chrome 比任何其他浏览器都多。

脚本：

```
$(document).ready(function() {
var data;
function loadContent(){ 
    $.ajax({
        url: "json/content.json",
        data: "nocache=" + Math.random(),
        type: "GET",
        contentType: "application/json",
        dataType: "json",
        success: function(source){
            data = source;
            showInfo();
        },
        error: function(data){
            alert("Failed to load content");
        }
    }); 

}

loadContent();
    function showInfo(){
        $(".text").html(data[lang]['startpage']['text']);
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:46:21.127

如果这可以解决您的问题，我不是 100%，但请尝试这样做，传递`source`给函数而不是使用您的（未声明的）`data`变量。

```
$(document).ready(function() {

function loadContent(){ 
    $.ajax({
        url: "json/content.json",
        data: "nocache=" + Math.random(),
        type: "GET",
        contentType: "application/json",
        dataType: "json",
        success: showInfo,
        error: function(data){
            alert("Failed to load content");
        }
    }); 

}

loadContent();

function showInfo(data){
    $(".text").html(data[lang]['startpage']['text']);
}
}); 
```

## 更新

要将同一行上的所有 div`#game-nav`从更改`inline`为`inline-block`。

```
#game-nav li {
    display: inline-block;
} 
```

`display:inline`元素（like`<b>`或`<span>`wrap 这不是你想要的，inline-block 可以换行到新行但它们不会破坏中间词。

# grails - Grails ehcache 插件 - 另一个未命名的 CacheManager 已存在于同一 VM 中

> ID：15657360
> 
> 赞同：6
> 
> 时间：2013-03-27T11:07:55.467
> 
> 标签：grails, ehcache, grails-plugin

我使用 ehcache 作为我的二级缓存运行我的 Grails 应用程序，它可以工作。我安装了`ehcache`插件+`cache`插件，然后它没有。我尝试了几乎所有来自互联网的解决方案，但没有找到我不断得到的解决方案`Another unnamed CacheManager already exists in the same VM`。

一种可能的解决方案是在 中设置`p:shared=true`，`EhCacheManagerFactoryBean`如果我使用旧插件“来自 grails 的 springcache 插件”，则此方法有效，但对于新插件，他们使用此管理器的修改版本并且共享属性不可用。

我尝试定义一个新`ehcache.xml`文件，但我仍然无法为这个缓存管理器输入一个新名称。

我尝试更改我`cache.provider`内部的类`DataSource.groovy`以使用另一个`EhCacheProvider`类，例如`Singleton`.

不用说，我测试了在不同的地方使用 DSL 设置不同的名称，但仍然没有运气。

最后，我使用了旧的弹簧缓存插件，该插件已被弃用。有人可以帮忙吗？

我正在使用 Grails 2.0.3 和`ehcache-core:2.5.3`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-16T18:20:58.273

在`hibernate`部分中`DataSource.groovy`，确保您`cache.provider.class`是最新的：

```
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = true
    cache.region.factory_class = 'grails.plugin.cache.ehcache.hibernate.BeanEhcacheRegionFactory' // For Hibernate before 4.0
    cache.region.factory_class = 'grails.plugin.cache.ehcache.hibernate.BeanEhcacheRegionFactory4' // For Hibernate before 4.0 and higher
} 
```

我遇到了同样的问题，因为我`cache.region.factory_class`的已经过时了：`net.sf.ehcache.hibernate.EhCacheProvider`。

请参阅[http://grails-plugins.github.io/grails-cache-ehcache/guide/usage.html](http://grails-plugins.github.io/grails-cache-ehcache/guide/usage.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-28T12:37:35.517

对于那些在 Grails 2.5.x 中遇到此错误的人，只需将其添加到`Config.groovy`：

```
beans {
   cacheManager {
      shared = true
  }
} 
```

这为我解决了这个问题。

来源：[https ://github.com/grails/grails-core/releases/tag/v2.5.0](https://github.com/grails/grails-core/releases/tag/v2.5.0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:40:26.633

尝试使用**缓存**和**缓存-ehcache**插件，它对我有用，但有一些限制。但是对于二级缓存它可以正常工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-23T13:40:20.973

For people arriving here getting the same error as OP might consider that error might be caused by an update of a domain class at runtime (hot code swap), which is not done nicely in alle versions of Grails.

I hit this bug with Grails 2.5.4, yet with the application restart button as the only option to solve.

# php - AJAX 返回 NaN

> ID：15657361
> 
> 赞同：0
> 
> 时间：2013-03-27T11:07:57.887
> 
> 标签：php, javascript, ajax, jquery

我正在使用 AJAX 调用将值传递给 PHP 并从 PHP 中检索值。我在控制台中得到的输出是 NaN 我不知道这意味着什么。请帮我纠正这个问题并使用 AJAX 取回价值

脚本代码：

```
window['channel']="OVERALL";
     $.ajax({
             method:"GET",
             url:"dash2.php",
             data:({channel:+channel}),
             success:function(data){
                    alert(data);
                    //console.log(data);
                    }
            }); 
```

PHP代码：

```
<?php

$channel=$_GET['channel'];

echo json_encode($channel);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:10:46.120

NaN 表示不是数字..

为什么`+`那里有操作员

```
data:({channel:+channel}), //here this is trying to convert it into number hence resulting in NAN 
```

它应该是

```
data:({channel:channel}), 
```

大胆猜测，应该是（如果您尝试将其传递给服务器端（PHP）

```
data:{channel: window['channel']}, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:10:50.807

```
+channel 
```

`+`尝试将“OVERALL”转换为数字（结果为 NaN）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:11:43.593

代替：

```
data:({channel: +channel}), 
```

尝试这个：

```
data:{channel: channel}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T11:12:32.910

提供 JSON 数据类型并检查。

```
$.ajax({
    type:"GET",
    url:"dash2.php",
    dataType: 'json',
    data:({channel:+channel}),
    success:function(data){
        alert(data);
        //console.log(data);
    }
}); 
```

# css - 如何将 PanelGrid 对齐到中心？JSF-Primefaces

> ID：15657364
> 
> 赞同：24
> 
> 时间：2013-03-27T11:07:59.807
> 
> 标签：css, jsf, primefaces, panel

我知道关于这个问题有很多问题，但没有什么对我有用。

我需要将 PanelGrid 对齐到中心（水平）。

**这是我的面板网格**

```
<p:panelGrid styleClass="panelGridCenter"> 
```

**和我的 CSS：**

```
.panelGridCenter td,.panelGridCenter tr {
    text-align: center;
} 
```

它只是将内容对齐到中心，而不是 panelGrid

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-27T11:19:14.020

JSF组件呈现一个默认为[块级元素](http://htmlhelp.com/reference/html40/block.html)`<p:panelGrid>`的 HTML元素。要将块级元素本身居中，您应该将其水平边距设置为，而不是尝试将其内联内容居中。`<table>``auto`

```
.panelGridCenter {
    margin: 0 auto;
} 
```

### 也可以看看：

*   [在 CSS 中将 div 居中](https://stackoverflow.com/questions/2281087/center-a-div-in-css/2281107#2281107)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-17T14:05:24.450

上述答案在技术上是正确的，但也不完整。

如果您想将 div 之类的东西居中，只要您的 DIV 具有有限的宽度，上述将左右边距作为自动播放的技术将起作用。例如，为了让您开始成为任何效果，您必须设置宽度 = 60% 之类的东西。

然后，一旦你意识到你需要使用固定宽度……你会立即被提示下一个问题：那么我到底应该输入什么作为我的固定宽度？

这就是为什么我认为这个问题的更好答案是：像上面那样的 CSS 技术对于网页上的小细节是可以的。但是，您在网页上将任何内容居中的粗粒度方法应该是使用网格系统。大多数网格系统使用 12 个单元。例如，如果您的网格系统默认设置为 12 个单元格 = 100% 宽度。您可以通过例如将内容居中放置在单元格 [5-8] 中来居中，而不是作为百夫长空间单元格 [1-4] 和单元格 [9-12]。

这是一个基于素面网格系统的示例：

```
 <h3 id="signInTitle" class="first">Sign in - FIXME - i18n</h3>
  <form id="loginFormOld" (ngSubmit)="onLoginFormSubmit()">
    <!-- (a) Start a grid system-->
    <div class="ui-g ui-fluid">

      <!-- (b) Eat the first four cells of the grid -->
      <div class="ui-g-12 ui-md-4"></div>

      <!-- (c) In the center location of the grid put in the Login form -->
      <div class="ui-g-12 ui-md-4">
        <div class="ui-inputgroup">
          <span class="ui-inputgroup-addon"><i class="fa fa-user"></i></span>
          <input id="emailInput" pInputText type="email" placeholder="Email" [(ngModel)]="eMail" name="eMail">
        </div>
        <div class="ui-inputgroup">
          <span class="ui-inputgroup-addon"><i class="fa fa-key" aria-hidden="true"></i></span>
          <input id="passwordInput" pInputText type="password" class="form-control" placeholder="Password" [(ngModel)]="password" name="password">
        </div>
      </div>

      <!-- (d) Eat the rest of the first row of the grid without setting any contents -->
      <div class="ui-g-12 ui-md-4"></div>

      <!-- (e) Start the second row and eat the first four cells -->
      <div class="ui-g-12 ui-md-4"></div>

      <!-- (f) Position a form submit button on the fifth cell -->
      <div class="ui-g-12 ui-md-1">
        <button id="loginSubmit" pButton type="submit" label="Submit"></button>
      </div>
    </div>
  </form> 
```

上面表格上的评论应该很清楚我上面的意思。网格系统通常会提供 CSS 类，以允许您的 UI 可以跨多种设备形式工作，尽管......在这方面，我认为您不能使用桌面 UI 制作好的移动 UI，也不能制作好的使用移动 UI 的桌面 UI。在我看来，你可以获得一个好的 Tablet/Desktop UI，但你应该从头开始编写页面，其中包含移动设备所需的最少内容。但这是一个不同的讨论......只是说，flex grid css 类只会带你到目前为止。理论上有很多潜力，比在 div 元素上硬编码一些任意固定长度要好得多……但也不是解决所有问题的灵丹妙药。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-10T22:17:34.783

如果你想右对齐

```
.rightAlign{
     margin-left: auto;
 } 
```

# iphone - 使用 performSelector 方法传递两个参数

> ID：15657365
> 
> 赞同：0
> 
> 时间：2013-03-27T11:08:00.760
> 
> 标签：iphone, xcode

```
-(void)application :(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{

    [self addMessageFromRemoteNotification:userInfo updateUI:NO];

} 
```

我需要在 performSelectorInBackground 方法中运行上述方法。但是有单个对象的选项。如何更改我的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:16:26.703

使用 GCD：

```
-(void)application :(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self addMessageFromRemoteNotification:userInfo updateUI:NO];
    });

} 
```

dispatch_async 立即返回，然后该块将在后台异步执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:26:07.133

无法通过 performSelectorInBackground 传递多个参数。当我遇到问题时，我解决问题的方法是传递一个字典，使用文字 NSDictionary 语法使这变得更容易。

```
-(void)application :(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    [self performSelectorInBackground:@selector(backgroundMethod:) withObject:@{@"userInfo" : someUserInfoDictionary, @"updateUI" : @(NO)}];
}
-(void)backgroundMethod:(NSDictionary *)params
{
    [self addMessageFromRemoteNotification:params[@"userInfo"] updateUI:[params[@"updateUI"] boolValue]];
} 
```

# jsp - 使用 JSTL 为 JSP 下拉选择的值

> ID：15657367
> 
> 赞同：29
> 
> 时间：2013-03-27T11:08:04.087
> 
> 标签：jsp, drop-down-menu, jstl, retain

我在 Servlet 中有 SortedMap 来填充 JSP 中的下拉值，并且我有以下代码

```
 SortedMap<String, String> dept = findDepartment();
    request.setAttribute("dept ", dept); 
```

在 JSP 中

```
 <select name="department">
          <c:forEach var="item" items="${dept}">
            <option value="${item.key}">${item.value}</option>
          </c:forEach>
        </select> 
```

我正在使用一个 JSP 页面进行插入和更新。当我编辑页面时，如何将选定值设置为下拉选定值将来自数据库的位置。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-27T11:12:15.453

在 HTML 中，选定的选项由元素上存在的`selected`属性表示，如下所示：`<option>`

```
<option ... selected>...</option> 
```

或者，如果您是 HTML/XHTML 严格的：

```
<option ... selected="selected">...</option> 
```

因此，您只需要让 JSP/EL 有条件地打印它。前提是您已按以下方式准备所选部门：

```
request.setAttribute("selectedDept", selectedDept); 
```

那么这应该这样做：

```
<select name="department">
    <c:forEach var="item" items="${dept}">
        <option value="${item.key}" ${item.key == selectedDept ? 'selected="selected"' : ''}>${item.value}</option>
    </c:forEach>
</select> 
```

### 也可以看看：

*   [将表单提交到 Servlet 后，如何在 JSP 中保留 HTML 表单字段值？](https://stackoverflow.com/questions/3937624/how-can-i-retain-html-form-field-values-in-jsp-after-submitting-form-to-servlet/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-02-27T06:14:42.387

我尝试了 Sandeep Kumar 的最后一个答案，我发现方法更简单：

```
<option value="1" <c:if test="${item.key == 1}"> selected </c:if>> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-16T21:51:35.590

我认为上面的例子是正确的。但你真的不需要设置

```
request.setAttribute("selectedDept", selectedDept); 
```

您可以重用来自 JSTL 的信息，只需执行以下操作..

```
<!DOCTYPE html>
<html lang="en">
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<head>
    <script src="../js/jquery-1.8.1.min.js"></script>
</head>
<body>
    <c:set var="authors" value="aaa,bbb,ccc,ddd,eee,fff,ggg" scope="application" />
    <c:out value="Before : ${param.Author}"/>
    <form action="TestSelect.action">
        <label>Author
            <select id="Author" name="Author">
                <c:forEach items="${fn:split(authors, ',')}" var="author">
                    <option value="${author}" ${author == param.Author ? 'selected' : ''}>${author}</option>
                </c:forEach>
            </select>
        </label>
        <button type="submit" value="submit" name="Submit"></button>
        <Br>
        <c:out value="After :   ${param.Author}"/>
    </form>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-27T11:17:51.987

如果你不介意使用 jQuery，你可以使用下面的代码：

```
 <script>
     $(document).ready(function(){
           $("#department").val("${requestScope.selectedDepartment}").attr('selected', 'selected');
     });
     </script>

    <select id="department" name="department">
      <c:forEach var="item" items="${dept}">
        <option value="${item.key}">${item.value}</option>
      </c:forEach>
    </select> 
```

在您的 Servlet 中添加以下内容：

```
 request.setAttribute("selectedDepartment", YOUR_SELECTED_DEPARTMENT ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-12T09:39:26.893

我尝试了接受的答案，它没有用。

然而，简单的方法如下： -

```
<option value="1" <c:if test="${item.quantity == 1}"> <c:out value= "selected=selected"/</c:if>>1</option>
<option value="2" <c:if test="${item.quantity == 2}"> <c:out value= "selected=selected"/</c:if>>2</option>
<option value="3" <c:if test="${item.quantity == 3}"> <c:out value= "selected=selected"/</c:if>>3</option> 
```

享受！！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-15T13:46:17.867

您可以尝试一种更简单的方法：

```
<option value="1" ${item.quantity == 1 ? "selected" : ""}>1</option> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-13T08:10:49.520

也许我不完全理解接受的答案，所以它对我不起作用。

我所做的只是检查变量是否为空，将其分配给我数据库中的已知值。这似乎类似于接受的答案，您首先声明一个已知值并将其设置为选中

```
<select name="department">
    <c:forEach var="item" items="${dept}">
        <option value="${item.key}">${item.value}</option>
    </c:forEach>
</select> 
```

因为没有选择任何选项，因此**item = null**

```
<%
    if(item == null){
        item = "selectedDept"; //known value from your database
    }
%> 
```

这样，如果用户随后选择了另一个选项，我的**IF 子句**将不会捕获它并分配给在开始时声明的固定值。我的概念在这里可能是错误的，但它对我有用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-01T10:09:44.077

下面是使用 jstl 标签的简单下拉示例

```
 <form:select path="cityFrom">  
    <form:option value="Ghaziabad" label="Ghaziabad"/>  
    <form:option value="Modinagar" label="Modinagar"/>  
    <form:option value="Meerut" label="Meerut"/>  
    <form:option value="Amristar" label="Amristar"/>  
 </form:select> 
```

# jquery - 特定位置的jquery显示时间

> ID：15657374
> 
> 赞同：0
> 
> 时间：2013-03-27T11:08:36.890
> 
> 标签：jquery, date, time, location, zone

使用下面的代码，我能够成功地在网站上显示当地时间。我在基于 Zurb Foundation 3 的网站上使用它——我想避免加载额外的插件。

a）如何使它始终显示悉尼的时间，而不是用户端的时间？**有没有办法使用下面的代码而不是完全不同的脚本来做到这一点？**

b）另外，如果这是一个简单的修复，我怎样才能让它显示它是星期几？

```
 function updateClock ( ) 
```

```
{
      var currentTime = new Date ( );
      var currentHours = currentTime.getHours ( );
      var currentMinutes = currentTime.getMinutes ( );
      var currentSeconds = currentTime.getSeconds ( );    

      // Pad the minutes and seconds with leading zeros, if required
       currentMinutes = ( currentMinutes < 10 ? "0" : "" ) + currentMinutes;
       currentSeconds = ( currentSeconds < 10 ? "0" : "" ) + currentSeconds;

          // Choose either "AM" or "PM" as appropriate
           var timeOfDay = ( currentHours < 12 ) ? "AM" : "PM"; 

         // Convert the hours component to 12-hour format if needed
           currentHours = ( currentHours > 12 ) ? currentHours - 12 : currentHours; 

      // Convert an hours component of "0" to "12"
           currentHours = ( currentHours == 0 ) ? 12 : currentHours;

          // Compose the string for display
           var currentTimeString = currentHours + ":" + currentMinutes + ":" + currentSeconds + " " + timeOfDay;

        $("#clock").html(currentTimeString); }

$(document).ready(function()
{setInterval('updateClock()', 1000);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:43:30.550

## Try this link

**[http://www.techtricky.com/jquery-code-to-show-time-in-different-countries/](http://www.techtricky.com/jquery-code-to-show-time-in-different-countries/)**

And the demo is showing the day name in the result.

# HTML & JS:

```
<html>
  <head>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
  <script type="text/javascript" src="http://techtricky.com/wp-content/jquery/jquery.jclock.js"></script>
  <script type="text/javascript">
    $(document).ready(
        function() {
           $("#zones").change(function(){
           if ($('#time-cont .time').length>0){ $('#time-cont .time').remove();}
       var offset = $(this).val();    
           if (offset == '') return;       

       $('#time-cont').append('<div class="time"></div>');

           var options = {
            format:'<span class=\"dt\">%A, %d %B %I:%M:%S %P</span>',
            timeNotation: '12h',
            am_pm: true,
            fontFamily: 'Verdana, Times New Roman',
            fontSize: '20px',
            foreground: 'black',
            background: 'yellow',
            utc:true,
            utc_offset: offset
          }

          $('#time-cont .time').jclock(options);
       });
     });
    </script>

  </head>
  <body>
   <select id="zones">
    <option value="">--Select--</option>
    <option value="10">Australia</option> // Australia UTC offset value is 10
    <option value="8">China</option>
    <option value="5.5">India</option>
    <option value="12">Newzealand</option>
    <option value="0">UK</option>
    <option value="-5">US EST</option>

  </select>
  <div id="time-cont"></div>
  </body>
</html> 
```

# java - html5 vs adobe air vs java用于桌面应用程序？

> ID：15657377
> 
> 赞同：2
> 
> 时间：2013-03-27T11:08:42.047
> 
> 标签：java, html, apache-flex, air

我需要有关我可以用来开发在美学和功能上都表现出色的应用程序的语言的建议。正如我期望 html5 成为许多人的首选，推荐用于开发 html5“桌面”应用程序的 API。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:23:57.070

还有另一个主题是关于使用 Web 开发语言对桌面应用程序进行编程。

[如何使用 HTML/CSS/JavaScript 开发桌面应用程序？](https://stackoverflow.com/questions/12232784/how-to-develop-desktop-apps-using-html-css-javascript).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:30:47.303

选择完全取决于您。因为凡事都有起起落落。但是，如果您对使用 HTML5 和 JavaScript 进行开发非常感兴趣。有很多sdk可用。Tidesdk 和 Appjs 将为您减少工作量。

请通过这些链接。

[将 HTML5 应用程序作为桌面应用程序分发的解决方案？](https://stackoverflow.com/questions/4869613/html5-for-desktop-application-development) [如何使用 HTML/CSS/JavaScript 开发桌面应用程序？](https://stackoverflow.com/questions/12232784/how-to-develop-desktop-apps-using-html-css-javascript)

# security - 键盘记录器和虚拟机

> ID：15657378
> 
> 赞同：-1
> 
> 时间：2013-03-27T11:08:43.080
> 
> 标签：security, operating-system, virtualization, keylogger

我想测试一些键盘记录器，看看它们是如何工作的。

如果我的主机操作系统是干净的，并且我在 VirtualBox 中运行的来宾操作系统上安装了键盘记录器，那么键盘记录器是否能够在主机操作系统中记录击键和屏幕截图？

我想我知道这个问题的答案，但我只是想确定一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:22:03.707

除非您的虚拟机损坏，否则按键/屏幕记录器将完全包含在虚拟机中，并且无法访问虚拟机外部的主机操作系统键盘/屏幕数据。

# python - 从文本文档中“蚕食”第一行文本然后在 python 中重新保存的最有效方法

> ID：15657380
> 
> 赞同：1
> 
> 时间：2013-03-27T11:09:00.547
> 
> 标签：python, text-files, deque

我有一个文本文档，我想每隔 30 秒左右重复删除第一行文本。

我已经编写（或更准确地说是复制）python 可重置计时器对象的代码，如果不要求重置或取消，它允许以非阻塞方式每 30 秒调用一次函数。

[python中的可重置计时器重复直到取消](https://stackoverflow.com/questions/15651931/resettable-timer-in-python-repeats-until-cancelled/15652019?noredirect=1#15652019)

（如果有人可以检查我实现重复的方式没问题，因为我的 python 在运行时有时会崩溃，将不胜感激:)）

我现在想编写我的函数来加载一个文本文件，并可能复制除第一行之外的所有内容，然后将其重写到同一个文本文件中。我可以这样做，我认为这种方式......但它是最有效的吗？

```
def removeLine():

    with open(path, 'rU') as file:
        lines = deque(file)
        try:
            print lines.popleft()
        except IndexError:
            print "Nothing to pop?"
    with open(path, 'w') as file:
        file.writelines(lines) 
```

这行得通，但这是最好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:15:35.137

我会使用该[`fileinput`模块](http://docs.python.org/2/library/fileinput.html)`inplace=True`：

```
import fileinput

def removeLine():
    inputfile = fileinput.input(path, inplace=True, mode='rU')
    next(inputfile, None)  # skip a line *if present*
    for line in inputfile:
        print line,  # write out again, but without an extra newline
    inputfile.close() 
```

`inplace=True`导致`sys.stdout`被重定向到打开的文件，所以我们可以简单地“打印”这些行。

该`next()`调用用于跳过第一行；给它一个默认值会`None`抑制`StopIteration`空文件的异常。

这使得重写*大*文件更有效，因为您只需将`fileinput`readlines 缓冲区保留在内存中。

我认为根本不需要 a `deque`，即使是您的解决方案；也可以`next()`在那里使用，然后使用`list()`来捕捉剩余的行：

```
def removeLine():
    with open(path, 'rU') as file:
        next(file, None)  # skip a line *if present*
        lines = list(file)
    with open(path, 'w') as file:
        file.writelines(lines) 
```

但这需要您读取内存中的所有文件；不要对大文件这样做。

# python - Atlassian Confluence - 使用 python 创建带有标签的博客文章

> ID：15657382
> 
> 赞同：1
> 
> 时间：2013-03-27T11:09:02.593
> 
> 标签：python, confluence

我可以使用以下脚本在 Confluence 中创建博客文章：

```
import sys
from xmlrpclib import Server

user = "user"
passwd = "pass"
serverurl = "<blah-blah>/xmlrpc"
spacekey = "DEV"

s = Server( serverurl )
token = s.confluence1.login( user, passwd )

newblogpostdata = {"title":"title", 
               "content":"content", 
               "space":spacekey}
newblogpostdata = s.confluence1.storeBlogEntry(token, newblogpostdata) 
```

但是找不到如何在博客文章中添加一些标签？

更新。最后我使用了以下解决方案： id = newblogpost['id'] s.confluence1.addLabelByName(token, "ctrm", id)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:32:46.753

您是否尝试过在内容中使用宏？

[https://confluence.atlassian.com/display/DOC/Using+Label+Macros+to+Categorise+Wiki+Content](https://confluence.atlassian.com/display/DOC/Using+Label+Macros+to+Categorise+Wiki+Content)

[https://confluence.atlassian.com/display/DOC/Confluence+Wiki+Markup+for+Macros](https://confluence.atlassian.com/display/DOC/Confluence+Wiki+Markup+for+Macros)

但是恐怕您必须尝试找到正确的语法。

# mysql - 在mySQL中创建一个连接到前一个表的主键的新表

> ID：15657383
> 
> 赞同：0
> 
> 时间：2013-03-27T11:09:10.220
> 
> 标签：mysql, database, primary-key

目前我在 mySQL 数据库中有一个表，我想连接到我需要创建的另一个表。第二个表只有 2 列，member_id 和 product 列。同一 member_ID 的产品列中将有许多条目，并且产品列将是另一个表的外键。

这是我用来创建初始登录表的 SQL 代码：

```
'CREATE TABLE `members`(  
`member_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
`firstname` varchar(100) DEFAULT NULL,
`lastname` varchar(100) DEFAULT NULL,
`login` varchar(100) NOT NULL DEFAULT \'\',
`passwd` varchar(32) NOT NULL DEFAULT \'\',
PRIMARY KEY (`member_id`)) 
ENGINE=MyISAM AUTO_INCREMENT=8 DEFAULT CHARSET=utf8' 
```

如果有人能告诉我如何创建第二个表来连接到 member_id，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:10:54.617

MyISAM 存储引擎不支持外键。如果您想通过使用外键来确保数据完整性，您需要使用另一个存储引擎，例如。InnoDB

使用 MyISAM 您不能定义外键，但您仍然可以如下定义表： [http ://sqlfiddle.com/#!2/4cb9c/1/0](http://sqlfiddle.com/#!2/4cb9c/1/0)

请注意，创建索引以确保连接的良好性能很重要。如果您想使用 InnoDB 和外键，则不需要显式创建索引，因为添加外键会创建隐式索引。

# extjs4 - Extjs4，等待ajax请求

> ID：15657385
> 
> 赞同：0
> 
> 时间：2013-03-27T11:09:14.670
> 
> 标签：extjs4, wait, ajax-request

我应该在一个按钮单击中运行多个 ajax 请求，但所有请求都应该等到第一个请求被执行。我试图将所有请求放在第一个的成功回调中，但这会产生此错误：

> TypeError: o is undefined
> return o.id;

并且只执行第一个请求。
这是我的代码：

```
 if(form1.isValid()) {
                form1.submit(me._genFormSubmitAction('my_DB','my_Action', function() {
                    console.log('form1 success');
                    //Submit Form2

                    if(form2.isValid()) {
                        form2.submit(me._genFormSubmitAction('my_DB','my_Action', function() {
                        console.log('form2 success');
}));

//Submit Form3  
.... 
```

_genFormSubmitAction：

```
_genFormSubmitAction: function(db,action, successCallback) {
    var me = this;
    return {
        clientValidation : true,
        url              : me.getApplication().apiUrl,
        waitMsg : '<p align=right>..الرجاء الإنتظار</p>',
        async:false,
        params           : {
            _module: 'administrationcassocial',
            _action: action,
            _db:db
        },
        success          : function(form, action) {
            if(action.result.success == true) {
                Ext.callback(successCallback, me);
                form.owner.destroy();
            } else {
                console.log('url=',url);
                Ext.Msg.alert(action.result.error, action.result.errormessages.join("\n"));
            }
        },
        failure          : function(form, action) {
            switch (action.failureType) {
                case Ext.form.action.Action.CLIENT_INVALID:
                    Ext.Msg.alert('Failure', 'Form fields may not be submitted with invalid values');
                    break;
                case Ext.form.action.Action.CONNECT_FAILURE:
                    Ext.Msg.alert('Failure', 'Ajax communication failed');
                    break;
                case Ext.form.action.Action.SERVER_INVALID:
                    Ext.Msg.alert(action.result.error, action.result.errormessages.join("\n"));
            }
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:27:23.413

这是一个范围问题。

form1.submit 的回调发生在回调自己的范围内，所以它不知道是什么`form2`。

你可以试试：

```
if(form1.isValid()) {
    var me = this;
    form1.submit(me._genFormSubmitAction('my_DB','my_Action', function() {
        console.log('form1 success');

        //Submit Form2
        if( me.form2.isValid() ) {
            form2.submit(me._genFormSubmitAction('my_DB','my_Action', function() {
                console.log('form2 success');
            }));
        }
    }));
} 
```

或者我认为更合适的解决方案：

```
// Added aScope var
_genFormSubmitAction: function( db,action, aScope, successCallback ) {
    var me = this;
    return {    
        // ...
        scope: aScope
    }
} 
```

然后你打电话：

```
form1.submit(me._genFormSubmitAction('my_DB','my_Action', this, function() {
})); 
```

# c# - 单跨是免费的吗？

> ID：15657387
> 
> 赞同：6
> 
> 时间：2013-03-27T11:09:15.513
> 
> 标签：c#, android, xamarin.android, monocross

我想使用 monocross android 应用程序进行开发，但我在某处读到它并不是真正免费的。您可以免费为带有 monocross 的 android 开发吗，或者您需要为某种扩展付费（例如 monodroid）。它是如何工作的？

如果它不是免费的，还有其他选择吗？我不介意为可以帮助我更快编码的东西付费，但肯定不是每年 1000 美元。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-27T11:19:57.977

```
(Xamarin.Android || Xamarin.iOS) != monocross 
```

MonoCross 是一个在 Xamarin.Android 和 Xamarin.iOS 之上工作的框架，以利用模型视图控制器 (MVC) 模式。MonoCross 本身不收费，但如果你想使用 Xamarin.Android 或 Xamarin.iOS 编译代码超过 32KB，则需要为产品的许可证付费。

话虽如此，MonoCross 还是不错的，但似乎已经停止了进一步的开发，并且该框架很长一段时间都没有发生任何新变化。另一个类似于 MonoCross 的名为 MvvmCross 的不错的框架也在那里。不同之处在于 MvvmCross 顾名思义，它使用 ModelView 视图模型 (MVVM) 模式而不是 MVC。它也在快速发展中，并拥有一个活跃的社区。就像 MonoCross 它是免费的。

**如果要为这两个移动平台进行开发，MonoCross 和 MvvmCross 都需要 Xamarin.Android 或 Xamarin.iOS。**

然而 Xamarin.Android 并不是唯一的 C# for Android 项目。还有一个名为[dot42](http://www.dot42.com/)的项目，但它不像 Xamarin 产品那样受欢迎，并且没有得到拥有大量资源的公司的支持。因此，您的里程可能会有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T11:13:40.733

是的，它是免费的。它是根据[MIT Open Source License发布的，在](http://opensource.org/licenses/mit-license.php)[Monocross 主页](http://monocross.net/)底部有一个链接。

> 特此免费授予任何获得本软件和相关文档文件（“软件”）副本的人，以不受限制地处理本软件，包括但不限于使用、复制、修改、合并的权利、发布、分发、再许可和/或出售本软件的副本，并允许向其提供本软件的人这样做，但须符合以下条件：
> 
> 上述版权声明和本许可声明应包含在本软件的所有副本或大部分内容中。
> 
> 本软件按“原样”提供，不提供任何形式的明示或暗示保证，包括但不限于适销性、特定用途适用性和非侵权保证。在任何情况下，作者或版权持有人均不对任何索赔、损害或其他责任承担任何责任，无论是在合同、侵权或其他方面，由本软件或本软件的使用或其他交易引起或与之相关。软件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T19:09:07.627

Monocross的发展并没有停止。它仍在积极开发中，发布 Monocross 跨平台框架的团队一直在努力开发[iFactr](http://ifactr.com)，他们的企业级 UI 抽象层具有数据缓存和队列。

他们刚刚在 Xamarin 的跨平台论坛上宣布了对开源社区的重新承诺。

# python - Python 文件缩减 - 第 2 部分

> ID：15657388
> 
> 赞同：0
> 
> 时间：2013-03-27T11:09:18.873
> 
> 标签：python, parsing, text, random, reduction

[这是我之前的问题（在 Python 中使用随机化减少文本文件](https://stackoverflow.com/questions/15109251/text-file-reduction-with-randomization-in-python)）的后续行动。正在修改以运行多个缩减，但只有第一个输出文件包含缩减，以下 3 个文件是零大小。这一定是我没有看到的明显的东西......

```
#!/usr/bin/env python
import random
import sys
from itertools import chain, groupby

def choose_random(iterator, fraction, random=random.random):
    """Lazy analog of:

        L = list(iterator)
        k = int(len(L) * fraction + .5) or 1 # get at least one
        result = random.sample(L, k)

    Note: this function doesn't randomize the order of elements
          that would require to keep selected elements in memory
          and number of output elements is not exactly k
    """
    # always yield at least one item if input is not empty
    item = next(iterator)
    it = (x for x in chain([item], iterator) if random() < fraction)
    for x in chain([next(it, item)], it):
        yield x

def getkey(line):
    return line.split("\t")[3] # 4th column

reductions = [0.25, 0.50, 0.75, 1]
filename = "foo"
outfile = [open("-".join([x, filename]), "w") for x in map(str, reductions)]

try:
    with open(filename, "r") as f:
        for ln, k in enumerate(map(float, reductions)):
            for key, group in groupby(f, key=getkey):
                outfile[ln].writelines(choose_random(group, fraction=k))

finally:
    for f in outfile:
        f.close() 
```

* * *

输出显示如下（文件 0.25-foo 包含正确的归约，其余为空）：

```
-rw-r--r--  1 staff  staff   53326048 Mar 27 03:42 0.25-foo
-rw-r--r--  1 staff  staff          0 Mar 27 03:42 0.5-foo
-rw-r--r--  1 staff  staff          0 Mar 27 03:42 0.75-foo
-rw-r--r--  1 staff  staff          0 Mar 27 03:42 1-foo 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:17:15.323

您打开`foo`一次，但尝试对其进行四次迭代。在第一次缩减结束时，您处于文件的末尾。要么重新打开它：

```
try:
    for ln, k in enumerate(map(float, reductions)):
        with open(filename, "r") as f:
            for key, group in groupby(f, key=getkey):
                outfile[ln].writelines(choose_random(group, fraction=k))

finally:
    for f in outfile:
        f.close() 
```

或每次减少后倒带：

```
try:
    with open(filename, "r") as f:
        for ln, k in enumerate(map(float, reductions)):
            for key, group in groupby(f, key=getkey):
                outfile[ln].writelines(choose_random(group, fraction=k))
            f.seek(0)

finally:
    for f in outfile:
        f.close() 
```

我会同时打开两个文件：

```
reductions = [0.25, 0.50, 0.75, 1.0]
filename = "foo"

for fraction in reductions:
    with open(filename, "r") as f, open('%s-%s' % (fraction, filename), 'w') as outfile:
        for key, group in groupby(f, key=getkey):
            outfile.writelines(choose_random(group, fraction=fraction)) 
```

# string - bash文件重命名在特定位置添加字符串

> ID：15657393
> 
> 赞同：1
> 
> 时间：2013-03-27T11:09:33.567
> 
> 标签：string, bash, unix

我想重命名多个文件，但不仅仅是将我的字符串附加到文件的末尾或开头。我想把它放在一个特定的位置。这是我现在正在使用的命令，但它只能在文件名的开头和结尾添加内容。

```
for f in `ls  ~/tmp/*`; do FILE=`basename $f`; echo "Rename:"$f;echo $FILE; mv "$f" "/home/tmp/JC_"${FILE%.*}"_hg19."${FILE#*.}"";  done 
```

假设文件名如下`hell_1.txt`（为了简单起见，假设有很多文件名都有不同的数字）我想`o`在文件名中添加一个，所以如果你有一个结果名称会`hello_1.txt`很好一般解决方案不仅适用于此示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:20:14.930

这应该工作：

```
for x in ~/tmp/*.txt; do mv $x `echo $x | sed -e 's#hell#hello#'`; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:23:43.417

如果我了解您希望将任何“hell.*_NNN.txt”更改为“hel.*o_NNN.txt”（将 .* 保持在“hell”和“_NNN.txt”之间（NNN 是任意数字）。

然后：

```
for x in ~/tmp/*.txt; do 
   mv "$x" "$(echo "$x" | LC_COLLATE=C sed -e 's#\(hell.*\)\(_[0-9]*\.txt$\)#\1o\2#')"
done 
```

我在 sed 调用期间添加了 LC_COLLATE=C，因此您可以依靠仅匹配数字“0”或“1”或...或“9”的“[0-9]”

（如果您想知道为什么在某些语言环境中添加 LC_COLLATE:`[A-Z]`可以匹配每个字母 AZ 或 ay（“z”除外！），因为在这种语言环境中，字母按以下顺序出现：“A”“a”“B”“b”.. . 'Z' 'z'. 还有其他语言环境，谁知道？）

（注意：您也可以用*“[[:digit:]]* ”表示法替换“[0-9]”，但它可能不太便携：“旧”版本的 sed 不会知道这种表示法并会尝试匹配任何'['或'：'或......或't'或'：'，后跟']'（*，所以0,1或更多次）......这就是为什么我不就像将那些特殊的 [[:things:]] 与 sed、tr 等一起使用：我认为它们的便携性较差。如果您更喜欢使用这些，请改用 perl？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:32:22.267

怎么样

```
rename 's/hell_/hello_/' /tmp/*.txt 
```

# macos - 所有应用程序前面的 NSWindow + 忽略空间/全屏转换

> ID：15657395
> 
> 赞同：5
> 
> 时间：2013-03-27T11:09:35.440
> 
> 标签：macos, cocoa, nswindow

我正在开发一个“淡出”屏幕以隐藏奇怪的 OS X 全屏转换的应用程序。在 10.7 中，我可以通过创建一个 NSWindow 并使用 setCollectionBehavior 强制它浮动到其他所有内容之上来做到这一点：

```
[window setCollectionBehavior:NSWindowCollectionBehaviorStationary | NSWindowCollectionBehaviorCanJoinAllSpaces | NSWindowCollectionBehaviorFullScreenAuxiliary]; 
```

我的应用程序启动，淡出为黑色，然后等待来自其他应用程序的信号，然后淡出并显示下面的内容。但是，在 10.8 中，它覆盖了屏幕，显示了当下面的应用程序进入全屏时的过渡时刻，然后弹回到应用程序的前面。

关于如何在这些令人讨厌的过渡之前推动这个应用程序的任何想法？

# python - 如何将 Xlib 和 OpenGL 与 Python 和 NVidia 卡一起使用？

> ID：15657397
> 
> 赞同：1
> 
> 时间：2013-03-27T11:09:39.270
> 
> 标签：python, opengl, x11, pyopengl

我从另一个线程复制了这段代码，它工作正常。

```
from Xlib import X, display
from OpenGL import GL, GLX
from OpenGL.raw._GLX import struct__XDisplay
from ctypes import *

# some python-xlib code...
pd = display.Display()
pw = pd.screen().root.create_window(50, 50, 200, 200, 0,
                                pd.screen().root_depth,
                                X.InputOutput, X.CopyFromParent)
pw.map()

# ensure that the XID is valid on the server
pd.sync()

# get the window XID
xid = pw.__resource__()

# a separate ctypes Display object for OpenGL.GLX
xlib = cdll.LoadLibrary('libX11.so')
xlib.XOpenDisplay.argtypes = [c_char_p]
xlib.XOpenDisplay.restype = POINTER(struct__XDisplay)
d = xlib.XOpenDisplay("")

# use GLX to create an OpenGL context on the same window XID
elements = c_int()
configs = GLX.glXChooseFBConfig(d, 0, None, byref(elements))
w = GLX.glXCreateWindow(d, configs[0], c_ulong(xid), None)
context = GLX.glXCreateNewContext(d, configs[0], GLX.GLX_RGBA_TYPE, None, True)
GLX.glXMakeContextCurrent(d, w, w, context)

# some python-opengl code....
GL.glShadeModel(GL.GL_FLAT)
GL.glClearColor(0.5, 0.5, 0.5, 1.0)

GL.glViewport(0, 0, 200, 200)
GL.glMatrixMode(GL.GL_PROJECTION)
GL.glLoadIdentity()
GL.glOrtho(-1.0, 1.0, -1.0, 1.0, -1.0, 1.0)

GL.glClear(GL.GL_COLOR_BUFFER_BIT)
GL.glColor3f(1.0, 1.0, 0.0)
GL.glRectf(-0.8, -0.8, 0.8, 0.8)

# assume we got a double buffered fbConfig and show what we drew
GLX.glXSwapBuffers(d, w) 
```

现在我想从 X Pixmap 生成一个 OpenGL 纹理。所以我使用 pix = GLX.glXCreatePixmap() 而不是 w = GLX.glXCreateWindow()。

然后我写了

```
GLX.glXBindTexImageEXT(d, pix, GLX.GLX_FRONT_EXT, None) 
```

我得到一个错误： ctypes.ArgumentError: argument1: : expected LP_struct__XDisplay instance 而不是 LP_struct__XDisplay

glXBindTexImageEXT() 函数在我的 _GLX_NV.py 中定义（我有一张 NVidia 卡）。我认为问题来自 _GLX.py 和 _GLX_NV.py 中 struct__XDisplay 的双重定义

如果我通过以下方式更改 d：

```
display = _GLX_NV.glXGetCurrentDisplayEXT() 
```

我有一个 BadMatch，X_GLXVendorPrivate

你有什么想法，我如何解决我的问题并将 X11 Pixmap 传输到 python 中的 OpenGL 纹理？

# java - Java - 将观察者模式与计时器任务相结合？

> ID：15657398
> 
> 赞同：2
> 
> 时间：2013-03-27T11:09:41.037
> 
> 标签：java, design-patterns, timer, observer-pattern, timertask

在上一篇文章中，我使用了观察者模式。描述 -

类 Flight 有一个状态（即 int）——在时间之前，准时，迟到。这是我的 Observable 类 FlightStatusMonitor 有一个航班的 ArrayList。这个班级是我的观察者。这样的观察者只有一个。update(Observable o, Object arg) 方法将更新航班的状态，并显示它观察到的所有航班的刷新航班状态。

我正在考虑使用计时器任务来更改所选时间的航班状态，然后查看所有航班的更新状态。

我希望能够在计时器任务更改后立即看到屏幕上显示的航班状态。

但是，我不确定我这样做是否正确。并发在这里会是一个问题吗？

**更新** 我有一组航班，我将分批更改其状态。批量大小可以是 1 个航班或更多 - 1、5、15、22、45 等，但绝不是所有航班。我更改了一批的状态，几秒钟后我更改了另一批的状态等。一些航班保持不变。

[相关帖子](https://stackoverflow.com/questions/15594589/observer-observable-design-pattern-making-a-class-with-static-members-an-obser)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:16:07.457

只要`Observer`不使用任何可变状态变量，您就不会遇到并发问题。只有当您计划任务相交时，这也是一个问题。我的意思是在前一个任务完成之前开始一个任务。如果任务是按顺序启动的，那将不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T13:01:51.827

场景：在计时器事件上通知多个观察者。

方法 ：

*   创建看门狗类，它创建定时器和定时器任务。
*   观察者注册到看门狗事件。
*   计时器事件上的看门狗类通知观察者。

下面的示例代码展示了结合定时器任务和观察者的场景：

//看门狗.java

```
import java.util.Observable;
import java.util.Observer;
import java.util.Timer;
import java.util.TimerTask;

// Observer class

class Observer1 implements Observer{

@Override
public void update(Observable arg0, Object arg1) {
System.out.println("Observer1 notified");
}
}

// Watchdog Component which creates the timer and notifies the timers.

public class WatchDog extends Observable {
    Timer timer;
    int seconds;

   // Notify task to notify observers

    class NotifyTask extends TimerTask{

        @Override
        public void run() {
        setChanged();
        notifyObservers();
        }
    }

    public WatchDog( ) {
        timer = new Timer(); 
    }

    public void schedule(long seconds){
        timer.scheduleAtFixedRate(new NotifyTask(), 0, seconds*1000); //delay in milliseconds

    }

    public void stop(){
    timer.cancel();
    }

    public static void main(String args[]) throws InterruptedException {
        Observer1 observer1 = new Observer1();

        WatchDog watchDog = new WatchDog();
        // register with observer
        watchDog.addObserver(observer1);

        System.out.println("WatchDog is scheduled.");
        watchDog.schedule(5);
        Thread.sleep(25000);

        watchDog.stop();
    }
} 
```

有关完整的详细信息，请参阅文章：[Java 计时器和观察者](http://assortedtechnotes.blogspot.in/2015/06/java-timers-and-observers.html)

# jquery - Jquery 移动加载微调器不工作，永远不会消失

> ID：15657399
> 
> 赞同：0
> 
> 时间：2013-03-27T11:09:41.063
> 
> 标签：jquery, jquery-mobile

我的 jquery mobile 有问题。加载微调器不工作，并且持有它的方块永远不会消失。所以页面中间总是有一个空框。即使在页面完成加载之后。

广场的班级是`(ui-loader ui-corner-all ui-body-a ui-loader-default)` ，这里是`div`

```
<div class="ui-loader ui-corner-all ui-body-a ui-loader-default">
     <span class="ui-icon ui-icon-loading">
     </span>
     <h1>
        loading
     </h1>
</div> 
```

这些是我使用的 css/js 文件，我没有在其中写任何内容，它们都是生成的。

```
<link rel="stylesheet" href="mob_css/jquery.mobile-1.3.0.min.css" /> <--mobile css-->
<link rel="stylesheet" href="mob_css/alumni.css" /><--my theme css-->
<link rel="stylesheet" href="mob_css/jquery.mobile.custom.structure.min.css" /><--no idea-->
<!--<link rel="stylesheet" href="mob_css/jquery.mobile.custom.theme.min.css" />--><--no idea-->
<!--<link rel="stylesheet" href="my.css" />--><--empty css-->
<script src="js/jquery-1.8.3.min.js"></script><--jquery-->
<script src="js/jquery.mobile-1.3.0.min.js"></script><--mobile jquery-->
<script src="js/jquery.mobile.custom.min.js"></script><--no idea--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T06:22:00.133

`$.mobile.loading("hide")``setInterval`有时必须配合使用。它不在 API 中，但它可以工作。尝试这个。

```
var interval = setInterval(function () {
            $.mobile.loading('hide');
            clearInterval(interval);
        }, 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-19T19:23:09.087

这对我有用

```
$(".ui-loader").hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-03T13:47:34.367

尝试这个：-

```
function loading(showOrHide) {
   setTimeout(function(){
    $.mobile.loading(showOrHide);
  }, 1000);//make 1 second interval 
} 
```

从某个地方打电话：-

```
loading('show');
//do some stuff
loading('hide'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:04:49.220

您需要告诉 jQuery 何时显示/隐藏加载器。我使用这样的全局加载小部件

```
$( document ).bind( 'mobileinit', function(){
  $.mobile.loader.prototype.options.text = "loading";
  $.mobile.loader.prototype.options.textVisible = false;
  $.mobile.loader.prototype.options.theme = "a";
  $.mobile.loader.prototype.options.html = "";
}); 
```

然后你可以像这样展示它

```
$.mobile.loading("show"); 
```

并像这样隐藏它

```
$.mobile.loading("hide"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-12T10:48:45.150

试试这个... $.mobile.showPageLoadingMsg("show", "Loading..."); 或者

$.mobile.showPageLoadingMsg("show", "正在加载主题...");

# java - 如何在循环中优化休眠方法调用？

> ID：15657400
> 
> 赞同：0
> 
> 时间：2013-03-27T11:09:41.507
> 
> 标签：java, spring, hibernate, optimization, jpa

我有一个使用 spring+hibernate 构建的 java web 应用程序。

我有这样的代码：

```
for (Account account : accountList){

    Client client = clientService.findById(account.getFkClient());  // fkClient is foreign key to Client

    if (client != null) {
        ...
        anObject.setName(client.getName());
        anObject.setAccountNo(account.getAccountNo());  
        ...
    }
    else {
        ...
        anObject.setAccountNo(account.getAccountNo());
        ...
    }

    ...
} 
```

accountList 是从休眠调用中检索到的 Account 实体的列表。在 for 循环中，使用**clientService.findById**方法中的休眠调用从帐户中检索客户端实体。

这些是调用所涉及的类：

```
public class ClientService implements  IClientService {
    private IClientDAO clientDAO;

    ...

    @Override
    public Client findById(Long id) throws Exception {
        return clientDAO.findById(id);
    }
}

public class ClientDAO extends AbstractHibernateDAO<Client, Long> implements IClientDAO {

    @Override
    public Client findById(Long id) throws Exception {
        return super.findById(id);
    }
}

public class AbstractHibernateDAO<T,Y extends Serializable> extends HibernateDaoSupport {

    protected Class<T> domainClass = getDomainClass();

    private Class<T> getDomainClass() {
        if (domainClass == null) {
            ParameterizedType thisType = (ParameterizedType) getClass().getGenericSuperclass();
            domainClass = (Class<T>) thisType.getActualTypeArguments()[0];
        }
        return domainClass;
    }

    public T findById(final Y id) throws SystemException {
        return (T) this.execute(new HibernateCallback<T>() {

            @Override
            public T doInHibernate(Session session) throws HibernateException, SQLException {
                return (T) session.get(domainClass, id);
            }
        });
    }
} 
```

注意：clientService 和 clientDAO 是 spring beans 对象。

我的问题是如何使用休眠优化循环内的clientService.findById？我觉得 findById 调用使​​循环过程变慢。

accountList 通常包含 7000+ 条记录，所以我需要类似 jdbc 中的 PreparedStatements 之类的预编译查询机制。可以用休眠来做到这一点吗？

注意：上面的代码已经通过删除不相关的部分进行了简化，出于隐私原因，方法、变量和类名都是虚构的。如果您发现错字，请在评论部分告诉我，因为我手动输入了代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:42:52.637

我找到了最好的解决方案。我把从表 Account 和 Client 中选择列的查询合并到一个视图 (VIEW_ACCOUNT_CLIENT) 中，然后我为视图创建实体类 (AccountClientView) 并使用 hibernate 获取它，结果是哇，它大大提高了性能。使用真实代码，大概需要 15-20 分钟才能完成循环，而使用 View，只需 8-10 秒

```
@Entity
@Table(name = "VIEW_ACCOUNT_CLIENT")
public class AccountClientView implements Serializable {

    ...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:27:26.680

在 Hibernate/JPA 中，您可以使用 Hibernate 查询语言/JPA 查询语言编写查询并创建 NamedQueries。NamedQuery 在服务器启动时编译，因此您可以将其视为某种准备好的语句。

您可以尝试编写 HQL 查询，该查询可以通过单个查询获取所有实体实例。

我将在 JPQL 中为您提供示例，但您也可以使用 HQL 编写它。

```
@NamedQueries({
    @NamedQuery(name = "QUERY_BY_ID",
    query = "SELECT u from SomeEntity se WHERE se.id IN (:idList)"),
})
class SomeEntity {
}

class SomeEntityDao {
    public List<SomeEntity> findIdList(List<Long> idList) {
        Query query = entityManager.createNamedQuery("QUERY_BY_ID");
        query.setParameter("idList", idList);

        return query.getResultList();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:28:18.237

目前尚不清楚您想要实现什么。我不会循环进行服务调用。你为什么不使用一个`NamedQuery`？检索所有`Clients`附加到给定的`Accounts`，然后遍历该列表`Clients`。

```
SELECT c from Client c JOIN c.account a WHERE a.id IN (:accounIds) 
```

但这真的取决于业务需求！我也不清楚你为什么不打电话：

```
Client client = account.getClient(); 
```

您可能希望使用已获取的客户端加载您的 accountList。使用急切获取或[fetch join](http://docs.jboss.org/hibernate/orm/4.2/manual/en-US/html/ch16.html#queryhql-joins)。如果`Account`实体不包含 a `Client`，您应该有一个很好的理由。

# java - 重载 JFrame setTitle(String) 到 setTitle(int)

> ID：15657401
> 
> 赞同：2
> 
> 时间：2013-03-27T11:09:45.107
> 
> 标签：java, swing, jframe, overloading

我的教训是改变 JFrame 的 setTitle 方法，所以它允许整数作为参数。怎么做？我必须重载该方法，对吗？我在 setTitle 方法中尝试的任何操作都以堆栈溢出结束。

```
import javax.swing.*;

public class MyFrame extends JFrame
{       
    MyFrame()
    {
        super();
        setSize(400, 400); // Standard initial size
        setVisible(true);
        setDefaultCloseOperation(MyFrame.EXIT_ON_CLOSE);
    }

    MyFrame(int size)
    {
        this();
        setSize(size, size); 
    }

    public void setTitle(int title)
    {           

    }

}

public class MainClass 
{
    public static void main(String[] args) 
    {   
        MyFrame frame = new MyFrame();
        frame.setTitle(1000);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:03:12.383

在重载方法方面，您似乎走在了正确的轨道上。尝试：

```
public void setTitle(int title)
{           
    super.setTitle(""+title);
} 
```

我没有看到限制原始 String 参数的要求；这只是向您的子类添加另一个重载方法。

**注意：**同意罗宾的观点，这是一个有点奇怪和做作的例子......因为通常标题是一个字符串，所以为什么要改变它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:17:44.940

`setTitle`来自[JFrames API](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)的方法

```
public void setTitle(String title)
Sets the title for this frame to the specified string. 
```

然后`frame.setTitle("1000");`将是作品

# sql - 返回 varchar 的过程

> ID：15657402
> 
> 赞同：1
> 
> 时间：2013-03-27T11:09:45.367
> 
> 标签：sql, sql-server, tsql, stored-procedures, user-defined-functions

我试图创建一个返回的函数`varchar`，但我不能，因为我在`CREATE TABLE`里面使用，当我用一个过程创建它时，我不能返回一个值。

我想知道你是否有什么建议。

我这样做只是为了制作一个字符串，其中包含用“;”分隔的电子邮件 所以我可以将所有“经理”邮件放在一个 varchar 中（对于收件人）。

```
ALTER procedure [dbo].[Manager_email]
AS
BEGIN
    declare @mails varchar (max),
            @number_of_mails int,
            @counter int
    set @counter=2
    create table #temp ( id int identity, email varchar(30))
    insert into #temp (email)
    select Email
    from hr.Employees
    where lower (EmpRole) like 'manager'
    set @number_of_mails=@@ROWCOUNT
    set @mails = (select email from #temp where id =1 ) + ';'
    while @counter <= @number_of_mails
    BEGIN
        set @mails = @mails + (select email from #temp where id =@counter ) + ';'
        set @counter = @counter+1
    END
    drop table #temp
    return cast (@mails as varchar (200))
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:13:55.837

您只能从过程中返回整数值，如果您想从过程中返回 varchar 值，最好在过程中使用输出变量。

例子

```
CREATE PROCEDURE Sales.uspGetEmployeeSalesYTD
@SalesPerson nvarchar(50),
@SalesYTD money OUTPUT
AS  

    SET NOCOUNT ON;
    SELECT @SalesYTD = SalesYTD
    FROM Sales.SalesPerson AS sp
    JOIN HumanResources.vEmployee AS e ON e.BusinessEntityID = sp.BusinessEntityID
    WHERE LastName = @SalesPerson;
RETURN 
```

就像上面的程序`@SalesYTD`从程序返回一样。

您可以查看 MSDN 上的完整帖子：[**使用 OUTPUT 参数返回数据**](http://msdn.microsoft.com/en-IN/library/ms187004%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:19:48.613

您可以改用函数

```
CREATE FUNCTION Manager_email ()
RETURNS varchar(max)
AS
BEGIN
    declare @email varchar(30)
    declare @emails varchar(max)

    set @emails = ''

    declare cur cursor for
    select Email
    from hr.Employees
    where lower (EmpRole) like 'manager'

    open cur

    fetch next from cur into @email

    while @@fetch_status = 0 
    begin
        set @emails = @emails + @email + ';'
        fetch next from cur into @email
    end

    close cur
    deallocate cur

    return @emails
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T21:17:19.323

您可以使用表变量而不是临时表。在这种情况下，您可以继续使用 UDF。

# transactions - 同步链接

> ID：15657405
> 
> 赞同：0
> 
> 时间：2013-03-27T11:10:01.633
> 
> 标签：transactions, ejb-3.1

在调用 EJB TotoCacheBean 期间发生系统异常，

> 方法：public void ...TotoCacheBean.refreshAlertCache() ...：注意：javax.ejb.EJBException：事务中止原因：com.sun.jts.jta.TransactionManagerImpl.commit(TransactionManagerImpl.java) 处的 javax.transaction.RollbackException :334)

```
@Singleton
@PersistenceContext(name = "persistence/popul", unitName = "popul")
@TransactionAttribute(value = TransactionAttributeType.SUPPORTS)
@ConcurrencyManagement(ConcurrencyManagementType.BEAN)
@Startup
public class TotoCacheBean
{
    private final ReadWriteLock lock    = new ReentrantReadWriteLock();

@Inject
private MessageDAO messageDAO;

public enum Type
{
    ALERT, GLOBAL
};

private Map<Type, TotoCache>    cacheStorage;

@PostConstruct
public void postConstruct() throws DAOException
{
    refreshAlertCache();
    refreshGlobalCache();
}

@Schedule(second = "*/20", minute = "*", hour = "*", persistent = false)
public void refreshAlertCache() throws DAOException
{
    refreshCache(Type.ALERT);
}

@Schedule(second = "10", minute = "*", hour = "*", persistent = false)
public void refreshGlobalCache() throws DAOException
{
    refreshCache(Type.GLOBAL);
}       

private void refreshCache(Type type) throws DAOException
{
    Date now = DateTools.getDate();
    LinkedHashMap<String, LinkedHashMap<String, ActMessDTO>> messages = messageDAO.getActMessSorted(now, (type == Type.ALERT));
    setCache(type, new TotoCache(messages, now));
}

public TotoCache getCache(Type type)
{
    lock.readLock().lock();

    try
    {
        return getCacheStorage().get(type);
    }
    finally
    {
        lock.readLock().unlock();
    }
}

private void setCache(Type type, TotoCache cache)
{
    lock.writeLock().lock();

    try
    {
        getCacheStorage().put(type, cache);
    }
    finally
    {
        lock.writeLock().unlock();
    }
}

private Map<Type, TotoCache> getCacheStorage()
{
    if (this.cacheStorage == null)
        this.cacheStorage = new HashMap<Type, TotoCache>();

    return this.cacheStorage;
} 
```

}`

你有一些想法来解决这个问题吗？LinkedHashMap 不同步，但我不想更改它，因为它会更改超过 10 个类。但如果这是我会这样做的原因。或者问题是使用读写锁？谢谢你的把戏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:27:26.487

您正在使用`ConcurrencyManagementType.BEAN`&`TransactionAttributeType.SUPPORTS`一起，这是矛盾的。

从文档：

> 只有在使用容器管理的事务分界时才能指定。

使用界面`ConcurrencyManagementType.CONTAINER`手动拥有或管理事务。`UserTransaction`

请参阅[此处](http://docs.oracle.com/javaee/6/api/javax/ejb/TransactionAttributeType.html)了解各种属性类型并根据您的要求应用。

> LinkedHashMap 不同步...

默认情况下，带有 的 bean`@Singleton`将具有`LockType.WRITE`.

> LockType.WRITE ：用于对 bean 实例的独占访问。

当客户端调用该方法时，单例会话 bean 将被锁定到其他客户端。因此，不需要对并发进行显式控制。

# vbscript - 带有电话簿条目的 vbs rasdial

> ID：15657407
> 
> 赞同：0
> 
> 时间：2013-03-27T11:10:18.113
> 
> 标签：vbscript, connect, vpn

有人可以帮我完成我的小项目吗？我没有得到正确的代码...

当使用标准电话簿时，带有用户名和密码的 rasdial 起作用了。唯一的事情是在脚本中绑定另一个电话簿来拨号。

这是我的例子：

```
Set WshShell = WScript.CreateObject("WScript.Shell")

vbConnectionName = "test"
vbConnectionUser = "user"
vbConnectionPassword = "pass"
vbConnectWith = "rasdial" & " """ & vbConnectionName & """ """ & vbConnectionUser & """ """ & vbConnectionPassword & """ /phonebook:"%programfiles%\test program\rasphone.pbk"" 
```

我希望这是可以理解的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:54:42.477

最后一个论点的引用是不正确的。你有这个：

```
... & """ /phonebook:"%programfiles%\test program\rasphone.pbk"" 
```

但你需要这个：

```
... & """ /phonebook:""%programfiles%\test program\rasphone.pbk""" 
```

使用引用函数有助于避免引用融合：

```
Function qq(str)
  qq = Chr(34) & str & Chr(34)
End Function

'...

vbConnectWith = "rasdial " & qq(vbConnectionName) _
  & " " & qq(vbConnectionUser) _
  & " " & qq(vbConnectionPassword) _
  & " /phonebook:" & qq("%programfiles%\test program\rasphone.pbk") 
```

# c# - 输入字符串的格式不正确 asp.net c#

> ID：15657408
> 
> 赞同：1
> 
> 时间：2013-03-27T11:10:22.443
> 
> 标签：c#, asp.net

我有一个网格，它正在向用户显示这是有效的。您可以单击编辑（图像按钮）或删除（图像按钮）来执行操作。但是如果我点击这些，我会得到一个

> 输入字符串的格式不正确

这不应该发生——我没有看到我的错误。问题是什么？

这是我的网格：

```
<asp:EntityDataSource ID="EntityDataSource1" runat="server"
    ConnectionString="name=HolidayTrackerEntities"
    DefaultContainerName="HolidayTrackerEntities" EnableFlattening="False"
    EntitySetName="HtUsers">
</asp:EntityDataSource>
<telerik:RadGrid ID="rgGrid" runat="server" DataSourceID="EntityDataSource1"
    AllowSorting="True" AllowPaging="True" PageSize="20" 
    AllowFilteringByColumn="True" ShowStatusBar="True" Width="100%" 
    CellSpacing="0" GridLines="None" OnItemCommand="rgGrid_ItemCommand">
    <MasterTableView AutoGenerateColumns="False" DataKeyNames="UserId">
        <NoRecordsTemplate>
            Can't find Users to display
        </NoRecordsTemplate>
        <Columns>
            <telerik:GridBoundColumn DataField="UserId" DataType="System.Int32"
                FilterControlAltText="Filter UserId column" HeaderText="UserId" 
                ReadOnly="True" SortExpression="UserId" UniqueName="UserId"
                Visible="false">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="FirstName"
                FilterControlAltText="Filter FirstName column"
                HeaderText="FirstName" ItemStyle-Width="60px"
                SortExpression="FirstName" UniqueName="FirstName">
                <ItemStyle Width="60px" />
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="LastName"
                FilterControlAltText="Filter LastName column"
                HeaderText="LastName" ItemStyle-Width="60px" 
                SortExpression="LastName" UniqueName="LastName">
                <ItemStyle Width="60px" />
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="UserName"
                FilterControlAltText="Filter UserName column"
                HeaderText="UserName" ItemStyle-Width="60px"
                SortExpression="UserName" UniqueName="UserName">
                <ItemStyle Width="60px" />
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="Email"
                FilterControlAltText="Filter Email column"
                HeaderText="Email" SortExpression="Email" UniqueName="Email"
                Visible="False">
            </telerik:GridBoundColumn>
            <telerik:GridTemplateColumn UniqueName="DeleteColumn" 
                ItemStyle-HorizontalAlign="Right" ItemStyle-Width="20px"
                AllowFiltering="false">
                <ItemTemplate>
                    <telerik:RadButton ID="btnEdit" CommandName="Edit" runat="server" Width="20px" ToolTip="View Details" Height="20px">
                        <Image ImageUrl="~/Resources/Images/Grid/edit-app.png" IsBackgroundImage="true" />
                    </telerik:RadButton>
                </ItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn UniqueName="Delete"
                ItemStyle-HorizontalAlign="Right" ItemStyle-Width="20px"
                AllowFiltering="false" FilterImageUrl="../Image/Filter.gif">
                <ItemTemplate>
                    <telerik:RadButton ID="btnDelete" CommandName="Delete" runat="server" Width="20px" ToolTip="Delte User" Height="20px">
                        <Image ImageUrl="~/Resources/Images/Grid/delete-app.png" IsBackgroundImage="true" />
                    </telerik:RadButton>
                </ItemTemplate>
            </telerik:GridTemplateColumn>
        </Columns>
    </MasterTableView>
</telerik:RadGrid> 
```

正如我所说，没有什么特别的。以下是后面代码中的按钮：

```
protected void rgGrid_ItemCommand(object sender, GridCommandEventArgs e)
{
    if (e.CommandName.Equals("Edit"))
    {
        int id = int.Parse(e.Item.Cells[2].Text);
        Response.Redirect("~/Administrator/UserEditPanel.aspx?userId=" + id);
    }
    else if (e.CommandName.Equals("Delete"))
    {
        int id = int.Parse(e.Item.Cells[2].Text);
        HtUser.DeleteUserById(id);
    }
} 
```

我在用户类中的删除功能

```
public static void DeleteUserById(int id)
{
    HolidayTrackerEntities ctx = HtEntityFactory.Context;
    HtUser userToDelete = ctx.HtUsers.Where(user => user.UserId == id).FirstOrDefault();

    //Get all the userroles where user is containing
    IEnumerable<HtUserRole> roles = ctx.HtUserRoles.Where(ur => ur.HtUsers.Where(x => x.UserId == id).Any());
    foreach (HtUserRole role in roles)
    {
        //Remove reference from htuserroles table
        role.HtUsers.Remove(userToDelete);
    }

    ctx.HtUsers.DeleteObject(userToDelete);
    ctx.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:13:07.463

`e.Item.Cells[2]`是带有 的单元格`DataField="LastName"`。所以我假设这不是一个有效的整数。您将 id 存储在第一列中，因此您需要：

```
protected void rgGrid_ItemCommand(object sender, GridCommandEventArgs e)
{
    if (e.CommandName.Equals("Edit"))
    {
        int id = int.Parse(e.Item.Cells[0].Text);
        Response.Redirect("~/Administrator/UserEditPanel.aspx?userId=" + id);
    }
    else if (e.CommandName.Equals("Delete"))
    {
        int id = int.Parse(e.Item.Cells[0].Text);
        HtUser.DeleteUserById(id);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:52:29.577

与其解析列文本，更好的方法是将 分配`UserId`给编辑和删除按钮的`CommandArgument`属性，然后将其解析为`rgGrid_ItemCommand`. 分配`UserId`给按钮：

```
<telerik:GridTemplateColumn UniqueName="DeleteColumn" ItemStyle-HorizontalAlign="Right" ItemStyle-Width="20px" AllowFiltering="false">
    <ItemTemplate>
        <telerik:RadButton ID="btnEdit" CommandName="Edit" runat="server" Width="20px" ToolTip="View Details"
       Height="20px" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "UserId")%>'>
            <Image ImageUrl="~/Resources/Images/Grid/edit-app.png" IsBackgroundImage="true" />
        </telerik:RadButton>
    </ItemTemplate>
</telerik:GridTemplateColumn> 
```

然后在您的代码隐藏中：

```
protected void rgGrid_ItemCommand(object sender, GridCommandEventArgs e)
{
    var userId = int.Parse(e.CommandArgument.ToString());

    if (e.CommandName.Equals("Edit"))
    {
        Response.Redirect("~/Administrator/UserEditPanel.aspx?userId=" + userId);
    }
    else if (e.CommandName.Equals("Delete"))
    {
        HtUser.DeleteUserById(userId);
    }
} 
```

# php - Doctrine\ORM\Query\QueryException - 错误：预期的字符串结尾，得到 'WHERE'

> ID：15657409
> 
> 赞同：-1
> 
> 时间：2013-03-27T11:10:26.087
> 
> 标签：php, doctrine-orm, dql

我正在使用一个功能来获取图库中的下一张照片：

```
$q = "SELECT i FROM GalleryModule\Image i WHERE i.id = (SELECT MIN(p.id) FROM GalleryModule\Image p WHERE p.id > :id ORDER BY p.position, p.id DESC) WHERE i.gallery = :gallery";
    $query = $this->getEntityManager()->createQuery($q);
    $query->setMaxResults(1);
    $query->setParameters(array(
        'id' => $image->getId(),
        'gallery' => $image->getGallery()->getId()
    ));
    return $query->getOneOrNullResult(); 
```

我仍然面临的错误：

```
Doctrine\ORM\Query\QueryException 
```

[语法错误] 第 0 行，第 143 列：错误：预期的字符串结尾，得到 'WHERE'

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:14:26.987

你有多个 where's

也许你的意思是：

```
SELECT i FROM GalleryModule\Image i 
WHERE i.id = 
    (SELECT MIN(p.id) 
    FROM GalleryModule\Image p 
    WHERE p.id > :id ORDER BY p.position, p.id DESC) 
AND i.gallery = :gallery 
```

# ios - 将演示用户信息提供给生产环境的 iOS 应用程序审核团队是否合适？

> ID：15657412
> 
> 赞同：-1
> 
> 时间：2013-03-27T11:10:29.433
> 
> 标签：ios, iphone

今天他们拒绝了我的应用程序，并希望演示用户信息登录并手动测试应用程序。我不想在 prod 环境中创建演示用户并允许对测试人员进行愚蠢的操作。所有用户都相互连接，其他用户将看到测试人员的操作。我该如何解决这个问题，你对这种情况的策略是什么？

**补充：**我不想编写额外的代码并测试它以获得成功的 iPhone 审查。这没有意义。我们有一个**测试**环境。如何使用此环境进行审核？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:17:26.127

我们有时会执行一个测试用户，其操作在预定时间（1 小时、1 天，取决于环境的敏感性）后被清除/删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:43:52.113

我不认为有任何办法绕过他们的要求。这是一个黑匣子，但我认为他们没有时间做更多的事情，只是测试用户期望的正常功能以及一些边缘情况（应用程序如何对电话做出反应等），所以我'我不确定你期待看到什么。如果您不想更改任何代码，最好的选择似乎是将发布日期设置为手动（而不是在完成审核后立即发布应用程序），然后在确认发布之前重置您的生产服务器. 在它发布之前，其他用户将无法下载该应用程序并与之交互。不过，您可能仍需要提供测试帐户才能进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:12:30.690

你有两个选择：

1）创建一个不会将其更改保存到服务器的特殊帐户

2）不要在应用商店发布应用

# php - CodeIgniter 在单个 onclick 函数上加载两个视图

> ID：15657414
> 
> 赞同：0
> 
> 时间：2013-03-27T11:10:37.587
> 
> 标签：php, codeigniter, jquery

我想通过单击 onclick 功能加载 2 个视图。

我正在使用 codeigniter，我想通过 ajax 加载视图。

所以想知道如何通过单击加载加载两个视图，并且它们都应该加载到不同的 div 中？

我设法在单个 div 中只加载一个。但坚持决定如何加载两个视图。

这是我到目前为止所做的。

```
<a href='#' id=\"mnu_btn_user_accounts\" onclick=\"javascript:loadmenu('".base_url()."index.php/".$arLeftMenuList[$key]['FormCIPath']."')\"> 
```

下面是onload的功能

```
<script type='text/javascript' language='javascript'>

    function loadmenu(str){
        $.ajax({
            type: "POST",
            url: str,    
            success: function(output_string){    
                $('.second_column_content_container').html(output_string);    
            }    
        });
}
</script> 
```

我给定的问题有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:17:44.627

onClick 不是必需的，也不建议使用 jQuery，只需将两个路径设置为链接中的单独类，然后在 click 函数上检索链接中的类并将它们传递给您的 ajax 调用。

```
 <a href="#" id=\"mnu_btn_user_accounts\" class="link '.$arLeftMenuList[$key]['FormCIPath'].' '.$otherPath">Click Me</a>

<script type='text/javascript' language='javascript'>
    $(".link").on("click", function(){
        var url1 = <?=base_url()."index.php";> + $(this).attr('class').split(' ')[1];
        var url2 = <?=base_url()."index.php";> + $(this).attr('class').split(' ')[2];
        loadmenu(url1, url2)
    {
    function loadmenu(url1, url2){
        $.ajax({
            type: "POST",
            url: url1,    
            success: function(output_string){    
                $('.second_column_content_container').html(output_string);    
            }    
        });
        $.ajax({
            type: "POST",
            url: url2,    
            success: function(output_string){    
                $('.other_content_div').html(output_string);    
            }    
        });
}
</script> 
```

# opencv - OpenCV 机器学习输出 Type I 和 Type II 错误

> ID：15657416
> 
> 赞同：0
> 
> 时间：2013-03-27T11:10:43.010
> 
> 标签：opencv, machine-learning

这是我第一次在 OpenCV 中使用机器学习功能。我使用了 Boost 算法，我认为它效果很好。`calc_error`然而，这个函数只给出错误，没有错误类型，这很烦人。我的意思是：

> 第一类误报、误报

或者

> 类型 II 缺少目标

OpenCV 也可以给出错误类型吗？太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:22:56.470

在您的测试实例上使用[`predict`](http://docs.opencv.org/modules/ml/doc/boosting.html#cvboost-predict)，循环所有测试实例并将结果与​​真实类进行比较，以自己查找类型 1/类型 2 错误（或精度和准确性，在机器学习中更常见的相关概念）。

表达这个想法的一些伪代码：

```
true_positive = 0
false_positive = 0
true_negative = 0
false_negative = 0

For i in 1..N:
    test_instance = test_set[i]

    true_class = labels[i]
    predicted_class = predict(test_instance, ... )

    if true_class = True and predicted_class == True
        true_positive += 1
    elseif true_class == False and predicted_class == True
        false_positive += 1
    elseif true_class == True and predicted_class == False
        false_negative += 1
    elseif true_class == False and predicted_class == False
        true_negative += 1
    end

type_I_error = false_positive/N
type_II_error = false_negative/N 
```

# objective-c - 新推送通知到达时重置服务器端徽章计数器

> ID：15657420
> 
> 赞同：0
> 
> 时间：2013-03-27T11:10:50.247
> 
> 标签：objective-c, c, xcode

我目前正在为我的 iOS 应用程序开发推送通知服务。

通知将使用徽章正确推送到设备。阅读通知后，我可以清除图标中的徽章计数。但是，当新通知到达时，徽章计数会增加先前的计数。

如何使用 UIApplication 委托清除服务器端的徽章计数器？请给我一些提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:48:09.703

在您的 AppDelegate 中，使用以下代码：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    application.applicationIconBadgeNumber = 0;
} 
```

# java - 在 doInBackground 中创建另一个 AsyncTask

> ID：15657424
> 
> 赞同：1
> 
> 时间：2013-03-27T11:11:10.873
> 
> 标签：java, android, asynchronous, android-asynctask

我最近通过 SO 在这里找到[了相同问题](https://stackoverflow.com/questions/7607399/executing-a-thread-inside-asynctasks-doinbackground)的答案，但没有针对这样做的风险的问题的答案。但基本上我想在 another`AsyncTask`的`doInBackground()`方法中运行 another `AsyncTask`。这是一种不好的方法和/或是否会留下任何潜在的副作用？

我知道在`onPostExecute()`工作中运行它，到目前为止，从过去的经验来看，我没有遇到任何问题，因为`onPostExecute()`它在开始的主线程上运行`AsyncTask`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:15:08.327

从 API 文档：

> • 任务实例必须在 UI 线程上创建。

doInBackground() 在后台线程上运行。所以你不能从 doInBackground() 创建和运行另一个异步任务。

[http://developer.android.com/reference/android/os/AsyncTask](http://developer.android.com/reference/android/os/AsyncTask)。查看**线程规则下的主题。**

执行异步任务时，任务经过 4 个步骤：（直接来自 doc）

1.onPreExecute()，在任务执行前在UI线程上调用。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。

2\. **doInBackground(Params...)，**在 onPreExecute() 执行完成后立即在后台线程上调用。此步骤用于执行可能需要很长时间的后台计算。异步任务的参数传递到这一步。计算的结果必须由这一步返回，并将传递回最后一步。此步骤还可以使用 publishProgress(Progress...) 来发布一个或多个进度单位。这些值在 UI 线程上的 onProgressUpdate(Progress...) 步骤中发布。

3.onProgressUpdate(Progress...)，在调用 publishProgress(Progress...) 后在 UI 线程上调用。执行的时间是不确定的。此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度。例如，它可用于动画进度条或在文本字段中显示日志。

4.onPostExecute(Result)，后台计算完成后在UI线程上调用。后台计算的结果作为参数传递给该步骤。

首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。

**如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。**

您也可以考虑使用**替代 RoboSpice**。[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)。

可以提出多个香料请求。任务完成时在 ui 线程上通知。值得一看 robospice。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:15:31.893

AsyncTask()，除了 Honeycomb 版本，串行执行。所以，不，你不能从 doInBackground() 中执行另一个 AsyncTask() ——我想我应该说我从未尝试过，但你不太可能达到预期的效果。

我询问了在 Google 办公时间之一执行 AsyncTask() 的情况。当被问到“为什么它从串行变为并行并返回到串行执行？”时，他们直截了当地说；“因为它弄坏了很多东西。”

# html - 加载时页面在中间滚动

> ID：15657426
> 
> 赞同：0
> 
> 时间：2013-03-27T11:11:30.807
> 
> 标签：html, scroll, anchor

我不知道为什么，但是当我的页面加载时，我在中间滚动，但我没有针对这一点的任何锚点......
现在我必须`<a href='MY-URL#top'></a>`在每个页面中放置一个锚点，以免滚动中间......（Firefox 甚至没有得到它们：0，-webkit 浏览器......）
我有很多针对 id 的锚点，还有一个用于平滑滚动的 JQuery 脚本，但没有一个用于页面中间滚动的加载。

你可以在这里看到：

[http://www.groupae.be/ediser/2.0/nos_produits.php](http://www.groupae.be/ediser/2.0/nos_produits.php)

什么会在加载时触发滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-27T10:02:19.620

如果页面足够长可以滚动并且如果您将焦点设置在某个元素上（例如，对于辅助功能），浏览器会以焦点元素位于屏幕中间的方式滚动页面（如果滚动允许这样做，如果不是它会尽可能滚动）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T16:22:25.907

没关系，我找到了为什么要滚动，只是页脚表单中的自动对焦...：/

# asp.net - 如何向用户显示“NEXT”x 个项目？

> ID：15657429
> 
> 赞同：0
> 
> 时间：2013-03-27T11:11:37.170
> 
> 标签：asp.net, asp.net-mvc-3, sql-server-ce-3.5

我正在学习MVC。我正在为演示创建一个简单的网站，它将产品存储在数据库中并向用户显示每页 10 个。现在，如何从数据库中获取“NEXT”10/20 项？我想将自动增量列添加到表中，然后在其基础上获取项目。这是正确的方法吗？此外，我通过获取一个 int 值作为控制器函数 Products(int id) 的参数来记录向用户显示了多少项目。这是正确的方法吗？我的意思是如果用户在第 5 页（因此 id==5）并刷新页面，它会起作用吗？（或者它将 id 设置回 0？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:21:07.087

您可以使用 linq 查询来获取表中的项目数。您可以传递项目数，开始索引。那么查询将是这样的

```
var nextProduct = myProducts.Skip(100).Take(10); 
```

它将返回从 101 到 110 的 10 个项目。

根据 id 获取数据不是一个好主意。因为如果你删除任何记录，计数和 ID 都会有所不同。所以你可以使用上面的代码概念

# javascript - 无法编辑的输入字段中的 Onblur 和 Onfocus

> ID：15657431
> 
> 赞同：0
> 
> 时间：2013-03-27T11:11:44.077
> 
> 标签：javascript, html, dom, javascript-events

我有一个这样的输入字段：

```
 <input class="" type="text" id="Name_11_1" name="Name" value="Your name:"> 
```

并想将其更改为：

```
<input class="" type="text" id="Name_11_1" name="Name" value="Your name:" onblur="this.value = this.value || this.defaultValue;" onfocus="this.value == this.defaultValue && (this.value = '');"Your name:"> 
```

问题是我不能直接编辑输入字段并且必须使用外部 javascript 代码，但我的 js 级别是 inder 新手，所以每一个帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:24:07.883

使用 jQuery：

```
 <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
        $(function() {
            $('#Name_11_1').blur(function() {
                $(this).val(YOUR_EXPR); 
            });

            $('#Name_11_1').focus(function() {
               $(this).val(YOUR_EXPR); 
             });
        });
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:28:27.723

首先删除现有的事件处理程序，然后附加您自己的：

```
var obj = document.getElementById('Name_11_1');

obj.removeAttribute('onfocus');
obj.removeAttribute('onblur');

obj.addEventListener('blur', function() {
    // your js code for blur event
});
obj.addEventListener('focus', function() {
    // your js code for focus event
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T11:32:41.123

如果浏览器理解标签`placeholder`上的属性`input`，您可以使用它：

```
<input id="foo" name="foo" placeholder="Your name"> 
```

然后，您可以添加 JavaScript 为其他浏览器提供后备：

```
if (!'placeholder' in document.createElement('input')) {
    $('#foo').on('focus', function() {
        // your code
    }).on('blur', function() {
        // your code
    });
} 
```

**更新**：忘记了 OP 不能`input`直接编辑标签。在这种情况下，代码片段可以修改为如下内容：

```
var elem = $('#Name_11_1'),
    defaultValue = 'Your name';

if ('placeholder' in document.createElement('input')) {
    elem.attr('placeholder', defaultValue);
} else {
    elem.on('focus', function() {
        // your code
    }).on('blur', function() {
        // your code
    });
} 
```

# linux - 在linux中将文件名添加到文件的第一行

> ID：15657435
> 
> 赞同：1
> 
> 时间：2013-03-27T11:11:56.447
> 
> 标签：linux, cat

我有很多这样的文件

```
 1   rs10488368     180568    T        ADD       11     -2.714       -7.016    6.213e-05    
 1    rs2906334     189547    C        ADD       11     -2.714       -7.016    6.213e-05   
 2   rs10092114     190451    T        ADD       11     -2.714       -7.016    6.213e-05    
 3    rs2906347     198834    C        ADD       11     -2.714       -7.016    6.213e-05 
```

像这样命名 plinky.P1.assoc.linear、plinky.P2.assoc.linear 等...

我使用`cat *.assoc.linear > all_files.tx`t 将它们全部组合在一起，但最后我不知道哪一行来自哪个文件......

所以我希望得到一个包含所有文件（plinky.P1.assoc.linear、plinky.P2.assoc.linear 等）的文件，如下所示：

```
 1   rs10488368     180568    T        ADD       11     -2.714       -7.016    6.213e-05  plinky.P1.assoc.linear    
   1    rs2906334     189547    C        ADD       11     -2.714       -7.016    6.213e-05  plinky.P1.assoc.linear       
   1   rs10092114     190451    T        ADD       11     -2.714       -7.016    2.253e-04  plinky.P1.assoc.linear    
   1    rs2906347     198834    C        ADD       11     -2.714       -7.016    6.213e-05  plinky.P1.assoc.linear    
   1   rs10488368     180568    T        ADD       11     -2.714       -7.016    4.513e-05  plinky.P2.assoc.linear    
   1    rs2906334     189547    C        ADD       11     -2.714       -7.016    6.913e-05  plinky.P2.assoc.linear    
   2   rs11988064     190422    C        ADD       11     -1.292       -1.329       0.2165  plinky.P2.assoc.linear    
   2   rs10092114     190451    T        ADD       11     -2.714       -7.016    6.213e-05  plinky.P3.assoc.linear    
   3    rs2906347     198834    C        ADD       11     -2.714       -7.016    6.213e-05  plinky.P3.assoc.linear    
   4   rs11782267     201877    C        ADD       11     -1.292       -1.329       0.2165  plinky.P3.assoc.linear    
   8    rs3008268     202123    T        ADD       11       -1.9        -1.25       0.2428  plinky.P3.assoc.linear    
   8   rs10435671     202498    T        ADD       11       -1.9        -1.25       0.2428  plinky.P3.assoc.linea 
```

r

ETC...

但是在我看来很难做到，所以不知道这是否可行......

谢谢你的帮助！

弗洛里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:28:46.040

该解决方案结合`cat`了`sed`所需的输出

```
for f in *.txt ; do cat $f | sed 's/$/ '$f'/'  >> all_files.txt; done 
```

# php - PHP 脚本耗时过长且超时

> ID：15657439
> 
> 赞同：0
> 
> 时间：2013-03-27T11:12:14.273
> 
> 标签：php, mysql, phpmyadmin, payment-gateway

当我将下面的函数添加到我的 PHP 页面时，尝试执行脚本超时。它出什么问题了？

```
include ('config.php');

function GenerateTransID() {    
    $unique_ref_length = 9;  
    $unique_ref_found = false;  
    $possible_chars = "23456789BCDFGHJKMNPQRSTVWXYZ";  
    while (!$unique_ref_found) {  
        $unique_ref = "";  
        $i = 0;  
        while ($i < $unique_ref_length) {  
            $char = substr($possible_chars, mt_rand(0, strlen($possible_chars)-1), 1);  
            $unique_ref .= $char;  
            $i++;  
        }

        $tmp_id = "TR-" . $unique_ref;
        $unique_ref = $tmp_id;
        $query = "SELECT `transactionID` FROM `payment` WHERE `transactionID`='$unique_ref'";  
        $result = mysql_query($query) or die(mysql_error().' '.$query); 

        if (mysql_num_rows($result)==0) {  
            $unique_ref_found = true;  

        }  

    }  
    return $unique_ref;         
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:31:46.990

该函数只会返回 if `mysql_num_rows($result) == 0`，这在程序超时之前可能不会发生。

尝试在 if 中添加一个 echo 以查看它是否被执行。如果我是你，我会看看生成 GUID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:28:10.357

可能是 SQL 查询。但是，除非您对其进行分析，否则您永远不会知道。检查 xdebug：

[http://xdebug.org/](http://xdebug.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:15:13.627

更改为以下内容：-

```
function GenerateTransID() {    
    $unique_ref_length = 9;  
    $unique_ref_found = false;  
    $possible_chars = "23456789BCDFGHJKMNPQRSTVWXYZ";
    while (!$unique_ref_found) {  
        $unique_ref = "";  
        for($i = 0; $i < $unique_ref_length; $i++) {  
            $char = substr($possible_chars, mt_rand(0, strlen($possible_chars)-1), 1);  
            $unique_ref .= $char;  
        }

        $tmp_id = "TR-" . $unique_ref;
        $unique_ref = $tmp_id;
        $query = "SELECT `transactionID` FROM `payment` WHERE `transactionID`='$unique_ref'";  
        $result = mysql_query($query) or die(mysql_error().' '.$query); 

        if(mysql_num_rows($result)==0)
        {
            $unique_ref_found = true;  
        }
    }
    return $unique_ref;
} 
```

做了一些代码改进。除此之外，该功能应该按预期工作。您还有另一个与此代码无关的问题，很可能是由于某些其他代码或您的数据库连接造成的。

# ember.js - 如何在 Ember 中获取当前/上一个视图名称

> ID：15657440
> 
> 赞同：1
> 
> 时间：2013-03-27T11:12:15.167
> 
> 标签：ember.js, viewmodel, traversal, browser-history

我是一个项目，我需要能够访问上一个视图的名称。

因此，例如，如果我在第 1 页并导航到第 2 页，我想知道我来自第 1 页。

基本上我有一个可以从多个屏幕访问的视图，该视图的内容将取决于来自的屏幕。

我知道我可以通过在函数中传递名称来做到这一点，但我想知道是否有更好的方法来做到这一点。

我尝试了一些历史位置类的实现，但我可以让它工作。每次我创建历史位置的实例时，都会将 url 发送回基本 url，这很奇怪。

我还看到可能有一种方法可以通过添加在路由器中执行此操作

```
location: 'history' 
```

但我不知道如何让它开始工作，然后访问正确的视图名称，即当前/上一个

我猜也有一种方法可以通过浏览器历史记录来实现这一点，但我希望用 Ember 来实现。任何人有任何想法如何让这些工作或更好的方法来做到这一点？

# apache - ModRewrite：QUERY_STRING 未重定向

> ID：15657442
> 
> 赞同：0
> 
> 时间：2013-03-27T11:12:16.190
> 
> 标签：apache, mod-rewrite

我有以下重写规则：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ^manufacturer=&
RewriteRule (.*) $1? [R=410,L] 
```

但这似乎不起作用。我正在尝试使用 URL 的“喜欢 `http://www.example.com/?manufacturer=someone`”`http://www.example.com/`和`page.php?manufacturer=someone`“到”重定向`page.php`

我究竟做错了什么？

编辑：我在我的站点配置中启用了 mod_rewite 和 AllowOverride All 上面的代码在 .htaccess 文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:10:43.077

查询字符串`^manufacturer=&`仅匹配为**空**的制造商参数，并且它还要求等号后跟一个＆符号，这似乎不是您想要的行为。

顺便说一句，您确实意识到[状态码 410](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)意味着资源已*消失*（表示请求的资源不再可用并且将不再可用）？

您似乎想在*没有*查询参数的情况下重定向回当前页面，因此我建议改用 302 或 301 重定向。

尝试这个：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ^manufacturer=.+$
RewriteRule .* $0? [R=301,L] 
```

# mysql - MySQL join - 检查某人是否有条目

> ID：15657447
> 
> 赞同：1
> 
> 时间：2013-03-27T11:12:24.260
> 
> 标签：mysql

MYSQL。让我介绍一下我的表格，缩小：

我有一个`users`带有行的表`id`。

我有一张桌子`tasks`，里面有行`id`和`title`。

我有一个表`users_tasks`，将它们与行`id`（`uid`对于 users.id）和`tid`（对于 tasks.id）连接起来。

现在，我想要一个所有任务的列表以及是否`6`已将具有 id 的用户分配给该任务的信息（= 如果`users_tasks`存在其中的条目`uid`= `6`）

开始很简单，完成所有任务：`SELECT * FROM tasks`但现在呢？我试图继续使用 LEFT JOIN 来，`users_tasks`但结果太奇怪了，看起来似乎是正确的方向......我需要像条件连接这样的东西吗？我很困惑

我最喜欢的结果是这样的（假设有 4 个任务，用户 6 被分配给 1 和 3）：

```
tasktitle  | entry for user 6
-----------------------------
task 1     |       1
task 2     |       0
task 3     |       1
task 4     |       0 
```

编辑对 tombom 的评论：

```
SELECT
*, EXISTS (SELECT 1 FROM users_tasks ut WHERE tasks.id = ut.tid AND ut.uid = 6)
FROM
tasks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:18:25.940

你根本不需要加入。

```
SELECT
*
FROM
tasks
WHERE EXISTS (SELECT 1 FROM users_tasks ut WHERE tasks.id = ut.tid AND ut.uid = 6) 
```

这应该比连接执行得更快，因为`EXISTS ()`一旦找到行就返回，而连接返回所有匹配的行。

# oracle - 如何使用旧式 Oracle 语法进行完全外连接

> ID：15657448
> 
> 赞同：1
> 
> 时间：2013-03-27T11:12:24.993
> 
> 标签：oracle, join, oracle8

对于每个表，我有两个具有相同列的表，即项目代码和数量：

```
TABLE A                    TABLE B
--------------             -------------
X    2                      X   1
Y    1                      S   2
Z    5                      Z   5 
```

我想要得到的结果是这样的：

```
Table C
---------------
X  2  1
Y  1  0
S  0  2 
```

我只需要 `qty`两个表中不同的项目（包括应该显示为零的空值。

注意：我使用的是 Oracle8，所以不能使用 ANSI FULL OUTER JOIN。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T11:24:05.417

编辑，由于该问题特定于不使用 ANSI 语法的 Oracle 8，因此以下内容应该有效：

```
select col1, 
  nvl(a_col2, 0) as a_col2, 
  nvl(b_col2, 0) as b_col2
from 
( 
  select a.col1, a.col2 as a_col2, b.col2 as b_col2 
  from TableA a, TableB b
  where a.col1 = b.col1(+)
  union
  select b.col1, a.col2 as a_col2, b.col2 as b_col2 
  from TableA a, TableB b
  where a.col1(+) = b.col1 
)      
where a_col2 <> b_col2
  or (a_col2 is null or b_col2 is null) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!4/34cb0/25)。这将返回：

```
| COL1 | A_COL2 | B_COL2 |
--------------------------
|    S |      0 |      2 |
|    X |      2 |      1 |
|    Y |      1 |      0 | 
```

如果您使用的是支持 ANSI 语法的 Oracle 版本，那么您可以使用以下内容`FULL OUTER JOIN`：

```
select 
  coalesce(a.col1, b.col1) col1, 
  coalesce(a.col2, 0) a_col2, 
  coalesce(b.col2, 0) b_col2
from tablea a
full outer join tableb b
  on a.col1 = b.col1
where a.col2 <> b.col2
  or (a.col2 is null or b.col2 is null); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/34cb0/20)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T14:56:59.883

另一个应该在 8 和（可能更早的版本）中工作的查询的写作。

它既不使用`FULL JOIN`可怕`(+)`的连接语法，所以即使升级不推荐使用它也应该工作。

假设桌子上已经没有 Null，您将不需要`COALESCE()`或者`NVL()`：

```
SELECT  a.col1, 
        a.col2 AS a_col2, 
        b.col2 AS b_col2
FROM    TableA a, TableB b
WHERE   a.col1 = b.col1
  AND ( a.col2 <> b.col2
     OR a.col2 IS NULL
     OR b.col2 IS NULL
      )

UNION ALL

SELECT  col1, col2, 0
FROM    TableA a
WHERE   NOT EXISTS
        ( SELECT  *
          FROM    TableB b
          WHERE   a.col1 = b.col1
        )

UNION ALL

SELECT  col1, 0, col2
FROM    TableB b
WHERE   NOT EXISTS
        ( SELECT  *
          FROM    TableA a 
          WHERE   a.col1 = b.col1
        ) ; 
```

**[SQL-Fiddle](http://sqlfiddle.com/#!4/34cb0/28)**上的测试

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T11:19:12.430

```
select code, nvl(a.qty,0) a, nvl(b.qty,0) b
from tableA a full join tableB b using(code)
where decode(a.qty, b.qty, 0) is null 
```

[小提琴](http://sqlfiddle.com/#!4/b2fcc/4)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T13:21:03.657

另外的选择：

```
select
  full_list.item_code,
  nvl(table_a.qty,0) table_a_qty,
  nvl(table_b.qty,0) table_b_qty
from
  (select item_code from table_a
   union
   select item_code from table_b) full_list,
  table_a,
  table_b
where
  full_list.item_code = table_a.item_code(+) and
  full_list.item_code = table_b.item_code(+) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T11:24:23.147

以下查询应该可以正常工作：

```
SELECT * FROM (
  SELECT nvl(a.c1, b.c2), nvl(a.col1, 0) qty1, nvl(b.col2, 0) qty2 FROM a FULL OUTER JOIN b ON a.c1 = b.c2
) where qty1 != qty2; 
```

[http://sqlfiddle.com/#!4/d37ff/5/0](http://sqlfiddle.com/#!4/d37ff/5/0)

# objective-c - NSOperation 与异步 NSURLConnection

> ID：15657452
> 
> 赞同：2
> 
> 时间：2013-03-27T11:12:38.263
> 
> 标签：objective-c, cocoa-touch, nsurlconnection, nsoperation, nsoperationqueue

我有一个运行常规服务器同步过程的 iPad 应用程序 - 它每 10 秒左右运行一次。同步过程下载插入到基于 CoreData SQL 的存储中的记录。有时，正在处理的记录数量可能会达到数百或数千。

当前同步过程是基于`Asynchronous NSURLConnection`主线程触发的。一旦调用`NSData`收集了所有内容`async`，主线程就会`NSOperation`在后台触发一个解析`NSData`并将其插入到数据库中。

因此，`NSURLConnection`正在异步运行，而 db insert 正在后台运行`NSOperation`。但是，the`NSURLConnection`和 the的编排`NSOperation`是在主线程中完成的。鉴于正在下载大量数据，那么我认为即使是主线程上的少量编排也可能会影响我的 UI 响应能力。

因此，我正在考虑将代码重构为单个背景`NSOperation`并进行`NSURLConnection`同步调用。然后一个单一的`NSOperation`将同步下载`NSData`和管理数据库插入。

在我着手进行相当大的重构之前，我会对人们对这是否是一个好的决定的看法感兴趣。

使用当前机制，我注意到 UI 中偶尔会出现一些犹豫。通过将整个机制放在后台`NSOperation`，我希望 UI 将保持响应。

任何智慧之言将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:54:26.067

我不建议切换到同步连接。异步连接使用更少的内存并让您更好地控制下载过程。为避免 UI 冻结，我会尝试仅在`NSURLConnection`委托方法内强制执行后台处理，如下所示：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        [self.mutableData appendData:data];
    });
} 
```

编辑：正如@jrturton 在评论中所说，您可以指定`NSURLConnection`委托方法的队列。使用[setDelegateQueue:](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLConnection/setDelegateQueue%3a)方法（iOS 5.0+）。

# php - 从数组对象获取数据

> ID：15657455
> 
> 赞同：0
> 
> 时间：2013-03-27T11:12:50.403
> 
> 标签：php

嗨，我是 PHP 新手，遇到以下问题。我已经编写了以下代码来将数据添加到数组中，现在我需要查看添加的数据，请告诉我该怎么做。

```
class ShoppingCart
{
private $items = array();
private $n_items = 0;
function addItem( Item $item )
{
 $this->items[] = $item;
$this->n_items = $this->n_items + 1;
//print_r (array_values($this->items));
echo "item $this->items added sussesfully";
}
} 
```

和

```
class Item {
protected $name;
protected $price;

public function __construct($name, $price) {
    $this->name = $name;
    $this->price = $price;
}

public function getName() {
    echo "item is $this->name";
    return $this->name;
}

public function getPrice() {
    return $this->price;
}

} 
```

和

```
require_once('AddingMachine.php');
require_once('item.php');

//$arrayofnumbers = array(100,200);

$objectname = new ShoppingCart();
$objectname->addItem(new Item('My Super Cool Toy', 10.99)); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:29:02.277

由于`$items`是私有属性，因此您需要在`ShoppingCart`类上创建一个新方法

```
public function getItems()
{
    return $this->items;
} 
```

`$items`然后通过调用新方法检索数组

```
$objectname = new ShoppingCart();
$items = $objectname->getItems();

var_dump($items); 
```

# c++ - 是否可以传递对可变参数模板函数的引用？

> ID：15657456
> 
> 赞同：4
> 
> 时间：2013-03-27T11:12:51.333
> 
> 标签：c++, c++11, pass-by-reference, variadic-templates

假设，我有一个使用 CRTP 并提供可变参数模板静态成员函数的基类

```
template<typename derived_task>
struct task_impl : library::task
{
   /* some useful functionality implemented using CRTP */
   /// static method for spawning a task.
   template<typename... Args>
   static void spawn(Args... args)
   { library::spawn(new task(args...)); }
 }; 
```

和派生类

```
struct my_task : task_impl<my_task>
{
  /* implementation using functionality of task_impl<> */
  my_task(container&c, int i);
}; 
```

然后想通过使用可变参数模板成员

```
container c( /* args for ctor */ );
my_task::spawn(c,0); 
```

这里发生的是`spawn()`创建容器的副本，而不是通过引用传递原始容器。有没有办法强制引用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T12:53:28.867

您有两个选择，要么用 a 包装参数，`reference_wrapper`以便函数调用复制`reference_wrapper`它所引用的对象，要么让你的可变参数函数使用完美转发，以便它可以通过引用传递参数：

```
template<typename... Args>
 static void spawn(Args&&... args)
 { library::spawn(new task(std::forward<Args>(args)...)); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:17:59.153

您可以使用`std::ref`来包装参数。

这实际上发生得相当频繁，例如在`std::thread`使用带有引用参数的函数创建 s 时，或者在使用`std::bind`.

# api - Urturn API ur：找不到命令

> ID：15657457
> 
> 赞同：2
> 
> 时间：2013-03-27T11:12:51.943
> 
> 标签：api, node.js, expression, npm

我正在尝试安装 urturn api 并在[http://webdoc.github.com/urturn-expression-api/#!guides/start之后为 urturn.com 编写我自己的表达式](http://webdoc.github.com/urturn-expression-api/#!guides/start)

后：

```
npm install urturn-toolbelt -g 
```

我正在尝试使用以下方式运行沙箱：

```
ur sandbox 
```

并得到错误：

```
-bash: ur: command not found 
```

请帮忙

PS我在Mac OS

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:52:40.783

您的 PATH 中可能没有包含您的 nodeJS npm/bin 文件夹。

你能检查你的 PATH 变量吗？

节点 NPM 包 bin 文件都符号链接在同一个`./bin`文件夹中。如果您使用 Homebrew ( `brew install node`) 安装 NodeJS，它应该是`/usr/local/share/npm/bin`.

您可以使用以下命令回显当前路径：

```
echo $PATH 
```

如果上面的文件夹没有出现在列表中，请检查您的 .bashrc 或 .bash_profile 文件并修复任何问题。

一个可能有效的修复方法是在 ~/.bash_profile 中添加以下行

`PATH=$PATH:/usr/local/share/npm/bin`

# javascript - mocha 初始化超时与 mocha-phantomjs

> ID：15657458
> 
> 赞同：11
> 
> 时间：2013-03-27T11:12:54.913
> 
> 标签：javascript, tdd, phantomjs, mocha.js

我有以下内容`testrunner.html`：

```
<html>
  <head>
    <title>Specs</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="/content/css/mocha.css" />
    <script>
        function assert(expr, msg) {
            if (!expr) throw new Error(msg || 'failed');
        }
    </script>

    <script src="/client/lib/require.js" type="text/javascript" data-main="/client/specs/_runner.js"></script>

  </head>
  <body>
    <div id="mocha"></div>
  </body>
</html> 
```

`_runner.js`看起来像这样：

```
// Configure RequireJS
require.config({
    baseUrl: '/client',
    urlArgs: "v=" + (new Date()).getTime()
});

// Require libraries
require(['require', 'lib/chai', 'lib/mocha'], function (require, chai) {

    // Chai
    assert = chai.assert;
    should = chai.should();
    expect = chai.expect;

    // Mocha
    mocha.setup('bdd');

    // Require base tests before starting
    require(['specs/stringcalculator.specs'], function (person) {
        mocha.setup({ globals: ['hasCert'] });
        // Start runner
        if (window.mochaPhantomJS) {
            mochaPhantomJS.run();
        }
        else { mocha.run(); }
    });

}); 
```

是这样的`StringCalculator.specs.js`：

```
define(['app/model/StringCalculator'], function () {

    describe("StringCalculator", function () {

        describe("when an empty string is passed in", function () {
            it("returns 0", function () {
                var result = StringCalculator.add("");
                assert(result === 0);
            });
        });

        describe("when a number is passed in", function () {
            it("returns the number", function () {
                var result = StringCalculator.add("2");
                assert(result === 2);
            });
        });

        describe("when string is passed in", function () {
            it("returns NaN", function () {
                var result = StringCalculator.add("a");
                assert(isNaN(result));
            });
        });

        describe("when '1,2' is passed in", function () {
            it("returns 3", function () {
                var result = StringCalculator.add("1,2");
                assert(result === 3);
            });
        });
    });
}); 
```

这就是它`StringCalculator.js`本身（来自 mocha 样本）：

```
define([], function() {
    window.StringCalculator = StringCalculator = {
        add: function(inputString) {
            if (inputString === '') {
                return 0;
            }

            var result = 0;
            var inputStrings = inputString.split(',');

            for (var i = 0; i < inputStrings.length; i++) {
                result += parseInt(inputStrings[i]);
            }

            return result;
        }
    }
}); 
```

在浏览器调用中运行规范时`testrunner.html`，一切都按预期工作。在 OS X 上运行`mocha-phantomjs client/specs/testrunner.html`时，我收到以下错误：

`Failed to start mocha: Init timeout`

我在这里可能缺少什么？

我也尝试过`mocha-phantomjs http://httpjs.herokuapp.com`失败并出现同样的错误。

更新：如果我打电话，`mocha-phantomjs http://localhost:81/client/specs/testrunner.html`我还会在控制台上收到以下错误：

```
RangeError: Maximum call stack size exceeded.

http://localhost:81/client/lib/chai.js?v=123423553533535:2601
Failed to start mocha: Init timeout 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-06T21:12:32.407

通过npm 包运行时，我遇到了同样的`Failed to start mocha`错误。[在这里](https://gist.github.com/michaelcox/3800736#comment-859304)找到了解决方案。`mocha-phantomjs``grunt-mocha-phantomjs`

在此重复以供参考：

要使用 mocha-phantomjs 运行，请更改

```
mocha.run(); 
```

至

```
if (mochaPhantomJS) {
  mochaPhantomJS.run();
}
else {
  mocha.run();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:20:57.327

[这个文件](https://github.com/metaskills/mocha-phantomjs/blob/master/test/requirejs.html)展示了如何使用它。

~~对我来说，NodeJS 0.10.x 似乎无法使用它。切换到 NodeJS 0.8.8 后，一切正常。~~

使用当前版本的 mocha-phantomjs 和 PhantomJS 现在一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T20:39:23.890

感谢您提供此信息，我尝试了上述方法，但在浏览器中显示“mochaPhantomJS 未定义”失败。按照下面的快速调整，效果很好：

```
if(typeof(mochaPhantomJS)!=="undefined")
{
  mochaPhantomJS.run();
}
else
{
  mocha.run();
} 
```

# c# - C# datagridview 查询变量

> ID：15657460
> 
> 赞同：0
> 
> 时间：2013-03-27T11:12:55.450
> 
> 标签：c#, datagridview

我正在构建 ac# 应用程序以将数据库中的数据显示到 datagridview 中。每个用户都在第一个窗口中登录。然后用户可以注册他的数据或者可以看到他已经注册的数据。

但如果用户登录，他有一个用户标识。如何仅显示具有用户 ID 的数据对应？

我目前有这个，但它不起作用。我看到所有用户的所有数据。

```
SELECT Id, gebruikerid, datum, afstand, tijd FROM prestaties
WHERE gebruikerid = '" + label1.Text + "' 
```

userid 的值保留在 label1 中。这个值是一个变量

通过从 datagridview 向导在查询生成器中输入查询，我得到查询不正确的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-18T23:22:27.467

尽管这篇文章是 2 年前的，但无论如何我都会给你答案。

在查询中使用 SQL 参数`@`：

```
SELECT Id, gebruikerid, datum, afstand, tijd FROM prestaties
WHERE gebruikerid = @userid 
```

然后右键单击“FillBy”按钮并选择“查看代码”：

![在此处输入图像描述](../Images/ad87b1ab04ef965c555fcb0184d247c7.png)

然后您将看到此事件处理程序：

```
private void fillBy1ToolStripButton_Click(object sender, EventArgs e)
{
    try
    {
        this.yourSqlAdapter.FillBy1(this.yourDatabaseDataSet.prestaties, ((int)(System.Convert.ChangeType(testToolStripTextBox.Text, typeof(int)))));
    }
    catch (System.Exception ex)
    {
        System.Windows.Forms.MessageBox.Show(ex.Message);
    }
} 
```

现在，替换`testToolStripTextBox.Text`为您`label1.Text`的值，您的值`label1.Text`将用作 SQL 查询中的参数。

# javascript - 替换功能只工作一次（javascript）

> ID：15657461
> 
> 赞同：14
> 
> 时间：2013-03-27T11:12:57.160
> 
> 标签：javascript, jquery, html, dom

每次 str1 在特定 div 中显示时，我都需要用另一个字符串 (str2) 替换一个字符串 (str1)。

这是我到目前为止得到的

```
<script type="text/javascript"> 
$(window).load(function(){

var str=document.getElementById("foo").innerHTML; 
var n=str.replace("Google","Yahoo");
document.getElementById("foo").innerHTML=n;

}); 

</script> 
```

和html

```
<div id="foo">
Google is the best website ever <br />
Google is not the best website ever</div> 
```

不幸的是，当我运行它时，它只替换了 Google 一词的第一个实例。

我究竟做错了什么？我需要添加什么以使其替换单词的所有实例？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-27T11:13:45.123

使用正则表达式`/string/g`替换所有匹配项，您使用的子字符串将根据[replace()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)函数的文档仅替换第一次出现。

**[现场演示](http://jsfiddle.net/y3RDu/)**

```
var n=str.replace(/Google/g,"Yahoo"); 
```

[String.prototype.replace()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace) replace() 方法返回一个新字符串，其中模式的部分或全部匹配被替换。模式可以是字符串或正则表达式，替换可以是字符串或每次匹配调用的函数。

> str.replace(regexp|substr, newSubStr|function)

您正在使用 substr 模式，它将仅替换第一次出现。

**substr（模式）**

> 将被 newSubStr 替换的字符串。它被视为逐字字符串，不被解释为正则表达式。只有第一个匹配项将被替换。

使用此正则表达式模式替换所有出现的情况。

**正则表达式（模式）**

> 一个 RegExp 对象或文字。匹配被参数#2 的返回值替换。

# android - 如何在android中手动结束应用程序？

> ID：15657462
> 
> 赞同：0
> 
> 时间：2013-03-27T11:12:58.293
> 
> 标签：android, exit

当用户从主屏幕按下返回键时，我想结束我的应用程序。我尝试使用`System.exit(0)`，但它似乎没有工作。

我必须做什么才能手动结束我的应用程序？

```
 package com.mahavega.qcdemo;

import com.mahavega.qcdemo.R;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.GestureDetector;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.View.OnClickListener;
import android.widget.ImageView;

public class MainActivity extends Activity implements OnClickListener {
     private GestureDetector gestureDetector;
        View.OnTouchListener gestureListener;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        gestureDetector = new GestureDetector(this, new MyGestureDetector());
        gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
            }
        };
        ImageView ad = (ImageView) findViewById(R.id.imageView1);
        ImageView im2 = (ImageView) findViewById(R.id.imageView2);
        ImageView im3 = (ImageView) findViewById(R.id.imageView3);
        ImageView im4 = (ImageView) findViewById(R.id.imageView4);
        ImageView im5 = (ImageView) findViewById(R.id.imageView5);
        ad.setOnClickListener(MainActivity.this);
        im2.setOnTouchListener(gestureListener);
        im2.setOnClickListener(MainActivity.this); 
        im3.setOnTouchListener(gestureListener);
        im3.setOnClickListener(MainActivity.this); 
        im4.setOnTouchListener(gestureListener);
        im4.setOnClickListener(MainActivity.this); 
        im5.setOnTouchListener(gestureListener);
        im5.setOnClickListener(MainActivity.this); 
        ad.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent(MainActivity.this, Adds.class));
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling (MotionEvent e1, MotionEvent e2, float velocityX,    float velocityY)
        {
            float sensitvity = 50;
            if((e1.getX() - e2.getX()) < sensitvity){
                startActivity(new Intent(MainActivity.this, Login.class));
            }

            return super.onFling(e1, e2, velocityX, velocityY);
        }

    }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        System.exit(0);
        finish();
        super.onBackPressed();
        }

   } 
```

这是我的全部代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:24:10.663

根据您正在运行/构建的 Android 版本，您可能需要为您添加一些帮助`Activity`来捕捉后退按钮。添加此功能可提供帮助：

```
 @Override 
            public boolean onKeyDown(int keyCode, KeyEvent event)  { 
                if (Integer.parseInt(android.os.Build.VERSION.SDK) < 5 
                        && keyCode == KeyEvent.KEYCODE_BACK 
                        && event.getRepeatCount() == 0) { 
                    onBackPressed(); 
                } 

                return true; 
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:15:17.603

在您的`Activity`通话`finish()`中。参考这里[https://developer.android.com/reference/android/app/Activity.html#finish()](https://developer.android.com/reference/android/app/Activity.html#finish())

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T18:04:07.647

在您的 Activity 上调用 moveTaskToBack(true) （它会从屏幕退出您的应用，但不会破坏它）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T08:54:15.413

```
public static final void android.os.Process.killProcess(int pid) 
```

简单，工作，做你想做的事。但请注意，不建议在 Android 上显式退出应用程序。（常见的 GUI 应用程序只在最顶层的 Activity 上调用 finish() 并让操作系统决定何时退出应用程序进程。）

# knockout.js - KnockOutJS - 将映射插件与数据源扩展相结合

> ID：15657464
> 
> 赞同：1
> 
> 时间：2013-03-27T11:13:04.363
> 
> 标签：knockout.js, knockout-mapping-plugin

我的问题涉及 KO 映射插件和[KO 数据源扩展](https://github.com/CraigCav/ko.datasource)。

我正在尝试对使用 Datasource 扩展检索的数据使用映射功能。

看看第**26**和**29**行的这个[Fiddle](http://jsfiddle.net/rhulshof/k6HkW/)。

 ****第**26**行是有效的，但没有给我映射功能：

```
this(data); 
```

第**29**行是我想要实现的，但它不起作用。

```
ko.mapping.fromJS(data, {}, this); 
```

我尝试了很多，以至于我开始认为我错过了 Mapping 插件的重点。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:23:12.260

好的，我想我发现了这个问题。缺少对 KO 映射插件的引用。添加后，它似乎工作。请看看这个[http://jsfiddle.net/k6HkW/3/](http://jsfiddle.net/k6HkW/3/)

```
//Add the reference to the Knockout Mapping 
```

谢谢。****

# php - 向列表中添加和删除数据 PHP

> ID：15657466
> 
> 赞同：0
> 
> 时间：2013-03-27T11:13:10.257
> 
> 标签：php

我正在开发一个应用程序，该应用程序使用一些保存的数据稍后使用它。我不能使用数据库，所以这必须是基于文件的。

事情是这样的：

*   一个名为 hosts.txt 的文件名，每行都包含 host:service（不同的主机和服务）。
*   我的 PHP 文件逐行读取 txt，由分隔符“：”分割，并使用刚刚接收的数据发出请求。

直到这里，酷。我还有另一个文件（一个 HTML 表单），允许我在文件末尾添加它。但我的问题是下一个：

我希望能够从文件中添加和删除它，以便在下一次检查完成时（每 30 秒进行一次检查）数据应该被更新。

例子：

host.txt 包含以下内容：

```
host1:service1
host1:service2
host2:service2
host3:service1 
```

现在我希望能够向列表中添加一个新的主机：服务（我已经通过在文本文件末尾添加新数据来完成此操作，然后当 php 再次读取行时，它将包含在下一次检查中按行。现在，如何从文件中删除主机：服务？

我的意思是，在读取文件之后，PHP 会做这样的事情：

```
Host: Host1   |    Service: Service1   |  Status: Warning (this will depend on the HTTP request I will make)     (X)
Host: Host1   |    Service: Service2   |  Status: OK     (X)
Host: Host3   |    Service: Service1   |  Status: Critical     (X) 
```

我希望能够通过单击 (X) 从列表（和文件）中删除主机：服务。这可能是伙计们吗？我有点迷茫（我很容易使用数据库，但我不能在这个项目上）。

我希望我能弄清楚一些事情。预先感谢，问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:21:15.433

大致：

1）对文本文件中的输入进行分解，以便您拥有一个编号数组。

2）为html中的每一行设置一个id（每个行号的整数）

3）制作一个具有“点击”监听器的jquery函数

4) 创建一个以整数作为输入的 AJAX 脚本

5）再次读取hosts.txt，删除与数字对应的行（unset（$array ['linenumber']））

6）内爆输入，写入文件（覆盖旧文件）

7）重新加载页面（或隐藏行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:27:15.017

在 PHP 中，你想做这样的事情：

**代码**

```
$string = 'host1:service1
host1:service2
host2:service2
host3:service1';

$splitted = explode("\n", $string);

$data = array();

foreach ($splitted as $key => $value) {
    $data[$key] = explode(':', $value);
}

echo '<pre>';
print_r($data);
echo '<pre>'; 
```

您现在拥有结构化数据，您可以检查某些值是否匹配或属于特定类别。对输出的控制现在完全掌握在您手中。

**输出**

```
Array
(
    [0] => Array
        (
            [0] => host1
            [1] => service1
        )

    [1] => Array
        (
            [0] => host1
            [1] => service2
        )

    [2] => Array
        (
            [0] => host2
            [1] => service2
        )

    [3] => Array
        (
            [0] => host3
            [1] => service1
        )

) 
```

如果您在输出数据时仍有问题，请随时在评论中提问，我会更新答案。

# python - 用于 MVC wxpython 的“本地”发布-订阅者模式

> ID：15657468
> 
> 赞同：0
> 
> 时间：2013-03-27T11:13:13.187
> 
> 标签：python, wxpython, observer-pattern, publish-subscribe

在 MVC 中使用 wxpython，我寻找了一种让模型告诉控制器有关更改的方法。我找到了（py）pubsub，它实现了一个全局通知机制：消息被发送到一个地方（pubsub Publisher），它把它们发送给所有订阅者。每个订阅者检查消息是否有趣，并执行所需的操作。

从 Smalltalk 时代开始，我就知道了一种更“本地化”的方法：每个模型对象都有一个感兴趣的控制器列表，并且只向这些控制器发送更改通知。不涉及全球出版商。这可以作为 Model 类的一部分来实现，并且以几乎相同的方式工作，除了它对模型和控制器来说是本地的。

现在有理由使用全局方法（对我来说似乎性能要差得多，并且可能容易出现与全局方法相关的所有问题）？是否有另一个实现本地观察者的包？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:53:57.847

I'm not really seeing the subtle difference here. As far as I know, pubsub is the way to go. It's included in wxPython in wx.lin.pubsub or you can download it from [http://pubsub.sourceforge.net/](http://pubsub.sourceforge.net/). You can put the listeners just in the models and the publisher(s) just in the controller or however you need to. Here are a couple links to get you started:

*   [http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/](http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/)
*   [http://wiki.wxpython.org/WxLibPubSub](http://wiki.wxpython.org/WxLibPubSub)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:18:55.897

我已经玩了一段时间用 wxpython 做 MVC，我知道你说的 pubsub 是全局的是什么意思。

我提出的最新想法是每个视图和模型都有自己的观察者。观察者对其处理程序的引用很弱，并且它们都在单独的线程中工作，以免阻塞 GUI。要回调 GUI 线程，我正在使用 wxAnyThread Gui 方法装饰器。

有 3 种类型的信号被发送，对于模型，您可以设置观察哪些属性，当它们发生变化时它们会自动发出信号。然后在模型和视图上都可以发送消息信号或关键字信号。这三种信号类型中的每一种都必须在每个视图或模型中是唯一的，因为它们用于创建一个标识它们的元组。

**模型属性**

控制器处理程序装饰有

```
@onAttr('attributeName')
def onModelAttributeName(self, attributeName) 
```

当您绑定到处理程序属性的方法时，它会立即使用其当前值调用处理程序，然后继续观察更改。

**发送消息**

使用方法

```
view/model.notify('Your message'): 
```

控制器回调装饰有

```
@onNotify('Your message')
def onYourMessage(self): 
```

**发送关键字**

使用方法

```
view/model.notifyKw(valid=True, value='this) 
```

控制器回调装饰有

```
@onNotifyKw('valid', 'value')
def onValidValueKw(self, valid, value) 
```

GUI 对模型一无所知 您添加到 GUI 的唯一东西是视图信号器，控制器将其自身附加到此，因此如果您不添加控制器，视图将很高兴地向任何人发送消息.

我已经上传了我到目前为止在 github 上的内容

[https://github.com/Yoriz/Y_Signal](https://github.com/Yoriz/Y_Signal)

[https://github.com/Yoriz/Y_Mvc](https://github.com/Yoriz/Y_Mvc)

两者都有单元测试，应该给出一个例子来说明它的作用，但我会创建一些 wxpython 例子。

我使用的是 python 2.7 版，Ysignals 模块需要 [https://pypi.python.org/pypi/futures/2.1.3](https://pypi.python.org/pypi/futures/2.1.3)用于线程。请看看对其他人如何看待这种接近 mvc 的方式感兴趣，或者指出我严重忽略的一些事情。

# wordpress - 解析错误：语法错误，文件意外结束但没有错误

> ID：15657470
> 
> 赞同：0
> 
> 时间：2013-03-27T11:13:18.537
> 
> 标签：wordpress, wordpress-theming, php

这是我的 wordpress 主题 index.php 的 php 代码：

```
<section id="content">
    <?php
        $i=1;
        while(have_posts() && i < 7):the_post();
        $tumbUrl = '';
        if(has_post_thumbnail())
        {
            $tumbUrl = wp_get_attachment_url( get_post_thumbnail_id($post->ID) );
        }
        if(i < 4):
    ?>
    <div id="row1">
        <div id="tile<?echo $i?>" class="tile">
            <div id="img<?echo $i?>" class="tileimage"<?if($tumbUrl != ''):?> style="background-image:<?echo $tumbUrl; ?>"<?endif;?>></div>
            <div id="text<?echo $i?>" class="tiletext"><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title(); ?>"><?php the_title(); ?></a></div>
        </div>
    </div>
    <?
        else:
    ?>
    <div id="row2">
        <div id="tile<?echo $i?>" class="tile">
            <div id="img<?echo $i?>" class="tileimage"<?if($tumbUrl != ''):?> style="background-image:<?echo $tumbUrl; ?>"<?endif;?>></div>
            <div id="text<?echo $i?>" class="tiletext"><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title(); ?>"><?php the_title(); ?></a></div>
        </div>
    </div>
    <?
        endif;
        endwhile;
    ?>
</section> 
```

当我想运行它时，我收到错误消息，`Parse error: syntax error, unexpected end of file in C:\wamp\www\wordpress\wp-content\themes\Odatis\index.php on line 31`但我找不到任何错误。

有谁能够帮我？

（我的 PHP 版本是 5.4.3）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T11:16:15.900

它非常简单。您使用简短的开放标签`<?`。

**在您的php.ini**中启用短打开标签或使用完整的 php 标签，如`<?php`在较新的 PHP 版本中默认禁用。但是，如果您共享代码，则不应在项目中使用可能导致问题的简短语法。

[http://www.php.net/manual/en/ini.core.php#ini.short-open-tag](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:42:39.800

Here is the modified working code...

```
<section id="content">
    <?php 
        $i=1;
        while(have_posts() && i < 7):the_post();
        $tumbUrl = '';
        if(has_post_thumbnail())
        {
            $tumbUrl = wp_get_attachment_url( get_post_thumbnail_id($post->ID) );
        }
        if(i < 4):
    ?>
    <div id="row1">
        <div id="tile<?php echo $i; ?>" class="tile">
            <div id="img<?php echo $i; ?>" class="tileimage"<?php if($tumbUrl != ''): ?> style="background-image:<?php echo $tumbUrl; ?>"<?php endif; ?>></div>
            <div id="text<?php echo $i; ?>" class="tiletext"><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title(); ?>"><?php the_title(); ?></a></div>
        </div>
    </div>
    <?php 
        else:
    ?>
    <div id="row2">
        <div id="tile<?php echo $i; ?>" class="tile">
            <div id="img<?php echo $i; ?>" class="tileimage"<?php if($tumbUrl != ''): ?> style="background-image:<?php echo $tumbUrl; ?>"<?php endif; ?>></div>
            <div id="text<?php echo $i; ?>" class="tiletext"><a href="<?php the_permalink(); ?>" rel="bookmark" title="a<?php the_title(); ?>"><?php the_title(); ?></a></div>
        </div>
    </div>
    <?php 
        endif;
        endwhile;
    ?>
</section>

```

```
Note: Make sure the ending mark(;) are there and also the space as required.
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T11:18:15.497

尝试全部替换`<?echo ###?>`为`<?= ### ?>`. 或者，如果您的 PHP < 5.4，您需要在 php.ini 中启用短打开标记。

**aww no: 中缺少分号`<?php the_permalink() ?>`**

其中之一应该修复它，否则我很抱歉：/

# c++ - 使用模板进行递归类型向上转换

> ID：15657474
> 
> 赞同：0
> 
> 时间：2013-03-27T11:13:36.633
> 
> 标签：c++, templates, sfinae

我使用容器。

如果`A`是容器，则`container_traits<A>::reference_container`必须键入`A`.

如果容器`RefContainer<C>`is_base_of `A`，则`container_traits<A>::reference_container`必须键入 a `C`。

以下代码执行此向上转换（或取消引用，正如我所说）。问题是，即使`reference = false`编译器检查是否`C::reference_container`作为类型存在，并且无法编译。

还有其他方法吗？

```
#include <iostream>
using namespace std;

template<typename C> struct RefContainer;

template<class C>
class container_traits
{
    template <typename R>
    static std::true_type ref_helper(const RefContainer<R>&);
    static std::false_type ref_helper(...);
public:
    constexpr static bool reference = decltype(ref_helper(std::declval<C>()))::value;
    typedef typename std::conditional<reference, typename C::reference_container, C>::type reference_container;
};

template<typename C>
struct RefContainer : public C { typedef typename container_traits<C>::reference_container reference_container; };
struct Container1 {};
struct Container2 {};
template<typename C> struct D : public RefContainer<C> {};
struct E : public RefContainer<D<RefContainer<Container1>>> {};

int main()
{
    container_traits<Container1>::reference_container e; // It is Container1
    container_traits<RefContainer<Container1>>::reference_container f; // dereference to Container1
    container_traits<D<Container2>>::reference_container // dereference to Container2
    container_traits<E>::reference_container h; // dereference to Container1
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:41:21.313

只需创建助手类

```
template<class T, bool der>
struct hlp
{
   typedef T type;
}

template<class T>
struct hlp<RefContainer<T>, true>
{
   typedef T::reference_container type;
} 
```

# objective-c - 有什么办法可以改变Xcode中的动态库搜索路径

> ID：15657475
> 
> 赞同：2
> 
> 时间：2013-03-27T11:13:37.797
> 
> 标签：objective-c, cocoa, xcode4.5, dylib, install-name-tool

下面是我的场景，

1.  在我的应用程序中，我必须使用 libopus 库，我下载并安装，编译 --> 安装过程是正常的，因为它适用于任何其他开源库，

2.  我将 libopus.a 与我的应用程序链接在一起，我的做法是，默认情况下它将安装在 /usr/local/lib 中，所以我从那里拖动并将其添加到我的应用程序中，

在我的机器上工作正常，没有错误，

在另一台机器上，我希望它能够顺利运行，因为我静态地包含了这个库，但它的抛出错误为

```
dyld: Library not loaded: /usr/local/lib/libopus.0.dylib 
```

所以我得出结论，libopus.a 以某种方式包括 libopus.0.dylib 也是动态的，

现在我不能在我的构建设置中添加一个复制阶段，所以它会被复制到 ../Framework 文件夹中

如果我执行 otool -L libpus.a 那么它会显示以下结果

```
otool -L /usr/local/lib/libopus.a
Archive : /usr/local/lib/libopus.a
/usr/local/lib/libopus.a(bands.o):
/usr/local/lib/libopus.a(celt.o):
/usr/local/lib/libopus.a(cwrs.o):
/usr/local/lib/libopus.a(entcode.o):
/usr/local/lib/libopus.a(entdec.o):
/usr/local/lib/libopus.a(entenc.o):
/usr/local/lib/libopus.a(repacketizer.o): 
```

它没有显示为它依赖于 dylib 库 **现在我的问题是
如何告诉应用程序首先查看此路径**

我尝试了以下选项，

1.  install_name_tool 但它似乎可以在其他机器上运行，所以用户需要运行这个脚本而不是开发人员，

2.  尝试在 xcode 中设置一些选项以设置 RUNTIME 搜索路径以定位该特定 dylib 但到目前为止尚未成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:10:03.580

`install_name_tool`由开发人员在构建过程中运行，而不是由用户运行。

如果您正在构建库，则应使用`libtool(1)`选项`-install_name @rpath`; 否则，您可以使用`install_name_tool(1)`with`-id @rpath`在`dylib`. 然后，当您构建应用程序时，将“运行路径搜索路径”设置为您将安装库的路径。

Apple 在他们的[Mach-O Programming Topics](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/MachOTopics/1-Articles/loading_code.html)和[Dynamic Library Programming Topics](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/DynamicLibraries/100-Articles/RunpathDependentLibraries.html)中有一些很好的文档。

# android - NetworkOnMainThread 错误

> ID：15657476
> 
> 赞同：-4
> 
> 时间：2013-03-27T11:13:38.087
> 
> 标签：android, image

大家好，我正在尝试从我的 MSQL 数据库中检索产品信息。价格和标题确实可以得到但不是图像。我不断收到 NetworkOnMainThread 错误。我知道这是因为代码在 runOnUiThread 中，因此是主线程。但是，一旦我删除 runOnUIThread 并且只有一个新的可运行代码，里面的代码无法执行，我就尝试了所有可能的解决方案，请帮忙？任何解决方案都将不胜感激。

```
// TODO Auto-generated method stub
Tread loadingThread = new Thread(){
    String result = "";
    @Override
    public void run() {
        // TODO Auto-generated method stub
        try{
            HttpResponse response = httpClient.execute(httpPost);
            HttpEntity httpentity=response.getEntity();
            InputStream inputStream = httpentity.getContent();  

            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream,"iso-8859-1"),8);
            StringBuilder stringBuilder = new StringBuilder();
            String line = null;

            while ((line = reader.readLine())!=null){
                stringBuilder.append(line+"\n");
            }
            inputStream.close();        
            result=stringBuilder.toString();

            JSONArray Array = new JSONArray(result);
            JSONObject jsonObject=null;
            jsonObject = Array.getJSONObject(0);

            String productTitle = jsonObject.getString("title");
            String productPrice = jsonObject.getString("price");
            final String productImage = jsonObject.getString("image_url");

            productTextViewPrice.setText(productPrice);
            productTextViewTitle.setText(productTitle);

            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    // TODO Auto-generated method stub
                    try {
                        InputStream is = (InputStream) new URL(productImage).getContent();
                        Log.i("log_URL","URL is " + productImage);
                        Drawable proImage = Drawable.createFromStream(is, "src name");
                        productImageFull.setImageDrawable(proImage);
                    } catch (Exception e) {
                        Log.i("log_Result","error getting image " + e.toString());
                    }
                }
            });

        } catch (Exception e){

        }
        super.run();
    }
};
loadingThread.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:56:24.007

[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。

发生 NetworkOnMainThread 是因为您可能会在主 UI 线程上执行与网络相关的操作。您必须在后台线程中进行网络相关操作并在 ui 线程上更新 ui。

您可以使用 asycntask。[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

```
class TheTask extends AsyncTask<Void,Void,Void>
{
      protected void onPreExecute()
      {           super.onPreExecute();
                //display progressdialog.
      } 

       protected void doInBackground(Void ...params)
      {  
            //http request. do not update ui here

            return null;
      } 

       protected void onPostExecute(Void result)
      {     
                super.onPostExecute(result);
                //dismiss progressdialog.
                //update ui
      } 

 } 
```

如果网络操作时间很短，请使用异步任务。

直接来自文档

**AsyncTasks 最好用于短时间的操作（最多几秒钟）。**如果您需要保持线程**长时间**运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如Executor、ThreadPoolExecutor 和 FutureTask。

您可以考虑**替代 asynctask robospice**。[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:16:55.930

看看 AsyncTask() 或者更好的是 AsyncTaskLoader()。您的问题中有很好的 Java 代码，但 Android 有点不同。

# php - 带有ie8的jquery ui选项卡中不显示highcharts

> ID：15657477
> 
> 赞同：1
> 
> 时间：2013-03-27T11:13:38.673
> 
> 标签：php, internet-explorer-8, highcharts, jquery-ui-tabs

我实际上正在使用 jquery-ui 选项卡。我需要在每个选项卡中放入一些来自 HighCharts 库的图表。它在 Firefox 上运行良好，但问题出在 IE8 上。确实，图表根本不显示，生成图表时似乎崩溃了。对不起，我不能给你一个 url 例子。

这是一张图表的代码：

```
$(document).ready(function() {
var chart1 = new Highcharts.Chart({
    chart: {
        renderTo: 'container1',
        borderColor: '#CCCCCC',
        borderWidth: 2,
        type: 'line',
        height : ".$height.",
        width : ".$width.",
        zoomType: 'x'
    },
    title: {
        text: 'exemple'
    },      
    subtitle: {
        text: 'subtitle'
    },
    xAxis: {
        categories: ['" . implode("', '", $xValues) . "'],
                    type:'datetime',
                    maxZoom: 1
    },
    yAxis: {
        title: {
            text: 'ordonnees'
        }
    },
    exporting: {
        type : 'image/png',
        scale: 2

    },
    plotOptions: {
        line: {
            dataLabels: {
                enabled: true 
                },
        marker:{
            enabled: true
            }
        }
    },
    series: [";
        $d = "";
        foreach($data as $leg => $val)
        {
            $s =  implode(', ', $val);
            $d .= "{ name: '$leg',
            data: [" . $s . "] }, ";
        }
        $sortie .= $d;
        $sortie .= "]
    });
}); 
```

你能帮我吗 ？

# java - 在控制台中读取和显示文本文件有时间延迟？

> ID：15657481
> 
> 赞同：-1
> 
> 时间：2013-03-27T11:13:43.743
> 
> 标签：java

我正在尝试将我的文本文件的内容打印到控制台中，但有时间延迟，例如每行 2 秒。

这是我的文本文件内容：

```
大卫
1
1
克里斯
1
2
大卫
2
1
克里斯
1
3
大卫
3
1

```

这是我到目前为止的代码：

```
File f = new File("actions.txt");
try{
    Scanner scanner = new Scanner(f);
    while (scanner.hasNextLine()) {
        String line = scanner.nextLine();
        System.out.println(line);
    }
    scanner.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
}
System.exit(0); // terminate the program
} 
```

任何帮助都会很棒（我是初学者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:19:05.817

你可以试试这个。

```
File f = new File("actions.txt");
try{
    Scanner scanner = new Scanner(f);
    while (scanner.hasNextLine()) {
        String line = scanner.nextLine();
        System.out.println(line);
        Thread.sleep(2000);
    }
    scanner.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
}catch (InterruptedException e) {
    e.printStackTrace();
}
System.exit(0); // terminate the program 
```

}

# sql-server - 在同一列上使用 In 和 Not In 子句的 SQL 查询

> ID：15657485
> 
> 赞同：1
> 
> 时间：2013-03-27T11:14:00.870
> 
> 标签：sql-server, tsql, sql-server-2008-r2

```
Product Name    Product Id  Product Status
A               1           Rollout
A               1           Storage
A               1           Delivered
A               5           Storage
B               2           Rollout
C               3           Rollout
A               4           Rollout
A               5           Rollout
B               6           Rollout
C               7           Rollout 
```

在上表中，我想写下面的查询，它应该返回类似的结果

```
Product Name QOH
A            1
B            0
C            0 
```

询问：

```
SELECT Product Name, Count(Product Id) 
FROM table_t1 
WHERE Product Status IN ('Storage') AND Product Status NOT IN ('Delivered') 
```

但是上面的查询返回以下结果

```
Product Name QOH
A            2
B            0
C            0 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:36:40.307

您应该能够使用以下查询：

```
select distinct t.[product name], 
  coalesce(p.QOH, 0) QOH
from yourtable t
left join
(
  select t1.[product name], count(*) QOH
  from yourtable t1
  where [Product Status] = 'Storage'
    and not exists (select [product id]
                    from yourtable t2
                    where [Product Status] = 'Delivered'
                      and t1.[product id] = t2.[product id])
  group by t1.[product name]
) p
  on t.[product name] = p.[product name] 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9eda0/20)

您原始查询的问题是产品不能同时具有两种状态。您试图返回状态为`Storage`and的行，这在`Delivered`逻辑上是不可能的。

我使用了一个子查询，它返回状态为 的行`Storage`，但是在`product id`表中也没有状态为的行`Delivered`（这是子句`not exists`中的）。`where`

获得这些结果后，您必须重新加入表以返回所有不同的产品。

此查询给出结果：

```
| PRODUCT NAME | QOH |
----------------------
|            A |   1 |
|            B |   0 |
|            C |   0 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-01T14:14:01.440

我不完全同意这不合逻辑的说法。同一列上的 IN 和 NOT IN 子句是合法且合乎逻辑的。这就像在做`Set Minus (Set A - Set B)`。

话虽如此，上面的例子

```
SELECT Product Name, Count(Product Id) 
FROM table_t1 
WHERE Product Status IN ('Storage') AND Product Status NOT IN ('Delivered') 
```

与

```
SELECT Product Name, Count(Product Id) 
FROM table_t1 
WHERE Product Status IN ('Storage') 
```

因此结果。在这个例子中不是很有用。但有时将 IN 和 NOT IN 一起使用是有用的，即使在同一列中也是如此。

例如，我有一个很长的要包含在 IN 中的项目的白名单，同时，我想过滤掉现有黑名单中的一些项目。当然，我们可以先做 Set Minus，然后让查询做`IN (Result of whitelist - blacklist)`。但我们也可以这样做`IN (whitelist) AND NOT IN (blacklist)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T10:03:51.053

```
SELECT ProductName, count(distinct ProductID)
from(
SELECT ProductName, ProductID
FROM Table_1
GROUP BY ProductName, ProductID
HAVING MAX(ProductStatus)='Storage' 
and MIN(ProductStatus)<>'Delivered')
X
GROUP BY ProductName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:17:40.220

我可以建议类似的变体，没有不必要的连接和函数调用 -

```
DECLARE @temp TABLE
(
      ProductName CHAR(1)    
    , ProductID INT  
    , ProductStatus VARCHAR(10)
)

INSERT INTO @temp (ProductName, ProductID, ProductStatus)
VALUES 
    ('A', 1, 'Rollout'),
    ('A', 1, 'Storage'),
    ('A', 1, 'Delivered'),
    ('A', 5, 'Storage'),
    ('B', 2, 'Rollout'),
    ('C', 3, 'Rollout'),
    ('A', 4, 'Rollout'),
    ('A', 5, 'Rollout'),
    ('B', 6, 'Rollout'),
    ('C', 7, 'Rollout')

SELECT 
      t.ProductName 
    , [Count] = COUNT(1)
FROM @temp t
WHERE t.ProductStatus = 'Storage'
    AND NOT EXISTS ( 
        SELECT 1
        FROM @temp t2
        WHERE t2.ProductStatus = 'Delivered'
            AND t.ProductID = t2.ProductID 
    )
GROUP BY ALL t.ProductName 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T11:19:00.367

您在开始时通过 [产品状态] 过滤表格，因此您不会以这种方式看到 B 和 C。您需要使用分组：

```
Select 
    [Product Name]
    ,QOH = sum(case when [Product Status]='Storage' then 1 else 0 end)
group by 
    [Product Name] 
```

# nginx - nginx正则表达式上的这个'（？U）'是什么意思

> ID：15657486
> 
> 赞同：3
> 
> 时间：2013-03-27T11:14:01.120
> 
> 标签：nginx, fastcgi

我正在阅读 nginx 的文档，但是我不知道这个 '(?U)' 在这个正则表达式中做了什么。

[http://wiki.nginx.org/HttpFastcgiModule#fastcgi_split_path_info](http://wiki.nginx.org/HttpFastcgiModule#fastcgi_split_path_info)

这是一个例子。脚本 show.php 接收字符串 article/0001 作为参数。以下配置将正确处理路径拆分：

```
location ~ ^.+\.php {
  (...)
  fastcgi_split_path_info ^((?U).+\.php)(/?.+)$;
  fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
  fastcgi_param PATH_INFO $fastcgi_path_info;
  fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;
  (...)
} 
```

请求 /show.php/article/0001 将 SCRIPT_FILENAME 设置为 /path/to/php/show.php 并将 PATH_INFO 设置为 /article/0001。

这个正则表达式还不够吗？

```
fastcgi_split_path_info ^((?U).+\.php)(/?.+)$; 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T15:45:34.683

?U 是正则表达式中的不贪婪匹配。默认情况下，正则表达式使用“贪婪”模式。

在这种情况下，它是必需的。使用**贪婪**匹配，以下请求

```
/show.php/article/0001/another.php/something 
```

将脚本部分设置为

```
/show.php/article/0001/another.php 
```

这可能会导致意外的安全问题。

[**更新**]

nginx 使用 pcre 正则表达式：[http ://www.pcre.org/pcre.txt](http://www.pcre.org/pcre.txt)

> ```
>  (?U)            default ungreedy (lazy) 
> ```

# sdk - 如何在 Corona sdk 中使用贝宝？

> ID：15657491
> 
> 赞同：0
> 
> 时间：2013-03-27T11:14:16.933
> 
> 标签：sdk, paypal, coronasdk

**如何在 Corona sdk 中使用贝宝？**

```
In my app i have book items i couldn't use of inapp so i deceid to use paypal i did'nt know how to process paypal in corona sdk ...help me 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T05:49:34.703

由于 Corona 还没有可用的 PayPal 插件，因此您必须显示一个网络弹出窗口，而不是苹果的一键式应用内购买，并且对于客户来说会稍微复杂一些，但这是在 PayPal 插件之前您拥有的最好的可用。有关 PayPal 集成的更多信息，请查看：http: [//jonbee.be/post/1208865269/on-implementing-in-app-purchase-using-the-corona-sdk](http://jonbee.be/post/1208865269/on-implementing-in-app-purchase-using-the-corona-sdk)

-- 莫克什

# c# - 如何使用构建后事件命令行更改 Dotfuscator 中的库模式

> ID：15657494
> 
> 赞同：1
> 
> 时间：2013-03-27T11:14:34.923
> 
> 标签：c#, visual-studio-2010, command-line, dotfuscator

我正在尝试使用 Visual Studio 2010 附带的 Dotfuscator CE 工具对 ac# 项目进行混淆，并借助以下命令对代码进行了混淆。

![在此处输入图像描述](../Images/7e6534332991c95cdad74a643898d1c5.png)

但它不会对私有或公共方法名称进行任何更改，我知道通过更改 Assemblies-->Properties 下的“库模式”，我应该能够重命名这些函数。

![在此处输入图像描述](../Images/9a44bbbca4a198fd62e0a2dd6a6c71ab.png)

但我不知道如何在构建后事件命令行中包含库属性。有人可以帮忙吗..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:16:32.853

根据dofuscator命令行的帮助文本：

```
Extended Options:
        /in:[+|-]<file>[,[+|-]<file>]                : specify input assemblies. Use prefix to obfuscate input as public(+) or private(-) assembly, use : after the filename to specify a package type 
```

因此，默认情况下，只是做`/in:foo.exe`意味着`foo.exe`被视为不在库模式下。要在库模式下对其进行混淆，请使用如下`+`符号`/in:+foo.exe`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T14:52:56.233

厄茨，

你是部分正确的，默认情况下 exe 禁用库模式，但 dll 则相反。如果您查看 San 的原始帖子，您可以清楚地看到他正在混淆一个 dll，因此是他的问题。

# c# - 如何在 datagridview 中显示特定日期的约会。??(C#)

> ID：15657498
> 
> 赞同：0
> 
> 时间：2013-03-27T11:14:53.427
> 
> 标签：c#, datagridview

我有一个问题：我正在制作一个带有数据库连接（访问数据库）的日历应用程序。有了这个应用程序，人们可以添加约会，如果他们按下某个日期（例如 3 月 24 日），就可以查看他们的约会。但现在显示了数据库的所有信息，这不是我想要的。我想显示用户单击的按钮（日期）的约会，而不是数据库的所有操作。

```
private void button2_Click(object sender, EventArgs e)
        {
            string selectie = " SELECT * FROM Appointment Order by AppointmentDate ";
            OleDbConnection calendarconn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;data source=C:\Users\derek\Dropbox\C#_Project_Calender\Versie 1.0\Kalenderdb.accdb");
            if (calendarconn != null)
            {
                Debug.WriteLine("calendarconn is not null: " + calendarconn);
                calendarconn.Open();
                OleDbCommand cmd = new OleDbCommand(selectie, calendarconn);
                OleDbDataReader reader = cmd.ExecuteReader();

                DataTable dt = new DataTable();

                dt.Load(reader);

                // achter je grid 
                this.dataGridView1.DataSourc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:41:01.903

首先，您可以使用日期时间选择器的“ValueChanged”事件。
当用户从日历中选择日期时。然后这个事件将被触发。

您在此处编写代码并更新查询，如下所示：

```
private void dateTimePicker1_ValueChanged(object sender, EventArgs e)
{
    string selectie = " SELECT * FROM Appointment where AppointmentDate like '"+dateTimePicker1.Value.ToShortDateString()+"'  Order by AppointmentDate ";
} 
```

您还可以更改日期的格式，如下所示。

```
dateTimePicker1.Value.ToString("yyyyMMdd"); 
```

2013 年 3 月 27 日将显示为 20130327

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:33:24.363

改写您的选择语句以过滤：

`"SELECT * FROM Appointment WHERE AppointmentDate = @AppointmentDate"`

然后向您的 OleDbCommand 对象添加一个参数：

`cmd.Parameters.AddWithValue("@AppointmentDate", DateTime.Today);`

# mongodb - 在聚合框架中给出完整时间戳时如何按日期聚合？

> ID：15657501
> 
> 赞同：32
> 
> 时间：2013-03-27T11:15:09.697
> 
> 标签：mongodb, aggregation-framework

我有一个错误集合，因此每个错误都带有一个`date`字段。如何仅按 DAY 聚合/计数/分组错误（即排除一天中的时间）？我想，应该应用一些智能投影。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-27T13:13:39.363

您可以使用以下聚合运算符来执行此操作：

*   [$组](http://docs.mongodb.org/manual/reference/aggregation/group/)
*   [$年](http://docs.mongodb.org/manual/reference/aggregation/year/)
*   [$月](http://docs.mongodb.org/manual/reference/aggregation/month/)
*   [$dayOfMonth](http://docs.mongodb.org/manual/reference/aggregation/dayOfMonth/)

这为您提供了每个日期的错误计数：

```
db.errors.aggregate(
    { $group : {
        _id: {
            year : { $year : "$date" },        
            month : { $month : "$date" },        
            day : { $dayOfMonth : "$date" },
        },
        count: { $sum: 1 }
    }}
); 
```

此示例假定错误文档中的日期字段为[BSON Date](http://docs.mongodb.org/manual/core/document/#date)`date`类型。MongoDB 中还有一个 Timestamp 类型，但是[文档](http://docs.mongodb.org/manual/core/document/#timestamps)明确不鼓励使用这种类型：

> 注意：BSON Timestamp 类型供内部 MongoDB 使用。大多数情况下，在应用程序开发中，您会希望使用 BSON 日期类型。有关详细信息，请参阅日期。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-04-23T08:32:22.577

您可以使用[$project （聚合）将时间戳字段转换为具有特定日期格式的字符串](https://docs.mongodb.com/manual/reference/operator/aggregation/project/)

```
aggregate([
    {
        '$project': {
            newFieldName: {'$dateToString': {format: '%Y-%m-%d', date: '$yourDateFieldName'}}
        }
    }, {
        '$group': {
            _id: {newFieldName: '$newFieldName'},
            viewCount: {'$sum': 1}
        }
    }, 
    {'$sort': {'_id.newFieldName': 1}}
], {}) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-06-05T11:26:04.693

由于 mongo 2.6 有[$dateToString](https://docs.mongodb.com/manual/reference/operator/aggregation/dateToString/)函数可以这样使用`aggregate`：

```
db.errors.aggregate([   
 {
   $group : {
    _id: { $dateToString: { format: "%Y-%m-%d", date: "$date" }},
    count: { $sum: 1 }
   }
 }
]); 
```

# javascript - 如何从另一个firefox add on调用firefox add on中的函数

> ID：15657504
> 
> 赞同：-1
> 
> 时间：2013-03-27T11:15:14.797
> 
> 标签：javascript, firefox, web-applications, firefox-addon, firefox-addon-sdk

我正在公司的一个项目上工作，我必须决定是构建一个 Web 应用程序还是一个 Firefox 插件，然后发布。

构建 Firefox 插件的主要动机是能够在其他插件中调用函数。

对不起，如果我说一些愚蠢的话，我没有使用 firefox 或附加组件的经验，也找不到任何有用的东西。我将非常感谢任何信息，甚至是关于从哪里开始我的研究的提示。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:24:21.090

如果您需要有关构建 Firefox 插件或扩展的信息，这是您需要去的地方

[https://developer.mozilla.org/en-US/docs/Building_an_Extension](https://developer.mozilla.org/en-US/docs/Building_an_Extension)

MDN 文档是最完整的 JavaScript 文档之一，您将大量使用它来进行扩展。你的大部分疑惑应该在那里被清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:28:26.613

答案 1 更像是一种为 Firefox 构建附加组件的老式方法。Mozilla 一直在开发一种更新的、更像网络的 api，称为 Add-on SDK：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/index.html#getting-started](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/index.html#getting-started)

# python - 使用 swig 向 python 公开不透明类型

> ID：15657514
> 
> 赞同：0
> 
> 时间：2013-03-27T11:15:46.313
> 
> 标签：python, c, swig, opaque-pointers

我正在尝试使用 SWIG 在 C 中包装不透明类型，但我不明白如何。我在下面列出了三个文件：

简单库.c：

```
#include <assert.h>
#include <stdlib.h>
#include "simplelib.h"

struct _simplelib_my_type {
    double x;
    double y;
};

simplelib_MyType *
simplelib_mytype_create(double x, double y)
{
    simplelib_MyType *mt = NULL;
    if (mt = calloc(1, sizeof(*mt))) {
        mt->x;
        mt->y;
    }
    return mt;
}

void
simplelib_mytype_destroy(simplelib_MyType *mt)
{
    if (mt) {
        free(mt);
        mt = NULL;
    }
}

int
simplelib_mytype_calc(const simplelib_MyType *mt, double z, double *res)
{
    int ok = 0;
    assert(mt);
    if (z != 0.0) {
        *res = mt->x * mt->y / z;
        ok = 1;
    }
    return ok;
} 
```

简单库.h：

```
#ifndef SIMPLELIB_H
#define SIMPLELIB_H

typedef struct _simplelib_my_type simplelib_MyType;

simplelib_MyType *simplelib_mytype_create(double x, double y);
void simplelib_mytype_destroy(simplelib_MyType *mt);

int simplelib_mytype_calc(const simplelib_MyType *mt, double z, double *res);

#endif // SIMPLELIB_H 
```

和我的接口文件 simplelibswig.i：

```
%module simplelibswig
%{
    extern "C" {
        #include "simplelib.h"
    }
%}

%include "simplelib.h" 
```

我使用 CMake 构建一切，使用这个 CMakeLists.txt：

```
project(simplelib)
cmake_minimum_required(VERSION 2.8)

find_package(SWIG REQUIRED)
include(${SWIG_USE_FILE})

find_package(PythonLibs)
include_directories(${PYTHON_INCLUDE_PATH})
include_directories(${CMAKE_CURRENT_SOURCE_DIR})
SET(CMAKE_SWIG_FLAGS "")

SET_SOURCE_FILES_PROPERTIES(simplelibswig.i PROPERTIES CPLUSPLUS ON)
SET_SOURCE_FILES_PROPERTIES(simplelibswig.i PROPERTIES SWIG_FLAGS "-includeall")

add_library(${PROJECT_NAME}
    simplelib.h
    simplelib.c
)

swig_add_module(simplelibswig python simplelibswig.i)
swig_link_libraries(simplelibswig ${PYTHON_LIBRARIES} ${PROJECT_NAME}) 
```

现在，我想做的是 1）将不透明类型从 simplelib_MyType 重命名为 MyType 2）使用 %extend 使用构造函数/析构函数/方法公开类型

问题是上面没有暴露构建的python模块中的类型。我希望接口文件将 typedef 公开为具有 typedefed 名称的类，但这并没有发生。因此，我无法继续讨论上面的第 1 点和第 2 点。我究竟做错了什么？

最好的问候， 里卡德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:07:08.970

Swig 需要为你的 opaque 类型定义一个定义，以允许它被暴露和扩展。即使是不准确的人也会这样做：

```
%module simplelibswig
%{
    extern "C" {
        struct _simplelib_my_type { int _unused; };
        #include "simplelib.h"
    }
%}

struct _simplelib_my_type { int _unused; };
%include "simplelib.h" 
```

为了让 SWIG 还管理不透明对象的内存，创建和销毁它们的函数应标记为：

```
%newobject simplelib_mytype_create;
%delobject simplelib_mytype_destroy;
%include "simplelib.h" 
```

现在，如果 Python 代码调用`simplelib_mytype_create`返回值将由 Python 而不是 C 代码拥有，并且在所有引用被销毁时将被释放。但是如果`simplelib_mytype_destroy`函数被调用，Python 会知道该对象已经被释放并且不会再次释放它。

您现在也可以`%extend`输入`%rename`类型：

```
%module simplelibswig
%{
    struct _simplelib_my_type { int _unused; };
    #include "simplelib.h"
%}

%rename(opaque) _simplelib_my_type;

struct _simplelib_my_type { int _unused; };
%newobject simplelib_mytype_create;
%delobject simplelib_mytype_destroy;
%include "simplelib.h"

%extend _simplelib_my_type {
    _simplelib_my_type(double a,double b) { return simplelib_mytype_create(a,b); }
    %apply double *OUTPUT { double* res };
    int calc(double z, double *res) { return simplelib_mytype_calc($self,z,res); }
    ~_simplelib_my_type() { simplelib_mytype_destroy($self); }
} 
```

### 输出

```
>>> import simplelibswig
>>> simplelibswig.opaque(1.2,3.4)
<simplelibswig.opaque; proxy of <Swig Object of type 'simplelib_MyType *' at 0x0000000002872DE0> >
>>> a=simplelibswig.opaque(1.2,3.4)
>>> a.calc(3.4)
[1, 1.2]
>>> a.calc(1.2)
[1, 3.4000000000000004] 
```

# ruby-on-rails - ruby on rails 类、类、数组和方法

> ID：15657515
> 
> 赞同：2
> 
> 时间：2013-03-27T11:15:47.637
> 
> 标签：ruby-on-rails, arrays, class, where, rails-activerecord

我完全误解了rails中的机制......想象一个具有许多属性的产品模型：

```
class Product < ActiveRecord::Base
    has_many :properties
end 
```

然后，在控制台中，我输入：

```
p=Product.last #recover the last product created
arr=p.properties #return the properties in an Array
arr.class #return "Array", so it's effectively an Array object. 
```

在 Hirb 中，它给了我：

```
1.9.3-p385 :161 > arr=p.properties
| id        | name        | presentation  | created_at              | updated_at              | value_type |
+-----------+-------------+---------------+-------------------------+-------------------------+------------+
| 905834907 | internet    | internet      | 2012-09-17 13:37:57 UTC | 2012-10-02 15:46:37 UTC | boolean    |
| 905834906 | three_d     | 3D            | 2012-09-17 13:37:47 UTC | 2012-10-10 13:10:07 UTC | boolean    |
| 161337574 | brand       | Marque        | 2012-05-22 14:13:04 UTC | 2013-03-26 16:12:12 UTC | string     | 
```

ETC...

然后，如果我这样做：

```
1.9.3-p385 :162 > arr.where(:value_type => "boolean")
  Spree::Property Load (0.8ms)  SELECT "spree_properties".* FROM "spree_properties" INNER JOIN "spree_product_properties" ON "spree_properties"."id" = "spree_product_properties"."property_id" WHERE "spree_product_properties"."product_id" = 1060500665 AND "spree_properties"."value_type" = 'boolean'
+-----------+----------+--------------+-------------------------+-------------------------+------------+
| id        | name     | presentation | created_at              | updated_at              | value_type |
+-----------+----------+--------------+-------------------------+-------------------------+------------+
| 905834907 | internet | internet     | 2012-09-17 13:37:57 UTC | 2012-10-02 15:46:37 UTC | boolean    |
| 905834906 | three_d  | 3D           | 2012-09-17 13:37:47 UTC | 2012-10-10 13:10:07 UTC | boolean    |
| 905834914 | wifi     | wifi         | 2013-03-26 16:13:35 UTC | 2013-03-26 16:13:35 UTC | boolean    | 
```

所以我在数组上运行 where 方法......但是：

```
tab.method(:where) #returns:
NameError: undefined method `where' for class `Array' 
```

如何在无法识别的对象上执行 where ？我有个想法：

```
1.9.3-p385 :164 > arr.klass
 => Spree::Property(id: integer, name: string, presentation: string, created_at: datetime, updated_at: datetime, value_type: string) 
```

但我真的不明白这种机制......这对我来说在面向对象的语言中是全新的。

谢谢你的解释。

酸碱度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:05:57.660

问题是你实际上并没有得到一个实例，`Array`而是一个`ActiveRecord::Relation`. 这是为了让您将所有这些指令链接在一起，如果您尝试访问结果，则会执行底层关系并将其转换为数组。Pry 会自动尝试显示结果，以便触发这些转换。

您可以通过执行以下操作来看到这一点：

```
[1] pry(main)> Customer.first.contracts ; nil
  Customer Load (0.6ms)  SELECT `customers`.* FROM `customers` LIMIT 1
=> nil

[2] pry(main)> Customer.first.contracts
  Customer Load (0.5ms)  SELECT `customers`.* FROM `customers` LIMIT 1
  Contract Load (0.7ms)  SELECT `contracts`.* FROM `contracts` WHERE `contracts`.`customer_id` = 1
=> [...results...]

[3] pry(main)> class ActiveRecord::Relation
[3] pry(main)*   def to_a
[3] pry(main)*     puts "I converted me (#{(class << self ; self ; end).superclass}) to an Array"
[3] pry(main)*     logging_query_plan do
[3] pry(main)*       exec_queries
[3] pry(main)*     end
[3] pry(main)*   end
[3] pry(main)* end
=> nil

[4] pry(main)> Customer.first.contracts ; nil
I converted me (ActiveRecord::Relation) to an Array
  Customer Load (0.5ms)  SELECT `customers`.* FROM `customers` LIMIT 1
=> nil

[5] pry(main)> Customer.first.contracts
I converted me (ActiveRecord::Relation) to an Array
  Customer Load (0.6ms)  SELECT `customers`.* FROM `customers` LIMIT 1
I converted me (ActiveRecord::Relation) to an Array
  Contract Load (0.6ms)  SELECT `contracts`.* FROM `contracts` WHERE `contracts`.`customer_id` = 1
=> [...results...] 
```

**步骤 [1]：**只有`Customer`被获取。-relation`contracts`仍未执行，因为 Pry 不尝试访问它（由于`; nil`）

**步骤 [2]：**与 1 相同。但 Pry 尝试访问关系，因此我们也获取这些关系。

**步骤 [3]：**我们重写 ActiveRecord::Relation.to_a 方法。我只添加了`puts`其余的是原始方法（使用 super 会导致循环！）。

**步骤 [4]：**重复 1\. 和 2。现在，每次转换都会触发一条附加消息。

Ruby 中的元编程非常复杂，会引起很多麻烦，但我希望这能让事情变得清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:36:57.640

好问题！

控制台的工作方式有点误导：

```
p=Product.last #recover the last product created
arr=p.properties #return the properties in an Array
arr.class #return "Array", so it's effectively an Array object. 
```

`arr.class`返回“Array”，因为控制台并`activerecord`希望帮助您作为程序员。所以他们做 a`arr.all.class`而不是`arr.class`.

做一个`arr.to_sql`，你会看到这将导致 SQL。Array 对象没有方法`to_sql`。

由于延迟加载，您可以将`where(:value_type => "boolean")`其用作`arr`.

查看[http://xyzpub.com/en/ruby-on-rails/3.2/queries.html#lazy_loading](http://xyzpub.com/en/ruby-on-rails/3.2/queries.html#lazy_loading)了解更多关于延迟加载的信息。

# javascript - 如何在 javascript 中使用 webkitAnimationIteration 事件正确停止无限 CSS 动画？

> ID：15657519
> 
> 赞同：0
> 
> 时间：2013-03-27T11:16:03.707
> 
> 标签：javascript, css, html, animation, webkit

我在每次迭代时都无法准确地停止 CSS 动画。我有一个 CSS 动画，我想在调用一个函数时播放它，并在我调用另一个函数时再次向后播放。为此，我在 CSS/javascript 中设置了一个无限动画，如下所示：

```
function setup(container, element){
   var elem = document.getElementById(container).getElementsByClassName(element)[0];
   elem.style.webkitAnimationName=elemento+"_move";
   elem.style.webkitAnimationDuration="350ms";
   elem.style.webkitAnimationPlayState = "paused";
   elem.style.webkitAnimationDirection="alternate";
   elem.style.webkitAnimationIterationCount = "infinite";
   elem.addEventListener("webkitAnimationIteration", pause, false);
} 
```

请注意，我在最后一行设置了一个 eventListener ，以便动画在每次迭代时使用 fallowing 函数暂停：

```
function pause(event){
    this.style.WebkitAnimationPlayState = "paused";
} 
```

当我向前播放动画时，该函数工作正常，但是当我使用另一个函数将“WebkitAnimationPlayState”设置为“正在运行”并且向后播放时，它会停止。就像一帧出来的地方。这是我用来让它重新启动的功能：

```
function run(container, element){
    var elem = document.getElementById(container).getElementsByClassName(elemento)[0];
    elem.style.WebkitAnimationPlayState = "running";
} 
```

我不知道它是向前还是向后一帧，但每次尝试它的距离都是不同的。我相信该函数会在迭代真正结束之前暂停动画（Apple [Documentations](http://developer.apple.com/library/safari/#documentation/AudioVideo/Reference/WebKitAnimationEventClassReference/WebKitAnimationEvent/WebKitAnimationEvent.html)说它会在最后）。

这是我到目前为止所做的。 [演示](http://bitlock.com.br/arquivos/amima)

您会注意到帧的右边框不会回到动画之前的位置。

有人有线索吗？谢谢

# c# - 如何在 C# wpf 中读取图像尺寸 - BitmapImage 没有 dispose 方法

> ID：15657520
> 
> 赞同：-1
> 
> 时间：2013-03-27T11:16:04.037
> 
> 标签：c#, wpf, image, .net-4.5, bitmapimage

通过以下方式，我可以阅读。

但是没有 dispose 方法，所以我以后无法删除该文件。

所以下面的方法失败了。

我想不出一个合适的解决方案。

在 C# 4.5 WPF 应用程序中无法识别位图类。

谢谢你

```
 DirectoryInfo dInfo = new DirectoryInfo(@"C:\pokemon_files\images\");
    FileInfo[] subFiles = dInfo.GetFiles();

    BitmapImage myImg;
    foreach (var vrImage in subFiles)
    {
        string srFilePath = vrImage.FullName;
        System.Uri myUri = new Uri(srFilePath);
        myImg = new BitmapImage(myUri);

        if (myImg.Width < 50)
        {
            File.Delete(srFilePath);
            continue;
        }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:22:09.267

我假设您得到的错误是由于尝试删除位图当前正在使用的文件引起的（我不记得异常名称）。

有一个解决方案，那就是：制作一个字节流。

```
byte[] imageData;

using(var fileStream = new FileStream(filePath, FileMode.Open, FileAccess.Read))
using(var binaryReader = new BinaryReader(fileStream))
{
    imageData = binaryReader.ReadBytes((int)fileStream.Length);
}

var bitmap = new BitmapImage();
bitmap.BeginInit();
bitmap.StreamSource = new MemoryStream(imageData);
bitmap.EndInit();

//Now you can check the width & height, the file stream should be closed so you can
//delete the file. 
```

[编辑] 如果您不想通过 读取字节，如果您想从文件中读取所有字节，`BinaryReader`总是有[这个解决方案。](https://stackoverflow.com/a/10038017/1180426)

# c# - .Net Combo Box 简单样式无需编辑

> ID：15657523
> 
> 赞同：0
> 
> 时间：2013-03-27T11:16:19.917
> 
> 标签：c#, .net, winforms

`DropDownStyle = Simple`组合框控件时如何禁用编辑或隐藏文本编辑字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:54:34.547

如果您确实需要在 Combox 上实现此效果，您可以捕获诸如“TextChanged”之类的事件，然后将其设置回“”，并在将项目添加到 Items 集合之前询问是否 (!comboBox1.DropDownStyle == ComboBoxStyle.Simple)。尽管似乎有更好的方法可以使用之前建议的列表框来实现类似的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:30:19.437

[ComboBox.DropDownStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.dropdownstyle.aspx)上的 MSDN ：

> DropDownStyle 属性指定是否始终显示列表或列表是否显示在下拉列表中。**DropDownStyle 属性还指定是否可以编辑文本部分。**

[ComboBoxStyle.Simple](http://msdn.microsoft.com/en-us/library/system.windows.forms.comboboxstyle.aspx)上的文档：

> 指定列表始终可见并且文本部分是可编辑的。这意味着用户可以输入新值，而不仅限于选择列表中的现有值。

因此，`ComboBoxStyle.Simple`建议该列表可以由用户编辑，并且使用此选项禁用编辑会令人困惑`DropDownStyle`。备择方案：

*   如果您对下拉列表没问题，请使用`ComboBoxStyle.DropDownList`
*   如果要显示具有类似视图的不可编辑列表，请`ComboBoxStyle.Simple`考虑使用[ListBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.aspx)

# visual-studio - 使用自定义 ICompletionSourceProvider 扩展 VS2012 Javascript Intellisense

> ID：15657525
> 
> 赞同：2
> 
> 时间：2013-03-27T11:16:26.553
> 
> 标签：visual-studio, intellisense, visual-studio-extensions

我创建了一个新类，如下所示

```
[Order(Before = "High")] [Export(typeof(ICompletionSourceProvider))]
[ContentType("JavaScript"), Name("EnhancedJavaScriptCompletion")] 
internal sealed class JavaScriptCompletionSourceProvider 
   : ICompletionSourceProvider 
{ } 
```

和`CompletionSource`

```
internal sealed class CompletionSource : ICompletionSource, IDisposable
{
    public void AugmentCompletionSession(ICompletionSession session, IList<CompletionSet> completionSets)
    {
    }
    public void Dispose()
    {
    }
} 
```

这些都添加到`Visual Studio Package`项目中。因此，当我尝试调试（使用 F5）时，我可以看到正在加载调试符号，并且调试在

```
protected override void Initialize()
{
    Debug.WriteLine(string.Format(CultureInfo.CurrentCulture, "Entering Initialize() of: {0}", this.ToString()));
    base.Initialize();
} 
```

但是，当我正在编辑一个 .js 文件并调用智能感知（即那个点）时，调试器不会`.`闯入我的类的方法。`ICompletionSourceProvider``ICompletionSource`

所以我的问题是：

*   1-5 关于此截屏视频中解决的标准 Javascript Intellisense 的问题[http://screencast.com/t/TwDlnpfOV0bX](http://screencast.com/t/TwDlnpfOV0bX)
*   6 我们如何`javascript`通过额外的选项扩展标准智能感知？
*   7 同一个班可以有两个`ICompletionSourceProvider`班`ContentType`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T05:39:42.047

您的扩展未组合的原因是您尚未将其作为 MEF 组件添加到 .vsixmanifest 中。要添加它，

1.  通过双击解决方案资源管理器中的文件打开 .vsixmanifest 设计器。
2.  点击断言
3.  点击右侧的“新建”
4.  选择“Microsoft.VisualStudio.MefComponent”作为类型
5.  选择“当前解决方案中的项目
6.  选择您的扩展项目

# c# - 如何使用 Android C# 以编程方式检查 CheckBox？

> ID：15657527
> 
> 赞同：2
> 
> 时间：2013-03-27T11:16:33.977
> 
> 标签：c#, android, checkbox, xamarin

如何使用 Android C# 以编程方式检查 CheckBox？我找不到任何解决方案，只有 Java 示例。

我尝试使用 SetChecked 但该功能不存在。

```
void btnChangeCB_Click(object sender, EventArgs e){
if (cb1.Checked == true) {
    cb1.Toggle ();
  } 
```

无论如何，我可以切换复选框，但我无法检查它们:(。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T11:19:29.320

只需分配`true`给`Checked`属性：

```
cb1.Checked = true; // Check the checkbox. 
```

在 Java 中属性不存在。他们使用 Get/Set 方法对。Xamarin 将它们压缩成一个属性：

在 Java 中：

```
public bool GetChecked();
public void SetChecked(bool value); 
```

在 C# 中：

```
public bool Checked { get; set; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:28:40.823

**检查复选框**

```
checkBox1.Checked = true; 
```

**取消选中复选框**

```
checkBox1.Checked = false; 
```

# animation - 画布，同时 2 个 lineTo-paths

> ID：15657529
> 
> 赞同：1
> 
> 时间：2013-03-27T11:16:37.430
> 
> 标签：animation, canvas, path, line

我想画一条线，同时画一条线，同时画出水平反射的线。所以用户正在做 2 笔画。问题是画布只有一个上下文对象，不能被两个单独的 lineTo 命令使用。我该如何解决这个问题，或者这需要一个动画帧吗？

这里是一行代码：

[链接] [http://jsfiddle.net/FgNQk/1/](http://jsfiddle.net/FgNQk/1/)

```
 var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    var width  = window.innerWidth;
    var height = window.innerHeight;
    canvas.height = height;
    canvas.width = width;
    canvas.addEventListener('mousedown', function(e) {
        this.down = true;   
        this.X = e.pageX ;
        this.Y = e.pageY ;
        this.color = rgb();
    }, 0);
    canvas.addEventListener('mouseup', function() {
        this.down = false;          
    }, 0);
    canvas.addEventListener('mousemove', function(e) {

        if(this.down) {
             with(ctx) {
                beginPath();
                moveTo(this.X, this.Y);
                lineTo(e.pageX , e.pageY );
                strokeStyle = "rgb(0,0,0)";
                ctx.lineWidth=1;
                stroke();
             }
             this.X = e.pageX ;
             this.Y = e.pageY ;
        }
    }, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:32:11.640

**一次做 2 条线路路径**

*   将线段点存储在数组中。
*   然后以原始形式和水平反射形式重新绘制每个线段。

下面的红线是用户黑线的横轴反射 ![在此处输入图像描述](../Images/5847c6d5cc4b18650fb2494f599d8cf7.png)

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/XhUdS/](http://jsfiddle.net/m1erickson/XhUdS/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

     var canvas = document.getElementById('canvas');
     var ctx = canvas.getContext('2d');
     var width = window.innerWidth;
     var height = window.innerHeight;

     var points=[];
     var startingX;
     var startingY;

     canvas.height = height;
     canvas.width = width;
     canvas.addEventListener('mousedown', function (e) {
         this.down = true;
         this.X = e.pageX;
         this.Y = e.pageY;
         startingX=e.pageX;
         startingY=e.pageY;
         //this.color = rgb();
     }, 0);
     canvas.addEventListener('mouseup', function () {
         this.down = false;
         points=[];
     }, 0);
     canvas.addEventListener('mousemove', function (e) {
         if (this.down) {
             with(ctx) {
                 points.push({x:e.pageX,y:e.pageY});
                 drawWithHorizontalAxisReflection()
             }
         }
     }, 0);

      function drawWithHorizontalAxisReflection(){
          ctx.clearRect(0,0,canvas.width,canvas.height);
          ctx.lineWidth=3;
          for(i=1;i<points.length;i++){
              // the users line (black)
              ctx.beginPath();
              ctx.moveTo(points[i-1].x,points[i-1].y);
              ctx.lineTo(points[i].x,points[i].y);
              ctx.strokeStyle="black";
              ctx.stroke();
              // line reflected along horizontal axis (red)
              ctx.beginPath();
              ctx.moveTo(points[i-1].x,2*startingY-points[i-1].y);
              ctx.lineTo(points[i].x,2*startingY-points[i].y);
              ctx.strokeStyle="red";
              ctx.stroke();
          }
      }

}); // end $(function(){});
</script>

</head>

<body>

    <canvas id="canvas" width=300 height=300></canvas>

</body>
</html> 
```

# php - php mysql重复主键

> ID：15657533
> 
> 赞同：0
> 
> 时间：2013-03-27T11:16:55.400
> 
> 标签：php, mysql

我已经建立了一个这样的表：

```
$query = "CREATE TABLE $singleton(
ID int NOT NULL AUTO_INCREMENT, PRIMARY KEY(ID),
sort_order INTEGER)"; 
```

当我在 25 次后填写一些东西时没有问题

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[23000]: 
Integrity constraint violation: 1062 Duplicate entry '26' for key 'PRIMARY'' in........ 
```

这似乎是一个错误，因为我不想操纵 ID ..

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:23:12.993

看起来语法导致错误。

CREATE TABLE 单例（P_Id int NOT NULL AUTO_INCREMENT，PRIMARY KEY (P_Id)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:08:09.457

primary key(column_name) 是 create 语句的表级选项，所以最后提一下

```
CREATE TABLE $singleton(
ID int NOT NULL AUTO_INCREMENT,sort_order INTEGER, PRIMARY KEY(ID)
); 
```

或使用以下查询

```
CREATE TABLE $singleton(
ID int NOT NULL AUTO_INCREMENT PRIMARY KEY,sort_order INTEGER)"; 
```

# highcharts - HighStock 数据分组近似函数

> ID：15657535
> 
> 赞同：2
> 
> 时间：2013-03-27T11:16:59.830
> 
> 标签：highcharts

HighStock 中的数据分组允许我们从一组点中得出一个唯一值的近似值。

文档说一些预先构建的近似函数可用：

“ `average`”、“ `open`”、“ `high`”、“ `low`”、“ `close`”和“ `sum`”

我们可以很容易地想象“平均”返回所有输入值的平均值，高取最高，低取最低，总和求和（不确定这个是什么？）

问题是，' `open`' 和 ' `close`' 近似函数是做什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-29T19:07:40.187

基本上，通过查看[源代码](http://code.highcharts.com/stock/highstock.src.js)，“打开”（或“关闭”）近似值从数组中获取第一个（或最后一个）值（如果值组非空）：

```
open: function (arr) {
    return arr.length ? arr[0] : (arr.hasNulls ? null : UNDEFINED);
},
...
close: function (arr) {
    return arr.length ? arr[arr.length - 1] : (arr.hasNulls ? null : UNDEFINED);
},
... 
```

# javascript - 最新版本的 jQuery 在 IE8 中出现 Javascript 错误

> ID：15657536
> 
> 赞同：1
> 
> 时间：2013-03-27T11:17:01.430
> 
> 标签：javascript, jquery, jquery-ui, internet-explorer-8, cdn

我开发了一个预订引擎，它与最新版本的 jQuery 和 jQuery UI 一起工作（通过谷歌 CDN）

它在大多数浏览器中都能正常工作，但是 Internet Explorer 8 返回以下 Java 错误：

```
Description:Object doesn't support property or method 'getContext'
Source:http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js
Line:3 
```

任何人都可以提出一个不会破坏现代浏览器中任何东西的解决方法:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:20:51.043

IE8 不支持，你可以使用一个名为[explorercanvas](https://code.google.com/p/explorercanvas/)`canvas`的 JavaScript 库来模拟它。

IE9 确实如此，如果您使用的是 IE9 并且收到该错误，则您可能处于不同的浏览器模式/文档模式，前提是您调用的是`canvas`对象。按F12打开开发者工具，选择IE9浏览器模式和文档模式。

如果您有旧的无效 doctype 声明，这些可能会更改，请确保您将 HTML5 doctype 作为文档的第一行包括在内：

```
<!DOCTYPE html> 
```

# android - 我应该使用什么来保护 REST Web 服务中的参数

> ID：15657537
> 
> 赞同：1
> 
> 时间：2013-03-27T11:17:02.400
> 
> 标签：android, web-services, security, rest, jersey

我想开发一个身份验证网络服务，可以在安卓应用程序中使用它来登录并访问其他服务。所以基本上我正在通过 HTTP 请求发送凭据，并在一切正常的情况下授予用户访问权限。我需要保护这些凭据，这样它们就不会被不受欢迎的用户截获。

我将 Eclipse 与 Tomcat 7、Jersey 一起用于我的其余 web 服务、spring 和 hibernate。我的网络服务是这样的

```
@GET
@Path("/login/{id}/{pass}")
@Produces(MediaType.TEXT_HTML)
public String login(@PathParam("id") int id,@PathParam("pass") String pass) {
    String res="Null parameters";

    if(id!=0 && !pass.isEmpty())
    {
        try {
            User user = service.getOne(id);
            if(user.getPass().equals(pass))
                res="Success";
            else
                res="Fail";
        }
        catch (Exception e) {
            res="User not found";
        }
    }
    return "<html> " + "<title>" + "Result" + "</title>"
    + "<body><h1>" + res + "</body></h1>" + "</html> ";
} 
```

我正在使用它来测试浏览器，我还没有开始编写客户端代码。

我真的在这里摸不着头脑，我一直在浏览网络，有些人在谈论 OAuth 2.0，有些人在谈论 HMAC，我不知道该使用哪个，如果还有其他方法请告诉我.

如果您知道有关如何为我的项目实施安全性的有用教程，那就太好了，欢迎提出任何其他建议。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:28:25.140

这实际上取决于您的应用程序所需的安全级别。

有很多复杂的安全系统，但对于大多数应用程序来说，这些都是多余的。

如果您只是在寻找一些基本的密码保护，而不处理付款或真正敏感的数据，您可以做以下简单的事情。

1.  如果可以，请将您的服务移动到通过 https 工作。所有数据都将自动受到保护。

2.  散列密码。许多语言已经内置了对简单散列的支持，例如 MD5 和 SHA1，如果没有，您可以谷歌它们的实现，它们经常被使用。这意味着即使您作为管理员也不知道真实密码。您只需将散列通行证保存在数据库中，然后比较散列。

3.  在您的客户端，为您的散列添加盐。可能如果你用谷歌搜索第 2 步，这已经在里面了，否则它只是意味着你做了类似 hash("132rjfASDF!"+password"+vnsadfr1!Z"); 之类的事情。使其更加随机。

这些简单的步骤可以轻松快速地完成，并且会在大多数情况下为您的服务提供所需的所有安全性。如果您真的在处理诸如支付和敏感数据之类的事情，您应该寻找更严肃的解决方案。

附言。不要认为使用 'post' 而不是 'get' 是任何一种安全性，从 Android 的角度来看，使用哪种安全性并不重要。人们将不得不使用程序来获取网络连接以查看链接（例如 WireShark），并且读取 GET 参数与读取 POST 参数一样容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:48:38.103

There's a fair bit of confusion in some of the above answers, and indeed the question itself. Some notes:

*   First off, REST is meant to be stateless. As such you should not have a 'login' function that sets some sort of server-side flag but instead should pass credentials with each and every request
*   Handling the credentials should be done in Jersey in a filter rather than in the individual resource methods. There are various examples on Stack Overflow that show this
*   If you are storing passwords on your server then use BCrypt to hash them. Bcrypt allows you to dial up the time taken to calculate a hash, so gives some measure of future-proofing against Moore's law
*   You should use HTTPS for all communications. It gives you another layer of security and protection for cheap (programming-effort-wise, anyway)
*   If you want to protect the information in your request against tampering then you should look at something like [Hawk](http://github.com/hueniverse/hawk). This gives you the ability to protect your request headers and body against tampering, and can also work as an authentication mechanism as well

There is a lot more to securing your REST endpoints properly, but if you follow the above you'll have hit the major points.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:22:19.733

通常用户名和密码是通过彻底的发布请求发送的，它对用户隐藏它。这很好，以防有人站在你的肩膀上，如果他们能看到 url，那么他们就可以看到你的用户名和密码……除了使用 SSL服务器端..

# eclipse - 每次启动环境时，Eclipse 都会覆盖我的 web.xml

> ID：15657538
> 
> 赞同：1
> 
> 时间：2013-03-27T11:17:02.767
> 
> 标签：eclipse, maven, tomcat

我在 Windows 7 平台上使用 Tomcat 7 运行 Eclipse Juno。

当我用 Maven 构建我的项目时，web.xml 是正确派生的。我进入 eclipse 并刷新并检查我的 target\web.xml，到目前为止一切都很好。我运行 Tomcat 服务器，一切正常。

一旦我重新启动 Eclipse，web.xml 就会回到占位符版本，我必须再次从 Maven 构建并在运行 Tomcat 之前刷新源代码。

我在 Ubuntu 上进行了完全相同的设置，但没有发生这种情况。

在 Project Facets 下，我使用的是 Dynamic Web Module 3.0。

=======

```
<artifactId>nordicedge</artifactId>
  <packaging>war</packaging>
  <name>${project.artifactId}</name>

  <dependencies>
    <dependency>
      <groupId>${project.groupId}</groupId>
      <artifactId>kivadmin2_logic</artifactId>
      <version>${project.version}</version>
    </dependency>
    <dependency>
      <groupId>${project.groupId}</groupId>
      <artifactId>kivUpdater</artifactId>
      <version>${project.version}</version>
    </dependency>
    <dependency>
      <groupId>org.directwebremoting</groupId>
      <artifactId>dwr</artifactId>
      <version>3.0.M1</version>
    </dependency>
     <dependency>
      <groupId>rome</groupId>
      <artifactId>rome</artifactId>
      <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>se.nordicedge</groupId>
        <artifactId>neim</artifactId>
        <version>4.2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>se.nordicedge</groupId>
        <artifactId>neutil</artifactId>
        <version>4.2</version>
        <scope>provided</scope>
    </dependency>
  </dependencies>

  <build>     
    <finalName>${project.artifactId}</finalName>
    <plugins>
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
          <configuration>
            <webXml>${project.build.directory}/web.xml</webXml>
            <warSourceExcludes>**/DSEditor.properties,**/META-INF/context.xml</warSourceExcludes>
          </configuration>
      </plugin>      
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.4</version>
      </plugin>
    </plugins> 
    <resources>
      <resource>
        <directory>${basedir}/src/main/resources</directory>
        <filtering>true</filtering>
      </resource>
      <resource>
        <directory>${basedir}/src/main/webapp/WEB-INF</directory>
        <includes>
          <include>web.xml</include>
        </includes>
        <filtering>true</filtering>
        <targetPath>${project.build.directory}</targetPath>
      </resource>
      <resource>
        <directory>${basedir}/src/main/webapp/WEB-INF/NEIDMgmt</directory>
        <includes>
          <include>DSEditor.properties</include>
        </includes>
        <filtering>true</filtering>
        <targetPath>${project.build.directory}/nordicedge/WEB-INF/NEIDMgmt</targetPath>
      </resource>
      <resource>
        <directory>${basedir}/src/main/webapp/META-INF</directory>
        <includes>
          <include>context.xml</include>
        </includes>
        <filtering>true</filtering>
        <targetPath>${project.build.directory}/nordicedge/META-INF</targetPath>
      </resource>
    </resources>    
  </build> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:34:30.683

如果您使用的是**m2e-wtp**，首先检查您是否处于最新版本，即 0.17。之后，使用[Maven War 插件](http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html)进行资源过滤，以便在标准构建阶段过滤它们：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <configuration>
        <webResources>
            <resource>
                <filtering>true</filtering>
                <directory>src/main/webapp</directory>
                <includes>
                    <include>**/*.xhtml</include>
                    <include>**/*.xml</include>
                </includes>
            </resource>
            <resource>
                <filtering>true</filtering>
                <directory>src/main/resources</directory>
                <includes>
                    <include>**/*.xml</include>
                    <include>**/*.properties</include>
                </includes>
                <targetPath>WEB-INF/classes</targetPath>
            </resource>
        </webResources>
    </configuration>
</plugin> 
```

# core-bluetooth - CoreBluetooth 事件背景 - iOS 6.0.1 及更高版本中没有事件

> ID：15657540
> 
> 赞同：2
> 
> 时间：2013-03-27T11:17:03.790
> 
> 标签：core-bluetooth, bluetooth-lowenergy

我在事件后台模式下使用我的 ble 设备。所以我没有为此在 info.plist 中指定任何特殊内容。

我在这里有两个麻烦：

1) 在 iOS 5.1.1 中，事件出现时没有附件名称。因此，当应用程序在后台时来自 ble 的事件发生时，我会看到**“”附件想要打开“MyAppName”**

但在

```
- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI 
```

*我在peripheral.name*属性中看到了名称，并且 AdvertisementData 还包含键*kCBAdvDataLocalName* @"MyDeviceName"

2) 在 iOS 6.0.1 及更高版本中，事件并非来自后台，绝不...

我使用 ti cc2540 堆栈，这是我的广告结构：

```
// GAP - SCAN RSP data (max size = 31 bytes)
static const uint8 scanRspData[] =
{
  // complete name
  0x05,   // length of this data
  GAP_ADTYPE_LOCAL_NAME_COMPLETE,
  'O',   
  'b',   
  'd',   
  '2',       
  // connection interval range
  0x05,   // length of this data
  GAP_ADTYPE_SLAVE_CONN_INTERVAL_RANGE,
  LO_UINT16( DEFAULT_DESIRED_MIN_CONN_INTERVAL ),   // 100ms
  HI_UINT16( DEFAULT_DESIRED_MIN_CONN_INTERVAL ),  
  LO_UINT16( DEFAULT_DESIRED_MAX_CONN_INTERVAL ),   // 1s
  HI_UINT16( DEFAULT_DESIRED_MAX_CONN_INTERVAL ),  

  // Tx power level
  0x02,   // length of this data
  GAP_ADTYPE_POWER_LEVEL,
  0       // 0dBm  
};

static const uint8 advertData[] = 
{      
  0x02,   // length of this data
  GAP_ADTYPE_FLAGS,
  DEFAULT_DISCOVERABLE_MODE | GAP_ADTYPE_FLAGS_BREDR_NOT_SUPPORTED,

  // service UUID, to notify central devices what services are included
  // in this peripheral
  0x03,   // length of this data
  GAP_ADTYPE_16BIT_MORE,      // some of the UUID's, but not all
  LO_UINT16( RPC_SERVICE_UUID ),
  HI_UINT16( RPC_SERVICE_UUID ),
  0x05,   // length of this data
  GAP_ADTYPE_LOCAL_NAME_COMPLETE,
  'O',   // 'O'
  'b',   // 'b'
  'd',   // 'd' 
  '2' //2
}; 
```

怎么了？请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T22:45:25.630

伙计，您确实需要在 info.plist 中指定背景模式.....

在`Required Background Modes`、`"App shares data using CoreBluetooth"`或`"App communicates using CoreBluetooth"`... （或两者，取决于您的应用程序功能需要什么）。

然后您将能够接收后台事件。

# php - 函数序列错误，SQL state S1010 while execution a Prepared Statement

> ID：15657548
> 
> 赞同：2
> 
> 时间：2013-03-27T11:17:45.220
> 
> 标签：php, sql, sql-server, odbc

我将旧的 Access.mdb 移植到新的 MSSQL 数据库中，并进行了微小的更改。我有一个简单的循环：

```
//$_new is an MSSQL2011-ODBC-Datasource
//$_old is an old MSACCESS.mdb-ODBC-Datasource
$devices_result = odbc_exec($_old,"SELECT * FROM Druckerarchiv");
$device_insert_prepare = odbc_prepare($_new,"INSERT INTO Geraetearchiv (Kd_Nr,
[Typ],Seriennummer,Firma,Rg_Datum,Dauer,Markerart,Zus_Papierfach,Duplexeinheit,
Universalzufuhr,Plz,Ort,Strasse,Bemerkungen,Telefon,Fax,Ansprechpartner,Abteilung,
Wartung_BEGINN,Wartung_ENDE,Reaktions_TIME,Fix_TIME,Autom_Verl,Vertrags_Nr,
W_EK,W_VK,Wartung_LAUFZEIT,Absprachen,Drucker_USB,Drucker_LAN,Drucker_Parallel,
Drucker_Printserver,Drucker_Printserver_Typ,Drucker_Printserver_Sn,
Drucker_Zusatz,Email,Dienstleister,Garantieverlaengerung,
GVServicedienstleister,Aktiv,Typnummer,Firma_Standort) VALUES
(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,
?,?,?,?,?,?,?,?,?,?,?,?,?)");
while($device = odbc_fetch_array($devices_result))
{
    $device_insert = array(
    utf8_encode($device['KD_NR']),
    utf8_encode($device['Druckertyp']),
    utf8_encode($device['Seriennummer']),
    utf8_encode($device['Firma']),
    $device['Rg-Datum'], 
    (float)$device['Dauer'],
    (float)$device['Markerart'],
    (int)$device['2_Papierfach'],
    (int)$device['Duplexeinheit'],
    (int)$device['Universalzufuhr'],
    utf8_encode($device['Plz']),
    utf8_encode($device['Ort']),
    utf8_encode($device['Straße']),
    utf8_encode($device['Bemerkungen']),
    utf8_encode($device['Telefon']),
    utf8_encode($device['Fax']),
    utf8_encode($device['Ansprechpartner']),
    utf8_encode($device['Abteilung']),
    $device['Wartung_BEGINN'],
    $device['Wartung_ENDE'], 
    (int)$device['Reaktions_TIME'],
    (int)$device['Fix_TIME'],
    (int)$device['Autom_Verl'],
    utf8_encode($device['VERTRAGS_NR']),
    (double)$device['W-EK'],
    (double)$device['W-VK'],
    (float)$device['Wartung_LAUFZEIT'],
    utf8_encode($device['Absprachen']),
    0, 
    (int)$device['Ethernet'], 
    0, 
    0, 
    '', 
    '', 
    (($device['Y-Adapter/Typ'])?
    ("Hat Y-Adapter ".$device['Y-Adapter/Typ']." SN: ".$device['Y-Adapter/SN']):null),
    '', 
    (int)$servicedienstleister[$markerart[
    (int)$device['Markerart']]], //dienstleister
    '', 
    '', 
    1, 
    '',
    '',
    );
    odbc_execute($device_insert_prepare,$device_insert);
} 
```

此循环运行前 2 到 3 次。但在那之后，它每次运行都失败并抛出

```
Warning: odbc_execute() [function.odbc-execute]: SQL error: 
[Microsoft][SQL Server Native Client 11.0]Function sequence error, 
SQL state S1010 in SQLDescribeParameter 
```

由于这个循环应该做大约 30k 轮，我想将它作为准备好的语句运行并执行大约 30k 次。我已经尝试关闭自动提交。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:06:53.650

打开 ODBC 跟踪，这应该可以为您提供有关问题的线索。

你要去 SQL Server 的事实让我怀疑你正在达到 SQL Server 的一个活动语句限制。也许考虑使用 MARS 或任何其他解决方法（或两个连接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:02:48.630

感谢尼克，我走上了解决问题的正确道路。我使用了 MARS 连接。我用正确的 Connection-DSN 发布我自己的答案，这样其他有同样问题的开发人员就不需要搜索它。

```
$_new = odbc_connect('DRIVER={SQL Server Native Client 11.0};'.
                     'SERVER=<ServerIP>;'.
                     'DATABASE=<DatabaseName>;'.
                     'MARS_Connection=yes;',
                     '<user>',
                     '<password>'); 
```

# android - android - 商家订单号总是一样的吗？

> ID：15657553
> 
> 赞同：0
> 
> 时间：2013-03-27T11:18:00.520
> 
> 标签：android, security, in-app-purchase, google-play

我正在构建一个具有 google play 应用内购买功能的 android 应用程序，但我想在服务器端添加一些安全性以防止黑客生成随机订单号并将其发送到我的服务器，但我不知道是哪一部分订单号始终相同。我已阅读此内容-> [http://developer.android.com/google/play/billing/billing_admin.html](http://developer.android.com/google/play/billing/billing_admin.html)并且检查了我的应用程序日志，并且我认为订单号中点之前的数字始终相同。例如，在这个来自 android 开发者的订单号示例中，`"orderId" : "12999556515565155651.5565135565155651"`我认为 12999556515565155651 总是相同的。但是我仍然不确定，你们有没有证据或其他建议如何检查哪个是真实订单号或假订单号？

谢谢你

# php - 是否有 php ARTISAN 的详细手册？

> ID：15657555
> 
> 赞同：2
> 
> 时间：2013-03-27T11:18:10.327
> 
> 标签：php, database, laravel

谷歌最受欢迎的结果来自 Laravel：

[http://laravel.com/docs/artisan/commands#application-configuration](http://laravel.com/docs/artisan/commands#application-configuration)

它应该非常非常有限的信息。我找不到它可以支持的数据类型`Schema::table`...我可以创建`float`or `int`or`unsigned int`吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:56:17.843

看看这个页面[http://laravel.com/docs/database/schema](http://laravel.com/docs/database/schema) for Laravel 3

Laravel 4 的文档[http://four.laravel.com/docs/schema](http://four.laravel.com/docs/schema)

# javascript - 使用 BackboneJS 验证和过滤问题

> ID：15657565
> 
> 赞同：0
> 
> 时间：2013-03-27T11:18:34.757
> 
> 标签：javascript, backbone.js, underscore.js

我正在发现 BackBone JS（顺便说一句，它看起来非常棒），并且在验证模型和过滤集合方面遇到了一些问题。

首先，这是我的代码：

```
$(document).ready(function() {
    window.Movie = Backbone.Model.extend({
        defaults: {
            id: "?", 
            title: "Default movie title", 
            year: "Unknown", 
            seen: false
        }, 
        initialize: function Movie() {
            this.bind("error", function(model, error) {
                console.log("An error occured --> "+error);
            });
        }, 
        _validate: function(attributes) {
            console.log("Validation function called");
            if(attributes.title == '') {
                return "Title cannot be empty";
            }
            if(attributes.year > new Date().getFullYear()) {
                return "Woops... looks like this movie is a time traveler"
            }
            if(typeof attributes.seen != 'boolean') {
                return "Attribute 'seen' must be a boolean";
            }
        } 
    });
    m1 = new Movie({year: 2012, title: 'My movie', id: 1});
    m1.set({title: '', year: 2042});
}); 
```

此代码包含在 index.html 页面中，该页面之前加载了 jQuery、UnderscoreJS 和 BackboneJS。

尝试设置空标题时，此代码应在控制台中显示错误，但即使使用正确的`attributes`参数调用 _validate 函数，它也不会显示错误。请注意，起初我只是简单地命名了该函数`validate`（没有下划线），就像我在教程中阅读的那样，但在创建或修改电影时根本没有调用它。

或者，我有一个电影对象的集合，现在几乎是空的：

```
 window.Movies = Backbone.Collection.extend({
        model: Movie, 
        initialize: function Movies() {}
    });
    m1 = new Movie({year: 1998, title: "Worldcup", id: 1});
    m2 = new Movie({year: 1995, title: "1995 movie", id: 2});
    m3 = new Movie({year: 2012, title: "2012", id: 3});
    m4 = new Movie({year: 2008, title: "2008 movie", id: 4});

    movies = new Movies();
    movies.add([m1, m2, m3, m4]);

    console.log("Displaying movies released after 2000 :");
    var recent = movies.filter(function(movie) {
        return movie.get('year') > 2000;
    });
    for(var i in recent) {
        console.log(recent[i].get('title'));
    } 
```

filter 函数不返回任何结果（应该有 2 个）。所以我尝试`console.log(movie)`在这个函数中，显然传递给回调的电影总是未定义的。所以我在谷歌上搜索，我发现了许多不同的语法，其中许多涉及在集合中创建过滤器函数：

```
/* Returns a 'wrapped object' containing none of the movies it should */
getRecent: function(year) {
    return _(this.filter(function(movie) {
        return movie.get('year') > year;
    }));
}

/* Does not work either : console.log on result gives http://bit.ly/ZvlkNi */
getRecent: function(year) {
    var filtered = this.filter(function(movie) {
        return movie.get('year') > year;
    });
    return new Movies(filtered);
    }

/* Returns an empty array */
getRecent: function(year) {
    return this.filter(function(movie) {
        return movie.get('year') > year;
    });
} 
```

我有点迷失了，主要是因为似乎有很多不同的方法可以做同样的事情，而且它们似乎都不适用于我的情况。

非常感谢您的帮助！克里斯托夫。

# java - 如何将图标设置为 JFrame

> ID：15657569
> 
> 赞同：24
> 
> 时间：2013-03-27T11:18:55.633
> 
> 标签：java, swing, icons, jframe

我试过这种方式，但它没有改变？

```
ImageIcon icon = new ImageIcon("C:\\Documents and Settings\\Desktop\\favicon(1).ico");
frame.setIconImage(icon.getImage()); 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-27T11:24:37.450

最好使用 .png 文件；.ico 是特定于 Windows 的。最好不要使用文件，而是使用类资源（可以打包在应用程序的 jar 中）。

```
URL iconURL = getClass().getResource("/some/package/favicon.png");
// iconURL is null when not found
ImageIcon icon = new ImageIcon(iconURL);
frame.setIconImage(icon.getImage()); 
```

尽管您甚至可能会考虑将 setIconImages 用于多种尺寸的图标。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-27T00:18:32.507

尝试将图像放在 src 文件夹之外的单独文件夹中。然后，使用 ImageIO 加载您的图像。它应该如下所示：

```
frame.setIconImage(ImageIO.read(new File("res/icon.png"))); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-27T20:12:58.550

最后我发现了设置jframe图标的主要问题。这是我的代码。它与其他代码类似，但这里有几件事要注意游戏。

```
 this.setIconImage(new ImageIcon(getClass().getResource("Icon.png")).getImage()); 
```

1) 将此代码放入 jframe WindowOpened 事件中

2）将图像放在创建所有表单和java文件的主文件夹中，例如

```
src\ myproject\ myFrame.form
src\ myproject\ myFrame.java
src\ myproject\ OtherFrame.form
src\ myproject\ OtherFrame.java
src\ myproject\ Icon.png 
```

3) 最重要的是文件名区分大小写，即 icon.png 不起作用，但 Icon.png。

这样，即使在最终构建您的项目之后，您的图标也会在那里。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-08T18:13:54.127

这对我有用。

```
 frame.setIconImage(Toolkit.getDefaultToolkit().getImage(".\\res\\icon.png")); 
```

对于导出的 jar 文件，您需要配置构建路径以包含 res 文件夹并使用以下代码。

```
 URL url = Main.class.getResource("/icon.png");
    frame.setIconImage(Toolkit.getDefaultToolkit().getImage(url)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-04T06:42:10.127

Yon可以尝试以下方式，

```
myFrame.setIconImage(Toolkit.getDefaultToolkit().getImage("Icon.png")); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-26T07:02:55.837

这是我用来设置图标的代码`JFrame`

```
import javax.imageio.ImageIO;
import java.io.File;
import java.io.IOException;

  try{ 
    setIconImage(ImageIO.read(new File("res/images/icons/appIcon_Black.png")));
  } 
  catch (IOException e){
    e.printStackTrace();
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-20T23:18:47.567

我使用`Maven`并拥有项目的结构，它是通过输入命令创建的：

```
mvn archetype:generate 
```

所需的文件`icon.png`必须放在`src/main/resources`您的 maven 项目的文件夹中。

然后你可以在你的项目中使用下一行：

```
ImageIcon img = new ImageIcon(getClass().getClassLoader().getResource("./icon.png"));
setIconImage(img.getImage()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-10T11:26:24.257

我的项目代码如下：

```
private void setIcon() {
       setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/slip/images/cage_settings.png")));

    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-07T13:41:45.533

我正在使用以下实用程序类来设置[`JFrame`](https://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)和[`JDialog`](https://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html)实例的图标：

```
import java.awt.*;
import java.io.IOException;
import java.io.InputStream;
import java.net.URISyntaxException;
import java.util.Scanner;

public class WindowUtilities
{
    public static void setIconImage(Window window)
    {
        window.setIconImage(Toolkit.getDefaultToolkit().getImage(WindowUtilities.class.getResource("/Icon.jpg")));
    }

    public static String resourceToString(String filePath) throws IOException, URISyntaxException
    {
        InputStream inputStream = WindowUtilities.class.getClassLoader().getResourceAsStream(filePath);
        return toString(inputStream);
    }

    // http://stackoverflow.com/a/5445161/3764804
    private static String toString(InputStream inputStream)
    {
        try (Scanner scanner = new Scanner(inputStream, "UTF-8").useDelimiter("\\A"))
        {
            return scanner.hasNext() ? scanner.next() : "";
        }
    }
} 
```

所以使用它变得像调用一样简单

```
WindowUtilities.setIconImage(this); 
```

在您的班级内某处扩展`JFrame`.

例如，在使用时`Icon.jpg`必须位于。`myproject\src\main\resources``Maven`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-19T06:57:46.130

```
public FaceDetection() {
    initComponents();
    //Adding Frame Icon
    try {
        this.setIconImage(ImageIO.read(new File("WASP.png")));
    } catch (IOException ex) {
        Logger.getLogger(FaceDetection.class.getName()).log(Level.SEVERE, null, ex);
    }
}' 
```

这对我有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-22T09:49:30.617

只需在您的代码中复制这几行代码并将“imgURL”替换为图像（您想设置为`jframe`图标）位置。

```
JFrame.setDefaultLookAndFeelDecorated(true);

//Create the frame.
JFrame frame = new JFrame("A window");

//Set the frame icon to an image loaded from a file.
frame.setIconImage(new ImageIcon(imgURL).getImage()); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-04-21T20:11:08.447

```
frame.setIconImage(new ImageIcon(URL).getImage()); 
```

/* 框架是 JFrame 的 setIcon 方法，在你的框架上设置一个新图标 new ImageIcon 创建一个新的类实例（这样你就可以从你提供的 url 中获取一个新图标）最后 getImage 返回你需要的图标它是一个“快速”制作图标的方式，对我来说这很有帮助，因为它是一行代码 */

# javascript - 如何创建依赖于普通变量、函数或逻辑的 ember 属性？

> ID：15657579
> 
> 赞同：6
> 
> 时间：2013-03-27T11:19:45.257
> 
> 标签：javascript, ember.js, leaflet

## 问题

我正在为 emberjs 制作传单视图，但遇到了一些问题。Leaflet 是一个外部库，与问题有些无关，但只知道它是一个映射库。

考虑一个简单的属性，如缩放级别。传单地图实例具有`map.getZoom()`可通过 访问和分配的缩放级别`map.setZoom(zoomLevel)`。此外，用户可以与地图交互，并更改其缩放级别。Leaflet 允许我们在缩放更改时[注册回调。](http://leafletjs.com/reference.html#map-events)

我希望我的“Ember-Leaflet”视图具有`zoomLevel`ember 属性。通过这种方式，我可以从 ember 对象模型中受益（`zoomLevel`例如，绑定到模板或另一个值），并且我们正在“使用 ember 方式”进行操作。

## 基础溶液

我目前拥有的是 Ember.View 的子类，具有 zoomLevel 属性。在`didInsertElement`我创建传单地图实例。代码被注释并且应该是不言自明的。

```
App.Leaflet = Ember.View.extend({
    classNames : ['ember-leaflet'],

    //default zoom level
    zoomLevel : 13,
    didInsertElement : function() {
        var self = this;
        var zoomLevel = this.get('zoomLevel');

        // create map instance
        var map = L.map(this.$().get(0)).setView(center, zoomLevel);

        // configure map instance...

        // Event listeners
        map.on('zoomend', function(e) {
            self.set('zoomLevel', e.target.getZoom());
        });

        // save map instance
        this.set('map', map);
    }
}); 
```

## 清单

为了让这个问题更“可回答”，我认为这个问题的解决方案应该满足以下要求：

1.  更改属性时`zoomLevel`，地图应相应更改其缩放级别（使用`map.setZoom(zoomLevel)`）
2.  当用户在地图上交互改变缩放时，`zoomLevel`属性应该改变（可能使用传单地图的`zoomend`事件回调）

请注意，我们这里有一种“循环依赖”，即*“更改时做某事（在地图上设置缩放） `zoomLevel`”*和*“当某事发生时（用户更改缩放），更改`zoomLevel`”*。我想要一个可以避免这种循环观察者依赖的解决方案。Ember 的[notifyPropertyChange](http://emberjs.com/api/classes/Ember.Observable.html#method_notifyPropertyChange)可能是一个解决方案。

[对于Ember 的计算属性](http://emberjs.com/guides/object-model/computed-properties/)来说，这似乎是一项理想的任务，但我不知道在依赖属性字符串中放入什么。`zoomLevel`基本上是一个属性，它依赖于不是 ember 属性的东西。

* * *

## 更新

我的第一次尝试是使用观察者来设置传单上的缩放并在传单上绑定一个事件`zoomend`来设置`zoomLevel`我的视图。

问题：当我在 zoomend 传单事件上设置 zoomLevel 时，我会自动再次触发我的观察者。我说清楚了吗？

所以，这一系列事件发生了：

1.  `zoomLevel`在交互式地图上更改
2.  传单火灾`zoomend`事件
3.  `zoomend`事件回调设置 ember`zoomLevel`
4.  观察者跑
5.  不必要地调用`setZoom`传单

这效率不高，但我不介意它是否有效。问题在于，当用户非常快速地多次更改缩放（在地图上进行简单的长滚动）时，观察者会被多次调用，从而[混淆小册子](https://stackoverflow.com/questions/15671949/why-does-calling-leaflets-setzoom-twice-results-on-the-second-being-ignored)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:19:04.627

好吧，我想我做到了。

我使用了计算属性和辅助属性。

```
App.Leaflet = Ember.View.extend({
    classNames : ['ember-leaflet'],

    //default zoom level
    zoomLevelValue : 13,
    zoomLevel : function(key, value){
        // getter
        if (arguments.length === 1) {
            var zoomLevel = this.get('zoomLevelValue');
            return zoomLevel;
        // setter  
        } else{
            var map = this.get('map');

            this.set('zoomLevelValue', value);
            map.setZoom(value);

            return value;
        }
    }.property('zoomLevelValue'),

    didInsertElement : function() {
        var self = this;
        var zoomLevel = this.get('zoomLevel');

        var map = L.map(this.$().get(0)).setView(center, zoomLevel);

        // configure map instance...

        // Event listeners
        map.on('zoomend', function(e) {
            console.log('zoomend', 'Setting zoomLevel '+e.target.getZoom());
            self.set('zoomLevelValue', e.target.getZoom());
        });

        // save map instance
        this.set('map', map);

    }
}); 
```

基本上，有两种情况：

1.  zoomLevel 以编程方式更改 -> 我们更新地图上的缩放
2.  地图上的缩放级别被更改了->我们在辅助属性上设置了，计算机属性观察者也会得到通知，我们没有再次在地图上设置缩放级别

但是我有一个新问题，但我认为它与传单有关。当我`setZoom`在课程中调用另一个缩放动画时，此 setZoom 将被忽略。例如，执行：

```
map.setZoom(1);
map.setZoom(12); 
```

最终以`1`缩放级别结束。

也许与传单相关的 SO 问题会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:29:19.127

要从 ember 中的 zoomLevel 到 setZoom，您可以使用观察者。

要采取另一种方式，您可能必须将事件绑定到传单上的 zoomChange

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T17:23:46.630

几乎没有什么不同的策略，我将 zoomLevel 设置为一个属性并从一个函数中观察它，并且仅当属性的实际值与实际缩放不同时才在地图上设置缩放。看到这个小提琴[http://jsfiddle.net/5As2z/30/](http://jsfiddle.net/5As2z/30/) 我将逻辑传递给控制器​​，视图在插入文档时设置地图

```
App.ApplicationController = Ember.Controller.extend({
//default zoom level
zoomLevel: 13,
map: null,
zoomLevelChanged: function () {
    var zoomLevel = this.get('zoomLevel');
    var map = this.get('map');
    //Control not changing the zoom of the map if it is yet at the value
    if (zoomLevel != map.getZoom()) {
        map.setZoom(zoomLevel);
    }
}.observes('zoomLevel')});

App.ApplicationView = Ember.View.extend({
templateName: 'application',
didInsertElement: function () {
    var center = [41.3823000, 2.1825000];
    var controller = this.get('controller');
    var zoomLevel = controller.get('zoomLevel');
    var map = L.map('map').setView(center, zoomLevel);
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    // configure map instance...

    // Event listeners
    map.on('zoomend', function (e) {
        console.log('zoomend', 'Setting zoomLevel ' + e.target.getZoom());
        controller.set('zoomLevel', e.target.getZoom());
    });

    // save map instance
    this.controller.set('map', map);
}}); 
```

html

```
<script type="text/x-handlebars" data-template-name="application">
    <h1> Leaflet map ember example </h1>
    {{view Ember.TextField valueBinding="zoomLevel"}}
    <div id="map"></div >
</script> 
```

# codeigniter - 如何组合查询结果并使用 codeigniter 返回该结果

> ID：15657580
> 
> 赞同：1
> 
> 时间：2013-03-27T11:19:45.257
> 
> 标签：codeigniter

我是codeigniter的新手。我使用以下代码递归地执行查询。

假设 $q 查询选择 4 id (10,11,20,24)

然后对于每个 id showreply 函数（在 foreach 中）递归调用然后如何返回组合结果。

```
$resultq3 = $this->showreply($reply_id); 

    <?php
            public function showreply($reply_id)
            {

                   $q1 =$this->db->select('*')
                    ->from('forum_reply AS fr')
                ->where('fr.parent_id',$reply_id1)
                ->order_by('fr.id ')->get();;

                foreach($q1->result_array() as $row4)
                {
                    $id = $row4['id'];  
                    $parent_id = $row4['parent_id'];
                    if($parent_id!=0)
                    {  
                        $this->showreply($id);                       

                    }
                }
                return  $result;
            }
         ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:57:21.493

我真的不明白你在这里问的是什么。也许显示 showReply 函数会有所帮助，但是您已经有了组合结果，并且正在将其拆分到 foreach 中，那么问题是什么？另外，为什么要将reply_id 分配给reply_id1？那有什么意义呢？只需在查询中使用 $reply_id 即可。

您还执行了一个毫无意义的 if 语句，因为您可以过滤掉查询本身不需要的 id（并且您真的会拥有一个 = 0 的 id 吗？）

事实上，我越看这段代码就越困惑。$this->showreply($id) 在哪里填充 $id？

```
<?php
    public function showreply($reply_id)
    {

        $q1 =$this->db->select('*')
            ->from('forum_reply AS fr')
        ->where('fr.parent_id',$reply_id)
        ->where('fr.parent_id !=',0)
        ->order_by('fr.id ')->get();;

        //$i=0;
        foreach($q1->result_array() as $row4)
        { 
            $parent_id = $row4['parent_id'];
            $this->showreply($id);      
        }
//below is the actual answer to your question on how to return the combined results.
        return  $q1->result_array();
    }
 ?> 
```

好的，在重新阅读您的问题后，我想我有更好的理解。如果您将 id 作为数组传递，如下所示：

```
$reply_id =  array(10,11,20,24); 
```

然后，您可以修改查询以使用：

```
$this->db->where_in('fr.parent_id', $reply_id); 
```

这会将结果作为一个包含所有 4 个 ID 的组合结果返回。

# ios - 如何在ios中构造多个MVC？

> ID：15657583
> 
> 赞同：-2
> 
> 时间：2013-03-27T11:19:49.457
> 
> 标签：ios, objective-c, xcode

众所周知，MVC 是 iOS 中唯一的模式。目前，我正在开发一个包含多个 MVC 的项目，我对组织这些 MVC 感到困惑。

基本上，我有一个调查 MVC 和一个问题 MVC。调查的显示顺序是：

1.  用户输入调查标题和描述的界面
2.  用户点击next显示问题界面
3.  用户点击下一步按钮，显示另一个问题界面，依此类推。

我想有一个模型用于调查，一个模型用于问题。但是如何将调查模型链接到问题，因为我需要调查模型中的一系列问题，这意味着调查模型取决于问题模型？

请帮我解决这个问题，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:52:16.270

你的描述似乎有点松散。你所描述的是一个单一的 MVC 系统，你有多个视图：

*   显示调查。
*   显示问题。

和多个模块来表示：

*   调查对象。
*   问题对象。

您可以轻松地使用`UINavigationController`带有两个或多个`UIViewController`s 的 a 来构建这样的应用程序。我建议你看一下苹果的[Your second iOS App](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html) tutorial 这与你所描述的相似。

希望有帮助

# ruby-on-rails - 如何测试 rspec shoulda 以在 Rails 中进行自定义验证？

> ID：15657584
> 
> 赞同：9
> 
> 时间：2013-03-27T11:19:52.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec-rails, shoulda

我的模型中有一个私有方法，如下所示：

```
 validate :record_uniq

  private
  def record_uniq
    if record_already_exists?
      errors.add(:base, "already exists")
    end
  end

  def record_already_exists?
    question_id = measure.question_id
    self.class.joins(:measure).
    where(measures: {question_id: ques_id}).
    where(package_id: pack_id).
    exists?
  end 
```

这种方法更像是`uniqueness`防止重复记录的作用域。我想知道如何 `validate :record_uniq`使用`shoulda`or编写测试`rspec`？

## 我试过的例子：

```
describe Foo do
  before do
    @bar = Foo.new(enr_rds_measure_id: 1, enr_rds_package_id: 2)
  end

  subject { @bar }

  it { should validate_uniqueness_of(:record_uniq) }
end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T11:25:34.323

简单 - 构建一个验证失败的对象，对其进行验证，并验证是否设置了正确的错误消息。

例如（如果您有一个名为 City 的模型）：

```
it 'validates that city is unique' do
  city = City.new # add in stuff to make sure it will trip your validation
  city.valid?
  city.should have(1).error_on(:base) # or 
  city.errors(:base).should eq ["already exists"]
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-21T18:53:49.700

这是我使用 RSpec 3 语法要做的事情。

```
it 'validates that city is unique' do
  city = City.new('already taken name')
  expect(city).to be_invalid
  expect(city.errors[:base]).to include('already exists')
end 
```

# android - 使用剪贴板管理器在 Android 中复制粘贴图像

> ID：15657592
> 
> 赞同：11
> 
> 时间：2013-03-27T11:20:12.433
> 
> 标签：android, clipboard, copy-paste

我想使用剪贴板管理器将图像从我的 android 应用程序复制到另一个 android 应用程序。我进行了很多研究并阅读[了本](http://developer.android.com/guide/topics/text/copy-paste.html)教程，但它没有涵盖图像复制部分。下面的代码复制了图像，但是当我尝试粘贴时，只粘贴了图像的路径。

```
 ContentValues values = new ContentValues(2);
    values.put(MediaStore.Images.Media.MIME_TYPE, "image/png");
    values.put(MediaStore.Images.Media.DATA, "/mnt/sdcard/1.jpg");
    ContentResolver theContent = getContentResolver();
    Uri imageUri = theContent.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
    ClipData theClip = ClipData.newUri(getContentResolver(), "Image", imageUri);
    mClipboard.setPrimaryClip(theClip); 
```

我试图过去支持图像粘贴的应用程序，所以我猜问题是“复制”。任何答案和建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T11:18:17.947

此代码有效，只需找到合适的应用程序和操作系统来测试它。

```
 ClipboardManager mClipboard = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
    ContentValues values = new ContentValues(2);
    values.put(MediaStore.Images.Media.MIME_TYPE, "Image/jpg");
    values.put(MediaStore.Images.Media.DATA, filename.getAbsolutePath());
    ContentResolver theContent = getContentResolver();
    Uri imageUri = theContent.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
    ClipData theClip = ClipData.newUri(getContentResolver(), "Image", imageUri);
    mClipboard.setPrimaryClip(theClip); 
```

编辑：然而，根据我的进一步调查，在大多数 Android 平台中，图像复制过去是不可能的，因为原始的 android 操作系统没有这样的功能。上面的代码仅适用于修改操作系统的几种情况。例如，在三星 Note 平板电脑中它可以工作。你可以在北极星办公室过去的图像。但是 Polaris 使用的是三星提供的隐藏 API，因为该应用程序是设备自带的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-04T16:53:26.703

这是我的解决方案；它适用于三星 Galaxy Note 9：

```
 Uri uri = FileProvider.getUriForFile(
                this,
                "com.example.android.fileprovider",
                new File(path));
        ClipboardManager mClipboard = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
        ClipData clip = ClipData.newUri(getApplicationContext().getContentResolver(), "a Photo", uri);
        mClipboard.setPrimaryClip(clip);
        Toast.makeText(this,"Image copied to clipboard",Toast.LENGTH_SHORT).show(); 
```

# java - Java 套接字和文件流

> ID：15657595
> 
> 赞同：0
> 
> 时间：2013-03-27T11:20:20.183
> 
> 标签：java, file, sockets, io, stream

我有一个关于文件的基本问题......似乎我被卡住了。

我正在创建一个服务器-客户端套接字。客户端使用迭代方式和下面的方法向服务器发送随机数的整数。

```
//BufferedWriter out = new BufferedWriter(new OutputStreamWriter (sock.getOutputStream())); 
out.write(number);
out.flush(); 
```

服务器像这样接受它们：

```
 //BufferedReader in = new BufferedReader (new InputStreamReader (socket.getInputStream()));
    number=in.read(); 
```

所有，我想要的是服务器将所有这些整数存储到一个文件中（例如 myfile.txt），然后我想将该文件作为字符串（包含所有整数）读取，以便将其发送回客户端。

有任何想法吗？我尝试了几种方法，但现在我完全陷入困境，我真的无法想清楚......如果有人能帮助我，我将不胜感激。

干杯

编辑：到目前为止我尝试了这些方法

```
FileOutputStream fos = new FileOutputStream("myfile.txt"); 
DataOutputStream dos = new DataOutputStream(fos);
dos.writeInt(number); 
```

然后我试着用

```
 FileInputStream fin=new FileInputStream("myfile.txt");
 DataInputStream dis = new DataInputStream(fin);
  int numbers = dis.read(); 
```

但我得到的只是数字 0。:S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:38:58.497

写文件可以这样实现

```
FileOutputStream fileOutputStream = new FileOutputStream("test.txt");
BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(fileOutputStream));
// Make sure to write the data as a String
bufferedWriter.write("" + number);
bufferedWriter.close();
fileOutputStream.close(); 
```

之后可以这样实现阅读

```
FileInputStream fileInputStream = new FileInputStream("test.txt");
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(fileInputStream));
String line = bufferedReader.readLine();
number = Integer.valueOf(line); 
```

`BufferedWriter`使用 a和 a的优点`BufferedReader`是您可以读取/写入字符串并拥有人类可读的文件。使用 a `DataOutputStream`，您将拥有一个二进制文件，并且您将自己进行从 / 到您的数据格式的转换。

关于您的代码示例：

```
dis.read(); 
```

将返回您读取的字节数，**而不是**实际数据。你会这样做使用

```
dis.readInt(); 
```

# git - 如何从 master 获取我的本地提交并将它们放置在新分支中

> ID：15657596
> 
> 赞同：1
> 
> 时间：2013-03-27T11:20:20.277
> 
> 标签：git, branch, commit

我已经对 git repo 创建了一些更改，并将它们提交给 master（但是，我*没有*将更改推送到 GitHub）。我现在需要做的是创建一个新分支，并将我的提交转移到这个新分支。更改非常大，因此无法在新分支上手动重做更改 - 希望有一些命令可以将 master 倒回到我的提交之前，将我的提交移动到新分支上，然后将它们向上推送。

我确实搜索了其他问题，但我没有看到任何完全适合我的情况，所以想得到一个准确的答案。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:38:22.137

这很容易：

```
# make sure you're on master
git checkout master
# create a new branch that is identical to master
git branch mystuff master
# reset your local master branch to the state of the remote master
git reset --hard origin/master
# push your new branch to the remote
git push origin mystuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:22:19.207

首先，创建新分支，然后倒带 master：

```
git branch new_branch
git reset --hard <sha1-id> 
```

要查找所需的 sha1-id，请检查`git log`.

之后，您可以将该分支推送到您的远程：

```
git checkout new_branch
git push -u origin new_branch 
```

请注意，这`-u`将设置一个跟踪分支，这意味着您可以从现在开始发布`git pull`并且`git push`无需指定`origin new_branch`。

# powershell - PowerShell 删除从 txt 文件中读取的超过 X 天的文件夹

> ID：15657602
> 
> 赞同：-2
> 
> 时间：2013-03-27T11:20:43.967
> 
> 标签：powershell, powershell-2.0

如何检查从 txt 文件传递​​的路径是否早于 X 天？然后，如果是，我想删除它们。

检查文件夹中文件的数据修改不是我的事。我只想检查文件夹的数据创建。

我是 Powershell 的新手，所以目前我知道只处理文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:02:10.523

您将`CreationTime`对象的属性与 X 天前的日期进行比较：

```
$x = 42
$f = Get-Item C:\Temp\foo.txt

if ($f.CreationTime -lt (Get-Date).AddDays(-$x)) { $f.Delete } 
```

# visual-studio-2012 - 为 VS2012 运行时构建 Qt 库 - 更新

> ID：15657604
> 
> 赞同：0
> 
> 时间：2013-03-27T11:20:48.010
> 
> 标签：visual-studio-2012, qt5

我需要针对 VS2012 运行时库构建和链接最新的 (5.0.1) Qt 库。我正在使用非商业Qt。我已经下载了 qt-everywhere-opensource-src-5.0.1 包，但现在我遇到了一些问题：显然没有关于如何配置和构建以实现 vs2012 兼容性的适当食谱。

我的配置命令行是：

```
configure –I C:\OpenSSL-Win32\include –I C:\OpenSSL-Win32 –I C:\OpenSSL-Win32\include\openssl   -opensource -openssl-linked -debug-and-release -platform win32-msvc2012 –no-icu -nomake examples -nomake tests 
```

错误：

```
LINK : fatal error LNK1104: cannot open file 'ssleay32.lib' 
```

尝试通过添加到前面的命令行来将库添加到配置命令中：

```
-l C:\OpenSSL-Win32\lib\ssleay32.lib  -l C:\OpenSSL-Win32\lib\libeay32.lib 
```

..并得到一个有趣的链接错误：

```
 LINK : fatal error LNK1104: cannot open file 'ssleay32.lib.lib' 
```

再次尝试：

```
-l C:\OpenSSL-Win32\lib\ssleay32  -l C:\OpenSSL-Win32\lib\libeay32 
```

再次遇到第一个链接错误。还尝试在没有帮助的情况下使用 -L 开关。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:01:11.903

解决了。

使用包的原始副本，使用获胜者命令行 - 删除显式 -l 并添加 -L（SSL lib 目录）。

感谢收看！

# javascript - Javascript - 覆盖 console.log 并保留旧功能

> ID：15657607
> 
> 赞同：8
> 
> 时间：2013-03-27T11:20:57.970
> 
> 标签：javascript, console, overriding

我想覆盖 console.log 并在我的新函数上调用它。

我尝试这样的事情，但我得到`Uncaught TypeError: Illegal invocation`：

```
console.log = function() {
  this.apply(window, arguments);
}.bind(console.log);

console.log('as'); 
```

这是我的目标：

`console.error(exception);`应该做：

```
console.error = function() {
  if (typeof exception.stack !== 'undefined') {
    console.error(exception.stack);
  } else {
    console.error.apply(windows, arguments);
  }
}.bind(console.error);

console.error('as');
console.error({stack: 'my stack....'}); 
```

**编辑：实际上，它适用于 Firefox 而不是 Chrome ......** 这是 Chrome 中的一个错误：[https ://code.google.com/p/chromium/issues/detail?id=167911](https://code.google.com/p/chromium/issues/detail?id=167911)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T11:53:22.643

你可以有这样的东西：

```
console.error = (function() {
    var error = console.error;

    return function(exception) {
        if (typeof exception.stack !== 'undefined') {
            error.call(console, exception.stack);
        } else {
            error.apply(console, arguments);
        }
    }
})(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-12T17:12:05.520

实现您想要的最佳方式：

```
// define a new console
var console=(function(oldCons){
    return {
        log: function(text){
            oldCons.log(text);
            // Your code
        },
        info: function (text) {
            oldCons.info(text);
            // Your code
        },
        warn: function (text) {
            oldCons.warn(text);
            // Your code
        },
        error: function (text) {
            oldCons.error(text);
            // Your code
        }
    };
}(window.console));

//Then redefine the old console
window.console = console; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-11T08:48:17.323

感谢并受到@Ludovic Feltz 回答的启发，我找到了一个带有自定义样式的控制台的封装替代方案。

尽管这个答案与原始问题的关系不大，正如 Ludovic 在上面的评论中所建议的那样，我在这里发布它是为了帮助那些也打算用首选样式自定义/覆盖控制台的人:)

注意：单击下面的“运行代码片段”后，您可能需要打开浏览器控制台（默认按 F12）才能看到结果。

```
window.msg = (function (defaultConsole) {
  return Object.assign({}, defaultConsole, {
    log(text) {
      defaultConsole.log("%cLOG: %c" + text,
        "background-color: #fff; color: #5CB85C; font-weight: bold; padding-left: 8px; font-size: 1.2em",
        "background-color: #5CB85C; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
    },
    info(text) {
      defaultConsole.info("%cINFO: %c" + text,
        "background-color: #fff; color: #337AB7; font-weight: bold; padding-left: 8px; font-size: 1.2em",
        "background-color: #337AB7; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
    },
    warn(text) {
      defaultConsole.warn("%cWARN: %c" + text,
        "background-color: #fff; color: #F0AD4E; font-weight: bold; padding-left: 8px; font-size: 1.2em",
        "background-color: #F0AD4E; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
    },
    error(text) {
      defaultConsole.error("%cERROR: %c" + text,
        "background-color: #fff; color: #D9534F; font-weight: bold; padding-left: 8px; font-size: 1.2em",
        "background-color: #D9534F; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
    }
  })
}(window.console));

msg.log('Log Message !');
msg.info('Info Message !');
msg.warn('Warn Message !');
msg.error('Error Message !');
msg.debug('Debug Message !');
msg.dir('Dir Message !');

/*Note: 1).If we assign the above to console instead of msg, the default console.log, console.info, etc would be overridden with custom styles;
        2).The above methods have utilized some ES6 features which may not be compatiable with old browsers, check below for ES5 version;
*/

//The ES5 Version
window.msg2 = (function (defaultConsole) {
  //The for loop within default console is to inherit all methods from it so that the uncustomized methods like msg2.debug(), msg2.dir(), etc won't throw errors;
  for (var key in defaultConsole) {
    this[key] = defaultConsole[key];
  }
  this.log = function (text) {
    defaultConsole.log("%cLOG: %c" + text,
      "background-color: #fff; color: #5cb85c; font-weight: bold; padding-left: 8px; font-size: 1.2em",
      "background-color: #5cb85c; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
  };
  this.info = function (text) {
    defaultConsole.info("%cINFO: %c" + text,
      "background-color: #fff; color: #337ab7; font-weight: bold; padding-left: 8px; font-size: 1.2em",
      "background-color: #337ab7; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
  };
  this.warn = function (text) {
    defaultConsole.warn("%cWARN: %c" + text,
      "background-color: #fff; color: #f0ad4e; font-weight: bold; padding-left: 8px; font-size: 1.2em",
      "background-color: #f0ad4e; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
  };
  this.error = function (text) {
    defaultConsole.error("%cERROR: %c" + text,
      "background-color: #fff; color: #d9534f; font-weight: bold; padding-left: 8px; font-size: 1.2em",
      "background-color: #d9534f; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
  }
  return this;
}(window.console));

msg2.log('Log Message !');
msg2.info('Info Message !');
msg2.warn('Warn Message !');
msg2.error('Error Message !');
msg2.debug('Debug Message !');
msg2.dir('Dir Message !');

//My Original Answer is as below, which seemed simpler and more readable, however, the uncustomized methods like msg3.debug(), msg3.dir(), etc would throw errors such as 'msg3.debug is not a function';
window.msg3 = (function (defaultConsole) {
  return {
    log: function (text) {
      defaultConsole.log("%cLOG: %c" + text,
        "background-color: #fff; color: #5CB85C; font-weight: bold; padding-left: 8px; font-size: 1.2em",
        "background-color: #5CB85C; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
    },
    info: function (text) {
      defaultConsole.info("%cINFO: %c" + text,
        "background-color: #fff; color: #337AB7; font-weight: bold; padding-left: 8px; font-size: 1.2em",
        "background-color: #337AB7; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
    },
    warn: function (text) {
      defaultConsole.warn("%cWARN: %c" + text,
        "background-color: #fff; color: #F0AD4E; font-weight: bold; padding-left: 8px; font-size: 1.2em",
        "background-color: #F0AD4E; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
    },
    error: function (text) {
      defaultConsole.error("%cERROR: %c" + text,
        "background-color: #fff; color: #D9534F; font-weight: bold; padding-left: 8px; font-size: 1.2em",
        "background-color: #D9534F; color: #fff; font-weight: bold; padding: 0 8px; font-size: 1.2em");
    }
  };
}(window.console));
msg3.log('Log Message !');
msg3.info('Info Message !');
msg3.warn('Warn Message !');
msg3.error('Error Message !');
msg3.debug('Debug Message !');
msg3.dir('Dir Message !');
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T11:44:43.633

您正在对象`console.log`上调用该函数`window`。您应该改为在`console`对象上调用它。

```
console.log = function() {
  this.apply(console, arguments);
}.bind(console.log);

console.log('as'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T11:29:51.090

尝试这个：

```
var console={
    log: function(v){
        alert(v);
    }
};
console.log('hello world'); 
```

**升级版：**

检查这个：

```
var originalConsole={
    log: (function(c){
        return function(v){
            c.log(v);
        };
    }(window.console))
};
var console={
    log: function(v){
        originalConsole.log('_original_');
        originalConsole.log(v);
    }
};
console.log('hello world'); 
```

`originalConsole`存储原始对象所需的方法`console`（仅`log`在我的示例中），然后`console`被新对象覆盖。

**UPD2**

```
var console=(function(c){
    return {
        log: function(v){
            c.log('_original_');
            c.log(v);
        }
    };
}(window.console));
console.log('hello world'); 
```

我希望这能帮到您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-11T08:58:33.597

我建议使用：[https ://github.com/sunnykgupta/jsLogger](https://github.com/sunnykgupta/jsLogger)

**特征：**

1.  它安全地覆盖了 console.log。
2.  如果控制台不可用，请注意（哦，是的，您也需要考虑这一点。）
3.  存储所有日志（即使它们被抑制）以供以后检索。
4.  处理主要的控制台功能，如`log`, `warn`, `error`, `info`.

对修改开放，每当有新建议出现时都会更新。

**免责声明**：我是插件的作者。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-22T22:00:40.747

只是增强@Ludovic 先前的答案以使他的答案也支持`nodejs`：

```
// define a new console
var console=(function(oldCons){
    return {
        log: function(text){
            oldCons.log(text);
            // Your code
        },
        info: function (text) {
            oldCons.info(text);
            // Your code
        },
        warn: function (text) {
            oldCons.warn(text);
            // Your code
        },
        error: function (text) {
            oldCons.error(text);
            // Your code
        }
    };
}(global.console !== undefined ? global.console : window.console)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-12T09:09:26.797

一点...`console.log`可以接收多个参数，例如：

```
console.log('results', result1, result2, result3); 
```

如果你想要这种行为，你可以这样做：

```
console.log = function(){
    var args = Array.from(arguments).join(' ');
    ...
} 
```

# c# - 使用 GZipStream 进行崩溃安全的即时压缩

> ID：15657608
> 
> 赞同：0
> 
> 时间：2013-03-27T11:20:58.403
> 
> 标签：c#, .net, stream, compression, gzipstream

我正在压缩一个日志文件，因为数据被写入其中，例如：

```
using (var fs = new FileStream("Test.gz", FileMode.Create, FileAccess.Write, FileShare.None))
{
  using (var compress = new GZipStream(fs, CompressionMode.Compress))
  {
    for (int i = 0; i < 1000000; i++)
    {
      // Clearly this isn't what is happening in production, just 
      // a simply example
      byte[] message = RandomBytes();
      compress.Write(message, 0, message.Length);

      // Flush to disk (in production we will do this every x lines, 
      // or x milliseconds, whichever comes first)
      if (i % 20 == 0)
      {
        compress.Flush();
      }
    }
  }
} 
```

我要确保的是，如果进程崩溃或被杀死，存档仍然有效且可读。我曾希望自上次刷新以来的任何内容都是安全的，但我最终只是得到了一个损坏的存档。

有什么方法可以确保我在每次刷新后都得到一个可读的存档？

注意：我们不必使用 GZipStream，如果其他东西会给我们想要的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:19:49.540

一种选择是让 Windows 处理压缩。只需在存储日志文件的文件夹上启用压缩。在复制压缩文件时，您应该注意一些[性能注意事项](http://support.microsoft.com/kb/251186)，我不知道 NT 压缩与`GZipStream`其他压缩选项相比的性能如何。您可能想要比较压缩率和 CPU 负载。

如果您不想对整个文件夹启用压缩，还可以选择打开压缩文件。我没有试过这个，但你可能想看看它：[http ://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/1b63b4a4-b197-4286-8f3f-af2498e3afe5](http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/1b63b4a4-b197-4286-8f3f-af2498e3afe5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:56:36.803

是的，但它不仅仅是冲洗。查看[zlib](http://zlib.net/)发行版中的[gzlog.h](https://github.com/madler/zlib/blob/master/examples/gzlog.h)和[gzlog.c](https://github.com/madler/zlib/blob/master/examples/gzlog.c)。它完全符合您的要求，有效地将简短的日志条目添加到 gzip 文件中，并且始终留下有效的 gzip 文件。它还具有在此过程中防止崩溃或关闭的保护，仍然留下有效的 gzip 文件并且不会丢失任何日志条目。

我建议不要使用 GZIPStream。它有问题，不提供必要的功能。改用[DotNetZip](http://dotnetzip.codeplex.com/)作为 zlib 的接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:32:31.110

好消息：GZip 是一种流格式。因此，流末尾的损坏不会影响已经写入的开头。

因此，即使您的流式写入在任意点被中断，大部分流仍然是好的。您可以为自己编写一个小工具，从中读取数据并在它看到的第一个异常处停止。

如果您想要一个无错误的解决方案，我建议每 x 秒将日志拆分为一个文件（也许 x = 1 或 10？）。写入扩展名为“.gz.tmp”的文件，并在文件完全写入并关闭后重命名为“.gz”。

# android - Android TextView：我可以阻止部分显示的文本出现吗

> ID：15657610
> 
> 赞同：0
> 
> 时间：2013-03-27T11:21:06.653
> 
> 标签：android, user-interface, text, textview, xamarin.android

在我的应用程序中，我显示了几个文本视图，其中包含在运行时加载的各种长度的文本。直到运行时我才知道文本视图的尺寸或文本的长度。有时，当文本很长而文本视图很小时，一些文本是部分可见的，例如：

![在此处输入图像描述](../Images/1fe99b9759fa19b4eb1bafbc3c284a63.png)

我想删除部分可见的文本，因为它看起来有点糟糕，但我找不到这样做的方法。任何帮助，将不胜感激！

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:08:38.273

我就是这样做的。我通过将方法 CheckTextIsVisible 发布到父 relativelayout 的处理程序队列来加载活动后运行此代码，否则将不知道文本视图的高度：

```
m_eventsLayout.Post(new Action(CheckTextIsVisible)); 
```

然后 CheckTextIsVisible 方法找到每个包含文本的 textview，计算字体的高度，计算出 textview 可以容纳多少行，并相应地设置最大行数：

```
 private void CheckTextIsVisible()
    {
        View view;
        TextView tView;
        Android.Text.TextPaint tPaint;
        float height;
        int heightOfTextView;
        int noLinesInTextView;
        for (int i = 0; i < m_eventsLayout.ChildCount; i++)
        {
            view = m_eventsLayout.GetChildAt(i);

            if (view is TextView)
            {
                tView = (TextView)view;
                if (tView.Text != "")
                {         
                    //calculate font height
                    tPaint = tView.Paint;
                    height = CalculateTextHeight(tPaint.GetFontMetrics());
                    //calculate the no of lines that will fit in the text box based on this height
                    heightOfTextView = tView.Height;
                    noLinesInTextView = (int)(heightOfTextView / height);
                    //set max lines to this
                    tView.SetMaxLines(noLinesInTextView);
                }
            }
        }
    }

    private float CalculateTextHeight(Android.Graphics.Paint.FontMetrics fm)
    {
        return fm.Bottom - fm.Top;
    } 
```

这导致没有部分可见的文本！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:29:51.770

您可以硬编码`TextView`高度，使第二行文本不可见。

或使用：

```
android:maxLines , Makes the TextView be at most this many lines tall. 
```

如上所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:31:48.867

将您的文本视图放在滚动视图布局中。并为您的文本视图指定一个特定的宽度并使高度包裹内容。这样您的文本就不会被剪切。

# jquery - 使用 jQuery 识别 IE9/IE10

> ID：15657614
> 
> 赞同：4
> 
> 时间：2013-03-27T11:21:17.957
> 
> 标签：jquery, html, internet-explorer, browser-detection

我有一个适用于 Chrome/Mozilla 但不适用于 IE 的 jQuery 代码。

```
if ($("html").hasClass("ie")) {
    $(function(){
        $('.green-column, .red-column, .grey-column').click(function() { 
             alert ($(this).attr("data-type"));           
        });
    });
}
else {
 $(function(){
        $('.green-column, .red-column, .grey-column').click(function() { 
         $("<div title='Selected Task is:'>" + $(this).attr("data-type") + "</div>").dialog({ 
             modal: true,
             resizable: false,
             buttons: [
                {
                   text: "OK", 
                   click: function() { $( this ).dialog( "close" ); }
                }
             ]
         });
    });
});
}
</script> 
<!--[if IE 7]>    <html lang="en-us" class="ie"> <![endif]-->
<!--[if IE 8]>    <html lang="en-us" class="ie"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en-us" class="ie"> <!--<![endif]--> 
```

所以我计划对 IE9/IE10 使用警报，但我无法区分浏览器。谁能告诉我如何在 jQuery/HTML 中识别 IE9/IE10？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-18T12:03:56.037

无需使用库或条件编译即可实现：

```
if (document.addEventListener) {
    alert("IE9 or greater");
}

if (window.requestAnimationFrame) {
    alert("IE10 or greater");
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T11:23:20.113

就这样做

```
if ($.browser.msie  && parseInt($.browser.version, 10) > 8) {
  alert('IE9 or IE10'); 
} else {
  alert('Non IE9 or IE10');
} 
```

这应该适用于 1.9 以下的 jQuery 版本。如果您使用 1.9+，请阅读此[线程](https://stackoverflow.com/questions/14545023/jquery-1-9-browser-detection)或考虑使用[modernizr](http://modernizr.com/)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-27T11:28:35.070

检测当前活动的 IE 版本（可能是模拟的）的唯一可靠方法是结合[条件编译](http://msdn.microsoft.com/en-us/library/7kx09ct1%28v=vs.80%29.aspx)和[`document.documentMode`](http://msdn.microsoft.com/en-us/library/ie/cc196988%28v=vs.85%29.aspx)检查。

条件编译是可选的，但它允许您永远不要为非 IE 浏览器运行 IE 检测脚本。

例如：

```
if (/*@cc_on !@*/false && (
       document.documentMode === 9 || document.documentMode === 10)
   ) {
    // IE 9 or 10 (not 8 or 11!)
    document.documentElement.className += ' ie9 ie10';
} 
```

前面的代码对 minifiers 是不安全的。如果您要缩小代码，请将条件编译的内容放在一个字符串中，然后`eval`：

```
if (eval('/*@cc_on !@*/false') && ( ... )) { ... } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T11:24:56.577

1.9 之前的旧 jQuery 版本提供`$.browser`了此功能。现在 jQuery 希望你通过`$.support`.

一个不错的选择是modernizr（[http://modernizr.com/](http://modernizr.com/)）。Modernizr 将类添加到您的根元素中，例如`msie`or`ie9`或`webkit`or`touch`等​​等。

因此，您可以轻松检查：

```
if ($('html').hasClass('ie9')) {
    // do something
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-11T19:23:10.783

我知道这是一个老问题。但如果你还没有找到答案。

[如果浏览器不是 Internet Explorer 9 或更高版本，则显示一条消息](https://stackoverflow.com/questions/18739655/show-a-message-if-the-browser-is-not-internet-explorer-9-or-greater?lq=1)

```
browser={};
if (/(chrome\/[0-9]{2})/i.test(navigator.userAgent)) {
    browser.agent = navigator.userAgent.match(/(chrome\/[0-9]{2})/i)[0].split("/")[0];
    browser.version  = parseInt(navigator.userAgent.match(/(chrome\/[0-9]{2})/i)[0].split("/")[1]);
} else if (/(firefox\/[0-9]{2})/i.test(navigator.userAgent)) {
    browser.agent = navigator.userAgent.match(/(firefox\/[0-9]{2})/i)[0].split("/")[0];
    browser.version  = parseInt(navigator.userAgent.match(/(firefox\/[0-9]{2})/i)[0].split("/")[1]);
} else if (/(MSIE\ [0-9]{1})/i.test(navigator.userAgent)) {
    browser.agent = navigator.userAgent.match(/(MSIE\ [0-9]{1})/i)[0].split(" ")[0];
    browser.version  = parseInt(navigator.userAgent.match(/(MSIE\ [0-9]{1})/i)[0].split(" ")[1]);
} else if (/(Opera\/[0-9]{1})/i.test(navigator.userAgent)) {
    browser.agent = navigator.userAgent.match(/(Opera\/[0-9]{1})/i)[0].split("/")[0];
    browser.version  = parseInt(navigator.userAgent.match(/(Opera\/[0-9]{1})/i)[0].split("/")[1]);
} else if (/(Trident\/[7]{1})/i.test(navigator.userAgent)) {
    browser.agent = "MSIE";
    browser.version  = 11;
} else {
    browser.agent = false;
    browser.version  = false;
}

if (/(Windows\ NT\ [0-9]{1}\.[0-9]{1})/.test(navigator.userAgent)) {
    browser.os = "Windows";
    switch(parseFloat(navigator.userAgent.match(/(Windows\ NT\ [0-9]{1}\.[0-9]{1})/)[0].split(" ")[2])) {
    case 6.0:
        browser.osversion = "Vista";
        break;
    case 6.1:
        browser.osversion = "7";
        break;
    case 6.2:
        browser.osversion = "8";
        break;
    default:
        browser.osversion = false;
    }
} else if (/(OS\ X\ [0-9]{2}\.[0-9]{1})/.test(navigator.userAgent)) {
    browser.os = "OS X";
    browser.osversion = navigator.userAgent.match(/(OS\ X\ [0-9]{2}\.[0-9]{1})/)[0].split(" ")[2];
} else if (/(Linux)/.test(navigator.userAgent)) {
    browser.os = "Linux";
    browser.osversion = false;
} 
```

# android - android Wifi直接同时会员

> ID：15657617
> 
> 赞同：1
> 
> 时间：2013-03-27T11:21:29.873
> 
> 标签：android, wifi-direct

android P2p设备是否支持p2p同时会员？我有三个设备 A、B、C。A是Group owner，B是P2p客户端，共同组成一个group。我需要 B 与 C 进行新的组协商。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T02:52:01.943

如果 B 连接到一个组，则它无法连接到 C。但是，C 应该能够连接到 A 或 B 并加入现有组。

# android - 如何在不知道任一设备 IP 地址的情况下通过 LAN 同步 Android 设备上的数据？

> ID：15657618
> 
> 赞同：0
> 
> 时间：2013-03-27T11:21:33.730
> 
> 标签：android, tcp, udp, sync, lan

使用我的应用程序的人应该可以使用我的应用程序与 LAN 中的其他参与者同步 android-smartphone。它们都具有动态 IP 地址。如果有人做出改变，那么每个人都得到所有的改变是非常重要的。其中一名参与者应将信息与互联网上的服务器（第一个）同步。因此，如果新人加入或另一个人离开网络（如果第一个离开另一个人应该与互联网同步），那么通知另一个人是非常重要的。我怎样才能建立这样的网络？我已经尝试过 jGroups，但它的能耗非常高。另一个想法是通过 IP 多播来解决它，但不是每个人都能获得数据。有人知道如何建立这样的网络吗？还有其他工具可以使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:33:21.397

您可以使用混合 udp 多播和 tcp 进程，其中 udp 多播只是表示有人已加入网络。然后，设备应在收到此消息后通过 tcp 连接到服务器并进行身份验证。如果他们通过身份验证，服务器只会告诉设备谁加入了。

# r - ggplot2 中带有子组的图例

> ID：15657625
> 
> 赞同：0
> 
> 时间：2013-03-27T11:22:00.303
> 
> 标签：r, graphics, ggplot2, legend

我想绘制以下数据集：

```
data<-list()
data$Year<-c(rep(1995,4),rep(2005,4))
data$Name<-as.factor(c("name1","name2","name3","name4","name1","name2","name3","name4"))
data$species<-as.factor(c("cat","cat","dog","dog","cat","cat","dog","dog"))
data$Value<-c(1,2,3,4,5,6,7,8)
data<-as.data.frame(data) 
```

这是我想要的情节

```
p<-ggplot(data, aes(x=Year, y=Value,fill=Name, colour=Name,linetype=species,shape=species))
p<-p+geom_point()
p<-p+geom_line() 
```

然而，我想要一个不同的传奇。首先，图例应该包含一个带有正确符号（颜色、线型和形状）的“名称”条目。我可以通过执行以下操作来实现这一点（线型不完全匹配，抱歉）：

```
#Plot with better legend
gg_color_hue <- function(n) {
  hues = seq(15, 375, length=n+1)
  hcl(h=hues, l=65, c=100)[1:n]
}
p2<-ggplot(data, aes(x=Year, y=Value,fill=Name, colour=Name,linetype=Name,shape=Name))
p2<-p2+scale_linetype_manual(values=c(1,1,2,2),breaks=levels(data$Name),name="test")
p2<-p2+scale_shape_manual(values=c(16,16,17,17),breaks=levels(data$Name),name="test")
p2<-p2+scale_colour_manual(values=gg_color_hue(4),breaks=levels(data$Name),name="test")
p2<-p2+scale_fill_manual(values=gg_color_hue(4),breaks=levels(data$Name),name="test")
p2<-p2+geom_point(show_guide=T)
p2<-p2+geom_line(show_guide=T) 
```

然而，现在猫和狗之间不再有区别了。因此，我想在图例（或基本上两个图例）中有字幕： 像这样：

```
cats
symbol(name1) name1
symbol(name2) name2

dogs
symbol(name3) name3
symbol(name4) name4 
```

有人可以帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:21:30.500

[Didzis Elferts](https://stackoverflow.com/users/1857266/didzis-elferts)好心地向我指出[这个](https://stackoverflow.com/questions/15462203/modify-legend-in-facetted-plot-ggplot2/15463216#15463216)线程，其中提供了使用包 gridExtra 的解决方案。这对我来说原则上是有效的（见下面的代码），但我们已经有了自己的一组库，不幸的是，与 gridExtra 包（getNames）有一些冲突的方法。有没有不依赖 gridExtra 包的方法？

这是我使用 gridExtra 的示例的代码：

```
pcat<-ggplot(subset(data,species=="cat"), aes(x=Year, y=Value,fill=Name, colour=Name))+geom_point(shape=16)+geom_line(linetype=1)+guides(colour=guide_legend(title="cat"),shape=guide_legend(title="cat"),linetype=guide_legend(title="cat"),fill=guide_legend(title="cat"))
ppcat<-ggplot_gtable(ggplot_build(pcat))
legcat<-ppcat$grobs[[8]]

pdog<-ggplot(subset(data,species=="dog"), aes(x=Year, y=Value,fill=Name, colour=Name))+geom_point(shape=1)+geom_line(linetype=2)+guides(colour=guide_legend(title="dog"),shape=guide_legend(title="dog"),linetype=guide_legend(title="dog"),fill=guide_legend(title="dog"))
ppdog<-ggplot_gtable(ggplot_build(pdog))
legdog<-ppdog$grobs[[8]]

library(gridExtra)
grid.arrange(arrangeGrob(p,arrangeGrob(legcat,legdog),ncol=2,widths=c(4/5,1/5))) 
```

# c# - 我正在尝试为任何方法调用 InvokeMethod，这些方法的参数接受一些 Ref 参数，它给出了异常

> ID：15657627
> 
> 赞同：0
> 
> 时间：2013-03-27T11:22:06.037
> 
> 标签：c#, com, interop

我想知道如何在使用 InvokeMember 调用方法时将参数传递给 ref / out 方法。

我正在尝试为任何参数接受一些 Ref 参数的方法调用 InvokeMethod，它给出了异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:29:26.283

适用于 ref 和 out 修饰符。

```
public class Example {
  public static void Foo(ref string name) {
    name = "foo";
  }
  public static void Test() {
    var p = new object[1];
    var info = typeof(Example).GetMethod("Foo");
    info.Invoke(null, p);
    var returned = (string)(p[0]);  // will be "foo"
  }
} 
```

# c++ - 使用预构建库构建 C++ 应用程序会产生编译错误

> ID：15657631
> 
> 赞同：0
> 
> 时间：2013-03-27T11:22:16.380
> 
> 标签：c++, build, poco

我正在尝试通过包含 POCO 来修改 C++ 程序，以便能够执行 HTTP 请求并接收结果。基本上，我只需要在另一个 C++ 程序中提供用户名和密码并得到一个简单的“OK”或“ERROR”响应。

我根本不熟悉 C++（主要使用 Java）。我构建了 POCO 项目并安装了它，没有任何问题，但是当我将它添加到项目中时，我在构建时遇到了一些编译器错误：

```
In file included from ../crtmpserver/sources/applications/idomsconnector/src/rtmpappprotocolhandler.cpp:30:
In file included from /usr/local/include/Poco/Net/HTTPClientSession.h:44:
In file included from /usr/local/include/Poco/Net/HTTPSession.h:44:
In file included from /usr/local/include/Poco/Net/StreamSocket.h:44:
In file included from /usr/local/include/Poco/Net/Socket.h:44:
In file included from /usr/local/include/Poco/Net/SocketImpl.h:47:
In file included from /usr/local/include/Poco/Timespan.h:44:
/usr/local/include/Poco/Timestamp.h:50:1: error: declaration of anonymous class must be a definition
class Foundation_API Timestamp
^
/usr/local/include/Poco/Timestamp.h:149:24: error: expected identifier
inline bool Timestamp::operator == (const Timestamp& ts) const
                       ^
/usr/local/include/Poco/Timestamp.h:149:13: error: declaration of anonymous struct must be a definition
inline bool Timestamp::operator == (const Timestamp& ts) const
            ^
../crtmpserver/sources/common/include/platform/osx/osxplatform.h:109:19: note: expanded from macro 'Timestamp'
#define Timestamp struct tm
                  ^
In file included from ../crtmpserver/sources/applications/idomsconnector/src/rtmpappprotocolhandler.cpp:30:
In file included from /usr/local/include/Poco/Net/HTTPClientSession.h:44:
In file included from /usr/local/include/Poco/Net/HTTPSession.h:44:
In file included from /usr/local/include/Poco/Net/StreamSocket.h:44:
In file included from /usr/local/include/Poco/Net/Socket.h:44:
In file included from /usr/local/include/Poco/Net/SocketImpl.h:47:
In file included from /usr/local/include/Poco/Timespan.h:44:
/usr/local/include/Poco/Timestamp.h:262:1: error: expected unqualified-id
} // namespace Poco
^
In file included from ../crtmpserver/sources/applications/idomsconnector/src/rtmpappprotocolhandler.cpp:30:
In file included from /usr/local/include/Poco/Net/HTTPClientSession.h:44:
In file included from /usr/local/include/Poco/Net/HTTPSession.h:44:
In file included from /usr/local/include/Poco/Net/StreamSocket.h:44:
In file included from /usr/local/include/Poco/Net/Socket.h:44:
In file included from /usr/local/include/Poco/Net/SocketImpl.h:47:
/usr/local/include/Poco/Timespan.h:54:21: error: no struct named 'TimeDiff' in 'tm'
        typedef Timestamp::TimeDiff TimeDiff;
                ~~~~~~~~~~~^
In file included from ../crtmpserver/sources/applications/idomsconnector/src/rtmpappprotocolhandler.cpp:30:
In file included from /usr/local/include/Poco/Net/HTTPClientSession.h:44:
In file included from /usr/local/include/Poco/Net/HTTPSession.h:47:
/usr/local/include/Poco/Any.h:123:46: error: cannot use typeid with -fno-rtti
        return _content ? _content->type() : typeid(void);
                                             ^
/usr/local/include/Poco/Any.h:149:20: error: cannot use typeid with -fno-rtti
            return typeid(ValueType);
                   ^
/usr/local/include/Poco/Any.h:180:42: error: cannot use typeid with -fno-rtti
    return operand && operand->type() == typeid(ValueType)
                                         ^
In file included from ../crtmpserver/sources/applications/idomsconnector/src/rtmpappprotocolhandler.cpp:30:
/usr/local/include/Poco/Net/HTTPClientSession.h:291:8: error: expected member name or ';' after declaration specifiers
        Poco::Timestamp _lastRequest;
        ~~~~  ^
../crtmpserver/sources/common/include/platform/osx/osxplatform.h:109:19: note: expanded from macro 'Timestamp'
#define Timestamp struct tm
                  ^
../crtmpserver/sources/applications/idomsconnector/src/rtmpappprotocolhandler.cpp:94:10: error: expected expression
form.add(<D2>entry1<D3>, <D2>value1<D3>);
         ^
../crtmpserver/sources/applications/idomsconnector/src/rtmpappprotocolhandler.cpp:97:25: error: variable has incomplete type 'Poco::Net::HTTPResponse'
Poco::Net::HTTPResponse response;
                        ^
/usr/local/include/Poco/Net/HTTPClientSession.h:55:7: note: forward declaration of 'Poco::Net::HTTPResponse'
class HTTPResponse;
      ^
../crtmpserver/sources/applications/idomsconnector/src/rtmpappprotocolhandler.cpp:99:41: error: no member named 'cout' in namespace 'std'; did you mean 'count'?
Poco::StreamCopier::copyStream(rs, std::cout);
                                   ~~~~~^~~~
                                        count
/usr/include/c++/4.2.1/bits/stl_algo.h:424:5: note: 'count' declared here
    count(_InputIterator __first, _InputIterator __last, const _Tp& __value)
    ^
../crtmpserver/sources/applications/idomsconnector/src/rtmpappprotocolhandler.cpp:99:36: error: address of overloaded function 'count' does not match required type 'std::basic_ostream<char>'
Poco::StreamCopier::copyStream(rs, std::cout);
                                   ^~~~~~~~~
/usr/include/c++/4.2.1/bits/stl_algo.h:424:5: note: candidate function
    count(_InputIterator __first, _InputIterator __last, const _Tp& __value)
    ^
/usr/local/include/Poco/StreamCopier.h:57:73: note: passing argument to parameter 'ostr' here
    static std::streamsize copyStream(std::istream& istr, std::ostream& ostr, std::size_t bufferSize = 8192);
                                                                        ^
13 errors generated.
make[2]: *** [applications/idomsconnector/CMakeFiles/idomsconnector.dir/Users/[...]/sources/applications/idomsconnector/src/rtmpappprotocolhandler.cpp.o] Error 1
make[1]: *** [applications/idomsconnector/CMakeFiles/idomsconnector.dir/all] Error 2
make: *** [all] Error 2
build failed 
```

我的代码片段如下：

```
#include <Poco/Net/HTTPRequest.h>
#include <Poco/Net/HTTPClientSession.h>
#include <Poco/Net/HTMLForm.h>
#include <Poco/StreamCopier.h>

string RTMPAppProtocolHandler::GetAuthPassword(string user) {
     INFO("Testing auth: %s", STR(user));

     Poco::Net::HTTPClientSession s("www.somehost.com");
     //s.setProxy("localhost", srv.port());
     Poco::Net::HTTPRequest request(Poco::Net::HTTPRequest::HTTP_GET, "/large");
     Poco::Net::HTMLForm form;
     form.add(“entry1”, “value1”);
     form.prepareSubmit(request);
     s.sendRequest(request);
     Poco::Net::HTTPResponse response;
     std::istream& rs = s.receiveResponse(response);
     Poco::StreamCopier::copyStream(rs, std::cout); 

   return user;
} 
```

我在做傻事吗？我需要修改的只是与 HTTP 服务器的这个小交互，所以我只是在寻找一个非常简单的解决方案，但发现很难找到容易工作的东西（主要是因为我不熟悉 C++）

# arrays - 使用范围 VBA 填充数组

> ID：15657635
> 
> 赞同：1
> 
> 时间：2013-03-27T11:22:47.240
> 
> 标签：arrays, excel, range, vba

我的工作是在工作中修复假期电子表格，文件的问题是有直接引用，对其他工作表的间接引用和一些未引用的部分，所以如果你想把人们完全按照不同的顺序排列把整个事情搞砸了。所以，我一直在尝试做的是用人们的名字填充一个数组，对数组进行排序，然后与原始数组交叉引用并找到一个新顺序，以便可以在整个工作表中实施这个新顺序而不会搞砸.

问题是我似乎无法填充数组，我已经查看了此处的其他答案，但我确定我正在正确使用 redim，这往往是问题所在。

因此，Previous 是原始列表，Current 是排序列表，Position 是前一个与当前相关的数字。

```
Sub Sorting()

Dim Previous() As Variant
Dim Current() As Variant
Dim maxrow As Long
Dim i As Long
Dim j As Long
Dim k As Long
Dim Position() As Long
Dim rng As Range
Dim strTemp As String

k = 0
i = 3
maxrow = 3

Do While Worksheets(1).Cells(i, 1).Value <> "STAT.HOL'S (ST)"
maxrow = maxrow + 1
i = i + 1
Loop
maxrow = maxrow - 1

ReDim Previous(0 To maxrow)
ReDim Position(0 To maxrow)
ReDim Current(0 To maxrow)
Previous = Range("a4", Range("a" & maxrow))
Current = Previous
For i = 0 To maxrow
For j = 0 To maxrow
If Current(i) > Current(j) Then
strTemp = Current(i)
Current(i) = Current(j)
Current(j) = strTemp
End If
Next j
Next i

For i = 0 To maxrow
For j = 0 To maxrow

If Previous(i) = Current(j).Value Then
Position(k) = j
k = k + 1
End If

Next j
Next i

End Sub 
```

谢谢你的帮助。艾米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:56:34.590

Excel 范围始终被视为具有 2 个维度，即使它们是单列也是如此。此外，您不需要重新调整变量数组 - 只需将范围分配给普通变量变量，它将创建一个包含二维数组的变量：

```
Dim Previous as variant
Previous = Range("a4:a" & maxrow) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:20:43.407

您确实填充了数组，但是您以错误的方式处理它们。

将范围分配给数组时，数组会自动重新调整为二维数组，一个用于行，一个用于列。

由于您的范围只有一列，因此第二个维度始终为 1。因此，在运行该行之后，`Previous = Range("a4", Range("a" & maxrow))`您有一个数组，其尺寸为：

```
Previous(1 to 10, 1 To 1) 
```

此外，您的 For 循环可以更改为以下内容：

```
For i = LBound(Current, 1) To UBound(Current, 1)

Next i 
```

# c# - 条件变量 C#/.NET

> ID：15657637
> 
> 赞同：16
> 
> 时间：2013-03-27T11:22:52.750
> 
> 标签：c#, .net

在我构建条件变量类的过程中，我偶然发现了一种非常简单的方法，我想与堆栈溢出社区分享这一点。我在谷歌上搜索了一个小时的大部分时间，但实际上找不到合适的教程或 .NET-ish 示例，希望这对其他人有用。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-27T11:22:52.750

一旦你了解了 and 的语义，它实际上非常`lock`简单`Monitor`。

但首先，您确实需要一个对象引用。您可以使用`this`，但请记住，任何引用您的类的人都可以锁定该引用`this`。`public`如果您对此感到不舒服，可以创建一个新的私有引用，如下所示：

```
readonly object syncPrimitive = new object(); // this is legal 
```

在您希望能够提供通知的代码中的某处，可以这样完成：

```
void Notify()
{
    lock (syncPrimitive)
    {
        Monitor.Pulse(syncPrimitive);
    }
} 
```

你做实际工作的地方是一个简单的循环结构，像这样：

```
void RunLoop()
{
    lock (syncPrimitive)
    {
        for (;;)
        {
            // do work here...
            Monitor.Wait(syncPrimitive);
        }
    }
} 
```

从外面看，这看起来令人难以置信的死锁，但是`Monitor`当您调用 时，锁定协议将释放锁`Monitor.Wait`，实际上，要求您在调用或`Monitor.Pulse`之前获得锁。`Monitor.PulseAll``Monitor.Wait`

您应该了解这种方法的一个警告。由于在调用您的通信方法之前需要保持锁定，`Monitor`因此实际上应该只在尽可能短的时间内保持锁定。`RunLoop`对长时间运行的后台任务更友好的变体如下所示：

```
void RunLoop()
{

    for (;;)
    {
        // do work here...

        lock (syncPrimitive)
        {
            Monitor.Wait(syncPrimitive);
        }
    }
} 
```

但是现在我们稍微改变了问题，因为锁不再用于保护共享资源，因此，如果您的代码`do work here...`需要访问共享资源，您需要一个额外的锁来保护该资源。

我们可以利用上面的代码来创建一个简单的线程安全的生产者消费者集合，虽然.NET已经提供了一个很好的`ConcurrentQueue<T>`实现，这只是为了说明这样使用的简单性`Monitor`。

```
class BlockingQueue<T>
{
    // We base our queue, on the non-thread safe 
    // .NET 2.0 queue collection
    readonly Queue<T> q = new Queue<T>();

    public void Enqueue(T item)
    {
        lock (q)
        {
            q.Enqueue(item);
            System.Threading.Monitor.Pulse(q);
        }
    }

    public T Dequeue()
    {
        lock (q)
        {
            for (; ; )
            {
                if (q.Count > 0)
                {
                    return q.Dequeue();
                }
                System.Threading.Monitor.Wait(q);
            }
        }
    }
} 
```

现在这里的重点不是构建阻塞集合，它在 .NET 框架中也可用（请参阅 BlockingCollection）。`Monitor`重点是说明使用.NET 中的类来实现条件变量来构建事件驱动的消息系统是多么简单。希望您觉得这个有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-29T10:11:52.887

## 使用 ManualResetEvent

与条件变量类似的类是[ManualResetEvent](https://msdn.microsoft.com/en-us/library/system.threading.manualresetevent(v=vs.110).aspx)，只是方法名略有不同。

在`notify_one()`C++ 中将`Set()`在 C# 中命名。
在`wait()`C++ 中将`WaitOne()`在 C# 中命名。

此外，**ManualResetEvent**还提供了`Reset()`将事件状态设置为无信号的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-26T16:59:51.823

公认的答案不是一个好答案。根据 Dequeue() 代码，Wait() 在每个循环中都会被调用，这会导致不必要的等待，从而导致过多的上下文切换。正确的范例应该是，当**满足等待条件**时调用 wait() 。在这种情况下，等待条件是 q.Count() == 0。

在使用监视器时，这是一个更好的模式。 [https://msdn.microsoft.com/en-us/library/windows/desktop/ms682052%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms682052%28v=vs.85%29.aspx)

关于 C# Monitor 的另一条评论是，它不使用条件变量（这实际上会唤醒所有等待该锁的线程，而不管它们等待的条件如何；因此，一些线程可能会抓住锁并立即当他们发现等待条件没有改变时返回睡眠）。它不像 pthread 那样为您提供查找粒度的线程控制。但无论如何它都是.Net，所以并不完全出乎意料。

=============应约翰的要求，这是一个改进的版本=============

```
class BlockingQueue<T>
{
    readonly Queue<T> q = new Queue<T>();

    public void Enqueue(T item)
    {
        lock (q)
        {
            while (false) // condition predicate(s) for producer; can be omitted in this particular case
            {
                System.Threading.Monitor.Wait(q);
            }
            // critical section
            q.Enqueue(item);
        }

        // generally better to signal outside the lock scope
        System.Threading.Monitor.Pulse(q);
    }

    public T Dequeue()
    {
        T t;
        lock (q)
        {
            while (q.Count == 0) // condition predicate(s) for consumer
            {
                System.Threading.Monitor.Wait(q);
            }

            // critical section
            t = q.Dequeue();
        }

        // this can be omitted in this particular case; but not if there's waiting condition for the producer as the producer needs to be woken up; and here's the problem caused by missing condition variable by C# monitor: all threads stay on the same waiting queue of the shared resource/lock.
        System.Threading.Monitor.Pulse(q);

        return t;
    }
} 
```

我想指出几点：

1，我认为我的解决方案比您的解决方案更准确地捕获了需求和定义。具体来说，当且仅当队列中没有任何东西时，消费者才应该被迫等待；否则由 OS/.Net 运行时来安排线程。然而，在您的解决方案中，消费者被迫在每个循环中等待，无论它是否实际消耗了任何东西——这就是我所说的过度等待/上下文切换。

2，我的解决方案是对称的，即消费者和生产者代码共享相同的模式，而您的则不是。如果您确实知道模式并且只是在这种特殊情况下省略了，那么我收回这一点。

3，您的解决方案在锁定范围内发出信号，而我的解决方案在锁定范围外发出信号。请参阅此答案，了解为什么您的解决方案更糟。 [为什么我们要在锁定范围之外发出信号](https://stackoverflow.com/questions/6419117/signal-and-unlock-order)%20condition%20variable)

我说的是C#监视器中缺少条件变量的缺陷，这里是它的影响：C#根本没有办法实现将等待线程从条件队列移动到锁队列的解决方案。因此，在链接中答案提出的三线程场景中，注定会发生过度的上下文切换。

此外，缺少条件变量使得无法区分线程等待相同共享资源/锁的各种情况，但原因不同。所有等待线程都放置在该共享资源的大等待队列中，这会降低效率。

“但无论如何它都是.Net，所以并不完全出乎意料”——.Net 没有像 C++ 那样追求高效率是可以理解的，这是可以理解的。但这并不意味着程序员不应该知道这些差异及其影响。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-18T17:40:12.527

转到[deadlockempire.github.io/](http://deadlockempire.github.io/)。他们有一个很棒的教程，可以帮助你理解条件变量和锁，并且一定会帮助你编写你想要的类。

您可以在 deadlockempire.github.io 上单步执行以下代码并对其进行跟踪。这是代码片段

```
while (true) {
  Monitor.Enter(mutex);
  if (queue.Count == 0) {
    Monitor.Wait(mutex);
  }
  queue.Dequeue();
  Monitor.Exit(mutex);
}

while (true) {
  Monitor.Enter(mutex);
  if (queue.Count == 0) {
    Monitor.Wait(mutex);
  }
  queue.Dequeue();
  Monitor.Exit(mutex);
}

while (true) {
  Monitor.Enter(mutex);
  queue.Enqueue(42);
  Monitor.PulseAll(mutex);
  Monitor.Exit(mutex);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-11T13:13:13.217

正如 h9uest 的回答和评论所指出的那样，监视器的等待接口不允许适当的条件变量（即它不允许在每个共享锁上等待多个条件）。

好消息是.NET 中的其他同步原语（例如 SemaphoreSlim、lock 关键字、Monitor.Enter/Exit）可用于实现适当的条件变量。

以下 ConditionVariable 类将允许您使用共享锁等待多个条件。

```
class ConditionVariable
{
  private int waiters = 0;
  private object waitersLock = new object();
  private SemaphoreSlim sema = new SemaphoreSlim(0, Int32.MaxValue); 

  public ConditionVariable() { 
  }

  public void Pulse() {

      bool release;

      lock (waitersLock)
      {
         release = waiters > 0;
      }

      if (release) {
        sema.Release();
      }
  }

  public void Wait(object cs) {

    lock (waitersLock) {
      ++waiters;
    }

    Monitor.Exit(cs);

    sema.Wait();

    lock (waitersLock) {
      --waiters;
    }

    Monitor.Enter(cs);
  }
} 
```

您需要做的就是为您希望能够等待的每个条件创建一个 ConditionVariable 类的实例。

```
object queueLock = new object();

private ConditionVariable notFullCondition = new ConditionVariable();
private ConditionVariable notEmptyCondition = new ConditionVariable(); 
```

然后就像在 Monitor 类中一样，必须从同步的代码块中调用 ConditionVariable 的 Pulse 和 Wait 方法。

```
T Take() {

  lock(queueLock) {

    while(queue.Count == 0) {

      // wait for queue to be not empty
      notEmptyCondition.Wait(queueLock);
    }

    T item = queue.Dequeue();

    if(queue.Count < 100) {

      // notify producer queue not full anymore
      notFullCondition.Pulse();
    }

    return item;
  }
}

void Add(T item) {

  lock(queueLock) {

    while(queue.Count >= 100) {

      // wait for queue to be not full
      notFullCondition.Wait(queueLock);
    }

    queue.Enqueue(item);

    // notify consumer queue not empty anymore
    notEmptyCondition.Pulse();
  }
} 
```

下面是使用 C# 中 100% 托管代码的适当条件变量类的完整源代码的链接。

[https://github.com/CodeExMachina/ConditionVariable](https://github.com/CodeExMachina/ConditionVariable)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-07T13:29:57.330

我想我在一个典型的问题上找到了“The WAY”

```
List<string> log; 
```

由多个线程使用，一个填充它，另一个处理，另一个清空

避空

```
 while(true){
    //stuff
    Thread.Sleep(100)
    } 
```

程序中使用的变量

```
 public static readonly List<string> logList = new List<string>();

    public static EventWaitHandle evtLogListFilled = new AutoResetEvent(false); 
```

处理器像

```
private void bw_DoWorkLog(object sender, DoWorkEventArgs e)
    {
        StringBuilder toFile = new StringBuilder();
        while (true)
        {
            try
            {
                {
                    //waiting form a signal
                    Program.evtLogListFilled.WaitOne();
                    try
                    {
                        //critical section
                        Monitor.Enter(Program.logList);
                        int max = Program.logList.Count;
                        for (int i = 0; i < max; i++)
                        {
                            SetText(Program.logList[0]);
                            toFile.Append(Program.logList[0]);
                            toFile.Append("\r\n");
                            Program.logList.RemoveAt(0);
                        }
                    }
                    finally
                    {
                        Monitor.Exit(Program.logList);
                        // end critical section
                    }

                    try
                    {
                        if (toFile.Length > 0)
                        {
                            Logger.Log(toFile.ToString().Substring(0, toFile.Length - 2));
                            toFile.Clear();
                        }
                    }
                    catch
                    {

                    }
                }
            }
            catch (Exception ex)
            {
                Logger.Log(System.Reflection.MethodBase.GetCurrentMethod(), ex);
            }
            Thread.Sleep(100);

        }
    } 
```

在填充线上我们有

```
public static void logList_add(string str)
    {
        try
        {
            try
            {
                //critical section
                Monitor.Enter(Program.logList);
                Program.logList.Add(str);
            }
            finally
            {
                Monitor.Exit(Program.logList);
                //end critical section
            }
            //set start
            Program.evtLogListFilled.Set();

        }
        catch{}

    } 
```

此解决方案经过全面测试，指令 Program.evtLogListFilled.Set(); 可能会释放 Program.evtLogListFilled.WaitOne() 上的锁定以及下一个未来锁定。

我认为这是最简单的方法。

# gwt - 如何隐藏 GXT 的信息通知？

> ID：15657639
> 
> 赞同：0
> 
> 时间：2013-03-27T11:22:52.957
> 
> 标签：gwt, gxt

我在我的 GWT 应用程序中使用 GXT 的 Info 类来显示消息或通知。为了使消息有点粘，我实现了自己的 Info 类版本：我创建了一个`InfoConfig`实例并设置了毫秒数：`config.display(int milliseconds);`

问题是有时我不需要信息是“粘性的”，所以当我做其他事情时我需要隐藏它：我试图调用该`hide()`方法但它不起作用！

我对 Info 类的实现：

```
public class StickyInfo extends Info {

    private static StickyInfo info = new StickyInfo();

    public StickyInfo() {
        super();
    }

    @Override
    protected void onShowInfo() {
        super.onShowInfo();
    }

    /**
     * Show the message with a title for 20sec (default duration)
     * 
     * @param title
     *            the title of the message.
     * @param message
     *            the message to display.
     */
    public void show(String title, String message) {
        show(title, message, 20000); // for 20sec
    }

    /**
     * Show the message with no title for 20sec (default duration)
     * 
     * @param message
     *            the message to display.
     */
    public void show(String message) {
        show(null, message, 20000); // for 20sec
    }

    /**
     * Show the message for the specified number of milliseconds.
     * 
     * @param title
     *            the title of the message.
     * @param message
     *            the message to display.
     * @param milliseconds
     *            the number of milliseconds to display the message.
     */
    public void show(String title, String message, int milliseconds) {
        // Configuration
        InfoConfig config = new DefaultInfoConfig(title, message);
        config.setDisplay(milliseconds);
        // Formatting
        info.setStyleName("background-color:#f9ff4f;text-align:center;"
                + "border:0x solid black; padding: 3px; font-size:11px;font-weight: bold;");
        info.show(config);

        // Position
        // Point p = info.position();
        // p.setY(p.getY() + 400);
        // p.setX(0);
        info.setPagePosition(info.position().getX(), 55);
    }

    /**
     * Show the message in the given position for the number of milliseconds.
     * 
     * @param title
     *            the title of the message.
     * @param message
     *            the message to display.
     * @param milliseconds
     *            the number of milliseconds to display the message.
     */
    public void show(String title, String message, int milliseconds, int pX,
            int pY) {
        // Configuration
        InfoConfig config = new DefaultInfoConfig(title, message);
        config.setDisplay(milliseconds);
        // Formatting
        info.setStyleName("background-color:#f9ff4f;text-align:center;"
                + "border:0x solid black; padding: 3px; font-size:11px;font-weight: bold;");
        info.show(config);

        // Position
        // Point p = info.position();
        // p.setY(p.getY() + 400);
        // p.setX(0);
        info.setPagePosition(pX, pY);
    } 
```

任何指针？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:07:04.900

尝试@Override Hide() 方法....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:08:06.963

正如*user2043260*提到的，我尝试`hide()`使用以下方法覆盖该方法：

```
@Override
public void hide() {
   if (info.getParent != null) {
      info.removeFromParent();
   }
} 
```

它工作正常:)！感谢您的提醒 ;）

# javascript - Javascript 抛出：拒绝执行内联事件处理程序，因为它违反了以下内容安全策略指令：“script-src 'self'

> ID：15657644
> 
> 赞同：20
> 
> 时间：2013-03-27T11:22:56.993
> 
> 标签：javascript, google-chrome-extension

我是谷歌浏览器扩展开发的新手。我正在尝试开发一个简单的扩展，但我不断收到上述错误。

我的清单：

```
{
  "name": "set my favourties",
  "description" : "just another super awesome plugin",
  "version" : "0.1", 
    "background": {
    "page": "backround.html"
  },

   "manifest_version": 2,
    "content_security_policy": "script-src 'self' https://www.google.com; object-src 'self'",

   "browser_action" :{
     "popup" : "popup.html",
     "default_icon" : "icon.gif"
     },

     "permissions" : ["notifications"]
 } 
```

html代码：

```
<html>
<head>
<script src = "backround.js">

</script>
</head>
<body onload = "loadHandler()">

</body>
</html> 
```

和js：

```
 function loadHandler(){
  window.webkitNotifications.createNotification("icon.gif","Plugin Loaded","it was loaded").show();

   } 
```

提前致谢

尼尔

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T11:37:19.690

~~如果这不是 Chrome 扩展程序，您可以添加`'unsafe-inline'`到可接受的位置列表以从中加载脚本，~~但是您应该完全避免使用内联事件处理程序。

替换（在 HTML 中）：

```
onload = "loadHandler()" 
```

与（在脚本中）：

```
window.addEventListener('load', loadHandler); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-28T20:41:46.330

正确的。这记录在这里：http: [//developer.chrome.com/extensions/tut_migration_to_manifest_v2.html#inline_scripts](http://developer.chrome.com/extensions/tut_migration_to_manifest_v2.html#inline_scripts)

# jquery - 运行多个 jQuery 效果时的布局问题

> ID：15657647
> 
> 赞同：0
> 
> 时间：2013-03-27T11:23:06.523
> 
> 标签：jquery, css, jquery-animate, jquery-effects

我在运行多个 jQuery 效果时遇到了布局问题。我正在尝试将 div 向下移动 100px 以为第二个 div 出现腾出空间。我的主 div 向下移动 100px，但随后又跳了 100px 以容纳 100px 高的第二个 div 所需的空间。我的jQuery代码如下；

```
$(function() {
    function runMenuEffect() {
        $( "#main-bottom-area" ).animate({top:"100px"}, 1000);
        $( ".slide-area" ).delay(1000).show( "drop", 1300 );
        $( ".maincontent-right-nav" ).delay(1500).hide( "fade", 1500 );
        $( "#main-bottom-area" ).delay(1500).animate({opacity: 0.5}, 1000);
    };
    $( "#sub-show-more" ).click(function() {
       runMenuEffect();
       return false;
    });
    $( ".slide-area" ).hide();
}); 
```

我认为这可能是一个 css 问题，因此尝试使用顶部（主框使用位置：相对；）、margin-top 和 padding top 为框设置动画。

CSS；

```
#main-bottom-area {
    position: relative;
    top:0px;
}

.slide-area {
    min-height:100px;
    position:relative;
    overflow:hidden;
    margin-top: 0;
    margin-right: -9999px;
    margin-bottom: 0;
    margin-left: -9999px;
    padding-top: 0;
    padding-right: 9999px;
    padding-bottom: 0;
    padding-left: 9999px;
} 
```

# backbone.js - Backbone.js 视图继承 - 如何扩展 ChildViews？

> ID：15657649
> 
> 赞同：0
> 
> 时间：2013-03-27T11:23:17.067
> 
> 标签：backbone.js

我试图让我的子视图从父视图继承，但不太确定如何去做。我确实找到了类似问题[Backbone.js 视图继承](https://stackoverflow.com/questions/7735133/backbone-js-view-inheritance)的答案，但真的不知道如何在我的代码中实现它.任何建议都非常感谢。谢谢

```
win.MyApp = {
    Models: {
        Model_1 : Backbone.Model.extend({

        }),
        Model_2 : Backbone.Model.extend({

        }),
        Model_3 : Backbone.Model.extend({

        })
    },
    Views: {
        ViewParent : Backbone.View.extend({

        }),
        ViewChild_1 : Backbone.View.extend({

        }),
        ViewChild_2 : Backbone.View.extend({

        })
    },
    Routers: {
        MainRouter : Backbone.Router.extend({

        })
    },
    init: function(){
        router = new this.Routers.MainRouter();
        Backbone.history.start();
    }
}

$(document).ready(function () {
    MyApp.init()
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:59:55.730

借助 Backbone，您可以扩展您创建的类：它们也具有扩展方法。

```
var Parent = Backbone.Model.extend({});
var Child = Parent.extend({}); 
```

[简单的例子在这里](http://jsfiddle.net/zJuHL/)

如果我记得 Backbone 的代码，如果发生冲突（OOP 逻辑），孩子的方法将删除父母的方法。

# javascript - 将页面放入 IFRAME

> ID：15657653
> 
> 赞同：0
> 
> 时间：2013-03-27T11:23:39.090
> 
> 标签：javascript, html, css

我是 html、css、javascript 的新手。我正在尝试将页面加载为页面中的子菜单项。我有这个代码：

```
<!DOCTYPE html>
<html>
    <meta name="viewport" content="width=1024">
    <head>
        <link rel="stylesheet" type="text/css" href="homePage.css">
        <title> Sample Website </title>
        <script>
            function showPicture(value)
            {
                if(value == "true")
                {
                    document.getElementById("content").innerHTML = '';
                    document.getElementById("content").innerHTML 
                            += '<iframe id="Picturebox" width = "76%" height = "545" src="menu1.html"></iframe>';
                }
                else
                {
                document.getElementById("content").innerHTML = '';
                }
            }
        </script>
    </head>
    <body>

        <div id = "Header">
            <h1> SAMPLE WEBSITE </h1>

        </div>      
        <div id = "Banner">
            <img id ="imgBanner" src = "./images/images.jpeg" />
        </div>      
        <div id="container">
        <div id = "menu">
            <table cellpadding="15">
                <tr> 
                    <td>
                        <a href="#" onclick="showPicture('true')">Menu 1</a> 

                    </td> 
                </tr>
                <tr> 
                    <td>
                        <a href="#" onclick="showPicture('false')">Menu 2</a>
                    </td> 
                </tr>
                <tr> 
                    <td>
                        <a href="#"  onclick="showPicture('false')">Menu 3</a>
                    </td> 
                </tr>
                <tr> 
                    <td>
                        <a href="#" onclick="showPicture('false')">Menu 4</a>
                    </td> 
                </tr>
            </table>
        </div> 
        <div id="content"></div>
        </div>

    </body>
</html> 
```

## menu1.html

```
<html>
    <meta name="viewport" content="width=80%,height=80%, scale=0.5">
<head>
    <link rel="stylesheet" type="text/css" href="subPage.css">
</head>
<body>

<h1>Menu 1 </h1>
<div id = "UnderLine"></div>
<p>     Hello!,
        this is a sample page having a heading,some content and 6 pictures .
</p>
<div id = "UnderLine"></div><br/>
<h4> Images </h4>
<div id = "UnderLine"></div><br/>
<div class="imgbox" style="position:relative;">
<img id = "pictures" src="./images/p (1).jpg" name=""/>
<img id = "pictures" src="./images/p (2).jpg" name=""/>
<img id = "pictures" src="./images/p (3).jpg" name=""/>
<img id = "pictures" src="./images/p (4).jpg" name=""/>
<img id = "pictures" src="./images/p (5).jpg" name=""/>
<img id = "pictures" src="./images/p (6).jpg" name=""/>
</div>

</body>

</html> 
```

在这里我尽了最大的努力。但是`IFrame`加载带有水平滚动条的页面。我需要帮助**使它适合里面**。有没有办法获得相同的。我用谷歌搜索，但其中一些或全部都在说宽度。不是关于身高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:27:28.197

尝试

```
<iframe id="Picturebox" width = "76%" height = "545" src="menu1.html" scrolling="no"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:27:01.520

```
<iframe scrolling="no" .... 
```

阅读此文档：[http ://www.w3schools.com/tags/att_iframe_scrolling.asp](http://www.w3schools.com/tags/att_iframe_scrolling.asp)

# mysql - 从 2 个表中获取列并按日期排序

> ID：15657664
> 
> 赞同：0
> 
> 时间：2013-03-27T11:24:14.220
> 
> 标签：mysql, sql, sql-order-by, union

我有 2 个表都包含一个`event`和`date`列。有没有办法将两个列`event`字段的结果合并为一个并按字段对它们进行排序`date`。这样只`event`返回一个（和组合的）而不是 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:30:29.083

```
SELECT event,date FROM table1
UNION
SELECT event,date FROM table2 ORDER BY date 
```

使用 UNION 时，您在底部查询中使用 ORDER by ，它将对标记查询进行排序

你不能使用它，除了底部查询它应该抛出一个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:33:30.053

```
SELECT  a.event, MAX(a.date) date
FROM
        (
           SELECT event, date FROM TableA
           UNION
           SELECT event, date FROM TableB
        ) a
GROUP   BY a.event
ORDER   BY a.date DESC 
```

# django - Django Admin - 多个内联

> ID：15657665
> 
> 赞同：0
> 
> 时间：2013-03-27T11:24:14.370
> 
> 标签：django, django-admin

在我的管理控制台中使用多个内联时遇到了一些麻烦，超过了 3 个我正在玩的模型。

楷模：

```
class carManufacturer(models.Model):
    name = models.CharField(max_length=200)
    country = models.CharField(max_length=200)
    description = models.CharField(max_length=1000)

    def __unicode__(self):
        return self.name

class vehicleModel(models.Model):
    carManufacturer = models.ForeignKey(carManufacturer)
    model = models.CharField(max_length=200)

    def __unicode__(self):
        return self.model

class vehicleCode(models.Model):
    vehicleModel = models.ForeignKey(vehicleModel)
    variantCode = models.CharField(max_length=200) 
    variantBadge = models.CharField(max_length=200)
    manuStart = models.DateTimeField('Manufacture Start Date')
    manuFin = models.DateTimeField('Manufacture End Date')

    def __unicode__(self):
        return self.variantCode 
```

我想要做的是当我添加汽车制造商时，我可以通过我的内联添加汽车模型，当我编辑模型时，我可以通过另一个内联编辑车辆代码/变体。

我有一个正在使用的 admin.py 文件：

```
from Cars.models import carManufacturer, vehicleModel, vehicleCode
from django.contrib import admin

class modelInline(admin.TabularInline):
    model = vehicleModel
    extra = 0

class codeInline(admin.TabularInline):
    variantCode = vehicleCode
    extra = 0

class CarAdmin(admin.ModelAdmin):
    fields = ['name',  'description', 'country']
    inlines = [modelInline]

class VehicleModelAdmin(admin.ModelAdmin):
    fields = ['carManufacturer','model']
    #inlines = [codeInline]

admin.site.register(carManufacturer, CarAdmin)
admin.site.register(vehicleModel, VehicleModelAdmin) 
```

一旦我取消注释我的第二个内联，它使用与第一个相同的方法，我就会收到以下错误：

> 'model' 是 'VehicleModelAdmin.inlines[0]' 的必需属性。

我很难理解我做错了什么，特别是因为我已经完成了第一个内联工作，任何输入都将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:07:07.323

codeInline 没有任何 TabularInline 的模型字段，您确实需要上述模型字段。它应该有类似以下的内容

```
class codeInline(admin.TabularInline):
    model = vehicleCode
    extra = 0 
```

# java - 在 Objective C iOS 中文件上传图片文件代码

> ID：15657666
> 
> 赞同：0
> 
> 时间：2013-03-27T11:24:15.600
> 
> 标签：java, objective-c, nsmutableurlrequest

我是 iOS 应用程序开发的新手，我只想使用 NSMutableURLRequest 上传图像文件。请求的正文应包含在图像中。我只想将如下图像作为java代码发送

```
 HttpPut mCreatePost = new HttpPut(params[0]+"/data");
 FileEntity fileEntity = new FileEntity(uploadFile, "image/jpeg");
 mCreatePost.setEntity(fileEntity);
 mHttpClient.execute(mCreatePost); 
```

请帮我编写上面的Objective C代码。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-03T05:02:40.663

过程

1.  创建一个 NSMutableURLRequest
2.  设置 NSMutableURLRequest 的 URL
3.  为 NSMutableURLRequest 设置 HTTP 方法
4.  为 NSMutableURLRequest 设置标头字段
5.  为 NSMutableURLRequest 设置 HTTP 正文。这将包括图像文件和任何其他参数（下面的示例代码）
6.  初始化一个先前声明的 NSMutableData 对象。这用于存储来自服务器的响应（下面的示例代码）
7.  初始化一个先前声明的 NSURLConnection 对象并设置它的委托。在示例代码中，我创建了与委托相同的类并实现了委托方法。

示例代码

```
- (void)uploadImage    
    NSString *urlStr = @"your link to the server";

        NSMutableURLRequest *urlRequest = [[[NSMutableURLRequest alloc] init] autorelease];
        [urlRequest setURL:[NSURL URLWithString:urlStr]];

        [urlRequest setHTTPMethod:@"POST"];

        NSString *myboundary = [NSString stringWithFormat:@"---------------------------14737809831466499882746641449"];
        NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",myboundary];
        [urlRequest addValue:contentType forHTTPHeaderField: @"Content-Type"];

        NSMutableData *postData = [NSMutableData data];

        NSString *filePath = @"path to file you want to upload";

            NSData *zipData = [NSData dataWithContentsOfFile:filePath];
            if(zipData != nil){
                [postData appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", myboundary] dataUsingEncoding:NSUTF8StringEncoding]];
                [postData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@\"\r\n", @"file.zip"]dataUsingEncoding:NSUTF8StringEncoding]];
                [postData appendData:[[NSString stringWithFormat:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
                [postData appendData:[NSData dataWithData:zipData]];
            }

        NSString *params =@"Any other parameters you want to send with the file";

            NSLog(@"%@",params);
            [postData appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", myboundary] dataUsingEncoding:NSUTF8StringEncoding]];
            [postData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", @"params"] dataUsingEncoding:NSUTF8StringEncoding]];
            [postData appendData:[[NSString stringWithFormat:@"%@", params] dataUsingEncoding:NSUTF8StringEncoding]];

        [postData appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", myboundary] dataUsingEncoding:NSUTF8StringEncoding]];

        [urlRequest setHTTPBody:postData];

        [urlRequest setValue:[SettingsDataStore getSharedInstance].cooike forHTTPHeaderField:@"Cookie"];

        responsedata = [[NSMutableData alloc] initWithData:nil];
        conn =  [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];

    }

    //NSURLConnection Delegate

    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
        [responsedata appendData:data];
    }
    - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
        NSLog(@"error occured %@", [error localizedDescription]);
        [responseData release];
        [conn release];

    }

    - (void)connectionDidFinishLoading:(NSURLConnection *)connection {

        //Do something with responseData and release it

        [responseData release];
        [conn release];

    } 
```

# c# - 从任务栏中隐藏进程图标

> ID：15657667
> 
> 赞同：2
> 
> 时间：2013-03-27T11:24:21.720
> 
> 标签：c#, taskbar, system.diagnostics

我正在编写启动触摸键盘进程的 ac# 程序。

```
Process.Start(Environment.GetFolderPath(Environment.SpecialFolder.System) + Path.DirectorySeparatorChar + "osk.exe"); 
```

我不希望此进程图标显示在任务栏中。编码：

```
ShowInTaskBar = false; 
```

不起作用，因为这不是表单而是过程。我怎样才能做到这一点？

[编辑：我在任务栏中的隐藏工作进程图标中](https://stackoverflow.com/questions/14726826/hide-icon-of-working-process-in-taskbar)看到了示例，我尝试在 C# 中执行此操作，但它仍然无法正常工作。

我唯一的疑问是关于 WS_EX_APPWINDOW 因为在 C# 中我无法将值 &H40000 设置为 inttype，所以我查看了网络并尝试设置 `const int WS_EX_APPWINDOW = 0x00040000;

然而，调用后样式变量值为 0

```
int style = (GetWindowLong(p.MainWindowHandle, GWL_EXSTYLE) & ~WS_EX_APPWINDOW) ; 
```

有任何想法吗？

# php - 由于卖家的网站，PayPal 无法处理此交易

> ID：15657671
> 
> 赞同：1
> 
> 时间：2013-03-27T11:24:26.250
> 
> 标签：php, paypal, live

在成功对网站支付标准进行沙盒测试后，我现在要上线了。当我点击“立即购买”按钮时，我应该能够看到左侧显示总数量的页面，并允许我在右侧使用 PayPal 登录。

但我只是得到以下页面，顶部也显示“测试站点”，尽管我不再指的是沙盒：

![在此处输入图像描述](../Images/aa00be19af21a84d7f31fe2a6a407738.png)

错误是：`Paypal cannot process this transaction because of a problem with the seller's website.`

我做了以下事情：

1.  确保我已将 API 端点更改为实时生产（基本上，从 URL 中消除“沙盒”。
2.  确保我使用的是卖家账户中的卖家 API 凭据（不是沙盒测试 API）。
3.  我正在使用 IPN 侦听器并已设置`$listener->user_sandbox`为`false`（尽管我认为在此阶段甚至还没有加载侦听器）。

顺便说一句，如果重要的话，我正在使用 PayPal 的 ButtonManagerAPI 来动态创建托管按钮，并且我正在使用带有 PHP 的 NVP API 调用。沙盒中的一切都按预期工作。这是我的相关 API 代码：

```
"METHOD=$methodName_&VERSION=$version&PWD=$API_Password&USER=$API_UserName&SIGNATURE=$API_Signature&BUTTONCODE=HOSTED&BUTTONTYPE=BUYNOW&L_BUTTONVAR1=amount=".$usd_total 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T01:00:48.523

在删除按钮 html 代码中的 ng-model 引用 (angularJS) 之前，我收到了相同的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:39:52.053

我针对我的帐户测试了您的 API 请求，它工作正常。它正确生成了一个按钮，然后我可以通过买家帐户进行购买，因此看起来问题出在您用于生成按钮的帐户上。您能否提供测试沙箱电子邮件或您从中生成测试沙箱凭据的帐户的商家 ID，以便我查看该帐户并查看问题可能是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-11T20:29:57.863

实际上，我只是因为表单中没有正确的产品 ID 而遇到了这个问题。一旦我更新它对我有用。

希望这可以帮助！

# x++ - Microsoft Dynamics AX 2012 AIF QueryCriteria 中的布尔 AND 逻辑

> ID：15657673
> 
> 赞同：2
> 
> 时间：2013-03-27T11:24:41.290
> 
> 标签：x++, dynamics-ax-2012, axapta

根据[文档](http://msdn.microsoft.com/en-us/library/aa892862.aspx)：

> 系统使用布尔或逻辑连接所有标签。

这是否意味着完全不可能构造一个在多个 CriteriaElement 之间执行布尔 AND 操作的 QueryCriteria？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:13:39.580

您应该能够通过对查询使用“肮脏的技巧”来获得所需的内容。有一种方法可以通过使用 DataArea 字段或 RecId 字段并放入您的表达式来将自定义表达式放入查询范围中。

例子：

```
query = new Query();
dsInventTable = query.addDataSource(tableNum(InventTable));

// Add our range
queryBuildRange = dsInventTable.addRange(fieldNum(InventTable, DataAreaId));

queryBuildRange.value(strFmt('((%1 == %2) || ((%1 == %3) && (%4 == "%5")))',
    fieldStr(InventTable, ItemType),
    any2int(ItemType::Service),
    any2int(ItemType::Item),
    fieldStr(InventTable, ProjCategoryId),
    queryValue("Spares"))); 
```

有关详细信息，请参阅以下链接：[查询范围中的表达式](http://www.axaptapedia.com/Expressions_in_query_ranges)

# .net - 在 Visual Studio 中构建期间如何将多个 DLL 放置在单独的文件夹中

> ID：15657674
> 
> 赞同：1
> 
> 时间：2013-03-27T11:24:48.607
> 
> 标签：.net, visual-studio-2010, build, directory

我有一个 Window Forms C# 项目，其中包含一些外部引用以及对同一解决方案中其他类库项目的引用。

当我构建 Window Form 项目时，我**只**希望将引用的库存储在不同的位置（例如：bin\Release\Libraries），而不是与 .exe 在同一个文件夹中。

有可能吗？

这个问题早在 2 年前就已经在这里了，但没有足够的答案：[如何在 Visual Studio 中编译时将 DLL 保存在不同的文件夹中？](https://stackoverflow.com/questions/5110553/how-to-save-dlls-in-a-different-folder-when-compiling-in-visual-studio)

在构建过程中，我只需要将**几个**第三方程序集放入单独的文件夹中。如果我要更改构建路径，它会将所有程序集放在那里，这**不是我想要**的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:29:45.720

在 Visual Studio 中的项目中添加构建后事件，将所需的 DLL 复制到相关位置。

然后，您将需要更新您的引用并可能设置一个 PATH 变量以确保项目知道它们的位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:26:31.040

您可以将构建后事件添加到项目中，将第三方 DLL 从输出文件夹 bin\Release 移动到子文件夹。

右键单击项目，选择属性，然后生成事件

# vim - knitr & vim: 创建 *.Rnw 文件

> ID：15657675
> 
> 赞同：1
> 
> 时间：2013-03-27T11:24:54.963
> 
> 标签：vim, latex, knitr

我正在尝试使用 knitr，同时使用 Vim（使用 Vim-LaTeX 插件）创建 *.Rnw 文件。

如果我在 Vim 中打开一个 *.Rnw 文件，然后输入 a `<`（例如 for `<<foo, echo=TRUE>>=`）以便我可以输入代码块，我发现自己无法输入它，并且 Vim 返回错误 'E117: Unknown function: RwriteChunk'

`>`我在输入或编写内联代码 ( ) 时没有问题`\Sexpr{}`。有人找到解决此问题的任何方法吗？

非常感谢，汤姆

* * *

# 问题已解决

事实证明，必要的运行时文件不在正确的位置。我已将它从“~/.vim/ftplugin”复制到“/usr/share/vim/vim73/ftplugin”，现在一切正常。

# ios - IOS指南针读数在不同的控制器中不同

> ID：15657681
> 
> 赞同：2
> 
> 时间：2013-03-27T11:25:21.480
> 
> 标签：ios, compass-geolocation

我的指南针读数有问题。我有两个不同的控制器，并且在这两个控制器中，罗盘读数在相同位置和相同方向上结果不同。如何解决？

```
self.locationManager=[[CLLocationManager alloc] init];
self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
self.locationManager.headingFilter = 0.1;
self.locationManager.delegate=self; 
```

这就是我在两个控制器中初始化位置管理器的方式。

# jquery - jQuery 事件：检测对 div 的 html/文本的更改

> ID：15657686
> 
> 赞同：320
> 
> 时间：2013-03-27T11:25:43.507
> 
> 标签：jquery, jquery-ui

我有一个 div，它的内容一直在变化，无论是`ajax requests`，`jquery functions`等等`blur`。

有没有办法可以在任何时间点检测到我的 div 上的任何更改？

我不想使用任何间隔或检查的默认值。

这样的事情会做

```
$('mydiv').contentchanged() {
 alert('changed')
} 
```

* * *

## 回答 #1

> 赞同：483
> 
> 时间：2013-04-30T04:41:36.213

如果您不想使用计时器并检查innerHTML，您可以尝试此事件

```
$('mydiv').on('DOMSubtreeModified', function(){
  console.log('changed');
}); 
```

更多细节和浏览器支持数据在[这里](http://help.dottoro.com/ljrmcldi.php)。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2017-03-15T09:36:23.237

使用 Javascript [MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)：

```
// Select the target node.
var target = document.querySelector('mydiv')

// Create an observer instance.
var observer = new MutationObserver(function(mutations) {
    console.log(target.innerText);   
});

// Pass in the target node, as well as the observer options.
observer.observe(target, {
    attributes:    true,
    childList:     true,
    characterData: true
}); 
```

有关详细信息，请参阅 MDN 文档；这应该[适用于几乎所有当前的浏览器](https://caniuse.com/mutationobserver)，包括 IE11。

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2017-03-15T08:57:00.693

[由于`$("#selector").bind()`已弃用](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events)，您应该使用：

```
$("body").on('DOMSubtreeModified', "#selector", function() {
    // code here
}); 
```

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2013-05-10T11:40:29.540

你可以试试这个

```
$('.myDiv').bind('DOMNodeInserted DOMNodeRemoved', function() {

}); 
```

但这可能不适用于 Internet Explorer，尚未测试

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2013-03-27T11:51:23.813

您正在寻找[MutationObserver](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)或[Mutation Events](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)。既不受任何地方的支持，也不受开发人员世界的喜爱。

如果您知道（并且可以确保）div 的大小会发生变化，则可以使用[跨浏览器调整大小事件](http://www.backalleycoder.com/2013/03/18/cross-browser-event-based-element-resize-detection/)。

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2017-03-22T10:26:55.827

以下代码适用于我：

```
$("body").on('DOMSubtreeModified', "mydiv", function() {
    alert('changed');
}); 
```

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2013-05-24T09:26:49.120

这个问题没有内置的解决方案，这是您的设计和编码模式的问题。

您可以使用发布者/订阅者模式。为此，您可以使用 jQuery 自定义事件或您自己的事件机制。

第一的，

```
function changeHtml(selector, html) {
    var elem = $(selector);
    jQuery.event.trigger('htmlchanging', { elements: elem, content: { current: elem.html(), pending: html} });
    elem.html(html);
    jQuery.event.trigger('htmlchanged', { elements: elem, content: html });
} 
```

现在您可以订阅 divhtmlchanged/divhtmlchanged 事件，如下所示，

```
$(document).bind('htmlchanging', function (e, data) {
    //your before changing html, logic goes here
});

$(document).bind('htmlchanged', function (e, data) {
    //your after changed html, logic goes here
}); 
```

现在，您必须通过此`changeHtml()`功能更改您的 div 内容更改。因此，您可以监视或可以相应地进行必要的更改，因为绑定包含信息的回调数据参数。

您必须像这样更改 div 的 html；

```
changeHtml('#mydiv', '<p>test content</p>'); 
```

而且，您可以将它用于除输入元素之外的任何 html 元素。无论如何，您可以修改它以与任何元素一起使用。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2018-05-23T17:20:00.090

使用[Mozilla](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)提供的这个片段中看到的[MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)，并改编自[这篇博客文章](http://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)

[或者，您可以使用此链接中看到](https://gabrieleromanato.name/jquery-detecting-new-elements-with-the-mutationobserver-object)的 JQuery 示例

Chrome 18+、Firefox 14+、IE 11+、Safari 6+

```
// Select the node that will be observed for mutations
var targetNode = document.getElementById('some-id');

// Options for the observer (which mutations to observe)
var config = { attributes: true, childList: true };

// Callback function to execute when mutations are observed
var callback = function(mutationsList) {
    for(var mutation of mutationsList) {
        if (mutation.type == 'childList') {
            console.log('A child node has been added or removed.');
        }
        else if (mutation.type == 'attributes') {
            console.log('The ' + mutation.attributeName + ' attribute was modified.');
        }
    }
};

// Create an observer instance linked to the callback function
var observer = new MutationObserver(callback);

// Start observing the target node for configured mutations
observer.observe(targetNode, config);

// Later, you can stop observing
observer.disconnect(); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-08-28T14:24:29.113

尝试了上面给出的一些答案，但那些火灾事件两次。如果您可能需要相同的解决方案，这是可行的解决方案。

```
$('mydiv').one('DOMSubtreeModified', function(){
    console.log('changed');
}); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-03-27T18:46:08.167

您可以将 div 的旧 innerHTML 存储在变量中。设置间隔以检查旧内容是否与当前内容匹配。当这不是真的做某事。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-11-21T14:58:09.833

试试 MutationObserver：

*   [https://developer.microsoft.com/en-us/microsoft-edge/platform/documentation/dev-guide/dom/mutation-observers/](https://developer.microsoft.com/en-us/microsoft-edge/platform/documentation/dev-guide/dom/mutation-observers/)
*   [https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)

浏览器支持：[http ://caniuse.com/#feat=mutationobserver](http://caniuse.com/#feat=mutationobserver)

```
<html>
  <!-- example from Microsoft https://developer.microsoft.com/en-us/microsoft-edge/platform/documentation/dev-guide/dom/mutation-observers/ -->

  <head>
    </head>
  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script type="text/javascript">
      // Inspect the array of MutationRecord objects to identify the nature of the change
function mutationObjectCallback(mutationRecordsList) {
  console.log("mutationObjectCallback invoked.");

  mutationRecordsList.forEach(function(mutationRecord) {
    console.log("Type of mutation: " + mutationRecord.type);
    if ("attributes" === mutationRecord.type) {
      console.log("Old attribute value: " + mutationRecord.oldValue);
    }
  });
}

// Create an observer object and assign a callback function
var observerObject = new MutationObserver(mutationObjectCallback);

      // the target to watch, this could be #yourUniqueDiv 
      // we use the body to watch for changes
var targetObject = document.body; 

// Register the target node to observe and specify which DOM changes to watch

observerObject.observe(targetObject, { 
  attributes: true,
  attributeFilter: ["id", "dir"],
  attributeOldValue: true,
  childList: true
});

// This will invoke the mutationObjectCallback function (but only after all script in this
// scope has run). For now, it simply queues a MutationRecord object with the change information
targetObject.appendChild(document.createElement('div'));

// Now a second MutationRecord object will be added, this time for an attribute change
targetObject.dir = 'rtl';

      </script>
    </body>
  </html>
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-11-09T06:25:48.957

**DOMSubtreeModified**不是一个好的解决方案。如果您决定更改事件处理程序中的 DOM，它可能会导致***无限循环，因此它已在许多浏览器中被禁用。*****MutationObserver**是更好的答案。

[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)

```
const onChangeElement = (qSelector, cb)=>{
 const targetNode = document.querySelector(qSelector);
 if(targetNode){
    const config = { attributes: true, childList: false, subtree: false };
    const callback = function(mutationsList, observer) {
        cb($(qSelector))
    };
    const observer = new MutationObserver(callback);
    observer.observe(targetNode, config);
 }else {
    console.error("onChangeElement: Invalid Selector")
 }
} 
```

你可以像这样使用它，

```
onChangeElement('mydiv', function(jqueryElement){
   alert('changed')
}) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-03-27T11:58:40.090

将一些内容添加到 div，无论是通过 jQuery 还是直接通过 de DOM-API，默认为该`.appendChild()`函数。你可以做的是覆盖`.appendChild()`当前对象的功能并在其中实现一个观察者。现在已经覆盖了我们的`.appendChild()`函数，我们需要从另一个对象借用该函数才能附加内容。因此，我们调用`.appendChild()`另一个 div 来最终附加内容。当然，这也适用于`.removeChild()`.

```
var obj = document.getElementById("mydiv");
    obj.appendChild = function(node) {
        alert("changed!");

        // call the .appendChild() function of some other div
        // and pass the current (this) to let the function affect it.
        document.createElement("div").appendChild.call(this, node);
        }
    }; 
```

在这里你可以找到一个幼稚的例子。我猜你可以自己扩展它。 [http://jsfiddle.net/RKLmA/31/](http://jsfiddle.net/RKLmA/31/)

顺便说一句：这表明 JavaScript 符合 OpenClosed 原则。:)

# datetime - 树枝日期差异

> ID：15657687
> 
> 赞同：33
> 
> 时间：2013-03-27T11:25:52.397
> 
> 标签：datetime, twig, datediff

我有一个具有开始日期和结束日期的实体。

是否可以通过使用树枝来获得它们之间的时间差异？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2014-11-29T17:44:04.577

自 PHP 5.3 以来，还有另一种选择，无需编写扩展。

这个例子展示了如何计算复数日/天

```
{# endDate and startDate are strings or DateTime objects #}
{% set difference = date(endDate).diff(date(startDate)) %}
{% set leftDays = difference.days %}
{% if leftDays == 1 %}
  1 day
{% else %}
  {{ leftDays }} days
{% endif %} 
```

解释：

PHP 5.3`DateTime`对象具有[`diff()`](http://php.net/manual/en/datetime.diff.php)返回对象的方法，其结果与 Twig[`DateInterval`](http://php.net/manual/en/class.dateinterval.php)之间的差异`endDate``beginDate`

Twig[`date`](http://twig.sensiolabs.org/doc/functions/date.html)函数总是返回一个`DateTime`对象，所以我们可以调用`diff`方法

最后，我们可以访问`DateInterval`对象的属性或使用 Twig`date`过滤器对其进行格式化。

注意：如果变量已经是一个对象，则不需要 wrap`endDate`或`startDate`with函数。`date``DateTime`

注 2：`DateTime`此处用作 的同义词`DateTimeInterface`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-27T18:20:08.867

没有内置函数可以做到这一点，但你可以自己轻松地做到这一点，[扩展树枝](http://twig.sensiolabs.org/doc/advanced.html)很容易！

快速简单的方法是使用 twig 的简单函数类：

```
$function = new Twig_SimpleFunction('date_difference', function ($start, $end) {
    // ... calculate difference and return it
});

// assuming $twig is an instance of Twig_Environment
$twig->addFunction($function); 
```

可重用的方法是创建一个树枝扩展（记录在同一链接上）。那还是很容易的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-09T15:09:25.300

另请注意，Sensio Labs 提供了一个现有的[Date 扩展](https://twig-extensions.readthedocs.io/en/latest/date.html)，它提供了 time_diff 过滤器。

然后你可以像这样使用它：`{{ entity.ending_date|time_diff(entity.starting_date) }}`

请注意，此插件已被放弃，并且 Twig 3 不支持：[https ://packagist.org/packages/twig/extensions](https://packagist.org/packages/twig/extensions)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-06T14:53:50.140

对于 Symfony 5，我建议使用[KnpTimeBundle](https://github.com/KnpLabs/KnpTimeBundle)

它提供了树枝功能`|ago`

安装 ：`composer require knplabs/knp-time-bundle`

# jsf-2 - @postconstruct 方法在通过导航菜单进行 ajax-refresh 主要内容部分期间被调用

> ID：15657688
> 
> 赞同：1
> 
> 时间：2013-03-27T11:25:54.753
> 
> 标签：jsf-2

我正在尝试 ajax 刷新导航菜单中的主要内容。

链接中的要求完全相同

[如何通过导航菜单 ajax-refresh 动态包含内容？(JSF SPA)](https://stackoverflow.com/questions/7108668/how-to-ajax-refresh-the-main-content-part-by-navigation-menu)

按照 BalusC 回答的模式，

```
<h:panelGroup id="content" layout="block">
<h:form id="contentform">
    <h:panelGroup rendered="#{bean.page == 'include1'}">
        <ui:include src="include1.xhtml" />
    </h:panelGroup>
    <h:panelGroup rendered="#{bean.page == 'include2'}">
        <ui:include src="include2.xhtml" />
    </h:panelGroup>
    <h:panelGroup rendered="#{bean.page == 'include3'}">
        <ui:include src="include3.xhtml" />
    </h:panelGroup>
</h:form> 
```

每个 xhtml 都有自己的带有 @PostConstruct 方法的托管 bean，问题是所有 @PostConstruct 方法都被调用，而与渲染条件无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:52:44.720

`<ui:include/>`是一个标签处理程序，`<h:panelGroup/>`而是一个渲染时标签。不同之处在于它们都在构建生命周期的不同时间处于活动状态。在这种特殊情况下，`<ui:include/>`在`<h:panelGroup/>`. 因此，虽然您的渲染条件可能会在渲染时隐藏动态包含，但无论如何，包含仍会通过研磨机，从而导致处理后的托管 bean。

您应该将`rendered`属性放在`<ui:include/>`相反的位置。确保渲染条件不依赖于其他渲染时间结构

# javascript - 如何将未嵌套的 JSON 转换为 Javascript（或 Coffeescript）中的嵌套 HTML 列表？

> ID：15657689
> 
> 赞同：2
> 
> 时间：2013-03-27T11:25:56.130
> 
> 标签：javascript, jquery, arrays, json, coffeescript

我有一些 JSON 数据（简单的对象数组）。

```
var input= [
    {
        "cat": "some",
        "id": "0"
    },
    {
        "cat": "some",
        "id": "1"
    },
    {
        "cat": "some/category",
        "id": "2"
    },
    {
        "cat": "some/category/sub",
        "id": "3"
    },
    {
        "cat": "some/other",
        "id": "4"
    },
    {
        "cat": "some/thing/different",
        "id": "5"
    },
    {
        "cat": "some/thing/different",
        "id": "6"
    },
    {
        "cat": "yet/another",
        "id": "7"
    }
] 
```

我想根据类别从中生成嵌套的 html 列表：

*   一些
    *   0
    *   1
    *   类别
        *   2
        *   子
            *   3
    *   其他
        *   4
    *   事物
        *   不同的
            *   5
            *   6
*   然而
    *   其他
        *   7

我的第一步是使用该函数创建空的嵌套对象：

```
createNestedObject = function(base, names) {
  var  = 0;
  var results = [];
  while (i < names.length) {
    base = base[names[i]] = base[names[i]] || {};
    results.push(i++);
  }
  return results;
} 
```

接下来，我通过拆分“cat”字符串并在循环中推送“ids”来填充数据（例如 some.category.sub.ids.push(7)），最终结果是：

```
var output = 
{
    "some": {
        "ids": [
            "0",
            "1"
        ],
        "category": {
            "ids": [
                "2"
            ],
            "sub": {
                "ids": [
                    "3"
                ]
            }
        },
        "other": {
            "ids": [
                "4"
            ]
        },
        "thing": {
            "different": {
                "ids": [
                    "5",
                    "6"
                ]
            }
        },
        "yet": {
            "another": {
                "ids": [
                    "7"
                ]
            }
        }
    }
} 
```

但是，结构有些问题，因为我事先不知道键名和嵌套深度。如何从此处提供的“输出”或“输入”数据中生成嵌套的 html 列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:27:19.413

这个怎么样？

## [例子](http://jsfiddle.net/fnpeQ/2/)

**JS**

```
function ToHTML(input){
    var html = '<ul>'; 

    for(var key in input){
        if(input[key] instanceof Array){
            for(var i = 0; i < input[key].length; i++){
                html += '<li>' + input[key][i] + '</li>';
            }
        }else{
            html += '<li>' + key + ToHTML(input[key]) + '</li>';
        }           
    }
    html += '</ul>';
    return html; 
}

function ToNestedObject(input){
    var i, y, len = input.length, parts, partsLen, obj = {}, prev;
    for(i = 0; i < len; i++){
        parts = input[i].cat.split('/'); 
        partsLen = parts.length;
        prev = obj; 
        for(y = 0; y < partsLen; y++){
            prev[parts[y]] = prev[parts[y]] || {};    
            prev = prev[parts[y]];
        }
        if(!prev.ids){
            prev.ids = []; 
        }
        prev.ids.push(input[i].id); 
    }
    return obj; 
}

var input= [
    {
        "cat": "some",
        "id": "0"
    },
    {
        "cat": "some",
        "id": "1"
    },
    {
        "cat": "some/category",
        "id": "2"
    },
    {
        "cat": "some/category/sub",
        "id": "3"
    },
    {
        "cat": "some/other",
        "id": "4"
    },
    {
        "cat": "some/thing/different",
        "id": "5"
    },
    {
        "cat": "some/thing/different",
        "id": "6"
    },
    {
        "cat": "yet/another",
        "id": "7"
    }
];

document.getElementById('test').innerHTML = ToHTML(ToNestedObject(input)); 
```

**HTML**

```
<div id='test'></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:45:23.423

由于您在标签下添加了 jquery，因此我已经在 jQuery 中编写了您的问题的解决方案。这是代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    </head>
<body>
    <div id="someDiv">
    </div>
    <script>

    function prepareNestedStructure(input) {
        var output = {},
            catLevels,
            currentCat;

        $.each(input, function(index, catObject) {
            catLevels = catObject.cat.split('/');
            currentCat = output;

            $.each(catLevels, function(index, name) {
                if(!currentCat[name])
                    currentCat[name] = {};
                currentCat = currentCat[name];
            });

            currentCat[catObject.id] = catObject.id;
        });

        return output;
    }

    function fillList(parentListEl, node) {
        $.each(node, function(key, value) {
            parentListEl.append('<li>' + key + '</li>');

            if(jQuery.type(value) === 'object') {
                var childEl = $('<ul></ul>');
                parentListEl.append(childEl);
                fillList(childEl, value);
            }
        });
    }

    var input= [
        {
            "cat": "some",
            "id": "0"
        },
        {
            "cat": "some",
            "id": "1"
        },
        {
            "cat": "some/category",
            "id": "2"
        },
        {
            "cat": "some/category/sub",
            "id": "3"
        },
        {
            "cat": "some/other",
            "id": "4"
        },
        {
            "cat": "some/thing/different",
            "id": "5"
        },
        {
            "cat": "some/thing/different",
            "id": "6"
        },
        {
            "cat": "yet/another",
            "id": "7"
        }
    ];

    var output = prepareNestedStructure(input);

    var ulDomElement = $('<ul></ul>');
    fillList(ulDomElement, output);
    $('#someDiv').append(ulDomElement);

    </script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:32:20.497

数组转换为对象树

```
function buildTreeObject ( input ) {

        var obj = {}, n ;

        input.forEach( function( v ){
                var keys = v.cat.split('/'),
                    n = obj ;        

                keys.forEach( function( k ){        
                        if ( !n[k]) {
                            n[k] = {}; 
                        }                 
                        n = n[k];                 
                }); 

                n[ v.id ] = v.id ;                
        });

        return obj;
} 
```

我们需要一个函数来构建 html

```
function buildHtml( obj , ul ) {

    for (i in obj) {

        var li = document.createElement('li');
        li.innerHTML = i;
        ul.appendChild( li );

        if ( typeof(obj[i])== "object" ) {

            childUl = document.createElement('ul');
            li.appendChild( childUl ); 

            buildHtml(obj[i], childUl );            
        }  

    }
} 
```

并使用 html `input`（即你的数组）

```
var ul   = document.createElement('ul'),
    tree =  buildTreeObject( input ) ;

buildHtml( tree ,ul );

var div = document.createElement('div');    
div.appendChild( ul );

console.log( div.innerHTML ); 
```

打印所需的 ul li 列表

[您可以在http://jsfiddle.net/r3RWL/](http://jsfiddle.net/r3RWL/)中看到结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:03:57.210

那这个呢？

```
transform_deeply_nested_object = (dno) ->
    result = ""
    for key, value of dno
        if value instanceof Array
            result += "<ul>"
            for elem in value
                result += "<li>" + elem + "</li>\n"
            result += "</ul>"
        else
            result += "<ul><li>" + key + "</li>"
            result += transform_deeply_nested_object value
            result += "</ul>" 
```

注意：未经测试！

注意：这要求所有叶子始终是数组的元素。

# python - python中匿名函数的配方？

> ID：15657691
> 
> 赞同：4
> 
> 时间：2013-03-27T11:26:16.787
> 
> 标签：python, anonymous-function

我正在寻找允许在 python 中内联定义函数或多行 lambda 的最佳配方。

例如，我想做以下事情：

```
def callfunc(func):
   func("Hello")

>>> callfunc(define('x', '''
...     print x, "World!"
... '''))
Hello World! 
```

我在[这个答案](https://stackoverflow.com/a/6630330/143091)`define`中找到了一个函数示例：

```
def define(arglist, body):
    g = {}
    exec("def anonfunc({0}):\n{1}".format(
        arglist,
        "\n".join("    {0}".format(line) for line in body.splitlines())), g)
    return g["anonfunc"] 
```

这是一种可能的解决方案，但并不理想。理想的功能是：

*   对缩进更聪明，
*   更好地隐藏内脏（例如，不在`anonfunc`函数的范围内）
*   提供对周围范围/捕获中的变量的访问
*   更好的错误处理

还有一些我没有想到的事情。一旦完成了上述大部分工作，我就有一个非常好的实现，但不幸的是我输了。我想知道是否有人做过类似的东西。

## 免责声明：

我很清楚这在 Python 用户中是有争议的，被认为是 hack 或 unpythonic。我也知道 python-dev 邮件列表上关于多行 lambda 的讨论，并且故意省略了类似的功能。然而，从同样的讨论中，我了解到许多其他人也对这种功能感兴趣。

**我不是在问这是否是一个好主意**，而是：**鉴于一个人已经决定实施这个**，（出于乐趣和好奇，疯狂，真的认为这是一个好主意，或者被枪指着）**如何使匿名`define`工作尽可能接近`def`使用 python（2.7 或 3.x）当前的设施？**

## 例子：

关于为什么，这对于 GUI 中的回调非常方便：

```
# gtk example:
self.ntimes = 0
button.connect('clicked', define('*a', '''
    self.ntimes += 1
    label.set_text("Button has been clicked %d times" % self.ntimes)
''') 
```

与定义函数相比的好处`def`是您的代码具有更合乎逻辑的顺序。这是取自 Twisted 应用程序的简化代码：

```
# twisted example:
def sayHello(self):
    d = self.callRemote(HelloCommand)
    def handle_response(response):
        # do something, this happens after (x)!
        pass
    d.addCallback(handle_response) # (x) 
```

注意它看起来是多么的不正常。我通常会分解这样的东西，以保持代码顺序 == 执行顺序：

```
def sayHello_d(self):
    d = self.callRemote(HelloCommand)
    d.addCallback(self._sayHello_2)
    return d

def _sayHello_2(self, response):
    # handle response
    pass 
```

这更好。排序但更详细。现在，使用匿名函数技巧：

```
d = self.callRemote(HelloCommand)
d.addCallback(define('response', '''
    print "callback"
    print "got response from", response["name"]
''')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:57:11.267

如果您来自 javascript 或 ruby​​ 背景，python 处理匿名函数的能力可能确实看起来有限，但这是有原因的。Python 设计者认为代码的清晰性比简洁性更重要。如果你不喜欢那样，你可能根本不喜欢 python。这并没有错，还有很多其他选择——为什么不尝试一种更适合你的语言呢？

将大块代码放入字符串并即时解释它们绝对是“扩展”语言的错误方法，因为您正在使用的任何工具 - 从语法荧光笔到 python 解释器本身 - 都无法处理以合理的方式“字符串化”代码。

要回答所问的问题：您所做的实际上是在尝试构建一些比 python 更好的编程语言并将其即时编译为 python。这个想法在脚本语言的世界中并不新鲜，并且可以是有效的，也可以不是（CoffeeScript 是成功实现的一个例子），但是您的方法是错误的。`format()`不是您在使用代码时正在寻找的工具。如果您正在编写编译器，请正确执行：使用解析器（例如 pyparsing）读取 AST 中的代码，遍历 AST 以生成 python 代码（甚至是字节码），随时捕获语法错误并采取措施提供更好的运行时反馈（例如错误上下文、行号等）。最后，确保你的编译器可以跨不同的 python 版本和实现工作。

或者只是使用红宝石。

# javascript - 使用 GPS 监测移动设备的位移

> ID：15657694
> 
> 赞同：0
> 
> 时间：2013-03-27T11:26:26.780
> 
> 标签：javascript, android, ios, html, cordova

我想为移动设备开发一个应用程序，它可以实时显示用户（在您的移动设备上安装此软件）的位置。这个想法是一个（或多个）用户可以通过 GPS 跟踪地图另一个用户的位移。我想将 PhoneGap 与 HTML5、CSS 和 Javascript 一起使用。

我的问题是：用这些技术可以做到这一点吗？如果是，我在哪里可以获得有关如何以这种方式处理 GPS 的信息？如果你不能，哪种语言会给我这种可能性，我在哪里可以获得信息？一开始，我打算为Android和IOS开发这个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:44:24.713

是的，PhoneGap 技术非常有可能。您必须编写一个 Web 服务来将 GPS 坐标作为用户更新（或自动更新）保存在服务器中。您可以让其他用户连接到 Web 服务并获取他们想要的信息（即他们想要查看用户当前位置的数据）。您使用 PhoneGap 开发意味着，它也适用于 iPhone。

您可以使用 PHP、Java 或 C# 轻松开发 Web 服务，尽管 C# Web 服务易于编写和维护，但与 Windows 托管（您需要托管 C# Web 服务）相比，PHP Web 服务器便宜。

您问的问题非常广泛，因此可以写一篇 1000 字及以上的文章。如果你问具体的问题，我可以回答。

# c++ - 在 C++ 中将数组的内容复制到调整大小的数组

> ID：15657695
> 
> 赞同：0
> 
> 时间：2013-03-27T11:26:27.610
> 
> 标签：c++, arrays, realloc

我在这里搜索了很多主题，但他们似乎没有准确回答我。

我正在尝试在 C++ 中做一些动态重新分配 od 数组。我不能使用 STL 库中的任何东西，因为我需要在明确禁止 STL（向量，...）的作业中使用它。

到目前为止，我试图用这样的代码来详细说明：

```
int * items = new int[3]; //my original array I'm about to resize
int * temp = new int[10];
for (int i = 0; i < 3; i++) temp[i] = items[i];

delete [] items;   //is this necessary to delete?
items = new int [10];
for (int i = 0; i < 10; i++) items[i] = temp[i];
delete [] temp; 
```

这似乎可行，但困扰我的是迭代次数过多。这不能更聪明地完成吗？显然，我正在使用比这更大的数组。不幸的是，我**必须**使用数组。

**编辑：**当我尝试做`items = temp;`而不是

`for (int i = 0; i < 10; i++) items[i] = temp[i];`并尝试`std::cout`我所有的元素，我最终失去了前两个元素，但***valgrind***正确打印了它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T11:28:43.047

是的，第一个`delete[]`是必要的。没有它，您将泄漏内存。

至于后面的代码 first `delete[]`，都可以替换为：

```
items = temp; 
```

这将`items`指向您刚刚填充的十元素数组：

```
int * items = new int[3]; //my original array I'm about to resize
int * temp = new int[10];
for (int i = 0; i < 3; i++) temp[i] = items[i];
delete [] items;   //delete the original array before overwriting the pointer
items = temp; 
```

`delete[] items;`最后，当你完成数组时不要忘记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:30:28.467

的容器`STL`是为了减轻这样的工作而设计的。这很乏味，但是当您需要使用`C`-arrays 时，没有太多选择。

的删除

```
delete [] items; 
```

是必要的，就像当您放弃对数组的引用时，您可以通过在

```
items = new int [10]; 
```

会导致内存泄漏，所以这是必要的。

# ruby-on-rails - Capybara 在 /test 而不是 /spec 中生成测试

> ID：15657698
> 
> 赞同：0
> 
> 时间：2013-03-27T11:26:40.640
> 
> 标签：ruby-on-rails, testing, rspec, capybara, specifications

我尝试将 Capybara 与 rspec 一起使用。我已经安装了 1.1.2 版。

`rails generate integration_test application`

不幸的是，这是调用`test_unit`并生成文件`test`而不是`spec`. 我怎么能改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:22:44.540

如果您的 Gemfile 中的开发组中有 rspec-rails gem，则生成器应该生成规范而不是 test_unit 测试，例如：

```
group :test, :development do
  gem "rspec-rails"
end 
```

# ruby-on-rails - Rails - 设置用户定义的本地...有可能吗？

> ID：15657709
> 
> 赞同：2
> 
> 时间：2013-03-27T11:27:09.437
> 
> 标签：ruby-on-rails

在我的 rails 应用程序中，我设置了选项卡，这些选项卡将加载部分特定时间段的统计信息，即：

```
<%= render 'shared/user_reports' :locals => { :start_date => Date.today - 30, :end_date => Date.today } %> 
```

以上将加载“月份”选项卡。

我的问题是，有没有办法让用户定义的日期传递给`:start_date`和`:end_date`本地人（而不在数据库中存储信息）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:34:53.883

您可以使用 URL 参数来临时存储数据。

使用以下命令读取参数：

```
params[:param_name] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:43:09.297

如果您想从这样的网址呈现您的标签`/my_path?start_date=2013-02-27&end_date=2013-03-27`：

```
<%= render 'shared/user_reports' :locals => { 
     :start_date => (Date.parse(params[:start_date]) rescue Date.today - 1.month),
     :end_date => (Date.parse(params[:end_date]) rescue Date.today) 
} %> 
```

但最好在控制器中处理参数：

```
@start_date = Date.parse(params[:start_date]) rescue Date.today - 1.month
@end_date = Date.parse(params[:end_date]) rescue Date.today 
```

在你看来：

```
<%= render 'shared/user_reports' :locals => { :start_date => @start_date, :end_date => @end_date } %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T11:50:43.333

您可以使用 Date.parse 从字符串中解析日期。

```
 1.9.3p327 :004 > start_date = Date.parse("march 27 2013")
  => Wed, 27 Mar 2013 
```

所以，

```
<%= render 'shared/user_reports' :locals => { :start_date => Date.parse("Feb 27 2013"), :end_date => Date.parse("March 27 2013") } %> 
```

会做。

# javascript - 调用jQuery html方法时出错

> ID：15657717
> 
> 赞同：5
> 
> 时间：2013-03-27T11:27:49.640
> 
> 标签：javascript, jquery, html, jquery-selectors

我第一次涉足 javascript + jQuery，设计了一个简单的页面但遇到了错误，我确信这很愚蠢，但我已经多次查看代码并且无法发现它。

我收到的错误如下：

![错误图片](../Images/a8be471310295a7a48aec8babf569446.png)

整个代码如下（我已将动态更改`'#' + elementname + 'perc'`为字符串并且我得到了相同的错误），任何人都可以提供任何见解吗？

```
<DOCTYPE html>
<html>
    <head>
        <script src="js/jquery.js"></script>
        <!--<script src="js/dealercalc.js"></script>-->
        <script type="text/javascript">

$(document).ready(function(){
  $(".val-adjust").click(function(){
    var name = $(this).attr('name');
    var bit = $(this).attr('value');

    setvalue(name,bit);

    //discountbits['basic'] = false;
    //$("#basedisper").text(discountlist['basic']);
  });
  $("#basdisyes").click(function(){
    discountbits['basic'] = true;
    //$("#test1").html("<b>Hello world!</b>");
  });
  $("#btn3").click(function(){
    $("#test3").val(gettotal());
  });
}
);

function getpercbypurc(value){
    return 0;
};

function setvalue(elementname,yesno){
    discountbits[elementname] = yesno;
    if (yesno) {
        $("#basicperc").hmtl(discountlist[elementname] + "%");
    } else {
        $('#' + elementname + 'perc').hmtl("0%");
    }
};

function gettotal() {
    var total = 0;

    for (var i=0; i<keys.length; i++){
        if (discountbits[keys[i]] = true) {
            total += discountlist[keys[i]];
        }
    }

    return total;
};

function displaytotal(){
    $('#totalper').html(gettotal());
};

var keys = ['basic', 'marketing'];

var discountlist = {
    basic:20,
    marketing:2
};

var discountbits = {
    basic:true,
    marketing:false
};

        </script>
    </head>

    <body>

        Base Discount<br>
        <button class="val-adjust" name="basic" value="false">No</button>
        <button class="val-adjust" name="basic" value="true">Yes</button>
        <span id="basicperc">0</span>
        <br>
        <br>

        Marketing Plan<br>
        <button class="val-adjust" name="marketing" value="false">No</button>
        <button class="val-adjust" name="marketing" value="true">Yes</button>
        <span id="marketingperc">0</span>
        <br>
        <br>

        Total<br>
        <span id="totalper">0</span>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:29:21.490

你的拼写错误`html`，`hmlt`应该是`html`

*改变*

```
$("#basicperc").hmtl(discountlist[elementname] + "%"); 
```

*至*

```
$("#basicperc").html(discountlist[elementname] + "%"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T11:29:25.713

你有错字

```
$("#basicperc").hmtl(discountlist[elementname] + "%");
         //-----^^^^---here 
```

应该

```
$("#basicperc").html(discountlist[elementname] + "%"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T11:29:44.340

你打错了，它是 html 而不是 hmtl :)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-27T11:29:26.940

很明显的错别字。它是 html，而不是 hmtl ！

# xcode - OSX 中的代码设计和内核扩展 (Kext)：不会加载

> ID：15657720
> 
> 赞同：1
> 
> 时间：2013-03-27T11:28:05.293
> 
> 标签：xcode, macos, code-signing, codesign, kernel-extension

我正在开发一种包含内核扩展的产品，并且在我们的一台测试机器中发现了一个我找不到解决方案的奇怪问题。

在我的开发机器（OSX 10.8.3 和最新的 Xcode）中，我像这样对我们的 kext 进行代码设计：

```
$ codesign -s "Developer ID Application: Mycompany" my.kext
my.kext: signed bundle with Mach-O thin (x86_64) [com.mycompany.kext] 
```

一切正常，修改了 my.kext/Contents/MacOS/mykext 二进制文件（添加了签名），并创建了一个文件夹 my.kext/Contents/_CodeSignature，其中包含一个文件 CodeResources。

在我们的一台测试机器（OSX 10.7.5 和 Xcode 3.2.6，Darwin Kernel 11.4.2 x86_64）上加载这个 kext 时，它拒绝这样做：

```
kxld[com.mycompany.kext]: The Mach-O file is malformed: Invalid segment type in MH_KEXT_BUNDLE kext: 29.
Can't load kext com.mycompany.kext - link failed.
Failed to load executable for kext com.mycompany.kext.
Kext com.mycompany.kext failed to load (0xdc008016). 
```

如果我加载未签名的模块，则没有问题。还尝试从 Xcode 而不是从命令行对 kext 进行签名，结果相同。

我将签名证书移到那台麻烦的计算机上，并在那里签署了 kext。签名过程有所不同：

```
$ codesign -v -s "Developer ID Application: Mycompany" my.kext
my.kext: signed bundle with generic [com.mycompany.kext] 
```

签名后，my.kext/Contents/MacOS/mykext 中的 kext 可执行文件未修改，文件夹 Contents/_CodeSignature 包含更多文件：CodeDirectory、CodeRequirements、CodeResources 和 CodeSignature。到目前为止，这个签名的 kext 似乎适用于所有设备。

所以问题是：

这是怎么回事？我在签名过程中做错了什么？如何在可在此“过时”机器上运行的更新设备中创建签名？我知道目标机器拒绝加载 kext，因为它不理解签名的二进制文件。从此设备进行签名会创建某种分离的签名，其中二进制文件未被触及。我无法让我的 codesign 做到这一点， -D 选项似乎没用，并且不会在包中创建 _CodeSignature 文件夹。

**更新**

从 XCode 4.6 开始，问题仍然存在。只有 i386 kext 以向后兼容的方式签名。某些 10.6 和 10.7 内核无法加载 x64 和混合的 arch kext，因为它们不了解嵌入到二进制文件中的签名。

用于此目的的*codesign*命令行工具有一个未记录的*--no-macho*标志，但似乎未实现。

**更新 2**

~~从 Xcode 4.6.2~~ 4.6.3开始，问题仍然存在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:51:14.600

**序言：解释发生了什么**

较旧的内核链接器/加载器无法处理 kext 的 Mach-O 目标代码中的某些类型的加载命令，包括该`LC_CODE_SIGNATURE`部分。这也导致了使用 Xcode 4.5.x 构建的混合 32 位/64 位 kexts 的问题，其中工具链添加了 Lion 和 Snow Leopard 内核链接器未预料到的各种其他部分。（[此错误](http://openradar.appspot.com/12353507)已在 4.6.x 中修复）

Apple 没有发布任何关于我能找到的代码设计 kext 的具体信息。如果您查看他们自己的 kext，有些已签名，有些未签名。（据我所知，开源的似乎是未签名的）如果您查看二进制文件中的 Mach-O 部分的签名kexts （`otool -l`使用签名现在是默认值。即使是与 Mountain Lion 一起发布的 kext 也是如此。`LC_CODE_SIGNATURE``.app`

因此，支持旧版本的解决方案是将签名放在单独的文件中，而不是让 codesign 将签名部分插入二进制文件。

**解决方案**

我[在 codesign 源代码中](http://opensource.apple.com/source/security_systemkeychain/security_systemkeychain-39457/src/codesign.cpp)`--no-macho`找到了未记录的标志，这似乎可以解决问题。没有部分，签名以.`LC_CODE_SIGNATURE``_CodeSignature/CodeSignature`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T18:51:59.073

我相信可以在 What's New in OS X 文档中 OS X v10.9 Mavericks 页面底部的 BSD 和内核功能部分找到该解决方案。不幸的是，我不确定我是否可以在这里披露这些信息，因为它属于预发布类别。但是，对于那些拥有付费 Mac Dev 帐户的人，这里是 URL：

[https://developer.apple.com/library/prerelease/mac/releasenotes/MacOSX/WhatsNewInOSX/Articles/MacOSX10_9.html#//apple_ref/doc/uid/TP40013207-CH100](https://developer.apple.com/library/prerelease/mac/releasenotes/MacOSX/WhatsNewInOSX/Articles/MacOSX10_9.html#//apple_ref/doc/uid/TP40013207-CH100)

# java - 使用 Nimbus LaF 设置 JMenuItems 边框

> ID：15657724
> 
> 赞同：1
> 
> 时间：2013-03-27T11:28:19.383
> 
> 标签：java, swing, border, nimbus, jmenuitem

我正在根据一些参数和当前选择的菜单项在弹出菜单中修改一些 JMenuItems 的外观。

这是一段伪代码（伪代码，因为它没有显示所有复杂的流程，而只显示了*设置菜单项属性*的相关部分）：

```
JMenuItem item= new JMenuItem("text");
Border border= calculateBorderForItem();
item.setBorder(border);
[...]
item.addMouseListener(new MouseAdapter() {
  public void mouseEntered(MouseEvent e) {
    Color bg= calculateBackgroundForItem();
    item.setBackground(bg);
  }
} 
```

这适用于默认的 Metal LaF 以及 JGoodies PlasticXP LaF，但不适用于 Nimbus LaF。Nimbus 只是忽略了所有这些属性。

当我设置时，背景被绘制，`item.setOpaque(true)`但边框仍然没有出现。如何强制 Nimbus 使用我的自定义边框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:36:00.573

*   `Nimbus LaF`默认忽略`setBackground`,`setForeground`等。

*   `Nimbus LaF`默认情况下永远不要忽略`setBackground`, `setForeground`, in `Xxx(Cell)Renderer`（不是与您的问题有关）

* * *

有两种方法（通过覆盖）

*   `JMenuItem``paintComponent()`, `paintBorder()`, _`paintChildren`

*   [Nimbus 默认值中的](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary)所有正确键，

# java - java: 从 popupmenu actionListener 事件中获取行数据

> ID：15657734
> 
> 赞同：0
> 
> 时间：2013-03-27T11:28:58.837
> 
> 标签：java, swing, jtable, mouseevent, popupmenu

我在这里有一个小场景，可能是重复的。我有 JTable，我在其中显示一些数据，我有一个鼠标监听器，它监听表上的右键单击并显示一个带有一个菜单项的弹出菜单。我的目标是，当用户单击菜单项时，我从表中获取值并将它们输入到自定义对话框中，该对话框具有一些填充字段，这样用户就不必手动输入整个对话框，因为我会将表格中选择的值提供给对话框。但我的问题是 menuitem actionevent 没有办法让我可以使用`table.getRowAt()`. 我读过另一条评论（在这里查看[https://stackoverflow.com/a/4122082/1788917](https://stackoverflow.com/a/4122082/1788917)) 我被告知我可以将行号保存在一个变量中，然后菜单项的操作侦听器可以访问该变量。

我希望它看起来像这样

```
theScrollPane.getViewport().add(myJTable, null);
JMenuItem menuItem = new JMenuItem(clickMe);

menuItem.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent e) {
    menuItemActionPerformed(e);
}
});

MouseListener popupListener = new PopupListener(); 
popupMenu.add(menuItem);
myJTable.addMouseListener(popupListener);

protected void menuItemActionPerformed (ActionEvent e) {
    // what to do here to get the table row data
    // and send it to my custom dialog via it's constructor ???
}

// a simple nested class for the popup
class PopupListener extends MouseAdapter {
    public void mousePressed(MouseEvent e) {
        int row = myJTable.rowAtPoint(e.getPoint());
        int selectedRow = myJTable.getSelectedRow();

        // just to make sure the popup appears only where the row is 
                    // selected
        if (row == selectedRow) {
            showPopup(e);
        }
    }

    public void mouseReleased(MouseEvent e) {
        int row = myJTable.rowAtPoint(e.getPoint());
        int selectedRow = myJTable.getSelectedRow();
        if (row == selectedRow) {
            showPopup(e);
        }
    }

    private void showPopup(MouseEvent e) {
        if (e.isPopupTrigger()) {
        popupMenu.show(e.getComponent(), e.getX(), e.getY());
        }
    } 
```

}

所以我的问题是，保存行号是我能做到这一点的唯一方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:16:47.107

我已经尝试过您提到此[案例](https://stackoverflow.com/questions/3558293/java-swing-jtable-right-click-menu-how-do-i-get-it-to-select-aka-highlight-t)的案例，并且我能够获取该行并将其显示在`JDialog`. 我刚刚修改了我的旧代码来做到这一点。我没有彻底测试过。

![在 JTable 中弹出](../Images/b9a00529ed90f199659340128f485204.png)

```
import java.awt.EventQueue;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;

public class AllTableExample {

    private JTabbedPane tabbedPane;
    private JTable allTable;
    private AllTableModel allTableModel;

    public AllTableExample() {

        List<TableData> data = new ArrayList<TableData>();
        data.add(new TableData("John1", "A", "Maths", "Hellen1"));
        data.add(new TableData("John2", "A", "Maths", "Hellen2"));
        data.add(new TableData("John3", "A", "Maths", "Hellen3"));
        data.add(new TableData("John4", "A", "Maths", "Hellen4"));
        data.add(new TableData("John5", "A", "Maths", "Hellen5"));

        allTableModel = new AllTableModel(data);
    }

    public void createUI() {
        JFrame frame = new JFrame();

        tabbedPane = new JTabbedPane();

        tabbedPane.add("All", getAllTablePanel());

        frame.add(tabbedPane);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Table Model Example.");
        frame.pack();
        frame.setVisible(true);
    }

    private JPanel getAllTablePanel() {
        JPanel panel = new JPanel();
        allTable = new JTable(allTableModel);
        JScrollPane scroll = new JScrollPane(allTable);
        panel.add(scroll);

        allTable.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseReleased(MouseEvent e) {
                int r = allTable.rowAtPoint(e.getPoint());
                if (r >= 0 && r < allTable.getRowCount()) {
                    allTable.setRowSelectionInterval(r, r);
                } else {
                    allTable.clearSelection();
                }

                int rowindex = allTable.getSelectedRow();
                if (rowindex < 0)
                    return;
                if (e.getComponent() instanceof JTable) {
                    JDialog dialog = new JDialog();
                    int selectedRow = allTable.getSelectedRow();

                    dialog.setTitle("Edit Row: " + selectedRow);

                    TableData data = ((AllTableModel) allTable.getModel()).getTableData().get(selectedRow);
                    List<TableData> tempData = new ArrayList<TableData>();
                    tempData.add(data);

                    AllTableModel tempModel = new AllTableModel(tempData);

                    JTable table = new JTable(tempModel);
                    dialog.add(new JScrollPane(table));
                    dialog.setVisible(true);
                }
            }
            });

        return panel;
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                new AllTableExample().createUI();
            }
        };

        EventQueue.invokeLater(r);
    }

}

class AllTableModel extends AbstractTableModel {

    List<TableData> tableData = new ArrayList<TableData>();

    Object[] columnNames = {"Name", "Grade", "Subject", "Staff"};

    public AllTableModel(List<TableData> data) {

        tableData = data;
    }

    public List<TableData> getTableData() {
        return tableData;
    }

    @Override
    public String getColumnName(int column) {
        return columnNames[column].toString();
    }

    @Override
    public int getColumnCount() {
        return columnNames.length;
    }

    @Override
    public int getRowCount() {
        return tableData.size();
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        TableData data = tableData.get(rowIndex);
        switch (columnIndex) {
        case 0:
            return data.getName();
        case 1:
            return data.getGrade();
        case 2:
            return data.getSubject();
        case 3:
            return data.getStaff();
        default:
            return null;
        }
    }

}

class TableData {

    private String name;
    private String grade;
    private String subject;
    private String staff;

    public TableData(String name, String grade, String subject, String staff) {
        super();
        this.name = name;
        this.grade = grade;
        this.subject = subject;
        this.staff = staff;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getGrade() {
        return grade;
    }
    public void setGrade(String grade) {
        this.grade = grade;
    }
    public String getSubject() {
        return subject;
    }
    public void setSubject(String subject) {
        this.subject = subject;
    }
    public String getStaff() {
        return staff;
    }
    public void setStaff(String staff) {
        this.staff = staff;
    }
} 
```

注意：存储弹出窗口打开的表的行号，以便在弹出对话框中更改后我们必须更新原始行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:20:41.930

> 我已经阅读了另一条评论（在这里查看[https://stackoverflow.com/a/4122082/1788917](https://stackoverflow.com/a/4122082/1788917)），我被告知我可以将行号保存在变量中

你读错了评论。

如果您阅读了该链接上方的答案（即有 7 票的答案），您将看到解决方案是在显示弹出菜单之前选择您单击的行。然后在你的菜单项 Action 你可以参考

```
table.getSelectedRow(); 
```

# java - 在没有主程序的情况下执行 jar？

> ID：15657738
> 
> 赞同：5
> 
> 时间：2013-03-27T11:29:11.730
> 
> 标签：java, jar, main, executable-jar

我可以通过这种方式在没有主类的情况下执行 jar 文件：

```
java -jar my_jar.jar -getX arg1 arg2 ... 
```

知道我有一个名为 getX 的方法，它以 arg1 arg2 ... 作为参数。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:54:11.940

简短的回答是否定的……但是……

这是一种在调用 jar 时可用于在命令行上传递方法名称和参数的技术。此说明性示例将方法名称作为第一个参数。根据需要进行调整并根据需要添加错误检查/处理。

```
package com.charles.example;
import java.lang.reflect.Method;

public class MethodRouter {

public void myMethod(final String[] args) {
    System.out.println("Amazing!! " + args[1]);
}

public static void main(String[] args) throws Exception {
    if (args.length == 0) {
        args = new String[2];
        args[0] = "myMethod";
        args[1] = "yoyo-yada-bla";
    }
    final MethodRouter methodRouter = new MethodRouter();
    final Class<?>[] types = { String[].class };
    final Class<?> _class = methodRouter.getClass();
    final String methodName = args[0];
    final Method _method = _class.getDeclaredMethod(methodName, types);
    if (_method != null) {
        _method.invoke(methodRouter, new Object[] { args });
    }
}

} 
```

输出：

```
Amazing!! yoyo-yada-bla 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T11:32:00.397

你必须有一个主要的方法。

main 的签名必须是：

```
public static void main(String[] args){
    // Insert code here
} 
```

因此，您可以在 main 方法中调用您的方法 getX。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:38:59.283

如果你要使用 " `java -jar`" 来执行一个 jar，你需要定义一个主类。您将需要一个主类，该类定义 jar 的主要方法，以便以这种方式执行。

但是，您可以使用以下语法在 jar 中执行一个类（前提是它们有一个 main 方法）：

```
java -classpath my_jar.jar com.project.MyClass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T11:47:17.877

您可以编写一个代理 jar 动态链接到您的 jar 并从中调用方法。代理 jar**必须**有一个带有`main`方法的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T11:32:10.047

应该至少有一个类有一个 main 方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T11:34:13.633

您不能仅通过将方法作为参数传递来执行它。如果您自己解释它们以执行您想要的方法，您必须解析您`-getX arg1 arg2`的参数，然后将其传递给参数中的 main 方法。`args`

如果带有main方法的类不在`META-INF/MANIFEST.MF`这样的

```
Manifest-Version: 1.0
Class-Path: .
Main-Class: some.pack.age.MainClass 
```

那么您可以将它（完全限定）指定为第一个参数。

```
java -cp my_jar.jar some.pack.age.MainClass -getX arg1 arg2 ... 
```

如果 jar 中没有带有 main 方法的类，那么您将无法执行它。JVM 需要一个入口点来开始执行，这是主要方法。这样的罐子只是一个图书馆。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-27T11:35:27.990

不知道你为什么想要这个，但你可以设置一个**单元测试**项目，并从中调用你的方法。那应该（有点）让您执行这些方法，而无需（显式） Main 方法。

您的测试运行程序仍将包含一个（隐式？） Main 方法，然后它将成为执行您的方法的入口点。

# silverlight - 跨程序集的 MergedDictionaries 和 Shared 样式

> ID：15657751
> 
> 赞同：2
> 
> 时间：2013-03-27T11:29:49.730
> 
> 标签：silverlight, windows-phone-7, xaml, windows-phone-8, windows-phone

也许有人会帮助我。我整天都在努力寻找在我的 WindowsPhone 项目上共享样式和资源的解决方案。

问题如下：

我有一个由两个 WP 项目使用的通用程序集。在这个程序集中，我定义了一些样式和数据模板。我希望在通用程序集中定义其中一个数据模板并成为项目的默认数据模板。

汇编资源字典示例代码：

```
<Style TargetType="TextBlock" x:Key="TopItemsTitle">
    <Setter Property="FontSize" Value="18"></Setter>
    <Setter Property="FontFamily" Value="Segoe WP Black"></Setter>
    <Setter Property="Foreground" Value="Red"></Setter>
</Style>

<DataTemplate x:Key="TopItemsTemplate">
    <Button>
        <TextBlock x:Name="Name"
                   Grid.Row="1"
                   Width="172"
                   Height="25"
                   Margin="0,6,0,50"
                   VerticalAlignment="Bottom"
                   Text="{Binding Name}"
                   TextWrapping="Wrap" 
                   Style="{StaticResource TopItemsTitle}" />
    </Button>
</DataTemplate> 
```

在不同的项目中，我想重新定义 TopItemsTitle 样式，例如：

```
<Style TargetType="TextBlock" x:Key="TopItemsTitle">
    <Setter Property="FontSize" Value="20"></Setter>
    <Setter Property="FontFamily" Value="Segoe WP"></Setter>
    <Setter Property="Foreground" Value="Blue"></Setter>
</Style> 
```

然后将两个资源字典合并到一个 WP 项目的 app.xaml 中：

```
<ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/Assembly;component/Resources/Style.xaml" />
        <ResourceDictionary Source="Resources/LocalStyle.xaml" />
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.resourcedictionary.mergeddictionaries%28v=vs.95%29.aspx) ，这应该是可能的。然而实际上这不起作用。数据模板不反映重新定义的样式并使用默认样式。

这是一个错误还是我做错了？

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:14:10.053

我认为你误解了这篇文章。查找 a`StaticResource`总是从元素开始，然后向上走。

`TopItemsTemplate`是在 common 中定义的`Style.xaml`，因此模板中的任何`{StaticResource}`引用都会首先在 (none found) 中查找匹配`Button`项，然后是`DataTemplate`(none found)，然后是`ResourceDictionary`of `Style.xaml`(found)。如果在 中没有找到`Style.xaml`，只有这样它才会继续尝试在合并的字典中找到一个。

如果您将其移动`TopItemsTitle`到不同的字典（因此合并的字典有 3 个源而不是 2 个），它可能会起作用，但我不能 100% 确定。

# jquery - 为邮件应用程序添加收件人 UI

> ID：15657754
> 
> 赞同：-2
> 
> 时间：2013-03-27T11:29:53.840
> 
> 标签：jquery

这是使用 jquery 的脚本

```
$('#AddRecipents').click(function(e){
    $('#abcd').append("<input type='text' name='Recipents' size='29'>");
}); 
```

它不是创建新的文本字段。

`div`这是带有 id的 HTML 代码`abcd`。

```
<label for="Recipents">Enter Recipents</label>
<input type="text" name="Recipents" size="29">
<input type="button" name="AddRecipent" id="AddRecipent" value="Add Recipents"> 
```

文本字段未显示在网页中。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:34:35.930

你给`id="AddRecipient"`了你的 html 元素，但是你`AddRecipients`在你的 JS 代码中调用了它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:35:01.147

如果您将替换`#AddRecipents`它`#AddRecipent`应该可以工作。

在 HTML 代码中，您没有提供带有 id 的元素`AddRecipents`。

# c - 如何在 Linux 中获取正确的时间

> ID：15657755
> 
> 赞同：0
> 
> 时间：2013-03-27T11:30:01.593
> 
> 标签：c, linux, datetime, time

目前，我可以借助诸如`localtime()` `gettimeofday()`etc之类的功能接收当前日期时间`time.h`

假设用户修改 Linux 中的日期和时间设置以将日期更改为以前的日期，当我调用上述函数时，我得到了这些更改。

我仍然想获得当前时间，即说今天的时间，无论任何用户更改系统日期和时间设置。

有什么办法可以达到同样的效果吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T11:31:25.090

就您的计算机而言，系统时间*是*当前时间。

如果您不能相信您所在的系统能够提供准确的时间，您可能需要考虑将[NTP](http://en.wikipedia.org/wiki/Network_Time_Protocol) [客户端](https://www.google.co.uk/search?q=c%20ntp%20client)嵌入到您的程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:35:38.917

如果具有适当权限的用户更改系统时间，则系统相信新值。

所以，你能得到别人对正确时间的看法的唯一方法就是走出系统。例如，您可以通过 NTP 协议连接到时间服务器。

对于一个便宜而愉快的解决方案，您可以获取一个网页，例如[http://www.whattimeisit.com/](http://www.whattimeisit.com/)。当然，下载延迟（充其量）是不准确的，这是 NTP 客户端巧妙处理的事情之一。

如果您想要的不是“正确”时间，而只是在您使用它时不会跳来跳去的时间，那么您可以`clock_gettime`专门研究`CLOCK_MONOTONIC`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:37:37.337

如果它与系统时间不同步，您可以查看硬件时钟，查看[hwclock 手册页](http://linux.die.net/man/8/hwclock)。

该页面上的注释部分也有一些关于如何检查同步的信息。

# jquery - jquery switch case 和 after(anything) 卡住了

> ID：15657757
> 
> 赞同：-1
> 
> 时间：2013-03-27T11:30:04.490
> 
> 标签：jquery, function, switch-statement

我制作了一个程序，显示/隐藏按钮取决于您单击的内容。这很简单，但我有一个大问题。我不想分层放置此按钮，第一次尝试
在之后附加“”标签，但如果我使用 .after()，则无法杀死该元素。为什么？

```
<button id="vissza">Vissza</button><hr /> <!-- vissza means: BACK -->
<button id="1">First</button>
<button id="11">AA</button>
<button id="111">AA1</button>
<button id="112">AA2</button>
<button id="113">AA3</button> 
<button id="114">AA4</button> 
<button id="12">AB</button>
<button id="121">AB1</button>
<button id="122">AB2</button> 
<button id="123">AB3</button>
<button id="124">AB4</button> 
<button id="125">AB5</button>

<button id="2">Second</button>
<button id="21">BA</button>
<button id="211">BA1</button>
<button id="212">BA2</button>
<button id="213">BA3</button> 
<button id="214">BA4</button>
<button id="22">BB</button>
<button id="221">BB1</button>
<button id="222">BB2</button>
<button id="223">BB</button> 

<button id="3">Third</button>
<button id="31">CA</button>
<button id="32">CB</button>
<button id="33">CC</button>
<button id="34">CD</button> 

<script>

 $("button[id]").hide();
 $("button[id='1']").show();
 $("button[id='2']").show();
 $("button[id='3']").show(); 

 $("button").click(function ( event ) { 
 event.preventDefault(); 
 var CurrentButtonID = $(this).attr('id');

LengthOfAButton = CurrentButtonID.length;
 j = 1; 

 var ItIsExist = 1;

 switch (LengthOfAButton) {
 case 1:
 $("button[id]").hide(); 
 BeforeStep = CurrentButtonID;

 while (ItIsExist>0) {
 ShowThis = "button[id=" + CurrentButtonID + j + "]"; 
 $(ShowThis).show().after('[can not dissappear1]'); 
 ItIsExist = $(ShowThis).length;
 j++; 
 } 

break;

case 2:
 $("button[id]").hide();
 BeforeStep = CurrentButtonID; 

 while (ItIsExist>0) { 
 ShowThis = "button[id=" + CurrentButtonID + j + "]"; 
 $(ShowThis).show().after('[can not dissappear2]');
 ItIsExist = $(ShowThis).length;
 j++; 
 } 

 break;

 case 3: 
 $("button[id]").hide(); 
 BeforeStep = CurrentButtonID; 

 while (ItIsExist>0) {
 ShowThis = "button[id=" + CurrentButtonID + j + "]"; 
 $(ShowThis).show().after('[can not dissappear3]'); 
 ItIsExist = $(ShowThis).length;
 j++; 
 }
 break;

 case 6: 

 if (BeforeStep.length==1) {
 $("button[id]").hide();
 CurrentButtonID = BeforeStep.substr(0,0); 
 }
 if (BeforeStep.length==2) { 
 $("button[id]").hide();
 CurrentButtonID = BeforeStep.substr(0,1);
 }
 if (BeforeStep.length==3) { 
 CurrentButtonID = BeforeStep.substr(0,2);
 $("button[id]").hide();
 } 
 if ((BeforeStep.length>1) && (BeforeStep.length<6)) {
 $("button[id]").hide();
 }

 while (ItIsExist>0) {
 var ShowThis = "button[id=" + CurrentButtonID + j + "]"; 
 $(ShowThis).show().after('[can not dissappear /at backbutton/]'); 
 ItIsExist = $(ShowThis).length;
 j++; 
 }
 BeforeStep = CurrentButtonID; 
 break;
 } 

 $("button[id='vissza']").show();

 });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:56:38.867

尝试

```
var btns = $("button[id]").hide();
$("#1, #2, #3").show();

btns.click(function(e){
    var $this = $(this);
    var regex = new RegExp('^' + $this.attr('id') + '\\d$');
    btns.filter(function(i, v){
        return regex.test(this.id);
    }).show();
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Lx7Dh/)

# mysql - 在 mysql 中继续处理程序

> ID：15657769
> 
> 赞同：0
> 
> 时间：2013-03-27T11:31:00.790
> 
> 标签：mysql

谁能澄清一下？继续处理程序是否仅用于游标？或者它可以用于循环结果集或其他表。请帮助 m。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:38:46.090

一般来说，handler is statement 指定一个处理一个或多个条件的处理程序，与游标一起使用，在存储过程中由 select 语句检索到的结果之间循环

它将指定是否进行下一次迭代

[你可以在这里](http://dev.mysql.com/doc/refman/5.0/en/declare-handler.html)找到更多细节

# complexity-theory - Divide et impera 用于矩阵旋转

> ID：15657770
> 
> 赞同：0
> 
> 时间：2013-03-27T11:31:04.197
> 
> 标签：complexity-theory, time-complexity, divide-and-conquer, blit, rotational-matrices

我试图从这个练习中解决第二个问题 b 和 d 子问题：http: [//courses.engr.illinois.edu/cs473/sp2010/homework/hw1.pdf](http://courses.engr.illinois.edu/cs473/sp2010/homework/hw1.pdf)

我通过以下方式解决了b：![2/b问题解决方案](../Images/79a87fbb731ed0277125b6899d2522d1.png)

我的第一个问题是：我的解决方案对问题 2/b 是否正确？我的第二个问题是：我应该在问题 2/d 中做什么？这对我来说有点奇怪。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:51:55.050

从阅读问题的第二段来看，在我看来，你的答案对于第 2b 部分是不正确的。我的阅读是 2^n 旋转需要 5 个 2^(n-1) 块。如果这是正确的，那么你的方程应该是

B(2^n) = 5 * B(2^(n-1)) = 25 * B(2^(n-2)) = ... = 5^n * B(1)

其中 B(x) 是 x 的 blit 数。（很抱歉不知道如何做花哨的方程式。）

对于 2d，我读它的意思是 B(2^n) 的时间复杂度是多少。试一试，让我们看看结果如何。

让我知道你的想法。

# javascript - html 文本中的分数字段在尝试 = -= 值时充当字符串

> ID：15657773
> 
> 赞同：0
> 
> 时间：2013-03-27T11:31:17.047
> 
> 标签：javascript, html

我试图制作一个记分板，并且奇怪地添加了数字：

我的html：

```
<div id="game-info">
   Top score: <p id="top-score">0</p><br>
    Current score: <p id="current">0</p><br>
    Games played: <p id="played-games">0</p>
</div> 
```

我的JavaScript：

```
var score = document.getElementById("current");
if(blabla scored points){
     score.innerHTML += 100;
}
if(blabla scored -points){
    score.innerHTML -= 10;
} 
```

减分效果很好，至少它是负数，但正数会在当前分数上添加到末尾，如下所示：

```
Current score: <p id="current">0100</p><br> 
```

或者

```
Current score: <p id="current">-20100</p><br> 
```

这与它是一个字符串而不是一个int有什么关系吗？我很困惑为什么负分有效而正分在相同标记时不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:33:25.467

你连接一个字符串......你需要先将当前分数转换为一个数字 - 尝试这样的事情：

```
var score = document.getElementById("current");
if(blabla scored points){
     // parse current score as integer and then add 100
     score.innerHTML = parseInt(score.innerHTML,10) + 100;
}
if(blabla scored -points){
    // parse current score as integer and then subtract 10
    score.innerHTML = parseInt(score.innerHTML,10) - 10;
} 
```

[`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)将字符串解析为整数

额外说明：使用`parseInt()`和使用基数时

> 一个整数，表示上述字符串的基数。**始终指定此参数**以消除读者混淆并保证可预测的行为。当未指定基数时，不同的实现会产生不同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:41:42.353

减去分数比添加分数效果更好的原因是运算`+`符重载了字符串（例如`innerHTML`）以表示字符串连接，而`-`运算符没有重载，对字符串有任何特殊含义。

因此，`score.innerHTML += 100`将选择`+`适用于字符串的运算符的重载并将 100 隐式转换为字符串并将“100”附加到当前分数字符串值。

但是，`score.innerHTML -= 10`将选择`-`适用于数值的运算符的含义，因此它被迫尝试将 innerHTML 值转换为数值（它可以成功）并从该值中减去 10，然后转换结果将结果分配给`score.innerHTML`. 实际上，您甚至可以在减法表达式中的 10 周围加上引号，它仍然可以工作，它也会尝试将其转换回数字。如果 score.innerHTML 恰好是一个不能转换为数字的字符串，比如“abc”，那么这个字符串会被转换为`NaN`，减法会得到 NaN，当被分配给 innerHTML 值。

正如该问题的其他答案所描述的， using`parseInt`是强制运算符的两个操作数`+=`都是数字的好方法，从而确保执行加法而不是字符串连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:33:27.220

innerHTML 是一个字符串。您可以`parseInt`在递增之前将其转换为整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T11:35:06.723

是的，因为“current”的值实际上是一个字符串，所以 += 只会将它认为是两个字符串的内容相加。

您需要先解析该值，然后才能对其进行任何数学运算，请参阅此问题以获取示例，其中包括在使用 parseInt() 之前检查它是否为数字：

[如何在javascript中将字符串解析为int](https://stackoverflow.com/questions/4194092/how-to-parse-string-to-int-in-javascript)

# javascript - 检测默认事件处理

> ID：15657776
> 
> 赞同：4
> 
> 时间：2013-03-27T11:31:30.150
> 
> 标签：javascript, event-handling, dom-events, greasemonkey, ecmascript-5

是否可以在 Firefox 的 Greasemonkey 代码*（**[EcmaScript 5.1 严格模式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)**）*中检测特定 DOM 事件是否绑定了任何事件处理程序*（包括浏览器默认事件处理*） ？

到目前为止，我设法在选择文本时设法取消了点击事件处理，但是**我想在以下所有情况下取消事件处理，**而单击事件触发默认操作：

*   选择页面上的文本
*   显示上下文菜单*（即右键单击）*
*   跟随一个链接*（左键单击`<a>`）*
*   表单元素被操作*（文本框获得焦点，光标开始闪烁，单选按钮被选中，...）*
*   其他一些处理事件的 JavaScript 代码*（例如显示弹出帮助对话框）*

是否有**一个包罗万象的机制**，还是我需要在我的代码中明确拼写所有情况？

以下代码是我如何检测到选择发生：

```
var toggleHighlight = function(){
    var oldTargt;
    return function(e){
        targt = e.target;
        sel = window.getSelection();
        if (!sel.isCollapsed && sel.containsNode(targt, true)) {
            return;
        }
        ...
        oldTargt = targt;
}()
document.addEventListener('click', toggleHighlight); 
```

[注意：
- 我不想停止使用我的脚本传播，如果事件将被传播到其他处理程序，我想停止我的脚本。 [- 如果JQuery-event-handlers-only](https://stackoverflow.com/questions/1236067/test-if-event-handler-is-bound-to-an-element-in-jquery)解决方案没有捕获默认浏览器事件处理程序
，我对它们不感兴趣。- 如果此功能确实不存在，请引用一些文章或博客，而不仅仅是您自己的观点。 - 欢迎提出特别建议，但我主要对通用解决方案的存在感兴趣。] 

**更新**：可接受的解决方案包括：

*   `if`我需要检查的详尽（ish）条件列表
*   从 Firefox 插件访问的非 JavaScript 方式
*   解释 Firefox 如何知道单击有效`<a>`元素应触发重新加载新 URL + 如何无法从 javascript/plugins 访问此逻辑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T11:12:42.630

这个问题几乎与[“仅在 Javascript / jQuery 中没有默认值时如何执行操作？”重复。](https://stackoverflow.com/q/3152075/331508)，除了作为 Greasemonkey 脚本编写者，还有一个（复杂的）选项可供您使用。

从您的问题来看，您似乎想为没有节点的节点设置[*默认操作*](http://www.w3.org/TR/DOM-Level-3-Events/#glossary-default-action)，然后在任何其他事件处理程序为给定事件触发时中止该默认操作。对此没有“包罗万象的机制”，您尝试的几乎任何技术都可能会破坏某些页面。原因如下：

1.  javascript 和 Greasemonkey API 都没有提供任何机制来列出给定节点的事件。有[一个旧提案](https://stackoverflow.com/q/7810534/331508)，但从未实施。

    **但是，** Firefox 插件可以通过[nsIEventListenerService](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIEventListenerService)列出事件，因此您*可以*为该部分编写一个与 Greasemonkey 接口的辅助插件。细节（方式）超出了这个问题的范围。

2.  同样，没有机制可以从[Event object](https://developer.mozilla.org/en-US/docs/DOM/event)检测事件链中的先前事件，除非`event.defaultPrevented`已设置。（通常不会。）

3.  即使您可以列出*节点 X*的事件侦听器，这也无助于父节点上的后备侦听器。现代 JS 库可以而且有时确实可以使任何旧节点可点击。和/或他们可能会设置一个监听器，比如说，`document`它*会获取*所有点击事件，但实际上除了原始目标是某个特定节点时不会*做任何事情。*

* * *

**一个好的折衷策略**是跟随其他问题的引导，不对具有*默认操作*的节点做任何事情。
要处理右键单击或中心单击，请选中`event.which`.

因此，您可以将以下代码段添加到您的检查中：

```
return function(e){
    targt   = e.target;
    sel     = window.getSelection();

    if (e.which != 1) {
        return; //-- Abort on anything that is not a left-click.
    }
    if (e.defaultPrevented) {
        return; //-- The one time we know that some other handler fired.
    }
    if (isInteractiveElement (targt) ) {
        // Do nothing for elements that trigger browser actions
        return; 
    }
    ... 
```

在哪里：

```
function isInteractiveElement (node) {
    var intElems = [
        //-- Must be uppercase
        "A", "BUTTON", "INPUT", "TEXTAREA", "VIDEO", "MAP", "OBJECT"
    ];
    if (intElems.indexOf (node.nodeName) >= 0) {
        return true;
    }
    else if (node.nodeName === "BODY") {
        return false;
    }

    return isInteractiveElement (node.parentNode);
} 
```

# android - 通过蓝牙将呼叫从一台设备转移到另一台设备

> ID：15657784
> 
> 赞同：11
> 
> 时间：2013-03-27T11:32:08.103
> 
> 标签：android, bluetooth, phone-call

我正在开发一个应用程序，我需要通过蓝牙协议将呼叫从一个设备转移到另一个设备（即，我想要像设备将呼叫转移到免提的方式）。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-23T15:03:50.780

一般你不能。Android 蓝牙堆栈实现了几个蓝牙配置文件，包括[HFP](https://en.wikipedia.org/wiki/List_of_Bluetooth_profiles#Hands-Free_Profile_.28HFP.29)和[A2DP](https://en.wikipedia.org/wiki/List_of_Bluetooth_profiles#Advanced_Audio_Distribution_Profile_.28A2DP.29)。Android 是两个配置文件的音频源，它将音频流式传输到连接的耳机。耳机应实现免提单元 ( **HF** ) 功能和 Android 音频网关 ( **AG** ) - 如[Bluetooth.org](https://developer.bluetooth.org/TechnologyOverview/Pages/HFP.aspx)所述。

现在，您希望在设计上支持 AG 的 Android 设备上具有 HF 功能。您需要为设备实施 HFP 配置文件（HF 端），实际上您希望将其用作耳机。看看[轮廓模型](https://developer.bluetooth.org/TechnologyOverview/Pages/HFP.aspx)。HFP 基于 RFCOMM（Android API 支持）和 SDP（API 中不存在）。您将无法从[BlueDroid](https://source.android.com/devices/bluetooth.html)访问堆栈层上的某些部分（修改 SDP 等）。因此，您的手机不能假装是具有 HF 功能的耳机。

当然，您可以通过 RFCOMM 发送所有内容（据我所知，这是异步的），但 Android 蓝牙 API 对此没有直接支持。使用 RFCOMM 实现需要[SCO 链接](https://en.wikipedia.org/wiki/List_of_Bluetooth_protocols#Synchronous_Connection-Oriented_.28SCO.29)（SCO 套接字），它也可能隐藏在 Android OS 堆栈层中（找不到通过 API 创建此类套接字的方法）。

# plugins - ImageJ 插件中的“waitForUser”宏的问题

> ID：15657787
> 
> 赞同：0
> 
> 时间：2013-03-27T11:32:18.623
> 
> 标签：plugins, macros, imagej

我正在开发一个 ImageJ 插件来做一些图像分析。我有一系列我想在插件中运行的宏。

使用

```
new Macro_Runner().runMacroFromJar("macro.txt", "macro title"); 
```

我可以从插件中调用每个宏。

尽管这似乎可行，但宏在到达时停止

```
waitForUser(); 
```

线。ImageJ 窗口停止更新，不接受命令，需要 Alt-Ctrl-Del 退出程序。

有谁知道导致这种情况发生的原因？

最好的祝愿

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:34:49.487

我找到了问题的原因。它与在 Swing gui 中使用 WaitForUser 有关。

通过产生一个新线程来运行宏来解决。见这里：

[http://thread.gmane.org/gmane.comp.java.imagej/15921/focus=15924](http://thread.gmane.org/gmane.comp.java.imagej/15921/focus=15924)

# iphone - 键盘关闭警报视图问题的文本字段

> ID：15657791
> 
> 赞同：0
> 
> 时间：2013-03-27T11:32:34.283
> 
> 标签：iphone, uitextfield, uialertview

我的代码中有严重问题，我在警报视图中有 3 个文本字段，我点击文本字段两次并按下警报视图键盘退出的确定按钮，但第三次它没有被解雇。

[这是我的代码](https://stackoverflow.com/questions/15652352/resign-keyboard-of-textfield-present-in-alertview)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:41:28.897

向文本字段添加操作以隐藏键盘，如下所示：

```
 [ptextfield
 addTarget:self action:@selector(hideKeyboard:) forControlEvents:UIControlEventEditingDidEndOnExit]; 
```

和隐藏键盘：

```
- (void)hideKeyboard:(id)textField
{
    [textField resignFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:04:17.027

我把我的答案放在[这里](https://stackoverflow.com/questions/15652352/resign-keyboard-of-textfield-present-in-alertview)。请检查。你不需要就一件事情提出太多问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:58:17.527

您的代码应该可以工作..最好检查您的警报标签..否则这样做..在 `textFieldBeginEditing` 方法中获取该文本字段并将其分配给一个全局文本字段，例如

`ActiveTextfield = textField`.

然后在 alertview 委托中辞职那个 ActiveTextfield。

# c# - 文件夹名称包含 # 符号但未显示缩略图

> ID：15657792
> 
> 赞同：0
> 
> 时间：2013-03-27T11:32:34.457
> 
> 标签：c#, windows-phone-8, thumbnails

嗨，我在 Windows Phone 8 中开发了一个应用程序，它将图像从服务器下载到手机，并且每个文件夹都在`pictures`显示`thumbnails`，没有任何问题。但是如果有一个带有`"#"`类似符号的文件夹`Fold#er`，那么文件夹内的所有图像都会显示，但缩略图不显示，它是空的。

我已经调试了代码，没有问题，没有例外。即使在我测试过的服务器中，它也可以很好地处理缩略图和图片。

知道为什么`#`符号会产生这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:35:16.337

哈希 (#) 是 URL 锚点。听起来您需要对路径进行 URL 编码。例如`Fold%23er`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:08:44.930

经过大量研究，我找到了解决方案，感谢@Blazes 的建议，但这是不同的问题。在我的应用程序中，每当它发现任何特殊字符（如 #、^、<、> 等）时，它只会截断字符串，直到那个时候，最糟糕的是它没有抛出任何错误/异常。现在我已经使用

```
string escapeStr = Uri.EscapeDataString(filepath); 
```

这一行足以解决问题，但有时需要对整个字符串进行转义编码

比如假设你有一个字符串，就像

`string request = "Username" + uname + "Password" +Pwd + "Filepath" + filepath;`

那么在这种情况下

`string unamestr = Uri.EscapeDataString(uname);`

`string Pwdstr = Uri.EscapeDataString(Pwd );`

将无济于事，因为您正在处理 unicode 字符。所以在那种情况下，整个字符串需要像这样编码

`string request = Uri.EscapeDataString("Username" + uname + "Password" +Pwd + "Filepath" + filepath);`

这是我通过试错法和 SO 找到的解决方案。

谢谢

# css - 在 Opera Mobile 中将 div 置于屏幕外（溢出：隐藏不起作用）

> ID：15657799
> 
> 赞同：0
> 
> 时间：2013-03-27T11:32:56.583
> 
> 标签：css, responsive-design, opera-mobile

我正在开发一个响应式 Web 布局，菜单位于屏幕外 - 基本上我正在使用以下代码：

**CSS：**

```
body {
    overflow:hidden;
}
.offscreen {
    background:#F00;
    height:100px;
    position:absolute;
    right:-90px;
    top:100px;
    width:100px;
} 
```

**HTML：**

```
<body>
    <div class="offscreen">
    </div>
</body> 
```

演示可以在[这里](http://www.thebackoffice.be/revaki/static/test.html)找到。

**问题：** Opera Mobile（Android 4.1.2 上的 12.10）将 div 定位在屏幕外，但允许滚动 - 显然它忽略了`overflow:hidden`规则。

![演示页面](../Images/6f161993049a05e3d4afc0575786773b.png)

**我的问题：**

*   有什么想法可以让 Opera Mobile 隐藏 div 并禁用水平滚动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:37:33.553

尝试这个：

```
overflow:hidden; 
overflow-y:hidden; 
overflow-x:hidden; 
```

未测试。

# c# - LINQ 查询数据表返回不正确的结果

> ID：15657802
> 
> 赞同：2
> 
> 时间：2013-03-27T11:33:14.413
> 
> 标签：c#, linq, datatable

我想对 Datatable 进行 LINQ 查询以选择具有特定 ID 的名称，但它返回名称的长度而不是字符串，这里是一些示例代码：

```
 private void btnShow(object sender, EventArgs e)
    {
        DataTable CL = new DataTable();
        DataRow rt;
        CL.Columns.Add(new System.Data.DataColumn("ID", typeof(string)));
        CL.Columns.Add(new System.Data.DataColumn("Name", typeof(string)));           

        for (int i = 0; i< dataGridView1.Rows.Count; i++)
        {

            rt = CL.NewRow();
            rt[0] = dataGridView1.Rows[i].Cells[0].Value.ToString();
            rt[1] = dataGridView1.Rows[i].Cells[1].Value.ToString();
            CL.Rows.Add(rt);
        }

        var results = from myRow in CL.AsEnumerable()
                  where myRow.Field<string>("ID") == "1"
                  select myRow.Field<string>("Name").ToString();

       dataGridView2.DataSource = results.ToList();

     } 
```

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:41:49.017

```
 private void btnShow(object sender, EventArgs e)
{
    DataTable CL = new DataTable();
    DataRow rt;
    DataTable dt = new DataTable();
    DataRow row;
    CL.Columns.Add(new System.Data.DataColumn("ID", typeof(string)));
    CL.Columns.Add(new System.Data.DataColumn("Name", typeof(string)));           

    for (int i = 0; i< dataGridView1.Rows.Count; i++)
    {

        rt = CL.NewRow();
        rt[0] = dataGridView1.Rows[i].Cells[0].Value.ToString();
        rt[1] = dataGridView1.Rows[i].Cells[1].Value.ToString();
        CL.Rows.Add(rt);
    }

    IEnumerable<DataRow> results = from myRow in CL.AsEnumerable()
                                   where myRow.Field<string>("ID") == "1"
                                   select myRow;

            foreach (var re in results)
            {
                row = dt.NewRow();
                dt.Rows.Add(st.Field<string>("Name"));
            }
   dataGridView2.DataSource = dt;

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:53:39.140

我怀疑这`Value`正在返回您不怀疑的值。

首先，尝试：

```
for (int i = 0; i< dataGridView1.Rows.Count; i++)
{
  rt = CL.NewRow();
  string value1 = dataGridView1.Rows[i].Cells[0].Value;
  string value2 = dataGridView1.Rows[i].Cells[1].Value.ToString();
  //Breakpoint here, check the values of value1 and value2
  CL.Rows.Add(rt);
} 
```

我也会尝试您的查询的不同变体。

```
string[] names = dt.Rows.Cast<DataRow>().Where(row => row["Id"] == 1).Select(row => row["Name"].ToString()).ToArray(); 
```

然后在此时检查名称。请评论答案第一部分的结果以查看值是什么。

# php - Cakephp 插件过滤器重命名选择

> ID：15657810
> 
> 赞同：0
> 
> 时间：2013-03-27T11:33:32.070
> 
> 标签：php, cakephp, plugins, cakephp-2.1

[我从https://github.com/lecterror/cakephp-filter-plugin](https://github.com/lecterror/cakephp-filter-plugin)安装了一个插件过滤器。

如何重命名下拉栏中的值？

现在我可以选择：

```
[ ]
[0]
[1] 
```

我需要的是：

```
[ ]
[Agent]
[Investor] 
```

.

```
public $filters = array(
    'index' => array(
        'Model' => array( 
            'Model.Tablename' => array('label' => 'Find'),
            'Model.Tablename' => array(
                'label' => 'Position type',
                'type' => 'select',
                'selectOptions' => array (
                    0 => 'Agent',
                    1 => 'Investor'
                )
            )
        )
    )
); 
```

在选择器类型中，我想将 0 重命名为 Agent，将 1 重命名为 Investor。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:21:11.773

自己找：

//plugincode-----> filter_form_fields

```
 foreach ($viewFilterParams as $field) {
        // Edited on  28-03-2013 
        // check if option type is select.
        if ($field['options']['type'] == "select") {
            // check for all option values ( 0,1,2,3,4 ect ) and rename it with optionNewValue
            foreach ($field['options']['options'] as $optionvalue) {
                $optionNewValue = $field['options']['OptionKey'][$optionvalue];
                // Rename the optionvalue
                $field['options']['options'][$optionvalue] = $optionNewValue;
            }
        } 
```

// filtercomponent.ctp 添加（插件代码）

> // Optionkey 给出值 filter_form_fields // 在控制器内部使用 Optionkey => array() 重命名值 $options['OptionKey'] = $settings['OptionKey'];

现在你可以放入控制器

```
'index' => array(
        'Model' => array( 
            'Model.Tablename' => array('label' => 'Find'),
            'Model.Tablename' => array(
                'label' => 'Position type',
                 'type' => 'select',
                'OptionKey' => array (
                    0 => 'agent',
                    1 => 'investor'

            )
        )
    )
); 
```

:D:D:D:D:D

# oracle11g - 将列修改为 NULL - Oracle

> ID：15657812
> 
> 赞同：12
> 
> 时间：2013-03-27T11:33:34.933
> 
> 标签：oracle11g

我有一个名为 的表`CUSTOMER`，列数很少。其中之一是`Customer_ID`。

最初`Customer_ID`列`WILL NOT`接受`NULL`值。

我已经从代码级别进行了一些更改，因此该`Customer_ID`列将`NULL`默认接受值。

现在我的要求是，我需要再次使该列接受`NULL`值。

为此，我添加了执行以下查询：

```
ALTER TABLE Customer MODIFY Customer_ID nvarchar2(20) NULL 
```

我收到以下错误：

```
ORA-01451 error, the column already allows null entries so
therefore cannot be modified 
```

这是因为我已经使该`Customer_ID`列接受`NULL`值。

`NULL`有没有办法在执行上述查询之前检查列是否接受值......？？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T11:43:32.260

[您可以使用USER_TAB_COLUMNS](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2103.htm#REFRN20277)中的 NULLABLE 列。这告诉您该列是否允许使用二进制 Y/N 标志的空值。

如果您想将其放入脚本中，您可以执行以下操作：

```
declare

   l_null user_tab_columns.nullable%type;

begin

   select nullable into l_null
     from user_tab_columns
    where table_name = 'CUSTOMER'
      and column_name = 'CUSTOMER_ID';

   if l_null = 'N' then
      execute immediate 'ALTER TABLE Customer 
                          MODIFY (Customer_ID nvarchar2(20) NULL)';
   end if;

end; 
```

最好*不要*使用动态 SQL 来更改表。手动进行，并确保首先仔细检查所有内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-01T22:23:31.230

或者您可以忽略错误：

```
declare
    already_null exception;
    pragma exception_init (already_null , -01451);
begin
    execute immediate 'alter table <TABLE> modify(<COLUMN> null)';
    exception when already_null then null;
end;
/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-25T11:10:06.110

当您之前`DEFAULT ON NULL`为该列提供了值时，您可能会遇到此错误`NOT NULL`。

如果是这种情况，要使列可以为空，您还必须将其默认值重置为`NULL`修改其可空性约束时的值。

例如：

```
DEFINE table_name = your_table_name_here
DEFINE column_name = your_column_name_here;

ALTER TABLE &table_name
  MODIFY (
    &column_name
      DEFAULT NULL
      NULL
  ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T03:50:47.737

我做了这样的事情，效果很好。尝试执行查询，如果出现任何错误，catch `SQLException`。

```
try {
stmt.execute("ALTER TABLE Customer MODIFY Customer_ID nvarchar2(20) NULL");
} catch (SQLException sqe) {
Logger("Column to be modified to NULL is already NULL : " + sqe);
} 
```

这是正确的做法吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-08T07:31:07.673

修改现有表的约束

例如...`not null`向列添加约束。

然后按照给定的步骤操作：

1) 选择要在其中修改更改的表。

2）点击`Actions..`--->选择列---->添加。

3) 现在给出列名、数据类型、大小等，然后单击确定。

4) 您将看到该列已添加到表中。

5) 现在点击`Edit`按钮左侧的`Actions`按钮。

6）然后您将获得各种表格修改选项。

7)`column`从列表中选择。

8) 选择您要在其中给出的特定列`not null`。

9)`Cannot be null`从中选择`column properties`。

10) 就是这样。

# java - 从保存的 refreshtoken (java) 中恢复 adwords api 的 oauth2 凭据

> ID：15657814
> 
> 赞同：0
> 
> 时间：2013-03-27T11:33:39.667
> 
> 标签：java, oauth-2.0, google-ads-api

我正在编写一个访问 Adwords API 的独立应用程序。oauth2 身份验证和授权工作正常。

我的问题是我想将 refreshtoken 保存在文本文件中，并在下次运行应用程序时直接使用它来恢复我的凭据。refreshtoken 应该有效期为 14 天，因此恢复访问凭据会非常好。

我还没有找到一个有效的例子。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:36:56.487

与`refresh token`授权令牌没有太大区别。 [OAuth2.0](http://oauth.net/2/)有几个*流程*可用于访问服务器。常见的（也是最节省的）*流程*是所谓的**授权代码流程**（[详细信息在这里](https://www.rfc-editor.org/rfc/rfc6749)）。

在那里，您的应用程序在用户第一次想要使用您的应用程序时向*授权服务器*询问。当用户登录并授予您的应用程序访问该服务的权限时，`authorization code`用户将通过网站获得该信息。`authorization code`您的应用程序将此代码发送到*授权服务器*以获取第一个`access token`（以及它`refresh token`）。它是您需要发送到的*同一*`refresh token`台服务器。

现在，在您的情况下，我不确切知道服务器的 uri 是什么，但这将是您可以发送服务器的*POST请求的示例：*

```
 POST /o/oauth2/token HTTP/1.1
 Host: accounts.google.com
 Content-Type: application/x-www-form-urlencoded

 client_id=YOUR_CLIENT_ID_HERE&
 client_secret=YOUR_CLIENT_SECRET_HERE&
 refresh_token=THE_REFRESH_TOKEN_HERE&
 grant_type=refresh_token 
```

如果请求有效，服务器将响应一个新的`Access Token`. [在这里](https://developers.google.com/accounts/docs/OAuth2InstalledApp)，您可以找到有关您可以提出的特定请求的更多信息。

**请记住，每个令牌（访问令牌和刷新令牌）都必须保存。**最好的方法是将其加密保存，并且在发送令牌时仅使用*POST*请求和*https*。但这不是你的问题。

我希望我能帮助你。

# java - 如何识别客户端计算机上的 MS-Word 版本以将报告导出到 Word 文档

> ID：15657815
> 
> 赞同：0
> 
> 时间：2013-03-27T11:33:40.520
> 
> 标签：java, javascript, jasper-reports, export-to-excel, jasperserver

我使用*JasperReports*（*iReport*工具）开发了一个需要导出到 MS-Word 文档的报告。我的机器上有 Word-2007，它可以与*.docx*扩展名（硬编码）一起正常工作。但是，如果任何机器安装了采用*.doc*版本的 MS-Word 1997-2003，则会导致问题，因为我使用的是硬编码值*.docx*。

有没有办法处理这个？

如果知道客户端机器上的版本是唯一的选择，我怎么知道安装的版本？我认为这部分代码应该在 javascript/jQuery 中（了解客户端机器上的 MS-Word 版本）。

请让我知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T23:53:37.980

您无法从浏览器检查某人机器的内容。那将是一个严重的安全风险。

给他们选择。JasperReports 可以导出多种格式；为用户提供多个选项，如有必要，为每个选项添加简要说明。或者，给用户一个 .doc 文件，最新版本的 MS word 和 OpenOffice 也可以打开该文件。

# c++ - 这段代码应该做什么？（参考右值）

> ID：15657817
> 
> 赞同：0
> 
> 时间：2013-03-27T11:33:52.193
> 
> 标签：c++, c++11, rvalue

我已阅读以下代码在 C++11 中有效：

```
int && a = 3;
a = 4; 
```

是否应该在存储数字文字 3 的内存地址中写入 4 ？也许一些编译器优化会阻止这种情况发生，但它应该这样做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T11:34:54.083

当您将非类类型的纯右值分配给右值引用时，会创建一个临时对象并将引用绑定到该对象。您只是在修改临时对象。

> 对类型“cv1 `T1`”的引用由“cv2”类型的表达式初始化，`T2`如下所示：
> 
> *   如果引用是左值引用 [...]
>     
>     
> *   否则， [...] 或**引用应为右值引用**。
>     
>     
>     *   如果初始化表达式
>         
>         
>         *   是一个 xvalue（但不是位域）、类纯右值、数组纯右值或函数左值 [...]，或
>             
>             
>         *   有一个类类型 [...]
>             
>             
>         
>         [...]
>         
>         
>     *   **`T1`**否则，将使用非引用复制初始化 (8.5) 的规则从初始化表达式**创建并初始化****“cv1”类型的临时变量。**然后将引用绑定到临时文件。

从概念上讲，prvalue 只是一个值，它可能来自也可能不来自内存中的某个对象。文字在内存中没有对应的对象，因此该规则强制创建对象。

# ios - iOS .plist 命名约定

> ID：15657818
> 
> 赞同：0
> 
> 时间：2013-03-27T11:34:00.273
> 
> 标签：ios, naming-conventions, plist

`.plist`在 iOS 应用程序中处理文件时的命名约定是什么。

具体来说：

*   文件名的命名约定
*   使用的键的命名约定

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:00:57.997

文件本身没有命名约定。但是我观察到关键常量通常是这样定义的：

在 SomeClass.h 文件中

```
extern NSString * const MyValueKey; 
```

在 SomeClass.m 文件中

```
NSString * const MyValueKey = @"MyValue"; 
```

IE。键常量有后缀“Key”，而该常量的值没有它。

然后假设你有 plist 中的字典（这里 - 以 json 格式）：

```
{
    "MyValue": "Some string"
} 
```

阅读 plist 并在其中包含该字典后，您可以执行以下操作：

```
NSString * someString = dictFromPlist[MyValueKey]; 
```

# configuration - 设置 hadoop 时 SSH 出现问题

> ID：15657821
> 
> 赞同：4
> 
> 时间：2013-03-27T11:34:11.480
> 
> 标签：configuration, hadoop, ssh

我是 hadoop 的新鱼。我在我的计算机上安装了 Ubuntu 12.10，我想在一个节点上以伪分布式模式安装 Hadoop。我搜索并获得了很多教程，但我对 SSH 有问题。我做了什么教程说。我确定问题出在 SSH 上。我得到了 openssh-server，并且这样做了：
hadoop00@WebsoftStation:~$ssh-keygen -t dsa -P "" -f ~/.ssh/id_dsa hadoop00@WebsoftStation: ~/.ssh$cat ~/.ssh/id_dsa.pub >> 授权密钥

然后我可以像这样成功地 ssh 我的本地主机：
hadoop00@WebsoftStation:~$ssh localhost
它起作用了。所以我改变了hadoop的路径，然后：
hadoop00@WebsoftStation:/usr/local/hadoop$ sudo bin/start-all.sh
[sudo] hadoop00的密码：
启动namenode，登录到/usr/local/hadoop/libexec/ ../logs/hadoop-root-namenode-WebsoftStation.out
root@localhost 的密码：
root@localhost 的密码：localhost：权限被拒绝，请重试。
所以有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:09:14.123

您只为当前帐户设置了无密码 ssh。因为，当您可以毫无问题地使用 ssh localhost 时，您接下来需要做的就是授予脚本执行权限。执行以下命令：

```
chmod +x bin/*.sh  ---> assigns execution permission to all the scripts
./start.all        ----> executes the script 
```

注意：Hadoop 也可以在没有使用 hadoop-daemon.sh 脚本的无密码 ssh 设置的情况下运行。无密码 ssh 的唯一优点是 ./start.all 脚本会在每个节点中代表您执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-19T19:45:40.463

您需要更改 Hadoop 文件夹的权限以归`hadoop00`用户所有：

```
cd /usr/local/
sudo chown -R hadoop00:hadoop00 /usr/local/hadoop 
```

然后你可以`cd`进入`sbin`文件夹并运行没有`sudo`. 如果您使用`sudo`您正在运行的脚本`root`具有不同的环境变量等，这就是您有不同行为的原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T11:41:03.913

你为什么使用`sudo`这显然是一个权限问题。

尝试在没有的情况下运行它`sudo`

```
bin/start-all.sh 
```

# wpf - EventTrigger 有时无法触发

> ID：15657822
> 
> 赞同：1
> 
> 时间：2013-03-27T11:34:12.947
> 
> 标签：wpf, inotifypropertychanged, datatrigger

我又有点难过，希望有人能帮忙。提前向长代码道歉。

问题 - 我有一个按预期启动的 DataTrigger，但它最终失败了，我不知道为什么。在提供的示例中，它围绕 Canvas 移动一个矩形。每次单击按钮都会按此顺序移动它；N，NE，E，SE，S，SW，W，NW。然后它再次开始序列，从 N 开始。一旦第一个序列完成，它就不会向北移动。它只会再次向 NW 移动（即最后一次成功移动）。

触发 DataTrigger 的属性正在更新。

谢谢

XAML；

```
<Window.Resources>
    <Style x:Key="TestRectStyle" TargetType="{x:Type Rectangle}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding UI_DirectionOfMovement}" Value="North">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Top)" By="-50" Duration="0:0:0.8" AutoReverse="False" />
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" By="0" Duration="0:0:0.8" AutoReverse="False" />
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
            <DataTrigger Binding="{Binding UI_DirectionOfMovement}" Value="NorthEast">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Top)" By="-50" Duration="0:0:0.8" AutoReverse="False" />
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" By="50" Duration="0:0:0.8" AutoReverse="False" />
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
            <DataTrigger Binding="{Binding UI_DirectionOfMovement}" Value="East">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Top)" By="0" Duration="0:0:0.8" AutoReverse="False" />
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" By="50" Duration="0:0:0.8" AutoReverse="False" />
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
            <DataTrigger Binding="{Binding UI_DirectionOfMovement}" Value="SouthEast">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Top)" By="50" Duration="0:0:0.8" AutoReverse="False" />
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" By="50" Duration="0:0:0.8" AutoReverse="False" />
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
            <DataTrigger Binding="{Binding UI_DirectionOfMovement}" Value="South">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Top)" By="50" Duration="0:0:0.8" AutoReverse="False" />
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" By="0" Duration="0:0:0.8" AutoReverse="False" />
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
            <DataTrigger Binding="{Binding UI_DirectionOfMovement}" Value="SouthWest">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Top)" By="50" Duration="0:0:0.8" AutoReverse="False" />
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" By="-50" Duration="0:0:0.8" AutoReverse="False" />
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
            <DataTrigger Binding="{Binding UI_DirectionOfMovement}" Value="West">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Top)" By="0" Duration="0:0:0.8" AutoReverse="False" />
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" By="-50" Duration="0:0:0.8" AutoReverse="False" />
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
            <DataTrigger Binding="{Binding UI_DirectionOfMovement}" Value="NorthWest">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Top)" By="-50" Duration="0:0:0.8" AutoReverse="False" />
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" By="-50" Duration="0:0:0.8" AutoReverse="False" />
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <DataTemplate x:Key="TestDataTemplate01" DataType="BO:MyPerson">
        <Canvas Width="1000" Height="1000" Background="Transparent">
            <Rectangle Width="50" Height="50" Fill="Red" Style="{StaticResource TestRectStyle}" Canvas.Top="300" Canvas.Left="300" />
        </Canvas>
    </DataTemplate>
</Window.Resources>

<Canvas Width="1000" Height="1000">
    <ItemsControl Name="ic_People" ItemTemplate="{StaticResource TestDataTemplate01}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Canvas Width="1000" Height="1000" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>

    <Button Canvas.Right="0" Click="Button_Click_1" Width="120">Next Move</Button>
</Canvas> 
```

代码隐藏；

```
public partial class Window1 : Window
{
    private ObservableCollection<MyPerson> _personList = new ObservableCollection<MyPerson>();

    public Window1()
    {
        InitializeComponent();

        MyPerson person1 = new MyPerson();
        _personList.Add(person1);
        ic_People.ItemsSource = _personList;
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        DoNextMove();
    }

    private int debugDirection = 0;
    private void DoNextMove()
    {
        if (debugDirection > 15)
            debugDirection = 0;

        _personList[0].MoveOneTile(debugDirection);
        debugDirection += 2; // increase by 2 to as I've not implemented the odd numbers yet
    }
} 
```

我的个人代码；

```
public class MyPerson : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }

    private string _dirMov = "";
    public string UI_DirectionOfMovement
    {
        get { return _dirMov; }
        set
        {
            _dirMov = value;
            OnPropertyChanged("UI_DirectionOfMovement");
        }
    }

    public void MoveOneTile(int directionToMove)
    {
        this.UI_DirectionOfMovement = "clear"; // clearing it first forces an update

        switch (directionToMove)
        {
            case 0: { this.UI_DirectionOfMovement = "North"; break; }
            case 2: { this.UI_DirectionOfMovement = "NorthEast"; break; }
            case 4: { this.UI_DirectionOfMovement = "East"; break; }
            case 6: { this.UI_DirectionOfMovement = "SouthEast"; break; }
            case 8: { this.UI_DirectionOfMovement = "South"; break; }
            case 10: { this.UI_DirectionOfMovement = "SouthWest"; break; }
            case 12: { this.UI_DirectionOfMovement = "West"; break; }
            case 14: { this.UI_DirectionOfMovement = "NorthWest"; break; }
            default: { throw new Exception(); }
        }
    }

    public MyPerson()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:35:04.550

这里的问题最终归结为动画实际上并没有改变`Canvas.Left`和`Canvas.Top`属性的值。它们似乎只是这样做，因为从动画中获得的值会覆盖通过数据绑定获得的值。

在每个动画完成后，动画将`Canvas.Left`或`Canvas.Top`依赖属性的值“保持”在其最终值。如果您获得依赖属性的值，则返回此“保留”值，它会覆盖通过数据绑定设置的任何值。当您开始第二个动画时，依赖属性的值是通过使用前一个动画的保持值来获得的。随着越来越多的动画发生，WPF 必须通过返回越来越多的动画链来确定矩形的位置。

我不能说为什么只有最后一个（NW）动画在你运行完所有动画后才运行。它很可能与[依赖属性值优先级](http://msdn.microsoft.com/en-gb/library/ms743230.aspx)有关。此页面没有说明如果依赖属性上有多个动画会发生什么，但在这种情况下，我会假设在该属性上启动的最后一个动画优先。我怀疑`DataTrigger`s 正在触发，但 WPF 依赖属性系统出于某种原因忽略了来自“覆盖”动画的值。

我建议避免使用这样的动画链。相反，更改您的`Person`对象以跟踪它们在画布上的位置，例如，通过添加`Left`和`Top`属性。然后，您可以将`Canvas.Left`和绑定`Canvas.Top`到这些属性。您的`DoNextMove`方法还应该将这些属性的值设置为动画将它们移动到的位置。`UI_DirectionOfMovement`在更改属性值后执行此操作。最后，通过设置`FillBehavior="Stop"`每个`DoubleAnimation`.

由于动画值优先于本地设置的值，因此在动画开始时设置属性值不是`Left`问题`Top`。在动画运行时，动画值`Canvas.Left`和`Canvas.Top`优先于通过数据绑定设置的任何值。随着动画结束，动画释放它对`Canvas.Left`和`Canvas.Top`依赖属性的持有，并且矩形的位置恢复为通过数据绑定获得。运气好的话，这个位置将与动画结束时相同。

# android - 我可以在 Android 中停止带有某些参数的服务吗？

> ID：15657824
> 
> 赞同：0
> 
> 时间：2013-03-27T11:34:16.360
> 
> 标签：android, android-intent, android-service

我可以为 stopService 方法的意图添加额外的信息。但是我怎样才能从服务中读取这些信息呢？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:40:49.773

你不能这样做，意图不会传递给服务。但是，您可以在服务中提供一个条目，用于要求服务自行停止（以及您希望服务了解的额外信息）。

# mootools - mootools 自我参考

> ID：15657825
> 
> 赞同：0
> 
> 时间：2013-03-27T11:34:16.790
> 
> 标签：mootools, this, self

我如何处理 mootools 中的自引用？在使下一个容器可见后，我将删除单击的“删除”按钮。使用 Jquery，我可以通过“this”运算符来完成。

```
 window.addEvent('domready', function(){

        $$('div.showButton').addEvent('click', function(){

        // show next Container 
        $$('div.container').getNext().show('inline');   

        // remove this "showButton"
        $(this).remove() // not working

        });
        });

   <!-- container 1 -->
    <div class="container">

        <div class="showButton">Show next container</div>
        <div class="hideButton">hide this container</div>

    </div>

    <!-- container 2 -->
    <div class="container" style="display:none">

        <div class="showButton">Show next container</div>
        <div class="hideButton">hide this container</div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:00:54.120

您必须记住 mootools 不是 jquery，它们在实现方面有所不同。

首先 $$ 函数返回元素数组而不是元素，因此您不能在数组上调用 show - 您必须获取所需的元素（通常是第一个）。

其次 - 您可以使用 $(this) 调用当前元素，但这有点不必要，因为您已经在元素事件中，所以您可以使用“this”：

[http://jsfiddle.net/kk4gz/2/](http://jsfiddle.net/kk4gz/2/)

```
 $$('div.showButton').addEvent('click', function(){

       // show next Container 
       $$('div.container')[0].getNext().show('inline');   

       // remove this "showButton"
       this.remove();

    }); 
```

# android - 即使 hasSubMenu 返回 true，也永远不会调用 onPrepareSubMenu

> ID：15657828
> 
> 赞同：1
> 
> 时间：2013-03-27T11:34:21.847
> 
> 标签：android

下面是我的 ActionProvider 类

```
import java.util.Locale;

import android.content.Context;
import android.util.Log;
import android.view.ActionProvider;
import android.view.LayoutInflater;
import android.view.SubMenu;
import android.view.View;
import android.widget.ImageButton;

public class LocaleActionProvider extends ActionProvider {
private static final String TAG = "LocaleActionProvider";

Context mCtx;

public LocaleActionProvider(Context context) {
    super(context);
    mCtx = context;
}

@Override
@Deprecated
public View onCreateActionView() {
    // Inflate the action view to be shown on the action bar.
    LayoutInflater layoutInflater = LayoutInflater.from(mCtx);
    View view = layoutInflater.inflate(R.layout.action_provider_locale,
            null);
    ImageButton button = (ImageButton) view.findViewById(R.id.localeButton);
    // Set up flag icon for specific locale
    Locale locale = Locale.getDefault();
    String locLan = locale.getLanguage();

    if (locLan.equals(Locale.CHINESE.getLanguage())) {
        button.setImageResource(R.drawable.insready);
    } else if (locLan.equals(Locale.ENGLISH.getLanguage())) {
        button.setImageResource(R.drawable.ic_action_locale_en);
    } else if (locLan.equals(Locale.FRENCH.getLanguage())) {
        button.setImageResource(R.drawable.ic_action_search);
    }
    /*
     * button.setOnClickListener(new View.OnClickListener() {
     * 
     * @Override public void onClick(View v) { // Do something... } });
     */
    return view;
}

@Override
public boolean hasSubMenu() {
    return true;
}

@Override
public void onPrepareSubMenu(SubMenu subMenu) {
    Log.i(TAG, "onPrepareSubMenu()");
    // Clear since the order of items may change.
    subMenu.clear();
    subMenu.add(0, 0, 0, "简体中文");
    subMenu.add(0, 1, 1, "English");
    subMenu.add(0, 2, 2, "French");
}

@Override
public boolean onPerformDefaultAction() {
    Log.i(this.getClass().getSimpleName(), "onPerformDefaultAction");

    return super.onPerformDefaultAction();
}
} 
```

我尝试使用调试器或 Log.i() 来监控 onPrepareSubMenu() 函数。但是永远不会调用 onPrepareSubMenu()，换句话说，调试器永远不会在断点处停止并且没有日志条目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:06:36.773

我发现在 onCreateActionView() 中，您必须返回 null 才能调用 onPrepareSubMenu()。然后，onCreateActionView() 中的所有这些设置可能需要进入 MainActivity 中的 onCreateOptionsMenu()

# android - 如何远程更新安卓应用信息？

> ID：15657829
> 
> 赞同：0
> 
> 时间：2013-03-27T11:34:22.897
> 
> 标签：android, networking

我正在开发一个应用程序，该应用程序将有几个文本视图，这些视图会根据菜单项而变化。我目前有一种方法可以做到这一点，涉及持续运行的服务器和应用程序之间的套接字通信，但我不希望有一个持续运行的服务器和计算机。有没有办法发送更新（不更新整个应用程序）以将菜单更改从计算机发送到应用程序？感谢您的任何帮助，如果需要，我会澄清。

# listview - QML ListView 在 endInsertRows() 之后不更新信息

> ID：15657830
> 
> 赞同：2
> 
> 时间：2013-03-27T11:34:25.037
> 
> 标签：listview, models, qml

我正在试验 C++、QML 和 OCaml。现在我正在解决一个奇怪的问题：如果我在模型中添加新行，QML 不会自行更新。是的，我知道 beginInsetRows()...endInsertRows()。

我的模型有 1 列和 1 行。我想再添加 1 行，然后调用`beginInsertRows(QModelIndex(-1,-1), 1, 1)`，进行一些计算并调用`endInsertRows()`。我添加了一些调试输出到`qt5/qtbase/src/corelib/itemmodels/qabstractitemmodel.cpp`

```
void QAbstractItemModel::endInsertRows()
{
Q_D(QAbstractItemModel);
    qDebug() << "Insert QAbstractItemModel::endInsertRows()";
    QAbstractItemModelPrivate::Change change = d->changes.pop();
    d->rowsInserted(change.parent, change.first, change.last);
    qDebug() << "emitting rowsInserted("<<change.parent<<","<<change.first<<","<<change.last<<")";
    emit rowsInserted(change.parent, change.first, change.last, QPrivateSignal());
} 
```

根据我的应用程序日志信号`rowsInserted`应该发出。

```
Going to call AbstractModel::beginInsertRows 
Calling AbstractModel::rowCount 
rowCount = 1
Going to call AbstractModel::endInsertRows 
Insert QAbstractItemModel::endInsertRows() 
emitting rowsInserted( QModelIndex(-1,-1,0x0,AbstractModel(0x11d3680) )  , 1 , 1 ) 
End inserting rows. cpp_data.length = 2
Sending event to change model
Call update (0,0)...(1,0)
Going to call AbstractModel::dataChanged 
Calling AbstractModel::parent 
```

然后我开始考虑如何实现 ListView 以及它如何处理有关添加新行的信号。grep 命令的输出真的让我大吃一惊：

```
......./qt5/qtdeclarative/src/quick/items$ grep rowsInserted qquicklistview* 
......./qt5/qtdeclarative/src/quick/items$ 
```

那么，您能否解释一下 ListView 如何处理模型中的更改以及表示已插入行的正确方法是什么？

PS我不知道是否有任何源文件有用，但这是[整个源代码树](https://github.com/Kakadu/lablqt/tree/9996b46b82203900a3418d50655b62760ef3f9de/qml/lib/test)，这是源代码[中最有趣的地方](https://github.com/Kakadu/lablqt/blob/9996b46b82203900a3418d50655b62760ef3f9de/qml/lib/test/program.ml#L90)

PPS 调试后我意识到出了什么问题

```
void QQuickVisualDataModel::_q_rowsInserted(const QModelIndex &parent, int begin, int end)
{
    Q_D(QQuickVisualDataModel);
    if (parent == d->m_adaptorModel.rootIndex)
        _q_itemsInserted(begin, end - begin + 1);
} 
```

存在但`parent`存在 并且它们不相等，这就是事件不引发的原因。需要更多时间来了解为什么会发生这种情况......`QModelIndex(-1,-1,0x0,AbstractModel(0xfa9690) )``rootIndex``QModelIndex(-1,-1,0x0,QObject(0x0) )`

PPPS 在对同一应用程序的纯 C++ 版本进行了一些实验后，我发现了这个错误的原因。在上面的成员`_q_rowsInserted`中 parent 是我们在 class 的对象中提交`beginInserRows()`的`rootIndex`值`QPersistentModelIndex`。`rootIndex`通常等于 QModelIndex(-1,-1,NULL,NULL)。你也应该知道 operator== of class`QModelIndex`比较了这个类的所有 4 个字段。

即，如果我们调用`beginInsertRows(QModelIndex(),...)`than`parent`将是相等`rootIndex`的，因为这些索引都等于`QMoldeIndex(-1,-1,NULL,NULL)`。但是，如果我们调用，那么`beginInsertRows(createIndex(-1,-1),....)`我们的父级将是 a`QModelIndex(-1,-1,NULL,<non-null pointer to our model>)`并且它显然不会相等`rootIndex` ，因为 NULL != 。因此，调用 似乎是个坏主意`beginInsertRows(createIndex(....),....)`。

有人可以解释一下 Qt 内部发生了什么吗？

（也许现在最好关闭这个问题并重新打开另一个关于 Qt 内部的更具体和具体的问题。我会考虑的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:02:16.273

创建 QModelIndex 的正确方法是在 row==-1 或 column==-1 时返回空 QModelIndex。重要的是不要将指向模型的指针放在结果 QModelIndex 中。如果你这样做，有些东西就不能正常工作。

# c# - 单独阅读文本文件中的每一段

> ID：15657831
> 
> 赞同：1
> 
> 时间：2013-03-27T11:34:27.083
> 
> 标签：c#

我想阅读一个文本文件，其中包含多个由新行分隔的段落。如何单独阅读每个段落`RichTextBox`以及如何通过按钮下一个按钮转移到下一个段落并通过之前在表单中设计的按钮返回第一段。我的代码

```
private void LoadFile_Click(object sender, EventArgs e)
{
    OpenFileDialog dialog = new OpenFileDialog();
    dialog.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
    dialog.Title = "Select a text file";
    dialog.ShowDialog();

    if (dialog.FileName != "")
    {
        System.IO.StreamReader reader = new System.IO.StreamReader(dialog.FileName);
        string Text = reader.ReadToEnd();
        reader.Close();
        this.Input.TextChanged -= new System.EventHandler(this.Input_TextChanged);
        Input.Clear();
        Input.Text = Text;
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:56:47.563

使用此代码。

```
var text = File.ReadAllText(inputFilePath);
var paragraphs = text .Split('\n'); 
```

段落将是一个包含所有段落的字符串数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:54:29.580

用于`String.split()`将其拆分为`'\n'`。然后遍历 Button *next*上的数组。

```
private string[] paragraphs;
private int index = 0;
private void LoadFile_Click(object sender, EventArgs e)
{
   OpenFileDialog dialog = new OpenFileDialog();
   dialog.Filter =
      "txt files (*.txt)|*.txt|All files (*.*)|*.*";
   dialog.Title = "Select a text file";

   dialog.ShowDialog();

   if (dialog.FileName != "")
   {
       System.IO.StreamReader reader = new System.IO.StreamReader(dialog.FileName);
       string Text = reader.ReadToEnd();
       reader.Close();
       this.Input.TextChanged -= new System.EventHandler(this.Input_TextChanged);
       Input.Clear();
       paragraphs = Text.Split('\n');
       index = 0;
       Input.Text = paragraphs[index];
   } 
} 

private void Next_Click(object sender, EventArgs e)
{
   index++;
   Input.Text = paragraphs[index];
} 
```

（我知道这可能不是最优雅的解决方案，但它应该给出一个关于做什么的想法。）

# java - 什么是映射缓冲池/直接缓冲池以及如何增加它们的大小？

> ID：15657837
> 
> 赞同：26
> 
> 时间：2013-03-27T11:34:47.443
> 
> 标签：java, performance, scala

![在此处输入图像描述](../Images/4a75012321ed6fcd7ed41111b71d40b7.png)

VisualVM 的屏幕截图是在我运行一个 IO 密集型 JVM 程序（用 Scala 编写）时拍摄的，堆大小为 4 GB，只有 2 GB 正在使用中。JVM 程序使用内存映射文件。

“映射缓冲池”和“直接缓冲池”是什么意思？

那些水池似乎很满。由于 JVM 程序使用内存映射文件，如果池更大，我会看到性能提高吗？如果是这样，如何增加它们的大小？

所有映射文件的大小约为 1.1GB。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-02T03:45:14.953

**直接缓冲**

[直接缓冲区](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)是一块内存，通常用于将 Java 连接到 OS I/O 子系统，例如，作为 OS 在从套接字或磁盘接收数据时写入数据的地方，Java 可以从中直接读取数据。

与操作系统共享缓冲区比将数据从操作系统复制到 Java 的内存模型中的原始方法要高效得多，这会使数据受到垃圾收集和低效率的影响，例如从伊甸园迁移数据时重新复制数据 - > 幸存者 -> 终身制 -> 到永久代。

在屏幕截图中，您只有一个 16KB 的直接缓冲区。Java 将根据需要增加这个池，因此蓝色区域位于块顶部的事实仅仅是一个声明，*到目前为止*分配的所有缓冲内存都在使用中。我不认为这是一个问题。

**映射缓冲池**

映射缓冲池是 Java 用于其[FileChannel](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html)实例的所有内存。

每个 FileChannel 实例都有一个与操作系统共享的缓冲区（类似于具有所有效率优势的直接缓冲区）。内存本质上是文件一部分的 RAM 内窗口。根据模式（读取、写入或两者），Java 可以直接读取和/或修改文件的内容，操作系统可以直接向磁盘提供数据或将修改后的数据刷新到磁盘。

这种方法的其他优点是操作系统可以在它认为合适的时候将这个缓冲区直接刷新到磁盘上，例如当操作系统关闭时，操作系统可以锁定该部分文件，使其不被计算机上的其他进程访问。

屏幕截图表明您有大约 680MB 被 12 个 FileChannel 对象使用。同样，Java 会增长，这是因为 Scala 需要更多（并且 JVM 可以从操作系统获得额外的内存），所以所有 680MB 都在使用中这一事实并不重要。考虑到它们的大小，在我看来，程序已经被优化以有效地使用这些缓冲区。

**增加映射缓冲池的大小**

Java 在垃圾收集空间之外为 FileChannel 缓冲区分配内存。这意味着正常的堆大小参数`-Xmx`在这里并不重要

FileChannel 中缓冲区的大小由[map](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#map(java.nio.channels.FileChannel.MapMode,%20long,%20long))方法设置。改变这将需要改变你的 Scala 程序

一旦缓冲区达到阈值大小，大约为 10s-100s KB，增加 FileChannel 缓冲区大小可能会或可能不会提高性能 - 这取决于程序如何使用缓冲区：

*   **否**：如果文件从头到尾被精确读取一次：几乎所有时间都在等待磁盘或处理算法
*   **Maybe**：但是，如果算法频繁扫描文件多次访问部分，则增加大小*可能会*提高性能：
    *   如果修改或写入文件，更大的缓冲区可以将更多的写入合并到一次刷新中。
    *   如果读取文件，操作系统可能已经缓存了文件（磁盘缓存），因此任何收益都可能是微不足道的。不恰当地增加 JVM 的大小可能会通过缩小有效磁盘缓存大小来降低性能
    *   在任何情况下，应用程序都必须经过专门编码才能获得任何好处，例如通过在缓存上实现其自己的逻辑记录指针。

尝试**分析应用程序**并查找 I/O 等待（Jprofiler 和 YourKit 擅长此操作）。可能文件 I/O 实际上不是问题——不要成为[过早优化](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)的受害者。如果 I/O 等待占总运行时间的很大一部分，那么可能值得尝试更大的缓冲区大小

**更多信息**

[https://blogs.oracle.com/alanb/entry/monitoring_direct_buffers](https://blogs.oracle.com/alanb/entry/monitoring_direct_buffers)

另请注意，JVM 上报告了一个错误，指出 FileChannel 不擅长释放内存。[在使用 java.nio.MappedByteBuffer 时防止 OutOfMemory](https://stackoverflow.com/questions/8553158/prevent-outofmemory-when-using-java-nio-mappedbytebuffer)中有详细说明

# mysql - 如何将mysql phpmyadmin export 生成的这个文件导入回表中？

> ID：15657841
> 
> 赞同：0
> 
> 时间：2013-03-27T11:35:04.123
> 
> 标签：mysql, phpmyadmin

我在 phpmyadmin 中对 mysql 表进行了 sql 导出，并得到了一个如下所示的文本文件：

```
"property";"367158";"4012";"5";"sold";"2013-02-06 05:40:27"
"property";"367159";"4013";"5";"sold";"2013-02-06 09:51:52" 
```

请注意行尾缺少分号。

我有数百个像上面这样的行。如何轻松地将这些数据条目重新导入表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:00:33.650

在 phpmyadmin 中转到导入选项卡，在那里您将看到诸如由分隔的字段等选项根据文件标记它们，然后单击确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:51:48.167

您拥有的是一个分隔文件。我相信 phpmyadmin 导入支持这种格式。选择分隔格式，将分隔符设置为';' 并进行导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:47:45.610

我很久以前做过类似的事情，在 mysql 命令行中尝试这样的事情：

```
LOAD DATA LOCAL INFILE 'C:/workbench/test-file.csv' INTO TABLE properties
FIELDS TERMINATED BY ';' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'; 
```

如果不起作用，您可以根据需要进行修改，例如行尾、文件名、文件路径等。

有关更多信息，请查看：

[http://dev.mysql.com/doc/refman/5.5/en/load-data.html](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)

# ssis - 将空值导出到平面文件源

> ID：15657842
> 
> 赞同：1
> 
> 时间：2013-03-27T11:35:05.410
> 
> 标签：ssis, flat-file, dataflowtask

我有一个包，它将数据从表导出到平面文件目标。在另一台服务器中，导出的文本文件将导入到表中。实际上我的问题是，包应该将 NULL 作为 NULL 导出和导入，将空字符串作为空字符串导出和导入。

我知道我们在平面文件源中有一个选项“将源中的空值保留为数据流中的空值”。但它会将所有空字符串更改为空值。

谁能建议我以更好的方式实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:58:09.013

BCP 可能是这里的解决方案。运行 BCP 将源表导出到文件，然后运行 ​​BCP 将文件导入目标表。可以通过 xp_cmdshell 调用 BCP，因此它可以作为执行 SQL 任务运行。有趣的是，BCP 将空字符串输出为 null，将 null 输出为空字符串。但是如果我们对导出和导入都使用 BCP，那么这些值将被正确映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:44:25.497

例如，我会将“真”空值导出为不同的文本，`<null>`然后在导入时将它们替换为空值。

# jquery - 从另一个域加载的脚本内的 Jquery ajax 调用

> ID：15657844
> 
> 赞同：0
> 
> 时间：2013-03-27T11:35:07.407
> 
> 标签：jquery, ajax

好的，我知道相同的域策略！如果我们使用 jsonP，jquery 可以调用它。

但我的问题有点不同。

1.  由于“同域策略”，浏览器不允许从另一个域调用内容。好的。
2.  但是，它应该允许从加载脚本的地方调用 ajax。正确的？

例如，我将 ajax.example.com 中的脚本 (my-script.js) 包含到 example.com/index.html

> <script src="/jquery.js"></script>
> <script src="//ajax.example.com/my-script.js"></script>

所以，我可以在 my-script.js 中调用 ajax 到 ajax.example.com，对吗？

但我正在使用 jquery 对象来调用 ajax！。所以，即使我从 my-script.js 调用 ajax，它也没有按预期工作。我确信这是因为 jquery 对象实际上是从主域创建的，

我可以在这里使用 jsonP，但我想知道，是否有任何解决方案可以通过 jquery 从 my-script.js 调用 ajax.example.com！

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:42:19.747

No, that's not going to work. Where the script is hosted makes no difference to whether AJAX calls are considered cross-domain or not. Only the current domain counts.

# unit-testing - 测试 Angular 服务给出错误：没有模块：ngResource

> ID：15657846
> 
> 赞同：15
> 
> 时间：2013-03-27T11:35:08.807
> 
> 标签：unit-testing, angularjs

我使用以下应用程序设置了 yeoman-angular：

```
angular.module('myApp', ['ngResource','ui.bootstrap'])
  .config(['$routeProvider', function ($routeProvider) {
      $routeProvider
      ...
  }]); 
```

和服务：

```
angular.module('myApp')
  .factory('UserSvc', [function() {
        return {
            name : '',
            topicOrder: 'lec_type',
        };
    }]); 
```

和以下测试：

```
describe('Service: UserSvc', function () {

  beforeEach(module('mfApp'));

  var UserSvc;
  beforeEach(inject(function(_UserSvc_) {
    UserSvc = _UserSvc_;
  }));

  it('should do something', function () {
    expect(UserSvc.topicOrder).toEqual('lec_type');
  });

}); 
```

我已经尽力在测试中注入 $resource （虽然服务本身并不依赖于 ngResource），但是当我运行测试时，我得到了这个错误

```
Error: No module: ngResource 
```

如果我从模块本身中删除依赖项，

```
angular.module('myApp', []) 
```

然后测试成功运行

我真的尝试了一切但失败了

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-28T02:56:13.847

在您的 testacular.conf.js / karma.conf.js 中是否包含 angular-resource.js；例如

```
files = [
  JASMINE,
  JASMINE_ADAPTER,
  'app/vendor/angular/angular.js',
  'app/vendor/angular/angular-*.js', 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T00:39:38.963

包含新组件后，请记住**重新启动**Testacular/Karma 会话。

# oracle - 如何获取使用批量插入和 forall 更新基表的行

> ID：15657847
> 
> 赞同：1
> 
> 时间：2013-03-27T11:35:14.460
> 
> 标签：oracle, plsql

我有一个没有主键的临时表（大约 760k 行）。我正在尝试使用批量收集和 forall 将此临时表中的行插入到我的主表中（也使用保存异常来捕获被拒绝的行），我已经成功地做到了。但是我需要跟踪被拒绝和成功移动的行（我想要做的是将临时表的状态列更新为“E”表示错误，M 表示成功迁移）这是我的过程：

代码片段

```
desc temp_table:
col1 varchar2(30);
col2 varchar2(30);
col3 number;
col4 number;
status varchar2(1);

create or replace procedure mov_to_main_table
as
loop_count number default 0;
error_row_no number default 0;
sql_stmt varchar2(500);
cursor c_data is
   select * from temp_table,a
    where temp_table.col1=a.col;

TYPE t_bulk_collect_tab IS TABLE OF c_data%ROWTYPE;

l_tab t_bulk_collect_tab;
l_inserted t_bulk_collect_tab; 

BEGIN

OPEN c_data;
LOOP
FETCH c_data
BULK COLLECT INTO l_tab LIMIT 1000;

EXIT WHEN l_tab.count = 0;
BEGIN

FORALL i IN 1..l_tab.count  save exceptions
insert into main_table(col1,col2,col3)
values(l_tab(i).col1,l_tab(i).col2,l_tab(i),col3);

EXCEPTION
when others then
bulk_error_count := sql%bulk_exceptions.count;
--dbms_output.put_line('number of error rows :'||bulk_error_count );
for i in 1..bulk_error_count
loop
error_row_no := to_number(SQL%BULK_EXCEPTIONS(i).ERROR_INDEX)+100*loop_count;
sql_stmt := 'update  temp_table set status=''E'' where rowid in (select rowid from     temp_table where rownum <=:1 minus select rowid from temp_table where rownum<:2)';
execute immediate sql_stmt using error_row_no,error_row_no;

end loop;

end; 
```

在上面的代码中，我将进入异常部分的行更新为“E”，但对于成功插入的行，我无法更新状态，主要是我需要捕获该 rownum 或 rowid 以更新无法从中获取的行对于所有如何更新成功移动的行？请帮助我提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:06:03.050

您的方法非常聪明，但是有些事情无法正常工作：

1.  首先，这里不需要动态 SQL，立即删除。
2.  您仍然可以访问`l_tab`异常块中的嵌套表，因此很容易选择相关的`id`或`rowid`.
3.  最后，这不是在 Oracle 中使用分页查询的方式，请参阅[SO 上的示例](https://stackoverflow.com/questions/241622/paging-with-oracle)。

我的建议是在获取其余数据的同时获取 rowid：

```
CURSOR c_data IS
   SELECT temp_table.*, a.*, temp_table.rowid rid 
     FROM temp_table, a 
    WHERE temp_table.col1 = a.col; 
```

然后在异常块中，您可以找到并更新有问题的行：

```
EXCEPTION
   WHEN OTHERS THEN
      bulk_error_count := SQL%bulk_exceptions.count;
      --dbms_output.put_line('number of error rows :'||bulk_error_count );
      FOR i IN 1 .. bulk_error_count LOOP
         UPDATE temp_table
            SET status = 'E'
          WHERE rowid = l_tab(SQL%BULK_EXCEPTIONS(i).error_index).rid);  
      END LOOP;
END; 
```

# php - PHP 没有加载 php_pdo 模块

> ID：15657852
> 
> 赞同：0
> 
> 时间：2013-03-27T11:35:21.597
> 
> 标签：php, windows, apache, pdo

当我尝试使用 PHP 中启用的 php_pdo.dll（和 php_pdo_mysql.dll）模块启动我的 Apache Web 服务器（在 Windows7/Apache2.2.22/PHP5.2.17 上）时，我收到此错误：

```
Warning: PHP Startup: Unable to load dynamic library 'C:\PHP\ext\php_pdo.dll' - The specified module could not be found. 
```

我在 php.ini 中设置了扩展路径（正确），所有`.dll`文件都存在于 \ext\ 文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:22:34.443

我将 php_pdo.dll 和 php_pdo_mysql.dll 文件都保存在 apache/bin 目录中，它现在可以**工作了！**啊？！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T11:57:06.760

取消注释`;extension=php_pdo.dll`

使用`extension=php_pdo.dll`不带分号；

编辑1：

还`extension=php_pdo_mysql.dll`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-08T13:54:08.943

这个问题是由于在同一系统上单独安装了 XAMPP/PHP 5.4 和 PHP 5.1 造成的。XAMPP默认在C:\XAMPP\PHP文件夹下运行PHP，该文件夹放置在系统路径下。但是我较旧的（并且被遗忘的）安装需要 php_pdo.dll 的 PHP 5.1.2 也在路径中（prog 文件），并且它的 php.exe 正在响应命令行 PHP 语句。所以我让旧的 EXE 在没有 php_pdo.dll 的新文件夹结构中运行。

3 种可能的解决方案： 1\. 删除旧版本的 PHP。2.更改php的默认程序（指向xampp版本）。3\. 为您正在使用的项目明确指定正确的 php。

我认为其中任何一个都应该工作，但由于我不需要旧版本的 PHP，所以我只测试了第一个。希望这会给你一个地方，至少。

# php - 将多个值传递给 jQuery

> ID：15657856
> 
> 赞同：3
> 
> 时间：2013-03-27T11:35:32.210
> 
> 标签：php, jquery

我为每个循环构建了一个从数据库中拉回几行的循环。它拉出的每一行都有一个链接，以及一个隐藏的输入框，其值为 posting_id。此链接在某种程度上类似于 facebook 上的点赞按钮。隐藏的输入框只存储了posting_id。当您单击“喜欢”链接时，它会将 posting_id 发送到一个 jQuery 页面并 ping 回一个名为 community 的页面，告诉它用户已经“喜欢”了该帖子。

**这就是问题所在**

我拉了几行，当您单击“喜欢”按钮时，似乎只有被拉的第一行实际上正在将数据发送到 jQuery 页面。如果我单击除顶部按钮之外的任何其他“喜欢”按钮，它将根本不起作用。

**jQuery 页面**

```
$('.bump_link').click(function(){ 
    var posting_id = $('.posting_id').val();    
    $.post("community.php", {
        posting_id: posting_id
    });
    alert(posting_id);
    $(this).toggleClass("bumped"); 
}); 
```

**Foreach 循环**

```
foreach ($result as $value) {
    $group_postings .= '
    <input type="text" class="posting_id" value="'.$value['posting_id'].'"> 
    <div id="bump_icon" class="bump_link"></div>
    <span id="counter"></span>
    ';
} 
```

我希望我已经把这个问题说清楚了，它曾经而且很难解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:47:02.677

问题是您正在使用一个类来获取posting_id，因为所有隐藏字段都具有相同的类，无论您单击什么按钮，都只会传递第一个元素值。

我建议使用这个 html，没有隐藏输入，将值作为数据属性传递

```
<div id="bump_icon" class="bump_link" data-postid="'.$value['posting_id'].'"> 
```

并在这个js中，从数据属性中获取发布ID

```
$('.bump_link').click(function(){ 
   var posting_id = $(this).data('postid'); // get the posting id from data attribute
   $.post("community.php", {
       posting_id: posting_id
   });
   alert(posting_id);
   $(this).toggleClass("bumped"); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:42:05.920

你的问题是这一行：

```
var posting_id = $('.posting_id').val(); 
```

这将每次返回第一个 posting_id 值，而不是与您单击的 bump_link 关联的值。

有很多方法可以解决这个问题。一种方法是使用 .prev() 选择前一个元素：

```
var posting_id = $(this).prev('.posting_id').val(); 
```

这会从当前 div 中选择上一个 posting_id 元素。这取决于 posting_id 元素位于关联的 bump_link div 之前的事实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T11:38:34.367

您正在调用`val()`选择器，您可能会返回一个以上的元素，但`val()`只会给您一个（第一个）元素的值。您可以使用[map()](http://api.jquery.com/jQuery.map/)获取具有类的所有输入值`posting_id`

```
var posting_id_values = $('.posting_id').map(function(){
       return this.value;
}).get().join(','); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T11:41:41.707

如果您只想发送`posting_id`点击按钮的，您可以像这样更改您的 PHP/HTML 代码：

```
foreach ($result as $value) {
    $group_postings .= '
    <div id="bump_icon" class="bump_link">
    <input type="text" class="posting_id" value="'.$value['posting_id'].'"> 
    </div>
    <span id="counter"></span>
    ';
} 
```

你的JS代码是这样的：

```
$('.bump_link').click(function(){ 
    var posting_id = $(this).find('.posting_id').val();    
    $.post("community.php", {
        posting_id: posting_id
    });
    alert(posting_id);
    $(this).toggleClass("bumped"); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T11:43:11.077

use `on` delegated event since you are adding the content dynamically and

```
$(this).prev('.posting_id') // to get the posting data value

$(document).on('click','.bump_link',function(){ 
  var posting_id = $(this).prev('.posting_id').val(); //<-- use $(this)  reference 
  $.post("community.php", {
      posting_id: posting_id
  });
 alert(posting_id);
 $(this).toggleClass("bumped"); 
}); 
```

# javascript - $.fn.function 的调用函数

> ID：15657858
> 
> 赞同：5
> 
> 时间：2013-03-27T11:35:49.713
> 
> 标签：javascript, jquery

问题如下。有一个函数自定义jquery函数，里面有另一个函数fe：

```
$.fn.slides = function(args){

 function foo(args){

  }

} 
```

我现在的问题是：我怎样才能调用方法 foo.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T11:38:55.227

`foo`不是一种方法。这是一个本地函数。除非您修改该函数以公开它，否则无法从定义它的函数外部访问它。

例如（我*不*建议创建全局变量，您应该将函数附加到其他对象）：

```
$.fn.slides = function(args){
   function foo(args){ }
   window.foo = foo;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:38:22.720

您不能从函数外部调用它，除非您返回一个`foo`附加到它的对象，如下所示：

```
$.fn.slides = function(args){

    this.foo = function (args){

    }

    return this;
}

$('blah').slides(args).foo(args); 
```

在函数内部，您可以将其用作常规函数：

```
$.fn.slides = function(args) {

    function foo(args) {

    }

    foo(args);
} 
```

# sql - 获取相关产品表中没有的所有相关产品？

> ID：15657859
> 
> 赞同：0
> 
> 时间：2013-03-27T11:35:57.060
> 
> 标签：sql, sql-server, sql-server-2008

假设我有 Product 和 RelatedProduct 表，

```
Product
------
ID
Name

RelatedProduct
--------------
ID
ProductID
RelatedProductID
RelatedProductName 
```

现在我有一个@ProductID 参数。我需要获取尚未添加到 RelatedProduct 表中的所有产品。所以，如果我有

```
Product
-----------
ID     Name
 1      A1
 2      A2
 3      A3
 4      A4

RelatedProduct
-----------------------------------------
ID     Name   ProductID    RelatedProductID
 1      B1       2             1
 2      B2       4             3
 3      B3       2             4 
```

如果@ProductID =1，那么我需要产品的 2、3、4。如果@ProductID = 2，那么我需要 Product 的 3。如果 @ProductID = 4，那么我需要 Product 的 1,2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:42:35.343

```
select *
from    Product
where   id not in
  (select RelatedProductID
   from   RelatedProduct
   where  productID = @productID) 
```

NOTE: if product 1 is related to product 2, is product 2 then also related to product 1? Your examples explicitly say no, but often this kind of relationship is bi-directional.

# java - 将 HttpSession 焊接到会话范围的 bean 中为空

> ID：15657861
> 
> 赞同：1
> 
> 时间：2013-03-27T11:36:02.033
> 
> 标签：java, gwt, jetty, cdi, weld

我正在使用 Weld 2.0 在 Jetty 6.1 上运行 GWT 应用程序。得到下一个代码：

```
 @SessionScoped
    public class SessionContext implements Serializable {

        @Inject
        private HttpSession httpSession;

        public SessionContext() {
            super();
            //at this point httpSession is null
        }
    } 
```

我错过了什么，为什么没有注入 HttpSession？参考说`Injecting the HttpSession will force the session to be created.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:38:10.020

改变定义

```
public SessionContext() {
        super();
        //at this point httpSession is null
} 
```

至

```
public SessionContext(HttpSession httpSession) {
        super();
        this.httpSession = httpSession;
        //check session here
} 
```

也使用构造函数注入

否则为`httpSession`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T11:00:58.370

It's better to use `@PostConstruct` to annotate some other method, [here](http://docs.oracle.com/javaee/6/tutorial/doc/gmgkd.html) you have :

> Initializing a managed bean specifies the lifecycle callback method that the CDI framework should call after dependency injection but before the class is put into service.

This is exactly the place where your injections are done but no code has been invoked.

like this :

```
@PostConstruct
public void doMyStuff() {
  //feel free to access your injections here they are not null!
} 
```

# java - JVM初始化错误

> ID：15657874
> 
> 赞同：2
> 
> 时间：2013-03-27T11:36:56.540
> 
> 标签：java, performance, memory-management

我今天遇到了一个关于 JVM 初始化的奇怪问题。

我在两台不同的电脑上运行相同的 jar 打开命令，两台电脑都有相同的 java 版本，都是 32 位。

```
java version "1.7.0_17"
Java(TM) SE Runtime Environment (build 1.7.0_17-b02)
Java HotSpot(TM) Client VM (build 23.7-b01, mixed mode, sharing) 
```

一台PC具有以下配置

Windoex XP Service Pack 2 Amd Athelon 处理器 7750 双核 2 GB DDR2 RAM

如果我在 XP 机器上运行以下命令

```
java -Xms1200m -Xmx1500m -XX:MinHeapFreeRatio=40 -XX:MaxHeapFreeRatio=70 -jar my.jar 
```

尽管这台机器只有 2GB 的物理 RAM，但 VM 可以成功打开我的程序而没有错误。

现在另一台 PC 的配置遵循 Windows Vista Home Edition Intel P4 core 2 Duo 4 GB of DDR2 Ram，当我点击我的计算机属性时，它显示了 4 GB RAM。

当我在这台机器上运行上面的命令时，它给了我一条错误消息

“初始化过程中发生错误”

如果我尝试使用 -Xmx > 1200 运行任何命令，那么它会给我错误。

**我不明白为什么后面的机器会出现 VM 初始化错误，尽管它有双倍 RAM，然后是第一个？**

# java - 这 ？布尔禅运算符

> ID：15657876
> 
> 赞同：0
> 
> 时间：2013-03-27T11:36:58.790
> 
> 标签：java, boolean, boolean-operations

我以前从未使用过`?`运算符，我正在尝试弄清楚它是如何工作的。

我已经阅读了无数页，并决定为自己尝试。

我有以下声明：

```
 getSelection().equalsIgnoreCase("Måned") ? calendarView.currentlyViewing.set(Calendar.Year) : showPopup(); 
```

因此，据我所知，如果左侧（布尔值）为真，它将设置我的 calendarView.to 年份，如果不是（getSelection 不等于 måned），它将调用该方法`showPopup();`

但是当我在eclipse中输入这个时，我得到一个语法错误。

有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T11:38:47.650

您正在尝试使用[条件`? :`运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)来决定要执行的*语句。*这不是它的意图。条件运算符不能用作语句 - 它只是选择使用哪个*表达式*作为整体结果。

所以这很好：

```
foo(condition ? nonVoidMethod1() : nonVoidMethod2()); 
```

但这不是：

```
condition ? voidMethod1() : voidMethod2(); 
```

你应该在`if`这里使用一个语句：

```
if (getSelection().equalsIgnoreCase("Måned")) {
    calendarView.currentlyViewing.set(Calendar.Year);
} else {
    showPopup();
} 
```

# ruby-on-rails-3 - 用于 Rails 3.2.13 的主干.js

> ID：15657879
> 
> 赞同：0
> 
> 时间：2013-03-27T11:37:05.883
> 
> 标签：ruby-on-rails-3, backbone.js, ruby-on-rails-3.2, ruby-2.0, backbone.js-collections

我正在使用 rails 3.2.13 和 ruby​​ 1.9.3

我尝试使用 gem "rails-backbone", '0.9.10' 但它不能按照 REST 正常工作

是否需要为 rails 3.2.13 完成任何其他更改？

我使用脚手架生成 crud，但 REST api 不适用于 crud 操作

# php - Symfony2：如何从 SAME Bundle 中的多个现有数据库生成实体？

> ID：15657881
> 
> 赞同：8
> 
> 时间：2013-03-27T11:37:13.143
> 
> 标签：php, symfony, doctrine

我的目标是**访问 One Project Bundle 中的多个数据库**。

我通读了 symfony2 文档并设法做到了以下几点：

1.  **[为不同的Bundle配置多个连接](http://symfony.com/doc/master/cookbook/doctrine/multiple_entity_managers.html)**
2.  **[使用以下方法从一个现有数据库生成实体](http://symfony.com/doc/master/cookbook/doctrine/reverse_engineering.html)**：

    ```
    php app/console doctrine:mapping:import AcmeBlogBundle annotation
    php app/console doctrine:generate:entities AcmeBlogBundle 
    ```

但是我找不到**从 SAME Bundle 中的多个现有数据库生成实体的**方法，以便我可以访问一个 Bundle 中的多个数据库。有任何想法吗？

PS我对Doctrine不熟悉。所以实际上，如果有办法在没有 Doctrine 的情况下做 Symfony2，我也将不胜感激。

更新＃1：

[Cerad 的回答](https://stackoverflow.com/a/15660945/242058)非常接近。然而，一个问题还没有解决。由于我在不同的数据库中有一些相同的表名，最好将它们组织到实体文件夹中的单独文件夹中。[我已经检查](https://stackoverflow.com/questions/13629959/generate-entities-with-doctrine-into-separate-namespace)过类似的[帖子](https://stackoverflow.com/questions/13765785/doctrine-generate-entities-namespace-issue)。但是解决方案对我不起作用。他们的解决方案只是将所有实体直接放入实体文件夹，忽略 config.yml 中指定的 dir 选项。这个问题有解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:08:14.990

第一步是配置多个实体管理器（不是连接），每个数据库一个。然后，您可以在学说命令上使用 --em 选项来指定要使用的实体管理器。

```
php app/console doctrine:mapping:import "AcmeBlogBundle" annotation --em=name1
php app/console doctrine:mapping:import "AcmeBlogBundle" annotation --em=name2 
```

请注意，您将无法使用教义直接查询（连接）多个数据库。至少不是很容易。只要您计划一次将查询限制为一个数据库，那么您就可以了。

这实际上是一个有点高级的话题。您可能想花一些时间阅读学说文档。可能也更容易开始使用一个数据库，然后再拆分。

# c++ - cpp中的奇怪链接器错误

> ID：15657890
> 
> 赞同：1
> 
> 时间：2013-03-27T11:37:45.350
> 
> 标签：c++, windows, linker-errors

当我将以下行添加到我的代码中时：

```
std::string sFrameTag 
```

我收到以下链接器错误：

```
Error   34  error LNK2005: "public: __thiscall std::basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >::~basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >(void)" (??1?$basic_string@DU?
$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ) already defined in 
VFPAnalyzerApi.lib(VFPEvaluation.obj)   msvcprtd.lib 
```

我确定`sFrameTag`只定义了一次，我尝试使用其他名称来确定这个变量。我有以下内容：`stdio.h`, `time.h`, `string`.

有人可以指导它导致此错误的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:11:45.873

当我尝试静态包含所有需要的运行时库时，我也遇到了类似的错误。请检查当您尝试导入与/MD 选项静态链接的库时，您还需要使用/MD。

谢谢尼拉吉·拉蒂

# html - 在一个 HTML 页面上使用多种语言

> ID：15657893
> 
> 赞同：0
> 
> 时间：2013-03-27T11:37:54.760
> 
> 标签：html, multilingual, html-encode

我的简单问题是，如何在一个 HTML 页面中使用多种语言？

就像是

```
<div>
  <p>This text is in English</p>
</div>

<div>
 <p>This text in Japanese</p>
</div>

<div>
 <p>This text in French</p>
</div> 
```

这是一个语言选择器。该页面是纯 HTML。

![在此处输入图像描述](../Images/cc0e79c3739abf7e4481ade2bafb214e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:08:42.040

就像您使用一种语言一样。您只是受限于 HTML 文档具有一种字符编码，因此您不能使用例如 ISO-8859-1 编码用于法语文本和某些 JIS 编码用于日语文本，就像您编写两个单独的页面一样。

结论是，如果可能，您通常应该使用 UTF-8，如果没有，则使用字符引用等变通方法。

您可以并且应该使用该`lang`属性来指示每个部分的语言。但这对于基本功能来说不是必需的，而且它实际上只是一个好的创作习惯，而不是其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:45:20.590

是的。有可能的。您可以在 Unicode 中使用其他语言文本。在此处查看我为您创建的示例：

代码：

欢迎

नमस्कार

வணக்கம்

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:46:57.770

只需将 UTF-8 用于您的页面编码，就可以了。浏览器自然会这样做；Unicode（其中 UTF-8 是一种表示形式）就是为此而发明的。

# django - Django：从无线电选择创建通用链接

> ID：15657896
> 
> 赞同：0
> 
> 时间：2013-03-27T11:38:15.230
> 
> 标签：django, django-templates

我有一个 index.html 显示我拥有的所有数据库。现在我想提供一些选项来处理数据库（例如编辑、删除……）。所以我想创建一个带有数据库 ID 和一些用于重定向正确 url 的链接的无线电选择。

我的目标：点击请求的动作将用户带到正确的网址。

我希望，这是可以理解的 :) 任何人都可以帮助我，拜托。

// 已编辑

```
<script>
function edit_db(id){
    window.location.href="/edit/"+id
}

function delete_db(id){
    window.location.href="/"+id+"/delete/"
}    
</script>

<form method="post" action="">
 <ul>
    <table>
        <tr>
            <th>&nbsp;</th>
            <th>Database</th>
            <th>expireDate</th>
        </tr>
        {% for db in resources %}
        <tr>
             <td>
                <input type="radio" name="id" id="{{db.id}}" value="{{db.id}}">
             </td>
            <td>{{db.name}}</td>
            <td>{{db.expireDate}}</td>
        </tr>
        {% endfor %}
    </table>

    <input type="submit" class="submitButton" onclick="edit_db({{ db.id }})" value="{% trans "Edit database"%}" />
    <input type="submit" class="submitButton" onclick="delete_db({{ db.id }})" value="{% trans "Delete database"%}" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:48:47.023

我建议您使用 jQuery 左右来完成此操作。

但是，您需要先调整您的 id，因为 id/class 不能以 html 中的数字开头，因此请使用`id="database_{{ db.id }}"`

我不知道有什么`{% show_task_link "./{{db.id}}/edit" _("Edit database") %}`作用，但请确保它有一个 id，以便您可以通过 jQuery 访问它，类似于：

```
<script type="text/javascript>
$(function(){
   $('.db').click(function(){
      if($(this).is(':checked')){
          $('#id_for_your_link').html() // put your link in html, add the id through $(this).val()
      }
   }
})
</script> 
```

注意：我没有测试过 jQuery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:59:17.960

```
<script>
function edit_db(id){
    window.location.href="/edit/"+id
}

function delete_db(id){
    window.location.href="/"+id+"/delete/"
}    
</script>

<form method="post" action="">
 <ul>
    <table>
        <tr>
            <th>&nbsp;</th>
            <th>Database</th>
            <th>expireDate</th>
        </tr>
        {% for db in resources %}
        <tr>
             <td>
                <input type="radio" name="id" id="{{db.id}}" value="{{db.id}}">
             </td>
            <td>{{db.name}}</td>
            <td>{{db.expireDate}}</td>
            <td>
                <input type="submit" class="submitButton" onclick="edit_db({{ db.id }})" value="{% trans "Edit database"%}" />
                <input type="submit" class="submitButton" onclick="delete_db({{ db.id }})" value="{% trans "Delete database"%}" />
            </td>
        </tr>
        {% endfor %}
    </table>

</form> 
```

# ruby - 在 ruby selenium 中捕获超时事件

> ID：15657897
> 
> 赞同：1
> 
> 时间：2013-03-27T11:38:16.603
> 
> 标签：ruby, testing, selenium, jenkins, selenium-webdriver

有什么方法可以捕获用 Ruby 编写的 selenium 中的所有超时错误事件？

我正在用 selenium 编写 jenkins，但不确定终止构建任务的最佳方法 btw 步骤。到目前为止我发现的方法是将 exec("exit 1") 放入 ruby​​ 文件中。但是，我不知道什么时候放这个命令。所以，我想捕获所有超时错误并触发此事件。

如果有更好的方法，请多多指教！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:47:11.390

以下是您的问题的一些提示：

```
begin

    wait = Selenium::WebDriver::Wait.new(:timeout => 10) # seconds
    wait.until { driver.title.include? "page title" }
    driver.find_element(:xpath, ".//*[@id='subTabHeaders']/div[3]")}.click

rescue Selenium::WebDriver::Error::TimeOutError

    exit(1)

end 
```

# java - 预热请求究竟是如何工作的？

> ID：15657900
> 
> 赞同：1
> 
> 时间：2013-03-27T11:38:27.320
> 
> 标签：java, google-app-engine

我们观察到了一种奇怪的加载请求的行为，我们希望分享这些请求以获得准确的答案。

我们从引入之日起就启用了预热请求处理程序，因为加载请求需要 15 到 25 秒。

我们一直使用旧的“始终在线”功能，然后在新计费系统下将“应用程序设置”中的“空闲实例”滑块配置为 1-自动（1 个预留实例）。

一切运行良好，因为大多数（不是全部，但已记录）加载请求已正确路由到 / *ah* /warmup。

我们的应用程序仅在意大利的工作时间使用，因此单个预留实例在夜间和周末浪费金钱，因此我们决定在两周前尝试将“空闲实例”滑块设置移动到自动-自动。

账单减少了，但在那之后*所有*的加载请求都是面向前端的请求（或者至少是任务队列/cron 请求）。在我们日志中的那两周内， /_ah/warmup*完全*消失了。

两周后，我们决定将滑块设置恢复为 1-Automatic，下一个加载请求是在 /_ah/warmup 上。现在我们被困在 1-Automatic 上。

我们在官方文档中搜索了这种行为，但没有发现任何相关信息。

我们发现只有这个问题[Reserved instances and warmup requests not working](https://stackoverflow.com/questions/10875460/reserved-instances-and-warmup-requests-not-working)说明了同样的事情。

因此，当“空闲实例”设置为自动-自动时，/_ah/warmup servlet 应该完全没用？还是我们的应用程序有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:20:55.437

是的，仅当您有空闲实例时才进行热身。如果您的一个空闲实例收到单个请求，无论是来自客户端还是来自 cron 作业，app-engine 将立即调用 /_ah/warmup 以启动并维护一个空闲实例。

如果您没有空闲实例，**或者设置了延迟条**，appengine 将不会发送预热请求。如果您处于高峰期，应用引擎也会跳过热身。

至于为什么滑块卡住，我不确定，也许你可以禁用应用程序并重新启用它。

希望这可以帮助。

# java - 将项目添加到 GUI jCombo 框

> ID：15657901
> 
> 赞同：1
> 
> 时间：2013-03-27T11:38:29.120
> 
> 标签：java, swing, observer-pattern, propertychangelistener

我有一个带有模型和 GUI 的 Java 程序。在我的框架（那个`implements Observer`）上，我放了一个 jcombobox，其中包含我的模型（那个`extends Observable`）的注册列表。

当我单击按钮添加注册时，我的模型中的列表发生了变化。而且比我做的

```
setChanged(); 
notifyObservers(); 
```

在我的更新方法中，我想更改 jcombobox 的值。我尝试了一个`repaint()`或类似的东西，但我的组合框没有改变。我确定我会使用我的更新方法，但我不知道如何更改 jcombobox。

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:05:13.630

您的`update()`实现应该获得对组合模型的引用，并根据需要设置所选项目或添加新项目。[此处](https://stackoverflow.com/a/10523401/230513)`PropertyChangeEvent`所示的 A可能是一种替代方法，因为它可以包含旧值和新值。

# c++ - 如何在 Linux 上使用带有 EG20T 芯片组的 Intel Atom Q7 模块上的 CAN-Bus？

> ID：15657910
> 
> 赞同：0
> 
> 时间：2013-03-27T11:38:50.043
> 
> 标签：c++, c, linux, linux-device-driver, can-bus

我想在带有 EG20T 芯片组的 Intel Q7 模块上使用 CAN-Bus 接口。我让它在 Windows 上工作，但现在我必须让它在 Linux 上工作，但我几乎找不到任何信息。

我只需要知道如何读取、写入消息、启动、停止和设置 CAN 总线的波特率。

到目前为止，我发现了这个：[http](http://cateee.net/lkddb/web-lkddb/PCH_CAN.html) : //cateee.net/lkddb/web-lkddb/PCH_CAN.html 和一些关于 can4linux 和 socketCan 的评论用于 shell 使用。

但我实际上需要知道如何在 C 或 C++ 程序中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:04:31.177

看起来该驱动程序是 SocketCan 驱动程序。只需编译并加载模块，然后您的设备就会看起来像一个网络接口。

[http://www.brownhat.org/docs/socketcan/llcf-api.html](http://www.brownhat.org/docs/socketcan/llcf-api.html)

此链接包含有关如何发送消息等的信息。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T07:01:19.277

在此处查看有关 socketcan 和 linux 实现的更多信息： [socketcan](https://www.kernel.org/doc/Documentation/networking/can.txt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T08:39:40.887

现代 Linux 发行版提供现货供应的 SocketCAN 驱动程序。所以不需要自己编译驱动。

SocketCAN 项目提供了用于发送/接收 CAN 帧和其他相关任务的工具。请查看此存储库：[https ://github.com/linux-can/can-utils](https://github.com/linux-can/can-utils)

还有一个中央 SocketCAN 专用 wiki：[http ://elinux.org/CAN_Bus](http://elinux.org/CAN_Bus)

# android - 动画文件夹不来

> ID：15657915
> 
> 赞同：4
> 
> 时间：2013-03-27T11:39:00.733
> 
> 标签：android, android-layout, android-resources

在我的 android 项目中，我需要创建一个“动画”文件夹。大多数人都知道，anim 文件夹将用于存储动画。

1.  如何创建文件夹？
2.  动画文件夹属于哪里？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T11:42:06.810

You need to create a new folder right click on res folder create new folder name it anim. And you can put your animation xmls in it.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T11:42:13.627

In the Android application default folder structure there is no Anim folder. If you want Anim folder, you should be create it in to the application.

# url - Magento 生成随机 URL

> ID：15657917
> 
> 赞同：0
> 
> 时间：2013-03-27T11:39:05.787
> 
> 标签：url, url-rewriting, http-status-code-404, magento-1.7

我正在使用 Magento 1.7.0.2。

我在系统生成随机 url 时遇到问题，这些随机 url 在谷歌抓取网站时会生成 404。

它们具有不寻常的格式，我不知道为什么会生成它们。

```
store_id/2/entity_id/148/entity_type/catalog 
```

我以前从未遇到过这个问题 - 有人有任何想法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:07:55.960

这是由 aheadWorks 社交插件引起的，这给我们带来了很多 SEO 问题，很高兴我们现在已经修复了。

# java - 序列化类中的列表

> ID：15657919
> 
> 赞同：0
> 
> 时间：2013-03-27T11:39:15.070
> 
> 标签：java, serialization

我是序列化世界的新手，我有一个可能重复的查询，但请帮助我。我有一个名为 ABC 的类，它由一个列表组成。我想序列化列表，以便我可以将该列表传输到网络。下面是我的课。。

```
Public class Abc {  
    public static void main(String[] args) {

        List list = new ArrayList();
        list.add(1);
        list.add(1);
        list.add(2);
        list.add(3);
        list.add(3);
        list.add(3);
}
} 
```

我应该选择可序列化或可外部化的接口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:49:39.040

您定义的列表是 main 方法中的局部变量。局部变量没有序列化。如果您需要对列表进行序列化，则需要将其定义为 ABC 类的实例变量，并通过实现 Serializable“接口”将 ABC 类定义为可序列化。

```
public class Abc implements Serializable {
    private List<Integer> list = new ArrayList<Integer>();
    public Abc() {
        list.add(1);
        list.add(1);
        list.add(2);
        list.add(3);
        list.add(3);
        list.add(3);
    }
} 
```

这样，Abc 类可以被序列化，通过网络发送，然后正确反序列化。请注意，List/ArrayList 是 java 集合的一部分，通常是“可序列化的”。对于自定义类，它们还需要实现 Serializable“接口”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:51:34.093

如果您的客户端是 Java 客户端，您只需将您的类标记为`implements Serializable`. 否则，您必须使用 XML 或 JSON 来编组您的数据。有许多用于编组/解组的库。对于 XML，您可以使用 JAXB 或 XStream，对于 JSON，您可以使用 Jackson、XStream 和更多库。

# c# - Telerik RadScheduler - 从服务器端获取选定的范围？

> ID：15657920
> 
> 赞同：1
> 
> 时间：2013-03-27T11:39:20.890
> 
> 标签：c#, .net, telerik, server-side

当您在 RadScheduler 控件中选择时间范围并右键单击时，您将获得 TimeSlot 上下文菜单 - 但是当您从该菜单中选择一个项目时引发的事件只有一个时间段，其持续时间是您可以在当前视图中选择（周、日、月）。

那么如何在服务器端右键单击获得选定的时间范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T04:59:39.807

Unfortunately there appears to be a bug in the RadScheduler and its handling of the selected timeslots when they're sent server-side - as you've noticed, only one of the timeslots is sent. This is documented in Telerik's Public Issue Tracker [here](http://www.telerik.com/support/pits.aspx#/public/aspnet-ajax/11768). The bug has been around a while and probably hasn't been addressed yet because so few people seem to care - it's only gotten three votes, so get over there and vote.

The good news is that there's a workaround. I'd mentioned it in my comment and thought I'd take a further look. You can trigger a custom Ajax request from the client side when the user selects the range of timeslots, right-clicks, and triggers your client-side handler.

Here's the relevant code in your aspx page, with the Javascript function for the RadScheduler control to use for the OnClientTimeSlotContextMenuItemClicking event. Note the RadAjaxManager object has a custom handler for its OnAjaxRequest property; this will have to be defined in the codebehind. Also, I found it necessary to include the Javascript inside a RadCodeBlock, as the function is accessing the RadAjaxManager object.

```
<telerik:RadAjaxManager ID="RadAjaxManager1" runat="server"
    OnAjaxRequest="RadAjaxManager1_AjaxRequest">
</telerik:RadAjaxManager>

<telerik:RadCodeBlock ID="RadCodeBlock1" runat="server">
    <script type="text/javascript">
        function OnClientTimeSlotContextMenuItemClicking(sender, args) {

            var selectedSlots = sender.get_selectedSlots();
            var firstSlotFromSelection = selectedSlots[0];
            var lastSlotFromSelection = selectedSlots[selectedSlots.length - 1];

            var customArgs = "TimeSlotMenuItemClicked," + firstSlotFromSelection.get_endTime() + "," +
                lastSlotFromSelection.get_endTime();

            // for testing purposes...
            //  alert(customArgs);

            $find("<%= RadAjaxManager1.ClientID %>").ajaxRequest(customArgs);
        }
    </script>
</telerik:RadCodeBlock> 
```

What I'm doing with the **customArgs** field in the Javascript code there is putting together all the data we'll need on the server side, as there's only one argument allowed; the workaround for this is to assemble the data we need into an object in some suitable format that we can successfully parse when it arrives in the server method. Telerik mentions this workaround [here](http://www.telerik.com/help/aspnet-ajax/ajax-pass-more-arguments.html) if you're interested, but I've also seen this kind of technique in other places.

Here's the OnAjaxRequest handler I used in my codebehind. I put together a separate method to parse the date/time out of the string and get the timezone right.

```
protected void RadAjaxManager1_AjaxRequest(object sender, AjaxRequestEventArgs e)
{
    String[] argArray = e.Argument.Split(",".ToCharArray());
    if (argArray.Length > 2 && argArray[0] == "TimeSlotMenuItemClicked")
    {
        DateTime dtStart = GetDateTimeFromArgument(argArray[1]);
        DateTime dtEnd = GetDateTimeFromArgument(argArray[2]);

        // Starting date/time is the end of the first timeslot; adjust to arrive at the beginning
        TimeSpan tsSlotLength = new TimeSpan(0, RadScheduler1.MinutesPerRow, 0);
        dtStart -= tsSlotLength;

        // Do what we need to do with the start/end now
    }
}    

/// <summary>
/// Date/Time format will look like this:  "Sat Apr 06 2013 10:30:00 GMT-0700 (US Mountain Standard Time)"
/// Turn this from a string into a date.
/// </summary>
/// <param name="arg"></param>
/// <returns></returns>
private DateTime GetDateTimeFromArgument(string arg)
{
    // Extract the timezone qualifier and put together a string we can parse.
    string formattedArg = string.Format("{0} {1}:{2}", 
        arg.Substring(0, 24), arg.Substring(28, 3), arg.Substring(31, 2));

    return DateTime.ParseExact(formattedArg,
        "ddd MMM dd yyyy HH:mm:ss zzz",
        CultureInfo.InvariantCulture);
} 
```

# linux - 在 Linux 上查看挂起的延迟卸载

> ID：15657921
> 
> 赞同：2
> 
> 时间：2013-03-27T11:39:25.170
> 
> 标签：linux

MNT_DETACH 功能已添加到 Linux 2.4.11。

在您拥有许多系统管理员的大型环境中，可能会有超过 1 个管理员执行惰性 umount 命令。

您如何查看从“umount -l /mountpoint”命令执行的待处理的惰性卸载命令。内存中没有进程显示此信息，日志文件中也没有任何内容。到目前为止，我也无法在 /proc 或 /sys 中找到任何信息。

将 /etc/fstab 与 /etc/mtab 进行比较不是一种可靠的方法。

此信息必须存储在系统的某个位置，SystemTap 是否可以通过数据结构公开惰性卸载数据？

# virtualization - 我应该在生产服务器上使用 VirtualBox 吗？

> ID：15657922
> 
> 赞同：1
> 
> 时间：2013-03-27T11:39:33.080
> 
> 标签：virtualization, virtualbox, vagrant

我刚刚完成了我公司生产的产品的流浪盒。我需要它，因为我们在不同的操作系统上运行相同的产品。我想在虚拟机内服务站点，我有问题：

1.  我在正确的道路上吗？虚拟机可以用作生产服务器吗？

如果你说是：

2.  我应该如何保持 virtualbox 运行？如果发生崩溃，是否有任何脚本或某事可以重新启动？
3.  如果有人不小心发出“vagrant destroy”命令会怎样？如果我不想丢失我的数据库和用户上传的文件，我应该怎么做？
4.  我们有一些在每个月初运行的导入脚本。有时他们使用 7gb 内存（运行 1500 行带有大量异步实例的 mysql 代码）。在 VirtualBox 中运行会不会很危险？
5.  有没有关于此的案例研究博客文章？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T22:40:03.570

Vagrant主要用于开发环境。我个人推荐使用 Type 1 hypervisor（Bare metal），VirtualBox 是桌面虚拟化工具（Type 2，运行在传统操作系统之上），不推荐用于生产。

AWS 没问题，虚拟机作为 Xen 来宾运行，Xen 在裸机上；-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:01:28.023

我不会。

w/ Vagrant + Virtualbox 是开发实例。我会查看 Amazon Web Services 以将您的项目实际部署到野外。

# sql - 选择查询中的依赖列

> ID：15657923
> 
> 赞同：3
> 
> 时间：2013-03-27T11:39:36.897
> 
> 标签：sql, sql-server, select

我有一个表*Employee*：

```
+-------+---------+-------------+
| Empid |  Name   |   Mailid    |
+-------+---------+-------------+
|   001 | abc def | abc@xyz.com |
|   002 | hij klm | hij@xyz.com |
|   003 | nop qrs | nop@xyz.com |
+-------+---------+-------------+ 
```

我可以查询它：

```
select 
    Empid, 
    Left(Name,3),
    'hardcoded string',
    Mailid,
    Replace(Mailid,'@xyz.com','') 
from Employee; 
```

如何证明上述查询直接或间接引用了员工中的特定列？例如：

```
col1 Empid
col2 Name
col3 N/A
col4 mailid
col5 mailid 
```

请帮助任何指向实用程序的指针来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:02:34.290

要进行这种分析，您需要一个完整的 (T-)SQL 解析器，它可以访问数据库的当前结构（提示：列表达式可以变得任意复杂，包括子选择和一切）。

更新：我在下面的查询计划的想法不起作用。虽然该计划很好地跟踪列引用，但它没有以正确的顺序显示输出列。啊！我目前看不到如何治愈，属性中没有序数。所以，对不起，不起作用。我还是把它留给参考，也许其他人有基于此的想法。

* * *

想到的一件事是查看查询计划。您必须解析 XML 计划以查看某个列的值的来源。虽然这可能比直接查看 SQL 更简单，但它仍然不是微不足道的。查询计划也可能变得相当复杂。但是为了说明原理，让我们看一下 AdventureWorks DB 上的类似查询：

```
SELECT 
  rowguid, 
  Left(JobTitle,3),
  'hardcoded string',
  BirthDate,
  Replace(BirthDate,'@xyz.com','') 
FROM 
  HumanResources.Employee 
```

此语句的 XML 查询计划如下所示：

```
<?xml version="1.0" encoding="utf-16"?>
<ShowPlanXML xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Version="1.2" Build="11.0.3128.0" xmlns="http://schemas.microsoft.com/sqlserver/2004/07/showplan">
  <BatchSequence>
    <Batch>
      <Statements>
        <StmtSimple StatementCompId="1" StatementEstRows="290" StatementId="1" StatementOptmLevel="TRIVIAL" StatementSubTreeCost="0.00807444" StatementText="Select rowguid, Left(JobTitle,3),'hardcoded string',BirthDate,Replace(BirthDate,'@xyz.com','') FROM HumanResources.Employee" StatementType="SELECT" QueryHash="0x5F035E11344539B" QueryPlanHash="0x717B3D06C26C61ED" RetrievedFromCache="false">
          <StatementSetOptions ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" NUMERIC_ROUNDABORT="false" QUOTED_IDENTIFIER="true" />
          <QueryPlan CachedPlanSize="16" CompileTime="14" CompileCPU="12" CompileMemory="152">
            <MemoryGrantInfo SerialRequiredMemory="0" SerialDesiredMemory="0" />
            <OptimizerHardwareDependentProperties EstimatedAvailableMemoryGrant="418321" EstimatedPagesCached="104580" EstimatedAvailableDegreeOfParallelism="2" />
            <RelOp AvgRowSize="4045" EstimateCPU="2.9E-05" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row" EstimateRows="290" LogicalOp="Compute Scalar" NodeId="0" Parallel="false" PhysicalOp="Compute Scalar" EstimatedTotalSubtreeCost="0.00807444">
              <OutputList>
                <ColumnReference Database="[AdventureWorks2012]" Schema="[HumanResources]" Table="[Employee]" Column="BirthDate" />
                <ColumnReference Database="[AdventureWorks2012]" Schema="[HumanResources]" Table="[Employee]" Column="rowguid" />
                <ColumnReference Column="Expr1003" />
                <ColumnReference Column="Expr1004" />
                <ColumnReference Column="Expr1005" />
              </OutputList>
              <ComputeScalar>
                <DefinedValues>
                  <DefinedValue>
                    <ColumnReference Column="Expr1003" />
                    <ScalarOperator ScalarString="substring([AdventureWorks2012].[HumanResources].[Employee].[JobTitle],(1),(3))">
                      <Intrinsic FunctionName="substring">
                        <ScalarOperator>
                          <Identifier>
                            <ColumnReference Database="[AdventureWorks2012]" Schema="[HumanResources]" Table="[Employee]" Column="JobTitle" />
                          </Identifier>
                        </ScalarOperator>
                        <ScalarOperator>
                          <Const ConstValue="(1)" />
                        </ScalarOperator>
                        <ScalarOperator>
                          <Const ConstValue="(3)" />
                        </ScalarOperator>
                      </Intrinsic>
                    </ScalarOperator>
                  </DefinedValue>
                  <DefinedValue>
                    <ColumnReference Column="Expr1004" />
                    <ScalarOperator ScalarString="'hardcoded string'">
                      <Const ConstValue="'hardcoded string'" />
                    </ScalarOperator>
                  </DefinedValue>
                  <DefinedValue>
                    <ColumnReference Column="Expr1005" />
                    <ScalarOperator ScalarString="replace(CONVERT_IMPLICIT(varchar(40),[AdventureWorks2012].[HumanResources].[Employee].[BirthDate],121),'@xyz.com','')">
                      <Intrinsic FunctionName="replace">
                        <ScalarOperator>
                          <Convert DataType="varchar" Length="40" Style="121" Implicit="true">
                            <ScalarOperator>
                              <Identifier>
                                <ColumnReference Database="[AdventureWorks2012]" Schema="[HumanResources]" Table="[Employee]" Column="BirthDate" />
                              </Identifier>
                            </ScalarOperator>
                          </Convert>
                        </ScalarOperator>
                        <ScalarOperator>
                          <Const ConstValue="'@xyz.com'" />
                        </ScalarOperator>
                        <ScalarOperator>
                          <Const ConstValue="''" />
                        </ScalarOperator>
                      </Intrinsic>
                    </ScalarOperator>
                  </DefinedValue>
                </DefinedValues>
                <RelOp AvgRowSize="80" EstimateCPU="0.000476" EstimateIO="0.00756944" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row" EstimateRows="290" LogicalOp="Clustered Index Scan" NodeId="1" Parallel="false" PhysicalOp="Clustered Index Scan" EstimatedTotalSubtreeCost="0.00804544" TableCardinality="290">
                  <OutputList>
                    <ColumnReference Database="[AdventureWorks2012]" Schema="[HumanResources]" Table="[Employee]" Column="JobTitle" />
                    <ColumnReference Database="[AdventureWorks2012]" Schema="[HumanResources]" Table="[Employee]" Column="BirthDate" />
                    <ColumnReference Database="[AdventureWorks2012]" Schema="[HumanResources]" Table="[Employee]" Column="rowguid" />
                  </OutputList>
                  <IndexScan Ordered="false" ForcedIndex="false" ForceScan="false" NoExpandHint="false">
                    <DefinedValues>
                      <DefinedValue>
                        <ColumnReference Database="[AdventureWorks2012]" Schema="[HumanResources]" Table="[Employee]" Column="JobTitle" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[AdventureWorks2012]" Schema="[HumanResources]" Table="[Employee]" Column="BirthDate" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[AdventureWorks2012]" Schema="[HumanResources]" Table="[Employee]" Column="rowguid" />
                      </DefinedValue>
                    </DefinedValues>
                    <Object Database="[AdventureWorks2012]" Schema="[HumanResources]" Table="[Employee]" Index="[PK_Employee_BusinessEntityID]" IndexKind="Clustered" />
                  </IndexScan>
                </RelOp>
              </ComputeScalar>
            </RelOp>
          </QueryPlan>
        </StmtSimple>
      </Statements>
    </Batch>
  </BatchSequence>
</ShowPlanXML> 
```

在这里，SQL Server 已经完成了解析 SQL 并确定列值最终来自何处的所有艰苦工作（然后优化计划，但这在这里没有意义）。

第一个`<OutputList>`对应于 SELECT 中的列列表。它有 5 列引用。从它们的属性可以看出，其中两个直接对应于表列，而其他三个只是引用了一些任意命名的表达式。现在您可以搜索这些表达式（如果需要，递归），它们又具有其他列引用（或者没有，如果“Expr1004”仅引用一个常量）。

因此，由于您只需要查看计划的几个元素，因此您很有可能找到源列（请注意，给定的输出列可能有多个源列）。

要获取 XML 查询计划，只需执行

```
SET SHOWPLAN_XML ON
<your statement>
SET SHOWPLAN_XML OFF 
```

输出是计划（不执行语句 - 它只是估计的计划，但在这里并不重要）。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:43:55.560

像这样的东西？

```
Select Empid, Left(Name,3) as Name, 'hardcoded string' as [N/A], Mailid as mailid, Replace(Mailid,'@xyz.com','') as mailid2
from Employee 
```

# backbone.js - 在主干 js 中更新模型时更改事件未触发

> ID：15657924
> 
> 赞同：1
> 
> 时间：2013-03-27T11:39:37.440
> 
> 标签：backbone.js, backbone-events

我有一个使用 screenData 模型的名为 layerPanel 的视图。现在在 model.set 上，我从模型本身获取更新事件，但它在视图上不起作用。

**模型**

```
var screenData = Backbone.Model.extend({

 initialize  : function() {
    _.bindAll(this,"update");
    this.bind('change:vdata', this.update);
},

update: function() {
var obj = this.vdata;
    alert("update");
},

vdata:[{id : 0, title : "Welcome to Persieve 0"}]

}); 
```

**看法**

```
 var layerPanel = Backbone.View.extend({

            el: "#allLayers",
            model: new screenData(),

            initialize: function() {
                this.render();
            this.model.bind('change:vdata', this.render);
            },
  render: function() {
              this.template = _.template(LayersTpl, {splitData: this.model.vdata});
              this.$el.html(this.template);
              return this;
            }
        }); 
```

这是我在模型中设置值的方式。

```
 screendata = new screenData;
    var obj = screendata.vdata;
    obj[obj.length] = {id : $(".bullet").length, title : "Welcome to Persieve"};
    var tempData = [];
    for ( var index=0; index<obj.length; index++ ) {
    if ( obj[index]) {
        tempData.push( obj );
    }
    }
   obj = tempData;
   screendata.set({vdata:[obj]}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:43:22.950

该事件应该触发。但是您的渲染将无法工作，因为“this”上下文需要设置。

尝试：

```
this.model.bind('change:vdata', this.render, this); 
```

或者更好的是，使用listenTo 并且上下文是隐式的（+ 你可以很容易地清理this.remove()）

编辑。从您上面所做的编辑中，我可以看到您正在创建一个新的 screendata 实例。您创建的绑定用于不同的实例`model: new screenData()`。

如果要触发事件，则必须引用绑定对象并设置它。

如果所有模型设置都发生在实际模型中。称呼`this.set({vdata:[obj]});`

# facebook - Facebook 喜欢多语言页面

> ID：15657930
> 
> 赞同：2
> 
> 时间：2013-03-27T11:39:59.457
> 
> 标签：facebook, facebook-like

我有一个包含 3 种语言的网站。页面网址结构：`/{lang}/page/{id}`. 例如`/en/page/2`或`/ru/page/2`。
如何配置[facebook 喜欢按钮](https://developers.facebook.com/docs/reference/plugins/like/)以对相同的页面 id 具有相同的点赞数？如果访客喜欢`/en/page/2`，我希望获得相同的点赞数`/ru/page/2`

注意：内容使用相同的语言，仅翻译 UI。

我尝试使用`data-href="/page/{id}"`and`<meta property="og:url" content="/{lang}/page/{id}">` 为每一页。但是当我点击赞按钮时，赞对话框会在 1 秒内消失。并且喜欢的数量不会增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:38:41.980

如果您希望like 按钮在不同语言中具有相同的计数，则 3 种语言的 url 必须相同。

唯一的解决方案是使用 get 参数，而不是使用 uri 段在您的 url 上定义语言，这 3 个示例：

```
/page/2?lang=ru

/page/2?lang=en

/page/2?lang=pt 
```

对于 facebook，这 3 个 url 都是一样的，因为 facebook 去掉了 get 参数

# c++ - 使用 CMake 在项目中链接 curl

> ID：15657931
> 
> 赞同：5
> 
> 时间：2013-03-27T11:40:17.843
> 
> 标签：c++, curl, cmake, curlpp

我没有使用 C++ 的经验，只需对 C++ 应用程序进行小幅调整，即可发出 HTTP 请求来验证用户身份。

Curlpp 是一个选项，但是当包含库时，我在构建时遇到错误：

```
Undefined symbols for architecture x86_64:
  "curlpp::OptionBase::OptionBase(CURLoption)", referenced from:
      app_idomsconnector::RTMPAppProtocolHandler::GetAuthPassword(std::string) in libidomsconnector.a(rtmpappprotocolhandler.cpp.o)
      curlpp::OptionTrait<std::string, (CURLoption)10002>::clone() const in libidomsconnector.a(rtmpappprotocolhandler.cpp.o) 
```

据我了解，我需要在 CMAKELists.txt 文件中添加/链接库。谁能告诉我究竟需要添加什么？（运行 OSX 10.8）正如我所提到的，我没有使用 C++ 的经验，因为我大部分时间都使用 Java。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T12:21:30.550

> 据我了解，我需要在 CMAKELists.txt 文件中添加/链接库。

这正是你必须做的:)

在 C++ 中，当您将库包含到项目中时，您有两种文件可供使用：

*   头文件，其中声明了符号的名称（如单词列表）
*   目标文件，代码所在的位置（就像实际定义单词的字典）

（这有点简化，但在这里并不重要）

错误消息告诉您，您没有向编译器提供目标文件，因此它不知道您在项目中使用的某些词（类和函数）是什么意思。

如果您正在构建一个名为 的可执行文件`MyExecutable`，则必须有一行

```
add_executable(MyExecutable ...) 
```

在你的`CMakeLists.txt`.

在这一行之后，尝试添加

```
target_link_libraries(MyExecutable curlpp) 
```

我你已经有一条目标`target_link_libraries()`线`MyExecutable`，只需添加`curlpp`到其他库。

# sql-server - 如何在 SQL Server 中传递可选的日期参数

> ID：15657933
> 
> 赞同：0
> 
> 时间：2013-03-27T11:40:29.313
> 
> 标签：sql-server, stored-procedures

我认为这应该很简单，但我一直遇到问题。我只想从位于日期范围之间的表中返回所有数据。但我希望日期范围是可选的。

```
ALTER PROCEDURE [dbo].[sp_ExistingPlacements_Get]
     @DateFrom  DATE = NULL,
     @DateTo    DATE = NULL
 AS
BEGIN
    SET NOCOUNT ON;
    SELECT *
    FROM tblExistingPlacements
    WHERE
      CreatedDT > COALESCE(NULLIF(@DateFrom, ''), @DateFrom)
      AND
      CreatedDT < COALESCE(NULLIF(@DateTo, GETDATE()), @DateTo)
END 
```

因此，如果没有传入日期，我们将返回整个表。

如果仅通过了开始日期 (DateFrom)，我们将返回行 > 开始日期以及截至当前日期的所有内容。

如果仅通过了结束日期 (DateTo)，则返回所有行 < 结束日期

当然，如果两个日期都已通过，则返回这些日期之间的所有行。

我是否与 COALESCE 走错了路？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T11:43:23.393

Use `ISNULL(@parameter) OR (--your condition--)` instead of `COALESCE`:

```
BEGIN
    SET NOCOUNT ON;
    SELECT *
    FROM tblExistingPlacements
    WHERE
      ((@DateFrom IS NULL) OR CreatedDT > @DateFrom)
      AND
      ((@DateTo IS NULL) OR CreatedDT < @DateTo)
END 
```

If parameter was not provided `ISNULL` return `TRUE`, so second part of `OR` won't matter.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T12:12:59.507

不要这样做。SQL 必须创建**一个适用于***任何*情况的执行计划。听起来很统一，最好有三个单独的查询：

```
ALTER PROCEDURE [dbo].[sp_ExistingPlacements_Get]
     @DateFrom  DATE = NULL,
     @DateTo    DATE = NULL
 AS
BEGIN
    SET NOCOUNT ON;
    IF (@DateFrom IS NULL and @DateTo IS NULL) 
       SELECT field, field, field
       FROM tblExistingPlacements
       WHERE CreatedDT < GETUTCDATE();
    ELSE IF (@DateFrom IS NULL)
       SELECT field, field, field
       FROM tblExistingPlacements
       WHERE CreatedDT < @dateTo;
    ELSE IF (@DateTo IS NULL)
       SELECT field, field, field
       FROM tblExistingPlacements
       WHERE CreatedDT BETWEEN @DateFrom AND GETUTCDATE();
    ELSE
       SELECT field, field, field
       FROM tblExistingPlacements
       WHERE CreatedDT BETWEEN @DateFrom AND @DateTo;
END 
```

在没有指定参数的情况下返回整个表是否明智是非常值得怀疑的，但这不是重点。除了：

*   从不`*`在查询中使用，始终明确指定投影列表
*   始终在数据库中使用 UTC 时间

有关此主题的详细讨论，请参阅[T-SQL 中的动态搜索条件](http://www.sommarskog.se/dyn-search-2008.html)。

# java - 更改 Swing 应用程序的外观（UIManager）时出错

> ID：15657934
> 
> 赞同：1
> 
> 时间：2013-03-27T11:40:29.907
> 
> 标签：java, swing, nullpointerexception, look-and-feel, uimanager

你好我有一个用户可以改变外观的界面。这是界面：

[http://www.hostingpics.net/viewer.php?id=579250themesApp.jpg](http://www.hostingpics.net/viewer.php?id=579250themesApp.jpg)

以及每个按钮的代码：

```
//The JDesktop Frame contains all the Internal Frames
JDesktop p = new JDesktop();
try {
            UIManager.setLookAndFeel( new javax.swing.plaf.metal.MetalLookAndFeel());

        SwingUtilities.updateComponentTreeUI(p);
        } catch (UnsupportedLookAndFeelException ex) {
            Logger.getLogger(paramApparence.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

对于每个按钮，我只更改外观和感觉（金属/雨云等）

当我单击按钮更改外观时，它给了我：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException 
```

这是完整的堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at sun.font.FontDesignMetrics$MetricsKey.init(FontDesignMetrics.java:217)
    at sun.font.FontDesignMetrics.getMetrics(FontDesignMetrics.java:286)
    at sun.swing.SwingUtilities2.getFontMetrics(SwingUtilities2.java:1012)
    at javax.swing.JComponent.getFontMetrics(JComponent.java:1624)
    at sun.swing.MenuItemLayoutHelper.reset(MenuItemLayoutHelper.java:125)
    at javax.swing.plaf.synth.SynthMenuItemLayoutHelper.<init>(SynthMenuItemLayoutHelper.java:119)
    at javax.swing.plaf.synth.SynthGraphicsUtils.paint(SynthGraphicsUtils.java:498)
    at javax.swing.plaf.synth.SynthMenuUI.paint(SynthMenuUI.java:283)
    at javax.swing.plaf.synth.SynthMenuUI.update(SynthMenuUI.java:248)
    at javax.swing.JComponent.paintComponent(JComponent.java:778)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JLayeredPane.paint(JLayeredPane.java:585)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at sun.font.FontDesignMetrics$MetricsKey.init(FontDesignMetrics.java:217)
    at sun.font.FontDesignMetrics.getMetrics(FontDesignMetrics.java:286)
    at sun.swing.SwingUtilities2.getFontMetrics(SwingUtilities2.java:1012)
    at javax.swing.JComponent.getFontMetrics(JComponent.java:1624)
    at sun.swing.MenuItemLayoutHelper.reset(MenuItemLayoutHelper.java:126)
    at javax.swing.plaf.synth.SynthMenuItemLayoutHelper.<init>(SynthMenuItemLayoutHelper.java:119)
    at javax.swing.plaf.synth.SynthGraphicsUtils.paint(SynthGraphicsUtils.java:498)
    at javax.swing.plaf.synth.SynthMenuItemUI.paint(SynthMenuItemUI.java:283)
    at javax.swing.plaf.synth.SynthMenuItemUI.update(SynthMenuItemUI.java:247)
    at javax.swing.JComponent.paintComponent(JComponent.java:778)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at sun.font.FontDesignMetrics$MetricsKey.init(FontDesignMetrics.java:217)
    at sun.font.FontDesignMetrics.getMetrics(FontDesignMetrics.java:286)
    at sun.swing.SwingUtilities2.getFontMetrics(SwingUtilities2.java:1012)
    at javax.swing.JComponent.getFontMetrics(JComponent.java:1624)
    at sun.swing.MenuItemLayoutHelper.reset(MenuItemLayoutHelper.java:126)
    at javax.swing.plaf.synth.SynthMenuItemLayoutHelper.<init>(SynthMenuItemLayoutHelper.java:119)
    at javax.swing.plaf.synth.SynthGraphicsUtils.paint(SynthGraphicsUtils.java:498)
    at javax.swing.plaf.synth.SynthMenuItemUI.paint(SynthMenuItemUI.java:283)
    at javax.swing.plaf.synth.SynthMenuItemUI.update(SynthMenuItemUI.java:247)
    at javax.swing.JComponent.paintComponent(JComponent.java:778)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:47:41.600

例如（正确方法之一）

![在此处输入图像描述](../Images/b0334ec4d7d816e80e1f18f4bad8f0cb.png)![在此处输入图像描述](../Images/63c882aa297a3d8e56e54caa917e2416.png)![在此处输入图像描述](../Images/efdb4bca8ab8d6f4010fb87c34774596.png)![在此处输入图像描述](../Images/03b01c5b91cc2f1e7a199447dd3f456a.png)![在此处输入图像描述](../Images/44730f8a9162e71a1621d0089eddbe82.png)

默认情况下需要`JFrame.pack()`，而不是按原样使用另一个woodoos `setVisible(false) and then true`，或者更改`DecorationsType`为`JFrame`

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;
import javax.swing.UIManager.LookAndFeelInfo;

public class TestInternalFrame {

    private JFrame frame = new JFrame("Test");

    public TestInternalFrame() {
        final JInternalFrame internal = new JInternalFrame("test");
        final JInternalFrame hidden = new JInternalFrame("test");
        hidden.setBounds(1000, 1000, 1, 1);
        hidden.setVisible(true);
        internal.setVisible(true);
        internal.setBounds(0, 0, 100, 100);
        JDesktopPane pane = new JDesktopPane();
        pane.add(internal);
        pane.add(hidden);
        pane.setPreferredSize(new Dimension(10000, 10000));
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.getContentPane().add(new JScrollPane(pane,
                JScrollPane.VERTICAL_SCROLLBAR_NEVER,
                JScrollPane.HORIZONTAL_SCROLLBAR_NEVER));
        DefaultComboBoxModel model = new DefaultComboBoxModel();
        UIManager.LookAndFeelInfo[] info = UIManager.getInstalledLookAndFeels();
        for (int i = 0; i < info.length; i++) {
            model.addElement(info[i].getName());
        }
        final JComboBox box = new JComboBox(model);
        box.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                try {
                    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                        if (box.getSelectedItem().equals(info.getName())) {
                            UIManager.setLookAndFeel(info.getClassName());
                            UIManager.getLookAndFeel().uninitialize();
                            UIManager.setLookAndFeel(info.getClassName());
                            SwingUtilities.updateComponentTreeUI(frame);
                            break;
                        }
                    }
                } catch (ClassNotFoundException ex) {
                    Logger.getLogger(TestInternalFrame.class.getName()).log(Level.SEVERE, null, ex);
                } catch (InstantiationException ex) {
                    Logger.getLogger(TestInternalFrame.class.getName()).log(Level.SEVERE, null, ex);
                } catch (IllegalAccessException ex) {
                    Logger.getLogger(TestInternalFrame.class.getName()).log(Level.SEVERE, null, ex);
                } catch (UnsupportedLookAndFeelException ex) {
                    Logger.getLogger(TestInternalFrame.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        });
        frame.add(box, BorderLayout.NORTH);
        frame.setPreferredSize(new Dimension(400, 300));
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                TestInternalFrame tif = new TestInternalFrame();
            }
        });
    }
} 
```

# android - 关于android中相机分辨率的咨询

> ID：15657938
> 
> 赞同：2
> 
> 时间：2013-03-27T11:40:43.500
> 
> 标签：android

我尝试像这样在 MegaPixels 中检索相机分辨率：

```
android.hardware.Camera cam = android.hardware.Camera.open();
android.hardware.Camera.Size size = cam.getParameters().getPictureSize();
DecimalFormat localDecimalFormat = new DecimalFormat("#.#");        
res = "Camera MegaPixel: " +  localDecimalFormat.format(size.width * size.height / 1000000.0D);            
cam.release(); 
```

但是我弄错了号码，我不知道这是前置摄像头还是后置摄像头，

如何调整前后摄像头？

# agal - AGAL 中关于骨架动画的着色器

> ID：15657939
> 
> 赞同：1
> 
> 时间：2013-03-27T11:40:45.630
> 
> 标签：agal

在我的项目中，我们将矩阵的一部分推送到用于骨架动画的常量寄存器中，并使用着色器中的矩阵索引访问它们，该索引也由常量寄存器传递。

带有 glsles 的示例着色器：

```
uniform highp vec4 mPalette[60];             //a part of the matrix for skeleton.
attribute highp vec4 _glesVertex;               //the input positions.
attribute vec4 mBlendindices;      //the matrix index.
void main ()
{
    gl_Position = mPalette[mBlendindices.x];
} 
```

如果我分配值“mPalette”以使用常量寄存器：vc0 - vc59，分配值“mBlendindices”以使用常量寄存器：vc60，分配 _glesVertex 以使用顶点属性寄存器：va0。

如何将此着色器转换为 AGAL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:22:16.887

完全一样。您应该将所有常量和属性传递给着色器（我假设您知道如何在 actionscript 中传递它）。接下来，在顶点着色器中：

```
mov op, vc[va.x] 
```

# php - php mysql + 插入查询错误

> ID：15657942
> 
> 赞同：0
> 
> 时间：2013-03-27T11:40:52.727
> 
> 标签：php, mysql, forms, insert-update

我正在创建一个页面，用户可以在其中编辑他们的帐户并使用 php 和 mysql 添加一些文本。首先我能够进行插入和更新，但现在它显示错误消息重复输入关键电子邮件地址我该如何解决这个问题这是帐户设置的代码，但它不包含任何电子邮件地址字段，所以我将显示所有因为我不知道要显示的代码在哪里

我编辑代码也许这个正在产生错误？

# 注册.php

```
 <?php require_once('for members/scripts/connect.php'); ?>

<?php
ob_start();
 function countryQuery(){

  $countryData = mysql_query("SELECT * FROM country") or die("could select database");

  while($record = mysql_fetch_array($countryData)){

     echo'<option value="' . $record['country_name'] .  '">' . $record['country_name'] . '</option>';

  }

}

function specializationQuery(){

$specData = mysql_query("SELECT * FROM specialization");

  while($recordJob = mysql_fetch_array($specData)){

     echo'<option value="' . $recordJob['specialization_name'] .  '">' . $recordJob['specialization_name'] . '</option>';

  }

}

function districtQuery(){

$distData = mysql_query("SELECT * FROM districts");

  while($recorddist = mysql_fetch_array($distData)){

     echo'<option value="' . $recorddist['district_name'] .  '">' . $recorddist['district_name'] . '</option>';

  }

}

function villageQuery(){

$villageData = mysql_query("SELECT * FROM village");

  while($recordvillage = mysql_fetch_array($villageData)){

     echo'<option value="' . $recordvillage['village_name'] .  '">' . $recordvillage['village_name'] . '</option>';

  }

}

 //default value
$message = "Fields Marcked with an [*] are Required";
  $username = "";
  $fname = "";
  $lname = "";
  $specialization = "";
  $email = "";
  $pass1 = "";
  $pass2 = "";
  $district = "";
  $village = "";

if(isset($_POST['username'])){
  $username = $_POST['username'];
  $fname = $_POST['fname'];
  $lname = $_POST['lname'];
  $email = $_POST['email'];
  $pass1 = $_POST['pass1'];
  $pass2 = $_POST['pass2'];
  $bdate = $_POST['birthdate'];
  $phone = $_POST['phonenumber'];
  $country = $_POST['country'];
  //$local_adress = $_POST['adress'];
  $specialization = $_POST['specialization'];
  $district = $_POST['district'];
  $village = $_POST['village'];

  //error handeling
  if((!$username)||(!$fname)||(!$lname)||(!$email)||(!$pass1)||(!$pass2)||(!$specialization)||(!$district)||(!$village)){
  $message = "**** Please insert the Required Fields below ****<br />";

  if($fname == "")
 {
     $message = $message . "Enter First name<br/>";
 }
  if($lname == "")
 {
     $message = $message . "Enter Last name<br/>";
 }

 if($specialization == 0)
 {
     $message = $message . "Select Your Job<br />";
 }
 if($district == 0)
 {
     $message = $message . "Select Your District<br />";
 }
 if($village == 0)
 {
     $message = $message . "Select Your Village<br />";
 }
 if($email == "")
 {
     $message = $message . "Enter Email Adress<br/>";
 }
  if ($username == "") {
    $message = $message . "Enter User Name<br/>";
  }

  if($pass1 == "")
 {
     $message = $message . "Enter password<br/>";
 }
  if($pass2 == "")
 {
     $message = $message . "rechek the password <br/>";
 }

 } 

   else if($pass1!=$pass2){
   $message = "your password do not match!";
   }else{
   //securing the data
   $username = preg_replace("#[^0-9a-z]#i","",$username);
   $fname = preg_replace("#[^0-9a-z]#i","",$fname);
   $lname = preg_replace("#[^0-9a-z]#i","",$lname);
   //$pass1 = sha1($pass1);

   $email = mysql_real_escape_string($email);
   // checking for duplicate
   $user_query = mysql_query("SELECT user_name FROM user WHERE user_name = '$username'LIMIT 1") or die("could not check the username");
   $count_username = mysql_num_rows($user_query);

    $email_query = mysql_query("SELECT email_address FROM user WHERE email_address = '$email'LIMIT 1") or die("could not check the email");
   $count_email = mysql_num_rows($email_query);

    if($count_username > 0){
     $message = " your username is alredy in use";
    }elseif($count_email > 0){
      $message = "your email is alredy in use";
    }else{

      $query = mysql_query("INSERT INTO user(user_name, first_name, last_name, address, district_name, village_name, birth_date, email_address, specialization_name, password, registered_date)VALUES('$username', '$fname', '$lname', '$country', '$district', '$village', '$bdate', '$email', '$specialization', '$pass1',  now())")or die("could not insert data");  

    $message = "you have  now been registered";
    //from the social website

    $getid = mysql_fetch_array($query);
            $_SESSION['user_id'] = $getid['user_rid'];
            $_SESSION['login'] = 'true';
            $_SESSION['login_user'] = $getid['username'];
    header("Location: home.php");
    }
   }
 }

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Register Page</title>
<link href="style/stylesheet.css" rel="stylesheet" type="text/css" />
</head>

<body>

<table width="200" border="0" align="center">
<tr>
  <tr>
    <td>
    <div id="visitorHeader"></div>
    <img src="web_header copy.jpg" alt="visitor header" /></td>
  </tr>
  <tr>
     <td>
       <h2 class="registerTitle">Registration Fields</h2>
       <h4 class="registerTitle">Sign Up Today....</h4>
 <!-- <div class="container center"> -->
       <p style="color:#FF0000" align="center"><?php print("$message")?></p>
      </td>

    <tr>
        <table width="680" border="0" align="center">
        <form action="register.php" method="post">

         <td> 
        </span><label for="firstname"><span class="Fields">First Name</span> <span class="requiredField">*</span></label></td>
        <td>
        <input type="text" name="fname" placeholder="Firstname" /></td>

      <td><span class="Fields">Last Name</span><span class="requiredField">*</span></label></td>

      <td><input type="text" name="lname" placeholder="Lastname" /></td>

    <tr>
      <td><label for="birthdate" class="Fields">Birth Date                     </label></td>
      <td><input type="date" name="birthdate" value= "YYYY_MM_DD"  onfocus="if (this.value == 'YYYY_MM_DD') {this.value = '';}" onblur="if (this.value == '') {this.value = 'YYYY_MM_DD';}" />
        <br /></td>
      <td class="Fields"><label for="phonenumber">Phone Number</label></td>
      <td><input type="number" name="phonenumber" value="000-0-000 000" onfocus="if (this.value == '000-0-000 000') {this.value = '';}" onblur="if (this.value == '') {this.value = '000-0-000 000';}" /></td>

    </tr>

    <tr>
      <td class="Fields"><label for="country">Country</label></td>
      <td><select name="country"  class="select">
      <option value="0">-- Select Your Country --</option>
        <?php countryQuery(); ?>
      </select></td>
      <td class="Fields"><label for="specialisation">Specialisation <span class="requiredField">*</span></label></td>
      <td><select name="specialization"  class="select">
      <option value="0">-- Select Your Specialization --</option>

        <?php specializationQuery(); ?>
      </select></td>

    </tr>

    <tr>
      <td class="Fields"><label for="district">District<span class="requiredField">*</span></label></td>
      <td><select name="district"  class="select">
      <option value="0">-- Select Your District --</option>

        <?php districtQuery(); ?>
      </select></td>

      <td class="Fields"><label for="village">Village<span class="requiredField">*</span></label></td>
      <td><select name="village"  class="select">
      <option value="0">-- Select Your Village --</option>

        <?php villageQuery(); ?>
      </select></td>

    </tr>

    <tr>
      <td class="Fields"><label for="email">Email Adress<span class="requiredField">*</span></label></td>
      <td><input type="text" name="email" placeholder="Email Adress" />
        <br /></td>
      <td><label for="username"><span class="Fields">User Name</span> <span class="requiredField">*</span></label></td>
      <td><input type="text" name="username" placeholder="Username" />
        <br /></td>

    </tr>

    <tr>
      <td class="Fields"><label for="password">Password<span class="requiredField">*</span></label></td>
      <td><input type="password" name="pass1" placeholder="Password" />
        <br /></td>
      <td class="Fields"><label for="password2">Re_Password<span class="requiredField">*</span></label></td>
      <td><input type="password" name="pass2" placeholder="Validate Password" />
        <br /></td>

    </tr>

    <tr>
      <td></td>
      <td></td>
      <td><input type="submit" value="Register"/></td>
      <td></td>
    </tr>

  </form>
</table>
<!--</div>-->

  </tr>
  <tr>
    <td><?php require_once('footer.php'); ?></td>
  </tr>
  </tr>
  </tr>
</table>
</body>
</html>
<?php ob_end_flush(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:58:00.267

这可能是因为您的用户表包含一个 email_address 列，该列已被定义为该表上的一个 KEY 列。而且，当您运行此代码时：

```
$about_query = mysql_query("INSERT INTO user (interest) VALUES ('$aboutme')")or die(mysql_error()); 
```

它会给你一个错误，因为没有给出电子邮件地址的值，并且必须指定它。我认为你不能在这里使用插入查询，而是使用你已经在下面的语句中完成的更新查询：

```
$edit_query = mysql_query("UPDATE user SET first_name= '$fname', last_name= '$lname', address= '$country', specialization_name= '$spec', interest = '$aboutme' WHERE user_id = '$userid'") or die(mysql_error()); 
```

因此，要么删除 $about_query，要么将其设为更新语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T13:28:24.940

`mysql_fetch_assoc`如果您想要由字段名称索引的值，请使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T09:15:24.683

嗨，这是替代方案：您可以使用：**mysql_error()**

```
if(mysql_insert_id()>0){
    //Bla bla bla
}
else{
    Echo "Mysql Error : ".mysql_error();
} 
```

# php - Symfony 2 / Doctrine 用户定义的 DQL 函数参数有字符串长度限制吗？

> ID：15657953
> 
> 赞同：22
> 
> 时间：2013-03-27T11:41:29.717
> 
> 标签：php, symfony, doctrine-orm, doctrine, dql

我为 Doctrine DQL 创建了自定义 DQL 函数：

```
class Translate extends FunctionNode {
    public $field;

    public function getSql(SqlWalker $sqlWalker) {
        $query = "TRANSLATE(" . $this->field->dispatch($sqlWalker) . ", 'àâäãáåÀÁÂÃÄÅçÇéèêëÉÈÊËîïìíÌÍÎÏñÑôöðòóÒÓÔÕÖùúûüÙÚÛÜýÿÝ', 'AAAAAAAAAAAACCEEEEEEEEIIIIIIIINNOOOOOOOOOOUUUUUUUUYYY')";
        return $query;
    }

    public function parse(Parser $parser) {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->field = $parser->StringPrimary();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }
} 
```

使用时似乎效果很好。

但如果字符串参数包含超过 307 个字符，则它不起作用。没有错误，但脚本正在结束。

```
$query = $this->createQueryBuilder('...');
$query->addSelect("TRANSLATE('less than 307 chars')"); // working
$query->addSelect("TRANSLATE('more than 307 chars')"); // NOT working 
```

如何使用超过 307 个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-24T14:34:52.920

就像 wrikken 已经解释的那样，音译应该使用 iconv 来完成，因为这样可以节省您的服务器资源。

这是一个简单的函数，它将音译（将非拉丁字符转换为它们在拉丁字符集中最接近的表示形式）一个字符串。

```
function transliterateString($str)
{
    $serverLocale = setlocale(LC_CTYPE, 0);
    setlocale(LC_CTYPE, 'en_US.UTF8');
    // transliterate the string using iconv
    $str = iconv('UTF-8', 'ASCII//TRANSLIT//IGNORE', $str); 
    setlocale(LC_CTYPE, $serverLocale); //  return the locale to what it was before
    return $str;
} 
```

用法：

```
$string = "café"; 
echo $string;
echo transliterateString($string); 
```

以上将输出以下内容：

```
café
cafe 
```

# javascript - 如何将表格单元格和文本溢出应用到同一个 div

> ID：15657960
> 
> 赞同：0
> 
> 时间：2013-03-27T11:41:48.977
> 
> 标签：javascript, css

在 div 中，我尝试同时使用 display:table-cell 和 text-overflow: ellipsis，因为我希望文本垂直增长，这通过使用 table-cell 来实现，但是当我使用 table-cell 时，溢出属性不起作用. 我想我应该制作 2 个 div 并将 table-cell 应用于一个并溢出到另一个。但这似乎也没有影响。有什么线索吗？

谢谢，KK

请看一下 [http://jsfiddle.net/KK123/qLY6K/2/](http://jsfiddle.net/KK123/qLY6K/2/)

```
.parentclass {
  position: absolute;
top: 110px;
left: 165px;
width: 470px;
height: 260px;
text-align: center;
  font-size: 30px;
background-repeat: no-repeat;
display: table; 
```

}

```
.childclass {
display: table-cell;
vertical-align: middle;
width:100%;
text-align: center;
padding-left: 20px;
padding-right: 20px;
overflow: hidden;
border: 1px solid blue;
height: 240px;
max-height: 240px; 
```

}

```
td.childclass2 {
display: block;
overflow: hidden;
text-overflow: ellipsis;
} 
```

我正在尝试将一个类应用于表格单元格内的 div。这个类正在应用。任何线索为什么会这样？

# scala - 如何从 Scala Play 获取依赖版本！框架构建文件

> ID：15657962
> 
> 赞同：0
> 
> 时间：2013-03-27T11:42:00.893
> 
> 标签：scala, playframework, dependencies

我正在使用播放！构建我的应用程序的框架。我有这样的依赖：

`"com.coolDependency" % "superLib" % "0.3.89"`

在代码的某处，我想获取 superLib 的版本。但是有可能与 Play! 工具？我的代码依赖于 superLib 的版本。例如：

`val coolVal = "importantThingsHere - 0.3.89"`

由于 superLib 的版本经常变化，我不喜欢在构建文件和代码中更改它的版本。我可以将它放在配置文件中，并在构建文件和代码中从那里读取它，以及解析代码中的 build.scala 文件并通过从构建文件中提取它来获取版本。

有没有更漂亮的方法来做到这一点？我试图玩弄 play.api.Play，但没有成功。

目前，我决定从类加载器中获取 Maven 属性文件。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:52:46.683

如果有人会尝试做类似的事情：

`val properties = new Properties properties.load(Play.application.resourceAsStream("/META-INF/maven/com.coolDependency/superLib/pom.properties").get) properties.get("version")`

# javascript - JavaScript/HTML - Alert box goes before sound?

> ID：15657967
> 
> 赞同：4
> 
> 时间：2013-03-27T11:42:10.707
> 
> 标签：javascript, html, audio

The code:

```
x = new Audio("bar.wav")

x.play()

alert("foo") 
```

Why does the alert box show up first and then then sound is played??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:45:06.450

这是因为声音文件由 JavaScript 异步加载，然后代码继续执行。警报首先触发，因为加载声音文件需要一段时间。

要修复它，您需要在加载时添加一个事件侦听器，如下所示：

```
x.addEventListener('load', function() {
    x.play();
    alert("foo");
}); 
```

或者您可以将事件侦听器添加到`onplay`事件中，如下所示：

```
x.onplay = function () { alert("foo"); };
x.play(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:51:49.997

您应该等待播放事件。那是声音真正开始播放的时候。但这只是一个建议，警告框会暂停代码执行，并且可能真的会弄乱声音。

```
x = new Audio("bar.wav")
x.onplaying = function ()
{
  alert("foo");
}
x.play(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:47:08.753

编辑：在这篇文章中，`onloadeddata`使用了一个事件，它比下面的示例更有趣，但我没有测试过：[HTML5 Audio events not triggering on Chrome](https://stackoverflow.com/questions/10790091/html5-audio-events-not-triggering-on-chrome)

--

由于您无法分配`onload`事件，因此您必须这样做：

```
$(function(){
    youraudioelement = new Audio("bar.wav")
    var audioReady = function(){
        if (youraudioelement.attr('readyState')) {
            alert("foo");
        } else {
            setTimeout(audioReady, 250);
        }
    }
    audioReady();
} 
```

[HTML5 音频加载](https://stackoverflow.com/questions/5335064/html5-audio-onload)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-02T16:20:10.187

只需使用：

```
x.onended = function () { alert("foo"); };
x.play(); 
```

# maven - Incomplete Maven artifact transferred

> ID：15657972
> 
> 赞同：3
> 
> 时间：2013-03-27T11:42:27.803
> 
> 标签：maven

I'm having problems retrieving certain artifacts when running Maven 3.0.5 from the command-line, for example (after ~20 seconds):

```
...
Could not transfer artifact org.scala-lang:scala-library:jar:2.10.1 from/to central
(http://repo1.maven.org/maven2): GET request of: 
org/scala-lang/scala-library/2.10.1/scala-library-2.10.1.jar from central failed: 
Premature end of Content-Length delimited message body (expected: 7137903; received: 
6613782 -> [Help 1] 
```

I can, however, run a build using m2eclipse, and the artifact is fetched correctly (and once it's in my ~/.m2/repository, I can carry on using the command line).

I'm going through a company proxy. I've sniffed the traffic, and the 6613782 bytes received are correct, it seems the transfer is just terminated early by something.

Any ideas on what could be causing this?

# xcode - How to change subview's title from a table selected row in Xcode?

> ID：15657973
> 
> 赞同：0
> 
> 时间：2013-03-27T11:42:31.147
> 
> 标签：xcode, row, tableview, cell, title

Here is the problem: I have a table view, custom cells, and detail view. I have 10 rows in my table and when the user selects one of the rows, the detail view opens. How to set the detail view nav bar's title from the selected row of my table view? I have three classes - televisionList (my tableview), televisionCell (my cells in the table view) and televisionDetail (my detail view which opens when a row is selected). In my televisionCell I have declared the following label:

```
@property (weak, nonatomic) IBOutlet UILabel *tvLabel; 
```

In my televisionList (the tableview) I have this method:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    televisionCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@"televisionCell" owner:self options:nil];
        for (id currentObject in objects)
        {
            if ([currentObject isKindOfClass:[UITableViewCell class]])
            {
                cell = (televisionCell *)currentObject;
                break;
            }
        }

    }
switch (indexPath.row)
    {
        case 0:
        {
            cell.imageView.image = bnt;
            cell.tvLabel.text = @"БНТ 1";
            cell.backgroundView.image = [UIImage imageNamed:@"lightbackgr.png"];
            break;
        }

        case 1:
        {
            cell.imageView.image = btv;
            cell.tvLabel.text = @"bTV";
            cell.backgroundView.image = [UIImage imageNamed:@"background-cell.png"];
            break;
        }
        case 2:
        {
            cell.imageView.image = novatv;
            cell.tvLabel.text = @"Нова TV";
            cell.backgroundView.image = [UIImage imageNamed:@"lightbackgr.png"];
            break;
        }
} 
```

Now, I want to change my **detail view title** to be equal to **cell.tvLabel.text** when a row is selected. Where and how to do that? Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:06:31.397

正如您所写，您想在**选择**单元格时设置标题，因此最好的方法是使用：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    televisionCell *cell=[tableView cellForRowAtIndexPath:indexPath];
    details.title=cell.tvLabel.text;    
} 
```

但是，您可以考虑将模型对象引入您的应用程序并将它们保存在某个数组中（`objects`在下面的示例中`。因此该方法如下所示：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   YourObject* obj=[self.objects objectAtIndex:indexPath.row];
    details.title=obj.stationName;

} 
```

# c++ - Howto set the UDP source address on Windows

> ID：15657974
> 
> 赞同：2
> 
> 时间：2013-03-27T11:42:33.460
> 
> 标签：c++, c, sockets, udp, winsock

There seems to be no portable way to set the source IP for sending UDP datagrams from sockets bound to INADDR_ANY, but at least on Linux and FreeBSD it can be done using `sendmsg()` and the `IP_PKTINFO` (Linux) or `IP_SENDSRCADDR` (FreeBSD) option. (See [this question](https://stackoverflow.com/questions/3062205/setting-the-source-ip-for-a-udp-socket).)

Is there an equivalent option to set the UDP source IP on Windows ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-29T13:23:54.803

From [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741692%28v=vs.85%29.aspx):

> **WSASendMsg function**
> 
> *[...]*
> 
> On an IPv4 socket of type `SOCK_DGRAM` or `SOCK_RAW`, an application can specific the local IP source address to use for sending with the `WSASendMsg` function. One of the control data objects passed in the `WSAMSG` structure to the `WSASendMsg` function may contain an `in_pktinfo` structure used to specify the local IPv4 source address to use for sending.

The same applies to an IPv6 socket with the `in6_pktinfo` structure.

For dual-mode sockets, it is important that an IPv4 source address is not specified as an IPv4-mapped IPv6 address in the `in6_pktinfo`, but as an IPv4 address in the `in_pktinfo` structure.

* * *

*[Example](http://badvpn.googlecode.com/svn-history/r60/trunk/system/BSocket.c):*

```
union {
    char in[WSA_CMSG_SPACE(sizeof(struct in_pktinfo))];
    char in6[WSA_CMSG_SPACE(sizeof(struct in6_pktinfo))];
} cdata;

WSAMSG msg;
memset(&msg, 0, sizeof(msg));
msg.name = &remote_sysaddr.addr.generic;
msg.namelen = remote_sysaddr.len;
msg.lpBuffers = &buf;
msg.dwBufferCount = 1;
msg.Control.buf = (char *)&cdata;
msg.Control.len = sizeof(cdata);

int sum = 0;

WSACMSGHDR *cmsg = WSA_CMSG_FIRSTHDR(&msg);

...
    memset(cmsg, 0, WSA_CMSG_SPACE(sizeof(struct in_pktinfo)));
    cmsg->cmsg_level = IPPROTO_IP;
    cmsg->cmsg_type = IP_PKTINFO;
    cmsg->cmsg_len = WSA_CMSG_LEN(sizeof(struct in_pktinfo));
    struct in_pktinfo *pktinfo = (struct in_pktinfo *)WSA_CMSG_DATA(cmsg);
    pktinfo->ipi_addr.s_addr = local_addr->ipv4;
    sum += WSA_CMSG_SPACE(sizeof(struct in_pktinfo));
...

msg.Control.len = sum;

if (bs->WSASendMsg(bs->socket, &msg, 0, &bytes, NULL, NULL) != 0) {
    ... 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-29T01:33:20.793

我想就是[这样](http://msdn.microsoft.com/en-us/library/k227d11f.aspx)。

> UdpClient 构造函数 (IPEndPoint)
> 
> 此构造函数创建一个新的 UdpClient 并将其绑定到 localEP 参数指定的 IPEndPoint。在调用此构造函数之前，您必须使用要从中发送和接收数据的 IP 地址和端口号创建一个 IPEndPoint。您无需为发送和接收数据指定本地 IP 地址和端口号。如果不这样做，底层服务提供商将分配最合适的本地 IP 地址和端口号。

# javascript - Popup blocking the gdrive authorization in chrome

> ID：15657983
> 
> 赞同：4
> 
> 时间：2013-03-27T11:42:45.827
> 
> 标签：javascript, authentication, google-drive-api

So, the problem is that popup blocking the window open even if it is done by a user action, click for example..

```
gapi.auth.authorize({
   client_id: this.client_id,
   scope: this.scopes,
   access_type: 'online',
   immediate: immediate
}, function(authResult) {
   console.log(authResult)
}); 
```

If i simply open the window on user click as here:

```
$('.some').click(funciton(){
    window.open(someurl)
}) 
```

it works fine, but if i did it throw the gdrive api(gapi.auth.authorize), this blocking anyway.

A must, I can not force users to off popap blocking. I hope that anybody now how solved it :), thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-07T08:52:48.053

尝试这个：

在对 client.js 的调用中包含一个 onload 事件

`<script type="text/javascript" src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>`

从 onload 函数调用 gapi.auth.init ：

`function handleClientLoad() { window.setTimeout(gapi.auth.init,1); }`

在您的授权配置中设置立即：false。

检查页面流程中的 1\. 是否低于 2.。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-08T05:18:53.477

只需添加参考 [https://developers.google.com/api-client-library/javascript/reference/referencedocs](https://developers.google.com/api-client-library/javascript/reference/referencedocs)

> gapi.auth.init(callback) 初始化授权功能。在客户端加载时调用它，以防止弹出窗口阻止程序阻止 gapi.auth.authorize 调用上的身份验证窗口。

ps：投票需要15个声望..所以不能投票给本的答案:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T14:17:32.447

不是来自用户事件的弹出窗口将被阻止，具体取决于您的浏览器设置。您可以尝试将**immediate**设置为 false：

```
gapi.auth.authorize({
   client_id: this.client_id,
   scope: this.scopes,
   immediate: false
}, function(authResult) {
   console.log(authResult)
}); 
```

在您已经授权应用程序后，您可以使用此代码刷新访问令牌。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-20T14:59:59.737

> 第一次调用 gapi.auth.authorize 可以触发弹出窗口阻止程序。防止这种情况的最佳方法是设置一个用户触发的操作，该操作使用 immediate: false 参数调用 gapi.auth.authorize。

引用自 api 文档：[https ://developers.google.com/api-client-library/javascript/features/authentication#popup](https://developers.google.com/api-client-library/javascript/features/authentication#popup)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-02T17:32:56.810

您只需要`gapi.auth2.getAuthInstance().isSignedIn.get();`无按钮授权许可。这会禁用弹出窗口。

```
gapi.client.init({
     discoveryDocs: DISCOVERY_DOCS,
     clientId: CLIENT_ID,
     scope: SCOPES
}).then(function () {    
     // Handle the initial sign-in state.
     gapi.auth2.getAuthInstance().isSignedIn.get();
}); 
```

# django - Scale Gevent Socketio

> ID：15657985
> 
> 赞同：3
> 
> 时间：2013-03-27T11:43:04.937
> 
> 标签：django, redis, gevent, gevent-socketio

I currently have a site setup using Django. I have added Gevent Socketio to add a chat function. I have a need to scale it as there are quite a few users already on the site and can't find a way to do so.

I tried [https://github.com/abourget/gevent-socketio/tree/master/examples/django_chat/chat](https://github.com/abourget/gevent-socketio/tree/master/examples/django_chat/chat)

I am using Gunicorn & the `socketio.sgunicorn.GeventSocketIOWorker` worker class so at first I thought of increasing the worker count. Unfortunately this seems to fail intermittently. I have started rewriting it to use redis from a few sources I found and have 1 worker on each server which is now being load balanced. However this seems to have the same problem. I am wondering if there is some issue in the gevent socketio code itself which does not allow it to scale.

Here is how I have started which is just the submit message code.

```
def redis_client():
    """Get a redis client."""
    return Redis(settings.REDIS_HOST, settings.REDIS_PORT, settings.REDIS_DB)

class PubSub(object):
    """
    Very simple Pub/Sub pattern wrapper
    using simplified Redis Pub/Sub functionality.

    Usage (publisher)::

        import redis

        r = redis.Redis()

        q = PubSub(r, "channel")
        q.publish("test data")

    Usage (listener)::

        import redis

        r = redis.Redis()
        q = PubSub(r, "channel")

        def handler(data):
            print "Data received: %r" % data

        q.subscribe(handler)

    """
    def __init__(self, redis, channel="default"):
        self.redis = redis
        self.channel = channel

    def publish(self, data):
        self.redis.publish(self.channel, simplejson.dumps(data))

    def subscribe(self, handler):
        redis = self.redis.pubsub()
        redis.subscribe(self.channel)

        for data_raw in redis.listen():
            if data_raw['type'] != "message":
                continue

            data = simplejson.loads(data_raw["data"])
            handler(data)

from socketio.namespace import BaseNamespace
from socketio.sdjango import namespace
from supremo.utils import redis_client, PubSub
from gevent import Greenlet

@namespace('/chat')
class ChatNamespace(BaseNamespace):
    nicknames = []
    r = redis_client()
    q = PubSub(r, "channel")

    def initialize(self):
        # Setup redis listener
        def handler(data):
            self.emit('receive_message',data)

        greenlet = Greenlet.spawn(self.q.subscribe, handler)

    def on_submit_message(self,msg):
        self.q.publish(msg) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T09:20:14.573

我使用了来自[https://github.com/fcurella/django-push-demo](https://github.com/fcurella/django-push-demo)和 gevent-socketio 0.3.5rc1 而不是 rc2 的部分代码，它现在可以与多个工作人员和负载平衡一起使用。

# php - Creating object from class returns instance of another class

> ID：15657987
> 
> 赞同：0
> 
> 时间：2013-03-27T11:43:10.157
> 
> 标签：php, oop

I have class DatabaseAccess from which I inherit two classes: TeamAccess and StatisticsAccess. Now when I create instance of TeamAccess from StatisticsAccess it is of type StatisticsAccess? What is happening here?

Heres the code

```
class StatisticsAccess extends DatabaseAccess {
  public function getMatchesById($matchesid) {
    $teamAccess = new TeamAccess();
    print_r(new TeamAccess);
  }
}

class TeamAccess extends DatabaseAccess {
  function __construct() {
    parent::__construct();
  }
} 
```

print_r shows StatisticsAccess object.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:04:10.170

在 StatisticAccess 中创建 TeamAccess 类只会创建一个 TeamAccess 类，就像您在类之外创建的一样。

```
class StatisticsAccess extends DatabaseAccess {
    public function test() {
        $teamAccess = new TeamAccess();
        //print_r(new TeamAccess);
        echo "teamAccess var class: " . get_class($teamAccess);
        echo "<br/>this class: " . get_class($this);
    }
}

$sa = new StatisticsAccess;
$sa->test()
?> 
```

回报：

```
//teamAccess var class: TeamAccess
//this class: StatisticsAccess 
```

# c# - 使用 String.Format 为货币格式的数字添加比例

> ID：15657997
> 
> 赞同：1
> 
> 时间：2013-03-27T11:43:38.383
> 
> 标签：c#, .net, string, format, currency-formatting

我正在尝试使用比例因子格式化货币值。我可以用普通的十进制数字来做到这一点，例如：`string.Format("{0:0,,.000 million}",123456789);`将返回“12345.7 万”

我希望能够使用货币值来执行此操作...标准数字格式说明符（“C”）允许您设置精度，但不能设置缩放。例如，`string.Format("{0:C3}",123456789)`将返回“$123,456,789.000”，但我无法弄清楚如何返回“$123,457.000”。

是否有解决此问题的格式化字符串？