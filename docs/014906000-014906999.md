# StackOverflow 问答 14906000-14906999

# python - 来自内存中“raw_input()”的字符串

> ID：14906000
> 
> 赞同：3
> 
> 时间：2013-02-16T01:33:08.293
> 
> 标签：python, python-2.7

我早就知道 Python 喜欢在内存中重用字符串而不是重复：

```
>>> a = "test"
>>> id(a)
36910184L
>>> b = "test"
>>> id(b)
36910184L 
```

但是，我最近发现从返回的字符串`raw_input()`不遵循典型的优化模式：

```
>>> a = "test"
>>> id(a)
36910184L
>>> c = raw_input()
test
>>> id(c)
45582816L 
```

我很好奇为什么会这样？有技术原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T01:35:43.973

在我看来，python实习生字符串文字，但通过其他进程创建的字符串不会被实习：

```
>>> s = 'ab'
>>> id(s)
952080
>>> g = 'a' if True else 'c'
>>> g += 'b'
>>> g
'ab'
>>> id(g)
951336 
```

当然，`raw_input`在不使用字符串文字的情况下创建新字符串，因此假设它不会具有相同的`id`. C-python实习生字符串有（至少）两个原因 - 内存（如果你不存储同一事物的一大堆副本，你可以保存一堆）和哈希冲突的解决方案。如果 2 个字符串散列到相同的值（例如在字典查找中），则 python 需要检查以确保两个字符串是等价的。如果它们没有被实习，它*可以*做一个字符串比较，但如果他们被实习，它只需要做一个更有效的指针比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T01:35:52.960

编译器不能`intern`字符串，除非它们出现在实际源代码中（即字符串文字）。除此之外，`raw_input`还剥离了新的线路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T01:41:56.753

[更新] 为了回答这个问题，有必要知道 Python 重用字符串的原因、方式和时间。

让我们从如何开始：Python 使用来自[wikipedia](http://en.wikipedia.org/wiki/String_interning)的“interned”字符串：

> 在计算机科学中，字符串实习是一种仅存储每个不同字符串值的副本的方法，该副本必须是不可变的。驻留字符串使某些字符串处理任务更节省时间或空间，但代价是创建或驻留字符串时需要更多时间。不同的值存储在字符串实习池中。

为什么？似乎节省内存不是这里的主要目标，只是一个很好的副作用。

> 字符串实习加速了字符串比较，这有时是严重依赖带有字符串键的哈希表的应用程序（例如编译器和动态编程语言运行时）的性能瓶颈。在没有实习的情况下，检查两个不同的字符串是否相等涉及检查两个字符串的每个字符。这很慢有几个原因：字符串的长度本质上是 O(n)；它通常需要从多个内存区域读取，这需要时间；并且读取会填满处理器缓存，这意味着可用于其他需求的缓存更少。使用实习字符串，在原始实习操作之后进行简单的对象身份测试就足够了；这通常被实现为指针相等测试，通常只是一条没有内存引用的机器指令。
> 
> 如果有许多相同字符串值的实例，字符串实习也可以减少内存使用；例如，它是从网络或存储中读取的。这样的字符串可能包括幻数或网络协议信息。例如，XML 解析器可能会保留标记和属性的名称以节省内存。

现在 "when": cpython "interns" 一个字符串在以下情况下：

*   当您使用`intern()`非必要的内置函数（`sys.intern`在 Python 3 中移至）时。
*   小字符串（0 或 1 字节）- [Laurent Luce 的这篇内容丰富的文章](http://www.laurentluce.com/posts/python-string-objects-implementation/)解释了实现
*   Python 程序中使用的名称是自动实习的
*   用于保存模块、类或实例属性的字典具有内部键

在其他情况下，每个实现似乎在字符串何时自动实习方面都有很大的变化。

我不可能比[Alex Martinelli](https://stackoverflow.com/users/95810/alex-martelli)在[这个答案](https://stackoverflow.com/questions/2123925/when-does-python-allocate-new-memory-for-identical-strings)中做得更好（难怪这个人有 245k 的声誉）：

> Python 语言的每个实现都可以自由地在分配不可变对象（例如字符串）方面做出自己的权衡——无论是创建一个新对象，还是找到一个现有的相等对象并使用一个对它的更多引用，都可以从语言的观点看法。当然，在实践中，现实世界的实现会做出合理的折衷：在定位合适的现有对象时再引用一个合适的现有对象既便宜又容易，如果定位合适的现有对象的任务（可能或可能不存在）看起来可能需要很长时间搜索。
> 
> 因此，例如，在单个函数中多次出现相同的字符串文字将（在我知道的所有实现中）使用“对同一对象的新引用”策略，因为在构建该函数的常量池时，它非常快速且容易避免重复；但是在不同的函数之间这样做可能是一项非常耗时的任务，因此现实世界的实现要么根本不这样做，要么只在一些启发式确定的情况下这样做，在这些情况下，人们希望合理权衡编译时间（通过搜索相同的现有常量而减慢）与内存消耗（如果不断制作新的常量副本会增加）。
> 
> 我不知道 Python 的任何实现（或者就此而言，其他具有常量字符串的语言，例如 Java）在从文件中读取数据时会费力地识别可能的重复项（通过多个引用重用单个对象） - - 这似乎不是一个有希望的权衡（在这里你要支付运行时间，而不是编译时间，所以这种权衡更没有吸引力）。当然，如果您知道（由于应用程序级别的考虑）这样的不可变对象很大并且很容易出现许多重复，您可以很容易地实现自己的“常量池”策略（实习生可以帮助您为字符串做到这一点，但是例如，具有不可变项的元组、巨大的长整数等）滚动你自己的并不难）。

* * *

[初步回答]

这更像是一个评论而不是一个答案，但评论系统不太适合发布代码：

```
def main():
    while True:
        s = raw_input('feed me:')
        print '"{}".id = {}'.format(s, id(s))

if __name__ == '__main__':
    main() 
```

运行它给了我：

```
"test".id = 41898688
"test".id = 41900848
"test".id = 41898928
"test".id = 41898688
"test".id = 41900848
"test".id = 41898928
"test".id = 41898688 
```

根据我的经验，至少在 2.7 上，甚至对于`raw_input()`.

如果实现使用哈希表，我想有不止一个。现在要深入研究源代码。

[第一次更新]

看起来我的实验有缺陷：

```
def main():
    storage = []
    while True:
        s = raw_input('feed me:')
        print '"{}".id = {}'.format(s, id(s))
        storage.append(s)

if __name__ == '__main__':
    main() 
```

结果：

```
"test".id = 43274944
"test".id = 43277104
"test".id = 43487408
"test".id = 43487504
"test".id = 43487552
"test".id = 43487600
"test".id = 43487648
"test".id = 43487744
"test".id = 43487864
"test".id = 43487936
"test".id = 43487984
"test".id = 43488032 
```

在他[对另一个问题的回答中](https://stackoverflow.com/questions/2123925/when-does-python-allocate-new-memory-for-identical-strings)，用户[tzot](https://stackoverflow.com/users/6899/tzot)警告对象生命周期：

> 附注：了解 Python 中对象的生命周期非常重要。请注意以下会话：

```
Python 2.6.4 (r264:75706, Dec 26 2009, 01:03:10) 
[GCC 4.3.4] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> a="a"
>>> b="b"
>>> print id(a+b), id(b+a)
134898720 134898720
>>> print (a+b) is (b+a)
False 
```

> 您认为通过打印两个*单独*表达式的 ID 并指出“它们是相等的，因此两个表达式必须相等/等价/相同”是**错误**的。单行输出并不一定意味着其所有内容都是在同一时刻创建和/或共存的。
> 
> 如果您想知道两个对象是否是同一个对象，请直接询问 Python（使用`is`运算符）。

# jquery - 使用 Jquery 搜索许多元素时放慢速度

> ID：14906002
> 
> 赞同：1
> 
> 时间：2013-02-16T01:33:17.900
> 
> 标签：jquery, performance

我有一个包含字符串列表的数百行长的 html 表。我还有一个输入框，可以在表格中插入新行。每行中的第二个 td 元素始终是 div 中的字符串，因此表中的一行可能如下所示：

```
<tr>
    <td><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>
    </td>
    <td class="a_string" style="width:200px;">
        <div style="word-wrap:break-word;">hello world</div>
    </td>
    ...
</tr> 
```

我想根据用户的字符串列表向该表中插入新行，如果字符串已经在表中，它将被忽略并且不会插入。当来自用户的字符串列表很长并且表中的行数很长时，就会出现问题，我用来检查重复项的仓促编写的方法对于这个任务来说效率太低了：

```
function check_rows(item) { //called on each item in input list
    var tf = false;
    $('#mytable tbody').children().each(function (i) {
        //loop through each tr

        if ($('#mytable tbody').children().eq(i).children().eq(1).hasClass('a_string')) {
            //if the row is a string to compare (second td element has the class 'a_string')

            if (item == $('#mytable tbody').children().eq(i).children().eq(1).children().eq(0).html()) {
                //find the string within the div within second td in row "i" (current indexed row)
                //compare the strings and if it is found in the table break out of the loop

                tf = true;
                return false;
            }
        }
    });
    //if the item is not found in any of the rows false will be returned 
    return tf;
} 
```

该函数做了它应该做的事情（检查重复的字符串），它太慢了。我试图在没有此功能的情况下插入列表，它几乎是瞬时的，所以问题就在这里。

任何有关如何改进此功能的建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:57:44.917

你可以试试下面的代码。你不必使用`$('#mytable tbody')`inside `each`。而是使用`this`.

尝试将元素分配给变量，它将创建一个更快的引用。

```
function check_rows(item) { //called on each item in input list
    var tf = false;
    $('#mytable tbody').children().each(function (i) {
        //loop through each tr

        var tr = $(this).eq(i).children();    
        if (tr.eq(1).hasClass('a_string')) {
            //if the row is a string to compare (second td element has the class 'a_string')

            if (item == tr.eq(1).eq(0).html()) {
                //find the string within the div within second td in row "i" (current indexed row)
                //compare the strings and if it is found in the table break out of the loop

                tf = true;
                return false;
            }
        }
    });
    //if the item is not found in any of the rows false will be returned 
    return tf;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:55:11.673

如果您知道要对相同的材料进行大量 DOM 搜索，那么您可能希望将相关数据复制到一个 javascript 数据结构中，这比每次遍历 DOM 搜索要快得多时间。

如果您正在检查字符串上的完全匹配，您甚至可以使用 javascript 对象的索引功能来给您一个非常快速的是/否的答案，即确切的字符串是否已经在您的数据结构中。这应该比通过 DOM 的线性搜索快几个数量级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T01:56:26.663

我会使用这样的选择器

```
function check_rows(item) { //called on each item in input list
    var tf = false,
        mytbody = $('#mytable tbody'),
        secondCell;
    $('tr', mytbody).each(function (i) {
        //loop through each tr
        secondCell = $('td', this).eq(1);
        if (secondCell.hasClass('a_string')) {
            //if the row is a string to compare (second td element has the class 'a_string')

            if (item == $('div:first', secondCell).html()) {
                //find the string within the div within second td in row "i" (current indexed row)
                //compare the strings and if it is found in the table break out of the loop

                tf = true;
                return false;
            }
        }
    });
    //if the item is not found in any of the rows false will be returned 
    return tf;
} 
```

# javascript - 循环输入和选择元素并隐藏前一个 td

> ID：14906003
> 
> 赞同：0
> 
> 时间：2013-02-16T01:33:32.050
> 
> 标签：javascript, jquery

下面的代码循环遍历 a 中的所有`input`and`select`元素`div`并检查该值是否为空，然后将其隐藏，它运行良好：

```
$("#customfields_1 :input").filter(function() {
    return $.trim(this.value).length === 0;
}).hide(); 
```

但现在我真正想要的是隐藏以前的`td`，像这样：

```
$("#customfields_1 :input").filter(function() {
    return $.trim(this.value).length === 0;
}).prev('td').hide(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:37:13.263

遍历到使用`td`前`.prev()`。

```
.closest("td").prev("td").hide(); 
```

并查看来自 jQuery的[DOM 遍历 API 。](http://api.jquery.com/category/traversing/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T01:37:37.417

我想你想要`.parent('td').hide();`或`.closest('td').hide();`

# widget - 将“免费下载”按钮附加到 SoundCloud 网站内的 SoundCloud 播放器

> ID：14906004
> 
> 赞同：0
> 
> 时间：2013-02-16T01:33:35.530
> 
> 标签：widget, soundcloud

这个问题困扰我一个多月了。我注意到某些 SoundCloud(SC) 成员能够在 SC 站点内的 SC 播放器上附加一个显示“免费下载”（或某种变体）的按钮。我已经看到您可以自定义 SC 小部件以嵌入其他地方，但我不知道如何在 SC 上编辑它。任何解决此问题的想法或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:07:49.757

当您拥有 SoundCloud Premium 帐户[http://soundcloud.com/premium](http://soundcloud.com/premium)时，您可以重命名“购买链接”标题。它可以在曲目或集合的“编辑”页面上完成。

# mysql - 查询慢，要索引哪些字段

> ID：14906011
> 
> 赞同：0
> 
> 时间：2013-02-16T01:33:59.930
> 
> 标签：mysql, query-optimization, innodb

我有这个查询：

```
select * from 
```

当我执行它时，大约需要 45 秒和 35k 条记录。每天我都会向`gps_unit_location`表中添加 5k+ 条新记录。所以桌子会变大。我当前对所有 id 的索引。添加任何其他索引会帮助我提高此查询的性能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:46:50.310

所以，

1.  确保你有`NOT NULL`列和索引：

    ```
    INDEX ON gps_unit_location.idgps_unit_location
    INDEX ON user.iduser
    INDEX ON user_to_gps_unit.iduser
    INDEX ON user_to_gps_unit.idgps_unit
    INDEX ON gps_unit.idgps_unit
    INDEX ON gps_unit_location.idgps_unit 
    ```

2.  确保您确实需要选择带有该星的所有字段`*`

3.  试试这个查询：

    ```
    SELECT 
        `gps_unit`.`idgps_unit`, 
        `gps_unit`.`name as name`, 
        `gps_unit`.`notes as notes`, 
        `gps_unit`.`serial`, 
        `gps_unit_location`.`dt` as dt, 
        `gps_unit_location`.`idgps_unit_location`,
        `gps_unit_location`.`lat`, 
        `gps_unit_location`.`long`,
        `ip`,
        `unique_id`,
        `loc_age`,
        `reason_code`,
        `speed_kmh`,
        `VehHdg`,
        `Odometer`,
        `event_time_gmt_unix`,
        `switches`,
        `engine_on_off`
    FROM user 
    INNER JOIN user_to_gps_unit  ON user.iduser = user_to_gps_unit.iduser 
    INNER JOIN gps_unit          ON user_to_gps_unit.idgps_unit = gps_unit.idgps_unit
    INNER JOIN gps_unit_location ON gps_unit.idgps_unit = gps_unit_location.idgps_unit
    INNER JOIN
            (SELECT
                 `gps_unit_location`.`idgps_unit`,
                 MAX(`gps_unit_location`.`dt`) dtmax
             FROM `gps_unit_location`
             GROUP BY 1
             ) r1 ON r1.idgps_unit = gps_unit_location.idgps_unit AND r1.dtmax = gps_unit_location.dt
    WHERE 
        user.iduser = 14 
    ```

在旁注中，我认为您不需要定义为主键的列上的唯一索引，这会导致插入/更新语句的写入开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T02:15:49.043

通用的答案是索引那些用于连接和约束的列（ON 和 WHERE 子句）。使用复合索引（首先连接，然后是具有最低基数约束的约束）。

哦，让你所有的身份证都“未签名”。

# cakephp - CakePHP 字段具有字段名作为值

> ID：14906012
> 
> 赞同：0
> 
> 时间：2013-02-16T01:34:20.963
> 
> 标签：cakephp, cakephp-2.1

在一个页面上，我有这个表格：

```
<form action="/store_collections/create" method="post">
    <input type="text" name="data[test]" placeholder="Create new collection" class="span2">
</form> 
```

我提交将其发送到 StoreCollectionsController 的表单：

```
<?php
App::uses('AppController', 'Controller');
class StoreCollectionsController extends AppController {

public function create() {
    print_r($this->request->data);

} 
```

`print_r`返回这个：

```
Array
(
     [test] => fdsdata[test]=fds
) 
```

**这怎么可能？？**该字段的名称附加到该值。该值应该是`fds`但它是`fdsdata[test]=fds`.

有任何想法吗？我从控制器 ($uses...) 中删除了所有内容以查看它可能是什么。网站上的所有其他表格都很好。只是提交给这个控制器的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:02:29.940

上面示例中的输入控件名称属性缺少模型的名称。您是否使用表单助手在视图上创建表单？在你看来试试这个：

```
<?php echo $this->Form->create('StoreCollection'); ?>
<?php echo $this->Form->input('test'); ?>
<?php echo $this->Form->end('submit'); ?> 
```

# c - 无法整理循环队列？怎么了？

> ID：14906014
> 
> 赞同：0
> 
> 时间：2013-02-16T01:34:27.067
> 
> 标签：c, data-structures, queue, circular-buffer

我正在尝试实现一个采用结构的循环队列

*   ⟶ 如果没有入队，则检查队列是否已满 ⟶ 否则返回 0
*   ⟶ 检查队列是否为空，如果没有出队 ⟶ 否则返回 0

以下是我的代码：

```
 #ifndef_QUEUE_H_
    #define QUEUE_H_
    #define QUEUE_SIZE 32

    typedef struct queue 
    {
      int head;
      int tail;
      int buffer[QUEUE_SIZE];
    } queue_t;

    void init_queue(queue_t *);
    int enqueue(queue_t *, int);
    int isfull(queue_t *);
    int dequeue(queue_t *);            
    int queue_empty(queue_t *);            

    #endif
    /* queue.h ends here */

    /* *************************queue.c starts here************************ */
    #include<queue.h>
    #include<stm32f30x.h>

    #define QUEUE_SIZE 32

    int head;
    int tail;

    void init_queue(queue_t *q)
    {
      q->head = 0;
      q->tail = 0;
    }

    int enqueue(queue_t *q, int a )
    {
      if ((((q->head)+1)%QUEUE_SIZE)!=q->tail) 
        {
          q->buffer[q->head]=a;
          q->head=(((q->head)+1)%QUEUE_SIZE);
          return 1 ;
         }
     else 
         {  
            return 0 ;
         }

     }

    int dequeue(queue_t *q)
     {
      int temp ;
      if (queue_empty(q)) 
         {
           return 0;
          }
      else
        {
          temp = q->buffer[q->tail];
          q->tail=((q->tail)+1)%QUEUE_SIZE;
          return temp;
        }

    }

    int queue_empty(queue_t *q)
    {
      if (q->head == q->tail)
        {
          return 1;
        }
      return 0;
    }

    /* **************queue.c ends here********************** */ 
```

当我尝试测试队列时：示例输入“hello”并尝试打印其中的内容，它会打印“ello hlo elo..”和此类不正确的回复。

我在 getchar 和 putchar 函数中使用 enqueue 和 dequeue 函数。下面是我的 getchar 和 putchar 函数：

```
queue_t rxbuf;
queue_t txbuf;
int putchar(int c) 
{

   while(!(enqueue(&txbuf, c)));
}

int nonblockgetchar(void)
{
  dequeue(&rxbuf);
}

int getchar(void) 
{
  int ch;
  while (!(ch=dequeue(&rxbuf)));
  return (ch);
} 
```

感谢您的时间和帮助。

# arrays - 如何在不使用 AS3 中的 reverse 方法的情况下反转 Array？

> ID：14906016
> 
> 赞同：0
> 
> 时间：2013-02-16T01:34:35.787
> 
> 标签：arrays, actionscript-3, action, reverse

如何在不使用该`reverse()`方法的情况下反转数组？

```
public class Main extends Sprite
{
    private var _reversedList:Array = new Array();      

    public function Main()
    {   
        var yourShoppingList:Array = ["Milk","Bread","Eggs","Cereal","Cheese","Ham"];
        shoppingList(yourShoppingList);
        trace("The original array was " + yourShoppingList + " and now it is reversed as " + _reversedList + ".");
    }

    private function shoppingList(items:Array):Array {
        while(items.length){
            var lastItem:String = items.pop();
            _reversedList.unshift(lastItem);
        }
        return _reversedList;
    }
} 
```

这就是我到目前为止所拥有的。我尝试使用`_reversedList.unshift(items.pop());`，但它给了我一个错误，所以我最终创建了一个变量，现在看起来没问题？但无论如何，它并没有反转阵列，我不知道为什么。

感谢您的时间和帮助。对此，我真的非常感激。

*注意：对于那些是 Full Sail 学生的人，请随时参考此内容，但不要复制/粘贴，因为老师知道这篇文章，您可能会因作弊而受到处罚。只是一个友好的警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:42:16.850

改变

```
_reversedList.unshift(lastItem); 
```

到

```
_reversedList.push(lastItem); 
```

为我工作。取出最后一项并将其作为新数组的第一项推入。

# jakarta-ee - 富客户端/Java EE 服务器最佳实践？

> ID：14906017
> 
> 赞同：0
> 
> 时间：2013-02-16T01:34:48.133
> 
> 标签：jakarta-ee, gwt, ejb, dao, rich-client-platform

我正在寻找一些关于重新架构 2EE 应用程序的建议，这在我看来过于复杂，我想知道是否有更简单的方法可以做到这一点。架构如下：

*   使用 GWT 的基于浏览器的客户端
*   GWT RPC 异步接口
*   GWT 远程服务 Servlet
*   业务委托层
*   无状态 EJB（EJB 2.0 规范！）
*   DAO（使用 iBatis 框架）
*   数据库

我们的应用程序是具有丰富客户端界面的客户端/服务器类型的应用程序 - 我敢肯定，这不是唯一的。有没有更简单的方法来实现富客户端，您还希望在服务器上完成大量工作，避免大量往返？这种设计的最佳实践/工具是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:29:39.553

您的堆栈层还不错。我们有基于 Hibernate DAO 访问数据库的业务层上的 GWT RPC。我们正在交付一个具有 100 多个屏幕的企业应用程序，具有良好的性能和复杂性。

您的 RPC 替代方案 - [RequestFactory](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory)，[JSON 与 RequestBuilder](https://developers.google.com/web-toolkit/doc/latest/tutorial/JSON)

服务器端堆栈的替代方案 - 带有 RF 的 Hibernate 或带有 Dozer 和 RPC 的 Hibernate。

RequestFactory 在网络上的数据占用量最少，但学习曲线的复杂性很高。我们想搬到射频，但它真的很难学！！！

# c# - 打开/关闭 CapsLock - 在表单应用程序启动期间

> ID：14906019
> 
> 赞同：0
> 
> 时间：2013-02-16T01:35:39.610
> 
> 标签：c#, winforms

我在编写 C# 表单应用程序时需要帮助，在应用程序启动期间基于配置文件中的条目。键盘中的 CAPSLOCK 应为 ON/OFF。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T01:48:28.793

不要乱用 CapsLock 键。从来没有——那是非常糟糕的用户体验。

相反，您应该处理相应文本框上的 KeyPress 事件，并根据您的设置将字符转换为大写或小写。像这样：

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
        {
            e.KeyChar = char.ToUpper(e.KeyChar);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T09:39:14.780

基于来自各种来源的进一步分析和深入研究以下是我为解决我之前发布的问题而编写的代码片段

```
 /// <summary>
    /// Enabling or Disabling CAPSLOCK button.
    /// Based on value retirevied from settings and also present CAPSLOCK button status.
    /// </summary>
    public void CharacterCasing()
    {
        if (settings.IsCapsLockOn ^ Console.CapsLock)
        {
            const int KEYEVENTF_EXTENDEDKEY = 0x1;
            const int KEYEVENTF_KEYUP = 0x2;
            keybd_event(0x14, 0x45, KEYEVENTF_EXTENDEDKEY, (UIntPtr)0);
            keybd_event(0x14, 0x45, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP, (UIntPtr)0);
        }

    } 
```

您的意见和意见将不胜感激。

# c# - 尝试在 Get 中设置时出现 C# 堆栈溢出异常

> ID：14906022
> 
> 赞同：1
> 
> 时间：2013-02-16T01:35:49.990
> 
> 标签：c#, get, set, stack-overflow

所以我试图对此保持聪明，但看起来这个想法很愚蠢，因为我马上就遇到了堆栈溢出异常。

理想情况下，我想`CheckInternetStatus`在使用`IsConnected`标志时运行。

我怎样才能正确地做到这一点？或者这根本不是一个好主意？

```
public static class Internet
{
    public static bool IsConnected
    {
        get
        {
            CheckInternetStatus();
            return IsConnected;
        }
        set
        {
            IsConnected = value;
        }
    }
} 
```

附加信息：`CheckInternetStatus`更新`IsConnected`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T01:39:45.193

您的代码有两个问题：

**1**）没有后备变量，您正在递归调用属性`IsConnected`：

```
private bool _isConnected;

public static bool IsConnected
{
    get
    {
        _isConnected = CheckInternetStatus();
        return _isConnected;
    }
    set
    {
        _isConnected = value;
    }
} 
```

**2**）你不应该在房产中做“大量工作”。改用一种方法。这可以更好地向阅读您的代码的人传达意图

实际上有3件事：

**3**）如果你坚持使用一个属性（我不会），setter 可能应该是`private`. 如果您实际上没有连接，则不希望设置连接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T01:38:28.947

认为你想要

```
private static bool _isConnected;
public static bool IsConnected
    {
        get
        {
            CheckInternetStatus();
            return _isConnected;
        }
        set
        {
            _isConnected= value;
        }
    } 
```

因为你递归调用你的财产

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T01:38:52.663

在这种情况下，支持字段可能非常有用。

```
private static bool _isConnected;

public static bool IsConnected {
    get {
        CheckInternetStatus();
        return _isConnected;
    }
    set {
        _isConnected= value;
    }
} 
```

## 备择方案

> 附加信息：CheckInternetStatus 更新 IsConnected

`CheckInternetStatus`应该操纵私有领域。此外，`set`应该是私有的（或可能不存在）。但`IsConnected`似乎有一些意想不到的副作用（连接行为）。相反，怎么样：

```
public static bool IsConnected {
    get;
    private set;
}

public static void Connect(){
    if( IsConnected ){
        // exit, or fail if this is considered an exceptional scenario
    }

    // do work
    IsConnected = true;
}

// call
if( !Foo.IsConnected ){
    Foo.Connect();
} 
```

这似乎更清晰，更明显。属性（作为一般规则）不应执行大量工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T01:39:01.763

你无限循环。

```
return IsConnected; 
```

调用你的吸气剂，它一次又一次地调用你的吸气剂，直到你崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T01:39:53.553

你做错了。你需要一些实例变量。你在呼唤自己。修正看起来像：

```
public static class Internet
{
private static bool _isConnected;

public static bool IsConnected
{
    get
    {
        CheckInternetStatus();
        return _isConnected;
    }
    set
    {
        _isConnected = value;
    }
} 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-16T01:49:17.437

我想你也可以这样使用，

```
 private static bool _isConnected;

        public static bool isConnected
        {
            get { CheckInternetStatus(); return _isConnected; }
            set { isConnected = value; }
        } 
```

# mysql - 难以在 SQL 查询中放置 2 个 WHERE

> ID：14906024
> 
> 赞同：0
> 
> 时间：2013-02-16T01:36:05.627
> 
> 标签：mysql

我的 SQL 查询有什么问题？

它不断返回以下错误`WHERE building_id=:building_id`：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 ':building_id AND WHERE NOT EXISTS ( SELECT 1 FROM ts_roompref ' 附近使用正确的语法：SELECT COUNT(*) totalCount FROM ts_room WHERE building_id=:building_id AND WHERE NOT存在（从 ts_roompref 中选择 1 加入 ts_request ON ts_roompref.request_id = ts_request.roompref_id AND day_id = 1 AND period_id = 1 WHERE ts_room.id = ts_roompref.room_id）

这是我的代码：

```
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE building_id=:building_id AND
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.roompref_id
      AND day_id = 1 
      AND period_id = 1
    WHERE 
      ts_room.id = ts_roompref.room_id) 
```

我在这里有一个 SQL 表 - [http://sqlfiddle.com/#!2/30297/8](http://sqlfiddle.com/#!2/30297/8)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T01:38:10.173

只需删除第二个`WHERE`关键字。

这不会在 SQL Fiddle 中编译，因为`:buildingid`.

[这是一个工作示例](http://sqlfiddle.com/#!2/30297/15)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T01:38:12.610

在 AND 之后不需要第二个 WHERE

```
... WHERE building_id=:building_id AND NOT EXISTS ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T01:38:13.483

你只需要一个`WHERE`

```
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 
WHERE building_id=:building_id AND

  NOT EXISTS (
    SELECT 1
    FROM ts_roompref 
      JOIN ts_request 
      ON ts_roompref.request_id = ts_request.roompref_id
      AND day_id = 1 
      AND period_id = 1
    WHERE 
      ts_room.id = ts_roompref.room_id) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-16T01:38:39.047

在`AND`你不应该写`WHERE`第二次之后。

# arduino - 将许多输入连接到 Arduino

> ID：14906029
> 
> 赞同：3
> 
> 时间：2013-02-16T01:36:40.503
> 
> 标签：arduino

我需要帮助使用我的 Arduino 设置系统并连接约 90 个输入。这是我设想的系统：

*   Arduino 连接到找零/投币机（比如在自动售货机上买可乐）。

*   当客户投入适当数量的钱时，他们可以选择他们想要激活的机器（就像在自动售货机上选择不同的糖果棒一样）。将有大约 90 种选择。

*   我希望 Arduino 接受此输入，并能够向 90 台机器中的任何一台机器发出信号，以激活该机器中的某些进程。

*   该系统目前的工作方式是每台机器都有自己的货币插入机制，可以在每台机器上单独激活该过程。我想创建一个了解每台机器的集中支付系统。

我的问题如下：

*   是否可以将 90 个输入连接到 Arduino，然后将单独的消息发送到 90 个输入中的每一个？（我的研究让我找到[了一个移位寄存器](http://www.arduino.cc/en/Tutorial/ShiftOut)，但似乎不太可能以这种方式将 90 个单独的输入连接到 Arduino。

*   是否有连接到 Arduino 的部分可以接受金钱作为零钱？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T01:53:05.563

您可以将 arduino 连接到多路复用器，从而增加其输入容量： [Arduino Playground Multiplexer Tutorial](http://playground.arduino.cc/learning/4051)

Sparkfun 有一个封装多路复用器 IC 的[预制屏蔽](https://www.sparkfun.com/products/9832)，但它只为您提供 48 个输入。

至于取硬币，可以找到一种叫做硬币接收器的装置。有许多供应商，包括[Sparkfun](https://www.sparkfun.com/products/11636)。

可能有一些方法可以减少必要的输入和/或输出。例如，您是否需要 90 个按钮，或者您可以使用 10 个键盘，并为每个项目指定一个两位数的代码？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T01:55:22.140

是的，这是完全可行的。一个键盘有 101 个键，至少从历史上看，它是由芯片解码的，比 Arduino 强大得多。移位寄存器可以链接起来以允许大量的输入和输出，但代价是读/写速度。您还可以购买一些芯片（例如 LM8330）来为您解码矩阵键盘，并且可以通过 I2C 访问，它只需要两个引脚。投币口在电气上与按钮相同，只是它仅在插入有效硬币时才会切换。

# matlab - 在matlab中打破递归函数调用

> ID：14906036
> 
> 赞同：0
> 
> 时间：2013-02-16T01:37:38.837
> 
> 标签：matlab

以下只是一个简单的例子来概括和说明我遇到的问题。

如果我有如下功能：

```
function newtraph(initialguess,funct,dfunct)
ht = funct(initialguess);
if abs(ht) < 10^(-6)
    disp(initialguess); return
elseif abs(ht) > 10^6
    disp('Fix Guess'); return
end
newtraph(initialguess-(ht/dfunct(initialguess)), funct, dfunct); 
```

退出的唯一方法（我知道）是通过使用这些 return 语句。但是，我想将此类函数的输出分配给基础工作区中的变量。我想做一些类似的事情：

```
function out = newtraph(initialguess,funct,dfunct)
ht = funct(initialguess);
if abs(ht) < 10^(-6)
    out = initialguess; return
elseif abs(ht) > 10^6
    disp('Fix Guess'); return
end
newtraph(initialguess-(ht/dfunct(initialguess)), funct, dfunct); 
```

这不起作用，`return`阻止分配。

```
Output argument "out" (and maybe others) not assigned 
```

我对解决方案的一些想法是使用全局变量或`evalin`. 但是有没有我想念的更简单的方法。我只想将这种风格的函数的输出传递回基本工作区？

一个测试用例，以防万一：

```
funct=@(x) -x-cos(x); dfunct=@(x) sin(x)-1; initialguess=1; 
```

谢谢你的时间。

好吧，我是个白痴。这只是忘记了最终分配的情况：

```
function out = newtraph(initialguess,funct,dfunct)
ht = funct(initialguess);
if abs(ht) < 10^(-6) %Tolerance
    out = initialguess; return
elseif abs(ht) > 10^6
    out=0; return
end
out = newtraph(initialguess-(ht/dfunct(initialguess)), funct, dfunct); 
```

感谢您的快速帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:48:04.860

您不起作用的示例功能几乎就在那里。你只需要分配

```
out = newtraph(...) 
```

在最后一行，以便您可以捕获输出。

当您报告“修正猜测”时，您可能还需要分配 out = 0 或一些虚拟值，以便代码的分支也将返回一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:47:26.623

在这里只是一个猜测：你不是错过了最后一行的任务吗？而且如果之前没有分配过，您是否不需要在 elseif 中初始化？IE

```
ht = funct(initialguess);
if abs(ht) < 10^(-6)
    out = initialguess;
    return
elseif abs(ht) > 10^6
    disp('Fix Guess');
    if ~exist('out')
       out=1;  % you need some default value if you ever reach this code without ever initializing out
    end
    return
end
out = newtraph(initialguess-(ht/dfunct(initialguess)), funct, dfunct); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T10:17:32.270

这个答案可能有点晚了，但我认为它足够重要，值得在这里指出。为了使递归更清晰，我在这里推荐另一种方法。

```
function out = newtraph(initialguess,funct,dfunct,counter)
maxCount = % yourValue;
ht = funct(initialguess);
if abs(ht) > 10^(-6) || abs(ht) < 10^6 || counter<maxCount % Break out after x tries
    counter = counter+1;
    out = newtraph(initialguess-(ht/dfunct(initialguess)), funct, dfunct,counter);
elseif abs(ht) < 10^(-6) %Tolerance
    out = initialguess;
else
    warning('Convergence were not reached!');
    out=0;
end 
```

首选结构可能是个人的，但这样很明显，您会继续前进，直到达到停止标准，即函数收敛或发散。

此外，**递归函数很危险，因为停止它们的唯一方法是满足退出标准或程序崩溃时**。Matlab 对递归可以进行多少次然后抛出错误有限制。您很可能希望自己处理错误（就像您已经通过设置所做的那样`out=0;`）。此外，matlabs 限制为 500 次递归调用，您很可能希望更早地终止函数，可能在 8-20 次调用时终止，具体取决于您的算法。

# c# - 为非缓冲文件上传覆盖 WebHostBufferPolicySelector

> ID：14906052
> 
> 赞同：5
> 
> 时间：2013-02-16T01:40:56.660
> 
> 标签：c#, file-upload, asp.net-web-api

为了创建非缓冲文件上传，我扩展了 System.Web.Http.WebHost.WebHostBufferPolicySelector，覆盖了本文所述的函数 UseBufferedInputStream()：http: [//www.strathweb.com/2012/09/dealing -with-large-files-in-asp-net-web-api/](http://www.strathweb.com/2012/09/dealing-with-large-files-in-asp-net-web-api/)。当一个文件被发布到我的控制器时，我可以在跟踪输出中看到被覆盖的函数 UseBufferedInputStream() 肯定会按预期返回 FALSE。但是，使用诊断工具，我可以看到内存随着文件的上传而增长。

在我的自定义 MediaTypeFormatter 中似乎出现了大量内存使用（类似于此处的 FileMediaFormatter：http://lonetechie.com/ [）](http://lonetechie.com/)。正是在这个格式化程序中，我想将传入的文件增量写入磁盘，但我还需要解析 json 并使用 Content-Type:multipart/form-data 上传进行一些其他操作。因此，我使用 HttpContent 方法 ReadAsMultiPartAsync()，这似乎是内存增长的来源。我在“等待”之前/之后放置了跟踪输出，看起来当任务阻塞时内存使用量正在迅速增加。

在 ReadAsMultiPartAsync() 返回的部分中找到文件内容后，我将使用 Stream.CopyTo() 将文件内容写入磁盘。这会按预期写入磁盘，但不幸的是，此时源文件已经在内存中。

有人对可能出现的问题有任何想法吗？似乎 ReadAsMultiPartAsync() 正在缓冲整个帖子数据；如果这是真的，为什么我们需要 var fileStream = await fileContent.ReadAsStreamAsync() 来获取文件内容？有没有另一种方法来完成部分的拆分而不将它们读入内存？我的 MediaTypeFormatter 中的代码如下所示：

```
// save the stream so we can seek/read again later
Stream stream = await content.ReadAsStreamAsync();  

var parts = await content.ReadAsMultipartAsync(); // <- memory usage grows rapidly

if (!content.IsMimeMultipartContent())
{
    throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);               
}

//
// pull data out of parts.Contents, process json, etc.
//

// find the file data in the multipart contents
var fileContent = parts.Contents.FirstOrDefault(
x => x.Headers.ContentDisposition.DispositionType.ToLower().Trim() == "form-data" && 
x.Headers.ContentDisposition.Name.ToLower().Trim() == "\"" + DATA_CONTENT_DISPOSITION_NAME_FILE_CONTENTS + "\"");

// write the file to disk
using (var fileStream = await fileContent.ReadAsStreamAsync())
{
    using (FileStream toDisk = File.OpenWrite("myUploadedFile.bin"))
    {
        ((Stream)fileStream).CopyTo(toDisk);
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T04:21:25.463

`WebHostBufferPolicySelector`仅指定底层请求是否无缓冲。这就是 Web API 将在后台执行的操作：

```
IHostBufferPolicySelector policySelector = _bufferPolicySelector.Value;
bool isInputBuffered = policySelector == null ? true : policySelector.UseBufferedInputStream(httpContextBase);
    Stream inputStream = isInputBuffered
                  ? requestBase.InputStream
          : httpContextBase.ApplicationInstance.Request.GetBufferlessInputStream(); 
```

因此，如果您的实现返回 false，则请求是无缓冲的。

但是，`ReadAsMultipartAsync()`将所有内容加载到`MemoryStream`- 因为如果您不指定提供程序，它默认为 MultipartMemoryStreamProvider。

要在处理每个部分时自动将文件保存到磁盘，请使用[MultipartFormDataStreamProvider](http://msdn.microsoft.com/en-us/library/system.net.http.multipartformdatastreamprovider(v=vs.108).aspx)（如果您处理文件和表单数据）或[MultipartFileStreamProvider](http://msdn.microsoft.com/en-us/library/system.net.http.multipartfilestreamprovider(v=vs.108).aspx)（如果您只处理文件）。

[在asp.net](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)或[这里](http://www.strathweb.com/2012/08/a-guide-to-asynchronous-file-uploads-in-asp-net-web-api-rtm/)有一个例子。在这些示例中，一切都发生在控制器中，但没有理由不使用它，即格式化程序。

另一种选择，如果你真的想玩流，是实现一个从[MultipartStreamProvider](https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Net.Http.Formatting/MultipartStreamProvider.cs)继承的自定义类，它会在获取流的一部分后立即触发你想要的任何处理。用法类似于上述提供程序 - 您需要将其传递给`ReadAsMultipartAsync(provider)`方法。

最后——如果你有自杀的感觉——因为理论上底层的请求流是无缓冲的，你可以在你的控制器或格式化程序中使用这样的东西：

```
 Stream stream = HttpContext.Current.Request.GetBufferlessInputStream();
            byte[] b = new byte[32*1024];
            while ((n = stream.Read(b, 0, b.Length)) > 0)
            {
                //do stuff with stream bit
            } 
```

但当然，这是非常好的，因为没有更好的词，“贫民窟”。

# php - PHP网络错误

> ID：14906055
> 
> 赞同：0
> 
> 时间：2013-02-16T01:41:51.807
> 
> 标签：php, javascript, jquery

我正在开发一个带有 1 个 javascript 文件和 1 个 php 文件的简单项目。我正在尝试使用 ajax 调用一些 php 代码，然后将文本显示到灯箱上。我的问题是我收到以下错误：

此错误指向我的 php 文件。

```
"NetworkError: 404 Not Found - http://localhost/folder/folder/dictionary.php" 
```

我已检查（并仔细检查）我的所有代码，但我不知道如何修复此错误。有人可以帮我吗？我将在下面提供我的 JavaScript 和 PHP 代码：

**JavaScript：**

```
$(document).ready(function() {
    $("#SearchField").submit(function(e) {  
        e.preventDefault(); 

        // grabs all post variables in the form
        var info = $(this).serialize();

        $.post('dictionary.php', info, function(data) {
            $('.DictionaryContentWrapper').append(data);
        });

        // prevent server from refreshing page
        return false;   
    });
}); 
```

**PHP：**

```
$input = $_POST['input'];
echo $input; 
```

目录结构：

```
index.php
Widget
  - **input.js**
  - getURL.php
  - **dictionary.php**
lightbox
  - lightbox.css
  - lightbox.js 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:51:49.667

一个简单的解决方案是使用相对于 Web 服务器根目录的绝对路径。

就像是：

```
$.post('/Widget/dictionary.php', info, function(data) { 
```

但是，这假设您`index.php`驻留在网站的根目录中`http://localhost/index.php`- 但从您发布的信息中不是很清楚：错误消息似乎不适合目录结构。

**编辑：**如果您从 调用脚本`index.php`，您还可以使用：

```
$.post('Widget/dictionary.php', info, function(data) {    // path relative to index.php 
```

# c++ - async_connect 挂起 - Ubuntu

> ID：14906058
> 
> 赞同：1
> 
> 时间：2013-02-16T01:42:37.060
> 
> 标签：c++, boost, boost-asio

我正在使用 boost::asio 通过 TCP 套接字在端口 443 上向 graph.facebook.com 发送 HTTPS GET 消息。当我在我家的 linux 机器上执行此操作时，async_connect 会立即通过，一切都很好。但是，当我在我的 rackspace linux 服务器（也是 Ubuntu）上运行相同的代码时，async_connect 每次在连接通过之前都会挂起大约 20-30 秒。这是我的代码

```
boost::asio::io_service Server::m_ioService;
boost::asio::ssl::context Server::m_ctx(boost::asio::ssl::context::sslv23);

boost::shared_ptr<boost::asio::io_service::work> m_work(new boost::asio::io_service::work(m_ioService);
boost::thread_group m_threads;
m_ctx.set_default_verify_paths();

for(int z=0; z < 4; ++z)
{
   m_threads.create_thread(boost::bind(&boost::asio::io_service::run, &m_ioService));
}

boost::asio::ip::tcp::resolver m_resolver;
boost::asio::ssl::stream<boost::asio::ip::tcp::socket> m_sslSocket;
boost::asio::streambuf m_request;

m_sslSocket.set_verify_mode(boost::asio::ssl::verify_peer);
m_sslSocket.set_verify_callback(boost::asio::ssl::rfc2818_verification("graph.facebook.com"));

std::ostream request_stream(&m_request);
request_stream << "GET " << a_path << " HTTP/1.0\r\n";
request_stream << "Host: " << "graph.facebook.com" << "\r\n";
request_stream << "Accept: */*\r\n";
request_stream << "Connection: close\r\n\r\n";

boost::asio::ip::tcp::resolver::query query("graph.facebook.com", "https");
m_resolver.async_resolve(query, boost::bind(&HandleResolve, this,  boost::asio::placeholders::error, boost::asio::placeholders::iterator));

void HandleResolve(const boost::system::error_code& a_err, boost::asio::ip::tcp::resolver::iterator a_endpointIterator)
{
   if(!a_err)
   {
       // Attempt a connection to each endpoint in the list until we
       // successfully establish a connection.
       std::cout << "Before connect" << std::endl;
       boost::asio::async_connect(m_sslSocket.lowest_layer(), a_endpointIterator, boost::bind(&HandleConnect, this, boost::asio::placeholders::error));
   }
   else
   {
         std::cout << "Error: " << a_err.message() << "\n";
   }
} 
```

我没有收到错误，并且连接最终可以正常工作，但是 20-30 秒的延迟使应用程序无法使用。任何帮助表示赞赏。

# javascript - easyXDM 为 iframe 增加了神秘的额外高度

> ID：14906061
> 
> 赞同：2
> 
> 时间：2013-02-16T01:43:07.450
> 
> 标签：javascript, easyxdm

我必须将服务提供商的内容放在父网站的 iframe 中。iframe 内容的高度会根据用户交互而动态变化。

我面临的问题是 iframe 添加了一些额外的高度。我不确定高度来自哪里。

任何见解表示赞赏。

[链接到页面](http://haripriyaa.zymichost.com/iframe-easyXDM.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T14:05:55.743

我遇到了同样的问题当您将高度分配给 iframe 元素时，不要将其分配给所有 iframe。因为它会影响广告和社交媒体插件中的 iframe。

所以我做了以下

```
$('#divID iframe').height(easyXDMmessage);
$('#divID iframe').width('100%'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:08:44.087

我不认为这是easyXDM的错。

似乎正在计算的高度是针对 iframe 的当前宽度。如果您删除 HTML 文件中的第 28 行，您将看到高度已完全填充。（或以下行）（或者您可以保留代码原样，并在开发人员工具中禁用高度样式并查看结果）

```
 this.container.getElementsByTagName("iframe")[0].style.width = "500px"; 
```

由于很难在调试器中修改代码，接下来我要尝试的是，在填充内容和计算出的高度之前将宽度设置为您希望的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-26T00:30:23.097

在空 iframe 的情况下，我遇到了一个问题，如果将高度设置为 0px，父块元素仍将显示至少一行空文本。这是因为 iframe 实际上是内联元素，因此即使 iframe 本身的高度为零，它们的父块仍将显示一个行高的文本。这是简单的修复：

```
iframe#my_iframe { display:block; } 
```

# heroku - 无法将 SSL 自签名证书文件上传到 Heroku

> ID：14906068
> 
> 赞同：1
> 
> 时间：2013-02-16T01:44:29.533
> 
> 标签：heroku, ssl-certificate

我正在按照本指南部署到 Heroku：[https ://gist.github.com/harlantwood/3792692](https://gist.github.com/harlantwood/3792692)

我已经创建了所需的文件（site.key、site.csr、final.crt）。当我运行**heroku domain:add myapp.herokuapp.com**时，响应是“myapp.herokuapp.com 目前正在被另一个应用程序使用”。

这是什么意思，我怎样才能停止使用它的任何应用程序？

# django - python Django无法分配“ ": "Prediccion.idjuego" 必须是 "Juego" 实例

> ID：14906073
> 
> 赞同：0
> 
> 时间：2013-02-16T01:45:44.607
> 
> 标签：django, django-models, django-views

你好我有以下问题（对不起我的英语不好）

我有以下型号

我有 3 个模型，其中“Prediccion”有两个来自“Juego”模型和“Usuario”模型的外键

```
class Juego(models.Model):
    #id = models.IntegerField(primary_key=True, db_column='Id')
    equipoa = models.CharField(max_length=135, db_column='EquipoA')
    equipob = models.CharField(max_length=135, db_column='EquipoB')
    resultadoa = models.IntegerField(null=True, db_column='ResultadoA', blank=True)
    resultadob = models.IntegerField(null=True, db_column='ResultadoB', blank=True)
    fecha = models.DateField(null=True, db_column='Fecha', blank=True)
    class Meta:
        db_table = u'juego'

class Usuario(models.Model):
    # id = models.IntegerField(primary_key=True, db_column='Id') # Field name made lowercase.
    nombre = models.CharField(max_length=135, db_column='Nombre') 
    fechanacimiento = models.DateField(null=True, db_column='FechaNacimiento', blank=True) 
    nombreusuario = models.CharField(max_length=135, db_column='NombreUsuario') 
    clave = models.CharField(max_length=135, db_column='Clave') 
    class Meta:
        db_table = u'usuario'

class Prediccion(models.Model):
    #id = models.IntegerField(primary_key=True, db_column='Id')
    idusuario = models.ForeignKey(AuthUser, db_column='IdUsuario') 
    idjuego = models.ForeignKey(Juego, db_column='IdJuego') # Field name made lowercase.
    equipoa = models.IntegerField(null=True, db_column='EquipoA', blank=True)
    equipob = models.IntegerField(null=True, db_column='EquipoB', blank=True) 
    resultado = models.IntegerField(null=True, db_column='Resultado', blank=True)
    class Meta:
        db_table = u'prediccion' 
```

我有以下看法吗

```
from django.shortcuts import render_to_response
from scorecenter.JuegoApp.models import Juego
from scorecenter.PrediccionApp.models import Prediccion
from scorecenter.PrediccionApp.models import TipoResultado
from scorecenter.PrediccionApp.models import AuthUser

def juegosap(request, pagina="1", idgame=-1, resa=-1, resb=-1):
    if(idgame==-1 and resa==-1 and resb==-1):
        pag = int(pagina)
        pag = pag-1
        lista = Juego.objects.order_by('-fecha', '-id')[pag*4:pag*4+4]
        template_name = 'juegos_semana.html'
        return render_to_response(template_name,{'lista':lista})
    else:
        game = Juego.objects.get(id=int(idgame))
        print(game.equipoa)
        print(game.id)
        user = AuthUser.objects.get(username=request.user)
        print(user.username)
        temporal = Prediccion(idusuario = user, idjuego = game, equipoa=int(resa), equipob=int(resb))
        temporal.resultado = 1
        temporal.save()
        pag = int(pagina)
        pag = pag-1
        lista = Juego.objects.order_by('-fecha')[pag*4:pag*4+4]
        template_name = 'juegos_semana.html'
        return render_to_response(template_name,{'lista':lista}) 
```

但我收到以下错误：

```
Cannot assign "<Juego: Juego object>": "Prediccion.idjuego" must be a "Juego" instance.
in the next line:
temporal = Prediccion(idusuario = user, idjuego = game, equipoa=int(resa), equipob=int(resb)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:55:41.570

您的 idjuego 是外键，因此该值必须等于 id，

尝试：

```
temporal = Prediccion(idusuario = user, idjuego = game.id, equipoa=int(resa), equipob=int(resb)) 
```

另外，在您的每个模型中，请输入 unicode 以便它不会返回“< object >”。这是一个示例：

```
def __unicode__(self):
    return self.field_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:15:41.607

```
temporal.idjuego_id = game.id
temporal.save() 
```

ForeignKey 字段将它们的值存储在一个以_id 结尾的属性中，您可以直接访问该属性以避免访问数据库。

ForeignKey 的 _id 版本是 Django 的一个特别有用的方面，每个人都应该知道并在适当的时候不时使用它。

# c - 如何使用短整数的左右字节？

> ID：14906077
> 
> 赞同：-1
> 
> 时间：2013-02-16T01:47:05.127
> 
> 标签：c, int, byte, bit, short

我有一个短整数，即 2 个字节，但我只想将左字节输出到文件中。我该怎么做呢？我正在使用二进制函数 open()、read()、write() 等。

我还想把右边的字节左移8次，这样右边的字节占据左边，右边已经清全0了。

我很抱歉没有展示我已经尝试过的东西——我是一个 C 菜鸟，找不到任何关于如何做到这一点的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:14:48.213

你可以试试这个方法

```
 int someNum = 0x1234;
    int  leftByte, rightByte;

    leftByte = (someNum >> 8) & 0xff;
    rightByte = (someNum) & 0xff; 
```

# c++ - C++ OpenGL - 顶点颜色

> ID：14906078
> 
> 赞同：2
> 
> 时间：2013-02-16T01:47:08.677
> 
> 标签：c++, opengl

我正在玩 OpenGL 顶点颜色。基本上，我画了一个由 2 个三角形组成的正方形。我能够按照我想要的方式为第一个三角形着色，但第二个三角形没有按照我预期的方式着色。过去两天我一直在研究这个问题，但我无法弄清楚，所以我在这里寻求一些指导。

这是我的代码：

```
void Construct_Cube()
{
    //---------------------
    //Init cube's vertices

    float Vertices_Temp[] = 
    {
        0, 0, 0, //bottom-left corner
        0, 1, 0, //top-left
        1, 1, 0, //top-right
        1, 0, 0  //bottom-right
    };

    for(int i = 0; i < (sizeof(Vertices_Temp) / sizeof(GLfloat)); i++)
    {
        Vertices_Cube.push_back(Vertices_Temp[i]);
    }

    //---------------------------
    //Init cube's draw order list
    int tempOrder[] = { 0, 1, 2, 0, 3, 2};

    for(int i = 0; i < (sizeof(tempOrder) / sizeof(int)); i++)
    {
        drawOrder_Cube.push_back(tempOrder[i]);
    }

    //------------------
    //Init cube's color
    Color_Cube.resize(18);

    //Color of each triangle (Red-Green-Yellow)
    for(int i = 0; i < 18;)
    {
        Color_Cube[i++] = 1.0f;
        Color_Cube[i++] = 0.0f;
        Color_Cube[i++] = 0.0f;

        Color_Cube[i++] = 0.0f;
        Color_Cube[i++] = 1.0f;
        Color_Cube[i++] = 0.0f;

        Color_Cube[i++] = 1.0f;
        Color_Cube[i++] = 1.0f;
        Color_Cube[i++] = 0.0f;
    }

    glGenVertexArrays(1, &VAO_Cube);
    glBindVertexArray(VAO_Cube);

    //-------------------
    //Buffer for vertices
    glGenBuffers(1, &VBO_Cube_Vertices);
    glBindBuffer(GL_ARRAY_BUFFER, VBO_Cube_Vertices);
    glEnableVertexAttribArray(0);

    //Passing CartesianSys coord data into the ARRAY_BUFFER
    glBufferData(GL_ARRAY_BUFFER, (Vertices_Cube.size())*sizeof(float), &Vertices_Cube[0], GL_STATIC_DRAW);
    glVertexAttribPointer((GLuint)0, 3, GL_FLOAT, GL_FALSE, 0, 0); //size = 3 (X,Y,Z)

    //----------------
    //Buffer for color
    glGenBuffers(1, &VBO_Cube_Color);
    glBindBuffer(GL_ARRAY_BUFFER, VBO_Cube_Color);
    glEnableVertexAttribArray(1);

    glBufferData(GL_ARRAY_BUFFER, (Color_Cube.size())*sizeof(float), &Color_Cube[0], GL_STATIC_DRAW);
    glVertexAttribPointer((GLuint)1, 3, GL_FLOAT, GL_FALSE, 0, (void *)36); //size = 3 (R,G,B)

    glBindVertexArray(0); //Unbind VAO
}

void draw()
{
    glBindVertexArray(VAO_Cube); //Bind VAO
    glDrawElements(GL_TRIANGLES, drawOrder_Cube.size(), GL_UNSIGNED_INT, &drawOrder_Cube[0]);
    glBindVertexArray(0); //Unbind VAO
} 
```

这就是它的样子：

![在此处输入图像描述](../Images/4f8a0ba2232436c809ddced4d4daff13.png)

第一个三角形具有正确的颜色：“红、绿、黄”分别位于“左下、左上、右上”。

但是，第二个三角形没有正确的颜色：“红、黑、黄（？）”而不是“左下、右下、右上”的“红、绿、黄”。

最初，我想也许我错过了颜色数组中的一些颜色值（因此，它出现了“黑色”，因为“0”是默认值）。但是，我的颜色数组 (Color_Cube[]) 已正确初始化：正方形的 6 个顶点有 18 个颜色元素。

然而，在玩了一下颜色数组之后，我注意到了一些奇怪的事情：

如果我只初始化数组的前 9 个元素，我的方块就会全黑！

```
for(int i = 0; i < 9;)
{
    Color_Cube[i++] = 1.0f;
    Color_Cube[i++] = 0.0f;
    Color_Cube[i++] = 0.0f;

    Color_Cube[i++] = 0.0f;
    Color_Cube[i++] = 1.0f;
    Color_Cube[i++] = 0.0f;

    Color_Cube[i++] = 1.0f;
    Color_Cube[i++] = 1.0f;
    Color_Cube[i++] = 0.0f;
} 
```

怎么全黑了？它应该给第一个三角形上色吗？

然后，如果我初始化数组的最后 9 个元素，正方形的颜色与之前完全一样（第一个三角形具有正确的颜色，但不是第二个三角形）

```
for(int i = 9; i < 18;)
{
    Color_Cube[i++] = 1.0f;
    Color_Cube[i++] = 0.0f;
    Color_Cube[i++] = 0.0f;

    Color_Cube[i++] = 0.0f;
    Color_Cube[i++] = 1.0f;
    Color_Cube[i++] = 0.0f;

    Color_Cube[i++] = 1.0f;
    Color_Cube[i++] = 1.0f;
    Color_Cube[i++] = 0.0f;
} 
```

为什么当我只为最后 3 个顶点传入颜色时，它会为两个三角形着色？是不是应该让第一个三角形变成黑色，第二个三角形变成“红、绿、黄”？

似乎颜色数组的前 9 个元素被完全忽略了。为什么？？？

所以，我被难住了。我想也许我在 glVertexAttribPointer() 的偏移值上犯了一个错误。但是，在仔细检查了这些功能之后，我没有发现任何问题，或者我可能遗漏了一些东西：

```
//Buffer for vertices
glEnableVertexAttribArray(0);
glVertexAttribPointer((GLuint)0, 3, GL_FLOAT, GL_FALSE, 0, 0);

//Buffer for color
glEnableVertexAttribArray(1);
glVertexAttribPointer((GLuint)1, 3, GL_FLOAT, GL_FALSE, 0, (void *)36); 
```

我没有使用 alpha 值，所以我在顶点数组中有 18 个浮点数（前 9 个浮点数是三角形坐标，最后 9 个浮点数是三角形颜色。顶点数组从位置 0 开始，而颜色数组从位置 36)。

我在这里想念什么？在过去的 2 天里，我无法弄清楚出了什么问题，所以我来到这里寻求一些指导和指导。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:45:02.250

当您为颜色调用 glVertexAttribPointer 时，最后一个参数（指针）在您的情况下应该为 0。指针将是从颜色缓冲区（不是顶点数组）开始到重要数据开始的字节偏移量。Color_Cube 中的颜色从字节 0 开始。

当您指定一个 36 字节的指针时，您是说颜色数据从 Color_Cube 的第 36 个字节开始，这实际上是第 4 种颜色。从那时起，只有 3 种颜色。这就是为什么一个角是黑色的：那个顶点没有颜色。当您只用前三种颜色初始化 Color_Cube 时，从第 36 个字节开始就没有颜色了，整个正方形变成黑色。

还：

Vertices_Cube 有 12 个元素，但 Color_Cube 有 18 个。由于 Vertices_Cube 中只有四个顶点，因此 Color_Cube 中应该只有四种颜色，因为您使用相同的索引缓冲区来引用顶点和颜色缓冲区。

# android - 在 Android 图库中同步照片

> ID：14906081
> 
> 赞同：3
> 
> 时间：2013-02-16T01:47:45.957
> 
> 标签：android, android-gallery, android-image

我见过一些可以将照片与 Android 图库同步的应用程序（例如 Picasa），我想自己创建类似的东西，在那里我将拥有一个带有照片的远程服务器，并且用户可以访问这些来自画廊中的单独专辑（如上述应用程序）。但是，我不知道如何实现这一点，甚至不知道从哪里开始。

有谁知道我应该怎么做？

* * *

![截屏](../Images/890df7a8f394f7df66588624fde9ec62.png)
*我在 Galaxy Note 10.1 上的同步图库应用中的 Facebook 照片*

# android - Android平板设备无法连接PC

> ID：14906083
> 
> 赞同：0
> 
> 时间：2013-02-16T01:47:49.200
> 
> 标签：android

我有一个 android 平板电脑“Galaxy Tab 10.1”，需要连接到我的电脑进行调试，但是当我插入电缆时它甚至没有显示在设备管理器中。我看到了许多解决方案并尝试了它，例如：从这里下载的三星 USB 驱动程序：http: [//www.samsung.com/us/support/owners/product/GT-P7510MAYXAB](http://www.samsung.com/us/support/owners/product/GT-P7510MAYXAB) 在设置中也启用了 USB 调试。

但是还是没有变化！有什么建议吗？？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:28:23.847

转到设置->选择存储->单击三个点->USB计算机连接->使用MTP或相机进行实验。对于我的手机，它仅适用于相机模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:32:58.933

好吧，我更换了电缆，重新安装了驱动程序并工作了:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-30T07:56:27.500

插入后尝试关闭，然后在连接时打开平板电脑。它解决了我的问题。希望这可以帮助！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T04:23:42.800

好的，Android 使这比它需要的要困难得多（像往常一样）。

我为此奋斗了两天，终于找到了一种在平板电脑上打开 USB 共享的方法。我将驱动程序加载到计算机上，它识别出该设备但不会读取它。解决方案是转到设置、存储，然后忽略存储箱中的所有内容。在左上角，一个非常小的 USB 符号将出现在 sd 卡徽标旁边（如果已安装） 长按并向下拖动以打开一个消息框。将有一个打开 USB 共享的选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-06T12:09:13.977

下载凯斯，它会自动下载所有需要的驱动程序 - 三星文件同步应用程序

阅读更多： http: [//www.samsung.com/latin_en/support/usefulsoftware/KIES/JSP](http://www.samsung.com/latin_en/support/usefulsoftware/KIES/JSP)

下载： http: [//www.samsung.com/us/kies/](http://www.samsung.com/us/kies/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-03T07:54:29.253

嗨，我有一个简单的解决方案要分享。

第一步：此时不要将你的安卓平板电脑或手机连接到电脑上。:)

第二步：如果您的 android 平板电脑或手机已打开，请关闭它！

第 3 步：现在关闭它后再次打开它，然后通过 USB 电缆连接到计算机.....看看它是否工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-03T19:50:23.077

我已经见过很多这种情况了，似乎设备底部的三星连接器没有正确就位时会发生这种情况。删除并牢固地重新连接已为我解决了几次问题。

断开并重新启动设备，运行“adb kill-server”，重新连接设备，运行“adb devices”——似乎也解决了一些很好的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-16T01:49:19.230

您可以尝试关闭 USB 调试。另外，是否有可能在设置中更改USB模式的设置？大多数 Android 设备在某个地方都有一个。

# c# - 在 Windows 8 应用程序中重置焦点

> ID：14906084
> 
> 赞同：0
> 
> 时间：2013-02-16T01:47:53.270
> 
> 标签：c#, windows-8, visual-studio-2012

所以我有一个启动弹出窗口的按钮。在弹出窗口中，我让它检测当文本框处于焦点时按下回车键并提交数据并关闭弹出窗口。但是，当我关闭弹出窗口时，按下以启动弹出窗口的按钮会重新获得焦点并接收按键事件，从而再次打开提示。

所以我问：有没有办法重新设置所有元素的焦点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:42:21.750

您可以在弹出窗口关闭后立即尝试此操作。

```
FirstButton.Focus(Windows.UI.Xaml.FocusState.Unfocused); 
```

不确定您的代码是如何设置的，但可能会执行以下操作：（假设弹出窗口与原始按钮位于同一窗口内）

```
 //in the button two clicked function

        if (YourPopUp.Visibility == Visibility.Visible)
        {
            //do data sending
            //collapse pop up
            FirstButton.Focus(Windows.UI.Xaml.FocusState.Unfocused);
        } 
```

# git - 复制 Git 裸仓库会更改日志吗？

> ID：14906091
> 
> 赞同：0
> 
> 时间：2013-02-16T01:48:39.683
> 
> 标签：git, backup, clone, git-bare

我想用 git 尝试一些东西，我不想在工作存储库中搞砸任何事情。

为了保证事情的安全，我制作了一份我从这个仓库工作的裸仓库的副本，我打算做我所有的推送和标记。我用了：

```
cp --preseve -r original.git copy_of_original.git 
```

尽管我知道可以撤消错误的提交和诸如此类的东西，但我不想将所有这些还原的提交留在仓库中，也不想进行任何重构，因此我希望只从一个重复的、裸露的仓库中工作。

问题是，我执行以下操作：

```
git diff --name-only master@{"5 day ago"} master 
```

然后回来：

```
warning: Log for 'master' only goes back to Fri, 15 Feb 2013 20:42:43 -0500. 
```

我不想接触的原始仓库确实有 5 天前修改过的文件。

如果我`git log`在复制的 repo 上执行，这些 5 天前的更改记录都还在。

这里发生了什么？

有没有更好的方法来制作存储库的独立副本？

**更新 1**

我意识到我的问题不准确。我跑过：

```
git diff --name-only master@{"5 day ago"} 
```

在产生的目录中：

```
git clone copy_of_original.git clone_of_copy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:17:15.810

`@{5 days ago}`语法依赖于来自[reflog](http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)的信息，如下面引用的[git-rev-parse](http://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html)文档部分所述。Reflogs 是存储库本地的，永远不会通过克隆、获取或推送来传输。这不是 显示的信息`git log`，除非使用`-g`or `--walk-reflogs`选项。

裸存储库通常不保留引用日志，因此存储库的副本也不会包含该信息。

```
<refname>@{<date>}, e.g. master@{yesterday}, HEAD@{5 minutes ago}
    A ref followed by the suffix @ with a date specification enclosed in a brace pair
    (e.g.  {yesterday}, {1 month 2 weeks 3 days 1 hour 1 second ago} or {1979-02-26
    18:30:00}) specifies the value of the ref at a prior point in time. This suffix may
    only be used immediately following a ref name and the ref must have an existing log
    ($GIT_DIR/logs/<ref>). Note that this looks up the state of your local ref at a
    given time; e.g., what was in your local master branch last week. If you want to
    look at commits made during certain times, see --since and --until. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:12:18.837

每个克隆都包含存储库的完整副本（在您有一个分支的情况下，master），位于 .git 目录中。每个副本独立于其他副本，并通过本地提交或从其他存储库中提取时进行修改。

因此，递归副本非常好。

至于您看到的内容，您需要提供更多详细信息，以及您运行的更完整的命令列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T02:46:23.297

如果您*clone*，则只复制部分内容，如果您*copy*，您将拥有与原始存储库相同的版本。这适用于`git`; 可以备份和恢复等。

# c# - 使用 ConfigureAwait(false) 和 Task.Run 有什么区别？

> ID：14906092
> 
> 赞同：59
> 
> 时间：2013-02-16T01:49:03.603
> 
> 标签：c#, .net, .net-4.5, async-await, c#-5.0

我了解建议在库代码中使用`ConfigureAwait(false)`for `await`s，以便后续代码不会在调用者的执行上下文中运行，这可能是 UI 线程。我也明白`await Task.Run(CpuBoundWork)`应该使用，而不是`CpuBoundWork()`出于同样的原因。

## 示例`ConfigureAwait`

```
public async Task<HtmlDocument> LoadPage(Uri address)
{
    using (var client = new HttpClient())
    using (var httpResponse = await client.GetAsync(address).ConfigureAwait(false))
    using (var responseContent = httpResponse.Content)
    using (var contentStream = await responseContent.ReadAsStreamAsync().ConfigureAwait(false))
        return LoadHtmlDocument(contentStream); //CPU-bound
} 
```

## 示例`Task.Run`

```
public async Task<HtmlDocument> LoadPage(Uri address)
{
    using (var client = new HttpClient())
    using (var httpResponse = await client.GetAsync(address))
        return await Task.Run(async () =>
        {
            using (var responseContent = httpResponse.Content)
            using (var contentStream = await responseContent.ReadAsStreamAsync())
                return LoadHtmlDocument(contentStream); //CPU-bound
        });
} 
```

这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-16T03:07:41.143

当您说 时`Task.Run`，您是在说您有一些 CPU 工作要做，这可能需要很长时间，所以它应该始终在线程池线程上运行。

当您说 时`ConfigureAwait(false)`，您是在说该`async`方法的其余部分不需要原始上下文。`ConfigureAwait`更多的是优化提示；它并不*总是*意味着继续在线程池线程上运行。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-16T02:10:00.463

在这种情况下，您的`Task.Run`版本将有更多开销，因为第一个 await 调用 ( `await client.GetAsync(address)`) 仍将编组回调用上下文，调用结果也是如此`Task.Run`。

另一方面，在第一个示例中，您的第一个`Async()`方法被配置为不需要封送回调用上下文，这允许继续在后台线程上运行。因此，不会有任何封送回调用者的上下文。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-07T05:03:24.213

同意@Stephen 的回答，如果仍然感到困惑，请参见下面的屏幕截图 1# 没有 ConfigureAwait(false)
参见下图 主线程尝试更新标签 [![在此处输入图像描述](../Images/43479f1a875575905b5f26e868889ee1.png)](https://i.stack.imgur.com/UaQwk.jpg)

2# 使用 ConfigureAwait(false)
见下图工作线程尝试更新标签 [![在此处输入图像描述](../Images/00c3d88c3c2a84fd8d7d8f57a8cfa318.png)](https://i.stack.imgur.com/Z4jep.jpg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-24T10:51:16.570

附带说明一下，在这两种情况下仍然`LoadPage()`可能会**阻塞**您的 UI 线程，因为`await client.GetAsync(address)`需要时间来创建要传递给 `ConfigureAwait(false)`. 在任务返回之前，您的耗时操作可能已经开始。

一种可能的解决方案是`SynchronizationContextRemover`从[这里](https://blogs.msdn.microsoft.com/benwilli/2017/02/09/an-alternative-to-configureawaitfalse-everywhere/)使用：

```
public async Task<HtmlDocument> LoadPage(Uri address)
{
    await new SynchronizationContextRemover();

    using (var client = new HttpClient())
    using (var httpResponse = await client.GetAsync(address))
    using (var responseContent = httpResponse.Content)
    using (var contentStream = await responseContent.ReadAsStreamAsync())
        return LoadHtmlDocument(contentStream); //CPU-bound
} 
```

# ios - 使用 AVPlayer IOS 向蓝牙设备发送音频

> ID：14906093
> 
> 赞同：3
> 
> 时间：2013-02-16T01:49:04.833
> 
> 标签：ios, bluetooth, avplayer, avplayerlayer

嘿，我有一个使用 AVPlayer 的视频应用程序，我收到了一封来自用户的电子邮件，说他不能再使用他的汽车蓝牙了，因为我前段时间更新了应用程序。

现在，我当时并没有尝试支持蓝牙，但显然这个功能是与我之前使用的 MPMoviePlayerController 一起出现的。

有没有办法检查是否连接了蓝牙设备并向其发送音频？

我见过[这个问题](https://stackoverflow.com/questions/14082182/sending-audio-to-a-bluetooth-enabled-speaker-ios)，但没有帮助，音量控制显示但没有按钮让我选择输出。

为了使用蓝牙作为输出，我是否必须做其他事情？

我只测试了我汽车的蓝牙，它适用于电话和 Viber 等其他应用程序。

# java - 来自输入文件的 Rock，Paper，Sissors java 游戏。charAt 方法给予悲伤

> ID：14906094
> 
> 赞同：0
> 
> 时间：2013-02-16T01:49:10.293
> 
> 标签：java

好的，所以我已经在这个程序上工作了一个半星期，我觉得我真的很接近但一直在碰壁。我为此看了很多次，我承认我不太擅长使用 java 的常见问题解答系统。我正在尝试拉入一个字符串，该字符串包含表单中的文本，`R S`player1 为空格，player2 移动。在此之后，我尝试使用`charAt(index)`并且每次都得到一个 AIOOBE（它找不到任何位置）。我已经尝试在扫描仪中推进几行，只是为了得到一个可以工作的行，但我做不到。似乎它抓住了前 2 行`int`，即玩的游戏和每局的手数。

```
import java.util.*;
import java.lang.*;
import java.io.*;

public class rPS{
    public static void main(String ... args) throws IOException{
        int count = 0;
        File myFile = new File("a.txt");
        Scanner fin = new Scanner(myFile);
        int games = fin.nextInt();
        for(int i = 0; i<games; i++){
            int rounds = fin.nextInt();
            int tie = 0;
            int p1win = 0;
            int p2win = 0;
            for(int j=0; j<rounds; j++){
                String line = fin.nextLine();
                char p1 = line.charAt(0);
                char p2 = line.charAt(2);
                if (p1 == p2)
                    tie = tie + 1;
                else if (p1 == 'R'){
                    if (p2 == 'S')
                        p1win = p1win + 1;
                    else if (p2 == 'P')
                        p2win = p2win + 1;
                }else if (p1 == 'P'){
                    if (p2 == 'S')
                        p2win = p2win + 1;
                    else if (p2 == 'R')
                        p1win = p1win + 1;
                }else if (p1 == 'S'){
                    if (p2 == 'P')
                        p1win = p1win + 1;
                    else if (p2 == 'R')
                        p2win = p2win + 1;
                }
            }
            if(p1win > p2win)
                System.out.println("Player 1");
            else if(p2win > p1win)
                System.out.println("Player 2"); 
            else
                System.out.println("Tie!");     
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:07:45.477

尝试调用 nextLine() 而不在读取回合和读取第一个移动的行之间保存返回值。

扫描仪会停留在您读取的整数之后，当您调用 nextline() 时，它会返回换行符而不是您期望的下一行。

# prolog - Prolog 检查列表是否严格递减

> ID：14906098
> 
> 赞同：2
> 
> 时间：2013-02-16T01:49:38.487
> 
> 标签：prolog

我是 Prolog 的新手，正在尝试为分配的严格递减序列编写程序。

现在定义一个谓词 isOrdered，如果列表中的项目 Lst 是严格递减的顺序，则“isOrdered(Lst)”成功。您可以假设 Lst 仅包含数字。例如 ?- isOrdered([11, 5, 3, 0])。真的。

这是我到目前为止所拥有的：

```
isOrdered([]).
isOrdered([A|B]) :- isOrdered([B]), A > B. 
```

它给了我一个错误，说明本地堆栈之外。似乎无法解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T02:10:04.963

当您在 Prolog 中使用此列表结构时

```
[H | T] 
```

您将列表拆分为头部和尾部。头部是单个项目（如果原始列表是列表列表，则可能是列表），尾部是删除了初始元素的原始列表。这`A > B`就是不正确的原因。

你需要做这样的事情：

```
isOrdered([]).
isOrdered([_]).
isOrdered([A,B|T]) :- A > B, isOrdered([B|T]). 
```

# python - django-storages S3 后端不会加载

> ID：14906101
> 
> 赞同：3
> 
> 时间：2013-02-16T01:49:51.897
> 
> 标签：python, django, python-2.7, amazon-s3, boto

我有一个 Django 应用程序，它可以在我的本地主机以及我的 Linode Ubuntu 服务器上正常运行。

我在跑步

```
django==1.4.2
django-storages==1.1.6
boto==2.8.0
Python==2.7.2+ 
```

在我的**localhost**上的 Django shell 中，我输入：

> 从 S3 导入 CallingFormat

它工作得很好。但是，当我在**服务器**上的 Django shell 中输入它时，我得到

> 没有名为 S3 的模块

我错过了什么吗？提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:30:54.437

看起来 setup.py 没有在`PYTHONPATH`. 这可以通过在您的任何位置下载 S3 模块来轻松解决`PYTHONPATH`（键入`import sys;print sys.path`以查找这些文件夹）：

```
sudo curl -O https://bitbucket.org/dziegler/django-storages/raw/9a3017a4f577a7d740451c1a6dde9079c69f09b6/S3.py 
```

这对我有帮助

# java - 使用 java 代码执行 *nix find 命令

> ID：14906103
> 
> 赞同：0
> 
> 时间：2013-02-16T01:50:36.257
> 
> 标签：java, linux

我正在尝试使用 java 代码执行 find 命令。我做了以下事情：

```
sysCommand = "find . -name '*out*' > file1"

Runtime runtimeObj = Runtime.getRuntime();

try {
    Process processObj = runtimeObj.exec(sysCommand);
    processObj.waitFor();
    ... 
```

当我使用命令行时执行此 Linux 命令但在 Java 中失败，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:13:11.737

如果您有兴趣在 Java 中执行此操作，那么您将需要执行以下操作：

```
public void find(File startDirectory, FileFilter filter, List<File> matches) {
    File[] files = startDirectory.listFiles(filter);
    for (File file:files) {
        if(file.isDirectory()) {
            find(file, filter, matches);
        } else {
            matches.add(file);
        }
    }
} 
```

然后，您需要编写`FileFilter`以接受与您的模式匹配的目录和文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T01:56:32.297

这个问题可能是[重复](https://stackoverflow.com/questions/7062595/runtime-exec-not-running-the-find-command)的或[重复](https://stackoverflow.com/questions/10704889/java-execute-command-line-program-find-returns-error)的。

*   无论如何，您可以使用[File.list](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#list%28java.io.FilenameFilter%29)，为您想要的文件类型提供过滤器。您可以递归调用它以获取所有子目录。我不喜欢这个答案。你会认为有一个更简单的方法。

*   我的一个朋友推荐了 Apache 的[Commons-Exec](http://commons.apache.org/exec/)来运行命令。它允许您在命令上使用超时。他推荐它是因为运行时可能会遇到大型标准输出和标准错误的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T02:01:59.797

据我所知，不允许在`Runtime.exec`. 如果要将结果移动到文件中，则必须在 Java 中通过`Process.getInputStream`.

# sql - 查找与视图关联的所有表

> ID：14906110
> 
> 赞同：1
> 
> 时间：2013-02-16T01:51:53.620
> 
> 标签：sql, sql-server-2008, tsql

我需要找到在我的某些视图中使用的所有表。这些视图可能包含其他视图，因此我需要返回这些表等等。My`V`是视图名称，`T`是表的名称。

```
Views | Tables
 V1   |   T1
 V2   |   T2
 V3   |   T3
      |   T4
      |   T5 
```

现在可以说我的观点包含以下参考：

```
View | References
 V1  |   T1, T2
 V2  |   V1, T5
 V3  |   V1, V2, T3 
```

因此，鉴于`V1`我需要`T1`并`T2`返回的名称。

鉴于`V2`我需要`T1`和。`T2``T5`

鉴于`V3`我需要`T1`,`T2`和`T3``T5`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:11:24.097

您可以使用`sys.dm_sql_referenced_entities`选择对象所依赖的表和视图。请参阅[联机丛书文章](http://msdn.microsoft.com/en-us/library/bb677185%28v=sql.100%29.aspx)。

此 cte 将从出现在 sys.dm_sql_referenced_entities 结果中的视图中递归地选择表。它应该适合你。请参阅[SQL 小提琴](http://sqlfiddle.com/#!3/0cc9e/1)

```
DECLARE @viewName sysname = 'dbo.V3'
;WITH cteViews AS(
    SELECT 
         re.referenced_id
        ,o.type_desc    
        ,SCHEMA_NAME(o.schema_id) AS [schema]
        ,o.name
    FROM sys.dm_sql_referenced_entities (@viewName, 'OBJECT') re
    JOIN sys.objects o ON re.referenced_id = o.object_id 
    UNION ALL
    SELECT
         viewTables.referenced_id
        ,viewTables.type_desc
        ,viewTables.[schema]
        ,viewTables.name
    FROM cteViews cte
    OUTER APPLY(
        SELECT
             re.referenced_id
            ,o.type_desc    
            ,SCHEMA_NAME(o.schema_id) AS [schema]
            ,o.name
        FROM sys.dm_sql_referenced_entities (cte.[schema] + '.' + cte.name, 'OBJECT') re
        JOIN sys.objects o ON re.referenced_id = o.object_id 
        WHERE o.type_desc = 'USER_TABLE'
    ) AS viewTables
    WHERE cte.type_desc = 'VIEW'    
)
SELECT 
    [schema]
    ,name
FROM cteViews
WHERE type_desc <> 'VIEW'
ORDER BY name 
```

SSMS 中还有一个功能可以让您查看对象的依赖关系。右键单击对象资源管理器中的视图，然后选择“查看依赖项”。然后选择单选按钮“'视图名称'所依赖的对象”。

# ios - UITableView 使用 xib 设置单元格，滑动时不流畅？

> ID：14906112
> 
> 赞同：1
> 
> 时间：2013-02-16T01:51:59.080
> 
> 标签：ios, uitableview, cell

我用xib设置界面，用的时候不流畅，为什么？

```
- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomerCell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        NSArray * nib = [[NSBundle mainBundle] loadNibNamed:@"MSNeedCheckCell" owner:self options:nil] ;
        cell = [nib objectAtIndex:0];
    }
//填充cell的内容
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:38:27.637

尝试从类的 init 方法调用以下方法：

```
[self.tableView registerNib:[UINib nibWithNibName:@"MSNeedCheckCell" bundle:nil]
     forCellReuseIdentifier:@"CustomerCell"]; 
```

然后，您可以删除整个`if (!cell) {`代码部分，因为它总是会返回一个单元格。这只会加载一次笔尖，而不是每次您需要一个单元格时，所以会快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:42:27.137

从字面上看，这就是它的全部吗？或者您是否在做其他任何事情（例如，在子类单元格中，或为简洁起见可能省略的其他代码）。

缺乏平滑度的最常见原因（并且通过平滑度，我假设您在谈论在您的表格视图中滚动时 UI 中的卡顿）将是如果您正在对前景队列中的图像执行任何操作。

WWDC 2012 - [211 - Building Concurrent User Interfaces](https://developer.apple.com/videos/wwdc/2012/?id=211)为如何使用 Instruments 识别性能瓶颈的来源提供了一个精彩而实用的说明。显然，他们专注于一个非常具体的设计考虑，但仪器教程非常有用。在您为此失去太多睡眠之前，最好确保这行特定的代码确实是问题所在。

# wpf - WPF C# Grid.SetRow()，其中的元素相互重叠

> ID：14906113
> 
> 赞同：0
> 
> 时间：2013-02-16T01:52:07.657
> 
> 标签：wpf, grid, overlapping

首先原谅我的英语不好。

我在使用`Grid.SetRow()`or时遇到问题`setValue(Grid.RowProperty, rowIndex)`。该元素成为索引，但它们相互重叠..

XAML 定义：

```
<UserControl x:Class="LangproWPF.FrmSM_ItemsGroup"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="25"/>
            </Grid.RowDefinitions>
                <Button Name="btnSM_ItemGroupAdd" Style="{StaticResource ResourceKey=standardButtons}" Grid.Column="0" Grid.Row="1" Click="btnSM_ItemGroupAdd_Click">Wareng. anlegen</Button>
                <Button Name="btnSM_ItemGroupShow" Style="{StaticResource ResourceKey=standardButtons}" Grid.Column="1" Grid.Row="1">Wareng. anzeigen</Button>
            <Button Name="btnSM_ItemGroupAdd1" Style="{StaticResource ResourceKey=standardButtons}" Grid.Column="0" Grid.Row="2" Click="btnSM_ItemGroupAdd_Click">Wareng. anlegen</Button>
            <Button Name="btnSM_ItemGroupShow2" Style="{StaticResource ResourceKey=standardButtons}" Grid.Column="1" Grid.Row="2">Wareng. anzeigen</Button>
            <Button Name="btnSM_ItemGroupAdd3" Style="{StaticResource ResourceKey=standardButtons}" Grid.Column="0" Grid.Row="3" Click="btnSM_ItemGroupAdd_Click">Wareng. anlegen</Button>
            <Button Name="btnSM_ItemGroupShow4" Style="{StaticResource ResourceKey=standardButtons}" Grid.Column="1" Grid.Row="3">Wareng. anzeigen</Button>
        </Grid>
        <Grid Name="grdSM_ItemGroupHolder" Grid.Row="1" Background="LightSteelBlue">
        </Grid>
    </Grid>
</UserControl> 
```

在代码生成的行和内容中

```
// first remove old elements from grid
    grdSM_ItemGroupHolder.Children.Clear();
    grdSM_ItemGroupHolder.ColumnDefinitions.Clear();;

    // create columns for the Grid
    ColumnDefinition colTitle = new ColumnDefinition(){ Width = new GridLength(250)};
    ColumnDefinition colControls = new ColumnDefinition();
    grdSM_ItemGroupHolder.ColumnDefinitions.Add(colTitle);
    grdSM_ItemGroupHolder.ColumnDefinitions.Add(colControls);
    grdSM_ItemGroupHolder.ShowGridLines = true;

    // define also the first row
    RowDefinition row = new RowDefinition();
    row.Height = new GridLength(100,GridUnitType.Star);
    grdSM_ItemGroupHolder.RowDefinitions.Add(row);
    // Form elements
    Label lblIGID = new Label(){ Name="lblSM_IGID_info", Content="Die ID wird automatisch vergeben"};
    grdSM_ItemGroupHolder.Children.Add(lblIGID);
    Grid.SetRow(lblIGID,0);
    Grid.SetColumn(lblIGID,0);
    Grid.SetColumnSpan(lblIGID,2);

    TextBox txtIGID = new TextBox(){ Name="txtSM_ItemGroupID"};
    Grid.SetColumn(tbIGID, 0);
    Grid.SetRow(tbIGID, 1);

    TextBlock tbIGName = new TextBlock(){Name="tbSM_ItemGroupName", Text="Enter a name"};
    Grid.SetColumn(tbIGName,0);
    Grid.SetRow(tbIGName,1);

    Button btnIGReset = new Button() {Name="btnSM_ItemGroupAddReset", Content="Zurücksetzen"};
    grdSM_ItemGroupHolder.Children.Add(btnIGReset);
    Grid.SetRow(btnIGReset,2);
    Grid.SetColumn(btnIGReset,0);

    Button btnIGSave = new Button(){Name="btnSM_ItemGroupAddSave", Text="Speichern"};
    grdSM_ItemGroupHolder.Children.Add(btnIGSave);
    Grid.SetRow(btnIGSave,2);
    Grid.SetColumn(btnIGSave,1); 
```

这些行似乎相互重叠，我也只能看到最后两个按钮......其他元素在后面。当我使用此代码添加所有需要的行时：

```
RowDefinition row1 = new RowDefinition();
row1.Height = new GridLength(100, GridUnitType.Star);
grdSM_ItemGroupHolder.RowDefinitions.Add(row1);

RowDefinition row2 = new RowDefinition();
row2.Height = new GridLength(100, GridUnitType.Star);
grdSM_ItemGroupHolder.RowDefinitions.Add(row2); 
```

有用。我现在正在寻找几个小时..希望有人知道如何解决它？

![](../Images/9471918f7e2d2edc815d5682e37c3e32.png)

![](../Images/4a510f198d0531bf1c7c98bd69559400.png)

# java - 如何在编译时获取 Javadoc 类描述？

> ID：14906115
> 
> 赞同：0
> 
> 时间：2013-02-16T01:52:12.470
> 
> 标签：java, maven, javadoc

我正在尝试为我的 Wicket Web 应用程序建立一些文档。我创建了一个页面来获取所有已安装的页面并将它们显示在 /sitemap.xml 中。在文档的脉络中，我已经向文件添加了一个新标签，`<siteMap:Description>` 现在我想用描述类文件的 javadoc 条目填充该描述。

我知道有知道在运行时访问它们的直接方法。所以相反，我希望在编译时将它们复制到一个 List 中，然后可以从运行时访问它们。我该怎么做？

我正在使用 Maven 进行构建。

**编辑**
我可能还应该提到我确实有一个 AntTask 已经定义为我的构建过程的一部分，以将编译日期/时间保存到属性文件中。
在我看来，扫描我的班级然后将信息放入文件的任务可能是要走的路。问题是我不确定如何进行。

我的 Ant-Task 的定义就像在我的 pom.xml 中一样：

```
 <plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <dependencies>
       <dependency>
         <groupId>ant</groupId>
         <artifactId>ant-nodeps</artifactId>
         <version>1.6.5</version>
       </dependency>
     </dependencies>
    <executions>
       <execution>
         <id>set-build-time</id>
         <phase>process-sources</phase>
         <configuration>
           <tasks>
             <tstamp>
               <format property="build.timestamp" pattern="yyyy/MM/dd HH:mm:ss"/>
               <format property="build.time" pattern="HH:mm:ss" />
               <format property="build.date" pattern="MM/dd/yyyy" />
               <format property="build.year" pattern="yyyy"/>
             </tstamp>
             <replaceregexp byline="true">
               <regexp pattern="copyYear\=.*" />
               <!--suppress MavenModelInspection -->
               <substitution expression="copyYear=${build.year}" />
               <fileset dir="src/main/java/" includes="**/*.properties" />
             </replaceregexp>
             <replaceregexp byline="true">
               <regexp pattern="buildTime\=.*" />
               <!--suppress MavenModelInspection -->
               <substitution expression="buildTime=${build.date} ${build.time}" />
               <fileset dir="src/main/java/" includes="**/*.properties" />
             </replaceregexp>
           </tasks>
         </configuration>
         <goals>
           <goal>run</goal>
         </goals>
       </execution>
     </executions>
   </plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:39:23.367

在做了更多研究后，我确定我找错了树。

自从我试图获得 Javadoc 评论以来，一个 Doclet 是更好的答案。因此，我实现了一个自定义 doclet 并将其连接为自动运行，如下面的后续问题和答案中所述。
[如何在我的项目中编译和运行我的自定义 Doclet 类？](https://stackoverflow.com/questions/14989871/how-can-i-compile-and-run-my-custom-doclet-class-in-my-project)

# process - erlang：在不知道 PiD 的情况下结束进程？

> ID：14906116
> 
> 赞同：1
> 
> 时间：2013-02-16T01:52:43.250
> 
> 标签：process, erlang, terminate

简单的说; 如果我在使用以下命令启动进程时不小心忘记将 Pid 变量等同起来，我该如何结束进程：

```
9> trivial_process:start().
<0.67.0>
10> 
```

我知道我应该写`Pid = trivial_process:start().`有没有办法采取 <0.67.0> 并终止进程？

```
-module(trivial_process).
-export([start/0]).

start() -> 
  spawn(fun() -> loop() end).

loop() ->
  receive
    Any ->
      io:format("~nI got the message: ~p~n",[Any]),
      loop()
  end. 
```

编辑：回答。

```
8> Pid = "<0.67.0>".
9> A2 = list_to_pid(Pid).
<0.67.0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:33:55.363

您可以使用该`list_to_pid`功能。文档在[这里](http://erlang.org/doc/man/erlang.html#list_to_pid-1)。你不应该在部署的代码中使用它，它只对调试有用。它也不适用于远程 pid。

参考：[关于 Erlang PID 的一些你可能不知道的事情](http://pdincau.wordpress.com/tag/pid/)

# apache - JBoss 的硬件负载均衡器

> ID：14906119
> 
> 赞同：0
> 
> 时间：2013-02-16T01:53:16.200
> 
> 标签：apache, jboss

在什么情况下将硬件负载平衡器放在运行 mod_cluster 的 apache 服务器前面是有意义的？从逻辑上讲，mod_cluster 似乎正在做所有的负载平衡。如果您要进行 Jboss 集群，是否需要 mod_cluster？

示例架构 (1) 网站 www.foo.bar 从以下位置提供服务：(4) 运行 mod_cluster 的 Apache 服务器 (2) JBoss 应用服务器 - 1 个集群

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:09:41.300

负载均衡器的好处：

*   如果一台服务器出现故障，一些服务器会使用心跳，然后不会将流量发送到死服务器 集群的缺点：
*   在集群中，如果一个组件发生故障，它会杀死所有服务器。

集群的好处：

*   更强大的网页服务能力
*   全部在一张磁盘上

负载均衡器的缺点：

*   昂贵的硬件（或免费软件）
*   如果负载均衡器死了，一切都死了。

随意添加到这个答案。

# node.js - Nodejs中的回调函数

> ID：14906120
> 
> 赞同：0
> 
> 时间：2013-02-16T01:53:42.000
> 
> 标签：node.js, callback

我有功能

```
var checkTokenIsExpired = function(name, token, response) {
LoginToken.find( { name: name, series: token }, function(error, info){
                console.log("info: ", info[0]['expire']);
                if (error) {
                    // response.send("error: %s}", error);
                    response(error);
                }
                if (info.length > 0) {      
                    var expire = new String(info[0]['expire']);
                    // expire = expire.substr(0,26);    
                    var date = new Date(expire);
                    if (date >= new Date()) {                       
                        // response.send("{info: success" );
                        response("success");
                    }
                    else{
                        // response.send("error: token-has-expired");
                        response("token-has-expired");
                    }   
                    console.log("Response: ", info);
                }
                else {
                    response(null);
                }
            } );
} 
```

检查令牌是否过期？它将返回一个字符串。

我在这里调用这个函数

```
 exports.updateAccount = function(newData, callback)
{
    Accounts.find({name:newData.body.name}, function(err, docs){
        if (err) {
            callback.send('{error: ' + String(err) + "}");
        }
        if (docs.length==0 || !docs) {
            callback.send("{error: NULL }");
        }
        else {
            checkTokenIsExpired(newData.body.name, newData.body.token, function(error, info){
            if (error){
                        callback.send("{error: " + error + "}");
            // I want to get info here      }               
            console.log("check token: ", info);
            // check info of token is expired or not
            if (info!=null && info!="token-has-expired") {
                var updateString = "";
                if (newData.body.screen_name){
                    Accounts.update( {'name': newData.body.name}, 
                            {
                                "screen_name" : newData.body.screen_name
                            },
                            { 'upsert' : true },
                            function (err, numberAffected, raw) {
                              if (err) return handleError(err);

                            });
                }
                if (newData.body.email){
                    Accounts.update( {'name': newData.body.name}, 
                            {                               
                                "email": newData.body.email
                            },
                            { 'upsert' : true },
                            function (err, numberAffected, raw) {
                              if (err) return handleError(err);

                            });
                }
                if (newData.body.password == ''){

                }   else{
                    var password = encodePassword(newData.body.password, docs[0]['salt']);                  
                    Accounts.update( {'name': newData.body.name}, 
                            {
                                "hassedPass" : password,                                
                            },
                            { 'upsert' : true },
                            function (err, numberAffected, raw) {
                              if (err) return handleError(err);

                            });

                }               

            }
        });

        } 
```

我想在调用 checkTokenIsExpired 但`console.log("info", info)`返回未定义时获取信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:03:04.793

在 checkTokenIsExpired 中，您需要将信息传递给响应回调，否则它不在您的第二个代码范围内。

至少在你成功的情况下：

```
response("success", info); 
```

您通常不会传递“成功”，而是传递`null`以表明没有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:16:12.807

我已经解决了问题

```
checkTokenIsExpired(newData.body.name, newData.body.token, function(error, info) 
```

因为它需要 1 个参数，但我把 2 改成`checkTokenIsExpired(newData.body.name, newData.body.token, function(info)` 它会更正：D

# nsoperationqueue - 为什么这些 NSInvocationOperation 不会实际运行？

> ID：14906122
> 
> 赞同：0
> 
> 时间：2013-02-16T01:54:42.800
> 
> 标签：nsoperationqueue, nsinvocationoperation

只是想用 NSOperationQueue 和 NSInvocationOperation 做一个简单的例子。这是我的代码：

```
- (void) runMethodsViaOperationQueue {
    NSOperationQueue *thisQueue = [[NSOperationQueue alloc] init];
    NSInvocationOperation *logMethod1Invocation = [[NSInvocationOperation alloc] 
                                                  initWithTarget:self 
                                                  selector:@selector(logMethod1) 
                                                  object:nil];
    [thisQueue addOperation:logMethod1Invocation];
} 
```

logMethod1 只是一个循环的 NSLog 语句，如下所示：

```
- (void) logMethod1 {
    for (int a = 0; a < 10; a++) {
        NSLog(@"%s --> logMethod1: %i", __FUNCTION__, a);
        if (a == 9) {
            NSLog(@"%s --> ==================", __FUNCTION__);
        }
    }
} 
```

该类在 main 中实例化，其中 runMethodsViaOperationQueue 被调用。

```
MyOperationTestingClass *instantiateIt = [[MyOperationTestingClass alloc] init];
[instantiateIt runMethodsViaOperationQueue]; 
```

事情是，当 runMethodsViaOperationQueue 没有像我期望的那样通过 NSLog 执行任何输出时。谁能帮我澄清为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:35:09.823

我真的试图推断出不止一个 NSInvocationOperation，所以创建一个 NSInvocationOperations 数组：

```
NSArray *iOps = [NSArray arrayWithObjects:logMethod1Invocation, logMethod2Invocation, nil]; 
```

然后将此数组与 addOperations:WaitUntilFinished 一起使用：

```
[thisQueue addOperations:iOps waitUntilFinished:YES]; 
```

执行时，输出将显示多个线程 -

```
2013-02-15 20:32:29.276 NSOperationTest[1060:1b03] -[MyOperationTestingClass logMethod1] --> logMethod1: 0
2013-02-15 20:32:29.277 NSOperationTest[1060:1a03] -[MyOperationTestingClass logMethod2] --> logMethod2: 0
2013-02-15 20:32:29.280 NSOperationTest[1060:1b03] -[MyOperationTestingClass logMethod1] --> logMethod1: 1
2013-02-15 20:32:29.280 NSOperationTest[1060:1a03] -[MyOperationTestingClass logMethod2] --> logMethod2: 1 
```

# windows - GetEnvironmentVariable("CSIDL_COMMON_APPDATA") 返回 null

> ID：14906124
> 
> 赞同：1
> 
> 时间：2013-02-16T01:54:56.773
> 
> 标签：windows, c#-4.0, windows-7

我正在尝试使用以下语句获取 EnvironmentVariable "CSIDL_COMMON_APPDATA"

```
System.Environment.GetEnvironmentVariable("CSIDL_COMMON_APPDATA"); 
```

我希望得到 "C:\ProgramData\" 回来。但我得到 null 我在 Windows 7 32 位机器上运行我的 C# 程序。请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T02:09:15.683

CSIDL_COMMON_APPDATA 不是环境变量，它是您传递给 SHGetFolderPath() winapi 函数的常量。在 C# 中，您可以使用 Environment.GetFolderPath() 来做到这一点：

```
string path = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData);
Console.WriteLine(path); 
```

普通PC上的输出：

```
C:\ProgramData 
```

# javascript - jquery ajax完成事件后不执行代码

> ID：14906128
> 
> 赞同：0
> 
> 时间：2013-02-16T01:55:57.767
> 
> 标签：javascript, jquery

我试图在 ajax 完成事件中执行一些代码，但它不适用于页面加载事件，但它在 onchange 链接事件中完美运行

```
$(document).ready(function() {
    $.ajax({
        beforeSend: function() {
         // Handle the beforeSend event
        },
        complete: function() {
            // Handle the complete event
            $("#customfields_1 :input").filter(function() {
                return $.trim(this.value).length === 0;
            }).closest("td").hide();
        }
       // ......
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T06:05:14.980

```
$(document).ready(function() {
    $.ajax({
        url: 'http://foo.bar.com/some.json',  // this is the important part
        beforeSend: function() {
         // Handle the beforeSend event
        },
        complete: function() {
            // Handle the complete event
            $("#customfields_1 :input").filter(function() {
                return $.trim(this.value).length === 0;
            }).closest("td").hide();
        }
       // ......
    });
}); 
```

# c# - 继承对于视图模型是否安全

> ID：14906130
> 
> 赞同：1
> 
> 时间：2013-02-16T01:56:01.590
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, viewmodel

我有一些创建和编辑具有公共属性的视图模型。我在网上读到，对视图模型使用继承是邪恶的。所以，我想知道拥有这些类型的视图模型是否安全。

```
public class CustomerVM
{
   public int CustomerId {get;set;}
   public string Name { get; set;}
}

public class CustomerCreateVM : CustomerVM
{
   public dictionary<string,string> ModelCustomers { get; set;}
}

public class CustomerEditVM : CustomerVM
{
   public List<Orders> OrdersList {get;set;}
} 
```

应用程序中不使用 CustomerVM，它仅用于存储常用属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:07:32.097

**论据：**

“最佳实践”的理念越来越趋向于“胖模特”。因此，模型驱动的设计非常宝贵。因此具有排列和抽象是可取的

**反对：**

由于模型实际上是用于将数据传递给视图，因此最好使用简单。这符合“控制器主导逻辑”的思想。

**摘要：** 绝对不是邪恶的。

甚至不坏。推荐与否取决于您是否为数据处理争取“胖”复杂模型/“瘦”控制器或简单（更指向非复杂）模型。

我个人倾向于模型的简单性。但是我已经看到了足够多的千疮百孔的控制器来欣赏另一面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:57:32.053

正如俗话说的“偏好组合胜于继承”。在 CustomerEdit 上拥有 CustomerVM 的属性比以这种方式使用继承要好。在您发布的简单案例中，我认为这并不重要，但是随着系统的增长，如果您习惯于使用继承，随着模型的复杂性和层次结构深度的增加，事情可能会开始变得丑陋。

# java - 如何拯救有孩子的父母？

> ID：14906131
> 
> 赞同：0
> 
> 时间：2013-02-16T01:56:13.407
> 
> 标签：java, hibernate, parent-child, one-to-many, cascade

我有父实体`Order`和子实体`OrderItem`。我想将对象`Order`与 一起保存`Set<OrderItem>`，但是`idOrder`是自动递增的。`Order`和之间`OrderItem`是**一对多的**关系。`OrderItem`包括对 parent 的引用`Order`。所以`Order`项目必须先保存，然后必须`OrderItem`用assigned保存`idOrder`。

这是**Order.hbm.xml**

```
<class name="hibernate.Order" table="order" catalog="my">
    <id name="idOrder" type="java.lang.Integer">
        <column name="id_order" />
        <generator class="identity" />
    </id>
    <set name="orderItems" inverse="true" cascade="all">
        <key>
            <column name="id_order" not-null="true" />
        </key>
        <one-to-many class="hibernate.OrderItem" />
    </set>
</class> 
```

班级**秩序**

```
public class Order  implements java.io.Serializable {

     private Integer idOrder;
     private Set<OrderItem> orderItems = new HashSet<OrderItem>(0);

} 
```

这是**OrderItem.hbm.xml**

```
<class name="hibernate.OrderItem" table="order_item" catalog="my">
    <id name="idOrderItem" type="java.lang.Integer">
        <column name="id_order_item" />
        <generator class="identity" />
    </id>
    <many-to-one name="order" class="hibernate.Order" fetch="select">
        <column name="id_order" not-null="true" />
    </many-to-one>
</class> 
```

类**OrderItem**

```
public class OrderItem  implements java.io.Serializable {

     private Integer idOrderItem;
     private Order order;

} 
```

当我尝试保存它时，它会抛出异常。

```
object references an unsaved transient instance - save the transient instance before flushing: hibernate.Order 
```

**编辑：** 它适用于以下语句。它是否正确？

```
Order order = mapper.map(dtoOrder, Order.class);

Set<OrderItem> orderItems = order.getOrderItems();
for (OrderItem orderItem : orderItems) {
    orderItem.setOrder(order);
}
order.setOrderItems(orderItems);

session.save(order); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:59:18.473

所以基本上这里有3种解决方法。

1.保存订单而不是订单项，因为对于您当前的休眠配置，级联从订单导航到订单项；

2.在OrderItem.hbm.xml中有一个cascade=save-update，然后保存一个OrderItem会自动保存Order；但这不推荐；

3.由于某种原因，如果您坚持保存 OrderItem 并且不想更改您的休眠配置，恐怕您必须先显式保存 Order 然后调用 session.flush() 以在保存 OrderItem 之前持久化 Order 实例;

我希望这是有道理的。

# core-data - 为不同的表视图设置谓词

> ID：14906135
> 
> 赞同：0
> 
> 时间：2013-02-16T01:57:08.130
> 
> 标签：core-data, delegates, nspredicate, nsfetchedresultscontroller, nsfetchrequest

这对我来说是一个大问题，我仍然坚持它，所以我希望有人能给我一些指导。

**我所拥有的是：**

*   3 个具有多个单元格的表格视图，每个单元格具有多个文本字段。
*   每次按下这些单元格上的特定文本字段时，就会出现在弹出框内的 1 个表格视图。这个表视图有所有！从我的数据库中检索必要数据的核心数据方法。

一切正常...但是我需要区分 tableview 1 或 2 或 3 中应该出现什么样的数据...所以我知道我必须使用谓词！

**我做了什么：（**我尝试过其他事情）

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController == nil)
    {

        NSFetchRequest *fetchRequestList = [[NSFetchRequest alloc] init];
        NSEntityDescription *entityList = [NSEntityDescription entityForName:@"List"     inManagedObjectContext:self.managedObjectContext];
        [fetchRequestLista setEntity:entityList];

        TableViewOne *table1 = [[Cobertura alloc]init];
        TableViewTwo *table2 = [[Cobertura alloc]init];

        if (table1 textFieldShouldBeginEditing:table1.textFieldPressed)
        {
            fetchRequestList.predicate = [NSPredicate predicateWithFormat:@"%K IN %@", @"reference",     arrayTableview1];
        }

        if (table2 textFieldShouldBeginEditing:table2.textFieldPressed)
        {
            fetchRequestList.predicate = [NSPredicate predicateWithFormat:@"%K IN %@", @"reference",    arrayTableview2];
        }

        NSSortDescriptor *cellTitle = [[NSSortDescriptor alloc] initWithKey:@"reference"     ascending:YES];
        NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:cellTitle, nil];
        [fetchRequestLista setSortDescriptors:sortDescriptors];

        _fetchedResultsController = [[NSFetchedResultsController alloc]     initWithFetchRequest:fetchRequestLista managedObjectContext:self.managedObjectContext     sectionNameKeyPath:@"referencia" cacheName:nil];
        _fetchedResultsController.delegate = self;
        self.fetchedResultsController = _fetchedResultsController;

        return _fetchedResultsController;
    } 
```

在我的每个表视图中，我的方法 textFieldShouldBeginEditing 中有一个“popoverTableview”实例：

```
popoverTableview = [self.storyboard     instantiateViewControllerWithIdentifier:@"popoverTableview"];
popover = [[UIPopoverController alloc] initWithContentViewController:popoverTableview];
[popover presentPopoverFromRect:textField.bounds inView:textField permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
popoverTableview.delegate = self;
popoverTableview.popView = self.popover; 
```

所以，如果我在 tableview1 我需要得到 [NSPredicate predicateWithFormat:@"%K IN %@", @"reference", arrayTableview1];

我应该创建某种我的 tableviewS 可以访问的方法吗？我在这里忘记了什么或没有注意什么？

提前致谢，欢迎提出任何建议！问候

**对于遇到与我相同的问题的每个人，这是我为解决而采取的措施：**

这是我在按下特定文本字段时创建弹出视图时：

```
popoverTableview = [self.storyboard      instantiateViewControllerWithIdentifier:@"popoverTableview"]initWithTextFieldTag:myTextFieldThatWasPressed.tag]
popover = [[UIPopoverController alloc] initWithContentViewController:popoverTableview];
[popover presentPopoverFromRect:textField.bounds inView:textField     permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
popoverTableview.delegate = self;
popoverTableview.popView = self.popover;
popoverTableview.aIntVariable = myTextFieldThatWasPressed; 
```

然后在我的popovertableview中：

```
- (id)initWithTextFieldTag:(int)textFieldTag
{
self.aIntVariable = textFieldTag;

return self;
} 
```

然后在 fetchedResultsController 方法中，您只需要创建简单的 if 来告诉您想要的谓词...

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:11:59.397

如果获取的结果控制器用于弹出表并且您需要知道在哪个表中选择了文本字段，我建议您在创建每个文本字段并创建`int _currentTable`实例变量时标记它们。这样，当您的`textFieldShouldBeginEditing:`方法被调用时，您可以使用标签设置 ivar 的值，并在为弹出表创建获取的结果控制器时检查该标签。

所以，而不是

```
if (table1 textFieldShouldBeginEditing:table1.textFieldPressed)
{
    fetchRequestList.predicate = [NSPredicate predicateWithFormat:@"%K IN %@", @"reference",     arrayTableview1];
}

if (table2 textFieldShouldBeginEditing:table2.textFieldPressed)
{
    fetchRequestList.predicate = [NSPredicate predicateWithFormat:@"%K IN %@", @"reference",    arrayTableview2];
} 
```

你会有

```
if (_currentTable == 1) {
    fetchRequestList.predicate = // table one predicate
} else if (_currentTable == 2) {
    fetchRequestList.predicate = // table two predicate
} 
```

更新：

这就是我从代码中覆盖初始化的方式。在您的弹出表视图控制器实现中：

```
- (id)initWithTableTag:(int)tableTag
{
    self = [super init];
    if (self) {
        _currentTable = tableTag;
    }
    return self;
} 
```

（确保您还在`- (id)initWithTableTag:(int)tableTag;`标题中声明。）然后，当您创建并呈现弹出控制器时（我假设您正在 textFieldShouldBeginEditing: 委托调用中执行此操作）：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {

    // ...

    YourPopoverTableViewControllerClass *vc = [[YourPopoverTableViewControllerClass alloc] initWithTableTag:textField.tag];

    // ...
    // display the popover

    return YES;
} 
```

不幸的是，我不知道如何使用故事板来做到这一点。

# ruby-on-rails - 如何最好地管理用于表示优先级的整数列

> ID：14906136
> 
> 赞同：1
> 
> 时间：2013-02-16T01:57:40.640
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我正在尝试通过其`priority:integer`列管理 ActiveRecord 模型。我想用`after_update`和`after_create`钩子来管理行，以保持它们的顺序整洁。

我有两个需求：

1.  获取当前项目列表并更新其优先级属性以遵循严格的顺序。示例：具有所述优先级列的三个项目的列表。

    ```
    [a.priority = 4, b.priority = 66, c.priority = 92] 
    ```

    变成

    ```
    [a.priority = 1, b.priority = 2, c.priority = 3] 
    ```

2.  更新所有行的优先级以反映在列表中间添加新行。

    ```
    [a.priority = 1, b.priority = 2, c.priority = 3, d.priority = 4] 
    ```

    加上`e.priority = 2`创建一个新的列表

    ```
    [a.priority = 1, e.priority = 2, b.priority = 3, c.priority = 4, d.priority = 5] 
    ```

**github 仓库：[https ://github.com/digitalcake/priority_manager](https://github.com/digitalcake/priority_manager)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:43:06.377

对于第一种情况，您可以执行类似的操作

```
Model.order("priority ASC").each_with_index {|m,i| 
  m.update_attribute(:priority, i+1) } 
```

而第二个

```
Model.where("priority >= ?", new_priority).each {|m| 
  m.update_attribute(:priority, m + 1) } 
```

That said, if you are only interested in the ordering and not the absolute position on the list it would be more efficient if instead of using integers to store your priorities, you used floats. Insert a row by assigning a it value between the priorities of the objects you want it to be in between. IE to insert *a* between *b* and *c* with respective priorities *pb* and *pc* assign it a priority of *pa* = (*pc* + *pb*) / 2

This way the overall ordering remains intact, but you dont need to touch and resave every object with a higher priority every time you insert a new row.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T04:42:00.250

I just handled the exact same scenario in one of the apps I am building. The solution in the accepted answer did not work as it will recursively use callbacks to call the object you are trying to update (inside update_attributes). Also we need to skip the id for self object inside the query.

Here is how I am doing it finally, and it does seem to work for all cases.

```
after_commit :order_priorities, :if => :persisted?
after_destroy :handle_priorities_when_destroyed

def order_priorities
    correct_priority = MyModel.where('id != ? AND priority < ?',id,priority).count + 1
    MyModel.where.not(id:id).order(:priority).each_with_index {|x,i|
        if x.priority < priority
            x.update_column(:priority, i+1) 
        else
            x.update_column(:priority, i+2)
        end
    }
    self.update_column(:priority,correct_priority) 
end

def handle_priorities_when_destroyed
    MyModel.where.not(id:id).order(:priority).each_with_index {|x,i|
            x.update_column(:priority, i+1)
    }
end 
```

Here I am using after_commit callback, so that I will be able to set correct_priority for self that I define in my method. Other callbacks will not work as the value will be overwritten during commit.

Using update_column, so that callbacks are skipped when I do not want them.

Logic is self explanatory.

# android - 使用搜索查询时，Android FTS4 数据库返回一个空光标

> ID：14906139
> 
> 赞同：0
> 
> 时间：2013-02-16T01:58:10.220
> 
> 标签：android, cursor, fts4

在我的应用程序中，我创建了一个存储联系人信息的 FTS4 数据库，该应用程序使用户能够根据姓名搜索联系人。当用户输入搜索查询时，该查询将与数据库中的条目进行比较，然后将匹配的条目显示在列表中。当我单击任何条目时，它会给我一个错误，我对其进行调试以发现我的光标为空。

以下是我的 Database 类中最有可能导致问题的部分：

```
private static final String DATABASE_CREATE_FTS = 
        "CREATE VIRTUAL TABLE " + DATABASE_TABLE_FTS + " USING fts4(" +
                 COL_ID + " TEXT, " +
                 COL_NAME + " TEXT, " + 
                 COL_EMAIL + " TEXT, " +
                 COL_CELL + " TEXT, " + 
                 COL_ARRIVAL + " TEXT, " +
                 COL_DEPARTURE + " TEXT, " + 
                 COL_FLIGHT_NUMBER + " TEXT, " +
                 COL_HOTEL_ROOM_NUMBER + " TEXT, " + 
                 COL_EVENT1 + " TEXT, " +
                 COL_EVENT2 + " TEXT, " + 
                 COL_EVENT1_ROOM + " TEXT, " +
                 COL_EVENT2_ROOM + " TEXT" + ");";

public Cursor getContactMatches(String query, String[] columns) {
            String selection = COL_NAME + " MATCH ?";
            Log.d("selection", selection);
            String[] selectionArgs = new String[] {query};

            return query(selection, selectionArgs, columns);
        }

        public Cursor query(String selection, String[] selectionArgs, String[] columns) {
            DBHelper = new DbHelper(ourContext);
            open();
            SQLiteQueryBuilder build = new SQLiteQueryBuilder();
            build.setTables(DATABASE_TABLE_FTS);
            SQLiteDatabase data = DBHelper.getWritableDatabase();
            Cursor cursor = build.query(data,
                    columns, selection, selectionArgs, null, null, null);
            Log.d("cursor" , "" + cursor.getCount());
            return cursor;
        } 
```

这是我的搜索活动：

```
private void showResults(String query) {
    db = new DatabaseTable(this);
    db.open();
    Cursor cursor = db.getContactMatches(query, DatabaseTable.COLUMNS);
    cursor.moveToFirst();
    int name = cursor.getColumnIndex(DatabaseTable.COL_NAME);
    Log.d("Name", "" + name);
    mAdapter = new SimpleCursorAdapter(this, R.layout.activity_search_results, 
            cursor, new String[] {DatabaseTable.COL_NAME}, new int[] {android.R.id.text1}, 0);
    list.setAdapter(mAdapter);
    Log.d("Cursor", "" + cursor.getCount());
    getLoaderManager().initLoader(0, null, this);
    list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Intent contactIntent = new Intent(view.getContext(), ContactActivity.class);
            Uri uri = Uri.withAppendedPath(SomeProvider.CONTENT_URI, String.valueOf(id));
            contactIntent.setData(uri);
            startActivity(contactIntent);
        }
    });
    db.close();
} 
```

错误：

```
02-15 19:56:22.176: D/cursor(31943): android.database.sqlite.SQLiteCursor@41cdde90
02-15 19:56:22.176: D/c(31943): 0 (amounts of rows)
02-15 19:56:22.176: D/Index(31943): 1
02-15 19:56:22.176: D/AndroidRuntime(31943): Shutting down VM
02-15 19:56:22.176: W/dalvikvm(31943): threadid=1: thread exiting with uncaught exception (group=0x40ea5438)
02-15 19:56:22.186: E/AndroidRuntime(31943): FATAL EXCEPTION: main
02-15 19:56:22.186: E/AndroidRuntime(31943): java.lang.RuntimeException: Unable to    start activity ComponentInfo

{com.example.myfirstapp/com.example.myfirstapp.ContactActivity}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0 
```

# python - 是否有任何 python 库可以在漂亮的 ascii 表中输出字典？

> ID：14906144
> 
> 赞同：8
> 
> 时间：2013-02-16T02:00:51.250
> 
> 标签：python, ascii

我在这里有相当大的字典，它只是一遍又一遍地重复，我正在搜索任何代码以在一些 ascii 表中显示该字典，这将被输出到命令行。至少要为非维度字典生成一些列，其余的可以作为单元格中的键：值，如下所示：

字典 = {"column1":{"key":"val"}, "column2": "value" }

```
=====================
| column1 | column2 |
=====================
| key:val | value   | 
```

`u"" {} ,`当我快速需要这些信息时，最好看到所有那些真正令人不安的输出。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-16T02:37:27.333

你可以使用[`prettytable`](http://code.google.com/p/prettytable/wiki/Tutorial).

```
t = PrettyTable(['key', 'value'])
for key, val in dictionary.items():
   t.add_row([key, val])
print t 
```

您还可以使用[`textwrap`](http://docs.python.org/2/library/textwrap.html)模块将值拆分为多行（[本要点中的示例](https://gist.github.com/dnozay/4965322)）。想象一下，你想显示 os.environ 的内容；结果（短版）：

```
+------------------------------+--------------------------------------------------------------+
|             key              |                            value                             |
+------------------------------+--------------------------------------------------------------+
|            CFLAGS            |           -fno-strict-aliasing -O2 -g -pipe -Wall            |
|                              |    -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector    |
|                              | --param=ssp-buffer-size=4  -m64 -mtune=generic -D_GNU_SOURCE |
|                              |         -fPIC -fwrapv   -DNDEBUG -O2 -g -pipe -Wall          |
|                              |    -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector    |
|                              | --param=ssp-buffer-size=4  -m64 -mtune=generic -D_GNU_SOURCE |
|                              |                        -fPIC -fwrapv                         |
|             MAIL             |                    /var/spool/mail/damien                    |
|          LS_COLORS           | rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=4 |
|                              | 0;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=3 |
|                              | 0;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;3 |
|                              | 1:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01; |
|                              | 31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:* |
|                              | .dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.tbz |
|                              | =01;31:*.tbz2=01;31:*.bz=01;31:*.tz=01;31:*.deb=01;31:*.rpm= |
|                              | 01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar= |
|                              | 01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=0 |
|                              | 1;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm= |
|                              | 01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm= |
|                              | 01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svg |
|                              | z=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mp |
|                              | eg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m |
|                              | 4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.w |
|                              | mv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.a |
|                              | vi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf |
|                              | =01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv |
|                              | =01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au= |
|                              | 01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp |
|                              | 3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa |
|                              | =01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:*.pdf=00;33:*.ps |
|                              | =00;33:*.ps.gz=00;33:*.txt=00;33:*.patch=00;33:*.diff=00;33: |
|                              | *.log=00;33:*.tex=00;33:*.xls=00;33:*.xlsx=00;33:*.ppt=00;33 |
|                              | :*.pptx=00;33:*.rtf=00;33:*.doc=00;33:*.docx=00;33:*.odt=00; |
|                              | 33:*.ods=00;33:*.odp=00;33:*.xml=00;33:*.epub=00;33:*.abw=00 |
|                              |   ;33:*.htm=00;33:*.html=00;33:*.shtml=00;33:*.wpd=00;33:    |
|       GJS_DEBUG_TOPICS       |                       JS ERROR;JS LOG                        |
+------------------------------+--------------------------------------------------------------+ 
```

# java - 递归谢尔宾斯基三角 Java

> ID：14906148
> 
> 赞同：3
> 
> 时间：2013-02-16T02:01:46.430
> 
> 标签：java, recursion

我试图在 Java 中递归地绘制谢尔宾斯基的三角形，但它不起作用，尽管对我来说逻辑似乎很好。基本情况是当三角形彼此相距在 2 个像素以内时，因此使用距离公式。

```
import java.awt.Graphics;
import java.awt.Color;
import java.awt.Font;
import java.awt.Canvas;

public class Triangle extends Canvas implements Runnable
{
    private static final int WIDTH = 800;
    private static final int HEIGHT = 600;

public Triangle()
{
    setBackground(Color.WHITE);
}

public void paint( Graphics window )
{
    window.setColor(Color.BLUE);
    window.setFont(new Font("ARIAL",Font.BOLD,24));     
    window.drawString("Serpinski's Gasket", 25, 50);

    triangle(window, (WIDTH-10)/2, 20, WIDTH-40, HEIGHT-20, 40, HEIGHT-20, 4);
}

public void triangle(Graphics window, int x1, int y1, int x2, int y2, int x3, int y3, int r)
{

    //if statement base case
        //midpoint = (x1 + x2 / 2), (y1 + y2/ 2)
        if(Math.sqrt((double)(Math.pow(x2-x1, 2)) + (double)(Math.pow(y2-y1, 2))) > 2)
        //if(r==0)
        {
            window.drawLine(x1, y1, x2, y2);     
            window.drawLine(x2, y2, x3, y3);
            window.drawLine(x3, y3, x1, y1);
        }

        int xa, ya, xb, yb, xc, yc;   // make 3 new triangles by connecting the midpoints of
        xa = (x1 + x2) / 2;             //. the previous triangle 
        ya = (y1 + y2) / 2;
        xb = (x1 + x3) / 2;
        yb = (y1 + y3) / 2;
        xc = (x2 + x3) / 2;
        yc = (y2 + y3) / 2;

        triangle(window, x1, y1, xa, ya, xb, yb, r-1);   // recursively call the function using the 3 triangles
        triangle(window, xa, ya, x2, y2, xc, yc, r-1);
        triangle(window, xb, yb, xc, yc, x3, y3, r-1);

}

public void run()
{
    try{
        Thread.currentThread().sleep(3);    
    }
    catch(Exception e)
    {
    }
}
} 
```

跑步者是

```
import javax.swing.JFrame;

public class FractalRunner extends JFrame
{
    private static final int WIDTH = 800;
    private static final int HEIGHT = 600;

public FractalRunner()
{
    super("Fractal Runner");

    setSize(WIDTH+40,HEIGHT+40);

    getContentPane().add(new Triangle());   

    setVisible(true);
}

public static void main( String args[] )
{
    FractalRunner run = new FractalRunner();
}
} 
```

对我来说，这应该可行，但它会导致我不知道如何纠正的运行时/StackOverFlow 错误。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:06:25.140

您需要在分离的条件检查中将递归调用移动到三角形以及相关的数学。现在，它总是会调用它，因此你会得到堆栈溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T02:58:36.643

您的基本情况可能无法正常工作 - 如果两个三角形之间的距离从来不是两个像素怎么办？假设我们将 y1 和 x1 设为 0 和 200。它们的中点为 100，然后 50、25、12、6、3、1<--- 永远不会达到 2 像素的基本情况...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T09:14:47.857

“StdDraw”取自[这里](http://introcs.cs.princeton.edu/java/15inout/)：

```
public class Sierpinski {

    public static void sierpinski(int n) {
        sierpinski(n, 0, 0, 1);
    }

    public static void sierpinski(int n, double x, double y, double size) {

        if (n == 0) return;

        //compute triangle points
        double x0 = x;
        double y0 = y;
        double x1 = x0 + size;
        double y1 = y0;
        double x2 = x0 + size / 2;
        double y2 = y0 + (Math.sqrt(3)) * size / 2;

        // draw the triangle        
        StdDraw.line(x0, y0, x1, y1);
        StdDraw.line(x0, y0, x2, y2);
        StdDraw.line(x1, y1, x2, y2);
        StdDraw.show(100);

        //recursive calls
        sierpinski(n-1, x0, y0, size / 2);
        sierpinski(n-1, (x0 + x1) / 2, (y0 + y1) / 2, size / 2);
        sierpinski(n-1, (x0 + x2) / 2, (y0 + y2) / 2, size / 2);
    }

    // read in a command-line argument n and plot an order Sierpinski Triangle
    public static void main(String[] args) {
        int n = Integer.parseInt(args[0]);
        StdDraw.setPenRadius(0.005);
        sierpinski(n);
    }
} 
```

盖伊

# sublimetext2 - Sublime Text 2 复古模式下的多选编辑

> ID：14906171
> 
> 赞同：4
> 
> 时间：2013-02-16T02:05:30.947
> 
> 标签：sublimetext2

有没有办法在复古模式下跨多个选择编辑文件？

我点击`cmd + D`（这是在 Mac 下）选择文件中的字符串实例，但我不知道如何编辑选择。

这是在 Sublime Text 2 下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T18:38:26.540

我没有在 Mac 上测试过，但是在 Linux 上使用`CTRL-D`会让你进入可视模式。当您处于可视模式时`c`，您可以更改突出显示的文本，让您进入插入模式，就像 vim 一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T00:54:46.843

我自己很难弄清楚这一点。我发现简单地选择一个单词`Ctrl+D`然后按下`c`并不是一个完整的解决方案。它只会选择第一次出现的单词。为了选择和更改它们，我发现我需要执行以下序列：

*   将光标放在所需单词的开头
*   `Ctrl+D`突出显示这个词
*   `Ctrl+F`打开`Find`预先填充有所需单词的框
*   `Alt+Enter`选择所有匹配的单词
*   `c`做出改变
*   `Esc`返回命令模式

互联网上有几篇文章（[包括 Sublime Text 网站上的文档](http://www.sublimetext.com/docs/2/multiple_selection_with_the_keyboard.html)），其中指出按下`Alt+F3`将选择所有匹配的单词。这对我在 openSUSE/KDE 上不起作用。按下`Alt+F3`将打开窗口菜单，用于最小化、最大化等。事实上，如果`Find All`在打开框后将鼠标悬停在按钮`Find`上，它将显示 Alt-text 指示`Alt+Enter`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-21T15:44:21.733

通常我只是按shift+上/下/右/左，然后你会发现你可以选择任何你想要的。它适用于 Mac sublime 3。

# python - Python inFile 循环没有获取文件中的每个项目

> ID：14906177
> 
> 赞同：0
> 
> 时间：2013-02-16T02:06:45.673
> 
> 标签：python, file-io

我正在尝试编写一个程序，该程序从列表中读取一系列名称和数字，如下所示：

```
5
Jim
79 84 82
Bob
32 12 47
Kelly
90 86 93
Courtney
80 99 89
Chad
89 78 91 
```

数字的格式是：

```
<Assignment score>   <Quiz Score>   <Exam Score> 
```

每个乘数是：

```
.3 .1 .6 
```

目前我有这个：

```
def main():
    inFile = open("input.txt","r")

    numVals = int(inFile.readline())
    for i in range(numVals):
        name = inFile.readline()

    numbers = inFile.readline().split()
    for n in range(len(numbers)):
        numbers[n] = float(int(numbers[n]))

    avg = float(numbers[0]* .3 + numbers[1]* .1 + numbers[2]* .6)
    print(name, "'s Score is",avg,"%.")

    inFile.close()

main() 
```

我的输出应该是这样的：

```
Jim’s score is <avg>.
Bob’s score is <avg>.
Kelly’s score is <avg>.
Courtney’s score is <avg>.
Chad’s score is <avg>. 
```

但相反，我得到了这个：

```
Kelly
 's Score is <avg> %. 
```

关于如何打印以获取文件中的每个名称和文件中的每一行数字的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:11:35.287

您需要从 readline 的结果中去除尾随的换行符。

也许是这样的：

```
weights = [.3, .1, .6]
with open ('file2.txt') as f:
    count = int (f.readline ().strip () )
    for i in range (count):
        name = f.readline ().strip ()
        score = sum (w * s for w,s in zip (weights, (int (x) for x in f.readline ().strip ().split () ) ) )
        print ('{}\'s Score is {} %.'.format (name, score) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:14:23.407

所以你有 5 条记录，每条有 2 行。第一个任务是正确地摄取这些信息。您可以通过`fin.readline()`或 via获得一条线路，该线路`next(fileobject)`也适用于 python3.x。

```
weights = ( 0.3, 0.1, 0.3 )
with open('datafile') as fin: #open file for reading
    n = int(next(fin)) #read the first line and figure out how many people there will be
    for _ in range(n): #Loop over the records, 2 at a time:
        name = next(fin).strip() #read the name, strip off the whitespace.
        grades = [float(x) for x in next(fin).split()] #read the grades, make then floats
        total = sum( w*g for w,g in zip(weights,grades) )
        print name, total 
```

这实际上与您目前所拥有的并没有太大的不同：

```
def main():
    inFile = open("input.txt","r")

    numVals = int(inFile.readline())
    for i in range(numVals):
        name = inFile.readline() #add a .strip() here
        #grades = [float(x) for x in inFile.readline().strip()]
        #do the rest of the processing for a single person here 
        #since you have all their info.  If you wait, you'll replace
        #the info you currently have with the info for the next person
        #You'll continue to do that until the last person -- meaning
        #that at the end of the day, you'll only have the info for the
        #last person. 
```

# java - 播放框架：不推荐使用 Integer 类型：改用 java.lang.Integer

> ID：14906178
> 
> 赞同：2
> 
> 时间：2013-02-16T02:06:55.080
> 
> 标签：java, playframework, playframework-2.0

由于 PlayFramework 似乎不允许在路由中使用原始 Java 类型（例如 int、long），因此我不得不在`Integer`路由中使用，例如：

```
GET /paginate/:page controllers.Foo.paginate(page: Integer) 
```

但是，在启动应用程序时，我收到大量警告说：

```
[warn] /project/target/scala-2.9.1/src_managed/main/routes_reverseRouting.scala:351: type Integer is deprecated: use java.lang.Integer instead
[warn] def paginate(page:Integer) = new play.api.mvc.HandlerRef( 
```

Wtf 这是关于什么的？我现在必须`java.lang.Integer`在我的所有路线中指定吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:02:54.507

1) 在路由文件中：将“Integer”替换为“Int”。您可能想要指定一个默认值。例子：

```
GET  /my/path  controllers.MyController.foo(value:Int ?= 0) 
```

2）在（Java）控制器中：将 Integer 更改为 int

```
public static Result foo(int value) {} 
```

我发现警告“不推荐使用整数类型：改用 java.lang.Integer”也非常令人困惑。

# cakephp - 具有相关条件的 CakePHP 模型

> ID：14906181
> 
> 赞同：2
> 
> 时间：2013-02-16T02:07:07.717
> 
> 标签：cakephp

我有三个模型，如下所示：

Location hasMany SportType hasMany Sport, then Sport belongsTo SportType belongsTo Location

在 SportType 模型中，belongsTo Location 的条件为 'Location.status' => true，因此它只检索 Location 状态为 true 的记录。工作正常。

当通过 Sport 模型中的普通旧 find() 检索记录时，我会假设它不会返回关联的 SportType 的关联位置为假的记录，但事实并非如此。

我相信我可以在我的控制器中使用可包含的行为或显式构造的连接来获得我想要的东西，但我想知道这是否是我可以纯粹通过模型关系实现的东西。也许不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T06:10:09.890

您可以使用`Joins`或更改您正在搜索的模型，并通过限制模型（即`Location`）进行搜索。

```
$this->Location->find('all', array(
    'conditions' => array(
        'Location.status' => true
    ),
    'contain' => array(
        'SportType' => array(
            'Sport'
        )
    )
)); 
```

但是您不能根据包含的模型中的条件来缩小搜索模型的结果。

**更新：**

Joins 还允许您向其他模型添加更多条件......等等，而不是 Contain 没有，所以我想我会倾向于使用 Joins，因为这样可以让您更加灵活地前进。

此外，一个 JOIN 将执行一个更复杂的查询，而一个 contains 将执行许多更简单的查询......所以根据您的数据库结构，可以考虑。

最重要的是，这是偏好 - 两者都很好，适合你的都很棒。

# github - 如何从克隆的仓库提交拉取请求？

> ID：14906187
> 
> 赞同：93
> 
> 时间：2013-02-16T02:09:03.343
> 
> 标签：github, pull-request

如何从现有的本地克隆仓库提交拉取请求？

通常，我想从 github 上查看一些库源代码，所以我克隆了它。后来，我发现代码存在一些问题，并在邮件列表中提出，通常是顺便提一下。图书馆作者说“很好，你能发送一个拉取请求吗？”。

答案是“没那么容易”。我还没有分叉回购，我已经克隆了它。而且我似乎找不到从克隆仓库提交拉取请求的方法？

如果这个限制是真的，感觉明智的反应是分叉任何你看过的东西，这样如果你想贡献，你就可以。这会让你的 github 帐户充满许多不活跃的分叉。

似乎没有太多谈论这个问题 - 我是这个问题影响的唯一人吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-16T02:13:01.490

在 GitHub 上 fork 存储库，然后将您的 fork 存储库作为远程添加到本地克隆副本：

```
git remote add myfork https://github.com/<myGitHubAccountName>/<repoName>.git 
```

然后你可以推到你的叉子：

```
git push myfork master 
```

如果你做的不仅仅是这一个拉取请求，你可以删除`origin`远程并将你的 fork 命名为 origin：

```
git remote rm origin
git remote add origin https://github.com/<myGitHubAccountName>/<repoName>.git 
```

这通常是我所做的。有时我会添加原始来源，`upstream`因此我仍然可以参考它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-08-27T23:43:47.693

如果您可以在路径中安装另一个二进制文件，github 发布了一个不错的小工具，名为[`hub`](https://hub.github.com/).

如果你克隆了别人的仓库：

```
$ hub fork  # This creates a fork and adds your repo as a remote

$ git push YOUR_USER feature  # push the changes to your new remote

$ hub pull-request  # will open your browser 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-14T18:14:23.050

我也总是克隆而不是叉子，以下步骤对我有用：

1.  在克隆的 repo 上创建一个新分支并进行新的更改。
2.  将更改推送到您的分支，如下所示：

    `git push origin insert_your_working_branch_name`

3.  现在您应该能够在来自 github master 的 pull request 中找到您的工作分支。

# iphone - 用于 voip 的音频比特流上的 ios 回声消除

> ID：14906189
> 
> 赞同：0
> 
> 时间：2013-02-16T02:09:15.747
> 
> 标签：iphone, ios, sip, voip, audio-streaming

我正在开发一个 ios voip 应用程序。由于我打电话时的环境噪音，通话质量非常不合格。噪音来自应用程序。

我需要帮助了解使用哪些 ios 框架/库来帮助我消除**流式音频**的环境/回声 - 原始比特流。我在 ios 上阅读了部分多媒体框架的内容，但关于音频流的信息很少，大多数文档都关注音频文件。

我可以使用标准 ios 音频库来消除 voip 通话期间的环境噪音吗？标准 ios 库与 Speeq 库有何不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:01:56.857

有一个名为 kAUVoiceIOProperty_VoiceProcessingQuality 的设置，您可以设置它来调整应用到音频单元的抑制级别。这是苹果文章的链接。[技术问答QA1683](http://developer.apple.com/library/ios/ipad/#qa/qa1683/_index.html)

# iphone - Xcode 4.5.2 模拟器在 main.m 文件中崩溃

> ID：14906190
> 
> 赞同：1
> 
> 时间：2013-02-16T02:09:21.317
> 
> 标签：iphone, xcode

```
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));

} 
```

我在哪里开始说 `return UIApplication`

我正在创建一个应用程序，该应用程序全部连接到一个选项卡视图，并且除了一页之外一切正常。我还有多个其他可用的页面，但是一旦我进入该页面，它就会在这行代码上崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-25T15:09:09.637

我有同样令人抓狂的问题。我发现约束是问题（有些无法解决）。我删除了所有约束（从细节场景中），它再次起作用。调试器的“所有输出”部分最终为我提供了所需的线索。重置模拟器并重新启动没有效果。我希望这可以帮助别人。

# backbone.js - 主干视图、模型和路由器的角色

> ID：14906200
> 
> 赞同：1
> 
> 时间：2013-02-16T02:11:09.500
> 
> 标签：backbone.js, requirejs

我正在开发一个使用 require.js 的主干应用程序。

我希望用户输入模型的“id”，然后如果该模型存在则重定向到该模型的视图，如果不存在则显示错误消息。这听起来非常简单，但我无法弄清楚每个组件的角色。

在下面的应用程序中，用户将来到一个带有输入（id 为“modelId”）和按钮（类属性为“lookup”）的索引页面。

以下代码是路由器。

```
define(['views/index', 'views/myModelView', 'models/myModel'], 
    function(IndexView, MyModelView, myModel) {
    var MyRouter = Backbone.Router.extend({
        currentView: null,

        routes: {
            "index": "index",
            "view/:id": "view"
        },

        changeView: function(view) {
            if(null != this.currentView) {
                this.currentView.undelegateEvents();
            }
            this.currentView = view;
            this.currentView.render();
        },

        index: function() {
            this.changeView(new IndexView());
        },

        view: function(id) {
            //OBTAIN MODEL HERE?
            //var model
            roter.changeView(new MyModelView(model))
        }

    });

    return new MyRouter();
}); 
```

下面这段代码是索引视图

```
define(['text!templates/index.html', 'models/myModel'], 
    function( indexTemplate, MyModel) {
    var indexView = Backbone.View.extend({
        el: $('#content'),

        events: {
            "click .lookup": "lookup"
        },

        render: function() {
            this.$el.html(indexTemplate);
            $("#error").hide();
        },

        lookup: function(){
            var modelId = $("#modelId").val()
            var model = new MyModel({id:modelId});
            model.fetch({
                success: function(){
                    window.location.hash = 'view/'+model.id;
                },
                error: function(){
                    $("#error").text('Cannot view model');
                    $("#error").slideDown();
                }
            });
        },
    });
    return indexView
}); 
```

我想不通的是，似乎更好的选择是让索引视图查找模型（因此，如果用户要求不存在的模型，它可以显示错误消息，并且还保留路由器清洁器）。但问题是，当 view/:id 路由器被触发时，路由器现在没有对模型的引用。它应该如何在 view() 函数中获取模型？

我想它可以进行另一次提取，但这似乎是多余的和错误的。或者也许应该有一些路由器和视图共享的全局对象（索引视图可以将模型放入其中），但这似乎是紧密耦合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:08:23.000

你可以做这样的事情。您可以使用集合而不是模型执行类似的操作，但您似乎不想获取/显示整个集合？

使用这种类型的解决方案（我认为类似于@mpm 的建议），您的应用程序将正确处理浏览器刷新、后退/前进导航。你基本上有一个 MainView，它更像是一个应用程序控制器。它处理由路由器或用户交互（单击查找或项目视图上的返回索引按钮）触发的事件。

感谢Derick [Bailey](http://lostechies.com/derickbailey/2011/08/28/dont-execute-a-backbone-js-route-handler-from-your-code/)提供了很多这些想法。

在路由器中。这些现在仅在用户通过更改 URL 或后退/前进导航时触发。

```
 index: function() {
        Backbone.trigger('show-lookup-view');
    },

    view: function(id) {
        var model = new MyModel({id: id});
        model.fetch({
            success: function(){
                Backbone.trigger('show-item-view', model);
            },
            error: function(){
                // user could have typed in an invalid URL, do something here,
                // or just make the ItemView handle an invalid model and show that view...
            }
        });
    } 
```

在新的 MainView 中，您将在应用程序启动时创建，而不是在路由器中：

```
el: 'body',

initialize: function (options) {
    this.router = options.router;

    // listen for events, either from the router or some view.
    this.listenTo(Backbone, 'show-lookup-view', this.showLookup);
    this.listenTo(Backbone, 'show-item-view', this.showItem);
},

changeView: function(view) {
    if(null != this.currentView) {
       // remove() instead of undelegateEvents() here
       this.currentView.remove();
    }
    this.currentView = view;
    this.$el.html(view.render().el);
},

showLookup: function(){
    var view = new IndexView();
    this.changeView(view);
    // note this does not trigger the route, only changes hash.
    // this ensures your URL is right, and if it was already #index because
    // this was triggered by the router, it has no effect.
    this.router.navigate('index'); 
},

showItem: function(model){
    var view = new ItemView({model: model});
    this.changeView(view);
    this.router.navigate('items/' + model.id); 
} 
```

然后在 IndexView 中，使用已获取的模型触发“show-item-view”事件。

```
 lookup: function(){
        var modelId = $("#modelId").val()
        var model = new MyModel({id:modelId});
        model.fetch({
            success: function(){
                Backbone.trigger('show-item-view', model);
            },
            error: function(){
                $("#error").text('Cannot view model');
                $("#error").slideDown();
            }
        });
    }, 
```

我认为这并不完美，但我希望它可以为您指明一个好的方向。

# mysql - MySQL 命令提示符不需要密码

> ID：14906206
> 
> 赞同：3
> 
> 时间：2013-02-16T02:11:38.753
> 
> 标签：mysql, passwords

我已经在我的机器上安装了 MySQL。我可以通过直接从开始菜单打开 MySQL 5.6 命令行客户端登录，它会提示我输入密码。当我输入正确的密码时，它会让我进入，如果输入错误，它就会把我踢出去。

当我从命令提示符运行 MySQL 时，我可以登录的唯一方法（使用 root 用户或我创建的另一个用户）是不输入密码。如果我输入我的密码，它会说`access denied to root@localhost`... yada yada ...`using password:YES`

所以总而言之，如果我输入

```
mysql -u root -p
password: [mypassword] 
```

它不起作用，抛出错误`Access denied, using password yes`

但是，如果我这样做

```
mysql -u root -p
password: [blank] 
```

它登录。任何其他用户的行为相同。

这对我来说毫无意义，因为在所有其他应用程序中我都必须输入密码才能进入。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:18:35.407

这是因为用户 root 默认没有密码，除非在安装过程中指定。*如果没有密码*，尝试使用密码登录是不可能的。

# c# - ASP.net jquery 在第二个日历日期选择器中添加 +1 天

> ID：14906211
> 
> 赞同：0
> 
> 时间：2013-02-16T02:12:28.717
> 
> 标签：c#, jquery, asp.net

```
$(document).ready(function () {

    $("#arrival").datepicker({
        minDate: 0,
        numberOfMonths: 2,
        onSelect: function (selected) {
            $("#departure").datepicker("option", "minDate", selected)
        }
    });

    $("#departure").datepicker({
        numberOfMonths: 2,
        onSelect: function (selected) {
            $("#arrival").datepicker("option", "maxDate", selected)
        }
    });
}); 
```

我有到达日期和出发日期。在出发日期，我想再增加 1 天。例子：

我在 ARRIVAL 中选择 2/20/2013，然后在 DEPARTURE 日历中，我应该选择的最短日期是 2/21/2013 而不是 2/20/2013。请帮帮我！我是asp和jquery的新手..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:18:20.617

我猜你只是加一天呢？

```
$("#arrival").datepicker({
    minDate: 0,
    numberOfMonths: 2,
    onSelect: function (selected) {
        var minDate = $(this).datepicker('getDate');
        minDate.setDate(minDate.getDate()+1);
        $("#departure").datepicker("option", "minDate", minDate)
    }
}); 
```

[**小提琴**](http://jsfiddle.net/tsu5c/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:22:42.003

你只需要解析。

```
 $("#arrival").datepicker({
        minDate: 0,
        numberOfMonths: 2,
        onSelect: function (selected) {
            $("#departure").datepicker("option", "minDate", Date.parse(selected)+1)
        }
    });

    $("#departure").datepicker({
        numberOfMonths: 2,
        onSelect: function (selected) {
            $("#arrival").datepicker("option", "maxDate", Date.parse(selected)-1)
        }
    }); 
```

# java - Java - ActionListeners 为方法提供数据

> ID：14906217
> 
> 赞同：-1
> 
> 时间：2013-02-16T02:14:10.583
> 
> 标签：java, string

我有一个动作监听器，它从一组按钮中获取数据（我知道，接下来将它们分成一个按钮，等待......）

我希望它调用“显示”方法，该方法会更改这些按钮的 ImageIcon。要知道将其更改为什么图标，“显示”必须能够访问字符串数组。这个String数组是在与reveal相同的类中的一个方法中创建的，在另一个类中传递和处理，然后返回到与reveal相同的类中的不同方法中。

如何将字符串数组传递给显示函数？我尝试在创建它的类的顶部公开字符串数组。但是，它似乎没有正确返回，并且当显示尝试访问它时，所有值都是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:14:16.803

正如评论中提到的，很高兴看到实际的代码，但我相信我明白这里发生了什么。首先，为了清楚起见，让我建立一些名称。让类 A 是拥有字符串数组的类（并具有显示功能）。让 B 类是对字符串数组进行处理的类。

当您将 String 数组传递给 B 类进行处理时，您只需要确保以下两件事之一：

1）如果您从该函数返回一个字符串数组，请确保使用它来设置类 A 中的字符串数组的值，无论 A 类使用什么函数调用 B 类处理函数。

```
// from class A
private String[] stringsToHealAllAils;
...
public void aFunctionThatNeedsProcessingWithDiscriminatingTaste()
{
    // instance of class B is called b
    stringsToHealAllAils = b.processThingy( stringsToHealAllAils );
} 
```

在这种情况下，B 类中的处理函数将需要基于 A 的 String 数组返回一个全新的 String 数组。而 A 类的函数需要将 String 数组的值替换为处理函数的返回值。

或者

2) 如果您在 B 类拥有的处理函数中从 A 类修改 String 数组（请参见下面的示例代码）

```
public void processThingy( String[] thatLegendaryArray )
{
    // some amazing processing here
    thatLegendaryArray[superSpecialIndex] = someOtherVerySpecialString;
} 
```

也就是说，您可能正在 B 类的处理函数中填充数组。这也可以，但正如示例代码所示，您不需要在类 A 中设置 String 数组的值（如示例 1）。

我的意思是，如果显示函数得到一堆空值，我认为您无法正确处理您的字符串数组。如果这没有帮助，那么一定要发布一些更明确地显示你在做什么的代码。我相信解决方案就在眼前。

# c# - 带有西里尔字母的正则表达式？

> ID：14906232
> 
> 赞同：6
> 
> 时间：2013-02-16T02:17:23.107
> 
> 标签：c#, regex, latin

我目前正在编写一些验证输入数据的验证。我正在使用正则表达式来执行此操作，并使用 C#。

```
Password = @"(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9]{6,18})$"

Validate Alpha Numeric = [^a-zA-Z0-9ñÑáÁéÉíÍóÓúÚüÜ¡¿{0}] 
```

以上在拉丁字母上工作得很好，但是我怎样才能将其扩展到使用西里尔字母呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T02:25:01.147

使用正则表达式覆盖字符范围的基本方法是构造一个形式为 的表达式`[A-Za-z]`，其中`A`是范围的第一个字母，是范围`Z`的最后一个字母。

问题是，没有“The”西里尔字母之类的东西：字母表因语言而略有不同。如果您想涵盖俄语版本的西里尔字母，请使用`[А-Яа-я]`. 你会使用不同的范围，比如塞尔维亚语，因为他们西里尔文的最后一个字母是`Ш`, not `Я`。

另一种方法是逐个列出所有字符。只需找到要放入正则表达式的字母表的权威参考，并将其所有字符放入一对方括号中：

```
[АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдеёжзийклмнопрстуфхцчшщъыьэюя] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-16T02:37:04.973

如果您需要允许特定语言或特定类型的字符，您可以使用[字符类：](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#SupportedUnicodeGeneralCategories)

```
@"\p{IsCyrillic}+" // Cyrillic letters
@"[\p{Ll}\p{Lt}]+" // any upper/lower case letters in any language 
```

In your case maybe "not a whitespace" would be enough: `@"[^\s]+"` or maybe "word character (which includes numbers and underscores) - `@"\w+"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T02:22:34.783

```
Password = @"(?!^[0-9]*$)(?!^[А-Яа-я]*$)^([А-Яа-я0-9]{6,18})$"

Validate Alpha Numeric = [^а-яА-Я0-9ñÑáÁéÉíÍóÓúÚüÜ¡¿{0}] 
```

# javascript - asp.net 网页 web 服务仅在本地机器上工作

> ID：14906233
> 
> 赞同：1
> 
> 时间：2013-02-16T02:17:25.250
> 
> 标签：javascript, jquery, asp.net, iis

我有一个 asp.net 网页，上面只有几个 div。大部分工作是通过 javascript、JSON 和在同一页面上运行的 web 服务完成的。

我的网络服务有我使用的三个不同的功能。所有函数都从同一个数据库执行 select 语句，正在查询的数据库位于网站所在的同一台机器上。

我最初开始在本地计算机上处​​理网页，并且可以正确运行我的所有 Web 服务功能并获得响应。但是，我现在正试图将页面移动到服务器，但我没有运气。

在服务器上，页面加载正确，这需要调用第一个函数（这工作正常）。但是，单击按钮会再次调用该函数，但出现超时错误。

我尝试直接从服务器运行这些函数，第一个函数工作正常，但其他两个没有，它们给了我一个页面错误代码 500。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:19:04.123

我弄清楚了这个问题。我在这两个函数上有一些代码试图从 IP 地址获取主机名，但我的网页托管在域外网络中的计算机上。因此，在尝试将 ip 转换为主机名时出现异常。我通过将网页托管在同一域的计算机上解决了这个问题，这样它就可以将 IP 地址解析为主机名。谢谢您的帮助。

# wordpress - WooCommerce 是否适用于 Toolbox wordpress 儿童主题？

> ID：14906240
> 
> 赞同：0
> 
> 时间：2013-02-16T02:19:01.940
> 
> 标签：wordpress, themes, woocommerce, toolbox

我将使用 WooCommerce，我需要弄清楚我最好的选择是创建一个二十二的子主题还是创建一个工具箱的子主题。

由于工具箱的通用名称，这是一个难以研究的问题，所以我想知道是否有人有任何工具箱/woocommerce 经验，并且可以为该组合开绿灯。

我对 wordpress 开发相当陌生，所以任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:56:11.367

答案是“几乎”。

我只遇到了一个问题 - 在这里描述并解决了：[woocommerce_cart shortcode not working](https://stackoverflow.com/questions/14992944/woocommerce-cart-shortcode-not-working)

# tcp - Amazon EC2 计量带宽。IP或TCP级别？

> ID：14906243
> 
> 赞同：0
> 
> 时间：2013-02-16T02:19:49.137
> 
> 标签：tcp, amazon-ec2, ip, traffic-measurement

假设我有一个从我的 EC2 实例到客户端的持久持久 TCP 连接，并且我每 30 秒发送一个字节（应用程序级别保持活动状态）。

这算作 1 字节流量，还是 TCP 标头甚至以太网开销也算在内（这会显着改变等式）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:24:48.030

通常带宽是在交换机级别测量的。他们测量所有数据包的大小。

我认为这就是亚马逊为 EC2 所做的。

# xml - 使用 Perl XML::Simple 解析带有命名空间的 xml

> ID：14906247
> 
> 赞同：3
> 
> 时间：2013-02-16T02:20:34.290
> 
> 标签：xml, perl, parsing

所有，我真的可以在这里使用一些帮助。我的最终目标是能够使用 perl 读取 xml 文件并将其插入数据库以跟踪 CVE。在这个阶段，如果我可以在我的代码中引用 XML 文件中的变量，我确信我可以将它插入到数据库中。现在我要做的就是将它打印到屏幕上，但我无法让它工作。

这是我的简单代码和 XML 文件。

希望有人能让我去这里。

--Perl 代码开始--

```
#!/usr/bin/perl

# use module
use XML::Simple;
use Data::Dumper;

# create object
xml = new XML::Simple (KeyAttr=>[]);

# read XML file
#$data = $xml->XMLin("tms.xml");

# print output - used this to see if it was even reading it
#print Dumper($data);

# access XML data
print "Here is the BugTrackID: $data->{'x:BugTraqID'}\n"; 
```

--perl代码结束---

--xml的开始--

```
<?xml version="1.0" encoding="us-ascii"?>
<Alerts xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:alerts.symantec.com https://alerts.symantec.com/vulalert.xsd">
<x:AlertDocument xmlns:x="urn:alerts.symantec.com" AlertStatusID="57982" Type="1" DetailLevel="25" Language="1">
<x:BugTraqID>57982</x:BugTraqID>
<x:Title>Sonar Multiple Cross Site Scripting Vulnerabilities</x:Title>
<x:StatusID>1</x:StatusID>
<x:CVE>CVE-MAP-NOMATCH</x:CVE>
<x:Published>Feb 12 2013</x:Published>
<x:LastUpdated>2013-02-15T19:03:48</x:LastUpdated>
<x:Remote>Yes</x:Remote>
<x:Local>No</x:Local>
<x:Credibility>Single Source</x:Credibility>
<x:Classification>Input Validation Error</x:Classification>
<x:Availability>User Initiated</x:Availability>
<x:Ease>Exploit Available</x:Ease>
<x:Authentication>Not Required</x:Authentication>
<x:CVSS2_BaseScore>5.8</x:CVSS2_BaseScore>
<x:CVSS2_TemporalScore>5</x:CVSS2_TemporalScore>
<x:CVSS2_BaseVector>AV:N/AC:M/Au:N/C:P/I:P/A:N</x:CVSS2_BaseVector>
<x:CVSS2_TemporalVector>E:F/RL:U/RC:UC</x:CVSS2_TemporalVector>
<x:CVSS1_BaseScore>3.7</x:CVSS1_BaseScore>
<x:CVSS1_TemporalScore>3.2</x:CVSS1_TemporalScore>
<x:NVD_CVSS2_BaseScore>4.3</x:NVD_CVSS2_BaseScore>
<x:NVD_CVSS2_ComponentString>AV:N/AC:M/Au:N/C:N/I:P/A:N</x:NVD_CVSS2_ComponentString>
<x:ImpactRating>4</x:ImpactRating>
<x:Severity>6.1</x:Severity>
<x:EaseofExploit>8</x:EaseofExploit>
<x:UrgencyRating>6.1</x:UrgencyRating>
<x:LastChange>Initial analysis.</x:LastChange>
<x:VulnerableSystems>
  <x:VulnerableSystem>
    <x:Title><![CDATA[SonarSource Sonar 3.4.1 cpe:/a:sonarsource:sonar:3.4.1 SYMC]]></x:Title>
  </x:VulnerableSystem>
</x:VulnerableSystems>
<x:ShortSummary><![CDATA[Sonar is prone to multiple cross-site scripting vulnerabilities.]]></x:ShortSummary>
<x:Impact>An attacker may leverage these issues to   execute arbitrary script code in the browser of an unsuspecting user in   the context of the affected site. This may allow the attacker to steal   cookie-based authentication credentials and launch other attacks.</x:Impact>
<x:TechnicalDescription><![CDATA[Sonar is the open source platform for code quality inspection.         

The application is prone to multiple  cross-site scripting vulnerabilities because it fails to sanitize  user-supplied input submitted to the following scripts and parameters:     

&apos;index.php  &apos; : &apos;search&apos;,   &apos;assignee_login&apos;,      
&apos;author_login&apos;     
&apos;sources.php&apos; :  &apos;resource&apos;     

An attacker may leverage these issues to  execute arbitrary script code in the browser  of an unsuspecting user in  the context of the affected site. This may allow the attacker to steal  cookie-based authentication credentials and launch other attacks.                                                 

Sonar 3.4.1 is vulnerable; other versions may also be affected.]]>  
</x:TechnicalDescription>
<x:AttackScenario><![CDATA[1\. An attacker scans for and locates a site running the affected application.      

2\. The attacker crafts a URI link that includes malicious script code designed to leverage one of these issues.      

3\. The attacker uses email or other means to distribute the malicious link and entices an unsuspecting user to follow it.      

4\. When the user follows the link, the attacker-specified script code runs in their browser in the context of the affected site.       

A successful exploit may let the attacker steal cookie-based authentication credentials and launch other attacks.]]></x:AttackScenario>
<x:Exploit><![CDATA[Attackers can exploit these issues by enticing an unsuspecting victim into following a malicious URI.         

The following example URIs are available: 

http://www.example.com/dependencies/index?   search="&amp;gt;&amp;lt;script&amp;gt;alert(/devilteam.pl/)&amp;lt;/script&amp;gt; 

http://www.example.com/dashboard/index/41730? did=4&amp;amp;period=3"&amp;gt;&amp;lt;script&amp;gt;alert(/devilteam.pl/)&amp;lt;/script&am p;gt; 

http://www.example.com/reviews/index?review_id=&amp;amp;statuses[]=OPEN&amp;amp;statuses[]=REOPENED&amp;amp;severities[]=&amp;amp;projects[]=&amp;amp;amp;author_login=&amp;amp;assignee_login="&amp;gt;&amp;lt;script&amp;gt;alert(/devilteam.pl/)&amp;lt;/script&amp;gt;&amp;amp;false_positives=without&amp;amp;sort=&amp;amp;asc=false&amp;amp;commit=Search 

http://www.example.com/reviews/index?review_id=&amp;amp;statuses[]=OPEN&amp;amp;statuses[]=REOPENED&amp;amp;severities[]=&amp;amp;projects[]=&amp;amp;amp;author_login="&amp;gt;&amp;lt;script&amp;gt;alert(/devilteam.pl/)&amp;lt;/script&amp;gt;&amp;amp;assignee_login=&amp;amp;false_positives=without&amp;amp;sort=&amp;amp;asc=false&amp;amp;commit=Search 

http://www.example.com/api/sources?resource=&amp;lt;script&amp;gt;alert(/devilteam.pl/)&amp;lt;/script&amp;gt;&amp;amp;format=txt

]]></x:Exploit>
<x:MitigatingStrategies>
  <x:MitigatingStrategy>
    <x:Title><![CDATA[Block external access at the network boundary, unless external parties require service.]]></x:Title>
    <x:Description><![CDATA[If global access isn&apos;t needed, filter access to the affected computer at the network boundary. Restricting access to only trusted computers and networks might greatly reduce the likelihood of a successful exploit.]]></x:Description>
  </x:MitigatingStrategy>
  <x:MitigatingStrategy>
    <x:Title><![CDATA[Run all software as a nonprivileged user with minimal access rights.]]></x:Title>
    <x:Description><![CDATA[Attackers may successfully exploit client flaws in the browser through cross-site scripting vulnerabilities. When possible, run client software as regular user accounts with limited access to system resources. This may limit the immediate consequences of client-side vulnerabilities. ]]></x:Description>
  </x:MitigatingStrategy>
  <x:MitigatingStrategy>
    <x:Title><![CDATA[Do not follow links provided by unknown or untrusted sources.]]></x:Title>
    <x:Description><![CDATA[Web users should be cautious about following links to websites that are provided by unfamiliar or suspicious sources. Filtering HTML from emails may help remove a possible vector for transmitting malicious links to users. ]]></x:Description>
  </x:MitigatingStrategy>
  <x:MitigatingStrategy>
    <x:Title><![CDATA[Set web browser security to disable the execution of script code or active content.]]></x:Title>
    <x:Description><![CDATA[Since exploiting cross-site scripting issues often requires malicious script code to run in browsers, consider disabling script code and active content support within a client browser as a way to prevent a successful exploit. Note that this mitigation tactic might adversely affect legitimate sites that rely on the execution of browser-based script code. ]]></x:Description>
  </x:MitigatingStrategy>
</x:MitigatingStrategies>
<x:Solutions>
  <x:Workaround><![CDATA[Workaround
]]></x:Workaround>
  <x:Solution><![CDATA[Currently, we are not aware of any vendor-supplied patches. If you feel we are in error or are aware of more recent information, please mail us at: vuldb@securityfocus.com.]]></x:Solution>
</x:Solutions>
<x:Credit>DevilTeam</x:Credit>
<x:ChangeLogs>
  <x:ChangeLog>
    <x:Title><![CDATA[2013.02.15: Initial analysis.]]></x:Title>
  </x:ChangeLog>
</x:ChangeLogs>
<x:References>
  <x:Reference>
    <x:Title><![CDATA[Web Page:Sonar Homepage (SonarSource) SonarSource]]></x:Title>
    <x:URL><![CDATA[http://www.sonarsource.com/products/software/sonar/]]></x:URL>
    <x:Description><![CDATA[http://www.sonarsource.com/products/software/sonar/]]></x:Description>
  </x:Reference>
  <x:Reference>
    <x:Title><![CDATA[Web Page:Sonar v.3.4.1 =&amp;gt; XSS (CWE-79) (DevilTeam) DevilTeam]]></x:Title>
    <x:URL><![CDATA[http://cxsecurity.org/issue/WLB-2013020088]]></x:URL>
    <x:Description><![CDATA[http://cxsecurity.org/issue/WLB-2013020088]]></x:Description>
  </x:Reference>
</x:References>
<x:URL>https://alerts.symantec.com/loaddocument.aspx?GUID=cffd18f0-7b75-4c6a-adc0-74f480808fff</x:URL>
<x:OVALDefinitions />
</x:AlertDocument>
</Alerts> 
```

--xml结束---

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T03:47:19.267

你在寻找`$data->{'x:AlertDocument'}{'x:BugTraqID'}`，也许？

* * *

我更喜欢 XML::LibXML。无论文档中使用什么前缀（如果有），以下内容都将起作用。（您永远不必关心文档中使用的前缀。）

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::LibXML               qw( );
use XML::LibXML::XPathContext qw( );

my $parser = XML::LibXML->new();
my $doc = $parser->parse_file("tms.xml");

my $xpc = XML::LibXML::XPathContext->new($doc);
$xpc->registerNs(x => 'urn:alerts.symantec.com');

for my $alert_doc ($xpc->findnodes('/Alerts/x:AlertDocument')) {
   my ($bug_traq_id) = $xpc->findnodes('x:BugTraqID', $alert_doc);
   print $bug_traq_id->textContent(), "\n";
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-23T12:14:45.810

您的 XML 没有目标命名空间。这不是问题，但你必须考虑到它。

您可以指定`XML::Simple`将使用哪个解析器。

这是一个代码示例，`XML::Simple`它可以得到您期望的结果。

```
tvnshack$ ./a.pl 
Trying bugtrack.xml ... bugtrack.xml is indeed valid
 BugTrackID is: 57982 
```

代码如下……可根据您的喜好进行调整（它基于我在生产中使用的一些实时代码）。

```
#!/opt/perl/bin/perl -w

use strict;
use XML::Simple qw(:strict);
use Data::Dumper;

# Supported namespaces
my $nspcBUGT = 'urn:alerts.symantec.com';
my $parsingfailed = 0;
my $XMLdata;

my $XMLfname = 'bugtrack.xml';

  print STDOUT "Trying $XMLfname ... ";

  $XML::Simple::PREFERRED_PARSER = 'XML::SAX::Expat';
  my $simpleCstr = XML::Simple->new(
    Cache => [ 'memshare' ],
    KeyAttr => [],
    ForceArray => 1,
    KeepRoot => 1,
    ContentKey => 'value',
    NSExpand => 1,
    NormaliseSpace => 1);
  eval {
    $parsingfailed++;
    # if the parsing fails, the module will terminate the process abruptly. 
    $XMLdata = $simpleCstr->XMLin($XMLfname);
    # This line of code will not be executed, leaving $parsingfailed>0.
    $parsingfailed = 0;
  };
  if ( $parsingfailed > 0) {
    print STDERR "Error: That XML file <$XMLfname> can not be read, does not exist or is not a valid XML file (possible wrong namespace too).\n";
  } else {
    if (defined($XMLdata->{"Alerts"})) {
      print STDOUT "$XMLfname is indeed valid\n";
      print STDOUT " BugTrackID is: " . $XMLdata->{'Alerts'}->[0]->{"{$nspcBUGT}AlertDocument"}->[0]->{"{$nspcBUGT}BugTraqID"}->[0] . "\n";
      #  print Dumper($XMLdata) . "\n";
    }
  }

__END__ 
```

# php - 复选框回发函数返回空字符串

> ID：14906248
> 
> 赞同：0
> 
> 时间：2013-02-16T02:20:38.073
> 
> 标签：php

我有一个函数，当页面被回发时，它总是回显一个空字符串。我要做的是检查复选框字段的名称是否在`$departments`数组中，以及是否在回发时对其进行检查。

PHP：

```
function isChecked($name) {
    $departments = (isset($_POST["interests"])) ? $_POST["interests"] : null;
    if(in_array($name, $departments)) {
        return "checked";
    }
    return "";
} 
```

HTML

```
<input type="checkbox" id="computers" name="interests[]" 
<?PHP echo isChecked('computers') ?> /> 
```

我刚刚意识到我已经使用`interests[]`了数组声明，那么如何使用索引对其进行检查？

这是我的 var_dump：

```
'interests' => 
array (size=3)
  0 => string 'Computers' (length=9)
  1 => string 'Appliances' (length=10)
  2 => string 'Beauty' (length=6) 
```

# asp.net-mvc-4 - MVC4 应用程序设计/解决方案布局

> ID：14906249
> 
> 赞同：1
> 
> 时间：2013-02-16T02:20:42.020
> 
> 标签：asp.net-mvc-4, dependency-injection

我将构建一个新的基于 MVC4 Web 的应用程序，所以我需要创建新的解决方案和不同类型的项目。所以我的问题是我的解决方案需要什么类型的项目。

我的要求如下-

1.  我们有不同的旅行社与我们合作，每个旅行社都有其独特的名称。现在可能是4-5。计划是创建 4-5 个不同的 URL 并将其处理给那些旅行社。

这是一个示例用户故事

1.  用户（例如旅行社 id 1）应该能够访问 URL mywebsite/agent/1，他会看到与该代理相关的所有可用票，这些票将来自外部 Web 服务并且不受我的控制。
2.  他选择了产品并单击购买，这再次调用了一些网络服务进入他们的服务并返回确认号。

对于应用程序来说，这几乎是它。

所以我的问题是我应该为这样的应用程序创建哪些项目。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:06:20.470

我建议您获取[Pro ASP.NET MVC 3 Framework, Third Edition](http://www.amazon.ca/gp/product/1430234040/ref=s9_simh_gw_p14_d7_i7?pf_rd_m=A3DWYIK6Y9EEQB&pf_rd_s=center-2&pf_rd_r=0Z27DGCRYXHGXZR4M1Z1&pf_rd_t=101&pf_rd_p=1375923922&pf_rd_i=915398)或[Pro Asp.Net Mvc 4](http://www.amazon.ca/gp/product/1430242361/ref=s9_simh_gw_p14_d7_i1?pf_rd_m=A3DWYIK6Y9EEQB&pf_rd_s=center-2&pf_rd_r=0Z27DGCRYXHGXZR4M1Z1&pf_rd_t=101&pf_rd_p=1375923922&pf_rd_i=915398)的副本。无论哪种方式，我通常会做一个空白解决方案，然后添加 3 个项目，如`Something.WebUI`, `Something.Domain`, `Something.UnitTests (Only if you want to write tests, highly recommended)`.

另一种选择是您可以前往 Pluralsight 并观看[Scott Allen的视频](http://pluralsight.com/training/Courses/TableOfContents/mvc4-building)

# mysql - SQL 按通配符排序

> ID：14906251
> 
> 赞同：0
> 
> 时间：2013-02-16T02:21:12.113
> 
> 标签：mysql, sql, wildcard

我有这个 MySQL 查询：

```
$query = mysql_query("SELECT * FROM school_staff WHERE DELETED = 'NO' AND BUILDING = '$building' ORDER by 
    Department != 'Principal',
    Department != 'Assistant Principal', 
    Department != 'Kindergarten', 
    Department != 'First Grade',
    Department != 'Second Grade',
    Department != 'Third Grade',
    Department != 'Fourth Grade',
    Department != 'Fifth Grade',
    Department != 'Learning Support',
    Department != 'Alternative Education', 
    Department != '% - Chair', 
    Department ASC") or die(mysql_error()); 
```

我将如何制作这条线：`Department != '% - Chair',`制作 % 任何文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:23:11.260

编辑以回应您的评论：

我会用一个`CASE`声明。就像是

```
ORDER BY CASE WHEN Department LIKE '% - Chair' THEN 1 WHEN Department = 'Alternative Education' THEN 2 ELSE 3 END 
```

您可以根据需要在 CASE 语句中添加任意数量的 WHEN 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:23:12.833

您尝试过部门 Not Like '%Chair%

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T02:27:48.977

在这种情况下使用 SQL like 运算符。

试试这个：

```
Department NOT LIKE '% - Chair' 
```

# haskell - 最不严格 (*)

> ID：14906261
> 
> 赞同：20
> 
> 时间：2013-02-16T02:22:46.797
> 
> 标签：haskell, lazy-evaluation

是否可以`(*)`在 Haskell 中使用最不严格的语义来实现（首选标准化的 Haskell，但扩展是可以的。使用编译器内部是作弊）？例如，这样的定义应该导致以下情况为真：

```
0 * ⊥ = 0
⊥ * 0 = 0 
```

并且只有：

```
⊥ * ⊥ = ⊥ 
```

我可以构建满足上述情况之一的模式匹配，但不能同时满足这两种情况，因为零检查会强制该值。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-16T03:09:06.857

是的，但仅使用受约束的杂质。

```
laziestMult :: Num a => a -> a -> a
laziestMult a b = (a * b) `unamb` (b * a) 
```

这[`unamb`](http://hackage.haskell.org/package/unamb)是 Conal Elliott 的“纯”变体`amb`。在操作上，`amb`并行运行两个计算，返回先到者。指称`unamb`取两个值，其中一个值（在域理论意义上）严格大于另一个值，并返回较大的值。 **编辑：这也是 unamb，而不是 lub，所以你需要让它们相等，除非一个是底部。** 因此，您有一个必须满足的语义要求，即使它不能由类型系统强制执行。这基本上实现为：

```
unamb a b = unsafePerformIO $ amb a b 
```

在异常/资源管理/线程安全的情况下，需要做很多工作才能使这一切正常工作。

`laziestMult`如果`*`是可交换的，则正确。`*`如果在一个参数中不严格，则它是“最不严格的” 。

有关更多信息，请参阅[Conal 的](http://conal.net/blog/posts/functional-concurrency-with-unambiguous-choice)博客

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-17T21:21:13.737

Phillip JF 的回答仅适用于平面域，但有些`Num`实例不是平面的，例如惰性自然域。当你进入这个舞台时，事情变得非常微妙。

```
data Nat = Zero | Succ Nat
    deriving (Show)

instance Num Nat where
    x + Zero = x
    x + Succ y = Succ (x + y)

    x * Zero = Zero
    x * Succ y = x + x * y

    fromInteger 0 = Zero
    fromInteger n = Succ (fromInteger (n-1))

    -- we won't need the other definitions 
```

对于懒惰的自然人来说，最不严格的操作尤其重要，因为这是它们的使用领域；例如，我们使用它们来比较可能无限列表的长度，并且如果它的操作不是最不严格的，那么当找到有用的信息时就会发散。

正如所料，`(+)`不是可交换的：

```
ghci> undefined + Succ undefined
Succ *** Exception: Prelude.undefined
ghci> Succ undefined + undefined
*** Exception: Prelude.undefined 
```

所以我们将应用标准技巧来做到这一点：

```
laxPlus :: Nat -> Nat -> Nat
laxPlus a b = (a + b) `unamb` (b + a) 
```

起初这似乎有效

```
 ghci> undefined `laxPlus` Succ undefined
 Succ *** Exception: Prelude.undefined
 ghci> Succ undefined `laxPlus` undefined
 Succ *** Exception: Prelude.undefined 
```

但实际上并没有

```
 ghci> Succ (Succ undefined) `laxPlus` Succ undefined
 Succ (Succ *** Exception: Prelude.undefined
 ghci> Succ undefined `laxPlus` Succ (Succ undefined)
 Succ *** Exception: Prelude.undefined 
```

这是因为`Nat`不是平面域，`unamb`仅适用于平面域。正是出于这个原因，我考虑`unamb`了一个低级原语，除了定义更高级别的概念外，它不应该被使用——域是否平坦应该是无关紧要的。使用`unamb`将对改变域结构的重构很敏感——同样的原因`seq`在语义上很丑陋。我们需要以`unamb`同样的方式`seq`进行泛化`deeqSeq`：这是在[`Data.Lub`](http://hackage.haskell.org/packages/archive/lub/0.1.7/doc/html/Data-Lub.html)模块中完成的。我们首先需要为 编写一个`HasLub`实例`Nat`：

```
instance HasLub Nat where
    lub a b = unambs [
                  case a of
                      Zero -> Zero
                      Succ _ -> Succ (pa `lub` pb),
                  case b of
                      Zero -> Zero
                      Succ _ -> Succ (pa `lub` pb)
              ]
        where
        Succ pa = a
        Succ pb = b 
```

假设这是正确的，但不一定是这样（这是我迄今为止的第三次尝试），我们现在可以写`laxPlus'`：

```
laxPlus' :: Nat -> Nat -> Nat
laxPlus' a b = (a + b) `lub` (b + a) 
```

它实际上有效：

```
ghci> Succ undefined `laxPlus'` Succ (Succ undefined)
Succ (Succ *** Exception: Prelude.undefined
ghci> Succ (Succ undefined) `laxPlus'` Succ undefined
Succ (Succ *** Exception: Prelude.undefined 
```

因此，我们被驱使将可交换二元运算符的最不严格模式概括为：

```
leastStrict :: (HasLub a) => (a -> a -> a) -> a -> a -> a
leastStrict f x y = f x y `lub` f y x 
```

至少，它保证是可交换的。但是，唉，还有更多的问题：

```
ghci> Succ (Succ undefined) `laxPlus'` Succ (Succ undefined)
Succ (Succ *** Exception: BothBottom 
```

我们期望两个至少为 2 的数字之和至少为 4，但在这里我们得到一个至少为 2 的数字。我无法想出一种方法来修改`leastStrict`以给出我们想要的结果，至少并非没有引入新的类约束。为了解决这个问题，我们需要深入研究递归定义，并在每一步同时对两个参数进行模式匹配：

```
laxPlus'' :: Nat -> Nat -> Nat
laxPlus'' a b = lubs [
    case a of
        Zero -> b
        Succ a' -> Succ (a' `laxPlus''` b),
    case b of
        Zero -> a
        Succ b' -> Succ (a `laxPlus''` b')
    ] 
```

最后我们*得到*一个提供尽可能多信息的，我相信：

```
ghci> Succ (Succ undefined) `laxPlus''` Succ (Succ undefined)
Succ (Succ (Succ (Succ *** Exception: BothBottom 
```

如果我们将相同的模式应用于时间，我们会得到一些似乎也有效的东西：

```
laxMult :: Nat -> Nat -> Nat
laxMult a b = lubs [
    case a of
        Zero -> Zero
        Succ a' -> b `laxPlus''` (a' `laxMult` b),
    case b of
        Zero -> Zero
        Succ b' -> a `laxPlus''` (a `laxMult` b')
    ]

ghci> Succ (Succ undefined) `laxMult` Succ (Succ (Succ undefined))
Succ (Succ (Succ (Succ (Succ (Succ *** Exception: BothBottom 
```

不用说，这里有一些重复的代码，并且开发模式以尽可能简洁地表达这些功能（从而尽可能减少出错的机会）将是一个有趣的练习。然而，我们还有另一个问题......

```
asLeast :: Nat -> Nat
atLeast Zero = undefined
atLeast (Succ n) = Succ (atLeast n)

ghci> atLeast 7 `laxMult` atLeast 7
Succ (Succ (Succ (Succ (Succ (Succ (Succ (Succ (Succ (Succ ^CInterrupted. 
```

它慢得可怕。很明显，这是因为它的参数大小（至少）呈指数级，在每次递归时下降到两个分支。要让它在合理的时间内运行，还需要更多的技巧。

最不严格的编程是相对未开发的领域，无论是在实现上还是在实际应用中，都需要进行更多的研究。我对此感到兴奋，并认为它很有前景。

# ruby-on-rails - 将表单内容作为 html 和 ajax 发送？

> ID：14906263
> 
> 赞同：0
> 
> 时间：2013-02-16T02:22:51.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个通过 html 提交更新模型的管理表单。我希望能够通过管理表单中的链接或按钮将表单的内容发送到 Ajax 模式对话框以进行“预览”。

有没有办法通过 Ajax 将表单的内容发送到模态对话框而不破坏 html 提交？到目前为止，我所能做的就是将数据作为 html 放入模式中，这会破坏 js 渲染。我发现的所有 Ajax 提交示例都附在表单上，​​这将破坏 html 提交。

建议和/或指针表示赞赏。

我们使用 Rails 3.2.12 是为了它的价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:57:47.010

我想这取决于你如何渲染你的模态。如果您在服务器端进行操作，并且只需要将表单值获取到您的 ajax 控制器操作，您可以使用 jquery 执行类似的操作“

```
$.post(ajaxUrl + "?" + $("#myform").serialize()) 
```

生成表单值的查询字符串，您可以将其发送给 ajax 模型。

或者，如果您正在构建模态客户端，请尝试

```
$("#myform").serializeArray() 
```

得到一组`name, value`对

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:01:55.887

这就是让它在 Rails 3.2.12 下工作所需要的

看法：

```
<%= link_to 'Preview Promotion UI', admin_preview_promotion_url, id: :promotion_preview %> 
```

上面的链接在 do/end 表单中。

application.js 中的 Javascript

```
$("#promotion_preview").live('click', (function (event) {
event.preventDefault();
$.post("/store/admin/promotions/preview",
    $(event.currentTarget.parentElement).serialize().replace('=put&', '=post&'),
    {},
    "script"
);
})); 
```

Rails.js 在页面中注入了一些隐藏代码，这些代码设置了对 PUT 的响应类型，然后阻碍了路由。至少在这种情况下，只需将 PUT 替换为 POST 即可解决问题。

使用这段代码，我可以像往常一样发布我的表单更新，并使用表单数据激活模式对话框“预览”。

# matlab - 在matlab中退出整个循环等等

> ID：14906264
> 
> 赞同：0
> 
> 时间：2013-02-16T02:22:53.097
> 
> 标签：matlab

我正在使用这个函数来获取一个列向量，其中每个元素都应该是 1，但是在 n 变大之后，有时某些元素不是 1，这是由于方法限制，我想找出 n 有多大并返回值。问题是： 1.似乎 1 存储为 1.0000，不知道如何转换它，以及如何比较（注释中的位置） 2.不知道如何完全退出循环。谢谢你。

```
function x = findn(n)

for m = 1:n
    [a,b]=Hilbert(m);
    m1 = GaussNaive(a,b);
    m2 = size(m1,1);
    % m1 is a n*1 matrix (a column vector) which every element is supposed 
    % to be 1, but when n gets large, some element is not 1.
    for i = 1:m2
        if (m1(i) ~= 1)
        % this compare isn't really working, since 1 is stored as 1.0000 for whatever
        % for whatever reason and they are not equal or not not equal.
        % I doubt whether it really compared.
        x = m;
        break;
        % it just exit the inner for loop, not entirely
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:23:25.797

在 Matlab 中，所有数值变量默认都是双精度浮点数。（实际上字符串和逻辑也可以看起来像 fp 数，但暂时忘记这一点。）因此，除非您采取代码未显示的步骤，否则您正在使用 fp 数。您可以采取的步骤包括将变量声明为具有特定类型，例如`int32`or `uint16`，并注意对它们执行的算术运算。Matlab 对双精度浮点的吸引力非常强，并且很容易对`int`s 进行操作（例如）并再次以浮点数结束。开始阅读文档中的这些类型。

避免对 fp 数进行（不）等式测试的原因几乎每天都在 SO 上进行解释，我不会重复它们，看看周围。修改代码的直接方法是将测试替换为

```
if (m1(i) ~= 1) 
```

和

```
if ((abs(m1(i)-1)>tol) 
```

其中是一些小的数字，因此对于您的目的`tol`，任何大于`1+tol`（或小于`1-tol`）的数字都被视为不等于。`1`

不幸的是，据我所知，Matlab 缺少`break`从内部循环到包含循环外部的语句。但是，在这种情况下，您可能可以将控制权替换为`break`a `return`，它将控制权返回给调用您的函数的函数，或者如果您从那里调用它，则返回给命令行。

# php - 如何通过在 get_entry_list API 调用的查询参数中提供电子邮件来获取列表？

> ID：14906269
> 
> 赞同：0
> 
> 时间：2013-02-16T02:23:31.783
> 
> 标签：php, sugarcrm

我正在尝试更新来自 Sugar CRM 的特定潜在客户。我不知道此潜在客户的 ID，因此我尝试通过使用电子邮件地址或姓名调用 get_entry_list 来检索潜在客户 ID。我想使用查询并指定电子邮件地址或名称，如下所示：

```
 'query' => "first_name = \"Bob\"", 
```

我什至尝试过：

```
 'query' => "first_name LIKE \"%Bob%\"", 
```

和

```
 'query' => "email1 LIKE \"%bob@abc.com\"", 
```

但我只是得到这个结果：

`Database failure. Please refer to sugarcrm.log for details.`

*...而且sugarcrm.log*里面什么都没有:(

* * *

这是完整的代码：

```
$get_entry_list_parameters = array(

//session id
'session' => $session_id,

//The name of the module from which to retrieve records
'module_name' => 'Leads',

//The SQL WHERE clause without the word "where".
'query' => "first_name = \"Bob\"",

//The SQL ORDER BY clause without the phrase "order by".
'order_by' => "",

//The record offset from which to start.
'offset' => '0',

//Optional. A list of fields to include in the results.
'select_fields' => array(
    'id',
    'name',
    'email1',
),

'link_name_to_fields_array' => array(
),

//The maximum number of results to return.
'max_results' => '10',

//To exclude deleted records
'deleted' => '0',

//If only records marked as favorites should be returned.
'Favorites' => false,
);

$get_entry_list_result = call('get_entry_list', $get_entry_list_parameters, $url);

echo '<pre>';
print_r($get_entry_list_result);
echo '</pre>'; 
```

* * *

**编辑**：我正在使用 v4_1 REST API

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:35:42.603

检查这是一个正在运行的示例 > [http://urdhva-tech.blogspot.in/2013/02/rest-api-example.html](http://urdhva-tech.blogspot.in/2013/02/rest-api-example.html)

希望你觉得它有用。

否则，通过查看 $get_entry_list_parameters 数组，它看起来应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:27:34.800

查看从第 78 行开始的 service/v4/SugarWebServiceUtilv4.php。在此处设置断点或记录生成的查询 ($where)。也许这可以帮助您找出原因。

# javascript - 物理公式实现问题

> ID：14906272
> 
> 赞同：0
> 
> 时间：2013-02-16T02:24:34.957
> 
> 标签：javascript, math, physics

我正在尝试实施计算倾斜太阳能电池板上入射的全球辐射所需的公式。

我使用的公式是在以下研究论文中找到的：

--> ipac.kacst.edu.sa/eDoc/2010/191048_1.pdf

这是注释的 JavaScript 代码：

```
var config = require('./configuration.json'),
    pi = Math.PI;

function solar_efficiency(angle, day) {
    var R_mD,  // average sun-earth distance (m)
        a,     // semi-major axis (km)
        e,     // oval orbit eccentricity (km)
        theta, // angle with the perihelion
        n,     // current nth day of the year (int)
        R_D,   // actual sun-earth distance (m)
        I_o;   // extraterrestrial radiation (indice)

    R_mD = config.avg_sun_earth_dist;
    a = config.semi_major_axis;
    e = config.eccentricity;
    n = day;
    theta = n * 365.25 / 360;
    R_D = a * (1 - e * e) / (1 + e * Math.cos(theta));
    I_o = 1367 * Math.pow(R_mD / R_D, 2);

    var axis,  // angle of the earth's axis
        D;     // sun declination (radian)

    axis = config.earth_axis;
    D = ((axis * pi) / 180) * Math.sin(((2 * pi) * (284 + n)) / 365);

    var Eq_t;  // solar time correction (float)

    if((1 <= n) && (n <= 106)) {
        Eq_t = -14.2 * Math.sin((pi * (n + 7)) / 111);
    }
    else if((107 <= n) && (n <= 166)) {
        Eq_t = 4.0 * Math.sin((pi * (n - 106)) / 59);
    }
    else if((167 <= n) && (n <= 246)) {
        Eq_t = -6.5 * Math.sin((pi * (n - 166)) / 80);
    }
    else if((247 <= n) && (n <= 365)) {
        Eq_t = 16.4 * Math.sin((pi * (n - 247)) / 113);
    }

    var Long_sm,    // longitude of the standard meridian (longitude)
        Long_local, // longitude of the panels (longitude)
        T_local,    // local time (h)
        T_solar;    // solar time (h)

    Long_sm = config.std_meridian_long;
    Long_local = config.current_longitutde;
    T_local = config.local_time;
    T_solar = T_local + (Eq_t / 60) + ((Long_sm - Long_local) / 15);

    var W; // hour angle (radian)

    W = pi * ((12 - T_solar) / 12);

    var Lat_local,  // latitude of the panels (latitude)
        W_sr,       // sunrise hour angle (°)
        W_ss;       // sunset hour angle (°)

    Lat_local = config.current_latitude;
    W_sr = W_ss = Math.acos(-1 * Math.tan(Lat_local) * Math.tan(D));

    var alpha, // angle between solar panel and horizontal (°)        -FIND!!!
        R_b;   // ratio of avg. beam radiation on horiz. / inclined surface

    alpha = angle; // /!\ TESTING ONLY /!\

    var num_1 = Math.cos(Lat_local - alpha) * Math.cos(D) * Math.sin(W_ss);
    var num_2 = W_ss * Math.sin(Lat_local - alpha) * Math.sin(D);
    var det_1 = Math.cos(Lat_local) * Math.cos(D) * Math.sin(W_ss);
    var det_2 = W_ss * Math.sin(Lat_local) * Math.sin(D);

    R_b = (num_1 + num_2) / (det_1 + det_2);  // in the northern hemisphere

    var H_g, // global radiation on horizontal surface (W h/m^2/day)  ---DB!!!
        H_d, // diffuse radiation on horizontal surface (W h/m^2/day) ---DB!!!
        H_B; // beam radiation on inclined surface (W h/m^2/day)

    H_g = 700;
    H_d = 500;
    H_B = (H_g - H_d) / R_b;

    var R_d; // ratio of avg. daily diffuse radiation tilted / horiz. surface

    R_d = (3 + Math.cos(2 * alpha)) / 2; // isotropic Badesco model

    var H_D; // sky-diffuse radiation on inclined surface (W h/m^2/day)

    H_D = R_d * H_d;

    var p,   // albedo std. = 0.2 (soil = 0.17, grass = 0.25, concrete = 0.55)
        H_R; // ground reflected radiation on inclined surface (W h/m^2/day)

    p = config.ground_albedo;
    H_R = H_g * p * ((1 - Math.cos(alpha)) / 2);

    var H_T; // daily global radiation on a tilted surface (W h/m^2/day)

    H_T = H_B + H_D + H_R;
    return H_T;
}

var results = {}, current_day;
for(var i = 0; i < 365; i++) {
    current_day = [];
    for(var k = 0; k <= 90; k++) {
        current_day.push([k, solar_efficiency(k, i)]);
    }
    current_day.sort(function(a, b) { return b[1] - a[1]; });
    current_day.length = 1;
    results[i] = current_day[0];
}

console.log(results); 
```

纬度和经度等配置位于 JSON 文件中。以下是我正在测试程序的值：

```
{
    "avg_sun_earth_dist" : 149597870.7,
    "earth_axis" : 23.45,

    "eccentricity" : 0.0167,
    "semi_major_axis" : 149598261,

    "local_time" : 12,

    "std_meridian_long" : 0,
    "current_longitude" : 2.294351,
    "current_latitude" : 48.858844,

    "ground_albedo" : 0.2
} 
```

如果你稍微改变纬度，你会看到你要么得到 NaN，要么值稳定，但突然对于“i”的某些值就猛增了。

问题似乎是这一行：

```
W_sr = W_ss = Math.acos(-1 * Math.tan(Lat_local) * Math.tan(D)); 
```

我不确定输入数据是否错误从而导致程序崩溃，或者我是否只是错误地执行了公式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:17:56.283

使用那个[**库**](https://github.com/dtrebbien/BigDecimal.js)，`floats`不适合这样的计算。你总是会以错误告终。`BigDecimal`在每种语言中都使用了此类算术

# tridion - Tridion 部署程序删除本地化/父文件

> ID：14906274
> 
> 赞同：3
> 
> 时间：2013-02-16T02:24:48.073
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们在 Tridion 中发布页面时遇到了奇怪的行为。

我们在 050 出版物中有英文页面，相同的页面在 060 出版物中进行了本地化。让我们以英语出版物中的示例页面**帐户**( **tcm:120-1234** ) 和西班牙语出版物中的相同本地化页面 ( **tcm:125-1234** ) 为例。

当我们发布英文页面*accounts*时，它会成功发布，但本地部署者会删除其西班牙文页面（**tcm:125-1234**）。当我们发布西班牙语页面时，它会删除其英语页面（**tcm:120-1234**）。

我们已经验证了部署者端并确认其他文件已从服务器本身中删除。

请参阅下面的部署日志以指示删除页面。但我们不确定为什么它会删除其他发布文件。是因为相同的页面项目ID吗？我认为它不应该，因为它是本地化的。

**调试 FSEntityManager - 删除事务 tcm:0-754-66560 中的 pagemeta/pageurl/business/accounts.content。**

我们从该日志中了解到这是部署者的指示，但不确定如何以及为什么要求它。我们正在分析*FSEntityManager*类在做什么。

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T19:16:56.543

看起来这两个出版物共享相同的 webroot。检查您的存储配置和发布路径属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T20:59:15.750

如果文件系统用于存储内容和元数据，主发布或子发布的内容将被覆盖。

为此，请在 cd_storage_conf.xml 中为元数据设置显式设置，以确保所有元数据不会进入相同的存储位置，例如：

```
<Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultFile" defaultFilesystem="false">
    <Root Path="c:\published\localFileSystem" />
</Storage>
<Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultDataFile" defaultFilesystem="true" defaultStorage="true">
    <Root Path="c:\published\localFileSystem\data" />
</Storage>

<ItemTypes defaultStorageId="defaultFile" cached="false">       
        <!-- Query type mapping is replacement for Query gnenerator. If there was query generator defined in a Broker configuration then  Query type mapping should be binded to default DB. -->
        <Item typeMapping="Query" storageId="defaultdb"/>

        <Item typeMapping="PageMeta" cached="true" storageId="defaultDataFile"/>
        <Item typeMapping="ComponentPresentationMeta" cached="true" storageId="defaultDataFile"/>
        <Item typeMapping="ComponentMeta" cached="true" storageId="defaultDataFile"/>

</ItemTypes> 
```

# css - 我可以制作响应不同屏幕分辨率的浮动共享图标的垂直列表吗？（包括图片）

> ID：14906275
> 
> 赞同：1
> 
> 时间：2013-02-16T02:24:53.053
> 
> 标签：css

我在我的一个博客上使用 addthis。我有一个垂直浮动列表的新选项，addthis 按钮的代码如下所示：

```
<div class="addthis_toolbox addthis_floating_style addthis_32x32_style" style="left:0%;
top:15%;width:58px; margin:0 auto">
<a class="addthis_button_facebook_like" fb:like:layout="box_count"></a>
<a class="addthis_button_facebook_send"></a> 
<a class="addthis_button_tweet" tw:count="none"></a>
<a class="addthis_button_google_plusone" g:plusone:size="medium"     
g:plusone:annotation="none"></a>
<a class="addthis_button_pinterest_pinit"></a>
<a class="addthis_button_reddit"></a>
<a class="addthis_button_stumbleupon"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div> 
```

我将反馈滑出按钮设置为 top:70%。所以结果在两种屏幕分辨率下都是这样的：

![重叠的图标](../Images/43f99308d41874a406ee4c59cbed2f90.png)

我试过的：

我尝试过使用不同类型的东西，比如 height:auto; ...但还没有任何效果。一个问题是图标是 32x32，但如果有必要，我可以将它们缩小。有没有人知道我如何才能做到这一点，以便它具有响应性和/或在所有屏幕分辨率下看起来都合适？在这方面的任何指导将**不胜**感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:38:14.340

人们应该谨慎对待`one size design fits all resolutions`它并不是那么直截了当的想法。但是，让我给你一些指示：

1.  设计在多个分辨率上看起来相同的 html/css.. 应该使用两个单位：

    *   `pt`对于任何预期在所有分辨率上都具有相同尺寸的东西..即假设您正在为具有 150ppi 的旧 iPhone 和具有 231ppi 的视网膜设计它.. 视网膜显示器上的像素比它的对应物小得多iphone 3g .. 所以如果你把边距设置为`5px`，它会在你不同的分辨率目标中看起来完全不同。但是，如果您将边距设置为 3 `pts`，那么这是您正在设置的物理指标（将其视为一英寸......无论分辨率如何，任何屏幕上的一英寸都是相同的，对吧？）那么在这种情况下`pt`......符合`one size design fits all resolutions`原则

    *   `px`对于任何不可缩放的东西（即位图）.. 位图不应该从一个屏幕缩放到另一个屏幕.. 所以你应该`px`在这种情况下使用.. （`px`是屏幕分辨率特定的测量单位）.. 但在同时你**必须**为不同的分辨率使用不同的图像。所以当我在*亚马逊工作时，我们为**kindle touch*和*kindle paperwhite*使用了两个不同的精灵，每个精灵都有不同`px`的值。但后来我们用 pt 来做其他的一切. （`px`vs的概念`pt`是一个非常密集的概念。我建议你[阅读](http://dot5.drawar.com/posts/pt-vs-px)更多关于它的内容。它花了一段时间才让我和我一起沉沦）

    *   您还可以使用 jQuery 和 css 级联（又名特异性）的巧妙组合来使用相同的 css 基础来解决不同的目标。请在此处查看我的[答案](https://stackoverflow.com/a/14868902/766570)。我们也在*亚马逊这样做*

    *   您可以查看的一件事（免责声明：我只阅读过它但没有经验）[css mediatypes](http://www.w3schools.com/css/css_mediatypes.asp) .. 它允许您使您的 css 媒体特定（即手持设备的 css 与打印的 css 不同）。 .但我不知道这与..的想法有多少重叠，`one size design fits all resolutions`但我知道我们在亚马逊考虑过这个想法，但认为它不足以满足我们不同的分辨率需求。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:46:42.603

这是一个[JSFiddle](http://jsfiddle.net/dsundy/AALwW/1)，它展示了实现此目的的一种方法。

将工具箱和反馈标签放入容器中：

```
<div class="container">
    <div class="addthis_toolbox"></div>
    <div class="feedback"></div>
</div> 
```

然后使用CSS：

```
.container {
    height: 100%;
    left: 0;
    min-height: 600px;
    position: fixed;
    top: 0;
    width: 50px
}

.addthis_toolbox {
    position: absolute;
    top: 15%;
    width: 40px;
}

.feedback {
    position: absolute;
    top: 70%;
} 
```

根据您是否希望它滚动，您可以制作容器`position: fixed`或`position: absolute`. 祝你好运！

### 编辑：屏幕高度的媒体查询：

Abbood 在媒体查询方面提出了一个很好的观点。这是一个如何使用的示例：

```
@media screen and (max-height: 700px) {
    // CSS rules will be applied when the screen is < 700px tall.
} 
```

# php - 动态数组合并

> ID：14906276
> 
> 赞同：1
> 
> 时间：2013-02-16T02:24:54.863
> 
> 标签：php, directory, web-crawler, array-merge

我有一个看起来像这样的数组：

```
array(2) { 
    [0]=> array(2) { 
        [0]=> string(52) "./app/pictures/uploads/Audi/A1/name1.jpg" 
        [1]=> string(52) "./app/pictures/uploads/Audi/A1/name2.jpg" 
    } 
    [1]=> array(1) { 
        [0]=> string(52) "./app/pictures/uploads/Audi/A3/name3.jpg" 
    } 
} 
```

上面的数组可以有两个以上的键（0,1）。更多信息，我会浏览一个文件夹。如果有子文件夹，它将每个子文件夹放在一个数组中，并将这些子文件夹的内容/文件放在该数组中。

所以对于我的结果，我需要这样的东西：

```
array(3) { 
    [0]=> string(52) "./app/pictures/uploads/Audi/A1/name1.jpg" 
    [1]=> string(52) "./app/pictures/uploads/Audi/A1/name2.jpg" 
    [2]=> string(52) "./app/pictures/uploads/Audi/A3/name3.jpg" 
} 
```

我意识到这一点`array_merge`：

```
$array = array_merge($tmparray[0],$tmparray[1]); 
```

现在你可以看到这里的键是固定的。但它们应该是动态的。我怎么能意识到这一点？也许是一个循环，但我没有得到线索，该`$array`变量不会在该循环中每次都被覆盖......

也许现在想清楚已经太迟了，但我很快就需要一个解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T02:55:52.387

您只需要遍历父数组，然后将子数组合并到一个辅助变量中：

```
$result = array();
foreach ($directories as $array) {
    $result = array_merge($result, $array);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:30:08.803

假设 $directories 是您的多级数组，而 $merged 是您想要的。然后：

```
$merged = array();
foreach($directories as $dir) {
   foreach($dir as $file) {
       $merged[] = $file;
   }
} 
```

# javascript - 按类名计算输入字段

> ID：14906277
> 
> 赞同：0
> 
> 时间：2013-02-16T02:24:54.610
> 
> 标签：javascript, calculator

这是我的表格：

```
<INPUT TYPE=TEXT NAME="input1" SIZE=10>
<INPUT TYPE=TEXT NAME="input2" SIZE=10>
<INPUT TYPE="button" VALUE="+" name="add"
onclick="CalculateIMSUB(this.form)">
<INPUT TYPE=TEXT NAME="Answer" SIZE=12> 
```

这是我的功能：

```
function CalculateIMSUB(form) {
var Atext = form.input1.value;
var Btext = form.input2.value;
var val = form.val.value;
var A = eval(Atext);
var B = eval(Btext);    
var answer = A - B;
form.Answer.value = answer;
} 
```

这是我的问题：我希望我的函数通过类名进行操作。所以，如果我的表格看起来像这样：

```
<INPUT TYPE=TEXT classNAME="input1" name="baboon" SIZE=10>
<INPUT TYPE=TEXT classNAME="input2" name="gorilla" SIZE=10>
<INPUT TYPE="button" VALUE="+" name="add"
onclick="CalculateIMSUB(this.form)">
<INPUT TYPE=TEXT NAME="Answer" SIZE=12> 
```

计算器功能仍然可以工作。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:32:15.013

而不是 class 使用 id ，您可以使用 document.getElementById('ID').value 来引用它们，我认为有一个 document.getElementByClass 但并非所有浏览器都完全支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:32:31.557

您可以使用以下内容来检索元素：

```
function CalculateIMSUB(form) {
var Atext = form.getElementById('input1').value;
var Btext = form.getElementById('input2').value;
var val = form.val.value;
var A = eval(Atext);
var B = eval(Btext);    
var answer = A - B;
form.Answer.value = answer;
} 
```

对于以下 HTML：

```
<INPUT TYPE=TEXT id="input1" name="baboon" SIZE=10>
<INPUT TYPE=TEXT id="input2" name="gorilla" SIZE=10>
<INPUT TYPE="button" VALUE="+" name="add"
onclick="CalculateIMSUB(this.form)">
<INPUT TYPE=TEXT NAME="Answer" SIZE=12> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T02:49:42.077

```
function getElementsByClassName(oElm, strTagName, strClassName){
    var arrElements = (strTagName == "*" && oElm.all)? oElm.all :
        oElm.getElementsByTagName(strTagName);
    var arrReturnElements = new Array();
    strClassName = strClassName.replace(/\-/g, "\\-");
    var oRegExp = new RegExp("(^|\\s)" + strClassName + "(\\s|$)");
    var oElement;
    for(var i=0; i < arrElements.length; i++){
        oElement = arrElements[i];
        if(oRegExp.test(oElement.className)){
            arrReturnElements.push(oElement);
        }
    }
    return (arrReturnElements)
} 
```

# html - 全选当前图层并更改描边颜色。SVG

> ID：14906281
> 
> 赞同：0
> 
> 时间：2013-02-16T02:25:40.633
> 
> 标签：html, svg

我正在修改 svg-editor，特别是方法绘制实现的 mod。

我正在尝试创建一个函数，如果调用它会自动选择所有对象并更改它们的笔触颜色。

我可以在我的函数中调用这个：

```
svgCanvas.selectAllInCurrentLayer(); 
```

它基本上选择了画布上的所有项目。但是，当我在它下面输入时，更改笔触颜色功能

```
svgCanvas.setcolor("stroke", "red"); 
```

它不运行第二个命令（笔画更改功能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:49:24.517

在 Method Draw/SVG Edit 中，您将执行以下操作：

```
svgCanvas.selectAllInCurrentLayer();
var selected = svgCanvas.getSelectedElems();
selected.forEach(function(el){
  el.setAttribute("stroke", "red")
}); 
```

# ruby-on-rails-3 - Rails 金属 http 基本身份验证

> ID：14906283
> 
> 赞同：0
> 
> 时间：2013-02-16T02:25:57.327
> 
> 标签：ruby-on-rails-3, basic-authentication

当远程服务访问我的 Rails 金属端点之一时，我正在尝试使用 HTTP 基本身份验证。

我想知道如何访问请求的用户名和密码。到目前为止，我已经打印出了整个 env 对象，并且在该对象的任何地方都找不到用户名或密码。

相反，我看到 "HTTP_AUTHORIZATION"=>"Basic YW5yZ3JpZDpzYWZlbWFpbA==", "PASSENGER_CONNECT_PASSWORD"=>"U4vAn6lVAOe2C8nIQSWT93j3SFJkA5VxOicSeDspF9a"

但我不知道该怎么办。

理想情况下，我想做类似的事情：

```
class MyHook
  def self.call(env)
    user = env[...]
    pass = env[...]
    if (user == "foo" && pass == "pass")
      # do stuff
    end
  end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:55:51.623

```
require 'base64'
# Decode the colon-separated, base64-encoded user and password after "Basic "
user, pass = Base64.decode64(env['HTTP_AUTHORIZATION'].split[1]).split ':', 2 
```

我肯定会停用您发布的与您的问题一起编码的密码。:-)

# php - csv到mysql的逆序

> ID：14906286
> 
> 赞同：0
> 
> 时间：2013-02-16T02:26:59.870
> 
> 标签：php, mysql, csv

我有一个 CSV 文件，其中包含来自另一个来源的大约 1000 个条目。不幸的是，它的生成方式将最近的交易放在首位。我想将数据附加到 mysql 但它的顺序错误。我该如何解决？我能想到的唯一方法是将其写入临时表，按日期 ASC 查询并插入回正确的表中。有没有更好的办法？

```
 $location = $_SERVER['DOCUMENT_ROOT'] ."/assets/csv/";
    $year = trim(date('Y', strtotime($start)));
    $month = trim(date('m', strtotime($start))-1);
    $day = trim(date('d', strtotime($start)));

    $file = "http://ichart.yahoo.com/table.csv?s=". $symbol ."&a=". $month ."&b=". $day ."&c=". $year;
    $row = 1;
    if (($handle = fopen($file, "r")) !== FALSE)
    {
        $fp = fopen($location . $symbol.'.csv', 'w');
        while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
        {
            $num = count($data);
            if($row == 1){array_unshift($data,"Symbol"); }
            else  { array_unshift($data, $symbol); }
            fputcsv($fp, $data);
            $row++;
        }
        fclose($fp);
        fclose($handle); 
```

这就是我获取 CSV 文件的方式

# correlation - 是否可以直接在Stata中处理相关矩阵？

> ID：14906287
> 
> 赞同：1
> 
> 时间：2013-02-15T23:37:14.330
> 
> 标签：correlation, stata

我是 Stata 的新手，我有一个 12X12 相关矩阵作为我的输入。我想对此数据中的变量进行验证性因子分析。我看到 sem 是执行此操作的命令。

但我不知道 Stata 如何将我的数据识别为相关矩阵，而不是 12 个变量和 12 个观察值。有没有办法在输入或 sem 命令中指定这个？

# php - 在本地开发 Facebook 画布应用程序 - (MAMP, Codeigniter)

> ID：14906294
> 
> 赞同：2
> 
> 时间：2013-02-16T02:28:23.200
> 
> 标签：php, facebook, facebook-php-sdk, facebook-canvas

我正在启动我的第一个 Facebook 应用程序，托管在 Heroku 上。我在 Heroku 上设置了一个用于生产的应用程序，并在我自己的机器上本地运行了一个单独的应用程序用于开发。目前，该应用程序（功能很少）在 localhost 上运行得很好。但我不明白该应用程序是否应该能够像具有 Facebook 功能的本地主机上的典型画布应用程序一样运行。例如，请求对话框是否会在本地画布应用程序中运行。我应该能够在开发时在本地使用该功能吗？如果是这样，我需要采取哪些步骤才能使其正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T03:08:38.050

**差异**
您将看到的独立站点和画布应用程序（或页面选项卡）之间唯一真正的区别是`signed_request`加载页面时不会传入。

应用程序对话框仍然可以工作，但在弹出窗口中而不是直接在页面上。`http://localhost:5000`另外，如果您在 Facebook 应用程序设置中的“*使用 Facebook 登录的网站*”（或移动网络）下设置本地开发 URL（例如 ），您将能够像登录用户一样登录用户。

还有一些你无法在服务器上测试的东西，比如实时更新，Facebook 会向你的网站发送请求以通知更新。

可能还有一些其他的事情，但这是我现在能想到的。

**在本地工作**
所以，我通常做的是在本地开发它。为了管理**丢失`signed_request`**的，我只提供一个存根，或者我只是不指望它存在，所以我的应用程序也可以用完 facebook。

对于**登录方法**，我倾向于仅依赖 JS SDK，因为大多数通过画布应用程序进行的服务器端登录将依赖于`signed_request`- 并且 enaway，我发现通过 JS SDK 更好地进行 UX 登录。

然后，我只设置了两个 FB 应用程序，一个 staging 和一个用于发布。登台应用程序指向我的本地 URL，因此我的 Facebook 将允许从它进行连接。

在这一点上，它应该开箱即用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T14:07:43.413

> 但我不明白该应用程序是否应该能够像具有 Facebook 功能的本地主机上的典型画布应用程序一样运行

无论是在 localhost 还是在最终生产服务器上，您的应用程序的行为方式都应该相同。

Facebook 对话框（请求、消息..）应该像在实时服务器上一样显示在您的本地（开发）机器上。在我的情况下，为了完成这项工作，我设置了一个具有不同值的辅助“facebook 应用程序” `App Domains`，`Site URL`和`Canvas URL`。

这允许您从 localhost 运行您的应用程序。如果您的应用程序仅是画布，它将在 iframe 内运行（指向`Site URL`），但将显示在 Facebook 内。

此外，如果您想查看任何 Facebook 模式框而不是弹出窗口，请确保您包含[Facebook 的 JS API 。](https://developers.facebook.com/docs/reference/javascript/)

您应该注意到的唯一区别是，如果您通过 FB API 从您的 localhost 开发站点共享一个页面，Facebook 将无法抓取您的站点并在需要时获取任何图标、图像或描述。

# java - 如何在eclipse中使用acm.jar？

> ID：14906296
> 
> 赞同：0
> 
> 时间：2013-02-16T02:28:23.253
> 
> 标签：java, eclipse

我正在通过 YouTube 上的斯坦福编程方法视频学习 Java，并且我使用的是最新版本的 Eclipse，而不是斯坦福版本。在我将 acm.jar 添加到构建路径后，我仍然在 GLabel 和错误消息下看到一个红色下划线。这就是我所拥有的：

```
import acm.program.*;

public class Artistry extends GraphicsProgram {
public void run() {

        add(new GLabel("hello, world"), 100, 75);
        }

} 
```

有谁知道如何解决这个问题？我真的很感激任何帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T22:19:25.547

这是因为您还需要添加：`import acm.graphics.GLabel;`

**-或者-**

如果您要使用其他 G[something]，您可以添加：`import acm.graphics.*;`

# html - 当浏览器小于内容时添加空格

> ID：14906300
> 
> 赞同：0
> 
> 时间：2013-02-16T02:28:53.273
> 
> 标签：html, css

我有一个非常奇怪的问题，我最近注意到我正在为一个朋友开发一个 wordpress 主题，并且我正在使用相对/绝对位置在一些 div 的侧面添加社交/连接按钮——这很好用得到正确的设计。

但是，问题出现在页面右侧的“社交”div 上。如果浏览器小于主要内容的大小，它会在页面右侧添加额外的空白。如果我将 div 移到左侧，那很好；它只在页面长度的大约一半处添加空格（这更令人困惑）。

我一生都无法弄清楚为什么会发生这种情况；我不知道这是标准行为，还是我自己创建的问题。

我希望也许这里的某人可能有类似的经历，或者只是知道如何解决它。

#social div 的 CSS 是：

```
#social{
   width: 90px; height: 250px;
   padding: 10px;
   position: absolute; right: -40px; top: 40px;
   background: #EFEFEF;
   box-shadow: 2px 2px 5px 0 rgba(0, 0, 0, 0.3);} 
```

它所在的#page-content div 的 CSS 是：

```
#page-content{
   clear: both;
   min-height: 500px;
   width: 870px;
   margin: 0 auto;
   padding: 20px 0;
   position: relative;
   border: 5px solid #FFF;
   background: #F2F0D7;} 
```

截图是：
![问题](../Images/59b208ca379324b00e7dece13fbe711f.png)

只有当浏览器的宽度小于 960px（内容的宽度）时，上面的宽度才存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:13:28.473

查看您的网站后，它看起来像是您的社交平台。一些生成的元素是 100 像素或更大的宽度。如果您删除`width:90px;`，您可以看到它试图达到的宽度。您可以修改这些元素并将它们的宽度设置为更小（或设置为 100% 或诸如此类），或者您可以应用`overflow: hidden;`到`#social`div：

```
#social {
    ...
    overflow:hidden;
} 
```

发生这种情况的原因是因为您的社交容器溢出了。它只发生在右侧，因为这些元素是左对齐的。（我想您也可以将元素向右对齐。）

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:08:27.013

据我了解-您希望您的模板具有响应性。为此，您需要编写媒体查询来满足各种媒体尺寸和分辨率。

```
 /* Large desktop */
@media (min-width: 1200px) { ... }

/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) { ... }

/* Landscape phone to portrait tablet */
@media (max-width: 767px) { ... }

/* Landscape phones and down */
@media (max-width: 480px) { ... } 
```

为不同的尺寸编写 css 样式，您可以使您的网站看起来像您想要的那样。

# qt - 如何在 Qt 中显示子树项？

> ID：14906304
> 
> 赞同：0
> 
> 时间：2013-02-16T02:29:31.097
> 
> 标签：qt, tree, model-view

使用 Qt 的模型视图框架来表示树结构，例如 Qt 提供的简单树示例，树视图显示 root-tree-item。有什么方法可以显示子树项，例如根的子项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:29:56.297

[Qt 的模型/视图框架](http://doc.qt.digia.com/qt/model-view-programming.html#parents-and-children)的文档涵盖了这一点。

简而言之，这些方法决定了你的树的结构：

*   `QAbstractItemModel::index()`，它应该返回给定父索引的子索引
*   `QAbstractItemModel::parent()`，它应该返回给定孩子的父索引

请注意，如果您有一个大视图，这些方法必须很快，因为 Qt 项目视图会*非常*频繁地调用它们。

* * *

如果您绝对不需要实现自己的模型，我还建议您查看[`QTreeWidget`](http://doc.qt.digia.com/qt/qtreewidget.html)（而不是`QTreeView`），这是一个更简单的保留模式树视图小部件。它为大多数相同的功能提供了一个更易于使用（且不易出错）的概念模型。

# android - 使用 Simplecursoradapter 的 Listfilter

> ID：14906305
> 
> 赞同：0
> 
> 时间：2013-02-16T02:29:32.583
> 
> 标签：android

当用户在文本框中输入内容时，我想过滤我的列表。

但是尝试输入文本框时没有任何反应。

我看到了很多话题，但可以意识到哪里出了问题。

我知道这个问题被问了很多次，但我可以解决它。

这是我的代码：

```
public class Find extends ListActivity {

private EditText filterText = null;
DBHandler db=new DBHandler(this);
ListView myList;
String[] items = new String[10];
SimpleCursorAdapter adapter=null;
int test = 0;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_find_search);
    filterText = (EditText) findViewById(R.id.searchbox);
    filterText.addTextChangedListener(filterTextWatcher);

Cursor cursor=db.getEvents();
    startManagingCursor(cursor);
    String[] from = {"_id","full_name"};
    int[] to = { R.id.name_entry, R.id.number_entry};
    adapter = new SimpleCursorAdapter(this, R.layout.activity_find, cursor, from, to);
setListAdapter(adapter); 
```

我的文本观察方法：

```
 private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {

        adapter.getFilter().filter(s);

    }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:39:34.327

您还需要一些额外的东西才能使用 SimpleCursorAdapter 进行过滤。首先，您需要为您的适配器识别[字符串转换列](http://developer.android.com/reference/android/support/v4/widget/SimpleCursorAdapter.html#setStringConversionColumn%28int%29)，其次您需要实现一个[FilterQueryProvider](http://developer.android.com/reference/android/widget/FilterQueryProvider.html)并通过 setFilterQueryProvider 方法调用将其添加到您的适配器。

这是一个 FilterQueryProvider 实现的简单示例：

```
mAdapter.setFilterQueryProvider(new FilterQueryProvider() {
   @Override
   public Cursor runQuery(CharSequence constraint) { 
      if (constraint == null) {
         // contract: if constraint is null, return the same as before
     return mAdapter.getCursor();
      } else {
         //TODO: run your query here... 
      }
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:53:15.537

我有我的自定义方法来实现与两组过滤`ArrayList`。（您可以根据需要对其进行修改。）

1) 搜索 ArrayList
2) 主 ArrayList

第一种方法是将搜索数组设置为与主数组相同的值。

```
public void setarray() {

        for (int j = 0; j < MainArray.size(); j++) {

            SearchArray.add(MainArray.get(j));
        }
    } 
```

第二种方法是用你的数组显示你的 ListView。

```
public void displaylist() {

        myCustomArrayAdaptor adapter = new myCustomArrayAdaptor(this,
                R.layout.myLayOut, SearchArray);

        mylistView = (ListView) findViewById(R.id.mylist);

        mylistView.setAdapter(adapter);

    } 
```

第三种过滤 ListView 的方法

```
public void setsearcharray(CharSequence searchstr) {

//clear your array before adding the new value in it

        SearchArray.clear();

        int len1 = searchstr.length();

// if your search text length is zero then transfer all your main array data to search array.
        if (len1 == 0) {

            for (int j = 0; j < MainArray.size(); j++) {

                SearchArray.add(MainArray.get(j));
            }

// then display your listview with your search array value.
            displaylist();
        } else {
            for (int j = 0; j < MainArray.size(); j++) {

                String strvalue = MainArray.get(j);

                int length = searchstr.length();

//if your search text length is smaller then the value that is in your array

                if (strvalue.length() >= length) {
                    String substr = strvalue.substring(0, length);

                    if (substr.equals(searchstr.toString())) {

                        SearchArray.add(strvalue);

                        displaylist();

                    } else {
                        displaylist();
                    }

                }

            }
        }

    } 
```

然后将您的自定义搜索方法添加到您的`TextWatcher`

```
private TextWatcher filterTextWatcher = new TextWatcher() {

        public void afterTextChanged(Editable s) {
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            setsearcharray(s);
        }

    }; 
```

不要忘记添加`setarray(); displaylist();`到您的`public void onCreate(Bundle savedInstanceState)`方法以首次生成列表，例如：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lead_layout);

        setarray();

        displaylist();
} 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T03:55:12.447

你看过这些吗？

[使用自定义（对象）适配器过滤 ListView](https://stackoverflow.com/questions/5780289/filtering-listview-with-custom-object-adapter) <- 在文本视图上。用户开始输入文本。

[http://www.androidhive.info/2012/09/android-adding-search-functionality-to-listview/](http://www.androidhive.info/2012/09/android-adding-search-functionality-to-listview/) <- 在顶部显示文本字段......然后你在里面输入......

# c++ - boost::bind 用于模板类中的非静态成员函数

> ID：14906308
> 
> 赞同：0
> 
> 时间：2013-02-16T02:30:47.193
> 
> 标签：c++, templates, boost, stl, bind

```
template<typename T> class testClass{
    public:
    bool compare(const int& a, const int& b){
        T x;
        ....
    }
    void sort(){
        std::sort( data.begin() ,
                data.end() ,
                boost::bind<bool>(
                &testClass<T>::compare,
                this, _1 , _2 ) );
    }
    std::vector<int> data;
} 
```

我有一个带有非静态成员函数的 template-d 类，旨在作为`std::sort`. 比较器取决于`typename T`参数。由于它有一个隐式`this`指针，我尝试指向它`boost::bind`的指针`this`。

然而既不`boost::bind<bool>(.......)`也`boost::bind(....)`不会编译。

上面的示例在 MSVC 2008 上失败（因为我在非英语环境中，我不确定英语的确切信息，但可能抱怨任何一个原型都可以使所有必要的参数转换变得可行。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:04:12.583

好吧，经过一番挖掘......问题确实不在于上面提供的代码段。

原来是与另一个相关的成员函数中的（ [Strange VC++ compile error, C2244 ）类似的问题。](https://stackoverflow.com/questions/1484885/strange-vc-compile-error-c2244)调用 in 的函数`compare`恰好是一个模板函数，它无法像上述问题中的那样编译。起初我没有注意到那个错误。

我将部分代码从`class.cpp`to移到了`class.hpp`，现在它可以工作了。

一个愚蠢的 MSVC 错误，也是我犯的一个愚蠢错误。

# android - 如何在Android中实现jQuery的slideToggle功能

> ID：14906309
> 
> 赞同：0
> 
> 时间：2013-02-16T02:30:52.973
> 
> 标签：android, jquery-animate

我在 Android 中寻找类似 jQuery slideToggle 的功能。有什么办法可以做到这一点。我搜索了很长时间，但没有找到任何东西。如果可能的话，请给我一些源代码片段。我想在 URL 中实现正确的 Google Map 按钮操作：http: [//360.az/vt/avaz](http://360.az/vt/avaz)

# javascript - 如何获取对无序列表中子元素的引用

> ID：14906310
> 
> 赞同：1
> 
> 时间：2013-02-16T02:30:52.520
> 
> 标签：javascript, html

我使用无序列表创建了一个垂直菜单。在列表中，有一些子项在单击事件之前不显示。如何获取对 li 元素的第一个 ul 子元素的引用以将其显示样式从“none”更改为“”？

当我单击 mnu03 时，如何获得对 mnu031 的引用。现在我只是在父 id 中添加一个“1”来创建孩子的 id，这很笨拙。

我不想使用 jQuery。

标记如下：

```
<pre>
<ul>
    <li><a href="#" id="mnu01" onclick="this">Item 1</a></li>
    <li><a href="#" id="mnu02" onclick="this">Item 2</a></li>
    <li><a href="#" id="mnu03" onclick="this">Item 3</a>
         <ul id="mnu031" style="display:none;" >
             <li><a href="#" id="mnuSub031" onclick="this">Item S1</a></li>
             <li><a href="#" id="mnuSub032" onclick="this">Item S2</a></li>
         </ul>
    </li>
    <li><a href="#" id="mnu04" onclick="this">Item 4</a></li>
    <li><a href="#" id="mnu05" onclick="this">Item 5</a></li>
</ul>
</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:39:51.960

在您绑定到点击的 JavaScript 代码中：

```
this.parentElement.querySelector('ul').style.display = 'block'; 
```

[http://jsfiddle.net/CDXH5/](http://jsfiddle.net/CDXH5/)

顺便说一句，您的 html 中有一些不匹配的引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:23:18.673

为您的 li 元素分配一个类。

```
 window.onload=function() {
var obj=document.getElementsByClassName('x');
for(var i=0;i<obj.length;i++)
{

obj[i].addEventListener("click", function() {
 for(var i=0;i< this.childElementCount ;i++ )
    {
        // write ur code here  this.children[i] is your reference
    }

 });

}   

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T03:44:34.617

仅使用 CSS 兄弟选择器来设置其类中的第一个样式。下面只选择一个li下的第一个ul

```
 li > ul {} 
```

您可能还想尝试其他同级类型选择器。

*   后代选择器
*   相邻的兄弟组合子
*   一般兄弟组合子。

**后代选择器：** 这是对无序列表下方任何位置的任何列表项进行样式设置。

```
ul li{} 
```

**相邻兄弟组合器：**

```
p + p { font-size: smaller; } /* Selects all paragraphs that directly follow another paragraph */ 
```

**子组合器选择器：**选择标记中标记的严格直接子级`<p>`标记。

```
p > img 
```

不确定这是否是您正在寻找的，但如果它必须是免费的 JS，我会使用它。 [css-tricks.com](http://css-tricks.com/child-and-sibling-selectors/)

# ios - Xcode 的“Target Membership”是否与 Bundle 有关？

> ID：14906312
> 
> 赞同：3
> 
> 时间：2013-02-16T02:31:07.307
> 
> 标签：ios, objective-c, xcode

我以前曾想过，如果您选中一个文件的复选框以将其添加到目标，那么这就是它被包含在应用程序包中的方式。我有一些我决定不使用的音频文件，我从 Target Membership 中取消选中它们。他们也不是`#include`或`#import`任何地方。我使用 Product 菜单“清理”了 Xcode 项目，还删除了它的派生数据。作为测试，我没有删除这样的行：

```
NSURL* file_url = [[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:fileName ofType:fileSuffix]];
pcmData = MyGetOpenALAudioDataAll((CFURLRef)file_url, &data_size, &al_format, &sample_rate); 
```

在哪里`fileName`并`fileSuffix`引用这些不再包含在目标中的文件。

然而，令人惊讶的是，这些文件仍然可以正常加载和播放。

显然，除了“目标成员资格”复选框之外，文件还以另一种方式包含在应用程序包中。这是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T02:42:01.143

目标成员资格确定为哪个目标处理文件。例如，如果您的项目同时包含 Mac 目标和 iOS 目标，并且源文件仅包含在 Mac 目标中，则不会为 iOS 编译它。

一个文件可能是多个目标的成员。一个项目可能包含多个目标，通常至少包含一个。一个目标可以建立其他目标作为依赖项（例如，您可以创建主应用程序目标的“编译资源”目标和“构建开源库”目标依赖项。）

听起来该文件仍然存在于*已*安装在目标设备或模拟器上的应用程序包中。*更新应用程序时不会*删除应用程序包中的文件。要删除它们，您必须卸载并重新安装应用程序（或执行其他删除应用程序数据的操作，例如擦除手机或重置模拟器。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T02:40:51.480

从目标中移除项目不会将它们从现有构建中移除（那不是很好）。要解决此问题，您可以从设备或模拟器中删除应用程序，当您再次构建和运行时，只会复制添加到目标的文件。

# java - 在 SD 卡中创建的文件丢失？

> ID：14906313
> 
> 赞同：0
> 
> 时间：2013-02-16T02:31:19.070
> 
> 标签：java, android, android-sdcard

我正在使用此代码在 sd 卡上创建和写入文件，但是在运行我的 android 应用程序后，我似乎找不到在 sd 卡中创建的任何文件。我不确定我的代码是否有问题或什么。请帮我。任何意见将不胜感激..谢谢！

**这是我正在使用的代码：**

```
 private void writeToSDFile() {

    File root = android.os.Environment.getExternalStorageDirectory(); 
    tv.append("\nExternal file system root: "+root);

    File dir = new File (root.getAbsolutePath());
    dir.mkdirs();
    File file = new File(dir, "wordlist.txt");

    try {       

        FileOutputStream f = new FileOutputStream(file);

        PrintWriter pw = new PrintWriter(f);
        pw.println(stringword);
        pw.append(stringword);

        pw.flush();
        pw.close();
        f.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        Log.i(TAG, "******* File not found.);
    } catch (IOException e) {
        e.printStackTrace();
    }   
    tv.append("\n\nFile written to "+file);

}//end writeToSDFile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:42:59.267

您的代码似乎没有任何问题，您必须确保两件事：

1-您在清单中有适当的权限，即`WRITE_EXTERNAL_STORAGE`

2-外部存储`mounted`例如

```
if(Environment.getExternalStorageState() == Environment.MEDIA_MOUNTED){
    // write your file
} 
```

您的代码中有冗余，该行`File dir = new File (root.getAbsolutePath());`绝对没用。

您所需要的只是：

```
File file = new File(Environment.getExternalStorageDirectory(), "wordlist.txt"); 
```

# java - 在java中克隆一个指向空异常的对象数组

> ID：14906314
> 
> 赞同：2
> 
> 时间：2013-02-16T02:31:24.420
> 
> 标签：java

在尝试克隆对象数组时，当数组未完全填满时出现错误。如果列表已满，则一切正常！

这是我的代码：

```
 public Object clone() throws CloneNotSupportedException  {
        EmployeeList listBackup = new EmployeeList();
        for (Employee employeeObj : listEmployee){
             listBackup.add( (Employee) employeeObj.clone() );  
        }
        return listBackup;
    } 
```

当数组中的元素为空时，还有其他方法可以重写此代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:33:28.040

做一个空检查。

```
 for (Employee employeeObj : listEmployee){
   if (employeeObj != null)
     listBackup.add( (Employee) employeeObj.clone());  
 } 
```

或者，如果您想`break`在找到空值后立即循环：

```
for (Employee employeeObj : listEmployee){
  if (employeeObj == null)
    break;
  listBackup.add( (Employee) employeeObj.clone());  
} 
```

或者在遇到`null`参考资料时立即返回

```
for (Employee employeeObj : listEmployee){
      if (employeeObj == null)
        return listBackup;
      listBackup.add( (Employee) employeeObj.clone());  
    } 
```

当然，如果可以的话，避免让你的数组/列表包含空值，正如@StephenC 指出的那样，如果这是一个实际的数组，你可以克隆它。但是，这取决于作业规范、其他代码实现以及您的教授允许您做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:59:07.967

我不确定您是否理解 A--C 的答案，他/她给了您两个单独的解决方案，一个带有 break 子句，一个没有。他/她给出的第一个解决方案准确地回答了您的问题:)

# java - 我的程序有问题

> ID：14906318
> 
> 赞同：-2
> 
> 时间：2013-02-16T02:32:19.867
> 
> 标签：java, text-files, java.util.scanner

我的程序假设读取 environment.txt，然后反复提示用户输入变量名，并以 environment.txt 中定义的该变量的值作为响应。用户一直在输入变量名。（他们可以用 CTRL-C 终止程序。） 在 environment.txt 中，var1 等于 Hello var 2 等于 GoodBye var3 等于 Program，var4 等于 Music。每次我的程序在输入输入时提示用户输入时，程序都会关闭并且不输出任何内容。有人可以更改我的代码吗？我不明白发生了什么。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.*;
public class Environment {

    public static String VariableName() {
        Scanner input = new Scanner(System.in);
        System.out.println("Enter a Variable: ");
        String userInput = input.nextLine();

        if (userInput == "var1")
        {
            userInput = "Hello";
            return userInput;
        }
        else if (userInput == "var2")
        {
            userInput = "GoodBye";
            return userInput;
        }
        else if (userInput == "var3")
        {
            userInput = "Program";
            return userInput;
        }
        else if (userInput == "var4")
        {
            userInput = "Music";
            return userInput;
        }
        else if (userInput == "CTRL-C");
        {
            System.exit(0);
        }
            return userInput;
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        File file = new File("environment.txt");
        try{
            Scanner scanner = new Scanner(file);
            while (scanner.hasNextLine()) {
                String line = scanner.nextLine();
                System.out.println(line);

            }

        } catch (FileNotFoundException e){
            System.out.println("File Not Found");
        }
            VariableName();
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:39:50.997

两件事情。

1) 查看[这篇文章](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)，了解在 Java 中比较字符串的正确方法。

2）您的方法中没有循环`VariableName()`，因此您只需绕行一次，然后退出。

我会打印出用户输入，并且对于您失败的每个测试，打印一个“thisString is not equal to thatString”。这将帮助您了解程序的实际行为方式。

那应该能让你到达那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T02:57:44.653

您的来源中有很多问题，

1）下面的 src 将导致每次调用， 因为您正在关闭完成子句`System.exit(0);`的 else if 语句。`semi-clolon (;)``else-if`

```
else if (userInput == "CTRL-C");

{
 System.exit(0);
} 
```

2) 不使用[String.equals](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)或[String.equalsIgnoreCase](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)方法进行比较。

3) 不在*VariableName*方法中循环以获取用户的连续输入

# mysql - 找不到 MySQL 语法错误

> ID：14906322
> 
> 赞同：0
> 
> 时间：2013-02-16T02:32:52.750
> 
> 标签：mysql

```
USE waterloo;

DROP TABLE IF EXISTS waterloo;
CREATE TABLE waterloo
(
id              int unsigned NOT NULL auto_increment,   # Unique ID for the record
building        varchar(255) NOT NULL,                  # Name of building
floor           int unsigned NOT NULL,                  # Floor of building
gender          varchar(255) NOT NULL,                  # Gender of bathroom
location        int unsigned NOT NULL,                  # Convenience of location of     bathroom
cleanliness     int unsigned NOT NULL,                  # Cleanliness of bathroom
stalls          int unsigned NOT NULL,                  # Number of stalls
noise           int unsigned NOT NULL,                  # Ambient noise
lines           int unsigned NOT NULL,                  # Length of lines at peak hours
graffiti        int unsigned NOT NULL,                  # Amount of graffiti on the walls
PRIMARY KEY     (id)
); 
```

我收到以下错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 11 行的 'lines int unsigned NOT NULL, graffiti int unsigned NOT NULL )' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:35:36.700

`LINES`是 MySQL 中的保留字。不过，您仍然可以将其用作列名。只需将其包裹在 backtics 中

```
`lines` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:35:33.247

Lines 是 MySQL 中的保留字——在它周围添加刻度，它应该可以工作。

[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

```
CREATE TABLE waterloo
(
id              int unsigned NOT NULL auto_increment,   # Unique ID for the record
building        varchar(255) NOT NULL,                  # Name of building
floor           int unsigned NOT NULL,                  # Floor of building
gender          varchar(255) NOT NULL,                  # Gender of bathroom
location        int unsigned NOT NULL,                  # Convenience of location of     bathroom
cleanliness     int unsigned NOT NULL,                  # Cleanliness of bathroom
stalls          int unsigned NOT NULL,                  # Number of stalls
noise           int unsigned NOT NULL,                  # Ambient noise
`lines`           int unsigned NOT NULL,                  # Length of lines at peak hours
graffiti        int unsigned NOT NULL,                  # Amount of graffiti on the walls
PRIMARY KEY     (id)
); 
```

希望有帮助。

# c++ - c ++使用指针以相反的顺序显示句子

> ID：14906323
> 
> 赞同：2
> 
> 时间：2013-02-16T02:33:10.070
> 
> 标签：c++

我正在尝试构建一个程序，该程序从用户那里获取短句并以相反的顺序显示它们。不幸的是，我刚开始使用 c++ 我需要知道这样做。例如：如果用户输入输入：

```
I like the red color
blue is also nice
and green is lovely
but I don't like orange 
```

输出：

```
but I don't like orange
and green is lovely
blue is also nice
I like the red color 
```

提前致谢！

```
#include<iostream>
#include<string>
using namespace std;

const int SIZE= 500;

int main()
{

   const int SIZE = 500;
   char mystring[SIZE];
int i;
for(i=0; i<SIZE; i++)
{

    cout<<"Enter a string: ";
    cin.getline(mystring, SIZE);
    } while (mystring != 0);

       char * reverse= new char[strlen(mystring) + 1];
        char *p1 = mystring+ strlen(mystring);
        char *p2 = reverse;

        while(p1 != mystring)
        {
        p1--;
        *p2= *p1;
        p2++;
    }

    *p2 = '\0';
    cout << reverse<<endl;

   system("PAUSE");
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:32:25.657

您打算解决此问题的一种重要方法是以下算法：

1.  将文件加载到缓冲区中，并以空字符终止。
2.  定位一个指向`p`最后一个缓冲槽位置的指针。
3.  虽然`p`不指向缓冲区的开头，但请执行以下操作：
    *   如果字符是换行符 ( `'\n'`) 则
        1.  将字符串*通过*换行符 ( `p+1`) 发送到标准输出。
        2.  `p`用空字符覆盖指向的换行符。
    *   减少`p`一个字符位置。
4.  上述循环完成后，还剩下一行：第一行。将它发送到标准输出，你就完成了。

或者我被引导去相信。需要考虑的重要事项如下：

1.  该算法是否适用于空文件？
2.  该算法是否适用于仅包含换行符的文件？
3.  该算法是否适用于没有尾随换行符的多行文件？
4.  该算法是否适用于没有尾随换行符的单行文件？
5.  该算法是否适用于带有尾随换行符的多行文件？
6.  该算法是否适用于带有尾随换行符的单行文件？

话虽如此，这里有一个潜在的候选人：

```
#include <iostream>
#include <fstream>
#include <iterator>
#include <vector>
using namespace std;

int main(int argc, char *argv[])
{
    // assume the file to reverse-print is the first
    //  command-line parameter. if we don't have one
    //  we need to leave now.
    if (argc < 2)
        return EXIT_FAILURE;

    // will hold our file data
    std::vector<char> data;

    // open file, turning off white-space skipping
    ifstream inf(argv[1]);
    inf.seekg(0, inf.end);
    size_t len = inf.tellg();
    inf.seekg(0, inf.beg);

    // resize buffer to hold (len+1) chars
    data.resize(len+1);
    inf.read(&data[0], len);
    data[len] = 0; // terminator

    // walk the buffer backwards. at each newline, send
    //  everything *past* it to stdout, then overwrite the
    //  newline char with a nullchar (0), and continue on.
    char *start = &data[0];
    char *p = start + (data.size()-1);
    for (;p != start; --p)
    {
        if (*p == '\n')
        {
            if (*(p+1))
                cout << (p+1) << endl;
            *p = 0;
        }
    }

    // last line (the first line)
    cout << p << endl;

    return EXIT_SUCCESS;
} 
```

**输入**

```
I like the red color
blue is also nice
and green is lovely
but I don't like orange 
```

**输出**

```
but I don't like orange
and green is lovely
blue is also nice
I like the red color 
```

* * *

**一种相当简单的方法**

有***更***简单的方法可以做到这一点，我将在评论中解释每一步。有可能你不能使用这样的东西，但重要的是你要了解什么时候*可以*使用：

```
#include <iostream>
#include <fstream>
#include <iterator>
#include <vector>
using namespace std;

int main(int argc, char *argv[])
{
    // assume the file to reverse-print is the first
    //  command-line parameter. if we don't have one
    //  we need to leave now.
    if (argc < 2)
        return EXIT_FAILURE;

    // collection that will hold our lines of text
    vector<string> lines;

    // read lines one at a time until none are returned
    //  pushing each line in to our vector.
    ifstream inf(argv[1]);
    string line;
    while (getline(inf, line))
        lines.push_back(line);
    inf.close();

    // a LOT happens in the next single line of code, and
    //  I will try to describe each step along the way.
    //
    // we use std::copy() to copy all "items" from
    //   a beginning and ending iterator pair. the
    //   target of the copy is another iterator.
    //
    //  our target iterator for our formatted ouput
    //   is a special iterator class designed to
    //   perform an output-stream insertion operation
    //   (thats the << operator) to the stream it is
    //   constructed with (in our case cout) using each
    //   item we give it from our copy-iteration. to use
    //   this class the "copied" item must support the
    //   traditional insertion operator <<, which of
    //   course, std::string does. after each item is
    //   written, the provided suffix (in our case \n)
    //   is written as well. without this all the lines
    //   would be ganged together.
    //
    //  lastly, to glue this together (and the whole
    //   reason we're here), we use a pair of special
    //   iterators designed to  work just like the regular
    //   begin() and end() iterators you're familiar with,
    //   when traversing forward in a sequence, but these
    //   ones, rbegin() and rend(), move from the last
    //   item in the sequence to the first item, which is
    //   *exactly* what we need.

    copy(lines.rbegin(), lines.rend(), 
         ostream_iterator<string>(cout, "\n"));

    // and thats it.
    return EXIT_SUCCESS;
} 
```

**输入**

```
I like the red color
blue is also nice
and green is lovely
but I don't like orange 
```

**输出**

```
but I don't like orange
and green is lovely
blue is also nice
I like the red color 
```

* * *

**更新：合并用户输入**

为第二个版本合并用户输入的示例是：

```
#include <iostream>
#include <iterator>
#include <vector>
using namespace std;

int main(int argc, char *argv[])
{
    // collection that will hold our lines of text
    vector<string> lines;
    do
    {   // prompt the user
        cout << "Sentance (<enter> to exit): ";
        string line;
        if (!getline(cin, line) || line.empty())
            break;
        lines.push_back(line);
    } while (true);

    // send back to output using reverse iterators
    //  to switch line order.
    copy(lines.rbegin(), lines.rend(),
         ostream_iterator<string>(cout, "\n"));

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T02:44:56.657

也许是这样的：

```
#include <string>
#include <iostream>
#include <vector>
using namespace std;
// include headers and avoid having to use std:: all the time
int main(){
    vector<string> data;
    string line;
    do{
        std::getline(std::cin, line);
        data.push_back( line );
    }while( cin );//read lines and store to a vector
    for (int i=data.size()-1;i>=0;--i)// traverse the vector in a reversed order (maybe size_t for i would be better)
        cout<<data[i]<<endl;
} 
```

看起来这是一些功课，可能您只能使用某些功能。如果你坚持，我们可以写一个*作业安全的*版本：

```
// this is just intended to illustrate how RIDICULOUS it is not to use STL features.
#include <cstring>
#include <cstdio>
#include <cstdlib>
int main(){
#define MAXLEN (10000)
    char* buffer = (char*)malloc(MAXLEN);//allocate space from heap
    char* buffer_ptr = buffer + 1;
    *buffer = '\0';//string terminator
    while( fgets(buffer_ptr,buffer+MAXLEN-buffer_ptr , stdin ) ){
        buffer_ptr += strlen(buffer_ptr);
        ++buffer_ptr;// reserve the '\0'
    }
    buffer_ptr -= 2;
    while(buffer_ptr >= buffer){
        if (!*buffer_ptr)// find end of string
            fputs(buffer_ptr+1,stdout);
        --buffer_ptr;// traverse backward
    }
    free(buffer);//free space
} 
```

尽可能避免 C++ 扩展。（以一种可能荒谬的方式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T02:59:27.670

```
#include<iostream>
using namespace std;

int main(){
    char str[100][100];
    for(int i =0; i < 10 ; i++) {
        cin.getline(str[i],100);
    }
    for(int i = 9 ; i >=0 ; i--) {
        cout<<str[i]<<endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-02T03:46:31.353

这是如何做到漂亮。

```
template<class It>
struct range_t {
  It b; It e;

  It begin() const { return b; }
  It end() const { return e; }
};

template<class It>
range_t<It> range(It s, It f) {
  return {s,f};
} 
```

`range( start, finish )`是一个帮助器，可让您创建可以`for(:)`迭代的范围。

```
template<class C>
auto backwards(C&& c) {
  using std::rbegin; using std::rend;
  return range( rbegin(c), rend(c) );
} 
```

`backwards(container)`返回一个向后迭代容器的范围。

一旦我们编写了上面的库代码，所有繁重的工作就完成了。[剩下的代码读起来几乎和python](/questions/tagged/python "显示标记为“python”的问题")一样漂亮：

```
int main() {
  std::cout << "Enter some text (blank line to finish):\n";
  std::string line;
  std::vector<std::string> lines;
  while (std::getline(std::cin, line))
    lines.push_back(line);
  for (auto&& line:backwards(lines))
    std::cout << line << "\n";
} 
```

我们得到行，缓冲它们，然后向后打印它们。

[活生生的例子](https://ideone.com/Q0pPjG)。

这里的目标是使主程序逻辑尽可能清晰。`backwards`和`range`样板只是满足这种需求。

# git - --set-upstream 在分支名称中使用正斜杠“/”从远程跟踪/拉出一个新分支

> ID：14906325
> 
> 赞同：1
> 
> 时间：2013-02-16T02:33:28.290
> 
> 标签：git, branch

我的遥控器上有一个分支，我的本地仓库不知道。我正在尝试在本地创建分支，跟踪和拉取，但分支的名称中有一个正斜杠。

我的结果：

```
$ git branch --set-upstream feature/users origin/feature/users
fatal: Not a valid object name: 'origin/feature/users' 
```

我是否需要转义分支名称中的正斜杠？我试过引号和反斜杠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T02:41:31.330

上游分支必须是现有的本地分支（在本地仓库中存在的意义上是本地的），然后才能将其设置为上游。`origin/feature/users`在尝试创建跟踪它的本地分支之前，您应该从远程获取当前。

# sql - 如何使用 SQLCancel 从线程 B 中取消线程 A 中的 SQL

> ID：14906328
> 
> 赞同：3
> 
> 时间：2013-02-16T02:33:55.103
> 
> 标签：sql, multithreading, delphi, odbc

我需要在一个线程中同步运行 SQL 命令，并能够从另一个线程取消查询。

据我所知，我需要 ODBC 函数 SQLCancel 和连接对象的句柄来完成此任务。

然而，作为这个领域的新手，要弄清楚这一点感觉就像一场艰苦的战斗。

有人可以提供我在 Delphi 2006 中实现这一目标的示例代码吗？

设置说明：

**线程 A**

ODBC_Connection.Execute('SELECT a,b,c INTO ##MyTable FROM LongRunningQuery')

**线程 B**

[使用 SQLCancel 取消线程 A 中的 SQL 语句的一些神奇代码]

> 注意：我有一个当前的解决方案，我利用 ADOCommand 对象异步执行查询。这使得使用 Command 对象的 Cancel 方法成为可能。但这很慢，因为我有一个带有 Sleep 函数的 while 循环来轮询命令的状态以查看它何时完成。这就是为什么我想要一个基于同步执行的解决方案。我有数百个查询，所以性能很重要。

附加信息：我使用 SQL Server 作为后端，所以这是我正在寻找的主要解决方案。关于处理 Oracle 和其他数据库的建议当然也很有趣，但在我的情况下是次要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:31:47.253

这完全取决于您的数据库后端、数据库客户端和您使用的 DAL。

数据库服务器和客户端必须支持从不同线程访问相同的底层连接和语句句柄。

DAL 需要让您访问它。

*   DAL：我知道[AnyDAC 可以](http://www.da-soft.com/forums/freedac-general-english/interrupt-sql-query-excecution-in-oracle.html)，但从未尝试过 ODBC。您的问题表明 ODBC API 支持它，但我不确定 Delphi ODBC 包装器是否会显示它。
*   数据库服务器：至少 Oracle 和 SQL Server 支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:31:26.357

根据 ODBC 规范，SQLCancel 可以取消对语句的以下类型的处理：

*   在语句上异步运行的函数（听起来好像已经完成了）
*   需要数据的语句上的函数（例如 SQLExecute 返回 SQL_NEED_DATA）
*   在另一个线程上的语句上运行的函数（听起来这就是你想要的）

我个人完成了上面的前两个，但从来没有完成最后一个。您还需要一个线程安全的 ODBC 驱动程序（有些不是即使 ODBC 规范说它们应该是）。至于你如何在Delphi中做到这一点，我不知道。

# python - Django Forms：仅显示模板中的第一个错误？

> ID：14906339
> 
> 赞同：0
> 
> 时间：2013-02-16T02:35:52.817
> 
> 标签：python, django, forms

我目前正在使用 Django 的内置登录视图，其中包含一个供用户登录的表单，并且具有以下内容：

`{% if form.username.errors %}<p class="error">{{ form.username.errors }}</p>{% endif %}`

对于每个字段。我想将所有错误消息移动到工具提示中或全部移动到登录框的顶部，所以我只想显示第一条错误消息。有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:10:22.637

与任何类似列表的对象一样，您可以使用`first`模板过滤器：

```
{{ form.username.errors|first }} 
```

# macos - 使用 Haskell 在 OS X 上编译 SDL 失败

> ID：14906340
> 
> 赞同：3
> 
> 时间：2013-02-16T02:36:23.307
> 
> 标签：macos, haskell, sdl

我什至无法在 OS X 上*构建我的 SDL 程序；*我收到此错误：

```
/Users/<redacted>/code/<redacted>/.hsenv/cabal/lib/SDL-0.6.4/ghc-7.4.1/HSSDL-0.6.4.o: unknown symbol `_SDL_HasSSE2' 
```

我尝试从源代码重新编译 SDL，从 macports 安装它；没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:11:15.663

我不太确定问题出在哪里，但是当我在 OSX 上时，我在 7.4.1 上遇到了很多问题。通过 HomeBrew 升级到 7.4.2 后，大部分问题都消失了。所以我建议尝试7.4.2。希望你能解决你的问题。

# php - 为什么是字符串变量” 我正在编写代码： 但它不会回显任何内容，直到我将字符串 $where 更改为 '< something'（在“<”之后添加一个空格），为什么？ 它可能会将 < 编译为某些标 问问题 问问题 2013-02-16T02:36:35.253 48 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在编写代码： 但它不会回显任何内容，直到我将字符串 $where 更改为 '< something'（在“<”之后添加一个空格），为什么？ 它可能会将 < 编译为某些标记语言的开头。 Jquery Slider 有时会出现在奇怪的位置 我的 jquery 滑块有问题。有时滑块会在一个奇怪的位置打开，就像这里的屏幕截图一样：http: //pixelcravers.ca/screens/slider-problem.png 我注意到当我右键单击滑块的容器区域并进行检查时谷歌浏览器中的元素滑块向右移动到正确的位置。 我的网站链接是http://pixelcravers.ca php 4 3 回答 3 This answer is useful 1 小于<和大于>号是 html 实体或保留符号来表示 html 标签。要显示它们，您需要使用实体名称或实体编号。在“小于”的情况下，它们分别是 < 和 <。 所以改变你的代码是这样的： $where='<someting'; echo $where; 或者更好 $where='<someting'; echo htmlentities($where); 正如@Waleed Kahn 正确建议的那样。 于 2013-02-16T02:38:34.820 回答 This answer is useful 0 在浏览器中，<引入了一个 HTML 标签。如果你的字符串是$where = " <img"你可能会得到这样的结果： 0="" 1="" 2="" 3="" 4="" 5="" 9="" 图片="" http:="" example.com="" 每当你输出文本时，你应该总是运行htmlentities，htmlspecialchars或者只是str_replace("<","&lt;",$where);为了逃避="" html="" 被处理（最后一个仍然允许="" &characters;）="" 于="" 2013-02-16t02:41:41.627="" 回答="" this="" answer="" is="" useful="" 这是因为浏览器将左括号<,="" 视为="" 标记。在浏览器中，右键单击页面并选择“查看源代码”。="" 如果您有终端，则可以使用：="" php="" -f="" file.php="" 这将在不解析的情况下输出原始内容。="" 如果您想在浏览器中查看代码，则需要使用以下代码对="" 字符进行编码htmlentities()：="" $where="<something" ;="" echo="" htmlentities($where);="" &lt;something="" 2013-02-16t02:44:20.750="" related="" c#="" -="" 按下按钮后清除asp.net文本框="" magento="" 如何从="" 的左侧="" col="" 中删除“我的购物车”？="" javascript="" node="" js，传统数据结构？（例如="" set="" 等），诸如="" java.util="" 之类的节点？="" iphone="" ios="" 企业应用程序在不安全的服务器上？="" 组合是否应该专门用于继承，或者是否存在不应该使用的情况？="" windows-phone-7="" 解析="" rest="" 为="" wp7="" 生成的="" xml="" c++="" stl="" 容器和内存泄漏="" 如何修复这个安全漏洞？="" 无法在="" uitableview="" 中为="" uitableviewcellaccessorycheckmark="" 选择单元格="" 在="" session_start()="" 中刷新数据="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：14906341
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php

我正在编写代码： `<?PHP $where='<something'; echo $where; ?>` 但它不会回显任何内容，直到我将字符串 $where 更改为 '< something'（在“<”之后添加一个空格），为什么？

它可能会将 < 编译为某些标记语言的开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:38:34.820

小于`<`和大于`>`号是 html 实体或保留符号来表示 html 标签。要显示它们，您需要使用实体名称或实体编号。在“小于”的情况下，它们分别是 < 和 <。

所以改变你的代码是这样的：

```
$where='&lt;someting'; echo $where; 
```

或者更好

```
$where='&lt;someting'; echo htmlentities($where); 
```

正如@Waleed Kahn 正确建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:41:41.627

在浏览器中，`<`引入了一个 HTML 标签。如果你的字符串是`$where = "<img"`你可能会得到这样的结果：

[图片 http://example.com/](http://example.com/)

每当你输出文本时，你应该总是运行`htmlentities`，`htmlspecialchars`或者只是`str_replace("<","&lt;",$where);`为了逃避 HTML 被处理（最后一个仍然允许 &characters;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T02:44:20.750

这是因为浏览器将左括号`<`, 视为 HTML 标记。在浏览器中，右键单击页面并选择“查看源代码”。

如果您有终端，则可以使用：

```
php -f file.php 
```

这将在不解析的情况下输出原始内容。

如果您想在浏览器中查看代码，则需要使用以下代码对 HTML 字符进行编码`htmlentities()`：

```
$where = '<something';
echo htmlentities($where); // &lt;something 
```</img"你可能会得到这样的结果：>

# mono - mono - 如何将 ref 与 CreateInstance 或 InvokeMethod 一起使用？

> ID：14906342
> 
> 赞同：1
> 
> 时间：2013-02-16T02:36:39.653
> 
> 标签：mono, out, ref, createinstance, invokemember

如何在 Mono 中使用 CreateInstance 传递“ref”？

例子：

```
public MyMethod(ref SomeType data) {...
...
SomeType st = new SomeType();
object handle = Activator.CreateInstance(type, new object[] { st }); 
```

这在我的 Windows 控制台应用程序中运行良好。问题是当我将它移植到 Mono 时，我得到一个丢失的方法异常，指出没有找到接受类型“SomeType”的“MyMethod”。

如果我从构造函数中删除 'ref'，Mono 会找到该方法并毫无问题地运行它。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T19:03:26.230

这是 2.6 版之前的 Mono 的问题。修复地址通过 ref 传递给 CreateInstance。

# php - Jquery Slider 有时会出现在奇怪的位置

> ID：14906343
> 
> 赞同：0
> 
> 时间：2013-02-16T02:36:56.647
> 
> 标签：php, javascript, jquery, wordpress

我的 jquery 滑块有问题。有时滑块会在一个奇怪的位置打开，就像这里的屏幕截图一样：http: [//pixelcravers.ca/screens/slider-problem.png](http://pixelcravers.ca/screens/slider-problem.png) 我注意到当我右键单击滑块的容器区域并进行检查时谷歌浏览器中的元素滑块向右移动到正确的位置。

我的网站链接是[http://pixelcravers.ca](http://pixelcravers.ca)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:41:51.087

看起来他的意思是这个滑块 [http://dev7studios.com/nivo-slider/](http://dev7studios.com/nivo-slider/)

因此，您必须评估为什么 CSS 加载不定期会出现问题。

# liferay - ant build-service 抛出“无法解析为类型”错误

> ID：14906355
> 
> 赞同：2
> 
> 时间：2013-02-16T02:39:29.430
> 
> 标签：liferay, liferay-6

我正在使用 liferay 6.1.1 ce ga2，当我下载基于 liferay 6.1.x 创建的知识库 portlet 并运行 ant build-service 时，会出现一些“无法解析为类型”的错误。您可以从附件中找到完整的错误信息。即使我使用通过liferay门户在线安装并运行良好的portlet，然后我将安装的文件从捆绑的tomcat目录复制到驻留在plugins sdk的portlet中的portlet目录并再次运行ant build-service，仍然出现错误。

有趣的是，它昨天一次又一次地成功，但今天却失败了。我今天做的唯一一件事就是基于 maven 设置 portlet 开发环境，但我认为这与错误无关，maven 不会更改插件 sdk 的任何内容。错误信息如下：

```
Buildfile: M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\build.xml

build-service:
     [copy] Copying 1 file to M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\classes
      [jar] Building MANIFEST-only jar: M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\build-service-classpath.jar
   [delete] Deleting: M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\build-service-classpath.jar.manifest
   [delete] Deleting: M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\build-service-classpath.jar
     [echo] Loading jar:file:/M:/My-Documents/programming/java/lib/Liferay/bundle/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/system.properties
     [echo] 二月 16, 2013 3:26:55 上午 com.liferay.portal.kernel.log.Jdk14LogImpl info
     [echo] INFO: Global shared lib directory /M:/My-Documents/programming/java/lib/Liferay/plugins/lib/
     [echo] 二月 16, 2013 3:26:55 上午 com.liferay.portal.kernel.log.Jdk14LogImpl info
     [echo] INFO: Global lib directory /M:/My-Documents/programming/java/lib/Liferay/bundle/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/lib/ext/
     [echo] 二月 16, 2013 3:26:55 上午 com.liferay.portal.kernel.log.Jdk14LogImpl info
     [echo] INFO: Portal lib directory /M:/My-Documents/programming/java/lib/Liferay/bundle/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/lib/
     [echo] 二月 16, 2013 3:26:56 上午 com.liferay.portal.kernel.log.Jdk14LogImpl info
     [echo] INFO: Properties for portal loaded from [file:/M:/MyLoading jar:file:/M:/My-Documents/programming/java/lib/Liferay/bundle/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-Documents/programming/java/lib/Liferay/bundle/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/classes/portal-ext-INF/lib/portal-impl.jar!/portal.properties
     [echo] Loading jar:file:/M:/My-Documents/programming/java/lib/Liferay/bundle/liferay-porta.properties, jar:file:/M:/My-Documents/programming/java/lib/Liferay/bundle/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOl-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/com/liferay/portal/tools/dependencies/portal-tools.properT/WEB-INF/lib/portal-impl.jar!/com/liferay/portal/tools/dependencies/portal-tools.properties, jar:file:/M:/My-Documents/programmties
     [echo] Loading file:/M:/My-Documents/programming/java/lib/Liferay/bundle/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/Wing/java/lib/Liferay/bundle/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/portal.propertieEB-INF/classes/portal-ext.properties
     [echo] s]
     [echo] SLF4J: Class path contains multiple SLF4J bindings.
     [echo] SLF4J: Found binding in [jar:file:/M:/My-Documents/programming/java/lib/Liferay/bundle/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/lib/util-java.jar!/org/slf4j/impl/StaticLoggerBinder.class]
     [echo] SLF4J: Found binding in [jar:file:/M:/My-Documents/programming/java/lib/Liferay/plugins/portlets/knowledge-base-portlet/docroot/WEB-INF/lib/util-java.jar!/org/slf4j/impl/StaticLoggerBinder.class]
     [echo] SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
     [echo] Building KBArticle
     [echo] Building KBComment
     [echo] Building KBTemplate

compile-java:
    [javac] Compiling 8 source files to M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service-classes
    [javac] ----------
    [javac] 1\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBArticleService.java (at line 142)
    [javac]     public com.liferay.knowledgebase.model.KBArticleSearchDisplay getKBArticleSearchDisplay(
    [javac]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] com.liferay.knowledgebase.model.KBArticleSearchDisplay cannot be resolved to a type
    [javac] ----------
    [javac] ----------
    [javac] 2\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBArticleServiceClp.java (at line 716)
    [javac]     public com.liferay.knowledgebase.model.KBArticleSearchDisplay getKBArticleSearchDisplay(
    [javac]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] com.liferay.knowledgebase.model.KBArticleSearchDisplay cannot be resolved to a type
    [javac] ----------
    [javac] 3\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBArticleServiceClp.java (at line 772)
    [javac]     return (com.liferay.knowledgebase.model.KBArticleSearchDisplay)ClpSerializer.translateOutput(returnObj);
    [javac]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] com.liferay.knowledgebase.model.KBArticleSearchDisplay cannot be resolved to a type
    [javac] ----------
    [javac] ----------
    [javac] 4\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBArticleServiceUtil.java (at line 173)
    [javac]     public static com.liferay.knowledgebase.model.KBArticleSearchDisplay getKBArticleSearchDisplay(
    [javac]                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] com.liferay.knowledgebase.model.KBArticleSearchDisplay cannot be resolved to a type
    [javac] ----------
    [javac] 5\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBArticleServiceUtil.java (at line 181)
    [javac]     .getKBArticleSearchDisplay(groupId, title, content, status,
    [javac]      ^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The method getKBArticleSearchDisplay(long, String, String, int, Date, Date, boolean, int[], int, int, OrderByComparator) from the type KBArticleService refers to the missing type KBArticleSearchDisplay
    [javac] ----------
    [javac] ----------
    [javac] 6\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBArticleServiceWrapper.java (at line 157)
    [javac]     public com.liferay.knowledgebase.model.KBArticleSearchDisplay getKBArticleSearchDisplay(
    [javac]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] com.liferay.knowledgebase.model.KBArticleSearchDisplay cannot be resolved to a type
    [javac] ----------
    [javac] 7\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBArticleServiceWrapper.java (at line 164)
    [javac]     return _kbArticleService.getKBArticleSearchDisplay(groupId, title,
    [javac]                              ^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The method getKBArticleSearchDisplay(long, String, String, int, Date, Date, boolean, int[], int, int, OrderByComparator) from the type KBArticleService refers to the missing type KBArticleSearchDisplay
    [javac] ----------
    [javac] ----------
    [javac] 8\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBTemplateService.java (at line 100)
    [javac]     public com.liferay.knowledgebase.model.KBTemplateSearchDisplay getKBTemplateSearchDisplay(
    [javac]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] com.liferay.knowledgebase.model.KBTemplateSearchDisplay cannot be resolved to a type
    [javac] ----------
    [javac] ----------
    [javac] 9\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBTemplateServiceClp.java (at line 335)
    [javac]     public com.liferay.knowledgebase.model.KBTemplateSearchDisplay getKBTemplateSearchDisplay(
    [javac]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] com.liferay.knowledgebase.model.KBTemplateSearchDisplay cannot be resolved to a type
    [javac] ----------
    [javac] 10\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBTemplateServiceClp.java (at line 389)
    [javac]     return (com.liferay.knowledgebase.model.KBTemplateSearchDisplay)ClpSerializer.translateOutput(returnObj);
    [javac]             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] com.liferay.knowledgebase.model.KBTemplateSearchDisplay cannot be resolved to a type
    [javac] ----------
    [javac] ----------
    [javac] 11\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBTemplateServiceUtil.java (at line 108)
    [javac]     public static com.liferay.knowledgebase.model.KBTemplateSearchDisplay getKBTemplateSearchDisplay(
    [javac]                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] com.liferay.knowledgebase.model.KBTemplateSearchDisplay cannot be resolved to a type
    [javac] ----------
    [javac] 12\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBTemplateServiceUtil.java (at line 116)
    [javac]     .getKBTemplateSearchDisplay(groupId, title, content,
    [javac]      ^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The method getKBTemplateSearchDisplay(long, String, String, Date, Date, boolean, int[], int, int, OrderByComparator) from the type KBTemplateService refers to the missing type KBTemplateSearchDisplay
    [javac] ----------
    [javac] ----------
    [javac] 13\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBTemplateServiceWrapper.java (at line 101)
    [javac]     public com.liferay.knowledgebase.model.KBTemplateSearchDisplay getKBTemplateSearchDisplay(
    [javac]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] com.liferay.knowledgebase.model.KBTemplateSearchDisplay cannot be resolved to a type
    [javac] ----------
    [javac] 14\. ERROR in M:\My-Documents\programming\java\lib\Liferay\plugins\portlets\knowledge-base-portlet\docroot\WEB-INF\service\com\liferay\knowledgebase\service\KBTemplateServiceWrapper.java (at line 108)
    [javac]     return _kbTemplateService.getKBTemplateSearchDisplay(groupId, title,
    [javac]                               ^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The method getKBTemplateSearchDisplay(long, String, String, Date, Date, boolean, int[], int, int, OrderByComparator) from the type KBTemplateService refers to the missing type KBTemplateSearchDisplay
    [javac] ----------
    [javac] 14 problems (14 errors) 
```

build.fxbird.properties 如下，fxbird 是操作系统登录用户。

```
app.server.dir = M:\\My-Documents\\programming\\java\\lib\\Liferay\\bundle\\liferay-portal-6.1.1-ce-ga2\\tomcat-7.0.27
java.compiler = modern
app.server.lib.global.dir = M:\\My-Documents\\programming\\java\\lib\\Liferay\\bundle\\liferay-portal-6.1.1-ce-ga2\\tomcat-7.0.27\\lib\\ext
app.server.type = tomcat
app.server.deploy.dir = M:\\My-Documents\\programming\\java\\lib\\Liferay\\bundle\\liferay-portal-6.1.1-ce-ga2\\tomcat-7.0.27\\webapps
app.server.portal.dir = M:\\My-Documents\\programming\\java\\lib\\Liferay\\bundle\\liferay-portal-6.1.1-ce-ga2\\tomcat-7.0.27\\webapps\\ROOT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:18:04.100

我认为服务文件夹有问题。请删除服务文件夹路径（WEB-INF\service）和类文件夹路径（WEB-INF\classes）并再次运行构建服务。

# mysql - SQL 从一个表更新到另一个表，没有公共数据

> ID：14906356
> 
> 赞同：0
> 
> 时间：2013-02-16T02:39:41.290
> 
> 标签：mysql, oracle-sqldeveloper

在我的**客户**表中，有一行名为 *inactive_status*，它始终设置为“活动”。除非 *is_paid*（位于**Billing_Info**表中）设置为 0。我需要使用 Update 命令，但无法弄清楚。这是我到目前为止所拥有的：

```
UPDATE Customer
SET inactive_status = 'INACTIVE'
WHERE
(SELECT is_paid
FROM Billing_Info
WHERE billing_info.is_paid = 0); 
```

DDL：

```
CREATE TABLE billing_info ( 
    billing_info_id INT, 
    bill_day_id INT, 
    is_past_due NUMBER(1,0) NOT NULL, 
    date_last_paid DATE, 
    is_paid_this_month NUMBER(1,0) NOT NULL, 
    paid_amount DECIMAL(6,2) NOT NULL, 
    bill_amount DECIMAL(6,2) NOT NULL, 
    CONSTRAINT billing_info_id_pk PRIMARY KEY(billing_info_id) );

CREATE TABLE customer ( 
    customer_id INT, 
    join_date DATE NOT NULL, 
    billing_info_id INT NOT NULL, 
    inactive_status VARCHAR2(25), 
    contact_info_id INT NOT NULL, 
    CONSTRAINT customer_id_pk PRIMARY KEY (customer_id) ); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:47:20.403

唯一将 a 连接`customer`到 a 的`billing_info`是`billing_info_id`。

如果您的 RDBMS 是 Oracle，您的`UPDATE`查询可能如下所示

```
UPDATE (SELECT c.inactive_status 
          FROM customer c INNER JOIN
               billing_info b ON c.billing_info_id = b.billing_info_id
         WHERE b.is_paid_this_month = 0)
   SET inactive_status = 'INACTIVE'; 
```

那是假设关系是 1 比 1，这很难从你的 ddl 中确定。

这是[sqlfiddle](http://sqlfiddle.com/#!4/de0d3/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:40:51.750

您应该调查触发器的使用。设置触发器，以便特定客户的`inactive_status`更新到`'INACTIVE'`他们的`is_paid`标志更改为 0 时将是完美的解决方案。

# ios - 双引号在 Xcode 的搜索路径中表示什么？

> ID：14906361
> 
> 赞同：3
> 
> 时间：2013-02-16T02:40:12.963
> 
> 标签：ios, xcode, jenkins, search-path

今晚我们遇到了一个烦人的问题，它只出现在 Xcode 的命令行构建中，而不是来自 Xcode 的 GUI。

当使用 Xcode 的 GUI 和 $PROJROOT 的递归用户标头搜索路径从机器构建时，没有双引号，我们没有遇到任何问题。但是，当使用 Jenkins 构建时，它使用 Xcode 的命令行构建功能，会引发无法找到标头的错误。

经过一个小时的探索，有人决定尝试将递归 $PROJROOT 用双引号 ("$PROJROOT") 括起来。一旦发生这种情况，项目的 Jenkins 命令行构建终于成功了。

所以我们并不完全理解将搜索路径用引号括起来或省略引号的后果。

任何人都可以阐明究竟是什么导致了这个问题？什么双引号从命令行与 GUI 对编译器意味着什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T02:46:12.083

您的构建机器上的路径很可能在其中有一个空间（例如“ `Macintosh HD/My Project/`”）。当从命令行调用工具时，这往往会使事情变得混乱，因为命令行解析器不知道空格字符是路径的一部分，或者它是否从另一个命令行参数开始，所以这就是为什么包装总是好的双引号内的路径。

另一种选择是使用带空格的反斜杠（例如`Macintosh\ HD/My\ Project/`），但这有点难以跟踪并且更难观察。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:40:16.727

当某些工具通过 shell 执行另一个二进制文件时，可能是 Bash 分词。

几乎没有用的手册页文档：
[http ://www.gnu.org/software/bash/manual/html_node/Word-Splitting.html#Word-Splitting](http://www.gnu.org/software/bash/manual/html_node/Word-Splitting.html#Word-Splitting)

分词详细说明：http:
[//mywiki.wooledge.org/WordSplitting](http://mywiki.wooledge.org/WordSplitting)

我没有足够的声誉将最后 3 个作为链接发布。

处理文件名时的常见陷阱（此列表中的#1）：
mywiki.wooledge.org/BashPitfalls

比较 Posix system()...
stackoverflow.com/questions/5666962/will-posix-system3-call-to-an-asynchronous-shell-command-return-immediately

到 NSTask（它构建一个参数数组，因此没有分词）...
stackoverflow.com/questions/412562/execute-a-terminal-command-from-a-cocoa-app

# facebook - 如何在使用应用程序的用户之间获得相互的 Facebook 点赞

> ID：14906366
> 
> 赞同：6
> 
> 时间：2013-02-16T02:41:08.733
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-fql

假设两个用户正在使用一个应用程序并已授予该应用程序适当的权限以检索他们的喜欢。是否可以使用 FQL 或图形 api 来找到它们的共同点？类似于如何使用图形 api 在两个用户之间找到共同朋友。当我浏览文档时，我认为不存在这样的 api 调用，但我可能错过了它。我想知道这是否可行，如果可以，如何实现。我真的很讨厌 SQL，刚开始使用 FQL，可以从单个用户那里获得所有喜欢，但是你如何只获得两个用户之间的共同喜欢（如果可能的话）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:37:59.667

这可以通过 FQL 来实现。

1）选择用户1的页面

```
SELECT page_id FROM page_fan WHERE uid = $user1 
```

2) 选择用户 2 的页面，并使用上一个查询中的 page_id 作为另一个过滤器（又名 - 子查询）

这为您提供了完成此操作的最终完整查询：

```
SELECT page_id FROM page_fan WHERE uid= $user2 AND page_id IN (SELECT page_id FROM page_fan WHERE uid = $user1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T03:27:48.183

FQL 不再可用。您可以使用 facebook 的图形 API 来完成。像这样的东西：

```
graph.setAccessToken(user.facebookToken);
  graph.get("/"+targetFacebookId+"?fields=context", null,  function(err, result) {
    if (err) {
      notDoStuff(err);
    } else {
      doStuff(result);
    }
  }); 
```

# c# - 如何从窗口句柄获取 Windows 的“开始”图标

> ID：14906368
> 
> 赞同：0
> 
> 时间：2013-02-16T02:41:35.437
> 
> 标签：c#, windows, icons

我使用以下建议根据各自的窗口句柄获取各种正在运行的应用程序的图标：

[使用 WinAPI 查找应用程序的图标](http://codeutopia.net/blog/2007/12/18/find-an-applications-icon-with-winapi/)

不幸的是，它没有获得属于“开始”按钮的进程的图标。如何获得“开始”按钮的图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:53:18.050

您可以尝试打开 %systemroot%/system32/shell32 （打开 Visual Studio，打开文件，转到 c:/windows/system32/shell32，然后它列出一个文件树，检查图标，然后找到您的图标。虽然它没有给个名字，但那里有很多图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:57:54.923

这实际上取决于 Windows 版本。大多数资源都隐藏在主题程序集中。Explorer.exe“拥有”任务栏和开始按钮，但它不在其中获取它的位置。

# php - 如何从动态文本字段中获取/验证总值？

> ID：14906369
> 
> 赞同：-3
> 
> 时间：2013-02-16T02:41:39.967
> 
> 标签：php, javascript, jquery

我有一个动态文本字段，其 HTML 标记如下所示：

```
<INPUT type="text" name="txt[]" id ="txt[]"/> 
```

我将如何获得总动态值并使用 Javascript 和 PHP 对其进行验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:43:32.570

当您检查值以验证它时，必须有一些触发器，但是您可以使用 jQuery 来获取值`.val`

```
$("form").on('submit', function (e) {
    if ($(this).find('[name^=txt]').val() == '') {
        e.preventDefault();
        alert('empty');
    }
}) 
```

# java - ANDROID 没有 R.java

> ID：14906372
> 
> 赞同：0
> 
> 时间：2013-02-16T02:42:01.420
> 
> 标签：java, android

有点奇怪...我的印象是 R.java 是由 Android 平台 (ADT) 自动创建的。

我的问题如下：

当我为 Windows 启动 Eclipse Mobile Juno 32 位并转到我前一天工作的项目时，我发现我有一个空的 gen 文件夹（没有 R.java 等）。

我应该怎么做才能防止这种情况发生？真的很烦人...

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:46:35.927

stackoverflow 上有很多帖子，提供了关于此的建议。但是，我可以根据我的经验说，只要 R.java 没有形成，它们可能是某个文件中的错误。如果没有，那么我只需清理打开的项目并让它重新编译。清理项目对我来说大部分时间都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:08:33.340

如果您的资源/布局中有错误，ADT 将不会生成此文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T03:39:32.923

您可以尝试通过单击项目 > 清理来清理项目。这将清理您的项目。

确保您也选择了“干净”菜单下方的“自动构建”选项。这样，每次您清理项目时，它都会自动为您构建项目。

如果构建遇到错误，请发布。

还请通过检查项目属性确保您使用的是适当的 Java 编译器和 Android 版本。

# wcf - 如何将每个 WCF 调用包装在 try-catch 块中

> ID：14906373
> 
> 赞同：3
> 
> 时间：2013-02-16T02:42:21.397
> 
> 标签：wcf, delegates, try-catch

我有一个网站，我需要对 WCF 服务进行异步调用。我想将每个调用包装在一个 try-catch 块中，以便处理 TimeoutExceptions 和 CommunicationExceptions。

但是，我不想每次调用我的服务时都复制粘贴完全相同的 try-catch 块。有什么方法可以使用委托只编写一次 try-catch 块吗？我还想捕获异常消息。

我想这样称呼它：

```
// This method returns void
TryCatchHelper(x => x.WCFMethod1(param1, param2));

// This method has a return value but no params
var returnValue = TryCatchHelper(x => x.WCFMethod2()); 
```

编辑：这是我的代码现在的样子：

```
User GetUser(int Id)
{
    User returnUser = null;

    try
    {
        // Open WCF channel, etc.
        returnUser = myWCFClient.GetUser(Id);
    }
    catch (TimeoutException exception)
    {
        Log(exception.Message);
        // Abort WCF factory
    }
    catch (CommunicationException exception)
    {
        Log(exception.Message);
        // Abort WCF factory
    } 

    return returnUser;
} 
```

我不想在我在存储库中设置的每个方法中都使用相同的 try-catch 块。我尝试做这样的事情，但它在参数上给了我一个错误。我知道我没有正确使用它们，但我需要一种方法来定义一个可以代表我想要进行的所有 WCF 方法调用的委托：

```
delegate object WCFAction(params object[] parameters);

object DoWCFAction(WCFAction action, params object[] parameters)
{
    object returnValue = null;

    try
    {
        // Open WCF channel, etc.
        returnValue = action(parameters);
    }
    catch (TimeoutException exception)
    {
        Log(exception.Message);
        // Abort WCF factory
    }
    catch (CommunicationException exception)
    {
        Log(exception.Message);
        // Abort WCF factory
    } 

    return returnValue;
}

void MainMethod()
{
    // Compiler error
    User user = DoWCFAction(GetUser, 1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:11:28.230

你可以设置一个这样的类。抱歉，这里有两个异常处理程序，没有一个：

```
class Logger
{
    // handle wcf calls that return void
    static public void ExecWithLog(Action action)
    {
        try
        {
            action();
        }
        catch(Exception e)
        {
            Log(e);
            throw;
        }
    }

    // handle wcf calls that return a value
    static public T ExecWithLog<T>(Func<T> action)
    {
        T result = default(T);
        try
        {
            result = action();
        }
        catch (Exception e)
        {
            Log(e);
            throw;
        }

        return result;
    }

    static void Log(Exception e)
    {
        System.Diagnostics.Debug.WriteLine(e.ToString());
    }

} 
```

然后，调用你的方法：

```
static void Main(string[] args)
{
    Logger.ExecWithLog(() => DoSomethingReturnVoid());
    Logger.ExecWithLog(() => DoSomethingReturnVoidParamInt(5));
    int a = Logger.ExecWithLog<int>(() => DoSomethingReturnInt());
    string b = Logger.ExecWithLog<string>(() => DoSomethingReturnStringParamInt(5));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-10T04:40:29.403

使用 WCF 执行此操作的正确方法是使用扩展。看看这些关于 WCF 扩展的文章：

*   [https://msdn.microsoft.com/en-us/magazine/cc163302.aspx](https://msdn.microsoft.com/en-us/magazine/cc163302.aspx)
*   [http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/17/wcf-extensibility-ioperationinvoker.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/17/wcf-extensibility-ioperationinvoker.aspx)

# c - 如何将此 C 转换为 MIPS？

> ID：14906380
> 
> 赞同：0
> 
> 时间：2013-02-16T02:43:16.280
> 
> 标签：c, mips, palindrome

```
int Reverse(int num)
{
    int remainder = 0;
    int rev = 0;
    while ( num != 0)
    {
        remainder = num % 10;
        num = num /10;
        rev = rev * 10 + remainder;
    }
    return rev;
}

void Palindrome()
{
    int num;
        cin >> num;
        Reverse(num);
        cout << num;
        for (int i = 0; i < 10; i++)
        {
            if ( num != Reverse(num))
            {
                num = num + Reverse(num);
                cout << " " << num;
            }
            if ( num == Reverse(num))
            {
                 cout << " ";
            }
        }
 } 
```

我最大的问题是循环。实际数学并不难，但我不知道如何设置循环，尤其是 for 循环内的 if 循环。

我写这个是为了接受一个整数，然后打印出最多十次，不同的整数将整数向后添加到自身，反复检查它是否是回文。

主程序以及 rev 函数已经用 MIPS 编写。我只是不明白我将如何进行回文程序。

任何提示将不胜感激！

我试过这个：

首先，我执行将持续 10 次的循环。

然后我在回文过程中调用 rev 函数

```
jal rev                     # call rev function

la $a0, spaces              # display the number
bne $a0, $v0, then          # if num isnt equal to rev
add $a0, $a0, $t1           # num = num + reverse(num)
la spaces, $a0              # display the added number each time
beq $a0, $v0, then          # if num IS equal to rev

// display spaces instead?? 
```

我知道这一定是非常错误的，但这是我第一次这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:59:17.457

我没有更改 rev 函数，但我必须更改回文程序才能将 C 编译为 MIPS。我无法编译`cin`或`cout`（不是那些 C++ 吗？）所以`cin`被`cout`注释掉了。

```
int Reverse(int num)
{
    int remainder = 0;
    int rev = 0;
    while ( num != 0)
    {
        remainder = num % 10;
        num = num /10;
        rev = rev * 10 + remainder;
    }
    return rev;
}

void Palindrome()
{
    int num = 0;
    int i; 
        //cin >> num;
    Reverse(num);
        //cout << num;

    for (i = 0; i < 10; i++)
        {
            if ( num != Reverse(num))
            {
                num = num + Reverse(num);
                //cout << " " << num;
            }
            if ( num == Reverse(num))
            {
                 //cout << " ";
            }
        }
 }

int main ( int argc , char * argv [] )
{
   return 0;
}

 # -G value = 8, Cpu = 3000, ISA = 1
 # GNU C version cygnus-2.7.2-970404 (mips-mips-ecoff) compiled by GNU C version cygnus-2.7.2-970404.
 # options passed:  -msoft-float
 # options enabled:  -fpeephole -ffunction-cse -fkeep-static-consts
 # -fpcc-struct-return -fcommon -fverbose-asm -fgnu-linker -msoft-float
 # -meb -mcpu=3000

gcc2_compiled.:
__gnu_compiled_c:
    .text
    .align  2
    .globl  Reverse
    .ent    Reverse
Reverse:
    .frame  $fp,16,$31      # vars= 8, regs= 1/0, args= 0, extra= 0
    .mask   0x40000000,-8
    .fmask  0x00000000,0
    subu    $sp,$sp,16
    sw  $fp,8($sp)
    move    $fp,$sp
    sw  $4,16($fp)
    sw  $0,0($fp)
    sw  $0,4($fp)
$L2:
    lw  $2,16($fp)
    bne $2,$0,$L4
    j   $L3
$L4:
    lw  $2,16($fp)
    li  $3,1717960704           # 0x66660000
    ori $3,$3,0x6667
    mult    $2,$3
    mfhi    $6
    sra $3,$6,2
    sra $4,$2,31
    subu    $3,$3,$4
    move    $5,$3
    sll $4,$5,2
    addu    $4,$4,$3
    sll $3,$4,1
    subu    $2,$2,$3
    sw  $2,0($fp)
    lw  $2,16($fp)
    li  $3,1717960704           # 0x66660000
    ori $3,$3,0x6667
    mult    $2,$3
    mfhi    $6
    sra $3,$6,2
    sra $4,$2,31
    subu    $2,$3,$4
    sw  $2,16($fp)
    lw  $2,4($fp)
    move    $4,$2
    sll $3,$4,2
    addu    $3,$3,$2
    sll $2,$3,1
    lw  $3,0($fp)
    addu    $2,$2,$3
    sw  $2,4($fp)
    j   $L2
$L3:
    lw  $3,4($fp)
    move    $2,$3
    j   $L1
$L1:
    move    $sp,$fp         # sp not trusted here
    lw  $fp,8($sp)
    addu    $sp,$sp,16
    j   $31
    .end    Reverse
    .align  2
    .globl  Palindrome
    .ent    Palindrome
Palindrome:
    .frame  $fp,32,$31      # vars= 8, regs= 2/0, args= 16, extra= 0
    .mask   0xc0000000,-4
    .fmask  0x00000000,0
    subu    $sp,$sp,32
    sw  $31,28($sp)
    sw  $fp,24($sp)
    move    $fp,$sp
    sw  $0,16($fp)
    lw  $4,16($fp)
    jal Reverse
    sw  $0,20($fp)
$L6:
    lw  $2,20($fp)
    slt $3,$2,10
    bne $3,$0,$L9
    j   $L7
$L9:
    lw  $4,16($fp)
    jal Reverse
    lw  $3,16($fp)
    beq $3,$2,$L10
    lw  $4,16($fp)
    jal Reverse
    lw  $3,16($fp)
    addu    $2,$3,$2
    sw  $2,16($fp)
$L10:
    lw  $4,16($fp)
    jal Reverse
    lw  $3,16($fp)
    bne $3,$2,$L8
$L11:
$L8:
    lw  $2,20($fp)
    addu    $3,$2,1
    sw  $3,20($fp)
    j   $L6
$L7:
$L5:
    move    $sp,$fp         # sp not trusted here
    lw  $31,28($sp)
    lw  $fp,24($sp)
    addu    $sp,$sp,32
    j   $31
    .end    Palindrome
    .align  2
    .globl  main
    .ent    main
main:
    .frame  $fp,24,$31      # vars= 0, regs= 2/0, args= 16, extra= 0
    .mask   0xc0000000,-4
    .fmask  0x00000000,0
    subu    $sp,$sp,24
    sw  $31,20($sp)
    sw  $fp,16($sp)
    move    $fp,$sp
    sw  $4,24($fp)
    sw  $5,28($fp)
    jal __main
    move    $2,$0
    j   $L12
$L12:
    move    $sp,$fp         # sp not trusted here
    lw  $31,20($sp)
    lw  $fp,16($sp)
    addu    $sp,$sp,24
    j   $31
    .end    main 
```

# integration - 与 Trizetto Facets 集成的最佳方法

> ID：14906390
> 
> 赞同：0
> 
> 时间：2013-02-16T02:45:39.923
> 
> 标签：integration, facets

我有一个即将进行的项目，需要与 Trizetto 的 Facets 解决方案集成。如果有人碰巧在这方面有任何经验并可以帮助解决以下问题，我们将不胜感激！

- 一般有哪些可用选项？是否有 BizTalk 适配器？他们是否提供 API，直接针对数据库等？

- 如果有人有直接针对数据库的经验，您能分享一下您可能遇到的挑战吗？例如，由于应用程序被绕过，是否有很多业务规则或其他需要考虑在内。参照完整性是由数据库还是应用程序处理？

我花了相当多的时间搜索，但很难获得信息。我遇到了他们称为 FXI 的集成产品，但找不到任何细节。除此之外，来自 MSDN Biztalk 论坛的一些代码转储指向 Trizetto 引用，这导致我开始朝那个方向搜索。我看到 BizTalk 有用于 HIPAA 解决方案的加速器和适配器，但没有用于 Facets 的特定 LOB 适配器......这总结了我能找到的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-20T23:00:35.620

Facets eXtended Interface 或 FXI 也是 TriZetto 产品。FXI 包括对核心方面应用程序的大量扩展。一些扩展是 THG 或 TriZetto HIPAA 网关、分析规则引擎 (ARE)、TriZetto 报告服务器 (TRS)、TriZetto 字母生成器 (TLG) CareAdvance Enterprise (CAE) 和 Clincal CareAdvance (CCA)。THG 存储库允许您获取入站 HIPAA 投诉 X12 EDI 文件 (834) 注册、(276/277) 资格、(835) 付款、(837P) 索赔文件，并将它们映射到 Facets 关键字文件格式。THG 还将与 Informatica 和 Cognos 交互，因此您也可以将来自组、供应商和交易所的非标准文件映射到 Facets 关键字文件格式。借助 FXI，您还可以访问供应商、成员和业务合作伙伴的基于 Web 的 API。

FXI 可作为一套完整的 ad hoc 解决方案提供，允许实体仅购买他们需要的组件。FXI 还为您的组织提供扩展的核心数据库表，其中将包含与您的组织相关的专有信息，用于计划建模、服务代码脚本和文件转换映射。

我工作的组织使用 Facets Core、FXI Complete，为我们提供了对 CAE、TRS、ARE、TRG、THG 和 eFacets/iFacets 基于 Web 的 API 套件的访问权限。我曾在众多健康保险组织中开发过从 Erisco 1.0 到最新 5.2 版本的各个版本的 Facets。我发现 THG 是将 non-facets 和 HIPAA Complaint X12 EDI 数据映射到 Facets Keyword 文件格式以供批量使用的最快解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:11:36.830

你可能想看看 Edifecs。他们提供了 EDI 集成软件，许多客户使用该软件与 Facets 集成。集成是使用与 Facet 关键字格式之间的转换来完成的。

# android - 使用 Maps API v2 信息窗口显示协调上下文操作栏

> ID：14906393
> 
> 赞同：0
> 
> 时间：2013-02-16T02:46:09.583
> 
> 标签：android, infowindow, contextual-action-bar

我想将上下文操作栏菜单的显示与来自 Google Maps API v2 的信息窗口同步。我遇到的主要问题是似乎没有办法可靠地监视信息窗口的状态，并且两个 UI 部分很容易不同步。

到目前为止，这大致是我所拥有的：

```
private ActionMode mActionMode;
private ActionMode.Callback mActionModeCallback 
  = new ActionMode.Callback() { ... };

public boolean onMarkerClick(Marker marker) {
    if (mActionMode != null) {
        // This case should occur if the user taps an already selected marker.
        mActionMode.finish();
        return false;
    }

    // Start the contextual actionbar using the ActionMode.Callback defined above
    mActionMode = this.startActionMode(mActionModeCallback);
    return false;
}

public void onMapClick(LatLng point) {
    // Clicking the map normally only closes any info windows.
    // We must close the contextual action bar menu as well.
    if (mActionMode != null)
        mActionMode.finish();
} 
```

主要问题似乎是在显示信息窗口时单击标记本身时不会调用它`onMarkerClick`；`onMapClick`这种交互仍然足以关闭信息窗口......

如果有人有更可靠的方法来跟踪信息窗口的状态或监控那些丢失的点击事件，我会很高兴听到！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:32:19.380

gmaps api v2 仍然缺少许多存在于 flash 和 javascript api 中的组件，所以在快速浏览后我不确定他们是否有您正在寻找的合适的侦听器。

最好的办法是在此处添加功能增强或错误报告：

[http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype%3AAndroid2](http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype%3AAndroid2)

# algorithm - 压缩 2 位数字并保存 1 位使用压缩方案

> ID：14906396
> 
> 赞同：0
> 
> 时间：2013-02-16T02:46:31.150
> 
> 标签：algorithm, math, compression, proof

我想为 2 位数字创建一个压缩方案，以便它将任何序列的大小减少至少一位。我如何证明这是不可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T02:52:03.297

有 4 个可能的两位数和 3 个可能的较短位序列（空位序列以及序列 0 和 1）。根据[鸽巢原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)，这意味着从两位序列到较短序列的任何映射都必须至少将两个序列压缩为相同的较短序列。结果，当您想解压缩这个较短的序列时，您将无法这样做，因为您不知道它来自哪个原始两位序列。

这可以概括为表明 n 位序列不能无损压缩为长度小于 n 的位序列。 [这个较早的答案](https://stackoverflow.com/a/6526266/501557)详细说明了为什么会这样。

希望这可以帮助！

# scala - scala 是否有类似于 jython 的独立 jar 的东西？

> ID：14906398
> 
> 赞同：4
> 
> 时间：2013-02-16T02:46:40.150
> 
> 标签：scala, jython

使用 jython 的独立 jar，您可以：

```
java -jar jython-standalone-2.5.3.jar 
```

repl 开始。

我想用 scala 做到这一点：

```
java -jar scala-standalone.jar 
```

这会让我进入 scala repl。

让我换个方式问这个问题。如何使用 java 调用 scala repl。

```
java -cp <jars> <class-with-main-method> 
```

特别是，我不想使用 scala cli，甚至不想安装它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:32:06.800

如有必要，您可以自己建造一个。最近有[一篇博客文章](http://www.michaelpollmeier.com/create-your-custom-scala-repl/)向您展示了如何创建 REPL。如果您使用 sbt 构建该代码并放入[sbt-assembly](https://github.com/sbt/sbt-assembly)插件，您应该通过`sbt assembly`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T07:33:14.327

您绝对可以通过 来完成`java -jar`，但我猜它不会像 jython 那样容易。例如，如果您在`scala.bat`scala 的标准安装中查看（在 Windows 上），您会看到它正在使用以下命令的某些变体：

```
"java" -Xmx256M -Xms32M -Dscala.home="C:\PROGRA~2\scala\bin\.." -Denv.emacs=""
-Dscala.usejavacp=true  -cp "C:\PROGRA~2\scala\bin\..\lib\jline.jar;
C:\PROGRA~2\scala\bin\..\lib\scala-actors.jar;
C:\PROGRA~2\scala\bin\..\lib\scala-compiler.jar;
C:\PROGRA~2\scala\bin\..\lib\scala-library.jar;
C:\PROGRA~2\scala\bin\..\lib\scala-partest.jar;
C:\PROGRA~2\scala\bin\..\lib\scala-reflect.jar;
C:\PROGRA~2\scala\bin\..\lib\scala-swing.jar;
C:\PROGRA~2\scala\bin\..\lib\scalacheck.jar;
C:\PROGRA~2\scala\bin\..\lib\scalap.jar" scala.tools.nsc.MainGenericRunner 
```

当然，所有这些都在一行中。我`cd`进入 scala 安装目录，然后进入`bin`文件夹并直接运行此命令。它给了我一个scala repl。

我猜你可能会跳过一些罐子（摇摆，演员等），将其余部分组合成一个罐子并摆脱一些命令行参数，然后使用`java -jar myscala.jar`

PS：如果您尝试使用 android 做某事，请注意它不会起作用。因为我之前尝试过：[Android 应用程序中的 Scala REPL](https://stackoverflow.com/questions/14102702/scala-repl-in-an-android-app)

:D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T02:57:13.397

你的意思是像scala脚本？

[http://www.scala-lang.org/docu/files/tools/scala.html](http://www.scala-lang.org/docu/files/tools/scala.html)

# ruby-on-rails - Rails 使用带有 Nginx 和 Unicorn 的 Websockets？

> ID：14906400
> 
> 赞同：7
> 
> 时间：2013-02-16T02:47:00.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, websocket, unicorn

我正在考虑使用 Rails 实现国际象棋（需要 websockets），并在生产部署中使用 Nginx 作为一组 Unicorn 进程的反向代理。

在思考如何完成这项工作时，我提出了以下问题：

据我了解，websockets 是一个持久连接。由于一切都通过反向代理 Nginx，Unicorn 工作进程究竟如何维护与客户端浏览器的 websocket 连接？Nginx 是否会维护每个浏览器 websocket 连接到哪个 Unicorn 进程的状态并充当一种中介？在 Unicorn 进程中保持持久的 websocket 连接会阻塞整个工作进程吗？

有没有推荐的方法来使用 Rails 实现国际象棋（使用 websockets）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T08:12:42.590

将 Unicorn 的同步处理与使用 Nginx 的异步传递连接起来意味着 Nginx 方面的一些逻辑，这至少对我来说似乎很尴尬。最多 - 不可能。

有一个关于 Private Pub gem 的 Railscast 使用了 Thin webserver。它更适合这个任务：它是异步的，它能够使用基于事件的 IO 处理许多并发请求。所以我建议你用 Thin 替换 Unicorn 或并排安装 Thin。

Puma 网络服务器也可能是一种选择，但是，我无法提供更多信息。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-08-06T18:57:16.270

nginx 不会做 websockets。你确定你不能用 AJAX 做到这一点吗？如果你真的需要推送功能，你可以尝试围绕 Comet 方法构建的东西：[http://en.wikipedia.org/wiki/Comet_(programming)](http://en.wikipedia.org/wiki/Comet_(programming))

Faye 是在 Rails 中实现彗星的一个很好的宝石：http: [//faye.jcoglan.com/](http://faye.jcoglan.com/)

# node.js - 使用 -nosalt 选项进行 Node.js 加密

> ID：14906401
> 
> 赞同：1
> 
> 时间：2013-02-16T02:47:32.133
> 
> 标签：node.js, encryption, node-crypto

来自这篇文章：[nodejs 加密解密有什么问题？](https://stackoverflow.com/questions/12219499/whats-wrong-with-nodejs-crypto-decipher/12378676#12378676)我发现要使我的代码正常工作，我需要使用 openSSL -nosalt 选项加密我的数据，因为 node.js 加密库的工作方式。由于我使用 Node.js 加密库进行加密，我需要知道如何使用 -nosalt 选项加密数据。我也在使用 openSSL`aes256`算法。

谢谢，
阿里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:19:15.437

链接的问题有如何解密：

```
var crypto=require('crypto')
var cipher=crypto.createDecipher('aes-256-cbc', "password")
var enc = cipher.update("Mh5yxIyZH+fSMTkSgkLa5w==", 'base64', 'utf8')
enc += cipher.final('utf8') 
```

加密实际上正好相反。

```
var crypto=require('crypto')
var cipher=crypto.createCipher('aes-256-cbc', "password")
var enc = cipher.update("owlstead\n", 'binary', 'base64')
enc += cipher.final('base64') 
```

# android - 将 Android-RSS 作为共享库安装到 Eclipse 项目中

> ID：14906403
> 
> 赞同：0
> 
> 时间：2013-02-16T02:47:50.610
> 
> 标签：android, eclipse, rss-reader

所以我下载了 [https://github.com/ahorn/android-rss](https://github.com/ahorn/android-rss)

然后我在我的项目树中添加了一个文件夹。在“构建路径”中，我使用了“链接源”。

但是，它显示了 100 多个错误。

我对 Eclipse、Android 等还是很陌生，所以我可能遗漏了什么？它无法解析类型。我怀疑这对我来说将是一个普遍的问题，直到我学习如何使用位于它们自己目录中的 .java 源代码库。

还有其他人使用这个 Android-rss 库并将其“物理”放置在项目目录之外吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T12:55:50.280

我不是专家，但我认为您需要使用链接路径选项卡中的“添加外部 Jar”按钮。这将包括作为引用库的 Jar 文件。也去订购和出口并勾选图书馆。

# database - 如何使用 IANA 时区数据库？

> ID：14906406
> 
> 赞同：2
> 
> 时间：2013-02-16T02:48:22.677
> 
> 标签：database

[http://www.iana.org/time-zones](http://www.iana.org/time-zones)

我想查询这个。我真的，真的……我正在使用 PHP，我开始尝试用数组从时区数据中制作关系的东西……我真的很想查询它，但我不知道如何打开它。（哈哈？）

或此处列出的数据库：[http](http://www.php.net/manual/en/timezones.php) ://www.php.net/manual/en/timezones.php (PECL)

这不适用于生产用途。这是为了我自己的理智。我会继续我的阵列的事情......但是......

我真的很想知道每个城市是否是具有单独规则的单独时区。我不关心过去——只关心现在。起初我认为不，当然不是，其中一些共享时区，它们很好，每个时区列出了多个城市。但！DST 规则可能不同。谁知道。

我怎么打开这个东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T14:57:14.750

PHP 内置了时区数据库，只需使用[DateTime](http://php.net/manual/en/class.datetime.php)和[DateTimeZone](http://php.net/manual/en/class.datetimezone.php)类。

例子：

```
$utc_date = DateTime::createFromFormat(
                'Y-m-d G:i', 
                '2011-04-27 02:45', 
                new DateTimeZone('UTC')
);

$nyc_date = $utc_date;
$nyc_date->setTimeZone(new DateTimeZone('America/New_York'));

echo $nyc_date->format('Y-m-d g:i A'); // output: 2011-04-26 10:45 PM 
```

[来源](https://stackoverflow.com/a/5806875)

# wordpress - 尝试的 Web 代理上的重定向循环

> ID：14906411
> 
> 赞同：1
> 
> 时间：2013-02-16T02:49:47.443
> 
> 标签：wordpress, apache, mod-rewrite, redirect, mod-proxy

`/var/www/html`我有一个在 Web 根目录 ( )中运行 WordPress 的 Apache 服务器。在我的 access_log 中，我看到了许多表单条目：

```
98.209.16.114 - - [15/Feb/2013:21:19:51 -0500] "GET http://www.twitter.com HTTP/1.1" 301 - "-" "curl/7.28.1"
98.209.16.114 - - [15/Feb/2013:21:19:51 -0500] "GET http://www.twitter.comhttp/www.twitter.com HTTP/1.1" 301 - "-" "curl/7.28.1"
98.209.16.114 - - [15/Feb/2013:21:19:51 -0500] "GET http://www.twitter.comhttphttp/www.twitter.comhttp/www.twitter.com HTTP/1.1" 301 - "-" "curl/7.28.1"
98.209.16.114 - - [15/Feb/2013:21:19:52 -0500] "GET http://www.twitter.comhttphttphttp/www.twitter.comhttphttp/www.twitter.comhttp/www.twitter.com HTTP/1.1" 301 - "-" "curl/7.28.1" 
```

where`www.twitter.com`可以替换为我自己之外的任意数量的奇数域。

编辑：复制的行包括 curl 因为我正在从我自己的命令行测试这种现象。

`httpd.conf`我文件中的相关行是：

```
NameVirtualHost *:80

<VirtualHost *:80>
  DocumentRoot /var/www/html
  ServerName www.mydomain.com
  <Directory /var/www/html>
    AllowOverride All
  </Directory>
</VirtualHost>

<VirtualHost *:80>
  ServerName mydomain.com
  RewriteEngine On
  RewriteRule ^/(.*) http://www.mydomain.com/$1 [L,R=301]
</VirtualHost> 
```

`.htaccess`WordPress 目录中的文件如下所示：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

这种情况每天发生数十次。我有几个问题是：

*   我应该担心这么多代理尝试吗？我已经关闭了 mod_proxy 并且当 http 请求循环时，https 请求似乎返回`301`或者`400`
*   有什么我应该担心的性能损失吗？
*   我该如何解决该死的事情？

让我知道您还需要什么其他信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:14:57.600

您需要由 apache 为 wordpress 加载的唯一模块如下......这不包括您的 php 模块，我将在之后解释一下：

```
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule expires_module modules/mod_expires.so
LoadModule deflate_module modules/mod_deflate.so
LoadModule env_module modules/mod_env.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule mime_module modules/mod_mime.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule dir_module modules/mod_dir.so
LoadModule alias_module modules/mod_alias.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule headers_module modules/mod_headers.so 
```

根据您运行的是 php fcgi 还是 php mod_php (prefork)，您将包括以下内容之一：

```
#---- For FPM of PHP Enable both below and disable php5_module
LoadModule fastcgi_module modules/mod_fastcgi.so
LoadModule actions_module modules/mod_actions.so
#---- For standard php5 module enable below and disable 2 above
#LoadModule php5_module  modules/libphp5.so 
```

我根据您的日志输出看到的重定向看起来更像是配置错误的 mod_rewrite 规则，或者 wordpress 中与 apache 上的规则冲突的 301 重定向插件。

现在作为一般经验法则，当我们托管基于 namevirtualhost 的虚拟主机时，我们会创建一个*默认*的虚拟主机，其服务器名称为default

并将其 doc root 设置为包含 1 个 html 文件的目录并重写规则以将所有流量传输到 index.html （html 文件仅输出*托管的*） 这样您就可以过滤掉所有不基于的垃圾流量您的域本身，因为它只运行 html 它不需要任何基于 php 的 iops，因为它只是静态 html。

这样，您的虚拟主机将仅处理对其托管的域的请求。现在，这并不能解决正在发生的 301 问题。如果您可以分享您的 mod_rewrite 配置，那么也许我们可以提供一些帮助。

我在社区中看到的基于 SSL 的流量的最大问题是，当开发人员必须与负载均衡器集成时，SSL 证书在负载均衡器而不是 apache 上被截断。话虽如此，您不能再执行重写条件/规则来检查 https != on，将 301 重定向到新位置，因为负载均衡器终止证书并将 http（端口 80）流量发送到您的网络主机，因此 apache 将始终认为它是未加密的，即使它命中了一个*安全*的虚拟主机

关于您的虚拟主机的附加说明。*除非绝对*必须，否则最好不要使用 .htaccess 文件。对于 wordpress，vhost 目录元素应该看起来像这样以获得最佳性能。

```
<VirtualHost *:80>
        ServerName www.example.com
        DocumentRoot /path/to/doc_root
        <Directory /path/to/doc_root/>
                AllowOverride None
                Options SymLinksIfOwnerMatch MultiViews -Indexes
                Order allow,deny
                Allow from all
                RewriteEngine On
                RewriteRule ^index\.php$ - [L]
                RewriteCond %{REQUEST_FILENAME} !-f
                RewriteCond %{REQUEST_FILENAME} !-d
                RewriteRule ^.*$ index.php [L]
        </Directory>
</VirtualHost> 
```

我说最佳性能的原因是 .htaccess 文件不会被 apache 读取到它的每个请求。而是将其作为 vhost 配置的一部分读取，并将配置保存在内存中，因此除了不必依赖 .htaccess 文件和覆盖的额外安全性之外，您还可以通过不使用 .htaccess 来节省大量的 iops。

最后使用 RewriteBase 是无关紧要的，有时只会导致问题，除非您在 /blog/ 等特定别名下托管 wordpress 在您的情况下，基于您的 .htaccess 文件，它似乎位于基本域中，因此不需要在那里。作为参考，请参阅我在上面的 vhost 配置中的重写规则。

# android - 使用另一个类中的方法操作活动中的变量

> ID：14906415
> 
> 赞同：0
> 
> 时间：2013-02-16T02:51:17.443
> 
> 标签：android, variables, methods, dynamic-variables

我正在开发一款游戏，但遇到了一些问题。我的架构是这样的：

类 GameView 用于在我的表面上绘制位图 类 GameLoopThread 用于实现我的游戏循环（如果它不明显......） 类 MovementUtils 用于保存与移动对象相关的所有实用程序

我想在 MovementUtils 中包含重力和运动控制等方法，但我在实际更新 GameView 中的值时遇到了麻烦。我尝试使用意图，但无济于事。我会发布我的代码，也许有人可以告诉我我应该做什么。另外，忽略加速度计线，这完全是另一个问题......

游戏视图.java

```
package com.example.connorgame;

import java.util.EventObject;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceHolder.Callback;
import android.view.SurfaceView;

public class GameView extends SurfaceView  {
private Bitmap platform;
private Bitmap character;
private Bitmap background;
private SurfaceHolder holder;

private GameLoopThread gameLoopThread;
private MainActivity mainactivity;
private MovementUtils moveutil;

public float charX = 0;
public float charY = 0;
private boolean isFalling = true;
private boolean isJumping = false;
private float initialJumpY = 0;

private int initialFrame;
private int currentFrame;
private int frameDifference;

public GameView(Context context) {
    super(context);

    gameLoopThread = new GameLoopThread(this);
    mainactivity = (MainActivity) context;
    moveutil = new MovementUtils();

    holder = getHolder();
    holder.addCallback(new Callback() {

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {
            // TODO Auto-generated method stub

        }

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            // TODO Auto-generated method stub
            gameLoopThread.setRunning(true);
            gameLoopThread.start();
        }

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format, int width,
                int height) {
            // TODO Auto-generated method stub

        }
    });

    platform = BitmapFactory.decodeResource(getResources(), R.drawable.platform);
    character = BitmapFactory.decodeResource(getResources(), R.drawable.character);
    background = BitmapFactory.decodeResource(getResources(), R.drawable.background);

}

    @Override 
    protected void onDraw(Canvas canvas) {

        canvas.drawColor(Color.BLACK);
        canvas.drawBitmap(background, 0, 0, null);
        canvas.drawBitmap(platform, 30, 700, null);
        canvas.drawBitmap(character, charX, charY, null);

        moveutil.gravity(charY, isFalling);

        if (charY > getHeight() - character.getHeight()) {
            initialFrame = gameLoopThread.numFrames;
            initialJumpY = charY;
            isFalling = false;
            isJumping = true;
        }

        if (isJumping == true && isFalling == false) {
            currentFrame = gameLoopThread.numFrames;
            frameDifference = (currentFrame - initialFrame);
            charY = charY - 5;

            if (charY == initialJumpY - 100) {
                isJumping = false;
                isFalling = true;
            }

        }

    } 
```

}

MovementUtils.java

```
package com.example.connorgame;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;

public class MovementUtils {

public void gravity (float charY, boolean isFalling) {
    if(isFalling == true){
        charY = charY + 5;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:56:04.997

如果我理解您的操作正确，那么您正试图在`GameView`通过重力函数修改的类中使用 charY。问题是这`float`是一个原语，所以它是基于值的，只有本地副本会被修改。如果您改为传递一个对象，则该对象将被修改。

一种解决方案可能是只返回新的 Y 位置，而不是尝试`gravity()`更改 Y 位置。

另一种解决方案是传递`GameView`to`MovementUtils`并让`MovementUtils`修改它。

换句话说，你会像这样传递 GameView`new MovementUtils(this);`

而重力函数会`void setCharY(int y);`在 GameView 中调用 a。

```
public class MovementUtils {
    private GameView gameView;

    public MovementUtils(GameView view) {
        this.gameView = view;
    }

    public void gravity (float charY, boolean isFalling) {
        if(isFalling == true){
            charY = charY + 5;
            gameView.setCharY(charY);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:56:12.543

Java 只支持`passing by value`

所以当你打电话`moveutil.gravity(charY, isFalling);`

并在函数内更改它，例如

```
public void gravity (float charY, boolean isFalling) {
if(isFalling == true){
    charY = charY + 5;
} 
```

此类更改**仅**发生在变量的本地副本中，`charY`不会**影响**您的类`charY`中定义的实例变量`GameView`

为了解决这个问题，您可以将变量定义为对象以及函数的参数，例如

```
public void gravity (Float charY, boolean isFalling) {} 
```

在你的 GameView 类中：

```
private Float charX = 0; // why you define them public !?
private Float charY = 0; 
```

或者，您可以传递您的`GameView`类的实例或创建一个`ValueObject`类（类似于`Context`android 中的对象）并使用它来传递参数

# web - 基于 Web 的 IMAP 客户端是否应该有自己的数据库？

> ID：14906417
> 
> 赞同：9
> 
> 时间：2013-02-16T02:51:34.760
> 
> 标签：web, imap

在构建基于 Web 的 IMAP 客户端时，我应该让 Web 服务器直接与 IMAP 服务器对话，还是应该在中间有一个数据库，以便在需要时同步？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T07:04:36.617

您提出这个问题的事实意味着您担心 webmail 前端无法与 IMAP 后端一起有效地工作。我能想到几个原因，如果我错了，请纠正我：

1.  webmail 客户端是无状态的，会在 IMAP 服务器上进行*大量*调用，其中很多调用本质上是重复的（例如，当用户刷新屏幕时）。您担心来电的数量以及其中大多数的绝对不必要的性质会：
    1.  压倒 IMAP 服务器，或
    2.  向第三方 IMAP 提供商收取大量网络/数据/SLA 账单，或
    3.  比直接访问数据库要慢得多
2.  IMAP 服务器是外部的，有时可能对您的数据中心不可用，您需要确保网络邮件客户端继续为您的客户提供服务。

需要做出一个关键的决策点，但我认为这取决于您需要连接的 IMAP 服务器是在您的组织内部还是外部。

*   **内部**：
    1.  **Webmail 组件的性能**可能会因 IMAP 服务器的延迟而受到影响
*   **外部**：
    1.  **网络带宽**或**IMAP 使用**成本高昂
    2.  **性能**同上
    3.  您需要**在主 IMAP 服务器离线**时镜像邮件数据。

在这种背景下，您正在考虑是否可以不使用数据库，因为您知道添加该层将是：

1.  昂贵的
2.  大大增加项目时间表（用于设计、开发和测试）
3.  增加项目的技术和交付风险，并
4.  添加一个您可能没有的主要架构组件。

**内部 IMAP 服务器 - 性能**

首先，对系统进行基准测试以查看性能是否真的受到影响可能是个好主意。我的直觉告诉我不一定要有，因为那里有许多响应迅速的网络邮件系统。

首先，有许多非常好的 IMAP 代理服务器可以让您保持 IMAP 连接有效，从而大大减少延迟。示例包括：

*   [ImapProxy](http://www.imapproxy.org/)
*   [灭亡](http://horms.net/projects/perdition/)
*   [NGINX](http://wiki.nginx.org/ImapProxyExample)

其次，如果您将 IMAP 服务器和 webmail Web 应用程序视为一个*系统*，那么您不将 IMAP 数据缓存在另一个数据库中可能是有意义的。您将从 IMAP 服务器引入数据延迟到您的数据库，遇到数据和数据库管理难题，并引入具有许多新故障点的系统复杂性。

相反，您可以优化您的 IMAP 服务器以与 webmail 应用程序一起使用吗？这可能涉及购买额外的服务器或升级您当前的服务器 - 但同时，您的网络邮件服务器会小得多，您不必为它购买数据库服务器。

IMAP 服务器几乎可以肯定具有内部缓存以提高性能，并且几乎可以肯定使用数据库（具有自己的缓存等）——许多人多年来对其进行了调整和调试。你可以利用这种经验和成熟度。

让我们想象一个假设的问题——系统变大并开始出现性能问题。使用自定义 DB 表调整和扩展自定义应用程序更容易，还是使用可用的商业支持和经过测试的良好文档更容易扩展广泛使用的商业或开源 IMAP 服务器？

**外部 IMAP 服务器 - 最小化流量并最大化性能**

考虑到这一点，目标是尽量减少 IMAP 协议调用，因为它们在时间（网络延迟）或金钱上是昂贵的。

首先，您可以使用 IMAPProxy（如上所述）来确保连接保持活动状态并且用户登录。

此外，我认为您需要使用数据库，但需要以*缓存*模式而不是完整数据模型。例如，您可以使用 NoSQL 数据库（键值或对象数据库）而不是 SQL 数据库：

*   存储对象（消息、文件夹元数据、附件等）而不是非规范化数据
*   可能不需要 ACID 行为 - 它是一个缓存
*   大多数按对象 id 或类查找，而不是按复杂的 WHERE 子句

以这种方式实施将使任务非常针对用例或用户故事，降低成本和风险，并使系统更具可测试性。如果您的实现中存在严重问题，则可以刷新整个缓存并恢复服务。

数据和数据库管理也将容易​​得多，并且不会存储完整的用户邮箱。

**外部 IMAP 服务器 - 断开连接的模型**

这假定您正在为外部 IMAP 服务提供 webmail 客户端，并且您知道外部 IMAP 服务会定期离线，但您仍然需要向用户提供电子邮件。

在这里，您显然需要在本地数据库中镜像用户的电子邮件。我建议您查看具有本地 IMAP 服务器并使用许多开源 IMAP 同步工具中的任何一个来镜像第三方 IMAP 服务器的架构解决方案。这里的好处是：

1.  对于您的 webmail 应用程序，本地 IMAP 服务器看起来与任何其他简化 webmail 客户端*的 IMAP 服务器完全相同*
2.  对于许多极端情况，同步是一个棘手的问题；这些都已经解决了
3.  通过拥有完整的本地 IMAP 服务器，您可以拥有一个完全可管理的组件，并提供可选支持而无需开发成本
4.  您可以让一些用户直接连接到外部 IMAP 服务器，而另一些用户则使用这种架构连接到缓存的服务器——这只是一个 URL

缺点是：

*   存储重复电子邮件的潜在成本巨大
*   用户查看新电子邮件的时间滞后，因为必须先在外部 IMAP 服务器上检测到它们，然后再在本地检测到它们。

您可以在本地使用许多 IMAP 服务器之一，对于同步，这里有一些可能性：

*   [同步](http://isync.sourceforge.net/)
*   [离线Imap](http://offlineimap.org/)
*   [imapsync](http://imapsync.lamiral.info/)

（**免责声明**：我自己没有使用过这些工具）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T05:22:18.457

这完全取决于要求、要提供的服务的重要性以及您拥有的时间；-)

我见过雅虎、rediffmail IMAP 的案例，其中邮件在我的黑莓上随机重新下载。（供您参考。黑莓邮件服务首先将所有邮件从 IMAP 服务器下载到自己的服务器，然后将其分发到设备。）

使用中间件是个好主意，因为它可以减少任何与服务器相关的问题，例如邮件获取错误、随机错误或服务器崩溃。即使目标 IMAP 服务器已关闭，即使与邮件相关的活动也会更快，例如邮件读取、删除、移动到不同的文件夹可以更方便地处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T05:09:51.237

我认为用户将从数据库方法中受益匪浅，并且也许可以通过限制存储在数据库中的最近消息的数量来降低存储成本。这将为用户提供快速的初始加载，这样他们就可以进入、阅读最新的电子邮件并退出，而无需等待 IMAP 服务器同步。数据库方法也可能是解决文件夹问题的方法，因为您可以缓存上次连接时下载的内容，然后在后台更新，防止用户等待服务器同步。简而言之，用户会更喜欢数据库方法，这才是最重要的。

# javascript - 如何从javascript中的字符串中提取句子

> ID：14906420
> 
> 赞同：-3
> 
> 时间：2013-02-16T02:52:14.507
> 
> 标签：javascript, regex, match

如何通过 match() 方法从字符串中提取句子？

**示例：** “等等……发生了什么事？……你怎么了……？-没什么。似乎我在说话……！-真的吗？？？-你打赌！”

**回报：** `["Wait...", "Whats happen?", "Whats wrong with you..?", "-Nothing.", "Seems i've speeking..!", "Realy???", "You bet!"]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:55:25.007

```
str.match(/(.*?(?:\.|\?|!))(?: |$)/g) 
```

[http://jsfiddle.net/akXF3/](http://jsfiddle.net/akXF3/)

# ruby-on-rails-3.2 - 我安装 capistrano 后，Rails 应用程序无法加载

> ID：14906421
> 
> 赞同：0
> 
> 时间：2013-02-16T02:52:20.513
> 
> 标签：ruby-on-rails-3.2, capistrano, bundle, rvm-capistrano

我第一次尝试在 vexxhost 上部署我的 rails 应用程序。我使用 github 作为我的源代码管理和 capistrano。

这是我的部署文件

```
require 'bundler/capistrano'
require 'capistrano'
require 'bundler'
require 'capistrano-vexxhost'

# Account Settings

ssh_options[:forward_agent] = true
set :scm_command, "/home/user/opt/bin/git"
set :local_scm_command,"git"
set :user, "xxxxxxxx"
set :password, "xxxxxxxxx"
set :domain, "domain.com"
set :mount_path,"/home/xxxxxxxx/xxxxxxx"
set :application,"app name"
set :scm, :git
set :deploy_via, :copy
set :repository, "git@github.com:xxxxx/xxxxxxx.git"
default_run_options[:pty] = true 
```

一旦我安装了 gem 'capistrano' gem 'capistrano-vexxhost' ，当我尝试在我的笔记本电脑上本地加载我的应用程序时出现以下错误（它在安装 capistrano 之前工作）。

```
 C:/Ruby193/lib/ruby/gems/1.9.1/gems/capistrano-2.14.1/lib/capistrano/configuration/loading.rb:18:in `instance': Please require this file from within a Capistrano recipe (LoadError) 
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/capistrano.rb:7:in `<top (required)>'
    from C:/Users/mummy/LagoAds/config/application.rb:6:in `require'
    from C:/Users/mummy/LagoAds/config/application.rb:6:in `<top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:53:in `require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:53:in `block in <top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

注意但是，当我从 application.rb 文件中的以下代码中注释 Bundler.require 行时，它会成功运行但无法识别 gem

```
 if defined?(Bundler)
 # If you precompile assets before deploying to production, use this line
 Bundler.require(*Rails.groups(:assets => %w(development test)))
 # If you want your assets lazily compiled in production, use this line
 # Bundler.require(:default, :assets, Rails.env)
 end 
```

**更新**

当我输入以下代码“rake --trace”时，它也会给我以下错误

```
 rake aborted!
 please require the file from withen a capistrano recipe 
```

请帮助我解决这个问题

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-16T09:24:06.103

如果您将`capistrano*`宝石放入`Gemfile`您需要禁用自动要求：

```
gem 'capistrano-vexxhost', :require => false 
```

# sql - SQL 两次查找到一张表上的相同字段

> ID：14906423
> 
> 赞同：1
> 
> 时间：2013-02-16T02:52:43.937
> 
> 标签：sql, postgresql

我有看起来像这样的表：

```
create table users (
    user_id uuid,
    user_name varchar(32)
);

create table messages (
    message_id uuid,
    from_id uuid references users(user_id),
    to_id uuid references users(user_id),
    the_message varchar(140),
    primary key(message_id)
); 
```

如果我执行以下操作：

```
select * from messages 
```

我将获得 UUID。我想显示给定 uuid 的 users.user_name。这让我很接近：

```
select
    users.user_name as from_id,
    users.user_name as to_id
from messages
    join users on users.user_id = messages.from_id
; 
```

结果显示“发件人”和“收件人”字段的用户相同。

如何显示 from_id 的 user_name 以及 to_id 的 user_name？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T02:54:58.757

您需要`JOIN`两次访问 users 表——一次用于 from 用户，一次用于 to 用户：

```
select
    messages.*,
    f.user_name as from_id,
    t.user_name as to_id
from messages
    join users f on f.user_id = messages.from_id
    join users t on t.user_id = messages.to_id
; 
```

# c# - 非静态字段需要对象引用的问题

> ID：14906424
> 
> 赞同：1
> 
> 时间：2013-02-16T02:53:02.197
> 
> 标签：c#, visual-studio-2010

我有以下代码，我的问题是，当我引用变量时，它给了我错误：每个变量的非静态字段、方法或属性都需要对象引用。我知道这与我的 public int 和 public double 是非静态的有关，但我不知道如何解决它。有人可以告诉我吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace homework3
{
    public class Program
    {

           public int number_of_scores;
           public double score, total_score = 0, high_score, low_score, average;

    } 
    class Class1{

        static void Main(string[] args){

            Console.Write("please enter the number of scores that you
wish to process? ");
            Program.number_of_scores = int.Parse(Console.ReadLine());

            Console.Write("Please enter score " + 1 + " ");
            Program.score = double.Parse(Console.ReadLine());

            Program.high_score = Program.score;
            Program.low_score = Program.score;

            Program.total_score = Program.total_score = Program.score;

            for (int i = 2; i <= number_of_scores; i++);
         }  
 }

     class class2
        {
         static void Main(string[] args){

                Console.Write("Please enter score " + i + " ");
                Program.score = double.Parse(Console.ReadLine());

                Program.total_score = Program.total_score + Program.score;

                if(Program.score > Program.high_score)
                Program.high_score = Program.score;

                if(Program.score < Program.low_score)
                Program.low_score = Program.score;
        }
            }

      class Class3
     {
          static void Main(string[] args){

          Program.average = Program.total_score / Program.number_of_scores;

          Console.WriteLine("you entered " + Program.number_of_scores +
 " scores");
          Console.WriteLine("The high score is " + Program.high_score);
          Console.WriteLine("The low score is " + Program.low_score);
          Console.WriteLine("the average score is " + Program.average);
     }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:57:25.983

在行中：

```
Program.number_of_scores = int.Parse(Console.ReadLine()); 
```

您尝试从*静态*方法引用*实例*变量。`number_of_scores`

 *让它工作的最简单的方法是声明`number_of_scores`为静态的：

```
static public int number_of_scores; 
```

您的其他一些领域也有同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T02:57:54.923

您需要将 number_of_scores 和 score（以及其他变量）声明为静态的。

```
public static int number_of_scores;
public static double score, //etc 
```*

# wordpress - 如何向 WordPress 主题添加一个页面但一个单独加载的 php 文件

> ID：14906427
> 
> 赞同：0
> 
> 时间：2013-02-16T02:53:24.137
> 
> 标签：wordpress, themes

这似乎是一个答案， [如何将 php 文件添加到 wordpress 主题添加标准文件？](https://stackoverflow.com/questions/12240471/how-to-add-a-php-file-to-wordpress-theme-addition-of-standard-files)

然而我的 WordPress 3.5.1 中缺少模板选项

现在如何使用当前最新版本的 WordPress 做同样的事情。

或者它可能与 WordPress 版本无关，实际上与主题的默认设置有关，不允许模板选择？我在哪里可以在主题配置中查找它。

WordPress 文档没有删除模板作为页面属性的一部分 [http://en.support.wordpress.com/pages/page-attributes/](http://en.support.wordpress.com/pages/page-attributes/)

所以它可能与不允许模板选择的主题选项有关，可能需要覆盖该设置，但现在不知道它的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:01:02.210

这与 Wordpress 3.5.1 无关，问题一定出在您的主题上。您当前的主题可能只是没有您可以使用的任何其他模板；尝试其他一些（例如您的 Wordpress 安装附带的默认主题，如果您运行的是 3.5.1，它可能是 TwentyTwelve）并查看是否出现模板菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:01:30.253

这些模板用于（Wordpress 术语）**页面**，而不是帖子。帖子没有“页面属性”框，只有页面。

[该插件](http://wordpress.org/extend/plugins/custom-post-template/)似乎将该功能扩展到帖子。

# iphone - 如何简化我的程序和所有 if 语句？

> ID：14906429
> 
> 赞同：4
> 
> 时间：2013-02-16T02:53:47.333
> 
> 标签：iphone, ios, objective-c, if-statement, ios6

我正在创建一个十六进制、十进制和二进制转换器，到目前为止进展顺利。这是我在 iPhone 上的第二个项目，我是初学者。但是，我想知道如何简化我所拥有的（一堆 if 语句）。我有：

```
if (entered is hex)
     if (binary button clicked)
         convert to binary
     if (decimal button clicked)
         convert to decimal
     else (hex button clicked)
         keep in hex and inform
else if (entered is binary)
     if (hex button clicked)
         convert to hex
     if (decimal button clicked)
         convert to decimal
     else (binary button clicked)
         keep in binary and inform user
else if (entered is decimal)
     if (hex button clicked)
         convert to binary
     if (binary button clicked)
         convert to hex
     else (decimal button clicked)
         keep in decimal and inform user    
else   
    give error if something else entered in 
```

这对我来说看起来很重复。所有这些都在一个类中，所有这些 if 语句都非常相似，所以我想知道是否有什么我可以做的？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T04:27:41.773

我总是以相同的格式（在内部）存储输入的值（让我们在这个例子中使用十六进制）。然后，您可以使用这样的东西，它更加精简：

```
// Convert the user entered value to hex
if (enteredValue is hex)
    internalHexValue = enteredValue
else if (entered is binary)
    internalHexValue = convert enteredValue (binary) to hex
else if (entered is decimal)
    internalHexValue = convert enteredValue (decimal) to hex
else
    error and return

// Now, you have far less repetition because you only have to convert from hex:
if (binary button clicked)
    convertedValue = convert internalHexValue to binary
else if (decimal button clicked)
    convertedValue = convert internalHexValue to decimal
else (hex button clicked)
    convertedValue = internalHexValue

// Lastly, see if they selected the same format for input and output:
if (enteredValue == convertedValue)
    inform user 
```

您还可以将上面的示例分解为多个方法，以便通过这样编写使其更易于阅读（为清楚起见，删除了错误检查）：

```
internalHexValue = [self convertEnteredValueToHex:enteredValue];
convertedValue   = [self convertHexValueToUserSelectedFormat:internalHexValue];
if (enteredValue == convertedValue)
    inform user 
```

我还将在您的班级中使所有“将 XXX 转换为 XXX”行的方法都不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T04:43:34.863

正如@apurv 暗示的那样，你的决定是独一无二的（输入+点击），你真的不能做太多简化或粉碎它（好像你有某种重复模式）。你能做的最好的就是让它尽可能地可读，你所拥有的就很好。这很容易理解。这是任何“简化”或使其更优雅的尝试都可能使其变得不必要的复杂和可读性降低的情况之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T03:36:48.823

使用开关，非常流畅，如下所示

```
switch (entered )
{
case hex:
     if (binary button clicked)
         convert to binary
     else if (decimal button clicked)
         convert to decimal
     else (hex button clicked)
         keep in hex and inform
break;

case binary:

     if (hex button clicked)
         convert to hex
     else if (decimal button clicked)
         convert to decimal
     else (binary button clicked)
         keep in binary and inform user
break;

case  decimal:

     if (hex button clicked)
         convert to binary
     else if (binary button clicked)
         convert to hex
     else (decimal button clicked)
         keep in decimal and inform user  
break;  

default:

    give error if something else entered in 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T13:31:54.187

替代方案（不一定是我最喜欢的）：

```
int inputFmt = <input format reduced to integer 0..2>
int outputFmt = <output format reduced to integer 0..2>

int switchValue = (inputFmt * 4) + outputFmt;

switch (switchValue) {
    case BinaryFmtConst * 4 + BinaryFmtConst:
        <convert binary -> binary>
        break;
    case BinaryFmtConst * 4 + DecimalFmtConst:
        <convert binary -> decimal>
        break;
. . .
    case DecimalFmtConst * 4 + BinaryFmtConst:
        <convert decimal -> binary>
        break;
. . .
    case HexFmtConst * 4 + HexFmtConst:
        <convert hex -> hex>
        break;
    default:
        <error message>
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-16T03:48:06.540

将其分解为几种方法，以下是相当概念性的，并没有解决不必要的填充或缺少括号：

```
 if (entered is hex)
        [self isHex];
    else if (entered is binary)
        [self isBinary];
    else if (entered is decimal)
        [self isDecimal];
        keep in decimal and inform user
    else
        give error if something else entered in
    return 0;
}

- (void)isHex {
    if (binary button clicked)
        convert to binary
    else if (decimal button clicked)
        convert to decimal
    else (hex button clicked)
        keep in hex and inform
}

- (void)isBinary {
    if (hex button clicked)
        convert to hex
    else if (decimal button clicked)
        convert to decimal
    else (binary button clicked)
        keep in binary and inform user
}

- (void)isDecimal {
    if (hex button clicked)
        convert to binary
    else if (binary button clicked)
        convert to hex
    else (decimal button clicked)
        keep in decimal and inform user
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-16T04:23:19.550

您提到的 if 语句不一样。

说，当按下二进制按钮时，要将数字转换为二进制，您将需要两个不同的功能。

1.  十六进制转二进制（输入为十六进制）
2.  十进制转二进制（输入为十进制）

因此，实际上您正在调用不同的函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-16T03:18:02.420

为什么不使用 switch 语句以获得更好的可读性？

# visual-studio - 为什么在运行 MsTest 单元测试时，有时会获得包含应用程序副本的 EQT_{guid} 文件夹？

> ID：14906431
> 
> 赞同：1
> 
> 时间：2013-02-16T02:53:58.693
> 
> 标签：visual-studio, visual-studio-2012, mstest

我偶尔（不是很频繁地）注意到，在 Visual Studio 中运行我的 MsTest 单元测试套件后，我会得到一个或多个文件夹，其格式为（guid 有所不同）：

```
EQT_6A69DAE9-1C34-4B96-8B96-698A94EA1ADF 
```

该文件夹将仅包含我`.exe`的应用程序文件的副本。在这种情况下，应用程序正在使用 WPF。

这些文件夹总是显示在我的`Debug`目录中。

在我的应用程序中没有任何地方可以创建这样的东西（当然也没有复制我自己的 .exe 文件），所以它似乎是 MsTest 中的某个产品。

为什么 MsTest 有时会使用我的文件的副本创建此文件夹`.exe`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:47:26.990

我相信这些运行会通过您的 .testsettings 文件启用代码覆盖率。您的 .exe 将在此处备份，同时为使用 .testsettings 运行时的代码覆盖率创建检测版本。

当您使用 VS2012 中提供的“分析代码覆盖率”选项运行没有任何 .testsettings 的代码覆盖率时，不会发生这种情况

# parallel-processing - 具有加权边的图的 Pagerank 公式（顺序或 BSP）

> ID：14906433
> 
> 赞同：1
> 
> 时间：2013-02-16T02:54:20.627
> 
> 标签：parallel-processing, graph-algorithm, bigdata, pagerank

Pagerank 算法（我知道）假设边缘没有权重。所以标准公式是：

```
PR(A) = (1 - d)/N + d*\sigma PR(E)/L(E) 
```

其中 L(E) 是页面 E 的传出链接数，其中 E 是指向页面 A 的每个页面。

正如您在此处看到的，公式中不考虑进入 A 的边的权重。

两个问题：

a）如果我们考虑进入A的每条边的权重，那么调整后的公式是什么，假设权重越高越好（python中的networkx包确实考虑了加权边，但是代码比上面的公式更复杂，我宁愿检查是否有更简单的解决方案）

b）我实际上想要一个类似 BSP Pregel 的框架。有一个[BSP Pregel 风格的实现](http://spark-project.org/docs/latest/bagel-programming-guide.html "BSP Pregel 风格的实现")，但如您所见，它不考虑边缘的权重。如果你能推荐一个，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:27:29.230

[这里](http://nwb.cns.iu.edu/svn/nwb/trunk/plugins/analysis/edu.iu.nwb.analysis.pagerank.weighted/)有一个 WeightedPageRank 的 Java 实现。我没有尝试过，但在快速阅读来源后，它似乎符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:28:23.460

我建议您首先将所有边缘权重加到邻居中，然后将节点排名的百分比发送给邻居。

示例：一个节点的等级为 10。他有 2 个邻居，它们的边的权重分别为 70 和 30。总而言之，这将是 100。对于边权重为 70 的第一个节点，您发出的等级为 7，并且到另一个 3。

# .htaccess - 这可能与 htaccess 重写

> ID：14906437
> 
> 赞同：-1
> 
> 时间：2013-02-16T02:55:27.380
> 
> 标签：.htaccess

我想知道这是否可能与 .htaccess 规则有关。

我的起始网址： [http ://cmfi.org/wherewework/missionary/?missionary=ttaho%2C](http://cmfi.org/wherewework/missionary/?missionary=ttaho%2C)

我想最终得到什么： [http ://cmfi.org/wherewework/missionary/ttaho](http://cmfi.org/wherewework/missionary/ttaho)

ttaho 将根据页面而变化。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:57:22.630

不要以为我是在要求任何人为我编写代码……只是问是否可能。我已经尝试了几件事，但无法让它们工作。%2c 是从我使用的插件添加的 url 的编码部分。

我会弄清楚。不用担心。

# c# - 如何在这些类内置到程序集中时使某些类实现接口

> ID：14906440
> 
> 赞同：1
> 
> 时间：2013-02-16T02:56:03.970
> 
> 标签：c#, interface, refactoring

我的意思是，例如，有 A 类、B 类和 C 类。A、B、C 都有一个方法 void M()，但它们都没有声明实现任何接口。

所以我给出了一个带有 void M() 约束的接口。但是 A、B、C 类是程序集中的类型。

有什么方法可以使用这些类，就好像它们已经实现了一个接口一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:00:17.617

不，没有办法做到这一点。

但是，您可以编写从 A、B 和 C 继承的适配器类并实现接口。

```
public class AAdapter : A, IMyInterface
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:00:48.740

不，您不能以这种方式修改现有类。

您可以派生新类并说它们实现了新接口。基类中的现有方法将被选为接口实现。

```
interface IWithM
{
  void M();
}

class MyA : A, IWithM
{
  // IWithM.M will be picked from A.M
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T03:03:37.957

用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。

您可以创建自己的这些类版本，然后装饰实现，而无需修改其他人拥有的程序集。

你的界面：

```
public interface IImplementsM()
{
  void M();
}

public class MyA : IImplementsM 
{
   private A _a;

   public MyA(A a){
     _a = a;
   }

   public void M(){
     _a.M();
   }

} 
```

然后在您的代码中而不是使用`A`您可以使用您自己的版本或接口。

```
// some other class

public void DoSomething(IImplementsM implementsM)
{
 implementsM.M();
} 
```

并执行可能是这样的：

```
 var myA = new MyA(new A());
 DoSomething(myA); 
```

优点是，您现在可以在使用自己的代码时有一个约束。

缺点，你必须在你的程序集中使用你的类版本，而不是他们的。

# java - 2D 需要 GL_DEPTH_TEST 和 GL_DEPTH_BUFFER_BIT 吗？

> ID：14906445
> 
> 赞同：0
> 
> 时间：2013-02-16T02:56:40.213
> 
> 标签：java, opengl, render, lwjgl

我不知道这些是什么，但我可以继续不清除 GL_DEPTH_BUFFER_BIT 并禁用 GL_DEPTH_TEST 而不影响任何正在绘制的东西，例如简单的 2D 四边形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:45:58.643

您可以根据需要自由使用或不使用 2D 或 3D 深度测试。

显然，如果您这样做，您将负责以正确的顺序渲染事物，以确保正确渲染所有内容。在 2D 中，这可能相当容易。

如果您根本不打算使用深度，那么您可能还希望首先避免分配深度缓冲区。这是告诉底层实现您只是不关心它并允许它适当地优化绘图（以及可能节省一些内存）的最清楚的方法。

# c# - RenderTransform RotateTransform 模糊图像

> ID：14906448
> 
> 赞同：1
> 
> 时间：2013-02-16T02:57:24.660
> 
> 标签：c#, wpf, xaml, animation, bitmap

我有以下自定义`UserControl`代表我的应用程序中的卡片：

```
<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:Core="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Namespace="clr-namespace:MyApp" xmlns:Properties="clr-namespace:MyApp.Properties" Core:Class="MyApp.Card" Height="176" RenderTransformOrigin="0.5,0.5" Width="83" UseLayoutRounding="True">
    <UserControl.LayoutTransform>
        <TransformGroup>
            <RotateTransform/>
            <ScaleTransform/>
        </TransformGroup>
    </UserControl.LayoutTransform>
    <UserControl.RenderTransform>
        <TransformGroup>
            <RotateTransform/>
            <ScaleTransform/>
        </TransformGroup>
    </UserControl.RenderTransform>
    <UserControl.Resources>
        <Namespace:ImagesConverter Core:Key="ImagesConverter"/>
    </UserControl.Resources>
    <Canvas Core:Name="Layout">
        <Image Core:Name="Image" HorizontalAlignment="Left" Source="{Binding Source={Core:Static Properties:Resources.Cards}, Converter={StaticResource ImagesConverter}}" Stretch="None" VerticalAlignment="Top">
            <Image.Clip>
                <RectangleGeometry Core:Name="Clipping" Rect="0,0,83,176"/>
            </Image.Clip>
            <Image.RenderTransform>
                <TranslateTransform Core:Name="Translation" X="0" Y="0"/>
            </Image.RenderTransform>
        </Image>
        <Rectangle Core:Name="Highlight" Canvas.Left="-2" Canvas.Top="-2" Height="180" Opacity="0.7" Stroke="#FFFFF500" StrokeThickness="3" Visibility="Collapsed" Width="87"/>
    </Canvas>
</UserControl> 
```

正如你所看到的......我有一个包含所有卡片面的位 PNG 图像，然后，当我在构造函数中创建一个新的卡片传递`Suit`和`Rank`枚举值时，我计算了正确的裁剪矩形和图像的平移。一切都像一个魅力......除了当我尝试用`Storyboard`需要 90° 旋转的卡片为卡片设置动画时。这是我的代码（在`Storyboard`中定义`MainWindow.Resources`）：

```
<DoubleAnimation BeginTime="00:00:00.4" Duration="00:00:00.2" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(RotateTransform.Angle)" To="90"/> 
```

结果如下：

![在此处输入图像描述](../Images/8d68f0369b39b6f48299d477157b457b.png)

![在此处输入图像描述](../Images/f76c764d64a2090584cae5f2f2aa508b.png)

我不明白发生了什么……但是图像会以某种方式被拉伸并且变得非常模糊，正如您所看到的。我尝试`UseLayoutRounding="True"`在我的卡控制以及`SnapsToDevicePixels="True"`我`MainWindow`在其他地方的建议中使用......但它不起作用！当然......如果我使用`LayoutTransform`而不是`RenderTransform`一切正常旋转卡片并且卡片不模糊......但我不能让卡片围绕它的中心旋转，我的动画需要从中心旋转 90°。在我看来，为卡片高度的一半加上布局旋转动画`Canvas.Top`是一个非常糟糕的解决方案......而且它也让我的动画看起来很糟糕。你能建议我一个解决方案吗？

[编辑] 我尝试使用`RenderOptions.BitmapScalingMode="NearestNeighbor"`and `RenderOptions.EdgeMode="Aliased"`...但它变得更糟：

![在此处输入图像描述](../Images/b800dc52b05b004eb81c2ed54bcf5391.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:16:38.770

问题在于底层图像以及布局的宽度（83）是奇数。RenderTransformOrigin，即使设置为“0.5,0.5”，也可能会向上或向下舍入该值，从而导致非常糟糕的渲染。将图像和布局宽度更改为偶数（82），完全解决了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:03:43.077

您可以尝试更改`RenderOptions`on the`Image`并查看是否可以找到有效的设置，我已经添加了我在应用程序中用于这种确切情况的设置示例

```
 RenderOptions.BitmapScalingMode="NearestNeighbor"
   RenderOptions.EdgeMode="Aliased" 
```

例子：

```
 <Image RenderOptions.BitmapScalingMode="NearestNeighbor"
           RenderOptions.EdgeMode="Aliased"
           Core:Name="Image" HorizontalAlignment="Left" Source="{Binding Source={Core:Static Properties:Resources.Cards}, Converter={StaticResource ImagesConverter}}" Stretch="None" VerticalAlignment="Top">
        <Image.Clip>
            <RectangleGeometry Core:Name="Clipping" Rect="0,0,83,176"/>
        </Image.Clip>
        <Image.RenderTransform>
            <TranslateTransform Core:Name="Translation" X="0" Y="0"/>
        </Image.RenderTransform>
    </Image> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T04:15:07.560

您表示使用`LayoutTransform`效果很好，不会模糊图像。您是否尝试过使用它并将中心指定为旋转轴心？

就像是：

```
<Image ...>
  <Image.LayoutTransform>
    <RotateTransform CenterX="0.5" CenterY="0.5" Angle="90"/>
  </Image.LayoutTransform>
</Image> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-22T02:21:43.223

正如@Tommaso Belluzzo 所说，这是来自 RenderTransformOrigin="0.5,0.5"
您上面的回答确实解决了我的问题。
请允许我显示我的代码如下：

```
System.Drawing.Bitmap bm = null;
//RotateTransform(angle) with RenderTransformOrigin="0.5,0.5" might cause blurry if the width or height is odd,
using (System.Drawing.Bitmap bitmap = (System.Drawing.Bitmap)System.Drawing.Image.FromFile(path))
{
    int width = bitmap.Width;
    int height = bitmap.Height;
    if (0 != width % 2) width ++;
    if (0 != height % 2) height ++;
    bm = new System.Drawing.Bitmap(width, height);

    bm.SetResolution(96, 96);
    using (System.Drawing.Graphics g = System.Drawing. Graphics.FromImage(bm))
    {
        //I don't want to do anything which may modify(resize) the original image.
        g.Clear(System.Drawing.Color.White);
        g.DrawImage(bitmap, 0, 0, bitmap.Width, bitmap.Height);
    }
    //bm.Save(directory+@"\tmp.bmp", ImageFormat.Bmp);

}
//.....(show bm) 
```

# php - 切片 MySQL 结果

> ID：14906452
> 
> 赞同：1
> 
> 时间：2013-02-16T02:57:42.517
> 
> 标签：php, mysql, json

我有一个名为“库”的数据库，其中包含以下表格：

```
+-------------------+
| Tables_in_library |
+-------------------+
| books             |
| shelves           |
+-------------------+ 
```

书籍存储在书架中，我想在查询中每个书架只返回四 (4) 本书。如果书架有超过 4 本书，则该书架必须展示两次，而不重复已展示的图书。

这是货架表：

```
+----+------+---------------------------------+
| id | uid  | description                     |
+----+------+---------------------------------+
|  1 | 1000 | Book and TV Storage Combination |
|  2 | 1001 | Shelving Unit                   |
+----+------+---------------------------------+ 
```

和书桌：

```
+----+------+-------+----------------------------------------------------+
| id | uid  | shelf | title                                              |
+----+------+-------+----------------------------------------------------+
|  1 | 1000 | 1000  | The Mythical Man-Month                             |
|  2 | 1001 | 1001  | Code Complete                                      |
|  3 | 1002 | 1000  | The Art of Computer Programming                    |
|  4 | 1003 | 1001  | The Pragmatic Programmer                           |
|  5 | 1004 | 1001  | Structure and Interpretation of Computer Programs  |
|  6 | 1005 | 1000  | Compilers: Principles, Techniques, and Tools       |
|  7 | 1006 | 1001  | The C Programming Language                         |
|  8 | 1007 | 1001  | Introduction to Algorithms                         |
|  9 | 1008 | 1000  | Patterns of Enterprise Application Architecture    |
| 10 | 1009 | 1001  | Refactoring: Improving the Design of Existing Code |
| 11 | 1010 | 1001  | Design Patterns                                    |
+----+------+-------+----------------------------------------------------+ 
```

我将使用 JSON 打印结果，这就是我的做法：

```
function getShelves(){
    $query = mysql_query("SELECT * FROM shelves") or die(mysql_error());
    return $query;
}

function getBooksFromShelf($shelf){
    $query = mysql_query("SELECT * FROM books WHERE shelf = '$shelf'") or die(mysql_error());
    return $query;
}

$response = array();
$shelves = getShelves();
while($s = mysql_fetch_assoc($shelves)){
    $books = getBooksFromShelf($s["uid"]);
    $bookList = array();
    while($b = mysql_fetch_assoc($books)){
        $bookList[] = array(
            "uid" => $b["uid"],
            "title" => $b["title"]
        );
    }
    $response[] = array(
        "shelf" => $s["uid"],
        "books" => $bookList
    );
}

echo json_encode($response); 
```

这导致：

```
[
{
    "shelf": "1000",
    "books": [
        {
            "uid": "1000",
            "title": "The Mythical Man-Month"
        },
        {
            "uid": "1002",
            "title": "The Art of Computer Programming "
        },
        {
            "uid": "1005",
            "title": "Compilers: Principles, Techniques, and Tools"
        },
        {
            "uid": "1008",
            "title": "Patterns of Enterprise Application Architecture "
        }
    ]
},
{
    "shelf": "1001",
    "books": [
        {
            "uid": "1001",
            "title": "Code Complete "
        },
        {
            "uid": "1003",
            "title": "The Pragmatic Programmer"
        },
        {
            "uid": "1004",
            "title": "Structure and Interpretation of Computer Programs"
        },
        {
            "uid": "1006",
            "title": "The C Programming Language"
        },
        {
            "uid": "1007",
            "title": "Introduction to Algorithms"
        },
        {
            "uid": "1009",
            "title": "Refactoring: Improving the Design of Existing Code"
        },
        {
            "uid": "1010",
            "title": "Design Patterns"
        }
    ]
} 
```

]

第二个书架包含 7 本书，因此必须展示两次，前 4 本书和最后 3 本书。这是我被卡住了。谢谢您的反馈！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T07:38:12.820

您可以使用 array_chunk 将较大的数组分成几部分，例如在您的情况下为 4：

[http://www.php.net/manual/en/function.array-chunk.php](http://www.php.net/manual/en/function.array-chunk.php)

```
$pieces = array_chunk($bookList, 4);
foreach($pieces as $bookRow) {
    $response[] = array(
        "shelf" => $s["uid"],
        "books" => $bookRow
    );
} 
```

# php - 如何更改当前数组键的值

> ID：14906457
> 
> 赞同：0
> 
> 时间：2013-02-16T02:58:24.817
> 
> 标签：php, arrays

我正在尝试更改递归数组中的所有值，该数组将具有未知数量/深度的嵌套数组。我认为这只是我绊倒的语法。

基本上我需要使用所有新值再次输出 $orgarray。

```
$orgarray = array(
    '101' => 'some-value',
    '102' => 'some-value',
    '103' => 'some-value',
    '104' => array(
        '201' => 'some-value',
        '202' => 'some-value',
        '203' => array(
            '301' => 'some-value',
            '302' => array(
                '401' => 'some-value',
                '402' => 'some-value',
                    '501' => array(
                    '502' => 'some-value',
                    '503' => 'some-value',
                    '504' => 'some-value',
                    '505' => 'some-value',
                    '506' => 'some-vaslue'
                    ),
                ),
            ),
        ),
    '105' => 'some-value',
    '106' => 'some-value',
    '107' => 'some-value'
);

function recursearray($array, &$modarray){

    foreach($array as $key => $value){

        if (is_array($value)){

            recursearray($value);
            // append keys to this nested array
                ???
        }else{

            // change current key's value
                ???

        }

    } 

}

recursearray($orgarray, $modarray);

echo '<pre>';
print_r($modarray);
echo '</pre>'; 
```

我在这里做错了什么？

1.  我无法更改当前键的值

2.  这根本不会输出数组

*编辑* 好 - 我改变了调用函数的方式：

```
function recursearray($array, &$modarray){
    if(!isset($modarray)) {
        $modarray = array();
    }

    foreach($array as $key => $value){

        if (is_array($value)){

            recursearray($value, &$modarray);
            // append keys to this nested array
            // neither of these work
            array_push($value['newkey'] = 'new_value');
            $value['newkey'] = 'new_value';

        }else{

            // change current key's value
            $array[$key] = 'value';

        }

    } 
    return $array;
}

$modarray = recursearray($orgarray, $modarray); 
```

现在它几乎就在那里，但我仍然不明白为什么对函数的原始调用不起作用（ recursearray($orgarray, $modarray); ）以及尝试向嵌套数组添加键的 2 种方法也不起作用.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:19:51.830

我认为这会起作用：

```
<?php    
function recursearray(&$array){
    foreach($array as $key => &$value){
       if (is_array($value)){
          recursearray($value);
       }else{
          $value = 'other-value';
       };
    };
};
?> 
```

注意`foreach($array as $key => &$value){`

问候！

# java - 将控制台输出到文本文件？- 爪哇

> ID：14906458
> 
> 赞同：0
> 
> 时间：2013-02-16T02:58:24.443
> 
> 标签：java, console, text-files

鉴于我的代码：

```
import java.util.Scanner;

public class AccountTest {

    public static void main(String[] args) {
        Account account1 = new Account(50.00);
        Account account2 = new Account(0.00);

        System.out.printf("account1 balance: $%.2f\n", account1.getBalance());
        System.out.printf("account2 balance: $%.2f\n\n", account2.getBalance());

        Scanner input = new Scanner(System.in);

        System.out.print("Enter withdrawal amount for account1: ");

        double withdrawalAmount = input.nextDouble();

        System.out.printf("\nsubtracting %.2f from account1 balance\n",
                withdrawalAmount);

        account1.debit(withdrawalAmount);

        System.out.printf("account1 balance: $%.2f\n", account1.getBalance());
        System.out.printf("account2 balance: $%.2f\n\n", account2.getBalance());

        System.out.print("Enter withdrawal amount for account2: ");
        withdrawalAmount = input.nextDouble();
        System.out.printf("\nsubtracting %.2f from account2 balance\n",
                withdrawalAmount);
        account2.debit(withdrawalAmount);

        System.out.printf("account1 balance: $%.2f\n", account1.getBalance());
        System.out.printf("account2 balance: $%.2f\n", account2.getBalance());
    }
} 
```

如何将“System.out.printf”转储到文件中（转储为不擦除文件内容）？或者可能为每个实例创建单独的文件。初学者在这里感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:07:20.740

1）您可以在运行程序时将标准输出重定向到文件

```
java AccountTest >> test.txt 
```

2）您可以在程序开始时重新分配标准输出

```
 PrintStream out = new PrintStream(new FileOutputStream("test.txt", true));
    System.setOut(out); 
```

3）您可以使用 java.io.PrintWriter 而不是 System.out

```
 PrintWriter out = new PrintWriter(new FileWriter("test.txt", true));
    out.printf( "account1 balance: $%.2f\n", account1.getBalance() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:10:00.737

这取决于你如何运行这个程序。如果你手头有一个 POSIX shell，你可以将它的标准输出重定向到一个文件。

以下将附加到日志文件：

```
$ java -jar myjar.jar >> log 
```

这个每次都会创建一个新的以纪元为日期的日志文件（这`$(…)`可能是一个特定于 bash 的功能，我不确定）：

```
$ java -jar myjar.jar > log-$(date +%s) 
```

# python - 无法使用 Django ModelForm 进行模型绑定

> ID：14906461
> 
> 赞同：1
> 
> 时间：2013-02-16T02:59:18.827
> 
> 标签：python, django, modelform

假设我在 Python 中有一个模型类：

```
class Question(models.Model):
    title = models.CharField('Title', max_length=300)
    description = models.CharField('Description', max_length=800)
    publish_date = models.DateTimeField('Pulished Date')
    question_type = models.CharField(max_length=10) 
```

我想将它与 ModelForm 绑定：

```
class QuestionForm(ModelForm):
    class Meta:
        model = Question
        fields = ('title', 
              'description', 
              'publish_date', 
              'question_type') 
```

当我尝试在 shell 中创建对象时，我收到此错误：

```
>>> form = QuestionForm()
>>> from django.utils import timezone
>>> form.publish_date = timezone.now().year
>>> form.save()
IntegrityError: (1048, "Column 'publish_date' cannot be null") 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:05:41.083

嗯，是的：你已经错过了表单的全部目的。

只是手动分配一个与模型属性同名的属性根本不会做任何事情。这不是表单的工作方式。表单通过接受一个`data`参数来工作，该参数是将字段名映射到值的字典。然后你打电话`form.is_valid()`来验证它。只有这样你才能打电话`form.save()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:27:49.773

您需要[在表单或字段中添加验证](https://docs.djangoproject.com/en/dev/ref/forms/validation/)。

```
class Question(models.Model):
    title = models.CharField('Title', max_length=300)
    description = models.CharField('Description', max_length=800)
    publish_date = models.DateTimeField('Pulished Date', blank=False)
    question_type = models.CharField(max_length=10) 
```

在上面的代码片段中，您可以确保`published_date`使用`blank=False`. 正如丹尼尔所指出的，您还需要`form.is_valid()`在保存数据之前调用。

# java - 选项菜单不起作用

> ID：14906463
> 
> 赞同：0
> 
> 时间：2013-02-16T02:59:25.157
> 
> 标签：java, android, button, menu, options

我正在尝试扩充一个简单的选项菜单，我的代码中没有错误，但是当我单击应用程序中的菜单按钮时，什么也没有发生。下面是我的代码和菜单 xml 文件。先感谢您。

MainActivity.java：

```
package com.carouseldemo.main;

import com.carouseldemo.controls.Carousel;

import com.carouseldemo.controls.CarouselAdapter;
import com.carouseldemo.controls.CarouselAdapter.OnItemClickListener;
import com.carouseldemo.controls.CarouselAdapter.OnItemSelectedListener;
import com.carouseldemo.controls.CarouselItem;

import android.app.Activity;
import android.os.Bundle;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.MenuInflater;
import android.view.Menu;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public boolean onCreateOptionsMenu(Menu menu){
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.testmenu, menu);
        return true;

    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Carousel carousel = (Carousel)findViewById(R.id.carousel);

        carousel.setOnItemClickListener(new OnItemClickListener(){

            public void onItemClick(CarouselAdapter<?> parent, View view,
                    int position, long id) {    

                                  Toast.makeText(MainActivity.this, 
                        String.format("%s has been clicked",    
                        ((CarouselItem)view).getName()), 
                        Toast.LENGTH_SHORT).show();

            }

        });

            carousel.setOnItemSelectedListener(new OnItemSelectedListener(){

            public void onItemSelected(CarouselAdapter<?> parent, View view,
                    int position, long id) {

                final TextView txt = (TextView)(findViewById(R.id.selected_item));

                switch(position){
                case 0:
                    txt.setText("The cat (Felis catus), also known as the domestic cat or housecat to distinguish it from other felids and felines, is a small, usually furry, domesticated, carnivorous mammal that is valued by humans for its companionship and for its ability to hunt vermin and household pests. Cats have been associated with humans for at least 9,500 years, and are currently the most popular pet in the world. Owing to their close association with humans, cats are now found almost everywhere in the world.");
                    break;
                case 1:
                    txt.setText("The hippopotamus (Hippopotamus amphibius), or hippo, from the ancient Greek for \"river horse\" (á¼±Ï€Ï€Î¿Ï€ÏŒÏ„Î±Î¼Î¿Ï‚), is a large, mostly herbivorous mammal in sub-Saharan Africa, and one of only two extant species in the family Hippopotamidae (the other is the Pygmy Hippopotamus.) After the elephant, the hippopotamus is the third largest land mammal and the heaviest extant artiodactyl.");
                    break;
                case 2:
                    txt.setText("A monkey is a primate, either an Old World monkey or a New World monkey. There are about 260 known living species of monkey. Many are arboreal, although there are species that live primarily on the ground, such as baboons. Monkeys are generally considered to be intelligent. Unlike apes, monkeys usually have tails. Tailless monkeys may be called \"apes\", incorrectly according to modern usage; thus the tailless Barbary macaque is called the \"Barbary ape\".");
                    break;
                case 3:
                    txt.setText("A mouse (plural: mice) is a small mammal belonging to the order of rodents. The best known mouse species is the common house mouse (Mus musculus). It is also a popular pet. In some places, certain kinds of field mice are also common. This rodent is eaten by large birds such as hawks and eagles. They are known to invade homes for food and occasionally shelter.");
                    break;
                case 4:
                    txt.setText("The giant panda, or panda (Ailuropoda melanoleuca, literally meaning \"black and white cat-foot\") is a bear native to central-western and south western China.[4] It is easily recognized by its large, distinctive black patches around the eyes, over the ears, and across its round body. Though it belongs to the order Carnivora, the panda's diet is 99% bamboo.");
                    break;
                case 5:
                    txt.setText("Rabbits (or, colloquially, bunnies) are small mammals in the family Leporidae of the order Lagomorpha, found in several parts of the world. There are eight different genera in the family classified as rabbits, including the European rabbit (Oryctolagus cuniculus), cottontail rabbits (genus Sylvilagus; 13 species), and the Amami rabbit (Pentalagus furnessi, an endangered species on Amami ÅŒshima, Japan)");
                    break;
                }

            }

            public void onNothingSelected(CarouselAdapter<?> parent) {
            } 

        }
        );

    }

} 
```

testmenu.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/item1" android:title="Option A"></item>
    <item android:id="@+id/item2" android:title="Option B"></item>
    <item android:id="@+id/item3" android:title="Option C"></item>
    <item android:id="@+id/item4" android:title="Option D"></item>

</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:17:54.420

当我在 Eclipse 上开发 android 时，这种情况发生在我身上很多次，清理和重建项目会修复它，因为它将重新创建 android 资源文件并正确映射到你的 UI id。

# r - 在二维 R 中排序

> ID：14906464
> 
> 赞同：1
> 
> 时间：2013-02-16T02:59:58.927
> 
> 标签：r

我有来自图像处理程序的数据，我需要将它们拼凑起来。我的图像数据最初是显微镜载玻片上的 18 个（6 x 3）孔阵列，我需要对这些孔进行一致的编号，以便以后可以识别每个孔中的内容。我有孔的近似 x 和 y 位置（以像素为单位），我想从左到右然后从上到下（似乎最简单）对它们进行排序，并将它们编号为 1 到 18。

像这样：

```
 [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    2    3    4    5    6
[2,]    7    8    9   10   11   12
[3,]   13   14   15   16   17   18 
```

警告：

- 并非所有孔都被图像处理程序拾取，因此有时少于 18 个。

- 并非同一行或同一列中的所有孔都在完全相同的 x 或 y 上，它们似乎在 20-40 像素内浮动。

- 并非所有图像都以同一点或完全相同的放大倍率为中心，因此良好的位置不足以可靠地对范围进行编码。

数据示例：

```
 Well BBXLeft BBYTop
1     0      39    637
2     1      43   1218
3     2     596    630
4     3     610   1212
5     4    1161    633
6     5    1164   1207
7     6    1710    623
8     7    1715   1202
9     8    2267    620
10    9    2271   1199
11   10    2824    617
12   11    2845   1197
13   12      35     57
14   13     593     53
15   14    1709     45
16   15    2262     41
17   16    2820     38 
```

或以可复制的形式来自`dput`：

```
wells <- structure(list(Well = 0:16, BBXLeft = c(39L, 43L, 596L, 610L,1161L, 1164L, 1710L, 1715L, 2267L, 2271L, 2824L, 2845L, 35L, 593L, 1709L, 2262L, 2820L), BBYTop = c(637L, 1218L, 630L, 1212L, 633L, 1207L, 623L, 1202L, 620L, 1199L, 617L, 1197L, 57L, 53L, 45L, 41L, 38L)), .Names = c("Well", "BBXLeft", "BBYTop"), class = "data.frame", row.names = c(NA, -17L)) 
```

图像分析程序中的井出现故障 此示例缺少井 #15（如果从 0 开始计数，则缺少 14）

理想的输出将是一个带有左右、上下井号（甚至“战舰”坐标）的新列

抱歉，如果这是一个家庭作业问题，但我真的不知道如何有效地做到这一点，而无需对截止点进行硬编码。我使用 R 是因为它是我掌握的唯一语言，并且我已经准备好围绕这个问题编写其他代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T04:23:49.467

下面的代码将帮助您根据像素位置对孔进行分类。但是，也许更重要的是以下内容——
这些是您针对像素位置绘制的 WellNumber 标签。 **这种标记方案是有意的，还是在标记图像数据时井位置被打乱了？**

![在此处输入图像描述](../Images/15f2e2ea1a8794f8501fbb7d80f0cc56.png)

* * *

为了对您的数据进行排序，我们只需要一个自然的中断，例如图像大小。在下面的示例中，我选择了 500，但您可以根据需要进行调整。

```
# sort & plot the pixel corners, to get an idea for where the boundaries re
sort(wells$BBXLeft)
sort(wells$BBYTop)

plot(x=wells$BBXLeft, y=wells$BBYTop)

# add an NA for the missing value (we cant just ignore it)
wells[18,] <- c(NA, 1100, 30) 

imgSize <- 500
nrows <- 3
ncols <- 6

# Assign row and col number based on boundaries set every 'imgSize'
#  Note that rows are reversed, top to bottom
wells$row <- cut(wells$BBYTop,  breaks=seq(imgSize*nrows, 0, -imgSize), label=1:nrows)
wells$col <- cut(wells$BBXLeft, breaks=seq(0, imgSize*ncols, imgSize), label=1:ncols)

# your battleship coordinates
wells$battleship <- paste0("(", wells$row, ", ", wells$col, ")")

# then to sort it,  sorting by rows, then by cols
orderedWells <- wells$WellNo[order(wells$row, wells$col)]

# if you want to lay it out nicely, use a matrix
matrix(orderedWells, nrow=nrows, ncol=ncols, byrow=TRUE)

 #          [,1] [,2] [,3] [,4] [,5] [,6]
 #     [1,]   12   13   NA   14   15   16
 #     [2,]    0    2    4    6    8   10
 #     [3,]    1    3    5    7    9   11 
```

# iphone - 在打开多任务栏之前视图不可见 - iPhone

> ID：14906465
> 
> 赞同：0
> 
> 时间：2013-02-16T03:00:07.730
> 
> 标签：iphone, objective-c

在 iPhone 3.5 英寸显示器 ios 5.1 上运行时，我第一次遇到自动布局崩溃 - 通过关闭自动布局来解决这个问题。但是，现在，当我运行应用程序时，屏幕是黑色的。仅当我双击主页按钮以唤起多任务栏时，该视图才可见。很奇怪，对吧？

在应用启动时：

![在此处输入图像描述](../Images/7e3c5cdee3de96cf5105b5ddb67dee36.png)

当唤起多任务处理时。

![在此处输入图像描述](../Images/102ee1b3c83e70e93ab11997f0775bff.png)

代码片段：

```
 if(screenSize.height == 480) {
        // iPhone Classic
        welcomeViewController = [welcomeViewController initWithNibName:@"WelcomeViewController~iphone3.5" bundle:nil];
        viewController = [viewController initWithNibName:@"selectZone~iphone3.5" bundle:nil];
        fixtureViewController = [fixtureViewController initWithNibName:@"fixture~iphone3.5" bundle:nil];

        [windowOldiPhone addSubview:fixtureViewController.view]; 
        [windowOldiPhone addSubview:viewController.view];
        [windowOldiPhone addSubview:welcomeViewController.view];
        [windowOldiPhone makeKeyAndVisible];
        [windowOldiPhone bringSubviewToFront:welcomeViewController.view];
    } 
```

注意：这不会发生在运行 iOS 6 的 iPhone/iPad 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:29:31.903

先打电话`bringSubviewToFront`再打电话`makeKeyAndVisible`。像下面这样

```
if(screenSize.height == 480) {
        // iPhone Classic
        welcomeViewController = [welcomeViewController initWithNibName:@"WelcomeViewController~iphone3.5" bundle:nil];
        viewController = [viewController initWithNibName:@"selectZone~iphone3.5" bundle:nil];
        fixtureViewController = [fixtureViewController initWithNibName:@"fixture~iphone3.5" bundle:nil];

        [windowOldiPhone addSubview:fixtureViewController.view]; 
        [windowOldiPhone addSubview:viewController.view];
        [windowOldiPhone addSubview:welcomeViewController.view];

        [windowOldiPhone bringSubviewToFront:welcomeViewController.view];
 [windowOldiPhone makeKeyAndVisible];
    } 
```

# java - 您从哪里获得用于打印预览的斑马打印机字体？

> ID：14906466
> 
> 赞同：8
> 
> 时间：2013-02-16T03:00:08.603
> 
> 标签：java, fonts, print-preview, zpl-ii

我通过发送 ZPL II 命令使用 Java 使用 Zebra 打印机打印标签。我想在将标签发送到打印机之前显示标签的预览。

我不想尝试将字体发送到打印机，而是使用内置字体。

[我可以在编程指南第 2 卷](http://www.zebra.com/content/dam/zebra/manuals/en-us/printer/zplii-pm-vol2-en.pdf)的第 60 页上看到字体列表。其中有 15 个，每个都标有一个字母，并且没有提及等效屏幕字体的名称。

我可以生成一个图像来显示条形码，但我无法弄清楚如何正确显示文本，因为在 OCR 字体之外，我不知道在屏幕上可以使用等效字体。

我在 Zebra 的网站上没有找到任何列出它们的文档，我的搜索只是返回关于如何将屏幕字体发送到打印机的结果（这看起来很复杂，我现在想避免）。

有谁知道我在哪里可以得到字体，或者你能给我提供一份（希望是免费的）等价物列表吗？

我截取了手册中显示[的字体](https://i.imgur.com/mcn3b6K.png)以供参考。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T05:27:59.547

经过大量研究，我发现 Zebra 使用的字体由于许可而受到严格保护。

联系 Zebra 以获取字体许可证是您唯一的选择。

我现在使用的替代方法是使用免费分发的等宽真字体（我还没有选择）预览标签。我在问题中链接的文档提供了内置字体的大小和间距信息，因此我可以尽可能接近地进行模拟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T21:30:39.987

除 0 外，Zebra 字体都是位映射的固定宽度字体。快递应该给你一个合理的近似值。只需使用 Zebra 手册中的表格对它们进行缩放。zpl-zbl2-pm-en.pdf

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-07T13:10:16.160

以防有人偶然发现这个问题。

[您可以使用http://labelary.com/](http://labelary.com/) API生成标签预览。

# javascript - 如何手动调用 Backbone.js 视图的方法

> ID：14906470
> 
> 赞同：1
> 
> 时间：2013-02-16T03:00:51.117
> 
> 标签：javascript, html, backbone.js, browser-extension

[我正在为使用Backbone.js](http://backbonejs.org/)的网站编写浏览器扩展。它的相关代码如下所示（已更改名称以保护无辜者）：

```
var BigContainer = BigContainer || {};
(function($, exports) {
    var Thing = Backbone.View.extend({
    ...

    useful_func: function() {
        // Does something I need to call
    },
    ...
});

(function($, exports) {
    BigContainer.BaseView = Backbone.View.extend({
    ...
    render: function() {
        this.local_thing = new Thing({
            el: '.local_thing'
        });
    }
    ...
}); 
```

我还在一个`<script>`块中插入了一些代码来监听`postMessage()`我从我的扩展注入的 javascript 文件中进行的调用。我希望能够`useful_func`从那里打电话，但不知道如何，或者如果我什至应该这样做（如果没有，那么我怎样才能达到相同的结果）。

例如，我尝试了以下引用，所有这些都显示为未定义：

*   `BigContainer.BaseView.$local_thing`
*   `BigContainer.BaseView.local_thing`
*   `Thing`
*   `document.getElementsByClassName('local_thing')[0].useful_func`

重要的是，由于我正在为我不拥有的网站编写扩展程序，因此我无法修改该网站的 Backbone.js 代码来帮助自己。我需要处理那里的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:26:25.797

使用该行`BigContainer.BaseView = Backbone.View.extend({`，您正在定义一个名为 的新视图类型`BaseView`，但它只是定义。您需要的是代码中视图的实际实例。那将是您所做的某处`new BaseView`（在这种情况下，如下所示：）

```
// Where view is created
(function($, undefined) {
    BigContainer.OtherThing = {
    ...
    create: function(config, params) {
        this.view = new BigContainer.BaseView(...);
    }
    ...
}) 
```

找到后，您将执行以下操作：

```
// Your code, reach into that instance and its subview, and call 'usefulFunc'.
BigContainer.OtherThing.view.local_thing.useful_func(); 
```

# java - Java帮助将UDP数据包转换为int

> ID：14906474
> 
> 赞同：0
> 
> 时间：2013-02-16T03:02:19.900
> 
> 标签：java, split, udp

我收到一个 UDP 数据包（我不知道哪种格式，我认为是 UTF-16 -little endian-），我只知道以下文档。直接从开发者页面：

> 每个主服务器通过发送 FF FF FF FF 73 0A 后跟（相对）唯一的 4 字节“挑战”号来响应。

所以这就是我接收数据包的方式：

```
byte[] buff = new byte[64];
DatagramPacket packet = new DatagramPacket(buff, buff.length);
socket.receive(packet); 
```

数据包已收到，一切正常，但现在我被卡住了。我需要那个 4 字节整数。我必须拆分缓冲区，否则……我不知道该怎么办。

这是接收到的数据：

```
˙˙˙˙s
Ň?t 
```

我尝试转换为十六进制，但输出非常有趣：

> -0000000000000000000000000008cf52df7c08c

转换方法：

```
public String toHex(String arg) throws UnsupportedEncodingException {
   return String.format("%040x", new BigInteger(arg.getBytes("UTF-16LE")));
} 
```

比我尝试将十六进制转换为字符串（从上面的方法），结果更有趣（对不起，我不能复制粘贴，出了点问题），无论如何用于将十六进制转换为字符串的方法是：

```
public String hexToString(String hex){
   StringBuilder output = new StringBuilder();
   for (int i = 0; i < hex.length(); i+=2) {
      String str = hex.substring(i, i+2);
      output.append((char)Integer.parseInt(str, 16));
   }

   return new String(output);
} 
```

所以说了这么多，我被困住了。我不知道我该怎么做。我需要将 UDP 数据包分割成碎片还是……？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:48:26.237

> 我收到一个 UDP 数据包（我不知道哪种格式，我认为是 UTF-16 -little endian-），我只知道以下文档。

您确实需要找出数据包实际包含的内容。您在问题中发布的数据包内容对我来说没有多大意义，并且似乎与假定的格式不对应。

首先转储字节数组的字节，如下所示：

```
byte[] bytes = ...
int len = // number of bytes read.
for (int i = 0; i < len; i++) {
    System.out.format("%02x ", bytes[i]);
} 
```

然后将其与文档中的预期格式进行比较。如果它们匹配（或多或少），那么您可以从决定如何提取所需数据的问题开始。否则，您首先需要弄清楚格式到底是什么。也许我们可以提供帮助……但我们需要一个*可靠*的数据包渲染（例如，如上生成的。）

* * *

FWIW，您得到的原因`-0000000000000000000000000008cf52df7c08c`是（我认为）`BigInteger(byte[])`将字节数组解释为有*符号*数。无论如何，这不是一个好方法。UDP 数据包主体是字节序列，而不是数字。

* * *

我也认为UDP数据包不太可能是UTF-16。FFFF 在官方 Unicode 代码表中是这样描述的：

> 非字符：
> 
> 这些代码旨在供流程内部使用，但不允许互换。[...]
> 
> FFFF : • FFFF 值保证不是 Unicode 字符

因此，如果有人声称这是 UTF-16，则该用法违反了 Unicode 标准。

# php - 桌子高度？

> ID：14906475
> 
> 赞同：0
> 
> 时间：2013-02-16T03:02:38.757
> 
> 标签：php, html-table

![显示错误](../Images/5d5851bb1798d4e91d730cfdd98b80f1.png)

![正确显示](../Images/937f423576d3dc3b9f947d1ffe55bc47.png)

首先显示错误的显示。请注意这些行如何与其余行不一致。当注释超过一行时，我希望消息循环播放并且其他两个表格的高度相同，以便正确显示数据。

我在这里看到了一个 javascript 解决方案，但它似乎在我的代码中不起作用。虽然看起来并没有什么不同。也许我只是错误地实施了它。其中之一会很好，因为我真的不想制作一些真正复杂的 css 文件或任何东西。

这是我未编写的表格代码。

```
<table class="detail_status">
<tr>
    <th>Status History</th>
    <th>Outstanding Hours</th>
    <th>User Notes</th>
</tr>
<tr>
    <td>
        <form action="..." method=post>
            <select name="change_status">
                <option value="unset">Change Status</option><option value="New">New</option><option value="Remote Actions Completed">Remote Actions Completed</option><option value="On-Site Actions Completed">On-Site Actions Completed</option><option value="Company Tech Dispatched">Company Tech Dispatched</option><option value="Tech On Site">Tech On Site</option> </select>
                <input type="submit" name="change_status_button" value="Change">
        </form>
    </td>
    <td>&nbsp;</td> <!-- Yeah I know. I'm going to fix the CSS later. -->
    <td>
        <form method="post" action="...">
            <input type="submit" name="edit_notes" value="Edit Recent Note">
        </form>
    </td>
</tr>
<tr>
    <td class="status_1">
        <table class="tabInTab">
            <tr class="added"><td><b>Fixed by Contractor<b></td></tr>   <tr><td>Tech On Site</td></tr>  <tr><td>Remote Actions Completed</td></tr>  <tr><td>Company Tech Dispatched8</td></tr>  
            </table>
    </td>
    <td class="status_2">
        <table class="tabInTab">
            <tr><td>1 hrs 17 mins</td></tr> <tr><td>1 hrs 18 mins</td></tr> <tr><td>21 hrs 48 mins</td></tr>    <tr><td>21 hrs 49 mins</td></tr>
            </table>
    </td>
    <td  class="status_3">
        <table class="tabInTab">
                <tr><td>Long textLong textLong textLong textLong textLong textLong textLong textLong textLong textLong textLong text</td></tr><tr><td>None</td></tr><tr><td>None</td></tr><tr><td>None</td></tr>
            </table>
    </td>
</tr> 
```

```
echo '<table class="detail_status">
                                <tr>
                                    <th>Status History</th>
                                    <th>Outstanding Hours</th>
                                    <th>User Notes</th>
                                </tr>';
                            if($row['resolution'] == '') {  
                        echo    '<tr>
                                    <td>
                                        <form action="'.$_SERVER['REQUEST_URI'].'" method=post>
                                            <select name="change_status">
                                                <option value="unset">Change Status</option>';
                                                $status_list = "SELECT status FROM current_status";
                                                $result_status = mysqli_query($db, $status_list);
                                                while($stat = mysqli_fetch_array($result_status)) {
                                                    $status = $stat['status'];
                                                    echo "<option value=\"$status\">$status</option>";
                                                }
                                                echo' </select>
                                                <input type="submit" name="change_status_button" value="Change">
                                        </form>
                                    </td>
                                    <td>&nbsp;</td>';
                                    if(!isset($_POST['edit_notes'])) {
                                        echo'   <td><form method="post" action="'.$_SERVER['REQUEST_URI'].'">
                                                    <input type="submit" name="edit_notes" value="Edit Recent Note">
                                                    </form>
                                                </td>';
                                    }
                                    else {
                                        echo'   <td><form method="post" action="'.$_SERVER['REQUEST_URI'].'">
                                                    <input type="submit" name="save_notes" value="Save Note">                                       
                                                </td>';
                                    }
                                echo '</tr>';
                            }                       
                        if($statusPrev1 != '' && $statusPrev2 != '' && $statusPrev3 != '') {
                            $dispCount = 3;
                        }
                        else if($statusPrev1 != '' && $statusPrev2 != '') {
                            $dispCount = 2;
                        }
                        else if($statusPrev1 != '') {
                            $dispCount = 1;
                        }
                        else { //No status set
                            $dispCount = 0;
                        }
                        echo    '<tr>
                                    <td class="status_1">
                                        <table class="tabInTab">
                                            <tr class="added"><td><b>'.$currStatus.'<b></td></tr>';
                                            for($x=1;$x<=$dispCount;$x++) {
                                                echo'   <tr><td>'.getPrevious('status', $previous, $x).'</td></tr>';
                                            }
                                echo'   </table>
                                    </td>
                                    <td class="status_2">
                                        <table class="tabInTab">
                                            <tr><td>'.calcHoursOutstanding($status_timestamp).'</td></tr>';
                                            for($x=1;$x<=$dispCount;$x++) {
                                                echo'   <tr><td>'.calcHoursOutstanding(getPrevious('time', $previous, $x)).'</td></tr>';
                                            }
                                echo    '</table>
                                    </td>
                                    <td  class="status_3">
                                        <table class="tabInTab">';
                                            if(!isset($_POST['edit_notes'])) {
                                                echo '<tr><td>'.$notes.'</td></tr>';
                                                for($x=1;$x<=$dispCount;$x++) {
                                                    echo '<tr><td>'.getPrevious('notes', $previous, $x).'</td></tr>';
                                                }
                                            }
                                            else {
                                                    if(isset($_POST['note_text'])) { //Probably Unneccesary? 
                                                        echo '<input type="textbox" name="note_text" value="'.$_POST['note_text'].'">';
                                                    }
                                                    else {
                                                        echo '<input type="textbox" name="note_text" value="'.$notes.'">';
                                                    }
                                                    //End of Save note form. Have to end it here to have the note_text be POSTed
                                                    echo '</form>';                                         
                                                //Started index at 2 to skip first one which is displayed above.    
                                                for($x=1;$x<=$dispCount;$x++) {
                                                    echo'   <tr><td>'.getPrevious('notes', $previous, $x).'</td></tr>';
                                                }
                                            }
                                echo    '</table>
                                    </td>
                                </tr>
                            </table>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:17:29.590

您不应该像现在这样嵌套表格。您需要确保表格中的每一行都包含三个单元格。您这样做的方式是允许各个表独立增长，而无需相互尊重。

在 jsFiddle 上查看我的：http: [//jsfiddle.net/vzBrF/](http://jsfiddle.net/vzBrF/)

这是你的行应该是这样的：

```
<tr>
    <td class="status_1">Fixed by Contractor</td>
    <td>1 hrs 17 mins</td>
    <td>Long textLong textLong textLong textLong textLong textLong textLong textLong textLong textLong textLong tex</td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:22:55.407

**好消息：**感谢 Jeff 提醒我保持简单，我明白了。我想当我在获得信息逻辑之前将其全部输入时，我会以一种特定的方式想象它。 **坏消息：**我现在问这个问题我都觉得自己是个傻瓜。

```
echo    '<tr>
        <td class="status_1 added"><b>'.$currStatus.'<b></td>
        <td>'.calcHoursOutstanding($status_timestamp).'</td>
        <td>';
        if(!isset($_POST['edit_notes'])) {
            echo $notes;                                            
        }
        else {
            if(isset($_POST['note_text'])) { //Probably Unneccesary? 
                echo '<input type="textbox" name="note_text" value="'.$_POST['note_text'].'">';
            }
            else {
                echo '<input type="textbox" name="note_text" value="'.$notes.'">';
            }
            //End of Save note form. Have to end it here to have the note_text be POSTed
            echo '</form>';     
        }
        echo' </td>
    </tr>'; ///End current info row
    for($x=1;$x<=$dispCount;$x++) {
        echo '<tr>  
                <td class="status_1">'.getPrevious('status', $previous, $x).'</td>
                <td class="status_2">'.calcHoursOutstanding(getPrevious('time', $previous, $x)).'</td>
                <td class="status_3">'.getPrevious('notes', $previous, $x).'</td>
              </tr>';
    } 
```

# php - 试图从 SQL 返回 true 或 false

> ID：14906479
> 
> 赞同：2
> 
> 时间：2013-02-16T03:04:23.783
> 
> 标签：php, mysql, sql, rows

这是我的代码：

```
$result_username = mysqli_query($dbconnection, Data::checkForUsername($username)); 
```

然后到这里：

```
 public static function checkForUsername($username) {
            global $database;

            $query = "
                SELECT COUNT(*) 
                FROM users 
                WHERE username='{$username}';";

            $result = $database -> query($query);

            return $result;
        } 
```

然后 $result 这样做：

```
if (mysqli_result($result_username, 0) > 0) { 
```

但是，它又给了我一个 Resource_Id?? 我想不通为什么？

我只是想检查用户名是否存在于至少 1 行中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:10:40.283

执行查询后，您需要获取数据

```
$row = $result->fetch_array(MYSQLI_NUM);
return $row[0]; 
```

**更新：**现在，使用准备好的语句，您的函数可以如下所示：

```
public static function checkForUsername($username) {
    global $database;

    $result = 0;
    $query = "SELECT COUNT(*) FROM users WHERE username=?";
    /* create a prepared statement */
    if ($stmt = $database->prepare($query)) {
        /* bind parameters for markers */
        $stmt->bind_param("s", $username);
        /* execute query */
        $stmt->execute();
        /* bind result variable */
        $stmt->bind_result($result);
        /* fetch value */
        $stmt->fetch();
        /* close statement */
        $stmt->close();
    }
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:11:29.927

你可以试试

```
return $result->num_rows 
```

然后

```
if (checkForUsername('Redeyes') != 0) {
} 
```

# data-structures - 给定一个随机数生成器，用它生成一个新的

> ID：14906480
> 
> 赞同：-1
> 
> 时间：2013-02-16T03:04:33.560
> 
> 标签：data-structures, random, puzzle

给定一个生成 1 到 5 之间随机数的函数 F，我将如何使用 F 编写一个函数 G 来生成 1 到 7 之间的随机数？

G生成的每个数字的概率应该是相同的。

到目前为止，我已经尝试了 equation `G=F + (5*(F/7))`，虽然我不确定所有的概率都是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:33:40.233

伪代码：

```
function g()
    repeat
        // result will be equidistributed in 0..24
        result = (f()-1)*5 + (f()-1);
        // wait till we have something below 21, on average this happens 21 out of 25 times in the first pass
        if (result < 21): return 1 + (result % 7) 
```

# javascript - 如何从基础对象继承函数并在 javascript 中覆盖它

> ID：14906482
> 
> 赞同：2
> 
> 时间：2013-02-16T03:05:42.453
> 
> 标签：javascript, inheritance, prototype, turbulenz

我想要做的是让一个子对象为基础对象中定义的函数提供自己的实现。据我所知，到目前为止，原型是最好的（唯一的！）方法。

另请注意，我目前正在使用游戏引擎进行开发：[Turbulenz](http://biz.turbulenz.com/developers)，因此我试图尽可能地遵循/坚持他们的风格。在引擎中，“类”/对象以下列方式定义和创建

```
function baseObject() { }
baseObject.prototype = 
{
    myMember1: 1,
    myMember2: 2,

    myMethod: function myMethodFn() {
        return this.myMember1 + this.myMember2;
    }
}

baseObject.Create = function baseObjectCreateFn
{
    var o = new baseObject();
    return o;
} 
```

这将允许我执行以下操作

```
var anObject = baseObject.Create();
var someValue = anObject.myMethod(); // should return 3 
```

我现在想做的是创建一个新对象，它继承了 baseObject 的所有属性，同时允许我覆盖它的 myMethod 函数，例如减去两个成员值而不是相加。

我是否正确地说我必须创建另一个对象然后更改其原型？最让我震惊的部分是baseObject原型的定义被定义为对象文字，所以我不确定覆盖其成员之一的语法，即以下内容是否有效？：

```
function childObject() {}

childObject.prototype = baseObject.Create() // would this inherit from baseObject?
// or should it be: childObject.prototype = new baseObject();

// this is the part thats confusing me as the syntax 
// doesn't quite match the original base objects prototype 
// syntax and I'm unsure if that will matter
childObject.prototype.myMethod = function myMethodFn() {
    return this.myMember1 - this.myMember2;
} 

childObject.Create = function childObjectCreateFn
{
    var o = new childObject();
    return o;
}

var aChildObject = childObject.Create()
var anotherValue = aChildObject.myMethod() // would this return -1 as expected? 
```

总而言之，我正在尝试创建一个对象，该对象将通过从基础对象继承函数并更改它来覆盖基础对象中存在的函数，我该怎么做？谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:21:25.000

你说得对。

至于语法混乱，两者之间没有真正的区别

```
thing.prototype.myMethod = function () { ... } 
```

和

```
thing.prototype = { myMethod: function() { ... } }; 
```

除了在第二个中你*一次*设置原型（到一个[对象字面](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)量），如果你再做一次，你会用一个新的对象字面量*一次覆盖原型。*但是因为它是一个对象字面量，所以不能以这种方式进行继承（用裸花括号声明的所有内容都`{ ... }`只是一个`Object`没有特殊类型的实例）。如果您坚持使用第一种语法，您将永远没事。

请注意，当您放置：

```
childObject.prototype.myMethod = function myMethodFn() { ... } 
```

您放置的部分`myMethodFn`实际上被忽略了。该函数的命名`myMethod`是因为这是您分配它的位置。

同样，你有

```
childObject.Create = function childObjectCreateFn 
```

你不需要`childObjectCreateFn`（它被忽略），你需要在后面的`()`某个地方加上括号，`function`否则它是一个语法错误。

继续说明为什么会这样，在 Javascript 中创建的每个对象都有一个原型。当您对该对象调用方法时，它首先会在对象本身内部查看是否存在与该方法名称对应的键。如果没有，它会在原型对象中查找相同的东西，如果不存在，它会转到该对象的原型，依此类推，直到它到达`Object`没有原型的根。

通过这种方式，您可以覆盖一个实现，只需将其命名为相同的东西，但让它出现在原型链的更早的位置。这正是你正在做的事情`childObject`。它保留了 的功能，`baseObject`因为您创建了一个 baseObject 实例作为`childObject`的原型。`childObject`然后你用一个同名的新方法扩充了 的原型，但这个方法在原型链中出现得更早。

# ruby-on-rails - Heroku rake db：迁移

> ID：14906483
> 
> 赞同：3
> 
> 时间：2013-02-16T03:05:55.013
> 
> 标签：ruby-on-rails, ruby, heroku

Heroku 告诉我，有些迁移还没有运行，而显然它们已经运行了。看起来它落后于一次迁移。我怎么能解决这个问题。

当我运行`rake db:migrate`它告诉我`rake aborted Mysql2::Error: Duplicate column name`。我知道这些字段已经创建，也很确定迁移已经运行，因为这些字段在任何其他迁移中都不存在，并且 rake db:migrate 在我的本地系统上运行得很好。

我怎样才能解决这个问题？我认为 Heroku 只是没有意识到它已经进行了迁移。我怎么能告诉它“你已经运行了迁移 xxx”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T03:20:53.917

这可能意味着您运行了一次，但失败了；mysql 中的表更改不是事务性的，因此您可能会处于不良状态。一些更改可能已经运行，但不是全部。

您唯一能做的就是确定哪些部分已经运行，在迁移中注释掉那些行，提交并推送并运行迁移，绕过已经运行的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T04:01:16.910

如果迁移未完全应用，请执行以下操作之一：

*   使用 dbconsole 撤消已应用的更改，然后再次运行迁移，或者
*   `schema_migrations`使用 dbconsole 手动更改剩余的模式，然后在表中插入一条记录。

根据迁移脚本中的更改类型，您需要确定以上哪一项最简单。如果已应用的更改是破坏性更改，例如删除列或表，您可以重新创建列或表，以便迁移能够运行。如果剩余的更改很容易转换为 SQL，那么这可能会更容易。

向表中插入一条记录`schema_migrations`将使应用程序认为迁移已成功应用。仅当您完全满意迁移更改已完全应用时才执行此操作。它有一列，`version`，需要包含迁移文件名的数字部分。

[http://api.rubyonrails.org/classes/ActiveRecord/Migration.html](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html) [http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

最后，这是一个为什么你应该使用 Postgres 而不是 MySQL 的例子。Postgres 能够回滚事务中的（大多数）模式更改，因此您不会被半应用迁移。

# objective-c - 如何从正则表达式捕获组中修剪空白？

> ID：14906492
> 
> 赞同：8
> 
> 时间：2013-02-16T03:08:03.550
> 
> 标签：objective-c, regex

正在检查的字符串类似于以下内容（注意括号之间的空格）：

```
[name]  [address ] [ zip] [ phone number ] 
```

我目前使用的表达...

```
\[([^\])]*)\] 
```

...成功捕获括号内的每个文本，但它也抓住了前导和尾随空格，所以我最终得到：

```
"name"  "address "  " zip"  " phone number " 
```

但我寻求的是：

```
"name"  "address"  "zip"  "phone number" 
```

如何说服正则表达式不捕获这些示例中的空格？（除了嵌入的空格 - 例如“电话号码”中的单词之间的空格。）

（注意：我知道我可以在表达式完成*后*从捕获的变量中修剪它，但我试图*在*表达式的上下文中进行。）

感谢您的任何想法！下面是我用来测试的确切代码：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\[([^\\])]*)\\]" options:0 error:nil];

NSString *string = @" [name] [address ] [ zip] [ phone number ] ";

NSString *modifiedString = [regex stringByReplacingMatchesInString:string options:0 range:NSMakeRange(0, [string length])
    withTemplate:@"\n\n[$1]"]; //note: adding brackets back here just to make it easy to see if the space has been trimmed properly from the captured value

NSLog(@"\n\n%@", modifiedString); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:11:50.747

我将逐步完成此操作。

首先，`([^\])]*)`不正确。这意味着“一个包含 0 个或多个字符的序列，尽可能长，不包含 ] 或 )。

例如，对于这个表达式：

```
 [name] [address ) ] [ zip] [ phone number ] 
```

...地址部分将被跳过，因为“地址）”不匹配`[^\)]]*`（这意味着“零个或多个字符的序列，不包括）和]。”

相反，我们想要`([^\]]*)`，它不会跳过）。

接下来，我们想吃掉捕获周围的所有空间。为此，我们使用两个` *`序列，一个在捕获的每一侧：

`\[ *([^\]]*) *\]`

现在我们需要变得棘手！`[^\]]*`默认情况下是贪婪的。这意味着任何一方的一些空间可能会被它匹配，因此包含在捕获中！我们想使用非贪婪版本`[^\]]*?`, 代替。这意味着“一个包含 0 个或多个字符的序列，不包含`]`，尽可能短，同时符合正则表达式的其余部分。”

`\[ *([^\]]*?) *\]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T03:29:40.720

```
@"\\[\\s*([^\\]]+?)\\s*\\]" 
```

或者

```
@"\\[ *([^\\]]+?) *\\]" 
```

小心输入上面的空格。

这不会捕获空格： NSLog output
[name]
[address]
[zip]
[phone number]

这 ”？” 使前面的元字符非贪婪，贪婪是默认值。

# javascript - this.image.width / number 产生 0

> ID：14906493
> 
> 赞同：0
> 
> 时间：2013-02-16T03:08:10.920
> 
> 标签：javascript

我正在尝试使用图像宽度来计算精灵的宽度，但数字总是显示为 0，这是为什么呢？

```
function SpriteSheet(image, numFramesX, numFramesY, totalFrames) {
    this.image = image;
    this.numFramesX = numFramesX;
    this.numFramesY = numFramesY;
    this.totalFrames = totalFrames;

    this.spriteWidth = this.image.width / this.numFramesX;
    this.spriteHeight = this.image.height / this.numFramesY;
}

image.onload = function() {
console.log('Image has been loaded');
}
image.src = 'dance.png';
spritesheet = new SpriteSheet(image, 8, 10, 80); 
```

spritesheet.spriteWidth 和 spritesheet.spriteHeight 总是产生 0。我将问题转向“this.image.width”，因为如果我手动输入图像的宽度，它就可以工作。

```
this.spriteWidth = 880 / this.numFramesX; 
```

代替

```
this.spriteWidth = this.image.width / this.numFramesX; 
```

如果我使用控制台中的对象计算它，它也可以工作：

```
spritesheet.image.width / spritesheet.numFramesX 
```

产量 110

[jsfiddle](http://jsfiddle.net/sunwooz/kxrEH/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:32:11.183

那个怎么样？

```
window.onload = function () {
    console.log('Image has been loaded');
    image.src = 'dance.png';
    spritesheet = new SpriteSheet(image, 8, 10, 80);
} 
```

# url - Apache Camel URL 用空格转义

> ID：14906495
> 
> 赞同：0
> 
> 时间：2013-02-16T03:08:12.440
> 
> 标签：url, apache-camel, escaping, space, apache-servicemix

我有一个简单的 Camel Route，它处理传入的 Http 请求，然后根据资源路径路由到其他 Http 消费者。一切正常，但我在路径中使用空格时遇到了 java.net.URISyntaxException: Illegal character in path 。其他特殊字符似乎工作正常。

我正在构建一个 RESTful API，目前正在使用浏览器来测试我的 API。

这是我的路线的 Spring DSL：

```
<route id="API">
   <from uri="jetty:http://0.0.0.0/api?matchOnUriPrefix=true"/>
   <bean ref="basicAuthBean"/>
   <choice>
     <when>
       <simple>${in.header.CamelHttpPath} contains 'blah1'</simple>
       <to uri="http://localhost:10001/api?bridgeEndpoint=true&amp;throwExceptionOnFailure=false"/>
     </when>
      <when>
       <simple>${in.header.CamelHttpPath} contains 'blah2'</simple>
       <to uri="http://localhost:10002/api?bridgeEndpoint=true&amp;throwExceptionOnFailure=false"/>
     </when>
   </choice>
</route> 
```

我在 Camel Context 上启用了跟踪，发现 CamelHttpPath 已经用空格替换了转义字符“%20”。我还看到有没有逃脱特殊字符的 CamelHttpUri。

作为我的 Spring DSL 中的一个 hack，我在选择元素之前添加了以下内容：

```
<setHeader headerName="CamelHttpPath">
  <simple>${in.header.CamelHttpUri}</simple>
</setHeader> 
```

这解决了我的问题，但我很确定有更好的方法来做到这一点。我错过了设置某些属性还是我的路由 DSL 不准确？

另外，CamelHttpPath 和 CamelHttpUri 有什么区别？

我还应该提到我在 Apache ServiceMix 4.4.2 中使用 Camel 上下文，使用的 Camel 版本是 2.8.5。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:13:42.923

我想我们已经在以后的 Camel 版本中修复了这个问题，因为它会像 Camel 2.10.4 等一样发布。我记得在那个空间修复上工作。 [https://issues.apache.org/jira/browse/CAMEL-5504](https://issues.apache.org/jira/browse/CAMEL-5504)

由于不再支持 Camel 2.8.x，您需要自己修补问题。或者升级到包含 Camel 2.10.3 的 ServiceMix 4.5.0。

# php - PHP - 为模板创建自定义变量

> ID：14906497
> 
> 赞同：0
> 
> 时间：2013-02-16T03:08:19.173
> 
> 标签：php, regex

我不知道具体怎么说，我举个例子吧。

```
//[$var:Username|n] will print username with n length
$myText = 'The participants are [$var:Username|10], [$var:Username|8], and [$var:Username|6]';
$username = array('Alexandrite', 'Maximillian', 'Angelina');
$result = someFunction('[$var:Username|n]', $username, $myText);
echo $result;
//The participants are Alexandrit, Maximill, and Angeli 
```

知道怎么做吗？也许使用 preg_replace？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:16:47.353

我很想知道为什么你甚至需要这样做。不管：

```
preg_replace_callback('/\[\$var:Username\|(\d+)\]/', function ($match)
    use (&$count, $username
) {
    return substr($username[$count++], 0, $match[1]);
}, $myText); 
```

# android - 无法理解 Android 中的日历和联系人数据（内容提供程序）

> ID：14906501
> 
> 赞同：1
> 
> 时间：2013-02-16T03:09:01.107
> 
> 标签：android, android-contentprovider, webdav, caldav, carddav

我用 PHP 构建了一个 CalDAV/CardDAV 服务器。下一步是创建一个 Android 客户端（不能使用现有的）。

我以前从未为 Android 开发过，所以我正在为这类项目寻找最佳方法。

我已经阅读了[http://developer.android.com](http://developer.android.com)，但还是有点模糊。我最大的问题是：**在 Android 中重用现有的日历/联系人应用程序或自己动手是否有意义？**

*   **我希望从与日历/联系人相同的屏幕访问我的同步功能/设置。** 这可能与默认日历/联系人应用程序（即某种插件）
*   简短的故事是从 CalDAV/CardDAV 服务器检索/推送到的数据将采用 .ics 和 .vcf 格式。 **我有点不清楚这将如何与“内容提供者”一起使用。**

因此，在同步时，是否会从 .ics/.vcf 中的服务器中提取数据，映射到“内容提供程序”并保存？或者反之，新保存到Content Provider的数据会不会被转换成.ics/.vcf，然后推送到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:39:43.627

> 在 Android 中重用现有的日历/联系人应用程序或自行开发是否有意义？

当然，如果您不重复使用这两个应用程序，用户可能不会选择安装您的应用程序。

> 这可能与默认日历/联系人应用程序（即某种插件）

是的，有可能，读/写日历有两种权限。

```
android.permission.READ_CALENDAR
android.permission.WRITE_CALENDAR 
```

WRITE_CALENDAR 允许应用程序写入用户的日历数据。

将这些权限放入您的 AndroidManifest.xml。然后，您将能够操作默认日历应用程序使用的内容提供程序。

```
calanderURL = "content://com.android.calendar/calendars";  //Calendar
calanderEventURL = "content://com.android.calendar/events";  //Events
calanderRemiderURL = "content://com.android.calendar/reminders"; //Reminders 
```

有很多教程，如[使用 Android 日历](http://www.developer.com/ws/android/programming/Working-with-the-Android-Calendar-3850276.htm)，介绍如何使用日历。

对于接触，它是相似的。两个权限：

```
android.permission.READ_CONTACTS
android.permission.WRITE_CONTACTS 
```

内容提供商：

```
ContactsContract.RawContacts.CONTENT_URI 
```

教程：

[联系人提供者](http://developer.android.com/guide/topics/providers/contacts-provider.html)

> 简短的故事是从 CalDAV/CardDAV 服务器检索/推送到的数据将采用 .ics 和 .vcf 格式。我有点不清楚这将如何与“内容提供者”一起使用。

您需要将这两个内容提供程序中的数据导出为您的 .ics 和 .vcf 格式。以联系人为例： [如何为android中的所有联系人创建一个.vcf文件](https://stackoverflow.com/questions/9582643/)

# git - Git - 我如何可靠地查询 master 中的任何文件是否在一段时间内通过合并或提交进行了更新？

> ID：14906503
> 
> 赞同：0
> 
> 时间：2013-02-16T03:09:32.687
> 
> 标签：git, cvs, git-diff

有许多问题试图将 CVS 的能力映射`cvs diff -D "1 days ago"`到 git：

[Git - 如何列出两次在主分支上更改的所有文件？](https://stackoverflow.com/questions/14863735/git-how-can-i-list-all-files-changed-on-the-master-branch-between-two-times)

[如何使用 Git 获取两个日期之间发生的所有提交之间的差异？](https://stackoverflow.com/questions/1161609/in-git-how-can-i-get-the-diff-between-all-the-commits-that-occured-between-two)

但是根据我对这个问题的评论的理解：

[复制 Git 裸仓库会更改日志吗？](https://stackoverflow.com/questions/14906091/git-does-copying-the-bare-repo-change-the-log)

执行`git diff --name-only master@{"5 day ago"} master`是您机器本地的，无法解决合并到 master 的问题。

我在想我需要使用`git whatchanged`并基于另一个问题（[Bash script to extract filenames from git whatchanged](https://stackoverflow.com/questions/9371077/bash-script-to-extract-filenames-from-git-whatchanged)）也许

`git show --pretty="format:" --name-only HEAD^`

但充其量我似乎在想我必须编写一个有点脆弱的脚本来解析特定日期内特定参考的各种 git 输出，然后将这些参考重定向到其他 git 命令以隔离在这些参考中修改了哪些文件，最后 concat结果。

我很震惊 git 还没有提供这个功能，因为我觉得它是一个基本的特性，特别是因为从我上面提到的问题来看，git 并没有完全重现 CVS 的美妙优势，`cvs diff -D "1 days ago"`如果 CVS 有git 上的东西，那么好吧，我对人性失去了所有的信心。

有人可以证明我错了吗？有没有办法可靠地查询 master 中的任何文件是否在一段时间内通过合并或提交进行了更新？

**问题**

这是我所做的导致我来到这里的：

1.  对您的存储库进行多次提交并将它们推送到源
2.  现在获取裸存储库并使用`cp -r --preserve`
3.  从此复制的裸存储库中，执行`git clone copy_of_everything`
4.  在`copy_of_everything`运行中`git diff --name-only master@{"5 day ago"} master`或自从您在步骤 1 中提交这些提交以来已经过了多久。

你会发现，至少我做到了，`git diff --name-only master@{"5 day ago"} master`因为你执行了克隆，所以找不到任何未完成的提交。

这似乎是无法接受的。那里的日志以长格式告诉我我需要知道的内容，但是我所知道的没有一两个命令可以告诉我自某个日期以来哪些文件已被修改。

**更新 1**

sleske 的评论似乎一针见血。`git diff --name-only master@{"5 day ago"} master`，基于 reflog 是一个坏主意，因为它基于对存储库状态的*本地修改。*

那么有没有不错的选择？

另外，感谢用户：qqx 首先用这个问题将我指向这个方向。

**更新 2**

有。sleke（现已接受）的回答解释了原因。

简而言之，我需要执行：

`git diff --name-only $(git log --until="1 days ago" -n1 --format=%H master ) master`

恢复了对人性的信仰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:31:09.387

不幸的是，我对`cvs diff -D`. 我假设它显示了自给定时间以来对文件所做的所有更改。如果你想用 git，你可以这样做：

```
git log --until="1 days ago" -n1 --format=%H 
```

这将打印 master 上超过 1 天的最后一次提交。

然后使用该提交的 ID 来获取一天前的提交与当前 HEAD（即分支的当前状态）之间的差异：

```
git diff <ID from step before> HEAD 
```

这将打印一个完整的差异。要获取文件列表，`--stat`请在末尾添加选项。这将为您提供摘要，例如：

```
 a/data.c      |  14 ++++++++
 b/stuff.c     |   2 +-
 b/code2.c     |  54 +++++++++++++++++------ 
```

我不知道用一个命令就能做到这一点；当然，您可以将两者结合在一行中（假设您使用`bash`）：

```
git diff $(git log --until="1 days ago" -n1 --format=%H) HEAD 
```

注意：这也将获取由合并引起的文件更改。它只是比较给定的两个提交（旧提交和 HEAD）的存储库状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:34:50.717

`git diff "master@{a month ago}".."master@{last week}"`从 reflog 中给出这些日期之间的差异，做一个`whatchanged`和一些 post-massage 会给你改变的文件。

# web-applications - FatFractal grabBagAdd() -- 错误 400：无法将 NULL 项添加到对象的抓包中

> ID：14906505
> 
> 赞同：2
> 
> 时间：2013-02-16T03:09:52.077
> 
> 标签：web-applications, custom-backend

使用 FatFractal JavaScript (HTML5) SDK 调用 grabBagAdd() 方法时出现错误。对于这个特殊问题，我的数据模型很简单，只涉及两种对象类型：自定义 Team 对象和默认的 FFUser 对象。

相关 FFDL 声明：

```
CREATE OBJECTTYPE FFUser (userName STRING, firstName STRING, lastName STRING, email STRING, active BOOLEAN, authDomain STRING, groups GRABBAG /FFUserGroup, notif_ids GRABBAG /FFNotificationID)
CREATE OBJECTTYPE Team (teamName STRING, members GRABBAG /FFUser)

CREATE COLLECTION /FFUser OBJECTTYPE FFUser
CREATE COLLECTION /Teams OBJECTTYPE Team 
```

JS 对象声明：

```
function Team(data){
    if(data){
        this.clazz = data.clazz;
        this.guid = data.guid;
        this.teamName = data.teamName;
    }
    else{
        this.clazz = "Team";
        this.guid = null;
        this.teamName = null;
    }
    return this;
}

function FFUser(data){
    if(data){
        this.clazz = data.clazz;
        this.userName = data.userName;
        this.firstName = data.firstName;
        this.lastName = data.lastName;
        this.email = data.email;
        this.active = data.active;
        this.guid = data.guid;
    }
    else{
        this.clazz = "FFUser";
        this.userName = null;
        this.firstName = null;
        this.lastName = null;
        this.email = null;
        this.active = null;
        this.guid = null;
    }
    return this;
} 
```

我只是试图将 FFUser 添加到选定团队的成员抓包中。我正在使用 KnockoutJS 绑定来显示我的 Web 应用程序的数据，并使用 KnockoutJS 可观察对象来在本地存储数据。产生错误的用例中的相关步骤如下：

用户登录后，从我的应用程序后端拉取团队。下面`self.teams`是一个绑定到 HTML 选择菜单的可观察数组。

```
 function loadTeams() {
        ff.getArrayFromUri("/ff/resources/Teams",function(loadedTeams) {
            if(loadedTeams.length > 0) {
                for(var i = 0; i < teams.length; i++) {
                    var team = new Team(loadedTeams[i]);
                    self.teams.push(team);
                }
            }
            else console.log("No teams to load!");
        },function(statusCode,responseText) {
            alert(JSON.parse(responseText).statusMessage);
        });
    }; 
```

用户从选择菜单中选择一个团队并输入用户名以添加为团队成员。提交后，将执行 grabBagAdd()。下面，`self.selectedTeam`是一个绑定到选择菜单值的可观察对象，并包含来自 的 Team 对象之一`self.teams`。此外，`self.addMemberEmail`是一个绑定到用户名输入框的值的 observable。

```
 self.addMember = function() {
        if(self.addMemberEmail()) {
            ff.getObjFromUri("/ff/resources/FFUser/(userName eq '" + self.addMemberEmail() + "')",function(user) {
                if(user){
                    var member = new FFUser(user);
                    ff.grabBagAdd(member,self.selectedTeam(),"members",function() {
                        console.log("Added member to grabbag!");
                    },function(statusCode,responseText) {
                        alert(JSON.parse(responseText).statusMessage);
                    });         
                }
                else alert("No users found with the provided username.");
            },function(statusCode,responseText) {
                alert(JSON.parse(responseText).statusMessage);
            });
        }
        else alert("Must provide member email.");
    }; 
```

FatFractal 返回`400: Bad Request`错误如下：

```
FatFractal.handleGrabBagRequest 400, {"result":null,"statusMessage":"Cannot add NULL items to a object's grab bag"} 
```

不知道该怎么做的错误。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:59:03.990

该`grabBagAdd`函数将`ffUrl`s 而不是对象本身作为前两个参数。因此，请尝试以下操作：

```
ff.grabBagAdd(member.ffUrl, self.selectedTeam().ffUrl, "members", ... 
```

从您的问题来看，尚不完全清楚`self.selectedTeam()`将返回带有元数据的对象，但无论如何您都明白了。

# c# - 如何防止 JsonConvert.SerializeObject 在字符串周围添加引号

> ID：14906509
> 
> 赞同：1
> 
> 时间：2013-02-16T03:10:26.800
> 
> 标签：c#, json.net

我的服务器上有一个部分，如下所示：

```
private static dynamic Data;
string ArraySize = "[900,900,2]";
Data = new { c2array = true, size = ArraySize };
System.IO.File.WriteAllText("json.txt", JsonConvert.SerializeObject(Data)); 
```

吐出这个：

{"c2array":true,"size":"[900,900,2]"}

然而在 JavaScript 中，我可以使用 json.stringify 来实现它：

{"c2array":true,"size":[900,900,2]} <--- 没有引号

如何让 c# JSON 序列化*不*将引号括在字符串周围。

我正在使用字符串值，因为如果我尝试以下

```
Data = new { c2array = true, size = [900,900,2] }; 
```

它不会编译

我要发送到的客户端脚本是 JavaScript 中的游戏编程库，它需要不带引号的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:12:47.547

不要做`ArraySize`一个字符串。

```
var ArraySize = new int[] {900,900,2};
Data = new { c2array = true, size = ArraySize }; 
```

# c++ - 如何以 std::bitset<> 的形式访问一部分 packed_bits<>？

> ID：14906515
> 
> 赞同：4
> 
> 时间：2013-02-16T03:11:55.450
> 
> 标签：c++, templates, c++11, bit-manipulation, variadic-templates

我正在尝试`packed_bits`使用可变参数模板和`std::bitset`.

特别是，我在编写一个函数时遇到问题，该函数返回对包含所有打包位`get`的成员子集的引用。`m_bits`该功能应类似于`std::get`for `std::tuple`。

它应该充当*参考叠加层*，以便我可以操作`packed_bits`.

例如，

```
using my_bits = packed_bits<8,16,4>;
my_bits b;
std::bitset<  8 >& s0 = get<0>( b );
std::bitset< 16 >& s1 = get<1>( b );
std::bitset<  4 >& s2 = get<2>( b ); 
```

**更新**

下面是根据[Yakk 的建议](https://stackoverflow.com/a/14906694/975129)重写的代码。我停留在他最后一段的重点：不知道如何将各个引用*粘合*到一个*类似位集的*引用中。现在正在考虑/工作最后一部分。

**更新 2**

好的，我的新方法是让`bit_slice<>`大部分工作完成：

*   它是短暂的
*   它将公开子类化`std::bitset<length>`，充当临时缓冲区
*   在施工时，它将从`packed_bits<>& m_parent;`
*   在销毁时，它将写入`m_parent`
*   除了参考 via 之外`m_parent`，还必须知道 offset、length
*   `get<>`将成为一个自由函数，它接受 a并按值而不是按引用`packet_bits<>`返回 a`bit_slice<>``bitset<>`

这种方法有各种缺点：

*   `bit_slice<>`必须相对较短以避免混叠问题，因为我们只更新构造和破坏
*   我们必须在编码时避免多个重叠的引用（无论是否线程化）
*   当我们有一个子类的实例时，如果我们试图持有一个指向基类的指针，我们将倾向于切片

但我认为这足以满足我的需求。完成后我会发布完成的代码。

**更新 3**

在与编译器斗争之后，我想我有一个基本版本可以工作。不幸的是，我无法`::get()`正确编译自由浮动： `BROKEN`显示现场。否则，我认为它正在工作。

*非常感谢 Yakk 的建议：根据他的评论，下面的代码大约 90%+。*

**更新 4**

自由浮动`::get()`固定。

**更新 5**

正如 Yakk 所建议的，我已经删除了副本。 `bit_slice<>`将继续阅读`get_value()`和写作`set_value()`。无论如何，我的调用中可能有 90% 以上是通过这些接口进行的，因此无需子类化/复制。

不再肮脏。

**代码**

```
#include <cassert>
#include <bitset>
#include <iostream>

// ----------------------------------------------------------------------------

template<unsigned... Args>
struct Add { enum { val = 0 }; };

template<unsigned I,unsigned... Args>
struct Add<I,Args...> { enum { val = I + Add<Args...>::val }; };

template<int IDX,unsigned... Args>
struct Offset { enum { val = 0 }; };

template<int IDX,unsigned I,unsigned... Args>
struct Offset<IDX,I,Args...> { 
    enum { 
        val = IDX>0 ? I + Offset<IDX-1,Args...>::val : Offset<IDX-1,Args...>::val 
    }; 
};

template<int IDX,unsigned... Args>
struct Length { enum { val = 0 }; };

template<int IDX,unsigned I,unsigned... Args>
struct Length<IDX,I,Args...> { 
    enum { 
        val = IDX==0 ? I : Length<IDX-1,Args...>::val 
    }; 
};

// ----------------------------------------------------------------------------

template<unsigned... N_Bits>
struct seq
{
    static const unsigned total_bits = Add<N_Bits...>::val;
    static const unsigned size       = sizeof...( N_Bits );

    template<int IDX>
    struct offset
    {
        enum { val = Offset<IDX,N_Bits...>::val };
    };

    template<int IDX>
    struct length
    {
        enum { val = Length<IDX,N_Bits...>::val };
    };
};

// ----------------------------------------------------------------------------

template<unsigned offset,unsigned length,typename PACKED_BITS>
struct bit_slice
{
    PACKED_BITS& m_parent;

    bit_slice( PACKED_BITS& t ) :
        m_parent( t )
    { 
    }

    ~bit_slice()
    {
    }

    bit_slice( bit_slice const& rhs ) :
        m_parent( rhs.m_parent )
    { }

    bit_slice& operator=( bit_slice const& rhs ) = delete;

    template<typename U_TYPE>
    void set_value( U_TYPE u )
    {
        for ( unsigned i=0; i<length; ++i )
        {
            m_parent[offset+i] = u&1;
            u >>= 1;
        }
    }

    template<typename U_TYPE>
    U_TYPE get_value() const
    {
        U_TYPE x = 0;
        for ( int i=length-1; i>=0; --i )
        {
            if ( m_parent[offset+i] )
                ++x;
            if ( i!=0 )
                x <<= 1;
        }
        return x;
    }
};

template<typename SEQ>
struct packed_bits :
    public std::bitset< SEQ::total_bits >
{  
    using bs_type   = std::bitset< SEQ::total_bits >;
    using reference = typename bs_type::reference;

    template<int IDX> using offset = typename SEQ::template offset<IDX>;
    template<int IDX> using length = typename SEQ::template length<IDX>;
    template<int IDX> using slice_type = 
        bit_slice<offset<IDX>::val,length<IDX>::val,packed_bits>;

    template<int IDX>
    slice_type<IDX> get()
    {
        return slice_type<IDX>( *this );
    }
};

template<int IDX,typename T>
typename T::template slice_type<IDX>
get( T& t )
{
    return t.get<IDX>();
};

// ----------------------------------------------------------------------------

int main( int argc, char* argv[] )
{
    using my_seq   = seq<8,16,4,8,4>;
    using my_bits  = packed_bits<my_seq>;
    using my_slice = bit_slice<8,16,my_bits>;
    using slice_1  = 
        bit_slice<my_bits::offset<1>::val,my_bits::length<1>::val,my_bits>;

    my_bits        b;
    my_slice       s(  b );
    slice_1        s1( b );

    assert( sizeof( b )==8 );
    assert( my_seq::total_bits==40 );
    assert( my_seq::size==5 );

    assert( my_seq::offset<0>::val==0  );
    assert( my_seq::offset<1>::val==8  );
    assert( my_seq::offset<2>::val==24 );
    assert( my_seq::offset<3>::val==28 );
    assert( my_seq::offset<4>::val==36 );

    assert( my_seq::length<0>::val==8  );
    assert( my_seq::length<1>::val==16 );
    assert( my_seq::length<2>::val==4  );
    assert( my_seq::length<3>::val==8  );
    assert( my_seq::length<4>::val==4  );

    {
        auto s2 = b.get<2>();
    }
    {
        auto s2 = ::get<2>( b );
        s2.set_value( 25 );  // 25==11001, but only 4 bits, so we take 1001 
        assert( s2.get_value<unsigned>()==9 );
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:44:09.873

我不会`get`return a `bitset`，因为每个人都`bitset`需要管理自己的内存。

相反，我会在`bitset`内部使用 a 来管理所有位，并创建`bitset::reference`-like 单个位引用和`bitset`-like “切片”，它`get`可以返回。

A`bitslice`会有一个指向原始 的指针`packed_bits`，并且会知道它开始的偏移量以及它的宽度。它的`references`个别位可能`references`来自原始`packed_bits`，可能`references`来自内部`bitset`。

你`Size`是多余的——`sizeof...(pack)`告诉你包中有多少元素。

我会将切片的大小打包成一个序列，这样你就可以更容易地传递它。IE：

```
template<unsigned... Vs>
struct seq {}; 
```

是一种类型，您可以从中提取任意长度的`unsigned int`s 列表，但可以作为单个参数传递给模板。

作为第一步，写入`bit_slice<offset, length>`，它接受 a`std::bitset<size>`并将`bitset::reference`s 生成到各个位，其中`bit_slice<offset, length>[n]`与 相同`bitset[n+offset]`。

可选地，`bit_slice`可以存储`offset`为运行时参数（因为`offset`作为编译时参数只是一种优化，而不是我怀疑的那么强）。

一旦有了`bit_slice`，处理 的元组语法`packed_bits`是可行的。 `get<n, offset=0>( packed_bits<a,b,c,...>& )`返回`bit_slice<x>`通过索引`packed_bits`大小`offset`确定的 a，通过添加前 n-1 个大小确定的a `packed_bits`，然后从.`bitset``packed_bits`

有道理？

显然不是。这是一个快速`bit_slice`表示`std::bitset`.

```
#include <bitset>

template<unsigned Width, unsigned Offset, std::size_t SrcBitWidth>
struct bit_slice {
private:
  std::bitset<SrcBitWidth>* bits;
public:
  // cast to `bitset`:
  operator std::bitset<Width>() const {
    std::bitset<Width> retval;
    for(unsigned i = 0; i < Offset; ++i) {
      retval[i] = (*this)[i];
    }
    return retval;
  }
  typedef typename std::bitset<SrcBitWidth>::reference reference;
  reference operator[]( size_t pos ) {
    // TODO: check that pos < Width?
    return (*bits)[pos+Offset];
  }
  constexpr bool operator[]( size_t pos ) const {
    // TODO: check that pos < Width?
    return (*bits)[pos+Offset];
  }
  typedef bit_slice<Width, Offset, SrcBitWidth> self_type;
  // can be assigned to from any bit_slice with the same width:
  template<unsigned O_Offset, unsigned O_SrcBitWidth>
  self_type& operator=( bit_slice<Width, O_Offset, O_SrcBitWidth>&& o ) {
    for (unsigned i = 0; i < Width; ++i ) {
      (*this)[i] = o[i];
    }
    return *this;
  }
  // can be assigned from a `std::bitset<Width>` of the same size:
  self_type& operator=( std::bitset<Width> const& o ) {
    for (unsigned i = 0; i < Width; ++i ) {
      (*this)[i] = o[i];
    }
    return *this;
  }
  explicit bit_slice( std::bitset<SrcBitWidth>& src ):bits(&src) {}
  bit_slice( self_type const& ) = default;
  bit_slice( self_type&& ) = default;
  bit_slice( self_type&o ):bit_slice( const_cast<self_type const&>(o)) {}
  // I suspect, but am not certain, the the default move/copy ctor would do...
  // dtor not needed, as there is nothing to destroy

  // TODO: reimplement rest of std::bitset's interface that you care about
};

template<unsigned offset, unsigned width, std::size_t src_width>
bit_slice< width, offset, src_width > make_slice( std::bitset<src_width>& src ) {
  return bit_slice< width, offset, src_width >(src);
}

#include <iostream>
int main() {
  std::bitset<16> bits;
  bits[8] = true;
  auto slice = make_slice< 8, 8 >( bits );
  bool b0 = slice[0];
  bool b1 = slice[1];
  std::cout << b0 << b1 << "\n"; // should output 10
} 
```

另一个有用的类是`bit_slice`具有运行时偏移量和源大小的类。这会降低效率，但更容易编程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-31T18:34:23.820

我猜是这样的：

```
#include <iostream>
#include <bitset>

using namespace std;

template<int N, int L, int R>
bitset<L-R>
slice(bitset<N> value)
{
    size_t W = L - R + 1;
    if (W > sizeof(uint64_t) * 8) {
        W = 31;
        throw("Exceeding integer word size");
    }

    uint64_t svalue = (value.to_ulong() >> R) & ((1 << W) - 1);

        return bitset<L-R>{svalue};
    }
}

int main()
{
    bitset<16>  beef { 0xBEEF };
    bitset<4-3> sliced_beef      = slice<16, 4, 3>(beef);    
    auto        fast_sliced_beef = slice<16, 4, 3>(beef);
    return 0;
} 
```

# php - Drupal 6 $key => $value form #options 使用while循环构建的数组 where $key = $value

> ID：14906524
> 
> 赞同：-1
> 
> 时间：2013-02-16T03:15:11.523
> 
> 标签：php, forms, drupal, drupal-6

我正在尝试使用 while 循环构建一个 $key => $values 数组，其中 $key 等于来自 db_query 的值。我认为语法不正确

```
function _form(){

$person = db_query("SELECT name FROM {person}");                 
$columnValues = Array();

while ($row = db_fetch_array($person) ) {
  $columnValues[] = array($row['name']=> $row['name']);
}
.
.
. 
```

我有几个问题。

1.  我需要创建一个键来提取实际的“选择”菜单项值吗？
2.  如果我需要创建一个键，在while循环中是否有一种方法可以不为每个由其相同值作为键的元素创建一个新数组（例如apple => apple）
3.  从复选框和选择中提取值的正确方法是什么，所以我得到一个字符串而不是有序数字？（例如 form_values['value']['select_name'] ， form_values['value']['checkboxes_name'] 以便首先返回所选项目“apple”，第二个返回选中项目“apple”。）...我喜欢苹果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:17:50.447

您似乎在这里犯了一个错误-在键值对中，值不能是数组

```
while ($row = db_fetch_array($person) ) {
   $columnValues[] = array($row['name']=> $row['name']);
} 
```

应该

```
while ($row = db_fetch_array($person) ) {
   $columnValues[$row['name']] = $row['name'];
} 
```

答案：

1.  是的，您应该始终添加一个键值对 - 因为值是显示的内容，而键是在表单提交中提交的内容。
2.  是的，上面解释了如何为每个项目创建 key => value 对而不是 key => value 对的数组。
3.  各个复选框项都有值，您可以将复选框的值设置为与显示的值相同。

# relaxng - 在不使用模式的情况下制作复杂的 Relax NG 属性？

> ID：14906529
> 
> 赞同：0
> 
> 时间：2013-02-16T03:16:14.810
> 
> 标签：relaxng, relaxng-compact

我有一个名为“页面”的属性。它由两到三个双打组成，用逗号分隔，而不是空格，并带有可选的“！” 在最后。以下所有内容均有效：

```
page="8.5,11,3!"
page="8.5,11.4,3.1"
page="8.5,11!"
page="8.5,2.1" 
```

我知道我可以使用模式，以下会起作用：

```
attribute page { xsd:string { pattern="[0-9]+(\.[0-9]+)?,[0-9]+(\.[0-9]+)(,[0-9]+(\.[0-9]+)?)?(!)?" } } 
```

***但如果可能的话，我宁愿使用这样的东西：***

```
attribute page { xsd:double, ",", xsd:double, ( ",", xsd:double )?, ("!")? } 
```

我可以使用“列表”完成上述工作：

```
attribute page { list { xsd:double, ",", xsd:double, ( ",", xsd:double )?, ("!")? } } 
```

但是最后我在每个部分之间都有空格：

```
page="8.5 , 11 !" 
```

**有没有办法在不使用模式的情况下做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:41:54.973

Relax NG 没有关于如何定义简单类型的特定规则。它旨在能够使用制定此类规则的简单类型库。所以原则上，是的，你可以在 Relax NG 中做你喜欢的事：只需使用一个简单的类型库来提供你想要的功能。

实际上，您似乎在使用简单类型的 XSD 库。虽然 XSD 确实允许定义其值是其他简单值序列的列表类型，但为了简化定义和验证器，XSD 列表值会被空白处的解析器破坏；XSD 不允许值使用任意分隔符。所以，不，你不能做你说你想做的事，使用 Relax NG 的基于 XSD 的简单类型库。

# algorithm - 拓扑搜索和广度优先搜索

> ID：14906533
> 
> 赞同：12
> 
> 时间：2013-02-16T03:16:38.127
> 
> 标签：algorithm, graph

是否可以使用广度优先搜索逻辑来进行 DAG 的拓扑排序？Cormen 中的解决方案使用深度优先搜索，但使用 BFS 会不会更容易？

原因：BFS 在访问具有下一个深度值的节点之前，先访问特定深度的所有节点。这自然意味着如果我们做 BFS，父母会排在孩子之前。这不正是我们对拓扑排序所需要的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-17T13:33:46.713

仅仅 BFS 仅对一棵树（或森林的森林）就足够了，因为在树的森林中，入度最多为 1。现在，看看这个案例：

```
B → C → D
      ↗
    A 
```

队列初始化为`A B`（入度为零）的 BFS 将返回`A B D C`未进行拓扑排序的 BFS。这就是为什么您必须保持入度计数，并且只选择计数已降至零的节点。(*)

顺便说一句，这是你的“原因”的缺陷：BFS 只保证之前拜访过一位父母，而不是全部。

**编辑**：（*）换句话说，您推回度数为零的相邻节点（在示例中，在处理之后`A`，`D`将被跳过）。因此，您仍在使用队列，并且刚刚在通用算法中添加了过滤步骤。话虽如此，继续称它为 BFS 是有问题的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T10:41:51.973

有可能，甚至维基百科都[描述了一种基于 BFS 的算法](http://en.wikipedia.org/wiki/Topological_sorting)。

基本上，您使用一个队列，在其中插入所有没有传入边的节点。然后，当您提取一个节点时，您删除它的所有出边并插入从它可到达且没有其他入边的节点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T06:51:45.303

在 BFS 中，您实际行走的所有边缘最终都会朝着正确的方向。但是，如果您按 BFS 顺序布置图形，那么您不走的所有边（位于相同深度的节点之间的边，或从较深节点返回到较早节点的边）最终都会走错路。

是的，你真的需要 DFS 来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-08T12:52:15.457

是的，您可以使用**BFS**进行拓扑排序。其实我记得有一次我的老师告诉我，如果问题可以通过**BFS**解决，永远不要选择通过**DFS**解决。因为**BFS**的逻辑比**DFS**更简单，所以大多数时候你总是想要一个简单的解决方案来解决问题。

**正如 YvesgereY 和IVlad**所提到的，您需要从入度为**0**的节点开始，这意味着没有其他节点直接指向它们。请务必先将这些节点添加到您的结果中。您可以使用 HashMap 来映射每个节点及其入度，并使用 BFS 中非常常见的队列来帮助您遍历。当您从队列中轮询一个节点时，其邻居的入度需要减少 1，这就像从图中删除该节点并删除该节点与其邻居之间的边一样。每次遇到度数为 0 的节点时，将它们提供给队列以便稍后检查其邻居并将它们添加到结果中。

```
public ArrayList<DirectedGraphNode> topSort(ArrayList<DirectedGraphNode> graph) {

    ArrayList<DirectedGraphNode> result = new ArrayList<>();
    if (graph == null || graph.size() == 0) {
        return result;
    }
    Map<DirectedGraphNode, Integer> indegree = new HashMap<DirectedGraphNode, Integer>();
    Queue<DirectedGraphNode> queue = new LinkedList<DirectedGraphNode>();

    //mapping node to its indegree to the HashMap, however these nodes
    //have to be directed to by one other node, nodes whose indegree == 0
    //would not be mapped.
    for (DirectedGraphNode DAGNode : graph){
        for (DirectedGraphNode nei : DAGNode.neighbors){
            if(indegree.containsKey(nei)){
                indegree.put(nei, indegree.get(nei) + 1);
            } else {
                indegree.put(nei, 1);
            }
        }
    }

    //find all nodes with indegree == 0\. They should be at starting positon in the result
    for (DirectedGraphNode GraphNode : graph) {
        if (!indegree.containsKey(GraphNode)){
            queue.offer(GraphNode);
            result.add(GraphNode);
        }
    }

    //everytime we poll out a node from the queue, it means we delete it from the 
    //graph, we will minus its neighbors indegree by one, this is the same meaning 
    //as we delete the edge from the node to its neighbors.
    while (!queue.isEmpty()) {
        DirectedGraphNode temp = queue.poll();
        for (DirectedGraphNode neighbor : temp.neighbors){
            indegree.put(neighbor, indegree.get(neighbor) - 1);
            if (indegree.get(neighbor) == 0){
                result.add(neighbor);
                queue.offer(neighbor);
            }
        }
    }
    return result;
} 
```

# xcode - 如何在我的 podfile 中为我的 Xcode 项目指定多个目标？

> ID：14906534
> 
> 赞同：159
> 
> 时间：2013-02-16T03:16:42.057
> 
> 标签：xcode, target, cocoapods

我在我的 Xcode 4 项目中使用 CocoaPods，并且我的项目有三个目标（默认值，一个用于构建精简版，一个用于构建演示版）。所有目标都使用相同的库，但 CocoaPods 只是将静态库和搜索路径添加到主要目标。我的 podfile 看起来像这样：

```
platform :ios, '5.0'

pod 'TestFlightSDK', '>= 1.1'
pod 'MBProgressHUD', '0.5'
pod 'iRate', '>= 1.6.2'
pod 'TimesSquare', '1.0.1'
pod 'AFNetworking', '1.1.0'
pod 'KKPasscodeLock', '0.1.5'
pod 'iCarousel', '1.7.4' 
```

我让它工作的唯一方法是单独指定每个目标，并再次列出所有 pod。

```
platform :ios, '5.0'

target :default do  
    pod 'TestFlightSDK', '>= 1.1'
    pod 'MBProgressHUD', '0.5'
    pod 'iRate', '>= 1.6.2'
    pod 'TimesSquare', '1.0.1'
    pod 'AFNetworking', '1.1.0'
    pod 'KKPasscodeLock', '0.1.5'
    pod 'iCarousel', '1.7.4'
end

target :lite do 
    link_with 'app-lite'

    pod 'TestFlightSDK', '>= 1.1'
    pod 'MBProgressHUD', '0.5'
    pod 'iRate', '>= 1.6.2'
    pod 'TimesSquare', '1.0.1'
    pod 'AFNetworking', '1.1.0'
    pod 'KKPasscodeLock', '0.1.5'
    pod 'iCarousel', '1.7.4'
end

target :demo do 
    link_with 'app-demo'

    pod 'TestFlightSDK', '>= 1.1'
    pod 'MBProgressHUD', '0.5'
    pod 'iRate', '>= 1.6.2'
    pod 'TimesSquare', '1.0.1'
    pod 'AFNetworking', '1.1.0'
    pod 'KKPasscodeLock', '0.1.5'
    pod 'iCarousel', '1.7.4'
end 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：382
> 
> 时间：2013-02-16T04:48:26.770

由于`CocoaPods 1.0`更改了语法，而不是 using `link_with`，请执行以下操作：

```
# Note; name needs to be all lower-case.
def shared_pods
    pod 'SSKeychain', '~> 0.1.4'
    pod 'INAppStoreWindow', :head
    pod 'AFNetworking', '1.1.0'
    pod 'Reachability', '~> 3.1.0'
    pod 'KSADNTwitterFormatter', '~> 0.1.0'
    pod 'MASShortcut', '~> 1.1'
    pod 'MagicalRecord', '2.1'
    pod 'MASPreferences', '~> 1.0'
end

target 'Sail' do
    shared_pods
end

target 'Sail-iOS' do
    shared_pods
end 
```

* * *

**旧答案**Pre CocoaPods 1.0：

是的，有更好的方法！查看[`link_with`](http://docs.cocoapods.org/podfile.html#link_with)您可以在哪里`link_with 'MyApp', 'MyOtherApp'`指定多个目标。

我将它与单元测试一起使用`link_with 'App', 'App-Tests'`（注意目标名称中的空格）。

例子：

```
platform :osx, '10.8'

link_with 'Sail', 'Sail-Tests'

pod 'SSKeychain', '~> 0.1.4'
pod 'INAppStoreWindow', :head
pod 'AFNetworking', '1.1.0'
pod 'Reachability', '~> 3.1.0'
pod 'KSADNTwitterFormatter', '~> 0.1.0'
pod 'MASShortcut', '~> 1.1'
pod 'MagicalRecord', '2.1'
pod 'MASPreferences', '~> 1.0' 
```

* * *

### 使用[abstract_target](https://guides.cocoapods.org/syntax/podfile.html#abstract_target)的方法：

在下面的示例中`'ShowsiOS'`，`'ShowsTV'` 和`'ShowsTests'`目标具有自己独立的 pod，`ShowsKit`并且是继承的，因为它们都是虚拟目标的子级`'Shows'`。

```
# Note: There are no targets called "Shows" in any of this workspace's Xcode projects.
abstract_target 'Shows' do
  pod 'ShowsKit'

  target 'ShowsiOS' do
    pod 'ShowWebAuth'
  end

  target 'ShowsTV' do
    pod 'ShowTVAuth'
  end

  # Our tests target has its own copy
  # of our testing frameworks
  # (beside inheriting ShowsKit pod).

  target 'ShowsTests' do
    inherit! :search_paths
    pod 'Specta'
    pod 'Expecta'
  end
end 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2015-07-24T05:58:20.927

我认为更好的解决方案是

```
# Podfile

platform :ios, '8.0'

use_frameworks!

# Available pods

def available_pods
    pod 'AFNetworking', '1.1.0'
    pod 'Reachability', '~> 3.1.0'
end

target 'demo' do
  available_pods
end

target 'demoTests' do
    available_pods
end 
```

参考来自： http: [//natashatherobot.com/cocoapods-installing-same-pod-multiple-targets/](http://natashatherobot.com/cocoapods-installing-same-pod-multiple-targets/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-09-29T06:55:15.990

如果您希望多个目标共享同一个 pod，请使用 abstract_target。

```
# There are no targets called "Shows" in any Xcode projects
abstract_target 'Shows' do
  pod 'ShowsKit'
  pod 'Fabric'

  # Has its own copy of ShowsKit + ShowWebAuth
  target 'ShowsiOS' do
    pod 'ShowWebAuth'
  end

  # Has its own copy of ShowsKit + ShowTVAuth
  target 'ShowsTV' do
    pod 'ShowTVAuth'
  end
end 
```

要不就

```
pod 'ShowsKit'
pod 'Fabric'

# Has its own copy of ShowsKit + ShowWebAuth
target 'ShowsiOS' do
  pod 'ShowWebAuth'
end

# Has its own copy of ShowsKit + ShowTVAuth
target 'ShowsTV' do
  pod 'ShowTVAuth'
end 
```

来源：[https ://guides.cocoapods.org/using/the-podfile.html](https://guides.cocoapods.org/using/the-podfile.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-02T09:06:15.397

最简单的方法是使用抽象目标，其中指定的每个 pod 都将与所有目标链接。

```
abstract_target 'someNameForAbstractTarget' do
  pod 'podThatIsForAllTargets'
end

target 'realTarget' do
  pod 'podThatIsOnlyForThisTarget'
end 
```

# ruby-on-rails - 如何在 Active 记录中为 whos has_many 为空的模型编写查询？

> ID：14906535
> 
> 赞同：0
> 
> 时间：2013-02-16T03:16:43.273
> 
> 标签：ruby-on-rails, join, rails-activerecord, arel

我有很多 DuesPayments 的模型会员。

我想查询 2012 年未缴纳会费的会员。在 DuesPayment 上的字段是：for_year。或者用英语 - 我希望所有在 dues_payments 表中没有记录的成员都是 2012 年。

```
#<DuesPayment:0x00000107b3cdd0> {
  :id                      => 1209,
  :member_id               => 446,
  :amount                  => 25.0,
  :created_at              => Thu, 07 Feb 2013 17:01:15 EST -05:00,
  :updated_at              => Thu, 07 Feb 2013 17:01:15 EST -05:00,
  :for_year                => 2013,
  :payment_notification_id => 300
} 
```

好像我需要一个外部连接？问题是如果没有付款，那里没有记录可以“选择”。

这就是我现在正在做的，它基本上是一个子查询和一个反转。这里的想法是获取所有支付了会费的成员的 ID，然后选择所有不是 THOSE 成员的成员：

```
scope :dues_not_paid_in, lambda {|year|
  Member.
    where("id not in (?)", 
      DuesPayment.
        select(:member_id).
        where(:for_year => year).
        collect(&:member_id).uniq
  )
} 
```

我的猜测是有一种更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:00:31.007

您的 dues_payments 模型上有某种付费/未付费列吗？如果是这样，您可以这样做：

```
Member.joins(:dues_payments).where("for_year = ? AND paid = ?", 2012, false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:51:34.770

2012 年未缴纳会费的会员

```
Member.where("id NOT IN (?)", DuesPayment.select(:member_id).where(:for_year => 2012).map(&:member_id)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T03:54:36.840

如果对您的模型有更多了解，这样的事情应该可以工作，如果您需要更多帮助，您可以发布您的模型代码以及我们如何知道付款是否到期。

```
unpaid_members = Member.DuesPayments.where(for_year: 2012) 
```

# java - 如何添加新整数以将旧整数替换到我已经存在的数组中？

> ID：14906538
> 
> 赞同：0
> 
> 时间：2013-02-16T03:17:25.677
> 
> 标签：java, arrays

这是程序任务：

编写一个名为 collapse 的方法，它接受一个整数数组作为参数，并返回一个新数组，其中包含将每对整数替换为该整数对之和的结果。

例如，如果一个名为 list 的数组存储值
`{7, 2, 8, 9, 4, 13, 7, 1, 9, 10}`

那么 的调用`collapse(list)`应该返回一个新数组，其中包含： `{9, 17, 17, 8, 19}`。

原始列表中的第一对折叠为 9 (7 + 2)，第二对折叠为 17 (8 + 9)，依此类推。如果列表存储了奇数个元素，则最后一个元素不会折叠。

例如，如果列表是`{1, 2, 3, 4, 5}`，则调用将返回`{3, 7, 5}`。您的方法不应更改作为参数传递的数组。

这是我目前编写的程序：

```
public static int[] collapse(int[] a1) {
    int newArrayLength = a1.length / 2;
    int[] collapsed = new int[newArrayLength];
    int firstTwoSums = 0;
    for (int i = 0; i < a1.length-1; i++) {
        firstTwoSums = a1[i] + a1[i+1];
        collapsed[collapsed.length-1] = firstTwoSums;
    }
    return collapsed;
} 
```

我传入一个数组， `{7, 2, 8, 9, 4, 13, 7, 1, 9, 10}`我想用`{9, 17, 17, 8, 19}`.
**注意：**`{9, 17, 17, 8, 19}`将通过我编写的for循环获得。

目前，我无法将获得的整数添加到“折叠”数组中。如果你能帮助我或者至少给我一些关于如何做到这一点的指导，那将是一个很大的帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:53:13.970

使用

`collapsed[collapsed.length-1] = firstTwoSums;`

您的数字总和将始终放在折叠数组的同一索引中，因为 collapsed.length - 1 是一个常数值。

尝试创建一个从零开始的新变量，每次将总和添加到折叠时都可以递增。例如，

```
int j = 0;
for(...) {
...
collapsed[j++] = firstTwoSums;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:50:46.133

首先，您必须了解正在发生的事情。

你有一个数组，`size`其中 size 可以是`even`或`odd`。这很重要，因为您`a1.length/2`用于设置 的大小`new array`，因此您还必须检查奇数和偶数值以正确设置大小，否则它将不适用于奇数大小的数组。尝试几个案例以便更好地理解。

这是一种方法。

```
public static int[] collapseThis(int[] array) {

    int size = 0;

    if(isEven(array.length))
        size = array.length/2;
    else
        size = array.length/2+1;

    int[] collapsedArray = new int[size];

    for(int i=0, j=0; j<=size-1; i++, j++) {

        if(j==size-1 && !isEven(array.length)) {
            collapsedArray[j] = array[2*i];
        }
        else {
            collapsedArray[j] = array[2*i]+array[2*i+1];
        }
    }
    return collapsedArray;
}

private static boolean isEven(int num) { 
    return (num % 2 == 0); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-22T21:58:56.910

我会将数组的情况与奇数或偶数元素组合在一起，如下所示：

```
public static int[] collapse(int[] a1) {
    int[] res = new int[a1.length/2 + a1.length % 2];
    for (int i = 0; i < a1.length; i++)
         res[i/2] += a1[i];
    return res; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-04T21:50:43.120

我认为这是一个方便的答案。

```
public static void main(String[] args){
   int[] numbers = {1,2,3,4,5};
   int[] newList = collapse(numbers);
   System.out.println(Arrays.toString(newList));
}

public static int[] collapse(int[] data){
    int[] newList = new int[(data.length + 1)/2];
    int count = 0;
    for (int i = 0; i < (data.length / 2); i++){
       newList[i] = data[count] + data[count + 1];
        System.out.println(newList[i]);
       count = count + 2;
    }
    if (data.length % 2 == 1){   
       newList[(data.length / 2)] = data[data.length - 1];
   }
    return newList;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-16T04:05:34.993

```
public static int[] collapse(int[] a1) {
    int newArrayLength = a1.length / 2;
    int[] collapsed;
    if(a1.length%2 == 0)
    {
        collapsed = new int[newArrayLength];
    }
    else
    {
        collapsed = new int[newArrayLength+1];
        collapsed[newArrayLength] = a1[a1.length-1];
    }
    int firstTwoSums = 0;
    for (int i = 0; i < newArrayLength; i++) {
        firstTwoSums = a1[i*2] + a1[i*2+1];
        collapsed[i] = firstTwoSums;
    }       
    return collapsed;
} 
```

我修改了你的代码，你可以先试试。

# asp.net-mvc - ASP.NET MVC RadioButtonListFor 始终是预设的

> ID：14906541
> 
> 赞同：6
> 
> 时间：2013-02-16T03:17:38.553
> 
> 标签：asp.net-mvc

我有一个用于自定义适配器的单选按钮列表，但是如果重置了用户表单数据，并且之前没有提交任何数据，则始终预先选择一个单选按钮（第一个），我想避免这种情况，我该如何实现？

```
@Html.RadioButtonForSelectList(model => model.ViewModelForThingCreate.ThingTypeID, Model.ViewModelForCarCreate.CarTypeSelectList) 
```

和：

```
public static MvcHtmlString RadioButtonForSelectList<TModel, TProperty>(this HtmlHelper<TModel> HTMLHelper,Expression<Func<TModel, TProperty>> Expression, IEnumerable<SelectListItem> ListOfValues)
        {
            var MetaData = ModelMetadata.FromLambdaExpression(Expression, HTMLHelper.ViewData);
            var SB = new StringBuilder();

            if (ListOfValues != null)
            {
                foreach (SelectListItem Item in ListOfValues)
                {
                    var ID = string.Format("{0}_{1}", MetaData.PropertyName, Item.Value);
                    var Radio = HTMLHelper.RadioButtonFor(Expression, Item.Value, new { id = ID }).ToHtmlString();
                    SB.AppendFormat("<label class=\"radio inline\" for=\"{0}\">{1} {2}</label>", ID, Radio, HttpUtility.HtmlEncode(Item.Text));
                }
            }
            return MvcHtmlString.Create(SB.ToString());
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:36:42.180

这是您的自定义助手，其按钮设置为未选中。试试这个，我假设它会使所有单选按钮都处于未选中状态。

```
public static MvcHtmlString RadioButtonForSelectList<TModel, TProperty>(this HtmlHelper<TModel> HTMLHelper,Expression<Func<TModel, TProperty>> Expression, IEnumerable<SelectListItem> ListOfValues)
        {
            var MetaData = ModelMetadata.FromLambdaExpression(Expression, HTMLHelper.ViewData);
            var SB = new StringBuilder();

            if (ListOfValues != null)
            {
                foreach (SelectListItem Item in ListOfValues)
                {
                    var ID = string.Format("{0}_{1}", MetaData.PropertyName, Item.Value);
                    var Radio = HTMLHelper.RadioButtonFor(Expression, Item.Value, new { id = ID }).ToHtmlString();
                    SB.AppendFormat("<label class=\"radio inline\" checked="false" for=\"{0}\">{1} {2}</label>", ID, Radio, HttpUtility.HtmlEncode(Item.Text));
                }
            }
            return MvcHtmlString.Create(SB.ToString());
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:04:33.990

我刚刚在 mvc3 模板中尝试了你的方法，它似乎对我来说很好。基本上我已经创建了一些模型

```
 public class IndexModel
 {
     public string ID;
     public IEnumerable<SelectListItem> Elements;
 } 
```

然后创建实例并填充值：

```
var model = new IndexModel()
            {
                ID = "a",
                Elements = 
                       new List<SelectListItem>() { 
                                                    new SelectListItem() { Text = "test1", Value = "1"},
                                                    new SelectListItem() { Text = "test2", Value = "2"}}
            }; 
```

鉴于我已经使用了您的扩展方法

```
<form>
@(Extensions.RadioButtonForSelectList(Html, x => x.ID, Model.Elements))
<button type="reset">Reset</button>
</form> 
```

发射后一切似乎都很好。加载时未选择字段，并在按下“重置”按钮后将其清除。

![在此处输入图像描述](../Images/357e0266f6feb7c624aac527be7c2d79.png)

您能否提供更多详细信息，因为我不确定我是否完全理解您要实现的目标:-)

**编辑：**

这是单选按钮的纯 HTML 示例。他们绝对不会在开始时填写，如果您希望他们需要添加**，**但默认情况下您可以在不选择任何单选按钮的情况下发送表单。您也可以像第二个示例一样通过添加检查来进行检查。你在客户端使用一些javascript吗？也许它导致了这种副作用？ [http://jsbin.com/isadun/1](http://jsbin.com/isadun/1)

mz

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T20:38:49.033

不幸的是，必须始终选中一个单选按钮。这就是单选按钮的不幸之处。但是，您始终可以在表单中添加一个隐藏的单选按钮并将选中的属性设置为 true；如果没有从中选择任何内容，则让您的内部代码接受 null 或您期望的任何内容。

尝试将所有单选按钮值设置为未选中或 false

```
foreach(button in ButtonGroup){
button.checked = false;
} 
```

# tsql - 是否可以创建永久对象别名

> ID：14906546
> 
> 赞同：3
> 
> 时间：2013-02-16T03:18:33.107
> 
> 标签：tsql, sql-server-2008-r2, ssms

我最近发现自己对开发中涉及的表和视图使用了一些相当长的名称，这让我想知道是否可以为对象创建客户端/数据库/服务器级别的别名。

例如，我有一个名为*dbo.vAlphaBetaGammaDelta*的视图。有没有办法（有或没有 Intellisense）创建一个名为*dbo.vABGD*的引用？

如果没有，如果/当表模式发生变化时，除了必要的维护之外，创建视图或单个表的视图是否会有任何问题？

我应该注意，这些别名/视图不会用于其他对象，而是用于在日常故障排除和钻探过程中缓解和预防腕管 xD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:28:26.467

SQL Server 允许创建同义词。这似乎是您正在寻找的：http: [//msdn.microsoft.com/en-us/library/ms177544.aspx](http://msdn.microsoft.com/en-us/library/ms177544.aspx)

但是，正如@MitchWheat 提到的那样。这似乎朝着错误的方向发展。有一些很好的 SSMS 插件可以提供长对象名称的自动补全（例如 SQL 提示）。顺便说一句，这些产品有同义词的问题......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-09T15:02:24.313

在很多情况下，您希望拥有同义词。让我先声明一个：您有一个明确定义的假设表名称：GlobalStatisticalRecord。SQL 和其他地方的数百行代码和对象（键、索引等）都引用了这个表名。经过 5 年的使用，缩写​​ GSR 不仅在技术人员中被习惯，而且在业务用户中也被习惯了。因此，再次强调，GSR 现在比 GlobalStatisticalRecord 更容易识别。但是，对于刚加入技术团队的新人，最好将名称 GlobalStatisticalRecord 保留为表名，因为它很好地描述了表的全部内容。现在，当写一个快速的**临时**查询 - 这可能不是来自您选择的具有您习惯的所有 Intellisense 功能的工具 - 那么这些别名确实可以节省您的时间（以及在凌晨 2 点疯狂尝试诊断生产问题时的“生命”） ）。请，如果您从来没有遇到过需要这个的案例，请不要假设没有。我强调了**adhoc**形容词，因为我同意在永久查询（存储过程等）中，出于您指出的原因，建议使用完整的表名。

# java - 当指定多个数据源时，从 spring 注入/自动装配数据源

> ID：14906548
> 
> 赞同：0
> 
> 时间：2013-02-16T03:18:55.483
> 
> 标签：java, spring

我正在尝试从我的 context.xml 文件中注入一个数据源。我有这个配置文件，但问题是，我随时都有多个数据源。当我尝试注入其中任何一个时，我收到一个错误，指出没有匹配的 bean。这是我的代码。

```
 @Inject
    @Named("dataSourceAccounts")
    //@Autowired
    @Override
    public void setDataSource(DataSource dataSource) {
        // TODO Auto-generated method stub
        this.jdbcTemplate = new JdbcTemplate(dataSource);
        System.out.println("jdbcTemplate is null? " + (jdbcTemplate == null));

    }

//for the context.xml
<context:component-scan base-package="business" />
   <context:component-scan base-package="middleware" />
   <context:component-scan base-package="presentation" /> 
   <context:annotation-config/>

   <tx:annotation-driven transaction-manager="txManager" proxy-target-class="true" />
    <bean id="txManagerProducts" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSourceProducts"/>
    </bean >
    <bean id="txManagerAccounts" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSourceAccounts"/>
    </bean >

     <bean id="dataSourceProducts" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/productsdb" />
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean> 
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/accountsdb" />
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:37:11.817

如果要为应注入的依赖项指定限定名称，则 @Named 应位于参数定义之前：

```
@Inject
@Override
public void setDataSource(@Named("dataSourceAccounts") DataSource dataSource) {
    // TODO Auto-generated method stub
    this.jdbcTemplate = new JdbcTemplate(dataSource);
    System.out.println("jdbcTemplate is null? " + (jdbcTemplate == null));

} 
```

或使用弹簧注释：

```
@Autowired
@Override
public void setDataSource(@Qualifier("dataSourceAccounts") DataSource dataSource) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:42:01.047

这应该工作

```
@javax.annotation.Resource(name="dataSourceProducts")
public void setDataSource(DataSource dataSource) {
                 ...
} 
```

javax.annotation.Resource 在 Java SE 中

# android - Phonegap 的 exitApp() 没有杀死应用程序？

> ID：14906551
> 
> 赞同：0
> 
> 时间：2013-02-16T03:19:22.203
> 
> 标签：android, cordova

我正在开发一个带有phonegap（cordova 2.1）的android应用程序，我希望用户能够通过单击菜单按钮完全关闭应用程序。我将事件设置为使用 navigator.app.exitApp() 但这似乎只是关闭了窗口，并且应用程序继续在后台运行并且音乐仍在播放，需要强制关闭。我还在 mainAcitvity 文件中将布尔值“keepRunning”设置为 false。

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:05:11.707

请将此方法称为 onclick 按钮

函数 exitFromApp() { navigator.app.exitApp(); }

# java - 将字符串与类似字符串的模板进行比较

> ID：14906552
> 
> 赞同：3
> 
> 时间：2013-02-16T03:19:24.037
> 
> 标签：java, string, stringtemplate

我正在尝试编写一个程序，在该程序中，我必须在字符串列表与模板（本质上是一个字符串）之间进行比较。我不确定使用的术语是什么，但如果有帮助，它将更多地是日志抓取程序。

输入字符串示例：

1.  你好世界这是我
2.  你好奇怪的世界这是一个人
3.  这是一个测试文件
4.  你好世界这是一个机器人

用来比较

一个。这是一个**？**文件

湾。你好世界这是**？**

这个想法是将输入语句（1-4）与模板字符串（ab）匹配，如果它们匹配，那么我需要对它们采取行动。像 1 & 4 匹配句子***b***但***2***不匹配。

提前感谢您的帮助/指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:25:26.973

改变你`?`的`.*`，你有一个正则表达式：

```
String input = "Hello World this is me";

if (input.matches("Hello World this is .*"))
    // true 
```

ETC

# asp.net-mvc - ASP.Net MVC 并与设计师合作

> ID：14906554
> 
> 赞同：2
> 
> 时间：2013-02-16T03:19:35.140
> 
> 标签：asp.net-mvc, compilation

我正在与设计师一起在网站上工作。她在 Mac 上，不是程序员。但是，她非常聪明，可以很好地阅读代码。

当我推送一个 MVC 站点时，我必须构建它，当我发布时，它不会推送 Controllers 文件夹，因为它已编译到 bin 目录中。

有没有一种方法我不能编译它，而只是让 IIS 根据需要重新编译站点（比如如何使用纯 WebForms 项目？）

# c# - 将编辑的 XML 文档保存到任何位置？

> ID：14906555
> 
> 赞同：4
> 
> 时间：2013-02-16T03:19:39.103
> 
> 标签：c#, wpf, xml, c#-4.0

在下面的 C# WPF 代码片段中，我想加载一个 XML 文档、编辑该文档并将输出保存到用户指定的位置。我可以使用该`XmlDocument.Save`方法保存到预定义的位置，但是如何允许用户保存到任何位置，例如选择“另存为”时？

```
XmlDocument doc = new XmlDocument();
doc.Load(@"C:\OriginalFile.xml");
doc.Save("File.xml"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:26:52.577

见下面的代码；如果用户选择某个系统文件夹，请注意 UAC。

```
SaveFileDialog saveFileDialog = new SaveFileDialog();
saveFileDialog.Filter = "Xml (*.xml)|*.xml";
if (saveFileDialog.ShowDialog().Value)
{
    doc.Save(saveFileDialog.FileName);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T03:29:31.243

使用[SaveFileDialog](http://msdn.microsoft.com/en-us/library/aa969773.aspx)。文章示例：

```
Microsoft.Win32.SaveFileDialog dlg = new Microsoft.Win32.SaveFileDialog();
dlg.FileName = "Document"; 
dlg.DefaultExt = ".xml";
dlg.Filter = "Xml documents (.xml)|*.xml"; // Filter files by extension 

Nullable<bool> result = dlg.ShowDialog();
if (result == true)
{
    // Save document 
    string filename = dlg.FileName;
} 
```

# android - LibGDX 保存纹理以避免上下文丢失

> ID：14906559
> 
> 赞同：3
> 
> 时间：2013-02-16T03:20:00.847
> 
> 标签：android, libgdx, textures, buffer

我在基于 LibGDX 的 Android 应用程序中有一个纹理，它是通过 FrameBuffers 程序创建的，我需要通过上下文丢失来保留它，似乎唯一有效的方法就是简单地保存数据，无论是作为完整图像还是原始图像数据，输出，并在时间到来时将其重新加载。不过，我正在努力寻找任何方法来实现这一目标，因为我所采取的每条路线都以某种方式导致了彻底的失败。

我已经搜索了很多，但我遇到的任何事情都没有解决。我主要只是在寻找正确方向的提示，而不是迄今为止我一直在做的漫无目的的搜索和尝试。我认为最好的办法是将纹理中的所有数据转换为某种“缓冲区”，在内部保存数据，然后重新加载并重新创建纹理，但我不确定最好的方法是什么去做就是了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T05:36:57.477

该类[`PixmapIO`](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/PixmapIO.html)应该有助于编写运行时生成的像素图。不过，它并不是您正在寻找的 FBO 纹理。（从`Pixmap`到`Texture`很容易，但从另一个方向开始就不那么容易了。）如果您用于在 FBO 中生成数据的图元可用`Pixmap`（例如，基本几何图元），那可能是一种替代方法。我相信这是最接近 libGDX 的用于保存运行时纹理的受支持机制，但我并不肯定。

周围有一些 libGDX 代码用于从帧缓冲区中抓取字节（FBO 的纹理数据都存在于您的 GPU 上，因此您需要跳过一些环节将其复制到普通内存中）。请参阅此处有关屏幕截图[`ScreenUtils`](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/utils/ScreenUtils.html)和[PNG 的链接](http://code.google.com/p/libgdx-users/wiki/Screenshots)。

应该很容易适应使用从方法返回的方法`PixmapIO`来写出“CIM”格式的文件。`byte[]``ScreenUtils`

或者，您可以跟踪对 FBO 执行的“操作”列表，这样您就可以重播它们（稍后重建内容）。这在很大程度上取决于你的纹理是什么，虽然......

# php - 扩展异常：删除消息“带有消息的未捕获异常 XXXX”

> ID：14906560
> 
> 赞同：1
> 
> 时间：2013-02-16T03:20:15.497
> 
> 标签：php, class, exception, extend

当我扩展一个异常类时：

```
CustomException extends Exception(){}

throw new CustomException("Houston we have a problem",1); 
```

错误：

```
SCREAM: Error suppression ignored for
Uncaught exception 'CustomException' with message 'Houston we have a problem' in C:\wamp\www\index.php on line 5
CustomException: Houston we have a problem in C:\wamp\www\index on line 5 
```

我只想要 CustomException 消息：

```
CustomException: Houston we have a problem in C:\wamp\www\index on line 5 
```

这可能吗？这是一个xdebug问题吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:30:10.150

这是一个 xdebug 选项。在您的 php.ini 中，您必须`xdebug.scream=1`禁用它，将其设置为`xdebug.scream=0`

Scream 会覆盖`@`“闭嘴”运算符，因此您必须将其关闭以阻止这种情况发生。不要忘记重新启动服务器以使更改生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:27:18.633

您必须使用[`try-catch`](http://php.net/manual/en/language.exceptions.php)块捕获异常。否则它将报告未捕获的异常。

例如：

```
try {
  methodThatCanThrowAnException(); // used since I don't know the method you are trying to call
}
catch (CustomException $e) {
  echo $e->getMessage();
} 
```

# javascript - 在 div 的最后一行平铺 div 的高度相等

> ID：14906561
> 
> 赞同：7
> 
> 时间：2013-02-16T03:20:20.340
> 
> 标签：javascript, jquery, html, css

大家好，有没有办法实现以下设计？我设计了我的 div，但我不知道如何得到它。div 位于页面的中心，所有这些 div 的包装器的宽度都可以调整。

![在此处输入图像描述](../Images/2fb2de8bedd25d7846c7173068bdad67.png)

正常内容

![在此处输入图像描述](../Images/0385103a0af65fd0faa1a3e52e13eaeb.png)

当包装器变小时，它将是一个两列 div，最后一个仍然相等。* 包装 div 在放大和缩小时调整其宽度..

![在此处输入图像描述](../Images/e05122337481ee206e84dd1dfe6ff1cc.png)

代码

```
<html>
<head>
<title></title> 

<link rel="stylesheet" href="view/css/ui-layout.css" type="text/css"/>
<link rel="stylesheet" href="view/css/layout.css" type="text/css"/>
<script type="text/javascript" src="view/js/jquery-1.9.1.js"></script>
<script type="text/javascript" src="view/js/equalheight.js"></script>

<style>
 html,body{
   padding: 0;
   margin:0;
   min-width: 820px;
   color: #333333;
   background-color: #F1F1f1;
   font-family: Arial, Helvetica, Sans-Serif;
   font-style: normal;
   font-weight: normal;
   font-size: 13px;
}
a{
    text-decoration:none;
        color:#3EA7bb;
        cursor: pointer;
}

ul{
    display: inline-block;
     position: relative;
}

hr{
    border:1px solid #f1f1f1;
}
.cleared
{
   display:block;
   clear: both;
   float: none;
   margin: 0;
   padding: 0;
   border: none;
   font-size: 0;
   height:0;
   overflow:hidden;
}
.reset-box
{
   overflow:hidden;
   display:table;
}

#main-container{
   width: 80%;
   min-height: 100%; 
    min-width: 820px;
    max-width: 1000px;
   z-index: 0;
   left: 0;
   top: 0;
   cursor:default;
   overflow:hidden;  
   background-color:#FFFFFF; 
   position: relative;
   margin: 0 auto; 
   padding-left: 20px;
   padding-right: 20px;
   -moz-box-shadow: 0 0 0 5px #333333;
    -webkit-box-shadow: 0 0 0 5px #333333;
    box-shadow: 0 0 5px #333333; 
}

#header{

    height: 100px; 

    padding-top: 5px; 
    margin:0 auto;  
}
#header-logo{
    width: 308px;
    height: 100px;
    background-image: url(../images/skerp.png);
    background-position: center;
    background-repeat: no-repeat; 
    margin-left: 20px; 
}
#menu-bar{ 

   margin:0 auto; 
   min-height: 25px;
   z-index: 100;
   margin-top: 0;
   margin-bottom: 0; 
   border-radius:0px;
   /*-moz-box-shadow: 0 0 0 3px #333333;
   -webkit-box-shadow: 0 0 0 3px #333333;
    box-shadow: 0 0 3px #333333;*/
   -moz-box-shadow: 0 3px 3px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0 3px 3px rgba(0, 0, 0, 0.2);
    box-shadow: 0 3px 3px rgba(0, 0, 0, 0.2);
    margin:0 auto; 

} 
#menu-wraper{
    display: inline-block;
    float: right;
    margin-right: 10px;

}
.menu-element{ 
    min-width: 75px;
    height: 25px;
    display:inline-block;
    cursor: pointer;  
    text-align:center;
} 

#body-container{

    margin:0 auto;
    padding-bottom: 90px;  
}

.left-container,.right-container,.center-container{
    display: block;
    float:left;

} 
.featured{
margin:20px auto;
padding:5px; 
-moz-box-shadow: 0 0 0 5px #333333;
-webkit-box-shadow: 0 0 0 5px #333333;
box-shadow: 0 0 5px #333333; 
border-radius: 5px;
min-height: 300px;
width: 780px;
}

.left
{ 
    text-align: left; 
}
.left span{
    float:left;
    left:0;
}
.right
{ 
    text-align: right; 
}
.right span{
    right:0; 
    float:right;
}
.main-under-color{
    width: 300px;
    height:5px;
    display: block;
}
.sub-under-color{
    width: 100px;
    height:5px;
    display:  block; 
}
.content-wrapper{
    margin:10px auto;
    min-width: 810px; 
    /*padding:10px;*/ 
}

.content-wrapper h1{
    text-align: left;
}
.image-wrapper{
    margin: 0 auto;

}
.page-title{   
    padding: 20px 10px 10px 10px; 
    display: block; 
}
.page-title h1{
    font-weight: bold; 
    font-size: 40px;
    text-indent: 20px;
}

.content-title h1{
    font-weight: bold; 
    font-size: 20px; 
}
.content{ 
    padding:0px;/* 15px  15px 15px;*/
    display: block;
    font-size: 15px;  
}
.content p{
    text-align: justify;
    line-height: 25px;
    word-spacing: 1px;
    word-wrap:break-word; 
}
.border{  
    -moz-box-shadow: 0 0 0 5px #999999;
    -webkit-box-shadow: 0 0 0 5px #999999;
    box-shadow: 0 0 5px #999999; 
    border-radius: 5px;
    border:1px solid #999999; 
}

.border-top{
    border-top:1px solid #999999; 
}
.border-left{ 
    border-left:1px solid #999999; 
}
.border-right{  
    border-right: 1px solid #999999; 
}
.border-bottom{  
    border-bottom: 1px solid #999999; 
}

   .column-wrapper{
       padding-top: 20px;
       text-align: center;
       vertical-align:middle;
       width:100%;    

    }

    .column-wrapper div{ 
        display: inline-table;
        margin:2px;  

    }
    .column-small{
        padding:10px;
        padding-bottom:30px;
        width:30%; 
        min-width: 250px; 
        position: relative;  
    } 

     .fixedbottomReadMore{
        position: absolute;
        bottom: 10px;
        right: 20px;
    } 
     .fluedbottomReadMore{
        position: absolute;
        float:right;
        right:20px;
    } 
    .column-small ul{
        margin-top: -10px;
        width: 100%; 
        max-width: 240px;
    }
    .column-small ul li{
        text-align: left;  
    }
    .column-small li{ 
        list-style: none;
        padding: 5px;
        text-indent: -30px;
        word-wrap: break-word;
    }
    .column-medium{

    padding:10px;
        width: 61%;
        min-width: 505px;
    }
    .column-large{
    padding:10px;
        width: 100%;
        min-width: 760px; 
    }

</style>
</head>
<body>
<div id="main-container">

    <div id="body-container" > 

        <div class="content-wrapper ">  
            <div class="cleared"></div>
                <div class="content ">

                    <div class="cleared"></div>
                    <div class="column-wrapper ">
                        <div class="column-large "> 

                        </div>
                    </div>
                    <div class="cleared"></div>
                    <div class="column-wrapper"> 
                        <div class="column-small border  border-top"> 
                            <h3>Features</h3> 
                             <ul>
                                 <li>Code blocking</li>
                                 <li>Code Wrapping</li>
                                 <li>Code Killing</li>
                                 <li>Code Sleeping</li>
                             </ul>
                            <span class="fixedbottomReadMore"><a href="#">Read more</a></span>

                        </div>

                        <div class="column-small border  border-top"> 
                            <h3>Modules</h3>
                             <ul>
                                 <li>Barking Around The house</li>
                                 <li>Loving the Cats</li>
                                 <li>Floating The points</li>
                                 <li>Coding The Sleepers</li>
                                 <li>Coding The Sleepers</li>
                             </ul>
                             <span class="fixedbottomReadMore"><a href="#">Read more</a></span> 
                        </div>

                        <div class="column-small border  border-top"> 
                             <h3>Idont knows</h3>
                             <span class="fixedbottomReadMore"><a href="#">Read more</a></span>

                        </div>

                        <div class="column-small border  border-top"> 
                            <h3>Modules</h3>
                             <ul>
                                 <li>Barking Around The house</li>
                                 <li>Loving the Cats</li>
                                 <li>Floating The points</li>
                                 <li>Coding The Sleepers</li>
                                 <li>Coding The Sleepers</li>
                             </ul>
                             <span class="fixedbottomReadMore"><a href="#">Read more</a></span>

                        </div>
                        <div class="column-small border  border-top"> 
                             <h3>Idont knows</h3>
                             <span class="fixedbottomReadMore"><a href="#">Read more</a></span>

                        </div>

                    </div>
                </div> 
        </div>
        <script>
            $('.column-wrapper .column-small').equalHeightColumns();
        </script>
    </div>  
    <div class="cleared reset-box"></div>

  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:40:18.883

我不知道这是否适合您的场景，但是，下面的小提琴会影响 DIV 的底部。

我不确定的是，当您将其转换为两列模型时，所有块将可见，如果您最终在最后一行显示两个块，那么底部将与底部对齐。

看看这是否有帮助 - [http://jsfiddle.net/AUV7J/](http://jsfiddle.net/AUV7J/)

制作`span`as `display: table-cell`，我们可以将其中的块垂直对齐到底部

**更新：**

正如您所说，您不希望两者之间有空格。您将不得不以编程方式调整`DIV`每列最后一个的大小

查看更新的[小提琴](http://jsfiddle.net/AUV7J/2/)

**更新：**

对于动态列，请参阅[此](http://jsfiddle.net/AUV7J/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T06:50:47.700

我会像这样将一个函数绑定到窗口调整大小事件......

```
var $win = $(window),
    maxHeight,
    mode,
    calcMaxHeight = function() {
        var h = $(this).height();
        if (h > maxHeight) {
            maxHeight = h;
        }
    },
    adjustDivHeights = function() {
        var $col = $(this);
        if ($col.height() < maxHeight) {
            var $lastChild = $col.children().last();
            $lastChild.height(maxHeight - ($col.height() - $lastChild.height()));
        }
    };

$win.resize(function() {
    if ($win.width() > 500) {
        if (mode === 'large') return;
        mode = 'large';
        maxHeight = 0;
        $('#container').children().each(calcMaxHeight).each(adjustDivHeights);
    } else {
        if (mode === 'small') return;
        mode = 'small';
        maxHeight = 0;
        // other size logic
    }
}); 
```

当然，为了提高效率，该事件仅在您切换模式时触发计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T05:57:14.753

您可以根据浏览器的窗口设置每个最后一个内容的高度，因为水平方向有固定数量的内容，您可以进行计算并方便最后的内容。到目前为止，这是我最好的主意。

# php - 数学 - PHP + MySQL 添加值和输出

> ID：14906570
> 
> 赞同：0
> 
> 时间：2013-02-16T03:22:17.040
> 
> 标签：php, mysql, math

我正在寻找一种方法来计算支出跟踪应用程序的多个字段

因此，例如运输（汽油，汽车）=>

餐桌运输

*   Record_ID - Record_CAT - Record_SUM
*   1 -1 - 450.23
*   2 -1 - 124.12
*   3 -1 - 45.02

我想要做的是当用户转到 ?view=1 (Record_CAT = 1) => 运输查询时，运输表中的所有记录都被提取并显示到页面上的表格中。

并让 php 计算 Record_SUM 并提供 XXXX 的 Final_SUM 用于运输成本。

我需要怎么做这样的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:53:25.540

```
SELECT record_id, record_cat, record_sum, SUM(record_sum) as final_sum FROM `transportation_table` Where record_cat=1 
```

这应该工作

# android - 无法在android中使用LIKE功能

> ID：14906571
> 
> 赞同：0
> 
> 时间：2013-02-16T03:22:40.663
> 
> 标签：android, sql, search

我无法让这个 sql 语句正常工作。有人可以帮助我吗？

```
public Cursor getContactMatches(String query, String[] columns) 
{
    String selection = COL_NAME + " LIKE " + "'%" + "%'"; <---- right here
    Log.d("selection", selection);
    String[] selectionArgs = new String[] {query+"*"};

    return query(selection, selectionArgs, columns);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:40:37.077

您没有传递要比较的值

```
String selection = COL_NAME + " LIKE " + "'%" + yourvalue + "%'"; <---- right here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:22:26.300

如果您想使用选择参数，那么您的选择字符串不应包含任何引号或 % 字符。除非您在数据库上运行原始 sql 查询，否则查询字符串将自动正确地进行 sql 转义。像下面的代码片段应该可以完成工作。

```
String selection = COL_NAME + " LIKE ?";
String[] selectionArgs = new String[] {query+"*"}; 
```

# objective-c - 如何在mac os中使用objective c设置scrollToEndOfDocument的速度

> ID：14906572
> 
> 赞同：2
> 
> 时间：2013-02-16T03:22:44.953
> 
> 标签：objective-c, macos, webview, nstextview

如何在 Mac os或`scrollToEndOfDocument`中设置速度？`NSTextView``WebView`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:31:37.420

试试这个：我从[http://forums.pragprog.com/forums/57/topics/588](http://forums.pragprog.com/forums/57/topics/588)

```
 [NSAnimationContext beginGrouping]; 
 [[NSAnimationContext currentContext] setDuration:2.0f]; 
 // your code here 
 [NSAnimationContext endGrouping]; 
```

# c - 无符号长整数乘法

> ID：14906574
> 
> 赞同：0
> 
> 时间：2013-02-16T03:23:36.360
> 
> 标签：c, public-key-encryption

我正在创建一个公钥生成器，我做 c= p*q; 其中 p 和 q 是大素数，但我一直在 C 11875820813 中得到这个；

```
long unsigned int c= p*q;
printf("C is: %d\n", c); 
```

我知道我的数字与我的数字有关，但我不知道如何解决这个问题。

我正在尝试乘以：

872017*533297

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:25:39.860

您可能会溢出该值。请记住，在 32 位平台上，an`unsigned long`最多可以超过 40 亿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:27:07.213

32 位无符号长整数最大值是 4294967295。您的乘法是 465044050049，它会溢出无符号长整数。

```
4294967295 (ULONG_MAX)
  <
465044050049 (your result)
  <
18446744073709551615 (ULONG_LONG_MAX) 
```

您需要使用 unsigned long long（64 位无符号整数类型）（假设您的系统支持它们，所有现代系统都支持）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T10:44:47.503

无论平台如何，您都不能仅使用 C 的内置整数类型进行公钥加密。当代密码学处理至少 1024 位宽的数字，如果在软件中实现，则需要支持如此大值的库。

# ruby - ruby unicode 转义为命令行参数

> ID：14906578
> 
> 赞同：1
> 
> 时间：2013-02-16T03:24:36.503
> 
> 标签：ruby, unicode-escapes

看起来这个问题是由 python 开发人员提出的（[Allowing input of Unicode escapes as command line arguments](https://stackoverflow.com/questions/13737944/allowing-input-of-unicode-escapes-as-command-line-arguments)），我认为这部分相关，但它并没有完全解决我在 Ruby 中的直接问题。我很好奇是否有办法将转义的 unicode 序列作为命令行参数，分配给一个变量，然后在脚本运行后处理转义的 unicode 并显示为正常的 unicode。基本上，我希望能够选择一个 unicode 数字，然后让 Ruby 将其粘贴在文件名中并显示实际的 unicode 字符。

以下是我注意到的一些导致问题的事情：

```
unicode = ARGV[0] #command line argument is \u263a
puts unicode
puts unicode.inspect
=> u263a
=> "u263a" 
```

将字符串视为 unicode 序列所需的正斜杠被剥离。然后，如果我们尝试添加另一个“\”来转义它，

```
unicode = ARGV[0] #command line argument is \\u263a
puts unicode
puts unicode.inspect
=> \u263a
=> "\\u263a" 
```

但它仍然不会被正确处理。

这是一些更相关的代码，我实际上正在尝试实现这一点：

```
unicode   = ARGV[0]
filetype  = ARGV[1]
path = unicode + "." + filetype

File.new(path, "w") 
```

看起来这应该很简单，但我已经搜索和搜索，找不到解决方案。我应该补充一点，我知道在字符串中提供硬编码的转义 unicode 效果很好，比如`File.new("\u263a.#{filetype}", "w")`，但是从参数/变量中获取它是我遇到的问题。我正在使用 Ruby 1.9.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:15:45.720

为了取消转义 unicode 转义的命令行参数并在文件名中使用用户提供的 unicode 字符串创建一个新文件，我使用了`@mu is too short`' 的使用[方法](https://stackoverflow.com/questions/7015778/is-this-the-best-way-to-unescape-unicode-escape-sequences-in-ruby)`pack`and `unpack`，如下所示：

```
filetype  = ARGV[1]
unicode   = ARGV[0].gsub(/\\u([\da-fA-F]{4})/) {|m| [$1].pack("H*").unpack("n*").pack("U*")}
path      = unicode + "." + filetype
File.new(path, "w") 
```

# prolog - prolog：列表中的局部最大值

> ID：14906580
> 
> 赞同：1
> 
> 时间：2013-02-16T03:25:06.963
> 
> 标签：prolog

我试图找出列表中的局部最大值。基本上我要找到大于列表之前的元素和列表之后的元素的值，结果应该是所有局部最大值的列表。

示例：所以一个查询`local_maximum([3,2,3,4,5,2,7,3,6,5], Answer)`应该回答`Answer=[5,7,6]`（因为`5>4 , 5>2... 7>2, 7>3`等等..）

我的逻辑是你是否继续进行递归调用，直到你只到达列表中的 3 个元素。您检查中间元素是否大于左右元素，如果是，则将其添加到列表中。

另外，我的意图是当我上递归调用树时，我总是想检查递归调用树中的第二个元素是否大于它的左右一个元素。
IE

```
1,3,5,2,1
|
3,5,2,1
|
5,2,1
BASE CASE
checks if 2 is greater than 5, and 1.... append nothing...
|
3,5,2,1
checks if 5 is greater than 3 and 2, append 5... 
```

很快..

```
/*base case stop if it reaches 3 elements*/
local_maximum([X,Y,Z], Answer):- Y>X, Y>Z, Answer is Y. 
local_maximum([X,Y,Z], []):- Y<X, Y<Z.

local_maximum([H|T], Answer):-
local_maximum(T, Answer), append([], Answer, Answer). 
```

我不知道该怎么做...对不起我的英语。问候，

* * *

解决了。

您可以在访问列表时进行检查，并仅保存适合的元素：

```
local_maximum([X,Y,Z|Xs], [Y|Ms]) :-
Y>X, Y>Z,
local_maximum([Z|Xs], Ms). 
```

然后添加跳过和基本案例规则。您编写跳过案例的方式将影响上面的规则，需要在此处放置一个剪切。这是因为 Prolog 会根据要求搜索替代方案！我认为添加的剪辑提高了“程序”的可读性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T07:04:56.667

您可以在访问列表时进行检查，并仅保存适合的元素：

```
local_maximum([X,Y,Z|Xs], [Y|Ms]) :-
  Y>X, Y>Z,
  local_maximum([Z|Xs], Ms). 
```

然后添加跳过和基本案例规则。您编写跳过案例的方式将影响上面的规则，需要在此处放置一个剪切。这是因为 Prolog*会*根据要求搜索替代方案！我认为添加的剪辑提高了“程序”的可读性。

我测试了带有剪辑的版本：

```
?- local_maximum([3,2,3,4,5,2,7,3,6,5], Answer).
Answer = [5, 7, 6].

?- local_maximum([1,2,1,2,1], Answer).
Answer = [2, 2]. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-22T03:22:09.493

我不知道以前的解决方案，但是在我自己尝试了这个问题之后，这就是我能够解决的方法。

```
local_maximum([X,Y,Z], [Y|Ms]):-
  nonvar(X), nonvar(Y), nonvar(Z),
  Y>X, Y>Z, !.

local_maximum([X,Y,Z|Xs], [Y|Ms]):-
  nonvar(X), nonvar(Y), nonvar(Z),
  Y>X, Y>Z,
  local_maximum([X,Z|Xs], Ms).

local_maximum([X,Y,Z|Xs], Ms):-
  nonvar(X), nonvar(Y), nonvar(Z),
  local_maximum([X,Z|Xs], Ms), !. 
```

所以通过测试你会得到。

```
| ?- local_maximum([3,2,3,4,5,2,7,3,6,5], Y).
Y = [5,7,6|_] 
```

# php - 如何为json编码编写数组看起来像这样

> ID：14906583
> 
> 赞同：0
> 
> 时间：2013-02-16T03:25:32.597
> 
> 标签：php, json

我正在尝试获取特定的 json 响应，但响应中的一个数组正在作为对象传递。

```
"countries":{"TW":8,"JP":5,"AU":6,"MX":12,"CL":4,"HK":2,"US":14,"AR":4,"ES":1,"BR":1,"MY":9,"IT":12,"DE":1,"GB":1,"PE":6,"TR":1,"KR":3,"IE":1,"CA":2,"FR":1,"VE":2,"IL":1,"PT":1,"NL":1,"PL":1} 
```

但我需要它看起来像这样：

```
"countries":[["Brazil", 40.5],["US", 30],["Canada", 19.5], ["England", 10]] 
```

如何在 PHP 中为 json_encode 响应构建该数组？

我现在有：

```
$countries['US']=14;
$countries['CL']=4;
.... 
```

然后我将该数组 ($countries) 添加到 $data 数组，这是一个 json 编码

```
$data['countries'] = $countries; 
```

这给出了我首先发布的结果。但我需要第二种格式。

有人知道我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:44:48.693

```
$countries = Array();
$countries[] = Array('Brazil', 40.5);
 ... 
```

# bar-chart - 在条形图或柱形图中显示 0 值

> ID：14906588
> 
> 赞同：1
> 
> 时间：2013-02-16T03:26:26.080
> 
> 标签：bar-chart, ssrs-2008-r2

在这个带有条形图的 SSRS 报告的屏幕截图中，我希望 0 值显示一点点颜色，而不仅仅是空白。这是它现在的样子：

![显示 100% 和 0% 的条形图](../Images/d2ca8eed759b14ee1f6996b52c0e4c52.png)

这些图表中的大多数都有许多系列。我正在为每个接受审查的人生成一份图表副本，并包括该组中其他所有人的比较值。因此，我将代表接受审查的人的条形与正常颜色不同，这样他们就可以很容易地看到他们与其他人相比的表现。

现在，虽然有 y 轴标签，但我也希望 0 值至少有一点点颜色，这样所有东西都是对称的并且可以看到颜色。（我也在考虑将那些根本没有数据的人放在图表中，并且需要一种方法来区分它们，所以任何关于如何实现这一点的想法也会有所帮助。）

我想过让轴从 -1 开始，这样从 -1 到 0 的空间就会被着色，但是当我这样做时，我不知道如何让标签从 0 开始（如图所示）。我玩了很多设置，但没有什么是正确的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:30:20.690

叹。我刚刚想通了。

选择 X 轴。

*   设置`CrossAt`和`Minimum`属性为-1。
*   将`IntervalOffset`属性设置为 1。

重要提示：设计模式下的图表将无法正确显示。由于我放了一个`Interval`20 的，它显示`-1 19 39 59 79 99`，但是当我实际预览报告时，结果是正确的。不要让自己被设计模式预预览所迷惑。

现在看起来像这样：

![显示 0% 的条形图](../Images/ecf0416b424dcc2dd0027167c9ffc8fd.png)

如果您忽略该`CrossAt`属性，则条形图会远离 y 轴，留下一个间隙。您必须使用我上面提到的所有属性才能使颜色一直超过 0 到轴线。

# orm - 是否存在在关系数据库中使用 Object 表和 ObjectInstance 表的情况

> ID：14906589
> 
> 赞同：1
> 
> 时间：2013-02-16T03:26:29.227
> 
> 标签：orm, relational-database

如果您使用关系数据库将 DB 模式设计为​​用作名为 Node 的实体的持久性和 CRUD 层，是否会在任何情况下创建一个名为 Node 的表和另一个名为 NodeInstance 的表？

发布此问题是为了阻止我的同事在设计数据库架构期间犯下代价高昂的错误，其目的是充当我正在开发的 iPad 应用程序后端的存储、持久性和 CRUD 数据层，并且以避免产生将来会成为维护噩梦的错误和问题。因为我处于 NDA 之下，所以我无法发布有关项目确切性质的任何详细信息，只能说我们在服务器上为其创建 CRUD 层的主要实体称为节点。因此，我建议在后端工作的同事创建一个名为 Node 的类来表示 Node 对象，并在关系数据库的 Node 表中插入行以进行 Create 操作，

但是，出于某种原因，我的同事似乎认为使用 1 个表来持久化 Node 对象是错误的方法，正确的方法是创建一个 Node 表和一个 NodeInstance 表，并且并行维护 2 个表来管理Node 实体更高效/高性能。由于我有点像 ORM 书呆子和 DB 模式极客，我一直试图弄清楚已知宇宙中是否有任何行星使用 2 表方法在 1 个实体上持久化和执行 CRUD，将是一个好主意，但在所有情况下，这似乎都增加了代码复杂性，更不用说它需要不必要的 SQL 连接、多个查询来维护数据完整性、原子事务问题和并发问题。然而，如果 stackoverflow 上有任何人可以帮助我理解为什么我的同事的方法是理智的，那么我想保持开放的心态，并尝试接受我的同事是正确的观念。但是，在撰写本文时，我确信我的同事对 ORM 没有完全了解，因此正在考虑使用 2 个表来持久化 1 个实体。尊敬的 stackoverflow 同行和专家，请在这件事上发挥一些智慧。

# string - 如何在 URL 中放置搜索查询？

> ID：14906590
> 
> 赞同：-1
> 
> 时间：2013-02-16T03:26:35.827
> 
> 标签：string, url, search

借助很多搜索引擎，您可以在 URL 中找到您要搜索的字符串。

但是，[http://drugcompare.destinationrx.com/Home.aspx](http://drugcompare.destinationrx.com/Home.aspx)不允许我这样做。当我搜索某些内容时，生成的 URL无论如何都是[http://drugcompare.destinationrx.com/DrugCompare.aspx 。](http://drugcompare.destinationrx.com/DrugCompare.aspx)

有什么方法可以找出是否可以通过在 URL 末尾添加一些内容来搜索网站，例如“？query=searchstring”，而不是使用页面上提供的表单？基本上我需要一个唯一的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:32:57.503

您指向的那个网站使用 POST 为其搜索查询发送数据，这意味着您将无法在 URL 栏上看到或附加它。这样做的原因要么是出于安全考虑，要么是它生成的搜索查询是一个复杂的对象或太长并且不适合 url。搜索引擎等网站使用 GET，您可以按照它生成的语法将搜索查询附加到 url 中。

# ios - iOS相册“打开方式...”对话框API？

> ID：14906591
> 
> 赞同：0
> 
> 时间：2013-02-16T03:26:52.430
> 
> 标签：ios, api, photos

我想知道是否有可用于“打开方式”/共享对话框的 API。默认情况下，我在 iOS 中看到 3 个社交网络（Twitter、Facebook 和一个 JPN 站点），但我想知道是否可以注册您自己的应用程序以接受这些选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:29:43.637

不太清楚你在问什么。如果您只想显示打开方式对话框，它就是 UIActivityViewController。您甚至可以实现自己的自定义 UIActivity 以显示*在对话框中，但只有当用户在**您的*应用程序中调用活动视图时才会出现。

[http://www.aeth.com/iOSBook/ch26.html#_activity_view](http://www.apeth.com/iOSBook/ch26.html#_activity_view)

如果您询问在另一个应用程序中调用活动视图时您的应用程序如何显示，如果您在 Info.plist 中导出文档类型，如果用户从该文档开始，您的应用程序将出现在“打开方式”对话框中类型。

[http://www.aeth.com/iOSBook/ch36​​.html#_document_types](http://www.apeth.com/iOSBook/ch36.html#_document_types)

# android - 应用程序在实现横向导航时崩溃

> ID：14906601
> 
> 赞同：1
> 
> 时间：2013-02-16T03:28:44.683
> 
> 标签：android, navigation

我创建了一个导航类型为“tabs + swipe”的新活动。我在 getItem() 方法中进行了这些更改：

```
@Override
    public Fragment getItem(int i) {
        Fragment fragment ; 

        switch(i){
        case 0:
             fragment = new Fragment1();

             break;
        case 1:
             fragment = new Fragment2();
             break;
        case 3:
             fragment = new Fragment3();
             break;
             //
        default : return null;
        }

        //set args if necessary

        //return fragment
        return fragment;
    } 
```

所以对于每个选项卡，我都定义了一个单独的类。一类是这样的：

```
public static class Fragment1 extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */

    public Fragment1() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Create a new TextView and set its text to the fragment's section
        // number argument value.
        View v = inflater.inflate(R.layout.center, null);
        return v;
    }
} 
```

当我运行应用程序时，新活动成功启动，但是当我将屏幕滑动到第二个选项卡时，应用程序崩溃......这是 logcat：

```
02-16 08:48:43.328: E/AndroidRuntime(21541): FATAL EXCEPTION: main
02-16 08:48:43.328: E/AndroidRuntime(21541): java.lang.NullPointerException
02-16 08:48:43.328: E/AndroidRuntime(21541):    at android.support.v4.app.BackStackRecord.doAddOp(BackStackRecord.java:394)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at android.support.v4.app.BackStackRecord.add(BackStackRecord.java:389)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at android.support.v4.app.FragmentPagerAdapter.instantiateItem(FragmentPagerAdapter.java:99)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:801)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at android.support.v4.view.ViewPager.populate(ViewPager.java:992)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at android.support.v4.view.ViewPager$3.run(ViewPager.java:237)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at android.os.Handler.handleCallback(Handler.java:605)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at android.os.Looper.loop(Looper.java:137)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at android.app.ActivityThread.main(ActivityThread.java:4575)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at java.lang.reflect.Method.invokeNative(Native Method)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at java.lang.reflect.Method.invoke(Method.java:511)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
02-16 08:48:43.328: E/AndroidRuntime(21541):    at dalvik.system.NativeStart.main(Native Method) 
```

请解决我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T03:50:29.513

最有可能的是，您的默认语句返回 null 并且它尝试添加一个空片段..并且失败了...您知道您的 switch 语句缺少案例 2..是故意的吗？
如果我是你，我会休息一下

```
 switch(i){ 
```

并检查 i... 的值，看看它是 0、1 还是 3...，否则您的应用程序将崩溃，因为它返回 null。

# python - 如何在 Linux Ubuntu 10.04 上为 Python 安装 lpsolve 模块？

> ID：14906603
> 
> 赞同：0
> 
> 时间：2013-02-16T03:29:17.227
> 
> 标签：python, linux, ubuntu

我正在使用 Ubuntu 12.04 64 位，今天开始学习 python。（我尝试安装 MATLAB 的盗版但失败了......）我有一个线性规划问题要解决，我想使用 Python 的 lp_solve 模块。我尝试了 1~2 个小时才找到下载​​文件并安装模块。

我不确定我是否下载了正确的东西，直到现在我才能安装它。

我该如何安装？[http://lpsolve.sourceforge.net/](http://lpsolve.sourceforge.net/)中没有下载链接，它告诉我运行命令

python setup.py 安装

但是任何地方都没有 setup.py 文件，包括我在某处下载的 lpsolve 源文件。

如果你知道在哪里下载并安装它，你能教我如何一步一步地做吗？

我不确定我的 Python 版本。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-20T20:27:39.090

为 dnozay 提供的答案添加更多细节。

[从http://sourceforge.net/projects/lpsolve/files/lpsolve/](http://sourceforge.net/projects/lpsolve/files/lpsolve/)下载以下两个文件

*   `lp_solve_5.5.2.0_dev_ux64.tar.gz`- 包含`.so`文件
*   `lp_solve_5.5.2.0_Python2.5_exe_ux64.tar.gz`- 包含 lpsolver 的 python 包装脚本，它有助于从 .so 文件调用本机库。

解压上面下载的文件，解压形成的每个目录都会有一个`lpsolve55.so`文件，虽然位置不同。

`lpsolve55.so`通过设置以下两个环境变量来指定每个目录中文件的路径：

*   `export LD_LIBRARY_PATH=/usr/local/lib:/home/xxx/lp_solve_dev/`
*   `export PYTHONPATH=/home/xxx/usr/lib/python2.5/site-packages`

测试 lpsolver 是否按预期配置：

```
[xx-xxxx@ip-xx-x-x-xx ~]$ python
>>>Python 2.7.9 (default, Apr  1 2015, 18:18:03)
[GCC 4.8.2 20140120 (Red Hat 4.8.2-16)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>>from lpsolve55 import *
>>>lpsolve()
lpsolve  Python Interface version 5.5.0.9
using lpsolve version 5.5.2.0
Usage: ret = lpsolve('functionname', arg1, arg2, ...) 
```

**PS：**在你做这一切之前，确保你已经安装了 python-dev（如果没有，`sudo apt-get install python-dev`在命令行输入）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T03:36:48.550

下载链接为：

*   [http://sourceforge.net/projects/lpsolve/](http://sourceforge.net/projects/lpsolve/)，或
*   [http://sourceforge.net/projects/lpsolve/files/lpsolve/](http://sourceforge.net/projects/lpsolve/files/lpsolve/)用于文件选项卡。

一旦你安装了它，你可能需要调整你的`PYTHONPATH`.

您可能还想研究`cvexp`：

*   [http://pypi.python.org/pypi/cvexp](http://pypi.python.org/pypi/cvexp)

# akka - akka 演员失败对操作系统进程的影响

> ID：14906611
> 
> 赞同：0
> 
> 时间：2013-02-16T03:29:51.963
> 
> 标签：akka

如果说我的演员使用的代码（我无法控制的代码）抛出未处理的异常，这会导致整个演员系统进程崩溃还是每个演员都在某种特殊容器中运行？

为了澄清更多，在我的用例中，我希望每个参与者（在运行时）加载一些用户编写的代码/lib，并在它们上调用一些接口方法。这些库可能有问题，并可能导致我的演员系统操作系统进程死亡或停止或类似的事情。我的意思是，如果参与者调用的代码执行了一些停止的操作（例如通过有问题的客户端或死循环访问远程资源），或者甚至调用 Enviroment.exit() 或某些不良性质的东西，该怎么办。

我的意思是，如果我的要求是允许每个参与者加载我无法控制的代码，我该如何保护我的参与者系统免受它们的影响？我什至必须这样做吗？

我认为整个actor系统操作系统进程保护自己免受这些第三方代码的一种方法是在某种容器或事件中运行每个actor，在我的actor控制的本地机器上每个actor有一个actor系统？我是否必须走这么远，或者 akka 已经为我解决了这个问题，并且演员级别的任何失败都不会危及整个演员系统及其过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:18:03.580

如果 JVM 进程死亡，则 JVM 进程也会死亡。你可以通过使用 Akka Cluster 来解决这个问题，这样你就可以观察节点故障并做出反应。

# sql - ORACLE SQL - 根据逻辑对记录进行分类

> ID：14906613
> 
> 赞同：2
> 
> 时间：2013-02-16T03:29:56.507
> 
> 标签：sql, oracle

根据逻辑对记录进行分类的最佳方法是什么？

例如，从此表中：

```
ID House  Farm
1  (null) (null) 
```

我想输出：

```
ID Missing
1  House
1  Farm 
```

除了下面明显的 UNION 之外，还有更好的方法吗？也许是什么时候？在处理大量条件时，UNION ALL 不会很灵活。

```
select ID, 'House' as Missing from table where house is null
union all 
select ID, 'Farm' as Missing from table where farm is null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:51:10.093

虽然我不知道它是否比 更有效`UNION ALL`，但另一种选择是`UNPIVOT`根据您使用的 Oracle 版本使用：

```
SELECT ID, Missing
FROM (
    SELECT *
    FROM   YourTable
    UNPIVOT INCLUDE NULLS (IsMissing FOR Missing IN (House as 'House', Farm as 'Farm'))
  ) t
WHERE IsMissing IS NULL 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!4/cf77d/2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T04:13:58.110

请使用 UNPIVOT 检查结果。[查看Oracle Database 11g 第 1 版](http://www.oracle-base.com/articles/11g/pivot-and-unpivot-operators-11gr1.php)中 11g 、 PIVOT 和 UNPIVOT 运算符中的链接[pivot 和 unpivot 查询以](http://www.oracle-developer.net/display.php?id=506)获取更多详细信息。

```
SELECT 
  ID, MISSING
FROM  
(
    SELECT  ID, NVL(HOUSE, 1) HOUSE, NVL(FARM, 1) FARM FROM YourTable
 )x
UNPIVOT (
 DCol
 FOR MISSING
 IN  (HOUSE, FARM) 
); 
```

或者

```
SELECT 
  ID, MISSING
FROM YourTable 
UNPIVOT INCLUDE NULLS (
DCol
FOR MISSING
IN  (HOUSE, FARM) 
); 
```

# iphone - Tapku 将星期日初始化为第一天

> ID：14906617
> 
> 赞同：1
> 
> 时间：2013-02-16T03:31:02.773
> 
> 标签：iphone, ios, xcode, tapku

在我的日历项目中，我有一个 tapku 日历，它在最左边显示星期一。然而在美国，星期天通常在左边，所以tapku有一个方法

```
- (id)initWithSunday:(BOOL)sundayFirst 
```

所以这可能发生。然而，这个方法在之前的视图控制器中使用，该控制器初始化tapkuViewController，然后继续。但是，我在 tapku 视图控制器中开始我的项目。那么如何在左边设置周日呢？

谢谢

# c# - 通过 C# 登录网站

> ID：14906619
> 
> 赞同：7
> 
> 时间：2013-02-16T03:31:16.017
> 
> 标签：c#, security, login, web, request

我已经尝试了所有我可以在网上找到的关于如何实现这个来登录这个网站的方法。这是最近的失败。

```
 // I have tried with multiple different URLS this one 
 // and http://www.movable.com/login do not throw errors
 string url = "http://portal.movable.com/";
 string username = "<myusername>";
 string password = "<mypassword>";
 string authTok = @"+HOt3NTkkIAHkMSMvzQisEquhun9xvIG1mHzIEh6CAo=";
 string postData = "utf8=✓" + "&authenticity_token=" + authTok +
      "&user[login]=" + username + 
      "&user[password]=" + password + "&user[offset]=-5";

var container = new CookieContainer();
var buffer = Encoding.UTF8.GetBytes(postData);

var request = (HttpWebRequest)HttpWebRequest.Create(url);
request.CookieContainer = container;
request.UserAgent = "Mozilla/5.0";
request.Method = "POST";
request.KeepAlive = true;
request.AllowAutoRedirect = true;
request.CookieContainer = container;
request.ContentLength = buffer.Length;
request.ContentType = "application/x-www-form-urlencoded; charset=UTF-8";
request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

using (var requestStream = request.GetRequestStream())
    requestStream.Write(buffer, 0, buffer.Length);

using (var response = request.GetResponse())
{

        using (var reader = new StreamReader(response.GetResponseStream()))
        {
            var result = reader.ReadToEnd();
            //this is to read the page source after the request
            MessageBox.Show(result); 
        }             
} 
```

这里还有来自该站点的相关数据（我知道在示例中令牌不同，我已将它们设为相同但它不起作用）

```
<form accept-charset="UTF-8" action="/signin" class="new_user" id="new_user" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="hHfoUnIbi+6RB51x1cqXqAYHkjz9mCi7nc86gMdiMOo=" /></div>

    <p class="notice">Signed out successfully.</p>

  <h2>login to your account</h2>

  <label for="user_login">Login</label>
  <input id="user_login" name="user[login]" size="30" type="text" />
  <label for="user_password">Password</label>
  <input id="user_password" name="user[password]" size="30" type="password" />

  <input id="user_offset" name="user[offset]" type="hidden" />

  <label for="user_remember_me">
    <input name="user[remember_me]" type="hidden" value="0" /><input id="user_remember_me" name="user[remember_me]" type="checkbox" value="1" /> 
    Remember me on this computer.
  </label>
  <button class="login" name="button" type="submit">Login</button>
    <a href="/users/password/new" class="forgotPassword">Forgot password?</a>
  </form>  </div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-16T05:14:03.327

试试这个方法：

```
 var cookieJar = new CookieContainer();
        CookieAwareWebClient client = new CookieAwareWebClient(cookieJar);

        // the website sets some cookie that is needed for login, and as well the 'authenticity_token' is always different
        string response = client.DownloadString("http://portal.movable.com/signin");

        // parse the 'authenticity_token' and cookie is auto handled by the cookieContainer
        string token = Regex.Match(response, "authenticity_token.+?value=\"(.+?)\"").Groups[1].Value;
        string postData =
            string.Format("utf8=%E2%9C%93&authenticity_token={0}&user%5Blogin%5D=USERNAME&user%5Bpassword%5D=PASSWORD&user%5Boffset%5D=5.5&user%5Bremember_me%5D=0&button=", token);

        //WebClient.UploadValues is equivalent of Http url-encode type post
        client.Method = "POST";
        response = client.UploadString("http://portal.movable.com/signin", postData);

        //i am getting invalid user/pass, but i am sure it will work fine with normal user/password

    } 
```

使用的额外课程：

```
public class CookieAwareWebClient : WebClient
{
    public string Method;
    public CookieContainer CookieContainer { get; set; }
    public Uri Uri { get; set; }

    public CookieAwareWebClient()
        : this(new CookieContainer())
    {
    }

    public CookieAwareWebClient(CookieContainer cookies)
    {
        this.CookieContainer = cookies;
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
        {
            (request as HttpWebRequest).CookieContainer = this.CookieContainer;
            (request as HttpWebRequest).ServicePoint.Expect100Continue = false;
            (request as HttpWebRequest).UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0";
            (request as HttpWebRequest).Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
            (request as HttpWebRequest).Headers.Add(HttpRequestHeader.AcceptLanguage, "en-US,en;q=0.5");
            (request as HttpWebRequest).Referer = "http://portal.movable.com/signin";
            (request as HttpWebRequest).KeepAlive = true;
            (request as HttpWebRequest).AutomaticDecompression = DecompressionMethods.Deflate |
                                                                 DecompressionMethods.GZip;
            if (Method == "POST")
            {
                (request as HttpWebRequest).ContentType = "application/x-www-form-urlencoded";
            }

        }
        HttpWebRequest httpRequest = (HttpWebRequest)request;
        httpRequest.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
        return httpRequest;
    }

    protected override WebResponse GetWebResponse(WebRequest request)
    {
        WebResponse response = base.GetWebResponse(request);
        String setCookieHeader = response.Headers[HttpResponseHeader.SetCookie];

        if (setCookieHeader != null)
        {
            //do something if needed to parse out the cookie.
            try
            {
                if (setCookieHeader != null)
                {
                    Cookie cookie = new Cookie(); //create cookie
                    this.CookieContainer.Add(cookie);
                }
            }
            catch (Exception)
            {

            }
        }
        return response;

    }
} 
```

收到回复

```
<!DOCTYPE html>
<html>
<head>
  <title>MOVband Portal</title>
  <link href="/assets/application-f9d3794ad4639d96cd50c115ad241438.css" media="all" rel="stylesheet" type="text/css" />
  <!--[if lt IE 9]>
    <script src="/assets/modernizr-9b693978fbc3fcd01874b01875a736bf.js" type="text/javascript"></script>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <!--[if IE 7]>
    <link href="/assets/ie7-ca67da697ba8da1de77889ceedc4db1a.css" media="all" rel="stylesheet" type="text/css" />
  <![endif]-->
  <script src="/assets/application-b1fcaae48e75e2455cf45e1d75983267.js" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="aC33zdBSSAz63dVjOgYXR/L6skV/QxxHe4XqX3UYCek=" name="csrf-token" />
</head>
<body id="login">
  <header>
    <div class="container">
      <a href="http://movable.com">
        <img alt="Movablelogo" class="logo" src="/assets/movableLogo-3429bb636ded1af0a80951c7d4386770.png" />
</a>    </div>
  </header>

  <section class="main">
    <div class="container">
      <div id="loginWindow" class="cf">
  <img alt="Movbandlogologin" class="movbandlogo" src="/assets/MOVbandLogologin-3cacbbe2b9bb05b16a3ca521acf81fc6.png" />
  <div class="cf">
    <div id="welcomeMessage">
      <h1>Welcome</h1>

      <img alt="Movbanddevice" class="device" src="/assets/MOVbandDevice-acbb62593330775ac09dced40e28e8e2.png" />
      <p>
        Just got your MOVband? We'll have you moving in no time with our quick product registration and setup.
        <a href="/join">Join &gt;</a>
      </p>
    </div>
    <form accept-charset="UTF-8" action="/signin" class="new_user" id="new_user" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="aC33zdBSSAz63dVjOgYXR/L6skV/QxxHe4XqX3UYCek=" /></div>

        <p class="alert">Invalid email or password.</p>

      <h2>login to your account</h2>

      <label for="user_login">Login</label>
      <input id="user_login" name="user[login]" size="30" type="text" value="USERNAME" />
      <label for="user_password">Password</label>
      <input id="user_password" name="user[password]" size="30" type="password" />

      <input id="user_offset" name="user[offset]" type="hidden" value="5.5" />

      <label for="user_remember_me">
        <input name="user[remember_me]" type="hidden" value="0" /><input id="user_remember_me" name="user[remember_me]" type="checkbox" value="1" /> 
        Remember me on this computer.
</label>
      <button class="login" name="button" type="submit">Login</button>
        <a href="/users/password/new" class="forgotPassword">Forgot password?</a>
</form>  </div>
</div>

    </div>
  </section>

  <footer>
    <div class="container">
      <div class="social_icons">
        <a href="https://www.facebook.com/getMOVband" class="fb_link" target="_blank"></a>
        <a href="https://twitter.com/getmovband" class="tw_link" target="_blank"></a>
        <a href="http://www.youtube.com/getmovband" class="yt_link" target="_blank"></a>
        <a href="http://www.linkedin.com/company/2355960" class="li_link" target="_blank"></a>
      </div>
    </div>
  </footer>
</body>
</html> 
```

# data-structures - 指针和对象的实现

> ID：14906622
> 
> 赞同：3
> 
> 时间：2013-02-16T03:31:52.623
> 
> 标签：data-structures

![在此处输入图像描述](../Images/052451caf1d8041536177b3a1b1c0366.png)

这是双链表的多数组表示的图像。键为 4 的对象在原始链表中键为 16 的对象之后。这里 4 出现在 key[2] 中，16 出现在 key[5] 中。这里的概念是使用没有指针和对象的数组来实现双链表。有人可以解释这些元素是如何相互联系的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:46:58.003

第一个有 key `9`，并存储在 index `[7]`。您知道这是因为`L`包含列表头的索引 (7)。果然，您可以看到它没有“prev”值。

从这里开始，列表中的下一项存储在 index`[5]`中。（这就是它在 index 数组中的“next”中告诉我们的内容`[7]`。这个单元格的键为`16`.

从这里我们继续`[2]`，有钥匙`4`，`[3]`有钥匙`1`。这是列表中的最后一项，因为它没有“下一个”。

如果您想倒退，您也可以查看“prev”值。需要注意的是，“next”和“prev”包含与“key”完全不同类型的数字。Next 和 Prev 指的是数组索引，并且在此实现中实质上代替了指针。Key 包含一个数值，表示该节点在列表中该点的实际内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:05:30.517

您的数据结构将正常工作。如果您正在编写 C++，您应该只定义 next 和 prev。size_t 类型。但是，我看不到任何价值。

1.  需要额外的数学运算才能转到下一个元素。使用指针链接的传统列表，您只需访问存储在 pNext 字段中的地址。使用您的链表，计算下一个元素的地址需要一次乘法和一次加法。

2.  如果您的目标是优化内存布局以实现缓存友好性 - 它已经在某些列表实现中完成。例如，微软在 ATL 中的实现就是这样做的。CAtlList 类不是使用 new 运算符分配元素，而是分批分配它们，这就是为什么标准 STL 列表在针对 Microsoft 版本进行基准测试时通常会慢 2 倍。

# php - td click 未被 jQuery 注册

> ID：14906624
> 
> 赞同：1
> 
> 时间：2013-02-16T03:32:09.817
> 
> 标签：php, jquery, html

我正在尝试基于 jQuery 中的 td 单击打开一个模式窗口。好像没有开火 我查看了我的代码，这一切似乎都是正确的。我可能做错了什么？

```
<script type="text/javascript">
  $(document).ready(function () { <? php
      for ($i = 1; $i <= 9; $i++) { ?> $("td#grid2_mon<?php echo $i ?>").click(function () {
              $("#search_dialogMon<?php echo $i ?>").dialog({
                  modal: true,
                  height: 400,
                  width: 400,
                  buttons: {
                      Close: function () {
                          $(this).dialog("close");
                      }
                  }
              });
          }); <? php
      } ?>
  }
</script>
<?php 
  for ($i=1 ; $i <=9 ; $i++) { ?>
    <div id="search_dialogMon<?php echo $i ?>" style="display:none"></div>
<?php } ?>

<table>
<tr id="grid2_mon">
    <td class="gridSide">Mon</td>
    <td class="box" id="grid2_mon1">&nbsp;</td>
    <td class="box" id="grid2_mon2">&nbsp;</td>
    <td class="box" id="grid2_mon3">&nbsp;</td>
    <td class="box" id="grid2_mon4">&nbsp;</td>
    <td class="box" id="grid2_mon5">&nbsp;</td>
    <td class="box" id="grid2_mon6">&nbsp;</td>
    <td class="box" id="grid2_mon7">&nbsp;</td>
    <td class="box" id="grid2_mon8">&nbsp;</td>
    <td class="box" id="grid2_mon9">&nbsp;</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:18:39.207

```
your coding is not done properly you have made many syntax errors please try this code this will help you    
<script src="jquery-1.9.1.js">    </script>`    `<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js">      </script>`
<script type="text/javascript">
$(document).ready(function () { 
    $("td ").click(function () {
    var id = $(this).attr('id');
    $("#search_dialogMon"+id).dialog({height: 400,width:500,modal: true,    
        buttons: [{text: "OK",click: function() {$( this ).dialog( "close" );}}]
    });
    }); 
});
</script>
<?php 
for ($i=1 ; $i <=9 ; $i++) { ?>
<div id="search_dialogMon<?php echo $i; ?>" style="display:none">testing no<?php echo $i;?> </div>
<?php } ?>
<table>
<tr id="">
<td class="gridSide">Mon</td>
<?php 
for ($i=1 ; $i <=9 ; $i++) 
{ 
?>
<td class="box" id="<?php echo $i; ?>">mon<?php echo $i; ?></td>
<?php
}
?>
</tr>
</table> 
```

# php - 数组和 $_POST 数组的语句是否错误

> ID：14906625
> 
> 赞同：0
> 
> 时间：2013-02-16T03:32:10.333
> 
> 标签：php

我如何遍历 $departments 数组并测试它是否等于 $name 变量值，如果它在列表中则返回“已检查”。部门是一组复选框

```
function isChecked($name) {
$departments = (isset($_POST["interests"])) ? $_POST["interests"] : array();
foreach ($departments as $key => $value) {
    // this next line here is wrong 
    if($departments[$key][$value] == $name) { 
        return "checked";   
    };      
}
return ""; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:37:21.953

您指的`$value`是 foreach 循环内的错误。`$value`包含它所说的内容，`$departments`数组内部的值。

```
function isChecked($name) {
$departments = (isset($_POST["interests"])) ? $_POST["interests"] : array();
foreach ($departments as $key => $value) {
    if($value == $name) { 
        return "checked";   
    };  
}
return "";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:39:28.493

而不是 if($departments[$key][$value] == $name)

采用

```
if($value == $name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T03:37:34.947

你想使用

```
if ($departments[$key] == $name) { ... } 
```

或者

```
if ($value == $name) { ... } 
```

`$department[$key]`为您提供数组中的值`$key`，`$department`但该值也有助于存储，`$value`因为您在循环定义中设置了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T03:39:03.203

试试这个。

```
function isChecked($name) {
    return isset($_POST['interests'][$name]);
} 
```

如果您*需要*该函数在 true 时返回字符串值`checked`，您可以这样做。

```
return isset($_POST['interests'][$name]) ? 'checked' : ''; 
```

# ios - 无法打印自定义字体，ios

> ID：14906627
> 
> 赞同：2
> 
> 时间：2013-02-16T03:32:12.493
> 
> 标签：ios, objective-c, uifont, custom-font

按照[这里](http://refactr.com/blog/2012/09/ios-tips-custom-fonts/)的教程。我通过将字体复制到项目并将其添加到文件 Info.plist 来添加自定义字体。我还仔细检查并看到字体也添加到“构建阶段”的“复制捆绑资源”中。

但是，当我尝试通过以下方式打印字体名称时

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.myLabel.text       =   @"This is a custom font";
    self.myLabel.font       =   [UIFont fontWithName:@"Montserrat-Bold" size:36];
    NSLog(@"my font is %@",[UIFont fontNamesForFamilyName:@"Montserrat-Bold"]);
} 
```

我得到

```
2013-02-15 22:20:36.014 UsingCustomFont[5064:11303] my font is (
) 
```

请查看图像以了解我所做的事情。 ![在此处输入图像描述](../Images/a3c985146ddea2cca5b64d4c8f9ae91f.png)

如果您知道我在中间缺少什么，请提供帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:42:08.537

我过去遇到的几个问题：

1.  字体文件可能包含 iOS 不支持的格式的数据。根据我的经验，位图字体根本不起作用。仅加载矢量字体。

2.  您可能使用了错误的姓氏。检查返回的数组`[UIFont familyNames]`以确保。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T04:11:35.487

首先通过以下方式打印所有字体：

```
// get font family
NSArray *fontFamilyNames = [UIFont familyNames];

for (NSString *familyName in fontFamilyNames)
{ 
   // font names under family
   for(NSString *fontName in [UIFont fontNamesForFamilyName:familyName])
   {
       NSLog(@"Font Name = %@", fontName);
   }
} 
```

现在，取上面代码列出的字体的确切名称。有时名称因 iOS 而异。

分配字体时，您应该使用字体名称而不是系列名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T03:43:44.930

另一个常见的问题是字体文件已添加到项目中，但未添加到目标中。在管理器中选择字体文件，并在右侧的“身份和类型”检查器中检查它的目标成员身份。确保您的目标已被选中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T04:32:39.303

尝试查看所有可用的字体：

```
 for(NSString* family in [UIFont familyNames])
 {
    NSLog(@"%@", family);
   for(NSString* name in [UIFont fontNamesForFamilyName: family]) 
   {
     NSLog(@"  %@", name);
    }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T04:39:49.910

试试这个

```
 self.myLabel.text       =   @"This is a custom font";
  self.myLabel.font       =   [UIFont fontWithName:@"Montserrat-Bold" size:36];
  NSLog(@"my font is %@", myLabel.font.fontName); 
```

# java - Java 类定义？

> ID：14906628
> 
> 赞同：0
> 
> 时间：2013-02-16T03:32:13.413
> 
> 标签：java, class

所以我对这门语言还很陌生，我的老师刚刚给了我们这个任务，我们用 5 个类创建一个游戏。他给了我们班级名称，并告诉我们不要使用教科书中的代码。

从作业表中：
1\. 为两个玩家创建一个猪游戏，一个是用户，另一个是计算机。您必须准确地创建五个类，它们是
：死
B. 一对模具
c. 球员
D. PigGame 或 PigReferee
e. PlayPig（这将包含主驱动程序）

给出的代码：

```
import java.util.Random;

public class Die {
    private final int MIN_FACES = 4;

    private static Random generator = new Random();
    private int  numFaces; //number of sides on the die
    private int faceValue; //current value showing on the die

    //-----------------------------------------------------------------------------------|
    //  Defaults to a six-sided die. Initial face value is 1\.                            |
    //-----------------------------------------------------------------------------------|
    public Die(){
        numFaces = 6;
        faceValue = 1;
    }

    //-----------------------------------------------------------------------------------|
    //Explicitly sets the size of the die. Defaults to a size of six if the parameter is |
    //invalid. Initial face value is 1\.                                                  |
    //-----------------------------------------------------------------------------------|
    public Die(int faces){
        if (faces < MIN_FACES){
            numFaces = 6;
        }
        else{
            numFaces = faces;
        }
        faceValue = 1;
    }

    //-----------------------------------------------------------------------------------|
    //  Rolls the die and returns the result.                                            |
    //-----------------------------------------------------------------------------------|
    public int roll(){
        faceValue = generator.nextInt(numFaces) + 1;
        return faceValue;
    }

    //-----------------------------------------------------------------------------------|
    //  Returns the current faceValue.                                                   |
    //-----------------------------------------------------------------------------------|
    public int getFaceValue(){
        return faceValue;
    }
} 
```

所以我的问题是，Die 是当前唯一的课程，还是“公共 int roll”也算作一个课程。是什么造就了一个班级？谢谢，晕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:53:33.227

Die 是你目前唯一的职业。您可以判断，因为关键字**class**在定义时使用。`public int roll()`是 Die 类内部的一个方法。

您通常也可以分辨出什么是类，因为每个类都有自己的 .java 文件，以该类命名。所以你的 Die 类应该在 Die.java 文件中定义。您需要创建的其他四个类也将分别位于它们自己的 .java 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:16:52.397

`Die`这里只有你的班级。就像您制作了 Die 课程一样，您将不得不制作其他课程。然后你将不得不使用所谓的**`Inheritance`**. 我想主要的课程是`PlayPig`。继承是java中非常重要的话题，我不知道你的老师是如何给你一个项目而不解释的。无论如何，这里有一些链接可以解决您的问题。

[第一个链接](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html) [第二个链接](http://www.javabeginner.com/learn-java/java-inheritance) [第三个链接](http://www.roseindia.net/answers/viewqa/Java-Beginners/26449-Inheritance-java-Example.html)

# javascript - 在 dotcloud 上托管 nodejs 服务器

> ID：14906632
> 
> 赞同：3
> 
> 时间：2013-02-16T03:33:05.147
> 
> 标签：javascript, node.js, websocket, dotcloud

我正在尝试在托管服务“dotcloud”上托管一个 nodejs 应用程序。我的 nodejs 使用包“websocket”来处理通信。IE。npm 安装 websocket

我的应用程序在我的笔记本电脑上的 localhost 上运行时效果很好。但是当我在 dotcloud 上部署应用程序时，它无法正常工作。

这是发生了什么：您将浏览器指向 dotcloud 上的 url：pirate-captainlonate.dotcloud.com

然后，express 使用 express.get('/'.......){} 处理 GET 请求，express 将 .html 页面提供给客户端，正如您所期望的那样。.html 文件依次尝试与服务器建立 websocket 连接。再次，我可以让它在我的本地机器上正常工作。但是，没有建立连接。具体来说，dotcloud 肯定是在为我提供 .html 文件，但 .html 文件没有与服务器建立 websocket 连接。但是 connection.onerror 也没有被调用。有点奇怪。

这里有一些代码可以帮助你理解我在做什么：

**客户端：**

```
this.connection = new WebSocket('ws://pirate-captainlonate.dotcloud.com:1337'); 

this.connection.onerror = function (error) {
        console.log("ERROR with the connection *sadface*");
    };

**** Note that I note the onerror function here to show that I do indeed have it set up, but it's not being called. It would seem that no error is being thrown. 
```

**服务器端：**

```
var webSocketServer = require('websocket').server; // websocket
var server = require('http').createServer();
var expr = require("express"); // load the express module
var xpress = expr(); // xpress now holds the server object

// Helps Node serve the game.html page upon a get request
xpress.configure(function() {
    xpress.use(expr.static(__dirname + "/public"));
     xpress.set("view options", {layout: false});
});

// All requests to root serve the game.html page
xpress.get('/', function(req, res) {
    res.sendfile(__dirname + '/public/game.html');
});

// What ports to listen on
var webSocketsServerPort = 1337;
xpress.listen(8080);
server.listen(webSocketsServerPort, function() {
    console.log((new Date()) + " Server is listening on port " + webSocketsServerPort);
});

// WebSocket Server
var wsServer = new webSocketServer({
    httpServer: server
}); 
```

这应该足以向你们展示它是如何工作的。现在你们可能会问，“>> dotcloud logs”显示的是什么？

```
[www.0] ==> /var/log/supervisor/app.log <==
[www.0] Sat Feb 16 2013 02:57:59 GMT+0000 (UTC) Server is listening on port 1337
[www.0] ==> /var/log/supervisor/supervisord.log <==
[www.0] 2013-02-16 02:57:57,946 WARN Included extra file "/home/dotcloud/current/supervisord.conf" during parsing
[www.0] 2013-02-16 02:57:58,033 INFO RPC interface 'supervisor' initialized
[www.0] 2013-02-16 02:57:58,033 WARN cElementTree not installed, using slower XML parser for XML-RPC
[www.0] 2013-02-16 02:57:58,033 CRIT Server 'unix_http_server' running without any HTTP authentication checking
[www.0] 2013-02-16 02:57:58,038 INFO daemonizing the supervisord process
[www.0] 2013-02-16 02:57:58,039 INFO supervisord started with pid 140
[www.0] 2013-02-16 02:57:59,048 INFO spawned: 'app' with pid 154
[www.0] 2013-02-16 02:58:00,290 INFO success: app entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
[db.0] ==> /var/log/mongodb/mongodb.log <==
[db.0] Sat Feb 16 01:45:02 [conn4] end connection 127.0.0.1:51326 (0 connections now open) 
```

好吧，我真的很想让这个工作。我一直在这。让我知道你们是否需要帮助我回答我的问题。

谢谢，

——内森

*附录：这是服务器发送 html 文件的方式。*

```
xpress.get('/', function(req, res) {
    res.sendfile(__dirname + '/public/game.html');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:22:53.937

看起来您正在尝试为您的服务使用 2 个 http 端口，而 dotCloud 仅支持 1 个开箱即用，因此您需要通过在您的服务中添加一个小片段来让他们知道您想要另一个`dotcloud.yml`

这是一个`dotcloud.yml`请求第二个名为**server的 tcp 端口的示例**

```
app:
    type: nodejs
    ports:
       server: tcp
    config:
       node_version: v0.8.x 
```

添加并推送后，您的服务器将获得可用于服务器的第二个 TCP 端口，您只需要通过从环境文件中获取值来找出该端口是什么。

这是一个片段，它将从 ENV 获取您的端口，当不存在时它将默认为 4242，因此您仍然可以在本地运行。

```
var webSocketsServerPort = process.env['PORT_SERVER'] || 4242; 
```

如果您想知道我是如何获得 ENV 变量名称的，这很简单。它将是 PORT_，然后是来自`dotcloud.yml`. 由于我使用上面的**服务器**，它变成**了 PORT_SERVER**，如果我使用节点，它就会是 PORT_NODE，所以放你想要的，但要确保这些值匹配。

**客户：**

要找出您需要连接到客户端上的哪个端口，您需要再次返回您的环境变量。这次您正在寻找一个看起来像这样的变量`DOTCLOUD_APP_SERVER_PORT`。**重要提示**：*您的变量名称可能不同*

我是如何得到那个环境变量名的？

变量的名称看起来像这样`DOTCLOUD_{{app_name}}_{{port_name}}_PORT`全部大写。将 {{variable}} 替换为以下信息。

`{{app_name}}`= 来自 dotcloud.yml 的应用程序名称，在上面的示例中是`app` `{{port_name}}`= 端口名称，`server`在上面的 dotcloud.yml 示例中。

要找到它，您可以从您的应用程序`environment.json`、`environment.yml`文件、shell ENV 变量中获取它，或登录 dotCloud 仪表板，单击您的应用程序，然后单击环境选项卡以查看您的应用程序变量列表。

如果您进行这三个更改，您的问题应该会消失。

如果您需要更多代码示例，请查看此 github 存储库，该存储库执行与您尝试执行的操作类似的操作。

[https://github.com/3on/node-tcp-on-dotcloud](https://github.com/3on/node-tcp-on-dotcloud)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:55:45.247

<<<这里是原海报>>>

好的，我让它在 Dotcloud 上工作。我只是发布你们需要知道的内容。如果您一直在关注此问题，那么最终解决方案即将发布。我要感谢 dotcloud 的 Ken 让我走上了正确的道路。感谢他，我了解了 environment.yml、environments.json 文件。此外，做一个

```
console.log(process.env); 
```

在服务器端是一个巨大的助手。KK这里是解决方案：

首先我想让你看看我是如何声明我的需求和变量的：

```
var webSocketServer = require('websocket').server; // websocket
var server = require('http').createServer();
var expr = require("express"); // load the express module
var xpress = expr(); // xpress now holds the server object 
```

好了，既然你知道这些东西是什么，我需要告诉你，我决定使用 ejs 来渲染一个模板。我面临的一个问题是我需要我的客户端能够“知道”在哪个端口上通过 WebSocket 连接到服务器。如果没有 websocket 连接，我还要如何给客户端提供一个像“端口”这样的变量。请记住，端口可能会改变，所以我不能硬编码一个像 50234 这样的端口或者在我的 ws:// url 末尾的东西。解决方案是使用“ejs”。

ejs 是一个模块（即“npm install ejs”）我不会真正解释如何使用它。不过这里是我以前学的一个网站：http: [//embeddedjs.com/](http://embeddedjs.com/)

以下是您需要了解的一些事项：当客户端将他们的浏览器指向您的 dotcloud url 时，这就是您向他们发送文件的方式，在我的情况下，我将 .html 文件更改为 .ejs 文件，以便将其呈现为一个模板。

```
xpress.get('/', function(req, res) {
    res.render('game', 
    {
        answer: superCoolPort
    });
}); 
```

“游戏”意味着在我告诉服务器查找模板的任何文件夹中，都应该有一个名为 game.ejs 的文件。请注意我如何使用一些数据渲染名为 game.ejs 的模板。在这种情况下，数据是我的 server.js 文件中名为“superCoolPort”的局部变量。这就是那个变量：

```
var superCoolPort = process.env['DOTCLOUD_WWW_SERVER_PORT']; 
```

好的，现在 express（在我的例子中是'xpress'），需要监听端口 8080。

```
xpress.listen(8080); 
```

这不是您的 WebSocket 将尝试连接的端口。这是您的浏览器尝试连接到页面的端口。但是，Dotcloud 不允许您在端口 80 上托管任何内容，因此如果您将其托管在 8080 上，他们会为您将其重定向到 80。这样，您无需在浏览器中输入 url:8080。

现在让我解释一下http服务器是如何变成wsServer的。基本上你设置了http服务器并让它监听一个端口。然后将此 http 服务器挂载到 websocket 服务器。看到我在顶部声明“服务器”的位置了吗？

这是 http 服务器要监听的端口。请注意，这意味着 websocket 服务器也将侦听此端口。

```
var webSocketsServerPort = process.env['PORT_SERVER'] || 4242;
server.listen(webSocketsServerPort, function() {
    console.log((new Date()) + "The http server is listening on port " + webSocketsServerPort);
});

// WebSocket Server
var wsServer = new webSocketServer({
    // WebSocket server is tied to a HTTP server. WebSocket request is just
    // an enhanced HTTP request.
    httpServer: server
}); 
```

在我转向客户端之前，我想让你知道我是如何设置我的快速配置的。

```
xpress.configure(function() {
     // Sets the directory to look for templates
     xpress.set('views', __dirname + '/public');
     // This line tells Express that we are using the ejs engine to render templates
     xpress.set('view engine', 'ejs');
     xpress.use(expr.static(__dirname + "/public"));
     xpress.set("view options", {layout: false});
}); 
```

以上所有内容都是对 server.js 文件的修改。

好的，接下来我会谈谈模板。我曾经有一个名为 game.html 的文件。好吧，我希望这是一个可以用一些数据（websocket 需要连接的端口号）渲染的模板。所以首先我把文件名改成了game.ejs。然后，我做了一些修改如下：

```
<body onload="init()"> 
```

变成了

```
<body data-port="<%=answer%>" onload="init()"> 
```

看看 onload="init()" 怎么样？这意味着在页面加载之前不会调用 init。这很重要，因为当我们要访问端口时，除非您在“init()”内部，否则无法保证它可用。我知道这一点是因为我在定义 init() 之前尝试访问它，它说变量为空。

现在在 init() 内部，您可以像这样访问端口号：

```
var port = $('body').data('port'); 
```

现在我的 client.js 文件可以像这样初始化 websocket 连接：

```
this.connection = new WebSocket('ws://pirate-captainlonate.dotcloud.com:' + this.thePort); 
```

其中“this.thePort”与上面的“port”相同。

我想让这个解决方案尽可能完整，所以这是我的 dotcloud.yml 文件。它位于我的 server.js 文件上方的一个目录：

```
www:
    type: nodejs
    approot: app
    ports:
        server: tcp
    processes:
        app: node app.js
    config:
        node_version: v0.8.x

db:
    type: mongodb 
```

这是我的 package.json 文件。它与我的 server.js 文件（在我的情况下实际上称为 app.js）位于同一目录中：

```
{
  "name": "app",
  "version": "0.0.0",
  "scripts": {
    "start" : "node app.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "dependencies":{
      "express" : "",
      "mongodb" : "",
      "fs": "",
      "ejs": "",
      "ws": "",
      "websocket": ""
  },
  "repository": "",
  "author": "",
  "license": "BSD"
} 
```

最后，老实说，我不知道这是否有必要，但这是我的 supervisord.conf 文件。它与 server.js 位于同一目录中。

```
[program:node]
command = node app.js
directory = /home/dotcloud/current 
```

好吧，我认为这就是一切。我希望我没有遗漏任何东西。最终，这些更改是我使用“websocket”在 Dotcloud 上部署和运行我的 nodejs 应用程序所需要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-16T04:39:30.750

看起来您正在尝试访问端口 1337 上的 WebSocket，但您应该尝试通过端口 80。

```
this.connection = new WebSocket('ws://pirate-captainlonate.dotcloud.com'); 
```

大多数公共平台仅通过端口 80 反向代理您的应用程序。说到，您是否尝试过在 Nodejitsu 上运行您的应用程序？[http://nodejitsu.com](http://nodejitsu.com)

# php - 在加载的元素上使用 jQuery 方法

> ID：14906639
> 
> 赞同：0
> 
> 时间：2013-02-16T03:35:26.097
> 
> 标签：php, jquery, html

我正在一个网站上使用 .load() 动态加载元素

其中一些元素有一个 edit_area 类，用于 jeditable ( [http://www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable) )

加载我的.html

```
<div class="edit_area" id="news">
    Content to be loaded
</div> 
```

jQuery

```
$('#loadArea').load('loadMe.html');
$('.edit_area').editable('save.php', { 
    type      : 'textarea',
    cancel    : 'Cancel',
    submit    : 'OK',
    indicator : '<img src="loaderimage.gif">',
    tooltip   : 'Click to edit...'
}); 
```

由于这些元素是动态加载的， .ediable() 方法没有绑定到它们，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:39:12.337

```
$("#loadArea").load('loadMe.html', function () {
    $('.edit_area').editable('save.php', {
        //etc. 
```

如果您`.editiable`在from的*回调*`.load`中执行此操作，则必须先加载元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:40:11.323

```
$('#loadArea').load('loadMe.html', function()
{
    $('.edit_area').editable('save.php', { 
      type      : 'textarea',
      cancel    : 'Cancel',
      submit    : 'OK',
      indicator : '<img src="loaderimage.gif">',
      tooltip   : 'Click to edit...'
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T03:40:31.360

在加载事件的回调中，您可以使用“查找”方法来查找您想要应用“可编辑”的必要子元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T03:43:23.727

由于您的元素是动态加载的，因此在调用您的代码时它们不一定存在。

看看 .delegate

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

# windows - npapi 插件如何从浏览器获取 WM_ACTIVATE 消息？

> ID：14906642
> 
> 赞同：1
> 
> 时间：2013-02-16T03:36:17.810
> 
> 标签：windows, npapi, browser-plugin

在 Windows 平台上，当我切换到另一个窗口时，浏览器会收到一条 WM_ACTIVATE 消息。无论如何将 WM_ACTIVATE 消息传递给插件？我已经尝试过 NPP_HandleEvent，但它似乎根本不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:16:30.430

For Windows `NPP_HandleEvent()` is used for windowless plugins only and they are windowed by default. So, unless you explicitly opted in for windowless, that would be the reason `NPP_HandleEvent()` is not getting called.

For windowed plugins, you need to subclass the plugin window to receive window messages (see e.g. [`Subclass()`](http://dxr.mozilla.org/mozilla-central/dom/plugins/test/testplugin/nptest_windows.cpp#l685) in Mozillas test plugin sources).

For windowless plugins (which should be preferred), `WM_ACTIVATE` is [not delivered to the plugin](https://developer.mozilla.org/en-US/docs/NPEvent).
Do you actually need to handle `WM_ACTIVATE` or do you need to know when the plugin is visible/focused? That can be determined by checking for 0-sized clip rects for `NPP_SetWindow()` and the focus events.
If you really need to know about window activation (why?), the next best thing i can think of would be listening to the `focus` DOM event on the window.

# validation - 在没有模型的情况下验证电子邮件蛋糕 1.2

> ID：14906650
> 
> 赞同：0
> 
> 时间：2013-02-16T03:37:28.303
> 
> 标签：validation, email, cakephp

我试图找到一种方法来验证使用没有模型的 CakePHP 1.2 的电子邮件地址。这可以做到吗？如果是这样，我如何在**没有模型的情况下**使用 CakePHP 1.2 验证电子邮件地址？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T12:17:18.753

1] 使用纯 php 正则表达式匹配（由[http://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)提供）

```
[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4} 
```

2]或从以下位置调用蛋糕电子邮件验证功能：

```
$Validation =& Validation::getInstance();
$result = $Validation->email($tested_email) 
```

# python - 在字符串中注入额外的文本

> ID：14906655
> 
> 赞同：0
> 
> 时间：2013-02-16T03:38:18.910
> 
> 标签：python, regex

基本上我有两个字符串，一个是传记，另一个是 year_of_birth。

传记内容为：

> abc abc abc。
> 
> 生于英国。abc abc。
> 
> abc abc abc。

year_of_birth 是一个数字。比如说 1920 年。

我不想要的输出是：

> abc abc abc。
> 
> **1920年**生于英国。abc abc。
> 
> abc abc abc。

所以我只想***在 1920 年***注入IF 出生关键字，并且在任何 AZ 字符之后但在任何标点符号之前。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:55:18.463

```
>>> import re
>>> year_of_birth = 1920
>>> re.sub('(?m)[bB]orn[^,.?!:;]+', '\g<0> in %d' % year_of_birth, content)
'abc abc abc abc.\n\nBorn in England in 1920\. abc abc abc.\n\nabc abc abc abc.' 
```

这里`[^,.?!:;]+`匹配任何不是标点符号的东西。此外，`(?m)`表示多行，以防标点符号在下一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:41:32.400

```
import re
re.sub(r'(Born.*?)\.', r'\1 in 1920.', bio) 
```

# c++ - 使用 WinAPI 检索类指针？

> ID：14906659
> 
> 赞同：1
> 
> 时间：2013-02-16T03:39:01.990
> 
> 标签：c++, class, winapi, volatile, readprocessmemory

*在任何人问之前，这里没有恶意。该项目仅用于教育和个人使用，最多被设计为“作弊引擎”或未来可能的反作弊机制。无意以任何恶意方式使用它。*

## 我有以下 3 个项目的解决方案：

*   32 位 MFC 应用程序，允许用户选择要注入的进程
*   32 位 Win32 DLL 通过 VirtualAlloc + WriteProcessMemory + CreateRemoteThread + LoadLibrary 技术注入目标进程
*   用于测试何时发生本地注入的 32 位 Win32 控制台应用程序

### 在 DLL 中，我创建了以下一组函数：

```
////////////////
// Deceiver.h //
////////////////
#ifdef DECEIVED_EXPORTS
#   define DECEIVED_API __declspec(dllexport)
#else
#   define DECEIVED_API __declspec(dllimport)
#endif

volatile class DECEIVED_API CDeceived
{
public:
    CDeceived(void);
    virtual HANDLE WINAPI GetRunningProcess();
    virtual DWORD WINAPI GetRunningProcessId();
    virtual HANDLE WINAPI GetRunningThread();
    virtual DWORD WINAPI GetRunningThreadId();
    virtual LPVOID WINAPI Allocate(DWORD size);
    virtual BOOL WINAPI Deallocate(LPVOID address, DWORD size);
    virtual BOOL WINAPI Read(LPVOID address, LPVOID buffer, DWORD size);
    virtual BOOL WINAPI Write(LPVOID address, LPVOID buffer, DWORD size);
    virtual BOOL WINAPI ReadEx(HANDLE hProcess, LPVOID address, LPVOID buffer, DWORD size);
    virtual BOOL WINAPI WriteEx(HANDLE hProcess, LPVOID address, LPVOID buffer, DWORD size);

    WCHAR m_signature[10];
};

extern DECEIVED_API CDeceived* deceiver;
LPVOID DECEIVED_API WINAPI RemoteInitialize();

//////////////////
// Deceiver.cpp //
//////////////////
#include "stdafx.h"
#include "Deceived.h"

DECEIVED_API CDeceived* deceiver = NULL;

CDeceived::CDeceived()
{
    memcpy(&m_signature[0], L"Deceived?\0", 10);
}

HANDLE WINAPI CDeceived::GetRunningProcess()
{
    return GetCurrentProcess();
}

DWORD WINAPI CDeceived::GetRunningProcessId()
{
    return GetCurrentProcessId();
}

HANDLE WINAPI CDeceived::GetRunningThread()
{
    return GetCurrentThread();
}

DWORD WINAPI CDeceived::GetRunningThreadId()
{
    return GetCurrentThreadId();
}

LPVOID WINAPI CDeceived::Allocate(DWORD size)
{
    return VirtualAlloc(NULL, size, MEM_RESERVE|MEM_COMMIT, PAGE_EXECUTE_READWRITE);
}

BOOL WINAPI CDeceived::Deallocate(LPVOID address, DWORD size)
{
    return VirtualFree(address, size, MEM_RELEASE);
}

BOOL WINAPI CDeceived::Read(LPVOID address, LPVOID buffer, DWORD size)
{
    DWORD dwBytesRead = 0;
    BOOL bRet = ReadProcessMemory(GetCurrentProcess(), address, buffer, size, &dwBytesRead);
    return bRet && (dwBytesRead > 0);
}

BOOL WINAPI CDeceived::Write(LPVOID address, LPVOID buffer, DWORD size)
{
    DWORD dwBytesWritten = 0;
    BOOL bRet = WriteProcessMemory(GetCurrentProcess(), address, buffer, size, &dwBytesWritten);
    return bRet && (dwBytesWritten > 0);
}

BOOL WINAPI CDeceived::ReadEx(HANDLE hProcess, LPVOID address, LPVOID buffer, DWORD size)
{
    DWORD dwBytesRead = 0;
    BOOL bRet = ReadProcessMemory(hProcess, address, buffer, size, &dwBytesRead);
    return bRet && (dwBytesRead > 0);
}

BOOL WINAPI CDeceived::WriteEx(HANDLE hProcess, LPVOID address, LPVOID buffer, DWORD size)
{
    DWORD dwBytesWritten = 0;
    BOOL bRet = WriteProcessMemory(hProcess, address, buffer, size, &dwBytesWritten);
    return bRet && (dwBytesWritten > 0);
}

LPVOID DECEIVED_API WINAPI RemoteInitialize()
{
    #ifdef _DEBUG
        MessageBoxA(NULL, "Please attach a debugger", "Deceived::RemoteInitialize", MB_ICONINFORMATION);
    #endif

    if(deceiver != NULL) delete deceiver;
    deceiver = new CDeceived();
    LPVOID lpReturn = deceiver->Allocate(sizeof(deceiver));

    if(lpReturn) {
        deceiver->Write(lpReturn, &deceiver, sizeof(deceiver));
        return lpReturn;
    }

    return NULL;
} 
```

### 在 MFC 应用程序将 DLL 注入到控制台测试项目后...

它调用*RemoteInitialize()*来初始化远程类并将虚拟内存空间中的地址返回给调用者，然后将其本地化为*CDeceived*类的共享实例。以下是我的处理方式：

```
BOOL CDeceiverHook::Validate(LPVOID lpDeceivedAddress)
{
    CDeceived *deceiver = new CDeceived();
    BOOL bRet = deceiver->ReadEx(hProcess, lpDeceivedAddress, &m_deceived, sizeof(m_deceived));
    int cmp = _wcsicmp(m_deceived->m_signature, L"Deceived?");
    return bRet && (cmp == 0);
} 
```

...但是本地化类指针似乎没有指向远程类指针，而是在它的虚拟表中保存了几个 NULL 指针，如果您尝试执行其中任何一个，则会导致访问冲突。

我可能应该注意到，我已经通过 OpenThreadToken、ImpersonateSelf 和 SetPrivilege 成功地为 MFC 应用程序提供了适当的调试权限。我是否还必须以某种方式将班级的地址锁定在内存中，也许？是*volatile*关键字不够用，还是在这里用错了？我需要做什么来检索由 DLL 分配的完全相同的指针？

提前致谢！任何有效的建议都将给予支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:13:44.947

每个进程在地址空间中都有不同的 DLL 实例，并且可能在不同的地址上，您不能简单地强制进程加载 DLL 并期望从另一个进程使用它的地址空间。

有几种方法可以将注入的 DLL 与注入器进程相互通信：

*   共享内存：您可以使用 MapViewOfFile 在两个或多个进程之间共享内存，请注意您应该注意类实例中存储的指针以及虚拟成员不起作用，因为 vtable 属于另一个地址空间。

*   RPC：你可以使用Win32 RPC来进行进程之间的调用和共享数据，我个人觉得太复杂了。

*   命名管道/Winsock：我的首选，既简单易用，您可以（几乎）做任何您想做的事情。

*   Microsoft Message Queue(MSMQ)：不太了解，我觉得也可以用。

*   Win32 消息：您可以使用 RegisterWindowMessage 跨系统处理 Windows 消息并共享数据，仅对共享小值（两个 DWORD）有用

您可以在 MSDN 上看到执行 IPC 的其他方法：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa365574 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574(v=vs.85).aspx)

我明确推荐你使用 Named Pipes/Winsock，如果是这样，你可以使用 Google Protobuf 在进程之间轻松共享数据结构。

# solid-state-drive - SSD固件和SSD控制器的区别

> ID：14906665
> 
> 赞同：-2
> 
> 时间：2013-02-16T03:39:34.140
> 
> 标签：solid-state-drive

我试图了解这两者之间的区别，但我没有发现它们之间的明显区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-08T18:45:53.007

SSD 控制器是一种硬件，包括嵌入式处理器和内存模块，即 DRAM 和闪存芯片控制器。该控制器负责处理即将到来的请求并采取正确的行动，例如，如果需要 GC，打包请求并将请求发送到正确的通道，以向闪存芯片发送请求。SSD 固件是在嵌入式处理器中实现的软件，用于处理逻辑到物理页面 (FTL) 的映射、垃圾收集和磨损均衡算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:42:35.333

SSD 控制器是 SSD 上的物理芯片。SSD固件是芯片运行的软件。

# objective-c - 动态添加 UILabel 到 UIView 然后编辑

> ID：14906667
> 
> 赞同：2
> 
> 时间：2013-02-16T03:39:52.677
> 
> 标签：objective-c, uitextfield, uilabel

假设您想向 UIView 添加一些文本。为此，您首先单击一个显示文本字段的按钮。此文本字段在屏幕上是可移动的，并且可以放置在任何地方。用户将在字段中输入文本并单击保存按钮。文本字段消失，并创建了一个 UILabel 并在其位置与输入的文本一起使用。如果用户希望稍后编辑该文本，他们只需触摸它，UILabel 将被删除，并且将出现一个包含文本内容的文本字段。我还没有实现标签的触摸方法。

我会从哪里开始这样的野兽？

我创建了一个 TextView，它将 UILabel 及其正确的属性保存在一个数组中。它将通过数组运行，并且 drawRect 将准确地弹出每个标签。

我只是担心我正在泄漏内存，或者我正在完全错误地解决这个问题。是否有任何人都知道的教程或其他东西可以帮助我指出正确的方向？TextView 应该是 UILabel 的子类吗？

这是我的 TextView.h

```
@interface TextManager : UIView 

- (void) addTextToView : (NSString *) s : (int)rx :(int) ry; 
```

文本视图.m

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
          self.backgroundColor = [UIColor clearColor];
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
       NSLog(@"Draw Rect Text Manager");
    // Drawing code
    Settings *mySettings = [Settings sharedSettings];

    if ([[mySettings returnTextArray] count] > 0) {
        [self.superview addSubview:[[mySettings returnTextArray] lastObject]];
    }

}

- (void) addTextToView : (NSString *) s : (int)rx :(int) ry {
    NSLog(@"Add Text to View");

    UIColor *tempColor = [UIColor blueColor];
    CGRect  tempRect = CGRectMake(rx, ry, 100, 100);

    UILabel *thisLabel = [[UILabel alloc] initWithFrame:tempRect];
    thisLabel.text = s;
    thisLabel.font = [UIFont fontWithName:@"Helvetica" size:16];
    thisLabel.textColor = tempColor;
    thisLabel.backgroundColor = [UIColor clearColor];
    thisLabel.transform = CGAffineTransformMakeRotation (0);
    thisLabel.userInteractionEnabled = NO;
    thisLabel.tag = 1;

    [textArray addObject:thisLabel];

    [self setNeedsDisplay];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:01:52.043

您无需交换标签和文本字段即可获得所需的结果。`UITextField`在 a 中使用一个`UIView`：

```
@interface CSTextView : UIView

@property (nonatomic, strong) UITextField *textField;

@end

@implementation CSTextView

- (id)initWithFrame:(CGRect)frame
{
    if ((self = [super initWithFrame:frame])) {
        UITextField *textField = [[UITextField alloc] initWithFrame:[self bounds]];

        textField.placeholder = @"Your text here";
        textField.font = [UIFont fontWithName:@"Helvetica" size:16];
        textField.textColor = [UIColor redColor];
        textField.backgroundColor = [UIColor clearColor];
        textField.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        textField.textAlignment = NSTextAlignmentCenter;
        textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;

        [self setTextField:textField];
        [self addSubview:textField];
    }
    return self;
}

@end 
```

然后，在您的视图控制器中，实现`UITextFieldDelegate`协议并向文本视图添加手势识别器以处理拖动，如下所示：

```
@interface CSViewController : UIViewController <UITextFieldDelegate>

@property (nonatomic, strong) UIView *textView;

@end

@implementation CSViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    CSTextView *textView = [[CSTextView alloc] initWithFrame:CGRectMake(20, 100, 280, 60)];

    [textView setBackgroundColor:[UIColor colorWithWhite:0 alpha:0.1]];
    [[textView textField] setDelegate:self];

    [textView addGestureRecognizer:[[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)]];

    [self setTextView:textView];
    [[self view] addSubview:textView];
}

#pragma mark -
#pragma mark Gesture recognizer

- (void)handlePan:(UIPanGestureRecognizer *)panRecognizer
{
    CGPoint translation = [panRecognizer translationInView:[self view]];

    if ([panRecognizer state] == UIGestureRecognizerStateChanged) {
        [[self textView] setFrame:CGRectOffset([[self textView] frame], translation.x, translation.y)];
    }

    [panRecognizer setTranslation:CGPointZero inView:[self view]];
}

#pragma mark -
#pragma mark Text field methods

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];

    return YES;
}

@end 
```

# visual-studio - 如何在“打开方式”对话框中设置程序名称？

> ID：14906673
> 
> 赞同：1
> 
> 时间：2013-02-16T03:40:41.160
> 
> 标签：visual-studio, visual-studio-2012, exe, .net-assembly, open-with

我希望程序阅读`VLC (Move on end)`：

![一种](../Images/8662bf1dd3da96b69e5e8ad80b18676c.png)

我已将我的装配信息修改为以下内容，但无济于事：

![一种](../Images/5efb6ef32ab82ed79aaf176f28616ed5.png)

如何更改“打开方式”对话框中显示的名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T04:21:24.873

它作为 HKCR\Applications\YourExeName 下的 FriendlyAppName 值存储在注册表中。

[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ee872121%28v=vs.85%29.aspx)中描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:54:25.440

根据汉斯的回答，这就是为我做的：

**出口.reg**

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\Applications\VLCMoveOnEnd.exe]
"FriendlyAppName"="VLC (Move on end)"

[HKEY_CLASSES_ROOT\Applications\VLCMoveOnEnd.exe\shell]

[HKEY_CLASSES_ROOT\Applications\VLCMoveOnEnd.exe\shell\open]
"FriendlyAppName"="VLC (Move on end)" 
```

# cuda - nvidia-smi 是如何工作的？

> ID：14906675
> 
> 赞同：2
> 
> 时间：2013-02-16T03:40:44.027
> 
> 标签：cuda, gpgpu, nvidia, gpu

允许 nvidia-smi 获取硬件级别详细信息的内部操作是什么？即使某些进程已经在 GPU 设备上运行，该工具也会执行，并获取使用详细信息、进程的名称和 ID 等。是否可以在用户级别开发这样的工具？NVML 是如何相关的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T07:02:06.397

[Nvidia-smi 是NVML](https://developer.nvidia.com/tesla-deployment-kit)的薄包装器。您可以借助包含的 SDK 使用 NVML 进行编码[您可以借助Tesla Deployment Kit](https://developer.nvidia.com/tesla-deployment-kit)。

使用 nvidia-smi 可以完成的所有操作都可以直接从 C 库 NVML 中查询。如果您需要在某种应用程序中查询这些数据，最好（并且可能更容易）针对 NVML 编写而不是解析 nvidia-smi stdout（过去的格式已更改）。

NVML 库也有[python](http://pypi.python.org/pypi/nvidia-ml-py/4.304.02)和[perl](http://search.cpan.org/~nvbinding/nvidia-ml-pl/lib/nvidia/ml.pm)绑定。因此，您可以使用比 C 更高级别的编程语言。

# mysql - mySQL 查看行是否存在

> ID：14906676
> 
> 赞同：0
> 
> 时间：2013-02-16T03:40:51.243
> 
> 标签：mysql, exists

嘿，我有以下代码：

```
$query = "SELECT * " .
            "FROM wp_postmeta " .
            "WHERE post_id = " . $postID . " " .
            "AND meta_key = 'xTraData';";
$result = mysql_query($query);

echo $result;
    echo '    ' . $postID;

if($result >= 1){ 
```

我返回了**$result的****Resource id #2** ....

 **![在此处输入图像描述](../Images/0b21f8cd16f02805c624b060a69859ce.png)

没有行。运行查询**SELECT * FROM wp_postmeta WHERE post_id = 1792 AND meta_key = 'xTraData'**时，它全部为*空；*

 **![在此处输入图像描述](../Images/daade45f59c61ca67d74e1335a353f0f.png)

我确保**$postID**返回**1792**并且确实如此。

我在想它会返回一个**0**或**1** ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:43:27.207

您需要使用`mysql_fetch_assoc($result)`，可能像这样：

```
while ($row = mysql_fetch_assoc($result)) {
    echo $row['postID'];
} 
```

* * *

不要使用[`ext/mysql`](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated). 使用`PDO`或`mysqli`。****

# php - 填充一系列 div-

> ID：14906680
> 
> 赞同：1
> 
> 时间：2013-02-16T03:41:50.750
> 
> 标签：php, html, mysql

这段代码：

```
<div class="product">
<img src="images/product-1s.jpg" onclick="JavaScript:newPopup('images/product-1.jpg');">
<span class="tiger" data-name="show" data-price="show" data-text="Buy Now">
1</span>Lorem Ipsum Dolar</div> 
```

一切都完美地工作，类已经编码，主要使用 mysql_ 。

我想要做的就是将 id# 和 desc 粘贴到表中的每一行。我想它不能像我想的那样简单。我可以手动写出所有这些并让一切正常工作，但显然这并不理想。

有没有另一种方法可以让我在已经发生的事情之外执行这个？

这个功能：

```
class Product{
var $error = '';
var $msg = '';
public function all(){
$result = mysql_query("SELECT * FROM  " . PFX . "products WHERE active = 1");
$products = array();
while($rows = mysql_fetch_assoc($result)){
    $products[]=$rows;
    }
return $products;
} 
```

已经完成，我可以调用它来填充我需要的数据库中的变量 [id] 和 [description] 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:40:32.090

我不确定我是否理解了所有要求，所以如果我弄错了，请纠正我。无论如何，这是一种解决方案。在您的 PHP 文件中，您可以编写：

```
<?php 
    $result = mysql_query("SELECT * FROM  " . PFX . "products WHERE active = 1");
    $products = array();
    $numberOfRows = 0;
    while($rows = mysql_fetch_assoc($result)){
        $products[]=$rows;
        $numberOfRows++;
    }

    for($i = 0; $i< $numberOfRows; $i++){  
?>

    <div class="product" id="<?php echo $products[0];?>" > <!-- assuming 0 is the position of id -->
    <img src="images/product-1s.jpg" onclick="JavaScript:newPopup('images/product-1.jpg');">
    <span class="tiger" data-name="show" data-price="show" data-text="Buy Now">1</span>  <?php echo $products[1]; ?></div> // assuming 1 is position of description

<?php 
    }   // closing bracket of the 'for' loop
?> 
```

# php - mysql/php/javascript/css 日历设置

> ID：14906687
> 
> 赞同：1
> 
> 时间：2013-02-16T03:43:14.833
> 
> 标签：php, mysql, css, calendar

我需要在数据驱动的网站（php/mysql）上实现日历。我需要的不仅仅是 js 或 css 日期选择器。日历需要能够与 mysql 数据库中的事件和人员集成。从我读过的内容来看，没有任何好的脚本或教程用于 mysql 驱动的日历。但是，我认为有人可能会有一些想法。

似乎确实有一个很好的 jquery 日历，称为 Full Calendar，但它似乎并没有提供太多对 mysql 调用或数据存储的支持。而且我也看到了推荐的谷歌日历，但我觉得这会使与我网站上的事件和人员的集成变得非常困难。

似乎有很多漂亮的日历必须是数据驱动的，如这个链接：

```
http://www.webdeveloperjuice.com/2010/03/25/19-css-html-calendars-for-your-next-web-application/ 
```

但是我一直找不到任何关于如何将这些漂亮的前端连接到后端的建议。

另一篇文章说建立自己的日历真的是一个时间沉没。但是，似乎没有任何好的替代方案。

将不胜感激有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:25:53.857

我做了一个类似于你要求的功能。它基本上使用表格生成日历，您可以传递一个由日期构成的可选数组（即 2013-06-22），因此它会期望一个类似于此的数组： `$array['2013-06-22']['data']`

然后，您可以自定义函数并根据需要显示数据。或者你可以简单地在函数中执行你的查询（函数中应该有一个注释来提示你可以在哪里运行你的查询）..我还记得那里有很多评论..我太懒了删除，所以你可能想清理一下。

老实说，这个功能是一个旧版本，我有一个改进的版本，但似乎无法在 atm 找到它。

希望你觉得它有用 ：）

```
/**
* Display Calendar (and Optional Data structured by date)
* @author: Zubair Baig
*/
function show_calendar_old($month = '', $year = '', $dataByDate = '')
{
    $listOfDaysInWeek = array('01'=>'Sunday', '02'=>'Monday',
                                  '03'=>'Tuesday', '04'=>'Wednesday',
                                  '05'=>'Thursday', '06'=>'Friday',
                                  '07'=>'Saturday');

    $month = !empty($month) ? $month : date('m', time());
    $year = !empty($year) ? $year : date('y', time());
    $dataByDate = is_array($dataByDate) ? $dataByDate : array();

    $calendar = '<table class="calendar">'.PHP_EOL;
    //$days_in_month = days_in_month($month, $year);

    $days_headings = $listOfDaysInWeek;

    //Table Head
    $calendar.= '<thead>'.PHP_EOL;
    $calendar.= '<tr class="calendar-row">'.PHP_EOL;
    $calendar.= '<th class="calendar-day-head">';
    $calendar.= implode('</th>'.PHP_EOL.'<th class="calendar-day-head">', $days_headings);
    $calendar.= '</th>'.PHP_EOL;
    $calendar.= '</tr>'.PHP_EOL;
    $calendar.= '</thead>'.PHP_EOL;

    //Table Foot
    $calendar.= '<tfoot>'.PHP_EOL;
    $calendar.= '<tr class="calendar-row">'.PHP_EOL;
    $calendar.= '<td class="calendar-day-head">';
    $calendar.= implode('</td>'.PHP_EOL.'<td class="calendar-day-head">', $days_headings);
    $calendar.= '</td>'.PHP_EOL;
    $calendar.= '</tr>'.PHP_EOL;
    $calendar.= '</tfoot>'.PHP_EOL;

    $days_counter = 0;
    //$running_day = date('w', strtotime('now'));
    $running_day = date('w', mktime(0,0,0,$month,1,$year));
    $days_in_month = date('t', mktime(0,0,0,$month,1,$year));
    $days_in_week = 7;
    $days_in_this_week = 1;
    //var_dump( $days_in_month, $running_day );

    $dates_array = array();

    //Table Body
    $calendar.= '<tbody>'.PHP_EOL;
    /* row for week one */
    $calendar.= '<tr>'.PHP_EOL;

    /* print "blank" days until the first of the current week */
    for($x = 0; $x < $running_day; $x++)
    {
        $calendar.= '<td>&nbsp;</td>'.PHP_EOL;
        $days_in_this_week++;
    }

    /* keep going with days.... */
    for($list_day = 1; $list_day <= $days_in_month; $list_day++)
    {
        $classes = '';//reset
        if (isset($dataByDate) && is_array($dataByDate))
        {
            $runningCalDateTimeStamp = mktime(0,0,0,$month,$list_day,$year);
            $runningCalDate = date('Y-m-d', $runningCalDateTimeStamp);

            if (in_array($runningCalDate, $dataByDate))
            {
                if (date('Y-m-d', time()) > $runningCalDate)
                {
                    $classes = ' day-can-be-reserved-but-old';
                } else {
                    $classes = ' day-can-be-reserved';
                }
            } else {
                $classes = ' day-cannot-be-reserved';
            }

            if (date('Y-m-d', time()) == $runningCalDate)
            {
                $classes .= ' day-is-today';
            }
        }

        $calendar.= '<td class="calendar-day' .$classes. '">'.PHP_EOL;
            /* add in the day number */
            $calendar.= '<div class="day-number">'.$list_day.'</div>'.PHP_EOL;

            /** QUERY THE DATABASE FOR AN ENTRY FOR THIS DAY !!  IF MATCHES FOUND, PRINT THEM !! **/
            $calendar.= str_repeat('<input type="checkbox" name="selectedDates" value="' .day_with_zero($list_day). '" />'.PHP_EOL,1);

            //var_dump(in_array( date('Y-m-d', mktime(0,0,0,$month,$list_day,$year)), $plDates));
            //var_dump(date('Y-m-d',mktime(0,0,0,$month,$list_day,$year)));

            if (isset($dataByDate) && is_array($dataByDate))
            {
                if (in_array(date('Y-m-d', mktime(0,0,0,$month,$list_day,$year)), $dataByDate))
                {
                    //$calendar.= $list_day;
                }
            }
        $calendar.= '</td>'.PHP_EOL;

            if($running_day == 6)
            {
                $calendar.= '</tr>'.PHP_EOL;
                if(($days_counter + 1) != $days_in_month)
                {
                    $calendar.= '<tr class="calendar-row">'.PHP_EOL;
                }
                $running_day = -1;
                $days_in_this_week = 0;
            }

            $days_in_this_week++;
            $running_day++;
            $days_counter++;
    }

    /* finish the rest of the days in the week */
    if($days_in_this_week < 8 && $running_day != 0)
    {
        for($x = 1; $x <= (8 - $days_in_this_week); $x++)
        {
            $calendar.= '<td class="calendar-day-np">&nbsp;</td>'.PHP_EOL;
        }
    }

    //final row
    $calendar.= '</tr>'.PHP_EOL;
    $calendar.= '</tbody>'.PHP_EOL;
    $calendar.= '</table>'.PHP_EOL;
    echo $calendar;
} 
```

# html - onclick Iframe 链接 - 此链接在新选项卡/窗口中打开

> ID：14906688
> 
> 赞同：2
> 
> 时间：2013-02-16T03:43:20.597
> 
> 标签：html, css, iframe

我有这个 iFrame -

`<iframe src="http://mp3yoyo.com/ads.php" scrolling="no" width="500" height="80" frameborder="0"></iframe>`

但是当我点击任何广告的链接时，它会在同一个窗口中打开。

我想在新窗口中打开 iFrame 的所有链接。

我已经尝试添加`target="_blank"`，`<base target="_blank" />`但我没有在新窗口中打开链接，所以请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:53:47.163

这可能会有所帮助： [http ://www.webhostingtalk.com/showthread.php?t=678138](http://www.webhostingtalk.com/showthread.php?t=678138)

通常，您应该告诉链接在新窗口中打开（在锚标记中）。您可以在 css 中控制锚标记的操作，但我认为 iFrame 不像 div 那样支持 css（因为据我所知 iFrame 并不是 CSS 3 的一部分）。

如果你使用 div 而不是 iFrame，根据 CSS 3.0，你可以给 div 一个 class 或一个 id，然后控制 css 中的锚标记，如下所示：

```
<div id="myDiv>
  <a href="whatever.html">stuff</a>
</div> 
```

然后在你的 CSS 文件中：

```
#myDiv a{
 target-name:new;
 target-new:tab;
} 
```

但是，我认为这实际上还没有得到支持。所以这在很大程度上是理论上的。

# c++ - 对 class::function 错误的未定义引用

> ID：14906695
> 
> 赞同：0
> 
> 时间：2013-02-16T03:44:19.987
> 
> 标签：c++, reference, undefined

我是 C++ 和面向对象编程的新手，所以请耐心等待这个问题。我正在编写一个日期程序，该程序确定您输入的日期是否是闰年，计算两个日期之间的长度等等。这是我的代码。它有一个头文件 Date.h，以及两个源文件 Date.cpp 和 main.cpp：

日期.h

```
#include <iostream>
using namespace std;
class Date {
private:
static const int month_nb;
static const unsigned char month_days[];
static const unsigned char month_daysLeap[];
protected:
static bool testLeap(const int year_);
bool isLeap;
int year;
int month;
int day;
public:

Date(const int month_,const int day_,const int year_);

~Date(){};

int get_month() const {return month;}
int get_day() const {return day;}
int get_year() const {return year;}

void set_month(int m){month = m;}
void set_day(int d){day = d;}
void set_year(int y){year = y;}

bool testLeap() const;
void out() const;
bool testValid() const;
int operator-(const Date & date) const;
static int Julian(const Date & date1,const Date & date2);
static double CountACT_365(const Date & date1,const Date & date2);
static int Count30_360L(const Date & date1,const Date & date2);
static double Count30_360(const Date & date1,const Date & date2);
double CountACT_365(const Date & date) const;
int Count30_360L(const Date & date) const;
double Count30_360(const Date & date) const;
};
inline bool operator==(const Date& d1,const Date& d2)
{
return d1.get_month()==d2.get_month()
&& d1.get_day()==d2.get_day() && d1.get_year()==d2.get_year();
}
ostream& operator<<(ostream& os,const Date& d); 
```

日期.cpp

```
#include <iostream>
#include "Date.h"
using namespace std;
const int Date::month_nb = 12;
const unsigned char Date::month_days[] = {31,28,31,30,31,30,31,31,30,31,30,31};
const unsigned char Date::month_daysLeap[] = {31,29,31,30,31,30,31,31,30,31,30,31};
Date::Date(const int month_, const int day_, const int year_)
{
year = year_; month = month_; day = day_;
isLeap = testLeap();
}
bool Date::testLeap(const int year_)
{
//if the year is not a multiple of 4, this is not a leap year
if(year_ % 4 != 0) return false;
//if the year is a multiple of 100, this is not a leap year,
//except if it is a multiple of 400.
if(year_ % 100 == 0) {
return year_ % 400 == 0;
}
return true;
}
bool Date::testLeap() const {
return testLeap(year);
}
void Date::out() const
{
cout << (int)month <<"/"<< (int)day <<"/"<< year << endl;
}
bool Date::testValid() const {
return (1 <= month && month <= month_nb && 1 <= day
&& ((isLeap && day <= month_daysLeap[month-1])
|| (!isLeap && day <= month_days[month-1])));
}
ostream& operator<<(ostream& os,const Date& d) {
return os<<d.get_month()<<'/'<<d.get_day()<<'/'<<d.get_year();
} 
```

主文件

```
 #include <iostream>
#include "Date.h"
using namespace std;
int Count30_360L(Date date1, Date date2) {
return 360 * (int) (date2.get_year() - date1.get_year())
+ 30 * (int) (date2.get_month() - date1.get_month())
+ (date2.get_day() - date1.get_day());
}
double Count30_360(Date date1, Date date2) {
return (double) Count30_360L(date1, date2) / 360.0;
}
int main() {

    Date SBday = Date(8,24,1971);
    Date CBday = Date(9,28,1996);
    cout <<"Time elapsed " << CBday - SBday<<endl;
    cout << "Q: was 8/24/1971 in a leap year? A: "<<SBday.testLeap()<<endl;
    cout <<"Count30_360L(SBday,CBday) = "<< Count30_360L(SBday,CBday)<<endl;
    cout <<"Count30_360(SBday,CBday) = "<< Count30_360(SBday,CBday)<<endl;
    cout <<"CountACT_365(SBday,CBday) = "<< Count30_360L(SBday,CBday)<<endl;
    cout <<"CBday.Count30_360L(SBday) = "<< CBday.Count30_360L(SBday)<<endl;
    cout <<"CBday.Count30_360(SBday) = "<< CBday.Count30_360(SBday)<<endl;
    return 0;
    } 
```

我收到以下错误消息：

g++ -static-libgcc -static-libstdc++ -o HW1_2.exe main.o Date.o

main.o：在函数“main”中：

...Debug/../main.cpp:24：未定义对“Date::operator-(Date const&) const”的引用

...Debug/../main.cpp:29：未定义对“Date::Count30_360L(Date const&) const”的引用

...Debug/../main.cpp:30: 未定义引用`Date::Count30_360(Date const&) const'

谁能帮帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:07:44.077

> *   ...Debug/../main.cpp:24：未定义对“Date::operator-(Date const&) const”的引用

您`int operator-(const Date & date) const;`在 Date.h 中声明但从未定义它。

> *   ...Debug/../main.cpp:29：未定义对“Date::Count30_360L(Date const&) const”的引用

您声明`int Count30_360L(const Date & date) const;`但没有定义它（您确实定义了一个自由函数`int Count30_360L(Date date1, Date date2)`）。

> *   ...Debug/../main.cpp:30: 未定义引用`Date::Count30_360(Date const&) const'

同样，您`double Count30_360(const Date & date) const;`在 Data.h 中声明但从未定义它（但确实定义了一个自由函数`double Count30_360(Date date1, Date date2)`）。

这些函数都在中引用`main()`：

*   `Bday - SBday`
*   `CBday.Count30_360L(SBday)`
*   `CBday.Count30_360(SBday)`

您需要定义这些`Date::`成员函数（在 Date.cpp 中）。

还：

```
using namespace std; 
```

这在头文件中不是一个好主意。请参阅[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/q/1452721/78845)

如果你缩进你的代码，它也会极大地提高可读性。

# jms - 如何从 weblogic JMS 队列集群环境中清除/删除消息

> ID：14906702
> 
> 赞同：4
> 
> 时间：2013-02-16T03:44:50.973
> 
> 标签：jms, weblogic

我在执行以下链接中的程序时遇到问题。

[如何从 weblogic JMS 队列中清除/删除消息](https://stackoverflow.com/questions/2461870/how-to-purge-delete-message-from-weblogic-jms-queue)

我的是集群环境并`DomainRuntimeServiceMBean`在服务中使用。

得到以下异常。

```
 javax.management.InstanceNotFoundException: 
 com.bea:Name=DomainRuntimeService,
 Type=weblogic.management.mbeanservers.domainruntime.DomainRuntimeServiceMBean 
```

然而，单个节点运行良好，但在集群环境中没有它识别为我的 JMS 服务器。

我需要在集群下提供特定的服务器名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:05:33.027

`DomainRuntimeServiceMBean`仅在 WebLogic 域的管理实例上可用（请参阅http://docs.oracle.com/cd/E13222_01/wls/docs90/wlsmbeanref/mbeans/DomainRuntimeServiceMBean.html?skipReload=true [）](http://docs.oracle.com/cd/E13222_01/wls/docs90/wlsmbeanref/mbeans/DomainRuntimeServiceMBean.html?skipReload=true)。

您需要连接到域的管理实例，而不是集群实例之一以避免`javax.management.InstanceNotFoundException`错误。

因此，请检查您要连接到哪个实例。

# java - OS X 10.7 中不存在新文件

> ID：14906703
> 
> 赞同：1
> 
> 时间：2013-02-16T03:44:56.430
> 
> 标签：java, file-io

我正在尝试以下操作，但在 iMac OS X 10.7.5 上没有创建文件（也没有抛出错误）

尝试了不同的路径并查看了权限，可以很容易地做到 -> $ touch myFile1.txt 通过控制台...

如果我确实通过控制台创建文件并运行代码，则该文件被检测到并存在。

文件 f = new File("/Users/myname/Documents/myFile1.txt"); 不会创造一个...

为什么这不起作用？

```
 File f = new File("/Users/myname/Documents/myFile1.txt");
     if(f.exists()) {
         System.out.println(f.getName() + " file exists");
     } else {
         System.out.println(f.getName() + " doesn’t exist");
     } 
```

谢谢你的帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T06:32:31.647

当你在做

文件 f = 新文件（）；

仅创建 File 类型的对象。它不是创建一个实际的文件。

实际文件是在您使用时创建的

类 File 的 f.createNewFile() 函数。

# php - 将使用 PHP 上传的文件从 .DOC 转换为 .PDF

> ID：14906706
> 
> 赞同：2
> 
> 时间：2013-02-16T03:45:07.367
> 
> 标签：php

我有一个用 PHP（运行 PHP 5.3 的服务器）编写的表单，用户将文件上传到服务器并将一些内容存储在数据库中。上传的文件将是 Microsoft Word .DOC 文件。为了让用户在各种情况下上传文件后查看文件，我需要他们下载/查看的文件是 .PDF。在 Windows 服务器上，使用 PHP 或其他一些 Web 编程语言，我可以让文件在上传后自动转换为 .PDF 并保存该文件以及存储 .DOC 文件吗？

该网页托管在无法访问外部 Internet 的内部服务器上，因此使用第 3 方 API 是不可行的。最好是轻量级且不需要安装许多其他程序的东西会很棒。

**编辑：添加了添加到 php.ini 文件中的代码行。**
我将这行代码添加到 php.ini 文件中，该文件指向我保存 ZendFramework 库的正确目录。
`include_path = ".;C:\PHP\ZendFramework\library"`

我刚刚在下面添加
`; UNIX: "/path1:/path2"`
`;include_path = ".:/php/includes"`
`;`
`; Windows: "\path1;\path2"`
`;`
`; PHP's default setting for include_path is ".;/path/to/php/pear"`
`; http://php.net/include-path`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:53:52.183

您可能想要使用[Livedocx 库。](http://www.livedocx.com)有一个 Zend Framework 组件可以处理这个问题。[这是](http://www.phplivedocx.org)有关使用它的更多信息。

# java - 类的getter方法是线程安全的吗？

> ID：14906707
> 
> 赞同：1
> 
> 时间：2013-02-16T03:45:12.860
> 
> 标签：java, multithreading, synchronization, thread-safety

我有一个看起来像这样的 HashMap -

```
 HashMap<String, TableConnectionInfo> tableList 
```

这意味着它的值是一个`TableConnectionInfo`看起来像这样的类 -

```
public class TableConnectionInfo {

    public String url;
    public String user;
    public String password;
    public String driver;
    public String suffix;
    public String sql;

    public String getUrl() {
        return url;
    }

    public void setUrl(String url) {
        this.url = url;
    }

    public String getUser() {
        return user;
    }

    public void setUser(String user) {
        this.user = user;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getDriver() {
        return driver;
    }

    public void setDriver(String driver) {
        this.driver = driver;
    }

    public String getSuffix() {
        return suffix;
    }

    public void setSuffix(String suffix) {
        this.suffix = suffix;
    }

    public String getSql() {
        return sql;
    }

    public void setSql(String sql) {
        this.sql = sql;
    }

} 
```

在主线程中，我通过像这样从属性文件中读取上面的地图来填充上面的地图，之后这个地图将不会被修改。

```
 for (String arg : databaseNames) {

        TableConnectionInfo ci = new TableConnectionInfo();

        String url = prop.getProperty(arg + ".url");
        String user = prop.getProperty(arg + ".user");
        String password = prop.getProperty(arg + ".password");
        String driver = prop.getProperty(arg + ".driver");
        String suffix = prop.getProperty(arg + ".suffix");
        String sql = prop.getProperty(arg + ".sql");

        ci.setUrl(url);
        ci.setDriver(driver);
        ci.setPassword(password);
        ci.setSql(sql);
        ci.setSuffix(suffix);
        ci.setUser(user);
        tableList.put(arg, ci);
    } 
```

现在我将此`tableList`映射传递给这样的各种线程，并且它不会被任何线程修改（通过进行集合调用）。每个线程都将使用 get 方法来获取所需的方法。

```
for (int i = 0; i< 1000; i++) {
    service.submit(new Task(tableList));
} 
```

下面是我的包含可运行接口的任务类

```
class Task implements Runnable {

    private Connection[] dbConnection = null;
    private CallableStatement[] callableStatement = null;
    private ArrayList<Method> methods[] = null;

    private final HashMap<String, TableConnectionInfo> tableLists;

    public Task(HashMap<String, TableConnectionInfo> tableList) {
        this.tableLists = tableList;
    }

    @Override
    public void run() {

        try {

            int j = 0;
            dbConnection = new Connection[tableLists.size()];
            callableStatement = new CallableStatement[tableLists.size()];
            methods = new ArrayList[tableLists.size()];

            for (TableConnectionInfo ci : tableLists.values()) {

                dbConnection[j] = getDBConnection(ci.getUrl(), ci.getUser(), ci.getPassword(),  ci.getDriver());
                callableStatement[j] = dbConnection[j].prepareCall(ci.getSql());

                methods[j] = getRequiredMethods(ci.getSuffix());
                j++;
            }

          }
             }
       } 
```

**问题：-**

现在我的问题是 - 在我的运行方法中，我调用了`TableConnectionInfo`类的 get 方法，所以它是否是线程安全的？由于多个线程将尝试进行 get 调用。所以我不确定我是否需要在这里做任何额外的事情？还是代码看起来不错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T03:58:12.333

Java 中的参考值（以及原语）赋值是原子的。您不必担心参考值处于某种半分配状态，就像在较低级别的语言中那样。

话虽如此，是的，在您的类中调用 getter 是线程安全的，因为它们只是访问`String`不可变的对象，但是......如果其他线程通过 setter 更改了一个对象，您可能由于缓存而无法获得*当前值。*您想在as中声明所有`String`变量。这可以防止线程缓存旧值，从而防止 getter 将其返回给您。`TableConnectionInfo``volatile`

如果您`TableConnectionInfo`包含 getter 正在访问的更复杂的对象（例如`List`s 或`Map`s），而其他线程可能正在更改……那是另一回事。对可变的复杂数据结构的并发修改是不同的，需要同步。

其中...指向您的`tableList`. 如果**这**可能被另一个线程（添加/删除）修改，那么你就有问题了。

如果您所做的只是读取（没有机会另一个线程正在写入/修改），那么无论数据结构如何，都不需要同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:48:59.373

由于 tableList 不会被修改，它绝对是线程安全的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T04:15:35.023

如果你只是打电话给吸气剂，你应该没问题。但是你所做的事情是有风险的，不是一个好的做法。

如果您担心“TableConnectionInfo”对象被修改，那么最好让它不可变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T04:24:24.347

为了安全起见，您需要在初始化和每个 getter 调用之间建立起之前发生的关系。在启动新线程之前，您在主线程中所做的任何事情都会发生 - 在新线程做任何事情之前发生，因此您的代码看起来是安全的。请参阅[JLS](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#17.4.5)。具体来说，“如果 x 和 y 是同一线程的操作，并且 x 在程序顺序中位于 y 之前，则为 hb(x, y)。” 和“线程上的 start() 调用发生在已启动线程中的任何操作之前。”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-16T04:41:16.767

> 在我的运行方法中，我正在调用 TableConnectionInfo 类的 get 方法，所以它是否是线程安全的？

是的，它是线程安全的。

有两件事需要考虑。

1.  `start()`在每个线程上调用的主线程与线程方法的开始之间存在“发生在之前”的关系`run()`。这意味着主线程在启动子线程之前所做的状态更改（哈希表及其子/内容对象的创建和填充）将在`run()`开始执行时对子线程可见。

2.  假设在那之后没有任何改变这些对象的状态，则不需要进一步的同步。

* * *

但是，您必须根据具体情况执行此分析。仅仅说一切正常是不够的，因为对象在某一点之后不会改变。事实上，如果`start()`/ `run()`happy-before 关系不存在，这将不是线程安全的。

# iphone - 在 iphone 上存储单人 rpg 数据的最佳方式是什么

> ID：14906713
> 
> 赞同：0
> 
> 时间：2013-02-16T03:47:00.247
> 
> 标签：iphone, ios, database, sqlite, core-data

我想存储两种类型的数据。首先是默认的不可变数据集（如怪物统计数据、物品数据库）其次是角色统计数据，用于在用户退出应用程序时存储数据。

我已经很少使用coredata（在资源文件夹上存储sqlite默认设置）进行学习了。但我想知道存储数据的最佳方式是考虑内存、速度和加密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T05:46:32.240

对于大数据，我建议您使用 CoreData 或 Sqilte（您可能想查看一个名为 FMDB 的 sqlite 包装器。）

对于更安全的数据，例如统计分数，我建议您使用钥匙串（[示例](https://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007797)）。

对于没有安全的小数据，您可能会使用`NSUserDefaults`.

```
NSArray *stringsArray = [[NSArray alloc] arrayWithObjects: string1, string2, string3, nil];
[[NSUserDefaults standardUserDefaults] setObject:stringsArray forKey:@"MyStrings"];
[[NSUserDefaults standardUserDefaults] synchronize] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T05:57:54.190

我有点偏见，但我更喜欢 sqlite。我整理了一些我在一些项目中使用的代码示例。如果您想查看其他代码示例，请告诉我。

```
//
//  SQLiteFunctions.h
//

#import <sqlite3.h>
#import "Users.h"

@interface SQLiteFunctions : NSObject
{
@public

@private
    char *error;
    sqlite3 *dbPointer;
    sqlite3_stmt *sqlStatement;
}

@property (nonatomic, strong) Users *users;
@property (nonatomic, strong) NSMutableArray *returnData;

-(BOOL)openBundleDatabase:(int)bibleversion;
-(void)closeDatabase;
-(int)getUserRecords:(const char *)sqlquery;

@end 
```

**

```
//
//  SQLiteFunctions.m
//

#import "SQLiteFunctions.h"

@implementation SQLiteFunctions
@synthesize returnData;
@synthesize users;

-(BOOL)openBundleDatabase
{
    // initializing db file access
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"dbname.sqlite"];

    // testing to see if database was found
    BOOL success = [fileMgr fileExistsAtPath:dbPath];
    if(!success)
    {
        // can't find database
        NSLog(@"Cannot locate database file '%@'.", dbPath);
        return NO;
    }

    // testing for other error
    if(!(sqlite3_open([dbPath UTF8String], &dbPointer) == SQLITE_OK))
    {
        // logging other error
        NSLog(@"An error has occured: %s", sqlite3_errmsg(dbPointer));
        return NO;
    }

    // returning success
    return YES;
}

-(void)closeDatabase
{
    // finalizing and closing the database
    sqlite3_finalize(sqlStatement);
    sqlite3_close(dbPointer);
}

-(int)getUserRecords:(const char *)sqlquery
{
    // retreiving database values
    if ([self getRecords:sqlquery])
    {
        // setting the date format
        NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
        [dateFormat setDateFormat:@"MM/dd/yyyy"];

        // looping through existing return rows
        while (sqlite3_step(sqlStatement)==SQLITE_ROW)
        {
            // retreiving database values
            users = [[Users alloc] init];

            // retreiving database values
            users.user_name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 0)];
            users.user_id = sqlite3_column_int(sqlStatement,1);
            users.last_logged = [dateFormat dateFromString:[NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 2)]];
            users.consecutive_days = sqlite3_column_int(sqlStatement,3);
            users.audio = sqlite3_column_int(sqlStatement,4);
            users.profile_skip = sqlite3_column_int(sqlStatement,5);
            users.anim_speed = sqlite3_column_int(sqlStatement,6);
            users.display_font = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 7)];

            // adding object to the return data array
            [returnData addObject:users];
        }
    }

    // returning number of rows in the array
    return [returnData count];
} 
```

**

```
//
//  Users.h
//

#import <Foundation/Foundation.h>

@interface Users : NSObject

@property (nonatomic,copy) NSString *user_name;
@property (nonatomic,assign) NSInteger user_id;
@property (nonatomic,copy) NSDate *last_logged;
@property (nonatomic,assign) NSInteger consecutive_days;
@property (nonatomic,assign) BOOL audio;
@property (nonatomic,assign) BOOL profile_skip;
@property (nonatomic,assign) NSInteger anim_speed;
@property (nonatomic,copy) NSString *display_font;

@end 
```

**

```
//
//  Users.m
//

#import "Users.h"

@implementation Users
@synthesize user_name;
@synthesize user_id;
@synthesize last_logged;
@synthesize consecutive_days;
@synthesize audio;
@synthesize profile_skip;
@synthesize anim_speed;
@synthesize display_font;

@end 
```

# ios - 在ios模拟器上成功构建skia，但无法在我的iphone上运行

> ID：14906717
> 
> 赞同：1
> 
> 时间：2013-02-16T03:48:41.670
> 
> 标签：ios, skia

每个人。我已经完成了在 ios 模拟器上运行的skia。但无法在我的 iphone 上运行。它停在这里。

```
 #if defined(__x86_64__) || defined(_WIN64)
    /* All x86_64 machines have SSE2, so don't even bother checking. */
    static inline bool hasSSE2() {
        return true;
    }
    #else
    #ifdef _MSC_VER
    static inline void getcpuid(int info_type, int info[4]) {
__asm {
    mov    eax, [info_type]
    cpuid
    mov    edi, [info]
    mov    [edi], eax
    mov    [edi+4], ebx
    mov    [edi+8], ecx
    mov    [edi+12], edx
}
}
#else
static inline void getcpuid(int info_type, int info[4]) {
// We save and restore ebx, so this code can be compatible with -fPIC
asm volatile (
    "pushl %%ebx      \n\t"
    "cpuid            \n\t"
    "movl %%ebx, %1   \n\t"
    "popl %%ebx       \n\t"
    : "=a"(info[0]), "=r"(info[1]), "=c"(info[2]), "=d"(info[3])
    : "a"(info_type)
);
 }
#endif

static inline bool hasSSE2() {
int cpu_info[4] = { 0 };
getcpuid(1, cpu_info);
return (cpu_info[3] & (1<<26)) != 0;
return true;
}
#endif 
```

在 getcpuid 方法中，它说“invaild output constraint 'a' in asm”。它出什么问题了？？任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:06:43.797

它破坏的代码是试图为 arm 芯片构建 x86 程序集。不出所料，这不会在设备上工作。它可以在模拟器上运行，因为模拟器在 x86 芯片上运行。a 约束是一个 x86 约束，指示在 eax:edx (IIRC) 中返回 64 位值。

您需要使用适当的标志对其进行编译，以使其通过 arm 代码路径。

你读过这个吗？

[https://sites.google.com/site/skiadocs/user-documentation/quick-start-guides/how-to-check-out-and-build-skia-on-ios](https://sites.google.com/site/skiadocs/user-documentation/quick-start-guides/how-to-check-out-and-build-skia-on-ios)

# drop-down-menu - 下拉菜单在向上滑动后在背景上留下线条

> ID：14906720
> 
> 赞同：1
> 
> 时间：2013-02-16T03:49:16.053
> 
> 标签：drop-down-menu

我做了一个下拉菜单，它工作得很好，但是当项目向上滑动时，它会留下一些水平线，就像一个痕迹......有没有办法摆脱它？谢谢！这是我的代码：

HTML：

```
 <!-- Biscoitos -->
            <li><aside id="biscoitos" onClick="Slider(this.id)">Biscoitos</aside>
                <ul>
                    <li><aside id="bisc-festas" onClick="Slider(this.id)">&#160&#160&#160Festas</aside></li>
                    <li><aside id="bisc-mater" onClick="Slider(this.id)">&#160&#160&#160Maternidade</aside></li>
                </ul>
            </li>
        <!-- Chocolates -->
            <li><aside id="chocolates" onClick="Slider(this.id)">Chocolates</aside>
                <ul>
                    <li><aside id="choc-pascoa" onClick="Slider(this.id)">&#160&#160&#160Páscoa</aside></li>
                    <li><aside id="choc-namo" onClick="Slider(this.id)">&#160&#160&#160Dia dos Namorados</aside></li>
                    <li><aside id="choc-natal" onClick="Slider(this.id)">&#160&#160&#160Natal</aside></li>
                </ul>
            </li>
        <!-- Bolos -->
            <li><aside id="bolos" onClick="Slider(this.id)">Bolos</aside>
                <ul>
                    <li><aside id="bolo-aniver" onClick="Slider(this.id)">&#160&#160&#160Aniversário</aside></li>
                </ul>
            </li>
        <!-- Trufas -->
            <li><aside id="trufas" onClick="Slider(this.id)">Trufas</aside>
                <ul>
                    <li><aside id="trufa-aniver" onClick="Slider(this.id)">&#160&#160&#160Aniversário</aside>
                    </li>
                </ul>
            </li>
    </ul> 
```

CSS

```
#drop
{
    list-style:none;
    margin:5px 200px;
    padding:0px;
    cursor: pointer;
}
#drop li:hover
{
    background:url("/img/menu7.png");
    background-position:center;
    background-size:180px 30px;  
}

#drop li
{
    float:left;
    display:block;
    position:relative;
    width:180px;
    /*background-color:#888a85;*/
    background:url("/img/menu8.png");
    background-position:center;
    background-size:180px 30px;
    margin:0px 1px;
    font-size:14px;
    font-style:oblique;
    font-weight:bold;
    color:white;
    padding:6px;

}
#drop li ul 
{
    display:none;
    list-style:none;
    width:180px;
    text-align:left;
    font-size:14px;
    font-style:oblique;
    font-weight:bold;
    color:white;
    margin:1px 0px 1px -6px;
    position:absolute;
    z-index:1; 
    padding:6px;
}
#drop ul li
{
    float:left;
    width:180px;
    padding:6px;
    margin:1px 0px 1px -6px;
} 
```

JS

```
// Drop Down Menu
    $(document).ready( function()
    {
        $("#drop li").hover( 
        function()
        {
            $("ul", this).stop(true, true).slideDown(800);
        },
        function()
        {
            $("ul", this).stop(true, true).slideUp(800);
        });

    }); 
```

对不起，缺乏信息..非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:32:01.903

这显然是 Chrome 中的一个错误，我一直在努力尝试为我正在做的网站解决它。

似乎后退 div 上的最后一个（底部）1 像素宽的条带有时不会重新绘制（并不总是相同的位置或错过的重新绘制次数） - 所以我的解决方法是给滑动 div 1px 实心边框与背景颜色相同 - 所以当它离开线条时，它几乎不会被注意到。

希望有所帮助 - 它不是一个解决方案，但我很确定从我所做的研究中可以确定 slideUp/slideDown 代码很好，它是一个浏览器错误......所以这可能与修复它一样接近你会直到 Chrome 修复。

# android - Android BLUETOOTH 连接被拒绝

> ID：14906721
> 
> 赞同：2
> 
> 时间：2013-02-16T03:49:19.627
> 
> 标签：android, core-bluetooth

我正在与 Android 2.3.6 和蓝牙的疯狂作斗争。从 Android 蓝牙设置中，我链接了另一台设备。到目前为止，一切都很好。问题是当我尝试通过 Android 代码连接设备时，出现错误：**连接被拒绝**

> 示例代码摘要：

```
BluetoothAdapter mBluetoothAdapter= BluetoothAdapter.getDefaultAdapter();
BluetoothDevice device =  mBluetoothAdapter.getRemoteDevice("the mac address here");
BluetoothSocket socket;
Method m;
m = device.getClass().getMethod("createRfcommSocket",new Class[] { int.class });
socket = (BluetoothSocket) m.invoke(device, 1);
mBluetoothAdapter.cancelDiscovery();
socket.connect(); 
```

> 日志错误：

```
02-16 01:31:30.617: D/BluetoothSocket(29864): create BluetoothSocket: type = 1, fd = -1, uuid = [null], port = 1
02-16 01:31:30.617: D/BTL_IFC_WRP(29864): wrp_wsock_create: BTS
02-16 01:31:30.625: D/BTL_IFC_WRP(29864): wrp_alloc_new_sock: wrp_alloc_new_sock sub 16
02-16 01:31:30.625: D/BTL_IFC_WRP(29864): wrp_wsock_create: 50
02-16 01:31:30.625: D/BLZ20_WRAPPER(29864): btsk_alloc_add: success
02-16 01:31:30.625: D/BLZ20_WRAPPER(29864): btsk_dump_list:  fd (-1:47), bta -1, rc 1, wflags 0x100, cflags 0x4, port 0
02-16 01:31:30.625: D/BLZ20_WRAPPER(29864): btsk_dump_list:  fd (-1:50), bta -1, rc 0, wflags 0x0, cflags 0x0, port 0
02-16 01:31:30.625: D/BLZ20_WRAPPER(29864): blz20_wrp_setsockopt:  fd (-1:50), bta -1, rc 0, wflags 0x0, cflags 0x0, port 0
02-16 01:31:30.625: D/BLZ20_WRAPPER(29864): blz20_wrp_setsockopt:  fd (-1:50), bta -1, rc 0, wflags 0x0, cflags 0x0, port 0
02-16 01:31:30.625: D/BLZ20_ASOCKWRP(29864): asocket_init
02-16 01:31:30.625: D/BLZ20_WRAPPER(29864): blz20_wrp_fcntl:  fd (-1:50), bta -1, rc 0, wflags 0x0, cflags 0x0, port 0
02-16 01:31:30.625: D/BLZ20_WRAPPER(29864): blz20_wrp_fcntl:  fd (-1:50), bta -1, rc 0, wflags 0x0, cflags 0x0, port 0
02-16 01:31:30.625: D/BLZ20_WRAPPER(29864): blz20_wrp_fcntl: transparant fcntl
02-16 01:31:30.625: D/BLZ20_ASOCKWRP(29864): asocket_connect
02-16 01:31:30.625: D/BLZ20_WRAPPER(29864): blz20_wrp_connect:  fd (-1:50), bta -1, rc 0, wflags 0x0, cflags 0x0, port 0
02-16 01:31:30.632: D/BLZ20_WRAPPER(29864): blz20_wrp_connect: success
02-16 01:31:30.632: D/BLZ20_WRAPPER(29864): blz20_wrp_poll: pending connect fd (-1:50), bta -1, rc 1, wflags 0x0, cflags 0x1, port 0
02-16 01:31:30.632: D/BLZ20_WRAPPER(29864): btlif_wait_response: id(s) |BTLIF_BTS_RFC_CON_RSP|BTLIF_BTS_RFC_DISC_IND|
02-16 01:31:31.218: D/BLZ20_WRAPPER(29864): btlif_signal_event:  fd (-1:50), bta -1, rc 1, wflags 0x900, cflags 0x4, port 0
02-16 01:31:31.218: D/BLZ20_WRAPPER(29864): btlif_signal_event: event BTLIF_BTS_RFC_DISC_IND matched
02-16 01:31:31.218: D/BLZ20_WRAPPER(29864): btlif_wait_response: unblocked fd (-1:50), bta -1, rc 1, wflags 0x100, cflags 0x4, port 0
02-16 01:31:31.218: D/BLZ20_WRAPPER(29864): blz20_wrp_poll: set errno 111 (Connection refused) l.2089 
**02-16 01:31:31.218: W/System.err(29864): java.io.IOException: Connection refused** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:31:52.847

这就是我在[BluetoothViewer](https://github.com/janosgyerik/bluetoothviewer)中的做法，这是一个开源蓝牙调试器应用程序：

```
BluetoothSocket tmp = null;
try {
    tmp = mDevice.createRfcommSocketToServiceRecord(MY_UUID);
    Method m = mDevice.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
    tmp = (BluetoothSocket) m.invoke(mDevice, 1);
} catch (IOException e) {
    Log.e(TAG, "create() failed", e);
}
mmSocket = tmp; 
```

与您的程序的不同之处在于对`createRfcommSocketToServiceRecord`. 我扔掉结果（向下覆盖 2 行）可能看起来很奇怪，而且我这样做已经有一段时间了，我不记得细节了。

如果您查看 的文档`BluetoothDevice`，它会在课程概述中说：

> 然后，您可以使用 createRfcommSocketToServiceRecord(UUID) 打开 BluetoothSocket 以与远程设备进行通信。

它没有解释太多，但是 UUID 是您为应用程序生成的东西（例如使用`uuidgen`命令行工具），我的直觉是它`BluetoothSocket`返回的`createRfcommSocketToServiceRecord`内容以某种方式在连接过程中使用，即使在这个例子中我扔了远离结果。

无论如何，文档清楚地表明您需要调用此方法，并且由于我在您的代码中没有看到它，因此这可能是您缺少的部分。

顺便说一句，你可以在这里找到开源应用程序的源代码：[https ://github.com/janosgyerik/bluetoothviewer](https://github.com/janosgyerik/bluetoothviewer)

在您开始更改代码之前，您可以使用此应用程序进行完整性检查，看看它是否可以连接到您的蓝牙设备。如果是，那么您有一个工作示例和源代码。Google Play 上的应用：https: [//play.google.com/store/apps/details?id=net.bluetoothviewer](https://play.google.com/store/apps/details?id=net.bluetoothviewer)

# html - CSS中的“div>p”和“div p”有什么区别

> ID：14906723
> 
> 赞同：0
> 
> 时间：2013-02-16T03:49:41.853
> 
> 标签：html, css

`div>p`选择`<p>`父元素为`<div>`元素的所有元素，并`div p`选择`<p>`元素内的所有`<div>`元素。这是 W3schools 所说的，但我不知道有什么区别。如果一个元素在另一个元素内部，则另一个是子元素，另一个是父元素。我没有看到差异。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T03:52:03.877

例子：

```
<div>
    <span>
        <p>...</p>
    <span>
</div> 
```

`div > p`不会选择该段落，但`div p`会。换句话说，第一个选择器是父子，而第二个是祖先-后代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:54:24.023

div >p 选择 div 的直接子级，即 p 而 div p 选择 div 内的每个 p，无论 p 是否是 div 中其他 dom 的子级。你也可以说 div>p 是 css 3 选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T03:55:30.123

`div > p`表示“选择所有 <div> 子元素的 <p> 元素”，例如只选择第一个

将在这里选择：

```
<div>
  <p>...</p>
  <div>
    <p>...</p>
  </div>
</div> 
```

`div p`表示“选择所有 <div> 的后代的 <p> 元素”，例如两个 <p> 元素都将被选中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T03:54:55.943

不同之处在于您是否希望它成为`>`父母的“直系子女”（`）。`

 `* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T03:57:55.840

与`div>p`您一起指代所有`<p>`直接属于 a 的子级的内容`<div>`。

```
<div>
    <p>Selected!</p>
    <a><p>Not Selected</p></a>
</div> 
```

与`div p`你一起指代一切`<p>`，`<div>`无论深度

```
<div>
    <p>Selected!</p>
    <a><p>Selected!</p></a>
</div> 
````

# ruby - 使用模块和类编写 HelloWorld

> ID：14906724
> 
> 赞同：0
> 
> 时间：2013-02-16T03:50:04.403
> 
> 标签：ruby, rubymine

我正在使用 RubyMine IDE，所以这可能是因为我不知道如何使用它！但这是我所拥有的：一个名为 MyFirstModule 的模块，它有一个名为 say_hello 的方法

```
module MyFirstModule
  def say_hello
    puts 'Hello'
  end
end 
```

还有一个这样写的类：

```
require 'MyFirstModule'
class ModuleTester

  include MyFirstModule

end

mt = ModuleTester.new
mt.say_hello 
```

然后我通过IDE运行程序，这是我得到的错误：

> /Users/Jony/.rvm/rubies/ruby-1.9.3-p374/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /Users/Jony/ RubymineProjects/Rubyist/play_one.rb /Users/Jony/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- MyFirstModule (LoadError) from /Users/Jony/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in` 来自 /Users/ Jony/RubymineProjects/Rubyist/play_one.rb:1:in `<top (required)>' from -e:1:in`load' from -e:1:in `'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:18:06.510

require 语句使用不带 rb 的文件名，而不是类/模块标识符。我的猜测是您需要将您的要求行更改为：

需要'my_first_module'

您还需要检查您的加载路径。

# ruby - 如何使用`send`函数传递参数

> ID：14906725
> 
> 赞同：0
> 
> 时间：2013-02-16T03:50:12.757
> 
> 标签：ruby

我在 Rails 3.2 应用程序中使用 cancan，并且在abilities.rb 类中为每个角色的能力提供了一个方法

```
#ability.rb

def initialize(user)
  user_or_admin ||= User.new

  user.roles.each do |role| 
    send(role.name)
  end
end

def role_name_a

end

def role_name_b

end 
```

其中一些方法需要访问用户记录，我如何使用发送函数传递它？

例如，我想做类似的事情

`send(role.name)(user)`

接着

`def role_name_a(user)`

但这不起作用。感谢任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:56:11.023

参数是 的第二个参数`send`。第一个参数是作为符号的方法名称。

```
send :"#{role.name}", user 
```

您应该尝试查看 Ruby 的文档以了解此类问题。该语言有据可查。

[http://ruby-doc.org/core-1.9.3/Object.html#method-i-send](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:58:32.993

我不确定这是否是最佳做法，但它是 cancan 文档中的内容。

```
def initialize(user)
  @user = user || User.new

  user.roles.each do |role| 
    send(role.name)
  end
end

def role_name_a
  can :manage, User, id: @user.id
end

def role_name_b

end 
```

# android - 如何设置 VerticalSeekBar 的进度可绘制？

> ID：14906727
> 
> 赞同：0
> 
> 时间：2013-02-16T03:50:35.257
> 
> 标签：android, seekbar

我使用了[如何在 Android 中获得工作的垂直 SeekBar 中描述的 VerticalSeekBar？](https://stackoverflow.com/questions/4892179/how-can-i-get-a-working-vertical-seekbar-in-android). 这是一份相当不错的工作，对我来说效果很好。但是当我在布局 xml 中设置 progressDrawable 时，它​​不起作用。有什么建议么？

这是我的布局 xml 中的片段：

```
<com.aidufei.widget.VerticalSeekBar
android:id="@+id/volume_bar"
android:layout_width="16dip"
android:layout_height="160dip"
android:background="@drawable/volume_bar_bg"
android:paddingBottom="20dip"
android:progressDrawable="@drawable/vol_seekbar_style"
android:thumb="@drawable/volume_thumb"
android:thumbOffset="-13dip" /> 
```

和 vol_seekbar_style.xml:`

```
<item android:id="@android:id/background">
    <shape>
        <corners android:radius="5dip" />

        <gradient
            android:angle="360"
            android:centerColor="#868781"
            android:centerY="1"
            android:endColor="#868781"
            android:startColor="#868781" />
    </shape>
</item>
<item android:id="@android:id/progress">
    <clip>
        <shape>
            <gradient
                android:angle="90"
                android:endColor="#3B3934"
                android:startColor="#3B3934" />

            <corners android:radius="5dip" />
        </shape>
    </clip>
</item> 
```

[`](https://gist.github.com/maxhis/4739037) VerticalSeekBar.java：https://gist.github.com/maxhis/4739037

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T14:53:10.690

在这里，您有一个工作示例：

```
<myapp.VerticalSeekBar
       android:id="@+id/mySeekBar"
       android:layout_width="wrap_content"
       android:layout_height="200dp"
       android:layout_gravity="center_horizontal"
       android:layout_marginBottom="10dp"
       android:max="50"
       android:maxHeight="11dip"
       android:minHeight="11dip"
       android:paddingLeft="10dp"
       android:paddingRight="10dp"
       android:progress="25"
       android:progressDrawable="@drawable/seekbar_progress"
       android:thumb="@drawable/bg_seekbar_ball" /> 
```

**@drawable/seekbar_progress：**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@android:id/background"
        android:drawable="@drawable/bg_seekbar_bellow"/>
    <item
        android:id="@android:id/progress"
        android:drawable="@drawable/bg_seekbar_above"/>

</layer-list> 
```

希望它在某种程度上有所帮助；）
保重。

# javascript - 安装下摆找不到分层依赖

> ID：14906731
> 
> 赞同：0
> 
> 时间：2013-02-16T03:52:02.013
> 
> 标签：javascript, spine.js

我正在尝试在 Ubuntu 12.03 LTS 上安装 hem，我得到以下信息：

好像 0.16 或更高版本不在注册表中？困惑..

```
sudo npm link
[sudo] password for tim: 
npm http GET https://registry.npmjs.org/http-proxy
npm http GET https://registry.npmjs.org/testacular
npm http GET https://registry.npmjs.org/jade
npm http GET https://registry.npmjs.org/eco/1.1.0-rc-3
npm http GET https://registry.npmjs.org/underscore
npm http GET https://registry.npmjs.org/less
npm http GET https://registry.npmjs.org/hem-less
npm http GET https://registry.npmjs.org/fast-detective
npm http GET https://registry.npmjs.org/optimist
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/watch
npm http GET https://registry.npmjs.org/stylus
npm http GET https://registry.npmjs.org/strata
npm http GET https://registry.npmjs.org/uglify-js
npm http 304 https://registry.npmjs.org/eco/1.1.0-rc-3
npm http GET https://registry.npmjs.org/eco/-/eco-1.1.0-rc-3.tgz
npm http 200 https://registry.npmjs.org/underscore
npm http GET https://registry.npmjs.org/underscore/-/underscore-1.4.4.tgz
npm http 200 https://registry.npmjs.org/less
npm http GET https://registry.npmjs.org/less/-/less-1.3.3.tgz
npm http 304 https://registry.npmjs.org/fast-detective
npm http GET https://registry.npmjs.org/fast-detective/-/fast-detective-0.0.2.tgz
npm http 200 https://registry.npmjs.org/hem-less
npm http GET https://registry.npmjs.org/hem-less/-/hem-less-0.0.4.tgz
npm http 304 https://registry.npmjs.org/optimist
npm http GET https://registry.npmjs.org/optimist/-/optimist-0.3.5.tgz
npm http 200 https://registry.npmjs.org/http-proxy
npm http GET https://registry.npmjs.org/http-proxy/-/http-proxy-0.8.7.tgz
npm http 304 https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/coffee-script/-/coffee-script-1.4.0.tgz
npm http 304 https://registry.npmjs.org/watch
npm http GET https://registry.npmjs.org/watch/-/watch-0.5.1.tgz
npm http 304 https://registry.npmjs.org/stylus
npm http GET https://registry.npmjs.org/stylus/-/stylus-0.32.0.tgz
npm http 304 https://registry.npmjs.org/strata

npm ERR! Error: No compatible version found: strata@'>=0.16.1'
npm ERR! Valid install targets:
npm ERR! ["0.8.0","0.8.1","0.8.2","0.9.0","0.9.1","0.10.0","0.10.1","0.11.0","0.12.0","0.12.1","0.12.2","0.12.3","0.12.4","0.12.5","0.13.0","0.14.0","0.15.0","0.15.1"]
npm ERR!     at installTargetsError (/usr/share/npm/lib/cache.js:488:10)
npm ERR!     at next_ (/usr/share/npm/lib/cache.js:438:17)
npm ERR!     at next (/usr/share/npm/lib/cache.js:415:44)
npm ERR!     at /usr/share/npm/lib/cache.js:408:5
npm ERR!     at saved (/usr/share/npm/lib/utils/npm-registry-client/get.js:147:7)
npm ERR!     at Object.oncomplete (/usr/lib/nodejs/graceful-fs.js:230:7)
npm ERR! You may report this log at:
npm ERR!     <http://bugs.debian.org/npm>
npm ERR! or use
npm ERR!     reportbug --attach /home/tim/work/hem/npm-debug.log npm
npm ERR! 
npm ERR! System Linux 3.2.0-38-generic
npm ERR! command "node" "/usr/bin/npm" "link"
npm ERR! cwd /home/tim/work/hem
npm ERR! node -v v0.6.12
npm ERR! npm -v 1.1.4
npm ERR! message No compatible version found: strata@'>=0.16.1'
npm ERR! message Valid install targets:
npm ERR! message ["0.8.0","0.8.1","0.8.2","0.9.0","0.9.1","0.10.0","0.10.1","0.11.0","0.12.0","0.12.1","0.12.2","0.12.3","0.12.4","0.12.5","0.13.0","0.14.0","0.15.0","0.15.1"]
npm http 304 https://registry.npmjs.org/uglify-js
npm http GET https://registry.npmjs.org/uglify-js/-/uglify-js-1.3.4.tgz
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/tim/work/hem/npm-debug.log
npm not ok 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T05:42:48.123

我认为这些问题主要来自与旧版本节点的分层不兼容。

不要从 Ubuntu 的包管理器中安装节点，它有一个相当旧的版本。请按照此处的说明进行操作：[我应该使用包管理器还是从源代码在 Ubuntu 上安装 node.js？](https://stackoverflow.com/questions/13845321/should-i-install-node-js-on-ubuntu-using-package-manager-or-from-source)

接下来，使用 npm install 脚本安装 npm，而不是包管理器：

```
curl https://npmjs.org/install.sh | sudo sh 
```

最后，我建议从 git repo 安装 hem，而不是使用 npm。hem 的原始开发者不再真正支持它，并且 hem 的许多新功能已在一个单独的分支中开发，该分支在 git repo 中是最新的。

```
git clone https://github.com/spine/hem.git
cd hem
git checkout version0_2 (or version0_3)
sudo npm install -g . 
```

为了进一步参考，我写了一篇关于在 Linux 环境中[设置脊椎、下摆和其他东西的帖子。](https://stackoverflow.com/questions/9425368/spine-js-hem-server-hem-build-faq-for-windows/12595619#12595619)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:04:49.703

为了获得最新的 Node.js 和 npm，有一个适用于 ubuntu 的 ppa [https://launchpad.net/~chris-lea/+archive/node.js/](https://launchpad.net/~chris-lea/+archive/node.js/)

现在 npm 上的 Hem 应该没问题，所以不需要使用 github 源，除非你想在 version0_3 分支中添加一些更激烈的东西，但是 version0_2 分支已经合并到 master 并且很快就会被修剪，所以你应该避免使用它。

# ruby-on-rails - 在 ruby on rails 3.2 中实现连接时出错

> ID：14906733
> 
> 赞同：3
> 
> 时间：2013-02-16T03:52:38.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, jointable

我在数据库中创建了两个表，即 products 和 shopping_list。我已经给产品一个外键参考 shopping_list 即 product.shopping_list_id。

我正在尝试在 ruby​​ on rails 中实现连接，但出现错误

我的 routes.rb 文件如下

```
Shop::Application.routes.draw do
  resources :shopping_lists do
    member do
     post 'add'
     get 'delete'
    end

    collection do
     get 'add'
     get 'joins'
     get 'list'     
     post 'get_shopping_lists'
    end
  end

  resources :shopping_lists

  # ---- Contact Routes ------

  resources :products do
    member do
     post 'add'
     get 'delete'
    end

    collection do
     get 'add'
     get 'list'  
     post 'get_products'   
    end
  end  

  resources :products 
```

我的 product.rb 是

```
class Product < ActiveRecord::Base

        attr_accessible :id, :shopping_list_id, :product_name, :product_category, :quantity, :status

        # ------- ASSOCIATIONS --------

        belongs_to :shopping_list

        # ------ VALIDATIONS ------

        validates_presence_of    :id, :product_name

        validates_uniqueness_of  :id

        # -------- SCOPES ----------

        # scope :not_deleted, where("products.deleted = 0")

        # default_scope not_deleted

    end 
```

我的 shopping_list.rb 是

```
class ShoppingList < ActiveRecord::Base
    attr_accessible :id, :shopping_list_name, :shopping_list_status, :total_items, :created_by, :last_updated_by

    # ------- ASSOCIATIONS --------

    has_many :products

    # ------ VALIDATIONS ------

    validates_presence_of    :id, :shopping_list_name

    validates_uniqueness_of  :id

    # -------- SCOPES ----------

    # scope :not_deleted, where("shoppinglistsqa.deleted = 0")

    # default_scope not_deleted
end 
```

我试图实现的查询是

```
select shopping_lists.shopping_list_name,shopping_lists.id,products.product_name,products.product_category
from products,shopping_lists
where shopping_lists.id=products.shopping_list_id; 
```

你能帮我么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T04:24:39.230

只需执行以下操作：

```
@products = Product.includes(:shopping_lists)
# if you want to get all products + their shopping list

@shopping_list = ShoppingList.includes(:product).find(params[:id])
# if you want to return just 1 shopping_list + it's product

@product = Product.includes(:shopping_lists).find(params[:id])
# if you want to return a specific product + all of it's shopping lists 
```

有关数据库查询[的更多信息，请查看此处](http://guides.rubyonrails.org/active_record_querying.html)。

# php - 在php中获取url的结尾

> ID：14906734
> 
> 赞同：0
> 
> 时间：2013-02-16T03:52:44.803
> 
> 标签：php, redirect, header

我有一个重定向脚本，我有一个快速的问题。

```
<?php

$user = ;

header ("location: http://socialmedia.com/follow_user=$user");
?> 
```

请注意，socialmedia.com 在服务器上是 ISNT。我想抓住 url 的结尾，所以如果我有一个 index.php 文件，我可以让 example.com/myusername 重定向到 socialmedia.com/follow_user=myusername。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:58:15.273

使用[parse_url](http://www.php.net/manual/en/function.parse-url.php)。

例如：

```
$url = 'http://example.com/myusername';
print_r(parse_url($url)); 
```

会给你：

```
Array
(
    [scheme] => http
    [host] => example.com
    [path] => /myusername
) 
```

因此，您可以采用阵列的该路径部分并根据需要使用它。

* * *

```
<?php
$url = 'http://example.com/myusername'; // the url you start with
$partYouNeed = parse_url($url, PHP_URL_PATH); // get the portion you need
$partYouNeed = ltrim($partYouNeed, '/'); // remove the slash from it

header('location: http://socialmedia.com/follow_user=' . $partYouNeed); 
```

# php - 用超链接在jquery中发送不同的值

> ID：14906748
> 
> 赞同：1
> 
> 时间：2013-02-16T03:55:23.923
> 
> 标签：php, javascript, jquery, html, mysql

我正在做一个营销项目。有一些类别，如银行、学校和许多其他类别，我的 sql 数据库中有相同的表。现在我想显示用户点击哪个类别的结果。我的 index.php

```
<?php
    $connection = mysql_connect('localhost', 'root', '');
    $db = mysql_select_db('market', $connection);
?>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js">
</script>
<script type="text/javascript">
$('document').ready(function () {
    $('a').click(function () {
        var temp = $('a').attr('myval');
        $.post('fetch.php', {
            id: temp
        }, function (data) {
            $('#display').html(data);
            var temp = null;
        });
    });
});
</script>
</head>
<body>
    <ul>
        <li>
            <a href="javascript:return(0)" myval="school">
                <h3>school</h3>
            </a>
        </li>;
        <li>
            <a href="javascript:return(0)" myval="bank">
                <h3>Bank</h3>
            </a>
        </li>;
        <!--many more......-->
    </ul>
    <div id="display"></div>
</body> 
```

它是我的 fetch.php

```
<?php
$connection = mysql_connect('localhost', 'root', '');
$db         = mysql_select_db('market', $connection);
$x          = $_POST['id'];
$safex      = mysql_real_escape_string($x);

$query = mysql_query("select * from $safex", $connection);

$result = "";

$result .= "<div id='display'>";
$result .= "<table border=\"1\">";
$result .= "<tr><th>Name</th><th>Password(encrypted)</th></tr>";
while ($row = mysql_fetch_array($query)) {
    $result .= "<tr><td> {$row['id']}</td>" . "<td> {$row['name']}</td></tr></p>";
}
$result .= "</table>";

$result .= "</div>";

echo $result;

?> 
```

现在我的问题是当我点击任何链接时..它总是显示领带学校数据..但我想在不同的点击上显示不同的表格数据..所有表格的所有字段名称都相同..请帮助....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:56:35.703

您需要使用`$(this)`来获取单击元素的属性。

```
var temp = $(this).attr('myval'); 
```

`$(this)`指示触发事件的位置。同样，当您使用锚节点时，也可以在事件处理函数中使用`e.preventDefault()`并传递参数。`e`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T03:59:03.890

在您的代码中，修改了以下内容

```
var temp = $('a').attr('myval'); 
```

到

```
var temp = $(this).attr('myval'); 
```

# android - 比较图像忽略光android

> ID：14906750
> 
> 赞同：3
> 
> 时间：2013-02-16T03:55:38.637
> 
> 标签：android, opencv, image-processing, edge-detection, jmagick

我对安卓很陌生。我想比较两个图像并忽略比较的灯光效果。

为此，我知道我可以生成边缘图像，然后比较图像。

在这种情况下我该怎么办？如何在 android 中做到这一点，如果有任何库可用，如何使用它？

我进行了很多搜索并开始了解 Jmagick 和 Imagemagick，但我不知道如何在我的应用程序中使用它们。

我必须为我的应用程序提供运动检测功能。平板电脑将连接到墙上，它基本上会收集用户的评论，广告将显示为幻灯片。前置摄像头将每 10 秒拍摄一次照片，并将之前拍摄的图像与当前图像进行比较，以查看是否有任何变化（即至少有人正在观看广告）。根据结果​​，如果 20 分钟内没有检测到运动，我想关闭我的平板电脑屏幕。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:50:53.040

如果您要继续使用 OpenCV，您的实施应取决于允许的运动量。使用光流的方法可以告诉您相机是否在移动。您可以将运动幅度的总和作为阈值。如果您希望相机能够在不触发运动检测的情况下移动一点，我会推荐一种基于特征的方法，例如 SURF。您可以使用与原始图像匹配的数量作为移动的阈值。无论哪种方式，请查看 matcher_simple.cpp 和 simpleflow_demo.cpp 以获取入门指南。

# c - 从C中的字节数组读取时处理字节顺序？

> ID：14906751
> 
> 赞同：3
> 
> 时间：2013-02-16T03:55:50.950
> 
> 标签：c, io, endianness

我有一个字节数组的数据，应该是跨平台一致的。假设我有一个指针 ，`unsigned char* data`它指向我的数组中的某个位置，我想将 4 个字节读入一个变量。我认为我可以这样做：

```
uint32_t my_int = *data; 
```

但是，我意识到该方法不考虑字节顺序。例如，如果我的数据是大端的，我是否必须这样做才能一致地读取它？

```
uint32_t my_int = (data[0] << 3) + (data[1] << 2) + (data[2] << 1) + data[3]; 
```

同样，在使用 写入此数据时是否必须进行相同的检查`fwrite`？例如，如果我使用以下代码将相同的数据写入文件：

```
fwrite(&my_int, sizeof(my_int), 1, fh); 
```

结果数据是否有任何已知的字节顺序？或者它会依赖于架构？*如果是这样，在所有*平台上执行这些读取和写入并强制执行特定字节顺序的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T05:02:11.577

每当读取或写入二进制数据时，您都需要担心字节顺序。如果您尝试读取/写入整个结构，您还需要担心可变大小和可能的结构打包。一些架构也无法处理奇变量边界上的整数，因此您不能直接使用 uint32_t myInteger = *(uint32_t*)bufferPtr++ 从二进制缓冲区中获取整数。

有各种各样的方法可以使这项工作。在过去，当速度和 RAM 使用是非常重要的问题时，我们会直接从文件中读取大量数据到缓冲区中，然后在需要时使用指向结构的指针来原地修复字节顺序。

您今天仍然可以这样做，尽管编译器之间的结构包装差异使其很麻烦，因此为特定类型编写一些简单的 i/o 例程可能更有意义，例如

```
int write_integer_at_position( FILE *, size_t position, uint32_t );
int read_integer_from_position( FILE *, size_t position, uint32_t *outResult );
etc 
```

如果需要，这些例程将在读取数据之后或将数据写入磁盘之前使用 htonl 交换字节。完成 20 或 30 次后，您可能想要编写某种数据描述语言来映射 RAM 和文件中的结构。很多人都这样做了，但我认为没有一个人真正流行起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T05:15:06.063

如果使用整数，则有一系列函数/宏

看

例如[ntol](http://linux.die.net/man/3/ntohl)

至于打包 - 只需定义一个协议和应该放置的东西。然后 write 可以构造一个字符数组，其中各个位位于正确的位置。这应该对应于检索这些详细信息的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T06:09:07.120

这些是您在数据流出或进入您的应用程序时面临的典型问题。如果数据的生产者和消费者只是您的应用程序，那么问题就不大了。

但是，正如 EricS 所提到的，如果有其他应用程序将使用或生成这些数据，并且如果这些应用程序位于不同的平台/语言/框架上，那么序列化或反序列化的字节顺序肯定会很重要。

网络顺序是一种用于基于 IP 的协议的事实上的标准。有一些库函数可以从主机转换到网络和从网络到主机命令（参见 Ed Heal 提供的链接）。

除了字节顺序之外，您可能还需要查看位顺序，根据协议和平台，最高有效位或最低有效位可能首先在线路上推出。

可能还需要考虑结构的打包、类型（整数、字符串、字符）的表示、其大小等。

# c# - 表格未关闭

> ID：14906752
> 
> 赞同：0
> 
> 时间：2013-02-16T03:56:09.853
> 
> 标签：c#, .net, winforms

我的程序中有这些代码。但是 this.close 不起作用。而且因为前一个表格没有关闭，它与第二个表格重叠。我应该怎么做才能一次只打开一个表格？我已经设置了一个值，以使`lblScore`位于 form1 中的内容显示在 form2 上。但是，我希望关闭 form1，以便唯一打开的表单是 form2。我怎样才能做到这一点？

```
if (score >= 2) {
    timerDrop.Enabled = false;
    MessageBox.Show("Time's Up! You can now proceed to the next Level!");
    frmLevel2 lvl2 = new frmLevel2();
    lvl2.Show();
    lvl2.set = lblScore.Text;
    this.Close();
} else {
    timerDrop.Enabled = false;
    MessageBox.Show("Time's Up! GAME OVER!");
    frmMenu frmBackToMenu = new frmMenu();
    frmBackToMenu.Show();
    this.Close();
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:13:45.923

隐藏第一个表单怎么样，然后在关闭第二个表单时应用程序可以停止？像这样：

（使用form1上的按钮打开form2，然后隐藏form1，如果form2关闭，form1也关闭）；

```
 private void button1_Click(object sender, EventArgs e)
        {
            this.Hide();
            Form2 form2 = new Form2();
            form2.ShowDialog();
            this.Close();

        } 
```

# javascript - 带密码的源转换器

> ID：14906754
> 
> 赞同：0
> 
> 时间：2013-02-16T03:56:17.820
> 
> 标签：javascript, html

我一直在努力改进我的游戏网站，我想添加一个功能，当您按下按钮时，系统会要求您输入密码，然后会出现游戏的作弊版本。这是我到目前为止的代码。编辑：我也不关心密码是否安全，所以如果它在代码中很明显就可以了。

```
<button type="button" onclick="cheat()">CHEAT!</button>

<script type="text/javascript">
var password;
var pass1 = "PASSWORD";

function cheat()
{
password=prompt("Password:","");
}

if (password==pass1) {
  document.getElementById("gamecheat").innerHTML = '<embed src="http://www.arcadeprehacks.com/swf/94562377.swf" width="550" height="400">';
} else {
  alert("wrong password");
}
</script>

<div id="gamecheat">
  <embed src="http://mybig.com/arcade/resources/f-1293.swf" width="550" height="400">
</div> 
```

要在我的网站上查看工作版本，请访问[www.thefunon.com/game-cheat](http://www.thefunon.com/game-cheat)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:18:57.807

您只是`password`在功能内部设置。其他代码均未执行。您需要重新排列逻辑，并且此功能：

```
var password;
var pass1 = "PASSWORD";

function cheat()
{
    if(prompt('Password') == pass1) 
    {
        document.getElementById("gamecheat").innerHTML = '<embed src="http://www.arcadeprehacks.com/swf/94562377.swf" width="550" height="400">';
    } 
    else 
    {
        alert("wrong password");
    }
} 
```

你可以在这里看到一个工作的 jsFiddle[**演示**](http://jsfiddle.net/6ByxT/)。

# node.js - Flume Avro 可以下沉到 Node.js 服务器吗？

> ID：14906759
> 
> 赞同：0
> 
> 时间：2013-02-16T03:56:54.467
> 
> 标签：node.js, flume, avro

第一次在这里的 Stack Overflow 提问者......将尝试包含尽可能多的细节。

我正在尝试通过 Avro 接收器将 Apache Flume 日志数据传输到 Node.js 服务器，并在特定端口上进行侦听。我打算使用[Collective Media 的 node-avro 库](https://github.com/collectivemedia/node-avro)来帮助在 Avro 的二进制格式和 JSON 之间进行序列化，这样我就可以处理 Node.js 中的数据（我通过[socket.io](http://socket.io) pub/sub 将它传递给客户端）。

我很确定我已经正确配置了 Flume，因为我看到数据流过通道并输出到控制台（仅用于调试，我也将数据下沉到控制台）。但是，当我启用 Avro 接收器并启动侦听同一端口的 Node.js 服务器时，Flume 在尝试进行 Avro 传输时会引发异常：

```
2013-02-15 22:06:09,858 (SinkRunner-PollingRunner-DefaultSinkProcessor) [ERROR - org.apache.flume.SinkRunner$PollingRunner.run(SinkRunner.java:160)] Unable to deliver event. Exception follows.
org.apache.flume.EventDeliveryException: Failed to send events
    at org.apache.flume.sink.AvroSink.process(AvroSink.java:325)
    at org.apache.flume.sink.DefaultSinkProcessor.process(DefaultSinkProcessor.java:68)
    at org.apache.flume.SinkRunner$PollingRunner.run(SinkRunner.java:147)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.flume.EventDeliveryException: NettyAvroRpcClient { host: localhost, port: 4242 }: Failed to send batch
    at org.apache.flume.api.NettyAvroRpcClient.appendBatch(NettyAvroRpcClient.java:236)
    at org.apache.flume.sink.AvroSink.process(AvroSink.java:309)
    ... 3 more
Caused by: org.apache.flume.EventDeliveryException: NettyAvroRpcClient { host: localhost, port: 4242 }: Exception thrown from remote handler
    at org.apache.flume.api.NettyAvroRpcClient.waitForStatusOK(NettyAvroRpcClient.java:318)
    at org.apache.flume.api.NettyAvroRpcClient.appendBatch(NettyAvroRpcClient.java:295)
    at org.apache.flume.api.NettyAvroRpcClient.appendBatch(NettyAvroRpcClient.java:224)
    ... 4 more
Caused by: java.util.concurrent.ExecutionException: java.io.IOException: NettyTransceiver closed
    at org.apache.avro.ipc.CallFuture.get(CallFuture.java:128)
    at org.apache.flume.api.NettyAvroRpcClient.waitForStatusOK(NettyAvroRpcClient.java:310)
    ... 6 more
Caused by: java.io.IOException: NettyTransceiver closed
    at org.apache.avro.ipc.NettyTransceiver.disconnect(NettyTransceiver.java:338)
    at org.apache.avro.ipc.NettyTransceiver.access$200(NettyTransceiver.java:59)
    at org.apache.avro.ipc.NettyTransceiver$NettyClientAvroHandler.handleUpstream(NettyTransceiver.java:496)
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:792)
    at org.jboss.netty.handler.codec.frame.FrameDecoder.cleanup(FrameDecoder.java:348)
    at org.jboss.netty.handler.codec.frame.FrameDecoder.channelClosed(FrameDecoder.java:236)
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:93)
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
    at org.jboss.netty.channel.Channels.fireChannelClosed(Channels.java:476)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.close(AbstractNioWorker.java:623)
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:101)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:364)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:238)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:38)
    at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    ... 1 more
2013-02-15 22:06:14,895 (SinkRunner-PollingRunner-DefaultSinkProcessor) [INFO - org.apache.flume.sink.AvroSink.createConnection(AvroSink.java:178)] Avro sink k1: Building RpcClient with hostname: 127.0.0.1, port: 4242 
```

我不确定的是如何确定我的 Node.js 服务是否至少收到了消息。我对 Node.js 很陌生，所以这无济于事，但这是设置侦听器的代码片段：

```
var flumeSink = require('http').createServer(flumeHandler);
flumeSink.listen(8000);
function flumeHandler (req, res) {
    console.log("Got it!");
    //var schema = avro.prepareSchema("string");
    //var buffer = schema.encode("foo");
    //var value = schema.decode(buffer);
} 
```

我在想我错误地设置了 Node.js 端。我正在使用 HTTP 模块，它可能不是正确的模块。也许我需要考虑在 Node.js 中编写自定义接收器？指针/帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-16T21:06:08.863

在这种情况下，也许 avro sink 不是您所需要的，因为它旨在将 Flume 与 Flume 通信（这是您构建 Flume 连接拓扑的方式）。

如果你想创建一个不在标准列表中的接收器，你需要构建一个自定义接收器并使用[https://flume.apache.org/FlumeUserGuide.html#custom-sink](https://flume.apache.org/FlumeUserGuide.html#custom-sink)中定义的自定义配置 我试过了它工作得很好。

或使用存在的东西：

[https://github.com/josealvarezmuguerza/flume-http-sink](https://github.com/josealvarezmuguerza/flume-http-sink)

我从来没有使用过这个模块。刚刚通过谷歌搜索而来。

对于 Avro 部分，只需使用 morphlines 将您的源转换为 avro，然后将每个事件发布到您的 node.js 服务器。

希望这能给你一点启发。

去代码！

# java - 如何从 simplejdbctemplate 查询中获取字符串列表或类型 T？

> ID：14906760
> 
> 赞同：2
> 
> 时间：2013-02-16T03:56:55.983
> 
> 标签：java, jdbc, spring-jdbc

我想从我的 simplejdbctemplate 查询表中获取所有行，并希望将它们添加到列表中。最好的方法是什么？我试过这个：

```
List<String> carbrands = (List<String>) jdbcTemplate.queryForList("select brand from cars", String.class); 
```

所以我希望有一个字符串列表，例如：

```
toyota
hyundai
bmw
benz
... 
```

但我无法让它工作。如果我尝试对多种类型执行此操作，我会卡住：

```
List<Car> values = (List<Car>) jdbcTemplate.queryForList("select name,brand,value from cars", Car.class); 
```

这也不起作用。我希望它返回 Cars，我将其定义为名称、品牌、价值。但是......我已经用谷歌搜索并找不到解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T04:13:48.427

1) 查询 1 是正确的，应该可以工作。

2）查询2应该是

```
List<Car> list = jdbcTemplate.query("select name,brand,value from cars", new BeanPropertyRowMapper<Car>(Car.class)); 
```

Car 应该是一个有效的 JavaBean - 必须有一个公共的无参数构造函数和公共的 setter / getter

```
public class Car {
     String name;

     public void setName(String name) {
           this.name = name;
     }

     public String getName() {
           return name;
     }
     ...
} 
```

或者，您可以将汽车读取为列的地图

```
List<Map<String, Object>> cars = jdbcTemplate.queryForList("select * from cars");
for(Map car : cars) {
     String brand = (String)car.get("brand");
     String name = (String)car.getName("name");
     ....
} 
```

# actionscript-3 - 将影片剪辑导出为可上传到 Facebook 和 Youtube 的视频文件

> ID：14906762
> 
> 赞同：1
> 
> 时间：2013-02-16T03:56:59.590
> 
> 标签：actionscript-3, flash, video, air, movieclip

我有一个模拟鼓的 Adob​​e Air 程序。当用户敲击键盘时，它会转化为击鼓声，并在屏幕上播放动画。该程序适用于 Windows 平台，而不是手机。

现在我希望能够录制包括动画在内的整首歌，并将其导出为可以上传到 Facebook 或 Youtube 的视频文件。我现在脑子里有两个想法：

1.) 用户打鼓时实时录屏。

2.) 将所有击键保存在文件中，例如 XML 文件。播放完成后，我将读取 XML 并根据击键时间渲染电影，通过编程创建一个 MovieClip 并插入所需的动画。

但是，我没有看到任何可用的 API 允许我根据我的 MovieClip 或动画生成视频文件。

最好的选择是什么，或者甚至可以在运行时生成视频文件？我非常想提供有关我尝试过的内容的详细信息，但很抱歉，我找不到关于此的单一主题，而且我无从开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:31:18.437

首先是将其导出到flv文件的代码

[http://www.zeropointnine.com/blog/simpleflvwriteras-as3-class-to-create-flvs/](http://www.zeropointnine.com/blog/simpleflvwriteras-as3-class-to-create-flvs/)

然后就是将视频上传到 facebook [http://developers.facebook.com/docs/reference/api/video/的 api](http://developers.facebook.com/docs/reference/api/video/)

# python - 如何使用脚本将标准输出重定向到文件和控制台？

> ID：14906764
> 
> 赞同：102
> 
> 时间：2013-02-16T03:57:55.120
> 
> 标签：python, python-2.7

我想运行一个 python 脚本并捕获文本文件上的输出，并希望在控制台上显示。

我想将它指定为 python 脚本本身的属性。不要`echo "hello world" | tee test.txt`每次都在命令提示符下使用该命令。

在我尝试的脚本中：

```
sys.stdout = open('log.txt','w') 
```

但这不会在屏幕上显示标准输出。

我听说过日志记录模块，但我无法使用该模块来完成这项工作。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-02-16T04:00:38.877

您可以在执行 Python 文件时使用 shell 重定向：

```
python foo_bar.py > file 
```

这会将打印在标准输出上的所有结果从 Python 源文件写入日志文件。

或者，如果您想从脚本中记录：

```
import sys

class Logger(object):
    def __init__(self):
        self.terminal = sys.stdout
        self.log = open("logfile.log", "a")

    def write(self, message):
        self.terminal.write(message)
        self.log.write(message)  

    def flush(self):
        # this flush method is needed for python 3 compatibility.
        # this handles the flush command by doing nothing.
        # you might want to specify some extra behavior here.
        pass    

sys.stdout = Logger() 
```

现在您可以使用：

```
print "Hello" 
```

这会将“Hello”写入标准输出和日志文件。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-16T05:49:11.130

我有办法同时将输出重定向到控制台以及文本文件：

```
te = open('log.txt','w')  # File where you need to keep the logs

class Unbuffered:

   def __init__(self, stream):

       self.stream = stream

   def write(self, data):

       self.stream.write(data)
       self.stream.flush()
       te.write(data)    # Write the data of stdout here to a text file as well

sys.stdout=Unbuffered(sys.stdout) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-07-15T11:22:20.297

使用日志模块来调试和关注你的应用

这是我设法记录到文件和控制台/标准输出的方法

```
import logging
logging.basicConfig(level=logging.INFO,
                    format='%(asctime)s - %(levelname)s - %(message)s',
                    filename='logs_file',
                    filemode='w')
# Until here logs only to file: 'logs_file'

# define a new Handler to log to console as well
console = logging.StreamHandler()
# optional, set the logging level
console.setLevel(logging.INFO)
# set a format which is the same for console use
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
# tell the handler to use this format
console.setFormatter(formatter)
# add the handler to the root logger
logging.getLogger('').addHandler(console)

# Now, we can log to both ti file and console
logging.info('Jackdaws love my big sphinx of quartz.')
logging.info('Hello world') 
```

从源代码阅读： [https ://docs.python.org/2/howto/logging-cookbook.html](https://docs.python.org/2/howto/logging-cookbook.html)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-01-05T03:59:16.347

根据[Amith Koujalgi 的回答](https://stackoverflow.com/a/14906787/243392)，这是一个可用于记录的简单模块 -

成绩单.py：

```
"""
Transcript - direct print output to a file, in addition to terminal.

Usage:
    import transcript
    transcript.start('logfile.log')
    print("inside file")
    transcript.stop()
    print("outside file")
"""

import sys

class Transcript(object):

    def __init__(self, filename):
        self.terminal = sys.stdout
        self.logfile = open(filename, "a")

    def write(self, message):
        self.terminal.write(message)
        self.logfile.write(message)

    def flush(self):
        # this flush method is needed for python 3 compatibility.
        # this handles the flush command by doing nothing.
        # you might want to specify some extra behavior here.
        pass

def start(filename):
    """Start transcript, appending print output to given filename"""
    sys.stdout = Transcript(filename)

def stop():
    """Stop transcript and return print functionality to normal"""
    sys.stdout.logfile.close()
    sys.stdout = sys.stdout.terminal 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-01-07T01:58:21.647

我设计了一个更简单的解决方案。只需定义一个将打印到文件或屏幕或两者的函数。在下面的示例中，我允许用户输入输出文件名作为参数，但这不是强制性的：

```
OutputFile= args.Output_File
OF = open(OutputFile, 'w')

def printing(text):
    print text
    if args.Output_File:
        OF.write(text + "\n") 
```

在此之后，将一行打印到文件和/或屏幕所需的只是：printing(Line_to_be_printed)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-03-09T15:33:06.033

```
from IPython.utils.io import Tee
from contextlib import closing

print('This is not in the output file.')        

with closing(Tee("outputfile.log", "w", channel="stdout")) as outputstream:
    print('This is written to the output file and the console.')
    # raise Exception('The file "outputfile.log" is closed anyway.')
print('This is not written to the output file.')   

# Output on console:
# This is not in the output file.
# This is written to the output file and the console.
# This is not written to the output file.

# Content of file outputfile.txt:
# This is written to the output file and the console. 
```

in 中的`Tee`类[`IPython.utils.io`](https://ipython.org/ipython-doc/3/api/generated/IPython.utils.io.html)做你想做的事，但它缺少在-statement中调用它所需的`__enter__`和方法。这些是由添加的。`__exit__``with`[`contextlib.closing`](https://docs.python.org/3/library/contextlib.html)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-08-11T16:44:08.787

我在这里尝试了一些解决方案，但没有找到同时写入文件和控制台的解决方案。所以这就是我所做[的（基于这个答案）](https://stackoverflow.com/a/14906787/6103151)

```
class Logger(object):
    def __init__(self):
        self.terminal = sys.stdout

    def write(self, message):
        with open ("logfile.log", "a", encoding = 'utf-8') as self.log:            
            self.log.write(message)
        self.terminal.write(message)

    def flush(self):
        #this flush method is needed for python 3 compatibility.
        #this handles the flush command by doing nothing.
        #you might want to specify some extra behavior here.
        pass
sys.stdout = Logger() 
```

该解决方案使用更多的计算能力，但可靠地将标准输出中的所有数据保存到记录器文件中并且使用更少的内存。为了我的需要，我还在 self.log.write(message) 中添加了时间戳。效果很好。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-07-12T14:09:59.930

这是一个简单的上下文管理器，它打印到控制台并将相同的输出写入文件。它还将任何异常写入文件。

```
import traceback
import sys

# Context manager that copies stdout and any exceptions to a log file
class Tee(object):
    def __init__(self, filename):
        self.file = open(filename, 'w')
        self.stdout = sys.stdout

    def __enter__(self):
        sys.stdout = self

    def __exit__(self, exc_type, exc_value, tb):
        sys.stdout = self.stdout
        if exc_type is not None:
            self.file.write(traceback.format_exc())
        self.file.close()

    def write(self, data):
        self.file.write(data)
        self.stdout.write(data)

    def flush(self):
        self.file.flush()
        self.stdout.flush() 
```

要使用上下文管理器：

```
print("Print")
with Tee('test.txt'):
    print("Print+Write")
    raise Exception("Test")
print("Print") 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2021-01-26T18:47:54.837

这种方式在我的情况下非常有效。我只是根据此线程中提供的其他代码添加了一些修改。

```
import sys, os 

orig_stdout = sys.stdout  # capture original state of stdout

te = open('log.txt','w')  # File where you need to keep the logs

class Unbuffered:
   def __init__(self, stream):
       self.stream = stream

   def write(self, data):
       self.stream.write(data)
       self.stream.flush()
       te.write(data)    # Write the data of stdout here to a text file as well

sys.stdout=Unbuffered(sys.stdout)

#######################################
##  Feel free to use print function  ##
#######################################

print("Here is an Example =)")

#######################################
##  Feel free to use print function  ##
#######################################

# Stop capturing printouts of the application from Windows CMD
sys.stdout = orig_stdout  # put back the original state of stdout
te.flush()  # forces python to write to file
te.close()  # closes the log file

# read all lines at once and capture it to the variable named sys_prints
with open('log.txt', 'r+') as file:
    sys_prints = file.readlines() 

# erase the file contents of log file
open('log.txt', 'w').close() 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-09-10T03:31:24.677

要将输出重定向到文件和终端而不修改 Python 脚本在外部的使用方式，您可以使用`pty.spawn(itself)`：

```
#!/usr/bin/env python
"""Redirect stdout to a file and a terminal inside a script."""
import os
import pty
import sys

def main():
    print('put your code here')

if __name__=="__main__":
    sentinel_option = '--dont-spawn'
    if sentinel_option not in sys.argv:
        # run itself copying output to the log file
        with open('script.log', 'wb') as log_file:
            def read(fd):
                data = os.read(fd, 1024)
                log_file.write(data)
                return data

            argv = [sys.executable] + sys.argv + [sentinel_option]
            rc = pty.spawn(argv, read)
    else:
        sys.argv.remove(sentinel_option)
        rc = main()
    sys.exit(rc) 
```

如果`pty`模块不可用（在 Windows 上），那么您可以用更便携的[`teed_call()`函数](https://stackoverflow.com/a/4985080/4279)替换它，但它提供普通管道而不是伪终端——它可能会改变某些程序的行为。

与替换为类文件对象相比，基于 和 - 的解决方案`pty.spawn`的优势在于，它们可以在文件描述符级别捕获输出，例如，如果脚本启动其他进程，这些进程也可以在 stdout/stderr 上产生输出。请参阅我对相关问题的回答：[将标准输出重定向到 Python 中的文件？](https://stackoverflow.com/a/22434262/4279)`subprocess.Popen``sys.stdout`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-24T02:37:07.753

根据@Arnold Suiza 的回答，这是一个您可以在开始时运行一次的函数，之后所有函数都将立即打印到标准输出和文件：

```
def print_to_file(filename):
    orig_stdout = sys.stdout  # capture original state of stdout

    class Unbuffered:
        def __init__(self, filename):
            self.stream = orig_stdout
            self.te = open(filename,'w')  # File where you need to keep the logs

        def write(self, data):
            self.stream.write(data)
            self.stream.flush()
            self.te.write(data)    # Write the data of stdout here to a text file as well
            self.te.flush()

    sys.stdout=Unbuffered(filename) 
```

现在只需`print_to_file('log.txt')`在程序开始时运行，您就可以开始了！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-24T12:37:21.757

基于[Brian Burns 编辑的答案](https://stackoverflow.com/a/41477104/1913199)，我创建了一个更容易调用的类：

```
class Logger(object):

    """
    Class to log output of the command line to a log file

    Usage:
    log = Logger('logfile.log')
    print("inside file")
    log.stop()
    print("outside file")
    log.start()
    print("inside again")
    log.stop()
    """

    def __init__(self, filename):
        self.filename = filename

    class Transcript:
        def __init__(self, filename):
            self.terminal = sys.stdout
            self.log = open(filename, "a")
        def __getattr__(self, attr):
            return getattr(self.terminal, attr)
        def write(self, message):
            self.terminal.write(message)
            self.log.write(message)
        def flush(self):
            pass

    def start(self):
        sys.stdout = self.Transcript(self.filename)

    def stop(self):
        sys.stdout.log.close()
        sys.stdout = sys.stdout.terminal 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2017-06-06T14:54:06.973

我试过这个：

```
"""
Transcript - direct print output to a file, in addition to terminal.

Usage:
    import transcript
    transcript.start('logfile.log')
    print("inside file")
    transcript.stop()
    print("outside file")
"""

import sys

class Transcript(object):

    def __init__(self, filename):
        self.terminal = sys.stdout, sys.stderr
        self.logfile = open(filename, "a")

    def write(self, message):
        self.terminal.write(message)
        self.logfile.write(message)

    def flush(self):
        # this flush method is needed for python 3 compatibility.
        # this handles the flush command by doing nothing.
        # you might want to specify some extra behavior here.
        pass

def start(filename):
    """Start transcript, appending print output to given filename"""
    sys.stdout = Transcript(filename)

def stop():
    """Stop transcript and return print functionality to normal"""
    sys.stdout.logfile.close()
    sys.stdout = sys.stdout.terminal
    sys.stderr = sys.stderr.terminal 
```

* * *

## 回答 #14

> 赞同：-6
> 
> 时间：2013-02-16T05:51:37.613

您可以使用 >> python 和 print rint 的“chevron”语法将输出重定向到文件中，如[文档中所示](https://docs.python.org/2.7/reference/simple_stmts.html#print)

让我们看看，

```
fp=open('test.log','a')   # take file  object reference 
print >> fp , "hello world"            #use file object with in print statement.
print >> fp , "every thing will redirect to file "
fp.close()    #close the file 
```

签出文件 test.log 您将拥有数据并在控制台上打印只需使用**普通打印**语句。

# ruby - 变量绑定

> ID：14906772
> 
> 赞同：2
> 
> 时间：2013-02-16T03:58:40.667
> 
> 标签：ruby, scope

我不确定我是否理解变量绑定的含义。这可能是一个并非特定于 Ruby 的编程概念。有些书希望你已经知道这意味着什么，这似乎是一个基本概念。

到目前为止，我的理解是：每当实例化一个 Ruby 对象时，这实际上意味着 Ruby 会在内存中分配一个空间来指定这个对象。如果将对象分配给变量，则实际上并没有将对象存储在变量中，而是将对该对象的引用存储在变量中。我认为绑定是指这个概念，其中变量被“绑定”到与其关联的对象，但我不完全确定这是否代表绑定和绑定的含义。

有人可以帮我解释一下吗，如果可能的话，最好使用一个简单的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:26:38.123

您在第二段中提到的概念是关于指针的，与绑定没有直接关系。

正如您所注意到的，绑定并非特定于 Ruby。它是一个广泛用于正式处理语言的术语，包括编程语言和自然语言。有些表达式有自己固定的含义，在编程语言中称为常量，在自然语言中称为专有名词（或者，随意的美国人也称其为名称）。相反，表达式本身不引用任何东西，但需要以某种方式分配它们的值。这些在编程语言中称为变量，在自然语言中称为代词。

在一个变量没有被赋值的上下文中，这个变量被称为是空闲的。否则，变量是绑定的。以下表达式中的变量`x`是自由的。

```
x**2 
```

有几种方法可以绑定变量。一种方法是赋值。在下面的第一行中，`x`已经被赋值`3`，所以它被绑定在范围内。

```
x = 3
x**2 
```

另一种方法是对其进行量化。在下文中，`x`块内部由其`x`外部约束。无论外部`x`采用什么值，都将是内部的值`x`。

```
->x{x**2} 
```

另一方面，`x`上述表达式中的外部是不受约束的。通过针对以下某个值调用 proc，它就被绑定了。

```
->x{x**2}.call(3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T04:35:10.010

考虑它的一个好方法是绑定是封装上下文的对象。`binding`您可以使用关键字显示绑定对象：

```
a = 10 # a is defined in the 'main' context
def get_binding  # so is the 'get_binding' method
  b = 20
  binding
end

n = get_binding #=> #<Binding:0x00...> 
```

现在由于`get_binding`在`main`上下文中定义，返回的绑定对象包括方法的本地上下文以及主上下文中的任何内容。该变量`b`在 中不可用`main`，而在`a`中可用`get_binding`。

您可以通过使用以下方式与绑定对象交互来证明这一点`eval`：

```
a #=> 10
eval('a', n) #=> undefined local variable or method 'a' for main:Object

b #=> undefined local variable or method `b' for main:Object
eval('b', n)  #=> 20  # but it is defined within the context the n binding was created. 
```

只是为了澄清 - 这个例子只是揭示了幕后发生的事情。如果有的话，您很少需要直接处理绑定对象。

Ruby 模块、类和方法显示它们与层次结构比它们更低的对象的绑定，但不是相反，除非它们通过公共实例方法等显式显示。这有点过于简单化了，但事实并非如此如果您是编程新手，有必要深入了解这一点。

# java - 同一个包中的两个类在不同的模块或不同的 JARS

> ID：14906773
> 
> 赞同：1
> 
> 时间：2013-02-16T03:58:41.067
> 
> 标签：java, maven

```
// A.java
package com.example.www;

public class A {}

// B.java
package com.example.www;

public class B {
    A a;
} 
```

在上面的示例中，类 B 可以创建对类 A 的引用，而无需导入 A，因为它们在同一个包中。但是，如果类 A 和 B 具有相同的完全限定包名，但存在于多模块 Maven 项目中的不同模块中呢？或者，另一种情况，如果 A 和 B 的 .class 文件位于不同的 JAR 中怎么办？

A 类和 B 类仍然可以相互访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:03:41.750

如果它们在不同的 jar 中，则需要添加导入语句或使用完全限定名称访问类（假设类 A 在包 com.examples.etc 中）。

```
import com.examples.etc.A

public class B {
 A a;
 } 
```

或者

```
public class B {
 com.examples.etc.A a;
} 
```

# c - 用字典文件填充链表数组

> ID：14906774
> 
> 赞同：1
> 
> 时间：2013-02-16T03:58:46.833
> 
> 标签：c

编辑，好吧。所以，我的代码目前大部分都在工作。我知道它缺少一些应该拼写错误的单词。不过不知道为什么。

[http://pastebin.com/DSNU16Bf](http://pastebin.com/DSNU16Bf)

此链接包含指向我的文件的所有其他链接。因为，我一次只能发布两个链接。

如果您阅读文件。你会看到这一切是如何运作的。我的搜索是超级贫民区，我知道。如果它以不同的字母开头，我想不出一种忽略链表的方法，我所做的一切都会造成无限循环。不过，这可以编译和工作。

它没有收集所有的俚语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T06:58:02.653

这是我的批评

```
bool load(const char* dictionary){
// TODO
FILE *dict = fopen(dictionary, "r");
if(opened){
    fclose(dict);
    return false;
} 
```

不知道`opened`从哪里来 - 猜测您事先打开了文件，因此我们不知道文件指针是在开头、结尾还是在中间的某个位置

```
opened = true;
if(dict == NULL || !dict){
    return false;
} 
```

为什么`!dict`？

```
char line[LENGTH];
bool filling;
for(int i = 0; i < LLLength; i++){
    struct dict_node *newNode;
    newNode = malloc(sizeof(dict_node));
    wordArr[i] = newNode;
    start[i] = wordArr[i];
} 
```

所以在这里你正在构建 27 个节点。这是一个更简单的版本（并且相同）

```
for(int i = 0; i < LLLength; i++){
        struct dict_node *newNode;
        start[i] = malloc(sizeof(dict_node));
    } 
```

然后让我们读取文件

```
while(!feof(dict)){
    for(int i = 0; i < LLLength; i++){
        filling = true;
        while(filling)
            fgets(line,LENGTH,dict); 
```

我们到了这一点（27 个中的 1 个，一行最多 45 个字符）

因此，让我们将其弹出到该数组中。`start[i]`或`wordArrd[i]`任何你喜欢的

由于我们不知道`wordArr[i]->word`是字符数组还是指针 - 我无法在这里为您提供帮助

```
 strcpy(wordArr[i]->word,line);
        prev = wordArr[i]; 
```

现在我们很困惑。您从一个数组开始，但出现了精神分裂症——我们想要一个链表。

```
 wordArr[i]->next = malloc(sizeof(dict_node));
            wordArr[i] = wordArr[i]->next;
            fgets(line,LENGTH,dict);
            strcpy(wordArr[i]->word,line);
    }
} 
```

...

```
fclose(dict);
for(int i = 0; i < LLLength; i++){
    wordArr[i] = start[i];
    while(wordArr[i]->next != NULL){
        wordArr[i] = wordArr[i]->next;
        count++;
    }
}

int test = 0;
wordArr[test] = start[test];
while(wordArr[test]->next != NULL){
    printf("%s",wordArr[test]->word);
    wordArr[test] = wordArr[test]->next;
}
return true;
} 
```

# ocaml - 关于 OCaml 中 Map.remove 的复杂度

> ID：14906776
> 
> 赞同：1
> 
> 时间：2013-02-16T03:58:57.293
> 
> 标签：ocaml

似乎`Map.remove`会返回一个新的地图结构，而原始地图保持不变。

复杂度怎么仍然是 O(lg n)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T07:30:01.940

如果这能给你一个直觉，这里是一个带有`O(1)`Stack.pop 的堆栈实现，它返回一个新结构，保持前一个结构不变（看看我如何弹出`test`两次）。

```
type 'a stack = Stack of 'a list
let empty = Stack []
let push x (Stack xs) = Stack (x :: xs)
let pop = function
  | Stack [] -> raise Not_found
  | Stack (x::xs) -> x, Stack xs

(* testing the structure in the toplevel *)

# let test = push 1 (push 2 (push 3 empty));;
val test : int stack = Stack [1; 2; 3]
# let (n, test2) = pop test;;
val n : int = 1
val test2 : int stack = Stack [2; 3]
# pop test2;;
- : int * int stack = (2, Stack [3])
# (* but the starting stack 'test' is still available *)
  pop test;;
- : int * int stack = (1, Stack [2; 3]) 
```

### 为什么有些结构是功能性的，而另一些是必要的？

这归结为算法问题。有所谓的“纯功能数据结构”具有您可以实现所需操作的属性，这样大部分数据可以在结构的不同副本之间共享 - 请注意，这主要依赖于别名，如果这些结构的元素是可变的，这将是可观察的。

在`list`示例中，获取列表的尾部会为您提供一个不同的列表，该列表也是前一个列表的一部分，因此不涉及数据副本。对于`Map.remove`（或其他地图修改操作），您通常会修改从平衡树的根到您感兴趣的节点的路径，因此该路径（对数高度）在两个结构中会有所不同，但是树的其余部分，即沿该路径的左右子树，将不会被修改，并且可以在两个结构之间共享，从而仅导致对数内存分配。

Jeffrey 指出了 Okasaki 在此类数据结构方面的出色工作（它被编辑为我绝对推荐的一本书，但前提是您真的对这个相当高级的主题感兴趣），其中实现了许多基于这些想法的数据结构。

但相反，其他一些结构很难以这种方式持久化。通常，数组是包含大量元素的非常扁平的结构。因此，如果您想返回数组的修改版本，您基本上必须对现有数组进行原地变异（丢失以前的版本，因此这不是持久的）或将整个数组复制到新版本（线性时间和内存成本） ）。前面的示例之所以有效，是因为有一些具有独立子结构（平衡树的子树，列表的尾部）的间接可以单独使用而无需复制；但是数组只是没有这种独立子结构的平面结构。但这可能是一个有趣的性能权衡：缺乏间接性正是数组访问是恒定时间的原因（在这里忘记缓存），`O(log n)``O(1)`在实际实践中，它比数组小但明显更多）。

哈希表可变的原因是它们是在数组之上实现的。哈希表是一个“桶”数组（实现为列表，或者，如果你是明智的，一个树数据结构），其中每个桶包含哈希到数组中相同键的所有元素。更新哈希表意味着更新存储桶（可以通过持久化方式完成），但随后您需要更新数组，这与上述相同的原因是非持久性的。

请注意，并非所有内容都丢失了：您可以提出此类数据结构的持久版本。你总是可以通过付出`O(log n)`代价来做到这一点（通过将你的可变内存表示为从整数到东西的持久平衡树），但在大多数情况下，你也可以很聪明，并提供比这更快的持久数据结构，希望只有*一个比*不关心持久性的对应物慢一点。涉及到各种权衡，但如果您的应用程序*需要*持久性（例如，您代表系统的状态，您需要经常为其状态快照，有时会回溯到早期版本），您会很高兴有这些替代方案.

在这方面，请参阅[关于持久数组的讨论](https://stackoverflow.com/a/14703968/298143)，以及有关 HAMT 的 OCaml 实现的[博客文章](http://gallium.inria.fr/blog/implementing-hamt-for-ocaml/)，HAMT 是一种著名的受哈希表启发的持久数据结构，受 Clojure 社区的启发（Clojure，是一种专注于并发性的语言，因此明智地避免可变状态，在持久数据结构领域产生了一些相当有趣的工作）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T04:10:38.367

以前的地图大部分都由新地图共享。只有一小部分不同。您可以在 Chris Okasaki 的论文[Purely Functional Data Structures](http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf)中阅读所有关于为什么不可变数据结构表现出色的信息。

# java - 为什么我的 Maven 找不到条带库？

> ID：14906783
> 
> 赞同：1
> 
> 时间：2013-02-16T03:59:55.730
> 
> 标签：java, maven, intellij-idea

使用 intellij 我可以在我的外部库中看到该包，但是当我使用 maven 构建时，我遇到了以下问题：

运行时：

```
mvn clean package 
```

我收到此错误：

```
Failure to find com.stripe:stripe-java:jar:${stripe-version} in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced 
```

版本在哪里：

```
<stripe-version>1.1.16</stripe-version> 
```

我也尝试了 1.1.13 和 1.1.14，我得到了同样的错误。

使用 -e 开关运行时，我得到：

```
Failure to find com.stripe:stripe-java:jar:${stripe-version} in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced
    at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:170)
    at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies(LifecycleDependencyResolver.java:171)
    ... 22 more
Caused by: org.sonatype.aether.resolution.DependencyResolutionException: Failure to find com.stripe:stripe-java:jar:${stripe-version} in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced
    at org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveDependencies(DefaultRepositorySystem.java:412)
    at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:164)
    ... 23 more
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Failure to find com.stripe:stripe-java:jar:${stripe-version} in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:541)
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:220)
    at org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveDependencies(DefaultRepositorySystem.java:395)
    ... 24 more
Caused by: org.sonatype.aether.transfer.ArtifactNotFoundException: Failure to find com.stripe:stripe-java:jar:${stripe-version} in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced
    at org.sonatype.aether.impl.internal.DefaultUpdateCheckManager.checkArtifact(DefaultUpdateCheckManager.java:190)
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:430)
    ... 26 more 
```

我可以在这里看到版本：[http ://search.maven.org/#browse%7C788949441](http://search.maven.org/#browse%7C788949441)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:11:18.097

依赖下载就好了：

```
<dependency>
    <groupId>com.stripe</groupId>
    <artifactId>stripe-java</artifactId>
    <version>1.1.16</version>
</dependency> 
```

似乎您在定义/使用条带版本属性时遇到问题：

```
<properties>
    <stripe.version>1.1.16</stripe.version>
</properties>

<!--- ... -->
<version>${stripe.version}</version> 
```

# macos - iOS 模拟器与 OS X 中的资源限制

> ID：14906792
> 
> 赞同：0
> 
> 时间：2013-02-16T04:02:22.390
> 
> 标签：macos, resources, ios-simulator

我在 Objective-C 中为益智游戏编写了一个搜索算法。最初我设想这个算法在 iOS 应用程序中运行，因此我主要使用 iOS 模拟器对其进行测试。现在很明显，它不仅限于在应用程序中运行。所以它可以在 OS X 上运行。由于搜索算法相当耗费资源（它使用 BFS 解决了一个复杂的难题）我想知道资源限制。

**iOS 模拟器在内存使用和 CPU 方面施加了哪些资源限制？**

一旦我了解了这些限制，我就可以做出更好的决定，即仅从终端运行算法并可能将其移植到另一种语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:05:42.293

iOS 模拟器不会对内存或 CPU 使用施加任何限制。如果您将代码拉出到本机应用程序中，那么它应该以相同的方式运行。

# jquery - 将 jquery 数组映射到单选按钮

> ID：14906795
> 
> 赞同：1
> 
> 时间：2013-02-16T04:02:53.780
> 
> 标签：jquery, radio-button

嗨，我很难找出正确的方法来做到这一点，但这里有。我有 3 个问题，每个问题都有正确答案。

```
<div class="question">
    <h2>Question 1</h2>
    <p>Which picture has Anna?</p>
    <ul>
        <li><input type="radio" id="q1_a" name="q1"><label for="q1_a">A</label></li>
        <li><input type="radio" id="q1_b" name="q1"><label for="q1_b">B</label></li>
        <li><input type="radio" id="q1_c" name="q1"><label for="q1_c">C</label></li>
        <li><input type="radio" id="q1_d" name="q1"><label for="q1_d">D</label></li>
    </ul>
    <p class="answer"></p>
</div>

<div class="question">
    <h2>Question 2</h2>
    <p>Person?</p>
    <ul>
        <li><input type="radio" id="q2_a" name="q2"><label for="q2_a">A</label></li>
        <li><input type="radio" id="q2_b" name="q2"><label for="q2_b">B</label></li>
        <li><input type="radio" id="q2_c" name="q2"><label for="q2_c">C</label></li>
        <li><input type="radio" id="q2_d" name="q2"><label for="q2_d">D</label></li>
    </ul>
    <p class="answer"></p>
</div>

<div class="question">
    <h2>Question 3</h2>
    <p>Alligator?</p>
    <ul>
        <li><input type="radio" id="q3_a" name="q3"><label for="q3_a">A</label></li>
        <li><input type="radio" id="q3_b" name="q3"><label for="q3_b">B</label></li>
        <li><input type="radio" id="q3_c" name="q3"><label for="q3_c">C</label></li>
        <li><input type="radio" id="q3_d" name="q3"><label for="q3_d">D</label></li>
    </ul>
    <p class="answer"></p>
</div> 
```

对于每组答案，我将两个数组组合成一个大数组。

```
var incorrect = [
    "Hmmm, are you sure about that?",
    "Almost! Try again.",
    "Give it another shot.",
    "Nice try. Just not quite nice enough.",
    "Not this time.",
    "You might want to check your answer.",
    "Try again!",
    "Oops! Pick again.",
    "So close! Choose again.",
    "D'oh! Choose again.",
    "Keep trying!"
];

var correct =[
    {id:"q1_b",text:"Hi answer",link:"www.yahoo.com"},
    {id:"q2_b",text:"Another good answer!",link:"www.google.com"},
    {id:"q3_b",text:"This is the best answer. ",link:"www.msn.com"}
];

var answers = [];
i = 0;

answers[i] = [incorrect[10],correct[i++],incorrect[0],incorrect[5]];
answers[i] = [incorrect[9],correct[i++],incorrect[0]];
answers[i] = [incorrect[0],correct[i++],incorrect[2]]; 
```

answers 数组结合了这两个数组，给出了正确答案的列表以及问题其余部分的正确错误答案。我想要做的是，将答案数组映射到每组问题，这样我就不必使用每个数组，而且我不太确定我会怎么做，因为它是两个不同的数组合二为一。现在我对每个单选按钮都有一些类似的东西：

```
$('input[type=radio]').click(function(){
    if($(this).attr("checked")){
        var answertext = $(this).closest('div').find('.answer'),
            id = $(this).attr('id'),

        if (id == answers[correct[0]['id']]){
            answertext.html('<span class="green">'+answers[correct[0]['text']]+'</span>');
        } else {
            answertext.html('<span class="red">'+answers[incorrect[0]]+'</span>');
        }

    }
}); 
```

除了 if then 语句之外，我还应该使用其他东西吗？任何朝着正确方向的推动将不胜感激。

编辑：编辑了不正确的数组，它有文本，没有，只有正确的答案才能得到文本。编辑：重新措辞问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:24:24.333

在同事的帮助下，我能够解决我的答案。我首先为每个 div 添加一个 num attr ：D

```
<div class="question" num="1">
<h2>Question 1</h2>
<p>Which picture has Anna?</p>
<ul>
    <li><input type="radio" id="q1_a" name="q1"><label for="q1_a">A</label></li>
    <li><input type="radio" id="q1_b" name="q1"><label for="q1_b">B</label></li>
    <li><input type="radio" id="q1_c" name="q1"><label for="q1_c">C</label></li>
    <li><input type="radio" id="q1_d" name="q1"><label for="q1_d">D</label></li>
</ul>
<p class="answer"></p>
</div>

<div class="question" num="2">
<h2>Question 2</h2>
<p>Person?</p>
<ul>
    <li><input type="radio" id="q2_a" name="q2"><label for="q2_a">A</label></li>
    <li><input type="radio" id="q2_b" name="q2"><label for="q2_b">B</label></li>
    <li><input type="radio" id="q2_c" name="q2"><label for="q2_c">C</label></li>
    <li><input type="radio" id="q2_d" name="q2"><label for="q2_d">D</label></li>
</ul>
<p class="answer"></p>
</div>

<div class="question" num="3">
<h2>Question 3</h2>
<p>Alligator?</p>
<ul>
    <li><input type="radio" id="q3_a" name="q3"><label for="q3_a">A</label></li>
    <li><input type="radio" id="q3_b" name="q3"><label for="q3_b">B</label></li>
    <li><input type="radio" id="q3_c" name="q3"><label for="q3_c">C</label></li>
    <li><input type="radio" id="q3_d" name="q3"><label for="q3_d">D</label></li>
</ul>
<p class="answer"></p>
</div> 
```

然后我创建了这个来获取索引和数字。

```
el = $(this).parent().index();
q = $(this).parent().parent().parent().attr("num");
resp = answers[q][el]; 
```

我还更新了正确的数组以使其更简单：

```
var correct =[
{text:"Hi answer"},
{text:"Another good answer!"},
{text:"This is the best answer."}
]; 
```

答案数组和不正确的保持不变。

**但请注意**：如果问题有多个答案，则使用迭代（例如 i++ 每行更改的地方）不起作用。如果确实如此，则需要这样编写答案数组：

```
answers[i++] = [incorrect[10],correct[0],incorrect[0],incorrect[5]];
answers[i++] = [incorrect[9],correct[1],incorrect[0]];
answers[i++] = [incorrect[0],correct[2],incorrect[2]]; 
```

最后我更新了单选按钮上的点击事件，如下所示：

```
$('input[type=radio]').click(function(){
if($(this).attr("checked")){
    var answer = $(this).closest('div').find('.answer'),
        id = $(this).attr('id'),

        el_number = $(this).parent().index();
    q_number = $(this).parent().parent().parent().attr("num");
    resp = answers[q_number][el_number];

    answer.html('<span>' + (resp["text"] != null) ? resp["text"] : resp + '</span>');

}
}); 
```

这似乎奏效了。:D

# ruby-on-rails - 为什么我的 Rails 应用程序可以离线工作但不能在线工作？

> ID：14906796
> 
> 赞同：0
> 
> 时间：2013-02-16T04:03:02.643
> 
> 标签：ruby-on-rails, routes

老实说，我不是 100% 确定我需要在这里提到什么，但这是交易......

我在 localhost 上设置了一个基本的 Rails 应用程序，它运行良好。

然而，当我把它放到网上时，嗯......不是那么多。您知道应该如何在 routes.rb 中设置默认路由并删除/重命名 index.html 文件，对吧？好吧，我在本地和远程版本上都这样做了。本地版本：我得到了我在 routes.rb 中指定的确切视图。但是，服务器上的完全相同吗？我在“公共”目录中获得了我所有文件的列表。

换句话说，Rails 似乎在忽略 routes.rb。

我应该注意什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:26:51.290

如果你得到一个文件列表，它不会命中 Rails。我不知道你的 Rails 应用程序前面有什么网络服务器，但它配置错误。对我来说，这听起来像是只提供目录列表的 Apache 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:06:47.897

可能是您的 git 提交有问题，您是否在推送之前删除了文件？

```
git add -u
git commit -m "Removed some files" 
```

或者：

```
git add .
git commit -am "add some files, removed others" 
```

# objective-c - 将 NSString 转换为 NSArray

> ID：14906801
> 
> 赞同：0
> 
> 时间：2013-02-16T04:04:25.780
> 
> 标签：objective-c, casting, nsstring, nsarray, nsobject

我对 Objective-C 很陌生，我在处理 NSArray 时遇到了问题。

我有一个看起来像这样的课程

```
@interface Tuple : NSObject
{
    NSObject* dataKey;
    NSObject* dataValue;
    NSString* dataType;
}
@property(nonatomic, retain) NSObject* dataKey;
@property(nonatomic, retain) NSObject* dataValue;
@property(nonatomic, retain) NSString* dataType;

- (id) initWithKey:(NSObject*)dKey 
          type:(NSString*)dType 
         value:(NSObject*)dValue;
- (NSString*) description;

- (NSString*)   getValueInString; 
- (BOOL)        getValueInBoolean; 
- (NSString*)   getAnswerValueInString; 
- (NSArray*)    getAnswerValueInArray;
@end 
```

这是我的 getAnswerValueInArray 方法

```
- (NSArray*) getAnswerValueInArray
{
    NSLog(@"%@",dataValue);
    NSArray* value = (NSArray*)dataValue;
    if ([dataType isEqualToString:@"vague"] == NO) {
        return value;  
    }
 return nil;
} 
```

返回值如下所示 **（'KEY: 0\tTYPE: string\tVALUE = p1\n', 'KEY: 2\tTYPE: string\tVALUE = p4\n'）**

但是当我尝试遍历数组时，类似

```
for (int a=0; a<value.count; a++) 
```

我收到以下错误。另外，我尝试了 [value objectAtIndes:0] 并给了我相同的（字符串）错误。我的猜测是，不知何故，我的数组并不是真正的数组而是一个字符串，因此当我使用数组方法时它会抛出错误。但我不明白为什么以及如何解决这个问题以获得一个实际的数组。

2013-02-16 14:46:52.222 [3334:907]-[__NSCFString 计数]：无法识别的选择器发送到实例 0x210b6e20

-[__NSCFString objectAtIndex:]：无法识别的选择器发送到实例 0x1c5e7a70

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:10:52.450

您不是在处理数组，而是在处理字符串。Objective-C 有点偏离常规，因为对象是无类型的，但指针是有类型的。仅仅将一个对象分配给一个指针并不会改变它的类型或关于它的任何其他内容（保留计数除外）。

在我看来，您希望您的字符串具有什么语法以及为什么您希望内置解析，所以我真的不能说更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:11:35.993

在尝试访问其中的组件之前，您需要解析字符串以创建一个数组。一种开始的方法是使用`NSString`方法[componentsSeparatedByString:](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/componentsSeparatedByString%3a)或[componentsSeparatedByCharactersInSet:](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/componentsSeparatedByCharactersInSet%3a)。这些方法每个都返回从接收器生成的字符串数组，方法是将其拆分为指定的字符串或字符。

# c++ - std::reference_wrapper 的编译器错误

> ID：14906802
> 
> 赞同：1
> 
> 时间：2013-02-16T04:04:28.533
> 
> 标签：c++, c++11

```
#include <functional>
#include <algorithm>
#include <list>
using namespace std;

struct foo{
  int _val;
};

int main(){
  list<foo> A;
  foo B;
  for(int i=0;i<10;++i){
    B._val=i;
    A.push_back(B);
  }
  list< reference_wrapper < foo > > C(A.begin(),A.end());
return 0;
} 
```

我正在尝试使用 std::reference_wrapper 来保存对“foo”类型的引用，但是当我这样做时，我得到了一个非常特殊的编译器错误：

```
>In file included from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/list:63,
from ref_wrapper.cpp:4:/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_list.h: In member function \u2018void std::list<_Tp, _Alloc>::_M_initialize_dispatch(_InputIterator, _InputIterator, std::__false_type) [with _InputIterator = std::_List_iterator<foo>, _Tp = std::reference_wrapper<foo>, _Alloc = std::allocator<std::reference_wrapper<foo> >]\u2019:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_list.h:577:   instantiated from \u2018std::list<_Tp, _Alloc>::list(_InputIterator, _InputIterator, const _Alloc&) [with _InputIterator = std::_List_iterator<foo>, _Tp = std::reference_wrapper<foo>, _Alloc = std::allocator<std::reference_wrapper<foo> >]\u2019
ref_wrapper.cpp:19:   instantiated from here
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_list.h:1361: error: no matching function for call to \u2018std::list<std::reference_wrapper<foo>, std::allocator<std::reference_wrapper<foo> > >::push_back(foo&)\u2019
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_list.h:919: note: candidates are: void std::list<_Tp, _Alloc>::push_back(const _Tp&) [with _Tp = std::reference_wrapper<foo>, _Alloc = std::allocator<std::reference_wrapper<foo> >]
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_list.h:924: note:                 void std::list<_Tp, _Alloc>::push_back(_Tp&&) [with _Tp = std::reference_wrapper<foo>, _Alloc = std::allocator<std::reference_wrapper<foo> >] 
```

无法辨别发生了什么。我在 VS 2010 上尝试了相同的代码，并且成功了。我想知道为什么它不适用于 g++

我在终端输入的命令是：

```
 g++ -std=gnu++0x reference_wrapper_test.cpp -o reference_wrapper_test 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T07:39:28.673

我认为你可以更新你的编译器。

请参阅链接： http: [//liveworkspace.org/code/3mVcGp](http://liveworkspace.org/code/3mVcGp) $6

# javascript - Ruby on Rails 中的同步选择

> ID：14906805
> 
> 赞同：1
> 
> 时间：2013-02-16T04:04:37.107
> 
> 标签：javascript, ruby-on-rails, list, select, synchronize

我需要同步两个选择，例如当我有一个国家选择并且我想显示在最后一个选择标签中选择的国家的状态时，所以我的情况如下：（它是西班牙语，对不起）......

第一个是，

```
usuario.select :entidad, options_from_collection_for_select(@entidad,'entidad', 'sigla') 
```

第二个选择是，

```
usuario.select :agencia, options_from_collection_for_select(@agencia,'agencia', 'nombre') 
```

好的，所以，我想显示在第一次选择中选择的实体的代理机构，谢谢一些可以帮助我的人，拜托！

# node.js - 与node.js代码相关的困惑

> ID：14906806
> 
> 赞同：0
> 
> 时间：2013-02-16T04:04:44.370
> 
> 标签：node.js

我发现这段代码说我可以异步运行一些数据库查询

```
var queries = [];

for (var i=0;i <1; i++) {
  queries.push((function(j){
    return function(callback) {
      collection.find(
    {value:"1"},

    function(err_positive, result_positive) {
       result_positive.count(function(err, count){
         console.log("Total matches: " + count);
         positives[j] = count;          
         callback();
       });
    }

      );
    }
  })(i));
}

async.parallel(queries, function(){
  // do the work with the results
} 
```

我没有得到什么是回调函数的部分它是如何定义的？在querys.push中的第二个，它传递函数（j）什么是j，这个（i）是什么

```
queries.push((function(j){})(i)); 
```

我很困惑这段代码是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:59:32.523

`tasks`该循环正在准备一系列与for几乎相同的函数[`async.parallel()`](https://github.com/caolan/async#parallel)。

在循环之后，鉴于它目前只迭代一次，`queries`将类似于：

```
var queries = [
    function (callback) {
        collection.find(
            // etc.
        );
    }
]; 
```

而且，对于每一次额外的迭代，`function (callback) { ... }`都会添加一个新的。

> 什么是回调函数它是如何定义的？

`callback`只是每个函数的命名参数。它的值将被定义`async.parallel()`为另一个`function`，当被调用时，它允许`async`知道每个任务何时完成。

> 在querys.push中的第二个，它传递函数（j）什么是j，这个（i）是什么
> 
> ```
> queries.push((function(j){})(i)); 
> ```

是`(function(j){})(i)`一个[立即调用函数表达式 (IIFE)](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)，`j`作为命名参数，它会立即使用`i`传递的参数调用，并返回一个`function (callback) {}`要`push`编辑的新函数`queries`：

```
queries.push(
    (function (j) {
        return function (callback) {
            // etc.
        };
    })(i)
); 
```

IIFE 的目的是创建一个[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)——一个带有局部变量的词法范围，它“*粘*`function`”在范围内定义的任何s 上。这允许每个`function (callback) {}`都有自己`j`的单个值`i`（因为随着循环的继续`i`，值将继续改变）。`for`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:22:40.363

回调是最酷的功能之一。回调只是另一个正常功能。您实际上可以将函数本身作为参数传递给另一个函数。说函数 foo() 做了一些事情。您可能希望在 foo() 执行完毕后立即执行其他操作。因此，为了实现这一点，您定义了一个函数 bar() 并将此函数作为参数传递给函数 foo()！

```
function foo(callback){
  // do something
  callback();
}

function bar(){
  // do something else
}

foo(bar());
//here we can see that a function itself is being passed as a param to function foo. 
```

如需更多了解，请[点击此处](http://www.theprojectspot.com/tutorial-post/nodejs-for-beginners-callbacks/4)的正确链接。

和

```
queries.push((function(j){})(i)); 
```

在 javascript 中，这是调用函数的另一种方式。

```
function(){
// do something.
}(); 
```

您实际上不需要定义函数名称，并且可以直接调用它而无需名称。你甚至可以将参数传递给它。

```
function(a){
alert(a)'
}(10); 
```

# mysql - 按日期+其他字段汇总和分组多个字段

> ID：14906807
> 
> 赞同：0
> 
> 时间：2013-02-16T04:04:50.107
> 
> 标签：mysql, select, group-by

我有一个包含 3 列的表格，如下所示。我想总结每种类型的成本（仅 0/1/2），然后按月份和年份（日期字段）对其进行分组，所有这些都使用 select 语句。

```
+------------+------+-------+
| DATE       | TYPE | COST  |
+------------+------+-------+
| Feb-1-2003 |  0   | 19.40 |
| Feb-5-2010 |  1   | 28.10 |
| Mar-3-2011 |  2   | 64.20 |
| Sep-8-2012 |  0   | 22.60 |
| Dec-6-2013 |  1   | 13.50 |
+------------+------+-------+ 
```

输出如下所示：

```
+----------+------------+------------+------------+
| PERIOD   | TYPE0      | TYPE1      | TYPE2      |
+----------+------------+------------+------------+
| Jan 2003 | 123123.12  | 23432.12   | 9873245.12 |
| Feb 2003 | 123123.12  | 23432.12   | 9873245.12 |
| Mar 2003 | 123123.12  | 23432.12   | 9873245.12 |
etc...
+----------+------------+------------+------------+ 
```

有人可以帮助这个选择语句吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T04:08:37.710

Mysql 不是为数据透视查询而设计的。最好用其他语言进行聚合.. 但这并不是说这是不可能的，但是：

```
SELECT
    CONCAT(MONTH(DATE), ' ', YEAR(DATE)) AS PERIOD,
    SUM(IF(TYPE = 0, COST, 0)) AS TYPE0,
    SUM(IF(TYPE = 1, COST, 0)) AS TYPE1,
    SUM(IF(TYPE = 2, COST, 0)) AS TYPE2
FROM
    t1
GROUP BY
    PERIOD 
```

# perl - Perl 类，Blessing Hashes 是什么？

> ID：14906814
> 
> 赞同：3
> 
> 时间：2013-02-16T04:06:04.973
> 
> 标签：perl

我不明白为什么 Perl 构造函数需要所有这些祝福，以及为什么它总是使用哈希来完成（显然可以使用其他变量类型）。

当我创建一个类的新实例时，构造函数返回对哈希的祝福引用有什么意义？我能理解“return (this);” 或类似的东西，但返回一些其他随机变量只会让我感到困惑（特别是当你应该使用哈希时）。

```
my ?var = new Test("foo");
package Test;
our $localvar;
sub new{
 localvar = $_[1];
} 
```

好的，所以我有这个基础课程。我可以在初始化时设置一个类变量，然后像 $var::localvar 一样使用它。但是要让它在 Perl 中实际编译和工作，我需要在“return bless {}, shift;”行中添加？？？

似乎这个散列被用作该类的实例，方法相当静态。但是您仍然可以拥有类变量。听起来您只是将数据对象链接到以该对象为参数的方法列表。但我不确定为什么每个教程都暗示你总是使用哈希，如果这就是发生的一切。而且我很困惑为什么你有这个哈希和你在课堂上声明的任何“我们的”，它们似乎是相互排斥的概念？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-16T04:16:26.840

> 听起来您只是将数据对象链接到以该对象为参数的方法列表。

是的，这正是 OO 的含义。您从构造函数返回的东西*是实例*。不像其他一些语言在幕后创建一个新的“对象实例”，并且你的构造函数只负责填充槽，在 Perl 中你的构造函数可以完成整个工作。`{}`创建对新匿名哈希的引用，该哈希将成为对象的存储空间，并且通过使用您的类名标记它，`bless`实际上将该引用*转换为对象。*

> 但我不确定为什么每个教程都暗示你总是使用哈希，如果这就是发生的一切。

类可以是*任何*类型的引用，但哈希引用是最有用和方便的，因为哈希具有命名槽，因此您可以通过名称引用对象的属性。有 globref 对象（文件句柄和套接字）、arrayref 对象（很少见，当作者非常关心速度和内存使用时，通常用于只有几个字段的对象）和 scalarref 对象（通常用于封装某些 C 库返回的指针）。但是 hashref 对象是“标准的”。

> 我可以在初始化时设置一个类变量，然后像 ?var::localvar 一样使用它。

但你为什么要？类变量几乎完全没用，除非你掌握了更基本、更有用的东西，否则没有理由去打扰它们。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-16T04:30:05.953

> 当我创建一个类的新实例时，构造函数返回对哈希的祝福引用有什么意义？

好吧，如果你没有返回你创建的对象，那将是一个相当无用的构造函数。

> 我能理解“return (this);” 或类似的规定

那么有什么困惑呢？这正是您应该返回的内容。（除了约定叫它`$self`。）

```
sub new {
    my ($class, ...) = @_;
    my $self = bless({}, $class);  # Or: my $self = $class->SUPER::new(...);
    $self->{attribute1} = ...;
    $self->{attribute2} = ...;
    return $self;
} 
```

> 似乎这个散列被用作该类的实例，

祝福哈希*是*该类的实例，也就是对象。

* * *

## 评论中的问题

> 为什么我必须 [do `my $self = bless({}, $class);`] 而不是仅仅引用类实例。像：`$self = bless($class)`

`{}`分配一个变量并将`bless`其与一个类相关联。创建对象的两个必要步骤。

通过将两者分开，您可以选择为您的对象使用不同的基本变量。例如，IO::Socket::INET 使用 glob 而不是散列。

> 但在我看来，任何人都会制作的大多数对象都不会使用哈希。散列是一种非常具体的数据结构，99% 的编码都不需要或没有帮助。

关键不是使用哈希表；而是使用哈希表。它是使用关联数组（其中每个元素都是一个属性）。

关联数组（哈希表或其他）在远远超过 1% 的编码中都是“需要和有用的”。

# .net - 可移植库中的异步编程

> ID：14906822
> 
> 赞同：3
> 
> 时间：2013-02-16T04:07:13.217
> 
> 标签：.net, async-await, portable-class-library

我对新的异步内容感到非常困惑。我有一个可移植库实现我的模型，其中包含一些具有虚拟功能的类，我希望在 ASP .NET、WPF、Windows Store、Silverlight 5 和 Windows Phone 8 中使用它们。它们可能针对 WCF 功能、CSharp SQLite，或者在平台中被覆盖- 本地文件内容的特定库。

既然同步编程在 Windows 应用商店世界中不受欢迎，我该如何设置它？我尝试在虚拟函数的可移植库中添加异步关键字等，但它说我没有必要的框架。如何在不重写的情况下重用这个库？OOP 编程现在完全死了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:35:36.077

VS 将很高兴地允许`async`以 .NET 4.5 和 Windows Store 为目标的可移植库。如果您需要其他平台（尤其是 .NET 4.0 和 Silverlight 5），那么您需要安装[Microsoft.Bcl.Async](http://nuget.org/packages/Microsoft.Bcl.Async)。

如果您需要参考，[我的 AsyncEx 库的源代码](http://nitoasyncex.codeplex.com/SourceControl/BrowseLatest)可用；核心程序集是一个依赖于 Microsoft.Bcl.Async 的可移植库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T06:20:49.253

我解决它的方法是使用我从以前版本改编的帮助类。基本上：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using Windows.UI.Core;
using Windows.UI.Xaml;

namespace JTModelsWinStore.Local
{
    public delegate void UseDataDelegate(DataCoordinator data);
    public delegate bool GetDataDelegate(DataCoordinator data);

    public class DataCoordinator
    {
        public DependencyObject Consumer;
        public GetDataDelegate GetDataFunction;
        public UseDataDelegate UseDataFunction;
        public bool GetDataSucceeded;
        public Exception ErrorException;
        public string ErrorMessage;

        public DataCoordinator(
            DependencyObject consumer,
            GetDataDelegate getDataFunction,
            UseDataDelegate useDataFunction)
        {
            Consumer = consumer;
            GetDataFunction = getDataFunction;
            UseDataFunction = useDataFunction;
            GetDataSucceeded = false;
            ErrorException = null;
            ErrorMessage = null;
        }

        public Task GetDataAsync()
        {
            GetDataSucceeded = false;

            Task task = Task.Factory.StartNew(() =>
            {
                if (GetDataFunction != null)
                {
                    try
                    {
                        GetDataSucceeded = GetDataFunction(this);
                    }
                    catch (Exception exception)
                    {
                        GetDataSucceeded = false;
                        ErrorException = exception;
                        ErrorMessage = exception.Message;
                    }
                }

                if (UseDataFunction != null)
                {
                    if (Consumer != null)
                    {
                        var ignored = Consumer.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
                        {
                            UseDataFunction(this);
                        });
                    }
                    else
                        UseDataFunction(this);
                }
            });
            return task;
        }
    }
} 
```

然后在 Windows 商店代码中：

```
private async void ItemView_ItemClick(object sender, ItemClickEventArgs e)
{
    DataCoordinator data = new DataCoordinator(this, Logon, LogonCompleted);
    await data.GetDataAsync();
}

private bool Logon(DataCoordinator data)
{
    LoggedOnUserID = ServiceClient.LogOn(UserName, Password);

    if (LoggedOnUserID == null)
    {
        UserName = "AnonymousUser";
        Password = "";

        if (!String.IsNullOrEmpty(ServiceClient.ErrorMessage))
            data.ErrorMessage = "Log on failed.";

        return false;
    }

    if (!String.IsNullOrEmpty(ServiceClient.ErrorMessage))
    {
        data.ErrorMessage = ServiceClient.ErrorMessage;
        return false;
    }

    return true;
}

private void LogonCompleted(DataCoordinator data)
{
    if (data.GetDataSucceeded && LoggedOnUserID != null)
        pageTitle.Text = "Logged On";
    else
        pageTitle.Text = "LogOn Failed";
} 
```

我为助手提供了两个功能，一个用于获取数据（慢速），另一个用于处理 UI 中的数据。我知道我可以在两个嵌套的 lambdas 中做到这一点，但我喜欢隐藏两个 lambdas，这对于像我这样的老前辈来说更舒服。

为了他人的利益和我自己的利益，请随时批评它。

# ruby - 在 JRuby 分析中花费大量时间在 Thread#initialize 和 Thread#join 中意味着什么？

> ID：14906826
> 
> 赞同：2
> 
> 时间：2013-02-16T04:07:54.180
> 
> 标签：ruby, multithreading, profiling, jruby

我正在尝试使用 JRuby 的内置分析器来分析应用程序。

大部分时间都被占用了`ClassIsOfInterest.method_that_is_of_interest`，而后者又占用了大部分时间`Thread#initialize`并且`Thread#join`

```
 total        self    children       calls  method
----------------------------------------------------------------
     31.36        0.02       31.35        4525  Array#each
     31.06        0.00       31.06           2  Test::Unit::RunCount.run_once
     31.06        0.00       31.06           1  Test::Unit::RunCount.run
     31.06        0.00       31.06           1  MiniTest::Unit#run
     31.06        0.00       31.05           1  MiniTest::Unit#_run
     31.01        0.00       31.01        2219  Kernel.send
     31.00        0.00       31.00           1  MiniTest::Unit#run_tests
     31.00        0.00       31.00           1  MiniTest::Unit#_run_anything
     30.99        0.00       30.99           1  Test::Unit::Runner#_run_suites
     30.99        0.00       30.99           5  MiniTest::Unit#_run_suite
     30.99        0.00       30.98       21629  Array#map
     30.98        0.00       30.98           1  Test::Unit::TestCase#run
     30.98        0.00       30.98           1  MiniTest::Unit::TestCase#run
     30.98        0.00       30.98         659  BasicObject#__send__
     30.98        0.00       30.98           1  MyTestClass#my_test_method
     30.80        0.00       30.80          18  Enumerable.each_with_index
     30.77        0.00       30.77          15  MyTestHelper.generate_call_parser_based_on_barcoded_sequence
     30.26        0.00       30.25        4943  Class#new_proxy
     26.13        0.00       26.13          15  MyProductionClass1#my_production_method1

<snip boring methods with zero self time>

     24.27        0.00       24.27          15  ClassIsOfInterest.method_that_is_of_interest
     13.71        0.01       13.71         541  Enumerable.map
     13.48        0.86       12.63          30  Range#each
     12.62        0.22       12.41         450  Thread.new
     12.41       12.41        0.00         450  Thread#initialize
     10.78       10.78        0.00         450  Thread#join
      4.03        0.12        3.91         539  Kernel.require
      3.34        0.00        3.34         248  Kernel.require
      2.49        0.00        2.49          15  MyTestFixture.create_fixture

<snip boring methods with small total times> 
```

的每次调用`ClassIsOfInterest.method_that_is_of_interest`都会创建 30 个线程，这可能是矫枉过正，但我​​认为它不应该降低性能。当我每次调用只创建三个线程时，我得到了

```
 23.16        0.00       23.15          15  ClassIsOfInterest.method_that_is_of_interest
 22.73       22.73        0.00          45  Thread#join
  4.18        0.08        4.10         539  Kernel.require
  3.56        0.00        3.56         248  Kernel.require
  2.78        0.00        2.78          15  MyTestFixture.create_fixture 
```

`Thread#initialize`（在第一个配置文件中）做大的时间值并`Thread#join`表明负责线程的代码需要一段时间，或者仅仅是在线程中执行的代码需要一段时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:55:09.907

您看到的原因`Thread#join`是您的主线程花费大量时间等待其他线程完成。大部分时间都`method_that_is_of_interest`花在阻塞上，`Thread#join`因为它没有做任何其他工作。我不会太担心——配置文件只是说你的一个线程阻塞了其他线程正在做的事情。在这种情况下，更好的性能测量是总运行时间，使用不同数量的线程运行代码并查看最佳点在哪里。

`Thread.new`/出现的原因`Thread#initialize`是线程是创建昂贵的对象。如果您经常调用此方法并且每次我建议您查看 Java 的[Executors](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html) API 时都会创建所有这些线程。一次创建一个线程池`Executors`（当您的应用程序启动时）并将所有任务提交到池中而不是创建新线程（您可以使用[ExecutorCompletionService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html)等待所有任务完成，或者只调用您提交时获得`#get`的实例`FutureTask`你的任务）。

# jquery - 单击事件未触发 - AJAX jQuery

> ID：14906828
> 
> 赞同：2
> 
> 时间：2013-02-16T04:08:28.143
> 
> 标签：jquery, ajax, jquery-mobile, anchor

我正在使用数据文件锚标记将用户保留在 Web 应用程序中。

示例 HTML

```
<div class="products_content">    
<a data-file="salt.html?v=1"><img src="assets/images/template/salt.jpg" width="125" height="125" /></a> 
```

示例js

```
$('.products_content a').on('click', function(){
    changePage( $(this).attr('data-file') );
}); 
```

click 事件没有触发，我不知道为什么，因为我使用非常相似的 Nav 代码并且它工作正常。

任何帮助将不胜感激。

这是我的changePage函数，不确定是否需要。

```
function changePage(fileName) {
    $('.content_container').animate({
        opacity: 0
    }, 500, function () {
        $('.content_loading_container').load('assets/content/' + fileName, function () {
            $('.content_container').delay(250).animate({
                opacity: 1
            }, 500);
        });
        if (fileName == 'home.html?v=1') {
            $('.page').addClass('home');
        } else {
            $('.page').removeClass('home');
        }
        if (fileName == 'services.html?v=1') {
            $('.content_container').addClass('services');
        } else {
            $('.content_container').removeClass('services');
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:49:25.133

1.  在 Sample HTML 中，没有**</div>**，这可能是一个错字；
2.  您可以尝试委托：

    ```
    $(document).delegate('.products_content a', 'click', function(){
        changePage( $(this).attr('data-file') );
        return false;
    }) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T04:18:17.590

正如你所拥有的那样，你的代码应该可以工作。

```
<div class="products_content">    
<a data-file="salt.html?v=1"><img src="assets/images/template/salt.jpg" width="125" height="125" /> </a>

$('.products_content a').on('click', function(){
    alert('click');
}); 
```

这是[一个小提琴。](http://jsfiddle.net/6CNtj/)

正如我在上面所做的那样，将您的 changePage() 代码替换为警报，以确定是单击失败还是 changePage() 中的某些内容失败了。

# javascript - 如何从 Javascript 解析外部文件中的 html

> ID：14906829
> 
> 赞同：4
> 
> 时间：2013-02-16T04:08:30.203
> 
> 标签：javascript, jquery, ajax

我觉得我应该知道这一点，但是当我坐下来尝试从我的 Javascript 访问一个 html 文件时，我真的不知道从哪里开始。我正在使用 jQuery，所以我只想使用 jQuery.ajax() 吗？

外部 html 是一个具有各种溢价值的表，存储在同一个域但在单独的目录中。当用户在表单中输入他们之前的出生年份并选择他们是男性还是女性以及吸烟者还是非吸烟者时，我会根据他们的年龄返回特定值。

在下表中，如果他们是 21 岁、男性、非吸烟者，我想从 #id21 行返回 mns 单元格中的值。

```
<table id="premiumRateTable" cellpadding="0" cellspacing="0" border="0">
    <thead>
        <tr>
            <th id="age">Age Next Birthday</th>
            <th id="cover">Default Cover</th>
            <th id="mns">Male Non-smoker</th>
            <th id="ms">Male Smoker</th>
            <th id="fns">Female Non-smoker</th>
            <th id="fs">Female Smoker</th>
        </tr>
    </thead>
    <tbody>
        <tr id="id20">
            <td headers="age">20</td>
            <td headers="cover">$100,000</td>
            <td headers="mns">$108.99</td>
            <td headers="ms">$154.55</td>
            <td headers="fns">$44.31</td>
            <td headers="fs">$68.61</td>
        </tr>
        <tr id="id21">
            <td headers="age">21</td>
            <td headers="cover">$150,000</td>
            <td headers="mns">$160.81</td>
            <td headers="ms">$229.15</td>
            <td headers="fns">$58.16</td>
            <td headers="fs">$77.48</td>
        </tr>
        <tr id="id22">
            <td headers="age">22</td>
            <td headers="cover">$150,000</td>
            <td headers="mns">$139.37</td>
            <td headers="ms">$199.167</td>
            <td headers="fns">$58.28</td>
            <td headers="fs">$72.89</td>
        </tr>
        <tr id="id23">
            <td headers="age">23</td>
            <td headers="cover">$150,000</td>
            <td headers="mns">$128.64</td>
            <td headers="ms">$183.59</td>
            <td headers="fns">$56.28</td>
            <td headers="fs">$72.89</td>
        </tr>
        <tr id="id24">
            <td headers="age">24</td>
            <td headers="cover">$150,000</td>
            <td headers="mns">$121.94</td>
            <td headers="ms">$172.87</td>
            <td headers="fns">$58.29</td>
            <td headers="fs">$79.90</td>
        </tr>
        <tr id="id25">
            <td headers="age">25</td>
            <td headers="cover">$150,000</td>
            <td headers="mns">$112.56</td>
            <td headers="ms">$158.13</td>
            <td headers="fns">$61.11</td>
            <td headers="fs">$84.91</td>
        </tr>

    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T04:11:29.627

加载表格一次 ( `$(document).ready()`) 并将其添加到正文末尾的不可见元素中。

```
var dummyDiv = $("<div id='dummyDiv'/>").css("display","none");
dummyDiv.load("otherpage.html #id"+age);
dummyDiv.css("display","none");
$("body").append(dummyDiv); 
```

然后您可以从任何地方运行此代码以从该表中获取值。

```
var dummyDiv = $("#dummyDiv");
var valYouWant = "mns"; //example value to grab
var value = dummyDiv.find('td[headers="'+valYouWant+'"]').text();
//do whatever you'd like with 'value' 
```

# scala - 在 Scala 中导入特定的方法签名

> ID：14906830
> 
> 赞同：0
> 
> 时间：2013-02-16T04:08:33.937
> 
> 标签：scala, importerror, ambiguous

有没有办法导入特定的方法签名？

```
def test() {
  lazy val log = LoggerFactory.getLogger("AndroidProxy")
  import log.{error, debug, info, trace}

  trace("This is a test")
  trace "This is also"   // <- This line will not compile 
} 
```

也许这是不可能的，但我的主要目标是在不添加新方法的情况下允许这样做。我试过这些无济于事

```
import log.{error => error(_:String)}
import log.{error(x: String) => error(x)} 
```

我想主要的挑战是所有的方法都需要一个参数。我可以在没有 () 的情况下调用无参数方法，并且我可以创建一个省略 . 的方法调用链，例如`foo getX toString`，但我不知道如何自动创建一个 arity-1 调用

这是对[这个问题](https://stackoverflow.com/questions/14905834/scala-call-logging-method-without-log-xxxx/14905931#14905931)的跟进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T04:23:04.987

不，没有办法导入特定的方法签名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T20:42:28.410

代码的问题：

```
trace "This is also"   // <- This line will not compile 
```

*并不是*说您以某种方式导入了太多的重载变体——`trace`而是您不能以这种方式使用 Scala 的中缀表示法。像这样的表达式：

```
e op 
```

[被解释为“后缀操作”（参见Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的第 6.12.2 节），相当于调用：

```
e.op 
```

所以你的代码相当于：

```
trace."This is also" 
```

这当然是一个编译错误。

如果您改为使用形式的“Infix Operation” （ [Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)`e1 op e2`的第 6.12.3 节），那么即使方法重载也不会出现任何问题：

```
scala> class Logger { def trace(s: String) = "1arg"; def trace(i: Int, s: String) = "2arg" }
defined class Logger

scala> val log = new Logger
log: Logger = Logger@63ecceb3

scala> log trace "This is also"
res0: String = 1arg 
```

# ruby-on-rails - 发送 ActionMailer 电子邮件时返回根 url

> ID：14906831
> 
> 赞同：0
> 
> 时间：2013-02-16T04:08:34.323
> 
> 标签：ruby-on-rails, url, actionmailer

我正在尝试设置我的 ActionMailer，以便它可以读取发布它的 URL。部署此应用程序时，它可能最终位于具有不同域名的许多不同服务器上。我不想让用户进入代码并强制静态输入 URL，而是希望重置密码 url 包含生成它的域（包括 http:// 或 https://）。

我已经尝试过`::Rails.root`，`request.host_with_port` 并且`::Rails.root_path`在 Mailer 中，但没有一个产生结果。`request.host_with_port`生成未定义的方法错误。

```
 def reset_password_email(user)
    @user = user
    @url  = "#{::Rails.root_path}/password_resets/#{user.reset_password_token}/edit"
    mail(:to => user.email,
         :subject => "Your password has been reset")
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:15:05.633

我假设您`reset_password_email(user)`从您的一个应用程序控制器中调用。

您可以更新此方法定义并将当前主机和端口与用户一起发送给它：

```
def reset_password_email(user, request)
  @user = user
  @url  = "#{request.protocol}#{request.host_with_port}/password_resets/#{user.reset_password_token}/edit"
  mail(:to => user.email, :subject => "Your password has been reset")
end 
```

不要忘记更新控制器的代码。

# sql-server - SQL Server 流量字节码问题

> ID：14906834
> 
> 赞同：-1
> 
> 时间：2013-02-16T04:09:38.663
> 
> 标签：sql-server

通常 SQL Server 事务使用这样的多字节代码。

```
11:29:52.925182 IP 192.168.10.9.3862 > 192.168.10.5.1433: P 4117707564:4117707692(128) ack 672638990 win 6432 <nop,nop,timestamp 771920 264690946>
0x0000:  4500 00b4 7c2a 4000 4006 28bb c0a8 0a09  E...|*@.@.(.....
0x0010:  c0a8 0a05 0f16 0599 f56f 3b2c 2817 a80e  .........o;,(...
0x0020:  8018 1920 9605 0000 0101 080a 000b c750  ...............P
0x0030:  0fc6 dd02 0101 0080 0000 0100 5300 4500  ............S.E.
0x0040:  4c00 4500 4300 5400 2000 4300 4f00 5500  L.E.C.T...C.O.U.
0x0050:  4e00 5400 2800 2a00 2900 2000 4600 5200  N.T.(.*.)...F.R.
0x0060:  4f00 4d00 2000 7300 6500 6e00 6400 5f00  O.M...s.e.n.d._.
0x0070:  7200 6500 7300 7500 6c00 7400 2000 2800  r.e.s.u.l.t...(.
0x0080:  5200 4500 4100 4400 5000 4100 5300 5400  R.E.A.D.P.A.S.T.
0x0090:  2900 2000 5700 4800 4500 5200 4500 2000  )...W.H.E.R.E...
0x00a0:  5200 4500 5300 5500 4c00 5400 3d00 2700  R.E.S.U.L.T.=.'.
0x00b0:  5300 2700                                S.'. 
```

但是我昨天发现sql Server有时会像这样使用单字节。

```
11:29:31.688331 IP 192.168.10.8.3989 > 192.168.10.5.1433: P 3116352293:3116352333(40) ack 2215594188 win 11788 <nop,nop,timestamp 750683 264691313>
0x0000:  4500 005c fd77 4000 4006 a7c6 c0a8 0a08  E..\.w@.@.......
0x0010:  c0a8 0a05 0f95 0599 b9bf c325 840f 48cc  ...........%..H.
0x0020:  8018 2e0c 95ac 0000 0101 080a 000b 745b  ..............t[
0x0030:  0fc6 de71 0101 0028 0000 0100 5345 4c45  ...q...(....SELE
0x0040:  4354 2043 4f55 4e54 2028 202a 2920 4652  CT.COUNT.(.*).FR
0x0050:  4f4d 204e 4f44 4543 4f44 4520            OM.NODECODE. 
```

我正在为某种 DAM 解决方案公司工作，这导致了一些监控问题。我修改了我的程序，我需要测试。但我不知道如何制造同样的情况。

有人可以让我知道如何配置 SQL Server 客户端或服务器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T06:16:36.067

用于在客户端和服务器之间进行通信的协议称为[Tabular Data Stream](http://en.wikipedia.org/wiki/Tabular_Data_Stream)：

> 表格数据流 (TDS) 是一种应用层协议，用于在数据库服务器和客户端之间传输数据。它最初是由 Sybase Inc. 于 1984 年为其 Sybase SQL Server 关系数据库引擎设计和开发的，后来由 Microsoft 在 Microsoft SQL Server 中设计和开发。

与其尝试对协议进行逆向工程，不如 a) 使用在您之前的其他人的工作（例如 freetds），或 b) 遵循[*规范*](http://msdn.microsoft.com/en-us/library/cc448435.aspx)，而不是按照规范进行编码具体*实施*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T04:19:04.903

在大多数情况下，像 SQL Server 这样的软件使用的网络协议与任何人无关。这是一个内部实现细节，他们可以随时以任何理由自由更改，或者仅仅因为他们喜欢它。

我希望您有充分的理由需要关心 SQL Server 客户端选择用来与 SQL Server 服务器通信的协议的细节。

毕竟，如果客户端很高兴与服务器交谈，那么您当然没有理由抱怨它。

# linux - Bash 空二元运算符

> ID：14906835
> 
> 赞同：1
> 
> 时间：2013-02-16T04:09:38.893
> 
> 标签：linux, bash, binary-operators

我最近进行的一项测试对以下`bash`命令的输出有疑问：

```
var=; [ -n $var ]; echo $?; [ -z $var ]; echo $? 
```

结果是`0`and `0`，表示两个一元运算符的返回码都没有错误。这意味着`$var`解析为`null`（空）和“非空”（非空），对吗？

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T04:14:32.257

不，这意味着它无法`[`修复。在这两种情况下`$var`，都没有计算结果，并且命令只是分别执行`[ -n ]`和`[ -z ]`，这两种结果都为真。如果要测试变量本身的值，则必须引用它以使其正确处理。

```
$ var=; [ -n "$var" ]; echo $?; [ -z "$var" ]; echo $?
1
0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T04:18:20.407

您需要将 $var 括起来：

```
$ [ -n "$var" ]; echo $?
1 
```

请记住，右方括号只是语法糖：您不需要它。这意味着您的线路：

```
$ [ -n $var ]; echo $? 
```

将扩展为（因为 $var 为空）：

```
$ [ -n  ]; echo $? 
```

上面问：“字符串']'是非空的吗？” 答案是肯定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T04:15:01.867

确实令人惊讶。如果你用 bashism 语法尝试同样的方法`[[`，你会得到`1`和`0`作为结果。我认为这是一个错误。

```
var=; [[ -n $var ]]; echo $?; [[ -z $var ]]; echo $? 
```

或者，正如 Ignacio 指出的那样，事实上我一直在直觉地做防御性编码和引用：

```
var=; [[ -n "$var" ]]; echo $?; [[ -z "$var" ]]; echo $? 
```

`[`这种行为让我感到惊讶，因为它是内置的：

```
$ type [
[ is a shell builtin 
```

* * *

只是做了一点测试，系统命令的`[`行为与内置命令相同。所以可能它的兼容性有问题：

```
var=; /usr/bin/\[ -n $var ]; echo $?; /usr/bin/\[ -z $var ]; echo $? 
```

# cocoa - Cocoa NSScrollView 从中心开始

> ID：14906837
> 
> 赞同：1
> 
> 时间：2013-02-16T04:10:05.947
> 
> 标签：cocoa

我的主窗口中有一个 NSScrollView 项目。每当我启动程序时，滚动视图中都会有文本，它从中心开始。用户不应该从顶部开始阅读，但为什么应用程序会在中心启动它？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:59:02.870

如果您没有正确设置视图，则可能会发生这种情况。
以下是我掌握的信息： 1：您使用 Interface Builder 来设置视图。
2：您正在使用 NSTextView
3：您用于更改文本的代码是：
[[_chapterContent insertText:[Book objectForKey:bookAndChapters]];
4：当您使用 NSTextView 时，我们不会处理由翻转坐标引起的问题。

我不确定您是否应该为此任务使用 insertText。至少，你可以使用这样的东西......

```
range.location = 0;
range.length = 0;
[textView setSelectedRange:range]; 
```

...设置插入符号的位置。

然后你可以做一个...

```
[textView scrollRangeToVisible:range]; 
```

...如果你喜欢。

注意：您可以使用长度为 0 和 [textStorage length] 内的任何位置的 setSelectedRange 来定位插入符号。

- 让我知道这是否会产生您需要的改变。

我建议使用...

```
textStorage = [textView textStorage];
range.location = 0;
range.length = [textStorage length];
if([self shouldChangeTextInRange:range replacementString:string])
{
    [textStorage beginEditing];
    [textStorage replaceCharactersInRange:range withAttributedString:attrStr];
    [textStorage endEditing];        
} 
```

...用属性字符串替换文本。如果您不需要属性字符串，可以使用更简单的方法：

```
 [textStorage replaceCharactersInRange:range withString:str]; 
```

多年来，它对我（和其他许多人）都很有效；这是更改 NSTextView 内容的推荐方法。- 如果你只想用字符串替换整个内容，你可以使用

```
[textView setString:string]; 
```

# android - 使用文本文件和 XML 定义的字符串来填充列表

> ID：14906841
> 
> 赞同：1
> 
> 时间：2013-02-16T04:11:11.487
> 
> 标签：android, listview, arrays

我正在编写一个包含一些简单视图的应用程序；首先是两个按钮。每个按钮都指向一张地图，从这张地图中，有一个按钮可以打开网站上的建筑物列表。从这里，用户将能够选择建筑物并查看其详细信息（实际上很像联系人列表）。到目前为止，我可以通过创建字符串数组来填充列表视图以直接在活动中填充它，如下所示：

```
public class BuildingsActivity extends ListActivity {

static final String[] buildings=new String[]{
    "Building 1",
    "Building 2",
    "Building 3",
    "Building 4",
    "Building 5"
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_buildings);
    // Show the Up button in the action bar.
    getActionBar().setDisplayHomeAsUpEnabled(true);
    setListAdapter(new ArrayAdapter<String>(this,           android.R.layout.simple_list_item_1,buildings));
} 
```

这对于一个 5 项的列表非常有效，但在它的最终形式中，列表可能包含多达一百个建筑物，我有两个问题：1) 一个包含 100 项的长字符串数组看起来真的很恶心在这样的代码中定义 2）如果必须事先生成如此大的字符串值列表，我担心应用程序打开活动需要多长时间

为了避免这种情况，我想在 strings.xml 文件中定义这个字符串数组，并将字符串分配给列表活动的相应布局 XML 中的列表布局。但是，到目前为止，这似乎不起作用。没有错误，但 android:entries 命令根本看不到影响布局。这是 XML。如果有人知道以这种方式填充列表，我将不胜感激。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".BuildingsActivity" >
    <ListView
          android:id="@android:id/list"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:entries="@array/buildings">
    </ListView>

</RelativeLayout> 
```

我的另一种选择是从文本文件中检索它，我将不得不这样做来构建细节（因为文本量太大而无法保存为字符串）但想要避免列表。诚然，我还没有深入研究过这条路线（因为我还没有真正想使用它，而且根据我在其他论坛上看到的内容，这看起来很困难，但如果有很多人支持这种方法，那么我肯定会感谢使用它的任何建议。

如果其他线程中已经涵盖了这些内容，请原谅我。我确实搜索过类似的主题，但似乎没有人想以这种方式填充列表，而且他们的问题中的很多语言都让我头疼（我很新……这是我的第一个真正的应用程序，除了已经完成开发者网站上的一些教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:20:06.293

Java`ArrayList`实现了该`Serializable`接口，它允许您使用函数`writeObject`和`readObject`. [这个页面](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)应该足以让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T05:04:27.473

如果您想从资源文件中填充 listView，您只需在代码中使用它：

```
String[] values = getResources().getStringArray(R.array.<input_file>); 
```

一旦加载了值，您只需将其分配给 ArrayAdapter，如下所示：

```
adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, values);
setListAdapter(adapter); 
```

第二个参数是安卓 SDK 的预定义布局，您可以使用自己的布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T04:25:41.830

如果您的 String[] 的上限为 100，我认为仅生成数组并将其传递给适配器不会有问题。至于您对代码看起来很糟糕的担忧，您是否考虑过将这些信息存储在数据库中然后请求它？例如，您可以拥有一个 Building Entity，其中包含其所有信息，并使用 OrmLite 将其保存到 MySQL。[http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_1.html#SEC1](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_1.html#SEC1)然后你可以写一个getter而不是返回一个数组表示来避免丑陋的代码。

# javascript - 如何在 Express 中使用 Underscore 模板而不是 Jade？

> ID：14906846
> 
> 赞同：7
> 
> 时间：2013-02-16T04:12:15.707
> 
> 标签：javascript, node.js, express, underscore.js, pug

我不想使用 Express 默认自带的 Jade 模板引擎。我尝试按照本指南进行操作，但失败了：

[http://blog.luksidadi.com/expressjs-underscore-template/](http://blog.luksidadi.com/expressjs-underscore-template/)

有问题的错误是：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: callback function required
    at Function.engine (/home/me/blog/node_modules/express/lib/application.js:173:38)
    at Object.<anonymous> (/home/tk/blog/app.js:28:5)
    at Module._compile (module.js:432:26)
    at Object..js (module.js:450:10)
    at Module.load (module.js:351:31)
    at Function._load (module.js:310:12)
    at Array.0 (module.js:470:10)
    at EventEmitter._tickCallback (node.js:192:40) 
```

当我尝试使用以下命令启动服务器时，我得到了这个：

```
node app.js 
```

如何解决这个问题？

**应用程序.js：**

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  //app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

// Add these lines to register underscore template
var _ = require('underscore');
app.engine('.html', {
  compile: function(str, options){
    var compiled = require('underscore').template(str);
    return function(locals) {
        return compiled(locals);
    };
  }
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

**路线/index.js：**

```
/*
 * GET home page.
 */

exports.index = function(req, res){
  res.render('index.html', { title: 'Express' });
}; 
```

**布局.html：**

```
< html >
  < head >
    < title ><%=title%>< /title >
  < /head >
  < body >
  <%=body%>
  < /body >
< /html > 
```

**索引.html：**

```
Hello world 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T04:36:56.223

使用[consolidate.js](https://github.com/visionmedia/consolidate.js)将 Underscore 的模板函数转换为接受 Express 在 3.x 中要求的格式`(path[, locals], callback)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-17T14:11:00.427

```
var cons = require('consolidate'); 
```

// 查看引擎设置

```
app.engine('html',cons.underscore);
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'html'); 
```

在终端

```
npm install consolidate --save 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T15:45:20.583

首先，您`app.engine`使用扩展名和对象进行调用，而它需要一个函数作为第二个参数（请参阅[源文档](https://github.com/visionmedia/express/blob/master/lib/application.js#L156)）。

该函数有 3 个参数：文件路径、选项和回调。

正如[文档](https://github.com/visionmedia/express/blob/master/lib/application.js#L160)中所写，建议将其`consolidate.js`用作帮助程序来使用不表达友好的模板引擎。

`consolidate.js`这里引用了它的[README](https://github.com/visionmedia/consolidate.js#express-3x-example)并适应使用下划线的简单集成：

```
// assign the swig engine to .html files
app.engine('html', cons.underscore);

// set .html as the default extension 
app.set('view engine', 'html'); 
```

另外，我不知道如何在 Express 下使用下划线处理您的 layout.html，我认为这不可能开箱即用。

# java - 如果这段代码优化？

> ID：14906857
> 
> 赞同：-3
> 
> 时间：2013-02-16T04:14:53.213
> 
> 标签：java, performance

我需要改进这段代码，很重，我没有找到另一种方法来创建

所有条件都需要验证，如果条件为真并不重要，必须继续寻找其他条件。

对不起我的英语谷歌翻译

```
if (skill.getId() == 233 && getActiveClassId() == 55 || getActiveClassId() == 46 || getActiveClassId() == 2 || getActiveClassId() == 3 || getActiveClassId() == 57 || getActiveClassId() == 117 || getActiveClassId() == 113 || getActiveClassId() == 88 || getActiveClassId() == 89 || getActiveClassId() == 118 || getActiveClassId() == 16 || getActiveClassId() == 30 || getActiveClassId() == 17 || getActiveClassId() == 43 || getActiveClassId() == 97 || getActiveClassId() == 105 || getActiveClassId() == 98 || getActiveClassId() == 112 || getActiveClassId() == 51 || getActiveClassId() == 52 || getActiveClassId() == 116 || getActiveClassId() == 116 || getActiveClassId() == 28 || getActiveClassId() == 41 || getActiveClassId() == 14 || getActiveClassId() == 104 || getActiveClassId() == 111 || getActiveClassId() == 96) {
    removeSkillById(233); // Light Armor
} else {
    // Nothing...
}
if (skill.getId() == 227 && getActiveClassId() == 36 || getActiveClassId() == 9 || getActiveClassId() == 37 || getActiveClassId() == 23 || getActiveClassId() == 24 || getActiveClassId() == 8 || getActiveClassId() == 48 || getActiveClassId() == 108 || getActiveClassId() == 92 || getActiveClassId() == 109 || getActiveClassId() == 101 || getActiveClassId() == 102 || getActiveClassId() == 93 || getActiveClassId() == 114 || getActiveClassId() == 16 || getActiveClassId() == 30 || getActiveClassId() == 17 || getActiveClassId() == 43 || getActiveClassId() == 97 || getActiveClassId() == 105 || getActiveClassId() == 98 || getActiveClassId() == 112 || getActiveClassId() == 51 || getActiveClassId() == 52 || getActiveClassId() == 115 || getActiveClassId() == 116 || getActiveClassId() == 28 || getActiveClassId() == 41 || getActiveClassId() == 14 || getActiveClassId() == 104 || getActiveClassId() == 111 || getActiveClassId() == 96) {
    removeSkillById(227); // Light Armor
} else {
    // Nothing...
}
if (skill.getId() == 236 && getActiveClassId() == 36 || getActiveClassId() == 9 || getActiveClassId() == 37 || getActiveClassId() == 23 || getActiveClassId() == 24 || getActiveClassId() == 8 || getActiveClassId() == 48 || getActiveClassId() == 108 || getActiveClassId() == 92 || getActiveClassId() == 109 || getActiveClassId() == 101 || getActiveClassId() == 102 || getActiveClassId() == 93 || getActiveClassId() == 114 || getActiveClassId() == 55 || getActiveClassId() == 46 || getActiveClassId() == 2 || getActiveClassId() == 3 || getActiveClassId() == 57 || getActiveClassId() == 117 || getActiveClassId() == 113 || getActiveClassId() == 88 || getActiveClassId() == 89 || getActiveClassId() == 118 || getActiveClassId() == 51 || getActiveClassId() == 52 || getActiveClassId() == 115 || getActiveClassId() == 116 || getActiveClassId() == 28 || getActiveClassId() == 41 || getActiveClassId() == 14 || getActiveClassId() == 104 || getActiveClassId() == 111 || getActiveClassId() == 96) {
    removeSkillById(236); // Light Armor
} else {
    // Nothing...
}
if (skill.getId() == 252 && getActiveClassId() == 36 || getActiveClassId() == 9 || getActiveClassId() == 37 || getActiveClassId() == 23 || getActiveClassId() == 24 || getActiveClassId() == 8 || getActiveClassId() == 48 || getActiveClassId() == 108 || getActiveClassId() == 92 || getActiveClassId() == 109 || getActiveClassId() == 101 || getActiveClassId() == 102 || getActiveClassId() == 93 || getActiveClassId() == 114 || getActiveClassId() == 55 || getActiveClassId() == 46 || getActiveClassId() == 2 || getActiveClassId() == 3 || getActiveClassId() == 57 || getActiveClassId() == 117 || getActiveClassId() == 113 || getActiveClassId() == 88 || getActiveClassId() == 89 || getActiveClassId() == 118 || getActiveClassId() == 16 || getActiveClassId() == 30 || getActiveClassId() == 17 || getActiveClassId() == 43 || getActiveClassId() == 97 || getActiveClassId() == 105 || getActiveClassId() == 98 || getActiveClassId() == 112 || getActiveClassId() == 28 || getActiveClassId() == 41 || getActiveClassId() == 14 || getActiveClassId() == 104 || getActiveClassId() == 111 || getActiveClassId() == 96) {
    removeSkillById(252); // Light Armor
} else {
    // Nothing...
}
if (skill.getId() == 258 && getActiveClassId() == 36 || getActiveClassId() == 9 || getActiveClassId() == 37 || getActiveClassId() == 23 || getActiveClassId() == 24 || getActiveClassId() == 8 || getActiveClassId() == 48 || getActiveClassId() == 108 || getActiveClassId() == 92 || getActiveClassId() == 109 || getActiveClassId() == 101 || getActiveClassId() == 102 || getActiveClassId() == 93 || getActiveClassId() == 114 || getActiveClassId() == 55 || getActiveClassId() == 46 || getActiveClassId() == 2 || getActiveClassId() == 3 || getActiveClassId() == 57 || getActiveClassId() == 117 || getActiveClassId() == 113 || getActiveClassId() == 88 || getActiveClassId() == 89 || getActiveClassId() == 118 || getActiveClassId() == 16 || getActiveClassId() == 30 || getActiveClassId() == 17 || getActiveClassId() == 43 || getActiveClassId() == 97 || getActiveClassId() == 105 || getActiveClassId() == 98 || getActiveClassId() == 112 || getActiveClassId() == 51 || getActiveClassId() == 52 || getActiveClassId() == 115 || getActiveClassId() == 116) {
    removeSkillById(258); // Light Armor
} else {
    // Nothing...
}
if (skill.getId() == 231 && getActiveClassId() == 6 || getActiveClassId() == 5 || getActiveClassId() == 33 || getActiveClassId() == 20 || getActiveClassId() == 91 || getActiveClassId() == 90 || getActiveClassId() == 106 || getActiveClassId() == 99 || getActiveClassId() == 51 || getActiveClassId() == 52 || getActiveClassId() == 115 || getActiveClassId() == 116 || getActiveClassId() == 17 || getActiveClassId() == 98) {
    removeSkillById(231); // Heavy Armor
} else {
    // Nothing...
}
if (skill.getId() == 232 && getActiveClassId() == 55 || getActiveClassId() == 46 || getActiveClassId() == 2 || getActiveClassId() == 3 || getActiveClassId() == 57 || getActiveClassId() == 117 || getActiveClassId() == 113 || getActiveClassId() == 88 || getActiveClassId() == 89 || getActiveClassId() == 118 || getActiveClassId() == 51 || getActiveClassId() == 52 || getActiveClassId() == 115 || getActiveClassId() == 116 || getActiveClassId() == 17 || getActiveClassId() == 98) {
    removeSkillById(232); // Heavy Armor
} else {
    // Nothing...
}
if (skill.getId() == 253 && getActiveClassId() == 55 || getActiveClassId() == 46 || getActiveClassId() == 2 || getActiveClassId() == 3 || getActiveClassId() == 57 || getActiveClassId() == 117 || getActiveClassId() == 113 || getActiveClassId() == 88 || getActiveClassId() == 89 || getActiveClassId() == 118 || getActiveClassId() == 6 || getActiveClassId() == 5 || getActiveClassId() == 33 || getActiveClassId() == 20 || getActiveClassId() == 91 || getActiveClassId() == 90 || getActiveClassId() == 106 || getActiveClassId() == 99 || getActiveClassId() == 17 || getActiveClassId() == 98) {
    removeSkillById(253); // Heavy Armor
} else {
    // Nothing...
}
if (skill.getId() == 259 && getActiveClassId() == 55 || getActiveClassId() == 46 || getActiveClassId() == 2 || getActiveClassId() == 3 || getActiveClassId() == 57 || getActiveClassId() == 117 || getActiveClassId() == 113 || getActiveClassId() == 88 || getActiveClassId() == 89 || getActiveClassId() == 118 || getActiveClassId() == 6 || getActiveClassId() == 5 || getActiveClassId() == 33 || getActiveClassId() == 20 || getActiveClassId() == 91 || getActiveClassId() == 90 || getActiveClassId() == 106 || getActiveClassId() == 99 || getActiveClassId() == 51 || getActiveClassId() == 52 || getActiveClassId() == 115 || getActiveClassId() == 116) {
    removeSkillById(259); // Heavy Armor
} else {
    // Nothing...
}
if (skill.getId() == 234 && getActiveClassId() == 16 || getActiveClassId() == 17 || getActiveClassId() == 30 || getActiveClassId() == 43 || getActiveClassId() == 97 || getActiveClassId() == 98 || getActiveClassId() == 105 || getActiveClassId() == 112 || getActiveClassId() == 51 || getActiveClassId() == 52 || getActiveClassId() == 115 || getActiveClassId() == 116) {
    removeSkillById(234); // Robe Mastery
} else {
    // Nothing...
}
if (skill.getId() == 235 && getActiveClassId() == 28 || getActiveClassId() == 13 || getActiveClassId() == 41 || getActiveClassId() == 12 || getActiveClassId() == 40 || getActiveClassId() == 27 || getActiveClassId() == 14 || getActiveClassId() == 104 || getActiveClassId() == 95 || getActiveClassId() == 111 || getActiveClassId() == 94 || getActiveClassId() == 110 || getActiveClassId() == 103 || getActiveClassId() == 96 || getActiveClassId() == 51 || getActiveClassId() == 52 || getActiveClassId() == 115 || getActiveClassId() == 116) {
    removeSkillById(235); // Robe Mastery
} else {
    // Nothing...
}
if (skill.getId() == 251 && getActiveClassId() == 28 || getActiveClassId() == 13 || getActiveClassId() == 41 || getActiveClassId() == 12 || getActiveClassId() == 40 || getActiveClassId() == 27 || getActiveClassId() == 14 || getActiveClassId() == 104 || getActiveClassId() == 95 || getActiveClassId() == 111 || getActiveClassId() == 94 || getActiveClassId() == 110 || getActiveClassId() == 103 || getActiveClassId() == 96 || getActiveClassId() == 16 || getActiveClassId() == 17 || getActiveClassId() == 30 || getActiveClassId() == 43 || getActiveClassId() == 97 || getActiveClassId() == 98 || getActiveClassId() == 105 || getActiveClassId() == 112) {
    removeSkillById(251); // Robe Mastery
} else {
    // Nothing...
} 
```

有什么帮助我吗？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:29:55.233

你可以做几件事来优化它。

1.  删除以下代码块，它们是不必要的：

    ```
    else 
    {
        // Nothing..
    } 
    ```

2.  接下来，将函数的返回值保存到局部变量中，以节省多次调用同一个函数的开销。

    ```
    int activeClassId = getActiveClassId(), skillId = skill.getId(); 
    ```

3.  使用 a`List`存储可能的值，并使用`List.contains()`. 例如，您现在可以转换它：

    ```
    if(skill.getId() == 252 && getActiveClassId() == 36 || getActiveClassId() == 9 || getActiveClassId() == 37 || getActiveClassId() == 23 || getActiveClassId() == 24 || getActiveClassId() == 8 || getActiveClassId() == 48 || getActiveClassId() == 108 || getActiveClassId() == 92 || getActiveClassId() == 109 || getActiveClassId() == 101 || getActiveClassId() == 102 || getActiveClassId() == 93 || getActiveClassId() == 114 || getActiveClassId() == 55 || getActiveClassId() == 46 || getActiveClassId() == 2 || getActiveClassId() == 3 || getActiveClassId() == 57 || getActiveClassId() == 117 || getActiveClassId() == 113 || getActiveClassId() == 88 || getActiveClassId() == 89 || getActiveClassId() == 118 || getActiveClassId() == 16 || getActiveClassId() == 30 || getActiveClassId() == 17 || getActiveClassId() == 43 || getActiveClassId() == 97 || getActiveClassId() == 105 || getActiveClassId() == 98 || getActiveClassId() == 112 || getActiveClassId() == 28 || getActiveClassId() == 41 || getActiveClassId() == 14 || getActiveClassId() == 104 || getActiveClassId() == 111 || getActiveClassId() == 96) 
    ```

    进入这个：

    ```
    List<Integer> validClassIds = Arrays.asList( 36, 9, 37, 23, 24, 8, 48, 108, 92, 109, 101, 102, 93, 114, 55, 46, 2, 3, 57, 117, 113, 88, 89, 118, 16, 30, 17, 43, 97, 105, 98, 112, 28, 41, 14, 104, 111, 96);

    if( skillId == 252 && validClassIds.contains( activeClassId)) 
    ```

如果您不想使用 进行`O(n)`搜索`List.contains()`，可以使用 HashSet 而不是 List。更多信息[在这里](https://stackoverflow.com/questions/558978/most-efficient-way-to-see-if-an-arraylist-contains-an-object-in-java)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T04:39:54.263

我从算法的角度有建议。

使用**[霍夫曼编码](http://en.wikipedia.org/wiki/Huffman_coding)**通过调整 if-else 条件序列来最小化比较时间。如果您有数据的可能性统计。

# c# - 定义文件的安装位置

> ID：14906858
> 
> 赞同：0
> 
> 时间：2013-02-16T04:14:56.480
> 
> 标签：c#, .net, installation, clickonce

我正在尝试将 .NET 应用程序部署为 ClickOnce 应用程序，但在定义应用程序的安装位置时遇到了问题。我需要知道这一点，因为我必须包含支持文件。我已经将支持文件添加为“现有项目”。我曾假设该程序将安装在 Program Files 中，但它不存在于那里。相反，桌面上只有一个快捷方式。有人可以解释使用 VS2012 定义安装路径的方式/位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:08:54.383

我发现的一种解决方案是使用一些 Application 类属性来确定 ClicOnce 安装我的程序实例的位置。但请注意，卸载程序时会删除其中一些内容。

```
// To get the path for the executable file that started the application, not including the executable name.
PATH_RESOURCES = Application.StartupPath ; 
```

对于持久性数据，我创建了对特定路径的引用，例如：

```
PATH_USERDATA = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + @"\myAppName\";
        if (!System.IO.Directory.Exists((string)PATH_USERDATA))
        {
            System.IO.Directory.CreateDirectory((string)PATH_USERDATA);
        }

PATH_REPORTS = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) + @"\myAppName\";
        if (!System.IO.Directory.Exists((string)PATH_REPORTS ))
        {
            System.IO.Directory.CreateDirectory((string)PATH_REPORTS );
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T05:45:04.183

***Clickonce***应用程序安装在用户配置文件下，而不是 Program Files 路径下。

在 Windows Vista 和 Windows 7 上，clickonce 应用程序路径将位于`c:\users\username\AppData\Local\Apps\2.0\`

在 Windows XP 上，clickonce 应用程序路径将位于`c:\document and Settings\username\LocalSettings\Apps\2.0\`

请注意，每次安装时 Clickonce 应用程序路径都不同，我发现最好的方法是让您的应用程序将自己的应用程序路径写入 reg 键，这样您可以通过查看 reg 确切地知道应用程序路径的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T06:04:23.870

因此，正如**user831062**指出的那样，ClickOnce 应用程序安装在用户配置文件下，而不是 Program Files 路径下。因此，每台机器上的安装目录都不同，几乎不可能直接访问。

我被挂断的部分是我包含在项目中的文件在哪里，更重要的是 - 我如何访问它们？

[**好吧，正如在此链接**](http://msdn.microsoft.com/en-us/library/d8saf4wy.aspx)中提到的，如果您将文件标记为“数据文件”，则在：

```
Project Properties > Publish > Application Files > Publish Status 
```

您将能够使用以下方式访问它们：

```
textBox = File.ReadAllLines(ApplicationDeployment.CurrentDeployment.DataDirectory + @"\myFile.txt")).ToList(); 
```

如果您不将其标记为“数据文件”，而只是将其标记为“包含（自动）”，则它将仅位于安装目录本身中，可以通过使用以下方式直接调用文件来访问该目录：

```
textBox = File.ReadAllLines(@"myFile.txt")).ToList(); 
```

无论如何，我花了一个小时左右才找到这个，所以希望它可以帮助其他人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:10:51.743

如果您已将文件添加到项目中，请将“构建操作”的属性设置为“内容”，并将“复制到输出目录”设置为“始终复制”。这样，文件将包含在您的部署中。运行应用程序时，检索程序集的位置并在与它们包含在项目中的位置相同的相对文件夹中查找。例如，如果它们位于构建输出目录（/bin/debug/ 或 /bin/release/）的顶层文件夹中，它们将包含在与可执行文件相同的文件夹中，您可以使用以下命令发现：

System.Reflection.Assembly.GetExecutingAssembly().Location

# zend-framework - ZF：使用控制器 forward() 方法使 init() 方法触发两次

> ID：14906860
> 
> 赞同：0
> 
> 时间：2013-02-16T04:14:58.763
> 
> 标签：zend-framework

它是错误还是设计使然？如果是第二个，这似乎不合逻辑......如果它已经初始化，为什么要重新初始化？还是我错了？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:23:20.500

这些`$this->_forward()`方法的工作方式类似于内部 (3xx) 重定向。它的目的是设置一个新的环境，比如一个新的请求。当您使用模块时，这将特别有用且明显。

要转发到同一控制器内的另一个操作，您应该使用`$this->dispatch('nextAction')`.

# perl - Perl 映射方法

> ID：14906863
> 
> 赞同：-5
> 
> 时间：2013-02-16T04:15:18.380
> 
> 标签：perl, map

这个需要知道

```
Open File;
map{ chomp; $isword{uc join "", sort /./g}.= "$_+" } <File>; 
```

想知道这张地图的作用以及它将返回什么......无法理解排序以及为什么 uc 加入“”。

用于该程序的文件包含单词表。

请有人帮忙..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T04:24:07.130

它返回的是没有意义的，因为它被丢弃了。这使它成为一个奇怪的用法`map`。通常会写

```
for (<File>) { chomp; $isword{uc join "", sort /./g}.= "$_+"; } 
```

与

```
while (<File>) { chomp; $isword{uc join "", sort /./g} .= "$_+"; } 
```

对于遇到的每一行，它都会对构成该行的字符进行规范化。

```
apple becomes AELPP
orange becomes AEGNOR
art becomes ART
rat becomes ART
tar becomes ART
etc 
```

它使用该规范化形式作为散列的键，并将行存储在该键处。

```
$isword{AELPP} = 'apple+';
$isword{AEGNOR} = 'orange+';
$isword{ART} = 'art+rat+tar+'; 
```

假设每一行都是一个单词，它允许人们快速查找一个单词的字谜。

```
sub find_anagrams { split /\+/, $isword{uc join "", sort /./g} // '' } 
```

# java-me - J2ME 获取 sim 联系人

> ID：14906865
> 
> 赞同：2
> 
> 时间：2013-02-16T04:15:50.427
> 
> 标签：java-me

如何在 J2ME 中使用 PIM 检索 SIM 和电话簿联系人。我试过 PIM.getInstance().listPIMLists(PIM.CONTACT_LIST); 但它只显示电话簿联系人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:07:49.250

可能这个方法可以帮助你

```
public static HashLongObject loadContactFromPhone() {

    PIM iPim = PIM.getInstance();
    String[] allContactLists = iPim.listPIMLists(PIM.CONTACT_LIST);
    // Phone or SIM
    HashLongObject iPhoneBookList = new HashLongObject();
    int i;
    for (i = 0; i < allContactLists.length; i++) {
        try {
            PIMList iPIMList = iPim.openPIMList(PIM.CONTACT_LIST, PIM.READ_ONLY, allContactLists[i]);
            Enumeration iPimListEnum = iPIMList.items();
            String iContactName, iTelNumber;
            String []arrName;
            boolean isSupportFormettedName = iPIMList.isSupportedField(Contact.FORMATTED_NAME);
            if(isSupportFormettedName) {
                while (iPimListEnum.hasMoreElements()) {
                    try {
                        Contact iContact = (Contact) iPimListEnum.nextElement();
                        iContactName = iContact.getString(Contact.FORMATTED_NAME, 0);
                        iTelNumber = iContact.getString(Contact.TEL, 0);
                    } catch (Exception e) {
                        Logger.logStackTrace(e);
                        continue;
                    }

                    long corePhoneNumber = StringUtils.toCCPhoneNumber(iTelNumber);

                    // Check Duplicate
                    if (iPhoneBookList.containsKey(corePhoneNumber)) {
                        continue;
                    }

                    iPhoneBookList.put(corePhoneNumber, iContactName);
                }
            } else {
                while (iPimListEnum.hasMoreElements()) {
                    try {
                        Contact iContact = (Contact) iPimListEnum.nextElement();
                        arrName = iContact.getStringArray(Contact.NAME, Contact.ATTR_NONE);
                        iContactName = "";
                        if(arrName[Contact.NAME_FAMILY] != null) {
                            iContactName += arrName[Contact.NAME_FAMILY];
                        }
                        if(arrName[Contact.NAME_GIVEN] != null) {
                            iContactName += arrName[Contact.NAME_GIVEN];
                        }
                        iTelNumber = iContact.getString(Contact.TEL, 0);
                    } catch (Exception e) {
                        Logger.logStackTrace(e);
                        continue;
                    }

                    long corePhoneNumber = StringUtils.toCCPhoneNumber(iTelNumber);

                    // Check Duplicate
                    if (iPhoneBookList.containsKey(corePhoneNumber)) {
                        continue;
                    }

                    iPhoneBookList.put(corePhoneNumber, iContactName);
                }
            }
        } catch (PIMException ex) {
            Logger.logStackTrace(ex);
        } catch (Exception otherEx) {
            Logger.logStackTrace(otherEx);
        }
    }
    return iPhoneBookList;
} 
```

# .net - 从包含大量文件的 FTP 文件夹中获取文件列表

> ID：14906871
> 
> 赞同：1
> 
> 时间：2013-02-16T04:16:56.450
> 
> 标签：.net

我正在尝试获取 ftp 文件夹中所有文件的列表。问题是大约有 96000 个图像文件，因此目录列表超时。关于如何使用 .Net（更喜欢 VB.Net）来获取文件详细信息（修改日期）的任何想法。我想获取信息以允许我同步文件。虽然可能有一个程序可以执行此操作，但这只是一个临时解决方案，直到我们完成将文件移动到我们的 S3 存储桶。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:19:49.083

您可以访问双方

只需将目录通过管道传输到文件中
打开命令

目录 > 目录.txt

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T06:26:46.307

您可以使用代码隐藏来访问文件。

```
For Each s In System.IO.Directory.GetFiles("/")
  Response.Write(s & "<br>")
Next s 
```

您可能不想使用 response.write 或路径“/”，但如果权限允许，您可以通过这种方式访问​​文件。

# c# - 如何从变量数据列表中将数据填充到数据表中

> ID：14906872
> 
> 赞同：0
> 
> 时间：2013-02-16T04:16:58.220
> 
> 标签：c#, linq-to-sql

我有一个小任务，我想通过使用 Linq-to-SQL 将数据分配给我的组合框作为数据源、显示成员、单个列的 SQL Server 表中的值成员。

我从表中获取所需的数据，例如

```
 var Uom = SpOpDcontx.Ptr_UOMs.Select(c => c.UM_Typ).Distinct().ToArray(); 
```

数据被分配给`Uom`变量，所以我想将此数据分配给我的组合框数据源。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:46:25.980

你为什么不使用列表？

```
 public class Test
    {
       // your all return properties goes here
       public string Typ;
    }

public class Test2
{
   public List<Test> GetRequireData()
   {
        var Uom = SpOpDcontx.Ptr_UOMs.Select(c => new Test()
                   {
                    Typ = c.UM_Typ)
                   })
                   .Distinct();
         return Uom.ToList<Test>();
   }
} 
```

现在，您可以在表单中调用 GetRequireData()：

```
var obj = new Test2();
combo.DisplayMember="UM_Typ";
combo.ValueMember="UM_Typ";
combo.DataSource = obj.GetRequireData(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:38:13.610

我不明白为什么您在不使用数据表并且无论如何都不需要它时提到它。您只需要执行以下操作：

```
combo.DataSource = Uom;
combo.DisplayMember="UM_Typ";
combo.ValueMember="UM_Typ"; 
```

# java - 更改组合框值时从数据库动态更新文本框值

> ID：14906873
> 
> 赞同：0
> 
> 时间：2013-02-16T04:17:09.437
> 
> 标签：java, javascript, jsp, servlets

这是情况。我有一个下拉菜单。通过从数据库中获取一些值来填充此下拉菜单中的选项。要做到这一点，以下是我所做的.. :-

```
<select name="product_list" onchange="selectProduct(this.value)">
    <option value="none">Select one</option>
        <%
            List<String> options = new ArrayList<String>();
            DynamicCombo comboBox = new DynamicCombo();
            options = comboBox.generateComboBox();
            Collections.sort(options);
            int tempVar = 0;
            while (tempVar < options.size()) {
                out.print("<option value=\"");
                out.print(options.get(tempVar));
                out.print("\">");
                out.print(options.get(tempVar));
                out.print("</option>");
                tempVar++;
            }
        %>
</select> 
```

DynamicCombo 是一个类，它有一个名为“generateComboBox()”的方法。此方法仅返回一个数组列表，其中包含从数据库中获取的所有值，这是我需要在前端（jsp 页面）的下拉框中显示的内容。在我的 jsp 页面上，我只需遍历此列表并将其打印为适当的选项。这绝对没问题。

现在我的表单上有另一个文本框，比如“textbox1”。现在的要求是这个文本框的值应该根据用户从上面的下拉框中选择的内容来更新。

因此，例如，如果用户从下拉框中选择“prod1”（这是后端数据库表中的主键）选项，则应从数据库表中获取相应的值（产品名称）并更新名为“textbox1”的文本框。

另一件事是整个事情都包含在一个表单中，该表单应该最终提交给 servlet 以进行进一步处理。

那么我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:53:11.207

我想出了解决我自己问题的方法。这可能不是最优雅的方式，但它做得很好。

因此，根据我的要求，我真正想做的是......根据用户从已经存在的下拉框中选择的内容，将一个值（将从数据库中获取）插入到我的表单上的文本框中出现在我的表格上。

为了实现这一点，我开始思考是否可以在我的主表单中嵌套一个表单，它会解决我的问题。但我发现不允许嵌套表格。所以我想到的下一个选项是如何在用户不点击提交按钮的情况下提交相同的表单，并将其作为“不完整”提交进行适当处理（从某种意义上说，表单仍需由用户手动提交）通过单击服务器上的提交按钮）。

所以我只是利用了下拉框的“onChange”事件。我在我的表单上创建了一个额外的隐藏字段。我编写了一个简单的 javascript 函数，它将简单地将隐藏字段的值设置为字符串-“部分提交”，并将我的主表单（比如名为“form1”）提交为：-

```
document.getElementById("hidden_id").setAttribute("value","partial submit");
form1.submit; 
```

每当（并且每次）下拉框的 onchange 事件被触发时，都会调用执行上述操作的函数。

当用户最终单击表单上的提交按钮以提交最终完成的表单时，将调用另一个 javascript 函数，该函数只需将表单上隐藏字段的值设置为字符串“最终提交”并提交表单作为 ：-

```
document.getElementById("hidden_id").setAttribute("value","final submit");
form1.submit; 
```

现在在我的服务器上，我检查了这个隐藏字段的值：-

```
if(request.getParameter("hidden_id").equals("partial Submit"))
{
  // make a database connection, pass the value user selected from the drop down box
  // to a prepared statement that does the query for getting the 'productName' from 
  // the database, collect the returned string in a variable and set a 
  // request attribute with this returned value. This value can simply be used in the 
  // jsp to fill in the value part of the textbox1.
}
else
{
  if(request.getParameter("hidden_id").equals("final Submit"))
  {
   // do the rest of the final processing that needs to be done when user finally   
   // submits the completed form.
  }
  else
  {
     // throw an exception to take care of the possibility that the user might send 
     // in a 3rd value as a value for the hidden field.
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T18:08:33.130

由于您还没有提供代码`selectProduct(this.value)` ，我假设它会在您更改下拉列表中的值时提交 jsp 页面。

如果在servelt中是这种情况，请在请求对象中设置要在jsp中显示的值

```
request.setAttribute("valuetodisplay" ,valuetodisplay); 
```

现在在jsp中

```
<input type="text" value ='<%= request.getAttribute("valuetodisplay")%>' /> 
```

# java - Java FileNotFoundException 错误作为语句不在方法中

> ID：14906874
> 
> 赞同：0
> 
> 时间：2013-02-16T04:17:29.030
> 
> 标签：java

我有 2 个文件，其中 1（OrderCatalogue.java）读取外部文件的内容和 2（如下）。但是对于“OrderCatalogue catalogue= new OrderCatalogue();”这一行，我遇到了“必须捕获或声明要抛出 FileNotFoundException”错误。我明白这一点，因为它不是一种方法。但是如果我尝试将它放在一个方法中，“getCodeIndex”和“checkOut”方法下的代码不能与“包目录不存在”的错误消息一起使用。任何人都知道如何编辑我的代码以使其工作？谢谢！！

```
public class Shopping {

OrderCatalogue catalogue= new OrderCatalogue();
ArrayList<Integer> orderqty = new ArrayList<>(); //Create array to store user's input of quantity
ArrayList<String> ordercode = new ArrayList<>(); //Create array to store user's input of order number

    public int getCodeIndex(String code)
    {    
        int index = -1;

        for (int i =0;i<catalogue.productList.size();i++)
        {            
            if(catalogue.productList.get(i).code.equals(code))
            {
            index = i;
            break;
            }
        }
        return index;
    }
    public void checkout()
    {
         DecimalFormat df = new DecimalFormat("0.00");
         System.out.println("Your order:");
         for(int j=0;j<ordercode.size();j++)
         {
            String orderc = ordercode.get(j);

            for (int i =0;i<catalogue.productList.size();i++)
            {
                if(catalogue.productList.get(i).code.equals(orderc))
                {
                    System.out.print(orderqty.get(j)+" ");
                    System.out.print(catalogue.productList.get(i).desc);
                    System.out.print(" @ $"+df.format(catalogue.productList.get(i).price)); 
                }
            }   
        }

    } 
```

这是我的 OrderCatalogue 文件

```
public OrderCatalogue() throws FileNotFoundException

{

    //Open the file "Catalog.txt"
           FileReader fr = new FileReader("Catalog.txt");
           Scanner file = new Scanner(fr);

           while(file.hasNextLine())
           {
               //Read in the product details in the file
               String data = file.nextLine();
               String[] result = data.split("\\, "); 

               String code = result[0];
               String desc = result[1];
               String price = result[2];
               String unit = result[3];

               //Store the product details in a vector
               Product a = new Product(desc, code, price, unit);

               productList.add(a);
           } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:32:02.293

似乎 OrderCatalogue 构造函数抛出 FileNotFoundException。您可以在 Shopping 构造函数中初始化目录并捕获异常或将其声明为抛出 FileNotFoundException。

```
public Shopping() throws FileNotFoundException
{
        this.catalogue= new OrderCatalogue(); 
```

或者

```
public Shopping()
    {
            try{
                this.catalogue= new OrderCatalogue();
            }catch(FileNotFoundException e)
                blah blah
            } 
```

# python - 将 web.py 的 web.database 与 MyISAM 一起使用

> ID：14906881
> 
> 赞同：1
> 
> 时间：2013-02-16T04:18:24.107
> 
> 标签：python, mysql, myisam, web.py

我有一个使用 web.database 进行数据库工作的 web.py 应用程序。它在低功耗 VPS 上运行，因此我关闭了 InnoDB 以节省资源。但是，当我尝试访问数据库时，出现此错误：

```
 <class '_mysql_exceptions.NotSupportedError'> at redacted
(1286, "Unknown storage engine 'InnoDB'")

Python  /usr/lib/python2.7/dist-packages/MySQLdb/connections.py in defaulterrorhandler, line 35
Web GET redacted 
```

这条消息是不言自明的，告诉我我没有启用 InnoDB。但是我如何告诉我的应用程序使用 MyISAM 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:58:07.773

这与 web.py 应用程序无关，您必须使用[MyISAM 存储引擎](http://dev.mysql.com/doc/refman/5.0/en/myisam-storage-engine.html)创建表。

> 要明确指定您需要 MyISAM 表，请使用 ENGINE 表选项指示：CREATE TABLE t (i INT) ENGINE = MISAM;

# objective-c - 如何在不使用 `Application: didFinishLaunchingWithOptions:` 的情况下更改导航栏？

> ID：14906884
> 
> 赞同：0
> 
> 时间：2013-02-16T04:19:01.453
> 
> 标签：objective-c, uiimageview, themes, uinavigationbar, appdelegate

我一直在使用下面的代码来更改我所有视图的导航栏：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

UIImage *gradientImage44 = [[UIImage imageNamed:@"clear_navigation_bar_texture_44"]
                            resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[[UINavigationBar appearance] setBackgroundImage:gradientImage44 forBarMetrics:UIBarMetricsDefault];
} 
```

但我现在希望导航栏能够更改为用户根据他们希望应用程序成为的“主题”选择的不同图像。问题是，我不能把代码放在这里，因为它只有在应用程序加载时才能工作。所以，我想把代码做成一个单独的方法，并在用户更改“主题”时调用的 didFinishLaunching... 方法和 viewController 方法中调用它。那么我的问题是，我将如何做到这一点，或者有更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:38:10.913

您不必在应用程序委托中设置主题；你可以在任何你想要的地方做（你甚至可以让它互动）。您唯一需要注意的是，通过设置的属性`UIAppearance`只会用新视图实例化。如果您有需要更新的现有视图，则需要手动进行。例如：

```
UIImage *gradientImage44 = [[UIImage imageNamed:@"clear_navigation_bar_texture_44"] resizableImageWithCapInsets:UIEdgeInsetsZero];
[[UINavigationBar appearance] setBackgroundImage:gradientImage44 forBarMetrics:UIBarMetricsDefault];
[[self navigationController] navigationBar] setBackgroundImage:gradientImage44 forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:22:28.680

他们是否在更改 Settings.app 中的主题？只需将您的主题代码放入`-applicationWillEnterForeground:`您的应用程序委托中......

# java - Java HttpClient：无法在发布请求中读取 json 数据

> ID：14906892
> 
> 赞同：0
> 
> 时间：2013-02-16T04:20:21.497
> 
> 标签：java, apache-httpclient-4.x

在这里，我使用 HttpClient 发布 JSON 数据。但我无法读取其他应用程序上的数据。当我这样做时`request.getParameter("username")`，它返回我为空。我的两个应用程序都部署在同一台服务器上。请告诉我我做错了什么。谢谢

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String username = request.getParameter("username");
        String password = request.getParameter("password");

        DefaultHttpClient httpClient = new DefaultHttpClient();

        HttpPost postRequest = new HttpPost("http://localhost:8080/AuthenticationService/UserIdentificationServlet");
        postRequest.setHeader("Content-type", "application/json");

        StringEntity input = new StringEntity("{\"username\":\""+username+"\"}");
        input.setContentType("application/json");
        postRequest.setEntity(input);

        HttpResponse postResponse = httpClient.execute(postRequest);

        BufferedReader br = new BufferedReader(new InputStreamReader((postResponse.getEntity().getContent())));
        String output;
        System.out.println("Output from Server .... \n");
        while ((output = br.readLine()) != null) {
            System.out.println(output);
        }

        httpClient.getConnectionManager().shutdown();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:40:26.027

如果要使用 request.getParameter，则必须以 URL 编码格式发布数据。

```
//this example from apache httpcomponents doc
List<NameValuePair> formparams = new ArrayList<NameValuePair>();
formparams.add(new BasicNameValuePair("param1", "value1"));
formparams.add(new BasicNameValuePair("param2", "value2"));
UrlEncodedFormEntity entity = new UrlEncodedFormEntity(formparams, "UTF-8");
HttpPost httppost = new HttpPost("http://localhost/handler.do");
httppost.setEntity(entity); 
```

# jquery - 如何实现后退按钮 - 通过预先确定的网站“层”？(jQuery)

> ID：14906893
> 
> 赞同：0
> 
> 时间：2013-02-16T04:20:30.110
> 
> 标签：jquery, stack, layer, back

如何实现一个返回按钮，该按钮严格返回通过定义的一系列层并始终返回“主页”页面。我希望为此使用jQuery。

即用户在主页上，他们点击导航到消息。在这第一层中，后退按钮将转到主页。如果他们更进一步并单击消息，则返回按钮会将您带到消息页面，然后再次单击返回主页。这组层被杀死，直到它们去别的地方。

我真的不确定如何解决这个问题，除了我可能会有一定数量的设置“堆栈”。即消息示例将是用户将通过的堆栈。并且会为每个人创建相同的内容吗？

任何和所有的帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:47:52.450

您需要查看[History API](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)，并可能选择其中一个允许您通过推送和弹出其状态来操纵浏览器历史记录的 polyfills。这是无缝完成您想要的事情的唯一方法。只有较新的浏览器支持它。

# javascript - javascript中的音频指纹识别

> ID：14906895
> 
> 赞同：1
> 
> 时间：2013-02-16T04:20:54.763
> 
> 标签：javascript, flash, audio, web-audio-api, fingerprinting

我正在尝试在客户端比较音频文件，我*不会*将它们上传到服务器，因此我想在将文件上传到服务器之前获取文件的指纹。

*   我们有可以托管在我们网站上的图书馆吗
*   如果否，是否可以做一个，我打算

我从本地系统读取了一首歌曲，我想获取它的音频指纹，以便我可以与服务器端或客户端的其他音频文件进行比较。我可以将它发送到服务器并通过 java 或 c# 中已有的方法完成它，但这对带宽造成了太大的负担。所以我希望使用 javascript 在客户端本身获取音频指纹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:43:31.363

我不确定您所说的“指纹”是什么意思，但如果您只想获取元数据信息，您可以查看此库：[https ://github.com/aadsm/JavaScript-ID3-Reader](https://github.com/aadsm/JavaScript-ID3-Reader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T15:36:19.350

我会推荐[echoprint](https://github.com/spotify/echoprint-codegen)，因为它似乎是你要找的。

# java - FTP zip文件解压错误

> ID：14906896
> 
> 赞同：1
> 
> 时间：2013-02-16T04:20:58.850
> 
> 标签：java, exception, zip

我正在尝试从服务器中提取 zip 文件（一个 zip 文件在服务器中。所以我试图通过 FTP 提取它）并且我正在使用此代码，

```
 byte[] buf = new byte[1024];

    ZipInputStream zinstream = new ZipInputStream(Home.ftpClient.retrieveFileStream("HO2BR.br.3162675983055490721.zync"));
    ZipEntry zentry = zinstream.getNextEntry();
    System.out.println("Name of current Zip Entry : " + zentry + "\n");
    while (zentry != null) {
        String entryName = zentry.getName();
        System.out.println("Name of  Zip Entry : " + entryName);
        FileOutputStream outstream = new FileOutputStream(entryName);
        int n;

        while ((n = zinstream.read(buf, 0, 1024)) > -1) {
            outstream.write(buf, 0, n);

        }
        System.out.println("Successfully Extracted File Name : " + entryName);
        outstream.close();

        zinstream.closeEntry();
        zentry = zinstream.getNextEntry();
    }
    zinstream.close();

} 
```

*ZipInputStream(Home.ftpClient.retrieveFileStream("HO2BR.br.3162675983055490721.zync"));* 为输入流分配*FTPClient* 的 retrieveFileStream

执行程序时出现此错误

java.util.zip.ZipException：无效距离太远在 java.util.zip.InflaterInputStream.read(InflaterInputStream.java:164)

我该如何解决这个异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:26:15.700

很可能`ftpClient.retrieveFileStream`不支持搜索。Zip“目录”条目出现在文件的最后。因此，“打开”第一个项目需要能够备份到文件的开头以读取该项目。

您需要将 zip 文件下载到本地文件，然后从那里提取内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-25T22:13:09.127

解决方案是将传输模式从更改`ASCII`为`BINARY`

# c++ - 为什么 C++ 编译器默认不零初始化整数、浮点和指针变量？

> ID：14906898
> 
> 赞同：3
> 
> 时间：2013-02-16T04:21:23.870
> 
> 标签：c++

有时，我们可以使用 valgrind 之类的工具来找出是否忘记初始化指针变量。但是，为什么现代编译器不能让我们摆脱这种难以重现的常见错误呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T04:33:20.183

初始化并不总是可取的：

*   出于性能原因；初始化内存需要时间，这可能不是必需的。甚至有一些算法依赖于恒定的时间分配来实现其所需的性能（初始化是线性时间）。D 认识到这一点，但有不同（可能更好）的方法；变量默认初始化，但有特殊的语法来防止初始化。

*   有时没有正确的默认值。静态分析或运行时调试功能可以帮助检测何时使用变量而不进行初始化。默认情况下简单地为它们分配一些（不正确的）值可以隐藏使用这些检测到的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T04:35:59.673

你的问题有几个方面。首先，该标准不强制要求这种行为。但是在不违反标准的情况下，它可能是可能的。事实上，调试构建，例如在 MSVC 中，做的完全相反，初始化不是`0`用一些魔法值而是用一些魔法值——另一个魔法值用于填充“释放”的内存。同样，这是特定于调试版本的，可以帮助检测某些类别的错误，同时它可能隐藏其他错误或模糊代码库中的位置。

但我认为性能问题在这里更重要。如果要初始化整数和浮点数，为什么不在堆和堆栈上都使用各种结构或数组呢？问题当然是如果我编写程序并分配一个缓冲区来读取数据，如果我知道我要读取 x 个字节并且缓冲区只有 x，为什么还要浪费时间先将缓冲区归零字节长？

我同意，像在 Debian SSH 灾难中那样依赖这种“随机”行为是不正确的，但它表明人们依赖于现有的行为，而改变这种行为的后果并不总是显而易见的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T05:43:07.463

不完全是。除了其他答案中提出的原因外，我想指出：

```
a) Global variables, static local variables are always initialized, if not explicitly, then implicitly zero.
b) For a custom class `class Test`, creating a new instance by `Test *ptr=new Test()` or `Test test;` gives an initialized object. 
```

总而言之，ELF 文件的 '.data' '.bss' 部分中的内容被显式或隐式初始化（​​零）。不在上述区域中的*原始*类型中的其他变量在显式初始化之前具有未定义的内容（取决于您的编译器）。这是因为，ELF 文件本身提供了`a)`一种以非常低的成本以实物形式初始化变量的方法，而在堆栈、堆等中初始化变量可能是一个可怕的开销。

您可能会争辩说，`class Object`初始化的成本可能更高。但是，最重要的是，省略原始类型的初始化是 C 中的工作方式，因此 C++ 遵守它。

# android - 将片段中的文本提供给自定义 TextView

> ID：14906902
> 
> 赞同：0
> 
> 时间：2013-02-16T04:21:43.007
> 
> 标签：android, android-fragments, textview

如何在自定义 TextView 中设置构造函数以便能够从片段中传递文本？

换句话说，我很困惑如何将文本从我的片段（Fragment1）发送到自定义视图（View1）：

```
public class View1 extends TextView {

    //constructors:
    public View1(Context context, AttributeSet ats, int ds) {
        super(context, ats, ds);
        init();
    }

    public View1(Context context) {
        super(context);
        init();
    }

    public View1(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }
...
canvas.drawText(myString, margin1, margin2, paint); //myString is from Fragment1
....
} 
```

[我在这里](https://stackoverflow.com/questions/14890491/sending-text-from-fragment-to-custom-view-where-i-want-to-use-canvas-drawtext)问了一个类似的问题，但并没有真正得到太多帮助。示例代码将大大有助于消除我的困惑。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:33:58.197

`TextView`无论如何，您都在扩展。正如 A--C 所提到的，您可以使用`getText()`, 以及`setText()`获取和设置文本。

在您的上下文中，我不确定使用它`TextView`来实现您的自定义视图/小部件是否是一个好主意。View 可能是一个更好的起点，因为`TextView`它携带了各种格式、图标/可绘制显示、单击/按钮逻辑等内容。

如果您希望系统能够从 XML 布局实例化/扩充您的组件，则需要定义标准构造函数。然后你可以为你的数据使用标准的 getter/setter，就像所有其他控件一样。

如果您自己实例化您的小部件/视图（在您的代码中），您可以自由定义您想要的任何构造函数（我相信）。

# windows-8 - 是否可以在 Javascript Metro 应用程序中使用 C#（和 C++）？

> ID：14906903
> 
> 赞同：3
> 
> 时间：2013-02-16T04:22:15.710
> 
> 标签：windows-8, microsoft-metro

是否可以在 JavaScript Metro 应用程序中使用 C# 和 C++？

该应用程序是一个 Javascript/HTML 应用程序，但我想使用一些 C# 中可用的库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T04:29:00.717

是的。你可以在 C#（和 C++）中创建一个 Windows 运行时组件，只要你的组件公开的公共类型和成员是 Windows 运行时类型，WinRT 对 JavaScript 的投影将允许你的 HTML/JavaScript 应用调用该组件中的方法。

以下是一些参考资料以获取更多信息：

[在 C# 和 Visual Basic 中创建 Windows 运行时组件](http://msdn.microsoft.com/en-us/library/windows/apps/br230301.aspx)

[在 C++ 中创建 Windows 运行时组件](http://msdn.microsoft.com/en-us/library/windows/apps/hh441569.aspx)

[.NET 世界中的 Windows 运行时组件](http://msdn.microsoft.com/en-us/magazine/jj651570.aspx)

# php - 嵌入在联系表单消息中的源 URL

> ID：14906904
> 
> 赞同：0
> 
> 时间：2013-02-16T04:22:15.713
> 
> 标签：php, contact-form

我有一个非常简单的 PHP 联系表，其中包含电子邮件和消息。我想添加一个功能，以便每次发送联系表单时我都知道发送它的 URL，并且我想将它包含在发送到我的电子邮件的消息正文中。

这是运行联系表单的 PHP 代码。

```
<?php 
$to = "email@email.com" ;

$from = "Something Broke!" ; 

$subject = "Something Broke!";

$fields = array(); 
$fields{"emailOptional"} = "Email:"; 
$fields{"message"} = "Message:";   
$body = "We have received the following information:\n\n"; foreach($fields as $a => $b){    $body .= sprintf("%s: %s\n",$b,$_REQUEST[$a]); } 
if(mail($to, $subject, $body)){
    echo 'sent';// we are sending this text to the ajax request telling it that the mail is sent..
}else{
    echo 'failed';// ... or to tell it that it wasn't sent    
    }
?> 
```

这是标记：

```
<form method="post" action="widgetScript.php" id="contactForm">
<input type="text" name="emailOptional" placeholder="Your Email (optional)" />
<textarea rows="5" type="text" name="message" id="message"></textarea><br />
<input type="submit" name="send" id="Submit" value="Send">
</form> 
```

我发现如果我理解正确，您可以使用 [_post_url] 获取当前 URL - 但我不确定如何处理它。将不胜感激我能得到的所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:30:32.553

在您的 php 代码中，使用 $ _SERVER ['HTTP_REFERER'] 获取提交表单的 url。

有关 $_SERVER 的更多信息：

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# clojure - Clojure 中的神秘无限循环

> ID：14906905
> 
> 赞同：0
> 
> 时间：2013-02-16T04:22:22.623
> 
> 标签：clojure, infinite-loop

我正在编写一个 Clojure 函数，以通过在有向图上的深度优先搜索来执行拓扑排序，并且对于某些输入，它不会终止。它使用循环递归，但我没有看到在递归参数中使用任何惰性序列，这似乎是无限循环的最常见罪魁祸首。我为下面的示例输入在纸上运行了程序，它们似乎都运行良好。

```
(require '[clojure.set :as set])

;graph is a hash map, keys are nodes, vals are 
;collections of other nodes that node points to
(defn DFSsort [graph]
  (loop [stack `(~(ffirst graph)),
         visited '()]
    (let [unvisited (set/difference (set (keys graph))
                                    (set visited)),
          node (peek stack), 
          neigh (graph node)]
      (if (empty? stack)
        (if (seq unvisited)
          (recur (conj stack (first unvisited))
                 visited)
          visited) ; return
        (if (seq (set/difference (set neigh) (set visited)))    
          (if (not-any? (partial = (first neigh)) stack)
            (recur (conj stack (first neigh))
                   visited)
            "Cycle detected!") ; abort
          (recur (pop stack)
                 (conj visited node)))))))

(DFSsort {1 [2 3], 2 [3], 3 []})
;=> (1 2 3) 

(DFSsort {1 [2 3], 2 [], 3 []})
;Infinite loop

(DFSsort {1 [2 3], 2 [], 3 [2]})
;Infinite loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:41:47.900

调用 recur 时，您使用的是当前节点的第一个邻居而不是未访问的邻居中的第*一个*。对于节点 1，您总是将节点 2 添加到堆栈中。

尝试这个：

```
(defn DFSsort [graph]
  (loop [stack `(~(ffirst graph)),
         visited '()]
    (println stack visited)
    (let [unvisited (set/difference (set (keys graph))
                                    (set visited)),
          node (peek stack), 
          neigh (graph node)
          unseen-neigh (seq (set/difference (set neigh) (set visited)))]
      (if (empty? stack)
        (if (seq unvisited)
          (recur (conj stack (first unvisited))
                 visited)
          visited) ; return
        (if unseen-neigh
          (if (not-any? (partial = (first unseen-neigh)) stack)
            (recur (conj stack (first unseen-neigh))
                   visited)
            "Cycle detected!") ; abort
          (recur (pop stack)
                 (conj visited node))))))) 
```

# javascript - 如何指定比我加载的 JSON 数据的正确 ID？

> ID：14906910
> 
> 赞同：1
> 
> 时间：2013-02-16T04:22:45.410
> 
> 标签：javascript, jquery, json

我需要为`i`我的每一个`response`值（JSON 加载）获取正确的值。我怎么做？

假设我有 10 个 JSON 文件。所有这些都必须以正确的顺序加载、存储和显示给客户端。

所以它应该看起来像这样：

```
for (var i = 0; i < files.length; i++) {
    $.getJSON(files[i], function (response) {
        console.log(i);
        console.log(response);
    });
} 
```

的结果`response`是我们所期望的 - 文件的内容，但变量`i`似乎总是相同的（= files.length）。我对此的解释是 JS 不是一种等待特定动作完成的语言，它可以同时执行很多动作（忘记了这个的学名）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T04:33:09.373

问题源于您的回调在注册时没有*关闭*`i`in effect的值。每个回调都会看到相同的 实例`i`，最终在循环完成后具有它的值（即`files.length`）。

使用 jQuery，明智的做法是`$.each`按照 coder 所说的那样使用。但是用纯javascript解决它的方法是：

```
for (var i = 0; i < files.length; i++) {
    (function(idx) {
        $.getJSON(files[idx], function (response) {
            console.log(idx);
            console.log(response);
        });
    })(i);
} 
```

通过创建并立即调用匿名函数，您可以将值重新绑定`i`到一个名为`idx`作用域的新局部变量中。然后每个回调都带有自己的`idx`，因此它最终会记录正确的值（`i`注册回调时的值，而不是后来的值）。这实际上正是您使用时发生的事情`$.each`，因为`each`您是否传入了一个接收索引作为参数的匿名函数。

# php - 如何在 if else 语句验证中不显示字符串中的第一条消息

> ID：14906916
> 
> 赞同：0
> 
> 时间：2013-02-16T04:23:11.290
> 
> 标签：php

我下面的代码检查是否有任何未输入的字段，然后检查验证问题是当没有错误时它仍然显示第一个 error_message .=

例如

```
$error_message .= "<div class=\"error-header\">Error: You did not submit the following required information.</div>";
    $error_message .= "<ul id=\"errors\">"
// this part in the second else statement always shows how do i stop that; 
```

完整代码在这里：

```
if((!$email_address)||(!$password)||(!$confirm_password)||(!$first_name)||(!$last_name)||(!$address)||(!$postal_code)||(!$region)||(!$country)) {           
        $error_message .= "<div class=\"error-header\">Error: You did not submit the following required information.</div>";
        $error_message .= "<ul id=\"errors\">";
        if(!$email_address) {
            $error_message .= "<li>Please enter you're email address.</li>";
        }
        etc...
}else {
        $error_message .= "<div class=\"error-header\">Error: The following information is invalid.</div>";
        $error_message .= "<ul id=\"errors\">";

        if($row_count > 0) {
            $error_message .= "<li>The email address you provided is already in use, please use another email address.</li>";
        }

        if($confirm_password != $password) {
            $error_message .= "<li>The passwords do not match.</li>";   
        }

        if(!isset($_POST["interests"]) || count($_POST["interests"]) < 3) {
            $error_message .= "<li>Please choose three departments that are of interest to you.</li>";                              
        }else{
            $interests = $_POST["interests"];
        }

        if(strtolower($captcha_code) == strtolower((string)$_SESSION["captcha"])) {
            $error_message .= "<li>The code you entered is incorrect.</li>";    
        }

        $error_message .= "</ul>";
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:37:08.813

稍微修改了你的代码：

```
if((!$email_address)||(!$password)||(!$confirm_password)||(!$first_name)||(!$last_name)||(!$address)||(!$postal_code)||(!$region)||(!$country)) {           
            $error_message .= "<div class=\"error-header\">Error: You did not submit the following required information.</div>";
            $error_message .= "<ul id=\"errors\">";
            if(!$email_address) {
                $error_message .= "<li>Please enter you're email address.</li>";
            }
            etc...
    }else {

            $error_message=""; 

            if($row_count > 0) {
                $error_message .= "<li>The email address you provided is already in use, please use another email address.</li>";
            }

            if($confirm_password != $password) {
                $error_message .= "<li>The passwords do not match.</li>";   
            }

            if(!isset($_POST["interests"]) || count($_POST["interests"]) < 3) {
                $error_message .= "<li>Please choose three departments that are of interest to you.</li>";                              
            }else{
                $interests = $_POST["interests"];
            }

            if(strtolower($captcha_code) == strtolower((string)$_SESSION["captcha"])) {
                $error_message .= "<li>The code you entered is incorrect.</li>";    
            }

             //check if there is any error message, then create the div
             if(!empty($error_message))
            {
               $errorMessageLi=$error_message;
               $error_message= "<div class=\"error-header\">Error: The following information is invalid.</div>";
              $error_message .= "<ul id=\"errors\">";

              $error_message .=  $errorMessageLi;

              $error_message .= "</ul>";
            }
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:29:56.883

在我看来，这总是被执行的。您要么需要控制何时`$error_message`显示（此处未显示），要么需要在 else 块中进行一些检查，以查看您是否真的点击了这些 if 语句。

```
if (!($row_count = 0) && !($confirm_password != $password) && ...) {$error_message .= "";} 
```

那将是一种笨拙的方法。您可以在最后轻松检查是否`<li>`添加了任何内容，如果没有，请将其清除；或者放入一个计数器变量并在每个 if 块中递增它（如果为真）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T04:42:07.220

我倾向于将数组用于此类事情：

```
$errors = array();

if (condition1) {
   $errors[] = 'condition 1 was not met';
}

if (condition2) {
  $errors[] = 'condition 2 was not met';
}
etc...

if (count($errors) > 0) {
   display error messages
} 
```

# assembly - Assembly中几行的解释

> ID：14906924
> 
> 赞同：0
> 
> 时间：2013-02-16T04:24:09.640
> 
> 标签：assembly, nasm, bootloader

```
bits 16

org 0x7c00

start: jmp loader

;******; ; OEM Parameter block ;********;

TIMES 0Bh-$+start DB 0; THIS LINE

bpbBytesPerSector: DW 512 

bpbSectorsPerCluster: DB 1

bpbReservedSectors: DW 1

bpbNumberOfFATs: DB 2 

bpbRootEntries: DW 224 

bpbTotalSectors: DW 2880 

bpbMedia: DB 0xF0 

bpbSectorsPerFAT: DW 9 

bpbSectorsPerTrack: DW 18

bpbHeadsPerCylinder: DW 2

bpbHiddenSectors: DD 0 

bpbTotalSectorsBig: DD 0 

bsDriveNumber: DB 0 

bsUnused: DB 0 

bsExtBootSignature: DB 0x29 

bsSerialNumber: DD 0xa0a1a2a3 

bsVolumeLabel: DB "MOS FLOPPY "

bsFileSystem: DB "FAT12   "

;******** ; Bootloader Entry Point ;**********;

loader:

cli 

hlt 

times 510 - ($-$$) db 0 

dw 0xAA55 
```

现在的问题是我不太明白 TIMES 0bh-$+start 在这种情况下的评估结果。例如 $-$$ = 程序的大小。如果有人可以向我解释 LODSB 语法，那将是非常有益的。另外，为什么在每个 bpb 和 bs 语句之后都有一个 : 符号？: 符号不是表示新部分的开始吗，就像这个程序中的加载程序部分或开始部分一样。请详细解释以下如何评估答案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:24:22.170

啊! “THIS LINE”只是为“OEMNAME”保留空间。如果您愿意，可以将您的操作系统的名称放在那里 - 填充到 11 个字节。（$$ 与“开始”相同 - 部分的开头 - 0x7C00 - 在这种情况下）。

没有太多的“语法” `lodsb`，它只是一个指令...... [http://home.myfairpoint.net/fbkotler/nasmdocc.html#section-A.4.141](http://home.myfairpoint.net/fbkotler/nasmdocc.html#section-A.4.141) （我是否混淆了你使用“lodbs”作为错字的例子指令？对不起。）

“：”绝对没有任何作用。如果一行中只有一个标签，它会通知 Nasm 它是一个标签，而不是一个拼写错误的指令。在手册中查找“orphan_label”。如果没有“：”，Nasm 将（可选 - 默认打开）发出警告，但无论如何都会做正确的事情。

你真的应该有一个`nop`after `jmp start`，因为 Nasm 会发出一个“short” `jmp`（旧版本的 Nasm 默认为 near `jmp`）。既然“THIS LINE”的全部目的就是把剩下的BPB变量放在正确的地方，那不妨去做吧！

# c# - 将项目附加到类似于亚马逊的现有页面 ajax 显示更多项目按钮

> ID：14906925
> 
> 赞同：0
> 
> 时间：2013-02-16T04:24:16.423
> 
> 标签：c#, jquery, asp.net, ajax

我有一个显示 5 个项目的页面，我想在末尾添加按钮以显示更多项目

推送时，它将显示另外 10 件商品，但它不会像亚马逊在查看您的购买页面上显示更多商品一样回发任何商品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:43:19.747

这里的一些答案是针对无限页的。您所要求的称为延迟加载图像。

插件： http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

演示： http: [//www.appelsiini.net/projects/lazyload/enabled.html](http://www.appelsiini.net/projects/lazyload/enabled.html)

这是一个简化的解释：

1.  查找窗口大小并查找所有图像的位置及其大小
2.  如果图像不在窗口大小范围内，则将其替换为相同大小的占位符
3.  当用户按下按钮时，图像的位置<滚动+窗口高度，图像被加载

# mysql - Redis用户管理系统

> ID：14906928
> 
> 赞同：3
> 
> 时间：2013-02-16T04:24:31.527
> 
> 标签：mysql, database, redis

我正在将基于 MySQL 的旧用户管理系统转换为 Redis，并且遇到了一些问题......

我使用 HASH 和 SET 的组合作为系统的基础。

只是一些伪代码

```
let uid=incr user_id_counter

    hset joe@dom.com user user:uid
    hset user:uid email joe#dom.com
    hset user:uid gender m
    hset user:uid year_of_birth 1972
    hset user:uid fav_band acdc
    sadd maleUsers uid
    sadd born1972Users uid 
```

此时一切都很好，我可以使用 sinter 进行搜索，例如：

```
sinter maleUsers born1972
or
sinter femaleUsers born1980 
```

这是假设我为每一年的出生做一个单独的集合

```
sad bornXXXX uid 
```

这是我可以忍受的 - 但我将如何处理最喜欢的乐队？当然，我不会为所有可能的乐队制作一套吗？

最终我希望能够进行详细的搜索，例如，

```
sinter maleUsers born1980 genreRock genreMetal homeTownSydney 
```

有没有更复杂的方法来进行关系查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:07:54.910

我是 Redis 的忠实粉丝。但我担心你的方法是完全错误的。您的用户凭据的主要存储仍然应该是传统的 RDBMS，并且坚持使用 MySQL 是一个很好的方法。

NoSQL 数据库，尤其是 Redis，旨在做其他事情。

Redis 是基于内存的。是的，您可以将所有内容保存到硬盘驱动器，但是当您的机器启动时，它会将所有内容从硬盘驱动器加载到内存中。而且 - 您的存储上限是您机器的内存。因此，除非您指望的用户不多，否则我不会推荐 Redis 作为主要的存储来源。您仍然可以利用 Redis 对用户进行辅助访问（例如二级缓存），但不能作为主要来源。

您可以将基于磁盘的 NoSQL 数据库（MongoDB、CouchDB、Cassandra 等）用于您的用户数据库，这是比 Redis 更好的选择，但我仍然强烈推荐使用传统的 RDBMS。您希望将最关键的数据保存在可靠的基于事务的系统中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:13:06.523

*但是我将如何处理最喜欢的乐队？当然，我不会为所有可能的乐队制作一套吗？*

嗯，这正是你应该做的。使用 Redis，这种关系由对波段的引用、用户定义的一部分以及与包含对所有用户的引用的波段关联的集合来表示。

这种关联必须手动保存，但您可以利用 MULTI/EXEC 块来保证并发环境中的数据一致性。

*有没有更复杂的方法来进行关系查询？*

是的，通过使用关系数据库而不是 Redis。如果您正在寻找关系查询，为什么不使用 RDBMS？MySQL有什么问题？

# php - 解析错误：语法错误，意外 - LDAP

> ID：14906930
> 
> 赞同：0
> 
> 时间：2013-02-16T04:25:05.647
> 
> 标签：php

我正在尝试为[http://www.question2answer.org/addons.php](http://www.question2answer.org/addons.php)页面加载 LDAP 插件。
LDAP 插件在这里：[https](https://github.com/zakkak/qa-ldap-login/blob/master/README.md) ://github.com/zakkak/qa-ldap-login/blob/master/README.md 。

按照自述文件中的指示，我收到以下错误：

解析错误：语法错误，C:\UniServer\www\qa-lab\qa-plugin\qa-ldap-login-master\ldap-login.php 中的意外 '[' 在第 30 行

这是 ldap-login.php 文件的副本。
第 30 行是： $username = explode("@", $email)[0];

```
<?php

    class ldap_login {

      function load_module($directory, $urltoroot)
      {
        $this->directory=$directory;
        $this->urltoroot=$urltoroot;
      } // end function load_module

      // check_login checks to see if user is already logged in by looking for
      // a cookie or session variable (dependent on 'remember me' setting
      function check_login()
      {
        if(!isset($_COOKIE["qa-login_fname"]) && !isset($_SESSION["qa-login_fname"])) {
          return false;
        } else {
          if(isset($_COOKIE["bdops-login_fname"])){
            $fname = $_COOKIE["qa-login_fname"];
            $lname = $_COOKIE["qa-login_lname"];
            $email = $_COOKIE["qa-login_email"];
          } else {
            $fname = $_SESSION["qa-login_fname"];
            $lname = $_SESSION["qa-login_lname"];
            $email = $_SESSION["qa-login_email"];
          }
          $source = 'ldap';
          $identifier = $email;

          $username = explode("@", $email)[0];
          $fields['email'] = $email;
          $fields['confirmed'] = true;
          $fields['handle'] = $username;
          $fields['name'] = $fname . " " . $lname;
          qa_log_in_external_user($source,$identifier,$fields);
        }
      } // end function check_login

      function match_source($source)
      {
        return $source=='ldap';
      } // end function match_source

      function login_html($tourl, $context)
      {

      } // end function login_html

      function logout_html ($tourl)
      {
        require_once QA_INCLUDE_DIR."qa-base.php";

        $_SESSION['logout_url'] = $tourl;
        $logout_url = qa_path('auth/logout', null, qa_path_to_root());
        echo('<a href="'.$logout_url.'">'.qa_lang_html('main/nav_logout').'</a>');
      } // end function logout_html

    } // end class ldap_login

    ?> 
```

我还应该包括我使用的 ldap 信息：

```
 <?php

    $ldap_search_strings = array( 'uid=myusername,ou=users,ou=hq,dc=domain.net,dc=com');
    $ldap_hostname = 'ldap://ldap.domain.net'; // use ldap:// for non ssl encrypted servers
    $ldap_port = 389; // use 389 for non ssl encrypted servers

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:28:40.947

```
$username = explode("@", $email)[0]; 
```

此语法在 5.4 之前的 PHP 版本中不可用

> [http://www.php.net/manual/en/migration54.new-features.php](http://www.php.net/manual/en/migration54.new-features.php)
> 
> 添加了函数数组解引用，例如 foo()[0]

您必须将其更改为以下内容：

```
$segments = explode("@", $email);
$username = $segments[0]; 
```

或者在这种情况下，因为它正在抓取第一个数组项，也许使用：

```
$username = current(explode("@", $email)); 
```

# c++ - 使用 OpenCV 的对象跟踪脚本中的慢视频

> ID：14906931
> 
> 赞同：1
> 
> 时间：2013-02-16T04:25:06.633
> 
> 标签：c++, opencv

我用 openCV 和 C++ 编写了一个简短的例程来使用网络摄像头跟踪对象。网络摄像头的制定速度很快，没有滞后，但在周末下班之前，我记录了一个典型的序列，用作我工作到周一的测试模板。这和代码中的相应更改以某种方式使视频以非常慢的动作播放。这是代码，打开“Test.avi”，大约 20 秒长，而不是从网络摄像头运行恒定流：

```
#include <opencv2/opencv.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>
#include <vector>

using namespace cv;
using namespace std;

Mat drawBoundingBoxes (Mat canvasImage, vector<vector<Point>> contours);

int main(int argc, char** argv[])
{
    Mat frame;
    Mat back;
    Mat fGround;
    BackgroundSubtractorMOG2 bGround;
    bGround.nmixtures = 3;
    //bGround.nShadowDetection = 0;
    bGround.fTau = .5;

    VideoCapture cap;
    cap.open("Test.avi");
    if (!cap.isOpened())
    {
        cout << "Can't open video" << endl;
        return -1;
    }

    vector<vector<Point>> contours;
    namedWindow("video", CV_WINDOW_AUTOSIZE);

    while (true)
    {
        static int count = 1;
        cap >> frame;
        if (frame.empty())
            break;

        bGround.operator()(frame, fGround);
        bGround.getBackgroundImage(back);
        erode(fGround, fGround, Mat(), Point(-1,-1), 2, BORDER_DEFAULT);
        dilate(fGround, fGround, Mat(), Point(-1,-1), 10, BORDER_DEFAULT);

        if (count > 50)
        {
            findContours(fGround, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE);
            drawContours(frame, contours, -1, Scalar(239,255,0), 2);
            drawBoundingBoxes(frame, contours);
        }

        imshow("video", frame);

        if(waitKey(30) >= 0) 
            break;
        count++;
    }
    return 0;
}

Mat drawBoundingBoxes (Mat canvasImage, vector<vector<Point>> contours)
{
    vector<Rect> boundRect(contours.size());

    for (int i=0; i<contours.size(); i++)
    {
        boundRect[i] = boundingRect(contours[i]);
        rectangle(canvasImage, boundRect[i], Scalar(153,0,76), 2, 8, 0);
    }
    return canvasImage;
} 
```

有任何想法吗？某处内存泄漏？谢谢，

-托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:44:23.067

我相信您录制的视频的帧速率高于您的 PC 可以实时处理的帧速率。这不是网络摄像头的问题，因为它只是丢帧。您可以尝试减少 waitKey() 过程中的延迟，看看是否有帮助。

# android - 如何保持不同安卓设备的纵横比

> ID：14906932
> 
> 赞同：0
> 
> 时间：2013-02-16T04:25:16.110
> 
> 标签：android, image, aspect-ratio

所以我试图将图像放在滚动视图中并让图像拉伸以适应不同尺寸的屏幕。它会水平伸展，但垂直方向总是乱七八糟。

我读过很多有类似问题的人的页面，但他们的解决方案对我不起作用。我已经尝试了使用不同`scaleType`的 ,`layout_width`和的所有不同组合，并`layout_height`尝试改变其他东西。下面的代码显示了我最接近让它工作的方法，使用`scaleType="centerCrop"`. 它是唯一一个按比例垂直拉伸图像的功能，但它会从顶部和底部切掉一大块图像，它会上下滚动图像，但只显示中间部分。

该图像是 480x5500 jpeg，如果这很重要的话。最初在我开始搞砸这一切之前，该应用程序在我的手机上运行良好，但后来我意识到当我在平板电脑上尝试时图像被压缩了。必须有一种方法可以在 xml 中执行此操作，对吗？我真的不想对 java 代码部分中的图像做任何事情。另外我希望能够只使用一张图片来做到这一点，我不想为不同的屏幕尺寸使用不同的图片。请帮忙，谢谢。

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:scaleType="centerCrop"
        android:src="@drawable/paper" />
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T05:13:32.353

可能这对你有帮助，使高度和`wrap_content`宽度`ImageView`

```
 android:layout_width="wrap_content"
  android:layout_height="wrap_content" 
```

这里不需要`ScrollView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:31:21.147

下一个样本超出了您的要求：

*   [http://www.androidviews.net/2012/11/photoview/](http://www.androidviews.net/2012/11/photoview/)
*   [https://github.com/chrisbanes/PhotoView/tree/master/sample](https://github.com/chrisbanes/PhotoView/tree/master/sample)
*   [https://play.google.com/store/apps/details?id=uk.co.senab.p](https://play.google.com/store/apps/details?id=uk.co.senab.p)

hotview.sample

它使图像适合屏幕，此外还允许使用捏合手势放大/缩小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T20:56:22.513

尝试使用此处提到的 AspectRatioImageView 之类的自定义 ImageView：

[https://stackoverflow.com/a/4688335/944070](https://stackoverflow.com/a/4688335/944070)

# java - Gson 中的 DateFormat 模式“yyyy-MM-dd'T'HH:mm:ss.SSS'Z'”

> ID：14906933
> 
> 赞同：18
> 
> 时间：2013-02-16T04:25:31.037
> 
> 标签：java, timezone, gson

我有两个字段，如下所示（**注意第一个字段有毫秒部分**）：

```
{
  "updateTime":"2011-11-02T02:50:12.208Z",
  "deliverTime"："1899-12-31T16:00:00Z"
} 
```

我想用 Gson 将 Json 字符串反序列化为一个对象，所以我得到了一个`Gson`实例：

```
GsonBuilder gb = new GsonBuilder();
gb.setDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
gson = gb.create(); 
```

第一个字段被反序列化为 Java 日期类型：*2011-11-02 02:50:12.208*（看起来忽略了时区部分-'Z'，这是我的预期）。但是，第二个字段被反序列化为*1900-01-01 00:00:00*（我住在中国，这里是 +8 GMT），似乎时区部分-'Z' 在反序列化中起作用。

为什么第二个字段使用时区部分？这不是我所期望的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-09-01T22:16:08.667

**快速回答**

第一个字符串使用您的日期格式和您的本地时区正确解析，第二个不尊重它，因此将由`SimpleDateFormat`没有毫秒的默认对象解析（“yyyy-MM-dd'T'HH:mm:ss' Z' 是解析格式）并使用 UTC 时区为您提供时间部分的“偏移”。

**完整答案**

要完全回答您的问题，您需要深入研究 Gson 源代码。更具体地说，您必须查看`DefaultDateTypeAdapter`用于解析日期的代码。[您可以在链接](https://code.google.com/p/google-gson/source/browse/trunk/gson/src/main/java/com/google/gson/DefaultDateTypeAdapter.java)中找到所有这些代码，但为了快速参考，我将在此处复制最相关的部分。

当您在构建器中调用它时：

```
gb.setDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"); 
```

您正在以这种方式初始化 DefaultDateTypeAdapter：

```
DefaultDateTypeAdapter(DateFormat enUsFormat, DateFormat localFormat) {
   this.enUsFormat = enUsFormat;
   this.localFormat = localFormat;
   this.iso8601Format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'", Locale.US);
   this.iso8601Format.setTimeZone(TimeZone.getTimeZone("UTC"));
} 
```

在哪里：

1.  `enUsFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'")`和
2.  `localFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'", Locale.US)`

因为您在构建器中传递了字符串。

请注意，这`Locale.US`不是时区，这`iso8601Format`与`enUsFormat`没有毫秒但使用 UTC 时区相同。

解析发生在`deserializeToDate`方法中：

```
 private Date deserializeToDate(JsonElement json) {
    synchronized (localFormat) {
      try {
        return localFormat.parse(json.getAsString());
      } catch (ParseException ignored) {
      }
      try {
        return enUsFormat.parse(json.getAsString());
      } catch (ParseException ignored) {
      }
      try {
        return iso8601Format.parse(json.getAsString());
      } catch (ParseException e) {
        throw new JsonSyntaxException(json.getAsString(), e);
      }
    }
  } 
```

在瀑布方法中使用所有三种日期格式。

第一个 Json 字符串：“2011-11-02T02:50:12.208Z”。因为 has 毫秒，它会立即解析，`localFormat`并使用您的时区为您提供您期望的结果。

第二个 Json 字符串：“1899-12-31T16:00:00Z”。它不会被解析，`localFormat`因为没有毫秒，所以第二次机会是 enUsFormat 是*相同的模式*，除了语言环境。所以它会以同样的方式失败。

解析的最后机会: `iso8601Format`，它没有毫秒，**但是**，用于构造，它也是 UTC 时区，因此它将日期解析为 UTC，而其他日期则使用您的时区解析。

# c - 反转字符串中的单词

> ID：14906935
> 
> 赞同：-1
> 
> 时间：2013-02-16T04:26:08.040
> 
> 标签：c

出于某种原因，我无法让它工作！谁能告诉我哪里出错了？这应该反转给定字符串中的单词（即从“this is a test”到“test a is this”）

```
 #include <stdio.h>
#include <stdlib.h>

char *reverse(char const *input)
{
    char *ret = (char *)malloc(sizeof(char) * strlen(input));
    int length = 0;
    int numWords = 1;
    int i;
    for(i=0; input[i]!=NULL; i++)
    {
        length++;
        if(input[i]==' ')
            numWords++; 
    }
    char words[numWords];
    int currentWord = numWords;
    for(i=0; input[i]!=NULL; i++)
    {
        if (input[i]==' '){
            currentWord--;
        }else{
            words[currentWord] = words[currentWord] + input[i];
        }
    }
    for(i=0; i < numWords; i++)
    {
        ret = ret + words[i];
    }

    return ret;
}

int main(int argc, char **argv)
{
    int nTestcase = 0;
    int i = 0;
    char inputstr[100];
    char *reversedStr = NULL;
    scanf("%d\n", &nTestcase);
    for (i = 0; i < nTestcase; i++)
    {
        fgets(inputstr, 100, stdin);
        reversedStr = reverse(inputstr);
        printf("%s\n", reversedStr);
        free(reversedStr);
        memset(inputstr, 0, 100);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:43:42.980

```
words[currentWord] = words[currentWord] + input[i]; 
```

您不能像期望字符串连接那样相互添加字符。我想你希望`words`是一个单词数组（即字符串），但它的类型不是那个，`words`只是一个字符数组。

就像@Tom 说的那样，你在最后一个 for 循环中再次这样做：

```
ret = ret + words[i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T06:18:13.923

Joseph，与其他编程语言（c# 或 PHP）不同，C 的字符串处理功能非常基本。

您不能直接添加字符串，但是可以使用许多库函数来完成相同的任务。

查看，

*   strtok - 使用它将字符串拆分为单词。[strtok 参考](http://www.cplusplus.com/reference/cstring/strtok/)

*   strncat - 用于连接字符串

C 中的字符串只是以空字符（值为 0 的字节）结尾的字节数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-20T10:25:19.943

这是更短/更清洁的方式

```
private char[] reverseWords(char[] words) {

    int j = words.length - 1;

    for (int i = 0; i < (words.length)/2; i++) {
        if(i==j)
            continue;

        char temp = words[i];
        words[i] = words[j];
        words[j]=temp;
        j--;
    }
    int lastIndex = 0;
    for (int i=0;i<words.length;i++){
        if(words[i]==' '){
            words = reverseWord(words,lastIndex,i-1);
            lastIndex=i+1;
        }
    }
    words = reverseWord(words,lastIndex,words.length-1);

    return words;
}

private char[] reverseWord(char[] words, int from, int to) {
    int j=to;
    for(int i=from;i<((to/2)+from/2);i++){
        if(i==j) continue;

        char temp = words[j];
        words[j]=words[i];
        words[i]=temp;
        j--;
    }
    return words;
} 
```

# php - PHP：如何捕获 dio_read() 的超时？

> ID：14906937
> 
> 赞同：11
> 
> 时间：2013-02-16T04:26:25.070
> 
> 标签：php, serial-port

我`dio_read`在 PHP 中使用来捕获来自串行设备的输入（特别是来自 Dangerous Prototypes 的 USB IR Toy v2）。

有时来自设备的输入很慢（10 秒以上）。我想超时`dio_read`，但不知道如何。

如果有人阅读这篇文章知道怎么做，你能帮我指出正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:45:24.987

如果没有要读取的数据，Windows（其他平台未知）上的 dio_read 将不会超时。在 Windows 上无法指定超时或进行非阻塞读取。 [http://php.net/dio_read](http://php.net/dio_read)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T00:55:16.173

您可以使用[dio_fctnl()](http://es1.php.net/manual/en/function.dio-fcntl.php)将文件描述符标志设置为**O_NONBLOCK**或**O_ASYNC**

# git - 使用 git repo 处理 .htaccess 的最佳方法是什么？

> ID：14906952
> 
> 赞同：5
> 
> 时间：2013-02-16T04:29:45.373
> 
> 标签：git, .htaccess

另一位开发人员说我们应该将 .htaccess 文件放在 git repo 中，但是因为实时服务器使用密码而我们的本地盒子不使用，我说我们应该将它们放在 .gitignore 中。但是，他说，如果您必须跨实例拥有不同的 .htaccess 文件，那么您做错了。我认为并非所有服务器实例都相同，有时（如果不是经常）它们需要自己的配置。他同意我们可以简单地在 repo 中创建一个“htaccess”文件，该文件在实时复制到 .htaccess，但仍然更喜欢按照他的方式进行操作。对我来说，服务器配置之类的东西应该被排除在回购之外。此外，我不确定我是否需要更改我的开发操作系统以完全匹配实时服务器或运行 VM 软件。我在这里错过了什么吗？哪个是最好的方法，或者什么是更好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:08:47.580

我认为 git 主要是软件组件（例如代码行）而不是软件配置的跟踪器。

服务器密码是配置，因此被排除在更改控制之外。.htaccess 文件是正确操作应用程序所必需的配置工件（据我所知，在您的情况下），因此可以通过 git 进行更改控制。

在我看来，你有两个选择。将配置移出 repo 让我觉得更优雅，但如果你必须将它保存在 .htaccess 文件中，你可以[在 .gitattributes 中使用 smudge/clean 脚本](http://git-scm.com/book/en/Customizing-Git-Git-Attributes#Keyword-Expansion)。涂抹/清除过滤器在结帐时将定义的更改注入到跟踪的内容中（即注入密码），并在登台时再次从跟踪的内容中清除密码（即用通用 foobar 替换密码）。

请记住，由于这些涂抹/清洁过滤器是在 git 配置中定义的，它们不会像其他被跟踪的文件那样被传递，因此您需要自己跟踪正确的过滤器是否在它们应该在的位置。

在任何一种情况下，无论您是将配置保留在 repo 之外，还是在 repo 的实例之间进行手动涂抹/过滤管理，您都会受益于 git 的*使用协议*，该协议将（除其他外）说明您如何处理配置和规定哪些涂抹/清洁脚本位于服务器配置所在的位置和/或位置的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:40:40.510

由于 .htaccess 似乎是特定于环境的，而不是使应用程序运行的重要部分，因此我不会将其添加到存储库中。

也许最好的解决方案是不要在需要身份验证的这些服务器上使用 .htaccess，而只需在 serverconfig 中启用身份验证。

# android - 如何在android上制作一个核心活动？

> ID：14906957
> 
> 赞同：2
> 
> 时间：2013-02-16T04:30:23.400
> 
> 标签：android, android-fragments, android-activity

我是 Android 开发的新手。从许多教程中学习后，我得到了许多活动和许多片段。如何制作核心引擎来检查正在运行的 Activity 以及容器上显示的 Fragment？

假设我有：

```
Acivity01, Activity02, ... , Activity10  

Fragment01, Fragment02, ... , Fragment10 
```

我想创建一个类来过滤 Activity 运行时所在的 Activity 以及嵌入到该 Activity 中的 Fragment。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:48:07.657

如果我理解正确，您可能希望在 Application 类中存储一些对 Activity 和 Fragment 实例（-s）的引用，这些引用当前位于前台（我的意思是用户可以立即与 Activity/Fragment 交互）。

1.  至于 Activity 在您的 Application 类中创建一些 Activity 字段并为其创建 getter/setter 方法（例如，setCurrentActivity()、getCurrentActivity()）。然后为每个 Activity 实例从 onResume() 方法调用 setCurrentActivity()。当没有前台活动但应用程序仍在工作时，不要忘记调用 setCurrentActivity，为 ir 提供空引用以正确处理案例。

2.  至于 Fragment 大体思路和第一项类似，但是在前台状态下可以同时存在多个 Fragment 实例。因此，您需要存储类似 List 的内容，在其中添加恢复的片段并删除暂停的片段。

例如，您可能还想为对话框实现类似的东西。然后使用相同的策略。希望它会有所帮助。

# ajax - jQuery mobile 中包含 ajax 时的函数执行顺序

> ID：14906959
> 
> 赞同：0
> 
> 时间：2013-02-16T04:30:48.720
> 
> 标签：ajax, function, jquery-mobile, execution

我对在 jQuery 中执行 ajax 调用的函数的执行方式有疑问。

考虑两个函数。

```
function auth() {
    $.ajax({
        type: "POST",
        dataType: "json",
        url: API_URL,
        data: {....
        },
        success: function (response) {}
    });
};

function getData() {
    $.ajax({
        type: "POST",
        dataType: "json",
        url: API_URL,
        data: {....
        },
        success: function (response) {}
    });
}; 
```

我一个接一个地调用这些函数，如下所示......

```
auth();
getData(); 
```

我的情况是，我只想`getData()`在完成 'auth()' 之后执行。我知道我们可以调用`getData()`内部的 auth 成功函数。但我想知道的是，如果我一个接一个地调用这些函数将如何执行，如上所示。

任何形式的帮助将不胜感激:) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:37:21.080

您可以在 jQuery中使用[**延迟对象。**](http://api.jquery.com/category/deferred-object/)只需返回`ajax()`结果。

```
function auth() {
  return $.ajax({
        type: "POST",
        dataType : "json",
        url: API_URL,
        data: { ....  },
        success: function (response) {
        }
  });             
};

auth.done(getData); 
```

这将`getData`在`auth`完成时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T06:03:10.553

它们将异步执行。如果这是您想要的，您可以通过在调用中设置**“async=false”让它们等待（同步）。**

```
 function auth() {
    $.ajax({
        **async: false,**
        type: "POST",
        dataType: "json",
        url: API_URL,
        data: {....
        },
        success: function (response) {}
    });
};

function getData() {
    $.ajax({
        **aysnc: false,**
        type: "POST",
        dataType: "json",
        url: API_URL,
        data: {....
        },
        success: function (response) {}
    });
}; 
```

这将使呼叫在继续下一个呼叫之前完成，但通常会在拨打电话时锁定浏览器：

> **async** (默认：true) **类型**：Boolean 默认情况下，所有请求都是异步发送的（即默认设置为true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。**请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。**从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用成功/错误/完成回调选项而不是 jqXHR 对象的相应方法，例如 jqXHR.done() 或已弃用的 jqXHR.success()。

Src JQM 站点：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# python - 大型数据集的 Python 双倍免费错误

> ID：14906962
> 
> 赞同：33
> 
> 时间：2013-02-16T04:31:17.020
> 
> 标签：python, memory, numpy, scipy

我在 Python 中有一个非常简单的脚本，但由于某种原因，在运行大量数据时出现以下错误：

```
*** glibc detected *** python: double free or corruption (out): 0x00002af5a00cc010 *** 
```

当一个人试图释放已经被释放的内存时，我已经习惯了 C 或 C++ 中出现的这些错误。但是，根据我对 Python 的理解（尤其是我编写代码的方式），我真的不明白为什么会发生这种情况。

这是代码：

```
#!/usr/bin/python -tt                                                                                                                                                                                                                         

import sys, commands, string
import numpy as np
import scipy.io as io
from time import clock

W = io.loadmat(sys.argv[1])['W']
size = W.shape[0]
numlabels = int(sys.argv[2])
Q = np.zeros((size, numlabels), dtype=np.double)
P = np.zeros((size, numlabels), dtype=np.double)
Q += 1.0 / Q.shape[1]
nu = 0.001
mu = 0.01
start = clock()
mat = -nu + mu*(W*(np.log(Q)-1))
end = clock()
print >> sys.stderr, "Time taken to compute matrix: %.2f seconds"%(end-start) 
```

有人可能会问，为什么要声明一个 P 和一个 Q numpy 数组？我这样做只是为了反映实际情况（因为这段代码只是我实际所做的一部分，我需要一个 P 矩阵并事先声明它）。

我可以使用 192GB 的机器，所以我在一个非常大的 SciPy 稀疏矩阵（220 万乘 220 万，但非常稀疏，这不是问题）上对此进行了测试。主内存由 Q、P 和矩阵矩阵占用，因为它们都是 220 万乘以 2000 矩阵（大小 = 220 万，numlabels = 2000）。峰值内存高达 131GB，可轻松放入内存。在计算 mat 矩阵时，我收到 glibc 错误，并且我的进程自动进入睡眠 (S) 状态，而不会释放它占用的 131GB。

考虑到奇怪的（对于 Python）错误（我没有明确地取消分配任何东西），而且这对于较小的矩阵大小（到 2000 年大约 150 万）非常有效，我真的不知道从哪里开始调试它。

作为起点，我在运行前设置了“ulimit -s unlimited”，但无济于事。

欢迎任何帮助或洞察 numpy 在大量数据中的行为。

请注意，这不是内存不足错误 - 我有 196GB，我的进程达到了大约 131GB 并在此停留了一段时间，然后才给出以下错误。

**更新：2013 年 2 月 16 日（太平洋标准时间下午 1:10）：**

根据建议，我使用 GDB 运行 Python。有趣的是，在一次 GDB 运行中，我忘记将堆栈大小限制设置为“无限”，并得到以下输出：

```
*** glibc detected *** /usr/bin/python: munmap_chunk(): invalid pointer: 0x00007fe7508a9010 ***
======= Backtrace: =========
/lib64/libc.so.6(+0x733b6)[0x7ffff6ec23b6]
/usr/lib64/python2.7/site-packages/numpy/core/multiarray.so(+0x4a496)[0x7ffff69fc496]
/usr/lib64/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x4e67)[0x7ffff7af48c7]
/usr/lib64/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x309)[0x7ffff7af6c49]
/usr/lib64/libpython2.7.so.1.0(PyEval_EvalCode+0x32)[0x7ffff7b25592]
/usr/lib64/libpython2.7.so.1.0(+0xfcc61)[0x7ffff7b33c61]
/usr/lib64/libpython2.7.so.1.0(PyRun_FileExFlags+0x84)[0x7ffff7b34074]
/usr/lib64/libpython2.7.so.1.0(PyRun_SimpleFileExFlags+0x189)[0x7ffff7b347c9]
/usr/lib64/libpython2.7.so.1.0(Py_Main+0x36c)[0x7ffff7b3e1bc]
/lib64/libc.so.6(__libc_start_main+0xfd)[0x7ffff6e6dbfd]
/usr/bin/python[0x4006e9]
======= Memory map: ========
00400000-00401000 r-xp 00000000 09:01 50336181                           /usr/bin/python2.7
00600000-00601000 r--p 00000000 09:01 50336181                           /usr/bin/python2.7
00601000-00602000 rw-p 00001000 09:01 50336181                           /usr/bin/python2.7
00602000-00e5f000 rw-p 00000000 00:00 0                                  [heap]
7fdf2584c000-7ffff0a66000 rw-p 00000000 00:00 0 
7ffff0a66000-7ffff0a6b000 r-xp 00000000 09:01 50333916                   /usr/lib64/python2.7/lib-dynload/mmap.so
7ffff0a6b000-7ffff0c6a000 ---p 00005000 09:01 50333916                   /usr/lib64/python2.7/lib-dynload/mmap.so
7ffff0c6a000-7ffff0c6b000 r--p 00004000 09:01 50333916                   /usr/lib64/python2.7/lib-dynload/mmap.so
7ffff0c6b000-7ffff0c6c000 rw-p 00005000 09:01 50333916                   /usr/lib64/python2.7/lib-dynload/mmap.so
7ffff0c6c000-7ffff0c77000 r-xp 00000000 00:12 54138483                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/streams.so
7ffff0c77000-7ffff0e76000 ---p 0000b000 00:12 54138483                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/streams.so
7ffff0e76000-7ffff0e77000 r--p 0000a000 00:12 54138483                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/streams.so
7ffff0e77000-7ffff0e78000 rw-p 0000b000 00:12 54138483                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/streams.so
7ffff0e78000-7ffff0e79000 rw-p 00000000 00:00 0 
7ffff0e79000-7ffff0e9b000 r-xp 00000000 00:12 54138481                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/mio5_utils.so
7ffff0e9b000-7ffff109a000 ---p 00022000 00:12 54138481                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/mio5_utils.so
7ffff109a000-7ffff109b000 r--p 00021000 00:12 54138481                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/mio5_utils.so
7ffff109b000-7ffff109f000 rw-p 00022000 00:12 54138481                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/mio5_utils.so
7ffff109f000-7ffff10a0000 rw-p 00000000 00:00 0 
7ffff10a0000-7ffff10a5000 r-xp 00000000 09:01 50333895                   /usr/lib64/python2.7/lib-dynload/zlib.so
7ffff10a5000-7ffff12a4000 ---p 00005000 09:01 50333895                   /usr/lib64/python2.7/lib-dynload/zlib.so
7ffff12a4000-7ffff12a5000 r--p 00004000 09:01 50333895                   /usr/lib64/python2.7/lib-dynload/zlib.so
7ffff12a5000-7ffff12a7000 rw-p 00005000 09:01 50333895                   /usr/lib64/python2.7/lib-dynload/zlib.so
7ffff12a7000-7ffff12ad000 r-xp 00000000 00:12 54138491                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/mio_utils.so
7ffff12ad000-7ffff14ac000 ---p 00006000 00:12 54138491                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/mio_utils.so
7ffff14ac000-7ffff14ad000 r--p 00005000 00:12 54138491                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/mio_utils.so
7ffff14ad000-7ffff14ae000 rw-p 00006000 00:12 54138491                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/io/matlab/mio_utils.so
7ffff14ae000-7ffff14b5000 r-xp 00000000 00:12 54138562                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/sparse/sparsetools/_csgraph.so
7ffff14b5000-7ffff16b4000 ---p 00007000 00:12 54138562                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/sparse/sparsetools/_csgraph.so
7ffff16b4000-7ffff16b5000 r--p 00006000 00:12 54138562                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/sparse/sparsetools/_csgraph.so
7ffff16b5000-7ffff16b6000 rw-p 00007000 00:12 54138562                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/sparse/sparsetools/_csgraph.so
7ffff16b6000-7ffff17c2000 r-xp 00000000 00:12 54138558                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/sparse/sparsetools/_bsr.so
7ffff17c2000-7ffff19c2000 ---p 0010c000 00:12 54138558                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/sparse/sparsetools/_bsr.so
7ffff19c2000-7ffff19c3000 r--p 0010c000 00:12 54138558                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/sparse/sparsetools/_bsr.so
7ffff19c3000-7ffff19c6000 rw-p 0010d000 00:12 54138558                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/sparse/sparsetools/_bsr.so
7ffff19c6000-7ffff19d5000 r-xp 00000000 00:12 54138561                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/sparse/sparsetools/_dia.so
7ffff19d5000-7ffff1bd4000 ---p 0000f000 00:12 54138561                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/sparse/sparsetools/_dia.so
7ffff1bd4000-7ffff1bd5000 r--p 0000e000 00:12 54138561                   /home/avneesh/.local/lib/python2.7/site-packages/scipy/sparse/sparsetools/_dia.so
Program received signal SIGABRT, Aborted.
0x00007ffff6e81ab5 in raise () from /lib64/libc.so.6
(gdb) bt
#0  0x00007ffff6e81ab5 in raise () from /lib64/libc.so.6
#1  0x00007ffff6e82fb6 in abort () from /lib64/libc.so.6
#2  0x00007ffff6ebcdd3 in __libc_message () from /lib64/libc.so.6
#3  0x00007ffff6ec23b6 in malloc_printerr () from /lib64/libc.so.6
#4  0x00007ffff69fc496 in ?? () from /usr/lib64/python2.7/site-packages/numpy/core/multiarray.so
#5  0x00007ffff7af48c7 in PyEval_EvalFrameEx () from /usr/lib64/libpython2.7.so.1.0
#6  0x00007ffff7af6c49 in PyEval_EvalCodeEx () from /usr/lib64/libpython2.7.so.1.0
#7  0x00007ffff7b25592 in PyEval_EvalCode () from /usr/lib64/libpython2.7.so.1.0
#8  0x00007ffff7b33c61 in ?? () from /usr/lib64/libpython2.7.so.1.0
#9  0x00007ffff7b34074 in PyRun_FileExFlags () from /usr/lib64/libpython2.7.so.1.0
#10 0x00007ffff7b347c9 in PyRun_SimpleFileExFlags () from /usr/lib64/libpython2.7.so.1.0
#11 0x00007ffff7b3e1bc in Py_Main () from /usr/lib64/libpython2.7.so.1.0
#12 0x00007ffff6e6dbfd in __libc_start_main () from /lib64/libc.so.6
#13 0x00000000004006e9 in _start () 
```

当我将堆栈大小限制设置为无限制”时，我得到以下信息：

```
*** glibc detected *** /usr/bin/python: double free or corruption (out): 0x00002abb2732c010 ***
^X^C
Program received signal SIGINT, Interrupt.
0x00002aaaab9d08fe in __lll_lock_wait_private () from /lib64/libc.so.6
(gdb) bt
#0  0x00002aaaab9d08fe in __lll_lock_wait_private () from /lib64/libc.so.6
#1  0x00002aaaab969f2e in _L_lock_9927 () from /lib64/libc.so.6
#2  0x00002aaaab9682d1 in free () from /lib64/libc.so.6
#3  0x00002aaaaaabbfe2 in _dl_scope_free () from /lib64/ld-linux-x86-64.so.2
#4  0x00002aaaaaab70a4 in _dl_map_object_deps () from /lib64/ld-linux-x86-64.so.2
#5  0x00002aaaaaabcaa0 in dl_open_worker () from /lib64/ld-linux-x86-64.so.2
#6  0x00002aaaaaab85f6 in _dl_catch_error () from /lib64/ld-linux-x86-64.so.2
#7  0x00002aaaaaabc5da in _dl_open () from /lib64/ld-linux-x86-64.so.2
#8  0x00002aaaab9fb530 in do_dlopen () from /lib64/libc.so.6
#9  0x00002aaaaaab85f6 in _dl_catch_error () from /lib64/ld-linux-x86-64.so.2
#10 0x00002aaaab9fb5cf in dlerror_run () from /lib64/libc.so.6
#11 0x00002aaaab9fb637 in __libc_dlopen_mode () from /lib64/libc.so.6
#12 0x00002aaaab9d60c5 in init () from /lib64/libc.so.6
#13 0x00002aaaab080933 in pthread_once () from /lib64/libpthread.so.0
#14 0x00002aaaab9d61bc in backtrace () from /lib64/libc.so.6
#15 0x00002aaaab95dde7 in __libc_message () from /lib64/libc.so.6
#16 0x00002aaaab9633b6 in malloc_printerr () from /lib64/libc.so.6
#17 0x00002aaaab9682dc in free () from /lib64/libc.so.6
#18 0x00002aaaabef1496 in ?? () from /usr/lib64/python2.7/site-packages/numpy/core/multiarray.so
#19 0x00002aaaaad888c7 in PyEval_EvalFrameEx () from /usr/lib64/libpython2.7.so.1.0
#20 0x00002aaaaad8ac49 in PyEval_EvalCodeEx () from /usr/lib64/libpython2.7.so.1.0
#21 0x00002aaaaadb9592 in PyEval_EvalCode () from /usr/lib64/libpython2.7.so.1.0
#22 0x00002aaaaadc7c61 in ?? () from /usr/lib64/libpython2.7.so.1.0
#23 0x00002aaaaadc8074 in PyRun_FileExFlags () from /usr/lib64/libpython2.7.so.1.0
#24 0x00002aaaaadc87c9 in PyRun_SimpleFileExFlags () from /usr/lib64/libpython2.7.so.1.0
#25 0x00002aaaaadd21bc in Py_Main () from /usr/lib64/libpython2.7.so.1.0
#26 0x00002aaaab90ebfd in __libc_start_main () from /lib64/libc.so.6
#27 0x00000000004006e9 in _start () 
```

这让我相信基本问题在于 numpy 多阵列核心模块（第一个输出中的第 4 行和第二个输出中的第 18 行）。为了以防万一，我将在 numpy 和 scipy 中将其作为错误报告提出。

有没有人见过这个？

**更新：2013 年 2 月 17 日（太平洋标准时间下午 4:45）**

我找到了一台可以运行代码的机器，它具有更新版本的 SciPy (0.11) 和 NumPy (1.7.0)。直接运行代码（没有 GDB）导致 seg 错误，没有任何输出到 stdout 或 stderr。再次通过 GDB 运行，我得到以下信息：

```
Program received signal SIGSEGV, Segmentation fault.
0x00002aaaabead970 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) bt
#0  0x00002aaaabead970 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00002aaaac5fcd04 in PyDataMem_FREE (ptr=<optimized out>, $K8=<optimized out>) at numpy/core/src/multiarray/multiarraymodule.c:3510
#2  array_dealloc (self=0xc00ab7edbfc228fe) at numpy/core/src/multiarray/arrayobject.c:416
#3  0x0000000000498eac in PyEval_EvalFrameEx ()
#4  0x000000000049f1c0 in PyEval_EvalCodeEx ()
#5  0x00000000004a9081 in PyRun_FileExFlags ()
#6  0x00000000004a9311 in PyRun_SimpleFileExFlags ()
#7  0x00000000004aa8bd in Py_Main ()
#8  0x00002aaaabe4f76d in __libc_start_main () from /lib/x86_64-linux-gnu/libc.so.6
#9  0x000000000041b9b1 in _start () 
```

我知道这不如使用调试符号编译的 NumPy 有用，我会尝试这样做并稍后发布输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T17:56:59.417

在 Numpy Github 页面 ( [https://github.com/numpy/numpy/issues/2995](https://github.com/numpy/numpy/issues/2995) ) 上讨论了同一问题后，我注意到 Numpy/Scipy 将不支持如此大量的非零在得到的稀疏矩阵中。

基本上，`W`是一个稀疏矩阵，并且`Q`（或`np.log(Q)-1`）是一个密集矩阵。当将密集矩阵与稀疏矩阵相乘时，所得乘积也将以稀疏矩阵形式表示（这很有意义）。但是，请注意，由于我的`W`矩阵中没有零行，因此结果乘积`W*(np.log(Q)-1)`将有`nnz > 2^31`（220 万乘以 2000），这超出了当前 Scipy 版本中稀疏矩阵中的最大元素数。

在这个阶段，我不确定如何让它工作，除非用另一种语言重新实现。也许它仍然可以在 Python 中完成，但最好只编写一个 C++ 和 Eigen 实现。

特别感谢[pv。](https://stackoverflow.com/users/108184/pv)感谢您在此问题上的帮助以查明确切的问题，并感谢其他所有人的头脑风暴！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:40:57.897

> 基本上，`W`是一个稀疏矩阵，并且`Q`（或`np.log(Q)-1`）是一个密集矩阵。当将密集矩阵与稀疏矩阵相乘时，所得乘积也将以稀疏矩阵形式表示（这很有意义）。

我可能在这里遗漏了一些非常明显的东西，最终看起来像个白痴，但是……</p>

如果`Q`是一个密集矩阵，并且您希望将结果存储为密集矩阵，那么您可能也有足够的空间来保存`W`密集矩阵。意思是：

```
W.todense()*(np.log(Q)-1) 
```

查看详细信息，正如您在评论中计算的那样，这将需要 35.8GB 的​​临时内存。鉴于您有 131GB 的数据并且这“可以很好地放入内存”，暂时使用另外 35.8GB 似乎是合理的。

如果*不合理*，你总是可以自己分解矩阵乘法。显然，逐行或逐列执行会使您的整个过程变慢（可能不如将过程推到边缘进行交换，但仍然可能太慢而无法接受）。但是，例如，一次处理一大块 1GB 的行应该不会太糟糕。这将意味着大约几 GB 的临时存储空间，并且可能只是小幅减速。当然，它是更复杂和丑陋的代码，但并非难以管理。

# android - android中listview中的Gridview面临android.view.InflateException问题

> ID：14906967
> 
> 赞同：0
> 
> 时间：2013-02-16T04:32:13.913
> 
> 标签：android, layout, listadapter, android-gridview, layout-inflater

我必须在 android 应用程序的文本和列表视图中创建自定义网格视图。

在这里，我必须在 gridview 上显示类别名称，如果类别名称匹配，这意味着必须显示列表显示在相应类别名称下方的列表视图上。这里我参考了以下教程：[我的参考教程](http://www.rdcworld-android.blogspot.in/2011/09/grid-view-demo-with-images.html)

如果类别名称是 notchbolly，我已在 gridview.here 上显示类别名称，这意味着 gridview 列表项显示在 notchbolly 类别名称上方的水平列表视图上。

但是在这里我必须运行该应用程序意味着 else 部分仅在所有类别名称上执行。我的代码中有什么错误。请给我这些解决方案...

我使用了以下代码：

```
public class LazyAdapter extends BaseAdapter {
private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater = null;
public ImageLoader imageLoader;
ListAdapter adapter;
public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data = d;
    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader = new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView title = (TextView) vi.findViewById(R.id.title); 
    ListView imageView = (ListView) vi
            .findViewById(R.id.grid_item_image);

            HashMap<String, String> item = new HashMap<String, String>();
    item = data.get(position);
    // Setting all values in listview
    title.setText(item.get(MainActivity.KEY_TITLE));

        if (item.equals("notchbolly")) {
                 listview.setAdapter(this);
            }  else {
                    listview.setBackgroundResource(R.drawable.rihanna);
                } 
         return vi;
               } 
```

**MainActivity.java：**

```
public class MainActivity extends Activity {
  static final String URL = "http://webservices/new_feed_articls.xml";
 static String KEY_CATEGORY = "Categories";
 static final String KEY_TITLE = "Category";
 static final String KEY_TITLENAME = "name";

 LazyAdapter adapter;

 @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
      final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
    XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_TITLE);

        // looping through all song nodes &lt;song&gt;
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>   ();
            Element e = (Element) nl.item(i);
             map.put( KEY_TITLE,((Element)nl.item(i)).getAttribute(KEY_TITLENAME));
             // map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            songsList.add(map);
        }
        GridView list = (GridView) findViewById(R.id.listView1);
    adapter = new LazyAdapter(this, songsList);
     list.setAdapter(adapter); 
```

请给我这些的解决方案。我的代码有什么问题？？？？

**编辑：**

list_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
   >

  <com.example.notch.HorizontalListView
android:id="@+id/grid_item_image"
android:layout_width="fill_parent"
android:layout_height="50dp"
android:background="#FFFFFF"
 />
<TextView
    android:id="@+id/title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    >
</TextView>

</LinearLayout> 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:background="#FFFFFF"
android:orientation="vertical">

 <GridView
android:id="@+id/listView1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFFFFF"
/> 
```

如果类别名称是 notchbolly，我已在 gridview.here 上显示类别名称，这意味着 gridview 列表项显示在 notchbolly 类别名称上方的水平列表视图上。

但是在这里我必须运行该应用程序意味着 else 部分仅在所有类别名称上执行。我的代码中有什么错误。请给我这些解决方案...

这里 else 部分只执行了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T05:47:00.523

ScrollView + LinearLayout，比如说，5 个画廊控件（如果你有 5 个类别）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:08:00.770

我认为您可能需要修改一些细节。

1号：`XML file line #11: Error inflating class`

这意味着在您的 XML 布局文件中，由于您从问题中删除了日志，因此不确定是哪一个，在扩充类时会出现问题，这很可能在扩充您的`com.example.notch.HorizontalListView`on list_row.xml 时发生。确保检查 Eclipse 上的**Graphical Layout**选项卡，它通常会给出一个错误，表明它无法创建自定义视图。类似的东西：

```
The following classes could not be found:
- com.example.custom.view (Change to android.view.View, Fix Build Path, Edit XML, Create Class) 
```

第 2 号：您似乎正在将 ListView 投射到您的自定义视图中。取自您的 getView() 方法：

```
ListView imageView = (ListView) vi
        .findViewById(R.id.grid_item_image); 
```

在您的 list_row 上，grid_item_image 是一个`com.example.notch.HorizontalListView`. 这也可能导致一些小问题。

第 3 点：为什么要将适配器设置在适配器的项目中？:crazyFace: 如果你打算在你的 gridview 中有一个 listview，创建两个不同的适配器，以及两个不同的视图布局。

同样，从您的 getView() 中：

```
if (item.equals("notchbolly")) {
             listview.setAdapter(this);
        } 
```

顺便说一句，上面这三行有一个空指针异常，`listview`是一个未在适配器中定义的项目。你定义的`ListView`，是一个不同的标识符：`imageView`，所以你也想检查一下。

# java - 如何在android sdk上执行动画？

> ID：14906969
> 
> 赞同：1
> 
> 时间：2013-02-16T04:32:28.920
> 
> 标签：java, android, algorithm, animation, objectanimator

我正在为 android 应用程序制作动画。该应用程序的目的是动画排序/搜索算法。我在使用 ObjectAnimator 时遇到问题，因为我无法让它交换两个元素。这是我的相关代码：

```
public void swapNodes(TextView node1, TextView node2, int animationSpeed) {
    //switching leftmost with rightmost
    if (node1.getX() > node2.getX()) 
    {
        TextView temp = node1;
        node1 = node2;
        node2 = temp;

    }
    Handler h = new Handler();
    h.postDelayed(moveUpRunnable(node1, 150, 0, 1000), ithRun*1000);
    ++ithRun;
    h.postDelayed(moveDownRunnable(node2, 150, 0, 1000), ithRun*1000);
    ++ithRun;
    float distance = node2.getX() - node1.getX();
    h.postDelayed(moveRightRunnable(node1, distance, 0, 1000), ithRun*1000);
    ++ithRun;
    h.postDelayed(moveLeftRunnable(node2, distance, 0, 1000), ithRun*1000);
    ++ithRun;
    h.postDelayed(moveDownRunnable(node1, 150, 0, 1000), ithRun*1000);
    ++ithRun;
    h.postDelayed(moveUpRunnable(node2, 150, 0, 1000), ithRun*1000);
    ++ithRun;

}
public void moveDown (final TextView n, float distance, int timeDelay, int duration) {
    ObjectAnimator down = ObjectAnimator.ofFloat(n, "TranslationY", n.getTranslationY() + distance);
    down.setStartDelay(timeDelay);
    down.setDuration(duration);

    down.start();
}
public Runnable moveRightRunnable(final TextView n, final float distance, final int timeDelay, final int duration) {
    Runnable r = new Runnable()
    {
        public void run()
        {
            moveRight(n,distance,timeDelay,duration);
        }
    };
    return r;
}
public void moveRight (final TextView n, float distance, int timeDelay, int duration) {
    ObjectAnimator right = ObjectAnimator.ofFloat(n, "TranslationX", n.getTranslationX() + distance);
    Log.d("moveRightX", Float.toString(n.getTranslationX()));
    Log.d("moveRightY", Float.toString(n.getTranslationY()));
    right.setStartDelay(timeDelay);
    right.setDuration(duration);

    right.start();
}
public Runnable moveLeftRunnable(final TextView n, final float distance, final int timeDelay, final int duration) {
    Runnable r = new Runnable()
    {
        public void run()
        {
            moveLeft(n,distance,timeDelay,duration);
        }
    };
    return r;
}
public void moveLeft (final TextView n, float distance, int timeDelay, int duration) {
    ObjectAnimator left = ObjectAnimator.ofFloat(n, "TranslationX", n.getTranslationX() - distance);
    Log.d("moveLeftX", Float.toString(n.getTranslationX()));
    Log.d("moveLeftY", Float.toString(n.getTranslationY()));
    left.setStartDelay(timeDelay);
    left.setDuration(duration);

    left.start();
}
public Runnable moveUpRunnable(final TextView n, final float distance, final int timeDelay, final int duration) {
    Runnable r = new Runnable()
    {
        public void run()
        {
            moveUp(n,distance,timeDelay,duration);
        }
    };
    return r;
}
public void moveUp (final TextView n, float distance, int timeDelay, int duration) {
    ObjectAnimator up = ObjectAnimator.ofFloat(n, "TranslationY", n.getTranslationY() - distance);
    up.setStartDelay(timeDelay);
    up.setDuration(duration);

    up.start();

} 
```

# forms - 如何将验证码添加到 Typo3 FORM cObj？

> ID：14906971
> 
> 赞同：1
> 
> 时间：2013-02-16T04:32:53.960
> 
> 标签：forms, typo3, captcha, freecap

根据官方的表单扩展文档，有一个CAPTCHA FormObject：

> 该对象将搜索已安装的验证码扩展并在表单中放置的位置使用它。这可以在顶部，也可以在表单的底部。目前支持所有（如果我在这里错了，请纠正我）验证码扩展。

但是，我无法在我的表单中使用它。表单向导中没有验证码项目，即使我明确地将其添加到 PageTS 配置中。当我手动尝试向我的表单添加验证码时，没有任何反应。

是否有人成功地将验证码添加到使用（不是这样）新表单扩展构建的表单中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-15T14:01:03.607

我建议不要使用验证码，而是安装[https://typo3.org/extensions/repository/view/wt_spamshield](https://typo3.org/extensions/repository/view/wt_spamshield)。此扩展支持 TYPO3 的新旧形式扩展，最高可达 6.2。这个扩展添加了不同的、不可见的表单保护，这些保护比不可读的验证码更强大；）

恕我直言，新表单扩展 (EXT:form) 不支持任何验证码扩展。

# iphone - 使用 UIImagePickerController 实现放大\缩小

> ID：14906974
> 
> 赞同：1
> 
> 时间：2013-02-16T04:33:13.987
> 
> 标签：iphone, ios, cocoa-touch, uiimagepickercontroller, cgaffinetransformscale

我一直在使用`UIImagePickerController`我的应用程序预览目的，我已经自定义和放大/缩小按钮，我以前没有使用过，但是我已经用谷歌搜索并使用这样`CGAffineTransformScale`的实现放大功能......`CGAffineTransformScale`

```
- (void) zoom_in_clkd
{

        preview_picker.cameraViewTransform = CGAffineTransformScale(preview_picker.cameraViewTransform, 1.0, 1.2499);

} 
```

看起来不错，但是我想实现缩小功能，我不知道它的 sx,sy 值应该是什么`CGAffineTransformScale`。

谁能告诉一个好的教程或示例代码来使用`CGAffineTransformScale`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:58:28.567

sx 和 sy 分别建议 x 和 y 值的缩放因子。

如果要缩小视图，请提供 sx 和 sy < 1.0

从此[链接](https://developer.apple.com/library/mac/#samplecode/CIAnnotation/Introduction/Intro.html#//apple_ref/doc/uid/DTS10003682)下载示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T05:44:17.520

我以不同的方式模拟了缩小功能，我所做的是重置身份（恢复到原始大小）并再次放大到我想要的位置。

```
 if (cameraTransformX == 2.0) {
            preview_picker.cameraViewTransform = CGAffineTransformIdentity;
            cameraTransformX -= 1.0;
        } else if (cameraTransformX == 3.0) {
            preview_picker.cameraViewTransform = CGAffineTransformIdentity;
            preview_picker.cameraViewTransform = CGAffineTransformScale(preview_picker.cameraViewTransform, 1.0, 1.2499);
            cameraTransformX -= 1.0;
        }  else if (cameraTransformX == 4.0) {
            preview_picker.cameraViewTransform = CGAffineTransformIdentity;
            preview_picker.cameraViewTransform = CGAffineTransformScale(preview_picker.cameraViewTransform, 1.0, 1.2499);
            preview_picker.cameraViewTransform = CGAffineTransformScale(preview_picker.cameraViewTransform, 1.0, 1.2499);
            cameraTransformX -= 1.0;
        } 
```

我知道这不是回到先前转换的正确方法，但它会解决问题。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T09:37:10.210

我的解决方案是保存初始 cameraViewTransform 并将其用于放大/缩小。要缩小比例，请缩小比例，例如最初设置为 3。这是我的代码：

```
 // initial cameraViewTransform
    self.initialTransform = self.videoRecorderController.cameraViewTransform;

    // for zoom in
    if(self.zoomIn) {
            // increment scale
            self.scale += 0.5;
            self.videoRecorderController.cameraViewTransform = CGAffineTransformScale(self.initialTransform, self.scale, self.scale);
    }
    // for zoom out
    else {
           self.scale -= 0.5;
           self.videoRecorderController.cameraViewTransform = CGAffineTransformScale(self.initialTransform, self.scale , self.scale);
    } 
```

# python - 从具有“哨兵”的链表中删除节点

> ID：14906976
> 
> 赞同：0
> 
> 时间：2013-02-16T04:33:28.513
> 
> 标签：python, linked-list

我正在尝试根据 CLRS 书编写一个包含哨兵的链接列表。由于某种原因，我的删除功能将一大块 LL 删除到要删除的节点。附上我的代码。任何建议将不胜感激。

```
class Node():
    def __init__(self,v):
        self.value = v
        self.next = None
        self.prev = None

    def getValue(self):
        return self.value

    def changeValue(self,v):
        self.value = v

    def getNext(self):
        return self.next

    def getPrev(self):
        return self.prev

    def setNext(self,newNext):
        self.next = newNext

    def setPrev(self,newPrev):
        self.prev = newPrev

class List(Node):
    def __init__(self):
        self.nil = Node(None)

    def addNode(self,v):
        a = Node(v)
        a.setNext(self.nil.next)
        a.setPrev(self.nil)
        self.nil.next = a

    def length(self):
        count = 0
        a = self.nil
        while(a.next != None):
            count += 1
            a = a.getNext()
        return count

    def search(self,v):
        a = self.nil
        while(a.next != None):
            if (a.value == v):
                return True
            a = a.getNext()
        return False

    def remove(self,v):
        a = self.nil.next
        breakloop = 0
        while((a.next != None) and (breakloop == 0)):
            if (a.value == v):
                a.prev.next = a.next
                a.next.prev = a.prev
                breakloop = 1
            a = a.getNext()

    def printList(self):
        a = self.nil.next
        while(a.next != None):
            print(a.value)
            a =a.getNext()
        print(a.value)

a = List()
a.addNode(4)
a.addNode(7)
a.addNode(2)
a.addNode(6)
a.addNode(5)
a.addNode(8)
a.addNode(1)
a.addNode(14)
a.addNode(13)
a.addNode(17)
a.addNode(18)
a.printList()
a.remove(13)
a.printList() 
```

输出将是
18 17 13 14 1 8 5 6 2 7 4
14 1 8 5 6 2 7 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T05:11:58.163

@tcaswell 已正确诊断出代码问题：您没有`prev`在节点上设置曾经正确的链接`self.nil.next`。但是，我认为他的解决方案并不理想。这是我的建议：

这是该问题的直接解决方法：

```
def addNode(self, v):
    a = Node(v)

    a.setNext(self.nil.next)
    self.nil.next.setPrev(a) # this is the link that was previously missing

    a.setPrev(self.nil)
    self.nil.setNext(a) 
```

但是，当列表为空时，这将无法正常工作，因为`self.nil.next`在`None`开始时。不过，我们可以通过在构造函数`self.nil`中创建它时链接到自身来修复它：`List`

```
def __init__(self):
    self.nil = Node(None)
    self.nil.next = self.nil.prev = self.nil # set up circular links! 
```

现在，`self.nil`将始终有一个有效的节点，因为它是`next`和`prev`值。

您将需要更改您的`removeNode`and`printList`循环以检查`self.nil`而不是`None`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T04:50:20.887

错误在您的`addNode`函数中，*所有*`.prev`节点的节点都是*`self.nil`*

 *使用以下内容：

```
def addNode(self,v):
    a = Node(v)
    a.setNext(self.nil.next)
    if self.nil.next is not None:
        self.nil.next.setPrev(a)
    a.setPrev(self.nil)
    self.nil.next = a 
```

将解决您的问题。您可能希望将此逻辑放在`setPrev`and`setNext`函数中（以确保始终适用于除末端之外的所有内容）`a == a.next.prev`。`a == a.prev.next``a`*

# java - 使用 Java 中的 Jackson JSON 库解析 ASP.NET MVC 返回的日期

> ID：14906981
> 
> 赞同：5
> 
> 时间：2013-02-16T04:34:09.480
> 
> 标签：java, android, asp.net-mvc, jackson

我正在使用 Jackson JSON 库从我的 Android 应用程序中的服务器解析 JSON。但是，每当我收到 DateTime 时，解析请求都会失败，因为它是这种格式：

```
"/Date(1277931782420)/" 
```

我知道我应该这样做：

```
ObjectMapper om = new ObjectMapper();
om.setDateFormat(new TicksSinceFormat()); 
```

但我不知道我是否可以使用 SimpleDateFormat（以及我将使用什么格式字符串？）或者我需要编写自己的 DateFormat 解析器。因此，如果有人可以帮助提供代码示例，我将不胜感激。

**编辑：** 好的，请参阅我的完整代码答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T05:32:43.067

事实证明这比我预期的要难：

```
public class TicksSinceFormat extends DateFormat {
    @Override
    public StringBuffer format(Date date, StringBuffer buffer, FieldPosition field) {
        long millis = date.getTime();

        return new StringBuffer("/Date(" + millis + ")/");
    }

    @Override
    public Date parse(String string, ParsePosition position) {
        int start = string.indexOf("(") + 1;
        int end = string.indexOf(")");

        String ms = string.substring(start, end);
        Date date = new Date(Long.parseLong(ms));

        position.setIndex(string.length() - 1); // MUST SET THIS
        return date;
    }

    @Override
    public Object clone() {
        return new TicksSinceFormat(); // MUST SET THIS
    }
} 
```

使用类非常简单，只需执行以下操作：

```
ObjectMapper om = new ObjectMapper();
om.setDateFormat(new TicksSinceFormat()) 
```

我认为这可以更好地编码 + 当涉及到 .NET Ticks VS Java 滴答时，我需要处理差异 - 但现在就可以了。如果有人对提到的问题有更好的解决方案或更深入的了解，我稍后会处理 - 请随时发布，如果更好，我会将您的答案标记为正确的答案。

编辑：正如我在这个[问题和答案](https://stackoverflow.com/questions/14973286/asp-net-mvc-json-datetime-serialization-conversion-to-utc)中解释的那样，我已经切换到服务器上的 ServiceStack.Text 库，它返回不同的 ISO8601 格式。对于那种格式，我使用了稍微不同的解析（因为杰克逊在解析包含毫秒的 ISO8601 时遇到了麻烦）。当然，与我发布的其他代码一样 - 如果您有更好的版本，请告诉我（请发布代码/编辑这篇文章，而不是诉诸哲学修辞来说明应该如何完成）：

```
@SuppressLint("SimpleDateFormat")
public class JacksonSimpleDateFormat extends SimpleDateFormat {
    public JacksonSimpleDateFormat() {
        if (mParser == null) {
            mParser = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
            mParser.setTimeZone(TimeZone.getTimeZone("UTC"));
        }
    }

    @Override
    public StringBuffer format(Date date, StringBuffer buffer, FieldPosition field) {
        return mParser.format(date, buffer, field);
    }

    private static SimpleDateFormat mParser;
    @Override
    public Date parse(String string, ParsePosition position) {
        String str = string.split("\\.")[0];

        Date date = null;
        try {
            date = mParser.parse(str);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        position.setIndex(string.length() - 1);
        return date;
    }

    @Override
    public Object clone() {
        return new JacksonSimpleDateFormat();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T04:41:55.777

我可能错了，因为我对 Android 开发还没有深入了解，但是您提供的格式：

```
"/Date(1277931782420)/" 
```

似乎是 Unix 纪元时间。

如果是这种情况，您将不想/不需要使用`SimpleDateFormat`. 相反，尝试从它创建一个`Long`并传递给`Date`构造函数，考虑它是基于秒还是毫秒的纪元值。

这是一个 StackOverflow 帖子，提供了这样做的代码：[https ://stackoverflow.com/a/535017/463196](https://stackoverflow.com/a/535017/463196)

# c++-cli - 托管结构被发送到非托管函数

> ID：14906982
> 
> 赞同：1
> 
> 时间：2013-02-16T04:34:14.983
> 
> 标签：c++-cli

```
int atClass1::read_file
(String^ file_path, /* Path tofile */
 HdfCallVars % ret_vals) 
```

这是我的功能。在其中我有很多本机 C++ 代码。我遇到了一个严重的问题

```
/* Iterate through the links, filling in needed data as discovered. */
  io_err = H5Literate (group_id, H5_INDEX_NAME, H5_ITER_NATIVE,

               &i, get_sonar_data, (void*)& ret_vals); 
```

不会编译！说 ret_vals 是托管的，我不能对它做指针和符号的东西。我有麻烦了吗？或者有没有办法摆脱我的困境？H5 函数是对 HDF5 库的调用。谢谢，萨罗杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:59:22.707

在 .Net 中，无法保证对象将保留在其当前内存位置，因为垃圾收集器会在需要时“压缩”堆空间。

要获得指向托管对象的本机指针，您应该“固定”该对象：

```
pin_ptr<HdfCallVars> pinned = &ret_vals;
io_err = H5Literate (group_id, H5_INDEX_NAME, H5_ITER_NATIVE, 
                        &i, get_sonar_data, (void*)pinned); 
```

请注意，变量`pinned`超出范围后指针将被取消固定，如果 H5Literate 存储指针以供将来使用，您应该使用 System::Runtime::InteropServices::GCHandle 固定值，如下所示：

```
GCHandle ^handle = GCHandle::Alloc(ret_vals);
io_err = H5Literate (group_id, H5_INDEX_NAME, H5_ITER_NATIVE, 
                        &i, get_sonar_data, (void*)handle->AddrOfPinnedObject()); 
```

当你不再需要指针时，你应该释放它：

```
handle->Free(); 
```

# arm - 如何在 Linux 中禁用中断

> ID：14906991
> 
> 赞同：1
> 
> 时间：2013-02-16T04:35:49.133
> 
> 标签：arm, interrupt

我正在使用 mini2440 臂板和 GPIO 来控制与 GPIO 连接的硬件。我正在使用随板的 cd 一起提供的 BSP。我只启用了运行硬件所需的功能。

我在内核中禁用了音频、以太网和不必要的东西，这样它就不会引起中断，从而引起 CPU 的注意。但问题是有时 GPIO 上会发生一些中断，并且硬件会发生故障。我知道我可以通过 cat /proc/interrupt 看到所有中断，但是我应该如何知道哪个设备的 GPIO 上发生了哪个中断？

我正在以最高优先级（-20）运行我的应用程序，但有时仍会发生外部中断。

当我在 GPIO 上发送数据时，只有 s3c2440 的 TimerTick 会中断，但这很好，它是必需的，但不是其他的。请告诉我如何找到发生了哪个中断（我知道我可以通过 cat /proc/interrupt 检查它）以及如何禁用（通过 ifconfig eth0 down 在以太网上禁用中断）来自内核的中断？需要一些专家解决方案，我已经尝试过从人们那里获得帮助的解决方案，但需要一些专家解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:46:10.460

在内核中禁用设备对中断（由*硬件*生成）没有真正的影响，它只会影响*软件*处理它们的方式。如果设备不存在，则不会产生中断。Linux 是由绝对的性能怪胎编写的，除非硬件行为不端，否则中断处理几乎与它可能的一样好/快。

你到底想做什么？您*确定*您没有试图获得您的机器无法提供的性能吗？

# matlab - 如何在 MATLAB 中索引数据序列？

> ID：14906996
> 
> 赞同：0
> 
> 时间：2013-02-16T04:36:44.220
> 
> 标签：matlab, image-processing, sequence

我有一个图像框架及其均值和方差。我想同时访问几帧均值和方差。为此，我需要索引每个帧中的均值和方差。

```
[M V] = mean_var(frame); 
```

我有一个计算帧均值和方差的函数。我怎样才能将它们索引为它们的序列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:21:19.210

假设你的框架有一个单元阵列

```
frames = { frame1, frame2, ... }; 
```

您可以通过

```
[m v] = cellfun( @mean_var, frames ); 
```

现在你有向量**和** `m`元素保持帧的均值和方差。`v``numel(frames)`