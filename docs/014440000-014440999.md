# StackOverflow 问答 14440000-14440999

# xmpp - XMPP strophe，获取出席名单

> ID：14440003
> 
> 赞同：5
> 
> 时间：2013-01-21T13:44:24.480
> 
> 标签：xmpp, openfire, ejabberd, strophe

如何使用 Strophe lib for JS 获得我的“朋友”的在线状态？不是花名册，甚至是单个存在（或者我必须在花名册中做 1 个请求/用户？）通常我只会在每个资源的“存在更改”时收到通知，但我想知道用户是在线还是离线（像 Pidgin 一样），无需考虑每个用户记录的许多可以同时在线的资源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T16:22:51.770

默认情况下将所有用户视为离线。对于所有在线用户资源，您会自动收到在线通知。您将获得所有状态更改，并在登录后获得所有在线联系人的初始值。

# java - Java拆分字符串ArrayIndexOutOfBounds

> ID：14440004
> 
> 赞同：1
> 
> 时间：2013-01-21T13:44:25.947
> 
> 标签：java, indexing, split, bounds

我得到 java.ArrayIndexOutOfBounds ......我不知道为什么。

```
 private final static String TEST_STRING = "My awesome string !^:_TEEEEEEEEEEEEEST";

    public void createPartControl(Composite parent){
        String[] temp = TEST_STRING.split("^:_");
        System.out.println(temp[0] + " ---> " + temp[1]);
    } 
```

编辑：

> java.lang.ArrayIndexOutOfBoundsException: 1 at com.chriss.cipher.View.createPartControl(View.java:17) at org.eclipse.ui.internal.ViewReference.createPartHelper(ViewReference.java:386) at org.eclipse.ui。 internal.ViewReference.createPart(ViewReference.java:240) at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595) at org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:315)在 org.eclipse.ui.internal.ViewPane.setVisible(ViewPane.java:534) 在 org.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:180) 在 org.eclipse.ui.internal.presentations .util.PresentablePartFolder.select(PresentablePartFolder.java:270) 在 org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T13:46:19.600

`split`接受正则表达式，其中`^`有特殊含义：字符序列的开头。这意味着您实际上并没有按预期拆分字符串。转义`^`标志`\`：

```
TEST_STRING.split("\\^:_"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:46:21.403

`String.split(regex)`接受**正则表达式**作为参数，您需要`^`用反斜杠转义，因为`^`在正则表达式世界中是一个特殊字符（元字符）

```
 String[] temp = TEST_STRING.split("\\^:_"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:47:38.187

```
String[] temp = TEST_STRING.split("\\^:_"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:49:10.653

private final static String TEST_STRING = "我的真棒字符串！^:_TEEEEEEEEEEEEEEST";

```
public void createPartControl(Composite parent){
    String[] temp = TEST_STRING.split("\\^:_");
    System.out.println(temp[0] + " ---> " + temp[1]);
}`enter code here` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T14:08:05.203

您应该使用`Pattern.quote(String)`. 引用所有可能的正则表达式特殊代码`\`。

```
String[] deviceParts = deviceID.split(Pattern.quote(".")); 
```

或者 - 在你的情况下 -

```
String[] temp = TEST_STRING.split(Pattern.quote("^:_")); 
```

# javascript - 使用 javascript 检测 HTML5

> ID：14440005
> 
> 赞同：2
> 
> 时间：2013-01-21T13:44:36.620
> 
> 标签：javascript, jquery, browser

我需要确保我的代码在所有浏览器 html 或 html5 中都能正常工作。我在 Firefox 和 Chrome 中的代码运行良好，但在 IE 中我有问题。我想修复它们...

如果客户端支持HTML5，还有这组代码。如果没有，请执行其他操作。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:48:32.723

有一个名为[Modernizr](http://modernizr.com/)的特征检测库可以提供帮助。

这是他们文档中的一个示例：

```
Modernizr.load({
  test: Modernizr.geolocation,
  yep : 'geo.js',
  nope: 'geo-polyfill.js'
}); 
```

`yep`如果地理位置可用，条件是要加载的脚本。如果`nope`脚本不可用，则条件是要加载的脚本 - 它将包含您的替代/ polyfill。

您想测试您想要使用的确切内容，而不是是否支持 HTML5。这是因为浏览器可能部分支持 HTML5 - 但也因为许多功能实际上根本不是 HTML5，而是一个单独的规范。（地理位置不是 HTML5 规范的一部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:29:28.783

使用 Internet Explorer 实现时，html5 存在问题。您将面临的大部分问题都来自 css3。要处理此问题，您可以手动更改 css，或包含类似 HTML5 Shiv。这是您需要包含的 URL。

```
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>

$("body").append(innerShiv("<section></section>")); 
```

上面说的链接也不错

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T14:27:54.570

亲爱的 这是简单的功能。您可以在没有任何库的帮助下检测浏览器是否支持 html5。

```
<script>
var test_canvas = document.createElement("canvas") //try and create sample canvas element
var canvascheck=(test_canvas.getContext)? true : false //check if object supports getContext() method, a method of the canvas element
if(canvascheck == true)
{
    alert("This browser support html5");
}
else{

     alert("This browser does not support html5");
}
</script> 
```

# php - 通过 Yahoo 服务器发送时设置返回路径返回错误 553

> ID：14440009
> 
> 赞同：0
> 
> 时间：2013-01-21T13:44:50.707
> 
> 标签：php, email, pear

我正在使用以下代码发送电子邮件，它工作正常

```
 $headers = array (
        'From' => $emailAddress,
        'To' => $emailDest,
            'Subject' => $subject,
            'Return-Path' => 'bounce@*****.eu',
            'X-Codent' => '['.$codent_header.']',
            'X-Ent' => '['.$ent_header.']',
            'X-Bzd' => '['.$database.']',
            'X-Email' => '['.$email['Email'].']'
    );                                      
    $hdrs = $mime->headers($headers, true);

    $smtp = Mail::factory('smtp',
        array ('host' => 'ssl://'.$emailServer,
        'auth' => true,
        'port' => '465',
        'username' => $emailUtilizator,
        'password' => $emailParola));

    $mail = $smtp->send($emailDest, $hdrs, $body); 
```

然而几天前，该脚本在通过雅虎发送时停止工作。快速检查日志显示发送尝试返回以下错误：

```
Failed to set sender: bounce@*****.eu [SMTP: Invalid response code received from server (code: 553, response: From address not verified - see http://help.yahoo.com/l/us/yahoo/mail/original/manage/sendfrom-07.html)] 
```

如果我删除 Return-Path，该脚本就可以工作，但这样做意味着我无法再跟踪电子邮件，也无法获得准确的报告。

该错误仅在处理 yahoo 时发生。Google、live 和其他地址工作正常。

关于如何克服这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:18:52.880

我建议检查您的邮件服务器日志。找出远程（雅虎）邮件服务器的作用——我认为它正在尝试验证返回地址是否确实有效。

还要确保回信地址存在并接受邮件。

# c# - 如何在里面创建一个带有 GridView 的 ListView

> ID：14440010
> 
> 赞同：0
> 
> 时间：2013-01-21T13:44:50.977
> 
> 标签：c#, .net, wpf, listview, gridview

我正在尝试将 ListView 项目放入我的 ListView 中，该 ListView 使用 GridView 对象分隔成列。

我不知道如何将新项目放入列中，并且网络上没有那么多有用的教程。

下面是 ListView 的 XAML 代码：

```
 <ListView Canvas.Left="200" Canvas.Top="68" Height="138" Name="listView1" Width="444">
        </ListView> 
```

并且 GridView 是动态创建的：

```
 public MainWindow()
    {
        InitializeComponent();

        GridView grdView = new GridView();

        GridViewColumn nameColumn = new GridViewColumn();
        nameColumn.DisplayMemberBinding = new Binding("Time");
        nameColumn.Header = "Time";
        nameColumn.Width = 120;
        grdView.Columns.Add(nameColumn);

        GridViewColumn ageColumn = new GridViewColumn();
        ageColumn.DisplayMemberBinding = new Binding("Date");
        ageColumn.Header = "Date";
        ageColumn.Width = 120;
        grdView.Columns.Add(ageColumn);

        listView1.View = grdView;
    } 
```

我想在 ListView 中添加一些项目，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:43:38.537

您需要将其绑定到一些数据

[ItemsControl.ItemsSource 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource%28v=vs.85%29.aspx)

# java - 如何在 Java 中使用 XStream 构建更好看的 XML？

> ID：14440011
> 
> 赞同：0
> 
> 时间：2013-01-21T13:44:53.313
> 
> 标签：java, xml, formatting, xstream

我在一个类中创建了一个 main() 方法来测试 XML 文件的构造。

```
public static void main(String[] args) {
    createXmlEmail();
} 
```

这就是构建 XML 文件的方法。

```
private static void createXmlEmail() {
    XStream xstream = new XStream(new DomDriver());
    xstream.setMode(XStream.NO_REFERENCES);
    xstream.alias("email", EmailPojo.class);
    xstream.alias("recipient", Recipient.class);

    EmailPojo ep = new EmailPojo();

    List<Recipient> toRecipient = new ArrayList<Recipient>();
    toRecipient.add(new Recipient("user1@somecompany.com"));
    toRecipient.add(new Recipient("user2@somecompany.com"));

    List<Recipient> ccRecipient = new ArrayList<Recipient>();
    ccRecipient.add(new Recipient("user3@somecompany.com"));
    ccRecipient.add(new Recipient("user4@somecompany.com"));

    List<Recipient> bccRecipient = new ArrayList<Recipient>();
    bccRecipient.add(new Recipient("user5@somecompany.com"));
    bccRecipient.add(new Recipient("user6@somecompany.com"));

    ep.setTo(toRecipient);
    ep.setCc(ccRecipient);
    ep.setBcc(bccRecipient);
    ep.setSubject("subject test");
    ep.setBody("body test");

    String xml = xstream.toXML(ep);
    System.out.println(xml);
} 
```

提到的 EmailPojo 和 Recipient 类定义为：

```
public static class EmailPojo {
        private List<Recipient> to;
        private List<Recipient> cc;
        private List<Recipient> bcc;
        private String subject;
        private String body;

        public List<Recipient> getTo() {
            return to;
        }

        public void setTo(List<Recipient> to) {
            this.to = to;
        }

        public List<Recipient> getCc() {
            return cc;
        }

        public void setCc(List<Recipient> cc) {
            this.cc = cc;
        }

        public List<Recipient> getBcc() {
            return bcc;
        }

        public void setBcc(List<Recipient> bcc) {
            this.bcc = bcc;
        }

        public String getSubject() {
            return subject;
        }

        public void setSubject(String subject) {
            this.subject = subject;
        }

        public String getBody() {
            return body;
        }

        public void setBody(String body) {
            this.body = body;
        }
    }

public static class Recipient {
    private String recipient;

    public Recipient(String recipient) {
        this.recipient = recipient;
    }

    public String getRecipient() {
        return recipient;
    }

    public void setRecipient(String recipient) {
        this.recipient = recipient;
    }
} 
```

当我运行这个主类时，我没有收到任何错误或异常，输出是：

```
<email>
  <to>
    <recipient>
      <recipient>user1@company.com</recipient>
    </recipient>
    <recipient>
      <recipient>user2@company.com</recipient>
    </recipient>
  </to>
  <cc>
    <recipient>
      <recipient>user3@company.com</recipient>
    </recipient>
    <recipient>
      <recipient>user4@company.com</recipient>
    </recipient>
  </cc>
  <bcc>
    <recipient>
      <recipient>user5@company.com</recipient>
    </recipient>
    <recipient>
      <recipient>user6@company.com</recipient>
    </recipient>
  </bcc>
  <subject>subject test</subject>
  <body>body test</body>
</email> 
```

但我希望它是这样的：

```
<email>
  <to>
    <recipient>user1@company.com</recipient>
    <recipient>user2@company.com</recipient>
  </to>
  <cc>
    <recipient>user3@company.com</recipient>
    <recipient>user4@company.com</recipient>
  </cc>
  <bcc>
    <recipient>user5@company.com</recipient>
    <recipient>user6@company.com</recipient>
  </bcc>
  <subject>subject test</subject>
  <body>body test</body>
</email> 
```

我在这里想念什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:09:39.217

这是因为 Recipient 类具有属性接收者。如果您将收藏标记为@XStreamImplicit，则外部收件人标签将被消除。

请参阅[隐式集合](http://xstream.codehaus.org/annotations-tutorial.html#ImplicitCollections)

# liferay - 在 liferay 的 user_ 表中使用重复的电子邮件 ID

> ID：14440012
> 
> 赞同：3
> 
> 时间：2013-01-21T13:44:58.570
> 
> 标签：liferay

我有一个数字 screenName 12345，它的 emailAddress enteremail@12345.com 在 liferay 的 user_ 表中。当我创建另一个屏幕名称 enteremail@12345.com 时，emailAddress 字段对于同一个表有 enteremail@12345.com。因此，当我尝试使用屏幕名称登录时 enteremail@12345.com liferay 抛出异常。堆栈跟踪：

```
ERROR [JDBCExceptionReporter:101] Duplicate entry '10112-enteremail@12345.com' for key 'IX_615E9F7A'
 ERROR [OpenSSOAutoLogin:138] com.liferay.portal.SystemException: com.liferay.portal.kernel.dao.orm.ORMException: Could not execute JDBC batch update
com.liferay.portal.SystemException: com.liferay.portal.kernel.dao.orm.ORMException: Could not execute JDBC batch update
    at com.liferay.portal.service.persistence.impl.BasePersistenceImpl.processException(BasePersistenceImpl.java:91)
    at com.liferay.portal.service.persistence.UserPersistenceImpl.updateImpl(UserPersistenceImpl.java:477)
    at com.liferay.portal.service.persistence.UserPersistenceImpl.update(UserPersistenceImpl.java:441)
    at com.liferay.portal.service.impl.UserLocalServiceImpl.addUser(UserLocalServiceImpl.java:338)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at $Proxy70.addUser(Unknown Source)
    at com.liferay.portal.service.UserLocalServiceUtil.addUser(UserLocalServiceUtil.java:149)
    at com.liferay.portal.security.auth.OpenSSOAutoLogin.addUser(OpenSSOAutoLogin.java:170)
    at com.liferay.portal.security.auth.OpenSSOAutoLogin.login(OpenSSOAutoLogin.java:126)
    at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:211)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:154)
    at com.liferay.portal.servlet.filters.sso.opensso.OpenSSOFilter.processFilter(OpenSSOFilter.java:130)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:154)
    at com.liferay.portal.sharepoint.SharepointFilter.processFilter(SharepointFilter.java:193)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:154)
    at com.liferay.portal.servlet.filters.virtualhost.VirtualHostFilter.doFilter(VirtualHostFilter.java:191)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:154)
    at com.liferay.portal.servlet.filters.threadlocalcache.ThreadLocalCacheFilter.processFilter(ThreadLocalCacheFilter.java:55)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:154)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:94)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:738)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:595)
Caused by: com.liferay.portal.kernel.dao.orm.ORMException: Could not execute JDBC batch update
    at com.liferay.portal.dao.orm.hibernate.ExceptionTranslator.translate(ExceptionTranslator.java:41)
    at com.liferay.portal.dao.orm.hibernate.SessionImpl.flush(SessionImpl.java:122)
    at com.liferay.portal.service.persistence.BatchSessionImpl.update(BatchSessionImpl.java:75)
    at com.liferay.portal.service.persistence.BatchSessionUtil.update(BatchSessionUtil.java:53)
    at com.liferay.portal.service.persistence.UserPersistenceImpl.updateImpl(UserPersistenceImpl.java:472)
    ... 59 more 
```

我正在使用 Liferay 5.2.3 版本。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:46:27.013

在 EMAILADDRESS+COMPANYID 列上的 USER_ 表中有一个唯一索引。由于先前存在具有相同电子邮件的用户，因此在 OpenSSO 登录期间似乎未创建第二个用户。最简单的解决方案是更改第一个用户的电子邮件（来自 Liferay GUI 或数据库），然后才尝试创建第二个用户。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T15:21:14.733

得到了解决方案。从 Liferay 删除索引 IX_615E9F7A 并且它正在工作......

# salesforce - 如何从详细信息页面中删除“<< Back to List: Accounts”链接salesforce？

> ID：14440016
> 
> 赞同：0
> 
> 时间：2013-01-21T13:45:17.237
> 
> 标签：salesforce, visualforce

在任何详细信息页面的最左上角，我们将有记录的名称（或）记录自动编号。在下面我们将有这样的链接“<< 返回列表：Apex 类”。如何删除此链接？

[![在此处输入图像描述](../Images/f8031c9c247a215ad0db027add36e5a6.png)](https://i.stack.imgur.com/CyDcc.jpg)

如何删除图像中显示的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:37:59.917

这是一个标准功能，到目前为止您无法删除它。

已经有讨论了，

修复“返回列表”链接 [http://success.salesforce.com/ideaView?id=08730000000Bp4f](http://success.salesforce.com/ideaView?id=08730000000Bp4f)

# visual-studio-2010 - 尝试使用 ServiceController 时出现错误 MSB4062

> ID：14440020
> 
> 赞同：4
> 
> 时间：2013-01-21T13:45:25.827
> 
> 标签：visual-studio-2010, msbuild

我在 x64 机器上使用 Visual Studio 2010 和 TFS 2010。

我正在尝试在我的构建中使用 MSBuild 社区任务目标。此目标存在于源代码管理中。因此，在我的 csproj 文件中，我正在导入该特定目标，但现在出现以下错误：

错误 MSB4062：无法从程序集 C:\Program Files (x86)\MSBuild\MSBuildCommunityTasks\MSB uild.Community.Tasks.dll 加载“MSBuild.Community.Tasks.Attrib”任务。无法加载文件或程序集 'file:///C:\Program Files (x86)\MSBuild\MSBuildCommunityTasks\MSBuild.Community.Tasks.dll' 或其依赖项之一。该系统找不到指定的文件。确认声明正确，程序集及其所有依赖项都可用，并且任务包含实现 Micros oft.Build.Framework.ITask 的公共类。[C:\SampleTest\SampleTest.csproj]

这是我的代码：

```
 <Import Project="..\..\Builds\Common\MSBuildTasks\MSBuild.Community.Tasks\MSBuild.Community.Tasks.Targets" />
   <Target Name="BeforeBuild">
    <PropertyGroup>
      <MyService>ServiceName</MyService>
    </PropertyGroup>
    <ServiceController ServiceName="$(MyService)" Action="Stop" />-->
  </Target> 
```

对上述有什么想法吗？

当我在项目文件中指定 dll 时，为什么 MSBuild 会尝试在其他地方查找 dll？

提前致谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T09:52:44.343

我认为问题出在[MSBuild.Community.Tasks.Targets](https://github.com/loresoft/msbuildtasks/blob/master/Source/MSBuild.Community.Tasks/MSBuild.Community.Tasks.Targets)文件中——实际上是这个文件引用了`MSBuild.Community.Tasks.dll`程序集。

如果打开文件，您会看到一堆`UsingTask`元素，例如：

```
<UsingTask AssemblyFile="$(MSBuildCommunityTasksLib)" TaskName="MSBuild.Community.Tasks.Attrib" /> 
```

该`$(MSBuildCommunityTasksLib)`属性在文件顶部定义为：

```
<PropertyGroup>
    <MSBuildCommunityTasksPath Condition="'$(MSBuildCommunityTasksPath)' == ''">$(MSBuildExtensionsPath)\MSBuildCommunityTasks</MSBuildCommunityTasksPath>
    <MSBuildCommunityTasksLib>$(MSBuildCommunityTasksPath)\MSBuild.Community.Tasks.dll</MSBuildCommunityTasksLib>
</PropertyGroup> 
```

所以看起来你需要`$(MSBuildCommunityTasksPath)`在调用之前设置属性`<Import>`。

# pycharm - 跨多个操作系统共享一个 PyCharm 项目（不同的解释器路径）

> ID：14440025
> 
> 赞同：26
> 
> 时间：2013-01-21T13:45:53.493
> 
> 标签：pycharm

我刚刚开始使用 PyCharm。我一半时间花在 Windows 机器上，另一半时间花在 Linux 上。我一直在使用 Dropbox 在两者之间同步我的项目（除了版本控制）。这大部分工作正常，除了每次切换操作系统时，我都必须重置 PyCharm 项目解释器，因为两个操作系统的路径不同。

我唯一的选择是拥有两个不同的工作副本，每个操作系统一个（即停止将 Dropbox 用于 PyCharm 项目）？或者，有什么方法可以让 PyC​​harm 使用多个 Python 解释器并回退到一个可以工作的解释器上，这样我就可以将 Windows 和 Linux 配置存储在一个 PyCharm 项目文件中并让它自动工作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-21T14:58:16.973

使用设置 | 中的“编辑”按钮 两台机器上的 Python 解释器将解释器重命名为不包含完整路径的名称（例如“Python 2.7”）。项目文件存储解释器的名称，而不是路径，因此这将允许项目文件在两台机器上引用相同的解释器。

# php - Wordpress 的 sitename.com/post-name 类型永久链接背后的秘密是什么

> ID：14440029
> 
> 赞同：3
> 
> 时间：2013-01-21T13:46:14.280
> 
> 标签：php, wordpress

有`Wordpress`可能有 url，例如`sitename.com/post-title`虽然不存在具有 name 的目录`post-name`。

我猜想`index.php`（或可能是`404 page`）必须处理此类请求。

任何人都请解释这背后的确切技巧......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:47:10.597

[在此页面](http://www.sitepoint.com/guide-url-rewriting/)中阅读有关 Mod Rewrite 的基础知识。它是一个 Apache 模块，允许您解析请求内容并将其重定向到“真实”页面，而无需更改浏览器地址。

假设你有这个：

```
 RewriteRule ^post/([0-9]+)?/?([0-9]+)?/?$ /index.php?p=$1&page=$2 [QSA] 
```

使用这样的重写规则，请求地址如下所示：

```
www.mysite.com/post/10/2 
```

将被重定向到：

```
www.mysite.com/index.php?p=10&page=2 
```

从美学的角度来看，这是更好的[搜索引擎优化](http://en.wikipedia.org/wiki/Search_engine_optimization)。

具体来说，在 WordPress 中，每个请求都被重定向到 index.php 页面，该页面包含请求的内部“解析器”，该请求根据解析结果加载内容。

नमस्ते！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:48:45.237

> 我猜 index.php 一定是在处理这类请求。

确切地。

他们通过 .htaccess 规则将所有请求重定向到 index.php。如果您正在考虑在自己的应用程序中采用他们的解决方案 - 不要。今天，这种技术有更好的实现。[这](https://github.com/dannyvankooten/PHP-Router)是一个例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:51:11.773

这个怎么运作：

mod_rewrite 接受与某个参数匹配的请求，并可以将它们重定向到其他位置。在 wordpress 的情况下，所有响应 (*) 都被接受并传输到 index.php 页面，该页面有一个标准路由器，它分割 url 即 $_SERVER["REQUEST_URI"] 并将其与存储的 url 配置匹配并加载正确的组件（类别、帖子、页面等）

# qt - QT：在运行时更改选项卡遍历顺序？

> ID：14440031
> 
> 赞同：0
> 
> 时间：2013-01-21T13:46:20.763
> 
> 标签：qt, user-interface, tab-ordering

您可能会说我对 QT 很陌生...

我的程序在 QGridLayout 中包含一个带有多个小部件的窗口。其中一些小部件本身具有布局和子小部件。按 T​​ab 键会按照我创建小部件的顺序移动焦点，就像我期望的那样。

当小部件更改其内容时会出现问题（我通过删除所有子小部件然后构造新小部件来做到这一点。）如果我这样做，新小部件将移动到选项卡链的末尾（这向我表明，该选项卡顺序是一种全局的窗口）。我尝试使用 QWidget::setTabOrder() 重新排序所有小部件（我尝试了两种方法，只为主窗口的竞争设置标签顺序并为子窗口设置它）但实际顺序没有改变。我通过在小部件的竞争发生变化时发出信号并将其连接到我的主窗口上的插槽来做到这一点。我想我理解 setTabOrder() 函数的工作方式。我做了类似的事情：

```
QWidget* a = firstWidget;
QWidget* b = secondWidget;
QWidget::setTabOrder(a,b);
for (int i = 0; i < widgets.size(); ++i) {
  a = b;
  b = widgets[i];
  QWidget::setTabOrder(a,b);
} 
```

更改标签顺序时有什么特别的事情要做吗？

我还尝试重新实现 focusNextPrevChild(bool next) 和 focusInEvent(QFocusEvent* e) 类似于可以在此站点上找到的内容。[1](http://elmo.mgt.pl/drupal/?q=content/controlling-qt-tab-traversal-order)

我设法弄乱了标签顺序，更像这样......这种方法是朝着正确方向迈出的一步吗？

如果这是我设法错过的简单事情，我很抱歉，但我现在挣扎了一段时间，我找不到解决方案。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-25T02:48:39.873

我遇到了同样的问题，并使用评论中提供的 Tim Meyer 信息解决了它。

选项卡顺序不是分层的 - 在不接受焦点的父小部件上调用 setTabOrder 不会导致焦点传递给子小部件。您将需要从小部件中获取适当的子级并设置它们的顺序

在我的例子中，动态构造的 QTreeWidget 包含可编辑的小部件，我需要重置 setTabOrder 以解决无序创建的小部件。

以下代码是（大部分）实现

```
// Perform a depth-first gather of the child widgets of this item
void gatherTabWidgets( QObject* item, QWidgetList& tabWidgets )
{
  if (item->isWidgetType())
  {
    QWidget* itemWidget = static_cast<QWidget*>(item);
    if (itemWidget->focusPolicy() & Qt::TabFocus)
      tabWidgets.push_back( itemWidget );
  }
  const QObjectList& children = item->children();
  for (QObjectList::const_iterator itr = children.begin(); itr != children.end(); itr++)
  {
    gatherTabWidgets( const_cast<QObject*>(*itr), tabWidgets );
  }
}

// Perform a depth-first gather of the child items widgets;
void gatherTabWidgets( QTreeWidgetItem* item, QWidgetList& tabWidgets )
{
  QWidget* itemWidget = fetchWidgetForItem( item );
  gatherTabWidgets( itemWidget, tabWidgets );

  for (int i = 0; i < item->childCount(); i++)
  {
    gatherTabWidgets( item->child( i ), tabWidgets );
  }
}

void VETreeWidget::sortTree()
{
  // Ensure ordering is maintained.
  sortItems( 0, Qt::AscendingOrder );

  // Once the items have been re-ordered, re-create the tab ordering
  QTreeWidgetItem* baseItem = topLevelItem( 0 );
  QWidgetList tabWidgets;
  gatherTabWidgets( baseItem, tabWidgets );

  if (!tabWidgets.empty())
  {
    QWidget* lastWidget = tabWidgets.first();
    // Connect this treeview to the first widget.  This ensures
    // if the treeview is tabbed-to, it will tab to the correct sub-widget
    setTabOrder( this, lastWidget );
    for (QWidgetList::iterator itr = tabWidgets.begin() + 1; itr != tabWidgets.end(); itr++)
    {
      setTabOrder( lastWidget, *itr );
      lastWidget = *itr;
    }
  }
} 
```

# arrays - 使用 Perl 创建重复文件名列表

> ID：14440033
> 
> 赞同：3
> 
> 时间：2013-01-21T13:46:22.867
> 
> 标签：arrays, perl, duplicates

我一直在尝试编写一个脚本来预处理一些长长的文件列表，但我对 Perl 还没有信心（也没有能力），也没有得到我想要的结果。

下面的脚本正在进行中，但我一直在检查重复项，如果有人能让我知道我哪里出错了，我将不胜感激。处理重复的块似乎与我找到的示例具有相同的形式，但它似乎不起作用。

```
#!/usr/bin/perl
use strict;
use warnings;

open my $fh, '<', $ARGV[0] or die "can't open: $!";

foreach my $line (<$fh>) {

#   Trim list to remove directories which do not need to be checked
    next if $line =~ m/Inventory/;
#   MORE TO DO 
    next if $line =~ m/Scanned photos/;

    $line =~ s/\n//; # just for a tidy list when testing
    my @split = split(/\/([^\/]+)$/, $line); # separate filename from rest of path

    foreach (@split) {
        push (my @filenames, "$_");
#       print "@filenames\n"; # check content of array

        my %dupes;

        foreach my $item (@filenames) {
            next unless $dupes{$item}++;
            print "$item\n";
        }
    } 
} 
```

我正在努力理解我的重复检查有什么问题。我知道数组包含重复项（取消注释第一个打印函数会给我一个包含很多重复项的列表）。目前的代码不会产生任何内容。

不是我帖子的主要目的，但我的最终目标是从列表中删除唯一的文件名并保留在其他目录中重复的文件名。我知道这些文件都不是相同的，但许多是同一文件的不同版本，这就是我关注文件名的原因。

例如，我想要输入：

~/Pictures/2010/12345678.jpg ~/Pictures/2010/12341234.jpg ~/Desktop/temp/12345678.jpg

给出以下输出：

~/Pictures/2010/12345678.jpg ~/Desktop/temp/12345678.jpg

所以我想理想情况下，如果可能的话，最好根据正则表达式检查匹配的唯一性而不进行拆分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:57:38.810

下面的循环什么都不做，因为哈希和数组在每次循环迭代中只包含一个值：

```
foreach (@split) {
    push (my @filenames, "$_");        # add one element to lexical array
    my %dupes;
    foreach my $item (@filenames) {    # loop one time
        next unless $dupes{$item}++;   # add one key to lexical hash
        print "$item\n";
    }
}                                      # @filenames and %dupes goes out of scope 
```

一个词法变量（用 声明`my`）有一个范围延伸到周围的 block `{ ... }`，在这种情况下是你的`foreach`循环。当它们超出范围时，它们会被重置并且所有数据都会丢失。

我不知道你为什么将文件名从`@split`to复制`@filenames`，这似乎很多余。对此进行重复数据删除的方法是：

```
my %seen;
my @uniq;

@uniq = grep !$seen{$_}++, @split; 
```

* * *

**附加信息：**

您可能也有兴趣使用[`File::Basename`](http://search.cpan.org/perldoc?File::Basename)来获取文件名：

```
use File::Basename;
my $fullpath = "~/Pictures/2010/12345678.jpg";
my $name = basename($fullpath);                  # 12345678.jpg 
```

你的替代品

```
$line =~ s/\n//; 
```

应该是

```
chomp($line); 
```

当您从文件句柄中读取时，使用`for`( `foreach`) 意味着您读取所有行并将它们存储在内存中。大多数时候最好改为使用`while`，如下所示：

```
while (my $line = <$fh>) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:22:35.243

TLP 的回答提供了很多很好的建议。此外：

为什么同时使用数组和哈希来存储文件名？只需使用哈希作为您的唯一存储解决方案，您将自动删除重复项。IE：

```
my %filenames; #outside of the loops

...

foreach (@split) {
    $filenames{$_}++;
} 
```

现在，当您想要获取唯一文件名列表时，只需使用`keys %filenames`或，如果您希望它们按字母顺序排列，`sort keys %filenames`. 每个散列键的值是出现次数，所以如果你关心的话，你可以找出哪些是重复的。

# asp.net-mvc-4 - 单选按钮在 Safari 中不起作用

> ID：14440034
> 
> 赞同：1
> 
> 时间：2013-01-21T13:46:27.383
> 
> 标签：asp.net-mvc-4, safari

我想在 .cshtml 文件中创建一个单选按钮。这个简单的代码不会在 Safari 中呈现单选按钮：

```
 <input type="radio" value="1"  name="testme"/> 
```

在 IE8 中完美运行，但在 Safari 5.1.7 中，不呈现单选按钮。这只发生在 .cshtml 文件中。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:50:33.490

你应该有唯一的ID。现在您的所有输入字段都具有相同的 id，这是无效的 HTML。如果渲染问题与此有关，我不知道，但这是一个需要修复的问题。AFAIK`param`也是`<input>`元素的无效属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:32:23.547

我删除了导致单选按钮不在Safari中呈现的溢出：隐藏样式，溢出：隐藏在Safari中的行为不同

# reporting-services - 为一大行重复行标题，其中文本跨越多页

> ID：14440036
> 
> 赞同：2
> 
> 时间：2013-01-21T13:46:28.953
> 
> 标签：reporting-services, ssrs-2008

我试图在一个非常简单的 tablix 中重复行标题，其中我有一个标题行和一个详细信息行，这将只包含一个条目。然而，这个条目可能是一个很长的文本，当它大于一页时，即使我将`RepeatOnNewPage`,`KeepWithGroup`和设置`FixedData`为`TRUE`高级模式，标题也不会重复。

我四处搜索，发现[这篇博客文章](http://blogs.objectsharp.com/post/2013/01/09/SSRS-and-Column-Headers.aspx)建议添加一个虚拟列组，这也不起作用。

我现在遵循 eestein 的建议并得到以下结果：PDF：![PDF格式](../Images/c62a81fa70c9fa892491ce28c89b7f53.png) BIDS：![投标](../Images/3a434a6f52b9166bb25619bbb22f2f83.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:48:46.150

我想我理解你的问题。您没有任何组并且想要重复标题，对吗？

如果是这样，我已经做了好几次了，这就是你应该做的：

您需要创建一个虚拟组（如您所读）

1.  右键单击您的详细信息并添加父行组
2.  例如，将其按“A”分组。
3.  选中添加标题。
4.  在您刚刚添加的标题行上粘贴原始标题，然后删除原始标题

现在您可以使用高级模式设置您提到的那些属性并选择标题的静态内容。

下图：

![在此处输入图像描述](../Images/04ef2b715c41e03390403becc95bf92a.png)

![在此处输入图像描述](../Images/e7ca565f86c47d29820b16a545cbe66a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T13:49:24.300

[我在MS 论坛](http://social.technet.microsoft.com/Forums/en-US/d32ad5b8-ef99-4915-a715-1e50145b7603/column-headers-do-not-repeat-when-exported-to-pdf-for-long-rows-or-grouping-rows?forum=sqlreportingservices)上发布了同样的问题（因为我遇到了同样的问题），并得到了 TechNet 社区支持人员的回复。对于 PDF 导出，跨越多个页面的长行显然是设计使然不会呈现重复的列标题。似乎列标题与分组相关联。

一个可以帮助的场景是当一个分组跨越多个页面时，但细节不是。解决方法是打破父分组并使用 HideDuplicates 属性在视觉上伪造分组。

下面是实际分组与假分组解决方法的基本可视化。

```
 When using grouping, the rows are merged,
_______  <- the blank area is part of the merged rows.
Group1 | Row1 Col1 | Row1 Col2
_______| Row2 Col1 | Row2 Col2
Group2 | Row3 Col1 | Row3 Col2
       | Row4 Col1 | Row4 Col2 
```

对比

```
When using HideDuplicates, all rows are printed, it simply hidden or blank.
Also, you have to hide all borders or have border around all of those cells.
Group1   | Row1 Col1 | Row1 Col2
[hidden] | Row2 Col1 | Row2 Col2
Group2   | Row3 Col1 | Row3 Col2
         | Row4 Col1 | Row4 Col2 
```

第二个更好的解决方法是关闭重复标题功能并将单元格复制到标题。您可以将它们隐藏在第一页上。它实际上工作得很好。

# android - 如何获取谷歌地图API密钥

> ID：14440043
> 
> 赞同：2
> 
> 时间：2013-01-21T13:46:47.257
> 
> 标签：android, google-maps

How to get google maps api key for android，我已经阅读了多篇文章但没有成功。

我看代码android如下：

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
    android:clickable="true" /> 
```

所以我的问题是如何从谷歌获取 xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx？请给我一步一步，谢谢。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-26T11:28:38.280

在开始之前，您需要一个来自 Google 的特定 API 密钥。密钥是免费的，并且是完成此过程所必需的。

转到[https://code.google.com/apis/console/](https://code.google.com/apis/console/)，然后使用您的 Google 帐户登录。

将出现以下内容：

单击“创建项目”按钮。

在服务列表中，找到 Google Maps API v3，然后点击“关闭”将其打开。

在下一个屏幕中，选中“我同意...”，然后单击“接受”按钮。您现在将看到 Google Maps API v3 旁边的按钮已更改为“on”。

然后单击左侧菜单中的“API 访问”。它会要求您“创建 OAuth 2.0 客户端 ID...”。

在下一个屏幕中，提供产品名称（例如“demo”），上传图像（如果需要）作为项目的徽标，然后单击“下一步”按钮。

在下一个屏幕中，选择应用程序类型（“Web 应用程序”），输入您的网址，然后单击“创建客户端 ID”按钮。

在下一个屏幕中，您有一个 API 密钥。

备注：保存您的 API 密钥！（您为特定 URL 开发的所有 Google 地图应用程序都需要它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-24T10:16:12.907

1.  在命令行中，您需要打开 Java-> jdk-> bin，因为对我来说它是“C:\Program Files\Java\jdk1.7.0_03\bin”
2.  有你需要的“keytool”程序。在命令行中输入“cd C:\Program Files\Java\jdk1.7.0_03\bin”
3.  并输入“keytool -list -v -keystore C:\Users\John\.android\debug.keystore” 所以命令行中的最终字符串必须如下所示：“C:\Program Files\Java\jdk1.7.0_03\bin >keytool -list -v -keystore C:\Users\John\.android\debug.keystore"。通常你只需要更改名称“John”

会有SHA-1、MD5等

最后，转到 Google Access API [google access api](https://code.google.com/apis/console/#project:32596228624%3aaccess)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:48:27.697

[https://developers.google.com/maps/documentation/android/v1/mapkey](https://developers.google.com/maps/documentation/android/v1/mapkey)

谷歌不是你的朋友吗？

```
$ keytool -list -alias androiddebugkey \
-keystore <path_to_debug_keystore>.keystore \
-storepass android -keypass android 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:55:53.090

Google 已更新其 Android 版 Google 地图 API，您应该[在此处查看](https://developers.google.com/maps/documentation/android/intro)

# visual-studio-2010 - 用于从 NuGet Install.ps1/Uninstall.ps1 脚本中处理 Visual Studio 对象模型的 PowerShell 模块

> ID：14440049
> 
> 赞同：3
> 
> 时间：2013-01-21T13:46:53.403
> 
> 标签：visual-studio-2010, powershell, nuget

我正在尝试创建一个 NuGet 包，其中包含托管（程序集）和非托管（本机 DLL）二进制文件，并且还支持多个平台（x86、x64）。

为了更好地理解如何正确处理这个问题，我查看了几个具有相似要求的包，这些包发布在官方[nuget feed](http://nuget.org/)上。其中之一是[Microsoft.SQLServer.Compact](http://nuget.org/packages/Microsoft.SqlServer.Compact)。

查看**Install.ps1**、**Uninstall.ps1** PowerShell 脚本和**VS.psm1** PowerShell 模块中的操作非常有帮助。

VS.psm1 模块包含一些函数的定义，这些函数允许从包安装脚本中控制 Visual Studio（特别是通过 $dte 对象）。这些函数基于[Visual Studio Object Model](http://msdn.microsoft.com/en-us/library/za2b25t3%28v=VS.71%29.aspx)，我还不知道，而且（在我看来）没有很好的文档记录。

我想知道您是否知道一个 PowerShell 模块，它可以轻松地从 NuGet PowerShell 脚本处理 Visual Studio 对象模型。或者，任何指向书籍、博客文章、文章……的指针都将非常受欢迎，其中显示了一些关于如何从 PowerShell 正确使用该对象模型的示例。我在网上找到的唯一示例通常说明了非常基本的功能。

此外，如果您了解其他处理托管和非托管库的 NuGet 包，我可以将其用作示例，那就太好了。

我当然可以从我在上面提到的文件中看到的开始并推出我自己的模块，但如果已经有可用的东西，我宁愿专注于我的包本身。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:27:35.417

看看[StudioShell](http://studioshell.codeplex.com/)。它是一个将 PowerShell 自动化引入 VS.NET 的系统，可以作为安装程序使用，也可以作为 NuGet 包使用，以启用您描述的那种场景。PluralSight 课程“面向开发人员的日常 PowerShell”课程对系统进行了介绍，项目站点上有一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T14:44:21.787

这可能与您的帖子没有直接关系。我认为包管理器控制台应该称为 PowerShell 控制台。它使您可以完全访问 DTE。

我有一个使用它的简单示例，纯 PowerShell，没有 t4 或扩展，将多个文件添加到 Visual Studio 以自动添加命令模式类。

[http://github.com/jefflomax/vs-package-manager-console-cmdlets](http://github.com/jefflomax/vs-package-manager-console-cmdlets)

我们当然可以使用更完整的 PowerShell cmdlet 库来处理此环境中的简单 Visual Studio 任务。

# ios - iOS App启动后显示黑屏

> ID：14440051
> 
> 赞同：0
> 
> 时间：2013-01-21T13:46:57.500
> 
> 标签：ios, objective-c, ios4

我开发了一个 iOS 应用程序，我已经将目标设置为 iOS 5。但后来我想将目标设置为 4.3，所以我在 Project>Summary>Deployment Target 中进行了更改。该代码在 iOS 5 中启动并运行良好。但是当我尝试在装有 iOS 4.3 的设备上运行它时，它只显示启动图像，然后是黑屏。它甚至不运行代码。谁能告诉我可能会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:55:44.023

试试这个，看下面的图片:) ![在此处输入图像描述](../Images/b44ff6ba9c67d48bfea34289e6031bf7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:09:02.013

是的，你没看错，storyboards是iOS5.0及更高版本

# jquery - 如何读取 JSON 数据元素值？

> ID：14440053
> 
> 赞同：3
> 
> 时间：2013-01-21T13:46:59.713
> 
> 标签：jquery

我猜这个html是对的

```
<span id="tag_8" data-translations="{&quot;en&quot;:&quot;cat&quot;}" class="myTag selected">chat</span>at

# generated with : 
#  %span.myTag{:id => "tag_" + tag_id.to_s, :'data-translations' => translations(tag_id).to_json}= tag 
```

我正在尝试从 jquery 脚本中读取翻译，但它失败了：

```
selectedTag = $('#tag-list li span.myTag.selected:first')
console.log 'translations: ' + selectedTag.data("translations", "en")
 =>   translations: [object Object]

#however
 console.log 'translations: ' + selectedTag.data("translations")
 =>  translations: {"en"=>"cat"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:51:05.140

如果你想返回 cat 你可以这样做

> $('#tag_8').data('translations').en

否则，如果您想返回一个对象并将其保存到一个变量中，您可以这样做并像这样`var obj = $('#tag_8').data('translations')`使用它`obj.en`

```
$('#tag_8').data('translations')

returns

Object {en: "cat"}

/////////////////

$('#tag_8').data('translations').en

returns "cat" 
```

# raspberry-pi - 关闭时禁用蓝屏

> ID：14440054
> 
> 赞同：0
> 
> 时间：2013-01-21T13:47:04.660
> 
> 标签：raspberry-pi

我的树莓派上有一个 Raspbmc 图像。为了满足其中一项要求，我需要重新启动 xbmc。当我重新启动 xbmc 时，会显示各种颜色的屏幕。我不想要这些不同的颜色。我想要一个完全黑屏。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T06:21:44.537

您可以尝试`<splash>false</splash>`在“启动画面： [http ://cybernetnews.com/xbmc-advanced-settings/”标题下发布以下内容](http://cybernetnews.com/xbmc-advanced-settings/)

# azure - 正确处理 Azure MessagingCommunicationException？

> ID：14440055
> 
> 赞同：3
> 
> 时间：2013-01-21T13:47:08.210
> 
> 标签：azure

我有几个长时间运行的进程，它们监听同一个 azure servicebus 主题。经过长时间的运行（通常是几天）后，我在其中一个进程中遇到了这些异常之一（并且它们似乎都停止了工作）。消息本身和文档表明答案是重新尝试连接。起初我只是想创建一个新的 TopicClient，但后来发现实际的连接是由 MessagingFactory 持有的。我现在也尝试创建一个全新的 MessagingFactory，但这似乎也不起作用。

处理此异常的正确方法是什么？一个例子（甚至是伪代码）会很棒。

# powershell - 如何通过powershell从文件夹中的所有文本文件中删除一些单词？

> ID：14440062
> 
> 赞同：0
> 
> 时间：2013-01-21T13:47:35.643
> 
> 标签：powershell, powershell-2.0, powershell-3.0, powershell-ise

我有一种情况，我需要从文件夹中的所有文本文件中删除一些单词。我只知道如何在 1 个文件中执行此操作，但我需要为该文件夹中的所有文本文件自动执行此操作。我完全不知道如何在powershell中做到这一点。文件的名称是随机的。

请帮忙。

这是代码

* * *

$txt = 获取内容 c:\work\test\01.i

$txt[0] = $txt[0] -替换'-'

$txt[$txt.length - 1 ] = $txt[$txt.length - 1 ] -替换'-'

$txt | 设置内容 c:\work\test\01.i

* * *

基本上它只是从第一行和最后一行中删除了一个“-”，但我需要对文件夹中的所有文件执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T20:39:53.177

这是一个完整的工作示例：

```
Get-ChildItem c:\yourdirectory -Filter *.txt | Foreach-Object{
(Get-Content $_.FullName) | 
Foreach-Object {$_ -replace "what you want to replace", "what to replace it with"} | 
Set-Content $_.FullName
} 
```

现在快速解释一下：

*   带过滤器的 Get-ChildItem：获取所有以 .txt 结尾的项目
*   第一个 ForEach-Object：将执行大括号内的命令
*   Get-Content $_.FullName：获取 .txt 文件的名称
*   2nd ForEach-Object：将执行文件内文本的替换
*   Set-Content $_.FullName：用包含更改的新文件替换原始文件

重要提示： -replace 正在使用正则表达式，因此如果您的文本字符串有任何特殊字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:03:41.483

```
Get-ChildItem c:\yourfolder -Filter *.txt | Foreach-Object{
   ... your code goes here ...
   ... you can access the current file name via $_.FullName ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T17:24:17.293

用于`Get-Childitem`筛选要修改的文件。根据[对上一个问题](https://stackoverflow.com/a/11698572/4446881)“Powershell 与 Windows 一样，使用文件的扩展名来确定文件类型”的回答。

另外：您将使用您的示例显示的内容在第一行和最后一行将所有“-”替换为“”，如果您使用它：

```
 $txt[0] = $txt[0] -replace '-', ''
 $txt[$txt.length - 1 ] = $txt[$txt.length - 1 ] -replace '-', '' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T14:02:51.517

像这样的东西？

```
ls c:\temp\*.txt | %{ $newcontent=(gc $_) -replace "test","toto"  |sc $_ } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-04T12:54:33.447

```
$files = get-item c:\temp\*.txt
foreach ($file in $files){(Get-Content $file) | ForEach-Object {$_ -replace 'ur word','new word'}  | Out-File $file} 
```

我希望这有帮助。

# php - 在同一个 foreachloop 中中断并继续

> ID：14440069
> 
> 赞同：-1
> 
> 时间：2013-01-21T13:48:03.973
> 
> 标签：php

是否可以在同一个 foreach 循环中有两个条件，一个继续，一个中断。所以我想找到所有完整的输入字段并制作它们`$$key`，但只制作第一个空输入字段`$_POST['email']`。我可以在同一个循环中执行此操作还是需要 2 个循环？这是一个例子，这不起作用，它坏了。

```
foreach( $_POST as $key=> $for ) {
    if ( $for!='') {
        $$key = $for;   continue;
    } else if ( $for=='') { 
        $$key = $_POST['email'];  break;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:50:27.280

是的，你显然可以。

```
foreach( $_POST as $key=> $for ) {
    if ( $for != '') {
        $$key = $for; 
    } else { 
        $$key = $_POST['email'];
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:53:38.967

您的示例代码没有多大意义：`if ($for!='')`，那么唯一可能是`$for==''`，因此第二个 if 子句是多余的。此外，您想通过设置结果来实现什么`$$key`- 这可能是有原因的，但它没有显示在您发布的代码中。

是的，在一个循环中很可能有多个 break 和 continue 构造。他们将正常工作。

但是，简单地实现您的代码会更有效：

```
$email=$_POST['email']; 
```

（尽管这也消除了代码中的许多副作用和潜在漏洞）。

# algorithm - 程序成本作为输入大小的函数

> ID：14440071
> 
> 赞同：0
> 
> 时间：2013-01-21T13:48:19.993
> 
> 标签：algorithm, computation-theory

```
 public static int[] cip(int[] v, int n)
    {
        if (n < v.length) return cucu(v);
        v = ciop(v);
        v = ciop(v);
        return cip(v, n);
    }

    private static int[] ciop(int[] v) {    
        int[] w = new int[2*v.length];
        int i = O, j = v.length - 1, k = O;
        whi1e(i < v.length) {
            w[k++] = v[i++];
            w[k++] = v[j--1];
        }
        return w;
    }

    private static int[] cucu(int[] v)
    {
        int[] w = new int[1];
        w[O] = cucu(v, O);
        return w;
    }

    private static int cucu(int[] v, int i)
    {
        if (i >= v.length) return O;
        int r = O;
        if (i < v.length) r += v[i];
        return r + cucu(v, i + 1);
    } 
```

`cip(int[] v, int n)`(a)根据数组的维数`v`和值计算方法的计算成本`n`。

(b) 将上一步计算的成本表示为输入大小的函数。

这是我的教授在课堂上给的一个练习，但我有很多疑问。通常必须按照输入大小的函数来计算算法的计算成本？我设置了输入？还是我从提供给我的方法中获得输入？“计算成本”是指“时间成本”还是“空间和时间成本”？

# php - 如何使用 Zend 制作对 seo 友好的本地化 URL？

> ID：14440080
> 
> 赞同：1
> 
> 时间：2013-01-21T13:48:36.800
> 
> 标签：php, zend-framework, localization, seo, zend-route

我研究了很多，我知道这个话题在其他问题中讨论过。但是我相信答案并不令人满意。

许多消息来源提到说 url 对 seo 的重要性。谷歌还提到了本地化的 url 以及如何在 xml 站点地图[http://googlewebmastercentral.blogspot.de/2012/05/multilingual-and-multinational-site.html](http://googlewebmastercentral.blogspot.de/2012/05/multilingual-and-multinational-site.html)中注释它们。在最近的研究中，网址中的关键字被认为是第三（或第四）最重要的因素。

使用 Zend 我想构建和路由本地化的 seo 友好 url。

首先是这些网址的所有示例：

en：mydomain.com/en/cars 或 mydomain.com/cars 或 en.mydomain.com/cars 德语：mydomain.com/de/auto 或 mydomain.de/auto 或 de.mydomain.com/auto

但是，由于我使用 .me 域，因此我需要将 url 作为子域或 /en/car/ 之类的。这意味着 url 链接。没有大碍。更有趣的是如何处理 url 的动态部分（汽车 --> 汽车）

我只想要一个所有语言的代码库，所以在这个例子中控制器应该被称为汽车。

如何使用zend实现对url的本地化，包括url构建和路由？例如 $this->url("controler"=>"cars","lang"=>"de") 结果是 /de/cars。你将如何为这种 url 构建一个灵活的路由器？有什么解决方案吗？

或者你会为了方便而只使用英文网址而忽略 seo 的缺点吗？

# php - SOAP、WSDL 未知输入/输出

> ID：14440084
> 
> 赞同：0
> 
> 时间：2013-01-21T13:48:46.193
> 
> 标签：php, soap, wsdl

我正在尝试使用以下 WSDL 文件创建 SOAP 服务器

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:i0="http://ws.aramex.net/ShippingAPI/v1" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:tns="http://ws.aramex.net/ShippingAPI/v1/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://localhost/API" name="Edfa3lyAPI">
    <wsdl:types>
        <xsd:schema targetNamespace="http://localhost/API" elementFormDefault="qualified">  
            <xsd:element name="AddProductRequest">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element type="tns:Product" name="Product" nillable="true" minOccurs="0"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:complexType name="Product">
                <xsd:all>        
                    <xsd:element name="quantity" type="xsd:integer" nillable="true"/>
                    <xsd:element name="itemName" type="xsd:string" nillable="true"/>
                    <xsd:element name="URL" type="xsd:string" nillable="true"/>
                    <xsd:element name="pricePerItem" type="xsd:float" nillable="true"/>
                    <xsd:element name="categoryId" type="xsd:integer" nillable="true"/>
                    <xsd:element name="color" type="xsd:string" nillable="true"/>
                    <xsd:element name="size" type="xsd:string" nillable="true"/>
                    <xsd:element name="domesticShippingAndTaxes" type="xsd:float" nillable="true"/>
                </xsd:all>
            </xsd:complexType>
            <xsd:element type="tns:Product" name="Product" nillable="true"/>
            <xsd:element name="AddProductResponse">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element minOccurs="0" name="HasErrors" type="xsd:boolean" />
                        <xsd:element maxOccurs="10" minOccurs="0" name="error" type="xsd:string" />
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </xsd:schema>
    </wsdl:types>

    <wsdl:message name="AddProductRequest">
        <wsdl:part name="parameters" element="tns:AddProductRequest" />
    </wsdl:message>
    <wsdl:message name="AddProductResponse">
        <wsdl:part name="parameters" element="tns:AddProductResponse" />
    </wsdl:message>

    <wsdl:portType name="Edfa3lyAPIPort">
        <wsdl:operation name="AddProduct">
            <wsdl:input message="tns:AddProductRequest"/>
            <wsdl:output message="tns:AddProductResponse"/>
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="Edfa3lyAPIBinding" type="i0:Edfa3lyAPIPort">
        <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
            <wsdl:operation name="AddProduct">
                <soap:operation style="document" soapAction="http://localhost/API"/>
                    <wsdl:input name="tns:AddProductRequest">
                        <soap:body use="literal"/>
                    </wsdl:input>
                    <wsdl:output name="tns:AddProductResponse">
                        <soap:body use="literal"/>
                    </wsdl:output>
            </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="Edfa3lyAPIService">
        <wsdl:port name="Edfa3lyAPIPort" binding="tns:Edfa3lyAPIBinding">
            <soap:address location="http://localhost/API"/>
        </wsdl:port>
    </wsdl:service>

</wsdl:definitions> 
```

但我们从来没有试图得到

```
Array
(
    [0] => UNKNOWN AddProduct(UNKNOWN $parameters)
)
Array
(
    [0] => struct AddProductRequest {
 Product Product;
}
    [1] => struct Product {
 integer quantity;
 string itemName;
 string URL;
 float pricePerItem;
 integer categoryId;
 string color;
 string size;
 float domesticShippingAndTaxes;
}
    [2] => struct AddProductResponse {
 boolean HasErrors;
 string error;
}
) 
```

我尝试了一些更改，但仍然出现 UNKNOWN 问题我还为同一案例尝试了不同的解决方案，但没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:25:48.993

解决方案是使用正确的定义

```
<wsdl:definitions name ="Edfa3lyAPI" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://localhost/API" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:targetNamespace="http://localhost/API"> 
```

# jquery - jQuery 上下文回调

> ID：14440085
> 
> 赞同：0
> 
> 时间：2013-01-21T13:48:46.377
> 
> 标签：jquery, scope

有没有办法在“文档”之外的其他上下文中运行一组侦听器？

这将是限制选择器的好方法。

像这样的东西：

```
$(".main", function(){
   $(".child-1").click(function() {  /* .... */ });  // .main .child
   $(".child-2").click(function() {  /* .... */ });  // .main .child-2
   $(".child-3").click(function() {  /* .... */ });  // .main .child-3
}); 
```

代替：

```
$(".main .child-1").click(function() {  /* .... */ });  // .main .child
$(".main .child-2").click(function() {  /* .... */ });  // .main .child-2
$(".main .child-3").click(function() {  /* .... */ });  // .main .child-3 
```

通过使用它，您可以使用范围而不是一个大（文档）范围。

那么，这些以某种方式存在于 jQuery 中？试过google，真的找不到任何东西。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:53:30.303

最接近的事情是这样的

```
var $ctx = $('#context');

$ctx.find('.something').click(function(){ }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T13:53:21.467

```
$('.main').on("click", ".child-1", function() {

}).on("click",".child-2", function() {

}).on("click",".child-3", function() {

}); 
```

或者，如果他们都这样做......

```
$('.main').on("click", ".child-1, .child-2, .child-3", function() {

}); 
```

[http://jsperf.com/on-click-performance](http://jsperf.com/on-click-performance) - 你会看到这种方式比其他解决方案更快。

# cakephp - 使用 CakeDC 插件版本 1.1 的 CakePHP Recaptcha 控制器方法没有收到帖子 没有错误消息

> ID：14440088
> 
> 赞同：1
> 
> 时间：2013-01-21T13:48:59.107
> 
> 标签：cakephp, cakephp-2.1, recaptcha, cakedc

在表单上使用来自 CakeDC 的 Cakephp 2.2.4 和 Recaptcha 插件 1.1。该页面是 SSL/HTTPS。当我提交带有正确recaptcha 文本的表单时，表单会重置并且没有消息。

已经在控制器的适当方法中检查了 $this->request->data 并且它没有收到任何帖子。

有人遇到这个问题或有解决方案吗？

谢谢。

从控制器代码中提取：

```
if ($this->request->is('post')) {   
                if ($this->Recaptcha->verify()) { 
```

从视图中提取：

```
echo $this->BootstrapForm->input('message', array(
                                    'type' => 'textarea', 
                'required' => 'required',
                'helpInline' => '<span class="label label-important">' . __('Required') . '</span>&nbsp;')
            );

            ?>
                            <?php echo $this->Recaptcha->display(array('recaptchaOptions'=>array('theme' => 'clean'))); ?>    
            <?php echo $this->BootstrapForm->submit(__('Submit'),array('class' => 'btn btn-primary'));?>
        </fieldset>
    <?php echo $this->BootstrapForm->end();?> 
```

没有对 recaptcha 的模型进行任何更改。

我正在使用的 CakeDC 插件是这个：

[https://github.com/CakeDC/recaptcha](https://github.com/CakeDC/recaptcha)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T23:11:47.110

[请参阅此处的 SSL 部分](https://developers.google.com/recaptcha/docs/tips)。

> https 网站上的 reCAPTCHA
> 
> 为了避免在 SSL 站点上使用 reCAPTCHA 时收到浏览器警告 ，[当](http://www.google.com/recaptcha/api)[您](https://www.google.com/recaptcha/api)请求挑战。您对 reCAPTCHA 的请求如下所示：

```
<script type="text/javascript"
   src="https://www.google.com/recaptcha/api/challenge?k=your_public_key">
</script>

<noscript>
   <iframe src="https://www.google.com/recaptcha/api/noscript?k=your_public_key"
       height="300" width="500" frameborder="0"></iframe><br>
   <textarea name="recaptcha_challenge_field" rows="3" cols="40">
   </textarea>
   <input type="hidden" name="recaptcha_response_field"
       value="manual_challenge">
</noscript> 
```

# performance - 加快 postgres 查询（适用于 2 个表）

> ID：14440090
> 
> 赞同：1
> 
> 时间：2013-01-21T13:49:12.690
> 
> 标签：performance, postgresql, join

我在 postgresql 中做这样的事情：

```
select A.first, 
       count(B.second) as count, 
       array_agg(A.second) as second,
       array_agg(A.third) as third, 
       array_agg(B.kids) as kids 
from A join B on A.first=B.second 
group by A.first; 
```

而且它需要永远（也因为桌子很大）。将输出限制为 10 行并用解释分析查看告诉我有一个嵌套循环，它很大并且需要大部分时间。

有什么方法可以编写这个查询（然后我将在 CREATE TABLE AS 中使用它来创建一个新表）来加速它，同时保留相同的输出，这就是我想要的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:00:52.153

确保用作外键的列被索引：

```
create index b_second on b(second); 
```

如果没有这样的索引，每一行`a`都会导致对 的表扫描`b`，这会使您的查询爬网。

# ios - UITableView + 大型网络数据源

> ID：14440091
> 
> 赞同：0
> 
> 时间：2013-01-21T13:49:15.957
> 
> 标签：ios, uitableview, paging

我正在使用一个挂钩到休息 API 的 UITableView。

首次启动时，应用程序会检索 UITableView 将显示的数据并将其解析到 Core Data 数据库中。

这适用于小型数据集。但是当数据集增长到超过 300-500 个项目时，它的表现就不是很好了。需要几分钟才能完成下载+解析。在此期间应用程序不会死锁，但用户可能不会等待解析完成。

然后我决定使用分页。所以现在，我只检索最新的 20 个项目，然后用户可以单击“加载更多”以进一步返回。数据被缓存。

这似乎运作良好，除了一个问题。

因为我没有在每次加载时下载所有数据，所以我无法判断何时在服务器上删除了某个项目，也无法判断某个项目何时更改（例如标题可能已更改）。

任何人都可以向我提供解决此问题的任何建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:53:44.750

我们通常会请求相似数量的项目并将其显示在表格视图中。然而，在我们的例子中，API 返回 JSON，我们将其存储在模型对象中，而不是 Core Data。下载数据后，从 JSON 到出现在表中只需不到一秒钟的时间。对于实际上不是数据库的任何东西，或者没有为过去的用户会话保留的东西，Core Data 都是一个坏主意。但是您需要确定交易的哪一部分实际上花费的时间最多。在我们的例子中，它是 API 背后的后端，但是一旦它出现，一切都很快。

此外，在我们的案例中，数据约为 700K，我们将很快对其进行 GZIP 压缩，以进一步减少网络时间。

# mysql - 如果列具有由另一个值排序的某个值，如何将查询的行放在底部？

> ID：14440092
> 
> 赞同：4
> 
> 时间：2013-01-21T13:49:15.660
> 
> 标签：mysql, sql

我有一个包含 3 列的产品表：
- id_product
- quantity_in_stock
- product_name

如果它= 0，我希望在结果底部有所有按 product_name 和 quantity_in_stock 排序的行。

我试过这个查询，但它不起作用：

```
(SELECT * 
FROM products 
WHERE quantity_in_stock != 0
ORDER BY product_name ASC)
UNION
(SELECT * 
FROM products 
WHERE quantity_in_stock = 0
ORDER BY product_name ASC) 
```

也许有一种更简单的方法可以做到这一点，但现在是星期一！;)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T13:51:44.590

可以包含任意表达式，因此`ORDER BY`您可以评估那些`= 0`并为它们分配更高的值，以便稍后排序：

```
SELECT * 
FROM products
ORDER BY 
  /* If quantity_in_stock is 0, assign a 1 otherwise 0\. The ones sort after 0 */
  CASE WHEN quantity_in_stock = 0 THEN 1 ELSE 0 END ASC,
  /* Then sub-order by name */
  product_name ASC 
```

由于 MySQL 的布尔评估返回 1 或 0，您可以将其简化如下。但它不适用于每个 RDBMS：

```
SELECT * 
FROM products
ORDER BY
  /* Will return 0 (false) for quantity_in_stock <> 0 and 1 if true */
  (quantity_in_stock = 0) ASC,
  product_name ASC 
```

但请注意，如果`quantity_in_stock`未编制索引，查询性能可能会因此受到负面影响。

# postgresql - Postgres 函数将随机整数附加到选定的行

> ID：14440096
> 
> 赞同：0
> 
> 时间：2013-01-21T13:49:29.273
> 
> 标签：postgresql, random

我想要一个函数或触发器，当插入一行时，所有具有匹配条件的行都被赋予一个介于 1 和行数之间的随机整数，以便随机化选择中的行。

例如，如果我有数据

```
Col1 Col2 顺序
  1
  乙二
  乙二
  乙 3
  A2

```

我用 Col1=B 和 Col2=2 插入另一行然后我想结束

```
Col1 Col2 顺序
  1
  乙 2 2
  乙 2 3
  乙 3
  A2
  乙 2 1

```

Order 是一个值为 1 的数字 - 每个数字只出现一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:22:42.183

不需要存储这个，你可以在检索数据时生成这样一个数字。

```
select col1, 
       col2, 
       row_number() over (partition by col1, col2 order by random()) as random_order
from the_table 
```

# android - 为什么 alertDialog 在 android 应用程序中不起作用？

> ID：14440099
> 
> 赞同：0
> 
> 时间：2013-01-21T13:49:55.473
> 
> 标签：android, android-alertdialog

在进行一些初始化工作时，我需要发送一些警报短信。因此，我在 android 应用程序的主要活动中使用了以下代码。

```
AlertDialog alertDialog;
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Log.i("main","=================init===============");
    alertDialog = new AlertDialog.Builder(this).create();
    alertDialog.setTitle("Title Info");
    alertDialog.setMessage("Initilizing so please wait....");
    alertDialog.show();
    // calling some initilizing function from jni which takes some time
    alertDialog.hide(); 
   } 
```

当我运行应用程序时，我在 logcat 中获得了该日志，但该警报对话框没有显示..我不明白为什么这不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:52:14.983

这是因为当您向 .show() 询问警报对话框时，它告诉框架在系统下次获得控制权时显示对话框（即在您的方法将控制权返回给应用程序之后），因此对话框显示不是立即完成。

因为您已经调用了 show 并在此方法中立即进行了 hide，所以当应用程序尝试绘制对话框时，对话框状态将处于“隐藏”状态。

如果要显示并稍后隐藏对话框，则需要稍后调用 hide，例如在计时器上或由于 alertDialog 的某些回调。（还要确保您在主线程中调用显示和隐藏）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:54:51.733

```
dialogbox = new Dialog(alertdialog.this);
                dialogbox.setContentView(R.layout.exit_dialog_box);
                dialogbox.setTitle("");
                dialogbox.setCancelable(true);
                Button button = (Button) dialogbox.findViewById(R.id.Button);

                dialogbox.show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T12:44:18.730

您可以使用 android 中的 AsyncTask 方法执行此操作。使用异步创建一个类

私有类 ShowDialogAsyncTask 扩展 AsyncTask {

```
 @Override
    protected void onPreExecute() {
        // update the UI immediately after the task is executed
        super.onPreExecute();
        alertDialog = new AlertDialog.Builder(MainClass.this).create();
        alertDialog.setTitle("Title");
        alertDialog.setMessage("msg....");
        alertDialog.show();

    }

    @Override
    protected Void doInBackground(Void... params) {
        //Perform your JNI operation
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);

    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        alertDialog.hide();

    }
} 
```

在你的课上

警报对话框警报对话框；公共无效 onCreate(Bundle savedInstanceState) {

```
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main); 
```

//添加以下代码

新的 ShowDialogAsyncTask().execute();

```
} 
```

# c# - 国际化 Windows Phone 7 应用程序

> ID：14440101
> 
> 赞同：0
> 
> 时间：2013-01-21T13:50:05.580
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, locale, windows-phone

我目前正在开发一个 Windows Phone 应用程序，该应用程序从用户那里获取一些信息并根据用户输入返回一些其他信息。

如果特定设备的区域设置设置为美国，则该应用程序运行良好。如果设备的区域设置设置为希腊语或德语，则会出现一些问题。例如，美国小数点字符“.” 被视为“，”，反之亦然。结果，所有的计算都是错误的。

我想要做的是将应用程序国际化，以便无论区域设置如何，它的工作方式都完全相同。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:02:21.393

如果您希望您的应用程序始终以一种指定格式显示数字和日期，您可以强制应用程序始终以一种指定的文化运行，就像这样。

您只需将应用程序的当前线程设置为一种指定的文化（添加到 App.cs 文件中）！

```
 public App()
    {
        // Standard Silverlight initialization
        InitializeComponent();

        // Phone-specific initialization
        InitializePhoneApplication();

        // Set the current thread to US!
        Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
        Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US"); 
```

# bash - bashrc if: 表达式语法错误

> ID：14440105
> 
> 赞同：5
> 
> 时间：2013-01-21T13:50:13.240
> 
> 标签：bash, unix

我写了以下 .bashrc ：

```
# .bashrc
# Source global definitions
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
fi

# User specific aliases and functions

function up( )
{
LIMIT=$1
P=$PWD
for ((i=1; i <= LIMIT; i++))
do
    P=$P/..
done
cd $P
export MPWD=$P
}

function back( )
{
LIMIT=$1
P=$MPWD
for ((i=1; i <= LIMIT; i++))
do
    P=${P%/..}
done
cd $P
export MPWD=$P
} 
```

但是，保存后，当我这样做时`source .bashrc`，出现以下错误： `if: Expression Syntax.`

我究竟做错了什么 ？我用谷歌搜索了一段时间，但无济于事。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T13:52:19.063

```
if: Expression Syntax 
```

不是 bash 会给你的错误。也许你的 shell 不是 bash。事实上，只要是`if`独立的，任何错误都不会出现在`if`它自己身上：

```
$ if [somethingswrong]; then fail; fi # error, then `[` command must have space around it.
-bash: [somethingswrong]: command not found 
```

您可以通过 echo 来检查您的 shell `$SHELL`，并且您可以使用 . 检查哪个版本的 bash `$BASH_VERSION`。（如果后者未设置，则您的 shell 不是 bash。）

# oracle - Oracle Forms 设置项无效

> ID：14440107
> 
> 赞同：2
> 
> 时间：2013-01-21T13:50:15.893
> 
> 标签：oracle, oracleforms

当我使用`When-Validate-Item`触发器时，它只执行一次，当我想验证时，如果项目不为空。它给我的信息是，现在出了点问题。但现在我可以离开当前的记录了。

有什么方法可以将项目的状态设置为无效，因此触发器会触发不止一次。我正在使用多记录规范。

这是一些说明我在想什么的代码：

```
if :system.trigger_item = 'BLOCK.ITEM' then
   if :BLOCK.ITEM is null then
      -- set the item invalid again, becuase it won´t validate the item again, when 
      -- there wont appear any change to this item
      null;
   else
      -- the item is valid, do whatever
      null;
   end if;
end if; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:06:35.563

在您的`when-validate-item`触发器中，如果您的触发器代码成功执行而没有引发异常，Oracle Forms 会将该项标记为有效并允许用户继续。

要停止这种行为，您的触发器应该引发`FORM_TRIGGER_FAILURE`异常（例如，在显示错误消息之后）。

# ruby-on-rails - 无法从 View Rails 3.2 访问关联的模型方法

> ID：14440109
> 
> 赞同：0
> 
> 时间：2013-01-21T13:50:24.550
> 
> 标签：ruby-on-rails, rails-activerecord

**情况**

*   我有两种型号的电缆和状态
*   电缆属于地位，地位有许多电缆
*   任何返回单个记录的地方都可以使用以下代码

    ```
    @cable.status.stat #where stat is one of the columns in status 
    ```

*   但是，由于我的索引返回所有电缆，当我尝试通过执行以下操作从视图中访问它们时

    ```
    <% @cables.each do |cable| %>
        <td><%= cable.Cable_Hex %></td>
        <td><%= cable.status.stat %></td>
      </tr>
    <% end %> 
    ```

我收到一条错误消息，指出无法识别 .stat。当我删除 .stat 并将其保留为 cable.status 时，我只会看到一个地址。

如果我尝试访问foreign_id，那么我可以毫无问题地看到它。显然，相关的方法在视图中并不容易获得。

如何从视图访问关联的模型方法？

--编辑-- 根据要求包括两个模型

电缆型号

```
class Cable < ActiveRecord::Base
    belongs_to :user, :inverse_of => :cables
    belongs_to :status, :inverse_of => :cables
end 
```

状态模型

```
class Status < ActiveRecord::Base
    has_many :cables, :inverse_of => :statuses  
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:27:54.183

问题的原因是错误的测试向量。它们未正确初始化，为此返回的错误是未找到 stat 方法。这让我认为将方法传递给 view 有问题，但是我了解到对于这个特定问题有两个方面需要考虑。当前用于呈现页面和正确关联的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:31:22.253

关联的sql可能是错误的。

SQL -

```
Cable.where("cables.status_id IS NOT NULL") 
```

要获取状态记录，您可以使用 join

```
 Status.joins( :cables ).where("cables.status_id IS NOT NULL") 
```

这将返回与电缆关联的所有状态记录。

然后你可以遍历它来获取`stat`每个状态。

# vb.net - 将一行复制到另一个 DataGridView

> ID：14440113
> 
> 赞同：0
> 
> 时间：2013-01-21T13:50:32.177
> 
> 标签：vb.net, datagridview, datatable, dataset, rows

我有两个`DataGridViews`在 Windows 窗体，VB.NET

当我双击`FullSelectedRow`时`DataGridView1`，`SelectedRow`应该将 复制到`DataGridView2`，两个网格都`DataBounded`来自 SQL Server 2008..

这是我在每个网格中检索数据的代码..

```
**DataGridView1**
Dim UserScheduleString As String = "SELECT * FROM Schedule"
Dim UserScheduleStringList As New SqlCommand(UserScheduleString, mdl_Connection.CONN)

UserScheduleStringList.CommandType = CommandType.Text
UserScheduleStringListAdpt.SelectCommand = UserScheduleStringList
UserScheduleStringListAdpt.SelectCommand.ExecuteNonQuery()
UserScheduleStringListAdpt.Fill(UserScheduleStringListDataSet, "Users")
DataGridView1.DataSource = UserScheduleStringListDataSet.Tables("Users")

**DataGridView2**
Dim SomeTableString As String = "SELECT * FROM someTable"
Dim SomeTableStringList As New SqlCommand(SomeTableString, mdl_Connection.CONN)

SomeTableStringList.CommandType = CommandType.Text
SomeTableStringListAdpt.SelectCommand = SomeTableStringList
SomeTableStringListAdpt.SelectCommand.ExecuteNonQuery()
SomeTableStringListAdpt.FillSomeTableStringListDataSet, "*<tablename>*")
DataGridView1.DataSource = SomeTableStringListDataSet.Tables("*<tablename>*") 
```

我搜索了其他论坛，这就是我所拥有的..

```
newCustomersRow = UserScheduleStringListDataSet.Tables("Users").NewRow()
newCustomersRow("ID") = "0023"
newCustomersRow("Day") = "Tuesday"
newCustomersRow("Start Time") = "13:00:00"
newCustomersRow("End Time") = "18:00:00"

UserScheduleStringListDataSet.Tables("Users").Rows.Add(newCustomersRow)

UserScheduleStringListAdpt.Update(UserScheduleStringListDataSet, "Users") 
```

当我尝试将其放入时`DataGridView1_CellMouseDoubleClick`，它给了我一个错误`Object reference not set to an instance of an object.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:15:28.033

尝试以下操作：

```
Private Sub DataGridView1_CellMouseDoubleClick(ByVal sender As Object, ByVal e As DataGridViewCellEventArgs) 

   Dim dr = DirectCast(DataGridView1.Rows(e.RowIndex).DataBoundItem, System.Data.DataRowView).Row

   UserScheduleStringListDataSet.Tables("Users").ImportRow(dr)

   UserScheduleStringListAdpt.Update(UserScheduleStringListDataSet, "Users")

End Sub 
```

# java - stk.nextToken() 返回错误“未知来源”

> ID：14440115
> 
> 赞同：1
> 
> 时间：2013-01-21T13:50:36.080
> 
> 标签：java, arrays, vector, matrix, 2d

我重新做一个练习考试，我几乎完成了它。我唯一的问题是这部分：

```
 int z=0,x=0;

               String line="";

               RandomAccessFile read = new RandomAccessFile(s, "rw");

               while((read.readLine())!=null)
                   z++;

               read.seek(0);

               while(x<z){

                   line=read.readLine();

            StringTokenizer stk = new StringTokenizer(line, " ");

            if(line.charAt(0)=='r'){
                nr=z;
                nc=stk.countTokens()-1;
                valori = new int[nr][nc];
                while(stk.hasMoreTokens()){
                stk.nextToken();
                for(int i=0; i<nr; i++)
                    for(int j=0; j<nc; j++)
                    valori[i][j] = Integer.parseInt(stk.nextToken());}
                }
            else if(line.charAt(0)=='c'){
                nr=stk.countTokens()-1;
                nc=z;
                valori = new int[nr][nc];
                while(stk.hasMoreTokens()){
                stk.nextToken();
                for(int i=0; i<nr; i++)
                    for(int j=0; j<nc-1; j++)
                    valori[j][i] = Integer.parseInt(stk.nextToken());}
                }x++; 
```

基本上我必须阅读一个文件，其中我有一个矩阵的描述如下：

```
c 0 1 0
c 0 0 1 
c 0 0 0
c 1 0 0 
```

结果矩阵将是

```
|0|0|0|1|
|1|0|0|0|
|0|1|0|0| 
```

阅读文件后，我必须使用 2d int 数组构建矩阵，我使用了另一个练习中的相同代码，但是当使用 stk.nextToken() 时，我在 java.util.StringTokenizer.nextToken(Unknown Source) 处得到 java.util.NoSuchElementException )

我找不到错误，二维数组已正确初始化和填充。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:56:31.623

异常的“未知来源”部分是通过 jre 而不是 JDK 运行代码的效果。如果您使用 JDK 运行，您的运行时环境将有权访问调试信息，并且将打印正确的行号。

快速浏览表明这部分有误：nr=stk.countTokens()-1; nc=z; //z == # 行数

```
 //first pass through = hasMoreTokens == true (a total of 4: C,0,1,0)
  while(stk.hasMoreTokens()){
            //first token - C
            stk.nextToken();
            //this will iterate 3 times
            for(int i = 0; i < nr; i++)
                //this, too, will iterate 4 times - a total of 12 times considering
                // the outer loop
                for(int j = 0; j < nc-1; j++)
                   // after 3 passes, this will throw the exception
                   valori[j][i] = Integer.parseInt(stk.nextToken());}
            }x++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:57:30.463

此错误意味着 StringTokenizer 中没有剩余的令牌，您要求再提供一个令牌。“未知来源”与您的问题无关 - 这只是意味着您无法访问 Java 系统库的源代码，但我怀疑它是否会有所帮助。

发生这种情况是因为您从文件中读取的行包含的空格分隔标记比您预期的要少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:24:58.397

发生错误是因为您正在标记一行，并且在两个 for 循环中您正在读取列和行。我建议不要将 StringTokenizer 与 while 循环一起使用，而是使用 .split 命令：

```
int j=0;
// read all rows
while((read.readLine())!=null) {

    String line=read.readLine();
    String[] columns=line.split(" ");

    // read columns of each row
    int i=0;
    for (String column: columns) {
        if (!column.equals("c")) {
            valori[j][i] = Integer.parseInt(column);
        }
        i++;
    }

j++;
} 
```

PS：上面的伪代码，未经测试。

# c#-4.0 - C#中的后台任务

> ID：14440117
> 
> 赞同：2
> 
> 时间：2013-01-21T13:50:39.510
> 
> 标签：c#-4.0, asp.net-mvc-4, multitasking

```
public JsonResult GetScore(int StudentID = 0)
{
    //fetch the score for the user
    //--Call sendReport
    //return the score to the calling method
}

public void SendReport(int StudentID = 0)
{
    //Logic to get the detaied marks and prepare the report's PDF
    //Mail the generated PDF back to student
} 
```

在我的网络应用程序中，当学生点击分数时，学生将在屏幕上获得他/她的分数，并将详细报告的 PDF 邮寄到他/她的挂号信箱。

现在的问题是我想在后台运行 SendReport，这样学生就可以立即知道他/她的分数而无需等待。

我已经完成了[这个问题](https://stackoverflow.com/questions/9684112/start-a-long-time-background-task)，但它给了我无效论点的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:54:47.553

```
public JsonResult GetScore(int StudentID)
{
    //fetch the score for the user
    Task.Factory.StartNew(() => SendReport(StudentID));
    //return the score
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T21:24:43.253

如果你正在寻找一个快速而肮脏的解决方案来解决这个问题，那就是让你的控制器看起来像这样：

```
public JsonResult GetScore(int StudentID = 0)
{
    //fetch the score for the user
    //return the score to the calling method
}

public JsonResult SendReport(int StudentID = 0)
{
    //Logic to get the detaied marks and prepare the report's PDF
    //Mail the generated PDF back to student
    //Return a JsonResult indicating success
} 
```

...然后对您的控制器进行**两次**JQuery 调用。一个得到分数，一个开始报告。您可以在获得分数后立即显示分数，并且报告仍将在后台运行。

请记住，如果报告生成和发送电子邮件的时间超过几秒钟，您真的应该考虑将该执行转移到您只需通过 MVC*激活*的服务，因为在控制器方法中运行它会占用 Web 服务器资源，直到它完成.

有关执行此操作的详细信息，请参阅新的[MVC 异步文档](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:54:50.503

你可以在一个新线程中调用它

```
new Thread(SendReport(StudentID)).Start(); 
```

# forms - Extjs文件上传进度

> ID：14440118
> 
> 赞同：4
> 
> 时间：2013-01-21T13:50:43.863
> 
> 标签：forms, extjs, upload, progress

我在 ExtJS4 中看到了表单文件上传示例，我需要自定义文件上传的进度。

我看到了 waitMsg 配置属性，但我不想使用它，也不想使用 extjs 3rd 方插件。

那么，我如何才能从 extjs 中的上传表单中获得简单的当前上传进度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:22:49.027

waitMsg 使用带有无限自动更新进度条的消息框。所以你不能只创建一个显示当前上传的进度条。

您可以创建自己的[`Ext.ProgressBar`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ProgressBar)并*估计*上传时间，并在完成后将其设置为最大值。但我猜你不希望那样。

回答您的问题：您**不能**简单地跟踪当前的上传进度。

* * *

如果您真的需要这种用户体验，您可以尝试使用[3rd 方组件](http://blog.debug.cz/2012/05/file-upload-widget-for-extjs-4x.html)。

* * *

引用文档：

> 文件上传不是使用普通的“Ajax”技术执行的，也就是说它们不是使用 XMLHttpRequests 执行的。取而代之的是，表单以标准方式提交，并临时修改了 DOM 元素，使其目标设置为引用动态生成的隐藏对象，该对象被插入到文档中，但在收集到返回数据后被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T12:10:03.070

```
buttons: [{
    text: 'Upload',
    handler: function () {
        var form = this.up('form').getForm();
        if (form.isValid()) {
            form.submit({
                url: '/upload/file',
                waitMsg: 'Uploading your file...',
                success: function (f, a) {
                    var result = a.result,
                        data = result.data,
                        name = data.name,
                        size = data.size,
                        message = Ext.String.format('<b>Message:</b> {0}<br>' +
                            '<b>FileName:</b> {1}<br>' +
                            '<b>FileSize:</b> {2} bytes',
                            result.msg, name, size);

                    Ext.Msg.alert('Success', message);
                },
                failure: function (f, a) {
                    Ext.Msg.alert('Failure', a.result.msg);
                }
            });
        }
    }
}] 
```

带有进度窗口的现场演示[在这里](http://ext4all.com/post/extjs-4-upload-to-asp-net-mvc-demo.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-28T19:38:39.933

要显示实际进度，您可以使用 XMLHttpRequest 的 onprogress 回调：

```
Ext.override(Ext.data.request.Ajax, {
    openRequest: function (options) {
        var xhr = this.callParent(arguments);
        if (options.progress) {
            xhr.upload.onprogress = options.progress;
        }
        return xhr;
    }
}); 
```

然后像这里一样使用：

```
Ext.Ajax.request({
    url: '/upload/files',
    rawData: data,
    headers: { 'Content-Type': null }, //to use content type of FormData
    progress: function (e) {
        console.log('progress', e.loaded / e.total);
    }
}); 
```

[在此处](https://ext4all.com/post/extjs-6-ajax-multi-file-upload-with-progress-bar.html)查看在线演示。

# wpf - 使用 MEFedMVVM 概念从视图模型访问视图？

> ID：14440131
> 
> 赞同：0
> 
> 时间：2013-01-21T13:51:41.773
> 
> 标签：wpf, mvvm, prism, mef, mefedmvvm

在`MEFedMVVM`视图模型中使用`ViewModelLocator`. `MEFedMVVM`非常强大，因为您可以为视图模型使用任意构造函数：

```
[ExportViewModel("MyViewModel")]
public class MyViewModel : NotifyPropertyChangedBase
{
    [ImportingConstructor]
    public MyViewModel(IMediator mediator, IContainerStatus containerStatus, IDispatcherService dispatcherService)
    {
    }    
} 
```

`IMediator`，`IContainerStatus`并且`IDispatcherService`是通过 实例化的服务接口`MEF`。显然，如果需要，我可以创建自己的服务。

## 问题

当我的视图已加载时，它需要为其子级*只读*属性之一的成员分配来自视图模型的数据。理想情况下，我会直接将此变量绑定到 中`XAML`，但我不能这样做，因为该属性是只读的并且它的成员不是可附加属性。目前，我有一个丑陋的解决方法：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    var viewModel = DataContext as MyViewModel;
    this.child.SomeReadonlyProperty.Data = viewModel.MyData;
} 
```

我想摆脱视图和视图模型的这种耦合。两者都`MEFedMVVM`提供`Prism`可能有用的不同模式，但我不知道该使用哪个 - 以及如何使用。可以让服务同时访问视图和视图模型吗？

**问：我应该使用什么模式来移除联轴器？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:41:30.890

我想我会倾向于创建一个您的视图可以实现的接口，该接口将描述您设置属性所需的行为：

```
interface IMyView
{
    void SetReadOnlyProperty(object value);
} 
```

然后，您可以在视图中创建您的实现，`SetReadOnlyProperty`将视图导出为类型`IMyView`，最后，在您的视图模型上创建一个导入，该类型`IMyView`将公开您的方法并允许您从视图模型执行调用。我相信这不会违背 MVVM 的精神，因为 viewmodel 不知道视图，它只是有一个接口可以暴露你需要的东西。

# css - 如果主容器是 100% 宽度，我如何计算响应式构建中部分的容器宽度？

> ID：14440133
> 
> 赞同：1
> 
> 时间：2013-01-21T13:51:50.447
> 
> 标签：css, mobile

我正在尝试构建一个移动首页，通常我会`widths`根据整个容器来计算我的容器`max-width`。

因此，如果我的容器应该是`200px wide`并且我的整个容器有，`max-width 1000px`那么我的百分比计算是 200/1000*100。但是，如果我的整个容器没有`max-width`，而是设置为 100%，我该如何计算呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:57:02.603

如果这是一个蹩脚的答案，我提前道歉，但我会研究现有的 Grid 框架，例如[http://foundation.zurb.com/](http://foundation.zurb.com/)（或其他）并在此基础上构建，而不是从刮。

# c# - 在电子邮件中发送转发器

> ID：14440135
> 
> 赞同：0
> 
> 时间：2013-01-21T13:51:53.880
> 
> 标签：c#, asp.net, repeater, mailmessage, htmltextwriter

我需要在邮件中发送使用转发器获得的表格，是否有关于如何在邮件正文中嵌入转发器的示例？我正在使用 MailMessage 发送邮件。我试图实现这个例子：

```
 System.IO.StringWriter stringWrite = new System.IO.StringWriter();

    System.Web.UI.HtmlTextWriter htmlWrite =
    new HtmlTextWriter(stringWrite);

    MyRepeater.RenderControl(htmlWrite);

    string emailContent = stringWrite.ToString(); 
```

但有一个错误：

```
Control ''m_repeater_btn" of type 'LinkButton' must be placed inside a form tag with    runat=server. 
```

即使我把标签表单我仍然得到一个错误，我应该怎么把它？

这是我的 asp.net 页面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true"   CodeBehind="ViewMySisters.aspx.cs"  %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <asp:Repeater ID="MyRepeater" runat="server">

    <HeaderTemplate>
        <table style="border-collapse:collapse; border:1px solid grey;" width="500">
            <tr>
                <td style="border: 1px solid grey;">firstname</td>
                <td style="border: 1px solid grey;">lastname</td>
                <td style="border: 1px solid grey;">age</td>
    <td style="border: 1px solid grey;">work experienes</td>

            </tr>
    </HeaderTemplate>

    <ItemTemplate>
        <tr>
            <td style="border: 1px solid grey;"><%# DataBinder.Eval(Container.DataItem, "NAME")%></td>
            <td style="border: 1px solid grey;"><%# DataBinder.Eval(Container.DataItem, "FAMILY         NAME")%></td>
            <td style="border: 1px solid grey;"><%# DataBinder.Eval(Container.DataItem, "AGE")%></td>
            <td style="border: 1px solid grey;"><asp:LinkButton ID="btn" runat="server"   Text=">>>>" OnCommand="btnDetails_Command" CommandArgument='<%# Eval("ID") %>' /></td>
        </tr>
    </ItemTemplate>

    <FooterTemplate>
        </table>
    </FooterTemplate>

</asp:Repeater>

      <br />
<asp:Button ID="sendMail" runat="server" Text="send" OnClick="sendmail_Clicked" />
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:15:45.803

1）尝试执行您的页面（不是单个转发器）：

```
 private string LoadMailTemplate()
    {
        var sb = new StringBuilder();

        using (var sw = new StringWriter(sb))
        {
            this.Server.Execute(this, sw, false);
        }

        return sb.ToString();
    } 
```

`this`你的页面类在哪里。

2）您也可以将中继器放在控件上。这是执行控件主体的代码：

```
 public static string LoadMailTemplate(string templatePath)      
 {
                var page = new Page();
                Control myControl = page.LoadControl(templatePath);   
                var sb = new StringBuilder();    
                page.Controls.Add(myControl);

                using (var sw = new StringWriter(sb))
                {
                    page.Server.Execute(page, sw, false);
                }

                return sb.ToString();
 } 
```

称呼：

```
string  emailBody = LoadMailTemplate("~/modules/eurolight/MailTemplates/OrderMailTemplate.ascx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T13:20:59.187

你需要这个代码：

```
Public Overrides Sub VerifyRenderingInServerForm(control As Control)

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:20:04.273

电子邮件不是 asp.net 页面。那里仅限于平面 HTML 控件。我将链接按钮更改为锚标记并将其链接回您的 Web 应用程序并根据查询字符串加载详细信息。

# iphone - iOS - 并非我所有的应用内购买都显示在 iTunesConnect 中

> ID：14440138
> 
> 赞同：5
> 
> 时间：2013-01-21T13:52:03.607
> 
> 标签：iphone, objective-c, in-app-purchase, storekit

我有一个很奇怪但很严重的问题，我找不到任何有类似情况的人。

我有一个应用程序，其中包含三个应用程序内购买选项。在内部，`paymentQueue:updatedTransactions:`方法，我在成功购买后向服务器发送一个调用并将其记录在我的数据库中。所以我知道我的应用程序实时每个 IAP 的确切数量。

然而，当登录**iTunesConnect**并查看销售额时，我发现应用内购买完成的数量要少得多。例如，三天前，我的数据库记录了**150 次**应用购买。然而 iTunesConenect 仅显示同一天总共完成的**30**笔交易。

我不知道为什么会这样。

我不验证收据 - 我选择不验证收据，因为我真的不在乎少数人是否越狱他们的手机并免费获得 IAP。所以我想这可能是问题所在，但我真的怀疑使用我的应用程序的 150 个用户中有 120 个使用的是越狱手机。

所以我想知道：iTunesConnect IAP 报告是否有延迟？或者它在我的代码中？（代码如下）

```
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {
    for (SKPaymentTransaction *transaction in transactions) {
        NSLog(@"Transaction: %@\n", transaction.payment.productIdentifier);

        switch (transaction.transactionState) {
            case SKPaymentTransactionStatePurchasing:

                NSLog(@"Processing purchase");
                [_purchasingActivityView setTitle:@"Processing"];

                // show wait view here
                //statusLabel.text = @"Processing...";
                break;

            case SKPaymentTransactionStatePurchased:

                //TODO-> Log analytics
                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                NSLog(@"Finished purchase: %@\n", transaction.payment.productIdentifier);

                //All Filters were purchased
                if([transaction.payment.productIdentifier isEqualToString:kInAppPurchaseFilterPackALLProductId]) {
                    if ([[ACSimpleKeychain defaultKeychain] storeUsername:@"iapALL"
                                                                 password:nil
                                                               identifier:transaction.transactionIdentifier
                                                               forService:@"myService"]) {
                        [Logger log:[NSString stringWithFormat:@"Stored transaction credentials for fall: %@", transaction.transactionIdentifier]];

                            [[WebCallManager sharedManager] sendPurchaseNotice:@"ALL" withDeviceId:[OpenUDID value] withDelegate:nil];
                    }
                    else {
                        [Logger log:[NSString stringWithFormat:@"Error storing transaction credentials for fpone & fptwo purchase: %@", transaction.transactionIdentifier]];
                    }
                }

                //Filter Pack ONE was purchased
                else if([transaction.payment.productIdentifier isEqualToString:kInAppPurchaseFilterPackONEProductId]) {
                    if ([[ACSimpleKeychain defaultKeychain] storeUsername:@"iapONE"
                                                                 password:nil
                                                               identifier:transaction.transactionIdentifier
                                                               forService:@"myService"]) {
                        [Logger log:[NSString stringWithFormat:@"Stored transaction credentials for fpone purchase: %@", transaction.transactionIdentifier]];
                        [[WebCallManager sharedManager] sendPurchaseNotice:@"ONE" withDeviceId:[OpenUDID value] withDelegate:nil];
                    }
                    else {
                        [Logger log:[NSString stringWithFormat:@"Error storing transaction credentials for fpone purchase: %@", transaction.transactionIdentifier]];
                    }
                }

                //Filter Pack TWO was purchased
                else if([transaction.payment.productIdentifier isEqualToString:kInAppPurchaseFilterPackTWOProductId]) {
                    if ([[ACSimpleKeychain defaultKeychain] storeUsername:@"iapTWO"
                                                                 password:nil
                                                               identifier:transaction.transactionIdentifier
                                                               forService:@"myService"]) {
                        [Logger log:[NSString stringWithFormat:@"Stored transaction credentials for fptwo purchase: %@", transaction.transactionIdentifier]];
                        [[WebCallManager sharedManager] sendPurchaseNotice:@"TWO" withDeviceId:[OpenUDID value] withDelegate:nil];
                    }
                    else {
                        [Logger log:[NSString stringWithFormat:@"Error storing transaction credentials for fptwo purchase: %@", transaction.transactionIdentifier]];
                    }
                }

                [_purchasingActivityView dismissWithClickedButtonIndex:0 animated:YES];

                break;

            case SKPaymentTransactionStateRestored:
                if(_purchasingActivityView) {
                    [_purchasingActivityView dismissWithClickedButtonIndex:-1 animated:YES];
                }

                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                // remove wait view here
                NSLog(@"Transation restored\n");
                break;

            case SKPaymentTransactionStateFailed:

                if (transaction.error.code != SKErrorPaymentCancelled) {
                    NSLog(@"Error payment cancelled");
                }
                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                // remove wait view here

                [_purchasingActivityView dismissWithClickedButtonIndex:-1 animated:YES];
                NSLog(@"Purchase Error: %@\n", [[transaction error] description]);

                break;

            default:
                break;
        }
    }
} 
```

从用户的角度来看，交易似乎完美无缺。

任何帮助/建议将不胜感激。这让我完全困惑。谢谢！

**编辑**：我还应该提到我有三个 IAP 产品，根据我的数据库记录，所有这些产品都被多次购买。然而，ITC 只显示其中两个曾经被购买过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:58:22.533

如果用户之前购买了您的应用内购买，然后删除该应用并重新安装该应用，他们可以再次购买，但实际上不会被视为销售（它也不会显示在 iTunes Connect 中）。这可能是您的断开连接吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T03:32:57.127

很有可能是越狱手机。在我的应用程序上，我看到的假收据是真实收据的两倍。

# iphone - 如何访问 pageControl viewController 的特定视图？

> ID：14440140
> 
> 赞同：0
> 
> 时间：2013-01-21T13:52:12.070
> 
> 标签：iphone, ios, xcode

嗨，我正在创建一个项目，其中从服务器加载多个图像，其中包含一些像计数和评论计数和一个按钮来喜欢图像。我使用像 PageControl 这样的滑块控制器来显示单个图像。

这是我显示视图的代码

```
-(UIView*)reloadView:(DPSliderView *)sliderView viewAtIndex:(NSUInteger)idx
{
    _loading_view.hidden=TRUE;
    if (idx < [photos count]) {
        NSDictionary *item = [photos objectAtIndex:idx];

        PhotoView *v = [[PhotoView alloc] init];
        v.photoIndex = idx;
        v.imageView.imageURL = [DPAPI urlForPhoto:item[@"photo_220x220"]];
        NSString *placename1 = [item valueForKeyPath:@"spotting.item.name"];
        NSString *firstCapChar1 = [[placename1 substringToIndex:1] capitalizedString];
        NSString *cappedString1 = [placename1 stringByReplacingCharactersInRange:NSMakeRange(0,1) withString:firstCapChar1];
        v.spotNameLabel.text = cappedString1;

        NSString *placename = [item valueForKeyPath:@"spotting.place.name"];
        NSString *firstCapChar = [[placename substringToIndex:1] capitalizedString];
        NSString *cappedString = [placename stringByReplacingCharactersInRange:NSMakeRange(0,1) withString:firstCapChar];
        NSString *place1=[NSString stringWithFormat:@"%@",cappedString];
        NSString *address=[NSString stringWithFormat:@"%@",[item valueForKeyPath:@"spotting.place.address"]];

        NSString *location_str3 = [NSString stringWithFormat:@"@ %@, %@",place1,address];
        int cap_len=[place1 length];
        int address_lenth=[address length];

        ZMutableAttributedString *str = [[ZMutableAttributedString alloc] initWithString:location_str3
                                                                              attributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                                                          [[FontManager sharedManager] zFontWithName:@"Lucida Grande" pointSize:12],
                                                                                          ZFontAttributeName,
                                                                                          nil]];
        [str addAttribute:ZFontAttributeName value:[[FontManager sharedManager] zFontWithName:@"Lucida Grande" pointSize:12] range:NSMakeRange(0, cap_len+3)];

        [str addAttribute:ZForegroundColorAttributeName value:[UIColor colorWithRed:241/255.0f green:73.0/255.0f blue:2.0/255.0f alpha:1.0]range:NSMakeRange(0, cap_len+3)];

        [str addAttribute:ZForegroundColorAttributeName value:[UIColor colorWithRed:128.0/255.0f green:121.0/255.0f blue:98.0/255.0f alpha:1.0]range:NSMakeRange(cap_len+4, address_lenth)];

        v.placefontlabel.zAttributedText=str;

        v.likesCountLabel.text = [NSString stringWithFormat:@"%i", [item[@"likes_count"] intValue]];
        if ([_device_lang_str isEqualToString:@"es"])
        {
            v.shightingsLabel.text = [NSString stringWithFormat:NSLocalizedString(@"%i Vistas", nil), [item[@"sightings_count"] intValue]];
        }
        else
        {
            v.shightingsLabel.text = [NSString stringWithFormat:NSLocalizedString(@"%i Sightings", nil), [item[@"sightings_count"] intValue]];
        }
        if ([nolocationstr isEqualToString:@"YES"])
        {
            v.distanceLabel.text =[NSString stringWithFormat:@"%.2f km", [item[@"distance"] floatValue]];
        }
        else
        {
            CLLocation *location1 = [[CLLocation alloc] initWithLatitude:[[item valueForKeyPath:@"spotting.place.lat"]floatValue] longitude:[[item valueForKeyPath:@"spotting.place.lng"] floatValue]];
            CLLocation *location2 = [[CLLocation alloc] initWithLatitude:[_explore_lat_str floatValue] longitude:[_explore_lng_str floatValue]];
            NSString *lat_laong=[NSString stringWithFormat:@"%f",[location1 distanceFromLocation:location2]];
            int km=[lat_laong floatValue]*0.001;
            NSString *distancestr=[NSString stringWithFormat:@"%d km",km];
            float dist=[distancestr floatValue];
            v.distanceLabel.text = [NSString stringWithFormat:@"%.2f km", dist];
        }

        if (![item[@"likes"] boolValue]) {
            v.likeButton.enabled = YES;
            v.likeButton.tag = idx;
            [v.likeButton setImage:[UIImage imageNamed:@"like_new.png"] forState:UIControlStateNormal];
            [v.likeButton addTarget:self action:@selector(likeAction:) forControlEvents:UIControlEventTouchUpInside];
        }
        else
        {
            v.likeButton.tag = idx;
            [v.likeButton setImage:[UIImage imageNamed:@"like_new1.png"] forState:UIControlStateNormal];
        }

        NSArray *guides  = item[@"guides"];
        if ([guides count] > 0) {
            NSString *guideType = [[guides objectAtIndex:0] valueForKey:@"type"];
            UIImage *guidesIcon = [UIImage imageNamed:[NSString stringWithFormat:@"%@.png", guideType]];
            v.guideButton.hidden = NO;
            v.guideButton.tag = idx;
            [v.guideButton setImage:guidesIcon forState:UIControlStateNormal];
            [v.guideButton addTarget:self action:@selector(guideAction:) forControlEvents:UIControlEventTouchUpInside];
        }
        v.shareButton.tag = idx;
        [v.shareButton addTarget:self action:@selector(shareAction:) forControlEvents:UIControlEventTouchUpInside];

        UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(photoTapGesture:)];
        [v addGestureRecognizer:tapGesture];
        [tapGesture release];

        return [v autorelease];
    } else {
        UIImageView *iv = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sc_img.png"]];
        UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
        indicator.center = CGPointMake(CGRectGetMidX(iv.bounds), 110);
        [indicator startAnimating];
        [iv addSubview:indicator];
        [indicator release];
        return [iv autorelease];
    }

} 
```

现在我的问题是：

如果我要单击 Like Button ，那么我必须更改按钮图像以及喜欢计数。我可以通过这种方法更改按钮图像

```
[sender setImage:[UIImage ImageNamed:@"image.png"]]; 
```

但是如何更改 Label 的 Like 计数？如何访问视图的特定标签？我已经分配了标签但是，我不知道如何分配它。我不想重新加载整个滑块，因为照片是从网络（远程服务器）加载的。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:22:07.470

只需保留对标签的引用并更新它。

```
// @interface
@property (nonatomic, strong) UILabel *myLabel; 

// @implementation
_myLabel.text = @"Whatever."; 
```

如果您有多个标签，请在创建视图时设置标签

```
newView.tag = sequenceNumber +100; 
```

然后更新

```
-(void)updateLabelWithTag:(NSInteger)tag {
   UILabel *label = (UILabel*) [self.scrollView viewWithTag:tag];
   label.text = @"Whatever.";
} 
```

# java - ObjectOutputStream 上的异常捕获

> ID：14440147
> 
> 赞同：2
> 
> 时间：2013-01-21T13:52:31.863
> 
> 标签：java, ubuntu, client-server, objectoutputstream

在我的软件中，我需要通过 ObjectOutputStream 在客户端和服务器之间发送消息。

sender方法的核心如下：

```
....

try {
    objWriter.writeUnshared(bean);
    objWriter.flush();
} catch (Exception e) {
    ....
}

... 
```

当网络电缆被移除时，在 Windows XP 上运行我的应用程序 writeUnsahred 抛出异常。

现在我正在尝试将我的应用程序运行到 ubuntu 12.10 中，如果我移除电缆，该方法不会抛出任何东西！

有什么提示吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:17:56.763

是否以及何时获得异常取决于：

*   你端的套接字发送缓冲区有多大
*   对等端的套接字接收缓冲区有多大
*   你已经写了多少未确认的数据
*   你写了多久了，和
*   TCP 堆栈的内部计时器。

您可以从 Java 控制的唯一部分是您自己的套接字发送缓冲区。因此，何时以及是否会传递异常是完全不可预测的。因此，您不得将应用程序编写为依赖于特定行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:36:02.470

是的，但是按照 writeUnshared 和 flush 调用的方法，我看到 write(OutputStream.class:106) 被调用，如果流关闭，此方法必须生成异常......所以我使用该信息来检查我的频道是否处于活动状态..问题是在ubuntu中，即使我拔掉电缆，频道似乎也是打开的。

# c# - ASP.NET 无法对空引用执行运行时绑定 - 在我尝试登录我的网站后

> ID：14440154
> 
> 赞同：1
> 
> 时间：2013-01-21T13:53:02.190
> 
> 标签：c#, asp.net

我的 ASP.NET 页面中有下一个控件：

```
<asp:Content ID="headerPanelContent" ContentPlaceHolderID="mainContent" runat="server">
    <asp:Repeater ID="rptHomePage" runat="server" DataSourceID="dsHomePage" OnItemCreated="rptHomePage_ItemCreated">
        <ItemTemplate>
            <div class="content-forum-section">
                <table class="forum-table-view">
                    <tr class="content-forum-name f-background">
                        <td colspan="3">
                            <h2 class="t-color-white"><%# Eval("forumName") %></h2>
                            <asp:HiddenField ID="hdnForumID" Value='<%# Eval("forumID") %>' runat="server" />
                        </td>
                    </tr>
                    <tr class="f-background t-color-white">
                        <td style="width: 85%;">Section
                        </td>
                        <td style="width: 9%;">Themes
                        </td>
                        <td style="width: 9%;">Messages
                        </td>
                    </tr>
                    <asp:Repeater ID="rptSections" runat="server" DataSourceID="dsSectionsInForum" OnItemCreated="rptSections_ItemCreated">
                        <ItemTemplate>
                            <tr class="lightgrey-background">
                                <td>
                                    <div class="forum-section-container">
                                        <a href='<%# "./Section.aspx?id=" + Eval("SectionId").ToString() %>'><%#Eval("Name") %></a>
                                        <br />
                                        <asp:Repeater ID="rptSubsections" runat="server" DataSourceID="dsSubsectionsInSection">
                                            <ItemTemplate>
                                                <div class="subsection-link">
                                                    <a href='<%# "./Subsection.aspx?id=" + Eval("SubsectionId").ToString() %>'><%# Eval("Name") %></a>
                                                </div>
                                            </ItemTemplate>
                                        </asp:Repeater>
                                        <asp:LinqDataSource ID="dsSubsectionsInSection" runat="server">
                                        </asp:LinqDataSource>
                                    </div>
                                </td>
                                <td>0
                                </td>
                                <td>0
                                </td>
                            </tr>
                        </ItemTemplate>
                    </asp:Repeater>
                    <asp:LinqDataSource ID="dsSectionsInForum" runat="server"></asp:LinqDataSource>
                </table>
            </div>
        </ItemTemplate>
    </asp:Repeater>
    <asp:LinqDataSource ID="dsHomePage" runat="server"
        ContextTypeName="PWO_Projekt.ForumDBDataContext"
        Select="new(Id as forumID, Name as forumName)"
        TableName="Forums">
    </asp:LinqDataSource>
</asp:Content> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void rptHomePage_ItemCreated(object sender, RepeaterItemEventArgs e)
    {
        var forumDetails = (dynamic)e.Item.DataItem;
        int forumID = forumDetails.forumID;
        LinqDataSource lds = (LinqDataSource)e.Item.FindControl("dsSectionsInForum");
        lds.ContextTypeName = "PWO_Projekt.ForumDBDataContext";
        lds.TableName = "Sections";
        lds.Where = "ForumId == @id";
        lds.WhereParameters.Add("id", DbType.Int32, forumID.ToString());
        lds.DataBind();
    }

    protected void rptSections_ItemCreated(object sender, RepeaterItemEventArgs e)
    {
        var sectionDetails = (dynamic)e.Item.DataItem;
        int sectionID = sectionDetails.SectionId;
        LinqDataSource lds = (LinqDataSource)e.Item.FindControl("dsSubsectionsInSection");
        lds.ContextTypeName = "PWO_Projekt.ForumDBDataContext";
        lds.TableName = "Subsections";
        lds.Where = "SectionId == @id";
        lds.WhereParameters.Add("id", DbType.Int32, sectionID.ToString());
        lds.DataBind();
    } 
```

我也在这个页面上有我的用户控件作为登录表单：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="LoginForm.ascx.cs" Inherits="PWO_Projekt.Controls.LoginForm" %>
<form>
<table>
    <tr>
        <td>Login
        </td>
        <td>
            <asp:TextBox ID="txtLogin" runat="server" CssClass="smallfont" Columns="15"></asp:TextBox>
        </td>
        <td>
            <asp:CheckBox ID="chRemeber" runat="server" />
            Remember me
        </td>
    </tr>
    <tr>
        <td>Password
        </td>
        <td>
            <asp:TextBox ID="txtPassword" runat="server" TextMode="Password" CssClass="smallfont" Columns="15"></asp:TextBox>
        </td>
        <td>
            <asp:Button ID="btnLogin" runat="server" Text="Log in" OnClick="btnLogin_Click" />
        </td>
    </tr>
    <tr>
        <td colspan="3">
            <asp:Label ID="lblError" runat="server" Text="" ForeColor="Red"></asp:Label>
        </td>
    </tr>
</table> 
```

和后面的代码：

```
protected void btnLogin_Click(object sender, EventArgs e)
    {
        string login = txtLogin.Text.Trim();
        string password = CommonFunctions.getMd5Hash(txtPassword.Text.Trim());
        using (ForumDBDataContext db = new ForumDBDataContext())
        {
            db.Connection.ConnectionString = CommonFunctions.getConnectionString();
            var user =
                from u in db.Users
                where (u.Login == login) && (u.Password == password)
                select u;
            if (user.Count() == 1)
            {
                Session["UserLogin"] = login;
                Response.Redirect("./");
            }
        }
    } 
```

但是在按下登录按钮后，我的页面上出现了下一个错误：

> 无法对空引用执行运行时绑定 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

```
{

var forumDetails = (dynamic)e.Item.DataItem;

int forumID = forumDetails.forumID; //error is here

LinqDataSource lds = (LinqDataSource)e.Item.FindControl("dsSectionsInForum");

lds.ContextTypeName = "PWO_Projekt.ForumDBDataContext"; 
```

而且我不明白这里有什么问题。仅在按下登录按钮后才会出现此异常（正如我在 PostBack 后了解的那样）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:17:28.960

该 `DataItem`属性仅在您调用`DataBind()`中继器时设置。回发后，DataItem 不再存在。

您应该替换，它会在应用数据绑定时`Item_Created`触发的所有请求上触发。`Item_Databound`

# javascript - 从javascript调用jquery ajax函数

> ID：14440155
> 
> 赞同：0
> 
> 时间：2013-01-21T13:53:10.180
> 
> 标签：javascript

> **可能重复：**
> [jQuery ajax 返回值](https://stackoverflow.com/questions/4982983/jquery-ajax-return-value)
> [如何从函数的 AJAX 调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

我有 javascript。它从数据库加载数据。关于加载数据，我想返回 true 或 false。但我无法退货。我的代码如下：

```
function CheckISRC() {
     var url = "/TrackEdit/CheckISRC/" + $('#isrcid').val();
     var isrc = $('#isrcid').val();
     var result = false;
     $.get(url, {
         isrc: isrc
     }, function (data) {
         if (data == "true") {
             result = true;
         }
         else {
             result = false;
         }
     });
     return result;
 } 
```

它总是给出错误的结果。有人遇到过这种问题吗？'谢谢提前'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:55:39.363

如果同步使用该函数非常重要，您可以将其重构为：

```
function CheckISRC() {
     var url = "/TrackEdit/CheckISRC/" + $('#isrcid').val();
     var isrc = $('#isrcid').val();
     var result = false;
     $.ajax({
        async: false,
        success: function (data) {
           if (data == "true") {
               result = true;
           }
           else {
               result = false;
           }
         },
         data: { isrc: isrc }
     });
     return result;
 } 
```

由于 @ManseUK`async`在 jQuery 1.8 中已弃用，因此如果您想要同步方法，您应该使用旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:55:48.097

JQuery ajax 函数是异步的。这意味着当您将结果初始化为false时，在“返回结果”之后将结果设置为true或false；线路已运行。

您可以使调用同步，但这被认为是更糟糕的做法。您通常最好重构代码以允许 JQuery Ajax 的异步特性。

例如，您以前有：

```
function myFunction() {
    //Code before
    var result = CheckISRC();
    //Code after using result
} 
```

你可以有以下内容：

```
function myFunction() {
    //Code before
    CheckISRC();
}
function myFunction_callback(result) {
    //Code after using result
} 
```

在哪里调用`myFunction_callback`ajax 代码的成功选项，如下所示：

```
function CheckISRC() {
     var url = "/TrackEdit/CheckISRC/" + $('#isrcid').val();
     var isrc = $('#isrcid').val();
     $.get(url, {
         isrc: isrc
     }, function (data) {
             myFunction_callback(data == "true");
     });
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:56:53.587

问题是当你返回时`result`，它没有价值。因为 ajax 没有完成它的任务。你做一些回调函数，当ajax的结果从服务器返回时，做你想做的事。

像这样的一些事情：

```
function CheckISRC(Callback) {
    var url = "/TrackEdit/CheckISRC/" + $('#isrcid').val();
    var isrc = $('#isrcid').val();
    var result = false;
    $.get(url, {
        isrc: isrc
    }, function (data) {
        if (data == "true") {
            Callback(true);
        }
        else {
            Callback(false);
        }
    });
 }
 function YourCallback(result) {
     //...
 } 
```

# java - NoSuchFieldError - IntelliJ 10

> ID：14440158
> 
> 赞同：0
> 
> 时间：2013-01-21T13:53:25.730
> 
> 标签：java, tomcat, intellij-idea

我目前有两个项目。一个是我的主要项目，即 TOMCAT/JSP，第二个项目是我正在开发的 jar 库。

我正在制作一个 jar 的项目非常简单，在最初构建/制作并让它输出一个 .jar 文件之后，我去了主项目的库部分并指向它。在我尝试向 jar 中添加其他功能之前，一切都按预期工作。

在第二个项目中，我向枚举添加了一个新字段。现在，当尝试在主项目中访问它时，我的 TOMCAT 日志中出现错误。

```
java.lang.NoSuchFieldError: MY_NEW_FIELD 
```

我尝试从输出中删除 jar，从库中删除链接并重建。似乎没有什么可以解决它。有没有类似于“清洁”的东西可以用来解决这个问题，或者我还需要做些什么吗？

# ios - 如何设计像 Viber 这样的网络质量指标？

> ID：14440166
> 
> 赞同：0
> 
> 时间：2013-01-21T13:53:52.460
> 
> 标签：ios, networking, signals

这是应用程序的链接...

[http://www.gadgetlite.com/2011/01/25/viber-app-hits-version-1-1-network/](http://www.gadgetlite.com/2011/01/25/viber-app-hits-version-1-1-network/)

![在此处输入图像描述](../Images/5ca911d04ed201905d8d028b6e4f0b1d.png)

我环顾四周，主要建议私有 api 或 networkactivityindicator（这不是我要找的）

希望有任何关于我如何开始的提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:57:33.977

Viber 应用程序的网络质量是指数据连接。

在 NSURLConnectionDataDelegate 处设置开始时间`connection:didReceiveResponse:`，然后在 处传输一些内容并计算字节数`connection:didReceiveData:`。在`connectionDidFinishLoading:`设置完成时间时，计算时间间隔并将其与您的任意阈值相匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:06:44.073

我感觉默认的 iOS 框架会包含这些信息（查看 iOS 中的网络库）。如果没有，您可能会查看 ping 时间（在后台 ping URL 并查看延迟量，确保您使用的服务器始终可用且快速。ping google.com 可能吗？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T07:12:09.360

所以我环顾四周，阅读了 Ege Akpinar 之前给出的非常有用的答案，并偶然发现了这篇文章。他们使用 Apple 自己的 Class，可以在 Mac OSX 和 iOS 上使用：

[从主机获取 ping 延迟](https://stackoverflow.com/questions/22469810/get-ping-latency-from-host-in-objective-c)

Apple的Sample的链接可以通过上面的链接获得，但是为了效率和速度，这里是它的直接链接：

[https://developer.apple.com/library/mac/samplecode/SimplePing/Introduction/Intro.html#//apple_ref/doc/uid/DTS10000716-Intro-DontLinkElementID_2](https://developer.apple.com/library/mac/samplecode/SimplePing/Introduction/Intro.html#//apple_ref/doc/uid/DTS10000716-Intro-DontLinkElementID_2)

我还发现了另一篇文章，展示了如何使用 Swift 实现该类。我想我可能会包括它，以防你使用 Swift：

[在 swift (iOS) 中使用 Simple Ping](https://stackoverflow.com/questions/30879461/using-simple-ping-in-swift-ios)

我希望这会有一些用处。

# stdin - 标准输入和输入缓冲区的内部工作

> ID：14440167
> 
> 赞同：0
> 
> 时间：2013-01-21T13:53:55.230
> 
> 标签：stdin, outputstream, gets

我试图在 5 秒内打印用户输入的字符数。但是我在获取输入缓冲区时遇到了一些问题。

代码片段

* * *

```
# include <signal.h>
# include <sys/time.h>
# define INTERVAL 3
# define MAX_SIZE 1024

char buffer[MAX_SIZE];
int count = 0;

void alarm_handler (int i)
{
    printf("\r\n");
    printf("\nTimer expired.....\r\n");
    count = read(stdin,buffer,sizeof(buffer));
    puts(buffer);
    printf("count:%d\r\n",strlen(buffer));
    exit(0);
}

int main()
{
    signal(SIGALRM,alarm_handler); 
    alarm(INTERVAL);
    setbuf(stdin, NULL);

    printf("Start Triggering....\r\n");
    while (1)
    {
        gets(buffer);
    }
    return;
} 
```

在上面的代码中，我没有得到用户输入的输入，并且输出缓冲区始终为零。谁能告诉我出了什么问题以及解决方案？

输出

```
++++++

开始触发....

阿卡卡卡卡卡

定时器超时......

计数：0

```

但我期待以下输出

```
++++++++++++++++++++++++++++++++++

开始触发....

阿卡卡卡卡卡

定时器超时......

阿卡卡卡卡卡

计数：14

```

请提出您对此的看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:59:01.363

缓冲和类似的事情非常复杂。我对您的问题采取了稍微不同的方法 - 设置终端，以便立即将击键传递给程序（而不是等到`<enter>`被按下），并在发生时计算按下的键数。这需要使用`getch()`修改终端设置的功能。请注意，我确保终端在最后返回到其“旧”设置，以防中断“在错误的时间”发生。

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <sys/time.h>
#include <unistd.h>
#include <termios.h>
#define INTERVAL 3

int count = 0;
int flag = 0;
struct termios oldt; // keep old terminal settings to restore at the end

// function prototype - compiler was complaining. Not sure why?
unsigned int alarm(unsigned int interval);

void alarm_handler(int i) {
  flag = 1;
}

int getch(void)
{
  // function to return keystroke "as it happens"
  int ch;
  struct termios newt;
  tcgetattr(STDIN_FILENO, &oldt); /*store old settings */
  newt = oldt; /* copy old settings to new settings */
  newt.c_lflag &= ~(ICANON | ECHO); /* make one change to old settings in new settings */
  tcsetattr(STDIN_FILENO, TCSANOW, &newt); /*apply the new settings immediatly */
  ch = getchar(); /* standard getchar call */
  tcsetattr(STDIN_FILENO, TCSANOW, &oldt); /*reapply the old settings */
  return ch; /*return received char */
}

int main() {
  signal(SIGALRM,alarm_handler); 
  alarm(INTERVAL);

  printf("Start Triggering....\r\n");
  char c;
  do
    {
      c = getch(); // get key as soon as it's pressed
      putchar(c);  // and echo to the screen
      count++;     // increment counter
    } while (!flag);

  printf("\nTimed out!\nCharacter count = %d\n", count);
  tcsetattr(STDIN_FILENO, TCSANOW, &oldt); /*reapply the old settings */

  return 0;
} 
```

# matplotlib - matplotlib x 轴刻度日期格式和位置

> ID：14440171
> 
> 赞同：5
> 
> 时间：2013-01-21T13:54:32.373
> 
> 标签：matplotlib

我试图复制最初使用 flotr2 创建的绘图图，以便使用 matplotlib 输出 pdf。我必须说 flotr 更容易使用......但除此之外 - 我目前正试图将 x 轴上的日期/时间格式化为所需的格式，即小时：分钟，间隔为每 2 小时，如果期间如果周期长于 1 天且间隔为 1 天，则 x 轴上的格式为小于 1 天和年-月-日格式。

我已经阅读了许多示例并尝试复制它们，但结果保持不变，即小时：分钟：秒，根据时间段的长短间隔 1 到 3 小时。![在此处输入图像描述](../Images/43a38a08970e17467dae74558b3556c6.png)

我的代码：

```
colorMap = {
        'speed': '#3388ff',
        'fuel': '#ffaa33',
        'din1': '#3bb200',
        'din2': '#ff3333',
        'satellites': '#bfbfff'
}

otherColors = ['#00A8F0','#C0D800','#CB4B4B','#4DA74D','#9440ED','#800080','#737CA1','#E4317F','#7D0541','#4EE2EC','#6698FF','#437C17','#7FE817','#FBB117']

plotMap = {}

import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
import matplotlib.dates as dates
fig = plt.figure(figsize=(22, 5), dpi = 300, edgecolor='k')
ax1 = fig.add_subplot(111)

realdata = data['data']
keys = realdata.keys()
if 'speed' in keys:
    speed_index = keys.index('speed')
    keys.pop(speed_index)
    keys.insert(0, 'speed')

i = 0
for key in keys:
    if key not in colorMap.keys():
        color = otherColors[i]
        otherColors.pop(i)
        colorMap[key] = color
        i += 1

label = u'%s' % realdata[keys[0]]['name']
ax1.set_ylabel(label)

plotMap[keys[0]] = {}
plotMap[keys[0]]['label'] = label

first_dates = [ r[0] for r in realdata[keys[0]]['data']]

date_range = first_dates[-1] - first_dates[0]

ax1.xaxis.reset_ticks()

if date_range > datetime.timedelta(days = 1):
    ax1.xaxis.set_major_locator(dates.WeekdayLocator(byweekday = 1, interval=1))
    ax1.xaxis.set_major_formatter(dates.DateFormatter('%Y-%m-%d'))
else:
    ax1.xaxis.set_major_locator(dates.HourLocator(byhour=range(24), interval=2))
    ax1.xaxis.set_major_formatter(dates.DateFormatter('%H:%M'))

ax1.xaxis.grid(True)

plotMap[keys[0]]['plot'] = ax1.plot_date(
                                dates.date2num(first_dates), 
                                [r[1] for r in realdata[keys[0]]['data']], colorMap[keys[0]], xdate=True)

if len(keys) > 1:
    first = True
    for key in keys[1:]:
        if first:
            ax2 = ax1.twinx()
            ax2.set_ylabel(u'%s' % realdata[key]['name'])
            first = False
        plotMap[key] = {}
        plotMap[key]['label'] = u'%s' % realdata[key]['name']
        plotMap[key]['plot'] = ax2.plot_date(
                                    dates.date2num([ r[0] for r in realdata[key]['data']]), 
                                    [r[1] for r in realdata[key]['data']], colorMap[key], xdate=True)

plt.legend([value['plot'] for key, value in plotMap.iteritems()], [value['label'] for key, value in plotMap.iteritems()], loc = 2)

plt.savefig(path +"node.png", dpi = 300, bbox_inches='tight') 
```

有人可以指出为什么我没有得到想要的结果吗？

编辑1：

我在绘图后移动了格式化块，现在似乎得到了更好的结果。不过，它们现在仍然是理想的结果。如果期间小于天，那么我每 2 小时（间隔 = 2）后得到滴答声，但我希望我能在偶数小时而不是不均匀的时间得到这些滴答声。那可能吗？

```
if date_range > datetime.timedelta(days = 1):
    xax.set_major_locator(dates.DayLocator(bymonthday=range(1,32), interval=1))
    xax.set_major_formatter(dates.DateFormatter('%Y-%m-%d'))
else:
    xax.set_major_locator(dates.HourLocator(byhour=range(24), interval=2))
    xax.set_major_formatter(dates.DateFormatter('%H:%M')) 
```

Edit2：这似乎给了我想要的东西：

```
if date_range > datetime.timedelta(days = 1):
    xax.set_major_locator(dates.DayLocator(bymonthday=range(1,32), interval=1))
    xax.set_major_formatter(dates.DateFormatter('%Y-%m-%d'))
else:
    xax.set_major_locator(dates.HourLocator(byhour=range(0,24,2)))
    xax.set_major_formatter(dates.DateFormatter('%H:%M')) 
```

艾伦

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T05:44:02.013

你让自己变得比你需要的更难。 `matplotlib`可以直接针对`datetime`对象进行绘图。我怀疑您的问题是您正在设置定位器，然后进行绘图，并且绘图正在用默认的自动版本替换您的定位器/格式化程序。尝试将有关定位器的逻辑块移动到绘图循环*下方。*

我认为这可以替换你的相当一部分代码：

```
d = datetime.timedelta(minutes=2)
now =  datetime.datetime.now()
times = [now + d * j for j in range(500)]
ax = plt.gca() # get the current axes
ax.plot(times, range(500))

xax = ax.get_xaxis() # get the x-axis
adf = xax.get_major_formatter() # the the auto-formatter

adf.scaled[1./24] = '%H:%M'  # set the < 1d scale to H:M
adf.scaled[1.0] = '%Y-%m-%d' # set the > 1d < 1m scale to Y-m-d
adf.scaled[30.] = '%Y-%m' # set the > 1m < 1Y scale to Y-m
adf.scaled[365.] = '%Y' # set the > 1y scale to Y

plt.draw() 
```

[文档`AutoDateFormatter`](http://matplotlib.org/api/dates_api.html#matplotlib.dates.AutoDateFormatter)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-06T17:17:34.690

我通过这样做实现了我想要的：

```
if date_range > datetime.timedelta(days = 1):
    xax.set_major_locator(dates.DayLocator(bymonthday=range(1,32), interval=1))
    xax.set_major_formatter(dates.DateFormatter('%Y-%m-%d'))
else:
    xax.set_major_locator(dates.HourLocator(byhour=range(0,24,2)))
    xax.set_major_formatter(dates.DateFormatter('%H:%M')) 
```

# .net - 如何在保留书签的同时向现有 pdf 添加附加页面？（PDFSharp等）

> ID：14440173
> 
> 赞同：8
> 
> 时间：2013-01-21T13:54:38.017
> 
> 标签：.net, pdf-generation, bookmarks, pdfsharp

我有一个 PDF，我想在其中添加一个附加页面，最好是作为第一页。我已经能够使用 PDFSharp 实现这一点，但问题是原始 PDF 包含我想维护的书签。使用 PDFSharp 似乎删除了书签，或者至少我不知道有任何选项或命令可以将原始 TOC 与包含附加页面的新创建的 PDF 一起保存。

有人知道如何将 TOC 与 PDFSharp 或任何其他 .NET 库（最好是免费的库）一起保存，这将允许我向现有 PDF 添加页面并维护其书签？（我知道添加一个页面作为第一页会使页面引用无效，这就是为什么添加一个页面作为最后一页也可以。）

谢谢大家！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T10:36:55.963

事实证明，PDF 文件使用书签，而不是 TOC。

此处显示了适用于书签的解决方案：http:
[//forum.pdfsharp.net/viewtopic.php?p=6660#p6660](http://forum.pdfsharp.net/viewtopic.php?p=6660#p6660)

打开现有文件进行修改，在文档开头插入一个新页面 - 所有书签仍然有效。

这是代码片段：

```
static void Main(string[] args)
{
    const string filename = "sample.pdf";
    File.Copy(Path.Combine("D:\\PDFsharp\\PDFfiles\\sample\\", filename),
      Path.Combine(Directory.GetCurrentDirectory(), filename), true);

    // Open an existing document for editing and loop through its pages
    PdfDocument document = PdfReader.Open(filename);
    var newPage = document.InsertPage(0);

    // Get an XGraphics object for drawing
    XGraphics gfx = XGraphics.FromPdfPage(newPage);

    // Create a font
    XFont font = new XFont("Times New Roman", 20, XFontStyle.BoldItalic);

    // Draw the text
    gfx.DrawString("Hello, World!", font, XBrushes.Black,
      new XRect(0, 0, newPage.Width, newPage.Height),
      XStringFormats.Center);

    document.Save(filename);
    // ...and start a viewer.
    Process.Start(filename);
} 
```

# javascript - CKeditor insertHtml/ insertElement IE8 问题

> ID：14440174
> 
> 赞同：1
> 
> 时间：2013-01-21T13:54:40.387
> 
> 标签：javascript, ckeditor, fckeditor

我在 IE8 下使用 CKEditor insertHtml 和 insertElement 方法有一些问题，我开发了一些自定义插件，当我尝试将任何元素插入到文本中时，在我的情况下，这是带有一些额外自定义属性的“span”标签（这个自定义标记值是 base64_encode'd 值））它不会将其插入光标位置（如在 FF 或 Chrome 中），而是在文本的开头...

以下是我如何使用这两个功能的两个示例：

//1

```
editor.insertHtml("<span class='internal' internal='" + params + "'>" + data.url + "</span>") 
```

//2

```
var span = editor.document.createElement( 'span' );

span.setAttribute( 'class', 'internal' );
span.setAttribute( 'internal', params );
span.setText( data.url );
editor.insertElement( span ); 
```

有什么帮助吗？:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:25:54.407

仅供参考，我已将其从 3.6.4 版本更新到 4.0.1 版本。它刚刚开始工作:-)

# pandas - 在 pandas DataFrame 中的滚动窗口上对数据进行排名

> ID：14440187
> 
> 赞同：7
> 
> 时间：2013-01-21T13:55:46.880
> 
> 标签：pandas, time-series, rank

我是 Python 和 Pandas 库的新手，如果这是一个微不足道的问题，我深表歉意。我正在尝试在 N 天的滚动窗口中对时间序列进行排名。我知道有一个排名函数，但这个函数对整个时间序列的数据进行排名。我似乎无法找到滚动排名功能。这是我正在尝试做的一个例子：

```
 A

01-01-2013 100
02-01-2013 85
03-01-2013 110
04-01-2013 60
05-01-2013 20
06-01-2013 40 
```

如果我想在 3 天的滚动窗口内对数据进行排名，答案应该是：

```
 Ranked_A

01-01-2013 NaN
02-01-2013 Nan
03-01-2013 1
04-01-2013 3
05-01-2013 3
06-01-2013 2 
```

Python中是否有可以做到这一点的内置函数？有什么建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:52:58.517

如果你想使用 Pandas[内置的 rank 方法](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.rank.html)（带有一些额外的语义，例如升序选项），你可以为它创建一个简单的函数包装器

```
def rank(array):
    s = pd.Series(array)
    return s.rank(ascending=False)[len(s)-1] 
```

然后可以将其用作自定义滚动窗口功能。

```
pd.rolling_apply(df['A'], 3, rank) 
```

哪个输出

```
Date
01-01-2013   NaN
02-01-2013   NaN
03-01-2013     1
04-01-2013     3
05-01-2013     3
06-01-2013     2 
```

（我假设`df`来自 Rutger 的回答中的数据结构）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:40:55.200

您可以在 Pandas 中为 rolling_window 编写自定义函数。在该函数中使用 numpy 的 argsort() 可以为您提供窗口内的排名：

```
import pandas as pd
import StringIO

testdata = StringIO.StringIO("""
Date,A
01-01-2013,100
02-01-2013,85
03-01-2013,110
04-01-2013,60
05-01-2013,20
06-01-2013,40""")

df = pd.read_csv(testdata, header=True, index_col=['Date'])

rollrank = lambda data: data.size - data.argsort().argsort()[-1]

df['rank'] = pd.rolling_apply(df, 3, rollrank)

print df 
```

结果是：

```
 A  rank
Date                 
01-01-2013  100   NaN
02-01-2013   85   NaN
03-01-2013  110     1
04-01-2013   60     3
05-01-2013   20     3
06-01-2013   40     2 
```

# java - 如何在 android 应用程序中使用 rt.jar 中的类？

> ID：14440194
> 
> 赞同：1
> 
> 时间：2013-01-21T13:56:10.803
> 
> 标签：java, android, dalvik

我正在构建一个引用外部库的 android 应用程序。问题是该库使用 java.beans.PropertyDescriptor ，这会在运行时导致 Dalvik 异常。

我怎么解决这个问题 ？我在另一个论坛上发现可以操纵字节码来加载 Dalvik 不知道的类。

有什么建议么 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:59:50.853

> 我怎么解决这个问题 ？

将源代码获取到外部库并重写以避免`java.beans.PropertyDescriptor`.

例如，您可以：

*   `java.beans.PropertyDescriptor`从 Apache Harmony 之类的地方找到实现的源代码副本
*   重构`java.beans.PropertyDescriptor`为`some.other.package.PropertyDescriptor`
*   添加`some.other.package.PropertyDescriptor`到您的项目
*   修改外部库的源代码以使用`some.other.package.PropertyDescriptor`

请记住，这个库可能还有许多其他问题，显然不是为 Android 编写的。

> 我在另一个论坛上发现可以操纵字节码来加载 Dalvik 不知道的类。

由于`java.beans.PropertyDescriptor`Android设备上没有，这对您没有帮助。

# java - Hibernate @OneToOne 给出错误

> ID：14440196
> 
> 赞同：1
> 
> 时间：2013-01-21T13:56:16.487
> 
> 标签：java, hibernate, orm, hibernate-mapping

我有两个实体`Item`。

它们与实体相关联`Link`

每个项目可以有许多链接，但链接是两个项目之间的连接。

问题是项目的顺序很重要。一个永远是第一个`item`，另一个是第二个`item`。

所以我的实体是这样的：

```
Item
   private Collection<Link> links = new ArrayList<Link>();
    @OneToOne(cascade = CascadeType.ALL, mappedBy = ????)
    public Collection<Link> getLinks() {
       return links;
   }

Link
private Item firstItem;
private Item secondItem;

@OneToOne(mappedBy = ???)
public Item getFirstItem() {
    return firstItem;
}

@OneToOne(mappedBy = ???)
public Item getSecondItem() {
    return secondItem;
} 
```

我应该放什么`mappedBy`？？因为`Item`我应该像这样使用伪映射： `mappedBy = { "firstItem", "secondItem") }`

起初我没有映射，这给出了错误：

```
 @OneToOne or @ManyToOne on foo.bar.Item.links references an unknown entity: java.util.Collection 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:14:43.630

`mappedBy`您必须分别用指向`firstItem`和创建两个不同的集合`secondItem`。

如果您需要将它们视为单个集合，请在代码中执行。

同样如前所述，您需要使用`@OneToMany`/`@ManyToOne`而不是`@OneToOne`. `@ManyToOne`不需要`mappedBy`。

# opencv - 来自 OpenCV 的外部参数

> ID：14440198
> 
> 赞同：4
> 
> 时间：2013-01-21T13:56:21.193
> 
> 标签：opencv, camera-calibration

我正在使用 OpenCV 校准立体相机对。我已经拍摄了各种校准照片，并且使用 cv2.calibrateCamera 对内在参数进行了令人满意的拟合。但是，目前尚不清楚如何获取外部参数。

该函数只返回cameraMatrix，它虽然有用，但实际上只是故事的一半。我希望能够获得文档顶部显示的旋转/平移 - 即从世界原点到相机透视中心的矢量和旋转。

我猜 cv2.solvePnP 是我需要的东西，但目前还不清楚 R/T 到底是什么——它们是投影公式中的 [R|t] 还是其他什么？

我意识到也可以使用 cv2.stereoCalibrate，但我不明白为什么需要两个摄像头。原则上，投影矩阵可针对每个相机单独获得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T00:18:43.007

R 和 T 是描述相机旋转和平移的 3x1 向量

# linux - 在 VMWare 中捕获主机 IP

> ID：14440199
> 
> 赞同：0
> 
> 时间：2013-01-21T13:56:27.260
> 
> 标签：linux, ip, vmware

我想知道是否可以在 Linux 环境中捕获主机 IP 地址。基本上我在 VMWare 上运行 CentOS，我想看看我的操作系统在哪个物理服务器上运行。我看了看，似乎不可能，但是如果有人有任何想法，我会很高兴听到他们的声音。

大大的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:30:28.840

如果主机不在某些 NAT 之后并且可以访问 Internet，您可以打开一个返回 IP 地址的网页，例如[What Is My IP Address](https://www.whatismyip.com/)。

否则，来自 VMWare 网站：[VM 没有关于它们正在运行的系统的信息。这是设计使然，并且具有与安全相关的原因。](http://communities.vmware.com/thread/139353)

# node.js - nodejs中的异步覆盆子pi gpio事件

> ID：14440204
> 
> 赞同：24
> 
> 时间：2013-01-21T13:56:32.930
> 
> 标签：node.js, raspberry-pi

我将一个按钮连接到 Raspberry Pi GPIO 端口：

![http://adafruit.com/products/801](../Images/f1b8f0a75b90178a0d932349922a8883.png)

[pi-gpio](https://npmjs.org/package/pi-gpio) node js 模块只允许拉取当前状态，而不是等待状态改变：

```
gpio.read(16, function(err, value) {
    if(err) throw err;
    console.log(value);    // The current state of the pin
}); 
```

有没有异步绑定事件的解决方案？

在此示例中，这将是每当按下按钮时。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-24T06:32:54.237

我建议使用名为[onoff](https://github.com/fivdi/onoff)的模块。

它能够在不通过间隔轮询对 cpu 征税的情况下观察值文件。

我用 node.js 制作了一个小型测试应用程序来试用它的 LED 和按钮，你可以在[这里查看](https://github.com/gildean/raspi-ledblinker)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-21T15:44:31.890

不幸的是，使用硬件 GPIO 时没有生成事件。您可以使用发射器创建一个事件，并`setInterval`创建一个每隔一段时间检查状态的计时器，然后将一个事件发射到您的应用程序。

```
var ee = new process.EventEmitter(),
    buttonState;

ee.on('stateChange', function(previousValue, value){
  console.log('button state changed from', previousValue, 'to', value);
});

setInterval(function(){
  gpio.read(16, function(err, value) {
    if(err){
      ee.emit('error', err);
    } else{
      if(buttonState !== value){
        var previousState = buttonState;
        buttonState = value;
        ee.emit('stateChange', previousState, value);
      }
    }        
  });
}, 50); //check button state every 50ms 
```

您可以根据需要调整计时器。我认为 50 毫秒是一个很好的数字，因为如果它更快，人眼就无法检测到差异。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T17:24:31.047

我刚遇到这个模块

[https://github.com/EnotionZ/GpiO](https://github.com/EnotionZ/GpiO)

我没有深入研究它，但似乎它在后台使用 setInterval 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:35:42.367

顺便说一句，有一个与 node.js 非常相似的项目（但更精简）称为[Espruino](http://www.espruino.com)。

它可以在 Raspberry Pi（以及许多低功耗 ARM 微控制器）上运行，支持 HTTP，并且有一个名为[setWatch](http://www.espruino.com/Reference#l__global_setWatch)的函数，它的行为完全符合您的要求。

# google-apps-script - Google Apps 脚本搜索电子表格

> ID：14440207
> 
> 赞同：0
> 
> 时间：2013-01-21T13:56:40.337
> 
> 标签：google-apps-script

在“一个简单的搜索工具 UI”（[使用 TextBox 和 onKeyUp 和 onKeyDown 进行即时搜索](https://stackoverflow.com/questions/11628743/instant-search-using-textbox-and-onkeyup-and-onkeydown)）中，您可以在面板中列出找到的所有记录（而不是一次一个）？我能怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:34:51.940

您要求的代码有点复杂...[这是此类搜索工具的示例](https://script.google.com/macros/s/AKfycbxquizfGo85vdeaN7_qss2-LY--UxSLFFeF5ML5rXPWZfrX9oNt/exec)，源代码可[在此处](https://script.google.com/d/1aL_y6ZqrfqrzhDZ4yzxM9Ax5hGi9KOHR0ltZ-7gVOTpQCDXV9zY3Ka_Y/edit)获得，但我希望您熟悉 GAS ;-)

# javascript - jquery.html() 表单的奇怪行为

> ID：14440219
> 
> 赞同：13
> 
> 时间：2013-01-21T13:57:17.253
> 
> 标签：javascript, jquery, html

我有以下html：

```
<div class="copy_me_text">
    <div>
        <input type="text" name="name" />
        <input type="hidden" name="id" />
    </div>
</div>

<div class="copy_me_hidden">
    <div>
        <input type="hidden" name="name" />
        <input type="hidden" name="id" />
    </div>
</div> 
```

并遵循js代码：

```
var $cloned_text = $('.copy_me_text').clone();
$cloned_text.find('input[name="name"]').val("SOMETHING");
$cloned_text.find('input[name="id"]').val("SOMETHING");
console.log($cloned_text.html());

var $cloned_hidden = $('.copy_me_hidden').clone();
$cloned_hidden.find('input[name="name"]').val("SOMETHING");
$cloned_hidden.find('input[name="id"]').val("SOMETHING");
console.log($cloned_hidden.html()); 
```

输出对我来说很奇怪：

```
<div>
    <input name="name" type="text">
    <input value="SOMETHING" name="id" type="hidden">
</div>
<div>
    <input value="SOMETHING" name="name" type="hidden">
    <input value="SOMETHING" name="id" type="hidden">
</div> 
```

我还创建了 jsFiddle[示例](http://jsfiddle.net/xRjPm/1/)。这是正确的行为吗？我不明白，为什么在`.html()`函数中，`input type="text"`没有返回值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T15:02:24.720

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T14:01:55.633

这肯定看起来像 jQuery 中的一个错误。`attr()`您可以使用以下函数强制它返回：

```
$cloned_text.find('input[name="name"]').attr('value', "SOMETHING"); 
```

查看更新的[小提琴](http://jsfiddle.net/xRjPm/2/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T14:02:37.967

该`html()`函数将返回分配给元素的 html。在您的情况下，您正在为输入文本字段分配值。

试试这个

```
$cloned_text.find('input[name="name"]').attr('value', "SOMETHING"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T14:19:15.617

这不是一个 jQuery 错误。

正如您在[method的](https://github.com/jquery/jquery/blob/master/src/attributes.js#L220)[jQuery 源代码中`val`](https://github.com/jquery/jquery/blob/master/src/attributes.js#L220)看到的那样，它们只是设置元素`value`的 ，这与向`input`元素添加新属性（最终导致`value`属性更改）不同。

jQuery 源（`hooks`在此上下文中为 null）：

```
if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
    this.value = val;
} 
```

所以，要得到你想要的，你必须向`val`元素添加一个新属性，使用

```
.attr('value', "SOMETHING"); 
```

正如其他人提到的。

通过使用`.attr`新属性将被添加到元素中，并将`.html`其作为字符串返回。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-21T14:07:00.203

解决此问题的一个好方法是使用该`attr()`函数而不是`val()`.

所以，而不是

```
$cloned_text.find('input[name="name"]').val("SOMETHING"); 
```

写

```
$cloned_text.find('input[name="name"]').attr("value", "SOMETHING"); 
```

# ajax - TypeScript - 在 TypeScript 中实现的 Ajax 类

> ID：14440220
> 
> 赞同：4
> 
> 时间：2013-01-21T13:57:24.477
> 
> 标签：ajax, typescript

我正在尝试使用 TypeScript 编写 Ajax 类。打字稿代码——</p>

```
class Ajax {
    url: string;
    xmlData: string;
    mode: bool; 
    response: string;
    objHttpReq:any;

    constructor (postUrl: string, postXml: string, postMode: bool) {
        this.url = postUrl;
        this.xmlData = postXml;
        this.mode = postMode;       
        this.objHttpReq = new XMLHttpRequest(); 
        this.objHttpReq.mode = this.mode;   

        this.objHttpReq.onreadystatechange = this.OnRStateChange;

        this.objHttpReq.open("Post", this.url, this.mode);
        this.objHttpReq.send(this.xmlData);         
    }                   

    OnRStateChange(){               
        if (this.readyState==4 && this.status==200)
                    //here this refers to Ajax
        {
            //alert(xmlhttp.status);
            if( this.mode == false)
            {
                alert(this.responseText);
            }
            else
            {
                alert(this.responseText);
            }
        }   
    }
} 
```

以上代码编译的JavaScript

```
var Ajax = (function () { 

    function Ajax(postUrl, postXml, postMode) {
        this.url = postUrl;
        this.xmlData = postXml;
        this.mode = postMode;
        this.objHttpReq = new XMLHttpRequest();
        this.objHttpReq.mode = this.mode;
        this.objHttpReq.onreadystatechange = this.OnRStateChange;
        this.objHttpReq.open("Post", this.url, this.mode);
        this.objHttpReq.send(this.xmlData);
    }
    Ajax.prototype.OnRStateChange = function () {
        if(this.readyState == 4 && this.status == 200) {
         //here this refers XMLHttpRequest object – works fine
            if(this.mode == false) {
                alert(this.responseText);
            } else {
                alert(this.responseText);
            }
        }
    };
    return Ajax;
})(); 
```

上面的问题是 TypeScript 代码显示错误，因为 Ajax 类没有 readyState、status 和 responseText 属性。在 TypeScript 中编写 Ajax 类的正确代码应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:47:00.623

您只需要像这样添加适当的属性：

```
class Ajax {
    url: string;
    xmlData: string;
    mode: bool; 
    response: string;
    objHttpReq:any;
    readyState: number;
    status: number;
    responseText: string;

    constructor (postUrl: string, postXml: string, postMode: bool) {
        this.url = postUrl;
        this.xmlData = postXml;
        this.mode = postMode;       
        this.objHttpReq = new XMLHttpRequest(); 
        this.objHttpReq.mode = this.mode;   

        this.objHttpReq.onreadystatechange = this.OnRStateChange;

        this.objHttpReq.open("Post", this.url, this.mode);
        this.objHttpReq.send(this.xmlData);         
    }                   

    OnRStateChange(){               
        if (this.readyState==4 && this.status==200)
                    //here this refers to Ajax
        {
            //alert(xmlhttp.status);
            if( this.mode == false)
            {
                alert(this.responseText);
            }
            else
            {
                alert(this.responseText);
            }
        }   
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T08:56:58.187

我建议稍微修改一下你的课程：

在构造函数中，您可以进行如下调整：

```
this.objHttpReq.onreadystatechange = () => this.OnRStateChange(); 
```

然后在函数 OnRStateChange 中你可以参考

```
this.objHttpReq.readyState;
this.objHttpReq.status;
this.objHttpReq.responseText; 
```

所以最后你的类将如下所示：

```
class Ajax {
    url: string;
    xmlData: string;
    mode: bool; 
    response: string;
    objHttpReq:any;

    constructor (postUrl: string, postXml: string, postMode: bool) {
        this.url = postUrl;
        this.xmlData = postXml;
        this.mode = postMode;       
        this.objHttpReq = new XMLHttpRequest(); 
        this.objHttpReq.mode = this.mode;   

        this.objHttpReq.onreadystatechange =()=> this.OnRStateChange();

        this.objHttpReq.open("Post", this.url, this.mode);
        this.objHttpReq.send(this.xmlData);         
    }                   

    OnRStateChange(){               
        if (this.objHttpReq.readyState==4 && this.objHttpReq.status==200)
                    //here this refers to Ajax
        {
            //alert(xmlhttp.status);
            if( this.objHttpReq.mode == false)
            {
                alert(this.objHttpReq.responseText);
            }
            else
            {
                alert(this.objHttpReq.responseText);
            }
        }   
    }
} 
```

亲切的问候

# php - 验证字段后，表单中传递的 codeigniter 数据丢失

> ID：14440224
> 
> 赞同：1
> 
> 时间：2013-01-21T13:57:36.840
> 
> 标签：php, codeigniter

在我的一个控制器中，我有以下一段代码，我在其中加载不同模型的视图（带有表单）并将一些数据传递到那里。

```
$data['teste1']=$this->fichas_model->set_fichas();
$data['teste'] = $this->fichas_model->get_distribuidor();
$this->load->view('templates/header');
$this->load->view('aquitex/criar_ficha'); 
```

在提到的视图中，我然后呈现这样传递的数据：

```
<input type="input" name="id_ficha" value="<?php echo $teste1['id_ficha'];?>" />
<input type="input" name="nome_empresa" value="<?php echo $teste['nome_empresa'];?>" />
<input type="input" name="morada" value="<?php echo $teste['morada'];?>" /> 
```

这是没有问题的工作。问题在于我在此表单中的验证字段。如果调用了某些验证（例如，因为我将某些字段留空），我会丢失通过 $data['teste1'] e $data['teste'] 数组传递的数据并获取写入输入的 html 代码。

这是处理视图的控制器的代码：

```
public function criar_ficha()
{

$this->load->helper('form');
$this->load->library('form_validation');

$this->form_validation->set_rules('nome_produto', 'Nome do Produto', 'required');
$this->form_validation->set_rules('morada', 'Morada', 'required');

if ($this->form_validation->run() === FALSE)
{   
    $this->load->view('aquitex/criar_ficha', $data);
}
else
{
    $this->aquitex_model->set_ficha();
    $this->load->view('aquitex/success');
}
} 
```

希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:00:49.507

您可以为此使用 set_value 方法。[这](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#repopulatingform)是文档。

```
<input type="input" name="id_ficha" value="<?php echo set_value('id_ficha',$teste1['id_ficha']);?>" /> 
```

第二个参数是默认值，第一个参数是字段名。当验证失败时，第一个参数将查找值，如果找到则显示，如果没有则采用默认值。
此外，当验证失败时，您应该将所有行仅加载视图不起作用

```
if ($this->form_validation->run() === FALSE)
{   
    $data['teste1']=$this->fichas_model->set_fichas();
    $data['teste'] = $this->fichas_model->get_distribuidor();
    $this->load->view('templates/header');
    $this->load->view('aquitex/criar_ficha');
} 
```

另请注意，您没有传递`$data`给视图。它应该是

```
$this->load->view('aquitex/criar_ficha',$data); 
```

# sql - 数据库表分析混淆

> ID：14440229
> 
> 赞同：0
> 
> 时间：2013-01-21T13:57:47.533
> 
> 标签：sql, database

我正在使用`sql-server-2008-R2`. 我有一个表，其中包含三种类型的数据，并且这些类型在另一个表中。

*T = 表，F = 字段，FK = 外键，PK = 主键*

```
T1: F1(PK), F2(TypeID), F3, F4, F5, F6, F7

T2: F1(TypeID, PK), F2(TypeName) 
```

我想添加第四种类型**，但**这种类型有一个附加属性（例如 TypeRate）。
在项目开始的第一周，我的 T1 表将至少有 300 万条记录，然后它会减慢到每月大约 300 万条记录。

现在我想知道**下面列出的方法中哪种方法最好**：

**A. 向主表 (T1) 添加一个字段**：

```
T1: F1(PK), F2(TypeID), F3, F4, F5, F6, F7, F8(TypeRate) 
```

F8 大多数时候为空（对于其他类型的记录），但我只有一张表

* * *

**B. 添加另一个表，其中包含 T1 具有的所有字段 (T3)**：

```
T3: F1(PK), F2(TypeID), F3, F4, F5, F6, F7, F8 
```

这样 T1 大部分时间都没有空值，但我将有两个大部分相似的表。

* * *

**C. 添加描述表（T4）**：

```
T4: F1(PK), F2(FK:T1.PK), F3(TypeRate) 
```

这样我的 T1 表就没有空值，并且对于第四种类型的记录，附加数据在 T4 中（描述表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:22:49.170

如果不描述您要完成的工作，您就不能要求“最佳”解决方案。好吧，我想你可以问，但这使问题无法回答。

如果您试图最小化空间（内存和磁盘空间），那么将表一分为二——正如选项 (b) 所暗示的那样——将是最小空间解决方案。但是，您选择此选项的可能性非常非常小。空间效率的增益是最小的，将一个实体分成两个表通常不是最好的解决方案。

对于每个 NULL，第一个解决方案在每行中都会产生一些额外的开销——一个非常微不足道的空间量。在许多情况下，这似乎是一个很好的解决方案。无需额外连接即可使用数据。

第三种解决方案也很好。它需要一个额外的连接来获取数据。但是，如果引用表很小或者您在键上构建索引，那么性能开销应该可以忽略不计。

还有另一种解决方案，我将其称为 (d)。也就是说，拥有与第一个表具有相同主键的另一个表以及其他列。当有多个不同的列形成一个自然分组时，这可能很有用。

简而言之，作为一般规则，我会选择（c）。它以最小的性能损失维护数据库的关系完整性。在某些情况下，我会选择（a）或（d），但这取决于问题以及什么被认为是“最佳”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:23:52.073

看看 Scott Ambler 的关于将对象映射到关系数据库的主题的课堂论文，特别是比较策略的部分

[http://www.agiledata.org/essays/mappingObjects.html#ComparingTheStrategies](http://www.agiledata.org/essays/mappingObjects.html#ComparingTheStrategies)

# google-visualization - 谷歌图表纵轴整数

> ID：14440231
> 
> 赞同：15
> 
> 时间：2013-01-21T13:57:52.493
> 
> 标签：google-visualization

我正在尝试配置一个谷歌柱形图以显示整数的垂直轴，但是当它显示一个小的数字（如 1）时，它也会显示 0.25、0.50 等。

有没有办法改变这个？我浏览了文档，找不到任何似乎相关的内容。

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-23T04:13:35.583

简单的答案：是的，但它很复杂。

如果您只想将数字*显示*为整数，那么很容易：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['x', 'Cats', 'Blanket 1', 'Blanket 2'],
    ['A',   1,       1,           0.5],
    ['B',   2,       0.5,         1],
    ['C',   4,       1,           0.5],
    ['D',   8,       0.5,         1],
    ['E',   7,       1,           0.5],
    ['F',   7,       0.5,         1],
    ['G',   8,       1,           0.5],
    ['H',   4,       0.5,         1],
    ['I',   2,       1,           0.5],
    ['J',   3.5,     0.5,         1],
    ['K',   3,       1,           0.5],
    ['L',   3.5,     0.5,         1],
    ['M',   1,       1,           0.5],
    ['N',   1,       0.5,         1]
  ]);

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
      draw(data, {curveType: "function",
                  width: 500, height: 400,
                  vAxis: {maxValue: 10, format: '0'}}
          );
} 
```

如果你去[谷歌游乐场](http://code.google.com/apis/ajax/playground/?type=visualization#line_chart)，你会注意到轴标签是 0、2.5、5、7.5、10。通过向 vAxis 添加格式：'0'，它将只显示整数，所以我的标签变为 0、3 , 5, 8, 10。但显然这并不理想，因为 8 显示为介于 5 和 10 之间，但事实并非如此，因为数字实际上是 7.5 并且只是四舍五入。

您更改轴刻度/标签的能力受到限制。并且按照您的要求做一些特殊的 javascript 来创建适当的比例和数量的网格线，以防止将事情分解成时髦的数字。

基本上，您要确保您的最大值和最小值以及网格线的数量允许轻松划分，这样您只会得到整数。为此，您需要创建一些时髦的新逻辑。这是一些示例代码，可让您获得适当的最小/最大轴值：

```
// Take the Max/Min of all data values in all graphs
var totalMax = 345;
var totalMin = -123;

// Figure out the largest number (positive or negative)
var biggestNumber = Math.max(Math.abs(totalMax),Math.abs(totalMin));

// Round to an exponent of 10 appropriate for the biggest number
var roundingExp = Math.floor(Math.log(biggestNumber) / Math.LN10);
var roundingDec = Math.pow(10,roundingExp);

// Round your max and min to the nearest exponent of 10
var newMax = Math.ceil(totalMax/roundingDec)*roundingDec;
var newMin = Math.floor(totalMin/roundingDec)*roundingDec;

// Determine the range of your values
var range = newMax - newMin;

// Define the number of gridlines (default 5)
var gridlines = 5;

// Determine an appropriate gap between gridlines
var interval = range / (gridlines - 1);

// Round that interval up to the exponent of 10
var newInterval = Math.ceil(interval/roundingDec)*roundingDec;

// Re-round your max and min to the new interval
var finalMax = Math.ceil(totalMax/newInterval)*newInterval;
var finalMin = Math.floor(totalMin/newInterval)*newInterval; 
```

这里有几个问题（不幸的是）。首先是我使用网格线的数量来确定最小/最大值——你想弄清楚你应该有多少网格线来使用漂亮的整数。我认为最简单的方法如下（仅限伪代码）：

```
// Take the Max/Min of all data values in all graphs
var totalMax = 3;
var totalMin = -1;

// Figure out the largest number (positive or negative)
var biggestNumber = Math.max(Math.abs(totalMax),Math.abs(totalMin));

// Round to an exponent of 10 appropriate for the biggest number
var roundingExp = Math.floor(Math.log(biggestNumber) / Math.LN10);
var roundingDec = Math.pow(10,roundingExp);

// Round your max and min to the nearest exponent of 10
var newMax = Math.ceil(totalMax/roundingDec)*roundingDec;
var newMin = Math.floor(totalMin/roundingDec)*roundingDec;

// Determine the range of your values
var range = newMax - newMin;

// Calculate the best factor for number of gridlines (2-5 gridlines)
// If the range of numbers divided by 2 or 5 is a whole number, use it
for (var i = 2; i <= 5; ++i) {
    if (Math.round(range/i) = range/i) {
        var gridlines = i
    }
} 
```

然后将网格线选项 (vAxis.gridlines) 设置为上述变量，将 max 设置为 newMax，将 min 设置为 newMin。那应该给你整数轴标签。

注意：如果您的数字非常小，则上述功能可能不起作用。该功能也未经过测试，因此请根据您自己的时间检查一些示例，如果它不能正常工作，请告诉我。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-23T10:05:41.867

只是为了扩展jmac的答案。如果您知道图表的最大值，解决方案很简单，只要`maxvalue`确保您始终为图表使用相同的高度。

如果您的内容非常动态，那么他的解决方案似乎是唯一的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-17T10:05:19.223

在遇到同样的问题后，我得出了非常简单的解决方案。右键单击您的图表，选择“高级编辑”，然后：

1）将图表的垂直线数量设置为“自动”（或手动等于数据列的数量） - 随后谷歌不必计算非整数断点。为我做了诀窍。

2）或选择“将标签视为文本”，这将使它们保持不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-06T22:33:51.560

我正在用 Java 编程以根据动态数据生成 html 文件并重用该类。我将 ArrayList() 用于 BarChart html 生成的数据和选项部分。

我的数据来自一个 Guava Multiset，它被初始化为 TreeMultiset。

```
Multiset<String> items = TreeMultiset.create();

options = new ArrayList<String>(); 
```

我需要确保我的物品井然有序，所以我制作了物品清单的副本。

```
Multiset<String> occurrences = Multisets.copyHighestCountFirst(items); 
```

对于我需要动态的每个选项，我将添加一个字符串。例如 key 是我的图表的标题。

```
options.add("\n      title : '"+key+"'"); 
```

我要做的第一件事是在已排序的 Multiset 中获得最多的出现次数。

```
int max = occurrences.count(Iterables.get(occurrences,  0)); 
```

然后我想向 hAxis 添加一些刻度。我有大约十几个数据集。当最大数字低于 100 时，它看起来不错，但是当数字为数百或数千时，我需要根据该值过滤“mod”函数。

另一个烦恼是我希望至少有一条线超出最大值。我也需要调整一下。

所以将字符串添加到我的选项字符串数组中：

```
options.add("\n         hAxis : { title : 'Count', ticks: <<"+      
          IntStream.range(0, max+5)
                   .filter(x -> x % 4 == 0)
                   .boxed()
                   .collect(Collectors.toList())
         +">> }"); 
```

IntStream 生成值之间的所有数字。max+5 允许在最长条右侧的最后一条网格线，也就是比间隔的大小大一。过滤器只显示可以修改 4 的数字，我稍后会调整的间隔。.boxed() 防止整数被错误地解释为打印。.collect 只是将它们包装成一个字符串数组。

然后我可以只使用 options.toString() 来打印强项，除了我的打印，我需要去除我的选项列表的数组括号，而不是刻度。例如 [ 和 ]。如果你看上面，这就是我使用“<<”和“>>”的原因。

```
 String optionstr = stripBrackets(options.toString())
                          .replaceAll("<<", "[")
                          .replaceAll(">>", "]"); 
```

我发布此解决方案的原因是它使您可以很好地控制实际的轴标签。除了使间隔动态化（我接下来将要做的）之外，这对我的所有数据集都非常有效。

这是打印出来的最终 html。不是括号内的刻度参数。

```
<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawVisualization);

      function drawVisualization() {
        var data = google.visualization.arrayToDataTable([
          [ 'Signals', 'Count', { role: 'style' }], 
          [ 'Agreements' , 6, 'blue' ], 
          [ 'ProductsMarkets' , 3, 'blue' ], 
          [ 'DebtEquity' , 1, 'blue' ], 
          [ 'Executive' , 1, 'blue' ], 
          [ 'Securities' , 1, 'blue' ]]);

    var options = {
         title : 'Signals', 
         vAxis : { title : 'Signals' }, 
         hAxis : { title : 'Count', ticks: [0, 4, 8] }, 
         bars: 'horizontal', 
         bar : { groupWidth : "95%" }, 
         legend : { position : "none" }
    };

    var chart = new google.visualization.BarChart(document.getElementById('signals'));
    chart.draw(data, options);
    }
    </script>
  </head>
  <body>
    <div id="signals" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

# mysql - Mysql 中的锁定问题。我需要从获得锁的表中读取数据

> ID：14440237
> 
> 赞同：0
> 
> 时间：2013-01-21T13:58:18.740
> 
> 标签：mysql, locking, database

这是我的桌子

```
test(tno,tname),
test2(t2no,tno,...);
test3(t3no,t2no,y,...); 
```

我想在一个事务中将数据一一插入到这三个表中，以便在 test1 中生成的 id 将在 test2 中引用，依此类推。但我的问题是多个用户可能一次访问同一个页面。当时一个人的身份正在另一个人的记录中引用。我的数据库有自动提交=1。为此，我首先通过锁定这些表来锁定。然后我尝试执行上述操作，以便用户等到其以前的详细信息被存储。尽管它接受数据并将其保留在队列中。

它正在工作，但我没有在这些表中的任何一个中启用 auto_increment（我无法修改它们，因为我没有更改数据库的权限）。

我试过这样

```
lock table test write,test2 write,test3 write;
mysql> insert into test(tno) select max(tno) from test;
ERROR 1100 (HY000): Table 'test' was not locked with LOCK TABLES. 
```

如果我静态地给出该 id 的值，它工作正常。其他一切工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:25:44.660

如果这是将行插入表的唯一方法，您可以尝试先选择新 ID `max(tno)`，然后锁定表`READ`，然后插入新行。之后解锁`READ`。

# webserver - 应用程序服务器是否为来自同一用户的每个请求创建新线程？

> ID：14440241
> 
> 赞同：4
> 
> 时间：2013-01-21T13:58:36.237
> 
> 标签：webserver, websphere, appserver

这是一个简单的场景：

用户从 Web 应用程序的网页触发一些操作。此操作很繁重，需要更多时间。

在服务器端完成操作之前，用户触发器说相同的操作具有一些不同的参数。所以第二个请求的第二个操作也将开始处理。

那么在这种情况下，是否有两个不同的线程，比如第一个处理第一个请求，另一个处理第二个请求？或者它只是一个线程处理请求和第一个操作只是为了执行第二个请求而中断（未完成）？

在这里，我不想避免用​​户多次请求相同的操作。只是想知道它是如何工作的。

这可能是一个愚蠢的问题，但我对此有点困惑。而发生在我身上的事情正在加剧混乱。对我来说，第一个请求的操作似乎没有完成。

它是 Websphere 应用程序服务器，如果有帮助的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:22:24.483

WebSphere Web Container 为所有请求使用一个线程池。

对于任何请求（不管是谁发出的），都会从池中获取一个线程，处理请求，然后线程返回池中。

即使请求一个接一个，也不能保证同一个线程会处理它们。

如果您看到一个请求干扰另一个请求，则很可能是您在代码中执行的操作，而不是由于 WebSphere 的行为方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T07:21:56.970

不，每个请求都独立于其他请求。websphere 中没有线程关联。一种自学的好方法是查看 websphere 日志。当 WebSphere 向其日志文件（例如 SystemOut.log 等）写入一条记录时，该日志包含一个线程 ID。以下是 WebSphere 日志文件中的示例记录：

[12/11/08 13:06:36:830 CST] 0000002e 虚拟主机 I .....

第二个字段是线程 ID，即“0000002e”。因此，您可以通过这种方式关联两个不同线程如何处理两个请求。希望它对你有意义。

# c# - Ftp 上传的文件已损坏，除非“txt”文件 c#

> ID：14440244
> 
> 赞同：2
> 
> 时间：2013-01-21T13:58:39.077
> 
> 标签：c#, upload, ftpwebrequest

我在 c# 中使用 FTP 服务器，我必须上传不同类型的文件（.png、.xlsx、docx ....），目前每种文件类型的上传都完成了，但是如果我尝试打开一个文件（.txt 除外）它表示该文件已损坏。我究竟做错了什么？

谢谢你

```
 FtpWebResponse response = null;
    try
    {
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(url);
        if (request == null)
        {
            result.SetError(Translate.InvalidUrl, url);
            return false;
        }
        request.Method = WebRequestMethods.Ftp.UploadFile;
        request.UseBinary = true;

        request.Credentials = new NetworkCredential(username, password);

        if (sourceStream == null)
        {
            result.SetError(Translate.FileErrorReading);
            return false;
        }
        byte[] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
        sourceStream.Close();

        request.ContentLength = fileContents.Length;

        Stream requestStream = request.GetRequestStream();
        requestStream.Write(fileContents, 0, fileContents.Length);
        requestStream.Close();

        response = (FtpWebResponse)request.GetResponse();

        result.SetInformation(Translate.FileSuccefullUpload, filename);

    }
    catch (Exception e)
    {
        result.SetError(e.Message);
        return false;
    }
    finally
    {
        if (response != null)
            response.Close();
    }
    return result.Successful;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T14:02:15.667

你为什么用`Encoding.UTF8.GetBytes`？

这修剪字节。

`File.ReadAllBytes`您应该以二进制模式（即）读取您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:00:00.177

检查您使用的是 ASCII 还是 BINARY 传输模式。

# javascript - 从 iframe 在父窗口中加载页面

> ID：14440252
> 
> 赞同：2
> 
> 时间：2013-01-21T13:59:09.277
> 
> 标签：javascript, iframe

我有一个 iframe，在 iframe 的 onload 中，我想要一行（或多行）代码，用特定的 url 重新加载主页（iframe 所在的页面）。那行代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:01:32.250

以下应该会：

```
top.location.href = "http://stackoverflow.com"; 
```

# objective-c - 为 NSXMLParser 设置委托给 SIGABRT 错误

> ID：14440255
> 
> 赞同：0
> 
> 时间：2013-01-21T13:59:26.633
> 
> 标签：objective-c, cocoa, delegates, nsxmlparser, sigabrt

我正在使用以下代码为 XML Parsing 应用委托

```
NSXMLParser *nsXMLParse = [[NSXMLParser alloc] initWithData:data];    
XMLParse *parser = [[XMLParse alloc] initXMLParser];//XMLParse is my custom class, where i used the NSXMLParser protocol 
[nsXMLParse setDelegate:(id <NSXMLParserDelegate>)parser]; 
```

但这不能正常工作。虽然它在这里没有给出任何错误，但它在编译时给出“信号 SIGABRT”错误。所以请帮忙。

我的 XML 是：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <Users>
      <User name="Some One" id="a@b.com" pass="123"/>
    </Users> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:07:39.040

如果 XMLParse 类实现 NSXMLParserDelegate 协议，则不需要强制转换为 id。

# php - PHP：需要支持 ul li 标签的 fpdf 转换器插件

> ID：14440256
> 
> 赞同：1
> 
> 时间：2013-01-21T13:59:36.177
> 
> 标签：php, html, pdf, fpdf

我正在使用 fpdf 将动态站点内容转换为 pdf，但它不支持 ul li 标签。任何人都可以帮助支持 html 中的 ul li 和 ol li 标签的 fpdf 插件。

只是为了更详细地了解挑战：

生成到 pdf 文档中的内容不是静态的，而是动态的，并且是从基于数据库的用户选择中获取的。内容适用于各种课程及其正在生成的详细信息，每个课程的详细信息都在 html 中。fpdf 正在工作并以 pdf 格式生成每个课程详细信息，但如果课程详细信息中包含一些 ul li 列表 html 详细信息，则不会在 ul li 中生成它（即每个 li 标签不会像这样强制换行应该更确切地说所有 li 列表都将输出在一行上）因为这些标签不受支持。

此外，关于正在生成的每门课程的 html，它们都很好，因为用户在决定单击“获取 pdf 中的课程详细信息”之前必须在特定页面上查看相同的 html 以获取课程详细信息……所以我想声明这些课程的 html 代码是可以的。

下面是生成pdf文档的代码：

```
<?php

@include_once("includes/db.php");

define('FPDF_FONTPATH', 'font/');
@require('fpdf/WriteHTML.php');

@include_once("includes/class_open_courses.php");

$obj = new openCourses();
$course_details = array();
if(isset($_GET['c_id'])){
        $course_details = $obj->getOpenCourseDet($_GET['c_id']);

// Instanciation of inherited class
$pdf = new PDF_HTML();
$pdf->AliasNbPages();
$pdf->AddPage();

$pdf->SetFont('Arial','B',16);

// Course title cell
$pdf->Cell('',10,$course_details['title'],0,0,'C');
$pdf->Ln();

/* Build cells for the first row */

$pdf->SetFont('Arial','',10);
$pdf->SetY(40);

// First Row
$pdf->Cell(35,8,'Start Date : ',0,0,'L');
$pdf->Cell(30,8,$course_details['event_date'],0,0,'L');
$pdf->SetX(140);
$pdf->Cell(25,8,'Course Fee : ',0,0,'L');
$pdf->Cell(20,8,$course_details['currency_sign'].$course_details['price'],0,0,'C');
$pdf->Ln();

// Fourth Row
$pdf->SetY(65);
$pdf->SetFont('Arial','B',12);
$pdf->Cell(35,8,'Course Details',0,0,'L');
$pdf->Ln();

$pdf->SetY(65);

$pdf->SetFont('Arial','',10);
$pdf->WriteHTML($course_details['desc']);

//$pdf->WriteHTML('<p>line 1</p> <ul><li>list 1</li><li>list 2</li><li>list 3</li></ul>');

$pdf->Output();

}
else {

?>
    <script language="javascript">
    window.location = "course_info.php?c_id=".<?php echo $course_details['id']; ?>.";
    </script>
<?php
}

?> 
```

如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-10T21:51:01.790

我使用了 PDF_HTML() 并为 UL/LI-Support 添加了这个：

**函数 OpenTag**

```
 case 'UL':
            $this->Ln(2);
            break;
        case 'LI':
            $this->Ln(2);
            $this->setX($this->GetX() + 10);
            $this->Write(2, chr(127));
            break; 
```

**函数关闭标签**

```
 if($tag=='UL')
            $this->Ln(2); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T14:02:50.463

请下载 fpdf 的附加组件，它将支持在 PDF 中写入 HTML

您可以在此处下载附加组件[http://www.fpdf.de/downloads/addons/41/](http://www.fpdf.de/downloads/addons/41/)

下载附加组件后，将其包含`WriteHTML.php`在您的脚本中，如下例所示。在 WriteHTML() 函数中传递您的 HTML 代码

```
define('FPDF_FONTPATH', 'font/');
require('WriteHTML.php');

$pdf=new PDF_HTML();
$pdf->Open();
$pdf->AddPage();
$pdf->SetFont('Arial');
$pdf->WriteHTML('Put your html here');
$pdf->Output(); 
```

# ios - iOS：开发 3D 视图应用

> ID：14440261
> 
> 赞同：1
> 
> 时间：2013-01-21T13:59:53.163
> 
> 标签：ios, 3d

我想在 iOS 上开发一个 3D 视图应用程序，就像下面的 web 链接中提供的那样。

[http://www.amfam.com/learning-center/my-home/interactive-home.asp](http://www.amfam.com/learning-center/my-home/interactive-home.asp) “房主版” “租房者版” 3D 视图。

很抱歉给链接带来麻烦，请提出您的想法，我如何开发此类基于 3D 的应用程序，因为我找不到开发此类应用程序的任何想法。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:08:45.260

有很多方法可以做到这一点。

一种是让 3D 模型显示在一个比较容易找到的 3D 引擎中。有了这个，根据您选择的引擎，您只需要选择热点并设计相机动画。

另一种方式，看起来像 Amfam 正在使用的方式，是收集带有热点的图片和视频以进行过渡。这些图片和视频可以使用您喜欢的任何 3D 建模和动画工具来完成，您只需对热点进行编码并将其与视频转换链接即可。您应该检查如何制作视频。也许你应该考虑一个 GIF 或类似的东西，而不是一个普通的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:09:20.987

我将从[OpenGL ES 编程指南](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/Introduction/Introduction.html)开始，并查看一些关于 SO 的问题：

[在 C++ 中为 iOS 选择 3D 引擎](https://stackoverflow.com/questions/12068018/choosing-3d-engine-for-ios-in-c)

[Nineveh vs cocos3d](https://stackoverflow.com/questions/14011622/nineveh-vs-cocos3d)

# javascript - 如何将图像网址提供给 Pinit 按钮？

> ID：14440262
> 
> 赞同：1
> 
> 时间：2013-01-21T13:59:56.393
> 
> 标签：javascript, api, pinterest

我正在尝试将 Pinit 按钮添加到我的网站。问题是，Pinit 按钮需要图像 url，但在我的情况下，图像是动态生成的。那么如何添加 Pinit 按钮，使其固定页面的可见图像。

像这个[例子](https://www.addthis.com/get/sharing#.UP1JyWcrjBM)这样的东西会做得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:48:59.747

## [http://jsfiddle.net/t4KHR/](http://jsfiddle.net/t4KHR/)

动态附加图像后运行以下代码，将父变量设置为要共享的图像的 ID 父级

```
var url = document.location.href;
var parent = document.getElementById("imgholder");
var img = parent.getElementsByTagName("img");
for (i = 0; i < img.length; i++) {
    var newpin = document.createElement("a");
    newpin.href = 'http://pinterest.com/pin/create/button/?url=' + encodeURIComponent(url) + '&media=' + encodeURIComponent(img[i].src);
    newpin.className = "pin-it-button";
    img[i].parentNode.insertBefore(newpin, img[i].nextSibling)
    if (i == img.length - 1) {
        var s = document.createElement("script");
        s.type = "text/javascript";
        s.src = "//assets.pinterest.com/js/pinit.js";
        document.getElementsByTagName("body")[0].appendChild(s);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:48:52.147

```
<a class="pin-it-button" href="javascript:void((function()%7Bvar%20e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)%7D)());">

<img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" />

</a> 
```

上面给出的代码片段解决了我的问题。它所做的不是将 URL 硬编码到代码链接，而是使用 javascript 来获取当前 url 并显示要固定的当前页面的图像。并且不要忘记在页眉或页脚中包含以下脚本

```
<script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script> 
```

# eclipse - 用评论忽略 Ant 警告

> ID：14440268
> 
> 赞同：5
> 
> 时间：2013-01-21T14:00:08.393
> 
> 标签：eclipse, ant, build, ivy

我在这里有一个非常简单的 Ant 示例，它会生成 Eclipse 以报告警告：

```
<ivy:cachepath pathid="path.pmd" organisation="pmd" module="pmd" revision="4.3" conf="default" inline="true" />
<taskdef name="pmd" classname="net.sourceforge.pmd.ant.PMDTask" classpathref="path.pmd" /> 
```

报告的问题是：

```
Description                     Resource    Path    Location    Type
Reference path.pmd not found.   build.xml   /MyPrj  line 20     Ant Buildfile Problem 
```

现在很清楚这里发生了什么。Ant 没有看到在 ivy 的 cachepath 任务中定义的 path.pmd 并创建了警告。**现在我想忽略这个警告。**但是，我不想通过使用 Eclipse 中的 Ant 首选项来忽略警告。我知道这很容易，但这也意味着有一天当我真的缺少参考资料时，我不会收到警告。

蚂蚁有无评论风格吗？就像在 PMD 中一样，您可以使用 //NOPMD 忽略指定行上的任何警告。如果有，请赐教：）

如果没有，是否有任何其他方法可以从 Ant 构建文件中的此特定行中删除此警告。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:40:27.000

你的问题的答案是否定的。

但是，可以使用属性来打开/关闭目标，如下所示：

```
<target name="resolve-ivy" if="use.ivy">
    <ivy:cachepath pathid="path.pmd"....
</target>

<target name="resolve-ant" unless="use.ivy">
    <path id="path.pmd">
        <pathelement location="/path/to/pmd/jar/pmd.jar"/>
    </path>
</target>

<target name="create-tasks" depends="resolve-ivy,resolve-ant">
    <taskdef name="pmd" classname="net.sourceforge.pmd.ant.PMDTask" classpathref="path.pmd" />
</target> 
```

因此，如果设置了属性“use.ivy”，那么您的构建将使用 ivy 来下载构建依赖项。

我有很多观察......

# 这个警告真的可以忽略吗？

为什么要使用两种机制来管理构建的类路径？

如果您使用的是 Eclipse，或许可以使用[Eclipse 插件](http://ant.apache.org/ivy/ivyde/)和外部 ivy.xml 来跟踪项目的依赖关系。这种方法将同步 ANT 和 Eclipse 使用的类路径。

# Maven Central 中的 PMD 模块

ivy 从 Maven Central 中提取了错误的模块。PMD 的最新版本是 5.0.1：

*   [http://search.maven.org/#search|ga|1|a%3A%22pmd%22](http://search.maven.org/#search|ga|1|a%3A%22pmd%22)

我会建议以下替代常春藤任务配置

```
<ivy:cachepath pathid="path.pmd">
   <dependency org="net.sourceforge.pmd" name="pmd" rev="5.0.1" conf="default"/>
</ivy:cachepath> 
```

笔记：

*   此语法需要[最新版本的 ivy 2.3.0](http://search.maven.org/#artifactdetails%7Corg.apache.ivy%7Civy%7C2.3.0-rc2%7Cjar)

# 你考虑过声纳吗？

可以说启用 PMD 的一种更简单的方法是使用[Sonar ANT 任务](http://docs.codehaus.org/display/SONAR/Analyzing+with+Sonar+Ant+Task)，它还将使用 Findbugs 和 Checkstyle 分析您的代码。

也可以使用 ivy 检索此任务：

```
<ivy:cachepath pathid="path.sonar">
    <dependency org="org.codehaus.sonar-plugins" name="sonar-ant-task" rev="2.0" conf="conf"/>
</ivy:cachepath> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:00:36.303

我认为即使你不想，偏好也是关键，看看这个，也许你会在几个链接中找到其他东西：

[如何告诉 Eclipse 忽略 Ant build.xml 中的错误？](https://stackoverflow.com/questions/4227028/how-to-tell-eclipse-to-ignore-errors-in-an-ant-build-xml)

我从结找到了这个：

“另一种解决方法（不如禁用所有验证/问题报告那么激烈）：转到 Window->preferences->Ant->Problems 选项卡。将“build.xml”添加到忽略列表...”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T10:02:09.797

转到窗口->首选项-> Ant->问题选项卡。将“build.xml”添加到忽略列表。这应该可以解决您的问题。

# jsf - 从 netbeans（JSF 文件）运行时出现 Glassfish 404 错误

> ID：14440269
> 
> 赞同：1
> 
> 时间：2013-01-21T14:00:11.537
> 
> 标签：jsf, glassfish

我收到一个 404 错误，如下所示

```
HTTP Status 404 -

type Status report

message

descriptionThe requested resource () is not available.

GlassFish Server Open Source Edition 3.1.2.2 
```

当我运行我的项目时，下面是我的 web.xml 和 sun-web.xml，有人对我错过了什么有任何想法吗？在我尝试添加 ldap 安全性之前它正在工作

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <filter>
        <filter-name>Upload Filter</filter-name>
        <filter-class>com.corejsf.UploadFilter</filter-class>
        <init-param>
            <param-name>sizeThreshold</param-name>
            <param-value>1024</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>Upload Filter</filter-name>
        <url-pattern>/faces/upload/*</url-pattern>
    </filter-mapping>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>facelets.LIBRARIES</param-name>
        <param-value>/WEB-INF/corejsf.taglib.xml</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
        <param-value>true</param-value>
    </context-param>

    <!--  <security-constraint>
        web resources that are protected 
       <web-resource-collection>
          <web-resource-name>All Resources</web-resource-name>
          <url-pattern>/*</url-pattern>
          All methods but OPTIONS must be authenticated. OPTIONS must work without authentication for cross domain in Firefox to work
          <http-method>GETLIB</http-method>
          <http-method>COPY</http-method>
          <http-method>MOVE</http-method>
          <http-method>DELETE</http-method>
          <http-method>PROPFIND</http-method>
          <http-method>GET</http-method>
          <http-method>HEAD</http-method>
          <http-method>PUT</http-method>
          <http-method>MKCOL</http-method>
          <http-method>PROPPATCH</http-method>
          <http-method>LOCK</http-method>
          <http-method>UNLOCK</http-method>
          <http-method>VERSION-CONTROL</http-method>
          <http-method>CHECKIN</http-method>
          <http-method>CHECKOUT</http-method>
          <http-method>UNCHECKOUT</http-method>
          <http-method>REPORT</http-method>
          <http-method>UPDATE</http-method>
          <http-method>CANCELUPLOAD</http-method>
       </web-resource-collection>
       <auth-constraint>
            role-name indicates roles that are allowed to access the web resource specified above 
           <role-name>users</role-name>
       </auth-constraint>
    </security-constraint>-->
    <!-- <display-name>Printing from home to uni :)</display-name>
    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>
    <login-config>
        <auth-method>FORM</auth-method>
        <realm-name>LDAP</realm-name>
        <form-login-config>
            <form-login-page>/login.xhtml</form-login-page>
            <form-error-page>/login-failed.xhtml</form-error-page>
        </form-login-config>
    </login-config>-->
    <!--
    <security-constraint>
        <display-name>Security</display-name>
        <web-resource-collection>
            <web-resource-name>Secured</web-resource-name>
            <url-pattern>/*</url-pattern>
        </web-resource-collection>
      <auth-constraint>
            <role-name>uid</role-name>
        </auth-constraint>
        <user-data-constraint>
            <transport-guarantee>NONE</transport-guarantee>
        </user-data-constraint> 
    </security-constraint>-->
    <login-config>
        <auth-method>FORM</auth-method>
        <realm-name>LDAP</realm-name>
        <form-login-config>
            <form-login-page>/login.html</form-login-page>
            <form-error-page>/login.html</form-error-page>
        </form-login-config>
    </login-config>
    <security-role>
        <role-name>user</role-name>
    </security-role>
    <security-constraint>
        <!-- web resources that are protected -->
        <web-resource-collection>
            <web-resource-name>All Resources</web-resource-name>
            <url-pattern>/*</url-pattern>
            <!-- All methods but OPTIONS must be authenticated. OPTIONS must work without authentication for cross domain in Firefox to work -->
            <http-method>GETLIB</http-method>
            <http-method>COPY</http-method>
            <http-method>MOVE</http-method>
            <http-method>DELETE</http-method>
            <http-method>PROPFIND</http-method>
            <http-method>GET</http-method>
            <http-method>HEAD</http-method>
            <http-method>PUT</http-method>
            <http-method>MKCOL</http-method>
            <http-method>PROPPATCH</http-method>
            <http-method>LOCK</http-method>
            <http-method>UNLOCK</http-method>
            <http-method>VERSION-CONTROL</http-method>
            <http-method>CHECKIN</http-method>
            <http-method>CHECKOUT</http-method>
            <http-method>UNCHECKOUT</http-method>
            <http-method>REPORT</http-method>
            <http-method>UPDATE</http-method>
            <http-method>CANCELUPLOAD</http-method>
        </web-resource-collection>
        <auth-constraint>
            <!-- role-name indicates roles that are allowed to access the web resource specified above -->
            <role-name>role1</role-name>
        </auth-constraint>
    </security-constraint> 
</web-app> 
```

sun-web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-web-app PUBLIC "-//Sun Microsystems, Inc.//DTD GlassFish Application Server 3.0 Servlet 3.0//EN" "http://www.sun.com/software/appserver/dtds/sun-web-app_3_0-0.dtd">
<sun-web-app error-url="">
    <context-root>/fileupload</context-root>
    <class-loader delegate="true"/>
   <!-- <jsp-config>
        <property name="keepgenerated" value="true">
            <description>Keep a copy of the generated servlet class' java code.</description>
        </property>
    </jsp-config>-->
   <!-- <security-role-mapping>
        <role-name>users</role-name>
        <group-name>LDAP</group-name>
    </security-role-mapping>
    <property name="keepgenerated" value="true">
        <description>Keep a copy of the generated servlet class java code.</description>
    </property>-->
     <security-role-mapping>
        <role-name>user</role-name>
       <!-- <group-name>Authenticated</group-name> -->
    </security-role-mapping>
</sun-web-app> 
```

# unit-testing - mockito when() 调用如何工作？

> ID：14440270
> 
> 赞同：127
> 
> 时间：2013-01-21T14:00:19.707
> 
> 标签：unit-testing, mocking, mockito

鉴于以下 Mockito 声明：

```
when(mock.method()).thenReturn(someValue); 
```

假设 mock.method() 语句将返回值传递给 when()，Mockito 如何为模拟创建代理？我想这使用了一些 CGLib 的东西，但很想知道这在技术上是如何完成的。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-01-21T21:51:18.020

简短的回答是，在您的示例中，结果`mock.method()`将是一个适合类型的空值；mockito 通过代理、方法拦截和`MockingProgress`类的共享实例来使用间接方法，以确定对 mock 的方法调用是用于存根还是重放现有存根行为，而不是通过返回值传递有关存根的信息一个模拟的方法。

在几分钟内查看 mockito 代码的小分析如下。请注意，这是一个非常粗略的描述——这里有很多细节在起作用。我建议你自己查看[github 上的源代码](https://github.com/mockito/mockito)。

首先，当您使用类的`mock`方法模拟一个类时`Mockito`，基本上会发生以下情况：

1.  `Mockito.mock`委托给[`org.mockito.internal.MockitoCore`](https://github.com/mockito/mockito/blob/master/src/org/mockito/internal/MockitoCore.java).mock，将默认的模拟设置作为参数传递。
2.  `MockitoCore.mock`委托给[`org.mockito.internal.util.MockUtil`](https://github.com/mockito/mockito/blob/master/src/org/mockito/internal/util/MockUtil.java).createMock
3.  该类`MockUtil`使用`ClassPathLoader`该类获取`MockMaker`用于创建模拟的实例。默认情况下，使用[CgLibMockMaker](https://github.com/mockito/mockito/blob/master/src/org/mockito/internal/creation/CglibMockMaker.java)类。
4.  `CgLibMockMaker`使用从 JMock 借来的类[`ClassImposterizer`](https://github.com/mockito/mockito/blob/master/src/org/mockito/internal/creation/jmock/ClassImposterizer.java)来处理创建模拟。使用的“mockito 魔法”的关键部分是`MethodInterceptor`用于创建模拟：mockito`MethodInterceptorFilter`和 MockHandler 实例链，包括 MockHandlerImpl 的[实例](https://github.com/mockito/mockito/blob/master/src/org/mockito/internal/handler/MockHandlerImpl.java)。方法拦截器将调用传递给 MockHandlerImpl 实例，该实例实现在模拟上调用方法时应应用的业务逻辑（即，搜索以查看是否已记录答案，确定调用是否代表新的存根等。默认状态是，如果尚未为正在调用的方法注册存根，则返回一个适合类型的*空*值。

现在，让我们看一下示例中的代码：

```
when(mock.method()).thenReturn(someValue) 
```

以下是此代码的执行顺序：

1.  `mock.method()`
2.  `when(<result of step 1>)`
3.  `<result of step 2>.thenReturn`

了解正在发生的事情的关键是调用 mock 上的方法时会发生什么：方法拦截器被传递有关方法调用的信息，并委托给它的`MockHandler`实例链，最终委托给`MockHandlerImpl#handle`. 在 期间`MockHandlerImpl#handle`，模拟处理程序创建一个实例`OngoingStubbingImpl`并将其传递给共享`MockingProgress`实例。

在`when`调用 之后调用该方法时`method()`，它会委托给`MockitoCore.when`，后者调用[`stub()`](https://github.com/mockito/mockito/blob/master/src/org/mockito/internal/MockitoCore.java#L60)同一类的方法。此方法从模拟调用写入的共享`MockingProgress`实例中解包正在进行的存根，并将其返回。`method()`然后在实例`thenReturn`上调用方法。`OngoingStubbing`

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-08-31T22:46:36.357

简短的回答是，在幕后，Mockito 使用某种全局变量/存储来保存方法存根构建步骤的信息（在您的示例中调用 method()、when()、thenReturn()），以便最终它可以在什么参数上调用什么时应该返回什么建立一个映射。

我发现这篇文章很有帮助： *Explanation how proxy based Mock Frameworks work* ( [http://blog.rseiler.at/2014/06/explanation-how-proxy-based-mock.html](http://blog.rseiler.at/2014/06/explanation-how-proxy-based-mock.html) )。作者实现了一个演示 Mocking 框架，我为想要了解这些 Mocking 框架如何工作的人找到了一个非常好的资源。

在我看来，这是 Anti-Pattern 的典型用法。通常，当我们实现一个方法时，我们应该避免“副作用”，这意味着该方法应该接受输入并进行一些计算并返回结果——除此之外没有其他改变。但 Mockito 只是故意违反了该规则。它的方法除了返回结果之外还存储了一堆信息：Mockito.anyString()、mockInstance.method()、when()、thenReturn，它们都有特殊的“副作用”。这也是为什么该框架乍一看像魔术的原因——我们通常不会编写那样的代码。但是，在 mocking 框架的情况下，这种反模式设计是一个很棒的设计，因为它导致了非常简单的 API。

# html - HTML 中的圆角

> ID：14440272
> 
> 赞同：1
> 
> 时间：2013-01-21T14:00:27.133
> 
> 标签：html, layout

我正在开发一个背景为黑色的应用程序。主要内容区域将是一个白色区域。白色区域将具有圆角。在过去的几年里，这个应用程序一直依赖于一张大桌子。该表的单元格具有创建以表示圆角的图像。我正在更新这个应用程序，我想使用一种更受人尊敬的方法。出于这个原因，我正在寻求一些反馈。基本上，我的网站如下所示：

```
 tab1 | tab2 | tab3
[corner]----------------       --------------------[corner]
   |                                                   |
   |                                                   |
   |                                                   |
   |                                                   |
   |                                                   |
  ...                                                 ...
   |                                                   |
[corner]-------------------------------------------[corner] 
```

我开始使用 ASP.NET MVC 4 更新此应用程序。模板具有以下内容：

```
<body>
    <header>
    ...
    <header>

    <div id="body">
    </div>
    <footer>

    </footer>
 </body> 
```

在我有限的意见中，我觉得左上角/右上角应该进入，`<header>`左/右下角应该进入`<footer>`. 如果我这样做，我不知道如何让它全部排列起来。我感谢任何人可以提供的任何建议或代码示例。我正在努力让这一切都排队。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:04:15.370

使用`border-radius`css 属性来实现圆角的效果。例如，对于标题，您可能有

```
border-top-left-radius: 10px;
border-top-right-radius: 10px; 
```

[优秀的文章](http://www.css3.info/preview/rounded-border/)和[浏览器支持在这里](http://caniuse.com/#feat=border-radius)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T15:49:36.690

W3Schools 在这里有很好的参考：http: [//www.w3schools.com/css3/css3_borders.asp](http://www.w3schools.com/css3/css3_borders.asp)
我自己也做了一个教程：[http ://www.andytechguy.com/tutorials/css/how-to-make-round -角-css/](http://www.andytechguy.com/tutorials/css/how-to-make-round-corners-css/)

# ms-access - 无法使用 VBA 清除办公室剪贴板

> ID：14440274
> 
> 赞同：5
> 
> 时间：2013-01-21T14:00:29.820
> 
> 标签：ms-access, vba, ms-access-2010

我正在使用一个函数从访问数据库中复制一堆图片并将它们存储到磁盘上。但是，此功能使用办公室剪贴板，剪贴板在大约 150 条记录后填满并导致程序崩溃。这是我清除剪贴板的方法

```
Private Declare Function apiOpenClipboard Lib "user32" Alias "OpenClipboard" (ByVal hwnd As Long) As Long
Private Declare Function apiEmptyClipboard Lib "user32" Alias "EmptyClipboard" () As Long
Private Declare Function apiCloseClipboard Lib "user32" Alias "CloseClipboard" () As Long

Sub EmptyClipboard()
    Call apiOpenClipboard(0&)
    Call apiEmptyClipboard
    Call apiCloseClipboard
End Sub 
```

任何人都知道如何更有效地清除剪贴板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:47:59.937

您正在使用的功能是指 windows 剪贴板。这与[Office 剪贴板不同](http://support.microsoft.com/kb/221190/en-us)

我发现清除剪贴板的唯一代码是`Application.CommandBars("Clipboard").Controls(4).Execute`，但是由于我禁用了办公室剪贴板（并且显然无法启用它），我看不出这是否是实际的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T10:33:29.143

我在[其他地方](http://www.vbaexpress.com/kb/getarticle.php?kb_id=462)读到这将满足您的需求：

```
Option Explicit 

Public Sub ClearClipBoard() 
    Dim oData   As New DataObject 'object to use the clipboard

    oData.SetText Text:=Empty 'Clear
    oData.PutInClipboard 'take in the clipboard to empty it
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T11:48:10.210

试试：（旧线程，我知道;-)）

```
 #If VBA7 Then
    Private Declare PtrSafe Function AccessibleChildren Lib "oleacc" (ByVal paccContainer As Office.IAccessible, _
    ByVal iChildStart As Long, ByVal cChildren As Long, _
    ByRef rgvarChildren As Any, ByRef pcObtained As Long) As Long
    Public Const myVBA7 As Long = 1
#Else
    Private Declare Function AccessibleChildren Lib "oleacc" (ByVal paccContainer As Office.IAccessible, _
                                                              ByVal iChildStart As Long, ByVal cChildren As Long, _
                                                              ByRef rgvarChildren As Any, ByRef pcObtained As Long) As Long
    Public Const myVBA7 As Long = 0
#End If

Public Sub ClearOfficeClipBoard()
    Dim cmnB, IsVis As Boolean, j As Long, Arr As Variant
    Arr = Array(4, 7, 2, 0)                      '4 and 2 for 32 bit, 7 and 0 for 64 bit
    Set cmnB = Application.CommandBars("Office Clipboard")
    IsVis = cmnB.Visible
    If Not IsVis Then
        cmnB.Visible = True
        DoEvents
    End If

    For j = 1 To Arr(0 + myVBA7)
        AccessibleChildren cmnB, Choose(j, 0, 3, 0, 3, 0, 3, 1), 1, cmnB, 1
    Next

    cmnB.accDoDefaultAction CLng(Arr(2 + myVBA7))

    Application.CommandBars("Office Clipboard").Visible = IsVis

End Sub 
```

# html - 如何防止内联块 div 换行？

> ID：14440276
> 
> 赞同：86
> 
> 时间：2013-01-21T14:00:31.927
> 
> 标签：html, css, layout

> [**jsFiddle**演示](http://jsfiddle.net/UnNbW/)

我希望`div`s ：

*   包装他们的内容。
*   留在它们最初关联的行中，基本上没有换行。

基本上，当它们不能停留在屏幕上时，这些表会彼此堆叠在一起。我宁愿他们隐藏在屏幕之外。

我尝试添加`overflow: hidden;`到主要布局样式。我不想为每个`div`. 它需要适应内容。

```
.layout {
  -moz-border-radius: 15px;
  border-radius: 15px;
  vertical-align: top;
  display: inline-block;
}

.layoutbacking {
  -moz-border-radius: 15px;
  border-radius: 15px;
  padding: 5px;
  margin: 5px;
  background: #CCCCCC;
}
```

```
<div class="layout" style="background: #222222; width: 100%">
  <div>
    <div class="layout layoutbacking">
      <table>
        <tr>
          <th>header 1</th>
          <th>header 2</th>
          <th>header 3</th>
          <th>header 4</th>
        </tr>
        <tr>
          <td>data 1</td>
          <td>data 2</td>
          <td>data 3</td>
          <td>data 4</td>
        </tr>
        <tr>
          <td>data 1</td>
          <td>data 2</td>
          <td>data 3</td>
          <td>data 4</td>
        </tr>
        <tr>
          <td>data 1</td>
          <td>data 2</td>
          <td>data 3</td>
          <td>data 4</td>
        </tr>
      </table>
    </div>
    <div class="layout">
      <div class="layout layoutbacking">
        <table>
          <tr>
            <th>header 1</th>
            <th>header 2</th>
            <th>header 3</th>
            <th>header 4</th>
          </tr>
          <tr>
            <td>data 1</td>
            <td>data 2</td>
            <td>data 3</td>
            <td>data 4</td>
          </tr>
        </table>
      </div>
      <br />
      <div class="layout layoutbacking">
        <table>
          <tr>
            <th>header 1</th>
            <th>header 2</th>
            <th>header 3</th>
            <th>header 4</th>
          </tr>
          <tr>
            <td>data 1</td>
            <td>data 2</td>
            <td>data 3</td>
            <td>data 4</td>
          </tr>
        </table>
      </div>
    </div>
  </div>
  <div>
    <div class="layout layoutbacking">
      <table>
        <tr>
          <th>header 1</th>
          <th>header 2</th>
          <th>header 3</th>
          <th>header 4</th>
        </tr>
        <tr>
          <td>data 1</td>
          <td>data 2</td>
          <td>data 3</td>
          <td>data 4</td>
        </tr>
      </table>
    </div>
    <div class="layout layoutbacking">
      <table>
        <tr>
          <th>header 1</th>
          <th>header 2</th>
          <th>header 3</th>
          <th>header 4</th>
        </tr>
        <tr>
          <td>data 1</td>
          <td>data 2</td>
          <td>data 3</td>
          <td>data 4</td>
        </tr>
      </table>
    </div>
```

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-01-21T14:09:44.860

添加`white-space: nowrap;`到您的`.layout`样式声明中。

这将完全满足您的需要：防止 div 换行。

看着

> [**jsFiddle**演示](http://jsfiddle.net/UnNbW/3/)

*或全屏*运行以下代码段并调整其大小：

```
.layout {
       white-space : nowrap; /* this does the trick */
          overflow : hidden; /* this prevents the grey divs from overflowing */
    vertical-align : top;
     border-radius : 15px;
           display : inline-block;
}

.layoutbacking {
    border-radius : 15px;
       background : #CCCCCC;
          padding : 5px;
           margin : 5px;
}
```

```
<div class="layout" style="background: #222222; width: 100%">
    <div>
        <div class="layout layoutbacking">
            <table>
                <tr>
                    <th>header 1</th>
                    <th>header 2</th>
                    <th>header 3</th>
                    <th>header 4</th>
                </tr>
                <tr>
                    <td>data 1</td>
                    <td>data 2</td>
                    <td>data 3</td>
                    <td>data 4</td>
                </tr>
                <tr>
                    <td>data 1</td>
                    <td>data 2</td>
                    <td>data 3</td>
                    <td>data 4</td>
                </tr>
                <tr>
                    <td>data 1</td>
                    <td>data 2</td>
                    <td>data 3</td>
                    <td>data 4</td>
                </tr>
            </table>
        </div>
        <div class="layout">
            <div class="layout layoutbacking">
                <table>
                    <tr>
                        <th>header 1</th>
                        <th>header 2</th>
                        <th>header 3</th>
                        <th>header 4</th>
                    </tr>
                    <tr>
                        <td>data 1</td>
                        <td>data 2</td>
                        <td>data 3</td>
                        <td>data 4</td>
                    </tr>
                </table>
            </div>
            <br />
            <div class="layout layoutbacking">
                <table>
                    <tr>
                        <th>header 1</th>
                        <th>header 2</th>
                        <th>header 3</th>
                        <th>header 4</th>
                    </tr>
                    <tr>
                        <td>data 1</td>
                        <td>data 2</td>
                        <td>data 3</td>
                        <td>data 4</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div>
        <div class="layout layoutbacking">
            <table>
                <tr>
                    <th>header 1</th>
                    <th>header 2</th>
                    <th>header 3</th>
                    <th>header 4</th>
                </tr>
                <tr>
                    <td>data 1</td>
                    <td>data 2</td>
                    <td>data 3</td>
                    <td>data 4</td>
                </tr>
            </table>
        </div>
        <div class="layout layoutbacking">
            <table>
                <tr>
                    <th>header 1</th>
                    <th>header 2</th>
                    <th>header 3</th>
                    <th>header 4</th>
                </tr>
                <tr>
                    <td>data 1</td>
                    <td>data 2</td>
                    <td>data 3</td>
                    <td>data 4</td>
                </tr>
            </table>
        </div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-05T10:17:38.147

这将停止文本换行，并保持内联

```
.leftContent { float: left; }
.rightContent { overflow: hidden; } 
```

# java - 文件上传和进度条

> ID：14440281
> 
> 赞同：2
> 
> 时间：2013-01-21T14:01:05.900
> 
> 标签：java, javascript, web, dojo

我想根据上传文件时读取的文件数量显示进度条。

我们如何使用 JS 和 Servlet 来实现这一点我知道上传我可以使用 apache commons lib，但如何根据读取的数据显示进度条。

我是否应该根据读取的数据量向 JS 代码发送计数响应，如果可以，如何实现？或者有人知道更好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:11:59.127

我在我的应用程序中使用此代码将进度条动态添加到表中，我确实剪切了一堆代码，所以可能会丢失一些东西。您可以在方法中使用 this 简单地调用`post`服务器`set_percantage`。

对不起，如果那里还有一些德语，或者那里有一两个声明太多了，原来这就像 400 行，填满了一张大桌子。

编辑：我`applet`在这个中获取信息，你可以简单地写一个`post`到你的服务器

```
function addDownload(filename, datPfad) { 

  var table       = document.getElementById("download_table");
  var body        = table.getElementsByTagName("tbody")[0];

  var progres     = function() {

  var getVars                     = this;    
  this.file                       = filename;

  this.tr                         = document.createElement("tr");

  this.td3                        = document.createElement("td");

  this.progress                   = document.createElement('div');
  this.container                  = document.createElement("div");
  this.progressbar                = document.createElement("div");
  this.bar                        = document.createElement("div");
  this.text                       = document.createElement("div");
  this.path                       = datPfad;

  this.progressbar.style.width     = "100%";
  this.progressbar.style.height    = "20px";
  this.text.style.fontSize         = "10px";

  this.bar.className               = "progress";

  this.progressbar.appendChild(this.bar);

  this.text.style.marginTop        = "-19px"
  this.text.style.textAlign        = "center";
  this.text.style.textSize         = "15px";

  this.text.appendChild(document.createTextNode("Download starting"));
  this.progressbar.appendChild(this.text);

  this.container.appendChild(this.progressbar);

  this.td3.appendChild(this.container);

  this.td3.setAttribute("width", "32%");

  this.tr.appendChild(this.td3);

  this.tr.setAttribute("style", "background:rgb(245, 245, 245)");

  this.tr.setAttribute("id",filename);

  body.appendChild(this.tr);

  this.set_percantage = function() {
          progress                = document.jsap.getProgress(getVars.file);
          this.bar.style.width    = progress + "%";
          downloaded              = document.jsap.getDownloadedSize(getVars.file);
          filesize                = document.jsap.getDownloadSize(getVars.file);
          this.text.removeChild(this.text.firstChild);
          textnode = (downloaded == 0.0 || filesize == -1.0) ? "Download starting" : downloaded + " MB of " + filesize + " MB downloaded";
          this.text.appendChild(document.createTextNode(textnode));
          if(downloaded >= filesize && downloaded != 0) {
              row.beendet();
          }

  }

  this.interval = window.setInterval(function() {
      if(boxbuffer.innerHTML == "finished") {
          window.clearInterval(this.interval);
      }
      row.set_percantage();
  },2000);

} 
```

我忘记了这里的css类：

```
.progress {
            width:0%;
            height:100%;
           background: rgb(30,205,230); /* Old browsers */
            /* IE9 SVG, needs conditional override of 'filter' to 'none' */
            background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMWVjZGU2IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzVhOWNmYSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
            background: -moz-linear-gradient(38deg, rgba(30,205,230,1) 0%, rgba(90,156,250,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,rgba(30,205,230,1)), color-stop(100%,rgba(90,156,250,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(38deg, rgba(30,205,230,1) 0%,rgba(90,156,250,1) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(38deg, rgba(30,205,230,1) 0%,rgba(90,156,250,1) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(38deg, rgba(30,205,230,1) 0%,rgba(90,156,250,1) 100%); /* IE10+ */
            background: linear-gradient(38deg, rgba(30,205,230,1) 0%,rgba(90,156,250,1) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1ecde6', endColorstr='#5a9cfa',GradientType=1 ); /* IE6-8 fallback on horizontal gradient */
            z-index:2;
            } 
```

所以，我基本上在做的是，我创建一个宽度为 0% 的 div 元素。xml 将下载文件的 procentual 返回给我。基于这个数字，我正在增加 div 元素的宽度。

# ruby-on-rails - Devise / CanCan 2.0 / Omniauth：Omniauth 登录需要什么权限

> ID：14440292
> 
> 赞同：0
> 
> 时间：2013-01-21T14:01:39.037
> 
> 标签：ruby-on-rails, devise, omniauth, cancan

我正在使用设计、Omniauth 和 CanCan 2.0 进行身份验证/授权。问题是 CanCan 会锁定应用程序并阻止使用 Omniauth 登录。使其工作所需的最低权限集是多少？

这似乎有效：

```
can [:new, :create, :destroy], "devise/sessions"
can [:new, :create, :edit], "devise/passwords"
can :access, "devise/registrations"
can :access, :omniauth_callbacks 
```

但可能太松懈了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:43:50.903

当我过去完成这样的设置时，我不必在 Cancan 能力文件中指定 Devise 的能力来让 Omniauth 工作，因为用户是由 Devise 在它击中 Cancan 之前创建的，在描述的方法中[在这里](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)。但也许您正在寻找更精细的东西？

# teamcity - 是否可以将 TeamCity 配置为在某些代理上运行个人构建？

> ID：14440295
> 
> 赞同：3
> 
> 时间：2013-01-21T14:02:12.273
> 
> 标签：teamcity, teamcity-7.1

我们有一个特定的构建配置，它需要运行大量的个人构建而不会出现长时间的延迟。是否可以将特定代理专门用于运行个人构建？例如，如果我们有 5 个代理，是否有可能让所有 5 个都能够运行个人构建，但其中只有 3 个被 VCS 触发器触发？我能看到的唯一方法是创建 2 个代理池。这种方法的问题是您必须为每个池指定特定的项目，这将涉及复制构建配置。

目前，个人构建在构建队列中配置了更高的优先级，但这无助于防止所有代理运行（慢）集成测试时的延迟。理想情况下，这些集成测试将排队等待能够运行它们的 3 个构建代理之一空闲。有许多解决方法可以帮助减少影响，最好知道是否真的可以将代理专用于远程构建。

截至 2013 年 1 月，我们正在运行最新版本的 TeamCity，即 7.1.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:44:08.907

You can achieve this by specifying agent requirements. Pick a parameter that differentiates the 3 agents you want triggered automatically by VCS from the other 2 agents. Add it as an agent requirement in every build configuration except the one you want to run on all 5 agents. This way, you'll restrict the integration tests to 3 agents and free up the remaining 2 agents to run only the configuration requiring a lot of personal builds.

Also, your suggested solution with agent pools many not seem too bad if you use build configuration templates.

# php - 检测桌面与移动浏览器的可靠方法

> ID：14440296
> 
> 赞同：11
> 
> 时间：2013-01-21T14:02:14.567
> 
> 标签：php, javascript, cross-browser, browser-detection

> **可能重复：**
> [在 Javascript 中进行浏览器检测的最佳方法是什么？](https://stackoverflow.com/questions/588940/what-is-the-best-way-to-do-browser-detection-in-javascript)

我想基本上做以下事情（在 JavaScript 或 PHP 中）：

```
if (desktop browser) {
     do x;
}
else {   // mobile browser
     do not do x;
} 
```

众所周知，[不推荐使用浏览器检测方法](http://css-tricks.com/browser-detection-is-bad/)。更好的解决方案是使用[能力测试](http://quirksmode.org/js/support.html)。我的问题是，随着移动浏览器变得更智能且与桌面版本一样强大，什么理想的独家功能检测可以从非桌面浏览器中过滤桌面？

我认为逆转条件检查 ie`if (mobile browser) {} else ...`可能会更有问题，对吧？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T14:18:50.167

多么小的谷歌搜索出现了，来自[一个美丽的网站](http://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/)：

```
var isMobile = {
    Android: function() {
        return navigator.userAgent.match(/Android/i);
    },
    BlackBerry: function() {
        return navigator.userAgent.match(/BlackBerry/i);
    },
    iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
    },
    Opera: function() {
        return navigator.userAgent.match(/Opera Mini/i);
    },
    Windows: function() {
        return navigator.userAgent.match(/IEMobile/i);
    },
    any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
    }
};

if(isMobile.any()){
    // Mobile!
} else {
    // Not mobile
} 
```

我不会争辩说特征检测*比*用户代理嗅探更可取，这实际上很糟糕。但是，如果您正在检测功能以确定设备是否被视为移动设备，那么您将面临一系列全新的问题。

您无法检查`pixel-ratio`，因为新的台式计算机很可能是“视网膜”或超高清。您无法检查`device-orientation`，因为它不再是手机独有的东西。您无法检查（如果可以）陀螺仪，因为某些笔记本电脑可能会返回值。

构建适用于所有平台的网站，而无需尝试将它们分开！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:14:49.510

我认为您正在寻找 php 中的[get_browser()](http://php.net/manual/en/function.get-browser.php)函数。

> 尝试通过在 browscap.ini 文件中查找浏览器信息来确定用户浏览器的功能。

# javascript - 使用 JQuery 根据条件删除元素

> ID：14440307
> 
> 赞同：0
> 
> 时间：2013-01-21T14:03:03.937
> 
> 标签：javascript, jquery

```
<input id="img" type="file" name="img" accept="image/*"> 
```

这是`JQuery`代码：

```
$('#img').change(function(){

    if($('#this').val() === '') { 

        $("#subm").remove();

    }  else {

         $('<button id="subm" type="submit">Press</button>').insertAfter('#advice');

   }

}); 
```

我正在尝试检查是否`input file`为空，如果为空，是否存在一个名为 的按钮`subm`，我将其删除，但如果`input file`有文件，则创建该底部。问题是，如果有一个`subm`按钮，因为我选择了文件，并且在我更改了之后`input`，让它为空，`JQuery`不会删除它。

`JQuery`如果 an`input file`为空，如何删除由 创建的按钮？

谢谢提前！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:04:38.490

`$('#this')`应该是`$(this)`，`$('#this')`匹配一个元素`id=this`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:05:01.947

除非您实际上有一个 id 为“this”的元素，否则您可能打算使用`this`关键字：

```
$('#img').change(function(){
    // this will be the #img that fired the change event
    if($(this).val() === '') {
        $("#subm").remove();
    }  else {
         $('<button id="subm" type="submit">Press</button>').insertAfter('#advice');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:07:29.510

用这个：

```
<input id="img" type="file" name="img" accept="image/*">
<button id="subm" type="submit">Press</button> 
```

```
$('#img').change(function(){
    if(!this.value) { 
        $("#subm").hide();
    } else {
        $("#subm").show();
    }
}).change(); // trigger event to init 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T14:10:25.167

需要注意的一件事是， 的值`this`也可以根据它与 javascript 和 jQuery 一起使用的上下文而改变。您现在应该没问题，但是在更复杂的情况下，您可能会遇到问题

这种情况的最佳实践是创建另一个变量，通常`self`立即调用。

```
$('#img').change(function () {
    var self = this;
    // self will now ALWAYS be the #img that fired the change event.
    if ($(self).val() === '') {
        $("#subm").hide();
    } else {
        $("#subm").show();
    }
}); 
```

如果您使用另一个较低的功能，则会出现此问题，那么`this`现在将引用`this`较低的功能。每当你进入一个新函数时定义一个新变量，`self`这样你就可以始终锁定`this`它。（并且不要忘记让这些变量名是唯一的。）

# node.js - 使用 Express.js 3 提取 POST 参数

> ID：14440309
> 
> 赞同：0
> 
> 时间：2013-01-21T14:03:08.303
> 
> 标签：node.js, express

我刚刚开始使用 node 和 express.js，但在处理 POST 请求时遇到了一些麻烦。我正在发布将写入活动日志的信息。请求如下所示：

```
POST /activities/log HTTP/1.1

san=3252080&event=MY_EVENT 
```

我的服务器（相关部分）：

```
var app    = express();
var routes = require( './routes' )( app );

app
  .use( express.bodyParser() )
  .listen( port ); 
```

我的路线：

```
activities.log = function( req, res, next ) {
  console.log( req.body.san );
}; 
```

结果（减去堆栈跟踪）：

```
TypeError: Cannot read property 'san' of undefined 
```

我确定我遗漏了一些简单而基本的东西，但我的代码似乎与我迄今为止在搜索中看到的一致。SO上有类似的问题，但没有一个符合我的场景或给出适合我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:15:34.260

```
var app    = express();
app.use( express.bodyParser() )

require( './routes' )( app );
app.listen( port ); 
```

# python - 如何通过在 Tkinter 中拖动来重新着色多个小部件

> ID：14440310
> 
> 赞同：0
> 
> 时间：2013-01-21T14:03:14.027
> 
> 标签：python, widget, tkinter, drag

我正在尝试制作一个脚本，其中有例如 9 个小部件（按钮、标签......），当我单击并按住任何小部件并拖动到另一个小部件时，我想要两个小部件都重新着色（resp。我拖过的所有小部件），直到我释放鼠标按钮。

```
from Tkinter import *

root = Tk()

def recolor(event):
    global ButtonList
    event.widget.config(bg="red")

    return

ButtonList=["b0","b1","b2","b3","b4","b5","b5","b6","b7","b8"]

i = 0

while i < 9:
    ButtonList[i] = Label(root, text = i, width = 4, height = 2)
    ButtonList[i].grid(row = i%3, column = i/3)

    ButtonList[i].bind("<Enter>", recolor) 

    i += 1

root.mainloop() 
```

该脚本仅对我单击的小部件重新着色，并在释放按钮后对`<Enter>`事件做出反应。`<Enter>`当我按住鼠标按钮时，如何使脚本对所有小部件的事件做出反应？

我为我的英语道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:59:05.507

当绑定触发时，该`widget`属性将始终设置为处理事件的小部件。要在鼠标下找到小部件，您需要使用方法[winfo_ contains](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.winfo_containing-method)。

# ssl - OpenSSL 等待读取数据可用

> ID：14440312
> 
> 赞同：1
> 
> 时间：2013-01-21T14:03:27.367
> 
> 标签：ssl, openssl

我正在使用 OpenSSL 连接到 HTTPS 服务器、发送数据并读取响应。我需要保持连接打开并在数据可用时立即读取数据。

我正在使用 BIO，并使用`BIO_read`.

问题是我等待套接字使用`select()`，但我不能确定何时有数据可供读取。

我试过（在我确定`select()`说有数据可供读取之后）：

*   BIO_eof
*   BIO_待定
*   BIO_should_read
*   SSL_待定
*   SSL_peek

但这似乎不起作用。`BIO_eof`返回 false 并且我使用其他函数检查数据，但例如`BIO_pending`即使有可用数据也返回 false。

如果我根据这些函数返回 true，我就会`SYSCALL_ERROR`发现有问题。

如何检查套接字上是否有可用的读取数据？我必须确保在`SSL/BIO_read`调用时有数据可以在不使用这些函数的情况下读取。当然，我可以使用它们，但不会丢失数据。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:19:44.743

> 我使用 select() 等待套接字，但我不确定何时有 DATA 可供读取。

是的你可以。如果`select()`返回 > 0 并且有`readfds`和没有`writefds`，则有可读的套接字。然而，读取的数据可能是 SSL 数据，而不是应用程序数据。你不能提前说出来。你必须阅读才能找出答案。这样做的可能性仍然存在，您可能仍然没有数据，或者按照 API 的建议需要写入等。你只需要应对它。

# c# - ajax调用后asp.net返回视图

> ID：14440313
> 
> 赞同：0
> 
> 时间：2013-01-21T14:03:28.260
> 
> 标签：c#, ajax, asp.net-mvc

我用ajax调用`NameController\Action`

在这个动作中，我返回`ActionResult`- 一个`View(model)`

有什么方法可以将客户端重定向到返回的视图？

现在我只在提琴手中看到这个视图（作为返回的内容）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:16:29.227

> 有什么方法可以将客户端重定向到返回的视图？

当然，但为什么在这种情况下使用 AJAX？AJAX 的全部意义在于保持在同一页面上并避免重新加载整个 HTML。

但如果你愿意，你可以做到这一点。例如，您可以让控制器操作有条件地返回一个 JSON 结果，其中包含您要重定向到的目标 url。然后在 AJAX 调用的成功回调中使用`window.location.href`对客户端执行重定向。

让我们举例说明：

```
[HttpPost]
public ActionResult MyAction()
{
    if (SomeCondition)
    {
        return PartialView(model);
    }
    return Json(new { redirectTo = Url.Action("TargetAction", "TargetController") });
} 
```

然后在您的 AJAX 成功回调中：

```
success: function(result) {
    if (result.redirectTo) {
        // the server returned a JSON result => let's redirect to the target url
        window.location.href = result.redirectTo;
    } else {
        // The server returned a partial view => let's update some portion of the DOM
        $('#result').html(result);
    }
} 
```

# shell - 使用shell获取算术平均值

> ID：14440314
> 
> 赞同：0
> 
> 时间：2013-01-21T14:03:38.440
> 
> 标签：shell, awk

以下是 ping 2 url 的输出。

```
PING www.abc.com (96.126.98.69)：56 个数据字节
来自 96.126.98.69 的 64 个字节：icmp_seq=0 ttl=43 time=444.812 ms
来自 96.126.98.69 的 64 个字节：icmp_seq=1 ttl=43 time=467.554 ms

--- www.abc.com ping 统计 ---
发送 2 个数据包，接收 2 个数据包，0.0% 数据包丢失
往返 min/avg/max/stddev = 444.812/456.183/467.554/11.371 ms
PING www.kkk.com (90.187.36.10)：56 个数据字节
来自 90.187.36.10 的 64 个字节：icmp_seq=0 ttl=51 time=404.907 ms
来自 90.187.36.10 的 64 个字节：icmp_seq=1 ttl=51 time=427.510 ms

--- www.kkk.com ping 统计 ---
发送 2 个数据包，接收 2 个数据包，0.0% 数据包丢失
往返 min/avg/max/stddev = 404.907/416.208/427.510/11.302 ms

```

我想得到每个ip的时间算术值。喜欢

```
96.126.98.69 a_time = 456.183
90.187.36.10 a_time = 416.208

```

我可以使用以下代码随时间获取每个 ip：

```
cat out | grep "64 bytes" 
```

但我不知道如何获得每个 ip 的算术平均值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:09:49.410

尝试这样做：

```
num=2
cat ips |
xargs -n1 ping -c $num |
awk -vnum=$num -F'[ =:]' '
    /^[0-9]+ bytes +from/{
        ips[$4]+=$11
    }
    END{
        for (ip in ips) print ip, "a_time =", ips[ip]/num
    }
' 
```

## 输出示例

```
127.0.0.1 a_time = 0.0225
8.8.8.8 a_time = 25.7 
```

## 解释

*   我使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")将毫秒添加到以 ip 为键的数组中
*   @最后，我遍历数组并除以 num 变量整数（此处为 2）
*   我用空格`=`和开关分割列 `:``-F`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:29:56.760

`awk`一个班轮怎么样：

```
awk -F'[:= ]' '/^64 b/{a[$4]+=$11}END{for(k in a)print k,"a_time =",a[k]/2}' out
90.187.36.10 a_time = 416.208
96.126.98.69 a_time = 456.183 
```

如果您增加数据包的数量，`ping -c 2`然后`ping -c 5`将最后一个更改`a[k]/2`为`a[k]/5`可选，您可以使用该`awk`选项`-v`将值作为变量传递。

# javascript - 如何在 HTML 中获取元素的形状/多边形/边界路径/框架？

> ID：14440322
> 
> 赞同：3
> 
> 时间：2013-01-21T14:04:09.667
> 
> 标签：javascript, html

在 jQuery`zepto.js`等中你可以说

```
var position = $('a:first').position(); 
```

但是 a-tag 可以跨越几行，其形状比简单的矩形（位置和大小）更复杂。我想得到的是元素的路径。

例子

```
The pipes in this examples is meant to illude ||||||| 
|||||| |||| || ||||||| an a-tag spanning over two lines. 
Consisting of two different rects OR 8 different points. 
```

那么，有没有办法得到任何元素的多边形呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:15:31.140

[http://jsfiddle.net/mattdlockyer/EEVV2/](http://jsfiddle.net/mattdlockyer/EEVV2/)

这将为您提供链接每条线的边界点。

由于构建多边形将取决于形状，所以我没有时间深入研究，但我认为这是一个合理的起点。

希望能帮助到你！

```
$(document).ready(function () {
var words = $('a').text().split(' '); //break the link's words into array
for (var i = 0; i < words.length; ++i) {
    words[i] = '<span>' + words[i] + '</span> '; //wrap each word in a span
}
words.join(' '); //join the words
$('a').html(words); //replace the link html with the words wrapped in spans

var points = []; //to store our points
var lastIndex = $('a span').length - 1; //so we know we've hit the last point
var first; //keep track of first point

$('a span').each(function (i) {
    var pos = $(this).position();
    if (i > 0) {
        if (i != lastIndex) {
            if (points[points.length - 1].top < pos.top) { //have we hit a new line?
                var newPos = $($('a span')[i - 1]).position();
                if (newPos.left != first.left) { //check if we are on the right side of the object
                    newPos.left += $($('a span')[i - 1]).width(); //add the width of the word
                    points.push(newPos); //push this point
                } else {
                    points.push(newPos); //we are on the left side, push the point without the width of the word
                }
                //$($('a span')[i - 1]).addClass('red'); //useful for debugging
            }
        } else {
            var bottomLineHeight = $(this).height();
            pos.left += $(this).width(); //add width to last point
            pos.top += bottomLineHeight; //add height to last point, push later
            points[points.length - 1].top += bottomLineHeight; //add height to second to last point
            points.push(pos); //push last point
        }
    } else {
        points.push(pos); //push first point
        first = pos; //keep track of topLeft point (first)
    }
});

//for printing out points
var html = '';
$(points).each(function (i, obj) {
    html += '<p>(' + obj.left + ', ' + obj.top + ')';
});
$('#result').html(html);

});//ready 
```

# java - 审核代码时输入 Missing identity check

> ID：14440324
> 
> 赞同：0
> 
> 时间：2013-01-21T14:04:33.183
> 
> 标签：java

我在写代码，使用codepro工具进行审计，在写equals方法的时候，遇到这种审计缺少身份检查，不知道怎么改正

我的方法代码：

```
@Override
public boolean equals(Object o) {
    boolean result = false;
    if(o instanceof Coordinate){
        if(((Coordinate) o).x == x &&
                ((Coordinate) o).y == y){
            result = true;
        }
    }
    return result;
} 
```

审计的描述是这样的：

描述：缺少身份检查

说明：equals 方法应该比较接收者和参数的身份，如果它们相同，则返回 true。

建议： 1\. 添加对象身份测试。

我不知道测试对象身份是什么意思，我应该使用单元测试还是什么？谢谢有人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:07:38.933

它只是意味着您应该检查两个对象是否相同

```
 this == o; 
```

# java - 试图禁用可聚焦，不工作，android

> ID：14440328
> 
> 赞同：1
> 
> 时间：2013-01-21T14:04:41.737
> 
> 标签：java, android, focus

我正在使用 android 中的库连接到终端仿真器，它连接到串行设备（开关）并向我显示发送/接收的数据。我使用另一个库通过串行发送数据。我通过终端下方的文本框或在终端本身输入并在两种情况下按键盘上的 Enter 键通过连接发送数据。

但是我想禁用对终端的输入，所以我尝试将可聚焦设置为 false。我仍然可以输入它，还有其他方法可以禁用在视图中输入吗？

```
<jackpal.androidterm.emulatorview.EmulatorView
        android:id="@+id/emulatorView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/term_entry"
        android:layout_below="@+id/deviceConnect"
        android:layout_toRightOf="@+id/scrllyout"
        android:focusable="false"
        android:focusableInTouchMode="false" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:10:18.880

查看EmulatorView的源码，看到了这个函数：

```
@Override
public boolean onCheckIsTextEditor() {
    return true;
} 
```

也许您可以将其更改为返回 false，并查看它是否解决了您的问题。如果这没有帮助，请检查

```
@Override
public InputConnection onCreateInputConnection(EditorInfo outAttrs) {} 
```

查看[源代码](http://code.google.com/p/vimtouch/source/browse/libraries/emulatorview/src/jackpal/androidterm/emulatorview/EmulatorView.java?spec=svn43e8b77b5f9fd57f4a1e685426f7052f985aca0e&r=43e8b77b5f9fd57f4a1e685426f7052f985aca0e)

# php - 上传图片超过 1mb 内存耗尽

> ID：14440330
> 
> 赞同：0
> 
> 时间：2013-01-21T14:04:47.293
> 
> 标签：php, image, memory, upload

当我尝试上传超过 1 MB 的图像时，我收到一条错误消息，告诉我分配的内存已用完、失败等，并使用以下脚本 -->

发生的错误是提到第 91 行是罪魁祸首

"图像填充($image_p, 0, 0, $white);"

当我尝试注释掉这一行时，我没有收到错误，而只是存储了一个“null”而不是上传

--> 我的服务器现在有 64m 的限制 -->

此代码可通过上传图片在[http://shedlimited.debrucellc.com](http://shedlimited.debrucellc.com)进行测试——感谢任何帮助！

```
 function uploadImage($fileName, $maxSize, $maxW, $fullPath, $relPath, $colorR, $colorG, $colorB, $maxH = null){
        $folder = $relPath;
        $maxlimit = $maxSize;
        $allowed_ext = "jpg,jpeg,gif,png,bmp";
        $match = "";
        $filesize = $_FILES[$fileName]['size'];
        if($filesize > 0){  
            $filename = strtolower($_FILES[$fileName]['name']);
            $filename = preg_replace('/\s/', '_', $filename);
            if($filesize < 1){ 
                $errorList[] = "File size is empty.";
            }
            if($filesize > $maxlimit){ 
                $errorList[] = "File size is too big.";
            }
            if(count($errorList)<1){
                $file_ext = preg_split("/\./",$filename);
                $allowed_ext = preg_split("/\,/",$allowed_ext);
                foreach($allowed_ext as $ext){
                    if($ext==end($file_ext)){
                        $match = "1"; // File is allowed
                        $NUM = time();
                        $front_name = substr($file_ext[0], 0, 15);
                        $newfilename = $front_name."_".$NUM.".".end($file_ext);
                        $filetype = end($file_ext);
                        $save = $folder.$newfilename;
                        if(!file_exists($save)){
                            list($width_orig, $height_orig) = getimagesize($_FILES[$fileName]['tmp_name']);
                            if($maxH == null){
                                if($width_orig < $maxW){
                                    $fwidth = $width_orig;
                                }else{
                                    $fwidth = $maxW;
                                }
                                $ratio_orig = $width_orig/$height_orig;
                                $fheight = $fwidth/$ratio_orig;

                                $blank_height = $fheight;
                                $top_offset = 0;

                            }else{
                                if($width_orig <= $maxW && $height_orig <= $maxH){
                                    $fheight = $height_orig;
                                    $fwidth = $width_orig;
                                }else{
                                    if($width_orig > $maxW){
                                        $ratio = ($width_orig / $maxW);
                                        $fwidth = $maxW;
                                        $fheight = ($height_orig / $ratio);
                                        if($fheight > $maxH){
                                            $ratio = ($fheight / $maxH);
                                            $fheight = $maxH;
                                            $fwidth = ($fwidth / $ratio);
                                        }
                                    }
                                    if($height_orig > $maxH){
                                        $ratio = ($height_orig / $maxH);
                                        $fheight = $maxH;
                                        $fwidth = ($width_orig / $ratio);
                                        if($fwidth > $maxW){
                                            $ratio = ($fwidth / $maxW);
                                            $fwidth = $maxW;
                                            $fheight = ($fheight / $ratio);
                                        }
                                    }
                                }
                                if($fheight == 0 || $fwidth == 0 || $height_orig == 0 || $width_orig == 0){
                                    die("FATAL ERROR REPORT ERROR CODE [add-pic-line-67-orig] to <a href='http://www.atwebresults.com'>AT WEB RESULTS</a>");
                                }
                                if($fheight < 45){
                                    $blank_height = 45;
                                    $top_offset = round(($blank_height - $fheight)/2);
                                }else{
                                    $blank_height = $fheight;
                                }
                            }

                            $image_p = imagecreatetruecolor($fwidth, $blank_height);
                            $white = imagecolorallocate($image_p, $colorR, $colorG, $colorB);

                            imagefill($image_p, 0, 0, $white);
                            switch($filetype){
                                case "gif":
                                    $image = @imagecreatefromgif($_FILES[$fileName]['tmp_name']);
                                break;
                                case "jpg":
                                    $image = @imagecreatefromjpeg($_FILES[$fileName]['tmp_name']);
                                break;
                                case "jpeg":
                                    $image = @imagecreatefromjpeg($_FILES[$fileName]['tmp_name']);
                                break;
                                case "png":
                                    $image = @imagecreatefrompng($_FILES[$fileName]['tmp_name']);
                                break;
                            }
                            @imagecopyresampled($image_p, $image, 0, $top_offset, 0, 0, $fwidth, $fheight, $width_orig, $height_orig);
                            switch($filetype){
                                case "gif":
                                    if(!@imagegif($image_p, $save)){
                                        $errorList[]= "PERMISSION DENIED [GIF]";
                                    }
                                break;
                                case "jpg":
                                    if(!@imagejpeg($image_p, $save, 100)){
                                        $errorList[]= "PERMISSION DENIED [JPG]";
                                    }
                                break;
                                case "jpeg":
                                    if(!@imagejpeg($image_p, $save, 100)){
                                        $errorList[]= "PERMISSION DENIED [JPEG]";
                                    }
                                break;
                                case "png":
                                    if(!@imagepng($image_p, $save, 0)){
                                        $errorList[]= "PERMISSION DENIED [PNG]";
                                    }
                                break;
                            }
                            @imagedestroy($filename);
                        }else{
                            $errorList[]= "CANNOT MAKE IMAGE IT ALREADY EXISTS";
                        }   
                    }
                }       
            }
        }else{
            $errorList[]= "NO FILE SELECTED";
        }
        if(!$match){
            $errorList[]= "File type isn't allowed: $filename";
        }
        if(sizeof($errorList) == 0){
            return $fullPath.$newfilename;
        }else{
            $eMessage = array();
            for ($x=0; $x<sizeof($errorList); $x++){
                $eMessage[] = $errorList[$x];
            }
            return $eMessage;
        }
    }

    $filename = strip_tags($_REQUEST['filename']);
    $maxSize = strip_tags($_REQUEST['maxSize']);
    $maxW = strip_tags($_REQUEST['maxW']);
    $fullPath = strip_tags($_REQUEST['fullPath']);
    $relPath = strip_tags($_REQUEST['relPath']);
    $colorR = strip_tags($_REQUEST['colorR']);
    $colorG = strip_tags($_REQUEST['colorG']);
    $colorB = strip_tags($_REQUEST['colorB']);
    $maxH = strip_tags($_REQUEST['maxH']);
    $filesize_image = $_FILES[$filename]['size'];
    if($filesize_image > 0){
        $upload_image = uploadImage($filename, $maxSize, $maxW, $fullPath, $relPath, $colorR, $colorG, $colorB, $maxH);
        if(is_array($upload_image)){
            foreach($upload_image as $key => $value) {
                if($value == "-ERROR-") {
                    unset($upload_image[$key]);
                }
            }
            $document = array_values($upload_image);
            for ($x=0; $x<sizeof($document); $x++){
                $errorList[] = $document[$x];
            }
            $imgUploaded = false;
        }else{
            $imgUploaded = true;
            $_SESSION['test']= $upload_image;
        }
    }else{
        $imgUploaded = false;
        $errorList[] = "File Size Empty";
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:21:39.583

ini_set('memory_limit', '240M'); 在脚本中

为我工作；仅供参考，我在共享主机上。

# android - Android 选项卡组 Activity 显示和隐藏底部选项卡

> ID：14440332
> 
> 赞同：0
> 
> 时间：2013-01-21T14:04:49.973
> 
> 标签：android, activitygroup

Android选项卡组活动从上一个活动转到下一个活动..如何隐藏底部选项卡？从下一个活动到上一个活动时，我必须显示底部选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:41:27.143

您也许可以从 GroupActivity 开始一个不是子项的新 Activity？然后它将被添加到堆栈中，但不会在 TabActivity 中。

# ios - 图像在 UITableView 中混淆 - XML 解析

> ID：14440333
> 
> 赞同：2
> 
> 时间：2013-01-21T14:04:50.390
> 
> 标签：ios, objective-c, uitableview

**编辑：实际上图像看起来很好，当我滚动它们时它们会混淆......**

我正在解析一个 XML 文件，其中包含指向我放入 UITable 的图像的链接。由于某种原因，图片完全混淆了，当我向下滚动表格时，其中一些甚至开始改变！这是我用于 UITable 的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";
    Tweet *currentTweet = [[xmlParser tweets] objectAtIndex:indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        CGRect imageFrame = CGRectMake(2, 8, 40, 40);
        customImage = [[UIImageView alloc] initWithFrame:imageFrame];
        [cell.contentView addSubview:customImage];

    }

    NSString *picURL = [currentTweet pic];
    if (![picURL hasPrefix:@"http:"]) {
        picURL = [@"http:" stringByAppendingString:picURL];
    }

    customImage.image = [UIImage imageWithData:[NSData dataWithContentsOfURL: [NSURL URLWithString:picURL]]];

    return cell;
} 
```

知道我做错了什么吗？非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:48:39.083

您的问题是，如果单元格不是`nil`（即您已成功重用已滚动出屏幕的单元格），则您没有`customImage`正确设置指针（因为它是一个类实例变量，它具有最后一个的值它创建的单元格）。因此，定义一些非零常量`kCustomImageTag`，然后将其中的`if`语句修改`cellForRowAtIndexPath`为：

```
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    CGRect imageFrame = CGRectMake(2, 8, 40, 40);
    customImage = [[UIImageView alloc] initWithFrame:imageFrame];
    [cell.contentView addSubview:customImage];
    customImage.tag = kCustomImageTag;
}
else
{
    customImage = [cell.contentView viewWithTag:kCustomImageTag];
} 
```

`tag`在创建时设置`customImage`并使用它`tag`来检索已`customImage`重用的`UITableViewCell`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:14:40.633

看看这个项目：[https ://github.com/bharris47/LIFOOperationQueue](https://github.com/bharris47/LIFOOperationQueue)

它展示了如何使用`NSTable`. 此外，如何不让您的图像混合匹配应该是一个很好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:11:37.707

当您要求一个可重复使用的单元格时，如果它不是 nil，则它是您已经分配并添加子视图到它的 contentView 的一个单元格...您应该首先在 cellForRow 中删除所有子视图。

```
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    CGRect imageFrame = CGRectMake(2, 8, 40, 40);
    customImage = [[UIImageView alloc] initWithFrame:imageFrame];
    [cell.contentView addSubview:customImage];

}  else {
     for (UIView *v in cell.contentView)
          [v removeFromSuperView];
} 
```

# javascript - 让锚部分像普通网站一样

> ID：14440335
> 
> 赞同：0
> 
> 时间：2013-01-21T14:04:58.537
> 
> 标签：javascript, anchor

这有点难以解释：我们有一个包含各种菜单的网站，除了普通链接外，它还有锚链接。现在在那里生成链接不是问题，但也希望给它们一个“活动”状态（=你在那个网站上），特别是当你跳到那个部分时。

```
<ul class="active">
  <li class="active">
    <a href="index.php?id=30">Subsite</a>
    <ul>
      <li><a href="index.php?id=30#section_1">Section 1</li>
      <li><a href="index.php?id=30#section_2">Section 2</li>
      <li><a href="index.php?id=30#section_3">Section 3</li>
      <li><a href="index.php?id=30#section_4">Section 4</li>
    </ul>
  </li>
</ul> 
```

正常链接行为：

你在家里，你点击菜单并进入 index.php?id=30 当你在 id=30 上时，菜单点将突出显示。

活动锚应该如何表现：

您在家里，单击菜单并进入 index.php?id=30#section_1。当您在 id=30 上时，它不会突出显示，但是当您点击链接并在 id=30#section_1 上时，它是（基于在位置栏中输入的内容）。当您删除位置栏中的锚点并确认时，突出显示应该被删除（afaik，网站不会重新加载，而是跳转到另一个部分）。

是否可以对这种跳跃行为做出反应并听取对位置栏所做的更改？或者您对如何实现这一目标有不同的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:03:46.483

正如 Marc Baumbach 在我的问题的评论部分指出的那样，这正是我想要的：

[在 - window.location.hash - 改变？](https://stackoverflow.com/questions/680785/on-window-location-hash-change)

# javascript - 来自 jQuery 播放器的严重内存泄漏

> ID：14440339
> 
> 赞同：1
> 
> 时间：2013-01-21T14:05:24.703
> 
> 标签：javascript, jquery, google-chrome, jplayer

我的页面上有一个 jQuery jplayer，我收到报告说页面运行缓慢，当我的朋友在任务管理器中检查 chrome 进程时，内存需求攀升至 1 gig 或更高。

我无法在页面中查明问题，我也没有在控制台上收到任何异常错误。

[播放器页面](http://www.tranceil.fm/player)

*   警告：音乐在启动时以自动模式播放

有什么想法吗？

# jquery - Jquery datepicker在showday之前更改CSS

> ID：14440340
> 
> 赞同：1
> 
> 时间：2013-01-21T14:05:54.813
> 
> 标签：jquery, datepicker

Helleu，我想在我的日期选择器中更改某些单日的 CSS，因为它们不可用，我也想让它们不可选。所以我有一个日期不可用的数组，并在演出前调用一个函数。如果我像这样通过它：

```
 return [true,"test"]; 
```

它是可选择的并将类测试应用于当天。背景颜色改变了，但边框保持正常的颜色！我还想要其他颜色的边框，如果可能的话，我还希望它不可选。如果我返回 false，则不应用该类！

```
function highlightDays(date) {
        var timestamp = new Date(Date.UTC(date.getFullYear(),date.getMonth(),date.getDate()));
        var timestamp = timestamp/1000;
        if ($.inArray(timestamp, prijzen) != -1) {
                return [true,"test"];
        }
    return [true, ''];
} 
```

CSS：

```
 td.test a { 
background: red !important; 
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:20:33.683

以下是 datepicker 为不可选择的日子生成的 html，其中`bad`添加了 eaxtra 类`beforeShowDay`

```
<td class=" ui-datepicker-unselectable ui-state-disabled bad"><span class="ui-state-default">2</span></td> 
```

您可以仅使用 datepicker 类更改 css，如下所示：

```
.ui-datepicker-unselectable.ui-state-disabled span.ui-state-default{
       color:red; border-color:#ffffff
 } 
```

您还可以使用您添加的类获得更具体的信息

演示：http: [//jsfiddle.net/Gpm3N/](http://jsfiddle.net/Gpm3N/)

# mysql - 需要由第二个字段分组的mysql中数据集的最后一个非NULL行

> ID：14440341
> 
> 赞同：-1
> 
> 时间：2013-01-21T14:05:59.833
> 
> 标签：mysql, sql

我不太擅长（我的）SQL，所以这里有一个表格和一个问题。我用表格来保存历史。我想返回最近的完整行（*）并且`field1`. 如果没有这样的行，我想获取任何`field1`为 NULL 的行。

*）最近的意思，它有最高`id`的（下面的'a'-'）。

表格和示例：

```
| id | field1 | field2 |
------------------------
|  1 | (null) |     34 | <--b 
|  2 |     77 |   1234 |
|  3 | (null) |   1234 |
|  4 | (null) |    234 |
|  5 | (null) |     34 | <--b
|  6 |     99 |   1234 |
|  7 |     42 |   1234 | <--a
|  8 |     13 |    234 | <--a
|  9 | (null) |    234 | 
```

我想得到三行，因为有三个不同的`field2`值。我想要标有“a”的行，因为它们是最新的并且具有非 NULL `field1`。而且我想要两个'b'-'中的一个（对我来说哪个没关系）。共制作三个。

我尝试了如下声明：

```
SELECT MAX(id), field1, field2
FROM table1
GROUP BY field2; 
```

但这不会产生预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:21:53.500

```
SELECT t.*
FROM 
        ( SELECT DISTINCT field2
          FROM table1
        ) AS dt
    JOIN
        table1 AS t
            ON t.id = COALESCE(
                ( SELECT MAX(id) AS maxid
                  FROM table1
                  WHERE field2 = dt.field2
                    AND field1 IS NOT NULL 
                ),
                ( SELECT MAX(id)
                  FROM table1
                  WHERE field2 = dt.field2
                ) 
                              ) ; 
```

另一种方式：

```
SELECT t.*
FROM 
        ( SELECT DISTINCT field2
          FROM table1
        ) AS dt
    JOIN
        table1 AS t
            ON t.id = 
               ( SELECT id
                 FROM table1
                 WHERE field2 = dt.field2
                 ORDER BY (field1 IS NULL)
                        , id DESC
                   LIMIT 1
               ) ; 
```

在（您的）**[SQL-Fiddle中测试](http://sqlfiddle.com/#!2/298cf/16)**

# jquery - 在 jqgrid 可编辑选项的 formoptions 中创建标签后缀，如元素后缀

> ID：14440342
> 
> 赞同：0
> 
> 时间：2013-01-21T14:06:05.753
> 
> 标签：jquery, asp.net-mvc-3, jqgrid

如何通过 mvc3 模型从 jqgrid 的表单标签后应用 *，例如 ex:-Username:*。我想要标签后缀，如表单选项中的元素后缀。如何在表单选项中创建标签后缀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:57:02.077

真的很难理解你到底是什么意思。如果我理解正确，您可以使用[formoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#formoptions)`label`的属性来解决您的问题。属性的值可以是任何常见的 HTML 片段。例如下面的设置`label`

```
formoptions: {
    elmprefix:"&nbsp;&nbsp;(<span class='mystar' style='color:red'>*</span>)&nbsp;",
    elmsuffix:"&nbsp;&nbsp;yyyy-mm-dd",
    label: "<span>Date<span><span style='float:right'>XXX</span>"
} 
```

设置两个跨度作为表单的标签。结果，您可以生成如下表格（请参阅字段日期）

![在此处输入图像描述](../Images/5346eae6955d236e0d69c0ab6e6b7951.png)

**更新**`formoptions.label`： or的用法`formoptions.elmprefix`是您可以使用的两种方式。如果您想设置`formoptions.label`任何*动态*值，您可以针对`$(this).jqGrid("setColProp", "yourColumnName", {formoptions: {label: "any HTML or text string"}})`. 如果您要在`beforeInitData`回调内部进行调用（如在[answer](https://stackoverflow.com/a/4485643/315935)中），jqGrid 将在表单中使用新修改的标签。您不应该忘记使用`recreateForm: true`表单编辑选项（参见[此处](https://stackoverflow.com/a/6128195/315935)的示例）。

# java - 对格式不正确的 XML 进行 XPath 评估？

> ID：14440343
> 
> 赞同：1
> 
> 时间：2013-01-21T14:06:07.717
> 
> 标签：java, xml, xpath

我需要通过 XPath 评估器传递一些格式不严格的 XML。XML 实际上主要是 html，可能如下所示：

```
<p>
  <a href="http://www.something.com/5993810749/" title="IMG_3013”&gt;
    <img src="5993810749_107ea7d465_m.jpg" width="240" height="160" alt="IMG_3013”/>
  </a>
</p>
<p>
  <a href="http://www.something.com/836492365986/" title="IMG_3018”&gt;
    <img src=“8364923659_107ea3286465_m.jpg" width=“365" height=“248" alt="IMG_3018”/>
  </a>
</p> 
```

所以，值得注意的问题是它： 没有根元素；也`<img>`没有终止。虽然用根元素包装很容易，但当我通过 XPath 评估器时，我得到一个异常，如下所示：

```
[Fatal Error] :7:196: The element type "img" must be terminated by the matching end-tag "</img>". 
```

顺便说一句，Java 中 XPath Evaluator 的代码如下所示：

```
XPath xPath = XPathFactory.newInstance().newXPath();
Object result = xPath.evaluate(xpath,
    new InputSource(new StringReader(xmlString)), XPathConstants.NODESET); 
```

所以，我想知道，处理这个问题的最佳方法是什么，以便我可以成功评估 XML？看来我至少有两个选择：（a）尝试让 XPath 评估器更聪明；或者 (b) 尝试有一种方法来自动修复格式不佳的 XML。对此问题的解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:23:55.127

您可以使用诸如[NekoHTML 之](http://nekohtml.sourceforge.net)类的 HTML 解析器来解析 HTML ，然后在生成的 DOM 树上运行 XPath 查询

```
import org.cyberneko.html.parsers.DOMParser;
import org.w3c.dom.Document;
import org.w3c.dom.Node;

DOMParser parser = new DOMParser();
parser.parse(new InputSource(new StringReader(xmlString)));
XPath xPath = XPathFactory.newInstance().newXPath();
Object result = xPath.evaluate(xpath, parser.getDocument(),
      XPathConstants.NODESET); 
```

请注意，NekoHTML 默认生成特定的 HTML DOM 节点，并且无论原始输入标签的大小写如何，这些节点都以大写形式报告其节点名称。因此，如果您想要一个可以提取所有`<p>`元素的 XPath，那么您需要`//P`而不是`//p`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:24:49.713

有几个实用程序可以将 HTML 或通常带有尖括号的任何内容转换为格式良好的 XML（可能是也可能不是您期望的 XML，但格式正确）。JTidy 和 TagSoup 经常用于此角色。您不必具体化 XML，您可以将其直接泵入处理管道的下一步，例如 XSLT 转换或模式验证。

# ios - Xcode省略块的参数名称

> ID：14440344
> 
> 赞同：7
> 
> 时间：2013-01-21T14:06:08.467
> 
> 标签：ios, objective-c, xcode, block

我有一个如下所示的块属性：

```
@property (nonatomic, copy) void (^indexChangeBlock)(NSInteger index); 
```

当我尝试设置此属性的值时，Xcode 自动完成将省略参数名称，留下如下内容：

```
[self.segmentedControl3 setIndexChangeBlock:^(NSInteger) {
    code
}]; 
```

然后 Xcode 显示`Parameter name omitted`错误。我知道我可以通过手动添加参数名称来解决这个问题，使其看起来像这样：

```
[self.segmentedControl3 setIndexChangeBlock:^(NSInteger index) {
    code
}]; 
```

我的问题是，如何让 Xcode 自动添加参数名称。或者换句话说，阻止它删除它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:09:34.170

可能的解决方案：

```
typedef void (^IndexChangeBlock)(NSInteger index); 
```

并定义您的财产

```
@property (nonatomic, copy) IndexChangeBlock indexChangeBlock; 
```

如果你添加

```
- (void)setIndexChangeBlock:(IndexChangeBlock)indexChangeBlock; 
```

一切都应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T05:20:10.250

在更加沮丧的情况下，我做了一个宏观巩固这个粗略的过程..

```
#define BlockProperty(SIGNATURE,TYPENAME,varname,Varname) typedef SIGNATURE; @property (nonatomic,copy) TYPENAME varname; - (void) set##Varname:(TYPENAME)_ 
```

现在以前需要什么（正确的自动完成）..

```
typedef void(^OnEvent)(BOOL ok,id result);
@property (nonatomic,copy) OnEvent varname;
- (void) setVarname:(OnEvent)_; 
```

简直就是

```
BlockProperty(void(^OnEvent)(BOOL ok, id result),OnEvent,varname,VarName); 
```

相当简单，不那么冗长，并且您可以获得 typedef AND 的好处，并且您不必创建难看的、理论上不需要的 setter 声明！

如果你想重用一个“类型”，你需要另一个（这一次只需要三个参数（因为块类型不能重新声明）。

```
#define BlockProp(TYPENAME,varname,Varname) @property (nonatomic,copy) TYPENAME varname; - (void)  set##Varname:(TYPENAME)_

BlockProp(OnEvent,anotherVar,AnotherVar); 
```

即使它们的签名匹配（使用第一个宏），您也可以为每个属性创建一个新的块类型（名称），但这有点恶心。享受！

# iphone - Apple 在哪个 WWDC 会议视频中展示了用于本地化时间间隔格式的 API？

> ID：14440345
> 
> 赞同：0
> 
> 时间：2013-01-21T14:06:08.533
> 
> 标签：iphone, ios, objective-c, nsdate, foundation

很久以前，我观看了一个 WWDC 会议视频，其中 Apple 引入了一个 API，该 API 可以以人类可读的本地化形式打印时间间隔。

与其打印某人发表评论的日期，不如打印一个本地化的字符串，例如“2 小时前”或“昨天”或“上周”。

我再也找不到该视频，也没有此 API 的参考或示例。我确信它是一个专门的 API，可以直接获取相对于当前日期的日期间隔的这种本地化字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:51:55.787

我不记得视频（虽然有一些关于它的视频）但我认为你正在考虑的 API 是：

`[NSDateFormatter localizedStringFromDate:date dateStyle:NSDateFormatterMediumStyle timeStyle:NSDateFormatterNoStyle]`

我不确定这个 API 是否会进行相对日期格式设置，并且提到的框架`Midhun MP`更进一步

当然，您可以构建自己`NSDateFormatter`的属性并设置`setDoesRelativeDateFormatting:YES`属性以提供诸如“今天”或“明天”之类的文本。

示例代码在下面的类参考中`setDoesRelativeDateFormatting:`。

请参阅[NSDateFormatterClassReference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:14:57.093

我不知道那个视频。

有一个开源库可用于执行此操作：[**SEHumanizedTimeDiff**](https://github.com/sarperdag/SEHumanizedTimeDiff)。

还要检查 Three20 的[**NSDateAdditions**](https://github.com/facebook/three20/blob/master/src/Three20Core/Sources/NSDateAdditions.m)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T14:55:24.467

我认为您在 2012 年的第 244 次会议之后。

称为“国际化技巧和窍门”。

# javascript - 使用 javascript ActiveXObject 在 XML 中添加新节点给出错误

> ID：14440348
> 
> 赞同：1
> 
> 时间：2013-01-21T14:06:21.307
> 
> 标签：javascript, jquery, xml

我有一个 airport-codes.xml 文件：-

```
<?xml version="1.0" encoding="utf-8" ?>
<iata>
  <iata_airport_codes>
    <airport>Ocho Rios, Jamaica</airport>
    <code>OCJ</code>
  </iata_airport_codes>
</iata> 
```

我想使用 javascript 添加节点我使用此代码添加节点

```
var xml = new ActiveXObject("Microsoft.XMLHTTP");
xml.open("GET", "airport-codes.xml", true);
xml.send(null);

var iata_airport_codes = xml.responseXML.createElement("iata_airport_codes");

var airport = xml.responseXML.createElement("airport");
airport.appendChild(xml.responseXML.createTextNode("Mr Njoroge"));

var code = xml.responseXML.createElement("code");
code.appendChild(xml.responseXML.createTextNode("21454741"));

iata_airport_codes.appendChild(airport);
iata_airport_codes.appendChild(code);
xml.responseXML.appendChild(iata_airport_codes); 
```

但我收到了这个错误：-

**XML 文档中只允许有一个顶级元素。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:20:48.467

您尝试在文档的顶层添加一个元素。您只需在“iata”节点中添加一个元素。

所以尝试：

```
xml.responseXML.getElementsByTagName("iata").item(0).appendChild(iata_airport_codes); 
```

编辑：代码中的语法错误

# javascript - HTML5 Canvas 中图像大小调整的界限

> ID：14440349
> 
> 赞同：2
> 
> 时间：2013-01-21T14:06:22.793
> 
> 标签：javascript, jquery, html, canvas, kineticjs

我正在尝试使用 KineticJS 库为图像调整大小添加大小限制。HTML5 Canvas Tutorial 提供了调整图片大小的方法：http: [//www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)

但我希望用户不能将图像大小调整为小于 50 像素 x 50 像素或大于 200 x 200。我已经尝试了很多通过以下代码管理控件。但它显示出非常奇怪的结果

```
 dragBoundFunc: function(pos) {

        var newX = '';
        var image_width = group.get(".darthVaderImg")[0].getWidth();
        var image_height = group.get(".darthVaderImg")[0].getHeight();
        var image_position = group.get(".darthVaderImg")[0].getPosition();

                if((image_width>50 && image_width< 200)     ){
                    newX = pos.x;   
                }else{
                    newX = image_position.x+image_width+80; 
                }
                if((image_height>50 && image_height< 200)       ){
                    newY = pos.y;   
                }else{
                    newY = image_position.y+100; 
                }

                  return {
                    x: newX ,
                    y: newY,
                   };

                } 
```

任何我能做到的例子或想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:15:29.470

[http://jsfiddle.net/e4uyG/4/](http://jsfiddle.net/e4uyG/4/)让您非常接近您的要求。

基本上，您有一个 update() 函数可以重绘图像，因此只需将其限制为一定数量的调整大小

```
 function update(group, activeAnchor) {
    var topLeft = group.get(".topLeft")[0];
    var topRight = group.get(".topRight")[0];
    var bottomRight = group.get(".bottomRight")[0];
    var bottomLeft = group.get(".bottomLeft")[0];
    var image = group.get(".image")[0];

    // update anchor positions
    switch (activeAnchor.getName()) {
      case "topLeft":
        topRight.attrs.y = activeAnchor.attrs.y;
        bottomLeft.attrs.x = activeAnchor.attrs.x;
        break;
      case "topRight":
        topLeft.attrs.y = activeAnchor.attrs.y;
        bottomRight.attrs.x = activeAnchor.attrs.x;
        break;
      case "bottomRight":
        bottomLeft.attrs.y = activeAnchor.attrs.y;
        topRight.attrs.x = activeAnchor.attrs.x;
        break;
      case "bottomLeft":
        bottomRight.attrs.y = activeAnchor.attrs.y;
        topLeft.attrs.x = activeAnchor.attrs.x;
        break;
    }

    image.setPosition(topLeft.attrs.x, topLeft.attrs.y);

    var width = topRight.attrs.x - topLeft.attrs.x;
    var height = bottomLeft.attrs.y - topLeft.attrs.y;
    if(height > 50 && height < 200) // Limit the height 
      image.setHeight(height);

    if(width > 50 && width < 200)  // Limit the width
      image.setWidth(width);
  } 
```

# c++ - SFML Vector2i 的未知转换

> ID：14440353
> 
> 赞同：1
> 
> 时间：2013-01-21T14:06:29.527
> 
> 标签：c++, arrays, networking, game-engine, sfml

我对这个完全精疲力尽，但为什么我会得到：

```
client.cpp: In member function 'void Client::netRead(int, int)':
client.cpp:158:57: error: no matching function for call to 'Client::nextGameUpdate(sf::Vector2i [0], int [0], sf::IpAddress [0], int&)'
client.cpp:158:57: note: candidate is:
client.cpp:85:6: note: void Client::nextGameUpdate(sf::Vector2i, int, sf::IpAddress, int)
client.cpp:85:6: note:   no known conversion for argument 1 from 'sf::Vector2i [0] {aka sf::Vector2<int> [0]}' to 'sf::Vector2i {aka sf::Vector2<int>}'
[Finished in 4.7s] 
```

* * *

```
 void Client::nextGameUpdate(sf::Vector2i qq, int ww, sf::IpAddress cc, int dataSize)
    {
        pListIP[dataSize] = cc;
        pListVec[dataSize] = qq;
        pListRot[dataSize] = ww;

        int num_pListIP = sizeof(pListIP)/sizeof(sf::IpAddress);
        if (num_pListIP == lastPlayerCount)
        {
            return;
        }
        else if (num_pListIP > lastPlayerCount)
        {
            int new_players = num_pListIP - lastPlayerCount;
            for (new_players; new_players>0; new_players--)
            {
                addPlayer();

}
    }
    else if (num_pListIP < lastPlayerCount)
    {
        int dc_players = lastPlayerCount - num_pListIP;
        for (dc_players; dc_players>0; dc_players--)
        {
            removePlayer();
        }
    }
    lastPlayerCount = num_pListIP;
}

void Client::netRead(int net_step, int dataSize)
{
    sf::Packet player_vectors;
    sf::Packet player_rotations;
    sf::Packet player_ips;

    switch (net_step)
    {
        case 1:
            if (socket.receive(player_vectors, sender, senderPort) != sf::Socket::Done)
                return;
            while (dataSize>0)
            {
                sf::Vector2i tmp_vec;
                player_vectors >> tmp_vec.x >> tmp_vec.y;
                pListVec[dataSize] = tmp_vec;
                dataSize--;
            }
            break;
        case 2:
            if (socket.receive(player_rotations, sender, senderPort) != sf::Socket::Done)
                return;
            while (dataSize>0)
            {
                int tmp_rot;
                player_rotations >> tmp_rot;
                pListRot[dataSize] = tmp_rot;
                dataSize--;
            }
            break;
        case 3:
            if (socket.receive(player_ips, sender, senderPort) != sf::Socket::Done)
                return;
            while (dataSize>0)
            {
                std::string tmp_str;
                player_ips >> tmp_str;
                sf::IpAddress tmp_ips = tmp_str;
                pListIP[dataSize] = tmp_ips;
                dataSize--;
            }
            break;
    }
    nextGameUpdate(pListVec, pListRot, pListIP, dataSize);
} 
```

* * *

标题

```
private:
sf::Vector2i pListVec[];
sf::IpAddress pListIP[];
int pListRot[]; 
```

我觉得这与我试图用 sf::Vector2i 填充的数组有关... */me 茫然地盯着屏幕*

所以很简单地说。netRead 从另一个非常基本的函数获取信息。然后交换机通过net_step int ...

在游戏收到所有需要继续的数据包后，我们触发 nextGameUpdate() 并向其发送 3 个数组和一个 dataSize int 变量。

如果你能解决这个问题，请提前致谢。^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:17:48.453

您正试图传递`pListVec`到`qq`前者是一个数组`Vector2i`而后者是一个单一的`Vector2i`.

但是您的逻辑中也存在错误。替换`pListVec`为`qq`您的更新函数，第二条语句为：

`pListVec[dataSize] = pListVec;`

那不可能是你打算做的。

* * *

此外，由于`pListVec`是您的类的私有字段，因此无需将其作为成员函数之间的参数传递（至少在您的情况下，两种方法都在同一个实例上调用）。

# mysql - MySql PREPARE stmt FROM [function argument] 和 CURSORs

> ID：14440356
> 
> 赞同：1
> 
> 时间：2013-01-21T14:06:46.763
> 
> 标签：mysql, loops, cursor, prepare

我有一个 MySql 函数，它接受 3 个参数。最后一个参数是一个查询本身，我可以使用 PREPARE(?) 执行它，至少在它没有多个结果的情况下是这样。我想遍历 PREPARED 语句返回的所有结果。

我怎样才能做到这一点？我正在考虑一个 CURSOR，但我能找到的是不可能在 PREPARED 变量语句上使用 CURSOR。

我想要实现以下目标： 1\. 我在我的应用程序中查看结果。结果是分页的。2\. 我想搜索一个特定的行，找到它所属的页面，并把它放到视图中。3.结果视图可以通过多种方式过滤和排序，因此MySql函数的第三个参数是查询结果视图填充。

希望我说清楚了，否则请告诉我。

到目前为止，我有以下内容：DELIMITER $$ # 否则你不能使用分号来结束一行

```
/*
The bar graph (clsBarGraph) shows cows in pages.
If you wish to search for a page with a certain Cow ID you need to do alot of things.
Therefore this function is created, to do the heavy lifting all in the database engine.accessible
@param LongCowID The long cow ID of the cow you wish to get the page for
@param ItemsPerPage To determine on what page a cow comes, it is necessary to known how many cows will fit into a page
@param SelectQuery The query that was used to view the data in the BarGraph. This determines ordering, which cows to have in the resultset to limit on, etc.
        This should be without the limit
@return The page number to set the view to, or -1 if the cow does not exist.
*/
CREATE FUNCTION `GetPageForCowID`(LongCowID INT, ItemsPerPage INT, SelectQuery VARCHAR(255))
RETURNS INT
BEGIN
DECLARE `page` INT;

/* Prepares queries to execute */
PREPARE stmt_CheckIfCowExists FROM 'SELECT COUNT(`Long_Cow_ID`) as `rows` FROM `cow_data` INTO @NumberOfRows';
EXECUTE stmt_CheckIfCowExists;
IF @NumberOfRows = 1 THEN 
    /* The cow does nto exist */
    SET `page` = -1;
ELSE
    /* The cow does exist */
    /* Get all the cows used in the view of the data, without a limit and put it into a variable */
    SET @SelectQuery = CONCAT(@SelectQuery, ' INTO @CowsForDataView');
    PREPARE stmt_SelectDataForView FROM @SelectQuery;
    EXECUTE stmt_SelectDataForView;
    SELECT COUNT(*) FROM stmt_SelectDataForView;

    DEALLOCATE PREPARE stmt_SelectDataForView;
END if;

/* Clean Up */
deallocate PREPARE stmt_CheckIfCowExists;
return `page`;
END 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:18:08.567

将结果放入临时表中：

```
SET @sql := CONCAT('CREATE TEMPORARY TABLE tmp_GetPageForCowID ', SelectQuery);
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

然后可以在临时表的内容上迭代游标。

# xml - 如何检查节点是否存在

> ID：14440357
> 
> 赞同：1
> 
> 时间：2013-01-21T14:06:52.477
> 
> 标签：xml, c#-4.0

下面是我的代码。我在 responseElement 和对应的值中得到了 xml 的响应。我想知道如何在以下表达式中检查 firstName/contactid 节点是否存在

```
var responseElement = XElement.Parse(putContactResponse);
ObjInvoice.Contact_Id = responseElement.XPathSelectElement("//Contact/ContactID").Value;
ObjInvoice.FirstName = responseElement.XPathSelectElement("//Contact/FirstName").Value; 
```

# firefox - 检测 Gmail 附件下载

> ID：14440362
> 
> 赞同：0
> 
> 时间：2013-01-21T14:07:06.280
> 
> 标签：firefox, firefox-addon, gmail, greasemonkey, email-attachments

有没有办法检测正在下载的特定文件是否是 Gmail 附件？
我正在寻找一种编写 Greasemonkey 脚本的方法，该脚本可以帮助我根据下载源组织下载，比如 Gmail 电子邮件附件的行为与其他内容不同。

到目前为止，我发现附件重定向到`https://mail-attachment.googleusercontent.com/attachment/u/0/`，我想这还不够。

**编辑**

由于附加组件比用户脚本更强大，我决定追求附加组件的想法。然而，检测问题仍未解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:49:58.907

这对于一个问题来说太复杂了；它至少有以下主要部分：

1.  您想在用户点击时重定向下载，还是自动下载选定文件？ **澄清问题。**
2.  您的 GM 脚本必须**确定适当的下载链接、在哪些页面上以及针对哪些视图？** 对于 gMail 来说，这不是一项简单的任务，问题需要更清楚。鉴于所涉及的观点和 AJAX 的多样性，仅在这个问题上就值得提出一个完整的问题。
3.  一旦确定，脚本可能需要拦截对这些链接的点击。（取决于您的目标（澄清！）以及 Firefox 扩展可以做什么。）
4.  Greasemonkey 需要与拦截用户启动下载或允许自动下载的扩展交互。我在下面详细介绍了自动下载方法。

一旦您的脚本确定了适当的文件 URL 和/或链接（打开一个新问题以获得更多帮助，并包含您想要的页面类型和链接的图片。），它可以与 Firefox 附加组件交互，例如下面的一个，自动保存这些文件。

* * *

**在附加插件的帮助下自动保存来自 Greasemonkey 的文件：**

## 警告：以下是仅用于教育的工作概念证明。它没有安全功能，如果您按原样使用它，进行实际冲浪，某些网页或脚本编写器或扩展程序编写器*将*使用它来完全 pwn 您的计算机。

如果您使用附加组件构建器或 SDK 来安装或“测试”[危险*。危险。危险。文件下载实用程序*](https://builder.addons.mozilla.org/package/171987/latest/)，

然后你可以像这样使用 Greasemonkey 脚本来自动保存文件：

```
// ==UserScript==
// @name        _Call our File download add-on to trigger a file download.
// @include     https://mail.google.com/mail/*
// @include     https://stackoverflow.com/questions/14440362/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

var fileURL         = "http://userscripts.org/scripts/source/29222.user.js";
var savePath        = "D:\\temp\\";
var extensionLoaded = false;

window.addEventListener ("ImAlivefromExtension", function (zEvent) {
    console.log ("The test extension appears to be loaded!", zEvent.detail);
    extensionLoaded = true;
} );

window.addEventListener ("ReplyToDownloadRequest", function (zEvent) {
    //var xxxx        = JSON.parse (zEvent.detail);
    console.log ("Extension replied: ", zEvent.detail);
} );

$("body").prepend ('<button id="gmFileDownloadBtn">Click to File download request.</button>');
$("#gmFileDownloadBtn").click ( function () {
    if (extensionLoaded) {

        detailVal   = JSON.stringify (
            {targFileURL: fileURL, targSavePath: savePath}
        );

        var zEvent  = new CustomEvent (
            "SuicidalDownloadRequestToAddOn",
            {"detail": detailVal }
        );
        window.dispatchEvent (zEvent);
    }
    else {
        alert ("The file download extension is not loaded!");
    }
} ); 
```

[您可以在这个 SO question page](https://stackoverflow.com/questions/14440362/) 上测试脚本。

请注意，任何其他扩展程序、用户脚本、网页或插件都可以侦听或发送欺骗事件，到目前为止，唯一的安全措施是限制扩展程序在哪些页面上运行。

作为参考，扩展源文件如下。其余部分由 Firefox 的附加 SDK 提供。

**内容脚本：**

```
var zEvent = new CustomEvent ("ImAlivefromExtension",
    {"detail": "GM, DANGER, DANGER, DANGER, File download utility" }
);
window.dispatchEvent (zEvent)

window.addEventListener ("SuicidalDownloadRequestToAddOn", function (zEvent) {
    console.log ("Extension received download request: ", zEvent.detail);

    //-- Relay request to extension main.js
    self.port.emit ("SuicidalDownloadRequestRelayed", zEvent.detail);

    //-- Reply back to GM, or whoever is pretending to be GM.
    var zEvent = new CustomEvent ("ReplyToDownloadRequest",
        {"detail": "Your funeral!" }
    );
    window.dispatchEvent (zEvent)
} ); 
```

**后台JS：**

```
//--- For security, MAKE THESE AS RESTRICTIVE AS POSSIBLE!
const includePattern = [
    'https://mail.google.com/mail/*',
    'https://stackoverflow.com/questions/14440362/*'
];

let {Cc, Cu, Ci}    = require ("chrome");

Cu.import ("resource://gre/modules/Services.jsm");
Cu.import ("resource://gre/modules/XPCOMUtils.jsm");
Cu.import ("resource://gre/modules/FileUtils.jsm");

let data            = require ("sdk/self").data;
let pageMod         = require ('sdk/page-mod');
let dlManageWindow  = Cc['@mozilla.org/download-manager-ui;1'].getService (Ci.nsIDownloadManagerUI);
let fileURL         = "";
let savePath        = "";
let activeWindow    = Services.wm.getMostRecentWindow ("navigator:browser");

let mod             = pageMod.PageMod ( {
    include:            includePattern,
    contentScriptWhen:  'end',
    contentScriptFile:  [ data.url ('ContentScript.js') ],
    onAttach:           function (worker) {
        console.log ('DANGER download utility attached to: ' + worker.tab.url);

        worker.port.on ('SuicidalDownloadRequestRelayed', function (message) {
            var detailVal   = JSON.parse (message);
            fileURL         = detailVal.targFileURL;
            savePath        = detailVal.targSavePath;

            console.log ("Received request to \ndownload: ", fileURL, "\nto:", savePath);

            downloadFile (fileURL, savePath);
        } );
    }
} );

function downloadFile (fileURL, savePath) {
    dlManageWindow.show (activeWindow, 1);

    try {
        let newFile;
        let fileURIToDownload   = Services.io.newURI (fileURL, null, null);
        let persistWin          = Cc['@mozilla.org/embedding/browser/nsWebBrowserPersist;1']
                                .createInstance (Ci.nsIWebBrowserPersist);
        let fileName            = fileURIToDownload.path.slice (fileURIToDownload.path.lastIndexOf ('/') + 1);
        let fileObj             = new FileUtils.File (savePath);

        fileObj.append (fileName);

        if (fileObj.exists ()) {
            console.error ('*** Error! File "' + fileName + '" already exists!');
        }
        else {
            let newFile         = Services.io.newFileURI (fileObj);
            let newDownload     = Services.downloads.addDownload (
                0, fileURIToDownload, newFile, fileName, null, null, null, persistWin, false
            );

            persistWin.progressListener = newDownload;
            persistWin.savePrivacyAwareURI (fileURIToDownload, null, null, null, "", newFile, false);
        }
    } catch (exception) {
        console.error ("Error saving the file! ", exception);
        dump (exception);
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T08:13:28.447

到目前为止，从您所说的来看，您唯一能做的就是制作附加组件（Firefox）和扩展（如果您愿意，可以使用 chrome）。

如果您仔细查看附件的下载，它会在以下情况下发生：

1) 你点击附件的图标

2）如果你点击下载

对于这两件事，您可以找到`<a>`包含值的标签的单击事件。您可以`download_url`使用 js/jquery 进行创建扩展轻松地做到这一点。

因此，您可以在用户尝试下载附件时编写功能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T14:59:38.917

您可以使用 Gmail 上下文小工具来修改 Google 端的行为：

[Gmail 上下文小工具](https://developers.google.com/google-apps/gmail/contextual_gadgets)

上下文小工具不能直接访问附件，但在服务器端，您可以使用 IMAP 访问附件（基于小工具识别的 Gmail 邮件 ID）：

[Gmail IMAP 扩展程序](https://developers.google.com/google-apps/gmail/imap_extensions#overview)

使用小工具和服务器端 IMAP 具有与浏览器无关的优势。

与任何给定的下载相比，您希望对下载的 Gmail 附件做些什么并不完全清楚（将其保存到不同的位置？对附件数据执行操作？）但是上下文小工具和 IMAP 应该给您一些修改的机会在浏览器下载开始之前根据需要添加附件数据。

# java - Picocontainer 中的 JSR-330 支持：@Inject ... @Named("xxx)

> ID：14440363
> 
> 赞同：2
> 
> 时间：2013-01-21T14:07:06.960
> 
> 标签：java, jsr330, picocontainer

我们找到了类似的代码

```
private String string = "Not injected.";

@Inject
public void setString(@Named("s") String s) {
    this.string = s;
} 
```

（利用 JSR-330 注释）对于传入“s”的字符串值非常有用。我们希望在使用哪个容器方面尽可能灵活，因此 Picocontainer 也是如此。

正如所写，Picocontainer 默默地忽略了注入。我将如何提示 PicoContainer 注入例如“注入字符串！” 这里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:07:45.583

稳定的 pico 2.x 不完全支持 JSR-330（您的特定情况），pico 3.x 会有。无论如何，@named 不是使用 picocontainer 功能的好方法，也不是以 IoC 为中心的应用程序的好设计。如果你使用这些东西，可能你不需要 pico。

# listview - 具有不同数据源的 WinJS Listview 组？

> ID：14440367
> 
> 赞同：0
> 
> 时间：2013-01-21T14:07:20.907
> 
> 标签：listview, winjs

我们需要一个完全没有问题`ListView`的`Win8`应用程序`GroupedItems.` ，但我们需要`dataSources`为每个组提供不同的。

例如，我们需要三组：

1.  带按钮的分组/固定数据
2.  通过 xhr 使用类别/数据分组（例如`/categories.php?limit=10`）
3.  通过 xhr / 增量加载的文章/数据分组（例如`/articles.php?limit=none&offset=50&start=0`）

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:28:49.160

您需要将数据合并到一个数据源中，然后根据该信息进行分组。这可以通过管理 a`WinJS.Binding.List`并使用分组功能将数据放入其中来完成，或者如果您想变得非常先进，请使用`VirtualizedDataSource`. 我在以下问题中的回答链接到该信息的适当位置。

[如何在 WinJS 应用程序中将多个不同的 JSON 对象添加到单独的列表中？](https://stackoverflow.com/questions/14327499/how-to-i-add-multiple-distinct-json-objects-into-seperate-lists-in-winjs-app/14343003#14343003)

# go - Go 编译器所说的“没有这样的文件或目录”是什么意思？

> ID：14440369
> 
> 赞同：4
> 
> 时间：2013-01-21T14:07:30.877
> 
> 标签：go

我正在尝试编译由多个模块组成的 Go 程序，如下所示：

```
// main.go
package main
import "mst"
// do something interesting involving minimum spanning trees

// src/mst/kruskal.go
import "disjsets"
// Kruskal's algorithm follows

// src/disjsets/disjsets.go
// implements disjoint sets with union-find 
```

现在，当我在包含and的目录中运行其中一个`go run main.go`或`go build`之后时，它会打印`export GOPATH=.``main.go``src`

```
# disjsets
open src/disjsets/disjsets.go: No such file or directory 
```

我不明白这个。该文件在那里`ls -l src/disjsets/disjsets.go`确认。这怎么可能发生？`disjsets.go`如果 Go 要找到文件，文件应该放在哪里？

（谷歌围棋 1.0.2）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T14:25:06.580

我相信您应该阅读或重新阅读[如何编写 Go 代码](http://golang.org/doc/code.html#GOPATH)

简而言之：

将您的 GOPATH 设置到某个地方并将其导出。然后将一些包`blah`放入目录

```
$GOPATH/src/foo/bar/baz/blah # (1) 
```

或者

```
$GOPATH/src/blah # (2) 
```

或者

```
$GOPATH/src/qux/blah # (3) etc. 
```

导入`blah`到其他包中

```
import "foo/bar/baz/blah" // (1) 
```

或者

```
import "blah" // (2) 
```

或者

```
import "qux/blah" // (3) 
```

该目录中的包将包含包文件。假设你只有一个，`blah.go`. 那么它的位置将是

```
$GOPATH/src/foo/bar/baz/blah/blah.go // (1)

$GOPATH/src/blah/blah.go // (2)

$GOPATH/src/qux/blah/blah.go // (3) 
```

如果 blah 包源文件被命名，比如说`proj.go`，那么

```
$GOPATH/src/foo/bar/baz/blah/proj.go // (1)

$GOPATH/src/blah/proj.go // (2)

$GOPATH/src/qux/blah/proj.go // (3) 
```

但导入路径与前一种情况相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:36:23.703

好的，这似乎解决了它：

```
export GOPATH=`pwd` 
```

显然，它需要是一个绝对路径。不过，我仍然发现错误消息非常令人困惑。

# html - 悬停时CSS链接和更改属性

> ID：14440374
> 
> 赞同：1
> 
> 时间：2013-01-21T14:07:56.710
> 
> 标签：html, css, hover

悬停时如何更改另一个类的属性。

如果我说我有 A 和 B 类，A 有悬停事件，如果我想在 A 悬停时更改 B 内部，我该怎么办？

```
A:hover {}

B{ color:#FFF; }

A:hover + B{ color:#000;  } didnt work 
```

**其实 CSS**

```
.has_child is inside of .navi

.navi > ul > li:hover 
+ .navi > ul > li > .has_child:after {
    color: #09F;
} 
```

**HTML**

```
 <nav class="navi ">
    <ul>
      <li style="height:8px; width:8px; padding:0px; margin:0px;">&nbsp;
      </li>
      <li>
        <a href="#" class="MM_no_child">General Config</a>
      </li>
      <li>
        <a href="#" class="MM_has_child">Menu</a>
        <ul>
          <li style="height:8px; width:8px; padding:0px; margin:0px;">&nbsp;
          </li>
          <li>
            <a href="#" class="MM_no_child">English</a>
          </li>
          <li>&nbsp;
          </li>
        </ul>
      </li>
      <li>
        <a href="#" class="MM_no_child">User Level</a>
      </li>
      <li>
        <a href="#" class="MM_no_child">User</a>
      </li>
      <li>
        <a href="#" class="MM_no_child">Tag</a>
      </li>
      <li>
        <a href="#" class="MM_no_child">Log</a>
      </li>
      <li>&nbsp;
      </li>
    </ul>
  </nav> 
```

非常感谢您的建议。

===============

**更新**

如果之前有 >，似乎 + 运算符将不起作用。

A:hover + B{ 颜色:#000; 会正常工作。

A:hover + C > B{ 颜色:#000; } 不管用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:11:09.953

为我工作。

![在此处输入图像描述](../Images/8b74f6007602db16a31f1b9e8ff57b60.png)

你应该检查你的选择器。你使用的是什么浏览器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:11:28.130

`.A`必须在里面`.B`

```
<div class="A">
    <div class="B">
        something
    </div>
</div> 
```

然后在您的样式表中：

```
.A:hover .B { some css code } 
```

# python - 如何使用 elementtree 将元素添加到 xml 文件

> ID：14440375
> 
> 赞同：13
> 
> 时间：2013-01-21T14:07:56.723
> 
> 标签：python, xml, elementtree

我有一个 xml 文件，我正在尝试向其中添加其他元素。xml 具有下一个结构：

```
<root>
  <OldNode/>
</root> 
```

我正在寻找的是：

```
<root>
  <OldNode/>
  <NewNode/>
</root> 
```

但实际上我得到了下一个 xml ：

```
<root>
  <OldNode/>
</root>

<root>
  <OldNode/>
  <NewNode/>
</root> 
```

我的代码如下所示：

```
file = open("/tmp/" + executionID +".xml", 'a')
xmlRoot = xml.parse("/tmp/" + executionID +".xml").getroot()

child = xml.Element("NewNode")
xmlRoot.append(child)

xml.ElementTree(root).write(file)

file.close() 
```

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T14:12:25.900

您打开了要追加的文件，这会将数据添加到末尾。使用`w`模式打开文件进行写入。更好的是，只需使用`.write()`ElementTree 对象上的方法：

```
tree = xml.parse("/tmp/" + executionID +".xml")

xmlRoot = tree.getroot()
child = xml.Element("NewNode")
xmlRoot.append(child)

tree.write("/tmp/" + executionID +".xml") 
```

使用该`.write()`方法还有一个额外的好处，即您可以设置编码、在需要时强制编写 XML 序言等。

如果您*必须*使用打开的文件来美化 XML，请使用`'w'`模式，`'a'`打开文件进行追加，从而导致您观察到的行为：

```
with open("/tmp/" + executionID +".xml", 'w') as output:
     output.write(prettify(tree)) 
```

`prettify`类似的东西在哪里：

```
from xml.etree import ElementTree
from xml.dom import minidom

def prettify(elem):
    """Return a pretty-printed XML string for the Element.
    """
    rough_string = ElementTree.tostring(elem, 'utf-8')
    reparsed = minidom.parseString(rough_string)
    return reparsed.toprettyxml(indent="  ") 
```

例如 minidom 美化技巧。

# configuration - spring ROO 的代理配置

> ID：14440379
> 
> 赞同：0
> 
> 时间：2013-01-21T14:08:07.567
> 
> 标签：configuration, proxy, java, spring-roo

我无法配置代理来下载依赖项：最初当我尝试构建项目时。收到消息超时。现在必须找到一个可以部分解决我的问题的配置文件。该文件是 jdk 目录内的 net.properties，我可以在其中指定代理服务器，但无法通过用户和密码进行身份验证。

知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:02:58.110

您可以尝试在`net.properties`文件中设置以下附加参数。

```
http.proxyUser=xxxxx
http.proxyPassword=xxxxx 
```

否则，您可以设置一个本地代理服务器（无需身份验证），该服务器支持对您正在使用的代理服务器进行身份验证并将您`net.properties`指向它。

干杯。

# javascript - 完成所有请求后如何调用函数

> ID：14440381
> 
> 赞同：5
> 
> 时间：2013-01-21T14:08:19.907
> 
> 标签：javascript, extjs

我有两个AJAX请求一个接一个-

```
var firstResult;
var secondResult;

FirstAjaxrequest({
        callback: function (options, success, response) {
            if(success)
            {
                firstResult = true;
            }
            else
            {
                firstResult = false;
            }
        }    
    });

SecondAjaxrequest({
     callback: function (options, success, response) {
            if(success)
            {
                secondResult= true;
            }
            else
            {
                secondResult= false;
            }
     }    
});

DisplayMessage(); // This function should display a message depending on     
                     FirstResult and secondResult 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T14:12:01.497

您可以为每个请求创建一个变量，表示请求成功。分别为每个请求更改此变量，当请求成功时，然后调用您的函数。

在您的函数中，只需检查两个变量，如果它们都为真，则两个请求都成功，否则至少有一个不成功，`if()`条件将为假。

```
var firstResult = false,
    secondResult = false;

FirstAjaxrequest({
    callback: function (options, success, response) {
        if(success) {
            firstResult = true;
            DisplayMessage();
        }
    }    
});

SecondAjaxrequest({
    callback: function (options, success, response) {
        if(success) {
            secondResult= true;
            DisplayMessage();
        }
    }    
});

function DisplayMessage(){
    if(firstResult && secondResult){
        //Both requests successful
    } else {
        //Either still waiting for a request to complete
        // or a request was not successful.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:14:10.437

在 EXTJS 中可能有更好的方法，但是一个普通的 JS 解决方案是

```
var firstResult;
var secondResult;
var reqCount = 2;
var returnedCount = 0;

function isDone () {
    returnedCount++
    if ( returnedCount === reqCount ) {
         console.log(firstResult, secondResult);
    }
}

FirstAjaxrequest({
        callback: function (options, success, response) {
            if(success)
            {
                firstResult = true;
            }
            else
            {
                firstResult = false;
            }
            isDone();
        }    
    });

SecondAjaxrequest({
     callback: function (options, success, response) {
            if(success)
            {
                secondResult= true;
            }
            else
            {
                secondResult= false;
            }
            isDone();
     }    
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T11:43:12.237

试试这个

```
FirstAjaxrequest({
            callback: function (options, success, response) {
                if(success)
                {
                    firstResult = true;
                }
                else
                {
                    firstResult = false;
                }
                SecondAjaxrequest({
                     callback: function (options, success, response) {
                            if(success)
                            {
                                secondResult= true;
                            }
                            else
                            {
                                secondResult= false;
                            }
                            DisplayMessage(); // Now we have access to first and second result as the 
                                             //as the second request is within the scope of the first request
                     },
                     scope: this // We can pass the first request to the second request as the context 
                });
            }    
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T14:13:46.877

在每个请求完成后，您应该检查是否收到另一个请求的结果。像这样的一些事情：

```
var result1 = null;
var result2 = null;
function DoAjax() {
    $.get(url1, {}, function (data) {
         result1 = data;
         DoSth();
    });
    $.get(url2, {}, function (data) {
         result2 = data;
         DoSth();
    });
}
function DoSth() {
    if(result1 != null && result2 != null) {
         //...
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T14:15:09.697

警告：jQuery 答案。我不确定是否`extjs`对 Deferreds 和 Promises 有类似的支持。

这是了解[jQuery Deferred](http://api.jquery.com/category/deferred-object/)的绝佳机会：

```
$.when(firstAjaxrequest(...), secondAjaxrequest(...))
.then(function (firstResult, secondResult) {
    ...
}); 
```

这假设您的`firstAjaxrequest`和`secondAjaxrequest`函数都返回`Deferred`或`Promise`对象，例如由`$.ajax`.

# insert - Mybatis中insert和commit是做什么的？

> ID：14440383
> 
> 赞同：0
> 
> 时间：2013-01-21T14:08:20.990
> 
> 标签：insert, mybatis, overhead

我对插入操作以及提交操作的开销进行了测试。代码片段如下：

```
long t2 = System.currentTimeMillis();
session.insert("mybatis_test.BlogMapper.insert", new BlogMapper(4, "shuaige"));

long t3 = System.currentTimeMillis();
session.insert("mybatis_test.BlogMapper.insert", new BlogMapper(6, "shuaigege"));
long t4 = System.currentTimeMillis();
session.insert("mybatis_test.BlogMapper.insert", new BlogMapper(7, "shuaigegege"));
long t5 = System.currentTimeMillis();
session.commit();
long t6 = System.currentTimeMillis(); 
```

System.out 片段如下：

```
System.out.println(t3-t2);
System.out.println(t4-t3);
System.out.println(t5-t4);
System.out.println(t6-t5); 
```

输出是：

869

1

1

205

正如我们在这里所看到的，第一个“插入”操作和提交操作占用了大部分开销。但是第一个插入做了什么，所以它需要很多开销？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:49:39.467

第一个插入打开断开连接。然后在会话期间重复使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:59:36.860

从技术上讲，“插入”将执行映射器中的任何操作.. 提交方法会将 sql 提交到数据库，没有它实际上不会插入任何内容，它可能会说（例如在 Eclipse 中）一切顺利，但是在db，除非它被提交，否则不会有任何东西。希望这有助于清除

# django - 是否可以在同一个supervisord上有2个django实例？

> ID：14440391
> 
> 赞同：1
> 
> 时间：2013-01-21T14:08:40.553
> 
> 标签：django, deployment, supervisord

我有一个 django 应用程序和它的两个实例在同一台服务器上运行：生产和登台。我使用 virtualenv，每个实例都有自己的环境。它们的配置如下：

*   **生产**(myapp.com)：服务器在端口 8001 上运行。Apache 代理 80 到 8001。
*   **暂存**(myapp.com:5000)：服务器在端口 5001 上运行。Apache 代理 5000 到 5001。

好吧，我手动安装了服务器，一切**正常**！

现在，我正在尝试使用 supervisor 来分别管理和部署它们，以便更好的组织和更轻松的部署。我得到的东西真的很奇怪！生产服务器工作正常，但登台服务器响应它是生产服务器！

如果我不使用 supervisord，我访问 myapp.com 和 myapp.com:5000 并分别查看生产和暂存代码运行。但是，当我使用 supervisord 时，我会在两者上看到生产代码。奇怪，**好像主管把请求发错了进程**……:S

有可能做我正在尝试的事情吗？在同一个 supervisor.conf 上运行 2 个网络服务器是否存在已知问题？请问有人有*什么*线索吗？=/

* * *

## supervisor.conf（相关部分）

```
;;;;;;;;;; supervisord configuration ;;;;;;;;;;
[supervisord]
logfile=/tmp/supervisord.log ; (main log file;default $CWD/supervisord.log)
logfile_maxbytes=50MB        ; (max main logfile bytes b4 rotation;default 50MB)
logfile_backups=10           ; (num of main logfile rotation backups;default 10)
loglevel=info                ; (log level;default info; others: debug,warn,trace)
pidfile=/tmp/supervisord.pid ; (supervisord pidfile;default supervisord.pid)
nodaemon=false               ; (start in foreground if true;default false)
minfds=1024                  ; (min. avail startup file descriptors;default 1024)
minprocs=200                 ; (min. avail process descriptors;default 200)
;umask=022                   ; (process file creation umask;default 022)
;user=chrism                 ; (default is current user, required if root)
;identifier=supervisor       ; (supervisord identifier, default is 'supervisor')
;directory=/tmp              ; (default is not to cd during start)
;nocleanup=true              ; (don't clean up tempfiles at start;default false)
;childlogdir=/tmp            ; ('AUTO' child log dir, default $TEMP)
;environment=KEY=value       ; (key value pairs to add to environment)
;strip_ansi=false            ; (strip ansi escape codes in logs; def. false)

;;;;;;;;;; applications configuration ;;;;;;;;;;
[program:staging]
command=python manage.py celeryd -B --loglevel=info --settings=settings.staging
command=python manage.py run_gunicorn --workers=2 --bind=127.0.0.1:5001 --settings=settings.staging
autostart=false

[program:production]
command=python manage.py celeryd -B --loglevel=info --settings=settings.production
command=python manage.py run_gunicorn --workers=2 --bind=127.0.0.1:8001 --settings=settings.production
autostart=false 
```

obs：用于初始化网络服务器的命令是上面程序部分中的命令。

* * *

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:31:26.927

我将使用主管描述我的设置以尝试阐明一些信息。我有一个管理 8 个站点的主管守护进程。在我的情况下，每个*程序*都是一个 uWSGI 进程（假设为 gunicorn）。每个进程都通过一个 UNIX 套接字进行通信。我有单独的 nginx 条目（假设 Apache）绑定到相应的套接字（uWSGI 进程建立）。同样，每个 nginx 条目都在 Web 服务器上它自己的端口上运行（可选地使用自定义主机名）。

主管的作用是管理进程的生命周期，基本上为每个注册进程提供一个控制点，名称为`production`. 我不认为问题在于主管*路由*到错误的进程，因为这不是它的作用。该`run_gunicorn`命令是在后台还是前台运行该进程？为了让主管管理该进程，它必须尚未被守护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:44:22.050

关于子流程的监督[文档](http://supervisord.org/subprocess.html#subprocess-environment)说：

> 子进程将继承用于启动 supervisord 程序的 shell 环境。

我的问题是我为每个实例都有单独的 virtualenvs，但 supervisord 进程首先使用生产进程初始化。所以是的，可以在同一个主管上拥有多个 django 实例，但不能在每个上使用不同的 virtualenvs。

# jquery - 为什么我的 jquery td 点击事件在 Chrome 上反应慢？

> ID：14440392
> 
> 赞同：1
> 
> 时间：2013-01-21T14:08:41.503
> 
> 标签：jquery, css, google-chrome, optimization

我有一张大桌子（大约 500 行和 7 列）。我的代码只需要检查我单击的表格单元格（它将类“保留”添加到单击的单元格，该类执行一些简单的边框操作）。

它在 Firefox 和 Opera 上运行顺利，但在 Chrome 上运行很糟糕（我的意思是我必须等待大约一秒钟才能改变单元格的边框） - 你能建议我解决它的方法吗？

第一个 IF 用于其他一些检查，但它只是检查这个特定单击单元格的状态。

```
$("td").click( function() 
{
    if($(this).attr('system') !=  1)
    {
        if($(this).attr("reserved") != "1" && $(this).attr("reserved") != "2")
        {
            if($(this).attr("_checked")=="1")
            {
                $(this).addClass("reserved"); // here it changes border color
            }

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:12:51.543

您可以尝试缓存选择器：

```
$("td").click( function() 
{
    var $this = $(this);

    if($this.attr('system') !=  1)
    {
        if($this.attr("reserved") != "1" && $this.attr("reserved") != "2")
        {
            if($this.attr("_checked")=="1")
            {
                $this.addClass("reserved"); // here it changes border color
            }

        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:13:52.703

首先，您可以尝试像这样“压平”这种情况：

```
$("td").click( function() 
{
    if ($(this).attr('system') != 1 &&
        $(this).attr("reserved") != "1" &&
        $(this).attr("reserved") != "2" &&
        $(this).attr("_checked") == "1")
    {
        $(this).addClass("reserved"); // here it changes border color
    }
} 
```

看看它是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:59:33.660

我建议使用委托事件，因为当必须监视许多元素时，它们的开销要少得多。

```
$('#yourTableID').on('click', 'td', function(event) {

  .. 

}); 
```

# python - 在 python 中使用 OpenCV 2.4.0 创建视频

> ID：14440400
> 
> 赞同：13
> 
> 时间：2013-01-21T14:09:14.807
> 
> 标签：python, video, opencv

我正在尝试使用`OpenCV 2.4.0`in创建视频`python 2.7.2`。但是`avi`文件大小为0。

我的代码：

```
from cv2 import *

im1 = cv.LoadImage("1.jpg")

fps = 20
frame_size = cv.GetSize(im1)

#writer = cv.CreateVideoWriter("out.avi", CV_FOURCC('M', 'J', 'P', 'G'), fps, frame_size, True)

v = VideoWriter()

v.open("out.avi", cv.CV_FOURCC('F', 'M', 'P', '4'), fps, (800,600), True)
print v.isOpened() 
```

`isOpened()`总是回来`false`。

另一个尝试：

```
#!/usr/bin/env python
import sys

from cv2 import *

im1 = cv.LoadImage("1.jpg")

if not im1:
    print "Error loading image"

im2 = cv.LoadImage("2.jpg")

if not im1:
    print "Error loading image"

fps = 20
frame_size = cv.GetSize(im1)

writer = cv.CreateVideoWriter("out.avi", cv.CV_FOURCC('M', 'J', 'P', 'G'), fps, frame_size, True)

if not writer:
    print "Error in creating video writer"
    sys.exit(1)
else:
    cv.WriteFrame(writer, im1)
    cv.WriteFrame(writer, im2)

del writer 
```

没有错误，但输出为空。

我错过了什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-05-23T03:28:58.370

```
import cv2

img1 = cv2.imread('1.jpg')
img2 = cv2.imread('2.jpg')
img3 = cv2.imread('3.jpg')

height , width , layers =  img1.shape

video = cv2.VideoWriter('video.avi',-1,1,(width,height))

video.write(img1)
video.write(img2)
video.write(img3)

cv2.destroyAllWindows()
video.release() 
```

你想做的一个简单的代码。详情[请看这里](http://docs.opencv.org/doc/tutorials/highgui/video-write/video-write.html#videowritehighgui)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-31T19:55:25.787

找到了这个代码，它对我有用（产生有色噪声）：

```
writer = cv2.VideoWriter("output.avi", cv2.VideoWriter_fourcc(*"MJPG"), 30,(640,480))
for frame in range(1000):
    writer.write(np.random.randint(0, 255, (480,640,3)).astype('uint8'))
writer.release() 
```

来源：[https ://github.com/ContinuumIO/anaconda-issues/issues/223#issuecomment-285523938](https://github.com/ContinuumIO/anaconda-issues/issues/223#issuecomment-285523938)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-11T03:00:13.127

```
height, width, layers = img.shape
out = cv2.VideoWriter("output.avi", cv2.VideoWriter_fourcc(*"XVID"), 30,(width,height))
out.write(img)
out.release() 
```

# c# - 命名空间等中不存在类型或命名空间名称

> ID：14440401
> 
> 赞同：3
> 
> 时间：2013-01-21T14:09:18.643
> 
> 标签：c#, .net, visual-studio, reference

视觉工作室 2012。

我有两个项目 A 和 B。A 是控制台应用程序。A 的默认命名空间是“PayT”。B 是类库类型，sAssembly 名称是“RetentionPolicyManager”，B 的默认命名空间是“RetentionPolicyManager”。

现在在项目 A 中，我添加了 B 的引用，即 RetentionPolicyManager.dll。

在一类 A 中，有一行：

```
using PayT.RetentionPolicyManager; 
```

但是，当我重建解决方案时，我总是遇到错误：

> *命名空间“PayT”中不存在类型或命名空间名称“RetentionPolicyManager”（您是否缺少程序集引用？）*

如果我不构建解决方案，它似乎没问题并且没有错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T14:14:55.287

几个月前我遇到了同样的问题。问题是**两个项目没有针对相同的平台**，即针对控制台应用程序`.Net framework 4.0 Client Profile`而针对库`full .Net framework 4.0`。

通过针对两个项目的完整 .Net 4.0 框架进行修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:11:40.517

那是因为`RetentionPolicyManager`它不存在`PayT`它是它自己的命名空间在一个单独的 dll 中，你只需要：

```
 using RetentionPolicyManager 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:12:06.910

根据你的描述，应该是：

`using RetentionPolicyManager;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T14:12:11.903

在`A`刚刚使用：

```
using RetentionPolicyManager; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T14:13:15.817

B 的命名空间是`RetentionPolicyManager`，`PayT`是程序集 A 的命名空间。`PayT`从 using 语句中删除。

```
using RetentionPolicyManager; 
```

# wpf - Xaml windows phone 中的绑定错误

> ID：14440407
> 
> 赞同：0
> 
> 时间：2013-01-21T14:09:38.337
> 
> 标签：wpf, windows-phone-7, xaml, binding, windows-phone-8

如果我使用此代码：

```
<ScrollViewer HorizontalScrollBarVisibility="Disabled"
              VerticalScrollBarVisibility="Auto" Margin="25, 0, 0, 0"
              Grid.Row="0">
  <phone:WebBrowser DataContext="{Binding Path=Descrption}"
                    x:Name="webBrowserHTML" Foreground="Black" 
                    Loaded="webBrowserHTML_Loaded" />
</ScrollViewer> 
```

我可以将 webbrower 的数据上下文与描述绑定，但是当我添加这样的堆栈面板时，绑定失败！

```
 <ScrollViewer HorizontalScrollBarVisibility="Disabled" 
               VerticalScrollBarVisibility="Auto" Margin="25, 0, 0, 0"
               Grid.Row="0">
   <StackPanel>
     <phone:WebBrowser DataContext="{Binding Path=Descrption}"
                       x:Name="webBrowserHTML" Foreground="Black"
                       Loaded="webBrowserHTML_Loaded" />
   </StackPanel>
 </ScrollViewer> 
```

请问有什么解决办法吗？？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:32:36.460

X-Ref[在滚动查看器中添加按钮和网络浏览器](https://stackoverflow.com/questions/14438144/add-a-button-and-a-webbrowser-in-a-scrollviewer)

如果绑定失败，加载的事件将不会触发。是这种情况还是事件触发但没有显示？我怀疑是后者。

问题是`StackPanel`没有固有大小，因此它不知道要绘制多大`WebBrowser`。您可以通过设置要呈现的 WebBrowser 控件的显式高度来解决此问题。

```
<StackPanel>
    <phone:WebBrowser DataContext="{Binding Path=Descrption}" 
                      x:Name="webBrowserHTML" Foreground="Black"
                      Height="1000"
                      Loaded="webBrowserHTML_Loaded" />
</StackPanel> 
```

# android - 在安卓中打印

> ID：14440417
> 
> 赞同：0
> 
> 时间：2013-01-21T14:09:59.317
> 
> 标签：android

如何在不使用 android play 商店提供的任何应用程序的情况下从 android 平板电脑打印。我想通过在我的活动中单击一个按钮从 webview 打印。因此，例如，如果我在我的活动中单击打印按钮，它应该只打印 webview 的当前内容，而不询问/带我进入设置选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-10T17:38:58.930

如果我可以添加一些东西.. 新的 Android 附带一个内置的打印框架，如 Android 4.4 页面所述。

> Android 现在包含一个完整的框架，允许用户使用通过 Wi-Fi、蓝牙或其他服务连接的打印机打印任何文档。系统处理想要打印文档的应用程序和将打印作业传送到打印机的服务之间的事务。android.print 框架提供了指定打印文档并将其交付给系统进行打印所需的所有 API。对于给定的打印作业，您实际需要哪些 API 取决于您的内容。

坏消息是**它仅适用于 API 19 及更高版本**。因此，如果您的目标是 >= Android 4.4 版本（根据[Androiddistribution.com](http://androiddistribution.com/) ，目前为 1.8% ），只需坚持使用 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:42:19.837

Android 没有内置的打印支持，因此除非您的意思是打印到 ，否则`OutputStream`这是不可能的。这意味着您仍然需要一些`Google Play`应用程序，例如[PrinterShare](https://play.google.com/store/apps/details?id=com.dynamixsoftware.printershare)或[Cloud Print](https://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCsQFjAA&url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.pauloslf.cloudprint%26hl%3Den&ei=pFP9UMizLIaJ0AXz2YGQDQ&usg=AFQjCNH2XZ1M-FS1TB91zLZaGSyn-jkQkQ)。

*简短回答：**不可能***

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-01-28T11:23:25.923

使用 OTG 电缆的 Android 直接 USB 打印可通过一个小型库获得。见链接[http://myhowtohelp.blogspot.in/2014/01/library-to-print-from-android-device-usb.html](http://myhowtohelp.blogspot.in/2014/01/library-to-print-from-android-device-usb.html)

# android - Android：从另一个 xml 引用 xml

> ID：14440420
> 
> 赞同：1
> 
> 时间：2013-01-21T14:10:19.970
> 
> 标签：android, xml, android-layout, android-xml

我正在尝试在 android 中设置选项卡布局。在 ID 为“tab1”的布局中，有什么方法可以引用另一个 xml 文件？我只是不想有一个巨大的凌乱的单个文件。相反，我想在每个布局中引用一个不同的文件，ID 为“tab1”、“tab2”和“tab3”。

这是标签布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>
</TabHost>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T14:19:27.037

您可以使用 android 的标签添加其他 xml 文件`include`，如下所示：

假设下面的布局在名为 layout1.xml 的 xml 中：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical" >
    <TextView android:id="@+id/text"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="Hello, I am a TextView" />
    <Button android:id="@+id/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Hello, I am a Button" />
</LinearLayout> 
```

然后我们可以将上面的xml添加到另一个布局xml中，可能还有其他的widget，如下图：

```
<include layout="@layout/layout1" /> 
```

[这里](http://developer.android.com/training/improving-layouts/reusing-layouts.html)是android开发站点的参考

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:16:25.217

看看 <include /> 标签。 [Android 包含标签](http://developer.android.com/training/improving-layouts/reusing-layouts.html#Include)

# android - 如何在 Google Maps API V2 中锁定相机

> ID：14440421
> 
> 赞同：10
> 
> 时间：2013-01-21T14:10:24.293
> 
> 标签：android, google-maps-android-api-2, screen-lock

我正在尝试锁定相机，以便用户无法移动地图。有什么可用的方法吗？我试图找到它，但直到现在我还没有找到它。我也试图找到任何相关的问题。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-21T14:13:49.140

采用

`mapFragment.getMap().getUiSettings().setScrollGesturesEnabled(false);`

禁止地图滚动。

您还可以使用`setAllGesturesEnabled(false);`（还有旋转和倾斜手势...）有关更多方法，请参阅文档：[https ://developers.google.com/android/reference/com/google/android/gms/maps/UiSettings](https://developers.google.com/android/reference/com/google/android/gms/maps/UiSettings)

# java - 这个仪器怎么做

> ID：14440422
> 
> 赞同：3
> 
> 时间：2013-01-21T14:10:24.523
> 
> 标签：java, classloader, bytecode, instrumentation

我的系统上运行着不同的 Java 应用程序，并希望从这些应用程序之一中检测类

在尝试使用动态加载的 Java 代理执行此操作时，我发现我们可以将它附加到一个`jvm`需要`vm` `id`该实例的实例，当我通过从 Windows 任务管理器搜索代理 jar 不附加到该进程来`jvm`放置一个已经运行的 Java 应用程序时`pid`并抛出错误。

使用返回`ManagementFactory.getRuntimeMXBean()`的过程执行此操作`id()`时，实例加载`agent.jar`. 请建议如何访问`vmid`一个不同的`jvm`实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:08:21.893

您可以使用脚本来执行**JPS**命令并提取有关正在运行的 VM 实例的信息。

jps 命令还使用具有[activeVms()](http://openjdk.java.net/groups/serviceability/jvmstat/sun/jvmstat/monitor/MonitoredHost.html#activeVms%28%29)方法的[MonitoredHost API。](http://openjdk.java.net/groups/serviceability/jvmstat/sun/jvmstat/monitor/MonitoredHost.html)

# magento - Magento，魔术吸气剂v getData

> ID：14440424
> 
> 赞同：6
> 
> 时间：2013-01-21T14:10:37.347
> 
> 标签：magento

我已经使用 magento 一段时间了，总是无法在使用魔法 getter 和 getData() 之间做出决定

有人可以解释主要区别，除了轻微的性能开销（而且它必须非常轻微）。

我在考虑：

1.  未来的代码证明（我认为 magento 2 不会使用魔法吸气剂）
2.  风格上
3.  表现
4.  稳定
5.  任何其他使用 1 的理由

基于核心代码没有明确的方法，因为它混合使用了两者

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T11:58:48.747

没有一个适合所有情况的答案，最好根据您使用的模型和特定用例来决定。

魔术方法的性能很差，而且在每个访问器上从 CamelCase 转换为 under_score 的额外开销。

无论如何，魔术方法基本上是 getData() 的包装器，具有额外的开销。

不过，使用魔法方法有一个优点，例如：

如果您使用 getAttributeName() 而不是 getData('attribute_name')

在未来的某个时候，模型可能会更新为包含一个真实的、具体的 getAttributeName() 方法，在这种情况下，您的代码仍然可以正常工作。但是，如果您使用了 getData()，则可以直接访问该属性，并绕过新方法，其中可能包括一些您正在绕过的重要计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:20:59.370

在我看来，最安全的方法是始终使用`getData($key)`. 魔术吸气剂使用您已经指出的相同方法。优点是您可以在代码中找到对 getData 的所有引用，并在`getData()`方法被重构时适当地更改它。将其与必须找出所有名称总是不同的魔术方法调用进行比较。第二件事是，当你有一个以相同方式命名的方法时，魔法 getter 很容易把你搞砸（我认为 getName() 得到了我一次，它需要相当长的时间来调试）。所以我的投票肯定是使用`getData()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T18:50:57.147

如前所述，最好使用`getData`魔术方法。只是想添加2个快速点：

1）性能开销不是那么小，特别是因为`_underscore`在 Varien_Object 中的实现（正如 Andrew 所提到的）。

2) getData 的实现有一些有助于“美化”代码的逻辑，虽然它比典型的 getData 调用慢*一点*，但仍然比魔术方法快得多。

如果您有嵌套`Varien_Object`的，那么您需要执行如下调用：

```
$firstObject->getData('second_object')->getData('third_object')->getData('some_string'); 
```

您还可以像这样执行该调用：

```
$firstObject->getData('second_object/third_object/some_string'); 
```

# resize - 调整 Foundation 的轨道滑块大小

> ID：14440426
> 
> 赞同：2
> 
> 时间：2013-01-21T14:10:45.117
> 
> 标签：resize, slider, zurb-foundation, orbit

早上好！

我正在开发一个原型，我想知道改变 Foundation 轨道滑块宽度但仍保持其响应能力的“正确”方法。

目前 - 我已将滑块容器的宽度更改为较小的百分比 (73%) - 但是当以移动设备大小查看时，它似乎不太正确。更不用说箭头已经向上浮动了，我宁愿不破解一些 css 来让它们正确定位。

Orbit CSS： http: [//naivestudio.net/win-prototype/prototype/orbit.php](http://naivestudio.net/win-prototype/prototype/orbit.php)（仅针对这个问题放在单独的页面上 - 将在 app.css 文件中进行更改）

索引页面中的 HTML - 请注意视频位于滑块之外，但我会将其浮动在标题容器中的旁边。

```
<div id="headcontain" class="row">
    <div id="featured">
    <img src="http://placehold.it/700x300&text=Slide1">
    <img src="http://placehold.it/700x300&text=Slide2">
    <img src="http://placehold.it/700x300&text=Slide3">
    <img src="http://placehold.it/700x300&text=Slide4">
    <img src="http://placehold.it/700x300&text=Slide5">
    </div>
<img src="http://placehold.it/235x300&text=Video">
</div> 
```

Javascript

```
<!-- Include Orbit -->
<script src="foundation/javascripts/jquery.foundation.orbit.js"></script>
<script type="text/javascript">
   window).load(function() {
   $("#featured").orbit( { 
   timer: false
   });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:44:52.393

调整轨道滑块大小的正确方法是将其包装在一个带有类的 div 中，该类指定您希望它跨越多少列。通过更改容器延伸的列数，框架将自动调整滑块的大小。如果您使用foundation 4 或更高版本，则在指定列数时需要使用它们的新语法“large-(#)”或“small-(#)”。

你说过在小分辨率下它看起来不正确，如果你使用的是 Foundation 4+，你可以使用大尺寸和小尺寸调用的组合来影响它在大分辨率和小分辨率上的显示方式；以下示例将在较大分辨率下跨越 12 列，而在达到较小分辨率时仅跨越 3 列。

## Foundation 4+ 的情境分辨率大小示例：

```
<div class="large-12 small-3 columns"> 
```

## Foundation 4+ 的完整示例：

```
<div id="headcontain" class="row">
    <div class="large-12 small-3 columns">
        <div id="featured">
          <img src="http://placehold.it/700x300&text=Slide1">
          <img src="http://placehold.it/700x300&text=Slide2">
          <img src="http://placehold.it/700x300&text=Slide3">
          <img src="http://placehold.it/700x300&text=Slide4">
          <img src="http://placehold.it/700x300&text=Slide5">
        </div><!--/featured-->
        <img src="http://placehold.it/235x300&text=Video">
    </div><!--/large12-->
</div><!--/headcontain--> 
```

## 基础 3- 的完整示例：

```
<div id="headcontain" class="row">
    <div class="twelve columns">
        <div id="featured">
          <img src="http://placehold.it/700x300&text=Slide1">
          <img src="http://placehold.it/700x300&text=Slide2">
          <img src="http://placehold.it/700x300&text=Slide3">
          <img src="http://placehold.it/700x300&text=Slide4">
          <img src="http://placehold.it/700x300&text=Slide5">
        </div><!--/featured-->
        <img src="http://placehold.it/235x300&text=Video">
    </div><!--/twelveColumns-->
</div><!--/headcontain--> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-05T16:44:20.047

从 v6.5.3 开始，这似乎还没有解决，但看起来在 v7 中会有修复。[Github](https://github.com/zurb/foundation-sites/issues/7815)上的更多信息英雄。

# c# - 为什么我的应用程序在我的开发环境中返回 IIS 404 页面，而不是测试或生产环境？

> ID：14440429
> 
> 赞同：1
> 
> 时间：2013-01-21T14:11:10.263
> 
> 标签：c#, iis, http-status-code-404

[好的，所以我在http://dev.myapplication.com](http://dev.myapplication.com)本地开发我的应用程序（使用主机文件作为 DNS），然后我有[http://test.myapplication.com](http://test.myapplication.com)和[http://www.myapplication.com](http://www.myapplication.com) .

在 IIS 7（相同版本，开发测试和实时版本）中，我打开了“错误页面”并编辑了 404 状态代码以转到路径“/en/404.mvc”。这在本地工作，我可以导航到产生 404 页面的[http://dev.myapplication.com/non-existent-url.mvc 。](http://dev.myapplication.com/non-existent-url.mvc)

但是，如果我导航到[http://dev.myapplication.com/non-existent-url](http://dev.myapplication.com/non-existent-url)（即静态地址），它会显示 IIS 404 页面并说它是由静态文件处理程序而不是我的 mvc 文件处理程序处理的。

我对为什么会发生这种情况感到困惑，因为它已经成功地修改了我的 web.config，这反过来又允许它在测试和生活中工作，而不是在本地工作。即[http://www.myapplication.com/404](http://www.myapplication.com/404)将显示我自定义的 404 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:30:21.460

您需要一个通配符映射来通过 aspnet_isapi 运行所有请求 - 这篇文章很好地解释了它：[http ://www.asp.net/mvc/tutorials/older-versions/deployment/using-asp-net-mvc-with-different- iis-cs 版本](http://www.asp.net/mvc/tutorials/older-versions/deployment/using-asp-net-mvc-with-different-versions-of-iis-cs)

另外，检查您的 web.Config 是否有以下设置：

```
<system.webServer>
  <validation validateIntegratedModeConfiguration="false"/>
  <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

# c# - 从内存中删除流文档对象

> ID：14440430
> 
> 赞同：1
> 
> 时间：2013-01-21T14:11:14.200
> 
> 标签：c#, memory-management, memory-leaks, flowdocument

注意：问题可能与[此](https://stackoverflow.com/questions/952985/flowdocument-memory-issue-in-c-sharp)重复，仍然发布以获取有关此问题的更新。

我正在组件中创建多个（超过 1000k，不是在循环中而是在需要时）流文档对象，并且由于内存不足异常导致应用程序崩溃。使用 .NET 探查器后，我发现多个对象仍在记忆。

我创建了一个用于模拟的测试应用程序以获取详细信息。我发现这些对象在使用后就在内存中（WinDbg 帮助我识别了这一点）。简而言之，如果创建了 5000 个 FlowDocument 对象，即使在间隔 1 秒后调用 GC.Collect 后，我​​发现仍然为应用程序分配了 ~600MB。只有在关闭应用程序后才会释放内存。

有没有人找到清除分配给 FlowDocument 的内存的解决方案？

代码如下

```
private void CreateObjects()
{

    for (int index = 0; index < 5000; index++)
    {
        FlowDocument fd = new FlowDocument();
        //Opacity is accessed just to use any property of object. It does not have any significance.
        var ff = fd.Foreground.Opacity;
    }

} 
```

如上所述，我也在 1 秒后调用 GC.Collect 以释放内存。如果我不调用 GC.Collect，大约 1.2 GB 内存会分配给应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:17:59.560

在您所说的问题中，您正在雇用`WinDbg`. 使用`WinDbg`，您可以找到这些对象的引用并尝试在代码中删除它们。请参阅[诊断 .net 内存泄漏](http://blogs.msdn.com/b/delay/archive/2009/03/11/where-s-your-leak-at-using-windbg-sos-and-gcroot-to-diagnose-a-net-memory-leak.aspx)

此外，流文档对象或流文档对象的属性可能正在使用非托管资源，这些资源应由实现`IDisposable`接口释放；如需进一步的建议，您需要共享代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T13:40:54.320

尽量不要在每个循环中分配变量

```
private void CreateObjects()
{
    FlowDocument fd;
    for (int index = 0; index < 5000; index++)
    {
        fd = new FlowDocument();
        //Opacity is accessed just to use any property of object. It does not have any significance.
        var ff = fd.Foreground.Opacity;
    }
} 
```

# interop - libspotify 中曲目的生命周期

> ID：14440431
> 
> 赞同：2
> 
> 时间：2013-01-21T14:11:19.597
> 
> 标签：interop, spotify, libspotify

使用 libspotify 时，我通过浏览播放列表并获取有关曲目的信息来响应有关播放列表更改的回调。

当我获得轨道句柄时，该轨道句柄何时失效？我可以假设在会话中，轨道句柄的给定值将始终引用相同的轨道吗？我是否需要手动增加和减少曲目的引用数才能确定？

谢谢汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:30:25.097

根据[文档](https://developer.spotify.com/technologies/libspotify/docs/12.1.45/)：

> 引用计数用于 libspotify 中的所有域对象。包括字符串 create 的函数将返回一个具有预先增加的引用计数的对象。因此，当不再需要该值时，每个创建都必须有相应的释放。
> 
> 另一方面，其他访问器函数（包括 sp_link_as_artist 等）返回从从中检索它的对象借用的引用。从 sp_link 中检索 sp_album 将使专辑对象在链接对象被释放之前一直存在，除非它的引用计数显式增加。

因此，如果您通过调用`sp_playlist_track`（不包含字符串`create`）获得曲目句柄，则曲目引用归播放列表所有。只有当您确定播放列表句柄有效并且您确定播放列表仍包含该曲目时，您才能确定它仍然有效，除非您手动增加其引用计数。

类似地，从播放列表容器中获得的播放列表只能与容器一样长，并且可能不会长。

实际上，我认为您应该在从回调返回或再次调用 sp_session_process_events 之前添加对轨道的引用。在此之前依靠父对象保持活动状态很好，但在那之后就很难推理了，所以只需添加一个引用，然后在完成后释放它。

# android - 使用 PhoneGap 阻止电话号码列表

> ID：14440438
> 
> 赞同：0
> 
> 时间：2013-01-21T14:11:32.870
> 
> 标签：android, cordova, blackberry

我进行了很多研究，但我没有在 Google 上找到任何使用**phonegap**阻止电话号码的内容。

如果呼叫特定号码，是否可以阻止这些号码或显示为忙碌，请提供任何代码

# android - android SimpleDateFormat("dd/mm/yyyy") 不能正常工作

> ID：14440442
> 
> 赞同：3
> 
> 时间：2013-01-21T14:11:52.123
> 
> 标签：android, date, simpledateformat

我有这个功能

```
private void setDateInTopBar() {
        Date bodyPartDate = DataManager.instance().getSelectedBodyPart().getPublicationDate();
        SimpleDateFormat format = new SimpleDateFormat("dd/mm/yyyy");
        String formattedDate = format.format(bodyPartDate);
        TextView dateTxt = (TextView) findViewById(R.id.txtImageDate);
        dateTxt.setText(formattedDate);
    } 
```

但是我的月份是0，当日和年运行良好时，有什么问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-21T14:13:10.887

代替：

```
 SimpleDateFormat format = new SimpleDateFormat("dd/mm/yyyy"); 
```

和：

```
SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy"); 
```

作为`mm`参考分钟..检查[http://developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:14:30.940

请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

小写的 m 代表分钟。

试试：“dd/MM/yyyy”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T14:13:10.000

我不应该`MM`在`mm`这里设置

`SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy");`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T21:57:06.117

`mm` 表示分钟，所以你不应该用它来表示月份，`mm`改为`MM`. 您的代码必须是这样的：

```
SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy"); 
```

而不是这个：

```
SimpleDateFormat format = new SimpleDateFormat("dd/mm/yyyy"); 
```

[你可以在这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)阅读所有关于这些信件的内容

# javascript - 使用 jquery 从批量文本中提取所有电子邮件地址

> ID：14440444
> 
> 赞同：43
> 
> 时间：2013-01-21T14:11:58.283
> 
> 标签：javascript, jquery, regex, text-extraction, email-address

我在下面有这段文字：

```
sdabhikagathara@rediffmail.com, "assdsdf" <dsfassdfhsdfarkal@gmail.com>, "rodnsdfald ferdfnson" <rfernsdfson@gmail.com>, "Affdmdol Gondfgale" <gyfanamosl@gmail.com>, "truform techno" <pidfpinfg@truformdftechnoproducts.com>, "NiTsdfeSh ThIdfsKaRe" <nthfsskare@ysahoo.in>, "akasdfsh kasdfstla" <akashkatsdfsa@yahsdfsfoo.in>, "Bisdsdfamal Prakaasdsh" <bimsdaalprakash@live.com>,; "milisdfsfnd ansdfasdfnsftwar" <dfdmilifsd.ensfdfcogndfdfatia@gmail.com> 
```

此处电子邮件由`,`或分隔`;`。我想提取上面存在的所有电子邮件并将它们存储在数组中。有没有简单的方法使用正则表达式直接获取所有电子邮件？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-01-21T14:25:44.940

以下是您可以解决的方法：

**HTML**

```
<p id="emails"></p> 
```

**JavaScript**

```
var text = 'sdabhikagathara@rediffmail.com, "assdsdf" <dsfassdfhsdfarkal@gmail.com>, "rodnsdfald ferdfnson" <rfernsdfson@gmal.com>, "Affdmdol Gondfgale" <gyfanamosl@gmail.com>, "truform techno" <pidfpinfg@truformdftechnoproducts.com>, "NiTsdfeSh ThIdfsKaRe" <nthfsskare@ysahoo.in>, "akasdfsh kasdfstla" <akashkatsdfsa@yahsdfsfoo.in>, "Bisdsdfamal Prakaasdsh" <bimsdaalprakash@live.com>,; "milisdfsfnd ansdfasdfnsftwar" <dfdmilifsd.ensfdfcogndfdfatia@gmail.com> datum eternus hello+11@gmail.com';    

function extractEmails (text)
{
    return text.match(/([a-zA-Z0-9._+-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);
}

$("#emails").text(extractEmails(text).join('\n')); 
```

**结果**

```
sdabhikagathara@rediffmail.com,dsfassdfhsdfarkal@gmail.com,rfernsdfson@gmal.com,gyfanamosl@gmail.com,pidfpinfg@truformdftechnoproducts.com,nthfsskare@ysahoo.in,akashkatsdfsa@yahsdfsfoo.in,bimsdaalprakash@live.com,dfdmilifsd.ensfdfcogndfdfatia@gmail.com,hello+11@gmail.com 
```

* * *

来源：[从批量文本中提取电子邮件（使用正则表达式、JavaScript 和 jQuery）](http://snipplr.com/view/26466/)

**[演示 1 在这里](http://jsfiddle.net/leniel/VS7Qe/915/)**

**[Demo 2 这里](http://jsfiddle.net/leniel/VS7Qe/923/)**使用 jQuery 的 each 迭代器函数

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-21T14:15:12.490

您可以使用此正则表达式：

```
var re = /(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/g; 
```

您可以像这样提取电子邮件：

```
('sdabhikagathara@rediffmail.com, "assdsdf" <dsfassdfhsdfarkal@gmail.com>, "rodnsdfald ferdfnson" <rfernsdfson@gmail.com>, "Affdmdol Gondfgale" <gyfanamosl@gmail.com>, "truform techno" <pidfpinfg@truformdftechnoproducts.com>, "NiTsdfeSh ThIdfsKaRe" <nthfsskare@ysahoo.in>, "akasdfsh kasdfstla" <akashkatsdfsa@yahsdfsfoo.in>, "Bisdsdfamal Prakaasdsh" <bimsdaalprakash@live.com>,; "milisdfsfnd ansdfasdfnsftwar" <dfdmilifsd.ensfdfcogndfdfatia@gmail.com>').match(re);

//["sdabhikagathara@rediffmail.com", "dsfassdfhsdfarkal@gmail.com", "rfernsdfson@gmail.com", "gyfanamosl@gmail.com", "pidfpinfg@truformdftechnoproducts.com", "nthfsskare@ysahoo.in", "akashkatsdfsa@yahsdfsfoo.in", "bimsdaalprakash@live.com", "dfdmilifsd.ensfdfcogndfdfatia@gmail.com"] 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-05-01T15:25:58.493

只是对已接受答案的更新。这不适用于电子邮件地址中的“加号”符号。GMAIL 支持邮箱地址+randomtext@gmail.com。

我已更新为：

```
return text.match(/([a-zA-Z0-9._+-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-29T13:06:24.010

[根据Regexr.com](https://regexr.com)，波纹管功能符合**RFC2822**

ES5：

```
var extract = function(value) {
   var reg = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g;
   return value && value.match(reg);
} 
```

ES6：

```
const reg = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g
const extract = value => value && value.match(reg) 
```

[正则表达式社区源](https://regexr.com/2rhq7)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-21T14:16:17.270

你不需要 jQuery。JavaScript 本身支持内置的正则表达式。

查看正则表达式以获取有关在 JavaScript 中使用正则[表达式的更多信息。](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

除此之外，我认为您会在 Stack Overflow 的其他地方找到您问题的确切答案 -[如何从 javascript 中的字符串中找出电子邮件和姓名](https://stackoverflow.com/questions/2364779/how-to-find-out-emails-and-names-out-of-a-string-in-javascript)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-21T14:16:55.887

```
function GetEmailsFromString(input) {
  var ret = [];
  var email = /\"([^\"]+)\"\s+\<([^\>]+)\>/g

  var match;
  while (match = email.exec(input))
    ret.push({'name':match[1], 'email':match[2]})

  return ret;
}

var str = '"Name one" <foo@domain.com>, ..., "And so on" <andsoon@gmx.net>'
var emails = GetEmailsFromString(str) 
```

[来源](https://stackoverflow.com/questions/2364779/how-to-find-out-emails-and-names-out-of-a-string-in-javascript)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-02T11:39:50.213

```
 const = regex = /\S+[a-z0-9]@[a-z0-9\.]+/img
"hello sean@example.com how are you? do you know bob@example.com?".match(regex) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-29T21:55:27.277

这里的一堆答案包括小写/大写字母`[a-zA-Z]`和不敏感的正则表达式标志`i`，这是无稽之谈。

*   `i`修饰符：不敏感。不区分大小写的匹配（忽略 [a-zA-Z] 的大小写）。
*   `\d`匹配一个数字（相当于`[0-9]`），因为域扩展不以数字字符结尾）。

结果，与`\d`令牌结合。我们得到一个更加简洁和优雅的句子。

```
/[a-z\d._+-]+@[a-z\d._-]+/gi 
```

## 演示

```
let input = 'sdabhikagathara@rediffmail.com, "assdsdf" <dsfassdfhsdfarkal@gmail.com>, "rodnsdfald ferdfnson" <rfernsdfson@gmail.com>, "Affdmdol Gondfgale" <gyfanamosl@gmail.com>, "truform techno" <pidfpinfg@truformdftechnoproducts.com>, "NiTsdfeSh ThIdfsKaRe" <nthfsskare@ysahoo.in>, "akasdfsh kasdfstla" <akashkatsdfsa@yahsdfsfoo.in>, "Bisdsdfamal Prakaasdsh" <bimsdaalprakash@live.com>,; "milisdfsfnd ansdfasdfnsftwar" <dfdmilifsd.ensfdfcogndfdfatia@gmail.com>'

function get_email(string) {
  return string.match(/[a-z\d._+-]+@[a-z\d._-]+/gi)
};

$('#output').html(get_email(input).join('; '));
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="output"></div>
```

*   现场观看@https [://regex101.com/r/OveC5B/1/](https://regex101.com/r/OveC5B/1/)

# c# - 查找具有特定属性的所有类

> ID：14440450
> 
> 赞同：9
> 
> 时间：2013-01-21T14:12:10.857
> 
> 标签：c#, attributes

> **可能重复：**
> [查找具有特定属性的所有类](https://stackoverflow.com/questions/720157/finding-all-classes-with-a-particular-attribute)

在程序集中，我想获取特定类属性的所有实例。换句话说，我想拥有具有特定属性的类列表。

通常，您将拥有一个可以使用该`GetCustomAttributes`方法获取属性的类。

是否有可能列出谁具有特定属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:15:54.250

```
public static IEnumerable<Type> GetTypesWithMyAttribute(Assembly assembly)
{
    foreach(Type type in assembly.GetTypes())
    {
        if (Attribute.IsDefined(type, typeof(MyAttribute)))
            yield return type;
    }
} 
```

或者：

```
public static List<Type> GetTypesWithMyAttribute(Assembly assembly)
{
    List<Type> types = new List<Type>();

    foreach(Type type in assembly.GetTypes())
    {
        if (type.GetCustomAttributes(typeof(MyAttribute), true).Length > 0)
            types.Add(type);
    }

    return types;
} 
```

Linq VS 我的方法基准（100000 次迭代）：

```
Round 1
My Approach:     2088ms
Linq Approach 1: 7469ms
Linq Approach 2: 2514ms

Round 2
My Approach:     2055ms
Linq Approach 1: 7082ms
Linq Approach 2: 2149ms

Round 3
My Approach:     2058ms
Linq Approach 1: 7001ms
Linq Approach 2: 2249ms 
```

基准代码：

```
[STAThread]
public static void Main()
{
    List<Type> list;

    Stopwatch watch = Stopwatch.StartNew();

    for (Int32 i = 0; i < 100000; ++i)
        list = GetTypesWithMyAttribute(Assembly.GetExecutingAssembly());

    watch.Stop();

    Console.WriteLine("ForEach: " + watch.ElapsedMilliseconds);

    watch.Restart();

    for (Int32 i = 0; i < 100000; ++i)
        list = GetTypesWithMyAttributeLinq1(Assembly.GetExecutingAssembly());

    Console.WriteLine("Linq 1: " + watch.ElapsedMilliseconds);

    watch.Restart();

    for (Int32 i = 0; i < 100000; ++i)
        list = GetTypesWithMyAttributeLinq2(Assembly.GetExecutingAssembly());

    Console.WriteLine("Linq 2: " + watch.ElapsedMilliseconds);

    Console.Read();
}

public static List<Type> GetTypesWithMyAttribute(Assembly assembly)
{
    List<Type> types = new List<Type>();

    foreach (Type type in assembly.GetTypes())
    {
        if (Attribute.IsDefined(type, typeof(MyAttribute)))
            types.Add(type);
    }

    return types;
}

public static List<Type> GetTypesWithMyAttributeLinq1(Assembly assembly)
{
    return assembly.GetTypes()
               .Where(t => t.GetCustomAttributes().Any(a => a is MyAttribute))
               .ToList();
}

public static List<Type> GetTypesWithMyAttributeLinq2(Assembly assembly)
{
    return assembly.GetTypes()
               .Where(t => Attribute.IsDefined(t, typeof(MyAttribute)))
               .ToList();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:17:32.983

您可以使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.110%29.aspx)来做到这一点。这将为您提供`List<Type>`当前程序集中所有具有`MyAttribute`.

```
using System.Linq;
using System.Reflection;

// ...

var asmbly = Assembly.GetExecutingAssembly();
var typeList = asmbly.GetTypes().Where(
        t => t.GetCustomAttributes(typeof (MyAttribute), true).Length > 0
).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T14:16:53.490

```
var list = asm.GetTypes()
            .Where(t => t.GetCustomAttributes().Any(a => a is YourAttribute))
            .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T14:20:50.927

没有代码示例，假设您有一个`List<Type>`或一个`Assembly`.

```
public List<Type> TypesWithAttributeDefined(Type attribute)
{
  List<Type> types = assembly.GetTypes();
  return types.Where(t => Attribute.IsDefined(t, attribute)).ToList();
} 
```

# python - Python中的UV/纹理映射

> ID：14440455
> 
> 赞同：5
> 
> 时间：2013-01-21T14:12:27.257
> 
> 标签：python, 3d, texture-mapping, uv-mapping

我有一个快速的问题。我想知道是否可以在 python 中执行 UV/Texture 映射。我知道我可能需要导入一两个模块。但是我没有太多关于如何在 python 中执行 UV/纹理映射的例子。
如果可能的话，有人可以发布一个例子。最终我想要做的是导入一个在 3D 程序中创建的 3D 模型（比如搅拌机或 3D max），然后我需要将数据应用到这个 3D 模型的表面。数据将采用矩阵或数组的形式。我知道 UV/Texture 映射可以帮助简化此过程，这就是我对此感到好奇的原因。

# mysql - MySQL 1064 语法错误找不到错误

> ID：14440457
> 
> 赞同：2
> 
> 时间：2013-01-21T14:12:35.740
> 
> 标签：mysql, sql

有人可以帮我处理这个 sql 查询吗？它给了我一个 1064 错误，表明我的查询中有语法错误。我已经找了两个多小时的错误，现在很沮丧。

```
SELECT 
 SUM(IF( (`date` >= DATE_SUB(?, INTERVAL 6 MONTH)) AND (`date` < DATE_SUB(?, INTERVAL 5 MONTH)), earnings, 0)) AS Rev5,
 SUM(IF( (`date` >= DATE_SUB(?, INTERVAL 5 MONTH)) AND (`date` < DATE_SUB(?, INTERVAL 4 MONTH)), earnings, 0)) AS Rev4,
 SUM(IF( (`date` >= DATE_SUB(?, INTERVAL 4 MONTH)) AND (`date` < DATE_SUB(?, INTERVAL 3 MONTH)), earnings, 0)) AS Rev3,
 SUM(IF( (`date` >= DATE_SUB(?, INTERVAL 3 MONTH)) AND (`date` < DATE_SUB(?, INTERVAL 2 MONTH)), earnings, 0)) AS Rev2,
 SUM(IF( (`date` >= DATE_SUB(?, INTERVAL 2 MONTH)) AND (`date` < DATE_SUB(?, INTERVAL 1 MONTH)), earnings, 0)) AS Rev1,
 SUM(IF( (`date` >= DATE_SUB(?, INTERVAL 1 MONTH)) AND (`date` < ?), earnings, 0)) AS Rev0
FROM
 hat_adsense_stats
GROUP BY 
 domain
ORDER BY
 domain 
```

谢谢这里是错误：

> 错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '?, INTERVAL 1 MONTH)) AND ( `date`< ?),income, 0)) as Rev0 FROM hat_adsens'附近使用正确的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:13:51.457

你有`parameter place holders`你的查询，它不适用于纯 sql。唯一`?`有效的时间是当你创建一个`Dynamic SQL`.

如果您正在使用不是 a 的查询，`Dynamic SQL`则应为此提供一个值。

删除语句上的语法错误的示例是创建一个`user variable`，例如

```
SET @date = CURDATE();
SELECT 
 SUM(IF( (`date` >= DATE_SUB(@date, INTERVAL 6 MONTH)) AND (`date` < DATE_SUB(@date, INTERVAL 5 MONTH)), earnings, 0)) AS Rev5,
 SUM(IF( (`date` >= DATE_SUB(@date, INTERVAL 5 MONTH)) ........ 
```

# node.js - 如何从客户端连接到 Socket.IO 到服务器

> ID：14440461
> 
> 赞同：2
> 
> 时间：2013-01-21T14:12:47.133
> 
> 标签：node.js, socket.io

我正在为我的网站开发一个实时聊天网络应用程序。我的服务器的行为与我需要的行为方式略有不同。我有一个 node.js 不兼容的 Apache PHP 服务器。我的节点服务器是公共的，但要连接，我必须从服务器命名客户端的目录，这意味着当我打开*服务器*IP 时，它将显示客户端。我想将客户端上传到另一个托管服务器上并从那里连接到我的 Socket.IO 和节点服务器。这是我的代码。
**客户**

```
<!DOCTYPE html>
<html lang='en'>
    <head>
        <title>Chat</title>
        <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js'></script>

        <script src='node_modules/socket.io/socket.io.js'></script>
        <script>
                var socket = new io.Socket("127.0.0.1", {port:911});
                socket.connect();
                //Once connected
                socket.on('welcome', function(data) {
                    $('#log ul').append('<li>' + data.salutation + '</li>');
                });
                //Displayig the data from the server
                socket.on('data from server', function(data) {
                    $('#log ul').append('<li>' + data.message + '</li>');
                });

                $(function() {
                    var entry_el = $('#entry');
                    $('#entry').keypress(function(event) {
                        //13 on your keyboard is the key enter
                        if(event.keyCode == 13) {
                            var msg = entry_el.attr('value');
                            if(msg) {
                                socket.emit('data from client', {'text': msg});
                                entry_el.attr('value', '');
                                window.scrollBy(0, 1000000000000);
                                entry_el.focus();
                            }
                        }
                    });
                });
            /*SCRIPT DONE
                CSS START
                */
        </script>

        <style type='text/css'>
            body {
                color: fff;
                font-size: 14px;
                margin: 0;
                padding: 0;
                font-family: Helvetica, Arial, Sans-Serif;
            }
            #log {
                margin-bottom: 100px;
                width: 100%;
            }
            #log ul {
                padding: 0;
                margin: 0;
            }
            #log ul li {
                list-style-type: none;
            }
            #console {
                position: fixed;
                width: 100%;
                font-size: 18px;
            }
        </style>
    </head>
    <body>
        <h1>Chat</h1>
        <div id='log'><ul></ul></div>
        <div id='console'>
            <input type='text' id='entry'/>
        </div>
    </body>
</html> 
```

**服务器**

```
var http = require('http').createServer(handler);
var io = require('socket.io').listen(http);
var sys = require('sys');
var fs = require('fs');

var clients = [];

http.listen(911);

function handler(request, response) {
    //If the response is Positive (200)
    response.writeHead(200, {
        'Content-Type':'text/html'
    });
    sys.pump(rs, response);
};

//connecting to sockets
io.sockets.on('connection', function(socket) {

    var username;

    clients.push(socket);
    socket.emit('welcome', {'salutation':'Welcome to this chat server!'});
    socket.emit('welcome', {'salutation':'Please input your username:'});

    socket.on('data from client', function(data) {
        console.log('message: ' + data.text);
        if(!username) {
            username = data.text;
            socket.emit('data from server', {'message': 'Welcome, ' + username + '!'});
            return;
        }
        //the response when someone types something
        var feedback = username + ' said: ' + data.text;
        clients.forEach(function(socket) {
            socket.emit('data from server', {'message': feedback});
        });
    });

}); 
```

# java - Java I/O - 增加新目标文件的名称

> ID：14440466
> 
> 赞同：0
> 
> 时间：2013-01-21T14:13:00.573
> 
> 标签：java, url, io

此代码下载 4 个带照片的链接。有没有办法用新名称创建新的 .png 文件？例如： image1.png , image2.png, image3.png 自动

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.MalformedURLException;
import java.net.URL;

public class AfbeeldingDown {

    public static void main(String[] args) throws IOException {
        URL url = new URL("http://www.autoguide.com/auto-news/wp-content/uploads/2012/12/mazda-2013-tokyo-auto-salon.jpg");
        URL url1 = new URL("http://www.autoguide.com/auto-news/wp-content/uploads/2012/12/mazda-2013-tokyo-auto-salon.jpg");
        URL url2 = new URL("http://www.autoguide.com/auto-news/wp-content/uploads/2012/12/mazda-2013-tokyo-auto-salon.jpg");
        URL url3 = new URL("http://www.autoguide.com/auto-news/wp-content/uploads/2012/12/mazda-2013-tokyo-auto-salon.jpg");
        InputStream in = url.openStream();

        OutputStream out = new FileOutputStream("image.png");

        int r;

        while ((r = in.read())!= -1) {
            out.write(r);
        }

        in.close();
        out.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:19:30.043

你可以这样做

```
ArrayList<URL> urlList = new ArrayList();
urlList.add(new URL("http://www.autoguide.com/auto-news/wp-content/uploads/2012/12/mazda-2013-tokyo-auto-salon.jpg"));
urlList.add(new URL("http://www.autoguide.com/auto-news/wp-content/uploads/2012/12/mazda-2013-tokyo-auto-salon.jpg"));
urlList.add(new URL("http://www.autoguide.com/auto-news/wp-content/uploads/2012/12/mazda-2013-tokyo-auto-salon.jpg"));
urlList.add(new URL("http://www.autoguide.com/auto-news/wp-content/uploads/2012/12/mazda-2013-tokyo-auto-salon.jpg"));
int i = 1;
for (URL url : urlList) {
  InputStream in = url.openStream();

  OutputStream out = new FileOutputStream("image" + i + ".png");
  i++;
  int r;
  while ((r = in.read()) != -1) {
   out.write(r);
   }
   in.close();
   out.close();
 } 
```

更简单

```
ArrayList<String> imageNames = new ArrayList();
imageNames.add("mazda-2013-tokyo-auto-salon.jpg");
imageNames.add("mazda-2013-Volkswagen-CrossBlue-main.jpg");
for ( String imageName : imageNames) {
    URL url = new URL("http://www.autoguide.com/auto-news/wp-content/uploads/2012/12/"+imageName);
    InputStream in = url.openStream();
    OutputStream out = new FileOutputStream(imageName);
    int r;
    while ((r = in.read()) != -1) {
        out.write(r);
    }
    in.close();
    out.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:18:22.843

您可以更新代码，使其将您希望它创建的文件名作为参数，例如：

```
 public static void main(String[] args) throws IOException {
        //same code as before
        OutputStream out = new FileOutputStream(arg[0]);

        int r;

        while ((r = in.read())!= -1) {
            out.write(r);
        }

        in.close();
        out.close();
} 
```

之后，您可以进行各种改进：

*   验证输入的名称，以查看它是否不为空（在这种情况下使用默认文件名）以及它是否是当前操作系统支持的有效文件名。
*   只传递一个文件名模板作为参数（例如“image”）并使其在其末尾添加一个增量，以便每次创建一个新文件（例如：如果“image1.png”存在，则新文件名将是“image2.png”）。您需要首先列出当前目录中以“[模板]”开头的所有文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:18:46.347

使用一个简单的类，这是可能的：

```
// Lacks checking, not thread safe etc -- left as an exercise
public final class CountingFileGenerator
{
    private final String prefix, suffix;
    private int count = 1;

    public CountingFileGenerator(final String prefix, final String suffix)
    {
        this.prefix = prefix;
        this.suffix = suffix;
    }

    public OutputStream newFile()
        throws IOException
    {
        final String name = String.format("%s%d%s", prefix, count, suffix);
        final OutputStream ret = new FileOutputStream(name);
        count++;
        return ret;
    }
} 
```

用法：

```
final CountingFileGenerator generator = new CountingFileGenerator("image", ".png");

final OutputStream o1 = generator.newFile();
final OutputStream o2 = generator.newFile(); 
```

等等等等

当然，不要忘记关闭返回的流。

# javascript - three.js - 射线交点和球体位置

> ID：14440478
> 
> 赞同：5
> 
> 时间：2013-01-21T14:13:41.750
> 
> 标签：javascript, html, css, three.js, dom-events

我有一个具有管几何形状的场景，并且光线相交工作正常。在光线相交时，我在光标旁边显示一个小的红色球体和一个工具提示。请找到没有标题的图像：

![没有标题的图像](../Images/85e0a1079105faef4c7378319d586cb0.png)

现在，如果我添加带有 div 元素的标题，则射线交点正在工作，但问题是红色球体、工具提示和鼠标光标之间存在距离。请找到带有标题的图像：

![带标题的图片](../Images/3ce487e24a8b509537c29684f3385042.png)

请在下面找到标题、工具提示 div、球体和碰撞检测功能的代码：

**标题：**

```
<div style="margin-top:10px;margin-left:3%;height:100px;width:70%">
  <label style="color:#b0bb02;font-size:14pt">three.js</label>
  <label style="color:#f5f7f9;font-size:14pt;font-weight:bold">Tube Geometry</label><br><br>               
</div> 
```

**工具提示 div：**

```
textDiv = document.createElement( 'div' );          
            textDiv.style.position = 'absolute';
            textDiv.style.top = '50px';
            textDiv.style.margin = '8px';
            textDiv.style.border = '1px solid blue';
            textDiv.style.zIndex = '100';
            textDiv.style.background = '#ffffff';
            textDiv.style.display = 'block';
            container.appendChild( textDiv ); 
```

**球体几何：**

```
dot = new THREE.Mesh ( new THREE.SphereGeometry( 1, 12, 1 ), new THREE.MeshBasicMaterial( { color: 0xff0000 } ) ); 
```

**碰撞检测：**

```
var intersects;

        function detectCollision(event){

            var vector = new THREE.Vector3(( event.clientX / window.innerWidth ) * 2 - 1,- ( event.clientY / window.innerHeight ) * 2 + 1, 0.5 );

            /*var mouse_x =   ((event.pageX-event.target.offsetParent.offsetLeft) / renderer.domElement.width) * 2 - 1;
            var mouse_y = - ((event.pageY-event.target.offsetParent.offsetTop) / renderer.domElement.height) * 2 + 1;
            var vector = new THREE.Vector3(mouse_x, mouse_y, 0.5);*/

                projector.unprojectVector( vector, camera );
                var ray = new THREE.Raycaster( camera.position, vector.subSelf( camera.position ).normalize() );

                intersects = ray.intersectObjects( objects );                                   

                var pnt=0; var clickedMD = 0; var clickedDegree; var clickedTVD;

                if ( intersects.length > 0 ) {                  

                    dot.position.copy( intersects[0].point );
                    scene.add( dot );

                    var fi = intersects[0].faceIndex;
                    pnt = Math.round(fi/11);                    

                    clickedMD = pathObjColl[pnt].md;
                    clickedTVD = Math.round(pathObjColl[pnt].point.z);
                    clickedDegree = degrees[Math.round(fi%11)]; 

                    // tooltip
                    var elem = document.getElementsByTagName("canvas");
                    var canvas = elem[0];
                    var x = event.pageX - canvas.offsetLeft ;
                    var y = event.pageY - canvas.offsetTop  ;
                    //console.log("X: "+x+" Y: "+y);
                    textDiv.style.top = y+"px";
                    textDiv.style.left = x+"px";                
                    textDiv.innerHTML = "&nbsp;Degree: "+clickedDegree+"<br/>&nbsp;MD: "+clickedMD+" ft<br/>&nbsp;TVD: "+clickedTVD+" ft";
                    if(textDiv.style.display == 'none'){
                        textDiv.style.display = 'block';    
                    }
                }

                else if(intersects.length == 0){
                    var textDivVis = textDiv.style.display;
                    console.log(textDivVis);
                    if(textDivVis == 'block'){
                        textDiv.style.display = 'none'; 
                    }

                }

        } 
```

[jsfiddle 上的演示](http://jsfiddle.net/RnFqz/50/)

**如果我添加标题，为什么鼠标光标、球体几何和太尖之间有距离？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:23:40.757

textDiv 是绝对定位的吗？也许标题只是抛弃了页面的布局和工具提示..试试这个：

```
textDiv.style.position = "absolute"; 
```

编辑：

好吧，实际上它是需要绝对定位的标题。否则它将移动画布，并且您在 HTML 中的鼠标位置与 webgl 画布中的鼠标位置不匹配。

或者，如果您不希望标题位于画布顶部，则可以在计算鼠标位置时考虑容器位置。对于向量：

```
 var vector = new THREE.Vector3( 
                ( (event.pageX - container.offsetLeft) / window.innerWidth ) * 2 - 1, 
                - ( (event.pageY - container.offsetTop) / window.innerHeight ) * 2 + 1, 
                0.5 ); 
```

对于工具提示：

```
 textDiv.style.top = (container.offsetTop + y)+"px";
                textDiv.style.left = (container.offsetLeft + x)+"px"; 
```

更新 jsFiddle：http: [//jsfiddle.net/tje8y/](http://jsfiddle.net/tje8y/)

# sql-server - 是否可以在跨数据库上创建外键引用？

> ID：14440488
> 
> 赞同：0
> 
> 时间：2013-01-21T14:13:55.180
> 
> 标签：sql-server

> **可能重复：**
> [来自不同数据库的表上的外键](https://stackoverflow.com/questions/1424327/foreign-keys-on-table-from-different-database)

我只是想知道是否有任何方法可以在数据库表的列上创建外键引用到不同数据库表的另一列（跨数据库）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:20:20.853

不，您不能跨数据库实现外键。

您可以使用触发器来强制执行约束，但请注意触发器可以被禁用，并且在某些情况下它们不会触发。

# python - 匹配文本和替换的更好方法

> ID：14440490
> 
> 赞同：1
> 
> 时间：2013-01-21T14:13:57.783
> 
> 标签：python, replace, match, performance

考虑一下，我有 File1：

```
SNP_ID  GENE_ID # Header not present in original file
rs1 TRIML1,TRIML2
rs2 D4S234E
rs4 ACCN5,CTSO
rs5 ODZ3
rs6 TRIML1 
```

和文件2：

```
SNP1_ID SNP2_ID DRUG # Header not present in original file
rs1 rs2 xyz
rs1 rs8 abc
rs2 rs4 xyz
rs2 rs5 abc1
rs5 rs7 abc2
rs6 rs5 xyz1 
```

我想将 file2 中的 SNP ID 匹配到 file1 并替换为相应的基因 ID，并且在输出中也有药物名称。输出应如下所示：

```
GENE1_ID    GENE2_ID    SNP1_ID SNP2_ID Drug
TRIML1  D4S234E rs1 rs2 xyz
TRIML2  D4S234E rs1 rs2 xyz
TRIML1  rs8 rs1 rs8 abc
TRIML2  rs8 rs1 rs8 abc
D4S234E ACCN5   rs2 rs4 xyz
D4S234E CTSO    rs2 rs4 xyz
D4S234E ODZ3    rs2 rs5 abc1
ODZ3    rs7 rs5 rs7 abc2
TRIML1  ODZ3    rs6 rs5 xyz1 
```

我编写了以下代码来进行匹配和替换，但我无法弄清楚输出中的最后三列。此外，当我必须在大文件上执行此操作时，这需要相当长的时间。有效地做的投入？

```
 snp_gene_dict = {}
 with open('File1') as f1:
     for line in f1:
         snp_key = line.split()[0]
         vals = line.split()[1]
         gene_val = vals.split(',')
         snp_gene_dict[snp_key] = gene_val

 col0 = []
 col1 = []
 snp_first_col = []
 snp_second_col = []
 with open('File2') as f2:
     for line in f2:
         snp0, snp1 = line.split()
             col0.append(snp0)
             col1.append(snp1)
     for i in range(len(col0)):
          if col0[i] in snp_gene_dict.keys():
              snp_first_col.append(snp_gene_dict[col0[i]])
          else:
              snp_first_col.append([col0[i]])
     for i in range(len(col1)):
          if col1[i] in snp_gene_dict.keys():
              snp_second_col.append(snp_gene_dict[col1[i]])
          else:
              snp_second_col.append([col1[i]])

 with open('output-gene-gene', 'w') as out:
     for i,j in map(None,snp_first_col,snp_second_col): 
         if len(i) ==  1 and len(j) == 1:
             out.write ('{a}\t{b} \n'.format(a = '\t'.join(i), b = '\t'.join(j)))
         elif len(i) > 1 and len(j) == 1:
             for item in i:
                 out.write ('{a}\t{b} \n'.format(a = item, b = '\t'.join(j)))
         elif len(j) > 1 and len(i) == 1:
             for item in j:
                 out.write ('{a}\t{b} \n'.format(a = '\t'.join(i), b= item))
         elif len(i) > 1 and len(j) > 1:
             for elem1 in i:
                 for elem2 in j:
                     out.write('{a}\t{b} \n'.format(a = elem1, b = elem2)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:26:14.730

这是使用 SQLITE 的一种方法，概念非常简单。只需将 FILE1 插入数据库，然后从中读取。

```
import logging
INSERT_SPN_STATEMENT = 'INSERT INTO spn_table (spn_id, gene_id) VALUES (?, ?)'
SELECT_SPN_BY_ID_STATEMENT='SELECT ID FROM spn_table WHERE spn_id=? and GENE_ID=?'
def dump_file_to_db(File1, connection):
    cursor = connection.cursor()
    for l in File1:
        #line looks like:  rs1 TRIML1,TRIML2, split will split on spaces and since we have 2 we can save it in 2 vars
        SPN_ID, GENE_ID = l.split()
        for g in GENE_ID.split(','):#now for each gene (comma separated) insert into the spn_table
            cursor.execute(SELECT_SPN_BY_ID_STATEMENT , (SPN_ID, g))
            if cursor.fetchone(): continue # record exists
            cursor.execute(INSERT_SPN_STATEMENT , (SPN_ID, g))
    connection.commit()

SELECT_SPN_STATEMENT = 'SELECT ID, spn_id, gene_id FROM spn_table WHERE spn_id=?'
def read_file(File2, connection):
    cursor = connection.cursor()
    for l in File2:
        spn1, spn2, drug = l.split()
        #get spn1 from database
        cursor.execute(SELECT_SPN_STATEMENT , (spn1,))
        _id, spn1_id, gene_id = cursor.fetchone()
        cursor.execute(SELECT_SPN_STATEMENT , (spn2,))
        _id, spn2_id, gene_id = cursor.fetchone()
        logging.info("%s %s %s %s", spn1_id, spn2_id, gene_id, drug)

def initialize_db():
    conn = sqlite3.connect('test.db');c = conn.cursor()
    # Create table
    c.execute('''CREATE TABLE IF NOT EXISTS spn_table
             (Id INTEGER PRIMARY KEY, spn_id text, gene_id text)''')
    return conn

import sqlite3
connection = initialize_db()
logging.basicConfig(level=logging.DEBUG)
logging.info("Started")
with open('File1.txt') as File1:
    dump_file_to_db(File1, connection)
with open('File2.txt') as File2:
    read_file(File2, connection)
logging.info("Done") 
```

# mysql - MySQL 按特殊 ID 搜索

> ID：14440493
> 
> 赞同：0
> 
> 时间：2013-01-21T14:14:05.397
> 
> 标签：mysql

我有这个项目的项目和类别。类别有一个 ID。我需要将项目的类别 ID 放入数据库中，但项目可以有 2,3 个或更多类别。而我需要做什么？

在项目表中创建一个新的单元格名称“类别”并使用逗号 (7,4,8...) 放置类别 ID？如果这样，那么如何在 PHP 中按类别搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:17:24.070

如果我理解您的问题，您有一个可以有多个类别的项目。如果是这种情况，则不要将多个类别存储在同一列中。

您可能希望以这种方式设置您的表格：

```
create table item
(
  id int,  (PK)
  name varchar(10)
);

create table category
(
  id int,  (PK)
  name varchar(10)
);

create table item_category
(
  item_id int,  (FK)
  category_id int  (FK)
); 
```

这将允许您将项目和类别放在单独的表中，然后使用连接表允许您的项目具有多个类别。

如果您有上表的以下示例数据：

```
insert into item values
  (1, 'item 1'), 
  (2, 'item 2');

insert into category values
  (1, 'category 1'), 
  (2, 'category 2');

insert into item_category values
  (1, 1), 
  (2, 1),
  (2, 2); 
```

那么您的查询将与此类似：

```
select i.id item_id,
  i.name ItemName,
  c.id CategoryId,
  c.name CategoryName
from item i
left join item_category ic
  on i.id = ic.item_id
left join category c
  on ic.category_id = c.id 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/b1e0a/3)。这给出了结果：

```
| ITEM_ID | ITEMNAME | CATEGORYID | CATEGORYNAME |
--------------------------------------------------
|       1 |   item 1 |          1 |   category 1 |
|       2 |   item 2 |          1 |   category 1 |
|       2 |   item 2 |          2 |   category 2 | 
```

# php - PHP 活动日历

> ID：14440496
> 
> 赞同：1
> 
> 时间：2013-01-21T14:14:25.173
> 
> 标签：php, mysql, events, calendar

我用 PHP 开发了一个自己的项目管理系统，但我在这里缺少的是对实际情况的良好可视化......到目前为止，每个项目的开始和结束日期都显示了，但这太难了读书。我需要一个日历或类似的东西。

我需要找到一种方法将这些项目日期及其 ID 放在某种日历中，该日历显示每个月的所有日期。通过单击它，用户可以查看项目是否在该日期进行。

有人知道任何好的教程或开源或任何关于这样的日历吗？我一直在寻找教程，但我发现的教程非常基础。

编辑

这样的事情对我来说是最好的解决方案：

[http://demo.helioscalendar.com/index.php?d=2013-01-21&m=1](http://demo.helioscalendar.com/index.php?d=2013-01-21&m=1)

如果我可以自己对其进行编程，那就更好了，但我不知道这样的东西是如何设置的。

# javascript - jQuery选项卡禁用jQuery滚动

> ID：14440498
> 
> 赞同：0
> 
> 时间：2013-01-21T14:14:27.160
> 
> 标签：javascript, jquery, css

我使用 jqueryUI 选项卡，并希望在每个选项卡内实现一个平滑的滚动条。我尝试了几个可滚动的插件，如 jQuery 自定义内容滚动器、TinyScrollbar 和现在的 areaaperta NiceScroll，但每次我都遇到同样的问题 - 滚动条只能在一个选项卡内工作。

```
 <script>
    $(function() {
        $( "#tabs" ).tabs();
    });
    </script>

    <div id="tabs" style="width:900px; font-size:100%;">
    <ul>
        <li><a href="#tabs-1" >FIRST</a></li>
        <li><a href="#tabs-2">SECOND</a></li>
        <li><a href="#tabs-3">THIRD</a></li>
    </ul>
    <div id="tabs-1">
        <div id="thisdiv">
        <p><b>FIRST SCROLLABLE PARAGRAPH</b>...</p></div></div>

    <div id="tabs-2"><div id="thisdiv2">
        <p><b>SECOND SCROLLABLE PARAGRAPH</b>...</p>
    </div></div>
    <div id="tabs-3">
        <p>THIRD TAB </p>
    </div>
</div>

    <script>
    $(document).ready(
  function() {     
    $("#thisdiv").niceScroll({cursorcolor:"#00F"});
    $("#thisdiv2").niceScroll({cursorcolor:"#00F"});  }
);
    </script> 
```

这是 jsfiddle，它表明 UItabs 和 niceScroll 插件的两个滚动条之间没有冲突：http: [//jsfiddle.net/Fluc/EhcqX/4/](http://jsfiddle.net/Fluc/EhcqX/4/)

在这里，我尝试在每个选项卡内使用带有滚动条的相同 div：http: [//jsfiddle.net/Fluc/cJPT3/2/](http://jsfiddle.net/Fluc/cJPT3/2/)

如您所见，可滚动仅在第一个选项卡内有效。与其他可滚动插件相同。

我不是 jquery 程序员，但感觉问题与某处的显示属性有关。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:28:51.387

这个完美的尝试让我知道。

```
<script>
$(document).ready(function() {
    $("#tabs").tabs();
    jQuery('#tabs').bind('tabsselect', function(event, ui) {    
        ui.tab 
        ui.panel
        ui.index
        if (ui.index==0) {
            $("#tabs-1 > .scrollable").niceScroll({cursorcolor:"#00F"});
        }else if (ui.index==1) {
            $("#tabs-2 > .scrollable").niceScroll({cursorcolor:"#00F"});
        }else if (ui.index==2) {
            $("#tabs-3 > .scrollable").niceScroll({cursorcolor:"#00F"});
        } 
  });
});
</script> 
```

我还更新了你的小提琴[http://jsfiddle.net/cJPT3/9/](http://jsfiddle.net/cJPT3/9/)

# c++ - 持有大共享状态的访问者类：实现引用语义的最佳方式？

> ID：14440501
> 
> 赞同：4
> 
> 时间：2013-01-21T14:14:38.677
> 
> 标签：c++, pass-by-reference, pass-by-value, boost-graph, visitor-pattern

这个问题大致基于 Boost.Graph 库 (BGL)，它使用类似[访问者](http://en.wikipedia.org/wiki/Visitor_pattern)的模式来自定义递归（搜索）算法。BGL 按值传递访问者对象（类似于 STL 函数对象）和[文档](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/depth_first_visit.html)状态

> 由于访问者参数是按值传递的，如果您的访问者包含状态，那么算法期间对状态的任何更改都将针对访问者对象的副本，而不是传入的访问者对象。因此您可能希望访问者持有这个通过指针或引用进行状态。

**我的问题**：实现有状态访问者类的引用语义的最佳方法是什么？从精确的指针类（原始与唯一与共享，常量与非常量）中抽象出来，放置引用的最佳位置是：在参数传递中还是在数据成员中？

**备选方案 1**：访问者通过指针保持状态，并按值传递（如在 Boost.Graph 中）

```
class Visitor
{
public:
    Visitor(): state_(new State()) {}
    void start() { /* bla */ }
    void finish() { /* mwa */ }
private:
    State* state_;
}

template<typename Node, typename Visitor>
int algorithm(Node const& n, Visitor v)
{
    v.start();
    algorithm(next(n), v);
    v.finish();
} 
```

**备选方案 2**：访问者按值保存数据，并按指针传递

```
class Visitor
{
public:
    Visitor(): state_() {}
    void start() { /* bla */ } 
    void finish() { /* mwa */ }
private:
    State state_;
}

template<typename Node, typename Visitor>
int algorithm(Node const& n, Visitor* v)
{
    v->start();
    algorithm(next(n), v);
    v->finish();
} 
```

**我目前的倾向：**我发现备选方案 1 [传递持有指针/引用的对象的值传递] 有点不舒服，因为访问者不满足值语义，所以我宁愿在参数列表中明确引用语义 [备选方案 2] . 这里是否有其他相关的考虑或替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:55:53.523

还有第三种选择：

```
class Visitor
{
public:
    Visitor(): state_() {}
    void start() { /* bla */ } 
    void finish() { /* mwa */ }
private:
    State state_;
};

template<typename Node, typename Visitor>
int algorithm(Node const& n, Visitor v)
{
    v.start();
    algorithm(next(n), v);
    v.finish();
}

// Set the reference semantics here, use value everywhere else
algorithm(myNode, boost::ref(myVisitor)); // ... or std::ref in c++11 
```

我认为这通常受到标准的青睐，而不是明确地将某些东西标记为指针或引用。毕竟，`std::ref`已经`std::cref`推出解决这个问题了。

另一方面，在《C++ 编码标准》一书中，Sutter 和 Alexandrescu 认为仿函数应该总是容易且快速地复制。他们建议在内部使用引用计数状态块（IIRC，这里没有这本书）。因此，虽然`std::ref`or`std::cref`可以解决您的问题，但它们更常用于“适应”非函子对象，例如在传递一个`std::vector`through时`std::bind`。

备选方案 1，带有`shared_ptr<T>`（或更好的：）`shared_ptr<T const>`可能是您最好的选择。在任何一种情况下，您都只是将指针语义“包装”在 BGL 代码的值语义后面，只要您正确获取所有对象生命周期，就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:45:30.963

我理解您对备选方案 1 的不适，但我认为这是“那辆公共汽车已经离开”的情况；换句话说，C++ 标准库（以及 Boost，而不仅仅是 BGL）的方向倾向于使用“保持引用”模式。

例如，考虑可以用 lambda 表达式实现的函子的普遍使用。据我所知，所有标准库（和 boost）接口都按值传递函子参数，所以如果函子持有状态，它必须通过引用来持有它。因此，我们应该习惯于看`[&](){}`而不是看`[=](){}`。而且，以此类推，我们应该习惯于看到访问者持有对其状态的引用（或指针，但我更喜欢引用）。

实际上有充分的理由通过值而不是引用传递函子（和访问者）。如果它们是通过引用传递的，那么它们必须通过 传递`const&`，这将使状态修改变得不可能，或者传递`&`，这将使使用临时值变得不可能。唯一的另一种可能性是传递一个显式指针，但这不能与 lambdas 或临时值一起使用（除非临时值是不必要的堆分配的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:45:15.563

当您的访问者实际上有一个状态时，试图让它成为无状态是没有意义的。我认为（2）没有任何问题。

# php - 种子银条数据库

> ID：14440503
> 
> 赞同：2
> 
> 时间：2013-01-21T14:14:42.370
> 
> 标签：php, database, silverstripe

是否可以像在 Rails 中一样“播种”数据库？我想将种子与图像对象管理器结合使用，以便按标题获取记录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T04:17:05.697

根据您对 Ingo 的回答留下的评论，您想向`requireDefaultRecords()`您的页面类添加一个方法。

以下来自最近的项目，并确保有一个特定的用户组，但您可以对任何类型的`DataObject`（例如`Page`）执行相同操作。

```
public function requireDefaultRecords() {

    // Make sure there is a readers security group
    $group = Group::get('Group')->filter('Code', 'readers')
    if ( !$group->exists() ) {
        $group = Group::create(array('Title' => 'Readers'));
        $group->write();
    }
} 
```

`DataObject`当您进行构建时，此功能会在所有类上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T00:04:01.007

您可以通过设置数组来设置页面`$db`变量的默认值。`$defaults`

```
class Page extends SiteTree {

    public static $db = array(
        'Title' => 'Text',
        'Description' => 'Text'
    );

    public static $defaults = array(
        'Title' => 'Default Title',
        'Description' => 'Default Description'
    );

    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:58:21.787

不太确定在这种情况下您所说的“种子”是什么意思。有一个[“数据生成器”模块](https://github.com/lingo/silverstripe-data-generator)，它使用对 ORM 列类型的有根据的猜测写入随机数据。

# .net - 如何在 Windows Azure 存储上查询云 Blob

> ID：14440506
> 
> 赞同：29
> 
> 时间：2013-01-21T14:14:49.747
> 
> 标签：.net, linq, lazy-loading, azure-blob-storage, azure-sdk-.net

我正在使用 Microsoft.WindowsAzure.StorageClient 来操作 Azure 存储上的 blob。我已经到了用户需要列出上传的文件并修改/删除它们的地步。由于一个容器中有很多文件，查询天蓝色存储服务以仅返回所需文件的最佳方法是什么。另外，我希望能够只返回特定数量的 blob，以便实现分页。

CloudBlobContainer 中有一个名为 ListBlobs 的方法，但似乎它正在返回容器中的所有 blob。那对我不起作用。

我在这个主题上搜索了很多，找不到任何有用的东西。此[链接](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)仅显示基础知识。

- - - - - 编辑

我在下面的回答不会懒惰地检索 blob，但它会检索容器中的所有 blob，然后过滤结果。目前没有懒惰地检索 blob 的解决方案。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-21T14:14:49.747

~~ListBlobs~~方法懒惰地检索该容器中的 blob 。因此，您可以针对该方法编写查询，这些查询在您循环（或使用 ToList 或其他方法实现对象）列表之前不会执行。

举几个例子，事情就会变得更清楚。对于那些不知道如何在 Azure 存储帐户中获取容器引用的人，我推荐本[教程](http://www.codeproject.com/Articles/490178/How-to-Use-Azure-Blob-Storage-with-Azure-Web-Sites)。

按最后修改日期排序并获取第 2 页（每页 10 个 blob）：

```
blobContainer.ListBlobs().OfType<CloudBlob>()
         .OrderByDescending(b=>b.Properties.LastModified).Skip(10).Take(10); 
```

获取特定类型的文件。如果您在上传时设置了 ContentType（我强烈建议您这样做），这将起作用：

```
blobContainer.ListBlobs().OfType<CloudBlob>()
         .Where(b=>b.Properties.ContentType.StartsWith("image")); 
```

获取 .jpg 文件并按文件大小排序，假设您设置文件名及其扩展名：

```
blobContainer.ListBlobs().OfType<CloudBlob>()
    .Where(b=>b.Name.EndsWith(".jpg")).OrderByDescending(b=>b.Properties.Length); 
```

最后，查询不会被执行，直到你告诉它：

```
var blobs = blobContainer.ListBlobs().OfType<CloudBlob>()
                          .Where(b=>b.Properties.ContentType.StartsWith("image"));

foreach(var b in blobs) //This line will call the service, 
                        //execute the query against it and 
                        //return the desired files
{
   // do something with each file. Variable b is of type CloudBlob
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-08-02T03:05:00.213

我对 Windows Azure blob 存储的了解是它是最基本的。就像*非常*简单的一样。您应该只使用它来存储文档和关联的元数据，然后按 ID 检索单个 blob。

我最近将一个应用程序从 MongoDB 迁移到了 Windows Azure blob 存储。来自 MongoDB，我期待着一堆不同的有效方法来检索文档。迁移后，我现在依靠传统的 RDBMS 和 ElasticSearch 以更易于搜索的方式存储 blob 信息。

Windows Azure blob 存储的限制如此之大真是太糟糕了。我希望将来能看到*更多*增强的搜索功能（例如，通过元数据、属性、blob 名称正则表达式等进行搜索）。此外，基于 map/reduce 的索引会很棒。如果他们做了这些事情，微软就有机会将很多人从其他文档存储系统转换过来。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-15T15:02:16.937

# 编辑

现在预览版是[用于 azure 存储的 blob 索引，](https://azure.microsoft.com/en-gb/blog/manage-and-find-data-with-blob-index-for-azure-storage-now-in-preview/)它是元数据的托管索引，您可以添加到 blob（新的或现有的）中。这将消除使用创造性容器名称进行伪索引或自己维护二级索引的需要。

## 原始答案

对于返回特定结果，一种可能的选择是使用 blob 和/或容器前缀来有效地索引您正在存储的内容。例如，您可以在添加 blob 时为日期和时间添加前缀，或者您可以为用户添加前缀，这取决于您希望如何“索引”您的 blob 的用例。然后，您可以在 ListBlobs[Segmented] 调用中使用此前缀或其一部分来返回特定结果，显然您需要首先放置最通用的元素，然后是更具体的元素，例如：

```
2016_03_15_10_15_blobname 
```

这将允许您在没有多次调用的情况下获得所有 2016 年的 blob，或 2016 年 3 月的 blob 等，但不能在任何一年中获得 3 月的 blob。

这样做的缺点是，如果您需要重新索引 blob，则需要删除并使用新名称重新创建它们。

对于分页，您通常可以使用 ListBlobsSegmented 方法，该方法将为您提供一个可用于实现分页的延续令牌。也就是说，如果您需要跳过页面，它并没有多大用处，因为它只能从最后一组实际结果停止的位置开始工作。一种选择是计算您需要跳过的页面数，获取并丢弃它们，然后获取您想要的实际页面。如果每个容器中有很多 blob，这可能很快就会变得非常低效......

您也可以将其作为故障恢复方法，使用逐页方法并在用户按顺序单击一个页面到下一个页面时存储延续令牌，或者您可能会缓存 blob 名称并从中进行自己的分页。

您还可以将这两种方法结合起来，例如按“索引”过滤，然后对结果进行分页。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-07T01:17:18.773

在这里偶然发现除了用于比较的标签之外的其他选项，至少对于 REST api，它似乎现在是内置的。

> 按标记查找 Blob 操作可查找存储帐户中其标记与给定搜索表达式匹配的所有 Blob。

[https://docs.microsoft.com/en-us/rest/api/storageservices/find-blobs-by-tags](https://docs.microsoft.com/en-us/rest/api/storageservices/find-blobs-by-tags)

您可以在上传 blob 时添加标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-14T14:47:36.397

Azure Data Lake Gen 2 将支持使用 USQL 搜索存储在 Data Lake 中的数据。Blob 存储 API 可用于存储和检索该数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-13T19:32:36.427

U-SQL 当前不支持交互式查询/搜索。

对于我的用例，我计划利用 Azure blob 存储获得低成本优势，并在每个新的 blob 文件创建事件触发 Azure Functions 对 blob 进行数据转换，以将处理后的输出提供给 Azure Cosmos DB 或 RDBMS（支持查询）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-22T13:29:11.493

只需从您的资源配置诊断设置以将文件持久保存在 Log Analytics 工作区中，您应该一切顺利。我知道这篇文章已经很老了，但看起来它仍在为类似问题编入索引。

[日志分析](https://i.stack.imgur.com/uB2IO.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-29T16:29:50.620

与此同时，Azure Blob 存储得到了增强以支持索引标记。

引用：[使用 blob 索引标记管理和查找 Azure Blob 数据](https://docs.microsoft.com/en-us/azure/storage/blobs/storage-manage-find-blobs?tabs=azure-portal)

> 随着数据集变得越来越大，在海量数据中找到特定对象可能会很困难。Blob 索引标记通过使用键值索引标记属性提供数据管理和发现功能。您可以在存储帐户中的单个容器或所有容器中对对象进行分类和查找。随着数据需求的变化，对象可以通过更新它们的索引标签来动态分类。对象可以保留在其当前容器组织中。
> 
> Blob 索引标签可让您：
> 
> *   使用键值索引标签对 Blob 进行动态分类
> *   在整个存储帐户中快速查找特定的标记 Blob
> *   根据索引标签的评估指定 blob API 的条件行为
> *   使用索引标签对 blob 生命周期管理等功能进行高级控制

源代码示例在这里：

[使用 blob 索引标记管理和查找 Azure Blob 存储上的数据](https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-index-how-to?tabs=net)

# python - Python - 在字符串之间打印

> ID：14440511
> 
> 赞同：0
> 
> 时间：2013-01-21T14:15:04.760
> 
> 标签：python, bash, sed, awk

我试图弄清楚如何打印两个字符串之间发生的所有内容。问题是，这些字符串对在一行中出现多次。所以我需要能够打印每组对中的每个字段。

我有一个文件`api.txt`列出了多个客户及其各自的设备清单。它看起来像这样：

```
Customer [customerId=12000, customerName=Acme, Inc.]
DeviceDetail [baseProductId=router-100, cardDetail=[CardDetail [baseCardId=router-100NIC1, cardDescription=Router 100 NIC, cardSerial=100NIC1], CardDetail [baseCardId=router-100NIC2, cardDescription=Router 100 NIC, cardSerial=100NIC2]], deviceSerial=100PRIMARY, deviceDescription=Router 100 Base Model]
DeviceDetail [baseProductId=router-2500, cardDetail=[CardDetail [baseCardId=router-2500NIC1, cardDescription=Router 2500 NIC, cardSerial=2500NIC1], CardDetail [baseCardId=router-2500NIC2, cardDescription=Router 2500 NIC, cardSerial=2500NIC2]], deviceSerial=2500PRIMARY, deviceDescription=Router 2500 Base Model]
Customer [customerId=24000, customerName=Anvil LLC]
DeviceDetail [baseProductId=router-5000, cardDetail=[CardDetail [baseCardId=router-5000NIC1, cardDescription=Router 5000 NIC, cardSerial=5000NIC1], CardDetail [baseCardId=router-500NIC2, cardDescription=Router 5000 NIC, cardSerial=5000NIC2]], deviceSerial=5000PRIMARY, deviceDescription=Router 5000 Base Model]
DeviceDetail [baseProductId=router-7500, cardDetail=null, deviceSerial=7500PRIMARY, DeviceDescription=Router 7500 Base Model, No NIC] 
```

其输出应类似于：

```
"12000","Acme, Inc.","router-100","100PRIMARY","Router 100 Base Model","Router 100 NIC","100NIC1","Router 100 NIC","100NIC2"
"12000","Acme, Inc.","router-2500","2500Primary","Router 2500 Base Model","Router 2500 NIC","2500NIC1","Router 2500 NIC","2500NIC2"
"24000","Anvil LLC","router-5000","5000PRIMARY","Router 5000 Base Model,"Router 5000 NIC","5000NIC1","Router 5000 NIC","5000NIC2" 
```

请注意，最后一个 DeviceDetail ( `router-7500`) 被省略，因为该设备没有附加子设备 ( `cardDetail=null`)。

我了解如何使用`awk`将字段分隔符设置为`=`并`,`捕获它们之间的所有内容（即每个字段值位于等号和逗号之间），但我不确定如何在多个时获得我正在寻找的结果数据的实例`CardDetail`在每一行上可能出现的次数未知，甚至根本不出现。

需要考虑的是，每个实例都`Card Detail`被捕获在`Card Detail`一个封闭的括号 ( `]`) 之间，因此这可能有助于捕获每`Card Detail`行上的每个实例，但不确定。

我也没有结婚`awk`。使用`sed`或任何其他解析程序也可以。基本上，任何效果最好的。

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:46:40.227

当处理变得太尴尬而无法在 awk/sed 中完成时，是时候使用更“现代”的脚本语言了，比如 perl、ruby 或 python。这样的事情应该让你开始（perl）：

```
#!/usr/bin/env perl
use strict;
use warnings;

my $customerName;
my $customerId;
while (my $line = <DATA>) {
    if ($line =~ m{
            customerId=(?<customerId>.*?), 
            \ customerName=(?<customerName>.*)\]
        }x)
    {
            $customerId = $+{customerId};
            $customerName = $+{customerName};
    } elsif ($line =~ m{
                    baseProductId=(?<baseProductId>.*?),
                    \ cardDetail=\[.*baseCardId=(?<baseCardId>.*?),
                    \ cardDescription=(?<cardDescription>.*?),
                    .*deviceSerial=(?<deviceSerial>.*?),
                    \ deviceDescription=(?<deviceDescription>.*)\]
              }x)
    {
            my ($productId, $cardId) = ($1, $2);
            print '"'
            . join('","',
                    $customerId,
                    $customerName,
                    $+{baseProductId},
                    $+{baseCardId},
                    $+{deviceSerial},
                    $+{deviceDescription},
                    $+{cardDescription},
               )
            . "\"\n" ;
    }
}

__DATA__
Customer [customerId=12000, customerName=Acme, Inc.]
DeviceDetail [baseProductId=router-100, cardDetail=[CardDetail [baseCardId=router-100NIC1, cardDescription=Router 100 NIC, cardSerial=100NIC1], CardDetail [baseCardId=router-100NIC2, cardDescription=Router 100 NIC, cardSerial=100NIC2]], deviceSerial=100PRIMARY, deviceDescription=Router 100 Base Model]
DeviceDetail [baseProductId=router-2500, cardDetail=[CardDetail [baseCardId=router-2500NIC1, cardDescription=Router 2500 NIC, cardSerial=2500NIC1], CardDetail [baseCardId=router-2500NIC2, cardDescription=Router 2500 NIC, cardSerial=2500NIC2]], deviceSerial=2500PRIMARY, deviceDescription=Router 2500 Base Model]
Customer [customerId=24000, customerName=Anvil LLC]
DeviceDetail [baseProductId=router-5000, cardDetail=[CardDetail [baseCardId=router-5000NIC1, cardDescription=Router 5000 NIC, cardSerial=5000NIC1], CardDetail [baseCardId=router-500NIC2, cardDescription=Router 5000 NIC, cardSerial=5000NIC2]], deviceSerial=5000PRIMARY, deviceDescription=Router 5000 Base Model]
DeviceDetail [baseProductId=router-7500, cardDetail=null, deviceSerial=7500PRIMARY, DeviceDescription=Router 7500 Base Model, No NIC] 
```

您可以在(搜索修饰符) 中查找`x`匹配`m{}`运算符的选项。还可以在同一 perldoc 中搜索捕获组以获取咒语。`perldoc perlre``/x``named``$+{foo}`

# oracle - 自加入最大值

> ID：14440517
> 
> 赞同：1
> 
> 时间：2013-01-21T14:15:27.030
> 
> 标签：oracle, oracle10g

我有一张有 50 万笔交易的桌子。我想获取特定日期的最后余额。所以我返回了如下查询。

```
 SELECT curr_balance
      FROM transaction_details
     WHERE acct_num = '10'
       AND is_deleted = 'N'
       AND ( value_date, srl_num ) IN(
            SELECT MAX( value_date ), MAX( srl_num )
              FROM transaction_details
             WHERE TO_DATE( value_date, 'dd/mm/yyyy' ) 
                <= TO_DATE( ADD_MONTHS( '05-APR-2012', 1 ), 'dd/mm/yyyy' )
              AND acct_num = '10'
              AND is_deleted = 'N'
              AND ver_status = 'Y' )
       AND ver_status = 'Y' 
```

这必须以 12 个月的增量执行，以找到每个特定月份的最后余额。但是这个查询有更多的 cpu 成本，12 倍它需要大量的时间。如何重新修改上述查询以更快地获得结果。这是否可以在 PL/SQL 中分为两部分来实现性能。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:30:54.160

您不必查询您的表两次。尝试使用[分析函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)

```
SELECT t.curr_balance
    -- , any other column you want as long it is in the subselect.
FROM (
    SELECT
        trans.curr_balance
        , trans.value_date
        -- any other column you want
        , trans.srl_num
        , MAX(trans.srl_num) OVER(PARTITION BY trans.value_date, trans.srl_num) max_srl_num
        , MAX(trans.value_date) OVER(PARTITION BY trans.value_date, trans.srl_num) max_date
    FROM transaction_details trans
    WHERE TO_DATE( value_date, 'dd/mm/yyyy' ) <= TO_DATE( ADD_MONTHS( '01-APR-2012', 1 ), 'dd/mm/yyyy' )
        AND acct_num = '10'
        AND is_deleted = 'N'
        AND ver_status = 'Y'
) t
WHERE t.max_date = t.value_date
    AND t.max_srl_num = t.srl_num 
```

几个想法。

*   你为什么有`TO_DATE( value_date...`？不是你的数据类型`DATE`吗？如果您在该列中有一个，这可能会破坏您的索引。
*   请注意（这是一个疯狂的猜测）如果您`srl_num`不是最新日期的最高值，您将得到不正确的结果并且可能不会返回任何行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:43:08.777

尝试：

```
select * from(
    SELECT value_date, srl_num, curr_balance
      FROM transaction_details
     WHERE acct_num = '10'
       AND is_deleted = 'N'
       AND ver_status = 'Y'  
       row_number() over (partition by trunc(value_date - interval '5' day,'MM') 
                         order by srl_num desc
                         ) as rnk
       )
where rnk = 1; 
```

您将在您的表格中获得一份报告，其中包含每个月最后一个 srl_num 的余额。

好处是您的方法在 12 个月报告中扫描表 24 次，而我的方法扫描表一次。

解析函数获取当前月份的记录排名（按子句分区），对 srl_num 之后的月份中的行进行排序。

# jquery - jqplot：如何不渲染任何 x 轴标签

> ID：14440519
> 
> 赞同：3
> 
> 时间：2013-01-21T14:15:32.077
> 
> 标签：jquery, jqplot

我怎样才能让没有 xaxis 标签得到渲染，比如

```
xaxis: {
    renderer: $.jqplot.CategoryAxisRenderer,
    ticks: jsonColsObj,
    labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
    tickRenderer: $.jqplot.CanvasAxisTickRenderer,
    tickOptions: {
      angle: -30,
      fontFamily: 'Arial',
      fontSize: '9pt'
    }
}, 
```

对于`jsonColsObj`，我传入`['']`，对于勾号`null`，`''`但它总是显示`1`x 轴标签，你知道如何解决这个问题吗？

[这是一个jsfiddle](http://jsfiddle.net/YX9wX/13/)

我正在使用方法`generateStackedBarCharts(data, label, [''], targetDiv);`，第三个参数作为我的 x 轴标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:20:23.410

您可以使用删除标签

```
showLabel: false 
```

在该`TickOptions`部分中...[您在此处更新的 jsfiddle](http://jsfiddle.net/YX9wX/14/)和此处[的 jqPlot 选项文档](http://www.jqplot.com/docs/files/jqPlotOptions-txt.html)

# c++ - 如何确定是否在 Qt 中进行调试

> ID：14440522
> 
> 赞同：1
> 
> 时间：2013-01-21T14:15:37.093
> 
> 标签：c++, linux, qt, debugging

我正在使用 Linux 和 Qt。我只想在调试时编译某些代码。在 Windows 中，我习惯于执行以下操作：

```
#ifdef _DEBUG
..code...
#endif 
```

然而，这不起作用。我正在编译调试版本而不是发布版本。在发布时不编译某些代码，但在调试构建时编译它们的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:18:03.163

#ifdef QT_DEBUG

..代码...

＃万一

# android - Foursquare 签到通过本机应用程序没有帐户

> ID：14440524
> 
> 赞同：0
> 
> 时间：2013-01-21T14:15:43.393
> 
> 标签：android, iphone, geolocation, foursquare

我有许多业务地点，我正在为它们构建一个适用于 Android 的本地应用程序和一个适用于 iPhone 的本地应用程序。

我希望人们能够在我的应用程序内登记入住我的机构。我不希望用户必须创建 Foursquare 帐户，我只想使用 Foursquare 的签到功能，而不是重新发明轮子并创建所有签到地理定位逻辑。

请记住，我想跟踪个人在特定位置签到的次数。

对解决方案或方向有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:12:36.110

签到的大部分目的是将其用作人们向所有朋友广播的一种广告。在这种情况下，您肯定希望他们使用自己的帐户。

否则谁来登记？约翰·多？那有什么意义呢？

如果您担心没有足够的客户使用 Foursquare，那么 Facebook 可能是一个可行的替代方案？

# c++ - 模板函数以外的 OCaml 多态性示例？

> ID：14440531
> 
> 赞同：3
> 
> 时间：2013-01-21T14:16:01.700
> 
> 标签：c++, oop, generics, polymorphism, ocaml

我试图自己理解，OCaml 语言有哪种形式的多态。

我是由一个例子提供的

```
let id x = x 
```

这个例子不等同于 C++ 模板函数吗

```
template<class A> A id(A x) { return x; } 
```

如果是这样，那么我的问题是：OCaml 中是否还有其他形式的多态性？这个概念在命令式语言的世界中被称为“通用算法”，而不是“多态性”。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-21T14:42:39.780

基本上有三种语言特性有时被称为多态性：

*   [参数多态性](http://en.wikipedia.org/wiki/Parametric_polymorphism)（即“泛型”）
*   [子类型多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)，这是类型的子类型提供比超类型更具体的操作版本的能力，即覆盖方法的能力（以及运行时系统调用基于方法的正确实现的能力）对象的运行时类型）。在 OO 语言中，这通常简称为“多态性”。
*   所谓的[ad-hoc polymorphism](http://en.wikipedia.org/wiki/Ad-hoc_polymorphism)，即重载函数/方法的能力。

正如您已经发现的那样，OCaml 具有参数多态性。它还具有亚型多态性。它没有临时多态性。

由于在您的标题中您要求提供示例，因此这是 OCaml 中子类型多态性的示例：

```
class c = object
    method m x = x+1
end

class d = object
    inherit c
    method m x = x+2
end

let main = 
    let o:c = new d in
    print_int (o#m 2) 
```

这将打印`4`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T14:30:34.423

这种多态称为*泛型编程*，但其背后的理论概念称为[***参数多态***](http://en.wikipedia.org/wiki/Parametric_polymorphism)。

您提供的两个示例确实显示了参数多态性，但 OCaml 由一个强大的推断类型检查器支持，而不是由 C++ 提供的那个（这是一种更实用且有更多警告的解决方案）所以真正的区别是在 C++ 中代码是重复的对于您在代码中使用它的每种类型，而在 OCaml 中，它由类型检查器通过验证是否存在通过[统一替换隐式类型变量来解决。](http://en.wikipedia.org/wiki/Unification_%28computer_science%29)

在 OCaml 中，一切都可以是多态的，因为通常没有任何东西用类型注释，所以在实践中，如果某些东西可以用作任何函数的参数，那么它是隐式允许的。

例如，您可以使用类型变量来定义多态方法：

```
let swap ((x : 'a), (y : 'b)) : 'b * 'a = (y, x) 
```

这样这将适用于任何类型的`'a`o `'b`。

OCaml 的另一个强大的多态特性是[函子](http://mirror.ocamlcore.org/ocaml-tutorial.org/modules.html#Functors)（不是常见的 C++ 函子），而是由其他模块参数化的模块。这个概念听起来更可怕，但它们确实代表了 OCaml 代码的更高阶的多态行为。

# android - 如何在我的 UI 中显示 Intent.ACTION_VIEW 调用的 Google 地图？

> ID：14440535
> 
> 赞同：0
> 
> 时间：2013-01-21T14:16:17.360
> 
> 标签：android, google-maps, android-intent

根据新的 Google Maps APIs 版本 2 的说明，我擅长显示我想在我的应用中显示的 Google Maps。

但我有一个问题：如您所知，我们可以使用 Intent.ACTION_VIEW 轻松显示 Google 地图。在这种情况下，我们只能看到默认的谷歌地图的屏幕。我想在我的 XML 布局或布局类中显示此地图（由 intent.ACTION_VIEW 调用）。也就是说，我想在我的自定义布局（UI）中插入这个地图（由intent.ACTION_VIEW调用）。AFAIK，这个 UI 很可能是 .java。

请让我知道如何。这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:19:07.450

> 这是不可能的？

您不能在自己的应用程序中嵌入其他应用程序的 UI。欢迎您使用 Maps V1 或 Maps V2 API 将 Google 地图添加到您的应用程序中，但您不能将实际的地图*应用程序*嵌入到您的 UI 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:20:50.403

Intent.ACTION_VIEW 用于启动另一个应用程序。这意味着，您将离开您的应用程序，并打开谷歌地图应用程序。

如果要添加自己的 UI，则必须在自己的应用程序中使用 MapView。 [Developers.google.com](https://developers.google.com/maps/documentation/android/)

# php - 发布请求或网络套接字以进行移动到网络应用程序通信并进行验证？

> ID：14440539
> 
> 赞同：0
> 
> 时间：2013-01-21T14:16:28.140
> 
> 标签：php, authentication

我正在设计一个 PHP Web 应用程序，它将接受和处理从移动设备发送的数据。我计划使用 HTTP 发布请求从移动设备发送数据，但我需要验证 Web 应用程序接收的数据是否来自我的一台设备。

会给每个设备一个唯一的 ID 并将其作为发布请求的一部分传递（加密），然后验证服务器端是否满足此要求，或者打开 Web-socket 连接并通过此进行某种验证是更好的解决方案？

提前致谢，

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:22:28.357

我认为您的唯一 ID 是合适的，但取决于您可能也想查看 https 的安全级别。确保 ID 值与您发送的消息或其他内容进行了哈希处理，因此它永远不会是相同的值，因此如果您担心这可能会发生，那么对于某人仅手动重新创建消息以欺骗您的系统来说并不容易。

# .net - 依赖注入避免在启动时加载所有内容

> ID：14440549
> 
> 赞同：7
> 
> 时间：2013-01-21T14:16:46.860
> 
> 标签：.net, dependency-injection, mvp

我正在尝试将依赖注入与 MVP 一起使用，将所需的依赖注入到构造函数中。我遇到的问题是，如果我在根 MainWindowPresenter 上使用依赖注入，它的所有子演示者及其子演示者、视图和服务都将在启动时加载。由于所有内容都是从 MainWindowPresenter 直接或间接加载的，这意味着整个应用程序将在启动时加载到内存中。

我知道在 .NET 中在启动时创建所有对象可能不会花费很多，但我不禁认为这是浪费内存，因为它们永远不会同时使用。有一些像 AboutPresenter 或 HelpPresenter 可能永远不会使用。我错过了还是依赖注入应该如何工作？有没有解决的办法？

我能找到解决这个问题的唯一方法是使用工厂，然后可以在需要时创建子演示者/视图/服务。例如：

```
class HelpFactory : AbstractHelpFactory
{
    public IHelpPresenter Create()
    {
         IHelpService helpService = new ConcreteHelpService();
         IHelpView helpView = new ConcreteHelpView();

         HelpSearchPresenter searchPresenter = HelpSearchFactory.Create();

         return HelpPresenter(helpView, helpService, searchPresenter);
    }
} 
```

这与工厂依赖子工厂基本相同，但至少它们比演示者/视图/服务更轻，并且在需要之前不需要加载子工厂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:30:15.383

有几种可能的解决方案（从一般到具体排列）：

### 作文根

确定**组合根**。[这是模块组合在一起的应用程序中的（最好）唯一位置](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)。**这是组合所有依赖项的优选解决方案**。

### 抽象工厂

您可以注入*类似*依赖项的工厂，而不是注入依赖项。这将帮助您推迟创建依赖项并仅解决当前情况所需的依赖项。使用[ninject.extension.factory 的](https://github.com/ninject/ninject.extensions.factory/wiki)示例：

```
kernel.Bind<IDependencyFactory>().ToFactory();

kernel
    .Bind<IDependency>()
    .To<DependencyImpl1>()
    .NamedLikeFactoryMethod((IDependencyFactory f) => f.GetJob());

var abstractFactory = kernel.Get<IDependencyFactory>();

var dependency = abstractFactory.GetJob(); 

public abstract class IDependency { }
public class DependencyImpl1 : IDependency { }

public interface IDependencyFactory
{
    IDependency GetJob();
    Lazy<IDependency> GetLazyJob();
} 
```

这也有助于**避免类的过度注入**，例如构造函数过度注入

### 综合服务

不是注入依赖项，而是注入聚合处理例程的服务。[在重构聚合服务](http://blog.ploeh.dk/2010/02/02/RefactoringToAggregateServices.aspx)中阅读更多内容

### 延迟加载

有时，由于在启动期间创建过于昂贵和/或很少使用等原因，有必要推迟解决依赖项。在这些情况下，可以注入 Lazy 而不是 IDependency。[使用 Ninject.Extension.Factory 的示例](https://github.com/ninject/ninject.extensions.factory/wiki/Lazy)：

```
kernel
    .Bind<Lazy<IDependency>>()
    .To<Lazy<IDependency>>()
    .NamedLikeFactoryMethod((IDependencyFactory f) => f.GetLazyJob());

var abstractFactory = kernel.Get<IDependencyFactory>();

var lazyDependencyUsingFactory = abstractFactory.GetLazyJob(); 
```

使用无工厂[延迟加载的](http://www.edcourtenay.co.uk/musings-of-an-idiot/2012/11/23/lazy-binding-with-ninject)示例：

```
kernel
    .Bind<IDependency>()
    .To<DependencyImpl1>();

kernel
    .Bind(typeof (Lazy<>))
    .ToMethod(context =>
            ((ILazyLoader) Activator.CreateInstance(typeof (LazyLoader<>).MakeGenericType(context.GenericArguments),
                                                    new object[] { context.Kernel })).Loader);

var lazyDependency = kernel.Get<Lazy<IDependency>>();

lazyDependency.Dump();
lazyDependency.Value.Dump(); 
```

**ps ：**[此处](https://gist.github.com/4587186)提供完整示例

# python - Python中的函数别名

> ID：14440552
> 
> 赞同：24
> 
> 时间：2013-01-21T14:16:56.910
> 
> 标签：python

我想要一份`print`被调用的函数的副本`debug`。如何在 Python 中给函数起别名？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-21T14:18:33.067

你可以简单地`debug = print`在 Python 3 中赋值。

在 Python 2`print`中不是函数。没有办法给自己一个与(等)`debug`完全相同的语句。你能做的最好的就是在语句周围写一个包装器：`print``print 1,``print 1 >> sys.stderr``print`

```
def debug(s):
    print s 
```

您还可以禁用该`print`语句并使用 Python 3 版本：

```
from __future__ import print_function
debug = print 
```

如果这样做，则不能再使用语句版本 ( `print x`)。如果您不破坏任何旧代码，这可能是要走的路。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-21T14:19:04.540

在 Python 2.x 中，您可以执行以下操作：

```
def debug(s):
    print(s) 
```

在 3.x 中，您可以只使用赋值：

```
debug = print 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T14:20:01.660

您可以定义一个新函数`debug`，例如：

```
def debug(text):
    print text 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-21T14:20:22.823

这取决于您的 Python 版本。Python 3 只允许您这样做：

```
debug = print 
```

但是，旧版本认为`print`是内置关键字，因此您必须将其包装在自己的函数中：

```
def debug(msg):
    print(msg) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-27T21:16:39.550

该`def`方法的优点是回溯可以更清楚地识别别名。这可以帮助说“什么是' `print`'？”的用户。如果他们只使用`debug`（别名）：

```
>>> def f():
...  print x
>>> g = f
>>> g()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in f
NameError: global name 'x' is not defined
>>> 
>>> def h():
...  return f()
... 
>>> h()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in h
  File "<stdin>", line 2, in f
NameError: global name 'x' is not defined 
```

# r - 如何将两个变量转置/转换为一行？

> ID：14440553
> 
> 赞同：3
> 
> 时间：2013-01-21T14:17:11.223
> 
> 标签：r, reshape, reshape2

我需要转这个

```
id  |  amount |  day
---------------------
 A  |   10    |  0 
 A  |   54    |  8
 A  |   23    |  18
 A  |   43    |  28
 A  |   87    |  51
 B  |   34    |  0
 B  |   76    |  1 
 B  |   12    |  7 
```

进入这个

```
id | a1 | a2 | a3 | a4 | a5 | d1 | d2 | d3 | d4 | d5 
--------------------------------------------------------
 A | 10 | 54 | 23 | 43 | 87 | 0  |  8 | 18 | 28 | 51
 B | 34 | 76 | 12 | 0  |  0 | 0  |  1 |  7 | 0  | 0 
```

IE。通过 id 将 df 的行转置/转换为未知数量的列，由于长度不等，将零放在可能存在空值的位置。

我已经尝试过

```
df <- data.frame(id=c('A','A','A','A','A','B','B','B'),    amount=c(10,54,23,43,87,34,76,12), day=c(0,8,18,28,51,0,1,7))
library(reshape2)
x <- dcast(df, id ~ day, mean, value = 'amount') 
```

但这并不完全正确。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:50:44.277

`reshape()`在引入“时间”变量后使用基数 R ：

```
df$time <- ave(as.numeric(as.character(df$id)), df$id, FUN = seq_along)
df
#   id amount day time
# 1  A     10   0    1
# 2  A     54   8    2
# 3  A     23  18    3
# 4  A     43  28    4
# 5  A     87  51    5
# 6  B     34   0    1
# 7  B     76   1    2
# 8  B     12   7    3
reshape(df, direction = "wide", idvar="id", timevar="time")
#   id amount.1 day.1 amount.2 day.2 amount.3 day.3 amount.4 day.4 amount.5 day.5
# 1  A       10     0       54     8       23    18       43    28       87    51
# 6  B       34     0       76     1       12     7       NA    NA       NA    NA 
```

可选步骤：

1.  重新组织列顺序：

    ```
    df2 <- df2[c("id", 
                 grep("amount", names(df2), value=TRUE), 
                 grep("day", names(df2), value = TRUE))] 
    ```

2.  替换`NA`为`0`：

    ```
    df2[is.na(df2)] <- 0
    df2
    #   id amount.1 amount.2 amount.3 amount.4 amount.5 day.1 day.2 day.3 day.4 day.5
    # 1  A       10       54       23       43       87     0     8    18    28    51
    # 6  B       34       76       12        0        0     0     1     7     0     0 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:50:17.747

我必须创建一个新变量 dd

```
df$dd <-unlist(by(df$id,df$id, FUN= function(x)seq(1,length(x))))

id amount day dd
1  A     10   0  1
2  A     54   8  2
3  A     23  18  3
4  A     43  28  4
5  A     87  51  5
6  B     34   0  1
7  B     76   1  2
8  B     12   7  3

mm <- melt(df,id.vars=c('id','dd'),measure.vars=c('amount','day'))
dcast(mm,id~variable+dd,fun.aggregate=mean)
id amount_1 amount_2 amount_3 amount_4 amount_5 day_1 day_2 day_3 day_4 day_5
1  A       10       54       23       43       87     0     8    18    28    51
2  B       34       76       12      NaN      NaN     0     1     7   NaN   NaN 
```

**编辑** 为了得到一个很好的输出 0 ，我用自定义函数替换了 mean

```
dcast(mm,id~variable+dd,fun.aggregate=
                       function(x) ifelse(is.nan(mean(x)),0,mean(x)))
  id amount_1 amount_2 amount_3 amount_4 amount_5 day_1 day_2 day_3 day_4 day_5
1  A       10       54       23       43       87     0     8    18    28    51
2  B       34       76       12        0        0     0     1     7     0     0 
```

# python - 使用 networkx 和 gexf 格式时的节点位置

> ID：14440561
> 
> 赞同：4
> 
> 时间：2013-01-21T14:17:36.923
> 
> 标签：python, networkx

我正在使用 networkx 创建一个`diGraph`对象，用节点和边（包括几个特征）填充它，然后编写一个我用 Gephi 可视化的 gefx 文件。

```
import networkx as nx
dg = nx.DiGraph()
dg.add_node(attribute1, 2, etc...)
dg.add_edge(attribute1, 2, etc...)
nx.write_gexf("output.gexf") 
```

这个过程完美无缺。现在我需要为节点分配位置。我已经看到networkx可以以某种方式做到这一点（[http://networkx.github.com/documentation/latest/examples/drawing/house_with_colors.html](http://networkx.github.com/documentation/latest/examples/drawing/house_with_colors.html)），而且我知道gexf文件有一个viz标签（[http://gexf .net/format/viz.html](http://gexf.net/format/viz.html)）。我有一本包含节点名称及其坐标的字典。有什么想法把所有这些放在一起吗？

到目前为止，我的选择是读取已经生成的 gexf 文件，查找节点并创建`viz:position`标签。

但是，它不是很有效，我想在添加节点时以某种方式直接执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T17:53:36.173

节点数据可用作每个节点的 Python 字典。这是一个显示 GEXF 节点即数据如何存储和操作的示例。

```
In [1]: import sys

In [2]: import urllib2

In [3]: import networkx as nx

In [4]: data = urllib2.urlopen('http://gexf.net/data/viz.gexf')

In [5]: G = nx.read_gexf(data)

In [6]: print G.node['a']
{'viz': {'color': {'a': 0.6, 'r': 239, 'b': 66, 'g': 173}, 'position': {'y': 40.109245, 'x': 15.783598, 'z': 0.0}, 'size': 2.0375757}, 'label': 'glossy'}

In [7]: G.node['a']['viz']['position']['x']=10

In [8]: G.node['a']['viz']['position']['y']=20

In [9]: print G.node['a']
{'viz': {'color': {'a': 0.6, 'r': 239, 'b': 66, 'g': 173}, 'position': {'y': 20, 'x': 10, 'z': 0.0}, 'size': 2.0375757}, 'label': 'glossy'}

In [10]: nx.write_gexf(G,sys.stdout)
<?xml version="1.0" encoding="utf-8"?><gexf xmlns:ns0="http://www.gexf.net/1.1draft/viz" version="1.1" xmlns="http://www.gexf.net/1.1draft" xmlns:viz="http://www.gexf.net/1.1draft/viz" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/2001/XMLSchema-instance">
  <graph defaultedgetype="undirected" mode="static">
    <nodes>
      <node id="a" label="glossy">
        <ns0:color b="66" g="173" r="239" />
        <ns0:size value="2.0375757" />
        <ns0:position x="10" y="20" z="0.0" />
      </node>
    </nodes>
    <edges />
  </graph>
</gexf> 
```

# rspec - 创建新的存根方法，检查该方法是否存在于 Rspec

> ID：14440562
> 
> 赞同：1
> 
> 时间：2013-01-21T14:17:43.110
> 
> 标签：rspec, rspec-rails, stub, stubbing

我想创建一些特别的存根方法`stub_check`并`stub_chain_check`确保该方法存在。

例如：

```
#spec/controllers/payments_controller_spec.rb`

describe PaymentsController do
  it "makes a payment" do
    # Ensure method exists, Payment.new.respond_to?(:pay)
    # the API of Payment can change and tests will pass
    raise "Stubbing wrong method Payment#pay method doesn't exists" unless Payment.new.respond_to?(:pay)
    Payment.any_instance.stub(pay: true) # We can stub method now
    # Code...
  end
end 
```

但我想像`Payment.stub_check(pay: true)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:40:42.110

您可以在您的 spec_helper.rb 文件上创建一个助手：

```
def stub_check(resource, method, value, message)
  raise message unless resource.new.respond_to?(method)
  resource.any_instance.stub(method => value)
end 
```

你用它来称呼它

```
stub_check(Payment, :pay, true, 'Stubbing wrong method Payment#pay method doesn't exists') 
```

编辑：如果您希望它像存根一样工作，您可能需要修改 mocka 或您正在使用的匹配器（我猜它是 mocka 因为“any_instance”方法）

# asp.net - 对于 cookie 中毒演示，在 vb.net 中写入和读取 cookie

> ID：14440571
> 
> 赞同：0
> 
> 时间：2013-01-21T14:18:15.520
> 
> 标签：asp.net, vb.net, cookies

我想测试 cookie 中毒，所以我想编辑我的一个项目。在那里，我想编写包含产品小计的 cookie，结帐页面将再次使用它来显示小计。我不确定我的想法是否正确，而且我的 cookie 也不起作用。

首先，我将这些代码放在 addcart 按钮方法下：

```
Dim aCookie As New HttpCookie("SubTotal")
aCookie.Value = objShopCart.ComputeSubTotal().ToString()
aCookie.Expires = DateTime.Now.AddDays(1)
HttpContext.Current.Response.Cookies.Add(aCookie) 
```

在结帐页面中；

```
If (Request.Cookies("aCookie") IsNot Nothing) Then
    Dim subTotal As String
    If (Request.Cookies("aCookie")("SubTotal") IsNot Nothing) Then
        subTotal = Request.Cookies("aCookie")("SubTotal")
        lblSubTotal.Text = subTotal
    End If
End If 
```

根据上面的代码，我无法读取 cookie。总是什么都没有，`Request.Cookies("aCookie")`我不知道为什么。对于 cookie 中毒演示，我打算拦截我将东西放入购物车并对其进行编辑的 cookie，因此当我到达结帐页面时，它会显示错误的小计等信息。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:31:29.167

您需要使用您保存的相同名称检索 cookie 值。例如，

```
If (Request.Cookies("SubTotal") IsNot Nothing) Then
   Dim subTotal As String
   subTotal = Request.Cookies("SubTotal").Value
End If 
```

*仅供参考，您不想将小计保存在 cookie 中，因为它可以在客户端轻松操作。将其保存在会话状态或再次在结帐页面中重新计算。*

# delphi - Indy POP3 在 TMemo 中放置标题

> ID：14440572
> 
> 赞同：2
> 
> 时间：2013-01-21T14:18:21.727
> 
> 标签：delphi, indy, email, pop3

我想将 POP3 消息中的标题文本检索到 TMemo 中。我无法弄清楚如何做到这一点。这是我到目前为止所得到的：

```
try
IdPOP31.Connect();
MsgCount := IdPOP31.CheckMessages;
for i:= 1 to MsgCount do
begin
try
 FMailMessage := TIdMessage.Create(nil);
 IdPOP31.Retrieve(i,FMailMessage);
 Memo1.Lines.Add('Mesage #: ' + IntToStr(i);
 Memo1.Lines.Add('From name: ' + FMailMessage.From.Name);
 Memo1.Lines.Add('From address: ' + FMailMessage.Sender.Address);
 Memo1.Lines.Add('Subject: ' + FMailMessage.Subject);
 Memo1.Lines.Add('From:' + FMailMessage.From.Address);
 Memo1.Lines.Add('Recipients: ' + FMailMessage.Recipients.EMailAddresses);
// HOW DO I GET THE HEADER ???????
 Memo1.Lines.Add(FMailMessage.Body.Text);
 Memo1.Lines.Add('=================================================');
finally
 FMailMessage.Free;
end;
IdPOP31.Disconnect;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:27:18.997

您可以使用[`Headers`](http://www.indyproject.org/docsite/html/TIdMessage_Headers.html)消息的属性，它是[`TStringList`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TStringList)后代。因此，要将消息的标题值添加到您的备忘录中，您可以使用以下语句之一：

```
// either you can use AddStrings method
Memo1.Lines.AddStrings(IdMessage1.Headers);
// or add it as string list's text e.g.
Memo1.Lines.Add(FMailMessage.Headers.Text); 
```

# c# - 让计时器执行 bidder00_TextChanged 事件

> ID：14440578
> 
> 赞同：1
> 
> 时间：2013-01-21T14:18:33.677
> 
> 标签：c#, winforms, timer, textchanged

我试图弄清楚如何使它在我的`timer`滴答声中执行 a`bidder00_TextChanged`或类似的东西。

这甚至可能吗？如果不是，还有其他方法吗？我尝试在 Google 上搜索它，但没有得到任何结果，如果您发现我遗漏的任何内容，请在此处发布。

我真的没有任何代码，但这里是：

```
private void bidder00_TextChanged(object sender, EventArgs e)
{
    if (bidder00.Text == addbidder1.Text)
    {
        bidBtn1.PerformClick();
    }
} 
```

那是我的`TextChanged`活动

我`timer`没有任何代码，因为它将执行`bidder00_TextChanged`事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:26:55.367

您可以创建一个方法`Perform()`并从您的事件处理程序中调用它：

```
private void timer1_Tick(object sender, EventArgs e)
{
   Perform();
}

private void bidder00_TextChanged(object sender, EventArgs e)
{
   Perform();
}

private void Perform()
{
   if (bidder00.Text == addbidder1.Text)
   {
      bidBtn1.PerformClick();
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:28:40.943

我假设您已经将您的实际逻辑与您的`click`事件相结合，这不是一个好主意。将代码分离到一个单独的函数中，并让应用程序的两个部分调用相同的代码，例如

```
private void SubmitBid()
{
    // code you want to execute
}

private void OnSubmitBid()
{
     // confirm whether we can actually submit the bid
     if (bidder00.Text == addbidder1.Text)
     {
          SubmitBid();
     }
}

private void Timer1_OnTick(object sender, EventArgs e)
{
    // trigger code from timer
    OnSubmitBid();
}

private void bidder00_TextChanged(object sender, EventArgs e)
{
    // trigger code from text change
    OnSubmitBid();
}

private void btnBid_Click(object sender, EventArgs e)
{
    // trigger code from button press
    OnSubmitBid();
} 
```

请注意，所有 UI 控件都会触发相同的代码。那里有一个额外的文本控件验证调用（即`OnSubmitBid()`） - 如果不需要，那么您只需`SubmitBid`直接调用。

# google-analytics - Google Analytics 中的“Safari（应用内）是指什么？”

> ID：14440581
> 
> 赞同：22
> 
> 时间：2013-01-21T14:18:47.733
> 
> 标签：google-analytics

有人可以解释一下“Safari（应用内）”在 Google Analytics 中 Audience | 的含义吗？技术 | 浏览器和操作系统？

对于我们网站的谷歌分析，我们突然开始看到来自这个来源的大量流量。

听起来这只是意味着访问者是通过嵌入在应用程序中的浏览器来找我们的（例如，像网络查看控件），但似乎没有理由为什么我们应该如此突然地获得这样的流量。

仅在两天内，我们就从这个来源的零流量变成了几乎 40% 的流量，没有任何明显的原因！我们还没有做任何事情来解释这个突然出现的新流量来源（例如，我们自己没有发布任何应用程序）指向我们的网站。我们希望，如果我们能够找出“应用内”的实际含义，我们将能够理解这种流量。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-31T10:25:47.033

我使用 IOS 8.2 并更新了 1Password 和 Facebook 应用程序在一个仅对我可用的单独页面上进行了一些测试：

1.  一般 Safari 浏览器被报告为 Safari 8.0：

    Mozilla/5.0 (iPhone; CPU iPhone OS 8_2 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Version/8.0 Mobile/12D508 Safari/600.1.4

2.  1Password 报告为 Safari 6.0：

    Mozilla/5.0 (iPhone; CPU iPhone OS 6_1_3 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10B329 Safari/8536.25

3.  Facebook 应用被报告为 Safari（应用内）

    Mozilla/5.0 (iPhone; CPU iPhone OS 8_2 像 Mac OS X) AppleWebKit/600.1.4 (KHTML, 像 Gecko) Mobile/12D508 [FBAN/FBIOS;FBAV/27.0.0.10.12;FBBV/8291884;FBDV/iPhone7, 2;FBMD/iPhone;FBSN/iPhone 操作系统;FBSV/8.2;FBSS/2; FBCR/播放；FBID/电话；FBLC/en_US；FBOP/5]

测试于 2015.03.31 (yyyy.mm.dd)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-01T10:38:09.787

使用 Safari 内置搜索框的访问者现在可以通过 Google SSL 搜索发送他们的搜索，如果他们使用 iOS 6。随着人们继续升级到 iOS 6（目前iPhone 4/4S 最高版本为 6.1.3，iPhone 5 为 6.1.4）。Google 还更新了他们的用户代理解析代码和 UA，如下所示：

```
1Password
Mozilla/5.0 (iPhone; CPU iPhone OS 6_1 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) 1Password/4.1.2 (like Version/10B143 Mobile/6.1 Safari/8536.25) 
```

将被归类为 Safari（应用内）。

在下面的文章中阅读更多内容，不要完全信任 Google Analytics。

希望这可以帮助！

[iOS 6 从 Safari 更改 Google 流量](http://searchengineland.com/ios-6-change-google-traffic-from-safari-135002)

[Google Analytics 报告的 Safari（应用内）](http://www.jongales.com/blog/2013/02/13/safari-in-app-as-reported-by-google-analytics/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:52:36.737

正如您总结的那样，许多人认为这些代表来自 iOS 应用程序打开链接的流量，而不是在浏览器上，而是在应用程序内部 (WebView)。但是，我无法找到具体的 Google 文档。

至于突然增加，这并不罕见。就在昨天，我看到 HTC Hero（访问量排名第一的设备）如何在两天内从 25.000 访问/天变为 0，同时 Elocity A7 A7 互联网平板电脑从 0 到 30.000 访问/天。似乎，谷歌不断更新其用户代理解析代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-21T13:17:10.023

我注意到它在电子邮件跟踪中被报告。如果您在 GA 中设置了电子邮件跟踪，是否可以在 Safari 中打开电子邮件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-08T09:20:26.447

看起来人们通过主屏幕书签访问您的网站。“添加到主屏幕”功能，而不是通过 Safari 浏览器被列为“Safari（应用内）”。

我正在查看一个仅观看显示“WebApp”的 iPad 的 GA 帐户。看起来运行 10.3.2 及更高版本的设备显示为“Safari（应用内）”，而以下设备仅显示为“Safari”。

这也可以解释指标的突然跳跃。随着用户更新他们的 iOS 将突然被列为“Safari（应用内）”。

# java - axis2 故障：传入消息的输入流为空

> ID：14440582
> 
> 赞同：5
> 
> 时间：2013-01-21T14:18:49.217
> 
> 标签：java, axis2

我是 java web 服务和 apache axis2 的新手。每次运行客户端时，我都会收到一个错误，即传入消息的输入流为空。这些问题可能是什么？我附上了我的日志`log4j:WARN No appenders could be found for logger (org.apache.axis2.util.Loader). log4j:WARN Please initialize the log4j system properly. org.apache.axis2.AxisFault: The input stream for an incoming message is null. at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:92) at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:67) at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:354) at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421) at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229) at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165) at org.csapi.www.wsdl.parlayx.sms.notification_manager.v2_3.service.SmsNotificationManagerServiceStub.startSmsNotification(SmsNotificationManagerServiceStub.java:619) at org.di.custom.Notification.startNotification(Notification.java:142) at org.di.custom.Notification.main(Notification.java:57)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:16:56.283

我设法通过在我的**选项**对象中添加以下**设置来解决****错误**

 ****```
options.setProperty(Constants.Configuration.MESSAGE_TYPE,HTTPConstants.MEDIA_TYPE_APPLICATION_ECHO_XML);
options.setProperty(Constants.Configuration.DISABLE_SOAP_ACTION,Boolean.TRUE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T06:45:16.667

添加以下语句

```
options.setProperty(Constants.Configuration.DISABLE_SOAP_ACTION,Boolean.TRUE); 
```

在我的场景中解决了这个问题。****

# r - r中非常简单的子集选择

> ID：14440585
> 
> 赞同：1
> 
> 时间：2013-01-21T14:18:51.990
> 
> 标签：r

> **可能重复：**
> [如何通过行名而不是​​数字索引删除矩阵的行？](https://stackoverflow.com/questions/7576138/how-to-remove-rows-of-a-matrix-by-row-name-rather-than-numerical-index)
> [从R中的另一个向量中删除一个向量中的元素](https://stackoverflow.com/questions/10841511/removing-elements-in-one-vector-from-another-in-r)

我有两个向量：

```
a<-c(1,2,3,4,5,6,7,8)
b<-c(7,3,6,4,8,1) 
```

我想选择那些不在 b 中的元素

我尝试了子集（a，a！=b），但我收到了警告：

```
longer object length is not a multiple of shorter object length 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T14:21:29.810

尝试`setdiff`向量：

```
R> setdiff(a,b)
[1] 2 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:20:23.053

尝试这个：

```
a[!(a%in%b)] 
```

看`?"%in%"`。

# mysql - 在 Ruby 中访问 MySQL 存储过程

> ID：14440586
> 
> 赞同：0
> 
> 时间：2013-01-21T14:18:55.510
> 
> 标签：mysql, ruby

我一直在开发一个使用 MySQL 作为数据库的 Ruby Web 应用程序。我从朋友那里听说`mysql`gem 不能很好地与存储过程一起使用，所以我决定将`mysql2`gem 与 gem 一起使用`seqel`。

我在 MySQL 中有一个名为`AddUser(Username, Password)`. 它在 MySQL 上运行良好。出于安全原因，我想使用 gem 访问它。

[这里](http://sequel.rubyforge.org/rdoc/files/doc/prepared_statements_rdoc.html)的`sqeuel`文档只真正涵盖了如何访问使用gem 制作的数据库。我的初稿代码看起来像这样，但实际上并没有运行该过程`sequel`

```
# Connect to the database
db = Sequel.mysql2(
    :host => '127.0.0.1', 
    :database => database, 
    :username => username, 
    :password => password)

# Call the sproc
db["User"]
db.call_sproc(:insert, "AddUser", [name, pass]) 
```

错误信息是：

`Sequel::DatabaseError`

`Mysql2::Error: Query was empty`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:26:58.900

我不确定 PreparedStatement 是否真的能够调用存储过程。当然，在 JDBC 中，您必须使用 CallableStatement 来执行此操作。

由于您使用的是 Sequel，您是否看过 Sequel::DataSet::StoredProcedures ( [http://sequel.rubyforge.org/rdoc-adapters/classes/Sequel/Dataset/StoredProcedures.html](http://sequel.rubyforge.org/rdoc-adapters/classes/Sequel/Dataset/StoredProcedures.html) )？

# c - C、舍入问题。UWORD、整数和双精度数

> ID：14440587
> 
> 赞同：0
> 
> 时间：2013-01-21T14:19:01.360
> 
> 标签：c, arithmetic-expressions

关于这些操作的结果是什么，我有几个问题。

首先，如果我有两个整数并将它们相除并将结果保存为双精度数。是否存在任何舍入问题，例如 1/2 等于 0.5 而不是 1。

```
double ratio = int1/int2; 
```

其次，如果我现在有这个比率并将它乘以一个 UWORD 会有什么问题吗？

```
UWORD word1 = 4098;
UWORD word2 = ratio * word1; 
```

顺便说一句，当我执行这些操作时确实会收到编译器警告

```
 narrowing or signed-to-unsigned type conversion found: double to unsigned short 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:22:11.650

您需要转换`int1`为 a`double`以便编译器知道使用浮点计算（而不是整数计算）：

```
double ratio = ((double) int1) / int2; 
```

要将浮点计算存储`ration * word1`在`UWORD`您需要再次转换它（以防止警告）：

```
UWORD word2 = (UWORD) (ratio * word1); 
```

注意：这将去掉小数，如果您需要适当的舍入，请尝试[`round()`使用](http://www.codecogs.com/reference/computing/c/math.h/round.php)`math.h`. （再次，适当的铸造！）

# c# - JavaScript Object.create 和 IE8

> ID：14440592
> 
> 赞同：6
> 
> 时间：2013-01-21T14:19:21.187
> 
> 标签：c#, javascript, sharepoint, internet-explorer-8, sharepoint-2013

我正在为 SharePoint 2013 进行软件开发。其中一部分涉及覆盖 SharePoint 的文件预览器（filepreview.debug.js 变为 myfilepreview.debug.js）。然而，我们在使用 IE8 时遇到了问题。在 IE9 中一切正常。

IE8 中引发的错误会导致您在激活了我们的自定义功能的网站集中访问的任何网站出现错误：“对象不支持此属性或方法”

对此错误进行了一些研究后，*似乎*IE8 根本不支持`Object.create`. [This Mozilla Developer post](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)似乎支持这个理论。当通过在引发错误的行之前添加此 polyfill 代码解决了问题时，我更加相信这一点：

```
if (typeof Object.create !== 'function') {
    Object.create = function (o) {
        function F() { }
        F.prototype = o;
        return new F();
    };
} 
```

我想这是有道理的，因为它模仿了 Object.create 的功能，据说 IE8 不支持这种功能。

但是，这令人困惑，因为 SharePoint 的文件预览器 javascript 工作得很好。他们的 javascript*也*使用 Object.create。更奇怪的是，在我们的 javascript 中引发错误的代码部分甚至不是我们的代码——它是 SharePoint 的。到那时为止的整个 javascript 代码实际上也与 SharePoint 的相同，除了几行。

这是默认值，直到有问题的行：

```
function $_global_filepreview() {
RegisterSod("mediaplayer.js", "_layouts/15/mediaplayer.js");
RegisterSod("sp.publishing.resources.resx", "/_layouts/15/ScriptResx.ashx?name=sp.publishing.resources&culture=" + STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));
RegisterSodDep("mediaplayer.js", "sp.publishing.resources.resx");
previewBase = (function() {
ULS7RK:
    ;
    var filePreviewUniqueId = 0;

    return {
        init: function(ctxT, listItem, extension) {
            this.fpId = ++filePreviewUniqueId;
            this.fpDomId = "FilePreviewID-" + String(this.fpId);
            this.fpCtx = ctxT;
            this.fpExtension = extension;
            this.fpListItem = listItem;
        },
        getHtml: function() {
        ULS7RK:
            ;
            return ['<div class="js-filePreview-containingElement" id=', StAttrQuote(this.fpDomId), '>', this.getInnerHtml(), '</div>'].join("");
        },
        getDomId: function() {
        ULS7RK:
            ;
            return this.fpDomId;
        },
        getContainingElement: function() {
        ULS7RK:
            ;
            var containingElement = document.getElementById(this.fpDomId);

            Sys.Debug.assert(m$.isElement(containingElement), "Containing element has not been rendered yet.");
            return containingElement;
        },
        canRender: function() {
        ULS7RK:
            ;
            return true;
        },
        getLoadingIndicatorHtml: function(customStyle) {
            if (m$.isUndefined(customStyle)) {
                customStyle = "";
            }
            return ['<div class="js-filePreview-loading-image" style="width:', this.getWidth(), 'px; height:', this.getHeight(), 'px; line-height:', this.getHeight(), 'px; text-align:center; vertical-align:middle; display: inline-block; ' + customStyle + '">', '<img src="', "/_layouts/15/images/gears_anv4.gif", '" />', '</div>'].join("");
        },

        hideLoadingIndicator: function() {
        ULS7RK:
            ;
            var containingElement = document.getElementById(this.fpDomId);

            ((m$(containingElement)).find("div.js-filePreview-loading-image")).css({
                display: "none"
            });
        },

        getInnerHtml: function() {
        ULS7RK:
            ;
            return "";
        },
        getWidth: function() {
        ULS7RK:
            ;
            return null;
        },
        getHeight: function() {
        ULS7RK:
            ;
            return null;
        },
        onPostRender: function() {
        },
        onVisible: function() {
        },
        onHidden: function() {
        }
    };
})();
//**This is where the "fix" was added originally**
blankPreview = Object.create(previewBase); <--- error is thrown here 
```

SharePoint javscript（上面）和我们的（到目前为止）之间的唯一区别是我们从一开始就删除了以下两行，尽管将它们添加回来仍然不能解决问题：

```
RegisterSod("sp.publishing.resources.resx", "/_layouts/15/ScriptResx.ashx?name=sp.publishing.resources&culture=" + STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));
RegisterSodDep("mediaplayer.js", "sp.publishing.resources.resx"); 
```

所以我的问题是：为什么我得到这个错误，即 IE8 不支持 Object.create 而在默认 javascript 中使用相同的确切函数的其他用途没有问题？

编辑：另一个论坛上的用户建议我尝试通过 sod 注册我的脚本。我将此添加到我的代码中但没有效果：

```
RegisterSod("MyFilepreview.debug.js", "_layouts/15/MyFilepreview.debug.js"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T21:48:33.853

尝试在 IE 中调试并将断点放在 SharePoint 的默认 JavaScript 文件中。您确定默认 JavaScript 中的 Object.create 实例实际上被命中了吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T17:45:45.507

~~他们没有使用`Object.create`适当的论据。~~

~~他们`Object.create({name:value})`在应该使用的时候使用`Object.create({name:{value:value}})`。~~

因此，他们可能定义了自己`Object.create`的代码，并且在您的代码之后使用了他们的代码，因此当他们的代码运行时您已经拥有了您的`Object.create`集合，并且他们可能会像您一样测试是否存在，并假设它是他们的版本，而实际上它是您的。

因此，请检查`Object.create`他们代码中的定义并检查脚本的执行顺序。

# perl - 这个著名的 JAPH 是如何工作的？

> ID：14440594
> 
> 赞同：21
> 
> 时间：2013-01-21T14:19:23.753
> 
> 标签：perl

```
not exp log srand xor s qq qx xor
s x x length uc ord and print chr
ord for qw q join use sub tied qx
xor eval xor print qq q q xor int
eval lc q m cos and print chr ord
for qw y abs ne open tied hex exp
ref y m xor scalar srand print qq
q q xor int eval lc qq y sqrt cos
and print chr ord for qw x printf
each return local x y or print qq
s s and eval q s undef or oct xor
time xor ref print chr int ord lc
foreach qw y hex alarm chdir kill
exec return y s gt sin sort split 
```

像任何其他 JAPH 一样，这会打印出“只是另一个 perl 黑客”。但是我想要半详细地剖析这个特定的 JAPH 正在利用什么行为来工作——我不擅长 Perl，但是我可以阅读一些 JAPH ......这个，没办法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T14:30:45.687

一旦你了解了基础知识，这真的不是那么难。以下是一些帮助您入门的提示：

```
not exp log srand
        # srand = 1, exp o log = id, not 1 = 0

        # $_ = undef
xor s// /x                      
        # $_ = ' '
xor s/ / length uc ord and print chr ord for qw q join use sub tied q/
        # $_ = ' length uc ord and print chr ord for qw q join use sub tied q'

xor eval 
```

请注意，`chr ord`字符串的返回第一个字符，`join use sub tied`最后有第一个字符`j`, `u`, `s`, `t`。:)

只是为了好玩，几年前我写了这个著名的japhs的扩展：

```
not srand xor s qq qx xor s x x length uc
ord and print uc chr ord for qw q join qx
xor eval xor lc eval qq x abs cos ord and
print chr ord for qw q use substr tied qx
xor print qq q q xor int eval lc qq m cos
and print chr ord for qw y abs ne or tied
hex exp ref y m xor scalar srand print qq
q q xor sin abs eval q x log srand ord or
printf uc chr ord foreach qw q package qx
xor sqrt eval lc qq y sqrt cos and printf
chr ord for qw x each return local x y or
print qq s s and uc exp eval q s undef or
oct xor time xor ref print chr int ord lc
for qw y hex alarm chdir kill exec return
y s xor log exp eval q x print chr length
join qw y length for map substr chr shift
y x or sqrt abs ord lc and eval print q q
q and s q q lcfirst chr eval log shift qx 
```

打印真正的^(™</sup> 字符串`"Just another Perl hacker,\n"`。)

这是一个包含德语圣诞问候的较小版本：

```
not exp log srand xor s qq qx xor
s x x length uc ord and print chr
ord for qw q find redo ord helpme
eval scalar qx xor eval xor print
q q q xor int eval lc q m cos and
print chr ord for qw y flock each
s tell y m gt sin ref study split 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-21T14:56:39.823

这个 JAPH 的第一次出现似乎是在[http://www.perlmonks.org/?node_id=290607](http://www.perlmonks.org/?node_id=290607)

正如 PerlMonks 线程所述，现在有一个自动工具可以进行这种混淆： http: [//namazu.org/~takesako/ppencode/](http://namazu.org/~takesako/ppencode/)

你可以阅读它的[源代码](http://namazu.org/~takesako/ppencode/ppencode)，但是逆向工程更有趣:)

例如，这是打印空格的代码：

```
stas@bp0907:~$ perl -e 'length q chmod lc and print chr ord q q eq'
 stas@bp0907:~$ 
```

这是打印 ' ' 字符的唯一方法吗？实际上，不，刷新会产生：

```
stas@bp0907:~$ perl -e 'oct oct hex ord q else and print chr ord q q q'
 stas@bp0907:~$ 
```

很酷，两种变体都以相同的结尾`and print chr ord q q ...`。因此，在此之前的一切都必须评估为真正的价值，并且只是为了抹黑我们的眼睛。

然后，`print chr ord`可以简化为简单地`print`在该上下文中，因为`chr(ord($str))`仅从 中选择第一个字符`$str`。所以归结为：

```
stas@bp0907:~$ perl -e 'print q q eq'
 stas@bp0907:~$ 
```

`q q eq`是`q`引用的不寻常表示，它更容易识别为`q ( e)`. 相同的逻辑适用于原始的、更加模糊的 JAPH：`print chr ord for qw y ... y`将选择`y`字符之间的所有内容，并以空格分隔作为数组。

* * *

有一个相关的主题，它涉及被塑造成 ASCII 艺术的 Perl 代码。也有一个 CPAN 模块：[Acme::EyeDrops](http://cpan.me/Acme::EyeDrops)

# php - 从 php 中未最后插入的 sql 数据库中检索 id 值

> ID：14440600
> 
> 赞同：0
> 
> 时间：2013-01-21T14:19:56.640
> 
> 标签：php, mysql, sql

我有一个专为足球运动员设计的数据库，因此表中包含以下字段：

*   Person_ID
*   名
*   姓
*   网卡名称
*   地址第一行
*   联系电话
*   出生日期
*   邮政编码

我需要在`Person_ID`不实际输入 ID 号码的情况下为玩家提取号码，因为玩家不会知道他们的个人号码，并且设计为仅供系统使用。

当输入某些值时，我有用于选择播放器的 My sql 代码：

```
SELECT `Person_ID` FROM `person` WHERE `First_Name` = 'A Name' and `Surname` = 'Another Name' 
```

然而，当放置到函数中时，这在 php 中并不会很好地返回。我目前拥有的功能如下所示（php）

```
function showid($fname, $sname, $d) {
    $sql = "SELECT `Person_ID` FROM `person` WHERE `First_Name` = '$fname' and `Surname` = '$sname'";
    $result = mysqli_query($d, $sql);
    if (!$result)
        print ("$sql failed".mysqli_error($d));
    else {
        print ("$fname $sname is selected<br>");
    }
} 
```

`$name`并且`$sname`是用户输入的值，然后他们将能够转移到不同的团队或更新他们的帐户等，但我需要选择 ID，以便进一步的功能和查询可以充分发挥作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-09T05:26:06.667

如果要获取所选玩家的 ID，请使用 fetch_array 函数

[http://php.net/manual/en/mysqli-result.fetch-array.php](http://php.net/manual/en/mysqli-result.fetch-array.php)

```
function showid($fname, $sname, $d) {
    $sql = "SELECT `Person_ID` FROM `person` WHERE `First_Name` = '$fname' and `Surname` = '$sname'";
    $result = mysqli_query($d, $sql);
    if (!$result)
        print ("$sql failed".mysqli_error($d));
    else {
        print ("$fname $sname is selected<br>");
    }

    $row = $result->fetch_array(MYSQLI_ASSOC);
    echo "Your ID is" . $row['Person_ID'];
} 
```

这当然假设只有一个结果（否则我们将不得不循环），因此您可能需要检查 $result->num_rows 是否等于 1 并在它不是时返回错误（假设您没有在数据库中使用 UNIQUE）

# c++ - 如何使用 C++ 在注册表中插入变量值？

> ID：14440607
> 
> 赞同：0
> 
> 时间：2013-01-21T14:20:15.677
> 
> 标签：c++, windows, variables, registry

> **可能重复：**
> [初始化时字符数组出错](https://stackoverflow.com/questions/9149950/char-array-gives-error-when-initializing)

我想在 windows 注册表中插入一个环境变量，所以我绑定了以下 C++ 代码：

```
string appDataPath = getenv("appdata");

    HKEY hkey;
    char value[] = appDataPath.c_str();

    RegOpenKeyEx(HKEY_CURRENT_USER, "Software\\Microsoft\\Windows\\Currentversion\\Run", 0, KEY_SET_VALUE, &hkey);
    RegSetValueEx (hkey, "MyProgram", 0, REG_SZ, (LPBYTE) value, strlen(value) + 1);
    RegCloseKey(hkey); 
```

代码块调试输出告诉我：`error: initializer fails to determine size of 'value'` 我认为这是因为编译器需要在编译之前知道我的变量的大小，但是我不知道如何解决这个问题......

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:24:30.147

`c_str()`返回 a `const char*`，而不是 a `char[]`。改变

```
char value[] = appDataPath.c_str(); 
```

到

```
const char* value = appDataPath.c_str(); 
```

编译器给出错误是因为数组变量需要一个长度 - 没有提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:23:38.497

采用

```
const char * value = appDataPath.c_str(); 
```

（阅读 <string> 参考找到 的返回类型`c_str()`，它会告诉你确实是`const char *`。）

* * *

关于如何连接两个字符串的问题：

使用 C++ 字符串而不是使用`char *`s 执行此操作，并在以后转换它们：

```
string newstring = appDataPath;
newstring.append("some text");
const char * value = newstring.c_str(); 
```

# android - SELECT 在 Android 上无与伦比

> ID：14440608
> 
> 赞同：0
> 
> 时间：2013-01-21T14:20:17.700
> 
> 标签：android, linux, bash, shell

我已经使用了下面的脚本来提供一个选项菜单，但它提供了一个

```
syntax error: 'select' unmatched 
```

这是我无法使用 elif 命令的脚本部分，因为 android 无法识别它。

```
OPTIONS="Continue Quit"
       select opt in $OPTIONS; do
if [ "$opt" = "Quit" ]; then
            echo closing Android Hardening
sleep 5
            exit
fi

if [ "$opt" = "Continue" ]; then

echo       ANDROID
echo      HARDENING

else 
    echo incorrect selection restart application
sleep 7 

exit 1

fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:23:24.753

您必须关闭 select ... 使用匹配的 od

# eclipse - Eclipse中的ANTLR测试用例

> ID：14440609
> 
> 赞同：0
> 
> 时间：2013-01-21T14:20:18.497
> 
> 标签：eclipse, testing, antlr, grammar

我在 Eclipse 中使用 ANTLR IDE 并尝试测试我写的语法。测试工作正常，但我无法保存测试用例——我收到错误“无效的测试名称”。是否有我缺少的特定后缀？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:01:58.877

原来这只是一个日食错误。重启解决了！

# javascript - 如何将图像添加到新页面

> ID：14440617
> 
> 赞同：0
> 
> 时间：2013-01-21T14:20:41.930
> 
> 标签：javascript, html

我正在学习 HTML 和 javascript，但无法完全发挥作用：

我正在创建一个新页面，并希望在其上显示图像：

```
thepage= window.open('', '', 'height=700,width=800,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes'); 
```

该页面在获得焦点时显示，但是当我尝试将图像放在那里时，我最多只会得到红色和白色的 x 框。

我努力了：

```
thepage.document.write(<img src=".\Images\theImage.jpg") 
```

但是，即使图像代码与它工作的主页和其他各种东西相同，这也不起作用。

请注意，我不想要仅显示图像的弹出窗口，而是包含与主页相同图像的全新页面（至少开始时）。

我已经到了看不到树木的地步，即使我知道这一定很简单！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:32:40.367

也许尝试这样的事情：

```
// open your new window
var theArena = window.open('', '', 'height=700,width=800,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes');

// create a base tag, and set the HREF to the same as your current page.
// This should allow you to use relative URLs for images and links
var base = theArena.document.createElement('base');
base.href = document.location.href
theArena.document.body.appendChild(base);

// Now use createElement to build the element
var img = theArena.document.createElement('img');
img.src = "./Images/theImage.jpg"; // make sure the URL is valid
theArena.document.body.appendChild(img); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:23:32.503

红色和白色 X 框可能表示您指定的图像源不正确。您是否尝试将您的相对 URL 更改为固定的？

相反，`.\Images\theImage.jpg`提供完整的图像 URL 总是更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:27:27.170

好的，你有一个错字，你的引号在错误的地方，但尝试这样的事情：

```
var thepage = window.open('', '', 'height=700,width=800,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes');
thepage.document.body.appendChild("<img src=\".\Images\theImage.jpg\">"); 
```

请检查图像的位置是否正确，因为我希望它是这样的。`/Images/theImage.jpg`

# php - 在 jquery 对话框中使用时，ajaxForm 未运行

> ID：14440618
> 
> 赞同：0
> 
> 时间：2013-01-21T14:20:41.917
> 
> 标签：php, jquery, html, ajaxform

为什么**ajaxForm 没有在 jQuery 对话框模式确认中运行，**只要它包含在“删除项目”按钮中。

**这是我的 jquery 对话框：**

```
 <div id="deleteDialogForPartylist" title="Delete this item?">
      <form id="deleteDialogForPartylistForm" action="mEdit/editPartylist/storeDataToDb/deleteData.php">
        <p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span><span id="acronymOfTheParty" style="font-weight:bolder"></span> will be permanently deleted and cannot be recovered. Are you sure?</p>
        <input type="hidden" id="deleteDialogForPartylistHiddenId" name="deleteDialogForPartylistHiddenId">
      </form>
  </div> 
```

**这是我的脚本**

```
$(function(){
$( "#deleteDialogForPartylist" ).dialog({
  autoOpen: false,
  resizable: false,
  height:225,
  hide: 'fade',
  modal: true,
  buttons: {
    Cancel: function() {
      $("#deleteDialogForPartylist").dialog('close');
    },
    "Delete item": function() {
      $('#deleteDialogForPartylistForm').ajaxForm({
            target: '#partyListInAddCandidate',
            type: "post",
            success: function(){
                alert("Success");
                $("#deleteDialogForPartylist").dialog('close');
            }
        });
    }
  }
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T10:54:26.693

`.ajaxForm()`不提交插件文档**中**所述的表单（[http://malsup.com/jquery/form/#api](http://malsup.com/jquery/form/#api)）

在您的情况下，您应该`.ajaxSubmit()`改用它，这将立即提交您的表单，如 charlietfl 的[评论所建议的那样](https://stackoverflow.com/questions/14440618/ajaxform-is-not-running-when-used-in-jquery-dialog#comment20106965_14440618)

# windows-phone-7 - 如何为枢轴项目标题添加图像

> ID：14440619
> 
> 赞同：3
> 
> 时间：2013-01-21T14:20:44.193
> 
> 标签：windows-phone-7, windows-phone-7.1, pivot

`pivot control`我正在开发一个用于在 wp7中学习的简单应用程序。

我们可以为数据透视项目添加图像而不是标题中的文本（下图中的红色标记区域）。

是否可以添加图片，请建议我

我的xml代码是：

```
 <Grid x:Name="LayoutRoot" Background="Transparent">
    <!--Pivot Control-->
    <controls:Pivot Title="MY APPLICATION" Name="mainPivot">
        <!--Pivot item one-->
        <controls:PivotItem Header="item1">
            <Grid>
                <Image Source="/SchoolList;component/Gallery/child.jpg"/>
            </Grid>
        </controls:PivotItem>

        <!--Pivot item two-->
        <controls:PivotItem Header="item2">
            <Grid>
                <Image Source="/SchoolList;component/Gallery/class.jpg"/>
            </Grid>
        </controls:PivotItem>
    </controls:Pivot>
</Grid> 
```

提前致谢

![在标记的红色区域我们可以添加图像吗](../Images/6926570212b70d772edaf4045d3ececd.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-17T20:37:41.797

使用这个提示：

```
<phone:Pivot>
        <phone:Pivot.HeaderTemplate>
            <DataTemplate>
                <Image Source="{Binding}" /> // important
            </DataTemplate>
        </phone:Pivot.HeaderTemplate> 
</phone:Pivot> 
```

然后将您的 Pivot Item 标题设置为

```
<phone:PivotItem Header="path-to-image" > 
```

![检查屏幕截图](../Images/e2ad573e3c8259a99a5c7bd1da48e891.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:00:11.130

是的。只需使用 HeaderTemplate

```
<Pivot>
    <Pivot.HeaderTemplate>
        <DataTemplate>
            <Image ... />
        </DataTemplate>
    </Pivot.HeaderTemplate>
</Pivot> 
```

我还要补充一点，虽然这通常是可能的，但不建议一般使用。除非您需要完全不同的东西的枢轴功能。这有点不直观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T05:33:26.977

借助@toni petrina 的想法，我`HeaderTemplate`使用`data binding`. 我在我的应用程序中使用带有标题模板中的图像的枢轴实现了图像库，提供了很好的外观和感觉

**Xaml 代码**是：

```
<controls:Pivot Title="Photo Gallery" Name="mainPivot" ItemsSource="{Binding PivotImages}">
        <controls:Pivot.HeaderTemplate>
            <DataTemplate>
                <Image Name="play" Source="{Binding imgSrc}" Height="80" Width="120" Margin="0,10,0,0"/>
            </DataTemplate>
        </controls:Pivot.HeaderTemplate>
        <controls:Pivot.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Image Name="mainImage" Source="{Binding imgSrc}" />
                </Grid>
            </DataTemplate>
        </controls:Pivot.ItemTemplate>
</controls:Pivot> 
```

我创建了一个简单`class`的用一个`string property`来保存`images source`并准备一个`List`并分配给`ItemsSource`页面加载事件的枢轴

```
mainPivot.ItemsSource = items; // items is the list with image sources 
```

# rake - 为什么 TeamCity 不能使用 Albacore 运行这个 Rake 构建？

> ID：14440622
> 
> 赞同：2
> 
> 时间：2013-01-21T14:20:48.767
> 
> 标签：rake, teamcity-7.0, albacore

我使用 Rake & Albacore 创建了一个构建脚本，它构建了一个解决方案并执行了单元测试。我正在尝试在 TeamCity 中进行设置。我收到这个错误。

> 无法启动构建运行器：如果您不想使用捆绑器，请先安装它。在带有解释器的 Ruby SDK 的 Gem 路径中找不到 gem：'C:\Ruby187\bin/ruby.exe'。
> 
> 隐藏堆栈跟踪
> 
> jetbrains.buildServer.agent.rakerunner.RakeTasksBuildService$MyBuildFailureException: 如果你不想使用 bundler，请先安装它。在带有解释器的 Ruby SDK 的 Gem 路径中找不到 gem：'C:\Ruby187\bin/ruby.exe'。宝石路径：C:/Ruby187/lib/ruby/gems/1.8 C:/Users/af/.gem/ruby/1.8

我添加了一个参数，其中安装了 Albacore。但是，我仍然收到错误消息。

```
GEM_PATH=C:\Ruby187\lib\ruby\gems\1.8\gems\albacore-0.3.4\albacore.gemspec 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:32:31.463

目前尚不清楚长鳍金枪鱼失踪了。错误消息表明 TeamCity 无法找到 Rake 本身！

> **无法启动构建运行器**

确切的 Rake 任务配置是什么？特别是Ruby解释器配置部分？您可以准确地告诉 TeamCity 运行哪个 Ruby，这将影响哪些 gem 可用（而 Rake 只是一个 gem）。

![TeamCity Rake 任务 Ruby 解释器部分](../Images/6ea63161e63f6818ecf29e3710db15c6.png)

看起来您安装了 Ruby 1.8.7 并且您必须安装 Albacore

```
cmd> gem install albacore 
```

你也安装了Rake吗？在 Ruby 1.8.7 中，默认情况下不包含 Rake gem。您可以通过以下方式列出机器已安装的 gem

```
cmd> gem list --local 
```

您应该安装 Rake。

```
cmd> gem install rake 
```

我实际上不确定你最终是如何让它工作的。批处理文件的内容是什么？您是否安装了任何其他 Ruby/Rake？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:25:33.277

好的，终于能够解决问题了。我只是创建了一个执行 rake 任务的批处理文件，而不是在 Team city 中使用“Rake Build Step”；使用命令行构建步骤并执行批处理文件。它还为我提供了所有构建步骤、测试运行等的完整日志。

希望这对其他人也有帮助。事实证明，您不需要设置 Rake Build Step。

# android - 在 ListView 上单击的按钮位置处的自定义对话框

> ID：14440626
> 
> 赞同：0
> 
> 时间：2013-01-21T14:21:15.363
> 
> 标签：android, listview, dialog

**-**以前我已经`Dialog`在点击按钮上展示了自定义`ListView`，但那是在**静态位置**。

**-**现在我想**在按钮**的位置上`Dialog` **动态**显示。 **`ListView`**

 **![ListView 上的对话框](../Images/bc03dbe29b88947dd3c20e89790df31d.png)

![ListView 上的对话框](../Images/29a9da053ca0bf78aed4b9101d5bfd24.png)

**-**我不确定如何在屏幕上找到按钮的位置，因为**点击被按钮吸收，所以我无法将点击转移到屏幕上。**

**-**即使`onTouch`实现了，我**也不确定**如何**找到被点击的按钮的位置，** `ListView`因为**点击被按钮吸收，ListView 不会接收到它。**

**-**所以请帮我找出解决这个棘手情况的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:32:13.533

尝试在ListView的Adapter中插入按钮点击监听，或者在按钮触摸时插入Object一个参数并在此处插入，onClickListener获取Object并验证参数。**

# excel - 从 excel 导入列表，但无法将其拆分为 4 列

> ID：14440629
> 
> 赞同：0
> 
> 时间：2013-01-21T14:21:19.777
> 
> 标签：excel, python-2.7, user-interface

我知道这是非常基本的，但我已经使用 Python 2 周了，我的头撞在墙上试图解决这个问题。我已经检查了这里的几乎每一个线程，并试图理解 Python 2.7 文档，还研究了我能找到的 Hammod 的 Programming with Win32 的任何摘录。下面是我的一段代码。我正在将一个命名范围从 excel 拉入 Python Gui。在我编码时，数据进入 row=4，column=1。问题是我需要解析这个命名范围，以便范围（即四个浮点数）在 row=4 clomuns 1,2,3,4 之间分割。我知道这是基本的。如果我能在其他任何地方找到答案，我就不会发布了。如果有人能指出我正确的方向，我将不胜感激。

```
 xl = win32com.client.Dispatch('excel.application')
    wbs = xl.Workbooks
    wb = wbs.Open('C:\Users\Owner\Desktop\AutoPrime.xls')
    xl.visible = 1
    xlSheet = xl.Sheets(1)
    xlSheet.Range('Fronts').Value

    #Frame
    Ftreas = Frame(F, relief="groove", border=2)
    Ftreas.pack(side="left")
    lp2a = Label(Ftreas, text=xl.ActiveSheet.Range('Fronts').Value, justify='center')
    lp2a.grid(row=4,column=1,  sticky='EW') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:47:45.587

虽然我以前没有使用过 Phyton，但我知道您的行将`xlSheet.Range('Fronts')`返回一个 Range 对象。您可以使用默认属性访问 Range 对象的各个单元格，例如：

```
rng = xlSheet.Range('Fronts')
val1 = rng(1, 1).Value
val2 = rng(2, 1).Value //返回范围的第 2 行/第 1 列中的单元格
arr = rng.Cells //这将返回一个 4x1 的值数组

```

# java - 使用 java keytool 生成密钥对时未找到文件异常

> ID：14440635
> 
> 赞同：1
> 
> 时间：2013-01-21T14:21:32.103
> 
> 标签：java, keytool

好吧，在使用 java key 工具生成一对密钥的过程中，我遇到了以下错误....

```
keytool error: java.io.FileNotFoundException: mykeystore (Access is denied) 
```

需要帮助来解决此错误！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-12T08:09:17.110

我也面临同样的问题。它通过在**keytool**命令期间将用户区域作为**.keystore 文件** 的目标来解决。`c:\users\<username>\filename.keystore`

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-21T09:48:28.427

您可以以管理员身份运行 cmd 并尝试。它对我有用**

# mysql - 不存在的拖放视图

> ID：14440636
> 
> 赞同：12
> 
> 时间：2013-01-21T14:21:35.080
> 
> 标签：mysql

我无法创建视图。它会抛出该表已经存在的错误，但如果我尝试删除它，它会显示未知表。我检查了这个[问题](https://stackoverflow.com/questions/10538908/schrodingers-mysql-table-exists-yet-it-does-not)，但它没有多大帮助。

```
drop view if exists foo;
create view foo ... ;
# Table foo already exists
drop table / DROP TABLE IF EXISTS foo;
# unknown table foo 
```

`Flush table/repair table`也没有解决。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-21T20:53:36.763

使用以下语法替换视图：

```
CREATE OR REPLACE VIEW `my_view` AS SELECT ... 
```

# sql - SQL 检查端口可用

> ID：14440641
> 
> 赞同：0
> 
> 时间：2013-01-21T14:21:48.060
> 
> 标签：sql

我有两张桌子。

第一个表：端口

```
Column: PORTID - integer
Column: FRONTINTERFACE - varchar  (eg, "RJ45", "BNC", "SC", "FC", "-")
Column: REARINTERFACE - varchar   (eg, "RJ45", "BNC", "SC", "FC", "-") 
```

第二个表：PortUsed

```
Column: PORTID - integer
Column: Facing - varchar(1) (eg, "F" or "R") 
```

端口表包含所有端口信息，包括前后接口类型。如果不可用，则相应的接口设置为“-”

如果端口被使用，表 PortUsed 将存储 PortID 和 Facing。

任何人都可以帮助使用 sql 查询来检查端口是否可用。

需求1：检查PortID和Facing是否不在PortUsed表中，确定该端口没有被使用。

要求 2：检查相应的 Front 或 Rear Interface 是否不是“-”

我能够在 2 个单独的 sql 查询中获得结果，但它太慢了。于是找了个sql查询把两者结合起来。我也不想使用存储过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:51:07.580

```
select *
from Ports a left join PortUsed  b on a.portid = b.portid
where b.portid is null 
  and a.FRONTINTERFACE <> '-' 
  and a.REARINTERFACE <> '-' 
```

我建议将前端和后端接口中的“-”更改为空值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:49:38.293

我花了几天时间弄清楚如何获得正确的结果。

```
SELECT PortID FROM Ports
WHERE (PortID = @PortID) 
AND (FrontInterface <> '-') 
AND (NOT EXISTS(SELECT PortID, Facing
                FROM PortUsed 
                WHERE (PortID = @PortID) AND (Facing = @Facing)
                )
    ) 
```

如果检查背面，则将 FrontInterface 替换为 RearInterface。

# java - 如何使用 JavaFX 在 Z 维度上定位形状

> ID：14440642
> 
> 赞同：0
> 
> 时间：2013-01-21T14:21:53.583
> 
> 标签：java, javafx, java-3d

我正在考虑创建一个简单的迷宫游戏来探索 JavaFX 2（Java 7 的版本）当前的 3d 功能。

我可以定位和旋转墙壁的矩形，但我似乎无法在 Z 维度上定位。

请参阅下面的代码。绿墙在左右墙的中间 - 我如何将它移到后面？请注意，没有 z() 构建器属性。

```
public final class Walls extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) {
        stage.setTitle("Walls in perspective");
        stage.setScene(makeScene());
        stage.show();
    }

    private Scene makeScene() {
        return SceneBuilder.create()
                .width(500)
                .height(500)
                .root(createRoot())
                .camera(PerspectiveCameraBuilder.create().build())
                .depthBuffer(true)
                .build();
    }

    private Parent createRoot() {
        // left wall
        Rectangle node1 = RectangleBuilder.create()
                .x(-200)
                .y(-150)
                .width(200)
                .height(200)
                .fill(Color.RED)
                .rotate(90)
                .rotationAxis(Rotate.Y_AXIS)
                .build();

        // back wall?
        Rectangle node2 = RectangleBuilder.create()
                .x(-100)
                .y(-150)
                .width(200)
                .height(200)
                .fill(Color.GREEN)
                .opacity(0.5)
                .build();

        // right wall
        Rectangle node3 = RectangleBuilder.create()
                .x(0)
                .y(-150)
                .width(200)
                .height(200)
                .fill(Color.BLUE)
                .rotate(90)

                .rotationAxis(Rotate.Y_AXIS)
                .build();

        return GroupBuilder.create()
                .children(node1, node2, node3)
                .translateX(250)
                .translateY(250)
                //.depthTest() ?
                .build();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:28:10.883

我相信调用额外的

```
.translateZ(double x) 
```

在您创建的 Rectangle 上将解决问题。

# android - 将动作从接收者发送到活动？

> ID：14440645
> 
> 赞同：1
> 
> 时间：2013-01-21T14:22:01.603
> 
> 标签：android

我在我的应用程序中使用广播接收器来检测来电，它工作正常。但问题是我无法将操作发送到活动。我的意思是..我想在活动中做一些事情而不是在接收器中。我阅读了许多教程，但它们都在接收器中执行操作。任何的想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:34:55.787

您可以将 a 声明`BroadcastReceiver`为`Activity`. 在这种情况下，您可以直接调用活动的方法：

```
public class MyActivity extends Activity {
    private final BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            activityMethod();
        }
    };

    private final IntentFilter filter = new IntentFilter("android.intent.action.PHONE_STATE");

    @Override
    protected void onStart() {
        super.onResume();
        registerReceiver(receiver, filter);
    }

    @Override
    protected void onStop() {
        super.onPause();
        unregisterReceiver(receiver);
    }

    private void activityMethod() {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:25:57.827

您可以开始`Activity`使用并在额外字段`Intent`中放置命令代码。`Intent`然后，您`Activity`可以根据命令代码决定行为，如果不存在，则诉诸默认行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:27:27.910

您可以通过正常方式从接收器开始活动：

```
@Override
public void onReceive(Context context, Intent intent) {
    Intent i = new Intent(context, YourActivity.class);
    startActivity(i);
} 
```

请注意，尽管用户会期望电话应用程序启动，因为他们正在接听电话。通过将您自己的活动倾倒在股票拨号器应用程序之上来劫持电话很可能是一个坏主意。

# mercurial - 如何获取特定变更集的所有命名分支的一部分

> ID：14440646
> 
> 赞同：1
> 
> 时间：2013-01-21T14:22:02.650
> 
> 标签：mercurial

给定

```
---a----b----c----d----e----f (default)
     |  |           |  
     ---g (1.0)     ----h---i---(2.0) 
```

我想知道，对于一个特定的变更集，该变更集是哪个命名分支（在我的情况下是发布）的一部分（命名分支的头部的父级）。

输入 -> 输出

*   a -> 默认, 1.0, 2.0
*   g -> 默认, 1.0, 2.0
*   d -> 默认，2.0
*   e -> 默认
*   h -> 2.0

我怎样才能以最简单的方式做到这一点（我猜是 hg log 祖先的东西？）？我宁愿不将分支名称作为输入，而是动态地使用所有（打开的）命名分支。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:14:12.667

对于和我有同样问题的其他人......

我发现扩展包含[https://bitbucket.org/resi/hg-contains](https://bitbucket.org/resi/hg-contains)，这正是我想要的。

```
hg headscontaining -b --revno [changesetId] --template {branches} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:46:00.160

```
[revsetalias]
bd($1) = descendants($1) - branch(default) 
```

正在使用：`hg bd(CSET-ID)`

编辑：嗯，我的初始版本比需要的更好（并且不可用） - 它立即返回分支列表，这可能很难用作最终 Mercurial 命令中的修订集。

修改单个操作结果**以在模板化日志中使用**

`hg log -r "bd(CSET)" --template "{branch}\n"`

# eclipse - DataSourceSecurityFilter Eclipse 侦察兵

> ID：14440647
> 
> 赞同：0
> 
> 时间：2013-01-21T14:22:02.277
> 
> 标签：eclipse, jaas, eclipse-scout

我正在使用 Eclipse Scout 框架开发服务器-客户端程序。我有 Java 经验，但我对 Tomcat 的经验并不存在。

我想编写一个请求我的登录信息的应用程序。使用 DataSourceSecurityFilter 我想在程序中授权用户（从数据库中读取他的用户名和密码）。我的服务器 config.ini 如下所示：

```
### Service Runtime Configuration

org.eclipse.scout.rt.server.services.common.file.RemoteFileService#rootPath=/Users/wgvanveen/Documents/workspace/ledenbeheer.server/j2ee/ear/war/WEB-INF/remotefiles

### Servlet Filter Runtime Configuration
org.eclipse.scout.http.servletfilter.security.BasicSecurityFilter#active=false
org.eclipse.scout.http.servletfilter.security.BasicSecurityFilter#realm=ledenbeheer Development
org.eclipse.scout.http.servletfilter.security.BasicSecurityFilter#users=admin\=manager,allen\=allen,blake\=blake
org.eclipse.scout.http.servletfilter.security.DataSourceSecurityFilter#active=false
org.eclipse.scout.http.servletfilter.security.DataSourceSecurityFilter#realm=TEST APPLICATION
org.eclipse.scout.http.servletfilter.security.DataSourceSecurityFilter#jdbcDriverName=com.mysql.jdbc.Driver
org.eclipse.scout.http.servletfilter.security.DataSourceSecurityFilter#jdbcMappingName=jdbc:mysql://localhost/Leden 
org.eclipse.scout.http.servletfilter.security.DataSourceSecurityFilter#jdbcUsername=root
org.eclipse.scout.http.servletfilter.security.DataSourceSecurityFilter#jdbcPassword=root
org.eclipse.scout.http.servletfilter.security.DataSourceSecurityFilter#selectUserPass=SELECT LOWER(Gebruikersnaam) FROM Gebruikers WHERE LOWER(gebruikersnaam)=? AND PASSWORD=?
org.eclipse.scout.http.servletfilter.security.AnonymousSecurityFilter#active=true 
```

我在服务器插件中添加了以下内容：

```
<filter
            aliases="/process"
            class="org.eclipse.scout.http.servletfilter.security.DataSourceSecurityFilter"
            ranking="40">
      </filter> 
```

我不知道为什么这不起作用。我已按照以下说明进行操作：[http ://wiki.eclipse.org/Scout/Concepts/Security](http://wiki.eclipse.org/Scout/Concepts/Security)

我正在使用 Scout 3.8 运行 Eclipse Juno

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:48:55.053

似乎激活了错误的过滤器。

org.eclipse.scout.http.servletfilter.security.DataSourceSecurityFilter#active=false org.eclipse.scout.http.servletfilter.security.AnonymousSecurityFilter#active=true

尝试激活数据源过滤器并停用匿名过滤器。如果它不起作用，我建议您在[http://www.eclipse.org/forums/index.php?t=thread&frm_id=174](http://www.eclipse.org/forums/index.php?t=thread&frm_id=174)的官方童子军论坛上发布问题。

# javascript - Javascript 使用 cookie/复选框保持图像可见性

> ID：14440648
> 
> 赞同：0
> 
> 时间：2013-01-21T14:22:02.213
> 
> 标签：javascript, image, html, checkbox, persistence

这是我关于 Stack Overflow 的第一个问题，我是 Javascript 新手（一直在自学 Python 以感受编码），我想我会尝试一个简单的网络应用程序，看看翻译我的将 Python 知识转化为 Javascript。

基本上，该应用程序将让您知道您最喜欢的水果等何时到货。所以我在一个页面“fruitpicker.html”上有一个复选框列表，在另一个“seasonalguide.html”上有相应的图像（这些图像只是带有水果季节阴影的日历图片等）。

我有一个持久化复选框状态的 cookie 和一个根据相应复选框的状态切换图像可见性的外部 JS。大多数其他人在网络上使用的 cookie，所以效果很好，但是 JS 的图像给我带来了麻烦。

我已经写了我认为应该是的，但它没有用，无论我如何修补它，都没有任何反应。

我敢肯定这真的很愚蠢，但无论如何，这是代码......

损坏的图像与 JS：

```
function toggleVisibility(checkId, imageId) {
    var imgEl = document.getElementById(imageId);
    var checkEl = document.getElementById(checkId);
    if (checkEl.checked) {
        imgEl.style.visibility="hidden";
        imgEl.style.display="none";
    }
    else {
        imgEl.style.visibility="visible";
        imgEl.style.display="inline-block";
    }
  } 
```

顺便说一句，如果行：`var checkEl = document.getElementById(checkId);` 被删除，代码可以工作，但图像状态不会持续。这是我所得到的。

fruitpicker.html 中的一些复选框：

```
<html>
<head>
<title>Fruit Picker</title>

<script type="text/javascript" src="cookie.js"></script>
</head>
<body onload="restorePersistedCheckBoxes();">

<label for=       "chklogo">Braeburn</label>
<input type=      "checkbox" 
       id=        "chkBraeburn"
             onChange=  "toggleVisibility('braeburnItem'); 
                   toggleVisibility('braeburnSeason');
                   persistCheckBox(this);" /><br>                   

<label for=       "chklogo">Fuji</label>
<input type=      "checkbox" 
       id=        "chkFuji" 
       onChange=  "toggleVisibility('fujiItem'); 
                   toggleVisibility('fujiSeason');
                   persistCheckBox(this);" /><br>

<label for=       "chklogo">Golden Delicious</label>
<input type=      "checkbox" 
       id=        "chkgolldenDelicious" 
       onChange=  "toggleVisibility('goldenDeliciousItem'); 
                   toggleVisibility('goldenDeliciousSeason');
                   persistCheckBox(this);" /><br>

<label for=       "chklogo">Granny Smith</label>
<input type=      "checkbox" 
       id=        "chkGrannySmith" 
       onChange=  "toggleVisibility('grannySmithItem'); 
                   toggleVisibility('grannySmithSeason');
                   persistCheckBox(this);"/><br/>
</body>
</html> 
```

这是季节性指南页面：

```
<html>
<head>
    <script type="text/javascript" src="cookie.js"></script>
    <script type="text/javascript" src="imageVisibility.js"></script>
</head>
<body>
<img    id="imgGuide" 
        src="Images/Calendar/calendarHeader.png"
        align="left"/>

<img    id="braeburnItem" 
        src="Images/Produce/Fruit/BraeburnApple.png" 
        style="float:left; display:none;" />
<img    id="braeburnSeason" 
        float="top" 
        src="Images/InSeason/InSeasonApr.png"  
        align="left" 
        style="display:none"/>

<img    id="fujiItem" 
        src="Images/Produce/Fruit/FujiApple.png" 
        style="float:left; display:none;" />
<img    id="fujiSeason" 
        float="top" 
        src="Images/InSeason/InSeasonMar.png"  
        align="left" 
        style="display:none;"/>

<img    id="goldenDeliciousItem" 
        src="Images/Produce/Fruit/GoldenDeliciousApple.png"  
        style="float:left; display:none;"/>
<img    id="goldenDeliciousSeason" 
        src="Images/InSeason/InSeasonFeb.png"  
        align="left"
        style="display:none;"/>

<img    id="grannySmithItem" 
        src="Images/Produce/Fruit/GrannySmithApple.png"  
        style="float:left; display:none;"/>
<img    id="grannySmithSeason" 
        src="Images/InSeason/InSeasonApr.png" 
        align="left"
        style="display:none;"/><br>

<table width="170px" height="70px">
<tr>
    <td>
    <a href="Main.html" id="back" title="about" class="button">
    <img src="Images/Buttons/backButton.png" align="right">
    </td>
  </tr>
</table>
</body>
</html> 
```

这个问题越来越长，所以我没有包括cookie，但如果它有用的话我可以。任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:12:31.133

I'm noticing two issues here.

First off, you're using two separate pages, but `document.getElementById` can only access the elements of the page you're on. So, your lines:

```
var imgEl = document.getElementById(imageId);
var checkEl = document.getElementById(checkId); 
```

have to fail, because they are trying to access elements in the two pages. Whichever page you're running the script on, one of those lines will return null. Your question doesn't describe how the two separate HTML files relate to each other, so I can't help you fix this (Does the first load the second whenever a checkbox is clicked, or are the two pages loaded in frames or iframes of a parent page?).

The second issue is that your `toggleVisibility` function is defined with two parameters, but your code (for example):

```
onChange=  "toggleVisibility('grannySmithItem'); 
               toggleVisibility('grannySmithSeason'); 
```

calls the method (twice) with only one parameter. If we're talking about the same function (you might have a different function definition on each of the two pages), then the function can never identify the correct image, because the `imageId` is never supplied.

# sharepoint-2010 - 信息路径 2010、SharePoint 2010

> ID：14440654
> 
> 赞同：0
> 
> 时间：2013-01-21T14:22:32.023
> 
> 标签：sharepoint-2010, infopath2010, readonly

我创建了一个 InfoPath 2010 表单，该表单发布到 SharePoint 2010 中的文档库。我希望该表单在提交后变为只读。

到目前为止，我所做的一切似乎都不起作用。我有：

1.  创建了一个新视图并将其重命名为只读，并在其属性中勾选了 InfoPath 中的“只读”复选框。
2.  我有一个“提交表单”按钮，在这里我添加了提交表单的规则，将视图切换到只读视图。
3.  为了测试这一点，我用示例数据填写表单并提交它，然后当我转到表单提交到的文档库时，当我打开提交的表单时，我发现只读视图没有生效并且它仍然可以编辑表格。

理想情况下，我想要实现的是将提交的表单在提交时变为只读，并且在从提交表单的文档库中打开这些表单时仍处于只读模式。

有什么想法我会出错吗？如果有更好更简单的方法来实现这一点，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-30T14:31:56.440

回答这个问题可能为时已晚，但如果有人仍在寻找答案，您可以尝试以下步骤

1.  在开始之前，请确认您拥有以下权限之一：您是网站集管理员组的成员。湾。您是站点所有者组的成员。C。您拥有管理权限权限。
2.  在站点设置页面上，转到用户和权限并查找设置
3.  在设置下，您将能够看到权限级别
4.  选择添加权限级别
5.  为您命名新的权限级别
6.  在选择要包括到此权限级别的权限下，选择向该组添加项目和查看项目权限。
7.  创建组后，对于您的表单库，停止从父站点继承权限并使用您刚刚创建的新权限级别创建一个新组。将所有用户添加到组。

这应该使用户能够提交表单但不能编辑它。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:03:08.360

有一种更简单的方法可以解决这个问题。在 InfoPath Designer 上创建此表单的两个视图。并确保在提交表单时，视图翻转为只读视图；它具有表格的显着特征，例如您希望记录的答案。

因此，一旦提交，打开表单的任何人都只会看到只读视图。您可以在表单上设置规则，让管理员看到编辑模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T20:27:55.173

我刚刚经历了这个。提交规则不起作用，您必须创建表单加载规则。在文件工具栏中，您会在规则块中看到一个表单加载按钮。

# machine-learning - 多层感知器 - 找到“分离”曲线

> ID：14440658
> 
> 赞同：5
> 
> 时间：2013-01-21T14:22:43.133
> 
> 标签：machine-learning, artificial-intelligence, perceptron

使用单层感知器很容易找到“分离线”的方程（我不知道专业术语），根据感知器的权重，在训练后将两种类型的点分开的线。在多层感知器中，如何以类似的方式找到在两种类型的点之间分离的曲线方程（不是直线）？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T23:30:49.733

这只是试图获得分离边界或曲线的近似值。

## 数据集

下面我绘制了两种类型的示例数据集之间的分离曲线。数据集借自 coursera - Andrew Ng 的机器学习课程。下面的代码片段也借鉴了`Ex6`Andrew 的 ML 课程的想法。

![在此处输入图像描述](../Images/e7fc913ade3996396f33fd3c40036df2.png)

## 边界图

要绘制分离曲线，

*   你首先根据你的训练数据训练你的神经网络；
*   使用您想要的粒度生成 2d 数据网格，在 中`Matlab`，这类似于：

```
    x1plot = linspace(min(X(:,1)), max(X(:,1)), 100)';
    x2plot = linspace(min(X(:,2)), max(X(:,2)), 100)';
    [X1, X2] = 网格网格(x1plot, x2plot);
```

*   对于网格中的每个数据点，使用您的神经网络计算预测标签；
*   绘制网格结果标签的轮廓图

```
    vals = 零（大小（X1））；
    对于 i = 1:size(X1, 2)
       this_X = [X1(:, i), X2(:, i)];
       % mlpPredict() 是使用你训练好的神经网络模型的函数
       % 得到一个预测的标签。
       vals(:, i) = mlpPredict(模型, this_X);
    结尾

    % 绘制边界
    坚持，稍等
    [C, Lev] = 轮廓(X1, X2, vals, [0 0], 'Color', 'b');
    暂缓；
```

如果您的目标只是获得边界曲线的精确数学表示，则此方法行不通。此方法只能为您提供曲线的近似值，直至您在网格中设置的粒度。

如果您确实想要边界的精确描述，SVM 可能是一个不错的选择，因为整个支持向量集都可以用作边界描述。

## 使用轮廓点近似边界

我看了看`octave`关于`contour`. 基本上，使用由相同参数计算`contour`的轮廓矩阵。这是 的签名：`C``contourc``contourc`

```
[C, LEV] = contourc (X, Y, Z, VN) 
```

此函数计算矩阵的等高线`Z`。参数`X`,`Y`和`VN`是可选的。

```
 The return value LEV is a vector of the contour levels.  The
 return value C is a 2 by N matrix containing the contour lines in
 the following format

      C = [lev1, x1, x2, ..., levn, x1, x2, ...
           len1, y1, y2, ..., lenn, y1, y2, ...]

 in which contour line N has a level (height) of LEVN and length of
 LENN. 
```

因此，如果您确实想获得曲线的分析描述，矩阵`C`应该包含足够的信息。在我的示例图中，在解析 后`C`，我得到了 30 个级别。第一级前6个点的坐标如下：

```
x: 2.3677e-01   2.3764e-01   2.4640e-01   2.4640e-01   2.4640e-01   2.4640e-01 ...
y: 4.0263e-01   4.0855e-01   4.0909e-01   4.1447e-01   4.2039e-01   4.2631e-01 ... 
```

请注意，它们正是轮廓上从 (0.23677, 0.40263) 开始的点。使用这些轮廓点，可以直接使用多个线段来近似曲线（因为每个线段可以由两个端点确定）。

希望能帮助到你。

# c# - 如何查看/调试 System.Diagnostics 计数器？

> ID：14440660
> 
> 赞同：0
> 
> 时间：2013-01-21T14:22:43.933
> 
> 标签：c#

有什么方法可以查看应用程序注册的所有性能计数器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:33:59.323

是的，您可以[`GetCounter()`](http://msdn.microsoft.com/en-us/library/ew6c05xw.aspx)从`PerformanceCounterCategory`课堂上检查方法。您将[`PerformanceCounter[]`](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)获取有关每个计数器的一些信息。

```
PerformanceCounterCategory pcc = new PerformanceCounterCategory();

// Retrieves the list of performance object instances that are associated with this category.
foreach (string instanceName in pcc.GetInstanceNames()) 
    // Retrieves a list of the counters in a performance counter category that contains exactly one instance.
    foreach (PerformanceCounter counter in pcc.GetCounters())
    {
        // now you have the counter object that represents a PerformanceCounter to get some information about the performance counter

        Console.WriteLine("Category: " + counter.Category);
        Console.WriteLine("Instance Name: " + counter.InstanceName);    
        Console.WriteLine("Machine Name: " + counter.MachineName);

        Console.WriteLine("Counter Name: " + counter.CounterName);

        Console.WriteLine("Next Value: " + counter.NextValue());
    } 
```

# r - data.table::fread 中的 dec 参数

> ID：14440661
> 
> 赞同：7
> 
> 时间：2013-01-21T14:22:45.237
> 
> 标签：r, csv, data.table

我正在使用`fread`from`data.table`加载 csv 文件。但是，我的 csv 文件`dec=","`用作小数分隔符（`1.23`will be `1,23`）。不像`read.csv`它似乎`dec`不是一个允许的参数。

```
R) args(fread)
function (input = "test.csv", sep = "auto", sep2 = "auto", nrows = -1,
    header = "auto", na.strings = "NA", stringsAsFactors = FALSE,
    verbose = FALSE, autostart = 30) 
```

您是否看到可以让我使用的解决方法（可能是 R 选项`fread`）？

PS：`colClasses`尚未实现，因此`setAs`不能像[本文中那样使用](https://stackoverflow.com/questions/5068705/processing-negative-number-in-accounting-format/5069649#5069649)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T09:16:16.500

**2014 年 10 月更新**：现在在 v1.9.5 中

> `fread`现在接受`dec=','`（和其他非'.' 小数分隔符），[#917](https://github.com/Rdatatable/data.table/issues/917)。新段落已添加到`?fread`. 如果您位于使用的国家/地区，`dec=','`那么它应该可以正常工作。如果没有，您将需要阅读该段落以获得额外的步骤。万一它以某种方式中断`dec='.'`，可以使用 关闭此新功能`options(datatable.fread.dec.experiment=FALSE)`。

* * *

* * *

上一个答案...

Matt Dowle 找到了一个很好的解决语言环境的方法。首先我的`sessionInfo`

```
sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=French_France.1252  LC_CTYPE=French_France.1252    LC_MONETARY=French_France.1252 LC_NUMERIC=C
[5] LC_TIME=C
... 
```

尝试以下显示罪魁祸首：

```
Sys.localeconv()["decimal_point"]
decimal_point 
          "." 
```

尝试在 Ubuntu(Matthew) 和 WinXP(me) 上设置 LC_NUMERIC

```
Sys.setlocale("LC_NUMERIC", "French_France.1252")
[1] "French_France.1252"
Message d'avis :
In Sys.setlocale("LC_NUMERIC", "French_France.1252") :
  changer 'LC_NUMERIC' peut résulter en un fonctionnement étrange de R 
```

行为很好，变化如下：

```
DT = fread("A,B\n3,14;123\n4,22;456\n",sep=";")
str(DT)
Classes ‘data.table’ and 'data.frame':  2 obs. of  2 variables:
 $ V1: num  3.14 4.22
 $ V2: int  123 456 
```

这 ”。” 小数点分隔符现在作为字符串加载（应该如此），之前正好相反。

```
DT = fread("A,B\n3.14;123\n4.22;456\n",sep=";")
str(DT)
Classes ‘data.table’ and 'data.frame':  2 obs. of  2 variables:
 $ V1: chr  "3.14" "4.22"
 $ V2: int  123 456 
```

# android - Eclipse+Android NDK插件在Windows+Cygwin上构建原生代码耗时太长

> ID：14440666
> 
> 赞同：2
> 
> 时间：2013-01-21T14:22:52.157
> 
> 标签：android

我有一个从 webRTC 派生的库。我可以从命令行构建它。这需要一个可接受的时间。

我现在正在尝试使用 Eclipse 的 NDK 插件来调试它。问题是构建它需要很长时间。每个文件大约需要 1 分钟。如果没有办法让它更快，它将无法使用。

我在 Windows 上运行 Eclipse。我为本机代码添加了 Cygwin。

这是正常的吗？有人在 Linux 上运行的 Eclipse 上使用过 NDK 插件吗？Linux上也这么慢吗？我应该做些什么来加快编译速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:08:07.657

我在 Ubuntu 上试过，它更快。我为 x86_64 使用了 ADT 包。

# iphone - 数组objectivec中的反转字符串

> ID：14440671
> 
> 赞同：0
> 
> 时间：2013-01-21T14:23:16.053
> 
> 标签：iphone, objective-c

> **可能重复：**
> [反转 NSString 文本](https://stackoverflow.com/questions/6720191/reverse-nsstring-text)

我是objectovec的新手。我有一个包含字符串的数组。如何反转每个字符串？

哪种方法`NSArray`可以`NSstring`帮助我？

我想在数组中反转字符串。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:26:00.510

创建一个将返回反转字符串的方法。

```
-(NSString *)reverseString:(NSString *)string{
    NSString *reverseString=[NSString new];
    for (NSInteger i=string.length-1; i>-1; i--) {
        reverseString=[reverseString stringByAppendingFormat:@"%c",[string characterAtIndex:i]];
    }
    return reverseString;
} 
```

在您的任何方法中：

```
NSMutableArray *names=[NSMutableArray arrayWithObjects:@"anoop",@"johnson",@"wasim",nil];
for (NSInteger i=0; i<names.count; i++) {
    names[i]=[self reverseString:names[i]];
}
NSLog(@"%@",names); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:26:57.503

```
NSString *str=textEntered.text;//
    NSMutableArray *temp=[[NSMutableArray alloc] init];
    for(int i=0;i<[str length];i++)
    {
        [temp addObject:[NSString stringWithFormat:@"%c",[str characterAtIndex:i]]];
    }
    temp = [NSMutableArray arrayWithArray:[[temp reverseObjectEnumerator] allObjects]];
    NSString *reverseString=@"";
    for(int i=0;i<[temp count];i++)
    {
        reverseString=[NSString stringWithFormat:@"%@%@",reverseString,[temp objectAtIndex:i]];
    }
    NSLog(@"%@",reverseString); 
```

**另一种反转字符串的方法** `NSStringEnumerationOptions`

```
- (NSString *)reverseString:(NSString *)string {
    NSMutableString *reversedString = [[NSMutableString alloc] init];
    NSRange fullRange = [string rangeOfString:string];
    NSStringEnumerationOptions enumerationOptions = (NSStringEnumerationReverse | NSStringEnumerationByComposedCharacterSequences);
    [string enumerateSubstringsInRange:fullRange options:enumerationOptions usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
        [reversedString appendString:substring];
    }];
    return reversedString;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T14:27:38.073

希望这有帮助

```
NSString *str=textEntered.text;//
    NSMutableArray *temp=[[NSMutableArray alloc] init];
    for(int i=0;i<[str length];i++)
    {
        [temp addObject:[NSString stringWithFormat:@"%c",[str characterAtIndex:i]]];
    }
    temp = [NSMutableArray arrayWithArray:[[temp reverseObjectEnumerator] allObjects]];
    NSString *reverseString=@"";
    for(int i=0;i<[temp count];i++)
    {
        reverseString=[NSString stringWithFormat:@"%@%@",reverseString,[temp objectAtIndex:i]];
    }
    NSLog(@"%@",reverseString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T14:26:22.020

采用

```
unichar c[yourstring.Length];
    NSRange raneg={0,yourstring.Length};
    [yourstring getCharacters:c range:raneg];
//c will be an array of your string do what ever you wish 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T14:30:24.703

使用这个来反转您的字符串，然后以相同的索引存储回您的数组。

```
-(NSString*)reverseString:(NSString*)string {
    NSMutableString *reversedString;
    int length = [string length];
    reversedString = [NSMutableString stringWithCapacity:length];
    while (length--) {
            [reversedString appendFormat:@"%c", [string characterAtIndex:length]];
    }
    return reversedString;
} 
```

**但是如果你有可变字符串，那么你可以创建一个类别**

```
@interface NSMutableString (Reverse)
- (void)reverseString;
@end

@implementation NSMutableString (Reverse)

- (void)reverseString {
    for (int i = 0; i < self.length/2; i++) {
        int l = self.length - 1 - i;

        NSRange iRange = NSMakeRange(i, 1);
        NSRange lRange = NSMakeRange(l, 1);

        NSString *iStr = [self substringWithRange:iRange];
        NSString *lStr = [self substringWithRange:lRange];

        [self replaceCharactersInRange:iRange withString:lStr];
        [self replaceCharactersInRange:lRange withString:iStr];
    }
}

@end 
```

然后你可以像这样使用这个类别方法

```
NSArray *arr = [NSArray arrayWithObjects:[@"hello" mutableCopy], [@"Do it now" mutableCopy], [@"Test string, 123 123" mutableCopy], nil];
NSLog(@"%@",arr);
[arr makeObjectsPerformSelector:@selector(reverseString)];
NSLog(@"%@",arr); 
```

# search - Solr 不会搜索属于嵌套实体的字段

> ID：14440673
> 
> 赞同：0
> 
> 时间：2013-01-21T14:23:23.580
> 
> 标签：search, tomcat, solr, lucene, dataimporthandler

我正在使用 apache solr 进行网站搜索。我正在使用嵌套实体从不同的表中导入数据。数据导入成功，所有文档都被添加到索引中。我的 dataConfig 是这样的：

```
<dataConfig>
  <dataSource type="JdbcDataSource" driver ="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost/purplle_purplle2" user="purplle_purplle" password="purplle123" />

  <document name="doc">
     <entity name="offer" query="SELECT * FROM service_offering WHERE module LIKE 'location' ">

       <field column="name" name="name"/>
       <field column="id" name="id" />
       <field column="type_id" name="type_id" />

       <entity name="offer_type" query=" select name from service_offeringtype where id='${offer.type_id}'" >
          <field column="name" name="offer_type" />
       </entity>

       <entity name="offer_location" query=" select name from service_location where id='${offer.module_id}'" >
          <field column="name" name="location_name" />
       </entity>

       <entity name="offer_address" query=" select * from service_address where module_id='${offer.module_id}' AND module LIKE 'location'" >

          <entity name="loc_city" query=" select name from loc_city where id='${offer_address.city}'" >
            <field column="name" name="loc_city" />
          </entity>

          <entity name="loc_area" query=" select name from loc_area where id='${offer_address.area}'" >
            <field column="name" name="loc_area" />
          </entity>

          <entity name="loc_zone" query=" select name from loc_zone where id='${offer_address.zone}'" >
            <field column="name" name="loc_zone" />
          </entity>

       </entity>

    </entity>

  </document>

</dataConfig> 
```

现在，如果我直接对此索引进行搜索。仅针对“名称”字段获取结果。它为其他字段返回 null，即“loc_area”、“location_name”、“loc_city”等。我的架构看起来像这样

```
<field name="id"  type="int" indexed="true" stored="true" /> 
<field name="name"  type="string" indexed="true" stored="true" />  
<field name="offer_type"  type="string" indexed="true" stored="true" />
<field name="location_name"  type="string" indexed="true" stored="true" />
<field name="type_id"  type="string" indexed="true" stored="true" />     
<field name="loc_city"  type="string" indexed="true" stored="true" /> 
<field name="loc_area"  type="string" indexed="true" stored="true" /> 
<field name="loc_zone"  type="string" indexed="true" stored="true" /> 
```

但是，如果我将这些字段复制到 schema.xml 中默认存在的“文本”字段中。然后通过搜索“文本”字段，我很容易得到相关结果。

```
<copyField source="name" dest="text"/>
<copyField source="offer_type" dest="text"/>
<copyField source="location_name" dest="text"/>
<copyField source="loc_city" dest="text"/>
<copyField source="loc_area" dest="text"/>
<copyField source="loc_zone" dest="text"/> 
```

但我不能这样做，因为我必须将提升级别分配给不同的字段以计算分数。当我在查询语法“&defType=edismax&qf=name^1.0+location_name^10.0+loc_area^50.0”中添加它时，它会返回空结果。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:32:31.887

我的猜测是您的问题是您的字段类型。我不确切知道您的字段包含什么，但是`type="string"`和之间有区别`type = "text"`。

String 类型索引整个字段输入的未标记字符串值。文本类型对字段进行标记和分析。例如，如果我在包含“John Smith”的字符串字段中搜索“john”，我不会期望命中，如果该字段是文本字段，我会得到命中。

由于您的查询似乎适用于文本字段，而不是字符串字段，因此更改类型和重新索引似乎是一种可能的解决方案。

# sql - 根据字段值连接不同的表

> ID：14440683
> 
> 赞同：1
> 
> 时间：2013-01-21T14:23:46.393
> 
> 标签：sql, sql-server, sql-server-2008, tsql, join

我有以下 sql 视图结果，其中包含系统中每个表的每个字段的审核更改：

![在此处输入图像描述](../Images/cdb4f261db78a2e55460c96298891551.png)

在这种情况下，上图告诉我们，用户*Lucas*对名为*MySubscription的订阅的**读取*和*写入*权限都被撤销了。

 **我需要在网格中显示该信息，但这不是我想要显示的，我的意思是，我不想显示 ID。我需要显示“Read”而不是 50、“Write”而不是 51、“Lucas”而不是 1 和“MySubscription”而不是 6。

为此，我想改进 sql 视图以获取值而不是我上面提到的它们的 ID。我正在寻找的结果是这个： ![在此处输入图像描述](../Images/0d7e713384e6bf93f0751f1f746e582e.png)

该数据库包含表*Subscriptions*、*ProductPermissions*和*TenantUsers*以使用联接获取所需的信息。

您能否给我一些关于如何实现我需要的线索？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:55:12.107

您可以使用一系列`LEFT JOIN`s 来执行此操作，可能需要进行一些转换才能使连接列的数据类型与`NewValue`（我假设`Name`在所有连接表中都调用了一个列，这可能需要更改）：

```
SELECT  a.AuditLogId,
        a.Operation,
        a.[Table],
        a.RowId,
        a.Name,
        [OldValue] = COALESCE(s_Old.Name, pp_old.Name, t_Old.Name),
        [NewValue] = COALESCE(s_New.Name, pp_New.Name, t_New.Name)
FROM    AuditLog a
        LEFT JOIN Subscriptions s_Old
            ON a.OldValue = CAST(s_Old.SubscriptionID AS VARCHAR)
            AND a.Name = 'SubscriptionID'
        LEFT JOIN ProductPermissions pp_Old
            ON a.OldValue = CAST(p_Old.ProductPermissionID AS VARCHAR)
            AND a.Name = 'ProductPermissionId'
        LEFT JOIN TenantUsers t_Old
            ON a.OldValue = CAST(t_Old.TenantUserId AS VARCHAR)
            AND a.Name = 'TenantUsers'
        LEFT JOIN Subscriptions s_New
            ON a.NewValue = CAST(s_New.SubscriptionID AS VARCHAR)
            AND a.Name = 'SubscriptionID'
        LEFT JOIN ProductPermissions pp_New
            ON a.NewValue = CAST(p_New.ProductPermissionID AS VARCHAR)
            AND a.Name = 'ProductPermissionId'
        LEFT JOIN TenantUsers t_New
            ON a.NewValue = CAST(t_New.TenantUserId AS VARCHAR)
            AND a.Name = 'TenantUsers' 
```

如果需要，您可以在每个事务中将其 PIVOT 为一行：

```
SELECT  a.AuditLogId,
        a.Operation,
        a.[Table],
        a.RowId,
        [OldSubscriptionValue] = MAX(s_old.Name),
        [OldProductPermissionValue] = MAX(pp_old.Name),
        [OldTennantUserValue] = MAX(t_old.Name),
        [NewSubscriptionValue] = MAX(s_New.Name),
        [NewProductPermissionValue] = MAX(pp_New.Name),
        [NewTennantUserValue] = MAX(t_New.Name)
FROM    AuditLog a
        LEFT JOIN Subscriptions s_Old
            ON a.OldValue = CAST(s_Old.SubscriptionID AS VARCHAR)
            AND a.Name = 'SubscriptionID'
        LEFT JOIN ProductPermissions pp_Old
            ON a.OldValue = CAST(p_Old.ProductPermissionID AS VARCHAR)
            AND a.Name = 'ProductPermissionId'
        LEFT JOIN TenantUsers t_Old
            ON a.OldValue = CAST(t_Old.TenantUserId AS VARCHAR)
            AND a.Name = 'TenantUsers'
        LEFT JOIN Subscriptions s_New
            ON a.NewValue = CAST(s_New.SubscriptionID AS VARCHAR)
            AND a.Name = 'SubscriptionID'
        LEFT JOIN ProductPermissions pp_New
            ON a.NewValue = CAST(p_New.ProductPermissionID AS VARCHAR)
            AND a.Name = 'ProductPermissionId'
        LEFT JOIN TenantUsers t_New
            ON a.NewValue = CAST(t_New.TenantUserId AS VARCHAR)
            AND a.Name = 'TenantUsers'
GROUP BY a.AuditLogId, a.Operation, a.[Table], a.RowId; 
```

这是一个非常肮脏的解决方案，我倾向于以您想要选择的格式存储这些数据，而不是 50/51，直接在`NewValue`列中存储读/写。

或者，如果您确实想要每笔交易一行的第二种格式，那么我倾向于以这种方式存储它。[关于Entity-Attribute-Value Antipattern](http://www.google.co.uk/search?q=Entity+Attribute+Value+Antipattern)可能值得一读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:34:08.883

您可以`PIVOT`将数据和`LEFT JOIN`查找表。然后`UNPIVOT`如果有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:34:09.997

如果您只需要显示单词而不是数字，请创建一个在数字和要显示的单词之间映射的查找表：

```
create table NewValueText (
    NewValue integer,
    Description char(20)
);

insert into NewValueText values
   (50, 'Read'),
   (51, 'Write');   --etc.

--MyTable is your table that contains the NewValue column.
select Description from MyTable
    inner join NewValueText on MyTable.NewValue = NewValueText.NewValue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T14:38:29.160

您可以尝试加入您的表，其中您的值是特定的。您需要为其他值创建一个查找表，而不是真的这是一个肮脏的解决方案，因为这意味着将您的`NewValue`字段硬编码到 SQL 中：

```
...
FROM
    audit LEFT JOIN 
    mysubscription ON audit.rowid = mysubscription.tenantuserid
        AND audit.newvalue = 1
    LEFT JOIN 
    lookup_list ON audit.rowid = lookup_list.lookup_id 
        AND audit.newvalue <> 1
... 
```

这可能对你有用。**

# jaxb - 如何维护从 JaxbObjects 生成的 JAXB 中的元素顺序

> ID：14440687
> 
> 赞同：2
> 
> 时间：2013-01-21T14:24:18.627
> 
> 标签：jaxb

我已经运行了一个带有 2 个列名的 order by 子句的 sql 查询，以按给定顺序获取结果。现在我将结果集的值复制到 jaxb 对象并将其编组到 xml。

我的要求是以与结果集中相同的顺序获取 xml。

例如：Select * from emp order by date,employeeid;

输出

```
id          Date
4           22/01/2012
10          10/03/2012 
```

现在我希望xml为

```
<Employees>
  <Employee id="4" date="22/01/2012">
  <Employee id="10" date="10/03/2012">
</Employees> 
```

有没有办法完成它？

问候哈里什

我在 jaxbObject 中添加了新的整数变量“order”。在读取结果集并更新 jaxbobject 时，我使用计数器更新 order 变量。因此，从编组 jaxb 对象生成的 xml 中，我可以依靠“顺序”以与 sql 查询返回的顺序相同的顺序列出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:49:03.413

**顺序`id`和`date`属性**

您可以使用注释`propOrder`上的属性`@XmlType`来指定映射到 XML 元素的字段/属性的顺序。无法指定 XML 属性在 XML 输出中出现的顺序（属性的顺序在 XML 中并不重要）。

**`Employee`元素顺序**

编组元素的顺序`Employee`将取决于`Collection`用于将它们存储在 Java 模型中的特性。

**了解更多信息**

*   [http://blog.bdoughan.com/2012/08/jaxbs-xmltransient-and-property-order.html](http://blog.bdoughan.com/2012/08/jaxbs-xmltransient-and-property-order.html)

# css - 是否有当前或建议的方法来设置多个背景的各个层？

> ID：14440689
> 
> 赞同：13
> 
> 时间：2013-01-21T14:24:27.923
> 
> 标签：css, background-image

有人知道使用 CSS 更改多层背景的一层的方法吗？

我一直在四处寻找，但找不到任何提及当前甚至提议的未来规范的内容。我的想法是可能不会有，但是现在网络如此庞大，我确信某个地方的某个人拥有这些信息或讨论的链接。

以下示例在应用于不同元素时显然会在优先顺序方面存在问题：

```
.building-texture {
  background: transparent, url(image/building-side.png);
}

.shade-dark {
  background: url(image/shade-dark.png), unchanged;
}

.shade-mid {
  background: url(image/shade-mid.png), unchanged;
}

.shade-light {
  background: url(image/shade-light.png), unchanged;
} 
```

```
<div class="building-texture shade-dark"></div> 
```

显然，上面有许多解决方法，但没有一个是理想的，尤其是当您开始谈论许多不同的“层状态”和许多不同的“纹理”时：

## 初步解决方案

### 组合班

这是最理想的后备方案，但是当您开始考虑供应商前缀并处理两个以上的层时，它会变得很荒谬。

```
.building-texture-shade-dark {
  background: url(image/shade-dark.png), url(image/building-side.png);
}

.building-texture-shade-mid {
  background: url(image/shade-mid.png), url(image/building-side.png);
}

.building-texture-shade-light {
  background: url(image/shade-light.png), url(image/building-side.png);
} 
```

### 单独的元素

在本地运行一些测试时，我发现多层背景比使用子元素执行得更快。事实上，对于大多数现代浏览器来说，即使引入一个简单的孩子（没有应用背景）也会大大减慢渲染速度。

```
<div class="building-texture">
  <div class="shade-dark"></div>
</div> 
```

### JavaScript 生成

为了克服手动输入第一个选项（组合类）的痛苦，可以使用 JavaScript 来生成样式表。但是你仍然有长类名的尴尬。另外，当您想要更改组合类的一个应用效果（例如删除阴影）时，您必须编写脚本以根据命名约定确定如何执行此操作。

### 通过 JavaScript 设置样式属性

另一种选择是通过`.style`每个元素动态重写整个背景。我还没有对此进行测试，但我的头脑告诉我这将是相当低效的，因为我确信浏览器在处理预设类时能够进行相当多的优化（即通过按分类对元素渲染进行分组）。虽然我可能是错的。

## 为什么...

我正在玩 CSS 3D 变换（启用透视）以及如何以简单快速的方式最好地纹理/照亮此类结构（示例代码）：

[http://pebbl.co.uk/wote/](http://pebbl.co.uk/wote/)

[![示例图像](../Images/d7e2f6e92d4d15be2953f7bbdc2f9403.png)](https://i.stack.imgur.com/r6t88.png)
[（来源：[pebbl.co.uk](http://pebbl.co.uk/wote/images/example.png)）]

在未能生成我满意的 CSS 解决方案后，我目前正朝着基于 Canvas 的解决方案前进，该解决方案将预先构建我可能想要的所有纹理以及它们不同的阴影状态，然后生成缓存数据 URI附加为单层背景。我的测试表明这是最佳的。但是，我真的很想使用尽可能多的基于浏览器的原生解决方案，因为使用画布涉及更多的代码，而且，因为今天的浏览器改进得如此之快，重新发明任何轮子、引擎、或道路网络。

即使可能被认为我所做的不是对 CSS 的“正确”使用，在我看来，每个背景项目都是它自己的单元——对我来说，应该有一些指定的方式来修改每个背景项目是有道理的单独的单元......即使它在未来很遥远。

我会对任何带有这些讨论链接的答案感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:33:00.430

不幸的是，在常规 CSS 中没有办法做到这一点。您只能更改整个属性，而不是其中的一部分。这就是为什么我们有单独的属性，比如`background-image`,`background-color`开始。但没有比这更细粒度的了。

正如 ScottS 所建议的，伪元素可能是一种方法，但您可能会遇到与多个单独的 div 元素相同的问题。

如果您的主要目标是避免一遍又一遍地输入代码，一个好的解决方案是使用 CSS 预处理器，如[SASS](http://sass-lang.com/)。您的 SCSS 将是这样的：

```
$img-side:  url("image/building-side.png");
$img-dark:  url("image/shade-dark.png");
$img-mid:   url("image/shade-mid.png");
$img-light: url("image/shade-light.png");

.building-texture {
  background: transparent, $img-side;
}    
.shade-dark {
  background: $img-dark, $img-side;
}    
.shade-mid {
  background: $img-mid, $img-side;
}    
.shade-light {
  background: $img-light, $img-side;
} 
```

它会编译成更庞大的 CSS（带有完整的 URL 定义），但您肯定会节省很多开发时间。SASS 还可以帮助您使用 mixins 生成供应商前缀（还有 Compass 将其添加到 SASS）。

事实上，有一个[即将发布的 CSS 变量规范](http://dev.w3.org/csswg/css-variables/)，您将来可能会使用它，但我认为目前还没有任何浏览器支持它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T15:13:41.507

## 用伪元素抽象它

我还不知道有任何方法可以“交换”单个背景。一种解决方法是基于“分离元素”技术，但内部元素是伪元素。我不知道渲染速度。它还有一个缺点，即它不适用于 IE8，因为[您不能应用于`filter`pseudo-elements](https://stackoverflow.com/questions/10403916/why-does-a-filter-gradient-on-a-pseudo-element-not-work-in-ie8/10669986#10669986)。但是，由于您将这个想法与 CSS3 透视等结合使用，因此 IE8 警告对您来说不是问题。

这实现了从阴影中抽象出纹理。`:after`它甚至可以通过伪元素添加另一层，如果需要/需要，它仍然可以在三个中的每一个中使用多个背景。

## [这是小提琴。](http://jsfiddle.net/hXBYG/3/)

示例代码：

**HTML**

```
<div class="texture"></div>
<div class="texture light"></div>
<div class="texture medium"></div>
<div class="texture dark"></div> 
```

**CSS（核心）**

```
.texture {
    position: relative;
    background: url(http://www.dummyimage.com/12x16/ff0000/ffffff.png&text=X++) top left repeat;
}

.light:before,
.medium:before,
.dark:before {
    content: '';
    position: absolute;
    top:0;
    right: 0;
    bottom:0;
    left: 0;
}
.light:before {
    background: -moz-linear-gradient(left,  rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 100%);
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(0,0,0,0.3)), color-stop(100%,rgba(0,0,0,0.1)));
    background: -webkit-linear-gradient(left,  rgba(0,0,0,0.3) 0%,rgba(0,0,0,0.1) 100%);
    background: -o-linear-gradient(left,  rgba(0,0,0,0.3) 0%,rgba(0,0,0,0.1) 100%);
    background: -ms-linear-gradient(left,  rgba(0,0,0,0.3) 0%,rgba(0,0,0,0.1) 100%);
    background: linear-gradient(to right,  rgba(0,0,0,0.3) 0%,rgba(0,0,0,0.1) 100%);
}
.medium:before {
    background: -moz-linear-gradient(left,  rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.2) 100%);
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(0,0,0,0.6)), color-stop(100%,rgba(0,0,0,0.2)));
    background: -webkit-linear-gradient(left,  rgba(0,0,0,0.6) 0%,rgba(0,0,0,0.2) 100%);
    background: -o-linear-gradient(left,  rgba(0,0,0,0.6) 0%,rgba(0,0,0,0.2) 100%);
    background: -ms-linear-gradient(left,  rgba(0,0,0,0.6) 0%,rgba(0,0,0,0.2) 100%);
    background: linear-gradient(to right,  rgba(0,0,0,0.6) 0%,rgba(0,0,0,0.2) 100%);
}
.dark:before {
    background: -moz-linear-gradient(left,  rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.3) 100%);
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(0,0,0,0.8)), color-stop(100%,rgba(0,0,0,0.3)));
    background: -webkit-linear-gradient(left,  rgba(0,0,0,0.8) 0%,rgba(0,0,0,0.3) 100%);
    background: -o-linear-gradient(left,  rgba(0,0,0,0.8) 0%,rgba(0,0,0,0.3) 100%);
    background: -ms-linear-gradient(left,  rgba(0,0,0,0.8) 0%,rgba(0,0,0,0.3) 100%);
    background: linear-gradient(to right,  rgba(0,0,0,0.8) 0%,rgba(0,0,0,0.3) 100%);
} 
```

# regex - Windows 脚本：列出与模式不匹配的文件

> ID：14440692
> 
> 赞同：2
> 
> 时间：2013-01-21T14:24:34.083
> 
> 标签：regex, windows, pattern-matching

在 Windows 7 命令提示符中，我想列出名称不以`abc`. 我试过了：

```
forfiles /P C:\myFolder\ /M ^[abc]* /S /C "CMD /C echo @file" 
```

我的错误在哪里？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:37:22.633

看着`forfiles /?`：

> ```
> /M    searchmask    Searches files according to a searchmask.
>                     The default searchmask is '*' . 
> ```

强烈建议`forfiles`不支持正则表达式，只支持普通的 Cmd/Windows 通配符。

在 Windows 7 上，这可以在 PowerShell 中轻松实现：

```
dir c:\myFolder | ?{ -not($_.Name -match '^abc') } | select Name 
```

（这执行区分大小写*的*正则表达式匹配，这在 Windows 文件名的情况下无关紧要。）

注意。假设您想要文件 not started `ABC`，这不是您（尝试的）正则表达式所说的（任何文件名都不是以`a`,`b`或开头的东西`c`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:32:49.523

> 我的错误在哪里？

您的错误是认为该`forfiles`命令将支持正则表达式。

它不是。它支持与`*`和匹配的文件名`?`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:38:31.627

在使用`xcopy`命令而不是使用选项的情况下，另一种方法`echo`是使用 option `/exclude`。例如：

```
forfiles /P C:\myFolder\ /M ^[abc]* /S /C "CMD /C xcopy @path %myDestinationFolder% /exclude:abc*" 
```

此外，如果您使用的是 PowerShell，则另一个选项是 operator `-match`。

# ruby-on-rails - 生成 RSpec 测试时，如何防止 RSpec 和 Mongoid 在 Rails 中出现此错误？

> ID：14440693
> 
> 赞同：0
> 
> 时间：2013-01-21T14:24:42.103
> 
> 标签：ruby-on-rails, mongodb, rspec, mongoid

我尝试在一个项目中安装 rspec 和 mongoid（按照“Rails Deep Dive”一书中的示例），当我尝试从 RSpec 运行生成器时出现错误。

这是gemfile：

```
gem 'rails', '3.2.11'
gem 'devise', "~> 1.4.2"
gem 'mongoid', "~> 2.1.8"
gem 'mongoid_spacial', '~> 0.2.13'
gem 'haml', '~> 3.1.2'
gem 'bson_ext', '~> 1.3.1'
gem 'rails-backbone'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
group :test, :development do
  gem 'rspec-rails', '~> 2.6.1'
  gem 'mongoid-rspec', '~> 1.4.4'
  gem 'capybara', '~> 1.0.1'
  gem 'factory_girl_rails', '~> 1.1.0'
  gem 'database_cleaner', '~> 0.6.7'
  gem 'jasmine', '~> 1.0.2.1'
end 
```

我使用生成器生成了一个 mongo 配置文件，结果如下：

```
development:
  host: localhost
  database: loccasions_development

test:
  host: localhost
  database: loccasions_test

# set these environment variables on your prod server
production:
  host: <%= ENV['MONGOID_HOST'] %>
  port: <%= ENV['MONGOID_PORT'] %>
  username: <%= ENV['MONGOID_USERNAME'] %>
  password: <%= ENV['MONGOID_PASSWORD'] %>
  database: <%= ENV['MONGOID_DATABASE'] %> 
```

我可以确认 MongoDB 已启动并正在运行，我可以访问 Web 浏览器界面。但是现在，当我运行时，出现`rails g rspec:install`以下错误：

```
NOTE: Gem.available? is deprecated, use Specification::find_by_name. It will be removed on or after 2011-11-01.
Gem.available? called from /home/glenn/.rvm/gems/ruby-1.9.3-p362/gems/jasmine-1.0.2.1/lib/jasmine/base.rb:64.
host is not a valid option for Mongo::MongoClient
/home/glenn/.rvm/gems/ruby-1.9.3-p362/gems/bson-1.8.2/lib/bson/bson_c.rb:24:in `serialize': wrong number of arguments(4 for 3) (ArgumentError) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:54:35.227

我有同样的问题。我对下面给出的所有 gem 使用了 HEAD 并添加了 mongo_ext （但我认为它没有改变任何东西）：

```
source 'https://rubygems.org'

gem 'rails'
gem 'devise'
gem 'mongoid'
gem 'mongoid_spacial'
gem 'haml'
gem 'bson_ext'
gem 'mongo_ext'
gem 'rails-backbone'

group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'uglifier'
end

gem 'jquery-rails'

group :test, :development do
  gem 'rspec-rails'
  gem 'mongoid-rspec'
  gem 'capybara'
  gem 'factory_girl_rails'
  gem 'database_cleaner'
  gem 'jasmine'
end 
```

我重新运行 mongoid 生成器

```
rails g mongoid:config 
```

为了重新创建一个正确的 mongoid.yml 然后是 rspec 安装程序

```
rails g rspec:install 
```

就这样。我使用的宝石版本是：

```
bson_ext (1.8.2)
  bson (~> 1.8.2)

mongo_ext (0.19.3)
mongoid (3.0.21)
  activemodel (~> 3.1)
  moped (~> 1.2)
  origin (~> 1.0)

mongoid-rspec (1.6.0)
  mongoid (>= 3.0.1)
  rake
  rspec (>= 2.9)
mongoid_spacial (0.2.16)
  activesupport (~> 3.0)
  mongoid (>= 2.3.0) 
```

并注释掉

```
config.use_transactional_fixtures = true

config.fixture_path = "#{::Rails.root}/spec/fixtures" 
```

在 spec_helper.rb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:52:38.417

它没有使用 bson_ext gem，可能是因为它太旧了，显然 bson-1.8.2 有问题。

您可以删除： gem 'bson_ext', '~> 1.3.1' 并尝试捆绑安装（这可能会默认安装 bson_ext）

或更改： gem 'bson_ext', '~> 1.3.1' to gem 'bson_ext'

并进行捆绑升级 bson_ext（这应该强制并升级到 bson_ext）

# jquery - 如何每 N 秒获得 AJAX 响应

> ID：14440694
> 
> 赞同：-2
> 
> 时间：2013-01-21T14:24:47.003
> 
> 标签：jquery

我想每 10 秒请求一次此 AJAX 响应以获取结果

```
function show() {
    var ele = document.getElementById("ping");
    if (ele.style.display == "none") {
        ele.style.display = "block";
    }
    jQuery.ajax({
        type: "POST",
        url: "checkit.php",
        cache: false,
        success: function (response) {
            if (response == 1) {
                alert("Success");
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-21T14:31:02.737

你需要一个定时循环。

```
function show() {
    var ele = document.getElementById("ping");
    if (ele.style.display == "none") {
        ele.style.display = "block";
    }

    window.setInterval(function(){ //loop

        jQuery.ajax({
            type: "POST",
            url: "checkit.php",
            cache: false,
            success: function (response) {
                if (response == 1) {
                    alert("Success");
                }
            }
        });

    }, 10000); //10000 = 10 seconds

} 
```

# c# - 为动态连接字符串设置实体框架

> ID：14440698
> 
> 赞同：25
> 
> 时间：2013-01-21T14:25:07.623
> 
> 标签：c#, entity-framework

我正在开发一个应用程序，它将在多个数据库中使用相同的数据库模式。为此，我创建了一个名为`MyTemplate`. 创建新用户时，他们将拥有自己的数据库实例。`MyTemplate_[UserName]`因此，将创建一个名为 like 的数据库。当用户登录时，我需要将他们的查询指向他们的数据库。出于这个原因，我知道我需要在运行时设置连接字符串。我的问题是，我也想使用实体框架。

目前，我使用 MyTemplate 作为源创建了一个新的 .edmx。我以为我可以更新代码并在那里设置连接字符串。不幸的是，我不知道如何设置它。TemplateEntities 的构造函数没有允许我传入连接字符串的重载。我注意到 TemplateEntities 派生自 DbContext，我认为这不是问题。

```
string connectionString = GetUsersConnectionString();
using (TemplateEntities entities = new TemplateEntities())
{
  TemplateEntity entity = new TemplateEntity();

  // Save to the database
  entities.TemplateEntity.Add(entity);
  entities.SaveChanges();
} 
```

我创建`.edmx`不正确吗？还是我完全错过了什么？我谷歌的所有内容都显示了一个应该允许传入连接字符串的重载。但是，我没有可用的重载。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-21T14:32:19.083

生成的`TemplateEntities`类标记为`partial`。

您所要做的就是添加另一个文件，其中包含部分类定义的另一部分，该部分公开您要使用的构造函数：

```
partial class TemplateEntities
{
  public TemplateEntities( string nameOrConnectionString )
    : base( nameOrConnectionString )
  {
  }
} 
```

然后将您的连接字符串传递给此构造函数。

您希望将此代码放在不同的文件中，以便在更新 edmx 模型时不会被覆盖。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-11T21:04:41.667

尼古拉斯·巴特勒的回答非常正确。除了他所说的之外，我还面临着为实体框架获取现有连接字符串并将其指向具有相同结构的不同数据库的问题。我使用以下代码仅更改现有字符串的数据源：

```
var originalConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["CSName"].ConnectionString;
var ecsBuilder = new EntityConnectionStringBuilder(originalConnectionString);
var sqlCsBuilder = new SqlConnectionStringBuilder(ecsBuilder.ProviderConnectionString)
{
    DataSource = "newDBHost"
};
var providerConnectionString = sqlCsBuilder.ToString();
ecsBuilder.ProviderConnectionString = providerConnectionString;

string contextConnectionString = ecsBuilder.ToString();
using (var db = new SMSContext(contextConnectionString))
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-17T18:18:27.477

这是我在构建解决方案时使用的一步一步：

1.  在您想要的项目上，确保使用“管理 Nuget 包...”选项菜单安装了实体框架。
2.  在您想要的项目上，右键单击，然后添加-> 新建项目，转到数据并选择 ADO.NET 实体数据模型。
3.  输入模型的名称，比如说“ExampleModel”。单击添加。
4.  将出现四个选项来选择模型内容，我通常选择第一个，以便从数据库中的现有对象构建模型。点击下一步。
5.  设置您的数据连接。完成后，输入模型实体的名称，例如“ExampleModelEntities”，单击“下一步”。
6.  从数据库中选择将出现在您的 EF 模型上的对象。在模型命名空间输入框中，键入与步骤 3 相同的模型名称（“ExampleModel”）。单击完成。

此时，已创建一个新的 .edmx 文件并将其添加到项目中，其中包含所有准备工作的对象。只有不想要的细节是，到目前为止，连接字符串已被指定并保存到我们项目的 Web.config 文件中。

要删除它，只需转到`<connectionStrings></connectionStrings>`Web.config 的部分块并从那里删除详细信息。我们现在将致力于使连接字符串从其他来源动态可读。

正如 Nicholas Butler 所指出的，接下来的事情将是创建创建的原始部分实体类 (ExampleModelEntities) 的“版本”，这将允许我们传递动态连接字符串。这是可能的，因为创建的原始实体类继承自 DBContext，DBContext 包含传递此类连接的构造函数。

要执行上述操作，请在您的项目中添加一个新的空类。按照我们的案例研究“ExampleModelEntities”，确保键入第 5 步中提供的相同名称。下面要实现的代码：

**C＃**

```
public partial class ExampleModelEntities
{
public ExampleModelEntities(string connString) : base(connString)
{

}
} 
```

**VB.Net：**

```
Partial Public Class ExampleModelEntities

Public Sub New(ByVal connString As String)
    MyBase.New(connString)
End Sub
End Class 
```

此时，您的代码已准备好使用来自其他来源的动态连接字符串。其中一个来源可能是传递来自存储在不同数据库中的另一个字段或使用*EntityConnectionStringBuilder*类的连接字符串。

下面的例子是在 VB.Net 中实现的，但请使用[Telerik](http://converter.telerik.com/)之类的工具进行翻译。假设我们从某个数据库获取对象列表，只是我们想动态传递来自存储在不同数据库中的另一个字段的连接字符串。为此，代码如下所示：

```
Public Shared Function Get_List(ByVal Param1 As String) As List(Of Stored_Procedure_Code_Result)

Try

Dim Object_List_Result As List(Of Stored_Procedure_Code_Result) = Nothing

Using dbContext As New ExampleModelEntities(Configuration.CONNECTION_STRING)

Object_List_Result = dbContext.Stored_Procedure_Code(Param1).ToList

dbContext.Dispose()
End Using
Return Object_List_Result

Catch ex As Exception
Throw ex
End Try

End Function 
```

其中*Configuration.CONNECTION_STRING*是动态连接字符串的值，使用名为“Configuration”的模块和检索该值的函数表示。

为了避免格式不准确，应使用以下格式存储该值：

*对于使用实体框架的 Windows 身份验证：*

```
UPDATE [DBConnections].[dbo].[ListOfConnectionsTable]
SET ConnValue = 'metadata=res://*/ExampleModel.csdl|res://*/ExampleModel.ssdl|res://*/ExampleModel.msl;provider=System.Data.SqlClient;provider connection string="Data Source=ServerName;Initial Catalog=DBName;Integrated Security=True"' 
```

*对于使用实体框架的 SQL 身份验证：*

```
UPDATE [DBConnections].[dbo].[ListOfConnectionsTable]
SET ConnValue = 'metadata=res://*/ExampleModel.csdl|res://*/ExampleModel.ssdl|res://*/ExampleModel.msl;provider=System.Data.SqlClient;provider connection string="Persist Security Info=False;User ID=XXXXXX;Password=XXXXXXX;Initial Catalog=DBName;Data Source=ServerName;App=YourAppName;Network Library=dbmssocn"' 
```

最后，扩展 Mark 提供的答案，在[微软](https://docs.microsoft.com/en-us/dotnet/api/system.data.entityclient.entityconnectionstringbuilder?redirectedfrom=MSDN&view=netframework-4.7.2)有一个关于如何使用 EntityConnectionStringBuilder 类的详细解释，它也可以用来构建动态连接字符串，然后按需传递这个值。

# cakephp - 如何在cakephp的注册表中添加国家列表？

> ID：14440699
> 
> 赞同：0
> 
> 时间：2013-01-21T14:25:10.180
> 
> 标签：cakephp

我有简单的注册表。我只想在 cakephp 的注册表单中添加下拉国家列表。请给我简单而详细的描述所有相关文件中的操作（如模块、控制器和 .ctp 文件的更改）。我的数据库表“国家”中有国家/地区列表。

在 register.ctp 我这样做了： echo $form->input('country_id');

我是cakephp的新手，请帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:49:06.127

使用以下语法只需将用户模型替换为您正在使用的适当模型。

```
$this->set('countries',$this->User->Country->find('list'));
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:27:57.003

在控制器中（确保列名正确）：

```
$this->loadModel('Country');
$this->set('countries', $this->Country->find('list',array('Country.id','Country.name'))); 
```

鉴于：

```
echo $form->input('country_id', array('options' => $countries)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:30:37.523

使用[“查找](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)”获取所有国家/地区的[列表](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-list)...

```
$this->set('countries', $this->Country->find('list',array('Country.id','Country.name'))); 
```

然后在您的视图中使用[表单助手](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-form-elements)并通过*选项*参数将您的国家/地区传递给它。

```
echo $this->Form->input('country_id', array('options'=>$countries)); 
```

# objective-c - UITextfield 未显示分配的 NSString

> ID：14440701
> 
> 赞同：0
> 
> 时间：2013-01-21T14:25:39.063
> 
> 标签：objective-c, xcode, uitextfield

UITextfield 显示 null 即使 nsstring 具有价值...

我在 IB 中使用了 uitextfield。IB中的连接是正确的。

这是 .h 文件

```
{
    IBOutlet UITextField    *dobTextField;
}

@property (nonatomic, retain) UITextField    *dobTextField; 
```

在 .m 文件中

```
@synthesize dobTextField;

-(void)displayDOB:(NSString*)str
{
    NSLog(@"%@", str);
    dobTextField.text = str;
} 
```

在日志中它显示了一些值......但 dobTextField 显示为空......我试过了

```
dobTextField.text = [NSString StringWithValue:@"%@", str]; 
```

但没用....

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:27:43.947

尝试做...

```
NSLog(@"%@", self.dobTextField); 
```

是零吗？（不应该）

听起来您可能还没有连接 IB 中的插座。

**编辑**

嗯...第二个想法我认为你在混淆事情。

1.  从 .h 文件中删除 ivar。只需使用@property。

    ```
    @property (nonatomic, retain) IBOutlet UITextField *dobTextField; 
    ```

2.  从 .m 文件中删除 @synthesize。

3.  在 displayDOB 函数中使用这个...

    ```
    self.dobTextField.text = str; 
    ```

这将确保所有内容都指的是同一事物，并且在属性方面也使用最佳实践方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T14:31:29.290

看来您还没有在 xib 中设置 UITextField 的出口

在您的界面构建器中检查

另外，更改此行

```
@property (nonatomic, retain) UITextField    *dobTextField; 
```

至

```
@property (nonatomic, retain) IBOutlet UITextField    *dobTextField; 
```

另外，更改此行

```
dobTextField.text = str; 
```

至

```
self.dobTextField.text = str; 
```

希望这可以帮助你..

# java - GWT 中建议框的建议是否可以分成单独的组/类别？

> ID：14440704
> 
> 赞同：3
> 
> 时间：2013-01-21T14:25:46.690
> 
> 标签：java, gwt

我有一个建议框，其中包含 2 种类型的建议。可以说建议类型`A`和建议类型`B`。

我希望能够将显示的建议拆分为建议中的 2 个子列表，以便将所有`A`类型建议分组在一起，并将所有`B`类型建议单独分组。

我没有看到任何东西`SuggestBox`或`SuggestOracle`允许我这样做？看来是应该支持的东西。

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:44:52.963

这是我的快速建议，它未经测试，但也许它会让你走上正确的轨道：

1.  创建自己的`SuggestOracle`，最好扩展`MultiWordSuggestOracle`
2.  确保覆盖`isDisplayStringHTML`以返回 true（但在将值注入为 HTML - XSS 等时要注意常见的威胁）
3.  添加一个新`add`方法来接受上一个建议，对其进行修改，使其包含一些 HTML/CSS 代码，这些代码将呈现上一组建议的结尾。

一些伪代码：

```
MyOracle oracle = new MyOracle();
oracle.add(suggestion1); // Group A
oracle.add(suggestion2);
oracle.newSuggestionGroup(); // insert, for example, <hr /> to the previous suggestion string, in this case suggestion2 - make sure to parse it away afterwards
oracle.add(suggestion3); // Group B 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:56:50.783

`SuggestBox`建议的默认显示是 a `MenuBar`in a `PopupPanel`，但您可以提供[自己的显示](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/SuggestBox.SuggestionDisplay.html)，将`A`s 和`B`s 分开并将它们显示在两个列表中，或者您希望显示它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T14:43:27.683

您最好的选择是使用基于 GWTQuery 构建的第三方库 - [http://jdramaix.github.com/gwtchosen/](http://jdramaix.github.com/gwtchosen/)

您也可以尝试在 GWT 中修改 SuggestBox 或 ListBox，但它们无法像在 GwtChosen 中那样提升到漂亮的 gui 级别。

# sql - 如果提到，按特定值自定义 SQL 记录集顺序

> ID：14440706
> 
> 赞同：2
> 
> 时间：2013-01-21T14:25:54.940
> 
> 标签：sql, sql-server, select, sql-order-by

我有一个使用经典 ASP 和 SQL 编写的在线商店 webapp，我需要有关商品订单结果的帮助。

我有一个名为“items”的表，如下所示：

```
ITEM_NUMBER | DESCRIPTION | PRICE | NEXT_ITEM |
-----------------------------------------------
0001          Item 0001       1.5
-----------------------------------------------
0002          Item 0002       2
-----------------------------------------------
0003          Item 0003       1
-----------------------------------------------
0004          Item 0004       3
-----------------------------------------------
0005          Item 0005       7        0030
-----------------------------------------------
.
.
.
.
-----------------------------------------------
0030          Item 0030       3 
```

我想要做的是按ITEM_NUMBER保持订单，因为它是按项目编号，因为NEXT_ITEM值为null，但在项目0005之后显示项目0030，因为它非常相似，项目编号在项目0005的行中提到. 之后需要返回记录集指针以继续从它跳过的地方加载结果（项目0006）。

一旦记录集到达 0030，我希望它跳过这条记录，因为它已经对用户可见并且之前已经加载过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:24:37.153

这似乎可以完成工作 - 您需要将表连接回自身，并优先使用该自连接而不是通常的排序键：

```
declare @T table (ItemNo char(4) not null,Description varchar(20) not null,RelatedItemNo char(4) null)
insert into @T (ItemNo,Description,RelatedItemNo) values
('0001','0001',null),
('0002','0002',null),
('0003','0003',null),
('0004','0004',null),
('0005','0005','0009'),
('0006','0006',null),
('0007','0007',null),
('0008','0008',null),
('0009','0009',null),
('0010','0010',null)

select
    t.*
from
    @T t
        left join
    @T t_par
        on
            t.ItemNo = t_par.RelatedItemNo
order by
    COALESCE(t_par.ItemNo,t.ItemNo),
    t_par.RelatedItemNo 
```

结果：

```
ItemNo Description          RelatedItemNo
------ -------------------- -------------
0001   0001                 NULL
0002   0002                 NULL
0003   0003                 NULL
0004   0004                 NULL
0005   0005                 0009
0009   0009                 NULL
0006   0006                 NULL
0007   0007                 NULL
0008   0008                 NULL
0010   0010                 NULL 
```

* * *

这不能很好地处理一个项目显示`RelatedItemNo`为多个其他行的情况 - 它会出现在每个这样的位置。但是，同样，您在问题中没有提到这种可能性，也没有提到处理它的具体规则，所以我不会为此添加任何修复。

此外，如果我们需要将其扩展到多个级别，则上述内容仍然不足 - 可以通过引入 CTE 来解决。但是，同样，你没有在你的问题中提到这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:00:40.460

根据您的 SQL Server 版本，您可以`hierarchyid`向表中添加一列并对其进行排序。

或者，您可以编写递归 CTE 来对结果进行排序。

# java - 如何确定由Java调用的另一个进程的等待键盘输入事件

> ID：14440715
> 
> 赞同：1
> 
> 时间：2013-01-21T14:26:28.907
> 
> 标签：java, process

假设您编写了一个 C/C++ 应用程序 (a.exe) 以定期从用户那里获取键盘输入。例如 。第一个键盘输入

```
cin>>id; 
```

在不确定的时间段内进行第二次键盘输入

```
cin>>name; 
```

我想要做的是使用任何进程管理机制 (java.lang.Process..etc) 调用 C++ 程序 (a.exe) 并确定来自 Java 应用程序的键盘输入事件。

此机制在 Netbeans IDE 中实现。有人可以建议一种方法来实现这一点，或者如果有人知道在 netbeans IDE 或其他开源 IDE 中实现此机制的源位置？

# delphi - Delphi：如何在外部应用程序上正确使用 ShowWindow

> ID：14440717
> 
> 赞同：6
> 
> 时间：2013-01-21T14:26:34.927
> 
> 标签：delphi, winapi, windows-7, delphi-xe2

> **另请参阅：**
> [如何判断我的程序的另一个实例是否已在运行？](https://stackoverflow.com/questions/459554/how-can-i-tell-if-another-instance-of-my-program-is-already-running)

我在启动我的应用程序之前使用以下代码来检查它的另一个实例是否已经启动：

```
var _PreviousHandle : THandle;
begin
  _PreviousHandle := FindWindow('TfrmMainForm',nil);
  if _PreviousHandle <> 0 then
  begin
    ShowMessage('Application "" is already running!');
    SetForegroundWindow(_PreviousHandle);
    ShowWindow(_PreviousHandle, SW_SHOW);
    Application.Terminate;
    Exit;
  end;
... 
```

但是，如果它已经启动，我需要显示该应用程序。问题是在以这种方式显示后，最小化按钮不再起作用，当我单击任务栏中的图标时，它“取消最小化”并且显示的动画好像被最小化了。我错过了什么吗？是否有适当的方法在最小化时激活和显示外部应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:00:35.513

这是一个完整的项目，它只继续运行应用程序的一个实例，并且应该将已经运行的实例窗口放在前面。

您可以下载[`testing project`](http://code.google.com/p/projects-stackoverflow-tlama/downloads/detail?name=14440717.zip)或尝试以下代码：

***项目1.dpr***

```
program Project1;

uses
  Forms,
  Windows,
  Unit1 in 'Unit1.pas' {Form1};

{$R *.res}

var
  Mutex: THandle;
const
  AppID = '{0AEEDBAF-2643-4576-83B1-8C9422726E98}';
begin
  MessageID := RegisterWindowMessage(AppID);

  Mutex := CreateMutex(nil, False, AppID);
  if (Mutex <> 0) and (GetLastError = ERROR_ALREADY_EXISTS) then
  begin
    PostMessage(HWND_BROADCAST, MessageID, 0, 0);
    Exit;
  end;

  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm1, Form1);
  Application.Run;
end. 
```

***单元1.pas***

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StrUtils, StdCtrls;

type
  TForm1 = class(TForm)
  private
    function ForceForegroundWindow(WndHandle: HWND): Boolean;
    function ForceRestoreWindow(WndHandle: HWND; Immediate: Boolean): Boolean;
  protected
    procedure WndProc(var AMessage: TMessage); override;
  end;

var
  Form1: TForm1;
  MessageID: UINT;

implementation

{$R *.dfm}

{ TForm1 }

function TForm1.ForceForegroundWindow(WndHandle: HWND): Boolean;
var
  CurrThreadID: DWORD;
  ForeThreadID: DWORD;
begin
  Result := True;
  if (GetForegroundWindow <> WndHandle) then
  begin
    CurrThreadID := GetWindowThreadProcessId(WndHandle, nil);
    ForeThreadID := GetWindowThreadProcessId(GetForegroundWindow, nil);
    if (ForeThreadID <> CurrThreadID) then
    begin
      AttachThreadInput(ForeThreadID, CurrThreadID, True);
      Result := SetForegroundWindow(WndHandle);
      AttachThreadInput(ForeThreadID, CurrThreadID, False);
      if Result then
        Result := SetForegroundWindow(WndHandle);
    end
    else
      Result := SetForegroundWindow(WndHandle);
  end;
end;

function TForm1.ForceRestoreWindow(WndHandle: HWND;
  Immediate: Boolean): Boolean;
var
  WindowPlacement: TWindowPlacement;
begin
  Result := False;
  if Immediate then
  begin
    WindowPlacement.length := SizeOf(WindowPlacement);
    if GetWindowPlacement(WndHandle, @WindowPlacement) then
    begin
      if (WindowPlacement.flags and WPF_RESTORETOMAXIMIZED) <> 0 then
        WindowPlacement.showCmd := SW_MAXIMIZE
      else
        WindowPlacement.showCmd := SW_RESTORE;
      Result := SetWindowPlacement(WndHandle, @WindowPlacement);
    end;
  end
  else
    Result := SendMessage(WndHandle, WM_SYSCOMMAND, SC_RESTORE, 0) = 0;
end;

procedure TForm1.WndProc(var AMessage: TMessage);
begin
  inherited;
  if AMessage.Msg = MessageID then
  begin
    if IsIconic(Handle) then
      ForceRestoreWindow(Handle, True);
    ForceForegroundWindow(Application.Handle);
  end;
end;

end. 
```

***在操作系统版本上测试：***

*   Windows 8.1 64 位
*   Windows 7 SP1 64 位家庭高级版
*   Windows XP SP 3 32 位专业版

***已知问题和限制：***

*   `MainFormOnTaskbar`根本不考虑；此时必须设置为True

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T18:38:31.517

您要求显示主窗体，但是当您将应用程序最小化到任务栏时，可能会出现应用程序隐藏窗口本身被最小化的情况，以防万一[`MainFormOnTaskBar`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TApplication.MainFormOnTaskBar)。

不要从外部调用 ShowWindow 方法。恕我直言，最好将消息传递给应用程序并从内部响应，调用[`Application.Restore`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TApplication.Restore)` 方法，该方法执行正确的 ShowWindow 调用等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T20:09:26.647

这是 VCL 应用程序中非常常见的问题，多年来在 Borland/CodeGear/Embarcadero 论坛中被多次询问和回答。由于在运行时与对象交互的方式，特别是在不同版本的 Delphi 中，`ShowWindow()`以这种方式使用VCL 窗口时效果不佳。您应该做的是让第二个实例向第一个实例发送自定义消息，然后让第一个实例在收到消息时根据需要恢复自身，例如通过设置其属性或调用等，并让VCL 为您制定详细信息，就像@jachguate 建议的那样。`MainForm``TApplication``MainForm.WindowState``Application.Restore()`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T14:32:27.917

以下对我很有效。我不是 100% 确定我已经完全理解了这个问题，所以如果我弄错了，请告诉我。

```
var
  _PreviousHandle: HWND;
  WindowPlacement: TWindowPlacement;
....
WindowPlacement.length := SizeOf(WindowPlacement);
GetWindowPlacement(_PreviousHandle, WindowPlacement);
if WindowPlacement.flags and WPF_RESTORETOMAXIMIZED<>0 then
  WindowPlacement.showCmd := SW_MAXIMIZE
else
  WindowPlacement.showCmd := SW_RESTORE;
SetWindowPlacement(_PreviousHandle, WindowPlacement);
SetForegroundWindow(_PreviousHandle); 
```

请注意`_PreviousHandle`is`HWND`和 not的正确类型`THandle`。

# php - WAMP 上的 PHP 脚本生成错误

> ID：14440718
> 
> 赞同：1
> 
> 时间：2013-01-21T14:26:39.047
> 
> 标签：php, zend-framework, wampserver

我的本地 WAMP 环境出现以下错误

```
Unknown error: Non-static method SJB_System::shutdownFunction() should not be called statically in C:\wamp\www\engjobs\system\core\System.php on line 161
Unknown error: Declaration of GoogleSocialPlugin::ifUserIsRegistered() should be compatible with SJB_SocialPlugin::ifUserIsRegistered($network, $profileSocialID = NULL) in C:\wamp\www\engjobs\system\plugins\google_integration_plugin\google_integration_plugin.php on line 9
Unknown error: Non-static method GoogleSocialPlugin::getNetwork() should not be called statically in C:\wamp\www\engjobs\system\plugins\google_integration_plugin\index.php on line 7
Unknown error: Non-static method SJB_SocialPlugin::getNetwork() should not be called statically in C:\wamp\www\engjobs\system\plugins\google_integration_plugin\index.php on line 7
Unknown error: Declaration of SJB_TwitterDetails::getDetails() should be compatible with SJB_ObjectDetails::getDetails() in C:\wamp\www\engjobs\system\plugins\twitter_integration_plugin\Twitter\TwitterDetails.php on line 156 
```

我没有从生产服务器得到这个，但是有了 WAMP 我得到了这个。

它是 PHP，称为 Smart Job Board 的自定义框架，它建立在 Zend 框架之上

# data-structures - 在 OCaml 中使用数据结构的正确方法

> ID：14440719
> 
> 赞同：2
> 
> 时间：2013-01-21T14:26:39.853
> 
> 标签：data-structures, functional-programming, ocaml

好的，我已经`binary search tree`在 OCaml 中编写了一个。

```
type 'a bstree = 
    |Node of 'a * 'a bstree * 'a bstree
    |Leaf

let rec insert x = function
    |Leaf -> Node (x, Leaf, Leaf)
    |Node (y, left, right) as node -> 
        if x < y then
            Node (y, insert x left, right)
        else if x > y then
            Node (y, left, insert x right)
        else
            node 
```

* * *

我猜上面的代码没有问题。

使用时，我写

`let root = insert 4 Leaf`

`let root = insert 5 root`

...

**这是通往`use/insert`树的正确方法吗？**

我的意思是，我想我不应该声明根并且每次我再次更改变量根的值，对吧？

如果是这样，我怎样才能始终保持根并可以随时将值插入树中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T14:44:07.043

这看起来像是插入树的良好功能代码。它不会在插入过程中改变树，而是创建一个包含该值的新树。不可变数据的基本思想是你不“保留”东西。您计算值并将它们传递给新函数。例如，这是一个从列表创建树的函数：

```
let tree_of_list l = List.fold_right insert l Leaf 
```

它通过将当前树传递给对`insert`.

以这种方式思考是值得学习的，因为 FP 的许多好处都来自于不可变数据的使用。然而，OCaml 是一种混合范式语言。如果您愿意，您可以使用引用（或可变记录字段）在更改值时“保留”一棵树，就像在普通命令式编程中一样。

**编辑：**

您可能会认为以下会话显示了对变量 x 的修改：

```
# let x = 2;;
val x : int = 2
# let x = 3;;
val x : int = 3
# 
```

然而，看待这一点的方式是，这是两个不同的值，碰巧都被命名为 x。因为名称相同，所以 x 的旧值被隐藏。但是，如果您有另一种访问旧值的方法，它仍然会存在。也许以下将显示事情是如何工作的：

```
# let x = 2;;
val x : int = 2
# let f () = x + 5;;
val f : unit -> int = <fun>
# f ();;
- : int = 7
# let x = 8;;
val x : int = 8
# f ();;
- : int = 7
# 
```

创建一个名为`x`8 的新事物不会影响`f`它的作用。它仍然使用`x`定义时存在的旧版本。

**编辑2：**

从树中删除一个不可变的值类似于添加一个值。即，您实际上并没有修改现有的树。您创建了一个没有您不想要的值的新树。正如插入不会复制整个树（它会重复使用前一棵树的大部分），所以删除也不会复制整个树。树中未更改的任何部分都可以在新树中重新使用。

**编辑 3**

这是一些从树中删除值的代码。它使用一个辅助函数来连接两棵已知不相交的树（此外，a 中的所有值都小于 b 中的所有值）：

```
let rec adjoin a b =
    match a, b with
    | Leaf, _ -> b
    | _, Leaf -> a
    | Node (v, al, ar), _ -> Node (v, al, adjoin ar b)

let rec delete x = function
    | Leaf -> Leaf
    | Node (v, l, r) ->
        if x = v then adjoin l r
        else if x < v then Node (v, delete x l, r)
        else Node (v, l, delete x r) 
```

（希望我没有破坏你的作业！）

# android - 在 android/sqlite 中跨多个表级联删除

> ID：14440721
> 
> 赞同：1
> 
> 时间：2013-01-21T14:26:48.207
> 
> 标签：android, sqlite, android-sqlite

我正在尝试级联删除，以便当我从`myFooTable`所有关联记录中删除记录时`myFooBarLinkTable`，`myBarTable`也会被删除。我当前的数据库模式尝试的简化版本如下。当我从`myFooTable`关联的记录中删除一条记录时`myFooBarTable`被删除；但其中的记录`myBarTable`仍然存在。

```
public class MyDatabaseManager extends SQLiteOpenHelper {
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE myFooTable (fooID INTEGER PRIMARY KEY AUTOINCREMENT, " +
                "fooText1 TEXT," +
                "fooText2 TEXT " +    
                ");");

    db.execSQL("CREATE TABLE myBarTable (barID INTEGER PRIMARY KEY AUTOINCREMENT, " +
                "barText1 TEXT, " +
                "barText2 TEXT);" );

    db.execSQL("CREATE TABLE myFooBarLinkTable (fooBarLinkID INTEGER PRIMARY KEY AUTOINCREMENT, " +
                "fooLinkID REFERENCES myFooTable(fooID) ON DELETE CASCADE, " +
                "barLinkID REFERENCES myBarTable(barID) ON DELETE CASCADE);" ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:11:33.413

`ON DELETE CASCADE` [只有一种方式工作](http://www.sqlite.org/foreignkeys.html#fk_actions)；表定义中的这些子句仅在被*引用*`myFooBarLinkTable`表中的记录被删除时触发，即在或中。*`myFooTable``myBarTable`*

 *如果您希望以另一种方式进行删除，您必须编写自己的触发器，或者`DELETE`从您的应用程序中执行单独的命令。*

# excel - Excel 更改坐标轴位置

> ID：14440723
> 
> 赞同：0
> 
> 时间：2013-01-21T14:26:52.617
> 
> 标签：excel, axes

例如，我在ax中的`X`轴中，如何更改轴中的轴位置和轴中的位置。更改数据位置的解决方案不好，因为如果我的名字是 1 行和年龄 2，我无法更改位置轴。`names``Y``age``X``age``Y``names`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:06:27.817

1.  选择具有 Y 值的列
2.  创建图表
3.  在图表选项中选择“添加数据”并选择 x 值的列

# javascript - 两个 Kinetic.Shape 之间的比较

> ID：14440726
> 
> 赞同：1
> 
> 时间：2013-01-21T14:26:56.590
> 
> 标签：javascript, html, canvas, kineticjs

我想做两个动力学形状之间的比较：

这是我的代码：

```
//  -- self.group = Kinetic.Group() With 10 Shapes
//New Group
var Ngroup = new Kinetic.Group(); 
//ss New Shape
var ss = new Kinetic.Shape(); 
//Insert Current Shape Into ss
ss = getShape(t); 

// Checking If current shape exist in self.group
for(var s in self.group) {

//Check If s = ss <---

if(ss == s){

//Add The Shape to new group
alert("Found");
Ngroup.add(ss);

} else {

//Add the Old Shape to the new group
Ngroup.add(s);

}
} 
```

此代码不起作用
我如何比较两个形状？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:36:05.810

对于如此复杂的对象，这些不是 ==，您必须分别查看每个属性以进行比较。

喜欢：

```
 shape1.getWidth() == shape2.getWidth() // will work as a comparison      
 shape1.getHeight() == shape2.getHeight() // will work as a comparison      
 shape1.getX() == shape2.getX() // will work as a comparison      
 shape1.getY() == shape2.getY() // will work as a comparison    
 shape1 == shape2 //will not work as the objects are not the same object. Even the z-index is different. 
```

所有属性都列在具有相应功能的文档中：http: [//kineticjs.com/docs/symbols/Kinetic.Node.php](http://kineticjs.com/docs/symbols/Kinetic.Node.php)

# c++ - BLAS+多精度+MPI

> ID：14440729
> 
> 赞同：0
> 
> 时间：2013-01-21T14:27:09.307
> 
> 标签：c++

我正在用 C++ 为我的数学博士学位写一个科学应用程序，它基于一些重线性代数，主要是 BLAS 3 级例程。所用矩阵的大小差异很大，理想情况下，我希望能够处理 10000 或更高阶的非常大的矩阵。到目前为止，我已经使用了多线程的英特尔 MKL，可以很好地扩展到 8 个内核。我的算法产生正确的结果，但是在双精度算术中非常不稳定，这是由于采用高功率导致的累积误差。此外，由于我可以访问大型超级计算机集群，并且我的算法可以轻松地跨多个节点扩展，我想使用 MPI 将应用程序扩展到数百个节点。

我的目标是找到一个模板化的 BLAS 库：

支持多精度算术，支持多线程，支持MPI

到目前为止我的发现：MTL4 - Matrix Template library 4 似乎完成了上述所有工作，但是开源版只能在一个内核上运行，而超级计算版的成本相当高。

Eigen - 似乎不支持多核？如果与 MKL 链接，它是否支持多核和 MPI？

犰狳 - 以上所有吗？

我将不胜感激任何见解和建议

亲切的问候，

玛丽亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:52:53.740

根据您的矩阵问题，Trilinos 的[Tpetra 包](http://trilinos.sandia.gov/packages/tpetra/)可能值得一看。它以标量类型为模板，因此您可以使用多种精度类型。它针对超级计算机上的大规模应用程序，因此可以期待良好的并行性能。

希望能帮助到你！

编辑：它是免费的！

# git - 为 github.com 上的 repo 添加虚拟 refs

> ID：14440732
> 
> 赞同：1
> 
> 时间：2013-01-21T14:27:12.490
> 
> 标签：git, github, gitolite

github.com 是否支持添加像[gitolite 或 gitosis 中讨论的 gilote 之类的虚拟引用：对存储库内部目录的权限](https://stackoverflow.com/questions/8047416/gitolite-or-gitosis-permission-on-directory-inside-of-the-repository)？

我需要在 repo 内的目录级别限制访问。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:44:44.837

不，至少不像 gitolite VREF。

在 Github 方面，有一个[post-receive hook](https://help.github.com/articles/post-receive-hooks)或[webhooks](https://help.github.com/articles/testing-webhooks)，但都是在 push 之后。

真正保护一个 Github 存储库中的目录的唯一方法是在其自己的 GitHub 存储库中创建/导出该目录，并在第一个存储库中将其声明为[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)。

# backbone.js - 是否可以离线同步工作

> ID：14440733
> 
> 赞同：2
> 
> 时间：2013-01-21T14:27:15.110
> 
> 标签：backbone.js

我在本地系统中确实有一些数据。我由骨干实现。怀疑是否可以将我的功能与本地数据添加或删除同步？

还是主干只对服务器响应起作用？如果它即使在本地主机中也能工作，我如何同步我在这里提出的本地请求？

任何人都在看这个请求，请不要介意我，我是一个非常新的 backone 和紧张的位置来制作一个项目。

我写的代码：

```
(function($){

var list = {};

list.model = Backbone.Model.extend({
  defaults:{
    name:'need the name'
  }
});

list.collect = Backbone.Collection.extend({
  model:list.model,
  url : 'data/names.json',
  initialize:function(){
    this.fetch(); // how can i sync?
  }
});

list.view = Backbone.View.extend({
  initialize:function(){
    this.collection = new list.collect();
    this.collection.on("reset", this.render, this);
  },
  render:function(){
    _.each(this.collection.models, function(data){
      console.log(data.get('name')); 
    })
  }
});

var newView = new list.view();    

})(jQuery) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:34:26.323

简而言之，是的，要做到这一点，您基本上将数据同步/保存到本地存储。

您可以通过覆盖同步方法手动执行此操作，但您可能需要查看旨在为您执行此操作的[骨干网。](https://github.com/Ask11/backbone.offline)

**更新：**

It looks like backbone.offline is now under *long reconstruction*, for anyone else looking for an offline solution you might want to have a look at [backbone.localStorage](https://github.com/jeromegn/Backbone.localStorage) (which backbone.offline was in part based on but which has now been more recently updated) or at [Backbone.dualStorage](https://github.com/nilbus/Backbone.dualStorage).

# preg-match - 如何提取一些字符串的第一张图像

> ID：14440734
> 
> 赞同：0
> 
> 时间：2013-01-21T14:27:17.833
> 
> 标签：preg-match, image, extract, src

我有这个变量`$img = $_POST['cur_image'];`

其中 cur_image 和 $img 的内容是：

```
<img style="display: inline;" src="http://news.bbcimg.co.uk/media/images/65348000/jpg/_65348094_belreuters.jpg" id="1" width="100"><img style="display: none;" src="http://news.bbcimg.co.uk/media/images/65356000/jpg/_65356067_65356066.jpg" id="2" width="100"><img style="display: none;" src="http://news.bbcimg.co.uk/media/images/65367000/jpg/_65367308_coffee.jpg" id="3" width="100"><img style="display: none;" src="http://news.bbcimg.co.uk/media/images/65376000/jpg/_65376729_heart.jpg" id="4" width="100"> 
```

所以我只需要提取我得到**的第一张图片的链接，**即（http://news.bbcimg.co.uk/media/images/65348000/jpg/_65348094_belreuters.jpg）

而不是发送到数据库，例如

```
mysql_query("INSERT INTO `table` (img) VALUES ('$img')"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:42:07.433

这样的事情怎么样？（未经测试）

```
$tmp_img = $_POST['cur_image'];

$img_path_offset = strpos($tmp_img, "src=") + 4;
$img_path_end = strpos($tmp_img, "\"", $img_path_offset);

$img = substr($tmp_img, $img_path_offset, $img_path_length); 
```

然后运行你的MySql ..

干杯，维果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:02:12.420

使用 preg_match 您可以执行以下操作：

```
$tmp_img = $_POST['cur_image'];
$match = "src=[\"'](.+?)[\"']"
preg_match($match, $tmp_img, $matches_array);
$img = substr($matches_array[0], 4, -1); 
```

然后你的MySql ..

# android - 如何堆叠不同活动的常用方法

> ID：14440737
> 
> 赞同：0
> 
> 时间：2013-01-21T14:27:22.870
> 
> 标签：android, android-layout, android-activity, static-methods

[![](../Images/84ee6753039c7a941b44633f56d6b97c.png)](https://i.stack.imgur.com/bTheO.jpg)

我正在为 ActivityButtons 使用新活动。所以我喜欢 10 种不同的活动，它们都使用相同的页脚。在页脚中，有按钮和大量的点击事件。我只是将页脚按钮的所有侦听器事件复制粘贴到其他一些活动中以对其进行测试。它有效，但我需要找到一种方法将它们全部保存在某个地方，以便在需要时只修改一次。

我尝试通过将所有常用方法设为静态来将它们保存在单独的实用程序类中，但是它的用途有限。我在引用和非静态方法方面遇到问题。

在我的研究中，我阅读了有关 ViewFlipper 的信息。如果我对所有内容使用单个 MainActivity 并使用 ViewFlipper 在布局之间切换会更好。我已经读到这可能会导致一些资源问题，因为唯一的活动将一直处于活动状态。

你对这个问题有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:30:37.693

您可以创建一个`ParentActivity`，它将处理`onClick`方法，然后让您的其他人为他们`Activities`做特定的事情。`extend``ParentActivity`

另一种方法是使用`Fragments`. 创建一个将处理 的片段`Footer`，而其他片段将根据它们预期工作的工作而有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:38:35.267

有几件事需要考虑。

拳头是页脚在 android 上是一个有点问题的设计模式。由于设备在屏幕区域正下方带有软按钮，因此用户在瞄准页脚时很容易意外点击系统按钮，反之亦然。如果您不喜欢使用页脚，我建议您在页脚和屏幕底部边缘之间留出足够的边距，以帮助缓解这种情况。

对于如何处理布局和单击侦听器，您有几个选项。你可以把页脚变成它自己的[片段](https://developer.android.com/guide/components/fragments.html)，然后简单地将它添加到每个需要它的活动中。这可以说是更困难的方法，但如果您准备好迎接挑战，它将提供良好的 Fragments 学习体验。

另一种选择是，但您所有的页脚都在他们自己的活动中单击侦听器，然后将其扩展到所有其他活动。像这样的东西：

```
public class FooterActivity extends Activity{
    Button btn1
    //...
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.id.yourLayout);
        btn1 = (Button)findViewById(R.id.btn1);
        btn1.setOnClickListener(yourClickListener);
        //...
    }
} 
```

然后在您的正常活动中更改`extends Activity`为`extends FooterActivity`

# php - 内爆用双引号作为分隔符

> ID：14440743
> 
> 赞同：8
> 
> 时间：2013-01-21T14:27:50.497
> 
> 标签：php, implode

我现在有这个：

```
$_words = "'".implode("','", $array_of_words)."'"; 
```

这给了我一个像这样的字符串：

```
'word','word2','word3' 
```

我怎样才能修改它以获得

```
"word","word2","word3" 
```

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-21T14:28:45.880

只是交换你的报价

```
$_words = '"'.implode('","', $array_of_words).'"'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T10:35:10.490

```
$result=array();
foreach ($array_of_words as $a1) {
    $result[]='"'.$a1.'"';
}
$_words = implode( ',', $result );
echo $_words; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-02T23:44:13.327

`$_words = implode( "','", $array_of_words );`

# jquery - Kendo UI Grid 下拉/选择菜单

> ID：14440744
> 
> 赞同：1
> 
> 时间：2013-01-21T14:27:50.903
> 
> 标签：jquery, kendo-ui

如何使用远程数据将选择下拉菜单引入我的 Kendo ui 网格列之一？

文档在这个主题上非常有限，特别是我的要求是：

要让我的 PHP/MySQL 脚本中的选项列表填充下拉菜单。

如果已经根据数据库中的查询设置了其中一个选项，请在菜单中选择该选项。

* * *

根据提供的答案，我现在有以下内容，但它不起作用。我得到一个下拉列表，其中包含所有“未定义”的选项：

```
function categoryDropDownEditor(container, options) {
$('<input required data-text-field="'+options.field+'" data-value-field="'+options.field+'" data-bind="value:' + options.field + '"/>')
    .appendTo(container)
    .kendoDropDownList({
        autoBind: false,
        dataTextField: "text",
        dataValueField: "value",
        dataSource: {
            type: "POST",
            transport: {
                read: ROOT+"user/branch-list"
            }
        },
        index: 0
    });
} 
```

我的 PHP 脚本只返回 JSON，如下所示：

```
[{text: "Germany", value: "1"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:22:25.677

您可以[`editor`](http://docs.kendoui.com/api/web/grid#columnseditor-function)在为该字段定义列时使用。

```
{ field: "color", title: "Color", editor: editColor } 
```

其中`editColor`是一个函数定义为：

```
var data = [
     { text: "Black", value: "1" },
     { text: "Orange", value: "2" },
     { text: "Grey", value: "3" }
];

function editColor(container, options) {
    $('<input data-bind="value:' + options.field + '" '"/>')
            .appendTo(container)
            .kendoDropDownList({
                dataTextField: "text",
                dataValueField: "value",
                dataSource: data,
                index: 0,
            });
} 
```

您可以设置所需的`kendoDropDownList`任何[配置选项](http://docs.kendoui.com/api/web/dropdownlist#configuration)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:35:43.103

此外，您可能需要检查您的数据源是否正确解析了您的数据。

例如，我的 json 看起来像这样，您可以看到实际记录包含在 _ *ENTITIES 数组中。因此，为了让数据源正确解析它，我必须*在我的数据源的模式中指定数据：“_ENTITIES”。我希望这有帮助

架构：{模型：myModel，数据：“__ENTITIES”}

{"_ *entityModel":"联系人","* _COUNT":13,"_ *SENT":13,* "_ FIRST":0,"_ *ENTITIES":[{"* _ KEY":"177","_ *STAMP":16 ,"ID":177,"firstName":"","middleName":"","lastName":"","ContactType":{"* _KEY":"2","_ *STAMP":4,"ID ":2,"name":"Home","contactCollection":{"* _deferred":{"uri":"/rest/ContactType(2)/contactCollection?$expand=contactCollection"}}},"addressCollection": {"__deferred":{"uri":"/rest/Contact(177)/addressCollection?$expand=addressCollection"}}},

{"_ *KEY":"180","* _ STAMP":5,"ID":180,"firstName":"a","middleName":"b","lastName":"c","ContactType": {" _KEY" *:"2","* _ STAMP":4,"ID":2,"name":"Home","contactCollection":{"_ *deferred":{"uri":"/rest/ContactType (2)/contactCollection?$expand=contactCollection"}}},"addressCollection":{"* _deferred":{"uri":"/rest/Contact(180)/addressCollection?$expand=addressCollection"}}}

# ajax - 使用 Ajax 更改 InputText-Values

> ID：14440745
> 
> 赞同：0
> 
> 时间：2013-01-21T14:27:52.473
> 
> 标签：ajax, jsf

所以我有一堆 InputText-Boxes，它们表达某种客户数据（客户 ID、名字、姓氏等）

现在，当我输入有效的客户 ID 时，我想自动填充（使用相应的 mysql 数据）所有 InputText-Boxes。

```
<h:inputText id = "customer_id" value="#{reservationHandler.customer.customer_id}"/> 
```

我想我必须使用 Ajax 将当前的客户 ID 传递给托管 bean，但我该怎么做呢？以及如何填充其他 InputText-Boxes？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:44:17.807

可以使用`<f:ajax>`JSF 2 附带的标记来完成此任务，[本教程对此](http://mkblog.exadel.com/2010/04/learning-jsf-2-ajax-in-jsf-using-fajax-tag/)进行了很好的说明。第一个示例向您展示了如何完成手头的任务。另一个建议是对`@ViewScoped`托管 bean 使用注释，如 BalusC 博客文章所述：[JSF 2.0 中的通信 - 托管 bean 范围](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)。

有了所有这些信息和您正在使用的托管 bean，演示可能是：

客户类

```
public class Customer {
    private int customer_id;
    private String name;
    //constructor, getters and setters...
} 
```

ReservationHandler 托管 bean

```
@ManagedBean
@ViewScoped
public class ReservationHandler {
    private Customer customer;
    //this EJB will retrieve the Customer data
    //if you don't have it like this, then use your own 
    //custom CustomerService class/implementation to retrieve the data from dabatase
    @EJB
    private CustomerService customerService;
    //constructor, getters and setters...
    @PostConstruct
    public void init() {
        customer = new Customer();
    }
    public void showCustomerDataListener(AjaxBehaviorEvent event) {
        Customer customerFromDB =
            customerService.getCustomer(customer.getCustomer_id());
        if (customerFromDB != null) {
            customer = customerFromDB;
        }
    }
} 
```

客户 Facelets 视图（只是相关代码）

```
<h:form>
    <h:outputText value="Customer ID:" />
    <h:inputText id="customer_id"
        value="#{reservationHandler.customer.customer_id}">
        <f:ajax event="blur"
            listener="#{reservationHandler.showCustomerDataListener}"
            render="customer_name" />
    </h:inputText>
    <h:outputText value="Customer name:" />
    <h:inputText id="customer_name"
        value="#{reservationHandler.customer.name}" />
</h:form> 
```

如果您的`Customer`班级拥有超过 1 个属性，您有两种选择：

1.  `render`在组件的属性中设置每个输入的ID `<f:ajax>`，但这很幼稚。

2.  将所有组件与一个组合`UIContainer`并呈现此 UIContainer。假设`Customer`该类具有附加`private String address`属性的示例：

    ```
    <h:form>
        <h:outputText value="Customer ID:" />
        <h:inputText id="customer_id"
            value="#{reservationHandler.customer.customer_id}">
            <f:ajax event="blur"
                listener="#{reservationHandler.showCustomerDataListener}"
                render="customerData" />
        </h:inputText>
        <h:panelGrid id="customerData" columns="2">
            <h:outputText value="Customer name:" />
            <h:inputText id="customer_name"
                value="#{reservationHandler.customer.name}" />
            <h:outputText value="Address:" />
            <h:inputText id="customer_address"
                value="#{reservationHandler.customer.address}" />
        </h:panelGrid>
    </h:form> 
    ```

了解应用支持的事件`<f:ajax event="what_to_write_here">`，请参考[f:ajax JSF Core Tag Reference](http://www.jsftoolbox.com/documentation/help/12-TagReference/core/f_ajax.html)，事件标签属性说明：

> 将调用 Ajax 请求的事件，例如“click”、“change”、“blur”、“keypress”等。**该事件必须由启用 Ajax 行为的组件支持**。注意：**事件名称与没有“on”前缀的 DOM 事件名称相同**，因此对于“onclick”事件，正确的事件名称是“click”。h:commandButton、h:commandLink等命令组件支持“action”事件，h:inputText、h:selectOneMenu等输入组件支持“valueChange”事件。

# javascript - Googlemaps API V3：信息框插件和侧边栏链接

> ID：14440749
> 
> 赞同：3
> 
> 时间：2013-01-21T14:27:58.993
> 
> 标签：javascript, api, google-maps, infobox

我有一个工作地图，其中包含一个谷歌地图画布和地图侧面的 2 个链接，当点击这些链接时，它会将用户带到存储的 latlong 位置和一个信息窗口。我的下一步是设置标记（已经成功）和 infoWindows 的样式。

为了设置 infoWindows 的样式，我使用了已经设置样式的 InfoBox 插件，但是我不确定如何将这个插件用于两个不同的 infoWindows。样式将保持不变，但内容会发生变化。目前 infoBox 正在工作，但是当用户单击第二个链接时，infoBox 中的内容保持不变。

工作链接：http: [//jsfiddle.net/charliebee/363ea/3/](http://jsfiddle.net/charliebee/363ea/3/)

代码

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?&sensor=false"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js"></script>

var side_bar_html = ""; 
var gmarkers = []; 
var map = null;
var infobox;

function initialize() {
  var myOptions = {
    zoom: 12,
    styles: styles,
    center: new google.maps.LatLng(54.97962549875775,-1.5975022315979004),
    mapTypeControl: true,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    navigationControl: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP

  }
  map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
  google.maps.event.addListener(map, 'click', function() {
});

  var point = new google.maps.LatLng(lat,long);
  var marker = createMarker(point,"City 1")

  var point = new google.maps.LatLng(lat,long);
  var marker = createMarker(point,"City 2")

  document.getElementById("marker_list").innerHTML = side_bar_html;
}

function myclick(i) {
  map.setCenter(gmarkers[i].getPosition());
  google.maps.event.trigger(gmarkers[i], "click");
}

function createMarker(latlng, name, html) {

    var contentString = html;
    var image = 'images/mapIcon.png';

    var marker = new google.maps.Marker({
        position:latlng,
        map: map,
        icon: image
        });

     infobox = new InfoBox({
         content: document.getElementById("infobox","infobox2"),
         disableAutoPan: true,
         maxWidth: 280,
         pixelOffset: new google.maps.Size(0, 0),
         zIndex: null,
         boxStyle: {
         backgroundURL:"images/bg.png",
         opacity: 0.89,
         width: "280px"
        },
        closeBoxMargin: "20px 20px 20px 20px",
        closeBoxURL: "images/close.png",
        infoBoxClearance: new google.maps.Size(1, 1),
    enableEventPropagation: false
    });
    google.maps.event.addListener(marker, 'click', function() {
    infobox.open(map, this);
        map.panTo(loc);
        infobox.setContent(contentString); 
        infobox.open(map,marker);
        });

       gmarkers.push(marker);

    side_bar_html += '<a href="javascript:myclick(' + (gmarkers.length-1) + ')">' + name + '<\/a><br>';
}

<div class="infobox-wrapper">
    <div id="infobox">
    Content 1
    </div>
    <div id="infobox2">
    Content 2
    </div>
</div 
```

有人能给我建议以实现这一目标吗？我尝试通过使用两个 infoBox 选项或标记名称来修改内容，但没有成功。这是我除了样式表之外的所有代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:28:32.443

问题出在图标上：

[http://jsfiddle.net/z9Apy/1/](http://jsfiddle.net/z9Apy/1/)

如果我改变这个：

```
var marker = new google.maps.Marker({
    position:latlng,
    map: map,
    icon: image
    }); 
```

至：

```
var marker = new google.maps.Marker({
    position:latlng,
    map: map 
    }); 
```

它显示标记。

**更新：**

内容的问题是这一行：

```
content: document.getElementById("infobox","infobox2") 
```

那一次只能返回一个元素。一种选择是更改您的 createMarker 函数以获取要使用的 id 元素的 id。

```
function createMarker(latlng, name, elId) {
    var image = 'images/mapIcon.png';

    var marker = new google.maps.Marker({
        position:latlng,
        map: map /*,
        icon: image */
        });

        infobox = new InfoBox({
         content: document.getElementById(elId),
         disableAutoPan: true,
         maxWidth: 280,
         pixelOffset: new google.maps.Size(60, -150),
         zIndex: null,
         boxStyle: {
         opacity: 0.89,
         width: "280px"
        },
        closeBoxMargin: "20px",
        closeBoxURL: "images/cross.png",
        infoBoxClearance: new google.maps.Size(1, 1),
        enableEventPropagation: false
    });

    google.maps.event.addListener(marker, 'click', function() {
        infobox.open(map, this);
        map.panTo(latlng);
        infobox.setContent(document.getElementById(elId)); 
        });

    gmarkers.push(marker);

    side_bar_html += '<a href="javascript:myclick(' + (gmarkers.length-1) + ')">' + name + '<\/a><br>';
} 
```

[例子](http://jsfiddle.net/z9Apy/4/)

# lwuit - 从手机文件系统打开资源文件

> ID：14440750
> 
> 赞同：0
> 
> 时间：2013-01-21T14:28:00.337
> 
> 标签：lwuit, codenameone

代号一是否可以从服务器下载资源文件，将其存储在手机内存中，然后在应用程序中打开？这可能是发布后支持应用程序的好机会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:05:10.737

当然。您可以使用标准下载文件`ConnectionRequest`并使用`Storage`API 保存。该类`Resources`有一个`open`方法，它接受一个`InputStream`供您稍后打开它的方法。

# postgresql - 在 PostgreSQL+PostGIS 上插入数百万行、转换数据和处理数据的有效方法

> ID：14440755
> 
> 赞同：3
> 
> 时间：2013-01-21T14:28:19.930
> 
> 标签：postgresql, optimization, loading, postgis

我有大量的数据，我想稍后用于用户搜索。目前我有 2 亿资源（~50GB）。对于每个，我都有纬度+经度。目标是创建空间索引以便能够对其进行空间查询。因此，计划是使用 PostgreSQL + PostGIS。

我的数据在 CSV 文件中。我尝试使用自定义函数不插入重复项，但经过几天的处理我放弃了。我找到了一种在数据库中快速加载它的方法：使用 COPY 只需不到 2 小时。

然后，我需要在几何格式上转换纬度+经度。为此，我只需要这样做：

```
ST_SetSRID(ST_MakePoint(longi::double precision,lat::double precision),4326)) 
```

经过一番检查，我看到2亿，我有5000万点。所以，我认为最好的方法是拥有一个存储所有点的表“TABLE_POINTS”和一个存储带有point_key的资源的表“TABLE_RESOURCES”。

所以我需要从临时表“TABLE_TEMP”中填写“TABLE_POINTS”和“TABLE_RESOURCES”，并且不保留重复项。

对于“点”，我做了：

```
INSERT INTO TABLE_POINTS (point)
SELECT DISTINCT ST_SetSRID(ST_MakePoint(longi::double precision,lat::double precision),4326))
FROM TABLE_RESOURCES 
```

我不记得花了多少时间，但我认为这是几个小时的问题。

然后，为了填写“资源”，我尝试了：

```
INSERT INTO TABLE_RESOURCES (...,point_key)
SELECT DISTINCT ...,point_key
FROM TABLE_TEMP, TABLE_POINTS
WHERE ST_SetSRID(ST_MakePoint(longi::double precision,lat::double precision),4326) = point; 
```

但是又需要几天时间，并且无法查看查询的距离...

还有一点很重要，资源的数量会不断增长，目前应该每天增加100K，所以应该优化存储以保持对数据的快速访问。

因此，如果您对存储的加载或优化有任何想法，欢迎您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:34:01.713

首先考虑优化 postgres（即 google postgres unlogged、wal 和 fsync 选项），其次你真的需要点是唯一的吗？也许只有一张包含资源和积分的表格，而不必担心重复的积分，因为看起来您的重复查找可能很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T17:23:17.597

为了`DISTINCT`有效地工作，您需要在要消除重复的那些列上建立数据库索引（例如，在纬度/经度列上，甚至在所有列的集合上）。

所以首先将所有数据插入到你的临时表中，然后`CREATE INDEX`（这通常比预先创建索引更快，因为在插入过程中维护它的成本很高），然后才执行`INSERT INTO ... SELECT DISTINCT`.

An `EXPLAIN <your query>` can tell you whether the `SELECT DISTINCT` now uses the index.

# twitter - 推文后显示内容？

> ID：14440758
> 
> 赞同：0
> 
> 时间：2013-01-21T14:28:23.803
> 
> 标签：twitter

简单的问题，但我似乎无法在网上找到答案。（这可能意味着这是不可能的）。

我知道内容可以向用户显示/隐藏，具体取决于是否喜欢 Facebook 上的页面。

可以通过 Twitter 实现相同的目标吗？

编辑：基本上，有没有办法起诉 Twitter API 来制作推文（由经过身份验证的用户）并获取回发信息，无论推文是否成功或用户关闭了弹出窗口？

# tsql - 简单的选择语句作为用户定义的函数

> ID：14440760
> 
> 赞同：-4
> 
> 时间：2013-01-21T14:28:28.557
> 
> 标签：tsql, function

我将如何将其转换为用户定义的函数？另外，我知道有几种类型的 UDF……在这种情况下哪一种最好？感谢您的帮助。

```
SELECT TOP 10 ParkingSpotNumber
, count(*) as 'Usage'
  FROM ParkingTransaction
  GROUP BY ParkingSpotNumber
  ORDER BY 'Usage' DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:39:15.120

由于您返回的列不止一列并且您希望这是一个函数，因此您可以使用[`Table-Valued Function`](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)：

```
create function Top_Parking_usage()
returns @ParkingCount table
(
  ParkingSpotNumber int not null,
  UsageCount int not null
)
as
BEGIN
  INSERT INTO @ParkingCount(ParkingSpotNumber, UsageCount)
  SELECT TOP 10 ParkingSpotNumber
    , count(*) as 'Usage'
  FROM ParkingTransaction
  GROUP BY ParkingSpotNumber
  ORDER BY 'Usage' DESC

  RETURN
END;
GO 
```

然后当你调用它时，你将使用：

```
select *
from dbo.Top_Parking_usage() 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/3233c/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:43:29.500

试试下面......它返回表格......

```
CREATE FUNCTION udf_GetParkingInfo()
RETURNS TABLE
AS
RETURN 
(
  SELECT TOP 10 ParkingSpotNumber
, count(*) as 'Usage'
  FROM ParkingTransaction
  GROUP BY ParkingSpotNumber
  ORDER BY 'Usage' DESC
);

SELECT * from udf_GetParkingInfo() 
```

# mysql - has_many ，通过：关系计数

> ID：14440769
> 
> 赞同：0
> 
> 时间：2013-01-21T14:28:57.110
> 
> 标签：mysql, ruby-on-rails, database

我希望有人可以帮助我解决这个问题，现在已经尝试了一个星期，我找到了很多例子，但是由于我是 Rails 新手，我想我一直在某个地方犯错，我就是找不到适合我的情况的正确解决方案。所以我有：

```
class Blog < ActiveRecord::Base
   attr_accessible :name, :subject_id, :created_at
   has_many :blogs_messages
   has_many :messages, through: :blogs_messages
end

class Message < ActiveRecord::Base
   attr_accessible :title, :body, :created_at
   has_many :blogs_messages
   has_many :blogs, through: :blogs_messages
end

class BlogsMessages < ActiveRecord::Base
  attr_accessible :message_id, :blog_id
  belongs_to :blog
  belongs_to :message
end 
```

消息存在于不同的博客中（如粉色博客、绿色博客、栗色博客等），博客存在于主题中（深色、亮色等）主题有许多博客，但博客只能属于一个主题。

BlogsMessages 是消息和博客之间的连接，我试图做的是显示：一个主题内的前 3 个博客（按其中的消息数量）

因此，例如，当我想选择主题深色时，它会告诉我：

```
 1.Maroon Blog: 46 messages
    2.Grey Blog: 13 messages
    3.Purple Blog: 12 messages 
```

（主题深色共有 8 个博客。）

有人可以帮我解决这个问题，或者至少为我指出正确的方向如何让这一切正常工作？

**更新：**

在我的 Blogs_controller 现在我有：

```
@blogs = Blog.joins(:blogs_messages => :message).select('blogs.*, COUNT(messages.id) AS message_count').group('blog_id').order('COUNT(messages.id) DESC').limit(3) 
```

在我的博客视图中：

```
 <% @blogs.each do |blog| %>
      <li><%= blog.name %>:  messages</li>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:36:04.087

我不确定这是否可行，因为我无法对其进行测试，但它可能会对您有所帮助：

```
 Blog.where(subject_id: subject.id)
      .joins(:blogs_messages => :message)
      .select('blogs.*, COUNT(messages.id) AS message_count')
      .group(:blog_id)
      .order('message_count DESC')
      .limit(3) 
```

此外，在视图中，您可以访问新的虚拟属性`message_count`：

```
 <% @blogs.each do |blog| %>
   <li><%= blog.name %>: <%= blog.message_count %> messages</li>
 <% end %> 
```

# java - 打印一个从 0 开始的数字输入

> ID：14440770
> 
> 赞同：1
> 
> 时间：2013-01-21T14:29:04.000
> 
> 标签：java, format

```
 Scanner input = new Scanner(System.in);
    System.out.print("\tEnter student no.: \t");
    long studNo = input.nextLong();
    System.out.println(studNo); 
```

如果我输入`0914325`它只会打印`914325`. 我知道是因为数据类型是`long`. 我可以使用`String`数据类型，但如果用户不小心输入了字母怎么办？有什么办法可以打印一个从 0 开始的数字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:30:22.407

不存在以 开头的数字`0`。

数字存储为数字，而不是文本。
由于`004`和`4`是相同的数字，因此它们的存储方式相同。

如果您关心前导零，则应该使用 a `String`，而不是 a `Long`，因为您显然没有将它用作数字。
邮政编码或电话号码也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:36:49.607

正如 SLaks 所说，它总是会切断前导零。`String`因此，如果要保留用户输入的原始格式，则绝对应该将其存储为 a 。检查它是否是有效数字的最佳方法是使用正则表达式。

```
String s = input.getLine();
if(!s.matches("[0-9]+")){
    //prompt for input again
} 
```

基本上这是如何工作的，它将输入的字符串与提供的模式相匹配。

所以我把 [0-9]+ 作为要匹配的字符串，括号表示集合 0-9 中的任何数字。加号表示之前的模式重复了一次或多次。所以这将检查字符串中的每个字符以确保它们在集合 0-9 内。请记住，如果您再次将其转换为数字类型，则前导零将丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:07:32.670

利用

```
scanner.next("[0-9]+"); 
```

这完成了您需要的所有验证，引发了`NoSuchElementException`不匹配。

# c# - 如何显示 WinForm 然后运行 XNA 游戏？

> ID：14440771
> 
> 赞同：3
> 
> 时间：2013-01-21T14:29:06.963
> 
> 标签：c#, xna

> **可能重复：**
> [在 WinForms 中嵌入 XNA](https://stackoverflow.com/questions/6558132/embed-xna-in-winforms)

嘿，请这不是那个帖子的重复。这是因为你无法从它那里得到任何答案，因为它的链接不起作用......有人评论我说他有新的链接，当我看到那个网站时，它不是我需要的......

我正在制作需要登录的游戏，我想在 WinForm 中登录...但是当我运行 winform 然后成功登录后它应该运行游戏。[我在 StackOverflow 上](https://stackoverflow.com/questions/7166440/how-to-run-a-c-sharp-winform-in-an-xna-c-sharp-project)看到了这篇文章，但答案的链接是……已放弃……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T14:37:27.563

XNA 在`Program.cs`. 当客户端通过身份验证时，只需在您的 winforms 中添加代码即可启动 XNA 游戏，如`Program.cs`.

请参阅[http://www.codeproject.com/Questions/303672/XNA-And-Windows-forms](http://www.codeproject.com/Questions/303672/XNA-And-Windows-forms)

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        button1.Text = "Start!";
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Thread theThread = new Thread(StartGame);
        theThread.Start();
    }
    public void StartGame()
    {
        Game1 game = new Game1();
        game.Run();
    }
} 
```

# html - Google App Engine 搜索：搜索结果中的 HTML 字段片段

> ID：14440773
> 
> 赞同：2
> 
> 时间：2013-01-21T14:29:11.027
> 
> 标签：html, google-app-engine

我可以`TextField`在 (experimental) 的搜索结果中返回一个片段字段`Google App Engine Search API`。但是我怎样才能返回一个片段`HtmlField`字段？我试过了，但`HTML`在片段结果中没有删除标签。此外，在片段结果中删除了句子末尾的点。我想呈现像谷歌搜索结果一样的片段结果：没有`HTML`标签，句尾有一个点。是否可以？我应该耐心等待未来的版本吗？那可能需要很长时间。我使用 Python。

**编辑：**现在我将`HTML`内容的副本存储`HTML`在索引文档中删除的标签，这样就解决了`HTML`问题。但是如何在搜索结果的片段字段中显示标点符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:25:01.587

显然，开发服务器上的 Search API 存在一些问题。在生产中，标点符号和片段 HTML 字段按预期显示。另外，我认为查询结果缓存在开发服务器的某个地方。

我猜这些问题与 Search API 仍处于试验阶段有关。

# android - 如何从 SQLite 中的数据源中删除所有评论？

> ID：14440774
> 
> 赞同：0
> 
> 时间：2013-01-21T14:29:11.740
> 
> 标签：android, sql, sqlite

我知道如何按位置删除评论，但是如何从数据源中删除所有评论？

我想在单击按钮时将其删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:31:55.327

要删除表中的所有数据，您需要执行以下操作：

```
DELETE FROM table_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:33:13.407

你应该使用`TRUNCATE`

```
TRUNCATE TABLE comments_table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T07:25:34.117

正确答案是

```
DELETE FROM mytable 
```

**请勿`*`在 DELETE 后**使用- 会导致语法错误！

使用`TRUNCATE mytable`会很诱人，但不幸的**是 SQLite 不支持** `TRUNCATE`.

但是，SQLite 确实为语句提供了[特殊的优化规定。](http://sqlite.org/lang_delete.html)`DELETE FROM`也就是说，如果`WHERE`没有指定 if 子句（就像我们的例子一样），那么 table 中的行占用的所有空间都会很快回收，所以行为类似于 true `TRUNCATE`。

# authentication - 我是否需要为客户端证书设置用户映射才能使客户端证书身份验证按预期工作（在 IIS 中）？

> ID：14440777
> 
> 赞同：1
> 
> 时间：2013-01-21T14:29:18.907
> 
> 标签：authentication, iis, client-certificates

[与我关于以正确方式完成客户端证书身份验证的问题](https://stackoverflow.com/questions/14407666/how-do-i-implement-client-certificate-authentication-the-right-way)相关联，我想知道我是否必须采取步骤将证书链接到用户（活动目录或本地用户）以使客户端证书身份验证按预期工作？

是否有必要禁用所有其他身份验证方案（匿名、Windows）才能进行客户端证书身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:47:28.843

在 IIS 论坛上查看[此问题：](http://forums.iis.net/t/1169534.aspx/1)

> 这就是我想要实现的目标：
> 
> 1.  URL 本身的 SSL 证书 ( [https://example.company.com](https://example.company.com) )。据我了解，此证书与客户端证书没有任何联系。
> 2.  从我的本地 CA 颁发的客户端证书并共享给受信任的客户端。
> 3.  指定允许哪些客户端证书连接到特定 IIS 网站的某种方式。
> 
> 3 看起来……很复杂，至少可以这么说。如果我只是设置了所有内容并连接到我颁发的客户端证书，它就可以工作。CA 和 Web 服务器位于同一个域中（如果重要），我已将 CA 的根证书添加到 Web 服务器上的受信任 CA。**然而，在这个阶段我还没有告诉 Web 服务器接受哪些客户端证书，所以我的第一个猜测是它接受所有客户端证书 [链接到] 它信任的任何 CA。**

另请参阅[此问题](https://stackoverflow.com/questions/325829/certificate-trust-lists-and-iis7)，该问题链接到[该站点](http://viisual.net/configuration/IIS7-CTLs.htm)，该站点已死。

它归结为创建“证书信任列表”，或将证书映射到用户帐户。

[但是，您可以在您的服务中实现自定义证书验证器，此处](http://msdn.microsoft.com/en-us/library/ms733806.aspx)解释了如何执行此操作。

# php - 高效地从 php 发送多个 mysqli 查询

> ID：14440783
> 
> 赞同：1
> 
> 时间：2013-01-21T14:29:43.597
> 
> 标签：php, sql, mysqli

我目前正在尝试为使命召唤 4 创建一个日志解析器。解析器本身位于 php 中，并读取特定服务器的日志文件的每一行，并使用 mysqli 将所有统计信息写入数据库。数据库已经到位，我相当肯定（以我有限的经验）它们组织良好。但是，我不确定应该以何种方式将更新/插入查询发送到数据库，或者更确切地说，哪种方式是最佳的。

我的数据库结构如下

```
-- --------------------------------------------------------

-- 
-- Table structure for table `servers`
-- 

CREATE TABLE IF NOT EXISTS `servers` (
`server_id` tinyint(3) unsigned NOT NULL auto_increment,
`servernr` smallint(1) unsigned NOT NULL default '0',
`name` varchar(30) NOT NULL default '',
`gametype` varchar(8) NOT NULL default '',
PRIMARY KEY (`server_id`),
UNIQUE KEY (`servernr`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

-- 
-- Table structure for table `players`
-- 

CREATE TABLE IF NOT EXISTS `players` (
`player_id` tinyint(3) unsigned NOT NULL auto_increment,
`guid` varchar(8) NOT NULL default '0',
`fixed_name` varchar(30) NOT NULL default '',
`hide` smallint(1) NOT NULL default '0',
PRIMARY KEY (`player_id`),
UNIQUE KEY (`guid`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

-- 
-- Table structure for table `playerstats`
-- 

CREATE TABLE IF NOT EXISTS `playerstats` (
`pid` mediumint(9) unsigned NOT NULL auto_increment,
`guid` varchar(8) NOT NULL default '0',
`servernr` smallint(1) unsigned NOT NULL default '0',
`kills` mediumint(8) unsigned NOT NULL default '0',
`deaths` mediumint(8) unsigned NOT NULL default '0',
# And more stats...
PRIMARY KEY (`pid`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

简而言之，服务器和玩家包含独特的实体，它们组合在玩家统计中（即特定服务器中玩家的统计数据）。除了统计数据之外，他们还被赋予了一个玩家 id (pid) 以供以后的数据库中使用。同样，该数据库包含表武器（唯一武器）和武器统计（服务器中武器的统计数据）、附件和附件统计以及地图和地图统计。一旦我完成了所有这些工作，我想在这些统计数据之间实现更多关系（即，使用 pid 和 wid 在特定服务器中特定武器的玩家统计数据）。

PHP 解析器通过 http 复制每个服务器的日志（有 6 个 atm），然后每 5 分钟读取一次（我对此还不太确定）。可以假设在这个解析过程中，每个表都必须被查询（使用 UPDATE 或 INSERT）至少一次（并且可能更多）。现在，我有很多关于如何发送查询的选项（我知道）：

1：使用常规查询，即

```
 $statdb = new mysqli($sqlserver,$user,$pw, $db);
    foreach( $playerlist as $guid => $data ){
      $query = 'INSERT INTO `playerstats` 
                VALUES (NULL, '$guid', $servernr, $data[0], $data[1])';
      $statdb->query($query);
    } 
```

2：使用多查询

```
 $statdb = new mysqli($sqlserver,$user,$pw, $db);
    foreach( $playerlist as $guid => $data ){
       $query = "INSERT INTO `playerstats` 
                 VALUES (NULL, '$guid', $servernr, $data[0], $data[1]);";
       $totalquery .= $query;
    }
    $statdb->multi_query($totalquery); 
```

3：使用准备好的语句；我还没有真正尝试过这个。这似乎是一个好主意，但我必须为每张桌子准备一个声明（我认为）。这甚至可能吗？如果可以，它会有效吗？

4：正如您从上述代码中可能看到的那样，我最初将每个玩家、武器、地图等的所有统计数据都统计到一个数组中。一旦解析器读取了整个文件，它就会向 mysql 服务器发送一个带有这些累积统计信息的查询。但是，我在其他日志解析器中也看到（更多时候不是），只要解析了日志文件的新行，就会发送查询，例如：

```
 UPDATE playerstats 
    SET kills = kills+1 
    WHERE guid = $guid 
```

这对我来说似乎效率不高，但是我又一次开始使用 php 和 sql，所以我知道什么：>

所以，简而言之；考虑到 logparser 逐行读取每一行，查询数据库的最有效方法是什么？当然，任何其他意见或建议总是受欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:21:25.630

.5\. 使用 mysql 对以下查询的支持创建*单个*多插入查询

```
INSERT INTO table (fields) VALUES(data),VALUES(data)... 
```

它似乎是最有效的，包括准备好的语句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:06:58.953

对我来说最有效的方法是每隔 5 分钟左右扫描一次服务器，然后将统计信息列表扫描到一个数组中（例如，在 5 分钟内有 38 个人在服务器上，所以你有一个数组38 个 ID，每个 ID 都有这 38 个 ID 的累积统计变化，需要在服务器中更新）。运行一个查询以检查用户是否在 stats 中具有现有 ID，然后再运行 2 个查询，一个用于创建新用户（多查询插入），一个用于更新用户（单个查询与 CASE 更新）。这将您限制为每 5 分钟 3 个查询。

# landscape - 横向固定布局 epub 3 从 indesign 文件开始一次只能查看 1 页

> ID：14440784
> 
> 赞同：1
> 
> 时间：2013-01-21T14:29:44.530
> 
> 标签：landscape, epub, adobe-indesign

我正在创建一个仅横向模式的 indesign cs6 epub3 固定布局，一次只能查看一页。我添加了元

```
<meta property="rendition:layout">pre-paginated</meta>
<meta property="rendition:orientation">landscape</meta>
<meta property="rendition:spread">none</meta> 
```

我还指定了css和每个xhtml文件的宽度和高度

```
<meta name="viewport" content="width=1024, height=768" /> 
```

我希望文档仅显示为一个横向页面，而不是两面书。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:10:30.267

确保`package`.opf 文件中的元素包含`version="3.0"`和`prefix="rendition: http://www.idpf.org/vocab/rendition/#`。

例如

```
<package xmlns="http://www.idpf.org/2007/opf" unique-identifier="bookid" version="3.0" prefix="rendition: http://www.idpf.org/vocab/rendition/# ibooks:http://vocabulary.itunes.apple.com/rdf/ibooks/vocabulary-extensions-1.0/"> 
```

有关更多信息，请参阅 Liz Castro 关于固定布局的博客文章。 [http://www.pigsgourdsandwikis.com/2012/05/readium-displays-fixed-layout-epub-on.html](http://www.pigsgourdsandwikis.com/2012/05/readium-displays-fixed-layout-epub-on.html)

# c++ - std::map 的这种可移动类型有什么问题？

> ID：14440787
> 
> 赞同：8
> 
> 时间：2013-01-21T14:30:00.467
> 
> 标签：c++, c++11

我想将可移动但不可复制的类型作为值放入`std::map`. 下面是一些简单的代码来测试原理。

```
#include <map>

struct Foo
{
    Foo ();

    Foo (const Foo &) = delete;
    Foo & operator = (const Foo &) = delete;

    Foo (Foo &&) {}
    Foo & operator = (Foo &&) {return *this;}
};

int main ()
{
    std :: map <int, Foo> m;

    m .insert (std :: make_pair (123, Foo ()));
} 
```

我用`g++ test.cpp --std=c++0x`（Ubuntu 12.04 上的 gcc 版本 4.5.1）编译它。有一个很大的丑陋错误，如下所示。问题是什么？

```
In file included from /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/bits/stl_algobase.h:66:0,
                 from /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/bits/stl_tree.h:62,
                 from /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/map:60,
                 from test.cpp:1: test.cpp: In copy constructor ‘std::pair<const int, Foo>::pair(const std::pair<const int, Foo>&)’: /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/bits/stl_pair.h:72:5: instantiated from ‘std::_Rb_tree_node<_Val>::_Rb_tree_node(_Args&& ...) [with _Args = {const std::pair<const int, Foo>&}, _Val = std::pair<const int, Foo>]’ /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/ext/new_allocator.h:111:4: instantiated from ‘void __gnu_cxx::new_allocator<_Tp>::construct(_Tp*,
_Args&& ...) [with _Args = {const std::pair<const int, Foo>&}, _Tp = std::_Rb_tree_node<std::pair<const int, Foo> >, _Tp* = std::_Rb_tree_node<std::pair<const int, Foo> >*]’ /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/bits/stl_tree.h:394:8: instantiated from ‘std::_Rb_tree_node<_Val>* std::_Rb_tree<_Key, _Val,
_KeyOfValue, _Compare, _Alloc>::_M_create_node(_Args&& ...) [with _Args = {const std::pair<const int, Foo>&}, _Key = int, _Val = std::pair<const int, Foo>, _KeyOfValue = std::_Select1st<std::pair<const int, Foo> >, _Compare = std::less<int>, _Alloc = std::allocator<std::pair<const int, Foo> >, std::_Rb_tree_node<_Val>* = std::_Rb_tree_node<std::pair<const int, Foo> >*]’ /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/bits/stl_tree.h:899:42:   instantiated from ‘std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare,
_Alloc>::iterator std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_(const std::_Rb_tree_node_base*, const std::_Rb_tree_node_base*, const _Val&) [with _Key = int, _Val = std::pair<const int, Foo>, _KeyOfValue = std::_Select1st<std::pair<const int, Foo> >, _Compare = std::less<int>, _Alloc = std::allocator<std::pair<const int, Foo> >, std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::iterator = std::_Rb_tree_iterator<std::pair<const int, Foo> >, const std::_Rb_tree_node_base* = const std::_Rb_tree_node_base*]’ /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/bits/stl_tree.h:1191:65: instantiated from ‘std::pair<std::_Rb_tree_iterator<_Val>, bool> std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare,
_Alloc>::_M_insert_unique(const _Val&) [with _Key = int, _Val = std::pair<const int, Foo>, _KeyOfValue = std::_Select1st<std::pair<const int, Foo> >, _Compare = std::less<int>, _Alloc = std::allocator<std::pair<const int, Foo> >]’ /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/bits/stl_map.h:501:41: instantiated from ‘std::pair<typename std::map<_Key, _Tp, _Compare,
_Alloc>::_Rep_type::iterator, bool> std::map<_Key, _Tp, _Compare, _Alloc>::insert(const std::map<_Key, _Tp, _Compare, _Alloc>::value_type&) [with _Key = int, _Tp = Foo, _Compare = std::less<int>, _Alloc = std::allocator<std::pair<const int, Foo> >, typename std::map<_Key, _Tp, _Compare, _Alloc>::_Rep_type::iterator = std::_Rb_tree_iterator<std::pair<const int, Foo> >, std::map<_Key,
_Tp, _Compare, _Alloc>::value_type = std::pair<const int, Foo>]’ test.cpp:20:43:   instantiated from here test.cpp:7:2: error: deleted function ‘Foo::Foo(const Foo&)’ /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/bits/stl_pair.h:72:5: error: used here In file included from /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/map:60:0,
                 from test.cpp:1: /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/bits/stl_tree.h: In constructor ‘std::_Rb_tree_node<_Val>::_Rb_tree_node(_Args&& ...) [with _Args = {const std::pair<const int, Foo>&}, _Val = std::pair<const int, Foo>]’: /usr/local/lib/gcc/i686-pc-linux-gnu/4.5.1/../../../../include/c++/4.5.1/bits/stl_tree.h:136:49: note: synthesized method ‘std::pair<const int, Foo>::pair(const std::pair<const int, Foo>&)’ first required here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-02T11:42:58.723

我正在添加一些细节以供将来参考：Quux 指出的这个错误是在 gcc 4.5.1中[由](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=44487).`std::pair`

截至今天，该问题已得到修复，您应该升级编译器版本或使用其他版本的标准库来解决问题。

[你的代码工作得很好](http://ideone.com/V98uEl)

# asp.net - visual studio 2010 / resharper 6 代码布局

> ID：14440793
> 
> 赞同：0
> 
> 时间：2013-01-21T14:30:27.297
> 
> 标签：asp.net, formatting, resharper

有谁知道在 2010 IDE 中是否有办法直接或使用 Resharper 之类的方法以下列方式重新格式化 asp.net 代码。

如果我有一个这样写的控件：

```
<asp:TextBox ID="txtAddress1" runat="server" CssClass="somethingHere" /> 
```

它不会对它做任何事情。但是，如果我有更长的时间是这样的：

```
<asp:RequiredFieldValidator ValidationGroup="grpSample" Display="None" ID="RequiredFieldValidator1" runat="server" ControlToValidate="txtfirstName" ErrorMessage="Missing!"></asp:RequiredFieldValidator> 
```

它会像这样格式化它：

```
<asp:RequiredFieldValidator 
    ValidationGroup="grpSample" 
    Display="None" 
    ID="RequiredFieldValidator1"                                        
    runat="server" 
    ControlToValidate="txtfirstName" 
    ErrorMessage="Missing!"
>
</asp:RequiredFieldValidator> 
```

每个属性都在一个新行上？因此，如果控件达到一定长度，它会像上面那样重新格式化？

我已经搜索了很长时间，但看不到这样做的方法，但对于中继器、网格视图等控件，我发现第二种布局更容易阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:49:21.633

如果您使用 c# 或 VB.net，您将在 Menu Resharper => option => Code Editing => c#=> Line Breaks and Wrapping => Right margin (colmns) 中找到这将是页面中的列数，更改它到你想要的长度。

如果您使用 VB：代码编辑 => VB.Net =>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:49:34.453

看起来这是不可能的。本来不错的......

# iphone - 当我从应用程序呼叫时 gps 停止（拨打电话挂断时自动停止 gps）

> ID：14440795
> 
> 赞同：0
> 
> 时间：2013-01-21T14:30:31.460
> 
> 标签：iphone, ios5, ios6, ios4

我已经启动 gps 并使用 openurl (tel) 拨打电话，但是当通话挂断时，它会自动停止 gps。

实际上，我希望打开 gps，直到我重新打开应用程序并通过我的停用按钮停止 gps。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T09:59:30.363

嗨试试这个，

```
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.distanceFilter = 1.0f;
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
[locationManager startUpdatingLocation];
[locationManager startMonitoringSignificantLocationChanges]; 
```

我希望这能帮到您。

# php - PHPUnit，致命错误：找不到类 'mysqli'

> ID：14440802
> 
> 赞同：3
> 
> 时间：2013-01-21T14:30:52.703
> 
> 标签：php, mysqli, phpunit

[我有一个与此处](https://stackoverflow.com/questions/10191869/with-phpunit-class-mysqli-is-not-found)描述的问题类似的问题：

一切都如我所料；无论我是从命令行界面还是从 Web 浏览器运行，我的代码都会访问数据库并打印输出。结果相同。如果我在 Eclipse 中使用 PHPUnit 运行它，我会收到一个错误：

```
Multiple annotations found at this line:
    - Fatal error: Class 'mysqli' not found
    - Occurrence of 'connection' 
```

指向以下行：

此代码打印出“是”。

```
$connection = new \mysqli(HOST, USER, PASS, DATABASE);

if (extension_loaded('mysqli')) {
    echo "Yes";
}
else {
    echo "No";
} 
```

还要指出的一件事是，我在上述代码所在的类中使用了自己的命名空间。我的单元测试在全局命名空间中。

我已经按照上面 URL 中的步骤进行操作，但是，唉，无济于事。:(

在命令提示符下运行它没有错误：

```
php -r "new mysqli();" 
```

请有人帮我理解这里的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:40:59.317

我不确定您是否`php.ini`使用正确的路径（DLL 或共享对象 (.so) 文件）配置了文件。如果您使用的是 Unix/Linux，请尝试在命令行上运行，

```
$> php -i | grep mysqli 
```

看看它是否说正在安装某些东西，或者创建一个 PHP 脚本

`<?php phpinfo(); ?>`

运行该脚本并检查它是否正确加载。如果您确信它确实已安装，请尝试通过检查 php.ini 的“扩展”部分来检查您的 php.ini 文件是否正确加载。

在运行 PHPUnit 时还要检查它是否在命令行中，因为在 Web 模式下运行时，php.ini 与 php.ini 的路径可能不同。

# c# - 布局与 Metro XAML 应用程序中的不同显示尺寸/方向兼容？

> ID：14440807
> 
> 赞同：0
> 
> 时间：2013-01-21T14:31:10.773
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml, windows-store-apps

使用 XAML/C# 在 Metro/Winstore 应用程序中支持不同显示尺寸/模式/方向的原则是什么？有指导方针吗？

目前我希望能够显示一个列表视图，其中包含 2 个纵向模式和 5 个横向模式的图块。**我希望这些 2/5 的图块在模式更改时自动填充屏幕宽度。**

**我应该将 tile 模板的宽度绑定到一个属性并手动计算它，还是 .NET 4.5 中有更优雅的工具？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:22:40.960

最直接的解决方案是使用使用基类并为每个( )提供可视状态的`BasicPage`模板。然后定义两个设计并使用视觉状态在设计之间切换。您可以处理事件来更新尺寸以使图块恰好是屏幕大小的一部分，但这会适得其反，并且实际上可能不是最佳设计，因为用户可能不会立即看到内容是可滚动的，您还需要调整字体、图像等的大小以适应新的大小。如果您真的想将内容尺寸映射到屏幕尺寸，您也可以将它们放入控件中。`LayoutAwarePage``ApplicationViewState``FullScreenLandscape, Filled, Snapped, FullScreenPortrait``Window.Current.SizeChanged``Viewbox`

# java - Java : EXCEPTION_ACCESS_VIOLATION

> ID：14440808
> 
> 赞同：0
> 
> 时间：2013-01-21T14:31:11.100
> 
> 标签：java, swing

> **可能重复：**
> [EXCEPTION_ACCESS_VIOLATION 崩溃的可能原因是什么？](https://stackoverflow.com/questions/4640202/what-is-the-possible-reason-for-an-exception-access-violation-crash)

这是我下面的程序，我知道我可以运行其他程序，但不能运行这个程序，你能告诉我吗？

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000063c8d840, pid=6000, tid=3304
#
# JRE version: 7.0_04-b22
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.0-b21 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# V  [jvm.dll+0xfd840]
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# D:\hs_err_pid6000.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# 
```

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableModel;
public class Preethi {
    protected void initUI() {
        final DefaultTableModel model = new DefaultTableModel(new String[] {
                "Id", "Name", "Desg" }, 0);
        final JTable table = new JTable(model);
        // table.setFillsViewportHeight(true);
        JFrame frame = new JFrame(Preethi.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JScrollPane scrollpane = new JScrollPane(table);
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
        Vector vec = new Vector();
        vec.add("1122");
        vec.add("Iraneee");
        vec.add("Dev");
        model.insertRow(0, vec);
        model.setValueAt("1111", 0, 0);
        //model.setValueAt(new Object[]{"1111","Pavan","Developer"}, 0, 0);

    }

    public static void main(String[] args) throws ClassNotFoundException,
            InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Preethi().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:33:40.487

升级到适用于您的平台的最新 Java 版本（当前为 Java 7 更新 11），然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:47:40.503

看来您正在运行 MS Windows，因为我当时已经看到或遇到过。这是您可能遇到的问题的链接。

[http://java.com/en/download/help/exception_access.xml](http://java.com/en/download/help/exception_access.xml)

尝试更新您的 JVM 或尝试在 Linux/Unix 机器中运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:34:43.200

你的代码在我的机器上运行良好。我有 Java 6

![在此处输入图像描述](../Images/56e4713aa180278f882ce50deb4361e1.png)

# javascript - 用于不同进程使用的多个 xmlhttprequest 的良好模式

> ID：14440809
> 
> 赞同：2
> 
> 时间：2013-01-21T14:31:17.200
> 
> 标签：javascript, asynchronous, xmlhttprequest, mediator

我想知道当您可以有多个 xmlhttprequests 时使用什么是一个好的模式，这些请求是不同进程的一部分，例如（检查登录、获取工具提示和显示、显示子记录/打开详细信息）。

到目前为止，您对我的代码的输入非常受欢迎，因此还有一些关于异步处理流程的好文章可供参考。

到目前为止，这是我尝试使用调解器并尝试定义要由调解器触发并由工作人员为某个进程启动的事件序列

```
var mediator={
    events:[],
// bind functions to events, optionally once only if this function doesn't
// need to handle the event during the lifetime of the application
    addListener:function(name,processor,onceOnly){
        if(!mediator.events[name]){
            mediator.events[name]=new Array({
                processor:processor,
                once: onceOnly ? true : false
                });
            return;
        }
        mediator.events[name].push({
                processor:processor,
                once: onceOnly ? true : false
                });
    },
    trigger:function(name,data){
        var i=0;//check if mediator[name] exist
        for(i=0;i<mediator.events[name].length;i++){
            try{
                mediator.events[name][i].processor(data);
// problem is when a use once handler is the 3rd in the chain and the
// second handler fails then the 3rd is never removed
// could trigger an error here that has a cleaner listner
            }finally{
                if(mediator.events[name][i].once){
                    mediator.remove(name,mediator.events[name][i]);
                }
            }
        }
    },
// removing listener from event
    remove:function(name,event){
        for(var i=0;i<mediator.events[name].length;i++){
            if(mediator.events[name][i]==event){
                mediator.events[name].splice(i,1);
                return;
            }
        }
    },
// used to provide an event chain through data that will execute a certain
// process
    triggerNext:function(data){
        // some checks on data
        mediator.trigger(data.events[data.index++],data);
    }
}
// possible response parsers
var parser=function(type){
    var parseLogin=function(data){
        console.log(data);
// should call triggerNext here for the worker to be notified.
    }
    if(type=="loginParser"){
        return parseLogin;
    }
}
// connects and triggers next
var connector=function(){
    this.response="";
    this.commObject=null;
    this.connect=function(data){
        $.get(data.url, function(res) {
            data.commObject=this;//maybe you'd like to inpect it
            data.response=res;
            mediator.triggerNext(data);
        });//trigger fail event if failed
    };
}
// example of initiating a process
$("document").ready(function(){
//add all listeners that are used during the entire execution 
// of the application here
    var p=parser("loginParser");
    mediator.addListener("checkLogin",p);
//the following is a temporary listener, this code would be in
// a worker object initLogin function.
    var c=new connector();
    mediator.addListener("connect",c.connect,true);
// the data determines what process will be invoked
// this could be in a worker.initLogin function
    var data={
        processType:"SendLoginAndCheck",
        url:"test.html",
        post:"",//could check in the connector.connect to see if post is set
        events:["connect","checkLogin"],
//there is no worker.afterLogin but the 3rd event could be finishprocess
//and a worker object's function can be called to process that
        index:0
    }
//start the process
    mediator.triggerNext(data);
}); 
```

# java - 如何决定是使用单例还是带静态方法的类？

> ID：14440810
> 
> 赞同：0
> 
> 时间：2013-01-21T14:31:17.870
> 
> 标签：java, singleton

我有一种情况，我需要从 LDAP 读取一些详细信息，比如所有用户的列表。这应该只发生一次。稍后我会将此列表用于其他一些操作，例如向特定实例的活动用户集发送一些警报。此方法将从多个线程中调用并用于各种目的。我需要确保只有一个请求被发送到 LDAP。

我使用了一个单例类来实现这一点，在创建对象期间，我将从 LDAP 获取详细信息。通过使用此对象，我将找到该应用程序的活动用户列表。

在这种情况下：

1.  我真的需要创建一个单例类吗？
2.  我可以通过在 LDAP 读取方法中添加检查以确保在请求之前列表为空，从而使用具有所有静态方法的类来实现此目的吗？它将如何与多个线程一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:38:47.210

我对它的看法是使用单例允许您对其可能依赖于彼此和/或外部数据的变量执行初始化。

例如，如果您使用静态变量，则无法轻松地将文件中的数据预加载到这些项目中（或者您在另一个对象中执行此操作，如果您需要更新它，这会使调试变得更加困难）。

我敢肯定有很多更聪明的人有更好的观点，但我总是选择单例而不是静态变量。我仅将静态用于定义我可能会在构建时更改并保存单例引用。

同样关于线程，使用单例允许您在必要时放入互斥锁，以便您知道可以安全地修改数据。如果使用静力学，你可能一开始就不需要这种能力，你可能会发现你以后需要它，并且变得更难重新适应。

它主要是一种编码风格，希望这有助于您做出选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:03:51.673

由于我还没有权限对 Theodoros Chatzigiannakis 的回答发表评论，这是我的回答/评论。正如他所说，通过使用单例或静态变量，您正在引入难以构建测试的全局状态，并且可能隐藏代码中的依赖关系。来自有经验的人：[谷歌技术谈话视频](http://www.youtube.com/watch?v=-FRm3VPhseI)

创建类的一个实例并调用 LDAP 一次，而不是 Singleton。“一次”的限制可以在类中被监控，并在错误调用时抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:40:02.307

无论您决定实现单例模式还是静态类，注意事项都几乎相同。在这两种情况下，您都必须确保正确处理数据竞争（可能使用锁或任何适合用例的机制）——这在两种情况下都是可能的，但如果您使用单例，我会说 Java 对您有利. 这两种方法之间最本质的区别是初始化它们的变量的时间以及您对该初始化的控制（单例在这里获胜）。

话虽如此，在这两种情况下，您都将在程序中插入全局状态。您可能已经听过很多次了，但值得重复一遍：拥有全局状态并不是一个好主意，尤其是在多线程应用程序中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T14:41:36.793

在静态变量上使用单例几乎总是更好的做法。单例是真正的面向对象方法，它允许您实现一些接口，并派生该类。

如果对你很重要，你的代码应该是线程安全的，你正在做什么（单例或静态变量）。

# sql - 将 SQL 函数返回的表“分解”成列

> ID：14440818
> 
> 赞同：1
> 
> 时间：2013-01-21T14:31:47.073
> 
> 标签：sql, postgresql

我有一个函数`symbol_scan(integer)`，它返回一个包含三列的表：`schema, table, count`.

我可以像这样对其执行选择查询：

```
> SELECT name, symbol_scan(id), FROM symbols;
       name       |        symbol_scan
------------------+--------------------------
 MY_FIRST_SYMBOL  | (public,random,1)
 MY_SECOND_SYMBOL | (public,another_table,1)
 UNIVERSAL        | (public,international,5) 
```

是否可以使用另一个查询来提取列名`symbol_scan(id)`，使表看起来像这样？

```
 name       | schema |     table     | count
------------------+--------+---------------+-------
 MY_FIRST_SYMBOL  | public | random        |   1
 MY_SECOND_SYMBOL | public | another_table |   1
 UNIVERSAL        | public | international |   5 
```

有没有办法做到这一点？

注意：如果我运行，`SELECT * FROM symbol_scan(1)`我当然会得到三列，但我不知道如何将名称放在那里，除了把它放在函数本身中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:08:34.923

你可以使用这个简单的语法在 Postgres 上做你想做的事：

```
SELECT name, (symbol_scan(id)).* 
FROM symbols 
```

# php - 使用 mysql 创建过期日期

> ID：14440819
> 
> 赞同：1
> 
> 时间：2013-01-21T14:31:47.400
> 
> 标签：php, mysql

我正在使用 mysql 和 php 创建一个用户注册系统，并在用户表中添加了一个名为“date_expires”（DATE NOT NULL）的列，以使注册用户的注册日期到期。使用我的表格，用户可以选择他们的注册期限。例如：1 年、2 年、3 年。等。当用户提交表单时，我得到了注册期的值..像这样

```
$registrationPeriod = $_POST['registration_period]; 
```

我的问题是如何将具有上述值的过期日期插入到我的用户表中？

我正在尝试将数据插入用户表，但混淆了我如何使用 'date_expires' 列。

到目前为止，这是我的代码...

```
$q = "INSERT INTO users (username, email, pass, first_name, last_name, date_expires) 
      VALUES ('$u', '$e', '$p, '$fn', '$ln', ????????????? )"; 
```

希望有人帮我解决这个问题..谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:35:50.510

你可以通过两种方式做到这一点。

## PHP

使用[`strtotime("+2 years")`](http://php.net/manual/en/function.strtotime.php)：

```
$expireYears = 2;
$expireDate = strtotime("+" . $expireYears . " years"); 
```

* * *

## MySQL

使用[`DATE_ADD(NOW(), INTERVAL 2 YEAR)`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)：

```
$expireYears = 2;
$q = "INSERT INTO users (username, email, pass, first_name, last_name, date_expires) 
      VALUES ('$u', '$e', '$p, '$fn', '$ln', DATE_ADD(NOW(), INTERVAL $expireYears YEAR))"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:35:57.137

如果您`$_POST['registration_period']`以`1 year, 2 year`...的形式出现，那么您可以最轻松地去除整数值并在 MySQL 中执行日期计算，例如数字`NOW() + INTERVAL n YEAR`在哪里`n`。

```
// Extract it from the registration_period
// Since it is formatted as "n years" with a space between,
// we can split the string on the space.  list() assigns an array (returned from explode())
// to individual variables. Since we only actually need one of them (the number), 
// we can throw away the second (which is the string "years") by just giving list() one variable
// It still needs a placeholder for the second though, hence the extra comma.
list($years,) = explode(" ", $_POST['registration_period']);
// Make sure it is an int to protect against SQL injection...
$years = intval($years); 
```

在您的查询中，将数字替换为`VALUES ()`列表中的日期计算：

```
INSERT INTO users (.......) VALUES (....., (NOW() + INTERVAL $years YEAR)); 
```

请考虑切换到支持预处理语句的 API，如 MySQLi 或 PDO。我们只能希望并假设您的所有查询输入变量都已正确清理并过滤了查询当前形式的 SQL 注入。

```
$u = mysql_real_escape_string($_POST['u']);
$e = mysql_real_escape_string($_POST['e']);
// etc for all query vars... 
```

（[更多信息`list()`](http://us3.php.net/manual/en/function.list.php)

# macos - 如何从finder启动shell脚本

> ID：14440820
> 
> 赞同：0
> 
> 时间：2013-01-21T14:31:52.627
> 
> 标签：macos, shell, terminal, launching

我有一些 shell (Bash) 脚本可以处理目录中的一些视频文件。而不是每次启动（打开）终端窗口，然后输入脚本名称，我宁愿在 Finder 的资源管理器工具栏中安装一个图标，以便只需单击它即可完成工作（就像[OpenTerminal](http://downloadsquad.switched.com/2008/01/25/open-terminal-access-mac-terminal-from-finder)一样，如果你知道那个工具）。我想象的结果是这个：

*   点击图标

*   出现一个终端窗口，它会自动执行一种

    ```
    cd /the/path/where/I/was/in/the/finder/window; run_my_script.sh 
    ```

知道该怎么做吗？（这是可行的，因为 OpenTerminal 做到了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:52:27.427

在 AppleScript 编辑器中将这样的内容保存为应用程序：

```
activate application "SystemUIServer" -- http://www.openradar.me/9406282
tell application "Finder"
    activate
    set p to POSIX path of (insertion location as text)
end tell
tell application "Terminal"
    activate
    do script
    repeat while contents of window 1 starts with linefeed
        delay 0.01 -- wait to get a prompt
    end repeat
    do script "cd " & quoted form of p in window 1
    do script "uptime" in window 1
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:17:25.570

添加到脚本顶部，

```
 #!/bin/bash
  cd /the/path/where/I/was/in/the/finder/window  
  ....
  .... 
```

之后在终端上运行以下命令

`ln -s run_my_script.sh /bin/run_my_script.sh`

# soap - 如何使用 csoap 客户端填充soap请求中的soapaction字段

> ID：14440823
> 
> 赞同：0
> 
> 时间：2013-01-21T14:31:55.740
> 
> 标签：soap, soap-client

我正在尝试向两个soap服务器发送soap请求，从第一台服务器我能够接收响应，但从第二台服务器我收到HTTP错误500（内部服务器错误）。我进行了 TCP 转储并分析了错误，即 [ISS.0088.9166] Binder not found for soapAction = ，我发现在请求中缺少 soapAction 虽然它在 WSDL 中提到。

我已经使用 csoap 开发了肥皂客户端。我找不到任何解释填充soapAction字段的示例代码。

感谢您对此的评论。

谢谢，啊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:10:07.177

我在 csoap 文档中找到了对 soapAction 字段的 API 支持。

herror_t soap_client_invoke(struct SoapCtx * ctx, struct SoapCtx ** response, const char * url, const char * **soap_action** )

谢谢，啊

# mysql - 使用父 ID 和子 ID 加入

> ID：14440824
> 
> 赞同：1
> 
> 时间：2013-01-21T14:31:56.540
> 
> 标签：mysql, sql, select, join

想象一下，你有一个这样的表：

```
+-------------+------------------+------+-----+---------+----------------+
| Field       | Type             | Null | Key | Default | Extra          |
+-------------+------------------+------+-----+---------+----------------+
| id          | int(11)          | NO   | PRI | NULL    | auto_increment |
| name        | varchar(255)     | NO   |     |         |                |
| parent_id   | int(11)          | YES  | MUL | NULL    |                |
+-------------+------------------+------+-----+---------+----------------+ 
```

让我们称这个表`locations`

这代表一个城市或一个州。

例如，如果`name`field 是`Los Angeles`，它的 parent_id 将表示带有`name`字段的行`California`。

现在想象你有另一个这样的表：

```
+-----------------+---------------+------+-----+---------+----------------+
| Field           | Type          | Null | Key | Default | Extra          |
+-----------------+---------------+------+-----+---------+----------------+
| id              | int(11)       | NO   | PRI | NULL    | auto_increment |
| name            | varchar(450)  | YES  |     | NULL    |                |
| state           | varchar(135)  | YES  |     | NULL    |                |
+-----------------+---------------+------+-----+---------+----------------+ 
```

我们称这张桌子为`cities`。

每行代表一个城市，`id`字段与表`id`中的匹配`locations`。

在此表中，该`state`字段始终为空，因此我想使用表中的`name`字段对其进行更新`locations`。

我已经尝试过此查询以获取该`state`值，但它似乎不起作用（需要很长时间并且没有任何反应）：

```
SELECT name FROM locations WHERE id IN 
(SELECT parent_gid FROM locations INNER JOIN cities  
ON locations.id = cities.id); 
```

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:21:06.037

给你：我不知道如何在 sql fiddle 上保存和链接它 - 但这是代码：

```
创建表位置 (
   定位整数，
   本地名称 varchar(25),
   局部变量 varchar(25));

创建表 cityb (
  citybid int,
  城市名称 varchar(25),
  citybstate varchar(25));

插入 loca (locaid, locaname, locaparent)
  值（1，'name1'，'parent1'）；
插入 loca (locaid, locaname, locaparent)
  值（2，'name2'，'parent2'）；
插入 loca (locaid, locaname, locaparent)
  值（3，'name3'，'parent3'）；
插入cityb（citybid、citybname、citybstate）
  值（1，'city1'，''）；
插入cityb（citybid、citybname、citybstate）
  值（2，'city2'，''）；
插入cityb（citybid、citybname、citybstate）
  值（3，'city3'，''）；

更新地点，城市b
    设置 citybstate = locaparent
      其中 locaid = citybid;
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:35:29.010

如果只需要`SELECT`声明，请使用`JOIN`

```
SELECT  a.id, a.name, b.name As State
FROM    cities a
        INNER JOIN locations b
            ON a.id = b.id 
```

但如果你想更新表格，

```
UPDATE  cities a
        INNER JOIN locations b
            On a.ID = b.ID
SET     a.State = b.name 
```

**更新**

```
SELECT  a.id, a.name, c.name As State
FROM    cities a
        INNER JOIN locations b
            ON a.id = b.id
        LEFT JOIN locations c
            On b.parent_ID = c.id 
```

# c# - 用于在构建期间将 C 枚举和常量脚本化为 C# 的工具

> ID：14440826
> 
> 赞同：2
> 
> 时间：2013-01-21T14:32:00.037
> 
> 标签：c#, c

我有一个自动生成的 .c 文件，其中包含我需要从 .Net 访问的 const 和 enum。我想运行一个预构建脚本，它将 .c 文件（使用 C 语法）转换为 .cs 文件（使用 C# 语法）。这些文件非常简单，因此应该可以编写脚本来解决这个问题。

这是 .c 文件的一部分

```
#define Bitfile "Test.bit"

static const char* const BitfileSignature = "A6A316954DA417A2F886F3B0035019B1";

typedef enum
{
   ControlBool_TestBool_Address = 0x815E,
   ControlBool_IrqHandshakeWriteToDma_Address = 0x8112,
   ControlBool_WriteToDma_Address = 0x810E,
   ControlBool_stop_Address = 0x813A,
} ControlBool; 
```

我想把它转换成这样的东西

```
public static class MyConstants
{
    public static string Bitfile = "Test.bit";
    public static string BitfileSignature = "A6A316954DA417A2F886F3B0035019B1";
}

public enum MyEnum
{
    ControlBool_TestBool_Address = 0x815E,
    ControlBool_IrqHandshakeWriteToDma_Address = 0x8112,
    ControlBool_WriteToDma_Address = 0x810E,
    ControlBool_stop_Address = 0x813A,
} 
```

有谁知道我可以用于此转换的好工具？最好是VS2010自带的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:38:22.583

您可以尝试[T4 文本模板](http://msdn.microsoft.com/en-us/library/bb126445.aspx)从中生成代码文件。它很好地集成到了 Visual Studio 中，一旦你掌握了它，它就是一个相当容易使用且功能强大的文本模板引擎。当然，您需要定义 2 个单独的模板（一个用于 C#，一个用于 C）。

[编辑]：看来我没有阅读整个问题。OP 问题是从 C 转换为 C#。在这种情况下，我仍然坚持使用 T4 的建议，但要阅读 C 源代码，您需要编写一些自定义解析代码。考虑到它只涉及枚举类型定义，解析代码应该相当简单。另一方面，如果 C defs 已经从某个外部定义生成（例如某处的 xml 文件），那么您可以将其视为数据源

# javascript - 选项卡视图不起作用

> ID：14440828
> 
> 赞同：0
> 
> 时间：2013-01-21T14:32:09.367
> 
> 标签：javascript, html, css

我想创建一个带有选项卡式视图的简单构建菜单。昨天晚上我改变了一些东西后，它不再起作用了。选项卡之间的切换被破坏，所有选项卡的内容将显示在第一个选项卡

片段：

```
 <div id="builder">
    <div id="wrapper">
  <div id="tabContainer">
    <div class="tabs">
      <ul>
        <li id="tabHeader_1">Page 1</li>
        <li id="tabHeader_2">Page 2</li>
        <li id="tabHeader_3">Page 3</li>
      </ul>
    </div>
    <div class="tabscontent">
      <div class="tabpage" id="tabpage_1">
        <h2>Page 1</h2>
        <p>Pellentesque habitant morbi tristique senectus...</p>
      </div>
      <div class="tabpage" id="tabpage_2">
        <h2>Page 2</h2>
        <p>Pellentesque habitant morbi tristique senectus...</p>
      </div>
      <div class="tabpage" id="tabpage_3">
        <h2>Page 3</h2>
        <p>Pellentesque habitant morbi tristique senectus...</p>
      </div>
    </div>
  </div>
</div> 
```

[示例代码](http://jsfiddle.net/Xx28B/)

[资源](http://www.my-html-codes.com/javascript-tabs-html-5-css3)

[我的测试站点](http://kappss.funpic.de/world/index2.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:52:56.237

此行`var pages = container.querySelectorAll(".tabpage");`返回一个长度为 0 的集合。

但是，如果将其更改为`var pages = document.querySelectorAll(".tabpage");`，则可以正常工作。

原因是您`.tabpage`不是您的孩子`container`（即`#tabContainer`）。*仔细*查看您的 HTML （来自您的小提琴）：

```
<div id="tabContainer">  <!-- this is what you set at "container" in JS -->
    <div class="tabs">
        <ul>
            <li id="tabHeader_1">Military</li>
            <li id="tabHeader_2">Supply</li>
            <li id="tabHeader_3">Research</li>
        </ul>
    </div>  <!-- .tabs -->
</div> <!-- #tabContainer -->
<div class="tabscontent">
    <div class="tabpage" id="tabpage_1"> <!-- this is NOT a child of #tabContainer --> 
```

这个[小提琴](http://jsfiddle.net/Xx28B/6/)似乎正在工作。

# windows-phone-7 - 关于 ScheduledAgent 和 PeriodicTasks 的说明

> ID：14440832
> 
> 赞同：1
> 
> 时间：2013-01-21T14:32:18.220
> 
> 标签：windows-phone-7, scheduled-tasks, windows-phone

我正在调试我的 PeriodicTask 实现，我只是想知道一些事情：

*   PeriodicTask 应该多久在设备上运行一次？我读到它应该每 30 分钟运行一次，但它似乎没有这样做。

*   PeriodicTask 是否也应该在模拟器中每 30 分钟运行一次？

澄清; 这适用于 WP 7.1 和发布版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:38:53.950

该任务将每 30 分钟（+/- 10 分钟）运行一次，但会遇到许多问题，其中包括：剩余电量；自上次启动以来的时间；如果处于节电模式；上次运行应用程序的时间；仅适用于 WP8 - 远程更新固定图块时；可能还有更多。

实际上，我已经学会接受不能保证他们的执行并且您对此无能为力，因此不要依赖按可预测的时间表运行的事件。

为了帮助测试，在 Debug 中，您可以调用[LaunchForTest](http://msdn.microsoft.com/en-us/library/microsoft.phone.scheduler.scheduledactionservice.launchfortest%28VS.92%29.aspx)来触发代理更频繁地触发。

# 3d - 纹理坐标生成

> ID：14440839
> 
> 赞同：1
> 
> 时间：2013-01-21T14:32:42.380
> 
> 标签：3d, coordinates, texture-mapping

所以，我想我开始掌握这个 3d 的东西了，我现在已经到了需要做一些纹理映射的地步。我的问题是如何创建/获取我的纹理坐标。我对 [u,v] 坐标有所了解，但现在的问题是，“我如何制作它们”？查看我的 .obj 文件，我发现它们有 vt 坐标，我不完全确定它们是如何产生的，但我怎样才能根据自己的喜好操纵它们？

我需要以编程方式进行映射，因为纹理将在整个程序中发生变化。我目前正在使用 MayaVI，但我觉得使用这些东西有点普遍。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:17:18.363

纹理坐标通常不生成，而是手动分配。这发生在您使用 GUI 选择的 3D 建模应用程序中（而不是通过将它们写入 3D 文件）。导出网格时，UV 坐标与其余的网格数据一起导出。

几何的自动纹理映射很复杂。这并不像将所有三角形展平那么简单。毕竟，您想在展开的面上绘制纹理，因此拥有更大的连接面块（而不是数千个单独的三角形）是必不可少的。您还想避免接缝/隐藏接缝。有各种工具在某些方面可能做得不错，但我个人更喜欢使用高质量的 3D 建模软件手动打开包装。更多的控制，更好的结果（以一些设计时间为代价）。

对于简单的网格（四边形、立方体、2D 网格地形），您可以在 OBJ 文件或算法中手动完成。

## 可以自动完成什么？

*   对于几乎任何类型的网格，可以使用简单的算法从三角形数据和位置生成法线。（有不同的结果）
*   切线可以从三角形数据、法线和纹理坐标中计算出来。（结果很好）
*   双切线（就像切线一样）

纹理坐标的基本变换（移动、旋转和缩放）也可以在顶点着色器中轻松完成。

# asp.net-mvc - Mvc 4 EF Code First - 关于如何持久存储列表的问题

> ID：14440841
> 
> 赞同：0
> 
> 时间：2013-01-21T14:32:48.787
> 
> 标签：asp.net-mvc, database, entity-framework, ef-code-first

**背景：**最后一年的项目 - 使用 Mvc 4 创建 Web 应用程序。

**场景：**在我的应用程序中，用户应该能够选择多个首选项并对每个首选项应用优先权重。然后，这些首选项应存储在列表中，稍后用于其他与问题无关的任务。

以下是首选项的定义方式，首选项的实例成为首选项，以及我认为应该如何存储它们：

偏好选项：

```
public enum Weighting { One, Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten }

public class PreferenceOption<T>
{
    public T PreferenceOptionSelected { get; set; }
    public Weighting Weighting { get; set; }
} 
```

偏好选项：

```
public class PreferenceOptions
{
    PreferenceOption<bool> WantsHouse = new PreferenceOption<bool>() { PreferenceOptionSelected = false, Weighting = Weighting.One };
    // ... could be up to 15/20 options

} 
```

用户偏好：

```
public class UserPreferences
{
    public List<PreferenceOptions> UserPreferences { get; set; }
} 
```

所以我希望模型`UserPreferences`能够持久地存储用户选择的所有偏好。假设如果有十个偏好，每个偏好是否会是`UserPreferences`表中的一行，并且对于该用户的每一行，一列`UserID`（比如 1）将是 1？

```
UserID | WantsHouse | OtherOption | OtherOption |
--------------------------------------------------
1      |  ???       | ???         | ??? 
```

既然`WantsHouse`有一个 bool 和一个 emum 值，这两者是如何存储的？

列表是存储这些的最佳方式吗？首先使用代码似乎是正确的方法 - 但列表不能连续存储 - 对吗？

最后，上面描述的其他模型（`PreferenceOption`和`PreferenceOptions`）是否需要持续存在？它们仅存在于内存中就足够了吗？它们的目的只是为了方便用户选择值，然后将其存储在`UserPreferences`.

感谢所有帮助和反馈。

# facebook - 在 Facebook 页面选项卡中进行身份验证后，redirect_uri 的值是多少？

> ID：14440844
> 
> 赞同：1
> 
> 时间：2013-01-21T14:32:58.117
> 
> 标签：facebook, oauth, facebook-apps

我正在尝试设置一个简单的 facebook 页面选项卡应用程序。我已经达到了从 facebook 图获得 access_token 作为响应的状态，并且似乎是正确的。我的问题是，在身份验证后，我被重定向到我的 facebook 页面选项卡 url，但在 facebook 域*之外*，而不是在用户选择的页面选项卡中。

我的申请信息：

```
 Display Name:MyContest
    Namespace:mygoodcontest
    Contact Email:myemail@something.com
    App Domains: [ empty ]

    Page Tab Name: Contest!
    Page Tab URL:http://[mystaticip]:8080/facebookContest/app/index.do
    Secure Page Tab URL:https://[mystaticip]:8443/facebookContest/app/index.do
    Page Tab Edit URL:https://[mystaticip]:8443/facebookContest/app/admin/ 
```

该线程似乎与我的问题完全相关，并且似乎得到了无关紧要的回答。 [身份验证后重定向到 Facebook 页面选项卡](https://stackoverflow.com/questions/11973734/redirect-to-facebook-page-tab-after-authentication)

这个线程与我遇到的问题大致相同，但是在画布应用程序上。不在 Facebook 页面选项卡应用程序 [上 Facebook 画布应用程序“redirect_uri”在授权和身份验证后中断 iframe](https://stackoverflow.com/questions/7605265/facebook-canvas-app-redirect-uri-breaks-out-of-iframe-after-authorization-au)

我所追求的是在成功授权后将经过身份验证的用户重定向到 facebook 页面选项卡内。

谢谢大家的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:40:58.517

验证用户时，您可以`redirect_uri`使用要重定向用户的 URL 传递参数。您可以尝试在那里输入标签的网址。如果这不起作用（可能是因为您会收到错误消息说 uri 不属于您的应用程序），您可以简单地从 Facebook 外部的页面重定向到您的选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:13:08.523

如果有人和我处于相同的位置，这就是我在@darvex 的帮助下设法做到的。问题是 facebook 肯定需要 redirect_url 参数。此外，redirect_url 参数必须与编辑页面选项中的页面选项卡 url 相同。所以我的理解是，facebook 将所有用户重定向到 facebook 之外（在这种情况下，“facebook 之外”是指你的服务器，你的页面）然后，你必须处理这个 http GET，正如@darvex 所说，将请求重定向到你的 facebook 页面带有 javascript 命令的选项卡。

当您重定向到您的 facebook 页面选项卡（例如 www.facebook.com/mypage/app_12345678 ）时，魔法就会发生，因为有人请求了您的页面选项卡，所以请求到达您的句柄。但是，这一次 facebook 已经注册了这个特定用户已经对应用程序进行了身份验证，因此，当时正在处理的 http POST 有一个 signed_request 参数，如果你破解/解码（base64），你会在访问令牌中找到你需要的。那时，您有一个登录用户正在查看您的页面选项卡 - 在 facebook 内 - 和一个访问令牌来做你的伎俩。

我不知道这是否是最佳做法，但似乎有效。如果有人有更好的方法，请随时发布。

谢谢你们

# ms-access - 如何在 Access 2007 中创建一个类似电子表格的订单表格，其中将列出我的所有产品

> ID：14440845
> 
> 赞同：1
> 
> 时间：2013-01-21T14:32:58.240
> 
> 标签：ms-access, vba, ms-access-2007

如何在 Access 2007 中创建一个看起来相似的电子表格订单表格。我希望从我的产品表中列出我的所有产品，假设在第一列中，并在第二列中有一个数量字段。用户将输入每种产品所需的数量。完成后，需要将数据与所需的所有产品和数量一起保存在 Orderdetails 表中。它还应该为此订单保存一个 OrderID。我有一个包含以下字段的主表单：OrderId、OrderDate、OrderRequired、ShopName、Notes。

在我的子表单中，我希望电子表格看起来像表单，客户可以在其中选择所需的产品并将其保存到 OrderID 引用的 Orderdetails 表中。我不希望用户一次选择一种产品，而是希望能够看到所有产品以及每个产品的数量。

请帮助我找到正确的方向 Sassoon

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:35:49.713

我不确定我是否正确理解了您的问题，但这听起来很像标准的多对多结构化表格，它将与产品、用户和数量相关联。

您可以通过创建保存的查询来选择字段和记录，并将其显示在用户直接访问的表单上。
如果您不希望这样，请使用文本框和按钮并自己执行插入/更新...

编辑：我相信您可能正在寻找的是一个名为“查找向导”的功能。
创建多对多结构化表时，请通过此向导为“产品”表创建外键。该向导允许用户在选择时在下拉列表中查看链接的产品。
在同一张表中，还为 Trays、packets 和 ProductNotes 创建其他字段（需要时为外键）。

另一种方法是通过使用产品表中的数据填充组合框来提供产品列表。

```
sSQL_Select = "SELECT * FROM T_PRODUCTS" 

Me.lstListBox.RowSource = "" 
Me.lstListBox.RowSource = sSQL_Select 
```

您可以对 Trays、packets 和 productnotes 执行相同的操作，并通过创建自定义 SQL 字符串来上传数据。
如果您不希望用户弄乱它们，可以在表单中显示只读子表单表。

# mono - 单声道链接器错误链接 Hello World 中的框架程序集

> ID：14440847
> 
> 赞同：0
> 
> 时间：2013-01-21T14:33:04.920
> 
> 标签：mono, mono.cecil

*[我遇到了与[Mono-dev] monolinker 在“hello, world”上失败](http://lists.ximian.com/pipermail/mono-devel-list/2011-May/037580.html)*中描述的相同的问题——有什么想法吗？.

```
C:\monotest>type test.cs
public class Test
{
    public static void Main() {
        System.Console.WriteLine("BOO");
    }
}

C:\monotest>"C:\Program Files (x86)\Mono-2.10.9\bin\monolinker.bat" -a "test.exe" -c link
Fatal error in Mono CIL Linker
System.ArgumentException: Member 'System.Security.AccessControl.AccessRule' is declared in another module and needs to be imported
at Mono.Cecil.MetadataBuilder.LookupToken (IMetadataTokenProvider provider) [0x00000] in <filename unknown>:0
at Mono.Cecil.SignatureWriter.MakeTypeDefOrRefCodedRID (Mono.Cecil.TypeReference type) [0x00000] in <filename unknown>:0
at Mono.Cecil.SignatureWriter.WriteTypeSignature (Mono.Cecil.TypeReference type) [0x00000] in <filename unknown>:0
at Mono.Cecil.SignatureWriter.WriteGenericInstanceSignature (IGenericInstance instance) [0x00000] in <filename unknown>:0
at Mono.Cecil.SignatureWriter.WriteTypeSignature (Mono.Cecil.TypeReference type) [0x00000] in <filename unknown>:0
at Mono.Cecil.MetadataBuilder.GetFieldSignature (Mono.Cecil.FieldReference field) [0x00000] in <filename unknown>:0
at Mono.Cecil.MetadataBuilder.AddField (Mono.Cecil.FieldDefinition field) [0x00000] in <filename unknown>:0
at Mono.Cecil.MetadataBuilder.AddFields (Mono.Cecil.TypeDefinition type) [0x00000] in <filename unknown>:0
at Mono.Cecil.MetadataBuilder.AddType (Mono.Cecil.TypeDefinition type) [0x00000] in <filename unknown>:0
at Mono.Cecil.MetadataBuilder.AddTypeDefs () [0x00000] in <filename unknown>:0
at Mono.Cecil.MetadataBuilder.BuildTypes () [0x00000] in <filename unknown>:0
at Mono.Cecil.MetadataBuilder.BuildModule () [0x00000] in <filename unknown>:0
at Mono.Cecil.MetadataBuilder.BuildMetadata () [0x00000] in <filename unknown>:0
at Mono.Cecil.ModuleWriter.<BuildMetadata>m__18 (Mono.Cecil.MetadataBuilder builder, Mono.Cecil.MetadataReader _) [0x00000] in <filename unknown>:0
at Mono.Cecil.ModuleDefinition.Read[MetadataBuilder,MetadataBuilder] (Mono.Cecil.MetadataBuilder item, System.Func`3 read) [0x00000] in <filename unknown>:0
at Mono.Cecil.ModuleWriter.BuildMetadata (Mono.Cecil.ModuleDefinition module, Mono.Cecil.MetadataBuilder metadata) [0x00000] in <filename unknown>:0
at Mono.Cecil.ModuleWriter.WriteModuleTo (Mono.Cecil.ModuleDefinition module, System.IO.Stream stream, Mono.Cecil.WriterParameters parameters) [0x00000] in <filename unknown>:0
at Mono.Cecil.ModuleDefinition.Write (System.IO.Stream stream, Mono.Cecil.WriterParameters parameters) [0x00000] in <filename unknown>:0
at Mono.Cecil.ModuleDefinition.Write (System.String fileName, Mono.Cecil.WriterParameters parameters) [0x00000] in <filename unknown>:0
at Mono.Cecil.AssemblyDefinition.Write (System.String fileName, Mono.Cecil.WriterParameters parameters) [0x00000] in <filename unknown>:0
at Mono.Linker.Steps.OutputStep.OutputAssembly (Mono.Cecil.AssemblyDefinition assembly) [0x00000] in <filename unknown>:0
at Mono.Linker.Steps.OutputStep.ProcessAssembly (Mono.Cecil.AssemblyDefinition assembly) [0x00000] in <filename unknown>:0
at Mono.Linker.Steps.BaseStep.Process (Mono.Linker.LinkContext context) [0x00000] in <filename unknown>:0
at Mono.Linker.Pipeline.Process (Mono.Linker.LinkContext context) [0x00000] in <filename unknown>:0
at Mono.Linker.Driver.Run () [0x00000] in <filename unknown>:0
at Mono.Linker.Driver.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

我没有在 Linux 下测试过，但是引用的例子做了。在 2.10.8 和 2.10.9 下也会发生同样的情况。

我发现一个开源项目已经注释掉了对“throw CreateForeignMemberException (member);”的调用。在 Cecil 中，这是导致此问题的原因：*[Simple Assembly Explorer, svn/trunk/Mono.Cecil/Mono.Cecil/AssemblyWriter.cs](https://code.google.com/p/simple-assembly-explorer/source/browse/trunk/Mono.Cecil/Mono.Cecil/AssemblyWriter.cs?spec=svn459&r=459)*。

[GitHub 上](http://en.wikipedia.org/wiki/GitHub)Cecil 的主干仍然有该代码处于活动状态。我厌倦了删除我一开始不理解的支票。

在堆栈溢出问题*[中，是否有一个免费工具能够从 CLI 程序集中修剪未使用的代码？](https://stackoverflow.com/questions/9772873)*，Mono链接器的作者建议自己编译：

> 请注意，所有发布的 Mono 版本都带有链接器的编译版本，但我建议您自己编译它。

为什么我需要自己编译？我该怎么做才能让它工作？在这一点上，我真的只是在探索它的用途，但它似乎很有希望。

# qt - 关闭/中止 QProgressDialog 的问题

> ID：14440854
> 
> 赞同：0
> 
> 时间：2013-01-21T14:33:30.143
> 
> 标签：qt, qtconcurrent

我现在正在将 GUI 添加到为控制台操作而编写的项目中。我选择了 Qt 作为框架，现在在处理 QProgressDialog 的关闭事件时遇到了困难。

问题 1：我使用 QtConcurrent::run 为一个长/繁重的任务分叉一个进程，并使用一个“等待”QProgressDialog（范围为 0,0）来提示用户长时间运行的进程。问题是我不能让对话框自行关闭！

```
void MainWindow::doLongRunProcess() {
  pDialog = new QProgressDialog("Loading 2 ...", "Abort", 0, 0, this);
  pDialog->setWindowModality(Qt::WindowModal);
  pDialog->show();
  QFuture<void> future = QtConcurrent::run(theApp, &SimApplication::runSimulation);
  QFutureWatcher<void> watcher;
  connect(&watcher,
        SIGNAL(finished()),
        this,
        SLOT(endLongRunProcess()));
  watcher.setFuture(future);
  // at this point, the runSimulation is successfully invoked
}

void MainWindow::endLongRunProcess()
{
  // no sign of being invoked!
  if (pDialog)
  {
      pDialog->close();
      delete pDialog;
  }
  logMessage("Operation completed");
} 
```

要求1：如果可能，不要触摸/更改原包装的代码。

问题 2：如何链接“中止”按钮来终止 SimApplication::runSimulation()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:21:02.837

创建对话框后尝试调用`setAttribute(Qt::WA_DeleteOnClose, true)`对话框并附`finished()`加到对话框的`close()`插槽而不是您的插槽。对话框会在适当的时候自行删除，就像`QObject::deleteLater()`这样。

# javascript - 将弹出对话框中的值动态添加到父页面

> ID：14440855
> 
> 赞同：0
> 
> 时间：2013-01-21T14:33:31.100
> 
> 标签：javascript, jquery, dom, select, dynamic

好吧，我知道我需要做什么......我只是不知道怎么写。基本上，我有一个带有类别表的父页面（比如说颜色、数字、字母）。这些类别是表格之父。儿子分别是red、blue、56、72、abc、def等。我弹出了一个带有下拉菜单的 nyroModal 对话框，用于向该表添加新行。我成功地添加了新行，在单击我的保存按钮时将正确的下拉值添加到父表中，但不在正确的“父亲”下。他们只是添加到表格的末尾。弹出窗口中的下拉菜单之一包含父类别的选项（select name="chooseFather"），这是我无法弄清楚如何传递的唯一值。

```
<select name="chooseFather">
<option value="Colors" id="father3">Colors</option>
<option value="Numbers" id="father4">Numbers</option>
<option value="Letters" id="father5">Letters</option>
</select> 
```

每个父下拉值都有一个单独的 id，与父行的 id 匹配。我需要一个动态版本的东西`$(“#parentId”).children().add(your new children)`来捕获选择的下拉值，并将正确的子值放在表的相应部分。这是我的保存按钮的代码，它将我的值传输到父表/页面。

```
("img.save").click(function () {            

            for(var j=0;j<document.getElementsByName("shoreInfo").length;j++) {
                parent.updateParent1(document.getElementsByName("select1").item(j).value + '&nbsp;' +
                                     document.getElementsByName("text1").item(j).value + '&nbsp; - ' +
                                     document.getElementsByName("select2").item(j).value,
                                     document.getElementsByName("chooseFather").item(j).value);

            }
            parent.$.nmTop().close();
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:56:04.360

如果您要对 html 进行如下模块化：

```
<div class="widget_group">    
    <h3>Colors</h3>
    <table id="Colors"></table>
</div>

<div class="widget_group">    
    <h3>Numbers</h3>
    <table id="Numbers"></table>
</div> 
```

然后，您可以使用第一个选择的值来定位所需的表 ID。

另请注意，将 ID 添加到要访问的重要元素可以简化代码

```
<select  value="3" id="chooseFather"> 
```

使用 jQuery 添加行：

```
$("img.save").click(function () {
    if( !validateSelections()){
        alert('select one of each');
        return;
    }

    /* note that ID attribute was added to each "select"*/
   var tableID= $('#chooseFather').val();
    var newRow='<tr><td>'+$('#select1').val()+'</td><td>'+$('#select2').val()+'</td></tr>';

    $('#'+ tableID).append( newRow)

});

function validateSelections(){
    return $('#chooseFather').val() && $('#select1').val() && $('#select2').val();
} 
```

演示：http: [//jsfiddle.net/xXeGx/1/](http://jsfiddle.net/xXeGx/1/)

也不推荐使用字体标签，而是使用添加到元素和 css 的类

# javascript - 如何将字符串表达式更改为结果整数？

> ID：14440862
> 
> 赞同：0
> 
> 时间：2013-01-21T14:34:01.420
> 
> 标签：javascript

> **可能重复：**
> [如何执行存储为字符串的 Javascript？](https://stackoverflow.com/questions/939326/how-can-i-execute-javascript-stored-as-a-string)

让我们假设：

```
var a = 10;
var b = 20;
var exp = "a+b";
var result = ?; 
```

将上面的字符串表达式更改为整数。变量 a 是 10。变量 b 是 20。变量 exp 是包含表达式的字符串。更改该字符串表达式以添加变量 a 和变量 b 并将其存储在变量结果中。

我怎么能用 Javascript 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:34:01.420

通过使用 Javascript`eval()`函数，您可以执行上述操作。

像：

```
var a = 10;
var b = 20;
var exp = "a+b";
var result = eval(exp); 
```

# java - 从源代码获取项目，无需配置构建路径

> ID：14440867
> 
> 赞同：0
> 
> 时间：2013-01-21T14:34:17.723
> 
> 标签：java, android, eclipse

我有一个引用几个库的 android 项目。它使用 android/java 的标准 .gitignore 存储在 git 中。

当另一个开发人员获得该项目时，他们似乎必须为库设置构建路径。有没有办法设置它，以便他们可以获取源代码，在 eclipse 中打开然后去而不是乱搞？

# php - 随机化和限制主页 magento 上的类别拇指

> ID：14440874
> 
> 赞同：0
> 
> 时间：2013-01-21T14:34:32.127
> 
> 标签：php, magento, random, thumbnails, categories

以下代码仅显示“类别 12”中所有子类别的类别缩略图，我正在寻找一种方法将此数量限制为 6 个类别，并使其成为这些类别的随机选择。

```
 <ul class="brand_list">
        <?php $media = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA); ?>
        <?php $children = Mage::getModel('catalog/category')->getCategories(12);   ?>
        <?php foreach ($children as $category): ?>
            <?php $category = Mage::getModel('catalog/category')->load($category->getId()); ?>
            <li class="span3">
                <a href="<?php echo $category->getUrl(); ?>">
                    <img alt="<?php echo $category->getName(); ?>" src="<?php echo $media; ?>/catalog/category/<?php echo $category->getThumbnail(); ?>" />
                </a>
            </li>
        <?php endforeach; ?>
    </ul> 
```

我之前使用以下两段代码对产品使用过类似的代码：

```
<?php $collection->getSelect()->order('rand()'); ?>

<?php $_columnCount = $this->getColumnCount(); ?>
<?php $i=0; foreach ($collection->getItems() as $category): if($i==6){break;}?>
<?php if ($i++%$_columnCount==0): ?> 
<?php endif ?> 
```

我已经尝试重新编码以适应类别拇指，但我似乎没有任何快乐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:06:11.453

您的问题的解决方案如下。我不会使用 mysql rand() 函数，因为它很慢。

```
<ul class="brand_list">
  <?php 
    $media = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA);
    $parentCategory = Mage::getModel('catalog/category')->load(12);
    $children = Mage::getModel('catalog/category')
                  ->getCollection()
                  ->addIdFilter( array_rand( array_flip( $parentCategory->getAllChildren( true ) ), 6) )
                  ->addAttributeToSelect('name')
                  ->addAttributeToSelect('thumbnail');
  ?>
  <?php foreach ($children as $category): ?>
    <li class="span3">
      <a href="<?php echo $category->getUrl(); ?>">
        <img alt="<?php echo $category->getName(); ?>" src="<?php echo $media; ?>catalog/category/<?php echo $category->getThumbnail(); ?>" />
      </a>
    </li>
  <?php endforeach; ?>
</ul> 
```

# c# - 正则表达式 - 用 c# 替换文本时删除文本

> ID：14440881
> 
> 赞同：0
> 
> 时间：2013-01-21T14:35:10.287
> 
> 标签：c#, regex

我正在尝试通过使用它来编辑我拥有的一些脚本来学习正则表达式。

我的脚本包含这样

```
<person name="John">Will be out of town</person><person name="Julie">Will be in town.</person> 
```

我需要替换脚本中的名称值 - 名称的添加始终相同，但我可能有不想更新的名称。

我所拥有的快速示例：

```
string[] names = new string[1];
names[0] = "John-Example";
names[1] = "Paul-Example";

string ToFix = "<person name=\"John\">Will be out of town</person><person name=\"Julie\">Will be in town.</person>"

for (int i=0; i<names.Length; i++)
{
    string Name = names[i];
    ToFix = Regex.Replace(ToFix, "(<.*name=\")(" + Name.Replace("-Example", "") + ".*)(\".*>)", "$1" + Name + "$3", RegexOptions.IgnoreCase);
} 
```

这在大多数情况下都有效，但我有两个问题。有时它会删除太多，如果我在字符串中有多个人，它将删除第一个人和最后一个人之间的所有内容，如下所示：

```
Hello <person name="John">This is John</person><person name="Paul">This is Paul</person> 
```

变成

```
Hello <person name="John-Example">This is Paul</person> 
```

另外，我想删除 name 值后面和结束 carrat 之前的任何额外文本，以便：

```
<person name="John" hello> 
```

应更正为：

```
<person name="John-Example"> 
```

我已经阅读了几篇关于正则表达式的文章，觉得我只是在这里遗漏了一些小东西。我将如何以及为什么要解决这个问题？

编辑：我不认为我正在使用的这些脚本归类为 XML - 整个脚本可能有也可能没有 <> 标签。回到这个问题的最初目标，有人可以解释正则表达式的行为吗？以及如何在结束标记之前的名称值之后删除额外的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:38:33.143

你的正则表达式太贪心了。尝试`.*?`而不是仅仅`.*`

另外，请不要使用正则表达式来解析 XML。

[这是一个如何使用XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)执行我认为您想要的操作的示例：

```
var xdoc = XDocument.Parse(ToFix);
foreach (var person in xdoc.Elements("person"))
{
    var name = person.Attribute("name");
    if (person.LastAttribute != name)
    {
        person.RemoveAttributes();
        person.SetAttributeValue(name.Name, name.Value + "-Example");
    }
}
var output = xdoc.ToString(); 
```

# ios - ActionScript3.0 - 如何在坐标处获取像素的颜色（uint）？（Stage3D、Flare3D）

> ID：14440884
> 
> 赞同：1
> 
> 时间：2013-01-21T14:35:21.433
> 
> 标签：ios, actionscript-3, colors, pixel, stage3d

问题在标题中：

[ActionScript3.0] 如何获取坐标像素的颜色（uint）？（Stage3D、Flare3D）

我正在使用 Flare3D 库在 iPad2 上渲染 3D 场景。每次重绘屏幕时，我都需要在 768 个不同的坐标处获取颜色值。以前，在简单的舞台 (2D) 上，我只能在转换为指定坐标的 1x1 位图上绘制它，现在它在 stage3D 上不起作用。另外，我有点担心天气会影响性能，因为我真的需要尽可能多地这样做——实际上是每次绘制屏幕时。如果当前显示的屏幕就像某个地方的位图，那就太好了，所以我可以像简单的数组一样访问它……但是，是的，我没有屏住呼吸:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:50:16.593

由于 Stage3D 渲染到后台缓冲区并且无法直接访问它，因此您还需要使用 Context3D.drawToBitmapData() 方法渲染到 BitmapData。渲染到位图非常慢，尤其是在视口很大的情况下。由于您只需要访问这 768 个像素，因此您可以使用 Context3D.setScissorRectangle 来渲染场景 768 次，并将剪刀矩形的大小设置为 1x1 以及所需的坐标。我自己没有测试过，所以我不知道渲染场景 700 次是否不会比渲染一次慢，但您可能想尝试一下。:)

# php - 将 XML 中的 URL 特殊字符传递给 curl

> ID：14440886
> 
> 赞同：1
> 
> 时间：2013-01-21T14:35:24.010
> 
> 标签：php, xml, curl

我有一个带有 url 变量的 XML 文件，其中包含特殊字符，例如 &、= 等

我有两个问题：

A. 由于 XML 中不允许使用特殊字符，我应该如何输入 URL？我应该对 url 进行编码然后放入 XML 文件吗？

B. 假设我对 url 进行编码并将其放入 XML 文件中，然后读入 php 脚本。

```
$fxml = simplexml_load_file("mylist.xml");
$fxml -> getName();

foreach($fxml->children() as $mylist)
    {
        $url = $mylist -> url;
        $url = urldecode(url);
        echo $url;

        $feed = curl_init( $url );
        curl_setopt($feed, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($feed, CURLOPT_HEADER, 0);
        $xml = simplexml_load_string(curl_exec($feed));

        curl_close($feed);
        //---------------------
        //---------------------
 } 
```

这是示例 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
    <feed>
        <mylist>
            <name>                                                                                                                                                                                    
             SISC                                                                                                                                                                                    
            </name>
            <url>                                                                                                                                                                                     
             http://epubs.siam.org/action/showFeed?ui=0&amp;mi=3chvf9&amp;ai=s0&amp;jc=sjnaam&amp;type=etoc&amp;feed=rss                                                                               
            </url>
        </mylist>
    </feed> 
```

请注意，我已经以编码形式替换了 URL，其中原始 & 被其代码替换。我也尝试不使用 urldecode 但我只能正确地得到 echo $url 。

如果我将 URL 复制粘贴到 curl_init($url) 的单引号下，一切正常。

但是，当我对 url 进行编码并将其放入 XML 并解码回并将其放入 curl_init($url) 时，它不起作用。

当我回显解码后的 $url （见上文）时，我会显示正确的 url 列表。我究竟做错了什么 ？我阅读了密切相关的帖子，但无法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:41:52.967

让我们使用`&`示例。

如果你想要一个`&`URL 的数据（而不是指示一个新的查询字符串键/对的开始）。然后，您需要`%26`在将其添加到 URL 之前对其进行 URL 编码（as）。

如果您想`&`在 XML 文档的数据中使用 a （例如，如果数据是带有查询字符串的 URL），那么您需要对它进行 XML 编码（as `&amp;`）。您应该使用 XML 库（而不是字符串 bashing 或模板）来构建 XML，并且该库会为您处理好它。

在将 XML 用作 URL 之前，您**不必**从`urldecode`XML 中取出数据。

# xml - 如何使用 xslt 将 svg 书面标识插入 xhtml

> ID：14440891
> 
> 赞同：1
> 
> 时间：2013-01-21T14:35:39.117
> 
> 标签：xml, xslt, svg

我正在尝试将一些 xml 文件放在一起，并使用 xslt 转换将它们输出到 xhtml 中。我通过指定一个名为 index.xml 的 xml 文件来解决这个问题，我在其中定义了我需要使用的其他文件，如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="merge.xsl"?>

<dic:dictionary xmlns:dic = "dictionary">
<dic:Logo>Logo</dic:Logo>
<dic:Author>User Name</dic:Author>
<dic:EnglishWords>english</dic:EnglishWords>
<dic:SwedishTranslation>swedish</dic:SwedishTranslation>
<dic:SwedishWords>swedish</dic:SwedishWords><br/>
<dic:EnglishTranslation>english</dic:EnglishTranslation>
</dic:dictionary> 
```

然后在我的转换中，我有一个徽标的模板声明，如下所示：

```
<!--Logo-->
 <xsl:template match = "dic:index//Logo">
 <html>
     <head>
        <link rel="stylesheet" type="text/css" href="Style.css" />
     </head>
     <body>
        <div id = "Logo">
            <xsl:apply-templates select="document(concat(.,'.svg'))"/>
        </div>
    </body>
  <xsl:apply-templates/>
</html></xsl:template> 
```

svg 文件本身如下所示：

```
<?xml version="1.0" standalone="no"?>

<?xml-stylesheet href="Style.css" type="text/css"?>

<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
     width="180px" height="70px" viewBox="0 0 180 70" 
     enable-background="new 0 0 180 70" xml:space="preserve" 
     preserveAspectRatio="xMinYMin meet">

<line fill="none" stroke="#000000" x1="0" y1="71.533" x2="35.036" y2="5.109"/>
<line fill="none" stroke="#000000" x1="91.971" y1="15.767" x2="91.971" y2="71.533"/>
<line fill="none" stroke="#000000" x1="146.357" y1="5.109" x2="177.372" y2="71.533"/>
<line fill="none" stroke="#000000" x1="0" y1="71.533" x2="177.372" y2="71.533"/>
<line fill="none" stroke="#000000" x1="17.518" y1="58.108" x2="82.481" y2="58.108"/>
<line fill="none" stroke="#000000" x1="101.459" y1="58.108" x2="161.866" y2="58.108"/>
<line fill="none" stroke="#000000" x1="82.481" y1="58.108" x2="91.971" y2="71.533"/>
<line fill="none" stroke="#000000" x1="101.459" y1="58.108" x2="91.971" y2="71.533"/>

</svg> 
```

然而，虽然这种方法适用于其他 xml 文件，但不适用于这个 svg 文件，作为输出，我只得到单词 Logo。我一直在四处寻找，但我没有看到一个很好的例子来说明如何做到这一点。此外，当我尝试应用 css 样式表时，我有以下内容

```
#Logo{
width: 300px ;
margin-left: auto ;
margin-right: auto ;
} 
```

它也不起作用......如何使css工作......？

任何有关此的帮助或信息将不胜感激。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:57:23.213

为什么不简单地`<xsl:copy-of select="document(concat(., '.svg'))"/>`代替`apply-templates`? 或者您想以某种方式转换 SVG？并且不清楚 SVG 文档的路径或文件名包含在 XML 输入示例中的什么位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:50:35.557

请试试这个：

```
<!--Logo-->
<xsl:template match = "dic:dictionary/dic:Logo">
 <html>
     <head>
        <link rel="stylesheet" type="text/css" href="Style.css" />
     </head>
     <body>
        <div id = "Logo">
            <xsl:copy-of select="document(concat(.,'.svg'))/*"/>
        </div>
    </body>
 </html>
</xsl:template> 
```

您需要删除`<xsl:apply-templates>`最后的 （这就是复制“徽标”文本的内容），并用于`<xsl:copy-of>`复制 SVG 文件的内容。

# windows-phone-7 - 使用 Expensify Windows Phone 测试框架触发 ApplicationBar 按钮

> ID：14440892
> 
> 赞同：0
> 
> 时间：2013-01-21T14:35:39.193
> 
> 标签：windows-phone-7, specflow, wp7test

我刚刚开始使用 Expensify Windows Phone 测试框架，它似乎非常符合我对 Windows Phone 7.1 自动化测试的要求。我可以让它触发屏幕上的普通按钮，但不能让它触发我的任何一个 ApplicationBar 按钮。

此测试页的 XAML 是...

```
<phone:PhoneApplicationPage x:Class="SampleApp1.MainPage"
                        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
                        xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
                        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                        xmlns:AppBarUtils="clr-namespace:AppBarUtils;assembly=AppBarUtils"
                        FontFamily="{StaticResource PhoneFontFamilyNormal}"
                        FontSize="{StaticResource PhoneFontSizeNormal}"
                        Foreground="{StaticResource PhoneForegroundBrush}"
                        SupportedOrientations="Portrait"
                        Orientation="Portrait"
                        mc:Ignorable="d"
                        d:DesignWidth="480"
                        d:DesignHeight="768"
                        shell:SystemTray.IsVisible="True"
                        DataContext="{Binding Main, Source={StaticResource Locator}}">

<!--LayoutRoot contains the root grid where all other page content is placed-->
<Grid x:Name="LayoutRoot"
      Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel"
                Grid.Row="0"
                Margin="24,24,0,12">
        <TextBlock x:Name="ApplicationTitle"
                   Text="{Binding ApplicationTitle}"
                   Style="{StaticResource PhoneTextNormalStyle}" />
        <TextBlock x:Name="PageTitle"
                   Text="{Binding PageName}"
                   Margin="-3,-8,0,0"
                   Style="{StaticResource PhoneTextTitle2Style}" />
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentGrid"
          Grid.Row="1">
        <StackPanel Margin="24,20,0,123" Orientation="Vertical">
            <TextBlock Text="{Binding Welcome, Mode=OneWay}" 
                       Style="{StaticResource PhoneTextNormalStyle}"
                       HorizontalAlignment="Center" VerticalAlignment="Center"
                       Margin="6,0,19,0" TextWrapping="Wrap" Width="431" />
            <TextBlock Text="Enter first number" 
                       HorizontalAlignment="Left" VerticalAlignment="Top"
                       Margin="6,20,0,0" TextWrapping="Wrap" />
            <TextBox TextChanged="OnTextBoxTextChanged"
                     Text="{Binding EnteredAmount1, Mode=TwoWay, UpdateSourceTrigger=Explicit}"
                     x:Name="txtValue1" 
                     HorizontalAlignment="Left" Height="72" VerticalAlignment="Top" Width="456" 
                     TextWrapping="Wrap" InputScope="Number"/>
            <TextBlock Text="Enter second number" 
                       HorizontalAlignment="Left" VerticalAlignment="Top" 
                       Margin="6,0,0,0" TextWrapping="Wrap" />
            <TextBox TextChanged="OnTextBoxTextChanged"
                     Text="{Binding EnteredAmount2, Mode=TwoWay, UpdateSourceTrigger=Explicit}"
                     x:Name="txtValue2" 
                     HorizontalAlignment="Left" Height="72" VerticalAlignment="Top" Width="456" 
                     TextWrapping="Wrap" InputScope="Number"/>
            <TextBlock Text="Result" 
                       HorizontalAlignment="Left" VerticalAlignment="Top"
                       Margin="6,20,0,0" TextWrapping="Wrap"/>
            <TextBlock Text="{Binding Total, Mode=OneWay}" 
                       HorizontalAlignment="Left" VerticalAlignment="Top" 
                       Margin="15,0,0,0" TextWrapping="Wrap" 
                       Width="422" Height="45"/>
            <Button x:Name="btnAdd" Command="{Binding AddCommand}" Content="Add" Margin="240,0,0,0" />
        </StackPanel>
    </Grid>
</Grid>

<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="False">
        <shell:ApplicationBarIconButton x:Name="AddAppBarBtn" IconUri="/Images/ApplicationBar.Check.png" Text="add"></shell:ApplicationBarIconButton>
        <shell:ApplicationBarIconButton x:Name="SubtractAppBarBtn" IconUri="/Images/ApplicationBar.Cancel.png" Text="subtract"></shell:ApplicationBarIconButton>

    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar>

<i:Interaction.Behaviors>
    <AppBarUtils:AppBarItemCommand Id="add" Command="{Binding AddCommand}"/>
    <AppBarUtils:AppBarItemCommand Id="subtract" Command="{Binding SubtractCommand}"/>
</i:Interaction.Behaviors>

<i:Interaction.Triggers>
    <AppBarUtils:AppBarItemTrigger Type="Button" Id="add" Text="add" />
    <AppBarUtils:AppBarItemTrigger Type="Button" Id="subtract" Text="subtract" />
</i:Interaction.Triggers>

</phone:PhoneApplicationPage> 
```

SpecFlow 功能定义如下...

```
Scenario: AppBar Add Two Numbers
Given my app is uninstalled
And my app is installed
And my app is running within 20 seconds
Then I enter "34" into the control "txtValue1"
Then I enter "23" into the control "txtValue2"
Then I press the control "AddAppBarBtn"

Scenario: Button Add Two Numbers
Given my app is uninstalled
And my app is installed
And my app is running within 20 seconds
Then I enter "34" into the control "txtValue1"
Then I enter "23" into the control "txtValue2"
Then I press the control "btnAdd" 
```

ButtonAddTwoNumbers 方案完全有效。AppBarAddTwoNumbers 填写文本框值但拒绝按下按钮，我得到的错误是“无法设置焦点以控制'AddAppBarBtn'”。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:38:34.147

我认为你的工作水平太高了。就个人而言，我通常不会测试 UI 本身，因为从长远来看，它只会导致需要不断更改的脆弱测试。相反，我通常会归结为 ViewModel。

因此，鉴于您的 txtValue1 绑定到 EnteredAmount1，txtValue2 是 EnteredAmount2 并且 AddAppBarBtn 是 AddCommand，您可以将业务逻辑测试为

```
Scenario: AppBar Add Two Numbers
Given I enter 34 into Amount1
And I enter 23 into Amount2 
When I add them  #Calls AddCommand
Then Total should be 57 
```

这意味着您可以非常轻松地重新设计您的 UI，例如，如果我们想使用滑块而不是文本框，则上述逻辑测试不会发生任何变化。

此外，您仍然可以将 UI 功能作为单独的功能进行测试

```
Scenario: Check startup
Given my app is uninstalled
When my app is installed
Then my app should be running within 20 seconds 
```

如果你真的想要，你仍然可以检查你的绑定

```
 Scenario: Check bindings
 Given I enter 34 into Amount1
 Then control txtValue1 should be 34 
```

通过这种方式，您可以将您的测试分解成更小的应用程序块，并为自己提供更多有针对性的故障，这在跟踪任何问题时非常有用。

# sql - SSIS转换为日期问题

> ID：14440894
> 
> 赞同：0
> 
> 时间：2013-01-21T14:35:43.200
> 
> 标签：sql, ssis

我正在开发一个 ssis 包。

当我在 sql server 中时，有一个包含文本字符串的字段，例如：

2008 年 12 月 13 日

等等...

我想将其转换为 2008-12-13 00:00:00.000 或 2008-12-13 （对我来说相同）

所以，在 sql server 我可以用这个语句来做：

选择转换（日期时间，我的归档，107）

从 ....

问题是，在 SSIS 2008 中与之等效的声明是什么？（带派生列）

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:45:01.133

您是否尝试过简单的类型转换： `(DT_DBDATE) [MyField]` ？

# python - 打开另一个python文件的脚本

> ID：14440895
> 
> 赞同：-2
> 
> 时间：2013-01-21T14:35:43.587
> 
> 标签：python, windows, function, command

我有一个非常大的项目正在使用 python。我需要获取打开另一个 .py 文件的脚本。我曾尝试使用这样的脚本：

> os.system("example.py arg")

如果文件中的脚本很小，比如函数 print 什么的。但是，如果它们很长或其他什么，它们就不起作用！所以我需要一个真正有效的脚本并在命令提示符中打开 .py 文件。非常感谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:40:05.577

使用运行脚本

```
os.system("example.py arg") 
```

需要

*   脚本必须是可执行的（+x 位）
*   必须在脚本开头包含 shebang "#!/usr/bin/python"

另请参阅[我是否应该输入 #! (shebang) 在 Python 脚本中，它应该采用什么形式？](https://stackoverflow.com/questions/6908143/should-i-put-shebang-in-python-scripts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:52:41.073

如果您试图从另一个文件中获取函数，您可以使用[`import`](http://www.tutorialspoint.com/python/python_modules.htm).

```
from example import my_funct # not that 'example' does NOT have '.py' following it
my_funct() # you can now use the function from the file. 
```

或者，您可以只导入整个脚本：

```
import example
example.my_funct() # you have to specify that 'my_funct' is from 'example' 
```

或者，您可以这样做：

```
from example import * # this imports all functions from 'example'
my_funct() # now you can use the function as you normally would 
```

注意：要从模块导入功能，您需要正确设置它。[这就是您向`PYTHONPATH`.](https://stackoverflow.com/questions/13675270/import-error-python-3-2/13675435#13675435)

# php - 裁剪图像无法正常工作，存储了错误的部分

> ID：14440899
> 
> 赞同：1
> 
> 时间：2013-01-21T14:35:52.987
> 
> 标签：php, javascript, jcrop

所以这是包括矩形的原始图片，我想创建一个裁剪的图像 ![在此处输入图像描述](../Images/a4e21a87309e5b948076fe004f361b86.png)

这就是我在种植后得到的 ![在此处输入图像描述](../Images/142f59e8884bcc0d09b291c7c3a196f2.png)

因此可以看出，新图像具有正确的尺寸，但裁剪了错误的部分。这是JS：

```
$(document).ready(function()
    {
        $('#cropimage').Jcrop(
        {
            aspectRatio: 3 / 4,
            maxSize: [150,200],
            onSelect: updateCoords
        });
    });
    function updateCoords(c)
    {
        $('#x').val(c.x);
        $('#y').val(c.y);
        $('#w').val(c.w);
        $('#h').val(c.h);
    }; 
```

这是PHP代码

```
function crop($_POST)
{   
    $clipX      = (int)$_POST['x'];
    $clipY      = (int)$_POST['y'];
    $filename   = (string)$_POST['image'];
    $resizedHeight  = (int)$_POST['h'];
    $resizedWidth   = (int)$_POST['w'];

    // Original image's details
    $original   = dirname(__FILE__) . DIRECTORY_SEPARATOR . 'images/user_pictures/' . DIRECTORY_SEPARATOR . $filename;

    $dimensions     = getimagesize($original);
    $old_width  = $dimensions[0];
    $old_height     = $dimensions[1];

    // image = original_image
    $old_image  = call_user_func('imagecreatefrom' . 'jpeg', $original);

    // Crop image
    if (function_exists('imagecreatetruecolor') && ($new_image = imagecreatetruecolor($resizedWidth, $resizedHeight)))
        imagecopyresampled($new_image, $old_image, 0, 0, $clipX, $clipY, $resizedWidth, $resizedHeight, $old_width, $old_height);

    imagejpeg($new_image,'images/user_pictures/'.$this->getUserID().'_picture.jpg');
} 
```

我以前从未使用过这些 php 函数，但我已经阅读了一些教程，但我没有看到任何错误。但必须至少有 1 ......我做错了什么？无论出于何种原因，原始图像似乎都已调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:42:58.580

如果您想根据 (x,y,w,h) (10,15,30,35) 进行裁剪，那么您的功能将是：

```
imagecopyresampled ( $dst_image , $src_image , 0, 0 , 10 , 15 , 30-10 , 35-15 , 30-10 , 35-15 ) 
```

由于您要将 20x20 从原始图像复制到新图像中，因此这些尺寸是您的新图像和 dst_w、dst_h 以及您的 src_w、src_h。

$old_width 和 $old_height 现在是原始图像的完整宽度，而它们应该是裁剪部分的宽度和高度。

```
$old_width = $resizedWidth;
$old_height = $resizedHeight; 
```

# r - 如何计算r中矩阵列表的平均值

> ID：14440904
> 
> 赞同：1
> 
> 时间：2013-01-21T14:36:09.073
> 
> 标签：r, matrix, mean

我有一个像下面这样的列表，它是一个包含矩阵的列表（所以“ftable”是一个包含十个列表的列表，每个内部列表都包含七个矩阵）。我需要计算也可能具有 NA 值的关联矩阵的平均值。我尝试了几种方法，但出现了错误。

```
for(i in 1:10){
for(j in 1:7){
ftable[[i]][[j]] <- matrix (x,nrow=8,ncol=8, byrow=TRUE)
}
}

> str(ftable)
List of 10
$ :List of 7
.......
....... 
```

因此，我需要一个包含七个矩阵的列表，其中每个矩阵都是将均值应用于 ftable[[1]][[i]]、ftable[[2]][[i]]、.. . , ftable[[10]][[i]] 和 i 在 1:7。

我已经尝试过了，但我得到了错误：

```
meanTable <- list()
for (i in 1:7)
meanTable[[i]] <- matrix (0, nrow=8,ncol=8)

> meanTable <- lapply(1:7, function(i) Reduce(mean, list(ftable[[1]][i],ftable[[2]][i],ftable[[3]][i],ftable[[4]][i],ftable[[5]][i],ftable[[6]][i],ftable[[7]][i],ftable[[8]][i],ftable[[9]][i],ftable[[10]][i])))
Error in mean.default(init, x[[i]]) : 
'trim' must be numeric of length one
In addition: Warning message:
In mean.default(init, x[[i]]) :
argument is not numeric or logical: returning NA 
```

矩阵的一个例子：

```
> ftable[[1]][[1]]
1     2     3      4      5      6      7      8
1 NA 0.924 0.835 -0.336  0.335 -0.948  0.285  0.749
2 NA    NA 0.772 -0.333  0.333 -0.892  0.127  0.715
3 NA    NA    NA -0.476  0.475 -0.756  0.258  0.749
4 NA    NA    NA     NA -0.999  0.399 -0.150 -0.399
5 NA    NA    NA     NA     NA -0.399  0.151  0.399
6 NA    NA    NA     NA     NA     NA -0.134 -0.715
7 NA    NA    NA     NA     NA     NA     NA  0.144
8 NA    NA    NA     NA     NA     NA     NA     NA 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:16:31.443

我认为这是你需要的。最简单的方法是取消列出您的外部列表，然后`Reduce`按如下方式应用：

我将创建输入的变体`user1317221_G`

```
set.seed(45)
mat1 <- matrix(c(sample(10),NA,NA),nrow=2)
matlist1 <- list(mat1,mat1,mat1)
mat2 <- matrix(c(sample(11:20),NA,NA),nrow=2)
matlist2 <- list(mat2,mat2,mat2)
bigmatlist <- list(matlist1,matlist2)

> bigmatlist
# [[1]]
# [[1]][[1]]
#      [,1] [,2] [,3] [,4] [,5] [,6]
# [1,]    7    2   10    1    4   NA
# [2,]    3    9    8    5    6   NA
# 
# [[1]][[2]]
#      [,1] [,2] [,3] [,4] [,5] [,6]
# [1,]    7    2   10    1    4   NA
# [2,]    3    9    8    5    6   NA
# 
# [[1]][[3]]
#      [,1] [,2] [,3] [,4] [,5] [,6]
# [1,]    7    2   10    1    4   NA
# [2,]    3    9    8    5    6   NA
# 
# 
# [[2]]
# [[2]][[1]]
#      [,1] [,2] [,3] [,4] [,5] [,6]
# [1,]   14   13   19   17   15   NA
# [2,]   18   20   16   11   12   NA
# 
# [[2]][[2]]
#      [,1] [,2] [,3] [,4] [,5] [,6]
# [1,]   14   13   19   17   15   NA
# [2,]   18   20   16   11   12   NA
# 
# [[2]][[3]]
#      [,1] [,2] [,3] [,4] [,5] [,6]
# [1,]   14   13   19   17   15   NA
# [2,]   18   20   16   11   12   NA 
```

现在解决方案。

```
# in your case, outer.len = 10 and inner.len = 7
outer.len <- 2
inner.len <- 3
prod.len <- outer.len * inner.len
list.un <- unlist(bigmatlist, recursive = FALSE)
o <- lapply(1:inner.len, function(idx) {
    Reduce('+', list.un[seq(idx, prod.len, by = inner.len)])/outer.len
})

> o
# [[1]]
#      [,1] [,2] [,3] [,4] [,5] [,6]
# [1,] 10.5  7.5 14.5    9  9.5   NA
# [2,] 10.5 14.5 12.0    8  9.0   NA
# 
# [[2]]
#      [,1] [,2] [,3] [,4] [,5] [,6]
# [1,] 10.5  7.5 14.5    9  9.5   NA
# [2,] 10.5 14.5 12.0    8  9.0   NA
# 
# [[3]]
#      [,1] [,2] [,3] [,4] [,5] [,6]
# [1,] 10.5  7.5 14.5    9  9.5   NA
# [2,] 10.5 14.5 12.0    8  9.0   NA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:44:30.590

你的意思是这样的：

```
 mat1 <- matrix(c(1:10,NA,NA),nrow=2)
 matlist1 <- list(mat1,mat1,mat1)
 bigmatlist <- list(matlist1,matlist1)

 mean(mat1, na.rm=TRUE)
 #[1] 5.5

 sapply(matlist1, function(x) mean(x,na.rm=TRUE))
 #[1] 5.5 5.5 5.5 
```

和列表列表：

```
 sapply(bigmatlist,function(x) sapply(x, function(x) mean(x,na.rm=TRUE)) )
#      [,1] [,2]
#[1,]  5.5  5.5
#[2,]  5.5  5.5
#[3,]  5.5  5.5 
```

如果要返回列表，请在适当的地方更改`sapply`for 。`lapply`

列表 1 中矩阵三的平均值在哪里，`[3,][,1]`即`bigmatlist[[1]][[3]]`

# routes - ZF2 子域路由与子域中的变量点

> ID：14440907
> 
> 赞同：1
> 
> 时间：2013-01-21T14:36:28.133
> 
> 标签：routes, subdomain, zend-framework2

我需要为我的 ZF2 应用程序设置一个路径，其中包含一个变量点。

例如，我需要路由子域，例如；

```
john.van.der.berg.domain.tld
nick.van.eisselsain.domain.tld
james.morris.domain.tld 
```

我知道子域中的点总是 1、2 或 3

我现在必须按照我的路线设置，但我不知道如何处理这些点？

```
 'username' => array(
                'type'    => 'hostname',
                'options' => array(
                    'route'    => ':username.domain.localhost',
                    'constraints' => array(
                            'action'  => 'username',
                            'username' => '[a-zA-Z0-9.]{1,3}*',
                    ),
                    'defaults' => array(
                        '__NAMESPACE__' => 'Users\Controller',
                        'controller'    => 'Users',
                        'action'        => 'website',
                    ),
                ),
            ), 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:23:29.447

从 ZF 2.1.3 开始，您显示的代码应该可以正常工作。

# jquery - 如何使用 TypeScript/jQuery 传递元素

> ID：14440908
> 
> 赞同：6
> 
> 时间：2013-01-21T14:36:29.027
> 
> 标签：jquery, typescript

我正在尝试通过 TypeScript/JQuery 计算出 DOM 元素的位置和高度/宽度。在 TypeScript 之前，我只是做了这样的事情：

```
 function ActOnClick(itemClicked, loadPath) {
            //sample code
            var v1 = itemClicked.offset();
            var v2 = itemClicked.width();
            var v3 = itemClicked.height();

        };

        $(document).ready(function () {

            $("#idCRM").click(function () {
                ActOnClick($("#idCRM"), "/Widgets/GetCRM");
            });
} 
```

其中 idCRM 是我的 cshtml 文档中的“部分”（但它可以是任何 div 等）

现在我正在尝试将此代码移动到 TypeScript 中，但是我希望 ActOnClick 函数中的什么类型来自 jQuery 的 $("#idCRM")？现在我选择“元素”，但 a) 它不显示宽度、高度等 b) 由 $("#idCRM")! 引起的 ActOnClick 调用失败！

```
/// <reference path="../../ScriptsTS/jquery.d.ts" />
function ActOnClick(itemClicked: Element, loadPath: string) {

    var v1 = itemClicked.offset();  <-- FAILS
    var v2 = itemClicked.width();   <-- FAILS
    var v3 = itemClicked.height();  <-- FAILS

};

$(document).ready(function () {

    $("#idCRM").click(function () {
        ActOnClick($("#idCRM"), "/Widgets/GetCRM");  <-- FAILS
    });
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T14:38:51.733

如果您需要代码正常工作，您始终可以使用`Any`typescript 类型，例如：

```
function ActOnClick(itemClicked: Any, loadPath: string) {
  var v1 = itemClicked.offset();
  var v2 = itemClicked.width();
  var v3 = itemClicked.height();
}; 
```

Typescript 基本上关闭了一个`Any`变量，它不会发出任何错误或警告。但是，`$("#idCRM")`应该返回一个实现`JQuery`接口的对象，定义在 中`jquery.d.ts`，所以你应该实际使用：

```
function ActOnClick(itemClicked: JQuery, loadPath: string) {
  var v1 = itemClicked.offset();
  var v2 = itemClicked.width();
  var v3 = itemClicked.height();
}; 
```

,和方法是在该接口上定义的，它们`offset()`分别返回,和。`width()``height()``Object``number``number`

# java - java.lang.NoSuchFieldError: IS_SECURITY_ENABLED

> ID：14440909
> 
> 赞同：6
> 
> 时间：2013-01-21T14:36:35.043
> 
> 标签：java, eclipse, jsp, jetty, maven-jetty-plugin

我想将服务部署到 2 台服务器。我在一台服务器上成功，但在另一台服务器上失败。事实上，我尽我所能使他们的环境相同。错误日志如下：

```
2013-01-21 22:08:18.178:WARN:oejuc.AbstractLifeCycle:FAILED jsp: java.lang.NoSuchFieldError: IS_SECURITY_ENABLED
java.lang.NoSuchFieldError: IS_SECURITY_ENABLED
    at org.apache.jasper.compiler.JspRuntimeContext.<init>(JspRuntimeContext.java:197)
    at org.apache.jasper.servlet.JspServlet.init(JspServlet.java:150)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:492)
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:312)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:776)
    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:258)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1213)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:699)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:454)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(StandardStarter.java:36)
    at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:183)
    at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:491)
    at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:138)
    at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(ScanningAppProvider.java:142)
    at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(ScanningAppProvider.java:53)
    at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:604)
    at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:535)
    at org.eclipse.jetty.util.Scanner.scan(Scanner.java:398)
    at org.eclipse.jetty.util.Scanner.doStart(Scanner.java:332)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.deploy.providers.ScanningAppProvider.doStart(ScanningAppProvider.java:118)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.deploy.DeploymentManager.startAppProvider(DeploymentManager.java:552)
    at org.eclipse.jetty.deploy.DeploymentManager.doStart(DeploymentManager.java:227)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.util.component.AggregateLifeCycle.doStart(AggregateLifeCycle.java:58)
    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:53)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:91)
    at org.eclipse.jetty.server.Server.doStart(Server.java:263)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1215)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1138)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.jetty.start.Main.invokeMain(Main.java:457)
    at org.eclipse.jetty.start.Main.start(Main.java:602)
    at org.eclipse.jetty.start.Main.main(Main.java:82) 
```

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T14:42:24.140

> ```
> java.lang.NoSuchFieldError: IS_SECURITY_ENABLED 
> ```

这是 Jasper JSP 编译器内部类之一的一部分。此错误表明您（或 Maven）出于某种原因将 Jasper JSP 编译器 JAR 文件包含在 webapp 的`/WEB-INF/lib`文件夹中，而这些 JAR 文件应该已由目标容器（在您的情况下为 Jetty）提供。

这样，只有当您的 webapp 包含与目标容器版本**完全相同的 Jasper JAR 文件时，它才会起作用。**但是，这毕竟不是正确的做法。那些 Jasper JAR 文件不属于 webapp 的`/WEB-INF/lib`. 它们应该*已经*由目标容器提供。你需要在 webapp 的`/WEB-INF/lib`.

我不是 Maven 英雄，但是，您需要告诉它不要将 Jasper JAR 文件包含`/WEB-INF/lib`在构建的 WAR 的文件夹中。您可以通过将它们的[依赖范围](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)设置为`provided`.

# opengl - GLSL 中 mod 的精度损失

> ID：14440910
> 
> 赞同：0
> 
> 时间：2013-01-21T14:36:37.510
> 
> 标签：opengl, glsl

我在顶点着色器中重复纹理（用于存储，而不是在现场重复）。这是正确的方法吗？我似乎在某些地方失去了精确度。

```
varying vec2 texcoordC;

texcoordC = gl_MultiTexCoord0.xy;
texcoordC *= 10.0;
texcoordC.x = mod(texcoordC.x, 1.0);
texcoordC.y = mod(texcoordC.y, 1.0); 
```

添加：然后我将 texcoord 保存（存储）为颜色，将其打印到纹理中，然后再次使用该纹理。当我从纹理中检索颜色时，我找到了 texcoords 并使用它们在后期处理中应用纹理。我想要这样是有原因的，我不会进入。我知道 texcoords 会受到颜色精度的限制，这没关系，因为我的纹理的宽度和高度为 256。

我知道通常我会将带有 glTexcoord2f 的 texcoords 设置为高于 1.0 以重复（并使用 GL_REPEAT），但我使用的是我懒得编辑的模型加载器，因为我认为这不是必要的/不是最简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:00:09.730

有（至少）两种可能出错的方式：

首先是的，你会失去精度。放大后，您实际上是在取浮点数的小数部分。这基本上会丢弃一些数字。

其次，这可能无论如何都行不通，不适用于大多数典型用途。您正在尝试按顶点平铺纹理，但纹理是跨多边形插值的。所以这种技术可能会在同一个多边形的不同顶点上以不同的方式平铺纹理，从而导致一些混乱。

IE

如果顶点 1 的 U 为 1.5（缩放后），而顶点 2 的 U 为 2.2，那么您希望插值在这些点之间给出递增的值，中间点的 U 为 1.85。

如果你在每个顶点取模，你将分别得到一个 0.5 的 U 和一个 0.2 的 U，导致U*减小*，以及一个 U 为 0.35 的中间点......

只需在纹理/采样器上启用平铺，并使用 0->1 范围之外的坐标，就可以平铺纹理。如果您真的想提高采样精度并进行大量平铺，则需要将 UV 坐标均匀地包裹在整个多边形上，而不是每个顶点。即在您的数据中进行，而不是在顶点着色器中进行。

对于您的情况，您尝试将 UV 坐标输出到缓冲区以供以后使用，您可以在*像素*着色器中钳制/包装 UV。因此，在顶点着色器中将 UV 相乘，在多边形上正确插值，然后仅在写入缓冲区时应用模数。

但是，我仍然认为您会丢失所有子像素信息，因此会遇到精度问题。这是否是您使用的技术的问题，我不知道。

# java - 更新 Swing DefaultComboBoxModel

> ID：14440911
> 
> 赞同：1
> 
> 时间：2013-01-21T14:36:40.003
> 
> 标签：java, eclipse, swing, netbeans

我正在尝试使用那段代码更新名为“mdlCategory”的 DefaultComboBoxModel。

```
private void categoriesUpdate(String categoryName, boolean addElement) {

    if (!categoryName.equals("")) {

        if (addElement) {//that block works propertly
            Category c = new Category(-1);
            c.setName(categoryName);
            mdlCategory.addElement(c);
            selAllergenCategory.setSelectedItem(c);
        } else {//not works!!
            Category cat = (Category) mdlCategories.getSelectedItem();
            cat.setName(categoryName);
            selAllergenCategory.setSelectedItem(cat);
        }
    }
} 
```

当 addElement 为 true 时，以正确的方式将新类别添加到模型中。

我在“else”块中有问题...当尝试更新从 DefaultComboBoxModel 获取它的类别时，模型不会以正确的方式更改，甚至删除并再次添加它，尽管当我将光标传递到组合上时，变化发生但不会持续。

我是否以错误的方式更新模型的类别对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:50:12.600

You should inform Swing about changes in your model. In if-block it makes mdlCategory.addElement(c); . For else-block you should call setElementAt:

```
} else {//not works!!
            Category cat = (Category) mdlCategories.getSelectedItem();
            int idx = mdlCategories.indexOf(cat);
            cat.setName(categoryName);
            mdlCategory.setElementAt(cat, idx);
            selAllergenCategory.setSelectedItem(cat);
} 
```

Probably last line (selAllergenCategory.setSelectedItem(cat);) is not required

# wpf - WPF 功能区 - 选项卡标题区域中的停靠区域

> ID：14440915
> 
> 赞同：1
> 
> 时间：2013-01-21T14:36:52.750
> 
> 标签：wpf, ribbon

可以插入 DockArea 或其他停靠元素，就像它在图片上一样。在 WPF 功能区中。

![在此处输入图像描述](../Images/96793acc40d63058c690da2f3c2cb095.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:26:54.770

您可以使用功能区[HelpPaneContentTemplate](http://msdn.microsoft.com/en-us/library/microsoft.windows.controls.ribbon.ribbon.helppanecontenttemplate%28v=vs.100%29.aspx)：

```
<ribbon:Ribbon.HelpPaneContentTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="Account: ..." VerticalAlignment="Center" />
            <Button Content="Sing out" Click="Button_Click" Margin="2,0,2,0" VerticalAlignment="Center" />
        </StackPanel>
    </DataTemplate>
</ribbon:Ribbon.HelpPaneContentTemplate> 
```

# django - 在不中断服务/不停机的情况下部署 Django 应用程序

> ID：14440920
> 
> 赞同：7
> 
> 时间：2013-01-21T14:37:31.780
> 
> 标签：django, postgresql, deployment, continuous-integration

我们还没有持续集成设置（但）。但是要部署的很频繁。一天一次左右。

我们有一个非常标准的 Django 应用程序，带有一个单独的 Postgres 服务器。我们使用普通租用的虚拟机（没有 Amazon 或 Rackspace）。

我们如何才能最大限度地减少应用程序的停机时间？最好是零停机时间。我们考虑了一个具有两个相同的应用程序和两个数据库服务器的设置，并一个接一个地部署一个应用程序/数据库服务器对。

问题是保持数据一致。当一个应用程序/数据库服务器对使用旧代码更新服务器对时，可以为用户提供服务。但是如果用户写入数据库，我们会在切换到更新的对时丢失数据。特别是当我们推动模式迁移时。

我们该如何处理呢？这一定是一个非常普遍的问题，但我找不到好的答案。你如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:08:48.060

如果你没有架构迁移，我会给你一个实际的场景：

保留两个版本的 django 进程（ A 和 B ），您可以使用主管来控制它们。在你的 django 进程前面保留一个 nginx 进程，它将所有请求转发给 A。所以，你将版本 B 上传到服务器，用主管启动 django 进程 B，然后将你的 nginx 的 conf 文件更改为指向 B，然后重新加载你的nginx进程..

如果您有模式迁移，事情就会变得复杂。您的选择包括：

*   您可以考虑使用 NoSQL 解决方案，例如 mongoDB（在这种情况下，您可以保留单个数据库实例）。
*   弄清楚如何在上传时手动记录所有写入请求，以便稍后将它们推送到新数据库。

# c - getaddrinfo 使用 localhost 返回 2 个结果

> ID：14440925
> 
> 赞同：2
> 
> 时间：2013-01-21T14:37:43.620
> 
> 标签：c, linux, sockets, networking, getaddrinfo

我正在尝试将该功能`getaddrinfo`与被动套接字/侦听器一起使用，而不是直接填充旧`sockaddr`结构。我的目的是打开一个套接字并将其绑定到一个端口。本质上我正在构建一个服务器。

我不知道为什么但`getaddrinfo`返回 2 个结果；因此，在第二次下面的循环中，我调用 bind 它退出时出现错误消息“地址已在使用中”。你知道如何解决这个问题，以及将它放在一个循环中是否正确？

```
 struct addrinfo addr;
         memset(&addr,0,sizeof(addrinfo));
         addr.ai_family   = AF_INET;
         addr.ai_socktype = SOCK_STREAM;
         addr.ai_protocol = 0;
         addr.ai_flags    = AI_PASSIVE;

         struct addrinfo * rp,* result;
         getaddrinfo( "localhost","59001",&addr,&result );
         for( rp = result; rp != NULL; rp = rp->ai_next ){

              int sd = socket( AF_INET, SOCK_STREAM, 0 );
              if(-1==sd ){ 
              printf( "error creating the socket %m");
              return -1; 
              }             

             if( -1==bind( sd, result->ai_addr, result->ai_addrlen ) ){                 
             printf( "error binding %m")
             return -1;
             }

             if( -1== listen(sd, MAX_BACKLOG ) ){
             std::cerr << "listen didn't work" << std::endl;
             return -1;
             }       
         } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:54:32.647

这里发生了几件事。对于来自 的多个结果`getaddrinfo()`，这是因为它返回一个 IPv4 地址和一个 IPv6 地址（两者都有）。至于“地址已被使用”，则需要设置`SO_REUSEADDR`选项。`socket()`把它放在你对和的调用之间`bind()`：

```
int opval = 1;
setsockopt(sd, SOL_SOCKET, SO_REUSEADDR, &optval, sizeof(optval)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:27:49.093

这是在redhat机器上吗？有一个众所周知的错误，因为`/etc/hosts/`列表`localhost`两次，当您特别请求时，`AF_INET`您实际上两次得到相同的结果；一次用于 IPv4，一次用于 IPv6。

另请参阅[https://bugzilla.redhat.com/show_bug.cgi?id=496300](https://bugzilla.redhat.com/show_bug.cgi?id=496300)

# iphone - 如何禁用 UIButton 突出显示操作

> ID：14440933
> 
> 赞同：1
> 
> 时间：2013-01-21T14:38:27.040
> 
> 标签：iphone, ios, objective-c, uibutton

我正在尝试用两个按钮实现分段控制的模拟。在默认状态下，它们没有图像，只有标签，在选定的一个中，它们有背景图像。我想用 TouchDown 事件激活控制。

这是代码（我删除了所有不必要的东西）：

```
-(IBAction) onButton1
{
    button1.selected = YES;
    button2.selected = NO;
}

-(IBAction) onButton2
{
    button1.selected = NO;
    button2.selected = YES;
} 
```

问题是：假设 button1 被选中。当我触摸 button2 时，它不会将其图像更改为“选定”图像（正如我所说，没有默认图像），但是当我松开手指时它会改变。此外，如果我触摸已选择的按钮，它会删除“选定”图像并在我释放它时返回它。

我设置了按钮的突出显示状态，因此它们在该状态下“选择”了图像，但这没有帮助（不仅在 IB 中，而且在 IB 中`[button setBackgroundImage:[UIImage imageNamed:@"selected.png"] forState:UIControlStateHighlighted];`）。我已经设置了adjustsImageWhenHighlighted = NO，这在程序方式和IB方面也没有帮助。

我在这里看到了很多类似（但不相同）的问题，但它们对我不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:35:56.590

由于您想在触地事件中激活动作，我假设您不需要突出显示。试试下面的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    button1 = [UIButton buttonWithType:UIButtonTypeCustom];
    button1.frame = CGRectMake(10.0f, 10.0f, 50.0f, 50.0f);
    [button1 setBackgroundImage:[UIImage imageNamed:@"btn.jpeg"] forState:UIControlStateNormal];
    [button1 setBackgroundImage:[UIImage imageNamed:@"btnsel.jpeg"] forState:UIControlStateSelected];
    [button1 addTarget:self action:@selector(button1Action:) forControlEvents:UIControlEventTouchDown];
    [button1 addTarget:self action:@selector(button1TouchUp:) forControlEvents:UIControlEventTouchUpInside|UIControlEventTouchUpOutside];

    [self.view addSubview:button1];
    button1.selected = YES;

    button2 = [UIButton buttonWithType:UIButtonTypeCustom];
    button2.frame = CGRectMake(80.0f, 10.0f, 50.0f, 50.0f);
    [button2 setBackgroundImage:[UIImage imageNamed:@"btn.jpeg"] forState:UIControlStateNormal];

    [button2 setBackgroundImage:[UIImage imageNamed:@"btnsel.jpeg"] forState:UIControlStateSelected];
    [button2 addTarget:self action:@selector(button2Action:) forControlEvents:UIControlEventTouchDown];
    [button2 addTarget:self action:@selector(button2TouchUp:) forControlEvents:UIControlEventTouchUpInside|UIControlEventTouchUpOutside];

    [self.view addSubview:button2];
}

- (void)button1Action:(UIButton*)sender
{
    button1.highlighted = NO;
    button1.selected = YES;
    button2.selected = NO;
}

- (void)button2Action:(UIButton*)sender
{
    button2.highlighted = NO;
    button2.selected = YES;
    button1.selected = NO;    
}

- (void)button1TouchUp:(id)sender
{
    button1.highlighted = NO;
}

- (void)button2TouchUp:(id)sender
{
    button2.highlighted = NO;
} 
```

# php - 将自定义函数添加到学说查询生成器按子句分组

> ID：14440939
> 
> 赞同：0
> 
> 时间：2013-01-21T14:38:41.537
> 
> 标签：php, doctrine, doctrine-orm, group-by, query-builder

我想使用学说按日期列的年份和月份对数据进行分组。它目前使用查询生成器来生成除了分组之外工作正常的语句。我已经安装了 Doctrine Extensions 包中的 Month 和 Year 自定义函数，但是，我不能执行以下操作：

```
$qb->add('groupBy', 'MONTH(i.instdate)'); 
```

我收到一个错误：无法按未定义的标识变量消息分组。

查询生成器可以做到这一点吗？如果不能，我可以将 DQL 添加到查询生成器结果中吗？做这个的最好方式是什么？我不想将整个系统更改为 DQL，因为它是从动态表单选项构建的查询，所以这将是一个重大变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-09T20:43:56.657

如果可以将自定义函数添加到 select 子句，则可以使用一种解决方法。您可以按 select 子句中的自定义函数结果的别名进行分组。

这看起来像这样

```
$qb->select('MONTH(i.instdate) as myMonth'....);
$qb->groupBy('myMonth'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:59:05.790

在我使用的 Doctrine 版本中，按功能分组似乎是不可能的。它在以后的版本中可用。

我决定在需要时使用 SQL 语句，因为更改为不同版本的 Doctrine，在 ZF 内部这样接近项目完成会太多。

# python - 从看起来像字典的字符串创建字典对象

> ID：14440940
> 
> 赞同：0
> 
> 时间：2013-01-21T14:38:42.717
> 
> 标签：python, parsing, dictionary

我有一个字符串，看起来类似于以下内容：

```
myString = "major: 11, minor: 31, name: A=1,B=1,C=1,P=1, severity: 0, comment: this is down" 
```

到目前为止，我已经尝试过：

```
dict(elem.split(':') for elem in myString.split(',')) 
```

它工作正常，直到它捕获上面不能`split()`与`':'`. 我希望将这些格式的元素作为新字典，例如

```
myDic = {'major':'11', 'minor': '31', 'name':{'A':'1', 'B':'1', 'C':'1', 'P', '1'}, 'severity': '0', 'comment': 'this is down'} 
```

如果可能的话，我想避免复杂的解析，因为这些很难维护。 **我也不知道上面字符串中键或值的名称/数量。我只知道格式。**这不是 JSON 响应，这是文件中文本的一部分，我无法控制当前格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:03:15.663

仅供参考，这不是完整的解决方案..

如果这是您输入的***具体结构***，并且将是您的源中的常量模式，您可以区分**逗号分隔的**标记。

`major: 11`和之间的区别在于第一个标记之后`name: A=1,B=1,C=1,P=1,`有**空格**，这与第二个标记不同。因此，只需在第二种`split`方法中添加一个空格，您就可以正确呈现您的字符串。

所以，代码应该是这样的：

```
dict(elem.split(':') for elem in myString.split(', ')) 
```

注意发送拆分方法。有一个空格和逗号...

关于 JSON 格式，我猜它需要更多的工作。我现在不知道..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:07:08.497

至少，这可以正确解析给定的示例......

```
import re

def parse(s):

    rx = r"""(?x)
        (\w+) \s* : \s*
        (
            (?: \w+ = \w+,)*
            (?: \w+ = \w+)
            |
            (?: [^,]+)
        )
    """

    r = {}
    for key, val in re.findall(rx, s):
        if '=' in val:
            val = dict(x.split('=') for x in val.split(','))
        r[key] = val
    return r

myString = "major: 11, minor: 31, name: A=1,B=1,C=1,P=1, severity: 0, comment: this is down"
print parse(myString)    
# {'comment': 'this is down', 'major': '11', 'name': {'A': '1', 'P': '1', 'C': '1', 'B': '1'}, 'minor': '31', 'severity': '0'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:33:20.570

这是另一个建议。

你为什么不把它转换成字典符号。

例如，在第一步中，您通过将其包裹在大括号中并替换 '=' 来替换 ':' 和（输入的逗号或结尾）之间包含 '=' 的所有内容（并且我可能没有空格，我不知道）经过 '：'。

在第二步中，将 ':' 和（输入的逗号或结尾）之间的所有内容包装在 ' 中，删除尾随和前导空格。

最后，你把它全部用大括号包起来。

不过，我仍然不相信这种语法......也许在成功处理了几千行之后......

# php - 非对象上的 PHP fetch_object()

> ID：14440942
> 
> 赞同：1
> 
> 时间：2013-01-21T14:38:46.990
> 
> 标签：php, mysql, ajax

```
<?php
$id = $_POST["id"];
$id2 = $_POST["id2"];

$db = new mysqli('localhost', '***', '***', '***');

if (mysqli_connect_errno() == 0) {
    $sql = "SELECT * FROM chat_message WHERE id > " . $id . " AND id <= " . $id2 . " ORDER BY id";
    $result = $db->query($sql);

    while ($msg = $result->fetch_object()) {
        ?>

        <div>...</div>

        <?php
    }
}

$db->close();
?> 
```

我收到此错误：

```
Call to a member function fetch_object() on a non-object in /var/www/template/loadchat.php on line 11 
```

第 11 行：

```
while ($msg = $result->fetch_object()) 
```

有什么帮助吗？因为我从昨天开始就在做这件事，我找不到错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:51:20.277

1）验证您的数据库表是否命名为`chat_message`（也许是`chat_messages`？）

2）验证您的`chat_message.id`字段是否存在

3）验证您的php变量是否`$id`为`$id2`整数/浮点数！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:43:04.477

`$result = $db->query($sql);`正在返回错误。这意味着查询由于某种原因而失败。

[引用mysqli::query](http://php.net/manual/en/mysqli.query.php)的 PHP 手册：

> 失败时返回 FALSE。对于成功的 SELECT、SHOW、DESCRIBE 或 EXPLAIN 查询，mysqli_query() 将返回一个 mysqli_result 对象。对于其他成功的查询，mysqli_query() 将返回 TRUE。

要检查错误，您可以执行以下操作：

```
if (!$db->query($sql)) {
    trigger_error('Database error: '. $db->error);
} 
```

# c++ - c++ char转换为int多字符常量

> ID：14440945
> 
> 赞同：1
> 
> 时间：2013-01-21T14:38:49.960
> 
> 标签：c++, char, int, decimal

无论如何有任何想法如何做到这一点？

假设我有

```
char x[] = "ABCD"; 
```

我想把它变成一个int，所以我会有

```
int y = 'ABCD'; 
```

我只能放置单个字符，例如`int y = x[0];`目的是找到十进制表示，但我想要“ABCD”的十进制表示而不仅仅是“A”。

最后我会`sprintf(dest, "%.2u", value);`用来获取字符的十进制表示。

编辑：

我不明白为什么，但是对于“ABCD”，此代码有效

```
//unrolled bit ops
const char* x = "ABCD";
uint32_t y = 0;
y |= (uint32_t(x[0]) << 24); //MSB
y |= (uint32_t(x[1]) << 16);
y |= (uint32_t(x[2]) <<  8);
y |= (uint32_t(x[3]) /*<< 0*/); 
```

但是，如果我使用“（¸þ¶”），我不会得到相同的结果。

编辑2 **：

我已经尝试了你最后一次编辑 Sam，但它仍然不起作用。我得到的值是“4294967294”，而不是正确的值“683212470”。我也这样做了

```
int h1 = '(';
int h2 = '¸';
int h3 = 'þ';
int h4 = '¶'; 
```

输出：

```
40
-72
-2
-74 
```

我搜索了完整的 ascii 表，发现“þ”的值为“254”。我想这与此有关...我也尝试过使用 usigned 但没有好的结果。

edit3：如果我替换`const char *x = "(¸þ¶"`为`int x[] = {40, 184, 254, 182};`（每个字符的十进制表示，它可以工作。我可以理解哪里出了问题，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:42:16.180

您需要确保该 char 数组的 int 对齐以进行正确的强制转换或对该 int 执行 memcpy。还要注意整数的字节顺序！此外，使用 uint32_t 等 C99 整数类型也将有助于使您的代码具有可移植性。

请参阅此问题以了解如何转换位： [严格混叠和对齐](https://stackoverflow.com/q/9964418/1175253)

**编辑：**

R. Martinho Fernandes 的意思可能是这样的（未经测试）：

```
//unrolled bit ops
const char* x = "ABCD";
uint32_t y = 0;
y |= (uint32_t(uint8_t(x[0])) << 24); //MSB
y |= (uint32_t(uint8_t(x[1])) << 16);
y |= (uint32_t(uint8_t(x[2])) <<  8);
y |= (uint32_t(uint8_t(x[3])) /*<< 0*/); 
```

上面的示例避免了任何字节顺序的特定代码

**编辑2：**

对于动态字符数组（如果必须转换少于 4 个字符，则假设前导零字符）：

```
const char* x = "ABC";
size_t nChars = 3;

assert(0 < nChars && nChars <= sizeof(uint32_t));

uint32_t y = 0;

int shift = (nChars*8)-8;
for(size_t i = 0;i < nChars;++i)
{
    y |= (uint32_t(uint8_t(x[i])) << shift);
    shift -= 8;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T15:38:47.853

如果这是您想要的，我已经创建了一个示例程序。

包括所需的头文件（stdio.h、stdlib.h、math.h、string.h）

```
unsigned long convertToInt(char *x); 
```

`void main() {`

```
char x[] = "ABCD";
unsigned long y = 0;

y = convertToInt(x);

printf("Numeric value = %lu\n", y); 
```

`}`

`unsigned long convertToInt(char *x) {`

```
unsigned long num = 0, i, n;`
char hex_c;

for(i = 0; i< strlen(x); i++)  {

    hex_c = x[i];

    if (hex_c >= '0' && hex_c <= '9') {
    n = hex_c - '0';
    } else if (hex_c >= 'A' && hex_c <= 'F') {
    n =  10 + hex_c - 'A';
    } else if (hex_c >= 'a' && hex_c <= 'f') {
    n = 10 + hex_c - 'a';
    } else {
        printf("Wrong input");
    return 0;
    }

    num += n * (pow(16, (strlen(x) - i - 1)));
}

return num;

} 
```

# iphone - MKMapView 上的图针距当前位置约 10 公里

> ID：14440948
> 
> 赞同：0
> 
> 时间：2013-01-21T14:38:56.557
> 
> 标签：iphone, ios, objective-c, mkmapview

我有一个`MKMapView`&`PinAnnotation`用于在`MKMapView`. 我有一个本地数据库，其中包含数千个位置的`latitude`& `longitude`。`MKMapView`当应用程序启动时，我想在距离当前位置 10 公里左右绘制引脚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T06:14:02.530

我使用以下方式完成了它 -

1) 先用( )的方法求出当前的`latitude`& 。`longitude``delegate``MKMapView``didUpdateUserLocation`

2）找到与当前位置的距离，该位置存储在我的本地数据库中（KM）。

3) 如果`distance <=10 Kms`，则 plot `pin`，否则什么也不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T19:43:02.017

这取决于你的数据库。一种简单的方法是计算 10 公里的经度差（在赤道和北极附近不同）和 10 公里的纬度差，然后在数据库中搜索 maxLat 和 minLat 以及 maxLong 和 minLong 之间的所有内容。这为您提供了矩形中的项目，但这是一个开始。[从那里您可以循环浏览每个结果，将其设为 CLLocation 并使用distanceFromLocation](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/occ/instm/CLLocation/distanceFromLocation%3a)检查它是否在 10 公里内。

# php - 将动态检索到的内容添加到 jQuery Mobile PHP MVC 到 jQuery 对象

> ID：14440949
> 
> 赞同：2
> 
> 时间：2013-01-21T14:38:55.993
> 
> 标签：php, jquery, jquery-mobile

我有一个 MVC Web 应用程序，它使用 PHP 检查查询字符串中的内容，并通过呈现页眉、内容和页脚来加载适当的页面（例如 ?category=1 加载呈现类别视图的 CategoryController）。

我还有一个 custom.js，它将 jQuery 功能添加到 DOM 中的元素。由于动态内容由 PHP 控制，因此 jQuery 功能仅在页面首先加载时才起作用。遍历应用程序不会刷新页面，因此新包含的元素不会添加到 jQuery 对象中。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:44:04.697

首先不要将**$(function()**或**$(document).ready()**与 jQuery Mobile 一起使用，因为 jQM 不是为那样工作而构建的。相反，您应该使用此处提到的页面事件：[https ://stackoverflow.com/ a/14010308/1848600](https://stackoverflow.com/a/14010308/1848600)或 mobileinit 事件如下：

```
$(document).on("pageinit", function () {

}); 
```

或 mobileinit 如果您希望它在应用程序执行时只执行一次：

```
$(document).on("mobileinit", function () {

}); 
```

原因在顶部链接中描述。您还可以在 jQM 官方文档中找到更多相关信息：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

现在，如果您希望 jQM 重新设置页面样式，您应该使用**.trigger('pagecreate')**函数。

假设，例如，您有一个带有 id**索引**的 jQM 页面，这是您生成的布局。

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h3>
            First Page
        </h3>
        <a href="#second" class="ui-btn-right">Next</a>
    </div>

    <div data-role="content">
        <a href="#" data-role="button" id="test-button">Test button</a>
    </div>

    <div data-theme="a" data-role="footer" data-position="fixed">

    </div>
</div> 
```

要强制 jQM 对其进行样式设置，您应该使用以下内容：

```
$('#index').live('pagebeforeshow',function(e,data){    
    $('#index').trigger('pagecreate');
}); 
```

或者如果你想将它应用到每个 jQM 页面，像这样使用它：

```
$('[data-role="page"]').live('pagebeforeshow',function(e,data){    
    $(this).trigger('pagecreate');
}); 
```

# c# - PowerShell 变量和 C#

> ID：14440952
> 
> 赞同：2
> 
> 时间：2013-01-21T14:39:03.310
> 
> 标签：c#, variables, powershell, office365

我正在使用 C# 开发 Office 365 插件并尝试使用以下 PowerShell 命令：

```
$newLicense = New-MsolLicenseOptions -AccountSkuId example:ENTERPRISEPACK -DisabledPlans SHAREPOINTWAC,MCOSTANDARD,SHAREPOINTENTERPRISE
Set-MsolUserLicense -UserPrincipalName test@example.com -AddLicenses "example:ENTERPRISEPACK" -LicenseOptions $newLicense 
```

在 PS 中，这很好用。在 C# 中，我无法运行此命令。这是我的 C# 代码，来自[PowerShellInvoker](http://pastebin.com/Gqd9nMw1)类：

```
var iss = InitialSessionState.CreateDefault();
iss.ImportPSModule(new[] { MsOnline });
iss.ThrowOnRunspaceOpenError = true;
_runspace = RunspaceFactory.CreateRunspace(iss);
_runspace.Open();
_invoker = new RunspaceInvoke(_runspace); 
```

我尝试了很多方法：

```
scriptText_ = "$newLicense = New-MsolLicenseOptions -AccountSkuId {1} -DisabledPlans SHAREPOINTWAC,MCOSTANDARD,SHAREPOINTENTERPRISE\n"+
"Set-MsolUserLicense -UserPrincipalName test@example.com -AddLicenses \"example:ENTERPRISEPACK\" -LicenseOptions $newLicense"); 
```

我使用以下方法来执行其他完美运行的命令：

```
_invoker.Invoke(scriptText_); 
```

并且：

```
var pipeline = _runspace.CreatePipeline();
pipeline.Commands.AddScript(scriptText_);
return pipeline.Invoke(); // and getting back the variable 
```

我还尝试在 Runspace 对象中添加变量：

```
_runspace.SessionStateProxy.SetVariable ("newLicense", pipeline.Invoke()); 
```

但是该命令不起作用，并且没有返回错误。我不太了解 PowerShell 环境（我是这方面的初学者）。

提前感谢您提供的所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:32:08.990

我怀疑您遇到了 PowerShell 引擎未向您显示的错误。试试这种方法来观察非终止错误：

```
var ps = PowerShell.Create();
ps.AddScript(@"Get-ChildItem c:\xyzzy");
var results = ps.Invoke();
if (ps.HadErrors)
{
    foreach (var errorRecord in ps.Streams.Error)
    {
        Console.WriteLine(errorRecord);
    }
}
foreach (var result in results)
{
    Console.WriteLine(result);
} 
```

# android - 如何在gridview（日历）上获取上个月的天数

> ID：14440957
> 
> 赞同：1
> 
> 时间：2013-01-21T14:39:18.177
> 
> 标签：android, gridview, calendar

我需要有关如何在此日历上显示前一个月的日子（灰显）的帮助。

我在这里获得了当前月份的视图.. 但正如您所见，前几个月的日子不可见。我知道为什么.. 但是该怎么做呢？目前的这个也有一些错误。请帮助。发布自定义适配器类的代码：

**日历适配器.java**

```
 import java.util.ArrayList;
    import java.util.Calendar;
    import android.content.Context;
    import android.graphics.Color;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.BaseAdapter;
    import android.widget.ImageView;
    import android.widget.TextView;

  public class CalendarAdapter extends BaseAdapter {
static final int FIRST_DAY_OF_WEEK =0; // Sunday = 0, Monday = 1

private Context mContext;

private java.util.Calendar month;
private Calendar selectedDate;
private ArrayList<String> items;

public CalendarAdapter(Context c, Calendar monthCalendar) {
    month = monthCalendar;
    selectedDate = (Calendar)monthCalendar.clone();
    mContext = c;
    month.set(Calendar.DAY_OF_MONTH, 1);
    this.items = new ArrayList<String>();
    refreshDays();
}

public void setItems(ArrayList<String> items) {
    for(int i = 0;i != items.size();i++){
        if(items.get(i).length()==1) {
        items.set(i, "0" + items.get(i));
        }
    }
    this.items = items;
}

public int getCount() {
    return days.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

// create a new view for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    TextView dayView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        LayoutInflater vi = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.calendar_item, null);

    }
    dayView = (TextView)v.findViewById(R.id.date);

    // disable empty days from the beginning
    if(days[position].equals("")) {
        dayView.setClickable(false);
        dayView.setFocusable(false);
        //need to show previous months date

    }
    else {
        // mark current day as focused
        if(month.get(Calendar.YEAR)== selectedDate.get(Calendar.YEAR) && month.get(Calendar.MONTH)== selectedDate.get(Calendar.MONTH) && days[position].equals(""+selectedDate.get(Calendar.DAY_OF_MONTH))) {
            v.setBackgroundResource(R.drawable.date_area);
            dayView.setTextColor(Color.parseColor("#FFFFFF"));
        }
        else {
            v.setBackgroundResource(R.drawable.current_date_area);
        }
    }
    dayView.setText(days[position]);

    // create date string for comparison
    String date = days[position];

    if(date.length()==1) {
        date = "0"+date;
    }
    String monthStr = ""+(month.get(Calendar.MONTH)+1);
    if(monthStr.length()==1) {
        monthStr = "0"+monthStr;
    }

    // show icon if date is not empty and it exists in the items array
   /* ImageView iw = (ImageView)v.findViewById(R.id.date_icon);
    if(date.length()>0 && items!=null && items.contains(date)) {            
        iw.setVisibility(View.VISIBLE);
    }
    else {
        iw.setVisibility(View.INVISIBLE);
    }*/
    return v;
}

public void refreshDays()
{
    // clear items
    items.clear();

    int lastDay = month.getActualMaximum(Calendar.DAY_OF_MONTH);
    int firstDay = (int)month.get(Calendar.DAY_OF_WEEK);

    // figure size of the array
    if(firstDay==1){
        days = new String[lastDay+(FIRST_DAY_OF_WEEK*6)];
    }
    else {
        days = new String[lastDay+firstDay-(FIRST_DAY_OF_WEEK+1)];
    }

    int j=FIRST_DAY_OF_WEEK;

    // populate empty days before first real day
    if(firstDay>1) {
        for(j=0;j<firstDay-FIRST_DAY_OF_WEEK;j++) {
            days[j] = "";
        }
    }
    else {
        for(j=0;j<FIRST_DAY_OF_WEEK*6;j++) {
            days[j] = "";
        }
        j=FIRST_DAY_OF_WEEK*6+1; // sunday => 1, monday => 7
    }

    // populate days
    int dayNumber = 1;
    for(int i=j-1;i<days.length;i++) {
        days[i] = ""+dayNumber;
        dayNumber++;
    }
}

// references to our items
public String[] days;} 
```

这是关于我如何使用这个适配器的活动代码：

**日历视图.java**

```
/*some code above*/
/*this is in the OnCreate block*/
adapter = new CalendarAdapter(this, month);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(adapter);
/*some code below*/ 
```

这是我的日历视图屏幕（网格）：

**日历视图截图：** [![网格](../Images/d0aa202b738c8cfbc8f3b0c8bd16aba0.png)](https://i.stack.imgur.com/Kr5O3.png)

**直截了当地说，我只想在本月 1 日之前的空白框中填写上个月的最后一周的日子**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:53:05.403

声明另一个日历

```
private java.util.Calendar month, prevMonth; 
```

在构造函数中向日历添加克隆

```
prevMonth = (Calendar) month.clone();
prevMonth.roll(Calendar.MONTH, false); 
```

然后用这个替换 refreshDays。这将分别用上个月和下个月的天数填充空白区域，分别表示当月的第一周和最后一周。

```
public void refreshDays() {
    // clear items
    items.clear();

    int lastDay = month.getActualMaximum(Calendar.DAY_OF_MONTH);
    int firstDay = (int) month.get(Calendar.DAY_OF_WEEK);
    int maxweek = month.getActualMaximum(Calendar.WEEK_OF_MONTH);
    Log.d("CalendarAdapter", String.valueOf(maxweek));
    // figure size of the array
    /*
     * if (firstDay == 1) { days = new String[lastDay + (FIRST_DAY_OF_WEEK *
     * 6)]; }
     * 
     * else { days = new String[lastDay + firstDay - (FIRST_DAY_OF_WEEK +
     * 1)]; }
     */
    days = new String[maxweek * 7];

    int j = FIRST_DAY_OF_WEEK;

    // populate empty days before first real day
    if (firstDay > 1) {

        // can be made a bit faster if implemented without this following
        // for loop for roll
        for (j = 0; j < firstDay - FIRST_DAY_OF_WEEK; j++) {
            prevMonth.roll(Calendar.DAY_OF_MONTH, false);
            Log.d("CalendarAdapter",
                    "roll block: " + prevMonth.get(Calendar.DAY_OF_MONTH));
        }

        for (j = 0; j < firstDay - FIRST_DAY_OF_WEEK; j++) {

            // days[j] = "";
            prevMonth.roll(Calendar.DAY_OF_MONTH, true);
            int dayPrev = prevMonth.get(Calendar.DAY_OF_MONTH);
            days[j] = " " + String.valueOf(dayPrev) + " ";
            Log.d("CalendarAdapter", "calculation:J if firstDay>1 -- " + j
                    + " roll gives:" + dayPrev);
        }
    } else {
        for (j = 0; j < FIRST_DAY_OF_WEEK * 6; j++) {
            days[j] = "";
            Log.d("CalendarAdapter", "calculation:J if firstDay<1 -- " + j);
        }
        j = FIRST_DAY_OF_WEEK * 6 + 1; // sunday => 1, monday => 7
    }

    // populate days
    int dayNumber = 1;
    boolean flag = false;
    for (int i = j - 1; i < days.length; i++) {

        days[i] = String.valueOf(dayNumber).trim() + ".";
        if (flag)
            days[i] = String.valueOf(dayNumber).trim();
        if (dayNumber == lastDay) {
            dayNumber = 0;
            flag=true;
        }
        dayNumber++;
    }
}

// references to our items
public String[] days;
} 
```

# ios - 在 UITableView 中滚动时图像混淆

> ID：14440958
> 
> 赞同：0
> 
> 时间：2013-01-21T14:39:19.707
> 
> 标签：ios, objective-c, xml, uitableview, xml-parsing

**您好在这里找到了答案：[Images getting mixed up in a UITableView - XML parsing](https://stackoverflow.com/questions/14440333/images-getting-mixed-up-in-a-uitableview-xml-parsing)**

我正在解析一个 XML 文件，其中包含指向我放入 UITable 的图像的链接。由于某种原因，当我在表格中向下滚动时，这些图片完全混淆了。这是我用于 UITable 的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";
    Tweet *currentTweet = [[xmlParser tweets] objectAtIndex:indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        CGRect imageFrame = CGRectMake(2, 8, 40, 40);
        customImage = [[UIImageView alloc] initWithFrame:imageFrame];
        [cell.contentView addSubview:customImage];

    }

    NSString *picURL = [currentTweet pic];
    if (![picURL hasPrefix:@"http:"]) {
        picURL = [@"http:" stringByAppendingString:picURL];
    }

    customImage.image = [UIImage imageWithData:[NSData dataWithContentsOfURL: [NSURL URLWithString:picURL]]];

    return cell;
} 
```

知道我做错了什么吗？非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:07:39.440

这是因为您正在使可重复使用的单元格出列。它正在回收一个包含以前使用过的图像的单元格。

我注意到您将图像设置在与初始化单元格相同的 if 块中。如果我是你，我会`[cell.contentView addSubview:customImage];`在你的退货声明之前移动。这样，当它回收出队的单元格时，它不会有图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:45:15.313

图片是从网上下载的吗？

如果是这样，那么下载图像的延迟将导致这种情况。您需要以多线程方式执行此操作。

看看这个例子……

[关于 Apple 的 LazyTableImages 示例的问题 - 与应用商店的行为不完全相同](https://stackoverflow.com/questions/4964632/question-about-apples-lazytableimages-sample-doesnt-behave-exactly-like-the)

网上也有很多关于延迟加载图片和`UITableView`s的教程。

# sql - 复杂的 SQL 查询与数据表迭代和处理

> ID：14440959
> 
> 赞同：0
> 
> 时间：2013-01-21T14:39:28.113
> 
> 标签：sql, sql-server-2012

我在 SQL Server 2012 中有一个三表结构：人员、连接和消息。受影响的架构将是这样的：

**人员**：Id (pk bigint)、姓名...
**连接**：Id (pk bigint)、IdPpl1 fk、IdPpl2 fk
**消息**：Id (pk uniqueidentifier)、Idconnection (fk)、Messagetype (smallint)

在 Connections 表中，IdPpl1 和 IdPpl2 是人员 ID 的 fk。它可能碰巧出现在此表中，但交换了他们的列，例如“两个人”：

```
Id IdPpl1 IdPpl2  
.. ...... ......  
3     101    105  
8     105    101
9     101    106
10    106    101 
```

上述情况是正确的。实际上，这些是表中这“两个人”的最大出现次数。

Messages 表保存了哪个“连接”发送了消息的信息。

```
Id IdConnection Messagetype
.. ............ ...........
24            3           1
25            8           1
26            3           2
27            8           2
28            9           3
29           10           2 
```

（*注意：消息是单向的，这就是为什么连接表中可能有两行影响相同的两个人：在第一行，一个人是发送者，另一个是接收者，在第二行他们交换）*

给定一个人员 ID，我需要一个 SQL 查询来显示“由相互连接的人相互发送的最少连接类型消息”和一个额外的列，指示消息类型是否匹配。**对于People Id 101**，结果应该是这样的：

 **```
Person_id Person_name IdConnection MatchingMsgType
......... ........... ............ ...............
      105        John            3               1 
      106       Peter            9               0 
```

由于 MsgId 24 和 25 出现第一行。与消息 26 和 27 对应的潜在行将不会出现，因为找到了先前匹配的消息类型。由于 MsgIds 28 和 29 出现第二行，将消息类型标记为不匹配。

目前，我得到了所有“与人相关的消息”，并在内存中遍历数据表排序、过滤和操作。

您会选择完整的 SQL 解决方案（我想保留应用层之间的完全隔离）还是更适合数据表迭代？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:51:16.680

显然，这取决于当前数据库查询的结果集的长度（产生与用户相关的所有行的那个）。目前尚不清楚是否曾经从您的表中删除行。如果没有，您的解决方案将无法扩展，因为匹配的行数将永远增长。相反，如果您可以断言结果行数有一定的界限（例如：用户可以同时打开的最大连接数），那么您的解决方案可能就足够了。**

# css - 对齐 位于图像的右侧

> ID：14440960
> 
> 赞同：2
> 
> 时间：2013-01-21T14:39:30.123
> 
> 标签：css, drupal

我被一些 CSS 卡住了。我需要这个：

![在此处输入图像描述](../Images/19c7220c9f3957b70151fdbd56dd8e6d.png)

但我有这个（适用`float:left`于图像）：

![在此处输入图像描述](../Images/d9c8cdddf7864f0a1bde7785e85b7c89.png)

HTML 是由 Drupal 生成的，所以我不能改变它的结构：

```
<div class="content clearfix">
    <div class="field field-name-field-gallery-work-order field-type-image field-label-hidden">
        <div class="field-items">
            <div class="field-item even"><img typeof="foaf:Image" src="http://www.gcca.eu/sites/default/files/styles/stories-field-thumb/public/ACP/workorders/rwanda_photo_2_land_registration_programme_gcca_eud.jpg" width="200" height="150" alt=""></div>
        </div>
    </div> 
    <div class="field field-name-field-country-media field-type-taxonomy-term-reference field-label-inline clearfix"><div class="field-label">Country:</div>
    <div class="field-items">
        <div class="field-item even">Madagascar</div>
    </div>
</div>
<div class="field field-name-field-region field-type-list-text field-label-inline clearfix">
    <div class="field-label">Region:&nbsp;</div>
    <div class="field-items">
        <div class="field-item even">Africa</div>
    </div>
</div>
... 
```

我将以下样式设置为图像：

```
.node-work-order .field-type-image img {
   float: left;
   margin: 0 15px 5px 0;
}

.field-type-image img {
    background: #F3F0E8;
    border: 1px solid #DAC5B4;
    padding: 10px;
    margin: 0 0 10px 0;
} 
```

如何将 Country 下的区域和其他属性与图像右侧对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:44:57.957

将 a`float:left`放在图像容器上，而不是图像上：

```
.field-type-image{
    float:left;
}    

 .field-label-inline{
    margin-left: 280px; /* width of the image */
} 
```

或者，如果图像的宽度发生变化，您可以使内容与隐藏的溢出对齐：

```
.field-type-image{
    float:left;
}    

.field-label-inline{
    overflow:hidden;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:01:32.973

第二个 div 正在清除浮动，这就是它保持向下的原因。您可以像这样使 clearfix 无效：

```
.field-name-field-region.field-type-list-text.field-label-inline{
    clear:none
} 
```

# python - 使用 Psycopg2 的日期阈值

> ID：14440961
> 
> 赞同：-2
> 
> 时间：2013-01-21T14:39:31.977
> 
> 标签：python, date, python-2.7, psycopg2

在 Postgres 控制台中，我可以写...

```
select * from table where date_col < now() - interval '25 days'; 
```

但是我如何使用 Psycopg2 做到这一点？

像这样直接通过 execute() 运行它

```
date_bracket = 5
self.cur.execute("""SELECT id FROM bucket WHERE last_crawled <
        now() - interval '%s days'""", (date_bracket, )) 
```

似乎没有做任何事情（没有错误或返回结果）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:00:22.543

execute() 从不返回任何东西。fetchone()、fetchmany()、fetchall() 都可以。请阅读文档：http: [//initd.org/psycopg/docs/usage.html](http://initd.org/psycopg/docs/usage.html)

# yui - YUI 分页查找当前页面

> ID：14440962
> 
> 赞同：0
> 
> 时间：2013-01-21T14:39:43.027
> 
> 标签：yui

我正在使用 YUI 分页来显示数据。更新第 5 页的记录后，如何填充表的默认第 5 页。而且我还需要填充该`RowsPerPageDropdown`值，用于决定每页显示多少条记录。

`onChange`YUI 分页有活动吗？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:26:42.937

假设您正在使用：YAHOO.widget.Paginator

> 当属性更改导致计算的当前页面更改时触发 pageChange 事件。

来自：http: [//developer.yahoo.com/yui/docs/YAHOO.widget.Paginator.html#events](http://developer.yahoo.com/yui/docs/YAHOO.widget.Paginator.html#events)

使用了这样的东西：

```
var paginator = new YAHOO.widget.Paginator({ 
  ... options ...
});
paginator.subscribe('pageChange',function(){
  ... handle page change event ...
}) 
```

# boost - xubuntu 安装中缺少 Boost C++ 序列化库

> ID：14440964
> 
> 赞同：0
> 
> 时间：2013-01-21T14:39:56.787
> 
> 标签：boost, boost-serialization, xubuntu

我在我的 PC（12.04，Precise Pangolin）上安装了 xubuntu OS，并使用 ubuntu 的二进制存储库安装了 C++ boost lib（1.49），方法是在终端中发出以下命令：

```
 sudo apt-get install libboost-dev 
```

该命令成功完成，现在我需要为我的应用程序使用名为 libboost_serialization 的 boost 序列化库。但是，我在文件系统的 /usr/ 下的任何位置都找不到它，我想知道为什么在发出上述 apt-get 命令时没有自动安装这个库。我是否应该单独安装另一个软件包以在我的 xubuntu 安装中安装 boost 序列化库？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:43:27.813

你可能想要这个包：[http](http://packages.ubuntu.com/precise/libboost-serialization-dev) ://packages.ubuntu.com/precise/libboost-serialization-dev 。

如果你想在一个操作中安装所有 Boost 子包，你还有一个[libboost-all-dev](http://packages.ubuntu.com/precise/libboost-all-dev)包。

# x86-16 - 80x86 状态位。它们在哪个寄存器中可读？

> ID：14440966
> 
> 赞同：1
> 
> 时间：2013-01-21T14:40:02.843
> 
> 标签：x86-16

有一些状态位，它们“设置”了 80x86 的下一个总线操作的类型。

有没有可能从任何寄存器中读取这些状态位？如果有，是哪一个？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:22:06.820

我现在知道您无法从寄存器中获取有关这些状态位的任何信息。

# ejbql - EJB QL 集合成员比较中的查询

> ID：14440968
> 
> 赞同：1
> 
> 时间：2013-01-21T14:40:18.057
> 
> 标签：ejbql

我需要在 EJBQL 中编写以下 sql 查询。

```
SELECT * FROM teacher t left join student_class sc on t.id_teacher = p.id_student_class where t.login = 01325 and sc.id_student_class = 3; 
```

在类 bean Teacher 中，有如下关系：

```
@Column(name = "login")
private String mLogin;

@OneToMany(mappedBy = "mTeacher", fetch = FetchType.LAZY)
private List<StudentClass> mStudentClassList ; 
```

我知道如何启动它：

```
SELECT mTeacher FROM Teacher mTeacher INNER JOIN mTeacher.mStudentClassList  mStudentClassList WHERE mTeacher.mLogin = 01325 AND mStudentClassList 
```

... ???

谁能帮我？

# android - Android 谷歌地图获取错误无法获取连接工厂客户端

> ID：14440979
> 
> 赞同：0
> 
> 时间：2013-01-21T14:41:01.533
> 
> 标签：android, google-maps

Android google maps get error**无法获取连接工厂客户端**，我从[这里](https://developers.google.com/maps/documentation/android/v1/maps-api-signup)获取了 apikey ，这是我的代码：

MainActivity.java

```
package com.haichal.map;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import android.os.Bundle;

public class MainActivity extends MapActivity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <com.google.android.maps.MapView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:enabled="true"
        android:clickable="true"
        android:apiKey="0IbdGeqd17e6zbTdNfSze2pEt1jJzEEPoOM0jZw"
        />

</RelativeLayout> 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.haichal.map"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".MainActivity"
            android:label="@string/title_app" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

在 android 项目目标中，我使用 Google APIs, platform `4.1.2`, Api level `16`。

在我的 Eclipse 项目中没有出现错误（没有红色气球），我调试并安装成功，但是当我运行应用程序时，地图只是得到空白网格，没有得到地图，如果我查看日志猫我得到消息错误**无法连接工厂客户**。

如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:45:30.793

> 当我运行应用程序时，地图只是得到空白网格，而不是地图

您的设备无法访问 Internet（至少无法访问 Google 地图服务器），或者您的 API 密钥错误。另一种可能性是您缺乏`INTERNET`许可，但似乎您已经拥有许可。

> 如果我查看日志 cat 我收到消息错误无法获取连接工厂客户端

即使您的应用程序正常工作，该消息也会一直发生。

# php - WordPress 小部件开发

> ID：14440980
> 
> 赞同：0
> 
> 时间：2013-01-21T14:41:04.273
> 
> 标签：php, wordpress, widget

我正在构建我的第一个 WordPress 自定义小部件，我对此表示怀疑。到目前为止，这是我的小部件的结构

```
<?php

//Add an action that will load all widgets
add_action( 'widgets_init', 'ma_load_widgets' );

//Function that registers the widgets
function ma_load_widgets() {
register_widget('ma_my_widget');
}
/*-----------------------------------------------------------------------------------

Plugin Info : Goes here

-----------------------------------------------------------------------------------*/

class ma_my_widget extends WP_Widget {

function ma_my_widget (){

    code_goes_here

}

function widget($args, $instance){

    extract($args);

    code_goes_here

}

function update($new_instance, $old_instance){

    $instance = $old_instance;

    code_goes_here

    return $instance;

}

function form($instance){

    code_goes_here

}

}

?> 
```

我已将此代码保存到一个 widget.php 文件中并放入包含文件夹中，我正在使用 WP 3.5 二十十二，但是当我要在我的后端小部件时，我看不到它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:59:29.540

> 我已将此代码保存到 widget.php 文件中并放入包含文件夹

那是错误的。在您的 widget.php 文件顶部添加“插件标题”，例如：

```
<?php
/*
Plugin Name: Ma My Widget :)
Description: My widget
Version: 1.0
Author: Me
License: GPL2
*/
?> 
```

将文件放在插件文件夹中，然后您会在仪表板的插件页面中看到它。激活它，您还将在仪表板中看到您的小部件

查看他们的[Plugin API](http://codex.wordpress.org/Writing_a_Plugin)和[Widget API](http://codex.wordpress.org/Widgets_API)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:59:42.087

您必须将小部件放入 wp-content\plugins 的文件夹中

对于任何其他问题，请在此处查看：

[http://codex.wordpress.org/Widgets_API](http://codex.wordpress.org/Widgets_API)

# arrays - 写入文件错误：“打开的文件太多”

> ID：14440982
> 
> 赞同：3
> 
> 时间：2013-01-21T14:41:22.133
> 
> 标签：arrays, matlab, text

我想编写一个数组`cloud`，它只不过是一个存储圆形云的坐标的数组，它有两列，纬度和经度。我希望以这样的方式将这些坐标写入文本文件。

```
 418.9517   43.9866
 419.2260   44.1501
 419.4826   44.3402
 419.7190   44.5550
 419.9327   44.7923
 420.1217   45.0497 
```

使用此代码，我想生成多个此类文件，将单个云的坐标存储在一个文件中。

这`a`是数组，前两列是纬度和经度（圆心），第三列是圆的半径。和`z =size(a)`.（即 2905x3）。因此，总共需要写入 2905 个文件。

```
for s =1:z(1)
    r= a(s,3);

    ang=0:0.1:2*pi; 
    xp=a(s,1) + r*cos(ang);  
    yp=a(s,2) + r*sin(ang);  
    xp=xp';
    yp= yp';
    cloud = [xp,yp]

    filename = ['Shower_Cloud',s,'number.txt']
    file_id = fopen (filename,'w');
    fprintf(file_id,'%g\t',cloud[]);
    fclose(file_id);
end 
```

我运行代码时的错误是我无法自己诊断这个问题的主要问题，尽管我觉得它是一个小问题。

```
 >> xyz
     D:\Users\Vikram\Documents\MATLAB\Manuela\Version_2\Weather\Shower\xyz.m:
     Too many files open; check that FILES = 20 in
     your CONFIG.SYS file.

     Unexpected error status flag encountered.  Resetting to proper state. 
```

请询问我是否错过了要提及的重要内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:05:12.407

这只是一种猜测，但在将数字与字符串连接时可能会出现奇怪的行为。您可能希望`num2str(s)`在创建文件名时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:04:43.827

很可能是您的代码中的某些错误导致许多文件被打开而不被关闭。请注意，即使您发布的代码确实正确关闭了每个文件，但如果您仍在运行相同的 MATLAB 会话，您可能仍会打开文件。

您可以像这样关闭所有当前打开的文件：

```
fclose all 
```

所以我建议你先在 MATLAB 提示符中输入它。如果您仍然遇到错误，请查看：

```
fopen all 
```

其中列出了所有当前打开的文件；希望这会给你足够的信息来找到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:54:55.607

也许你程序的其他部分会丢失打开的文件。用于`fopen('all')`列出打开文件的文件句柄。这可能是寻找错误的起点。

# c# - protobuf-net 集合中的集合

> ID：14440988
> 
> 赞同：0
> 
> 时间：2013-01-21T14:41:42.833
> 
> 标签：c#, collections, protobuf-net, synchronize

我们在总线上使用 protobuf-net 来同步对象。它适用于集合中的对象。我们监听`CollectionChanged`事件，并且完整的对象正在总线上的专用通道上同步和分发。我们的对象包含列表（字典），它们完全被序列化/反序列化。

到目前为止，这还不是问题，但我们希望提高效率并且只发送这些列表更新。如果我设置`OverwriteList = false`并尝试使用该`Model.DeserializeWithLengthPrefix`方法，则会收到以下错误消息：

> “已添加具有相同密钥的项目。” （在 System.Collections.Generic.Dictionary 的 System.ThrowHelper.ThrowArgumentException(ExceptionResource 资源) `2.Insert(TKey key, TValue value, Boolean add) at System.Collections.Generic.Dictionary`2.System.Collections.Generic.ICollection>.Add(KeyValuePair`2 keyValuePair) 在 proto_13(Object , ProtoReader)

protobuf 可以为我们处理这些集合/字典中的变化，还是我们应该自己听变化？

# java - 如何设置 Spring MVC 映射的优先级？

> ID：14440991
> 
> 赞同：10
> 
> 时间：2013-01-21T14:41:48.410
> 
> 标签：java, spring, spring-mvc

我有 2 个弹簧控制器映射：

```
@Controller
public class ContentController {

    @RequestMapping(value = "**/{content}.html")
    public String content(@PathVariable String content, Model model, HttpServletRequest request) {
    }
}

@Controller
public class HomeController {

    @RequestMapping(value = "**/home")
    public String home(HttpServletRequest request, Model model) {
    }
} 
```

以下 url 匹配两个映射：/home.html

但是，我想确保“内容”映射始终优先于“家庭”映射。有没有办法可以指定？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-11T07:45:58.283

我最近遇到了非常相似的问题，我不得不使用两种模棱两可的 URL：

*   一个人接受了一年，比如说`/2012`，`/2013`等等。我使用带有正则表达式的映射来创建它，如下所示：`@RequestMapping("/{year:(?:19|20)\\d{2}}")`
*   另一个是接受内容标识符（又名 slug）。我使用映射创建它，如`@RequestMapping("/{slug}")`.

重要的是“年”控制器方法优先于“蛞蝓”方法。不幸的是（对我来说）Spring 总是使用“slug”控制器方法。

由于 Spring MVC 更喜欢*更具体的*映射，我不得不让我的“slug”模式*不那么具体*。基于[路径模式比较](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-pattern-comparison)文档，我在 slug 映射中添加了通配符：`@RequestMapping("/{slug}**")`

我的控制器看起来像这样，现在在 URL 中有年份（等）时`listByYear`调用。`/2012``/1998`

```
@Controller
public class ContentController
{
    @RequestMapping(value = "/{slug}**")
    public String content(@PathVariable("slug") final String slug)
    {
        return "content";
    }
} 
```

和

```
@Controller
public class IndexController
{
    @RequestMapping("/{year:(?:19|20)\\d{2}}")
    public String listByYear()
    {
        return "list";
    }
} 
```

这不完全是如何设置优先级（在我看来这将是一个了不起的功能），但提供了某种“不错”的解决方法，并且将来可能会派上用场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:54:43.313

URL 映射由发现映射的顺序决定。

因此，您可以强制在另一个控制器之后在 spring 上下文中创建一个控制器。

这可以使用 bean 定义（在 xml 中）中的 depends-on="" 属性来完成。

我不确定它是使用找到的第一个映射还是最后一个映射。

另外，这只是理论，我还没有真正尝试过。

我看到这样的日志消息：

```
17:29:01.618 [main] INF S o.s.w.s.h.SimpleUrlHandlerMapping - Mapped URL path [/resources/**] onto handler    'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0'
17:29:01.625 [main] INF S o.s.w.s.h.SimpleUrlHandlerMapping - Mapped URL path [/**] onto handler 'org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler#0' 
```

所以值得看看 SimpleUrlHandlerMapping 看看它是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-10T13:50:57.860

现在，根据具体情况自动排序*确实*可以正常工作。（使用弹簧 5.0.10）

在`AntPatternComparator`

```
 /**
         * Compare two patterns to determine which should match first, i.e. which
         * is the most specific regarding the current path.
         * @return a negative integer, zero, or a positive integer as pattern1 is
         * more specific, equally specific, or less specific than pattern2.
         */
        @Override
        public int compare(String pattern1, String pattern2) 
```

哪个是从`AbstractUrlHandlerMapping::lookupHandler(String urlPath, HttpServletRequest request)`

```
 Comparator<String> patternComparator = getPathMatcher().getPatternComparator(urlPath);
        if (!matchingPatterns.isEmpty()) {
            matchingPatterns.sort(patternComparator);
            if (logger.isDebugEnabled()) {
                logger.debug("Matching patterns for request [" + urlPath + "] are " + matchingPatterns);
            }
            bestMatch = matchingPatterns.get(0);
        } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-22T05:41:56.103

此 url(/home.html) 与两个映射都不匹配：

```
 @RequestMapping(value = "**/{content}.html")
    ...
    @RequestMapping(value = "**/home")
    … 
```

**它只匹配第一个，因为它有一个后缀“ *.html* ”！**

# c# - 使用 FileHelper 将可变长度记录写入文件？

> ID：14440994
> 
> 赞同：2
> 
> 时间：2013-01-21T14:41:58.543
> 
> 标签：c#, filehelpers

我正在使用`FileHelper`将记录写入平面文件。这些记录的前 20 个字段是固定的，如果值为空，则会填充空格。而最后 4 个字段是可选的，如果它们都为空，则这些位置不应填充空格。但是`FileHelper`继续用空格填充这些位置。

是否有可能实现这一目标`FileHelper`？

```
[FixedLengthRecord(FixedMode.AllowVariableLength)] 
public class MyReport
{
    [FieldFixedLength(2)]
    public string field1;

    [FieldFixedLength(10)] 
    public string field2;
    ...
    [FieldFixedLength(96)] 
    [FieldOptional]
    public string field32;

    [FieldFixedLength(96)]
    [FieldOptional]
    public string field33;

    [FieldFixedLength(96)]
    [FieldOptional]
    public string field34;

    [FieldFixedLength(96)]
    [FieldOptional]
    public string field35;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:06:26.560

[`AfterWriteRecord`您可以删除事件](http://filehelpers.sourceforge.net/FileHelpers.AfterWriteRecordHandler.html)中的任何额外分隔符。

这是一个工作示例：

```
[DelimitedRecord(",")]
public partial class Person
{
    public string FirstName;
    public string LastName;
    [FieldOptional]
    public string Optional1;
    [FieldOptional]
    public string Optional2;
    [FieldOptional]
    public string Optional3;
}      

class Program
{
    private static void Main(string[] args)
    {
        var engine = new FileHelperEngine<Person>();
        engine.AfterWriteRecord += engine_AfterWriteRecord;
        var export = engine.WriteString(
                     new Person[] { 
                       new Person() { FirstName = "Joe", LastName = "Bloggs" } 
                     });
        Assert.AreEqual("Joe,Bloggs" + Environment.NewLine, export);
    }

    static void engine_AfterWriteRecord(EngineBase engine, AfterWriteEventArgs<Person> e)
    {
        // trim trailing empty separators
        e.RecordLine = e.RecordLine.TrimEnd(',');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-09T18:54:13.373

我怀疑这是因为您在每个可选字段上都有 FixedLength() 属性。据我所知，可选属性仅在导入时才真正出现，因此如果没有值（null），则不会设置任何内容。

可以在这里找到确认：[http ://www.filehelpers.net/docs/html/T_FileHelpers_FieldOptionalAttribute.htm](http://www.filehelpers.net/docs/html/T_FileHelpers_FieldOptionalAttribute.htm)

考虑到您正在尝试做什么，我认为您将需要编写一个自定义转换器来为您处理此问题并取消 fixedwidth 属性。

```
public sealed class FixedWidth96Converter : ConverterBase
{
    public override string FieldToString(object from)
    {
        string val = from as string;
        if (!string.IsNullOrWhiteSpace(val))
        {
            return val.PadLeft(96, ' ');
        }
        return base.FieldToString(from);
    }

    public override object StringToField(string from)
    {
        return from;
    }
} 
```

# javascript - JavaScript 变量范围 - setTimeout 阻止代码查看数组

> ID：14440995
> 
> 赞同：0
> 
> 时间：2013-01-21T14:42:00.860
> 
> 标签：javascript, google-maps-api-3, scope

我正在使用 Google Map API v3 来尝试填充地图，让人们宣传他们的工作可用性。地图输出良好并且填充良好，我正在使用动画下降功能使它们很好地落入。然而，它们都是一次性掉下来的，我想让它们一次掉一个，添加一个简单的延迟是解决方案，谷歌本身就是一个例子。唯一的区别是我有一个充满结果的数组。

## 我当前的代码

```
locations = [
    <?php foreach($searchResults as $clID => $r) { ?>
        ['<?php echo $r['clUserName']; ?>', <?php echo $r['clLat']; ?>, <?php echo $r['clLng']; ?>, '<?php echo '<div style="width: 100%"><div style="font-weight: bold; line-height: 25px;">' . $r['clUserName'] . '</div>Distance: ' . number_format($r['distance'], 0) . ' miles<br />Will Travel: ' . $r['clWorkRadius'] . ' miles<br />E-mail: <a style="color: #222 !important;;" href="mailto:' . $r['clEmail'] . '"><u>' . $r['clEmail'] . '</u></a><br />Tel: ' . $r['clTelephone'] . ($r['clMobile'] ? '<br />Mob: ' . $r['clMobile'] : '') . '</div>'; ?>'],

    <?php } ?>
    ];
    function initialize() {
        var mapOptions = {
            zoom: 10,
            center: new google.maps.LatLng(<?php if($_SESSION['search']['geo']['lat'] !== 0) { echo $_SESSION['search']['geo']['lat'] . ',' .$_SESSION['search']['geo']['lng']; } else { echo '51.507335,-0.127683'; } ?>),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        var infowindow = new google.maps.InfoWindow();
        var marker;
        for(i = 0; i < locations.length; i++) {
                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                    animation: google.maps.Animation.DROP,
                    map: map
                });

                google.maps.event.addListener(marker, 'click', (function(marker, i) {
                    return function() {
                        infowindow.setContent(locations[i][3]);
                        infowindow.open(map, marker);
                    }
                })(marker, i));
        }
    }
    function loadScript() {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyA6Bru5lLQukzGx3f-AVOBTPmxglkqI5m4&sensor=false&callback=initialize";
        document.body.appendChild(script);
    }
    window.onload = loadScript; 
```

## 破坏的代码

为了错开地图上的人，我在标记周围添加了一个 setTimeout，将每个人的延迟时间稍长一些。但是，这样做会破坏代码。我不断收到 javascript 错误 TypeError: locations[i] is undefined。为什么简单地将代码包装在 setTimeout 中会阻止它查看位置？

```
 var marker;
        for(i = 0; i < locations.length; i++) {
            setTimeout(function() {
                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                    animation: google.maps.Animation.DROP,
                    map: map
                });

                google.maps.event.addListener(marker, 'click', (function(marker, i) {
                    return function() {
                        infowindow.setContent(locations[i][3]);
                        infowindow.open(map, marker);
                    }
                })(marker, i));
            }, 500);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:58:59.697

您没有将要传递给的回调包装在`setTimeout`带有`i`变量的自评估函数中，因此在调用回调时`i === locations.length`（循环的终止情况）。

```
var marker;
for (i = 0; i < locations.length; i++) {
    setTimeout((function (i) {
        return function () {
            marker = new google.maps.Marker({
                position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                animation: google.maps.Animation.DROP,
                map: map
            });

            google.maps.event.addListener(marker, 'click', (function (marker, i) {
                return function () {
                    infowindow.setContent(locations[i][3]);
                    infowindow.open(map, marker);
                }
            })(marker, i));
        };
    })(i), 500);
} 
```